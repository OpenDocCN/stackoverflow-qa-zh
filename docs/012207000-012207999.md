# StackOverflow 问答 12207000-12207999

# ruby - ruby 中的 URL 编码

> ID：12207000
> 
> 赞同：0
> 
> 时间：2012-08-30T23:24:55.377
> 
> 标签：ruby, url-encoding

我有一段代码：

```
temp = "Cancel"
puts CGI::escape(words[1])
puts "\n"
puts CGI::escape(temp)
puts "\n"
puts words[1]
puts "\n"
puts temp
puts "\n" 
```

我的输出是：

```
%00C%00a%00n%00c%00e%00l%00

Cancel

Cancel

Cancel 
```

我认为可以公平地假设这里的问题是我设置单词数组的方式。但是，我想知道这是否是有解决方案的常见行为？如果没有，我可能做错了什么会导致这种情况？

我的 words 数组是通过从文件中读取数据，然后拆分每一行并提取我需要的信息来设置的，所以它并不太复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:40:32.920

您的字符串中有 NUL 字节。`puts`只是忽略它们。

```
1.9.2p290 :016 > puts "Fo\0oooo"
Fooooo
 => nil 
```

通过检查，您可以看到它们：

```
1.9.2p290 :017 > puts "Fo\0oooo".inspect
"Fo\u0000oooo"
 => nil 
```

这里的输出`CGI::escape`

```
1.9.2p290 :018 > puts CGI::escape("Fooo\0ooo")
Fooo%00ooo
 => nil 
```

编辑：

快速而肮脏的解决方案是删除它们：

```
"Fooooo\0ooo".gsub(/\0/, "")
 => "Foooooooo" 
```

但是由于每个字符前面都有 NUL 字节，因此最好检查代码以读取文件。如果您提供代码，则更容易提出解决方案。

# clojure - 在 clojure 中，如何根据自身定义 defmacro？

> ID：12207008
> 
> 赞同：7
> 
> 时间：2012-08-30T23:26:05.463
> 
> 标签：clojure

我一直在查看在定义中使用“let”的 defmacro 的来源：

```
(def

 ^{:doc "Like defn, but the resulting function name is declared as a
  macro and will be used as a macro by the compiler when it is
  called."
   :arglists '([name doc-string? attr-map? [params*] body]
                 [name doc-string? attr-map? ([params*] body)+ attr-map?])
   :added "1.0"}
 defmacro (fn [&form &env 
                name & args]
             (let [prefix (loop [p (list name) args args] 
```

但是，“let”本身被定义为宏：

```
(defmacro let
  "binding => binding-form init-expr

  Evaluates the exprs in a lexical context in which the symbols in
  the binding-forms are bound to their respective init-exprs or parts
  therein."
  {:added "1.0", :special-form true, :forms '[(let [bindings*] exprs*)]}
  [bindings & body]
  (assert-args
     (vector? bindings) "a vector for its binding"
     (even? (count bindings)) "an even number of forms in binding vector")
  `(let* ~(destructure bindings) ~@body)) 
```

有人可以解释这是如何工作的，因为我无法理解如何根据需要定义“defmacro”的事物来定义“defmacro”。（如果这有意义的话:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T04:43:45.573

这是可能的，因为`defmacro`在 core.clj 中定义函数之前，`let`在[这个位置](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L32)已经有一个定义（稍后会重新定义）。宏只是普通函数，它们绑定的 var 具有`:macro`带值的元数据键，`true`因此在编译时编译器可以区分宏（在编译时执行）和函数，没有这个元键就没有办法区分宏和函数，因为宏本身就是一个处理 S 表达式的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T00:24:33.383

recusive 宏工作正常，并且出现在 clojure 语言核心和其他程序中的许多地方。**宏只是返回 S-Expressions 的函数**，因此它们可以像函数一样递归。在`let`您的示例中，它实际上是 caling `let*`，它是一个不同的函数（在函数名称中包含 * 很好），所以虽然递归宏很好，但这并不是它们的一个例子

# ruby-on-rails - 与计划具有一对多关系的对象的未定义方法“build_schedule”

> ID：12207009
> 
> 赞同：0
> 
> 时间：2012-08-30T23:26:11.640
> 
> 标签：ruby-on-rails, activerecord

在我的 Schedules Controller 中，我有以下方法：

```
def create
    @schedule = current_user.team.create_schedule(params[:schedule])
    if @schedule.save
        flash[:success] = "Schedule created!"
        redirect_to current_user.team
    else
        flash[:error] = "Sorry! Something went wrong."
        render new_schedule_path
    end
end 
```

当我尝试创建计划时，第二行出现错误：undefined method `create_schedule' for #

但是，团队模型有很多时间表，并且时间表模型属于团队，所以我不确定问题是否存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:08:13.213

如果它是一个 has_one 关联，则该`create_schedule`方法将是。它应该是`@schedule = current_user.team.schedules.build(params[:schedule])`

# ios - 带有流式 H.264 样本的 AVAssetReader

> ID：12207010
> 
> 赞同：4
> 
> 时间：2012-08-30T23:26:11.923
> 
> 标签：ios, stream, decode, h.264, rtsp

我正在编写一个 RTSP/H.264 客户端。解析 RTSP 的 Live555 很棒，但是使用 ffmpeg 进行软件解码太慢了。我想使用 AVFoundation 对样本进行硬件解码。我不知道该怎么做。我的问题是，有没有办法让 AVFoundation（AVAssetReader？）在这些样本进入并在屏幕上显示提要时对其进行解码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:32:32.493

从现在开始，使用H264编码的媒体样本来自内存不能使用硬件解码，因为iOS没有开放这些接口，你只能解码本地文件或通过HTTP Live Streaming。但是，有一种可能的解决方案是将每个样本写入一个单独的 mp4 文件，然后使用 AVAssetReader 读取它，但我没有尝试过，也许速度是一个限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:31:22.967

这至少可以让你开始

[https://github.com/mooncatventures-group/FFPlayer-tests](https://github.com/mooncatventures-group/FFPlayer-tests)

# php - 用里面的php代码回显html

> ID：12207012
> 
> 赞同：0
> 
> 时间：2012-08-30T23:26:43.250
> 
> 标签：php, html

```
<?php
$sample = 0;
    if($sample ==0)
    {   
        $displayinner = '<option value =' . $row['privilege_ID'] . '>' . $row['privilege_name'] . '</option>';
        $displayouter = '<td><label>Privileges:</label></td>
          <td><select name = "Privilege" id = "Privilege" multiple="multiple">
              <?php
                $PrivilegeNames = mysql_query("SELECT * FROM privilege");
                while($row = mysql_fetch_array($PrivilegeNames))
                    echo $displayinner;
              ?>
            </select></td>
          </tr>
          <tr>';
        echo $displayouter;
    }
?> 
```

我只得到一个下拉框，里面没有任何数据。请帮忙，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:34:18.593

是的，那是行不通的——有很多问题，你的“模板”代码将被解析，这会导致错误，你不能`<?php`像这样嵌套块。为了得到你想要的，试试这个：

```
$displayouter = '<td><label>Privileges:</label></td><td><select name = "Privilege" id = "Privilege" multiple="multiple">';

$PrivilegeNames = mysql_query("SELECT * FROM privilege");
while($row = mysql_fetch_array($PrivilegeNames)) {
    $displayouter .= '<option value =' . $row['privilege_ID'] . '>' . $row['privilege_name'] . '</option>';
}

$displayouter .= '</select></td></tr><tr>';

echo $displayouter; 
```

如果您以后不需要该变量`$displayouter`，则可以只`echo`使用所有内容，或者如果这是模板代码，则完全[跳出 PHP 块。](http://php.net/manual/en/control-structures.alternative-syntax.php)请注意使用`.=`，它将数据附加到现有变量。

这里有很多可能的安全漏洞，但希望这有助于查看一些工作代码。确保用于[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php) 所有未知的 HTML 输出，一方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:37:32.080

```
<?php
$sample = 0;
if($sample == 0)
{   
    $displayPre     = '<td><label>Privileges:</label></td>
      <td><select name = "Privilege" id = "Privilege" multiple="multiple">';
    $displayPost    = '</select></td>
      </tr>
      <tr>';
    $PrivilegeNames = mysql_query("SELECT * FROM privilege");

    echo $displayPre;

    while($row = mysql_fetch_array($PrivilegeNames))
        echo '<option value =' . $row['privilege_ID'] . '>' . $row['privilege_name'] . '</option>';

    echo $displayPost;
}

?> 
```

内部 php 标记未正确解析，请尝试上面的代码，它使用 pre 和 post 部分实现表单，因此您无需在字符串中放置新的 php 块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T23:39:10.687

Wesley Murch 很接近，但缺少一些东西：值周围的引号，以及`htmlentities`用于防止 XSS 注入。

```
$displayouter = '<td><label>Privileges:</label></td><td><select name = "Privilege" id = "Privilege" multiple="multiple">';

$PrivilegeNames = mysql_query("SELECT * FROM privilege");
while($row = mysql_fetch_array($PrivilegeNames)) {
    $displayouter .= '<option value="' . htmlentities($row['privilege_ID']) . '">' . htmlentities($row['privilege_name']) . '</option>';
}

$displayouter .= '</select></td></tr><tr>';

echo $displayouter; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T23:46:26.050

我没有测试语法，但你做了一些错位。

```
<?php 
$sample = 0; 
     if($sample ==0) 
     {    
          $displayinner = '<option value =' . $row['privilege_ID'] . '>' . $row['privilege_name'] . '</option>';
?>
          <td><label>Privileges:</label></td> 
             <td><select name = "Privilege" id = "Privilege" multiple="multiple"> 
<?php
                     $PrivilegeNames = mysql_query("SELECT * FROM privilege"); 
                     while($row = mysql_fetch_array($PrivilegeNames)) 
                          echo $displayinner; 
?>
                </select></td> 
             </tr> 
             <tr>
<?php
     } 
?> 
```

# python - NoReverseMatch django错误多个URL相同的方法

> ID：12207013
> 
> 赞同：0
> 
> 时间：2012-08-30T23:26:54.367
> 
> 标签：python, django, django-templates

错误信息：

```
ExceptionType: NoReverseMatch
Exception Value: Reverse for 'darts.teams.views.expanded_details' with arguments '(u'RightFlights',)' and keyword arguments '{}' not found. 
```

在模板中：

```
<a href="{{ lib.url(expanded_details, team.name) }}" class="btn btn-cog">Expanded Details</a> 
```

在 urls.py

```
urlpatterns = patterns('darts.teams.views',
    url(r'^(?P<teamname>.*?)/expanded_details/$', 'team_details', {'expanded': True}, "expanded_details"),
    url(r'^(?P<teamname>.*?)/details/$', 'team_details', name="team_details"),

    url(r'^(?P<teamname>.*?)/add_player/$', 'team_add_player', name="team_add_player"),
    url(r'^(?P<teamname>.*?)/add_player/confirm/$', 'team_add_player',"team_add_player_confirm"),
) 
```

urls.py 中的其他 URL 都可以正常呈现，但“expanded_details”会引发错误。

为什么这个和其他的不一样？我错过了什么公然的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:42:49.077

*更新*

错误显示“`'darts.teams.views.expanded_details'`失败时反转”，但它应该是`'darts.teams.views.team_details'`or `'expanded_details'`。第一种形式是要查看的路径，后者是命名 URL 的名称。
您可以检查`expanded_details`模板标签内的值，以确保将其解析为上述正确值之一，或遵循 slackjake 的建议：`'expanded_details'`直接使用（注意单引号）。

* * *

`(?P<teamname>.*?`无效，也许你的意思是`(?P<teamname>.*?)`？
还有，有什么作用`lib.url`？

# python - Python 相当于 R 中的 which()

> ID：12207014
> 
> 赞同：28
> 
> 时间：2012-08-30T23:27:05.403
> 
> 标签：python, r, indices

我正在尝试采用以下 R 语句并使用 NumPy 将其转换为 Python：

```
1 + apply(tmp,1,function(x) length(which(x[1:k] < x[k+1]))) 
```

是否有与 which() 等效的 Python？这里，*x*是矩阵*tmp*中的行，*k*对应于另一个矩阵中的列数。

以前，我尝试了以下 Python 代码，并收到一个值错误（操作数无法与形状一起广播）：

```
for row in tmp:
        print np.where(tmp[tmp[:,range(k)] < tmp[:,k]]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-17T18:44:04.217

```
    >>> 其中 = lambda lst:list(np.where(lst)[0])

    例子：
    >>> lst = map(lambda x:x<5, range(10))
    >>> lst
    [真，真，真，真，真，假，假，假，假，假]
    >>> 哪个(lst)
    [0, 1, 2, 3, 4]

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:40:35.157

下面的 Python 代码回答了我的问题：

```
np.array([1 + np.sum(row[range(k)] < row[k]) for row in tmp]) 
```

这里*tmp*是一个二维数组，*k*是一个为列比较而设置的变量。

感谢[https://stackoverflow.com/users/601095/doboy](https://stackoverflow.com/users/601095/doboy)用答案启发了我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T00:06:50.577

来自[http://effbot.org/zone/python-list.htm](http://effbot.org/zone/python-list.htm)：

> 要获取所有匹配项的索引，可以使用循环，并传入起始索引：

```
i = -1
try:
    while 1:
        i = L.index(value, i+1)
        print "match at", i
except ValueError:
    pass 
```

# javascript - Extjs 4 grid mouseover show full cell value

> ID：12207018
> 
> 赞同：10
> 
> 时间：2012-08-30T23:28:18.957
> 
> 标签：javascript, grid, extjs4, javascript-framework

I've got a grid with a long string in one of the columns. I would like the full string to appear when the user mouses over any cell in this column.

So far I have it working where a tooltip pops up for any cell in this column but they don't display the text. The tooltip always just says "Icon Tip".

**How do I get the qtip to display the variable val instead of the string "Icon Tip"?**

```
Ext.define('AM.view.user.List' , {
    extend: 'Ext.grid.Panel',
    .......
    initComponent: function() {
        function renderTip(val, meta, rec, rowIndex, colIndex, store) {
            meta.tdAttr = 'data-qtip="Icon Tip"';
            return val;
        };
        this.columns = [
            {header: 'First Name', dataIndex: 'FirstName', width: 75},
            {header: 'Last Name', dataIndex: 'Last', width: 75},
            {header: 'Perm', dataIndex: 'Perm', width: 75},
            {header: 'Comment', dataIndex: 'Comments', width: 150, renderer: renderTip}
        ];
        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T23:23:10.577

Figured it out on the sencha forums, the correct code would be:

```
function renderTip(value, metaData, record, rowIdx, colIdx, store) {
    metaData.tdAttr = 'data-qtip="' + value + '"';
    return value;
}; 
```

I guess there was some string/variable concatenation I needed to use

[http://www.sencha.com/forum/showthread.php?179016-Grid-cell-tooltip](http://www.sencha.com/forum/showthread.php?179016-Grid-cell-tooltip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:37:39.303

You already have the value, it gets passed as the first argument to the renderer. If you need more information, you also have the record.

# sql - SSIS 用户定义类型

> ID：12207019
> 
> 赞同：2
> 
> 时间：2012-08-30T23:28:21.047
> 
> 标签：sql, sql-server-2005, ssis, data-conversion

我们正在尝试使用 SSIS 包从平面文件将数据导入我们的 SQL 2005 数据库。

我们的数据库有一个 CLR 用户定义类型，用于保存一些相关信息，我们称之为 dbo.CustomType。

要在 SQL 中创建 dbo.CustomType 的对象，我可以执行以下操作：

```
DECLARE @Decimal1   DECIMAL(18,6),
        @Int1       INT,
        @Decimal2   DECIMAL(18,6),
        @Int2       INT,
        @Decimal3   DECIMAL(18,6)

SELECT  @Decimal1   = 1.5,
        @Int1       = 1,
        @Decimal2   = 2.5,
        @Int2       = 2,
        @Decimal3   = 3

SELECT 
    CONVERT(
                dbo.CustomType,
                CONVERT(VARCHAR(20), @Decimal1) + ';' + 
                CONVERT(VARCHAR(20), @Decimal2) + ':' +
                CONVERT(VARCHAR(2), @Int1) + ';' +
                CONVERT(VARCHAR(20), @Decimal3) + ':' +
                CONVERT(VARCHAR(2),  @Int2)
            ) 
```

在 SSIS 中，我有一个数据集，其中所有列都由变量表示，但是如何将它们组合起来并将它们转换为 dbo.CustomType？

====

更新：

在 OLE DB 命令对象而不是 OLE DB 目标中使用插入语句时，我能够插入自定义类型。

所以：

```
INSERT INTO Greg
VALUES (CONVERT(dbo.CustomType, '1;1:1;1:1;')) 
```

有效，但是

```
INSERT INTO Greg
VALUES (Convert(dbo.Customtype, ?)) 
```

给出错误

[OLE DB 命令 [3103]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0”Hresult：0x80040E21 描述：“转换规范的字符值无效”。

它似乎正在尝试将我的字符串列转换为字节流，但是每当我尝试在高级编辑器中将 Param_0 更改为 String 时，它都会不断变回字节流

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:57:13.137

您可以尝试分两步进行：

1.  在数据流任务中将此数据插入临时表以分隔列，
2.  然后在执行 SQL 任务中使用转换将数据从临时表插入到目标

例子：

```
insert into DestinationTable
select convert(dbo.Customtype, DecimalColumn1, DecimalColumn2, IntColumn1, DecimalColumn3, IntColumn2)
from StaggingTable 
```

# java - 树结构和 XML

> ID：12207024
> 
> 赞同：0
> 
> 时间：2012-08-30T23:29:14.880
> 
> 标签：java, jquery, xml, tree

我需要将用户创建的文件夹结构存储到 xml 文件中。我认为允许使用树结构是最好的选择。我将为此使用 java 和 [jsTree](http://www.jstree.com/demo)。当用户保存数据时，我会将所有选项作为 json 传递给 jsp 文件并将其保存为 xml 文件。

如果有更好的方法，任何人都可以建议我？

我希望我在正确的地方发布这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:13:34.110

根据 jsTree 的工作方式（我没看过太多），将所有内容直接序列化为 XML 而不是 JSON 可能同样容易。这样就避免了在 Java 代码中从 JSON 转换为 XML 的麻烦。如果你走这条路，你甚至可以完全避免服务器端处理，而是直接从 javascript 生成文件。查看[此](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)问题以了解完成此操作的选项。

除此之外，对我来说似乎是一个好计划。

# c# - 每次调用 Equals 都会返回 false，即使值相同 (C#)

> ID：12207030
> 
> 赞同：1
> 
> 时间：2012-08-30T23:29:45.417
> 
> 标签：c#, xna, compare, equals

我在使用 XNA 屏幕的 Windows 窗体应用程序中遇到问题。我想看看在完成多行代码后对象是否发生了变化。如果是这样，它应该在 Title 中添加一个 * 来告诉用户文件做了更改但没有保存。

为此，我复制了对象，并在这些行之后检查它们是否相等。

```
 MapSquare afterChange = TileMap.GetMapSquareAtPixel((int)mouseLoc.X,(int)mouseLoc.Y);
 MapSquare beforeChange = (MapSquare)afterChange.Clone();
 // code.....
 if (!Object.Equals(beforeChange,afterChange))
 parentForm.MapChanged = true; // this happens even when no changes happend 
```

这个错误一定是在我与 Iclonable 接口一起使用的克隆方法中，因为即使我在复制它后立即检查等于，它也不起作用。

```
public object Clone()
    {
        return new MapSquare(this);
    }
 private MapSquare(MapSquare squere)
    {
        this.LayerTiles = (int[])squere.LayerTiles.Clone();
        this.CodeValue = squere.CodeValue;
        this.Behavior = squere.Behavior;

    } 
```

有什么错误？我认为它在 layertiles 数组中，但我已经在那里尝试了很多东西，所以我不知道该怎么做。或者还有其他更简单的方法来解决我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T23:32:42.987

您需要覆盖[`Object.Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)您的`MapSquare`类型以使其根据值比较相等性。默认情况下，`Object.Equals`仅当两个变量引用相同的实际实例时才返回 true - 如果它们具有相同的成员值，则不会。

如果您打算这样做，我建议您也实施[`IEquatable<MapSquare>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T23:32:49.500

除非您重载相等运算符，否则您将测试两个对象*引用*是否相等，而不是它们是否包含相同的值。

# css - CSS 类和左 -387

> ID：12207032
> 
> 赞同：0
> 
> 时间：2012-08-30T23:30:05.137
> 
> 标签：css

我是css的新手，我正在为一个网站制作一个菜单栏，我知道问题出在哪里，只是不知道如何解决它。

导航栏旨在将元素 Left -9999 隐藏在屏幕之外，直到发生悬停，然后将左侧设置为 -0。但是，我的一个标签“链接”有一个 5 列的正文，该正文从屏幕右侧消失。我需要一种向左移动的方法：-387px。我不能做 style="left:-387;" 直接在 div 上，因为这样它在不使用时不会隐藏菜单。有人可以帮我解决这个菜单项的问题吗？

我通常会在此处发布脚本或使用 jsfiddle，但两者都有很多代码。但是，您可以在此处找到该站点：

[http://gdisinc.com/barker/default.php](http://gdisinc.com/barker/default.php)

这是它的问题之一：

```
.dropdown_1column {width: 175px;}
.dropdown_2columns {width: 280px;}
.dropdown_3columns {width: 420px;}
.dropdown_4columns {width: 560px;}
.dropdown_5columns {width: 700px;}

#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {

   /* I need this to be -387 but if I change this it will mess up all menus. */
   left:-1px; 
   top:auto;
} 
```

这是我们隐藏菜单项的地方

```
.dropdown_5columns {

/* This places the body of the menu item right below the menu bar. */
margin-top: 12px;

/*Containers with different sizes will hold the entire drop down content. I've chosen the tag names according to the number of columns they will contain. To hide the drop downs, we'll use absolute positioning with a negative left margin: */

float:left;
position:absolute;
left:-999em; /* Hides the drop down */
text-align:left;

border:1px solid #777777;
border-top:none;

/* Gradient background
The background fallback color is the same as the one used for the menu items. Modern browsers will display a gradient starting with #EEEEEE at the top (to match the parent menu item gradient) and ending with #BBBBBB at the bottom: */
background: #F4F4F4;
background: -moz-linear-gradient(top, #EEEEEE, #BBBBBB);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEEEEE), to(#BBBBBB));

/* Rounded Corners 
We'll again use rounded corners, except for the top left one: */
-moz-border-radius: 0px 0px 5px 5px;
-webkit-border-radius: 0px 0px 5px 5px;
border-radius: 0px 0px 5px 5px;
 } 
```

这是我得到教程的地方：http: [//net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)

我很确定解决方法是为“链接”链接创建一个单独的类，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:34:27.813

将您的左侧属性保留为 0 并改用显示块

```
#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {

   /* all menus are display:none by default */
   display:block;
} 
```

# events - jQuery .on() 事件不适用于动态添加的元素

> ID：12207033
> 
> 赞同：15
> 
> 时间：2012-08-30T23:30:15.707
> 
> 标签：events, jquery, dynamically-generated

我正在制作一个项目，其中当用户单击按钮时动态插入带有按钮的整个 div，并且在该 div 中有一个按钮，当用户单击它时，它会执行其他操作，例如提醒某些内容。

问题是当我在动态添加的 div 中按下该按钮时，什么也没有发生。该事件根本不会触发。

我尝试在 HTML 中添加该 div 并再次尝试，该事件有效。所以我想这是因为 div 是动态添加的。

添加的 div 有一个 class `mainTaskWrapper`，而 button 有一个 class `checkButton`。该活动附在下面文件`.on()`的末尾。`script.js`

这是我的代码：

**helper_main_task.js ：（**这是添加 div 的对象，您不必阅读它，因为我认为这都是关于动态添加该 div 的，但我会在需要时将其放入）

```
var MainUtil = {
    tasksArr : [],
    catArr : ["all"],
    add : function(){       

        var MTLabel = $("#mainTaskInput").val(),  //task label  
            MTCategory = $("#mainCatInput").val(), //task category 
            MTPriority = $("#prioritySlider").slider("value"),  //task priority     
            MTContents = $('<div class="wholeTask">\
                                <div class="mainTaskWrapper clearfix">\
                                    <div class="mainMarker"></div>\
                                    <label class="mainTaskLabel"></label>\
                                    <div class="holder"></div>\
                                    <div class="subTrigger"></div>\
                                    <div class="checkButton"></div>\
                                    <div class="optTrigger"></div>\
                                    <div class="addSubButton"></div>\
                                    <div class="mainOptions">\
                                        <ul>\
                                            <li id="mainInfo">Details</li>\
                                            <li id="mainEdit">Edit</li>\
                                            <li id="mainDelete">Delete</li>\
                                        </ul>\
                                    </div>\
                                </div>\
                            </div>');

        this.tasksArr.push(MTLabel);

        //setting label
        MTContents.find(".mainTaskLabel").text(MTLabel);        

        //setting category  
        if(MTCategory == ""){
            MTCategory = "uncategorized";
        }
        MTContents.attr('data-cat', MTCategory);
        if(this.catArr.indexOf(MTCategory) == -1){
            this.catArr.push(MTCategory);
            $("#categories ul").append("<li>" + MTCategory +"</li>");
        }
        $("#mainCatInput").autocomplete("option", "source",this.catArr);

        //setting priority marker color
        if(MTPriority == 2){ 
            MTContents.find(".mainMarker").css("background-color", "red");
        } else if(MTPriority == 1){
            MTContents.find(".mainMarker").css("background-color", "black");
        } else if(MTPriority == 0){
            MTContents.find(".mainMarker").css("background-color", "blue");
        }       

        MTContents.hide();
        $("#tasksWrapper").prepend(MTContents); 
        MTContents.slideDown(100);

        $("#tasksWrapper").sortable({
            axis: "y",
            scroll: "true",
            scrollSpeed : 10,
            scrollSensitivity: 10,
            handle: $(".holder")            
        });

    }
}; 
```

**script.js ：（** .on() 函数位于底部的文件）

```
$(function(){
     $("#addMain, #mainCatInput").on('click keypress', function(evt){       
        if(evt.type == "click" || evt.type =="keypress"){
            if((evt.type =="click" && evt.target.id == "addMain") ||
                (evt.which == 13 && evt.target.id=="mainCatInput")){    
                    MainUtil.add();                                             
            }
        }
    });

    //Here's the event i'm talking about :
    $("div.mainTaskWrapper").on('click', '.checkButton' , function(){
        alert("test text");
    });
}); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-30T23:33:22.840

它看起来不`div.mainTaskWrapper`存在。

从[文档](http://api.jquery.com/on/)中（是的，它实际上是粗体）：

> **事件处理程序仅绑定到当前选定的元素；当您的代码调用`.on()`.** 为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。
> 
> [...]
> 
> 通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

您可能希望将其绑定到`#tasksWrapper`：

```
$("#tasksWrapper").on('click', '.checkButton' , function(){
    alert("test text");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T23:38:02.687

您需要使用`on`（作为参数）指定一个选择器，以使其表现得像旧`delegate`方法一样。如果您不这样做，则该事件将仅链接到当前匹配的元素 `div.mainTaskWrapper`（尚不存在）。您需要在添加新元素后重新分配事件，或者将事件添加到已经存在的元素，例如`#tasksWrapper`文档本身。

[请参阅本页](http://api.jquery.com/on/)上的“直接和委托事件” 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-07T16:06:30.257

我知道这是一篇旧帖子，但可能对遇到的其他人有用......

你可以试试：

```
jQuery('body')on.('DOMNodeInserted', '#yourdynamicallyaddeddiv', function () {
//Your button click event
}); 
```

这是一个简单的例子 - [https://jsfiddle.net/8b0e2auu/](https://jsfiddle.net/8b0e2auu/)

# java - 将来自 URL 的精确输出嵌入到 JSP 中的最佳方法

> ID：12207034
> 
> 赞同：0
> 
> 时间：2012-08-30T23:30:27.770
> 
> 标签：java, jquery, html, jsp, liferay

我正在使用 Liferay，我需要将 URL 的 HTML 输出预览显示为 JSP 视图中的嵌入窗口。我正在评估不同的可能性。

1.  将要预览的界面存储为屏幕截图图像并将其显示为嵌入图像。好消息是格式完全一样。

2.  使用 BufferedReader 解析 URL 输出流，并使用 indexOf 清除所有 html、脚本、正文标记。嵌入图像为`cid:`

3.  某种包含，jsp:include 或 liferay-util:include 形成下载的时间 HTML 输出的直接 URL

4.  任何 JQuery AJAX $().html() 类型的解决方案

5.  iframe、applet、frame、appletwindow 中的任何 HTML 级解决方案或其他任何内容（如果存在）

您认为最好或推荐的方法是什么：最简单、可靠且外观准确？任何代码或参考？

如果我不得不将它作为 JavaMail 消息内容发送到电子邮件方向？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:06:37.190

这可能应该在客户端、用 Javascript 甚至通过 iframe 完成。要么将 iframe 直接放在页面中，要么具有生成 iframe 的 javascript 代码，并将 iframe 指向要预览的 URL。把事情简单化。

# php - json_encode 添加特殊字符

> ID：12207035
> 
> 赞同：1
> 
> 时间：2012-08-30T23:30:42.180
> 
> 标签：php, javascript, jquery

现在不必阅读无聊的代码，让我简单总结一下发生了什么。当文档加载时，一个 XHR 请求通过 jQuery post 函数发出。该帖子将一个 POST 标头发送到一个 PHP 文件，该文件调用另一个 php 文件来处理一些字符串并返回它。最后，一个回显的 json_encode 函数将字符串返回给 jQuery post 函数，然后 jQuery 将其操作到 DOM 中。

JavaScript 的 post 函数返回的结果是这样的：

```
<option value="\&quot;auto2\&quot;">auto2&lt;\/option&gt;</option> 
```

看到所有那些转义字符了吗？好吧，我尝试在 PHP 端回显结果，而不是`echo`使用`json_encode`函数，它返回：

```
<option value="auto">auto</option> 
```

没有任何其他特殊字符。这是所希望的。我的问题是，这个可以用吗？为什么要`json_encode`添加特殊字符？有没有办法在`json_encode`不返回其他字符的情况下使用？

**编辑**

**JS**

```
 $(document).ready(function() {
    var PROCESSOR_FILE = "http://address/include/processor.php";

    $.post(PROCESSOR_FILE, {"task": "verticalSelect"}, function(data) {
        $("#verticalSelect").html(data);
    });
}); 
```

**PHP**

```
$IMEXporterpath = dirname(__FILE__);
$IMEXporterFile = $IMEXporterpath . "/IMEXporter.class.php";

if (isset($_REQUEST["task"]))
    $task   = $_REQUEST["task"];
else
    $task   = "";

    require_once $IMEXporterFile;
    $IMEXp = new IMEXp();

    $result = $IMEXp->returnHtml($task);
    echo json_encode($result); 
```

**更多 PHP**

```
public function returnHtml($element) {
        return $this->returnHtml_HTML($element);
    }

    private function returnHtml_HTML($element) {
        if($element == "verticalSelect") {

            $dbTables   = $this->get_Tables();
            $nbTable    = count($dbTables);

            for ($a = 0; $a < $nbTable; $a++) {
                    $ZHTML  .=  '<option value="'.$dbTables[$a].'">'.$dbTables[$a].'</option>';
            }
        }
        return $ZHTML;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:50:43.783

没有看到一些代码，很难知道发生了什么，也许我不明白你的问题。根据我的经验，最好将所有内容都放在 UTF-8 中。我记不清了，但在某些情况下，UTF-8 是 AJAX 的默认值。抱歉我的含糊不清，但如果您不使用 UTF-8，似乎没有一个好的解决方法。

这意味着您应该将数据库中的所有表都更改为 UTF-8，将所有文件保存为 UTF-8 格式（我使用 TextPad 更改格式），并将所有 HTML 页面指定为 UTF-8。

我不得不经历那种不愉快的经历，因为我用葡萄牙语开发了很多带有重音字符的网站。我曾经尝试使用 ISO-8859-1，但在更多地使用 AJAX 之后，我发现 UTF-8 确实是唯一可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:53:49.923

在 PHP 5.3.13 上：

```
header("Content-Type: text/plain"); // to make sure browser displays raw html
$str = '<option value="auto">auto</option>';

echo json_encode($str);
echo "\n";
echo $str; 
```

输出

```
"<option value=\"auto\">auto<\/option>"
<option value="auto">auto</option> 
```

这里没有转换的特殊字符。

```
$.post('test.php').done(function(text){
  return console.log(text);
}); 
```

将相同的内容打印到控制台。

如果没有 AJAX，json_encode($str) 会显示`&quot;`等吗？

# c# - XDocument.XPathSelectElements ：我似乎无法正确使用 xpath 语法

> ID：12207036
> 
> 赞同：2
> 
> 时间：2012-08-30T23:30:48.050
> 
> 标签：c#, xpath

我正在尝试找出为什么我的 xpath 不会选择我指定的节点

我的 xpath 表达式是`//DefaultValue`，所以我希望选择名称 DefaultValue 的所有元素

我的测试文件（删减）是：

```
<?xml version="1.0" encoding="utf-8"?>
<SharedDataSet xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner" xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/shareddatasetdefinition">
  <Description />
  <DataSet Name="ddd">
    <Query>
      <DataSourceReference>xxx</DataSourceReference>
      <DataSetParameters>
        <DataSetParameter Name="p1">
          <DefaultValue>baaaah</DefaultValue> <!-- this node should be selected eh? -->
        </DataSetParameter>
        <DataSetParameter Name="p2">
          <DefaultValue>fooo</DefaultValue>   <!-- this node should be selected too eh? -->
        </DataSetParameter>
      </DataSetParameters>
   </Query>
 </SharedDataSet> 
```

代码是：

```
XmlNamespaceManager xn = new XmlNamespaceManager(new NameTable());
xn.AddNamespace("ns", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/shareddatasetdefinition");
xn.AddNamespace("rd", "http://schemas.microsoft.com/SQLServer/reporting/reportdesigner");
xn.AddNamespace("cl", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/componentdefinition");

XDocument document = XDocument.Parse(reportBuffer, LoadOptions.PreserveWhitespace);
IEnumerable<XElement> elements = document.XPathSelectElements(xpath, xn); 
```

在此刻`elements.Count() equals 0`

谁能看到我表现出的愚蠢？

我似乎无法让 xml 恶魔高兴... :-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:10:26.110

该`<DefaultValue>`元素实际上绑定到命名空间`http://schemas.microsoft.com/sqlserver/reporting/2010/01/shareddatasetdefinition`。

文档元素的`<SharedDataSet>`声明没有前缀，因此很容易错过。由于`<DefaultValue>`是后代，它继承了命名空间。

如果要选择`<DefaultValue>`需要调整 XPath 的元素：

```
//ns:DefaultValue 
```

# generics - NUnit 使用数据测试泛型

> ID：12207037
> 
> 赞同：0
> 
> 时间：2012-08-30T23:31:01.680
> 
> 标签：generics, nunit

我对测试类有以下定义。

```
[TestFixture(typeof(List<int>), typeof(int))]
[TestFixture(typeof(List<string>), typeof(string))]
public class SerializableListTests<TList, TValue> where TList : IList<TValue>, new() 
```

我正在使用 NUnit 进行测试，并找到了使用上述代码为我正在测试我的泛型类的特定类型动态创建固定装置的示例。

我发现的问题是当我需要测试数据时。例如，将项目添加到列表中。我不能让我的测试添加整数，因为字符串类型测试都会失败。例如

```
public void Serializing_then_deserialize_returns_same_list()
{
     var xmlSerializer = new XmlSerializer(typeof(SerializableList<TList, TValue>));
     var xmlMemoryStream = new MemoryStream();

     var serializedList = new SerializableList<TList, TValue>();

     serializedList.List.Add(1);

     //Continue with deserialization and collection assert lists are equal.
} 
```

有没有办法将测试中使用的数据链接到 TestFixture 使用的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:08:41.910

我有一些不错的运气来做类似的事情，比如使用抽象类，`SerializableListTests<TList, TValue>`并将我的其他特定于他们自己类型的测试装置子类化。在那里，您可以让基类 testfixture 进行添加，因为它是强类型的。

# .net - 从 Win8 应用程序到 WCF 服务的 HttpClient.PostAsync 提供错误 400 错误请求

> ID：12207038
> 
> 赞同：1
> 
> 时间：2012-08-30T23:31:14.667
> 
> 标签：.net, wcf, rest, windows-8

我有一个尝试访问 RESTful WCF 服务的 Windows 8 应用程序。

我还尝试使用控制台应用程序访问该服务，但出现相同错误。

我有一个基本对象，我正试图从我的 Win8 客户端发送到服务，但我收到 HTTP 400 错误。

**服务代码**

```
[DataContract(Namespace="")]
public class PushClientData
{
    [DataMember(Order=0)]
    public string ClientId { get; set; }

    [DataMember(Order=1)]
    public string ChannelUri { get; set; }
}

[ServiceContract]
public interface IRecruitService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "client")]
    void RegisterApp(PushClientData app);
}

public class RecruitService : IRecruitService
{
    public void RegisterApp(PushClientData app)
    {
        throw new NotImplementedException();
    }
} 
```

**客户端代码**

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        var data = new PushClientData
                       {
                           ClientId = "client1",
                           ChannelUri = "channel uri goes here"
                       };
        await PostToServiceAsync<PushClientData>(data, "client");
    }

    private async Task PostToServiceAsync<T>(PushClientData data, string uri)
    {
        var client = new HttpClient { BaseAddress = new Uri("http://localhost:17641/RecruitService.svc/") };

        StringContent content;
        using(var ms = new MemoryStream())
        {
            var ser = new DataContractSerializer(typeof (T));
            ser.WriteObject(ms, data);
            ms.Position = 0;
            content = new StringContent(new StreamReader(ms).ReadToEnd());
        }

        content.Headers.ContentType = new MediaTypeHeaderValue("text/xml");
        var response = await client.PostAsync(uri, content);

        response.EnsureSuccessStatusCode();
    } 
```

我究竟做错了什么？

我已经查看了提琴手中的请求，它会发出

```
http://localhost:17641/RecruitService.svc/client 
```

就像我认为应该的那样，但每次返回都是错误 400（错误请求）。

**编辑**

Fiddler 的原始请求如下。我添加了 . 在 localhost 之后，Fiddler 会接它。如果我接受或留下它，我会得到同样的错误。

```
POST http://localhost.:17641/RecruitService.svc/clients HTTP/1.1
Content-Type: text/xml
Host: localhost.:17641
Content-Length: 159
Expect: 100-continue
Connection: Keep-Alive

<PushClientData xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <ClientId>client1</ClientId>
    <ChannelUri>channel uri goes here</ChannelUri>
</PushClientData> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T12:39:11.803

嗨@Michael在这里你错过了ServiceContract中的一些东西

代替

```
 [WebInvoke(UriTemplate = "client")]
 void RegisterApp(PushClientData app); 
```

用。。。来代替

```
 [WebInvoke(UriTemplate = "client")]
 void client(PushClientData app); 
```

或使其成为

```
 [WebInvoke(UriTemplate = "RegisterApp")]
 void RegisterApp(PushClientData app); 
```

UriTemplate 值必须与 ServiceContract 方法名称相同。

# mysql - 在mysql中重现这种死锁

> ID：12207045
> 
> 赞同：1
> 
> 时间：2012-08-30T23:31:50.200
> 
> 标签：mysql, foreign-keys, deadlock

我从 SHOW ENGINE INNODB STATUS 获得信息

```
 *** (1) TRANSACTION: 
TRANSACTION 0 2799914, ACTIVE 1 sec, process no 4106, OS thread id 139808903796480 inserting
mysql tables in use 1, locked 1
LOCK WAIT 10 lock struct(s), heap size 1216, 7 row lock(s), undo log entries 3
MySQL thread id 4284, query id 2889649 localhost 127.0.0.1 test update
INSERT INTO shipping .....
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 436366 n bits 88 index `PRIMARY` of table `testdatabase`.`order` trx id 0 2799914 lock mode S locks rec but not gap waiting
Record lock, heap no 14 PHYSICAL RECORD: n_fields 213; compact format; info bits 0
..........;

*** (2) TRANSACTION:
TRANSACTION 0 2799913, ACTIVE 1 sec, process no 4106, OS thread id 139808905824000 starting index read, thread declared inside InnoDB 500
mysql tables in use 1, locked 1
5 lock struct(s), heap size 1216, 5 row lock(s), undo log entries 4
MySQL thread id 4290, query id 2889711 localhost 127.0.0.1 test Updating
UPDATE order
........
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 0 page no 436366 n bits 88 index `PRIMARY` of table `testdatabase`.`order` trx id 0 2799913 lock_mode X locks rec but not gap
Record lock, heap no 14 PHYSICAL RECORD: n_fields 213; compact format; info bits 0
..........

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 153737 n bits 88 index `PRIMARY` of table `testdatabase`.`order` trx id 0 2799913 lock_mode X locks rec but not gap waiting
Record lock, heap no 10 PHYSICAL RECORD: n_fields 213; compact format; info bits 0
......

*** WE ROLL BACK TRANSACTION (2)
------------
TRANSACTIONS 
```

船上有一个 FK 指的是订单主键。

我认为 T2 已经持有 x-lock，为什么它仍然需要等待 x-lock。

有人可以帮我在mysql中重现这种死锁吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T16:51:48.690

我不知道您的查询，但似乎您正在将行插入子表，然后更新父表中的行。

如果这是真的，那么您在 MySQL 中遇到了这个问题：[http ://bugs.mysql.com/bug.php?id=48652](http://bugs.mysql.com/bug.php?id=48652)

> 如果在表上定义了 FOREIGN KEY 约束，则任何需要检查约束条件的插入、更新或删除都会在它查看的记录上设置共享记录级锁以检查约束。InnoDB 还在约束失败的情况下设置这些锁。
> 
> 在您拥有的第一张表的单个记录上：
> 
> 1.  来自事务 1 集的 S 锁，
> 2.  来自事务 2 集的 S 锁，
> 3.  请求来自事务 1 的 X 锁，被来自事务 2 的 S 锁阻塞，
> 4.  请求来自事务 2 的 X 锁，被来自事务 1 的 S 锁阻塞

可能的解决方案是先更新父表，然后将行插入子表。假设我们需要在子行插入时增加一些计数器，那么查询将是：

```
UPDATE <parent row> SET count = count + 1;
INSERT <child row>; /* if the INSERT fails, roll back the trx */ 
```

如果只想在插入子行后更新父行，可以使用`FOR UPDATE`语句对父行设置锁定：

```
SELECT <parent row> FOR UPDATE;
INSERT <child row>; /* if the INSERT fails, roll back the trx */
UPDATE <parent row> SET count = count + 1; 
```

# arrays - 如何在 perl 中获得一个计数数组，其中包括计数为零的键的零？

> ID：12207049
> 
> 赞同：1
> 
> 时间：2012-08-30T23:32:33.070
> 
> 标签：arrays, perl, hash, key, key-value

对于我在使用 perl 时遇到的这个问题，我很高兴能得到一些建议。

如果我有一个数组并且它包含例如以下整数：

```
1, 2, 3, 1, 1, 1, 1, 7, 1, 4, 1, 1, 1 
```

一旦我使用哈希计算了键的计数，键值对将是：

```
1 => 9, 2 => 1, 3 => 1, 4 => 1, 7 => 1 
```

我可以将两组数字（键和值）分配给不同的数组以供以后使用，但是如果我现在想要一个如下所示的数组：`(9, 1, 1, 1, 0, 0, 1)`值对应于键的位置，`0`'s 表示没有的键出现在列表中，即`5`and `6`，我将如何在 perl 中编写代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:40:00.797

```
use List::Util qw( max );

my @a = (1, 2, 3, 1, 1, 1, 1, 7, 1, 4, 1, 1, 1);

my %counts;
++$counts{$_} for @a;

my @counts = map $counts{$_} // 0, 1..max(keys(%counts)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:40:51.890

容易地：

```
my @counts = map { $_ || 0 } @hash{ 1 .. 7 }; 
```

我们使用从 1 到 7 的数字对散列进行切片。 `undef`对于没有对应值的键返回，因此`map`将所有 Boolean-false 值变为零。

# ios - UIButton 不会自动调整字体大小

> ID：12207050
> 
> 赞同：24
> 
> 时间：2012-08-30T23:32:39.283
> 
> 标签：ios, objective-c, fonts, uibutton

我正在以编程方式将 UIButton 添加到我的视图中，并且我希望按钮的字体大小自动调整其大小（例如，如果文本很长，则调整为较小的字体以适合按钮）。

此代码不起作用（字体始终相同）：

```
myButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];
[myButton setTitle:[NSString stringWithFormat:@"hello"] forState:UIControlStateNormal];
[myButton setFrame: CGRectMake(0, 0, 180, 80)];
[myButton.titleLabel setFont: [UIFont boldSystemFontOfSize:16.0]];

myButton.titleLabel.adjustsFontSizeToFitWidth = TRUE;

[theView addSubview:myButton]; 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-31T01:15:32.360

该代码有效，但可能不是您想要的方式。`adjustsFontSizeToFitWidth`如果文本不适合（下降到），该属性只会减小字体大小`minimumFontSize`。它永远不会增加字体大小。在这种情况下，一个 16pt 的“hello”将很容易适应 180pt 宽的按钮，因此不会发生大小调整。如果您希望字体增加以适应可用空间，则应将其增加到较大的数字，以便将其减小到适合的最大尺寸。

只是为了展示它当前的工作方式，这是一个很好的人为示例（单击按钮以减小其宽度，如将字体缩小为`minimumFontSize`）：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIButton *myButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];
    [myButton setTitle:[NSString stringWithFormat:@"hello"] forState:UIControlStateNormal];
    [myButton setFrame: CGRectMake(10, 10, 300, 120)];
    [myButton.titleLabel setFont: [UIFont boldSystemFontOfSize:100.0]];
    myButton.titleLabel.adjustsFontSizeToFitWidth = YES;
    myButton.titleLabel.minimumFontSize = 40;
    [myButton addTarget:self action:@selector(buttonTap:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:myButton];
}

- (void)buttonTap:(UIButton *)button {
    button.frame = CGRectInset(button.frame, 10, 0);
} 
```

# java - 如何在 Spring 中使用 @ComponentScan 懒惰地加载所有 bean？

> ID：12207057
> 
> 赞同：16
> 
> 时间：2012-08-30T23:33:36.373
> 
> 标签：java, spring, dependency-injection

我正在使用基于 Java 的配置来设置我的 Spring 应用程序上下文，如下所示：

```
@Configuration
@Lazy
@ComponentScan(basePackageClasses = {MyProject.class, OtherProject.class})
public class MyAppConfig {
    ...
} 
```

在配置中显式定义的 Bean 会像您期望的那样延迟加载。但是，带有注释的扫描类`@Named`总是被急切地加载。我该如何解决这个问题？

任何帮助表示赞赏。

* * *

请注意，对于`MyProject`包中的类，我也可以通过注释它们来解决这个问题`@Lazy`。但是另一个项目对 Spring 没有依赖关系，我想保持这种状态（因此`@Named`而不是`@Component`）。

* * *

另请注意，这在基于 XML 的配置中似乎不是问题。`default-lazy-init="true"`在那里，设置`<beans>`标签接缝做我想做的事（虽然我还没有测试过）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-04-23T19:39:17.897

从 4.1 RC2 版本开始，此错误已修复，您可以通过以下方式完成组件扫描的延迟加载：

```
@ComponentScan(basePackages = ["..."], lazyInit = true) 
```

[https://jira.spring.io/browse/SPR-10459](https://jira.spring.io/browse/SPR-10459)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:41:19.467

正如您之前所说，没有直接的方法来处理它（在配置类中使用@Lazy）。但是您可以尝试使用这种方法：

我假设 OtherProject 是一个没有使用 Spring 的项目，并想象这些类没有注释。

然后你应该在 Myproject 中定义一个如下所示的配置：

```
@Configuration
// Avoid use this line if classes aren't annotated @ComponentScan("com.otherProject")
public class MyProjectConfig {

    @Bean(name = "lazyBean")
    @Lazy
    public LazyBean lazyBean(){
        System.out.println("Loading LazyBean bean");
        return new LazyBean(); // Or use a static method factory, this is only an example
    }
} 
```

使用它，bean“lazyBean”将在某个实例注入它或当您显式调用它时创建，但绝不会在初始化时创建。

请注意，您需要为每个要使用的类定义一个新 bean，因此如果您有大量类，这并不好，但可以最大限度地减少其他项目的类的可访问性（也许并非所有类都是必需的） .

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-05T14:20:08.247

[从 Spring Boot 2.2](https://spring.io/blog/2019/03/14/lazy-initialization-in-spring-boot-2-2)开始，您可以将属性设置为`true`（默认为`false`）以启用延迟初始化：

```
spring.main.lazy-initialization=true 
```

# android - 如何检查 imageview 背景是否是某个图像？

> ID：12207058
> 
> 赞同：0
> 
> 时间：2012-08-30T23:33:36.187
> 
> 标签：android, imageview

到目前为止我正在使用这样的东西

```
if (image.getDrawable() != thisContext.getResources().getDrawable(R.raw.anImage) ) {
    // do something
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:43:48.020

尝试将 Drawables 转换为`Bitmap`first 然后比较：

```
Bitmap a = ((BitmapDrawable)d1).getBitmap();
Bitmap b = ((BitmapDrawable)d2).getBitmap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:45:55.120

基本上，比较两个可绘制对象很痛苦，所以只需将它们转换为位图，然后比较位图（更简单的解决方案），代码如下：

```
Bitmap bitmap1 = ((BitmapDrawable)fDraw).getBitmap();
Bitmap bitmap2 = ((BitmapDrawable)sDraw).getBitmap();

if(bitmap1 == bitmap2)
{
 do some stuff
} 
```

# mongodb - MongoDB：出现新分片，但不显示内容。这是预期的吗？

> ID：12207059
> 
> 赞同：6
> 
> 时间：2012-08-30T23:33:48.620
> 
> 标签：mongodb, sharding

我有一个带有 2 个分片 RS1 和 RS2 的 Mongo 集群。RS1 约 600G (*)，RS2 约 460G。几分钟前，我添加了一个新的分片 RS3。当我连接到 mongos 并检查状态时，我看到的是：

```
mongos> db.printShardingStatus()
--- Sharding Status --- 
  sharding version: { "_id" : 1, "version" : 3 }
  shards:
        {  "_id" : "RS1",  "host" : "RS1/dbs1d1:27018" }
        {  "_id" : "RS2",  "host" : "RS2/dbs1d2:27018" }
        {  "_id" : "RS3",  "host" : "RS3/dbs3a:27018" }
  databases:
        {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }
        {  "_id" : "demo",  "partitioned" : false,  "primary" : "RS1" }
        {  "_id" : "cm_prod",  "partitioned" : true,  "primary" : "RS1" }
                cm_prod.profile_daily_stats chunks:
                                RS2     16
                                RS1     16
                        too many chunks to print, use verbose if you want to force print
                cm_prod.profile_raw_stats chunks:
                                RS2     157
                                RS1     157
                        too many chunks to print, use verbose if you want to force print
                cm_prod.video_latest_stats chunks:
                                RS1     152
                                RS2     153
                        too many chunks to print, use verbose if you want to force print
                cm_prod.video_raw_stats chunks:
                                RS1     3257
                                RS2     3257
                        too many chunks to print, use verbose if you want to force print
          [ ...various unpartitioned DBs snipped...] 
```

因此，新的 RS3 分片出现在分片列表中，但不在“每个分片有多少块”列表中。我本来希望它出现在该列表中，所有分片集合的计数为 0。

如果我想要一点，这种预期的行为会自行解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T00:16:08.293

它将开始将块移到它上面，是的，事实上，在可预见的将来，它将成为每个块移动的默认目标（基本选择是从具有最多块的分片移动到具有最少块的分片）。每个主分片一次只能参与一次迁移，因此要移动这么多块需要一些时间，尤其是在其他两个很忙的情况下。

我见过人们关闭平衡器并忘记它的情况。鉴于您的其他 2 个碎片平衡得很好，我认为这里不是这种情况，但以防万一......

您可以通过连接到 mongos 来检查平衡器的状态，然后执行以下操作：

```
use config;
db.settings.find( { _id : "balancer" } ) 
```

确保“已停止”未设置为 true。

看看是什么持有锁，并因此在那个时候平衡：

```
use config;
db.locks.find({ _id : "balancer" }); 
```

最后，要检查平衡器实际在做什么，请查看该机器上的 mongos 日志。平衡器将行输出到前缀为 的日志`[Balancer]`。您还可以在日志中的主要 mongod 实例的日志中查找迁移消息。

编辑：这可能是由[SERVER-7003](https://jira.mongodb.org/browse/SERVER-7003)引起的——在 2.2.0 发布后发现的一个错误。如果从源分片迁移的范围（块）中有删除，它有时会导致这种瘫痪，其中所有块迁移都被中止并且目标分片似乎总是参与迁移，而实际上它是不是。

由于此问题已在 2.2.1 中得到修复，因此建议通过升级来解决此问题。虽然它可以通过重新启动和/或当目标分片上的错误状态自行解决时解决，如下面的评论中似乎就是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:10:18.043

相反，使用`db.printShardingStatus(true);` 它将打印碎片、块和所有其他详细信息的列表

# java - 不调用父类的@BeforeClass 方法

> ID：12207061
> 
> 赞同：5
> 
> 时间：2012-08-30T23:34:01.367
> 
> 标签：java, junit

根据[此](http://junit.sourceforge.net/javadoc/org/junit/BeforeClass.html)文档，超类的@BeforeClass 方法将在当前类之前运行。但在我的情况下不会发生。

我正在使用junit 4.8.1。

你能告诉我我做错了什么吗？

我的父类如下所示：

```
public abstract class AbstractPromoterUnitTest extends TestCase {
    @BeforeClass
    public static void setUpOnce() {
        // Do something here.
    }
} 
```

是孩子：

```
@RunWith(JUnit4.class)
public abstract class NormalPromoterUnitTest extends AbstractPromoterUnitTest{
    @BeforeClass
    public static void setUpOnce() {
        // Do something here 2.
    }
} 
```

调用 NormalPromoterUnitTest.setUpOnce()。AbstractPromoterUnitTest.setUpOnce() 不是。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T23:43:19.440

您正在遮蔽抽象类的静态方法；命名其中一个不同的东西。

# java - 对象化事务抛出 IllegalStateException

> ID：12207064
> 
> 赞同：0
> 
> 时间：2012-08-30T23:34:26.123
> 
> 标签：java, google-app-engine, gwt, objectify

/!\ 对不起这个问题。事实上，我的错误是在完成 getTxn().commit() 后得到一个对象 :( /!\

我是 Objectify 和 GAE 的初学者。我不明白为什么在交易过程中我有这个异常：

> java.lang.IllegalStateException：与此操作关联的事务未处于活动状态。

我使用 Objectify 3.1，我有一个这样的类：

```
@Entity
public class A {
   @Id
   public Long m_id;

   @Parent
   public Key<B> m_key;

   public int m_foo;
} 
```

我这样做是为了得到我的对象：

```
Key<B> key = new Key<B>(B.class, bId);
Query<A> query = ObjectifyService.beginTransaction().query(A.class).ancestor(key).<a class="ktg6us78hf8vdu7" href="#">filter</a>("m_foo =", foo);
return query.list().get(0); 
```

当 filter("m_foo =", foo) 被调用时，总是抛出上面的异常。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:52:34.670

您可以随时在 Objectify 组列表中询问此问题： [https ://groups.google.com/forum/?fromgroups#!forum/objectify-appengine](https://groups.google.com/forum/?fromgroups#!forum/objectify-appengine)

# facebook-graph-api - 是否有旧的 links.preview REST 方法的 Graph API 版本？

> ID：12207068
> 
> 赞同：0
> 
> 时间：2012-08-30T23:34:45.873
> 
> 标签：facebook-graph-api, preview

我正在编写一个 Web 应用程序，它允许用户向 Facebook 发布状态消息，以及通常的链接共享选项。

在弃用 REST API 之前，我会使用[links.preview 方法](https://developers.facebook.com/docs/reference/rest/links.preview/)来检索 Facebook 对链接页面的预览。（标题、描述、图片）我将在 Graph API 中使用什么？

我使用[对象调试器](https://developers.facebook.com/tools/debug/og/object?q=http://spaceup.org/)将 URL 转换为正确的 Graph API ID 以进行链接预览：

[https://graph.facebook.com/10150260487553402](https://graph.facebook.com/10150260487553402)

...但我找不到任何方法可以从 API 本身将 URL 转换为该 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:23:20.913

没有与 link.preview 等效的图表。在发布之前“预览”帖子的唯一方法是自己抓取链接以获取其元数据（标题、描述、image_src）并以这种方式显示预览。

如果您有共享内容的标题、描述和图像，您可以将它们作为参数传递以覆盖默认值并强制它看起来像您指定的方式。

# c++ - 我应该在头文件中的哪里声明我的私有类级静态常量？

> ID：12207071
> 
> 赞同：0
> 
> 时间：2012-08-30T23:35:30.407
> 
> 标签：c++, static-members

我应该在头文件中的哪里指定我的类级静态常量？

```
class ABC
{
public:
    enum A1
    {
    };

    //Manager functions
    ABC(int x )
    {
        m_x = x;
    };
    viirtual ~ABC();

protected:
    int data;

private:
    //Typedef
    typedef std::pair(int, int) INT_PAIR;
    typedef std::pair(int, int) INT_PAIR1;
    ...
    //functions
    void increment_x();
    //Member data
    int m_x;
    ... whole lot of other data
} 
```

我应该在哪里声明一个私有静态常量变量，比如这个类声明（ABC.h）中的版本号？

```
static const std::string version; 
```

它到底适合哪里？它不是真正的成员数据，因为它是静态的。（不是每个对象）

编辑 - 1：

这些变量是否有特定的优先级？他们是从一开始就开始（就在 ABC 类之后的第一个左大括号之后？还是就在我的片段中的 private 关键字之后？（或）是在 typedef 之后？

当然，我会在我的 abc.cpp 文件中提到 const std::string version = "10";

编辑2：我期待像卢卡斯提到的那样的答案。（请提供有效的推理）

在我下面提到的类声明中，静态变量应该放在哪里？

请不要提供提及 decl 需要在 .h 文件中并在 .cpp 文件中定义的答案。——我已经知道了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T23:41:14.370

啊文件（头文件：）

```
class A {
...
private:
    static const std::string version ;
} ; 
```

A.cpp 文件（正文，请记住`#include "A.h"`：）

```
const std::string A::version = "10" ; 
```

# python-3.x - 在 python3 中使用 http 和 urllib 模块时的非 ascii 字符

> ID：12207072
> 
> 赞同：1
> 
> 时间：2012-08-30T23:35:37.440
> 
> 标签：python-3.x

```
import http.client, urllib.request, urllib.parse, urllib.error

def translate(IN, OUT, text):
    text = urllib.parse.quote(text)
    conn = http.client.HTTPConnection("translate.google.com.tr")
    conn.request("GET", "/translate_a/t?client=t&text="+text+"&hl="+IN+"&tl="+OUT)
    res = conn.getresponse().read().decode("cp1254",'replace')
    print(res)
    b1 = res.split("],[")
    b2 = b1[0].strip('[]')
    b3 = b2.strip('","')
    b4 = b3.split('","')
    return b4[0]

string = input("Turkish >>> English: ")
result = translate("tr","en",string)
print(string,">>>",result) 
```

我正在尝试编写一个可以将土耳其语翻译成英语的脚本。如果我不输入土耳其字符，该脚本效果很好。例如，这些土耳其语单词翻译成功 = (kalemlik,deneme,bilgisayar,okyanus) 但如果我输入的单词包含非 ascii 字符，则翻译不成功。这些是土耳其语字符 = ("ıİğĞüÜşŞöÖçÇ")，这些是一些土耳其语单词具有非 ascii 字符 = (programcı,şarkı,çalışma,örnek,İnsan,dağ,üs)。顺便说一句，cp1254 是土耳其字符的有效编码。我能做些什么来解决这个问题？你知道，它不仅适用于土耳其语。

例子;

```
Turkish >>> English: okyanus
[[["ocean","okyanus","",""]],[["isim",["ocean","brine","the deep","main","drink"],[["ocean",["okyanus","derya"]],["brine",["tuzlu su","salamura","deniz","okyanus"]],["the deep",["deniz","okyanus","enginler"]],["main",["ana boru","deniz","kuvvet","zor","okyanus","horoz dövüşü"]],["drink",["içmek","içki","içecek","içki içmek","deniz","okyanus"]]]],["sıfat",["oceanic"],[["oceanic",["okyanus","okyanusta bulunan","okyanus gibi"]]]]],"tr",,[["ocean",[5],1,0,999,0,1,0]],[["okyanus",4,,,""],["okyanus",5,[["ocean",999,1,0],["oceanic",0,1,0],["the ocean",0,1,0],["oceans",0,1,0]],[[0,7]],"okyanus"]],,,[["tr"]],2]
okyanus >>> ocean 
```

那是成功的。

```
 Turkish >>> English: dağ
[[["daÄ\u0178","daÄ\u0178","",""]],,"tr",,[["daÄ\u0178",[5],1,0,1000,0,1,0]],[["daÄ\u0178",5,[["daÄ\u0178",1000,1,0]],[[0,4]],"daÄ\u0178"]],,,[["tr"]],8]
dağ >>> daÄ\u0178 
```

失败！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:21:15.157

仔细观察，你会发现一堆错误和不正确的假设。像

> “顺便说一下，CP1254 是土耳其字符的有效编码。”

是的，确实如此，但还有其他标准，例如 ISO 8859-9，它不仅是 Microsoft 使用的实际国际标准。当然还有 UTF-8/16/32。

此外，您不仅在使用 CP1254 时没有检查这是否真的是 Google 使用的解码器（它不是），而且您没有以正确的编码*发送*单词。我在第一次通读时错过了这一点，因为你的问题集中在你得到了什么。直到第二次通读我才意识到你的主要问题实际上是当你有一个非 ascii 字符时翻译失败。

您还发送了一个字符 (ğ) 并返回了两个字符，这就是为什么我认为 UTF8 是问题所在，而且确实如此，但不是我最初想的那样。

由于您通过 HTTP GET 发送它，因此您必须对 URL 中的文本进行编码，这意味着您基本上必须使用 UTF-8。但你的 GET 并没有这么说。您的请求中没有任何内容表明您正在使用 UTF-8。现在，您确实应该设置一些阅读器来执行此操作，但这很复杂，而且谷歌翻译允许您作弊。你可以传入`ie`参数，说明你有什么编码。

如果您不这样做，它可能会退回到 ISO-8859-1，这在这些情况下是标准的。这将占用您为 ğ 发送的两个字节并假设它们是两个不同的字符，这就是您将这两个字符取回的原因。

最后，您应该查看标头以了解 Google 用于响应的编码。但在这里你也可以作弊，通过`oe`参数告诉谷歌使用什么编码。

所以如果你改变：

```
conn.request("GET", "/translate_a/t?client=t&text="+text+"&hl="+IN+"&tl="+OUT) 
```

到：

```
path = "/translate_a/t?client=t&ie=UTF-8&oe=UTF-8&text="+text+"&hl="+IN+"&tl="+OUT
conn.request("GET", path) 
```

（因为说真的，你不必把所有东西都排成一行）

并改变：

```
response = conn.getresponse()
res = response.read().decode("UTF-8",'replace') 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:28:41.267

对于输入，您不需要做任何事情[`urlencode()`](http://docs.python.org/dev/library/urllib.parse.html#urllib.parse.urlencode)来处理，对于输出，您可以使用`Content-Type`标头：

```
import cgi
from urllib.parse   import urlencode
from urllib.request import urlopen

logger = logging.getLogger(__name__)

def translate(text, from_lang=None, to_lang="en"):
    query = dict(text=text, tl=to_lang, client="t",
                 sl=from_lang if from_lang is not None else "auto")
    url = 'http://translate.google.com.tr/translate_a/t?' + urlencode(query)
    print(url)

    try:
        response = urlopen(url)
        content = response.read()
    except OSError as e:
        logger.error("translate%s error: %s", (text, from_lang, to_lang), e)
    else:
        _, params = cgi.parse_header(response.getheader('Content-Type', ''))
        print(content.decode(params['charset'])) 
```

您还可以`ie/oe`在 Google 服务的 url 中使用参数来指定`input text/response content`字符编码，如[@Lennart Regebro 所说](https://stackoverflow.com/a/12207750/4279)。

# android - 从浏览器的 URL 链接打开我的 Android 应用

> ID：12207073
> 
> 赞同：2
> 
> 时间：2012-08-30T23:35:43.513
> 
> 标签：android, url

我知道我的问题在这里被问了很多次，但我尝试了所有答案，但仍然有问题我的问题是我希望打开我的应用程序从移动浏览器抛出 url

这是我在 mainfeast.xml 文件中写的

```
 <activity
        android:name=".Login"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:host="" android:scheme="mpay2park" />
        </intent-filter> 
```

仍然无法解决这个问题我想知道是否应该在 Login.java 活动中编写任何内容以及我应该为此编写的 URL 是什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:50:56.367

您可以使用以下清单文件从浏览器地址栏打开**abc://xyz.com ：**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.sample.openfrombrowser.MainActivity"
        android:exported="true"
        android:label="@string/app_name"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="xyz.com"
                android:scheme="abc" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="google.co.in"
                android:pathPrefix="/"
                android:scheme="http" />
            <data
                android:host="www.google.co.in"
                android:pathPrefix="/"
                android:scheme="http" />
        </intent-filter>
    </activity>
</application> 
```

这将在对话框中询问选项（带有您的应用程序名称）以打开此 url。

希望这对你有用。

享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:28:40.130

我解决了我的问题，这是我在 mainfest 文件上写的

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="mpay2park"/>
        </intent-filter> 
```

然后我更改了android浏览器并从opera mini打开了我的喜欢它对我来说非常适合

# c# - 如果文本框没有值，则验证组或显示弹出窗口

> ID：12207074
> 
> 赞同：2
> 
> 时间：2012-08-30T23:36:00.760
> 
> 标签：c#, checkbox, webforms, buttonclick

所以我有一个网络表单，它有一些按钮和文本框，它们使用 ajax 显示 calendarextender。我想设置它，以便如果选中一个按钮，则还需要选择带有日历日期的相应文本框。我考虑过使用验证组，但我不希望它在按钮单击上，并且并非所有文本框日期都需要与它们对应的复选框一起选择。

他们是在 button.check 或使用 javascript 上执行此操作的方法吗？

例如：

```
protect void main CheckBox1_Changed(object e event args)
     {
          if(CheckBox1.Changed)
             {
                 /*some kind of validation of date chosen*/
             }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:35:10.200

两个示例，一个在 C# 中，第二个在 Jquery 中。两者都使用 Postback 并显示警报。

通过 C#: (HTML)

```
 <asp:CheckBox ID="chk" runat="server" AutoPostBack="true"
OnCheckedChanged="chk_Changed"/>
<asp:TextBox ID="date" runat="server"></asp:TextBox> 
```

（C＃）

```
 protected void chk_Changed(Object sender, EventArgs e)
    {
        if (chk.Checked && date.Text.Length == 0)   
            Page.ClientScript.RegisterStartupScript(this.GetType(), "myScript", "<script language=JavaScript>alert('This is a test');</script>");
    } 
```

其次，这是使用 Jquery：（使用上述控件的 Javascript）

```
<script type="text/javascript">
$(document).ready(function() {
if ($('#chk').attr('checked')) {
    if($('#date').val().length == 0)
        alert('This is the Javascript check');
    }
}); 
```

**在每种情况下，您都需要将复选框控件的 AutoPostBack 属性设置为 True**

要更改文本框中的文本，您可以使用：

```
<script type="text/javascript">
var data = "Please enter a value!";
$(document).ready(function() {
    if ($('#chk').attr('checked')) {
        if ($('#date').val().length == 0)
            ($('#date').val(data));
    }
}); 
```

# visual-studio - Visual Studio 自定义属性对话框

> ID：12207075
> 
> 赞同：2
> 
> 时间：2012-08-30T23:36:04.487
> 
> 标签：visual-studio

我熟悉如何在 Visual Studio 的属性窗口中包含用户控件的属性。谁能告诉我如何为用户控件创建一个自定义对话框，类似于 BackgroundColor 的颜色选择器？我有一个具有许多属性的控件，并且“控件生成器”表单会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:13:15.787

我认为您正在寻找[UITypeEditor](http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditor.aspx)。msdn 中提供了演练，[演练：实现 UI 类型编辑器](http://msdn.microsoft.com/en-us/library/ms171840.aspx)。

# css - 标题图片底部边框

> ID：12207077
> 
> 赞同：0
> 
> 时间：2012-08-30T23:36:11.347
> 
> 标签：css

我在我的 Phorum 模板上的标题图像中添加了一个底部边框，使其看起来像页面上的顶部黑线。但是，它不像顶部那样从块的最左侧开始，当我扩展它的宽度时，它向右……但不是向左。我试图使它与顶部的相同，就在标题图像的下方。有任何想法吗？

www.cigarcache.com/forum

```
#phorum #header {
margin: -8px 0px 10px 0px;
}

#phorum #header img {
margin: 0px;
}

#phorum #header_bottom_gap {
height: 15px;
}

#phorum #logobottom {
border-bottom: 1px solid {breadcrumb_border_color};
}

<div id="header">
<div id="logobottom"><a href="http://www.cigarcache.com"><img
src="{URL->TEMPLATE}/images/header.png"
width="{header_width}" height="{header_height}" alt="" border="0" /></a></div>
</div> 
```

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:41:20.647

`#body-main`左右有 38px 的填充 - 这就是为什么会有间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:54:40.110

最快的解决方案是将整个标题 div 从#body-main 中剪切出来并将其粘贴到#body-main 上方并稍微调整样式。

```
#phorum #logobottom {
/*border-bottom: 1px solid black;*/
}

#phorum #header {
margin: 0px 0px 10px 0px;
border-bottom: 1px solid black;
padding:0 38px;
} 
```

# java - 从正在运行的 bat 文件中获取进度

> ID：12207080
> 
> 赞同：0
> 
> 时间：2012-08-30T23:36:55.810
> 
> 标签：java, batch-file

我可以在java中运行一个bat文件，我也可以让它向java发送信息。

运行下面的 bat 文件的代码。我想我可以使用输入流以某种方式取得进展。我也在想也许我可以把东西留在 bat 文件中让它读取以获取状态。

我希望有人能给我一些关于如何添加基本进度条的代码。我从 oracle 阅读了演示和示例，但它们没有涵盖从 bat 文件中获取进度。

我在下面更新了我的代码，我仍然需要运行它并获取真正 100% 完成的行数。但是，它并没有像我想象的那样显示进展。它运行并保持在 0%，我可以说它仍在运行，因为任务管理器。

```
public class ProgressBar extends JPanel
                          implements ActionListener, 
                                     PropertyChangeListener {

private JProgressBar progressBar;
private JButton startButton;
private JTextArea taskOutput;
private Task task;

class Task extends SwingWorker<Void, Void> {
    /*
     * Main task. Executed in background thread.
     */
    @Override
    public Void doInBackground() {
        Random random = new Random();
        int progress = 0;
        //Initialize progress property.
        setProgress(0);
        //Sleep for at least one second to simulate "startup".
        try {
            Thread.sleep(1000 + random.nextInt(2000));
        } catch (InterruptedException ignore) {}
       // while (progress < 100) {
            //Sleep for up to one second.
            try {
                Thread.sleep(random.nextInt(1000));
            } catch (InterruptedException ignore) {}
            //Make random progress.
            try { 
                String ls_str;   
                Process ls_proc = Runtime.getRuntime().exec("\\WMIRebuild.bat"); 
            //     get its output (your input) stream    
                DataInputStream ls_in = new DataInputStream( 
                    ls_proc.getInputStream()); 
                try { 
                while ((ls_str = ls_in.readLine()) != null) { 
                    System.out.println(ls_str);
                    progress++;
                    } 
                } catch (IOException e) {
                System.exit(0); 
                } 
            } catch (IOException e1) { 
                System.err.println(e1); 
                System.exit(1); 
            }
            setProgress(Math.min(progress, 100));
       // }
        return null;
    }

    /*
     * Executed in event dispatch thread
     */
    public void done() {
        Toolkit.getDefaultToolkit().beep();
        startButton.setEnabled(true);
        taskOutput.append("Done!\n");
    }
}

public ProgressBar() {
    super(new BorderLayout());

    //Create the demo's UI.
    startButton = new JButton("Start");
    startButton.setActionCommand("start");
    startButton.addActionListener(this);

    progressBar = new JProgressBar(0, 18);
    progressBar.setValue(0);

    //Call setStringPainted now so that the progress bar height
    //stays the same whether or not the string is shown.
    progressBar.setStringPainted(true); 

    taskOutput = new JTextArea(5, 20);
    taskOutput.setMargin(new Insets(5,5,5,5));
    taskOutput.setEditable(false);

    JPanel panel = new JPanel();
    panel.add(startButton);
    panel.add(progressBar);

    add(panel, BorderLayout.PAGE_START);
    add(new JScrollPane(taskOutput), BorderLayout.CENTER);
    setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
}

/**
 * Invoked when the user presses the start button.
 */
public void actionPerformed(ActionEvent evt) {
    progressBar.setIndeterminate(true);
    startButton.setEnabled(false);
    //Instances of javax.swing.SwingWorker are not reusuable, so
    //we create new instances as needed.
    task = new Task();
    task.addPropertyChangeListener(this);
    task.execute();
}

/**
 * Invoked when task's progress property changes.
 */
public void propertyChange(PropertyChangeEvent evt) {
    if ("progress" == evt.getPropertyName()) {
        int progress = (Integer) evt.getNewValue();
        progressBar.setIndeterminate(false);
        progressBar.setValue(progress);
        taskOutput.append(String.format(
                    "Completed %d%% of task.\n", progress));
    }
}

/**
 * Create the GUI and show it. As with all GUI code, this must run
 * on the event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("ProgressBarDemo2");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    JComponent newContentPane = new ProgressBar();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:39:40.063

将进度条的框架与您的`main()`方法分开。让它在自己的线程上运行。当您从批处理文件中读取内容时`ls_in.readLine()`，请更新另一帧中的进度。例如，您可以在框架中调用一个方法，该方法`addTick()`将另一个块添加到进度条，每次从批处理文件中读取一行时都可以调用该方法。

* * *

非常基本的例子：

从进程中读取的线程：

```
 while ((ls_str = ls_in.readLine()) != null) { 
        System.out.println(ls_str);
        progressBar.addTick();
    } 
```

进度条，在自己的线程上运行：

```
 String bar = "#";

    public void addTick()
    {
        if(bar.length() < maxBarLength) {
            bar = bar + "#";
            drawBar(bar);
        }
    }

    public void draw()
    {
        drawBar(bar);
    }

    public void paint()
    {
        // draw some stuff
        draw(bar);
    } 
```

我不知道，类似的东西。显然，进度条将与此不同，这只是伪代码，让您了解 main() 方法如何与进度条交互。

# voip - 自动电话

> ID：12207083
> 
> 赞同：1
> 
> 时间：2012-08-30T23:37:25.030
> 
> 标签：voip, telephony, phone-call

我正在使用某些快递公司进行运输的网站上工作。他们的问题是他们需要一个电话，然后输入客户号码来请求快递取件。

我想知道是否有一种方法可以通过使用一些在线服务来启动该呼叫并拨打号码来实现自动化。

所以，重申一下：服务应该允许拨打一个号码，然后在连接后拨打一个号码序列，然后挂断。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:53:49.483

您可以使用支持 W3C 标准[Call Control XML (CCXML)](http://www.w3.org/TR/ccxml/)和[VoiceXML](http://www.w3.org/TR/voicexml20/)的平台自动执行外呼呼叫。您可以使用 CCXML 发起呼叫并执行呼叫进度分析，以便在呼叫被应答时可以将其传递给 VoiceXML 应用程序，该应用程序会将 DTMF 作为录制的音频回放。您可以使用[Voxeo Prophecy](http://evolution.voxeo.com/)作为运行 CCXML 和 VoiceXML 的平台。您可以免费获得两个端口版本，可以在工作站上运行，也可以在其托管环境上免费测试。查看他们的[CCXML 文档](http://docs.voxeo.com/ccxml/1.0-final/)，了解如何在 F 节中开发出站拨号器的示例。您可以在此处获取将在此平台上运行[的音频文件中录制的 DTMF 音调。](http://evolution.voxeo.com/library/audio/prompts/dtmf/index.jsp)

# mongodb - MongoDB中的dbref命令

> ID：12207084
> 
> 赞同：2
> 
> 时间：2012-08-30T23:37:30.857
> 
> 标签：mongodb, mongodb-java, mongodb-query

我是 mongodb 的新手。我需要使用 dbref 通过引用两个集合来进行查询，并且需要查询特定字段。

**评论集合**

```
 { 
          uid:12345, 
          pid:444, 
          comment="blah" 
        },

        { 
          uid:12345,
          pid:888, 
          comment="asdf" 
        },

        { 
          uid:99999, 
          pid:444, 
          comment="qwer" 
        } 
```

**用户集合**

```
 { 
          uid:12345, 
          name:"john" 
        },

        { 
          uid:99999,
          name:"mia"  
        } 
```

我可以知道如何通过使用 dbref 在两个集合之间添加引用来在 mongodb 中插入这些集合的命令吗？uid 中的注释必须引用用户 uid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:08:51.667

[数据库引用 (DBRefs)](http://docs.mongodb.org/manual/applications/database-references/)是用于存储与其他集合相关的 ID 的约定，但不是 MongoDB 服务器支持的功能（即“连接”）。根据您用于访问 MongoDB 的[语言驱动程序](http://www.mongodb.org/display/DOCS/Drivers)，可能会支持跟随 DBRefs 和获取相关文档.. 但这确实涉及额外的查询，就像您手动执行此操作一样。

因此，在单独的集合中查找与用户相关的评论的伪代码类似于：

1.  `find({..})`感兴趣的用户
2.  对于找到的每个用户
3.  ...`find({uid:...})`该用户的所有评论

根据您的用例，您可能需要考虑嵌入信息而不是链接。例如，`comments`集合实际上可能更适合嵌入到`posts`集合中（`post`网站上的每个都嵌入了很多`comments`）。嵌入的评论可能包含一些基本的用户信息，例如显示名称，因此您不必在`users`集合中查找这些信息即可呈现页面。

有关更多信息，请参阅：

*   [关于模式设计的 MongoDB 文档](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

*   [使用嵌入式、非嵌入式和桶结构设计 MongoDB 模式](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)

# php - 通过第二个表的 phpactiverecord 关联

> ID：12207088
> 
> 赞同：1
> 
> 时间：2012-08-30T23:38:22.107
> 
> 标签：php, has-many-through, phpactiverecord

好的，我希望能够正确解释这一点，所以就到这里。我正在使用 phpActiveRecord 并尝试通过另一个关联创建特定关联。链接表并不完全是多对多，因为我已经能够创建那些没有任何实际问题的。让我给你详细的...

这是一个已经存在的数据库模式，在命名表或字段时并未考虑 AR。所有表都在一个单一的引用中，所有引用其他表的字段都以“fk_”为前缀，并且不遵循正常的命名模式。该关联是从文章到网站再到客户。客户可以有很多网站，网站可以有很多文章。目标是能够通过网站从文章中引用客户。到目前为止，这就是我所拥有的：

```
Client
  $has_many (
    array('websites', 'foreign_key' => 'fk_client_id')
  )

Website
  $belongs_to (
    array('client', 'foreign_key' => 'fk_client_id')
  )
  $has_many (
    array('articles', 'foreign_key' => 'fk_website_id_client')
  )

Article
  $belongs_to (
    array('client_website', 'class_name' => 'Website', 'foreign_key' => 'fk_website_id_client'),
    array('client', 'through' => 'client_website')
  ) 
```

我已经简化了一些代码，所以不，我没有忘记“=”符号或类似的东西。现在，访问`client_website`返回正确的对象，以便关联工作。向下钻取也可以，我可以看到每个客户的多个网站，以及通过网站的多篇文章。这似乎应该可以正常工作......我只是缺少一些基本的东西，但我似乎找不到它。我有一种感觉，字段名称被奇怪地标记是一个问题，但我无法验证这一点。

感谢您对此的任何帮助！

# objective-c - 在 Objective-C 中计算大量类型字符串

> ID：12207089
> 
> 赞同：0
> 
> 时间：2012-08-30T23:38:35.300
> 
> 标签：objective-c

假设我们有两个字符串类型的数字。是否有任何可能的方法可以在不将它们转换回数字格式的情况下对字符串中的数字进行加、减、乘、除甚​​至取模。如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:49:21.327

不，没有内置任何东西。您必须自己编写或转换为数字（假设数字类型有足够的存储空间）。

# python - u'Too' u'much' u'unicode' u'returned'

> ID：12207090
> 
> 赞同：0
> 
> 时间：2012-08-30T23:38:36.053
> 
> 标签：python, json, web-services, unicode

我有一个 api，我使用 json 在自然语言处理上下文中放入和取出东西。

*一切都*以 unicode 形式出现。例如，如果从我的 api 中检索单词列表，则每个单词都是 u''。这是打印到文件后 json 输出的样子：

```
{u'words': [u'every', u'single', u'word']} 
```

我必须澄清，在终端中一切看起来都很好，只是当我将输出打印到文件时。

我还没有弄清楚这是否是更可取的默认行为，或者我是否需要在此过程中做一些事情以使这一点变得清晰，或者什么。输出将用于除 python 之外的其他语言，它们需要可读和/或可解析的其他上下文。

很明显，我不了解 python 和 unicode 以及它的方式和位置。

1.  这在处理 json 时更可取吗？我不应该担心吗？

2.  我如何关闭它，或者我如何采取额外的步骤（我已经尝试过但无法弄清楚这是在哪里做的）以减少麻烦。

我有很多东西要学，所以任何输入都表示赞赏。

编辑：所有输入都很有用，谢谢。

我误以为 jsonify 做的比我想象的要多。如果我在任务链的早期执行 json.dumps，我会在另一端得到实际的 json。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T23:49:08.763

这没有什么问题，你不需要做任何事情。

在 Python 2 中，a`str`类似于 C 字符串——它只是一个字节序列，有时被错误地假定为 ASCII 文本。它可以包含*编码*文本，例如 UTF-8 或 ASCII。

该`unicode`类型表示一个实际的文本字符串，类似于 Java `String`。它是抽象意义上的文本，与特定编码无关。您可以将 a 解码`str`为`unicode`，或将 a 编码`unicode`为`str`。

JSON 键和值是字符串——它们不是字节数组，而是文本——因此它们`unicode`在 Python 中由对象表示。

如果您需要 JSON 输出以用于另一种语言，请使用该`json`模块从您的字典中生成它：

```
>>> import json
>>> print json.dumps({u'words': [u'every', u'single', u'word']})
{"words": ["every", "single", "word"]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T23:44:32.517

是的，这是更可取的，因为 JSON 被定义为 unicode。

如果您有更具体的问题给您带来麻烦，您应该分享它们，否则如果您对 Unicode（尤其是 Python）感到不舒服，我建议您观看[Ned Batchelder 的介绍。](http://bit.ly/unipain)我不知道是什么导致这对你造成滋扰，因为我不知道你在用这个 dict 做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T23:43:18.353

如果您有任何需要，您应该将 python 内部的所有内容保存在 unicode 中。在 python 与其他程序对话的地方，使用它`s.encode('UTF-8')`来创建一个常规字符串，您可以将其写入文件或套接字或其他任何东西。用于`s.decode('UTF-8')`将字符串从文件/套接字转换回 unicode。（UTF-8 似乎是一个合理的默认值，但请使用您的协议指定的任何内容。）

# ravendb - 如何对 RavenDB 中 Map/Reduce 索引中的数字属性进行范围查询

> ID：12207101
> 
> 赞同：1
> 
> 时间：2012-08-30T23:39:41.047
> 
> 标签：ravendb

我正在使用 Raven build 960 并且我有一个 Map/Reduce 减少索引。reduce 函数的一些属性是数字的，但是它们存储为字符串。这[似乎](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/FHKz1dgWHvw)是预期的行为，因为此时 Raven 没有类型信息。如果结果类将其声明为这样，则该属性将正确反序列化为相应的数字类型，例如 Int32。但是，它会中断范围查询并将值作为字符串而不是数值进行比较。

例如，属性之一是最初存储为小数的重量。当进行范围查询时，例如：`Weight:[3 TO NULL]`为了检索所有权重大于 3 的文档，它不会返回权重为 20 的内容，因为按字典顺序“20”<“3”。

在索引定义中，我已经指出`SortOptions.Float`了权重并且它排序正确，但是范围查询仍然失败。

如何对 Map/Reduce 索引中的数字属性进行范围查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:37:50.213

Eulerfx，我们在这里描述了我们如何将信息存储在索引中： [http ://ravendb.net/docs/appendixes/lucene-indexes-usage](http://ravendb.net/docs/appendixes/lucene-indexes-usage)

对于花车，您需要提供有关它的指示。

```
Weight:[Fx3 TO NULL] 
```

将工作

# java - Java - 正则表达式输入错误处理

> ID：12207102
> 
> 赞同：0
> 
> 时间：2012-08-30T23:39:41.397
> 
> 标签：java, regex, error-handling

我目前正在从事大学作业，并且有一个（很可能很简单）关于正则表达式/正则表达式的问题。

总结；这个任务是一个简单的 RSS 提要管理器，它使用 JSP 和一个 RESTful Web 服务。

我目前正在研究作业规范的一部分，该部分要求我能够输入 XML 提要数据（例如 <feeds><feed><name>FEED NAME</name><uri>http://FEEDuri/</ uri></feed></feeds> etc..）并从这些数据中，通过正则表达式提取 FEED NAME 和 FEEDuri。

我的讲师为我们提供了一个基本的工作方法，我认为我已经在我的 RESTful Web 服务中正确地实现了它，现在我正在实现错误处理。

对于用户没有数据输入的情况，我已经成功实现了错误处理。我的问题是：**基于示例方法（如下），是否可以针对提要格式输入不正确的情况实施错误处理**

eg:`&lt; fed> FEED NAME < /fiid> < uro>http://FEEDuri< /pro>`这里的 XML 标签显然是不正确的。

**正则表达式是否只会从字符串中提取组，如果它位于作为参数传递给编译方法的定义值之间？**

为了补充我的问题，这是给我们使用的基本方法（而不是 XML 解析器）：

```
public static List<Feed> getFeedsFromXml(String xml) {
      Pattern feedPattern = Pattern.compile("<feed>\\s*<name>\\s*([^<]*)</name>\\s*<uri>\\s*([^<]*)</uri>\\s*</feed>");
      Matcher feedMatch = feedPattern.matcher(xml);

      while (feedMatch.find()) {
          String feedName = feedMatch.group(1);
          String feedURI = feedMatch.group(2);
          feeds.add(new Feed(feedName, feedURI));
      }

      return feeds;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:01:57.027

是的，正则表达式只会匹配它匹配的字符串部分。如果您的正则表达式包含`"<feed>"`，则它不会匹配诸如`"<fed>"`or之类的字符串`"<fiid>"`。

如果输入字符串中的正则表达式不匹配，则在`feedMatch.find()`您第一次调用它时将简单地返回 false，因此`while`循环中的任何内容都不会执行。这个方法将简单地返回一个空列表，它可能应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:30:55.303

我不完全确定您的确切问题是什么。如果我理解正确，您正在实现错误处理并希望确保干净地处理任何格式错误的 XML。这里有两个考虑因素：1）您需要报告任何格式错误的 XML 的错误，以及 2）您不希望正则表达式匹配正确的 XML 并静默跳过任何格式错误的 XML。

让我们先来看看`Matcher.find()`简化版的 XML 解析器是如何工作的。我想匹配介于`<feed>`和之间的任何东西`</feed>`。为简单起见，我将简单地将结果打印到显示器上。

**代码：**

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexDemo {

    public static void main(String[] args) {
        System.out.println("Good XML");
        String goodXML = "<feed>CODE-GURU</feed><feed>ALEXM</feed>";
        matchFeeds(goodXML);

        System.out.println("Bad XML 1");
        String badXML1 = "<fed>CODE-GURU</feed><feed>ALEXM</feed>";
        matchFeeds(badXML1);

        System.out.println("Bad XML 2");
        String badXML2 = "<feed>CODE-GURU</fid><feed>ALEXM</feed>";
        matchFeeds(badXML2);

        System.out.println("Bad XML 3");
        String badXML3 = "<feed>CODE-GURU</fid><fiid>ALEXM</feed>";
        matchFeeds(badXML3);
    }

    public static void matchFeeds(String xml) {
        Pattern feedPattern = Pattern.compile("<feed>([^<]*)</feed>");
        Matcher feedMatch = feedPattern.matcher(xml);

        while (feedMatch.find()) {
            String feedName = feedMatch.group(1);

            System.out.println("Feed Name: " + feedName);
        }
    }
} 
```

**输出：**

```
Good XML
Feed Name: CODE-GURU
Feed Name: ALEXM
Bad XML 1
Feed Name: ALEXM
Bad XML 2
Feed Name: ALEXM
Bad XML 3 
```

“Good XML”测试准确地打印出预期的结果。但是，如果您不了解 Java 正则表达式的工作原理，“Bad XML 1”和“Bad XML 2”可能会让您感到惊讶。`Matcher.find()`定位“与模式匹配的输入序列的下一个子序列” 。这意味着它将跳过任何不匹配的内容，直到找到有效匹配项（如果有）。

幸运的是，您可以使用正确的正则表达式强制匹配从输入的开头开始。您只需要`\G`在正则表达式的开头添加 a ，以便`Matcher.find()`在最后一场比赛结束时准确开始。所以在我的例子中，正则表达式是`"\\G<feed>([^<]*)</feed>"`.

# java - 使用 java 在基于 REST 的 Web 服务中的文件响应

> ID：12207103
> 
> 赞同：1
> 
> 时间：2012-08-30T23:39:44.997
> 
> 标签：java, spring, rest

我正在使用 spring 编写一个 REST 网络服务。我必须在响应中返回一个文件。

它是一个 GET 调用，当用户输入 URL 时，应该在浏览器中向用户显示下载部分。

我不确定控制器中的返回类型应该是什么。我必须指定任何内容类型 i 代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:52:50.237

我的项目中有类似的要求。我使用了下面的代码

```
@Controller
@RequestMapping("/reports")
public class ReportsController {

    protected static String PRODUCTIVITY_REPORT_FILE = "productivityReportFile";

    @Resource(name="propertyMap")
    protected Map<String, String> propertyMap;

    @RequestMapping(value="/cratl/productivity_report", method=RequestMethod.GET, produces="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
    public @ResponseBody byte[] getProductivityReport()
            throws Exception {
        byte[] reportBytes = null;
        try {
            File reportFile = new File(propertyMap.get(PRODUCTIVITY_REPORT_FILE));
            if (reportFile != null && reportFile.exists()) {
                InputStream reportInputStream = new FileInputStream(reportFile);
                long length = reportFile.length();
                reportBytes = new byte[(int)length];
                int offset = 0;
                int numRead = 0;
                while (offset < reportBytes.length
                       && (numRead = reportInputStream.read(reportBytes, offset, reportBytes.length-offset)) >= 0) {
                    offset += numRead;
                }
                if (offset < reportBytes.length) {
                    throw new Exception("Could not completely read file "+ reportFile.getName());
                }
                reportInputStream.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return reportBytes;
    } 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:14:13.273

您的控制器方法（可以具有您想要的任何名称）返回一个带有 url 名称的字符串，该名称在为您要加载的视图（在本例中为下载部分）定义的 views.xml 中定义。所以你的控制器看起来像这样：

```
@Controller
public class MyController {

    @RequestMapping(value = "/downloads", method = RequestMethod.GET)
    public String getDownloadSection() {
        System.out.println("getting downloads");
        return "downloads/index";
    }
} 
```

您的 views.xml 应包含以下标记：

```
<definition extends="default" name="downloads/index">
<put-attribute name="body" value="/WEB-INF/views/downloads/index.jspx"/>
</definition> 
```

*extends="default"*是一个 tile 定义，应该在你的 layouts.xml 中

我想就是这样。如果您向 //yoursite/downloads 发出 GET 请求，它应该会打印该消息。

我希望那应该回答你的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:13:55.080

我使用了下面的代码

```
 FileInputStream inputStream = new FileInputStream("FileInputStreamDemo.java");  //read the file

    response.setHeader("Content-Disposition","attachment; filename=test.txt");
    try {
        int c;
        while ((c = inputStream.read()) != -1) {
        response.getWriter().write(c);
        }
    } finally {
        if (inputStream != null) 
            inputStream.close();
            response.getWriter().close();
    } 
```

这是在另一个线程中找到的

[如何在服务器响应上写入文件对象而不在服务器上保存文件？](https://stackoverflow.com/questions/7412337/how-to-write-a-file-object-on-server-response-and-without-saving-file-on-server)

# mysql - mySQL INSERT IGNORE SELECT with UNIQUE KEY 不起作用

> ID：12207105
> 
> 赞同：1
> 
> 时间：2012-08-30T23:39:56.957
> 
> 标签：mysql, insert

尝试通过使用**INSERT INTO SELECT**并连接两个源表来填充一个空的 MySQL 表。想要**忽略基于定义为****UNIQUE KEY**的两个目标表列的重复行的插入，但由于某种原因，仍在插入基于这两个列的重复行。

目标表定义：

```
CREATE TABLE `item` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `item_id` int(10) unsigned NOT NULL,
  `account_id` int(10) unsigned NOT NULL,
  `creation_date` datetime NOT NULL,
  `modification_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_item` (`item_id`,`account_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

插入查询：

```
INSERT IGNORE INTO item
            (id,
             item_id,
             account_id,
             creation_date,
             modification_date)
SELECT tblItem.ID,
       tblItem.itemID,
       tblOrder.accID,
       tblItem.itemTime,
       '0000-00-00 00:00:00'
FROM   tblItem
   INNER JOIN tblOrder
           ON tblItem.orderID = tblOrder.ID 
```

重复的行被插入到类似于以下内容的**项目中：**

```
id    item_id   account_id  creation_date           modification_date
2587    0       2           11/19/11 2:43           0000-00-00 00:00:00
2575    0       1120        11/17/11 19:32          0000-00-00 00:00:00
2575    0       1120        11/17/11 19:32          0000-00-00 00:00:00
382     60      193         0000-00-00 00:00:00     0000-00-00 00:00:00
941     95      916         10/28/11 15:52          0000-00-00 00:00:00
369     108     1           0000-00-00 00:00:00     0000-00-00 00:00:00
373     108     2           0000-00-00 00:00:00     0000-00-00 00:00:00
378     109     2           0000-00-00 00:00:00     0000-00-00 00:00:00
378     109     2           0000-00-00 00:00:00     0000-00-00 00:00:00 
```

我错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T00:03:27.527

尝试子句`DISTINCT`中的关键字：`SELECT`

```
INSERT IGNORE INTO item
        (id,
         item_id,
         account_id,
         creation_date,
         modification_date)
SELECT DISTINCT tblItem.ID,
   tblItem.itemID,
   tblOrder.accID,
   tblItem.itemTime,
   '0000-00-00 00:00:00'
FROM   tblItem
   INNER JOIN tblOrder
       ON tblItem.orderID = tblOrder.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:18:01.367

如[`CREATE TABLE`语法](http://dev.mysql.com/doc/en/create-table.html)中所述：

> 索引创建一个`UNIQUE`约束，使得索引中的所有值都必须是不同的。

您在 columns 上定义了一个复合索引`(item_id,account_id)`，因此该约束只要求每条记录都具有这两个列的不同组合。

在上面的示例中，似乎违反此约束的唯一记录是：

```
+--------+---------+------------+------ --+----------------------+
| 编号 | item_id | account_id | 创建日期 | 修改日期 |
+--------+---------+------------+------ --+----------------------+
| 第2575章 0 | 1120 | 2011-11-17 19:32:00 | 0000-00-00 00:00:00 |
| 第2575章 0 | 1120 | 2011-11-17 19:32:00 | 0000-00-00 00:00:00 |
| 378 | 109 | 2 | 0000-00-00 00:00:00 | 0000-00-00 00:00:00 |
| 378 | 109 | 2 | 0000-00-00 00:00:00 | 0000-00-00 00:00:00 |
+--------+---------+------------+------ --+----------------------+

```

然而，这些记录似乎也违反了`PRIMARY KEY`约束`id`（即它们似乎是*相同的记录*）。您显示的输出不太可能确实是`item`您定义的表的摘录：您几乎可以肯定正在查看其他表或查询的内容。

一种可能的解释是您定义了`TEMPORARY TABLE`一个同名的，它隐藏了定义约束 的基础`item`表。应该有助于确认您指的是您认为的表以及该表已在其上定义了您期望的约束。`UNIQUE``SHOW CREATE TABLE item;`

如果您绝对确定该表确实包含重复的约束条目（如果列中有重复项，`UNIQUE`则将返回以下语句），您可以尝试使用执行一些表维护。`TRUE``id`[*`myisamchk`*](http://dev.mysql.com/doc/en/myisamchk.html)

```
SELECT EXISTS (SELECT * FROM item GROUP BY id HAVING COUNT(*) > 1); 
```

# iphone - 找不到“-addSubView”方法

> ID：12207109
> 
> 赞同：0
> 
> 时间：2012-08-30T23:40:39.620
> 
> 标签：iphone, objective-c

我得到“没有找到'-addSubView'方法”

当我尝试将子视图添加到窗口时，在这种情况下尝试添加按钮。这是我的代码

```
@interface SBUIController 

-(id)window;

@end

@interface SBAwayView 

-(void)chargingView;
-(void)showChargingView;
-(void)hideChargingView;
-(void)showBulletinView;
-(BOOL)shouldShowChargingView;
-(void)hideCameraButton;

@end

%hook SBAwayController

-(void)_tearDownCameraPreview{

//SBAwayView *v = MSHookIvar<id>(self, //"_awayView");

UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; myButton.frame = CGRectMake(21, 80, 100, 35); [myButton setTitle:@"My Button" forState:UIControlStateNormal];

SBUIController *ui = MSHookIvar<id>(self, "_uiController");

[[ui window] addSubView:myButton];

%orig; }

%end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:05:02.980

消息被称为`addSubview:`，不是`addSubView:`。

```
[[ui window] addSubview:myButton]; 
```

# version - rpm 规范文件“建议”声明

> ID：12207110
> 
> 赞同：1
> 
> 时间：2012-08-30T23:40:43.707
> 
> 标签：version, rpm, requirements, rpm-spec

我目前正在翻新许多过时的规范文件，我记得谈论过软依赖关系，这对于当前的规范文件会派上用场（即 lighttpd 建议安装最流行的模块，如 mod_rewrite、mod_redirect）。

我的主要问题是，google 似乎没有发布任何关于**该声明的执行状态`Suggests:`、当前总体状态和 rpm 版本要求**的有价值信息。大多数文档和操作指南都来自 2004 年及更早的时间，过于过时而不能被视为可信赖的来源。绝对 rpm pdf 也没有说明任何关于`Suggests:`标签的内容。

非常感谢您提前提供的任何信息。

发布脚本：OpenSuSE 和 Mageia 似乎使用它，但除此之外..

[https://build.opensuse.org/package/view_file?file=meld.spec&package=meld&project=openSUSE%3AFactory](https://build.opensuse.org/package/view_file?file=meld.spec&package=meld&project=openSUSE%3AFactory)

[https://wiki.mageia.org/en/Packaging_for_beginners](https://wiki.mageia.org/en/Packaging_for_beginners)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:48:00.987

邮件列表上的一条消息表明`rpm 4.4.3`它已被介绍

[http://www.redhat.com/archives/rpm-list/2006-January/msg00034.html](http://www.redhat.com/archives/rpm-list/2006-January/msg00034.html)

# java - 如何在 Java 中识别计算机

> ID：12207116
> 
> 赞同：0
> 
> 时间：2012-08-30T23:41:14.463
> 
> 标签：java, sockets

我正在为一个学校项目制作一个网吧管理软件。

如何识别连接到服务器的每台新计算机（客户端）？我已经完成了连接，但我不知道如何识别每台计算机。我需要为每台客户端计算机设置名称或 ID。

有人可以给我示例代码或任何建议吗？:)

```
ServerSocket server;
Socket client;

public void Sync() {
    try {
        server = new ServerSocket(35557);
        System.out.println("Server started, waiting for client...");
        while (true) {
            System.out.println("Waiting for client...");
            client = server.accept();
            new Sync_procesador().start();
            System.out.println("Se conecto! :D");
        }
    } catch (Exception ex) {
        System.out.println(ex);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:08:52.450

客户端已通过您代表接收的套接字对象识别`server.accept()`。这真的取决于你想进一步用它做什么。如果您不使用多个端口运行应用程序`socket.getInetAddress().getHostAddress()`应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:49:03.103

从评论来看，在我看来，您真正想要的是关于如何在用户界面中*显示*一组连接的计算机的想法。（您已经知道如何识别计算机。）

我的建议是，您只需尝试一些简单的选项，看看它们是否有效。基本思想是创建一个了解所有已连接计算机的数据结构，然后提取信息（如名称列表）并将其显示在 UI 中。由您决定显示什么。可能性包括：

*   计算机的 IP 地址
*   计算机的 DNS 名称
*   使用计算机的人的姓名或昵称（您需要通过让用户登录或其他方式获得）

我建议尝试一些简单的东西，看看它有多有效。如果你有时间在你的项目中，然后修改它（稍后）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T23:44:11.250

您可能想获取远程网卡的IP地址，只需添加

```
client.getInetAddress() 
```

# database-design - 电子票的数据库设计

> ID：12207119
> 
> 赞同：1
> 
> 时间：2012-08-30T23:41:35.867
> 
> 标签：database-design, e-commerce

一个用户可以创建一个订单，一个订单可以用于多个 eTicket。每张票都需要在电子票表中拥有自己的行。此外，例如，如果用户决定升级其电子机票，则可以将后续订单分配给已经存在的电子机票。

因此，如果我有带有订单详细信息的标准订单结构，我如何将电子票与支付它的订单相关联？

我认为仅将订单分配给电子票是行不通的，因为如果订单是针对多个电子票并且每个电子票针对不同的事件，例如，那么您如何知道该电子票针对的是哪个事件，因为该信息是已经存储在订单详细信息行中？请记住……一个订单可以用于多张电子机票！

**编辑**

所以这就是我目前得到的......

# 命令

订单号 PK

# 产品

ProductId PK，EventId FK

# 订单详情

OrderDetailId PK、OrderId FK、ProductId FK、数量

# 电子机票分配

OrderDetailId FK, eTicketId FK

# 电子票

eTicketId PK

因此，如果用户为特定活动购买了三张电子票，则在结账时会创建三张电子票，并且每一张都分配给订单详细信息。还可以在存款和余额之间中断付款，并且通过订单详细信息将两个订单分配给同一个电子票。

现在我有这个工作，但我认为它有些不太对劲！电子票真的应该分配给订单明细吗？如果没有，那它还能去哪里？

**编辑 2**

电子商务引擎的核心需要能够销售任何东西，而 eTickets 代表了通过创建数据交付的产品的一个特例——所以我有点需要订单详细信息。此外，对于不代表固定住宿的电子票，订单详情中的数量给出了可以进入相应*单张*电子票的人数。当住宿固定时，例如当一个人在度假营地购买小木屋时，订单明细上的数量给出了小木屋的数量，每个小木屋都有自己的电子票。

这已经运行了一段时间......我想我只是在寻找一些关于设计的反馈，这似乎需要一些尴尬的查询。

例如，给定一些电子票，我如何确定它是针对哪个事件的？我需要加入从 eTicket 表到 product 表的三个连接，如果有多个订单分配给 eTicket，这将返回多行，这意味着我需要执行某种 TOP 1 子查询或聚合查询来获得价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:13:04.177

也许是这样的？这样，如果 eTicket 发生变化，您将更新`ticket_parent`到以前的`ticket_id`.

![](../Images/561cd2a88f1f08e43f067d6f0ae9a542.png)

**编辑 1**

在您编辑之后，这是我的想法：

您不需要数量，因为它可以通过订单的电子票数来计算。我认为不需要详细的订单表，因为您可以将其汇总为一个订单。此外，您当前的设置不会跟踪电子票的更改。我将对图表进行的唯一修改是添加`Product`表格。我会提出这个事件是属于一张票还是属于一个订单的问题，然后可能会移到`event_id`桌子`order`上。

# android - 如何在 Android 游戏中存储关卡？

> ID：12207120
> 
> 赞同：6
> 
> 时间：2012-08-30T23:41:39.003
> 
> 标签：android

这与其说是一个技术问题，不如说是一个风格问题。我正在对 Android 的 peg solitaire 进行概括，您可以玩不同的级别。他们每个人都会有不同的棋盘起始配置，你可以做的不同的动作，等等。现在我已经用一个基本级别编程了，所有这些变量最初都是这样初始化的。

我是否添加了一个具有所有不同级别的文本文件，并对其进行编程以从文本文件中读取它？我是否添加了一个 Level 类，其中包含每个级别的所有这些信息，并在它初始化时创建几个 Level 对象？我是否创建了一个 Level 类，但通过从文本文件中读取级别来初始化它？

我确信所有方法都可以，但是有标准的方法吗？我以前从未编写过这样的程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T23:57:33.093

真的没有标准的方法来做你想做的事，它真的取决于你需要存储的数据的复杂性来进行每个级别的初始化。这些数据会改变还是静态的？将其正确组织并与代码逻辑分开是否有意义？这些是您需要自己回答的问题，因为这是您的游戏，我们不知道所有细节。

鉴于此，您决定是否应该将该数据存储在 XML 文件、TXT 文件或其他文件中。真的没有正确答案。但是你应该（IMO）总是有某种`Level`类，这是在 OOP 上下文中的正确方法。构造函数可以有必要的参数来从 XML/TXT/任何数据构建关卡。它还可以具有所有级别参数，因此如果出于某种原因需要，您可以通过代码初始化所有内容。当然，不要忘记所有这些级别属性的 getter/setter 方法。

我认为你**不应该做**的一件事是“在初始化时制作几个 Level 对象”。你应该将你的游戏逻辑与数据分开，你不应该把两者混为一谈。

可能不是您要寻找的答案，但这主要取决于您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T00:01:48.537

我和我的朋友这样做的方式是将关卡属性存储在数据库中，然后根据用户选择的关卡，我们读取数据库并将其加载到我们的关卡类中，从而为用户创建关卡！

**编辑**

我们也是初学者，但是在制作完第一个关卡之后再制作新关卡非常容易。=] 特别是因为我们所要做的就是向我们的数据库添加一行并填写值。

# php - symfony 2.0 中的教义问题

> ID：12207124
> 
> 赞同：0
> 
> 时间：2012-08-30T23:42:40.327
> 
> 标签：php, symfony

我正在尝试运行：

```
php app/console doctrine:fixtures:load 
```

但我不断收到此错误：

```
Fatal error: Class 'Symfony\Bundle\DoctrineFixturesBundle' not found in /Library/WebServer/Documents/Symfony/app/AppKernel.php on line 17 
```

这是我的 AppKernel.php：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
            new Symfony\Bundle\DoctrineFixturesBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new Acme\HelloBundle\AcmeHelloBundle(),
            new Blogger\BlogBundle\BloggerBlogBundle(),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

这是我与学说相关的代表文件的一部分：

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.2.0

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.2.1

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.2.0

[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=bundles/Doctrine/Bundle/FixturesBundle 
```

我在 Symfony 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:13:11.567

您正在使用 Fixtures 包的 Symfony 2.1 兼容版本。因为您运行的是 Symfony 2.0，所以您需要使用 FixturesBundle 的 2.0 兼容分支，它恰好被命名为 2.0。

更改您的 deps 文件：

```
[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=bundles/Doctrine/Bundle/FixturesBundle
    version=origin/2.0 
```

并再次安装供应商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:53:50.197

你添加这个'Doctrine\Common\DataFixtures' => **DIR** .'/../vendor/doctrine-fixtures/lib'，你的autoload.php文件吗？

# hadoop - 一个适用于hadoop的启动项目

> ID：12207126
> 
> 赞同：-1
> 
> 时间：2012-08-30T23:42:45.773
> 
> 标签：hadoop, machine-learning, data-mining

我应该明年春天毕业。为了明年的就业市场，我想从现在开始自学hadoop。

任何人都可以为我的案例推荐一个适用的起始项目吗？我已经读过：“Hadoop，权威指南”。我的背景是机器学习和数据挖掘。

谢谢，

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:54:00.663

这个问题有点过于宽泛，无法为您提供好的答案。您需要详细了解自己想要学习的内容。

Hadoop 和它的机器学习兄弟 Mahout在他们的错误跟踪器中都有**未解决的问题。**所以继续，**浏览他们的愿望清单，并为 Hadoop 或 Mahout 贡献一个扩展**。将“Mahout 贡献者”添加到您的简历中肯定会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T23:47:55.317

我建议研究一下[Mahout](http://mahout.apache.org)，并尝试一下。它专注于机器学习和数据挖掘，这似乎很合适。

# asp.net-mvc - 编辑数据库持久行时加载级联下拉列表

> ID：12207127
> 
> 赞同：1
> 
> 时间：2012-08-30T23:42:46.850
> 
> 标签：asp.net-mvc, knockout.js, cascadingdropdown

我正在使用 ASP.Net MVC 3 构建一个应用程序，其中一个视图具有三个按需加载的 DropDownLists（国家、州和城市）。Create 视图没问题，但我不知道如何创建 Edit 视图，因为数据库表只存储 CityId。

我的数据库具有以下结构：

```
CountriesTable = {CountryID, CountryName}
StatesTable = {StateID, StateName, Abbreviation, CountryID}
CitiesTable = {CityID, CityName, StateID} 
```

当用户打开 Edit 视图时，我需要获取之前选择的 CityID 来查找 StateID，这将帮助我找到 CountryID。这必须引导三个 DropDown 的负载。

CountryDropDown = 将加载所有国家并选择具有所选城市 CountryID 的国家 StatesDropDown = 将加载所选国家的所有州 CitiesDropDown = 将加载所选州的所有城市

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:03:21.647

我不是 100% 确定我正确理解了你的问题，但我会试一试:)

你这样写：

> CountryDropDown = 将加载所有国家...

基于此，当您初始化您的 knockoutJS 视图模型时，您可以初始化一个[可观察数组](http://knockoutjs.com/documentation/observableArrays.html)`select`，其中包含代表国家列表的下拉列表/元素的可能值。

为此，您可以发出 AJAX 请求以获取填充下拉列表所需的数据，例如：

```
// Get all countries
$.getJSON("/GetAllCountries", function(data) { 
    // Add the new data to the observable array holding the list of countries
}); 
```

[在视图模型中使用可观察数组](http://knockoutjs.com/documentation/observableArrays.html)来表示视图中的数据和[`options`绑定](http://knockoutjs.com/documentation/options-binding.html)是一个好主意（可观察数组对数组的任何更改都会立即影响 UI）。

然后，您可以有三个 observable 分别代表三个下拉列表中的每个下拉列表中的选定值 - 例如：

```
self.selectedCountry = ko.observable();
self.selectedState = ko.observable();
self.selectedCity = ko.observable(); 
```

（请记住，`options`绑定允许您指定哪个“字段”应包含使用`value`参数选择的值。）

继续你写的前一个报价：

> CountryDropDown = 将加载所有国家*并选择具有所选城市 CountryID 的国家*

为此，您可以发出 AJAX 请求，询问网络服务器给定城市对应的国家/地区。使用该结果，您可以使用敲除更改国家下拉列表的选定值，如下所示：

```
self.selectedCountry(theCountryToBeSelected); 
```

然后你写：

> StatesDropDown = 将加载所选国家的所有州

要做到这一点，您可以利用淘汰赛订阅可观察对象更改的能力，当所选国家/地区发生更改时，您可以更改状态下拉列表的内容 - 例如像这样：

```
self.selectedCountry.subscribe(function(newSelectedCountry) {
    // Get all states based on the new selected country
    $.getJSON("/GetStatesForCountry/" + newSelectedCountry.id, function(data) { 
        // Add the new data to the observable array holding the list of states
    });
}); 
```

最后，你写：

> CitiesDropDown = 将加载所选州的所有城市

为此，您可以应用与上述相同的原则：根据所选州的 id 发出 AJAX 请求，并使用从服务器返回的数据填充表示城市列表的可观察数组。

如果这不是您想要的，我希望我至少能够启发您或为您指明正确的方向:)

# javascript - 取代输入：基于按钮单击事件的文本更改处理程序

> ID：12207129
> 
> 赞同：0
> 
> 时间：2012-08-30T23:43:06.383
> 
> 标签：javascript, jquery, javascript-events

我想要一个文本输入更改事件来禁用对表单中其他（相当复杂）字段的编辑，直到单击确定按钮。我希望用户能够在不运行输入文本更改处理程序的情况下仍然保持文本输入焦点的同时单击确定按钮。问题是这会离开文本输入字段并在确定按钮单击事件之前触发更改事件。

```
jQ('#text-input').change(function(){
    //disable other inputs until ok-button is clicked
}

jQ('#ok-button').click(function(){
    //save changes and re-enable other inputs
} 
```

当文本输入聚焦时单击 ok 按钮时，几乎同时触发事件，但首先是更改事件。有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:38:22.247

[http://jsfiddle.net/piyushjain7/X6K3W/](http://jsfiddle.net/piyushjain7/X6K3W/)

# jquery - jQuery 数组 - $inArray

> ID：12207131
> 
> 赞同：0
> 
> 时间：2012-08-30T23:43:08.893
> 
> 标签：jquery, arrays

如果购物车中有多个 SKU，我会抛出错误消息，但我需要对我的规则设置一个例外。下面是我的代码。

基本上这里发生的情况是，JNL758 是唯一可以与来自customizedProductIDs 和customizedProductIDs2 的任何SKU 一起放入购物车的SKU。

如果来自customizedProductIDs 或customizedProductIDs2 的1 个SKU 与JNL758 一起在购物车中，我需要一些不会显示错误消息的规则，但那就是这样 - 用户在购物车中不能有额外的SKU。

假设@JNL0500、JNL758 和 JNL123 在购物车中 - 我需要显示错误消息。如果购物车中只有 @JNL0500 和 JNL758，则不会显示错误消息。

```
var customizedProductIDs = ["@JNL0500", "@JNL0501", "@JNL0502", "@JNL0503", "@JNL0504"];
var customizedProductIDs2 = ["@JNL0408", "@JNL1036", "@JNL1735", "JNL1005", "@JNL0222", "@JNL0221"];
var cardsku = ["JNL758"];

function cartItemCountError() {
  if ($451 && $451.OrderDetails && $451.OrderDetails.lineItems) {
      var cartItemCount = $451.OrderDetails.lineItems.length;
      var errors = false;
      if (cartItemCount > 1) {
          for (var i = 0; i < cartItemCount; i++) {
              var currItem = $451.OrderDetails.lineItems[i];
              // If cart has a customized item in it (See customizedProductIDs array.), it may not have any other item in the cart.)
              if ($.inArray(currItem.productID, customizedProductIDs) != -1) {
                  errors = true;
              }
              else if ($.inArray(currItem.productID, customizedProductIDs2) != -1) {
                  errors = true;
              }
              if ($.inArray(currItem.productID, customizedProductIDs2) && ($.inArray(currItem.productID, cardsku)) != -1) {
                  errors = false;
              }

          }
      }
      return errors;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:57:50.817

我认为您处理此问题的最直接方法可能是从您要测试的值数组中删除 cardku 的“异常”项，如此处所示[，](https://stackoverflow.com/questions/3596089/how-to-add-and-remove-array-value-in-jquery)然后像往常一样继续测试您的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:58:06.873

cardSKU 的存在改变了您需要检查的阈值，该阈值定义了购物车是否有效。

一些伪代码以显示更简单的形式

```
var isCardSKU = Cart Contains cardsku 
var isCustomSKU = Cart Contains customizedProductIDs || Cart Contains customizedProductIDs2 

if (isCustomSKU && (isCardSKU && Cart.length > 2) || (!isCardSKU && Cart.length > 1)
{
  // Error here
} 
```

# ios - 在当前 UIView 上动态绘制多个 UIView 对象

> ID：12207140
> 
> 赞同：0
> 
> 时间：2012-08-30T23:44:00.717
> 
> 标签：ios, uiview, uiviewcontroller, core-graphics, quartz-graphics

我正在尝试使用自定义视图使我的主 ViewController 将多个自定义 UIView 绘制到主视图，但不知何故它们没有绘制，我正在尝试绘制点。

我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    MyCustomView *myView = (MyCustomView *)self.view;

    myView.xAxisLabel1 = @"customlabels 1";
    myView.xAxisLabel2 = @"customlabels 2";
    myView.xAxisLabel3 = @"customlabels 3";
    myView.xAxisLabel4 = @"customlabels 4";

    CustomDotView *newDot = [[CustomDotView alloc] initWithPointAtXCord:10 andYCord:10 withRadius:10 andColor:[UIColor redColor]];

    [self.view addSubview:newDot];

} 
```

但这不起作用，我想知道我的 CustomDotView 的构造函数是正确的还是我做错了什么

这是我的 CustomDotView 构造函数

```
-(id)initWithPointAtXCord:(float)xCord andYCord:(float)yCord withRadius:(float)radius andColor:(UIColor *)color {

    self = [super init];
    self.color = color;
    self.xCordenate = xCord;
    self.yCordenate = yCord;
    self.radius = radius;

    return self;

}
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 2.0);
    CGContextSetStrokeColorWithColor(context, color.CGColor);
    CGContextSetFillColorWithColor(context, color.CGColor);

    CGRect currentRect = CGRectMake(xCordenate, yCordenate, radius * 2 , radius * 2);

    NSLog(@"draw point?");

    CGContextAddEllipseInRect(context, currentRect);
    CGContextDrawPath(context, kCGPathFillStroke);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:23:44.163

好的，我继续在 Xcode 中写了这个，效果很好。这是我能想到的最简单的用例；这是里面的一个空白`UIViewController`。

```
@implementation ViewController

- (void)viewDidLoad
{

    CustomDotView *newDot = [[CustomDotView alloc] initWithPointAtXCord:10 andYCord:10 withRadius:10 andColor:[UIColor redColor]];

    [self.view addSubview:newDot];

}

@end

@implementation CustomDotView

-(id)initWithPointAtXCord:(float)inputXCoord andYCord:(float)inputYCoord withRadius:(float)inputRadius andColor:(UIColor *)inputColor
{
    xCoord = inputXCoord;
    yCoord = inputYCoord;
    color = inputColor;
    radius = inputRadius;

    self = [super initWithFrame: CGRectMake(xCoord, yCoord, radius * 2, radius * 2)];

    self.backgroundColor = [UIColor clearColor];

    return self;

}
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 1.0);
    CGContextSetStrokeColorWithColor(context, color.CGColor);
    CGContextSetFillColorWithColor(context, color.CGColor);

    CGContextAddEllipseInRect(context, rect);
    CGContextDrawPath(context, kCGPathFill);
}

@end 
```

如果你想移动 Dot，只需简单地改变它的框架。

# php - SQL 表复制脚本

> ID：12207142
> 
> 赞同：0
> 
> 时间：2012-08-30T23:44:27.630
> 
> 标签：php, mysql

我有一个网站[http://www.league.vivahosting.co.uk](http://www.league.vivahosting.co.uk)，它使用 Joomla 作为主要 cms 和 Dragonflycms 作为联赛组件模块。

现在我想要实现的是一个脚本，用于从`jos_users`表中复制用户名和电子邮件并将其插入`cmsdf_users`表中，现在每个表中的行如下

```
jos_users - username, email
cmsdf_users - username, user-email 
```

现在我想对密码做同样的事情，但 joomal 的加密是哈希：我相信和 Dragonflycms 是 md5，所以我正在考虑一种解决方法，使用 joomla 提供的自定义字段来获得在传输过程中加密的纯 txt 密码从 db 到 db 的过程。

`letnp_user`现在自定义字段没有保存在 jos_users 表中，我相信它位于该表中`user_id`。

以下是我到目前为止所拥有的

```
<?php

// Set the connection information
print $con = mysql_connect("localhost", "DBName", "Pass");

// Select the original database containing old records
print mysql_select_db("DBName", $con);

// Check the connection
if (!$con)
{
print die('Could not connect: ' . mysql_error());
}

// Select the records from the database
print $query = "SELECT * FROM letnp_users" or die(mysql_error());

// Run the query
print $result = mysql_query($query);

// Now select the new database
# mysql_select_db("cmsdf_users", $con);

// Loop through each row from the old database
while ($row = mysql_fetch_assoc($result))
{
     // Set each column to a variable
    $username = $row['username'];
    echo  $username;    
    $email = $row['email'];
    echo $email;
     // You could also reset defaults or check for NULL columns
     // Here's an example for permissions:
     if ($row['permissions'] == 0)
     {
          $permissions = 1;
     }
     else if ($row['permissions'] > 3)
     {
          $permissions = $row['permissions'] + 1;
     }
     else
     {
          $permissions = $row['permissions'];
     }
     $date = $row['date'];

     // Set up the INSERT query
     $insert = "INSERT INTO cmsdf_users (username, user_email) VALUES ('$username', '$user_email')";

     // Run the INSERT query
    $insert = mysql_query
    ("
    INSERT INTO cmsdf_users(username,user_email)
    VALUES (NULL,'".$user."','".$user_email."')
    "); 

     // Check to make sure this particular INSERT worked
     if (!mysql_insert_id())
     {
          echo "ERROR: there was a problem inserting data.";
     }
}

// Close the connection
print mysql_close($con);

?> 
```

但似乎不起作用，它给出了以下错误

```
Resource id #11SELECT * FROM letnp_usersResource id #2Cprl.Rstadmin@vivahosting.co.ukERROR: there was a problem inserting data.1 
```

# android - 如何为 android 交叉编译 LTP

> ID：12207144
> 
> 赞同：1
> 
> 时间：2012-08-30T23:44:37.943
> 
> 标签：android, linux, testing, cross-compiling

有人交叉编译和使用 LTP for android，我尝试使用 arm-eabi 工具链、arm-linux-none-gnueabi 工具链交叉编译 LTP，但我无法在 android 设备中执行测试用例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-12T22:08:26.480

首先创建独立工具链（使用[make-standalone-toolchain.sh](https://android.googlesource.com/platform/ndk/+/master/build/tools/make-standalone-toolchain.sh)脚本）并将其安装到`/opt/android-standalone-toolchain.api-${API}`.

构建本身：

```
API=24
export TOOLCHAIN_ROOT=/opt/android-standalone-toolchain.api-${API}
export SYSROOT=$TOOLCHAIN_ROOT/sysroot
export CROSS_COMPILE=$TOOLCHAIN_ROOT/bin/arm-linux-androideabi-
export HOST=arm-linux-androideabi

# Non-exhaustive lists of compiler + binutils
# Depending on what you compile, you might need more binutils than that
export CPP=${CROSS_COMPILE}cpp
export AR=${CROSS_COMPILE}ar
export AS=${CROSS_COMPILE}as
export NM=${CROSS_COMPILE}nm
export CC=${CROSS_COMPILE}gcc
export CXX=${CROSS_COMPILE}g++
export LD=${CROSS_COMPILE}ld
export RANLIB=${CROSS_COMPILE}ranlib

export CFLAGS="${CFLAGS} --sysroot=${SYSROOT} -I${SYSROOT}/usr/include \
    -I${ANDROID_PREFIX}/include"
export CPPFLAGS="${CFLAGS}"
export LDFLAGS="${LDFLAGS} -L${SYSROOT}/usr/lib -L${ANDROID_PREFIX}/lib"

make autotools
./configure --host=${HOST} --with-sysroot=${SYSROOT}
make -j$(getconf _NPROCESSORS_ONLN) ANDROID=1
make install
adb push /opt/ltp /data/local/tmp 
```

学分：使用变量`ANDROID=1`记录在 LTP 源代码的[INSTALL](https://github.com/linux-test-project/ltp/blob/master/INSTALL#L253)文件中，设置其他变量的灵感来自[android_configure.sh](https://gist.githubusercontent.com/nddrylliog/4688209/raw/443e3db88bab4b8e5ed73f2bcf3be853029d68fd/android_configure.sh)。

但目前构建失败，因为需要禁用许多测试（仿生不支持许多必需的功能，请参阅谷歌人员制作的[需要禁用的测试列表](https://android.googlesource.com/platform/external/ltp/+/master/android/tools/disabled_tests.txt)）。

目前，上游正在努力修复为 Android 构建 LTP。来自 google 的人**[将 LTP 添加到 AOSP](https://android.googlesource.com/platform/external/ltp/)**中，但他们将代码回馈给 LTP 上游（请参阅 LTP 邮件列表中的信息，[来自 google 计划贡献的人](http://lists.linux.it/pipermail/ltp/2017-September/005551.html)，[他们关于构建的说明](http://lists.linux.it/pipermail/ltp/2017-September/005663.html)）。

一些与 android 相关的修复（来自 google 和其他人）：[修复可执行 shell 路径](https://github.com/linux-test-project/ltp/commit/1b3e3e2755815ef3ed42e53bd7cf292b9cae69b1)、[修复临时目录](https://github.com/linux-test-project/ltp/commit/567a489a6e8eedec17bf919aaaec6ca88949ecc3)、[修复 stack_clash 测试](https://github.com/linux-test-project/ltp/commit/c3b43efc8174e236c02ffeb27434bbc816f2ee43)。

目前，在 AOSP 中使用 google 的存储库可能更容易（在 AOSP 树中的树内构建或具有独立工具链的树外构建），但 LTP 上游迟早应该从 google 的存储库中获得所有针对 android 的修复。

# android - Activity 生命周期——声明顺序的重要性

> ID：12207145
> 
> 赞同：1
> 
> 时间：2012-08-30T23:44:47.210
> 
> 标签：android, android-activity, lifecycle

它是否改变了要写的东西：

```
@Override
protected void onDestroy() {
    MydbHandler.close();
    super.onDestroy();
} 
```

或者

```
@Override
protected void onDestroy() {
    super.onDestroy();
    MydbHandler.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:56:32.000

一般建议是：

*   对于具有明确“创建”语义的生命周期方法（例如`onCreate()`，、、、 ） `onStart()`，`onResume()`首先链接到超类

*   对于具有明确“破坏”语义的生命周期方法（例如`onPause()`，、、、 ） `onStop()`，`onDestroy()`在您的任何工作之后最后链接到超类

*   对于其他一切，除非另有说明，否则希望无关紧要

因此，使用您的第一个片段通常是更好的形式。话虽如此，我不知道您的第二个片段有任何实际问题——事实上，我在最初几年的 Android 开发中使用了相同的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T23:56:42.553

不，在这种情况下没有区别。

[您可以查看Activity.onDestroy()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/Activity.java#Activity.onDestroy%28%29)的源代码（来自 grepcode.com）。您将看到 onDestroy() 只是关闭所有托管对话框、托管光标并关闭 SearchManager（如果已打开）。

# objective-c - 了解这个“代表”是什么？

> ID：12207148
> 
> 赞同：1
> 
> 时间：2012-08-30T23:44:55.683
> 
> 标签：objective-c, delegates, uisplitviewcontroller

我正在学习 Objective-C，我必须做一个应用程序。我正在尝试做的是从 my `MainViewController`, a `SplitViewController`, 在代码中调用。这已经解决了。现在，我必须调用多个`DetailViewControllers`. 我找到了这个例子： http:
[//kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/](http://kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/)

在此示例中，它们用于`MultipleDetailViewsWithNavigatorAppDelegate`声明`SplitViewController`and `MasterViewController`，因为`SplitViewController`是从头开始加载的`ViewController`，并且使用`didFinishLaunching`函数`AppDelegate`. 在我的应用程序中，我`SplitViewController`在第二个中加载`ViewController`，所以 my`SplitViewController`被声明并加载到 my 中`ViewController`，而不是在 my 中`AppDelegate`。我读过，“委托”就像`Interfaces`以不同的方式声明和实现方法，但这里没有使用协议或委托方法。`AppDelegate`所以，我必须为我做其他事情`SecondViewController`，并在这个新`AppDelegate`的`SplitViewController`和声明中声明`MasterViewController`？...或者这个`AppDelegate`变量引用，只是为了引用`SplitViewController`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:09:06.060

来自[Cocoa 核心能力](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)：

> 委托是一种简单而强大的模式，其中程序中的一个对象代表另一个对象或与另一个对象协作。委托对象保留对另一个对象（委托）的引用，并在适当的时间向它发送消息。该消息通知委托对象将要处理或刚刚处理的事件的委托。委托可以通过更新自身或应用程序中其他对象的外观或状态来响应消息，并且在某些情况下，它可以返回一个影响即将发生的事件的处理方式的值。委托的主要价值在于它允许您在一个中心对象中轻松自定义多个对象的行为。

# c#-4.0 - 加载所有扫描仪设备？

> ID：12207150
> 
> 赞同：1
> 
> 时间：2012-08-30T23:45:42.267
> 
> 标签：c#-4.0, device-driver, image-scanner

嗨，我真的需要帮助，我键入此代码以将所有连接的扫描仪设备加载到组合框，但它在 windows xp 的 windows 7 中工作我得到了这个嘈杂的异常

由于以下错误，检索具有 CLSID {00020819-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154。

这是我的代码

```
public static void LoadScanners(ComboBox c)
   {
       MC.enableWIA();
       string deviceName = "";
       c.Items.Clear();

       WIA.DeviceManager deviceManager = new WIA.DeviceManagerClass();
       // Loop through the list of devices and add the name to the combobox

       foreach (WIA.DeviceInfo info in deviceManager.DeviceInfos )
       {
           if (info.Type == WIA.WiaDeviceType.ScannerDeviceType)
           {
               foreach (WIA.Property p in info.Properties)
               {
                   if (p.Name == "Name")
                   {
                       deviceName = ((WIA.IProperty)p).get_Value().ToString();
                       c.Items.Add(deviceName);
                   }
               }
           }

       }
   } 
```

此行发生异常

```
 WIA.DeviceManager deviceManager = new WIA.DeviceManagerClass(); 
```

# c# - Linq to XML 使用 Take() 获取前两个元素

> ID：12207156
> 
> 赞同：3
> 
> 时间：2012-08-30T23:46:26.927
> 
> 标签：c#, linq-to-xml

我正试图围绕 Linq to XML 展开思考。我有一个如下所示的 XML 文档：

```
<update>
    <comments total="4">
        <comment>
            <person>
                <id>SomeID1</id>
                <name>SomeName1</name>
                <picture>PictureURL1</picture>
            </person>
            <message>Comment number 1</message>
        </comment>
        <comment>
            <person>
                <id>SomeID2</id>
                <name>SomeName2</name>
                <picture>PictureURL2</picture>
            </person>
            <message>Comment number 2</message>
        </comment>
        <comment>
            <person>
                <id>SomeID3</id>
                <name>SomeName3</name>
                <picture>PictureURL3</picture>
            </person>
            <message>Comment number 3</message>
        </comment>
        <comment>
            <person>
                <id>SomeID4</id>
                <name>SomeName4</name>
                <picture>PictureUR4L</picture>
            </person>
            <message>Comment number 4</message>
        </comment>
    </comments>
</update> 
```

我想做的就是只接受前两条评论。这是我的代码：

```
var commentsList = (from comments in doc.Descendants("comments").Take(2)
                   select comments.Elements("comment")); 
```

如果文档有两个或更少的评论，这很好用，但是当有两个以上的评论时，我会得到以下异常：

> 无法将“d__11”类型的对象转换为“System.Xml.Linq.XElement”类型

我错过了什么吗？

编辑：我忘了提到当我尝试使用 foreach 循环遍历 commentsList 时抛出异常。我也尝试使用 .ToList() 但仍然得到相同的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:58:00.457

您可以直接跳到评论元素。

```
var commentsList = doc.Descendants("comment").Take(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:48:49.800

试试这个：

```
var commentsList = from comments in doc.Descendants("comments")
                   select comments.Elements("comment").Take(2); 
```

# c# - 如何在 Gecko Webbrowser c#/.net 中使用 DocumentComplete 事件

> ID：12207157
> 
> 赞同：2
> 
> 时间：2012-08-30T23:47:04.183
> 
> 标签：c#, .net, webbrowser-control, gecko, readystate

我正在 c# 中创建一个包含“geckoWebBrowser”的应用程序。但我必须等待网页加载完成，然后继续执行其他指令。

请帮助我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        listBox1.SelectedIndex = 0;
        while (listBox1.Items.Count != 1)
            {
                 geckoWebBrowser1.Navigate(textBox1.Text);

                 // i want to perform below thing after web page load completes

                 listBox1.Items.RemoveAt(listBox1.SelectedIndex);
                 listBox1.SelectedIndex = 0;
                 int i = listBox1.Items.Count;
                 string str = Convert.ToString(i);
                 label2.Text = str;
            }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T15:27:54.410

尝试这个：

```
private void button1_Click(object sender, EventArgs e)
{
    listBox1.SelectedIndex = 0;
    while (listBox1.Items.Count != 1)
        {
             geckoWebBrowser1.DocumentCompleted += new EventHandler(browser_DocumentCompleted);
             geckoWebBrowser1.Navigate(textBox1.Text);
        }
}

void browser_DocumentCompleted(object sender, EventArgs e)
{
    // Do stuff here      
} 
```

# html - HTML5 图像和缩放问题

> ID：12207159
> 
> 赞同：0
> 
> 时间：2012-08-30T23:47:06.097
> 
> 标签：html, canvas, image-scaling

当我在画布中绘制图像时，我必须指定画布的宽度和高度，以便它与我试图绘制的图像大小相匹配。

```
<script>
  window.onload = function() {
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();

    imageObj.onload = function() {
      context.drawImage(imageObj, 0, 0);
    };
    imageObj.src = "<%=image_path('logo.jpg')%>";

  };

</script>
<canvas id="myCanvas" width="700" height="400"></canvas> 
```

指定画布的宽度和高度不是很好，因为我可能需要使用与取决于屏幕分辨率的值不同的值，我需要处理比例，所以我想知道如何处理这个以及如何绘制无需指定画布宽度和高度的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:06:57.350

我建议使用百分比来指定高度和宽度。这些将值定义为包含块的百分比。

此外，任何时候你给这些属性特定的值，类型都应该明确定义（例如`width="700px"`）。

但请谨慎使用，因为这些可能会扭曲您的图像，具体取决于您定义属性的方式。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:18:40.700

您不一定需要指定画布的宽度和高度。您可以随时通过其宽度和高度属性更改它。你也可以有一个固定大小的画布，然后缩放你的图像，使它们适合它或被拉伸。

你可以在这个[小提琴](http://jsfiddle.net/jbalsas/ZUeJC/)中看到几个场景。

1.  最初画布没有宽度和高度
2.  加载图像时，它会激活“自动”模式，这意味着它将画布大小更改为图像的大小

然后，您可以使用按钮来触发其他缩放模式

*   *Fit* : 使图像适合 400x400 画布并将其居中
*   *拉伸*：调整图像大小，使其完全填满 400x400 画布
*   *真实*：图像以其原始尺寸渲染，但画布尺寸为 400x400
*   *Auto*：画布大小与图像大小匹配

我希望这可以帮助您获得一些想法。

# ruby - Sinatra 的好表单助手？

> ID：12207161
> 
> 赞同：4
> 
> 时间：2012-08-30T23:47:46.740
> 
> 标签：ruby, forms, sinatra

我开始做表格，并在 Sinatra 中寻找表格助手。

*   Sinatra 似乎没有内置的表单助手。
*   Padrino 中的助手看起来像我所追求的，但我不想将我的应用程序移植到另一个框架。另外，它开始看起来像一个 Rails 应用程序。
*   我还没有找到任何“事实上的”选择的 Sinatra 表单助手。

理想情况下，我只需要一组体面的表单助手，我可以将它们作为宝石包含并开始使用，而不是手动滚动所有基本级别的 erb/haml/ruby 表单构建。

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T03:32:16.630

我推荐使用`sinatra-formhelpers-ng`，因为它修复了`sinatra-formhelpers`.

我也发现`sinatra-formhelpers`它很有用，但它似乎没有得到维护，我遇到了一个错误：SELECT 标记的状态不会在表单提交中保持不变。换句话说，如果我创建一个包含一堆字段和两个下拉列表（SELECT 标记）的表单，如果我说由于除了 SELECT 标记之外的验证失败而想要在 POST 中重新呈现表单，所有字段都会保留。我修复了这个并将其推送到原始`sinatra-formhelpers`仓库。推送已被接受，但 gem 未更新。我等了几个星期，然后把它分叉到`sinatra-formhelpers-ng`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T01:59:00.080

我发现`sinatra-formhelpers`它很有用，并在一些项目中使用过。看看[他们的 Github 页面](https://github.com/nateware/sinatra-formhelpers)，代码非常简单，可能正是你要找的。即使没有，您也可以轻松添加自己的专业助手。你可以简单地安装它

```
gem install sinatra-formhelpers 
```

并通过要求 Gem 来使用它：

```
require 'sinatra/form_helpers' 
```

或者，如果您是子类`Sinatra::Base`，则另外包括助手：

```
class MyApp < Sinatra::Base
  helpers Sinatra::FormHelpers
  # ...
end 
```

毕竟，Sinatra 的部分哲学是尽可能轻。因此，如果您想要内置所有花哨的东西，Sinatra 可能不是正确的工具。

# ajax - Rails3 ajax 更新用于谷歌地图的数据

> ID：12207167
> 
> 赞同：0
> 
> 时间：2012-08-30T23:48:48.240
> 
> 标签：ajax, ruby-on-rails-3, google-maps

我有一个 ajax 表单来发送这些点，并通过这些点找到这两点之间的最短路径。

所有这些都可以在没有 ajax 的情况下工作，只需将数据发送到服务器并重新渲染页面和所有这些东西，**但我需要使用 ajax 进行这项工作**

**问题是**我无法将在服务器（控制器+模型）中生成的数据（json）发送/上传到客户端（视图）

我正在做这个（1）以及我如何说它在没有 ajax 的情况下工作

(1)

```
# views/places/finder.html.erb    
<%= form_tag({controller: "places", action: "found"}, remote: true) do %>
    <%= hidden_field_tag :lon_s %> # 
    <%= hidden_field_tag :lat_s %> # these fields are updated automatically
    <%= hidden_field_tag :lon_t %> # with clicks the user do on the map 
    <%= hidden_field_tag :lat_t %> #

    <%= submit_tag "Buscar ruta", id: 'buscar_ruta' %>
<% end -%>

#places_controller.rb
def found
    res = Way.path_cost_from(params[:lon_s].to_f, params[:lat_s].to_f, 
                             params[:lon_t].to_f, params[:lat_t].to_f)
    @costo = res[:cost]
    gon.poly = Way.get_way(res[:edges])
    @path = Way.get_way(res[:edges])
end

#views/places/found.js.coffee
console.log <%= @costo %> #this show the cost in the console, it works.
console.log <%= gon.poly %> #undefined local variable or method `gon'
console.log <%= @path %> #Error: Parse error on line 3: Unexpected ':' 
```

在没有 ajax 的版本之前，我使用[gon gem](https://github.com/gazay/gon)来传递谷歌地图 API 需要显示/构建折线所需的点。

```
#assets/javascripsts/places.js.coffee
if gon.poly?
  poly = gon.poly
  MAP.addPolyline poly 
```

**poly**是我以 json 格式构建的对象。

```
each do |point|
    path << { lon: unprojected_point.x, lat: unprojected_point.y }
end
return path 
```

如果您愿意，可以在我的 github 帐户[https://github.com/figuedmundo/final中查看我的项目](https://github.com/figuedmundo/final)

我一直在寻找执行此操作的示例，但我发现的唯一示例是呈现一些用于更新页面的 html 代码（普通的 ajax），但 google maps api 只是 javascript。

* * *

**解决方案**

我的代码的想法可能不是最佳的，但它可以工作，最终这就是客户想要的。

问题是自动传递给视图的变量**@path**被转义了，所以json对象不可读。**html_safe 解决**问题

```
console.log <%=  @path.html_safe %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:11:53.637

我认为您可以尝试使用 <%= f.submit_tag "Buscar ruta", id: 'buscar_ruta' %> 而不是 <%= submit_tag "Buscar ruta", id: 'buscar_ruta' %

# regression - 使用 libsvm 进行滞后时间序列的多元回归

> ID：12207168
> 
> 赞同：2
> 
> 时间：2012-08-30T23:48:48.327
> 
> 标签：regression, svm, libsvm

我正在尝试开发一个电力消耗预测器。所以我想使用一整年的每日数据进行回归。我的数据集有几个特征。谷歌搜索我发现我的问题是一个[多元回归](https://www.google.com/search?q=multiple%20regression)问题（如果我弄错了，请纠正我）。

我想要做的是训练一个`svm`带有多个自变量和一个具有 n 滞后天数的因变量的回归。这是我的自变量的一个样本，我实际上有大约 10 个。（我们用来`PCA`确定哪些变量与我们的问题有一定的相关性）

```
Day     Indep1    Indep2    Indep3
1       1.53      2.33      3.81
2       1.71      2.36      3.76
3       1.83      2.81      3.64
...     ...       ...       ...
363     1.5       2.65      3.25
364     1.46      2.46      3.27
365     1.61      2.72      3.13 
```

而自变量1其实就是我未来的因变量。因此，例如，对于 ap=2（滞后天数），我希望我`svm`能够使用所有三个独立变量的前 2 个时间序列进行训练。

```
Indep1   Indep2    Indep3
1.53     2.33      3.81
1.71     2.36      3.76 
```

因变量的输出值为“1.83”（时间 3 上的独立变量 1）。

我的主要问题是我不知道如何正确训练。我所做的只是将所有 features-p 放入我的“x”变量和“y”变量的数组中，我只是将我的自变量放在 p+1 上，以防我想预测第二天的功耗。

培训示例。

```
x with p = 2 and 3 independent variables            y for next day
[1.53, 2.33, 3.81, 1.71, 2.36, 3.76]                [1.83] 
```

我尝试将 x 作为一个二维数组，但是当你将它组合几天时，它变成了一个 3d 数组并`libsvm`说它不可能。

也许我应该换成`libsvm`另一种工具，或者只是我训练不正确。

谢谢你的帮助，阿尔多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:42:37.057

让我用 python / numpy 表示法来回答。

假设具有列 (Indep1, Indep2, Indep3, ...) 的原始时间序列数据矩阵是一个`data`形状为 的 numpy 数组`(n_samples, n_variables)`。让我们为这个例子随机生成它：

```
>>> import numpy as np
>>> n_samples = 100, n_variables = 5
>>> data = np.random.randn(n_samples, n_variables)
>>> data.shape
(100, 5) 
```

如果要使用 2 个时间步长的窗口大小，则可以按如下方式构建训练集：

```
>>> targets = data[2:, 0]  # shape is (n_samples - 2,)
>>> targets.shape
(98,)
>>> features = np.hstack([data[0:-2, :], data[1:-1, :]])  # shape is (n_samples - 2, n_variables * 2)
>>> features.shape
(98, 10) 
```

现在你有你的 2D 输入数组 + 1D 目标，你可以将它们提供给 libsvm 或[scikit-learn](http://scikit-learn.org)。

**编辑**：很有可能提取更多面向时间序列的特征，例如移动平均值、移动最小值、移动最大值、移动差异（信号的基于时间的导数）或[STFT](http://en.wikipedia.org/wiki/Short-time_Fourier_transform)可能有助于您的 SVM 模式做出更好的预测。

# php - 尝试检查 $_GET 是否有空参数

> ID：12207170
> 
> 赞同：6
> 
> 时间：2012-08-30T23:48:56.617
> 
> 标签：php

我正在编写一个脚本，该脚本会提取几个 $_GET 变量，然后在脚本中使用这些变量来计算报价等。

我的噩梦只是能够确定它们中的任何一个是否没有值，例如 ?var1=500&var2=&var3=Yes var2 是那里的罪魁祸首。

根据是否所有的 $_GET 变量都有值，我将相应地采取不同的行动。

我研究并提出了这个选项：

```
<?php 
foreach($_GET as $name => $value) {
    if ($value == "") {
        $proceed = 0;
    } else {
        $proceed = 1;
    }
}
?> 
```

我现在使用 $proceed 来回显一段简单的文本，只是为了测试目的。

这不起作用，我考虑过**isset**和**empty**但我相信这两个选项在这种情况下都没用。我在许多资料中读到 $_GET 参数没有给出值默认为 "' 所以我很困惑为什么这不起作用。

由于有时参数会设置为 0，所以我不能在这里使用**empty 。**

不用说，我已经打印了$_GET的内容，得到了满意的结果，所以数据都很好。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:53:08.760

*缺少*的参数不会出现在`$_GET`. 假设查询字符串如下所示：

```
index.php?page=5 
```

如果您期望一个`id`参数，它不会自动显示在`$_GET`. 您只需要`isset`在使用它们时检查使用（并针对空字符串） - 而不是先发制人。那是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:43:08.373

您可以使用以下代码定义变量列表并将其设置为通过 $_GET 传递的值（如果存在），或者如果不存在或在查询字符串中没有值则设置为空字符串：

```
$getvars = array();
$expectedvars = array(                    // define variables to be set from $_GET
  'var1', 'var2', 'var3', 'var4', 'var5',
);

foreach($_GET as $key => $value) {        // store all $_GET variables present
  $getvars[$key] = $value;                // in an associative array
}

foreach($expectedvars as $variable) {          // now create all vaariables,
  ${$variable} = (isset($getvars[$variable]))  // if value was passed in url
    ? $getvars[$variable]                      // then set to that value
    : '';                                      // otherwise set as empty string
} 
```

这将创建具有适当值的变量 $var1、$var2、$var3、$var4 和 $var5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:16:53.427

这样的事情怎么样？

```
<?php 
$expectedVars = array('var1', 'var2');

foreach($expectedVars as $key => $val) {
    if($_GET[$val] == "") {
        $proceed = 0;
    } else {
        $proceed = 1;
    }
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T00:18:48.743

**如果**我正确地阅读了你的问题，你的样子：

检查要设置的参数并有一个值，但也可以使用 foreach 循环 $_GET 为方便起见。

也许，制作一个您期望的参数数组，然后循环遍历它，并检查 $_GET 是否也包含相同的键。

```
<?php 
$allowed = array('var1','var2','var3');
$error = array();

foreach($allowed as $key) {
    if(array_key_exists($key,$_GET)) {
        //Validate, value must contain t least 1 len
        if(strlen($_GET[$key]) >= 1){
            $$key = $_GET[$key];
        }else{
            //Assign an error if param has a blank value
            $error[$key] = $key." parameter must contain a value";
        }

    }else{
        //Assign an error if params not been passed to the url
        $error[$key] = $key." parameter not set";
    }
}

if(!empty($error)){
    //A Params missing or has no value, dont continue
    echo 'All parameters required!<br />';
    foreach($error as $value){
        echo '* '.$value.'<br />';
    }
}else{
    //No errors do something
    echo 'var1 is set: '.$var1;
    echo 'var2 is set: '.$var2;
    echo 'var3 is set: '.$var3;
}
?> 
```

# uml - UML 图显示框架

> ID：12207171
> 
> 赞同：0
> 
> 时间：2012-08-30T23:48:58.067
> 
> 标签：uml, visualization

我正在寻找制作 UML 差异工具的原型。有哪些开源可视化工具包可以让我显示 UML 图？

然而，我仍然需要能够对显示进行个人编辑。（即重新聚焦、下拉列表、附加显示。）

我看过[Zest](http://wiki.eclipse.org/Zest#New_layout_algorithms)和[Perfuse](http://www.mpi-inf.mpg.de/~amazeika/projects/prefuse/prefuse.html)。但是这些应用程序都没有显示 UML 的方法。如果它们确实有效，它们显示 UML 的示例在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:03:53.967

[这里](http://wiki.eclipse.org/MDT-UML2-Tool-Compatibility)列出了几个用于 Eclipse 的开源 UML 工具 及其许可证。

对于差异部分，您应该检查[EMFCompare](http://www.eclipse.org/emf/compare/)和此[模型版本控制工具](http://modeling-languages.com/version-control-tools-modeling-artifacts/)列表， 因为它们可以在您的项目中重用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:14:16.953

您可能想看看[GEF](http://www.eclipse.org/gef/)。据我所知，[ArgoUML](http://argoeclipse.tigris.org/)就是基于这个框架。

# javascript - 在悬停时展开垂直下拉菜单而不是单击

> ID：12207174
> 
> 赞同：2
> 
> 时间：2012-08-30T23:49:25.117
> 
> 标签：javascript, css

我有一个可展开的垂直下拉菜单，当前在单击第一级项目时会展开，但是我希望它在菜单项悬停时展开。原来的脚本是：

```
<script type="text/javascript">
  $(document).ready(function () {
  $('#nav > li > a').click(function(){
  if ($(this).attr('class') != 'active'){
  $('#nav li ul').slideUp();
  $(this).next().slideToggle();
  $('#nav li a').removeClass('active');
  $(this).addClass('active');
    }
  });
});
</script> 
```

我改为`.click(function`并且`.hover(function`这有效，但是我不知道这是否是最好的方法。谁能建议是否有更好的方法来实现这一目标？[通过单击此处，您](http://www.davidkneale.com/wcusa/expeditions.html)可以在页面左侧看到菜单的 .click 版本的工作示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:04:53.000

将其更改为悬停是可以接受的。它绝对是非常可读的代码，这很重要。但是，有一个问题 - 正如 Daniel 评论的那样，它会使您的菜单无法在触摸设备上导航，这意味着您正在使每部手机和平板电脑都无法访问该网站*。这是一件非常糟糕的事情，但是您可以做一些事情。

例如，[jQTouch](http://www.google.com/url?sa=t&rct=j&q=jqtouch&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://www.jqtouch.com/&ei=Nf8_UK7lH7Oq0AHy6oBw&usg=AFQjCNEI--nqPC2jrRNA2tnHq78zaCHtFQ)库有一些很棒的特定于触摸的事件处理，可以让您为移动用户优化菜单。否则，您可以将菜单的 JavaScript 逻辑包装在条件中，或者您可以将每个操作分配给触摸和单击。

**带有鼠标的手机和平板电脑除外（一个非常非典型的用例。）*

# request - Opera 12 中的 WebSocket 握手失败（错误请求）

> ID：12207178
> 
> 赞同：0
> 
> 时间：2012-08-30T23:50:46.263
> 
> 标签：request, websocket, opera, handshake

我目前正在为我的学士论文工作，最近开始“深入”研究 node.js 和 webSocket 的使用。在 Firefox 15.0 和 Chrome 21.0.1180.89 m 中访问时，我的 webSocket 服务器运行没有问题。在 Opera 12.02 中，客户端-服务器握手似乎存在问题。这是 Opera 的错误控制台所说的：

```
[31.08.2012 01:03:51] WebSockets - http://10.0.0.2/
Connection
WebSocket handshake failure, invalid response code '400'. 
```

有趣的是：我在 Dragonfly 控制台的网络日志中的任何地方都找不到这个错误。访问网站时请求的所有字段（index.html、client.js 等）都已找到并按原样提供（HTTP 状态代码 200 OK）。此外，我的服务器返回的唯一状态代码是 200、404 和 500，所以这看起来像是来自 webSocket 本身。

是的，在 Opera 中启用了 webSocket ...我不知道问题可能是什么

任何帮助将非常感激 ：）

编辑：到目前为止，这是我的代码，因此您可以看到我的服务器发送了哪些标头以及如何使用 client.js 创建 webSocket 连接：

server.js：

```
// load required modules:
var http = require("http");
var WebSocketServer = require("websocket").server;
path = require("path");
url = require("url");
filesys = require("fs");

// declare listening port vars:
var httpListeningPort = 80;
var webSocketListeningPort = 80;

// create HTTP-server:
var httpSrv = http.createServer(function(request, response) {
    console.log((new Date()) + ":\tReceived request for " + request.url);
//  response.writeHead(200);
//  response.end();
    var myPath = url.parse(request.url).pathname;
    var fullPath = path.join(process.cwd(), myPath);
    if(myPath === "/") {
        fullPath += "index.html";
        console.log("Full path:\t" + fullPath);
        filesys.readFile(fullPath, "binary", function(err, file) {
            if(err) {
                response.writeHeader(500, {"Content-Type": "text/plain"});
                response.write(err + "\n");
                response.end();
            }
            else {
                response.writeHeader(200);
                response.write(file, "binary");
                response.end();
            }
        });
    }
    else {
        path.exists(fullPath, function(exists) {
        if(!exists) {
            response.writeHeader(404, {"Content-Type": "text/plain"});
            response.write("404 Not Found\n");
            response.end();
        }
        else {
            filesys.readFile(fullPath, "binary", function(err, file) {
                if(err) {
                    response.writeHeader(500, {"Content-Type": "text/plain"});
                    response.write(err + "\n");
                    response.end();
                }
                else {
                    response.writeHeader(200);
                    response.write(file, "binary");
                    response.end();
                }
            });
        }
        });
    }   
});
httpSrv.listen(httpListeningPort, function() {
    console.log((new Date()) + ":\tServer is now listening on port " + httpListeningPort);
});

// create webSocket server and tie it to the http server:
wsServer = new WebSocketServer({
    httpServer: httpSrv
});

function originChecker(origin) {
    if(origin) {
        console.log("Origin " + origin + " is allowed");
        return true;
    } else {
        console.log("origin is NOT allowed.");
        return false;
    }
}

// how to handle requests:
wsServer.on("request", function(request) {
    // check whether origin is allowed or not:
    if(originChecker(request.origin) === false) {
        request.reject();
        console.log((new Date()) + ":\tConnection request from origin " + request.origin + " rejected.");
        return;
    }

    // accept the connecteion request -> open the connection:
    var connection = request.accept(null, request.origin);
    console.log((new Date()) + ":\tConnection request from " + request.origin + " accepted.");

    // handle incoming messages from the clients:
    connection.on("message", function(message) {
        if(message.type === "utf8") {
            console.log((new Date()) + ":\tReceived message from " + request.origin + ":\nType: " + message.type + "\nLength: " + message.utf8Data.length + "\nMessage: " + message.utf8Data);
            // echo "Message received":
            connection.sendUTF(JSON.stringify( { type: "message", data: "Message received !" } ));
        } else {
            // send error message back to client:
            console.log((new Date()) + ":\tReceived message from " + request.origin + ":\nERROR:\tMessage is NOT UTF-8! it's " + message.type);
            connection.sendUTF(JSON.stringify( { type: "message", data: "ONLY UTF-8 accepted !" } ));
        }
    });

    // what to do when connection is closed:
    connection.on("close", function() {
        console.log((new Date()) + ":\tClient @" + connection.remoteAddress + " disconnected.");
    });
}); 
```

客户端.js：

```
function client() {

    if("WebSocket" in window) {
        alert("WebSocket is supported by your browser!");

        // try to connect to the webSocket server:
        var connection = null;
        connection = new WebSocket("ws://10.0.0.2:80");

        // things to do once the connection is opened:
        connection.onopen = function() {
            alert("INFO:\tConnection to server is OPEN");

            document.getElementById("msgInput").focus();
            document.getElementById("msgInput").disabled = false;
            document.getElementById("msgInput").value = "";

            document.getElementById("msgInput").onkeyup = function(key) {
                switch(key.keyCode) {
                    case 13:    if(document.getElementById("msgInput").value === "") { 
                                break;
                                }
                                var messageText = document.getElementById("msgInput").value;
                                document.getElementById("msgInput").disabled = true;
                                document.getElementById("msgInput").value = "";
                                document.getElementById("statusHeader").innerHTML = "Sending...";
                                connection.send(messageText);
                    break;
                    default: document.getElementById("statusHeader").innerHTML = "Press ENTER to send!";
                }
            };
        };

        connection.onerror = function(error) {
            document.body.style.backgroundColor = "#220000";
            document.body.style.color = "#aa0000";
            document.getElementById("statusHeader").innerHTML = "ERROR connecting to server -> OFFLINE";
            return;
        };

        connection.onmessage = function(message) {
            try {
                var json = JSON.parse(message.data);
            } catch (error) {
                alert("ERROR parsing message:\t" + error);
                return;
            }

            document.getElementById("statusHeader").innerHTML = json.data;
            document.getElementById("msgInput").disabled = false;
        };

        connection.onclose = function() {
            setTimeout(function() { 
            document.body.style.backgroundColor = "#808080";
            document.body.style.color = "#ffffff";
            document.getElementById("statusHeader").innerHTML = "OFFLINE";
            document.getElementById("msgInput").disabled = true;
            document.getElementById("msgInput").value = "OFFLINE";
            }, 5000);
            return;
        };
    } else {
        alert("WebSocket is NOT supported by your browser! Exiting now.");
        return;
    }   
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:14:10.513

根据[最近的一个问题](https://stackoverflow.com/questions/11116515/running-web-socket-server-on-opera-12)，Opera 12 支持旧的、不兼容的 websockets 版本。此版本 (Hixie-76) 在其握手中使用了一组不同的标头。您的服务器可能不理解这些解释了它的 400 错误响应。

如果您有能力等待 Opera 迎头赶上，那么最简单的“解决方案”就是暂时使用其他浏览器进行测试。hixie 协议草案已被弃用，因此 Opera 最终必然会升级到 RFC 6455。

# perl - 在文件中查找和替换而不将文件作为字符串读取

> ID：12207179
> 
> 赞同：0
> 
> 时间：2012-08-30T23:50:56.420
> 
> 标签：perl, file, replace

**我的问题：**如果在`C:\text_file.txt`调用我的 PERL 脚本时在命令行上将我作为参数给出并且`text_file.txt`包含文本“Hello World World World”，如何将“World”的所有实例替换为“Earth”？

我是 PERL 的新手。我正在编写一个接受文件路径参数的脚本。我想对文件的内容进行查找替换。我知道我可以做这样的事情：`$string =~ s/World/Earth/g;`但如果我能提供帮助，我不想将文件读入字符串。有没有办法直接在文件上执行此操作而不将其作为字符串读取？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:56:25.403

这就是 Perl 的`-i`（“就地编辑”）开关的用途：

```
$ perl -i.bak -pe 's/World/Earth/g' text_file.txt 
```

编辑：要将这个相同的功能合并到一个更大的 Perl 脚本中：

```
{
    local $^I = '.bak';
    local @ARGV = ('text_file.txt');
    local $_;
    while (<>) {
        s/World/Earth/g;
        print;
    }
} 
```

该`$^I`变量反映了`-i`命令行开关的值；在这里，它是手动设置的。此外，`@ARGV`正在手动设置为通常从命令行获取的文件列表。整个东西被包裹在一个块中，这样`$^I`和`@ARGV`，用 设置`local`，之后恢复它们的原始值；这可能不是绝对必要的，具体取决于程序的其余部分。我还进行了本地化`$_`，以防止`while`循环破坏它先前持有的值；这也可能没有必要。

请注意，如果您想避免创建备份文件，可以只使用`-i`而不是`-i.bak`从命令行使用。相应的代码将`$^I = ""`代替`$^I = '.bak'`.

# jquery - 移动 Safari 和 jQuery 事件，什么都没有触发？

> ID：12207180
> 
> 赞同：5
> 
> 时间：2012-08-30T23:51:15.897
> 
> 标签：jquery, html, ios, mobile-safari, jquery-events

我有一个用 HTML5/JavaScript 编写的用于仪表板汽车单元的应用程序。它是一个“单页”应用程序，将片段加载到主页上的 div 中以响应不同的事件。

我被要求将它移植到浏览器上，以便它可以用于营销、演示等。

这似乎没什么大不了的，因为几乎没有什么要适应的，只需要调整一些 CSS 以便它可以在所有浏览器中显示相同。然后，他们决定要在其上运行 Web 应用程序的设备是 iPad。

该应用程序在 Safari 中运行良好，所以我认为 Mobile Safari 不会有任何问题。立刻意识到事实并非如此。该应用程序在 Mobile Safari 中根本无法运行！基本上，我的点击事件都没有触发。最重要的是，我在控制台中收到不一致的错误消息，这些消息不会出现在任何其他浏览器中。

> 类型错误：'null' 不是对象

浏览这个站点，我看到关于 jQuery 绑定工作和 Mobile Safari 以及哪些不工作的相互矛盾的报告。所以我决定建立自己的实验。

使用单个链接创建页面：

```
<a class="mylink">CLICK ME</a> 
```

然后我尝试了这些绑定中的每一个：

```
$("a.mylink").click(function () { console.log("click worked"); });
$("a.mylink").bind("click", function () { console.log("bind worked"); });
$("a.mylink").live("click", function () { console.log("live worked"); });
$("a.mylink").on("click", function () { console.log("on worked"); }); 
```

我在控制台中唯一得到任何响应的是 .live()。即便如此，它还是非常不一致，通常涉及通过点击向其发送垃圾邮件。

如果我编辑我的链接并添加一个 onclick 属性，如下所示：

```
<a onclick="function(){}" class="mylink">CLICK ME</a> 
```

然后 .live() 始终如一地工作，但仍然没有其他绑定。这对我来说似乎很疯狂，因为很多应用程序都可以在 Mobile Safari 上运行。我在这里有什么明显的遗漏吗？

注意，我知道如何使用 jQuery，所以在有人问之前，是的，我的绑定在`$(document).ready()`.
另外，我知道链接一旦附加了href就可以正常工作，但这显然不是我需要的，因为这是一个单页导航应用程序，并且附加href似乎完全忽略了iOS中的任何绑定并导致完整页面导航。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T00:38:44.443

您必须添加 a`href="#"`或将 a添加`cursor:pointer`到被单击的元素。

这是一个测试（在 iPad 3 中）：http: [//jsfiddle.net/dZqyU/2/](http://jsfiddle.net/dZqyU/2/)

```
<a class="clickable">I have no href :( (I dont work in iPad)</a>
<br/>
<br/>
<a class="clickable" href="#">I have href :) (I work in iPad)</a>
<br/>
<br/>
<a class="clickable cursor">I have cursor, no href :) (I work in iPad)</a> 
```

* * *

```
$(document).on('click','.clickable',function(){
    alert($(this).text() + 'and the binding worked :)');
}); 
```

* * *

```
.cursor{
cursor:pointer;
} 
```

* * *

我猜这个问题就像`a`没有属性的锚标签`href`未被某些 iOS Safari 版本识别为可点击元素。`clickable`但是，如果我们通过添加`href`或添加游标来明确地制作它们，`pointer`它就可以工作。[这是一个相关链接](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW6)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:35:14.410

前面的答案所说的不正确。我进行了测试，并且能够在没有内联 javascript 的情况下实现你想要实现的目标，只在 iPhone 上使用绑定。我的猜测是您在某处有一些小错字，并且由于 jQuery 具有优雅降级的神奇能力，因此没有错误被调用。

假设我所说的错误不正确，您可以尝试的一件事是将 href="#" 添加到您的锚点，然后使用 event.preventDefault() [并且您可能还需要添加 event.stopImmediatePropagation ()] 到您的代码。

您的代码中似乎极有可能存在错误（可能是完全不同且不相关的地方），桌面 Safari 足以为您找出并忽略或修复，但根据我的经验，移动 safari 的宽容度要低得多。

# jquery - Hide dropdown menu jquery

> ID：12207187
> 
> 赞同：1
> 
> 时间：2012-08-30T23:52:24.947
> 
> 标签：jquery, drop-down-menu

Well I have a simple question for those who knows jQuery. First of all, I have this HTML code:

```
<div id="Layer-69" class="nav-bar nav-links"  >
  <a href="#" title="NOSOTROS" class="nosotros">NOSOTROS</a>
</div>
<div id="nosotros-menu">
  <ul>
    <li><a href="#" title="Quienes Somos?">Quienes Somos?</a></li>
    <li><a href="#" title="Reseña Historica">Reseña Historica</a></li>
    <li><a href="#" title="Nuestra Filosofia">Nuestra Filosofia</a></li>
  </ul>
</div> 
```

And this jQuery code:

```
$(document).on('ready', function(){
   $('.nosotros').on('mouseover', function(){
        $('#nosotros-menu').slideDown('fast');
   });
}); 
```

What I have right now is that when I put the mouse over the "nosotros" a element, it shows the "nosotros-menu" div element. Now, what I want to do is that when the pointer leaves the "nosotros-menu" div, this div just hide, but I can't do it, I don't know how. please help me, thank's.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:02:10.633

try this:

```
$(document).on('ready', function(){
   var timeout = 0;
   $('.nosotros').hover(function(){
        $('#nosotros-menu').slideDown('fast');
   },function(){
         timeout = setTimeout(hideMenu,300);
    });

   $("#nosotros-menu").hover(function(){
       clearTimeout(timeout);
   },function(){
       hideMenu();
   });
});

function hideMenu(){
    $("#nosotros-menu").slideUp('fast');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:56:48.280

Instead of using the mouseover event, bind to the [hover](http://api.jquery.com/hover/) event. With hover, you supply two functions, one for when the user's mouse enters, and one for when it leaves, and jquery wires it up for you. Inside the first function, do the slideDown action, then in the second one, the slideUp action.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:07:36.157

You can do just like that:

```
$(document).on('ready', function(){
   $('.nosotros').hover(
     function () {
       $('#nosotros-menu').slideDown('fast');
     }, 
     function () {
       $('#nosotros-menu').slideUp('fast');
     }
   );
}); 
```

# jquery-ui - 在 jquery ui 对话框中使用 Filament Group 的 customInput 插件

> ID：12207192
> 
> 赞同：1
> 
> 时间：2012-08-30T23:52:54.470
> 
> 标签：jquery-ui, jquery-plugins

我正在使用 Filament Group 的 customInput 插件。

[http://filamentgroup.com/lab/accessible_custom_design_checkbox_radio_button_inputs_styled_css_jquery/](http://filamentgroup.com/lab/accessible_custom_designed_checkbox_radio_button_inputs_styled_css_jquery/)

过去它一直运行良好，但现在使用 jQuery UI 对话框中的输入，输入不会响应任何点击事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:53:34.610

深埋在 Filament Group 文章的评论中，一位评论者指出了同样的问题，他通过将输入和标签的 z-index 增加到高于 jQuery UI 对话框的 z-index 来解决这个问题。jQuery UI 对话框的 z-index 似乎从 1002 开始。

调整输入和标签的 z-index 确实为我解决了这个问题。

# php - 通过 open.window 传递 php 变量

> ID：12207193
> 
> 赞同：0
> 
> 时间：2012-08-30T23:52:55.087
> 
> 标签：php, javascript

我对 javascript 很陌生，所以如果它看起来很笨，请原谅这个问题。我正在编写一个在线日历来预订工程师的工作，因此我们需要能够在查看和编辑个人工作的同时查看日历。经过深思熟虑，我决定最好的方法是使用 window.open 在新窗口中打开作业。但是，我想通过 url 传递工作 ID，以便将其传递到新窗口，但是为了爱和金钱，我无法解决或找到解决方案。到目前为止，这是我的代码

```
function open_win() 
{
    window.open('job_detail.php', '_blank','toolbar=0,location=no,menubar=0,height=400,width=400,left=200, top=300');

}

<a href="#" onclick="open_win()" ><? echo $row['name']; ?></a> 
```

$row['name'] 是链接的值，我要传递的值将保存在 $row['id'] 或 $job_id 中。我只是不知道该把它放在哪里，所以它会继续下去。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:55:54.543

作为参数？

```
function open_win(id) {
    window.open('job_detail.php?id=' + id, '_blank','toolbar=0,location=no,menubar=0,height=400,width=400,left=200, top=300');
} 
```

```
<a href="#" onclick="open_win(<?= $row['id'] ?>)"><? echo $row['name']; ?></a> 
```

# r - 时间序列的 R 引导程序：筛引导程序

> ID：12207195
> 
> 赞同：1
> 
> 时间：2012-08-30T23:53:16.310
> 
> 标签：r

是否有任何具有筛引导程序的 R 包（或 C++）？（bootstrap 是一种通过对数据或从数据估计的模型重新采样来估计估计量或检验统计量分布的方法。当数据是时间序列时，这会更加复杂，因为 bootstrap 抽样必须以以下方式进行适当地捕获数据生成过程的依赖结构）。对于时间序列，包中有块引导程序：引导程序包中的引导和最大熵引导程序，但我也想看看筛引导程序，我听说它比块引导产生更好的结果。我已经完成了???sos 和[http://www.rseek.org](http://www.rseek.org) 但找不到任何东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:12:04.800

[这篇论文](http://www.tandfonline.com/doi/pdf/10.1198/016214502760046998)似乎表明该`VLMC`包实现了具有可变长度马尔可夫链的筛引导程序。

# vb.net - 无法关闭端口

> ID：12207196
> 
> 赞同：0
> 
> 时间：2012-08-30T23:53:30.317
> 
> 标签：vb.net, sockets, tcp

我正在尝试修复使用 TCP 接收文件的应用程序。不幸的是，我没有发送应用程序的源代码。我遇到的问题是，在收到第一个文件后，发送应用程序发送了第二个文件，但接收应用程序没有接收到它。

我认为问题在于接收文件后套接字没有被关闭。我有一个应该关闭它的方法，但是 _socket.Connected = false，所以什么也没做。但是，如果我检查端口，它仍然是绑定的，即使在套接字关闭之后也是如此。

```
 Private Sub CloseSocket(ByVal disconnect As Boolean)
        If Not (_socket Is Nothing) Then
            If (_socket.Connected = True) Then
                _socket.Shutdown(SocketShutdown.Both)
                If(disconnect) Then
                    _socket.Disconnect(True)
                End If
            End If
            _socket.Close()
            _socket = Nothing
        End If
    End Sub 
```

我意识到我没有包含太多代码，但是 Listen 方法非常庞大且令人费解。如果它能提供洞察力，我可以获得额外的代码。任何帮助将不胜感激。

已编辑

用于检查端口状态的代码如下：

```
 Private Shared Function TcpIpGetPortStatus(ByVal port As Int32) As String

        Dim properties As NetworkInformation.IPGlobalProperties
        Dim listeners As Net.IPEndPoint()
        Dim local As Net.IPEndPoint
        Dim connections As NetworkInformation.TcpConnectionInformation()
        Dim t As NetworkInformation.TcpConnectionInformation
        Dim portStatus As String

        portStatus = "Disconnected"
        properties = NetworkInformation.IPGlobalProperties.GetIPGlobalProperties()
        listeners = properties.GetActiveTcpListeners()

        Try
            ' Cycle through all listening TCP connections and find the one that is associated with port.
            For Each local In listeners
                If (local.Port = port) Then
                    portStatus = "Connected"
                    Exit For
                End If
            Next local

            ' Port wasn't in the listening state so check if it is established.
            If (portStatus = "Disconnected") Then
                properties = NetworkInformation.IPGlobalProperties.GetIPGlobalProperties()
                connections = properties.GetActiveTcpConnections()

                ' Cycle through all active TCP connections and find the one that is associated with port.
                For Each t In connections
                    If (t.LocalEndPoint.Port = port) Then
                        Select Case t.State
                            Case NetworkInformation.TcpState.Established
                                portStatus = "Connected"
                                Exit For
                        End Select
                    End If
                Next t
            End If
        Catch ex As Exception
            ' Handle Exception...
        End Try

        Return portStatus

    End Function 
```

此函数在调用时将返回“已连接”。我追查过了，发现我使用的端口仍然是绑定的。再次感谢您的所有帮助。

添加

我只是在两个独立的系统之间运行它，使用 WireShark 来捕获数据。有一个 Sender 和 Receiver 我没有源代码，并且正在尝试与之集成，还有一个 Sender 和 Receiver，我正在更新代码以使其与现有代码正确通信。在这两种情况下发送的流是相同的（ACK 中的日期时间除外）。如果我从现有发送方向正在升级的接收方发送第二条消息，则消息会发送到端口，但开发中的接收方永远不会收到通知，这会挂起两个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:25:23.963

在翻阅提供给我的代码后，我终于意识到它正在关闭和断开错误的套接字。不是在用于接收消息的套接字上调用 Shutdown 和 Disconnect，而是在侦听套接字上调用它。

一旦我意识到这一点，我就能够关闭正确的套接字，并且应用程序开始工作。现在我只需要检查并纠正所有由底层代码引起的问题，一切都会好起来的。

感谢所有回复的人。你让我想到了正确的方向。

# mysql - MySQL JOIN 与多个表和总和

> ID：12207200
> 
> 赞同：4
> 
> 时间：2012-08-30T23:53:40.210
> 
> 标签：mysql, join, sum

我正在尝试创建一个查询，该查询将从我正在创建的计费系统的四个表中获取信息。我有以下表格：

表发票

```
InvoiceID (PK)
ClientID
Date
Status
... 
```

表客户端

```
ClientID (PK)
ClientName
... 
```

表发票项

```
ItemID (PK)
InvoiceID
Amount
... 
```

餐桌付款

```
PaymentID (PK)
InvoiceID
Amount
... 
```

我需要创建一个查询，我可以在其中访问 Invoice 表中的信息以及客户名称，以及与发票关联的所有发票项目和付款的总和。

我尝试了以下方法：

```
SELECT 
    Invoice.InvoiceID, 
    Invoice.`Date`, 
    Invoice.Terms, 
    Invoice.DateDue, 
    Invoice.Status, 
    Client.ClinicName, 
    SUM(InvoiceItem.Amount), 
    SUM(Payment.PaymentAmount)
FROM Invoice
JOIN (Client, InvoiceItem, Payment) ON
    (Client.ClientID=Invoice.ClientID AND
     InvoiceItem.InvoiceID=Invoice.InvoiceID AND 
     Payment.InvoiceID=Invoice.InvoiceID) 
```

虽然这种方法有效，但它将 SUM() 乘以用于获得总和的记录数（即，如果有两次付款 - 800,400 - 它给了我 (800+400)*2 -- 2400）。我猜我使用联接的方式有些问题，老实说，我从来不需要对多个表使用联接，而且我总是使用 GROUP BY，但我似乎无法让它正常工作.

更糟糕的是，过去几年我一直迷失在 vb.net/MSSQL 客户端编程的世界中，所以我的 MySQL 相当粗糙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T00:02:02.113

您的问题是您不能在单个查询中一次聚合两个独立的表。但是，您可以使用子查询来做到这一点。

```
SELECT Invoice.InvoiceID, Invoice.`Date`, Invoice.Terms, Invoice.DateDue, Invoice.Status, Client.ClinicName, InvoiceItemSum.SumOfAmount, PaymentSum.SumOfPaymentAmount
  FROM Invoice
  INNER JOIN Client ON Client.ClientID = Invoice.ClientID
  INNER JOIN (
    SELECT InvoiceID, SUM(Amount) AS SumOfAmount
      FROM InvoiceItem
      GROUP BY InvoiceID
  ) InvoiceItemSum ON InvoiceItemSum.InvoiceID = Invoice.InvoiceID
  INNER JOIN (
    SELECT InvoiceID, SUM(PaymentAmount) AS SumOfPaymentAmount
    FROM Payment
    GROUP BY InvoiceID
  ) PaymentSum ON PaymentSum.InvoiceID = Invoice.InvoiceID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:01:28.817

这里试试这个

```
SELECT  a.InvoiceID,
        a.`Date`,
        a.Terms,
        a.DateDue,
        a.Status,
        b.ClinicName,
        SUM(c.Amount),
        SUM(d.PaymentAmount)
FROM    Invoice a
            INNER JOIN Client b
                on a.ClientID = b.ClientID
            INNER JOIN InvoiceItem c
                ON c.InvoiceID = a.InvoiceID
            INNER JOIN JOIN Payment d
                ON d.InvoiceID = a.InvoiceID
GROUP BY    a.InvoiceID,
            a.`Date`,
            a.Terms,
            a.DateDue,
            a.Status,
            b.ClinicName 
```

你能详细说明一下吗？

> 它将 SUM() 乘以用于获得总和的记录数（即，如果有两次付款 - 800,400 - 它给了我 (800+400)*2 -- 2400）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T23:58:28.137

尝试这个：

```
SELECT
    Invoice.InvoiceID,
    Invoice.`Date`,
    Invoice.Terms,
    Invoice.DateDue,
    Invoice.Status,
    Client.ClinicName,
    SUM(InvoiceItem.Amount),
    SUM(Payment.PaymentAmount)
FROM Invoice 
JOIN Client ON Client.ClientID=Invoice.ClientID
JOIN InvoiceItem ON InvoiceItem.InvoiceID=Invoice.InvoiceID
JOIN Payment ON Payment.InvoiceID=Invoice.InvoiceID
group by 1,2,3,4,5,6; 
```

我对您的查询做了两件事：

1.  为每个子表创建单独的连接
2.  添加了 a `group by`，否则总和将无法正常工作（仅供参考，在所有其他数据库中，省略 group by 实际上会导致语法错误）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T13:59:14.687

你也可以通过“CROSS APPLY”来实现它

```
SELECT Invoice.InvoiceID, Invoice.`Date`, Invoice.Terms, Invoice.DateDue, Invoice.Status, Client.ClinicName, InvoiceItemSum.SumOfAmount, PaymentSum.SumOfPaymentAmount
  FROM Invoice
  INNER JOIN Client ON Client.ClientID = Invoice.ClientID
  CROSS APPLY ( SELECT ISNULL(SUM(Amount),0) AS SumOfAmount 
                                  FROM   InvoiceItem 
                                  WHERE  InvoiceID = Invoice.InvoiceID
                                ) InvoiceItemSum 
  CROSS APPLY ( SELECT ISNULL(SUM(PaymentAmount),0) AS SumOfPaymentAmount 
                                  FROM   Payment 
                                  WHERE  InvoiceID = Invoice.InvoiceID
                                ) PaymentSum 
```

# c - 如何在 C 中逐位分配整数？

> ID：12207209
> 
> 赞同：-2
> 
> 时间：2012-08-30T23:55:11.933
> 
> 标签：c

> **可能重复：**
> [如何在 C 中设置、清除和切换单个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)

我想创建一个汇编程序，所以我需要逐位或逐字段分配 32 位以从汇编中创建 32 位操作码......我怎样才能在 C 中做到这一点？如何分配整数位？这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:01:00.937

您可以声明这两个宏来帮助您：

```
#define Set_Bit(IntValue, BitNumber) IntValue = IntValue | (1<<BitNumber)
#define Clr_Bit(IntValue, BitNumber) IntValue = IntValue & (~((1) << (BitNumber)))) 
```

一些问题之前已经讨论过： [设置和清除位的宏](https://stackoverflow.com/questions/2978408/macros-to-set-and-clear-bits)

# javascript - 我可以将哪些事件附加到 jQuery 的 on() 函数？

> ID：12207210
> 
> 赞同：0
> 
> 时间：2012-08-30T23:55:41.720
> 
> 标签：javascript, jquery

除了 click、mouseover 和 mouseleave，jQuery 的 on() 函数还有其他事件吗？或者这些事件是 on() 的主要用途吗？我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T00:09:37.910

您可以使用内置的 DOM 事件，也可以创建自己的事件。以下是一些内置 DOM 事件的列表（并非所有事件都发生在所有类型的对象上）：

*   点击
*   dblclick
*   鼠标按下
*   mouseup
*   鼠标移到
*   鼠标移动
*   鼠标移出
*   按键
*   键位
*   按键
*   加载
*   卸下
*   中止
*   错误
*   调整大小
*   滚动
*   选择
*   改变
*   提交
*   重启
*   重点
*   模糊
*   专注于
*   聚焦
*   触摸启动
*   触摸端
*   触摸移动
*   触摸输入
*   触摸离开
*   触摸取消
*   切
*   复制
*   粘贴
*   前切
*   复制前
*   前贴
*   上下文菜单
*   拖
*   拖动启动
*   拖拉机
*   拖车
*   拖离
*   拖动端
*   降低
*   选择开始
*   卸载前
*   就绪状态改变
*   印前
*   后印

请参阅[http://en.wikipedia.org/wiki/DOM_events](http://en.wikipedia.org/wiki/DOM_events)以获得对其中大多数的体面描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T23:57:25.603

on() 可以用于任何事情。它只是将事件委托给特定 DOM 元素的一种方式。

查看：[http](http://api.jquery.com/on/) ://api.jquery.com/on/ 它将告诉您如何将绑定、实时、委托功能“转换”为新的“on”方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T00:02:21.327

除了 Parris [anwser](https://stackoverflow.com/a/12207223/1637178)你还可以做

```
$("#whatever").on("my.awesome_event", function(event, one, two, three){
    // stuff ...
});

$("#whatever").trigger("my.awesome_event", [1,2,3]); 
```

在此示例中，变量`one, two, three`将具有值`1, 2, 3`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T23:58:35.607

您可以使用任何内置事件（更改、聚焦、鼠标按下、模糊、触摸启动等），或者您可以创建自己的事件并绑定它们！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T00:02:29.860

我对内置的 DOM 事件（例如更改、单击、模糊等）和我自己的类中的自定义事件使用 jQuery 的 on。对于我想要自定义事件的大多数课程，我会这样做：

```
this.events = $({}); 
```

然后我可以像这样绑定自定义事件：

```
foo.events.on("myCustomEvent", function(e) {
     // Do something
}); 
```

我可以这样触发：

```
this.events.triggerHandler("myCustomEvent"); 
```

# hadoop - 任务跟踪器未运行，作业已计划但未运行。怎么修？

> ID：12207218
> 
> 赞同：1
> 
> 时间：2012-08-30T23:56:41.670
> 
> 标签：hadoop, hdfs

我一直在运行一些基准测试，而且我是 hadoop 和 hdfs 的新手。我已经完成了设置和运行，它们工作正常。但是现在我面临这个问题，主节点上的 jps 显示 1\. 辅助名称节点 2\. 作业跟踪器，但不显示名称节点和任务跟踪器。

同样，从节点上的 jps 仅显示名称节点，但任务跟踪器未运行。

我通常以用户而不是 root 身份运行作业，但我错误地以 root 身份运行它，然后当我退出并以用户身份运行作业时，我发现作业没有启动。然后用 jps 我发现任务跟踪器没有运行。

我是 hdfs 的新手，不知道如何调试和解决这个问题，如果你能就此提供一些指示/帮助，那就太好了，我确实尝试过 google，但找不到相关答案。

编辑：我尝试清除 tmp 文件，杀死过时的 java 进程并重新启动。我仍然遇到同样的问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:41:18.070

1.  停止集群后杀死所有java进程
2.  删除 /tmp hadoop pid
3.  验证文件权限错误，但查看名称节点和数据节点中的 hadoop/logs/*.log 文件，这为我提供了调试问题的有用信息。

这个链接很有帮助， http: [//felixtechnique.blogspot.com/2010/09/no-namenode-to-stop-no-tasktracker-to.html](http://felixtechnique.blogspot.com/2010/09/no-namenode-to-stop-no-tasktracker-to.html)

# sql-server - 十进制 (10,9) 变量不能容纳数字 50 (SQL Server 2008)

> ID：12207222
> 
> 赞同：7
> 
> 时间：2012-08-30T23:57:07.123
> 
> 标签：sql-server, sql-server-2008

这个很简单。为什么下面的代码会导致下面的错误？

```
declare @dTest decimal(10, 9)
set @dTest = 50 
```

错误：

```
Msg 8115, Level 16, State 8, Line 3
Arithmetic overflow error converting int to data type numeric. 
```

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms187746%28v=sql.100%29.aspx)，`decimal(p, s)`（`p`或在我的情况下为 10）是“可以存储的小数点*左侧和右侧的*十进制数字的最大总数”，而`s`（或在我的情况下为 9）是"小数点*右侧*可存储的*最大*小数位数。"

 *我的号码 50 总共只有 2 位数字（小于*最大*10）和小数点右侧的 0 位数字（小于*最大*9），因此它应该可以工作。

我发现[这个问题](https://stackoverflow.com/questions/2059134/why-sql-server-throws-arithmetic-overflow-error-converting-int-to-data-type-nume)基本上是同一个问题，但没有人解释为什么文档似乎与行为冲突。看起来`s`维度实际上被解释为小数点右侧的*固定*位数，并从*p数中**减去*，在我的情况下，剩下 10 - 9 = 仅剩下 1 位来处理左侧。

 *任何人都可以提供一种合理的方式来解释为匹配行为而编写的文档吗？

**编辑：**

我在下面看到了一些解释，但它们并没有解决文档措辞的根本问题。我建议改变措辞：

对于“p（精度）”，将“可以存储的小数位数的最大总数”更改为“将存储的小数位数的最大总数*”*。

并且对于“s（刻度）”更改“可以存储到小数点右侧的最大小数位数”。到“*将*存储在小数点右侧的小数位数。从 p 中减去该数字以确定小数点左侧的最大位数。”

除非有人有更好的解释，否则我将向 Connect 提交错误报告。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T23:58:40.003

10 - 9 是 1.`DECIMAL(10, 9)`可以容纳格式中的数字`0.000000000`。50 在小数点前有两位数，因此超出范围。您自己引用了它：

> 根据有关十进制（p，s）的MSDN文档，p（或在我的情况下为10）是“可以存储的十进制数字的最大总数，包括小数点**的左侧和右侧**”，而s （或 9 在我的情况下）是“可以存储在小数点右侧的最大小数位数”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T00:29:23.913

我向 Connect 提交了一个错误报告：[关于小数数据类型的误导性文档](https://connect.microsoft.com/SQLServer/feedback/details/760495/misleading-documentation-on-the-decimal-data-type)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T00:00:06.040

解释文档的合理方法*是不忽略尾随十进制零数字*。所以你的数字在小数点右边有 9 位小数，而且它们都恰好是`0`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T00:00:51.137

`DECIMAL(10, 9)`是一种固定精度和小数位数的数字数据类型。这意味着它始终在小数点右侧存储相同数量的数字。所以你指定的数据类型**只能**存储小数点左边一位，右边九位的数字。显然，`50`不适合一些那种格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T10:18:26.740

通过下面的链接。 [http://msdn.microsoft.com/en-gb/library/ms190476.aspx](http://msdn.microsoft.com/en-gb/library/ms190476.aspx)

精度是数字中的位数。比例是数字中小数点右侧的位数。例如，数字 123.45 的精度为 5，小数位数为 2。**

# appharbor - AppHarbor 上的外部 nuget 服务的设置/配置

> ID：12207232
> 
> 赞同：0
> 
> 时间：2012-08-30T23:58:39.423
> 
> 标签：appharbor

是否可以为 AppHarbor 上的默认位置以外的其他 nuget 服务配置 nuget 端点？我当前的构建失败，因为 AppHarhor 找不到 nuget 引用，因为它们在默认 nuget 服务器上不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:37:10.527

如果您在`NuGet.targets`文件中添加您的自定义包裹提要，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup Condition=" '$(PackageSources)' == '' ">
                <PackageSource Include="myurl" />
    </ItemGroup>
</Project> 
```

……你应该没事的。

# r - 防止数据框列表中的名称消失

> ID：12207239
> 
> 赞同：6
> 
> 时间：2012-08-30T23:59:30.607
> 
> 标签：r, list, dataframe

所以我初始化了一个列表，我想用数据框填充它：

```
listz <- vector("list",2) 
```

我还想保留数据框的名称，所以我分配它们：

```
listzNames <- c("frame1","frame2")
names(listz) <- listzNames 
```

问题是，每次重新分配数据帧时，名称都会变为 NULL：

```
listz <- list(data.frame("id" = 1:3, "hat" = 1:3),
           data.frame("id" = 4:6, "hat" = 4:6))

> names(listz)
NULL 
```

我知道为什么会发生这种情况，但是在每次数据帧重新分配时重新分配名称的一个巧妙的替代方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T00:09:59.750

当你分配

```
listz <- list(data.frame("id" = 1:3, "hat" = 1:3),
           data.frame("id" = 4:6, "hat" = 4:6)) 
```

您正在替换以前定义为 的对象`listz`，它是一个新对象，与该名称的任何先前对象无关。

因此在这种情况下不需要初始化列表

你有（至少）四个选项来设置列表的名称

## 选项1 -`setNames`

```
# Option 1 - using setNames
listz <- setNames(list(data.frame("id" = 1:3, "hat" = 1:3),
           data.frame("id" = 4:6, "hat" = 4:6)), listzNames) 
```

## 选项 2 - 随叫随到

```
# Option 2 - naming the list as you go
listz <- list(frame1 = data.frame("id" = 1:3, "hat" = 1:3),
           frame2 = data.frame("id" = 4:6, "hat" = 4:6)) 
```

## 选项 3 -`Hmisc`和`llist`

```
# If your data.frames already exist
# use the llist function in Hmisc, which names the list
# using the names of the object in each element
library(Hmisc)
frame1 <- data.frame("id" = 1:3, "hat" = 1:3)
frame2 <- data.frame("id" = 4:6, "hat" = 4:6)

listz <- llist(frame1,frame2) 
```

## 选项 4 - 使用 setNames 预先存在并获取

```
# if your data.frames already exist in the global environment then
# you can use
listz <- setNames(lapply(listzNames, get),listzNames) 
```

## 选项 5 初始化列表（我不喜欢这个）

```
listz <- vector("list",2)
names(listz) <- listzNames
listz[[1]] <- data.frame("id" = 1:3, "hat" = 1:3)
listz[[2]] <- data.frame("id" = 4:6, "hat" = 4:6) 
```

我不喜欢这个选项，它需要更多的输入，因此出错的可能性更大！

# 注意事项`lapply`

`lapply`将保留任何名称

```
lapply(listz,head,n=1)

#$frame1
#  id hat
#1  1   1
#
#$frame2
#  id hat
#1  4   4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:50:02.457

选项 6 :)

```
listz[] <- list(data.frame("id" = 1:3, "hat" = 1:3),
                data.frame("id" = 4:6, "hat" = 4:6)) 
```

# kinvey - Kinvey-加入数据并获取它

> ID：12207241
> 
> 赞同：0
> 
> 时间：2012-08-30T23:59:36.130
> 
> 标签：kinvey

我使用 Kinvey 后端来存储我的 webapp 数据。可以在这里找到：[http](http://www.kinvey.com/) ://www.kinvey.com/ 现在我有两个集合，第一个包含一个唯一的 id，第二个包含一个引用第一个集合的 id 列的列。现在我想加入他们两个并获取数据。这对我来说似乎很难，所以有人可以给我一个提示吗？

提前致谢，

安内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:20:56.470

我是 Kinvey 工程组织的一员。我们有一个数据关系功能，使您可以非常简单地建立您在 Kinvey 应用后端中描述的关系，然后您可以在一次调用中获取引用的数据。

在您的示例中，您可以查询第二个集合中的实体，该方式将使用 id 包含来自第一个集合的匹配实体，所有这些都作为同一请求的一部分。为此，您可以查看我们的 JavaScript 库文档以获取更多详细信息： http: [//docs.kinvey.com/js-developers-guide.html#relational_data](http://docs.kinvey.com/js-developers-guide.html#relational_data)。我们现在正在为我们的 REST API 编写更完整的文档，并希望在不久的将来为 iOS 和 Android 发布相同的功能。

如果您有任何其他需求或功能建议，请随时通过 support@kinvey.com 直接与我联系。我很想听听你的意见。谢谢。

# python - 特殊字符和键名

> ID：12207247
> 
> 赞同：0
> 
> 时间：2012-08-31T00:00:01.300
> 
> 标签：python, google-app-engine

我有以下模型类：

```
class Test(db.Model):
   name = db.StringProperty() 
```

我应该为每个实体使用唯一的键名，所以我可以通过这种方式检索实体：

```
<input type="text" name="name" />

def post(self):
    key_name = self.request.get('name')
    entity = db.get_or_insert(key_name, name=key_name)
      # first key_name needs encoding? 
```

我应该如何对 key_name 进行编码以允许 æ、ø、å 等字符以 html 形式出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:18:45.653

你真的不需要做任何特别的事情。这些字符被正常处理。

如果您想要支持 HTML 特殊字符，则必须将其更改为：

```
cgi.escape(self.request.get('name')) 
```

# jsf - SelectOneMenu 中的 JSF 转换器问题

> ID：12207248
> 
> 赞同：4
> 
> 时间：2012-08-31T00:00:04.483
> 
> 标签：jsf, converter

还有一次我在这里遇到了麻烦。我的观点是：在我的项目中，我需要一个转换器（显然）将 SelectOneMenu 组件中的项目转换为相应 bean 中的列表属性。在我的 jsf 页面中，我有：

```
<p:selectOneMenu id="ddlPublicType" value="#{publicBean.selectedPublicType}"    effect="fade" converter="#{publicBean.conversor}" > 
    <f:selectItems value="#{publicoBean.lstPublicTypes}" var="pt" itemLabel="#{pt.label}" itemValue="#{pt.value}"></f:selectItems>
</p:selectOneMenu> 
```

我的豆子是：

```
@ManagedBean(name = "publicBean")
@RequestScoped
public class PublicBean {

// Campos
private String name; // Nome do evento
private TdPublicType selectedPublicType = null;
private List<SelectItem> lstPublicTypes = null;
private static PublicTypeDAO publicTypeDao; // DAO 

static {
    publicTypeDao = new PublicTypeDAO();
}
// Construtor

public PublicoBean() {

    lstPublicTypes = new ArrayList<SelectItem>();
    List<TdPublicType> lst = publicTypeDao.consultarTodos();
    ListIterator<TdPublicType> i = lst.listIterator();
    lst.add(new SelectItem("-1","Select..."));
    while (i.hasNext()) {
        TdPublicType actual = (TdPublicType) i.next();
        lstPublicTypes.add(new SelectItem(actual.getIdPublicType(), actual.getNamePublicType()));
    }

}

// Getters e Setters

...

public Converter getConversor() {
    return new Converter() {
        @Override
        public Object getAsObject(FacesContext context, UIComponent component, String value) {
            // This value parameter seems to be the value i had passed into SelectItem constructor
            TdPublicType publicType = null; // Retrieving the PublicType from Database based on ID in value parameter
            try {
                if (value.compareTo("-1") == 0 || value == null) {
                    return null;
                }
                publicType = publicTypeDao.findById(Integer.parseInt(value));
            } catch (Exception e) {
                FacesMessage msg = new FacesMessage("Error in data conversion.");
                msg.setSeverity(FacesMessage.SEVERITY_ERROR);
                FacesContext.getCurrentInstance().addMessage("info", msg);
            }
            return publicType;
        }

        @Override
        public String getAsString(FacesContext context, UIComponent component, Object value) {
            return value.toString(); // The value parameter is a TdPublicType object ?
        }
    };
}

...
} 
```

在**getAsObject()**方法中， value 参数似乎是我传递给 SelectItem 构造函数的值。但在**getAsString()**方法中，该值似乎也是 Id 的字符串表示形式。这个参数不应该是 TdPublicType 类型？我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:10:00.497

`getAsString()`应该将（`Object`在您的 type 的情况下`TdPublicType`）转换为`String`唯一标识实例的 a，例如某个 ID，以便它可以内联在 HTML 代码中并作为 HTTP 请求参数传递。应该将该`getAsObject()`唯一`String`表示准确地转换回具体`Object`实例，以便提交的 HTTP 请求参数可以转换回原始对象实例。

基本上（省略了琐碎的预检查和异常处理）：

```
@Override
public String getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
    // Convert Object to unique String representation for display.
    return String.valueOf(((TdPublicType) modelValue).getId());
}

@Override
public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) throws ConverterException {
    // Convert submitted unique String representation back to Object.
    return tdPublicTypeService.find(Long.valueOf(submittedValue));
} 
```

* * *

**更新**：您还有另一个问题，您将类的`value`属性指定`TdPublicType`为项目值而不是`TdPublicType`实例本身。这样，转换器将检索属性`value`而不是. 相应地修复它：`TdPublicType``getAsString()`

```
<f:selectItems value="#{publicoBean.lstPublicTypes}" var="pt" 
    itemLabel="#{pt.label}" itemValue="#{pt}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:19:39.033

现在代码正在运行。我的错误在于加载方法。我正在这样做：

```
// Loading menu
List<TdPublicType> l = daoPublicType.retrieveAll();
Iterator<TdPublicType> i = l.iterator();
while (i.hasNext()) {
    TdPublicType actual = (TdPublicType) i.next();
    lstMenuPublicType.add(new SelectItem(actual.getIdtPublicType(), actual.getNamePublicType()));
} 
```

但正确的方法是：

```
// Loading menu
List<TdPublicType> l = daoPublicType.retrieveAll();
Iterator<TdPublicType> i = l.iterator();
while (i.hasNext()) {
    TdPublicType actual = (TdPublicType) i.next();
    lstMenuPublicType.add(new SelectItem(actual, actual.getNamePublicType())); // In the first parameter i passed the PublicType object itself not his id.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T08:44:16.357

use 可以使用通用转换器，它将转换支持 bean 中的值。你也不需要任何铸造。

```
@FacesConverter(value = "GConverter")
public class GConverter implements Converter{

    private static Map<Object, String> entities = new WeakHashMap<Object, String>();

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object entity) {
        synchronized (entities) {
            if (!entities.containsKey(entity)) {
                String uuid = UUID.randomUUID().toString();
                entities.put(entity, uuid);
                return uuid;
            } else {
                return entities.get(entity);
            }
        }
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String uuid) {
        for (Entry<Object, String> entry : entities.entrySet()) {
            if (entry.getValue().equals(uuid)) {
                return entry.getKey();
            }
        }
        return null;
    }

} 
```

示例用法是

```
<p:selectOneMenu id="ddlPublicType" value="#{publicBean.selectedPublicType}"    effect="fade" converter="GConverter" > 
    <f:selectItems value="#{publicoBean.lstPublicTypes}" var="pt" itemLabel="#{pt.label}" itemValue="#{pt}"></f:selectItems>
</p:selectOneMenu> 
```

# android - 如何从外部文本文件（在服务器上）单行读取以显示在 Android 活动中？

> ID：12207249
> 
> 赞同：0
> 
> 时间：2012-08-31T00:00:07.863
> 
> 标签：android, external, file-io

我们在我工作的服务器上存储了一个文本文件，我已经搜索了如何从该文本文件中读取特定行并将其显示在我的 Android 活动屏幕上......但我还没有找到解决方案呢。服务器上文件中的文本中只有两个单词左右会定期更改/替换，我希望这些更改每次都能在我的 Android 应用程序中生效/更新。不知道为什么我还找不到答案。任何帮助深表感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:42:38.380

实际上，在 android 应用程序和服务器之间进行安全事务的最佳方式是使用 Web 服务，例如`JSON`. 您从您的 android 应用程序向服务器请求某些内容，然后在服务器请求中分析并响应您的 android 应用程序。您可以发送一些请求来告诉服务器该做什么。然后在服务器端有一个脚本来完成你的工作并向你的 android 应用程序发送响应。

# c# - 如何从数组中返回重复值？

> ID：12207251
> 
> 赞同：0
> 
> 时间：2012-08-31T00:00:15.647
> 
> 标签：c#, linq

有没有办法可以从 C# 中的数组返回重复值？我还想编写一个小算法，该算法将返回数组中最多数量的重复值。例如

[1, 2,2,2 3,3] 我需要返回出现次数最多的重复值以及出现次数。

我想我看到一些帖子说它可以使用 Linq 完成，但我不知道 Linq 是什么

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:07:40.930

尝试这个：

```
int[] data = new int[] { 1, 2, 2, 2, 3, 3 };
IGrouping<int, int> mostOccurrences = data
    .GroupBy(value => value)
    .OrderByDescending(group => group.Count())
    .First();

Console.WriteLine("Value {0} occurred {1} time(s).", mostOccurrences.Key, mostOccurrences.Count()); 
```

请注意，如果多个值出现的次数相同（例如，如果您在该列表中添加了另外 3 个），则上述代码将仅列出其中一个。要处理这种情况，请尝试以下操作：

```
int[] data = new int[] { 1, 2, 2, 2, 3, 3, 3 };
var occurrenceInfos = data
    .GroupBy(value => value)
    .Select(group =>
        new {
            Count = group.Count(),
            Value = group.Key
        }
    );
int maxOccurrenceCount = occurrenceInfos.Max(info => info.Count);
IEnumerable<int> maxOccurrenceValues = occurrenceInfos
    .Where(info => info.Count == maxOccurrenceCount)
    .Select(info => info.Value);

foreach (int value in maxOccurrenceValues)
    Console.WriteLine("Value {0} occurred {1} time(s).", value, maxOccurrenceCount); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:55:15.867

这是我对此的看法：

```
var data = new[] { 1, 2, 2, 2, 3, 3, };

var occurences =
    data
        .ToLookup(x => x)
        .ToDictionary(x => x.Key, x => x.Count());

var mostOccurences =
    occurences
        .OrderByDescending(x => x.Value)
        .First(); 
```

这些将为您提供以下结果：

![结果](../Images/7086d94e2edf228ce969121cdb3ce50e.png)

# javascript - 在每个 div 中添加带有 img 标题的表单复选框

> ID：12207259
> 
> 赞同：1
> 
> 时间：2012-08-31T00:01:14.947
> 
> 标签：javascript, jquery, html, forms

如何将表单复选框添加到每个具有增加 id 的 div 中？

目前有：

```
<div class="img-wrap">
    <img title="1" src="img.jpg" />
</div>
<div class="img-wrap">
    <img title="2" src="img.jpg" />
</div>
<div class="img-wrap">
    <img title="3" src="img.jpg" />
</div> 
```

而且我要

```
<div class="img-wrap">
    <img title="1" src="img.jpg" />
    <input type="checkbox" name="1" value="1" />
</div>
<div class="img-wrap">
    <img title="2" src="img.jpg" />
    <input type="checkbox" name="2" value="2" />
</div>
<div class="img-wrap">
    <img title="3" src="img.jpg" />
    <input type="checkbox" name="3" value="3" />
</div> 
```

jQuery 或 Javascript 会很棒！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:07:58.940

这样的事情应该解决：

```
$('.img-wrap img').each(function(){
  var id = $(this).attr('title');
  $('<input type="checkbox" name="'+id+'" value="'+id+'" />').insertAfter(this);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T00:11:08.563

```
$("img").each(function(){
    var id = $(this).attr("title");
    $(this).parent().append("<input type='checkbox' name='"+ id +"' value='"+ id +"' />");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:12:07.770

```
$(function(){
    var ele, val;
    $("div.img-wrap img").each(function(){
        ele = $(this);
        val = ele.attr("title");
        ele.after($('<input type="checkbox" name="' + val + '" value="' + val + '" />'));
    });
});​ 
```

# php - 通过 URL 传递变量

> ID：12207271
> 
> 赞同：1
> 
> 时间：2012-08-31T00:02:40.747
> 
> 标签：php, variables

有没有办法通过 URL 传递变量？因为我正在尝试做这样的事情：

```
<a href="/testy-aparatury/przypomnienie-o-testach/formularz/form/3-wprowadz-aparat&id=18"> 
```

但它不起作用（试图传递 id）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:04:21.603

使用问号开始查询字符串；和号用于分隔参数。

```
.../form/3-wprowadz-aparat?id=18 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:05:17.507

您正在寻找[查询字符串](http://en.wikipedia.org/wiki/Query_string)。

在 PHP 中，查询字符串中的变量是 GET 参数，可从全局范围的关联数组中获得[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)。

# node.js - 500 错误：ENOENT，使用 consolidate.js 打开“C:\Users\Gilbert\Documents\GitHub\maths4me\base.dust”

> ID：12207272
> 
> 赞同：6
> 
> 时间：2012-08-31T00:03:00.850
> 
> 标签：node.js, dust.js

尝试在dust.js 中设置继承时出现此错误：

```
500 Error: ENOENT, open 'C:\Users\Gilbert\Documents\GitHub\maths4me\base.dust' 
```

我有一个名为 index.html 的文件：

```
{>"base.dust"/}
   {<title}Hi{/title} 
```

调用base.dust：

```
<!DOCTYPE html>
<html>
  <head>
    <title>{+title}Maths 4 me{/title}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>Hi</h1>
    <p>Welcome to maths4me</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:14:11.547

`ENOENT` [表示](https://github.com/joyent/node/blob/b3e4fc6a48b97b52bd19de43c76b7082dcab4988/test/simple/test-domain.js#L73)该文件不存在。

再次检查是否`base.dust`存在于提供的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:26:12.280

如果您像我一样不想一直指定基本模板和部分模板的完整路径，请尝试：[klei-dust](https://npmjs.org/package/klei-dust)。（就像合并但仅适用于dustjs-linkedin）在您上面的场景中，您可以指定：

```
{>base/} 
```

代替：

```
{>"views/base.dust"/} 
```

...让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T02:16:25.977

仔细检查您的文件名。对我来说，我看到了这个错误**错误：ENOENT，** 我注意到在我的一个主要 app.js 中，我写道

```
app.get('/', function(req, res) {
    res.sendfile('./views/plan.html');
}); 
```

当我在视图文件夹中时，我将其重命名为 home.html，相应地出现此错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:12:07.540

灰尘部分在应用程序根目录中查看，而不是在视图文件夹中，我花了一些时间才意识到这一点。我引用了错误文件夹中的文件。我的代码应该是：

```
{>"/views/base.dust"/}
{<title}Hi{/title} 
```

# c# - WPF 多定时器控制

> ID：12207273
> 
> 赞同：1
> 
> 时间：2012-08-31T00:03:10.563
> 
> 标签：c#, wpf, c#-4.0, timer

我搜索了一些用于 Windows 和 WPF 应用程序的 Timer Control 链接，但我希望能对我的情况提供一些建议......

当我使用 WPF 时，似乎初始选项要么是`System.Windows.Threading.DispatcherTimer`要么`System.Diagnostics.Stopwatch`

我需要实现的是每个 WPF`DocumentPanel`以定义的时间间隔从外部 API 请求更新，通常为 100 毫秒最小值 - 任何时间最大值，每个时间间隔都是唯一的`DocumentPanel`。例如 DP1 可以是 100ms，DP2 可以是 20,000ms 等等。

通常我的应用程序会从 1 个 DocumentPanel 开始，但用户可以无限制地扩展面板，所以这是用户对 CPU 能力和应用程序速度的判断。

标准包括：

1.  多个 DocumentPanels - 通常最少 1 - 20 个，但欢迎任何关于可扩展性的建议。

2.  可变事件间隔 (Iv)（最小事件间隔 100 毫秒 - 最大 < 1 天）

3.  准确度 - 1 毫秒（在任何情况下都不能低于 (Iv) 毫秒的间隔，超过不是那么重要，但需要在几毫秒内）**编辑：1 毫秒不是严格要求，但平均值 (Iv) 必须在短时间内保持时间尺度。**

4.  每个都`DocumentPanel`必须显示实时日期/时间，但根据设置的间隔生成事件

我现在真的在寻求设计考虑的帮助，而不是实际的代码，因为 WPF 对我来说很困惑。

目前，我正在接近使用单个实例`System.Diagnostics.Stopwatch`并允许每个面板对秒表事件采取行动，无论是否已达到间隔时间。

任何人都可以建议吗？

谢谢你哦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:23:54.567

最好只使用一个`System.Windows.Threading.DispatcherTimer`100ms 作为刻度，然后使用标签来确定它自己的间隔，例如你可以使用

```
struct IntervalComparer
{
     int myinterval; //the individual update interval (300ms for example)
     int currentinterval;
     public IntervalComparer(int myinterval)
    {
            this.myinterval=myinterval;
            this.currentinterval=0;
    }

        public void TickMe()
        {
            currentinterval++;
        }

        public void ResetkMe()
        {
            currentinterval = 0;
        }

        public bool CanIUpdate()
        {
            return myinterval == currentinterval;
        }
} 
```

在创作上

```
.... Form_Loaded....
{
 .....
      mypanel=new Panel();
      mypanel.Tag= new IntervalComparer(2); // 2 * 100ms
 .....
}

.... Timer_Tick....
{
   ....
   (mypanel.Tag as IntervalComparer).TickMe();
    if((mypanel.Tag as IntervalComparer).CanIUpdate())
     {
       UpdateMyPanel();//your update method 
       (mypanel.Tag as IntervalComparer).ResetMe();
     }

   ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:24:03.917

通常在这种情况下，我会有一个计时器，然后检查每个 DocumentPanel 的经过时间。我猜 100% 的准确性并不重要，如果他们选择 999 毫秒，那么他们不会注意到你的主计时器是否每 50 毫秒触发一次，所以只能给他们 50 毫秒的增量。无论如何，Windows 并没有提供那种准确性，我在尝试触发一次闪光灯时了解到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T00:24:48.927

我使用以下方法在 Silverlight 应用程序中实现了类似的功能：

以小间隔滴答的单个计时器（您可以自行决定，但需要低于支持的最低更新间隔），然后让每个 DocumentPanel 订阅此计时器的滴答事件。

当触发滴答事件时，每个 DocumentPanel 将根据其更新频率（EG（上次更新 - 现在）> 间隔）确定是否需要更新。

这里有一些计时器类的比较：

[http://msdn.microsoft.com/en-us/magazine/cc164015.aspx](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

没有提到 DispatcherTimer，但 DispatcherTimer 和 System.Timers.Timer 之间的重要区别是：

> 如果在 WPF 应用程序中使用 System.Timers.Timer，则值得注意的是 System.Timers.Timer 运行在与用户界面 (UI) 线程不同的线程上。为了访问用户界面 (UI) 线程上的对象，有必要使用 Invoke 或 BeginInvoke 将操作发布到用户界面 (UI) 线程的 Dispatcher。使用 DispatcherTimer 而不是 System.Timers.Timer 的原因是 DispatcherTimer 与 Dispatcher 在同一线程上运行，并且可以在 DispatcherTimer 上设置 DispatcherPriority。

（来自[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)）。

在不知道您当前如何处理 UI 更新以及您的程序结构如何的情况下，很难说您应该使用哪个计时器。

我对使用 StopWatch 不是很熟悉，但我的观点是（在阅读[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)之后）使用单个 StopWatch 不是t 特别适合这个问题的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:42:25.117

`Tag`如果您需要该属性并进行更多封装，则 use 可以从 DocumentPanel 继承

```
 class UpdatableDocumentPanel : DocumentPanel
    {
        public int myinterval { get; set; }//the individual update interval (300ms for example)
        int currentinterval;

        public void Update()
        {

            currentinterval++;

            if (myinterval == currentinterval)
            {
                currentinterval = 0;
                UpdateMyPanelMethod();
            }
        }
    } 
```

和

```
 .... Form_Loaded....
 {
  .....
  mypanel.myinterval = 2; // 2 * 100ms
  .....
 }

 .... Timer_Tick....
 {
    ....
   mypanel.Update(); // simply
    ....
 } 
```

# javascript - jquery-ui-map 框架在 jqm 1.1.1 上不能正常工作？

> ID：12207275
> 
> 赞同：0
> 
> 时间：2012-08-31T00:03:52.493
> 
> 标签：javascript, jquery, jquery-mobile, jquery-ui-map

我在 jquery 1.7.1、jqm 1.1.0 和 jquery-ui-maps v3 上运行了这个小片段。

从 jqm1.1.0 切换到 1.1.1 时，你们有没有遇到任何问题？我在一个 jqm 应用程序实例上有这个代码，它在更新之前工作：

```
function loadGMaps() {
$(document).live('pageinit', function() {
    $('#main-map').gmap({'disableDefaultUI':true, 'callback': function(map) {           
        var self = this;            
        self.watchPosition( function(position, status) {
            if ( status === 'OK' ) {
                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                if ( !self.get('markers').client ) {
                    self.addMarker({ 'id': 'client', 'position': latlng, 'bounds': true });
                } else {
                    self.get('markers').client.setPosition(latlng);
                    map.panTo(latlng);
                }
                /*self.search({ 'address': 'Vancouver, Canada' }, function(results, status) {               
                    if ( status === 'OK' ) {
                        console.log(results[0]);
                        }
                    });*/
            }
        });         
    }});
}); 

$(document).live( 'pageshow', function() {
    $('#main-map').gmap('refresh')
});

$(document).live( 'pagehide', function() {
    $('#main-map').gmap('clearWatch')
});
} 
```

使用 ff 调试器，似乎没有调用 self.watchPosition() 命令，只是跳过它。

代码取自这里 [http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#gps_map](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#gps_map)

有人可以在那里给我一个建议吗？谢谢！

编辑：我使用的 HTML 代码与示例中的非常相似：

```
<div id='intro' data-role='content'>
  <div class='row'>
    <div class='twelvecol last'>
      <div class='cell'>
        <div id='main-map' style='height:300px;' class='align-center'>
          <h5>
            <span>Map</span>
          </h5>          
        </div>
      </div>
    </div>    
  </div>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:49:09.603

这显然似乎是一个报告的错误！

[http://code.google.com/p/jquery-ui-map/issues/detail?id=63](http://code.google.com/p/jquery-ui-map/issues/detail?id=63)

你记录了吗？

仍然会尝试找出解决方法...

hth。

# php - Paypal IPN 在沙盒中有效 直播时无效

> ID：12207281
> 
> 赞同：1
> 
> 时间：2012-08-31T00:04:27.633
> 
> 标签：php, mysql, curl, paypal, paypal-ipn

我一直在尝试将贝宝 IPN 系统实施到客户站点中。每当我在 IPN 沙盒工具中测试此脚本时，都会对其进行验证并执行我的操作，但是当我实时移动它时，IPN 将作为无效返回。我在墙上，提前感谢您的帮助。
这是 IPN 侦听器脚本：

```
<?php
/**
 *  PayPal IPN Listener
 *
 *  A class to listen for and handle Instant Payment Notifications (IPN) from 
 *  the PayPal server.
 *
 *  https://github.com/Quixotix/PHP-PayPal-IPN
 *
 *  @package    PHP-PayPal-IPN
 *  @author     Micah Carrick
 *  @copyright  (c) 2011 - Micah Carrick
 *  @version    2.0.5
 *  @license    http://opensource.org/licenses/gpl-3.0.html
 */
class IpnListener {

    /**
     *  If true, the recommended cURL PHP library is used to send the post back 
     *  to PayPal. If flase then fsockopen() is used. Default true.
     *
     *  @var boolean
     */
    public $use_curl = true;     

    /**
     *  If true, explicitly sets cURL to use SSL version 3\. Use this if cURL
     *  is compiled with GnuTLS SSL.
     *
     *  @var boolean
     */

    public $force_ssl_v3 = true;     

    /**
     *  If true, cURL will use the CURLOPT_FOLLOWLOCATION to follow any 
     *  "Location: ..." headers in the response.
     *
     *  @var boolean
     */
    public $follow_location = false;     

    /**
     *  If true, an SSL secure connection (port 443) is used for the post back 
     *  as recommended by PayPal. If false, a standard HTTP (port 80) connection
     *  is used. Default true.
     *
     *  @var boolean
     */
    public $use_ssl = true;      

    /**
     *  If true, the paypal sandbox URI www.sandbox.paypal.com is used for the
     *  post back. If false, the live URI www.paypal.com is used. Default false.
     *
     *  @var boolean
     */
    public $use_sandbox = false; 

    /**
     *  The amount of time, in seconds, to wait for the PayPal server to respond
     *  before timing out. Default 30 seconds.
     *
     *  @var int
     */
    public $timeout = 30;       

    private $post_data = array();
    private $post_uri = '';     
    private $response_status = '';
    private $response = '';

    const PAYPAL_HOST = 'www.paypal.com';
    const SANDBOX_HOST = 'www.sandbox.paypal.com';

    /**
     *  Post Back Using cURL
     *
     *  Sends the post back to PayPal using the cURL library. Called by
     *  the processIpn() method if the use_curl property is true. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function curlPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'https://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        } else {
            $uri = 'http://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        }

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, $uri);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded_data);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $this->follow_location);
        curl_setopt($ch, CURLOPT_TIMEOUT, $this->timeout);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, true);

        if ($this->force_ssl_v3) {
            curl_setopt($ch, CURLOPT_SSLVERSION, 3);
        }

        $this->response = curl_exec($ch);
        $this->response_status = strval(curl_getinfo($ch, CURLINFO_HTTP_CODE));

        if ($this->response === false || $this->response_status == '0') {
            $errno = curl_errno($ch);
            $errstr = curl_error($ch);
            throw new Exception("cURL error: [$errno] $errstr");
        }
    }

    /**
     *  Post Back Using fsockopen()
     *
     *  Sends the post back to PayPal using the fsockopen() function. Called by
     *  the processIpn() method if the use_curl property is false. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function fsockPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'ssl://'.$this->getPaypalHost();
            $port = '443';
            $this->post_uri = $uri.'/cgi-bin/webscr';
        } else {
            $uri = $this->getPaypalHost(); // no "http://" in call to fsockopen()
            $port = '80';
            $this->post_uri = 'http://'.$uri.'/cgi-bin/webscr';
        }

        $fp = fsockopen($uri, $port, $errno, $errstr, $this->timeout);

        if (!$fp) { 
            // fsockopen error
            throw new Exception("fsockopen error: [$errno] $errstr");
        } 

        $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
        $header .= "Host: ".$this->getPaypalHost()."\r\n";
        $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $header .= "Content-Length: ".strlen($encoded_data)."\r\n";
        $header .= "Connection: Close\r\n\r\n";

        fputs($fp, $header.$encoded_data."\r\n\r\n");

        while(!feof($fp)) { 
            if (empty($this->response)) {
                // extract HTTP status from first line
                $this->response .= $status = fgets($fp, 1024); 
                $this->response_status = trim(substr($status, 9, 4));
            } else {
                $this->response .= fgets($fp, 1024); 
            }
        } 

        fclose($fp);
    }

    private function getPaypalHost() {
        if ($this->use_sandbox) return IpnListener::SANDBOX_HOST;
        else return IpnListener::PAYPAL_HOST;
    }

    /**
     *  Get POST URI
     *
     *  Returns the URI that was used to send the post back to PayPal. This can
     *  be useful for troubleshooting connection problems. The default URI
     *  would be "ssl://www.sandbox.paypal.com:443/cgi-bin/webscr"
     *
     *  @return string
     */
    public function getPostUri() {
        return $this->post_uri;
    }

    /**
     *  Get Response
     *
     *  Returns the entire response from PayPal as a string including all the
     *  HTTP headers.
     *
     *  @return string
     */
    public function getResponse() {
        return $this->response;
    }

    /**
     *  Get Response Status
     *
     *  Returns the HTTP response status code from PayPal. This should be "200"
     *  if the post back was successful. 
     *
     *  @return string
     */
    public function getResponseStatus() {
        return $this->response_status;
    }

    /**
     *  Get Text Report
     *
     *  Returns a report of the IPN transaction in plain text format. This is
     *  useful in emails to order processors and system administrators. Override
     *  this method in your own class to customize the report.
     *
     *  @return string
     */
    public function getTextReport() {

        $r = '';

        // date and POST url
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n[".date('m/d/Y g:i A').'] - '.$this->getPostUri();
        if ($this->use_curl) $r .= " (curl)\n";
        else $r .= " (fsockopen)\n";

        // HTTP Response
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n{$this->getResponse()}\n";

        // POST vars
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n";

        foreach ($this->post_data as $key => $value) {
            $r .= str_pad($key, 25)."$value\n";
        }
        $r .= "\n\n";

        return $r;
    }

    /**
     *  Process IPN
     *
     *  Handles the IPN post back to PayPal and parsing the response. Call this
     *  method from your IPN listener script. Returns true if the response came
     *  back as "VERIFIED", false if the response came back "INVALID", and 
     *  throws an exception if there is an error.
     *
     *  @param array
     *
     *  @return boolean
     */    
    public function processIpn($post_data=null) {

        $encoded_data = 'cmd=_notify-validate';

        if ($post_data === null) { 
            // use raw POST data 
            if (!empty($_POST)) {
                $this->post_data = $_POST;
                $encoded_data .= '&'.file_get_contents('php://input');
            } else {
                throw new Exception("No POST data found.");
            }
        } else { 
            // use provided data array
            $this->post_data = $post_data;

            foreach ($this->post_data as $key => $value) {
                $encoded_data .= "&$key=".urlencode($value);
            }
        }

        if ($this->use_curl) $this->curlPost($encoded_data); 
        else $this->fsockPost($encoded_data);

        if (strpos($this->response_status, '200') === false) {
            throw new Exception("Invalid response status: ".$this->response_status);
        }

        if (strpos($this->response, "VERIFIED") !== false) {
            return true;
        } elseif (strpos($this->response, "INVALID") !== false) {
            return false;
        } else {
            throw new Exception("Unexpected response from PayPal.");
        }
    }

    /**
     *  Require Post Method
     *
     *  Throws an exception and sets a HTTP 405 response header if the request
     *  method was not POST. 
     */    
    public function requirePostMethod() {
        // require POST requests
        if ($_SERVER['REQUEST_METHOD'] && $_SERVER['REQUEST_METHOD'] != 'POST') {
            header('Allow: POST', true, 405);
            throw new Exception("Invalid HTTP request method.");
        }
    }
}
?> 
```

这是我的处理程序脚本：

```
<?php
/*
ipn.php - example code used for the tutorial:

PayPal IPN with PHP
How To Implement an Instant Payment Notification listener script in PHP
http://www.micahcarrick.com/paypal-ipn-with-php.html

(c) 2011 - Micah Carrick
*/

// tell PHP to log errors to ipn_errors.log in this directory
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

// intantiate the IPN listener
include('ipnlistener.php');
$listener = new IpnListener();

// tell the IPN listener to use the PayPal test sandbox
$listener->use_sandbox = true;

// try to process the IPN POST
try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

if ($verified) {

    $errmsg = '';   // stores errors from fraud checks

    // 1\. Make sure the payment status is "Completed" 
    if ($_POST['payment_status'] != 'Completed') { 
        // simply ignore any IPN that is not completed
        exit(0); 
    }

    // 2\. Make sure seller email matches your primary account email.
    if ($_POST['receiver_email'] != 'mail@example.com') {
        $errmsg .= "'receiver_email' does not match: ";
        $errmsg .= $_POST['receiver_email']."\n";
    }

    // 3\. Make sure the amount(s) paid match
        //if ($_POST['mc_gross'] != '9.99') {
            //$errmsg .= "'mc_gross' does not match: ";
            //$errmsg .= $_POST['mc_gross']."\n";
        //}

    // 4\. Make sure the currency code matches
    if ($_POST['mc_currency'] != 'USD') {
        $errmsg .= "'mc_currency' does not match: ";
        $errmsg .= $_POST['mc_currency']."\n";
    }

    // 5\. Ensure the transaction is not a duplicate.
    mysql_connect('dfdesignzstudiocom.ipagemysql.com','root2121','******') or exit(0);
    mysql_select_db('paypal') or exit(0);

    if (!empty($errmsg)) {

        // manually investigate errors from the fraud checking
        $body = "IPN failed fraud checks: \n$errmsg\n\n";
        $body .= $listener->getTextReport();
        mail('myemail@example.com', 'IPN Fraud Warning', $body);

    } else {
        // add this order to a table of completed orders
        $payer_email = mysql_real_escape_string($_POST['payer_email']);
        $first_name = mysql_real_escape_string($_POST['first_name']);
        $last_name = mysql_real_escape_string($_POST['last_name']);
        $contact_phone = mysql_real_escape_string($_POST['contact_phone']);
        $item_name = mysql_real_escape_string($_POST['item_name']);
        $quantity = mysql_real_escape_string($_POST['quantity']);
        $mc_fee = mysql_real_escape_string($_POST['mc_fee']);
        $sql = "INSERT INTO orders (payer_email, first_name, last_name, contact_phone, item_name, quantity, mc_fee) VALUES 
                ('$payer_email', '$first_name', '$last_name', '$contact_phone', '$item_name', '$quantity', '$mc_fee')";

        if (!mysql_query($sql)) {
            error_log(mysql_error());
            exit(0);
        }
        // send seller an email with buyer information
        $to = filter_var('myemail@example.com', FILTER_SANITIZE_EMAIL);
        $subject = "New Class Registration";
        $message = "Registration Information: \n$first_name $last_name\n$payer_email\nItem Name: $item_name \nQuantity: $quantity\nTotal paid: $mc_fee";
        mail($to, $subject, $message);

$command="mysqldump --xml --host=dfdesignzstudiocom.ipagemysql.com --user=root2121 --password=****** paypal > database.xml";
system($command);

    }
} else {
    // manually investigate the invalid IPN
    mail('myemail@example.com', 'Invalid IPN', $listener->getTextReport());
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T02:31:00.160

将 $listener->use_sandbox 设置为 false

```
 $listener->use_sandbox = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:13:34.033

您是否检查了您的 PayPal 帐户 > IPN 历史记录并通过单击相关交易的消息 ID 查看了 HTML 错误代码？

# android - 在 Gingerbread 及以下使用 requestFocus 后编辑文本不可编辑？

> ID：12207285
> 
> 赞同：0
> 
> 时间：2012-08-31T00:04:48.750
> 
> 标签：android, android-edittext, android-softkeyboard

我有一个编辑文本，我设置了以下内容

```
editText.requestFocus()
InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(ediText, InputMethodManager.SHOW_IMPLICIT); 
```

它在 ICS 和 JellyBean 中工作得非常好，但在 Gingerbread/Froyo 等中，编辑文本不可编辑（无论用户输入什么都不会显示在编辑文本中）。我对这种奇怪的行为一无所知。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:20:12.517

只需将 getActivity() 更改为 getApplicationContext() 然后我认为它将在 Gingerbread 中工作到 ics。

```
EditText et = (EditText) findViewById(R.id.et);
    et.requestFocus();
    InputMethodManager imm = (InputMethodManager) getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(et, InputMethodManager.SHOW_IMPLICIT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:48:39.830

尝试这个：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

# iphone - 在 UITableView 中显示可下载内容的正确方法（使用 ProgressBar 等）

> ID：12207288
> 
> 赞同：6
> 
> 时间：2012-08-31T00:04:58.030
> 
> 标签：iphone, ios, uitableview, download

我认为这是一个相当复杂的问题。我有一个显示许多可下载内容的 TableView。当您单击单元格内的按钮时，下载开始。

但是我遇到了几个问题：1.如何确保始终显示进度条（即使用户滚动滚动并且重新加载单元格） 2.如何确保用户可以下载2个文件一次。我担心它会导致问题，因为我使用了一些实例变量。在某种程度上，它应该有点像在音乐应用程序中从 iCloud 下载

这是我的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil];   
    }
    //cell.tag = indexPath.row*10;
    Uebungsblaetter *uebungCell = [uebungsblattArray objectAtIndex:indexPath.row];
    cell.tag = indexPath.row*10;
    cell.textLabel.text = [self getFileNameOutOf:uebungCell.url];
    cell.textLabel.textColor = [UIColor grayColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    UIButton *dl = [UIButton buttonWithType:UIButtonTypeCustom];
    dl.tag = indexPath.row*10;
    [dl setBackgroundImage:[UIImage imageNamed:@"downloadButton.png"] forState:UIControlStateNormal];
    [dl setBackgroundImage:[UIImage imageNamed:@"downloadButtonH.png"] forState:UIControlStateHighlighted];
    [dl setFrame:CGRectMake(230.0, (cell.frame.size.height-28)/2, 28, 28)];
    [dl addTarget:self action:@selector(downloadFileWhenPressedButton:) forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:dl];
    UIProgressView *dlProgress = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
    dlProgress.frame = CGRectMake(cell.frame.size.width-150, 17, 50, 9);
    dlProgress.tag =indexPath.row*10+1;
    dlProgress.progress = 0.0;
    [cell.contentView addSubview:dlProgress];
    [dlProgress setHidden:YES];   

    return cell;
}

//download methods
- (void)downloadFileWhenPressedButton:(UIButton*)sender{
    sender.hidden = YES;
    dlIndex = sender.tag/10;
    Uebungsblaetter *selectedUB = [uebungsblattArray objectAtIndex:dlIndex];
    NSURL *theUrl = [NSURL URLWithString:selectedUB.url];
    NSURLRequest *req=[NSURLRequest requestWithURL:theUrl cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:120];
    dlCell = (UITableViewCell *)[[sender superview]superview];
    currDlProgress = (UIProgressView* )[dlCell.contentView viewWithTag:dlIndex*10+1];
    currDlProgress.hidden = NO;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    dlFilePath = [NSString stringWithFormat:@"%@/%@_%@", [paths objectAtIndex:0],self.courseLable.text,[self getFileNameOutOf:selectedUB.url]];
    NSURLConnection *con=[[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
    if (con) {
        myWebData = [NSMutableData data];
    }

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = YES;
    currDlProgress.progress = 0;
    _totalFileSize = response.expectedContentLength;
    NSLog(@"%@",@"connection established");
    [myWebData setLength: 0];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    _receivedDataBytes += [data length];
    currDlProgress.progress = _receivedDataBytes / (float)_totalFileSize;

    NSLog(@"%@",@"connection receiving data");
    [myWebData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"%@",@"connection failed");
    //  [AlertViewHandler showAlertWithErrorMessage:@"Sorry, there is no network connection. Please check your network and try again."];
    //  [self parserDidEndDocument:nil];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = NO;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.35];
    [currDlProgress setAlpha:0];
    [UIView commitAnimations];
    [myWebData writeToFile:dlFilePath atomically:YES];
    Uebungsblaetter *loadedUB = [uebungsblattArray objectAtIndex:dlIndex];
    loadedUB.downloaded = [NSNumber numberWithBool:YES];
    [courseTable reloadData];
} 
```

如果有人有线索或很好的代码示例会很好

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T05:17:42.603

重要的是要意识到您的进度条不会一直显示（即用户可以滚动表格，一旦离开屏幕，同一单元格就可以在另一个索引位置重复使用以获取不同的内容）。因此，您需要做的是在某个地方存储有关任何活动下载的数据，包括表中的索引位置、总文件大小以及到目前为止下载的字节数。然后，无论何时绘制单元格，您都需要检查该单元格的项目当前是否正在下载，如果是，则显示具有适当进度百分比的栏。

最简单的方法是向视图控制器添加一个属性来存储此信息。它可以是一个包含对象`NSMutablerray`集合的`NSMutableDictionary`对象，每个字典都将包含有关活动下载的必要信息。

```
@property (nonatomic, strong) NSMutableArray *activeConnections; 
```

首先，您将在以下位置初始化数组`viewDidLoad:`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //...

    self.activeConnections = [[NSMutableArray alloc] init];
} 
```

每当按下按钮时，您都会将一个 NSMutableDictionary 对象添加到您的数组中，其中包含您需要的信息。

```
- (void)downloadFileWhenPressedButton:(UIButton*)sender
{
    // ...

    //  then create dictionary
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
    [dict setObject:con forKey:@"connection"];  // save connection so we can reference later
    [dict setObject:[NSNumber numberWithInt:[sender.tag]/10] forKey:@"row"];  // this is the row index from your table
    [dict setObject:[NSNumber numberWithInt:999] forKey:@"totalFileSize"];  // dummy size, we will update when we know more
    [dict setObject:[NSNumber numberWithInt:0] forKey:@"receivedBytes"];

    [self.activeConnections addObject:dict];
} 
```

此外，我们将创建两个实用方法，以便我们可以使用连接对象本身或表中的行索引位置轻松地从数组中检索连接信息。

```
- (NSDictionary*)getConnectionInfo:(NSURLConnection*)connection
{
    for (NSDictionary *dict in self.activeConnections) {
        if ([dict objectForKey:@"connection"] == connection) {
            return dict;
        }
    }
    return nil;
}

- (NSDictionary*)getConnectionInfoForRow:(int)row
{
    for (NSDictionary *dict in self.activeConnections) {
        if ([[dict objectForKey:@"row"] intValue] == row) {
            return dict;
        }
    }
    return nil;
} 
```

建立连接后，使用预期长度更新您的字典 

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // ...

    NSDictionary *dict = [self getConnectionInfo:connection];
    [dict setObject:[NSNumber numberWithInt:response.expectedContentLength] forKey:@"totalFileSize"];
} 
```

当您接收数据时，您将更新接收到的字节数并告诉您的 tableView 重绘包含进度条的单元格。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // ...

    NSDictionary *dict = [self getConnectionInfo:connection];
    NSNumber bytes = [data length] + [[dict objectForKey:@"receivedBytes"] intValue];

    [dict setObject:[NSNumber numberWithInt:response.expectedContentLength] forKey:@"receivedBytes"];

    int row = [[dict objectForKey:@"row"] intValue];
    NSIndexPath *indexPath = [NSIndexPathindexPathForRow:row inSection:0];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                          withRowAnimation:UITableViewRowAnimationNone];
} 
```

当你的连接下载完成后，你应该从你的 activeConnections 数组中删除连接，然后重新加载表格单元格。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    // ...

    NSDictionary *dict = [self getConnectionInfo:connection];
    [self.activeConnections removeObject:dict];

    int row = [[dict objectForKey:@"row"] intValue];
    NSIndexPath *indexPath = [NSIndexPathindexPathForRow:row inSection:0];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                          withRowAnimation:UITableViewRowAnimationNone];
} 
```

最后，`cellForRowAtIndexPath:`您需要根据 activeConnections 数组中的信息绘制单元格的进度条。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // ...

    // remove any previous buttons or progress bars from this cell
    for (UIView *view in [cell.contentView subViews]) {

        if ([view isKindOfClass:[UIProgressView class]] || [view isKindOfClass:[UIButton class]]) {
            [view removeFromSuperView];
        }
    }

    // look for active connecton for this cell
    NSDictionary *dict = [self getConnectionInfoForRow:indexPath.row];

    if (dict) {
        // there is an active download for this cell, show a progress bar

        UIProgressView *dlProgress = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
        dlProgress.frame = CGRectMake(cell.frame.size.width-150, 17, 50, 9);
        dlProgress.tag = indexPath.row*10+1;
        dlProgress.progress = [[dict objectForKey:@"receivedBytes"] intValue] / [[dict objectForKey:@"totalFileSize"] intValue];

        [cell.contentView addSubview:dlProgress];

    } else {
        // no active download, show the download button

        UIButton *dl = [UIButton buttonWithType:UIButtonTypeCustom];
        dl.tag = indexPath.row*10;
        [dl setBackgroundImage:[UIImage imageNamed:@"downloadButton.png"] forState:UIControlStateNormal];
        [dl setBackgroundImage:[UIImage imageNamed:@"downloadButtonH.png"] forState:UIControlStateHighlighted];
        [dl setFrame:CGRectMake(230.0, (cell.frame.size.height-28)/2, 28, 28)];
        [dl addTarget:self action:@selector(downloadFileWhenPressedButton:) forControlEvents:UIControlEventTouchUpInside];
        [cell.contentView addSubview:dl];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T00:47:46.627

您的问题是您混淆了数据和 UI。您依靠每个表格视图单元格来存储它的当前下载状态，这会导致问题。相反，您应该创建一个自定义对象，该对象可以存储单元格所需的数据（即表示是否正在下载、当前下载进度、下载数据等的布尔值）。然后，您应该拥有这些对象的可变数组，例如`objectAtIndex:0`表中第一个单元格的数据，依此类推。

当下载开始时，更新数组中的相关对象。理想情况下，当您创建表格视图单元格时，您应该使用该[`NSKeyValueObserving`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)，以便在其基础数据发生更改时自动通知它们并且可以适当地更新其数据。当一个单元格被重用时会很好，因为存储它的数据的对象仍然存在，如果它需要再次制作，因为它即将回到屏幕上，那么它将能够使用该数据来正确显示。

如果您需要对此任何部分的任何进一步解释，请告诉我。

# c# - nopCommerce IProductService 返回 IList 而不是 IQueryable

> ID：12207289
> 
> 赞同：2
> 
> 时间：2012-08-31T00:05:09.043
> 
> 标签：c#, nopcommerce

nopCommerce 中的 ProductService 类有一个 GetAllProducts 方法，它返回一个包含所有产品的 IList。

改为返回 IQueryable 不是更有意义吗？这样我就可以自己进一步过滤查询。

见下面的代码——

```
 public virtual IList<Product> GetAllProducts(bool showHidden = false)
    {
        var query = from p in _productRepository.Table
                    orderby p.Name
                    where (showHidden || p.Published) &&
                    !p.Deleted
                    select p;
        var products = query.ToList();
        return products;
    } 
```

当 IQueryable 完全足够时，为什么要将其转换为列表？我无法理解这背后的原因。

鉴于这个特殊的限制，有没有办法在不修改 Nop.Services 代码的情况下解决这个问题？

例如，我想运行查询以获取过去 5 天内创建的所有产品。我看不到通过 IProductService 接口执行此操作的方法。

有没有一种简单的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:26:26.317

这是可能的。

例子：

```
var products = _productService.GetAllProducts().Where(p => p.CreatedOnUtc > DateTime.UtcNow.AddDays(-5)); 
```

# mysql - 为什么 PhpMyAdmin 似乎破坏了我的字符编码？

> ID：12207291
> 
> 赞同：1
> 
> 时间：2012-08-31T00:05:13.723
> 
> 标签：mysql, utf-8, character-encoding, phpmyadmin

我编写了一个简短的脚本，它只是将 Unicode 字符插入 MySQL 数据库。它看起来像这样：

```
mysql_connect('localhost', 'root', '*') or die(mysql_error());
mysql_select_db('test') or die(mysql_error());
mysql_query("INSERT INTO thetable (thefield) VALUES ('äöüß')") or die(mysql_error()); 
```

我使用 Notepad++ 生成了脚本，它是 UTF-8 编码的，没有 BOM。

数据库和表有一个`utf8_general_ci`排序规则。当我使用 PhpMyAdmin 查看数据时，字符集似乎被破坏了。字符显示不正确：

> Ã¤Ã¶Ã¼ÃŸ

当我在脚本中收到数据时，字符集似乎没问题。我用正确的标题 ( `header('Content-Type: text/html; charset=utf-8')`) 倾倒了它，一切看起来都正确。

当我再次使用 PhpMyAdmin 将数据插入表中时，它会在 PhpMyAdmin 中正确显示，但是一旦我从演示脚本中转储它，字符集就会再次被破坏。

我不知道可能是什么原因。数据库的字符集、HTTP 标头和脚本的编码是一致的，我不怀疑 PhpMyAdmin 工作正常。那么我还能在哪里寻找问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:23:38.267

您在原始文件中的每个字符都有 2 个字符，因此将其作为标准 ASCII 而不是 unicode 读取。您可能需要指定 MySQL Connection 在连接时使用的字符集。

我在我的手机上，但是如果你发布你的数据库连接代码，我可以告诉你当我到达电脑时如何

编辑 - 见[PHP PDO: charset, set names?](https://stackoverflow.com/questions/4361459/php-pdo-charset-set-names)

# ruby-on-rails - 无法创建新的 rails 3.2.6 站点

> ID：12207303
> 
> 赞同：0
> 
> 时间：2012-08-31T00:07:27.810
> 
> 标签：ruby-on-rails

我已经安装了 ruby​​ 1.9.3p194。我还安装了 rails 3.2.8、3.2.6 和 3.0.3。我可以使用 rails 3.2.8 和 3.0.3 版本创建一个新站点。当我尝试使用 rails 3.2.6 创建站点时，它可以正常工作。

`rails _3.2.6_ new example`

```
/Users/Dave/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:317:in `bin_path': can't find gem rails (["3.2.6"]) with executable rails (Gem::GemNotFoundException)
    from /Users/Dave/.rvm/gems/ruby-1.9.3-p194/bin/rails:19:in `<main>'
    from /Users/Dave/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/Dave/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我试过卸载 3.2.6 并重新安装，但结果是一样的。对此的任何帮助都会很棒。

更新：我能够通过卸载 3.2.6 和 3.0.3 然后重新安装 3.2.6 来解决这个问题。不知道为什么这有效，但确实有效。在某些时候我需要安装 3.0.3 这些版本不能共存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:00:06.640

在花了一些时间查看绝对可以解决这个问题的 gemsets 之后。我设置了[RVM](http://rvm.io)并安装了两个版本的 Ruby。然后，我为每个版本设置[gemset](https://rvm.io/gemsets/basics/)，这些版本具有我需要为我正在阅读的书和我正在使用的 Web 服务器编写代码的 rails 版本。

# visual-studio-2010 - 为什么 Windows Azure 工具坚持认为我的 SSL 配置不正确？

> ID：12207312
> 
> 赞同：4
> 
> 时间：2012-08-31T00:08:00.857
> 
> 标签：visual-studio-2010, azure

我即将在云项目的 ServiceDefinition/ServiceConfiguration 文件中使用 Windows Azure 工具和 SSL 配置。

起初，我有一个启用了 RDP（并配置了证书等）的 Web 角色。所有这些都工作了很长时间。然后我为 https 端点添加了 SSL 证书。由于没有在我的本地机器/个人商店等中安装证书，它不会部署。在弄乱它之后，我不知何故进入了一个糟糕的状态，即使我完全删除了与 RDP 或 SSL 相关的所有配置，我仍然从模拟器中得到这个：

```
Windows Azure Tools: Warning: The SSL certificate 'Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption' for endpoint 'HttpsIn' of role 'My.Web' was not found in the local machine's certificate store.
Windows Azure Tools: Warning: Certificate identification setting 'Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption' for role 'My.Worker' specified in the service configuration file is not declared in the service definition file in the Certificate or as part of an SSL endpont 
```

就像我说的那样，我的任何文件中都没有这样的配置，而且当有时，它们从工作到现在都没有改变。我尝试删除放置部署的 dftemp 目录，我已经清理并重建了云项目，我已经杀死了 Visual Studio 和模拟器，但仍然总是回到同一个地方。

有没有其他人看过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:00:11.537

我不确定发生了什么，但是在离开一天并在今天早上回来之后，我发现系统重新启动似乎可以解决问题。我不知道为什么，但这似乎已经解决了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T03:52:27.733

对于第一个错误，您必须从服务配置文件 (cscfg) 的证书部分中删除证书。此证书用于加密您的 RDP 密码。

对于第二个错误，我认为如果您删除上述部分，它将自动消失。还要确保您已从服务定义文件（csdef）中删除了模块 RemoteAccess、RemoteForwarder

# html - css 停止页面

> ID：12207318
> 
> 赞同：2
> 
> 时间：2012-08-31T00:08:50.170
> 
> 标签：html, css

这就是我试图描述为我的问题，你可以看到白色的内容框只是有点停止：

链接到图像，因为我还不能在这里放图像：http: [//imageshack.us/photo/my-images/534/43094999.png/](http://imageshack.us/photo/my-images/534/43094999.png/)

为该背景加载的图像显然不够长，我不知道如何重复它，所以它全部流动。

如果这有助于解决问题，这是我的 CSS 的一个高峰：

[http://pastebin.com/RwcAPjS5](http://pastebin.com/RwcAPjS5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:14:13.333

您需要在框列表之后清除浮动。你可以用一个额外的元素来做到这一点，或者通过将`clear`CSS 属性添加到下一个兄弟元素（注意这会阻止一些边距工作）。

```
.clearfix {
    clear:both
} 
```

然后在您的 HTML 中（这`ul`只是一个猜测，因为我还没有看到您的 HTML）：

```
<ul class="float-boxes">
    <li>...</li>
</ul>

<div class="clearfix"></div> 
```

[这里](http://css-tricks.com/all-about-floats/)有一篇关于浮点数的好文章，其中涉及到为什么会发生这种情况。

# ide - 在特定情况下覆盖 .vimrc 文件

> ID：12207320
> 
> 赞同：1
> 
> 时间：2012-08-31T00:09:00.080
> 
> 标签：ide, vim

我希望在特定情况下使 vim 的功能更接近 IDE。为此，我计划编写一个名为 jvim 的 Perl 脚本，该脚本传递一个工作区路径，并让它打开我修改后的 vim 的 java 特定实例。然后我会将其扩展到其他文件类型。

我想做的是有一个优先于标准.vimrc 加载的.jvimrc。这将导致我使用 .plvimrc 的 plvim 和 .pyvimrc 的 pyvim。

这应该是相当直截了当的。我还希望映射命令来运行脚本，例如 :newclass、:newinterface、:newproject 和 :newpackage，但我想你明白了。

您可以提供的任何建议以及 .vimrc 覆盖都会很棒。

# python - 单个变量的频率表

> ID：12207326
> 
> 赞同：106
> 
> 时间：2012-08-31T00:10:12.253
> 
> 标签：python, statistics, pandas, frequency

当天最后一个新手熊猫问题：如何为单个系列生成表格？

例如：

```
my_series = pandas.Series([1,2,2,3,3,3])
pandas.magical_frequency_function( my_series )

>> {
     1 : 1,
     2 : 2, 
     3 : 3
   } 
```

大量的谷歌搜索让我找到了 Series.describe() 和 pandas.crosstabs，但这些都不能满足我的需要：一个变量，按类别计数。哦，如果它适用于不同的数据类型会很好：字符串、整数等。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-08-31T00:14:46.937

也许`.value_counts()`？

```
>>> import pandas
>>> my_series = pandas.Series([1,2,2,3,3,3, "fred", 1.8, 1.8])
>>> my_series
0       1
1       2
2       2
3       3
4       3
5       3
6    fred
7     1.8
8     1.8
>>> counts = my_series.value_counts()
>>> counts
3       3
2       2
1.8     2
fred    1
1       1
>>> len(counts)
5
>>> sum(counts)
9
>>> counts["fred"]
1
>>> dict(counts)
{1.8: 2, 2: 2, 3: 3, 1: 1, 'fred': 1} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-28T12:28:15.337

您可以在数据框上使用列表理解来计算列的频率

```
[my_series[c].value_counts() for c in list(my_series.select_dtypes(include=['O']).columns)] 
```

分解：

```
my_series.select_dtypes(include=['O']) 
```

> > 只选择分类数据

```
list(my_series.select_dtypes(include=['O']).columns) 
```

> > 将上面的列变成一个列表

```
[my_series[c].value_counts() for c in list(my_series.select_dtypes(include=['O']).columns)] 
```

> > 遍历上面的列表并将 value_counts() 应用于每一列

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-12-13T18:45:11.017

@DSM 提供的答案简单明了，但我想我会在这个问题中添加自己的输入。如果您查看[pandas.value_counts](https://github.com/pandas-dev/pandas/blob/master/pandas/core/algorithms.py)的代码，您会发现发生了很多事情。

如果您需要计算多个系列的频率，这可能需要一段时间。更快的实现是使用[numpy.unique](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.unique.html)`return_counts = True`

这是一个例子：

```
import pandas as pd
import numpy as np

my_series = pd.Series([1,2,2,3,3,3])

print(my_series.value_counts())
3    3
2    2
1    1
dtype: int64 
```

注意这里返回的项目是 pandas.Series

相比之下，`numpy.unique`返回一个包含两个项目的元组，唯一值和计数。

```
vals, counts = np.unique(my_series, return_counts=True)
print(vals, counts)
[1 2 3] [1 2 3] 
```

然后，您可以将它们组合成字典：

```
results = dict(zip(vals, counts))
print(results)
{1: 1, 2: 2, 3: 3} 
```

然后变成一个`pandas.Series`

```
print(pd.Series(results))
1    1
2    2
3    3
dtype: int64 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-11T04:20:50.867

对于具有过多值的变量的频率分布，您可以折叠类中的值，

这里我对`employrate`变量的值太大了，它的频率分布没有直接意义`values_count(normalize=True)`

```
 country  employrate alcconsumption
0           Afghanistan   55.700001            .03
1               Albania   11.000000           7.29
2               Algeria   11.000000            .69
3               Andorra         nan          10.17
4                Angola   75.699997           5.57
..                  ...         ...            ...
208             Vietnam   71.000000           3.91
209  West Bank and Gaza   32.000000               
210         Yemen, Rep.   39.000000             .2
211              Zambia   61.000000           3.56
212            Zimbabwe   66.800003           4.96

[213 rows x 3 columns] 
```

* * *

没有分类的频率分布，`values_count(normalize=True)`这里的结果长度是139（作为频率分布似乎没有意义）：

```
print(gm["employrate"].value_counts(sort=False,normalize=True))

50.500000   0.005618
61.500000   0.016854
46.000000   0.011236
64.500000   0.005618
63.500000   0.005618

58.599998   0.005618
63.799999   0.011236
63.200001   0.005618
65.599998   0.005618
68.300003   0.005618
Name: employrate, Length: 139, dtype: float64 
```

* * *

放置分类我们将所有值放在一定范围内，即。

```
0-10 为 1，
11-20 为 2  
21-30 为 3，依此类推。
```

```
gm["employrate"]=gm["employrate"].str.strip().dropna()  
gm["employrate"]=pd.to_numeric(gm["employrate"])
gm['employrate'] = np.where(
   (gm['employrate'] <=10) & (gm['employrate'] > 0) , 1, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=20) & (gm['employrate'] > 10) , 1, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=30) & (gm['employrate'] > 20) , 2, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=40) & (gm['employrate'] > 30) , 3, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=50) & (gm['employrate'] > 40) , 4, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=60) & (gm['employrate'] > 50) , 5, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=70) & (gm['employrate'] > 60) , 6, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=80) & (gm['employrate'] > 70) , 7, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=90) & (gm['employrate'] > 80) , 8, gm['employrate']
   )
gm['employrate'] = np.where(
   (gm['employrate'] <=100) & (gm['employrate'] > 90) , 9, gm['employrate']
   )
print(gm["employrate"].value_counts(sort=False,normalize=True)) 
```

* * *

分类后我们有一个清晰的频率分布。在这里我们可以很容易地看到，`37.64%`国家之间的就业率`51-60%` 和`11.79%`国家之间的就业率`71-80%`

```
5.000000   0.376404
7.000000   0.117978
4.000000   0.179775
6.000000   0.264045
8.000000   0.033708
3.000000   0.028090
Name: employrate, dtype: float64 
```

# c - mingw w64 labview构建错误

> ID：12207328
> 
> 赞同：1
> 
> 时间：2012-08-31T00:10:25.237
> 
> 标签：c, mingw-w64, nidaqmx

在过去的两天里，我一直试图让它工作，但不能。也许有人可以帮助我。让我先解释一下我的设置；

视窗 7 64 位

nidaqmx 9.1.7

明格 64 位

网豆 7.1.2

我创建了一个 def 文件（来自 C:\Program Files (x86)\National Instruments\Shared\ExternalCompilerSupport\C\lib64\msvc\nidaqmx.lib）。虽然 def 文件中没有 @ 符号。这是对的吗？

然后我运行 dlltool 并创建了我在链接器中使用的 libnidaq.a 文件。

一切正常。问题是当我尝试构建时出现以下错误：

```
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: i386 architecture of input file `../../Createdef/libnidaq.a(dyyrh.o)' is incompatible with i386:x86-64 output
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: i386 architecture of input file `../../Createdef/libnidaq.a(dyyrt.o)' is incompatible with i386:x86-64 output
collect2.exe: error: ld returned 1 exit status
make[2]: *** [dist/Debug/MinGW-Windows/libHelloWorldC.dll] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2 
```

我很确定一切都是 64 位的，所以我不知道这个错误来自哪里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:51:07.293

> ../../x86_64-w64-mingw32/bin/ld.exe：输入文件`../../Createdef/libnidaq.a(dyyrh.o)'的i386架构与i386:x86-64输出不兼容

该消息意味着您正在尝试将 32 位库 (i386) 链接到 64 位可执行文件 (x86-64)。由于您没有显示用于生成 dyyrh.o 和 libnidaq.a 的确切命令，因此无法判断您做错了什么。

我建议检查生成这两个文件时传入的开关和选项。例如，如果您使用的是 windres.exe，请确保`-F x86-64`已使用。如果您使用的是 dlltool.exe，则类似，也有类似的 switch `-m x86-64`。

您可以在生成的文件上使用 objdump 来检查其格式是否正确并与项目构建的其余部分一致。例如。

```
objdump -t dyyrh.o 
```

和

```
objdump -t libnidaq.a 
```

# java - 当切点在超类上但派生类覆盖时，如何避免两次命中切入点？

> ID：12207331
> 
> 赞同：6
> 
> 时间：2012-08-31T00:10:50.617
> 
> 标签：java, aspectj, super, aspect, pointcut

很难为此制定一个简洁的标题。

无论如何，想象一下我有一个父类：

```
 public class Shape {
        public Dimensions getDimensions() {
            // Does some generic stuff.
        }
    } 
```

我有一个派生类，它覆盖了 getDimensions 方法：

```
 public class Circle extends Shape {
        public Dimensions getDimensions() {
            // Does some stuff.
            super.getDimensions();
        }
    } 
```

当我创建一个切入点 on 的切面时，`Shape.getDimensions`切入点在被调用时被击中两次`Circle.getDimensions`：一次 for `Circle.getDimensions`，然后一次调用`super.getDimensions`.

切入点如下所示：`@Pointcut("execution(* Shape.getDimensions(..))")`

我在建议中添加了一个 hack 来检查声明类型的名称（使用`JoinPoint.getSignature().getDeclaringType().getName()`），但我觉得它相当粗糙，感觉有点像 hack。我认为必须有更好的方法来做到这一点。

有没有？

如果格式不是很好，请道歉。第一次在这里提问（我通常可以找到答案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:27:29.397

可能您的意思是您的切入点使用`Shape+.getDimensions()`（带有加号），否则它根本不会匹配`Circle`。

无论如何，你可以像这样解决问题（我希望原生 AspectJ 语法对你来说没问题，我发现它更清晰，更具表现力）：

```
public aspect ShapeAspect {
    pointcut getDimensions() : execution(* Shape+.getDimensions());
    pointcut getDimensionsNoSuper() : getDimensions() && !cflowbelow(getDimensions());

    after() : getDimensionsNoSuper() {
        System.out.println(thisJoinPointStaticPart);
    }
} 
```

# jsf-2 - 移动站点前缀和 jsf 2

> ID：12207333
> 
> 赞同：3
> 
> 时间：2012-08-31T00:11:30.553
> 
> 标签：jsf-2, primefaces, prettyfaces

如何使用 jsf2 轻松实现常见的移动站点模式？我可以用漂亮的面孔来实现它吗？

基本上我想要：

m.mysite/index 呈现 mobileIndex.xhtml mysite/index 呈现 index.xhtml

我想要它们。” 特别是前缀，我不知道怎么做。

使用 primefaces、tomcat7 和 prettyfaces。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:45:39.897

您问题的完整解决方案已发布在 Primefaces 论坛上，可在此处[找到](http://forum.primefaces.org/viewtopic.php?f=8&t=19887)

以下是相关代码：

ViewHandler 代码

```
import java.util.Map;
import javax.faces.application.ViewHandler;
import javax.faces.application.ViewHandlerWrapper;
import javax.faces.context.FacesContext;
import javax.servlet.RequestDispatcher;
import javax.servlet.http.HttpServletRequest;

public class MyViewHandlerWrapper extends ViewHandlerWrapper {

    private ViewHandler wrapped;

    public KxRenderKit(ViewHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public ViewHandler getWrapped() {
        return this.wrapped;
    }

    @Override
    public String calculateRenderKitId(FacesContext context) {

        HttpServletRequest req = (HttpServletRequest) context.getExternalContext().getRequest();
        String userAgent = req.getHeader("user-agent");
        String accept = req.getHeader("Accept");

        if (userAgent != null && accept != null) {
            UserAgentInfo agent = new UserAgentInfo(userAgent, accept);
            if (agent.isMobileDevice()) {
                return "PRIMEFACES_MOBILE";
            }
        }

        return this.wrapped.calculateRenderKitId(context);
    }
} 
```

在托管 Bean 中实现

```
@PostConstruct
    public void myPostConstruct(){
        String renderKitId = FacesContext.getCurrentInstance().getViewRoot().getRenderKitId();        
        if(renderKitId.equalsIgnoreCase("PRIMEFACES_MOBILE")){
            //REDIRECT TO YOUR MOBILE PAGE
        }
    } 
```

UserAgent 检测代码

UserAgent 检测代码

```
/* *******************************************
// Copyright 2010-2012, Anthony Hand
//
// File version date: April 23, 2012
//      Update:
//      - Updated DetectAmazonSilk(): Fixed an issue in the detection logic.  
//
// File version date: April 22, 2012 - Second update
//      Update: To address additional Kindle issues...
//      - Updated DetectRichCSS(): Excluded e-Ink Kindle devices. 
//      - Created DetectAmazonSilk(): Created to detect Kindle Fire devices in Silk mode. 
//      - Updated DetectMobileQuick(): Updated to include e-Ink Kindle devices and the Kindle Fire in Silk mode.  
//
// File version date: April 11, 2012
//      Update: 
//      - Added a new variable for the new BlackBerry Curve Touch (9380): deviceBBCurveTouch. 
//      - Updated DetectBlackBerryTouch() to support the new BlackBerry Curve Touch (9380).
//
// File version date: January 21, 2012
//      Update: 
//      - Moved Windows Phone 7 to the iPhone Tier. WP7.5's IE 9-based browser is good enough now.  
//      - Added a new variable for 2 versions of the new BlackBerry Bold Touch (9900 and 9930): deviceBBBoldTouch. 
//      - Updated DetectBlackBerryTouch() to support the 2 versions of the new BlackBerry Bold Touch (9900 and 9930). 
//      - Updated DetectKindle() to focus on eInk devices only. The Kindle Fire should be detected as a regular Android device.
//
// File version date: August 22, 2011
//      Update: 
//      - Updated DetectAndroidTablet() to fix a bug I introduced in the last fix!
//
// File version date: August 16, 2011
//      Update: 
//      - Updated DetectAndroidTablet() to exclude Opera Mini, which was falsely reporting as running on a tablet device when on a phone.
//
//
// LICENSE INFORMATION
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//        http://www.apache.org/licenses/LICENSE-2.0
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
// either express or implied. See the License for the specific
// language governing permissions and limitations under the License. 
//
//
// ABOUT THIS PROJECT
//   Project Owner: Anthony Hand
//   Email: anthony.hand@gmail.com
//   Web Site: http://www.mobileesp.com
//   Source Files: http://code.google.com/p/mobileesp/
//
//   Versions of this code are available for:
//      PHP, JavaScript, Java, ASP.NET (C#), and Ruby
//
// *******************************************
 */
package com.handinteractive.mobile;

/**
 * The DetectSmartPhone class encapsulates information about
 *   a browser's connection to your web site.
 *   You can use it to find out whether the browser asking for
 *   your site's content is probably running on a mobile device.
 *   The methods were written so you can be as granular as you want.
 *   For example, enquiring whether it's as specific as an iPod Touch or
 *   as general as a smartphone class device.
 *   The object's methods return true, or false.
 */
public class UAgentInfo {
    // User-Agent and Accept HTTP request headers

    private String userAgent = "";
    private String httpAccept = "";

    // Let's store values for quickly accessing the same info multiple times.
    public boolean isIphone = false;
    public boolean isAndroidPhone = false;
    public boolean isTierTablet = false;
    public boolean isTierIphone = false;
    public boolean isTierRichCss = false;
    public boolean isTierGenericMobile = false;

    // Initialize some initial smartphone string variables.
    public static final String engineWebKit = "webkit";

    public static final String deviceIphone = "iphone";
    public static final String deviceIpod = "ipod";
    public static final String deviceIpad = "ipad";
    public static final String deviceMacPpc = "macintosh"; //Used for disambiguation

    public static final String deviceAndroid = "android";
    public static final String deviceGoogleTV = "googletv";
    public static final String deviceXoom = "xoom"; //Motorola Xoom
    public static final String deviceHtcFlyer = "htc_flyer"; //HTC Flyer

    public static final String deviceSymbian = "symbian";
    public static final String deviceS60 = "series60";
    public static final String deviceS70 = "series70";
    public static final String deviceS80 = "series80";
    public static final String deviceS90 = "series90";

    public static final String deviceWinPhone7 = "windows phone os 7";
    public static final String deviceWinMob = "windows ce";
    public static final String deviceWindows = "windows";
    public static final String deviceIeMob = "iemobile";
    public static final String devicePpc = "ppc"; //Stands for PocketPC
    public static final String enginePie = "wm5 pie"; //An old Windows Mobile

    public static final String deviceBB = "blackberry";
    public static final String vndRIM = "vnd.rim"; //Detectable when BB devices emulate IE or Firefox
    public static final String deviceBBStorm = "blackberry95";  //Storm 1 and 2
    public static final String deviceBBBold = "blackberry97";  //Bold 97x0 (non-touch)
    public static final String deviceBBBoldTouch = "blackberry 99";  //Bold 99x0 (touchscreen)
    public static final String deviceBBTour = "blackberry96";  //Tour
    public static final String deviceBBCurve = "blackberry89";  //Curve 2
    public static final String deviceBBCurveTouch = "blackberry 938";  //Curve Touch 9380
    public static final String deviceBBTorch = "blackberry 98";  //Torch
    public static final String deviceBBPlaybook = "playbook"; //PlayBook tablet

    public static final String devicePalm = "palm";
    public static final String deviceWebOS = "webos"; //For Palm's line of WebOS devices
    public static final String deviceWebOShp = "hpwos"; //For HP's line of WebOS devices

    public static final String engineBlazer = "blazer"; //Old Palm
    public static final String engineXiino = "xiino"; //Another old Palm

    public static final String deviceKindle = "kindle";  //Amazon Kindle, eInk one
    public static final String engineSilk = "silk";  //Amazon's accelerated Silk browser for Kindle Fire

    public static final String deviceNuvifone = "nuvifone";  //Garmin Nuvifone

    //Initialize variables for mobile-specific content.
    public static final String vndwap = "vnd.wap";
    public static final String wml = "wml";

    //Initialize variables for other random devices and mobile browsers.
    public static final String deviceTablet = "tablet"; //Generic term for slate and tablet devices
    public static final String deviceBrew = "brew";
    public static final String deviceDanger = "danger";
    public static final String deviceHiptop = "hiptop";
    public static final String devicePlaystation = "playstation";
    public static final String deviceNintendoDs = "nitro";
    public static final String deviceNintendo = "nintendo";
    public static final String deviceWii = "wii";
    public static final String deviceXbox = "xbox";
    public static final String deviceArchos = "archos";

    public static final String engineOpera = "opera"; //Popular browser
    public static final String engineNetfront = "netfront"; //Common embedded OS browser
    public static final String engineUpBrowser = "up.browser"; //common on some phones
    public static final String engineOpenWeb = "openweb"; //Transcoding by OpenWave server
    public static final String deviceMidp = "midp"; //a mobile Java technology
    public static final String uplink = "up.link";
    public static final String engineTelecaQ = "teleca q"; //a modern feature phone browser
    public static final String devicePda = "pda"; //some devices report themselves as PDAs
    public static final String mini = "mini";  //Some mobile browsers put "mini" in their names.
    public static final String mobile = "mobile"; //Some mobile browsers put "mobile" in their user agent strings.
    public static final String mobi = "mobi"; //Some mobile browsers put "mobi" in their user agent strings.

    //Use Maemo, Tablet, and Linux to test for Nokia"s Internet Tablets.
    public static final String maemo = "maemo";
    public static final String linux = "linux";
    public static final String qtembedded = "qt embedded"; //for Sony Mylo
    public static final String mylocom2 = "com2"; //for Sony Mylo also

    //In some UserAgents, the only clue is the manufacturer.
    public static final String manuSonyEricsson = "sonyericsson";
    public static final String manuericsson = "ericsson";
    public static final String manuSamsung1 = "sec-sgh";
    public static final String manuSony = "sony";
    public static final String manuHtc = "htc"; //Popular Android and WinMo manufacturer

    //In some UserAgents, the only clue is the operator.
    public static final String svcDocomo = "docomo";
    public static final String svcKddi = "kddi";
    public static final String svcVodafone = "vodafone";

    //Disambiguation strings.
    public static final String disUpdate = "update"; //pda vs. update

    /**
     * Initialize the userAgent and httpAccept variables
     *
     * @param userAgent the User-Agent header
     * @param httpAccept the Accept header
     */
    public UAgentInfo(String userAgent, String httpAccept) {
        if (userAgent != null) {
            this.userAgent = userAgent.toLowerCase();
        }
        if (httpAccept != null) {
            this.httpAccept = httpAccept.toLowerCase();
        }

        //Intialize key stored values.
        initDeviceScan();
    }

    /**
     * Return the lower case HTTP_USER_AGENT
     * @return userAgent
     */
    public String getUserAgent() {
        return userAgent;
    }

    /**
     * Return the lower case HTTP_ACCEPT
     * @return httpAccept
     */
    public String getHttpAccept() {
        return httpAccept;
    }

    /**
     * Return whether the device is an Iphone or iPod Touch
     * @return isIphone
     */
    public boolean getIsIphone() {
        return isIphone;
    }

    /**
     * Return whether the device is in the Tablet Tier.
     * @return isTierTablet
     */
    public boolean getIsTierTablet() {
        return isTierTablet;
    }

    /**
     * Return whether the device is in the Iphone Tier.
     * @return isTierIphone
     */
    public boolean getIsTierIphone() {
        return isTierIphone;
    }

    /**
     * Return whether the device is in the 'Rich CSS' tier of mobile devices.
     * @return isTierRichCss
     */
    public boolean getIsTierRichCss() {
        return isTierRichCss;
    }

    /**
     * Return whether the device is a generic, less-capable mobile device.
     * @return isTierGenericMobile
     */
    public boolean getIsTierGenericMobile() {
        return isTierGenericMobile;
    }

    /**
     * Initialize Key Stored Values.
     */
    public void initDeviceScan() {
        this.isIphone = detectIphoneOrIpod();
        this.isAndroidPhone = detectAndroidPhone();
        this.isTierTablet = detectTierTablet();
        this.isTierIphone = detectTierIphone();
        this.isTierRichCss = detectTierRichCss();
        this.isTierGenericMobile = detectTierOtherPhones();
    }

    /**
     * Detects if the current device is an iPhone.
     * @return detection of an iPhone
     */
    public boolean detectIphone() {
        // The iPad and iPod touch say they're an iPhone! So let's disambiguate.
        if (userAgent.indexOf(deviceIphone) != -1 && 
                !detectIpad() && 
                !detectIpod()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an iPod Touch.
     * @return detection of an iPod Touch
     */
    public boolean detectIpod() {
        if (userAgent.indexOf(deviceIpod) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an iPad tablet.
     * @return detection of an iPad
     */
    public boolean detectIpad() {
        if (userAgent.indexOf(deviceIpad) != -1
                && detectWebkit()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an iPhone or iPod Touch.
     * @return detection of an iPhone or iPod Touch
     */
    public boolean detectIphoneOrIpod() {
        //We repeat the searches here because some iPods may report themselves as an iPhone, which would be okay.
        if (userAgent.indexOf(deviceIphone) != -1
                || userAgent.indexOf(deviceIpod) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects *any* iOS device: iPhone, iPod Touch, iPad.
     * @return detection of an Apple iOS device
     */
    public boolean detectIos() {
        if (detectIphoneOrIpod() || detectIpad()) {
            return true;
        }
        return false;
    }

    /**
     * Detects *any* Android OS-based device: phone, tablet, and multi-media player.
     * Also detects Google TV.
     * @return detection of an Android device
     */
    public boolean detectAndroid() {
        if ((userAgent.indexOf(deviceAndroid) != -1) ||
          detectGoogleTV()) 
            return true;
        //Special check for the HTC Flyer 7" tablet. It should report here.
        if (userAgent.indexOf(deviceHtcFlyer) != -1)
            return true;
        return false;
    }

    /**
     * Detects if the current device is a (small-ish) Android OS-based device
     * used for calling and/or multi-media (like a Samsung Galaxy Player).
     * Google says these devices will have 'Android' AND 'mobile' in user agent.
     * Ignores tablets (Honeycomb and later).
     * @return  detection of an Android phone
     */
    public boolean detectAndroidPhone() {
        if (detectAndroid() && (userAgent.indexOf(mobile) != -1)) 
            return true;
        //Special check for Android phones with Opera Mobile. They should report here.
        if (detectOperaAndroidPhone()) 
            return true;
        //Special check for the HTC Flyer 7" tablet. It should report here.
        if (userAgent.indexOf(deviceHtcFlyer) != -1) 
            return true;
        return false;
    }

    /**
     * Detects if the current device is a (self-reported) Android tablet.
     * Google says these devices will have 'Android' and NOT 'mobile' in their user agent.
     * @return detection of an Android tablet
     */
    public boolean detectAndroidTablet() {
        //First, let's make sure we're on an Android device.
        if (!detectAndroid())
            return false;

        //Special check for Opera Android Phones. They should NOT report here.
        if (detectOperaMobile()) 
            return false;
        //Special check for the HTC Flyer 7" tablet. It should NOT report here.
        if (userAgent.indexOf(deviceHtcFlyer) != -1)
            return false;

        //Otherwise, if it's Android and does NOT have 'mobile' in it, Google says it's a tablet.
        if ((userAgent.indexOf(mobile) > -1)) 
            return false;
        else 
            return true;
    }

    /**
     * Detects if the current device is an Android OS-based device and
     * the browser is based on WebKit.
     * @return detection of an Android WebKit browser
     */
    public boolean detectAndroidWebKit() {
        if (detectAndroid() && detectWebkit()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is a GoogleTV.
     * @return detection of GoogleTV
     */
    public boolean detectGoogleTV() {
        if (userAgent.indexOf(deviceGoogleTV) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is based on WebKit.
     * @return detection of a WebKit browser
     */
    public boolean detectWebkit() {
        if (userAgent.indexOf(engineWebKit) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is the Symbian S60 Open Source Browser.
     * @return detection of Symbian S60 Browser
     */
    public boolean detectS60OssBrowser() {
        //First, test for WebKit, then make sure it's either Symbian or S60.
        if (detectWebkit()
                && (userAgent.indexOf(deviceSymbian) != -1
                || userAgent.indexOf(deviceS60) != -1)) {
            return true;
        }
        return false;
    } 
```

代码在另一个答案中继续

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:44:37.157

UserAgent 检测代码继续：

```
 /**
     *
     * Detects if the current device is any Symbian OS-based device,
     *   including older S60, Series 70, Series 80, Series 90, and UIQ,
     *   or other browsers running on these devices.
     * @return detection of SymbianOS
     */
    public boolean detectSymbianOS() {
        if (userAgent.indexOf(deviceSymbian) != -1
                || userAgent.indexOf(deviceS60) != -1
                || userAgent.indexOf(deviceS70) != -1
                || userAgent.indexOf(deviceS80) != -1
                || userAgent.indexOf(deviceS90) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a 
     * Windows Phone 7 device.
     * @return detection of Windows Phone 7
     */
    public boolean detectWindowsPhone7() {
        if (userAgent.indexOf(deviceWinPhone7) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a Windows Mobile device.
     * Excludes Windows Phone 7 devices.
     * Focuses on Windows Mobile 6.xx and earlier.
     * @return detection of Windows Mobile
     */
    public boolean detectWindowsMobile() {
        //Exclude new Windows Phone 7.
        if (detectWindowsPhone7()) {
            return false;
        }
        //Most devices use 'Windows CE', but some report 'iemobile'
        //  and some older ones report as 'PIE' for Pocket IE.
        //  We also look for instances of HTC and Windows for many of their WinMo devices.
        if (userAgent.indexOf(deviceWinMob) != -1
                || userAgent.indexOf(deviceWinMob) != -1
                || userAgent.indexOf(deviceIeMob) != -1
                || userAgent.indexOf(enginePie) != -1
                || (userAgent.indexOf(manuHtc) != -1 && userAgent.indexOf(deviceWindows) != -1) 
                || (detectWapWml() && userAgent.indexOf(deviceWindows) != -1)) {
            return true;
        }

        //Test for Windows Mobile PPC but not old Macintosh PowerPC.
        if (userAgent.indexOf(devicePpc) != -1 &&
                !(userAgent.indexOf(deviceMacPpc) != -1))
            return true;

        return false;
    }

    /**
     * Detects if the current browser is any BlackBerry.
     * Includes the PlayBook.
     * @return detection of Blackberry
     */
    public boolean detectBlackBerry() {
        if (userAgent.indexOf(deviceBB) != -1 || 
            httpAccept.indexOf(vndRIM) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is on a BlackBerry tablet device.
     *    Example: PlayBook
     * @return detection of a Blackberry Tablet
     */
    public boolean detectBlackBerryTablet() {
        if (userAgent.indexOf(deviceBBPlaybook) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a BlackBerry device AND uses a
     *    WebKit-based browser. These are signatures for the new BlackBerry OS 6.
     *    Examples: Torch. Includes the Playbook.
     * @return detection of a Blackberry device with WebKit browser
     */
    public boolean detectBlackBerryWebKit() {
        if (detectBlackBerry() &&
            userAgent.indexOf(engineWebKit) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a BlackBerry Touch
     * device, such as the Storm, Torch, and Bold Touch. Excludes the Playbook.
     * @return detection of a Blackberry touchscreen device
     */
    public boolean detectBlackBerryTouch() {
        if (detectBlackBerry() &&
            (userAgent.indexOf(deviceBBStorm) != -1 ||
            userAgent.indexOf(deviceBBTorch) != -1 ||
            userAgent.indexOf(deviceBBBoldTouch) != -1 ||
                        userAgent.indexOf(deviceBBCurveTouch) != -1 )) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a BlackBerry device AND
     *   has a more capable recent browser. Excludes the Playbook.
     *   Examples, Storm, Bold, Tour, Curve2
     *   Excludes the new BlackBerry OS 6 and 7 browser!!
     * @return detection of a Blackberry device with a better browser
     */
    public boolean detectBlackBerryHigh() {
        //Disambiguate for BlackBerry OS 6 or 7 (WebKit) browser
        if (detectBlackBerryWebKit()) 
            return false;
        if (detectBlackBerry()) {
            if (detectBlackBerryTouch()
                    || userAgent.indexOf(deviceBBBold) != -1
                    || userAgent.indexOf(deviceBBTour) != -1
                    || userAgent.indexOf(deviceBBCurve) != -1) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }

    /**
     * Detects if the current browser is a BlackBerry device AND
     *   has an older, less capable browser.
     *   Examples: Pearl, 8800, Curve1
     * @return detection of a Blackberry device with a poorer browser
     */
    public boolean detectBlackBerryLow() {
        if (detectBlackBerry()) {
            //Assume that if it's not in the High tier, then it's Low
            if (detectBlackBerryHigh()
                    || detectBlackBerryWebKit()) {
                return false;
            } else {
                return true;
            }
        } else {
            return false;
        }
    }

    /**
     * Detects if the current browser is on a PalmOS device.
     * @return detection of a PalmOS device
     */
    public boolean detectPalmOS() {
        //Most devices nowadays report as 'Palm', but some older ones reported as Blazer or Xiino.
        if (userAgent.indexOf(devicePalm) != -1
                || userAgent.indexOf(engineBlazer) != -1
                || userAgent.indexOf(engineXiino) != -1) {
            //Make sure it's not WebOS first
            if (detectPalmWebOS()) {
                return false;
            } else {
                return true;
            }
        }
        return false;
    }

    /**
     * Detects if the current browser is on a Palm device
     *    running the new WebOS.
     * @return detection of a Palm WebOS device
     */
    public boolean detectPalmWebOS() {
        if (userAgent.indexOf(deviceWebOS) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is on an HP tablet running WebOS.
     * @return detection of an HP WebOS tablet
     */
    public boolean detectWebOSTablet() {
        if (userAgent.indexOf(deviceWebOShp) != -1 && 
                userAgent.indexOf(deviceTablet) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a
     *    Garmin Nuvifone.
     * @return detection of a Garmin Nuvifone
     */
    public boolean detectGarminNuvifone() {
        if (userAgent.indexOf(deviceNuvifone) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Check to see whether the device is any device
     *   in the 'smartphone' category.
     * @return detection of a general smartphone device
     */
    public boolean detectSmartphone() {
        return (isIphone 
                || isAndroidPhone
                || isTierIphone 
                || detectS60OssBrowser()
                || detectSymbianOS()
                || detectWindowsMobile()
                || detectWindowsPhone7()
                || detectBlackBerry()
                || detectPalmWebOS()
                || detectPalmOS()
                || detectGarminNuvifone());
    }

    /**
     * Detects whether the device is a Brew-powered device.
     * @return detection of a Brew device
     */
    public boolean detectBrewDevice() {
        if (userAgent.indexOf(deviceBrew) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects the Danger Hiptop device.
     * @return detection of a Danger Hiptop
     */
    public boolean detectDangerHiptop() {
        if (userAgent.indexOf(deviceDanger) != -1
                || userAgent.indexOf(deviceHiptop) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects Opera Mobile or Opera Mini.
     * @return detection of an Opera browser for a mobile device
     */
    public boolean detectOperaMobile() {
        if (userAgent.indexOf(engineOpera) != -1
                && (userAgent.indexOf(mini) != -1
                || userAgent.indexOf(mobi) != -1)) {
            return true;
        }
        return false;
    }

    /**
     * Detects Opera Mobile on an Android phone.
     * @return detection of an Opera browser on an Android phone
     */
    public boolean detectOperaAndroidPhone() {
        if (userAgent.indexOf(engineOpera) != -1
                && (userAgent.indexOf(deviceAndroid) != -1
                && userAgent.indexOf(mobi) != -1)) {
            return true;
        }
        return false;
    }

    /**
     * Detects Opera Mobile on an Android tablet.
     * @return detection of an Opera browser on an Android tablet
     */
    public boolean detectOperaAndroidTablet() {
        if (userAgent.indexOf(engineOpera) != -1
                && (userAgent.indexOf(deviceAndroid) != -1
                && userAgent.indexOf(deviceTablet) != -1)) {
            return true;
        }
        return false;
    }

    /**
     * Detects whether the device supports WAP or WML.
     * @return detection of a WAP- or WML-capable device
     */
    public boolean detectWapWml() {
        if (httpAccept.indexOf(vndwap) != -1
                || httpAccept.indexOf(wml) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an Amazon Kindle (eInk devices only).
     * Note: For the Kindle Fire, use the normal Android methods.
     * @return detection of a Kindle
     */
    public boolean detectKindle() {
        if (userAgent.indexOf(deviceKindle)!= -1 &&
            !detectAndroid()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current Amazon device is using the Silk Browser.
     * Note: Typically used by the the Kindle Fire.
     * @return detection of an Amazon Kindle Fire in Silk mode.
     */
    public boolean detectAmazonSilk() {
        if (userAgent.indexOf(engineSilk)  != -1) {
            return true;
        }
        return false;
    }

    /**
     *  Detects if the current device is a mobile device.
     *  This method catches most of the popular modern devices. 
     *  Excludes Apple iPads and other modern tablets.
     * @return detection of any mobile device using the quicker method
     */
    public boolean detectMobileQuick() {
        //Let's exclude tablets
        if (isTierTablet) {
            return false;
        }
        //Most mobile browsing is done on smartphones
        if (detectSmartphone()) {
            return true;
        }

        if (detectWapWml()
            || detectBrewDevice()
            || detectOperaMobile()) {
            return true;
        }

        if ((userAgent.indexOf(engineNetfront) != -1) 
            || (userAgent.indexOf(engineUpBrowser) != -1) 
            || (userAgent.indexOf(engineOpenWeb) != -1)) {
            return true;
        }

        if (detectDangerHiptop()
            || detectMidpCapable()
            || detectMaemoTablet()
            || detectArchos()) {
            return true;
        }

        if ((userAgent.indexOf(devicePda) != -1) &&
            (userAgent.indexOf(disUpdate) < 0)) //no index found
        {
            return true;
        }
        if (userAgent.indexOf(mobile) != -1) {
            return true;
        }

        //We also look for Kindle devices
        if (detectKindle()
                        || detectAmazonSilk()) {
            return true;
        }

        return false;
    }

    /**
     * Detects if the current device is a Sony Playstation.
     * @return detection of Sony Playstation
     */
    public boolean detectSonyPlaystation() {
        if (userAgent.indexOf(devicePlaystation) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is a Nintendo game device.
     * @return detection of Nintendo
     */
    public boolean detectNintendo() {
        if (userAgent.indexOf(deviceNintendo) != -1
                || userAgent.indexOf(deviceWii) != -1
                || userAgent.indexOf(deviceNintendoDs) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is a Microsoft Xbox.
     * @return detection of Xbox
     */
    public boolean detectXbox() {
        if (userAgent.indexOf(deviceXbox) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an Internet-capable game console.
     * @return detection of any Game Console
     */
    public boolean detectGameConsole() {
        if (detectSonyPlaystation()
                || detectNintendo()
                || detectXbox()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device supports MIDP, a mobile Java technology.
     * @return detection of a MIDP mobile Java-capable device
     */
    public boolean detectMidpCapable() {
        if (userAgent.indexOf(deviceMidp) != -1
                || httpAccept.indexOf(deviceMidp) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is on one of the Maemo-based Nokia Internet Tablets.
     * @return detection of a Maemo OS tablet
     */
    public boolean detectMaemoTablet() {
        if (userAgent.indexOf(maemo) != -1) {
            return true;
        } else if (userAgent.indexOf(linux) != -1
                && userAgent.indexOf(deviceTablet) != -1
                && !detectWebOSTablet()
                && !detectAndroid()) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current device is an Archos media player/Internet tablet.
     * @return detection of an Archos media player
     */
    public boolean detectArchos() {
        if (userAgent.indexOf(deviceArchos) != -1) {
            return true;
        }
        return false;
    }

    /**
     * Detects if the current browser is a Sony Mylo device.
     * @return detection of a Sony Mylo device
     */
    public boolean detectSonyMylo() {
        if (userAgent.indexOf(manuSony) != -1
                && (userAgent.indexOf(qtembedded) != -1
                || userAgent.indexOf(mylocom2) != -1)) {
            return true;
        }
        return false;
    }

    /**
     * The longer and more thorough way to detect for a mobile device.
     *   Will probably detect most feature phones,
     *   smartphone-class devices, Internet Tablets,
     *   Internet-enabled game consoles, etc.
     *   This ought to catch a lot of the more obscure and older devices, also --
     *   but no promises on thoroughness!
     * @return detection of any mobile device using the more thorough method
     */
    public boolean detectMobileLong() {
        if (detectMobileQuick()
                || detectGameConsole()
                || detectSonyMylo()) {
            return true;
        }

        //detect older phones from certain manufacturers and operators.
        if (userAgent.indexOf(uplink) != -1) {
            return true;
        }
        if (userAgent.indexOf(manuSonyEricsson) != -1) {
            return true;
        }
        if (userAgent.indexOf(manuericsson) != -1) {
            return true;
        }
        if (userAgent.indexOf(manuSamsung1) != -1) {
            return true;
        }

        if (userAgent.indexOf(svcDocomo) != -1) {
            return true;
        }
        if (userAgent.indexOf(svcKddi) != -1) {
            return true;
        }
        if (userAgent.indexOf(svcVodafone) != -1) {
            return true;
        }

        return false;
    }

    //*****************************
    // For Mobile Web Site Design
    //*****************************

    /**
     * The quick way to detect for a tier of devices.
     *   This method detects for the new generation of
     *   HTML 5 capable, larger screen tablets.
     *   Includes iPad, Android (e.g., Xoom), BB Playbook, WebOS, etc.
     * @return detection of any device in the Tablet Tier
     */
    public boolean detectTierTablet() {
        if (detectIpad()
                || detectAndroidTablet()
                || detectBlackBerryTablet()
                || detectWebOSTablet()) {
            return true;
        }
        return false;
    }

    /**
     * The quick way to detect for a tier of devices.
     *   This method detects for devices which can
     *   display iPhone-optimized web content.
     *   Includes iPhone, iPod Touch, Android, Windows Phone 7, Palm WebOS, etc.
     * @return detection of any device in the iPhone/Android/WP7/WebOS Tier
     */
    public boolean detectTierIphone() {
        if (isIphone
                || isAndroidPhone
                || (detectBlackBerryWebKit() 
                    && detectBlackBerryTouch())
        || detectWindowsPhone7()
                || detectPalmWebOS()
                || detectGarminNuvifone()) {
            return true;
        }
        return false;
    }

    /**
     * The quick way to detect for a tier of devices.
     *   This method detects for devices which are likely to be capable
     *   of viewing CSS content optimized for the iPhone,
     *   but may not necessarily support JavaScript.
     *   Excludes all iPhone Tier devices.
     * @return detection of any device in the 'Rich CSS' Tier
     */
    public boolean detectTierRichCss() {
        boolean result = false;
        //The following devices are explicitly ok.
        //Note: 'High' BlackBerry devices ONLY
        if (detectMobileQuick()) {

                        //Exclude iPhone Tier and e-Ink Kindle devices.
            if (!detectTierIphone() && !detectKindle()) {

                //The following devices are explicitly ok.
                //Note: 'High' BlackBerry devices ONLY
                //Older Windows 'Mobile' isn't good enough for iPhone Tier.
                if (detectWebkit()
                    || detectS60OssBrowser()
                    || detectBlackBerryHigh()
                    || detectWindowsMobile()
                    || userAgent.indexOf(engineTelecaQ) !=
                    -1) {
                       result= true;
                } // if detectWebkit()
            } //if !detectTierIphone()
        } //if detectMobileQuick()
        return result;
    }

    /**
     * The quick way to detect for a tier of devices.
     *   This method detects for all other types of phones,
     *   but excludes the iPhone and RichCSS Tier devices.
     * @return detection of a mobile device in the less capable tier 
     */
    public boolean detectTierOtherPhones() {
        //Exclude devices in the other 2 categories
        if (detectMobileLong() 
            && !detectTierIphone() 
            && !detectTierRichCss()) {
            return true;
        }
        return false;
    }
} 
```

安东尼·汉德非常欣赏的作品

# ios - 使用数据管理器单例管理核心数据对象

> ID：12207337
> 
> 赞同：0
> 
> 时间：2012-08-31T00:12:08.377
> 
> 标签：ios, objective-c, core-data, memory-management, singleton

我在 plist 中有一组项目。当我的应用程序启动时，我读入 plist 并将其作为数组保存在我的 DataManager 单例中，如下所示：

```
NSString *path = [[NSBundle mainBundle] bundlePath];

NSString *itemDatapath = [path stringByAppendingPathComponent:@"ItemData.plist"];
NSDictionary *itemData = [NSDictionary dictionaryWithContentsOfFile:itemDatapath];
dataManager.items = [itemData objectForKey:@"Items"]; 
```

我还想将与此数据关联的核心数据对象存储在 DataManger 中，因此我尝试了以下操作：

```
-(void)setItems:(NSArray *)_items //causes EXC_BAD_ACCESS error
{
self.items = _items;

NSManagedObjectContext *context = [self managedObjectContext];

for (NSDictionary *item in self.items)
{
    NSManagedObject *itemObject = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"Item"
                                   inManagedObjectContext:context];
    [itemObject setValue:[NSNumber numberWithInteger:[[item valueForKey:@"id"] intValue]] forKey:@"identifier"];
    [itemObject setValue:[UIImage imageNamed:[item valueForKey:@"image"]] forKey:@"image"];
    ...

}

NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
}
} 
```

关键是我的应用程序中的任何地方都可以通过此方法访问对象：

```
-(NSArray*)fetchItems
{
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Item" inManagedObjectContext:managedObjectContext];

NSError *error2;
NSFetchRequest *itemFetchRequest = [[NSFetchRequest alloc] init];
[itemFetchRequest setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"order"
                                                               ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[itemFetchRequest setSortDescriptors:sortDescriptors];

NSArray *fetchedItems = [managedObjectContext executeFetchRequest:itemFetchRequest error:&error2];

return fetchedItems;

} 
```

问题是上面提到的 EXC_BAD_ACCESS 错误。我也想知道是否有更好的方法来解决这个问题。我觉得在这里存储核心数据对象并不是最佳实践。但是，即使我在需要时在其他视图控制器中获取数据，如果核心数据对象发生更改，我如何管理更新它们？我有一个可能会改变的外部 plist，核心数据对象需要根据它进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:38:24.053

当您放入方法时，您会导致无限`self.items = _items`递归`setItems:`。self.items与调用 setItems**完全相同**——它们调用相同的方法。相反，您需要做的是设置您的实例变量的值 - 大概`items`。所以第一行`setItems:`应该是`items = _items`. 这本身也是令人困惑的，因为约定是在变量表示实例变量之前有 _。

# cryptography - 在 HMAC-SHA256 中使用 128 位密钥是否安全？

> ID：12207343
> 
> 赞同：6
> 
> 时间：2012-08-31T00:13:18.797
> 
> 标签：cryptography, hmac

Facebook 应用程序密钥是一个 32 个字符（0-9、af）的字符串，因此它表示一个 128 位字节数组。[Facebook 使用它作为使用 HMAC-SHA256 生成签名请求的密钥](https://developers.facebook.com/docs/authentication/signed_request/)。这是正确的用法吗？我认为 HMAC-SHA256 应该使用 256 位密钥。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T01:04:51.107

如果密钥的长度大于哈希的内部块大小，HMAC 将 HASH(key) 用作密钥。因此，大于哈希内部块大小的密钥不会提供比相同大小的密钥更好的安全性。根据 HMAC 规范，较短的密钥被零填充以等于散列的内部块大小。

在 HMAC-SHA-256 中使用 128 位密钥是不可能的。如果您的意思是 128 位用零填充到 512 位，那么对于短期身份验证来说可能没问题。我建议至少 256 位，理想情况下你会想要使用等于底层哈希的内部块大小的东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T00:52:35.173

该页面说 256 位[*签名*](http://en.wikipedia.org/wiki/Cryptographic_hash_function)来自*有效负载*（facebook 正在签名的内容）+您的 128 位[*salt*](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

所以是的，这听起来像是正确的用法。

秘密的 16 个字节（32 个字符）实际上并不是一个密钥，因为它用于加密和解密某些东西。相反，它是用于更改数字签名结果的一些数据（盐），通过非常轻微地更改输入，以便只有知道确切秘密和确切有效负载的人才能创建签名。

# php - 使用 40 个字符的密钥在 PHP 中加密为 AES256 CBC

> ID：12207350
> 
> 赞同：0
> 
> 时间：2012-08-31T00:14:28.180
> 
> 标签：php, ruby, encryption, cryptography, aes

我在尝试围绕 mcrypt_cbc 时遇到了一些麻烦。我有一个 40 个字符的密钥（OAuth 密钥 - 手动进行加密/签名而不是使用 OAuth 库）要使用，但我不确定我应该如何使用它。

最终结果需要是加密为 SHA256 CBC 的 json 对，并以 base64 编码。我有的是..

```
$key = '123456789012345678901234567890123456789012345678901234567890';
$pair = 'user:pass';
$encrypted = base64_encode(mcrypt_cbc(MCRYPT_RIJNDAEL_128,$key,$pair,MCRYPT_ENCRYPT,"")); 
```

我确定这是不对的，但我有以下问题：

如果我正确阅读了 PHP 文档，RIJNDAEL_128 可用于 SHA256 - 这是正确的吗？

对于 Key 和 IV .. 我也看到了以下内容：

```
$encrypted = base64_encode(mcrypt_cbc(MCRYPT_RIJNDAEL_128,substr($key,0,32),$pair,MCRYPT_ENCRYPT,substr($key,32,16))); 
```

我有点疑惑——前 32 个字符用于密钥，其余 16 个字符用于 IV？IV总是只是钥匙的一部分吗？这将如何为 40 个字符完成？使用 IV ...

```
substr($key,32,8) 
```

结果是

```
The IV parameter must be as long as the blocksize 
```

下面的 Ruby 代码是我引用的 API 的一个示例，但我对 Ruby 的了解为零

```
def encrypt_aes(data)
  sha_key = Digest::SHA2.digest(@secret_key)
  aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")    
  aes.encrypt
  aes.key = sha_key
  aes.iv = "\x00" * 16
  encrypted = aes.update(data) + aes.final
  Base64.encode64(encrypted)
end 
```

任何指导将不胜感激。过去我在 PHP 方面相当有经验，但总的来说，密码学一直是我最薄弱的领域。我在这方面的最大经验是在 c++ 中使用 Botan 库，仅此一项就归功于修改了各种片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:33:13.580

为了供其他从事此工作的人将来参考，这就是我的工作方式：

```
$CREDENTIALS = 'user:pass';
$SECRET_KEY = 'xxxx'; //40 character secret key

$key256 = @pack("H*" , @hash('sha256', $SECRET_KEY));
$encrypted_string = @base64_encode( openssl_encrypt( $CREDENTIALS, "aes-256-cbc", $key256, true) ); 
```

完成后，我可以将“凭据”参数以及其他必要参数添加到 URL 中，通过 base64 sha256 生成签名，然后将带有参数的签名发送到 api 服务器。

# sdk - SDK 2.0p3 网格：显示隐藏列

> ID：12207351
> 
> 赞同：1
> 
> 时间：2012-08-31T00:14:39.847
> 
> 标签：sdk, extjs4, rally

在 2.0p3 之前，用户可以选择显示隐藏列。

这在 2.0p3 中还有可能吗？似乎没有，但有没有启用此功能的选项？这个功能在以前的版本中很好，所以我希望它不会永久消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:19:32.683

我假设您正在谈论在网格的上下文中隐藏和显示列。

在添加网格配置时，必须添加以下配置：

```
gridConfig: {
    disableColumnMenus: false,
    // more config options go here...
} 
```

这将重新启用 ExtJS 在每个网格列上显示下拉菜单的默认设置。

在 SDK 2.0p3 中，由于功能不一致和较小的样式问题，我们默认禁用列下拉标题。我刚刚提交了一个关于这个问题的缺陷，以使列选择器与应用程序的其余部分（例如 Backlog 页面）更加一致。

# cross-platform - 有哪些库可用于在基于 C 预处理器宏的编译时检测平台/编译器？

> ID：12207353
> 
> 赞同：0
> 
> 时间：2012-08-31T00:14:57.047
> 
> 标签：cross-platform, c-preprocessor

我正在编写一些需要平台特定实现的跨平台 C++ 库。要为特定平台/编译器/等编译库，必须首先在编译时检测平台/编译器，并基于 C 预处理器宏。

到目前为止，我找到了两个库：

*   [时尚](http://poshlib.hookatooka.com/poshlib)
*   [预定义](http://sourceforge.net/p/predef/wiki/Home/)

**还有其他的吗？**我对可以检测 iOS/Android 平台的那些特别感兴趣，例如 Clang 编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:57:45.060

经过一些额外的搜索，我没有找到任何新的。

# c#-4.0 - ServiceName 未正确更改

> ID：12207355
> 
> 赞同：0
> 
> 时间：2012-08-31T00:15:11.070
> 
> 标签：c#-4.0, windows-services

我需要能够在一台机器上多次安装相同的服务。我有工作的那部分！但我也需要 ServiceName 不同。那部分不是。

下面是我的 Installer.cs 中的代码：

```
[RunInstaller(true)]
public partial class ProjectInstaller : System.Configuration.Install.Installer
{
    public ProjectInstaller()
    {
        InitializeComponent();
    }

    public override void Install(IDictionary stateSaver)
    {
        RetrieveServiceName();
        base.Install(stateSaver);
    }

    public override void Uninstall(IDictionary savedState)
    {
        RetrieveServiceName();
        base.Uninstall(savedState);
    }

    private void RetrieveServiceName()
    {
        var serviceName = Context.Parameters["servicename"];
        if(!string.IsNullOrEmpty(serviceName))
        {
            auditStreamServiceInstaller.ServiceName = serviceName;
            auditStreamServiceInstaller.DisplayName = serviceName;
        }
    }
} 
```

我使用以下 cmd 安装服务

```
C:\Windows\Microsoft.Net\Framework\v4.0.30319> installutil /servicename="AuditStream-NW" d:AuditStreamService.exe 
```

现在，如果我查看安装日志：

```
Affected parameters are:
   logtoconsole = 
   logfile = C:\AuditStreams\NW\AuditStreamService.InstallLog
   assemblypath = C:\AuditStreams\NW\AuditStreamService.exe
   servicename = AuditStream-NW 
```

这看起来是正确的，但是在我的服务的 OnStart 中，我有一行将 ServiceName 输出到个人日志文件。但它说 ServiceName 总是 AuditStreamService

在这种情况下，我希望能说 AuditStream-NW ......谁能看到我做错了什么？

**额外：** 我希望这些名称不同的原因是因为每个服务还创建一个 MemoryMappedFile，并且最初我设置了它，因此该非持久性 mmf 的名称始终`"AuditStream-" + HubName`是（在配置文件中确定），但现在是一个外部程序将通过读取 mmf 来监视服务正在做什么，但除了读取服务配置文件之外，外部应用程序不知道 mmf 的名称。我的目标是使所有名称都相同，`ServiceName = MMF Name = ServiceDisplayName`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:13:14.220

好的，事实证明我的安装过程很好，我只是不能在 OnStart() 中使用 this.ServiceName 变量，因为它将始终返回通用默认名称，而不是在安装期间选择的名称。以下代码是我用来获取真名的代码：

```
int myPid = Process.GetCurrentProcess().Id;
var services = ServiceController.GetServices();
foreach (var service in services)
{
    ManagementObject wmiService = new ManagementObject("Win32_Service.Name='" + service.ServiceName + "'");
    wmiService.Get();
    if (Convert.ToInt32(wmiService["ProcessId"]) == myPid)
        myServiceName = service.ServiceName;
} 
```

# php - imap_fetchbody 和剥离线下

> ID：12207358
> 
> 赞同：0
> 
> 时间：2012-08-31T00:16:17.063
> 
> 标签：php

我有一个脚本可以检查电子邮件并将它们放入数据库中。当编写和发送新电子邮件时，这可以正常工作。但是，如果我回复电子邮件 imap_fetchbody 不起作用并且它是空的。

我在哪里错了？

```
/* get information specific to this email */
$overview = imap_fetch_overview($inbox,$email_number,0);
$structure = imap_fetchstructure($inbox,$email_number);
$message = imap_fetchbody($inbox,$email_number,0);
$header = imap_headerinfo($inbox,$email_number);

//print_r($structure);

  //make sure emails are read or do nothing
if($overview[0]->seen = 'read'){  

//strip everything below line
$param="## In replies all text above this line is added to the ticket ##";
$strip_func = strpos($message, $param);
$message_new = substr($message,0,$strip_func );

  /* output the email body */
  $output.= '<div class="body">'.$message_new.'<br><br></div>'; 
```

如果我输出 $message 而不是 $message_new 那么在我开始剥离文本之前，所有内容都会显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:03:00.967

如果消息中根本不存在该行“在回复中...”，`strpos`则将返回 boolean `false`，当强制为整数时将为 0。

所以当你要求从 0 到该位置的子串时，你是在要求从 0 到 0 的子串，并且`$message_new`是空的。

在尝试基于它获取子字符串之前，请检查该行是否存在于邮件中。

```
$param="## In replies all text above this line is added to the ticket ##";
$strip_func = strpos($message, $param);
$message_new = ($strip_func === false) ? $message : substr($message,0,$strip_func); 
```

# python - Django：对象有序列表的高效模型

> ID：12207359
> 
> 赞同：3
> 
> 时间：2012-08-31T00:16:26.000
> 
> 标签：python, django, design-patterns, django-models

我有两个类：A 和 B。每个 A 都有一个有序的 B 排名，每个 B 都有一个有序的 As 排名。

我的模型.py：

```
class A(models.Model):
    name = models.CharField(max_length=200)
    ...

class B(models.Model):
    name = models.CharField(max_length=200)
    ...

class Ranking(models.Model):
    a = models.ForeignKey(A)
    b = models.ForeignKey(B)
    rankofa = models.IntegerField()
    rankofb = models.IntegerField() 
```

我需要做的例子：

*   找出 B 排名的 As 的数量。
*   依次遍历由特定 A 排名的所有 B 并评估 B 的某些属性。
*   转到 A 的排名最低的 B，并找到该 B 给该 A 的排名。

我想将排名设置为对象的数组/列表（或以某种方式不会继续进行昂贵的数据库调用），但不确定如何将其作为 Django 模型/数据库解决方案。

任何和所有的想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:53:05.647

您需要的是[中介 M2M 关系](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)

```
class Seller(models.Model):
    name = models.CharField(max_length=200)

class Customer(models.Model):
    name = models.CharField(max_length=200)
    feedbacks = models.ManyToManyField(Seller, through='Feedback', related_name='feedbacks')

class Feedback(models.Model):
    seller = models.ForeignKey(Seller)
    customer = models.ForeignKey(Customer)
    seller_feedback = models.IntegerField()
    customer_feedback = models.IntegerField() 
```

查找客户排名的卖家数量：

```
customer.feedbacks.all().count() 
```

依次遍历由特定卖家排名的所有客户并评估一些客户属性。

```
for customer in seller.feedbacks.all():
    do_something(customer) 
```

找到卖家排名最低的客户，然后找到该客户给该卖家的排名。

```
def lowes_feedback_response(seller):
    try:
        return models.Feedback.filter(seller=seller).order_by('-seller_feedback')[0].customer_feedback
    except models.Feedback.DoesNotExist:
        return None 
```

我没有评估代码，但你明白了基本的想法

# c# - c#读取xml文件

> ID：12207361
> 
> 赞同：3
> 
> 时间：2012-08-31T00:17:04.353
> 
> 标签：c#, .net, xml, xpath

我正在尝试`<thumbnail_large>http://b.vimeocdn.com/ts/235/662/23566238_640.jpg</thumbnail_large>`从创建的 xml 文件中的 thumbnail_large 元素中提取值。有没有办法在不遍历 who xml 文件的情况下提取该值？谢谢你的帮助。

```
<videos>
    <video>
        <id>6271487</id>
        <title>Spheres</title>
        <description>text</description>
        <url>http://vimeo.com/6271487</url>
        <thumbnail_small>http://b.vimeocdn.com/ts/235/662/23566238_100.jpg</thumbnail_small>
        <thumbnail_medium>http://b.vimeocdn.com/ts/235/662/23566238_200.jpg</thumbnail_medium>
        <thumbnail_large>http://b.vimeocdn.com/ts/235/662/23566238_640.jpg</thumbnail_large>
        <embed_privacy>anywhere</embed_privacy>
    </video>
</videos> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T00:27:13.993

是的，有，它被称为 XPath。尝试这个：

```
XmlDocument doc = new XmlDocument();
doc.Load(@"/path/to/file");
XmlNode node = doc.SelectSingleNode("/videos/video/thumbnail_large");
string URI = node.InnerText; 
```

至少这是我可以从这个格式不佳的文件中读取的内容。如果您使用两种不同的字母（视频详细信息和 HTML 标记），您应该考虑使用命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T00:19:45.273

看着：

1.  对于 .NET Framework 3.5+ --[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)
2.  否则：[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-31T00:33:34.120

```
string s=File.ReadAllText("My.xml");
List<string> urllist= new List<string>();
string val="<thumbnail_large>";
int start= s.IndexOf(val);
while(start!=-1)
{               
start = s.IndexOf(val,start+val.length);
int end = s.IndexOf("</thumbnail_large>",start);
urllist.add(s.Substring(start, end - start -1));
} 
```

# dojo - 如何在多列上查询 dgrid

> ID：12207364
> 
> 赞同：2
> 
> 时间：2012-08-31T00:17:27.700
> 
> 标签：dojo, dgrid

是否可以创建一个 dgrid 查询来搜索多个列上的正则表达式字符串？通常语法指定 {column1: "foo", column2: "foo"} 但它会查找 column1 和 column2 都是 "foo" 的行。但我想对两列使用相同的搜索字符串......这可能吗？我该怎么做？我需要像 {column1 || 第 2 列：“富”}。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T10:40:44.817

您可以编写自己的函数，正如我在对上一个问题的回答中提到的[那样是否可以像在 datagrid 中一样过滤 dgrid 中的数据](https://stackoverflow.com/questions/12010731/is-it-possible-to-filter-data-in-a-dgrid-like-you-can-in-a-datagrid-if-so-how)？

或者您可以使用[资源查询语言 (RQL)](https://github.com/kriszyp/rql)。

`dgrid`查询其存储，例如`dojo/store/Memory`，`dojo/store/util/SimpleQueryEngine`默认使用。您需要做的就是使用您选择的*QueryEngine*`store.queryEngine`来提供属性。在 RQL 的情况下，它看起来像这样（[来源](http://www.sitepen.com/blog/2010/11/02/resource-query-language-a-query-language-for-the-web-nosql/)）：

 *```
require(["dojo/store/Memory", "rql/js-array", "dgrid/OnDemandGrid"], function(Memory, rql, Grid) {

    var store = new Memory({ data: { /* some data here */}});
    store.queryEngine = rql.query;

    var grid = new Grid({
        store: store,
        columns: { /* some columns here */}
    }, "grid")

}); 
```

现在您可以使用 RQL 语法查询 dgrid。回答您的问题的查询：`(column1=foo|column2=foo)`。

请看看我的 jsFiddle ( [http://jsfiddle.net/phusick/VjJBT](http://jsfiddle.net/phusick/VjJBT/) )。随意使用 dgrid 本身（有一些预定义的查询）或 DOH 单元测试（打开 JS 控制台以查看输出）进行分叉和试验：

![在此处输入图像描述](../Images/dace5305c77b47f399fe2bb2a70daebe.png)*

# java - Liferay：如何使邮件不是事务性的

> ID：12207365
> 
> 赞同：0
> 
> 时间：2012-08-31T00:17:38.763
> 
> 标签：java, api, email, liferay

我一直在测试 MailService 并使用 setBccAdresses 或 setBulkAddresses，如果您通过 3 封看起来真实的邮件，第一个和最后一个真实邮件和中间虚构邮件，它不会发送三个中的任何一个，但是如果您使用真实的任何其他组合邮件，它完美地工作。

我怎样才能避免这种行为，所以如果服务器返回收件人错误，其他个别邮件会正常发送？

顺便问一下，将地址设置为 setBcc 或 setBulk 有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:39:45.240

好的，这是 JavaMail 的事情。

只放财产

```
mail.smtp.sendpartial=true 
```

在你的

```
ConfigPanel > Server: Server Administration > Mail > Manually specify Properties... 
```

文本区域

我仍然不知道 setBulkAddress 和 setBCC 之间的区别

# avfoundation - AVAssetWriter 抱怨来自 BlackMagic 强度的输入被压缩，因此无法编码

> ID：12207366
> 
> 赞同：5
> 
> 时间：2012-08-31T00:17:39.787
> 
> 标签：avfoundation, avcapturesession

我正在尝试构建一些东西，可以在 Mac 上实时捕获视频源并写出预分段的 mp4 块。它适用于某些相机，但不适用于其他相机。

设置如下。

一个`AVCaptureVideoDataOutput`有一个`AVCaptureVideoDataOutputSampleBufferDelegate`。

```
dispatch_queue_t sampleQueue = dispatch_queue_create("samples", NULL);
[videoOutput setSampleBufferDelegate: delegate queue: sampleQueue]; 
```

输出还涉及`AVCaptureSession`保存到文件并显示预览，并且一切正常。

在代表中，我有一个`AVAssetWriterInput`. 它是这样设置的：

```
NSDictionary
    *videoFormat = [NSDictionary dictionaryWithObjectsAndKeys:
        // Format options
        AVVideoCodecH264, AVVideoCodecKey,// h264
        [NSNumber numberWithInt: width], AVVideoWidthKey,
        [NSNumber numberWithInt: height], AVVideoHeightKey,
        // Encoder options
        [NSDictionary dictionaryWithObjectsAndKeys:
            [NSNumber numberWithInt: theQuality*1024], AVVideoAverageBitRateKey,// 256kbps
            [NSNumber numberWithInt: 30], AVVideoMaxKeyFrameIntervalKey,// write at least one keyframe every 30 frames
        nil], AVVideoCompressionPropertiesKey,
    nil],
 video = [[AVAssetWriterInput assetWriterInputWithMediaType: AVMediaTypeVideo outputSettings: videoFormat] retain];
[video setExpectsMediaDataInRealTime: YES]; 
```

有一种方法可以使用此委托写入文件：

```
writer = [[AVAssetWriter assetWriterWithURL: url fileType: AVFileTypeMPEG4 error: &error] retain];
[writer setShouldOptimizeForNetworkUse: YES];
[writer addInput: video]; 
```

现在在`captureData`委托的回调方法中，我处理采样数据的缓冲区，我这样做：

```
 if([video isReadyForMoreMediaData])
        [video appendSampleBuffer: sampleBuffer]; 
```

伟大的！这适用于我的 facetime 相机。现在我插入一个 BlackMagic Intensity 并使用它。

在这条线上：

```
 [video appendSampleBuffer: sampleBuffer]; 
```

我收到此错误：

```
*** -[AVAssetWriterInput appendSampleBuffer:] Input buffer must be in an uncompressed format when outputSettings is not nil 
```

我已经玩过`videoOutput`设置，但无济于事。文档似乎提到这是无法压缩的东西。像：

```
// not all at the same time, of course.
videoOutput.videoSettings = nil;
videoOutput.videoSettings = [NSDictionary dictionaryWithObject:@"avc1" forKey:AVVideoCodecKey]; 
```

最好的部分是，如果我禁用输出上的所有编码内容，它会告诉我不支持直通编码。甜的。

幸运的是，谷歌搜索此错误消息会导致零点击。如果有人可以在这里指出我的解决方案，我很想知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:17:00.553

sampleBuffer编解码器未解压时；即编解码器不是 yuvs 或 2vuy 或 RGB，则输出设置应为 nil。然后它不会对样本缓冲区进行转码，因为它已经被压缩了。

# java - Java Play2 - 智能缓存

> ID：12207368
> 
> 赞同：2
> 
> 时间：2012-08-31T00:18:03.250
> 
> 标签：java, caching, playframework-2.0

```
@Cached(key="homePage")
public static Result index() {
  return ok("Hello world");
} 
```

文档并没有告诉我太多关于智能缓存的信息。这真的是我所要做的吗？

如果内容发生变化怎么办？播放会自动更新缓存吗？

这似乎是真的。

更新1：

由于某种原因它不起作用

```
 @Cached(key="homePage")
    public static Result index() {
      Logger.info("" + Cache.get("homePage"));
      return ok("Hello world");
    } 
```

如果我理解正确，`Logger.info("" + Cache.get("homePage"));`应该只调用一次（如果缓存为空）。但是每次我刷新页面时都会调用它。结果也总是空的，所以它甚至不起作用。

有任何想法吗？

更新 2：

我尝试添加持续时间，例如：

```
@Cached(key="homePage",duration=3000) 
```

但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T07:28:01.187

我觉得问题是由于使用了@Cached 注释。实际上，如果您手动缓存该值，它可以工作，但是如果您使用注释（就像在文档中顺便描述的那样 - 它似乎不起作用。

下面的一段代码可以很容易地演示它：

```
 @Cached(key="page1")
  public static Result page1() {
      java.util.Date d = Calendar.getInstance().getTime();
      return ok(page.render(d.toString()));
  }

  public static Result page2() {
      Result result = (Result) Cache.get("page2");
      if ( result == null ) {
          java.util.Date d = Calendar.getInstance().getTime();
          result = ok(page.render(d.toString()));
          Cache.set("page2", result);
      }   
      return result;
  } 
```

与以下页面

```
@(date: String)
@date 
```

和路线

```
GET     /page1                      controllers.Application.page1()
GET     /page2                      controllers.Application.page2() 
```

如果你去`http://localhost:9000/page1`日期会在每次调用时改变，而如果你使用它会被有效地缓存`http://localhost:9000/page2`

这是某种解决方法，但它可以完成工作。

关于您的第一个问题“如果内容发生变化怎么办？播放会自动更新缓存吗？”，我认为情况并非如此，您必须手动从缓存中删除条目（如果您不想等待到期日期）。例如：

1.  您在缓存中放置了一个过期时间为 10 分钟的值
2.  另一个业务调用使缓存中的值过时，您希望立即通知用户，因此您必须立即从缓存中删除该值
3.  下次该值将不在缓存中，并将使用新数据重新计算

似乎从缓存中删除仅适用于 2.1 版（[ticket here](https://play.lighthouseapp.com/projects/82401/tickets/254-add-a-cacheapiremove-method)），解决方法是在缓存中放入具有相同键和 1 秒到期的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:04:07.363

@Cached 似乎[在 2.0.4 中被破坏，](https://github.com/playframework/Play20/blob/78bfc3a0754254eceee2dd2cb0d996267bf61494/framework/src/play/src/main/java/play/cache/Cached.java)并且可能也适用于较低版本。注意`@With(CachedAction.class)`已经不见了。[虽然它在当前的主](https://github.com/playframework/Play20/blob/master/framework/src/play-java/src/main/java/play/cache/Cached.java)服务器中是固定的:)

现在简单的解决方法是滚动你自己的@Cached 和 CachedAnnotation。只需从 master 复制并粘贴并添加到您的项目中：

*   [缓存的.java](https://github.com/playframework/Play20/blob/master/framework/src/play-java/src/main/java/play/cache/Cached.java)
*   [CachedAction.java](https://github.com/playframework/Play20/blob/master/framework/src/play-java/src/main/java/play/cache/CachedAction.java)

# android - 将 onclick 小部件更新添加到现有的 AlarmManager 触发更新

> ID：12207370
> 
> 赞同：1
> 
> 时间：2012-08-31T00:18:42.040
> 
> 标签：android, widget, onclick, broadcastreceiver, alarmmanager

我是 Android 开发的新手。我已经设法编写了一个使用警报管理器每 30 分钟更新一次的小部件。这部分工作正常。

我现在还想在我点击它时手动更新小部件（即通过广播触发相同的 OnReceive()，无论是通过重复警报还是点击）。

我希望它就像在末尾添加两行一样简单（如下所示），但是当我单击小部件时 onClick 不起作用。实现我想要做的最好的方法是什么？

```
@Override
public void onEnabled(Context context) {
    super.onEnabled(context);
    AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
    //Update after 30 minutes
    am.setInexactRepeating(AlarmManager.RTC, System.currentTimeMillis()+ 300, 18000000 , pi);

        //Update manually by Clicking widget (this part not working)    
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.my_widget_layout);         
    remoteViews.setOnClickPendingIntent(R.layout.my_widget_layout, pi); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:16:30.910

你在你的代码中混合`R.layout.my_widget_layout`和。`R.id.my_widget_layout`

应该注意，Android**`R.id.xyz`**对所有生成的小部件项使用引用的 ID，而**`R.layout.abc`**对于您的视图（布局）

我预计该错误是在线提出的：

```
remoteViews.setOnClickPendingIntent(R.id.my_widget_layout, pi); 
```

# android - 来自 Android 的 HTTP 补丁请求

> ID：12207373
> 
> 赞同：16
> 
> 时间：2012-08-31T00:18:48.090
> 
> 标签：android, http

我正在尝试从 Android 应用程序发出 HTTP Patch 请求，但无法弄清楚。HTTPUrlConnection 似乎不支持 PATCH。HttpPatch 似乎不在 Android 中包含的库中（[链接](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpPatch.html)）。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-31T00:47:11.127

如果绝对需要 Patch 方法，则必须将 Apache HttpClient 作为 jar 依赖项导入。这将在一定程度上增加您的应用程序的大小，但这应该不是一个大问题。

作为一种解决方法，您可以尝试在您的应用程序中包含此 java 代码：

```
/*
 * ====================================================================
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 *
 */

package org.apache.http.client.methods;

import java.net.URI;

import org.apache.http.annotation.NotThreadSafe;

/**
 * HTTP PATCH method.
 * <p>
 * The HTTP PATCH method is defined in <a
 * href="http://tools.ietf.org/html/rfc5789">RF5789</a>: <blockquote> The PATCH
 * method requests that a set of changes described in the request entity be
 * applied to the resource identified by the Request- URI. Differs from the PUT
 * method in the way the server processes the enclosed entity to modify the
 * resource identified by the Request-URI. In a PUT request, the enclosed entity
 * origin server, and the client is requesting that the stored version be
 * replaced. With PATCH, however, the enclosed entity contains a set of
 * instructions describing how a resource currently residing on the origin
 * server should be modified to produce a new version. </blockquote>
 * </p>
 *
 * @since 4.2
 */
@NotThreadSafe
public class HttpPatch extends HttpEntityEnclosingRequestBase {

    public final static String METHOD_NAME = "PATCH";

    public HttpPatch() {
        super();
    }

    public HttpPatch(final URI uri) {
        super();
        setURI(uri);
    }

    public HttpPatch(final String uri) {
        super();
        setURI(URI.create(uri));
    }

    @Override
    public String getMethod() {
        return METHOD_NAME;
    }

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-09T10:49:33.707

我们创建了自己的 HttpPatch 类，例如：

```
public class HttpPatch extends HttpPost {
    public static final String METHOD_PATCH = "PATCH";

    public HttpPatch(final String url) {
        super(url);
    }

    @Override
    public String getMethod() {
        return METHOD_PATCH;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-01T18:30:44.023

看起来 OkHttp 支持补丁

```
Request request = Request.Builder().url().patch().build(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-17T11:35:32.603

### 它令人惊叹。它的工作就像一个魅力。

使用 HttpPost 调用并将标头设置为

## httpost.setHeader("X-HTTP-Method-Override", "PATCH");

### 或者

只需复制并粘贴此代码

```
public static JSONObject makeRequestCheck(String hostname, String token,String proId,String taskGrpId, String taskId) throws Exception {

    SSLSocketFactory sslFactory = new SimpleSSLSocketFactory(null);
    sslFactory
            .setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory
            .getSocketFactory(), 80));
    registry.register(new Scheme("https", sslFactory, 443));
    ClientConnectionManager ccm = new ThreadSafeClientConnManager(params,
            registry);
    HttpClient client = new DefaultHttpClient(ccm, params);
    String hostnamee = hostname+"projects/"+proId+"/taskgroups/"+taskGrpId+"/tasks/"+taskId+"/complete";
    HttpPost httpost = new HttpPost(hostnamee);
    System.out.println(hostnamee);
//  StringEntity se = new StringEntity(jsonSignin.toString());

    HttpResponse response = null;
    try {
    //  httpost.setEntity(se);
        httpost.setHeader("X-HTTP-Method-Override", "PATCH");
        httpost.setHeader("Content-type", "application/json");
        httpost.setHeader("Accept", "*/*");
        httpost.setHeader("Accept-Encoding", "gzip, deflate");
        httpost.addHeader("Connection", "keep-alive");
        httpost.addHeader("Accept-Language", "en-GB,en-US;q=0.8,en;q=0.6");
        httpost.setHeader("User-Agent", "nnst");
        httpost.setHeader("Accept-Charset", "utf-8");
        if (token == "NV") {
        } else {
            httpost.setHeader("Authorization", "Token" + " " + token);
        }
        response = client.execute(httpost);

    } catch (Exception e) {
        System.out.println("::my Exception ::" + e);
    }
    if (response == null) {
        System.out.println("no data");
    }
    String output = EntityUtils.toString(response.getEntity());

    JSONObject jobj = new JSONObject(output);

    return jobj;
} 
```

# c# - 使用 MVC、WCF、EF 的应用程序架构

> ID：12207374
> 
> 赞同：5
> 
> 时间：2012-08-31T00:19:00.833
> 
> 标签：c#, asp.net, .net, entity-framework, architecture

我正在开发一个网络应用程序，后来我们也计划开发并提供它的移动应用程序。我不是一个很有经验的人，但只是根据我的理解计划拥有这个架构：

1.  MVC Web 项目前端，它将直接与 WCF 服务通信。
2.  服务器端验证将使用数据注释在 MVC 模型上完成，然后数据将传递到 WCF 层。使用客户会员提供者的安全性也将在 MVC 中实现。
3.  WCF 层也将像业务层一样工作。如果需要，它将与类库 DAL 进行通信。
4.  使用 EF 的 DAL 将与 SQL Server 通信*

**请提问**

1.  这种架构好吗？
2.  使用 WCF 作为业务层和服务层好吗？
3.  我们应该在哪一层实现哪些模式？
4.  数据验证和安全性是 MVC 正确的地方吗？

谢谢

**编辑** 5.**单元测试**好不好？或者为了更好的测试我应该做一些改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:34:51.363

您所描述的是一个非常现代且优秀的 Microsoft 服务器堆栈。

ASP.net MVC 非常适合您的 Web UI。如果您使用 asp.net MVC，您还应该查看业务层的 asp.net webapi（新）。

[http://www.asp.net/web-api](http://www.asp.net/web-api)

[http://weblogs.asp.net/scottgu/archive/2012/02/23/asp-net-web-api-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2012/02/23/asp-net-web-api-part-1.aspx)

SQL Server 和 EF 是相当标准的。如果您需要最终控制并且对直接 sql 感到满意，则另一种选择是纯 T-SQL。

将 Web UI (MVC) 与业务层 (web-api) 分离的另一个好处是，您可以分离角色并独立扩展，即使最初它们恰好位于同一角色/机器上。此外，客户端 html/javascript 代码可以对 web-api 进行 ajax 样式调用。因此，您需要“注册”（配置）web-api 服务器的端点。如果您稍后缩放/移动它，则没有代码更改 - 您的代码与第一天完全分离。

移动设备（如果是厚应用程序）可以直接使用 web-api。除非移动应用程序是使用嵌入式浏览器/javascript 解决方案的混合移动应用程序，否则它只是 MVC Web UI 的小型消费者。

对于测试，您可以在其自己的命令行进程中自行托管 web-api，并在可行的情况下模拟数据。这将允许您在没有后端的情况下验证 Web UI。通过拥有一个业务层（由 web api 公开），您还可以独立于 UI 验证后端和逻辑（应该是您的大部分逻辑）。

# android - Mapview 的折线

> ID：12207379
> 
> 赞同：0
> 
> 时间：2012-08-31T00:20:52.977
> 
> 标签：android, android-mapview

谷歌地图视图有什么类似于其他地图系统中存在的“折线”的东西吗？基本上它是位置的集合以及绘图信息（颜色重量等）。您用位置填充它并执行 Map.Children.Add(myPolyline) 并且您在地图上绘制了一条路线。我知道我可以使用 canvas.drawPath() 进行绘图，但我想确保在开始使用新应用程序之前使用最佳实践。谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:13:51.273

[您的问题看起来与此问题](https://stackoverflow.com/questions/5667728/android-polylines-maps-api)非常相似。

虽然我从来没有在 MapView 上画画，但似乎所有关于路径绘制的问题都指向[这个答案](https://stackoverflow.com/a/1939659/953105)。

# perl - 循环中替换s///中的变量不会改变？为什么？

> ID：12207387
> 
> 赞同：0
> 
> 时间：2012-08-31T00:23:00.470
> 
> 标签：perl

这让我发疯了。帮助？

在我看来，它就像在 Perl`foreach`循环中一样，替换模式之外的变量按预期更改，但替换模式内的变量“卡住”了。就好像当 perl`s///`在代码块中遇到替换模式时`foreach`，它会在循环中第一次插入替换模式的内容，然后再也不插入。

这是一些测试代码：

```
#!/usr/bin/perl

@replacements=("a", "b", "c");
@input=("xxletterxx");

foreach $replacement (@replacements) {
        foreach $line (@input) {
                $line=~s/xxletterxx/$replacement/g;
                print "R: $replacement\n";
                print "L: $line\n";
        }
} 
```

我认为它应该打印这个：

```
R: a   
L: a   
R: b   
L: b   
R: c   
L: c 
```

...但是它打印了这个：

```
R: a  
L: a  
R: b  
L: a  <--- Why isn't this 'b'?  
R: c  
L: a  <--- Why isn't this 'c'? 
```

请注意，“L”值在替换模式中仍然是“a”，即使在代码块的其他地方它随着`@replacements`?

这是为什么？

我觉得 Perl 突然坏了，或者我失去了理智。

看起来[这种 DOS 行为](https://stackoverflow.com/questions/3949978/why-does-this-batch-variable-never-change-even-when-set)几乎是在 perl 中发生的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T00:27:52.960

这个循环控制：

```
foreach $line (@input) 
```

`$line`的每个元素的别名，`@input`所以当你第一次进行替换时，你不仅改变了，而且也改变`$line`了`$input[0]`。之后，`xxletterxx`就消失了，因此不再发生替换，因为`/xxletterxx/`不匹配。

为了使其按您想要的方式工作，您需要通过迭代`@input`数组的克隆来打破别名：

```
foreach $line (@{[@input]}) 
```

或者在修改它之前复制`$line`到另一个变量，`$line`在循环体中视为只读：

```
foreach $line (@input) {
        $modifiedline = $line;
        $modifiedline=~s/xxletterxx/$replacement/g;
        print "R: $replacement\n";
        print "L: $modifiedline\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:40:03.640

正如霍布​​斯所说，问题是一旦你替换`xxletterxx`为`a`，模式不再匹配，因此不会发生替换。我不确定你的最终目标是什么，但这有效

```
#!/usr/bin/env perl

use warnings;
use strict;

my @replacements=("a", "b", "c");

foreach my $replacement (@replacements) {
  my $line = "xxletterxx";
  $line=~s/xxletterxx/$replacement/g;
  print "R: $replacement\n";
  print "L: $line\n";
} 
```

就像这个

```
#!/usr/bin/env perl

use warnings;
use strict;

my @replacements=("a", "b", "c");
my @lines = ("xxletterxx") x 3;

foreach my $replacement (@replacements) {
  my $line = shift @lines;
  $line=~s/xxletterxx/$replacement/g;
  print "R: $replacement\n";
  print "L: $line\n";
} 
```

加上我已经为你添加`strict`了`warnings`:-)

编辑：一个可能更有趣的例子是对最后一个的修改，对于每个替换尝试`@lines`依次更改每个元素，并在替换成功后停止。

```
#!/usr/bin/env perl

use warnings;
use strict;

my @replacements=("a", "b", "c");
my @lines = ("xxletterxx") x 3;

foreach my $replacement (@replacements) {
  foreach my $line (@lines) {
    last if $line=~s/xxletterxx/$replacement/g;
  }

  print "R: $replacement\n";
  print "A: @lines\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:28:37.543

没有`xxletterxx`可替换的`b`or`c`因为您已经将其替换为`a`.

# jquery - rails3-jquery-autocomplete 和 mongomapper 给出 NoMethodError 未定义的方法`table_name`

> ID：12207389
> 
> 赞同：0
> 
> 时间：2012-08-31T00:23:09.857
> 
> 标签：jquery, ruby-on-rails-3, autocomplete, mongomapper

我正在尝试使用[rails3-jquery-autocomplete 自动完成](https://github.com/crowdint/rails3-jquery-autocomplete)。我有使用 mongomapper 的 rails 应用程序并具有以下模型：

```
class Port
  include MongoMapper::Document
  set_collection_name "ports__status"
  key :device, String 
```

在我的控制器中，我有

```
class PortsController < ApplicationController
  autocomplete :port, :device 
```

我的任何路线都是：

```
resources :ports do
  get :autocomplete_port_device, :on :collection
end 
```

所以，在我看来，我有

```
<form class="uri_replace" method="get" action="/ports/%device%/">
  <input class="inline_replace" name="device" data-autocomplete="/ports/autocomplete_port_device"></input>
  <input type="submit">
</form> 
```

（我重写了`action`提交输入值以获得更“宁静”的查询界面）

所以我加载了页面，在我在表单中输入内容后我可以看到 ajax 请求......但是，我收到以下错误：

```
NoMethodError in PortsController#autocomplete_port_device

  undefined method `table_name' for Port:Class 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:25:57.557

`rails3-jquery-autocomplete`gem 可以与 MongoDB 一起使用，但前提是您使用gem `mongoid`，**而不是** `mongomapper`.

参考：[https ://github.com/crowdint/rails3-jquery-autocomplete#mongoid](https://github.com/crowdint/rails3-jquery-autocomplete#mongoid)

# css - CSS 定位一个 li

> ID：12207390
> 
> 赞同：0
> 
> 时间：2012-08-31T00:23:20.620
> 
> 标签：css

我是css新手，有人可以告诉我如何用子弹瞄准班级吗？

这是html：

```
<li><a href="#" class="drop"><strong>PRACTICE AREAS</strong></a>
    <div class="dropdown_1column align_right" style="left: 4px;">
        <div class="col_1">
        <ul>
            <li class="bullets"><a href="#">Employment Law</a></li>
            <li class="bullets"><a href="#">Civil Rights</a></li>
        </ul>  
    </div></div>
</li> 
```

这是我写的CSS：

```
#menu li.bullets {
    font-family: 'Tinos', serif;
    font-size:12px;
    color:#531517;
    background:url("../images/menubar/arrow_off.png") no-repeat;
    padding-left:15px;
    background-position: 0px 9px;
}

#menu li.bullets:hover {
    color:black;
    background-image: url(../images/menubar/arrow_on.png);
    background-repeat: no-repeat;
    background-position: 0px 9px;
} 
```

我正在尝试创建一个名为 .bullets 的类，我希望它生效

```
<li class="bullets"><a href="#">Employment Law</a></li> 
```

作为翻转开/关并让它显示开/关的箭头图像。有人可以告诉我我做错了什么吗？

PS：如果您需要查看更多内容，可以在这里找到该网站：http: [//gdisinc.com/barker/default.php](http://gdisinc.com/barker/default.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:25:36.393

您的 CSS 表明您的 li.bullets 类必须是 ID 为`menu`. 您应该添加`id="menu"`到封闭的 div 或`#menu`从 CSS 说明符中删除 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:30:32.410

`<li>`查看您列出的站点，您的标签看起来像是嵌套在`<ul>`带有 id 的“菜单”下。然而，在现场网站上，li 标签似乎没有“子弹”类

该 CSS 将应用于任何`<li>`嵌套在 ID 为“menu”的对象下的“bullets”类标签

例如：

```
<div id="menu">
  <ul>
    <li class="bullets">This will be affected</li>
    <li>This won't be</li>
  </ul>
</div> 
```

或者

```
<div>
  <ul id="menu">
    <li class="bullet">This will be affected</li>
  </ul>
  <ul>
    <li class="bullet">This won't be</li>
  </ul>
</div> 
```

话虽如此，您不应该使用与外观相关的类名（例如项目符号）。css 的全部意义在于将设计与内容分开，因此您希望您的类名具有功能性（例如“menuItem”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:34:50.943

这是因为稍后在您的 CSS（行：371）中您正在引用

```
#menu li ul li:hover {
    background: none;
    border: none;
    padding: 0;
    margin: 0;
} 
```

这是覆盖你的CSS。

将您的选择器更改为：

```
#menu li ul li.bullets:hover 
```

# vba - Powerpoint vba 更新幻灯片母版

> ID：12207391
> 
> 赞同：0
> 
> 时间：2012-08-31T00:23:22.783
> 
> 标签：vba, powerpoint

我有一个适度但不断增长的 PowerPoint 演示文稿集合（约 20 个），它们都基于同一张母版幻灯片。我想做的是确保如果我在任何这些文件上创建新布局或修改现有布局，我可以更新所有其他演示文稿以以编程方式反映这一点。这是我的尝试。我已经显示了它在该行上方生成的错误。

```
Sub UpdateTemplates()

Dim colFiles As New Collection
Dim vFile As Variant
Dim ppPres As Presentation

RecursiveDir colFiles, "C:\Users\Debra\Dropbox\School\Mathematics\Notes\Data", "*.pptm", True

For Each vFile In colFiles
    Debug.Print "Updating templates in " & vFile
    Set ppPres = Presentations.Open(vFile)
    ppPres.ApplyTemplate ("C:\Users\Debra\Dropbox\School\Mathematics\Notes\Topic Blank.potm")

Next vFile

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:00:56.220

*首先*，您似乎无法`SlideMaster`直接设置属性。但是，您可以尝试不同的方法。

如果要将模板设置为打开的演示文稿或对`Presentation`对象的引用：

```
ppPres.ApplyTemplate(ActivePresentation.FullName) 
```

如果要将模板设置为磁盘上的文件：

```
ppPres.ApplyTemplate("C:\PATH-TO-FILE.potx") 
```

*其次*，我不太了解您循环中的逻辑。首先，您获得要循环的文件列表，然后循环所有打开的演示文稿并在`vFile`每次没有匹配时打开文件一次？如果您打开了许多不相关的演示文稿，这将打开`vFile`几次。

我的建议：

1.  关闭所有打开的演示文稿
2.  环形`colFiles`
3.  使用命令设置模板`ApplyTemplate("C:\PATH-TO-FILE.potx")`（使用`ActivePresentation`有时会导致意外结果:-)）

# css - 自定义形状的饼图

> ID：12207393
> 
> 赞同：0
> 
> 时间：2012-08-31T00:23:39.247
> 
> 标签：css, html, graph, charts, svg

我正在尝试创建一个用 css 形成弧形的动态饼图。下图代表 100% 的数据：

![弧形饼图](../Images/b904343fe89c4699cc8c542e5b7ed40b.png)

我已经做了很多研究/谷歌搜索，我正在努力寻找可行的东西。

这看起来很接近：[http](http://blakek.us/labs/jquery/css3-pie-graph-timer/) ://blakek.us/labs/jquery/css3-pie-graph-timer/但我不知道如何从中得到一个半圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:43:06.947

看起来 Raphael 库是我需要的。这是一个小提琴：http: [//jsfiddle.net/VdTH4/228/](http://jsfiddle.net/VdTH4/228/)

# android - ICS 中的荒谬 SQLite 错误

> ID：12207394
> 
> 赞同：1
> 
> 时间：2012-08-31T00:23:40.677
> 
> 标签：android, sqlite, android-4.0-ice-cream-sandwich

我已经使用[此处](https://stackoverflow.com/questions/3548533/full-android-database-helper-class-for-existing-sqlite-database)的修改实现了[此处](https://stackoverflow.com/questions/6178582/own-sqlite-database-and-onupgrade)找到的代码。

这一切似乎在 Android 2.2 模拟器上运行良好，但是在实际的 ICS 设备和 Jellybean 模拟器上，我似乎得到了以下（奇怪的）错误：

android.database.sqlite.SQLiteException：无法将数据库从版本 300300 降级到 12

我的数据库版本不可能是 300300，我已经尝试删除并重新安装该应用程序，但似乎没有什么不同。关于为什么会发生这种情况的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:13:23.267

不久前我遇到了同样的问题。它似乎只发生在某些设备上，这些设备似乎编译了内置 SQLite 库，默认情况下打开了预写日志 (WAL)。

每当您尝试以只读模式打开数据库时，这都会导致问题，因为启用了 WAL 的数据库无法以只读模式打开。解决方案是避免使用任何试图以只读模式打开数据库的 SQLite API，例如 getReadableDatabase 或 SQLiteDatabase.OPEN_READONLY 标志。相反，只要在 Android 上打开 SQLite 数据库，请尝试使用 getWritableDatabase 或 SQLiteDatabase.OPEN_READWRITE 标志。

# java - FaceConverter 中的 NullPointException

> ID：12207402
> 
> 赞同：2
> 
> 时间：2012-08-31T00:24:36.627
> 
> 标签：java, jsf, netbeans

我使用 jpa 和 jsf 进行开发。我没有放置所有代码，因为它非常大，我在为 netebeans 7.2 生成的代码中有 NullPointException。我认为 netbeans 正在犯错误，但我无法修复它。

```
@FacesConverter(forClass = MaterialEntrada.class)
public static class MaterialEntradaControllerConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        MaterialEntradaController controller = (MaterialEntradaController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "materialEntradaController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Integer getKey(String value) {
        java.lang.Integer key;
        key = Integer.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Integer value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof MaterialEntrada) {
            MaterialEntrada o = (MaterialEntrada) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + MaterialEntrada.class.getName());
        }
    }
} 
```

该错误是由以下行引起的：

```
return controller.ejbFacade.find(getKey(value)); 
```

ejbFacate 为空，但控制器不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:35:30.110

发生的事情是控制器正在由 jsf 初始化，但 ejbfacade 不是。要么将执行此操作所需的代码添加到构造函数，要么创建一个 getter 以在调用时执行此操作。

# django - Heroku 上的 RabbitMQ

> ID：12207405
> 
> 赞同：1
> 
> 时间：2012-08-31T00:25:01.563
> 
> 标签：django, heroku, rabbitmq, celery

我正在构建一个 Django Web 应用程序，我打算安装在 Heroku 上，至少在本地，我将 RabbitMQ 与 Celery 一起使用。

截至 2012 年 8 月 31 日，RabbitMQ 作为 Heroku 插件处于私有测试阶段： [https ://addons.heroku.com/rabbitmq](https://addons.heroku.com/rabbitmq)

我正在查看文档，它们面向 Rails 应用程序，而不是在“cedar-stack”上运行的应用程序（所有 Django 应用程序都这样做）。见：[https ://devcenter.heroku.com/articles/rabbitmq](https://devcenter.heroku.com/articles/rabbitmq)

有谁知道是否有计划让 Heroku 的 RabbitMQ 能够在 cedar 堆栈上运行？

# joomla2.5 - 关闭 Joomla 中的自动语言切换

> ID：12207406
> 
> 赞同：1
> 
> 时间：2012-08-31T00:25:17.327
> 
> 标签：joomla2.5

我在 Joomla 2.5 上建立了多语言网站。一切都由手册和完美的工作。但是我想关闭自动语言切换。现在，如果具有特定语言的用户来到站点，他将被重定向到具有适当语言的页面。我想避免它，让用户自己选择语言。感谢您的关注。

# css - 圆角周围的透明区域阻止悬停

> ID：12207413
> 
> 赞同：1
> 
> 时间：2012-08-31T00:26:38.840
> 
> 标签：css

我设置了一些看起来像这样的东西：

[http://jsfiddle.net/NhAuJ/](http://jsfiddle.net/NhAuJ/)

问题是当您将鼠标悬停在圆圈的角落附近时，您无法将鼠标悬停在背景上，因为 div 是一个正方形并阻挡了它。我希望中间的圆形 div 是可点击的（我要在里面放一些东西），所以我不想阻止光标使用指针事件与它交互。

任何想法如何解决此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:36:45.533

据我所知，实现这一目标的唯一方法是通过 html5 画布。[http://jsfiddle.net/NhAuJ/3/](http://jsfiddle.net/NhAuJ/3/)

[http://www.html5canvastutorials.com/tutorials/html5-canvas-circles/](http://www.html5canvastutorials.com/tutorials/html5-canvas-circles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:15:49.247

好吧，我有点想通了。对于任何坚持这一点的人，我能做的最好的就是有一个更大的圆圈，然后在更大的圆圈内放置另一个圆圈作为它的孩子，即

```
<div class="big-circle">
   <div class="small-circle">

   </div>
</div> 
```

然后在大圆圈上将指针事件设置为无，在小圆圈上将其设置为自动。

```
.big-circle { 
   pointer-events: none;
}
.small-circle {
   pointer-events: auto;
} 
```

它不会完全解决问题，但会改善它。或者像奴隶所说的那样使用画布。

# javascript - 为什么这个请求不会跟随我的 Tornado 重定向？

> ID：12207416
> 
> 赞同：2
> 
> 时间：2012-08-31T00:27:35.303
> 
> 标签：javascript, jquery, python, post, tornado

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
<title>
Login page
</title>
</head>
<body>
<h1 style="font-family:Comic Sans Ms;text-align"="center";font-size:20pt;
color:#00FF00;>
Simple Login Page
</h1>
<form name="login">
Username<input type="text" name="userid"/>
Password<input type="password" name="pswrd"/>
<input type="button" onclick="check(this.form)" value="Login"/>
<input type="reset" value="Cancel"/>
</form>
<script language="javascript">
function check(form)
{
    $.ajax({
    type: 'POST',
    url: '/auth/login',
    data: { 
        'UserName': form.userid.value, 
        'Password': form.pswrd.value // <-- the $ sign in the parameter name seems unusual, I would avoid it
    },
    success: function(msg){
       console.log(msg);
    }
});
}
</script>
</body>
</html> 
```

Tornado 代码： 类 MainHandler(BaseHandler): @tornado.web.authenticated def get(self): self.render("index.html")

```
class AuthLoginHandler(BaseHandler):
    @tornado.web.asynchronous
    def get(self):
        self.render("login.html")

    def post(self):
        username = self.get_argument("UserName",strip = True)
        password = self.get_argument("Password",strip = True)
        user = auth_actions.do_login(db,username,password)
        if not user:
            raise tornado.web.HTTPError(500, "Authentication Failed")
        self.set_secure_cookie("user", tornado.escape.json_encode(user))
        self.redirect("/") 
```

我发送重定向请求，而不是浏览器重定向它只是在 msg 中获取 index.html 的 html 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:32:33.547

您正在使用 AJAX 检索页面，而不是命令。

想象一下，您打开了一个网页，然后您想从另一个页面获取数据。您在新选项卡中打开该页面，服务器端告诉它重定向到“/”，因此您会发现自己位于`index.html`第二个选项卡中，但第一个选项卡仍位于同一位置。

这正是您的 AJAX 正在做的事情。您已经告诉它获取页面的内容，并且当该页面发送重定向命令时，它只获取请求重定向到的页面的内容并返回它。

因此，AJAX 返回`200`成功的状态代码，而不是`301`重定向代码。更好的解决方案是让您的服务器回复独特的响应，浏览器可以正确识别和重定向。这方面的一个例子可能是输出一个简单的字符串，例如`redirect`，它永远不会在有效输出中单独出现。然后可以适当地更改 jQuery：

```
success: function(msg){
   if (msg=='redirect') {
      //Redirect to the index
   }
   else {
      console.log(msg);
   }
} 
```

如果合适，这将重定向，否则输出到日志。

# java - 访问受保护的成员

> ID：12207418
> 
> 赞同：2
> 
> 时间：2012-08-31T00:28:12.103
> 
> 标签：java, protected

我在类 Avo 包 ger1 中有一个实例变量，带有受保护的修饰符。

```
package ger1;  

public class Avo {  
    protected int i = 1;  
} 
```

然后我有一个类 Pai，它在包 ger2 中，扩展了 Avo 并通过实例访问变量，到目前为止正常......

```
package ger2;  

public class Pai extends Avo {  
    public Pai() {  
        i++  
    }  
} 
```

但是 Kathy Sierra 的书提到了受保护的成员，“一旦包外的子类继承了受保护的成员，该成员（由子类继承）对子类之外的任何代码都是私有的，除了子类。”

但是，如果我尝试通过 Pai 类的实例访问该成员，则它是允许的！但是 Filho 类必须在同一个 Avo 包中。为什么这个？这是正常的？

```
package ger1;  

import ger2.Pai;  

public class Filho {  
    public Filho() {  
        Pai pai = new Pai();  
        pai.i++;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:44:01.680

您的电话`pai.i++;`是在`ger1`包裹中进行的。

您的 protected int 值在`ger1`包中声明，含义同上。

**因此，`i`是可访问的，因为`protected`位于同一包中的所有类都可以访问值。**

要期待 Kathy Sierra 的书所写的案例，**只需将`Filho`类从`ger1`一个包移到`ger2`另一个包。**

这样您就会注意到`i`似乎无法访问:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:37:50.483

这是预期的行为。“受保护”意味着在子类中可见，即使它们位于单独的包中。

编辑：另请参阅这个问题 [在 Java 中，默认、公共、受保护和私有之间的区别](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)

# r - R：如何在 facet_grid 上使用 coord_cartesian 和自由范围的轴

> ID：12207419
> 
> 赞同：13
> 
> 时间：2012-08-31T00:28:29.953
> 
> 标签：r, ggplot2

考虑一些`facet_grid`情节

```
mt <- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) + geom_point() 
mt + facet_grid(vs ~ am, scales = "free") 
```

[![绘图](../Images/d0f00750318225404c1aedeca1ffd54d.png)](https://i.stack.imgur.com/Bs1Al.png)

想象一下，我只想放大**上面图中的第一行**，只显示 3 到 4 之间的 y 轴值。`coord_cartesian()`如果它们没有刻面或者我想放大所有图，我可以这样做，但是在这种情况下没有一个好的解决方案。我想我可以先对数据进行子集化，但这是有充分理由的禁忌（例如，会抛弃任何统计层等）。

（请注意，问题与此相关：[R：{ggplot2}：如何/我可以独立调整 facet_grid 图上的 x 轴限制？](https://stackoverflow.com/questions/6574188/r-ggplot2-how-can-i-independently-adjust-the-x-axis-limits-on-a-facet-grid)但那里的答案不适用于此目的。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-25T11:55:29.143

所以，这是一个老问题，但我想分享一种我发现的方法。最简单的似乎是在您的数据中添加人工点，例如在每个图的数据的左下角和右上角。将此信息放入单独的数据框中，然后使用参数 alpha=0 将其添加到带有 geom_point 的绘图中，以使点不可见。根据您的需要，将 facet_wrap 中的轴缩放设置为“free_x”或“free_y”。

现在 ggplot 分别缩放每个方面以适应您添加的不可见点。有点hacky，但效果很好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-31T22:56:01.307

旧帖子，但我一直在寻找相同的东西，但实际上找不到任何东西 - [也许这是一种使用 facet_grid() 为两个因变量设置 y 轴限制的方法

该解决方案不是很优雅/高效，但我认为它有效 - 基本上创建两个具有不同 coord_cartesian 调用的图并交换 grobs。

```
# library(ggplot2)
# library(gtable)

# Plot
mt <- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) + geom_point() 

# --------------------------------------------------------------------------------

p1 <- mt + facet_grid(vs ~ am, scales = "free") + coord_cartesian(ylim = c(1,6))
g1 <- ggplotGrob(p1)

p2 <- mt + facet_grid(vs ~ am, scales = "free") + coord_cartesian(ylim = c(3,5))
g2 <- ggplotGrob(p2)

# ----------------------------------------------------------
# Replace the upper panels and upper axis of p1 with that of p2
# Tweak panels of second plot - the upper panels
g1[["grobs"]][[6]] <- g2[["grobs"]][[6]]
g1[["grobs"]][[8]] <- g2[["grobs"]][[8]]

#Tweak axis
g1[["grobs"]][[4]] <- g2[["grobs"]][[4]]

grid.newpage()
grid.draw(g1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-27T06:36:48.123

我提出的解决方案基于[@user20650](https://stackoverflow.com/a/22773765/3915004)提供的答案。它的不同之处在于使用半自动过程来查找 grob`g1`中需要替换为`g2`.

```
# library(ggplot2)
# library(grid)

p1 <- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) + 
  geom_point() +
  facet_grid(vs ~ am)

# modify p1 by zooming as desired
p2 <- p1 + coord_cartesian(ylim = c(3,4)) + 
  theme_bw() + 
  theme(axis.text  = element_text(color="blue"),
        strip.text = element_text(color="blue"))

p1
p2 
```

现在我们修改顶面行的 y 轴限制。我们生成两个 grobs `g1`，并用来自 的相应元素`g2`替换面板和 y 轴。`g1``g2`

下面的代码根据元素的名称查找要替换的 grob 元素的索引。

```
g1 <- ggplotGrob(p1)
g2 <- ggplotGrob(p2)

# Replace the upper panels and upper axis of p1 with that of p2
# i.e. replace the corresponding grobs in g1 with the versions of g2
# Panel numbering goes row-wise from top left to bottom right
panels_to_replace_with_g2 <- c(1,2)

# To get names of grobs run: lapply(g1[["grobs"]],function(x) x$name)
# Use names of grobs to find out indices of g1[["grobs"]] of the panels we want to replace
# as well as for the axis ticks.
pattern_for_specific_panels <- 
  paste0("^panel-((",paste0(panels_to_replace_with_g2, collapse = ")|("),"))")
pattern_for_axes_ticks <- 
  "^GRID.absoluteGrob"

idx_panels_to_replace_from_g2 <- which(unlist(
  lapply(g1[["grobs"]], function(x) grepl(pattern_for_specific_panels, x$name))))
# > idx_panels_to_replace_from_g2
# [1] 2 4

idx_axesTicks <- which(unlist(
  lapply(g1[["grobs"]], function(x) grepl(pattern_for_axes_ticks, x$name))))

# Find out manually which of the defined axesTicks it is:
g_test <- g1
for (itr in idx_axesTicks) {
  g_test[["grobs"]][[itr]] <- g2[["grobs"]][[itr]]
  grid.newpage();grid.draw(g_test); grid.draw(textGrob(itr, just = "top"))
  Sys.sleep(1)
}
# We found out it is itr=10
idx_axesTicks_to_replace <- 10 
```

现在已经找到要替换的面板`idx_panels_to_replace_from_g2`的索引以及 y 轴元素的索引`idx_axesTicks_to_replace`。我们可以在下面替换它们。

```
# Replace panels
grid.newpage();grid.draw(g1)
for (iter in idx_panels_to_replace_from_g2) {
  g1[["grobs"]][[iter]] <- g2[["grobs"]][[iter]]
  grid.newpage();grid.draw(g1)
  Sys.sleep(1)
}

# Replace y-axis
g1[["grobs"]][[idx_axesTicks_to_replace]] <- g2[["grobs"]][[idx_axesTicks_to_replace]]

# Render plot
grid.newpage()
grid.draw(g1) 
```

如果绘图成功修改，您现在可以删除我们应用于 p2 的主题修改和文本颜色，以使更改更好地可见。

[![修改后的情节](../Images/a63127060c4c3dcfa66e615d48d9ce05.png)](https://i.stack.imgur.com/xLANA.png)

未来`TODO`：现在缺少的是增加y轴的宽度以尊重修改后的轴标签

# hibernate - 连接表的性能问题

> ID：12207423
> 
> 赞同：0
> 
> 时间：2012-08-31T00:29:04.990
> 
> 标签：hibernate, grails

我将 Grails 1.3.7 与休眠 1.3.7 与 MySQL 5.1 一起使用。我有以下（简化的）域对象：

```
class Document {
    String externalId
    Date date
    String url
    String title

    Map metadata = new HashMap()

    def propertyMissing(String key) { return   metadata[key] }
    def propertyMissing(String key, String value) { metadata[key] = value } 
} 
```

当我必须加载一堆这些文档以返回到客户端时，系统最终不得不为每个文档运行单独的查询以获取关联的元数据。这需要在一台合理的机器上花费数十秒来检索数百个文档及其元数据。不用说，这对于交互式使用来说太慢了。由于我的应用程序想要将所有数据加载到浏览器中以让用户对其进行操作，因此我无法将查询划分为“页面”。

目前，我正在运行的查询如下所示：

```
Document.executeQuery("select distinct p.document from Posting p where p.topic = :topic", [topic: topic]); 
```

然后，此查询会导致创建一堆`Document`实例，这需要很长时间。

Hibernate缓存配置如下：

```
hibernate {
    cache.use_second_level_cache=true
    cache.use_query_cache=true
    cache.provider_class='net.sf.ehcache.hibernate.EhCacheProvider'
} 
```

有问题的表格是：

```
mysql> describe document;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| version     | bigint(20)   | NO   |     | NULL    |                |
| date        | datetime     | YES  |     | NULL    |                |
| external_id | varchar(255) | NO   |     | NULL    |                |
| title       | longtext     | YES  |     | NULL    |                |
| url         | longtext     | NO   |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+

mysql> describe document_metadata;
+--------------+---------------+------+-----+---------+-------+
| Field        | Type          | Null | Key | Default | Extra |
+--------------+---------------+------+-----+---------+-------+
| metadata     | bigint(20)    | YES  |     | NULL    |       |
| metadata_idx | varchar(255)  | YES  |     | NULL    |       |
| metadata_elt | varchar(4096) | YES  |     | NULL    |       |
+--------------+---------------+------+-----+---------+-------+ 
```

除了直接转储元数据表和硬编码字段之外，`Document`我还能做些什么来提高代码的性能吗？

基因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:04:00.857

也许您可以使用本机 sql 调用优化数据检索操作

```
def sql = '''
  select distinct d.*, m.* 
  from 
    document d 
      join document_metadata m on m.metadata = d.id
      join post p on p.id = d.post_id
  where
    post.topic = :topic'''

def query = session.createSQLQuery(sql)
query.addEntity(com.yourdomain.Document.class)
query.setString("topic", "grails")
def documents = query.list() 
```

显然选择是不完整的，因为我在猜测帖子方案和关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:03:04.450

您可以尝试将元数据放在关联域类中，并依赖 Grails 的默认延迟加载关联。然后，您可以更快地加载每个核心信息，`Document`并且只加载特定的元数据访问`Document`。

```
class Document {
    // Core non-Map data

    DocumentMetadata metadata

    def propertyMissing(String key) { return metadata?.data?.get(key) }
    def propertyMissing(String key, String value) { 
        if (!metadata) { metadata = new DocumentMetadata() }
        metadata.data[key] = value
    }
}

class DocumentMetadata {
    Map data = new HashMap()
} 
```

# asp.net-mvc - 我应该如何在 Web 应用程序中限定实体框架 DbContext 的依赖注入？（InstancePerHttpRequest 与 SingleInstance）

> ID：12207424
> 
> 赞同：6
> 
> 时间：2012-08-31T00:29:07.687
> 
> 标签：asp.net-mvc, model-view-controller, autofac, dbcontext, single-instance

我已经读过 DbContext 对象应该创建为 InstancePerHttpRequest，而不是 SingleInstance，因为它的线程不安全性质，并且它可能在请求之间消耗太多资源，这很有意义。但我正在使用使用 DbContext 实例的 Repository 对象。我应该将它们设为 InstancePerHttpRequest 还是将它们设为 SingleInstance 并使用 DependencyResolver 来获取当前的 DbContext。

对于 Autofac（或任何其他 DI）、DbContext、存储库和基于服务的 Web 应用程序，最好的对象创建设计是什么？

另一个问题是，为每个 Web 请求（如请求中的 10-15 个）为每个存储库或服务创建不同的 DbContext 对象有多昂贵？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T00:39:47.783

DbContext 实例化非常便宜，所以我不会太担心获得新的时间。

我在 DbContext 的范围内遇到的问题与其说是线程安全，不如说是查询隔离。因为任何人都可以调用保存更改并将整个对象图提交到数据库，所以您要确保仅在具有特定更改的上下文中调用它。

关于 DbContext 要了解的另一个关键是，它跟踪的项目越多，性能就会下降。这意味着如果你将它绑定在单例中，你可能会导致一些非常严重的性能问题。（有一些方法可以解决这个问题，但知道我在**[这里](http://blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html)**的帖子真的很好）

我个人对 Web 应用程序的偏好是将上下文和存储库绑定在 HttpRequest 的范围内。这意味着只有您当前的请求线程才能保存更改，并且还限制了您可能跟踪的项目数量。

抱歉，我的一些术语可能与 autofac 不匹配，因为我自己是一个 ninject 人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:31:41.937

DbContext is your Unit of Work, and is thus never suited for SingleInstance scope. Treat it as such. Sometimes a request maps directly to a UoW, but not necessarily always. Consider this before you scope it to the request.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:51:43.140

DbContext is cheap to instantiate, so I would design it such that each service gets its own instance. 10-15 per request is fine, unless you encounter a problem you can trace back to the number of DbContexts instantiated. Anything else smells like pre-mature optimization to me.

I tried to stay DI agnostic, as I primarily use StructureMap.

# php - 被覆盖的图像

> ID：12207425
> 
> 赞同：-1
> 
> 时间：2012-08-31T00:29:10.090
> 
> 标签：php, image

在我的**upload-image1.php**的 1 中，我在这里得到了这段代码，但我认为我遗漏了一些东西，因为当我两次上传相同的图像时，它只会覆盖它不会重命名的图像。有没有我可以添加的代码来防止这种情况发生。如果还有其他文件需要你们查看，请告诉我，我会发布。它来自使用自定义上传的 WordPress 主题。

```
<?php 
$MAXIMUM_FILESIZE = 5 * 1024 * 1024; 
$uploaddir = './uploads/image/small_image/'; 
$file = $uploaddir . basename($_FILES['image1']['name']); 
$raw_file_name= $_FILES['image1']['tmp_name'];
list($width, $height) = getimagesize($_FILES['image1']['tmp_name']);
if ($width==80 && $height==80) {
    if (move_uploaded_file($_FILES['image1']['tmp_name'], $file)) { 
        echo "success";
    } 
    else {
        echo "error";
    }
}
else {
    echo "size_error";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:53:52.910

`move_uploaded_file`预计会覆盖现有文件：[PHP 文档](http://www.php.net/manual/en/function.move-uploaded-file.php)（请参阅警告部分）。

如果要阻止它，请在文件名中添加一些内容：

```
$file = $uploaddir.time()."_".basename($_FILES['image1']['name']); 
```

当然，您可以`time()`用许多其他选项替换：上传用户 ID`date("Ymd_His")`等。

# io - Amazon EC2 和 Linode 之间的性能差异

> ID：12207426
> 
> 赞同：6
> 
> 时间：2012-08-31T00:29:13.553
> 
> 标签：io, amazon-ec2, amazon, cpu, linode

根据我的发现，只是对 EC2 和 Linode 之间的区别感兴趣。我意识到有一百万件事情会出错。只是想知道从哪里开始。

我一直在对我的博客登录页面的请求进行计时（通过 Apache Benchmark）。它有大约 22 个 sql 查询和相当数量的 html。我在两台服务器上设置了完全相同的站点。

Web1 - 托管在 Linode（512 大小 VPS）。

Web2 - 托管在亚马逊（微型 VPS）。

然后我测试了对两者的 100 个并发连接。我首先运行测试以预热数据库，然后真正运行它。

**Web1 - 每秒 33 个请求。**

**Web2 - 每秒 5 个请求。**

然后我安装了页面缓存。这是它将完整的 html 返回存储在文件中的位置。因此，它不会通过 PHP 控制器进行数据库连接，而是返回静态 html 文件。

**Web1 - 每秒 32 个请求。**

**Web2 - 每秒 88 个请求。**

您会注意到文件缓存在 Web1 上并没有真正发挥作用。似乎数据库/PHP返回速度很快，只需打开一个文件并返回它。您会注意到在 Web2 上，与第一个请求相比，它变得非常快。

我一整天都做了很多次这些测量。这不是一次性的问题。

* * *

这是我所知道的。

*   两个系统都是一样的。当我使用相同的部署脚本配置它们时。
*   Web2 (Amazon) 很可能在 SAN（文件系统）上运行。
*   Web1 (Linode) 很可能从本地硬盘驱动器（文件系统）运行。
*   不知道它背后的CPU是什么。我会假设它们是不同的CPU。我无法想象CPU有很大的不同。

* * *

我真的很想知道是什么让 Web2 在没有缓存的情况下如此缓慢，而在有缓存的情况下却非常快，而 Web1 两种方式都是一样的。

你有什么想法？处理器，IO？

你会做什么来追踪瓶颈？

我没有看到任何疯狂的负载（带有“w”）。不是 100% 在“iostat”中有价值的东西（至于我应该看的东西）。

* * *

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:51:05.547

所以我想通了。

瘸。但是如果你在亚马逊有一个微型实例，它们会限制你的 CPU。因此，当我尝试使用并发连接进行多次连接时，它们限制了我的 CPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:57:45.270

似乎 EC2 很慢。除非你是一个大网站并且需要大量的扩展。

我找到了[https://www.digitalocean.com](https://www.digitalocean.com)。在比较 EC2 微实例时，它们似乎非常棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:11:38.230

一个可能的因素是，与标准 HDD 相比，EC2 EBS 卷往往非常慢（与 SSD 相比甚至更慢）。

[请参阅此 SO Q&A。](https://stackoverflow.com/questions/278776/amazon-ec2-sql-performance) [而这个批评（从SO链接链接到）。](http://www.brentozar.com/archive/2008/11/bad-storage-performance-on-amazon-ec2-windows-servers/)

这可能不是缓慢的全部原因，但如果 Linode 选项使用真正的 HDD，这至少是部分原因。

# javascript - Javascript修改当前URL？

> ID：12207431
> 
> 赞同：1
> 
> 时间：2012-08-31T00:30:04.863
> 
> 标签：javascript, url

我正在尝试编写一个 javascript 来检测当前页面是否包含“？” 在 url 中，如果是，则将 url 中的所有内容都放在“？” 然后用这个新的 url 重新加载窗口。我试过这个：

```
var curr_url = window.location.toString();
if (curr_url.indexOf('?')!== -1){
    var goodpart = curr_url.split('?');
    //alert(goodpart[0]);
    window.location = goodpart[0];
} 
```

但这似乎不起作用。要么它对某些页面没有任何作用，要么它可以工作，但会一遍又一遍地重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:37:05.903

```
if (location.search)
{
    location.href = location.protocol + "//" + location.host + location.pathname;
} 
```

这应该重新加载到当前 URL 减去任何查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:40:52.853

```
var new_url     = (window.location+'').replace(/\?.*/,'');
window.location = new_url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:38:20.657

```
document.location.href=goodpart[0]; 
```

# r - 如何将 pajek .paj 文件导入 igraph for R？

> ID：12207432
> 
> 赞同：2
> 
> 时间：2012-08-31T00:30:12.930
> 
> 标签：r, graph, import, igraph, sna

[本教程](http://igraph.sourceforge.net/igraphbook/igraphbook-foreign.html)和[包文档](http://igraph.sourceforge.net/doc/R/read.graph.html)描述了如何处理 .net 格式的 pajek 文件，但我需要导入 .paj 文件。我不希望有可以导入所有 .paj 文件的代码，但也许有人的代码可以用于一些更简单的代码，然后我可以根据我的目的进行修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:15:02.943

我将从以下方法开始：

1.  使用 读取整个文件`readLines()`。
2.  删除注释行，以 ' `%`' 开头的行。
3.  将线条切成片，以星号（' `*`'）开头的线条标志着新片的开始。
4.  按照出现的顺序检查每个部分，并将它们转换为适当的 R 数据结构。

在第 4 步中，您可能有几种类型的片段：

*   `*Network`是网络的开始。
*   `*Vertices`定义顶点并属于前一个网络。
*   `*Edges`定义无向边，属于前一个网络。
*   `*Arcs`定义有向边，属于前一个网络。
*   `*Partition`是一个分区的开始。
*   `*Vector`是向量的开始。

要将一个片段转换为 igraph 图，请将其与紧随其后的,和/或片段`*Network`粘合在一起，然后通过. 这样您就不需要创建临时文件。`*Vertices``*Edges``*Arcs``read.graph(..., format="pajek")``textConnection()`

和部分很简单`*Partition`，`*Vector`只需将它们转换为 R 向量，使用`scan()`and `textConnection()`。

我还没有尝试过这一切，但我认为这并不太难，应该可以正常工作。告诉我你是否有任何困难。

此外，Pajek 文件格式的文档记录很差，所以我可能错了，可能还有其他片段类型等。

您还可以考虑在[igraph 错误跟踪器](http://bugs.launchpad.net/igraph)中添加错误报告以请求此功能。

# javascript - 将 setTimeout() 包装器实现为 Element.prototype 中的方法

> ID：12207437
> 
> 赞同：0
> 
> 时间：2012-08-31T00:30:51.030
> 
> 标签：javascript, settimeout

我正在尝试向 Element.prototype 添加一个方法，该方法将`this`通过系统 setTimeout() 调用与当前对象相同的用户函数。我的实现如下所示：

```
Element.prototype.timeout =
    function (func, delay)
    {
        var that = this;
        return setTimeout(function () { func.call(that) }, delay);
    } 
```

有没有更有效或更优雅的方式来做到这一点？

（请不要使用 jQuery）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:46:50.793

如果您真的想避免使用 lambda 函数，可以执行以下操作：

```
Function.prototype.delay = function (delay, context) {
  this.self = context;
  this.args = Array.prototype.slice.call(arguments, 2);
  return setTimeout(this, delay);
};

(function () {
  var self = arguments.callee.self || this;
  var args = arguments.callee.args || Array.prototype.slice.call(arguments);
  alert(args[0]);
}).delay(1500, null, 42); 
```

但是这样做很丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:35:40.367

我能想到的唯一另一件事就是让它成为这样的实用函数，您可以将其与任何对象上的任何函数或方法一起使用：

```
function delayMethod(obj, method, delay) {
    setTimeout(function() {
        method.call(obj);
    }, delay);
} 
```

或者，使用可变数量的参数更具可扩展性：

```
function delayMethod(obj, method, delay /* args to method go here */) {
    var args = [].slice.call(arguments, 3);
    setTimeout(function() {
        method.apply(obj, args);
    }, delay);
} 
```

# mysql - 防止mysql注入和xss攻击

> ID：12207440
> 
> 赞同：0
> 
> 时间：2012-08-31T00:30:58.893
> 
> 标签：mysql, xss, code-injection

我正在寻找一个很好的解决方案来防止mysql注入和xss攻击。我已经阅读了很多主题，但对我来说还不清楚。

我只想允许一些 bb 代码，如 [b]、[i]、[u]。就这样。

你能告诉我这是否可以：

```
<?php
$escape = array('input_one','input_two','get_ids_from_url','etc');

foreach($escape as $input)
{
    if(isset($_POST[$input])) 
    {$_POST[$input] = mysql_real_escape_string(htmlspecialchars(strip_tags($_POST[$input]), ENT_QUOTES, 'utf-8'));}
    if(isset($_GET[$input])) 
    {$_GET[$input] = mysql_real_escape_string(htmlspecialchars(strip_tags($_GET[$input]), ENT_QUOTES, 'utf-8'));}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:33:43.653

您在这里所做的是转义输入以用于两种不同的用途：HTML 和 MySQL。不要那样做；魔术引号被删除是有原因的。

您应该做的是转义实际使用变量的位置，并且在数据库访问的情况下，使用 PDO 或 MySQLi 而不是几乎不推荐使用且通常很糟糕`mysql_`的函数系列。

# php - php循环遍历数据记录

> ID：12207451
> 
> 赞同：0
> 
> 时间：2012-08-31T00:33:29.173
> 
> 标签：php, arrays, loops

我想遍历我的数据集。我想要 5 行 8 个单元格。我似乎无法理解如何做到这一点。我的代码只是重复我的数据集中的每个项目。

我是否需要做这样的事情 $row['URL'][0]

```
while($row = mysql_fetch_array($result))
   {
   echo "<tr>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
   echo "</tr>";
   }
 echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T00:46:57.883

首先，您应该限制 sql 查询中的结果集并切换到 PDO 或 mysqli，因为这些`mysql_*`函数已被弃用。

然后您可以执行以下操作：

```
echo '<table><tr>';
$count = 0;
while (...)
{
  $count++;   
  echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
  if ($count % 5 === 0)
  {
    echo '</tr><tr>';
  }
}
echo ' </tr></table>'; 
```

您可能需要稍微整理一下以完成最后一行并避免最后出现空行，但这只是一个总体思路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:36:58.540

试过：

```
echo "<tr>";
while($row = mysql_fetch_array($result))
{
   echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "'/></a></td>";
}
echo "</tr>";
echo "</table>"; 
```

?

说明：`mysql_fetch_array`每个循环返回一个结果。因此，您为每个循环打印一次结果，而不是一个循环中的每个人。

# c++ - 如何将 Unicode CString（日文）打印到文本文件中？

> ID：12207462
> 
> 赞同：1
> 
> 时间：2012-08-31T00:34:51.480
> 
> 标签：c++, file, unicode, mfc, wofstream

这对我来说似乎是一个艰难的过程。我有这段代码可以将 CString 打印到文本文件中，但该值恰好是 Unicode（日语）。一旦这条线被击中，它下面的任何东西都不会被打印出来。

知道如何在文本文件中打印日文文本吗？

```
#define OFSTREAM std::wofstream

OFSTREAM *outfile;
outfile = new OFSTREAM;
outfile->open (filename, ios::out);

CString varName = _T(" ");
/*stuff*/
*outfile << _T("  Name: ") << (LPCTSTR)varName << _T("\n"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:16:46.680

流停止工作的原因是设置了失败位。您没有处理错误，因此流停止工作。发生错误时需要清除失败位。

必须设置 wostream 对象的语言环境，以便 codecvt 方面处理将日语宽字符转换为字节。默认情况下，使用“C”语言环境，在 VS 中仅支持 ASCII 字符。如果您只需要编写文件以在日文版本的 Windows 上工作，您可以执行以下操作：

```
std::wofstream outfile(filename, ios::out);
outfile.imbue(std::locale("")); // use the system locale

CString varName = _T(" ");
/*stuff*/
outfile << L"  Name: " << (LPCTSTR)varName << L"\n"; 
```

或者您可以在 Windows 上指定日语语言环境：

```
outfile.imbue(std::locale("Japanese")); // use the japanese locale on any Windows system 
```

这两种方法都使用传统的日语语言环境编码，应该避免这种情况。您可以改用 UTF-8：

```
// replace just the codecvt facet of the stream's current locale
outfile.imbue(std::locale(outfile.getloc(), new std::codecvt_utf8_utf16<wchar_t>())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:56:24.103

在这种情况下，Unicode 可能是指 UTF16。根据您用于查看文件的编辑器，您可能需要在文件的开头放置一个字节顺序标记 (BOM)，以便正确猜测编码和字节顺序。否则，您需要在查看文件时显式设置编码。

但是，您的问题表明您在文件中的日文文本之前有文本。如果你把它作为非宽字符串输出，那就是问题所在。不要混合。如果所有文本都很宽，您可能只是无法在您选择的编辑器中显示日文字符，或者没有在 Windows 中安装对亚洲语言的支持。

Firefox 通常很好地支持外来字符。将文件拖到那里，检查编码，看看你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T02:44:32.323

如果您使用的是 Visual Studio，请转到您的 C++ 项目设置并将语言选项设置为使用 Unicode 而不是 ANSI。然后 Visual Studio 会自动定义宏 UNICODE 和 _UNICODE，你不应该自己定义它们。您可能需要调用 setlocale，以便 VC++ 库将内存中的 Unicode 字符串转换为文本文件中的多字节 ANSI 字符串，而不是丢失第一个非 ASCII 字符之后的所有内容。

如果您在 MFC 中使用其他编译器，那么我想您必须自己定义宏 UNICODE 和 _UNICODE，我不确定您还需要做什么。

如果您希望您的文本文件包含 Unicode 而不是多字节 ANSI，那么您不希望 VC++ 库转换它们，但您必须做其他事情。[查看 MSDN 页面wofstream](http://msdn.microsoft.com/en-us/library/f1d6b0fk%28VS.80%29.aspx)的社区内容部分。

# javascript - 变量保持在一个值

> ID：12207471
> 
> 赞同：0
> 
> 时间：2012-08-31T00:36:13.137
> 
> 标签：javascript

我有一个循环，我试图用他们自己的 ID 号进行 onclicks，但它会不断更新到循环中的最后一个数字 - 我想知道如何通过写入变量来阻止它，以便他们保留自己的数字？

这就是我所拥有的：

```
count = 0;
for(i in my_array){ 
    if(my_array[i][2])){ //if the data value is true
        document.getElementById('div_id_'+count).onclick = function()
        {
            alert(i);
        };
    count++;
    }   
} 
```

事情是 alert(i) 总是显示 my_array 的最后一个值......所以我想知道我怎样才能阻止它每次都写，这样每个 div 都可以解析自己的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T00:47:14.913

您遇到了 Closure 的问题。这是一个棘手的话题。看看这个网址：[http ://code.google.com/apis/ajax/playground/#closure_for_events](http://code.google.com/apis/ajax/playground/#closure_for_events)

基本上，`i`当您单击元素时会评估该值；不是在您分配事件时，因此此时`i`将其设置为循环中的最后一个值。您需要创建一个单独的函数来绑定到带有`i`参数的 click 事件。一个例子：

```
function HandleClick(i){
  return function() { alert(i); };
}

count = 0;
for(i in my_array){ 
    if(my_array[i][2])){ //if the data value is true
        document.getElementById('div_id_'+count).onclick = HandleClick(i);
    count++;
    }   
} 
```

现在该`HandleClick`函数正在为 . 创建自己的闭包`i`，并将设置为从循环传入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:39:55.863

```
count = 0;
my_array.forEach(function(i) { 
    if(my_array[i][2])){ //if the data value is true
        document.getElementById('div_id_'+count).onclick = function()
        {
            alert(i);
        };
    count++;
    }
}); 
```

如果 my_array 是 Object 而不是 Array

```
count = 0;
Object.keys(my_array).forEach(function(i) { 
    if(my_array[i][2])){ //if the data value is true
        document.getElementById('div_id_'+count).onclick = function()
        {
            alert(i);
        };
    count++;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T00:46:21.543

将值存储在元素中：

```
var count = 0;
for (var i in my_array)
{ 
    if (my_array[i][2])) //if the data value is true
    {
        var el = document.getElementById('div_id_'+count);
        el.setAttribute("my_value", i);
        el.onclick = function()
        {
            alert(this.getAttribute("my_value"));
        };
        count++;
    }   
} 
```

# android - Admob：更长的会话或更多的下载？

> ID：12207473
> 
> 赞同：0
> 
> 时间：2012-08-31T00:36:24.230
> 
> 标签：android, admob

我在我的 android 应用程序中使用 admob。我想知道哪一个通常会带来更多收入、更多下载或更长的会话？我的意思是你会从每次玩游戏一分钟的 2 次下载中获得更多收入，或者你会从一次游戏中玩 2 分钟的下载中获得更多收入吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:37:03.470

如果您停留在同一页面上，除非您在 AdMob 设置页面中手动设置为每 30 秒自动刷新一次，或者您通过放置一些计时器在代码中处理了它，否则广告不会自动刷新。尤其是在观看视频或玩游戏时，如果用户在同一个屏幕上停留大约 5 分钟，最好手动设置刷新率（这会增加广告印象并降低 eCPM），甚至更好地在不同的广告网络之间交替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:42:09.103

你说的是刷新率吗？AdMob 对刷新率的一般建议是 30 或 60 秒。

# html - HTML FORM 并非全部传递给 print_r($_POST)

> ID：12207477
> 
> 赞同：0
> 
> 时间：2012-08-31T00:36:49.253
> 
> 标签：html, forms

出于某种原因，我无法让我的表格工作。没有什么太复杂的。我尝试了不同的变化，但没有运气。我也尝试手动填写 value="value"，但它仍然无法传递到 $_POST。

变量 $_POST 中的唯一变量是我的提交按钮和我的“欠”单选按钮。

```
 <form method="POST" action="<?php echo $_SERVER['PHP_SELF'];?>"  class="asholder">
    <div style="float:right">Hidden ID Field: <input type="text" id="userID" value="" style="font-size: 10px; width: 20px;" disabled="disabled" /></div>    
    <input style="width: 200px" type="text" id="personinput" value="" placeholder="Person" /><br />
    <input type="radio" name="owes" value="sUser" placeholder="Who Owe's Who?" /> owes me
    <input type="radio" name="owes" value="mUser" /> I owe them <br />
    <input style="width: 200px" type="text" id="amount" value="" placeholder="Amount of..." /><br />
    <textarea style="width: 200px; height: 50px;" id="comment" value="" placeholder="Comment"></textarea><br /> 

    <button type="submit" name="submit" value="Throw a Ching" id="submit">Throw a Ching</button>
</form> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:55:07.493

尝试给其他字段一个名称属性。按钮和收音机的名称已填写，因此它们会显示出来。你的其他领域没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:16:10.760

您的输入类型应该有一个类似这样的名称属性

```
<input type="text" name="sample" id="sample" placeholder="type here" /> 
```

请注意，属性“名称”用作能够传递给脚本文件的键/索引

# java - 自定义 ListView 滚动 - 仅 Imageviews

> ID：12207478
> 
> 赞同：0
> 
> 时间：2012-08-31T00:36:51.303
> 
> 标签：java, android, android-listview, android-imageview

我的应用程序中有一个 ListView，其中只有 ImageViews。根据随机选择方法，每行显示 1、2 或 3 个图像。但是我现在面临的问题是，当我滚动时，图像的顺序会发生变化，而我希望它们始终保持不变。另外，即使我使用了高效的“int”迭代器来检索和显示该行中的下一个图像，图像也会重复。

我检查了其他处理类似问题的问题，但它们不处理 ImageViews。我是新手，所以任何帮助将不胜感激。

```
public class YPAdapter extends BaseAdapter{

public Context context; 
public ArrayList<ImageDetails> flowImages = new ArrayList<ImageDetails>();
LayoutInflater inflater;
private ArrayList mData = new ArrayList();
public int i = Home.getStart();

YPAdapter(Context context, ArrayList<ImageDetails> name, int start) {
    inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
    this.context = context; 
    this.flowImages = name; 
}
public void addItem(final int item) {
    mData.add(item);
    notifyDataSetChanged();
    }   
@Override
public int getViewTypeCount() {
    return 3;
}
@Override
    public int getCount() {
    return mData.size();
    }

@Override
public int getItemViewType(int position) {
int x = 0;
    if (Integer.parseInt(mData.get(position).toString()) == 1) x = 0;
    else if(Integer.parseInt(mData.get(position).toString()) == 2) x = 1;
    else if(Integer.parseInt(mData.get(position).toString()) == 3) x = 2;
    return x;
}

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {

    int mode = getItemViewType(position);

        if(convertView == null)
        {   

        switch(mode){

        case 0:

            convertView = inflater.inflate(R.layout.image_container_1, parent, false);
        if(i < (flowImages.size()))
        {
        ImageView imageView = (ImageView) convertView.findViewById(R.id.logo_1);

        ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

        dimensions = ImageSorter.getLayout(1);

        // get parameters

                // set image with url

        i++;

        }       

        break;

        case 1:                  
                convertView = inflater.inflate(R.layout.image_container_2, parent, false);          

        if(i < (flowImages.size()-1))
        {
        ImageView imageView1 = (ImageView) convertView.findViewById(R.id.logo_2_1);
        ImageView imageView2 = (ImageView) convertView.findViewById(R.id.logo_2_2);

        ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

         // get parameters for 2 images

                // set image for first imageview    
        i++;
           // set image for second imageview
           i++;
        }
        break;

        case 2:              
                convertView = inflater.inflate(R.layout.image_container_3, parent, false);

        if(i < (flowImages.size()-2))
        {
        ImageView imageView1 = (ImageView) convertView.findViewById(R.id.logo_3_1);
        ImageView imageView2 = (ImageView) convertView.findViewById(R.id.logo_3_2);
        ImageView imageView3 = (ImageView) convertView.findViewById(R.id.logo_3_3);

        ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

       // get parameters for 3 images

                // set image with url for first imageview
        i++;
        // set image for second imageview
        i++;
    // set image for third imageview
               i++;
        }

        break;
    }   
    }

    return convertView;

}

public Object getItem(int position) {
     return mData.get(position);
}

public long getItemId(int position) {
    return position;
} 
```

}

这是 ListView 的 XML：

```
<ListView
android:id = "@+id/home_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"       
    >         
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:42:16.790

> 但是我现在面临的问题是，当我滚动时，图像的顺序会发生变化，而我希望它们始终保持不变。

这很可能是因为您设置`getViewItemType`方法的方式（或者您尝试以`getView`错误的方式执行此操作）。我不明白您希望行类型如何显示，因此除非您更好地解释行的显示方式，否则我无法向您推荐某些内容。

> 另外，即使我使用了高效的“int”迭代器来检索和显示该行中的下一个图像，图像也会重复。

发生这种情况是因为您没有编写`getView()`考虑`ListView`' 回收机制的方法。您永远不应该只为**null****的情况设置数据，`convertView`**因为这意味着作为`ListView`回收行，您不会为回收行设置正确的数据。

例如：

```
 @Override
     public View getView(int position, View convertView, ViewGroup parent) {
        int mode = getItemViewType(position);
        if(convertView == null) {   
            switch(mode){
            case 0:
                convertView = inflater.inflate(R.layout.image_container_1, parent, false);
            break;
            case 1:                  
                convertView = inflater.inflate(R.layout.image_container_2, parent, false);          
            break;
            case 2:              
                convertView = inflater.inflate(R.layout.image_container_3, parent, false);
            break;
            }   
        }
        switch (mode) {
        case 0:
                    if(i < (flowImages.size()))
            {
            ImageView imageView = (ImageView) convertView.findViewById(R.id.logo_1);

            ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

            dimensions = ImageSorter.getLayout(1);

            // get parameters

                    // set image with url

            i++; // I don't know what you try to measure with this variable but 
            // you shouldn't do it in a method like getView as this method is called a lot of times
            // for example the user coculd be playing, scrolling the ListView one item down and one item up for 500 times.
            } 
        break;        
        case 1:
            if(i < (flowImages.size()-1))
            {
            ImageView imageView1 = (ImageView) convertView.findViewById(R.id.logo_2_1);
            ImageView imageView2 = (ImageView) convertView.findViewById(R.id.logo_2_2);

            ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

             // get parameters for 2 images

                    // set image for first imageview    
            i++;
               // set image for second imageview
               i++;
            }

        break;       
        case 2:

            if(i < (flowImages.size()-2))
            {
            ImageView imageView1 = (ImageView) convertView.findViewById(R.id.logo_3_1);
            ImageView imageView2 = (ImageView) convertView.findViewById(R.id.logo_3_2);
            ImageView imageView3 = (ImageView) convertView.findViewById(R.id.logo_3_3);

            ArrayList<ImageDimensions> dimensions = new ArrayList<ImageDimensions>();

           // get parameters for 3 images

                    // set image with url for first imageview
            i++;
            // set image for second imageview
            i++;
        // set image for third imageview
                   i++;
            }

    break;
    }
    return convertView;

} 
```

为什么你不需要只考虑这种`convertView == null`情况：

当`ListView`需要显示新行时（列表第一次出现在屏幕上或用户向上或向下滚动时），它将调用该`getView`方法。当一行从屏幕上消失时，`ListView`可以选择将该行保留在缓存中以供以后`getView`再次调用该方法时使用（通过这样做，该`getView`方法将不必再次构建该行，避免创建不必要的对象）。因此，在该`getView`方法中，您应该始终检查是否`convertView`是`null`. 如果它为空，则构建行（并在空检查设置数据之后）。如果它不为空，那么您有一个回收视图，并且无需构建新行，您只需在其上设置数据（如果您在空检查中设置数据，那么回收视图将保留旧数据（从以前的位置），你会得到奇怪的结果）。

将在方法`getItemViewType`之前调用，以检查它是否具有该类型的回收视图（因此无论您在什么位置，都可以保证获得正确的回收视图）。在这里，我仍然不明白您要如何设置图像。您有可能包含您的图像的列表，但我不知道您希望如何分配它们，顺序，随机等`getView``ListView``flowImages`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:17:54.230

删除此条件
if(convertView == null)

# svn - 如何以不同的用户身份执行 svn commit？

> ID：12207482
> 
> 赞同：5
> 
> 时间：2012-08-31T00:37:28.953
> 
> 标签：svn

我通过以下方式检查了我的代码库

`'svn co svn+ssh://radek@repository.server.com/var/lib/svne2/edumate2/trunk/ trunk/'`

我编写了一个小的 Web 应用程序来合并和签入运行良好的代码库。现在我想让这个应用程序可供开发人员使用。现在所有的提交都是以我的名义进行的。

**如何在不同的 svn 用户下提交？**

我试过`svn --username kon ci -m 'EDU-8319 into trunk' /srv/www/htdocs/merging/trunk`了，提交成功了，但以我的名义。svn 没有显示任何错误，也没有要求输入 kon 的密码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T01:01:11.720

您正在使用`svn+ssh`，因此`svn`将忽略该`--username`参数（因为 SVN 服务器将只使用您的登录用户名）。

尝试`svn relocate svn+ssh://<new-user>@repository.server.com/var/lib/svne2/edumate2/trunk/`，然后提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T07:24:15.410

另一种选择是将配置文件添加到您的 ~/.ssh 目录中，以便 svn+ssh 始终使用此用户：

```
Host svn.server.hostname
  User svn.username 
```

欲了解更多信息检查： [http ://www.highlevelbits.com/2007/04/svn-over-ssh-prompts-for-wrong-username.html](http://www.highlevelbits.com/2007/04/svn-over-ssh-prompts-for-wrong-username.html)

如果通过 tjstankus @Subversion 找到此解决方案，[忽略“--password”和“--username”选项](https://stackoverflow.com/questions/34687/subversion-ignoring-password-and-username-options)

# java - 查找java数组中元素的频率

> ID：12207483
> 
> 赞同：3
> 
> 时间：2012-08-31T00:37:44.183
> 
> 标签：java

我有一个 int 数组：

```
{1,2,4,2,3,5,6,4,3} 
```

如何找到数组元素的频率，如`1=1,2=2,3=2,4=4..`. 我需要一个类，我可以将我的数组传递给它并返回一个数组，该数组给出数组元素的计数。例如：-（`array{[0]=1,[1]=2,[2]=3,[3]=4..}`对于上面的示例数组）；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-27T08:24:15.840

```
class MapTest
{
    public static void main(String args[]){
        HashMap<Integer,Integer> h = new HashMap<Integer,Integer>();
        int arr[] = new int[]{2,2,3,3,5,6,7,9,9,0};
        for(int i=0; i<arr.length; i++){
            if(h.containsKey(arr[i])){
                h.put(arr[i], h.get(arr[i]) + 1);
            } else {
                h.put(arr[i], 1);
            }
        }
        System.out.println(h);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-12T01:03:45.673

在 Java 8 中，您可以这样做

```
Map<Integer, Long> freq = Arrays.stream(array).boxed().
                collect(Collectors.groupingBy(Integer::intValue, Collectors.counting())); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T00:50:18.113

你必须做几件事：

1.  定义数字范围的上限和下限。
2.  建立一个方便的对象/数据结构来存储这些数字的出现。
3.  遍历传入的数组并计算每个数字的所有出现次数，将结果存储在方便的对象/数据结构中。

如果这以一种简单的方式完成，则可能只是从传入的数组中读取元素并打印出最终结果的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-01T09:47:40.247

如果指定数组元素的范围并限制为数组大小，最好的解决方案是使用哈希映射。T(n) = O(n)，辅助空间 = O(n)。

```
public static void findCount3(int[] a){
    Map<Integer, Integer> hm = new HashMap<Integer, Integer>();     
    for(int i = 0; i < a.length; i++){
            if(!hm.containsKey(a[i])){
               hm.put(a[i], 1);
            }else{
               hm.put(a[i], hm.get(a[i])+1);
    }               
    System.out.println(hm);         
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-21T16:08:29.613

使用 Java-8，我们可以在一行中找到数组的频率。

```
Map<Integer, Long> freq = Arrays.stream(a).boxed().
                          collect(Collectors.groupingBy(Function.identity(), Collectors.counting())); 
```

另外，由于问题要求我们需要返回一个数组

```
public Object[] getFrequencies(int[] a) {
    Map<Integer, Long> freq = Arrays.stream(a).boxed().collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));
    return freq.entrySet().toArray();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-05T13:18:56.767

```
import java.util.*;
class Findfreqarray
{
    public static void main(String args[])
    {
        int t, i, j, len, count=0;
        Scanner in = new Scanner(System.in);
        System.out.println("Enter number of elements to insert in an array: ");
        len = in.nextInt();
        int[] arr = new int[len];
        System.out.println("Enter elements to insert in an array: ");
        for(i=0;i<len;i++)
        {
            t = in.nextInt();
            arr[i] = t;
        }
        System.out.println("\n");
        for(i=0;i<len;i++)
        {
            count=1;
            for(j=i+1;j<=len-1;j++)
            {
                if(arr[i]==arr[j] && arr[i]!='\0')
                {
                    count++;
                    arr[j] = '\0';
                }
            }
            if(arr[i]!='\0')
            {
                System.out.println(arr[i] + " is " + count + " times.\n");
            }
        }        
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-24T16:37:22.550

我有一个计算java数组中元素频率的解决方案

```
import java.io.BufferedReader;

import java.io.InputStreamReader;

public class ItemCount {

public static void main(String[] args)
{
    try{
            int count=1,index=1;
            BufferedReader  br=new BufferedReader(new InputStreamReader(System.in));
            System.out.print("Enter the Size of array : ");
            int size=Integer.parseInt(br.readLine());
            System.out.print("Enter the Elements of array : ");
            int arr[]=new int[size];

            for(int i=0;i<arr.length;i++)
            {
                System.out.print("arr["+i+"] :  ");
                arr[i]=Integer.parseInt(br.readLine());
            }
            System.out.print("Sorted Array is :");
            SortingArray.sortDescendind(arr);

            for(int i=0;i<arr.length;i++)
            {
                System.out.println("arr["+i+"] :  "+arr[i]);

            }

            for(int i=0;i<arr.length;)
            {
                count=1;
                for(index=i+1;index<arr.length;index++)
                {
                    if(arr[i]==arr[index])
                    {
                        count++;
                    }
                    else{

                        break;
                    }

                }
                System.out.println(""+arr[i] +"----> "+count);
                i+=count;

            }

    }catch(Exception ex)
    {
        ex.printStackTrace();
    }
}

} 
```

/// 可以为数组选择任意排序方式---->SortingArray.sortDescendind(arr)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-31T05:44:10.553

在这里不放弃它是一个很好的起点：

```
int[] array = {1,2,4,2,3,5,6,4,3};

        public int[] (array){
            //need to perform a sort...or a search
            //after searching check for matches,
            //sorting could make performing comparisons more efficient
            //not all searches/sorts are created equal.

            int[array.length] result += {"["+numberChecked+"]="+freqOccurred};
            return result;
        } 
```

此代码尚未编译，因此更多地将其视为伪代码。目的是让您思考如何实现预期目标。可能已经存在一个可以检查数组中频率元素的 java 包，但这是您最有可能寻找的。祝你好运。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-03T13:49:58.520

您可以计算 HashMap<Element,Frequency> 中每个元素的频率。

```
Map<Integer,Integer> h = new HashMap<>();
int arr[] = new int[]{2,2,3,3,5,6,7,9,9,0};

for(int elem:arr) {
  h.merge(elem, 1, Integer::sum);
} 
```

Hashmap.merge() 允许您指定如何更新哈希图中的值。如果 elem 没有现有值，则类似于 h.put(elem, 1)。如果存在一个名为 oldFreq 的值，它将用 Integer.sum(oldFreq, 1) 替换它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-03T06:36:01.223

```
Map<Integer, Integer> map = new HashMap<>();
int arr[] = new int[]{2, 2, 3, 3, 4, 5, 6, 7, 9, 9, 0, 4, 2};

for (int i = 0; i < arr.length; i++) {
    Integer count = map.getOrDefault(arr[i], 0);
    map.put(arr[i], count + 1);
}

//Print the map to see the occurrence
map.forEach((key, value) -> {
    System.out.println(key + " -> " + value);
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-31T10:08:46.337

```
package practice.learning;

import java.util.Arrays;
public class FreqElem {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        String[] names= {"Pawan","Rohan","Sudesh","Pawan","Shiv"};

        for(int i=0;i<names.length;i++) {
            int count=0;
            //System.out.print(names[i]);
            String a=names[i];
            for(int j=0;j<names.length;j++) {
                if(names[j]==a) {
                    count+=1;
                }

            }
            System.out.println(names[i]+":"+count); 
        }

    }

} 
```

> 输出： Pawan:2 Rohan:1 Sudesh:1 Pawan:2 Shiv:1

# javascript - 简单的Javascript代码问题

> ID：12207492
> 
> 赞同：0
> 
> 时间：2012-08-31T00:38:33.310
> 
> 标签：javascript

我正在尝试将新图像插入现有元素。我有

```
 var backImg = createElement('img', { className : 'link', src : '/images/btn.png' });

  var save_bt=document.getElementsByClassName('button');

  save_bt.appendChild(backImg);

The above codes gave me error:

Object #<NodeList> has no method 'appendChild' 
```

任何人都可以帮助我吗？没有Jquery代码PLZ。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:40:53.670

`document.getElementsByClassName('button')`返回 a [`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，而不是元素。如果要`backImg`使用类添加到每个元素，则`.button`需要遍历该 NodeList：

```
for(var i=0,c=save_bt.length; i<c; i++){
    save_bt[i].appendChild(backImg);
} 
```

如果您尝试定位单个元素，您可能希望使用`id`HTML 属性而不是`class`，那么：

```
document.getElementById('button').appendChild(backImg); 
```

请注意，HTML id 在文档中必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:42:04.453

如果您尝试定位单个元素，则应使用“id”：

```
document.getElementById('id_of_the_element').src = "new_img.png"; 
```

# java - 监控阻止操作

> ID：12207495
> 
> 赞同：4
> 
> 时间：2012-08-31T00:38:43.633
> 
> 标签：java, multithreading, race-condition

我正在尝试编写一个线程来监视阻塞操作需要多长时间。例如，我有这样的阻止操作：

```
class BlockingThread extends Thread{

    public volatile boolean success = false;
    public volatile long startedTime = 0;

    public void run(){

      startedTime = System.currentTimeMillis();
      success = doBlockingAction(); //no idea how long this action will take
    }

} 
```

如果阻塞操作花费太长时间，我想要另一个线程基本上会调用“超时”函数：

```
class MonitorThread extends Thread{

    public void run(){
      while(System.currentTimeMillis() - blockingThread.startedTime > TIMEOUT_DURATION)
      {
         ..keep waiting until the time runs out..
      }

      if(!blockingThread.success){
         listener.timeout();
         //Took too long.
      }
    }

} 
```

当我在 MonitorThread 中测量时间时，我无法理解如何确保 BlockingThread 当前实际上处于阻塞操作中。

如果我做这样的事情，

```
Thread blockingThread = new BlockingThread();
blockingThread.start();
Thread monitorThread = new MonitorThread();
monitorThread.start(); 
```

不能保证其中一个线程实际上在另一个线程之前开始运行代码，因此我目前无法知道我的超时线程是否实际上正确地测量了阻塞操作的时间。我认为答案与锁定和`wait`ing 有关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:16:54.540

我可以建议您使用 class 重写您的代码[`java.util.concurrent.ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。这个类有很好的方法`awaitTermination()`，我想，这正是你需要的。

编辑：

这是您的 BlockingThread，运行 10 秒，Monitor，等待 5 秒：

```
package sample.threadexecutor;

import java.text.SimpleDateFormat;
import java.util.Date;

public class BlockingThread implements Runnable{

    public boolean succsess = false;
    @Override
    public void run() {
        SimpleDateFormat df = new SimpleDateFormat("HH:mm:ss.SSS");
        System.out.println(df.format(new Date())  + " start");
        try {
            Thread.sleep(10000L);
        } catch (InterruptedException e) {
            System.out.println(df.format(new Date())  + " interrupted");
            succsess = false;
            return;
        }
        System.out.println(df.format(new Date())  + " end");
        succsess = true;
    }
} 
```

和执行器的主要功能：

```
package sample.threadexecutor;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class main {

    public static void main(String[] args) {
        SimpleDateFormat df = new SimpleDateFormat("HH:mm:ss.SSS");
        ExecutorService service= Executors.newSingleThreadExecutor();
        service.submit(new BlockingThread());
        try {
            service.shutdown();
            if(service.awaitTermination(5, TimeUnit.SECONDS)){
                System.out.println(df.format(new Date())  + " execution completed");
            }else{
                System.out.println(df.format(new Date())  + " execution timeout");
            }
        } catch (InterruptedException e) {
            System.out.println(df.format(new Date())  + " monitoring interrupted");
        }

    }
} 
```

和输出：

```
22:28:37.005 start
22:28:42.006 execution timeout
22:28:47.006 end 
```

如果我们将超时设置为 20 秒，则输出：

```
22:30:20.210 start
22:30:30.213 end
22:30:30.214 execution completed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:55:10.707

在blockingThread.startingTime 初始化之前，您可能只需要循环几次。

```
class MonitorThread extends Thread{

    public void run(){
        boolean weWantToKeepRunning = true;

        // here is your new event loop
        while(weWantToKeepRunning){

            if (blockingThread.startedTime != 0) && (System.currentTimeMillis() - blockingThread.startedTime > TIMEOUT_DURATION)&& (!blockingThread.success){

                listener.timeout();   // too long
                weWantToKeepRunning = false;  // quit this loop

            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:58:38.317

doBlockingAction 到底是做什么的？Java API 中的大多数阻塞操作都有允许设置超时的变体。使用该超时变体是最准确的方法。

# javascript - 对象 Javascript 中的标签无效 - 想要添加事件监听器

> ID：12207497
> 
> 赞同：1
> 
> 时间：2012-08-31T00:39:02.690
> 
> 标签：javascript, label, addeventlistener

```
({
photo:  foo.addEventListener("animationend", photoCycle, true) ||  foo.addEventListener("webkitAnimationEnd", photoCycle, true),

bio: foo.addEventListener("animationend", bioCycle, true) ||  foo.addEventListener("webkitAnimationEnd", bioCycle, true)
})[mode] 
```

我正在尝试创建一个对象来评估模式（它将是字符串`photo`或`bio`）并根据它是 firefox`animationend`还是 chrome添加事件侦听器`webkitanimationend`。奇怪的是，当模式是`photo`我得到`bio`键的无效标签的语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:28:02.887

此构造正在为未命名的对象属性赋值。此外，选择正确事件名称的 or 方法也不起作用，因为 addEventListener 在两个浏览器上都是有效的函数。

这是一些执行此操作的代码：

```
var fn = (mode == "photo") ? photoCycle : bioCycle;
var eventName = ((navigator.userAgent.indexOf("WebKit") != -1) ? "webkitAnimationEnd" : "animationEnd";

foo.addEventListener(eventName, bioCycle, true) 
```

# java - 如何索引 java.util.Collections$UnmodifiableMap 的类类型？

> ID：12207499
> 
> 赞同：0
> 
> 时间：2012-08-31T00:39:44.463
> 
> 标签：java, reflection, collections, map

嗯......我实际上正在实现一个类，使用一个名为“适配器”的类将任何对象转换为另一个对象。我正在使用 HashMap 映射每对类型 SOURCE -> TARGET ： HashMap , HashMap < Class< ? >、适配器 > >。每种类型都有您的适配器。例如：String可以转换为Integer、Double等。获取适配器：

```
 Adapter adapter = map.get(String.class).get(Integer.class); 
```

我将以动态方式获得适配器：

```
 Adapter adapter = map.get(< source_object >.getClass()).get(Integer.class); 
```

我的问题是我需要在 HashMap 中放入 java.util.Collections$UnmodifiableMap 的键。来自 Servlet 的请求参数集合是一个映射。但是，当我使用 .getClass() 时返回 java.util.Collections$UnmodifiableMap。不可能在适配器 HashMap 上放置密钥 java.util.Collections$UnmodifiableMap.class :(

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:47:59.147

将 UnmodifiableMap 包装在 HashMap 中会有所帮助吗？

```
source_object = new HashMap<Object, Object>(source_object); 
```

效率很低，也不是很优雅，但也许是临时的解决方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:44:32.947

感谢 tmmllr 的帮助！我根据他的建议和改进的解决方案！我使用：java.util.Collections.unmodifiableMap(new HashMap<>()).getClass() 将索引放在 HashMap 适配器上。更有效的方法：

```
 adapters.put(java.util.Collections.unmodifiableMap(new HashMap< >()).getClass(),...); 
```

因此我可以通过 java.util.Collections$UnmodifiableMap 实例并获得正确的适配器！这工作 \0/

百万感谢 veer 找到第二个解决方案：

```
 Class.forName("java.util.Collections$UnmodifiableMap"); 
```

我认为这是最实用的方法！

# c# - 如何从数据网格中的选定项目中获取一行的值？

> ID：12207505
> 
> 赞同：0
> 
> 时间：2012-08-31T00:40:08.850
> 
> 标签：c#, wpf, wpfdatagrid

我有一个 WPF 数据网格，我正在尝试获取所选项目的第一行的值。根据我在这里找到的以前的问题，我尝试使用以下方法，但没有成功：

```
var eventid = dataGridArchiveQueue.SelectedItem; 
```

也试过：

```
var eventid = dataGridArchiveQueue.Columns[0].GetValue(dataGridArchiveQueue.SelectedItem); 
```

我不明白什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:07:06.003

如果您使用 MVVM，您可以将视图模型中的对象绑定到数据网格的 SelectedItem 属性；

```
<DataGrid SelectedItem="{Binding SelectedItemInMyViewModel}" ... >
...
</DataGrid> 
```

然后在您的视图模型中，您可以使用您喜欢的任何类型公开此属性（这意味着您不需要强制转换它，但提供它作为您绑定到 DataGrid 的 Array/List 对象的类型`ItemsSource`

例如，如果您将列表绑定到数据网格，则可以在视图模型上拥有；

```
public Person SelectedItemInMyViewModel { get; set; } 
```

然后，您可以在想查看所选项目时查看该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:43:22.553

`SelectedItem`是您的行装箱到`object`，您需要[将](http://msdn.microsoft.com/en-us/library/ms173105.aspx)其转换回项目类型以访问其成员。

# python - 通过移动客户端在 Google App Engine 中使用会话

> ID：12207507
> 
> 赞同：3
> 
> 时间：2012-08-31T00:40:14.030
> 
> 标签：python, ios, google-app-engine, session

我希望使用[gae-sessions](https://github.com/dound/gae-sessions)或webapp2 [sessions](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)来实现对 Google App Engine 的会话支持，这更有意义。但是，我真的不明白它是如何工作的。在示例代码中，他们做的最多的工作是：

```
 session = get_current_session() 
```

我认为会话的全部意义在于对用户进行身份验证。这是我的情况：

用户只有在登录时才能使用 iOS 应用程序。在用户第一次登录后，而不是每次都发送用户的密码进行身份验证，我读到这就是会话 ID 的用途。那么现在，我该如何使用这些框架来做到这一点呢？

*   不是应该有id吗？
*   成功登录后，我向客户端发送什么？
*   get_current_session 如何知道用户是谁？
*   客户端在每个请求中向服务器发送什么？
*   如果用户从多个设备登录怎么办？

请记住，客户端不是浏览器，而是移动应用程序。我只是不明白这一切如何适用于这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:16:00.467

> 我认为会话的全部意义在于对用户进行身份验证。

不，会话用于识别属于同一浏览器的请求。它不识别或验证用户。这是您的代码的工作。会话通常通过 Cookie 工作：在第一次请求时，服务器发送一个 cookie，然后在所有后续请求中，浏览器将 cookie 添加到请求中。这就是服务器如何知道一系列请求属于同一个客户端（浏览器）的方式。为了在你的情况下工作，你的[Android 代码应该使用 cookies](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java)。

> 不是应该有id吗？

是的，登录后您通常会得到一些用户 ID，但这是特定于登录过程的。这也与会话无关。会话基本上是服务器端的一个对象，当请求来自同一个客户端时，它总是相同的。您可以将一些属性存储到会话对象中：通常在用户执行登录后，您会将他们的用户 ID 存储到会话中，以便更轻松地识别来自同一用户的请求。当用户注销时，您将从会话中删除用户 ID。

> 成功登录后，我向客户端发送什么？

在服务器上启用会话（=[选择您的库](https://github.com/dound/gae-sessions/wiki/comparison-with-alternative-libraries)）并[在 Android 代码中启用 cookie](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java)。然后会话将在您的客户端和服务器之间自动处理。成功登录后，只需将用户 ID 存储到会话中。在后续请求中，只需检查会话是否包含用户 UD。

> get_current_session 如何知道用户是谁？

它没有。登录后，您将一些与用户相关的数据存储到会话中，并且在后续请求中，您可以检查此数据。

> 客户端在每个请求中向服务器发送什么？

为了使会话正常工作，它应该发送一个 cookie。如果您在 Android HttpClient 代码中启用 cookie 支持，这将自动完成（上面的链接）。

> 如果用户从多个设备登录怎么办？

多个客户端将导致多个独立会话。由您的服务器代码来识别属于同一用户的会话（= 多个会话将在其中存储相同的用户 ID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:39:48.877

您可以使用 webapp2 为您处理身份验证。webapp2_extras 中有一个名为 auth 的模块。它将帮助您注册、登录和注销。

这是我的详细回答：

[使用 Android/iPhone 在 Google App Engine 上处理会话](https://stackoverflow.com/questions/11179014/handling-sessions-on-google-app-engine-with-android-iphone/11202131#11202131)

使用应用引擎登录后。您只需要存储身份验证 cookie 并将其发送到子序列请求。在服务器端，您可以检查用户是否通过以下方式登录：

```
from webapp2_extras import auth
if auth.get_user_by_session():
    #Logged in      
else:
    #Not logged in 
```

注意：对于使用 Android 的用户来说，另一种更简单的方法是在服务器端使用 Google 身份验证，并使用[AERC](https://code.google.com/p/aerc/)（Android 的 App Engine Rest Client）来帮助您通过服务器进行身份验证。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:54:17.140

首先阅读 HTTP cookie [http://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

会话实际上只是服务器上的一个数据对象。把它想象成一个 python 字典。它应该被持久化到数据存储和内存缓存中。它具有某种 id，通常存储在 HTTP cookie 中，该 cookie 在服务器和浏览器之间来回传递。

当您收到请求时，会话处理库本质上会执行以下操作： - 查看 cookie 并获取会话 ID - 它 - 从数据存储或内存缓存中提取该 ID 的会话数据，并将其插入“请求”对象中.

它还处理簿记，例如保存数据，并验证 cookie 未被篡改。

根据您使用的会话库，将会话与用户关联可能取决于您。通常，您不一定需要将会话与用户显式关联。如果任何一位用户使用多个浏览器访问您的站点，您可能会有多个会话。但是，您需要小心在用户注销时终止会话，以及在新用户登录时启动新会话。

由于会话通常是一次性的，因此您的数据存储中最终会有一堆未使用或过期的会话，您需要一些东西来清理它们。

就您的移动应用而言，是的，您的移动应用需要像浏览器一样运行，存储 cookie 数据，并在每次请求时将其传回服务器。如果您使用的是 android HttpURLConnection，请使用可选的 CookieManager 来处理这部分。

# io - 从标准输出到我的电脑屏幕

> ID：12207515
> 
> 赞同：2
> 
> 时间：2012-08-31T00:41:19.407
> 
> 标签：io, kernel, cpu, drivers, motherboard

在任何入门课程中，您学习的第一件事就是 System.out.println、printf 等打印到标准输出并在您的屏幕上弹出。我想知道该过程中的所有详细步骤。简而言之，我知道涉及以下内容，但我不知道所有细节：

*   对内核进行系统**调用**
*   文本被**光栅化**
*   **CPU**正在执行程序指令（使用共享库对吗？）
*   **涉及屏幕**驱动程序****
***   CPU与主板上的**某些总线**（PCI？或 PCIe？）通信*   总线向**屏幕发送数据****

 **我的一些具体问题是：

*   计算机如何知道标准输出意味着放在屏幕上？如果连接了多个屏幕怎么办？它如何从硬盘驱动器或以太网插孔中识别屏幕？
*   视频驱动程序如何参与方程式？它如何知道使用什么驱动程序？
*   CPU是如何把数据放到总线上的？例如，它如何知道要写入哪个地址？该地址如何用于将数据发送到写入位置？您能否提供一些在此过程中使用的示例 CPU 指令？

**谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:04:10.060

此外，标准输出就是这样。“屏幕”的概念是操作系统的抽象。例如，在 Linux 和其他一些 UNIX 中，您的进程与 TTY 或 PTY（电传打字机和伪电传打字机）相关联，这是 stdout 可以指向的地方，但不是必须的。Stdout 可以指向一个文件，一个网络，任何东西！你必须区分真正的终端（想想 Ubuntu 上的 Ctrl-Alt-F1）和伪终端（想想 Konsole、CMD、Terminal.app）。当您有一个伪终端时，它位于一个窗口中，这会使事情复杂 10 倍。如果你有一个伪终端，这里可能是步骤（Linux）：

1.  进行系统调用 ( `write`) 以将字符串写入 FD 0。
2.  `write`将写入与 FD 0 关联的文件，该文件很可能附加到您的 PTY 的从控制器。然后，终端仿真器（主控制器）接收输出。
3.  它使用某种图形库（GTK、Qt、SDL、OpenGL 等）来渲染到它的窗口缓冲区。这就是字体幻想会发生的地方。
4.  窗口缓冲区被传递给窗口管理器和 X 窗口系统，它们与所有其他窗口和事物一起绘制它。

至于视频驱动，这个系统的两个部分都用到了视频驱动：X windows和OpenGL。视频驱动程序由配置文件和硬件发现设置，其中操作系统（或 BIOS）探测系统以查找所有可用硬件并加载驱动程序。

CPU如何将数据放入总线？（据我所知，以下是特定于 x86 和 Linux 的）。好吧，数据必须以某种方式到达显卡。它可以通过几种方式发生。视频卡将一些视频内存映射到 CPU 内存，或者您使用 x86 I/O 端口（`in`和`out`指令）。

让我们看第一种情况。所有视频卡都在段地址 0xb800 处映射一个文本视频缓冲区（有些还在某处映射某种 3d 数据缓冲区，但我不确定）。因此，如果我想将字符串写入`"Hello, world"`视频缓冲区，这里有一些 x86 ASM：

```
mov es, B800H ;Set the extra segment to the video buffer
mov ds, cs ;Set the data segment
mov esi, hellomsg ;Set the source index to the hellomsg
mov edi, 0 ;Video buffer offset
mov ecx, [hellolen] ;How many characters
rep movsb ;Copy

;;Data
hellomsg db "Hello, world!" ;Null terminated hello world
hellolen dw 13 
```

顺便说一句，这是驱动程序或操作系统级别的 ASM——它需要直接访问视频缓冲区，或者至少需要将视频缓冲区映射到您的地址空间。另一个选项，I/O 端口，是驱动程序参与的地方。因为什么端口和写什么取决于显卡，我不会举例，但你可以看看。**

# ruby - Thin 最大连接的含义和集群的需要？

> ID：12207516
> 
> 赞同：1
> 
> 时间：2012-08-31T00:41:42.837
> 
> 标签：ruby, nginx, thin

Thin 的最大连接数设置为 1024，之前关于 stackoverflow 的问题清楚地解释了如何更改它。我的问题是关于一个小的红宝石应用程序。就用户而言，1024 个连接意味着什么？是 1024 个并发用户吗（我猜不是但是..）？

几个教程提供了有关设置集群的说明，例如 3。我的问题是用户/应用程序的大小何时需要集群或 3 并且具有 1024 的单一模式不再足够？我很欣赏它很难一概而论，并且取决于应用程序，我认为许多 ruby​​ 编码人员可以从这方面的一些指导中受益。

这也链接到另一个问题：如果您使用标准乘客 + nginx 设置（或 apache）运行您的应用程序，乘客如何比较如果在乘客的舞台上使用瘦，那么在性能方面将是等效的，例如有多少瘦服务器等提前谢谢

# jquery - jQuery AJAX 之后获取新的窗口高度

> ID：12207518
> 
> 赞同：1
> 
> 时间：2012-08-31T00:42:14.793
> 
> 标签：jquery

我觉得这个问题的答案会简单得令人尴尬，但它会占用很多时间，而且我看不到解决方案。我正在制作一个简单的无限滚动功能，并且需要脚本在加载更多内容后识别窗口的新高度。该值始终与首次加载时间相同。我将此最新代码基于[此处的另一个答案](https://stackoverflow.com/questions/9249047/jquery-rebind-window-scroll-after-a-successful-ajax-call)，但它仍然无法正常工作。想法？

```
var scrollFunction = function(){
        var myTop = jQuery(window).scrollTop();
        var myHeight = jQuery(window).height();
        if (myTop >= myHeight){ 
            $(window).unbind("scroll");
            jQuery.ajax({
                type: 'POST',
                url: '/ping/thumbs.php',
                data: 'foo=bar',
                success: function(data){
                    $(".thumbnails").append(data);
                    $(window).scroll(scrollFunction);
                },
                dataType: 'html'
            });
        };
    };
    $(window).scroll(scrollFunction); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T00:43:56.203

的高度`window`是浏览器窗口的大小。你想要的高度`body`。 `window`高度仅在调整浏览器大小时发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:44:42.857

获取窗口的高度就是浏览器窗口的高度。如果您想要文档的高度，则必须使用`document`而不是`window`. `document.height`或获取身体的高度：`jQuery('body').height()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:47:44.067

```
jQuery(document).ready(function () {

    jQuery(window).resize(function () {
        //alert("window changed");
        resizeBlocks();
    });

});

function resizeBlocks() {
    var clientWidth = jQuery(window).width();
    var clientHeight = jQuery(window).height();
     ......................
    jQuery(".maindatacontent").height(clientHeight);
} 
```

每次调整大小时都可以调用它。

hth

# java - Java - 如何将文件拖放到 JTextArea

> ID：12207523
> 
> 赞同：1
> 
> 时间：2012-08-31T00:42:39.607
> 
> 标签：java, swing, file, drag-and-drop, jtextarea

我在 JFrame 中有一个 JTextField，我希望它在将文件拖入 JTextField 时找到文件的文件路径。我应该使用某种监听器吗？我该怎么做？

```
public class UI extends JFrame{
    String s;
    JTextArea textfield = new JTextArea();
    public UI(){
        setVisible(true);
        setSize(1000,800);
        setResizable(false);
        setTitle("Cloavy Compiler");
        textfield.setSize(1000,800);
        add(textfield);

    }
        public void onDrag(){
      s = filepath;
     }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:56:18.957

在本教程的[拖放和数据传输](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)课程中找到答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:15:52.297

看看[这个问题](https://stackoverflow.com/questions/8700073/drag-and-drop-differences-between-jdk1-6-and-jdk1-7)和[这个问题](https://stackoverflow.com/questions/11771918/testing-drag-and-drop-files-onto-application)。在这两个问题中，我都包含了一个用于拖放的[SSCCE ，它从](http://sscce.org)`Transferable`

# memory - 在 CUDA 中增加每个线程的寄存器使用率

> ID：12207533
> 
> 赞同：5
> 
> 时间：2012-08-31T00:44:25.667
> 
> 标签：memory, cuda, latency, cpu-registers

通常建议降低每个线程的寄存器压力以增加warp 占用率，从而通过warp 级多线程（TLP）提供更多隐藏延迟的机会。为了减少寄存器压力，可以使用更多的每个线程本地内存或每个线程块共享内存。CUDA nvcc 编译器也可以强制每个线程使用更少的寄存器。这种方法对于具有良好算术延迟的工作负载很有用，即 ALU 操作与内存读写访问请求的比率很高。然而，对于计算量很少且内存访问更频繁的延迟关键型应用程序，这种方法实际上往往会降低性能。

在此类延迟关键应用程序的情况下，将尽可能多的数据带入片上寄存器或共享内存中更有意义，然后在用全局内存中的下一个数据块替换之前尽可能多地使用它。当然，通过增加寄存器压力，warp 占用率会降低，但现在我们正在使用快速片上寄存器隐藏片外内存延迟。增加每个线程寄存器使用的方法是通过展开循环或计算每个线程的更多输出数据来增加 ILP（这也基本上通过对更多输入执行相同的工作来增加 ILP）。这种方法基本上是由 Volkov (Better Performance at Lower Occupancy) 提出的。

现在 nvcc 编译器驱动程序有一个名为 maxrregcount 的命令行选项，它允许更改每个线程的寄存器使用情况。使用此选项一次可以强制编译器减少每个线程寄存器的使用，但不能强制它增加它。我有一个案例，我想增加每个线程寄存器的使用，但我不能在内核中展开循环，因为循环边界是数据相关的和动态的。到目前为止，我已经尝试了一些技巧，但是我已经没有关于如何增加每个线程寄存器使用率的想法。谁能建议增加单个 CUDA 线程的寄存器使用率的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:42:46.063

在某种程度上，这个问题重复[了 Forcing CUDA to use register for a variable](https://stackoverflow.com/questions/12167926/forcing-cuda-to-use-register-for-a-variable/12169588#12169588)。您已经很好地总结了这些选项。如果您不能通过展开和显式使用标量变量来强制使用寄存器，那么我认为您可能会被卡住。

请注意，即使具有动态边界的循环也可以部分手动展开。您只需检查循环展开部分内的边界。这可能有助于增加寄存器的使用。

我还认为增加寄存器使用和减少延迟之间没有保证的直接关系，所以你真的应该专注于减少延迟，而不是特别关注寄存器使用。

如果您想减少整体内核延迟，那么您应该尝试一些事情。

*   启动的线程块不能超过可以在 GPU 上同时运行的线程块（由占用计算器确定）。
*   最小化内核函数参数的数量，因为这些需要在内核启动期间进行初始化（并且具有许多参数会因此增加启动开销）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:15:01.693

有趣的问题！我也在尝试这种使用 ILP 的方法来提供更好的性能！事实上，由于我受制于较旧的 GPU 架构，每个线程分配的寄存器较少，因此使用 ILP 实际上可以提高性能，因为它通过循环展开（独立指令）释放寄存器以进行更多计算工作！

我想知道你有多少个嵌套循环？如果内循环无法展开，可能会上升一个级别并寻找机会？

为了增加每个线程的寄存器使用量，您是否减少了启动的块数（使用较少的线程）？
要增加寄存器/线程的使用，请加载多于 1 组数据以并行执行。

它在循环的每次迭代中都是独立的吗？我相信关键是寻找独立的计算。批量执行如何。假设循环计数为 N，将其拆分为 N/M 并独立地对它们进行 omcpute？

当你给出一点线索时，很难给出建议：P

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-31T05:32:25.213

这个问题的构架方式就像是在问，“我怎样才能在商店花更多的钱买牛奶？” 问题是颠倒的。你应该问的是，“我有一定数量的钱。我如何用它来获得尽可能多的牛奶？”

好吧，不是最好的类比，但基本上，问题的表述好像增加寄存器数量本身就是目标，而目标当然是提高性能。

所以，首先要确定的是，您是否拥有您认为的那么多的寄存器？如果寄存器是内核中的占用限制因素。当内核受内存限制时，更改代码以便使用更多寄存器可能不是一个好主意。

如果您确定占用受到其他因素的限制，那么您可以询问是否可以通过使用更多寄存器来提高性能（然后寄存器“空闲”，直到寄存器成为占用限制因素）。

为此，您然后开始寻找[时空权衡](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)的选项。

# php - 每页的 PHP 标题、描述和关键字

> ID：12207540
> 
> 赞同：0
> 
> 时间：2012-08-31T00:45:27.680
> 
> 标签：php, regex, seo

我试图找出一种方法来为每页创建描述和关键字。

对于标题，它将是：

```
{{title=some page title in here}} 
```

对于描述，我会做这样的事情：

```
{{description=some description per page in here}} 
```

同样对于关键字元标记，我会做这样的事情：

```
{{keywords=example keyword, per each page, this is an example}} 
```

我将如何通过 preg_replace + regex 解析来实现这一点，所以它不会在它自己的页面上可见，而是放在实际的元信息中，例如：

```
<title> some page title in here </title>
<meta name="description" content="some description per page in here">
<meta name="keywords" content="example keyword, per each page, this is an example"> 
```

示例页面如下所示：

```
{{title=some page title in here}}
{{description=some description per page in here}}
{{keywords=example keyword, per each page, this is an example}}

<div id="content">
  <h4> Some page title here </h4>
  <p> Some page paragraphs here. </p>
</div> <!--#content--> 
```

当然结果与此类似：

```
<html>
<head>
  <title> Website Title - some page title in here </title>
  <meta name="description" content="some description per page in here">
  <meta name="keywords" content="example keyword, per each page, this is an example">
</head>
<body>
  <div id="content">
    <h4> Some page title here </h4>
    <p> Some page paragraphs here. </p>
  </div> <!--#content-->
</body>
</html> 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:25:40.100

To match any given tag:

```
/(?<=\{\{TAG_NAME=).*?(?=\}\})/ 
```

To match variable tags:

```
/\{\{(\w*?)=(.*?)\}\}/ 
```

Then, the first submatch will give you the tag name, the second will give you the the value. To account for whitespace:

```
/\{\{\s*(\w*?)\s*=\s*(.*?)\s*\}\}/ 
```

... so long as noone uses a '}}' within a tag.

A break down:

```
\{\{ 
```

Match two open braces. Easy. (they have to be escaped because the { is a special character in regex.

```
\s* 
```

Greedily match as much white space as you can.

```
(\w*?) 
```

match the shortest string of word characters(a-zA-Z0-9, and underscore) that won't break the regex. The parenthesis return the stuff matched here as a sub match.

```
\s*=\s* 
```

Gobble up more whitespace with exactly one equals sign

```
(.*?) 
```

Match the shortest set of any characters that won't break the regex, and return it as the second sub match.

```
\s*\}\} 
```

Gobble up the last of the white space and the closing braces (again, escaped).

So, if you do:

```
$regex = '/\{\{\s*(\w*?)\s*=\s*(.*?)\s*\}\}/'
preg_match_all($regex, $html, $matches)
$html = preg_replace($regex, '', $html) 
```

Then `$matches[1]` has all your tag names, and `$matches[2]` has all their values, and `$html` has all your remaining html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:54:45.777

如果我没看错，你想包括这样的东西：

```
<title><?php echo $page_title; ?></title> 
```

在脚本前面已设置页面标题的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:58:06.760

你不需`regex`要这样做。将页面的元数据放在这样的数组中：

```
$meta["title"] = "Title";
$meta["description"] = "Description of the Page";
$meta["keywords"] = "Keywords, SEO"; 
```

以这种方式输出三个：

```
<title><?php echo $meta["title"]; ?></title>
<meta name="description" content="<?php echo $meta["description"]; ?>">
<meta name="keywords" content="<?php echo $meta["keywords"]; ?>"> 
```

# regex - 一些棘手的行的 sed 正则表达式模式（ini 部分）

> ID：12207541
> 
> 赞同：1
> 
> 时间：2012-08-31T00:45:47.157
> 
> 标签：regex, sed, pattern-matching, sh

我想解析 *.ini 文件中的部分条目之类的内容：

```
line='      [          fdfd fdf         f   ]  ' 
```

这条线拆分的 sed 模式（？？？）可能是什么

```
'fdfd fdf         f' 
```

出去？

所以：

```
echo "${line}" | sed -E 's/???/\1/g' 
```

我如何描述除和`[[:space:]]`之外的所有字符？这对我不起作用：。`[``]``[^[[:space:]]\[]*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:11:32.053

当您使用`[[:space:]]`语法时，外括号是普通的“匹配此列表中的一个字符”括号，与 in 相同，`[aeiou]`但内括号是其中的一部分`[:space:]`，是不可分割的单元。

因此，如果您想匹配属于`space`该类或`x`您将使用的单个字符，`[[:space:]x]`或者`[x[:space:]]`

当您要匹配的字符之一是 a`]`时，它将终止括号中的字符列表，除非您对其进行特殊处理。您已经猜到在某处需要反斜杠；一个很好的猜测，但错误。将 a 包含`]`在列表中的方法是将其放在首位。`[ab]c]`是一个包含 2 个字符的括号列表`ab`，后跟 2 个文字匹配字符`c]`，因此它匹配`"ac]"`or `"bc]"`but`[]abc]`是 4 个字符的括号列表，`]abc`因此它匹配`"a"`、`"b"`、`"c"`或`"]"`。

在否定列表中，`]`紧跟在 . 之后`^`。

`[:space:]`因此，将所有这些放在一起，从除类和括号之外的所有字符集中匹配单个字符的方法是：

```
[^][:space:][] 
```

第一个括号和最后一个括号是一对匹配的，即使您认为它们看起来不应该是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:08:47.577

```
$ echo "$line" | sed "s/^.*\[[[:space:]]*\([^]]*[^][:space:]]\)[[:space:]]*\].*$/'\1'/" 
```

您可以将模式一分为二：

```
$ echo "$line" | sed "s/^.*\[[[:space:]]*/'/; s/[[:space:]]*\].*$/'/" 
```

`awk`也可以：

```
$ echo "$line" | awk -F' *[[\]] *' -vQ="'" '{print Q$2Q}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:34:48.550

当您说拆分时，您的意思是*拆分为数组*，还是*过滤*掉所有空格和括号？

假设 file.ini 中第 1 行的值为：

```
 [          fdfd fdf         f   ] 
```

如果你的意思是数组，

```
$linenumber=1;
array=($(sed -n ${linenumber}p file.ini | sed 's/[][]*//g')); 
```

将 file.ini 的第 1 行拆分为一个数组并返回值：

```
${array[0]} = fdfd
${array[1]} = fdf
${array[2]} = f 
```

如果您的意思是过滤空格和括号，

```
$linenumber=1;
sed -n ${linenumber}p file.ini | sed 's/[ []]*//g'; 
```

将返回：

```
fdfdfdff 
```

如果*这些都不*是您的意思，**请指定您希望从初始值中提取的确切输出**，以便我们能够正确解决它。

# windows - 无法使用 Visual Studio 2012 打开 .dmp 文件

> ID：12207544
> 
> 赞同：1
> 
> 时间：2012-08-31T00:46:05.580
> 
> 标签：windows, visual-studio-2012, crash-dumps

我在 Minidump 文件夹中有一些我想查看的文件，因为我正试图追踪我偶尔遇到的一些蓝屏的原因。我的硬盘驱动器配置似乎偶尔也会从 RAID 随机更改为 AHCI，我希望这些文件能给我一些关于发生了什么的线索。我有 Visual Studio 2012，但是当我尝试打开文件时，我得到：

`Debugging older format crashdumps is not supported`

这是什么意思，是否有某种插件可以用于 VS 或可以让我打开这些文件的东西？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:51:51.927

蓝屏死机写入内核转储，[Visual Studio 无法处理](http://connect.microsoft.com/VisualStudio/feedback/details/768951/visual-studio-2012-cant-open-mini-dumps-created-by-windows-7)。

考虑尝试 WinDbg。

# c# - 如何使数据绑定控件刷新通过反射更改的属性值？

> ID：12207546
> 
> 赞同：2
> 
> 时间：2012-08-31T00:46:13.053
> 
> 标签：c#, .net, data-binding, reflection

我使用以下代码将属性绑定到文本框控件（Windows 窗体程序）：

```
textBox.DataBindings.Add("Text", myObject, myPropertyName, false, DataSourceUpdateMode.OnPropertyChanged); 
```

在程序中，我通过反射更新属性的值 - 使用此代码。

```
PropertyInfo propertyInfo = myObject.GetType().GetProperty(myPropertyName);
propertyInfo.SetValue(myObject, myNewValue, null); 
```

对象中的属性值**正在**更新。当代码返回表单时，我可以在调试器中看到它。但是，文本框不显示新值。

如果我清除文本框上的数据绑定并重新添加它，它会显示新值。

通过反射设置属性值后，如何让数据绑定文本框自动显示新值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:05:36.380

如果您设置它不使用反射，绑定是否有效？如果它仍然不起作用，那么您可能需要让您的对象实现 INotifyPropertyChanged，然后在您的设置器中您需要引发 OnPropertyChanged 事件。这就是它在 WPF 中的工作方式，我认为 windows 窗体是相同或相似的。基本上，绑定需要一种方法来知道属性已更改，它通过处理该事件来做到这一点。

# javascript - 从变量切换函数

> ID：12207547
> 
> 赞同：0
> 
> 时间：2012-08-31T00:46:20.333
> 
> 标签：javascript, function, var

假设我有函数`x.a()`和`x.b()`. 我想决定哪个函数通过变量执行，但它不按我的方式工作。这是我的代码，希望你能帮助我。

```
var x = { 
    y: function(f, g){
        f(g);
    }
    a: function(txt){
        console.log(txt);
    },
    b: function(txt){
        console.error(txt);
    }
} 
```

所以当我打电话时`x.y("a", "Some text");`，它和我打电话时一样`x.a("Some text");`。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:49:40.557

使用方括号按名称访问对象的属性：

```
var x = { 
    y: function(f, g) {
        this[f](g);
    },
    a: function(txt) {
        console.log(txt);
    },
    b: function(txt) {
        console.error(txt);
    }
}; 
```

# ios - 如何处理facebook对话框apprequest的取消按钮？

> ID：12207561
> 
> 赞同：3
> 
> 时间：2012-08-31T00:48:21.287
> 
> 标签：ios, facebook, facebook-ios-sdk

如您所知，您可以显示一些 facebook 视图来进行一些操作，例如应用请求、发布等。有一个委托来管理回调，例如 : `dialogDidComplete:`, `dialogDidNotComplete:`. 视图是这样的： ![在此处输入图像描述](../Images/53a0de71007a84b122211a935cf78927.png)

但是取消按钮和分享按钮之间没有区别。您将在`dialogDidComplete:`. 管理取消的唯一方法是角落里的小十字架。就我而言，如果用户按下共享而不是当他按下取消时，我想做一些操作。私人社交网络路径管理这个案例，我想知道如何？

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T07:19:42.220

如果我没记错：

*   如果你按下`Share`你会得到一个`requestID`返回作为返回 URL 的一部分

*   如果您按下`Cancel`您将返回，`dialogDidComplete`但它不会返回`requestID`作为返回 URL 的一部分的返回。

代码：

```
- (void)dialogCompleteWithUrl:(NSURL *)url {
     if (![url query]) {
         NSLog(@"User canceled dialog or there was an error");
         return;
     }
  } 
```

# javascript - 缓存 javascript 失败，因为使用了外部 javascript

> ID：12207562
> 
> 赞同：0
> 
> 时间：2012-08-31T00:49:12.017
> 
> 标签：javascript, caching, minify

我使用 YSlow 来检查我的网络的加载速度。根据规则，最好有一个大的外部 javascript，而不是多个外部 javascript。规则中写了使用大量外部javascript会导致大量http请求，这是不好的。

我正在使用 CKEditor，我想将它与其他 javascripts 组合成一个大的外部 javascript。但是，每次我加载它时，总是会出现错误。阅读代码后，我想我知道它为什么会发生。

```
if ( CKEDITOR.loader )
CKEDITOR.loader.load( 'core/ckeditor' );
else
{
    // Set the script name to be loaded by the loader.
    CKEDITOR._autoLoad = 'core/ckeditor';

    // Include the loader script.
    if ( document.body && (!document.readyState || document.readyState == 'complete') )
    {
        var script = document.createElement( 'script' );
        script.type = 'text/javascript';
        script.src = CKEDITOR.getUrl( '_source/core/loader.js' );
        document.body.appendChild( script );
    }
    else
    {
        document.write(
        '<script type="text/javascript" src="' + CKEDITOR.getUrl( '_source/core/loader.js' ) + '"></script>' );
    }
 } 
```

CK 编辑器似乎加载了其他具有相对位置的外部 javascript。将脚本移动到其他文件中肯定会导致错误。

所以，我的问题是：有什么通用的解决方法吗？我的意思是，它可能是其他具有这种行为的脚本（不仅是 CK-Editor）。

**编辑：**我认为使用 head.js (http://headjs.com/) 是最好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:33:16.610

当尝试一次动态加载所有 JavaScript 时，通常会遇到依赖问题或库冲突问题。

示例：依赖性问题 - 在加载 jQuery 之前需要一个需要 jQuery 的文件。冲突问题 - 在处理大型产品时，您最终可能会遇到冲突的库。例如加载两个具有相同库名称但功能不同的文件。

如果您确实看到速度变慢了，并且想要在文件组合代码中组合所有 JS 文件集依赖项。一个简化的例子是创建一个库数组，这些库在任何主要的 JS 片段之前加载。

希望这有助于解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:20:01.053

好吧，我不知道您使用的是哪种服务器语言，但如果是 PHP，我建议您尝试使用 Smartoptimizer 解决您的连接/缩小问题。

使用它，您只需按照自己的方式添加您的 js，它会负责处理它们。现在，我将它与 YepNope 一起使用，我相信它也可以与 HeadJS 一起使用。

# ruby-on-rails - lazy_high_charts => :formatter 不适用于 dataLabels

> ID：12207564
> 
> 赞同：3
> 
> 时间：2012-08-31T00:49:31.460
> 
> 标签：ruby-on-rails

以下代码：

```
f.series(:data => @values, :dataLabels => { :formatter => "function() { return this.x; }".js_code, :enabled => true, :rotation => 90, :x=>-3, :y=>15, :color=>"#FFFFFF" } ) 
```

...与格式化程序功能除外。当我添加它时，图表无法呈现。否则标签存在、旋转等。

不太清楚为什么下一行包含一个类似的工具提示格式化程序，它确实有效：

```
f.options[:tooltip][:formatter] = "function() { return ''+ this.x +': '+ this.y.toFixed(1) +' %'; }".js_code 
```

参考：[http ://www.highcharts.com/demo/column-rotated-labels](http://www.highcharts.com/demo/column-rotated-labels)

更新：`TypeError: f.formatter.call is not a function`是我在萤火虫中看到的错误。知道这里有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T04:10:53.460

我有同样的问题，我通过添加解决了

```
 <%= raw "options.tooltip.formatter = function() {
        return '<b>' + this.point.name +'</b>: '+ this.y +' %';
      }" %> 
```

在查看文件中。

访问[这里](https://github.com/michelson/lazy_high_charts/wiki/Pie-Chart)以获取更多建议。

# python - 如何让 Python 的单元测试不捕获异常？

> ID：12207568
> 
> 赞同：6
> 
> 时间：2012-08-31T00:49:47.210
> 
> 标签：python, django, debugging, django-unittest

我正在研究一个 Django 项目，但我认为这是一个纯 Python`unittest`问题。

通常，当您运行测试时，异常将被测试运行程序捕获并进行相应处理。

出于调试目的，我想禁用此行为，即：

```
python -i manage.py test 
```

将像往常一样在异常时进入交互式 Python shell。

怎么做？

编辑：根据到目前为止的答案，这似乎比我意识到的更像是一个特定于 Django 的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:00:45.653

您可以使用[django-nose](https://github.com/jbalogh/django-nose)测试运行程序，它适用于`unittest`测试，并运行您的测试，如`python manage.py test -v2 --pdb`. 鼻子会为你运行[pdb](http://docs.python.org/library/pdb.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T04:19:18.240

一个新的应用程序[django-pdb](https://github.com/tomchristie/django-pdb#usage)使它变得更好，支持在常规代码中打破测试失败或未捕获异常的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T14:06:33.713

你可以在你的包中的一个模块中尝试这样的事情，然后在你的代码中使用`CondCatches(`*你的异常：*`)`

```
# System Imports
import os

class NoSuchException(Exception):
    """ Null Exception will not match any exception."""
    pass

def CondCatches(conditional, *args):
    """
    Depending on conditional either returns the arguments or NoSuchException.

    Use this to check have a caught exception that is suppressed some of the
    time. e.g.:
    from DisableableExcept import CondCatches
    import os
    try:
        # Something like:
        print "Do something bad!"
        print 23/0
    except CondCatches(os.getenv('DEBUG'), Exception), e:
        #handle the exception in non DEBUG
        print 'Somthing has a problem!', e
    """
    if conditional:
        return (NoSuchException, )
    else:
        return args

if __name__ == '__main__':
    # Do SOMETHING if file is called on it's own.
    try:
        print 'To Suppress Catching this exception set DEBUG=anything'
        print 1 / 0
    except CondCatches(os.getenv('DEBUG'), ValueError, ZeroDivisionError), e:
        print "Caught Exception", e 
```

# php - 检查数组中的每个元素是否为正整数，而不是浮点数

> ID：12207569
> 
> 赞同：0
> 
> 时间：2012-08-31T00:49:49.323
> 
> 标签：php

首先，我仍然是 php 的菜鸟，我学到的大部分内容来自我自己也遇到过的在这个站点上解决的问题。

我在这里找到了所有原始问题的答案，但是当我把它们放在一起时，我无法让代码工作。

我有一个使用 PHP_SELF 发布给自己的基本表单。我希望检查来自 $_POST 数组的所有输入，以确保它是 (1) 正整数，(2) 整数，以及 (3) 不包括小数。

```
if( !empty($_POST ) ) {
    foreach( $_POST as $key => $amount ) {
        if( !is_int($amount) || $amount < 0 || is_float(amount) ) {
            die( 'All data must be positive integers.' );
        }
    }
} 
```

无论我在任何输入字段中输入什么，它总是返回“死”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T00:54:03.953

`is_float(amount)`

应该

`is_float($amount)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T00:59:26.840

`$amount`是一个字符串，所以[`is_int`](http://www.php.net/manual/en/function.is-int.php)总是会失败，试试[`filter_var`](http://www.php.net/manual/en/function.filter-var.php)吧

```
if( !empty($_POST ) ) {
    $options = array(
        'options' => array(
            'min_range' => 0
        )
    );
    foreach( $_POST as $key => $amount ) {
        if( filter_var($amount, FILTER_VALIDATE_INT, $options) === false ) {
            die( 'All data must be positive integers.' );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:54:51.973

在您的代码中打错字。替换`is_float(amount)`为`is_float($amount)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T00:58:33.653

尝试这个。

```
if(!empty($_POST)) {
    foreach($_POST as $key => $amount) {
        if(!(is_int($amount) && $amount >= 0)) {
            die( 'All data must be positive integers.' );
        }
    }
} 
```

# iphone - 为基于 GPS 位置的应用程序设置 info.plist 属性

> ID：12207570
> 
> 赞同：0
> 
> 时间：2012-08-31T00:49:50.363
> 
> 标签：iphone, ipad, gps, location, info.plist

我正在做一个基于 GPS 位置的应用程序。它是一种 GPS 报警应用程序。为此，我应该在 info.plist 文件的“所需设备功能”下包含哪些属性？我们是否应该同时包含“gps”和“位置服务”？我有一台 iPad...如果我包含“gps”，我的应用程序不会安装在上面。如果我同时包含两者，我的应用可以安装哪些设备？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:25:20.580

[Standard location services](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/cl/CLLocationManager) are available in all versions of iOS 2.0 or higher. Since all iOS (iPhone/iPod Touch/iPad) device have Wi-Fi radio, your application can be installed on those device.

For example: since iPod touch only uses Wi-Fi for Location Services if a Wi-Fi network is available. This means if your application is running with Wi-Fi off, it just won't receive any data. And on iOS 4.0 or higher, the user can disable location services for your application.

If you want gps accuracy, will only install on [iPhone and iPad Wi-Fi + 3G only](http://support.apple.com/kb/HT1975), i.e . devices with cellular radio. It's not available on original iPhone or iPad Wi-Fi.

# java - 以编程方式定期更改桌面壁纸

> ID：12207574
> 
> 赞同：8
> 
> 时间：2012-08-31T00:50:37.837
> 
> 标签：java, c++, windows

创建一个定期更改桌面壁纸的程序的最佳方法是什么？我还想围绕程序创建一个 GUI。我是一名计算机科学专业的学生，​​因此我知道 Java 和 C++ 等基本编程。这将在 Windows 7 操作系统上完成。

对于这样的项目，最好的语言是什么？

理想情况下，我想使用系统时钟来触发更改。这可能吗？

我在我头上吗？

任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T09:17:08.060

在 Java 中：

```
import java.util.*;

public class changer
{
    public static native int SystemParametersInfo(int uiAction,int uiParam,String pvParam,int fWinIni);

    static
    {
        System.loadLibrary("user32");
    }

    public int Change(String path)
    {
       return SystemParametersInfo(20, 0, path, 0);
    }

    public static void main(String args[])
    {
        String wallpaper_file = "c:\\wallpaper.jpg";
        changer mychanger = new changer();
        mychanger.Change(wallpaper_file);
    }

} 
```

在 Win32 C++ 中，您可以使用`SetTimer`来触发更改。

```
#define STRICT 1 
#include <windows.h>
#include <iostream.h>

VOID CALLBACK TimerProc(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime) 
{

  LPWSTR wallpaper_file = L"C:\\Wallpapers\\wallpaper.png";
  int return_value = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, wallpaper_file, SPIF_UPDATEINIFILE);

  cout << "Programmatically change the desktop wallpaper periodically: " << dwTime << '\n';
  cout.flush();
}

int main(int argc, char *argv[], char *envp[]) 
{
    int Counter=0;
    MSG Msg;

    UINT TimerId = SetTimer(NULL, 0, 2000, &TimerProc); //2000 milliseconds

    cout << "TimerId: " << TimerId << '\n';
   if (!TimerId)
    return 16;

   while (GetMessage(&Msg, NULL, 0, 0)) 
   {
        ++Counter;
        if (Msg.message == WM_TIMER)
        cout << "Counter: " << Counter << "; timer message\n";
        else
        cout << "Counter: " << Counter << "; message: " << Msg.message << '\n';
        DispatchMessage(&Msg);
    }

   KillTimer(NULL, TimerId);
return 0;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T00:53:32.690

这是一个相当简单的项目，可以使用任何可以调用 Win32 API 函数的语言（例如 C++）轻松完成。更改墙纸的非显而易见的功能是[`SystemParametersInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)使用`SPI_SETDESKWALLPAPER`标志。你给它一个新图像的文件名，壁纸就会改变。

# filtering - FluentNHibernate 映射与过滤器，这可能吗？

> ID：12207575
> 
> 赞同：1
> 
> 时间：2012-08-31T00:50:55.227
> 
> 标签：filtering, fluent-nhibernate-mapping

我是 NHibernate 和 FluentNHibernate 的新手。我试图找出在不同模式中的表之间设置映射的最佳方法，以及可能在映射中进行一些过滤。

在我的场景中，我有与医院相关联的医生，其中一名医生可以与多家医院相关联。在某些医院，医生可能会被列入执行某些程序的黑名单。黑名单的程度也非常高，我只对黑名单类型为零的人感兴趣。因为表驻留在不同的模式中并由不同的 IT 组管理，所以用于连接的列名并不总是匹配的。我试图找出映射这种关系的最佳方式。

我有部分工作，但我不确定如何设置整个关系，以便我只获得医生具有特定黑名单指定的那些医院。

这是我的实体的精简版。

```
public class Doctor
{
    pubilc virtual int DoctorId { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<BlackListSite> BlackListedSites { get; set; }
}

public class BlackListSite
{
    public virtual int DoctorId { get; set; }
    public virtual int HospitalId { get; set; }
    public virtual int ProcedureId { get; set; }
    public virtual int BlackListTypeId { get; set; }
    public virtual IList<Facility> Facilities { get; set; } //these are the hospitals
}

public class Facility //this represents a hospital
{
    public virtual int FacilityId{ get; set; }
    public virtual string Name { get; set; }
} 
```

这是我正在映射 BlackListSite 和医院的方式，它正在工作。

```
public class BlackListSitesMap : ClassMap<BlackListSites>
{
    public BlackListSitesMap()
    {
        Schema("schema1");
        Table("RestrictedDoctors");
        Id(x => x.BlackListId).GeneratedBy.Identity();
        Map(x => x.DoctorId);
        Map(x => x.HospitalId);
        Map(x => x.Status);
        HasMany(x => x.Facilities).Cascade.All().Not.LazyLoad()
                    .KeyColumns.Add("HospitalID", 
                                mapping => mapping.Name("FacilityID"));
    }
}

public class FacilityMap : ClassMap<Facility>
{
    public FacilityMap()
    {
        Schema("schema2");
        Table("Facility");
        Id(x => x.FacilityId);
        Map(x => x.Name);
        Map(x => x.Active);
    }
} 
```

像这样的查询为我提供了黑名单类型为 0 的黑名单站点列表。

```
public void TestBlackList()
{
    using (var session = SessionManager.Session())
    {
        var blacklist = session.Query<BlackListSites>().
                    Where(b => b.DoctorId == 1 && b.HospitalId != null 
                                && b.Status == 0).ToList();
    }
} 
```

我不知道如何将列入黑名单的网站与医生联系起来，这样当我请求医生时，我会得到一份医生被列入黑名单且黑名单类型为零的网站列表。有任何想法吗？

如果我不能在映射上执行此操作，我能否以某种方式在 Doctor 上设置查询以过滤 BlackListTypeId = 0 的黑名单？无论如何，这可能是最理想的。它会让我在未来请求其他黑名单类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:18:56.650

我会将课程更改为

```
public class Doctor
{
    pubilc virtual int DoctorId { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<BlackListSite> BlackListedSitesTypeZero { get; set; }
}

public class BlackListSite
{
    public virtual Doctor Doctor { get; set; }
    public virtual Facility Hospital { get; set; }
    public virtual int ProcedureId { get; set; }
    public virtual int BlackListTypeId { get; set; }
    public virtual IList<Facility> Facilities { get; set; } //these are the hospitals
}

public class DoctorMap : ClassMap<Doctor>
{
    public DoctorMap()
    {
        ...
        HasMany(x => x.BlackListedSitesTypeZero)
            .KeyColumn("DoctorId")
            .Where("status = 0");
    }
} 
```

然后在映射中指定 where 条件

```
public class BlackListSiteMap : ClassMap<BlackListSite>
{
    public BlackListSiteMap()
    {
        Schema("schema1");
        Table("RestrictedDoctors");
        Id(x => x.BlackListId).GeneratedBy.Identity();
        References(x => x.Doctor, "DoctorId");
        References(x => x.Hospital, "HospitalId");
        Map(x => x.Status);
    }
} 
```

# node.js - everyauth 总是触发授权

> ID：12207578
> 
> 赞同：0
> 
> 时间：2012-08-31T00:52:30.637
> 
> 标签：node.js, oauth-2.0, express, everyauth

我在我的 expressjs 应用程序中使用everyauth 对 37signals 站点进行 oauth 身份验证和授权。但是，这是一个一般性的 oauth 问题。

当用户第一次访问我的应用程序时，他从 37signals 站点对我的应用程序进行身份验证和授权。然后他被重定向到我的应用程序，我将用户信息与访问令牌一起保存在数据库中。现在让我们说，用户注销。如果他尝试登录，他将被迫再次授权我的应用程序。这个不对。我希望everyauth 绕过授权​​步骤，因为它已经完成了一次。这通常是通过在使用 oauth 提供程序站点启动 oauth 流程时传递刷新令牌来完成的。但我不确定everyauth 如何处理第二次登录。有人可以对此有所了解吗？

当用户尝试通过将他重定向到登录时，我启动 oauth 流程`http://localhost/auth/37signals`。

**这是我正在使用的everyauth代码，**

```
everyauth['37signals']
  .appId('e6e76726501abf1b5627fe854b384ef8d62d7a55')
  .appSecret('7c6891f46cb19aaf1831785968630ed4a1b3c342')
  .findOrCreateUser( function (sess, accessToken, accessSecret, _37signalsUser) {
    console.log('inside findOrCreateUser');
    console.log(util.inspect(_37signalsUser));
    var promise = this.Promise();
    users.findOrCreateUser(_37signalsUser, accessToken, accessSecret, promise);
    return promise;

  })
  .redirectPath('/authenticated'); 
```

我实施了 twitter 策略，在这里也遇到了同样的问题。每次用户注销后登录时，都会出现批准屏幕（授权应用名称使用您的帐户）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:47:20.360

[根据此线程https://groups.google.com/forum/?fromgroups=#!searchin/37signals-api/refresh/37signals-api/B59BS-CMxfs/pf3NsaHMUN4J](https://groups.google.com/forum/?fromgroups=#!searchin/37signals-api/refresh/37signals-api/B59BS-CMxfs/pf3NsaHMUN4J)似乎不支持此操作

# xml - 将 XML 标记的内容复制到一组新的 XML 标记中

> ID：12207580
> 
> 赞同：1
> 
> 时间：2012-08-31T00:52:34.843
> 
> 标签：xml, linux, sed

我正在尝试仅使用 Linux CLI 工具处理 XML 文件。我要解决的主要问题是将特定 XML 标记的内容复制到新标记中，如下所示：

```
<date>Wednesday</date>
<name>The Name</name>
<anotherattribute>Attribute</anotherattribute> 
```

进入：

```
<date>Wednesday</date>
<id>The Name</id>
<name>The Name</name>
<anotherattribute>Attribute</anotherattribute> 
```

我一直在尝试使用 sed 来解决这个问题，并且已经能够识别标签，并将其复制到保持缓冲区中：

```
/<name>/{
h
i\
<id>
G
a\
</id>
} 
```

但这会导致：

```
<date>Wednesday</date>
<id>
<name>The Name</name>
<name>The Name</name>
</id>
<anotherattribute>Attribute</anotherattribute> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:33:07.343

试试这个：

```
sed '/<name>/{h;s/name>/id>/g;G}' 
```

* * *

您也可以尝试`xmlstarlet`：

```
cat input.xml |
    xmlstarlet ed -i //name -t elem -n id -v '' |
        xmlstarlet ed -u //id -x '../name' 
```

# ios - 在没有基于导航的应用程序的情况下跳转到下一个视图

> ID：12207582
> 
> 赞同：0
> 
> 时间：2012-08-31T00:52:55.017
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

除了使用基于导航的应用程序之外，还有哪些方法可以更改视图？我希望我的第一个视图基本上只是一个简单的表单，当用户点击“提交”按钮时，我想将他发送到主视图，而无法返回。而且我也不希望视图顶部的栏。

我怎样才能做到这一点，如果可能的话，不会丢失基于导航的应用程序附带的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:03:00.013

你看过 UIViewController 类描述中的 'presentViewController:animated:completion:' 吗？在另一个 viewController 中设置动画的方式有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:08:33.393

Sled，您可以简单地为您的 UINavigationController 隐藏 UINavigationBar。

这样您就不会看到 UINavigationBar 并且用户将无法返回该页面。

您需要在应用程序中设置一个永久标志，或者写入文本文件或使用 NSUserDefaults。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:31:16.680

如果您希望您的应用程序完全没有导航控制器，您可以使用`presentModalViewController:animated:`您认为最适合作为父级的任何 UIViewController 的签名之一。处理提交时的状态更改后，调用`[self dismissModalViewControllerAnimated:YES]`子视图（您要提交的表单）。需要注意的一件事是，从 iOS 5 开始，Apple 现在更喜欢您使用它`presentViewController:`，并`presentModalViewController:`标记为在将来的某个日期弃用。

就“您将如何知道用户提交了表单，因此他们现在可以继续您的应用程序”而言 - 您可以这样做的一种方法是使用委托/通知来保持对表单状态的了解。提交子表单时，您可以调用 parentViewController 的委托回调来设置标志 - 或返回身份验证数据，例如 - 在您的 AppDelegate 或某些高级类中。 [使用 iOS SDK 时，委派](https://stackoverflow.com/questions/7052926/what-is-the-purpose-of-an-ios-delegate)和[通知](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)是有用的工具。

选项二可以在您的调用中使用[完成处理程序](http://developer.apple.com/library/ios/#featuredarticles/Short_Practical_Guide_Blocks/_index.html)来呈现孩子，例如：

```
ChildForm *childFormWithSubmit = [[ChildForm alloc] init];
[self presentModalViewController:childFormWithSubmit animated:YES 
                      completion:^(/*inlineFunctionParams*/) 
                                  { /*inlineFunctionBodyToRunOnCompletion*/ }]; 
```

多种可能~

# php - 在 PHP 中触发和忘记 JSON POST 的最快方法

> ID：12207584
> 
> 赞同：2
> 
> 时间：2012-08-31T00:53:05.033
> 
> 标签：php, json, curl

我目前正在为我正在使用的 PHP 网站构建/实现日志系统。日志系统的工作方式是我向 localhost 发送一个 JSON 请求并且该 json 被记录（基本上，无论如何。

**我的问题是：**

我可以用 JSON POST 快速启动并忘记调用的最快方法是什么？有没有办法用 cURL 触发和忘记？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:21:56.357

有多种方法可以做到这一点：您可以使用扩展的[curl_multi](http://php.net/manual/en/function.curl-multi-init.php)功能`php_curl`，它允许您使用 cURL 发送异步 HTTP 请求，但这需要该扩展。[GuzzlePHP](http://guzzlephp.org)为 cURL 的大部分功能提供了一个大型包装器，包括`curl_multi`如果您正在寻找面向对象方法的特性。[PHP 的套接字也支持异步通信，这里](https://github.com/rdlowrey/Artax)

提供了一个为 HTTP 协议实现此功能的库[客户端是用“纯”PHP 编写的，不依赖 cURL，但支持异步请求并完全符合 HTTP 1.1 规范]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:08:14.970

如果您正在寻找火灾而忘记日志记录解决方案，您可能需要查看使用 UDP 协议的东西，例如 Graylog。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:13:00.717

您可以使用点击 PHP 脚本的小图像。php 脚本记录点击并返回一个微小的 1x1 透明 GIF。然后日志将在页面加载后发生。

# jquery - Jquery点击功能只触发一次

> ID：12207586
> 
> 赞同：0
> 
> 时间：2012-08-31T00:53:32.487
> 
> 标签：jquery, function, click, var

我正在使用翻书插件，[Jquery Booklet](http://builtbywill.com/code/booklet/)，其中一个功能是转到翻书中的特定页面。

```
.booklet("gotopage", index) 
```

我正在制作一个包含小缩略图布局的模式，我希望能够在其中单击缩略图，关闭模式，然后小册子页面将打开到图像所在的特定页面。我正在尝试以下代码，该代码第一次有效，但后续无效。任何帮助，将不胜感激！

```
 $('.item a .counter').click(function(e){
   e.preventDefault();
   var gotoimage = $(this).text();
    $('#mybook').booklet("gotopage", gotoimage);
    $('#thumbs').modal('hide');
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:07:05.633

可能是您的模态被动态注入到 DOM，在您的绑定发生后，您可以在这种情况下使用一些委托，

```
 $(document).on('click','.item a .counter',function(e){
   var gotoimage = $(this).text();
    $('#mybook').booklet("gotopage", gotoimage);
    $('#thumbs').modal('hide');
    return false;
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:02:20.983

在对我的原始代码感到沮丧之后，我想出了如何使用以下代码来做到这一点：

```
$(".item a").click(function () {
var index = $(".item a").index(this) + 2;
$('#mybook').booklet("gotopage", index);
$('#thumbs').modal('hide');
return false;
}); 
```

由于我的 Thumb 画廊和 Booklet Flipbook 具有相同的图像索引 #，因此它可以工作。我只需要添加 + 2，因为我意识到小册子有封面和封底，所以我需要让索引从 2 个数字开始，而不是从 0 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:13:46.090

$('.item a .counter') 是动态加载的吗？还是它们都在一开始就加载到页面中？

如果它们是在页面加载后加载的，您应该尝试使用 .live 而不是 .click

你在jsfiddle中有这个吗？

# c# - 如何将 DLL 引用添加到 .NET WebAPI 项目？

> ID：12207587
> 
> 赞同：3
> 
> 时间：2012-08-31T00:53:36.640
> 
> 标签：c#, .net, asp.net-web-api

我正在使用 Visual Studio 2012 和 .NET 4.5 以及新的 WebAPI 项目类型。但是，我无法将对我的类库项目的引用添加到 WebAPI 项目。这需要是一个“可移植类库”项目还是可以是一个常规项目？没有错误，只是没有添加！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:23:11.233

好的，所以在 Visual Studio 2012 中，在添加引用菜单中，您要添加的每个引用旁边都有一个复选框。

这是非常不直观的。我们不再通过突出显示来选择事物，而是移至复选框。

# python - sqlite3 插入或替换覆盖字段？

> ID：12207590
> 
> 赞同：0
> 
> 时间：2012-08-31T00:54:08.530
> 
> 标签：python, sqlite

我有一本使用了几年的成绩册。我正在尝试清理它，因为一位同事想要使用它，但它并不是真正的用户准备好，只是个人准备好。无论如何，我试图自动更新我的学生名单。我尝试了以下方法：

```
import csv
import sqlite3
f = csv.reader(open('students.csv'))

db = sqlite3.connect('gradebook.db')
cursor = db.cursor()

for row in f:
    print row
    cursor.execute('INSERT OR REPLACE INTO students (id, name, class, gender, birthday, something, period, section_number, subject, begin_date, end_date, status, absents, tardies) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)', row)

db.commit()
db.close() 
```

这适用于新生，但是，我的数据库中还有几列未被学校的 CSV 转储引用（笔记、当前章节等）。当我运行上面的代码时，我在非引用列中的所有内容都设置为 NULL。有没有办法保留执行命令中未引用的列？

编辑：由于我的无能，尝试了很多不同的东西，但没有任何效果。在循环中结束了以下内容，只是得到了一个错误：

```
cursor.execute('INSERT OR REPLACE INTO students (notes, id, name, class, gender, 
    birthday, something, period, section_number, subject, begin_date, end_date, 
    status, absents, tardies) VALUES ((select notes from students where id = 
    row[0]),?,?,?,?,?,?,?,?,?,?,?,?,?,?)', row) 
```

这是我要保存的笔记。可以根据学生 ID 更新所有其他字段。我暂时放弃了。变得太沮丧了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:55:06.167

好吧，永远无法弄清楚 INSERT OR REPLACE 格式。结束只是运行和 UPDATE 查询，然后是 INSERT（捕获主键上的错误）。适用于我正在做的事情。真的似乎应该有一种优雅的方式。UPSERT。任何。

# jquery - Fancybox 2 未在 Rails 中加载

> ID：12207596
> 
> 赞同：0
> 
> 时间：2012-08-31T00:55:12.477
> 
> 标签：jquery, ruby-on-rails, fancybox

我在我的 Rails 3.2 应用程序的供应商资产目录中安装了 FancyBox（例如 jquery.fancybox.pack.js、jquery.fancybox.css 以及供应商资产文件夹中各自目录中的相关图像，没有额外内容）。

javascript 和 CSS 资产加载到资产管道的 application.js 和 application.css 文件中。而且，我已经测试并确认它们确实有效，因为单击时会正确弹出图像。

问题是无法加载 YouTube 视频模式。相反，它只显示每秒左右闪烁的加载 GIF。

这是 jQuery (CoffeeScript) 代码：

```
$(document).ready ->
  $(".videopopup").fancybox
    maxWidth: 800
    maxHeight: 600
    fitToView: false
    width: '70%'
    height: '70%'
    autoSize: false
    closeClick: false
    openEffect: 'none'
    closeEffect: 'none'
  return 
```

这是页面内的链接代码：

```
<%= link_to image_tag('thumbnail.png', alt: 'Thumbnail', class: "responsive"), 'http://www.youtube.com/embed/myvideocode?fs=1&autoplay=1', class: 'videopopup', title: 'My Video' %> 
```

我在 localhost 上运行它，这可能是问题所在。在 Chrome 中，我查看了控制台，发现以下错误：

> XMLHttpRequest 无法加载[http://www.youtube.com/embed/myvideocode?fs=1&autoplay=1](http://www.youtube.com/embed/myvideocode?fs=1&autoplay=1)。Access-Control-Allow- Origin`http://localhost:3000`不允许来源

有谁知道这个错误是什么意思？我已经看到了一些关于这个错误的 SO 问题，但是没有关于如何在 Rails 中克服它的具体解决方案。或者，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:31:50.940

实际上，您发布的错误消息是自我解释的 - 由于安全限制，不允许 ajax 请求。

真正的问题是 - 为什么脚本会发出 ajax 请求，因为它应该创建一个 iframe。看起来脚本无法猜测内容类型，正如 JFK 已经提到的，您可以通过添加类名“fancybox.iframe”来提供帮助。

# c# - SocketIO4Net.Client 订阅频道

> ID：12207600
> 
> 赞同：0
> 
> 时间：2012-08-31T00:56:11.473
> 
> 标签：c#, .net, websocket, socket.io

我想从使用 SocketIO4Net.Client 的客户端订阅 socket.io 频道

鉴于库中没有实现订阅操作或订阅消息类型，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:12:46.770

在 SocketIO4Net.Client 中订阅频道/房间有 3 种基本方式：

[来自文档]

在 .net 客户端中注册 Socket.IO 事件消息可以通过多种方式完成：

使用 Action 委托 使用带有匿名方法的 Action 委托 在 .On(eventName, Action) 方法中使用 lambda 表达式到 Action 委托实例（首选）。默认情况下，接收到的所有消息都通过 Message 事件公开。通过 .On() 方法注册的事件消息将跳过 Message 事件通知。

一般方法如下：

```
socket.On("news", (data) =>
{
    var raw = data.RawMessage();                            
}); 
```

有相当数量的[文档][1]

[1]：[http](http://socketio4net.codeplex.com/documentation) ://socketio4net.codeplex.com/documentation ，有没有特别提到的东西（如果有，会添加）？

# excel - 我可以向命名范围添加值吗？

> ID：12207603
> 
> 赞同：1
> 
> 时间：2012-08-31T00:56:19.537
> 
> 标签：excel, validation, excel-formula

我在 Excel 工作表中有一个命名范围设置，用于为数据验证下拉菜单提供值。我的源公式基本上是这样的：

```
=INDIRECT( "OnePartOfTheRangeName" & "AnotherPart" ) 
```

范围会根据行中的另一个值而变化，所以这就是我必须组合字符串等的原因。

我想在数据验证列表中添加一个额外的值，但没有任何运气。我认为如果有某种“联合”函数，我可以将 INDIRECT 列表与单个值结合起来，但我一直无法找到这样的函数。

有谁知道另一种方法来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T03:28:24.060

Excel 在其错误消息中非常具体（确实，这是一个不错的变化！）：

[![SO12207603 示例](../Images/0400f366b0091f6f8cd6ca7cfd73695f.png)](https://i.stack.imgur.com/NJSJH.jpg)

所以我怀疑尝试直接方法是否值得付出太多努力。我牢记，三年多来没有解决一个完全可以理解的问题可能意味着“不可能”。

但是，可能会使用间接方法，尽管*可能*会缺少一些细节 - 例如，目前您的命名范围是如何构建的。出于说明的目的，假设它被命名`Part1`并引用 R1:R12，末尾有空格（以留出扩展空间），中间有空格（以显示多功能性）。假设“另一部分”被命名`Part2`并指代 S1:S10，中间和结尾（以及开头）也有空格。

然后，数据验证可能是一个列表，其 Source:`=whole`是范围 T1:T22 命名的`whole`。

然后 T1 将填充：

```
=IFERROR(INDEX(Part1,SMALL(IF(ISBLANK(Part1),"",ROW(Part1)-MIN(ROW(Part1))+1),ROW(A1))),IFERROR(INDEX(Part2,SMALL(IF(ISBLANK(Part2),"",ROW(Part2)-MIN(ROW(Part2))+1),ROW(A1)-SUMPRODUCT(--NOT((ISBLANK(Part1)))))),"")) 
```

（由 Get Digital Help 提供）使用 ++ 输入并`Ctrl`复制到 T22。 `Shift``Enter`

这是动态的，例如在 ColumnR 中添加一个条目会将其添加到 ColumnT 中，而后者又会添加到验证下拉列表中。

缺点包括如果条目未排序，则下拉列表未按顺序排序，并且“扩展空间”在下拉列表中仍然很明显`S`。`T`

# uiviewcontroller - 在 Tab Bar 按下时触发模态视图控制器的最佳方式。

> ID：12207604
> 
> 赞同：1
> 
> 时间：2012-08-31T00:56:31.190
> 
> 标签：uiviewcontroller, uitabbarcontroller, uitabbar, uitabbaritem, uimodalpresentationstyle

当用户触发一个标签栏项目时，我想显示一个模态视图控制器。

我有一些工作，但这可能不是最干净的方法。它还可以防止 UITabBarItem 处于选中状态。

我所做的是将此方法设置为 false 并在该方法主体中呈现视图控制器（通过 RootViewController）。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    UINavigationController *nvc = (UINavigationController*)viewController; 
```

你们有什么想法可以让 TabBarItem 被突出显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:40:32.600

这是在标签栏上使用 MVC 的一种方法......像这样突出显示标签栏项目。

当前选择的id；//这将保存所选视图id的地址 dontAllowSelection; //这将保存拒绝视图的地址

*   (BOOL)tabBarController:(UITabBarController *)tabBarControllers shouldSelectViewController:(UIViewController *)viewController

{

if (dontAllowSelection != nil && //如果是nil，我们将跳过它。dontAllowSelection == viewController) //如果选择的视图被拒绝返回NO {

返回否；

```
} 
```

当前选择 = 视图控制器；

```
if (currentlySelected == someViewIWantToDisableOtherFor) //Any logic can go here to enable the Denied View.

{
    dontAllowSelection = anotherViewIWantDisabled; //Set my denied view.

}

else
{

    dontAllowSelection = nil; //Unsed the Denial.
}

return YES; 
```

}

# android - 在代码中启动一个线程

> ID：12207606
> 
> 赞同：0
> 
> 时间：2012-08-31T00:57:01.283
> 
> 标签：android, multithreading

如何在此代码中启动线程？在哪里以及如何启动线程活动，因为我的应用程序在转到这部分代码时停止。

```
public class Lesson_p extends Activity implements OnClickListener {

MediaPlayer p, p_sound;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lesson_p);
    p = MediaPlayer.create(this, R.raw.p);
    p_sound = MediaPlayer.create(this, R.raw.p_sound);

    View p = findViewById(R.id.imageButton_p);
    p.setOnClickListener((OnClickListener)this);

    View p_sound = findViewById(R.id.imageButton_pp);
    p_sound.setOnClickListener((OnClickListener)this);

    Button back = (Button) findViewById(R.id.button_bckp);
    back.setOnClickListener((OnClickListener)this);

    Button next = (Button) findViewById(R.id.button_nxtp);
    next.setOnClickListener((OnClickListener)this);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
     switch(v.getId()){
        case R.id.imageButton_p:
            p.start();
            break;

        case R.id.imageButton_pp:
            p_sound.start();
            break;

        case R.id.button_bckp:
            Intent back = new Intent(this, Example_n.class);
            startActivity(back);
            break;

        case R.id.button_nxtp:
            Intent next = new Intent(this, Example_p.class);
            startActivity(next);
            break;

        }

}
//@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    p.release();
    p_sound.release();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:02:47.083

看看这堂课

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

如果您想在后台执行某些操作，这是一个有用的类，但请记住线程不能直接与主 UI 线程中的元素交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:19:15.920

您说它在`button_nxtp`函数中停止（这不是函数，它只是开关中的某种情况）。

看起来您正在为`Example_p`活动创建和启动 Intent。使用调试器逐步检查类的`onCreate()`和`onStart()`方法，`Example_p`您应该能够找到错误。

# jquery - 加载后在弹出窗口中加载用户控件

> ID：12207621
> 
> 赞同：0
> 
> 时间：2012-08-31T00:59:51.483
> 
> 标签：jquery, asp.net, user-controls, popup, modalpopupextender

我正在尝试在弹出窗口中加载用户控件，但是在触发以减少主页加载时间之后，是否可以使用 Ajax ModalPopUp Extender 或者是否有任何其他建议的弹出窗口。我可以使用框架而不是用户控件或相同的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:14:25.937

由于您使用的是 ASP.NET，一个简单的选择是使用 jQuery UI 和一个简单的 div/iframe 作为弹出窗口。

JavaScript：

```
<script type="text/javascript">
    function showPanel(panelID, pageUrl) {
        $panel = $('#' + panelID);

        $panel.html('<iframe src="' + pageUrl + '"></iframe>');
        $panel.dialog();
    }
</script> 
```

ASPX：

```
<asp:LinkButton runat="server" id="lbtn1" OnClientClick="showPanel('dialog', '/myControlPage.aspx');return false;">
  Show Popup
</asp:LinkButton>
<div id="dialog">
</div> 
```

如果你的 ASPX 控件是只显示的，你可以使用 AJAX 来检索页面的内容：

```
<script type="text/javascript">
function showPanel(panelID, pageUrl) {
    $panel = $('#' + panelID);

    $.ajax({
        url: pageUrl,
        type: "GET",
        dataType: "html",
        async: false,
        data: {},
        success: function (obj) {
            $panel.html(obj).html();
            $panel.dialog();
        }
    });
}
</script> 
```

但这限制了嵌入页面“正确”回发的能力。任何回发都将只显示内页，并在从回发返回时完全删除“父”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:37:59.460

您可以使用 updatePanel 来实现这一点。

这里是[更新面板的介绍](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

将您的用户控件封装在更新面板中并将其设置为可见 false。将控件设置为可见 false 确保不呈现它，因此它不会影响您的加载时间。

然后，您可以使用更新面板上的回发触发器使控件可见并显示其内容。

您可以在几毫秒后使用计时器作为加载触发器。在回发时禁用计时器。这是[使用计时器刷新更新面板的教程](http://msdn.microsoft.com/en-us/library/cc295400.aspx)。

更新面板上的回发是通过 ajax 触发的。为此所需的所有 javascript 都是由更新面板控件本身生成的。

使用它的好处是用户控件仍然在同一页面上，并且可以与页面上的其他控件进行交互。

# ios - 如何理解 table.autoresizingMask 的行为？

> ID：12207633
> 
> 赞同：1
> 
> 时间：2012-08-31T01:02:10.093
> 
> 标签：ios, uitableview, uiviewcontroller

我了解到`UITableView`，在单视图应用程序中设置覆盖整个主视图（全宽和全高）的正确方法是`viewDidLoad`：

```
table = [[UITableView alloc] initWithFrame:self.view.bounds];
table.autoresizingMask = UIViewAutoresizingFlexibleWidth | 
                             UIViewAutoresizingFlexibleHeight;
[self.view addSubview:table]; 
```

请注意，如果物理 iPad 2 处于横向模式，并且`self.view.bounds`上面打印在里面`viewDidLoad`，它将显示： `{{0, 0}, {768, 1004}}`。所以我认为这个想法是：不要担心宽度和高度不正确，因为`UIViewAutoresizingFlexibleWidth`and`UIViewAutoresizingFlexibleHeight`会自动设置正确的宽度和大小。

所以我实际上尝试将上面的第一行替换为：

```
table = [[UITableView alloc] init]; 
```

或者

```
table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)]; 
```

甚至

```
table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 1004, 768)]; 
```

或最终的“正确值”：

```
table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 1024, 748)]; 
```

当 iPad 2 处于横向位置时。但是现在表格不会完全扩展到整个主视图。那么这里的管理原则是什么？宽度和高度可以设置错误，但一定是错误的`{768, 1004}`？它不能与其他值“不正确”吗？如果没有`CGRect`给出，或者给出了一些虚拟值，那么无论是横向还是纵向模式`{200, 200}`，代码应该如何使表格具有完整的主视图的宽度和高度？`viewDidLoad`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:36:39.710

不要使用`bounds`，`frame`改用：

```
table = [[UITableView alloc] initWithFrame:self.view.frame];
table.autoresizingMask = UIViewAutoresizingFlexibleWidth | 
                         UIViewAutoresizingFlexibleHeight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:40:31.633

UIAutoresizingFlexibleWidth 表示当其父视图的宽度扩大和缩小时，视图的宽度会扩大和缩小。UIAutoresizingFlexibleHeight 对高度意味着同样的事情。添加这些相当于在 Interface Builder 中打开“弹簧”。我认为如果没有设置“struts”，当超级视图的宽度加倍时，视图的宽度也会加倍。

支柱设置是：

*   UIViewAutoresizingFlexibleRightMargin
*   UIViewAutoresizingFlexibleLeftMargin
*   UIViewAutoresizingFlexibleTopMargin
*   UIViewAutoresizingFlexibleBottomMargin

如果 UIViewAutoresizingFlexibleRightMargin 未设置，则打开右支柱。这意味着当视图扩展时，视图右侧与其父视图右侧之间的空间不会改变。相同的概念适用于所有其他边距。

这里也有很好的讨论：[https](https://stackoverflow.com/a/10470469/472344) ://stackoverflow.com/a/10470469/472344 。

我认为您对获得的 self.view.bounds 感到困惑。这是旋转前视图的边界，因为 jrturton 指出高度是 1004，因为状态栏减去了 20 个像素。我不知道为什么旋转后宽度和高度没有更新（我假设您的旋转发生在加载视图之前，否则打印出的边界正是您应该期望的），但我也注意到了这一点回转。我在 Stackoverflow 上看到过一些关于此的讨论，但目前我找不到。

我的猜测是，正如 jrturton 所说，加载视图时，它使用 xib（或情节提要）中设置的边界，并且在 viewDidLoad 之后调整大小。也许尝试在 viewDidAppear 中打印出 self.frame.view 的边界，因为那时边界应该已经改变了。

要再次解决自动调整大小掩码设置的行为，请了解除非视图的超级视图更改大小，否则这些不会执行任何操作。自动调整大小掩码设置将告诉您的视图如何在其超级视图更改大小时自动调整大小。如果您希望您的表格视图始终具有与 self.view 相同的大小（例如在旋转或缩放之后），您需要完全按照您所做的那样设置它：

```
table = [[UITableView alloc] initWithFrame:self.view.bounds];
table.autoresizingMask = UIViewAutoresizingFlexibleWidth | 
                         UIViewAutoresizingFlexibleHeight;
[self.view addSubview:table]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:05:58.497

1004 是正确的 - 状态栏是 20px。您的第一个代码段很好。

请注意，在 viewDidLoad 中，您的视图方向仍然是纵向的 - 因此您看到的数字。调整大小发生在之后。使用主视图的边界矩形作为子视图的框架将始终让子视图填充整个视图。

# c++ - C++中的map数据结构是什么

> ID：12207634
> 
> 赞同：4
> 
> 时间：2012-08-31T01:02:18.007
> 
> 标签：c++, data-structures, stl, map, std

C ++中用于以下代码行的数据结构是什么？

```
map <char, int> dict; 
```

是哈希表吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T01:09:08.917

`std::unordered_map`使用散列来存储它的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T01:35:41.533

该标准没有对`std::map`. 它只给出所需的操作及其复杂性。这些因素导致了实际的实现选择，通常是[Red-black Tree](http://en.wikipedia.org/wiki/Red-black_tree)。

列出要求的章节`std::map`在 `23.2.4 Associative Containers`C++11 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:03:36.833

它*通常*使用自平衡 BST 来实现。实现实际上是特定于编译器的。

```
std::map<char, int> dict; 
```

A`char`是键，而 an`int`是对应的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T05:19:28.157

它使用红黑树按顺序组织键。

这就是为什么你可以按升序迭代它，并且关键对象必须有 operator< 重载。

# java - StringBuffer 刽子手

> ID：12207636
> 
> 赞同：-2
> 
> 时间：2012-08-31T01:02:40.313
> 
> 标签：java

在我的刽子手应用程序中，我想用“_”隐藏一个可能被猜到的词，我终于找到了一个网站，有人解释了如何做到这一点，但是当我将他的代码与我的代码融合时，我运行时似乎出错了它...

这是我找到代码的网站

[http://www.jcreator.com/forums/index.php?showtopic=7761](http://www.jcreator.com/forums/index.php?showtopic=7761)

这就是我尝试使用他的代码的方式

```
StringBuffer original = new StringBuffer(readWord());
StringBuffer secret = new StringBuffer(hideWord()) ;
StringBuffer hidden; 
```

* * *

```
 public StringBuffer hideWord(){
    for (int i = 0; i < original.length(); i++){
        hidden.append("_ ");
    }
    hidden.deleteCharAt(hidden.length()-1);
    return hidden;
} 
```

* * *

```
 public JButton getButton(final String text){
   final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             String s = button.getText();
             int index = original.indexOf(s);
             if(index != -1){
                 hidden.deleteCharAt(index*2);
                 hidden.insert(index *2, s);
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no " + text );
                 error++;
                    if(error >= 0) imageName = "hangman1.jpg";
                    if(error >= 1) imageName = "hangman2.jpg";
                    if(error >= 2) imageName = "hangman3.jpg";
                    if(error >= 3) imageName = "hangman4.jpg";
                    if(error >= 4) imageName = "hangman5.jpg";
                    if(error >= 5) imageName = "hangman6.jpg";
                    if(error >= 7) imageName = "hangman7.jpg"; 
             }
             }
             });
             return button;
} 
```

并且在显示单词时似乎我的 JLabel 出现问题，所以我将其更改为 .toString

```
JLabel word = new JLabel(secret.toString()); 
```

有人可以告诉我我的应用程序不想运行吗，以及我融合代码的方式是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:08:43.110

`StringBuffer`不是一个`String`。

当您调用时，`new JLabel(secret)`您是在要求编译器找到一个构造函数，`JLabel`该构造函数将 a`StringBuffer`作为参数，但没有任何参数。

正如 HovercraftFullOfEels 所说，在实施任何其他人的想法之前，了解这些想法是什么以及它们是如何工作的，不仅你会得到更好的结果，而且你会成为一个更好的开发者；）

# eclipse - Eclipse Juno：如何更改代码折叠区域的背景

> ID：12207637
> 
> 赞同：5
> 
> 时间：2012-08-31T01:02:43.490
> 
> 标签：eclipse, eclipse-plugin

![在此处输入图像描述](../Images/642027be88d982a0b0e4820cc7d319eb.png)

我目前正在使用 Eclipse Juno（截至 2012 年 8 月 30 日的最新版本）。我使用 Eclipse Color Theme 插件切换到深色主题。

我修改了一些背景颜色以匹配这个黑暗的主题。但是，我永远找不到更改代码折叠区域（行号和代码之间的空间）背景的选项。

请帮我改变这个背景颜色！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T19:13:28.677

通过执行以下操作，我能够在安装了 Dark Juno 主题的**Ubuntu**上使用**Eclipse-Juno解决这个问题：**

 ***   点击**Window->Preferences**打开你的**Preferences**面板
*   打开您正在使用的语言的选项卡。对我来说，这是 C/C++
*   转到**折叠**，然后取消选中**“打开新编辑器时启用折叠”**。
*   单击*应用*和*确定*。

![在此处输入图像描述](../Images/aff4aae9de61e7fe790a925db67f4f16.png)

现在回到您的编辑器，关闭并重新打开您可能打开的所有编辑器（重新启动 Eclipse 也应该可以工作）。默认代码折叠将与白色背景一起消失。

您可以随时通过键入**CTRL + NUMPAD_DIVIDE**重新启用代码折叠（黑色背景） 。

![在此处输入图像描述](../Images/e1439115297f98f4a4ac0a1819acb7b8.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T01:30:02.043

要解决此问题，请在文本编辑器中打开以下文件：

```
org.eclipse.ui.editors.prefs 
```

打开后查找以下行：

```
printMarginColor=101,101,101 
```

数字代表 RGB 格式的当前页边距颜色。只需将颜色更改为您想要的颜色，保存并关闭编辑器。保存并关闭 Eclipse 中的任何编辑器选项卡式窗口，然后重新打开它们。

如果您在 Linux 中，该`org.eclipse.ui.editors.prefs`文件将位于以下位置：

```
~/[your workspace folder]/.metadata/.plugins/org.eclipse.core.runtime/.settings 
```**

# eclipse - 构建项目时，带有 Blackberry 插件的 Eclipse 挂在“正在分析源”

> ID：12207645
> 
> 赞同：2
> 
> 时间：2012-08-31T01:04:13.613
> 
> 标签：eclipse, blackberry, blackberry-eclipse-plugin

我启动了黑莓项目并选择了构建项目，它达到了 100%，然后留下了“正在分析源”的消息。

我试图编译几个黑莓项目并遇到了同样的问题。

重新安装了eclipse和java jre，没有运气。

环境：我安装了 BlackBerry_JDE_PluginFull_1.5.2_indigo 和 BlackBerry Simulator_6.0.0.723_9700 操作系统：Windows 7 64 Jre 7 和 6 安装了 32 Blackberry JRE 6

谢谢你的帮助

# sql - 基于条件的 SQL 查询连接

> ID：12207648
> 
> 赞同：1
> 
> 时间：2012-08-31T01:04:54.757
> 
> 标签：sql, oracle

我有两个表“客户”和“激活”，我想加入。以下是它们的结构：

```
 CUSTOMER                       Activation
 ------------                  ------------- 
 Id      Name                   EntityId       Date_Created       Type
 1       A                         1               2012            EMAIL
 2       B                         2               2011            SMS
 3       C 
```

现在，我想在 customer.Id = Activation.EntityId 上加入这两个表。但是，我希望我的最终表结构是这样的：

```
 Id    Name    Date_Email       Date_SMS       

 1      A        2012             NULL
 2      B        NULL             2011 
```

基本上，列 Date_Email 和 Date_SMS 都来自 Activation.Date_Created 列。如果 Activation.Type 是 EMAIL，我将最终结果中的 Date_Email 设置为 Date_created，并将 Date_SMS 设置为 null。如果 Activation.type 是 SMS，我会采用另一种方式。

我现在拥有的是这样的：

```
SELECT Customer.Id, Name, Date_Created AS Date_EMail, DATE_Created AS Date_SMS 
from Customer 
inner join Activation ON Customer.Id = Activation.EntityId; 
```

现在，我需要根据 Activation.Type 列创建一个 If-else 条件。我对此很陌生，我无法通过谷歌搜索来解决这个问题。我正在使用 Oracle XE 数据库顺便说一句

有人可以帮我弄这个吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:09:07.590

```
SELECT Id, Name, A1.Date_Created as Date_Email, A2.Date_Created as Date_SMS FROM
CUSTOMER C
LEFT JOIN Activation A1 ON C.Id=A1.EntityID AND A1.Type='EMAIL'
LEFT JOIN Activation A2 ON C.Id=A2.EntityID AND A1.Type='SMS' 
```

这也添加了 ID=3 的实体，其中`Date_Email`和`Date_SMS`为空。我不知道 Oracle 的语法，你可以删除 ID=3 类似`WHERE NOT (IsNull(Date_Email) && IsNull(Date_SMS))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:09:31.913

您需要加入两次，每种类型一次（并使用 LEFT JOIN 允许空值）：

```
SELECT Customer.Id, Name, ActEmail.Date_Created AS Date_EMail, ActSMS.DATE_Created AS Date_SMS 
FROM Customer 
LEFT OUTER JOIN Activation AS ActEmail ON Customer.Id = ActEmail.EntityId AND ActEmail.Type = 'EMAIL'
LEFT OUTER JOIN Activation AS ActSMS ON Customer.Id = ActSMS.EntityId AND ActSMS.Type = 'SMS' 
```

# html - 在下拉菜单中将元素居中对齐

> ID：12207652
> 
> 赞同：1
> 
> 时间：2012-08-31T01:05:09.643
> 
> 标签：html, css

好的，我在下拉栏中将图像居中时遇到问题。我试图让它向右浮动并居中，但它拒绝了。这是我的代码：

```
 <!DOCTYPE html>

<html>
<head>
    <title>McBride-Taylor Inc.</title>
    <link rel="shortcut icon" href="/Resources/img/favicon.ico"/>

 <style type="text/css">   
body {
    margin:0;
    padding:0;
    background:#000000
}

.content {
    background:#FFFFFF;
    max-width:80%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 1.5em;
    font: 80% arial;
    border-radius: 5px;
}

.menu {
    font: 67.5% "Lucida Sans Unicode", "Bitstream Vera Sans", "Trebuchet Unicode MS", "Lucida Grande", Verdana, Helvetica, sans-serif;
    font-size:14px;
    font-weight:bold;
    background:#FFFFFF;
    height:50px;
    list-style:none;
    margin:0;
    padding:0;

    border-radius: 15px;
}

.menu > li {
    float:left;
    padding:0px 0px 0px 15px;
}

.menu a {
    color:#000000;
    display:block;
    font-weight:normal;
    line-height:50px;
    margin:0px;
    padding:0px 25px;
    text-align:center;
    text-decoration:none;
}

.menu a:hover{
    background:#000000;
    color:#FFFFFF;

    -webkit-box-shadow: inset 0px 0px 7px 2px rgba(0, 0, 0, .3);
    -moz-box-shadow: inset 0px 0px 7px 2px rgba(0, 0, 0, .3);
    box-shadow: inset 0px 0px 7px 2px rgba(0, 0, 0, .3);
}

.menu li ul {
    display:none;
    height:auto;
    padding:0px;
    margin:0px;
    position:absolute;
    width:200px;
    z-index:200;
    background:#FFFFFF;

    border-bottom-left-radius: 15px;
    border-bottom-right-radius: 15px;
}

.menu li:hover ul {
    display:block;      
}

.menu li li {
    display:block;
    float:none;
    width:200px;
}
?
  </style>
</head>

<body>  
<img src="/Resources/img/Header.png" width=100% style={margin:0;padding:0;}/>

<div>
<ul class="menu">
   <li><a href="/index.html" >Home</a></li>
   <li><a href="#" id="current">About</a>
       <ul>
           <li><a href="/About+Us.html">Company Info</a></li>
       </ul>
   </li>
   <li style="float: right;"><a href="https://www.facebook.com/McBrideTaylorInc"><img src="/Resources/img/facebook.png"/></a></li>
</ul>
</div>

<div class="content">
    <h2 style="text-align: center">About McBride-Taylor</h2>
</div>
</body>
</html> 
```

我把它托管在这里以防您需要查看它： http: [//mcbtaytest.zymichost.com/About+Us.html](http://mcbtaytest.zymichost.com/About+Us.html)因为您可以看到它是正确刷新但未垂直对齐。我也试过 v-align 无济于事。

编辑：我注意到文本对齐并将其删除。我意识到这不会改变任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:13:51.440

你是说脸书的图片吗？

只需添加`vertical-align: middle;`它。

也许问题是您尝试过`v-align`，但它是`vertical-align`.

但是你不应该使用内联样式。相反，您应该使用 classes/id：

```
<li class="facebook">
    <a href="https://www.facebook.com/McBrideTaylorInc">
        <img src="/Resources/img/facebook.png">
    </a>
</li> 
```

然后设置样式：

```
.facebook{
    float: right; text-align: center;
}
.facebook>a>img{
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:16:59.213

只需`vertical-align: middle`在您的图像中使用

```
<img src="/Resources/img/facebook.png" style="vertical-align: middle" /> 
```

# c - 如何使用递归 [C] 对数字的位数求和？

> ID：12207653
> 
> 赞同：-7
> 
> 时间：2012-08-31T01:05:24.953
> 
> 标签：c, recursion, sum, digits

例如，数字是 123，答案是 6。只有递归！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:14:40.633

虽然@SamGrondahl 走在正确的轨道上，但不幸的是，如果您输入一个负数，它会产生意想不到的结果。这应该适用于负数：

```
int sumdigits(int number) {
    int sign = number < 0 ? -1 : 1;
    number = sign * number; // abs the number

    if (number < 10) 
        return sign * number;
    else 
        return sign * (number % 10 + sumdigits(number / 10));
} 
```

这将返回数字的总和，如果数字为负数，则取反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:24:24.780

正确答案比乍一看更难实现，因为 的否定`INT_MIN`可能不适合`int`. 发布的解决方案在很大程度上可以通过更改它们的实现以`unsigned int`在递归期间使用。下面是一个替代方案。

```
int sum_digits_recursively (char digits[], int i) {
    if (i == 0 && digits[i] == '-') return -sum_digits_recursively(digits, 1);
    if (digits[i] == '\0') return 0;
    return (digits[i]-'0') + sum_digits_recursively(digits, i+1);
}

int sum_digits (int x) {
    char digits[sizeof(x) * CHAR_BIT];
    snprintf(digits, sizeof(digits), "%d", x);
    return sum_digits_recursively(digits, 0);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T01:09:43.253

这应该做你想要的：

```
int recurse( int number ) {
    if ( abs(number) < 10 ) return number;
    return number % 10 + recurse ( number / 10 );
} 
```

# ruby-on-rails - 在 capybara/rspec 中测试子域

> ID：12207656
> 
> 赞同：5
> 
> 时间：2012-08-31T01:06:04.960
> 
> 标签：ruby-on-rails, rspec, capybara

我目前几乎即将结束 Rails 测试的漫长旅程，但我正在努力研究如何让请求规范与子域一起使用。

在开发中，我将 pow 与 url 一起使用，例如：`http://teddanson.myapp.dev/account`这一切都很好而且花花公子。

在测试中，我让 capybara 做它返回 localhost 的事情，`http://127.0.0.1:50568/account`这显然不能与整个子域的事情配合得很好。它适用于不需要子域的应用程序的公共部分，但是如何访问给定用户的子域帐户超出了我的范围。

通过以下方法访问相关路由：

```
class Public
  def self.matches?(request)
    request.subdomain.blank? || request.subdomain == 'www'
  end
end

class Accounts
  def self.matches?(request)
    request.subdomain.present? && request.subdomain != 'www'
  end
end 
```

我觉得我正在服用疯狂的药丸，所以如果有人有任何建议或建议可以帮助我，那将非常非常棒。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:47:25.870

您可以使用 xip.io 来测试 Capybara/RSpec 中的子域，如下所述：[https ://web.archive.org/web/20171222062651/http://chrisaitchison.com/2013/03/17/testing-subdomains-在轨/](https://web.archive.org/web/20171222062651/http://chrisaitchison.com/2013/03/17/testing-subdomains-in-rails/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:04:44.717

不幸的是，你不能在 capybara 的测试中使用子域，但我有一个解决这个问题的方法。我有帮助类从请求中解析子域，请参阅：

```
class SubdomainResolver
  class << self
    # Returns the current subdomain
    def current_subdomain_from(request)
      if Rails.env.test? and request.params[:_subdomain].present?
        request.params[:_subdomain]
      else
        request.subdomain
      end
    end
  end
end 
```

如您所见，当应用程序在`test`模式下运行并设置了特殊的`_subdomain`请求参数时，子域取自请求参数，`_subdomain`否则`request.subdomain`将使用（普通子域）。

要使此解决方法起作用，您还必须覆盖 url 构建器，`app/helpers`创建以下模块：

```
module UrlHelper
  def url_for(options = nil)
    if cannot_use_subdomain?
      if options.kind_of?(Hash) && options.has_key?(:subdomain)
        options[:_subdomain] = options[:subdomain]
      end
    end

    super(options)
  end

  # Simple workaround for integration tests.
  # On test environment (host: 127.0.0.1) store current subdomain in the request param :_subdomain.
  def default_url_options(options = {})
    if cannot_use_subdomain?
      { _subdomain: current_subdomain }
    else
      {}
    end
  end

  private

  # Returns true when subdomains cannot be used.
  # For example when the application is running in selenium/webkit test mode.
  def cannot_use_subdomain?
    (Rails.env.test? or Rails.env.development?) and request.host ==  '127.0.0.1'
  end
end 
```

`SubdomainResolver.current_subdomain_from`也可以用作约束`config/routes.rb`

我希望它会帮助你。

# ruby-on-rails - 如何对 Rails 调用进行排队，以便函数不会并行运行

> ID：12207657
> 
> 赞同：1
> 
> 时间：2012-08-31T01:06:49.203
> 
> 标签：ruby-on-rails, sidekiq

我有一些调用model1.fu​​nc1() 的rails 代码。一个控制器操作调用它，多个人可以在其中点击它，就像计划的 rake 任务一样。我想确保不能并行调用 model1.fu​​nc1() 。如果另一个线程需要同时调用，它应该等待 model1.fu​​nc() 完成。我想我想把这些电话排队。我打算为此使用sidekiq，但只有一名工人。我在一个论坛上读到

> Sidekiq 不适合串行工作，我不想让它适合。不同的工具因不同的原因而有用，万事通无所不能，等等。

你们有什么推荐的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:41:15.577

我会考虑[beantalkd](https://github.com/kr/beanstalkd/blob/master/doc/protocol.txt)与一个工作进程。

# ios - MonoTouch Mapkit image overlay

> ID：12207660
> 
> 赞同：3
> 
> 时间：2012-08-31T01:07:11.203
> 
> 标签：ios, xamarin.ios, mapkit, mkoverlay

I have been looking for a good tutorial on adding an image overlay for Mapkit in C# Monotouch.

I have found many overlay examples for coloured circles or polygons. But I want to load a PNG over the top of my maps. I am coming from MonoAndroid and have done it there, but need to transfer my program across to iOS.

Even a objective C example would help, but Mono would be better.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:51:29.953

I ended up downloading some native objective C code and pretty much just converting it into C#. The function names are very similar, the Xamarin API references Documentation is very helpful.

There where some tricky bumps I ran into around the app delegate, and how it is handled differently in C# to Objective C.

Here are the two hardest functions to convert and my solution:

1) The Draw functions in the map overlay class

```
 public override void DrawMapRect (MKMapRect mapRect, float zoomScale, CGContext ctx)
    {
        InvokeOnMainThread(
            () => 
            {
            UIImage image = UIImage.FromFile(@"indigo_eiffel_blog.png");

                DrawImgRotated(image, 0, ctx);
            }
        );
    }

    public void DrawImgRotated(UIImage image, float rotDegree, CGContext c)
    {
        c.SaveState();

        CGImage imageRef = image.CGImage; 

        //loading and setting the image
        MKMapRect theMapRect = ((MapOverlay)this.Overlay).BoundingMapRect;//MKMapRect theMapRect    = [self.overlay boundingMapRect];
        RectangleF theRect = RectForMapRect(theMapRect);

        //we need to flip and reposition the image
        c.ScaleCTM( 1.0f, -1.0f);
        c.TranslateCTM(-theRect.Width/8,-theRect.Height);

        // Proper rotation about a point
        var m = CGAffineTransform.MakeTranslation(-theRect.Width/2,-theRect.Height/2);
        m.Multiply( CGAffineTransform.MakeRotation(DegreesToRadians(rotDegree)));
        m.Multiply( CGAffineTransform.MakeTranslation(theRect.Width/2,theRect.Height/2));
        c.ConcatCTM( m );

        c.DrawImage(theRect, imageRef);

        c.RestoreState();
    } 
```

and 2) the bounding mapRect function in my mapOverlay class overriding MKOverlay. Yes the position is hardcoded, I am working on unit conversion atm but those are the correct coordinates to draw the image same as in the sample obejctive c code I used.

```
 public MKMapRect BoundingMapRect
    {
        [Export("boundingMapRect")]
        get 
        {
            var bounds = new MKMapRect(1.35928e+08, 9.23456e+07,17890.57, 26860.05);
            return bounds; 
        }

    } 
```

The source code for the Objective C project I converted is here: [https://github.com/indigotech/Blog-MKMapOverlayView](https://github.com/indigotech/Blog-MKMapOverlayView)

Xamarin API reference documentation: [http://iosapi.xamarin.com/](http://iosapi.xamarin.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:35:31.583

The way you want to go about this will depend on the kind of image you want to overlay. If it’s just pretty small, you should be able to get away with just using a single image. However, if it covers a larger area that uses expect to be able to zoom in on, you may have to split it up into separate tiles for better performance.

Here’s some other questions on Stack Overflow that might answer it for you:

[How do I create an image overlay and add to MKMapView?](https://stackoverflow.com/questions/5283741/how-do-i-create-an-image-overlay-and-add-to-mkmapview)

[iPhone - Image overlay MapKit framework?](https://stackoverflow.com/questions/3436368/iphone-image-overlay-mapkit-framework)

See Apple’s WWDC2010 sample code TileMap [https://github.com/klokantech/Apple-WWDC10-TileMap](https://github.com/klokantech/Apple-WWDC10-TileMap) (posted to GitHub by someone)

None of this has anything to do with Mono, but you should be able to convert it…</p>

# html - 文件上传时的 IE8 空白文件名

> ID：12207661
> 
> 赞同：2
> 
> 时间：2012-08-31T01:07:12.293
> 
> 标签：html, file-upload, internet-explorer-8

我正在尝试将图像上传到我们的服务器，它适用于 Chrome、Firefox 和 IE9，但不适用于 IE8。请求中的文件名在 IE8 中显示为空白，但在 Chrome 中不显示。在 IE8 的情况下，服务器检索到的文件是 0 KB（应该是 219kb）。

**HTML**

```
<form action="$!toolsServiceUrl" enctype="multipart/form-data" method="post" id="left-section" class="section right-border container">
    <input type="hidden" name="okRedirectURL" value="$!okRedirect" />
    <input type="hidden" name="errorRedirectURL" value="$!errorRedirect" />
    <input type="hidden" name="updateSection" value="LOGO_AND_MESSAGE" />
    <input type="hidden" name="loginGuid" value="$!loginGuid" />
    <input id="current-file" class="file hide" type="file" accept="image/*" name="file"/>
    <a id="upload-now" class="btn upload open-file">$!INTL_UploadNew</a>
    <input href="#" class="btn btn-primary submit-for-review" type="submit" value="$!INTL_SubmitForReview" />
</form> 
```

**Chrome 请求负载**

```
------WebKitFormBoundaryhaQZT4Syn2OCktxQ
Content-Disposition: form-data; name="file"; filename="wallpaper-2055060.jpg"
Content-Type: image/jpeg 
```

**IE8 请求负载**

```
-----------------------------7dc230b1a0a3a
Content-Disposition: form-data; name="file"; filename=""
Content-Type: application/octet-stream 
```

（我从请求有效负载中省略了所有不相关的数据）

我需要它在 IE8 上工作，因为我们的大量用户使用 IE8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T15:52:42.117

很可能您隐藏文件输入字段，然后使用 javascript 触发单击事件以打开文件对话框。IE 假定点击是不安全的，不会发送到服务器。

为避免这种情况，您需要单击真实字段或创建一个`<label for="idOfFileInputField">`也将触发“安全”单击事件。

您的代码可能如下所示：

```
<form action="$!toolsServiceUrl" enctype="multipart/form-data" method="post" id="left-section" class="section right-border container">
   ...
   <input id="current-file" class="file hide" type="file" accept="image/*" name="file"/>
   <label for="current-file" id="upload-now" class="btn upload open-file">$!INTL_UploadNew</label>
   ...
</form> 
```

你也不应该用 隐藏文件输入字段`display:none`，否则标签点击不会被触发。`position:absolute; left:-9999px`取而代之的是，您要从可见的视口中隐藏某些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:16:08.077

在远程机器上尝试同样的事情，你可能会得到不同的结果。IE 8 中有一个关于文件上传的“安全功能”（错误），导致它们无法发送上传文件的正确路径。据我了解，这只是在本地访问站点时的问题。

查看此网站了解更多信息： [http ://acidmartin.wordpress.com/2009/06/09/the-mystery-of-cfakepath-unveiled/](http://acidmartin.wordpress.com/2009/06/09/the-mystery-of-cfakepath-unveiled/)

如果您在浏览器首选项中将站点添加到受信任的站点，那么从远程计算机上看起来应该没问题。但是在本地还是不行。

# include - 检查javascript lib是否已经存在

> ID：12207662
> 
> 赞同：0
> 
> 时间：2012-08-31T01:07:22.790
> 
> 标签：include, liferay, javascript, conflict

我可以检查我的页面中是否已经存在我的 javascript ext-lib（如 fancybox 插件）（不管它的版本）吗？我使用liferay portlet，它可以在一个页面中放置两个相同的portlet，我现在已经有一些脚本冲突了。（布局配置面板上的Liferay AUI脚本，一些assetPublisher中的滑块......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:02:14.653

如果您正在测试原生 javascript 函数（即内置或使用 javascript 创建），那么：

```
if (typeof foo == 'function') 
```

无论您使用哪个库，都将始终有效。例如测试 jQuery 是否可用：

```
if (typeof jQuery == 'function') 
```

我不相信宿主对象的 jQuery *isFunction*方法，如果你不测试宿主对象，typeof 是完全可靠的。

### 编辑

哦，我应该补充一点，如果您正在测试宿主对象的方法，则需要考虑很多方面。在绝大多数情况下，以下内容就足够了：

```
if (hostObject && hostObject.method) {
  // call hostObject.method
} 
```

值得注意的是，宿主对象不需要遵守 ECMA-262（尽管大多数现代实现在很大程度上都这样做，至少对于 DOM 对象）。有许多正在使用的实现具有宿主对象，当使用这些对象进行测试时`typeof`将返回“未知”或类似内容，一些较旧的甚至会抛出错误。

`object.prototype.toString.call(hostObject)`如果使用（jQuery 的*isFunction*函数使用）进行测试，一些主机对象会抛出错误，因此除非您要实现一个健壮的*isHostMethod*函数，否则上述方法在绝大多数情况下都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:26:47.867

要检查是否加载了通用 JS 库（又名不是 jQuery 插件），请测试其功能之一：

```
if ($.isFunction(pluginFunction)) {
    // Code to run if generic library is loaded
} 
```

检查是否加载了 jQuery 插件：

```
if (jQuery().pluginName) {
    // Code to run if plugin is loaded
} 
```

希望这可以帮助！

# c# - 行动如何 工作？

> ID：12207663
> 
> 赞同：0
> 
> 时间：2012-08-31T01:08:09.000
> 
> 标签：c#, abstraction

我试图弄清楚如何正确使用带有多个（到十个）类型参数的 Action 委托，如下所示：

`Action<T,T,T>`例如。

假设我正在使用以下函数原型：

`public void SomeFunc(Action<bool, int> foo)`

调用该函数时，我将如何将布尔值和整数值传递给 foo ？也许我只是把整个事情弄错了，但是在 MSDN 和其他资源上查找它时，我无法理解这件事实际上是如何工作的。它的`Func<TReturn, T, T>`对应物也是如此。

MSDN 提出了一些非常难以理解的示例，我希望这里有人可以向我展示如何正确实现这些委托的示例。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:14:04.433

您可以像这样使用[lambda](http://msdn.microsoft.com/en-us/library/bb397687.aspx)：

```
SomeFunc( (a1, a2) => {
    Console.WriteLine(string.Format("params: {0}, {1}", a1, a2));
}); 
```

或者，如果您已经有一个与委托匹配的函数，您可以直接传递它。

```
void SomeFunc(Action<bool,int> foo)
{
    foo(true, 99);
    // stuff
}

void matchesDelegate(bool a1, int a2)
{
    Console.WriteLine(string.Format("params: {0}, {1}", a1, a2));
}

SomeFunc(matchesDelegate); 
```

*输出*：

> 参数：真，99

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:24:48.537

`Action` and `Func` delegates work just like any other. The simple `Action` delegate looks basically like:

```
public delegate void Action(); 
```

and is called like so:

```
public void doAction(Action foo)
{
    Action(); // You call the action here.
} 
```

Using generic arguments, the definition basically looks like:

```
public delegate void Action(T1, T2, T3); 
```

and is called like the following to pass parameters into the Action:

```
public void SomeFunc(Action<bool,int> foo)
{
    bool param1 = true;
    int param2 = 69;
    foo(param1, param2); // Here you are calling the foo delegate.
} 
```

Just like other delegates, these delegates can be assigned with explicitly defined functions,

```
public void AnAction()
{
    Console.WriteLine("Hello World!");
}

doAction(AnAction); 
```

or with anonymous functions.

```
Action<bool,int> anonymousAction = (b,i) =>
{
    if (b == true && i > 5)
        Console.WriteLine("Hello!");
    else
        Console.WriteLine("Goodbye!");
}
SomeFunc(anonymousAction); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T01:15:50.533

带有如下签名：

```
public void SomeFunc(Action<bool, int> foo) 
```

您只调用`SomeFunc`并传入一个参数 - 一个带有两个参数的操作。将操作视为**回调**方法，因为它实际上就是这样。在方法的某处，`SomeFunc`它将`foo`在那里调用并传递参数。您不需要自己提供它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T01:14:05.700

如果 foo 是`Action<bool, t>`你可以调用它`foo(true, 42)`

如果你想调用 SomeFunc，你可以用一个方法来调用它：

```
SomeFunc(MyMethod); 
```

你在哪里：

```
public void MyMethod(bool b, int i){} 
```

或者您可以使用匿名方法调用它：

```
SomeFunc(delegate(bool b, int i) {Trace.WriteLine(b); Trace.WriteLine(i);}); 
```

或者您可以使用 lambda 调用它：

```
someFunc((b,i) => {Trace.WriteLine(b); Trace.WriteLine(i);}); 
```

# mysql - 存储过程问题

> ID：12207665
> 
> 赞同：4
> 
> 时间：2012-08-31T01:08:13.987
> 
> 标签：mysql, sql, prepared-statement

将值传递到此存储过程的正确方法是什么，显然我的做法不正确，在一个过程中执行两个语句是否安全，或者我应该创建两个单独的语句？

* * *

```
DELIMITER $$

    CREATE DEFINER=`root`@`localhost` PROCEDURE `drop_student`(IN section_id VARCHAR(20), IN student_id  VARCHAR(20))
    BEGIN

    SET @section_id=section_id;
    SET @student_id=student_id; 

    PREPARE STMT2 FROM 
    "DELETE FROM transcript
    WHERE STUDENT_ID = @student_id
    AND SECTION_ID = @section_id ";

    PREPARE STMT FROM 
    "DELETE FROM course
    WHERE STUDENT_ID = @student_id
    AND SECTION_ID = @section_id ";

    EXECUTE STMT2 USING @section_id,@student_id;

    EXECUTE STMT USING @section_id,@student_id;

    END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:21:41.943

你确定你在上面的代码中使用`SQL Server`（*我看到`sql server`标签*）吗？我猜是`MySQL`。像这样做

```
PREPARE STMT2 FROM  "DELETE FROM transcript  WHERE STUDENT_ID = ? AND 
                                                   SECTION_ID = ?";
EXECUTE STMT2 USING @student_id,  @section_id;
DEALLOCATE PREPARE STMT2;

-- same as STMT 
```

**[准备好的语句的 SQL 语法](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:31:06.840

要调用该过程，您将执行以下操作：

CALL drop_student('foo','bar');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:14:16.467

你试过这样做吗？

```
EXEC STMT2 @section_id @student_id;

EXEC STMT @section_id @student_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T04:25:17.127

您不需要在这里使用准备好的语句。实际上，您甚至可以将您的两个`DELETE`语句合并为一个语句：

```
CREATE PROCEDURE drop_student (
  IN p_section_id VARCHAR(20),
  IN p_student_id VARCHAR(20)
)
DELETE transcript, course
FROM   transcript JOIN course USING (STUDENT_ID, SECTION_ID)
WHERE  STUDENT_ID = p_student_id AND SECTION_ID = p_section_id; 
```

此外，看起来您可能正在尝试手动实现由带有选项的[外键约束自动提供的行为。](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)`ON DELETE CASCADE`

# python - 用 ufunc 映射 numpy 数组

> ID：12207667
> 
> 赞同：0
> 
> 时间：2012-08-31T01:08:30.963
> 
> 标签：python, numpy

我正在尝试使用 ufunc 有效地将 N * 1 numpy 整数数组映射到 N * 3 numpy 浮点数组。

到目前为止我所拥有的：

```
map = {1: (0, 0, 0), 2: (0.5, 0.5, 0.5), 3: (1, 1, 1)}
ufunc = numpy.frompyfunc(lambda x: numpy.array(map[x], numpy.float32), 1, 1)

input = numpy.array([1, 2, 3], numpy.int32) 
```

`ufunc(input)`给出一个 dtype 对象的 3 * 3 数组。我想要这个数组，但使用 dtype float32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:24:10.130

You could use [np.hstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html#numpy.hstack):

```
import numpy as np
mapping = {1: (0, 0, 0), 2: (0.5, 0.5, 0.5), 3: (1, 1, 1)}
ufunc = np.frompyfunc(lambda x: np.array(mapping[x], np.float32), 1, 1, dtype = np.float32)

data = np.array([1, 2, 3], np.int32)
result = np.hstack(ufunc(data))
print(result)
# [ 0\.   0\.   0\.   0.5  0.5  0.5  1\.   1\.   1\. ]
print(result.dtype)
# float32
print(result.shape)
# (9,) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:59:58.677

除非我误读了文档，否则`np.frompyfunc`标量对象的输出确实是：当使用 a`ndarray`作为输入时，你会得到一个`ndarray`with `dtype=obj`。

一种解决方法是使用该`np.vectorize`功能：

```
F = np.vectorize(lambda x: mapper.get(x), 'fff') 
```

在这里，我们强制`dtype`of`F`的输出为 3 个浮点数（因此是`'fff'`）。

```
>>> mapper = {1: (0, 0, 0), 2: (0.5, 1.0, 0.5), 3: (1, 2, 1)}
>>> inp = [1, 2, 3]
>>> F(inp)
(array([ 0\. ,  0.5,  1\. ], dtype=float32), array([ 0.,  0.5,  1.], dtype=float32), array([ 0\. ,  0.5,  1\. ], dtype=float32)) 
```

好吧，这不是我们想要的：它是三个浮点数组的元组（正如我们给出的 'fff'），第一个数组相当于`[mapper[i][0] for i in inp]`. 因此，通过一些操作：

```
>>> np.array(F(inp)).T
array([[ 0\. ,  0\. ,  0\. ],
       [ 0.5,  0.5,  0.5],
       [ 1\. ,  1\. ,  1\. ]], dtype=float32) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T01:29:06.047

你可以使用 ndarray 花式索引来获得相同的结果，我认为它应该比 frompyfunc 更快：

```
map_array = np.array([[0,0,0],[0,0,0],[0.5,0.5,0.5],[1,1,1]], dtype=np.float32)
index = np.array([1,2,3,1])
map_array[index] 
```

或者你可以只使用列表理解：

```
map = {1: (0, 0, 0), 2: (0.5, 0.5, 0.5), 3: (1, 1, 1)}
np.array([map[i] for i in [1,2,3,1]], dtype=np.float32) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T01:29:14.280

如果您的映射是一个 numpy 数组，您可以为此使用花哨的索引：

```
>>> valmap = numpy.array([(0, 0, 0), (0.5, 0.5, 0.5), (1, 1, 1)])
>>> input = numpy.array([1, 2, 3], numpy.int32)
>>> valmap[input-1]
array([[ 0\. ,  0\. ,  0\. ],
       [ 0.5,  0.5,  0.5],
       [ 1\. ,  1\. ,  1\. ]]) 
```

# objective-c - OpenGL-ES：如何使用不同的着色器两次绘制对象

> ID：12207678
> 
> 赞同：0
> 
> 时间：2012-08-31T01:09:39.527
> 
> 标签：objective-c, ios, opengl-es, glsl

我正在尝试制作一个模拟掷骰子的应用程序，目前一切正常。我试图为用户选择骰子时添加一个着色器，它会在选定的骰子周围放置一个轮廓。我的做法是使特定的骰子稍微放大并完全变黑，然后在其顶部绘制纹理骰子，使其看起来像有轮廓。

我遇到的问题是，当第一次应用用于绘制黑色对象的着色器时，它会很好地绘制黑色骰子，但是当纹理骰子试图在它上面绘制时，它会在错误的位置绘制它，并绘制错误骰子。奇怪的是它把它画在屏幕上的另一个骰子里。

如果我将相同的着色器应用到对象两次，那么一切都绘制了它应该如何用于该特定着色器（由于轮廓着色器而全黑，或者所有纹理着色器由普通着色器照亮），但是当我将两个着色器应用到同样的型号，出问题了。

这个类加载顶点和东西，并绘制对象： http: [//pastebin.com/N5aYAtBC](http://pastebin.com/N5aYAtBC)

此类管理着色器：http: [//pastebin.com/0bT7ABRu](http://pastebin.com/0bT7ABRu)

我遗漏了很多我认为与问题无关的代码，但如果您需要更多代码，请发表评论

当我点击不同的骰子时，会发生这种情况（第一张图片是正常的）：http: [//imgur.com/a/ikZVX](http://imgur.com/a/ikZVX)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:18:27.670

```
glUniformMatrix4fv(toon_mvp, 1, 0, modelViewProjectionMatrix.m);
glUniform4fv(toon_outline, 1, oc);
glUseProgram(Toon); 
```

我认为你处理制服的方式有误。作为示例，我从您的来源中提取了此代码段。

当您上传制服时，它只会影响当前绑定的程序（每个程序都有自己的制服内部存储）。

如果您希望“toon”程序可以使用“toon_mvp”和“toon_outline”，那么它们将不可用。你需要先绑定你要修改的程序，绑定后修改它的制服，而不是其他顺序。

您可能还必须在代码的其他位置修复此问题。

# php - 插入 MySQL 时的 Ajax 和 php

> ID：12207682
> 
> 赞同：0
> 
> 时间：2012-08-31T01:10:46.750
> 
> 标签：php, mysql, ajax

简单的问题伙计们，我有 AJAX 可以从页面中获取所有数据，并且它假设打开新的 php 页面来更新 MySQL 数据库，它只更新最后一行数据，但是当我使用来自 javascript 的警报来检查我得到的所有数据时，他做了更新整个表......是否有可能 AJAX 工作速度不够快或其他什么？

这是我的代码

```
var request_type;
var browser = navigator.appName;

if (browser == "Microsoft Internet Explorer") {
    request_type = new ActiveXObject("Microsoft.XMLHTTP");
}
else {
    request_type = new XMLHttpRequest();
}

var http = request_type;

var MatchID = '';
var HomeTeam = '';
var AwayTeam = '';
var TipID = '';
var arrayMaxValues = 3;
var myArray = new Array(3);
var i = 0;
$('#teams_table input[type=text]').each(function () {

        myArray[i] = $(this).val();

        if (!!myArray[2]) 
        {
                 MatchID = myArray[0];
                 HomeTeam = myArray[1];
                 AwayTeam = myArray[2];

           if (HomeTeam > AwayTeam) {
                  TipID = 1;
           }
           else if (HomeTeam == AwayTeam) {
                  TipID = 2;
           }
           else if (HomeTeam < AwayTeam) {
                  TipID = 3;
           }

           http.open('get', 'adminUpdate.php?MatchID=' + MatchID + '&TipID=' + 
           TipID + '&HomeTeam=' + HomeTeam + '&AwayTeam=' + AwayTeam, true);
           http.send(null);

           myArray = new Array(3);
           i=0;

        }
        else
        {
         i++;
        }

}); 
```

我用的时候有点奇怪

```
 alert('MatchID = ' + MatchID + ' HomeTeamScore = ' + HomeTeam + ',
 AwayTeamScore = ' + AwayTeam) 
```

在 AJAX 代码内部，我更新了整个表，没有它只是最后一行

还有我的php页面

```
<?php

include('config.php');

$matchID = $_GET['MatchID'];
$tipID = $_GET['TipID'];
$HomeScore = $_GET['HomeTeam'];
$AwayScore = $_GET['AwayTeam'];

$query="update probatip1.matches set ResultTipID=".$tipID.",HomeTeamScore = "
.$HomeScore.",AwayTeamScore= ".$AwayScore." where MatchID =".$matchID;

$UpdateGame= mysql_query($query) or die(mysql_error());

mysql_close()

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:30:36.093

尝试对数据进行编码。IE：

```
MatchID = encodeURIComponent(myArray[0]);
HomeTeam = encodeURIComponent(myArray[1]);
AwayTeam = encodeURIComponent(myArray[2]); 
```

在php中使用

```
function escapedata($data) {
    if(get_magic_quotes_gpc()) {
        $data= stripslashes($data);
    }
    return mysql_real_escape_string($data);
} 
```

在更新表之前转义您的数据。IE：

```
$query="update probatip1.matches set ResultTipID=".escapedata($tipID).",HomeTeamScore = ".escapedata($HomeScore).",AwayTeamScore= ".escapedata($AwayScore)." where MatchID =".escapedata($matchID); 
```

希望这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:46:03.557

不是真正的直接答案，只是您可以从中得出答案的东西。代码所做的是使用 jquery 中的方法提交整​​个对象，该`$.post`方法接受 2 个参数和一个回调函数，该函数在请求完成后执行。不太确定：打开新的 php 页面以更新 MySQL 数据库，但我假设您只是使用该页面来更新数据库，而不是实际打开它。

```
<script src="js/jquery.min.js"></script>
<script>
var obj = {
    'teams' : [
        {'name' : 'teamA', 'grade' : 'A'},
        {'name' : 'teamB', 'grade' : 'B'}
    ]
};

$.post('access.php', {'obj' : obj}, function(data){
    var d = JSON.parse(data);
    for(var x in d){
        console.log(d[x].name);
    }
});
</script> 
```

访问.php：

```
<?php
$post = $_POST['obj']['teams'];
$array = [];
foreach($post as $row){
    $name =  $row['name'];
    $grade = $row['grade'];

    $array[] = ['name'=>$name, 'grade'=>$grade];
}

echo json_encode($array);
?> 
```

因此，您只需修改 php 页面，并将您的数据库查询放入循环中。这样你就不需要通过把它放在里面来执行这么多的ajax请求`$.each`

然后利用`$.each`通过方法构建您将通过 ajax 提交的对象`$.post`：

```
var obj = {};
$().each(function(index){
     var myArray[i] = $(this).val();

     var MatchID = myArray[0];
     var HomeTeam = myArray[1];
     var AwayTeam = myArray[2];

     obj[index] = [];
     obj[index]['match_id'] = MatchID;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:25:08.610

伙计们，在您的帮助下，我设法解决了我的问题

```
http.open('get', 'adminUpdate.php?MatchID=' + MatchID + '&TipID=' + TipID + 
'&HomeTeam=' + HomeTeam + '&AwayTeam=' + AwayTeam, false);
http.send(null);
var response = http.responseText; 
```

所以基本上用这一行我告诉http请求不要去下一行代码，直到表中的更新没有完成，当http完成他的工作时，它会移动到下一行代码。

谢谢你的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T01:46:25.990

问题在于您向 php 文件发送请求以更新`MYSQL`. 实际上，您是`ajax`在循环中运行请求，并且循环太快会杀死先前的更新请求。

**解决方案**

您可以组成一个数组并将其发送到`php`循环外部。这对你有用。

# c++ - 如何终止 C++11 中的线程？

> ID：12207684
> 
> 赞同：155
> 
> 时间：2012-08-31T01:10:49.467
> 
> 标签：c++, multithreading, c++11

我不需要正确终止线程，或者让它响应“终止”命令。我有兴趣使用纯 C++11 强制终止线程。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-08-31T01:32:10.743

1.  您可以`std::terminate()`从任何线程调用，并且您所指的线程将强制结束。

2.  您可以安排`~thread()`在目标线程的对象上执行，而无需干预`join()`也不`detach()`在该对象上。这将具有与选项 1 相同的效果。

3.  你可以设计一个异常，它有一个抛出异常的析构函数。然后安排目标线程在被强制终止时抛出这个异常。这个棘手的部分是让目标线程抛出这个异常。

选项 1 和 2 不会泄漏进程内资源，但它们会终止*每个*线程。

选项 3 可能会泄漏资源，但部分合作是因为目标线程必须同意抛出异常。

C++11（我知道）中没有可移植的方式来非合作地杀死多线程程序中的单个线程（即不杀死所有线程）。没有设计这样一个功能的动机。

A`std::thread`可能有这个成员函数：

```
native_handle_type native_handle(); 
```

您也许可以使用它来调用依赖于操作系统的函数来执行您想要的操作。例如在 Apple 的操作系统上，这个函数存在并且`native_handle_type`是一个`pthread_t`. 如果你成功了，你很可能会泄漏资源。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-12-12T14:53:00.050

@Howard Hinnant 的回答既正确*又*全面。但是如果读得太快可能会被误解，因为`std::terminate()`（整个过程）恰好与@Alexander V 想到的“终止”（1 个线程）同名。

摘要：“终止1个线程+强制（目标线程不合作）+纯C ++ 11 =没办法。”

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-05-27T14:48:05.127

我想需要被杀死的线程要么处于任何等待模式，要么正在做一些繁重的工作。我建议使用“幼稚”的方式。

定义一些全局布尔值：

```
std::atomic_bool stop_thread_1 = false; 
```

将以下代码（或类似代码）放在几个关键点中，以使调用堆栈中的所有函数都返回，直到线程自然结束：

```
if (stop_thread_1)
    return; 
```

然后从另一个（主）线程停止线程：

```
stop_thread_1 = true;
thread1.join ();
stop_thread_1 = false; //(for next time. this can be when starting the thread instead) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-02-19T10:39:20.447

这个问题实际上具有更深入的性质，并且对一般多线程概念的良好理解将为您提供有关该主题的见解。事实上，没有任何语言或任何操作系统可以为您提供异步突然线程终止的设施，而不会警告不要使用它们。所有这些执行环境都强烈建议开发人员甚至要求在协作或同步线程终止的基础上构建多线程应用程序。这种共同决策和建议的原因是它们都建立在相同的通用多线程模型的基础上。

让我们比较多处理和多线程概念，以更好地理解第二个的优点和局限性。

多处理假设将整个执行环境拆分为由操作系统控制的一组完全隔离的进程。进程合并和隔离执行环境状态，包括进程的本地内存和其中的数据以及所有系统资源，如文件、套接字、同步对象。隔离是流程的一个非常重要的特征，因为它限制了流程边界的故障传播。换句话说，没有一个进程可以影响系统中任何另一个进程的一致性。过程行为也是如此，但限制较少且更加模糊。在这样的环境中，任何进程都可以在任何“任意”时刻被杀死，因为首先每个进程都是孤立的，其次，

相反，多线程假设在同一个进程中运行多个线程。但是所有这些线程都共享同一个隔离框，并且没有任何操作系统对进程的内部状态进行控制。结果，任何线程都能够更改全局进程状态并破坏它。同时，众所周知，线程的状态可以安全地杀死线程的点完全取决于应用程序逻辑，并且对于操作系统和编程语言运行时都不知道。因此，线程在任意时刻终止意味着在其执行路径的任意点杀死它，并且很容易导致进程范围的数据损坏、内存和句柄泄漏，

因此，通常的做法是强制开发人员实现同步或协作线程终止，其中一个线程可以请求其他线程终止，并且定义明确点的其他线程可以检查此请求并从定义良好的状态启动关闭程序以安全和一致的方式释放所有全球系统范围的资源和本地进程范围的资源。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-11-20T18:18:02.757

使用 OS 相关函数终止 C++ 线程的提示：

1.  `std::thread::native_handle()`只能在调用`join()`or之前获取线程的有效本机句柄类型`detach()`。之后，`native_handle()`返回 0 -`pthread_cancel()`将核心转储。

2.  为了有效地调用本机线程终止函数（例如），您需要在调用或`pthread_cancel()`之前保存本机句柄。这样您的本机终结器始终可以使用有效的本机句柄。`std::thread::join()``std::thread::detach()`

更多解释请参考：[http](http://bo-yang.github.io/2017/11/19/cpp-kill-detached-thread) ://bo-yang.github.io/2017/11/19/cpp-kill-detached-thread 。

# boost - 是否可以将 boost shared_ptr 从 C++ 传递到 Python 并返回到 C++

> ID：12207689
> 
> 赞同：9
> 
> 时间：2012-08-31T01:11:42.257
> 
> 标签：boost, shared-ptr, boost-python

我有一个对象保存在 C++ 中的 shared_ptr 中。该对象通过 python 内部的 python 绑定进行访问，并传递给另一个试图保持它的绑定 C++ 函数。似乎当对象从 C++ 转到 Python 时，它从 shared_ptr 转换为 python 对象。然后当它回到 C++ 中时，它会从 python 对象转换为新的 shared_ptr，但是这个 shared_ptr 与初始持有的 shared_ptr 无关。

是否可以设置 boost-python 绑定，以便从 python 对象到 shared_ptr 的转换引用原始 shared_ptr 内部？

下面是我用来显示问题的节略代码。

在此示例中，对象最初保存在名为 s_inital 的 shared_ptr 中。它通过 getSharedPtr 函数从 python 中获取，然后通过 putSharedPtr 函数推回 C++。在 putSharedPtr 中，它被复制到weak_ptr s_copied 中。检查调试器中的指针显示 putSharedPtr 中使用的 shared_ptr 与 s_initial 没有相同的引用计数内部结构。最后的断言将触发，因为弱指针 s_copied 仅与单个强指针（在 putSharedPtr 中使用的指针）相关，并且一旦 putSharedPtr 完成，该指针就被破坏了。

```
static shared_ptr<Captured> s_initial;
static weak_ptr<Captured> s_copied;

class UseSharedPtr
{
public:
    shared_ptr<Captured> getSharedPtr()
    {
        return s_initial;
    }

    void putSharedPtr(shared_ptr<Captured> ptr)
    {
        s_copied = ptr;
    }
};

BOOST_PYTHON_MODULE(test)
{
    class_<Captured, shared_ptr<Captured>, boost::noncopyable>("Captured", no_init);
    class_<UseSharedPtr, boost::noncopyable>("UseSharedPtr", init<>())
        .def("getSharedPtr", &UseSharedPtr::getSharedPtr)
        .def("putSharedPtr", &UseSharedPtr::putSharedPtr)
    ;
}

    s_initial = make_shared<Captured>();

    const char* chunk = "\
from test import UseSharedPtr \n\
x = UseSharedPtr() \n\
ptr = x.getSharedPtr() \n\
x.putSharedPtr(ptr)\n\
del x \n\
del ptr \n\
";
    object result = exec(chunk, mainNamespace, mainNamespace);

    assert(s_copied.lock()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:43:32.413

你需要`class_<UseSharedPtr, shared_ptr<UseSharedPtr>, boost::noncopyable>`让 boost::python 知道它应该使用 shared_ptr 管理对象。如果您希望我验证这一点，请让您的示例可编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T14:03:40.020

一个简单但丑陋的解决方法是使用`enable_shared_from_this()`类`Captured`并`shared_ptr`使用`shared_from_this()`.

```
void putSharedPtr(shared_ptr<Captured> ptr)
{
    s_copied = ptr->shared_from_this();
} 
```

# css - Firefox 不从 Google Font API 渲染字体

> ID：12207690
> 
> 赞同：2
> 
> 时间：2012-08-31T01:12:04.537
> 
> 标签：css, firefox, font-face, noscript, google-font-api

我上传了一个我们公司外包的登录页面，Firefox 不渲染`Lato`字体，而是退回到更底层的东西。

我们从 fonts.googleapis.com 获得了以下样式表。

```
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: 700;
  src: local('Lato Bold'), local('Lato-Bold'), url(https://themes.googleusercontent.com/static/fonts/lato/v6/wkfQbvfT_02e2IWO3yYueQ.woff) format('woff');
}
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: 100;
  src: local('Lato Hairline'), local('Lato-Hairline'), url(https://themes.googleusercontent.com/static/fonts/lato/v6/boeCNmOCCh-EWFLSfVffDg.woff) format('woff');
}
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: 300;
  src: local('Lato Light'), local('Lato-Light'), url(https://themes.googleusercontent.com/static/fonts/lato/v6/KT3KS9Aol4WfR6Vas8kNcg.woff) format('woff');
}
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: 400;
  src: local('Lato Regular'), local('Lato-Regular'), url(https://themes.googleusercontent.com/static/fonts/lato/v6/9k-RPmcnxYEPm8CNFsH2gg.woff) format('woff');
} 
```

在 IE、Chrome、Opera 和 Safari 中没有问题。Firefox 是否有什么特别之处无法显示字体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:38:17.007

我想到了。我正在使用 NoScript 插件。它保护我免受来自谷歌的 XSS 攻击的威胁，即使整个网站都被允许。:D

我将研究 noscript 中是否有允许使用字体的设置，并在此处发布我的发现。

它不太可能给我们的客户带来问题。如果他们自己使用 NoScript，他们可能不会为着陆页上的字体而烦恼。

编辑：

我能够得到这个工作。在 下`NoScript > Options`，我选择了`Advanced`选项卡和`XSS`选项卡。然后我添加了以下异常：

`^https://themes\.googleusercontent.com/static/fonts/lato/v6/[a-zA-Z\-_0-9]*\.woff$`

它比它需要的更具体。可以根据需要修剪子文件夹以允许更多站点。例如，以下内容应启用大多数字体：

`^https://themes\.googleusercontent.com/static/fonts/[/a-zA-Z\-_0-9]*\.woff$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:34:15.097

您是在本地、在开发服务器上还是在类似的地方运行测试？检查 Firebug 的控制台，您应该能够在下载中找到错误，例如 404、权限或类似内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T00:59:35.440

如果在 Firefox 中使用 Noscript：打开 NoScript 选项，转到嵌入选项卡并取消选中：禁止 @font-face

如中所述：[https ://developers.google.com/fonts/docs/troubleshooting](https://developers.google.com/fonts/docs/troubleshooting)

# c++ - 如何使用 C++ 获取自动重置事件的状态？

> ID：12207692
> 
> 赞同：3
> 
> 时间：2012-08-31T01:12:24.453
> 
> 标签：c++, windows, winapi, events

说，如果我创建了这样的事件：

```
HANDLE hGlobalEvent = ::CreateEvent(NULL, FALSE, FALSE, NULL); 
```

是否可以通过它的句柄来获取它的状态而不改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:16:40.757

不，没有任何直接的方法可以做到这一点。即使有办法查询事件对象，答案也可能随时更改，从而使信息立即过时。

# haskell - 在不为所有依赖项安装分析库的情况下分析 Haskell

> ID：12207698
> 
> 赞同：17
> 
> 时间：2012-08-31T01:13:13.547
> 
> 标签：haskell, profiling

我希望介绍我用 Haskell 编写的程序。

在编译时，我被告知我没有`criterion`安装和`cabal`中止某些依赖项（例如 ）的分析库。

我对分析这些依赖项的一部分没有兴趣；调用 from 的代码`main`甚至不使用它们。

如何在不安装我不需要的分析库且不删除所有这些依赖项的情况下分析我的应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T09:22:00.137

避免使用 profiling 编译*所有内容*的好方法是使用 cabal 沙箱。它允许您仅为一个应用程序设置沙箱，因此您不必重新安装整个`~/.cabal`前缀。您需要最新版本的 Cabal，因此`cabal update && cabal install cabal-install`请先运行。

初始化沙箱后，创建一个文件`cabal.config`以包含必要的指令（在您的情况下`library-profiling: True`；`executable-profiling: True`也可能很方便。）

这样做的副作用是您可以使用不需要全局安装的依赖项来测试您的代码，例如，实验版本或过时的版本。

编辑：顺便说一句，我认为您不需要启用分析`criterion`才能工作。无论如何，它适用于我*而无需*启用分析。只需编写一个`Main`包含`main = defaultMain benchmarks`where `benchmarks`has type的模块`[Benchmark]`，即您编写的基准测试列表。

然后编译该文件（例如，我们用 调用它`benchmarks.hs`，`ghc --make -o bench benchmarks.hs`并使用适当的参数运行程序`./bench`（有关详细信息，请参阅标准文档。一个好的默认参数是，比如说`./bench -o benchmarks.html`，它将生成一个类似于[这个](http://bos.github.com/criterion/)的漂亮报告）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T08:39:36.090

这周我遇到了同样的问题，虽然我手动重新编译了所有内容，但 IRC 频道指示我执行以下操作：

1.  转到您的 cabal 配置文件[（以防您不知道在哪里）](http://www.haskell.org/haskellwiki/Cabal-Install)
2.  编辑启用库分析的行（当你在它的时候，启用文档）
3.  运行 Cabal 安装世界

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-31T08:41:39.847

正如您在评论中提到的问题中提到的，将来解决此问题的一个好方法是在 cabal 配置中启用分析。这样，所有库都安装了分析支持。这可能不是一个令人满意的解决方案，但我想很多人都会选择它。

如果您只想了解程序的内存使用情况，您可以使用`-hT`. 更准确地说，您必须编译程序`-rtsopts`以启用 RTS 选项，然后使用`+RTS -hT`. 编译器生成一个扩展名为`hp`. 您可以`hp`使用`hp2ps`. 这应该在没有任何分析支持的情况下工作，但请注意，我懒得验证它，因为我已经安装了所有支持分析的库；)

# visual-studio-2010 - 减少 Visual Studio nuget 包管理器中的超时

> ID：12207708
> 
> 赞同：0
> 
> 时间：2012-02-22T16:10:13.397
> 
> 标签：visual-studio-2010

有没有办法减少**Manage NuGet Packages** Visual Studio 扩展中的超时？我已经等待它做某事超过 10 分钟了，我已经厌倦了等待。我最近遇到了很多超时，理想情况下想知道如何诊断/修复这些超时，但会接受更短的超时，这样我就不会浪费太多时间摆弄我的拇指等待它决定它不是'工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-20T18:37:15.737

您可以与[开发人员](http://nuget.codeplex.com/)联系，并建议他们在插件中包含一种为某些操作设置自定义超时的方法。作为一个开源项目，我相信他们会听你的 :) 如果这不起作用......你可以获取源代码并自己进行改进。

# c# - 从 USB 运行 Visual Studio 2012 Express c#

> ID：12207710
> 
> 赞同：2
> 
> 时间：2012-08-31T01:14:31.173
> 
> 标签：c#, visual-studio-2010, usb, system, icsharpcode

我最近在我的高中加入了一个编程俱乐部，并希望能够使用 USB 从他们的笔记本电脑上运行 Visual Studio 2012 c# Express Edition。我不想更改任何实际的计算机文件，因为它违反了规则。在谷歌上搜索后，这个任务似乎很难完成。因此，我决定查看其他一些 IDE，并找到了 SharpDevelop。有人知道 SharpDevelop 是否可以在没有 .NET 的计算机上通过 USB 运行？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:24:39.980

如果不在计算机上安装 .Net，将无法运行任何 .Net 程序。由于 SharpDevelop 和 Visual Studio 都是需要在机器上安装 .Net 的 .Net 程序。

我认为您应该考虑使用@lc 建议的虚拟机。我喜欢并使用[虚拟盒子](https://www.virtualbox.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:21:26.460

如果您想利用调试甚至执行应用程序的优势，您将需要在计算机上安装 .NET。如果这不可能，那么您必须解决不同的方法，例如使用 notepad++ 或使用需要能够作为可门户软件运行的虚拟机。

或者，如果计算机安装了 .NET，有一种方法可以使 SharpDevelop 可移植，请查看[http://laputa.sharpdevelop.net/SharpDevelopOnAMemoryStick.aspx](http://laputa.sharpdevelop.net/SharpDevelopOnAMemoryStick.aspx)

# unix - 如何通过管道输入另一个 UNIX 命令的结果

> ID：12207713
> 
> 赞同：5
> 
> 时间：2012-08-31T01:14:56.203
> 
> 标签：unix, tr

现在我正在使用另一个文本文件来存储一个 UNIX 命令的结果，然后使用该文件运行另一个命令，如下所示：

```
tr -d "[,|.]" < text > temporary.txt
tr "[A-Z]" "[a-z]" < temporary.txt > result.txt 
```

如何将这两者组合成一行，这样我就不必使用临时文件？以下不起作用：

```
(tr "[A-Z]" "[a-z]" < (tr -d "[,|.]" < text)) > result.txt 
```

我知道如何使用 && 但这仍然需要使用临时持有者文件。

可能重复：[Bash：如何将一个命令的每个结果通过管道传输到另一个命令](https://stackoverflow.com/questions/3404946/bash-how-to-pipe-each-result-of-one-command-to-another)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T01:28:04.393

管道是你的朋友：-

```
cat text | tr -d "[,|.]" | tr "[A-Z]" "[a-z]" >result.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:23:08.963

尝试：

1.  `tr -d "[,|.]" < text | tr "[A-Z]" "[a-z]" > result.txt`
2.  `cat text | tr -d "[,|.]" | tr "[A-Z]" "[a-z]" > result.txt`

这两个命令做同样的工作。

管道（由 指定`|`）所做的只是将一个命令的输出重定向到另一个命令的输入。因此，例如，在get`foo | bar`的输出中`foo`被重定向到`bar`.

# javascript - HTML5 音频循环问题

> ID：12207719
> 
> 赞同：4
> 
> 时间：2012-08-31T01:15:47.070
> 
> 标签：javascript, html, audio, loops

我无法让 HTML5 音频在我的网站上循环播放：http: [//oclock.webs.com](http://oclock.webs.com)。（这是一个警报，当警报响起时，应该循环播放 1 秒的警报声，直到您单击警报框上的 OK）。

* * *

简单地在音频标签中包含“循环”并没有做任何事情。

我在 StackOverflow 上找到了一篇有用的帖子，它把我带到了这个网站： http: [//forestmist.org/2010/04/html5-audio-loops/](http://forestmist.org/2010/04/html5-audio-loops/)

我知道方法 1 和 2 对我不起作用，因为它们不能在 Firefox 上工作并且在 Chrome 上是不确定的，所以方法 3 应该可以工作，不幸的是它没有。方法 3 在我在该网站的页面上时有效，但在代码包含在我自己的页面中时无效，因此我认为可能存在一些冲突的代码。

* * *

我网页的相关部分：

```
<audio id="audio1" preload>
    <source src="media/alarm.ogg" type="audio/ogg" />
    <source src="media/alarm.mp3" type="audio/mpeg" />
</audio>

<audio id="audio2" preload>
    <source src="media/alarm.ogg" type="audio/ogg" />
    <source src="media/alarm.mp3" type="audio/mpeg" />
</audio> 
```

页面的相关Javascript：

```
if(timer==true && hours==hv && mins==mv && secs==sv){
    document.getElementById("audio1").play();
    alert("o'clock: Alarm ringing!");
    document.getElementById("alarm").value="Set Alarm";

    document.getElementById('audio1').addEventListener('ended', function(){
        this.currentTime = 0;
        this.pause();
        document.getElementById('audio2').play();
    }, false);

    document.getElementById('audio2').addEventListener('ended', function(){
        this.currentTime = 0;
        this.pause();
        document.getElementById('audio1').play();
    }, false);
}

else{
    document.getElementById("audio1").pause();
    document.getElementById("audio2").pause();
    document.getElementById("audio1").currentTime = 0;
    document.getElementById("audio2").currentTime = 0;
} 
```

意图：当计算机的时间与页面上选择的时间匹配时，音频警报将重复（循环），直到用户在弹出的警报框上单击“确定”。

问题：目前它只播放一次音频，不会循环播放。我哪里搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:23:21.467

“结束事件”或“循环”属性在某些浏览器上不起作用。所以我使用 window.setInterval() 来循环播放音频。

对于这种方法，您应该提前知道音频文件的播放时间。

```
function playAudioWithLoop (/**HTMLAudioElement*/audio, /**Number*/length)
{
    function onEnd (){
        audio.play();
    }

    /* length is msec */
    if(length > 0) {
        audio.__timer = window.setInterval(onEnd, length);
    }
}

function stopAudioWithLoop (/**HTMLAudioElement*/audio)
{
    if(audio.__timer) {
        audio.__timer = window.clearInterval(audio.__timer);
    }
} 
```

==================================================== =====================

```
***playAudioWithLoop(document.getElementById("audio1"), 12*1000);***
***stopAudioWithLoop(document.getElementById("audio1"));*** 
```

# java - Spring @Autowired - 后台发生了什么

> ID：12207722
> 
> 赞同：3
> 
> 时间：2012-08-31T01:16:07.523
> 
> 标签：java, spring, annotations

对不起，如果这已经讨论过了，我找不到令人满意的答案。

当我在 Springframework 中创建一个 bean 并将其 @Autowired 到另一个 bean 中的字段时，我不明白发生了什么。我了解 @Autowired 和其他注释的结果，但我不知道 Spring 是如何完成的。

```
class Sample1{
    //
}

class Sample2{
@Autowired
Sample1 sample1Bean;
}

<bean id="sample1Bean" class="...Sample1"/>
<bean id="sample2Bean" class="...Sample2"/> 
```

我的问题是 spring 如何在 Sample2 中设置字段 sample1Bean？我并不期待一个完整的解释，但我必须寻找的方向会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:31:08.417

,注释由 a-专门解析`@Autowired`。这个 bean 后处理器拦截 bean 的创建（对于 @Autowired 在构造函数上的情况），设置 bean 的属性以确保正确设置所有自动装配字段。`@Inject`[`BeanPostProcessor`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)[`AutowiredAnnotationBeanPostProcessor`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:59:33.453

我不是 Spring 方面的专家，但我会回答我所知道的。当 Spring 驱动的 Web 应用程序启动时，Spring 框架会在应用程序上下文中执行 bean 实例化过程。在创建 bean 时，Spring 检查给定 bean 所需的依赖项。它根据所需的 bean 类型查找匹配的 bean，并在`@Autowired`指定注释时自动装配它。

在上面的示例中，Spring 将遍历应用程序上下文并创建一个 bean(object) 类型`Sample1`。当它构造 bean 时，它会`Sample2`看到`@Autowired`注解并会寻找 type 的实例化 bean `Sample1`。当它找到类型的 bean 时`Sample1`，它将注入该 bean`Sample2`并完成创建`Sample2`。这称为依赖注入，是 Spring 框架非常流行的特性之一。

希望这可以帮助。

# python - Python - 将数据作为输入流传递到 jar 文件

> ID：12207725
> 
> 赞同：0
> 
> 时间：2012-08-31T01:16:23.893
> 
> 标签：python, bash

我有一个 jar 文件，可以将数据发送到该文件进行处理，数据为 json 格式。 `data_path`是包含数据的文件的路径。下面的效果很好。但是我拥有的数据不会是文件，而是变量。下面的命令不适用于变量，它尝试读取作为文件的文字目录路径传递的数据。它会是一个不同的 bash 命令吗？或者我可以用 subprocess 模块做些什么？谢谢！

```
import subprocess as sub

cmd = "java -jar %s < %s" % (jar_path, data_path)
# send data in a var
# cmd = "java -jar %s < %s" % (jar_path, data)
proc = sub.Popen(cmd, stdin=sub.PIPE, stdout=sub.PIPE, shell=True)
(out, err) = proc.communicate() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:24:29.957

You can write it to a temporary file and pass that:

```
import tempfile

with tempfile.NamedTemporaryFile() as f:
    f.write(data)
    f.flush()
    cmd = "java -jar %s < %s" % (jar_path, f.name)
    ... 
```

The temp file will delete itself when the context ends.

@FedorGogolev had deleted answers going for a Popen stdin approach that weren't quite working for your specific needs. But it was a good approach so I credit him, and thought I would add the working version of what he was going for...

```
import tempfile

with tempfile.TemporaryFile() as f:
    f.write(data)
    f.flush()
    f.seek(0)
    cmd = "java -jar %s" % jar_path
    p = subprocess.Popen(cmd, shell=True, stdin=f, stdout=subprocess.PIPE)
    ... 
```

If you are passing the file object as the `stdin` arg you have to make sure to seek it to 0 position first.

# objective-c - 在 XCode Profiler 中注册应用程序以进行符号化

> ID：12207727
> 
> 赞同：20
> 
> 时间：2012-08-31T01:16:39.360
> 
> 标签：objective-c, ios, xcode

我正在尝试在我的设备上运行的应用程序上运行 XCode 的时间分析器，但符号名称显示为`0x2fe26643`而不是`[MyClass myMethod]`. 我意识到我需要重新符号化应用程序，但我不知道如何。

[像这样](https://stackoverflow.com/a/6103149/193896)的一些答案和[这个](https://stackoverflow.com/a/7840013/193896)说要按“重新符号化”，在列表中找到您的二进制文件，然后按“定位”以手动查找 dSYM。我的应用不在名为的列表中`dSYM Locations`：

![在此处输入图像描述](../Images/a0c354531853219f8635051533471ec5.png)

**我怎样才能使我的结果具有象征意义？**

*更新：*当我尝试重新符号化时，我发布了一个 YouTube 剪辑：[http ://www.youtube.com/watch?v=CcLGRNkmako](http://www.youtube.com/watch?v=CcLGRNkmako)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T21:02:39.830

尝试在设备上分析我的应用程序时遇到同样的问题（在模拟器中运行良好）。尝试重新符号化时，我的应用程序二进制文件根本没有显示在“dSYM 位置”对话框列表下，因此我无法选择它，然后使用定位按钮关联适当的 dSYM，因为其他答案建议.

通过转到 Xcode 中的 Edit Scheme 并将 Profile 构建更改为 Debug 而不是 Release，我能够在设备分析中恢复符号化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-23T11:58:26.217

这是我为启用分析所做的，而无需切换到调试模式。这是针对 Xcode 4.5.1

1.  **基于现有的“发布”配置创建一个新的“配置文件”构建配置**：在项目导航器中选择项目以打开项目编辑器。在项目编辑器中选择项目并单击信息按钮。展开信息窗格中的配置部分，然后单击该部分底部的添加 (+) 按钮。从弹出菜单中选择现有的“发布”配置作为新配置的起点。选择副本的名称并键入“配置文件”。在[Xcode 用户指南](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/025-Configure_Your_Project/configure_project.html)中查看更多信息。

2.  **将“Profile”配置的 Code Signing Identity 设置为“iPhone Developer”（或与您的“Debug”配置相同）**：单击 Build Settings 按钮以显示项目的构建设置。要更改项目中所有目标的新配置中的构建设置，请在项目级别编辑它们。要更改单个目标的构建设置，请选择该目标。如果您在项目级别编辑它们，请确保您在之后仔细检查目标级别：目标设置覆盖项目设置。代码签名身份位于“代码签名”部分。

3.  **确保“配置文件”配置的“生成调试符号”设置为 YES**。就我而言，这已经是肯定的了。

4.  **设置“Profile”方案使用的新“Profile”配置**：从菜单中选择“Product->Edit Scheme”，选择左侧的“Profile appname.app”选项卡，然后选择“Profile”下“构建配置”。

5.  **在您的 appname.entitlements 文件中，将“get-task-allow”属性设置为 YES。**

6.  **按 ALT 键，然后从菜单中选择“产品->清理构建文件夹”。**

7.  **现在从菜单中选择“产品->配置文件”，您应该可以开始了**。

如果你不做这一切，就会发生各种奇怪的事情。我根本没有出现任何符号，或者只有库符号出现。我只有在您首先进行调试构建时才会显示符号，然后再进行分析（这意味着这些符号可能是从调试构建中错误地获取的）。我让探查器抱怨 UUID 不匹配，并且我遇到了臭名昭著的“权利不匹配”错误（在[此处](https://stackoverflow.com/questions/5240801/the-entitlements-specified-profile-0xe8008016-error-ios-4-2)查看更多信息）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T04:31:22.277

他们的意思是按下“定位”按钮，然后在`~/Library/Developer/Xcode/DerivedData`. 但是，我发现以下方法似乎有效：

*   首选项 > 搜索路径
*   添加`~/Library/Developer/Xcode/DerivedData`（我实际上将其作为 /Users/rnapier/...，所以我不确定 ~ 是否有效）

这对我来说并不总是自动符号化。但它让我可以使用 File>Re-Symbolicate Document，然后点击“Symbolicate”按钮，它一直在为我工作。这不能“开箱即用”的事实是疯狂的....

我建议复制[radr://10158512](http://openradar.appspot.com/10158512)（它本身就是 10015727 的副本，但它不在 openradar 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T01:28:58.517

如果您将“发布”构建配置的代码签名身份从“自动配置文件选择器：iPhone*分发*”更改为“自动配置文件选择器：iPhone*开发*”（强调我的），那么您的应用程序的二进制文件将列在 Instrument 的重新符号表中，并且您可以将其指向您的派生数据文件夹。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T03:53:59.923

这也取决于 XCode 将您的构建放在哪里。您可以在 XCode 项目管理器中选择“MyCoolApp.app”，右键或控制单击“在 Finder 中显示”。并非所有项目设置都会将其放在 DerivedData 中（几个不同的项目设置可能会合谋将其放在不同的位置）。现在您已经找到 XCode 存放构建的位置，您可以尝试使用前面概述的步骤从那里将其添加到 Instruments。当单击“定位...”出现文件对话框时，您只需将 .app 从文件对话框的 Finder 中拖放到该目录即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T09:20:03.463

上面提到的没有成功。Xcode 5 对我有用：

*   如 quellish 的回答中所述获取您的产品的位置。前任。

    > /Users/ME/Library/Developer/Xcode/DerivedData/Build/Products/Debug-iphoneos /Users/ME/Library/Developer/Xcode/DerivedData/Build/Products/Release-iphoneos

*   打开 Instruments Preferences 并在“dSYMs And Paths”中添加位置。

# java - sendRedirect时如何存储会话

> ID：12207729
> 
> 赞同：1
> 
> 时间：2012-08-31T01:16:41.100
> 
> 标签：java, session, jakarta-ee, servlets

我有一个条件，我想从会话中删除属性，然后我正在做 response.sendRedirect。

但我不确定它是否会删除会话属性？有什么想法吗 ？

PS我必须做sendRedirect，我不能使用forward。

```
session.removeAttribute(Constants.USER_REQUEST_URI); 
response.sendRedirect(userReqUri); 
```

**回答：** 只需一点调试就解决了我的问题。我通过获取变量检查了会话属性值，它为空。所以它从会话中删除了变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:23:31.457

是的，如果`Constants.USER_REQUEST_URI`给出正确的名称，因为它存储在会话中，那么它将删除它们。

会话的工作方式与 GET 和 POST 请求不同，因此重定向和转发将没有区别。

确认这一点的好方法是检查重定向后变量是否可访问

```
session.getAttribute(Constants.USER_REQUEST_URI) 
```

# c# - 根据另一个列表中的两个参数从一个列表中删除项目

> ID：12207732
> 
> 赞同：1
> 
> 时间：2012-08-31T01:17:08.927
> 
> 标签：c#, linq, linq-to-objects

我有两个客户列表，list1 和 list2，具有 id、name 和 city 属性。我需要从 list1 中删除项目，如果它们在 list2 中存在相同的名称和城市。如何编写多参数选择的 linq 查询。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T01:23:19.273

```
list1.RemoveAll(c => list2.Any(c2 => c2.Name == c.Name && c2.City == c.City)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:19:26.820

与使用两个布尔值编写任何条件相同 - 使用`&&`or `||`。一个例子：

```
from x in list1
where list2.Any(y => y.Name == x.Name && y.City == x.City)
select x 
```

请注意，“谓词”只是 a `Func<MyType, bool>`，所以只要你最后返回一个布尔值，你就可以在那里做一些非常时髦的事情。

当然，您必须在删除之前枚举`IEnumerable`( it)，因为在枚举列表*时*`.ToList()`您无法更改列表，但您可能知道（或者只是与上面的谓词一起使用）*`List.RemoveAll`*

# java - java中的泛型和强制转换

> ID：12207734
> 
> 赞同：1
> 
> 时间：2012-08-31T01:17:25.120
> 
> 标签：java, generics, casting

假设我有以下代码

```
E[] arrayVar = (E[])new Object[1];// It causes a compiler warning 
```

问题是，在什么情况下代码会导致运行时错误，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:07:54.927

如果您尝试将结果分配给 reified 类型，则该代码只会导致运行时错误`E`：

```
createArray(); // no exception
String[] arr = createArray(); // causes ClassCastException

public static <E> E[] createArray() {
    return (E[]) new Object[1];
} 
```

创建泛型数组的安全方法是使用[`Array.newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%29)：

```
public static <E> E[] createArray(Class<E> component) {
    return (E[]) Array.newInstance(component, 1);
} 
```

此方法不会导致`ClassCastException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:27:37.157

展开 LastStar007's Answer

该语句的问题在于 java 直到运行时才能确定对象 E 的类型。同样不幸的是，java 没有提供一种简单的方法来确定指定对象的类型（getClass() 不适用于此）。

您最好的选择（如果是数字数据）是检查每个助记符的最大值或字符数据，检查每个字符的存储大小。是的，这听起来很乏味，但是 java 没有类型信息，比如 C++，这会让事情变得更容易

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-31T01:23:36.920

它永远不会导致运行时错误，因为它总是会导致编译时错误。An`Object`不能向下转换为`E`，因此 an`Object[]`不能向下转换为`E[]`。除此之外，您无法创建类型数组，因为该类在编译时`E`不知道类型是什么。`E`

# html - HTML/CSS 嵌套 div 与滚动条向左浮动

> ID：12207735
> 
> 赞同：0
> 
> 时间：2012-08-31T01:18:21.903
> 
> 标签：html, css, css-float

我想用一个固定高度和宽度的 div 做一个简单的效果，它包含一组可以从左到右滚动的 div。

这是代码，但由于某种原因孩子们不想漂浮

```
.a       {width:200px; height:200px; overflow-x:scroll; border:3px solid red;}
.a > div​ {width:170px; height:170px; float:left; background:#eee; border:1px dotted #ddd;}

<div class="a">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
</div> 
```

[http://jsfiddle.net/SZzwP/](http://jsfiddle.net/SZzwP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:32:15.483

您不必（也不应该）更改您的 HTML。

只是`white-space:nowrap`用来避免断线

```
.a{
    width:200px;
    overflow-x:scroll;
    border:3px solid red;
    white-space:nowrap;
}
.a > div {
    width:170px; height:170px;
    display:inline-block;
    background:#eee;
    border:1px dotted #ddd;
} 
```

在这里看到它：http: [//jsfiddle.net/5Rz98/3/](http://jsfiddle.net/5Rz98/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:23:55.787

Basically, you want a `div` inside of the container with a width that can accommodate the two `div`'s side by side. Without doing this, you're trying to float 2 `div`'s with a combined width of over `200px` (the container).

* * *

HTML

```
<div class="a">
    <div class="inner">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
    </div>
</div>​ 
```

CSS

```
.a{
    width:200px; 
    height:200px; 
    overflow-x:scroll; 
    border:3px solid red;
}

.inner{
    width:344px;
}

.inner div{
    width:170px; 
    height:170px; 
    float:left; 
    background:#eee; 
    border:1px dotted #ddd;
}​ 
```

[http://jsfiddle.net/charlescarver/a4T8f/1/](http://jsfiddle.net/charlescarver/a4T8f/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T01:20:57.677

你给每个孩子一个宽度`170px`，但父母只是`200px`。请将孩子的宽度更改为小于`50px`：

```
.a       {width:200px; height:200px; overflow-x:auto; border:3px solid red;}
.a > div {width:45px; height:170px; float:left; background:#eee; border:1px dotted #ddd;} 
```

此外，让`overflow-x: auto`最初的水平滚动不显示。

### 如果是滑块，您需要使用另一个标记：

```
<div class="a">
    <div>
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
    </div>
</div>​ 
```

### CSS：

```
.a       {width:200px; height:200px; overflow-x:auto; border:3px solid red;}
.a > div {width:700px; height:170px;}
.a > div > div {width:170px; height:170px; float:left; background:#eee; border:1px dotted #ddd;} 
```

### 小提琴：http: [//jsfiddle.net/fPeUg/](http://jsfiddle.net/fPeUg/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T01:24:43.033

You need another nest div inside .a with a width long enough for all the inner divs to float in, like this:

```
<div class="a">
    <div class="b">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    </div>
</div>
​.a       {width:200px; height:200px; overflow-x:scroll; border:3px solid red;}
.b {width:800px}
.b > div {width:170px; height:170px; float:left; background:#eee; border:1px dotted #ddd;} 
```

​</p>

# javascript - 表单提交字符串 concat/modify

> ID：12207737
> 
> 赞同：0
> 
> 时间：2012-08-31T01:18:50.430
> 
> 标签：javascript, forms, mootools

所以不确定这是否可能，但我有一个非常复杂的表格。具有多个处理级别，即：如果您单击单选按钮“x”数量选项，则在下拉列表中等等等等。

那么我遇到的问题是所有表单字段都需要一个名称，然后我提交了我发送很多垃圾的表单。IE Url 可能是 '?meat=3434?fruit=34495?salad=034943' 你明白了。但最后我所期待的只是将“沙拉”值拉到 url 中，而没有所有其他副产品。即：'?沙拉=034943'

我尝试了一些事情，将所有输入收音机等从表单中拉出并将它们放在一个 div 中。制作一个只有一个隐藏值的表格，这样我就可以通过 Mootools （但这会产生冲突，因为我使用的是 Mootools Form.Validator 所以失败了）然后我厌倦了制作两个表格，一个只是全部显示，然后我会将我想要的值拉入处理表单。我认为这会起作用，但显然它仍然会处理这两种形式。

任何关于如何实现这一点的想法/技术将不胜感激！（因为我正在失去理智）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:21:31.023

禁用您不想发送的任何表单字段，它不会显示在 URL 中。

在 HTML 中是：

```
<INPUT type="text" name="foo" DISABLED> 
```

在 javascript 集中`document.forms[...].elements[....].disabled = true`。

如果您使用 CSS 隐藏该字段，它仍会像往常一样发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:54:01.033

您这样做的优雅方式是安装您的 GET url 以自己提交.. 这样您就可以只发送您想要的内容.. 不要发送任何垃圾.. 您将来可能会遇到您不知道的变量的问题发送..

你可以使用jQuery的这个util函数

```
var params = { width:1680, height:1050 };
var str = jQuery.param(params);

// str is "width=1680&height=1050" 
```

# objective-c - Valgrind 使用 libobjc 显示泄漏的内存

> ID：12207740
> 
> 赞同：0
> 
> 时间：2012-08-31T01:19:16.780
> 
> 标签：objective-c, gcc, memory-leaks, libobjc

试图找出我在这里缺少的东西。

在 CentOs5 上运行。

我把它归结为一个简单的简单程序，但最终还是会出现内存泄漏。不确定这是 Valgrind 中的错误还是 libobjc 中的错误。

主文件

```
int main(){return 0;} 
```

我编译并将其与 gcc 链接

```
gcc main.m -o main -lobjc 
```

当我跑步时，`valgrind main`我得到了泄漏的内存

```
==27005== HEAP SUMMARY:
==27005==     in use at exit: 8,485 bytes in 133 blocks
==27005==   total heap usage: 145 allocs, 12 frees, 11,053 bytes allocated
==27005==
==27005== LEAK SUMMARY:
==27005==    definitely lost: 16 bytes in 1 blocks
==27005==    indirectly lost: 16 bytes in 1 blocks
==27005==      possibly lost: 0 bytes in 0 blocks
==27005==    still reachable: 8,453 bytes in 131 blocks
==27005==         suppressed: 0 bytes in 0 blocks 
```

如果我不链接 libobjc（不使用 -lobjc），我不会出现内存泄漏。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:59:21.423

嗯......所以看起来内存是为每个声明的Objective-C类分配的。因此，无论您是否使用它们，链接 libobjc 最终都会在运行时初始化其中一些类。类初始化成本似乎是一次性成本，所以我想虽然在程序结束时没有释放内存，但它确实不是会伤害我的泄漏，因为必须为该内存分配无论如何，整个程序的长度。

不过，还是有点烦。希望我能在应​​用退出之前释放那个内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:29:33.093

也许你的centOS上没有libobjc？我在 Mountain Lion 上构建并运行您的代码，没有任何警告或错误。

# .net - 应用程序快捷方式在重新启动时重新出现

> ID：12207741
> 
> 赞同：0
> 
> 时间：2012-07-09T15:19:17.140
> 
> 标签：.net, installation, shortcuts

我有一个应用程序，我已经为 Microsoft Visual Studio 2010 构建了一个 .msi 安装程序。我最近进行了一些更新，包括更改版本号并使用这些更新重新构建了安装程序。安装程序在桌面和开始菜单中都包含快捷方式。运行安装程序似乎工作正常，并且这两个快捷方式都有效。重新启动计算机后，我发现快捷方式更改为具有目标类型的应用程序（首次使用时安装），并且 Start In: 字段更改为不存在的位置。一旦发生这种情况，每次您使用该快捷方式时，它都会尝试再次安装应用程序并失败。

我还更改了安装程序创建的快捷方式的名称。这似乎有效，并且该快捷方式在重新启动后仍然有效。但是，重新启动后，旧名称不起作用的快捷方式也会出现在桌面和“开始”菜单中。

有没有人知道我可能设置错了什么，或者我需要更改什么才能正确使用快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:07:51.180

我似乎已经解决了这个问题......即使我不确定我是否了解导致它的原因或解决它的原因。最后，我创建了一个新的解决方案文件并使用该新解决方案构建了项目。我不明白为什么这会有所作为，并且比较他们更改的新旧解决方案文件似乎并不重要。但是，执行此操作后，从此解决方案构建的安装程序似乎可以正常工作。

我还应该注意，我删除了部署项目并创建了一个新项目。这样做似乎对问题没有影响，但新的部署项目包含在新的解决方案中。

# java - 如何检测捆绑包是否已完全加载到 osgi 容器中？

> ID：12207744
> 
> 赞同：3
> 
> 时间：2012-08-31T01:19:44.483
> 
> 标签：java, osgi, loading, soa

是否有任何类型的事件侦听器，例如 BundleEvent 类中的事件侦听器，用于检测捆绑包是否已完全加载并可用于请求？

我进行了搜索，我能找到的只有[这个](https://stackoverflow.com/questions/5879040/how-to-detect-if-running-in-osgi-container)

它不使用事件侦听器，这意味着我需要手动或定期检查（顺便说一下，我没有测试那段代码。

是否有任何事件，如 BundleEvent.STARTING 用于加载操作？或者我们需要自己实现一个（如果可能的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:17:23.013

In OSGi, there are two kinds of dependencies. The first kind is basically to setup an environment in which your bundle can run in a safe way. This includes code dependencies and other dependencies that you can express in your manifest. The framework ensures that these dependencies are met before it resolves you bundles. If those dependencies are not met, you won't be able to run a single instruction.

The second kind of dependencies are more dynamic, your code should be able to handle them in runtime when they change. In OSGi, these dependencies are best expressed services. With Declarative Services (specifically with the annotations) it is trivial to depend on others (Please, please don't use Service Tracker for this, DS is far, far, far superior).

So as the other responders said, ready is in the eye of the beholder. In OSGi, when you express your dependencies on services the problem shifts away from the bundle is ready, to: is there a service X? As long as the registrar of service X follows these rules as well you have a very robust and resilient application model. Since the framework and DS strictly follow the life cycle rules many different kinds of reasons why a bundle is ready or not collapse in a single model: the service.

Short example, Service Y depends on service X:

```
@Component 
public class YImpl implements Y {

   @Activate
   void activate() { /* only called when X is registered */ }
   @Reference
   void setX( X x ) {
      this.x = x;
   } 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T05:45:30.773

正如 BJ 提到的，一种选择是使用 OSGi 服务。例如，捆绑 B 将等待服务出现。当包 A 准备好（例如，激活完成）时，它会注册一个服务。这将通知捆绑包 B。您可以`ServiceTracker`为此使用 a。

另一种选择是使用`BundleTracker`. 在捆绑 B 的激活器中，您可以注册一个`BundleTracker`收到`STARTED`捆绑状态通知的通知。但是，您还希望监视其他状态，以便您发现捆绑包何时消失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T03:26:52.870

OSGi 框架无法知道您的捆绑软件何时“准备好”用于业务。该框架当然可以确保您的包的代码依赖关系被解析以允许加载类。但是框架不知道任何其他依赖项。只有您的捆绑包才能知道它何时可以投入使用。您可以通过注册一个表示这一点的服务来让它宣传这一点。

# android - 在微调器中单击项目后，显示对话框

> ID：12207755
> 
> 赞同：0
> 
> 时间：2012-08-31T01:21:51.147
> 
> 标签：android

是否有可能有一个微调器，当在列表中按下一个项目时显示一个对话框，它是否是好的代码而不是太乱。如果可以的话，有人可以给我看一些代码，这样我就可以看到这个完成了谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:00:30.403

您可以在微调器上添加项目选择侦听器，然后在选择或触摸项目时启动对话框。像这样 -

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

            Toast.makeText(getApplicationContext(), "Here add the Dialog you want !", Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    }); 
```

# scala - Why do immutable objects enable functional programming?

> ID：12207757
> 
> 赞同：39
> 
> 时间：2012-08-31T01:21:57.323
> 
> 标签：scala, functional-programming

I'm trying to learn scala and I'm unable to grasp this concept. Why does making an object immutable help prevent side-effects in functions. Can anyone explain like I'm five?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-31T04:04:42.363

有趣的问题，有点难以回答。

函数式编程在很大程度上是关于使用数学来推理程序。为此，需要一种描述程序以及如何证明程序可能具有的属性的形式。

有许多计算模型可以提供这种形式，例如 lambda 演算和图灵机。并且它们之间存在一定程度的等效性（请参阅[this question](https://cstheory.stackexchange.com/questions/625/relationship-between-turing-machine-and-lambda-calculus)，进行讨论）。

在非常真实的意义上，具有可变性和一些其他副作用的程序直接映射到函数式程序。考虑这个例子：

```
a = 0
b = 1
a = a + b 
```

这是将其映射到功能程序的两种方法。第一个，`a`并且`b`是“状态”的一部分，每一行都是从一个状态到一个新状态的函数：

```
state1 = (a = 0, b = ?)
state2 = (a = state1.a, b = 1)
state3 = (a = state2.a + state2.b, b = state2.b) 
```

这是另一个，其中每个变量都与时间相关联：

```
(a, t0) = 0
(b, t1) = 1
(a, t2) = (a, t0) + (b, t1) 
```

那么，鉴于上述情况，为什么不使用可变性呢？

好吧，这就是数学的有趣之处：形式主义越不强大，用它做证明就越容易。或者，换句话说，很难对具有可变性的程序进行推理。

因此，关于可变性编程的概念几乎没有什么进展。著名的设计模式不是通过研究得出的，也没有任何数学支持。相反，它们是多年反复试验的结果，其中一些后来被证明是错误的。谁知道其他随处可见的几十种“设计模式”？

与此同时，Haskell 程序员提出了 Functors、Monads、Co-monads、Zippers、Applicatives、Lenses……数十个带有数学支持的概念，最重要的是，编写代码以构成程序的实际模式。可以用来推理程序、增加可重用性和提高正确性的东西。看看[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)的例子。

难怪不熟悉函数式编程的人会对这些东西感到害怕……相比之下，编程世界的其他人仍在使用几十年前的概念。新概念的想法是陌生的。

不幸的是，所有这些模式，所有这些概念，只适用于他们正在使用的代码，不包含可变性（或其他副作用）。如果是这样，那么它们的属性将不再有效，并且您不能依赖它们。你又回到了猜测、测试和调试。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-31T01:24:16.840

In short, if a function mutates an object then it has side effects. Mutation is a side effect. This is just true by definition.

In truth, in a *purely* functional language it should not matter if an object is technically mutable or immutable, because the language will never "try" to mutate an object anyway. A pure functional language doesn't give you any way to perform side effects.

Scala is not a pure functional language, though, and it runs in the Java environment in which side effects are very popular. In this environment, using objects that are incapable of mutation encourages you to use a pure functional style because it makes a side-effect oriented style impossible. You are using data types to enforce purity because the language does not do it for you.

Now I will say a bunch of other stuff in the hope that it helps this make sense to you.

Fundamental to the concept of a variable in functional languages is referential transparency.

Referential transparency means that there is no difference between a value, and a reference to that value. In a language where this is true, it makes it much simpler to think about a program works, since you never have to stop and ask, is this a value, or a reference to a value? Anyone who's ever programmed in C recognizes that a great part of the challenge of learning that paradigm is knowing which is which at all times.

In order to have referential transparency, the value that a reference refers to can never change.

(Warning, I'm about to make an analogy.)

Think of it this way: in your cell phone, you have saved some phone numbers of other people's cell phones. You assume that whenever you call that phone number, you will reach the person you intend to talk to. If someone else wants to talk to your friend, you give them the phone number and they reach that same person.

If someone changes their cell phone number, this system breaks down. Suddenly, you need to get their new phone number if you want to reach them. Maybe you call the same number six months later and reach a different person. Calling the same number and reaching a different person is what happens when functions perform side effects: you have what seems to be the same thing, but you try to use it, it turns out it's different now. Even if you expected this, what about all the people you gave that number to, are you going to call them all up and tell them that the old number doesn't reach the same person anymore?

You counted on the phone number corresponding to that person, but it didn't really. The phone number system lacks referential transparency: the number isn't really ALWAYS the same as the person.

Functional languages avoid this problem. You can give out your phone number and people will always be able to reach you, for the rest of your life, and will never reach anybody else at that number.

However, in the Java platform, things can change. What you thought was one thing, might turn into another thing a minute later. If this is the case, how can you stop it?

Scala uses the power of types to prevent this, by making classes that have referential transparency. So, even though the language as a whole isn't referentially transparent, your code *will* be referentially transparent *as long as you use immutable types*.

Practically speaking, the advantages of coding with immutable types are:

1.  Your code is simpler to read when the reader doesn't have to look out for surprising side effects.
2.  If you use multiple threads, you don't have to worry about locking because shared objects can never change. When you have side effects, you have to really think through the code and figure out all the places where two threads might try to change the same object at the same time, and protect against the problems that this might cause.
3.  Theoretically, at least, the compiler can optimize some code better if it uses only immutable types. I don't know if Java can do this effectively, though, since it allows side effects. This is a toss-up at best, anyway, because there are some problems that can be solved much more efficiently by using side effects.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T01:46:33.870

我正在使用这个*5 岁的*解释：

```
class Account(var myMoney:List[Int] = List(10, 10, 1, 1, 1, 5)) {
  def getBalance = println(myMoney.sum + " dollars available")
  def myMoneyWithInterest = {
    myMoney = myMoney.map(_ * 2)
    println(myMoney.sum + " dollars will accru in 1 year")
  }
} 
```

假设我们在 ATM 上，它正在使用此代码向我们提供帐户信息。

您执行以下操作：

```
scala> val myAccount = new Account()
myAccount: Account = Account@7f4a6c40

scala> myAccount.getBalance
28 dollars available

scala> myAccount.myMoneyWithInterest
56 dollars will accru in 1 year

scala> myAccount.getBalance
56 dollars available 
```

`mutated`当我们想检查我们当前的余额加上一年的利息时，我们的账户余额。现在我们的账户余额不正确。银行的坏消息！

如果我们在类定义中使用`val`而不是`var`跟踪`myMoney`，我们将无法获得`mutate`美元并提高我们的余额。

当定义类（在 REPL 中）时`val`：

```
error: reassignment to val
             myMoney = myMoney.map(_ * 2 
```

Scala 告诉我们，我们想要一个`immutable`值，但正在尝试改变它！

感谢 Scala，我们可以切换到`val`，重新编写我们的`myMoneyWithInterest`方法，并确保我们的`Account`类永远不会改变平衡。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-31T08:36:05.850

函数式编程的一个重要特性是：如果我用相同的参数调用相同的函数两次，我将得到相同的结果。在许多情况下，这使得对代码的推理变得更加容易。

现在想象一个函数返回`content`某个对象的属性。如果这`content`可以改变函数可能会在具有相同参数的不同调用上返回不同的结果。=> 没有更多的函数式编程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-31T01:42:03.760

先来几个定义：

*   副作用是状态的变化——也称为突变。
*   不可变对象是不支持突变的对象（副作用）。

传递可变对象（作为参数或在全局环境中）的函数*可能会也可能不会*产生副作用。这取决于实施。

但是，仅传递不可变对象（作为参数或在全局环境中）的函数*不可能*产生副作用。因此，独占使用不可变对象将排除副作用的可能性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T01:46:49.967

Nate 的回答很棒，这里有一些例子。

在函数式编程中，有一个重要的特性就是当你调用一个具有相同参数的函数时，你总是得到相同的返回值。

这对于不可变对象总是如此，因为您不能在创建后修改它们：

```
class MyValue(val value: Int)

def plus(x: MyValue) = x.value + 10

val x = new MyValue(10)
val y = plus(x) // y is 20
val z = plus(x) // z is still 20, plus(x) will always yield 20 
```

但是如果你有可变对象，你不能保证 plus(x) 总是为同一个 MyValue 实例返回相同的值。

```
class MyValue(var value: Int)

def plus(x: MyValue) = x.value + 10

val x = new MyValue(10)
val y = plus(x) // y is 20
x.value = 30
val z = plus(x) // z is 40, you can't for sure what value will plus(x) return because MyValue.value may be changed at any point. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-01T23:07:14.557

> 为什么不可变对象支持函数式编程？

他们没有。

以“函数”或“过程”、“例程”或“方法”的一个定义为例，我相信它适用于许多编程语言：“一段代码，通常命名，接受参数和/或返回值。”

采用“函数式编程”的一种定义：“使用函数进行编程”。使用函数进行编程的能力与状态是否被修改无关。

例如，Scheme 被认为是一种函数式编程语言。它具有尾调用、高阶函数和使用函数的聚合操作。它也有可变对象。虽然可变性破坏了一些很好的数学品质，但它并不一定会阻止“函数式编程”。

# jquery - jQuery "Chosen" for Select Boxes - how to apply styling after AJAX loads the select element

> ID：12207758
> 
> 赞同：5
> 
> 时间：2012-08-31T01:22:08.057
> 
> 标签：jquery, select, jquery-chosen

So I'm trying to apply the [Chosen jQuery plugin](http://harvesthq.github.com/chosen/) to a select box after it has been loaded via [XAJAX](http://www.xajaxproject.org/). Here's the code:

Normally, I start on page load, and all select boxes with the class are correctly styled appropriately:

```
$(document).ready( function () {        
    $(".chzn-select").chosen();
}); 
```

Next, I have a function that uses XAJAX to display the new select box in the specified DIV on the page. This works fine. HOWEVER, it's not styled by Chosen as it should be.

I have tried to add a delay in there too, because I read on some forums that that worked for some people. It does not work....

```
function getNewSelect(property_id){
    xajax_getNewSelect();
    $(".chzn-select-ajax").delay(5).chosen();
} 
```

Does anyone have any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:24:16.280

What does xajax do?

`delay` only delays animations, it has no effect on any other function.

If you want to delay a function use:

```
setTimeout(function() { $(".chzn-select-ajax").chosen(); }, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:00:54.317

```
<script language="javascript" type="text/javascript">
    $(function () {
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(loadControlDuringAjax);
        loadControlDuringAjax();
    });
    function loadControlDuringAjax() {
        $(".chzn-select").chosen(); $(".chzn-select-deselect").chosen({ allow_single_deselect: true });
    }
</script> 
```

这对我很有用

希望这能解决你的问题

# jquery - telerik mvc slider value from text field

> ID：12207760
> 
> 赞同：1
> 
> 时间：2012-08-31T01:22:21.413
> 
> 标签：jquery, telerik-mvc

I am trying to update the value of Telerik MVC slider from a text field which is updated from a javascript. Here is the Telerik script:

```
 <input value="" id="PSlice" name="PSlice" />
<%= Html.Telerik().Slider<int>()
        .Name("SliceSlider")
        .HtmlAttributes(new { style = "color: white" })
        .TickPlacement(SliderTickPlacement.None)
        .Value((int[])$('#PSlice').val())
        .Max(100)
        .Min(0)
        .ClientEvents(events => events
            .OnLoad("onLoadSlider")
            .OnChange("onChangeSlider")
            .OnSlide("onSlideSlider"))
        %><br /> 
```

I get the following error:

```
Unexpected character '$'
 .Value((int[])$('#PSlice').val()) 
```

I put the value of the text field from:

```
function Playimages() {
  i = (i < sl - 1) ? (i + 1) : 0;
  $('#Image1').attr('src', images[i].src);
  $('#PSlice').val(i);
} 
```

Would appreciate your suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:58:32.923

`Value`不能是表达式。`PSlice`因为这基本上都是在客户端完成的，所以当使用一些 JavaScript更新滑块时，您需要更新滑块。

```
<input type="text" value="" id="PSlice" name="PSlice" />
<%= Html.Telerik().Slider<int>()
        .Name("SliceSlider")
        .HtmlAttributes(new { style = "color: white" })
        .TickPlacement(SliderTickPlacement.None)
        .Max(100)
        .Min(0)
        .ClientEvents(events => events
            .OnLoad("onLoadSlider")
            .OnChange("onChangeSlider")
            .OnSlide("onSlideSlider"))
        %>
<script type="text/javascript">
// some wireup on load...
$(function() {
   var sliceSlider = $('#SliceSlider').data('tSlider'); // get slider object

   // set initial slider 
   $('#PSlice').on('change', function() {
     sliceSlider.value($(this).val());
   });
});
</script> 
```

# algorithm - Shift trace of polygon by given vector

> ID：12207761
> 
> 赞同：3
> 
> 时间：2012-08-31T01:22:30.450
> 
> 标签：algorithm, geometry, polygon

I need algorithm to get shift trace of given polygon by given 2d-vector.

Given valid polygon with no holes, but possibly concave. Operation performs on plane, so the result might be a polygon, possibly with holes. If it simplifies the task, outer polygon is enough.

![enter image description here](../Images/c45eb84b0a2c17c4bf8236f353dcc59d.png)

It looks simple to describe, but I find it complex to realize, so I look for some ready solutions, preferably in c#.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:57:36.137

假设您有一个由点 A1、A2、...、An 给出的多边形 P。

现在您决定在 x 轴上移动 X，在 y 轴上移动 Y。

您可以对每个点单独执行此操作以获取多边形的结束位置。

让我们称由点 B1、B2、...、Bn 给出的移动多边形 Q。

然后你需要做的就是绘制以下平行四边形：

(A1 A2 B2 B1), (A2 A3 B3 B2), (A3 A4 B4 B3), ... , (An-1 An Bn Bn-1) , (An A1 B1 Bn)

此时，您将填写您想要的形状。

一些平行四边形会重叠，但这没关系，因为你只是用相同的红色填充它们。

通过这种方式，您还可以正确地输出第二个示例（中间孔的右下角应该是对角线，因为唇部滑动到位）。

# c# - Move controls from the user control to a panel control

> ID：12207762
> 
> 赞同：0
> 
> 时间：2012-08-31T01:22:49.023
> 
> 标签：c#, user-controls, controls, panel

I'm trying to write a form theme class library to adjust the form layout in a simple way for any project I'll be working on.
This is basically an idea of what it should look like:

[http://www.beaverdistrict.nl/form_layout.png](http://www.beaverdistrict.nl/form_layout.png)

In essence, the plugin works as follows:

```
// form class, which inherits the plugin class
class FormToTheme : ThemedForm
{
    public FormToTheme()
    {
        // some code here
    }
}

// plugin class itself
class ThemedForm: Form
{
    public ThemedForm()
    {
        // some code here
    }
} 
```

Basically I set the FormBorderStyle to None, and drew the layout by code.
But now, the controls that are added can be placed over the custom titlebar, which isn't possible in a normal form if you keep the default FormBorderStyle. So I figured that I could work around this by automatically adding the controls to the content panel, instead of the usercontrol.

So what I tried to do was this:

```
private void ThemedForm_ControlAdded(Object sender, ControlEventArgs e)
{
    // some simple code to set the control to the current theme I'm using
    e.Control.BackColor = Color.FromArgb(66, 66, 66);
    e.Control.ForeColor = Color.White;

    // the code where I try to place the control in the contentPanel controls array, 
    // and remove it from it's parent's controls array.
    if (e.Control.Name != contentPanel.Name)
    {
        e.Control.Parent.Controls.Remove(e.Control);
        contentPanel.Controls.Add(e.Control);
    }
} 
```

But when I try to add a new control in the main form as well as in the visual editor, i get the following error:

```
child is not a child control of this parent 
```

So my question is: is there a way to work around this error, and move the controls from the usercontrol to the content panel?
Note that I do want this to be automated in the ThemedForm class, instead of calling methods from the main form.

EDIT:
I tried this:
[http://forums.asp.net/t/617980.aspx](http://forums.asp.net/t/617980.aspx)
But that will only cause visual studio to freeze, and then I need to restart.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:25:20.717

我知道回答自己的问题并不合适，但是我想出的解决方案需要一些解释，这对于通过编辑添加到我的问题中来说太多了。

所以我们开始：

在继承的“ThemedForm”类中，我创建了一个私有变量，以便能够在调用 Controls 属性时返回该变量：

```
private Controls controls = null; 
```

我将变量设置为 null，因为我需要将变量传递给“ThemedForm”类构造函数中的类。稍后我将创建该类的一个新实例。

然后我创建了一个类来替换 Controls 属性：

```
public class Controls
{
    private Control contentPanel = null;
    private ThemedForm themedform = null;
    public Controls(ThemedForm form, Control panel)
    {
        contentPanel = panel;
        themedform = form;
    }
    public void Add(Control control)
    {
        if (control != contentPanel)
        {
            contentPanel.Controls.Add(control);
        }
        else
        {
            themedform.Controls_Add(control);
        }
    }
    public void Remove(Control control)
    {
        if (control != contentPanel)
        {
            contentPanel.Controls.Remove(control);
        }
        else
        {
            themedform.Controls_Remove(control);
        }
    }
} 
```

我知道这个类与原始 Controls 属性的所有功能相去甚远，但现在必须这样做，如果你愿意，你可以添加自己的功能。

正如您在 Controls 类的 Add 和 Remove 方法中看到的那样，我尝试确定需要添加的控件是要添加其余控件的内容面板，还是需要添加的任何其他控件被添加到内容面板。

如果控件实际上是内容面板，我将它添加到或从“ThemedForm”类的基类的 Controls 属性中删除，它是一个“Form”类。否则，我只是将控件添加到内容面板的 Controls 属性中。

然后我将 Controls_Add 和 Controls_Remove 方法添加到“ThemedForm”类，以便能够从“ThemedForm”基类的 Controls 属性中添加或删除控件。

```
public void Controls_Add(Control control)
{
    base.Controls.Add(control);
}
public void Controls_Remove(Control control)
{
    base.Controls.Remove(control);
} 
```

它们是不言自明的。

为了从外部类调用 Controls.Add 或 Controls.Remove 方法，我需要添加一个隐藏当前 Controls 属性的公共属性，并返回我分配给替换类的私有变量。

```
new public Controls Controls
{
    get { return controls; }
} 
```

最后，我创建了一个 Controls 类的新实例，传递了当前的“ThemedForm”类和 contentPanel 控件，以使其全部运行。

```
_controls = new Controls(this, contentPanel); 
```

完成所有这些操作后，我能够将添加到 UserControl（甚至在可视化编辑器中）的任何控件“重定向”到内容面板。这允许我使用任何控件的 Dock 属性，它会停靠在内容面板内，而不是停靠在我的整个表单上。

这仍然有点问题，因为在可视化编辑器中，停靠的控件似乎仍然停靠在整个表单上，但是在运行应用程序时，结果是我想要的。

我真的希望这对任何人都有帮助。

# validation - 服务层中的 FluentValidation？

> ID：12207784
> 
> 赞同：4
> 
> 时间：2012-08-31T01:24:53.313
> 
> 标签：validation, fluentvalidation, service-layer

我一直在 ASP.NET MVC 3 中的视图模型上使用 FluentValidation，效果非常好！

我现在想将它用作我的服务层内我的域对象的验证引擎。

你能用它做复杂的验证方案吗？

我正在寻找这样的东西：

```
public class MyService : IMyService
{
    private readonly ISomeOtherService someOtherService;
    public MyService(ISomeOtherService someOtherService)
    {
        this.someOtherService = someOtherService;
    }

    public bool SaveObject()
    {
        var validator = new MyValidator(someOtherService);
        if (!validator.IsValid())
        {
            //spin through the validation results, add them to IValidationDictionary which is a ModelState wrapper

            return false;
        }
    }
}

public class MyValidator : AbstractValidator<MyObject>
{
    private readonly IOtherService service;
    public MyValidator(ISomeOtherService service)
    {
        // Here I want to be able to perform complex validation rules that may involve other services??
    }
} 
```

像这样的东西。我也愿意使用另一个验证库/方案吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:56:38.033

我通过创建 a`ValidationService`和 a来解决这个问题`ValidatorFactory`，我认为这是一个非常巧妙的解决方案。

这是上的线程`ValidatorFactory`：[FluentValidation Autofac ValidatorFactory](https://stackoverflow.com/questions/12225140/fluentvalidation-autofac-validatorfactory)

# objective-c - ARC 是否曾经注入非常规代码？

> ID：12207785
> 
> 赞同：0
> 
> 时间：2012-08-31T01:24:56.387
> 
> 标签：objective-c, automatic-ref-counting

ARC 是否曾经注入过在非 ARC 环境中通常看不到的保留和释放调用？

例如，从 getter 显式释放对象：

```
- (NSArray *)dummyArray {
     return [[NSArray alloc]init];
}

- (void)useDummyArray {
    NSArray * arr = [self dummyArray];
    //do something with arr
    [arr release]; //unconventional injection of release.
} 
```

ARC 是否会像上面的代码一样生成发布语句，或者它会自动释放 [self dummyArray] 返回的数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:33:11.053

ARC的美妙之处在于你不知道，或者需要知道。但是，您可以为 ARC 静态分析器提供提示：

```
 -(NSArray *) dummyArray NS_RETURNS_RETAINED { // this tells ARC that this function returns a retained value that should be released by the callee
      return [[NSArray alloc] init]; 
 } 

 -(NSArray *) otherDummyArray NS_RETURNS_NOT_RETAINED { // this tells ARC that the function returns a non-retained (autoreleased) value, which should NOT be released by the callee.
      return [[NSArray alloc] init];
 } 
```

但是，`NS_RETURNS_NOT_RETAINED`是默认值，只要您的函数名称不以 开头`init`，其中`NS_RETURNS_RETAINED`将成为默认值。

因此，在您的特定场景中，它几乎总是会返回一个`autorelease`'d 值。一个主要原因是支持使用非 ARC 代码进行插值，这可能导致泄漏。

# javascript - Place corner stamp in top left corner in Masonry?

> ID：12207793
> 
> 赞同：0
> 
> 时间：2012-08-31T01:25:41.457
> 
> 标签：javascript, jquery, jquery-masonry

I had been just including my corner stamp as the first item, but I now have a need to prepend new items on the fly rather than append them. This causes the corner stamp to be pushed down as items are added.

Does anyone know of a work around for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:46:26.627

`after`您可以尝试使用角落标记，而不是添加到父 div 。

```
$('.corner-stamp').after('<div>newElement</div>'); 
```

如果您也有没有角印的案例。

```
if($('.corner-stamp').length){
  $('.corner-stamp').after('<div>newElement</div>');
  $('#container').masonry( 'reload' );
  } 
else{
  $('#container').prepend('<div>newElement</div>').masonry( 'reload' );
  } 
```

# objective-c - Section Date Titles - a section for each day with Core Data

> ID：12207794
> 
> 赞同：0
> 
> 时间：2012-08-31T01:25:45.110
> 
> 标签：objective-c, ios, core-data, tableview, sections

I'm piggy backing off this previous question that was never answered - [Date Section Titles don't work](https://stackoverflow.com/questions/8113114/date-section-titles-dont-work)

Can anyone provide code to help me (and the community) properly convert Apple's project DateSectionTitles ([http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)) from Month section titles to Day section titles?

From my numerous attempts, I believe it fundamentally comes down to altering two parts:

(1) RootViewController.m's titleForHeaderInSection

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    id <NSFetchedResultsSectionInfo> theSection = [[fetchedResultsController sections] objectAtIndex:section];

    /*
     Section information derives from an event's sectionIdentifier, which is a string representing the number (year * 1000) + month.
     To display the section title, convert the year and month components to a string representation.
     */
    static NSArray *monthSymbols = nil;

    if (!monthSymbols) {
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setCalendar:[NSCalendar currentCalendar]];
        monthSymbols = [[formatter monthSymbols] retain];
        [formatter release];
    } 

    NSInteger numericSection = [[theSection name] integerValue];

    NSInteger year = numericSection / 1000;
    NSInteger month = numericSection - (year * 1000);

    NSString *titleString = [NSString stringWithFormat:@"%@ %d", [monthSymbols objectAtIndex:month-1], year];

    return titleString;

} 
```

(2) and Event.m's sectionIdentifier

```
- (NSString *)sectionIdentifier {

    // Create and cache the section identifier on demand.

    [self willAccessValueForKey:@"sectionIdentifier"];
    NSString *tmp = [self primitiveSectionIdentifier];
    [self didAccessValueForKey:@"sectionIdentifier"];

    if (!tmp) {
        /*
         Sections are organized by month and year. Create the section identifier as a string representing the number (year * 1000) + month; this way they will be correctly ordered chronologically regardless of the actual name of the month.
         */
        NSCalendar *calendar = [NSCalendar currentCalendar];

        NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit ) fromDate:[self timeStamp]];
        tmp = [NSString stringWithFormat:@"%d", ([components year] * 1000) + [components month]];
        [self setPrimitiveSectionIdentifier:tmp];

    }
    return tmp;
} 
```

Thank you in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:12:20.837

自己没试过，不过就这样

改变这个，

```
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit ) fromDate:[self timeStamp]];

tmp = [NSString stringWithFormat:@"%d", ([components year] * 1000) + [components month]]; 
```

对此，

```
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit ) fromDate:[self timeStamp]];

tmp = [NSString stringWithFormat:@"%d", ([components year] * 1000) + ([components month] *100) + [components day]]; 
```

它应该为您每天提供一个唯一的 sectionIdentifier，而不是每个月。

您将部分作为月份的原因是因为每次出现都有一个部分标识符，计算如下：

**([组件年份] * 1000) + [组件月份]]**

给定月份中的任何一天都将具有相同的部分标识符。

2009/08/01

例如（2009 * 1000）+ 8；

通过更进一步，

**([组件年] * 1000) + ([组件月] *100) + [组件日]**

你应该得到 (2009 * 1000) + (8 * 100) + 1 = 2009801

每天为您提供唯一标识符。而不是每个月。

希望能帮助到你。

# hadoop - Hadoop master 无法使用不同的 $HADOOP_HOME 启动 slave

> ID：12207795
> 
> 赞同：1
> 
> 时间：2012-08-31T01:25:50.193
> 
> 标签：hadoop, master-slave

在 master 中，`$HADOOP_HOME`是`/home/a/hadoop`，从机`$HADOOP_HOME`是`/home/b/hadoop`

在 master 中，当我尝试使用时`start-all.sh`，主名称节点启动成功，但无法启动从节点的数据节点，并显示以下消息：

```
b@192.068.0.2: bash: line 0: cd: /home/b/hadoop/libexec/..: No such file or directory
b@192.068.0.2: bash: /home/b/hadoop/bin/hadoop-daemon.sh: No such file or directory 
```

关于如何`$HADOOP_HOME`在主配置中指定从站的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:57:32.760

我不知道如何为来自主服务器的各种从服务器配置不同的主目录，但 Hadoop 常见问题解答说 Hadoop 框架不需要 ssh，并且可以在每个节点上手动启动 DataNode 和 TaskTracker 守护程序。

我建议您编写自己的脚本来开始考虑节点的特定环境的事情。但是，请确保将所有从属包含在主从文件中。看来这是有必要的，而且心跳还不足以让master添加slave。

# objective-c - iOS 将 NSMutableArray 的值传递（保留）到另一个视图中的另一个 NSMutableArray

> ID：12207797
> 
> 赞同：0
> 
> 时间：2012-08-31T01:26:38.917
> 
> 标签：objective-c, ios, xcode

我正在使用 .XIB 并且没有 ARC。我将 NSMultableArray 的值传递给另一个视图，如果我放置 [self presentModel...]，它可以工作，但是如果我用按钮调用 AnotherView，AnotherView 的 NSMultableArray 的值为 null！

*另一个视图.h*

```
@interface AnotherViewController : UIViewController<UITableViewDataSource,      UITableViewDelegate>{
NSMutableArray *otherAnother;
NSMutableArray *arrayOfTheAnotherView;
}
@property (retain, nonatomic) IBOutlet UITableView *tableView;
@property (retain, nonatomic) NSMutableArray *arrayOfTheAnotherView; 
```

*另一个视图.m*

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

otherAnother = [[NSMutableArray alloc]init];
otherAnother = [[NSMutableArray alloc]initWithArray:self.arrayOfTheAnotherView];
//    [otherAnother addObjectsFromArray:arrayOfTheAnotherView]; 
NSLog(@"%@", self.arrayOfTheAnotherView);
} 
```

NSLog 已写入“null”

*当前视图.h*

```
@interface CurrentViewController : UIViewController {
NSMutableArray * arrayCurrentView;
AnotherViewController *superAnotherView;
}
@property (retain, nonatomic) AnotherViewController *superAnotherView; 
```

*当前视图.m*

```
@synthesize superAnotherView;
NSString *x = [[NSString alloc]initWithFormat:@"%@",[label text]];

arrayCurrentView = [[NSMutableArray alloc]init];
[arrayCurrentView retain];
[arrayCurrentView addObject:x];

self.superAnotherView = [[AnotherViewController alloc]initWithNibName:nil bundle:nil];
self.superAnotherView.arrayOfTheAnotherView = [[NSMutableArray alloc]init];
[self.superAnotherView.arrayOfTheAnotherView retain];
[self.superAnotherView.arrayOfTheAnotherView addObjectsFromArray:arrayCurrentView]; 
```

我不知道如何保留 NSMultableArray 的值，谢谢帮助。

这就是我调用另一个视图的方式：

```
UIButton *buttonAnother = [UIButton buttonWithType:UIButtonTypeCustom]; [buttonAnother  setTag:5]; [buttonAnother addTarget:self action:@selector(switchTabBar:) forControlEvents:UIControlEventTouchDown]; 
[tabBarViewController.view addSubview:buttonAnother];
- (IBAction)switchTabBar:(id)sender { switch ([(UIButton *)sender tag]) { case 5:     [self.tabBarController setSelectedIndex:0]; break; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:59:18.287

这些应该不是必需的：

```
self.superAnotherView.arrayOfTheAnotherView = [[NSMutableArray alloc]init]; 
[self.superAnotherView.arrayOfTheAnotherView retain]; 
```

初始化类时，属性已经初始化。

事实上，您的显式保留行根本不需要；据我所知，您并没有释放它们，只是将保留计数设为 2，因此必须释放两次。

我认为这里发生了一些事情，没有按照您想要的顺序调用方法和视图控制器，可能与标签栏有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:04:40.567

我发现了！我正在使用 MVC APP 委托的数组不会失去它的价值。AppDelegate NSMutableArray *arrayDelegate; View.m AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate]; [appDelegate.arrayDelegatePedido addObject:@"title"]; //例如

# python - 为什么我的烧瓶应用程序返回空白页面

> ID：12207804
> 
> 赞同：7
> 
> 时间：2012-08-31T01:27:39.597
> 
> 标签：python, flask

我是 Python Web 框架的新手，正在尝试学习 Flask。我完成了教程，一切都很好。我现在正在尝试制作自己的小应用程序来学习该框架。我在我的主 flask.py 文件中有以下代码

```
@app.route('/') 
def index():
    return render_template('main.html') 
```

在 main.html 我有这个 html

```
{% extends "layout.html" %}
{% block content %}
<div> Foo bar test</div>
{% endblock %} 
```

然后在 layout.html 我有一个基本的网页布局，看起来像这样

```
<!DOCTYPE html>       
<title>Flaskpad</title>     
<link href="/static/css/bootstrap.css" rel="stylesheet">    
<link href="/static/css/flaskpad.css" rel="stylesheet">
<style type="text/css">  
.socials {   
padding: 10px;   
}   
</style>  

</head>  
<body>  
    <div class="navbar navbar-fixed-top">  
        <div class="navbar-inner">  
                <div class="container">  
                    <ul class="nav">  
                    <li class="active">  
                            <a class="brand" href="#">Flaskpad/a>  
                    </li>  
                    <li><a href="#">Login</a></li>  
                    <li><a href="#">About</a></li>  
                    <li><a href="#">Contact</a></li>  
                </ul> 
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row fcontent">
            <div class="span3">
                Empty Space
            </div>
            <div class="span6 maincontent">
                {% block content %}{% endblock %}
            </div>
            <div class="span3">
                Empty Space
            </div>
        </div>
        <div class="row ffooter">
            <div class="span12">
                Made by Bar Foo
            </div>
        </div>
    </div> 
</body> 
```

我知道 css 链接没有正确完成，但我只是将它们作为占位符。现在，当我运行 python flask.py 并转到 localhost:5000 时，页面变为空白，我不知道为什么。如果我在将显示的扩展之前在 main.html 中输入普通文本，那么我知道它正在加载 main.html，但它似乎没有扩展布局。该页面实际上是空白的，因为当您查看源代码时什么都没有。我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:43:31.620

为我工作。您的 HTML 文件是否位于与您的 python 模块相关的名为“templates”的文件夹中？

这是我的完整测试代码。

```
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('main.html')

if __name__ == '__main__':
    app.run() 
```

**编辑**：您说：“我在我的主 flask.py 文件中有以下代码”-您可能不应该将其命名为 flask.py，这可能会把事情搞砸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:50:00.150

您使用哪种网络浏览器进行测试？

我尝试了你的代码，它使用 chrome 和 firefox 对我有用，但我确实注意到你`layout.html`的线上有一个错误关闭的锚标记

```
<a class="brand" href="#">Flaskpad/a> 
```

也许这导致浏览器将页面显示为空白？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:43:28.663

你没有错过`<head>`layout.html 中的开始标签吗？我在任何地方都看不到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T03:50:06.873

我放弃了它，我无法让它工作。我创建了一个新目录，将文本复制并粘贴到新文件中，然后运行它并成功运行。

我不知道为什么这在这种情况下不起作用。

# iphone - SBJson 不会深入 NSDictionary

> ID：12207813
> 
> 赞同：1
> 
> 时间：2012-08-31T01:29:37.207
> 
> 标签：iphone, xcode, json, nsdictionary, sbjson

因为这个，我整天都在用头撞墙。

我正在尝试在[这里](http://api.tumblr.com/v2/blog/suiz.tumblr.com/posts?api_key=VLkwpNTnRVSqquwvmRFtHVKHFE8IUad8ImPXx87JKfWyID9ASb)解析这个 JSON blob 。

这就是我正在使用的：

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSDictionary *results = [responseString JSONValue];

NSArray *allTweets = [[results objectForKey:@"response"] objectForKey:@"posts"]; 
```

但是，当我尝试这样做时：

```
NSURL *url = [NSURL URLWithString:[[[[aTweet objectForKey:@"posts"] objectForKey:@"photos"] objectForKey:@"original_size"] objectForKey:@"url"]]; 
```

它没有给我任何错误，但 *url 设置为“null”。

我已经为 NSDictionary 使用了 CFShow，但是“照片”键之后的所有内容都以常规字符串形式出现，而不是 JSON 格式。

谁能告诉我为什么？

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:00:40.903

试试这个。

```
 for (int i = 0; i < [[[results objectForKey:@"response"] objectForKey:@"posts"] count]; i++) {
        NSLog(@"url data = %@",[[[[[[[results objectForKey:@"response"]
        objectForKey:@"posts"] objectAtIndex:i] objectForKey:@"photos"]
        objectAtIndex:0] objectForKey:@"original_size"] objectForKey:@"url"]);
    } 
```

# matlab - 需要帮助回复：FFT 输出缩放

> ID：12207817
> 
> 赞同：1
> 
> 时间：2012-08-31T01:29:52.980
> 
> 标签：matlab, fft

我目前正在研究以下书籍：Vidi Saptari 的《傅里叶变换光谱仪器工程》。我的问题与下面的代码有关，基于书中附录 C 中的代码。下面的代码分别计算波数 [cm-1] 5000、10000 和 15000 的 3 个波的干涉图，然后执行 FFT 到检索信息。未缩放的输出的大小为 1600，而不是 1。

```
clear;
% Sampling clock signal generation
samp_period_nm = 632.8 / 4; % sampling period in nm. 632.8 is the HeNe laser's wavelength
samp_period = 1 * samp_period_nm * 10^-7; % sampling period in cm. 
scan_dist   = 0.1; % mirror scan distance in cm. 
no_elements = floor(scan_dist/samp_period);
x_samp = 0:samp_period:samp_period*no_elements; %Vector of clock signals in cm
xn_samp = x_samp .* (1 + rand(1, length(x_samp)));
v1 = 5000;
v2 = 10000;
v3 = 15000;
arg  = 4 * pi * x_samp;
y   = cos(arg*v1) + cos(arg*v2) + cos(arg*v3) ;
total_data = 2^18;
no_zero_fills=[total_data - length(y)];
zero_fills=zeros(1, no_zero_fills);
%triangular apodization
n_y = length(y);
points = 1:1:n_y;
tri = 1 - 1/(n_y) * points(1:n_y);
y = y.*tri; %dot product of interferogram with triangular apodization function
y = [y zero_fills];   %zero filling
% FFT operation
fft_y = fft(y);
% fft_y = fft_y / n_y;
% fft_y = fft_y * samp_period;
fft_y(1) = [];
n_fft=length(fft_y);
spec_y = abs(fft_y(1:n_fft/2)); %spectrum generation
nyquist = 1 / (samp_period * 4);
freq = (1:n_fft/2)/(n_fft/2)*nyquist; %frequency scale generation
figure();
plot(freq, spec_y);   % plot of spectrum vs wave number
xlabel('Wavenumber [cm-1]');
ylabel('Intesity [V]'); 
```

通过将 fft (fft_y) 的结果与 dt = samp_period 相乘，如此处所建议[的](http://www.mathworks.com/matlabcentral/answers/15770-scaling-the-fft-and-the-ifft "这里")，峰值为 0.025。

按照[相同链接的](http://www.mathworks.com/matlabcentral/answers/15770-scaling-the-fft-and-the-ifft "这里")第二个解决方案，通过将 fft_y 除以 n_y（y 的长度），幅度为 0.25。

显然，我做错了什么。任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:55:54.303

您在这里做错的唯一一件事是期望频谱中的峰值为 1。根据 Parseval 的 DFT 定理，时域信号的能量等于频域信号的能量除以序列的长度N. 你可以在你的例子中检查这个：

```
td_energy = sum( abs(y).^2 )
fd_energy = sum( abs(fft_y).^2 )
td_energy - fd_energy / length(y) % won't be exactly zero because you deleted the zero frequency bin. 
```

因此，频谱中的峰值不代表时域中余弦波的*幅度，而是它们的**能量*。另外请注意，当您填充了很多零时，能量低于您的预期。

在实践中，某个频率的平均功率往往更受关注。考虑以下代码示例

```
t = linspace(-4*pi, 4*pi, 2^16);
N = length(t); % DFT length
y = cos(t); % single cosine wave
y_pow = sum( abs(y).^2 ) / N; % is 0.5
fft_y = fft(y);
fft_y_pow = (sum( abs(fft_y).^2 ) / N) /N; % is 0.5
figure; plot(abs(fft_y)./N); 
```

功率是通过序列 N 的长度对能量进行平均来获得的。如果将频谱除以 N，您将获得每个频率的平均功率。在上面的示例中，您识别出高度为 0.5 的单个峰值，它代表幅度为 1 的单个 cos 波（因此功率为 0.5）。

就个人而言，我更喜欢将 MATLAB 的 FFT 输出`1/sqrt(N)`缩放`sqrt(N)`. 这样，时域和频域序列的能量总是相等的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T21:49:52.383

如果您希望 IFFT 输入和输出中的能量相同，则必须将 IFFT 输出（时间信号）乘以 sqrt(N)，其中 N 是变换的大小。

这是代码：

FFT 也是一样的（输出除以 sqrt(N)）；希望它可以帮助菲利克斯

```
N = 4096;
Freq = randn(N,1)+1j*randn(N,1);
Time = sqrt(N)*ifft(Freq,N);
FreqEn = sum(real(Freq).^2 + imag(Freq).^2); 
TimeEn = sum(real(Time).^2 + imag(Time).^2); 
```

时间/频率

# javascript - 希望表格要求一个单元格在提交之前等于其他单元格

> ID：12207818
> 
> 赞同：0
> 
> 时间：2012-08-31T01:29:53.370
> 
> 标签：javascript, html, forms, required-field

我根本不懂 JavaScript。我使用 Jotform 创建了一个基于 Web 的表单，并附有一大堆条件，因为我不知道如何做到这一点。将其中的很多内容更改为 php，以便我可以访问我的数据库。反正。这是一张员工考勤卡表格。我们有一些需要总时间的字段。第一个字段是总工作时间。然后进入job1、job2、job3和job4。在 job1 中，它表示该工作的总小时数，job2 总小时数，job 3 等。我正在寻找一个脚本，如果 job1、2、3、4 和 5 不等于其原始输入的小时数，则显示错误。

```
Total Hours Worked = 8
Job1 Hours =3
Job2 Hours =5
JOb3 Hours =1
DISPLAY ERROR

Total Hours Worked = 8
Job1 Hours =1
Job2 Hours =4
Job3 Hours =2
Job4 Hours =1
ALLOW FORM TO SUBMIT 
```

是不是很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:45:31.480

我懒洋洋地硬编码了工作的数量，但这就是你想要的。

```
<script type="text/javascript">
function checkHours() {
totalHours = Number(form.total.value);
realTotal = 0;
for (x = 1; x <= 4 /* hard-coded job count */; x++)
    realTotal += Number(eval("form.job" + x + ".value"));
if (totalHours != realTotal) {
        alert("Total hours does not match cumulative job hours");
        return false;    
}
}
</script>
<form name="form" method="post" onsubmit="return checkHours()">
<table>
<tr>
    <td>Total Hours</td><td><input type="text" name="total"/></td>
</tr>     
<tr>
    <td>Job 1</td><td><input type="text" name="job1"/></td>
</tr>   
<tr>
    <td>Job 2</td><td><input type="text" name="job2"/></td>
</tr> 
 <tr>
    <td>Job 3</td><td><input type="text" name="job3"/></td>
</tr> 
<tr>
    <td>Job 4</td><td><input type="text" name="job4"/></td>
</tr>     
</table>
<input type="submit" value="Submit">
</form> 
```

If this is in case of mistakes: my solution will suffice. If it's because of highly untrustworthy employees that would intentionally attempt to fake hours: Bubbles is right and you should check it with php as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:28:37.063

从理论上讲，这可以在 javascript 中完成，但会有点尴尬（而且可能更成问题，它会非常不安全 - 用户可以轻松克服您放置的任何 javascript 块，并且无效的表单可以进入数据库）。所以，如果我是你，我会考虑纯粹在 php 中实现要求；有一些方法可以返回带有提交值的表单，并在输入无效时显示错误消息。

但是，一旦您的服务器端验证工作正常，您仍然可能需要一些 javascript 来提醒用户，如果他们将要提交的表单将被发现无效。要做到这一点，它会变得有点复杂——它可能需要一些 jQuery。您要做的事情的要点是观察每个输入字段的更改（最有可能使用[change](http://api.jquery.com/change/)），此时我将从每个输入中收集数据并查看它们是否都匹配。如果没有，您可以显示一条警告消息，表明该表单将无法工作。如果您是 jQuery 新手，这将需要一些工作，但肯定可以完成。

# php - Linux shutdown -r 消息重定向到 php 脚本？

> ID：12207821
> 
> 赞同：0
> 
> 时间：2012-08-31T01:30:12.270
> 
> 标签：php, linux, event-handling, shutdown, restart

我正在尝试设置一个系统，如果 Linux 服务器停机重新启动，PHP 将自动显示警告消息，例如......“服务器在 X 分钟内停机以重新启动”。我在安排重启后注意到，当我连接到 shell 时，Linux 偶尔会警告我关闭。我可能在 shell 中工作，并出现一条消息，说“系统在 200 分钟内停机以重新启动”。基本上我的问题是，如何将该消息重定向到使用事件驱动框架（例如 prggmr 等待接收该信息）的 php 脚本？

这就是我想这样做的方式。如果有人对这个问题有更好的解决方案，请告诉我。

# iphone - AVAudioPlayerDelegate 方法似乎不起作用

> ID：12207825
> 
> 赞同：1
> 
> 时间：2012-08-31T01:30:55.053
> 
> 标签：iphone, avaudioplayer, delegation, xcode4.4

我只是在音频文件播放完毕后尝试做一些事情，但它似乎不起作用。

在我的 .h 文件中，我有这个：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>

@interface soundViewController : UIViewController
<AVAudioPlayerDelegate>
{
    //various outlets
}
@property (strong, nonatomic) AVAudioPlayer *audioPlayer;

@end 
```

在 .m 文件中我有：

```
#import "soundViewController.h"
@interface soundViewController ()
@end

@implementation soundViewController
@synthesize audioPlayer; 
```

方法是：

```
- (void) playWord{
    Word *currentWord = [[Word alloc]init];
    currentWord = [testWords objectAtIndex:wordNum-1];
    NSString *item = [currentWord word];
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@.mp3", [[NSBundle mainBundle] resourcePath], item]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = 0;
if (audioPlayer == nil){
    NSLog(@"error in audioPlayer");
    }
else{
    [audioPlayer play];
        NSLog(@"Playing word");
    }
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag{
    if (flag==YES){
        NSLog(@"Finished!");
    }
} 
```

所以......这一切都很顺利（除了声音文件如果以大写字母开头将无法工作），但为什么当声音结束时我没有看到日志消息“完成”？

谢谢你的帮助，莫腾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:28:05.423

您实际上需要在实例化播放器后设置它的委托，例如：

```
audioPlayer.delegate = self; 
```

希望这可以帮助！

# python - 为 python 应用程序存储数据

> ID：12207828
> 
> 赞同：0
> 
> 时间：2012-08-31T01:31:06.753
> 
> 标签：python, backup

我正在制作一个小程序，它将一些文件从游戏备份到某个站点，例如 Dropbox，而不是添加我想要手动备份的每一个游戏。我想制作一个小向导，可以将有关游戏文件的信息附加到某物上。

例如，假设我想备份我的世界之类的游戏。我希望向导询问诸如游戏的可执行文件、可选图标以及要备份的信息类型等信息。当程序第一次启动时，我希望它给用户一个搜索框来查找游戏，然后程序会检查它是否存在，并提供一个很好的界面，带有复选框和选择你想做的事情的事情。

我基本上是在问是否有某种用于存储信息的数据库，并且应该从单个数据库中复制该信息。但是，当有人下载​​我的程序并将他们拥有的游戏添加到列表中时，它应该从单个数据库中复制该信息。

如果我在解释事情方面很糟糕，我很抱歉：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:45:20.823

使用 sqlite3 并使用名称 [http://docs.python.org/library/sqlite3.html存储用户数据](http://docs.python.org/library/sqlite3.html)

```
 import sqlite3
 db = sqlite3.connect("settings.db")
 c = db.cursor()
 c.execute("""CREATE TABLE IF NOT EXISTS userdata (
                    user_name TEXT,
                    settings1 TEXT,
                    settings2 TEXT
                    );""")
 c.execute("INSERT INTO user_data (user_name,settings1,settings2) VALUES (?,?,?)",("bob","some_Value","some Other Value")
 db.commit()  #save it
 c.execute("SELECT * FROM userdata WHERE user_name=?",GetUserName())
 print c.fetchall() 
```

或使用泡菜[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

```
 import pickle
 try:
     with open("settings.dat") as f:
         print pickle.load(f)
 except IOError:
      print "No Settings Found"
 user_data = {"bob":{"path1":"some/path","otherVar":"56"},
              "paul":{"url":"http://docs.python.org/library/sqlite3.html"}
              }
 with open("settings.dat","wb") as f: 
       pickle.dump(f) 
```

这两个都没有经过我的测试......它们只是在我的脑海中，可能包含小错误

# android - Android记录到文件，有什么建议吗？

> ID：12207830
> 
> 赞同：2
> 
> 时间：2012-08-31T01:31:28.043
> 
> 标签：android, logging

我一直在尝试调查我在 prod 中的回合制应用程序中发生的一个常见问题。由于某种原因，在某些时候，转弯搞砸了，我一直无法弄清楚其中的原因。所以我决定创建一个日志文件并在这个问题发生时发送这个日志文件。

我不想使用 log cat，因为它需要许可。我需要使用我自己的日志文件，以便用户确信它只是我的日志语句。你建议我做什么？只需打开一个文件并将我的日志记录语句附加到它，或者是否有一个我可以使用的库可以与 android 一起使用以记录到文件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-11T12:56:22.847

我为相同的情况创建了[RemoteLogger](https://github.com/sschendel/RemoteLogger "远程记录器")库（需要对我的应用程序中的生产问题进行故障排除）。

提供附加、启动、停止、发送和删除日志文件的挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:23:13.440

Logcat 不需要任何权限。如果您想创建自己的日志，只需将日志附加到文本文件中。
我自己尝试过这种方式（需要写文件权限）：

```
public static void appendLog(String text)
{
    File logFile = new File("sdcard/log.file");
    if (!logFile.exists())
    {
        try
        {
            logFile.createNewFile();
        } catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    try
    {
        // BufferedWriter for performance, true to set append to file flag
        BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true));
        buf.append(text);
        buf.newLine();
        buf.close();
    } catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

另一个选择是[log4j for android](http://code.google.com/p/android-logging-log4j/)，它还需要 WRITE_EXTERNAL_STORAGE 权限

# android - 如何在android中为此布局设计和编写代码

> ID：12207831
> 
> 赞同：0
> 
> 时间：2012-08-31T01:31:34.507
> 
> 标签：android, android-layout, android-widget

嗨，我是 android 的新手。我需要知道如何使用 xml 设计这种类型的布局，他们在底部使用 imagebuttons 进行所有布局

什么叫底部栏或标签栏或操作栏或菜单栏。PS：我想在 android 2X 版本上进行设计。请不要说参考 developer.android 因为我没有找到满意的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:43:49.980

您可以使用[ActionbarSherlock](http://actionbarsherlock.com/)为 2.x android 版本设计操作栏。如果您想要底部的操作栏，您可以使用它支持的拆分操作栏。

# python - 如何从随机数字列表中获取最大值Python

> ID：12207833
> 
> 赞同：0
> 
> 时间：2012-08-31T01:31:44.060
> 
> 标签：python

我有这段代码，我正在尝试开始工作。我可以创建一组随机数，但我需要显示最大值。我试图不使用python内置的max命令，但是，如果我找不到解决方案，我会问一个例子。

```
import random
def randomNumbers(number):
    myList = []
    numbersToCreate = number
    while numbersToCreate > 0:
        randomNumber = int(random.random() * 100)
        myList.append(randomNumber)
        numbersToCreate = numbersToCreate -1
    return myList 
```

我尝试输入的一段代码是这样的：

```
theList = []
theList.sort()
biggest = theList [-1:][0]
print (theList) 
```

当我尝试用它运行它时，我收到一条错误消息，告诉我列表未定义。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:36:56.953

```
theList = randomNumbers(30)
biggest = max(theList)
print (biggest) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:42:10.280

这是一个解决方案。

```
def randomNumbers(number):
    theList = []        
    numbersToCreate = number
    while numbersToCreate > 0:
        randomNumber = int(random.random() * 100)
        theList.append(randomNumber)
        numbersToCreate -= 1
    return theList

outList = randomNumbers(100)
outList.sort()
print outlist[-1] # No reason to slice the list, which is what you were doing. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T01:43:02.883

你真的*应该*使用 Python 的[max()](http://docs.python.org/library/functions.html#max)函数，至少为了可读性。

如果没有，您可以随时查看 Python 开发人员如何在 Python 中实现它，因为它是开源的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T01:46:54.033

首先，如果你想要 int 作为你的列表，你可以使用`random.randint(min, max)`代替`int(random.random()*100)`. 其次，您需要调用您的函数并将返回列表传递给`theList`

```
def randomNumberList(n):
    theList = []
    for i in range(n):
        theList.append(random.randint(0,100))
    return theList

theRealList = randomNumberList(n) 
```

然后您将能够使用实际列表。

```
theRealList.sort()
theBiggest = theRealList[-1] 
```

# html - 非程序员的网站更新工具

> ID：12207838
> 
> 赞同：0
> 
> 时间：2012-08-31T01:32:22.303
> 
> 标签：html, css, dreamweaver

我和我的教授一起实施基于网络的决策支持工具。我是一名经验丰富的程序员，并且对我们使用的各种网络技术感到自在。然而，我的教授不是，他通常不得不依靠我来完成最基本的任务，比如将出版物和演示文稿添加到现有列表中。但是，他现在希望能够自己完成这些基本任务，因为我们都觉得这样会更有效率，并将核心工具的实现留给我。

他建议我们购买 Dreamweaver 来实现这一点。但是，我对 Dreamweaver 没有太多经验，因为我更喜欢使用纯 HTML、CSS 等，而 Emacs 和 Eclipse 已经很好地满足了我的这些需求。

你认为我们应该怎么做？您认为 Dreamweaver 会是一个很好的工具吗？如果没有，我们还应该看看其他东西吗？在不了解太多 HTML 的情况下，他能相处多远？你认为我应该给他上 HTML 速成课程吗？随意发表意见！

**注意：**该网站不基于任何 CMS；它完全在内部培育。我们使用 HTML、CSS、PHP 和 JavaScript。但是，我的教授很可能只处理 HTML（没有 CSS 等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:34:18.170

对于这些类型，我经常（虽然畏缩）使用 WordPress。

如果您的客户可以在 Facebook 上发帖，他们就可以在 WordPress 中编辑内容。只需关注它的更新，因为发现 WordPress 的漏洞利用的频率非常高。即使进行了这种维护，它仍然比为它们进行更新更容易。

将您的网站转换为可在 WordPress 中使用的模板应该不会太难。如果不能，您可以通过提要轻松地将 WordPress 中的内容嵌入到您的网站中，但这会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:43:38.190

如果您使用 Dreamweaver 构建站点，[Adobe Contribute](http://www.adobe.com/products/contribute.html)是一个不错的选择，它几乎是所见即所得（所见即所得），并且它旨在与 Dreamweaver 模板一起使用。

基本上，它通过将用户锁定在模板区域（应该在页面之间保持相同的区域，例如导航）来帮助防止新手将网站搞砸。

# html - 如何使“谁”后面的行在 CSS 中消失？

> ID：12207839
> 
> 赞同：4
> 
> 时间：2012-08-31T01:32:25.130
> 
> 标签：html, css

用代码最容易解释这一点：http: [//jsfiddle.net/fjZfL/37/](http://jsfiddle.net/fjZfL/37/)

我希望它像

谁 - - - - - - - -

哪里的线完全“消失”在谁的身后。

我知道我可以让 h3 有一个白色背景让它消失，但是我的网站有一个背景图像，如果它在后面再次复制它会看起来不一致。

您绝对可以更改标记，但希望不要太多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T01:38:19.837

您可以尝试添加一个伪元素 - [http://jsfiddle.net/ZZbce/](http://jsfiddle.net/ZZbce/)

```
h3:after {
    content: ''; 
    width: 150px;
    height: 1px; 
    background: black;
    display: inline-block; 
    vertical-align: middle;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:43:14.243

试试这个.. [http://jsfiddle.net/fjZfL/55/](http://jsfiddle.net/fjZfL/55/)

这将适用于所有浏览器

# node.js - Node.js：提供动态 pdf，空出来

> ID：12207840
> 
> 赞同：1
> 
> 时间：2012-08-31T01:32:26.627
> 
> 标签：node.js, pdf, download

我有一个从 API 获取 pdf 并提供该 pdf 的节点服务。

当我卷曲或直接打开 API 时，我确实看到了正确的 pdf。

但是当我从我的 Node 应用程序中提供它时，我得到一个空的 pdf。

这是我的代码中执行 pdf 渲染的部分。

```
} else if (options.type === 'pdf') {
  res.writeHead(200, {'content-type' : 'application/pdf', 'content-disposition': 'attachment; filename=invoice.pdf'});
  res.end(data.invoice); 
```

我已经 console.log'ed data.invoice 知道这是正确的东西。

typeof(data.invoice) 给出字符串；但我也尝试过 res.end(new Buffer(data.invoice)); 这也不起作用。

这是我获取数据的代码部分

```
var http_options = {
  method : options.method
, host : Config.API.host
, path : options.path
, port : Config.API.port
, headers : options.headers
};

var req = http.request(http_options, function (response) {
  var raw_response = "";

  response.on('data', function (response_data) {
    raw_response += response_data.toString();
  });

  response.on('end', function () {
    if (response.statusCode !== 200) {
      cb(raw_response);
    } else {
      cb(false, raw_response);
    }
  });
});

req.setTimeout(timeout, function () {
  req.abort();
  cb("API connection timed out");
});

req.on('error', function (error) {
  cb("API error while requesting for " + options.path + '\n' + error + '\n' + "http   options: " + JSON.stringify(http_options)
});

req.end(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:26:19.143

`toString()`当您收到 PDF 时，和连接很可能会损坏它。尝试写入`raw_response`文件（您可以使用`writeFileSync()`，因为这只是一次测试）并与使用 curl 检索到的相同 PDF 进行逐字节比较。

请注意，如果字符串转换过程损坏了它，那么在发送之前尝试将其转换回缓冲区将无济于事。您必须从头到尾将整个事情作为缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T05:09:15.537

由于您不打算在传输过程中修改或读取此数据，因此我建议仅使用[pipe](http://nodejs.org/docs/latest/api/stream.html#stream_stream_pipe_destination_options)函数将所有从`response`out 传入的数据传输到`req`. [这个问题有一个很好的样本](https://stackoverflow.com/questions/11135954/problems-piping-in-node-js)，但这里有一个摘录。

```
req.on('response', function (proxy_response) {
    proxy_response.pipe(response);
    response.writeHead(proxy_response.statusCode, proxy_response.headers);
}); 
```

请注意，没有理由将来自 Buffers 响应的块转换为其他内容，只需将它们作为未修改的缓冲区写入，然后流式传输它们（这是管道将为您做的）而不是累积它们以获得最大效率（和 node.js 流式传输时髦点）。

# java - 不了解通过 JNDI 来自 WAS 连接池的数据库连接

> ID：12207843
> 
> 赞同：0
> 
> 时间：2012-08-31T01:33:09.060
> 
> 标签：java, jakarta-ee, websphere, websphere-7, websphere-6.1

我正在开发一个小的 java 客户端程序来通过 JNDI 查找从 WAS 连接池中检索数据库连接。但是这个 java 客户端位于 WAS 范围之外。代码详情如下：

```
import java.util.*;
import javax.naming.*;
import javax.naming.directory.*;
import java.io.*;
import java.sql.*;
import javax.sql.*;

public class WASORB {

/**
 * @param args
 * @throws NamingException 
 */
public static void main(String[] args) throws Exception {

    InitialContext initialContext = getInitialContext();

    javax.sql.DataSource ds = (DataSource)initialContext.lookup("jndi/local");

    Connection cn = ds.getConnection("*****", "*****");

    if(cn != null)
        System.out.println ("Connection ok");

    String sql = "select * from ACT";
    Statement st = cn.createStatement();
    ResultSet rs = st.executeQuery(sql);

    while(rs.next()){
        System.out.println (rs.getString(2));
    }
}

public static InitialContext getInitialContext() throws NamingException {
    Hashtable env = new Hashtable();

env.put(Context.INITIAL_CONTEXT_FACTORY,"com.ibm.websphere.naming.WsnInitialContextFactory");
    env.put(Context.PROVIDER_URL,"iiop://localhost:2811"); 

    InitialContext context = new InitialContext(env);

    return context;
} 
```

}

代码工作正常并正确返回结果。但我有两个问题不明白：

1.  为什么在调用**getConnection**方法时必须提供用户名/密码？据我了解，我已经在 WAS DataSource 中配置了此身份验证凭证。当我的 java 客户端尝试获取连接时，WAS 扮演了可能的代理角色。如果是这样，为什么我需要在这里再次输入？

2.  一旦客户端代码开始运行，从我的角度来看，WAS 特定的数据库连接池中应该有一个连接。但我没有看到在连接池中创建任何连接。那么为什么会这样呢？还是我理解错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:00:24.880

想想如果任何人都可以通过引导进入 JNDI 来连接到您组织的数据库的安全后果。服务器应用程序的部署者通过将应用程序的资源引用映射到数据源的 JNDI 条目来保证部署在服务器上的应用程序的身份。由于无法对任意客户端进行此类审查，因此有必要对其进行身份验证。

至于您的连接，它不能由服务器管理，因为它不是来自服务器。您的连接实例正在您的客户端（很可能是不同的 JVM）中运行。服务器只管理在服务器中运行的应用程序的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:14:37.930

我已经在我之前对您的一个问题的回答中解释了这一点：

[如何通过 websphere ORB 调用获取数据库连接？](https://stackoverflow.com/questions/12162468/how-to-get-database-connection-through-websphere-orb-call/12177118#12177118)

# git - Dulwich：如何检测快进？

> ID：12207845
> 
> 赞同：0
> 
> 时间：2012-08-31T01:33:13.077
> 
> 标签：git, fast-forward, dulwich

正如标题所暗示的，我怎么知道远程分支是否是本地分支的祖先，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:46:02.453

浏览本地分支的祖先，看看是否遇到远程分支提示。

您可以使用 graph walker 浏览本地分支祖先（请参阅 参考资料`Repo.get_walker()`）。

# dynamics-nav - 有没有办法改变 RTC 中标签的颜色？

> ID：12207848
> 
> 赞同：2
> 
> 时间：2012-08-31T01:33:28.773
> 
> 标签：dynamics-nav

在表单中，我想在标签中设置文本的颜色。实际上，我可以使用名为“FORECOLOR”的 Label 属性将其设置为 Classic。但不幸的是，在 RTC 中不会改变颜色。在 RTC 中有什么方法可以做到这一点吗？

提前致谢， 马卡拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:04:04.450

在 RTC 中，颜色选项已减少。本质上，这是由于 Forms vs Pages 中“范式”的变化。

在 Pages 中，控件失去了 ForeColor 属性，但获得了 Style 属性。从本质上讲，这改变了 NAV 查看数据的方式（知道数据的意图是什么，而不是硬编码颜色——这允许新客户端（例如 Web 客户端）在适当的情况下以自己的方式显示它）。

样式属性可以通过以下方式设置（[MSDN](http://msdn.microsoft.com/en-us/library/dd983743.aspx)）；

*   无（无颜色）
*   强（粗体）
*   注意（红色）
*   有利（粗体+绿色）
*   不利（粗体 + 斜体 + 红色）

可以使用布尔 StyleExpr 属性打开和关闭这些“样式”。这可以是动态切换纯黑色和选定样式的变量。

如果您正在使用转换工具，表单属性 Forecolor 将被忽略并且不会转换为页面的样式属性。表单和页面中的属性是相互独立设置的。

至于其他颜色，不可能开箱即用。您可以开发一个[客户端控件加载项](http://msdn.microsoft.com/en-us/library/dd983804.aspx)来创建一个带有颜色的自定义控件，但这似乎有点矫枉过正。它必须安装在所有使用 NAV 的 PC 上。我建议只使用 Style 选项:)

# xml - 以正确的格式编写 XML 字符串？

> ID：12207850
> 
> 赞同：1
> 
> 时间：2012-08-31T01:33:57.760
> 
> 标签：xml, delphi, formatting, xml-serialization, standards

请原谅我缺乏适当的术语，因为我确信有一个术语。我正在使用原始字符串编写 XML 文本（为了便于使用，不使用任何类型的 XML 构建器/解析器）。但是，我面临一个问题，即我提供的数据中的某些字符会脱离标准化。例如，`&`符号。当一个字符串包含这个时，结束解析器就会被抛出。如何正确适应这种情况并将字符串转换为 XML 标准？

我正在将纯字符串写入字符串列表并读取其`Text`属性，如下所示。请注意子例程`A(const S: String);`，它是向 XML 文件添加一行并添加必要缩进的缩短方法。看子程序`Standardize`，这是我需要填写的。

```
uses Windows, Classes, SysUtils, DB, ADODB, ActiveX;

function TSomething.FetchXML(const SQL: String): String;
var
  L: TStringList;
  Q: TADOQuery;
  X, Y: Integer;
  function Standardize(const S: String): String;
  begin
    Result:= S; //<<<--- Need to convert string to XML standards
  end;
  procedure A(const Text: String; const Indent: Integer = 0);
  var
    I: Integer;
    S: String;
  begin
    if Indent > 0 then
      for I := 0 to Indent do
        S:= S + '  ';
    L.Append(S + Text);
  end;
begin
  Result:= '';
  L:= TStringList.Create;
  try
    Q:= TADOQuery.Create(nil);
    try
      Q.ConnectionString:= FCredentials.ConnectionString;
      Q.SQL.Text:= SQL;
      Q.Open;
      A('<?xml version="1.0" encoding="UTF-8"?>');
      A('<dataset Source="ECatAPI">');
      A('<table>');
      A('<fields>', 1);
      for X := 0 to Q.FieldCount - 1 do begin
        A('<field Name="'+Q.Fields[X].FieldName+'" '+
          'Type="'+IntToStr(Integer(Q.Fields[X].DataType))+'" '+
          'Width="'+IntToStr(Q.Fields[X].DisplayWidth)+'" />', 2);
      end;
      A('</fields>', 1);
      A('<rows>', 1);
      if not Q.IsEmpty then begin
        Q.First;
        while not Q.Eof do begin
          A('<row>', 2);
          for Y:= 0 to Q.FieldCount - 1 do begin
            A('<value Field="'+Q.Fields[Y].FieldName+'">'+
              Standardize(Q.Fields[Y].AsString)+'</value>', 3);
          end;
          A('</row>', 2);
          Q.Next;
        end;
      end;
      A('</rows>', 1);
      A('</table>');
      A('</dataset>');
      Result:= L.Text;
      Q.Close;
    finally
      Q.Free;
    end;
  finally
    L.Free;
  end;
end; 
```

**笔记**

以上是伪代码，复制修改，不相关的东西已经修改/排除了……

**更多信息**

此应用程序是一个独立的 Web 服务器，提供对数据的只读访问。我只需要编写 XML 数据，不需要读取它。即使我这样做了，我也已经有一个涵盖该部分的 XML 解析器库。我试图尽可能地保持这种轻量级，而不用不必要的对象填充内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:50:11.187

不要手动生成 XML PERIOD。

为转义复杂数据（例如 XML、HTML 或 XML 中的其他 SGML、转义的 CDATA）编写正确的代码是不值得的。

你所做的逃避[只是一个开始](http://wiert.me/2012/07/26/xml-and-html-escapes/)。等到有人在您的数据中放入不兼容的内容。

无论如何，许多数据库都支持从查询创建格式良好的 XML（请参阅其他答案），这是您应该研究的方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:00:30.723

另一个提示：也许您的数据库支持将结果生成为 XML。

*   [MSSQL：用于 XML](http://msdn.microsoft.com/en-us/library/ms188273.aspx)
*   [甲骨文：dbms_xmlgen.getxml](http://www.dba-oracle.com/t_format_output_html_xml.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:30:35.673

感谢上面问题中的评论，我已经实现了一个函数来用适当的名称替换*预定义的实体。*这是新的子程序：

```
function EncodeXmlStr(const S: String): String;
begin
  Result:= StringReplace(S,      '&',  '&amp;',  [rfReplaceAll]);
  Result:= StringReplace(Result, '''', '&apos;', [rfReplaceAll]);
  Result:= StringReplace(Result, '"',  '&quot;', [rfReplaceAll]);
  Result:= StringReplace(Result, '<',  '&lt;',   [rfReplaceAll]);
  Result:= StringReplace(Result, '>',  '&gt;',   [rfReplaceAll]);
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T06:43:37.793

Jerry 的解决方案是一个很好的解决方案。

值得注意的是，现有的 VCL 程序可以做到这一点。

单元 IdStrings 具有 StrXHtmlEncode()。这与 Jerry 的解决方案相同。

单位 HttpApp 有 HTMLEncode()。这个函数比 Jerry 的解决方案更有效——但要注意——这个过程实际上被 unicode 字符串破坏了。它在 unicode 之前的编译器中可以正常工作，但没有为 unicode 正确升级，并且该错误从未得到修复。

HttpApp.HTMLEncode() 的 Unicode 安全版本，添加了 apos 替换，如下所示。它比 StringReplace() 风格更冗长，但在运行时性能方面效率更高。（apos 是 XML 和 XHTHML 的预定义实体，但不是 HTML 4）。

```
function XHTMLEncode( const sRawValue: string): string;
var
  Sp, Rp: PChar;
begin
  SetLength( result, Length( sRawValue) * 10);
  Sp := PChar( sRawValue);
  Rp := PChar( result);
  while Sp^ <> #0 do
  begin
    case Sp^ of
      '&': begin
             FormatBuf( Rp^, 10, '&amp;', 10, []);
             Inc(Rp,4);
           end;
      '<',
      '>': begin
             if Sp^ = '<' then
               FormatBuf(Rp^, 8, '&lt;', 8, [])
             else
               FormatBuf(Rp^, 8, '&gt;', 8, []);
             Inc(Rp,3);
           end;
      '"': begin
             FormatBuf(Rp^, 12, '&quot;', 12, []);
             Inc(Rp,5);
           end;
      '''': begin
             FormatBuf(Rp^, 12, '&apos;', 12, []);
             Inc(Rp,5);
           end;
    else
      Rp^ := Sp^
    end;
    Inc(Rp);
    Inc(Sp);
  end;
  SetLength( result, Rp - PChar( result))
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T08:28:59.843

由于将 FormatBuf 移动到 ansistring，Sean B. Durkin 的答案现在已被弃用。此外，他的实现不会在所有平台上都有效。因此，我使用 stringbuilder 编写了一个更好的解决方案。

```
function HTMLEncodeStr(const aStr: String): string;
var
  c: Char;
  sb: TStringbuilder;
begin
  sb := TStringbuilder.Create;
  try
    for c in aStr do
    begin
      if      (c = '<')  then sb.Append('&lt;')
      else if (c = '>')  then sb.Append('&gt;')
      else if (c = '&')  then sb.Append('&amp;')
      else if (c = '"')  then sb.Append('&quot;')
      else if (c = '''') then sb.Append('&apos;')
      else sb.Append(c);
    end;
    result := sb.ToString;
  finally
    sb.Free;
  end;
end; 
```

# jquery - jquery从记录中滑出

> ID：12207856
> 
> 赞同：0
> 
> 时间：2012-08-31T01:36:46.813
> 
> 标签：jquery, jquery-ui, slider

我正在寻找一些关于我不确定我是否能做到的想法的建议......

我正在从数据库中加载记录并将它们列在单个 div 中，并将数据库中的 id 号添加到 div 中，div 大约 100px 宽并且在屏幕上..

我想知道我是否可以通过 jquery 使用某种插件，这样如果我单击记录，一个选项卡将从右侧滑出，其中包含数据库中该单独记录的更多数据.. 然后我可以关闭它并它会后退，所以我只能再次看到记录..

我已经看了一下包含所有演示的 jquery ui 页面，但我并没有真正找到任何东西......

任何帮助或指示都会很棒..即使您知道类似的事情，我也很乐意研究它...

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:06:50.903

当然，让我给你看一个简单的例子。这很容易

```
<table>
    <tr class="recordrow" id="row-1"> <!-- row-X will be the unique way to identify the row -->
       <td>...</td> <!-- The record field -->
       <td>...</td>
       ....
    </tr>
</table>

<!-- Now we create the details Div, but as reference to the `row-X` -->
<div class="details" id="details-1">
   ... More details of the records
</div> 
```

然后像这样一个简单的*jQuery*片段将完成工作：

```
$(".recordrow").click(function() {
    var divid = "details-" + $(this).attr('id').split("-")[1]; //Create the id of the div
    $("#"+divid).show().animate({ "left": '200px'}); //Bring the div from right to left with 200px padding from the screen
}); 
```

### [演示](http://jsfiddle.net/rUcjG/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:10:09.007

好的，这是我的[小提琴](http://jsfiddle.net/dUm2j/2/)

**HTML**（标准容器等）

```
<div id="container">
    <div id="buttons-container"></div>
    <div id="record">
        <div id="record-content"></div>            
        <a href="#" id="bt-close" onclick="closeRecord(); return false;">Close</a></div>
</div> 
```

**CSS**

```
a.bt-record {
    display:block;
    width:100px;
    height:100px;
    background:#999999;
    color:#000;
    line-height:100px;
    text-align:center;
    float:left;
    margin:0 10px 10px 0;
    text-decoration:none;
}

a { color:#fff; }

#container {
    width:100%;
    height:100%;
    overflow:hidden;
    position:relative;
}

#record {
    position:absolute;
    right:-240px;
    top:100px;
    width:200px;
    height:200px;
    background:#000;
    padding:20px;
    color:#fff;
    z-index:1;
} 
```

**Javascript**

```
//your data in a array of objects (could be something else)
var data = {
    1 : {name:'Record 1', text:'This is the text 1', options:'Anything 1'},
    2 : {name:'Record 2', text:'This is the text 2', options:'Anything 2'},
    3 : {name:'Record 3', text:'This is the text 3', options:'Anything 3'},
    4 : {name:'Record 4', text:'This is the text 4', options:'Anything 4'},
    5 : {name:'Record 5', text:'This is the text 5', options:'Anything 5'},
    6 : {name:'Record 6', text:'This is the text 6', options:'Anything 6'},
    7 : {name:'Record 7', text:'This is the text 7', options:'Anything 7'},
    8 : {name:'Record 8', text:'This is the text 8', options:'Anything 8'},
    9 : {name:'Record 9', text:'This is the text 9', options:'Anything 9'}
};

$(document).ready(function() {
    populateEntries();        
});

//dynamically populate the entries
function populateEntries() {
    for (entry in data){
console.log(entry);       
        $('#buttons-container').append('<a class="bt-record" href="#" onclick="showRecord(' + entry + '); return false;">' + data[entry].name + '</a>');
    }
}

//show the record
function showRecord(id) {
    //create the html
    var html = '';
    html += '<p>Name : ' + data[id].name + '</p>';
    html += '<p>Text : ' + data[id].text + '</p>';
    html += '<p>Name : ' + data[id].options + '</p>';
    $('#record-content').html(html);
    $('#record').animate({right:0}, 500);
}

function closeRecord() {
    $('#record').animate({right:-240}, 500);
} 
```

在此示例中，我动态填充记录，但如果您想要一种对 SEO 友好的方式，您可以直接在页面中创建 HTML。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:53:42.317

我会像这样为每个单独的 div 添加一个类：

```
<div id="someid" class="clickable">
    your content here
    <div class="showonclick" style="visibility:hidden"> 
        The stuff to show on click here 
    </div>
</div>

<script type="text/javascript">
$(document).ready(function(){  
    $(".clickable").each(function() {
        var ref = this;
        $(ref).click(function() {
            $(ref + " .showonclick").fadeIn('slow');
        });
    });
});
</script> 
```

基本上，这是在文档准备好后立即为每个具有指定类的 div 添加一个单击处理程序。

我希望这能够帮到你。

# ember.js - 选中 Ember.Checkbox 时如何从控制器中删除对象

> ID：12207857
> 
> 赞同：1
> 
> 时间：2012-08-31T01:36:52.143
> 
> 标签：ember.js

目前我正在使用最新的 ember.js 版本，并且正在构建一个简单的“添加用户名/删除用户名”hello world 应用程序。到目前为止，我可以添加一个用户（使用下面的控制器方法）。我在 html 中还有一个复选框，单击该复选框时应该删除用户，但是......现在我只能获取复选框的布尔值来传递。相反，我需要用户名来查找它并将其从控制器内容中删除。

如何重新执行下面的 html / view 代码，以便我可以传递实际的用户名而不是 bool 值？

先感谢您！

```
 PersonApp.ModifyPersonCheckbox = Em.Checkbox.extend({
      change: function(event) {
        PersonApp.personController.removePerson(this.$().val());                                     
      },
    });

    PersonApp.personController = Em.ArrayProxy.create({
      content: [],

      createPerson: function(username) {
        var person = PersonApp.Person.create({ username: username });
        this.pushObject(person);
      },

      removePerson: function(username) {
        person = this.content.findProperty('username', username);
        this.removeObject(person);
      }

    }); 
```

下面的基本 html 显示了我的 checkedBinding 是如何连接的

```
<ul>
  {{#each PersonApp.personController}}
    <li {{bindAttr class="isActive"}}>
      <label>                                                                              
        {{view PersonApp.ModifyPersonCheckbox checkedBinding="isActive"}}
        {{username}}
      </label> 
    </li>
  {{/each}}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:35:32.330

您需要在显示复选框的视图上设置内容，以便在触发事件时传递上下文。我相信这会奏效：

```
{{view PersonApp.ModifyPersonCheckbox contentBinding="parentView.content" checkedBinding="isActive"}} 
```

然后，更改函数中的事件变量将具有一个上下文变量，其中包含与该复选框关联的记录。然后你甚至不需要在控制器中搜索它。您也可以只绑定用户名，但这种方式更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:00:31.247

最终解决方案如下所示（注意 contentBinding="this" 添加到标记中）

```
 PersonApp.ModifyPersonCheckbox = Em.Checkbox.extend({
      content: null,
      change: function(event) {
        PersonApp.personController.removePerson(this.content);                                     
      },
    });

    PersonApp.personController = Em.ArrayProxy.create({
      content: [],

      createPerson: function(username) {
        var person = PersonApp.Person.create({ username: username });
        this.pushObject(person);
      },

      removePerson: function(person) {
        this.removeObject(person);
      }

    });

<ul>
  {{#each PersonApp.personController}}
    <li {{bindAttr class="isActive"}}>
      <label>                                                                              
        {{view PersonApp.ModifyPersonCheckbox contentBinding="this" checkedBinding="isActive"}}
        {{username}}
      </label> 
    </li>
  {{/each}}
</ul> 
```

# python - 从哪里开始使用分布式计算/并行处理？(Python/C)

> ID：12207865
> 
> 赞同：7
> 
> 时间：2012-08-31T01:38:06.803
> 
> 标签：python, c, parallel-processing, distributed-computing

我目前正在研究计算机科学研究生的主题，并且我发现了一个相对较大的兴趣领域，即分布式计算，我想获得更多信息。StackOverflow 上还有一些其他问题 [ [1](https://stackoverflow.com/questions/2818567/where-do-i-start-with-distributed-computing) , [2](https://stackoverflow.com/questions/4618397/how-can-i-create-system-for-distributed-calculations) , [3](https://stackoverflow.com/questions/1726664/distributed-system-design-using-only-c?rq=1) ] 解决了类似的问题，但不一定是我要问的问题，特别是与我正在寻找的语言有关。

我在网上搜索了很多论文、文章甚至课程，比如罗格斯大学的[这](http://code.google.com/edu/submissions/rutgers/index.html)门课程，描述了分布式计算背后的理论和机制。不幸的是，我发现的这些论文和课程中的大多数都相当有限地在代码中描述了分布式计算的实际概念。我正在寻找可以向我介绍分布式计算的编程部分的网站。（最好在 C 或 Python 中。）

作为旁注，我想提一下，这甚至可能更具体地针对并行计算如何融入分布式计算领域。（我还没有参加任何课程！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:13:09.723

Disclamer：我是 SCOOP 的开发者。

这真的取决于你的个性。如果您更喜欢在继续前进之前获得理论信息，您应该先阅读一些书籍或了解技术。涵盖该主题大部分内容的书籍清单将是：

*   *Thomas Rauber 和 Gudula Rünger (Springer-Verlag)*的多核和集群系统的并行编程。**
**   *Calvin Lin 和 Lawrence Snyder (Addison-Wesley)*的并行编程原理****   *Timothy G. Mattson 等人*的并行编程模式。*（艾迪生-韦斯利）***

 **您可能想要熟悉的基于数据的技术将是 MPI 标准（用于多台计算机）和 OpenMP（用于单台计算机），以及 Python 中内置的相当不错的多处理模块。

如果你喜欢先动手，你应该从基于任务的框架开始，它提供了一个简单和用户友好的用法。[在创建SCOOP](http://scoop.googlecode.com)时，这两个都是最大的焦点。你可以用`pip -U scoop`. 在 Windows 上，您可能希望首先使用其[可执行安装程序](https://github.com/zeromq/pyzmq/downloads)安装 PyZMQ 。您可以检查提供的示例并使用各种参数来轻松了解导致性能下降或提高的原因。我鼓励你将它与它的替代品进行比较，例如用于类似工作的[Celery](http://celeryproject.org/)或用于协程框架的[Gevent 。](http://www.gevent.org/)如果您喜欢冒险，请不要羞于测试[内置的协程功能](http://www.dabeaz.com/coroutines/)Python 并将它们插入各种网络堆栈。

使用基于任务的框架将减轻您的理论分析负担，例如负载平衡实现细节、序列化等，这些都是非常重要的，并且可能需要很长时间才能调试和开始工作。它提供了对分布式系统的所有期望级别的理解。开源软件的好处：检查代码以了解引擎盖下的机械细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:00:54.937

我在单台机器上使用 python 的内置包有很好的经验。我的朋友在一台 128 核的机器上使用 ipython 取得了巨大的成功。

现在有不同类型的分布式计算，如集群、云或互联网上的任何机器，如 fold@home（包括 PS3！）不要忘记 GPU！

一些 Python 链接：
[各种 Python 库](http://wiki.python.org/moin/ParallelProcessing)
[Ipython](http://ipython.org/)
[Python 和并行计算演示](http://fperez.org/talks/0904_parlab_scipy.pdf)**

# spotify - 有没有办法从播放列表 URL 中找到订阅者的数量？

> ID：12207868
> 
> 赞同：0
> 
> 时间：2012-08-31T01:39:21.077
> 
> 标签：spotify

我正在制作一个 Spotify 应用程序，我想显示来自用户提交的给定播放列表 URL 的订阅者数量。

我查看了他们的文档，但似乎找不到太多有用的信息。

谢谢！

编辑：我想使用 Web API，因为我不太了解 C。希望它仍然是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:44:38.033

Web API 根本不支持任何播放列表查找，所以很遗憾这是不可能的。

libSpotify 支持此功能（请参阅[sp_playlist_num_subscribers](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/group__playlist.html#ga967ad87f0db702513ecda82546f667c5)），但请注意，您需要先让用户登录他们的 Spotify 帐户，然后才能完成此操作，这可能不是您想要做的。

# perl - sysopen 示例不起作用

> ID：12207869
> 
> 赞同：4
> 
> 时间：2012-08-31T01:39:41.217
> 
> 标签：perl

我得到了这个 perl 示例，它应该演示`sysopen`and `printf`，但到目前为止它只演示了 die。

```
#! /usr/bin/perl  
$filepath = 'myhtml.html';
sysopen (HTML, $filepath, O_RDWR|O_EXCL|O_CREAT, 0755) 
    or die "$filepath cannot be opened.";
printf HTML "<html>\n"; 
```

但是当我执行代码时它只是`die`s。

```
myhtml.html cannot be opened. at file_handle.pl line 7. 
```

`myhtml.html`不存在，但它应该是由`O_CREAT`标志创建的。不应该吗？

* * *

**编辑**

我已经编辑了代码以包含关于`use strict`和的建议`$!`。下面是新代码及其结果。

```
#! /usr/bin/perl
use strict; 
$filepath = "myhtml.html";

sysopen (HTML, '$filepath', O_RDWR|O_EXCL|O_CREAT, 0755) 
    or die "$filepath cannot be opened. $!";
printf HTML "<html>\n"; 
```

输出，由于`use strict`，给了我们一大堆错误：

```
Global symbol "$filepath" requires explicit package name at file_handle.pl line 3.
Global symbol "$filepath" requires explicit package name at file_handle.pl line 5.
Bareword "O_RDWR" not allowed while "strict subs" in use at file_handle.pl line 5.
Bareword "O_EXCL" not allowed while "strict subs" in use at file_handle.pl line 5.
Bareword "O_CREAT" not allowed while "strict subs" in use at file_handle.pl line 5.
Execution of file_handle.pl aborted due to compilation errors. 
```

* * *

**编辑 2**

根据大家的建议和帮助，这里是最终的工作代码：

```
#! /usr/bin/perl
use strict;
use Fcntl;

my $filepath = "myhtml.html";

sysopen (HTML, $filepath, O_RDWR|O_EXCL|O_CREAT, 0755) 
    or die "$filepath cannot be opened. $!";
printf HTML "<html>\n"; 
.... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T01:56:41.193

`O_RWDR`, `O_EXCL`, 和`O_CREAT`都是`Fcntl`模块中定义的常量。放线

```
use Fcntl; 
```

靠近脚本顶部。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T01:47:51.867

Lots of issues here:

*   Always put `use strict;` at the top of your program. That would provide a clue.
*   The reason the `sysopen` failed is in the `$!` variable. You should generally include it in any `die` message.
*   As the `sysopen` entry in `man perlfunc` explains, the various `O_*` constants are exported by the `Fcntl` module. You need to `use` that module if you want those constants defined. As it is, you're character-wise or-ing together the strings `"O_RDWR"`, `"O_EXCL"`, and `"O_CREAT"`, resulting in another string that `sysopen` doesn't know what to do with. `use strict` would prevent this from happening.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T01:47:07.530

`myhtml.html`文件可能已经存在。这可能是因为脚本的先前执行创建了它。如果文件存在，该`O_EXCL`标志将导致[`sysopen`](http://perldoc.perl.org/functions/sysopen.html)失败。文档中的相关引用[`sysopen`](http://perldoc.perl.org/functions/sysopen.html)：

> 在许多系统中，该`O_EXCL`标志可用于以独占模式打开文件。这不是锁定：**排他性意味着如果文件已经存在，则`sysopen()`失败**。

# java - 如何使用ajax/jsp在另一个框架中显示一个jsp页面的动态日志

> ID：12207870
> 
> 赞同：0
> 
> 时间：2012-08-31T01:40:13.873
> 
> 标签：java, html, ajax, multithreading, jsp

我是 ajax 和 jsp 的新手。这是关于我面临的一种多线程问题。

我正在使用 ajax 在我的网页的一个框架中嵌入一个 jsp 页面，其中正在进行客户端服务器 udp 传输。我需要在此 udp 传输期间将一些日志消息显示为主页中的状态信息。

问题是，当 udp 传输很忙时，我无法使用正常代码动态更新网页 [在 jsp 中使用 out.println]。但我能够在 netbeans 调试器中动态查看输出流日志（使用 System.out.println 创建）。

（我试图在jsp中创建一个新线程，但无法在线程内使用JSPWriter->out，也不确定这是否是个好主意）

有关在主页中动态显示日志的任何线索都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:51:56.063

您只想显示一条状态消息，然后您可以使用 CSS 和 java 脚本来显示一些消息并更新最终日志。

但是，如果您需要在框架中更新确切的状态消息，那么您需要使用反向 ajax 或 pushlets。请参考 DWR ajax 框架。

谢谢

# doxygen - doxygen .dox 文件的问题

> ID：12207872
> 
> 赞同：1
> 
> 时间：2012-08-31T01:40:32.493
> 
> 标签：doxygen

我正在尝试在我下载源文件的项目的一些源文件上运行 doxygen。这些文件位于以下目录中：

*   doc/ - 文档文件，例如 .dox 文件。

*   src/ - 源文件

我在 doxygen.config 文件中的设置是：

```
INPUT                  = ../ .

FILE_PATTERNS          = *.h *.dox *.dxx 
```

当我运行 doxygen ( `doxygen doxygen.config`) 时，它会从 .h 文件中正确生成所有文档，但它不会正确生成主页。我在文件`intro.dox`夹中有一个标题`doc`为 command`\mainpage Documentation Index`和一堆文本的文件，但 doxygen 没有使用它来生成主页。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:41:12.623

这有（至少）两个可能的原因：

1.  您没有`/doc`在列表中包含该目录`INPUT`。尝试将其修改为

    ```
    INPUT = ../ . ../doc 
    ```

    你的意思是写`../doc`而不是`../`？我猜你的`doxygen.config`文件在你的`src`目录中。如果不是这种情况，您能否在问题中说明这一点。

2.  Doxygen 要求您的文档文件（您的`.dox`文件）是纯文本，并且您的文本用 Doxygen C++ 注释（即`/** ... */`）包裹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:33:10.607

在不知道位置`doxygen.config`的情况下，并且由于您在 中使用相对路径`INPUT`，因此很难确定可能导致这种情况的原因，但是由于您要查找的文件位于并行目录中，因此 doxygen 可能不会递归搜索您的文件. 您可能需要确认`RECURSIVE`设置为`YES`in `doxygen.config`。

# css - 谷歌浏览器 tbody 嵌入阴影不起作用

> ID：12207876
> 
> 赞同：0
> 
> 时间：2012-08-31T01:41:21.137
> 
> 标签：css, google-chrome, shadow

我正在尝试将嵌入阴影应用于我的表格的 thead 元素。它适用于 FireFox，但不适用于 Chrome 和 Safari。

[http://jsfiddle.net/jACGx/2/](http://jsfiddle.net/jACGx/2/)

```
tbody {
-webkit-box-shadow: 0 0px 5px rgba(180,180,180,1) inset; 
-moz-box-shadow:0 0px 5px rgba(180,180,180,1) inset;
box-shadow: 0 0px 5px rgba(180,180,180,1) inset; 
} 
```

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:49:08.157

Try applying the shadow to the td:

```
td{
-webkit-box-shadow: 0 0px 5px rgba(180,180,180,1) inset; 
-moz-box-shadow:0 0px 5px rgba(180,180,180,1) inset;
box-shadow: 0 0px 5px rgba(180,180,180,1) inset; 
} 
```

Is that effect you are looking for?

# php - 如何在 PHP 中从 .CSV 生成打印输出

> ID：12207877
> 
> 赞同：0
> 
> 时间：2012-08-31T01:41:26.870
> 
> 标签：php, csv

我正在寻找一种上传 .CSV 文件并从内容中生成打印输出的方法

它正在为我创建的网站的用户生成密码表。

我希望它做这样的事情

名称：乔博客

用户名：j.blogs

电子邮件：Emailaddress@noware.com

密码：密码

所以“姓名、用户名、电子邮件和密码”是 csv 中的标题，其他是数据

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:35:08.580

我更喜欢 str_getcsv ..

```
$lines= file("file_name.csv");
$headers=array_shift($lines);
$header=str_getcsv($headers,',','"');
foreach ($lines as $l){
    $fields=str_getcsv($l,',','"');
    foreach ($fields as $i=>$f){
        echo $header[$i] . ": ". $f;
    }
} 
```

那应该是一个开始。

# php - 检查 php 意外错误中的图像 mime 类型

> ID：12207884
> 
> 赞同：0
> 
> 时间：2012-08-31T01:42:15.067
> 
> 标签：php, image

我试图确定图像的 mime 类型：

```
$image = $_FILES['image'];  //code shortened
function determineImage($imageResource){

    $errors = array();

    $types = array('gif' => IMAGETYPE_GIF,
                   'jpeg' => IMAGETYPE_JPEG,
                   'png' => IMAGETYPE_PNG,
                   'bmp' => IMAGETYPE_BMP);

    if ( !in_array(exif_imagetype($imageResource['tmp_name']), $types )) {
        $errors[] =  'Cannot determine mime type';
    }

    if ($imageResource['type'] !== 'image/gif'   ||
        $imageResource['type'] !== 'image/jpeg'  || 
        $imageResource['type'] !== 'image/pjpeg' ||
        $imageResource['type'] !== 'image/png'){
            $errors[] = 'Again cannot determine type';
    }

    return $errors;

} 
```

我用

```
 var_dump(determineImage($image)); 
```

这不断返回数组（1）{[0]=>字符串（27）“再次无法确定类型”}

然而这：

```
echo $image['type']; 
```

只是返回：

```
image/png 
```

我还打开了 error_reporting(E_ALL) 。谁能弄清楚问题是什么，我犯了一个愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:50:17.733

代码是完全随机的（检查根本没有意义）

顺便一提

```
if ($imageResource['type'] !== 'image/gif'   AND
    $imageResource['type'] !== 'image/jpeg'  AND
    $imageResource['type'] !== 'image/pjpeg' AND
    $imageResource['type'] !== 'image/jpg'  ... 
```

不是 OR

# c++ - 重新定义“新”运算符的目的是什么？

> ID：12207885
> 
> 赞同：3
> 
> 时间：2012-08-31T01:42:31.807
> 
> 标签：c++, macros, new-operator

我一直想知道它重新定义`new`. 我的意思是当开发人员使用：

```
#pragma push(macro,new)
#undef new 
```

这是为了什么目的？我认为 new 运算符是所有编译器的标准？重新定义 new 是否为开发人员提供了一种方法来改变 new 为对象分配空间的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:48:07.010

您可能会认为它可以记录 C++ 程序中发生的任何分配。所以你需要定义你自己的新操作来记录这个分配。您还需要重新定义删除以记录在 C++ 中进行的所有取消分配。

一些工具重新定义它并为内存块的开始和结束分配更多内存，并在头部和尾部中找出某些签名，以找出代码中的任何缓冲区溢出问题。您可以检查这样做的 MS 应用程序验证程序。

# python - 使用 Itertools 循环的困难

> ID：12207892
> 
> 赞同：5
> 
> 时间：2012-08-31T01:43:46.993
> 
> 标签：python, list, itertools, turtle-graphics

目前我已经定义了许多使用然后`Turtle`的`begin_poly`形状。我希望能够将所有这些值放入一个列表中，然后按一下按钮，循环浏览列表，从而改变形状。我很难实现这一点，并且想知道如何实现这一点的一些帮助。`end_poly``register_shape``Turtle``Itertools`

编辑：最后我得到了它，我将所有值附加到一个列表中，然后使用一个计数器来选择要转到哪个索引。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-31T01:46:18.763

首先，创建生成器：

```
>>> import itertools
>>> shape_list = ["square", "triangle", "circle", "pentagon", "star", "octagon"]
>>> g = itertools.cycle(shape_list) 
```

然后`next()`在你想要另一个时打电话。

```
>>> next(g)
'square'
>>> next(g)
'triangle'
>>> next(g)
'circle'
>>> next(g)
'pentagon'
>>> next(g)
'star'
>>> next(g)
'octagon'
>>> next(g)
'square'
>>> next(g)
'triangle' 
```

这是一个简单的程序：

```
import itertools
shape_list = ["square", "triangle", "circle", "pentagon", "star", "octagon"]
g = itertools.cycle(shape_list)
for i in xrange(8):
    shape = next(g)
    print "Drawing",shape 
```

输出：

```
Drawing square
Drawing triangle
Drawing circle
Drawing pentagon
Drawing star
Drawing octagon
Drawing square
Drawing triangle 
```

# javascript - 在几个元素上模仿 onclick 事件

> ID：12207894
> 
> 赞同：-1
> 
> 时间：2012-08-31T01:43:56.160
> 
> 标签：javascript, jquery, javascript-events, event-handling

我需要解决一个模拟用户现场操作的小问题：选择某个标签，然后模仿按下“OK”按钮。有几行带有标签，所以我决定在 jQuery 的 for 循环中进行。但是此代码仅在第一次迭代中有效（但效果很好 - 数字发生变化，然后 alert('gooood-good') 显示）。

有趣的是，循环继续，并且 vars 'option' 和 'select' 按应有的方式分配，甚至第二个按钮的 alert() 也显示，表明事件 onclick 有效，但第二行中的标签保持为零，并且没有模拟实际上是 onclick 事件。这段代码似乎拒绝在循环的所有循环中工作，但第一个。

最终目标 - 不需要模拟用户并完全在 javascript 上解决。我在循环中有一个动态变化的参数，我认为 Selenium IDE 可能是我的答案，但我需要它使用一些逻辑并在循环中更改参数。

这里有两个列表： script 和 html 应该执行脚本的地方。

```
<table>
  <tr>
    <td id="c10">
      <select name="c0">
        <option value="0" selected>0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
      </select>
    </td>
    <td id="c11">
      <select name="c1">
        <option value="0" selected>0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
      </select>
    </td>
    <td id="c12">
      <input value="OK" type="button" onclick="alert('gooood-goood')" />
    </td>
  </tr>
  <tr>
    <td id="c20">
      <select name="c0">
        <option value="0" selected>0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
      </select>
    </td>
    <td id="c21">
      <select name="c1">
        <option value="0" selected>0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</optiaon>
        <option value="8">8</option>
        <option value="9">9</option>
      </select>
    </td>
    <td id="c22">
      <input value="OK" type="button" onclick="alert('gooood-goood')" />
    </td>
  </tr>
</table> 
```

然后编写脚本

```
function foo() {
  alert('inside');

  var comb = rand(10, 99) + '', row = 1, col = 0;

  for (; row <= 2; row++) {
    for (; col <= 1; col++) {
      var select = '#c' + row + col + ' select[name=c' + col + ']';
      var option = "#c" + row + col + " select option[value=" + comb[col] + "]";

      $(select).change(function () {
        $(option).prop('selected', true);
      });

      $(select).change();

      if (col == 1) {
        var i = col + 1;
        $('#c' + row + i + ' input').click();
      }
    }

    col = 0;
    comb = rand(10, 99);
  }
}

$(function () {
  document.getElementById('done').onclick = foo;
});

function rand(min, max) { // Generate a random integer
  if (max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  } else {
    return Math.floor(Math.random() * (min + 1));
  }
} 
```

**更新**

我不知道我做了什么，但它现在正在工作。相同的代码：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:34:39.363

好吧，我才意识到。`comb = rand(10, 99);`第一次迭代后变成不是字符串。

只需要修复它`comb = rand(10, 99) + '';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:55:12.787

在您的代码中：

```
>  var option = "#c"+ row + col + " select option[value=" + comb[col] + "]";
> 
>  $(select).change(function(){
> 
>    $(option).prop('selected', true);
>  }); 
```

change 函数中的变量*选项*对外部*选项*变量有一个闭包，因此该值将是循环结束时的任何*选项*，即（`comb[col]`设置为`6`）：

```
 "#c21 select option[value=6]"; 
```

顺便说一句，在不允许按索引访问字符串字符的浏览器中，您从*梳子中选择数字的方式将失败（至少某些版本的 IE），这意味着**rand*函数也可能只返回一个从 0 到 9 的数字包括的。

您可以使用以下方法解决第一个问题：

```
comb.substring(1,2) 
```

或者

```
 comb.charAt(1) 
```

这使您正在做的事情更加明显。

您是否考虑过只获取表单控件并对其进行迭代，而与表结构无关？这会简单得多。

# android - Android Listview 仅在获得焦点时才显示该项目

> ID：12207899
> 
> 赞同：0
> 
> 时间：2012-08-31T01:44:46.283
> 
> 标签：android, android-widget, android-listview

当按钮事件发生时，我正在尝试从字符串数组显示列表视图。这就是我的做法

btnSearch.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
        list_view.setAdapter(new ArrayAdapter<String>
            (MyActivity.this,
            android.R.layout.simple_list_item_1, String_array));

                  }
        }); 
```

现在，在单击按钮时，它会显示一个空白列表视图。如果我专注于列表视图，那么项目加载，当不聚焦时会消失。知道我哪里出错了吗？

我为按钮和列表视图设置的布局：

```
 <Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout1"
    android:layout_marginLeft="101dp"
    android:layout_marginTop="17dp"
    android:text="Search" />

   <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="15dp"
    android:orientation="vertical" >

     <ListView android:id="@+id/ListView01"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" >
     </ListView>
     </LinearLayout> 
```

# php - 在 symfony2 中完全安装供应商的所有文件的大小应该是多少

> ID：12207904
> 
> 赞同：0
> 
> 时间：2012-08-31T01:45:11.633
> 
> 标签：php, symfony

我真的很困惑，与所有应用程序和代码的最新开发版本的 symfony 的大小应该是多少。

我有两个安装，一个大约 150MB，另一个大约 500MB。

我真的无法找到为什么有任何差异。

两个站点都运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:20:34.703

如果您`assets:install`不使用`--symlink`标志，大小可能会有所不同。

但是对于项目部署，应该使用副本而不是符号链接。因此，您的项目的总大小实际上取决于您在 Bundle 中拥有的资产（图像、视频等）的数量。

# r - 与整数函数中的多个参数对应的多个数组的所有可能组合

> ID：12207905
> 
> 赞同：3
> 
> 时间：2012-08-31T01:45:32.980
> 
> 标签：r, for-loop, data.table, apply

我稍微修改了这个问题。

```
 integg <- function(t,a,b,con,s){   
  u <- ifelse(t - a < 0 ,0, t - a) 
  l <- ifelse(t - (a+b) < 0,0, t - (a+b))  
  s * integrate(Vectorize(function(foo,x){x}),lower=l,upper=u,x=con)      
} 
```

这个方程会给我一个整数值，我有 3 个数组：As、Bs 和 Ss，它们代表参数“a”、“b”和“s”。

假设数组如下：

```
As <- seq(from=50,to=60,by=0.01)
Bs <- seq(from=130,to=140,by=0.01)
Ss <- seq(from=0.0001,to=0.01,by=0.0001)
# con is a constant
con <- 55
# I have 7 values for t and I want to do one at a time, 
# so for this example I have t=360
t <- 360
# although I'll want to do also for my other values c(0,20,40,60,120,240) 
```

我的最终目标是测试这些数组 As、Bs 和 Ss 的每一个组合。我一直在尝试使用外部，但之后循环失败。

```
# first make one array w/ all possible combinations
all_poss <- outer(As,Bs,paste)
# now include the third array
all_poss <- outer(all_poss,Ss,paste)

head(all_poss)
> [1] "50 130 1e-04"    "50.01 130 1e-04" "50.02 130 1e-04" 
  [4] "50.03 130 1e-04" "50.04 130 1e-04" "50.05 130 1e-04"

    ### I would have to change my integg function a little bit, to deal w/ the pasted items
      integg2 <- function(t,con,all){  
    a <- strsplit(h,split=' ')[[1]][1]
    b <- strsplit(h,split=' ')[[1]][2]
    s <- strsplit(h,split=' ')[[1]][3]   

    u <- ifelse(t - a < 0 ,0, t - a) 
    l <- ifelse(t - (a+b) < 0,0, t - (a+b))  
    s * integrate(Vectorize(function(foo,x){x}),lower=l,upper=u,x=con)   
}

     ### I would then need to loop integg2() somehow through my list of all possibilities

      all_vals <- sapply(all_poss,integg2)
      # I haven't gotten this to work, but i'm not sure this is 
      # even an efficient way to do what I want 
```

最后我需要某种循环，如果有人对如何组合这些数组的所有可能性以及更有效的循环方式有任何更好的想法，请告诉我。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:24:06.320

该函数`expand.grid`将创建一个数据框，其中包含您输入的向量/因子的所有组合。另一种方法是使用带有 `data.table 的连接。

`integrate`返回一个列表；您可能需要使用`$value`.

我还根据个人喜好更改了变量名称（而且我不喜欢名称与内置函数如 重叠`t`）。

```
av <- seq(from=50,to=60,by=0.01)
bv <- seq(from=130,to=140,by=0.01)
sv <- seq(from=0.0001,to=0.01,by=0.0001)
tv <- c(seq(from=0,to=60,by=20),seq(from=120,to=360,by=120))
con <- 55

##method 1: using built-in functions (warning: can be slower and memory-intensive)
cmb <- expand.grid(list(av=av,bv=bv,sv=sv,tv=tv))
cmb <- within(cmb,{
    u <- ifelse(tv - av < 0 ,0, tv - av)
    l <- ifelse(tv - (av+bv) < 0,0, tv - (av+bv))
    value <- sv * mapply(function(...){integrate(...)$value},
        lower=l,upper=u,
        MoreArgs=list(f=Vectorize(function(x,constant){constant}),constant=con))
})

##method 2: using package data.table (for speed and efficient memory use)
dt.av <- data.table(av,k=1,key="k")
dt.bv <- data.table(bv,k=1,key="k")
dt.sv <- data.table(sv,k=1,key="k")
dt.tv <- data.table(tv,k=1,key="k")
cmb <- dt.av[dt.bv[dt.sv[dt.tv]]] #joins together
cmb[,u := ifelse(tv - av < 0 ,0, tv - av)]
cmb[,l := ifelse(tv - (av+bv) < 0,0, tv - (av+bv))]
cmb[,value:=mapply(function(...){integrate(...)$value},
    lower=l,upper=u,
    MoreArgs=list(f=Vectorize(function(x,constant){constant}),constant=con)
)] 
```

# drupal - 超级鱼菜单不会关闭

> ID：12207906
> 
> 赞同：1
> 
> 时间：2012-08-31T01:45:48.170
> 
> 标签：drupal

我在 Drupal 7 中使用 Omega 主题，并在我的一个区域中添加了一个 SuperFish 菜单块。菜单有 5 个不同的链接，我在 SuperFish 部分中将其设置为垂直，但菜单在页面上保持打开状态（无论浏览器如何）。

所有链接都按应有的方式运行，但是当页面加载并始终保持打开状态时菜单不会关闭。我所有的 JS 路径都是正确的！

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T01:24:30.710

我的猜测是您的某些 CSS 覆盖了隐藏超级鱼菜单的显示或可见性属性。

# opengl - SVO 渲染：OpenGL 还是自定义渲染器？

> ID：12207919
> 
> 赞同：1
> 
> 时间：2012-08-31T01:47:20.743
> 
> 标签：opengl, cuda, opencl, render, voxel

我正计划创建一个 Sparce Voxel Octree (SVO) 引擎，并且在使用 openGL 渲染每个小立方体或在汇编和 c 中编写我自己的渲染器之间陷入困境。如果我要做后者，我不确定如何在屏幕上绘制像素（我在 Mac 上，10.8）。什么图形上下文/窗口系统将是首选的方法（不是 X，我在我的 Mac 上遇到了 X 的问题）。

PS 引擎需要能够绘制至少 50.000 个立方体（我将使用 opencl/cuda 来帮助并行处理立方体）。我只是想知道通过专门设计的渲染器进行绘制是否更有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-16T11:59:26.547

**API**

OpenGL 是（在一定程度上）最便携的渲染 API，你至少有机会跟上当前的图形硬件功能，尽管这也经常会造成相当大的挫败感。如果您为 PC 编写代码，您可以使用 DirectX10/11，它提供或多或少相同的功能。DirectX 的驱动程序开销要少一些，而 OpenGL 是一个状态机，对程序员隐藏了很多东西。我不确定你是如何看待在汇编器中做同样的事情的，除非你所说的“asm”是指编写 glsl 或 hlsl 着色器:)

**Svo**

我编写了一个 OpenGL SVO 可视化器，目前在 GTX780 上以 30 fps 渲染 62.000 个体素立方体，尽管我的设置不是最佳的，即它尚未使用实例渲染或三条或四边形，或基于几何着色器的方法，您只发送在盒子的中心坐标中并完全在着色器中生成视觉效果。OpenGL 确实提供了一整套优化渲染的方法，并且它是硬件加速的。

**互操作**

openGL 和 openCL 之间的互操作是微不足道的，而且 CUDA 也很好地与 openGL 缓冲区集成。我让这两种设置都在同一个代码库中工作。第三种选择是使用计算着色器（opengl 4.3+），所以你甚至不需要 openCL 或 CUDA 来处理你的立方体。

您是否打算通过 svo 发送光线，或者只是将轮廓背面剔除，或者做一些额外的事情？

# javascript - Submitting Multiple Forms with one Javascript function works in FF and no other browser

> ID：12207925
> 
> 赞同：0
> 
> 时间：2012-08-31T01:47:59.663
> 
> 标签：javascript, html, webforms

Here is the code I borrowed from other posts, but it only works in FF and not in Chrome, Opera, Safari, nor IE:

```
//Collect all forms in document to one and post it 

function submitAllDocumentForms() {

    var arrDocForms = document.getElementsByTagName('form');
    var formCollector = document.createElement("form");

    with(formCollector){
        method = "post";
        action = "saveSession.php";
        name = "formCollector";
        id = "formCollector";
    }
    for(var ix=0;ix<arrDocForms.length;ix++) {
        appendFormVals2Form(arrDocForms[ix], formCollector);
    }
    document.body.appendChild(formCollector);
    formCollector.submit();

}

// Function: add all elements from ``frmCollectFrom´´ 
// and append them to ``frmCollector´´ before returning ``frmCollector´´

function appendFormVals2Form(frmCollectFrom, frmCollector) {

    var frm = frmCollectFrom.elements; 
    var nElems = frm.length;
    for(var ix = nElems - 1; ix >= 0 ; ix--)
        frmCollector.appendChild(frm[ix]);
        return frmCollector;
} 
```

I think must have multiple forms on the same page for summing up input values to the correct field. It would be a major rework even if possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:55:22.627

不要指望这适用于所有浏览器。一旦提交了一个表单，浏览器的“浏览上下文”（需要一个更好的词）就会致力于看到该新请求通过，除非或直到用户通过按下浏览器停止按钮取消它。

因此，一旦提交了表单，就不能（或者更确切地说：不应该）提交任何其他表单。您可以使用 FF/Gecko 的事实只是意味着他们已经实现了他们的浏览器，因此这是可能的，但各种 Web 标准的任何部分都没有规定这必须是可能的。

改写：提交表单会将 Javascript 执行上下文置于一个新状态，在这种状态下，除了 Firefox 的情况外，新的表单提交是不可能的，因为另一个当前正在进行中。

您最好的解决方案是使用 AJAX（或只是 XmlHttpRequest）异步触发各种 POST 请求。使用它并不是一项艰巨的任务 - 但我怀疑你可能做的一切都完全错误。为什么您首先需要执行此任务？

# matlab - Matlab help, reading a text file and then printing lines

> ID：12207931
> 
> 赞同：0
> 
> 时间：2012-08-31T01:48:56.287
> 
> 标签：matlab

Thanks for any help! First off, i have a text file, text.txt, saved in my matlab folder. I would like to read this file, and have the text displayed when i run the program. I also only want to display up to a certain point in the text with the word Goal.

```
fid = fopen('text.txt', 'r+');

fprintf(fid, '%s');

fclose(fid); 
```

This is my first part, without displaying up to the certain point of text. What i think i did was open up the file for reading, then print the document, then close the file. I don't get any errors or anything, but also don't see the document getting reprinted. Any ideas on how to get it printed would help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:08:04.653

这里`fprintf(fid, '%s')`的意思是把东西打印到那个文件。

利用

```
fscanf(fid, '%s', s)
print(s) 
```

从文件中读取。

利用

```
s = 'abc'
fprintf(fid, '%s', s) 
```

打印到该文件。如果您需要打印到该文件，您应该使用

```
fid = fopen('text.txt', 'rw+') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:18:14.003

```
fid=fopen('c:\text.txt','r');
s=textscan(fid,'%s','delimiter','\n');%u get array of lines, drop the delimiter part to get an array of words
ss=[s{1}];
fclose(fid);

%print out line by line on the screen, or do what ever you want with array of strings ss

i=0;<br>
j=length(ss);
while i < j;%or insert string compare to your 'Goal' word here to stop output if u have array of words in ss like while ~strcmp(ss(i+1),'Goal') or use strfind function to find your key word in lines of text<br>
  i=i+1;
  disp(ss(i));
end 
```

希望能帮助到你

# python - 为什么 App Engine 命名空间会在我不期望的情况下被应用？

> ID：12207933
> 
> 赞同：0
> 
> 时间：2012-08-31T01:49:06.453
> 
> 标签：python, google-app-engine

我对命名空间在 App Engine (python) 中的工作方式感到非常困惑。我已阅读[https://developers.google.com/appengine/docs/python/multitenancy/multitenancy#Using_Namespaces_with_the_Datastore](https://developers.google.com/appengine/docs/python/multitenancy/multitenancy#Using_Namespaces_with_the_Datastore)并遵循了它的建议，但为什么这段代码有效？它不应该在“get”中使用“current”命名空间吗？

```
namespace_manager.set_namespace("foo")
t = model.Track(description="in foo namespace")
t.put()

namespace_manager.set_namespace("bar")
# Why doesn't this line fail?
x = model.Track.get(t.key())
x.delete() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:06:40.850

命名空间是键的一部分。

您使用命名空间管理器定义的命名空间仅在您未明确指定另一个命名空间时才会考虑，例如在创建新实体时。换句话说，当一个新的密钥被生成时，你用 namespace_manager.set_namespace 设置的命名空间被注入到这个密钥中。从那时起，密钥包含有关实体“位置”的完整信息（甚至是应用程序 ID），并且足以检索它。

阅读[https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_namespace](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_namespace)

# android - 为什么我的 ListView 不能长按？

> ID：12207935
> 
> 赞同：-1
> 
> 时间：2012-08-31T01:49:27.437
> 
> 标签：android, listview, android-listview

我在Activity的后代中使用listview布局，Adapter的getView实现如下，可以长按：

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        TextView tv = new TextView(CustomTitleActivity.this);
        tv.setText(title[position]);
        return tv;
    }
    return convertView;
} 
```

但是当我尝试从这样的布局文件中膨胀项目的视图时：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/local_songs_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusable="false"
    android:orientation="horizontal">
    <LinearLayout
        android:layout_weight="1"
        android:focusable="false"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <TextView
            android:id="@+id/title"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:focusable="false"
            android:text="TITLE"
            android:textAppearance="?android:textAppearanceSearchResultTitle"
            />
        <TextView
            android:id="@+id/artist"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:text="Unknow"
            android:focusable="false"
            android:textAppearance="?android:textAppearanceSearchResultSubtitle"
            />      
    </LinearLayout>

    <LinearLayout
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
            android:focusable="false"
        android:orientation="horizontal">
        <ImageButton 
        android:id="@+id/favorite"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_favourite"
            android:background="#0000"
            android:focusable="false"
            android:onClick="onToggleStar"/>

        <CheckBox 
        android:id="@+id/select"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="visible"
            android:focusable="false"/>
    </LinearLayout>
</LinearLayout> 
```

我无法单击/长按它们，我已经尝试将 android:focusable 属性设置为 false。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:49:44.153

自己回答吧。因为在ImageButton的构造函数中，它会再次调用setFocusable(true)，所以如果你真的不需要它聚焦，在ImageButton构造完成之后调用setFocusable(false)就可以了。然后问题就解决了。

# html - iOS HTML Editing Issue

> ID：12207940
> 
> 赞同：0
> 
> 时间：2012-08-31T01:50:43.763
> 
> 标签：html, ios, uiwebview

I have a webView and when you open one view it takes the webView and gets the html (through javascript) and the problem is that when I try to load the edited html, it comes up funny looking, like it is missing the images and its mostly text and not as nice. For example: If I go on Yahoo Mobile and I change the Today Tab to say say lets say Hi, then it all comes out in one column as hyperlinks instead of with the big search bar, news in the middle etc.

Heres My Code For Retrieving The HTML:

```
-(IBAction)recieveHTML:(id)sender {
htmlView.hidden = NO;
NSString *html = [webView stringByEvaluatingJavaScriptFromString:
                  @"document.body.outerHTML"];
NSString *query = [html stringByReplacingOccurrencesOfString:@">" withString:@">\n"];
htmlTView.text = query;
universalURL = url.text;

} 
```

Heres My Code For Reloading The HTML:

```
-(IBAction)changeHTML:(id)sender {
[htmlTView resignFirstResponder];
NSString *query = [htmlTView.text stringByReplacingOccurrencesOfString:@">\n" withString:@">"];

[self.webView loadHTMLString:query baseURL:[NSURL URLWithString:universalURL]];
htmlView.hidden = YES;

} 
```

Does anyone know why this is happening?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:50:24.940

```
universalURL 
```

这个值是你认为应该是的值吗？听起来它不是，因此，图像和样式表的路径不再有效。

如果您只是在操作字符串，那么最好只使用 javascript 而不是重新加载 html。

# java-native-interface - Proper way to clean-up new object array in JNI

> ID：12207941
> 
> 赞同：4
> 
> 时间：2012-08-31T01:51:03.640
> 
> 标签：java-native-interface

How should the result of `NewObjectArray` be handled if a failure occurs while partially filling up the new array?

That is, I want to abort the creation. Is it sufficient to delete the local reference to the array? Will this remove the children, as well?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:56:47.690

除非它被分配给 Java 字段或用作 JNI 函数返回值，否则一旦本机调用返回，引用将自动被垃圾收集。这是一个本地参考 - 那些不会超过 JNI 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T10:03:39.097

我在查找同一主题（`jobjectArray`发布）时偶然发现了这个问题，我注意到@Seva 提供的答案并不完整。

您**可以**`jobjectArray LocalRef`像其他任何 一样删除`LocalRef`，使用：

```
env->DeleteLocalRef(the_array);
// OR
(*env)->DeleteLocalRef(env, the_array); 
```

当然，与任何其他 一样`LocalRef`，您可以避免手动删除并依靠 GC 为您执行魔法，但如果您在同一个 JNI 函数中需要其中的许多，或者，例如，您正在运行一个分配新的循环JNI`LocalRef`并且您不会删除它们，一旦它们超出表限制（非常低，设置为 512），您将度过一段糟糕的时光。

*笔记*

如果您要手动删除数组引用，您需要记住`DeleteLocalRef`a 上的函数`jobjectArray`不会释放其子元素。

因此，当您使用时，`jobjectArray`您需要跟踪元素或遍历所有元素并一一删除。

*原始*数组也是如此，但对于这些你有

```
env->Release<Primitive>ArrayElements(the_array, 
           the_elements_to_remove, 
           release_mode);
// OR
(*env)->Release<Primitive>ArrayElements(env, 
           the_array, 
           the_elements_to_remove, 
           release_mode); 
```

# exception - Optimise Hive Query in order to avoid exceeded GC timeout exception

> ID：12207942
> 
> 赞同：0
> 
> 时间：2012-08-31T01:51:07.477
> 
> 标签：exception, optimization, garbage-collection, hive

I am running a query in Hive which is pretty straight forward but I am continuously exceeded GC timeout and OOM errors,

Query is of the form

select a.field1 -- selecting about 30 cols! from table1 t1 join table2 t2 on t1.field2 = t2.field2 and t1.date = '20120801' join table2 t3 on t1.field7 = t2.field2 and t1.date = '20120801'

I am selecting about 30 fields from this query. table1 is partitioned by date and contains around 300,000 records. table2 contains about 100 records.

Is there some way I can optimise this query?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:14:41.250

一直在玩 Mapjoin 几个小时，终于让它工作了

添加了提示 SELECT / *+ MAPJOIN(t2,t3)* /

查询现在在几秒钟内运行

# file-permissions - NFS configuration for write-once read-many access

> ID：12207946
> 
> 赞同：0
> 
> 时间：2012-08-31T01:52:01.603
> 
> 标签：file-permissions, nfs

Is there a way to replicate the write-once read-many capability of NetApp's SnapLock using a standard Linux NFS server?

I've considered using inotify to chmod files as they're written to the server, but is there a simple way to do this, or a way that would also allow anonymous writes? (All the NFS clients are on a secure network, so that would save extra client-side configuration.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:07:53.337

如果您的意思是“我可以在没有 NetApp 存储的情况下做 SnapLock 的工作吗”，答案是“不”。NetApp SnapLock 使用 NetApp WAFL 文件系统的特定功能，以及防止欺骗服务器系统时间的防篡改合规时钟（提前设置时间，以便您可以删除尚未过期的内容）。

如果您的意思是“我可以使用 NFS 命令锁定 NetApp SnapLock 卷上的文件吗”，答案是“可以”。SnapLock 功能旨在与 NFS 和 CIFS 文件命令一起使用。

# jquery - jQuery 函数在 IE9 中不执行

> ID：12207947
> 
> 赞同：0
> 
> 时间：2012-08-31T01:52:15.307
> 
> 标签：jquery

目前正在构建一个使用 Desandro 的 jQuery Masonry 并内置 Infinite Scroll 的站点。在除 IE 之外的所有浏览器中都能出色地工作（即使 IE7 和 IE8 也能正常工作）。看来 jQuery(function) 根本没有执行。我已经通过在内部放置警报进行了测试，但从未执行过。IE Developer 中没有显示错误。

这是我的代码和网站链接：[http ://www.elke.co/testimonials/](http://www.elke.co/testimonials/)

```
<script type="text/javascript">
  jQuery(function () {
    var $container = jQuery('#sort');

    $container.imagesLoaded(function () {

      $container.masonry({
        itemSelector: '.box',
        columnWidth: 100
      });
    });

    $container.infinitescroll({
      navSelector: '.navigation', // selector for the paged navigation 
      nextSelector: '.navigation .nav-previous a', // selector for the NEXT link (to page 2)
      itemSelector: '.box', // selector for all items you'll retrieve
      loading: {
        finishedMsg: 'No more pages to load.',
        img: 'http://www.elke.co/wp-content/themes/shaken-grid-free/images/ajax-loader.gif'
      }
    },
    // trigger Masonry as a callback
    function (newElements) {
      // hide new items while they are loading
      var $newElems = jQuery(newElements).css({
        opacity: 0
      });
      // ensure that images load before adding to masonry layout
      $newElems.imagesLoaded(function () {
        // show elems now they're ready
        $newElems.animate({
          opacity: 1
        });

        $container.masonry('appended', $newElems, true);
      });
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:54:25.137

在铬中我看到：

`Unsafe JavaScript attempt to access frame with URL http://www.elke.co/testimonials/ from frame with URL http://www.youtube.com/embed/g3V26BQ85IM. Domains, protocols and ports must match.`

某种 AJAX 跨域必须做错，IE 安全只是拒绝请求，其他人则让它滑动。

# c - 用于获取 Windows、Linux 和 Mac 的 TCP 序列号的 C 代码

> ID：12207953
> 
> 赞同：3
> 
> 时间：2012-08-31T01:53:25.300
> 
> 标签：c, tcp, raw-sockets

有没有办法（使用原始套接字或其他方式）来获取进程使用的 TCP 序列号。例如，如果一个进程处于活动状态并且有一个活动的 TCP 连接，是否有可能从进程启动时获取该进程的 TCP 序列号，或者至少是它接收或发送的最后一个确认号？如果是这样，我该如何使用 C 或任何低级语言来做到这一点？

实际上，可以：

*   ProcessA 检测到与活动 ProcessB 相关联的已发送的 TCP 序列号（在 ProcessA 启动时）？

或者

*   ProcessA 可以在事后检测到 ProcessA 接收或发送的最后一个 ACK​​ 号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:30:02.790

您可以使用winpcap，[http://www.winpcap.org/](http://www.winpcap.org/)来捕获TCP 数据包。它有一个 API，您可以在其中访问 NIC 上往返的所有数据包。您可以访问完整的数据包，因此您可以从中提取您喜欢的任何信息。

但是，当然，您必须监视连接才能知道序列号。您必须从实时数据包中提取序列号。如果您决定中断已经运行的连接，则必须等待下一个数据包来获取您的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:24:09.930

您将需要一个数据包分析器来查看进程使用的序列号和确认号的值。wireshark 是一个众所周知的数据包分析器，适用于所有平台。

如果您想编写自己的数据包分析器，您必须使用库 winpcap for windows，pcap for linux。

下载并运行这个程序。[嗅探](http://www.tcpdump.org/sniffex.c)

您将对监控和捕获数据包有很多了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:18:50.177

在已经提到的选项中，[libpcap](http://www.tcpdump.org/)是最好的，因为它为您提供了一种接近平台独立的捕获数据包的方式。

但是，Linux 上的另一个选择，我越来越喜欢，是使用 iptables [NFQUEUE](https://home.regit.org/netfilter-en/using-nfqueue-and-libnetfilter_queue/)目标将您感兴趣的数据包发送到用户空间（可能与 tee 结合使用）。使用这种技术，您可以使用 iptables 的强大功能来仅获取您感兴趣的数据包（例如 SYN 或一些基于概率的随机数据包）。

一个如何使用 NFQUEUE 的例子在[这里](http://gitorious.org/meshias/mainline/blobs/c2b49e10f3175e979724f5b6109454dc51e83e47/src/examples/nfqueue.c)和[这里](https://home.regit.org/netfilter-en/using-nfqueue-and-libnetfilter_queue/)。在原始表中使用 NFQUEUE 以确保评估所有数据包。应该使用[Libnetfilter_queue来简化接收数据包的过程。](http://www.netfilter.org/projects/libnetfilter_queue/index.html)

# android - 如何在 Android xml 中为图像设计纹理

> ID：12207956
> 
> 赞同：0
> 
> 时间：2012-08-31T01:54:58.993
> 
> 标签：android, xml, android-xml

我是安卓新手。我想为我的 Android 背景屏幕保留纹理。如何在 Android 设计中创建纹理？

我正在使用 android-xml 进行设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:58:01.563

假设您的纹理图像名为：`texture1.png`。

1.  放入文件夹`texture1.png`。`/res/drawable`
2.  创建`texture.xml`并`/res/drawable`把这段代码放在上面：

    ```
    <bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/texture1"
    android:tileMode="repeat" /> 
    ```

3.  将此行添加到布局 xml 的根目录（通常根目录是 a `<LinearLayout>`）：

    ```
    android:background="@drawable/texture" 
    ```

# android - 以动态模式振动

> ID：12207965
> 
> 赞同：0
> 
> 时间：2012-08-31T01:56:00.623
> 
> 标签：android

我来自 Actionscript 3 和 Java 新手。我正在尝试制作一个振动模式，其中一半是固定的，一半是动态的。例如：

```
long[] vibratePattern = {100,100,100,100} //fixed pattern
if(some_condition) vibratePattern.append(400);
if(some_condition) vibratePattern.append(200);
if(some_condition) vibratePattern.append(100); 
```

但是 long[][没有](https://stackoverflow.com/questions/5144549/append-values-dynamically-into-an-long-array)任何 append 或 add 方法。

我绑定了创建 ArrayList 但方法[Vibrator.vibrate](http://developer.android.com/reference/android/os/Vibrator.html#vibrate%28long%5B%5D,%20int%29)需要 long[] 作为参数。

所以我的问题是如何制作具有一半固定项和一半动态项的 long[] 数组并将其传递给 Vibrator.vibrate 方法。我可以创建一些其他列表并将其作为 long[] 传递给方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:12:17.757

ArrayList 在[这里](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)`toArray()`有一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:26:55.627

我最终在这个答案之后使用了 gauva：[https ://stackoverflow.com/a/1698098](https://stackoverflow.com/a/1698098)

所以我只需要`Longs.toArray(foundLongs);`

# google-maps-api-3 - 如何处理来自 Google Maps API 的 json

> ID：12207967
> 
> 赞同：1
> 
> 时间：2012-08-31T01:56:14.653
> 
> 标签：google-maps-api-3, coldfusion

来自[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

如果我输入：

```
http://maps.googleapis.com/maps/api/distancematrix/json?origins=Hickory+NC&destinations=Niagra+Falls+NY&sensor=false&units=imperial 
```

然后我得到：

```
{
   "destination_addresses" : [ "Niagara Falls, NY, USA" ],
   "origin_addresses" : [ "Hickory, NC, USA" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "667 mi",
                  "value" : 1072719
               },
               "duration" : {
                  "text" : "11 hours 21 mins",
                  "value" : 40835
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

但是如果我发出这个命令：

```
<cfhttp method="get" result="myContent" url="http://maps.googleapis.com/maps/api/distancematrix/json">
    <cfhttpparam type="url" name="origins" value="Hickory+NC">
    <cfhttpparam type="url" name="destinations" value="Niagra+Falls+NY">
    <cfhttpparam type="url" name="sensor" value="false">
    <cfhttpparam type="url" name="units" value="imperial">
</cfhttp>
<cfdump var="#myContent#"> 
```

然后我返回一个 StatusCode=200OK，但 Text=NO 的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:36:22.037

添加 `getAsBinary="never"`到您的 cfhttp

```
<cfhttp method="get" result="myContent" url="http://maps.googleapis.com/maps/api/distancematrix/json" getAsBinary="never">
    <cfhttpparam type="url" name="origins" value="Hickory+NC">
    <cfhttpparam type="url" name="destinations" value="Niagra+Falls+NY">
    <cfhttpparam type="url" name="sensor" value="false">
    <cfhttpparam type="url" name="units" value="imperial">
</cfhttp>
<cfdump var="#myContent#"> 
```

在 myContent.FileContent 中向我返回这个

```
 {
    "destination_addresses": ["Niagara Falls, NY, USA"],
    "origin_addresses": ["Hickory, NC, USA"],
    "rows": [{
        "elements": [{
            "distance": {
                "text": "667 mi",
                "value": 1072719
            },
            "duration": {
                "text": "11 hours 21 mins",
                "value": 40835
            },
            "status": "OK"
        }]
    }],
    "status": "OK"
} 
```

# google-chrome - 将 XSLT 与 Atom 提要相关联，以便在 Chrome 中呈现

> ID：12207972
> 
> 赞同：1
> 
> 时间：2012-08-31T01:56:44.470
> 
> 标签：google-chrome, xslt, stylesheet, atom-feed, xsl-stylesheet

我正在使用此标头生成 ATOM 提要：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="/atom2html.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom"> 
```

我认为这曾经在 Chrome 中工作 - 访问 URL 显示了 Atom 提要的 HTML 呈现。但是，在过去几个月的某个时间（我认为），Chrome 对 Atom 提要的处理发生了变化，因此如果不安装“提要意图查看器”之类的插件，您就无法看到内容。

是否仍然可以像这样使用 XSLT 转换 Atom 提要，以便在 Chrome 上呈现？我需要做什么？（或者我对过去工作错误的假设是什么？）

# counter - VHDL - 确定计数器周期

> ID：12207974
> 
> 赞同：1
> 
> 时间：2012-08-31T01:57:10.543
> 
> 标签：counter, vhdl, clock, frequency, period

亲爱的 SO 知识分子，

我只是想澄清一些关于确定迭代完整循环所需时间的疑虑。考虑我有一个 50Mhz 时钟，这意味着时钟周期为 20 ns。

现在，如果我有一个从 0 计数到 500 的计数器，这个计数器是否需要 20ns x 500 = 10 us 才能完成整个循环？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:05:15.297

简短的回答：是的。

长答案：在 FPGA 中，您对硬件进行编程。您使用的`process`语句并行运行，而不是像 C/C++/等那样按顺序运行。代码在一个普通的微处理器上。

例子：

```
signal sig_a : UNSIGNED(3 downto 0) := (others => '0');
signal sig_b : SIGNED(7 downto 0) := (others => '0');
signal sig_c : std_logic := '0';

process(clk)
begin
    if(rising_edge(clk)) then
        sig_a <= sig_a + 1;
        sig_b <= sig_b - 1;
        sig_c <= not sig_c;
    end if;
end process; 
```

每当您收到一个时钟信号（每 20ns 和 50 MHz 时钟），进程内的所有三个语句都将同时执行。所有三个信号都将在触发器中实现，因此当传播延迟结束时（请参阅您的 FPGA 数据表以获取您设备的确切值），所有三个信号都将具有它们的新值。

因此，该过程不会“等待”语句完成，而是由时钟“触发”。这将在时钟的每个上升沿发生，因此要执行 500 次语句，您需要 500 个时钟周期 = 50 MHz 时的 10 us。

# c# - 在 C# 中从两个列表中创建新列表

> ID：12207977
> 
> 赞同：0
> 
> 时间：2012-08-31T01:57:39.627
> 
> 标签：c#, linq, linq-to-objects

是否可以使用 linq 以更简洁的方式编写它。

```
//retrieved from db
List<User> existingList = new List<User>()
{
new User() {
Id = 1,
Name = "test1",
City = "City1"
},
new User() {
Id = 2,
Name = "test2",
City = "City"
}
};

//modified by ui
List<User> modifiedlist = new List<User>()
{
new User() {
Id = 1,
Name = "test1",
City = "City1"
},
new User() {
Id = 3,
Name = "test3",
City = "City3"
}
}; 
```

**in db: (Going By modified list) 我需要添加用户 3 并删除用户 2 并且不要打扰 1。

**对于删除 user2，我正在遍历现有列表，如果修改后的列表中不存在，则删除 2。**对于添加 user3，我正在遍历修改后的列表，如果现有列表中不存在，则添加 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:30:16.307

这看起来正是您所需要的。
[如何：查找两个列表之间的集合差异 (LINQ)：](http://msdn.microsoft.com/en-us/library/bb397894.aspx)

```
 List<int> existingList = new List<int>() { 1, 2 };
        List<int> modifiedList = new List<int>() { 1, 3 };

        var usersToDelete = existingList.Except(modifiedList).ToList(); //contains '2'
        var usersToAdd = modifiedList.Except(existingList).ToList(); //contains '3' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T02:02:50.847

如果您知道它是 1,2,3 并且您知道您想要它 1,4 - 那么您只需 RemoveAt(2) 删除 3，然后将 [1] 设置为 4 将 2 更改为 4。 RemoveAt 是比 Remove 更快，因为它按索引进行。

```
var list = new List<int> {1,2,3};

list.RemoveAt(2);
list[1] = 4; 
```

但是当然，如​​果您不知道要删除的号码是否存在，以及它们存在的位置，您显然需要搜索它们......

现在，假设您知道列表已排序，并且很大。`toRemove`让我们考虑这样一种情况：列表有 10,000 个元素{ 0,2,5,6,8,...} ,6,7,...}

那么除了时间之外，您实际上可以迭代列表一次`toRemove.Count`，如下所示：

```
int j = 0;

for (int i = 0; i < list.Count && j < toRemove.Count; i++)
{
    if (list[i] == toRemove[j])
    {
        list.RemoveAt(i);
        j++;
        i--;
    }
} 
```

如果列表可能包含重复的数字 {1, 4, 4, 5, 7,...} 并且您想以不存在单个 4 的方式删除 4，那么您需要执行以下操作：

```
int j = 0;

for (int i = 0; i < list.Count && j < toRemove.Count; i++)
{
    var currRemove = toRemove[j];

    while (list[i] == currRemove)
    {
        list.RemoveAt(i);
        i--;
    }

    j++;
} 
```

**编辑：**

如果你想让它更干净、效率更低，你可以这样做：

```
list = list.Except(toRemove).Union(toAdd).ToList(); 
```

如果您不想添加已经存在的项目：

```
var tmp = list.Except(toRemove);
list = list.Union(toAdd.Except(tmp)).ToList(); 
```

但我必须说这会非常慢，你可能想重新考虑使用列表，也许使用 HashTable 或**Dictionary**。

# php - fgets() 故障

> ID：12207981
> 
> 赞同：0
> 
> 时间：2012-08-31T01:58:27.167
> 
> 标签：php

任何人都可以告诉我为什么这段代码适用于第二行而不是第一行，尽管它们是相同的？

这是 pass.txt 文件：

```
01234567 5f4dcc3b5aa765d61d8327deb882cf99
01234567 5f4dcc3b5aa765d61d8327deb882cf99 
```

这是代码：

```
<?php
    $f = fopen("pass.txt", "r");
    if ($f) {
        $buffer = fgets($f);
        $buffer = fgets($f); //Comment out this line to read the first line

        $token = explode(' ', $buffer);
        if ($token[1] == hash('md5', 'password'))
            echo "Password correct";
        else
            echo "Password incorrect";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:00:11.510

您的第一行由换行符终止，而您的第二行不是。由于您的哈希不包含换行符，因此它与第一行不匹配。

> 读取结束时读取长度 - 1 个字节，在换行符（**包含在返回值中**）或 EOF（以先到者为准）。如果没有指定长度，它将继续从流中读取，直到到达行尾。- [fgets 文档](http://php.net/manual/en/function.fgets.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:06:32.387

正如@David Schwartz 指出的那样，最可能的原因是换行符。

您可以使用`file`函数忽略换行符。

```
foreach (file('pass.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES) as $line) {
    $token = explode(' ', $line);
    if ($token[1] == hash('md5', 'password'))
      echo "Password correct";
    else
      echo "Password incorrect";
} 
```

如果文件非常大，则使用`fgets`一个一个读取它并修剪换行符。

# c# - 如何使用 CompiledQuery

> ID：12207982
> 
> 赞同：0
> 
> 时间：2012-08-31T01:58:48.653
> 
> 标签：c#, database, entity, objectcontext, compiled-query

我之前使用 linq 从数据库中获取数据，但看起来使用 CompiledQuery 和 Linq 应该比使用 Linq 本身。

我尝试使用 CompiledQuery，但它引发了异常。

以下是我的代码：

```
static readonly Func<myEntity, int?, List<myDataModel>> s_compiledQuery2 =
CompiledQuery.Compile<myEntity, int?, List<myDataModel>>
(
    (ctx, NULLUserId) => 
    (
        from jlr in ctx.C_InternetCafe
        where jlr.USER_ID != NULLUserId
        select new myDataModel
        {
            pid = jlr.PC_ID ?? 0,
            uid= jlr.USER_ID ?? 0
        }
    ).ToList()
);
static List<myDataModel> CompiledQuery2()
{
    using (myEntity context = new myEntity())
    {
        int? UserId = null;
        List<myDataModel> orders = s_compiledQuery2.Invoke(context, UserId);
        return orders;
    }
}

public List<myDataModel> getCustomerInf()
{
    return CompiledQuery2();
} 
```

我只想从 table 中获取值“PC_ID”和“USER_ID” `C_InternetCafe`，并将它们添加到 myDataModel 其数据成员具有`pid`and `uid`。

//------------------------------------------------ ----------------------------

原谅我的疏忽，以下是我得到的例外。

```
NotSupportedException
{
    "LINQ to Entities  does not recognize the method 
    'System.Collections.Generic.List`1
    [InternetCafeManager.Web.DataModel.myDataModel] 
    ToList[myDataModel]
    (System.Collections.Generic.IEnumerable`1
    [InternetCafeManager.Web.DataModel.myDataModel])' method, 
    and this method cannot be translated into a store expression"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:44:22.977

无法编译查询，因为“ToList”无法翻译成 sql。函数内的任何内容都必须能够转换为 sql。删除 ToList 并在调用已编译查询时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:42:46.570

谢谢你所有的回应。异常已修复，但我从 IQueryable 转换的列表没有数据（不是 null，只是 count = 0）。

以下是我修改的代码...

```
static readonly Func<myEntity, int?, IQueryable<myDataModel>> s_compiledQuery2 =
CompiledQuery.Compile<myEntity, int?, IQueryable<myDataModel>>
(
    (ctx, NULLUserId) => 

        from jlr in ctx.C_InternetCafe
        where jlr.USER_ID != NULLUserId
        select new myDataModel
        {
            pid = jlr.PC_ID ?? 0,
            uid = jlr.USER_ID ?? 0
        }

);
static List<myDataModel> CompiledQuery2()
{
    using (myEntity context = new myEntity())
    {
        int? UserId = null;
        IQueryable<myDataModel> orders = s_compiledQuery2.Invoke(context, UserId);
        //orders has value => orders.count() = 762k
        List<myDataModel> tmpmodel = orders.ToList<myDataModel>();
        //tmpmodel has no value. => orders.count() = 0, why?
        return tmpmodel.;
    }
} 
```

# java - 单例 EJB 应该在 EJB 容器外部表现相同，但不

> ID：12207983
> 
> 赞同：1
> 
> 时间：2012-08-31T01:58:57.617
> 
> 标签：java, glassfish-3, cdi, ejb-3.1

出于开发目的，我在单例 bean 中实现了一个虚拟数据存储库。单例 bean 的构造函数创建虚拟数据，并且有检索、插入、更新和删除虚拟数据的方法。

当我对它进行单元测试时，检查插入和更新的对象是否可以在插入和更新的相同状态下检索（即逐个属性相等），单元测试通过。在这个测试中，我只是将单例 bean 实例化为一个常规对象，即通过它的构造函数。当我通过将单例 bean 注入`@RequestScoped`JSF 支持 bean 来实际使用单例 bean 时（它将 bean 创建留给 EJB 容器），在更新数据项并随后通过其 ID 检索它之后，更新似乎丢失并且旧的字段值被使用。所以 bean 在容器内外的行为并不相同。然而，`System.out.println`构造函数中有一个只执行一次，所以从这个意义上说，它似乎只实例化了一次。

单例 bean 的结构如下：

```
@ConcurrencyManagement(ConcurrencyManagementType.BEAN)
@Singleton
@LocalBean
public class DummyDataRepository {
    public DummyDataRepository() {
        // Initial dummy data created here.
    }

    public final synchronized Foo findFooById(int id) {
        // Retreive a Foo by ID.
        // ...
    }

    public final synchronized void addFoo(Foo foo) {
        // Add the Foo.
        // ...
    }

    public final synchronized void updateFoo(Foo foo) {
        // Find the existing Foo by foo.id and replace it with foo.
        // ...
    }

    public final synchronized void deleteFoo(int id) {
        // Find the existing Foo by id and delete it.
        // ...
    }
} 
```

似乎没有任何理由认为 bean 应该在 EJB 容器内外产生不同的结果。它不使用任何外部资源。同步是 bean 管理的（所以在这方面应该是相同的）。bean 被声明为单例。但在容器中，它似乎充当无状态会话 bean。

我正在使用 GlassFish 3.1.2.2。

**更新：** 我将 bean 从更改`@javax.ejb.Singleton`为（并通过而不是`@javax.enterprise.context.ApplicationScoped`在需要的地方注入它），它现在按预期工作。然而，两者之间应该没有区别。它接缝的是，虽然单例 EJB 只被实例化一次，但它会以某种方式在方法调用之间恢复其状态。`@javax.inject.Inject``@javax.ejb.EJB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:29:50.723

单例 bean 中的公共方法不应声明为`final`. 我已将它们声明为 final，因为我从构造函数中调用它们以使用初始虚拟数据集填充集合。当未声明为 final 时，NetBeans 正确警告从基类构造函数调用可能在子类中被覆盖的方法。当未声明为 final 时，我`NullPointerException`只需从构造函数调用单例 bean 自己的公共方法即可。因此，非最终方法必须存在某种代理。

我仍然不确定为什么它*看起来*好像最终方法的结果被缓存（即得到陈旧的结果）。但我有我的答案，所以我很高兴。

# json - Selenium Grid 命名节点

> ID：12207985
> 
> 赞同：3
> 
> 时间：2012-08-31T01:59:05.497
> 
> 标签：json, selenium, hostname, dhcp, grid-computing

我们正在运行 selenium Grid 2，并且有各种机器连接回集线器。当网络运行 DHCP 时，节点会非常频繁地循环 IP 地址。

当我查看集线器状态时，是否有让集线器显示连接节点的主机名而不是 IP 地址
`http://myseleniumgridhub:4444/grid/console?config=true&configDebug=true`

我已经查看了节点的 JSON 配置选项，但除了浏览器名称之外什么都没看到（这不太适合任务，因为所有节点都运行相同的浏览器）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T20:11:03.617

当您运行节点时，传入`-host`参数并指定您的**主机名**

```
 java -jar ./selenium-server-standalone-2.25.0.jar -role node -host HOSTNAME -port 5555 -maxSession 20 -timeout 30000 -hub http://hubhost:4444/grid/register -browser browserName=*googlechrome,maxInstances=8 
```

然后在网格/控制台网站中，它将显示注册为主机名而不是 IP 的节点： *监听 http:// HOSTNAME :5555*

如果改为使用 JSON 文件`-nodeConfig`，您可以添加`"host":"HOSTNAME"`到 JSON 文件中的“配置”对象（请参阅[此处](http://code.google.com/p/selenium/source/browse/trunk/java/server/src/org/openqa/grid/common/defaults/DefaultNode.json)）

# django - Django，从request.GET中排除参数

> ID：12207986
> 
> 赞同：7
> 
> 时间：2012-08-31T01:59:06.267
> 
> 标签：django, url, parameters, request

从 request.GET 中排除参数的最佳方法是什么？

例如，给定一个 url 参数`?a=a&b=b&c=c`，我想取出参数 b 以生成 url 参数`?a=a&c=c`而不更改`request.GET`

现在我正在遍历键以取出 b

```
params = {}
for key,value in request.GET.items():
  if not key == 'b':
    params[key] = value

url = urllib.urlencode(params) 
```

我想知道是否有更好、更优雅的方法来实现相同的结果？例如。

```
request.GET.urlencode(exclude=['b',]) 
```

甚至这个，更好

```
urllib.urlencode(request.GET.exclude('b'...) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T02:09:13.133

这应该有效：

```
get = request.GET.copy()
del get['b']

params = urllib.urlencode(get) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T02:20:39.963

您不能`request.GET`直接操作 ，因为它是不可变的`QueryDict`。所以做一个浅拷贝，然后删除所需的密钥。

```
cp = request.GET.copy()
cp.pop('b')

params = urllib.urlencode(cp) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T15:42:13.963

所有这些答案几乎都是正确的，但是对于存在多个具有相同键名的参数的边缘情况失败了，这是有效的（以及 django 使用 a`QueryDict`而不是 a的全部原因`dict`）。如果使用 urllib`urlencode`会丢失多余的参数，需要使用`QueryDict`.

[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict)

> QueryDict 是一个类字典类，定制用于处理同一个键的多个值。这是必要的，因为某些 HTML 表单元素，特别是`<select multiple="multiple">`为同一个键传递多个值。

所以正确的做法是：

```
querydict = request.GET.copy()
if 'b' in querydict:
    del querydict['b']
return querydict.urlencode() 
```

# python - 为什么我在使用 Python 2.7 的小数函数时看不到预期的结果？

> ID：12207989
> 
> 赞同：0
> 
> 时间：2012-08-31T01:59:18.833
> 
> 标签：python, decimal

我刚刚开始使用 Python 2.7，并正在尝试构建一个简单的信用支付计算器作为测试。据我所知，十进制函数应该强制程序计算到特定的小数位数。从文档页面：

```
>>> from decimal import *
>>> getcontext().prec = 6
>>> Decimal(1) / Decimal(7)
Decimal('0.142857')
>>> getcontext().prec = 28
>>> Decimal(1) / Decimal(7)
Decimal('0.1428571428571428571428571429') 
```

所以我的理解是，如果我输入以下内容：

```
from decimal import *
getcontext().prec=2
total =5
print Decimal(total) 
```

我应该得到以下

> 5.00

但是，它会一直打印 5。如果我输入`Decimal (5)`或`Decimal (total)`得到输出`Decimal ('5')`。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:08:55.137

您设置的*精度是计算的数学精度。*它与打印的小数位数无关。默认情况下，`Decimal`实例将打印其自身的最短文本表示。要以其他方式打印，请使用 Python 字符串插值（`%`运算符）或`format()`字符串方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T02:01:49.973

你为什么不只做格式字符串？

```
 >>> print "{0:0.2f}".format(5)
 5.00 
```

抱歉，我对十进制包一无所知，所以我真的无法帮助你...我从来没有真正理解十进制包的需求或利基

[http://www.shocksolution.com/2011/11/python-string-format-examples/](http://www.shocksolution.com/2011/11/python-string-format-examples/)

[http://docs.python.org/library/string.html#formatspec](http://docs.python.org/library/string.html#formatspec)

# python - 正则表达式以括号开头和结尾

> ID：12207991
> 
> 赞同：4
> 
> 时间：2012-08-31T01:59:52.583
> 
> 标签：python, regex

这是我尝试使用 re 模块在 python 中制作的模式对象。我想要的是接受字符串 "(\exists x)(Px*Qx)" 并只找到 "Px*Qx" 部分的东西。我想我会尝试使用前瞻和后瞻断言。我不确定我是否使用了这个错误或者 ( 字符是否有问题。

```
p = re.compile(r'?<=[(]\w+?=[)]')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/re.py", line 190, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python2.7/re.py", line 244, in _compile
    raise error, v # invalid expression
sre_constants.error: nothing to repeat 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:18:24.670

## 问题

1.  您需要将标记放入一个组中以应用后视（**在周围添加括号**）：`(?<=[(]\w+(?=[)]))`

2.  Python**不支持**在lookbehind 中重复变量。所以，你不能`\w+`在那里写。

3.  只有后视的正则表达式**不匹配**！Lookbehind 的意思是*“尝试匹配这个东西，然后保持在相同的起始位置以匹配正则表达式的后面部分。”* 但是，就您而言，没有以下部分。所以，没有什么匹配的。

## 解决方案

如果要获取最后一个括号内的文本：

```
^.*\((.*?)\)$ 
```

如果您想跳过第一个括号并获取剩余部分删除括号：

```
^\(.*?\)\((.*)\)$ 
```

请更具体地定义您想要的内容，以便我可以帮助您编写正确的正则表达式。

# eclipse-plugin - 无需使用 plugin.xml 即可创建 eclipse 插件

> ID：12207995
> 
> 赞同：0
> 
> 时间：2012-08-31T02:00:39.333
> 
> 标签：eclipse-plugin

我是创建 Eclipse 插件的新手，我发现处理 plugin.xml 文件很困难。另外，我被时间困住了。

那么，是否有使用 Manifest.mf 的好教程，或者是否有任何其他工具可以帮助构建插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:17:04.833

Eclipse 工具是制作它们的最佳工具，但您可以解压缩另一个 Eclipse 插件 jar 以查看清单是如何手动制作的。

# java - 为什么if语句会左右摇晃屏幕

> ID：12207996
> 
> 赞同：1
> 
> 时间：2012-08-31T02:00:44.720
> 
> 标签：java, android, if-statement, sudoku

在 hello android book 中有一个数独解决方案。我想在最后创建一条消息，显示一个表示祝贺的对话框。我有一个方法来检查是否还有任何空方格，我在另一个方法中调用它来检查最后一个输入是否是方格的有效条目

```
/****** Check to see if the game is complete **/
public boolean isSolved() {
    for (int element : puzzle) {
        if (element == 0)
            return false;
    }
    return true;
}

/** Change the tile only if it's a valid move */
protected boolean setTileIfValid(int x, int y, int value) {
    int tiles[] = getUsedTiles(x, y);
    if (value != 0) {
        for (int tile : tiles) {
            if (tile == value)
                return false;
        }
    }
    setTile(x, y, value);
    calculateUsedTiles();
    //check if the game is complete after each valid move
            if (isSolved() == true) { 
                Intent i = new Intent(this, Congratulations.class); 
                startActivity(i);} 
                else
                {
                    return false;
                }
    return true;
} 
```

出于某种原因，当我在游戏完成之前进入一个图块时，整个屏幕会左右晃动。这在我进入游戏检查之前没有这样做。为什么以及在哪里这样做？

Congratulatons.xml `<?xml version="1.0" encoding="utf-8"?> <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:padding="10dip" > <TextView android:id="@+id/about_content" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/congratulations_text" /> </ScrollView>` Congratulations.java

```
package com.example.sudoku;
import android.app.Activity;
import android.os.Bundle;
public class Congratulations extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.congratulations);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:06:31.210

好像有一些动画，负责摇动屏幕。它可能会附加到祝贺活动中。

我认为您需要为此方法搜索代码（尤其是祝贺活动）：

```
startAnimation(AnimationUtils.loadAnimation(context,R.anim.shake)); 
```

Or it could be a theme (also custom theme) responsible for the animation in the activity tag of the AndroidManifest.xml

Maybe it's not the Congratulations Activity at all. It's probably the code part which is called, when the Sudoku was not solved yet.

# c# - 位图.保存错误

> ID：12207999
> 
> 赞同：1
> 
> 时间：2012-08-31T02:01:24.717
> 
> 标签：c#, .net, asp.net-mvc-3

任何线索为什么会发生该错误？

```
outputStream  cannot be null 
```

谢谢！

```
public FileContentResult DisplayFont(string fontID)
        {
            int fontSize = 12;

            string fontName = "Arial";

            System.Drawing.Font rectangleFont = new System.Drawing.Font(fontName, fontSize, FontStyle.Bold);

            int height = 150;

            int width = 250;

            Bitmap bitmap = new Bitmap(width, height, PixelFormat.Format24bppRgb);

            Graphics g = Graphics.FromImage(bitmap);

            g.SmoothingMode = SmoothingMode.AntiAlias;

            Color backgroundColor = Color.White;

            g.Clear(backgroundColor);

            g.DrawString(fontName, rectangleFont,SystemBrushes.WindowText, new PointF(10, 40));

            Stream outputStream = null;

            bitmap.Save(outputStream,  ImageFormat.Jpeg); // ERROR

            byte[] byteArray = ReadFully(outputStream);

            g.Dispose();

            bitmap.Dispose(); 

            return new FileContentResult(byteArray, "image/jpeg");
        }

 public static byte[] ReadFully(Stream input)
        {
            byte[] buffer = new byte[16 * 1024];
            using (MemoryStream ms = new MemoryStream())
            {
                int read;
                while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
                {
                    ms.Write(buffer, 0, read);
                }
                return ms.ToArray();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:04:43.967

`OutputStream`一片空白。它应该是，

```
 Stream outputStream = new MemoryStream(); 
```

编辑：

```
int height = 150;
int width = 250;
byte []byteArray=null;

using (Bitmap bitmap = new Bitmap(width, height, PixelFormat.Format24bppRgb))
{
    int fontSize = 12;
    string fontName = "Arial";
    System.Drawing.Font rectangleFont = new System.Drawing.Font(fontName, fontSize, FontStyle.Bold);
    Graphics g = Graphics.FromImage(bitmap);
    g.SmoothingMode = SmoothingMode.AntiAlias;
    Color backgroundColor = Color.White;
    g.Clear(backgroundColor);
    g.DrawString(fontName, rectangleFont, SystemBrushes.WindowText, new PointF(10, 40));

    using (MemoryStream outputStream = new MemoryStream())
    {
        bitmap.Save(outputStream, ImageFormat.Jpeg);
        byteArray = outputStream.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:07:32.623

我找到了解决方案。

它应该是

```
MemoryStream outputStream = new MemoryStream();

bitmap.Save(outputStream,  ImageFormat.Jpeg);

byte[] byteArray = outputStream.ToArray(); 
```