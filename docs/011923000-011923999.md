# StackOverflow 问答 11923000-11923999

# sql - SQL 存储过程

> ID：11923000
> 
> 赞同：0
> 
> 时间：2012-08-12T14:36:27.317
> 
> 标签：sql, crystal-reports

我的问题是我要创建一个 SQL 存储过程，以便我可以根据该存储过程创建一个报告。

问题：如何按以下顺序显示记录？

```
ABCON                       
67890      2/1/2012                     
123        2/10/2012                    
456        3/10/2012                    
789        3/11/2012                    
DEFON                           
222        3/12/2012                    
333        3/18/2012                    
GHION                               
67890      4/1/2012                     
444        5/1/2012                     
555        5/15/2012                    
789        06/11/2012 
```

给定样本表：

```
 Column1   Column2   Column3   ColDate  
  ABCON     67890               02/01/2012  
              123      67890    02/10/2012   
              456        123    03/10/2012   
  DEFON       222           03/12/2012  
              333        222     3/18/2012    
  GHION     67890               04/01/2012   
              444     67890     05/01/2012   
              555       444      5/15/2012   
              789       456     06/11/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:45:54.330

这段代码应该可以工作。

```
SELECT Column1, Column2,Column2, ColDate
FROM yourTable
ORDER BY ColDate ASC 
```

**注意：** 要像这样在报告中显示数据，您需要`GROUP`在您使用的报告中使用该功能

```
 ABCON                       
    67890      2/1/2012                     
    123        2/10/2012                    
    456        3/10/2012                    
    789        3/11/2012                    
    DEFON                           
    222        3/12/2012                    
    333        3/18/2012                    
    GHION                               
    67890      4/1/2012                     
    444        5/1/2012                     
    555        5/15/2012                    
    789        06/11/2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:38:58.580

```
SELECT Column1, Column2, ColDate
FROM sampletable
ORDER BY ColDate ASC 
```

# networking - 带有命名管道的 Netcat

> ID：11923002
> 
> 赞同：2
> 
> 时间：2012-08-12T14:36:36.927
> 
> 标签：先进先出, networking, pipe, named-pipes, netcat

我有一个连接到服务器的客户端`localhost:10000`。服务器不在同一主机上。但是我们不能从IP网络访问服务器。为此，我们正在编写自己的网络驱动程序，它将创建一个虚拟网络接口。然后`10000`在该服务器上将可用。

目前，我们正在尝试编写一个仅模仿服务器行为的应用程序。它应该侦听`localhost:10000`任何传入数据并将其写入命名管道。还将命名管道上的任何传入数据写入连接的客户端。我相信这可以很容易地使用一个名为`netcat`or的简单工具来完成`nc`。我怎么做？

我有这个[先进先出](/questions/tagged/fifo "显示标记为“fifo”的问题")命名`fifo`。我执行

```
nc -l 4444 > ../fifo 
```

此命令仅将在传入连接中找到的任何数据写入 fifo。我如何使它成为两种方式？意味着它应该同时读取和写入管道？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T15:51:09.697

**这可以使用两个 FIFO 来完成**。假设它们是`in`和`out`。

您将 netcat 服务器运行为

```
nc -l 4444 < in > out 
```

### 这是如何工作的

`nc -l 4444`侦听任何传入连接的本地`4444`端口。连接后，它将`in`管道上找到的任何内容发送到客户端，并将客户端的任何内容写入`out`fifo。

# eclipse - 当我切换到另一个缓冲区然后切换回来时，Eclipse 不会保留我未保存的编辑

> ID：11923003
> 
> 赞同：0
> 
> 时间：2012-08-12T14:36:48.657
> 
> 标签：eclipse, edit

当我从一个缓冲区切换到另一个缓冲区时，我经常丢失在 Eclipse 中的编辑。我在 Eclipse 中使用 MugSoft 的 Enacs+ 插件。这个插件允许在 Eclipse 中使用大多数 Emacs 快捷方式。但是当我使用“ctrl + b”切换到某个缓冲区然后使用相同的快捷方式切换回来时，我经常感到困惑。Eclipse 彻底放弃了我在原始缓冲区中未保存的编辑，因此我什至无法使用“撤消”工具恢复它。

你有一些类似的问题吗？正常吗？？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:47:05.830

尝试删除 Emacs 插件，看看问题是否仍然存在。否则，我建议尝试重新安装 Eclipse :) 可能是修复此类问题的最简单方法。如果您重新安装 Emacs 插件并且问题又出现了，那么您就知道问题出在哪里，并且可能应该提交错误报告。

注意：（这可能是插件的一项功能，因此请确保您也检查了所有首选项。）

# apache - 奇怪的行为：apache 将字符串重定向到 string.js

> ID：11923004
> 
> 赞同：0
> 
> 时间：2012-08-12T14:36:50.220
> 
> 标签：apache, redirect, rewrite

有人可以解释一下，为什么 apache 将 'string' 重写​​为 'string.js'？我在谷歌上没有找到任何东西，我想知道如何关闭它......</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:41:32.777

您提供的信息很少。也就是说，问题的原因*可能*`MultiViews`是在某些情况下可以[自动添加扩展](http://wiki.kartbuilding.net/index.php/Apache#Multiviews_-_Automatically_append_file_extension)的功能。

尝试将此添加到`.htaccess`文件或中央服务器配置中：

```
Options -MultiViews 
```

# python - Gtk python中的线程

> ID：11923008
> 
> 赞同：3
> 
> 时间：2012-08-12T14:37:11.843
> 
> 标签：python, multithreading, gtk3

所以我正忙着写一个应用程序，需要在一定时间后检查网站的更新，我正在使用带有 Gtk +3 的 python

main.py 文件

```
class Gui:
    ...
    def on_update_click():
        update()

app=Gui()
Gtk.main() 
```

更新.py 文件

```
def update():
    #check site for updates
    time.sleep(21600) #check again in 6hrs 
```

我怀疑我将不得不使用线程。我的想法是：

Gtk.main() 运行主线程。

当用户单击更新按钮时，update() 在后台运行。#线程 2

我的想法是正确的还是我错过了什么？

编辑：好的，
on_update_click 函数：

```
 Thread(target=update).start(). 
```

K，计算机不再冻结：D

所以现在发生的事情是，只有当我关闭 Gtk.main() 时，更新线程才会启动。关闭 UI 时继续更新很好，但我也希望它在 UI 启动时启动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T05:23:02.957

所以我终于设法让它工作了。我需要说：

```
from gi.repository import Gtk,GObject

GObject.threads_init()
Class Gui:
    .....
    ......
    def on_update_click():
            Thread(target=update).start() 
```

起初我使用：

```
thread.start_new_thread(update()) 
```

在 on_update_click 函数中。如前所述，我的 JF Sebastian 这是不正确的，因为这会立即调用该线程。这冻结了我的整个计算机。

然后我补充说：

```
Thread(target=update).start() 
```

on_update_clicked 函数仅在主线程 Gtk.main() 关闭后才起作用。所以线程没有同时运行。

通过添加： GObject.threads_init()

这允许线程串行运行到 python 解释器： [Gtk 中的线程](http://www.pygtk.org/docs/pygtk/gdk-functions.html#function-gdk--threads-init)！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T22:14:26.747

`thread.start_new_thread(update())`是错的。它`update()`立即在主线程中调用，您不应该`thread`直接使用模块；改用`threading`模块。

您可以调用`threading.current_thread()`以找出执行哪个线程`update()`。

为了简化您的代码，您可以在主线程中运行所有 gtk 代码，并使用阻塞操作来检索网页并在后台线程中运行它们。

基于[GTK+ 3 教程中的扩展示例](http://python-gtk-3-tutorial.readthedocs.org/en/latest/introduction.html#extended-example)：

```
#!/usr/bin/python
import threading
import urllib2
from Queue import Queue

from gi.repository import Gtk, GObject

UPDATE_TIMEOUT = .1 # in seconds

_lock = threading.Lock()
def info(*args):
    with _lock:
        print("%s %s" % (threading.current_thread(), " ".join(map(str, args))))

class MyWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Hello World")

        self.button = Gtk.Button(label="Click Here")
        self.button.connect("clicked", self.on_button_clicked)
        self.add(self.button)

        self.updater = Updater()
        self._update_id = None
        self.update()

    def on_button_clicked(self, widget):
        info('button_clicked')
        self.update()

    def update(self):
        if self._update_id is not None: 
            GObject.source_remove(self._update_id)

        self.updater.add_update(self.done_updating) # returns immediately
        # call in UPDATE_TIMEOUT seconds
        self._update_id = GObject.timeout_add(
            int(UPDATE_TIMEOUT*1000), self.update)

    def done_updating(self, task_id):
        info('done updating', task_id)
        self.button.set_label("done updating %s" % task_id)

class Updater:
    def __init__(self):
        self._task_id = 0
        self._queue = Queue(maxsize=100) #NOTE: GUI blocks if queue is full
        for _ in range(9):
            t = threading.Thread(target=self._work)
            t.daemon = True
            t.start()

    def _work(self):
        # executed in background thread
        opener = urllib2.build_opener()
        for task_id, done, args in iter(self._queue.get, None):
            info('received task', task_id)
            try: # do something blocking e.g., urlopen()
                data = opener.open('http://localhost:5001').read()
            except IOError:
                pass # ignore errors

            # signal task completion; run done() in the main thread
            GObject.idle_add(done, *((task_id,) + args))

    def add_update(self, callback, *args):
        # executed in the main thread
        self._task_id += 1
        info('sending task ', self._task_id)
        self._queue.put((self._task_id, callback, args))

GObject.threads_init() # init threads?

win = MyWindow()
win.connect("delete-event", Gtk.main_quit)
win.show_all()

Gtk.main() 
```

注意：`GObject.idle_add()`是唯一一个从不同线程调用的与 gtk 相关的函数。

另请参阅[多线程 GTK 应用程序 - 第 1 部分：误解](http://blogs.operationaldynamics.com/andrew/software/gnome-desktop/gtk-thread-awareness)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:08:45.323

线程是解决问题的第一种方法。您可以创建线程并在该线程内运行长时间运行的阻塞函数（并且您的 GUI 不会挂起）。

另一种方法是使用异步网络，例如使用 python-gio (GObject-IO) 或另一个有可能与 GLib 的主循环一起使用的库（[就像他们使用 Twisted 一样](https://stackoverflow.com/questions/2134797/async-http-request-using-gio)）。这种方法有点不同，它使用非阻塞套接字操作。当来自套接字（您正在轮询的站点）的数据可供读取时，您的主循环将进行回调。不幸的是，GIO 没有高级 HTTP API，因此您可以使用[`GSocketClient`](http://developer.gnome.org/gio/stable/GSocketClient.html)和手动创建 HTTP 请求结构。

# java - 如何更新文本框以更改金额？

> ID：11923011
> 
> 赞同：0
> 
> 时间：2012-08-12T14:38:00.907
> 
> 标签：java

我打算让这个程序显示每周在文本字段中花费的总金额，但我不确定如何在将金额设置为变量后使此文本框“更新”。有任何想法吗？提前致谢。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class operation extends JFrame{
private JTextField monday;
private JTextField tuesday;
private JTextField wednesday;
private JTextField thursday;
private JTextField friday;
private JTextField saturday;
private JTextField sunday;
private JButton finalize;
private JButton result;
private JTextField finalBox;

double mon = 0;
double tues = 0;
double wed = 0;
double thurs = 0;
double fri = 0;
double sat = 0;
double sun = 0;
double sum = 0;

String stringSum = "";

public operation(){
    super("Weekly Total Calculator");
    setLayout(new FlowLayout());

    monday = new JTextField("How much you spent Monday", 20);
    monday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(monday);

    tuesday = new JTextField("How much you spent Tuesday", 20);
    tuesday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(tuesday);

    wednesday = new JTextField("How much you spent Wednesday", 20);
    wednesday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(wednesday);

    thursday = new JTextField("How much you spent Thursday", 20);
    thursday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(thursday);

    friday = new JTextField("How much you spent Friday", 20);
    friday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(friday);

    saturday = new JTextField("How much you spent Saturday", 20);
    saturday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(saturday);

    sunday = new JTextField("How much you spent Sunday", 20);
    sunday.setFont(new Font("Ariel", Font.PLAIN, 14));
    add(sunday);

    finalize = new JButton("Calculate!");
    add(finalize);

    finalize.addActionListener(new ActionListener(){
           public void actionPerformed(ActionEvent ae){

                double mon = Double.parseDouble(monday.getText());
                double tues = Double.parseDouble(tuesday.getText());
                double wed = Double.parseDouble(wednesday.getText());
                double thurs = Double.parseDouble(thursday.getText());
                double fri = Double.parseDouble(friday.getText());
                double sat = Double.parseDouble(saturday.getText());
                double sun = Double.parseDouble(sunday.getText());

                double sum = mon + tues + wed + thurs + fri + sat + sun;

           }
    });

    String stringSum = Double.toString(sum);

    finalBox = new JTextField(stringSum, 20);
    finalBox.setEditable(false);
    add(finalBox);
    //this is the text box^^

}

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:39:54.930

在动作监听器中设置测试：

```
finalize.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae){
        // snip
        // snap
        double sum = mon + tues + wed + thurs + fri + sat + sun;
        finalBox.setText(Double.toString(sum));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:42:27.287

在

```
public void actionPerformed(ActionEvent ae) { 
```

你可以加：

```
finalBox.setText(Double.toString(sum)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T15:16:53.680

好的，一旦你得到了总金额，你需要把它放在`finalBox`.

您将需要该`setText()`方法，它是一种线程安全的方法。

```
finalize.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae){

        double mon = Double.parseDouble(monday.getText());
        double tues = Double.parseDouble(tuesday.getText());
        double wed = Double.parseDouble(wednesday.getText());
        double thurs = Double.parseDouble(thursday.getText());
        double fri = Double.parseDouble(friday.getText());
        double sat = Double.parseDouble(saturday.getText());
        double sun = Double.parseDouble(sunday.getText());

        double sum = mon + tues + wed + thurs + fri + sat + sun;
        finalBox.setText(Double.toString(sum));
    }
}); 
```

# css - 仅在 Safari 5.1 中损坏的简单 CSS 转换

> ID：11923012
> 
> 赞同：0
> 
> 时间：2012-08-12T14:38:04.133
> 
> 标签：css, safari, transform

这个非常简单的代码将 WebKitTransform rotate() 应用于转换中的某些元素。

[http://jsfiddle.net/uRWsp/3/](http://jsfiddle.net/uRWsp/3/)

这适用于 Chrome、Firefox、Opera、IE9、Safari 5.0 和 Safari 6.0

然而，在 Safari 5.1 中，并且仅在 Safari 5.1 中，它被破坏了。它只转换第一张卡片。

使用 JavaScript 而不是 CSS 来处理过渡/动画会导致同样的问题：http: [//jsfiddle.net/rGdjz/12/](http://jsfiddle.net/rGdjz/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:29:59.180

所以我在这里找到了一个解决方案：[Safari：绝对定位的 DIV 在通过 DOM 更新时不会移动](https://stackoverflow.com/questions/9471038/safari-absolutely-positioned-divs-not-moving-when-updated-via-dom)

基本上，如果我在 setTimeout 中设置变换旋转，那么它就可以工作。现在这只修复了 JavaScript 版本：http: [//jsfiddle.net/rGdjz/13/](http://jsfiddle.net/rGdjz/13/)

另一个线程提到如果我将顶部和左侧设置作为翻译操作（而不是设置左侧/顶部），那么它将在 CSS 版本中修复它。我没有调查这是否属实。

与此同时，我发现了 5 个其他 Stack Overflow 问题也有同样的问题。

# css - 为什么打印时页面元素不会保持隐藏状态？

> ID：11923014
> 
> 赞同：1
> 
> 时间：2012-08-12T14:38:19.923
> 
> 标签：css, printing

我有一个正在开发的网站，其中有一个“打印页面”按钮。当页面打印时，我想隐藏页面的某些元素（例如左侧导航、顶部导航等...）。

我已将此添加到我的 style.css 中：

```
@media print {
  #topnav { display:none }
  #left-col { display:none }
} 
```

但是，当我去查看页面的打印预览时，那些元素仍然存在。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:03:53.540

我想到了。这是我的一个编码错误。我的样式表的原始链接如下所示：

```
<link href="/style.css" rel="stylesheet" type="text/css" media="screen" /> 
```

并引起了冲突。一旦我删除`media="screen"`它就可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:48:34.037

您可以尝试以下代码：

***代码***

```
<input type="submit" id="print" value="Submit"> 
```

***JS代码***

```
$(document).ready(function(){
  $('#print').on('click', function(){
        $('selector i.e #leftnav, #topnav').die();
     });
  }); 
```

***或者***

```
$('selector i.e #leftnav, #topnav').hide(); 
```

# google-apps-script - 用于在 Google Apps 中返回 NULL 的 Gmail 的 getThreads()

> ID：11923015
> 
> 赞同：1
> 
> 时间：2012-08-12T14:38:27.913
> 
> 标签：google-apps-script, gmail

我正在尝试使以下 Google Apps 脚本正常工作，取自另一个较早的 Groups 帖子。它基本上正在工作到调用 getThreads(n, m) 的地步。返回的错误代码是：

TypeError：无法调用 null 的方法“addToThreads”。

有没有更简单的方法来调试 getThreads() 函数？目标是将标签从 EVERNOTE 更改为 Scripts/Forward。

```
// Set up multiple labels/sub-labels and add one or more email addresses
function forwardEmails() {
  forwardThreads("EVERNOTE", "username@m.evernote.com", "@Filtered Email Archive");
//  forwardThreads("Forward/MoreItems", "username1@gmail.com, username2@gmail.com", "MORE INFO");
  }

function forwardThreads(label, addr, subjSuffix) {

  var maxSubjLength = 250; 
  var applylabel = GmailApp.getUserLabelByName("Scripts/Forward");

  // Send individual and threaded emails.
  var msgs, msg, i, j, subject, options, labels, page;
  labels = GmailApp.getUserLabelByName(label)
  var threads = labels.getThreads()
  for (i=0; i < threads.length; i++) {
    msgs = threads[i].getMessages();
    for (j=0; j < msgs.length; j++) {
      msg = msgs[j];

      subject = msg.getSubject();
      if (subject.length + subjSuffix.length > maxSubjLength) {
        subject = subject.substring(0, maxSubjLength - subjSuffix.length);
      }

      options = { htmlBody: msg.getBody(), attachments : msg.getAttachments() };

      GmailApp.sendEmail(addr, subject +" "+ subjSuffix, msg.getBody(), options);

    }
  }

  while(!page || page.length == 100) {
    page = labels.getThreads(0, 100);

  // Apply new label; move the thread out of other label
     applylabel.addToThreads(page);    // ***** Failing on this line - assume page is NULL
     labels.removeFromThreads(page);
      }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:38:08.093

此代码中的错误消息`TypeError: Cannot call method "addToThreads" of null.`表示`applylabel`变量为`null`。只有在`GmailApp.getUserLabelByName("Scripts/Forward");`退货`null`时才会发生，如果系统找不到`Scripts/Forward`标签，就会发生这种情况。我假设其身份运行脚本的用户没有这样的标签。

# python - python - pyplot.specgram 的缩小输出

> ID：11923018
> 
> 赞同：1
> 
> 时间：2012-08-12T14:38:37.800
> 
> 标签：python, matplotlib, spectrogram

我有一个 40 秒的录音，我用[`pyplot.specgram`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.specgram). 我想要一个矢量图形输出。

输出图像很大，当我将它包含在 PDF 中时，它的渲染速度非常慢。我想缩小它，但我不知道如何。

我需要对波形做同样的事情，但这更容易，因为我可以缩小输入，并且波形看起来足够相似。如果我缩小频谱图的输入，我想频率也会改变，破坏频谱图。

如何缩小 specgram 的输出并保持相同的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:33:15.583

你不能在 savefig() 上设置 dpi。我觉得

```
 savefig(filename, dpi=75) 
```

或周围的东西应该使它更易于管理。. .

[保存无花果](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.savefig)

# facebook - Asp.Net MVC3 与 facebook 聊天 api

> ID：11923032
> 
> 赞同：1
> 
> 时间：2012-08-12T14:40:30.063
> 
> 标签：facebook, asp.net-mvc-3, facebook-c#-sdk

如何使用应用程序 asp.net mvc3 向我的 facebook 朋友发送 facebook 聊天消息？

# java - java.awt.Robot.keyPress 在按下引号键时抛出 IllegalArgumentException

> ID：11923033
> 
> 赞同：2
> 
> 时间：2012-08-12T14:40:38.263
> 
> 标签：java, keyevent, awtrobot

当您尝试使用 Robot.keyPress 键入`"`（双引号）时，它会抛出 java.lang.IllegalArgumentException: Invalid key code。

我该如何解决或解决这个问题？

如果有帮助，我目前在 Windows 上。

测试代码：

```
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class Test {
    public static void main(String[] args) throws Exception {
        Robot robot = new Robot();
        try {
            robot.keyPress(KeyEvent.VK_QUOTEDBL);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

例外：

```
java.lang.IllegalArgumentException: Invalid key code
    at sun.awt.windows.WRobotPeer.keyPress(Native Method)
    at java.awt.Robot.keyPress(Robot.java:358) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T15:13:12.493

我认为您遇到错误是因为`"`键盘上没有键。 `"`几乎可以肯定会在键盘的一个键上，但它很可能会被转移。而不是尝试 'press' `"`，您应该 'press' Shift 和该键的 'base' 字符，即如果您自己键入该键，您会得到一个。

我发现在命令提示符下运行以下类给我留下了一个`"`字符：

```
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class Test {
    public static void main(String[] args) throws Exception {
        Robot robot = new Robot();
        try {
            robot.keyPress(KeyEvent.VK_SHIFT);
            robot.keyPress(KeyEvent.VK_2);
            robot.keyRelease(KeyEvent.VK_SHIFT);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

在英国键盘（我正在使用）上，`"`字符被移位`2`，这就是我使用`KeyEvent.VK_2`. 它可能在其他键盘上的其他地方——如果我没记错的话，它在美式键盘上是单引号。在这种情况下，您将使用`VK_QUOTE`而不是`VK_2`.

我还发现释放`VK_SHIFT`按键是必要的，以避免 Windows 认为 Shift 键仍被按住时出现的各种奇怪现象。

# jquery - jQuery 找不到父级

> ID：11923043
> 
> 赞同：1
> 
> 时间：2012-08-12T14:42:25.370
> 
> 标签：jquery, html

这就是我想要得到的：当您单击`#edit`jQuery 时，会在最近`tr`的 td 中找到调用`#collapse`，并将其内容替换为具有前一个`#collapse`html 值的输入。我在 jsFiddle 上试过但没有成功：http: [//jsfiddle.net/8PDdn/1/](http://jsfiddle.net/8PDdn/1/)

谁能帮我得到我想要得到的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:46:27.813

`preventDefault()`是`event`对象的方法之一而不是被选择的元素，你应该为`event`对象调用它，你也可以使用 `blur`输入的事件在编辑后修改div标签的内容：

```
$(function() {   
    $("a#edit").click(function(event) {
        event.preventDefault();
        var currentTodo = $("#collapse");
        var cVal = currentTodo.html();
        currentTodo.html('<input type="text" name="description" value="'+ cVal +'">');
    });

    $(document).on('blur', '#collapse input', function(){
        $(this).parent().html(this.value)
    })
}); 
```

[小提琴](http://jsfiddle.net/8PDdn/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:46:46.667

```
 $(this).preventDefault(); 
```

这不是您阻止默认事件的方式。您需要将事件传递给回调。

```
$(function() {

    $("a#edit").click(function(e) {
        $(e).preventDefault();
        var currentTodo = $(this).closest("tr").find("#collapse");
        var cVal = currentTodo.html();
        currentTodo.html('<input type="text" name="description" value="'+ cVal +'">');
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T14:50:08.303

这里有几件事是错误的：

1.  `id`应该是唯一的，您有许多具有相同 id 的元素，将其更改为 class。
2.  你的问题是由这个引起的：

    ```
    $("a#edit").click(function() {
        $(this).preventDefault(); ---> there is no preventDefault method on this
       ...
    }); 
    ```

您需要将其更改为：

```
$("a#edit").click(function(e) {
        $(e).preventDefault();
       ...
    }); 
```

# c - C 的 pow() 中参数的精度

> ID：11923048
> 
> 赞同：0
> 
> 时间：2012-08-12T14:42:38.733
> 
> 标签：c, precision, math.h

这是一个C代码；

```
#include<stdio.h>
#include<math.h>
int main()
{
    double n=10.0;
    double automatic = pow(10.0,log10(n)-log10(5.0));
    printf("%.9lf\n",log10(n)-log10(5.0));
    printf("%.9lf\n",pow(10.0,0.30102996));
    double manual = pow(10.0,0.30102996);
    printf("%.9lf %lf\n",automatic, floor(automatic));
    printf("%.9lf %lf\n",manual,floor(manual));
    return 0;
} 
```

输出是：

```
0.301029996
1.999999836
2.000000000 1.000000
1.999999836 1.000000 
```

从输出中我可以推断出在 pow(x,y) 中 y 被四舍五入为 6 位，因为它的签名是 pow(double x, double y) 所以 0.301029996 变为 0.301030 这就是为什么自动的值是 2.000000000 否则它将是和手册一样。

**我的问题：**

1.  我的推断正确吗？

2.  如果第一个问题的答案是正确的，那么我们如何绕过这个四舍五入来获得更准确的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:11:06.037

`pow`不四舍五入到 6 位数。它使用双精度，对于 IEEE 双精度是 52 位有效数字（大约 15 位小数）。在该精度下，它可能精确到最后一位数字，也可能不精确，但通常很接近。

以 10 为底的对数 2 的精确值接近`0.301029995663981195213738894724`（来源：[Wolfram Alpha](http://www.wolframalpha.com/input/?i=log+base+10+of+2)）。它是一个无理数，因此不能用任何数字系统（十进制或二进制）精确表示。

您的结果表明，`log10(n)-log10(5.0)`返回的值比精确的以 10 为底的对数 2 更接近`0.30102996`。您得到的原因`1.999999836`是，当您将其替换为`0.30102996`. 顺便说一句，这不是四舍五入的值 - 数一下 9。

您的调用`pow(10.0,log10(n)-log10(5.0))`返回的结果略小于`2`（如 所示`floor`），但足够接近，可以在 9 个位置四舍五入为 2。使用 double 类型不会比这更好。

所以我真的不知道你所说的“避免四舍五入”是什么意思。如果您不想使值不那么准确，请不要手动将其四舍五入到 9 位，并且在复制时当然不要遗漏任何数字;-)

# c# - 对如何使用 List 感到困惑 []

> ID：11923049
> 
> 赞同：0
> 
> 时间：2012-08-12T14:42:41.390
> 
> 标签：c#, mysql, arrays, listview

我正在按照[本指南学习如何使用 C# 访问 MySQL 数据库](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)

在这些代码中，它用于`List<string>[4]`存储 Selected 数据，因为它有 4 列

经过一些实验，我发现这些代码以如下格式存储数据：

```
//List[0] = Name1, Name2, Name3, ...

//List[1] = Age1, Age2, Age3, ...

//... 
```

我想**逐行**`ListView`访问数据并将其显示在

但如果我们使用`foreach`，它将**逐列列出数据**

```
foreach (List<string> entry in dataEntries){
    ListViewItem lvi = new ListViewItem(entry[0]); //refer to Name1 during first loop

    lvi.SubItems.Add(entry[1]); //Name2
    lvi.SubItems.Add(entry[2]); //Name3
    lvi.SubItems.Add(entry[3]); //and so on
    listView1.Items.Add(lvi);
} 
```

有没有办法逐行显示？或者有没有更简单的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:52:40.047

是的，这篇文章很糟糕。我把文章中的代码放在最后。这是我的做法：

注意：我像他一样把所有东西都变成了字符串，这似乎是错误的。另外，我没有测试，所以可能有错别字。

```
class DataItem 
{
   public string id { get; set; }
   public string name { get; set; }
   public string age { get; set; }
}

//Select statement
public List<DataITem> Select()
{
    string query = "SELECT * FROM tableinfo";

    //Create a list to store the result
    List<DataItem> list = new List<DateItem>();

    //Open connection
    if (this.OpenConnection())
    {
        //Create Command
        using (MySqlCommand cmd = new MySqlCommand(query, connection))
        {
           //Create a data reader and Execute the command
           using (MySqlDataReader dataReader = cmd.ExecuteReader())
           {

              //Read the data and store them in the list
              while (dataReader.Read())
              {
                 list.Add(new DataItem() { id = dataReader["id"] + "",
                                           name = dataReader["name"] + "",
                                           age = dataReader["age"] + "" });
              }
           }

        }

        this.CloseConnection();
    }

    return list;
} 
```

文章中的代码：

```
//Select statement
public List< string >[] Select()
{
    string query = "SELECT * FROM tableinfo";

    //Create a list to store the result
    List< string >[] list = new List< string >[3];
    list[0] = new List< string >();
    list[1] = new List< string >();
    list[2] = new List< string >();

    //Open connection
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["id"] + "");
            list[1].Add(dataReader["name"] + "");
            list[2].Add(dataReader["age"] + "");
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return list;
    }
    else
    {
        return list;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:59:27.073

教程的这一部分：

```
public List< string >[] Select()
{
    string query = "SELECT * FROM tableinfo";

    //Create a list to store the result
    List< string >[] list = new List< string >[3];
    list[0] = new List< string >();
    list[1] = new List< string >();
    list[2] = new List< string >();

    //Open connection
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["id"] + "");
            list[1].Add(dataReader["name"] + "");
            list[2].Add(dataReader["age"] + "");
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return list;
    }
    else
    {
        return list;
    }
} 
```

是你指的，我想。这不是存储结果的好方法，而且启动时编写得相当糟糕。你可以很容易地做到：

```
public List<object[]> Select() {
    string query = "SELECT * FROM tableinfo";

    // Create a list to store the result
    var result = new List<object[]>();

    // Open connection
    if (this.OpenConnection()) {
        // Create Command
        var cmd = new MySqlCommand(query, connection);
        // Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        // Read the data and store them in the list
        while(dataReader.Read()) {
            object[] items = new object[dataReader.FieldCount];
            dataReader.GetValues(items);
            result.Add(items);
        }

        // Close Data Reader
        dataReader.Close();

        // Close Connection
        this.CloseConnection();

        // Return list to be displayed
        return list;
    } else {
        // This is a bad thing.
        throw new ApplicationException("Could not connect to database.");
    }
} 
```

如果我正确地记得数据库访问，这就是你应该这样做的方式：

```
public DataSet Select() {
    if(!this.OpenConnection()) {
        throw new ApplicationException("Could not connect to database.");
    }

    using(var query = new MySqlDataAdapter("SELECT * FROM tableinfo", this.connection)) {
        var data = new DataSet();

        query.Fill(data);

        return data;
    }
} 
```

# c#-4.0 - Windows 服务处理时间问题

> ID：11923058
> 
> 赞同：0
> 
> 时间：2012-08-12T14:45:14.797
> 
> 标签：c#-4.0, windows-services

我有一个用 C# 4.0 编写的 Windows 服务，它使用 Microsoft Exchange WebServices(EWS) 来处理服务邮箱中的电子邮件。读取电子邮件并根据某些条件将一些数据插入到 oracle 数据库中。

Windows 服务计划每 5 分钟运行一次。我正在使用 Quartz.Net API 进行调度，每分钟触发设置为 5。

我有个问题。如果我现在启动服务并且它正在处理电子邮件并且需要超过 5 分钟，因为我们已经安排 i 每 5 分钟运行一次，会发生什么？

由于 5 分钟的时间表，是否会有两个进程运行旧的进程，而新的进程刚刚启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:06:30.967

*除非*作业类实现了`IStatefulJob`接口，否则Quartz 将同时运行作业触发器。这意味着除非您在您的作业类上实现该接口，否则触发器将相互重叠。

```
// implement the interface and all will be fine.
public class MyJob: IStatefulJob
{
   ....
} 
```

来源：http: [//quartznet.sourceforge.net/apidoc/1.0/html/topic142.html](http://quartznet.sourceforge.net/apidoc/1.0/html/topic142.html)

# javascript - 使用不带“a”的基于标记的平滑滚动脚本的解决方案

> ID：11923063
> 
> 赞同：0
> 
> 时间：2012-08-12T14:46:00.750
> 
> 标签：javascript

好的。所以，我正在结束一个开发。我已经实现了一个基于“a”标签的平滑滚动脚本。我没有时间编写另一个脚本，所以我正在寻找一个允许我使用我的脚本的解决方案，但将“a”标签替换为可以让我仅根据菜单使用此效果的东西。我试过用 get class 替换，但功能似乎死了，但也许我实现错了。

**下面是我正在使用的 JavaScript：**

```
/* Smooth scrolling
   Changes links that link to other parts of this page to scroll
   smoothly to those links rather than jump to them directly, which
   can be a little disorienting.

   sil, http://www.kryogenix.org/

   v1.0 2003-11-11
   v1.1 2005-06-16 wrap it up in an object
*/

var ss = {
  fixAllLinks: function() {
    // Get a list of all links in the page
    var allLinks = document.getElementsByTagName('a');
    // Walk through the list
    for (var i=0;i<allLinks.length;i++) {
      var lnk = allLinks[i];
      if ((lnk.href && lnk.href.indexOf('#') != -1) && 
          ( (lnk.pathname == location.pathname) ||
        ('/'+lnk.pathname == location.pathname) ) && 
          (lnk.search == location.search)) {
        // If the link is internal to the page (begins in #)
        // then attach the smoothScroll function as an onclick
        // event handler
        ss.addEvent(lnk,'click',ss.smoothScroll);
      }
    }
  },

  smoothScroll: function(e) {
    // This is an event handler; get the clicked on element,
    // in a cross-browser fashion
    if (window.event) {
      target = window.event.srcElement;
    } else if (e) {
      target = e.target;
    } else return;

    // Make sure that the target is an element, not a text node
    // within an element
    if (target.nodeName.toLowerCase() != 'a') {
      target = target.parentNode;
    }

    // Paranoia; check this is an A tag
    if (target.nodeName.toLowerCase() != 'a') return;

    // Find the <a name> tag corresponding to this href
    // First strip off the hash (first character)
    anchor = target.hash.substr(1);
    // Now loop all A tags until we find one with that name
    var allLinks = document.getElementsByTagName('a');
    var destinationLink = null;
    for (var i=0;i<allLinks.length;i++) {
      var lnk = allLinks[i];
      if (lnk.name && (lnk.name == anchor)) {
        destinationLink = lnk;
        break;
      }
    }
    if (!destinationLink) destinationLink = document.getElementById(anchor);

    // If we didn't find a destination, give up and let the browser do
    // its thing
    if (!destinationLink) return true;

    // Find the destination's position
    var destx = destinationLink.offsetLeft; 
    var desty = destinationLink.offsetTop;
    var thisNode = destinationLink;
    while (thisNode.offsetParent && 
          (thisNode.offsetParent != document.body)) {
      thisNode = thisNode.offsetParent;
      destx += thisNode.offsetLeft;
      desty += thisNode.offsetTop;
    }

    // Stop any current scrolling
    clearInterval(ss.INTERVAL);

    cypos = ss.getCurrentYPos();

    ss_stepsize = parseInt((desty-cypos)/ss.STEPS);
    ss.INTERVAL =
setInterval('ss.scrollWindow('+ss_stepsize+','+desty+',"'+anchor+'")',10);

    // And stop the actual click happening
    if (window.event) {
      window.event.cancelBubble = true;
      window.event.returnValue = false;
    }
    if (e && e.preventDefault && e.stopPropagation) {
      e.preventDefault();
      e.stopPropagation();
    }
  },

  scrollWindow: function(scramount,dest,anchor) {
    wascypos = ss.getCurrentYPos();
    isAbove = (wascypos < dest);
    window.scrollTo(0,wascypos + scramount);
    iscypos = ss.getCurrentYPos();
    isAboveNow = (iscypos < dest);
    if ((isAbove != isAboveNow) || (wascypos == iscypos)) {
      // if we've just scrolled past the destination, or
      // we haven't moved from the last scroll (i.e., we're at the
      // bottom of the page) then scroll exactly to the link
      window.scrollTo(0,dest);
      // cancel the repeating timer
      clearInterval(ss.INTERVAL);
      // and jump to the link directly so the URL's right
      location.hash = anchor;
    }
  },

  getCurrentYPos: function() {
    if (document.body && document.body.scrollTop)
      return document.body.scrollTop;
    if (document.documentElement && document.documentElement.scrollTop)
      return document.documentElement.scrollTop;
    if (window.pageYOffset)
      return window.pageYOffset;
    return 0;
  },

  addEvent: function(elm, evType, fn, useCapture) {
    // addEvent and removeEvent
    // cross-browser event handling for IE5+,  NS6 and Mozilla
    // By Scott Andrew
    if (elm.addEventListener){
      elm.addEventListener(evType, fn, useCapture);
      return true;
    } else if (elm.attachEvent){
      var r = elm.attachEvent("on"+evType, fn);
      return r;
    } else {
      alert("Handler could not be removed");
    }
  } 
}

ss.STEPS = 25;

ss.addEvent(window,"load",ss.fixAllLinks); 
```

注意：我尝试将“按标签获取”行替换为：“ `var allLinks = document.getElementsByClassName('mainnav')`;

相应加价的一个例子是；

```
<li class='mainnav'><a style="margin-left:3px;" href="#topReception" onMouseOver = "if (document.images) document.top.src= 'http://soniahsieh.com/dev/_images/top-hover.png';" onMouseOut = "if (document.images) document.top.src= 'http://soniahsieh.com/dev/_images/top.png';"><img src="/dev/_images/top.png" name="top" border=0></a></li> 
```

但是，脚本随着这个变化而死。我究竟做错了什么？

**更新，尝试 jQuery。**

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script>

    $("a.mainnav").each(function() {   // go through all links
    var href = $(this).attr("href");
    if (href.match(/^#/)) {   // if href starts with #
        $(this).click(function() {  // add a click event to it
            var name = $(this).attr("href").substring(1);  // get the anchor link

            // on click, scroll to the a with a name attribute matching the anchor
            $('html, body').animate({ scrollTop: $("a[name='" + name + "']").offset().top }, 1000);  
        });
    }
});

    </script> 
```

**相应的;**

```
<li class='mainnav'><a style="margin-left:3px;" name="topReception" href="#topReception" onMouseOver = "if (document.images) document.top.src= 'http://soniahsieh.com/dev/_images/top-hover.png';" onMouseOut = "if (document.images) document.top.src= '/dev/_images/top.png';"><img src="coolimage/top.png" border=0></a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:04:04.113

我知道 Javascript 库有时过于矫枉过正，但您可以使用 jQuery 更轻松地做到这一点，并避免自己处理所有跨浏览器问题：

```
<script type="text/javascript">
$(function() {

$("a").each(function() {   // go through all links
    var href = $(this).attr("href");
    if (href.match(/^#/)) {   // if href starts with #
        $(this).click(function() {  // add a click event to it
            var name = $(this).attr("href").substring(1);  // get the anchor link 

            // on click, scroll to the a with a name attribute matching the anchor
            $('html, body').animate({ scrollTop: $("a[name='" + name + "']").offset().top }, 1000);  
        });
    }
});

});
</script> 
```

# android - 在服务和活动之间传递包裹

> ID：11923068
> 
> 赞同：0
> 
> 时间：2012-08-12T14:46:42.120
> 
> 标签：android

在服务和活动之间传递大量数据时，我应该担心电池/CPU 消耗吗？假设我可以更加努力地避免不必要的消息传递，通过持有对数据的引用而不是要求服务再次广播它，这是更好的做法吗？我真的需要该应用程序对电池友好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:23:04.053

我无法说出在广播带有可打包额外内容的意图时发生的确切电池消耗，但我认为您不应该担心电池消耗。如果您的服务正在处理/更新有状态的数据，而相关活动需要这些更新的值，那么发送广播就是要走的路。如果数据没有变化，那么就没有必要不断地广播它，那只会浪费电池。更主要的电池消耗可能是您的服务内部发生的任何昂贵的操作。寻求优化服务中的工作比什么都重要，例如只更新需要更新的内容，并尽可能减少耗电量大的操作，如网络调用。

# c++ - 从字符串c ++中提取值

> ID：11923074
> 
> 赞同：1
> 
> 时间：2012-08-12T14:47:04.740
> 
> 标签：c++, string, ifstream

我有一个问题，我认为解决方案可能很简单，但我有点卡住了。我有某种配置文件，我试图在 C++ 中解析以获得一些重要的值。

它看起来像这样：

> **信息**大小=32 粗体=0 斜体=0 unicode=1 拉伸H=100 平滑=1 aa=1 填充=0,0,0,0
> **常用**行高=32 基数=27 比例尺W=1024 比例尺H=28 页=1 打包=0 alphaChnl=1
> **chars** count=74
> **char** id=32 x=837 y=15 width=3 height=1 xoffset=-1 yoffset=31 xadvance=8 page=0 chnl=15
> **char** id=33 x=802 y=0 width =4 height=19 xoffset=2 yoffset=8 xadvance=8 page=0 chnl=15
> **char** id=35 x=292 y=0 width=17 height=19 xoffset=0 yoffset=8 xadvance=16 page=0 chnl= 15
> **字符**id=37 x=177 y=0 宽度=19 高度=19 xoffset=-1 yoffset=8 xadvance=17 页面=0 chnl=15
> **字符**id=38 x=216 y=0 width=18 height=19 xoffset=0 yoffset=8 xadvance=18 page=0 chnl=15

Info、common 和 chars 是基本/全局值。每个 char 行都应保存在具有相似格式（x、y、height、offsetX、offsetY ...）的结构的数组（或向量）中

现在我已经尝试 getline() 例如逐行获取每一行，然后使用这些行创建一个 istringstream 以“搜索”这些行以获取我需要的值。值得注意的是，我不需要所有这些值，我需要一种方法来保存每行所需的值。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:54:07.130

Each line is prefixed by the type of object.
So your reader should read the first word off and then decide what object to read.

```
std::ifstream  file("data.txt");
std::string    type;
while(file >> type)
{
         if (type == "info")    { readInfo(file);}
    else if (type == "common")  { readCommon(file);}
    else if (type == "chars")   { readChars(file);}
    else if (type == "char")    { readChar(file);}
} 
```

For each type of object you need to define a structure to hold the data.

```
// char id=32 x=837 y=15 width=3 height=1 xoffset=-1 yoffset=31 xadvance=8 page=0 chnl=15
struct CharData
{
    int   id;
    int   x;
    int   y;
    int   width;
    int   height;
    int   xoffset;
    int   yoffset;
    int   xadvance;
    int   page;
    int   chnl;
}; 
```

Now you have to define a method to read the data. In C++ we use `operator>>` to read data from a stream.

```
std::istream& operator>>(std::istream& stream, CharData& data)
{
    // All the data is on one line.
    // So read the whole line (including the '\n')
    std::string        line;
    std::getline(stream, line);

    // convert the single line into a stream for parsing.
    // One line one object just makes it easier to handle errors this way.
    std::stringstream  linestream(line);

    // Assume the prefix type information has already been read (now looks like this)
    // id=32 x=837 y=15 width=3 height=1 xoffset=-1 yoffset=31 xadvance=8 page=0 chnl=15
    std::string   command;
    while(linestream >> command) // This reads one space separated command from the line.
    {
             if (command.substr(0,3) == "id=")        {data.id       = atoi(&command[3]);}
        else if (command.substr(0,2) == "x=")         {data.x        = atoi(&command[2]);}
        else if (command.substr(0,2) == "y=")         {data.y        = atoi(&command[2]);}
        else if (command.substr(0,6) == "width=")     {data.width    = atoi(&command[6]);}
        else if (command.substr(0,7) == "height=")    {data.height   = atoi(&command[7]);}
        else if (command.substr(0,8) == "xoffset=")   {data.xoffset  = atoi(&command[8]);}
        else if (command.substr(0,8) == "yoffset=")   {data.yoffset  = atoi(&command[8]);}
        else if (command.substr(0,9) == "xadvance=")  {data.xadvance = atoi(&command[9]);}
        else if (command.substr(0,5) == "page=")      {data.page     = atoi(&command[5]);}
        else if (command.substr(0,5) == "chnl=")      {data.chnl     = atoi(&command[5]);}
    }
    return stream;
} 
```

Repeat the processes for the other types you need to read. Then writting the read commands becomes simple:

```
std::vector<CharData>    charVector;
void readChar(std::istream& stream)
{
    CharData     data;
    stream >> data;               // read the object from the stream
                                  // This uses the `operator>>` we just defined above.

    charVector.push_back(data);   // put the data item into a vector.
} 
```

Repeat the processes for the other types.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:52:15.533

有

```
important_value=str_from_getline.find(what_to_find); 
```

important_value 是 size_t 并且具有您在 getline() 字符串中寻找的起点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:51:43.317

尝试使用 strtok 或 c++ 正则表达式库

# asp.net-mvc - EntityFramework 包未安装在项目上

> ID：11923077
> 
> 赞同：66
> 
> 时间：2012-08-12T14:47:25.550
> 
> 标签：asp.net-mvc, entity-framework, visual-studio, nuget-package

我无法将 EF 安装在我非常简单的名为“Match”的项目上（刚刚学习 MVC，迟到总比没有好）。这里的一般上下文是我创建了只有 2 个字段的 Model 类，现在我想更改 Model 类以拥有更多的字段/属性。我已经在 Model 类中进行了更改，现在正在尝试更新数据库以匹配。我正在尝试使用 EF 的 Update-Database 来做到这一点。

> PM> install-package EntityFramework 您正在从 Microsoft 下载 EntityFramework，其许可协议位于[http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409](http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409)。检查软件包是否有其他依赖项，这些依赖项可能附带他们自己的许可协议。您对包和依赖项的使用构成您接受他们的许可协议。如果您不接受许可协议，请从您的设备中删除相关组件。成功安装“EntityFramework 5.0.0”。成功将“EntityFramework 5.0.0”添加到 Match。
> 
> 键入“get-help EntityFramework”以查看所有可用的实体框架命令。
> 
> PM> Enable-Migrations Get-Package：找不到与参数名称“ProjectName”匹配的参数。在 C:\Users\Dave\Documents\Visual Studio 2010\Projects\Match\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:611 char:40 + $package = Get-Package -ProjectName <<<< $项目全名 | ?{ $_.Id -eq 'EntityFramework' } + CategoryInfo : InvalidArgument: (:) [Get-Package], ParameterBindingException + FullyQualifiedErrorId : NamedParameterNotFound,NuGet.PowerShell.Commands.GetPackageCommand
> 
> EntityFramework 包未安装在项目“Match”上。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-02-05T13:40:53.427

希望没有人像我一样愚蠢，但为了搜索者的利益：

此错误的一种可能性 - 在包管理器控制台中，有一个“默认项目”下拉菜单。如果设置不正确，您将得到 EntityFramework 包未安装在项目“x”上。将下拉列表更改为您的 EF 项目，一切都很好。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-05-14T16:24:33.753

就我而言，重新启动 Visual Studio 会有所帮助。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-08-24T04:56:30.967

只需将 NuGet 更新到 2.x。EF 5.0 需要它。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-05-19T16:09:04.197

我刚刚重新启动了 Visual Studio，它工作正常。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-11-21T09:33:18.573

就我而言，我有一个项目由于某种原因没有 Packages.config 文件。结果是我收到错误消息“项目 xxxx 上未安装 EntityFramework 包”。

要解决这个问题，只需添加一个 Packages.config 文件，然后“Install-Package EntityFramework”就可以工作了。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-08-04T00:22:04.173

在我的项目中，我分别在它们上安装了 EntityFramework。即使他们在每个项目上都有相同的版本号，它仍然不起作用。导致你得到同样的错误。

为了解决这个问题，我从所有项目中删除了 EntityFramework 并再次重新安装。

```
Get-Project -all | Uninstall-Package EntityFramework 
```

接下来，您只需重新安装它。

```
Get-Project -all | Install-Package EntityFramework 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-08T10:45:59.123

就我而言，我在我的项目中安装了 Microsoft.EntityFrameworkCore.Tools 包！问题已解决。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-01-19T15:01:26.440

我也有同样的问题。我已将 EFCore 添加到已安装 EF6 的项目中。因此使用 EF6 设置为 EFCore 时执行 add-migration xx 命令，我收到此错误。删除 EF6 并重新启动 Visual Studio 解决了我的问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-31T10:31:03.537

您必须将 EF 安装到您的项目中。您可以通过工具|管理 NuGet 包来执行此操作，在“已安装”下查看并单击“管理”。在那里，您将看到在您的项目中安装 EF 的选项。之后，一切都应该正常工作并且模型更改将成为可能。这可能需要相当长的时间（就我而言，确实如此！）。成功！彼得

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-03-07T06:28:38.297

打开包管理器控制台并从包管理器控制台的下拉列表中选择默认项目并在命令窗口中使用此命令安装实体框架。

```
install-Package Entityframework 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-11-08T00:17:36.490

我遇到过这个问题，只需安装**Microsoft.EntityFrameworkCore.Tools** nuget 包即可解决

该软件包将启用这些常用命令： Add-Migration Drop-Database Get-DbContext Get-Migration Remove-Migration Scaffold-DbContext Script-Migration Update-Database

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-27T06:46:59.183

尝试从项目的 Nuget 包管理器更新实体框架包，这解决了我的问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-05T17:52:36.847

在我的情况下，重新安装实体包并重新启动 Visual Studio。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-16T18:08:17.757

在我的情况下，packages.config 文件在磁​​盘上，但不在 TFS 中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-08T17:06:42.370

如果在 Visual Studio 解决方案中卸载了实体框架命令的目标项目（即，如果您之前在解决方案资源管理器中右键单击该项目并选择了“卸载项目”），则可能会发生此错误。

在这种情况下，解决方案是加载项目，然后再次尝试运行实体框架命令。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-05T15:43:11.393

如果您是第一次打开项目，应该可以工作，

第二次点击控制台项目和“设置为stratup项目”

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-17T14:19:28.440

安装 EntityFrameworkCore 安装 EntityFrameworkCore.SqlServer 然后关闭 Visual Studio 并重新打开问题已修复

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-07-16T21:19:02.687

您还可以在 VS 中清除缓存 NuGet。解决了我的问题

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-28T16:39:39.233

就我而言，我有一个包含三个项目的 Xamarin.Forms 解决方案 - 后端（用于 Azure 数据库连接）、一个公共库、一个 iOS 项目和一个 Android 项目。我收到的错误消息是*"The EntityFramework package is not installed on project ..."*和*"No context type was found in the assembly ..."*。我通过将后端设置为我的启动项目，然后在包管理器控制台中输入以下格式的命令来解决它：

```
Enable-Migrations -ProjectName Backend -Verbose 
```

在那之后

```
add-migration -ProjectName Backend Initial 
```

我希望这对某人有帮助:)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-10-01T13:37:28.007

此问题可能与 EntityFramework 和 EntityFrameworkCore 的两个版本冲突有关。为了检查它，你可以写：`Get-Module`在包管理器控制台中。如果您同时看到 EntityFramework 和 EntityFrameworkCore，则需要删除 EntityFramework 或在 EntityFramework 上链接的依赖项。对于搜索依赖项，您可以在解决方案资源管理器中使用搜索解决方案输入。删除依赖项或 EntityFramework 后，您需要重新启动项目。

# object - Pimcore 不能包含类，但路径/文件已到位

> ID：11923079
> 
> 赞同：0
> 
> 时间：2012-08-12T14:47:45.083
> 
> 标签：object, include-path, pimcore

当试图在 Pimcore CMS 的前端列出对象时，我遇到了这个问题。类目录*IS*在 include_path 中。类 php 脚本位于*website* /var/classes。但是 Zend 向我抛出了异常：

警告：include_once(Object/hotelAds/List.php)：无法打开流：第 145 行的 /var/www/html/pimcore/lib/Zend/Loader.php 中没有此类文件或目录

请告知为什么会发生这种情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:08:35.123

请阅读 OOP 并遵循命名约定，类名应始终以大写字母开头，这就是为什么 oop php 框架使用首字母大写的 ucfirst 函数。因为 Zend 是一个非常严格的类型框架，所以它让你学习良好的编程习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:56:52.970

像往常一样，我的问题太复杂了。所以让我自己回答。

Pimcore 有一个缺陷，需要纠正以防止混淆。当您像我一样命名一个类（例如hotelAds）时，它就会被创建。但是该类的目录将命名为 HotelAds (/website/var/classes/Object/HotelAds/)（总是从大写字母开始）。因此，当您尝试包含您命名的类以及您在后端（！！）中看到的类时 - 这是完全错误的，并且找不到文件。

当我通过“new Object_HotelAds_List()”（注意大写 H）更正问题时 - 文件已包含在内，但我相信这不会解决问题。由于在后端，该类被命名为“hotelAds”，因此如果您打开类 php 文件，那里也有“hotelAds”。所以这行不通。

我想 Pimcore 可能会按照自己的意愿命名文件，但是在解析类请求时，它必须在后端查找类名。

无论如何，在使用 pimcore 类时，您必须在后端以大写字母开头命名类，这是它工作的唯一方法。否则，您将失去大约 48 小时试图找出问题所在。对于 Pimcore 开发人员，我建议在使用小写字母命名类时至少发出警告。

# c++ - 为自定义类和库类实现通用接口的最佳方法

> ID：11923080
> 
> 赞同：0
> 
> 时间：2012-08-12T14:48:02.237
> 
> 标签：c++, interface, polymorphism

我有一个无法更改的库类和一个自定义类。我想在两者上使用运行时多态性，但我不能从库类继承，因为它被设计为叶类，也不能从它的远到一般的基类。实现作为库类和我的自定义类的“一种基类”的通用接口的最简单和最干净的方法是什么？有这样的设计模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:51:05.523

您可以使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:49:36.190

您最好的选择是将库类包装在包装类中。然后为包装类和您的自定义类创建一个通用接口。

或者，如果类型是静态已知的，您可以只使用模板鸭类型。

# python - python中带有html文件的string.format（）的问题

> ID：11923082
> 
> 赞同：1
> 
> 时间：2012-08-12T14:48:15.747
> 
> 标签：python, html, string

我有 hmtl 模板，并想在那里添加一些值。我打算使用具有以下规则的 sting.format 模块：

```
"Hello {name}! I am {years} years old".format(name = "Bob", years = "25"). 
```

所以我写了这样的测试

```
x = open(source_folder + "template.html", 'r')
  template = x.read()
  template.format(tester = "John")
  studio_html = open(studio_folder + "/" + studio_name + ".html", 'w')
  studio_html.write(template) 
```

文件的开头是：

```
 {tester}
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1  /DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta .... 
```

该文件的完整版本在这里 - [http://bit.ly/R4zxQ6](http://bit.ly/R4zxQ6)

我运行脚本，它给了我错误，告诉我 html 文件包含其他“{}”容器......你可以建议做些什么来避免这个问题？

最好的问候，萨沙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:59:44.383

不要使用`format`- 你最好使用用于 XML/HTML 的模板引擎（或者只是一般的文本替换） - 看看[http://wiki.python.org/moin/Templating](http://wiki.python.org/moin/Templating)

您可以使用正则表达式“自己动手”并选择不太可能出现在 HTML 中的分隔符 - 流行的是 {{ some_value }} - 但模板引擎会为您处理这个问题。

（一种轻量级的替代方法是在[http://docs.python.org/library/string.html#template-strings](http://docs.python.org/library/string.html#template-strings)使用 string.Template并更改分隔符）

`jinja2`很容易上手，但是“还有其他产品”！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:40:14.460

正如已经建议的那样，真正的模板模块将为您提供最佳的灵活性。但是，可以按照您最初的意图进行操作。为此，您可以转义不应用于字符串格式化的花括号。例如，您想修改它：

```
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
} 
```

像这样：

```
function MM_swapImgRestore() {{ //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}} 
```

当像这样加倍/转义时，format/vformat 方法将在解析时忽略它们。替换字段应该仍然只有一组大括号，例如`{tester}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-07T06:07:56.327

Python 字符串替换在这里应该有所帮助。

我不得不将月份和年份放在 html 中，但 .format 或 % 没有帮助，并且在尝试这些之后看到了问题，想通过使用 {{ 或 { 来转义 { 但 html 代码非常大并且有 500+ '{'人物。

因此，使用字符串“month_year”更新了 html，如下所示：

```
body = """<html>
.
.
.
<p>month_year</p>
.
.
.
</html>
""" 
```

body = body.replace('month_year',datetime.date.today().strftime("%B %Y"))

这对我有用

# php - 会话变量中的撇号

> ID：11923085
> 
> 赞同：-1
> 
> 时间：2012-08-12T14:48:35.970
> 
> 标签：php, session

我有一个选择框，用户可以在其中选择他们的城市/村庄。此选择框的输入来自包含所有名称的表。其中一些名称以撇号开头，当用户选择其中的一个时，名称的其余部分不会保存在会话变量中。我该如何解决这个问题？我实际上需要包括撇号在内的全名？谢谢！我的代码：

```
<select tabindex="18" name="plaatsnaam" style="padding:3px;width:235px;margin-left:10px">

<option value="kieseenplaats">Kies een plaats..</option>

<?php

$sqlplaats = "SELECT plaats FROM plaatsen";
$resultplaats = mysql_query($sqlplaats);

while ($rowplaats = mysql_fetch_array($resultplaats)) {

    if ($rowplaats['plaats'] == $_POST['plaatsnaam']){
    $select = "selected='selected'";
    }
    else
    {
    $select = "";
}

    echo "<option ".$select." value=' ".$rowplaats['plaats']." '>" . $rowplaats['plaats'] . "</option>";
}

?>

</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:51:59.180

始终正确编码您的输出。使用任意字符串和 HTML 作为标记语言，使用[htmlentities](http://php.net/htmlentities)。

```
echo "<option ".$select." value=' ".htmlentities($rowplaats['plaats'])." '>" . htmlentities($rowplaats['plaats']) . "</option>"; 
```

# vim - 添加一些标题行，vim会在打开文件时自动执行它？

> ID：11923086
> 
> 赞同：0
> 
> 时间：2012-08-12T14:48:37.613
> 
> 标签：vim

我以前记得我们可以在文件头部添加一些 vim cmd 行，它们会在 vim 打开文件时执行。
我试图添加这样的标题：

```
#vim map <F4> :close<CR> 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:08:13.943

您不能在文件头添加 vim cmd 行。如果你有

```
set modeline modelines=N 
```

其中 N>0 然后像这样的行

```
vim: tw=40 
```

在文件的开头/结尾处（从开头/结尾开始不超过 N 行）将*选项*tw (textwidth) 设置为 40。您可以以更完整的形式编写它：

```
vim: set textwidth=40 
```

，但它仍然只接受选项（`set`这里只是忽略）。它甚至不接受所有选项（其中一些在文档中被声明为“出于安全原因不能从模式行中设置”）。如果没有插件，您将无法在此处使用通用命令。请注意，如果您找到一个允许运行`:map`命令的命令，我建议您不要使用它：它非常不安全。我只看到那些允许在模式中做`:let`的事情。

顺便一提，

1.  为什么不把它放到 vimrc 中呢？
2.  `:close`可以`<C-w>c`在关闭模式下键入命令，这比将手移动到`<F4>`.
3.  不要`map`无缘无故地使用`nore`。Plain`map`让你在添加之前思考“我添加的新映射会破坏什么”。`*noremap`将使所有映射不受任何其他具有不同`{lhs}`.

# node.js - 填充时出现猫鼬错误（“模型”不是函数）

> ID：11923092
> 
> 赞同：4
> 
> 时间：2012-08-12T14:49:35.033
> 
> 标签：node.js, mongodb, mongoose

**编辑/回答：这在猫鼬> = 3.0中也可以正常工作**

我有一个看起来像这样的猫鼬模式：

```
mongoose = require 'mongoose'
ObjectId = mongoose.Schema.ObjectId

VehicleSchema = new mongoose.Schema
  make: String
  model: String
  year: Number
  body: String
  fuel: String
  transmission: String
  parts: [ { type: ObjectId, ref: 'Part' } ]

VehicleSchema.virtual('display_name').get ->
  return this.make + ' ' + this.model + ' ' + this.year

VehicleModel = mongoose.model 'Vehicle', VehicleSchema

module.exports =
  Schema: VehicleSchema
  Model: VehicleModel 
```

我像这样向车辆添加“零件”：

```
Vehicle.Model.findById id, (err, vehicle) ->
      unless err
        part = new Part.Model {
          ...details
        }
        part.save (err, doc) ->
          unless err
            vehicle.parts.push doc
            vehicle.save()
          else
            console.error err 
```

这似乎有效：

```
{ "_id" : ObjectId("5027bd4340b00b897a000002"), "body" : "car", "fuel" : "unleaded", "make" : "stackover", "model" : "modelname", "parts" : [ ObjectId("5027bd5140b00b897a000006") ], "transmission" : "manual", "year" : 21212 } 
```

但是当我尝试填充这些部分时：

```
Vehicle.Model
  .findById(vehicle_id)
  .populate('parts')
  .exec (err, doc) ->
    if err
      console.error err
    else
      console.error doc 
```

我收到一个错误：

```
TypeError: Property 'model' of object { parts: [] } is not a function at model.populate [as _populate] 
```

是什么赋予了？我有另一个模型/控制器组合，它几乎是这个完美工作的副本（我几乎找到/替换了名词，但它仍然中断，严重吓坏了！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:59:28.390

我认为“模型”这个名称很可能在内部使用，而 VehicleSchema 的定义正在破坏 mongoose 期望成为“字符串”类型的函数的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:15:02.930

`parts`架构中的定义看起来不正确。不`refs`应该`ref:`吗？

```
parts: [ { type: ObjectId, ref: "Part" } ] 
```

# c++ - 初始化矩阵

> ID：11923094
> 
> 赞同：3
> 
> 时间：2012-08-12T14:49:45.893
> 
> 标签：c++, opencv, matrix, element

我写了以下代码：

```
int _tmain(int argc, _TCHAR* argv[])
{

int vals[]={1,2,3,4,5,6,7,8,9};

CvMat mat = cvMat(3,3,CV_8UC1,vals);

for(int i=0;i<mat.rows;i++)
{
    int* ptr = (int*) (mat.data.ptr + i* mat.step);

    for(int j=0;j<mat.cols;j++)
    {
                printf("%d\t",*ptr++);

    }
    printf("\n");
}

return 0;
} 
```

我得到的输出是：

```
1              2               3
512            768             1024
196608         262144          327680 
```

矩阵未正确初始化。指针`ptr`指向每一行的开头并递增它给出相应列中的元素。我的假设正确吗？使用的 cvMat 构造函数或元素的访问方法是否有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:56:57.450

错误的。mat.data.ptr 用于来自 [http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html的无符号字符](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html)

```
uchar*  ptr;     // data pointer for an unsigned char matrix 
```

你应该使用

```
mat.data.i 
```

对于整数

您正确初始化矩阵但由于使用了错误的数据结构指针而将其打印错误。

```
CvMat                      // 2D array
  |-- int   type;          // elements type (uchar,short,int,float,double) and flags
  |-- int   step;          // full row length in bytes
  |-- int   rows, cols;    // dimensions
  |-- int   height, width; // alternative dimensions reference
  |-- union data;
      |-- uchar*  ptr;     // data pointer for an unsigned char matrix
      |-- short*  s;       // data pointer for a short matrix
      |-- int*    i;       // data pointer for an integer matrix
      |-- float*  fl;      // data pointer for a float matrix
      |-- double* db;      // data pointer for a double matrix 
```

看？这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:15:44.140

你为什么不使用`cv::Mat`类？

它有一些方便的功能可以更好地处理内存。

为了在您的情况下声明和初始化`cv::Mat`，代码将如下所示：

```
int main()
{
   int vals[] = {1,2,3,4,5,6,7,8,9};

    Mat mat = cv::Mat(3, 3, CV_8UC1, vals).clone();

    for(int i = 0; i < mat.rows; i++)
    {
        for(int j = 0; j < mat.cols; j++)
        {
             cout << mat.at<uchar>(j,i) << " ";
        }
        cout << endl;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T19:27:39.563

除了错误的用法（由 huseyin tugrul buyukisik 解释）你的错误是你在创建矩阵时使用了错误的类型

```
int vals[] = {1,2,3,4,5,6,7,8,9};
CvMat mat = cvMat(3,3,CV_8UC1,vals); // WRONG TYPE! 
```

创建矩阵时，您应该使用 CV_32SC1（用于有符号整数）。

此外，当您访问矩阵时，您应该使用`mat.ptr<int>(row)`. 完整示例：

```
int vals[] = {1,2,3,4,5,6,7,8,9};

// Fill matrix content without allocating new memory 
// Beware: changing the content of vals changes the content of mat and vice versa
// Use correct type CV_32SC1 or let OpenCV find the correct one by using
// CV_MAKETYPE(cv::DataDepth<int>::value, 1) instead
cv::Mat mat = cv::Mat(3, 3, CV_32SC1, vals);  

// Print content
for(int row = 0; row < mat.rows; row++)
{
    int* rowPtr = mat.ptr<int>(row);

    for(int col = 0; col < mat.cols; col++)
        std::cout << rowPtr[col] << " ";

    std::cout << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T06:36:14.607

您的代码存在一些奇怪的问题。不幸的是，tuğrul büyükışık 的回答只对了一半。看看这些行：

```
// you reserve 9 integers on the stack (9*4=36bytes)
int vals[]={1,2,3,4,5,6,7,8,9}; 

// declare a matrix of uchars. 3*3*1 byte = 9 bytes
// Now, the matrix thinks it has only 9 bytes allocated.
CvMat mat = cvMat(3,3,CV_8UC1,vals); 

// Now you read the values from the matrix. 
// You actually access all the 36 bytes, but if they weren't wrongly allocated 
// at first, you would have a out-of-bounds access. 
for(int i=0;i<mat.rows;i++)
{
    int* ptr = (int*) (mat.data.ptr + i* mat.step);
} 
```

**您必须将所有数据转换为相同的格式**：int（4 字节）或 uchar（1 字节）

```
int vals[]={1,2,3,4,5,6,7,8,9}; 
CvMat mat = cvMat(3,3,CV_32SC1,vals); // 32SC1 means signed integer, 32 bits 
```

**或者**

```
unsigned char vals[]={1,2,3,4,5,6,7,8,9};
CvMat mat = cvMat(3,3,CV_8UC1,vals); // 8UC1 means unsigned char, 8 bits 
```

# codeigniter - Codeigniter：将值从 jquery 传递到控制器

> ID：11923099
> 
> 赞同：0
> 
> 时间：2012-08-12T14:50:04.283
> 
> 标签：codeigniter

我决定将我的问题分成几部分，以便更容易理解：

第一个问题是：

我有相互依赖的选择列表，所以我将使用 jquery

我有这个片段可以让我获得所选选项的 id：

```
 //jquery code for source list
    $(document).ready(function(){
    $('#f_state').change(function() {
      if ($(this).val()!='') {
        $("#f_city").load("./controller/control_form.php",{pais_id: $(this).val()});
      }
    // or should I use something like this instead..

var post_url = "./controllers/control_form/" + $(this).val();

but still dont know how to fetch at the controller
        });

    }); 
```

但是..我实际上如何将它发送到控制器？还是从其他角度？如何从控制器中检索它？我已经在 CI 场景中完成了它，但是在 codeigniter 中......不知道。

问题是，如果我设法在控制器上抓取它，我可以将该索引传递给模型。该模型将执行 sql 查询并将一个数组返回给控制器，然后我将从那里将其打印回视图以填充第二个下拉列表。

谢谢你

问候

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:20:03.087

在您`.load()`中，您已经将数据变量传递给函数，这是要传递给服务器的数据。[阅读文档](http://api.jquery.com/load/)

> 如果数据作为对象提供，则使用 POST 方法；否则，假定为 GET。

由于您正在传递一个对象，因此所需要做的就是从 Codeigniter 内部获取 POST 数据。您可以在标题**使用 POST、COOKIE 或 SERVER 数据部分**[的输入类文档](http://codeigniter.com/user_guide/libraries/input.html)中阅读此内容。但基本上你现在可以

 **```
$pais_id = $this->input->post('pais_id', TRUE); 
```**

# python - 如何将 numpy 子矩阵视图数组 d 公式化为 1D 矩阵而不是 2D

> ID：11923101
> 
> 赞同：3
> 
> 时间：2012-08-12T14:50:14.270
> 
> 标签：python, arrays, numpy

这是使用 numpy。这里有一些有趣的东西接近需要的东西；对子矩阵视图 d 的更新可以更新后备矩阵 a：

```
a = array([[0, 0, 0, 0, 0],
[0, 0, 1, 0, 0],
[0, 1, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]])

print a

array([[0, 0, 0, 0, 0],
[0, 0, 1, 0, 0],
[0, 1, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]])

d = a[1:4,1:4]

print d

array([[0, 1, 0],
[1, 0, 0],
[0, 0, 0]])

d[1,1]=9

print a

array([[0, 0, 0, 0, 0],
[0, 0, 1, 0, 0],
[0, 1, 9, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]]) 
```

太好了，9 出现在支持数组 a 中，正如我所希望的那样。

好的，问题来了——现在如果需要，将一个 numpy 子矩阵视图数组 d 或 d 的某个视图 dd 公式化为一维矩阵而不是二维矩阵，你怎么做？以下无法做到这一点。

```
dd = d.reshape(9)

print dd

array([0, 1, 0, 1, 9, 0, 0, 0, 0])

dd[7]=7

print dd

array([0, 1, 0, 1, 9, 0, 0, 7, 0])

print a

array([[0, 0, 0, 0, 0],
[0, 0, 1, 0, 0],
[0, 1, 9, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]]) 
```

我曾希望看到 7 出现在支持数组 a 中。请注意，没有要求将 d 子矩阵视图限制为 2D - 如果存在这样的事情，则 d 子矩阵视图的一维定义首先将是一个完美的公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:13:36.003

如果您尝试创建视图，则应分配给`.shape`属性而不是调用`.reshape`. [如果您阅读numpy.reshape](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)的注释部分，您会发现在不复制的情况下创建数组视图并不总是可能的。观察当我运行你的代码时会发生什么`.shape`：

```
>>> import numpy as np
>>> a = np.array([[0, 0, 0, 0, 0],
... [0, 0, 1, 0, 0],
... [0, 1, 0, 0, 0],
... [0, 0, 0, 0, 0],
... [0, 0, 0, 0, 0]])
>>> d = a[1:4,1:4]
>>> d.shape
>>> d.shape = (9,)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: incompatible shape for a non-contiguous array 
```

这不起作用的原因是您创建的视图切片不连续。如果 numpy 无法在其底层存储机制中有效地维护给定数据，则该`.reshape`函数会创建一个副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T16:26:34.247

我想你可能会发现这个[`flat`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flat.html)方法很有用。正如[jterrace](https://stackoverflow.com/a/11923268/577088)已经指出的那样，`d`使用的内存不是连续的，因此`d`不能以通常的方式进行重塑。但是，该`flat`方法不返回数组——它返回一个[`numpy.flatiter`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.flatiter.html#numpy.flatiter)对象，有点像 python 迭代器，但允许索引访问和赋值，就像常规数组一样。

```
>>> d = a[1:4,1:4]
>>> dd = d.flat
>>> dd[7] = 7
>>> a
array([[0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0],
       [0, 1, 0, 0, 0],
       [0, 0, 7, 0, 0],
       [0, 0, 0, 0, 0]]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T15:29:54.067

您遇到的问题是`dd = d.reshape(9)`- 正在创建 的*副本*，`d`而不是重新塑造的*视图*`d`

尝试：

```
d = a[1:4, 1:4] # updates reflected in a
d[1, 1] = 9     # updates reflected in a
d.itemset(7, 7) # 7th element regardless of dimensions
# or for multiple updates
np.put(d, [7, 3], [7, 9999]) 
print a 
```

# graphviz - GraphViz 布局提示需要

> ID：11923105
> 
> 赞同：2
> 
> 时间：2012-08-12T14:50:23.217
> 
> 标签：graphviz

我有一个由 3 种类型的边组成的 UMLish 图。组成、协会和专业化。我希望图表根据组合和专业化边缘分层布局，但我主要关心的是我希望它是可读的。我在布局中遇到的问题是重叠的边缘使得无法跟随边缘并理解图形。

是否有任何设置可以产生更好的布局？我使用 splines=ortho 得到了一些改进的结果，但该设置似乎导致 dot 在 OSX 上崩溃。

这是我的图表：

```
 digraph G{
    label="reference"
    node [
        fontname = "Bitstream Vera Sans" 
        fontsize = 8 
        shape = "record" 
    ]
    Node_84 [
        label = "{Node_84|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\l}"
    ]

    Node_82 [
        label = "{Node_82|A\lB\lC\lD\l}"
    ]

    Node_21 [
        label = "{Node_21|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\l}"
    ]

    Node_74 [
        label = "{Node_74|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_59 [
        label = "{Node_59|A\lB\lC\l}"
    ]

    Node_8 [
        label = "{Node_8|A\lB\lC\lD\lE\lF\lG\l}"
    ]

    Node_58 [
        label = "{Node_58|A\l}"
    ]

    Node_30 [
        label = "{Node_30|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\l}"
    ]

    Node_4 [
        label = "{Node_4|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\l}"
    ]

    Node_53 [
        label = "{Node_53|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\l}"
    ]

    Node_48 [
        label = "{Node_48|A\lB\lC\lD\lE\lF\lG\lH\lI\l}"
    ]

    Node_56 [
        label = "{Node_56|A\lB\lC\lD\lE\l}"
    ]

    Node_80 [
        label = "{Node_80|A\l}"
    ]

    Node_65 [
        label = "{Node_65|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_50 [
        label = "{Node_50|A\lB\lC\lD\lE\lF\lG\lH\lI\l}"
    ]

    Node_32 [
        label = "{Node_32|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\l}"
    ]

    Node_55 [
        label = "{Node_55|A\lB\l}"
    ]

    Node_96 [
        label = "{Node_96|A\lB\lC\lD\l}"
    ]

    Node_83 [
        label = "{Node_83|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\l}"
    ]

    Node_57 [
        label = "{Node_57|A\lB\lC\lD\l}"
    ]

    Node_86 [
        label = "{Node_86|A\lB\lC\l}"
    ]

    Node_73 [
        label = "{Node_73|A\lB\lC\lD\lE\lF\lG\lH\lI\l}"
    ]

    Node_12 [
        label = "{Node_12|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_69 [
        label = "{Node_69|A\lB\lC\l}"
    ]

    Node_1 [
        label = "{Node_1|A\l}"
    ]

    Node_64 [
        label = "{Node_64|A\lB\lC\lD\lE\lF\l}"
    ]

    Node_61 [
        label = "{Node_61|A\lB\lC\lD\lE\l}"
    ]

    Node_17 [
        label = "{Node_17|A\lB\lC\lD\lE\l}"
    ]

    Node_6 [
        label = "{Node_6|A\lB\lC\lD\lE\l}"
    ]

    Node_3 [
        label = "{Node_3|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\l}"
    ]

    Node_42 [
        label = "{Node_42|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\l}"
    ]

    Node_45 [
        label = "{Node_45|A\lB\lC\lD\l}"
    ]

    Node_19 [
        label = "{Node_19|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\l}"
    ]

    Node_63 [
        label = "{Node_63|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\l}"
    ]

    Node_7 [
        label = "{Node_7|}"
    ]

    Node_91 [
        label = "{Node_91|A\lB\lC\lD\lE\lF\lG\l}"
    ]

    Node_76 [
        label = "{Node_76|A\l}"
    ]

    Node_34 [
        label = "{Node_34|A\lB\lC\lD\lE\lF\lG\lH\l}"
    ]

    Node_62 [
        label = "{Node_62|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_46 [
        label = "{Node_46|A\lB\lC\lD\lE\lF\lG\l}"
    ]

    Node_11 [
        label = "{Node_11|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_26 [
        label = "{Node_26|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\l}"
    ]

    Node_54 [
        label = "{Node_54|A\lB\lC\lD\lE\lF\lG\lH\lI\l}"
    ]

    Node_94 [
        label = "{Node_94|A\l}"
    ]

    Node_51 [
        label = "{Node_51|A\l}"
    ]

    Node_44 [
        label = "{Node_44|A\lB\lC\lD\lE\l}"
    ]

    Node_70 [
        label = "{Node_70|A\lB\lC\lD\lE\lF\lG\lH\l}"
    ]

    Node_18 [
        label = "{Node_18|A\lB\lC\l}"
    ]

    Node_41 [
        label = "{Node_41|A\lB\lC\lD\lE\lF\lG\lH\lI\l}"
    ]

    Node_72 [
        label = "{Node_72|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_67 [
        label = "{Node_67|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_92 [
        label = "{Node_92|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\l}"
    ]

    Node_14 [
        label = "{Node_14|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_85 [
        label = "{Node_85|A\lB\l}"
    ]

    Node_15 [
        label = "{Node_15|A\lB\l}"
    ]

    Node_79 [
        label = "{Node_79|A\lB\lC\l}"
    ]

    Node_49 [
        label = "{Node_49|}"
    ]

    Node_10 [
        label = "{Node_10|A\lB\l}"
    ]

    Node_0 [
        label = "{Node_0|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\l}"
    ]

    Node_13 [
        label = "{Node_13|A\lB\l}"
    ]

    Node_2 [
        label = "{Node_2|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\l}"
    ]

    Node_88 [
        label = "{Node_88|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_52 [
        label = "{Node_52|A\lB\lC\lD\lE\lF\lG\l}"
    ]

    Node_23 [
        label = "{Node_23|A\lB\lC\lD\lE\l}"
    ]

    Node_39 [
        label = "{Node_39|A\lB\l}"
    ]

    Node_87 [
        label = "{Node_87|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\l}"
    ]

    Node_93 [
        label = "{Node_93|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\l}"
    ]

    Node_20 [
        label = "{Node_20|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\l}"
    ]

    Node_35 [
        label = "{Node_35|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_66 [
        label = "{Node_66|A\lB\lC\lD\lE\l}"
    ]

    Node_5 [
        label = "{Node_5|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\l}"
    ]

    Node_71 [
        label = "{Node_71|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\l}"
    ]

    Node_22 [
        label = "{Node_22|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\l}"
    ]

    Node_27 [
        label = "{Node_27|A\l}"
    ]

    Node_33 [
        label = "{Node_33|A\lB\lC\lD\lE\lF\lG\lH\l}"
    ]

    Node_24 [
        label = "{Node_24|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\l}"
    ]

    Node_16 [
        label = "{Node_16|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\lY\lZ\l}"
    ]

    Node_75 [
        label = "{Node_75|A\l}"
    ]

    Node_38 [
        label = "{Node_38|A\lB\lC\lD\l}"
    ]

    Node_43 [
        label = "{Node_43|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\lX\l}"
    ]

    Node_78 [
        label = "{Node_78|A\lB\lC\lD\lE\lF\l}"
    ]

    Node_68 [
        label = "{Node_68|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\l}"
    ]

    Node_89 [
        label = "{Node_89|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\l}"
    ]

    Node_29 [
        label = "{Node_29|A\lB\lC\lD\lE\lF\lG\lH\l}"
    ]

    Node_60 [
        label = "{Node_60|A\l}"
    ]

    Node_90 [
        label = "{Node_90|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\l}"
    ]

    Node_31 [
        label = "{Node_31|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\l}"
    ]

    Node_28 [
        label = "{Node_28|A\lB\lC\l}"
    ]

    Node_81 [
        label = "{Node_81|A\lB\lC\lD\lE\l}"
    ]

    Node_37 [
        label = "{Node_37|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\l}"
    ]

    Node_95 [
        label = "{Node_95|A\lB\lC\lD\lE\l}"
    ]

    Node_9 [
        label = "{Node_9|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\lL\lM\lN\lO\lP\lQ\lR\lS\lT\lU\lV\lW\l}"
    ]

    Node_47 [
        label = "{Node_47|A\l}"
    ]

    Node_40 [
        label = "{Node_40|A\lB\lC\lD\lE\lF\lG\lH\lI\lJ\lK\l}"
    ]

    Node_25 [
        label = "{Node_25|A\lB\l}"
    ]

    Node_36 [
        label = "{Node_36|A\lB\lC\l}"
    ]

    edge [
        dir="both"
        arrowtail="diamond"
        arrowhead="open"
    ]

    Node_84 -> Node_85[taillabel="*"]
    Node_84 -> Node_86[taillabel="*"]
    Node_74 -> Node_60[taillabel="*"]
    Node_48 -> Node_72[taillabel="*"]
    Node_65 -> Node_58[taillabel="*"]
    Node_50 -> Node_51[taillabel="*"]
    Node_83 -> Node_9[taillabel="*"]
    Node_83 -> Node_12[taillabel="*"]
    Node_83 -> Node_14[taillabel="*"]
    Node_83 -> Node_54[taillabel="*"]
    Node_83 -> Node_78[taillabel="*"]
    Node_83 -> Node_79[taillabel="*"]
    Node_83 -> Node_80[taillabel="*"]
    Node_83 -> Node_81[taillabel="*"]
    Node_83 -> Node_82[taillabel="*"]
    Node_12 -> Node_13[taillabel="*"]
    Node_17 -> Node_18[taillabel="*"]
    Node_3 -> Node_4[taillabel="*"]
    Node_3 -> Node_5[taillabel="*"]
    Node_42 -> Node_32[taillabel="*"]
    Node_19 -> Node_41[taillabel="*"]
    Node_91 -> Node_1[taillabel="*"]
    Node_11 -> Node_42[taillabel="*"]
    Node_54 -> Node_55[taillabel="*"]
    Node_70 -> Node_38[taillabel="*"]
    Node_70 -> Node_71[taillabel="*"]
    Node_72 -> Node_0[taillabel="*"]
    Node_72 -> Node_3[taillabel="*"]
    Node_72 -> Node_4[taillabel="*"]
    Node_72 -> Node_5[taillabel="*"]
    Node_72 -> Node_11[taillabel="*"]
    Node_72 -> Node_17[taillabel="*"]
    Node_72 -> Node_19[taillabel="*"]
    Node_72 -> Node_21[taillabel="*"]
    Node_72 -> Node_22[taillabel="*"]
    Node_72 -> Node_31[taillabel="*"]
    Node_72 -> Node_35[taillabel="*"]
    Node_72 -> Node_38[taillabel="*"]
    Node_72 -> Node_39[taillabel="*"]
    Node_72 -> Node_47[taillabel="*"]
    Node_72 -> Node_48[taillabel="*"]
    Node_72 -> Node_50[taillabel="*"]
    Node_72 -> Node_56[taillabel="*"]
    Node_72 -> Node_57[taillabel="*"]
    Node_72 -> Node_61[taillabel="*"]
    Node_72 -> Node_64[taillabel="*"]
    Node_72 -> Node_66[taillabel="*"]
    Node_72 -> Node_68[taillabel="*"]
    Node_72 -> Node_69[taillabel="*"]
    Node_72 -> Node_70[taillabel="*"]
    Node_72 -> Node_72[taillabel="*"]
    Node_72 -> Node_73[taillabel="*"]
    Node_72 -> Node_75[taillabel="*"]
    Node_72 -> Node_76[taillabel="*"]
    Node_72 -> Node_37[taillabel="*"]
    Node_72 -> Node_87[taillabel="*"]
    Node_72 -> Node_89[taillabel="*"]
    Node_72 -> Node_91[taillabel="*"]
    Node_72 -> Node_93[taillabel="*"]
    Node_72 -> Node_94[taillabel="*"]
    Node_72 -> Node_95[taillabel="*"]
    Node_67 -> Node_59[taillabel="*"]
    Node_14 -> Node_15[taillabel="*"]
    Node_35 -> Node_0[taillabel="*"]
    Node_35 -> Node_3[taillabel="*"]
    Node_35 -> Node_11[taillabel="*"]
    Node_35 -> Node_19[taillabel="*"]
    Node_35 -> Node_73[taillabel="*"]
    Node_35 -> Node_87[taillabel="*"]
    Node_35 -> Node_89[taillabel="*"]
    Node_5 -> Node_92[taillabel="*"]
    Node_5 -> Node_6[taillabel="*"]
    Node_5 -> Node_8[taillabel="*"]
    Node_71 -> Node_2[taillabel="*"]
    Node_71 -> Node_20[taillabel="*"]
    Node_71 -> Node_33[taillabel="*"]
    Node_71 -> Node_34[taillabel="*"]
    Node_71 -> Node_40[taillabel="*"]
    Node_71 -> Node_52[taillabel="*"]
    Node_71 -> Node_53[taillabel="*"]
    Node_71 -> Node_90[taillabel="*"]
    Node_22 -> Node_23[taillabel="*"]
    Node_22 -> Node_24[taillabel="*"]
    Node_22 -> Node_25[taillabel="*"]
    Node_22 -> Node_26[taillabel="*"]
    Node_22 -> Node_27[taillabel="*"]
    Node_22 -> Node_28[taillabel="*"]
    Node_22 -> Node_29[taillabel="*"]
    Node_22 -> Node_30[taillabel="*"]
    Node_43 -> Node_44[taillabel="*"]
    Node_43 -> Node_45[taillabel="*"]
    Node_43 -> Node_46[taillabel="*"]
    Node_68 -> Node_21[taillabel="*"]
    Node_68 -> Node_38[taillabel="*"]
    Node_68 -> Node_57[taillabel="*"]
    Node_68 -> Node_64[taillabel="*"]
    Node_68 -> Node_69[taillabel="*"]
    Node_68 -> Node_70[taillabel="*"]
    Node_89 -> Node_41[taillabel="*"]
    Node_31 -> Node_3[taillabel="*"]
    Node_31 -> Node_39[taillabel="*"]
    Node_37 -> Node_36[taillabel="*"]
    Node_37 -> Node_43[taillabel="*"]
    Node_37 -> Node_7[taillabel="*"]
    Node_95 -> Node_96[taillabel="*"]
    Node_9 -> Node_10[taillabel="*"]

    edge [
        dir="both"
        arrowtail="onormal"
        arrowhead="none"
    ]

    Node_37 -> Node_84
    Node_7 -> Node_21
    Node_7 -> Node_74
    Node_49 -> Node_48
    Node_7 -> Node_65
    Node_7 -> Node_83
    Node_7 -> Node_6
    Node_7 -> Node_63
    Node_7 -> Node_62
    Node_7 -> Node_67
    Node_7 -> Node_88
    Node_7 -> Node_16
    Node_37 -> Node_36

    edge [
        dir="both"
        arrowtail="none"
        arrowhead="none"
        constraint=false
        color="blue"
    ]

    Node_84 -> Node_56[taillabel="*"]
    Node_21 -> Node_6[taillabel="*"]
    Node_21 -> Node_61[taillabel="*"]
    Node_21 -> Node_63[taillabel="*"]
    Node_53 -> Node_71[taillabel="*"]
    Node_48 -> Node_41[taillabel="*"]
    Node_65 -> Node_66[taillabel="*"]
    Node_50 -> Node_56[taillabel="*"]
    Node_6 -> Node_5[taillabel="*"]
    Node_6 -> Node_61[taillabel="*"]
    Node_6 -> Node_71[taillabel="*"]
    Node_63 -> Node_38[taillabel="*"]
    Node_63 -> Node_91[taillabel="*"]
    Node_34 -> Node_71[taillabel="*"]
    Node_72 -> Node_37[taillabel="?"]
    Node_72 -> Node_76[taillabel="*"]
    Node_2 -> Node_71[taillabel="*"]
    Node_52 -> Node_71[taillabel="*"]
    Node_20 -> Node_71[taillabel="*"]
    Node_71 -> Node_38[taillabel="*"]
    Node_71 -> Node_70[taillabel="*"]
    Node_33 -> Node_71[taillabel="*"]
    Node_90 -> Node_71[taillabel="*"]
    Node_37 -> Node_17[taillabel="*"]
    Node_37 -> Node_41[taillabel="*"]
    Node_37 -> Node_47[taillabel="*"]
    Node_37 -> Node_50[taillabel="*"]
    Node_37 -> Node_73[taillabel="*"]
    Node_37 -> Node_94[taillabel="*"]
    Node_40 -> Node_71[taillabel="*"]
} 
```

![图形](../Images/f5af83bc9a272f040d482694e8edbe9c.png)

# javascript - Javascript 2d 矩阵迭代替代/优化？

> ID：11923106
> 
> 赞同：1
> 
> 时间：2012-08-12T14:50:29.650
> 
> 标签：javascript, arrays, canvas, matrix

所以我用javascript和canvas创建了一个沙子模拟。

我的第一个方法是用一个和值`array`填充。每个物体代表一粒沙子。`objects``x``y`

这种方法在大画布上有效，但在约 600 粒后开始放慢速度。

我的下一个方法是一个二维矩阵，其中每个`index`都是`0`或`1`。它在`200 x 200`画布上工作正常，但随着画布大小的增加，它变得太慢了。

..这是合理的，因为`800 x 600`例如画布的长度为`480k`.

**所以我的问题是，如何优化这样的事情？**

如果需要，这里有一些代码：

```
var draw = function() {

    if (MOUSE_DOWN) { cast_grains(); }

    for (var i = matrix.length; i > 0; i--) {
        if (matrix[i] == "1") {

            var x = i % canvas.width;
            var y = Math.floor(i / canvas.width);

            bfr.fillStyle = "#000";
            bfr.fillRect(x, y, 1, 1);

            /* ... movement calculation ... */

            bfr.fillStyle = "rgb(255, 255, 200)";
            bfr.fillRect(x, y, 1, 1);
        }
    }

    ctx.drawImage(buffer, 0, 0);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:27:34.323

您基本上需要使用不同的数据结构。我创建了类似的东西（[康威生命游戏的 MMO 版本](http://life.jit.su/)），它使用一块大小的板`2 ^ 106`（如果我没记错的话，它是近 80 万亿个细胞）。

诀窍是只存储活细胞的坐标（以向量的形式）。由于活细胞的数量远远少于死细胞的数量，因此您最终使用的空间非常小。

由于您将沙粒存储为坐标向量，因此您还具有不需要计算`x`和在循环中的优势。`y`你的函数看起来像：

```
var draw = function() {

    if (MOUSE_DOWN) { cast_grains(); }

    for (var i = grains.length - 1; i >= 0; i--) {
        var x = grains[i][0];
        var y = grains[i][1];

        bfr.fillStyle = "#000";
        bfr.fillRect(x, y, 1, 1);

        /* ... movement calculation ... */

        bfr.fillStyle = "rgb(255, 255, 200)";
        bfr.fillRect(x, y, 1, 1);
    }

    ctx.drawImage(buffer, 0, 0);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:42:26.297

首先，我会使用 Chrome 的开发者工具来分析您的应用程序并找出您的瓶颈所在。

如果碰撞检测算法随着对象数量的增加而减慢修复速度，您可以实现四叉树以减少比较次数。有关 javascript 实现，请参见[此处](http://www.mikechambers.com/blog/2011/03/21/javascript-quadtree-implementation/)。

# cassandra - 内存表和键缓存混淆

> ID：11923113
> 
> 赞同：3
> 
> 时间：2012-08-12T14:51:49.490
> 
> 标签：cassandra, hector, cql

我正在使用带有默认 Cassandra 缓存设置的 Hector 从 CF 读取行。这意味着密钥缓存已打开。我正在使用 jconsole 来监视键缓存命中。

但即使在读取单行（通过主键）100 次后，缓存命中率也不会增加。该行最近已更新。

因此，当打开密钥缓存时，Cassandra 读取流程是什么。是这样吗？

1.  检查内存中的 MemTable 中的行（可能在最近的插入/更新后驻留在那里）。
2.  如果在 MemTable 中找不到，则检查键缓存中的键。
3.  如果找到键（缓存命中），则进行一次搜索，否则 2 次寻求获取该行。

但是使用`cassandra-cli`and `cassandra-jdbc`(CQL)，我得到了不同的结果。也就是说，即使我最近更新了该行，每次从该行读取都会导致键缓存命中。比如说，我读了 100 遍，我得到了 100 次点击。

为什么会出现这种差异？

好吧，我自己想通了，但希望有人确认..

看起来更新只是将要更新的列获取到 MemTable 中。因此，当我使用 hector 更新一行时，我并没有更新所有列。只是一列`x`并且正在读取同一列`x`进行读取操作。所以没有缓存命中，因为它已经在 MemTable 中。

在运行 CQL 时，我只是在运行`select * from cf`导致获取另一列的结果`y`。该列`y`尚未更新，因此我假设它不会在内存中（MemTable），因此导致缓存命中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T01:30:11.933

Memtables 和 SSTables 总是在你读取一行时都被检查，结果被合并在一起。密钥缓存仅用于 SSTables，而不是 memtables（基本上是 hashmaps）。

如果您写了一个新行，然后很快又读了它，那么 memtable 可能还没有被刷新，并且仍然会保存该行。在这种情况下，Cassandra 甚至不必查看密钥缓存，因为它可以快速检查 SSTable 布隆过滤器以查看该行尚未在任何 SSTable 中。因此，在这种情况下，直接返回 memtable 中的行数据。

如果您强制提前刷新内存表（使用 nodetool）然后读取该行几次，您会看到密钥缓存开始被使用。

# jquery - 定义一个类而不是属性

> ID：11923118
> 
> 赞同：0
> 
> 时间：2012-08-12T14:52:12.120
> 
> 标签：jquery

我如何正确编辑以下行以包含特定类，而不是 href 属性？

```
var activeTab = $(this).find("a").attr("href"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:54:02.167

尝试

```
var activeTab = $(this).find("a.className").attr("href"); 
```

如果你使用

```
 .attr("href"); 
```

它不会匹配，`href`而是返回匹配`a`标签的href

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:58:33.363

尝试;

```
var activeTab = $(this).find('.your_class').attr("href"); 
```

或者你可以试试`closest()`；

```
var activeTab = $(this).closest('tr').find('.your_class').attr("href");
//i took <tr> as a child in this example just for a demo. You may change it according to your HTML structure 
```

或者你可以试试`children`；

```
var activeTab = $(this).children('.your_class').attr("href"); 
```

希望这可以帮助。

# macos - 自制安装 imagemagick 8 位版本

> ID：11923126
> 
> 赞同：1
> 
> 时间：2012-08-12T14:52:59.757
> 
> 标签：macos, imagemagick, homebrew, rmagick, osx-mountain-lion

我想使用自制软件安装 8 位版本的 imagemagick，因为性能稍微好一些，并且 8 位版本输出的 RGB 值更适合我的使用。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:24:19.480

我认为`brew install imagemagick --with-quantum-depth-8`应该做的伎俩。

# java - 无限循环应用程序 - for(;;)

> ID：11923128
> 
> 赞同：1
> 
> 时间：2012-08-12T14:53:25.437
> 
> 标签：java, syntax, for-loop

我试图理解 for 循环示例背后的概念

```
for (;;)
{
//write code
} 
```

我了解它的作用以及它与 while(true) 的循环结构如何相同，但我的问题是……这是一种好的编程实践吗？这种类型的循环结构适用于什么样的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:06:05.083

在某些情况下，这是所需的行为。例如，基于卡带的游戏机上的游戏通常在其主循环中没有退出条件，因为没有可供程序退出的操作系统；循环一直运行，直到控制台关闭。

另一个例子是当一个模块监听另一个模块的动作时。它需要一直听，所以听者必须听无限时间或直到程序关闭。像套接字、线程和 UIComponents。

无限循环的概念没有不好的做法，但如果它不想要或不损害您的系统功能，则可以考虑，例如当您创建无意的无限循环或失去对循环的程序控制时。

为了使无限循环成为一个好习惯：

1.  确保这是所需的行为。如果它有停止条件，避免无限循环！
2.  用`for(;;)`or明确表示`while(true)`。避免重言式表达，做简单！
3.  使其具有容错性，拯救预期的异常并给予它们正确的处理！
4.  还有最重要的！做一个**简单**的无限循环！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:02:14.153

```
while(abortRequested)
{
  // ....
} 
```

几乎等同于

```
while(true)
{
   // ...

   // ... dozens of lines of code ...

   if(abortRequested)
     break;

   // prepare next iteration
} 
```

或者，这也可能在守护线程中运行，当所有非守护线程完成时，该线程会自动终止。所以这些结构的语义通常是：

默认情况下应该永远运行，除非收到一些明确的终止事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:00:04.337

总的来说是可以的，没什么好担心的。这与程序员的喜好有关。

我更喜欢`while(true)`，从我的角度来看，它是更优雅的无限循环形式。其他人可能更喜欢`for(;;)`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:01:00.357

这只是个人喜好问题。例如，我更喜欢这种风格：

```
 while (true) {
     // Do infinite task
 } 
```

这一切都归结为可读性，几个月后你可以轻松阅读和理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T15:08:14.317

一种观点可能是： While 更像是基于事件/条件的 .. 在哪里运行循环，直到发生终止循环的事情。另一方面，for 循环更像是基于计数器，您要指定循环应该发生多少次。至少它对此有明确的规定。

当然，从技术上讲，两者都是相同的，它们都检查运行条件以启动循环周期。

# c# - 正 System.Double 值的快速地板和天花板替代方案

> ID：11923135
> 
> 赞同：5
> 
> 时间：2012-08-12T14:55:25.600
> 
> 标签：c#, .net, double, floor, ceil

```
double d = 0; // random decimal value with it's integral part within the range of Int32 and always positive.
int floored = (int) Math.Floor(d); // Less than or equal to.
int ceiled  = (int) Math.Ceiling(d); // Greater than or equal to.
int lessThan = ? // Less than.
int moreThan = ? // Greater than. 
```

地板和天花板函数包括分别小于/大于**或等于** `d`的最大/最小整数。我想找出分别小于/大于**但不等于** `d`的最大/最小整数。

当然，这可以通过一些`if's and but's`方法来实现，但我正在寻找一种不包括分支或至少非常快的方法，因为此操作将在算法中执行数十亿次。

二进制操作可能吗？如果没有，最好的选择是什么？

显而易见的解决方案是：

```
int lessThan = (d - floored) > double.Epsilon ? floored : (floored-1);
int moreThan = (ceiled - d) > double.Epsilon ? ceiled : (ceiled+1); 
```

**注意**：目的是找出是否`d`更接近`lessThan`或`moreThan`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:22:29.693

由于`d`始终为正，您可以使用该转换为整数截断（即，它是正输入的下限和负输入的上限）。

`floor(d + 1)`相同`ceil(d) + 1 if integer, ceil(d) otherwise`和`ceil(d - 1)`相同`floor(d) - 1 if integer, floor(d) otherwise`

```
int moreThan = (int)(d + 1); // floor(d + 1)
int lessThan = int.MaxValue + (int)((d - int.MaxValue) - 1) // ceil(d - 1) 
```

这`lessThan`有点令人费解，如果其他人有更好的想法，我不会感到惊讶。

但既然你想要这个：

> 目的是找出 d 是否更接近 lessThan 或 moreThan

它应该更简单：

```
double x = d % 1;
if (x == 0 || x == 0.5)
    // d is equally far from either one, either by a difference of 1 or of 0.5
else if (x < 0.5)
    // d is closer to lessThan
else
    // d is closer to moreThan 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:15:53.773

我可能会误解问题，但要找到最接近的 d 整数值：

```
int floored = (int)d;
int ceiled = (int)(d + 1);
int mathRounded = (int)(d + 0.5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:22:12.010

不知道你最后想要达到什么结果。

如果你想要**ceil**，**floor**和**最近**的是什么：

```
int lessThan = (int) Math.Floor(d); // Less than or equal to.
int moreThan = (int) Math.Ceiling(d); // Greater than or equal to.

// 1 comparison instead of 2 that is made on your question.
if (lessThan == moreThan)
{
    lessThan--;
    moreThan++;
 }

 bool isCloserToFloor = (d - .5) < lessThan;
 bool isCloserToCeil = !isCloserToFloor; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:27:21.790

尚未对此进行性能测试，但您可以测试您的双精度是否已经是整数，然后执行适当的操作：

```
double d = 0;
int lessThan;
int moreThan;

if (d % 1 == 0)
{
    lessThan = d - 1;
    moreThan = d + 1;
}
else
{
    lessThan = (int) Math.Floor(d);
    moreThan  = (int) Math.Ceiling(d);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T15:35:50.410

您可以作弊：使用 Convert.ToInt32(bool)：

```
double d = 0; // random decimal value with it's integral part within the range of Int32 and always positive.
int floored = (int) Math.Floor(d); // Less than or equal to.
int ceiled  = (int) Math.Ceiling(d); // Greater than or equal to.
int lessThan = floored - Convert.ToInt32(Math.Abs(d-floored) < epsilon);
int moreThan = ceiled + Convert.ToInt32(Math.Abs(d-ceiled) < epsilon); 
```

# javascript - 使用锚标签单击时平滑显示大图像

> ID：11923141
> 
> 赞同：0
> 
> 时间：2012-08-12T14:56:06.120
> 
> 标签：javascript, css

我正在使用这个很酷的图像滑块[http://www.jscraft.net/demo/plugins/filters/](http://www.jscraft.net/demo/plugins/filters/)，但是正如你所看到的，使用这个滑块来处理大图像可能是一个问题......我基本上想要做的是在每个较小的图像周围添加一个锚标记（如滑块中所示），当您单击图像时，它将弹出（或任何类型的平滑显示而不离开页面）该图像的较大尺寸.. .关于如何做到这一点的任何想法？也许使用 jquery 或 javascript？请注意，我也不想为此使用另一个滑块，不喜欢混淆脚本......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:11:38.527

好吧好吧我明白了..这是你的代码..

Tha javascript :

```
<script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" language="javascript">
    $('img.zoomable').css({ cursor: 'pointer' }).live('click', function () {
        var img = $('img.bigImg');
        var bigImg = $('<img />').css({
            'max-width': '100%',
            'max-height': '100%',
            'display': 'inline'
            //'margin': '-25% 0 0 -25%'
        });
        bigImg.attr({
            src: img.attr('src'),
            alt: img.attr('alt'),
            title: img.attr('title')
        });
        var over = $('<div />').text(' ').css({
            'height': '100%',
            'width': '100%',
            'background': 'rgba(0,0,0,.82)',
            'position': 'fixed',
            'top': 0,
            'left': 0,
            'opacity': 0.0,
            'cursor': 'pointer',
            'z-index': 9999,
            'text-align': 'center'
        }).append(bigImg).bind('click', function () {
            $(this).fadeOut(300, function () {
                $(this).remove();
            });
        }).insertAfter(this).animate({
            'opacity': 1
        }, 300);
    });

</script> 
```

And the HTML :

```
<img class="zoomable" src="smallImage.jpg" height="100" width="100"/>
<img class="bigImg" style="visibility:hidden" src="bigImage.jpg"/> 
```

you have to add two links for every image.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:22:55.893

这是一个名为 Zoomable 的插件。给你的图像一个名为“zoomable”的类并添加这个脚本

```
<script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" language="javascript">
    $('img.zoomable').css({ cursor: 'pointer' }).live('click', function () {
        var img = $(this);
        var bigImg = $('<img />').css({
            'max-width': '100%',
            'max-height': '100%',
            'display': 'inline'
            //'margin': '-25% 0 0 -25%'
        });
        bigImg.attr({
            src: img.attr('src'),
            alt: img.attr('alt'),
            title: img.attr('title')
        });
        var over = $('<div />').text(' ').css({
            'height': '100%',
            'width': '100%',
            'background': 'rgba(0,0,0,.82)',
            'position': 'fixed',
            'top': 0,
            'left': 0,
            'opacity': 0.0,
            'cursor': 'pointer',
            'z-index': 9999,
            'text-align': 'center'
        }).append(bigImg).bind('click', function () {
            $(this).fadeOut(300, function () {
                $(this).remove();
            });
        }).insertAfter(this).animate({
            'opacity': 1
        }, 300);
    });

</script> 
```

# javascript - 如何使用 AngularJs 过滤 JSON 数据？

> ID：11923142
> 
> 赞同：19
> 
> 时间：2012-08-12T14:56:22.963
> 
> 标签：javascript, json, frameworks, angularjs

我有一个包含 JSON 对象的数组 (_users)。

```
{ 
  "User":
  {
    "userid":"19571",
    "status":"7",
    "active":"1",
    "lastlogin":"1339759025307",
    "Stats":
     [
       {
         "active":"1",
         "catid":"10918",
         "typeid":"71",
         "Credits":
         [
           {
             "content":"917,65",
             "active":"1",
             "type":"C7"
           },               
           {
             "content":"125,65",
             "active":"1",
             "type":"B2"
           }
         ]
       }
     ]
  }
} 
```

1-如何仅过滤具有“活动”的用户：“1”而不是“0”

我尝试过这样的事情：

```
<div ng-repeat="user in _users | filter:active | orderBy:user.userid">
    {{user.userid}}
</div> 
```

但对我来说不能正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-12T15:15:12.603

由于您的对象模型有点复杂，我建议您使用自定义过滤功能：

```
$scope.isActive = function(user) {
    return user.User.Stats[0].active === "1";
}; 
```

然后在您的 HTML 中：

```
<div ng-repeat="user in _users | filter:isActive">
    {{user.User.userid}}
</div> 
```

这是工作的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/4kzzy/3/](http://jsfiddle.net/pkozlowski_opensource/4kzzy/3/)

如果您需要更多信息，请务必查看 angular 关于过滤器的文档：[http ://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-18T21:33:46.407

进一步考虑@pkozlowski.opensource 并允许对项目/用户进行实时过滤：

[http://jsfiddle.net/hbyNN/](http://jsfiddle.net/hbyNN/)

```
<div ng-controller="MyCtrl">
  <label>userid substring filter:</label>
  <input ng-model="zzzzz">

  <div ng-repeat="user in _users | filter:isInteresting"> 
      <pre>{{user | json}}</pre>
  </div>
</div> 
```

和：

```
 $scope.isInteresting = function (user) {
    if ($scope.zzzzz == undefined) {
        return true;
    }

    return user.userid.indexOf($scope.zzzzz) !== -1;
}; 
```

# facebook - 邀请 5 位朋友使用应用程序等

> ID：11923148
> 
> 赞同：-3
> 
> 时间：2012-08-12T14:56:43.513
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试构建一个新的 Facebook 应用程序，该应用程序只有在用户邀请 5 个或更多朋友后才能工作。

于是我发现了使用通用引擎邀请朋友的可能性：

```
<html>
<head>
    <title> try </title>
</head>
<body>
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js">
    </script>
    <script>
        FB.init({ 
            appId:'****', cookie:true, 
            status:true, xfbml:true 
        });

        function FacebookInviteFriends()
        {
            FB.ui({ method: 'apprequests', 
            message: 'My diaolog...'});
        }
    </script>
    <a href='#' onclick="FacebookInviteFriends();"> click here</a>
</body>
</html> 
```

有没有办法添加一个必须至少输入五个成员，然后转移到新页面的选项？我对 PHP 还是比较陌生，我很想得到你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:58:48.930

如果您在向选定的朋友发送应用请求后，您可以将选定的朋友 ID 保留在会话中并从您的 FacebookInviteFriends 方法中读取它。

`function FacebookInviteFriends() { FB.ui({ method: 'apprequests', message: 'My diaolog...'}); to: '<ids from session>' }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:15:36.987

我认为这个问题与 facebook 或它的 php sdk 无关，但无论如何，我认为你可以通过很多方式来做到这一点。我在刚刚发布的一个应用程序中做了类似的事情：

1) 在 FB.ui 方法中，添加 max_recipients 选项，如下所示： FB.ui({ method: 'apprequests', message: 'My dialog...', max_recipients: 1 });

2) 请记住，ui 方法允许您对其附加回调，因此您可以执行以下操作： FB.ui({ method: 'apprequests', message: 'My dialog...', max_recipients: 1 },功能（响应）{ console.log（响应）}）；

在此响应变量中，您选择了用户的 ID。

我接下来要做的是使用此响应填充表单。我有一个带有隐藏字段的表单，如下所示：

```
<form id="miform">
<input type="hidden" name="friend1" value="" id="f1">
<input type="hidden" name="friend2" value="" id="f2">
<input type="hidden" name="friend3" value="" id="f3">
<input type="hidden" name="friend4" value="" id="f4">
<input type="hidden" name="friend5" value="" id="f5">
</form> 
```

使用 jquery，我填充了隐藏的输入（请记住，我们仍在回调函数中）：

```
$('#f1').attr('value',response.to[0]); 
```

3）最后一步是验证，你可以用javascript或php来做：

```
$('#myform').on('submit',function(){
// check if the fields are not empty and submit the form or alert if the fields are empty.
}); 
```

希望这能让您更清楚地了解您必须做什么。

问候。

# asp.net-mvc - ASP MVC - 前端和后端

> ID：11923149
> 
> 赞同：3
> 
> 时间：2012-08-12T14:56:48.680
> 
> 标签：asp.net-mvc, azure

在看到一些很酷的视频之后，`ASP.NET MVC 4.0/4.5 Azure`首先使用代码制作项目是多么容易，这让你 CRUD 变得如此简单，

我的问题是：**如何为管理员/最终用户拆分页面？**（假设您使用 mvc 4.0 应用程序模板）

*例如：*如果我在我的网站 www.example.com/Item 中使用 Item 模型制作 ItemController，我希望 www.example.com/Item 在我的设计中向最终用户显示我的项目，但在 Admin 中对 Item 进行所有的 crud 操作/Item 或类似的东西（带有规则等），

有什么我可以做的例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T05:27:29.240

您可能需要考虑在 ASP.NET MVC 中使用[区域。](http://msdn.microsoft.com/en-us/library/ee671793.aspx)区域允许您将站点拆分为多个单元（例如您的公共网站和管理门户）：

![在此处输入图像描述](../Images/0f52e4dc4e34dfe1341fcb79e172bef8.png)

区域还可以更轻松地处理路由，例如，您可以将**/admin/{controller}/{action}/{id}**映射到 Admin 区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:44:18.170

在您的页面标记上，您可以使用类似的东西来插入仅限管理员的功能：

```
@if (Context.User.IsInRole("admin"))
{
    @Html.ActionLink("Edit", "Edit")
} 
```

假设已设置角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:15:20.890

对我来说，最好的选择是将前端和后端放在同一个解决方案中的不同项目中。您可能会遇到前端用户尝试访问 Windows 管理员的问题

# c - 有什么简单的方法可以提高这个自旋锁功能的性能吗？

> ID：11923151
> 
> 赞同：2
> 
> 时间：2012-08-12T14:57:16.520
> 
> 标签：c, inline-assembly, spinlock

我正在尝试在我的代码中实现自旋锁，但我基于 Wikipedia 实现的自旋锁导致性能极慢。

```
int lockValue = 0;

void lock() {
    __asm__("loop: \n\t"
            "movl $1, %eax \n\t"
            "xchg %eax, lockValue \n\t"
            "test %eax, %eax \n\t"
            "jnz loop");
} 
```

有什么方法可以改进它以使其更快吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T15:05:24.607

这样的事情怎么样（我知道这是 KeAcquireSpinLock 实现）。不幸的是，我的 at&t 程序集很弱。

```
spin_lock:
    rep; nop
    test lockValue, 1
    jnz spin_lock
    lock bts lockValue
    jc spin_lock 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T20:48:57.087

```
 "movl    $1,%%edx     \n\t"    // edx = 1;
  ".set    lockloop,.   \n\t"    // symbol lockloop set to pc
  "xorl    %%eax,%%eax  \n\t"    // eax = 0;
  "lock cmpxchgl %%edx,(%%ebx)\n\t" // if (*mu_ptr == eax) *mu_ptr = edx;
                                 //    else { eax = *mu_ptr;
  "jnz     lockloop     \n\t"    //           goto lockloop; } 
```

# design-patterns - 设计系统组织结构表示

> ID：11923152
> 
> 赞同：0
> 
> 时间：2012-08-12T14:57:19.930
> 
> 标签：design-patterns, database-design, data-structures, architecture, structure

我正在乞求设计一个系统。它必须有一个非常灵活的结​​构来代表组织。

**基本要求很简单：**

1.  具有容器层次结构（组织单位）
2.  容器将包含其他实体（包括其他容器），实体例如：
    *   可以包含用户的组
    *   日历
    *   ETC...
3.  还需要根据结构促进许可和注册过程。
4.  用户\组可以注册到其他容器的不同角色\权限，这将授予他们对所有其他实体具有相同角色的权限，还可以为组和日历定义管理器。

* * *

**初步想法：**

1.  使用“复合”设计模式来表示实体：
    *   [[Interface]] IEntity --> int ID, string Name ...
2.  每个实体都将实现相同的接口
3.  Container Entity 将保存引用这些实体的子项列表。
4.  每个实体都将拥有一个“权限树”，它将在叶子上保存用户列表，该树将代表用户作为经理注册到实体的角色和方式。即，如果用户通过组注册为所有者，树将显示：所有者 --> 组 1 --> 用户 1。

**沉思：**

1.  每个实体都应该有自己的 Delete\Add 方法吗？在接口级别定义，或者应该有一个不同的类，某种“实体管理器”，它将处理添加编辑和删除实体的所有任务。
2.  我应该如何为我的数据库建模以保存权限树信息？

我很高兴听到有关该主题的任何想法、更正、经验教训或建议。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:06:32.433

为了您的沉思，我建议如下：

1.  假设您现在不知道所有实体并且它们可能具有完全不同的结构，您应该更好地将创建/删除的逻辑封装在实体类中。拥有更多具有默认实现的通用超类将是一个好主意。
2.  关于权限树。您是否已经为此使用了实体模型？对于您的情况，最好的方法是自上而下，当您已经拥有实体模型时，将实体模型映射到数据库模型会更直接:)

# facebook - 使用多个名称预先填充 Facebook 发送对话

> ID：11923157
> 
> 赞同：1
> 
> 时间：2012-08-12T14:58:15.000
> 
> 标签：facebook, send, sendmessage

我想让我的应用程序用户能够预先选择一些朋友，然后向他展示一个“发送对话”，稍后一步预先填充所有这些名称，以供他批准并点击发送。我如何获得批准这样做目前看起来我只能用一个名字预填充。我必须申请才能获得白名单吗？如果是这样怎么办？

任何帮助表示赞赏

鲁珀特

# iphone - UIImageView 变黑不一致

> ID：11923160
> 
> 赞同：1
> 
> 时间：2012-08-12T14:58:43.083
> 
> 标签：iphone, objective-c, ios, uitableview, uiimageview

我有一个 UITableView，每个单元格中都包含一些视图，其中一个视图是 UIImageView。在 cellForRow 方法中，我正在加载带有图像的 UIImageView，但有时，UIImageView 只显示黑屏。

我认为这可能有两个原因 - UIImage 损坏或内存问题。

UIImage 没有损坏（它始终是同一个 UIImage），我什至检查了当我放置手动损坏的图像时的行为 -> 它变白了！不是黑...

我检查是否有一些内存警告， ViewDidUnload 启动 -> 什么都没有。即使在模拟器中模拟出内存警告，也没有什么，与此无关。

有人知道为什么会这样吗？

谢谢！

* * *

这是我的 cellForRow 方法。基本上，它是一个顶部有 UIWebView 和 UIImageView 的单元格列表，当表格滚动时，我隐藏 webview 并显示 imageview，反之亦然。也许它与我的问题有关，但我对此表示怀疑，因为图像是相同的，并且 uiimagaview 没有被释放。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {   
   ImMailMessage *message = [_messages objectAtIndex:indexPath.row];

ImFullMessageTableViewCell *cell = (ImFullMessageTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"ImFullMessageTableViewCell"];

if (cell == nil)
{
    cell = [[[NSBundle mainBundle] loadNibNamed:@"ImFullMessageTableViewCell" owner:self options:nil] objectAtIndex:0];
    cell.delegate = self;

    //add gestures
    UIPinchGestureRecognizer *pinchGesture = [[[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(cellPinched:)] autorelease];
    [cell addGestureRecognizer:pinchGesture];
    pinchGesture.delegate = self;

    UIPanGestureRecognizer *panGesture = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(cellPanned:)] autorelease];
    panGesture.minimumNumberOfTouches = 2;
    [cell addGestureRecognizer:panGesture];
    panGesture.delegate = self;

}

cell.threadState = _state;
cell.mailMessage = message;

UIImage *image = [self imageForMailMessage:message];
if (!image)
{
    // if no image, put the webview and reload it.
    cell.webView.mailMessage = message;     
    cell.webViewImageView.hidden = YES;
    cell.webViewImageView.image = nil;
    [cell.webView reloadMailMessage];

}
else // image exists!
{
    cell.webViewImageView.image = image;

    // replace the web view with the recived image.
    [cell replaceWebViewWithImageView];
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:18:14.573

因此，在您的“cellForRow”中，您首先尝试回收旧单元格，然后如果没有可用的单元格，则创建一个新单元格。在那之后，您以某种方式获得了对 UIImageView 的访问权限（或者您正在使用单元格提供的那个？）

我要做的第一件事是在 cellForRow 中甚至不设置图像 - 找到 UIImageView，然后记录它或断言它在那里，然后将背景颜色设置为绿色“：

imageView.backgroundColor = [UIColor greenColor];

如果您在图像所在的位置看到一堆绿色矩形，那么您可以继续下一步（在移除绿色背景之后！），并设置图像 - 但每次设置图像时都要记录，即记录图像在设置之前，您可以 100% 确定实际上您有一个有效的图像。

如果你走到这一步，你得到了绿色，你记录了你的图像，但它仍然无法正常工作，然后添加评论，我会回来查看。

编辑：所以继续不写图像 - 你现在应该有一个 imageView 只是绘制它的背景。

添加委托方法：“- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath”

在此处放置一个日志，并为每个单元格记录其索引、imageView、imageView.backgroundColor 和 imageView.image（应该为零！）。我怀疑你会发现背景颜色不是绿色，或者有一些图像

# ruby - 如果通过 1.8.7 和 1.9.3，我应该使用 Ruby 1.9.2 运行测试吗？

> ID：11923161
> 
> 赞同：4
> 
> 时间：2012-08-12T14:58:53.770
> 
> 标签：ruby, unit-testing, rspec

我有一个[使用 Travis CI 设置的 Ruby gem，](http://travis-ci.org/#!/beerlington/classy_enum)我[的配置](https://github.com/beerlington/classy_enum/blob/master/.travis.yml)当前运行 Ruby 1.8.7、1.9.2 和 1.9.3 以及最新版本的 Rails 3.0、3.1 和 3.2 的规范。如果测试在 1.8.7 和 1.9.3 中通过，是否有任何理由在 1.9.2 中运行它们？如果在 1.8.7 和 1.9.3 中都可以正常工作的任何东西在 1.9.2 中都可以正常工作，这似乎有点矫枉过正。这个假设正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:38:23.673

我看不出为什么它不应该与 1.9.2 一起使用——但这就是测试的问题：你永远不知道。因此，如果您的软件适用于 1.9.2 对您很重要，我不会在开发期间自动运行测试，但至少在重要部署之前。

# javascript - 杀死 javascript src onclick 一个按钮

> ID：11923162
> 
> 赞同：0
> 
> 时间：2012-08-12T14:59:05.680
> 
> 标签：javascript, jquery, onclick

我想删除/杀死以前通过一个按钮运行的脚本。所以，我有一个名为 Agree 的按钮，它运行一个脚本 src：

```
 $.getScript("http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838"); 
```

现在，我怎样才能使另一个名为 Disagree 的按钮杀死这个 src（不知道如何用英语调用它），而只是为了卸载脚本。

谢谢你。

# php - 将文件路径存储在与动态内容相关的表中是一种可接受的做法吗？

> ID：11923164
> 
> 赞同：-1
> 
> 时间：2012-08-12T14:59:08.743
> 
> 标签：php, mysql, html, web

> **可能重复：**
> [在数据库中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

我正在学习 PHP 和 MySQL 的概念，虽然我对两者都有扎实的基本了解，但我还没有将它们付诸实践并让它们进行交互，所以如果问题有点愚蠢，请原谅我。

我只是想知道是否说，我有一个包含封面图片的文章的表格 - 有一个像“imagepath”这样的列是否有意义，我可以在其中存储该图像的路径并在需要显示封面时检索它？

如果不使用上述方法，我需要什么解决方案将图像与数据库相关内容相关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T15:02:13.300

是的，这就是人们通常这样做的方式。在 MySQL 等数据库中存储图像效率不高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:05:13.650

是的，存储像文件路径这样的文本字符串来引用存储在其他地方的图像是一个合法的设计决策。另一种方法是将原始图像数据存储到数据库中的 blob 列中，让 PHP 脚本为该图像提供服务，然后您可以在 HTML IMG 标记中引用该 PHP 脚本。这两种情况都有优点和缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T15:07:01.440

我认为这很好。openlibrary网站提供封面而[没有](http://openlibrary.org)额外的“路径”间接。该站点上的所有书籍都有一个唯一的密钥来标识它们，并且封面使用相同的密钥名称命名，以便您可以“计算”图像的路径而不是查找它。示例书位于[http://openlibrary.org/books/OL20426778M/B%C3%A9atrix](http://openlibrary.org/books/OL20426778M/B%C3%A9atrix)。相应的封面位于[http://covers.openlibrary.org/b/olid/OL20426778M-L.jpg](http://covers.openlibrary.org/b/olid/OL20426778M-L.jpg)。注意`OL20426778M`which 是书的标识符。

我不确定数据库方法提供了哪些优势，但有了这个，您可以 tar/zip 图像并在必要时提供批量下载等。

# android - eclipse中未定义的引用glBindVertexArrayOES

> ID：11923166
> 
> 赞同：4
> 
> 时间：2012-08-12T14:59:17.853
> 
> 标签：android, eclipse, opengl-es-2.0

我`GLES2`只使用编译，但这些错误不会消失

> 对 glBindVertexArrayOES 的未定义引用
> 
> 对 glBindVertexArrayOES 的未定义引用
> 
> 对 glGenVertexArraysOES 的未定义引用
> 
> 对 glBindVertexArrayOES 的未定义引用
> 
> 对 glBindVertexArrayOES 的未定义引用

似乎 Eclipse 无法找到这些我不理解的函数在哪里定义，因为所有其他函数都完美地找到了，我是否需要声明任何东西才能使这些工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:17:25.643

您是否尝试过从本机代码（使用 JNI）调用它？Android 不提供对 Java 中所有 OpenGL ES 函数的访问。我使用 GLES20Fix（[更多信息](http://dundercover.blogspot.com/2012/07/gles20fix.html)）来访问缺少的 OpenGL ES API。您可以通过调用所需的 GL ES API 函数来扩展此 JNI 库。

我检查了 Android 文档并且 Java 绑定没有`glBindVertexArrayOES`功能，所以您似乎必须使用 JNI。

# c - 如何用ICU本地化和国际化C项目？

> ID：11923168
> 
> 赞同：1
> 
> 时间：2012-08-12T14:59:33.463
> 
> 标签：c, internationalization, icu

我对 ICU 的国际化很感兴趣，我想看看是否可以将其与 C 项目集成。

我已阅读其网站上的文档（本地化[1](http://userguide.icu-project.org/locale/localizing)）（资源管理[2](http://userguide.icu-project.org/locale/resources#TOC-Resource-Bundle-APIs)）。而且我发现它不像gettext那么容易。但是，我仍然想知道 ICU 是否适合 C 项目的国际化。

有没有人有这方面的经验？如果你有代码，那就太好了。:-)

# sql - 当从同一个表登录时，管理员可以为用户提交吗

> ID：11923170
> 
> 赞同：1
> 
> 时间：2012-08-12T14:59:49.273
> 
> 标签：sql

```
tblUser(userid,fullname,emailid,password) 
```

管理员和用户通过此表登录

```
tblPersonalInfo(pinfoid,firstname,lastname,userid) 
```

用户通过userid输入的个人信息

```
tblAcdemic(asid,metricmarks,fscmarks,userid) 
```

在这里，我想通过 adminfor 用户插入学术记录，所以我很困惑在 tblAcdemic 表中使用 pinfoid 作为 fk，所以我在这个 Senereio 中做什么。我还需要帮助在 sql server 中为 tblAcdemic 编写存储过程。

# javascript - setInterval 只在对象方法上运行一次

> ID：11923180
> 
> 赞同：3
> 
> 时间：2012-08-12T15:02:24.193
> 
> 标签：javascript, jquery, jquery-plugins, setinterval

这是代码。

```
(函数($){
    $.fn.testfunc = 函数（） {

        this.init = 函数（） {
            setInterval(this.func1(), 1000);
        };

        this.func1 = 函数（） {
            控制台.log('func1');
            this.func2();
        };

        this.func2 = 函数（） {
            控制台.log('func2');
            //一些代码
        };

        返回 this.init();
    }
})(jQuery);

```

*当我使用括号时，第一个和第二个方法运行但第一个方法只调用一次。

*当我不使用括号时，第一种方法在间隔中运行得很好，但它不能/不能调用第二种方法。

我应该带什么去？带括号还是不带括号？我需要在间隔内运行第一种方法，但也需要调用第二种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:05:29.573

那是因为当您使用 时`setInterval`，第一个参数必须是对函数的引用：

```
setInterval(this.func1, 1000); 
```

它没有括号，因为`this.func1()`表示该函数`this.func1`已执行。是函数的名称，`this.func1`可以作为参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:08:34.267

`setInterval`期望一个函数。`this.func1`是一个函数，但是`this.func1()`是调用函数的结果，即`undefined`（函数不返回任何内容）。这是你的第一个误解。

第二个误解与范围有关。如果您调用`setInterval(this.func1, 1000);`then`setInterval`将调用正确的函数，但`this`不会引用您的想法。我现在没有时间解释，您绝对应该阅读更多有关此的内容。无论如何，这将起作用：

```
this.init = function() {
    var self = this;
    setInterval(function() { self.func1(); }, 1000);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:11:28.863

使用括号，您正在调用该方法，而不是将其设置为回调。

`setInterval(this.func1(), 1000);`

func1 不会在 的范围内执行`this`，因此它无法访问 func2。我有点生疏了，但你应该可以使用 call()。我不记得您是否需要从 init 和 func1 或仅在 func1 中调用（）。

# java - 如何 JUnit 测试 IntentService

> ID：11923181
> 
> 赞同：8
> 
> 时间：2012-08-12T15:02:31.710
> 
> 标签：java, android, junit, android-testing

我是 Android 测试的新手，我想测试一个 IntentService，我目前正在扩展 ServiceTestCase。

我正在尝试使用 a`ResultReceiver`但问题是`OnReceiveResult`在测试用例中从未调用过。（我也尝试创建`ResultReceiver`with`new Handler()`作为参数 insetad ，`null`但结果相同。

我究竟做错了什么？测试的正确方法是`IntentService`什么？

这是服务：

```
public class MyService extends IntentService {

public MyService() {
    super("MyService");
}

public MyService(String name) {
    super(name);
}

@Override
protected void onHandleIntent(Intent intent) {
    final int action = intent.getIntExtra("action", 0);
    final int request = intent.getIntExtra("request", 0);
    final ResultReceiver receiver = (ResultReceiver) intent.getExtras().get("receiver");

    if (receiver == null) {
        return;
    }

    if (action == 0 || request == 0) {
        receiver.send(0, null);

        return;
    }
} 
```

}

这是测试：

```
public void testHandleInvalidRequests() {
    ResultReceiver receiver = new ResultReceiver(null) {
        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            fail();
        }   
    };

    Intent intent = new Intent(mContext, MyService.class);
    intent.putExtra("receiver", receiver);
    startService(intent);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T19:33:57.647

我成功地测试了我的`IntentService`，我将在概念上向您展示我是如何做到的。

首先，您扩展 Android 服务测试类：`ServiceTestCase<MyIntentService>`. 然后你基本上`IntentService`像使用`startService(intent)`.

由于被测服务是一个`IntentService`，它将在一个衍生的工作线程中完成所有工作。如果您不阻塞测试线程，那么您的测试方法将立即执行显然会失败的断言，因为后台的测试工作可能尚未完成。最终，测试方法将返回，您的测试将失败。

您需要做的是在`startService`. 使用 a`ReentrantLock`和 Condition 调用`await()`它来执行此操作。

然后在后台`IntentService`执行`onHandleIntent`。我建议您扩展您的`IntentService`and override `onHandleIntent`，调用`super.onHandleIntent()`，然后向您的测试线程发出信号表明工作已经完成。在用于阻塞测试线程的相同锁和条件上执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T01:13:22.483

我知道这是旧的，但由于我遇到了同样的问题，我将在这里发布我最终如何设法在`IntentService`. 正如@Joerg 所说，这是一个线程问题。

```
public class MyServiceTest extends ServiceTestCase<MyService> {
    public MyServiceTest() {
        super(MyService.class);
    }

    public void testOnHandleIntent() throws Exception {
        Looper.prepare();
        final CountDownLatch latch = new CountDownLatch(1);

        ResultReceiver receiver = new ResultReceiver(new Handler()) {
            @Override
            protected void onReceiveResult(int resultCode, Bundle resultData) {
                latch.countDown();

                assertEquals(resultCode, 0);
                assertNull(resultData);
                fail();

                Looper.myLooper().quit();
            }
        };

        Intent intent = new Intent(getSystemContext(), MyService.class);
        intent.putExtra("receiver", receiver);
        getSystemContext().startService(intent);

        Looper.loop();

        assertThat(latch.getCount(), is(0L));
    }
} 
```

`Looper`和类是必需的`Handler`，以便回调有一个要调用的线程。闩锁只是作为锁的一个例子，并作为一种在测试方法结束之前断言回调传递的代码的手段。

如果没有调用的`quit()`方法，则测试挂起。`Looper`

`ServiceTestCase`在最新版本的 Android 上已弃用，但替换 ( `ServiceTestRule`) 不支持`IntentService`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T03:27:54.923

如果`startService()`在测试文件中扩展`ServiceTestCase<>`，我在 Android Studio 1.1 的测试工具中发现`ServiceTestCase`不会`IntentService`通过`onHandleIntent()`. 有关更多信息，
请参阅[IntentService 的 Android ServiceTestCase 。](https://stackoverflow.com/questions/6667087/android-servicetestcase-for-intentservice/28621062#28621062)

# regex - 文本管道/其他替换正则表达式方法

> ID：11923182
> 
> 赞同：0
> 
> 时间：2012-08-12T15:02:55.140
> 
> 标签：regex, replace, sed, find, wildcard

我想要这些文本行：

```
[URL=http://something.com/attachment/ap0djrk27dja]flower.mpg - 129.7 MB[/URL]
[URL=http://something.com/attachment/XjotHS4jrgod]book.mpg - 200.3 MB[/URL]
[URL=http://something.com/attachment/as5r8ukAr64W]vacation.mpg - 2.1 GB[/URL]
[URL=http://something.com/attachment/kauirnmfaf57]love.avi - 30.4 MB[/URL] 
```

转换成：

```
http://something.com/attachment/ap0djrk27dja/flower.mpg.html
http://something.com/attachment/XjotHS4jrgod/book.mpg.html
http://something.com/attachment/as5r8ukAr64W/vacation.mpg.html
http://something.com/attachment/kauirnmfaf57/love.avi.html 
```

使用 Textpipe 或其他文本处理工具。

我知道如何使用 ff 在 MS Word 中做到这一点。通配符查找和替换方法：

```
(Find what) \[URL=(*)\](*) - * *\[/URL\]^13
(Replace with) \1/\2.html^p 
```

我也知道 Textpipe pro 有一个“查找模式（MS Word 样式）”替换过滤器，我尝试了上面的 MS 单词通配符查找和替换方法，但它不起作用并显示一些错误。

我无法使用 MS Word 完成任务的原因是我需要处理的文本文件包含数十万行，MS Word 根本无法处理，因为如果您粘贴大量文本，它会挂起。除了使用文本管道之外，我对方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:20:21.680

使用 sed：

```
sed -n 's/[^=]*=\([^ ]*\).*/\1.html/;s/]/\//p' input_file 
```

或更严格：

```
sed -n 's/^\[URL=\([^ ]*\).*/\1.html/;s/]/\//p' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:55:16.070

这可能对您有用（GNU sed）：

```
sed 's/^\[URL=\([^]]*\)\]\([^ ]*\) .*/\1\/\2.html/' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:24:09.323

以下应该在 GNU sed 中工作。如果`file`有文字：

```
sed -r 's#.*(http://[^]]*)\]([^ ]*).*#\1/\2#' file 
```

# jquery - 本地主机上不允许 Cordova/jQuery Mobile origin null

> ID：11923184
> 
> 赞同：1
> 
> 时间：2012-08-12T15:03:06.800
> 
> 标签：jquery, jquery-mobile, cordova

我正在构建一个基于 Cordova (Phonegap) 和 jQuery Mobile 的网络应用程序。由于我使用 Ajax 获取数据，因此我在`Access-Control-Allow-Origin`我的 Web 服务器提供的动态内容中添加了一个标头。这很好用。

由于我不想使用单个模板布局，因此我在页脚导航栏中创建了多个链接的文件。他们住在我的本地主机（电话）上的 /www 文件夹中。每当我使用导航栏中的链接指向其中一个页面时，我都会收到`Origin null is not allowed by Access-Control-Allow-Origin.`错误消息。我该如何解决？

```
<div data-role="footer" data-position="fixed">
  <div data-role="navbar">
    <ul>
      <li><a data-icon="star" href="start.html">start</a></li>
      <li><a data-icon="grid" href="list.html">list</a></li>
      <li><a data-icon="alert" href="alert.html">alert</a></li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T01:19:23.897

选项 1：您需要将**$** .support.cors和**$.mobile.allowCrossDomainPages**值设置为 true。

“您从 Phone Gap jQuery Mobile 应用程序中访问跨域页面的能力受两个关键因素控制：**$** .support.cors和**$.mobile.allowCrossDomainPages**，并且还可能受到后续版本中的白名单功能的影响电话间隙。”

[在http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)阅读更多内容

选项 2：我猜您可能不想使用它，但它是一个选项，可以通过在标签中使用**data-ajax="false"来关闭 Ajax 链接行为。**

# php - OpenInviter 联系人导出请求被 Gmail 拒绝

> ID：11923185
> 
> 赞同：0
> 
> 时间：2012-08-12T15:03:10.140
> 
> 标签：php, gmail, openinviter

我已经在我的共享服务器上成功安装了 Openinviter。

我试图从 Gmail、Yahoo 和 Facebook 获取联系人，但它总是返回错误，例如：

> 登录失败。请检查您提供的电子邮件和密码，然后再试一次

我还收到了一封来自 Gmail 团队的电子邮件，内容是：

> 阻止了可疑的登录

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:25:12.347

我刚刚遇到了同样的问题。我授予应用程序 gmail 的权限，然后代码可以检索联系人列表。但是，这使我无法使用此代码，因为我的大多数用户不会理解如何...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T12:45:59.120

Gmail 团队消息不是 OpenInviter 问题。这只是意味着登录的 IP 地址/设备对于您的帐户来说是新的，这不是 Google 所期望的，因此他们将其屏蔽以确保安全。这也可能意味着无效的 oAuth 令牌是用户尝试访问该帐户，或者密码错误等。（为了安全起见，他们没有解释为什么他们认为它是无效的。）

您应该能够通过登录到 Gmail 帐户并检查登录历史来授权该 IP 地址（您的服务器地址？）。

StackExchange 上 Web 应用程序区域的相关帖子（可能是讨论这个问题的更好地方）：

*   [Google 的“阻止可疑登录”是否意味着我的密码已泄露？](https://webapps.stackexchange.com/questions/39759/does-googles-suspicious-sign-in-prevented-mean-that-my-password-is-compromis)
*   [Gmail“可疑登录被阻止”消息 - 它是合法的吗？](https://webapps.stackexchange.com/questions/26600/gmail-suspicious-sign-in-prevented-message-is-it-legit)

# ruby - 使用 Ruby 和 Twitter API 从特定 Twitter 用户的属性中获取布尔值

> ID：11923188
> 
> 赞同：0
> 
> 时间：2012-08-12T15:03:43.260
> 
> 标签：ruby, twitter, boolean

我正在尝试将 Twitter 用户属性（即“已验证”）中的布尔值分配给一个变量，但我运气不佳。我正在使用 Ruby——这是代码：

```
profile = Twitter.users({"Oprah" => :verified})

    if profile == true
        puts "This profile is verfied."
    else
        puts "This profile is NOT verified."
    end 
```

无论 Twitter 用户是否经过验证，它始终默认为 else 语句。我知道我忘了做一些简单的事情。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:36:44.010

试试这个

```
verified = Twitter.user("Oprah").verified

if verified
    puts "This profile is verfied."
else
    puts "This profile is NOT verified."
end 
```

单个用户`Twitter.user`和`Twitter.users`多个用户的用户

```
profiles = Twitter.users(["Oprah","dad"])
profiles.each do |profile|
  if profile.verified
     puts "#{profile.name} profile is verfied."
  else
     puts "#{profile.name} profile is NOT verified."
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:09:15.320

也许 profile 是 Array 或 Hash 对象。最好先检查一下。

```
profile = Twitter.users({"Oprah" => :verified})
puts profile.inspect 
```

# elasticsearch - 重命名弹性搜索输出字段

> ID：11923193
> 
> 赞同：3
> 
> 时间：2012-08-12T15:04:19.000
> 
> 标签：elasticsearch

我目前在使用弹性搜索时遇到问题。当我尝试执行搜索并且只希望返回字段的子集时，如果字段是嵌套的，我需要使用点表示法指定字段。这是我的映射器 json 文档的示例，它映射了我的 couchDB 文档：

```
{
    "product": {
        "_type": {"store": "yes"},
        "_source": {"compress": true},
        "index_analyzer": "standard",
        "search_analyzer": "standard",
        "dynamic_date_formats": ["date_time_no_millis", "date_optional_time"],
        "properties": {
              "_id": {"type": "string", "store": "yes", "index": "not_analyzed"},
            "key": {"type": "string", "store": "yes"},
            "content": {
                "type": "object",
                "path": "just_name",
                "properties": {
                    "key": {"type": "string", "store": "yes"},
                    "name": {"type": "string", "store": "yes", "index_name": "name"},
                    "description": {"type": "string", "store": "yes", "index_name": "description"},
                    "brand": {
                        "type": "object",
                        "index_name": "brand",
                        "properties": {
                            "abbreviation": {"type": "string", "store": "yes", "index_name": "brand_abbreviation"},
                            "name": {"type": "string", "store": "yes", "index_name": "brand_name"}
                        }
                    }
                                }
                        }
                 }
          }
} 
```

引用 _id 只是一个简单的 _id，但如果我想在内容中引用 name，我必须将其称为 content.name。这样做的问题是，当搜索输出输出时，json 输出包含字段名称为：“content.name”。

是否可以将其重命名为“名称”而没有“内容”。字首？您可以看到，我尝试指定 index_name，但这似乎没用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:28:30.890

您可以使用它[`partial_fields`](http://www.elasticsearch.org/guide/reference/api/search/fields.html)来执行此操作。

例如，如果您索引这样的文档：

```
curl -XPUT 'http://127.0.0.1:9200/test/test/1?pretty=1'  -d '
{
   "email" : "john@foo.com",
   "name" : "john",
   "foo" : {
      "bar" : {
         "baz" : 1
      }
   }
}
' 
```

您可以像这样包含所需的字段/对象：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "partial_fields" : {
      "doc" : {
         "include" : [
            "name",
            "foo.*"
         ]
      }
   }
}
' 
```

这会给你一个这样的结果：（注意缺少的`email`字段，并且该字段`foo`仍然是一个散列 - 它没有用点符号展平）

```
{
   "hits" : {
      "hits" : [
         {
            "_score" : 1,
            "fields" : {
               "doc" : {
                  "name" : "john",
                  "foo" : {
                     "bar" : {
                        "baz" : 1
                     }
                  }
               }
            },
            "_index" : "test",
            "_id" : "1",
            "_type" : "test"
         }
      ],
      "max_score" : 1,
      "total" : 1
   },
   "timed_out" : false,
   "_shards" : {
      "failed" : 0,
      "successful" : 5,
      "total" : 5
   },
   "took" : 1
} 
```

附带说明一下，关于您的映射的一些评论：

*   您的`_id`字段（我假设它是弹性搜索 ID，而不是外部 ID）处于错误级别 - 它应该与`_type`. 如果它是一个外部 ID，那么它就在正确的级别。
*   为什么要存储所有字段？真的没有必要 - 它只是使用额外的资源。除非您有一个庞大的`_source`字段，否则只检索该字段并对其进行解析要快得多，而不是为每个单独的字段敲击磁盘。

# extjs - EXTJS4，组合框，多选，需要 VALUE 字段来突出显示从 DB 返回的 ALL

> ID：11923195
> 
> 赞同：0
> 
> 时间：2012-08-12T15:04:25.090
> 
> 标签：extjs, combobox, extjs4, multi-select

使用 EXTJS v4，我想更新我拥有的多选组合框的 VALUE 字段，以及从我的远程查询返回的所有记录。在我的情况下，我想更新多选“值”字段而不是“值字段”条目，并突出显示从组合列表的数据库查询返回的列表中的值。对于组合框，如果您将组合设置为使用如下配置条目运行：

displayField：'TABLENAME'，valueField：'TABLENAME'，值：['table1'，'table2'，'table5']，

然后在创建组合时，如果您打开组合，您将看到这 3 个条目突出显示。

我想进行远程调用，获取返回的值列表，然后将它们传递回组合框，以便它们在组合框中显示为突出显示的条目。

这是我到目前为止所拥有的：

```
[code]
Ext.Ajax.request({
    url     : 'app/store/dbcall/target/GG/table_list_containing_target_svc.php',
    params  : { groupflavor_sn: theGroupFlavor_sn, familyName: familyName },
    method  : 'POST',
    success : function(response, theRecord) {
        var res = Ext.JSON.decode(response.responseText);
        var returnedTablesData = res.data;

        // reurned values are either 'blank', or a list of tablenames formatted as JSON.
        // JSON responses will look like this: 
                // {"data":[{"TABLENAME":"TABLE_A1"},{"TABLENAME":"TABLE_A1B"},{"TABLENAME":"TABLE_A5"}]}

        //  combobox object:
        /*
            var msForm = Ext.widget('form', {
                title: 'Tables found for ' + selectedFamily,
                //width: 385,
                height: 150,
                bodyPadding: 10,
                id: 'msForm',
                layout: 'fit',
                items:[{
                    xtype: 'combobox',
                    id: 'myTablesComboId',
                    name: 'myTargets',
                    maxHeight: 150,        
                    width: 210,
                    multiSelect: true,
                    emptyText : "Select targets",
                    store: 'TableComboStore',
                    displayField: 'TABLENAME',
                    valueField: 'TABLENAME',
                    value: ['TABLE_A1', 'TABLE_A10B', 'TABLE_A5'],     //<- this is what will be highlighted in the combo list
                    forceSelection: false,
                    editable: false,
                    queryMode: 'local',
                    ddReorder: true,
                    triggerAction: 'all',
                    listeners: {
                        'click': function() {
                            if (selectedFamily) {  
                                console.log('family selected, and button clicked');
                            }
                        }
                    },
                    listConfig: {          
                        getInnerTpl: function(displayField) {                              
                            return '<tpl for="."><div><img src="' + Ext.BLANK_IMAGE_URL + '" ' + 'class="ux-checkboxlistcombo-icon">{' + (displayField || 'text') + ':htmlEncode}</div></tpl>';
                        }
                    }
                }]
            })      
        */

        // Post value to field
        Ext.getCmp('theTargetLabel').setValue(theGroupFlavor);

        if (res.data === 'blank') {
            console.log("res.data === 'blank'");

            // Entry is found in the database, so clear all values, and ask to resend
            var theTableCombo = Ext.getCmp('myTablesComboId');
            Ext.getCmp('theTargetLabel').setValue(' ');
           theTableCombo.clearValue();
        } 
       else {
            // list of available tables returned as JSON
            // populate list returned into the new table combo, and update with the existing list of tables
            // values returned will be HIGHLIGHTED and the checkbox next to value will be CHECKED in the listing

            var theTableCombo = Ext.getCmp('myTablesComboId');
            var store = theTableCombo.getStore();

            theTableCombo.setValue(returnedTablesData); // this works partially, to return all records found, but they are not highlighted in the combo list
            //theTableCombo.setValue(store.getAt(0).get('TABLENAME')); // this works partially -  record is highlighted in combo list, but only returns the first record
        }

});

[/code] 
```

正如您所看到的，当我们进入“else”语句时，有一个表列表我可以发回组合。但是我得到了返回的列表，但它们只显示在组合文本字段中，当我打开组合时，这些值没有突出显示。

如果我使用 - theTableCombo.setValue(store.getAt(0).get('TABLENAME'));- 我能够检索返回的第一条记录并在组合中突出显示该记录，但只有第一条记录。我希望所有返回的记录都显示在组合中，作为突出显示的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:38:46.263

鉴于您已经可以选择单个记录的解决方案，以下工作不会：

```
var iValues = [];

store.each( function( aRecord ) {
    iValues.push ( aRecord.get('TABLENAME') );
}, this);

theTableCombo.setValue ( iValues ); 
```

I'm not aware of any better way of doing this (as in without the each).

# java - 没有通过 jax ws 生成 java 工件

> ID：11923196
> 
> 赞同：2
> 
> 时间：2012-08-12T15:04:29.900
> 
> 标签：java, xsd, jax-ws

我正在使用 JAX-WS 2.1 从 xsd 文件为 Web 服务生成工件。

这里是有问题的工件的 XSD 定义：

```
<xs:simpleType name='Example'>
    <xs:annotation>
      <xs:documentation>Example</xs:documentation>
    </xs:annotation>
    <xs:restriction base='xs:string'>
      <xs:minLength value='0'/>
      <xs:maxLength value='1'/>
    </xs:restriction>
</xs:simpleType> 
```

Jax WS 不生成工件示例。我没有看到名为 Example 的类。

但是当我将枚举添加到 XSD 定义时，JAX-WS 成功生成它：

```
<xs:simpleType name='Example'>
    <xs:annotation>
      <xs:documentation>Example</xs:documentation>
    </xs:annotation>
    <xs:restriction base='xs:string'>
      <xs:minLength value='0'/>
      <xs:maxLength value='1'/>
      <xs:enumeration value='A'/>
    </xs:restriction>
</xs:simpleType> 
```

如果有人知道问题所在，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:55:53.090

`xs:minLength`,`xs:maxLength`不能与`xs:enumeration`. Enumeratio 是固定值的集合，`xs:minLength`，`xs:maxLength`对于在应用程序中输入的值来说是必需的。所以只使用枚举

```
 <xsd:restriction base="xsd:string">
     <xsd:enumeration value="A"/>
     <xsd:enumeration value="B"/>
     <xsd:enumeration value="C"/>
  </xsd:restriction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:14:54.913

要为您的场景获取一个类，您需要一个自定义绑定。[SO 上的这篇文章](https://stackoverflow.com/questions/6031572/howto-generate-java-enum-from-xml-schema-with-jaxb)向您展示了自定义绑定文件的结构。

您需要记住的一件事是，默认情况下 JAXB 将为复杂类型生成一个类，而不是为简单类型生成一个类。

# c# - .net 缓存敏感数据是否会在安全方面造成危险或存在任何安全问题？

> ID：11923198
> 
> 赞同：6
> 
> 时间：2012-08-12T15:04:31.860
> 
> 标签：c#, asp.net, .net, web-services, web

我正在使用 asp.net 4。我想知道缓存敏感数据是否安全？在安全方面或任何其他安全问题上是否危险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:21:05.037

嗯，是。天生持有某样东西意味着不应该得到它的人有更多机会得到它。如果它是敏感的，那么它就是一个新引入的危险。

两个相关的问题是：

1.  泄露的可能性有多大。
2.  这是多么敏感。

缓存在内存中的东西不太可能泄露，但有可能。

缓存在内存中并可通过会话或 cookie 访问的内容更有可能被泄露（分别劫持会话或 cookie）。

缓存在数据库中的东西更容易被泄露（窃取文件比内存转储更容易）。

以现实世界的例子为例，具有“记住我”选项的网站。这个可以，大多数社交网站都可以。这增加了某人获得冒充您所需数据的风险，但更糟糕的是，这可能意味着他们会四处发送垃圾邮件，直到您的帐户被禁止 - 烦人但不是世界末日。

大多数银行网站没有“记住我”选项。泄漏的风险同样低（如果他们在某些操作之前坚持要您确认，确实会降低），但等效数据的价值要高得多，风险已经无法接受。

编辑：在我给出的示例中要注意的一件重要事情。“记住您”的站点通过以某种方式记住您已登录，而不是这样做所需的用户/通行证来做到这一点（使用 OpenID 的网站甚至看不到用户/通行证）。如果您记住了一个用户/通行证，则可能会泄露在许多站点中使用的用户/通行证，而不是冒险让某人仅登录您的站点，因此风险再次高得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:11:46.190

根据微软的模式和实践，这是他们建议的

[不要缓存敏感数据](http://msdn.microsoft.com/en-us/library/ff650867.aspx)

> 如果您的服务方法包含敏感数据，例如密码、信用卡号或帐户状态，则不应对其进行缓存。如果敏感数据缓存在客户端计算机上，则会产生严重的安全隐患，因为它会将有趣的数据留给攻击者。
> 
> 执行以下步骤以确保不缓存敏感数据：
> 
> 审查敏感数据的操作。查看所有操作以了解敏感数据的使用情况。这可能包括但不限于： 包含个人身份信息 (PII) 或可用于派生不应与用户共享的 PII 的信息 用户提供但不希望与应用程序的其他用户共享的信息来自并非旨在与用户共享的外部可信来源的信息 查看敏感数据缓存操作。查看每个操作如何管理敏感数据并确保它没有被缓存。您可以查看三种敏感数据缓存模式： 自定义缓存代码，例如使用 Dictionary 或 SortedList 对象***通过 System.Web.Caching.Cache 进行 ASP.NET 缓存***。使用企业库缓存块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T15:11:34.510

这取决于你用它做什么。数据保存在 Web 服务器的内存中。除非您编写了一种方法来访问这些数据，否则将无法访问这些数据，或者攻击者可以访问您的源代码并拥有对 Web 应用程序的写入权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:16:05.753

我倾向于缓存加密数据，只在请求点进行解密。最后将内存清零。

猜猜如果它以纯文本形式留在内存中，攻击者从内存转储中解决问题不会太难。

# c# - 具有关系的简单 ORM

> ID：11923201
> 
> 赞同：3
> 
> 时间：2012-08-12T15:05:00.520
> 
> 标签：c#, orm, windows-runtime

对支持 Windows 8 / WP8 关系的 ORM 有什么建议吗？

```
class Person {
    int id;
    int Name;
    List<Address> Addresses;
}

class Address {
    int id;
    string Street;
    string Country;
} 
```

如果您确实在 person 上创建表，它也应该创建 Address 表，并且对 Person 的任何选择查询也将返回关联的地址。我知道 EF/nHibernate 会这样做，但不幸的是，我们不再使用 WinRT 获得 System.Data。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:01:24.520

您最好的选择可能是使用[sqlite-net](https://github.com/praeclarum/sqlite-net)，它是 SQLite 的微型 ORM

蒂姆豪雅在这里有一篇关于这个的文章。 [http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

# vb.net - vb.net多线程线程增加相同Prograssbar或Integer

> ID：11923203
> 
> 赞同：0
> 
> 时间：2012-08-12T15:05:12.710
> 
> 标签：vb.net, multithreading

我正在使用多个线程来执行某些进程，并且我想在进度条中显示总进度，那么如何以安全的方式执行 ProgressBar1.Increment(1)？

```
Public Sub thread1process()
    For i = 0 To t1.Rows.Count - 1
        t1.Rows(i)("cname") = "Thread1"
        t1.Rows(i)("PD") = i
        t1.Rows(i)("PDP") = i
        t1.Rows(i)("TPD") = i
        t1.Rows(i)("TPDP") = i
        ProgressBar1.Increment(1)
    Next
End Sub

Public Sub thread2process()
    For i = 0 To t2.Rows.Count - 1
        t2.Rows(i)("cname") = "Thread2"
        t2.Rows(i)("PD") = i
        t2.Rows(i)("PDP") = i
        t2.Rows(i)("TPD") = i
        t2.Rows(i)("TPDP") = i
        ProgressBar1.Increment(1)
    Next
End Sub 
```

另外我将如何同时从多个线程中增加一个公共变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:09:02.743

> 如何以安全的方式执行 ProgressBar1.Increment(1)？

您可以使用[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)Form 上的方法来编组主 UI 线程上的调用。

> 另外我将如何同时从多个线程中增加一个公共变量？

使用[`Interlocked.Increment`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:08:47.320

理想情况下，您希望在主线程的不同线程上更新 GUI。[后台工作线程](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.80%29.aspx)应该适合你。

# php - 使用 for / foreach 循环更新

> ID：11923207
> 
> 赞同：-1
> 
> 时间：2012-08-12T15:05:29.460
> 
> 标签：php, mysql, loops, for-loop

我在更新脚本的一部分时遇到了一些问题。

我有一个网页，用户可以在其中标记他们想要“回收”以用于其他用途的每个用户旁边的复选框。

我将用户 ID 存储在这样的数组中：

```
$refsid= explode(',',$_POST['referralIds']); 
$users->_recycleMulti($membershipData['recycle_price'], $userdata['username'], $refsid); 
```

然后，在我的`_recycleMulti`功能中，我希望进行实际的回收。无论是只选择了一个用户，还是10个。因此，我使用的是`for loop.`

然而，它仍然只更新**一个**用户。

我的 _recycleMulti 函数如下所示：

```
function _recycleMulti($value, $username, $referrals_array){

        for($i=0; $i < count($referrals_array); $i++){

            mysql_query("do the update here");

        }
        return "success!"; 

    } 
```

`var_dump($_POST['referralIds']);`正在返回：

```
string(3) "4,5" 
```

这是正确的，因为我检查了两个复选框。ID 与数据库中的 ID 匹配。

```
var_dump($refsid);  is returning:

array(2) { [0]=> string(1) "4" [1]=> string(1) "5" } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:31:04.277

您可以将 for 循环更改为 foreach 虽然它不应该对执行产生影响

```
foreach ($referrals_array as $refid) {
    echo "Updating referral ".$refid.".<br>\n";
    // execute SQL code here using $refid value
} 
```

这可能会帮助您了解正在执行的操作，或者如果这还不够好，请回显您的 SQL 语句并确保它正在执行您认为的操作。

# ios - 如何在不登录的情况下保护 Web 服务

> ID：11923208
> 
> 赞同：54
> 
> 时间：2012-08-12T15:05:32.313
> 
> 标签：ios, web-services, security

我有一个与网络服务对话的移动应用程序（目前是 IOS 和很快的 Android）。没有登录，数据不是私人的。基本上，该应用程序发布一个标记（经度、纬度）并获取最近的 25 个标记以显示在地图上。

这是一个非常微不足道的应用程序，我无法想象有人会付出巨大的努力来滥用 Web 服务。但是，我可以看到有人在发布许多标记时很有趣。我最担心的是有人在运行一个推送许多请求的脚本（使用昂贵的带宽并对我的应用程序数据进行胡说八道）。

我慢慢得出结论，这并不安全。最好的答案是“不要这样做”。不要提供未经身份验证的 Web 服务。没有多少服务如此开放。Google 的 You Tube API 是开放的，但大多数都不是。不幸的是，我别无选择。因此，经过几天的研究，这是我的想法。请注意，我离安全专家还很远，我相信我的方法可以改进。但这可能会为您指明正确的方向。希望更有经验的人可以加入并纠正/改进这一点。我发现[这篇文章](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)和评论特别有用。

**消息级安全**

我将使用哈希加密来保护味精。客户端和 Web 服务都保留一个共享密钥的副本，该密钥用作盐以从 URL 和所有 POST 参数创建哈希。散列作为附加参数传递，并且在另一端重建和比较散列（使用共享密钥作为盐）。在您了解任何移动客户端代码都可以在几分钟内进行逆向工程之前，这非常好。在这一点上，这条防线完全没有用。

**客户措施**

客户端包括消息速率限制作为限制诚实用户发送的消息数量的措施。再一次，这对于越狱移动设备的攻击者来说毫无用处。

**服务器端安全**

因此，服务器端必须尽可能多地采取额外的安全措施，以独立于假设您的客户端（和共享机密）受到损害的情况。这是我所拥有的：

一个 msg arg 是用于限制重放攻击的 UTC 时间。这应该可以防止攻击者在服务器上重复触发相同的消息。

服务器通过 IP 进行速率限制。是的，IP 很容易被欺骗，并且代理切换是孩子们的游戏，但是当你拥有这么少的东西时，一切都会有所帮助。

当然，服务器严格验证所有参数，使用参数化查询并且不返回异常。

**传输级安全**

不幸的是，我相当有信心在没有注册过程的情况下颁发单个客户端 SSL 证书是不可能的。而且因为我使用的是 msg 哈希检查（而且我的数据不是私有的），所以我不完全确定 SSL 带来了什么。但是，我可能会使用 SSL（带有一个应用程序范围的证书），因为它增加了另一个级别的安全性，可以轻松且廉价地部署（尽管每个 msg 都会花费额外的连接时间）。

**我的方法中的大洞**

我被警告说，如果该应用程序变得流行，那么有人会破坏客户端上的共享秘密。仅仅因为他们可以而且他们可能会将其发布在互联网上。所以实际上这一切都归结为服务器端。不幸的是，*我无法识别和阻止攻击者*。这是我非常喜欢的。

**最后的请求**

经过几天的研究，这就是我所拥有的。但我想要更多。我将特别感谢任何加强服务器端的想法。所以，我把我所有的 SO 点都作为赏金。是的，先生，全97分！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T19:30:59.830

实际上，在您的特定情况下，由于它目前是仅限 iOS 的应用程序，因此有一个解决方案。

1.  用户第一次下载并运行应用程序后，应用程序会访问`/access_token/create`一个提供 GUID 的 API，并通过 Apple 的推送通知将其中继回应用程序。

2.  应用程序存储此 access_token，并在所有后续请求中使用它。您的实际 API 可以根据 access_token 进行速率限制。

基本上，您让 Apple 完成所有艰苦的工作，以确保初始请求来自实际的 iOS 设备。

将其扩展到桌面客户端是可能的，但在某种程度上破坏了用户体验。只需更改第 1 步以允许`/access_token/create`接受任意请求，如果请求不是来自 iOS 设备，则强制用户在向他们发出 access_token 之前验证他们的电子邮件地址/解决验证码等。

Android 设备（对它们不太熟悉）可能有类似的推送通知机制，在这种情况下您可以使用它，或者可能没有推送通知机制，在这种情况下，您可能会让您的 Android 用户受到上面列出的不便。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-17T16:32:58.977

在谈到寻找垃圾邮件问题的全局解决方案时，我曾经听说过这个想法：强制您的客户执行一些耗时的计算。

准确地说：找到一些计算算法，可以在一眨眼之间计算出一些`z`，`x`但是只给出一个`y`计算需要相当长的时间。我不能提供实际的算法，但我确信其中有很多符合这个标准。`z``x`

现在整个过程应该如下所示：

1.  根据第一个客户端请求生成一些`session_id`and 为此`session_id`一对`x`and `y`。
2.  为您的客户提供`session_id`和`x`。
3.  客户端可以在收到数据后立即开始计算（在一些与用户交互无关的后台线程中）。
4.  要请求标记，客户必须提供`session_id`并计算`z`.
5.  您可以快速验证客户`z`是否正常，因为您已经拥有`x`并且`y`可以轻松完成。
6.  （选项 1）对于每个`session_id`商店，它被请求的频率/频率。在你怀疑它被滥用的那一刻——力量再生`x`和`y`。
7.  （选项 2）强制 new`x`并且`y`在每次连续请求时对`session_id`.

在 6 和 7 之间进行选择实际上是根据算法的复杂性与标记数据库的预期“公平”使用进行调整。如果您的估计是好的 - 邪恶的客户端永远不应该获得太多数据或使您的服务器过载。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-19T20:06:34.200

在客户端，您实际上无能为力。您必须将整个应用程序（包括任何密钥或任何其他保护机制）提供给您的用户。如果恶意用户想要对您的 Web 服务进行恶作剧，他将不得不进行一些逆向工程才能访问您的 Web 服务。你可以让这变得更难，但无论你多么努力，你都无法阻止它。

我只是实现一些服务器端速率限制（每个 IP 地址），不再担心这个。这是一场你无法赢得的战斗。如果有人真的想伤害您的服务器，他可以在不了解您的 Web 服务协议的情况下直接对它进行 DDOS。

此外，在第一次连接时自动为每个用户生成唯一的密钥或证书根本没有帮助。在攻击者对您的协议进行逆向工程后，他知道如何处理所有这些并且不必遵守您的规则。每次遇到速率限制时，没有什么能阻止他从您的服务器请求新密钥。

Kuba Wyrostek 描述的方法可以工作 - 让客户端执行一些耗时的计算，您可以在允许处理请求之前快速检查。但这不会花费太长时间，否则您的用户会抱怨电池寿命缩短。此外，攻击者可能会使用更强大的桌面硬件而不是另一部 iPhone。

最后一点——你真的认为这是必要的吗？您不希望您的用户必须注册，因此您的数据或服务不能太重要。那么，对你的应用程序进行逆向工程并用请求淹没你的服务器会得到什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T23:37:38.693

实际上，我一直在寻找实施其中一些想法的理由。到目前为止很好的问题和答案。

我同意@Kuba Wyrostek 关于将其视为垃圾邮件问题是解决方案的一部分。尤其是如果您的应用程序将包含文本消息（添加商店、服务或消息），您可能会发现向您的应用程序发送垃圾邮件的常见原因是宣传某些内容。这将导致我的第一个建议：

> **1) 将每条消息的有效性视为从 0% 到 100% valid 的百分比**。在服务器端开发一个流程以使用启发式方法将消息标记为或多或少有效。这将允许您将一些附加方法（例如强制客户端计算复杂值）仅针对需要它的那些请求。您还可以更轻松地记录和查看可能的滥用行为（并且在针对滥用行为后更轻松地清除该滥用行为）。

但是，在垃圾邮件大战中，您的应用程序确实比电子邮件服务器具有强大的优势 - 您可以控制对话的双方。这种情况实际上让我想起了另外两个您可能会发现有用的相关情况：卫星付费电视“战争”和即时通讯克隆“战争”。（例如，参考 Jeff Atwoods 关于[黑色星期天黑客](http://www.codinghorror.com/blog/2008/05/revisiting-the-black-sunday-hack.html)的帖子）。以下是这些僵局中的一些想法，可能会帮助您在猫捉老鼠的游戏中领先一点：

> **2) 要求客户端发送额外的数据**——尽可能多的关于请求的数据是有意义的。在 iOS 上，发送位置的准确度指标。在 Android 上，您实际上可以获得原始 GPS 数据，例如星历信息。然后，您可以（可能不是马上，而是稍后）开始检查这些数据的有效性。这迫使某人对请求进行逆向工程以更加努力地工作。例如，如果他们将 GPS 卫星发送到视野中，您可以根据公开数据进行检查以确认。
> 
> **3) 将你的对手强加到移动设备上**——正如@Sven 所说，你的攻击者可能使用台式电脑，这意味着“计算成本高”的请求可能变得微不足道。不要让他们这样做（或至少让他们更努力地工作）。例如，您可以让客户端计算一些数学函数（由服务器发送），然后根据手机型号查看它是否需要正确的毫秒数才能完成。或者使用来自服务器的数据执行小型 3D 渲染任务，这依赖于硬件裁剪行为。散列结果并将其发回。所有这些都在一个范围内——它是一个多任务操作系统。但这将有很大帮助。
> 
> **4) 对它们进行动态处理**- 发送需要在客户端上下文中计算的算法位。Apple 对要解释的远程代码感到有些好笑，但是像发送一些不呈现给用户的 javascript 之类的东西可能会起作用。该代码可能会提出各种难以预先预料的独特问题（屏幕分辨率、浏览器版本、WebKit 怪癖）。随着他们的追赶，您可以通过这些获得更多创意。
> 
> **5) CAPTCHA** - 如果您的启发式方法开始看到可疑数据，请强制他们进行身份验证。如果您有一个多语言应用程序，它可能就像将图片或 unicode 字符与另一个匹配一样简单。以您以后可以更新的方式渲染它。

无论如何 - 一些额外的想法。祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T04:39:23.133

在服务器端实现速率限制的最简单方法是仅使用 Web 服务器插件/模块。例如，如果您的服务在 apache 上运行，请安装并配置 mod_evasive。这将允许您根据 IP 地址、服务/URL 等进行速率限制。Mod Evasive 将比您自己实现的更有效。

如果您使用密钥，您需要有某种基于验证码的方式让客户在注册时获取密钥。您可以让它删除滥用用户的帐户。是的，当然一个参数是时间戳，它将在服务器端被验证为最近和过去。密钥将与时间戳一起加密整个有效负载，并作为附加参数添加。基于每个密钥存储请求的频率最终需要某种循环数据库，除非您只检查最后一个请求的新近度。

没有纯粹的客户端速率限制会产生任何影响。甚至从未见过您的客户端的人就可以在网络上发现您的 API。我怀疑共享秘密是否会长期有效。

您会发现许多不需要密码且仅受速率限制的 Web 服务……例如，twitter API 提供了许多速率受限的未经身份验证的 API 服务。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T08:12:07.827

这是另一个“解决方案”：

*   不要在这个问题上浪费时间。

因为：

*   您不会向世界公开公共接口，因此您可以随时通过更新 Web 服务和更新您的应用程序来更改您的 Web 服务接口。
*   该应用程序“非常琐碎”（正如您所说的那样），目前可能没有太多使用
*   你现在可能有更好的事情要做，只是在浪费时间

如果存在可疑的性能或查询峰值，请使用耗时最少的解决方案：

*   引入保存在您的应用程序中的密码 (clientid)（阻止 95% 的这些用户）如果其他程序员想要合法访问您的服务，此 clientid 以后可用于识别不同的客户端
*   引入速率限制（如上所述）

这将在 99,99% 的情况下解决您的问题，您可以立即开始工作并编写很棒的新功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-12T16:30:39.910

这很棘手，你不希望任何人篡改数据......所以你关心的不是完整性。而且由于您不维护任何客户列表……就不能担心真实性吗？

对于所有众所周知的 Web 服务攻击（如 DoS 或重放攻击），您可以获得可以阻止它们的防火墙。所以我认为你不需要太在意它们。

但是你不想发送纯文本数据，并想确保你的下载应用程序是推送数据的东西。

如果您查看您正在评估的方法：

**安全密钥**：据我了解，服务器和应用程序将共享相同的密钥，如果我正确，所有设备上的所有应用程序都将共享相同的密钥。当应用程序推送数据时，它会对实际提要进行散列处理，并通过实际提要 + 散列提要进行发送。在服务器端，您将使用密钥并对实际提要进行散列，并验证它是否与散列提要匹配。在我看来，这个解决方案主要是解决数据完整性方面的问题，这对你来说不是一个主要问题。rgt！（是的，逆向工程可能很容易。）

在上述方法中，服务器需要存储密钥因此，如果您的密钥被泄露，您的整个服务将被破坏，并且很难使用新密钥更新所有应用程序。或者，如果应用程序生成一个密钥，它必须将密钥与消息一起作为摘要或其他东西（如时间戳+一些随机数）在线发送。没那么难破解。

**证书：**即使有证书，您也可以获得相同的安全性.. 但它很难破解但很容易钢 :)。如果您在设备上保留一个私钥（当然，您必须在服务器上维护一个公钥）。您必须为每个客户端分配一个私钥，然后服务器需要为所有分配的私钥维护公钥。如果私钥被泄露，则只有单个应用程序可以被标记为红色并请求更新。

所以剩下的就是从应用程序开发的角度来看，您要避免伪造数据。为了防止恶作剧检查这些事情的唯一点是在应用程序逻辑中。您将需要缓存最后十个（或者甚至是最佳数量）提要（来自同一个 IP），并通过某种逻辑验证是否存在缺陷。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-17T17:17:50.287

您可以使用速率限制 + 客户端“软”注册。

基本上，您将生成一个设备 ID，您可以在第一次请求时将其存储在用户默认值中。对于每个请求，您都会跟踪有多少请求已发送到服务器并限制它在服务器端。这可以很快实现。

您还可以使用某种共享密钥来使用生成的设备 id + post/get 参数对您的请求进行签名

# java - 将 Backbone 集合传递给 Spring

> ID：11923210
> 
> 赞同：0
> 
> 时间：2012-08-12T15:05:46.230
> 
> 标签：java, spring, backbone.js

因此，我有一个 Backbone 集合和一堆字段，我想对它们进行 $.ajax 调用（可能是 GET）。为了访问这些数据，我应该在 $.ajax 函数的数据字段中输入什么以及我应该使用什么注释（是 @RequestParam 吗？）在 Java Spring 中获取表单的集合和组件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:15:50.590

我不直接使用 Spring，但我认为它与接受 JSON 或 HTTP 表单数据或 XML 应该没有什么不同。

您可以简单地将数据格式化为键值对并将其发送：（需要在 Spring 中将其解析为表单）

```
$.ajax({
    data:'var1=value1&var2=value2'
}); 
```

或者只是发送一个 JSON 对象并将 contentType 设置为 JSON（或者如果您愿意，可以构建一个 XML）这完全取决于您。

根据您选择的格式，您必须进行`contentType`适当的设置。[您可以在此处](http://api.jquery.com/jQuery.ajax/)阅读有关 ajax 属性的更多信息

# java - 如何在 Hibernate 4.x 中禁用日志记录？

> ID：11923213
> 
> 赞同：1
> 
> 时间：2012-08-12T15:06:24.253
> 
> 标签：java, hibernate

我是使用 Hibernate 的新手，并且已经设法让它工作，但是我的标准输出正被我想禁用的 INFO 日志消息发送到垃圾邮件中。谷歌提出了解决方案，但它们适用于似乎不起作用的旧版本的 Hibernate。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T15:15:44.153

看看这个文档：[Hibernate docs](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-logging)

# javascript - 如何从字符串中获取两个变量？

> ID：11923215
> 
> 赞同：0
> 
> 时间：2012-08-12T15:06:51.320
> 
> 标签：javascript

我有这个字符串：`'foo = bar; this = is; not = necessary'`

我想得到这个结果：`{"name" : "foo", "value" : "bar"}`

没必要，后面是什么 ;

我知道，我应该使用一些正则表达式，但我不太了解正则表达式的工作原理。

谢谢提前，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:11:31.243

你可以使用：

```
var values='foo = bar; this = is; not = necessary'.split('; ')[0].split(' = ');
var obj={"name" : values[0], "value" : values[1]} 
```

这样你就可以：

1.  `'foo = bar; this = is; not = necessary'.split('; ')`，它返回`['foo = bar','this = is','not = necessary']`
2.  你只想要第一个元素，所以`'foo = bar; this = is; not = necessary'.split(';')[0]`给`'foo = bar'`
3.  然后你再次分裂：`'foo = bar; this = is; not = necessary'.split(';')[0].split(' = ')`，这给了`['foo','bar']`
4.  最后你创建了对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:41:47.147

一种使用正则表达式在特定字符串中搜索指定名称的方法，该名称将匹配`foo = bar`字符串的一部分：

```
function getNameValuePair(string, needle) {
    if (!string || !needle) {
        return false;
    }
    else {
        var newNeedle = needle + '\\s+\\=\\s+\\w+',
            expr = new RegExp(newNeedle),
            parsed = string.match(expr).join(),
            parts = parsed.split(/\s+\=\s+/),
            returnObj = {'name' : parts[0], 'value' : parts[1]};

        return returnObj;
    }
}

var string = 'foo = bar; this = is; not = necessary',
    nameValueObj = getNameValuePair(string, 'foo');

console.log(nameValueObj); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eyJ5d/1/)。

当然，这可以进行调整以更适合您的要求。

然而，事实上：

1.  该函数检查两个参数是否存在，如果不存在，则简单地返回`false`。
2.  创建一个正则表达式模式，其中包含`needle`('foo' 在这种情况下)，后跟一个或多个空白单元，后跟一个`=`字符，然后是一个或多个空白字符。如果空白可能并不总是存在，最好更改为[`newNeedle = needle + '\\s*\\=\\s*\\w+'`](http://jsfiddle.net/davidThomas/eyJ5d/2/)（`+`匹配“一个或多个”，`*`匹配“零个或多个”）。
3.  从该模式创建一个正则表达式，
4.  测试给定的字符串以查看它是否与模式匹配，如果匹配，则将匹配项存储在`parsed`变量中，
5.  用另一个正则表达式拆分`parsed`变量，有效地拆分零个或多个空格后跟一个`=`零个或多个空格的模式，将分隔的部分存储在`parts`数组变量中，
6.  从`parts`变量构造对象。
7.  返回该变量。

稍微更新了上面的内容，因为创建一个 RegExp 的两行代码很*愚蠢*：

```
function getNameValuePair(string, needle) {
    if (!string || !needle) {
        return false;
    }
    else {
        var expr = new RegExp(needle + '\\s+\\=\\s+\\w+'),
            parsed = string.match(expr).join(),
            parts = parsed.split(/\s+\=\s+/),
            returnObj = {'name' : parts[0], 'value' : parts[1]};

        return returnObj;
    }
}

var string = 'foo = bar; this = is; not = necessary',
    nameValueObj = getNameValuePair(string, 'foo');

console.log(nameValueObj); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eyJ5d/3/)。

参考：

*   [JavaScript 正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。
*   [`string.match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match).
*   [`string.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

# url-rewriting - 使用 ISAPI 复制“index.php”以在 IIS 上重写 URL

> ID：11923216
> 
> 赞同：1
> 
> 时间：2012-08-12T15:06:51.850
> 
> 标签：url-rewriting, iis-6, isapi, isapi-rewrite

我正在使用 ISAPI_Rewrite v2 在 IIS 6 上删除我的 index.php。这就是重写的工作方式：

```
http://dev.mysite.co.uk/mypage      => http://dev.mysite.co.uk/index.php/mypage
http://dev.mysite.co.uk/anotherpage => http://dev.mysite.co.uk/index.php/anotherpage 
```

使用 $_SERVER['REQUEST_URI'] 我可以看到实际发生的事情是这样的：

```
http://dev.mysite.co.uk/mypage      => http://dev.mysite.co.uk/index.php/index.php/mypage
http://dev.mysite.co.uk/anotherpage => http://dev.mysite.co.uk/index.php/index.php/anotherpage 
```

这会导致 404 错误。重写规则包含在 httpd.ini 中，它位于我的子域的根文件夹中。这是我正在使用的规则：

```
[ISAPI_Rewrite]
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

有谁知道这可能是什么原因造成的？我发现[这篇文章](https://stackoverflow.com/questions/1463152/isapi-zend-url-rewrite-adding-extra-index-php-into-url "这个帖子")描述了同样的问题，但没有答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:12:08.870

我猜它只是循环，所以请尝试像这样修复它：

```
[ISAPI_Rewrite]
RewriteRule /(?!index\.php/.*)(.*) /index.php/$1 [L] 
```

# java - 寻找一种将 0xa5 和 0x9c 结合到 0xa59c 的方法

> ID：11923218
> 
> 赞同：1
> 
> 时间：2012-08-12T15:07:21.230
> 
> 标签：java

将 2 个字节组合成一个短字节：

```
/* combine 0xa5 and 0x9c to 0xa59c */                                                                                                                 
public class Unsigned
{
    public static void main(String[] args)
    {
        byte a = (byte) 0xa5;
        byte b = (byte) 0x9c;
        //int c = ((a&0xff)*256)&0xffff+(b&0xff); // 0
        //int c = a*256+b; // ffffa49c
        int c = (int)a*256+(int)b; // ffffa49c
        System.out.printf("%4x\n", c);
    }
} 
```

为什么它们都是不正确的？

====

可行的版本：

```
/* combine 0xa5 and 0x9c to 0xa59c */                                                                                                                 
public class Unsigned
{
    public static void main(String[] args)
    {
        byte a = (byte) 0xa5;
        byte b = (byte) 0x9c;
        //int c = ((a&0xff)*256)&0xffff+(b&0xff); // 0
        //int c = a*256+b; // ffffa49c
        //int c = (a&0xff)*256+(b&0xff); // a59c
        int c = ((a & 0xFF )<< 8) | (b & 0xFF);  // a59c
        System.out.printf("%4x\n", c);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:13:13.890

您可能希望使用按位算术而不是乘法。并且为了避免符号扩展将字节转换为 int（两者都是有符号的），您可以为第一个最低有效位 8 位应用位掩码。在代码中：

```
int a_byte = ((int)a & 0xFF);
int b_byte = ((int)b & 0xFF);
int c = (a_byte << 8) | b_byte; 
```

总和而不是按位或也可以在这里工作而不会产生任何后果。在这种情况下，也可以省略到 int 的显式转换。

回答实际问题：您插入的值实际上是负数（超过 0x7F）。两者都转换为整数的结果保持负号，这会将所有额外的 24 位设置为 1。这肯定会影响结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:11:24.940

你需要做的是：

```
int c = ((a & 0xFF )<< 8) | (b & 0xFF); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T15:24:22.257

`System.out.printf("%x\n",(short)((a << 8) | (0xff & b)));`

将其转换`short`为 2 个字节而不是`ffffa59c`

向左移动以保留 a5 和`OR`with `0xff&b`（`0xff9c`当`OR`您保留时就是这样`a5`）

# c - 允许枚举标识符有什么意义？

> ID：11923220
> 
> 赞同：10
> 
> 时间：2012-08-12T15:07:40.003
> 
> 标签：c, enums

`a`当我尝试为类型变量分配不正确的值时，为什么编译器不抱怨`enum answer`？

```
#include <stdio.h>

int main()
{
    enum answer {NO, YES};
    enum gender {MALE, FEMALE};

    enum answer a = 5; /* Assign an invalid value. */
    printf("answer: %d\n", a);

    a = MALE; /* Assign a value of wrong type */
    printf("answer: %d\n", a);

    return 0;
} 
```

这是输出：

```
$ gcc -std=c99 -pedantic -Wall -Wextra enum.c 
$ ./a.out
answer: 5
answer: 0 
```

如果`enum`不会导致类型检查，那么将语法设置为：

```
enum [identifier] {enumerator-list} 
```

我使用`answer`and`gender`作为我的枚举的标识符。允许这种语法有什么意义？

我的意思是这段代码可以很好地写成

```
enum {NO, YES};
enum {MALE, FEMALE}; 
```

允许这种语法有什么意义？

```
enum answer {NO, YES};
enum gender {MALE, FEMALE}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T15:13:00.530

> `a`当我尝试为类型变量分配不正确的值时，为什么编译器不抱怨`enum answer`？

因为在 C 中， an`enum`实际上等同于 an `int`。它像它一样被标准化，只是太多的程序依赖于这种行为来改变它。

在 C++ 中，它们是不同的类型，编译器会抱怨：

```
$ g++ -Wall -Wextra a.c
a.c: In function 'int main()':
a.c:8:24: error: invalid conversion from 'int' to 'main()::answer' [-fpermissive]
a.c:11:14: error: cannot convert 'main()::gender' to 'main()::answer' in assignment 
```

> 允许这种语法有什么意义？

我的快速猜测是前向兼容性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T15:19:47.767

C 将值直接公开`enumeration`为整数，而在 C++`enum`中是**实类型**。因此在 C++`enum`中会导致**类型检查**，而在 C 中 enum 仅表示 int 类型的常量。因此整数和枚举值可以在所有算术运算中混合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:56:07.860

假设：

```
enum answer {NO, YES};

enum gender {MALE, FEMALE}; 
```

和：

```
enum answer bla = YES; 
enum gender blop = MALE;
int bip = 0; 
```

虽然 C 标准没有要求，但它允许实现在以下情况下发出警告：

```
bla = blop;

bip =  bla; 
```

请注意，`enum`类型是算术类型，并且始终允许在不同算术类型的对象之间进行分配，但实现仍然可以自由警告。正如一些人提到的评论，`enum`C++ 的类型规则是不同的。

**编辑**：另一个例子：

```
enum ans {
    YES,
    NO,
    MAYBE
};

enum ans a = /* initializer */;

switch (a)
{
    case YES:
        break;
    case NO:
        break;
} 
```

使用`-Wall`（即`-Wswitch`）， `gcc`能够警告：

> tst.c:15:5：警告：枚举值“可能”未在开关中处理

如果你有：

```
enum {
    YES,
    NO,
    MAYBE
};

int a = /* initializer */; 
```

`gcc`将无法警告。因此，实际上使用`enum`类型而不是仅使用`enum`常量有助于静态分析器工具。

# ajax - jquery ajax返回html结果

> ID：11923221
> 
> 赞同：0
> 
> 时间：2012-08-12T15:07:57.233
> 
> 标签：ajax, jquery

我正在使用 jquery ajax 发布用户名和密码并返回结果，它与 GET 方法完美配合，但使用 post 方法发送数据但不返回 html 结果，这是我的代码：

```
$.ajax({
    type: "POST",
    url: "panel.aspx",
    data: username + ";" + pw,
    success: function (result) {
        $("#midiv").html(result);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:16:00.433

```
$.ajax({
    type: "POST",
    url: "panel.aspx",
    data: {username: username, password: pw}
}).done(function(result) {
    $("#midiv").html(result);
}); 
```

您还需要更改服务器端脚本以侦听 POST 请求而不是 GET 请求，例如在 PHP 中它将是：

```
$user = $_POST['username'];
$pw = $_POST['password']; 
```

不太确定如何在 aspx 中做到这一点，但我猜你会弄清楚的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:10:40.763

尝试这个：

```
$.ajax({
    type: "POST",
    url: "panel.aspx",
    data: {
        username: "foo",
        pw: "bar"
    },
    success: function (result) {
        $("#midiv").html(result);
    }
}); 
```

您正在执行的方式是在 GET 请求 URL 中发送变量。要通过 post 发送数据，请在`data`配置中定义一个对象，其中的键代表您要发送的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:12:59.543

您没有正确发送数据，请尝试：

```
$.ajax({
    type: "POST",
    url: "panel.aspx",
    data: 'username=' + username + "&password=" + pw,
    success: function (result) {
        $("#midiv").html(result);

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:26:01.070

尝试;

```
$.ajax({
    type: 'POST',
    url: 'panel.aspx',
    data: {
          'username=' + uname "&password=" + pword,
//Note:- uname and pword are variables and not text
          },
    success: function (result) {
        $("#midiv").html(result);

    }
}); 
```

在您的 aspx 中，您可能会捕获类似的数据；

```
Dim uname, pword
uname = Request.Form("username")
pword = Request.Form("password") 
```

希望这可以帮助...

# php - 新用户消息的数据库方案

> ID：11923229
> 
> 赞同：0
> 
> 时间：2012-08-12T15:08:57.287
> 
> 标签：php, mysql

我想知道一个好的数据库方案，用于新用户在注册后看到的消息，然后在登录后看到该消息，就像它会告诉欢迎访问网站一样。交朋友等。喜欢下面的图片

![在此处输入图像描述](../Images/5cec28a46e673228fc12eb47847af7ff.png)

就像每个刚接触网站的用户都会看到这条消息，然后当用户点击它时，下次他/她登录时就看不到它了。我是否必须为每个用户的每个 n 维护一个数据库记录？我有点困惑。我不知道还有什么其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:23:29.760

例如，如果您已经有一个包含用户信息的表格，您可以做什么。我假设您有，因为您正在显示用户的头像。

添加一个名为“介绍”的列。如果用户没有点击自我介绍，则给它一个 0，并且在他们介绍之后它会变为 1。因此，您每次可能想要显示此消息时都进行查询以检查“介绍”列是否有该特定用户的 1 或 0。

# php - scandir() 按修改日期排序

> ID：11923235
> 
> 赞同：32
> 
> 时间：2012-08-12T15:10:15.367
> 
> 标签：php, arrays, sorting, scandir

我试图使`scandir();`函数超出其书面限制，我需要的不仅仅是它目前支持的 alpha 排序。我需要对要按`scandir();`修改日期排序的结果进行排序。

我已经尝试了一些我在这里找到的解决方案以及来自不同网站的其他一些解决方案，但没有一个对我有用，所以我认为我在这里发帖是合理的。

到目前为止，我尝试过的是：

```
function scan_dir($dir)
{
    $files_array = scandir($dir);
    $img_array   = array();
    $img_dsort   = array();
    $final_array = array();

    foreach($files_array as $file)
    {
        if(($file != ".") && ($file != "..") && ($file != ".svn") && ($file != ".htaccess"))
        {
            $img_array[] = $file;
            $img_dsort[] = filemtime($dir . '/' . $file);   
        }
    }

    $merge_arrays = array_combine($img_dsort, $img_array);
    krsort($merge_arrays);

    foreach($merge_arrays as $key => $value)
    {
        $final_array[] = $value;    
    }

    return (is_array($final_array)) ? $final_array : false;
} 
```

但是，这似乎对我不起作用，它只返回 3 个结果，但它应该返回 16 个结果，因为文件夹中有 16 个图像。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-12T15:50:58.797

```
function scan_dir($dir) {
    $ignored = array('.', '..', '.svn', '.htaccess');

    $files = array();    
    foreach (scandir($dir) as $file) {
        if (in_array($file, $ignored)) continue;
        $files[$file] = filemtime($dir . '/' . $file);
    }

    arsort($files);
    $files = array_keys($files);

    return ($files) ? $files : false;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-23T17:46:21.107

这是一个很好的问题，[Ryon Sherman 的回答](https://stackoverflow.com/a/11923516/117259)提供了一个可靠的答案，但我需要更多的灵活性来满足我的需求，所以我创建了这个更新的函数：`better_scandir`.

目标是让[`scandir`](https://www.php.net/manual/en/function.scandir.php)排序标志按预期工作；不仅仅是 Ryon 答案中的反向数组排序方法。并且还明确设置[`SORT_NUMERIC`](https://www.php.net/manual/en/function.sort.php)数组排序，因为这些时间值显然是数字。

用法是这样的；只需切换[`SCANDIR_SORT_DESCENDING`](https://www.php.net/manual/en/function.scandir.php)到[`SCANDIR_SORT_ASCENDING`](https://www.php.net/manual/en/function.scandir.php)默认值，甚至将其留空：

```
better_scandir(<filepath goes here>, SCANDIR_SORT_DESCENDING); 
```

这是函数本身：

```
function better_scandir($dir, $sorting_order = SCANDIR_SORT_ASCENDING) {

  /****************************************************************************/
  // Roll through the scandir values.
  $files = array();
  foreach (scandir($dir, $sorting_order) as $file) {
    if ($file[0] === '.') {
      continue;
    }
    $files[$file] = filemtime($dir . '/' . $file);
  } // foreach

  /****************************************************************************/
  // Sort the files array.
  if ($sorting_order == SCANDIR_SORT_ASCENDING) {
    asort($files, SORT_NUMERIC);
  }
  else {
    arsort($files, SORT_NUMERIC);
  }

  /****************************************************************************/
  // Set the final return value.
  $ret = array_keys($files);

  /****************************************************************************/
  // Return the final value.
  return ($ret) ? $ret : false;

} // better_scandir 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T15:49:52.457

替代示例..

```
$dir = "/home/novayear/public_html/backups";
chdir($dir);
array_multisort(array_map('filemtime', ($files = glob("*.{sql,php,7z}", GLOB_BRACE))), SORT_DESC, $files);
foreach($files as $filename)
{
  echo "<a>".substr($filename, 0, -4)."</a><br>"; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-20T01:03:24.353

另一个`scandir`保留最新的 5 个文件：

```
public function checkmaxfiles()
{

    $dir = APPLICATION_PATH . '\\modules\\yourmodulename\\public\\backup\\';
    // '../notes/';
    $ignored = array('.', '..', '.svn', '.htaccess');
    $files = array();
    foreach (scandir($dir) as $file) {
        if (in_array($file, $ignored)) continue;
        $files[$file] = filemtime($dir . '/' . $file);
    }
    arsort($files);
    $files = array_keys($files);
    $length = count($files);
    if($length < 4 ){
        return;
    }
    for ($i = $length; $i > 4; $i--) {
           echo "Erase : " .$dir.$files[$i];
           unlink($dir.$files[$i]);
    }

} 
```

# php - 这个Mysql选择，php代码有什么问题？

> ID：11923236
> 
> 赞同：1
> 
> 时间：2012-08-12T15:10:23.120
> 
> 标签：php, mysql, sql

当我尝试运行此代码时，没有显示任何结果。请帮助我

...一些代码在这里...

```
$result = mysql_query("select  *  from dataform where  date between '" . $d1 . "' and '" . $d2 . "'");

if (!$result) {
    echo 'No result';
}
else{
    echo $d1;
    echo $d2;
    echo "<table class=\"hovertable\">";

    echo "
<tr onmouseover=\"this.style.backgroundColor='#ffff66';\" onmouseout=\"this.style.backgroundColor='#d4e3e5';\">";

    echo "<th>File No</th>";
    echo "<th>Manufactor</th>";
    echo "<th>Address</th>";
    echo "<th>Supplier</th>";
    echo "<th>Place Site</th>";
    echo "<th>Tender Ref</th>";
    echo "<th>Award No</th>";
    echo "</tr>";
    while ($row = mysql_fetch_array($result)) {
        echo "<tr onmouseover=\"this.style.backgroundColor='#ffff66';\" onmouseout=\"this.style.backgroundColor='#d4e3e5';\">";
        echo "<th>" . $row["fileno"] . "</th>";
        echo "<th>" . $row["manufacture"] . "</th>";
        echo "<th>" . $row["address"] . "</th>";
        echo "<th>" . $row["sup"] . "</th>";
        echo "<th>" . $row["placesite"] . "</th>";
        echo "<th>" . $row["tenderref"] . "</th>";
        echo "<th>" . $row["awardno"] . "</th>";
        echo "</tr>";
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T15:15:11.560

`DATE`尝试使用反引号**`**转义您的列，因为它是 MySQL 数据类型。另一个建议是避免使用查询的字符串连接，因为它容易发生 mysql 注入。使用**[PHP PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLi](http://php.net/manual/en/book.mysqli.php)**。

使用 PDO 的示例：

```
<?php
$stmt = $dbh->prepare("SELECT * FROM dataform WHERE  `date` BETWEEN ? AND ?");

$stmt->bindParam(1, $d1);
$stmt->bindParam(2, $d2);

$stmt->execute();

$result = $stmt->fetchAll(PDO::FETCH_ASSOC); //Fetch all results in form of associative array.

?> 
```

***请记住始终清理您的输入。***

**更新 1**

您没有在`WHILE`循环中检查条件。您现在的做法是分配一个错误的值。尝试使用`==`

代替

```
while ($row = mysql_fetch_array($result))
{

} 
```

改成这个

```
while ($row == mysql_fetch_array($result))
{

} 
```

# php - jqGrid：如何复制一行？

> ID：11923237
> 
> 赞同：0
> 
> 时间：2012-08-12T15:10:23.493
> 
> 标签：php, jqgrid

我正在使用 jqGrid PHP。添加新行（内联模式）时，如何使用与最后选择的行相同的单元格数据预填充新行？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T15:30:11.357

您可以使用全局变量从 onSelectRow 事件中的最后一个选定行中获取值，如下所示。

```
var lastsel= jQuery('#grid').jqGrid('getGridParam','selrow'); 
```

现在，在添加新行时，您可以像这样使用 addRowData

```
$("#grid").addRowData(rowid,data, position, srcrowid); 
```

其中数据，可以从 lastsel var 中获取。

请参阅[此](https://stackoverflow.com/questions/3651585/jqgrid-how-to-add-a-new-row-inside-the-grid-not-via-a-modal)以供进一步参考。

# search - 如何查找由许多不同用户创建的数据库中的所有文档？

> ID：11923239
> 
> 赞同：0
> 
> 时间：2012-08-12T15:10:34.667
> 
> 标签：search, view, xpages, relational

我需要在数据库中查找由 x 个用户创建的所有文档，结果必须是来自所有这些用户的文档的组合（按日期排序）列表/集合。

所以我有一个包含例如 100 个用户的多值字段，我现在需要以编程方式返回一个集合，其中包含由这些用户创建的数据库中的所有文档。

这里值得一提的是，这 100 个用户是动态的，因此在另一个文档中可能有 100 个不同的用户用于搜索。

我已经尝试过以下类型的查询，但我相信我在搜索查询中遇到了某种限制。（看起来如果查询太长我得到的查询是无法理解的）

FIELD CreatedBy 包含“Thomas”或 FIELD CreatedBy 包含“Peter”.... 最多 100 个这样的

此外，查找这些文档是由网络用户触发的，因此它必须相对较快。

还有其他方法可以找到这些文件吗？

谢谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:29:02.210

您最好的选择可能是按创建者排序的视图和包含 100 个 getAllDocumentsByKey 的循环。如果您对输入字段进行排序并在跳转到第一个文档后直接浏览视图导航器，则可以运行比较。结果可以添加到一个文件夹（您需要管理不同查询集的文件夹并具有清理例程），该文件夹按您的需要进行排序，或者您在内存中进行排序（想想 JavaBean）。文件夹选项使分页更容易 - 您可能不想一次性显示 10000 个结果 - 这将花费很长时间来传输。您还可以使用“结果文档”将结果存储为 JSON 并将其用作分页源。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-13T09:53:15.797

使用 Ytria 的 ScanEZ 轻松完成。他们有试验，我想

# c# - 为什么我不能将我的对象作为它的接口返回？

> ID：11923241
> 
> 赞同：0
> 
> 时间：2012-08-12T15:10:44.083
> 
> 标签：c#, generics, interface

我有一系列接口定义，所有这些定义都可以编译（所以我的对象组成正确）。对象按预期实例化。但是，当我尝试从其底层工厂返回对象时，出现以下错误：

**错误：**

> *无法将“SampleLibrary.Domain.DataAcessors.Person.SQLDataAccessor”类型的对象转换为“Common.Contracts.DataAccessors.IDataAccessorModel`2[SampleLibrary.Contracts.Models.IPerson,SampleLibrary.Domain.DataAccessors.Types.SqlServer]”。*

请记住，我试图将每个实例作为 IDataAccessor 接口返回。

**代码：**

```
public interface IDataAccessor<I, T>
{
    T AccessType { get; }
}

public interface IDataAccessorModel<I, T> : IDataAccessor<I, T>
{
    I Instance { get; }

    IResult<string> Get(I instance);
    IResult<string> Add(I instance);
    IResult<string> Update(I instance);
    IResult<string> Delete(I instance);
}

public class SQLDataAccessor : IDataAccessorModel<IPerson, IAccessType>
{
    internal SQLDataAccessor(IResult<string> result)
    {
        _connectionString = "";
        _result = result;
    }

    private readonly string _connectionString;
    private IResult<string> _result;

    public IAccessType AccessType { get { return new SqlServer(); } }
    public IPerson Instance { get; private set; }

    public IResult<string> Add(IPerson instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Get(IPerson instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Delete(IPerson instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Update(IPerson instance)
    {
        Instance = instance;
        return _result;
    }
}

public class FactoryDataAccess : IFactoryDataAccess
{
    internal FactoryDataAccess() { }

    public IDataAccessor<I, T> Create<I, T>()
    {
        var model = typeof(I);
        var target = typeof(T);

        if (model.IsAssignableFrom(typeof(IPerson)))
        {
            if (target == typeof(SqlServer)) {

                var accessor = new Person.SQLDataAccessor(new Result());

                // This next line FAILS!
                return (IDataAccessorModel<I, T>)accessor;
            }
        }

        throw new NotSupportedException("Type " + target.FullName + " and Source " + model.FullName + " is not supported.");
    }
} 
```

**更新：**
请记住，`IDataAccessorModel`您希望定义的任何所需的 DataAccess 类型都可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:18:26.080

`SQLDataAccessor`工具`IDataAccessorModel<IPerson, IAccessType>`，所以只有`<I, T>`在`<IPerson, IAccessType>`. 对此无法保证，因为该方法是通用的，并且 I 和 T 可以是任何类型，所以转换失败。

当然，由于您正在检查 I 和 T 的类型，因此您*知道*强制转换是有效的，但编译器不会。你可以这样欺骗它：

```
return (IDataAccessorModel<I, T>)(object)accessor; 
```

但是，由于`T` *has* to be `SqlServer`，将其设为泛型类型参数是没有意义的。并且由于`I`必须实施`IPerson`，因此应该对其进行限制。所以方法签名应该是：

```
public IDataAccessor<I, T> Create<T>() where T : IPerson 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:19:21.137

`SQLDataAccessor`不是泛型类，但`IDataAccessorModel<IPerson, IAccessType>`完全实现，所以你的方法`Create`应该 return `IDataAccessor<IPerson, IAccessType>`，但你可能用其他泛型类型调用它。

更改`SqlDataAccessor`为：

```
public class SQLDataAccessor<I, T> : IDataAccessorModel<I, T>
{
    internal SQLDataAccessor(IResult<string> result)
    {
        _connectionString = "";
        _result = result;
    }

    private readonly string _connectionString;
    private IResult<string> _result;

    public T AccessType { get { return new SqlServer(); } }
    public I Instance { get; private set; }

    public IResult<string> Add(I instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Get(I instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Delete(I instance)
    {
        Instance = instance;
        return _result;
    }
    public IResult<string> Update(I instance)
    {
        Instance = instance;
        return _result;
    }
} 
```

您可能想要限制`I`和`T`到接口，所以添加一个`where`约束：

```
public class SQLDataAccessor<I, T> : IDataAccessorModel<I, T> 
    where I : IPerson
    where T : IAccessType 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:32:10.130

您拥有它的方式`I`可以是派生自任何类型`IPerson`并且`T`恰好属于 type `SqlServer`，这将导致强制转换失败，因为使用不同的参数`SQLDataAccessor`实现。`IDataAccessorModel`您将需要更精确的演员表，例如：

```
return (IDataAccessorModel<IPerson, IAccessType>)accessor; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T16:00:32.880

如果我`SQLDataAccessor` 这样声明，它对我有用：

```
public class SQLDataAccessor : IDataAccessorModel<IPerson, SqlServer>
{
    ...
} 
```

你可能这样称呼它

```
var factory = new FactoryDataAccess();
var da = factory.Create<IPerson, SqlServer>(); 
```

即你用`T`being来称呼它`SqlServer`。如果您声明`T`为`IAccessType`in `SQLDataAccessor`，则不保证`IAccessType`会是`SqlServer`. 因此铸造错误。（但是，`SqlServer`保证是`IAccessType`因为它可能实现它。）

# python - Python UnicodeEncodeError，但我已将参数编码为 UTF-8

> ID：11923242
> 
> 赞同：3
> 
> 时间：2012-08-12T15:10:43.970
> 
> 标签：python, django, unicode, md5, hash

这是我的代码：

```
def renren_get_sig(params):
    cat_params = ''.join([u'%s=%s'%(unicode(k), unicode(params[k])) for k in sorted(params)])
    sig = hashlib.md5(u"%s%s"%(unicode(cat_params), unicode(SEC_KEY))).hexdigest()
    return sig 
```

异常消息是：

> 异常类型：UnicodeEncodeError
> 异常值：“ascii”编解码器无法对位置 138-141 中的字符进行编码：序数不在范围内（128）

dic 参数值如下：

```
params ={
'access_token':u'195036|6.3cf38700f.2592000.1347375600-462350295',
 'action_link': u'http://wohenchun.xxx.com',
 'action_name': u'\u6d4b\u8bd5\u4e00\u4e0b',
 'api_key': u'8c0a2cded4f84bbba4328ccba22c3374',
 'caption': u'\u7eaf\u6d01\u6307\u6570\u6d4b\u8bd5',
 'description': u'\u4e16\u754c\u8fd9\u4e48\u4e71\uff0c\u88c5\u7eaf\u7ed9\u8c01\u770b\uff1f\u5230\u5e95\u4f60\u6709\u591a\u5355\u7eaf\uff0c\u8d85\u7ea7\u5185\u6db5\u7684\u4f60\uff0c\u6562\u4e0d\u6562\u6311\u6218\u8d85\u7ea7\u5185\u6db5\u7684\u9898\u76ee?\u4e0d\u7ba1\u4f60\u6d4b\u4e0d\u6d4b\uff0c\u53cd\u6b63\u6211\u662f\u6d4b\u4e86\uff01',
 'format': u'JSON',
 'image': u'http://hdn.xnimg.cn/photos/hdn21/20120809/1440/h0dd1376.jpg',
 'message': u'\u5c3c\u?!! \u3010\u4f60\u96be\u9053\u6bd4\u6211\u66f4\u7eaf\u6d01\u4e48,\u6765\u6d4b\u8bd5\u4e00\u4e0b\u5427!\u4f20\u9001\u95e8 >>  http://wohenchun.jiongceyan.com \u3011\r\n\t\t\t\t\t\t\t\t\t\t',
 'method': u'feed.publishFeed',
 'name': u'\u4eba\u4eba\u53f2\u4e0a\u6700\u706b\u7206\u6d4b\u8bd5\u4e4b\u5355\u7eaf\u6d4b\u8bd5',
 'url': u'http://wohenchun.xxx.com',
 'v': u'1.0'} 
```

params 中的所有键值对都是 Unicode 对象。为什么我仍然会得到这样的异常？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T15:20:41.497

Unicode 是问题所在。散列算法设计用于字节，而不是 unicode 代码点。因此，在应用散列算法之前，您必须选择编码并将您的 unicode 字符串编码为字节字符串：

```
from hashlib import md5 

str_to_hash = unicode_str.encode('utf-8')
md5(str_to_hash).hexdigest() 
```

Python 跟踪器中有一个关于此问题的问题 -[调查它](http://bugs.python.org/issue2948)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:06:31.830

@Rostyslav 说得对。将字节字符串与 hashlib 一起使用。我还可以建议使用源文件编码来提高可读性吗？检查`message`参数。`\u?!!`原始代码在字符串中有错误。我把它漏掉了：

```
# coding: utf8
import hashlib

SEC_KEY = 'salt'

params = {
    u'access_token' : u'195036|6.3cf38700f.2592000.1347375600-462350295',
    u'action_link' : u'http://wohenchun.xxx.com',
    u'action_name' : u'测试一下',
    u'api_key' : u'8c0a2cded4f84bbba4328ccba22c3374',
    u'caption' : u'纯洁指数测试',
    u'description' : u'世界这么乱，装纯给谁看？到底你有多单纯，超级内涵的你，敢不敢挑战超级内涵的题目?不管你测不测，反正我是测了！',
    u'format' : u'JSON',
    u'image' : u'http://hdn.xnimg.cn/photos/hdn21/20120809/1440/h0dd1376.jpg',
    u'message' : u'尼【你难道比我更纯洁么,来测试一下吧!传送门 >>  http://wohenchun.jiongceyan.com 】\r\n\t\t\t\t\t\t\t\t\t\t',
    u'method' : u'feed.publishFeed',
    u'name' : u'人人史上最火爆测试之单纯测试',
    u'url' : u'http://wohenchun.xxx.com',
    u'v' : u'1.0'}

def renren_get_sig(params):
    data = u''.join(u'{0}={1}'.format(k,v) for k,v in sorted(params.items()))
    return hashlib.md5(data.encode('utf8') + SEC_KEY).hexdigest()

print renren_get_sig(params) 
```

输出：

```
085b14d1384ba805d2d5d5e979913b27 
```

# objective-c - @synchronized vs GCD dispatch_barrier_async

> ID：11923244
> 
> 赞同：11
> 
> 时间：2012-08-12T15:10:56.227
> 
> 标签：objective-c, concurrency, grand-central-dispatch

我第一次开始控制队列，感觉我对如何使用它们有了很好的掌握，并感谢 Apple 让它们非常易于使用。

然而，我遇到的是多个线程读取和写入相同对象的挑战。在[这个问题](https://stackoverflow.com/questions/11920584/mutating-array-while-reading-not-enumerating)中，我得到了[这个很好的答案](https://stackoverflow.com/a/11921122/768472)`@synchronized`，这让我要求大家确认一下，以确保我了解vs的优缺点`GCD dispatch_barrier_async`。

这是我的看法：

```
 @synchronized 
```

**PRO**`@synchronized` ：只要您有访问/指向它的指针，您就可以包装任何对象，从而可以轻松地从程序中的不同对象安全地处理共享数据模型

**PRO**：受 iOS 4 支持（可能更早）

```
 `dispatch_barrier_async` with custom DISPATCH_QUEUE_CONCURRENT 
```

**PRO** : 比 @synchronized 快

**CON**：DISPATCH_QUEUE_CONCURRENT 仅在 iOS 5 中可用（如此[处](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)所述），因此不适用于支持 iOS 4

**CON**：在控制来自许多其他对象的对象的读/写时不太容易使用，因为队列最容易仅对创建它们的对象可用（无需做一些工作来绕过这个限制）

**总之，**考虑到上述情况，最好的工具取决于程序的需要。

如果有人有什么要补充或指出的，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T23:20:19.860

嗯，有几点需要指出：

1) 当您使用@synchronized 时，它会为应用程序引入 iOS（或 OSX）的整个异常框架。我在 OSX 上知道这一点，它在那里对性能有影响，在 iOS 上不能肯定地说，但会期望相同。也就是说，这是使用大锤敲击钉子——在其他选项可用之前，这种能力就已经存在。我个人避免像瘟疫一样使用它，并移植了其他开源框架来使用调度信号量（我再次感谢 Mike Ash！）

2）您对“DISPATCH_QUEUE_CONCURRENT”的评论是一种红鲱鱼 - 由于 iOS 4 系统为您提供了 3 个并发队列，因此如果您需要定义自己的队列，您真的是在挑战极限。使用调度，您可以拥有异步和同步、串行和并发组，您可以等待，然后调度。这里有这么丰富的东西，你怎么能想到1）。您使用块的次数越多，您将使用它们的次数越多！

编辑：我在我的 iOS 4.3 应用程序中使用了自定义并发队列，以及所有 Mike Ash 屏障技术。queue.h 文件将其显示为可用：

```
__OSX_AVAILABLE_STARTING(__MAC_10_6,__IPHONE_4_0)
DISPATCH_EXPORT DISPATCH_CONST DISPATCH_WARN_RESULT DISPATCH_NOTHROW
dispatch_queue_t
dispatch_get_global_queue(dispatch_queue_priority_t priority, unsigned long flags);

/*!
 * @const DISPATCH_QUEUE_SERIAL
 * @discussion A dispatch queue that invokes blocks serially in FIFO order.
 */
#define DISPATCH_QUEUE_SERIAL NULL

/*!
 * @const DISPATCH_QUEUE_CONCURRENT
 * @discussion A dispatch queue that may invoke blocks concurrently and supports
 * barrier blocks submitted with the dispatch barrier API.
 */
#define DISPATCH_QUEUE_CONCURRENT (&_dispatch_queue_attr_concurrent) 
```

# sparql - Jena/Arq：查询处理卡住了

> ID：11923245
> 
> 赞同：3
> 
> 时间：2012-08-12T15:11:03.350
> 
> 标签：sparql, jena, arq

如果以下 SPARQL 查询有问题：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX :<http://www.test.at/DA.owl#>
SELECT ?ModuleName ?SLAName ?SLOName ?SLOTypeName ?SLOTHV (AVG(DISTINCT ?SLTTV) AS ?AVGTrackValue)  (COUNT(DISTINCT ?SLT) AS ?SLTCOUNT) 
WHERE {
    ?Module rdf:type :ServiceModule .
    ?SLA rdf:type :ServiceLevelAgreement.
    ?SLO rdf:type :ServiceLevelObjective .
    ?SLT rdf:type :ServiceLevelTracking .
    ?Day rdf:type :Day .
    ?Holiday rdf:type :Holiday .
    ?rel1 rdf:type :RelationFact .
    ?rel2 rdf:type :RelationFact .
    ?rel3 rdf:type :RelationFact .
    ?rel4 rdf:type :RelationFact .
    ?rel5 rdf:type :RelationFact .
    ?Module :hasName ?ModuleName .
    ?SLA :hasName ?SLAName .
    ?SLO :hasName ?SLOName .
    ?SLO :hasType ?SLOType . 
    ?SLO :hasThresholdValue ?SLOTHV .
    ?SLOType :hasName ?SLOTypeName .            
    ?SLT :hasDayName ?SLTDayName .
    ?SLT :hasType ?SLTType .        
    ?SLT :hasTrackedDateTime ?trackTime .
    ?SLT :hasTrackedValue ?SLTTV .
    ?Day :hasDayName ?DayName .
    ?Holiday :hasDate ?HolidayDate .
    ?Holiday :hasStartTime ?HolidayStartTime .
    ?Holiday :hasEndTime ?HolidayEndTime .      
    ?rel1 :hasParent ?Module .
    ?rel1 :hasChild ?SLA .  
    ?rel2 :hasParent ?Module.
    ?rel2 :hasChild ?SLT .      
    ?rel3 :hasParent ?SLA .
    ?rel3 :hasChild ?SLO .
    ?rel4 :hasParent ?SLA .
    ?rel4 :hasChild ?Day .
    ?rel5 :hasParent ?SLA .
    ?rel5 :hasChild ?Holiday .  
    Filter(regex(str(?ModuleName), "E-mail")) .
    Filter(?SLOType = ?SLTType) .
    Filter(xsd:dateTime(?trackTime)  >=  xsd:dateTime("2012-08-15T12:00:00") && ?trackTime  <  xsd:dateTime("2012-08-15T13:00:00")) .
    Filter(?DayName = ?SLTDayName || (xsd:dateTime("2012-08-15T00:00:00") = ?HolidayDate && xsd:dateTime(?trackTime) >= xsd:dateTime("2012-08-15T12:00:00") &&  xsd:dateTime(?trackTime) < xsd:dateTime("2012-08-15T14:00:00")))
} 
GROUP BY ?ModuleName ?SLAName ?SLOName ?SLOTypeName ?SLOTHV
HAVING (?AVGTrackValue < ?SLOTHV) 
```

在 potégé 4.2 中，这个查询没有任何问题，并在 1 秒内返回结果。此外，使用 SPARQLer 查询验证器 (http://www.sparql.org/query-validator.html) 进行的语法检查表明 SPARQL 查询是有效的。但是使用 jena arq 引擎，查询处理在等待结果集时一直卡住。我在命令行中使用 jena-arq-2.9.1 以及在具有以下代码的 java 应用程序中进行了尝试：

```
 Query q = QueryFactory.create(queryString);
    QueryExecution qexec = QueryExecutionFactory.create(q, currentOntologyModel);
    try {
        ResultSet results = qexec.execSelect();
        while (results.hasNext()) {
            QuerySolution soln = results.nextSolution();
            .
            .
            .
            <some other code>
            .
            .
            .
            }
        }
    } finally {
        qexec.close();
    } 
```

也许有人知道问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:38:00.797

据推测，数据在内存中。

看起来查询优化器没有找到有效的计划。开始时所有未连接`rdf:type`的都可能导致计算效率低下的中间叉积。

重新排序三重模式可能会有所帮助（可能会将 rdf:type 移到末尾？仅凭查询不足以知道 - 它取决于数据）。如果您找到更快的订单，请将其发送到 Apache 的 jena 用户列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:08:32.513

谢谢你的回答安迪。执行计划似乎有问题。现在我正在使用子选择来检索 ?SLT 的数据，并且查询工作完美。这是现在有效的查询：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX :<http://www.test.at/DA.owl#>
SELECT ?ModuleName ?SLAName ?SLOName ?SLOTypeName ?SLOTHV (AVG(DISTINCT ?SLTTV) AS     ?AVGTrackValue)  (COUNT(DISTINCT ?SLT) AS ?SLTCOUNT) 
WHERE {
?Module rdf:type :ServiceModule .
?SLA rdf:type :ServiceLevelAgreement.
?SLO rdf:type :ServiceLevelObjective .
?Day rdf:type :Day .
?Holiday rdf:type :Holiday .
?rel1 rdf:type :RelationFact .
?rel3 rdf:type :RelationFact .
?rel4 rdf:type :RelationFact .
?rel5 rdf:type :RelationFact .
?Module :hasName ?ModuleName .
?SLA :hasName ?SLAName .
?SLO :hasName ?SLOName .
?SLO :hasType ?SLOType . 
?SLO :hasThresholdValue ?SLOTHV .
?SLOType :hasName ?SLOTypeName .            
?SLT :hasDayName ?SLTDayName .
?SLT :hasType ?SLTType .        
?SLT :hasTrackedDateTime ?trackTime .
?SLT :hasTrackedValue ?SLTTV .
?Day :hasDayName ?DayName .
?Holiday :hasDate ?HolidayDate .
?Holiday :hasStartTime ?HolidayStartTime .
?Holiday :hasEndTime ?HolidayEndTime .      
?rel1 :hasParent ?Module .
?rel1 :hasChild ?SLA .     
?rel3 :hasParent ?SLA .
?rel3 :hasChild ?SLO .
?rel4 :hasParent ?SLA .
?rel4 :hasChild ?Day .
?rel5 :hasParent ?SLA .
?rel5 :hasChild ?Holiday .
{
    SELECT ?SLT ?SLTType ?ModuleName
    WHERE {
    ?SLT rdf:type :ServiceLevelTracking .
    ?rel2 rdf:type :RelationFact .
    ?Module :hasName ?ModuleName .
    Filter(regex(str(?ModuleName), "E-mail")) .
    ?rel2 :hasParent ?Module.
    ?rel2 :hasChild ?SLT    
    }
}   
Filter(?SLOType = ?SLTType) .
Filter(xsd:dateTime(?trackTime)  >=  xsd:dateTime("2012-08-15T12:00:00") && ?trackTime  <  xsd:dateTime("2012-08-15T13:00:00")) .
Filter(?DayName = ?SLTDayName || (xsd:dateTime("2012-08-15T00:00:00") = ?HolidayDate && xsd:dateTime(?trackTime) >= xsd:dateTime("2012-08-15T12:00:00") &&  xsd:dateTime(?trackTime) < xsd:dateTime("2012-08-15T14:00:00")))
} 
GROUP BY ?ModuleName ?SLAName ?SLOName ?SLOTypeName ?SLOTHV
HAVING (?AVGTrackValue < ?SLOTHV) 
```

# android - 按日期存储数据库记录

> ID：11923258
> 
> 赞同：0
> 
> 时间：2012-08-12T15:12:27.080
> 
> 标签：android, calendar

当我在我的数据库中插入一条记录时，我想输入它插入时的日期时间戳，这样我就可以对来自`Date Picker`. 这就是我在插入时获取时间戳的方式

```
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(System.currentTimeMillis());
int year = cal.get(Calendar.YEAR);
int day = cal.get(Calendar.DAY_OF_MONTH);
int month = cal.get(Calendar.MONTH);
cal.set(year, month, day);
long mDate = cal.getTimeInMillis(); 
```

mDate 是插入的内容

然后当我想在该日期运行项目查询时，我会这样做

```
public DateList(Calendar date){ //constructor
    dt = date.getTimeInMillis();
} 
```

装载机

```
@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        return new CursorLoader(getActivity(),Games.GAMES_URI,new String[] {Games.GAMES_ID},Games.GAMES_DATE + "=" +dt ,
                null,null);
} 
```

但是从`date picker`挑选正确的日期时，从中插入的时间戳不匹配，为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:16:00.030

我建议在数据库表本身中添加日期时间的默认值。例如，在 MSSQL 中，您可以将默认值 datetime 设置为等于 GETDATE()，因此如果您添加新记录，数据库将自动为您插入当前日期时间。

# jasper-reports - 在 Jasper Reports 集成中将多个参数作为附加参数传递

> ID：11923260
> 
> 赞同：0
> 
> 时间：2012-08-12T15:12:34.040
> 
> 标签：jasper-reports, oracle11g, oracle-apex

我在我的 apex 应用程序中使用[蛋白石咨询 Jasper Reports Integration](http://www.opal-consulting.de/apex/f?p=20090928:4:4384823168628130) v 1.3.0 进行报告。

在那里使用`show_report`or`get_report`程序时，我如何将多个项目传递为`additional parameters`？逗号分隔或任何其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:30:12.270

Dietmar Aust（集成工具包的开发者）他关于这个主题的博客：http: [//daust.blogspot.be/2012/08/jasperreportsintegration-passing.html](http://daust.blogspot.be/2012/08/jasperreportsintegration-passing.html)

从他的代码片段中复制：

```
-- construct addional parameter list   
l_additional_parameters := 'parameter1=' || apex_util.url_encode(:p1_filter_object_name);
l_additional_parameters := l_additional_parameters || '&parameter2=' || apex_util.url_encode(:p1_filter_object_type); 
```

> 为什么我们使用 apex_util.url_encode？这是必需的，因为我们实际上是通过 url 将参数传递给 j2ee 应用程序。

# java - 打破等待控制台输入java的无限循环

> ID：11923267
> 
> 赞同：1
> 
> 时间：2012-08-12T15:13:13.493
> 
> 标签：java, telnet

我有一个使用 org.apache.commons.net.telnet.TelnetClient 的 Java 远程登录代码

我通过以下代码从远程登录服务器读取“登录：”来提供登录信息，

```
 in = telnet.getInputStream();
    char lastChar = pattern.charAt(pattern.length()-1);
    StringBuffer sb = new StringBuffer();

    char ch = (char) in.read();
    while (true) {
       System.out.print(ch);
       sb.append(ch);
       if (ch == lastChar) {
         if (sb.toString().endsWith(pattern)) {
            return sb.toString();
         }
       }
       ch = (char) in.read();
       i++;
       // System.out.print(i);
    } 
```

但是当我给一个无效的telnet服务器提示例如“用户名：”时，它会导致无限循环等待“in.read（）;”中的“登录：”

当它在 in.read() 中等待时，我也不能在 while(_flag) 中使用任何标志或其他标志。当应用程序收到无效登录时，谁能为我提供避免无限循环的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:23:21.060

1.  创建一个单独的线程，它将在您想要的时间后退出。

2.  您将需要使用`boolean`变量作为标志、`while`循环和`break`.

3.  在连接到 telnet 成功时返回的方法中将此标志设置为 true，这将`break`在该单独线程中循环。

4.  如果这在规定的时间内没有发生，那么那个单独的线程将执行 a `System.exit(0)`，因此您的程序结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:23:46.583

您有成功标准（telnet 服务器发送`login:`）但没有失败标准。所以循环可能永远运行。

应该怎么做才能打破失败的循环？想一个条件。也许：“尝试 20 秒”或“`login:`前 100 个字符内未发送”。

您也可以逐行阅读并期望服务器发送的第一行（在一定时间间隔内）等于`login:`，否则退出并显示错误消息（这就是我在您的情况下所做的）

# java - 播放框架文档任务列表示例错误

> ID：11923269
> 
> 赞同：1
> 
> 时间：2012-08-12T15:13:35.960
> 
> 标签：java, compilation, playframework, playframework-2.0

在浏览器中：

```
Compilation error

error: cannot find symbol
In /home/william/fmj/app/controllers/Application.java at line 28.

24  public static Result deleteTask(Long id) {

25    return TODO;

26  }

27

28  static Form<Task> taskForm = form(Task.class); 

29 
```

在终端：

```
[error]   static Form<Task> taskForm = form(Task.class);
[error]               ^
[error]   symbol:   class Task
[error]   location: class Application
[error] /home/william/fmj/app/controllers/Application.java:16: error: cannot find symbol
[error]       views.html.index.render(Task.all(), taskForm)
[error]                               ^
[error]   symbol:   variable Task
[error]   location: class Application
[error] /home/william/fmj/app/controllers/Application.java:28: error: cannot find symbol
[error]   static Form<Task> taskForm = form(Task.class);
[error]                                     ^
[error]   symbol:   class Task
[error]   location: class Application
[error] 3 errors
[error] {file:/home/william/fmj/}fmj/compile:compile: javac returned nonzero exit code 
```

任何帮助是极大的赞赏。我复制并粘贴了教程中的代码 (http://www.playframework.org/documentation/2.0.2/JavaTodoList) 我不确定出了什么问题，我真的很想学习这项技术！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:51:19.287

显然您没有将`Task`模型导入`Application`控制器

您有 3 个解决方案：

1.  手动导入每个模型：

    ```
    import models.Task; 
    ```

2.  **将所有**模型完全导入您的控制器（一开始会是最好的，但是...）

    ```
    import models.* 
    ```

3.  **最推荐：使用一些***知道* **何时**以及**如何**导入所需的IDE ，`packages`并`classes`建议您**应该导入**（*或不*导入）什么（即[IntelliJ Idea](http://www.jetbrains.com/idea/) - 只是建议）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:30:06.783

我遇到了同样的问题（错误：找不到符号），确定我有

```
import models.*; 
```

但错误仍然存​​在。我正在使用 eclipse 4.2，它只是建议创建新方法`form(Class<Task>`

# jpa - Spring Mvc/Jpa-OneToMany：如何显示与另一个关联的类列表

> ID：11923270
> 
> 赞同：0
> 
> 时间：2012-08-12T15:13:40.287
> 
> 标签：jpa, spring-mvc, one-to-many

我有一个类 Module 与类序列的 OneToMany 绑定。我的目标是显示模块列表，并通过单击其中一个，显示相关的序列列表但是它不起作用，我有一个 HTTP 500 错误。

这是我的控制器：

```
@RequestMapping(value="formation", method = RequestMethod.GET)
public ModelAndView allModules() {
List<Module> allModules = moduleService.findAll();
return new ModelAndView("formation", "modules", allModules);
}

@RequestMapping(value="sequences/{module}", method = RequestMethod.GET)
public String displaySequences(@PathVariable ("module") Module module, Model model) {
List<Sequence> allSequences = sequenceService.findByModule(module);
model.addAttribute("sequences", allSequences);
return "sequences";
} 
```

以及显示模块列表以返回序列列表的 jsp

```
<c:forEach items="${modules}" var="module">
            <ul>
                <li><a href="sequences/${module}">${module.titre}</a>
                    <br/>
                </li>
            </ul>
        </c:forEach> 
```

那么，我的错误来自哪里？

当我这样做时它会起作用：

```
 @RequestMapping(value="/sequences/{moduleId}", method = RequestMethod.GET)
public String displaySequences(@PathVariable ("moduleId") Long moduleId, Model model) {
Module module = moduleService.findById(moduleId);
model.addAttribute("module", module);
return "sequences";
} 
```

我将链接更改为：

```
<a href="sequences/${module}">${module.titre} 
```

但我想了解我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:37:17.270

您无法显示序列的原因是 Spring 不知道如何解析它

`/cmap-web/sequences/com.almerys.jpa.tomcatspring.Module@12b0f0ae`

进入模块实例。

您可以在本节最后一段的Spring 文档中阅读此[内容。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates)`16.3.2.2 URI Template Patterns`为了方便，我把它贴在这里。

> @PathVariable 参数可以是任何简单类型，例如 int、long、Date 等。Spring 会自动转换为适当的类型，或者如果它失败则抛出 TypeMismatchException。您还可以注册对解析其他数据类型的支持。请参阅第 16.3.3.14 节，“方法参数和类型转换”和第 16.3.3.15 节，“自定义 WebDataBinder 初始化”。

# android - 开发“自定义地图”无漫游费

> ID：11923271
> 
> 赞同：0
> 
> 时间：2012-08-12T15:13:42.760
> 
> 标签：android, gps

首先，我是该网站的新手，也是 android 开发的新手

我想设计一个可以在安卓手机上运行的当地小镇之旅。这是一次历史之旅，所以我想使用我自己的自定义地图来表示那个时期，并使用 GPS 来确定这个人的位置。

对于那些很可能正在漫游的游客来说，我不想连接到互联网。我发现这规则谷歌地图并在其上覆盖客户地图。

如果有人可以指导我寻找替代解决方案，我将不胜感激。让我走上正确道路的一些指示会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:46:09.247

您可能想查看[Osmdroid](http://code.google.com/p/osmdroid/)，它是[OpenStreetMap](http://www.openstreetmap.org/)数据的地图库。如果您真的想要自己的自定义地图，那么可以使用 osmdroid，但我没有这方面的经验。一个更简单的解决方案是使用 OSM 数据并将您需要的任何更新贡献给您所在地区的地图，以使其对您来说足够好。您确实可以选择使用 Osmdroid 获得静态地图数据，以便您可以离线使用它。

还有许多其他库，但 Osmdroid 是我使用并且熟悉的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T04:57:56.753

使用 Eclipse 时，在 DDMS 透视图中，确保选择并突出显示正确的设备（可能是 emulator-any ）。只有这样，您才能在 logcat 视图中获得 logcat 输出。

此外，Android 插件有点古怪，有时只显示 logcat 视图中的最后一行。如果发生这种情况，请尝试清除日志。之后，您应该再次获取所有日志条目

# php - 在类中使用全局变量

> ID：11923272
> 
> 赞同：25
> 
> 时间：2012-08-12T15:13:46.673
> 
> 标签：php, sql, class, oop

我正在尝试创建一个分页类并使用类外部的变量。

但这给了我致命的错误“在非对象上调用成员函数 query()”。

这是索引文件：

```
$db = new DB_MySQL("localhost", "root", "", "test"); // connect to the database
include_once("pagi.php");

$pagination = new pagi();
$records = $pagination->get_records("SELECT * FROM `table`"); 
```

这是 pagi.php 文件：

```
class pagi {

    public function get_records($q) {
        $x = $db->query($q);
        return $db->fetch($x);
    }

} 
```

是否可以在类内部的类外部使用此变量，而无需在类内部创建一个新变量？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-12T15:29:58.180

解决这个问题的正确方法是将数据库对象注入另一个类（[依赖注入](http://www.youtube.com/watch?v=RlfLCWKxHJ0)）：

```
$db = new DB_MySQL("localhost", "root", "", "test"); // connect to the database
include_once("pagi.php");

$pagination = new Paginator($db);
$records = $pagination->get_records("SELECT the, fields, you, want, to retrieve FROM `table`");

class Paginator
{    
    protected $db;

    // Might be better to use some generic db interface as typehint when available
    public function __construct(DB_MySQL $db)
    {
        $this->db = $db;
    }

    public function get_records($q) {
        $x = $this->db->query($q);
        return $this->db->fetch($x);
    }

} 
```

另一种解决方法是将数据库类的实例注入到使用它的方法中：

```
$db = new DB_MySQL("localhost", "root", "", "test"); // connect to the database
include_once("pagi.php");

$pagination = new Paginator();
$records = $pagination->get_records("SELECT the, fields, you, want, to retrieve FROM `table`", $db);

class Paginator
{
    public function get_records($q, DB_MySQL $db) {
        $x = $db->query($q);
        return $db->fetch($x);
    }

} 
```

您选择哪种方法取决于具体情况。如果只有一个方法需要数据库的实例，您可以将其注入到方法中，否则我会将其注入到类的构造函数中。

另请注意，我已将您的课程从 重命名`pagi`为`Paginator`。恕我直言，Paginator 是该类更好的名称，因为其他人（重新）查看您的代码很清楚。另请注意，我已将第一个字母设为大写。

我所做的另一件事是更改查询以选择您正在使用的字段，而不是使用“通配符” `*`。这与我更改类名的原因相同：人们（重新）查看您的代码将确切知道将检索哪些字段，而无需检查数据库和/或结果。

**更新**

因为答案引发了关于为什么我会采用依赖注入路线而不是声明对象的讨论，所以我想`global`澄清为什么我会在`global`关键字上使用依赖注入：当你有这样的方法时：

```
function get_records($q) {
    global $db;

    $x = $db->query($q);
    return $db->fetch($x);
} 
```

当您在某处使用上述方法时，不清楚使用的类或方法取决于`$db`. 因此，它是一个隐藏的依赖项。上述情况不好的另一个原因是因为您将`$db`实例（因此是`DB_MySQL`）类与该方法/类紧密耦合。如果您需要在某个时候使用 2 个数据库怎么办。现在您必须检查所有代码才能更改`global $db`为`global $db2`. 您永远不需要更改代码来切换到另一个数据库。因此，您不应该这样做：

```
function get_records($q) {
    $db = new DB_MySQL("localhost", "root", "", "test");

    $x = $db->query($q);
    return $db->fetch($x);
} 
```

`DB_MySQL`同样，这是一个隐藏的依赖关系，并将类与方法/类紧密耦合。因此，也不可能对`Paginator`类进行正确的单元测试。您不仅要测试单元（`Paginator`类），还要同时测试`DB_MySQL`类。如果您有多个紧密耦合的依赖项怎么办？现在你突然用你所谓的单元测试来测试几个类。因此，当使用依赖注入时，您可以轻松地切换到另一个数据库类，甚至是用于测试目的的模拟类。除了只测试一个单元的好处（您不必担心由于依赖关系而得到错误的结果），它还将确保您的测试能够快速完成。

有些人可能认为单例模式是访问数据库对象的正确方法，但应该清楚，阅读以上所有内容后，单例基本上只是另一种制作方式`global`。它可能看起来不同，但它具有完全相同的特征，因此与`global`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T00:02:57.600

尽管我确实同意依赖模型很好，但对于数据库，我个人使用了一个静态连接，该连接可用于数据库类的所有实例，并在需要时创建实例进行查询。这是一个例子：

```
<?php
//define a database class
class DB {
    //the static connection.
    //This is available to all instances of the class as the same connection.
    private static $_conn;

    //store the result available to all methods
    private $result;
    //store the last query available to all methods
    private $lastQuery;

    //static connection function. connects to the database and stores that connection statically.       
    public static function connect($host, $user, $pass, $db){
        self::$_conn = mysqli_connect($host, $user, $pass, $db);
    }

    //standard function for doing queries. uses the static connnection property.
    public function query($query){
        $this->lastQuery = $query;
        $this->result = mysqli_query(self::$_conn, $query);
        //process result, return expected output.
    }
}

//create connection to the database, this connection will be used in all instances of DB class
DB::connect('local', 'DB_USER', 'DB_PASS');

//create instance to query
$test = new DB;
//do query
$test->query("SELECT * FROM TABLE");

//test function
function foo(){
    //create instance to use in this function
    $bar = new DB;
    //do query
    $bar->query("SELECT * FROM OTHER_TABLE");
    //return results
    return $bar->fetchArray();
} 
```

这样我就可以在任何函数、方法等中创建我想要的所有 DB 实例，并使用该类的本地实例来完成我的所有查询。所有实例都使用相同的连接。

One thing to note though is that this only allows for one connection to the database per defined class but I only use one so this isn't an issue for me.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T15:19:21.960

您可以将 db-connection ( `$db`) 添加到方法的调用中`get_records`：

这里只是相关的代码行：

第一个文件：

```
$records = $pagination->get_records("SELECT * FROM `table`", $db); 
```

第二个文件：

```
public function get_records($q, $db) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:22:44.473

到目前为止，其他答案肯定比使用全局更可取，因为这会破坏您的封装（例如，您需要在调用该方法之前定义该对象）。

在方法签名中强制执行或不使用类要好得多。

# android - 包错误

> ID：11923275
> 
> 赞同：0
> 
> 时间：2012-08-12T15:14:26.223
> 
> 标签：android, eclipse, package

当我运行一个简单的 hello world 程序时，会发生此错误...

```
An internal error occurred during: "Launching 1.HelloWorld".
com.android.ddmlib.IDevice.installRemotePackage(Ljava/lange/String;Z[Ljava/lang/String;)Ljava/lang/String; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T22:09:09.087

当我更新 Eclipse 的 Android 开发工具而不是 DDMS、Traceview 等其他软件包时，这发生在我身上。转到检查更新并获取那里列出的所有 Android 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:19:32.260

尝试卸载应用程序、重新启动 eclipse、清理您的项目 ( `Window`--> `Clean...`) 等。

# javascript - click() 在 rails 3.2.1 中不起作用 - 自动点击

> ID：11923276
> 
> 赞同：2
> 
> 时间：2012-08-12T15:14:29.967
> 
> 标签：javascript, jquery, click, ruby-on-rails-3.2

我正在使用 Rails 3.2.6 构建一个应用程序，并且我想创建一个功能，该功能可以在一段时间间隔后自动重新加载页面的一部分。这就是我所做的：

1.  我创建了一个名为 _hottest_beep 的部分，重新​​加载的内容应该是

2.  我像这样在主页中调用了部分

    ```
    <div class="update_beep">
    <%=render :partial=>"hottest_beeps"%>
    </div> 
    ```

3.  我创建了一个 main.js.erb 文件

    ```
    $(".update_beep").html("<%= escape_javascript(render("hottest_beeps"))%>") 
    ```

4.  我在主页上添加了一个链接，当单击该链接时，部分会自动重新加载

    ```
    <span ><%=link_to'View',{:controller=>'users',:action=>'main'},:remote=>true,:class=>'auto_click'%>
    </span>

    <div class="update_beep">
    <%=render :partial=>"hottest_beeps"%>
    </div> 
    ```

5.  然后我创建了一个名为的 JavaScript 文件`auto_click`，它将每 1 秒自动单击一次

    ```
    var fsecs = 1000;

    function feedTimer1()
    {

        if (fsecs == 0)
        {
            $('.auto_click').click();
            fsecs =1000;
            self.status = fsecs
            ftimerRunning = true
            ftimerID = self.setTimeout("feedTimer1()")
        }
        else
        {
            self.status = fsecs
            fsecs = fsecs - 1
            ftimerRunning = true
            ftimerID = self.setTimeout("feedTimer1()")
        }
    }

     window.onload = feedTimer1(); 
    ```

但似乎点击甚至不起作用。当我加载页面时，部分保持不变，但是当我单击我自己的链接时它可以工作。

注意：我还在 application.html.erb 文件中调用了 auto_click.js 文件，该文件应该将其加载到页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:24:10.233

我不确定我是否理解你的 js，但这应该有效：

```
$(function() {
  function tick() {
    $(".auto_click").click();
    setTimeout(tick, 1000);
  }
  tick();
}; 
```

在旁注中，您不应该在函数内执行 setTimeout，因为您最终*会*堆积请求。如果您需要此代码，请告诉我。

编辑：为此，您可以使用：

```
$(function() {
  window.auto_click_tick = function() {
    $(".auto_click").click();
  }
  window.auto_click_tick();
}; 
```

在你的 js.erb 文件中，添加这个

```
setTimeout(window.auto_click_tick, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:48:58.443

谢谢大家的帮助。但经过几个小时的工作，我最终解决了它。问题是我的 jquery 文件有一个错误。改变它解决了问题:)

# wpf - UI 背后的代码？鼠标悬停问题

> ID：11923279
> 
> 赞同：0
> 
> 时间：2012-08-12T15:15:09.733
> 
> 标签：wpf

与 UI 相关的 WPF 中的代码真的很难看吗？我正在尝试实现与 Visual Studio 面板类似的效果（类似于 WPF Unleashed 书中的示例）。当鼠标进入按钮“solutionManagerPanel”时，我想将网格可见性更改为可见。但是，当我的鼠标进入此网格时，它的可见性变为隐藏。

下面是xaml中的代码：

```
<Grid Grid.Column="2" Background="Gray" Visibility="{Binding ElementName=solutionManagerPanel, Path=IsMouseOver, Converter={StaticResource BooleanToVisibilityConverter}}">

                <Grid.Resources>
                    <Style TargetType="{x:Type Grid}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Resources> 
```

是否有任何简单的方法可以在 XAML 中执行此操作，或者我可以为此编写事件处理代码隐藏？这不会违反“干净的 MVVM 代码规则”吗？

# jquery - Colorbox 无法显示动态生成的图像

> ID：11923290
> 
> 赞同：3
> 
> 时间：2012-08-12T15:16:47.983
> 
> 标签：jquery, coldfusion, colorbox, mime-types

我有一个图库系统，可以生成不同大小的图像并将它们缓存在 webroot 之外。然后我在 ColdFusion 中有一个包装模板，它根据 ID 和大小参数显示图像。例如，一个 URL 可能是`'/dspImage.cfm?imageID=123&w=600'`. 这将返回`123`宽度为 的图像编号的内容`600px`。

这一切都很完美，但是当尝试使用 Colorbox jquery 插件时，它似乎无法显示以这种方式提供的图像，而是返回一大堆文本和控制字符，好像无法识别 JPG 文件的 mime 类型。

浏览器显示图像没有问题，我已经使用这种技术近十年了，没有问题，但 Colorbox 似乎无法处理它。如果我直接链接到 JPG，它在 Colorbox 中可以正常工作。

我有其他灯箱插件可以使用这种图像服务技术，但我喜欢颜色箱，如果我能提供帮助，我不愿意使用另一个灯箱。

*有没有人有什么建议？*

作为参考，从图像服务脚本发回的标头是：

```
Content-Length  178856
Content-Type    image/jpeg;charset=UTF-8
Date    Sun, 12 Aug 2012 15:07:54 GMT
Server  Microsoft-IIS/7.5
X-Powered-By    ASP.NET 
```

我注意到，当直接通过彩盒请求标头点击图像时，包含：

```
Accept  image/png,image/*;q=0.8,*/*;q=0.5 
```

但是，如果我通过 colourbox 点击图像服务脚本，这将变为：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

我认为这可能表明存在问题，直到我通过浏览器直接尝试了服务脚本和图像，它也显示：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

希望这是足够的信息，并且对某人有意义！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T16:00:09.697

在您的 ColorBox 设置中，尝试设置 photo=true

```
$("#cboxDiv").colorbox({inline:true, href:"#dynURL#", photo:true}); 
```

参考：[ColorBox 文档](http://www.jacklmoore.com/colorbox)

# javascript - Javascript 日期 +5 不会增加月份

> ID：11923292
> 
> 赞同：0
> 
> 时间：2012-08-12T15:17:04.367
> 
> 标签：javascript, date

我有以下代码不想正确地将 5 天添加到日期。这是代码：

```
// Grab previous session date so we can add 5 days and get new minDate
var currdate = new Date();
var one_day=1000*60*60*24;
var info = '';
var minDateBase = document.getElementById("class" + prevSession +  "_date").value;
var maxDateBase = document.getElementById("class1_date").value;
var minDateBits = minDateBase.split('-');
var maxDateBits = maxDateBase.split('-');
// Example Date working date 08-27-2012
// Example Date Not working date 09-03-2012
var minDate = new Date(minDateBits[2],minDateBits[0],minDateBits[1]);
var maxDate = new Date(maxDateBits[2],maxDateBits[0],maxDateBits[1]);
info = 'Selected Session Date: ' + minDate + '.' + "\n";
info = info + 'Class 1 date         : ' + maxDate + '.' + "\n";
var newMinDate = new Date();
var newMaxDate = new Date();
newMinDate.setUTCDate(minDate.getUTCDate() + 5);
newMaxDate.setUTCDate(maxDate.getUTCDate() + 42);
info = info + 'New Min. Date        : ' + newMinDate + '.' + "\n";
info = info + 'New Max Date         : ' + newMaxDate + '.' + "\n";
var maxDateDiff = newMaxDate.getTime() - currdate.getTime();
var minDateDiff = newMinDate.getTime() - currdate.getTime();
minDateDiff = Math.ceil(minDateDiff/one_day);
maxDateDiff = Math.ceil(maxDateDiff/one_day);
info = info + 'Min. Date Diff       : ' + minDateDiff + '.' + "\n";
info = info + 'Max  Date Diff       : ' + maxDateDiff + '.' + "\n";
alert (info); 
```

这是最后工作“信息”警报的输出：

> 选定的会议日期：2012 年 8 月 20 日星期一 00:00:00 GMT-0600（山地夏令时间）。
> 第 1 类日期：2012 年 8 月 20 日星期一 00:00:00 GMT-0600（山地夏令时间）。
> 新敏 日期：2012 年 8 月 25 日星期六 09:13:19 GMT-0600（山地夏令时间）。
> 新的最大日期：2012 年 10 月 1 日星期一 09:13:19 GMT-0600（山地夏令时间）。
> 分钟。日期差异：13。
> 最大日期差异：50。

这是最后非工作“信息”的输出..

> 选定的会议日期：2012 年 9 月 3 日星期一 00:00:00 GMT-0600（山地夏令时间）。
> 第 1 类日期：2012 年 9 月 3 日星期一 00:00:00 GMT-0600（山地夏令时间）。
> 新敏 日期：2012 年 8 月 8 日星期三 09:15:09 GMT-0600（山地夏令时间）。
> 新的最大日期：2012 年 9 月 14 日星期五 09:15:09 GMT-0600（山地夏令时间）。
> 分钟。日期差异：-4。
> 最大日期差异：33。

为什么“最小日期”保持相同的月份值导致时差为-4的任何想法？

谢谢，

银虎

** 更新 **

我的最后一个想法似乎已经解决了这个问题，更新了以下代码以反映：

```
var minDate = new Date(minDateBits[2],parseFloat(minDateBits[0]) - 1,minDateBits[1]);
var maxDate = new Date(maxDateBits[2],parseFloat(maxDateBits[0]) - 1,maxDateBits[1]);
info = 'Selected Session Date: ' + minDate + '.' + "\n";
info = info + 'Class 1 date         : ' + maxDate + '.' + "\n";

var newMinDate = new Date();
var newMaxDate = new Date();

newMinDate.setTime(minDate.getTime() + (5 * one_day));
newMaxDate.setTime(maxDate.getTime() + (42 * one_day)); 
```

我会继续测试，但它在最初的几次尝试中都有效......

# java - 在控制台输出调试信息

> ID：11923294
> 
> 赞同：14
> 
> 时间：2012-08-12T15:17:28.250
> 
> 标签：java, swing, debugging, console

我正在做一个`Java`应用程序，它将使用`swing`用户界面。它会要求用户通过填写​​表格来指定一些设置，然后处理它们并在`./output/`目录中生成一些文件。

在开发过程中，我想在控制台输出一些技术信息，使用`System.out.println()`方法。

完成开发后是否需要删除所有这些控制台输出？

如果是，在开发过程中显示调试信息以便在生产前轻松删除它的最佳方法是什么？

也许我应该只将`JUnit`测试用于调试目的？我刚刚开始使用它，所以我对它的功能有一个模糊的概念。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T15:19:33.050

如果您不打算使用专门的调试框架，它可能很简单：

```
if (Debugger.isEnabled())
    Debugger.log("message here"); 
```

Debugger 类只是封装了 println 调用（像这样）：

```
public class Debugger{
    public static boolean isEnabled(){
        return true;
    }

    public static void log(Object o){
        System.out.println(o.toString());
    }
} 
```

这样，当您想投入生产时，或者您可以通过更改类中的一行来修改调试行为（或禁用它）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-15T22:48:02.207

对 Debugger 类的小改进，使客户端更简洁：

```
public static void log(Object o){
    if(Debugger.isEnabled()) {
        System.out.println(o.toString());
    }           
} 
```

那么客户端只需要一行：

```
Debugger.log("....") 
```

# java - 同步不同步

> ID：11923296
> 
> 赞同：2
> 
> 时间：2012-08-12T15:17:56.067
> 
> 标签：java, android, multithreading, synchronized

`synchronized`似乎没有像我预期的那样工作。它不应该使括号内的代码相对于`synchronized`同一对象的单独代码块具有原子性吗？

我发现它在我的代码中根本没有同步。

```
private Object movementMutex_ = new Object();    

// Thread
public void run()
{
    while (run_)
    {
        synchronized(movementMutex_)
        {
            if (timeToMove_)
            {
                Log.v("meh", "timeToMove_ was true, moving");
                makeMove();
                Log.v("meh", "Move Complete. Setting timeToMove_ to false");
                timeToMove_ = false;
                Log.v("meh", "timeToMove_ is now false");
            }
        }
    }
}

// Called by a different thread so that this thread knows when to make a move
public void move()
{
    Log.v("meh", "awaiting movementMutex in move()");
    // Synchronizing so that timeToMove_ doesn't get set true while in the middle of moving and thus setting it back false prematurely
    synchronized(movementMutex_)
    {
        Log.v("meh", "move called, setting timeToMove_");
        timeToMove_ = true;
        Log.v("meh", "timeToMove_ is now true");
    }
} 
```

查看日志打印输出，我看到它们以意外的顺序打印。根据我对同步的理解，粗体的语句应该不能被非粗体打印输出解释，但事实并非如此，而我正试图避免的事情正在发生：我错过了下一步，因为我设置了它当它仍然是真实的时候是真实的，并迅速将其变为虚假。

```
 08-12 10:47:19.860: V/meh(27639): awaiting movementMutex in move()  
 08-12 10:47:19.985: V/meh(27639): move called, setting timeToMove_  
 08-12 10:47:19.985: V/meh(27639): timeToMove_ is now true  
 08-12 10:47:19.985: V/meh(27639): **timeToMove_ was true, moving**  
 08-12 10:47:20.352: V/meh(27639): awaiting movementMutex in move() 
```

下一行应该是不可能的。它不是在等待运动互斥！

```
08-12 10:47:20.352: V/meh(27639): move called, setting timeToMove_  
08-12 10:47:20.360: V/meh(27639): timeToMove_ is now true  
08-12 10:47:20.360: V/meh(27639): **Move Complete. Setting timeToMove_ to false**  
08-12 10:47:20.360: V/meh(27639): **timeToMove_ is now false** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:35:24.533

正如对问题的评论中提到的，线程能够重新进入自己的同步锁。“makeMove()”函数调用实际上是调用“move()”的发起者，这意味着它在同一个线程下执行，因此不会被锁定。简而言之，下面的代码不会导致死锁；它可以毫无问题地执行，这就是我所经历的。

```
synchronized(movementMutex_)
{
    synchronized(movementMutex_)
    {
        doSomething();
    }
} 
```

# javascript - 如何将此 Json 数组转换为 JQuery 可读的格式？

> ID：11923298
> 
> 赞同：0
> 
> 时间：2012-08-12T15:18:20.950
> 
> 标签：javascript, jquery, ajax, json, asp.net-mvc-3

有点模糊的问题，但我不确定我如何才能做到这一点。Firebug 说我的 ajax 请求中的 Json 对象（数组？）如下所示：

```
{
"jsonResult":
"[
   {\"OrderInList\":1},
   {\"OrderInList\":2}
]"
} 
```

这是通过 $.getJSON ajax 请求检索的：

```
 $.getJSON("/Json/GetOrderSelectList?parentCategoryId=" + postData, testData, function (jsonResult) {
        $('#orderInList option').remove();

        var map = {
            "TestKey1": "TestValue1",
            "TestKey2": "TestValue2"
        };

        $.each(jsonResult, function (key, value) {
            $("#orderInList").append($("<option value=" + key + ">" + value + "</option>")
            );
        }); 
```

如果我用 $.each(map) 替换 $.each(jsonResult) ，则选择列表会正确填充。否则我的选择列表只会显示“未定义”。

我在我的 MVC 控制器中序列化此操作中的 Json：

```
 public JsonResult GetOrderSelectList(int parentCategoryId)
    {
        var result = Session
            .QueryOver<Category>()
            .Where(x => x.Parent.Id == parentCategoryId)
            .OrderBy(x => x.OrderInList).Asc
           .List();

        var toSerialize =
            result.Select(r => new {r.OrderInList});

        var jsonResult = JsonConvert.SerializeObject(toSerialize);                             
        return Json(new
                        { jsonResult,
                        }, JsonRequestBehavior.AllowGet);

    } 
```

所以我认为问题可能是动作响应的 Json 格式？任何帮助表示赞赏！

**编辑答案**

下面的两个答案都对我有帮助。我似乎无法强输入变量 jsonResult 所以感谢@JBabey 指出我在读取 json 属性时的错误，并在 $.each 语句中建议函数 (key, value)。

感谢@Darin Dimitrov 帮助整理我的控制器！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:25:40.807

您的控制器操作错误。您在其中手动进行 JSON 序列化，然后将其作为 JSON 结果返回，从而以双 JSON 序列化结束。您可以直接返回数组并将 JSON 序列化管道留给 ASP.NET MVC 框架：

```
public ActionResult GetOrderSelectList(int parentCategoryId)
{
    var result = Session
        .QueryOver<Category>()
        .Where(x => x.Parent.Id == parentCategoryId)
        .OrderBy(x => x.OrderInList)
        .Asc
        .List();
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

进而：

```
$.getJSON("/Json/GetOrderSelectList?parentCategoryId=" + postData, testData, function (jsonResult) {
    $('#orderInList option').remove();
    $.each(jsonResult, function () {
        $('#orderInList').append(
            $("<option value=" + this.Id + ">" + this.Value + "</option>")
        );
    });
}); 
```

请注意，我在这里使用`this.Id`和`this.Value`。这假设 JSON 结果如下所示：

```
[{"Id": 1, "Value": "some value"}, {"Id": 2, "Value": "some other value"}] 
```

您将不得不根据您的实际`Category`模型调整这些属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:25:20.463

您将 ajax 返回的数据属性与数据本身混淆了。`$.each`如果您更正此问题，它将正常工作。

您返回的数据如下所示：

```
{
    "jsonResult": "[
        {\"OrderInList\":1},
        {\"OrderInList\":2}
    ]"
} 
```

这意味着这是传递给您的成功函数的对象。调用它`data`而不是`jsonResult`.

```
function (data) {
    ...
    $.each(data.jsonResult, function (key, value) {
        ...
    });
}); 
```

此外，您的数组是作为字符串传入的，因此您可能需要先对其进行解析，然后`$.each`才能对其进行迭代。

# java - TableLayout 中的 TableRow 导致分段错误？

> ID：11923300
> 
> 赞同：0
> 
> 时间：2012-08-12T15:18:27.907
> 
> 标签：java, android, android-layout, tablerow, android-tablelayout

我正在使用 sdk 2.3.3 编写一个 android 应用程序。

我尝试使用其中包含 TableRow 的 TableLayout 布局 xml 文件。

这是布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:stretchColumns="*"
 android:weightSum="4" >

<TableRow android:id="@+id/table_row_1">

</TableRow> 
```

在我的 GameActivity onCreate() 函数中，我有以下代码：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.game); 
```

到目前为止，我使用了一个不同的 xml 布局文件，其中包含一个运行良好的数据网格。但是由于某种原因，当我加载此布局文件时，我遇到了分段错误。

```
08-12 15:15:56.027: D/AndroidRuntime(1056): Shutting down VM
08-12 15:15:56.027: W/dalvikvm(1056): threadid=1: thread exiting with uncaught exception     (group=0x40015560)
08-12 15:15:56.087: E/AndroidRuntime(1056): FATAL EXCEPTION: main
08-12 15:15:56.087: E/AndroidRuntime(1056): java.lang.ArithmeticException: divide by     zero
08-12 15:15:56.087: E/AndroidRuntime(1056):     at     android.widget.TableLayout.mutateColumnsWidth(TableLayout.java:579)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at     android.widget.TableLayout.shrinkAndStretchColumns(TableLayout.java:568)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at     android.widget.TableLayout.measureVertical(TableLayout.java:466)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at     android.widget.TableLayout.onMeasure(TableLayout.java:431)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.View.measure(View.java:8313)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.View.measure(View.java:8313)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.View.measure(View.java:8313)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.View.measure(View.java:8313)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.os.Looper.loop(Looper.java:123)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at java.lang.reflect.Method.invokeNative(Native Method)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at java.lang.reflect.Method.invoke(Method.java:507)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-12 15:15:56.087: E/AndroidRuntime(1056):     at dalvik.system.NativeStart.main(Native Method) 
```

一般来说，我想要 4 个 tableRows 并在每个 tableRows 中添加 4 个 ImageView。

我究竟做错了什么 ？

谢谢！

克菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:01:51.900

您收到“ArithmeticException：除以零”，因为表格行中没有视图。:)

# c++ - 使用 dynamic_cast 指向其他派生类对象

> ID：11923301
> 
> 赞同：0
> 
> 时间：2012-08-12T15:18:46.707
> 
> 标签：c++, oop, dynamic-cast

我有以下情况。有两个基类：Base1、Base2 和两个派生类：Derived、sysCommandExecutor，派生如下：

```
#include <iostream>
using namespace std;

class Base1 { virtual void dummy() {} };
class Base2 { virtual void dumy() {} };
class Derived: virtual public Base1, public Base2
{ int a; };

class sysCommandExecutor : public Base2
{
public:
int b;
Base1 *ptr;
void func(void);
};

void sysCommandExecutor::func(void)
{
  Derived *d;
  d = dynamic_cast<Derived *>(ptr);
  if (d == NULL)
  std::cout << "This is NULL" << std::endl;
  else
  {
  // Call a function of Derived class
  }
}

int main () {
   try {
   sysCommandExecutor * sys =  new sysCommandExecutor;
   sys->func();
   return 0;
   }
} 
```

我想在 func 中调用“派生”类的这个函数，但 dynamic_cast 失败。我无法在 sysCommandExecutor 类中创建该函数，因为那是其他人的代码。如何使 sysCommandExecutor 类中的 ptr 指针指向 Derived 类对象？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:43:35.043

您正在引用一个未初始化的指针`ptr`

如果我将主要更改为：

```
int main () {
   sysCommandExecutor * sys =  new sysCommandExecutor;
   sys->ptr=new Derived;
   sys->func();
   delete dynamic_cast<Derived *>(sys->ptr);
   delete sys;
   return 0;

} 
```

有用

您也缺少虚拟 dtor

# python - 创建 django 表单

> ID：11923317
> 
> 赞同：15
> 
> 时间：2012-08-12T15:19:50.823
> 
> 标签：python, django, django-forms

我正在努力了解 django 表单。我一直在阅读各种文档，但不能完全掌握这些概念。我必须掌握模型、视图和模板。我要做的是创建一个表单，其中包含由数据库中的值填充的下拉列表和复选框的各种字段。

我有一个名为 vms 的工作应用程序。使用models.py，我构建了一个简单的模式来保存大小和类型。尺寸包括“小”、“中”和“大”。类型是“windows”和“linux”。使用管理站点，我可以添加额外的尺寸，例如“特大号”。

我想做的是创建一个包含 vm 大小下拉列表的表单。如果通过管理站点添加了额外的尺寸，我希望该尺寸出现在下拉列表中。

我会提交我对代码的尝试，但实际上我正在努力解决这些概念。谁能帮助指导我如何完成上述工作？

谢谢奥利

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-12T18:19:59.017

表单只是一种工具，用于简化和加速（开发）从请求中获取 POST 数据的过程。一种手动方法是`request.POST.get('somefield')`对某些 HTML 表单中的所有字段进行处理。但是 Django 可以做得更好……

从本质上讲，Form 类包含许多字段并执行以下任务：

1.  显示 HTML 输入，
2.  在用户提交数据时收集和验证数据，
3.  如果字段未验证，则将值与错误消息一起返回到 HTML，
4.  如果所有字段都有效，则提供`form.cleaned_data`字典作为访问视图中这些值的便捷方式。

使用这些值，我可以手动创建 a 的新实例`MyModel`并保存它。当然，我必须在表单中为 MyModel 模型中的每个字段定义一个字段。

这意味着，基本上，我*可以*做这样的事情：（请
原谅我没有测试这段代码，所以我不能保证它是 100% 正确的）

```
models.py:

    class MyModel(models.Model):
        field1 = models.CharField(max_length=40, blank=False, null=False)
        field2 = models.CharField(max_length=60, blank=True, null=True)

forms.py:

    class FormForMyModel(forms.Form):
        form_field1 = forms.CharField(max_length=40, required=True)
        form_field2 = forms.CharField(max_length=60, required=False)

views.py:

    def create_a_my_model(request):
        if request.method == 'POST':
            form = FormForMyModel(request.POST)
            if form.is_valid():
                my_model = MyModel()
                my_model.field1 = form.cleaned_data.get('form_field1', 'default1')
                my_model.field2 = form.cleaned_data.get('form_field2', 'default2')
                my_model.save()
        else:        
            form = FormForMyModel()
        context_data = {'form': form}
        return HttpResponse('templtate.html', context_data) 
```

（这可以用更少的几行代码编写，但它的意思是尽可能清晰）

请注意，模型字段和表单字段之间没有关系！创建 MyModel 实例时，我们必须手动为其赋值。

上面的示例概述了通用表单工作流程。在复杂的情况下通常需要它，但在这个例子这样简单的情况下却不需要。

对于这个例子（以及很多现实世界的例子），Django 可以做得比这更好......

您可以在上面的示例中注意到两个烦人的问题：

1.  我必须分别定义 Fields on`MyModel`和 Fields on `FormForMyModel`。然而，这两组（类型）的字段之间有很多相似之处，所以这是一种重复的工作。添加标签、验证器等时，相似性会增加。
2.  创建`MyModel`实例有点傻，必须手动分配所有这些值。

这就是**ModelForm**的用武之地。

这些行为基本上就像一个常规形式（实际上，它们*是*从常规形式扩展而来的），但它们可以为我节省一些工作（当然是我刚刚概述的两个问题 :)）。

那么回到两个问题：

1.  我没有为每个模型字段定义一个表单字段，而是简单地`model = MyModel`在`Meta`类中定义。这指示表单从模型字段自动生成表单字段。

2.  模型表格有`save`可用的方法。这可用于在视图中的一行中创建模型实例，而不是逐个字段手动分配。

所以，让我们用一个来做上面的例子`ModelForm`：

```
models.py:

    class MyModel(models.Model):
        field1 = models.CharField(max_length=40, blank=False, null=False)
        field2 = models.CharField(max_length=60, blank=True, null=True)

forms.py:

    class MyModelForm(forms.ModelForm):  # extending ModelForm, not Form as before
        class Meta:
            model = MyModel

views.py:

    def create_a_my_model(request):
        if request.method == 'POST':
            form = MyModelForm(request.POST)
            if form.is_valid():
                # save the model to database, directly from the form:
                my_model = form.save()  # reference to my_model is often not needed at all, a simple form.save() is ok
                # alternatively:
                # my_model = form.save(commit=False)  # create model, but don't save to database
                # my.model.something = whatever  # if I need to do something before saving it
                # my.model.save()
        else:        
            form = MyModelForm()
        context_data = {'form': form}
        return HttpResponse('templtate.html', context_data) 
```

希望这可以稍微清除 Django 表单的使用。

还有一点需要注意 - 在`ModelForm`. 这些将不会被使用，`form.save()`但仍然可以`form.cleaned_data`像在常规表单中一样访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:21:23.293

您之前尝试过使用 ModelForms 吗？据我了解，您希望根据您创建的模型创建一个表单，对吗？

假设您的模型称为 Temp。您可以创建一个与此模型（和您的问题）相关的表单，如下所示：

表格.py

```
from django.forms import ModelForm

class TempForm(ModelForm):
  class Meta:
    model = Temp 
```

ModelForm 会自动将模型中的选择/选择映射到表单版本。

如果您打算稍后在模板中使用它，执行以下操作将自动创建一个带有选项的下拉菜单：

```
<form>
  <label for="id_size">Size</label>
  {{ form.size }}
</form> 
```

希望这能回答你的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T05:38:02.593

只需在您的模型表单中使用 CharField，如下所示：

```
SIZES_CHOICES = (
    ('size1', 'M'),
    ('size2', 'L'),
)
size = models.CharField(max_length=100, choices=SIZES_CHOICES, default=size1) 
```

在上面的代码中，size1 是将作为名称“size1”存储在您的数据库中的值，在下拉菜单中，将有一个选项是右侧的“M”。您可以提及任何名称这些选项。

# java - 如何在 Android 中无休止地循环 GridView？

> ID：11923318
> 
> 赞同：1
> 
> 时间：2012-08-12T15:19:54.583
> 
> 标签：java, android, gridview, sdk

我希望 Android 中的 GridView 在滚动 GridView 时无限循环/重复所有项目。

例如，假设 GridView 有 1 列和 3 个项目。我希望它像这样显示：
...
item 1
item 2
item 3
item 1
item 2
item 3
item 1
....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:43:50.167

让您的适配器返回`Integer.MAX_VALUE`，`getCount()`然后使用 getView 获取您的数据`myData[position % myData.length]`

# php - 在视图文件中扩展 Codeigniter 中的自定义配置数组

> ID：11923319
> 
> 赞同：0
> 
> 时间：2012-08-12T15:20:00.477
> 
> 标签：php, multidimensional-array, codeigniter-2

我正在使用 codeigniter 2.x。`config/template.php`我需要的是从视图文件内部将值插入到数组中`/views/home.php`。

我创建了一个自定义配置文件`application/config/template.php`：

```
$config['site_name'] = "Sitename";
$config['site_lang'] = "En-en";
$config['page_name'] = "Pagename";
$config['css_page'] = "default";
$config['alias'] = "";

$config['head_meta'] = array(
    'description' => 'description',
    'keywords' => 'meta, keywords',
    'stylesheets' => array(
        'template.css'
    ),
    'scripts' => array(
        'jquery.js',
        'template.js'
    ),
    'charset' => 'UTF-8'
);
$config['sidebars'] = array(); 
```

然后，我将`application/views/template/template.php`其用作我的主要 HTML 布局，一开始我包含一个文件，该文件`application/views/template/includes/inc-tpl-cfg.php`将我的模板配置全球化到一个带有数组的文件中，这样我就可以更容易地访问它们。这是那的内容`inc-tpl-cfg.php`：

```
<?php

// No direct acces to this file
if (!defined('BASEPATH')) exit('No direct script access allowed');

/* Template configuration needs to be defined to make them accessible in the whole template */
$cfg_template = array(
    'sitename'      => $this->config->item('site_name'),
    'sitelang'      => $this->config->item('site_lang'),
    'pagename'      => $this->config->item('page_name'),
    'csspage'       => $this->config->item('css_page'),
    'charset'       => $this->config->item('charset','head_meta'),
    'description'   => $this->config->item('description','head_meta'),
    'keywords'      => $this->config->item('keywords','head_meta'),
    'stylesheets'   => $this->config->item('stylesheets','head_meta'),
    'scripts'       => $this->config->item('scripts','head_meta'),
    'sidebars'      => $this->config->item('sidebars')
);

/* Template variables */
$cfg_assetsUrl = base_url() . 'assets';

// If pagename exists than concatenate it with a sitename, else output only sitename
if(!empty($cfg_template['pagename'])){
    $title = $cfg_template['pagename'] . ' - ' . $cfg_template['sitename'];
}else{
    $title = $cfg_template['sitename'];
} 
```

我的主要模板布局中的一部分是带有侧边栏的块：

```
<div id="tpl-sidebar">
  <?php foreach($cfg_template['sidebars'] as $sidebar):?>
    <?php $this->load->view('modules/'. $sidebar);?>
  <?php endforeach ;?>
</div> 
```

最后，它将 a 加载`application/views/home.php`到内部的特定`div`块中`applications/views/template/template.php`。这是一个`/views/home.php`：

```
<?php

// No direct acces to this file
if (!defined('BASEPATH')) exit('No direct script access allowed');

// Page configuration
$this->config->set_item('page_name','Homepage');
$this->config->set_item('css_page','home');
$this->config->set_item('alias','home');

?>

    <p>
        WELCOME BLABLABLA
    </p>
</h3> 
```

有一个部分我可以定义/覆盖默认值，`config/template.php`并为每个视图使用特定值。所以我的问题是，如何`$config[sidebar]`通过插入一些新项目来扩展此视图文件中的数组，例如：`recent.php`等`rss.php`...？

抱歉，代码很大。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:40:48.840

为什么不在控制器中设置配置变量？视图不适用于逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:47:56.747

你不应该在视图中这样做，设置数据应该从控制器完成。视图应该只处理视图逻辑，而不是设置逻辑本身......然后你从控制器传递变量，当它全部设置并准备好进入视图时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:42:37.570

好，我知道了：

这是我应该在 a 中插入的内容`views/home.php`：

```
$this->config->set_item('sidebars',array(
  'recent',
  'rss'
)); 
```

不管怎么说，还是要谢谢你。

# css - 如果打印，如何显示一个图像，如果在浏览器中查看另一个图像？

> ID：11923330
> 
> 赞同：0
> 
> 时间：2012-08-12T15:22:00.510
> 
> 标签：css, printing

我的网站的标题由`#header`div 内的两个图像（一个向左浮动，另一个向右浮动）组成。

它在所有浏览器中都呈现精美，但是当我尝试打印页面时，图像会显示，但`#header`div 的背景颜色不会。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:24:19.577

你可以`media-query`这样使用：

```
#header { width: 100%; height: 100px; }

@media screen
{ 
    #header > #left { background: url("display1.png"); }
    #header > #right { background: url("display2.png"); }
}

@media print
{ 
    #header > #left { background: url("print.png"); }
    #header > #right { display: none; }
} 
```

然后插入您的 HTML：

```
<div id="header">
    <div id="left"></div>
    <div id="right"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:25:13.913

浏览器现在很经济，默认情况下它们不再打印任何背景颜色。

某些浏览器（例如 FireFox）可以让您管理它，但这是每个用户的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:25:21.730

你可以使用`media="print"`：

```
<style type="text/css">
#img{background-image:url('img1.jpg');}
</style>
<style type="text/css" media="print">
#img{background-image:url('img2.jpg');}
</style> 
```

但如果问题是浏览器不打印背景颜色而您使用的是 Firefox，您可以这样做：

文件 > 页面设置... > 格式和选项 > 选项 > 打印背景（颜色和图像）

或者

Firefox 按钮 > 打印... > 页面设置... > 格式和选项 > 选项 > 打印背景（颜色和图像）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T15:26:21.773

我找到了解决办法！

我创建了第二个标题图像，它结合了两个原始图像（加上一点填充使其看起来不错），仅用于打印。

这是我如何让图像显示以供打印但在任何其他时间都不可见：

我创建了一个名为的类`.print-header`，并在我的 main style.css 中进行了如下设置：

```
.print-header { display:none } 
```

在我的 print.css 中，我这样设置：

```
.print-header { display:block !important }
.header-left { display:none } /* this hides the original left header image when printing */
.header-right { display:none } /* this hides the original right header image when printing */ 
```

然后将我的 HTML 更改为：

```
<div id="header">
   <img src="/images/logo.gif" class="header-left" />
   <img src="/images/cta.gif" class="header-right" />
   <img src="/images/print-header.gif" class="print-header" />
</div> 
```

瞧！在浏览器中，显示原始的 2 图像标题，打印时显示单个图像标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T16:11:11.773

实际上，Cynthia，如果你要做这样的事情，我想说最有意义的是使用`print-header.gif`图像作为两个图像的来源。

这种方法称为 CSS **sprite**。您使用 CSS 定位来仅显示您想要在屏幕`.header-left`中显示的图像部分。`.header-right`对于打印，您可以展开`.header-left`以显示整个图像并隐藏标题右侧。这意味着您`<img>`在页面上少了一个，并且正在减少 HTTP 请求（一个用于图像，而三个用于图像）。

通常，此方法仅用于背景图像（这会将您带回到第 1 步！），但它可以使用该`clip`属性与前景图像一起使用。您的 CSS 将遵循以下原则：

**屏幕.css：**

```
div#header {
    position: relative;
}

img.header-left {
    position: absolute;
    clip:rect(top, right, bottom, left);
}

img.header-right {
    position: absolute;
    clip:rect(top, right, bottom, left);
    top: offset;
    left: offset;
} 
```

**打印.css：**

```
img.header-left {
    position: static;
    clip: auto;
}

img.header-right {
    display: none;
} 
```

您的 HTML 可能是

```
<div id="header">
   <img src="/images/print-header.gif" class="header-left" />
   <img src="/images/print-header.gif" class="header-right" />
</div> 
```

# mongodb - 在MongoDB中查询带有偏移量的子文档

> ID：11923335
> 
> 赞同：1
> 
> 时间：2012-08-12T15:22:35.907
> 
> 标签：mongodb, mongodb-query

给定以下数据：

```
{
  _id: '123',
  name: 'Foobar',
  friends: [
    { name: 'a' },
    { name: 'b' },
    { name: 'c' },
    { name: 'd' },
    { name: 'e' }
  ]
} 
```

有没有办法查询 MongoDB 以返回`friends`带有偏移量的列表 - 例如，跳过数组中的前两个朋友（'a' 和 'b'）并只返回 'c'、'd' 和 'e'？

我试过使用`$slice`，但它似乎也需要一个“限制”，例如

```
db.users.findOne({ _id: '123' }, { friends: { $slice: [2,-1] } }) 
```

这不起作用，因为“限制”（`-1`在上面的例子中）需要是一个正整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:31:47.543

它不是非常优雅，但只是提供一个足够大的极限值，实际上不是极限：

```
db.users.findOne({ _id: '123' }, { friends: { $slice: [2,1000000000] } }) 
```

# html - 我将如何制作弹出式 div？

> ID：11923344
> 
> 赞同：-1
> 
> 时间：2012-08-12T15:23:36.193
> 
> 标签：html, popup

我的页面被称为服务，它将像一个所有不同服务的列表，但我希望它们不是链接，而是小图形（我知道怎么做），当它们被点击时，它们会在顶部打开一个框网页，在中心，显示两个 div，一侧是图像，另一侧是文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:33:02.740

jQuery UI 是一个很棒的工具（虽然很重）。这是您可能正在寻找的演示和文档页面：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# debugging - 调试 emacs 时应该在哪里设置断点？

> ID：11923348
> 
> 赞同：0
> 
> 时间：2012-08-12T15:24:02.913
> 
> 标签：debugging, emacs, gdb, segmentation-fault

问题不是在 emacs 中调试 c、php、python 等，而是调试 emacs 本身。当我尝试使用 Mx gdb Enter 在 emacs 中进入 gdb 模式时，我遇到了分段错误错误

现在我已经用调试信息构建了 emacs，并使用“gdb emacs”命令加载了它。

l 命令显示emacs的源代码，现在我的问题是如何调试emacs？我应该在哪里设置断点？如何使用 gdb 查找分段错误的根源？

以下是我现在所做的截图，所以有什么建议我应该如何调试 emacs？以及在哪里设置断点？

[http://i1271.photobucket.com/albums/jj624/bigmeowOoO/emacs_where-i-should-set-breakpoint-when-debug-emacs.jpg](http://i1271.photobucket.com/albums/jj624/bigmeowOoO/emacs_where-i-should-set-breakpoint-when-debug-emacs.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:44:13.240

> 如何使用 gdb 查找分段错误的根源？

不要设置任何断点（还）。只需使用`run`命令。这将开始`emacs`运行（在 GDB 控制下）。

在那`emacs`，做`M-x gdb`。`emacs`会崩溃（如果你幸运的话），你会`(gdb)`在崩溃点得到提示。

从那里，用于`gdb`检查`emacs`崩溃点的状态。找出哪些变量有错误的值，等等。然后找出这些变量的设置位置，在那里设置断点，然后重复（就像你调试任何其他程序一样——`emacs`成为你的错误程序没有什么特别的） .

PS 请不要张贴简单的文字剪切/粘贴就能传达*完全相同*信息的图片。

# php - PHP中的数据库过滤器

> ID：11923350
> 
> 赞同：0
> 
> 时间：2012-08-12T15:24:11.577
> 
> 标签：php

```
echo 'Qname : <select id ="selector">';
$s = mysql_query('SELECT qid,qname FROM q_table ORDER BY qname');
while($row = mysql_fetch_array($s))
{
  $filter = $row['qname'];
  $filterid = $row['qid']; 
  echo '<option value='.$filterid.'>'.$filter.'</option>';

echo '</select>';

echo '<div id='.$filterid.' class="colors" style="display:none;">';
echo '<table>
            <tr><th>USERID</th>
                <th>QNAME</th>
            </tr>';
$publishedqnames = mysql_query('SELECT qid, qname, quserid FROM pub_q'); 
while($row = mysql_fetch_array($publishedqnames))
{
   $qid = $row['qid'];
   $qname = $row['qname'];
   $quserid = $row['quserid'];
   echo '<tr>
            <td>'.$quserid.'</td>
            <td>'.qname.'</td> 
         </tr>';
}
echo '</table></div>';
} 
```

当我选择 qname 时，该选定过滤器的 div（过滤器和 qname 相同）需要显示 JQUERY FILE

```
 $(function() 
{
    $('#selector').change(function(){
        $('.colors').hide();
        $('#' + $(this).val()).show();
    });
}); 
```

现在我无法用正确的 div 显示正确的 qid

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T15:35:50.797

尝试这个

```
echo 'Qname : <select id ="selector">';
$s = mysql_query('SELECT qid,qname FROM q_table ORDER BY qname');
while($row = mysql_fetch_array($s))
{
    $filter = $row['qname'];
    $filterid = $row['qid']; 
    echo '<option value='.$filterid.'>'.$filter.'</option>';
}
echo '</select>';
?>
<script>
 $(function() 
{
    $('#selector').change(function(){
        $('.colors').hide();
        $('#' + $(this).val()).show();
    });
});

</script>
<?php

echo '<table>
            <tr><th>USERID</th>
                <th>QNAME</th>
            </tr>';
$publishedqnames = mysql_query('SELECT qid, qname, quserid FROM pub_q'); 
while($row = mysql_fetch_array($publishedqnames))
{
   $qid = $row['qid'];
   $qname = $row['qname'];
   $quserid = $row['quserid'];
   echo '<div id='.$filterid.' class="colors" style="display:none;">';
   echo '<tr>
            <td>'.$quserid.'</td>
            <td>'.qname.'</td> 
         </tr>';
   echo '</div>';
}
echo '</table>'; 
```

如果不工作，请告诉我

# android - Android中的缓存层

> ID：11923354
> 
> 赞同：0
> 
> 时间：2012-08-12T15:24:24.240
> 
> 标签：android, mediastore

我正在寻找一种解决方案（可能实现它），它允许我在我的 SD 卡（比如 25G）上创建一个缓存，一些“缓存层”将使用它来按需存储媒体。问题是我的所有媒体都不适合 32G SD 卡，所以我希望能够在我尝试播放时透明地下载我丢失的数据（即：我不想使用其他应用程序下载）在股票媒体播放器或画廊或其他任何地方。有谁知道这样的现有解决方案？我已经熟悉了为音乐执行此操作的各种专用应用程序，但我正在寻找更多的通用缓存，它可以缓存任何通过 LRU 传输的内容。我希望我家中的 NAS（或 S3、Dropbox、Ubuntu One 等）成为我的 Android 设备的扩展。

如果不存在，是否可以链接 ContentProviders？我可以创建一个 CacheProvider 来跟踪我的缓存中当前的内容和不存在的内容，并使用来自 CacheProvider 的 URI 来填充 MediaStore？到目前为止，我能找到的所有示例都表明，MediaStore 的输出始终是文件的 URI，因此我怀疑目前不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:56:33.733

经过一点 POC，似乎单独使用 ContentProviders 是不可能的。虽然如果您覆盖[ContentProvider.openfile()](http://developer.android.com/reference/android/content/ContentProvider.html#openFile%28android.net.Uri,%20java.lang.String%29)可以将提供程序链接在一起，但由于 MediaProvider 当前假定 _data 中的所有内容都指向文件或 HTTP 流，因此音乐应用程序将无法播放任何将另一个内容 URI 插入的内容_数据。如果将 MediaProvider 更改为处理内容 URI，那么这是可能的，但我认为实现这一目标的唯一方法是复制/粘贴 MediaStore 框架并重命名它，或者在 mod 中进行更改（如 CyanogenMod）。

# maven-3 - 如何制作一个 Maven 插件来通知构建结果？

> ID：11923356
> 
> 赞同：0
> 
> 时间：2012-08-12T15:24:57.077
> 
> 标签：maven-3

我开发了一个简单的插件来像咆哮一样将构建结果通知到桌面。 [https://github.com/kompiro/notification-maven-plugin](https://github.com/kompiro/notification-maven-plugin)

现在，我认为没有很好的方法来监听构建结果事件。

我测试了两种监听事件的方法。

一个。来自 MavenSession#getRequest() 的 ExecutionListener

这种方式在下面实现。 [https://github.com/kompiro/notification-maven-plugin/blob/master/src/main/java/org/kompiro/nortification/buildresult/NotificationMojo.java](https://github.com/kompiro/notification-maven-plugin/blob/master/src/main/java/org/kompiro/nortification/buildresult/NotificationMojo.java)

这种方式通知运行良好，但是有一个问题。它取代了默认的 Maven 事件执行侦听器。因此，如果用户添加此插件，则没有 Maven 执行日志。我以为我的实现扩展了默认事件执行侦听器“ExecutionEventLogger”，但我不能，因为 ExecutionEventLogger 的构造函数需要 plexus 的记录器。我无法获取记录器对象。

湾。使用 EventSpy

这不是公共接口，用户必须将插件添加到 maven.ext 类路径。这对用户不利。

如何正确收听事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:07:47.137

为什么不在你的本地桌面上设置一个 Jenkins 服务器并让它运行测试并通知你呢？

Jenkins 在某处可能有一个类似咆哮的通知器，或者最坏的情况是让它向 localhost 发送一封包含测试结果的电子邮件。这还具有保留历史测试结果的优点。

如果您使用的是 GIT 等优秀的 SCM，那么您可以将 Jenkins 设置为轮询您的本地结帐作为其上游，以便您单独检查所有提交。如果使用不太好的 SCM，我将在工作的第一步将所有源代码从您的工作区复制到 Jenkins 的工作区，这样您就可以继续编写代码而不必担心破坏 Jenkins 的编译阶段。

此外，我更倾向于使用带有 Maven 构建步骤的 FreeStyle 项目到内置 Maven 项目类型（但这可能只是我个人的偏见）

# wordpress - .htaccess：Codeigniter + Wordpress

> ID：11923365
> 
> 赞同：0
> 
> 时间：2012-08-12T15:25:55.567
> 
> 标签：wordpress, .htaccess, codeigniter

我正在 Codeigniter 上开发网站，并希望将其与 Wordpress“连接”。所以 URL 结构将是

```
SITE-URL
-SITE-URL/folder1/
--SITE-URL/folder1/some-link
-URL/folder2/ 
```

...ETC

我需要做的是，当 Codeigniter 抛出 404 错误时，内容取自 Wordpress 网站（相同的相对 URL），而最终用户没有任何重定向。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:39:12.517

不确定您是否可以使用 .htaccess 执行此操作，因为 .htaccess 只能在提供内容之前进行重定向，这意味着在 Codeigniter 响应请求之前。因此，当 Codeigniter 生成 404 时，它会返回未处理 .htaccess 的内容。

您需要做的是生成一个 404 控制器，该控制器可以执行重定向，您不希望这样做，但这是最简单的。或者 404 控制器必须在 wordpress 中加载并通过那里处理请求。类似于代理的东西，但需要用 PHP 来完成。

# android - 将图像动态插入到水平滚动视图

> ID：11923366
> 
> 赞同：0
> 
> 时间：2012-08-12T15:25:57.427
> 
> 标签：android, xml, scrollview, horizontalscrollview

我正在开发一个 android 应用程序，该应用程序将从 xml 文件中获取数据并将其插入到列表视图中

但我想更改 UI，而不是在列表视图中垂直显示数据，我想在滚动视图中水平显示它们

我的问题是我是否有以下代码

```
<HorizontalScrollView 
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:scrollbars="none">

        <LinearLayout 
            android:id="@+id/linearLayout1"
            android:orientation="horizontal" 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" android:padding="2dp">

            <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <ImageView
                android:layout_width="wrap_content" 
                android:id="@+id/imageView11"
                android:layout_height="wrap_content" 
                android:src="@drawable/i1"/>
            <TextView
                android:id="@+id/TextOnImage11"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Fantasia Reviews"
                android:layout_alignParentBottom="true" 
                android:paddingLeft="2dp" 
                android:background="@drawable/txt_bg" 
                android:textSize="10dp" 
                android:paddingTop="2dp" 
                android:textColor="#FFFFFF"
                android:textStyle="bold" 
                android:width="0dp" />
            </RelativeLayout>
      </LinearLayout>
    </HorizontalScrollView> 
```

如何从 java 代码中动态添加更多图像和文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:43:24.830

我认为您的意图是在您在代码示例中显示的 RelativeLayout 之后直接添加另一个具有自己的图像/文本对的 RelativeLayout？

在这种情况下，因为它不仅仅是添加一个视图，我会花时间创建一个代表您想要插入的“结构”的类。

例如，一个名为“TextImagePair”的类扩展了“RelativeLayout”

```
public class TextImagePair extends RelativeLayout {
    public ReportDetailRow(Context context){
        super(context);
    }

    public TextImagePair(Context context,AttributeSet attributeSet){
        super(context, attributeSet);
    }

    public TextImagePair(Context context,AttributeSet attributeSet, int i){
        super(context, attributeSet,i);
    }

    public TextImagePair(Context context, AttributeSet attributeSet, String text, int drawableResource) {
        super(context, attributeSet);

        // Inflate the layout
        LayoutInflater inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflator.inflate(R.layout.lay_textimagepair, this);

        TextView tvText = (TextView)this.findViewById(R.id.layTextImagePair_textview);
        tvText.setText(text);

        ImageView imgView = (ImageView)this.findViewById(R.id.layTextImagePair_imageview);
        imgView.setDrawable(getResources().getDrawable(drawableResource));
    }
} 
```

然后，您将拥有一个单独的 xml 布局文件（在我的代码中名为lay_textimagepair），其中仅包含文本和图像视图。

然后，您可以在运行时将其添加到您的视图中：

```
LinearLayout parent = (LinearLayout)findViewById(R.id.layParentView_liniearlayout);
TextImagePair tip = new TextImagePair(null,null,"Blah Blah Blah",R.drawable.something);
parent.addView(tip); 
```

很抱歉，如果上面的代码中有任何错误，但我是在没有访问 Eclipse 的情况下编写的！

# internet-explorer - CSS3 animation not working in IE9

> ID：11923368
> 
> 赞同：10
> 
> 时间：2012-08-12T15:26:16.967
> 
> 标签：internet-explorer, css, css-transforms, css-animations

CSS3 animations are not working in IE9\. Here is the [jfiddle link](http://jsfiddle.net/8Pcv4/). Is it possible to make them working on IE or i am making some silly mistake? Here is the code which is not working:

```
@-ms-keyframes rotating {
  0% { -ms-transform: rotate(0deg); }
  100% { -ms-transform: rotate(360deg); }
}

#rotateMe{
  -ms-animation: rotating 5s linear infinite;
} 
```

As IE doent support this functionality i have created the fallback using [jquery rotate plugin](http://code.google.com/p/jqueryrotate/)

here is my fallback function for IE:

```
$(function() {
    if (!$.support.transition){
        var angle = 0;
        var angle2 = 0;
        setInterval(function(){
              angle+=0.3;
              angle2-=0.3;
             $(".rotateRing").rotate(angle);
             $(".rotateRingReverse").rotate(angle2);
        },50);
    }
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-12T15:31:23.077

CSS3 Animation don't work natively on IE9\. There's a similar thread [here](https://stackoverflow.com/questions/9060223/using-css3-animations-in-ie9)

# apache - Mod重写替换链接

> ID：11923369
> 
> 赞同：0
> 
> 时间：2012-08-12T15:26:16.427
> 
> 标签：apache, mod-rewrite, url-rewriting

需要帮助来替换任何链接，例如：

```
http://www.domain.com/index.php/download?file=WQE875487 
```

至

```
http://www.domain.com/download?file=WQE875487 
```

仅当附带：

```
index.php/download?file= 
```

需要将其替换为：

```
download?file= 
```

因为我也将 index.php 用于其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:31:05.367

您可以尝试以下方法：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:57:39.637

您的 RewriteRule 将是

```
RewriteRule index\.php/download\?file=([a-zA-Z0-9]*) download?file=$1 
```

如果您在没有下载信息的情况下使用 index.php，它将不会重定向。如果您不指定 file=，它将不会重定向（index.php/download 不会重定向）

index.php/download?file= 会工作。如果您不希望它与空文件一起使用，只需将 asterix 更改为加号。

```
RewriteRule index\.php/download\?file=([a-zA-Z0-9]+) download?file=$1 
```

PS - 我不知道您的文件值是否可以使用字母和数字以外的其他内容 [a-zA-Z0-9]。根据您的使用情况进行相应更改。

# javascript - 当字符串包含 HTML 标记时 JSON 无法解析

> ID：11923375
> 
> 赞同：1
> 
> 时间：2012-08-12T15:27:37.527
> 
> 标签：javascript, jquery

为什么将 html 标记添加到 json 时，此 ajax 会失败，如果`<br />`不存在则有效。我能想到的唯一解决方法是对文本进行编码。

你知道为什么或/还有其他建议吗？

谢谢

```
 $.ajax({
            type: "POST",
            url: "/url",
            //data: { "myText" : '[{ "a": "test1", "b": "test2"}]' },//works
            data: { "myText": '[{ "a": "<br />dfgdfgdfgdfgdgd", "b": "test2"}]' },//causes error
            dataType: 'json',
            success: function (data) {
                        alert("pass");
            },
            error: function () {
                        alert("error");

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:30:29.497

尝试使用以下`JSON.stringify`方法：

```
data: { "myText": JSON.stringify([{ "a": "<br />dfgdfgdfgdfgdgd", "b": "test2"}]) } 
```

或者如果您不想`myText`作为 JSON 字符串发送，请删除单引号：

```
data: { "myText": [{ "a": "<br />dfgdfgdfgdfgdgd", "b": "test2"}] } 
```

当然，如果您在服务器端使用某种技术（例如 ASP.NET）来禁止`<` `>`请求中的字符，则您必须修复服务器端脚本，以便它接受这些字符。

# php - 在输入框右侧的同一页面上显示表单验证错误

> ID：11923376
> 
> 赞同：-1
> 
> 时间：2012-08-12T15:27:50.777
> 
> 标签：php

我是 PHP 新手，正在做一个项目。

我想使用 PHP 验证登录和注册页面。

我想在同一字段中验证表单并在输入框的右侧显示错误。

我尝试了很多次，但我没有成功。我可以用 JavaScript/jQuery 做到这一点，但我无法用 PHP 做到这一点。

我的表格包含：

```
email : inputbox - error div
password : input box -error div
submit button 
```

你能解释一下如何用 PHP 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:42:23.333

您可以让表单自己发布并验证提交时的发布数据。就像是：

```
<?php

$errors = array();

if (isset($_POST['submit'])) {
    // do some validation and fill $errors variable when something is wrong

    // if everything is fine e.g. redirect user
    header('Location: http://example.com/success');
}
?>

<form action="" method="post">
  <input type="text" name="email">
  <?php if ($errors['email']) { echo '<div class="error">' . $errors['email'] . '</div>'; } ?>
  <input type="password" name="password">
  <?php if ($errors['password']) { echo '<div class="error">' . $errors['password'] . '</div>'; } ?>
  <input type="submit" name="Submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:37:07.373

你不能用 php 来做...... php 在服务器上运行，用 php 来做这件事的唯一可能方法是使用 jquery 或 js（和 ajax）......

# scala - 从 REPL 评估 Scala 中的字符串命令

> ID：11923378
> 
> 赞同：5
> 
> 时间：2012-08-12T15:29:00.080
> 
> 标签：scala, read-eval-print-loop

有没有办法评估来自 Scala 的任意字符串，就好像直接将相同的文本输入到 Scala REPL 中一样？我的意思是，我想做这样的事情：

```
scala> eval("val x = 42")

scala> x
res2: Int = 42 
```

由于 Scala REPL 使用 jline（我相信）在 eval 循环中接受命令，然后编译/解释它，因此必须有一种方法来提交任意文本行。如有必要，我愿意破解 Scala REPL。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T16:21:42.373

无需 REPL hack — 只需切换到高级用户模式，即可访问当前[`scala.tools.nsc.interpreter.IMain`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/index.html#scala.tools.nsc.interpreter.IMain)的`intp`：

```
scala> :power
** Power User mode enabled - BEEP BOOP SPIZ **
** :phase has been set to 'typer'.          **
** scala.tools.nsc._ has been imported      **
** global._ and definitions._ also imported **
** Try  :help,  vals.<tab>,  power.<tab>    **

scala> intp.interpret("val x = 42")
x: Int = 42
res0: scala.tools.nsc.interpreter.package.IR.Result = Success

scala> x
res1: Int = 42 
```

这至少从 2.9.1 开始有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T16:51:24.487

另一个机会是使用Twitter Utility 中的[Eval](https://github.com/twitter/util/blob/master/util-eval/src/main/scala/com/twitter/util/Eval.scala)：

```
val x: Int = new Eval()("1 + 1") 
```

# android - Android ssl：javax.net.ssl.SSLPeerUnverifiedException：没有对等证书（又一次）

> ID：11923380
> 
> 赞同：27
> 
> 时间：2012-08-12T15:29:49.243
> 
> 标签：android, ssl, https, openssl

我有一个网站，我正在为 RESTful 服务启用 ssl。我们已经注册了 RapidSSL，安装了证书，并且它通过了[RapidSSL 检查器](https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&id=SO9556&actp=LIST&viewlocale=en_US)。我可以使用各种浏览器访问该站点，包括 android 浏览器（内置、firefox 和 opera），没有问题，没有警告。

但是，当我尝试使用我的 android 应用程序访问它时，出现以下异常：

```
08-11 20:04:05.586   363   381 E HttpProvider: Error executing request: No peer certificate
08-11 20:04:05.586   363   381 E HttpProvider: javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:259)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-11 20:04:05.586   363   381 E HttpProvider:  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-11 20:04:05.586   363   381 E HttpProvider:  at com.xxxxx.netlib.http.HttpProvider.executeRequest(HttpProvider.java:75) 
```

这发生在模拟器上的 android 2.3.3 和 3.2 平板电脑上。我已经看到很多关于此的点击，但我发现没有任何东西可以帮助我解决这个问题。

更多数据：

```
$ openssl s_client -CAfile www.xxxxx.com.pem -connect www.xxxxx.com:443
CONNECTED(00000003)
depth=3 C = US, O = Equifax, OU = Equifax Secure Certificate Authority
verify return:1
depth=2 C = US, O = GeoTrust Inc., CN = GeoTrust Global CA
verify return:1
depth=1 C = US, O = "GeoTrust, Inc.", CN = RapidSSL CA
verify return:1
depth=0 serialNumber = 1-7wArtEjdTwJ94d5iVDooDmmC4mXyVj, OU = GT82425783, OU = See www.rapidssl.com/resources/cps (c)12, OU = Domain Control Validated - RapidSSL(R), CN = www.xxxxx.com
verify return:1
---
Certificate chain
0 s:/serialNumber=1-7wArtEjdTwJ94d5iVDooDmmC4mXyVj/OU=GT82425783/OU=See www.rapidssl.com/resources/cps (c)12/OU=Domain Control Validated - RapidSSL(R)/CN=www.xxxxx.com
  i:/C=US/O=GeoTrust, Inc./CN=RapidSSL CA
1 s:/C=US/O=GeoTrust, Inc./CN=RapidSSL CA
  i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
2 s:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
  i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
---
[snip] 
```

我正在运行以设置客户端的代码：

```
public class HttpProvider implements INetworkProvider {
  private static final String LOG = "HttpProvider";
  protected DefaultHttpClient client;

  public HttpProvider() {
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    final SSLSocketFactory sslSocketFactory = SSLSocketFactory.getSocketFactory();
    sslSocketFactory.setHostnameVerifier(SSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);
    registry.register(new Scheme("https", sslSocketFactory, 443));

    client = new DefaultHttpClient(
      new ThreadSafeClientConnManager((new BasicHttpParams()), registry), new BasicHttpParams()
    );
  }
[snip] 
```

我也尝试过 STRICT_HOSTNAME_VERIFIER ，但仍然没有乐趣。

据我了解，我不需要设置任何自定义信任库或密钥库，因为我已向公认的证书提供商注册。

我对 ssl 很陌生，发现我在三个字母首字母缩写词的海洋中游泳，我希望这里的某个人能够帮助我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T20:16:50.747

经过大量的挖掘和实验，我终于意识到我使用的 url 有硬编码端口 80 而不是默认为 443。哑哑哑。

这个问题的答案[Trusting all certificate using HttpClient over HTTPS](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)极大地帮助了我对 SSL 的理解。

# drupal - 如何向用户显示内容提交页面？

> ID：11923383
> 
> 赞同：0
> 
> 时间：2012-08-12T15:29:52.887
> 
> 标签：drupal, admin

我想添加一个页面，用户可以在其中提交内容（不仅仅是评论，而是特定的“内容类型”，包括相关字段）。我可以使用常规的管理链接，但这需要大量交替管理主题，并且还需要隐藏/禁用我原本需要的东西。

有没有一种向用户显示提交表单的好方法，用户可以通过该表单提交内容？我一直在通过“视图”寻找解决方案，但没有走远。

我希望我设法表达了我的观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:16:30.807

drupal 6还是drupal 7？

在 drupal 7 中，您拥有非常有助于获取实体字段的字段 API。

在 drupal 6 中，您可以使用表单 API 创建自己的表单并在提交函数中运行 node_save()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:33:56.773

如果使用通常的节点/添加/节点类型页面的唯一问题是您不希望用户看到管理主题，那么您没有问题。您可以为非管理员用户禁用管理员主题 - 在权限页面上，查找“系统/查看管理主题”。我认为默认情况下它已经未选中。他们访问的任何管理类型页面都将使用您默认的面向公众的主题。

# javascript - JQuery .load() 不加载html

> ID：11923389
> 
> 赞同：1
> 
> 时间：2012-08-12T15:30:34.603
> 
> 标签：javascript, jquery, html

请帮我弄清楚我错过了什么。

那是我的名为“test.html”的html

```
<div id="div-test">
lalalalaal
    <ul>
        <li>Hi</li>
        <li>By</li>
    </ul>
</div> 
```

这是同一目录中的另一个 html 文件，其中包含以下内容：

```
<div id="result"></div>
<script type="text/javascript">
$(function() {
    $("#result").load("test.html");
});
</script> 
```

但它不加载任何东西。

但是，这很好用：

```
<div id="result"></div>
<script type="text/javascript">
$(function() {
    $("#result").html("i see this text");
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:41:53.420

当我需要定期加载数据时，我只需创建一个动态加载的函数，这样我就可以在需要时调用它，或者在页面加载完成时调用它

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script>
            function loadContent(divName,pageURL) {
                $("#" + divName).load(pageURL);
            }
            $(document).ready(function() {
                loadContent('createArea','create_login.php');
            });
        </script>
    </head>
    <body>
        <div style="float:left;width:500px;min-width:500px;min-height:200px;">
            <div id="createArea" name="createArea"></div>
        </div>
    </body>
</html> 
```

As noted below, this will not execute locally unless you're running a WAMP server. Also the paths to the files you are loading may need to be relative if they are not residing in the same directory as the page with this code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:35:34.543

如果您使用 Chrome 或 IE9，请尝试监控 XHR 网络调用以查看 *实际*情况。在 chrome 上，您可以通过以下方式监控 XHR 调用

1.  点击 F12
2.  点击网络按钮
3.  单击控制台最底部的 XHR 标签。
4.  在控制台打开的情况下，执行代码不起作用的页面并检查是否存在实际的数据交换。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:38:35.140

试试这个：

```
<div id="result"></div>
<script type="text/javascript">
$(function() {
    $("#result").load("/test.html"); // add "/"
});
</script> 
```

# java - 组件监听器不工作

> ID：11923393
> 
> 赞同：3
> 
> 时间：2012-08-12T15:31:13.883
> 
> 标签：java, swing, user-interface

请看下面的代码。

```
package normal;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MainForm extends JFrame implements ComponentListener
{
    private JTabbedPane tab;

    private InsertForm insertForm;
    private UpdateDeleteForm updateDelete;
    private SearchForm searchForm;

    public MainForm()
    {
        tab = new JTabbedPane();
        insertForm = new InsertForm();
        updateDelete = new UpdateDeleteForm();
        searchForm = new SearchForm();

        //Creating the main window
        tab.add(insertForm,"Insert");
        tab.add(updateDelete,"Update/Delete");
        tab.add(searchForm,"Search");
        tab.addChangeListener(new TabChangeWork());

        getContentPane().add(tab);

       // this.setSize(500,500);
        this.setTitle("My Phone Book App");
        this.setResizable(false);
        this.pack();
        this.validate();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    @Override
    public void componentResized(ComponentEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void componentMoved(ComponentEvent e)
    {
        System.out.println("X Location: "+this.getX());
    }

    @Override
    public void componentShown(ComponentEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void componentHidden(ComponentEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    private class TabChangeWork implements ChangeListener
    {

        @Override
        public void stateChanged(ChangeEvent e) 
        {
            JTabbedPane tabSource = (JTabbedPane)e.getSource();

            int index = tabSource.getSelectedIndex();
            System.out.println("Tab Changed to: "+tabSource.getTitleAt(index));

            if(tabSource.getTitleAt(index).equals("Update/Delete"))
            {
                updateDelete.addNames();
            }
        }

    }
} 
```

在这里，ComponentListener 无法正常工作，因为“ComponentMoved”方法中的操作没有发生。如果它被移动，我正在尝试获取 JFrame 的新坐标。为什么它不工作？请帮忙！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T15:44:33.377

您还**没有**在代码中的`ComponentListener`任何地方注册...

像这样做....

```
component_to_monitor.addComponentListener(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T15:35:22.847

你没有`addComponentListener`在任何地方打电话。

如果您希望在 JFrame 中注册这样的侦听器，则可以添加：

```
addComponentListener(this); 
```

或者，对于子组件，例如 searchForm：

```
searchForm.addComponentListener(this); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T15:37:42.500

你`MainForm`的是一个`ComponentListener`. 所以它会监听组件事件——但前提是你告诉它*在哪里*监听。听众不会自动听任何东西。他们最初是聋子。

查看要监视其移动的组件，并使用该组件`addComponentListner`方法注册主框架。就像是`component.addComponentListener(this);`

# python - 在 Sage 中使用 gnuplot 时出错，但在常规 Python 中工作正常

> ID：11923398
> 
> 赞同：2
> 
> 时间：2012-08-12T15:32:21.167
> 
> 标签：python, gnuplot, sage

如果这不是提出这个问题的最佳场所，我深表歉意，但希望这里有人可以提供帮助。我想直接从 Sage 脚本中运行一些 gnuplot 命令，但我收到以下错误消息：

> dyld：库未加载：/opt/local/lib/libfreetype.6.dylib 引用自：/opt/local/bin/gnuplot 原因：库版本不兼容：gnuplot 需要 14.0.0 或更高版本，但 libfreetype.6.dylib提供版本 10.0.0

如果我尝试在 Sage 中使用 gnuplotpy 界面，或者我只是使用 Sage 中的 os.system("gnuplot -e \"plot('sin(x)')\"") 之类的东西，则会出现此消息。但是，相同的 os.system(...) 命令在常规 python 中工作得很好。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:16:15.737

Sage 更改了许多环境，包括`PATH`、`LD_LIBRARY_PATH`等。这可能会导致运行未安装在 Sage 中的二进制文件时出现问题。出于这个原因，它提供了一个 shell 命令`sage-native-execute`，该命令（大部分）将所有变量更改回来。因此，请尝试以下操作 - 它为我解决了问题：

```
os.system('''sage-native-execute gnuplot -e "plot('sin(x)')"''') 
```

# osgi - OSGi 远程服务：Riena + 声明式服务

> ID：11923401
> 
> 赞同：1
> 
> 时间：2012-08-12T15:33:19.217
> 
> 标签：osgi, remote-server

我一直在关注有关 Riena 远程服务的[本教程。](http://wiki.eclipse.org/Riena/Getting_started_with_Remote_Services)是否有可用的项目或教程，以便我可以将 Riena 与声明式服务一起使用？我发现将上述示例转换为声明式服务有点挑战。

# java - 在 setChoiceMode(ListView.CHOICE_MODE_NONE) 之后 ListView 项目保持选中状态

> ID：11923402
> 
> 赞同：2
> 
> 时间：2012-08-12T15:33:33.513
> 
> 标签：java, android, android-listview, android-actionbar

我正在实施`ActionMode.Callback`和一些`ListView`东西。我的问题是，当我处于选择模式`ListView.CHOICE_MODE_MULTIPLE`并检查一些项目时，我无法清除选择。

我正在尝试这样做：

```
getListView().clearChoices();
getListView().setChoiceMode(ListView.CHOICE_MODE_NONE); 
```

但选定的项目仍保持选中状态。这是我的整个实现：

```
private class ActionModeCallback implements ActionMode.Callback
{
    public boolean onCreateActionMode(ActionMode mode, Menu menu)
    {
        actionMode = mode;
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.main_cab_menu, menu);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        return true;
    }

    public boolean onPrepareActionMode(ActionMode mode, Menu menu)
    {
        return false;
    }

    public boolean onActionItemClicked(ActionMode mode, MenuItem item)
    {
        return true;
    }

    public void onDestroyActionMode(ActionMode mode)
    {
        getListView().clearChoices();

        getListView().setChoiceMode(ListView.CHOICE_MODE_NONE);
        actionModeCallback = null;
        actionMode = null;

    }
}; 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:01:51.130

我不相信更改模式应该清除您的选择，而且一旦设置，我也不会尝试更改选择模式......似乎是个坏主意。

与其这样做，为什么不使用方法来清除选项列表，例如[clearChoices()](http://developer.android.com/reference/android/widget/AbsListView.html#clearChoices%28%29)？

简单的例子：

```
ListView lv = getListView(); 
lv.clearChoices(); 
```

# css - Internet Explorer 未显示具有相对定位和正确浮动的按钮

> ID：11923403
> 
> 赞同：0
> 
> 时间：2012-08-12T15:33:40.013
> 
> 标签：css, internet-explorer, css-float, position

我正在使用一个名为 Impromptu 的 jQuery 插件。它基本上是一个干净的模态框插件。在模态框的底部，它有一个按钮栏，但稍后在代码中我不得不使用更多的 JS 来动态添加一个额外的按钮，但位于左侧。它在除 IE 之外的所有浏览器中看起来都很好（未测试 6 或 8，但此问题出现在 IE 7 中并在 9 中修复）。

在此处查看图片：http: [//screencast.com/t/g1EmKu2KqXfB](http://screencast.com/t/g1EmKu2KqXfB)

左侧的按钮与右侧的按钮具有相同的类，除了两个额外的属性：`position:relative`和`float:left`。在`div`which 持有按钮之后，我添加了一个额外的`div`with `clear:left`，但这似乎没有任何影响。

按钮本身是简单`button`的元素，语法相当繁重。例如，这是新添加的（有问题的）按钮的 HTML：

```
<button value="next" onclick="somefunction()" id="jqi_state0_buttonNext" name="jqi_state0_buttonNext" class="dynamo_temp_button">Next Page</button> 
```

`.dynamo_temp_button`是具有前面所述`position:relative`和的类`float:left`。

如何使按钮与其他按钮保持在同一行，但保持其位置浮动在左侧？

小提琴：http: [//jsfiddle.net/rRFqv/](http://jsfiddle.net/rRFqv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:58:34.600

右边2个按钮没有浮动，IE对齐非浮动&浮动有问题

试试这个演示：

[jsfiddle](http://jsfiddle.net/rRFqv/2/)

```
div.jqi .jqibuttons{
    text-align: right;
    padding: 5px 0 5px 0;
    border: solid 1px #eeeeee;
    background-color: #f4f4f4;
    overflow: hidden; //added
}
div.jqi button{
    padding: 3px 10px;
    margin: 0 10px;
    background-color: #2F6073;
    border: solid 1px #f4f4f4;
    color: #ffffff;
    font-weight: bold;
    font-size: 12px;
    background-image: none;
    float: right; //added
}
.dynamo_temp_button {
    position : relative;
    float : left!important; //added
} 
```

# android - Android：将坐标映射到可滚动的图像

> ID：11923405
> 
> 赞同：1
> 
> 时间：2012-08-12T15:34:06.137
> 
> 标签：android, image, overlay, scrollable, coordinate

目前我正在做一个涉及室内定位的项目，我负责的模块之一是导入地图，用坐标映射它并找到最短距离。因为图像预计会有一些超过屏幕分辨率的图像，因此我使其可滚动，然后我计划用路线/坐标覆盖它。但是在使用 canvas.drawline() 时，我发现坐标仅限于屏幕分辨率。示例：图像分辨率为 1024 * 768，手机分辨率为 480*800。我通过画一条从 (0,0) 到 (600,400) 的线来测试它，然后当我运行并滚动图像时，这条线就保持在那里并且不会移动。

代码示例

```
public class DrawView extends View {
    Paint paint = new Paint();
    private Bitmap bmp;
    private Rect d_rect=null;
    private Rect s_rect=null; 
    private float starting_x=0;
    private float starting_y=0;
    private float scroll_x=0;
    private float scroll_y=0;
    private int scrollRect_x;
    private int scrollRect_y;

    public DrawView(Context context) {
        super(context);
        paint.setColor(Color.RED);
        d_rect=new Rect(0,0,d_width,d_height);
        s_rect=new Rect(0,0,d_width,d_height);
        bmp=BitmapFactory.decodeResource(getResources(), R.drawable.hd);
        bmp.isMutable();
    }

    @Override
    public boolean onTouchEvent(MotionEvent me)
    {
        switch(me.getAction())
        {
        case MotionEvent.ACTION_DOWN:
            starting_x=me.getRawX();
            starting_y=me.getRawY();
        case MotionEvent.ACTION_MOVE:
            float x=me.getRawX();
            float y=me.getRawY();
            scroll_x=x-starting_x;
            scroll_y=y-starting_y;
            starting_x=x;
            starting_y=y;
            invalidate();
            break;              
        }
        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        int cur_scrollRectx=scrollRect_x-(int)scroll_x;
        int cur_scrollRecty=scrollRect_y-(int)scroll_y;

        if(cur_scrollRectx<0)cur_scrollRectx=0;
        else if(cur_scrollRectx>(bmp.getWidth()-d_width))cur_scrollRectx=(bmp.getWidth()-d_width);
        if(cur_scrollRecty<0)cur_scrollRecty=0;
        else if(cur_scrollRecty>(bmp.getWidth()-d_width))cur_scrollRecty=(bmp.getWidth()-d_width);
        s_rect.set(cur_scrollRectx,cur_scrollRecty,cur_scrollRectx+d_width,cur_scrollRecty+d_height);

        canvas.drawColor(Color.RED);
        canvas.drawBitmap(bmp, s_rect,d_rect,paint);
        canvas.drawLine(0, 0, 900, 500, paint);

        scrollRect_x=cur_scrollRectx;
        scrollRect_y=cur_scrollRecty;
    }

} 
```

关于如何获得图像上的实际坐标的任何想法？我在 android 应用程序开发方面还是很陌生。提前致谢 ！p/s: 对不起我乱七八糟的代码>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:54:58.277

我*认为*您需要的信息存储在 s_rect 中，因为 s_rect 将画布的偏移量存储到位图中（？）

```
int bmp_x_origin = 0 - s_rect.left;
int bmp_y_origin = 0 - s_rect.top; 
```

然后在 x ， y 处绘制（其中 x 和 y 是位图坐标）

```
int draw_x = bmp_x_origin + x; 
```

我还没有测试过代码，但我认为它在正确的轨道上。

# java - 当我运行 index.jsp 时，Tomcat 不工作

> ID：11923406
> 
> 赞同：0
> 
> 时间：2012-08-12T15:34:14.543
> 
> 标签：java, jsp, tomcat

我终于放弃了，

当我尝试运行我的`index.jsp`时，我会进入调试器

并且此异常打印在屏幕上：

`jdbcOdbcDriver.finalize() line: not available[local variables are not available]`

我正在使用tomcat服务器

我不知道为什么会发生这种情况，谷歌也没有多大帮助。

任何帮助，将不胜感激。

以利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:58:35.077

如果您使用的是 Eclipse，这可能是由于`.metadata`文件夹损坏。尝试退出 Eclipse，备份文件夹，然后将其删除。

更多信息[在这里](http://coderzen.blogspot.com/2012/02/jdbcodbcdriverfinalize-line-not.html)。

出于好奇，您为什么使用这个特定的驱动程序而不是[Type 4](http://en.wikipedia.org/wiki/JDBC_driver#Type%5F4%5FDriver%5F-%5FNative-Protocol%5FDriver)驱动程序？

顺便说一句，对于未来的 JDBC 调试，您可能会发现[p6spy 很有用](http://sourceforge.net/projects/p6spy/)。

# php - 关于 UTF-8 电子邮件地址

> ID：11923408
> 
> 赞同：0
> 
> 时间：2012-08-12T15:34:54.473
> 
> 标签：php, email, encoding, utf-8

如果我通过 php 解析入站电子邮件，并且地址（通过 php）看起来像这样：

```
=?UTF-8?B?5rWL6K+V5Zyw5Z2A?= <æµè¯å°å@server.tld> 
```

它应该看起来像这样：

```
测试地址 <测试地址@server.tld> 
```

知道如何快速从一种转换为另一种吗？可能正盯着我的脸，但无论如何，目前还没有完全看到它。

关于这发生在哪里。基本上，假设一封任意电子邮件被发送到通过 php 脚本处理的包罗万象的邮件，则 php 脚本在执行时会读取`to`此电子邮件的标题：

```
$a = imap_open({inbox}FOO,[username],[password]);
$x = [mail index];
$headers = imap_header($a,$x);
$data = $headers->toaddress; 
```

`$data`是我所关心的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:54:26.023

尝试这个： -

看到这个网址-

[PHP解码GB2312](https://stackoverflow.com/questions/4559649/php-decode-gb2312-updated)

[http://in2.php.net/manual/en/function.iconv-mime-decode-headers.php](http://in2.php.net/manual/en/function.iconv-mime-decode-headers.php)

更好的转换方法是使用 iconv，请参阅[http://www.php.net/iconv](http://www.php.net/iconv) - 示例：

```
<?php
$myUnicodeString = "Åäö";
echo iconv("UTF-8", "ISO-8859-1", $myUnicodeString);
?> 
```

以上将以 ISO-8859-1 编码回显给定变量，您可以将其替换为您喜欢的任何内容。

**另一种解决方案**

```
<?php
$headers_string = <<<EOF
Subject: =?UTF-8?B?UHLDvGZ1bmcgUHLDvGZ1bmc=?=
To: example@example.com
Date: Thu, 1 Jan 1970 00:00:00 +0000
Message-Id: <example@example.com>
Received: from localhost (localhost [127.0.0.1]) by localhost
    with SMTP id example for <example@example.com>;
    Thu, 1 Jan 1970 00:00:00 +0000 (UTC)
    (envelope-from example-return-0000-example=example.com@example.com)
Received: (qmail 0 invoked by uid 65534); 1 Thu 2003 00:00:00 +0000

EOF;

$headers =  iconv_mime_decode_headers($headers_string, 0, "ISO-8859-1");
print_r($headers);
?> 
```

# javascript - Node.js V8 通过引用传递

> ID：11923419
> 
> 赞同：16
> 
> 时间：2012-08-12T15:36:55.737
> 
> 标签：javascript, node.js, pass-by-reference, v8

我想知道如何在 V8 中管理内存。看看这个例子：

```
function requestHandler(req, res){
  functionCall(req, res);
  secondFunctionCall(req, res);
  thirdFunctionCall(req, res);
  fourthFunctionCall(req, res);
};

var http = require('http');
var server = http.createServer(requestHandler).listen(3000); 
```

和变量在每个函数调用中传递，我的问题是`req`：`res`

1.  V8 是通过引用传递它还是在内存中复制？
2.  是否可以通过引用传递变量，看这个例子。

    ```
    var args = { hello: 'world' };

    function myFunction(args){
      args.newHello = 'another world';
    }

    myFunction(args);
    console.log(args); 
    ```

    最后一行，`console.log(args);`将打印：

    ```
    "{ hello: 'world', newWorld: 'another world' }" 
    ```

感谢您的帮助和回答:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-12T15:52:21.743

这不是通过引用传递的意思。通过引用传递将意味着：

```
var args = { hello: 'world' };

function myFunction(args) {
  args = 'hello';
}

myFunction(args);

console.log(args); //"hello" 
```

以上是不可能的。

变量只包含对对象的引用，它们不是对象本身。因此，当您传递作为对象引用的变量时，该引用当然会被复制。但是引用的对象没有被复制。

* * *

```
var args = { hello: 'world' };

function myFunction(args){
  args.newHello = 'another world';
}

myFunction(args);
console.log(args); // This would print:
    // "{ hello: 'world', newHello: 'another world' }" 
```

是的，这是可能的，您可以通过简单地运行代码来查看它。

# r - 使用 R 的 xts 中的端点

> ID：11923420
> 
> 赞同：3
> 
> 时间：2012-08-12T15:36:59.520
> 
> 标签：r, xts, endpoints, posixct

我试图弄清楚`endpoints`当我的数据只是弱规则时如何选择时间：也就是说，缺少一些观察结果。我有 1 分钟的回报，但缺少一些分钟，我正在尝试转换为 5 分钟的间隔。将如何`endpoints`决定保留哪些时间？我使用的电话是：

```
endpoints(ret_1_min_xts, k=5, "minutes") 
```

我的系列看起来像这样，例如：

```
1986-02-04 09:32:00 1
1986-02-04 09:33:00 2
1986-02-04 09:34:00 3
1986-02-04 09:35:00 4
1986-02-04 09:36:00 5
1986-02-04 09:37:00 6
1986-02-04 09:38:00 7
1986-02-04 09:39:00 8
1986-02-04 09:40:00 9
1986-02-04 09:41:00 10
1986-02-04 09:42:00 11
1986-02-04 09:45:00 12
... 
```

调用`endpoints`返回：

```
1986-02-04 09:34:00
1986-02-04 09:39:00 
1986-02-04 09:42:00 
1986-02-04 09:49:00
1986-02-04 09:54:00
... 
```

我正在尝试查看的源代码，`endpoints`但似乎该函数在 C 中并通过调用`.Call`；我理解正确吗？如果有人可以解释所使用的方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:08:01.427

如上面评论中的回答并直接取自 endpoints.c 源代码，该函数返回以下内容：

```
c(0,which(diff(_x%/%on%/%k+1) != 0),NROW(_x)) 
```

在哪里`_x = .index(my_xts)`

这实际上是做什么的？关于我对`endpoints`函数的调用：

里面的东西`diff`首先删除秒，然后将东西移动到 k 分钟增量（所有这些都使用整数除法）。 `diff`然后简单地记下您更改为下一个增量的点并`which`返回发生增量的那些点。实际上，这只是返回每 5 分钟间隔的最后一个点（在我的通话中 k=5）

# grails - Grails 中的属性文件

> ID：11923424
> 
> 赞同：0
> 
> 时间：2012-08-12T15:37:19.410
> 
> 标签：grails, properties, locale

对于许多语言环境，grails 应用程序中有一些 messages.properties 文件，并且在每个文件中，字符都是正确的 utf-8 编码。但是当我创建一个新的属性文件（例如，阿塞拜疆语言环境的 messages_az.properties）时，其中会出现一个十六进制代码。我能做些什么来解决这个问题。也许我必须在我的应用程序中做一些配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:46:37.377

可能您的 IDE 已配置为自动编码属性文件。

# java - 多实例与缓存实例

> ID：11923425
> 
> 赞同：1
> 
> 时间：2012-08-12T15:37:29.997
> 
> 标签：java, optimization

考虑一个`interface`只有一种方法的：

```
Object getValue(String data); 
```

假设这描述了从 a`String`到任何其他数据类型的数据转换（假设转换是有效的）。对于来自文本上下文的数据，可能有几列具有相同的数据类型，因此会有多个相同数据转换器的实例。

很久以前，我编写了代码来缓存这些实例，而不是拥有同一个对象的多个实例：

```
private HashMap<Class<? extends T>, T> map;

public synchronized T getInstance(Class<? extends T> type) throws IllegalArgumentException
{
  T instance = map.get(type);
  if (instance == null)
  {
    try
    {
      instance = type.newInstance();
    }
    catch (Exception ex)
    {
      throw new IllegalArgumentException("The provided class cannot be instantiated: "
              + type.getName() + "\n" + ex);
    }
    map.put(type, instance);
  }
  return instance;
} 
```

由于这些类没有状态，因此在当时拥有同一个类的许多实例而单个共享实例就可以了，这似乎是一种浪费。

但是，维护映射可能比拥有同一对象的多个实例（即使可以共享单个实例）的开销更大。我的意思是，即使有多个实例，方法代码也只会放在内存中一次，对吗？所以在我看来，JVM 有效地为我保留了缓存。

有什么想法吗？单例实例缓存方法会更好吗？

感谢您阅读我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:55:57.250

每次使用 时`new`，都会创建一个在堆中分配的新对象实例。当然，可执行代码属于类，它只是共享实例。

无论如何，从您的文本中，您的对象没有状态，您只是在转换 String 参数而不使用其他数据。鉴于此，我会寻求一种`static`方法。

# javascript - 悬停功能不适用于具有相同 ID 的多个元素

> ID：11923428
> 
> 赞同：0
> 
> 时间：2012-08-12T15:37:47.840
> 
> 标签：javascript, jquery, animation

我的想法是，当您将鼠标悬停在图像上时，前面会出现一个黑色的 0.9 不透明度 div，显示一些信息。它确实有效，但仅适用于第一个元素，然后它根本不起作用。我使用相同`id`的 's 和 classes，因为我使用的系统为每个语句创建一个并重复具有不同内容的语法。我似乎无法使它工作，请帮助！

这是小提琴上的代码。 [http://jsfiddle.net/9dzU6/](http://jsfiddle.net/9dzU6/)

先感谢您！祝你今天过得愉快！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:39:32.940

这就是 id 的工作方式。它们应该是独一无二的。如果你想要多个，你应该使用一个类并选择“.myClass”。

[这是修复的小提琴，](http://jsfiddle.net/nGLXR/2/) 我认为应该更正 CSS，但您仍然可以看到 JS 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:40:26.883

ID 应该是唯一的。如果要将其分配给多个项目，请将其用作类。这意味着，您可以尝试；

`$('.distinguished')`而不是`$('#distinguished')`在分配课程之后。

# android - android sdk 下载完成，大小错误

> ID：11923435
> 
> 赞同：1
> 
> 时间：2012-08-12T15:39:32.500
> 
> 标签：android, eclipse

我在下载 opensense 时遇到问题`sdk 15`。我得到的错误是：

```
[2012-08-12 15:38:32 - SDK Manager] Download finished with wrong size. Expected 27230698 bytes, got 6492 bytes. 
```

我是`using Eclipse JDK 6`

我对此并不陌生，无法自行解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:42:31.033

这是因为您的互联网连接在下载过程中不断中断。所以这就是你必须做的：

1.  停止所有其他需要使用互联网的任务。
2.  确保您或您的服务器在下载 Android 软件包时没有断开连接。
3.  避免在暂停或取消下载时中断下载。
4.  在下载过程中尽可能让您的 PC 保持空闲状态。

确保所有这些东西，它应该下载正常。

# objective-c - 从 char 数组中创建 NSString，其中包含 \0 个字符？

> ID：11923438
> 
> 赞同：4
> 
> 时间：2012-08-12T15:40:10.560
> 
> 标签：objective-c, nsstring, null, char, byte

我正在尝试`NSString`从无符号字符数组（ASCII 编码）初始化一个简单的。`\0`问题是，数组中有一些s 作为分隔符。如果我使用

```
[[NSString alloc] initWithBytes:bytes length:length encoding:NSASCIIEncoding]; 
```

我只得到第一个部分`\0`。即使有`\0`s，有没有办法获取长度参数中指定的字节数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T15:55:20.557

整个数组构成字符串，只是当您尝试显示它时，只显示到初始`\0`值的部分。

这是说明这一点的代码：

```
unsigned char data[] = "hello\0world";
NSString *str = [[NSString alloc] initWithBytes:data length:sizeof(data) encoding:NSASCIIStringEncoding];
NSLog(@"%@", str);
NSLog(@"%@", [str substringFromIndex:6]); 
```

这会产生以下日志输出：

```
hello
world 
```

# java - 使用 Web Socket 传输和读取图像

> ID：11923442
> 
> 赞同：0
> 
> 时间：2012-08-12T15:40:35.137
> 
> 标签：java, html, sockets, websocket

我正在使用 jWebSocket 在我的 JavaSE 客户端和浏览器之间传输消息。

现在我想使用套接字传输图像。目前我正在使用

getTokenServer().sendPacket(wsc, wsPacket);

来传递消息。

我怎么能修改它来传输图像。

另外，我如何在浏览器中查看通过网络套接字传输的图像。

# javascript - 使用 javascript 添加微数据

> ID：11923447
> 
> 赞同：2
> 
> 时间：2012-08-12T15:41:05.230
> 
> 标签：javascript, html, microdata

我有一个基于 Javascript 和 php 的评级系统。在每一页上显示结果“X票（moyenne X）”。X 是数字，“moyenne”表示“平均符号”。

我希望 javascript 添加微数据信息。源代码应显示如下内容：`<span itemprop="reviewCount">X</span> (Moyenne <span itemprop="ratingValue">X</span>)`

**可能吗 ？你能帮帮我吗？**

我认为我必须改变的是这一行：`$(widget).find('.total_votes').text( votes + ' votes (Moyenne ' + exact + ')' );`

这是我的 JS：

```
<script>
$(document).ready(function() {
    $('.rate_widget').each(function(i) {
        var widget = this;
        var out_data = {
            widget_id : $(widget).attr('id'),
            fetch: 1
        };
        $.post(
            '../php/ratings.php',
            out_data,
            function(INFO) {
            $(widget).data( 'fsr', INFO );
                set_votes(widget);
            },
            'json'
        );
    });

    $('.ratings_stars').hover(
        function() {
            $(this).prevAll().andSelf().addClass('ratings_over');
            $(this).nextAll().removeClass('ratings_vote'); 
        },
        function() {
            $(this).prevAll().andSelf().removeClass('ratings_over');
            set_votes($(this).parent());
        }
    );

    $('.ratings_stars').bind('click', function() {
        var star = this;
        var widget = $(this).parent();
        var clicked_data = {
            clicked_on : $(star).attr('class'),
            widget_id : $(star).parent().attr('id')
        };
        $.post(
            '../php/ratings.php',
            clicked_data,
            function(INFO) {
                widget.data( 'fsr', INFO );
                set_votes(widget);
        },
            'json'
        ); 
    });
});

function set_votes(widget) {
    var avg = $(widget).data('fsr').whole_avg;
    var votes = $(widget).data('fsr').number_votes;
    var exact = $(widget).data('fsr').dec_avg;
    window.console && console.log('and now in set_votes, it thinks the fsr is ' + $(widget).data('fsr').number_votes);
    $(widget).find('.star_' + avg).prevAll().andSelf().addClass('ratings_vote');
    $(widget).find('.star_' + avg).nextAll().removeClass('ratings_vote'); 
    $(widget).find('.total_votes').text( votes + ' votes (Moyenne ' + exact + ')' );
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:41:30.083

我的理解是，如果通过 Javascript 添加信息，Google 和其他微数据消费者将不会获取这些信息。我认为它需要出现在实际的 HTML 标记中。

谷歌在各种支持页面上声明，爬虫只能看到文本浏览器可见的内容，或者关闭 Javascript 的浏览器；我假设涉及微数据时没有什么不同。例如，请参见[此处](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35769#2)和[此处](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=72366)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:58:48.037

只有 Opera n FF 支持 MicroData JS。

```
<span itemprop="reviewCount">X</span> (Moyenne <span itemprop="ratingValue">X</span>) 
```

这是你的 JS 代码

```
var span = document.createElement("span");
span.itemProp = "reviewCount";
span.src = "http://example.org/example.jpg";
span.itemValue = X;

var span1 = document.createElement("span");
span1.itemProp = "ratingValue";
span1.src = "http://example.org/example.jpg";
span1.itemValue = X; 
```

# wcf - WCF 和不活动超时：是否可以禁用不活动超时？

> ID：11923452
> 
> 赞同：4
> 
> 时间：2012-08-12T15:41:47.177
> 
> 标签：wcf, timeout

我有一项服务将永远运行，无论是否有客户端访问该服务，但在很长一段时间没有客户端活动之后，才能与客户端连接。

这是因为，例如，在假期过后，我希望能够连接到服务，而无需手动重新启动服务。

目前，如果我的服务在 10 分钟内没有收到任何连接，则断开连接，但我不想指定任何时间，我想要无限时间。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T16:25:51.180

您可以设置`inactivityTimeout="infinite"`, 或一个非常高的值，虽然不建议这样做，但您的服务不应该这样，一旦客户端连接到它，他们就可以“永远”使用它。

**更新**

我的错误，似乎`inactivityTimeout`不能像其他超时一样设置为无限，例如`receiveTimeout`.

但是你为什么不直接设置`receiveTimeout="infinite"`呢？`inactivityTimeout`仅在您`reliableSession`启用时使用，如果您不需要可靠的会话，则只需将`receiveTimeout`绑定设置为无限，在这种情况下`receiveTimeout`，您的不活动超时。如果您必须使用可靠会话，那么 WCF 将使用这两个值来确定您的服务何时超时，并且需要同时满足这两个值才能保持连接处于活动状态。似乎最大值`inactivityTimeout`是'24.20：31：23.6470000'，基本上是24天20.5小时，所以在最坏的情况下，只需设置你`inactivityTimeout="24.20:31:23"`的时间，这仍然是一个相当长的时间，差不多一个月。如果您在此期间向您的服务发送一个简单的保持活动消息（基本上只是在您的服务上调用一些操作），那么您的连接将被保持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T15:44:05.093

我用以下方法解决了这个问题：

1.  从客户端 ping 到服务器以保持连接每 30 秒处于活动状态的方法。\
2.  在服务器绑定上，`ReceiveTimeout`用 1 分钟。
3.  对于创建的每个回调`ICommunicationObject`，使用 Closed 事件删除不活动的客户端。

```
 //Adding a client callback
    OperationContext context = OperationContext.Current;
    ICallback callback = context.GetCallbackChannel<ICallback>();
    ICommunicationObject obj = (ICommunicationObject)callback;
    obj.Closed += new EventHandler(obj_Closed);

    //Event for inactive clients
    void obj_Closed(object sender, EventArgs e)
            {
                if (_callbacks.ContainsValue(((ITecnobelRemoteServiceCallback)sender)))
                {
                    var item = _callbacks.First(kvp => kvp.Value == (ITecnobelRemoteServiceCallback)sender));
                    _callbacks.Remove(item.Key);
                    treeViewClients.Nodes.RemoveByKey(item.Key.Id);
                    treeViewClients.Refresh();
                    _registeredUsers--;
                    listBoxStatus.Items.Add(String.Format("User {0} was inactive 
    and was removed", item.Key.Id));
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-25T19:49:56.920

我不确定 .NET 的其他版本，但在 4.5 上，我还试图绕过 WCF 服务的非活动期。

一时兴起，我设置`binding.ReceiveTimeout = System.Threading.Timeout.InfiniteTimeSpan`了 ，这是一个负时间跨度。这导致抛出异常，并带有以下有趣的消息花絮：

```
System.ArgumentOutOfRangeException: Timeout must be greater than or equal to TimeSpan.Zero. To disable timeout, specify TimeSpan.MaxValue. 
```

所以我回到我的代码，将 设置`ReceiveTimeout`为`TimeSpan.MaxValue`，现在禁用了不活动计时器。

# android - 同步两个EditText的内容

> ID：11923453
> 
> 赞同：0
> 
> 时间：2012-08-12T15:41:52.710
> 
> 标签：android, android-layout, android-widget

我想同步两个 EditText 的内容。第一个是在 Java 中动态创建的，第二个是在 XML 中创建的。我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:59:26.720

从您上面的评论来看，您似乎缺少对 Java 或一般代码的一些基本理解。要么你发布了一个没有更多上下文就无法理解的片段。

```
I tried to do it this way: edittext1 = edittext2.getText(); 
```

您不能将字符串分配给 EditText...

```
and even so: String newString = edittext1.getText().toString();. 
```

这是获取字符串的正确方法..

> edittext2 = setText(newString);

很难理解这一点。您是否将 setText() 的（未指定）结果分配给 editText2 变量？这可能没有任何意义。

您只需`editText2.setText(editText1.getText().toString());`

# asp.net - 默认按钮在 asp.net 面板中不起作用

> ID：11923457
> 
> 赞同：5
> 
> 时间：2012-08-12T15:42:11.400
> 
> 标签：asp.net, panel, defaultbutton

我有一个带有默认按钮设置的 asp.net 面板，但是当按下 ENTER 按钮时该按钮永远不会触发。我搜索了这个问题，但找不到任何有效的响应。

当用户点击 ENTER 时，如何让 btnRegister 点击？

```
<asp:Panel runat="server" ID="pnlCustomer" DefaultButton="btnRegister">
    <table width="500px" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td align="right">
            <asp:Button ID="btnBackToProfile" Text="Back To Profile" runat="server" Enabled="false"
                onclick="btnBackToProfile_Click" />
        </td>
        <td align="right">
            <asp:Button ID="btnClearnForm" Text="Clear Form" runat="server" 
                OnClientClick="ClearForm1()" />
        </td>
        <td align="right">
            <asp:Button id="btnRegister" runat="server" onclientclick="document.getElementById('AlertTime').value = GetSeconds();" Text="Continue" OnClick="btnRegister_Click" />
        </td>
    </tr>
    </table>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T16:38:44.500

**我想在这里指出的第一件事是，默认按钮是当焦点位于此面板中存在**的一个控件上时按下的控件，而不是页面的其余部分。

您的问题的主要原因是因为在此面板内您**没有任何东西（除了按钮）可以保持键盘的焦点**并将输入发送到默认按钮。

像**文本编辑器**之类的东西，例如：如果您在面板中放置一个文本编辑器，单击它然后按回车键，将触发默认按钮。

所以当焦点在这个面板里面的时候是在一个按钮上，并且当你按下回车键时选择的按钮是按下的，而不是默认的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-19T19:36:28.753

我遇到了同样的问题，发现面板不能位于包含默认按钮的表格之外。如果您将面板放在有按钮的单元格内，它应该可以工作。

# ios - 比赛数据表现得很奇怪

> ID：11923462
> 
> 赞同：0
> 
> 时间：2012-08-12T15:42:32.917
> 
> 标签：ios, game-center

我的应用程序有这个代码来处理 matchData 发送（谈论 GKTurnBasedMatch）-

```
GKTurnBasedMatch *currentMatch = [[GCTurnBasedMatchHelper sharedInstance] currentMatch];
    NSString *newStoryString;
    if ([textInputField.text length] >= 250) {
        newStoryString = [textInputField.text substringToIndex:249];
    }
    else if ([textInputField.text length] <= 19) {
        characterCountLabel.text = [NSString stringWithFormat:@"%d to send", 20 - [textInputField.text length]];
        [characterCountLabel setFont:[UIFont fontWithName:@"ChalkboardSE-Bold" size:17]];
        characterCountLabel.textColor = [UIColor redColor];
        return;
    }
    else if ([textInputField.text length] <250 && [textInputField.text length] >= 20) {
        newStoryString = textInputField.text;
    }
    NSLog(@"New %@", newStoryString);

        if ([newStoryString length] >0){
            NSLog(@"Main %@", mainTextController.text);
            NSString *sendString = [NSString stringWithFormat:@"%@ %@", mainTextController.text, newStoryString];
            NSLog(@"Send %@", sendString);

        NSData *data = [sendString dataUsingEncoding:NSUTF8StringEncoding ];
        mainTextController.text = sendString;
            NSLog(@"Send %@", sendString); 
```

mainTextController 是一个 UITextView，负责在比赛结束时显示 matchData。现在，奇怪的行为 - 说我正在发送 hiiiiiiiiiiiiiiiiiiiiiiiii

第一个日志是 - 新的 hiiiiiiiiiiiiiiiiiiiiiiiii

其次是 - 主要 hiiiiiiiiiiiiiiiiiiiiiiiii hiiiiiiiiiiiiiiiiiiiiiiiiii（注意突然的乘法）

第三个是 - 发送 hiiiiiiiiiiiiiiiiiiiiiii hiiiiiiiiiiiiiiiiiiiiiiiii hiiiiiiiiiiiiiiiiiiiiiii （嗯，那是因为它发送那里的内容和新文本）。

基本上，我想要完成的是发送一个文本，它与已经发送的内容（什么都没有）结合起来，然后在 mainTextController 中显示它。这应该适用于所有玩家。我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:01:51.200

我假设您的 mainController.text 包含两次 hi 文本，并且您正在向其中添加第三个。所以对我来说，它看起来像你想要的。如果你在它记住文本之前测试它是正常行为，因为匹配在 Apple 的服务器上是持久的。

# google-app-engine - 出于商业目的在 GAE 上免费创建 pdf（不是 itext 或 pdfjet）

> ID：11923465
> 
> 赞同：1
> 
> 时间：2012-08-12T15:42:56.390
> 
> 标签：google-app-engine, pdf-generation

GAE 允许每天最多创建 100 个 pdf 文件。我需要更多。是的，您可以请求更多，但您必须联系 Google，请求一个应用程序，然后再请求另一个应用程序。这是不切实际的。

我想将 html 转换为 pdf 或在 GAE 上从头开始创建 PDF。但是，如果您将 itext 和 pdfjet 用于业务，它们不是免费的。当我在 GAE 上出于商业目的使用它时，您是否知道任何在 GAE 上运行的免费并支持 utf8 的框架。最好用于java。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:32:32.030

看看[http://code.google.com/p/flying-saucer/](http://code.google.com/p/flying-saucer/)它将普通的 XHTML+CSS 转换为 PDF。我一直在使用它来创建大规模的文档。顺便说一句，Openoffice 可以将样式化的文档导出为整洁、可读的 XHTML，这为我提供了创建中间 XHTML 文档的良好起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:32:48.357

您可以[请求增加配额](http://support.google.com/code/bin/request.py?contact_type=AppEngineQuotaRequest)。

或者查看使用 Java 创建 PDF 的其他选项：[使用 Java 创建 PDF](https://stackoverflow.com/questions/7355025/create-pdf-with-java)

# ios - UITextField 的清除按钮在 UITableViewCell 中不起作用

> ID：11923469
> 
> 赞同：3
> 
> 时间：2012-08-12T15:43:27.693
> 
> 标签：ios, uitableview, uitextfield

我有一个`UITableView`有一些单元格`UITextField`的单元格，我在每个单元格中添加了一个。

我设置`textField.clearButtonMode = UITextFieldViewModeWhileEditing`。

当我编辑文本字段时，清除按钮和键盘都出来了。我在 textField 中键入一些单词，然后点击清除按钮，键盘将被隐藏，但 textField 中的文本不会被清除。

除清除按钮外，其他所有功能都运行良好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T21:18:58.563

我遇到了这个问题，因为我忘记了我正在使用 a`UITapGestureRecognizer`来捕捉桌面上的水龙头以关闭键盘，并且它正在捕捉清除按钮上的水龙头，从而阻止它运行。添加`cancelsTouchesInView=NO`以`UITapGestureRecognizer`使触摸仍然生效并检查使用轻敲`CGRectContainsPoint`方法仅结束编辑并且`resignFirstResponder`仅当轻敲不在当前`UITextField`的框架矩形上时。请注意，这仍然不是完全完美的，因为在自动更正上点击 X 可能在文本字段的框架矩形之外，因此检查单元格`contentView`可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T06:21:54.373

如果你有手势识别器，你应该这样做

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(methodThatYouMayCall)];
[myTextField addGestureRecognizer:gestureRecognizer];
gestureRecognizer.delegate =  self;
gestureRecognizer.cancelsTouchesInView = NO; 
```

当您单击清除按钮时，这将清除文本字段并触发“methodThatYouMayCall”，因此您也应该这样做，您的 textField.clearButtonMode 是一种 UIButton 类，因此您可以这样做

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{   
   if ([touch.view isKindOfClass:[UIButton class]]) 
   {
       return NO;
   }
   else
   {
       return YES;
   }
} 
```

不要忘记将类标记为实现 UIGestureRecognizerDelegate 协议。希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T18:59:58.623

我无法重现您遇到的问题，因为触摸清除按钮不会也不应该让第一响应者辞职。但也许您可以将您的代码与我在下面包含的最基本用例进行比较，以找出问题所在。

此外，我建议您阅读有关[UIResponder](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIResponder_Class/Reference/Reference.html)的文档，因为您似乎可能不小心涉足该领域。

```
@implementation TextFieldTableViewController

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    // Remove old instances of myTextField
    for (UIView *oldView in cell.contentView.subviews)
        [oldView removeFromSuperview];

    // Create my new text field
    UITextField *myTextField = [[UITextField alloc] initWithFrame:cell.contentView.bounds];
    [myTextField setClearButtonMode:UITextFieldViewModeWhileEditing];
    [myTextField setBorderStyle:UITextBorderStyleRoundedRect];

    // Add the TextField to the content view
    [cell.contentView addSubview:myTextField];

    return cell;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T10:14:00.030

虽然最初的问题不是由此引起的，但我认为任何未来的搜索都可能需要知道：

添加到 a 的视图`UITableViewCell` **必须**作为子视图添加到其`contentView`属性，否则您可能会遇到在未启用用户交互的情况下显示的视图。

`contentView`自 iOS 2.0 以来，您应该添加子视图。

# asp.net - 在 Formview 上插入命令

> ID：11923471
> 
> 赞同：2
> 
> 时间：2012-08-12T15:43:39.643
> 
> 标签：asp.net

我正在尝试通过 Formview 将数据插入到我的数据库中：

```
<asp:FormView ID="FormView3" runat="server" DataSourceID="SqlDataSource2" RenderOuterTable="False"
        DefaultMode="Insert">
        <InsertItemTemplate>
            Name:
            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
            <br />
            E-mail:
            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Email") %>'></asp:TextBox>
            <br />
            Website:
            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("Website") %>'></asp:TextBox>
            <br />
            Comment:
            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("Comment") %>'></asp:TextBox>
            <br />
            <asp:Button ID="postcomment" runat="server" Text="Button" OnClick="postcomment_Click" />
        </InsertItemTemplate>
    </asp:FormView> 
```

我尝试创建一个要插入的按钮，这是我的事件：

```
protected void postcomment_Click(object sender, EventArgs e)
    {
        FormView3.InsertItem(true);
    } 
```

但这似乎没有做任何事情。我究竟做错了什么？我只有使用其他自动为我构建插入/取消的数据绑定控件的经验。

编辑：

这是我在遵循 Jupaol 的建议后得到的：

```
<asp:FormView ID="FormView3" runat="server" DataSourceID="SqlDataSource4" RenderOuterTable="False" DefaultMode="Insert">
        <InsertItemTemplate>
            Name:
            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
            <br />
            E-mail:
            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Email") %>'></asp:TextBox>
            <br />
            Website:
            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("Website") %>'></asp:TextBox>
            <br />
            Comment:
            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("Comment") %>'></asp:TextBox>
            <br />
            pid:
            <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("PostId") %>'></asp:TextBox>
            <br />
            <asp:Button ID="postcomment" runat="server" Text="Button" CommandName="Insert" />
        </InsertItemTemplate>
    </asp:FormView> 
```

SQL 数据源：

```
<asp:SqlDataSource ID="SqlDataSource4" runat="server" 
        ConnectionString="<%$ ConnectionStrings:orangefreshConnectionString1 %>" 
        DeleteCommand="DELETE FROM [Comment] WHERE [Id] = @Id" 
        InsertCommand="INSERT INTO [Comment] ([Name], [Email], [Website], [Comment], [PostId]) VALUES (@Name, @Email, @Website, @Comment, @PostId)" 
        SelectCommand="SELECT [Name], [Email], [Website], [Comment], [PostId], [Id] FROM [Comment]" 
        UpdateCommand="UPDATE [Comment] SET [Name] = @Name, [Email] = @Email, [Website] = @Website, [Comment] = @Comment, [PostId] = @PostId WHERE [Id] = @Id"> 
```

尽管如此，当我单击插入按钮时，什么也没有发生 - 似乎有回发，但没有条目进入我的表格（我在页面中打孔的值仍在文本框中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:21:56.533

我刚刚为您做了一个完整的工作示例，在这种情况下，我创建了一个列表来模拟主从场景：（我正在使用*PUBS*数据库示例）

### 输出

![在此处输入图像描述](../Images/8f7dd1cf29ea17f7ce39e4f21d19be30.png)

### ASPX

```
 <asp:SqlDataSource runat="server" ID="sqds"
        ConnectionString="<%$ ConnectionStrings: ds %>"
        DataSourceMode="DataSet"
        SelectCommand="select * from jobs"
    >

    </asp:SqlDataSource>
    <asp:GridView runat="server" DataSourceID="sqds" ID="gv" DataKeyNames="job_id">
        <Columns>
            <asp:CommandField ShowSelectButton="true" />
        </Columns>
        <SelectedRowStyle Font-Bold="true" />
    </asp:GridView>

    <asp:SqlDataSource runat="server" ID="sqds2"
        ConnectionString="<%$ ConnectionStrings: ds %>"
        DataSourceMode="DataSet"
        SelectCommand="select * from jobs where job_id = @JobID"
        InsertCommand="insert into jobs (job_desc, min_lvl, max_lvl) values (@job_desc, @min_lvl, @max_lvl)"
    >
        <SelectParameters>
            <asp:ControlParameter ControlID="gv" DefaultValue="0" Name="JobID" PropertyName="SelectedValue" Type="Int16" />
        </SelectParameters>
        <InsertParameters>
            <asp:Parameter Name="job_desc" Type="String" />
            <asp:Parameter Name="min_lvl" Type="Int16" />
            <asp:Parameter Name="max_lvl" Type="Int16" />
        </InsertParameters>
    </asp:SqlDataSource>
    <asp:FormView runat="server" ID="fv" DataSourceID="sqds2" DefaultMode="Insert" 
        oniteminserted="fv_ItemInserted">
        <ItemTemplate>
            <b>Job Description:</b> <asp:Label Text='<%# Eval("job_desc") %>' runat="server" />
            <asp:Button Text="New" runat="server" CommandName="New" />
        </ItemTemplate>
        <InsertItemTemplate>
           <div>
                <b>Job Description</b>: <asp:TextBox ID="jobDescription" runat="server" Text='<%# Bind("job_desc") %>' />
            </div>
            <div>
                <b>Minimum level</b>: <asp:TextBox ID="minimumLevel" runat="server" Text='<%# Bind("min_lvl") %>' />
            </div>
            <div>
                <b>Maximum level</b>: <asp:TextBox ID="maximumLevel" runat="server" Text='<%# Bind("max_lvl") %>' />
            </div>
            <asp:Button Text="Insert" runat="server" CommandName="Insert" />
        </InsertItemTemplate>
    </asp:FormView> 
```

### ASPX 代码背后

```
 protected void fv_ItemInserted(object sender, FormViewInsertedEventArgs e)
    {
        this.gv.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:50:19.483

您需要查看使用 FormView1_ItemCommand

在此处查看示例代码

[http://www.codeproject.com/Articles/43780/Taming-the-FormView-Understanding-how-to-Implement](http://www.codeproject.com/Articles/43780/Taming-the-FormView-Understanding-how-to-Implement)

# ruby-on-rails - NodeJS 可以在 Rails 3 应用程序中运行吗？（实现高I/O并发）

> ID：11923474
> 
> 赞同：0
> 
> 时间：2012-08-12T15:43:45.277
> 
> 标签：ruby-on-rails, sockets, node.js, concurrency, websocket

目前我对 NodeJS 非常感兴趣，并且非常喜欢它运行高 I/O 并发的能力。

我还阅读了一篇与该主题相关的有趣[文章](http://blog.phusion.nl/2012/08/03/why-rails-4-live-streaming-is-a-big-deal/#.UCfNSp3ibeA "文章")，声称 Rails 4 将能够使用“实时流式传输”在此任务上实现高 I/O 并发并与 Node 竞争。

现在，我的问题是，NodeJS 可以在 Rails 3 应用程序中运行吗？

我等不及 Rails 4 的直播了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T17:09:18.447

我从 RailsConf 2012 [http://www.youtube.com/watch?v=4iFBC-xbE9I](http://www.youtube.com/watch?v=4iFBC-xbE9I)中找到了这个视频，Jerry Cheung 的标题为“Evented Ruby vs Node.js”。

他基本上解释了如何使用 Evented Ruby，并且 Evented Ruby 是一种解决方案，但又难又复杂。目前，如果我们的应用程序非常繁忙，则切换到 Node 会更容易。他还强调，在考虑并发之前减少延迟非常重要。

# c++ - 具有用户定义构造函数的普通和 POD 类型

> ID：11923476
> 
> 赞同：2
> 
> 时间：2012-08-12T15:43:52.653
> 
> 标签：c++, c++11

首先，这更像是一个健全性检查问题，以获得比我更精通语言标准的人的认可。

假设我有以下类型（尽管我省略了任何非构造函数和非赋值成员函数）：

```
template<typename E> struct half_expr
{
};

class half : public half_expr<half>
{
public:
    half();
    explicit half(float);
    template<typename E> half(const half_expr<E>&);

    half& operator=(float);
    template<typename E> half& operator=(const half_expr<E>&);

private:
    half(std::uint16_t, bool);

    std::uint16_t data_;
}; 
```

好吧，在任何合理的实现中， a`half`不应该是内存中的任何其他东西，而不是普通的`std::uint16_t`。但我对标准的保证很感兴趣。根据 POD 的 C++98/03 定义，这是我的基本原理：

*   `half`不能是 POD 类型，因为它具有非公共字段、基类和用户定义的构造函数。

和 C++11 丢失/扩展定义：

*   它应该是微不足道的可复制的，因为它只有隐式生成的复制/移动构造函数/赋值，但只要这些`float`和模板版本不以任何方式计算，我不完全确定。

*   它也应该是标准布局，因为它只有一个基本类型的私有字段和一个空的非虚拟基类（在任何标准中都应该是 POD，对吧？）

*   唯一阻碍 POD 分类的是它不是一般的默认可构造函数，恕我直言，这可能通过使用 C++11 的`half() = default`语法来克服。

我非常简单的问题是：**我的基本原理是完全正确的，还是在定义中我忽略或误解了任何东西，特别是考虑到用户定义的构造函数和赋值以某种方式阻碍了分类为微不足道的可复制？**

**注意：**即使您想将此委托给有关 POD 和标准布局类型的一些可能重复项（我完全可以理解），回答我的实际问题的简单评论仍然很好，因为这仅仅是一个健全性检查，这对你来说可能很简单或多余，但我只想安全起见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T16:06:34.237

是的，`half`是标准布局（9/7）：基类是空的，派生类对所有非静态数据具有相同的访问控制，没有任何虚拟和非标准布局的基础或成员，并且基础是与第一个非静态数据成员不同的类型。

您定义的构造函数和赋值运算符*不是*复制（或移动）构造函数和赋值，因此它们与类是否可简单复制无关。

默认构造函数是非平凡的，因为它是用户提供的 (12.1/5)，因此该类不是平凡的。

副本/移动都是微不足道的，因为数据成员和空基地有微不足道的副本/移动 (12.8/12)。析构函数也是如此，因此该类可以轻松复制。

所以我相信你的分析是正确的——删除无参数构造函数，你在 C++11 中有一个 POD 类（但在 C++98 中没有）。

正如 Luc 所说，标准中不能保证 POD 类不包含填充，即使它只有一个数据成员。

在 C++03 中，空基类优化是*允许*的，而不是必需的，因此质量差但符合 C++03 的实现当然可以为您提供`sizeof(half) == sizeof(half_expr<half>) + sizeof(uint16_t)`. 可以保证`sizeof(half_expr<half>) > 0`，并且如果它小于`uint16_t`您可以合理预期的填充。

在 C++11 中，布局兼容性规则实际上要求应用空基类优化——两种标准布局类型，一种具有基类，另一种没有，是布局兼容的 (9.2/17 )，并且布局兼容的类型可以通过联合 (9.2/19) 读取，这意味着它们必须具有相同的布局。填充仍然是允许的，但没有意义。

除了标准之外，您的实现可能会或可能不会从告诉您 POD 类是什么样子的 C++ ABI 工作。如果是这样，我希望虽然 ABI 可能还不是 C++11 的最新版本，但该实现肯定会使所有标准布局类看起来像定义 POD 类的方式，无论它们是否是也很简单（它会做 EBC 优化）。这就是标准布局的意义所在：“类的布局类似于 C 结构”。

我认为实现也被允许任意决定所有类类型必须是 4 对齐的，在这种情况下你会再次得到填充。不过，我认为期望这一点是不合理的，因为我能想到的唯一动机是你在一些奇怪的架构上，其中 4 对齐的指针可能小于`char*`.

# php - 带有两个提交按钮和两个不同操作的 HTML 表单

> ID：11923477
> 
> 赞同：0
> 
> 时间：2012-08-12T15:43:54.060
> 
> 标签：php, javascript, html, email, button

我有这个表格，有 2 个提交按钮：

```
<form method="post" onsubmit="send_mail(this);return false">

    <select name="liste">
     <option value='0'>Choose list</option>
     <option value="1">list1</options>
         <option value="2">list2</options>      
    </select>

<p>Subject: <input type="text" name="subject" /><br />

<div id="editor">
<textarea value="editor1" name="editor1">Some text here</textarea>
</div>

 <input type="submit" value="Sent Mail!" />
 <div id="testmail">
     <p><input type="button" onsubmit="send_Testmail(this);return false" value="Sent Test" />
     To: <input type="text" name="testemail" /><br />
</div>
</form> 
```

如您所见，在表单上，​​它具有以下 javascript 功能：`onsubmit="send_mail(this);return false`

看起来像这样：

```
function send_mail(form) {
   jQuery.post('editor.php', jQuery(form).serialize(), function(data) {
   jQuery('#center').html(data);
});
    } 
```

该脚本将表单数据发送到我的 editor.php 脚本，该脚本处理并发送邮件，然后返回“电子邮件发送”。脚本用 , 替换了`<div>`这个`<form>`语句`return`。这是我想要的工作。

现在我想创建另一个按钮和输入文本框，让用户在提交之前输入电子邮件并发送对上述表单的测试。

我怎样才能做到这一点？问题是 2 按钮总是提交 javascript send_mail，因为它附加到表单标签`onsubmit`。

这可能是一个基本问题 - 我希望有人能指出我正确的方向。

**编辑/更新：**

澄清一下：第一个按钮应该将 $post 发送到我的 editor.php 文件，并且 javascript 替换了包含整个表单的 div。我的第二个按钮应该将 $post 发送到我的 testmail.php 文件，并且只替换包含此按钮的 div 并输入文本字段（ID 为“testmail”。

希望这是有道理的..非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:58:48.077

你的 JavaScript 不是最好的。你不应该像你一样内联使用它（例如使用`onsubmit`属性）。相反，它应该是不显眼的，因此即使在用户浏览器中未启用 JavaScript，您的表单也应该可以工作。一个例子：

```
<form action="editor.php" method="post" id="contact-form">
  <div>
    <label for="to">To:</label>
    <input type="text" name="to" id="to" />
  </div>
  <div>
    <label for="subject">Subject:</label>
    <input type="text" name="subject" id="subject" />
  </div>
  <div>
    <label for="message">Message:</label>
    <textarea name="message" id="message"></textarea>
  </div>
  <div>
    <input type="submit" name="send" value="Send" />
  </div>
</form>
<div id="response"></div>
<script src="jquery.js"></script>
<script>
    $(document).ready(function() {
        $('#contact-form').submit(function() {
            var action = $(this).attr('action');
            var data = $(this).serialize();
            $.post(action, data, function(response) {
                $('#response').html(response);
            });
            return false;
        });
    });
</script> 
```

如果 JavaScript 不可用，上面将看到您的表单仍提交到**editor.php**，但如果 JavaScript*可用*，则 JavaScript 块将拾取表单提交，并使用 AJAX 发布它而不是重定向到**editor.php**。

如果您还想发送测试电子邮件，我会包含一个带有 name 的复选框`test`，如果选中它，请更改表单处理程序中的逻辑（在本例中**为 editor.php**），而不是使用完全不同的脚本。在最简单的情况下，它看起来像这样：

```
<?php
$to = $_POST['to'];
$subject = $_POST['subject'];
$message = $_POST['message'];

if (isset($_POST['test'])) {
    // do something
    // maybe set $to to something different
}

if (mail($to, $subject, $message)) {
    echo 'Sent';
}
else {
    echo 'Not sent';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:46:01.427

为什么你需要做一个ajax帖子并提交表单。**做任何一个。**

有 2 个普通按钮，可以通过`S.post`.

```
<form>
 <div id="testmail">
     <p><input type="button" onsubmit="send_Testmail(this);return false" value="Sent Test" />
     To: <input type="text" name="testemail" /><br />
</div>
<input type="button" id="button1" value="Send Mail!" />
</form>

$('#button1").click(function(form) {
   $.post('editor.php', $(form).serialize(), function(data) {
   $('#center').html(data);
   });
}); 
```

# qt - 使用 QGIS API 但获取未解析的外部符号“public：Windows 中的静态结构 QMetaObject const

> ID：11923478
> 
> 赞同：0
> 
> 时间：2012-08-12T15:44:00.057
> 
> 标签：qt, qgis, lnk2001

我正在尝试构建一个使用 QT 和 QGIS API (1.8.0) 的应用程序。在 Linux 下我没有遇到任何问题（使用 QT 4.7.0），但在 Windows 下（使用 QT 4.8.1）我得到：

```
1>maptoolselect.obj : error LNK2001: unresolved external symbol "public: static struct QMetaObject const QgsVectorLayer::staticMetaObject" (?staticMetaObject@QgsVectorLayer@@2UQMetaObject@@B)
1>mapwidget.obj : error LNK2001: unresolved external symbol "public: static struct QMetaObject const QgsVectorLayer::staticMetaObject" (?staticMetaObject@QgsVectorLayer@@2UQMetaObject@@B)
1>mapwidget.obj : error LNK2001: unresolved external symbol "public: static struct QMetaObject const QgsRasterLayer::staticMetaObject" (?staticMetaObject@QgsRasterLayer@@2UQMetaObject@@B)
1>debug\\nile.exe : fatal error LNK1120: 2 unresolved externals 
```

我的 .pro 文件如下：

```
QT       += core gui sql xml

TARGET = nile
TEMPLATE = app

unix:INCLUDEPATH += /usr/local/gis/include/qgis /usr/local/gis/include ./mapviewsrc
win32:INCLUDEPATH += C:/QGIS/apps/qgis/include C:/QGIS/include ./mapviewsrc

unix:LIBS += -L/usr/local/gis/lib -lgdal -lgeos -lqgis_core -lqgis_gui
win32:LIBS += C:/QGIS/apps/qgis/lib/qgis_core.lib C:/QGIS/apps/qgis/lib/qgis_gui.lib C:/QGIS/lib/geos_c_i.lib C:/QGIS/lib/gdal_i.lib

CONFIG += release

DEFINES += QGISPLUGINDIR=$${QGISPLUGINDIR} CORE_EXPORT= GUI_EXPORT= 
```

使用 QgsVectorLayer 和 QgsRasterLayer 的类 maptoolselect 和 mapwidget 在其类定义中都有 Q_OBJECT。

任何帮助深表感谢。

非常感谢，卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:26:17.673

事实证明，错误是由于在以下行中使用了 qobject_cast 而发生的：

> QgsVectorLayer* vlayer = qobject_cast(mCanvas->currentLayer());

如果我将这些行更改为使用 dynamic_cast 错误消失并且应用程序正常运行。

但是我不知道为什么我可以在 Linux 中使用 qobject_cast 而不能在 Windows 中使用！

# java - 从对象数组中检查对象中存在的值的有效方法

> ID：11923479
> 
> 赞同：1
> 
> 时间：2012-08-12T15:44:04.387
> 
> 标签：java, dynamic

我有一个对象数组。对象中有一个 getCountry()。当 getCountry() 等于说“XXX”时，我想设置一个标志。

据了解，我正在做，

```
boolean isXXX=false;
if(custAcctArray != null)
{
    for(int index=0;index<custAcctArray.length;index++)
    {
        if(custAcctArray[i].getCountry().equalsIgnoreCase("XXX"))
        {
            isXXX=true;
        }
    }
}

if(isXXX)
{
    Do something about it....
} 
```

当我假设数组充满了大约 100 个或奇怪的对象时，我不知何故不喜欢这种逻辑。有人可以通过其他方式以有效的方式实现最终输出吗？ **我想要什么：当****getCountry()** == " **XXX** "时设置一个标志

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:53:15.643

```
boolean isXXX=false;
if(custAcctArray != null)
{
    for(int index=0;index<custAcctArray.length;index++)
    {
        if(custAcctArray[i].getCountry().equalsIgnoreCase("XXX"))
        {
            isXXX=true;
            break;//<-------------you need to exit to be quick and true solution!!!!
        }
}
}

if(isXXX)
{
Do something about it....
} 
```

你看到休息了吗？? 这会尽快退出大循环。如果你不这样做，下一次迭代可以将它设置为其他值。

您还可以在对象外部使用“单独的”数组来更快地访问它（1少边界检查）

更好的方法：在设置国家值时，检查 if "xxx" 然后立即设置 isXXX，而不需要使用 "check" 算法 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T15:49:34.243

也许使用地图而不是数组。地图应从国家映射到对象。然后您将检查该键是否存在于地图中。

我脑海中的另一个想法是覆盖`toString()`该类的方法并使用`Arrays.toString(custAcctArray).contains("XXX")`（或者使用正则表达式进行更可靠的搜索）。但这似乎是一种解决方法。（这是一个相当糟糕的主意。将其视为摆脱代码中循环的一种棘手方法。）

编辑：总结一下我的想法。如果您在初始化数组时知道值“XXX”或使用一组并行的国家/地区值，我认为您应该使用布尔标志（请参阅我的评论）而不是地图。使用 HashSet（效率 O(1)），在这种情况下，您必须覆盖类中`equals()`的`hashCode()`方法。TreeSet 效率较低（O（log（n））），但在这里您使用比较器或`Comparable`在您的类中实现接口。

编辑：但是，在这种情况下，我们有`String`对象，所以不需要实现任何东西（`hashCode()`,`equals()`并`compareTo()`在那里实现）。

# facebook - Facebook 事件 API

> ID：11923483
> 
> 赞同：0
> 
> 时间：2012-08-12T15:44:49.600
> 
> 标签：facebook, api, events

我已经在谷歌上搜索了一段时间，以找到一种通过 id 将随机 facebook 事件页面获取到网站上的方法。到目前为止，我已成功获取所有事件的信息，如标题描述中的图片，但我在获取 rsvp 状态时遇到问题。我尝试了几件事，但没有成功，现在我写的脚本在昨天运行良好的情况下甚至无法运行。

这是我的代码：

```
require_once("facebook-platform/src/facebook.php");
$config = array();
$config['appId'] = 'aaaaaaa';
$config['secret'] = 'bbbbbbbbbb';
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);
// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
  $user = null;
  }
}
var_dump($user);// to check the returned user account which is int(0) and yesterday it
//worked fine giving me all the details

//now this is the code for getting the event
$fql='{
"event_info": "SELECT name,description, pic_small,pic_big, eid,venue,location  FROM       event WHERE eid =266159320165868", 
"event_venue":"SELECT name, username, page_id,location FROM page WHERE name IN (SELECT     venue.id FROM #event_info)"
}';

$setup  =   array(
'method'    => 'fql.multiquery',
'queries'     => $fql,
'callback'  => ''
);
$result   =   $facebook->api($setup); 
```

//这段代码运行良好，但现在不再运行了，因为我无法以用户身份登录

我想做的另一件事是从活动中获取参加按钮有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:00:49.963

看起来你遇到了三个问题：

1.  是你的代码不再工作了。退出 Facebook，重新启动浏览器并清除缓存，然后重新登录 Facebook 并查看它是否再次工作。

2.  您是否正在寻找特定用户对某个事件的 rsvp 状态。为此，您需要在上面的多查询中添加一个查询。

    'attending_event':'SELECT rsvp_status FROM event_member WHERE uid = me() AND eid = (SELECT eid FROM #event_info)'

3.  您无法获得活动的“参加”按钮。您需要编写自己的按钮，当经过身份验证的用户单击该按钮时，该按钮会发布到[https://graph.facebook.com/EVENT_ID/attending 。](https://graph.facebook.com/EVENT_ID/attending)

有关更多信息，请参阅此处的 facebook 文档：[https ://developers.facebook.com/docs/reference/api/event/#attending](https://developers.facebook.com/docs/reference/api/event/#attending)

# java - 创建一个单词中一组字母的每个可能频率的列表？

> ID：11923484
> 
> 赞同：1
> 
> 时间：2012-08-12T15:44:50.780
> 
> 标签：java, algorithm

我正在尝试编写一个算法，该算法将采用一组字母和一个包含单词大小的 int 并为此创建所有可能的字母分组，但我完全陷入困境......

例子：

```
**Input**
Letters: E
Size: 4

**Output** 
E___
E_E_
_E_E
EE__
_EE_
___E

etc.. 
```

另一个例子

```
**Input**
Letters: E, A
Size: 4

**Output** 
EA__
AE__
E_A_
_E_A
A_E_
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:59:28.650

这是一个使用递归来解决问题的算法： 定义一个以长度、字符数组（包括 '_' ）和另一个字符串数组作为参数的方法。

```
String[] meth(int l;char ch[],String[] s)
Define a new String array (ns) which contains N elements where N=length of array s * l
Copy each element of s into ns thrice, each time appending an element of ch
Make a recursive call to meth with (l, ch, ns) if the length of ns is less than l

If the input is {'E', 'A'} and 4
call meth(4,new char[]{'E','A','_'},new String[]{} ) 
```

# jquery - 当我导航到同一文件中的另一个页面时如何停止音频播放？

> ID：11923485
> 
> 赞同：0
> 
> 时间：2012-08-12T15:45:01.827
> 
> 标签：jquery, html, audio

我有一个带有故事[演示故事](http://www.centerwow.com/main/portfolio/1/)的文件。当我转到下一页时，我使用的是右箭头键。当我在新页面中时，旧页面继续播放，我需要听到新记录。

1.  当我转到下一页停止旧播放时，如何创建事件或制定其他解决方案？

当我转到下一页时，我仍然在同一个文件中。

```
<footer>
    <div style="position:relative;width:100%;margin-top:0px;margin-bottom:0px;">
    <div style="width:960px;height:94px;position:relative;margin:0px;margin-left:auto;margin-right:auto;margin-top:5px;margin-bottom:5px;padding:0px;overflow:hidden">
        <audio controls="controls">
          <source src="CarlyAndHerLemons1.ogg" type="audio/ogg" />
          <source src="CarlyAndHerLemons1.mp3" type="audio/mpeg" />
        </audio>
</footer> 
```

我想我应该使用类似于`document.getElementById('demo').pause()`

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:54:01.820

给你的音频标签一个 ID，然后使用：

```
document.getElementById('yourAudioTagID').pause(); 
```

此页面也[可能](http://www.catswhocode.com/blog/mastering-the-html5-audio-property)有用。

* * *

编辑：

这是一个[`JSFiddle`演示](http://jsfiddle.net/kamc8/)。

# c# - 使用快速排序对分数进行排序并在 1/2 和 2/4 之间指定

> ID：11923487
> 
> 赞同：1
> 
> 时间：2012-08-12T15:45:31.240
> 
> 标签：c#, quicksort, fractions

我正在尝试设置快速排序，并且我希望它对分数数组进行排序。
目前，它不能正确排序具有相等值的分数（例如 1/2 和 2/4）
1/2 需要在 2/4 之前，但它最终完全随机。

我正在使用的代码是这样的：

```
 public static void quicksort(Fraction[] f, int p, int r)
    {
        if (p < r)
        {
            int q = partition(f, p, r);
            quicksort(f, p, q - 1);
            quicksort(f, q + 1, r);
        }
    }

    public static int partition(Fraction[] f, int p, int r)
    {
        Fraction pivot = f[r];
        int i = p - 1;
        for (int j = p; j < r; j++)
        {
            if (f[j].Value < pivot.Value)
            {
                i++;
                Fraction wissel = f[i];
                f[i] = f[j];
                f[j] = wissel;
            }
            else
                if (f[j].Value < pivot.Value && f[j].Teller < pivot.Teller)
                {
                    i++;
                    Fraction wissel = f[i];
                    f[i] = f[j];
                    f[j] = wissel;
                }
        }
        Fraction wisselt = f[i + 1];
        f[i + 1] = f[r];
        f[r] = wisselt;
        return i + 1;

    } 
```

谁能阐明如何做到这一点？

编辑：David Archer 的建议修复了它，谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:11:24.847

我认为你想要的比较是这样的：

```
static int CompareFractions(Fraction a, Fraction b)
{
    // compare the value of the fractions
    int c = (a.numerator * b.denominator).CompareTo(a.denominator * b.numerator);
    if (c == 0)
        // break ties with "lowest numerator first"
        c = a.numerator.CompareTo(b.numerator);
    return c;
} 
```

您也可以将其用作普通 Sort 方法的排序委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:13:10.417

您的问题是您正在设计快速排序以`<`进行比较。

您可以通过将 1/2 重新定义`<` 为小于 2/4 来立即解决它，但这会弄乱所有其他`<`用作分数的情况。

您应该以正常的 .NET 方式定义您的排序，其中您有一个采用`System.Comparison`委托的表单，一个采用 a 的表单`System.IComparer`和不使用它们的重载，由这些实现。

```
internal class DelegateComparer<T> : IComparer<T>
{
  private Comparison _del;
  public DelegateComparer(Comparison del)
  {
    _del = del;
  }
  public int Compare(T x, T y)
  {
    return _del(x, y);
  }
}
public static void Quicksort(Fraction[] f, int p, int r, IComparer<Fraction> cmp)
{
  /* This is the only method with the real implementation */
}
public static void Quicksort(Fraction[] f, int p, int r)
{
  QuickSort(f, p, r, Comparer<Fraction>.Default);
}
public static void Quicksort(Fraction[] f, int p, int r, Comparison<Fraction> cmp)
{
  QuickSort(f, p, r, new DelegateComparer(cmp));
}
public static void QuickSort(Fraction[] f)
{
  QuickSort(f, 0, f.Length, Comparer<Fraction>.Default);
} 
```

完成后，对于将 1/2 放在 2/4 之前的奇怪情况，您需要做的就是执行此操作的自定义比较器。假设您的`Fraction`课程类似于：

```
public class Fraction
{
  public int Denominator{get;set;}
  public int Numerator{get;set;}
  public double Value
  {
    return (double) Numerator / (double) Denominator;
  }
} 
```

然后，您可以快速编写一个`IComparer<Fraction>`或一个`Comparison<Fraction>`来解决问题。让我们采取第二个选项：

```
private static int CompareSepDenom(Fraction x, Fraction y)
{
  int cmp = x.Value.CompareTo(y.Value);//normal comparison first
  if(cmp == 0)//same value;
    return x.Numerator.CompareTo(y.Numerator);//put lower numerator (also lower denum) first
  return cmp;
} 
```

如果这是真正的代码，而不是实验，那么我们也不会费心实现快速排序，因为`Array.Sort`无论如何`List<T>.Sort`都要使用快速排序。所以我们可以这样做：

```
Array.Sort(arrayOfFractions, CompareSepDenom); 
```

或者，如果您不打算重用 CompareSepDenom，而是希望有一个来自 lambda 的匿名委托，您可以使用：

```
Array.Sort(arrayOfFractions, (x, y) =>
    {
      int cmp = x.Value.CompareTo(y.Value);//normal comparison first
      if(cmp == 0)//same value;
        return x.Numerator.CompareTo(y.Numerator);//put lower numerator (also lower denum) first
      return cmp;
    }); 
```

另一方面，如果您正在编写快速排序作为实验或从代码中学习，请注意，您所依赖的事实`ICmparer<Fraction>`意味着您不再局限于编写方法来接受`<`已定义的特定类型.

这意味着您可以编写一个方法：

```
public static void QuickSort<T>(T[] arr, int p, int r, IComparer<T> cmp) 
```

这适用于所有类型。

完成此操作后，就该与库中内置的版本进行比较了。

编辑：

顺便说一句，以防你还没有这样做。你的`Fraction`类应该实现`IComparable<Fraction>`and `IComparable`（为了与 .NET1.0 向后兼容），以便不想创建自己的比较器委托或类的人可以获得分数的正常排序（其中 1/2 和 2/4是等价的）。一旦你实施了第一个：

```
CompareTo(Fraction other)
{
  if(other == null)//take out this of Fraction is a struct
    return 1;
  return Value.CompareTo(other.Value)
}
CompareTo(object obj)
{
  if(other == null)
    return 1;
  Fraction fract = other as Fract;
  if(fract == null)
    throw new ArgumentException("Can only compare with other factions", "obj");
  return CompareTo(fract);
} 
```

因为`Comparer<Fraction>.Default`将反过来使用它，所以不采用比较器的排序方法的版本将起作用，其他依赖于以其他方式排序的代码也将起作用。真的，对于任何“正常的排序方式”有意义的类，或者你定义`<`的类，`>`等等`<=`，都应该有它们。您还可以通过`CompareTo`（在实践中最终会被内联，因此没有性能损失`）路由所有这些运算符重载，这意味着相同的代码几乎适用于任何此类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T15:50:56.313

我不确定您使用的是哪个 Fraction 类，但如果您需要区分 1/2 和 2/4（在严格的数学术语中是相等的），我建议您创建自己的比较方法并使用这些方法而不是内置大于和小于运算符。

```
bool IsLessThan(Fraction a, Fraction b)
{
    // Your code here that results in 1/2 being less than 2/4
}

bool IsGreaterThan(Fraction a, Fraction b)
{
    // Your code here that results in 2/4 being greater than 1/2
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T16:01:15.993

为什么不直接使用`List<T>.Sort()`？它是快速排序的一个实现。如果你有一个`IComparable<Fraction>`实现，那么你可以调用`Sort()`. 如果您想传递特定方法，您也可以使用接受委托的覆盖。

例如，如果你的`Fraction`班级是这样的：

```
 public class Fraction : IComparable<Fraction>
    {
     public int CompareTo(Fraction other)
     {
       // if other equals this, return 0
       // if other is greater than this, return -1
       // if other is less than this, return 1
     }
//...
    } 
```

然后你可以有一个 List 变量并调用它的 Sort 方法：

```
myList.Sort(); 
```

# c# - 如何比较锯齿状数组中的项目？

> ID：11923497
> 
> 赞同：0
> 
> 时间：2012-08-12T15:47:26.740
> 
> 标签：c#, jagged-arrays

我想创建一个特定类型的锯齿状数组，然后根据数组中两个项目之间的比较创建另一个数组。

例如：

```
int[][] arr = new int[][] 
{
    new int[] {1,3,5,7,9},
    new int[] {0,2,4,6},
    new int[] {11,22},
    new int[] {0,2,4,6}
};

int[][] arrResult = new int[arr.GetUpperBound(0)][]; 

for (int i = 0; i < arr.GetUpperBound(0); i++)
{
    for (int j = 0; j < arr[i].Length; j++)
    {
        arrResult[i][j] = arr[i][j] + arr[i + 1][j];
    }
} 
```

我不确定如何说如果 i+1 不存在，则跳过该比较。还是有更好的方法来做到这一点？

编辑

通过比较，我的意思是我想访问数组中在列中彼此接连出现的两个项目，对它们做一些事情并从产品中创建一个新数组（具有相同结构）的条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:45:46.697

首先，这里不需要`GetUpperBound()`。这对多维数组（或非基于 0 的数组）很有用，而不是锯齿状数组。相反，您可以使用`Length - 1`.

其次，您需要创建要分配的数组。`new int[count][]`不会创建嵌套数组，因此您的代码会抛出`NullReferenceException`.

第三，您希望将索引（和创建的数组的大小）限制为两个大小中的较小者。你可以使用`Math.Min()`它。

放在一起：

```
int[][] arrResult = new int[arr.Length - 1][]; 

for (int i = 0; i < arr.Length - 1; i++)
{
    int length = Math.Min(arr[i].Length, arr[i+1].Length);
    arrResult[i] = new int[length];

    for (int j = 0; j < length; j++)
    {
        arrResult[i][j] = arr[i][j] + arr[i + 1][j];
    }
} 
```

第四，作为替代方案，您可以使用 LINQ [`Zip()`](http://msdn.microsoft.com/en-us/library/dd267698)（它会通过较短的数组来限制结果的大小）：

```
int[][] arrResult = new int[arr.Length - 1][]; 

for (int i = 0; i < arr.Length - 1; i++)
{
    arrResult[i] = arr[i].Zip(arr[i+1], (a, b) => a + b).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T16:16:08.453

您不是在比较，而是在添加。所以不清楚你真正想要做什么。

如果要对连续两行中的对应项执行操作，则只能对两行的最小长度执行此操作

```
for (int i = 0; i < arr.Length - 1); i++) {
    for (int j = 0; j < arr[i].Length && j < arr[i + 1].Length; j++) {
        arrResult[i][j] = arr[i][j] + arr[i + 1][j];
    } 
} 
```

# vb.net - VB.NET 数据表列类型

> ID：11923498
> 
> 赞同：0
> 
> 时间：2012-08-12T15:47:38.260
> 
> 标签：vb.net, datatable

我通过调用以下函数将数据表加载到数据网格视图：

```
 Public Sub GetData(ByVal selectCommand As String, ByVal bindingSource As BindingSource, ByVal table As DataTable)
    Try
        Dim connectionString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\adm\Desktop\222.mdb"
        Me.dataAdapter = New OleDbDataAdapter(selectCommand, connectionString)
        Dim commandBuilder As New OleDbCommandBuilder(Me.dataAdapter)
        table.Locale = System.Globalization.CultureInfo.InvariantCulture
        Me.dataAdapter.Fill(table)
        bindingSource.DataSource = table
    Catch ex As OleDbException
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

这是函数调用：

```
GetData("select * from products where ID=1 or ID=2", bindingSource1, t1) 
```

现在，数据表是否定义了来自源数据库的列类型？因为当我尝试将数据添加到 DateTime 列时，它说该列是整数类型，但在 Access 中我可以看到它是一个 DateTime 列。那么我需要为每列指定每种类型还是自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:56:47.590

检查您传递**日期值**的列的类型，确保该值不是`int`。如果是，则将其更改为`datetime`

**编辑** 转到数据表的属性并将列类型更改为`datetime`

# linux - 将 GPIO 状态从一台 linux 机器传送到另一台机器的最佳方法是什么

> ID：11923506
> 
> 赞同：1
> 
> 时间：2012-08-12T15:49:12.340
> 
> 标签：linux, nfs, gpio

我正在运行一个 beaglebone 和一个树莓派。我可以在路径 /sys/class/gpio 中轻松读取 gpio。我可以轻松地使用 Web 服务器从一台机器读取 gpio 状态到另一台机器，但我想知道是否有更好的较低级别的方法来通过网络映射 gpio 文件夹。我尝试了 NFS，但在运行 debian wheezy 映像的树莓派上收到此警告：

```
pi@raspberrypi ~ $ sudo service nfs-kernel-server restart
[ ok ] Stopping NFS kernel daemon: mountd nfsd.
[ ok ] Unexporting directories for NFS kernel daemon....
[....] Exporting directories for NFS kernel daemon...exportfs: /etc/exports [1]:     Neither 'subtree_check' or 'no_subtree_check' specified for export     "192.168.1.178:/sys/class/gpio".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

exportfs: /sys/class/gpio does not support NFS export
. ok
[....] Starting NFS kernel daemon: nfsd
[warn] Not starting: portmapper is not running ... (warning). 
```

所以看起来 gpio 不支持通过 NFS 映射。有谁知道另一种方法吗？

谢谢！贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-25T19:48:22.780

我从未尝试过使用 NFS，但我能够使用 sshfs 做到这一点。请参阅我的帖子[远程设置 GPIO](https://stackoverflow.com/questions/36846574/set-gpio-remotely)

# android - 无法从 DialogFragment 投射到 View - 任何解决方法？

> ID：11923509
> 
> 赞同：0
> 
> 时间：2012-08-12T15:49:31.493
> 
> 标签：android, date, casting, dialog, fragment

我在这些代码行中，eclipse 在第三行给了我一个错误，像这样说：“无法将 DialogFragment 转换为 View”，有什么解决方法吗？或其他选项/选项？

```
DialogFragment dateClock = new DatePickerFrag();
View homeSection = findViewById(R.layout.introducere_date);
((LinearLayout) homeSection).addView(((View) dateClock)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:37:35.490

这将是显示 TimePickerDialog 的一种方法 -

```
public static class TimePickerFragment extends DialogFragment
                        implements TimePickerDialog.OnTimeSetListener {

  @Override
  public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current time as the default values for the picker
    final Calendar c = Calendar.getInstance();
    int hour = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);

    // Create a new instance of TimePickerDialog and return it
    return new TimePickerDialog(getActivity(), this, hour, minute,
            DateFormat.is24HourFormat(getActivity()));
  }

  public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    // Do something with the time chosen by the user
  }
} 
```

进而

```
public void showTimePickerDialog() {
  DialogFragment newFragment = new TimePickerFragment();
  newFragment.show(getSupportFragmentManager(), "timePicker");
} 
```

# javascript - Chrome 扩展 null TypeError

> ID：11923511
> 
> 赞同：0
> 
> 时间：2012-08-12T15:49:47.697
> 
> 标签：javascript, google-chrome, google-chrome-extension

所以我有一个 chrome 扩展，可以通过 xml 文档检查程序的更新。但是，当我打开一个新标签时出现此错误：

```
Error in event handler for 'tabs.onActivated': Cannot call method 'getElementsByTagName' of null TypeError: Cannot call method 'getElementsByTagName' of null
at isUpdateAvailable (chrome-extension://bdhjocmpiogdmlfpbpppiffcjbonbocg/background.js:16:17)
at chrome-extension://bdhjocmpiogdmlfpbpppiffcjbonbocg/background.js:84:5
at chrome.Event.dispatch (event_bindings:237:41)
at Object.chromeHidden.Event.dispatchJSON (event_bindings:151:5 
```

代码：

```
function loadXMLDoc(dname) {
    if (window.XMLHttpRequest) {    
        xhttp=new XMLHttpRequest();
    } else {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send();
    return xhttp;
}

function isUpdateAvailable(type, build) {
    var buildNumber = localStorage["version" + build + type];
    var xml = loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + build + "/view/latest-" + type + "/");
    var xmlDoc = xml.responseXML;
    var x = xmlDoc.getElementsByTagName("title")[0];
    var y = x.childNodes[0];
    var txt = y.nodeValue;
    if(txt == buildNumber) {
        return true;
    }
    xml.close();
    return false;
}

function notify(type, build) {
    window.webkitNotifications.createNotification('icon.png', getTitle(type, build), getDescription(type, build));
}

function getTitle(type, build) {
    var title;
    var xml = loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + type + "/view/latest-" + build + "/");
    var xmlDoc=xml.responseXML;
    var name=xmlDoc.getElementsByTagName("name")[0];
    var version=xmlDoc.getElementsByTagName("version")[0];
    title+=name;
    title+=" version ";
    title+=version;
    title+=" is out!";
    xml.close();
    return title;
}

function getDescription(type, build) {
    var desc;
    var xml = loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + type + "/view/latest-" + build + "/");
    var xmlDoc=xml.responseXML;
    var name=xmlDoc.getElementsByTagName("name")[0];
    desc+="There is a new update for ";
    desc+=name;
    desc+=". You can download it here: ";
    var downloadLink;
    get_short_url(long_url, function(short_url) {downloadLink=short_url;});
    desc+=downloadLink;
    xml.close();
    return desc;
}

function get_short_url(long_url, func) {
    var login = "kezz101";
    var api_key = "R_d68d87d13b42412a56be9bd9711c4dc4";
    $.getJSON("http://api.bitly.com/v3/shorten?callback=?", 
        { 
            "format": "json",
            "apiKey": api_key,
            "login": login,
            "longUrl": long_url
        },
        function(response) {
            func(response.data.url);
        }
    );
}

chrome.tabs.onActivated.addListener(function() {
    var type = localStorage["type"];
    var build = localStorage["build"];
    if(!type) {
        type = "rb";
    }
    if(!build) {
        build = "craftbukkit";
    }
    if(isUpdateAvailable(type, build)) {
        notify(type, build);
        var xml = loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + type + "/view/latest-" + build + "/");
        var xmlDoc=xml.responseXML;
        localStorage["version" + build + type] = xmlDoc.getElementsByTagName("build_number")[0];
        xml.close();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:09:50.953

您正在使用同步 Ajax，它已[对扩展和应用程序禁用](http://developer.chrome.com/trunk/apps/app_deprecated.html)。您应该改为使用带有回调的异步 Ajax `loadXMLDoc`：

```
function loadXMLDoc(dname, callback) {
    if (window.XMLHttpRequest) {    
        xhttp=new XMLHttpRequest();
    } else {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname);

    xhttp.onload = function() {
        callback(xhttp);
    }

    xhttp.send();
}

function isUpdateAvailable(type, build, callback) {
    var buildNumber = localStorage["version" + build + type];
    loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + build + "/view/latest-" + type + "/", function(xml) {
        var xmlDoc = xml.responseXML;
        var x = xmlDoc.getElementsByTagName("title")[0];
        var y = x.childNodes[0];
        var txt = y.nodeValue;
        if(txt == buildNumber) {
            callback(true);
        } else {
            xml.close();
            callback(false);
        }
    });
}

...

chrome.tabs.onActivated.addListener(function() {
    var type = localStorage["type"];
    var build = localStorage["build"];
    if(!type) {
        type = "rb";
    }
    if(!build) {
        build = "craftbukkit";
    }
    isUpdateAvailable(type, build, function(isAvail) {
        if(isAvail) {
            notify(type, build);
            var xml = loadXMLDoc("http://dl.bukkit.org/api/1.0/downloads/projects/" + type + "/view/latest-" + build + "/", function(xml) {
                var xmlDoc=xml.responseXML;
                localStorage["version" + build + type] = xmlDoc.getElementsByTagName("build_number")[0];
                xml.close();
            });
        }
    });
}); 
```

# jquery - 处理程序中的 jQuery 变量

> ID：11923517
> 
> 赞同：0
> 
> 时间：2012-08-12T15:51:04.953
> 
> 标签：jquery

我对 jQuery 非常陌生，并且正在 jQuery 中制作一个历史 API-ish 脚本，因此只有新页面中所需的信息才会在点击时加载。问题是我不知道如何将 var 放在处理程序中，至少我认为它称为处理程序。这绝对是一件简单的事情。

```
 $("a#click").click(function() {
 var addressValue = $(this).attr("href");

  $("#main").load("addressValue #load");

 return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:52:44.303

如果您使用：

```
 $("a#click").click(function() {
 var addressValue = this.href;

  $("#main").load(addressValue + " #load");

 return false;
}); 
```

它应该工作；问题是您将变量放入字符串中，因此它被评估为变量名，而不是与`' #load'`字符串连接的变量。

此外，`href`避免调用 jQuery 会稍微快一些，而只需使用本机 DOM 方法（这是一个微优化，但只是稍微便宜一些）。

值得注意的是，`this.href`确实（有时是有问题的）检索由任何值暗示的绝对路径，严格来说，在`href`属性内部，包括域。而 jQuery 方法只是检索属性中的任何内容，因此：

```
<a href="/help/contact.html">contact page</a>:
this.href            : "http://subdomain.example.com/help/contact.html"
$(this).attr('href') : "/help/contact.html" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T15:52:32.927

```
$("a#click").on('click', function() {
    var addressValue = $(this).attr("href");
    $("#main").load(addressValue+" #load");
    return false;
}); 
```

# c - 用于编译 C 的 autotools 或 cmake

> ID：11923518
> 
> 赞同：1
> 
> 时间：2012-08-12T15:51:05.253
> 
> 标签：c, autotools

autotools 是否适用于所有主要的 unix 系统？我正在寻找无需安装任何其他软件和平台独立（UNIX 风格和体系结构）即可编译代码的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:52:19.447

如果您正确使用自动工具，最终结果是一个脚本`configure`，以便

```
 configure
 make
 make install 
```

有效——是的，自动工具的关键在于它应该在任何地方都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:56:56.157

我最近都使用过，总的来说我更喜欢 cmake 而不是 autotools。我发现 cmake 更简单，需要更少的脚本。尽管 cmake make 必须作为选项安装，但大多数 linux 发行版都将包含一个包。

Autotools 适用于简单的项目，但根据我的经验，它们在检查库等时需要大量额外的脚本 - 另一方面，cmake 使得检测依赖关系变得简单。这也是您可能不关心的一个优点 - 但它也使您在 Windows 平台上编译代码更容易

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-12T16:07:11.863

*Autotools*只需要安装在*developer*的系统上，而不需要安装在*builder*的系统上。他们的输出是一个独立的 sh 脚本，它将创建所需的 Makefile。但是在某些情况下（例如“自动”依赖项），构建器也可能需要*autotools*，并且需要特定版本并不少见。

*autotools*基本上是一个巨大的脚本化晦涩组件集合，由指令文件驱动，以一种更加晦涩的宏语言 - [m4](http://www.gnu.org/software/m4/)编写。如果您发现您的项目将被交叉编译的任何可能性很小，那么请远离*autotools*及其兄弟姐妹（阅读*libtool*）。

*cmake*是一个更好的选择，但还有更好和更精简的程序，例如[scons](http://www.scons.org/)。

尽管如此，我不得不承认，与 10 多年前相比，即构思*autotools的时候，今天的大多数 Unix 系统大多是 ANSI C 和 POSIX 兼容的。**除了经典的make*之外，我几乎看不到其他任何东西都能够以可移植的方式编译您的项目。

# asp.net-mvc - 模板的淘汰赛和 JQueryMobile 绑定错误

> ID：11923521
> 
> 赞同：1
> 
> 时间：2012-08-12T15:51:29.850
> 
> 标签：asp.net-mvc, jquery-mobile, knockout.js

使用 Asp.net MVC，我有两种观点：

第一种观点：

```
<div data-role="listview" data-theme="g" id="subcategorieslistview">
<ul data-bind="template: { name: 'subcategory-template', foreach: subcategories }" id="subcategories">
    <script type="text/html" id="subcategory-template">
     <li data-role="button" data-icon="arrow-r" data-iconpos="right">
       <a data-bind="attr : { title : name, categoryid : categoryId, lazyloaddescriptor : lazyLoadDescriptor}"><label data-bind="text: name"></label></a>
     </li>
   </script>        
</ul> 
```

```
<script type="text/javascript">
   $(document).one("pageinit", function () {
      <!-- Ajax load of view model --->
</script> 
```

第二种观点：

```
<div data-role="listview" data-theme="g" id="archivecontainerslistview">
<ul data-bind="template: { name: 'archivecontainers-template', foreach: archivecontainers }" id="archivecontainers">
    <script type="text/html" id="archivecontainers-template">
        <li data-role="button" data-icon="arrow-r" data-iconpos="right">
            <span data-bind="text: name"></span>
            <span data-bind="text: synopsis" class="ui-li-count"></span>
        </li>
    </script>        
</ul> 
```

```
<script type="text/javascript">
   $(document).one("pageinit", function () {
      <!-- Ajax load of view model --->
</script> 
```

当我进入第一个视图时，模板工作正常。然后我转到第二个视图，模板再次按预期工作。

但是，当我点击后退按钮返回第一个视图时，我在 knockout.js 中收到错误消息：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: synopsis is not defined; 
```

字段*概要*在第二个视图上，通过检查 DOM，我看到两个页面都加载到了我期望从 DOM 中删除第二个页面的位置（不确定错误是否阻止了第二个页面从 DOM 中删除）。

似乎因为当第一页被激活时第二页在 DOM 中，即使没有显示第二页，绑定似乎也在第二页中启动。不确定这是否正确。

Jquery mobile 或 KnockOut 中是否有任何东西可以以某种方式从第二页中删除绑定，以便我可以避免此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:18:01.113

> Jquery mobile 或 KnockOut 中是否有任何东西可以以某种方式从第二页中删除绑定，以便我可以避免此错误？

是的。

您是否尝试过调用[Knockout 的`cleanNode()`方法](https://stackoverflow.com/a/11033428/109941)从第二页中删除绑定？

# jquery - 内元素的jQuery索引

> ID：11923528
> 
> 赞同：1
> 
> 时间：2012-08-12T15:52:14.940
> 
> 标签：jquery

我试图找出一种在`<body>`文档中查找元素索引的方法。到目前为止，我只能 使用以下代码在**整个文档中找到元素的索引：**

```
$('div.css').click(function () {    
var mdivIndex;
mdivIndex = $(this).index('*');
console.log(mdivIndex);
});​ 
```

[在这里提琴](http://jsfiddle.net/fWhEK/1/)

要在其中找到索引，`<body>`我必须使用带星号的 index() 吗？

希望你能帮助我。一旦我找到索引，我假设要选择具有该索引的元素，我必须使用：

```
$('body').eq(mdivIndex)... 
```

对？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:03:14.690

如果您的`div.css`元素是 body 的直接子元素，那么您只需要：

```
mdivIndex = $(this).index(); 
```

* * *

然后选择具有该索引的元素，您将使用以下命令：

```
$('body > *').eq(mdivIndex); 
```

或者为了获得更好的性能，你可以使用这个：

```
$('body > :nth-child(' + (mdivIndex + 1) + ')'); 
```

# javascript - 如何将 :empty 选择器应用于 XML 文档

> ID：11923539
> 
> 赞同：1
> 
> 时间：2012-08-12T15:53:37.420
> 
> 标签：javascript, jquery

我有一个 XML 文档，我试图选择每个没有子节点的节点。我认为我可以通过以下方式完成此操作：

```
$(XML).find(':empty') 
```

但是，这只是返回和空集。下面是我的 XML 文档的快速浏览。

```
<BOM>
  <BOMHeader>
    <ID>ID Text</ID>
    <Classification>ClassificationText</Classification>
    <Version>VersionText</Version>
    <MakeEffectiveDate>MakeEffectiveDateText</MakeEffectiveDate>
    <ExpirationDate>ExpirationDate Text</ExpirationDate>    
    <MaterialID>Material ID Text</MaterialID>
    <MaterialDescription>Material Description</MaterialDescription>
    <Quantity>Quantity Text</Quantity>
    <UOM>UOM Text</UOM>
    <CustomProperties>
      <Example>Example Text</Example>
    </CustomProperties>
  </BOMHeader>
</BOM> 
```

所以我需要的是能够读取这个 XML 并返回一组节点，这些节点等于 ID、分类、版本、MakeEffectiveDate、ExpirationDate、MaterialID、Material Description、Quantity、UOM 和 Example。

关于如何做到这一点的任何想法？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:58:03.290

您可以使用以下`filter()`方法：

```
var $bachelors = $(XML).find('*').filter(function() {
                   return $(this).children().length === 0
                 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:08:47.743

这是因为这些元素都不是`:empty`. `:empty`表示没有子节点的元素，例如`<elem></elem>`. 尝试`:not(:has(*))`：

```
$(XML).find(":not(:has(*))") 
```

# jquery - 如何获取元素的 id，然后使用 id 选择元素？

> ID：11923544
> 
> 赞同：2
> 
> 时间：2012-08-12T15:54:05.657
> 
> 标签：jquery

我是否正确地说以下内容会给我一个元素的 id？

```
$('#detailData').on('click', '.select-topic', function (event) {
    var id = $(this).attr('id'); 
```

如果这是正确的，那么我是否可以使用下面的代码对该元素执行延迟点击。我不确定如何编写 jQuery 选择器？如何同时输入 id 和 # 标记？

```
setTimeout(function () {
    jQuery('???').trigger('click');
}, 1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:56:07.700

```
$('#detailData').on('click', '.select-topic', function (event) {
    var id = $(this).attr('id'); 
```

现在你得到了 id，然后用 '#' 选择那个元素

```
setTimeout(function () {
    $('#' + id).trigger('click');
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:03:41.927

存储 id 将起作用，但为什么不首先缓存 jQuery 选择器。
在元素可能没有指定 id 的情况下，这也将起作用。

缓存值的另一个好处是，当您想使用它时，您不必不断地重新创建 jQuery 对象，这也节省了性能。

```
var $selectTopic;

$('#detailData').on('click', '.select-topic', function (event) {
    $selectTopic = $(this);
}) 
```

后者直接使用jQuery对象。

```
setTimeout(function () {
    $selectTopic.trigger('click');
}, 1000); 
```

如果由于某种原因您再次需要选择器字符串来查询嵌套元素，您可以使用：

```
$($selectTopic.selector + ' #anotherElementInside'); 
```

# c++ - Std Map 给出分段错误

> ID：11923546
> 
> 赞同：0
> 
> 时间：2012-08-12T15:54:22.857
> 
> 标签：c++, map, segmentation-fault, std

我在程序中使用 map 将稀疏矩阵转换为紧凑数组。

```
map<int, int>  m_mCustIds;
map<int, int>::iterator itr;

 for (i=0; i<m_nRatingCount; i++)
{   
Data* rating = m_aRatings + i;
itr = m_mCustIds.find(rating->CustId); 
if (itr == m_mCustIds.end())
    {
        cid = 1 + (int)m_mCustIds.size();
    }
    else
    {
        cid = itr->second;
    }
// using cid in other data structures
} 
```

在处理固定数量（100498277）的条目后，它给了我一个分段错误。

```
GDB Output
Program received signal SIGSEGV, Segmentation fault.
0x0000000000401ea0 in std::less<int>::operator() (this=0x2aab0adf5ed8, __x=@0x22, __y=@0x2aab0a80f0a4)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_function.h:227
227           { return __x < __y; } 
```

英国电信显示

```
#0  0x0000000000401ea0 in std::less<int>::operator() (this=0x2aab0adf5ed8, __x=@0x22, __y=@0x2aab0a80f0a4)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_function.h:227
#1  0x000000000040218f in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::find (this=0x2aab0adf5ed8, __k=@0x2aab0a80f0a4) at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:1317
#2  0x0000000000402243 in std::map<int, int, std::less<int>, std::allocator<std::pair<int const, int> > >::find (this=0x2aab0adf5ed8, __x=@0x2aab0a80f0a4)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_map.h:534
#3  0x0000000000401b18 in Engine::CalcMetrics (this=0x2aaaaaad9010) at At.cpp:204
#4  0x0000000000401da3 in main () at At.cpp:141 
```

Valgrind 输出

```
==18544== Invalid read of size 4
==18544==    at 0x401EA0: std::less<int>::operator()(int const&, int const&) const (stl_function.h:227)
==18544==    by 0x40218E: std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::find(int const&) (stl_tree.h:1317)
==18544==    by 0x402242: std::map<int, int, std::less<int>, std::allocator<std::pair<int const, int> > >::find(int const&) (stl_map.h:534)
==18544==    by 0x401B17: Engine::CalcMetrics() (At.cpp:204)
==18544==    by 0x401DA2: main (At.cpp:141)
==18544==  Address 0x22 is not stack'd, malloc'd or (recently) free'd 
```

Valgrind 还报告 map 的其他功能中可能丢失数据 该程序仅使用 10 % 的可用系统内存。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:56:02.723

您`itr`在访问`itr->second`. 事实上，您根本没有赋予任何法律价值`itr`。

# c# - 在 emgu CV 中使用 SURF 进行对象识别

> ID：11923549
> 
> 赞同：2
> 
> 时间：2012-08-12T15:54:42.800
> 
> 标签：c#, .net, image-processing, opencv, emgucv

对于我的项目，我需要使用 SURF 识别对象（在我的情况下是门）。我正在使用 emguCV（openCv c# 包装器）。

我一直在使用 emguCV 库中的[surf 特征检测示例](http://www.emgu.com/wiki/index.php/SURF_feature_detector_in_CSharp)。

通过使用它，我只能识别给定模板（模型）图像的少数对象图像（例如：门）。

由于存在不同种类的门，因此对于某些门图像，它没有被检测为门。所以，我决定如果我可以将不同类型的门图像（2 个或更多图像）作为模型（模板）图像，那么我可以获得更准确的结果。

我的问题是我不清楚如何编写代码以处理 2 个或更多模型（模板）图像？基本上，我想知道通过使用哪个参数，我们可以说它是从代码中检测到还是没有检测到？

（视觉上如果检测到它，它会在匹配的对象周围绘制一个红色矩形。）

将非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:43:27.840

我在上个学期作为数据结构的课程项目这样做了。在那我试图从一个凸轮检测一张脸。一开始我在这方面做了很多工作，然后在 3.4 个月后，我终于能够完成它。它可以正确检测到面部。检测到时，它会在脸部周围出现绿线。该方法与面部或某些门或汽车或其他任何东西相同。这里的问题是如何开始？是的，这很简单，您只需要使用 EMGU CV 和 OPEN CV（就像我一样）。我必须在这里说明 EMGU CV 是针对 .Net 的，而 OPEN CV 也是针对其他一些人的。您唯一需要寻找的就是“门的 XML”！其余的库在这里很容易获得：http: [//sourceforge.net/projects/emgucv/](http://sourceforge.net/projects/emgucv/) 您可以从前面的链接下载它。接下来是什么？接下来是您必须添加这些库。完成后，您可以根据您的要求使用then。正如我上面提到的，如果你正在检测门，那么你需要“门的 XML”。因为您在代码中使用的 XML 正在定义该检测。因为 XML 告诉您需要检测哪个对象，在我的示例中，我使用人脸的 XML 来检测人脸。你可以用在门上。您还有一个选择，是从网上选择门的 XML 文件，还是可以对现有的文件进行更改。而且当您要求使用 2 个或更多门图像时，这种方法不是专业的！假设如果您之前没有硬编码的门的图像和一个新门出现了，那会怎样？什么都不会发生。那就不检测了！休息是你的要求。我希望它现在有点清楚，现在要寻找什么！！.. 问候 Taimoor Alam。

# c++ - 使用 gralloc_priv.h 文件编译时出错

> ID：11923550
> 
> 赞同：0
> 
> 时间：2012-08-12T15:54:54.023
> 
> 标签：c++

编程新手，所以对我来说很容易。我在为 AOSP rom 编译时收到错误消息。如果有帮助的话，我会在 Ubuntu 12.04 内核 3.2.0.29 上完成所有这些工作。

这是我收到的错误：

> device/lge/c800/include/gralloc_priv.h：在成员函数'T& Queue::getHeadValue()\ > const'中：device/lge/c800/include/gralloc_priv.h:169:55：错误：没有参数到“LOGE”，> 取决于模板参数，因此“LOGE”声明必须可用 [-fpermissive] device/lge/c800/include/gralloc_priv.h:169:55：注意：（如果您使用 '- fpermissive'，G++ 将 > 接受您的代码，但不允许使用未声明的名称）

这是与头文件中相关的代码部分：

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 * Copyright (c) 2011-2012, Code Aurora Forum. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef GRALLOC_PRIV_H_
#define GRALLOC_PRIV_H_

#include <stdint.h>
#include <limits.h>
#include <sys/cdefs.h>
#include <hardware/gralloc.h>
#include <pthread.h>
#include <errno.h>
#include <unistd.h>

#include <cutils/native_handle.h>

#include <linux/fb.h>

#if defined(__cplusplus) && defined(HDMI_DUAL_DISPLAY)
#include "overlayLib.h"
using namespace overlay;
#endif

enum {
    /* gralloc usage bits indicating the type
     * of allocation that should be used */

    /* ADSP heap is deprecated, use only if using pmem */
    GRALLOC_USAGE_PRIVATE_ADSP_HEAP       =       GRALLOC_USAGE_PRIVATE_0,
    /* SF heap is used for application buffers, is not secured */
    GRALLOC_USAGE_PRIVATE_UI_CONTIG_HEAP  =       GRALLOC_USAGE_PRIVATE_1,
    /* SMI heap is deprecated, use only if using pmem */
    GRALLOC_USAGE_PRIVATE_SMI_HEAP        =       GRALLOC_USAGE_PRIVATE_2,
    /* SYSTEM heap comes from kernel vmalloc,
     * can never be uncached, is not secured*/
    GRALLOC_USAGE_PRIVATE_SYSTEM_HEAP     =       GRALLOC_USAGE_PRIVATE_3,
    /* IOMMU heap comes from manually allocated pages,
     * can be cached/uncached, is not secured */
    GRALLOC_USAGE_PRIVATE_IOMMU_HEAP      =       0x01000000,
    /* MM heap is a carveout heap for video, can be secured*/
    GRALLOC_USAGE_PRIVATE_MM_HEAP         =       0x02000000,
    /* WRITEBACK heap is a carveout heap for writeback, can be secured*/
    GRALLOC_USAGE_PRIVATE_WRITEBACK_HEAP  =       0x04000000,
    /* CAMERA heap is a carveout heap for camera, is not secured*/
    GRALLOC_USAGE_PRIVATE_CAMERA_HEAP     =       0x08000000,

    /* Set this for allocating uncached memory (using O_DSYNC)
     * cannot be used with noncontiguous heaps */
    GRALLOC_USAGE_PRIVATE_UNCACHED        =       0x00100000,

    /* This flag needs to be set when using a non-contiguous heap from ION.
     * If not set, the system heap is assumed to be coming from ashmem
     */
    GRALLOC_USAGE_PRIVATE_ION             =       0x00200000,

    /* This flag can be set to disable genlock synchronization
     * for the gralloc buffer. If this flag is set the caller
     * is required to perform explicit synchronization.
     * WARNING - flag is outside the standard PRIVATE region
     * and may need to be moved if the gralloc API changes
     */
    GRALLOC_USAGE_PRIVATE_UNSYNCHRONIZED  =       0X00400000,

    /* Set this flag when you need to avoid mapping the memory in userspace */
    GRALLOC_USAGE_PRIVATE_DO_NOT_MAP      =       0X00800000,

    /* Buffer content should be displayed on an external display only */
    GRALLOC_USAGE_EXTERNAL_ONLY           =       0x00010000,

    /* Only this buffer content should be displayed on external, even if
     * other EXTERNAL_ONLY buffers are available. Used during suspend.
     */
    GRALLOC_USAGE_EXTERNAL_BLOCK          =       0x00020000,
};

enum {
    /* Gralloc perform enums
    */
    GRALLOC_MODULE_PERFORM_CREATE_HANDLE_FROM_BUFFER = 0x080000001,
};

enum {
    GPU_COMPOSITION,
    C2D_COMPOSITION,
    MDP_COMPOSITION,
    CPU_COMPOSITION,
};

/* numbers of max buffers for page flipping */
#define NUM_FRAMEBUFFERS_MIN 2
#define NUM_FRAMEBUFFERS_MAX 3

/* number of default bufers for page flipping */
#define NUM_DEF_FRAME_BUFFERS 2
#define NO_SURFACEFLINGER_SWAPINTERVAL
#define INTERLACE_MASK 0x80
#define S3D_FORMAT_MASK 0xFF000
#define COLOR_FORMAT(x) (x & 0xFFF) // Max range for colorFormats is 0 - FFF
#define DEVICE_PMEM "/dev/pmem"
#define DEVICE_PMEM_ADSP "/dev/pmem_adsp"
#define DEVICE_PMEM_SMIPOOL "/dev/pmem_smipool"
/*****************************************************************************/
#ifdef __cplusplus

//XXX: Remove framebuffer specific classes and defines to a different header
template <class T>
struct Node
{
    T data;
    Node<T> *next;
};

template <class T>
struct Node
{
    T data;
    Node<T> *next;
};

template <class T>
class Queue
{
public:
    Queue(): front(NULL), back(NULL), len(0) {dummy = new T;}
    ~Queue()
    {
        clear();
        delete dummy;
    }
    void push(const T& item)   //add an item to the back of the queue
    {
        if(len != 0) {         //if the queue is not empty
            back->next = new Node<T>; //create a new node
            back = back->next; //set the new node as the back node
            back->data = item;
            back->next = NULL;
        } else {
            back = new Node<T>;
            back->data = item;
            back->next = NULL;
            front = back;
       }
       len++;
    }
    void pop()                 //remove the first item from the queue
    {
        if (isEmpty())
            return;            //if the queue is empty, no node to dequeue
        T item = front->data;
        Node<T> *tmp = front;
        front = front->next;
        delete tmp;
        if(front == NULL)      //if the queue is empty, update the back pointer
            back = NULL;
        len--;
        return;
    }
    T& getHeadValue() const    //return the value of the first item in the queue
    {                          //without modification to the structure
        if (isEmpty()) {
            LOGE("Error can't get head of empty queue");
            return *dummy;
        }
        return front->data;
    }

    bool isEmpty() const       //returns true if no elements are in the queue
    {
        return (front == NULL);
    }

    size_t size() const        //returns the amount of elements in the queue
    {
        return len;
    } 
```

如果有人可以帮助解决这个错误并向我解释它会非常有帮助。如果需要更多信息，我会发布任何需要的信息。我可能会在这里发布更多错误，但想看看我如何处理第一篇文章。提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:18:53.677

您可以尝试将其包含`#include <cutils/log.h>`在您的代码中`gralloc_priv.h`吗？

`-fpermissive`或按照错误输出的建议使用参数进行编译。

# iphone - iOS 应用下载 flickr 照片

> ID：11923554
> 
> 赞同：0
> 
> 时间：2012-08-12T15:55:31.650
> 
> 标签：iphone, objective-c, ios, flickr

我正在为一所学校开发一个应用程序。他们将照片保存在 flickr 上。他们希望在他们的应用程序中有一个照片库页面，该页面将从他们的 flickr 页面中提取照片。我想知道从 flickr 下载照片的最简单方法是什么： 1\. 我不想上传任何照片。2\. 我不希望用户必须登录。 3\. 我无法提供个人照片的 url，因为学校可能会更频繁地更新他们的 flickr，而不是我更新应用程序的频率。我只想让应用程序提取他们相册中的所有照片。

非常感谢，卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T11:57:23.680

试试这个代码

```
-(void)getUserID{

    NSString *methodName = @"flickr.people.findByUsername";

    NSString *userName = @"<Your_Username>";

    NSString *urlString = [NSString stringWithFormat:@"%@?method=%@&api_key=%@",kFlickrAPIURL,methodName,kFlickrAPIKey];
urlString = [NSString stringWithFormat:@"%@&username=%@&format=%@&nojsoncallback=1", urlString,userName,kFlickrResponseFormat];

    NSURL *url = [NSURL URLWithString:urlString];

    userIDRequest = [[NSURLRequest alloc] initWithURL: url];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:userIDRequest delegate:self];
    [connection release];
}

-(void)getUserPhotos:(NSString *)userID{

    NSString *methodName = @"flickr.people.getPhotos";

    NSString *urlString = [NSString stringWithFormat:@"%@?method=%@&key=%@",kFlickrAPIURL,methodName,kFlickrAPIKey];    

    urlString = [NSString stringWithFormat:@"%@&user_id=%@&format=%@&nojsoncallback=1",urlString,userID,kFlickrResponseFormat];

    NSURL *url = [NSURL URLWithString:urlString];

    imagesRequest = [[NSURLRequest alloc] initWithURL: url];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:imagesRequest delegate:self];
    [connection release];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSError *error = nil;

    NSDictionary *jsonDic = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&error];
    if (userIDRequest == connection.originalRequest)
    {
        NSString *userId = [[jsonDic objectForKey:@"user"] objectForKey:@"id"];
        if (userId != nil)
            [self getUserPhotos:userId];
    } else if (imagesRequest == connection.originalRequest) {

        NSArray *photos = [[jsonDic objectForKey:@"photos"] objectForKey:@"photo"];

        for (NSDictionary *photo in photos)
        {
            // Get title of the image
            NSString *title = [photo objectForKey:@"title"];

            // Build the URL to where the image is stored (see the Flickr API)
            // In the format http://farmX.static.flickr.com/server/id/secret
            // Notice the "_s" which requests a "small" image 75 x 75 pixels
            NSString *photoURLString = [NSString stringWithFormat:@"http://farm%@.static.flickr.com", [photo objectForKey:@"farm"]];
            photoURLString = [NSString stringWithFormat:@"%@/%@/%@_%@_s.jpg", photoURLString, [photo objectForKey:@"server"], [photo objectForKey:@"id"], [photo objectForKey:@"secret"]];

        }
     }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:11:38.650

下载[ObjectiveFlickr](https://github.com/lukhnos/objectiveflickr/)，示例文件夹中有一个示例“RandomPublicPhoto”

# php - AJAX PHP连接将行插入数据库

> ID：11923559
> 
> 赞同：2
> 
> 时间：2012-08-12T15:56:20.290
> 
> 标签：php, javascript, html, ajax, function

这解释起来有点复杂，我不知道你们是否能帮助我，但我会尽力而为。这是我希望用户经历的过程:::

1.  用户点击 img（id='cowboys' 或 'giants'）
2.  onclick 触发函数 'teamback' 并将 'this' 传递给它（到目前为止一切顺利，这里是我需要使用 ajax 连接到数据库并插入信息的地方）
3.  函数需要获取用户标识（会话变量）、tn 和 sc 并使用 ajax 将它们
    插入数据库

代码的 ajax 部分是我不知道该怎么做的地方，因为我从未使用过 ajax。我很确定我搞砸了 GET 部分。问题是它不起作用。它没有向表中插入任何内容。因为我的 ajax 代码在 teamback 函数和 makepick.php 文件中搞砸了（我认为）。任何设置此设置的帮助将不胜感激！

这是html文档...

```
<?php
 // this starts the session 
 session_start();
 $id = $_SESSION['userid'];

 //this connects to the database
$con = mysql_connect("localhost","yourfan3_jeengle","armyjoe30");
mysql_select_db("yourfan3_demo", $con);

//**THIS IS THE VARIABLE THAT MANUALLY SETS THE PICKS POSSIBLE
$maxcorrectpicks = 16;

 //gets info for user
 $result = mysql_query("SELECT * FROM League_Info WHERE User_ID = '$id'");  
 $result2 = mysql_fetch_array($result);
 $leaguename = $result2['League'];

 //checks if league name exists
 $memberslist = mysql_query("SELECT User_ID, Correct_Picks, Points FROM League_Info WHERE League = '$leaguename'"); 
 ?>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
        <script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
        <script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
        <script type="text/javascript" src="js/coda-slider.1.1.1.pack.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="icon" href="http://www.indiana.edu/favicon.ico" />
        <title>Your</title>
        <link rel="stylesheet" type="text/css" href="yourteamstyle.css" />

        <script type="text/javascript">
        //this is the user id session stored as a javascript variable
        var userid = "<?=$id?>";

        // Popup window code
        function newPopup(url) {
            popupWindow = window.open(url,'popUpWindow','height=450,width=600,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
        }
        function bigimg(x) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000'; 
                //determines if user was on time..if not on time hover enlarge won't work
                if(myEpoch < deadline) {
                    x.style.height="65px";
                    x.style.width="85px";
                    x.style.opacity="0.5";
                } else {}
        }
        function defaultimg(x) {
            x.style.height="60px";
            x.style.width="80px";
            x.style.opacity="1.0";
        }
        function teamback(x) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000';
                //determines if user was on time..if not on time submitting won't work
                if(myEpoch > deadline) {
                    // update the "actualone" image's source to the sending-image's source
                    var tn = x.id;
                    var sc = x.name;
                    document.getElementById("actualone").src = x.src;
                    document.getElementById("curtime").innerHTML = myEpoch;
                    document.getElementById("team").innerHTML = x.id;
                    document.getElementById("scenario").innerHTML = x.name;

                    //this is the ajax part where I am having trouble
                    if (window.XMLHttpRequest) {
                        // code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp=new XMLHttpRequest();
                    } else {
                        // code for IE6, IE5
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange=function() {
                    }
                    xmlhttp.open("GET","makepick.php?newuserid="+userid, true);
                    xmlhttp.open("GET","makepick.php?newtn="+tn, true);
                    xmlhttp.open("GET","makepick.php?newsc="+sc, true);
                    xmlhttp.send();

                } else {}           
        }
        </script>

    </head>
        <body>
            Your Team<br>
            <iframe style="background-color:red;" src="http://free.timeanddate.com/countdown/i38ik9yz/n417/cf12/cm0/cu4/ct1/cs1/ca0/co1/cr0/ss0/cac000/cpc000/pct/tc66c/fs100/szw320/szh135/tatTime%20Remaining%20to%20Make%20Picks/tac000/tptTime%20since%20Event%20started%20in/tpc000/iso2012-08-11T13:00:00" frameborder="0" width="236" height="36"></iframe>

            <br><img id="cowboys" name="One" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="cowboys.gif"> vs <img id="giants" name="One" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="giants.gif"><img src="" id="actualone" style="width:85px; height:65px;"><br><br>
            <div id="curtime">44</div>|||<div id="deadline"></div><br><div id="team">Team</div><div id="scenario">Scenario</div>

        </body>
</html> 
```

这是 makepick.php 文件

```
<?php
$userid = $_GET["newuserid"];
$tn = $_GET["newtn"];
$sc = $_GET["newsc"];

//this connects to the database
$con = mysql_connect("localhost","yourfan3_jeengle","armyjoe30");
mysql_select_db("yourfan3_demo", $con);

mysql_query("INSERT INTO Week1_Picks_Test (UserID, '$sc') VALUES ('$userid', '$tn')");

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:09:43.943

因为，您使用的是 Jquery，我建议您重写您的 teamback() 函数以使用 jquery 的 ajax 方法：

```
function teamback(x) {
var myDate = new Date(); // Your timezone! 
var myEpoch = myDate.getTime()/1000; 
var deadline = '1344700055.000';
    //determines if user was on time..if not on time submitting won't work
    if(myEpoch > deadline) {
        // update the "actualone" image's source to the sending-image's source
        var tn = x.id;
        var sc = x.name;
        document.getElementById("actualone").src = x.src;
        document.getElementById("curtime").innerHTML = myEpoch;
        document.getElementById("team").innerHTML = x.id;
        document.getElementById("scenario").innerHTML = x.name;

        $.ajax({
          type: 'GET',
          url: 'makepick.php',
          data: { newuserid: userid, newtn: tn, newsc:sc },

          success:function(data){
            //do whatever you want to do here on successful submission
            alert('success');
          },
          error:function(){
            //do whatever you want to do here when an error occurs
            alert('error');
          }
        });
    } else {} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:15:05.073

我马上就注意到了：您在 AJAX 处理中执行的查询在单引号 (') 中有 $sc 变量。由于这是列名，因此会产生语法错误。删除引号，或使用反引号 (`)。

也就是说，您应该考虑在将输入传递到数据库之前对其进行清理，或者更好的是，使用带有 PDO 的准备好的语句：http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:09:29.087

我不确定您的问题是什么，但值得阅读有关 SQL 注入的内容。[http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)对于初学者来说是可以的。

# android - 单击按钮更改背景

> ID：11923563
> 
> 赞同：0
> 
> 时间：2012-08-12T15:56:57.543
> 
> 标签：android, xml

我有一个按钮，我想在单击时变为红色（不是永久的，只是为了表明它已被单击）现在我正在使用 setVisibility 这样做，并且我在其顶部有一个改变颜色的 imageView，但现在我想改进我的代码并使用单独的 button_red.xml 文件来完成，就像这样

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:background="@drawable/img_red" android:state_pressed="true"/>
    <item android:background="@drawable/img_btn_bkg"/>
</selector> 
```

现在，当我将 imageButton 的背景设置为 button_red.xml 时出现解析失败错误，为什么？

我在另一个应用程序中做了同样的事情并且它有效（除了我改变了androdi：src）我忘记了什么吗？我在drawable-nodpi中有所有drawable，在drawable文件夹中有button_red.xml

我所做的事情：从另一个项目复制 xml，将 src 更改为背景，更改可绘制对象，并将我的 imageButton 中的背景更改为 xml 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:01:50.150

当您添加`android:state_pressed="false"`到第二项时，您仍然会收到错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:12:20.940

您应该在选择器中更改`android:background`为。`android:drawable`然后只需为任何属性（src、背景等）设置此选择器，例如`android:background="@drawable/button_red"`.

# ruby-on-rails - 使用 Rspec 测试存在和属于_to

> ID：11923564
> 
> 赞同：4
> 
> 时间：2012-08-12T15:57:05.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, factory-bot

我正在尝试学习如何使用 Rspec 进行测试。

目前我有一个 Item 类的规范：

```
require 'spec_helper'

describe Item do
  it { should belong_to :list }

  before(:each) do
    @item = FactoryGirl.create(:item)
  end

  subject { @item }

  it { should respond_to :name }
  it { should validate_presence_of :name }

end 
```

不过，我对此有几个问题。

和`it { should validate_presence_of :name }`写法一样：

```
describe "when name is not present" do
  before { @item.name = "" }
  it { should_not be_valid }
end 
```

还是两者之间有关键区别？

我还想知道是否`it { should belong_to :list }`值得在规范中编写，或者是否有更好的方法。

我也知道我可以做`@item = FactoryGirl.build(:item)`或`FactoryGirl.create(:item)`。是否创建将项目保存到测试数据库并且构建没有？或者我在这里感到困惑。我什么时候应该使用哪个？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T17:22:52.497

我猜你正在使用`shoulda-matchers`或类似的东西。他们的优势（我认为）他们为您提供了简短而简洁的匹配器，就像您使用的那样。

我个人相信以下测试：

```
it { should belong_to :list }
it { should validate_presence_of :name } 
```

很重要，因为我的课程很可能如下所示：

```
class Item
  belongs_to :list
  validate_presence_of :name
end 
```

如果有人更改任何这些行，它将显示在测试中。

所以恕我直言，他们确实值得编写规范，而且工作量也不大。

其次：是的，`should validate_presence_of`确实类似于较大的形式，但我发现较短的形式更具表现力。请使用简写形式！

第三：FactoryGirl的区别：

*   如果对象需要存在于数据库中，则使用`FactoryGirl.create`该对象，例如因为您想测试您的控制器是否可以检索项目。
*   `FactoryGirl.build`如果您只需要一个对象，并且不需要该对象存在于数据库中，则使用该对象。不将对象保存到数据库将使您的测试更快。

希望这可以帮助。

# algorithm - 8-puzzle 有多少种可能的状态？

> ID：11923566
> 
> 赞同：29
> 
> 时间：2012-08-12T15:57:22.253
> 
> 标签：algorithm, artificial-intelligence, sliding-tile-puzzle

经典的 8 拼图属于滑块系列。我的书（Stuart Russell 和 peter Norwig 的人工智能现代方法）说 8 谜题有**9!/2**种可能的状态。但是为什么***/2***？你怎么得到这个？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-12T16:00:08.153

`9!`是拼图可能配置的总数，而`9!/2`是*可解决*配置的总数。例如，此配置没有解决方案：

```
1 2 3
4 5 6
8 7 
```

[在这篇 Wikipedia文章](http://en.wikipedia.org/wiki/Fifteen_puzzle#Solvability)中阅读有关 n-puzzle 某些配置的可解性的更多信息，或者正如 @dasblinkenlight 在此 MathWorld[解释](http://mathworld.wolfram.com/15Puzzle.html)中所指出的那样。

找出`9!/2`可解配置数量的一种可能方法是从一个已解决的谜题开始，并从中生成所有可能的有效、非重复动作。

# java - 更改 Java 应用程序图标？

> ID：11923571
> 
> 赞同：6
> 
> 时间：2012-08-12T15:58:32.223
> 
> 标签：java, icons

有谁知道如何更改默认的 java 应用程序图标？如果它有所作为，我正在使用 mac。任何想法都是好的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:00:18.107

您可以使用[JFrame.setIconImage](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setIconImage%28java.awt.Image%29)。

这是一个[例子](http://www.kodejava.org/examples/223.html)。

没看到mac有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:37:35.573

```
import javax.swing.JFrame;
import javax.swing.ImageIcon;

class JFrameTest
{
    public static void main(String _[])
    {
        JFrame jFrame = new JFrame("Hello World!!");
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setIconImage(new ImageIcon("c:/home/ravi/creampink.png").getImage());
        jFrame.setSize(400,400);
        jFrame.setVisible(true);
    }
} 
```

只需在谷歌中搜索下载 128X128 图标即可获得一些示例图标

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T20:45:11.047

JFrame.setIconImage 是您想要工作的地方。它似乎适用于所有操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-05T16:21:15.413

将图标放在资源文件夹中（`src/main/resources`对于具有默认设置的 Maven 项目，或者对于具有默认设置的 Eclipse 项目的主窗口类文件）。（接受的示例在文件系统中使用硬编码路径——这在实验室环境中是可以的，但在部署时会中断。）

Assuming `theWindow` is the main window of your application, do the following:

```
theWindow.setIconImage(Toolkit.getDefaultToolkit().getImage(
    ClassLoader.getSystemResource("someicon.png"))); 
```

If you are subclassing `JFrame`, you can do this in the constructor (in that case, drop the `theWindow.` prefix).

# sql-server-2008 - 从图表视图生成 SQL

> ID：11923574
> 
> 赞同：0
> 
> 时间：2012-08-12T15:58:58.663
> 
> 标签：sql-server-2008

在 SQL Server 2000 Management Studio 中，您可以打开一个表并进入图表视图并从中生成 SQL。您将如何从图表视图中的 SQL Server Management Studio 2008 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:27:21.617

假设您的生成 SQL 是指生成创建语句并且您已经创建了表。

1.  登录到 Microsoft SQL Server Management Studio
2.  打开您的对象资源管理器、数据库
3.  右键单击数据库名称和“脚本数据库为”、“创建到”、“新建查询编辑器窗口”

请注意，您不会从那里获取数据

# spring-mvc - Jinja2 喜欢 Spring MVC 的视图模板方法吗？

> ID：11923575
> 
> 赞同：0
> 
> 时间：2012-08-12T15:58:58.717
> 
> 标签：spring-mvc

哪个 Spring MVC 兼容的模板引擎可以让我实现 Python 的 Jinja2 样模板？

例子：

一个模板文件，所有视图都使用自己的内容进行扩展

main.jinja2:

```
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
... 
```

每个视图只需要自定义一些模板定义的块

a_view.jinja2：

```
{% extends "main.jinja2" %}
{% block title %}A View Page Title{% endblock %} 
```

我不需要语法兼容性，只需要扩展基本模板的概念。

一种可能的解决方案是反转 JSP 模板方法。

创建一个 main.jsp，所有控制器都会为他们的视图渲染 main.jsp：

```
<html>
<head>
    <title><jsp:include page="titles/${title_inc}.jsp" /></title>
... 
```

从控制器：

```
@RequestMapping("/")
public String welcome( ModelMap args ) {
    args.addAttribute("title_inc", "home");
    args.addAttribute("body_inc", "home");
    args.addAttribute("message", "A Message!");
    return "main";
} 
```

我希望可以改进这种方法，我更愿意从某些会话属性中推断出标题/正文的正确名称，而不是在每个控制器的模型映射中指定它们。

我对性能有所保留。我不知道 main.jsp 是否被缓存（出于性能原因），但这种方法有效地否定了缓存渲染 main.jsp 的结果的大部分好处。如果缓存确实发生了，如果没有办法使缓存的副本无效，这种方法甚至可能不起作用。

仍在寻求更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:36:28.013

我认为[Sitemesh](http://wiki.sitemesh.org/wiki/display/sitemesh/Home)会按照您的要求进行操作...

您可以根据需要定义任意数量的“布局”，但它们不会相互继承。各个页面将其内容插入到您为其选择的布局中。

如果您需要正确继承模板（包括抽象模板），那么您需要查看[Tiles](http://tiles.apache.org/)。Tiles 更强大但也更复杂，并且在长期恕我直言中更难维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:32:07.320

我已经成功地复制了 Jinj2，就像使用 JSP 和 JSTL 进行模板一样。

每个控制器都按预期引用适当的视图（这是我上面第一次尝试的改进）：

a_view.jsp：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<c:set var="pageTitle" scope="request">My Title</c:set>
<%@ include file="/WEB-INF/views/main.jsp" %> 
```

主.jsp：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html lang="en">
<head>
<title><c:out value="${pageTitle}" /></title>
... 
```

这似乎或多或少正是我想要的。

# python - 模型方法中的 Django 模型字段默认值

> ID：11923581
> 
> 赞同：11
> 
> 时间：2012-08-12T15:59:38.777
> 
> 标签：python, django, model, default

我想从模型方法中给出模型字段默认值。

我怎样才能做到这一点 ？

当我尝试这段代码时

```
Class Person(models.Model):
    def create_id(self):
        return os.urandom(12).encode('hex')

    name = models.CharField(max_length = 255)
    id = models.CharField(max_length = 255,default = self.create_id) 
```

我得到 NameError: name 'self' is not defined。

如果我删除“自我”，我会得到“create_id”需要 1 个参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T16:02:36.137

您可以像这样定义全局方法：

```
def create_id():
    return os.urandom(12).encode('hex')

Class Person(models.Model):
   name = models.CharField(max_length = 255)
   id = models.CharField(max_length = 255,default = create_id) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T07:32:18.337

我最终这样做了：（从两者中删除自我）

```
Class Person(models.Model):
    def create_id():
        return os.urandom(12).encode('hex')

    name = models.CharField(max_length = 255)
    id = models.CharField(max_length = 255,default = create_id) 
```

它正在工作，但我不确定这是最好的还是正确的方法。

# google-app-engine - appengine 数据存储区查询需要多少配额？

> ID：11923584
> 
> 赞同：1
> 
> 时间：2012-08-12T15:59:55.717
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

在 appengine[计费和预算资源](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)页面中，它表示“查询”的成本映射到“1 读取 + 1 个小检索实体”，而“查询（仅限键）”映射到“1 读取 + 1 个小每检索到的密钥”。

这对我来说似乎是一个错字。看起来查询仍然需要对返回的每个实体执行完整的“获取”操作。这个假设不正确吗？我本来预计“查询”的成本是“每个检索到的实体1 次读取 + 1 次***读取”。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:28:01.633

嗯，这似乎很奇怪。我猜想只有键的查询只查看索引，而普通查询也会根据该键检索实体。

无论如何，这很容易测试：所有请求都已将[成本添加到 log](http://blog.notdot.net/2011/06/Demystifying-the-App-Engine-request-logs)中。创建一个执行查询的请求和另一个具有相同的仅键查询的请求，然后比较成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:59:57.937

[正如彼得](https://stackoverflow.com/users/248432/peter-knego)建议的那样，我刚刚针对常规查询测试了仅键查询。

这是常规查询：

```
def test_query():
  q = Project.all()
  q.run()

  return 'Query test complete.' 
```

和日志：

```
70.162.229.226 - - [02/Sep/2012:20:46:51 -0700] "GET /query HTTP/1.1" 200 124 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1" "www.kicksaver.net" ms=28 cpu_ms=0 cpm_usd=0.000014 instance=00c61b117c79c7b82c3798e359e96ca71deb39 
```

仅键查询：

```
def test_key_query():
  q = Project.all()
  q.run(keys_only=True)

  return 'Keys only test complete.' 
```

和日志：

```
70.162.229.226 - - [02/Sep/2012:20:46:56 -0700] "GET /keys_only HTTP/1.1" 200 128 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1" "www.kicksaver.net" ms=29 cpu_ms=0 cpm_usd=0.000014 instance=00c61b117c79c7b82c3798e359e96ca71deb39 
```

两者都返回`cpm_usd=0.000014`。我测试了两个不同的应用程序，并使用了一些不同的批量大小和限制，并且这些`cpm_usd`值始终相等或彼此相差在 0.000001 以内。看起来文档是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:34:36.650

这绝对看起来像一个错字。cpm_usd 看起来像是一种已弃用的成本衡量方法，与之前的定价模型相关联。

使用最新版本的 AppStats ( [Python SDK 1.7.1](http://googleappengine.blogspot.fr/2012/08/app-engine-171-released.html) ) 有一个工具可以计算数据存储相关的成本。使用交互式游乐场，我很快得到了这些结果：

*   使用 keys_only=False 查询

    @1ms datastore_v3.RunQuery real=36ms api=0ms cost=770 billed_ops=[DATASTORE_READ:11]

*   与 keys_only=True 相同的查询

    @1ms datastore_v3.RunQuery real=5ms api=0ms cost=170 billed_ops=[DATASTORE_READ:1, DATASTORE_SMALL:10]

（以小便士显示的所有成本（1 美元等于 100 便士，1 便士等于 100 万小便士））

# algorithm - 快速算法找出超平面下的点数

> ID：11923590
> 
> 赞同：1
> 
> 时间：2012-08-12T16:00:14.020
> 
> 标签：algorithm, geometry, partitioning, space

给定欧几里得空间中的点，是否有一种快速算法来计算“在”一个任意超平面下的点数？快意味着时间复杂度低于 O(n)

预处理或排序点的时间是可以的

而且，即使不是高维，我也想知道是否存在可以在二维空间中使用的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:13:16.737

如果您愿意对这些点进行预处理，那么您必须至少访问每个点一次，即 O(n)。如果您考虑将点在哪一侧的测试作为预处理的一部分，那么您将得到一个 O(0) 算法（使用 O(n) 预处理）。所以我认为这个问题没有意义。

尽管如此，我会尝试给出一个有用的答案，即使这不是 OP 所要求的。

选择一个超平面单元法线和根点。如果平面以参数形式给出

> **(P - O).N == 0**

那么你已经有了这些，只要确保法线是单元化的。

如果以解析形式给出：Sum(i = 1 to n: a[i] x[i]) + d = 0，则向量 A = (a [1](http://en.wikipedia.org/wiki/Vector_projection) , ... a[n]) 是平面，N = A/||A|| 是单位平面法线。平面上的点 O（作为原点）为 d N。

您可以通过将 P 投影到 N 添加检查参数的符号来测试每个点 P 在哪一侧：

令 V = P - O。V 是从所选原点 O 到 P 的向量。

让 s N 是[V 到 N 的投影](http://en.wikipedia.org/wiki/Vector_projection)。如果 s 为负数，则 P 在超平面“下方”。

如果您对这个主题不熟悉，您应该转到矢量投影的链接，但我将在这里使用我的符号进行总结。或者，您可以相信我的话，然后直接跳到最后的公式。

如果 alpha 是 V 和 N 之间的角度，那么根据余弦的定义，我们有 cos(alpha) = s||N||/||V|| = s/||V|| 因为 N 是单位法线。但是我们也从向量代数中知道 cos(alpha) = ||V||(VN)，其中 "." 是标量积（又名点积，或欧几里得内积）。

将这两个表达式等同于 cos(alpha) 我们有

> **s = (VV)(VN)**

（使用 ||V||^2 == VV 的事实）。

所以你的处理工作是计算 N 和 O，你的测试是：

```
bool is_under = (dot(V, V)*dot(V, N) < 0.); 
```

我不相信它可以做得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:17:43.323

设置点值时，请使用该点设置的检查条件。然后增加或不增加计数器。上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:04:15.113

我通过使用分治法和二进制搜索与 O(N log N) 预处理时间复杂度和 O(N log N) 内存复杂度在 2D 维度中找到了 O(logN) 算法

基本思想是点可以分为左N/2点和右N/2点，线下的点数（2D维度）是线下的左点数与线下点数之和线下的正确点。我将把整个点分成“左”和“右”的无限线称为“分界线”。分割线看起来像'x = k'

如果每个'left points'和'right points'按y轴顺序排序，则可以通过二分查找'y值的点的数量'快速找到特定点的数量-右下角的点低于直线与分界线交点的y值。

因此时间复杂度为

T(N) = 2T(N/2) + O(log N)

最后时间复杂度为 O(log N)

# iphone - 写入 plist 字典中的字符串

> ID：11923593
> 
> 赞同：2
> 
> 时间：2012-08-12T16:00:23.547
> 
> 标签：iphone, objective-c, ios

我正在使用具有如下结构的 plist：plist、array、dict key string key string /dict、dict key string key string /dict、/array、/plist。

我想要使​​用以下代码将*当前字典中的“完成”字符串的值设置为“是”。*

但是现在，代码用当前字典的字符串*替换了整个字典数组*（不过，“完成”键的值应该是“是”。）

我想要的正确代码是什么？

在 DetailViewController.m 中：

```
-(IBAction)favoriteButtonPressed:(id)sender
{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Object.plist"];

[[detailsDataSource objectAtIndex: detailIndex] setValue:@"Yes" forKey:@"Done"];
[[detailsDataSource objectAtIndex: detailIndex] writeToFile:path atomically:YES];
} 
```

如果重要， detailsDataSource 和 detailIndex 是从 TableViewController.m segue 收到的。

TableViewController.m segue 部分：

```
 detailViewController.detailsDataSource = [[NSArray alloc]initWithArray:objectsArray];
    detailViewController.detailIndex = selectedRowIndex.row; 
```

DetailViewController viewDidLoad

```
if ([[[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Favorite"] isEqual:@"Yes"])  {

    [favoriteButton setImage:[UIImage imageNamed:@"favoritedItem.png"] forState:UIControlStateSelected | UIControlStateHighlighted];
 }

districtLabel.text = [[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"District"]; 
```

detailsDataSource 数组在 detailViewController 中像这样使用，所以我不能从数组更改为字典，在这种情况下必须制作一个可变副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:17:50.173

```
[[detailsDataSource objectAtIndex: detailIndex] setObject:@"Yes" forKey:@"Done"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T16:15:30.257

`setValue:forKey`不适用于修改可变字典。你应该使用`setObject:forKey`. 即，这个：

```
[[detailsDataSource objectAtIndex: detailIndex] setValue:@"Yes" forKey:@"Done"]; 
```

应该：

```
[[detailsDataSource objectAtIndex: detailIndex] setObject:@"Yes" forKey:@"Done"]; 
```

如果这不能解决问题，请确保字典和数组都是可变的：

```
-(IBAction)favoriteButtonPressed:(id)sender {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Object.plist"];

    NSMutableDictionary *mutDict = [NSMutableDictionary dictionaryWithDictionary:[detailsDataSource objectAtIndex:detailIndex]];
    [mutDict setObject:@"Yes" forKey:@"Done"];

    NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:detailsDataSource];
    [tmpMutArr replaceObjectAtIndex:detailIndex withObject:[NSDictionary dictionaryWithDictionary:mutDict]];  // make dict immutable before replacing.  Casting it ( (NSDictionary *)mutDict ) works too.

    [detailsDataSource release], detailsDataSource = nil;
    detailsDataSource = [[NSArray alloc] initWithArray:tmpMutArr];

    [detailsDataSource writeToFile:path atomically:YES];
} 
```

* * *

`@"Yes"`此外，您可以使用`[NSNumber numberWithBool:YES]`:代替:
`[mutDict setObject:[NSNumber numberWithBool:YES] forKey:@"Done"];`
通常比使用 . 格式更好`@"Yes"`。

和：

```
districtLabel.text = [[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Yes"]; 
```

应该：

```
districtLabel.text = [[detailsDataSource objectAtIndex: detailIndex] objectForKey:@"Yes"]; 
```

* * *

还注意到您*可能*存在内存泄漏：

```
detailViewController.detailsDataSource = [[NSArray alloc] initWithArray:objectsArray]; 
```

确保在使用保留的属性设置器时自动释放。

# objective-c - 使用 `valueForKey` 访问 UIBarButtonItem 中的视图，违反私有 API？

> ID：11923597
> 
> 赞同：9
> 
> 时间：2012-08-12T16:01:08.100
> 
> 标签：objective-c, ios, uikit, app-store

由于`UIBarButtonItem`不子类`UIView`化，因此不可能获得像它这样的正常特征`frame`。

一种方法是`[barButtonItem valueForKey:@"view"]`

这完美地工作，并允许您将 GestureRecognizer（例如）添加到底层`UIView`.

`UIKit`但是，这是违反私有API 的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-12T16:37:41.753

就验证后立即拒绝而言，这不是私有的，但它的私有性足以被认为是脆弱的（也就是说，新的 iOS 版本可能会破坏您在应用商店中使用该代码的现有应用）。

我可以说，类似的代码（通过 KVC 获取 UIToolbar 的 backgroundView ivar）已经通过了应用商店的验证，并且正在生产中使用。

如果可能发生坏事，您必须将方法包装在 中`@try { ... } @catch`，以便拦截 KVC 可能在较新的 iOS 版本中失败。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-12T17:58:41.843

**“这不是私人的”的五个证据**

*   这是您可以通过其他方式获得的属性。试试这个，其中一个观点实际上是有问题的`_view`ivar `UIBarButtonItem`。这表明访问`UIView`它本身并没有被禁止，尽管 KVO 方式可能是有问题的（但我对此表示怀疑）。

    ```
     NSArray *array = self.toolBar.subviews;
      for (UIView *view in array) {
          view.backgroundColor = UIColor.greenColor;
      } 
    ```

*   它们实际上触发了该属性的 KVO。ivars 不必触发 KVO API，对吧？

*   @Farcaller 提到了一个在 App Store 中出售的类似案例。由于他/她在问题出现后的前 20 分钟内回答了问题，因此可以合理（但不安全！）假设 App Store 中可能有数千个应用程序执行此操作。

*   每次按下按钮时，此 UIView 都会被替换掉，因此您不能仅在其上设置一个手势识别器并完成。但是，您可以在每次`view`更换手势识别器时继续设置相同的手势识别器。对我来说，这实际上更多地证明了它不是私有 API，而是在使用它时必须非常小心（并使用 KVO 确保您拥有最新的 API）。

*   我的应用程序在 App Store 中出售，并且执行此操作。

# html - Firefox 中的 HTML 文件中的链接颜色没有改变

> ID：11923600
> 
> 赞同：0
> 
> 时间：2012-08-12T16:01:28.200
> 
> 标签：html, css, firefox, colors, hyperlink

我制作了一个保存在这个[小提琴](http://jsfiddle.net/w4ByF/2/)中的页面（原始[小提琴](http://jsfiddle.net/w4ByF/)链接）。

在这里，我设置了`link`, `link`, `active`,`visited`的颜色`hover`。但是第一次之后，每当我在firefox中加载页面时，它总是显示`visited`ie粉红色的颜色。如何将颜色重置为黄色`link`，即第一次显示的颜色？

另外我不明白如何检查蓝色，即颜色`active`是否来了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:11:01.963

你有

`A:visited {text-decoration: none;color: pink;}`

所以所有访问过的链接都是粉红色的。如果您希望它们重置为黄色，则必须将该行更改为：

`A:visited {text-decoration: none;color: yellow;}`

现在看起来他们总是第一次访问这些链接。

这是我随着时间的推移学到的东西： a 和 a:visited 应该始终相同；a:hover & a:active 应该总是相同的。

其次：您可以通过单击链接并按住鼠标按钮来检查您的 :active 颜色。鼠标按下链接，但不要松开按钮。你会看到它变成你的活跃颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:19:25.227

我认为您真正想要的是[`:focus`psuedo-selector](http://reference.sitepoint.com/css/pseudoclass-focus)，而不是[`:visited`selector](http://reference.sitepoint.com/css/pseudoclass-visited)，因为您不想要*持久*的（即，保持每页加载）更改。您想要*在这种情况下进行*更改。[`:active`](http://reference.sitepoint.com/css/pseudoclass-active)仅*在鼠标单击链接期间*有效。

看：

```
A:focus {
    text-decoration: line-through;
    color: pink;
} 
```

[http://jsfiddle.net/w4ByF/3/](http://jsfiddle.net/w4ByF/3/)

然后点击第一个链接。你会看到它使用了`:focus`伪选择器。

这里的效果更容易看到：

[http://jsfiddle.net/w4ByF/4/](http://jsfiddle.net/w4ByF/4/)

# android - 请给我一个“启动”来构建应用程序以登录网站

> ID：11923605
> 
> 赞同：-1
> 
> 时间：2012-08-12T16:02:32.647
> 
> 标签：android

以前从未构建过应用程序。下载并安装了 SDK 和 Eclipse。

对于我的“学习经验”，我想为我的 Galaxy S II (4.0.4) 构建一个应用程序，它将带我到一个网站然后登录，例如：我的 Gmail 帐户或我的 Voip.ms 帐户

有人可以指点我一个教程或建议我应该如何启动这样一个应用程序吗？

这是否太复杂而无法开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:31:59.217

就个人而言，我认为这对于作为学习者开始来说太复杂了。您最终可能会花费更多时间来调试一些由于一些愚蠢的东西而无法工作的代码，而不是“学习”如何编写 Android 代码。

我从一个屏幕很少的简单应用开始，将一些信息存储在本地 SQLite DB 中，并通过 Internet 将一些信息发送到远程 SQL Server。我设法在 2 周内完成了这项工作，并且很好地掌握了 Android 基础知识。现在我正在开发一个非常复杂的应用程序，并且不会陷入基本问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:09:33.280

[Developer.android.com](http://developer.android.com/index.html)提供了一些很好的应用示例和教程，当您想了解如何做与 Android 相关的事情时，它是您的首选位置。至于你想做什么，这将取决于网站。去有问题的网站，搜索开发人员部分是要走的路。他们将在那里解释他们向开发人员提供哪些 API。OAuth + REST 被广泛采用，但没有通用的解决方案，这真的取决于网站。最后一点：从用户体验的角度来看，在 Android 应用程序中嵌入网页是一个非常糟糕的主意，使用 API 提供原生应用程序总是会带来更好的体验。

# authentication - 如果您使用 SSL，是否仍需要使用摘要式身份验证？

> ID：11923607
> 
> 赞同：20
> 
> 时间：2012-08-12T16:02:41.597
> 
> 标签：authentication, ssl, https, basic-authentication, digest-authentication

这可能是一个愚蠢的问题，但我可以只使用基本的 HTTP 身份验证安全地取消，还是即使服务器已经在 SSL 上我仍然可以从摘要身份验证中受益？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-12T16:11:50.850

通过 SSL/TLS 使用 HTTP Digest 身份验证获得的唯一好处是，如果您的服务器能够直接配置[“HA1 格式”](http://en.wikipedia.org/wiki/Digest_access_authentication)的密码（即如果它没有不需要知道密码本身，但是可以使用*MD5(username:realm:password)*来配置用户密码，而不需要明文密码，参见[Apache Httpd](http://httpd.apache.org/docs/2.2/misc/password_encryptions.html#digest)示例）。

实际上，这并不是一个很大的优势。如果需要保护密码本身不受服务器的影响，还有更好的选择（特别是因为现在 MD5 被认为还不够好）。

SSL/TLS 层已经提供了 HTTP Digest 身份验证的其他功能（通过表单/HTTP Basic）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T16:05:50.290

跨 ssl 基本身份验证足以满足大多数需求。

# objective-c - 我在计算器显示中使用 NSNumberFormatter，但它不能正确解析 NSStrings

> ID：11923613
> 
> 赞同：-3
> 
> 时间：2012-08-12T16:03:20.697
> 
> 标签：objective-c, parsing, nsnumber, nsnumberformatter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:52:51.443

Pragmatically I would simply remove the comma before parsing the string into a number then it must work.

```
 NSString *s = [self.calDisplay.stringValue 
                stringByReplacingOccurrencesOfString:@"," withString:@""]; 
```

Leaving you with

```
- (IBAction)digitPressed:(NSButton *)sender {
   if (userIsEnteringANumber) {
       NSString *s = [self.calDisplay.stringValue stringByReplacingOccurrencesOfString:@"," withString:@""];
       NSNumber *number = [formatter numberFromString:[s stringByAppendingString:sender.title]];
       self.calDisplay.stringValue = [formatter stringFromNumber:number];
   } else {
       self.calDisplay.stringValue = sender.title;
       userIsEnteringANumber = YES;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:11:36.447

I believe this is what happens:

The string you have is "2,569". Which is two thousand something. This works fine, because the thousands delimiter is a comma.

After another button press (e.g. 1), your string becomes "2,5691". This is not a proper number, because it has the thousands delimiter (comma) wrong, hence the nil number. "25,691" would have been correct, but you have "2,5691".

Try this:

```
- (IBAction)digitPressed:(NSButton *)sender {
    if (userIsEnteringANumber) {
        double previous = [[self.calDisplay.stringValue] doubleValue];
        double pressed = [sender.title doubleValue];
        NSNumber *number = [NSNumber numberWithDouble:previous*10+pressed];
        self.calDisplay.stringValue = [formatter stringFromNumber:number];
    }
    else {
        self.calDisplay.stringValue = sender.title;
        userIsEnteringANumber = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:58:29.743

to expand on the [bogdansrc](https://stackoverflow.com/users/1270034/bogdansrc)'s answer pointing out that the formatter is not at fault here, one way to solve this (homework?) problem that allows entering digits for strings that already appear as double in your display would be as follows:

```
- (IBAction)digitPressed:(NSButton *)sender {
    if (userIsEnteringANumber)
    {
        double previous = self.calDisplay.stringValue.doubleValue;
        NSString* pressed = sender.title;
        NSString* newNumber = [NSString stringWithFormat:@"%g%s", previous, pressed];
        self.calDisplay.stringValue = [formatter stringFromNumber:[newNumber doubleValue]];
    }
    else
    {
        self.calDisplay.stringValue = sender.title;
        userIsEnteringANumber = YES;
    }
} 
```

of course, this is not really ideal **MVC**, as the code relies on the **V**iew to track its **M**odel … and by so doing, it's hard to be able to know from only the code snippet you provided how to transition from 260 to 260.4 when 4 is pressed after getting into the state that is supposed to be a fractional decimal number.  is the decimal place being shown and tracked as the last character in stringValue?  if so, the above will break because the "." at the end will get lost.  if not, well then the **M**odel is basically spread out partly in the **V**iew and partly in separate state, which is even less ideal.

# python - pytesser 的成功率低？这是噪音问题，还是需要做其他事情？

> ID：11923615
> 
> 赞同：6
> 
> 时间：2012-08-12T16:03:54.860
> 
> 标签：python, ocr, tesseract

我正在尝试从屏幕截图中检测一些大写字符。我使用 PIL 将其转换为黑白，然后使用 PyTesser 页面中的代码示例，在图像上运行 tesser.exe：

```
from pytesser import *
image = Image.open('fnord.tif') 
print image_to_string(image) 
```

我正在使用这张图片：![http://i.imgur.com/so419.png](../Images/c173120f720aec8f26e72efb0bff3170.png)

但它不承认它是一个 E，或者真的是什么。我*认为*这是一个足够干净的捕获？顶部的噪音不会把它扔掉，对吧？

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:27:35.157

如果您担心噪点是否存在问题，请手动在 MSPaint 或类似工具中打开图像，去除噪点，然后通过 OCR 运行新图像。这是了解 OCR 引擎如何工作以及混淆它和不混淆的最佳方式。每个 OCR 引擎的工作方式都不同。

在这种情况下，可能是一点点噪音也会混淆字符分区过程。您应该检查从 OCR 引擎返回的边界框值，以查看 OCR 引擎是否甚至在正确的位置查找您的单词或字符。

一些 OCR 引擎具有在 OCR 过程中从图像中去除噪声的选项。这通常称为去斑或去噪。可以使用 Leptonica ( [http://www.leptonica.org](http://www.leptonica.org) ) 去除噪音，它现在是最新的 Tesseract 图像的一部分。

屏幕字体对 OCR 引擎提出了很大的挑战，因为 DPI 通常非常低。在您的“E”的情况下，应该有足够多的像素被识别。沉重的冲程重量可能会使发动机感到困惑。

此外，商业引擎通常会比 Tesseract 更准确，但也会带来昂贵的许可费用。

# git - 内部服务器 git 要求输入密码？

> ID：11923619
> 
> 赞同：1
> 
> 时间：2012-08-12T15:59:45.650
> 
> 标签：git

想知道在同一台服务器上推拉 GIT 时如何避免输入密码？

我的目录结构如下：

```
/home/gitrepo
/home/site/public/contents(.git)etc 
```

我认为这与用户或组（chown / chgrp）不同有关。我是否应该只在服务器上生成 ssh 密钥，但这没有任何意义。必须有一种方法可以通过不同的用户目录在同一台机器上进行 git 操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:00:35.723

考虑各种[git 协议](http://git-scm.com/book/ch4-1.html)，它们都采用以下形式：

```
(protocol)://[user@](servername)[:port]/(path) 
```

如果您没有访问/修改目标的必要（读/写）权限，文件协议将要求输入密码。

ssh 协议会更合适，前提是您的 ssh 守护进程已启动，并且在其路径中有 git。
如果是这样，请在 中生成公钥/私钥`/home/gitrepo/.ssh`，并在`/home/site/.ssh/authorized_keys`文件中公开公钥，如本[ssh 页面的](http://oreilly.com/catalog/sshtdg/chapter/ch08.html)[“基于公钥的配置”部分](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#13075)所述。

# javascript - 在这里使用 JSON.stringify() 有什么区别？

> ID：11923624
> 
> 赞同：0
> 
> 时间：2012-08-12T16:05:11.427
> 
> 标签：javascript, jquery

`p`以下结果之间有什么区别`q`？为什么你会做任何一种方式，哪种方式最好？

```
 var my = [
                {"a":"sdsds"},
                {"b":"sdsds"},
                {"c":"sdsds"},
                {"d":"sdsds"},
                {"e":"sdsds"}
        ];

        var p = JSON.stringify({ "myText": my };);
        var q = { "myText": JSON.stringify(my) }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T16:07:59.567

`p`是一个字符串，包含：

```
'{"myText":[{"a":"sdsds"},{"b":"sdsds"},{"c":"sdsds"},{"d":"sdsds"},{"e":"sdsds"}]}' 
```

`q`是一个对象：

```
{
    myText: '[{"a":"sdsds"},{"b":"sdsds"},{"c":"sdsds"},{"d":"sdsds"},{"e":"sdsds"}]'
} 
```

它们不是一回事，所以我不能告诉你哪个最好。你想用它做什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T16:07:44.203

`p`是一个看起来像的字符串`"{ \"mytext\": ... }"`。

`q`是一个具有名为 的属性的对象`mytext`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T16:08:10.350

一个人创建一个 JSON 文本，该文本由一个具有属性“myText”的对象组成，其值是“my”包含的数据（即，一个对象数组，每个对象都有一个属性/字符串对）。

另一个创建一个由属性“myText”组成的对象，其值是一个字符串，其中包含从“my”中的数据构建的 JSON 文本。

> 你为什么要这样做

前者通常是创建 JSON 时采用的方法。

`data`如果您计划在调用中将对象传递给 jQuery 的属性之类的东西，则后者可能很有用`.ajax()`。

> 哪个最好

两者都不。他们只是不同。“最佳”是对您要对变量执行的操作有效的方法。

# angularjs - AngularJS 更好的方法来管理部分和控制器数据

> ID：11923627
> 
> 赞同：1
> 
> 时间：2012-08-12T16:05:38.993
> 
> 标签：angularjs

我一直在 AngularJS 中使用指令，它使用从控制器的 $scope 获取的数据构建一个 HTML 元素。当我的控制器从服务器获取它的 JSON 数据时，我让我的控制器设置了一个 $scope.ready=true 变量。这样，指令就不必在每次获取数据时一遍又一遍地构建页面。

以下是事件发生的顺序：

1.  控制器页面加载路由并触发控制器功能。

2.  该页面扫描指令并触发此特定指令。

3.  该指令构建元素并评估其表达式并继续前进，但是当指令链接函数被触发时，它等待控制器“准备好”。

4.  准备就绪后，会触发一个内部函数，然后继续构建部分函数。

这行得通，但代码很乱。我的问题是有没有更简单的方法来做到这一点？我可以抽象我的代码以便在我的控制器触发事件​​后触发它吗？而不必制作这个 onReady 内部方法。

这是它的样子（它可以工作，但很难测试）：

```
angular.module('App', []).directive('someDirective',function() {

  return {

    link : function($scope, element, attrs) {

      var onReady = function() {
        //now lets do the normal stuff
      };

      var readyKey = 'ready';
      if($scope[readyKey] != true) {
        $scope.$watch(readyKey, function() {
          if($scope[readyKey] == true) {
            onReady();
          }
        });
      }
      else {
        onReady();
      }

    }

  };

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:03:40.937

您可以`$scope.$emit`在控制器和`$rootScope.on("bradcastEventName",...);`指令中使用。好处是指令是解耦的，您可以随时将其从项目中取出。您可以对应用程序的所有指令和其他“运行”组件重复使用相同的模式来响应此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:12:14.833

我发现了两个问题：

*   在后台触发任何 XHR 请求不会阻止加载模板。
*   将数据应用于`$scope`变量和实际将数据应用于页面绑定之间存在差异（当 $scope 被消化时）。因此，如果您将数据设置为范围，然后触发事件以通知部分范围已准备好，那么这将无法确保该部分的数据绑定已准备好。

因此，要解决这个问题，最好的解决方案是：

1.  使用此插件管理控制器和以下任何指令之间的事件处理： [https ://github.com/yearofmoo/AngularJS-Scope.onReady](https://github.com/yearofmoo/AngularJS-Scope.onReady)

2.  不要将您希望 JavaScript 函数拾取和使用的任何数据放入指令模板 HTML。因此，例如，如果您有一个如下所示的链接：

    `<a data-user-id="{{ user_id }}" href="/path/to/:user_id/page">My Page</a>`

    然后问题是指令必须`:user_id`从`data-user-id`属性中准备值，获取 href 值并替换数据。这意味着指令必须不断检查`data-user-id`属性以查看它是否存在（通过每隔几分钟检查一次 attrs 哈希）。

    相反，将不同的范围变量直接放入 URL

    `<a href="/path/to/{{ directive_user_id }}/page">My Page</a>`

    然后把它放在你的指令中：

    > $scope.whenReady(function() { $scope.directive_user_id = $scope.user_id; });

# git - git尝试在结帐时删除目录

> ID：11923635
> 
> 赞同：29
> 
> 时间：2012-08-12T16:07:18.673
> 
> 标签：git, git-checkout

每当我在分支 (Li) 和主分支之间切换时，我都会收到以下消息：

> 删除目录 'sys/console/api' 失败。我应该再试一次吗？（是/否）

任何人都知道我如何摆脱这个消息？我认为过去我试图错误地删除这个目录，现在我被这个错误消息困住了。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-12T17:21:01.047

此错误消息来自[此补丁](http://www.spinics.net/lists/git/msg150510.html)（在 中[`compat/mingw.c`](https://github.com/git/git/blob/44484662d83de2ae98d04738ec43d4dea1f859a8/compat/mingw.c#L228-L250)）和[此](http://www.spinics.net/lists/git/msg147934.html)补丁（也在[compat/mingw.c 中](https://github.com/git/git/blob/44484662d83de2ae98d04738ec43d4dea1f859a8/compat/mingw.c#L252-L281)）。
这通常意味着您的目录“忙碌”，或者不是空的（但只包含私有文件，即非版本化文件）。

因此，请确保在签出分支时，您没有正在运行的进程使您的特定目录“忙碌”。

[Ted M Young](https://stackoverflow.com/users/75113/ted-m-young)很有帮助地[评论](https://stackoverflow.com/questions/11923635/git-tries-to-delete-a-directory-on-checkout/11924201#comment17581150_11924201)：

> **“忙**”的另一个定义是**它是您的当前目录**！对根目录执行 a 然后更改目录以避免此错误
> 似乎是最安全的。`cd`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-20T02:04:59.783

我只需要退出 VS Code 即可让错误消失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T09:46:08.933

与所有阻塞的文件夹/文件一样，使用[Process Explorer](https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer) → Ctrl + F → 键入文件夹名称。查看正在使用它的 vscode、notepad++ 或其他应用程序，终止该进程。

# php - 连接 html、javascript、php 和 mysql

> ID：11923637
> 
> 赞同：2
> 
> 时间：2012-08-12T16:07:39.523
> 
> 标签：php, javascript, mysql, html

下面是我一直在研究的一个订单表格，用于了解 html、javascript、php 和 mysql 如何相互交互。

[https://www.dropbox.com/s/7zpok07w1bygu60/Screen%20Shot%202012-08-12%20at%2010.28.41%20AM.png](https://www.dropbox.com/s/7zpok07w1bygu60/Screen%20Shot%202012-08-12%20at%2010.28.41%20AM.png)

此表的目标是让用户在数量字段中输入一个数字，并且在更改时，javascript 将自动更新该特定产品的总成本。关键是我希望从 mysql 数据库表中填充列表。

这是我正在使用的 html、javascript 和 php 代码。

HTML

```
<table>
<tr>
    <td>
        Product
    </td>
    <td>
        Description
    </td>
    <td>
        Quantity
    </td>
    <td>
        Price
    </td>
    <td>
        Total Cost
    </td>
</tr>

<?php include("pop_prodlist.php"); ?>
<tr>
    <td>Totals</td>
    <td></td>
    <td>TotalQuantity</td>
    <td></td>
    <td>TotalCost</td>
</tr>
</table> 
```

PHP

```
 while($row = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . $row['P_Name'] . "</td>";
    echo "<td>" . $row['P_Description'] . "</td>";
    echo "<td>
    <input type='text' size='3' name='" . $row['P_Name'] . "_Quantity'
      onChange='calcCost()'/>
    </td>";
    echo "<td>" . $row['P_Cost'] . "</td>";
    echo "<td id='" . $row['P_Name'] . "_Cost'>0.00</td>";
    echo "</tr>";

} 
```

Javascript calcCost() 函数

```
 function calcCost()
    {

      var theForm = document.forms['productform'];

    /*
    COMMENTED OUT FOR TIME BEING
    var pquan = theForm.elements[productname + '_Quantity'].value;
    var costperquan = '15.99';
    var ptotalcost = costperquan * pquan;
    */

     var divobj = document.getElementById('Basketball_Cost');
     divobj.innerHTML = "helloworld";

    } 
```

我目前遇到的问题是，我无法弄清楚如何根据 mysql 查询确定的产品名称，从 php 脚本回显中将唯一参数放入 javascript 函数 calcCost 中。

另外，为了教育自己，我很好奇更好的解决方案会是/看起来像什么。我怀疑这是解决问题的最优雅的解决方案，我希望看到一些更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:23:35.973

Jay，您似乎了解 PHP、MySQL 和 JavaScript 是如何协同工作的——这很好。

就个人而言，我真的可以推荐使用 jQuery（JavaScript 库）。它在整个网络上被广泛使用，非常常见，功能强大且易于理解和使用。虽然有人说使用语言的库不好，但在你了解该语言之前，jQuery 帮助我更好地理解了 JavaScript，因为它易于遵循的语法。

因此，要使用 jQuery，您只需在 html 文件中添加源脚本。为什么我推荐 jQuery？它还允许您非常轻松地使用 ajax（也从数据库加载内容，无需刷新页面）。

jQuery 还允许您将点击事件与 HTML 分开。基本上，您为 HTML 元素分配一个`id`or`class`属性，这是您在 js 中的引用，因此`onclick=""`不需要。

至于您的 HTML：强烈建议不要使用表格布局。在 HTML5 和 CSS3 时代，有很好的表格替代品。

如果您需要更多帮助，请在评论中告诉我，我很乐意提供帮助...

# php - 如何显示/选择当日报价

> ID：11923639
> 
> 赞同：3
> 
> 时间：2012-08-12T16:07:44.497
> 
> 标签：php, refresh

我有一个包含很多报价的数据库，我想创建一个`"Quote of the Day"`页面。基本思想是从数据库中获取所有报价，将其放在一个数组中，并在数组中的随机索引号处回显报价。

这是非常易于实施的基本思想，到目前为止我当然已经介绍过。问题是，每次刷新页面，都会弹出一个新的报价。这不是我想要的。

我希望页面仅在（*或其他时间，但这不是重点）***刷新报价**。`0:00`

 *有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T16:11:50.033

这听起来过于复杂。做这样的事情的正常方法是

*   将报价存储在数据库中；给每一行一个日期
*   在每个请求中，从数据库中获取当天的报价并显示它。

如果您不想在数据库中指定日期，您还可以在脚本中硬编码开始日期（例如，今天的日期），然后相应地获取报价 - 所以今天，您将获取第一个数据库中的行；明天，第二个，以此类推。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T16:15:13.923

您的最终代码应该看起来像这样，其中数据库中的每个报价都有“day”字段作为它应该显示的日期 (0-365)。

```
<?php
$query = $pdo->prepare("SELECT * FROM `quotes` WHERE `day` = ?");
$query->execute(date("z", strtotime("today")));

$row = $query->fetch();
echo $row['quote'];
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T16:12:11.680

使用日期作为 RNG 种子，这样它就会每天更新 :)

这是一些代码：

```
mt_srand(date('dmY')); //Sets mt_rand seed to date.
$displayno = mt_rand(0, $total_quotes); //Generates random number with that seed, and the amount of quotes.
display_quote($displayno); //Pre-defined function that gets quote from database, and displays it. 
```

编辑：当我测试它时，这非常有效。（http://pi.berboe.co.uk/stacks.php 是一个工作示例，它每天选择一次 0 到 200 之间的随机数。）

这假设 $total_quotes 是较早设置的，并且是报价数据库中的条目数量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T16:13:20.097

这可能并不像第一眼看上去那么容易。

假设您有 365 个报价，并且这个数字不会改变 - 很简单，您可以每天使用 1 个。因此，您只需要一个算法，它可以为您提供一年中的天数，这将是您从数据库中拉出的行的 id。例如，2 月 1 日是数据库中的第 32 天 -> 获取该报价。

假设您有 2000 个报价，并且数量可能会改变 -> 您将如何处理？你的方法是什么？是否允许一年显示两次报价？如果超过 365，所有报价将如何显示？

更新：

```
//get number of quotes from DB
SELECT COUNT(*) AS cnt FROM quotes

$day_in_year=date('z')+1; //-> this will give you the number of days in a year, for today 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-12T16:23:14.810

我会这样做：

首先，我假设您可以在数据库中获取引号的数量，我将其称为`number_of_quotes`.

然后你可以使用类似`PHP` `microtime()`函数的东西来获取`os timestamp`并将它除以

```
(1000 /* for converting microseconds to milliseconds */ * 
1000 /* milliseconds to seconds */ * 
3600 /* seconds to hours */ * 
24 /* hours to days */) 
```

要获取到现在为止经过的天数，我将其称为`number_of_days_passed`.

最后，您可以`number_of_days_passed % (number_of_quotes + 1)`从您的报价表中获取第 th 行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-12T16:57:27.413

另一种解决方案是`mark`已经显示的报价。这样，您应该只决定如何在一天中选择一个相同的报价。

`Next`报价可以在当天开始时随机选择并标记为`todays`报价。可以使用执行此任务`CRON`，您只需选择标记为`todays`（白天）的报价。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-12T20:51:09.003

感谢所有的答案。不幸的是，我一直在寻找的答案没有给出。

这就是我消除问题的方法：

我创建了一个名为quote 的新表。

它有 1 行：更新当天最后一个报价的日期和报价本身。当日期与服务器日期不匹配时，我生成了一个新报价并使用新报价和新日期更新了表格。如果它确实匹配当前日期，它会获取报价并显示它。

相当简单的解决方案，但对我来说它是开箱即用的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-12T16:18:57.697

获取今天 00:00 的 unix 时间并将其作为 $variable 存储在您的代码中。

```
$id = (time() - $variable) % (24 * 60 * 60);
"SELECT * FROM `quotes` WHERE `id` = {$id}" 
```*

# python - 如何在 python 中不提供所有默认参数？

> ID：11923645
> 
> 赞同：3
> 
> 时间：2012-08-12T16:08:21.637
> 
> 标签：python

可以说我有这个代码：

```
def dosomething(thing1, thing2=hello, thing3=world):
    print thing1
    print thing2
    print thing3 
```

我希望能够指定thing3 是什么，但不必说thing2 是什么。（下面的代码是我认为它可能工作的方式......）

```
dosomething("This says 'hello fail!'", , 'fail!') 
```

它会说

```
This says 'hello fail!'
hello
fail! 
```

那么有没有办法做到这一点，或者`thing2`每次我想说什么时我都必须指定`thing3`？

我正在使用 python2，如果这很重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T16:10:22.467

使用关键字参数

```
dosomething("This says 'hello fail!'", thing3='fail!') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T16:10:52.203

是的你可以：

```
dosomething("This says 'hello fail!'", thing3 = 'fail!') 
```

# html - 使用 JQueryUI Draggable，如何选择被拖动的对象

> ID：11923646
> 
> 赞同：0
> 
> 时间：2012-08-12T16:08:34.420
> 
> 标签：html, css, jquery-ui, jquery-ui-draggable

我正在使用可拖动的 JQueryUI，我希望能够在拖动时为可拖动元素添加样式。我尝试了此代码的变体：

```
$(".ui-widget-content").draggable({
  drag: function(event, ui) {
    $(this).css("width", "50px");
  }); 
```

但是，我的尝试失败了，我相信它，因为我不知道如何从 ui 对象中获取可拖动元素。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:10:40.503

无需额外的 JavaScript。只需使用这个 CSS 选择器：

```
.ui-draggable-dragging {
    /*
    This class is applied to the element while it is being dragged.
    This is done automatically by jQueryUI.
    */

    width: 50px;
} 
```

在此处阅读文档：http: [//jqueryui.com/demos/draggable/#overview-main](http://jqueryui.com/demos/draggable/#overview-main)

# html-parsing - 用简单的dom html去除明文的特定字符

> ID：11923647
> 
> 赞同：0
> 
> 时间：2012-08-12T16:08:42.790
> 
> 标签：html-parsing

我有这个代码来检索网站上的一些产品：

```
foreach($page1->find('.link_category') as $produit1) 
echo $produit1->plaintext . '<br />'; 
```

我用双引号检索产品“，我想用什么替换它（双引号）

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:57:09.817

```
foreach($page1->find('.link_category') as $produit1) {
$product = str_replace('"','',$produit1->plaintext);
echo $product;
} 
```

I hope it works :)

# perl - 将值从 HTML 页面表单传递到 CGI 程序

> ID：11923653
> 
> 赞同：0
> 
> 时间：2012-08-12T16:09:16.253
> 
> 标签：perl, cgi, web-crawler

我正在尝试创建一个简单的程序来获取网页的内容以完成我的任务。

现在我创建一个非常简单的 HTML 页面，让用户输入一个 URL。

```
<html>
<head><title>URL page</title>
</head>

<body>
  <form action="cgi-bin/b1.cgi" method="GET">
        Enter the URL you want to see <input type="text" name="passing" size=40>
        <input type="submit" value="submit">
        </form>
</body>

</html> 
```

所以我只想将 url 传递给我目前拥有的 CGI 程序

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";

use LWP::Simple;
use CGI;
use HTML::HeadParser;

#my $pass = $cgi->param('passing');

$URL = get ("$passing");

$head = HTML::HeadParser->new;

$head->parse("$URL");

print "This is the Title of the page" . $head->header('Title') . "\n\n";

print $head->header('X-Meta-Description') . "\n\n";

print $head->header('X-Meta-Keywords') . "\n\n";

print $head->header('Content-Type') . "\n\n";

print $head->header('Content-Language') . "\n\n";

exit; 
```

所以从上面的代码中你可以看到我是否可以获得从`GET`方法传递到它所说的行的值，`URL = get();`然后我可以获得内容。

我尝试了一些类似的方法，`my $pass = $cgi->param('passing');`但它给了我一个错误`param`

任何建议将不胜感激。

# python - Python - 在列表中查找最接近 0 的整数

> ID：11923657
> 
> 赞同：14
> 
> 时间：2012-08-12T16:09:37.283
> 
> 标签：python, algorithm, list, numbers

> **可能重复：**
> [查找最接近未完全排序的列表中的值的项目的索引](https://stackoverflow.com/questions/9706041/finding-index-of-an-item-closest-to-the-value-in-a-list-thats-not-entirely-sort)

我在 Python ( `[237, 72, -18, 237, 236, 237, 60, -158, -273, -78, 492, 243]`) 中有一个正数和负数列表。我想找到最接近 0 的数字。我该怎么做？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-12T16:12:48.847

这个怎么样：

```
lst = [237, 72, -18, 237, 236, 237, 60, -158, -273, -78, 492, 243]
min((abs(x), x) for x in lst)[1] 
```

一个不错且简短得多的答案：

```
min(lst, key=abs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T16:16:50.063

```
reduce(lambda x, y : x if abs(y) > abs(x) else y, your_sequence) 
```

# android - 用文本视图显示小数

> ID：11923658
> 
> 赞同：1
> 
> 时间：2012-08-12T16:09:38.290
> 
> 标签：android, textview, decimal

嗨，我想使 TextView 级别可以输出小数，但我不知道该怎么做，有人知道吗？现在它只输出 1，但我希望它输出 1.80。:)

```
public class Main extends Activity {

int counter;
EditText weight, hours;
TextView amount, level;
Button calcuate;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    counter = 0;
    weight = (EditText) findViewById(R.id.weight);
    hours = (EditText) findViewById(R.id.hours);
    amount = (TextView) findViewById(R.id.amount);
    level = (TextView) findViewById(R.id.alcohol_level);
    calcuate = (Button) findViewById(R.id.calcuate);

    final String widmark = getResources().getString(
            R.string.widmark);
    final String hundra = getResources().getString(
            R.string.hundra);
    final String cl = getResources().getString(
            R.string.cl);

    calcuate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Integer wid, mgs;

            String w = weight.getText().toString();
            String h = hours.getText().toString();

            wid = Integer.parseInt(w) * Integer.parseInt(widmark) / Integer.parseInt(hundra);
            mgs = Integer.parseInt(cl) / Integer.parseInt(wid.toString()) / Integer.parseInt(hundra);

            level.setText(mgs.toString());
        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:13:05.070

您的`mgs`变量是一个 Integer 对象。将其设置为浮点型以显示小数位。

```
float mgs = Integer.parseInt(cl) / Integer.parseInt(wid.toString()) / Integer.parseInt(hundra); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:13:34.057

`int`除法只会产生`int`'s。如果你希望你的输出是`float`或`double`类型，你必须使用`double`或`float`除法。

```
Double mgs;

mgs = Double.parseDouble(cl) / Double.parseDouble(wid.toString()) / Double.parseDouble(hundra); 
```

请注意，并非表达式中考虑的所有变量都必须是`double`'，只有其中一个需要。

这里值得注意的另一件事是您是否需要两位小数（假设这里是货币）。默认情况下，Java/Android 只会根据需要输出尽可能多的小数位。 `1.80`将显示为`1.8`。为了缓解这种情况，您应该使用 a [`NumberFormat`](http://developer.android.com/reference/java/text/NumberFormat.html)（特别是使用[`NumberFormat.getCurrencyInstance()`](http://developer.android.com/reference/java/text/NumberFormat.html#getCurrencyInstance%28%29)），以便您可以指定您想要默认`Locale`货币的小数位数。

# javascript - Javascript - 对 rgb 值进行排序

> ID：11923659
> 
> 赞同：9
> 
> 时间：2012-08-12T16:09:38.343
> 
> 标签：javascript, arrays, sorting, colors

使用 javascript/jquery，我想将 rgba 值数组排序为可见光谱的颜色。通过这样做，类似的阴影应该聚集在一起。有没有插件可以做到这一点，或者我将如何去做？

光谱图像：[http ://www.gamonline.com/catalog/colortheory/images/spectrum.gif](http://www.gamonline.com/catalog/colortheory/images/spectrum.gif)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T14:16:22.423

***披露****：我是下面推荐的库的作者。*

如果您不介意使用库，这里是 Oriol 详细回复的更简洁版本。它使用[sc-color 库](https://github.com/surfacecurve/sc-color)：

```
var sorted = colorArray.sort(function(colorA, colorB) {
    return sc_color(colorA).hue() - sc_color(colorB).hue();
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-12T16:51:21.977

如果您的颜色数组是这样的：

```
var rgbArr = [c1, c2, c3, ...] 
```

其中每种颜色`ci`都是 0 到 255 之间的三个数字的数组

```
ci = [red, green, blue] 
```

然后，您可以使用此函数将颜色转换为 HSL

```
function rgbToHsl(c) {
  var r = c[0]/255, g = c[1]/255, b = c[2]/255;
  var max = Math.max(r, g, b), min = Math.min(r, g, b);
  var h, s, l = (max + min) / 2;

  if(max == min) {
    h = s = 0; // achromatic
  } else {
    var d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch(max){
      case r: h = (g - b) / d + (g < b ? 6 : 0); break;
      case g: h = (b - r) / d + 2; break;
      case b: h = (r - g) / d + 4; break;
    }
    h /= 6;
  }
  return new Array(h * 360, s * 100, l * 100);
} 
```

并按色调排序

```
var sortedRgbArr = rgbArr.map(function(c, i) {
  // Convert to HSL and keep track of original indices
  return {color: rgbToHsl(c), index: i};
}).sort(function(c1, c2) {
  // Sort by hue
  return c1.color[0] - c2.color[0];
}).map(function(data) {
  // Retrieve original RGB color
  return rgbArr[data.index];
}); 
```

这是一个可运行的示例（感谢[Ionică Bizău](https://stackoverflow.com/users/1420197/ionic%C4%83-biz%C4%83u)）：

```
function display(container, arr) {
  container = document.querySelector(container);
  arr.forEach(function(c) {
    var el = document.createElement("div");
    el.style.backgroundColor = "rgb(" + c.join(", ") + ")";
    container.appendChild(el);
  })
}
function rgbToHsl(c) {
  var r = c[0] / 255,
      g = c[1] / 255,
      b = c[2] / 255;
  var max = Math.max(r, g, b),
      min = Math.min(r, g, b);
  var h, s, l = (max + min) / 2;

  if (max == min) {
    h = s = 0; // achromatic
  } else {
    var d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r:
        h = (g - b) / d + (g < b ? 6 : 0);
        break;
      case g:
        h = (b - r) / d + 2;
        break;
      case b:
        h = (r - g) / d + 4;
        break;
    }
    h /= 6;
  }
  return new Array(h * 360, s * 100, l * 100);
}

var rgbArr = [];
for (var i = 0; i < 100; ++i) {
  rgbArr.push([
    Math.floor(Math.random() * 256),
    Math.floor(Math.random() * 256),
    Math.floor(Math.random() * 256)
  ]);
}
display("#before", rgbArr);

var sortedRgbArr = rgbArr.map(function(c, i) {
  // Convert to HSL and keep track of original indices
  return {color: rgbToHsl(c), index: i};
}).sort(function(c1, c2) {
  // Sort by hue
  return c1.color[0] - c2.color[0];
}).map(function(data) {
  // Retrieve original RGB color
  return rgbArr[data.index];
});
display("#after", sortedRgbArr);
```

```
#before > div,
#after > div {
  width: 1%;
  height: 20px;
  display: inline-block;
}
```

```
Random colors: <div id="before"></div>
Same colors, sorted by hue: <div id="after"></div>
```

`sortedRgbArr`将包含`rgbArr`或多或少像可见光谱的颜色排序的 rgb 颜色。

问题是 HSL 频谱如下所示：

![HSL光谱](../Images/1a742c6b96cc78a47ac1d64a0eaa11d9.png)

您的光谱很奇怪，因为它没有所有颜色，例如粉红色。

我想那是因为自然界中不存在粉红色，它是光谱中相反极端颜色的组合。但是我们有 rgb 格式，所以你必须决定你想要它在哪里。

此外，您的光谱似乎是从较低的波长到较高的波长，而不是频率。但是，您的频谱与 HSL 的频谱相反。

如果您希望它像您的光谱一样，请替换`c1.color[0] - c2.color[0]`为。`c2.color[0] - c1.color[0]`

# java - Android Java Http Post到PHP服务器总是NULL？

> ID：11923663
> 
> 赞同：1
> 
> 时间：2012-08-12T16:10:16.253
> 
> 标签：java, php, android, http, post

我研究了所有的互联网，并找到了关于如何使用 http post 从 android 到 php 服务器的文章。我不是在寻找如何将数据从 android 传递到网站的示例。我正在寻找 POST 变量在 PHP 中始终为 NULL 的原因。是否有一些我需要在 PHP 上检查的设置（我已经检查了输出缓冲、最大帖子等）或为 HTTP POST 导入一个类，以便为 POST 变量正确工作。

下面的代码基本上将值插入到 mysql 数据库中。因为 POST 变量是空白的，所以它会插入空白行。这验证了它正在连接到我的服务器/数据库，但没有传递 POST 值。任何想法？=)

以下是代码：

```
 //Java Code-------------------------------------------------
    public static void executeHttpGet(Context context, String urlName){
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    String postURL = G.GetUrl(urlName);
    HttpPost httpPost = new HttpPost(postURL);
        httpPost.setHeader("Accept", "text/html,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
        httpPost.setHeader("Content-Type", "application/x-www-form-urlencoded");

    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try {
        nameValuePairs.add(new BasicNameValuePair("value1", "My Name"));
        nameValuePairs.add(new BasicNameValuePair("value2", "My Address"));
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httpPost);

    } catch (ClientProtocolException e) {

    } catch (IOException e) {

    }
} 

    //PHP code ----------------------------------------------------
    connectMySQL();

    mysql_query("
       INSERT INTO myhome(myname,myaddress,createdate)
       VALUES('{$_POST['value1']}','{$_POST['value2']}',NOW())
    ;")
    or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:24:33.540

您可以尝试在 SQL 中使用它们之前打印 $_POST['value1'] 和 $_POST['value2'] 并查看它们打印的内容吗？

为了简单起见，我建议您重写您的 PHP 代码：

```
connectMySQL();
$value1 = trim($_POST['value1']);
$value2 = trim($_POST['value2']);
if ($value1 != "" && $value2 != "") {
    mysql_query("
       INSERT INTO myhome(myname,myaddress,createdate)
       VALUES('".$value1."','".$value2."',NOW())
    ;")
} 
```

此外，一旦您确认它工作正常，我强烈建议您阅读有关 SQL 注入攻击的内容，并尝试使用绑定变量或参数化查询，而不是直接在 SQL 语句中使用请求参数值。

# ruby - 在另一个私有方法中使用 self.xxx() 调用私有方法 xxx 导致错误“调用私有方法 `xxx'”

> ID：11923672
> 
> 赞同：5
> 
> 时间：2012-08-12T16:11:16.753
> 
> 标签：ruby, private

我正在尝试获得良好的 Ruby 编码风格。为了防止意外调用同名的局部变量，我总是`self.`在适当的地方使用。但现在我偶然发现了这个：

```
class MyClass < ActiveRecord::Base
  before_validation :sanitize_user_data

  private

  def sanitize_user_data
    self.sanitize_name # with ".self" it's a problem, without it's not!
  end

  def sanitize_name
    unless self.name.nil?
      self.name.gsub!(/\s+/, ' ')
      self.name.strip!
    end
  end
end 
```

上面的代码导致错误

> 私有方法`sanitize_name`调用

但是当删除`self.`并仅使用时`sanitize_name`，它可以工作。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T16:21:39.347

发生这种情况是因为不能使用显式接收器调用私有方法，并且说是显式指定应该接收`self.sanitize_name`的对象（ ） ，而不是依赖于隐式接收器（也是）。`self``sanitize_name``self`

您无法避免这种情况，您要么需要在`sanitize_name`没有明确接收者的情况下调用普通旧的，要么执行`self.send(:sanitize_name)`. 我不确定总是明确指定`self`真的是“好风格”，但这是主观的。如果要确保调用的是方法而不是变量，请添加括号：

```
def a; "method"; end
a = "variable"
a() #=> "method"
a   #=> "variable" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T01:23:24.913

> 为什么？

根据定义。私有方法只能由无接收消息发送调用，这就是什么意思的*定义。*`private`

# c# - 使用 LINQ/Entity Framework 选择除一个属性之外的所有属性

> ID：11923674
> 
> 赞同：1
> 
> 时间：2012-08-12T16:11:29.493
> 
> 标签：c#, entity-framework, linq-to-entities

我正在使用实体框架作为项目的一部分，该项目应该允许学生和培训师上传和下载文件和目录。

为了显示文件，我调用了数据库：

```
public static ObjectSet<Document> doc = frmFocus._context.Documents; 
```

但这提供了所有属性，包括文件的实际数据。我想做的是只检索与列表视图相关的那些，直到选择了要下载的文件。

这可能吗？我一直找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:40:23.220

您可以将要加载的内容属性标记为延迟。

您可以使用设计器轻松实现此目的。

或者您当然可以通过将属性添加`IsDelayLoaded="true"`到列元素来直接编辑 XML。

# javascript - 如何在咖啡脚本，Rails 3 应用程序中识别提交按钮？

> ID：11923681
> 
> 赞同：2
> 
> 时间：2012-08-12T16:12:18.863
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

我使用本教程在 rails 3 中设置了一个多步骤表单：[http ://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

通过分别单击“继续”和“返回”提交按钮，我可以进入表单中的下一步和上一步。

我已经在表单的最后一页通过 Stripe 插入了支付表单，这需要在 coffeescript 中使用以下 jQuery：

**视频.js.coffee**

```
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  video.setupForm()

video =
  setupForm: ->
    $('#new_video').submit ->
      if $('#card_number').length
        video.processCard()
        false
      else
        true 
```

所以这就是我遇到的问题。我的表单最后一页的所有内容都有效，除了“返回”按钮，它的作用就像我点击“继续”一样。这显然是因为 jQuery 引用了表单上的所有“.submit”按钮。

我想为表单最后一页上的“继续”提交按钮分配一个 ID“#uploadsubmit”，以便我可以再次使用后退按钮。如何在 jQuery 咖啡脚本中引用这个 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:38:06.833

不是 jQuery 引用所有按钮，而是它绑定到`submit`表单的事件。如果您专门识别了继续按钮并在那里添加了您的卡片处理，您将错过由其他方式触发的表单提交（如按下“输入”按钮）。

您需要做的是确定单击了***哪个***提交按钮。有一些方法可以在没有 jQuery 的情况下做到这一点，但它们不是跨浏览器友好的。但是，您可以使用 jQuery 轻松地做到这一点，方法是标记被单击的按钮，例如添加一个类。

```
$('#new_video input:submit').click ->
  $(this).addClass('wasclicked')

$('#new_video').submit ->
  clickedBtn = $(this).find('.wasclicked')

  if clickedBtn.attr('name') !== 'back_button' && $('#card_number').length
    video.processCard()
    clickedBtn.removeClass('wasclicked')
    false
  else
    true 
```

因此，当单击按钮时，它会被标记为`.wasclicked`类。提交时，会找到按钮，如果不是后退按钮，您可以继续处理卡片。然后删除“被点击”按钮（以防信用卡处理失败等）。

您也可以只存储单击的名称并避免使用类，这样的事情应该可以工作：

```
clickedName = null

$('#new_video input:submit').click ->
  clickedName = $(this).attr('name')

$('#new_video').submit ->
  if clickedName !== 'back_button' && $('#card_number').length
    video.processCard()
    clickedName = null
    false
  else
    true 
```

# objective-c - 如何从目标 C 中的较大数组中选择较小的数组？

> ID：11923684
> 
> 赞同：0
> 
> 时间：2012-08-12T16:12:32.327
> 
> 标签：objective-c, ios

我需要从 75 个对象的 NSMutableArray 中挑选 32 个不同的对象。它可以是 1 到 32、2 到 33 或 10 到 42。我应该使用哪些函数来获取新数组？对不起，我是菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:18:29.000

如果您想要随机索引中的 N 个连续对象，请尝试以下操作：

```
NSArray *arrayWithNConsecutiveObjects(NSArray *arr, int n)
{
    int subIdx = arc4random_uniform((unsigned) (arr.count - n));

    return [arr subarrayWithRange:NSMakeRange(subIdx, n)];
} 
```

如果需要 32 个随机对象，可以扩展此方法对数组进行随机排序：

```
NSArray *arrayWithNObjects(NSArray *arr, int n)
{
    arr = [arr sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        // random sort
        return arc4random_uniform(3) - 1; // one of -1, 0, and 1
    }];

    int subIdx = arc4random_uniform((unsigned) (arr.count - n));

    return [arr subarrayWithRange:NSMakeRange(subIdx, n)];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T16:15:59.400

您可以使用继承自的适当方法`NSArray`来检索 32 个连续元素的切片：

```
int offset = 4;
NSArray *slice = [array subarrayWithRange:NSMakeRange(offset, offset+32)]; 
```

# scala - 如何在循环内强制重绘？

> ID：11923686
> 
> 赞同：1
> 
> 时间：2012-08-12T16:12:51.173
> 
> 标签：scala, processing

我在 Scala 中使用处理（尽管我认为这与我的问题并不真正相关）。

我正在一个循环中构建一个搜索树，该循环一直运行到找到有效路径为止。这可能需要几秒钟，我想在构建树时绘制树的图形表示，以便用户可以看到正在发生的事情。

我试图通过`redraw()`在循环内调用来解决这个问题，但这不起作用。我猜是因为`redraw()`不会强制重绘，而只会设置一个应该进行重绘的标志。

那么有没有办法可以强制重绘或者你通常会如何解决这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:15:29.860

@George Profenza 的评论是正确的。处理任务都发生在动画线程上。您在 draw() 中执行的任何任务都会锁定该线程，直到它们完成。如果您想在任务执行时更新屏幕，请在单独的线程上运行任务（超出处理 API 的范围，您必须为此使用 Java），或者将任务分解为段并让绘制() 方法在每个段的末尾返回，以便 PApplet 可以呈现到屏幕上。

# objective-c - 在 pushViewController 之前添加 SubView 不显示

> ID：11923694
> 
> 赞同：0
> 
> 时间：2012-08-12T16:14:07.637
> 
> 标签：objective-c, ios, subview, pushviewcontroller, addsubview

类似于这个问题：[添加子视图，被延迟？](https://stackoverflow.com/questions/2408012/adding-subview-gets-delayed) 但我不认为你可以在单独的线程中 pushViewController 所以这真的不可能吗？

这是我正在尝试做的事情：

我有一个 TableView，当按下一个单元格时，我想调用

```
[self.view addSubview:LoadingView] 
```

显示带有微调器的叠加层。然后我打电话

```
self.navigationController.navigationBar.hidden = NO;
[self.navigationController pushViewController:newGameViewController animated:YES]; 
```

但是，子视图仅显示一瞬间（在等待新视图控制器初始化的单元格选择发生后约 1-4 秒）。

有什么方法可以在选择单元格的那一刻出现某种加载指示器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:28:28.100

好的。那这个呢。在您的 didSelectRowAtIndexPath 中启动您的微调器（通过 addSubview ...）并开始从服务器加载您的内容。如果这完成了移除微调器并将您的新视图控制器推送到堆栈上。确保用户在此期间不能触摸任何其他单元格。顺便一提。从用户的角度来看，如果新控制器立即加载并显示一些等待消息，我会发现它更直观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:36:13.787

或者相反：`newGameViewController`显示微调器并开始在后台线程中从服务器加载数据。数据完成后，移除微调器并显示数据。这样，如果她不想等待，用户甚至可以返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T16:36:44.797

在推送 newGameViewController 之前不需要添加代码。

在newGameViewController的viewDidLoad中，编写显示spinner的代码。要获得更新的 UI，只需在调用 Web API 之前插入延迟。

在 GameViewController.m 中

```
-(void) viewDidLoad
{
    [self.view addSubview:LoadingView];
    [self performSelector:@selector(callWebAPI) afterDelay:0.1];
}

-(void) callWebAPI
{
    //Handle network activity here..
} 
```

# visual-studio-2010 - Visual Studio 远程上传和在其他计算机上调试

> ID：11923695
> 
> 赞同：3
> 
> 时间：2012-08-12T16:14:08.340
> 
> 标签：visual-studio-2010, remote-debugging

有没有办法在另一台计算机上远程上传、运行和调试应用程序？

我知道您可以将 Visual Studio 远程调试器附加到在远程计算机上运行的应用程序，但我正在寻找一种完全自动化的方法。

我正在构建一个家庭自动化系统，如果我能在 Visual Studio 中获得某种插件，让我在 VS 中按 F5，然后应用程序将正常构建并发送到我的服务器 PC 和在那里运行（附加远程调试）。

问题是我的笔记本电脑没有我的服务器 PC 拥有的所有硬件。我可以手动将它连接到我的笔记本电脑，但老实说，这样做 2 到 3 次之后会变得很无聊......此外，两台计算机之间的串行端口名称和其他一些硬件相关的东西是不同的。这意味着我对每个系统都有不同的配置。

最后但并非最不重要的一点，我几乎可以称其为最重要的事情哈哈：我不想躺在床上写代码，或者坐在客厅里吃披萨，同时调试我的家庭自动化。现在我被 3 根 USB 线、一根音频线和一根连接到电视的 HDMI 线绑在桌子上……这有点搞砸了。

**远程调试是存在的……我们已经上传文件至少10年了……我们以前有程序运行过其他程序……请告诉我有人发明了这个系统！**

顺便提一句。我可以通过 Teamviewer 与应用程序进行交互。我只是不想经历“F5 -> Teamviewer -> 在本地电脑上做事 -> 在远程电脑上做事 -> 测试软件 -> 查找错误 -> 重复”过程。

如果我可以登录并且程序已经启动并运行，那就太好了。此外，如果我可以让 STOP 按钮停止远程 PC 上的软件，那就太棒了，我什至可以考虑将六瓶装的啤酒送给让这成为可能的人哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:28:22.363

我不知道存在这样的产品，*但是*您可以做很多事情来使平凡的任务变得更加容易。

1）将您的开始操作从更改`Start Project`为`Start External Program`

![在此处输入图像描述](../Images/58cf7eb8097edf3b8381c3609eb7b4f7.png)

在`run_remote_process.bat`你添加脚本

a) 将您的二进制文件复制到您的远程/服务器 PC
b) 使用[remcom](http://sourceforge.net/projects/rce/)在远程计算机上启动您的进程

现在对于编码位：将其添加到您的 Main 输入方法中：

```
public static void Main(string[] args)
{
    if(args.Any(arg=>arg=="debug"))
    {
        while (!Debugger.IsAttached)
        {
            Thread.Sleep(100);
        }
        Debugger.Break(); 
    }
} 
```

*确保`debug`在启动过程时传递参数*。这将挂起您的进程，直到您附加到它为止。

所以现在剩下要做的就是使用 Visual Studio 附加到进程。您可以使用键盘快捷键快速执行此操作：

`Alt-D, P`（按回车）然后按您的进程的字母滚动到它（回车）

走开！

不理想，但比许多手动步骤要好得多。

# android - 如何处理 facebook asyncrunner 来更新 UI

> ID：11923696
> 
> 赞同：1
> 
> 时间：2012-08-12T16:14:09.893
> 
> 标签：android, multithreading, android-asynctask

我正在尝试在 android 中获取 facebook 用户的喜欢。我成功地使用图形 api 获取喜欢，但找不到如何启用通知机制以更新 UI 的方法。

```
public class A{
  // Holds all the facebook related information here.

    public void fetchLikes(){
      mAsyncRunner.request( "me/likes", new RequestListener() {

         @Override
         public void onComplete(String response, Object arg1) {

           //update the liked pages to database here.
         }

      }
    }

 }

public class B{

  public void afterLogin(){
    A a = new A();
    a.fetchLikes(); // Problem is after here.
    updateUI();

  }

   public void updateUI(){
    //updating UI here
   }
} 
```

由于 facebook 获取是在其自己的 facebook 异步运行器上完成的。我无法制定解决方案来将通知发送回呼叫者。在上述情况下，调用 a.fetchLikes() 后，它正在更新我的本地数据库。但在该过程完成之前 updateUI() 被调用并尝试更新我的活动。

请问各位大神，能不能提供一个解决这个问题的方法。流程完成后，我需要一些东西来通知我。

谢谢，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:37:00.363

看起来你想`updateUI()`从 的`onComplete()`处理程序中调用`AsyncRunner`，（假设`onComplete()`是从 UI 线程调用的。我不熟悉 Facebook 的`AsyncRunner`类。）

我将通过`fetchLikes()`获取一些接口来实现这一点，我可以从中传递对`updateUI()`.

```
public class A {
    public void fetchLikes(OnFetchLikesComplete callback){
        mAsyncRunner.request( "me/likes", new RequestListener() {

        @Override
        public void onComplete(String response, Object arg1) {
            callback.onComplete(response, arg1);
        }

    }

    public interface OnFetchLikesComplete {
        void onComplete(String response, Object arg1);
    }
} 
```

然后，您可以创建一个匿名内部类`B`来调用`updateUI()`.

```
public class B {
    public void afterLogin(){
        A a = new A();
        a.fetchLikes(new A.OnFetchLikesComplete() {
            public void onComplete(String response, Object arg1) {
                updateUI();
            }
        });
    }

    public void updateUI(){
        //updating UI here
    }
} 
```

# spring - 在 HQL 中指定字段列表似乎不起作用

> ID：11923699
> 
> 赞同：0
> 
> 时间：2012-08-12T16:14:38.693
> 
> 标签：spring, hibernate, jsp, oracle10g, hql

我在使用 Spring MVC 的 Hibernate 中有以下 HQL。

```
List<Colour>list=session.createQuery("from Colour order by colourId desc")
.setFirstResult((currentPage-1)*rowsPerPage)
.setMaxResults(rowsPerPage).list(); 
```

它工作并从 Oracle 10g 中的颜色表返回一个行列表（实际上是在我可以理解的颜色实体 (POJO) 上操作）。

如果我需要检索列表字段怎么办，我正在尝试以下方法。

```
List<Colour>list=session.createQuery("colourId, colourName, colourHex from Colour order by colourId desc")
.setFirstResult((currentPage-1)*rowsPerPage)
.setMaxResults(rowsPerPage).list(); 
```

它以一个例外结束

```
java.lang.IllegalArgumentException: node to traverse cannot be null! 
```

在一些文章中，提到以下版本的 HQL 应该（或可能）工作

```
List<Colour>list=session.createQuery("select colourId, colourName, colourHex from Colour order by colourId desc")
.setFirstResult((currentPage-1)*rowsPerPage)
.setMaxResults(rowsPerPage).list(); 
```

但不幸的是，它也对我不起作用。使用该方法执行本机 SQL 会起作用，但除非绝对必要，否则`createSQLQuery()`我想坚持使用 HQL 的方法。`createQuery()`如何在 HQL 中指定字段列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:20:18.203

我同意约克的评论。如果您在查询中选择属性，那么您不能要求`List<Colour>`从对 的调用中返回对象`.list()`。

相反，你应该这样做

```
 List<Object[]> rows = session.createQuery("select c.colourId, c.colourName, c.colourHex " +
        " from Colour c " + 
        " order by c.colourId desc").list(); 
```

然后遍历列表对象并实例化您的对象。或者你需要做的任何事情。

```
 for ( Object[] row : rows ) {
        Long colourId = (Long)row[0];
        // ... etc
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:48:11.077

为什么不尝试创建地图？像这样的东西：

```
SELECT NEW MAP( colour.colourId AS id
              , colour.colourName AS name ...) 
  FROM Colour colour 
  ORDER BY colour.colourId 
```

我使用颜色“颜色”的别名，因此休眠知道我引用的属性来自哪个实体，我暗示所有这些属性都来自同一个实体，如果不是，请检查您的引用！

# android - Android API8 setDisplayOrientation 完全不影响

> ID：11923704
> 
> 赞同：5
> 
> 时间：2012-08-12T16:15:11.787
> 
> 标签：android, mediarecorder

我**只使用视频**。没有图片。请注意，**setDisplayOrientation**仅在预览期间影响正确的显示方向。但是，如果要播放以横向模式或纵向模式捕获的任何视频，则**始终处于横向模式**。

我在 AndroidManifest.xml 中设置

但用于在 4.0.1 设备中调试。也许这是一个问题。但是我注意到默认的相机应用程序可以正常工作并以纵向模式拍摄纵向电影。

我错过了什么？...

**CameraRecorder.java

```
public class CameraRecorder extends Activity {

private CameraPreview mPreview;
private Camera mCamera;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera_surface);

    // Create an instance of Camera
    mCamera = getCameraInstance();
    if (mCamera == null) {
        Log.e(TAG, "Camera is not available");
        finish();
    }

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);

    mPreview.setOnClickListener(startStopListener);
}
private void changeOrientation(int what) {
    if (what != orientation) {
        setRequestedOrientation(orientation = what);
    }
}
OnClickListener startStopListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (isRecording) {
                    mMediaRecorder.stop(); // stop the recording
            releaseMediaRecorder(); // release the MediaRecorder object
            mCamera.lock(); // take camera access back from MediaRecorder

            // inform the user that recording has stopped
            setCaptureButtonText("Capture");
            isRecording = false;

        } else {
            // initialize video camera
            if (prepareVideoRecorder()) {
                // Camera is available and unlocked, MediaRecorder is
                // prepared, now you can start recording
                mMediaRecorder.start();

                // inform the user that recording has started
                isRecording = true;
            } else {
                // prepare didn't work, release the camera
                releaseMediaRecorder();
            }
        }

    }
};

File tempFile;

@Override
protected void onPause() {
    super.onPause();
    releaseMediaRecorder(); // if you are using MediaRecorder, release it first
    releaseCamera(); // release the camera immediately on pause event
}

/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance() {
    Camera c = null;
        try {
            c = Camera.open(); // attempt to get a Camera instance

        } catch (Exception e) {
            // Camera is not available (in use or does not exist)

            Log.d(TAG, "Fail to connect to camera service. Is it locked?");
        }
    }
    return c; // returns null if camera is unavailable
}

private boolean prepareVideoRecorder() {
    if (mCamera == null)
        mCamera = getCameraInstance();
    if (mMediaRecorder == null)
        mMediaRecorder = new MediaRecorder();

    Camera.Parameters p = mCamera.getParameters();

    // Step 1: Unlock and set camera to MediaRecorder
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    // Step 2: Set sources
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
    CamcorderProfile profile = mPreview.getProfile();// CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);

    Size previewSize = mPreview.getPreviewSize();

    if (previewSize != null) {
        profile.videoFrameWidth = previewSize.width;
        profile.videoFrameHeight = previewSize.height;
    }
    mMediaRecorder.setProfile(profile);

    // Step 4: Set output file
    mMediaRecorder.setOutputFile(MediaFile.getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
}

private void releaseMediaRecorder() {
    if (mMediaRecorder != null) {
        mMediaRecorder.reset(); // clear recorder configuration
        mMediaRecorder.release(); // release the recorder object
        mMediaRecorder = null;
        mCamera.lock(); // lock camera for later use
    }
}

private void releaseCamera() {
    if (mPreview != null) {
        mPreview.surfaceDestroyed(null);
    }
    if (mCamera != null) {
        mCamera.release(); // release the camera for other applications
        mCamera = null;
        Log.d(TAG, "Camera released");
    }
}
} 
```

**CameraPreview.java**

```
/** A basic Camera preview class */
public class CameraPreview extends ViewGroup implements SurfaceHolder.Callback {
private SurfaceHolder mHolder;
private Camera mCamera;
private SurfaceView mSurfaceView;
private Context mContext;

private final String TAG = "CameraPreview";

public CameraPreview(Context context, Camera camera) {
    super(context);
    mContext = context;

    mCamera = camera;

    setCamera(mCamera);

    mSurfaceView = new SurfaceView(context);
    addView(mSurfaceView, 0);
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    mHolder.setKeepScreenOn(true);

}

public SurfaceHolder getHolder() {
    return mSurfaceView.getHolder();
}

private Size mPreviewSize;
private List<Size> mSupportedPreviewSizes;
private List<String> mSupportedFlashModes;

public Camera getCamera() {
    return mCamera;
}

private CamcorderProfile mProfile;

public CamcorderProfile getProfile() {
    return mProfile;
}

public void setCamera(Camera camera) {
    mCamera = camera;
    if (mCamera != null) {
        mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
        mSupportedFlashModes = mCamera.getParameters().getSupportedFlashModes();

                mProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);

        // Set the camera to Auto Flash mode.
        if (mSupportedFlashModes != null && mSupportedFlashModes.contains(Camera.Parameters.FLASH_MODE_AUTO)) {
            Camera.Parameters parameters = mCamera.getParameters();
            parameters.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
            mCamera.setParameters(parameters);
        }
    }
    requestLayout();
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        if (mCamera != null) {
            mCamera.setPreviewDisplay(holder);
            // mCamera.startPreview();
        }
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
    final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);

    if (mSupportedPreviewSizes != null) {
        mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, mProfile.videoFrameWidth, mProfile.videoFrameHeight);
    }
    setMeasuredDimension(width, height);
}

@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    if (changed) {
        final View cameraView = getChildAt(0);

        final int width = right - left;
        final int height = bottom - top;

        Camera.Parameters p = mCamera.getParameters();

        @SuppressWarnings("unused")
        int previewWidth = width;
        @SuppressWarnings("unused")
        int previewHeight = height;
        if (mPreviewSize != null) {
            Display display = ((WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

            switch (display.getRotation()) {
            case Surface.ROTATION_0:
                mCamera.setDisplayOrientation(90);
                break;
            case Surface.ROTATION_90:
            case Surface.ROTATION_180:
                break;
            case Surface.ROTATION_270:
                mCamera.setDisplayOrientation(180);
                break;
            }
        }

        cameraView.layout(0, 0, width, height);

    }
}

public void setSupportedPreviewSizes(List<Size> supportedPreviewSizes) {
    mSupportedPreviewSizes = supportedPreviewSizes;
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    try {
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            // mCamera.release();
            mCamera = null;

            Log.d(TAG, "Preview destroyed");
        }
    } catch (Exception e) {
        Log.e(TAG, "Camera release failure.");
    }

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.

    if (mHolder.getSurface() == null) {
        // preview surface does not exist
        return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e) {
        // ignore: tried to stop a non-existent preview
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here

    Camera.Parameters parameters = mCamera.getParameters();
    Size previewSize = getPreviewSize();
    if (previewSize != null)
        parameters.setPreviewSize(previewSize.width, previewSize.height);

    mCamera.setParameters(parameters);

    // start preview with new settings
    try {
        previewCamera();

    } catch (Exception e) {
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
}

public Size getPreviewSize() {
    return mPreviewSize;
}

public static Size getOptimalPreviewSize(List<Size> sizes, int width, int height) {
    double aspectTolerance = 0.05;
    double targetRatio = (double) width / height;
    if (sizes == null) {
        return null;
    }
    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;
    int targetHeight = height;
    // Try to find an size match aspect ratio and size
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > aspectTolerance)
            continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }
    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }
    return optimalSize;

}

public void previewCamera() {
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();
    } catch (Exception e) {
        Log.d(TAG, "Cannot start preview.", e);
    }
}

} 
```

**清单.xml**

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application
    android:name=".client.andi"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".activity.CameraRecorder"
        android:label="@string/title_activity_main"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

** 布局.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="bottom"
android:orientation="vertical" >

<FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</FrameLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:10:34.427

您应该将 android:screenOrientation="landscape" 更改为 android:screenOrientation="portrait"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:58:55.040

不确定您是否遇到与我完全相同的问题。

我以前也遇到过这个问题。我发现您可以使用函数[setOrientationHint](http://developer.android.com/reference/android/media/MediaRecorder.html#setOrientationHint%28int%29) (API 9)。在调用 MediaRecorder.prepare() 之前调用此函数。您可以设置输出视频的方向度。

希望对你有帮助，祝你好运！

# lambda - 计算序言列表中特定元素的数量

> ID：11923708
> 
> 赞同：4
> 
> 时间：2012-08-12T16:15:32.270
> 
> 标签：lambda, prolog, logic

我正在尝试计算一个元素在列表中出现的次数，到目前为止我已经想出了

```
rate(X,[H|T],N):-
  X == H,
  N is N+1,
  rate(X,T,N).
rate(X,[_|T],N) :-
  rate(X,T,N).  
rate(_,[],N) :-
  N is 0. 
```

我已经介绍了何时找到匹配项、何时没有匹配项以及何时到达列表末尾。但是当我测试时我得到

```
43 ?- rate(4,[4,2,3,4,4,2],X).
ERROR: is/2: Arguments are not sufficiently instantiated
Exception: (6) frequency(4, [4, 2, 3, 4, 4, 2], _G393) ? 
```

我到底错过了什么论点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:42:51.610

当且仅当 X 是数字时，您可以使用`is/2`（如 in ）。如果 X 是自由变量，`N is X`则不能使用。`is/2`在您的第一个子句中，您有`N is N+1`：这很糟糕，因为 N 是一个自由变量（此时它没有值，N+1 也是如此）。

还有一个错误。在：

```
rate(X,[_|T],N) :-
  rate(X,T,N). 
```

因为只有当 X 不是列表中的第一个元素时才使用它，所以您应该检查它是否为真！这是代码：

```
count(_, [], 0) :- !. /* empty list, base case */

count(X, [X|T], N) :- /* if X is in the head of the list */
    count(X, T, N2), /* count on the tail (let this N2) */
    N is N2 + 1\.     /* and N is N2 + 1  */

count(X, [Y|T], N) :- 
    X \= Y,          /* if X is not in the head */
    count(X, T, N).  /* just count the rest */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T16:42:42.953

您需要使您的子句互斥，第二个子句将在第一个子句的任何地方成功。

至于你的错误，它是关于信息流的。您需要像这样交换第一个子句中的行：

```
rate(X,[H|T],N):-
  X == H,
  rate(X,T,N1),
  N is N1+1. 
```

此更改将使您的谓词*不是*尾递归。要成为尾递归，它需要将信息传递*到*调用链中，而不是像现在这样在向上的过程中接收它：

```
rate(X,[H|T],N):-
  X == H,
  N1 is N+1,
  rate(X,T,N1). 
```

现在您看到您没有在此处收到最终值，而是*指定*了初始值。当我们达到基本情况时，我们得到了结果：

```
rate(X, [], N). 
```

这`N`是结果。怎么找回来？当我们到达底部时，使用附加参数，一个未实例化的变量，与这个结果统一：

```
rate(X, [], N, V) :- V is N. 
```

现在递归子句必须适应这个变量，将其沿调用链*原封不动地传递。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:36:36.763

如果你喜欢函数式风格，你可以用 SWI Prolog 来写：

```
:- use_module(library(lambda)).

rate(X,L,N) :-
    foldl(\Y^V0^V1^((X = Y->V1 is V0+1; V1 = V0)), L, 0, N). 
```

# java - Android中的字节数据类型内存大小

> ID：11923711
> 
> 赞同：2
> 
> 时间：2012-08-12T16:15:53.907
> 
> 标签：java, android, memory, primitive

我读到与 JVM 中的整数数据类型相比，字节数据类型占用的内存量更小。但是，我很好奇上面的陈述是否也适用于 Android Dalvik VM。在Android中使用字节而不是整数会提高效率是否正确？

仅供参考，目前我正在使用一个存储十万个 int 的数组，但整数仅在 0-10 之间波动。因此，如果它可以提高我的程序的性能，我正在考虑将其更改为字节。

如果我的问题听起来很愚蠢，我很抱歉，因为我是 Java 新手。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:21:24.960

安卓开发者参考：

*   [字节](http://developer.android.com/reference/java/lang/Byte.html)
*   [整数](http://developer.android.com/reference/java/lang/Integer.html)

您可以通过上述文档了解字节和整数。从上面链接中给出的最大值和最小值来看，似乎 byte 占用了 1 个字节，而 int 占用了 4 个字节的内存。byte 肯定会减少内存使用量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:23:56.927

除了上面的答案，我想指出这个问题以供补充阅读：

[内存中字节的大小 - Java](https://stackoverflow.com/questions/229886/size-of-a-byte-in-memory-java?rq=1)

# vb.net - 将视图中的 RAZOR 编辑框更改为下拉框

> ID：11923714
> 
> 赞同：1
> 
> 时间：2012-08-12T16:16:10.453
> 
> 标签：vb.net, asp.net-mvc-3, razor

我正在尝试将以下内容更改为下拉框，但收效甚微：

```
@Html.EditorFor(Function(model) model.BillStatus) 
```

我已经定义了一个字符串类型列表（其中包含所有两个变量 Active 和 Inactive），但是如何将其设置为属于我的模型的 BillStatus，如上所述？这是我模型的脚手架创建视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:18:29.750

Html.EditorFor 的默认实现不支持下拉列表。

相反，使用 Html.DropDownListFor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:19:52.270

您可以使用`DropDownList`助手：

```
@Html.DropDownList("Status", Model.BillStatus.Select(Function(x) New SelectListItem() With { .Text = x, .Value = x })) 
```

如果您的视图模型已经有一个属性来保存所选值（字符串类型），您可以使用强类型`DropDownListFor`帮助器

```
@Html.DropDownList(Function(model) model.Status, Model.BillStatus.Select(Function(x) New SelectListItem() With { .Text = x, .Value = x })) 
```

# ajax - 当我使用 Ajax 加载列表时，iScroll 停止工作

> ID：11923717
> 
> 赞同：0
> 
> 时间：2012-08-12T16:16:46.880
> 
> 标签：ajax, ipad, jquery, iscroll4, iscroll

我设置了一个 iScroll 列表，它在硬编码时工作得非常好。

但是当我使用 jQuery-Ajax 加载完全相同的列表时，它会粘在顶部，不会向下滚动到底部。

```
$('#list1').load('lists/list1-1.html'); 
```

有没有人遇到过类似的问题或知道解决方案。

我使用 Web Inspector 查看 DOM，列表的代码在这两种情况下完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:43:29.480

`refresh()`加载列表后是否调用了方法？当您修改可滚动内容的尺寸时，您必须调用该`refresh()`方法，例如通过将项目添加到列表中。[请参阅iScroll 文档](http://cubiq.org/iscroll-4)中的“掌握 refresh() 方法”部分。

# iphone - MKMapView 使用的投影是什么？

> ID：11923720
> 
> 赞同：1
> 
> 时间：2012-08-12T16:17:05.643
> 
> 标签：iphone, ios, mkmapview, mapkit

我在 SQLite 数据库中存储了一些点特征，以便在 MKMapView 中显示，我想在地图的投影中而不是在纬度/经度中预先计算和存储坐标（出于索引/性能原因）。但是，我在外部（在 Python 中）创建这个数据库，所以我不能简单地使用 MKMapPointForCoordinate() 函数。MKMapView 使用的投影是什么？该文档指出它是一个 [墨卡托投影](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html)，但它似乎不是我预期的[网络墨卡托投影。](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)如何从 Lat/Lon 计算 X/Y 坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:23:36.290

就我个人而言，我觉得你从错误的角度解决了这个问题——你说因为“索引/性能原因”不想存储纬度/经度坐标。这些原因是什么？

在数据库中存储、索引和查询地理坐标并不是一个不寻常的问题。它们只是两个十进制数字，使索引和查询非常简单。

Apple 还告诉您只保存坐标而不是`MKMapPoints`在他们自己的文档中：

> 将地图相关数据保存到文件时，应始终保存坐标值（纬度和经度）而不是地图点。

也许您可以分享一些您在将坐标保存到数据库时遇到的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:50:35.233

我很确定它是 webmercator，因为我制作的覆盖图块在那个投影中并且它们适合。但就像其他评论者所说的那样，建议您将它们存储在纬度/经度中。如果您想在网格 lat/long 中查询结果，请提供一个很好的起点。当您离开赤道时，网格不是方形的，而是矩形的。

# javascript - jQuery 代码在 Firefox 中有效，但在 IE 中失败

> ID：11923725
> 
> 赞同：0
> 
> 时间：2012-08-12T16:17:33.950
> 
> 标签：javascript, jquery, jquery-cookie

我有一个我似乎无法识别的问题，代码在 Firefox 和 Chrome 中运行良好，但在 IE 中失败。

我有以下元素的序列：

```
<tbody id="tbod161-1__" isloaded="true" style="display: none;"></tbody>
<tbody id="tbod162-2__" isloaded="true"></tbody> 
```

我正在尝试创建一个 jQuery cookie，它存储元素是否可见。

```
function RememberClickedState() {
$('.ms-listviewtable tbody[id^="tbod"]').each(function(){
    tid = $(this).attr('id');
    var tvisible = ($(this).attr('style') == undefined || $(this).attr('style').indexOf('display: none;') == -1);
    var strVisible;
    if( tvisible == true)
    {
        strVisible = "true";
    }
    if( tvisible == false)
    {
        strVisible = "false";
    }
    items += tid+':'+strVisible+';'
})
$.cookie("itemListState", items);
} 
```

当我检索值时：

```
string = $.cookie("itemListState");
alert(string); 
```

...在 IE 中，所有 ID 都设置为“true”，这意味着这些值被错误地写入了 cookie。但是，此代码在某些 ID 正确设置为 false 的 Ff / Chrome 中运行时可以完美运行。

我错过了什么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:23:30.600

改变：

```
var tvisible = ($(this).attr('style') == undefined || $(this).attr('style').indexOf('display: none;') == -1); 
```

进入：

```
var tvisible = $(this).is(':visible'); 
```

我已经改进了你的代码：

```
function RememberClickedState() {
    $('.ms-listviewtable tbody[id^="tbod"]').each(function(){
        var tvisible = $(this).is(':visible');
        items += $(this).attr('id')+':'+String(tvisible);
    });
    $.cookie("itemListState", items.join('; '));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:25:23.627

您可以随时尝试：

```
function RememberClickedState() {
    var items = '';
    $('.ms-listviewtable tbody[id^="tbod"]').each(function(i, e) {
        items += (e.id + ':' + (e.style.display == 'none'));
    });
    $.cookie("itemListState", items);
}​ 
```

[**小提琴**](http://jsfiddle.net/tapHW/2/)

值之间没有分隔符，我可能会通过这样做添加一个逗号：

```
function RememberClickedState() {
    var items = [];
    $('.ms-listviewtable tbody[id^="tbod"]').each(function(i, e) {
        items.push(e.id + ':' + (e.style.display == 'none'));
    });
    $.cookie("itemListState", items.join(', '));
} 
```

[**小提琴**](http://jsfiddle.net/tapHW/3/)

# linux - 在 HA 上运行管家脚本（主动/被动）

> ID：11923726
> 
> 赞同：0
> 
> 时间：2012-08-12T16:17:38.877
> 
> 标签：linux, shell, scripting, high-availability

我有以下情况。以前我只有一台服务器运行该应用程序，并且它已经`housekeeper script`运行以存档`log`文件。现在我们已经实现`HA`了（高可用性），我想知道在这种情况下，`script`应该如何识别当前正在运行的服务器然后`script`相应地运行，`HA`是在`active/passive`模式下实现的。支持 HA 的物理服务器有 2 台，如果一台关闭，另一台将处于活动状态。

# php - Zend Framework 2 中的 Doctrine 默认注释命名空间

> ID：11923729
> 
> 赞同：0
> 
> 时间：2012-08-12T16:17:50.110
> 
> 标签：php, doctrine-orm, zend-framework2

我正在尝试着手 ZF2，因为他们已经转为 RC 状态。一切都很顺利，但我想为注释设置一个默认命名空间，这样我就可以使用`@Table`而不是`@Doctrine\ORM\Mapping\Table`or `@ORM\Table`。

从我[在 Github 上的自述](https://github.com/doctrine/DoctrineORMModule)文件中阅读 Doctrine 模块的文档可以看出，没有选项可以让您为阅读器指定默认命名空间，甚至指定您自己的阅读器类。有谁知道此时是否缺少此选项？还是有什么我没看到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:16:41.083

正如@Sam 所说，use 语句是处理注释命名空间的正常方式。

如果你想使用不同的注解阅读器，然后写一个新`DriverFactory`的来替换 DoctrineModule 附带的那个，并覆盖模块配置以便使用你的新工厂。（如果您认为您的新工厂可能对其他人有用，请随时对 DoctrineModule 进行 PR 并分享）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:45:21.510

据我所知，注释是由您处理类的使用语句的方式定义的。目前，您这样`use Doctrine\ORM\Mapping as ORM`做了注释抓取`@ORM`，并且所有过去的内容都被简单地连接起来。

所以`@ORM\Table`变成`Doctrime\ORM\Mapping\Table`

我的猜测——但我还没有测试过——如果你通过`use Doctrine\ORM\Mapping\Table`它包含 Table 类`@Table`就可以了。不过只是一个谦虚的猜测。正如您所指出的，ZF2 实现的资源并不多，但是生活质量功能总是排在最后;）

# c++ - 如何定义/使用 CBaseVideoRenderer-constructor

> ID：11923730
> 
> 赞同：1
> 
> 时间：2012-08-12T16:18:06.537
> 
> 标签：c++, directx, directshow, c++builder

我想使用 C++ 类 CBaseVideoRenderer。我需要包含哪个文件来获取它的构造函数？

我已经包含了 renbase.h，但只有声明。我已经包含了 strmbase.h 和有关此类的任何其他错误都消失了，但缺少构造函数的错误。renbase.cpp 似乎有一个构造函数，但我不能只包含它而没有错误。

那么，你知道我需要哪些文件吗？我使用来自 XE2 16 的 embarcadero 的 C++-Builder。

**编辑：**我想使用这个类：

```
CBitmapRenderer::CBitmapRenderer(
    TCHAR *pName,
    LPUNKNOWN pUnk,
    HRESULT *phr
)
    : CBaseVideoRenderer(CLSID_BitmapRenderer,pName,pUnk,phr)
    , m_InputPin(NAME("Video Pin"),this,&m_InterfaceLock,phr,L"Input")
{... 
```

使用此代码：

```
CBitmapRenderer *m_pSnapshotter = new CBitmapRenderer( _T("Bitmap renderer"), NULL, &hr ); 
```

这会导致链接错误：

```
[ILINK32 Fehler] Error: Nicht auflösbares externes 'CBaseVideoRenderer::CBaseVideoRenderer(_GUID&, wchar_t *, IUnknown *, long *)' referenziert von C:\USERS\JULIAN\DESKTOP\PROGRAMM\WIN32\DEBUG\TESTRAUSCHEN.OBJ 
```

我知道来自构造函数的缺失定义。

**编辑2：**

我现在已将所有文件包含在 baseClasses-directory 中，并且编译成功（没有错误）。但是，当我尝试运行应用程序时，我收到消息“strmbase.dll”丢失。再次安装此程序”但我从来没有 strmbasd.dll。我有一个 strmbasd.lib。这是在调试模式下尝试使用 Visual Studio 编译基类项目时的结果。

有谁知道在哪里可以得到这个 dll 或者如何使用 lib？

问候，

朱利安

# mysql - 如果语句总是使用其他方法？

> ID：11923737
> 
> 赞同：1
> 
> 时间：2012-08-12T16:19:25.637
> 
> 标签：mysql, ios, if-statement

以下代码几乎可以完美运行。我正在使用中间的 php 从 Xcode 连接到我的本地主机上的 mysql 服务器。这最终将是一个登录系统：

```
NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/Check.php?user=%@&pass=%@",txtName.text,passName.text];

// to execute php code
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:strURL]];
NSError *e;
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&e];

// to receive the returned value
NSString *strResult = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]autorelease];

NSLog(@"%@",strResult);

NSString *success = @"Success";

if ([strResult isEqualToString:success]) {
NSLog(@"I realize that the two strings are the same");
}

else {
NSLog(@"The two strings are not the same");
} 
```

strResult 在调试器中打印出以下项目，我告诉 php 文件在不同条件下回显给我，（如果用户名和密码正确或错误）

但是，由于某种原因，代码的 if 语句部分总是转到 else 方法，即使在输出中它明确指出字符串 strResult 包含单词“Success”。

这太烦人了，因为**我**可以看到两个字符串（strResult 和 success）彼此相等，但由于某种原因**Xcode**不能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:40:37.607

您`strResult`的末尾可能包含空格。尝试像这样记录以获取字符串中字符的十六进制转储：

```
NSLog(@"strResult = %@", [strResult dataUsingEncoding:NSUTF8StringEncoding]);
NSLog(@"success = %@", [success dataUsingEncoding:NSUTF8StringEncoding]); 
```

**或者**

```
NSLog(@"%u",strResult.length); 
```

如果是空格问题，您可以使用此处的答案对其进行修剪：[在 Cocoa Touch 中从字符串中修剪空格的最佳方法是什么？](https://stackoverflow.com/questions/474270/whats-the-best-way-to-trim-whitespace-from-a-string-in-cocoa-touch)

# asp.net-mvc - 在 MVC 中使用 ItextSharp 在 PDF 文档内的每个页面上显示列标题

> ID：11923738
> 
> 赞同：1
> 
> 时间：2012-08-12T16:19:26.167
> 
> 标签：asp.net-mvc, razor, itextsharp

我一直在使用本指南创建 PDF 报告： http: [//www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)

基本上我有一个表单，一旦提交，它会创建并打开一个 PDF 报告，该报告实际上是一个视图，例如这个：

```
@using MvcReportGeneratorDemo.Models
@model CustomerList
<br />
<table cellpadding="3" cellspacing="3">
    `<tr border="1" bgcolor="#777777" color="#ffffff">`
       <td>Name</td>
        <td>Address</td>
        <td>Place</td>
    </tr>
    @foreach (Customer customer in Model)
    {
        <tr border="1">
            <td>@customer.Name</td>
            <td>@customer.Address</td>
            <td>@customer.Place</td>
        </tr>
    }
</table> 
```

我希望 PDF 中的每一页都有列标题，而不仅仅是第一个。尝试了谷歌，但没有发现任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:10:58.717

您可以在服务器端使用以下代码来解决您的问题。

```
using (StringReader sr = new StringReader(html))
        {

            foreach (IElement el in iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(sr, null))
            {

                if (el is PdfPTable)
                {
                    ((PdfPTable)el).HeaderRows = 1;
                }
                doc.Add(el);
            }
        } 
```

# c++ - 关于 c++ 中的委托

> ID：11923743
> 
> 赞同：0
> 
> 时间：2012-08-12T16:20:08.133
> 
> 标签：c++

如何将方法的参数指定为实现特定接口的任何类？

这在目标 c 中相当常见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:29:01.400

标准 C++ 中没有接口，但我们可以很容易地模拟它们：

```
class IComparable
{
protected:
    IComparable() {};
public:
    virtual ~IComparable() = 0 {};
    virtual int Compare(const IComparable& other) const = 0;
}; 
```

我们无法实例化这个类。它实际上是一个接口。然后，您可以从中派生具体类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:24:11.530

如果您有一个名为 的“接口”或抽象基类`Base`，那么可以接受任何实现该接口的对象的函数如下所示：

```
void fn(Base& obj) {
    /*use Base functions on obj...*/
} 
```

# cmake - 在 Windows 上使用 CMake 构建 YAML_CPP 时出错

> ID：11923749
> 
> 赞同：1
> 
> 时间：2012-08-12T16:21:11.237
> 
> 标签：cmake, mingw, yaml-cpp

当我尝试在 Windows 上构建 yaml-cpp 时，我不断收到错误消息。使用 CMake gui 应用程序，我正确选择了 build- 和 sourcepath，但是一旦我点击“配置”按钮，就会抛出以下错误：

```
CMake Error: CMake was unable to find a build program corresponding to "**MinGW Makefiles**".  **CMAKE_MAKE_PROGRAM** is not set.  You probably need to select a different build tool.
CMake Error: CMake was unable to find a build program corresponding to "MinGW Makefiles".  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_C_COMPILER_ENV_VAR
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_C_COMPILER
CMake Error: Could not find cmake module file:C:/Users/Robert/Programs/Lib/yaml-cpp/build/CMakeFiles/CMakeCCompiler.cmake
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_CXX_COMPILER_ENV_VAR
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_CXX_COMPILER
CMake Error: Could not find cmake module file:C:/Users/Robert/Programs/Lib/yaml-cpp/build/CMakeFiles/CMakeCXXCompiler.cmake
CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage
CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
Configuring incomplete, errors occurred! 
```

我知道这与所选的生成器有关，我选择**了 CodeBlocks - MinGW Makefiles**。但是我已经正确安装了 CodeBlocks。那么有没有办法手动设置**CMAKE_MAKE_PROGRAM**变量？

# delphi - 失去焦点时保持 InPlaceEditor 突出显示

> ID：11923754
> 
> 赞同：4
> 
> 时间：2012-08-12T16:21:48.147
> 
> 标签：delphi

当网格失去焦点到另一个非模态表单时，Delphi XE2 中是否有办法在 StringGrid 中保留 InPlaceEditor 的突出显示？

我当前的 StringGrid 选项是：

![在此处输入图像描述](../Images/a4c644fda09b300454e4bcc39574aac9.png)

如果没有，我曾希望在失去焦点后使用下面的代码来保留当前单元格的高亮显示，但是当单元格不再是当前单元格时，我会遇到一些问题。

我是否需要在下面的代码中添加“else”才能将颜色更改回未选中单元格的原始颜色？有什么注意事项吗？

```
 procedure TForm1.sgMultiDrawCell(Sender: TObject; ACol, ARow: Integer; Rect: TRect; State: TGridDrawState);    
  begin
    if (ACol = sgMulti.Col) and (ARow = sgMulti.Row) then
    begin
      sgMulti.Canvas.Brush.Color := clYellow;
      sgMulti.Canvas.FillRect(Rect);  
      sgMulti.Canvas.TextRect(Rect, Rect.Left, Rect.Top, sgMulti.Cells[ACol, ARow]); 
      if gdFocused in State then
        sgMulti.Canvas.DrawFocusRect(Rect); user
    end;
  end; { sgMultiDrawCell} 
```

编辑：下面的屏幕截图阐明了它今天的表现。我希望当前单元格在失去焦点时比底部屏幕截图更清晰

![在此处输入图像描述](../Images/593c392724d51f038037a8836f562a47.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T18:41:09.117

如果要保持`goAlwaysShowEditor`启用该选项并仅突出显示始终显示的编辑器，则需要访问该`InplaceEditor`属性。这需要子类化您的字符串网格类并更改就地编辑器的颜色，默认情况下是`TCustomMaskEdit`控件类。
在此代码中显示了如何更改就地编辑器的颜色，具体取决于字符串网格何时
聚焦或不聚焦：

```
type
  TStringGrid = class(Grids.TStringGrid)
  private
    procedure CMEnter(var Message: TCMEnter); message CM_ENTER;
    procedure CMExit(var Message: TCMExit); message CM_EXIT;
  protected
    function CreateEditor: TInplaceEdit; override;
  end;

implementation

{ TStringGrid }

procedure TStringGrid.CMEnter(var Message: TCMEnter);
begin
  inherited;
  if Assigned(InplaceEditor) then
    TMaskEdit(InplaceEditor).Color := $0000FFBF;
end;

procedure TStringGrid.CMExit(var Message: TCMExit);
begin
  inherited;
  if Assigned(InplaceEditor) then
    TMaskEdit(InplaceEditor).Color := $0000A6FF;
end;

function TStringGrid.CreateEditor: TInplaceEdit;
begin
  Result := inherited;
  if Focused then
    TMaskEdit(Result).Color := $0000FFBF
  else
    TMaskEdit(Result).Color := $0000A6FF;
end; 
```

以及聚焦和不聚焦网格状态的结果：

[![在此处输入图像描述](../Images/f47a8222895619fd2ef30cd088adf24a.png)](https://i.stack.imgur.com/bNQr1.png)

# ruby-on-rails - 重命名表后的问题

> ID：11923758
> 
> 赞同：0
> 
> 时间：2012-08-12T16:22:39.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我在rails中更改了我的表名，之后我收到了这个错误：

```
PG::Error: ERROR:  relation "old_table_name" does not exist
LINE 4:              WHERE a.attrelid = '"old_table_name"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"old_table_name"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

我应该怎么做才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:26:46.940

您需要确保您的模型、控制器、关联等也得到纠正。该错误表明您的 Rails 应用程序的一部分仍在使用旧名称。

这个错误看起来像是来自 Rails 日志。如果您在前面几行，`PG::Error`它应该指出进行此引用的代码部分，因此应该告诉您需要在哪里进行更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:12:18.710

由于错误明确指的是 a `relation`，我猜你在某个地方仍然有 a

```
has_many :old_names 
```

或者

```
 belongs_to :old_name 
```

另外：您是否更改了任何外键以匹配新名称？例如`new_table_name_id`，而不是`old_table_name_id`？

希望这可以帮助。

# sql - SQL Server：创建错误如何用表名写入数据库名

> ID：11923759
> 
> 赞同：0
> 
> 时间：2012-08-12T16:22:50.413
> 
> 标签：sql, sql-server-2008

```
CREATE DATABASE agom COLLATE Arabic_CI_AS
CREATE TABLE Branches
(
ID INT PRIMARY KEY NOT NULL IDENTITY,
NAME VARCHAR(255) NOT NULL
)

CREATE TABLE agom.Brands
(
ID INT PRIMARY KEY NOT NULL IDENTITY,
NAME VARCHAR(255) NOT NULL
) 

CREATE TABLE agom.Work_Order
(
NUMBER INT NOT NULL,
BRANCHID INT NOT NULL,
BRANDID INT NOT NULL,
WDATE DATE NOT NULL,
REPAIRSTATUS VARCHAR(255),
REPAIRCOST VARCHAR(255),
REMARK VARCHAR(500),
PRIMARY KEY (NUMBER,BRANCHID,BRANDID)
)
CREATE TABLE agom.Profiles
(
ID INT PRIMARY KEY NOT NULL IDENTITY,
USERNAME    VARCHAR(25) NOT NULL,
PASS        VARCHAR(25) NOT NULL
 )
 ALTER TABLE agom.Work_Order
 ADD CONSTRAINT branchfk
 FOREIGN KEY (BRANCHID) REFERENCES Branches(ID)

 ALTER TABLE agom.Work_Order
 ADD CONSTRAINT brandfk
 FOREIGN KEY (BRANDID) REFERENCES Brands(ID) 
```

我收到一个无法创建表的错误我尝试用表名 db.tablename 写入数据库名，但它不起作用我需要创建数据库然后创建表及其约束，但我不知道错误在哪里。我我是一个 sql 菜鸟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:25:31.150

从来没有`Database.Table`。

它是`Table`, 或`Schema.Table`, 或`Database.Schema.Table`, 或`Server.Database.Schema.Table`.

您可能只想在[`USE agom`](http://msdn.microsoft.com/en-us/library/ms188366.aspx)之后插入`create database`，然后仅按名称引用表。

或者，您可以将表称为`agom.dbo.Work_Order`，`dbo`作为默认数据库架构。

有关一般参考，请参阅[使用标识符作为对象名称](http://msdn.microsoft.com/en-us/library/ms187879%28v=sql.105%29.aspx)。

# html - 如何使从侧面拉伸的菜单居中

> ID：11923760
> 
> 赞同：0
> 
> 时间：2012-08-12T16:23:05.100
> 
> 标签：html, css

我需要把菜单放在中间。问题是菜单从侧面拉伸。这是菜单的一个想法：http: [//filebeam.com/c7bc3829dff04ab6217bd7ae8b8ed68b.jpg](http://filebeam.com/c7bc3829dff04ab6217bd7ae8b8ed68b.jpg)

所以，我不知道如何填写菜单的左侧部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:33:32.987

看看这个更正的 jsFiddle：http: [//jsfiddle.net/ZRrhv/](http://jsfiddle.net/ZRrhv/)

关键是两者都`.menu-container`设置`.menu`为相同的宽度，并确保添加`margin:auto`到`.menu-container`类中以使所有内容居中。

干杯!

# php - PHP move_uploaded_file，它提供了什么安全性

> ID：11923766
> 
> 赞同：1
> 
> 时间：2012-08-12T16:23:50.310
> 
> 标签：php, file-upload

无论我在哪里查看 PHP 函数之间的区别`rename`，`move_uploaded_file`它总是说区别在于`move_uploaded_file`具有一些安全功能。

我的问题是：

1.  这些安全功能是什么，如果我不使用它会发生什么？
2.  如果我不能使用它（我做了上传但不是通过 POST）所以我必须使用该`rename`功能，我需要采取哪些安全措施？

谢谢。

**编辑**
@Pekka 要求我详细说明我计划如何上传文件。我将通过 Ajax 上传文件，并且我有一些用于上传多个文件的队列功能。因此我正在使用`php://input`流。

如果我正确理解 Pekka 的回答，我无需担心，因为我将文件作为流获取并且我没有复制任何临时文件。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:29:13.467

其背景是一个古老的、非常糟糕的漏洞（在 2000 年代初期），在该漏洞中，您可以`tmp_file`用本地文件路径覆盖路径，而不是上传实际文件，从而导致该本地文件被视为上传文件真实上传的文件。（当时没有`$_FILES`数组。）

因此，例如，当上传头像时，脚本会将`copy()`您指定的系统文件（例如，配置文件`../../super_secret/config.php`或 a `.htpasswd`）放到公共位置，并尝试将其显示为`<img>`标签中的头像图像。

奇怪的是，我无法找到有关此漏洞的任何具体信息（在过去的几年里我已经搜索了很多次），但我知道它确实存在，因为我自己测试了它。欢迎任何链接。

至于要采取哪些安全措施，正如评论中所说，我认为您需要更详细地解释您计划使用哪种替代文件上传。

# jakarta-ee - JSF 2.0 多登陆页面

> ID：11923768
> 
> 赞同：0
> 
> 时间：2012-08-12T16:23:57.307
> 
> 标签：jakarta-ee, jsf-2, richfaces

我有一个 JSF 2.0（和 Richfaces 4.0）应用程序，我想做一些看似简单的事情。

我有一个登录页面 (/index.xhtml)，它是当有人键入“www.xxx.com”时出现的“欢迎页面”，其中 xxx 作为我的域。

1.  我希望有一个备用目标网页，它将成为我们正在运行的广告的目标。因为我要高度定制这个内容，所以我打算处理这个的方法就是有一个新页面：www.xxx.com/intro.xhtml。到目前为止，一切都很好。我的索引页面 index.xhtml（及其副本 intro.xhtml）有一堆链接的公共页面：“它是如何工作的”、“注册”等......非常典型的东西。
2.  问题是当转到“它是如何工作的”然后返回主页时，如何保存或跟踪目标用户通过 intro.xhtml 进入我的站点的事实？

将成为问题的用例是：

*   用户通过广告进入，他们在 intro.xhtml 中包含自定义内容。
*   他们转到一个共享的主页（“它是如何工作的”）。
*   然后他们单击主页（或站点图标）返回主页。现在他们回到了欢迎页面（index.xhtml），这会让他们感到困惑。

我能想到的只有：

*   我可以制作我所有其他公共页面的“深拷贝”（例如，将 how_it_works 复制到 how_it_works_intro），然后当有人从中选择主页时，将 _intro 页面链接返回到 intro.xhtml 页面，但这似乎真的很愚蠢。
*   在 servlet 过滤器中对请求进行一些后期处理（比如在用户最初点击 intro.xhtml 时设置会话变量），并在他们点击主页时使用这个事实将它们路由回 intro.xhtml。但这似乎是个坏主意，因为我不想在他们登录之前开始会话。它还避免了将所有页面流保留在 faces-config.xml 中，到目前为止我为整个应用程序所做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:45:07.840

Ok guys, I <think> I completely nailed it and came up with an elegant solution. It may be obvious to those whom are experts in JSF but I'm definitely not (I'm more a backend Java EE programmer)

Here's exactly what I did.

1.  added a landingPage attribute to my userBean (my user session bean). As stated above I don't care that I'm starting a session on my home page(s) because I'm doing it anyway.
2.  in all my landing pages I add the follwing with the appropriate **URI** that points back to the page itself. In this case /index resolves to the index page itself. in index.xhtml added:

    ```
     #{userBean.setLandingPage('/index')} 
    ```

in intro.xhtml added:

```
 #{userBean.setLandingPage('/intro')} 
```

1.  Then all I needed to do is adjust all references in my JSF pages to reference the session value. So in my header.xhtml I change all

    ```
    <h:commandLink class="active" action="/index">home</h:commandLink> 
    ```

    to

    ```
    <h:commandLink class="active" action="#{userBean.getLandingPage}">home</h:commandLink> 
    ```

2.  Only the home page references need to change, none of the other links need to change

3.  It will also be REAL easy to add additional landing pages and the stateful behavior.

I'm real happy with the solution. Thanks everyone!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:40:20.920

通常这是通过向查询字符串添加一些参数来实现的。例如：

从您的 intro.xhtml 中，将这些参数附加到“工作原理”页面，如下所示：

```
<h:link value="How it works" outcome="howitworks" includeViewParams="true">
   <f:param name="landingvia" value="intro"/>
</h:link> 
```

然后在你的 howitworks.xhtml 中渲染主页链接，如下所示：

```
<h:link value="Home" outcome="intro" rendered="#{param.landingvia == 'intro'}" />
<h:link value="Home" outcome="index" rendered="#{param.landingvia == 'index'}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:35:33.160

在尝试实施 Ravi 提出的解决方案时，存在以下问题：

1.  我的应用程序大量利用 JSF 模板（通过 ui:composition），因此下面的答案不会直接起作用。但解决方法是使用确实有效的 ui:param 标签。所以我在索引和介绍页面中添加了以下内容：

    ```
    <!-- this is in my intro.xhtml page -->
    <ui:composition template="templates/header-public.xhtml">
    <ui:param name="landingvia" value="intro"/> 
    ```

与 index.xhtml 页面中的类似行

```
 <ui:param name="landingvia" value="index"/> 
```

1.  然后在 header-public.xhtml 页面中，我需要根据 Ravi 更改链接（从内存中执行此操作），但您明白了。请注意，我需要使用“landingvia”而不是“param.landingvia”可能是因为诱人。

    ```
    <h:commandLink value="Home" outcome="/intro" rendered="#{landingvia == 'intro'}" ><f:param name="landingvia" value="intro" /> </h:commandLink
    <h:commandLink value="Home" outcome="/index" rendered="#{landingvia == 'index'}" ><f:param name="landingvia" value="index" /> </h:commandLink
    <h:commandLink value="About" outcome="/about" rendered="#{landingvia == 'intro'}" ><f:param name="landingvia" value="intro" /> </h:commandLink
    <h:commandLink value="About" outcome="/about" rendered="#{landingvia == 'index'}" ><f:param name="landingvia" value="index" /> </h:commandLink 
    ```

    ...我需要对模板中包含的页眉和页脚（具有其他链接）和图像链接（徽标等）上的所有链接（contactus、faq 等）进行相同的复制。 ..) 以及从say faq 到termsAndConditions.xhtml 的链接......不是一个好的解决方案。

2.  如果我不将 f:param 标记添加到上面的所有 commandLinks 中，则状态为“丢失”，这是有道理的。当我从介绍转到 About 时，About 页面如何在没有 f:param 标签的情况下跟踪登录页面？

3.  更糟糕的是，从任何页面到任何页面的所有链接都需要遵循这种模式。所以这不是一个好的解决方案，除非我做错了什么。

4.  作为最后一个问题，我发现即使所有链接都如上所述重复，该解决方案仍然无法正常工作，因为当有即时表单（这些表单将 form.submit() 发送回它们自己）时，无论如何状态都会丢失。

在这一点上，我将只管理服务器端的状态。所以我可以使用我的用户会话 bean 或设置会话 cookie。

*   无论如何，我正在我的主页上创建一个会话级别的“用户”对象。所以我可以通过从 intro.xhtml 调用来使用它

    ```
    #{userBean.setLandingPage('intro') 
    ```

*   或者从任一页面设置 cookie。

一旦我将一个值（“index”或“intro”）放入会话中（通过 cookie 或会话 bean），我就可以询问 ServletFilter 中的所有 URL，以及它的目标是“/index”还是“/”或“ /index.xhtml" 然后我将使用会话变量。如果它包含值“intro”，我会将用户发送到 /intro.xhtml。

如果没有大量的工作，我不知道该怎么做。但是上面的解决方案在不改变任何链接的情况下运行良好，而且它还有一个额外的好处，就是可以根据我的需要扩展到尽可能多的登陆页面。让我知道你的想法，Ravi 如果我没有得到你的解决方案，请告诉我。

# regex - 正则表达式，匹配 ${ANY_TEXT}

> ID：11923770
> 
> 赞同：0
> 
> 时间：2012-08-12T16:24:13.453
> 
> 标签：regex

你能帮我看看reg ex吗？我做不到 :( 我讨厌正则表达式。我需要匹配这个字符串 ${ANY_TEXT} 。正好一个“${”和一个结束标签“}”。

非常感谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:29:18.223

`\$\{[^}]+\}`会匹配它。`${ABC}`它也将从中匹配`${ABC}}}`。如果要匹配完整的行，只需使用 . 锚定正则表达式`^\$\{[^}]+\}$`。

一个学习正则表达式的好网站是[http://www.regular-expressions.info/](http://www.regular-expressions.info/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:28:31.960

我想这涵盖了所有的文本。

```
/^\$\{[a-zA-Z]\}$/ 
```

# cakephp - 如何在mysql中使用soap数据源

> ID：11923772
> 
> 赞同：0
> 
> 时间：2012-08-12T16:24:32.410
> 
> 标签：cakephp, datasource, cakephp-2.0

我创建了一个`DataSource`用于连接`WSDL`服务器和发布/获取数据的工具。

但是，我不知道如何在控制器中使用它？使用 MySQL 数据库（我的意思是我需要它们，需要一个`soap`和一个数据库。）

如果我把它放在我的模型中，它将使用我的数据源；但我认为它不会使用它的mysql表......：

```
public $useTable = false;
public $useDbConfig = 'mydatasource'; 
```

如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:05:22.020

您可以使用 $this->Modelname->setDataSource('default') 和 setDataSource('mydatasource') 在两个源之间动态切换。

但是您还需要在使用表和不使用表之间进行更改，我使用以下代码在无表源和 mysql 之间切换：

```
public $oldSource = array();

public function setDbConfig($source = null, $useTable = null) {
    $ds = $this->getDataSource();
    if (method_exists($ds, 'flushMethodCache')) {
        $ds->flushMethodCache();
    }
    if ($source) {
        $this->oldSource = array('useTable' => $this->useTable, 'useDbConfig' => $this->useDbConfig);
        $this->setDataSource($source);
        if ($useTable !== null) {
            $this->setSource($useTable);
        }
    } else {
        if ($this->oldSource) {
            $this->setDataSource($this->oldSource['useDbConfig']);
            $this->setSource($this->oldSource['useTable']);
            $this->oldSource = array();
        }
    }
} 
```

# javascript - 使用jquery我希望当输入为空时隐藏一个div？

> ID：11923774
> 
> 赞同：1
> 
> 时间：2012-08-12T16:24:55.970
> 
> 标签：javascript, jquery

例如说我有一个文本框和一个名为建议的隐藏 div

```
$("#suggestinput").on({
  keyup: function(){
    $("#suggestions").addClass("active");
  },
  blur: function () {
    $("#suggestions").removeClass('active');
  }
 //another event to know if input is empty while on focus, then removeClass('active');
}); 
```

第一个事件是当用户输入输入显示建议时，第二个是模糊，所以当用户不关注输入时，建议 el 将隐藏，如果输入为空，我希望第三个事件在焦点上检查删除活跃的班级。

工作示例在这里感谢：http: [//jsfiddle.net/HSBWt/](http://jsfiddle.net/HSBWt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:28:24.067

试试这个 - [http://jsfiddle.net/HSBWt/1/](http://jsfiddle.net/HSBWt/1/)

```
$("#suggestinput").on({
  keydown: function(){
    $("#suggestions").addClass("active");
  },
  blur: function () {
    $("#suggestions").removeClass('active');
  },
  keyup: function () {
      if ( $(this).val() == "" ) {
        $("#suggestions").removeClass('active');
      }
  }
}); 
```

# objective-c - SQLite：更新命令不改变值

> ID：11923775
> 
> 赞同：0
> 
> 时间：2012-08-12T16:25:09.507
> 
> 标签：objective-c, sqlite

我有这个问题....下面的代码不会产生错误，但表不会提交更改！我已经控制了所有日志，所有值都是正确的，并且所有 If 测试都很好，但是 db 上的值没有改变。有人有想法吗？谢谢！！

```
- (void) saveData {
    //database file system
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"enduroRace.sqlite"];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"unable to load db: '%@'.", dbPath);
    }
    //apro database
    sqlite3 *db;
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"unable to open DB");
    }
    //inizio query
    sqlite3_stmt    *statement;
    NSString *querySQL = @"UPDATE setting SET delay=?";
    const char *query_stmt = [querySQL UTF8String];
    if (sqlite3_prepare_v2(db, query_stmt, -1, &statement, NULL) == SQLITE_OK) {
        int valoreAttuale = [[sharedClass sharedController] ritardoMusic];
        sqlite3_bind_int(statement, 1,valoreAttuale);
    }
    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"Error...");
    }
    sqlite3_finalize(statement);
    sqlite3_close(db);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:21:46.363

我明白了....我已将 Sqlite 数据库复制到“文档”文件夹中，该文件夹不仅是只读的，而且现在是完美的！！！谢谢我！

# c# - 不匹配包含指定字符的句子

> ID：11923778
> 
> 赞同：0
> 
> 时间：2012-08-12T16:25:32.760
> 
> 标签：c#, regex

我试图匹配类中的属性。示例类：

```
public static string ComingSoonPage
{
   get { return "/blog-coming-soon.aspx"; }
}

public static string EncodeBase64(string dataToEncode)
{
   byte[] bytes = System.Text.ASCIIEncoding.UTF8.GetBytes(dataToEncode);
   string returnValue = System.Convert.ToBase64String(bytes);
   return returnValue;
} 
```

我使用这种正则表达式：

```
(?:public|private|protected)([\s\w]*)\s+(\w+)[^(] 
```

它不仅匹配属性，还匹配错误的方法。所以我想从包含**(**的匹配句子中删除。所以它选择所有但不包含方法的方法(包含**(** )。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:34:45.473

尝试匹配 the`"{"`和`"get {"`the

```
(public|private|protected|internal)[\s\w]*\s+(\w+)\s*\{\s*get\s*\{ 
```

* * *

**更新**

仅匹配属性的名称

```
(?<=(public|private|protected|internal)[\s\w]*\s+)\w+(?=\s*\{\s*get\s*\{) 
```

使用一般模式

```
(?<=prefix)find(?=suffix) 
```

* * *

**编辑**

一个属性可能根本没有修饰符（public、private 等），并且类型可能包含额外的字符（例如对于数组`int[,]`）。因此，最好只测试属性名称后面的语法元素（以及名称本身） . 一个属性也可以只包含一个 setter 并且是抽象的: `abstract int[,] Matrix { set; }`. 我建议像这样检索属性名称：

```
\w+(?=\s*\{\s*(get|set)\b) 
```

where`\b`匹配一个词的开头或（在这种情况下）一个词的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:49:18.350

这可能是您正在寻找的东西，而且效果很好！不过我应该得到一些款待:)...

```
Regex r=new Regex(@"(public|private).*?(?=(public|private|$))",RegexOptions.Singleline);
Regex nr=new Regex(@"\(.*?\)\s+\{",RegexOptions.Singleline);
foreach(Match m in r.Matches(yourCodeFile))//extracts all methods and properties
{
if(!nr.IsMatch(m.Value))//shoots down methods
m.Value;//properties only
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T05:07:53.810

根据[这个答案](https://stackoverflow.com/a/11914533/1495442)，尝试使用：

对于**`Properties`**:*`type`*和*`name`*:

```
(?:public\s|private\s|protected\s|internal\s)\s*(?:readonly|static\s+)?(?<type>\w+)\s+(?<name>\w+)[\s\r\n]*{ 
```

对于**`Fields`**:*`type`*和*`name`*:

```
(?:public\s|private\s|protected\s)\s*(?:readonly|static\s+)?(?<type>\w+)\s+(?<name>\w+); 
```

对于**`Methods`**:*`methodName`*和: *`parameterType`*_*`parameter`*

```
(?:public\s|private\s|protected\s|internal\s)?[\s\w]*\s+(?<methodName>\w+)\s*\(\s*(?:(ref\s|/in\s|out\s)?\s*(?<parameterType>\w+)\s+(?<parameter>\w+)\s*,?\s*)+\) 
```

对于 c# 代码分析，请尝试[Irony](http://irony.codeplex.com/)或[The Roslyn Project](http://msdn.microsoft.com/en-us/vstudio/hh500769.aspx)，请参阅此示例：

*   [C# 和 VB.NET 代码搜索器 - 使用 Roslyn](http://www.codeproject.com/Articles/416472/Csharp-and-VB-NET-Code-Searcher-Using-Roslyn) *代码项目*

# objective-c - 将 UIViewController 上的类别转换为自定义子类

> ID：11923781
> 
> 赞同：0
> 
> 时间：2012-08-12T16:26:09.253
> 
> 标签：objective-c, ios, uiviewcontroller, subclass, iboutlet

我有一个类类别，它向`UIViewController`. 我需要在类别中添加一些实例变量，所以我把它变成了一个自定义`UIViewController`子类，并添加了实例变量。然后我将`UIViewController`我正在显示的内容转换为新子类的一个实例。

现在，当应用程序加载时，我无法加载新`UIViewController`的。我从我的笔尖加载视图控制器`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ATFIPresentationViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ATFIPresentationViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible]; //Crashes Here
    return YES;
} 
```

`makeKeyAndVisible`这样做之后，当我调用我的应用程序窗口时会引发异常：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
'[<ATFIPresentationViewController 0x6c497d0> setValue:forUndefinedKey:]: 
this class is not key value coding-compliant for the key basicPicker.' 
```

basicPicker 是一个`IBOutlet`到一个`UITextField`. 这发生`IBOutlet`在我在 viewController 中定义的每一个。为什么要让我的 viewController 成为我的子类的子类`UIViewController`，以防止从我的笔尖加载任何东西？nib 中的“文件所有者”是 ViewController，而不是`ATFIPresentationViewController`.

编辑：好吧，我厌倦了试图让它以“正确”的方式工作，并且减少打字繁重的方式。我通过将扩展转换为 NSObject 并将 UIViewController 传递给它来使其工作。如果有人想看看，我在[gitHub](https://github.com/Marxon13/Easy-Alternitive-UITextField-Input)上发布了我使用它的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:32:45.757

发生该错误是因为您的 nib 试图将值设置到没有 name 属性的类的实例上`basicPicker`。这确实表明您正在向错误类型的对象发送消息。

您需要将`File's Owner`nib 文件中的类设置为您创建的新 UIViewController 子类，而不仅仅是默认的 UIViewController。在您的笔尖中选择`File's Owner`，您可以在右侧面板“实用程序”第三个选项卡中更改它，在 Xcode 中名为**Identity Inspector**，就在顶部。

# c# - 运行一个程序实例

> ID：11923785
> 
> 赞同：3
> 
> 时间：2012-08-12T16:26:37.493
> 
> 标签：c#

我有一个问题？！我用这种方式只运行一个程序实例。它做得很好。但是当我在其他应用程序中使用这种方式时。当我通过桌面上的快捷方式运行其中一个程序时，这两个程序都会调用并显示在桌面上。注意：这两个程序都运行在windows系统试试。

```
 static bool ok;
    static Mutex mutex = new Mutex(true, "{123Newsoft-Cleaner Portable Program123}",out ok);

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]

    static void Main()
    {
        //Application.EnableVisualStyles();
        //Application.SetCompatibleTextRenderingDefault(false);
        //Application.Run(new Form1());

        if (mutex.WaitOne(TimeSpan.Zero, true))  
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            var mainForm = new Form1c();

            try
            {                                    

                    mainForm.Visible = false;

                    mainForm.WindowState = FormWindowState.Normal;                  

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

            Application.Run(mainForm);               

        }
        else
        {

            NativeMethods.PostMessage((IntPtr)NativeMethods.HWND_BROADCAST, NativeMethods.WM_SHOWME, IntPtr.Zero, IntPtr.Zero);

        } 
```

//---------------- 在主窗体中

```
 protected override void WndProc(ref Message M_C)
    {

        if (M_C.Msg == NativeMethods.WM_SHOWME)
        {               
            ShowMe();
        }
        base.WndProc(ref M_C);
    }

    //*************
    private void ShowMe()
    {

        if (WindowState == FormWindowState.Minimized)
        {
            Show();
            WindowState = FormWindowState.Normal;
        }

        // get our current "TopMost" value (ours will always be false though)
        bool top = TopMost;
        // make our form jump to the top of everything
        TopMost = true;
        // set it back to whatever it was
        TopMost = top;

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T16:49:58.533

.NET Framework 已经很好地支持了这一点。您想使用 WindowsFormsApplicationBase 类。将 IsSingleInstance 属性设置为 true。当另一个实例启动时，您可以覆盖 OnStartupNextInstance 方法以执行您喜欢的任何操作。就像恢复一审的窗口一样。将 Program.cs 文件重写为如下所示：

```
using System;
using System.Windows.Forms;
using Microsoft.VisualBasic.ApplicationServices;   // Add reference to Microsoft.VisualBasic

namespace WindowsFormsApplication1 {
    class Program : WindowsFormsApplicationBase {
        [STAThread]
        static void Main(string[] args) {
            var app = new Program();
            app.Run(args);
        }
        public Program() {
            this.IsSingleInstance = true;
            this.EnableVisualStyles = true;
            this.MainForm = new Form1();
        }
        protected override void OnStartupNextInstance(StartupNextInstanceEventArgs eventArgs) {
            if (this.MainForm.WindowState == FormWindowState.Minimized) this.MainForm.WindowState = FormWindowState.Normal;
            this.MainForm.Activate();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-16T19:24:17.800

为了补充 Hans Passant 所写的内容，我在主窗体上添加了一个额外的方法来处理恢复窗口并激活它。这是为了包装表单的调用所需条件。

所以表单上添加的方法是：

```
/// <summary>
/// Recovers this instance of the form.
/// </summary>
public void RestoreFromTray()
{
   if(this.InvokeRequired)
   {
      this.Invoke(new Action(RestoreFromTray) );
      return;
   }
   this.Visible = true;
   this.WindowState = FormWindowState.Normal;
   this.Activate();
} 
```

然后在 Hans 的方法中，我将覆盖更改为：

```
protected override void OnStartupNextInstance(StartupNextInstanceEventArgs eventArgs) 
{
    ((formClassName)this.MainForm).RestoreFromTray();
} 
```

其中 formClassName 是表单的类名。

# javascript - 点击事件似乎不适用于 IE 中的选择元素

> ID：11923787
> 
> 赞同：0
> 
> 时间：2012-08-12T16:26:44.793
> 
> 标签：javascript, jquery

> **可能重复：**
> [选择框上的单击触发器在 jQuery 中不起作用](https://stackoverflow.com/questions/2895608/click-trigger-on-select-box-doesnt-work-in-jquery)

我正在尝试执行以下操作来模拟单击选择元素：

```
setTimeout(function () {
    $('#' + id).trigger('click');
}, 1000); 
```

这适用于 Firefox，但不适用于 IE。IE有一些可能的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:33:16.607

在触发点击事件之前，尝试附加您的自定义点击事件处理程序：

```
$('#' + id).bind('click', function() {
     alert('clicked');
}); 
```

# visual-studio-2010 - 从 Visual Studio 解决方案中删除已删除的文件

> ID：11923789
> 
> 赞同：6
> 
> 时间：2012-08-12T16:26:47.843
> 
> 标签：visual-studio-2010, visual-studio-sdk

Visual Studio 2010 SDK 中有什么方法可以删除磁盘上不存在的文件。我试过使用[VCProject.RemoveReference](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcproject.removereference.aspx)和[VCProject.RemoveFile](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcproject.removefile)方法，但都需要传递一个对象。我发现的问题是我无法从磁盘上不存在的文件创建文件对象。还有其他方法可以从项目中删除引用吗？

# android - Android：适配器上下文信息

> ID：11923791
> 
> 赞同：0
> 
> 时间：2012-08-12T16:26:52.010
> 
> 标签：android

我已经在我的 ListView 上设置了 contextmenu 代码，而且我已经完成了 adaptercontextinfo 以获取我从 listview 中长按项目的位置，所以我的问题是如何使用该项目访问成员或视图适配器上下文信息

```
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
super.onCreateContextMenu(menu, v, menuInfo);
MenuItem edit = menu.add("Edit");
MenuItem delete = menu.add("Delete");

edit.setOnMenuItemClickListener(new OnMenuItemClickListener() {

        public boolean onMenuItemClick(MenuItem item) {
            AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
            Toast toast = Toast.makeText(PatientActivity.this, Long.toString(info.id), Toast.LENGTH_LONG);
            toast.show();
            return true;
        }
    });
} 
```

所以我的问题是我如何访问我长时间点击的那个项目中的视图..

![在此处输入图像描述](../Images/1e5dae4995c997e0ca382bc3a6827236.png)

我想访问该图片上名称上方的那个小数字..我已经确定了我长时间点击它的位置..但我不知道如何访问我点击的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:37:17.523

如果要从 AdapterContextMenuInfo 访问行的布局，请使用：`info.targetView`。您可以使用它和 findViewById() 来获取布局左上角的数字。

我不知道您在问题中所说的成员是什么意思，但是如果您想要的数字是像 SQLiteDatabase 中的主键这样的 id，您可以简单地使用：`info.id`。

还可以考虑使用活动和片段中可用的[onContextItemSelected()](http://developer.android.com/reference/android/app/Activity.html#onContextItemSelected%28android.view.MenuItem%29)方法，而不是编写单独的 onMenuItemClickListeners。（这比在听众之后创建听众的工作要少。）

# php - 计算民意调查图表的百分比

> ID：11923793
> 
> 赞同：-2
> 
> 时间：2012-08-12T16:26:54.473
> 
> 标签：php, percentage

我有一个简单的民意调查，有多个答案。我在结果中使用答案的百分比作为图表的宽度。

例如：

*   回答 1 20%
*   回答 2 39%
*   回答 3 5%
*   回答 4 11%

ETC..

（上面的百分比是我图表的宽度）

问题：

通过有很多答案，最高的结果不会更像：15%。所以我的图表一点也不好看。

我的最高结果图表必须是 100%，第二好的结果应该占总数的某个百分比。

有没有办法计算/解决这个问题？

对不起我的英语，希望你们能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:31:32.080

如果您的最高结果是 100% 并且所有其他结果都是相对的，它不会使您的图表更宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:39:17.777

我认为你可以这样做：

```
$answer1 = 20;
$answer2 = 39;
//etc... [probably an array]

$highestAnswer = 39; //You should have some code that generates this
$sizeMultiplier= 100 / $highestAnswer; //This will for example return ~2.5\. Multiple all with 2.5 and the highest will be 100.

$answer1Width = $answer1 * $sizeMultiplier;
$answer2Width = $answer2 * $sizeMultiplier;
//etc... [probably an array] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T16:40:40.157

我猜这更像是一个数学问题，而不是一个编码问题，但它就是这样。对于第一个（最高票数）条目，`$percent`将是`100%`; 对于其他条目，它是：

```
$percent = $nr_votes * 100 / $first; 
```

# list - 列出添加元素（和拆分）

> ID：11923794
> 
> 赞同：2
> 
> 时间：2012-08-12T16:27:02.563
> 
> 标签：list

我正在添加一个列表，当我使用`MyArray|MyElement`打印到屏幕时，我得到：

> [obj1,obj2] | 对象3

这是不正确的，是吗？理想情况下，我希望它是：

> [Obj1,Obj2,Obj3]

如果我使用`MyArray|[MyElement]`打印输出给我：

> [Obj1,Obj2] | [对象3]

这相当于 [Obj1,Obj2,Obj3] 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:33:07.543

使用语法`[ MyElement | MyArray ]`，你会得到

```
[Obj3, Obj1, Obj2] 
```

这就是所谓的将元素“consing”到列表中。您还可以使用`append/3`谓词，如下所示：

```
append( MyArray, [MyElement], X). 
```

产生

```
X = [Obj1, Obj2, Obj3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:32:08.393

想通了，这是因为我附加到列表的末尾，而尾部始终是一个数组....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:50:15.647

我不知道我是否理解你的问题，但我会尽力提供帮助。

如果它适合你，试试这个：

```
add2end(X,[],[X]).
add2end(X,[H|T],[H|NewT]):-add2end(X,T,NewT). 
```

对于拆分：

split(L,N,L1,L2) :- 列表 L1 包含列表 L 的前 N ​​个元素，列表 L2 包含其余元素。(列表,整数,列表,列表) (?,+,?,?)

```
split(L,0,[],L).
split([X|Xs],N,[X|Ys],Zs) :- N > 0, N1 is N - 1, split(Xs,N1,Ys,Zs). 
```

# django - unique_together 如何在 Django-nonrel 中工作？

> ID：11923798
> 
> 赞同：2
> 
> 时间：2012-08-12T16:27:19.473
> 
> 标签：django, mongodb, django-nonrel, django-mongodb-engine

我正在使用 django-nonrel 和 django-mongodb 引擎。

在引擎的[文档](https://django-mongodb-engine.readthedocs.org/en/latest/reference/model-options.html)中，它说它支持 django 的 Meta 选项。

我尝试`unique_together`在这样的模型中使用：

```
class Bottler(models.Model):

    location = models.CharField(max_length=20)

    source = models.CharField(max_length=20)

    transactionID = models.CharField()

    class Meta:
        unique_together = (("location","source"),) 
```

但是，这似乎不起作用，因为我可以创建重复项而不会引发任何错误。

我知道`unique_together`是在数据库级别强制执行的。

这在 MongoDB 中意味着什么？我必须手动验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:20:51.007

您需要运行`syncdb`才能同步数据库索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:17:51.863

不知何故，syncbd 不会更新您在 mongodb 中的索引。您可以尝试的（如果可能的话）是删除集合，然后运行 ​​syncdb。就我而言，它确实创建了索引。

# c# - 如果单击对话框的是按钮，则再次运行程序

> ID：11923801
> 
> 赞同：1
> 
> 时间：2012-08-12T16:27:28.213
> 
> 标签：c#

我正在写一个成绩计算器，最后，我问用户是否还有其他成绩要计算。

```
 Console.Write("Do you have another grade to calculate? ");
        moreGradesToCalculate = Console.ReadLine();
        moreGradesToCalculate = moreGradesToCalculate.ToUpper(); 
```

我想显示一个带有“是”或“否”选项的对话框。

如果 DialogResult 为 Yes，我希望能够再次运行该程序，如果结果为 No，则执行其他操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:29:34.120

您应该使用`do...while(...)`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:32:35.473

你可以使用`do/while`类似的构造

```
do {
     Console.Write("Do you have another grade to calculate Y/N? "); 
     var moreGradesToCalculate = Console.ReadLine().ToUpper();
     if(moreGradesToCalculate == "Y")
        //do something  
     else if(moreGradesToCalculate == "N")
         break;

}while(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:32:52.160

我认为再次运行整个程序不是一个好主意，只需重新开始获取用于计算成绩的数字（将代码包装在一个循环中）。

对于 DialogBox，只需导入`System.Window.Forms`程序集并使用它：

```
DialogResult result = MessageBox.Show("Do you want to start over?", "Question", MessageBoxButtons.YesNo);

if (result == DialogResult.No) {
    // TODO: Exit the program
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T17:02:14.973

如果您想要一个对话框，则必须在文件顶部添加对同一名称空间的引用`System.Windows.Forms`并添加语句。`using`然后，您只需检查在Do-While 循环结束时`Show`对对象调用方法的结果。`MessageBox`例如：

```
do
{
    // Grading calculation work...

}
while (MessageBox.Show("Do you have another grade to calculate?",
    "Continue Grading?", MessageBoxButtons.YesNo) == DialogResult.Yes); 
```

这将一直循环，直到用户单击否。

如果您不想继续使用鼠标，请在命令行上执行所有操作：

```
ConsoleKeyInfo key = new ConsoleKeyInfo();
do
{
    // Grading work...

    Console.WriteLine("\nDo you want to input more grades? (Y/N)");
    do
    {
        key = Console.ReadKey();
    }
    while (key.Key != ConsoleKey.Y && key.Key != ConsoleKey.N);
}
while (key.Key == ConsoleKey.Y); 
```

这是 Microsoft 提供的关于循环或“迭代语句”的参考材料的链接。这`Do-While`是您刚开始时应该尝试背诵的少数几个之一：

[http://msdn.microsoft.com/en-us/library/32dbftby.aspx](http://msdn.microsoft.com/en-us/library/32dbftby.aspx)

# xml - 使用正则表达式查找混合 XML 内容

> ID：11923802
> 
> 赞同：1
> 
> 时间：2012-08-12T16:27:34.123
> 
> 标签：xml, xslt, xslt-2.0

在我的 XSLT 2.0 样式表运行期间，我需要找到某些文本（例如，“story 3.1”、“story 8.19”、“story 21.76”）并对其进行处理（例如，将其包装在超链接中）。找到这些实例并用它们做我想做的事是简单的任务。不过，我遇到的问题是，有时我可能会混合需要包含在超链接中的内容（例如，“story 3.1<i>a</i>”）。我一直无法弄清楚如何做到这一点。

这是一些示例数据和我的模板：

```
<p>Jack goes up the hill (story 3.1<i>a</i>) to fetch a pail of water.</p>

<xsl:template match="text()">
<xsl:variable name="content" as="xs:string" select="."/>
<xsl:analyze-string select="$content" regex="Story [0-9]*\.[0-9]*" flags="i">
  <xsl:matching-substring>
    <xsl:variable name="figureToTargetId">
      <xsl:analyze-string select="." regex="[0-9]*\.[0-9]*">
        <xsl:matching-substring>
          <xsl:value-of select="concat('s',.)"/>
        </xsl:matching-substring>
      </xsl:analyze-string>
    </xsl:variable>
    <a href="#{$figureToTargetId}"><xsl:value-of select="."/></a>        
  </xsl:matching-substring>
  <xsl:non-matching-substring><xsl:value-of select="."/>
  </xsl:non-matching-substring>
</xsl:analyze-string>
</xsl:template> 
```

在上述情况下，我希望将“story 3.1<i>a</i>”包含在超链接中。

我知道要理想地解决这个问题，我必须匹配除 text() 以外的其他内容。我不确定那是什么。

我一直在探索的一种方法是使用 xsl:for-each 遍历文本节点集并测试下一个文本节点是否正好是一个字母字符长。如果是，则将其包装在与前一个文本节点相同的超链接中。（由于各种原因，我知道匹配上述 reg ex 的文本节点之后的任何一个字母字符长文本节点都应该超链接到同一个目标。）但我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:46:35.693

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="p/text()[matches(., 'Story [0-9]+(\.[0-9]+)')]">
    <xsl:variable name="vCur" select="."/>
    <xsl:variable name="pContent" select="string(.)"/>
    <xsl:analyze-string select="$pContent" regex="Story [0-9]*\.[0-9]*" flags="i">
      <xsl:matching-substring>
        <xsl:variable name="figureToTargetId">
          <xsl:analyze-string select="." regex="[0-9]*\.[0-9]*">
            <xsl:matching-substring>
              <xsl:value-of select="concat('s',.)"/>
            </xsl:matching-substring>
          </xsl:analyze-string>
        </xsl:variable>
        <a href="#{$figureToTargetId}">
         <xsl:value-of select="."/>
         <xsl:if test="not(matches($vCur, 'Story [0-9]+(\.[0-9]+).+$'))">
          <xsl:sequence select="$vCur/following-sibling::*[1]"/>
         </xsl:if>
        </a>
      </xsl:matching-substring>
      <xsl:non-matching-substring><xsl:value-of select="."/></xsl:non-matching-substring>
    </xsl:analyze-string>
 </xsl:template>
 <xsl:template match=
  "p/*[preceding-sibling::node()[1]
         [self::text()
        and
          matches(., 'Story [0-9]+(\.[0-9]+)$')]
         ]"/>
</xsl:stylesheet> 
```

**当应用于本文档时**（提供的扩展包含两个有趣的案例）：

```
<t>
    <p>Little Red Riding Hood (Story 3.1) </p>
    <p>Jack goes up the hill (Story 3.1<i>a</i>) to fetch a pail of water.</p>
</t> 
```

**产生想要的正确结果**：

```
<t>
      <p>Little Red Riding Hood (<a href="#s3.1">Story 3.1</a>) </p>
      <p>Jack goes up the hill (<a href="#s3.1">Story 3.1<i>a</i>
      </a>) to fetch a pail of water.</p>
</t> 
```

**说明**：

我们检查匹配的子字符串是否是当前文本节点的后缀——如果是，那么我们还复制后面的第一个同级元素。

**更新**：

在评论中，OP 设置了一个新的附加要求——也更改`<i>`为`<em>`.

**这只需要对上述解决方案稍作更新：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="p/text()[matches(., 'Story [0-9]+(\.[0-9]+)')]">
    <xsl:variable name="vCur" select="."/>
    <xsl:variable name="pContent" select="string(.)"/>
    <xsl:analyze-string select="$pContent" regex="Story [0-9]*\.[0-9]*" flags="i">
      <xsl:matching-substring>
        <xsl:variable name="figureToTargetId">
          <xsl:analyze-string select="." regex="[0-9]*\.[0-9]*">
            <xsl:matching-substring>
              <xsl:value-of select="concat('s',.)"/>
            </xsl:matching-substring>
          </xsl:analyze-string>
        </xsl:variable>
        <a href="#{$figureToTargetId}">
         <xsl:value-of select="."/>
         <xsl:if test="not(matches($vCur, 'Story [0-9]+(\.[0-9]+).+$'))">
          <xsl:apply-templates mode="match" select="$vCur/following-sibling::*[1]"/>
         </xsl:if>
        </a>
      </xsl:matching-substring>
      <xsl:non-matching-substring><xsl:value-of select="."/></xsl:non-matching-substring>
    </xsl:analyze-string>
 </xsl:template>
 <xsl:template match=
  "p/*[preceding-sibling::node()[1]
         [self::text()
        and
          matches(., 'Story [0-9]+(\.[0-9]+)$')]
         ]"/>
 <xsl:template mode="match" match=
  "p/i[preceding-sibling::node()[1]
         [self::text()
        and
          matches(., 'Story [0-9]+(\.[0-9]+)$')]
         ]">
  <em><xsl:apply-templates/></em>
 </xsl:template>

</xsl:stylesheet> 
```

# android - 得到项目的结帐，不会在eclipse中打开？

> ID：11923808
> 
> 赞同：0
> 
> 时间：2012-08-12T16:28:28.947
> 
> 标签：android, eclipse, tortoisesvn

我从 code.google得到了[VuDroid的结帐项目；](https://code.google.com/p/vudroid/source/checkout)然后我想做一些更改，因为我想根据项目的需要对其进行修改，但我无法在 Eclipse 中打开它。我试图将其导入为“作为现有项目打开”，但它说在该目录中找不到项目。我做错了什么还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:38:00.660

项目中有一个`pom.xml`文件，表明它是一个基于 Maven 的项目。从 Eclipse 将其导入为`"File > Import > Maven > Existing Maven Projects"`. 确保您已安装所有与 Eclipse-Maven 相关的插件，或者在 Eclipse 提示您这样做时即时安装它们。

# sharepoint-2010 - sharepoint datetime 控件在页面加载时不显示值

> ID：11923811
> 
> 赞同：1
> 
> 时间：2012-08-12T16:28:56.860
> 
> 标签：sharepoint-2010

我在我的一个 asp.net 自定义页面中使用 SharePoint 日期时间控件。问题是我试图在 datetime 控件中显示 sharepoint 字段中的值，但它不会在页面加载时显示它。如果我刷新页面，它会显示它。

```
<SharePoint:DateTimeControl ID="dtdueDate" DateOnly="True" runat="server" />

DateTime dateTime = Convert.ToDateTime(item["DueDate"]);
((TextBox)(dtdueDate.Controls[0])).Text = dateTime.ToShortDateString(); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:24:00.880

它应该是

```
dtdueDate.SelectedDate = Convert.ToDateTime(item["DueDate"] == null ? null : item["DueDate"].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:07:27.933

您可以`dtdueDate.LocalId`在此处使用属性格式化日期：[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.datetimecontrol.localeid.aspx)和[区域设置 ID、输入区域设置和语言集合，用于 Windows XP 和 Windows Server 2003](http://msdn.microsoft.com/en-us/goglobal/bb895996.aspx)或创建您自己的 DatePicker 控件，请在此处阅读：[SharePoint DateTime 控件日期格式](http://technucleus.blogspot.com/2011/09/sharepoint-datetime-control-date-format.html)

祝你好运！

# flyway - 重试flyway失败的迁移

> ID：11923815
> 
> 赞同：25
> 
> 时间：2012-08-12T16:29:15.840
> 
> 标签：flyway

我只是在配置和完全理解flyway的过程中，我遇到了这种情况：

*   我成功配置了一个新项目以使用 flyway。
*   我成功地将测试数据库从版本 0 迁移到 1.0.3。
*   无法执行到版本 1.0.4 的迁移。（我试图添加已经存在的列，到目前为止没有问题，我的错。）

但是，一旦我对相应的脚本进行了必要的更改以使其正常工作，flyway 就会不断显示此消息：

```
 Current schema version: 1.0.4
 com.googlecode.flyway.core.migration.MigrationException: Migration to version 1.0.4 failed! Please restore backups and roll back database and code! 
```

由于我不想恢复完整的转储并再次应用每个迁移，只是为了使更改表脚本正常工作，所以我最终对“schema_version”表进行了一些更改：

*   第一次我删除了版本 1.0.4 的条目
*   第二，我将版本 1.0.3 的“current_version”字段设置为 1
*   然后再次执行 flyway:migrate 命令

在此之后，最终应用了迁移并显示了成功消息，但是我不太确定这是否是处理这种情况的正确方法。我不确定自己是否有权修改“schema_version”表，因为我认为它应该只由 flyway 本身修改。

所以，在解释了发生在我身上的事情之后，我的问题是：

有没有办法“重试”在flyway中应用失败的迁移，而无需自己修改“schema_version”表？

有什么我不知道的命令来完成这项任务吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T08:26:58.757

常见问题解答中对此进行了回答：http: [//flywaydb.org/documentation/faq.html#repair](http://flywaydb.org/documentation/faq.html#repair)

即将推出的 Flyway 2.0 将包含修复命令。此代码已签入 SCM。

注意：这只处理 Flyway 的元数据表。您仍然有责任清除迁移失败的任何其他影响。

**更新：** Flyway 2.0 现已发布。您可以在[http://flywaydb.org获取它](http://flywaydb.org)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-21T14:47:19.990

我不知道这是否是个好主意，但是如果 migrate() 失败，您可以尝试进行 repair() ：

```
final Flyway flyway = new Flyway();
flyway.setBaselineOnMigrate(true);
flyway.setValidateOnMigrate(false);
flyway.setDataSource(dataSource());
try {
    flyway.migrate();
} catch (final Exception e) {
    logger.error("Flyway migration failed, doing a repair and retrying ...");
    flyway.repair();
    flyway.migrate();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-25T13:36:08.657

完整示例，这将始终在运行迁移之前尝试修复，其余配置在配置文件中。

```
@Configuration
public class PersistanceConfiguration {
    protected final Logger log = LoggerFactory.getLogger(this.getClass());

    @Bean
    public FlywayMigrationStrategy cleanMigrateStrategy() {
        FlywayMigrationStrategy strategy = new FlywayMigrationStrategy() {
            @Override
            public void migrate(Flyway flyway) {
                flyway.repair();
                flyway.migrate();
            }
        };
        return strategy;
    }

} 
```

# python - 为几个 python web.py 应用程序配置 apache2 conf

> ID：11923820
> 
> 赞同：1
> 
> 时间：2012-08-12T16:29:41.970
> 
> 标签：python, apache2, web.py

我正在开发一个使用 python 的 web.py 框架实现后端的小型 Web 仪表板项目。

仪表板上有各种小部件，其中一个还使用 web.py 实现了其后端。问题是一次似乎只有一个指定的应用程序入口点起作用。仪表板和小部件的 apache 配置都放在同一个文件中。apache2/conf.d/ 中的原始配置文件（实际上工作了一段时间）如下所示：

```
WSGIPythonPath /var/www/ProjectDASHBOARD/api
WSGIScriptAlias /ProjectDASHBOARD/api /var/www/ProjectDASHBOARD/api/api.py/

AddType text/html .py

<Directory /var/www/ProjectDASHBOARD/api/>
    Order deny,allow
    Allow from all
</Directory>

# Stuff for graphingwidget

WSGIPythonPath /var/www/ProjectDASHBOARD/widgets/graphingwidget/api
WSGIScriptAlias /ProjectDASHBOARD/widgets/graphingwidget/api /var/www/ProjectDASHBOARD/widgets/graphingwidget/api/api.py/

AddType text/html .py

<Directory /var/www/ProjectDASHBOARD/widgets/graphingwidget/api/>
    Order deny,allow
    Allow from all
</Directory> 
```

仅此一项不起作用，两个 api.py 文件中还需要下一段代码，检查它们的适当路径并在未找到时添加它们（摘自小部件文件）：

```
import web
import json
import sys

path = '/var/www/ProjectDASHBOARD/widgets/graphingwidget/api'
if path not in sys.path:
    sys.path.append(path) 
```

对仪表板进行了类似的检查。

所有这一切确实工作了整整一周，然后在尝试从头安装时突然停止工作，这让人们更加困惑到底出了什么问题。尝试从网页访问 api 时收到的错误是 HTTP 错误 500 内部服务器错误。然后在对 apache 配置文件进行一些更改后，其中一个 api 开始工作：

```
WSGIPythonPath /var/www/ProjectDASHBOARD/widgets/graphingwidget/api
WSGIPythonPath /var/www/ProjectDASHBOARD/api
WSGIScriptAlias /ProjectDASHBOARD/api /var/www/ProjectDASHBOARD/api/api.py/
WSGIScriptAlias /ProjectDASHBOARD/widgets/graphingwidget/api /var/www/ProjectDASHBOARD/widgets/graphingwidget/api/api.py/

AddType text/html .py

<Directory /var/www/ProjectDASHBOARD/api/>
    Order deny,allow
    Allow from all
</Directory>

# Stuff for graphingwidget

AddType text/html .py

<Directory /var/www/ProjectDASHBOARD/widgets/graphingwidget/api/>
    Order deny,allow
    Allow from all
</Directory> 
```

基本上只是将路径移到了文件的开头，并稍微切换了顺序，突然其中一个 api 又开始工作了。稍微改变一下顺序，然后使另一个 api 工作并制动另一个。我不记得路径的正确顺序，但关键是它曾经运行良好，然后在安装到新的相同虚拟机时停止工作，并且只有一个 api 的工作取决于路径的顺序.

最初配置文件位于不同的文件中，但它并没有那样工作。有各种各样的错误，比如“目标 WSGI 脚本'路径'不能作为 Python 模块加载。”，只有当它们被移动到同一个文件时才开始工作。

我在这里想，不知何故，其中一条路径被另一条覆盖了，或者一直以来整个配置都从根本上是错误的，并且只能靠运气（整整一周，没有问题......）

关于什么是错的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:29:27.277

抱歉迟到了，但这个案子基本上不得不在[http://webpy.org/install#apachemodwsgi](http://webpy.org/install#apachemodwsgi)仔细 RTFM并使用 .htaccess 文件。

真的不知道为什么原始问题中的解决方案会如此有效。

# php - 如何在服务器端使用 php mysql 应用彗星？

> ID：11923821
> 
> 赞同：0
> 
> 时间：2012-08-12T16:30:03.833
> 
> 标签：php, mysql, ajax, comet

长轮询需要阻止响应服务器端，直到您找到查询如何使用 php mysql 延迟响应的答案，直到我找到所需的行
说我有一个聊天并且我正在等待新消息，所以如何延迟查询的响应直到重新消息被插入到数据库？

# odata - OData 中的时间跨度/Edm.Time 格式

> ID：11923822
> 
> 赞同：2
> 
> 时间：2012-08-12T16:30:18.543
> 
> 标签：odata, ado.net-entity-data-model

用于 Edm.Time 的正确格式是什么？

我在协议文档中看到 DateTime 和 DateTimeOffset 的格式如下：

日期时间：“yyyy-MM-dd'T'HH:mm:ss.fff”日期时间偏移量：“yyyy-MM-dd'T'HH:mm:ss.fffZ”

我确实在这里检查了协议：http: [//www.w3.org/TR/xmlschema-2/](http://www.w3.org/TR/xmlschema-2/)但无法获得用于 Edm.Time 的格式。目前我们正在使用 XmlConvert.ToString 将时间跨度值转换为字符串表示形式。OData 是否有针对 Timespan 推荐的任何特定表示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:59:26.447

[格式应该在此处](http://www.odata.org/documentation/overview#AbstractTypeSystem)得到合理的记录，指向[此链接](http://www.w3.org/TR/xmlschema-2/#time)（在 Edm.Time 的情况下）。

从 XML 模式 2：

> 3.2.8.1 词法表示
> 
> 时间的词法表示是 dateTime 的左截断词法表示：hh:mm:ss.sss，带有可选的以下时区指示符。例如，要表示东部标准时间下午 1:20，比世界协调时间 (UTC) 晚 5 小时，可以写成：13:20:00-05:00。另请参见 ISO 8601 日期和时间格式 (§D)。

请注意，时间和日期土地多年来一直存在问题。日期格式因有效负载格式和版本而异。例如，JSON Verbose 对 OData v2 使用 /Date(...)/ 格式，但在 OData v3 中更改为 ISO 8601（这让不需要实施 OData 服务器并关心所有这些细微差别）。这类似于 ASP.NET 堆栈所经历的挣扎：[http](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx) ://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx 。

# linux - 异步 lib memcached 使用

> ID：11923823
> 
> 赞同：0
> 
> 时间：2012-08-12T16:30:19.497
> 
> 标签：linux, memcached, libmemcache, libmemcached

我想使用 memcached_mget_execute() 方法从 memcached 服务器检索值。但我收到以下错误消息：“不支持操作，memcached_mget_execute_by_key() -> libmemcached/get.cc:437 不支持 ASCII 协议”

也有人请为我提供一些很好的资源，以便**在 C 中严格使用 libmemcached**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T04:15:49.523

您应该将 ASCII 协议更改为 BINARY 协议，然后重试。

# javascript - 格式化日期变量

> ID：11923828
> 
> 赞同：0
> 
> 时间：2012-08-12T16:31:32.590
> 
> 标签：javascript, date, time, jqplot

我可能有一个非常简单的问题。我下载了[http://jqplot.com](http://jqplot.com) javascript 库，它提供了以下示例：

```
loc.push([[1340877779000, 2, 'start'] , [1340877869000, 2, 'end' ]]); 
```

我需要用指定时间的变量替换 1340877779000。我有：

```
var date_start = "2012-08-12 11:15";
var date_end = "2012-08-12 12:00"; 
```

如何格式化“date_start”和“date_end”变量以便在 loc.push() 中使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:45:15.683

你试一试：

```
var date_start =  +new Date('2012-08-12 11:15'); 
```

**更新**

但是，它似乎不适用于 Firefox 和 IE。对于 Firefox，这应该可以工作（webkit 也可以使用它）：

```
+new Date('2012-08-12 11:15'.replace(/-/g, '/')); 
```

我不确定IE，没有任何要测试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:35:02.113

你的意思是，如何将变量放在数组中？

```
loc.push([[date_start, 2, 'start'] , [date_end, 2, 'end' ]]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:38:35.307

采用`Date.parse`

```
Date.parse("2012-08-12 11:15")
// returns 1344784500000 
```

因此，您应该使用

```
var date_start = Date.parse("2012-08-12 11:15");
var date_end = Date.parse("2012-08-12 12:00");
loc.push([[date_start, 2, 'start'] , [date_end, 2, 'end' ]]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T16:46:46.500

试试这个：

```
var date_start = new Date("2012-08-12 11:15").getTime();
var date_end = new Date("2012-08-12 12:00").getTime();
loc.push([[date_start, 2, 'start'] , [date_end, 2, 'end' ]]); 
```

# c# - 将值传递回asp.net中的服务器？

> ID：11923843
> 
> 赞同：1
> 
> 时间：2012-08-12T16:33:22.177
> 
> 标签：c#, asp.net

在 asp.net 应用程序中，我在 aspx 页面中有以下代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
   <% foreach (var questionPaper in QuestionPapers) { %>
    <div style="border-bottom: 1px solid; padding-bottom:20px">
        <%= questionPaper.University %><br/>
        <%= questionPaper.CourseName %>: <%= questionPaper.CourseCode %><br/>
        <%= questionPaper.Type %><br/>
        <%= questionPaper.Year %><br/>
        <asp:Button ID="View_Paper" runat="server" OnClick="ViewPaper" Text="View Paper"/>
    </div>
   <% } %>
</asp:Content> 
```

我想将 questionPaper.ID 传递回服务器端的 ViewPaper() 事件处理程序，我该怎么做？

```
 public void ViewPaper(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:00:44.367

我的建议是使用一个`Repeater`或一个`ListView`控件

*   `Repeater`如果数据将用作只读数据，则使用 a

*   如果`ListView`您想对结果进行分页和/或允许最终用户对您的数据执行 CRUD 操作，请使用

例如，当使用 a`Repeater`和 an`ObjectDataSource`控件时，您的代码将如下所示：

### ASPX

```
<asp:ObjectDataSource ID="ods" runat="server" 
    SelectMethod="GetQuestionPapers" 
    TypeName="Your_Namespace.PapersRepository">
</asp:ObjectDataSource>
<asp:Repeater runat="server" DataSourceID="ods" ID="r" OnItemCommand="r_ItemCommand">
    <ItemTemplate>
        <div style="border-bottom: 1px solid; padding-bottom:20px">
            <asp:HiddenField runat="server" ID="paperID" Value='<%# Eval("PaperID") %>'/>

            <asp:Label runat="server" ID="university" Text='<%# Eval("University") %>'/><br />
            <asp:Label runat="server" ID="courseName" Text='<%# Eval("CourseName") %>'/>:<asp:Label runat="server" ID="courseCode " Text='<%# Eval("CourseCode ") %>'/><br />
            <asp:Label runat="server" ID="paperType" Text='<%# Eval("Type") %>' /><br />
            <asp:Label runat="server" ID="year" Text='<%# Eval("Year") %>' /><br />
            <asp:Button ID="View_Paper" runat="server" Text="View Paper" CommandName="ViewPaperCommand"
            />
        </div>
    </ItemTemplate>
    <SeparatorTemplate>
        <hr />
    </SeparatorTemplate>
</asp:Repeater> 
```

### ASPX 代码背后

```
protected void r_ItemCommand(object sender, RepeaterCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "ViewPaperCommand":
            var hidden = e.Item.FindControl("paperID") as HiddenField;
            var myPaperID = hidden.Value;

            break;
    }
} 
```

### 论文存储库类

```
namespace Your_Namespace 
{
    public class PapersRepository 
    {
        public IEnumerable < QuestionPaper > GetQuestionPapers() 
        {
            return QuestionPapers.AsEnumerable();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:35:29.960

您可以将其绑定到控件，然后直接引用该控件吗？

我知道你有多个问题论文被输出，所以这本身就是问题所在。自从我使用网络表单已经有一段时间了，但是你能不能不使用中继器控件，它会给你一个行上下文，你可以在其中获得你正在寻找的特定试卷 ID？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:00:09.663

使用中继器。那种老派的 ASP 经典代码在 ASP.Net 项目中是没有立足之地的。这是一个例子：[http ://www.dotnetcurry.com/ShowArticle.aspx?ID=663](http://www.dotnetcurry.com/ShowArticle.aspx?ID=663)

也可以自定义转发器以使轻量级 DataGrid 或 ListView 等效。

# reference - 如何创建显示所有引用节点到翻译源的 Drupal7-View

> ID：11923846
> 
> 赞同：0
> 
> 时间：2012-08-12T16:33:43.010
> 
> 标签：reference, internationalization, drupal-7, translation, drupal-views

我有两种内容类型，一种（A：图像）引用另一种（B：项目）。我也有两种语言（en/de）。在视图块中，我显示了引用项目的所有图像（类型 A 的节点）（类型 B 的节点）：

**过滤条件：**

*   内容：已发布（是）
*   内容：类型（= 项目图像）

**上下文过滤器：**

*   (field_refering_project) 内容：Nid

**关系：**

*   内容：参考项目

这在原始语言节点页面（en）上效果很好。但是，当我更改为项目（de）的翻译页面时，没有显示任何图像。

我现在需要编辑视图或创建一个新视图，该视图还向我显示引用节点的图像，这些节点是调用视图的已翻译节点的原始节点。够清楚吗？我不舒尔......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:46:48.620

通过将此代码添加到 page.tpl.php 解决了问题

```
$imagemenuview = views_get_view('projectimagemenu');
echo $imagemenuview->preview('block', array($node->tnid)); 
```

但仍然对使用*上下文过滤器的解决方案感兴趣：内容：Nid*返回 TNID 而不是 NID*当过滤器值不可用时*

# c - 从文件写入和读取

> ID：11923847
> 
> 赞同：0
> 
> 时间：2012-08-12T16:33:51.710
> 
> 标签：c, file, fopen, fgets

我编写了以下代码段来将 n 个随机数写入文件。写入后，我从文件中读取并将数字存储在一个数组中。我面临的问题是，当我从文件中读取时，我会得到额外的数字。

```
#include<stdio.h>
#include<stdlib.h>

int main(void)
{
    int limit,i=0;
    int numbers[100];
    char line[100];
    printf("Enter the number of random number to be generated(max 1000)");
    scanf("%d",&limit);
    FILE *fpi;
    fpi=fopen("input.txt","w");
    for(i=0;i<limit;i++)
    {
        fprintf(fpi,"%d\n",rand());
    }
    fclose(fpi);
    FILE *file;
    file = fopen("input.txt", "r");
    while(fgets(line, sizeof line, file)!=NULL)
    {
        numbers[i]=atoi(line);
        i++;
    }
    printf("%d\n\n",i);
    int totalNums = i;
    for (i=0 ; i<totalNums ; i++)
    {
        printf("%d\n",numbers[i]);
    }
    fclose(file);
    return 0;
} 
```

如果我给 limit=3 并且我在文件中写入 3 个数字，例如 47,18836,431。当我从文件中读取并打印它时，我得到了 6 个值，其中前 3 个是垃圾，接下来的 3 个是写入的值。

如果我注释掉写入部分并尝试从文件中读取，我会得到只有 3 个数字的正确输出。所以我认为我的代码中有一些问题写入文件部分。有人可以帮我解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T16:43:49.003

在从文件读取之前重置`i`为。`0`例如

```
//your code before
i=0; //reset i
while(fgets(line, sizeof line, file)!=NULL) 
{      
    numbers[i]=atoi(line); 
    i++;
}
//your code after 
```

# jsp - Tomcat / Windows 7 上的 HTTP 状态 500

> ID：11923848
> 
> 赞同：0
> 
> 时间：2012-08-12T16:34:10.613
> 
> 标签：jsp, tomcat, tomcat7

对于使用在 JSP 页面之外定义的外部 Java 类的所有 JSP 页面，我不断收到错误**HTTP 状态 500 。**这是代码

*索引.jsp*

```
<%@page import="mypack.sou" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>Hello World!</h1>

<% 
sou o=new sou();
int r=o.hi();
out.println(r);
%>
</body>
</html> 
```

*包mypack*下的*sou.java*

```
package mypack;
public class sou {
public int hi()
 {
    return 0;
 }
} 
```

* * *

错误：

> 类型异常报告
> 
> “消息无法为 JSP 编译类：在生成的 java 文件中的第 14 行发生错误只能导入一个类型。mypack.sou 解析为一个包在 jsp 文件中的第 18 行发生错误：/web/ index.jsp sou 无法解析为类型 15：
> 
> # 你好世界！
> 
> 16:17:<%18:sou o=new sou(); 19: int r=o.hi(); 20: out.println(r); 21: %> jsp 文件中的第 18 行发生错误：/web/index.jsp sou 无法解析为类型 15：
> 
> # 你好世界！
> 
> 16:17:<%18:sou o=new sou(); 19: int r=o.hi(); 20: out.println(r); 21：％>堆栈跟踪：
> 
> 描述 服务器遇到内部错误 (Unable to compile class for JSP: An error occurred at line: 14 in the generated java file Only a type can be imported. mypack.sou resolves to a package An error occurred at line: 18 in the generated java file Only a type can be imported. mypack.sou resolves to a package An error occurred at line: 18 in the generated java file Only a type can be imported. mypack.sou resolves to a package An error occurred at line: 18 in the generated java file Only a type can be imported. mypack.sou resolves to a package An error occurred at line: 18 in the generated java file Only a type can be imported. jsp 文件：/web/index.jsp sou 无法解析为类型 15：
> 
> # 你好世界！
> 
> 16:17:<%18:sou o=new sou(); 19: int r=o.hi(); 20: out.println(r); 21: %> jsp 文件中的第 18 行发生错误：/web/index.jsp sou 无法解析为类型 15：
> 
> # 你好世界！
> 
> 16:17:<%18:sou o=new sou(); 19: int r=o.hi(); 20: out.println(r); 21: %> Stacktrace :) 阻止了它完成这个请求。”

* * *

# 目录结构

*   网络应用
    | *应用
    |*****_ index.jsp
    |_****WEB-INF
    ......|*****_**类
    ........| **_****我的包
    ....................|***_sou.class、test.war、mypack.jar********

 ********* * *

**系统信息：** Win 7 Ultimate X64、Apache Tomcat 7.0.29
java 版本“1.7.0_02”
Java(TM) SE Runtime Environment (build 1.7.0_02-b13)
Java HotSpot(TM) Client VM (build 22.0-b10, mixed mode , 分享）
Tomcat目录拥有完全权限！

* * *

我不得不搬到 GlassFish，在那里同样的代码可以工作！但是Tomcat仍然存在问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:35:34.057

尝试添加一个“;” 到您的导入声明。

像这样修改：

```
<%@page import="mypack.sou;" %>
<!DOCTYPE html> //Remove content type 
```

可能这看起来像一个奇怪的答案，但请参阅此参考 [https://stackoverflow.com/a/1858635/586836](https://stackoverflow.com/a/1858635/586836)

编辑：
否则：
尝试手动将该java文件编译为一个类，然后将其放在类目录中并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:54:02.077

尝试使用 `mypack.sou`而不是 `sou`; 您必须在 JSP 中使用完全限定的类名，因为所有 JSP 都被 Container 转换为普通的旧 Java servlet 代码。或者你可以导入你的包：

```
<%@ page import=”mypack.*” %> 
```********

# asp.net - 如何在水晶报表中水平分组数据

> ID：11923852
> 
> 赞同：0
> 
> 时间：2012-08-12T16:35:02.547
> 
> 标签：asp.net, crystal-reports

我在 ASP.net 的水晶报表中有两个字段，它们从数据库中获取数据。所以视图如下所示：

```
[pid]         [batch]

2108          1234
2108          5647
2108          7856
2108          3425
2109          1254
2109          1255 
```

但我希望数据应该被分组并像这样水平显示：

```
[pid]         [batch]

2108          1234, 5647, 7856, 3425
2109          1254, 1255 
```

请您帮我解决问题。我尝试在查询中使用“group by”关键字，但没有解决方案。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:33:08.303

```
SELECT DISTINCT pid,

(STUFF((SELECT ',' + CONVERT(varchar(10), batch) FROM tblTest E2 WHERE  E1.pid = E2.pid ORDER BY pid

FOR XML PATH(''), TYPE, ROOT).value('root[1]','nvarchar(max)'),1,1,'')) as batch

FROM tblTest E1 ORDER BY pid 
```

上面的 sql 查询将按预期返回结果集。尝试从 sql 查询中获取结果集，而不是从水晶报表中获取结果集。

# ios - setHidden 背后的目的

> ID：11923856
> 
> 赞同：0
> 
> 时间：2012-08-12T16:35:31.300
> 
> 标签：ios, view

我有一段代码将动画应用于视图。我不明白为什么我需要在创建和提交动画之前明确地将 setHidden 设置为 NO。

仅当 setHidden 设置为 NO 时才会显示动画。

例如：

-（无效）动画视图{

```
 [theView setHidden:No];

 ..Sets up animations..

 [UIView commitAnimations]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:47:03.970

使用调试器单步执行代码，并在代码的不同阶段打印出 hidden 的值。

要打印隐藏的值，请在调试器中键入如下内容：

```
print [theView hidden] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:55:57.717

好的，我明白了，这是因为它在 XIB（界面生成器）中设置为隐藏。此外，如果我没有在开始时将其设置为隐藏，则动画将从我的视图首先完全显示（未隐藏）开始，然后动画将开始。换句话说，它看起来不好看。

# ruby-on-rails - jazz_hands gem 在 Rails 控制台中打破历史

> ID：11923858
> 
> 赞同：1
> 
> 时间：2012-08-12T16:35:38.087
> 
> 标签：ruby-on-rails

我已经开始使用`jazz_hands`来使我的 Rails 控制台更有用，但是现在行/历史编辑被破坏了。当我跑到行尾（即换行）或使用向上箭头进入历史记录时，输出会出现乱码。

终端设置适用于其他一切，Ubuntu 12。有什么想法吗？我希望这是一件简单的事情，我不是第一个遇到这个问题的开发人员，但是在常见问题解答或各种相关的 Gems（撬动等）中没有任何内容，我不愿意在项目上提出错误直到我检查这不是一个众所周知的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:25:06.800

它已在最新更新中修复，但如果由于某种原因您无法更新，这里有一些解决方法。

[https://github.com/nixme/jazz_hands/issues/1](https://github.com/nixme/jazz_hands/issues/1)

# javascript - Orchard - 在部分视图中包含 Javascript 文件

> ID：11923859
> 
> 赞同：4
> 
> 时间：2012-08-12T16:35:41.417
> 
> 标签：javascript, asp.net-mvc-3, orchardcms

在 Orchard 中，如何在从 ajax 调用加载的局部视图中包含一个 javascript 文件？

这是我尝试过的：

```
@{Script.Include("ownerInfo.js");} 
```

如果视图被 ajax 调用命中，Orchard 会完全忽略这一点

**编辑：下面的作品，虽然包括手工脚本并不理想。请参阅下面 Piedone 的示例以获得更好的选择。**

```
<script type="text/javascript" src="./Modules/ModuleName/Scripts/script.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:34:11.740

我认为这是设计使然。如果您查看 Orchard.UI.Resources.ResourceFilter （这是将这些形状添加到呈现静态资源的布局的过滤器），它包含以下检查：

```
// should only run on a full view rendering result
        if (!(filterContext.Result is ViewResult))
            return; 
```

如果操作结果是例如 PartialViewResult，这可以防止它将形状注入到布局中。

您可以执行以下操作：

*   “手动”插入脚本
*   将脚本包含在 Orchard 中，并在您的视图中显示头部和/或脚部脚本的形状：

    Display.HeadScripts() Display.FootScripts()

# android - Android上的屏幕截图是空白的

> ID：11923860
> 
> 赞同：0
> 
> 时间：2012-08-12T16:36:04.577
> 
> 标签：android, android-imageview, android-sdcard

我正在从具有视频视图的布局中截取屏幕截图，我有此代码来保存它并捕获它，但是当我打开它时，我有一个空白图像但不是一个空图像有 1.5Kb，你能帮忙吗我？

这就是我捕获屏幕截图的方式

```
 public void TakePic(View v){

    buton = AnimationUtils.loadAnimation(this, R.anim.but);
    v.startAnimation(buton);
    if (vid!=null)
    {
        if(vid.getCurrentPosition()!=0)
        {
            popupc = (LinearLayout) findViewById(R.id.guardapic);
            popupc.setVisibility(View.VISIBLE);

            LinearLayout layout = (LinearLayout)findViewById(R.id.videopic);
            layout.setDrawingCacheEnabled(true);
            layout.setDrawingCacheQuality(LinearLayout.DRAWING_CACHE_QUALITY_HIGH);
            layout.buildDrawingCache();
            bitmap = layout.getDrawingCache();
            im=(ImageView)findViewById(R.id.imgdown);
        //  im.setImageResource(R.drawable.play_amarelo);
            im.setImageBitmap(bitmap);

        }
        else
        {

            Toast toast = Toast.makeText(ctx,"Video has stopped...Restart", Toast.LENGTH_SHORT);
            toast.show();
        }

    }
    else
    {
        Toast toast = Toast.makeText(ctx,"Start video first", Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

这是将其保存到 sdCard 中的代码

```
 public void PicOk(View v){

   String pathpic=null;

    String nomepic=null;

    EditText path= (EditText)findViewById(R.id.picpath);
    EditText pic= (EditText)findViewById(R.id.nomepic);

    pathpic=path.getText().toString();
    nomepic=pic.getText().toString();

    File folder = new File(Environment.getExternalStorageDirectory() + "/"+pathpic);
    boolean success = true;
    if (!folder.exists()) {
        success = folder.mkdir();

    }
    if (!success) {
        Log.d("Lino"," Pasta nao criada");
    } else {
        FileOutputStream ostream;
        try {

            File file =  new File(folder.toString() + "/"+nomepic+ ".png");
            ostream = new FileOutputStream(file);
            bitmap.compress(CompressFormat.PNG, 95, ostream);

            ostream.flush();
            ostream.close();      
            //              ((LinearLayout)findViewById(R.id.VV2)).destroyDrawingCache();
        } catch (FileNotFoundException e) {

            Log.d("Lino","erro"+e.toString());
            e.printStackTrace();
        } catch (IOException e) {
            Log.d("lino","erro  "+e.toString());
            e.printStackTrace();
        }
    }

    popupc = (LinearLayout) findViewById(R.id.guardapic);
    popupc.setVisibility(View.GONE);
    bitmap=null;
    //tira foto
    Toast toast = Toast.makeText(ctx,"pick taked", Toast.LENGTH_SHORT);
    toast.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:30:36.130

你知道视频实际上是`Combination of Still Images`。当你拍照的那一刻，跨池框架是空白的。这就是为什么屏幕截图看起来是黑色/空白的原因。

因此，使用此方法您无法截取视频的屏幕截图。您需要采用不同的方法。

可能对你有[帮助](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)。

# php - 建议（使用 MAMP 在 OSX Mountain Lion 上调试 php）

> ID：11923861
> 
> 赞同：0
> 
> 时间：2012-08-12T16:36:13.237
> 
> 标签：php, mamp

我需要找到一种方法来调试我的 localhost php 体验。编码时，由于我大多数时候都是初学者，所以我犯了返回内部服务器错误的错误。

有什么办法可以让我知道错误在哪里？例如：第 54 行错误或类似内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:46:55.253

这实际上是 php 不可能的，因为它没有被编译。更好的是有一个调试器，它可以让您逐行执行代码并向您显示应用程序的状态。在 PHP 世界中，这个模块被称为 xdebug [http://xdebug.org/](http://xdebug.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:03:12.997

我看到你使用 MAMP，但如果你对它感兴趣，这里有一组指令，它使用 OSX Mountain Lion 的本机 Apache2 和 XDebug 以及 MacGDBp 和一个名为[XDebug Helper](http://dokimay.com/index.php/mac-osx/56-configuring-xdebug-on-osx-mountain-lion)的 Safari 扩展。

# android - 为什么我有这个错误？

> ID：11923863
> 
> 赞同：0
> 
> 时间：2012-08-12T16:36:26.260
> 
> 标签：android, api, libraries

我在这里使用 last.fm API [http://code.google.com/p/lastfm-java/](http://code.google.com/p/lastfm-java/)

我将它下载到我的工作区，将其作为库检查，然后将其导入到我的项目中......当我尝试使用 API 的一种方法时出现问题

```
Artist[] artist = LastFmServer.searchForArtist("hatebreed"); 
```

我不知道为什么，它说

```
Cannot make a static reference to the non-static method searchForArtist(String) from the type LastFmServer 
```

但我有另一个错误试图解决它。它导致这条线

```
String artist = Artist.getName();

Cannot make a static reference to the non-static method getName() from the type Artist 
```

这是我第一次使用 API，我开始厌倦这些错误，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:57:42.117

就像其他人说你需要`Instantiate` `LastFmServer`喜欢

```
LastFmServer mLastFmServer= new LastFmServer(); 
```

然后调用你的方法

```
Artist[] artist = mLastFmServer.searchForArtist("hatebreed"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:38:00.633

您必须实例化一个`LastFmServer`and `Artist`with `new`（或适当的工厂方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:42:11.193

您需要通过使用来**实例化****LastFmServer**和**Artist**各自的对象`new`。

```
LastFmServer lastFmServerObj = new LastFmServer(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T16:44:39.977

您必须通过对象调用方法而不是进行静态引用。

我猜你会创建一个`LastFmServer`这样的（取决于构造函数）。

```
LastFmServer object = new LastFmServer(); 
```

我希望这有帮助。

# wpf - 如何处理跨线程访问异常？

> ID：11923865
> 
> 赞同：19
> 
> 时间：2012-08-12T16:36:39.617
> 
> 标签：wpf, multithreading

在 WPF 中使用多个线程时可能会遇到的一个常见异常是：

> 调用线程无法访问此对象，因为不同的线程拥有它

有哪些选项可以正确处理这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-12T16:36:58.493

根据情况有多种选择：

**从另一个线程访问控件**

^(例如，使用进度信息更新 TextBlock。)

*   **[数据绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)：**

    在这种情况下，您可以做的最简单的事情是避免与控件直接交互。您可以将要访问或修改的属性[绑定到其类](http://msdn.microsoft.com/en-us/library/ms752347.aspx)[实现](http://msdn.microsoft.com/en-us/library/ms229614.aspx) [`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)的对象，然后在该对象上设置属性。该框架将为您处理其余部分。（通常，您很少需要直接与 UI 元素交互，您几乎总是可以绑定相应的属性并使用绑定源来代替；可能需要直接控制访问的一种情况是控件创作。）

    在某些情况下，仅数据绑定是不够的，例如在尝试修改 bound[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)时，为此您需要...

*   **[调度](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)：**

    您可以将访问代码分派给拥有该对象的线程，这可以通过调用[`Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)或拥有正在访问的对象来完成（可以在另一个线程上获得它[`BeginInvoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)）。[`Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)`Dispatcher`

    例如

    ```
    new Thread(ThisThreadStart).Start(); 
    ```

    ```
    void ThisThreadStart()
    {
        textBlock.Dispatcher.Invoke(new Action(() => textBlock.Text = "Test"));
    } 
    ```

    如果不清楚方法在哪个线程上执行，您可以使用[`Dispatcher.CheckAccess`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess.aspx)直接分派或执行操作。

    例如

    ```
    void Update()
    {
        Action action = () => myTextBlock.Text = "Test";
        var dispatcher = myTextBlock.Dispatcher;
        if (dispatcher.CheckAccess())
            action();
        else
            dispatcher.Invoke(action);
    } 
    ```

    如果对象不是 a[`DispatcherObject`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.aspx)并且您仍然需要可*在创建对象的线程*`Dispatcher`中使用的关联对象（因此在线程执行的方法中执行此操作对您没有任何好处）。为方便起见，您通常在应用程序的主 UI 线程上创建对象；您可以使用.[`Dispatcher.CurrentDispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.currentdispatcher.aspx) *`Dispatcher``Application.Current.Dispatcher`*

 **特别案例：*

*   [`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

    将任何控制访问移至[`ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)创建实例的线程（当然应该是 UI 线程）上

*   计时器

    在 WPF 中，您可以使用[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)为方便起见，它为您执行调度，因此[`Tick`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.tick.aspx)在关联的调度程序上调用任何代码。如果您可以将调度委托给数据绑定系统，您当然也可以使用普通计时器。

[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/ms741870.aspx)阅读有关`Dispatcher`队列工作原理和 WPF 线程的更多信息。

**访问在另一个线程上创建的对象**

^(例如在后台加载图像。)

如果有问题的对象不是[`Freezable`](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)您通常应该简单地*避免在另一个线程上创建它或限制对创建线程的访问*。如果是，`Freezable`您只需要调用[`Freeze`](http://msdn.microsoft.com/en-us/library/system.windows.freezable.freeze.aspx)以使其可供其他线程访问。

**从另一个线程访问数据对象**

也就是说，正在更新其实例的类型是用户代码。如果抛出异常，这种情况可能是由使用[`DependencyObject`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.aspx)数据类的基类型的人造成的。

这种情况与**访问控件**相同，可以应用相同的方法，但通常应首先避免。当然，这允许通过[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)进行简单的属性更改通知，并且这些属性也可以绑定，但通常这不值得放弃线程独立性。您可以从 WPF 中获取更改通知，[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并且 WPF 中的绑定系统本质上是不对称的，总是有一个绑定的属性（目标）和作为此绑定源的东西。通常 UI 是目标，数据是源，这意味着只有 UI 组件才需要依赖属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T05:30:25.280

对于我“想出”的东西，那将是几百行代码。

但总结是：

App_OnStartup 生成后台线程

在回调中，

称呼

Application.Current.MainWindow.Dispatcher.CheckAccess() - 获取 Application.Current.Dispatcher.CheckAccess() 没有的异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T17:13:36.107

我有一个 udp 侦听器对象，它通过方法/回调在我的 mainWindow wpf .cs 文件中 +='ed 的事件进行通信。

使用参数调用事件处理函数，其中一个是我希望在 mainWindow.cs 的列表框中显示的消息

使用上述 HB 在此线程中的信息；我使用以下代码在我的事件处理程序回调中添加、测试和处理了 wpf 中的交叉线程，但我使用的是真实消息而不是硬编码消息：

```
listBox1.Dispatcher.Invoke(new Action(() => listBox1.Items.Add("MessageHere"))); 
```

**更新：**

这更好，因为您可以在匿名函数中放入更多内容。

```
 listBox1.Dispatcher.Invoke((Action)delegate 
 {
     listBox1.Items.Add(e.ReaderMessage); 
 }); 
```*

# jquery - Kohana 3.2 ajax jquery POST 请求在没有 ajax 时有效。

> ID：11923875
> 
> 赞同：0
> 
> 时间：2012-08-12T16:37:50.507
> 
> 标签：jquery, ajax, parameters, kohana

我已经在这个问题上花费了几个小时，但找不到解决方案。我在网页上有以下服务（kohana 3.2）：

```
public function action_test() {
    $data = file_get_contents('php://input');
    $json = json_decode($data);

    $t = array();
    $t[Utils::$KEY_LOGIN]       = isset($json->login) ? $json->login : arr::get($_POST, Utils::$KEY_LOGIN, null);
    $t[Utils::$KEY_PASSWORD]    = isset($json->password) ? $json->password : arr::get($_POST, Utils::$KEY_PASSWORD, null);

    $returned = array("success" => true);
    $returned = array_merge($returned, array("login" => $t[Utils::$KEY_LOGIN]));

    $this->auto_render = FALSE;
    ob_clean();
    $this->request->headers['Content-Type'] = "application/json";
    $this->response->body(json_encode($returned));
} 
```

以及询问服务的表格：

```
<html>
<head>
    <meta charset="utf-8" />
    <script type="text/javascript" src="//media/js/jquery-1.6.2.min.js">    </script>
    <script type="text/javascript" src="//media/js/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#login_sb").click(function() {
                //var action = 'http://www.aaa.pl/clientservices/test';
                var action = "http://localhost/aaa/clientservices/test";
                $.ajax({
                    url : action,
                    type : "post",
                    dataType : "json",
                    cache : "false",
                    timeout: 8000,
                    data : {
                        'login': 'login@wp.pl'
                    },
                    success : function(data) {
                        alert(data);
                        if(data.success) {
                            alert(data.login);
                        }
                    } 
                });
// 
                return false;
            });
        });

    </script>
</head>
<body>
    <form id="login_form" method="post">
        <input type="submit" value="login" id="login_sb"/>
    </form>

</body> 
```

当我致电本地服务时，一切正常。但是当我试图通过 Ajax 远程调用它时 - 它不起作用。当我手动发送表单时它也可以工作。请帮忙，因为我没有任何新想法出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:16:50.043

您是否可能尝试从不同的域调用 AJAX 请求？

如果您尝试在此 url 调用 ajax 请求：'http://www.aaa.pl/clientservices/test'

从你的本地设置你会得到错误，ajax 请求必须来自同一个域。

一个本地主机的文件无法向 www.aaa.pl 发出 ajax 请求，因为它是一个不同的域并且是 javascript 中的一个安全问题。

# c# - C#如何将字符串分配给double

> ID：11923882
> 
> 赞同：-2
> 
> 时间：2012-08-12T16:38:38.367
> 
> 标签：c#, string, double

我需要帮助弄清楚如何将字符串分配给双精度。

```
double value = "myString"; 
```

我有`double value = double.Parse("myString");` ，但这会抛出一个`FormatException`.

我试图像这样连接：

```
string stringValue += doubleValue.toString() + intValue.ToString;
return stringValue; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:51:07.560

> 我有双值 = double.Parse("myString"); 但这会引发 string.Format 错误。

是的，这就是您在这种情况下想要的行为。“myString” 没有数值，所以给出正确的数值是抛出格式错误。

`double.Parse("1.2")`是否有效取决于所使用的文化是 1.2 表示为“1.2”还是“1,2”的文化。`double.Parse("1.2", CultureInfo.InvariantCulture)` 将始终返回 1.2，因为它特定于使用哪种文化。

`double.TryParse` 在有人可能传递不适当的字符串（如“myString”）时很有用，因为它返回一个表示成功或失败的布尔值，而不是抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:40:57.863

[解析](http://msdn.microsoft.com/en-us/library/fd84bdyt.aspx#Y0)它，假设 myString 是一个有效的双字符串表示（例如“3.49”、“1394.293”、“-1.30E3”）

```
double value = double.Parse(myString) 
```

大多数（全部？）普通数值类型都有解析方法。如果您不确定它是否有效，请使用 TryParse（尝试将“abc”解析为数字将引发异常）

@LB 对于自定义解析，您可以像这样定义 NumberFormatInfo ：

```
 var a = new System.Globalization.NumberFormatInfo()
    a.NumberDecimalSeparator = ",";
    a.NumberGroupSeparator = ".";
    double d = Double.Parse("1.000.000,5", a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T16:41:59.427

您可以使用 TryParse

```
string x = "1234";
double y;
if(double.TryParse(x, out y))
{
    Console.WriteLine("success y = " + y.ToString());
}
else
{
    Console.WriteLine(x + " could not be converted to a double");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T16:40:04.607

您不能将字符串分配给双精度数。不可能。双精度型是一种数字类型。字符串不是。

如果您解析一个双精度字符串，则有可能。

```
var doubleThing = Double.Parse("9.99"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T16:42:34.773

```
double.Parse(string); 
```

如果格式不正确，可以并且将通过异常。你想解析什么？

```
double.TryParse("1.05", out value); 
```

如果解析成功或失败，将返回 true 或 false。

# c++ - 内存资源增加不停

> ID：11923885
> 
> 赞同：3
> 
> 时间：2012-08-12T16:39:12.813
> 
> 标签：c++, opengl, glfw

我是 GLFW 的新手，做了一个简单的纹理映射程序。问题是在运行程序时内存资源不停地增加，我可以在任务管理器中清楚地看到。

运行程序几分钟后，我的电脑风扇加速并出现加热问题。我该如何解决这个问题？

这是纹理加载功能的代码

```
GLuint LoadTexture(const char* TextureName)
{
    GLuint Texture;  //variable for texture
    glGenTextures(1,&Texture); //allocate the memory for texture
    glBindTexture(GL_TEXTURE_2D,Texture); //Binding the texture

    if(glfwLoadTexture2D(TextureName, GLFW_BUILD_MIPMAPS_BIT)){
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
        return Texture;
    }else return -1;
} 
```

这是绘图功能的代码

```
void display()
{
    glClearColor( 0.0f, 0.0f, 0.0f, 0.0f ); //clear background screen to black

    //Clear information from last draw
    glClear( GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW); //Switch to the drawing perspective
    glLoadIdentity(); //Reset the drawing perspective

    glTranslatef(0.0f,0.0f,-35.0f); //Translate whole scene to -ve z-axis by -35 unit

    GLuint text2D;
    text2D = LoadTexture("cicb.tga"); //loading image for texture

    glEnable(GL_TEXTURE_2D); //Enable texture
    glBindTexture(GL_TEXTURE_2D,text2D);//Binding texture

    glPushMatrix();
    glBegin(GL_POLYGON); //Begin quadrilateral coordinates
    glNormal3f(0.0f, 0.0f, 1.0f);//normal vector
    glTexCoord2f(0.0f, 0.0f); //Texture co-ordinate origin or  lower left corner
    glVertex3f(-10.0f,-11.0f,5.0f);
    glTexCoord2f(1.0f, 0.0f); //Texture co-ordinate lower right corner
    glVertex3f(10.0f,-11.0f,5.0f);
    glTexCoord2f(1.0f, 1.0f);//Texture co-ordinate top right corner
    glVertex3f(10.0f,-1.0f,-15.0f);
    glTexCoord2f(0.0f, 1.0f);//Texture co-ordinate top left corner
    glVertex3f(-10.0f,-1.0f,-15.0f);

    glEnd(); //End quadrilateral coordinates
    glPopMatrix();
    glDisable(GL_TEXTURE_2D);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D,text2D);
    glPushMatrix();

    glBegin(GL_POLYGON);
    glNormal3f(0.0f, 0.0f, 1.0f);
    glTexCoord2f(0.0f, 0.0f);//Texture co-ordinate origin or lower left corner
    glVertex3f(-10.0f,-1.0f,-15.0f);
    glTexCoord2f(10.0f, 0.0f); //Texture co-ordinate for repeating image ten times form
    //origin to lower right corner
    glVertex3f(10.0f,-1.0f,-15.0f);
    glTexCoord2f(10.0f, 10.0f);//repeat texture ten times form lower to top right corner.
    glVertex3f(10.0f,15.0f,-15.0f);
    glTexCoord2f(0.0f, 10.0f);//repeat texture ten time form top right to top left corner.
    glVertex3f(-10.0f,15.0f,-15.0f);
    glEnd();
    glPopMatrix();
    glDisable(GL_TEXTURE_2D); //Disable the texture
    glfwSwapBuffers();

} 
```

如果有人想通过运行exe查看问题，那么我可以提供下载链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T16:45:43.503

每次调用时，您似乎都在加载纹理`display()`。（本质上每帧一次）我认为这就是在某些时候占用你所有记忆的原因。您只想在显示功能之外执行此操作。

# php - PHP jQuery用多个单词传递值

> ID：11923888
> 
> 赞同：0
> 
> 时间：2012-08-12T16:39:17.867
> 
> 标签：php, javascript, jquery

我有一个 jQuery，它按颜色过滤查询中显示的一些项目。

问题来自诸如“蓝色海军”之类的颜色。显然 jQuery 没有传递这两个词之类的东西。当我回显`_GET`值的结果时，当通过了 2 个单词颜色时，我什么也得不到，而我确实得到了一个单词颜色的值。

知道为什么会这样吗？

这是我的代码：

```
jQuery(document).ready(function($) {
    $("input:checkbox").change(function() {
        if($(this).is(':checked')) 
            {
        $(".loadingItems").fadeIn(300); //fade in on change
        var color = $(this).val();
            $(".indexMain").load('indexMain.php?color='+color,function(){
            $(".indexMain").fadeIn(slow);

            })
            $(".loadingItems").fadeOut(300); //remove when load is complete
        }
        else 
            {
            $(".loadingItems").fadeIn(300); //fade in on change
$(".indexMain").load('indexMain.php');
                        $(".loadingItems").fadeOut(300); //remove when load is complete
            }
        });
    });

$color = $_GET['color'];

$items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
        $items -> bindValue(":colorbase1", $color); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:49:40.877

由于它是一个 GET 请求，该值被附加到查询字符串中，并且查询字符串不能包含常规空格。

在查询字符串中使用它之前，您需要对值进行 url 编码：

```
$(function() {
    $("input[type='checkbox']").on('change', function() {
        if (this.checked) {
            $(".loadingItems").fadeIn(300);
            var color = encodeURI(this.value);
            $(".indexMain").load('indexMain.php?color=' + color, function() {
                $(".indexMain").fadeIn(slow);
                $(".loadingItems").fadeOut(300);
            });
        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".loadingItems").fadeOut(300);
            });
        }
    });
});

$color = $_GET['color'];

$items = $con - > prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items - > bindValue(":colorbase1", $color);​ 
```

超`$_GET`全局应该在您的 PHP 脚本中自动进行 url 解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:53:39.053

```
var color = $(this).val().replace(/ /g, '+'); 
```

这将适用于您的情况，但更好的方法是使用 adenneo 解释的 encodeURI

# c# - 如何确定到达列表框中的列表末尾？

> ID：11923889
> 
> 赞同：-1
> 
> 时间：2012-08-12T16:39:31.020
> 
> 标签：c#, wpf, listbox

我如何确定到达列表框中的列表末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:17:36.430

有`ListBox`一个`ScrollViewer`附加属性，可让您访问滚动功能。比较`VerticalOffset`与`ScrollableHeight`。如果`VerticalOffset`== 0 那么你在`ListBox`. 如果`VerticalOffset`==`ScrollableHeight`则您位于 ListBox 的底部。我建议将此逻辑添加到 ScrollChanged 处理程序。

# c++ - C++ 成员函数隐藏的原因

> ID：11923890
> 
> 赞同：27
> 
> 时间：2012-08-12T16:39:35.140
> 
> 标签：c++

> **可能重复：**
> [名称隐藏和脆弱的基础问题](https://stackoverflow.com/questions/5928535/name-hiding-and-fragile-base-problem)

我熟悉涉及成员函数隐藏的规则。基本上，具有与基类函数同名的函数的派生类实际上并没有重载基类函数——它完全隐藏了它。

```
struct Base
{
    void foo(int x) const
    {

    }
};

struct Derived : public Base
{
    void foo(const std::string& s) { }
};

int main()
{
    Derived d;
    d.foo("abc");
    d.foo(123); // Will not compile! Base::foo is hidden!
} 
```

因此，您可以通过`using`声明来解决此问题。但我的问题是，基类函数隐藏的原因是什么？这是标准委员会的“功能”还是仅仅是“错误”？当编译器找不到匹配的重载时，编译器无法在基类中查找匹配的重载是否存在某种技术原因`d.foo(123)`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-12T17:46:21.523

名称查找通过在当前范围中查找匹配名称来工作，如果没有找到，则在封闭范围中查找，如果没有找到，则在封闭范围中查找，等等，直到到达全局命名空间。

这不是特定于类的，你会得到完全相同的名称隐藏在这里：

```
#include <iostream>

namespace outer
{
  void foo(char c) { std::cout << "outer\n"; }

  namespace inner
  {
    void foo(int i) { std::cout << "inner\n"; }

    void bar() { foo('c'); }
  }
}

int main()
{
  outer::inner::bar();
} 
```

虽然`outer::foo(char)`是更好的匹配调用`foo('c')`名称查找在找到后停止`outer::inner::foo(int)`（即`outer::foo(char)`隐藏），因此程序打印`inner`.

如果不隐藏成员函数名称，则意味着类范围内的名称查找与非类范围内的名称查找行为不同，这将不一致且令人困惑，并使 C++ 更难学习。

所以没有技术原因不能更改名称查找规则，但必须为成员函数和其他类型的名称查找更改它们，这会使编译器变慢，因为他们必须继续搜索名称，即使在在当前范围内查找匹配的名称。明智地，如果当前范围内有一个名称，它*可能*就是您想要的那个。范围内的调用`A`可能希望在该范围内查找名称，例如，如果两个函数在同一个命名空间中，它们可能是相关的（同一模块或库的一部分），因此如果一个使用另一个名称，则可能意味着在同一范围内调用一个。如果说'

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-12T16:54:17.407

> 这是标准委员会的“功能”还是仅仅是“错误”？

这绝对不是错误，因为它在标准中明确规定。这是一个特点。

> 当编译器找不到 d.foo(123) 的匹配项时，编译器无法在基类中查找匹配的重载是否存在某种技术原因？

从技术上讲，编译器可以查看基类。**从技术上讲**。但如果这样做，就会违反标准设定的规则。

> 但我的问题是，基类函数隐藏的原因是什么？

除非委员会有人给出答案，否则我认为我们只能推测。基本上，有两种选择：

*   如果我在派生类中声明了同名的函数，请保持基类的同名函数可通过派生类直接访问
*   别

它可以通过掷硬币来确定（......好吧，也许不是）。

一般来说，想要一个与基类同名的函数的原因是什么？有不同的功能 - 您更有可能使用多态性。为了处理不同的情况（不同的参数），如果基类中不存在这些情况，则策略模式可能更适合处理该工作。因此，当您确实想要隐藏该功能时，最有可能的功能隐藏会生效。您对基类实现不满意，因此您提供自己的实现，并选择使用`using`，但仅在您需要时。

我认为这只是一种机制，让您在使用具有相同名称和不同签名的函数之前三思而后行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-12T17:35:47.933

我相信@Lol4t0 是非常正确的，但我会更强烈地陈述事情。如果你允许这样做，你最终会得到两种可能性：要么在几乎整个语言中进行*大量其他更改，要么你最终得到的东西几乎完全被破坏了。*

您为使其正常工作所做的其他更改将是彻底修改重载的完成方式——您至少必须更改所采取步骤的顺序，并且可能还需要更改步骤本身的细节。现在，编译器查找名称，然后形成一个重载集，解决重载，然后检查对所选重载的访问。

为了使这项工作更加顺利，您几乎*必须*更改它以*首先*检查访问，并且只将可访问函数添加到重载集。这样，至少@Lol4t0 的答案中的示例可以继续编译，因为`Base::foo`永远不会被添加到重载集中。

然而，这仍然意味着添加到基类的接口可能会导致严重的问题。如果`Base`最初没有包含`foo`，并且添加了一个*public* `foo`，那么调用`main`to`d.foo()`会突然做一些完全不同的事情，并且（再次）它将完全不受任何编写`Derived`.

要解决这个问题，您只需对规则进行相当根本的更改：禁止函数参数的隐式转换。除此之外，您将更改重载解决方案，因此在出现平局的情况下，函数的最派生/最本地版本比派生较少/外部范围更受青睐。有了这些规则，调用to`d.foo(5.0)`永远*无法解决*`Derived::foo(int)`。

然而，这只会留下两种可能性：要么对自由函数的调用与对成员函数的调用具有不同的规则（只允许自由函数进行隐式转换），要么将完全放弃与 C 的所有兼容性（即，也禁止隐式转换在*所有*函数参数中，这将破坏大量现有代码）。

总结一下：要在不完全破坏语言的情况下进行更改，您还必须进行许多其他更改。几乎可以肯定，可以创建一种以这种方式工作的语言，但是当你完成时，它不会是 C++，只需稍作改动——它将是一种完全不同的语言，与 C++*或*C不太一样，或其他任何东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T17:04:54.003

我只能提议，做出这个决定是为了让事情变得更简单。

想象一下，派生函数将重载基数。那么，下面的代码应该产生编译错误，还是使用`Derived`s 函数？

```
struct Base
{
private:
    void foo(float);
}

struct Derived: public Base
{
public:
    void foo(int);
}

int main()
{
    Derived d;
    d.foo(5.0f);
} 
```

根据现有的重载行为，这应该会产生错误。

现在想象一下，在第一个版本`Base`中没有`foo(float)`. 在第二个版本中出现。现在改变基类的*实现会破坏派生的**接口*。

[如果您是开发人员`Derived`并且无法影响开发人员`Base`并且很多客户使用您的界面，那么您现在的处境很糟糕。]

# php - 是否有任何自定义密码验证器？Zend 框架

> ID：11923891
> 
> 赞同：3
> 
> 时间：2012-08-12T16:39:44.247
> 
> 标签：php, zend-framework, passwords

我想问一下是否有任何方法可以验证我的密码，以使用 zend 表单验证器检查它是否包含至少 1 个字母、数字和符号。

据我所知，只有 alpha、alphanum 等： http: [//framework.zend.com/manual/1.7/en/zend.validate.set.html](http://framework.zend.com/manual/1.7/en/zend.validate.set.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T18:26:37.570

这是我使用的自定义密码验证器。您可以传递一组密码要求选项，它可以根据您的选项返回一个解释密码要求的字符串。

## 用法：

```
$passwordOpts = array('requireAlpha' => true,
                      'requireNumeric' => true,
                      'minPasswordLength' => 8);

$pwValidator = new My_Validator_SecurePassword($passwordOpts);

$password = new Zend_Form_Element_Password('password', array(
    'validators' => array($pwValidator),
    'description' => $pwValidator->getRequirementString(),
    'label' => 'Password:',
    'required' => true,
)); 
```

验证器输出的示例要求字符串如下所示：

> > 密码长度必须至少为 8 个字符，包含一位数字和一个字母字符。

## 验证者：

```
<?php

class My_Validator_SecurePassword extends Zend_Validate_Abstract
{
    const ALL_WHITESPACE = 'allWhitespace';
    const NOT_LONG       = 'notLong';
    const NO_NUMERIC     = 'noNumeric';
    const NO_ALPHA       = 'noAlpha';
    const NO_CAPITAL     = 'noCapital';

    protected $_minPasswordLength = 8;
    protected $_requireNumeric    = true;
    protected $_requireAlpha      = true;
    protected $_requireCapital    = false;

    protected $_messageTemplates = array(
        self::ALL_WHITESPACE => 'Password cannot consist of all whitespace',
        self::NOT_LONG       => 'Password must be at least %len% characters in length',
        self::NO_NUMERIC     => 'Password must contain at least 1 numeric character',
        self::NO_ALPHA       => 'Password must contain at least one alphabetic character',
        self::NO_CAPITAL     => 'Password must contain at least one capital letter',
    );

    public function __construct($options = array())
    {        
        $this->_messageTemplates[self::NOT_LONG] = str_replace('%len%', $this->_minPasswordLength, $this->_messageTemplates[self::NOT_LONG]);

        if (isset($options['minPasswordLength'])
            && Zend_Validate::is($options['minPasswordLength'], 'Digits')
            && (int)$options['minPasswordLength'] > 3)
            $this->_minPasswordLength = $options['minPasswordLength'];

        if (isset($options['requireNumeric'])) $this->_requireNumeric = (bool)$options['requireNumeric'];
        if (isset($options['requireAlpha']))   $this->_requireAlpha   = (bool)$options['requireAlpha'];
        if (isset($options['requireCapital'])) $this->_requireCapital = (bool)$options['requireCapital'];

    }

    /**
     * Validate a password with the set requirements
     * 
     * @see Zend_Validate_Interface::isValid()
     * @return bool true if valid, false if not
     */
    public function isValid($value, $context = null)
    {
        $value = (string)$value;
        $this->_setValue($value);

        if (trim($value) == '') {
            $this->_error(self::ALL_WHITESPACE);
        } else if (strlen($value) < $this->_minPasswordLength) {
            $this->_error(self::NOT_LONG, $this->_minPasswordLength);
        } else if ($this->_requireNumeric == true && preg_match('/\d/', $value) == false) {
            $this->_error(self::NO_NUMERIC);
        } else if ($this->_requireAlpha == true && preg_match('/[a-z]/i', $value) == false) {
            $this->_error(self::NO_ALPHA);
        } else if ($this->_requireCapital == true && preg_match('/[A-Z]/', $value) == false) {
            $this->_error(self::NO_CAPITAL);
        }

        if (sizeof($this->_errors) > 0) {
            return false;
        } else {
            return true;
        }
    }

    /**
     * Return a string explaining the current password requirements such as length and character set
     * 
     * @return string The printable message explaining password requirements
     */
    public function getRequirementString()
    {
        $parts = array();

        $parts[] = 'Passwords must be at least ' . $this->_minPasswordLength . ' characters long';

        if ($this->_requireNumeric) $parts[] = 'contain one digit';
        if ($this->_requireAlpha)   $parts[] = 'contain one alpha character';
        if ($this->_requireCapital) $parts[] = 'have at least one uppercase letter';

        if (sizeof($parts) == 1) {
            return $parts[0] . '.';
        } else if (sizeof($parts) == 2) {
            return $parts[0] . ' and ' . $parts[1] . '.';
        } else {
            $str = $parts[0];
            for ($i = 1; $i < sizeof($parts) - 1; ++$i) {
                $str .= ', ' . $parts[$i];
            }

            $str .= ' and ' . $parts[$i];

            return $str . '.';
        }
    }
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:57:20.527

Zend 框架中没有预制的密码验证器。

但是，如果您查看[编写验证器中的](http://framework.zend.com/manual/en/zend.validate.writing_validators.html)***示例 #3***，您会发现密码验证器应该是什么的一个很好的示例。

它工作得很好。我自己使用它的一个版本。

# algorithm - sortedArrayUsingComparator 是随机化 NSArray 的安全方法吗？

> ID：11923893
> 
> 赞同：3
> 
> 时间：2012-08-12T16:40:16.340
> 
> 标签：algorithm, sorting, random, comparison, nsarray

我之前在搞乱`NSArray`函数，我想我可能遇到了随机化 NSArray 的最简单方法：

```
NSArray *randomize(NSArray *arr)
{
    return [arr sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        return arc4random_uniform(3) - 1; // one of -1, 0, or 1
    }];
} 
```

从理论上讲，应该彻底随机化 NSArray。然而，经过深思熟虑，我想知道这是否可能不安全，理论上会变成无限循环，具体取决于 NSArray 使用的排序算法。

我在大小为 10 - 100000 的数组上对此进行了测试，我看到了线性性能差异（关于`N * (log10(N) + 2)`每个随机化的比较），这还不错。

但是，是否会出现 NSArray 理论上永远无法自行排序并导致应用程序崩溃的情况？在我看来，这不应该发生，但你永远不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:23:41.620

我认为这取决于底层的排序算法。

考虑一下如果底层排序是冒泡排序会发生什么。这意味着每次比较一对元素时，都有 1/3 的机会交换它们（如果比较使它们出现乱序）。因此，如果您要使用此比较函数对包含 n 个元素的数组进行排序，则算法在每一步终止的概率等于没有任何比较评估为“无序”的概率。由于每次比较都以 1/3 的概率表示“无序”，这意味着算法在每次迭代中终止的概率为 (2/3) ^n。这意味着算法终止前的预期迭代次数为 (3/2) ^n = 3 ^n / 2 ^n. 如果您尝试对一个大小合理的数组（例如，n = 1000）运行此算法，那么预期的迭代次数将是惊人的巨大；n = 1000 给出 1.233840597×10 ^(176)次预期迭代！该算法最终将终止，但预期的运行时间是如此之长，以至于从实际的角度来看它实际上是无限的。

另一方面，如果您尝试使用不同的算法，例如选择排序，则不能保证获得均匀分布。例如，考虑算法的第一遍，它将找到放置在位置 1 的元素。数组中的每个元素都应该（如果分布确实是均匀的）有 1/n 的概率被放置在第一个位置。但这种情况并非如此。请注意，第一个元素将保留在第一个位置，除非它与某些东西交换。仅当比较在第一次扫描期间的任何时候出现 +1（或 -1，取决于内部）时，才会发生这种情况。所有比较返回不同值的概率是 (2/3) ^(n-1)，与 1/n 不同。事实上，一旦您完成排序，序列中的第一个元素最终会排在最前面是天文数字。因此，即使算法将终止，也不能保证您获得均匀随机分布。

如果您尝试使用诸如快速排序、堆排序或合并排序之类的东西，那么算法最终将终止，但我不确定它是否保证是随机的。我会考虑一下这是否是均匀随机的，然后更新我的答案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:27:48.150

这个问题已经解决了。[http://en.wikipedia.org/wiki/Knuth_shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)

templatetypedef 也对此发表了评论。

Fisher-Yates Shuffle a`mutableCopy`非常快，而且随机化效果更好。对于小型数组（10 个元素），您的建议比 Fisher-Yates shuffle 稍快，如下所示。对于大型数组（1000000 个元素），Fisher_Yates 比你的快 4 倍。如果您可以返回您制作的可变副本，那么对于 10 个元素，Fisher-Yates 也更快。

我会选择高级的随机播放算法，它对于小尺寸和大尺寸都很快。

这是程序——你知道如何使用仪器！

```
#import <Foundation/Foundation.h>

static NSArray * imp_RandomizeUsingSortedArrayUsingComparator(NSArray * arr) {
    return [arr sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        return arc4random_uniform(3) - 1; // one of -1, 0, or 1
    }];
}
__attribute__((__noinline__)) static void RandomizeUsingSortedArrayUsingComparator(NSArray * arr) {
    @autoreleasepool { imp_RandomizeUsingSortedArrayUsingComparator(arr); }
}

static NSArray * imp_RandomizeUsingMutableCopy(NSArray * arr) {
    if (1 >= arr.count) {
        return [arr.copy autorelease];
    }
    NSMutableArray * cp = [arr.mutableCopy autorelease];
    u_int32_t i = (u_int32_t)cp.count;
    while (i > 1) {
        --i;
        const u_int32_t j = arc4random_uniform(i);
        [cp exchangeObjectAtIndex:i withObjectAtIndex:j];
    }
    // you may not favor creating the concrete copy
    return [cp.copy autorelease];
}

__attribute__((__noinline__)) static void RandomizeUsingMutableCopy(NSArray * arr) {
    @autoreleasepool { imp_RandomizeUsingMutableCopy(arr); }
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        NSMutableArray * filled = [NSMutableArray array];
        for (NSUInteger i = 0; i < 1000000; ++i) {
            [filled addObject:@""];
        }

        NSArray * concrete = filled.copy;
        for (NSUInteger i = 0; i < 100; ++i) {
            RandomizeUsingSortedArrayUsingComparator(concrete);
            RandomizeUsingMutableCopy(concrete);
        }
        [concrete release];
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:46:24.457

让我们假设 NSArray 使用或多或少的标准稳定合并排序算法。比较器只返回 -1 和 1 可能是最好的，因为合并排序不会将元素与它们自身进行比较。

对于四元素数组 1 2 3 4，mergesort 将前半部分和后半部分随机化，然后合并。如果 L = [ab] = [1 2] 或 [2 1]，并且 R = [cd] = [3 4] 或 [4 3]，则合并决策树（抑制非决策）看起来像

```
 [a b c d]   [a c b d]
      /           /
   [a]-------[a c]-[a c d b]
  /
[]
  \   
   [c]-------[c a]-[c a b d]
      \           \
       [c d a b]   [c a d b] 
```

[LLRR] 形式的序列（例如，[1 2 3 4]、[2 1 3 4]、[1 2 4 3]、[2 1 4 3]）应该是总概率 1/6（每个 1/24 ) 但概率为 1/4。[RRLL] 同上。[LRLR] 形式的序列应该是总概率 1/6，但概率是 1/8。[LRRL]、[RLLR]、[RLRL] 同上。*这并不统一。*

**更重要**的是，您违反了比较器给出与[总订单](http://en.wikipedia.org/wiki/Total_order)一致的确定性答案的合同（显然隐含在我阅读的文档中，但该合同的紧密变体非常常见） 。这意味着 Apple 的代码可以通过抛出异常或不终止来自由违反合同的结束。它真的会永远运行吗？可能不会，但如果确实如此，并且您向 Apple 提交了错误报告，他们会笑着告诉您并 WONTFIX 您。我想大多数程序员都会同意他们的观点。依赖软件库的未指定方面不是一个好习惯。

# php - 用get方法执行

> ID：11923918
> 
> 赞同：-2
> 
> 时间：2012-08-12T16:43:32.363
> 
> 标签：php, post

我在 PHP 5.3.15 上的 VPS (Linux) 上运行 CentOS。我需要知道如何发布获取数据。当我进入页面时，它是空白的。

这是代码：

第一次尝试：

```
$a = $_POST['a'];
$c = $_POST['b'];
$c = $_POST['c'];
$d = $_POST['d'];
$k = include("newb.php?a=$a&b=$b&c=$c&&d=$d");
exec("php newb.php?a=$a&b=$b&c=$c&&d=$d"); 
```

第二次尝试：

```
$a = $_POST['a'];
$c = $_POST['b'];
$c = $_POST['c'];
$d = $_POST['d'];
$k = include("newb.php?a=$a&b=$b&c=$c&&d=$d");
exec("php $k"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:52:30.960

查询字符串（带有 的部分`?key=value`）是 URL 的一部分。它仅适用于您的地址栏中。您不能使用查询字符串调用命令行脚本，也不能在包含的文件上使用它们。

*   对于包含的文件，只需*包含文件*，它就可以访问您声明的任何变量：

    ```
    include("newb.php"); 
    ```

*   对于执行的文件，将参数传递给命令，就像在命令行上一样：一次一个，用空格分隔：

    ```
    exec("php newb.php $a $b $c $d"); 
    ```

    然后，通过 访问它们`$argv`。

请注意，您的代码中存在*严重*漏洞。您正在传递要在命令行上执行的任意值。如果攻击者发布`"`rm -rf /`"`到您的程序，您将盲目地删除服务器上的每个文件。您绝**不能**盲目地将用户提交的数据作为代码执行，这实际上就是您在这里所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:46:24.370

无需为包含使用查询字符串（对于不起作用的初学者）。查询字符串是 URI 的一部分。你所拥有的不是 URI，它只是一些文件名。

包含的文件已经可以访问定义的变量。

PS您为变量提供的名称并不是很清晰易懂；）

PPS 你想做什么？因为几乎可以肯定有更好的方法。

# java - 当返回类型未知时，如何避免过多的 if 条件？

> ID：11923920
> 
> 赞同：0
> 
> 时间：2012-08-12T16:43:45.100
> 
> 标签：java, design-patterns

返回类型为动态时如何避免过多的 if 条件？

我知道如果条件和值是静态的，我们可以创建一个带有键和值的哈希图，也可以避免太多的 if 条件。

在下面的示例中，每个月的价格因客户而异...我需要添加 12 个相同的 if 语句...假设该字段
不是月份...他们最终可能会得到更多大于 100 或 200 if's...ex: for year...1900 to 2000

```
Example,

public String getPrice(int Month) {
   String price = "";
   switch (month) {
        case 1:
          price = customerTable.getJanPrice();
          break;
        case 2:
          price = customerTable.getFebPrice();
          break;
         ...........
    }
    return price;
} 
```

你能帮我提出你的建议/意见吗？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:54:28.367

使用您想要的价格创建一个枚举。

```
public enum Month 
{
    SEPTEMBER (3.33),
    OCTOBER (4.85),
    NOVEMBER (5.98),
    etc ;

    public final double Price;

    Month(double monthPrice)
    {
        this.Price = monthPrice;
    }        
} 
```

然后访问该价格：

```
Month.SEPTEMBER.Price 
```

**编辑** 因为数据在运行时更改并且它们是“无限”数量的可能性，所以使用类将是一个更易于管理的选项。

```
public class Year
{   
    public final List<Month> Months;

    public Year(List<Month> months)
    {
        Months = months;
    }
}

public class Month
{
    public final double Price;

    public Month(double price)
    {
        Price = price;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:17:07.147

如果（假设这里）为每个客户返回的“数据对象”是某种 hashmap (kv-store) 怎么办。

然后使用一些约定，您可以使用`<day,month,year>`-combi 构建一个密钥，该密钥用于在返回的数据对象中查找该特定组合的价格。

# java - Java中的守护线程是否创建？

> ID：11923922
> 
> 赞同：-3
> 
> 时间：2012-08-12T16:43:48.787
> 
> 标签：java, multithreading

我对Java中的守护线程感到困惑。在某处它说不创建守护线程，而只是控制，而其他人说也可以创建守护线程。但是怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:50:11.997

守护线程只是一个普通线程。唯一的区别是它不会阻止应用程序终止。如果应用程序的所有非守护线程都已完成，则应用程序终止。

# regex - emacs 函数重新搜索向前解释 \( \) 正则表达式中的组字符

> ID：11923923
> 
> 赞同：5
> 
> 时间：2012-08-12T16:43:50.753
> 
> 标签：regex, emacs, regex-group

我成功地使用 replace-regexp 交互地用非引用版本替换了下面显示的缓冲区中引用文本的每个实例。我搜索的正则表达式是

```
\"\([^\"]*\)\" 
```

我插入的 NEWTEXT 是 \1。

```
* "PROJECT START"
:PROPERTIES:
:ID: 1
:Unique_ID: 17
:DURATION: "0 days"
:TYPE: "Fixed Work"
:OUTLINE_LEVEL: 1
:END: 
```

交互式地，上面的文字变成了下面的文字。

```
* PROJECT START
:PROPERTIES:
:ID: 1
:Unique_ID: 17
:DURATION: 0 days
:TYPE: Fixed Work
:OUTLINE_LEVEL: 1
:END: 
```

我尝试通过插入以下两行以编程方式进行相同的搜索和替换

```
(while (re-search-forward "\"\([^\"]*\)\"" nil t)
  (replace-match "\1" nil nil )) 
```

在缓冲区的顶部并执行，但它只是返回 nil 而没有找到单个匹配项。

当我省略

```
\( \) 
```

分组并用 \& 替换 \1

```
(while (re-search-forward "\"[^\"]*\"" nil t)
  (replace-match "\&" nil nil )) 
```

我将每个带引号的字符串都替换为“&”。

```
* &
:PROPERTIES:
:ID: 1
:Unique_ID: 17
:DURATION: &
:TYPE: &
:OUTLINE_LEVEL: 1
:END: 
```

我在这两个函数的文档中看到的所有内容都表明它们应该识别这些特殊字符，并且在本论坛上回答其他问题的示例中使用了这些特殊字符。

谁能帮我理解为什么分组和 \&、\N、\ 字符没有被正确解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T16:49:28.970

您需要为“(”、“)”和“\1”转义“\”。IE：

```
(while (re-search-forward "\"\\([^\"]*\\)\"" nil t)
  (replace-match "\\1" nil nil )) 
```

# vb.net - 在 Visual Basic 2010 中使用字符串

> ID：11923924
> 
> 赞同：-1
> 
> 时间：2012-08-12T16:43:58.100
> 
> 标签：vb.net, string

我必须在 Visual Basic 中创建一个名为 StringWork 的类。

```
Public Class StringWork 
```

现在我在名为 Working 的类中编写了一个共享函数，它可以接受一个字符串或一个字符串和布尔值。

```
Public Shared Function Working(ByVal SingleString as string, optional BValu  as Boolean = true)as string
    if(working(SingleString))then
    'The handling of the string
    else if (working(SingleValue, BValue) then
    'do something else with string 
    end if
end function 
```

我写的函数是返回一个字符串。我可以访问传递的字符串并编辑字符串中的字符或更改字符的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:05:21.723

您使用该可选参数来确定如何处理该字符串：

```
Public Shared Function Working(ByVal singleString as string, _
                               Optional bValue as Boolean = True) As String
  If bValue Then
    'Handle the true part manipulating the result string
  Else
    'Handle the false part manipulating the result string
  End If

End Function 
```

如果你这样调用这个函数：

```
Dim test As String = StringWork.Working("I am Spartacus") 
```

它将使用 bValue = true 调用该工作函数。

从代码和帖子中，bValue 所代表的内容都不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:03:10.260

在 VB.NET 和其他 .NET 语言中，字符串是不可变的。通常，如果您需要修改传递给您的方法的字符串，您将返回修改后的字符串。但是，如果您需要它来修改参数，则可以指定它是“ByRef”参数，在这种情况下，您可以将其设置为指向一个新的字符串对象，该对象将影响传递给方法作为参数。如果您需要一个真正可变的字符串，您将需要一个字符数组或一个 StringBuilder 对象。

# c++ - 在列表视图中禁用水平滚动条

> ID：11923925
> 
> 赞同：1
> 
> 时间：2012-08-12T16:44:25.573
> 
> 标签：c++, windows, winapi

我有一个列表视图，我想在其中禁用水平滚动条。

基本上，我知道我的所有数据都不会超过单列的宽度，但是如果将足够多的条目添加到列表视图中，则会弹出垂直滚动条，减少可用宽度，从而弹出水平滚动条。

~~我正在考虑如何在添加垂直滚动条之前捕获一条消息，然后重新调整列的大小以腾出足够的空间，但我不知道我需要捕获什么消息才能做到这一点。~~

**编辑：**
有谁知道在列表视图中的项目被删除后是否有消息发送？`LVN_ITEMCHANGED`似乎只有在添加项目后才会发送。并且`LVN_DELETEITEM`仅在删除项目之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:01:57.150

您可以将消息： LVM_SETCOLUMNWIDTH 发送到列表视图，其中 cx 参数设置为 LVSCW_AUTOSIZE_USEHEADER

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:47:22.317

好吧，我想出了一个解决方案。
但是有一个错误，如果我只删除一个项目，它不会调整列的大小。

```
case LVN_DELETEITEM:
{
    LPNMLISTVIEW listView = (LPNMLISTVIEW) lParam;

    // After an item is deleted,
    // if there is not a vertical scroll bar and GWL_USERDATA is TRUE,
    // resize the column back to normal.
    if (!(GetWindowLong(listView->hdr.hwndFrom, GWL_STYLE) & WS_VSCROLL) &&
          GetWindowLong(listView->hdr.hwndFrom, GWL_USERDATA) == TRUE)
    {
        const int ColWidth = ListView_GetColumnWidth(listView->hdr.hwndFrom, 0);
        ListView_SetColumnWidth(listView->hdr.hwndFrom, 0, ColWidth + GetSystemMetrics(SM_CXVSCROLL));
        SetWindowLong(listView->hdr.hwndFrom, GWL_USERDATA, FALSE);
    }

    break;
}

case LVN_ITEMCHANGED:
{
    LPNMLISTVIEW listView = (LPNMLISTVIEW) lParam;

    // After an item is added, if there is a horizontal scrollbar,
    // resize the column and set GWL_USERDATA to TRUE.
    if (GetWindowLong(listView->hdr.hwndFrom, GWL_STYLE) & WS_HSCROLL)
    {
        const int ColWidth = ListView_GetColumnWidth(listView->hdr.hwndFrom, 0);
        ListView_SetColumnWidth(listView->hdr.hwndFrom, 0, ColWidth - GetSystemMetrics(SM_CXVSCROLL));
        SetWindowLong(listView->hdr.hwndFrom, GWL_USERDATA, TRUE);
    }

    break;
} 
```

我仍然希望看到一个更好的解决方案，但这目前有效。

# html - 使用 HTML5 将文件上传到 Google Drive API

> ID：11923927
> 
> 赞同：4
> 
> 时间：2012-08-12T16:44:40.333
> 
> 标签：html, file-upload, google-drive-api

我正在创建一个使用 Google Drive API 的 Google Chrome 扩展程序。我必须使用 HTML5 上传文件。

对于文本文件，没有问题。但是当我想上传一个二进制文件时，总是有错误。

因此，当我使用 HTML5 中的 FileReader 作为 BinaryString 上传文件时，我的图像已损坏，无法读取。

当我使用 Base64 编码（正文部分中的标头“Content-Transfer-Encoding: base64”）时，我有一个 400 Bad Request -> Malformed multipart body。

你能帮我吗 ？谢谢 ：）

PS：我不想使用Google Drive SDK，我更喜欢编写所有代码。

```
var bb, reader;

var meta = {
"title": "mozilla.png",
"mimeType": "image/png",
"description": "Mozilla Official logo"
};

var xhr = new XMLHttpRequest();
xhr.open('GET', 'https://developer.mozilla.org/media/img/mdn-logo-sm.png', true);
xhr.responseType = 'arraybuffer';

xhr.onload = function(e){
if(this.status == 200){
    bb = new WebKitBlobBuilder();
    bb.append(this.response);
    console.log('Download OK');

    reader = new FileReader();
    reader.readAsDataURL(bb.getBlob('image/png'));
    reader.onloadend = function(e){
        console.log('Reader OK');

        var bound = 287032396531387;

        var parts = [];
        parts.push('--' + bound);
        parts.push('Content-Type: application/json');
        parts.push('');
        parts.push(JSON.stringify(meta));
        parts.push('--' + bound);
        parts.push('Content-Type: image/png');
        parts.push('Content-Transfer-Encoding: base64');
        parts.push('');
        parts.push(reader.result);
        parts.push('--' + bound + '--');

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart", true);
        xhr.setRequestHeader("Authorization", "Bearer token123456");
        xhr.setRequestHeader("Content-Type", "multipart/mixed; boundary=" + bound);

        xhr.onload = function(e){
            console.log("DRIVE OK", this, e);
        };

        xhr.send(parts.join("\r\n"));
    }
}
};

xhr.send(); 
```

对于二进制上传，只需修改这一行：

```
reader.readAsDataURL(bb.getBlob('image/png')); 
```

以此

```
reader.readAsBinaryString(bb.getBlob('image/png')); 
```

并删除这一行：

```
parts.push('Content-Transfer-Encoding: base64'); 
```

我尝试通过首先发送元数据来创建一个文件，然后在这篇[文章](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api/10323612#10323612)中上传内容，但上传内容时总是出现 404 错误，但这是另一个故事......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T04:06:01.663

只包含 \r\n 且不需要在请求末尾添加其他空格的空行。尝试添加另一个`parts.push('');`之后`parts.push('--' + bound + '--');`

*编辑：*

首先，我想说您不应该将文件作为原始二进制字符串上传，因为您的二进制数据包含控制字符，这可能会破坏您的请求并导致文件损坏。数据应以 Base64 编码。[你可以在这里](https://stackoverflow.com/questions/201479/what-is-the-use-of-base-64-encoding)阅读更多

如果您签`reader.result`入调试，它将包含：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAABHCAMAAABoMgR/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJlQTFRFAAAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAEgICExAQIAQFIyAgLwYHMjAwPggJQkBATAoLUlBQWwwOYmBgaQ4QcXBweBASgYCAhxIUkIKCkY+PlRQXoZ+fpBYZrYaGsK+vsxgbwL+/wRod0Bwg0M/P3h4i4N/f7SAk7+/v9pCS////7yG8VgAAAA90Uk5TABAgMEBQYHCAn6+/z9/vBoviEQAABBtJREFUWMOtmA13mzoMhumWdd3uWpuPACUEWIkXA3HI+P8/7kq2AYOBNj1Tz2nA9oOl10KAHUfZw+7p4/b41ZnY7j9yn708PQzww09yv7186+lf5FP2qHBJJ1y0H7am9JCR8z/BAa3bOy1B/zH+lzW6KJt3+CfHeYSfYqGboX9eylRMC5FB/7Pj/IBRdicPoTkOMMIgZWlAEmtIBn1fHFjx0JIGPQt40wiWSZGoZ/Mc2ncLuMgoABAQpXCWEi9hraAWv4KXFP1G1dIYBVSy1ha/iHOM12PzmdLU4hfwBhUj6VRKnqA/GfBxvYWLVCbjMDVLwrBoUOM9/JXAw0rWazgqhp63LMTIa4+mjBdeCiMl2IoyNq4wxWWaoGUwGzjASKxiKALwq6gHj+AK5RyXaaIMZoaxgga9AmlipWu5LJ1ISKwZNYVsnEmeeR66Z+O45KzPaBF7ujkkibkWRSiC0MbVkusxhLShbOesxcCCjI+J1WYWLhItXI9DAy5ASNtel3C4hIUXtBeOyduXkpKTgPGYZI3qqU6R319ihgtIELCABBi1ktcTMvvTNtZ4lXent1fpRRIuSVfj7Jzrw6ARnDcYlEyJox9dSHeqLsdXlyzimVF4CqyfWZYCmkBtxHzz96RyT+djl5PUxmXexaO+ZEhDfdfJ4nNwo4qQeo43Wt/WiERaahZodMJ1UaIJLrJ+LmZ6rxesqM1bn6oQTbzm0goyJii4ystErydN+qqNpSwUK9WGDmkndAbWKuS+akN+6Fpk4zKEelCud4SNzzVQNxMr1UY9ubTQsSEDRFCXiewN16pNraUPWsFl0tP5Hd6USbla61A6Jp9YWG2YIaIZyGalDWXe1BCennCQkX4Ah0rrieEBaJQIU4hVnI2612b6yhR69xnX0PGOyUbfOWVts+D9DBeBMWMw+s7wmsHgl41TXSuGwHG2YP4w98KpBT3e2/iOUszfOOrll6sJXppKN9aryBru59J+/x1sciLtTz63Q49H3Wes+nf4Fby59h2nPD+pJmln1QHnZ8VBWzXF8fig6SsZmrRFFz0b/kKdJSS3cVIp/NXCiXtR5/stPBpimuPkVZ/nGziRsUUGjhes9tjQD7ls4D7qRma41AIwPeS2jpO3rvMtvFO66CHHDdy95eQdnFTrODzB3sX94zLu9/3ruBziLuORctw9r+N5pKdYwm/y4m/VBn5113G5aPtuC+/OGzimTGXhp3Hdc5XSa/gF7xsD31fV+eiOWQfUzV3Hu/w2wQc7DPiQ+wrHL6mbEegivr+NeKfX/Si/pL7Jk03cR59GHBcol/+f1Veke7m/VmGl/A74d0yV6jP0s/yGl5X+cL7eUSXffFXl/8H3u/Pw4zO7Bztj7+Le7YdnY+9C7Zw8fnznZDfsnPwP488L21waSrUAAAAASUVORK5CYII= 
```

如您所见，该`readAsDataURL`方法 DID 将您的数据编码为 base64，但因为它用于生成[Data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，一个格式为`data:[<MIME-type>][;charset=<encoding>][;base64],`在编码数据开头添加的字符串。这是导致`400 Bad Request`错误的罪魁祸首（Malformed multipart body）。解决方案是在将其添加到请求正文之前消除此字符串：

```
parts.push(reader.result.replace(/^data:image\/(png|jpg);base64,/, "")); 
```

我已经测试过了，它工作正常。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 Razor 中使用 FormsAuthentication 等创建自定义登录系统？

> ID：11923934
> 
> 赞同：1
> 
> 时间：2012-08-12T16:45:52.743
> 
> 标签：asp.net-mvc-3, razor, login-system

对不起，大标题。

所以我一直在做一些关于制作登录系统的研究。我已经自己做了，但发现了一种更安全的方法。据我所知，这个登录系统的四个基本组成部分是：

*   表单身份验证
*   会员提供者
*   角色提供者
*   主要的

我将此作为我的基本用户模型：

```
public class User
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Password { get; set; }
    public string PictureUrl { get; set; }
    public string Role { get; set; }
    public string AccessToken { get; set; }
} 
```

这只是为了保留数据库中的数据。

我仍然想将此模型与上面列出的组件一起使用。

有谁知道一个很好的详尽的教程，它解释了如何使用 MVC 3 Razor 中的上述组件创建自定义登录系统？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:24:51.657

You can build a custom 'login system' by implementing a custom version of `MembershipProvider` and `RoleProvider` that uses your own database. Then you can re-use all the rest of the built in authentication and authorization stuff.

MSDN has some details on how to build a `MembershipProvider` [here](http://msdn.microsoft.com/en-us/library/f1kyba5e) and details on a custom `RoleProvider` [here](http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx). Samples implementations are included.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:59:18.757

您可以使用这个开源项目：

[https://github.com/TroyGoode/MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)

# javascript - 脱离上下文的 JQuery 函数调用

> ID：11923935
> 
> 赞同：0
> 
> 时间：2012-08-12T16:45:57.177
> 
> 标签：javascript, jquery

向我提供了一个 js/css 模板。它在交互式事件处理方面很有天赋，但我在 js/jquery 方面没有天赋。

在其 js 库中，有一个 .js 文件，该文件有一些代码，例如：

```
(function ($) {
...
})(jQuery); 
```

大多数事情都发生在其中。

在这个上层函数中有一些“小独立函数”。

在这个上层/包装器/非命名函数中的一些行，将这些称为“小独立函数”。

另外，我想调用这些“小独立函数”，但我不知道如何。

因为在“ `(function ($) {...})(jQuery);`”中那些称这些“小独立函数”的行中有一些局部变量。

我认为一些代码可以帮助我说明：

```
(function ($) {

if(...){
var items;

addItem(items)
}

function addItem(funcitems){}
...
})(jQuery); 
```

我的问题是，我如何调用 additem，如何将“项目”传递给它？

我想在自定义事件之后在页面的自定义部分调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:49:54.533

由于它们没有以任何方式暴露出来，因此没有一些疯狂的 js hack 或编辑代码是不可能的。如果您确定该库没有公开等效方法，那么唯一真正的解决方案是对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:54:17.680

您有两种选择来实现这一目标：

1）将您的代码添加到此匿名函数中，以便您的代码与这些封装函数处于同一范围内。（不太好，因为您正在损害图书馆）

2) 进行变量赋值并使用您需要的函数添加返回语句：（更好，因为您不会将库代码与您自己的代码混合，而只是公开一些函数）

```
var extLib = (function ($) {
   ...
   return{
      /* return the functions you need - written in object literal notation */
      addItem : addItem
      /*[,exposedName : internalName] */
   }
})(jQuery); 
```

现在您可以`addItem`通过调用来访问该函数`extLib.addItem(item)`。

# memory - qemu 内存操作

> ID：11923941
> 
> 赞同：8
> 
> 时间：2012-08-12T16:46:27.040
> 
> 标签：memory, virtualization, qemu, kvm

我打算使用 Qemu 为执行 x86 客户操作系统生成内存跟踪。

根据 tcg wiki 页面，Qemu 使用一些帮助程序来生成目标（来宾）内存的加载/存储。这个指令列表是`tcg_gen_qemu_ld8s/u`, `tcg_gen_qemu_ld16s/u`, `tcg_gen_qemu_ld32s/u`, `tcg_gen_qemu_ld64`。（我们有一套类似的商店说明）。我在*target-i386/translate.c*文件中捕获对上述函数的所有调用

但是，我仍然缺少某些指令的加载/存储，例如

```
cmp ecx, [r12+0x4]
mov r10b, [r13+0x0]
mov byte [rax+0xf0000], 0x0
mov byte [rax+rdx], 0x0 
```

问题 ：

1.  有人可以指出我缺少的其他加载/存储点（直接或间接）吗？
2.  qemu 是否为访问来宾内存（如`guest_read()`）提供了单一入口点功能，可用于跟踪来自来宾内存的所有负载？
3.  有人可以指出一个好的文档，我可以在其中了解 qemu 如何维护客户内存的状态？

抱歉朋友们在之前的邮件中的误导性说明。

```
cmp ecx, [r12+0x4]
mov r10b, [r13+0x0]
mov byte [rax+0xf0000], 0x0
mov byte [rax+rdx], 0x0 
```

似乎所有上述说明都被`tcg_gen_ld/st`助手覆盖了。

但是现在我偶然发现了另一个问题：
我最初认为与客户内存的所有交互都是通过 translate.c 文件中的帮助指令发生的。但是，我发现一些指令的帮助程序功能，例如`cmpxcgh8b`并且`cmpxchg16b`实际上正在访问客户内存。

那么，这是否意味着读取客户记忆的入口点不止一个。有人可以解释一下 ldq 和 stq 指令是如何翻译来访问客户内存的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-11T18:49:02.707

加载数据的其他函数称为`cpu_ld*_data`and `cpu_st*_data`， or `cpu_ld*_data_ra`and `cpu_st*_data_ra`。该`_ra`版本有一个附加参数，即生成代码中调用者的地址。它用于计算错误指令的地址，以防加载或存储产生页面错误。

例如，grepping for`cmpxchg8b`给出

```
target/i386/mem_helper.c:void helper_cmpxchg8b(CPUX86State *env, target_ulong a0) 
```

在那个函数里面：

```
uintptr_t ra = GETPC();
...
oldv = cpu_ldq_data_ra(env, a0, ra);
newv = (cmpv == oldv ? newv : oldv);
/* always do the store */
cpu_stq_data_ra(env, a0, newv, ra); 
```

# objective-c - OCMock：不包括可选方法的模拟协议

> ID：11923942
> 
> 赞同：7
> 
> 时间：2012-08-12T16:46:44.183
> 
> 标签：objective-c, ios, tdd, ocmock

我正在使用 OCMock 在我的 iOS 应用程序测试中创建模拟，并且我想创建不实现所有可选方法的协议模拟。

如果不清楚我的意思......这里有一些代码：

```
// Protocol definition
@protocol MyAwesomeProtocol
    - (void)doThatRequiredThing;
    @optional
    - (void)doThatOptionalThing;
@end

...

// In a test
id mock = [OCMockObject mockObjectForProtocol:@protocol(MyAwesomeProtocol)];

// This should return YES:
[mock respondsToSelector:@selector(doThatRequiredThing)];
// This should return NO:
[mock respondsToSelector:@selector(doThatOptionalThing)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:29:17.200

我也达到了这个限制。基本思想是覆盖`respondsToSelector`: （OCMock 不能可靠地模拟它）。

我做了以下课程，为你做这件事。然后，您可以按如下方式使用它：

扩展`GCOCMockOptionalMethodSupportingObject`并实现你的协议

```
@interface GCTestDelegate : GCOCMockOptionalMethodSupportingObject <GCDelegate>
@end

@implementation GCTestDelegate

//required methods
- (void)requiredMethod{
}
@end

// create your testdelegate
self.classBeingTested.delegate =  [OCMock partialMockForObject:[GCTestDelegate new]];
[self.classBeingTested.delegate markSelectorAsImplemented:@selector(optionalMethod:)];
[[self.classBeingTested.delegate expect] optionalMethod:self.classBeingTested];
[self.classBeingTested doSomethingThatwillCheckIfYourDelegateRespondsToYourOptionalMethod]; 
```

如果你不打电话`markSelectorAsImplemented`，那么你`classBeingTested`将得到 NO`respondsToSleectorForThatMethod`

我已经把它的代码放在这里了。我用这个效果很好。感谢 #iphonedev 上的 jer 让我走上了这条道路（压倒一切`respondsToSelector`的是他的想法，我正在做一些疯狂的运行时方法添加 - 这更干净我认为）。

这是代码

```
/**
 * This class is specifically useful and intended for testing code paths that branch
 * pending implementation of optional methods.
 * OCMock does not support mocking of protocols with unimplemented optional methods.
 * Further compounding the issue is the fact that OCMock does not allow mocking of
 * respondsToSelector (in fact, it does but the behaviour is undefined),
 * As such this class can be extending to implement a given protocol, the methods can be mocked/expected
 * as normal, but in addition we can tell the class to report it conforms to a protocol method or not.
 *
*/
@interface GCOCMockOptionalMethodSupportingObject : NSObject

- (void)markSelectorAsImplemented:(SEL)aSelector;
- (void)unmarkSelectorAsImplemented:(SEL)aSelector;

@end

#import "GCOCMockOptionalMethodSupportingObject.h"

@interface GCOCMockOptionalMethodSupportingObject ()
@property(nonatomic, strong) NSMutableArray *implementedSelectors;

@end

@implementation GCOCMockOptionalMethodSupportingObject {

}
//////////////////////////////////////////////////////////////
#pragma mark init 
//////////////////////////////////////////////////////////////

- (id)init {
    self = [super init];
    if (self) {
        self.implementedSelectors = [NSMutableArray array];
    }

    return self;
}

//////////////////////////////////////////////////////////////
#pragma mark public api
//////////////////////////////////////////////////////////////

- (void)markSelectorAsImplemented:(SEL)aSelector {
    if (![self isImplemented:aSelector]) {
        [self.implementedSelectors addObject:NSStringFromSelector(aSelector)];
    }
}

- (void)unmarkSelectorAsImplemented:(SEL)aSelector {
    for (NSString *selectorValue in [self.implementedSelectors mutableCopy]) {
        SEL storedSelector = NSSelectorFromString(selectorValue);
        if (sel_isEqual(aSelector, storedSelector)) {
            [self.implementedSelectors removeObject:selectorValue];
            break;
        }
    }
}

//////////////////////////////////////////////////////////////
#pragma mark private impl
//////////////////////////////////////////////////////////////

- (BOOL)isImplemented:(SEL)aSelector {
    for (NSString *selectorValue in self.implementedSelectors) {
        SEL storedSelector = NSSelectorFromString(selectorValue);
        if (sel_isEqual(aSelector, storedSelector)) {
            return YES;
        }
    }
    return NO;
}

//////////////////////////////////////////////////////////////
#pragma mark overridden
//////////////////////////////////////////////////////////////

- (BOOL)respondsToSelector:(SEL)aSelector {
    if ([self isImplemented:aSelector]) {
        return YES;
    } else {
        return [super respondsToSelector:aSelector];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T16:09:02.580

最简单的做法是创建一个包含您想要实现的选择器的类。不需要任何实现。然后，您创建该类的类模拟而不是协议模拟，并以相同的方式使用它。

例如：

```
@interface MyAwesomeImplementation : NSObject <MyAwesomeProtocol>
- (void)doThatRequiredThing;
@end
@implementation MyAwesomeImplementation
- (void)doThatRequiredThing {}
@end

id mock = OCMStrictClassMock([MyAwesomeImplementation class]); 
```

# php - 在 Symfony2 和 FOSUserBundle 中，覆盖 login_check

> ID：11923948
> 
> 赞同：4
> 
> 时间：2012-08-12T16:48:07.550
> 
> 标签：php, security, symfony, fosuserbundle

在用户通过身份验证的那一刻，我需要检查他的角色以将他重定向到正确的页面（两个不同的页面用于两个不同的角色）。

我没有在文档中找到如何覆盖 login_check。直接从捆绑包中，它使用 security.yml 配置代理来告诉引擎转到一个唯一的默认页面。有什么线索吗？

注销同样的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:19:37.903

如果我理解正确，您想根据其角色将新登录/注销的用户重定向到适当的路线吗？

[**这**](http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/)是有关如何使用表单处理程序在登录/注销时进行重定向的教程。

# node.js - 未找到模板但存在

> ID：11923950
> 
> 赞同：0
> 
> 时间：2012-08-12T16:48:15.243
> 
> 标签：node.js, express, dust.js

我有一个`index.html`文件，我正在尝试使用dustjs-linkedin 渲染，但出现错误：

```
500 Error: Template Not Found: C:\Users\Gilbert\WebstormProjects\NodeOfGames\views\index.html 
```

文件`index.html`肯定在那里。我`app.engine('html', require('dustjs-linkedin').render);`用来渲染带有灰尘的 .html 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:45:45.087

dust.render 在dust.cache 中查找命名模板，在您的情况下命名为

```
C:\Users\Gilbert\WebstormProjects\NodeOfGames\views\index.html 
```

dust.render 仅呈现已编译的模板 - 加载时会自动放入dust.cache。

我不认为模板在那里。如果是，它可能不是以上述名称命名的。

您可能想要的是dust.renderSource。即便如此，您仍需要传入上下文和回调 - 我不确定它在 express 中是如何工作的。

# java - Java 持久实体最佳实践

> ID：11923951
> 
> 赞同：1
> 
> 时间：2012-08-12T16:48:17.857
> 
> 标签：java, jpa, entity

我正在为 Java EE 6 项目编写持久类。

我正在寻找编写这些课程的最佳实践。

例如，我知道建议添加版本字段。

我在等你的帮助。谢谢

更新 1：我正在为电子商务编写课程：人员、产品、评论....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:00:54.707

这实际上取决于请求是什么。
仅仅因为“推荐”而添加字段可能会损害性能，因为它们被映射到数据库中的列。
也许您的流程根本不需要“版本控制”？
我想给你的建议是（如果你坚持使用 JPA/Hibernate）是：
A. 想想你的业务逻辑实体 - 例如，如果这是一个图书馆的应用程序，实体可能是 - Book、Author、 Shelf、Room、Librarian、Reader 等等...
B. 为这些实体之间的关系建模
- 例如 - 一本书可能由多个作者编写。彼此可以写几本书

完成此 Java/OOP 建模后，继续并引入基于 JPA 注释的关系：
例如，对于上述书籍作者关系，您将需要[@ManyToMany](http://docs.oracle.com/javaee/5/api/javax/persistence/ManyToMany.html)注释。

此时，您还需要定义主键列。
您还应该考虑是否每个其他实体实例使用一次的实体 - 例如 - 每个阅读器将使用一次地址，是否应该保存在单独的表中，具有 OneToOne 注释，或者您更愿意将其保留在Reader 表，使用 Embeddable 类。

但是，当涉及到应用程序的领域、所需的性能和用例时，最佳实践确实会发生变化。
我建议您开始构建/设计您的应用程序并提出更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:49:18.757

If you are using JPA in your application, you should need to understand EntityManager and Relationships at least. See this [link](http://meri-stuff.blogspot.com/2012/03/jpa-tutorial.html) to learn the usages of JPA. It may be helpful for you.

# python - Numpy 的 npv 计算

> ID：11923953
> 
> 赞同：4
> 
> 时间：2012-08-12T16:48:37.940
> 
> 标签：python, numpy, finance

我正在用 numpy 和我自己的代码计算 NPV，结果不同。我一定在某个地方犯了错误。任何指针？

```
// Solution 1
r = .06
flows = {0:1200, 3:-450, 6:-450, 15:-450}
print  sum([C/(1+r)**i for i,C in flows.iteritems()])
// => 317

// Solution using numpy's npv function
flows = zeros(16)
flows[0] = 1200
flows[3] = -450
flows[6] = -450
flows[15]= -450
print np.npv(r, flows)
// => 299 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T17:03:50.670

看起来（尽管它[在文档中](http://docs.scipy.org/doc/numpy/reference/generated/numpy.npv.html)说）`np.npv`开始与 t = 1，而不是 t = 0 求和：

```
In [56]: r = 0.06

In [57]: R = r+1

In [58]: (1200/R**0 - 450/R**3 - 450/R**6 - 450/R**15)
Out[58]: 317.16980210661666

In [59]: (1200/R**0 - 450/R**3 - 450/R**6 - 450/R**15)/R
Out[59]: 299.21679444020435

In [64]: np.npv(r, flows)*(1+r)
Out[64]: 317.16980210661683 
```

* * *

确实，`np.npv`是[这样定义的](https://github.com/numpy/numpy/blob/master/numpy/lib/financial.py#L646)：

```
def npv(rate, values):
    values = np.asarray(values)
    return (values / (1+rate)**np.arange(1,len(values)+1)).sum(axis=0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T18:04:35.850

这是固定在`numpy 1.8`

> 修复金融.npv
> 
> npv 函数有一个错误。与文档所述相反，它从索引 1 到 M 而不是从 0 到 M - 1 求和。修复更改了返回值。mirr 函数调用了 npv 函数，但解决了该问题，因此该问题也已修复，并且 mirr 函数的返回值保持不变。

[NumPy 1.8.0 发行说明](https://github.com/numpy/numpy/blob/master/doc/release/1.8.0-notes.rst)

如果我使用`np.npv`in`numpy 1.8`我得到：

```
import numpy as np

r = .06

flows = np.zeros(16)
flows[0] = 1200
flows[3] = -450
flows[6] = -450
flows[15]= -450

result = np.npv(r, flows) 
```

结果：

```
>>> result
317.16980210661666 
```

# ruby-on-rails - 让omniauth-facebook（和omniauth-oauth2）在Rails 2.3.4上工作

> ID：11923954
> 
> 赞同：1
> 
> 时间：2012-08-12T16:48:59.440
> 
> 标签：ruby-on-rails, facebook, authentication, omniauth

我试图让`omniauth-facebook`gem 在我的 Rails 2.3.4 应用程序中工作，但这`omniauth-oauth2`取决于`rack ~> 1.2`. 当我尝试在我的应用程序中要求它时，我收到以下错误消息：

```
[Dev]> require 'omniauth-facebook'
Gem::LoadError: can't activate rack (~> 1.2, runtime) for ["oauth2-0.8.0", "omniauth-oauth2-1.1.0", "omniauth-facebook-1.4.1"], already activated rack-1.0.1 for []
    from /Library/Ruby/Site/1.8/rubygems.rb:233:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:249:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `each'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:249:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `each'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:249:in `activate'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `each'
    from /Library/Ruby/Site/1.8/rubygems.rb:248:in `activate'
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:35:in `require'
    from /Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/dependencies.rb:156:in `require'
    from /Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/dependencies.rb:521:in `new_constants_in'
    from /Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/dependencies.rb:156:in `require'
    from (irb):1 
```

这个错误是由`actionpack`2.3.4 要求引起的`rack ~> 1.0.0`，所以`omniauth-oauth2`到要求的时候`~> 1.2`，`1.0.1`已经加载并且它爆炸了

如何在不升级 Rails 版本的情况下解决这个问题？（会使用旧版本的`omniauth-facebook`工作吗？）

# 64-bit - 在 Fedora 17（64 位）中无法启动 IBM 安装管理器

> ID：11923955
> 
> 赞同：0
> 
> 时间：2012-08-12T16:49:26.007
> 
> 标签：64-bit, websphere

这是我尝试运行 IBM 安装管理器时出现的错误消息：

```
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    /opt/IBM/InstallationManager/eclipse/configuration/org.eclipse.osgi/bundles/447/1/.cp/libswt-pi-gtk-3659.so (libXtst.so.6: cannot open shared object file: No such file or directory)
    swt-pi-gtk (Not found in java.library.path)
    /tmp/swtlib-32/libswt-pi-gtk-3659.so (libXtst.so.6: cannot open shared object file: No such file or directory)
    /tmp/swtlib-32/libswt-pi-gtk.so (/tmp/swtlib-32/lib/libswt-pi-gtk.so.so: cannot open shared object file: No such file or directory) 
```

但是，这些文件确实存在。我也已经安装了 SWT lib。有没有人有过这个问题的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:32:28.433

IBM Installation Manager 只能在安装了 32 位 GTK 组件的情况下运行。以下是我在 Redhat 64 位上安装以运行 IBM Installation Manager 的软件包：

[在 Redhat x64 上安装 IBM Installation Manager UI 所需的软件包](https://gist.github.com/3075940)

应该是 Fedora 中的类似包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T18:48:48.903

这有助于引导我朝着正确的方向解决 IBM power 上的 rhel 6.5 问题。我使用 .ppc 而不是 .ppc64 文件安装了等效软件包（因为安装程序是 PPC），然后我不得不根据 ibm 支持文章 swg21688528 在 install.ini 的底部添加这两行，如下所示：

-Dorg.eclipse.swt.internal.gtk.useCairo=false

-Dorg.eclipse.swt.internal.gtk.cairoGraphics=false

*   帕克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:17:27.527

我不记得 Installation Manager 但对于 WAS 安装启动 setup.jar 本身确实有帮助：

```
java -jar setup.jar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T20:56:19.657

我在尝试在 Linux Fedora 17 x86_64 位上安装 CM 时遇到了这个问题，这个命令解决了我的问题

```
yum install gtk2.i686 gtk2-engines.i686 PackageKit-gtk-module.i686 PackageKit-gtk-module.x86_64 libcanberra-gtk2.x86_64 libcanberra-gtk2.i686 
```

执行后我可以运行交互式安装。

# .net - Z3 中的 TryFor 在给定的时间限制后不会停止检查

> ID：11923957
> 
> 赞同：5
> 
> 时间：2012-08-12T16:49:29.150
> 
> 标签：.net, z3

我正在使用 Z3 的 .NET API。当我通过调用实例化求解器时：

```
Solver s = ctx.MkSolver(ctx.TryFor(ctx.MkTactic("qflia"), TimeLimit)); 
```

并为某些模型指定 60 秒（60000 毫秒）的 TimeLimit

```
s.Check() 
```

60 秒后不返回。对于某些型号，它会在几秒钟后返回，在我的情况下这不是问题，但对于某些型号，它根本不会返回（我在 3 天后取消了该过程）。

如何在给定的时间限制后强制 Z3 停止检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:16:37.770

`TryFor`组合器是使用“取消”标志实现的。新战术反应迅速，并在设置“取消”标志时很快终止。不幸的是，通用策略`smt`是通用求解器的封装。这个通用求解器反应不灵敏。它可能会在几个关键地方“丢失”：量词实例化、Simplex 等。该策略建立在和许多其他策略`qflia`之上。`smt`因为，您正在尝试解决无量词问题。我假设该`smt`策略在 Simplex 模块内部的循环中。策略中的 Simplex 模块`smt`是使用任意精度有理数实现的。因此，对于非平凡的线性实数/整数问题可能非常耗时。

要解决此问题，您无能为力。如果你真的需要一个强有力的运行时间保证，我看到的唯一解决方案是创建一个运行 Z3 的单独进程，并在需要更多`k`秒来解决问题时将其杀死。

话虽如此，Z3 的未来版本将拥有一个全新的算术模块。当取消标志设置时，这个新模块（如新战术）将迅速终止。

# jquery - jqGrid 使用页面的其余部分

> ID：11923961
> 
> 赞同：0
> 
> 时间：2012-08-12T16:49:44.337
> 
> 标签：jquery, css, jqgrid

我正在使用 jqGrid，并设置如下：

```
<body>
   <div>
      Header
   </div>
   <div>
      <table id="list4"></table>
   </div>
</body> 
```

我使用这里的演示代码填充它：[http](http://www.trirand.com/blog/jqgrid/jqgrid.html) ://www.trirand.com/blog/jqgrid/jqgrid.html ，加载数据-> 数组数据。

我希望网格占据页面底部的其余部分，并且随着页面大小的调整而增长/缩小。此外，当网格离开屏幕边缘时，我想要滚动条。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:53:58.017

您需要`resize`像这样将事件附加到窗口：

```
$(window).resize(function() {
  $("#list4").setGridHeight(<some calculation>);
}); 
```

请参阅此处的文档`setGridHeight`：

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#grid_related_methods](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#grid_related_methods)

不过要小心使用`resize`事件，因为它们由不同的浏览器以不同的方式触发。看这里：

[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

# android - 获取视图的 WebView 控件？

> ID：11923969
> 
> 赞同：0
> 
> 时间：2012-08-12T16:50:33.027
> 
> 标签：android, view, webview, zooming

在使用 WebView 一段时间后，再回到标准视图，缩放和滚动似乎相当复杂。是否有任何方法可以为任何视图组使用相同的缩放和滚动控件（builtInZoomControls、水平和垂直滚动条、双击以缩小和捏缩放）或者是否有任何解决方法，如 SDK 或 jar。文件将使这成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:18:38.553

> 缩放和滚动看起来相当复杂

滚动是使用知道如何滚动的小部件（例如，`ListView`）或将其他小部件和容器包装在`ScrollView`或`HorizontalScrollView`中。

缩放通常不进行，除非在相当有针对性的情况下（例如，缩放图像、缩放地图）。

> 是否有任何方法可以为任何视图组使用相同的缩放和滚动控件

对于“滚动控件”，请参见上文。

有一些开源类用于缩放图像。缩放地图内置于`MapView`.

# ruby-on-rails-3 - Ruby on Rails：使用 Rails 模型关联时没有验证错误

> ID：11923972
> 
> 赞同：0
> 
> 时间：2012-08-12T16:51:07.123
> 
> 标签：ruby-on-rails-3, validation, associations

我正在使用 Ruby on Rails 关联将 Store 模型链接到 Product 模型，使用：

```
store has_many :products
product belongs_to :store 
```

Product 模型的唯一条件是存在名称：

```
validates :name, :presence => true 
```

`Products`为了创建一个新产品，我在控制器中使用这个代码，`create`方法：

```
@store = Store.find_by_id session[:store_id]

if @store.products.create(:name => params[:name])
    redirect_to :back, :notice => "New product successfully created."
else
    redirect_to :back, :alert => "Can't create new product."
end 
```

问题是它可以工作，但是产品名称是否存在。我的意思是，在所有情况下，我都有“成功创建新产品”。消息，即使产品名称为空。

我无法弄清楚问题出在哪里。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:44:06.997

从文档：

> 如果验证通过，则创建一个对象（或多个对象）并将其保存到数据库中。无论对象是否成功保存到数据库，都会返回结果对象。

您应该使用另一种方法来了解保存的记录。

```
@store = Store.find_by_id session[:store_id]

product = @store.products.build(name: params[:name])

if product.save
  redirect_to :back, notice: "New product successfully created."
else
  redirect_to :back, alert: "Can't create new product."
end 
```

# jquery-ui - 用户选择自动完成建议后更新链接

> ID：11923975
> 
> 赞同：0
> 
> 时间：2012-08-12T16:51:25.100
> 
> 标签：jquery-ui, autocomplete

我使用 jquery ui 自动完成和谷歌地图 api (http://code.google.com/p/geo-autocomplete/) 在用户键入时向他们提示位置。用户选择其中一个建议后，我想更新页面上的链接。我正在这样做：

```
$.widget( "ui.geo_autocomplete", {

// setup the element as an autocomplete widget with some geo goodness added
_init: function() {
    this.options._geocoder = new google.maps.Geocoder; // geocoder object
    this.options._cache = {}; // cache of geocoder responses
    this.element.autocomplete(this.options);

    // _renderItem is used to prevent the widget framework from escaping the HTML required to show the static map thumbnail
    this.element.data('autocomplete')._renderItem = function(_ul, _item) {
        return $('<li></li>').data('item.autocomplete', _item).append(this.options.getItemHTML(_item)).appendTo(_ul);
    };
},

// default values
options: {

            change: function() {  
                 //change the link
            }, 
```

问题是更改功能仅在用户选择建议后执行，然后单击页面上的其他位置。如果他们选择了一个建议，那么立即点击链接，它还没有被更新。如何在用户选择提示的建议之一后立即更新链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:39:16.387

请改用`select`事件。有关事件文档，请参阅[官方](http://jqueryui.com/demos/autocomplete/#events)文档。

# jquery - 多选框的jQuery源代码

> ID：11923976
> 
> 赞同：1
> 
> 时间：2012-08-12T16:52:07.370
> 
> 标签：jquery, html, drop-down-menu, checkbox

我需要在其中创建一个下拉菜单多个复选框，如下所示：

[http://jobscentral.com.sg/jc/jobseeker/jobs/advancedsearch.aspx](http://jobscentral.com.sg/jc/jobseeker/jobs/advancedsearch.aspx)

有没有类似的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:59:11.500

我使用 Eric Hynds 编写的 jQuery UI Multiple Select

易于实施和使用。

见：[http ://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:55:58.560

它实际上不是一个下拉菜单，而是一个设计为看起来像在单击它时执行一些 jquery 的图像。

我建议您查看该网站的源代码以尝试自己实现它。出现的框只是一个带有复选框表的 div，当您单击假选择框时会出现。然后，如果您在实施中遇到任何问题，请再次询问。

# android - 从服务访问传感器

> ID：11923979
> 
> 赞同：1
> 
> 时间：2012-08-12T16:52:18.433
> 
> 标签：android, service, sensors

有没有办法从 android 访问传感器`Service`？例如`Accelerometer`？如果是的话，有人可以指出这样做的好教程吗？因为好像没有这方面的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:05:14.193

您可以在任何拥有有效上下文的地方使用[getSystemService()](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)访问传感器数据。因此，在 Activity 中读取加速度计数据的教程可以很容易地应用于在 Service 中读取加速度计数据，您不需要专门的教程。

```
 private final SensorManager mSensorManager;
 private final Sensor mAccelerometer;
 ...

 public void accessAccelerometer() {
     mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
     mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 } 
```

# php - 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在

> ID：11923984
> 
> 赞同：-1
> 
> 时间：2012-08-12T16:52:46.280
> 
> 标签：php, mysql, sql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我收到此错误：

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in G:\xampp\htdocs\functions\musicalbum_function.php on line 35 
```

我正在创建一个音乐上传网站，用户可以在其中将音乐上传到专辑。

这是我收到错误的代码

```
while ($musicalbums_row = mysql_fetch_assoc($musicalbums_query)) {
     $musicalbums[] = array (
        'id' => $musicalbums_row['musicalbum_id'],
        'timestamp' => $musicalbums_row['timestamp'],
        'name' => $musicalbums_row['name'],
        'description' => $musicalbums_row['description'],
        'count' => $musicalbums_row['music_count'], 
```

然后我返回结果

任何信息都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:07:09.267

从[文档](http://php.net/manual/en/function.mysql-query.php)`false`中，当查询方法出现错误时，您会得到一个布尔值。

> **返回值**
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

据推测，您在显示的代码之前正在做这样的事情

```
$c = mysql_connect("example.com", "user", "password");
mysql_select_db("database");
$musicalbums_query = mysql_query($query);

// If you do this here
var_dump($musicalbums_query);
// You will get this: boolean (false)

// You can do this to see the last error (where $c is the sql connection object)
echo mysql_errno($c) . ": " . mysql_error($c). "\n"; 
```

我强烈建议您将变量重命名`$musicalbums_query`为`$musicalbums_result`只是为了保持它们的正确性。另外，我已经有一段时间没有做过 php/mysql 了，但显然他们已经弃用了这个`mysql`扩展，`mysqli`而是希望你使用它。从我所看到的一点点来看，它在语法上看起来是相同的，所以希望它不会是一个大的跳跃。

正如阿司匹林所说，请随时发布查询，我们可以进一步检查是否有错误。

# javascript - Javascript变量范围未定义

> ID：11923985
> 
> 赞同：3
> 
> 时间：2012-08-12T16:52:48.503
> 
> 标签：javascript

如果尚未定义但发现一个奇怪的问题，我想将变量定义为默认值。

`var x = x || {}`工作而`x = x || {}`给出错误。

萤火虫的输出。

```
>>> a = a || {};
ReferenceError: a is not defined
[Break On This Error]   
a = a || {};
with(_... {}; }; (line 2)
>>> var b = b || {};
undefined

>>> b;
Object {}
>>> a;
ReferenceError: a is not defined
[Break On This Error] 
```

为什么第一个给出错误而第二个似乎通过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:56:29.933

只需使用`var`. 除了旧 IE 版本上的错误之外，添加 IE 会为`var`您保存一条错误消息，并清楚表明您没有假设它在其他地方声明。

在那些旧版本的 IE 上，

```
x = (typeof x !== 'undefined' && x) || {} 
```

`typeof`检查可防止“未声明的变量”错误。

# python - 如何使唯一 = true 的外键在 Django 中成为“可选”？

> ID：11923991
> 
> 赞同：2
> 
> 时间：2012-08-12T16:53:43.567
> 
> 标签：python, django, django-models, django-views, django-users

我有一个用户模型（由 Django 预定义）和一个通过 ForeignKey 连接的 UserProfile 模型。

我正在创建两个单独的 ModelForms 以在单个模板中用作各种注册表单。

模型.py

```
class UserProfile(models.Model):
    # This field is required.
    user = models.ForeignKey(User, unique=True, related_name="connector")
    location = models.CharField(max_length=20, blank=True, null=True) 
```

表格.py

```
class UserForm(ModelForm):
    class Meta:
        model = User

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile 
```

但是，当我加载页面并填写表单信息时，UserProfileForm 要求我选择/填写用户字段以进行验证。

但是，此“用户”是现在正在创建的用户，因此我无法选择“用户”，因为它尚未创建/仍在创建中。

我知道这个用户的字段具有属性 unique=true 但是有办法使这个字段“可选”吗？

我的视图（如下）应该处理它，以便一旦创建用户对象，我会将 UserProfile 的外键设置为这个新创建的用户对象（除非我的views.py 也做错了什么）。

视图.py

```
@csrf_protect
def register(request):
    if request.method == 'POST':
        form1 = UserForm(request.POST)
        form2 = UserProfileForm(request.POST)
        if form1.is_valid() and form2.is_valid():
            #create initial entry for user
            username = form1.cleaned_data["username"]
            password = form1.cleaned_data["password"]
            new_user = User.objects.create_user(username, password)
            new_user.save()

            #create entry for UserProfile (extension of new_user object)      
            profile = form2.save(commit = False)
            profile.user = new_user
            profile.save()
            return HttpResponseRedirect("/books/")
    else:
        form1 = UserForm()
        form2 = UserProfileForm()
    c = {
        'form1':form1,
        'form2':form2,
    }
    c.update(csrf(request))
    return render_to_response("registration/register.html", c) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:57:49.720

那么你可以设置：

```
user = models.ForeignKey(User, unique=True, blank=True, null=True, related_name="connector") 
```

这将使用户关系成为可选的，但我认为这不是你需要的。相反，为什么不直接`user`从表单中删除字段`UserProfile`并手动分配它，而不是让用户看到下拉列表。那么就不会有验证错误。

```
class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        exclude = ("user", ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:57:36.510

只需从表单中排除该字段。

```
class UserProfileForm(ModelForm):
  class Meta:
    model = UserProfile
    exclude = ('user',) 
```

# macos - 在 Mac 终端中使用变量创建别名

> ID：11923993
> 
> 赞同：2
> 
> 时间：2012-08-12T16:53:59.080
> 
> 标签：macos, bash

如何在别名中使用变量？例如，如果 pbcopy 允许我访问剪贴板（复制的 IP 地址）并将其分配给`$ip`我可以复制一个 IP 地址，然后使用`alias`如下失败示例。

```
alias go='ip=pbpaste | ssh $ip -l pete' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:02:34.617

我通常使用[pbpaste/pbcopy](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/pbcopy.1.html)，但你可能想找到一些有历史的东西供你使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T21:03:21.610

无需创建变量或管道，只需使用子shell：

```
alias go='ssh $(pbpaste) -l pete' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:01:06.603

另一种选择是使用函数代替别名，因为函数可以接受参数：

```
function go {
    ssh "$1" -l pete
} 
```

复制 IP 地址后，您可以键入“go”，使用 Command-V 粘贴 IP 地址，然后按回车键。

您还可以复制接受的答案以避免手动粘贴地址：

```
function go {
    ssh $(pbpaste) -l pete
} 
```

所以这里真正的信息是开始考虑 shell 函数而不是别名，因为根据 bash 手册页

> 对于几乎所有用途，别名都被 shell 函数所取代。