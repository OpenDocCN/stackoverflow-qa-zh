# StackOverflow 问答 11622000-11622999

# php - Eventbrite 从 event_new PHP API 方法检索事件 ID

> ID：11622000
> 
> 赞同：0
> 
> 时间：2012-07-23T23:28:11.293
> 
> 标签：php, api, eventbrite, event-id

我需要一些帮助来从 event_new PHP API 方法中检索事件 ID。通过返回包含新 ID 的 XML 文件，我可以看到 URL 方法运行良好，但是我从 PHP API 方法得到的响应只是“NULL”。

文档说 XML 和 URL 方法都返回新的事件 ID，任何人都可以就我需要做的事情提供一些帮助吗？

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:24:04.600

我无法重现您的错误。你有任何示例代码要分享吗？

你运行的是什么 PHP 版本？

这个测试对我来说很好：

```
//PHP API Client Lib is available here: https://github.com/ryanjarvinen/eventbrite.php 
include "Eventbrite.php";
//Authorization tokens are outlined here:
// http://developer.eventbrite.com/doc/authorization/
$eb = new Eventbrite(array('app_key'=>'YOUR_APPLICATION_KEY','user_key'=>'YOUR_USER_KEY'));
try{
    //Docs on how to use the API's event_new method are located here:
    // http://developer.eventbrite.com/doc/events/event_new/
    $response = $eb->event_new(array('title'=>'test event_new','start_date'=>'2012-12-12 12:00:00','end_date'=>'2012-12-12 12:12:12'));
    print "The new event_id is: {$response->process->id}";
}catch( Exception $e){
    var_dump($e);
} 
```

[github 上](https://github.com/ryanjarvinen/eventbrite.php)还有一些 PHP 特定的使用说明。

大多数关于[身份验证令牌](http://developer.eventbrite.com/doc/authorization/)的一般信息，以及[每个 API 方法](http://developer.eventbrite.com/doc/#methods)的输入和输出参数的细节，都应该在[http://developer.eventbrite.com/上提供。](http://developer.eventbrite.com/)

# c++ - Cpp 服务器，每个客户端的 UDP 套接字

> ID：11622003
> 
> 赞同：0
> 
> 时间：2012-07-23T23:29:01.027
> 
> 标签：c++, sockets, udp, client-server

当我尝试在特定 ip（127.0.0.1/INADDR_LOOPBACK 或 0.0.0.0/INADDR_ANY 除外）上绑定 UDP 套接字时，它会失败。

我需要为每个客户端（点对点连接）有一个专用的 UDP 套接字。

如果我不绑定套接字并使用 sendto 和 recvfrom 函数，则数据永远不会到达。

任何明显的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:49:40.113

您不能将 UDP 套接字绑定到非本地地址——将 UDP 套接字绑定到一个地址意味着您想要定向*到*该地址的数据包，而不是*从*该地址发送的数据包。您需要想办法在所有客户端之间共享一个套接字。

# javascript - 如何使用下拉菜单修复 jquery datepicker 日期计算功能？

> ID：11622004
> 
> 赞同：0
> 
> 时间：2012-07-23T23:29:01.677
> 
> 标签：javascript, drop-down-menu, jquery-ui-datepicker, calculated-field

我正在尝试创建一个脚本，根据下拉框的值，它会自动填充一个与给定日期相距四分之一、两个季度或两个季度的文本框。因此，对于第 1 季度的值，box1 将是“1-1-2011”，而 box2 将填充“1-4-2011”。目前，在更改日期方面我看不到任何事情发生。我是一个初学者，几天来一直在努力完成这项工作。抱歉，如果我忽略了一个明显的问题。

**要素如下：**

```
<div>
<label>Periode</label>
<select name="pchoice" id="pchoice"  onChange="calcdates()">
<option value="moddate">Zelf invoeren</option>
<option value="quarter1">1e Kwartaal</option>
<option value="quarter2">2e Kwartaal</option>
<option value="quarter3">3e Kwartaal</option>
</select>
</div> 
<div> 
    <label>Datum </label> <input id="startDate" name="startDate" maxlength="10" style="width: 6em;"/> t/m <input id="endDate" name="endDate" maxlength="10" style="width: 6em;"/>
</div> 
```

**剧本：**

```
<script type="text/javascript" charset="utf-8">
$(document).ready(
function() {
    var datepickerparam = {
    dateFormat : 'dd-mm-yy',
        dayNamesMin : [ 'Zo', 'Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za' ],
    monthNames : [ 'Januari', 'Februari', 'Maart', 'April','Mei', 'Juni','Juli', 'Augustus', 'September','Oktober', 'November', 'December' ]
    };

    $("#startDate").datepicker(datepickerparam);
    $("#endDate").datepicker(datepickerparam);
});

function calcdates(){

var w = document.pchoice.selectedIndex;
var selected_text = document.pchoice.options[w].value;
var commencedate =  new Date("01-01-2011"); 
var end = new Date();
//make dynamic with some variable
    switch(selected_text){
        case "quarter1":
            $("#startDate").val(commencedate);
            $("#endDate").val(commencedate+90);
        break;
        case "quarter2":
            $("#startDate").value='12-03-2011';
            $("#endDate").value='12-06-2011';
        break;
        case "quarter3":
            $("#startDate").value='13-06-2011';
            $("#endDate").value='13-09-2011';
        break;
        case "moddate":
            $("#startDate").value = '';
            $("#endDate").value ='';              
        break;  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:49:24.980

添加日期：

```
var d=new Date();//as today or any other you wish
var e=new Date(d.getFullYear()+"-"+(d.getMonth()+5)+"-"+d.getDate());// end Date 
```

我们加了五个，因为 Jan 是 0，我们必须提供正确的月份

或者如果是这种情况，则增加 4*30 天

```
new Date(d.valueOf()+1000*60*60*24*4*30) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T23:12:23.713

我解决了。完整的解决方案是：

```
<div>
    <label>Period</label>
    <select name="pchoice" id="pchoice" >
    <option value="moddate" selected="selected">Pick date</option>
    <option value="quarter1">1st quarter</option>
    <option value="quarter2">2nd quarter</option>
    <option value="quarter3">3rd quarter</option>
    </select> 
```

```
<% Date startdate = user.getContact().getOrganisation().getCommencingDate();//Customize this if you copy it!
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
Calendar cal = Calendar.getInstance();
cal.setTime(startdate);
HashMap <Integer,String> datemap = new HashMap<Integer,String>();
datemap.put(1, formatter.format(startdate));

for (int i=2; i<=6; i++ ){
    if (i%2 == 0){
        cal.add(Calendar.MONTH,3);
    }
    else {
        cal.add(Calendar.DATE,1);
    }    
    String formattedDate = formatter.format(cal.getTime());
    datemap.put(i, formattedDate);
}
%>

$("select").change(function () {
    var selected_text = $(this).val();

   switch(selected_text){
    case "quarter1":
    $("#startDate").val("<%=datemap.get(1)%>");            
    $("#endDate").val("<%=datemap.get(2)%>");
    break;
    case "quarter2":
     $("#startDate").val("<%=datemap.get(3)%>");
     $("#endDate").val("<%=datemap.get(4)%>");
    break;
    case "quarter3":
     $("#startDate").val("<%=datemap.get(5)%>");
     $("#endDate").val("<%=datemap.get(6)%>");
    break;
    case "moddate":
        $("#startDate").val('');
        $("#endDate").val('');
    break;    
}

 }); 
```

# list - 使用商店加载上一个页面后，如何将项目添加到 Sencha Touch 2 列表的开头？

> ID：11622006
> 
> 赞同：1
> 
> 时间：2012-07-23T23:29:14.163
> 
> 标签：list, pagination, sencha-touch-2, store

我有一个非常大的项目列表，我想使用 sencha touch 在移动应用程序中显示它们。该列表是分页的，用户可以从任何页面开始查看。Sencha Touch 2 有一个非常好的分页存储，列表有一个 ListPaging 插件，可以帮助在项目末尾加载新的项目。我正在尝试调整此插件，以便可以从以前的页面加载项目。问题是：在我用上一页重新加载商店后，如果我将“clearOnPageLoad”配置选项设置为 false，新的 item 将附加到列表中，而不是放在开头。我找不到任何方法来改变这种行为。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:42:04.520

看了一点Store.js的代码，现在明白是怎么回事了：调用previousPage只是调用了loadPage(currentPage - 1)，而且只是改变了ajax调用的参数，所以不能刷新数据知道新数据应该放在当前页面之前还是之后。

“doDataRefresh”方法是更新商店时内部调用的方法。如果 addRecords 设置为 false，则此方法在加载新数据时清除内部数据数组。如果它设置为 true，它只会将数据添加到末尾：

```
 ... (internals of doDataRefresh)
        if (operation.getAddRecords() !== true) {
        for (i = 0; i < ln; i++) {
            record = currentRecords[i];
            record.unjoin(me);

            // If the record we are removing is not part of the records we are about to add to the store then handle
            // the destroying or removing of the record to avoid memory leaks.
            if (records.indexOf(record) === -1) {
                if (syncRemovedRecords && record.phantom !== true) {
                    removed.push(record);
                }
                else if (destroyRemovedRecords && !syncRemovedRecords && !record.stores.length) {
                    record.destroy();
                }
            }
        }
        data.clear();
        // This means we have to fire a clear event though
        me.fireEvent('clear', me);
    }

    if (records && records.length) {
        // Now lets add the records without firing an addrecords event
        me.suspendEvents();
        me.add(records);
        me.resumeEvents();
    } 
```

要彻底解决这个问题，您可以重写 store 方法，以便：

*   对“previousPage”的调用会跟踪新数据应该放在当前数据之前的事实
*   更改 doDataRefresh 以便它根据标志决定是否应该在当前商店项目之前或之后添加新数据。

然而，我最终只是对商店进行了分类——这对我的用例来说已经足够了。

# ruby - 无法在 Ruby 中创建 (AS3) 兼容的河豚字符串

> ID：11622011
> 
> 赞同：1
> 
> 时间：2012-07-23T23:29:44.477
> 
> 标签：ruby, actionscript-3, flash, encryption, blowfish

我正在使用 Ruby 尝试加密一个字符串，该字符串将存储在数据库中并由 Flash/Actionscript 应用程序读取/解密。

该应用程序使用[这种河豚实现](http://lassieadventurestudio.wordpress.com/2009/09/02/easy-blowfish-text-encryption/)。

我已经尝试过创建兼容字符串的[openssl](http://philtoland.com/post/807114394/simple-blowfish-encryption-with-ruby)和[crypt/blowfish方法。](http://crypt.rubyforge.org/blowfish.html)两者都不匹配，也不匹配 Flash 应用程序所期望的。

我从哪里开始让它发挥作用？

```
irb(main):001:0> require 'openssl'
=> true
irb(main):002:0> require 'crypt/blowfish'
=> true
irb(main):007:0> require 'base64'
=> true
irb(main):003:0> key = "foo"
=> "foo"
irb(main):004:0> plain = "some string" 
=> "some string"
irb(main):005:0> blowfish = Crypt::Blowfish.new(key)
=> 
irb(main):006:0> enc = blowfish.encrypt_block(plain)
=> "\xF5\xAFB\x12=\xB9\xDB\f"
irb(main):008:0> Base64.encode64(enc)
=> "9a9CEj252ww=\n"

# Now, openssl version

irb(main):009:0> cipher = OpenSSL::Cipher::Cipher.new('bf-cbc').send(:encrypt)
=> #<OpenSSL::Cipher::Cipher:0x00000000f26430>
irb(main):010:0> cipher.key = Digest::SHA256.digest(key)
=> ",&\xB4kh\xFF\xC6\x8F\xF9\x9BE<\x1D0A4\x13B-pd\x83\xBF\xA0\xF9\x8A^\x88bf\xE7\xAE"
irb(main):011:0> enc = cipher.update(plain) << cipher.final
=> "m<\xDB\xC1B\x02p\xB0\xD6\xD0\xA4\xE8XyY\x99"
irb(main):012:0> Base64.encode64(enc)
=> "bTzbwUICcLDW0KToWHlZmQ==\n" 
```

**编辑**

这是我们在 AS3 中所做的（使用上面提到的河豚代码）：

```
import com.lassieadventurestudio.Blowfish;
import fl.controls.Button;
import fl.controls.TextInput;
import flash.events.MouseEvent;

var $key:String = "foo";

BTN_Submit.label = "Encrypt";
BTN_Submit.addEventListener(MouseEvent.CLICK, onSubmit);

function onSubmit(event:MouseEvent):void
{
        trace("INP_Pass.text, ", INP_Pass.text);

        var $encryption:String = Blowfish.encrypt(INP_Pass.text, $key);
        TXT_Output.text = $encryption;
}

BTN_Decrypt.label = "Decrypt";
BTN_Decrypt.addEventListener(MouseEvent.CLICK, decrypt);

function decrypt(event:MouseEvent):void
{
        TXT_Output2.text = Blowfish.decrypt(TXT_Output.text, $key);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:37:03.993

问题是您尝试的两种方式都使用 CBC 模式，但您链接到的 AS3 示例使用的是 ECB 模式。

您可以使用以下方法实现相同的目的：

```
cipher = OpenSSL::Cipher.new('bf-ecb')
cipher.encrypt
cipher.key = key
enc = cipher.update(plain) << cipher.final 
```

但请注意，这根本不是一个好的加密方案，原因有几个（ECB、Blowfish 密钥长度、直接用作密钥的密码......），正如文章中所写，它只会阻止窥探，但这不会对致力于它的人构成障碍。

**编辑：**

我查看了 AS3 实现，但不幸的是我无法重现那里给出的示例结果。但我相信博客中的 Blowfish 实现很糟糕，你不应该使用它。他们在那里为密钥使用普通密码，更糟糕的是，他们首先对它们进行 Base64 解码以获得原始字节，从而有效地将已经坏的熵再次降低 3/4 倍。

Ruby OpenSSL 的 Blowfish 实现采用 16 字节的密钥，因此使用较短的密钥重现结果不会很幸运。我建议您执行以下操作：

使用 AES 而不是 Blowfish。虽然 Blowfish 从未被“破坏”，但其 56 位的有效安全性可以被暴力破解。

不要使用密码作为密钥。使用加密安全的随机字节。例如，在 Ruby 中执行此操作的一种简单方法是：

```
 key = cipher.random_key 
```

您可能想在 AS3 中找到类似的东西。

不要使用欧洲央行模式。使用 CBC 模式，或者，如果您的 OpenSSL 版本可用（要求 >=1.0.0），甚至更好，使用 CTR 模式。

您可能想查看[Cipher 文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html)以获得更多关于实现可能被认为是安全的东西的建议。

# linux - bash 重命名空间 - 也可以做子文件和文件夹

> ID：11622018
> 
> 赞同：1
> 
> 时间：2012-07-23T23:30:06.653
> 
> 标签：linux, bash, scripting, rename, numeric

我有这个脚本，它只执行父文件夹，它不会重命名子文件夹和文件 - 我希望它可以用 _ 去除所有非数字。

```
#!/bin/bash
for f in *
do
   new="${f// /_}"
   if [ "$new" != "$f" ]
   then
      if [ -e "$new" ]
      then
         echo not renaming \""$f"\" because \""$new"\" already exists
      else
         echo moving "$f" to "$new"
         mv "$f" "$new"
      fi
   fi
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:40:42.380

**获取文件和目录列表：**

要递归地操作文件，`find`与 glob 相比， using 是更好的解决方案。我建议在开始操作之前使用文件名填充 bash 数组。此外，我认为一次执行此步骤，目录然后文件，将是谨慎的。您不想重命名目录，然后在重命名文件时发现该文件不存在。出于同样的原因，该脚本在文件系统层次结构上逐渐更深的级别上工作也​​很重要（因此在`sort`下面使用）。

**在列表上操作：**

获得列表后，您可以调用一个通用的 shell 函数来执行文件或目录名称的规范化和重命名。请注意正确引用名称以获得所需内容的重要性。这是非常重要的，因为 bash（或任何外壳程序）在解析命令行时使用空格作为单词边界。

**剧本：**

以下脚本（`./rename_spaces.bash`在下面的示例输出中命名）应该执行您想要的操作。要添加您自己的怪异字符，请将它们添加到`weirdchars`变量中。请注意，您需要根据需要对字符进行转义（*例如*，单引号已被转义）。如果新文件名存在，脚本会跳过一条消息。这也意味着它将打印用于琐碎重命名的消息（原始名称中没有奇怪字符的文件名）。这对某些人来说可能很烦人（*例如*我：-p）

```
#!/bin/bash

# set -o xtrace # uncomment for debugging

declare weirdchars=" &\'"

function normalise_and_rename() {
  declare -a list=("${!1}")
      for fileordir in "${list[@]}";
      do
          newname="${fileordir//[${weirdchars}]/_}"
          [[ ! -a "$newname" ]] && \
            mv "$fileordir" "$newname" || \
                echo "Skipping existing file, $newname."
      done
}

declare -a dirs files

while IFS= read -r -d '' dir; do
    dirs+=("$dir")
done < <(find -type d -print0 | sort -z)

normalise_and_rename dirs[@]

while IFS= read -r -d '' file; do
    files+=("$file")
done < <(find -type f -print0 | sort -z)

normalise_and_rename files[@] 
```

这是一个带有目录树的示例输出，其中目录和文件在运行上述脚本之前和之后的名称中有空格。

```
$ tree
 .
 ├── dir1
 │   ├── subdir1\ with\ spaces
 │   │   └── file1
 │   └── subdir2\ with\ spaces&weird\ chars'
 │       └── file2
 ├── dir2
 │   ├── subdir1\ with\ spaces
 │   │   └── file1\ with\ space
 │   └── subdir2\ with\ spaces
 │       └── file2\ with\ space
 ├── dir3
 │   ├── subdir1
 │   │   └── file1
 │   ├── subdir2
 │   │   └── file2
 │   └── subdir3
 │       └── file3
 └── rename_spaces.bash

 10 directories, 8 files
 $ ./rename_spaces.bash
 $ tree
 .
 ├── dir1
 │   ├── subdir1_with_spaces
 │   │   └── file1
 │   └── subdir2_with_spaces_weird_chars_
 │       └── file2
 ├── dir2
 │   ├── subdir1_with_spaces
 │   │   └── file1_with_space
 │   └── subdir2_with_spaces
 │       └── file2_with_space
 ├── dir3
 │   ├── subdir1
 │   │   └── file1
 │   ├── subdir2
 │   │   └── file2
 │   └── subdir3
 │       └── file3
 └── rename_spaces.bash

 10 directories, 8 files 
```

**注意：**实现脚本以对任何非字母数字的内容“做正确的事”似乎并非易事。例如，我不确定如何处理文件或目录名称中的点或预先存在的下划线或其他“常规”允许的字符。

以通用方式识别不良/特殊字符也是一个问题。在国际语言环境中，情况更加复杂。我不知道任何简单的说法允许“只允许英文字母中的数字或字符”。如果有人有想法，请继续并发布答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T23:54:46.463

您也可以尝试递归运行命令（可能有一种方法可以在不调用相同脚本的情况下执行此操作，但我现在无法让它工作）：

假设此脚本在您的路径中或此处`/usr/local/bin/remove_spaces.sh`：

```
#!/bin/bash 

for f in *
do
   if [ -d "$f" ]
   then
      cd "$f"
      /usr/local/bin/remove_spaces.sh
      cd ..
   fi

   new="${f// /_}"
   if [ "$new" != "$f" ]
   then
      if [ -e "$new" ]
      then
     echo not renaming \""$f"\" because \""$new"\" already exists
      else
     echo moving "$f" to "$new"
     mv "$f" "$new"
      fi
   fi
done 
```

所以你基本上检查当前文件`f`是否是一个目录，如果是，cd到它并重新运行命令，然后 cd 退出并在需要时进行重命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:33:25.170

编辑：对不起，我忘记了空格。我的标准处理方式是读取循环（假设文件名称中不能有换行符）

```
find | {
read f
while [ -n "$f" ]
do
    # process "$f" (always with the quotes)
    read f
done
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T23:37:23.720

在最新版本的 bash 中，您可以使用

```
for f in ** 
```

您可能需要设置 globstar 选项才能使其工作：

```
shopt -s globstar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T06:42:01.157

如果文件名不能包含制表符或换行符（注意引号）：

```
IFS="$(printf '\n\t')"
for file in $(find .) ; do
  COMMAND "$file" ...
done 
```

另请参见[Shell 中的文件名和路径名](http://www.dwheeler.com/essays/filenames-in-shell.html)

# javascript - D3 Json 请求获取 XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null

> ID：11622020
> 
> 赞同：2
> 
> 时间：2012-07-23T23:30:24.067
> 
> 标签：javascript, html, xml, http, d3.js

我正在使用 d3.json() 请求一个 json 对象并解析/可视化它......

它是从 java servlet doGet 函数请求的……我知道我的 java 服务器已成功将 json 发送到浏览器。但是，我在尝试解析 json 时遇到了问题。d3.json 应该做一个 http get 请求，但由于某种原因，它返回一个 XML 请求错误：

XMLHttpRequest 无法加载“http://localhost:8080/cluster”。Access-Control-Allow-Origin 不允许 Origin null。

d3.json 是否有一些我应该知道的进一步设置，或者它应该开箱即用？这是我的代码..

```
 d3.json("http://localhost:8080/cluster", function(json) {       

            //do visualization
            var node = vis.data([json]).selectAll("g.node")
             .data(pack.nodes)
             .enter().append("g")
             .attr("class", function(d) {return d.children ? "node" : "leaf node" ;})
             .attr("transform", function(d) {return "translate(" + d.x + "," + d.y +")"; });

            node.append("title")
                .text(function(d) { return d.name + (d.children ? "" : ": " + format(d.size)); });

            node.append("circle")
            .attr("r", function(d) { return d.r; });

            node.filter(function(d) { return !d.children; }).append("text")
            .attr("text-anchor", "middle")
            .attr("dy", ".3em")
            .text(function(d) { return d.name.substring(0, d.r / 3); });
    } 
```

我在这里做错了吗？我主要感到困惑，因为 d3.json 应该默认执行 HTTP 获取，但它返回 XMLHTTPrequest 错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-05T04:33:50.513

如果您使用文件协议 (file:///) 加载 HTML 文件，那么您将遇到此问题。尝试也使用 localhost 加载 html 文件，这应该可以解决问题。

# .net - 以编程方式添加 DataGrid Row？

> ID：11622023
> 
> 赞同：0
> 
> 时间：2012-07-23T23:30:45.983
> 
> 标签：.net, wpf, datagrid

我在 wpf 应用程序中创建了一个数据网格（拖放）。然后我通过属性窗口手动添加列。

我现在想通过我后面的代码向这个数据网格添加行。我原以为你会做一个

```
DataGridRow row = new DataGridRow(); 
```

然后可能通过 Items.Add() 或您要添加值的东西（每列一个）。

我没有看到这个，所以我想知道我该怎么做。

我知道我应该像数据绑定之类的东西，但我是 wpf 的新手，我正在制作一个快速而肮脏的应用程序，我宁愿只使用 forloop 并手动制作行。

如果我也有这种愿望，我宁愿回来重构该区域。我真的只是想要我正在制作和运行的东西，所以我可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:36:31.383

一行是一个对象，值是所述对象的属性。您不应该自己创建容器（`DataGridRow`），`DataGrid`可以为您完成。只需将数据对象直接添加到`Items`（或作为 ItemsSource 的集合集，它应该实现`INotifyCollectionChanged`（例如`ObservableCollection<T>`））。这些列应该绑定数据对象的属性，默认情况下它们是从数据中自动创建的。

* * *

作为对评论的回应：使用`DisplayNameAttribute`您可以轻松地从标题中取出空格，但您需要将该属性添加到所有有问题的属性中：

```
[DisplayName("Full Name")]
public string FullName { get; } 
```

然后订阅[`DataGrid.AutoGeneratingColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)（-哦，文档中有一个针对此问题的 hacky 解决方案-）：

```
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    var descriptor = (MemberDescriptor)e.PropertyDescriptor;
    //Takes the value from the attribute if exists & non-default-value, else property name.
    e.Column.Header = descriptor.DisplayName;
} 
```

困难的方法是一种算法，它只正确拆分现有的标题字符串（需要考虑帕斯卡大小写、数字和缩写，可能不太容易获得 100% 的准确度）。

# java - 比较具有多个集合字段的两个数组列表

> ID：11622025
> 
> 赞同：0
> 
> 时间：2012-07-23T23:31:05.897
> 
> 标签：java

我正在尝试比较两个 ArrayList，但似乎无法正常工作。

认为：

我的名为 List 1 的主数组列表通过以下方式获取其值：

```
 ArrayList<xTypeClass> List1 = new ArrayList<xTypeClass>(); 
 xTypeClass tmp = new xTypeCLass();
  tmp.setName(name);
  tmp.setaddress(address);
  tmp.setPhone(phone);
  tmp.setMonth(mo);
 ..etc
 List1.add(tmp); 
```

现在我有另一个 list2 包含确切的类型格式，但具有不同的值。我想将 List2 与 1 进行比较，看看哪些 List2 中不存在 List1 中的那些，并将其添加到 List2 中。我在使用双 for 循环遍历两个列表以查找哪些存在和哪些不存在时遇到问题。有人可以指出我正确的方向吗？如果您需要更多信息，请在下方评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T23:40:12.347

假设您已经为 xTypeClass 实现了 equals() 和 hashCode()，有什么理由不能这样做：

```
for (xTypeClass x : List1) {
    if (!List2.contains(x)) {
        List2.add(x);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:01:15.413

丢弃 list1，equals() 和 hashCode() 实现：

```
 list1.removeAll(list2); // get differnce
    list2.addAll(list1);    // add difference 
```

如果您使用的是 eclipse，那么对于您的 xTypeClass 类，您可以使用：

源 -> 生成 hashCode() 并等于...

如果不使用 Eclipse，请查看 Apache Commons 的 EqualsBuilder 和 HashCodeBuilder：

[http://blog.andrewbeacock.com/2008/08/write-simpler-equals-hashcode-java.html](http://blog.andrewbeacock.com/2008/08/write-simpler-equals-hashcode-java.html)

# solr - 在 hadoop 上运行 solr 索引

> ID：11622031
> 
> 赞同：3
> 
> 时间：2012-07-23T23:33:06.500
> 
> 标签：solr, hadoop

我有大量数据需要编制索引，完成这项工作需要 10 多个小时。有没有办法在hadoop上做到这一点？以前有人做过吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:46:47.377

你还没有解释10小时在哪里？需要提取数据吗？还是只需要索引数据。

如果您需要很长时间进行提取，那么您可以使用 hadoop。Solr 有一个称为批量插入的功能。因此，在您的地图功能中，您可以一次性累积 1000 条记录并提交索引以获取大量记录。这将大大优化你的表现。

还有你的数据有多大？

您可以在 map/reduce 作业的 reduce 功能中收集大量记录。您必须在地图中生成正确的键，以便大量记录进入单个 reduce 函数。在您的自定义reduce类中，根据您的hadoop版本在setup/configure方法中初始化solr对象，然后在cleanup方法中关闭它。您必须创建一个文档集合对象（在solrNet或solrj中）并将它们全部提交到一个单发。

如果您使用 hadoop，还有其他选项称为[katta](http://katta.sourceforge.net/documentation)。你也可以看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:50:48.173

您可以在您的 hadoop 集群上编写一个 map reduce 作业，该作业只需获取每条记录并通过 http 将其发送到 solr 以进行索引。Afaik solr 目前没有对机器集群的索引，因此如果您想将索引也分布在多个节点上，那么研究弹性搜索是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:54:40.157

有一种 SOLR hadoop 输出格式，它在每​​个 reducer 中创建一个新索引，因此您可以根据所需的索引分配密钥，然后在事后将 hdfs 文件复制到您的 SOLR 实例中。

[http://www.datasalt.com/2011/10/front-end-view-generation-with-hadoop/](http://www.datasalt.com/2011/10/front-end-view-generation-with-hadoop/)

# objective-c - 奇怪的代理协议声明错误？

> ID：11622033
> 
> 赞同：0
> 
> 时间：2012-07-23T23:33:17.153
> 
> 标签：objective-c, ios, xcode, cocoa-touch, avaudioplayer

所以在头文件中我有以下代码：

```
#import <AudioToolbox/AudioToolbox.h>
@interface alertController:UIViewController <AVAudioPlayerDelegate>
{
  AVAudioPlayer *player;
} 
```

我有两个框架链接，它在同一个项目的另一个文件中工作得很好，但我收到错误，它找不到“AVAudioPlayerDelegate”的协议声明，也不能识别该行`AVAudioPlayer * audioPlayer`，因为它是一个`unknown type name`. 尽管我的导入声明（包括框架）以及它在另一个文件中运行良好的事实，但任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T23:36:50.020

`AVAudioPlayer`（及其代表）来自 AVFoundation，而不是 AudioToolbox。您的其他项目可能`<AVFoundation/AVFoundation.h>`通过单独包含的头文件或通过您的 PCH 导入。你应该`#import`用

```
#import <AVFoundation/AVFoundation.h> 
```

# d3.js - 分区树中的 D3 多线缩放

> ID：11622037
> 
> 赞同：1
> 
> 时间：2012-07-23T23:33:36.793
> 
> 标签：d3.js

我正在使用本[示例](http://mbostock.github.com/d3/talk/20111018/partition.html)中的分区树来尝试对分类树进行可视化。我尝试遵循 d3.js 中的代码和 html 中的脚本。看起来 Layout 和 onclick 事件只是增加了“rect”的大小，然后将其剪辑以适应相同大小的 SVG 元素。是否可以在 x 轴上使用多线性比例，以便在深入树时将每个父节点保留在屏幕上？

例如，如果布局是 160 像素宽，每列四列是 40 像素宽。我希望树从第一列 10 像素宽开始，这使得其他列以 50 像素填充 150 像素。如果单击下一列，则域和范围将发生变化，以便左两列各为 10 像素，其他列为 70 像素，依此类推。

我尝试将范围从 ([0, 160]) 更改为 ([0, 10, 160]) 并将域更改为 ([0, .25 ,1])。这是正确的方法吗？位置改变了，但宽度没有改变。我可能想根据深度更改范围和域。

*编辑* 这是来自 html 脚本的代码。我正在考虑将下面的代码更改为类似

```
var parentcolumns = 30;
var numberleftcolumns = 0.25;
x = d3.scale.linear().domain([0, numberleftcolumns, 1]).range([0, parentcolumns, h]), 
```

我在示例中使用的数字只是为了帮助描述问题。这里的宽度是 1120px。

```
<script type="text/javascript">

var w = 1120,
    h = 600,
    x = d3.scale.linear().range([0, w]),
    y = d3.scale.linear().range([0, h]);

var vis = d3.select("#body").append("div")
    .attr("class", "chart")
    .style("width", w + "px")
    .style("height", h + "px")
    .append("svg:svg")
    .attr("width", w)
    .attr("height", h);

var partition = d3.layout.partition()
    .value(function(d) { return d.size; });

d3.json("http://localhost:8080/flare.json", function(root) {

console.log("loadedJson:",root);
  var g = vis.selectAll("g")
    .data(partition.nodes(root))
    .enter().append("svg:g")
    .attr("transform", function(d) { return "translate(" + x(d.y) + "," + y(d.x) +  ")"; })
  .on("click", click);

  var kx = w / root.dx,
  ky = h / 1;

  g.append("svg:rect")
      .attr("width", root.dy * kx)
      .attr("height", function(d) { return d.dx * ky; })
      .attr("class", function(d) { return d.children ? "parent" : "child"; });

  g.append("svg:text")
     .attr("transform", transform)
     .attr("dy", ".35em")
     .style("opacity", function(d) { return d.dx * ky > 12 ? 1 : 0.15; })
     .text(function(d) { return d.name; })

     d3.select(window)
     .on("click", function() { click(root); })

 function click(d) {
   if (!d.children) return;

    kx = (d.y ? w - 40 : w) / (1 - d.y);
    ky = h / d.dx;
    x.domain([d.y, 1]).range([d.y ? 40 : 0, w]);
    y.domain([d.x, d.x + d.dx]);

 var t = g.transition()
    .duration(d3.event.altKey ? 7500 : 750)
    .attr("transform", function(d) { return "translate(" + x(d.y) + "," + y(d.x) + ")"; });

   t.select("rect")
    .attr("width", d.dy * kx)
    .attr("height", function(d) { return d.dx * ky; });

   t.select("text")
    .attr("transform", transform)
    .style("opacity", function(d) { return d.dx * ky > 12 ? 1 : 0; });

 d3.event.stopPropagation();
}

function transform(d) {
return "translate(8," + d.dx * ky / 2 + ")";
   }
});

</script> 
```

我将不得不重写 onclick 函数来处理域和范围的变化，并每次都改变我的父列。

# text - 用于编辑文本文件的批处理脚本

> ID：11622039
> 
> 赞同：0
> 
> 时间：2012-07-23T23:33:51.120
> 
> 标签：text, batch-file, editor

我们有一个 txt 文件，该文件由数据库转储填充，但存在我们不想要的中断`CR`。`LF`基本上，我正在尝试编辑`C:\app.txt`，删除所有`CR`s和`LF`s，然后`!@#`在前面添加，并在前面`"_TEXT_"`添加一个。这样，我只在我想要的地方拥有它们，而不是在所有地方。`CR``"!@#_TEXT_"``CR`

我曾尝试使用 Bruce Gunthrie 的 change.exe，它在 32 位环境中运行良好，但在 64 位 PC 上无法运行。

任何帮助将不胜感激。

我在这里看到了一些类似的帖子，但是由于它们太复杂而无法阅读代码，所以我不知道如何使它们适应我们的环境。

谢谢

卢克

例如。

```
_TEXT_ data data1
data2 data3 data4
_TEXT_ data data1
data2 data3 data4 
```

应该读：

```
_TEXT_ data data1 data2 data3 data4
_TEXT_ data data1 data2 data3 data4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:27:38.290

PowerShell是一种选择吗？（我猜是这样，一台装有当前 Windows 版本的 64 位计算机安装*了*PowerShell。）

```
$(
  $line = ''
  switch -wildcard -File C:\app.txt {
    '_TEXT_*' {
      if ($line) { $line }
      $line = "!@#$_"
    }
    default {
      $line += ' ' + $_
    }
  }
  if ($line) { $line }
) -join "`r" 
```

如您所愿，这将加入 CR 行。通过管道将结果`Set-Content`写入文件。

# asp.net-mvc-3 - ASP.NET MVC 需要正数作为输入，在模型中另存为负数 - 验证失败

> ID：11622044
> 
> 赞同：2
> 
> 时间：2012-07-23T23:34:22.540
> 
> 标签：asp.net-mvc-3, validation, separation-of-concerns

我想对具有“总和”（十进制）字段的“费用”对象进行建模。在视图中，我想验证用户输入了一个**正值**。

OTOH 我想确保在数据库中保存具有**负值**的对象。

现在，模型看起来像这样：

```
//------The model-------
public class Operation {
    [Range(typeof(decimal), "0.0001", "79228162514264337593543950335")]
    public virtual decimal Sum { get; set; }
    [...]
}
public class Expense : Operation
{
    public override decimal Sum
    {
        get
        {
            return base.Sum;
        }
        set
        {
            base.Sum = - Math.Abs(value);
        }
    }
}

//------In the controller-------
[HttpPost]
public ActionResult CreateExpense(Expense operation, int[] SelectedTags)
{
    return CreatePost(operation, SelectedTags);
}
private ActionResult CreatePost(Operation operation, int[] SelectedTags)
{
    if (ModelState.IsValid)  //  <-- this fails
    [...]
} 
```

问题是，MVC 验证适用于对象的属性（不是 POST 的表单值），看到负值并且无法验证。

我应该怎么做才能解决这个问题？

在我看来，我没有分离关注点（验证用户输入与维护数据库完整性）。

我应该使用视图模型来保存用户输入，然后从视图模型中填充实际模型吗？听起来不像KISS...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T00:14:09.387

我发现在继承类的属性上指定一个*单独的验证属性是一种享受。*

想不出更直接的东西了。

这是模型现在的样子：

```
public class Operation {
    public virtual decimal Sum { get; set; }
}
public class Income : Operation
{
    [Range(typeof(decimal), "0.0001", "79228162514264337593543950335")]
    public override decimal Sum
    {
        get { return base.Sum; }
        set { base.Sum = Math.Abs(value); }
    }
}

public class Expense : Operation
{
    [Range(typeof(decimal), "-79228162514264337593543950335", "-0.0001")]
    public override decimal Sum
    {
        get { return base.Sum; }
        set { base.Sum = - Math.Abs(value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T03:35:40.170

检查值是否小于零的验证属性是另一个简单的解决方案。

```
public class PositiveNumberAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object number, ValidationContext validationContext)
    {
        return int.Parse(number.ToString()) >= 0
            ? ValidationResult.Success : new ValidationResult("Positive value required.");
    }
} 
```

然后申请房产

```
[PositiveNumber]
public virtual decimal Sum { get; set; } 
```

# jquery - 加载事件后在 Jquery Mobile Form 中重绘按钮

> ID：11622047
> 
> 赞同：0
> 
> 时间：2012-07-23T23:34:45.233
> 
> 标签：jquery, jquery-mobile

自从我开始使用 jQuery Mobile 1.1.1 以来，我一直无法让表单输入按钮正确重绘。下面是我尝试过的一个例子。但它只像文本字段一样绘制输入字段，而不是按钮。

test1.php

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Test</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="css/jquery.mobile.theme-1.1.1.min.css" />
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript">
        $("#test").live("pageshow",function(event, ui) {
            $("#ajax").load("test2.php", function() {
                $("#test").find('input,textarea').textinput();
            });
        });
    </script>
</head> 
<body> 

    <div id="test" data-role="page" >
        <div data-role="header">
            <h1>Test</h1>
        </div>
        <div data-role="content">
            <input id="button" type="button" value="Normal" data-theme="b"/>
            <div id="ajax"></div>
        </div>
    </div>

</body>
</html> 
```

test2.php

```
<input id="button" type="button" value="Ajax" data-theme="b"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:29:59.450

使用 .trigger('create'); 在这样的页面上：

```
 $('#test').trigger('create'); 
```

# mapreduce - Hive 中的动态分区

> ID：11622053
> 
> 赞同：2
> 
> 时间：2012-07-23T23:35:35.920
> 
> 标签：mapreduce, hive

我是新来的蜂巢。我的输入文件的格式为（ID，日期（YYYY-MM-DD），小时（HH），键，值）。表在（日期，小时）分区输入文件包含7天的数据（24小时为每天）。当我将此数据加载到配置单元表中时，我需要将数据加载到表的各个分区中。可以请一些帮助我。

谢谢，苏达卡尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:31:38.390

一种方法是首先将数据加载到未分区的表中（例如下面示例中的 tmp_some_table）。然后您可以执行以下操作：

```
 set hive.exec.dynamic.partition=true;
  set hive.exec.dynamic.partition.mode=nonstrict;
  from tmp_some_table tt
  insert overwrite table some_table partition(day, hour)
  select
    id,
    key,
    value, 
    day,
    hour 
```

分区必须是 select 子句中的最后一列。以上适用于 hive 0.7.1。有关更多信息，请参阅[wiki](https://cwiki.apache.org/Hive/dynamicpartitions.html)。请注意，如果您有[太多的分区，您会得到错误](https://forums.aws.amazon.com/message.jspa?messageID=322898)。

# php - 什么时候需要使用 cron？

> ID：11622058
> 
> 赞同：0
> 
> 时间：2012-07-23T23:36:10.413
> 
> 标签：php, cron

假设有一个线程（在论坛上）将只活动 3 天。现在，3天后，我希望这个线程自动关闭。

我可以使用在数据库中创建此线程时的时间参考，如果当前日期+天数大于创建日期，则进行**if语句，我将打印出来**`"<h2>Thread Closed for posting</h2>"`

当我考虑其他一些任务时，我想我可以使用对时间的引用并在此执行某些事件。

我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:45:01.350

“cron”是在特定时间间隔或时间运行的任务。这意味着它应该用于必须在没有用户交互的情况下完成的任务。例如，备份、自动电子邮件或从远程服务中提取数据。

您想要的更适合检查线程是否关闭的条件。您不仅可以使用标志，还可以检查年龄。这意味着您可以更改旧线程逻辑而无需编辑数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T23:39:11.130

您可以使用 cron（每分钟运行一次）将线程表上的状态字段设置为关闭，例如。

```
UPDATE threads
SET status='closed'
WHERE lastPost+INTERVAL 3 DAY<NOW() 
```

然后在PHP中诸如

```
if($thread['status'] == 'closed')
{
   // Put your HTML here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:39:53.183

您可以制作一个由 cron 执行的 PHP 脚本（阅读如何在命令行中执行 PHP），该脚本在特定日期选择所有帖子，然后将它们设置为关闭。如果您每天运行两次，那么您可以很好地关闭所有这些帖子。

[使用 cron 运行 PHP 的良好参考](http://www.thegeekstuff.com/2011/07/php-cron-job/)

# c# - 仅在 DataGrid 中选择多行或单个单元格

> ID：11622066
> 
> 赞同：0
> 
> 时间：2012-07-23T23:36:47.267
> 
> 标签：c#, wpf, datagrid

我正在使用 DataGrids 开发一个 WPF 项目，我试图让用户能够选择他想要的任意数量的行或只选择一个单元格，即禁用选择单元格范围。但我无法做到这一点。

这可能吗？

我尝试了以下代码：

```
public MyDataGrid : DataGrid
{
    public ExtendedDataGrid()
    {
        SelectionMode = DataGridSelectionMode.Extended;
        SelectionUnit = DataGridSelectionUnit.CellOrRowHeader;
        this.SelectedCellsChanged += new SelectedCellsChangedEventHandler(MyDataGrid_SelectedCellsChanged);
    }

    void MyDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
    {
        if (this.SelectedCells.Count > 1)
        {                
            DataGridCellInfo currentCell = this.CurrentCell;
            this.SelectedCells.Clear();
            this.CurrentCell = currentCell;
        }
    } 
```

但是这段代码不允许我选择一整行。

**那么，有没有办法根据需要选择尽可能多的行但阻止用户选择单元格范围？**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:56:09.113

我想我已经解决了我的问题：

```
private void MyDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
    {
        int columnsCount = this.Columns.Count;
        int selectedCells = SelectedCells.Count;
        int selectedItems = SelectedItems.Count;

        if (selectedCells > 1)
        {
            if (selectedItems == 0 || selectedCells % selectedItems != 0)
            {
                DataGridCellInfo cellInfo = SelectedCells[0];
                SelectedCells.Clear();
                SelectedCells.Add(cellInfo);
                CurrentCell = SelectedCells[0];
            }
        }
    } 
```

我知道这不是一个优雅的解决方案，但到目前为止，它可以按预期工作，如果其他人有更好的解决方案，我将不胜感激

# algorithm - 蛇魔方谜题的正确性

> ID：11622068
> 
> 赞同：2
> 
> 时间：2012-07-23T23:36:52.487
> 
> 标签：algorithm

TrialPay在他们的博客上发布[了一个关于蛇魔方谜题的编程问题。](http://blog.trialpay.com/2010/08/trialpay-engineering-challenge-the-snake-cube-puzzle)

> 最近，我们的一位工程师向我们介绍了蛇形魔方。蛇形魔方是由一串魔方链组成的拼图，由贯穿每个魔方的松紧带连接。每个立方体可以围绕松紧带旋转 360°，允许根据最初构建链的方式构建各种结构，最终目标是以创建立方体的方式排列立方体。

例子：

![在此处输入图像描述](../Images/d877edfc7ffb0f9afbfafa220c31b821.png)

> 这种特殊的排列包含 17 组立方体，由 8 组两个立方体和 9 组三个立方体组成。这种排列可以用多种方式表达，但为了本练习的目的，让“0”表示旋转不会改变拼图方向的棋子，或者可以认为是“直”棋子，而“1”将表示旋转会改变拼图配置或“弯曲”蛇的部分。使用该模式，上面的蛇拼图可以描述为 001110110111010111101010100。

挑战：

> 你的挑战是用你选择的任何语言编写一个程序，它将立方体维度（X、Y、Z）和二进制字符串作为输入，如果可以解决问题，则输出“1”（不带引号）谜题，即在给定立方体方向的情况下构造一个适当的 X *Y* Z 立方体，如果当前排列无法解决，则为“0”。

[我发布了解决方案](http://juantalon.tumblr.com/post/27619664958/solving-snake-cube-puzzles)的半详细说明，但是如何确定[程序](https://github.com/jagtalon/Udacity/blob/master/trialpay/snake.py)是否解决了问题？本来想弄更多的测试用例，但是遇到了一些问题：

1.  TrialPay 博客中的蛇形立方体示例与维基百科的蛇形立方体页面和 www.mathematische-basteleien.de 上的图片具有相同的组合。
2.  手动将图像转换为字符串非常繁琐。

我试图制作一个可以产生很多组合的程序：

```
#We should start at the binary representation of 16777216 (00100...), because
#lesser numbers have more than 2 consecutive 0s (000111...)
i = 16777216
solved = []
while i <= 2**27:
    s = str(bin(i))[2:]
    #Add 0s
    if len(s) < 27:
        s = '0'*(27-len(s)) + s
    #Check if there are more than 2 consecutive 0s
    print s
    if s.find("000") != -1:
        if snake_cube_solution(3, 3, 3, s) == 1:
            solved.append(s)
    i += 1 
```

但它只需要永远完成执行。有没有更好的方法来验证程序？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:29:43.740

**TL;DR：**这不是编程问题，而是数学问题。[math.stackexchange.com](https://math.stackexchange.com/)可能会为您提供更好的服务。

由于立方体大小和蛇长度作为输入传递，因此检查程序需要验证的输入空间基本上是无限的。即使检查*单个*输入的解决方案的答案是合理的，但在整个输入空间中强制进行这种检查显然是不合理的。

如果您的解决方案在某些情况下失败，您的检查程序可以帮助您找到这些。但是它不能确定您的程序的正确性：如果您的解决方案实际上是正确的，则检查器将永远运行并让您感到疑惑。

不幸的是（或不是，取决于您的口味），您要寻找的不是程序，而是*数学证明*。

（证明）算法正确性本身就是一个完整的研究领域，你可以花很长时间在里面。也就是说，[归纳证明](http://en.wikipedia.org/wiki/Proof_by_induction)通常是适用的（尤其是对于递归算法。）

其他时候，在状态配置之间导航可以重述为优化效用函数。证明正在优化的空间（例如它只有一个极值）可以转化为程序正确性的证明。

您在第二种方法中的状态配置可能是蛇方向，或者它们可能是一些更深层次的结构。例如，解决魔方的一般策略通常不是在字面的魔方状态上陈述，而是在一[组相关对称性的](http://en.wikipedia.org/wiki/Symmetry_group)表达式上陈述。这就是我个人期望您的解决方案最终会发挥作用的结果。

**编辑**：多年后，我觉得我应该指出，对于*给定的、固定*的立方体大小和蛇的长度，*当然*搜索空间实际上是有限的。您可以编写一个程序来蛮力检查所有组合。如果你很聪明，你甚至可以争辩说检查一组案例的时间可以被视为一组独立的随机变量。由此您可以建立一个合理的进度条来估计您的等待时间（非常）长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:17:36.967

我认为您关于不能连续三个 0 的断言是错误的。考虑这种安排：

```
000
  100
    101
      100
        100
          101
            100
              100
                100 
```

我在这个谜题中遇到的问题之一是符号。A`1`表示立方体可以改变拼图的方向，但是关于哪个轴？在上面的示例中，假设 Y 轴是垂直的，X 轴是水平的。`1`左边的A表示绕立方体 Y 轴旋转`1`的能力，右边的 a 表示绕立方体 X 轴旋转的能力。

我认为可以构建一个类似于上面的安排，但有三个`000`组。但我没有它的符号。显然，可以修改上面的示例，以便前三行是：

```
001
  000
    101 
```

第一段`1`表示绕 Y 轴旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T20:30:53.223

不久前，我为同样的问题编写了一个 Java 应用程序。

我为此使用了[回溯算法](https://en.wikipedia.org/wiki/Backtracking)。

您只需在整个立方体中进行递归搜索，检查哪些方向是可能的。如果你找到了，你可以停下来打印解决方案（我选择打印出所有解决方案）。

对于 3x3x3 的立方体，我的程序在一秒钟内解决了它们，对于较大的立方体，它需要大约 5 秒到 15 分钟。

很抱歉，我现在找不到任何代码。

# ruby-on-rails - 推荐将哪个数据库与 Ruby on Rails 一起使用？（考虑托管优惠）

> ID：11622070
> 
> 赞同：6
> 
> 时间：2012-07-23T23:36:57.043
> 
> 标签：ruby-on-rails, hosting

我是 Rails 新手，所以我想知道要使用的数据库的最佳选择是什么？正如我一直在阅读的那样，PostgreSQL 被广泛使用，SQLite 也是如此。但是 MySQL 呢？这个架构有很好的托管选项吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T23:54:24.327

在任何需要数据库的项目中，PostgreSQL 都是我的首选。正如很多人（包括我自己）会告诉你的，Postgres 无疑是最好的选择。对于大多数人来说，任何 RDBMS 的高级功能在刚开始使用 Rails 时并不是真正需要的，因为 ActiveRecord 将处理您所有的数据库交互。MySQL 也可以工作，但总体而言它缺少 PostgreSQL 近年来引入的许多功能，当您开始使用 RDBMS 时，某些功能（如流复制）将是您想要的。[这里还有一篇最近的帖子，强调了 Postgres 的一些优势。](http://wekeroad.com/2012/07/19/postgresql-rising)

SQLite 仅真正用于开发，旨在用作嵌入式数据库，因此具有某些限制，使其不适合生产。我会在刚开始使用 Rails 时使用它，这样您就不必处理所有数据库配置选项，而可以专注于使用 Rails。在开发的任何时候，您都可以设置 Postgres 或 MySQL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-19T15:32:36.743

做出你的选择：

# SQLite

何时使用 SQLite

*   **嵌入式应用**
*   **磁盘访问替换**
*   **测试**

何时不使用 SQLite

*   多用户应用
*   需要高写入量的应用程序

# MySQL

何时使用 MySQL

*   **分布式操作**
*   **高安全性**
*   **网站和网络应用程序**
*   **定制解决方案**

何时不使用 MySQL

*   SQL 合规性
*   并发
*   缺乏特色

# PostgreSQL

何时使用 PostgreSQL

*   **数据的完整性**
*   **复杂的定制程序**
*   **一体化**
*   **复杂的设计**

何时不使用 PostgreSQL

*   速度
*   简单的设置
*   复制

摘自这篇文章： [https ://www.digitalocean.com/community/tutorials/sqlite-vs-mysql-vs-postgresql-a-comparison-of-relational-database-management-systems](https://www.digitalocean.com/community/tutorials/sqlite-vs-mysql-vs-postgresql-a-comparison-of-relational-database-management-systems)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T23:45:36.307

您可以自由使用任何您想要的数据库。SQLite 用于本地站点，而 PostgreSQL 非常受欢迎，但我认为这只是一种选择。如果你想使用 MySQL，那不是问题。基准测试没有优势。它就像 Django 或 Rails，只是一种宗教......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-19T19:10:19.637

我不会说与 Rails 一起使用的数据库有“最佳选择”。最佳选择将取决于个人项目。正如其他人所说，SQLite 通常更适合开发。由于您刚刚开始，我认为数据库最重要的选择是它很受欢迎。MySQL 和 PostgreSQL 都很流行，您应该能够轻松找到遇到问题的教程和 stackoverflow 答案。一些特定于 Rails 的主机（如 EngineYard）已将 PostgreSQL 作为其默认数据库。如果您使用 AWS，gem Rubber 可以非常轻松地使用 MySQL 或 PostgreSQL 进行部署。

一旦您开始熟悉 MySQL 或 PostgreSQL，我建议您使用 NoSQL 数据库，例如 MongoDB。

# macos - 在 OS X 内核扩展中获取套接字的所有者

> ID：11622079
> 
> 赞同：3
> 
> 时间：2012-07-23T23:37:34.610
> 
> 标签：macos, sockets, kernel

我正在编写一个放置套接字过滤器的 Mac OS X NKE。我收到一个套接字，我需要获取套接字所有者的 PID。我已经尝试过 FIOGETOWN ioctl，但我收到 102 的 errno（套接字不支持操作）。有什么方法可以获取所有者的 PID 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:13:40.070

我找到了！显然，当套接字过滤器的附加回调执行时，您是在创建套接字的进程的上下文中执行的。对 proc_selfpid() 的简单调用会给出 PID。

# matlab - 将 Matlab 转换为 Octave 是否有 container.Map 等价物？

> ID：11622084
> 
> 赞同：11
> 
> 时间：2012-07-23T23:38:45.790
> 
> 标签：matlab, hashmap, hashtable, octave

我正在尝试将[Maia 包](http://bioinformatics.tudelft.nl/content/maia-integrating-genome-assemblies)中的一些 matlab 代码转换为可以与 Octave 一起使用的代码。我目前陷入困境，因为其中一个文件有几个调用`containers.Map`，显然这些调用[尚未在 octave 中实现](http://www.octave.org/wiki/index.php?title=OctConf_2012)。有没有人有任何想法可以轻松实现类似的功能，而无需在 octave 中做大量额外的工作？谢谢大家的时间。

```
function [adj_direct contig_direct overlap names longest_path_direct...
          weigth_direct deltafiles deltafiles_ref ReferenceAlignment ...
          contig_ref overlap_ref name_hash_ref] = ...
          assembly_driver(assemblies,ref_genome,target_chromosome, ... 
                          deltafiles_ref,contig_ref, overlap_ref, ...
                          name_hash_ref, varargin)

% ASSEMBLY_DRIVER Combines contig sets into one assembled chromosome
%
% INPUT 
%   assemblies
%   ref_chromosome
%   Startnode_name
%   Endnode_name
%        OPTIONAL              DEFAULT
%       'z_weigths'            [.25 .25 .25 .25]
%       'clipping_thrs'        10
%       'ref_distance'         -10
%       'ref_quality'          1E-5
%       'max_chromosome_dist'  100
%       'quit_treshold'        15
%       'tabu_time'            3
%       'minimum_improvement'  -inf
%       'ref_node_assemblies'  all assemblies (slow)
%       'endextend'            true
%
%

    % SET DEFAULTS
    % General parameters
    z_weights           = [.25 .25 .25 .25];
    clipping_thrs       = 10;
    mapfilter           = '-rq';
    alignlen            = 75;
    ident               = 85;

    % Reference nod parameters
    ref_distance        = -10;
    ref_quality         = 1E-5;
    max_chromosome_dist = 100;
    % TABU parameters
    quit_treshold       = 15;
    tabu_time           = 3;
    minimum_improvement = -inf;
    ref_node_assemblies = assemblies;
    % Extending the assembly outwards from the start and en node
    endextend           = true;
    AllowReverse        = true;
    % If no start and end node are given, they will be determined from tiling
    Startnode_name      = '';
    Endnode_name        = '';
    containment_edge    = true;
    ref_first           = true;

    % If contigs have already been aligned to the reference, give the
    % deltafile 
    ReferenceAlignment = 'NotYetDoneByMaia';

    % Get VARARGIN user input
    if length(varargin) > 0
        while 1
            switch varargin{1}
                case 'Startnode_name'
                    Startnode_name = varargin{2};
                case 'Endnode_name'
                    Endnode_name = varargin{2};
                case 'z_weigths'
                    z_weights = varargin{2};
                case 'clipping_thrs' 
                    clipping_thrs = varargin{2};
                case 'ref_distance' 
                    ref_distance = varargin{2};
                case 'ref_quality' 
                    ref_quality = varargin{2};
                case 'max_chromosome_dist' 
                    max_chromosome_dist = varargin{2};
                case 'quit_treshold' 
                    quit_treshold = varargin{2};
                case 'tabu_time' 
                    tabu_time = varargin{2};
                case 'minimum_improvement' 
                    minimum_improvement = varargin{2};
                case 'ref_node_assemblies'
                    ref_node_assemblies = assemblies(varargin{2},:);
                case 'extend_ends'
                    endextend = assemblies(varargin{2},:);
                case 'AllowReverse'
                    AllowReverse = varargin{2};
                case 'ReferenceAlignment'
                    ReferenceAlignment = varargin{2};
                case 'containment_edge'
                    containment_edge = varargin{2};
                case 'ref_first'
                    ref_first = varargin{2};
                case 'mapfilter'
                    mapfilter = varargin{2};
                case 'alignlen'
                    alignlen = varargin{2};
                case 'ident'
                    ident = varargin{2};
                otherwise
                    error(['Input ' varargin{2} ' is not known']);
            end
            if length(varargin) > 2
                varargin = varargin(3:end);
            else
                break;
            end
        end
    end

    % Read input assemblies
    assembly_names   = assemblies(:,1);
    assembly_locs    = assemblies(:,2);
    assembly_quality = containers.Map(assemblies(:,1),assemblies(:,3));
    assembly_quality('reference') = ref_quality;

    % Read input assemblies for creation of reference nodes
    ref_node_assembly_names   = ref_node_assemblies(:,1);
    ref_node_assembly_locs    = ref_node_assemblies(:,2);
    ref_node_assembly_quality = containers.Map(ref_node_assemblies(:,1),ref_node_assemblies(:,3));
    ref_node_assembly_quality('reference') = ref_quality;

    % If there is only one assembly there is nothing to align
    if size(assemblies,1) >= 2

        % Align assemblies against each other
        assembly_pairs = {};
        coordsfiles = [];
        deltafiles = [];
        for i = 1:length(assembly_locs)-1
            for j = i+1:length(assembly_locs)
                [coordsfile,deltafile] = align_assemblies({assembly_locs{i},assembly_locs{j}},{assembly_names{i}, assembly_names{j}}, ...
                                                           mapfilter, alignlen, ident);
                coordsfiles = [coordsfiles; coordsfile];
                %deltafiles = [deltafiles deltafile];
                deltafiles = [deltafiles; {deltafile}];
                assembly_pairs = [assembly_pairs;[assembly_names(i) assembly_names(j)]];
            end
        end

     %   fprintf('Loading alignment files.\n');
     %   load alignments_done;

        % Put the nucmer alignments in an adjency matrix
        %[adj, names, name_hash, contig, overlap] = get_adj_matrix(coordsfiles, assembly_pairs, assembly_quality, z_weights, 'clipping_thrs', clipping_thrs, 'dove_tail', 'double','edge_weight','z-scores', 'containment_edge', true);
        [adj, names, name_hash, contig, overlap] = get_adj_matrix(deltafiles, assembly_pairs, assembly_quality, z_weights, 'clipping_thrs', clipping_thrs, 'dove_tail', 'double','edge_weight','z-scores', 'containment_edge', containment_edge);

        % Merge deltafiles
        deltafilesnew = deltafiles{1};
        if size(deltafiles,1) > 1
            for di = 2:size(deltafiles,1)
                deltafilesnew = [deltafilesnew deltafiles{di}];
            end
        end
        deltafiles = deltafilesnew;

    else
        assembly_pairs = {};
        coordsfiles = [];
        deltafiles = [];        
        adj = [];
        names = {};
        name_hash = containers.Map;
        contig  = struct('name',{},'size',[],'chromosome',[],'number',[], 'assembly', [], 'assembly_quality', []);
        overlap = struct('Q',{},'R',[],'S1',[],'E1', [], 'S2', [], 'E2', [], 'LEN1', [], 'LEN2', [], 'IDY', [], 'COVR', [], 'COVQ', [],'LENR',[], 'LENQ',[]);
    end

    % Ad the pseudo nodes to the graph. If the contigs have already been
    % aligned to the reference genome, just select the alignments that
    % correspond to the target chromosome
    if isequal(ReferenceAlignment,'NotYetDoneByMaia')
        % Align all contigs in 'contig_sets_fasta' to the reference chromosome 
        [contig_ref, overlap_ref, name_hash_ref, deltafiles_ref] = align_contigs_sets(... 
            ref_genome, ref_node_assembly_locs, ref_node_assembly_names, ... 
            ref_node_assembly_quality, clipping_thrs, z_weights, ... 
            ref_distance,max_chromosome_dist);

        ReferenceAlignment = 'out2.delta';
    end
    % Select only the entries in the deltafile for the current target chromosome
    [contig_target_ref, overlap_target_ref, name_hash_target_ref, delta_target_ref] = ...
              GetVariablesForTargetChromosome(...
              contig_ref, overlap_ref, deltafiles_ref);

    % Ref clipping should be high in case of tiling
    %if isequal(max_chromosome_dist,'tiling')
    %    clipping_thrs = 10000
    %end

    % Add reference nodes to the adjency matrix
    [adj, names, name_hash, contig, overlap, delta_target_ref, Startnode_name, Endnode_name] = get_reference_nodes( ...
                     adj, names, name_hash, contig, overlap, target_chromosome, ...
                     contig_target_ref, overlap_target_ref, name_hash_target_ref, delta_target_ref, ...
                     max_chromosome_dist, ref_distance, clipping_thrs, ref_first,...
                     Startnode_name, Endnode_name, AllowReverse);

    % Give reference edges some small extra value to distict between
    % assemblies to which a reference node leads
    % adj = rank_reference_edges(adj,contig,assembly_quality);

    % Specify a start and an end node for the assembly
    Startnode = name_hash(Startnode_name);
    Endnode = name_hash(Endnode_name);

    % Find the best scoring path
    fprintf('Directing the final graph\n');
    % Calculate path on undirected graph to get an idea on how to direct the graph
    [longest_path weigth] = longest_path_tabu(adj, Startnode, Endnode, quit_treshold, tabu_time, minimum_improvement);
    % Make the graph directed (greedy)
    [adj_direct contig_direct] = direct_graph(adj,overlap, contig, names, name_hash,clipping_thrs, Startnode, longest_path, true, ref_first);
    % Calcultate final layout-path
    fprintf('Find highest scoring path\n');
    [longest_path_direct weigth_direct] = longest_path_tabu(adj_direct, Startnode, Endnode, quit_treshold, tabu_time, minimum_improvement);

    function [contig_target_ref, overlap_target_ref, name_hash_target_ref, delta_target_ref] = ...
              GetVariablesForTargetChromosome(...
              contig_ref, overlap_ref, deltafiles_ref)

        % Select only the entries in the deltafile for the current target chromosome
        delta_target_ref = deltafiles_ref;
        for di = size(delta_target_ref,2):-1:1
            if ~isequal(delta_target_ref(di).R,target_chromosome)
                delta_target_ref(di) = [];
            end
        end
        overlap_target_ref = overlap_ref;
        for oi = size(overlap_target_ref,2):-1:1
            if ~isequal(overlap_target_ref(oi).R,target_chromosome)
                overlap_target_ref(oi) = [];
            end
        end    
        contig_target_ref = contig_ref;
        for ci = size(contig_target_ref,1):-1:1
            if isequal(contig_target_ref(ci).assembly, 'reference') && ~isequal(contig_target_ref(ci).name,target_chromosome)
                contig_target_ref(ci) = [];
            end
        end    
        name_hash_target_ref = make_hash({contig_target_ref.name}');
    end

end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T02:04:25.417

`containers.Map`据我所知，在 Octave 中没有完全等价的...

一种选择是使用[java 包](http://octave.sourceforge.net/java/)来创建`java.util.Hashtable`. 使用这个[例子](https://stackoverflow.com/a/3592045/97160)：

```
pkg load java
d = javaObject("java.util.Hashtable");
d.put('a',1)
d.put('b',2)
d.put('c',3)
d.get('b') 
```

* * *

如果您愿意进行一些重写，则可以将内置`struct`函数用作基本哈希表，其中字符串（有效的变量名）作为键，几乎所有内容都存储在值中。

例如，给定以下内容：

```
keys = {'Mon','Tue','Wed'}
values = {10, 20, 30} 
```

你可以替换这个：

```
map = containers.Map(keys,values);
map('Mon') 
```

经过：

```
s = struct();
for i=1:numel(keys)
    s.(keys{i}) = values{i};
end
s.('Mon') 
```

您可能需要使用`genvarname`来生成有效的密钥，或者可能需要使用适当的散列函数来生成有效的密钥字符串。

还要查看与结构相关的函数：getfield、setfield、isfield、fieldnames、rmfield 等。

# ruby-on-rails-3 - 访问 Mongoid 3 主节点

> ID：11622085
> 
> 赞同：5
> 
> 时间：2012-07-23T23:38:53.087
> 
> 标签：ruby-on-rails-3, mongoid

您如何访问 Mongoid > 3.0 中的主节点？

在 Mongoid < 3.0 中，您可以使用：

```
Mongoid::Config.master.eval('...') 
```

我在 3 中能找到的最接近的似乎是：

```
klass.collection.database.command(eval: '...') #=> failed with error "not master" 
```

有没有更好的方法来访问master？还是一种确保命令由主节点评估的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:47:31.403

Mongoid 3.0 使用 Moped 而不是 10gen 驱动程序，因此请参阅 Moped::Cluster#with_primary

[http://rubydoc.info/github/mongoid/moped/master/Moped/Cluster:with_primary](http://rubydoc.info/github/mongoid/moped/master/Moped/Cluster:with_primary)

例如：

```
User.collection.database.session.cluster.with_primary do
  p User.collection.database.command(eval: 'function() { return 3+3; }')
  p User.collection.database.command(ping: 1)
end 
```

输出：

```
{"retval"=>6.0, "ok"=>1.0}
{"ok"=>1.0} 
```

请注意，与 eval 相比，建议使用其他可能的解决方案，例如 group、aggregation 和 mapreduce。

# vb6 - 我应该如何在多个项目之间使常量可见？

> ID：11622089
> 
> 赞同：2
> 
> 时间：2012-07-23T23:39:13.850
> 
> 标签：vb6, constants, global

我有一个项目为其他项目提供服务，提供该服务的方法的返回值为 String。在该项目中，我使用一些命名常量来表示返回的特殊带外值，以代替预期或可恢复的错误，否则服务将返回 XML 字符串。

类似于以下内容：

```
' modService.bas
const SERVICE_BADARG as String = "Unsupported argument."
const SERVICE_TOOMANY as String = "Too many Foos."

' cServiceProvider.cls
Private Function GetXMLString() as String
' generate and return XML string holding all sorts of generic stuff
End Function

Public Function PerformService(argument as String) as String
' do some stuff
If (some_condition = true) Then
    PerformService = SERVICE_BADARG
Else If (some_other_condition = true) Then
    PerformService = SERVICE_TOOMANY
Else
    PerformService = GetXMLString() 
```

我希望能够从其他项目中获得这些常量，而无需冗余定义它们。如果可能的话，我还想避免将它们放在类中（它们将被不必要地复制）并避免为每个类创建一个属性。

它们都是常数，它们都不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:00:38.910

为什么不在`CONSTANTS.BAS`模块中定义常量，然后将其包含在每个项目中？这样，对于 VB 来说，定义似乎是重复的，但从您作为开发人员和维护程序员的角度来看，这些定义会全部收集在一个地方吗？

另一种选择是创建一个定义常量的 DLL，但这会使在所有代码中使用这些常量的值成本更高，因为它们不是直接编译到目标代码中，而是必须从调用中检索到外部 DLL。对于真正恒定的东西来说，这似乎有点矫枉过正。

考虑到“常量”值不一定与“只读”值相同。像 pi 这样的常数值*永远不会改变*，因此复制这些值并不会造成太大损失。您将永远不需要返回并更改它们。只读值（例如您的错误消息字符串）可能会更改，因此它们并不是真正的常量。将它们放入 DLL 中可能是有意义的。特别是因为当您尝试做的所有事情都显示错误消息时，性能并不是那么重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:03:18.473

不幸的是，VB 没有为您提供将常量嵌入到 DLL 中以供编译时使用的机制。正如你所说，你不想这样做，你将不得不归还房产。

我肯定会使用 BAS 路线，除非有反对的理由。另一种方法是创建一个类型库，并在其中定义字符串常量。为此，您必须学习 ODL，并使用 VB6 附带的 MkTypeLib.exe 程序。或者，如果您以某种方式访问​​了 Matt Curland 的“Advanced Visual Basic 6.0”，那么有一个工具可以让您创建类型库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T11:05:28.527

我知道这是旧的，但如果有人仍然想知道......试试这个模式：

```
Public Function SERVICE_BADARG() As String
    SERVICE_BADARG = "Unsupported argument."
End Function
Public Function SERVICE_TOOMANY() As String
    SERVICE_TOOMANY = "Too many Foos."
End Function 
```

或者更紧凑地使用冒号将内容放在同一行：

```
Public Function SERVICE_BADARG() As String: SERVICE_BADARG = "Unsupported argument.": End Function
Public Function SERVICE_TOOMANY() As String: SERVICE_TOOMANY = "Too many Foos.": End Function 
```

您可以将常量视为没有参数的函数。优点是函数可以是公共的，因此您不必创建 DLL。它也只能在其他函数之前声明它们。VB6 允许您隐藏括号：

```
x = "error: " & SERVICE_TOOMANY

Select Case y
    Case SERVICE_BADARG
        z = "error: y is a bad arg"
    Case SERVICE_TOOMANY
        z = "error: y is too many"
End Select 
```

缺点是有点开销，但这通常可以忽略不计

# javascript - 在 Backbone.View 中监听子事件

> ID：11622092
> 
> 赞同：0
> 
> 时间：2012-07-23T23:39:30.260
> 
> 标签：javascript, backbone.js, coffeescript, backbone-events

我想在我的 Backbone.View 中听一个关于孩子的事件。我认为这将是正确的方法，但我不确定。未调用父级中的更新函数。谢谢您的帮助。

text.js.coffee

```
class App.Views.Text extends Backbone.Views

  initialize: ->
    @_styleToolbar = App.Views.StyleToolbar el: $("#style_toolbar")
    @_styleToolbar.on("update", @update())

  update: ->
    # update text color, font etc 
```

style_toolbar.js.coffee

```
class App.Views.StyleToolbar extends Backbone.Views
  'change .font_face select' : 'update'

  update: (e) ->
    $(@el).trigger('update', @el) 
```

这是代码的简化版本，所以如果缺少某些内容，请告诉我，我会更新它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:46:46.017

没关系，Backbone 视图`Backbone.Events`混杂是有原因的。

不过，您在该代码中有几个问题。您需要解决的是触发事件的原因，您希望在视图上触发而不是在其上触发`el`；这：

```
$(@el).trigger('update', @el) 
```

应该：

```
@trigger('update', @) 
```

我也切换`@el`到 just`@`以便侦听器可以访问整个视图对象，而不仅仅是它的`el`.

而且，监听器应该绑定一个函数而不是函数的返回值：

```
@_styleToolbar.on("update", @update) 
```

如果您使用`@update()`，那么您将调用`@update`并将其返回值绑定到`"update"`事件。您可能还想`update`用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)进行定义：

```
update: (toolbar) =>
  # update text color, font etc 
```

这将在被调用时为您提供正确的`@`（AKA `this`）`update`。

# c# - 在 ASCX 中检索特定元素的 HTML

> ID：11622094
> 
> 赞同：1
> 
> 时间：2012-07-23T23:39:46.793
> 
> 标签：c#, asp.net, web-parts

> **可能重复：**
> [在 ASCX WebControl 中检索 HtmlGenericControl 的内容](https://stackoverflow.com/questions/11622541/retrieve-contents-of-htmlgenericcontrol-inside-ascx-webcontrol)

我在多个页面上嵌入了一个 ASCX 控件，该控件从数据库中提取页面上下文数据，将其绑定到转发器，然后有一个 Button_Click 事件，它将转发器的内容通过电子邮件发送给用户。

我在拉数据服务器端时遇到问题。我尝试使用传统方法（在 ASCX 后面的代码中），例如：

```
var sw = new System.IO.StringWriter();
var hw = new HtmlTextWriter(sw);
quotecontent.RenderControl(hw); 
```

但我收到一个错误：

```
RegisterForEventValidation can only be called during Render();
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: RegisterForEventValidation can only be called during Render(); 
```

听起来我可能无法在 ASCX 文件中使用 HtmlTextWriter？这是真的还是我做错了？如果是真的，我应该如何访问元素的内容？

（这是一个问题，因为 Button_Click 发生在 ASCX 用户控件的代码中，而不是 ASPX 页面中。在页面中没有这个选项。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:16:04.087

如果我的理解是正确的，这就是您要查找的输出：

![在此处输入图像描述](../Images/50498926988669443a02f1787b2f3d79.png)

我发布了代码以在您的[*简化问题中获得此结果*](https://stackoverflow.com/q/11622541/1268570)

# ruby-on-rails - 如何使用 ActiveRecord 查询有限的记录集

> ID：11622095
> 
> 赞同：1
> 
> 时间：2012-07-23T23:39:50.173
> 
> 标签：ruby-on-rails, activerecord, limit, where

在过去的几个小时里，这一直让我发疯，因为我确信必须有一个简单的解决方案。假设我有以下模型：

```
class Post < ActiveRecord::Base
    has_many :comments
end

class Comment < ActiveRecord::Base
    belongs_to :post
end 
```

并且 Comment 模型有一个名为 Flagged 的​​属性。假设该帖子有 10 条评论，并且前两条和后两条已被标记为已标记。

我想计算一篇帖子的前 5 条评论中有多少条已被标记。在这种情况下，我想返回 2。所以起初我尝试：

```
post.comments.limit(5).where(comments: { flagged: true }).count 
```

但这会返回 4，这是有道理的，因为它会找到 flagged 为 true 的前 5 条记录。我的问题是，我怎样才能只对有限的结果集进行计数？我试过了：

```
first_five_comments = post.comments.limit(5)
first_five_comments.where(flagged: true).count 
```

这也返回 4 因为它只是将关系链接在一起并执行与上面相同的查询。

我知道我可以使用直接的 SQL 语句来做到这一点，但似乎应该有更多的 Rails 方式来做到这一点。我是否必须在上面的语句中添加一个 .all ，然后在返回的数组中进行计数？显然这不起作用：

```
first_five_comments = post.comments.limit(5).all
first_five_comments.where(flagged: true).count 
```

因为我不能在数组上使用“where”。如果我必须这样做，我将如何在数组中搜索以获取计数？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:58:59.707

您需要过滤数组，然后计算它的元素。

```
post.comments.limit(5).select{ |comment| comment.flagged? }.size 
```

或更短：

```
post.comments.limit(5).select(&:flagged?).size 
```

注意：`select`是 Array 的一个方法，它与 SQL Select 语句没有任何关系。

# android - Android HttpClient 和 ThreadSafeClientConnManager 性能

> ID：11622105
> 
> 赞同：2
> 
> 时间：2012-07-23T23:40:43.487
> 
> 标签：android, apache-httpclient-4.x

我正在对调用后的较长响应时间进行故障排除，`HttpClient.execute(...)`并且我想确保我已在客户端上完成所有操作以优化 HTTP 请求的性能。

对网络的请求需要 1 到 40 秒，但平均约为 4 秒。我认为网络连接不是瓶颈，因为我使用的是强大的 WiFi 连接并且那里的速度没有问题。

HttpClient 的设置如下：

```
public static final int MAX_TOTAL_CONNECTION = 20;
public static final int MAX_CONNECTIONS_PER_ROUTE = 20;
public static final int TIMEOUT_CONNECT = 15000;
public static final int TIMEOUT_READ = 15000;

SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

HttpParams connManagerParams = new BasicHttpParams();
ConnManagerParams.setMaxTotalConnections(connManagerParams, MAX_TOTAL_CONNECTIONS);
ConnManagerParams.setMaxConnectionsPerRoute(connManagerParams, new ConnPerRouteBean(MAX_CONNECTIONS_PER_ROUTE));

HttpConnectionParams.setConnectionTimeout(connManagerParams, TIMEOUT_CONNECT);
HttpConnectionParams.setSoTimeout(connManagerParams, TIMEOUT_READ);

ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(new BasicHttpParams(), schemeRegistry);
sHttpClient = new DefaultHttpClient(cm, connManagerParams); 
```

现在是主观问题：**有没有更优化的方法来设置它？**

我正在`HttpClient.execute(...)`使用时间捕获来包装调用，因此调用下面的所有内容都是`execute(...)`平均花费 4 秒以上的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:48:58.863

尝试

```
HttpConnectionParams.setTcpNoDelay(httpClient.getParams(), true); 
```

运行免费的 wireshark/sharkwire 并告诉我们你看到了什么。

[http://www.wireshark.org/](http://www.wireshark.org/)

这将告诉您时间都花在了哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T08:24:09.407

我不久前解决了这个问题，但我会将发现的问题/解决方案发布为其他人可能会在这里找到的方法。

最初我假设一个请求一旦进入`HttpClient.execute(...)`. 在我的情况下这不是真的，因为我使用的是连接池，它在同一条路由上重复使用连接。此外，客户端被配置为每条路由使用 2 个连接。事实证明，我的代码块之一未能解析 API 响应，并且无法确保连接会关闭。随着应用程序的继续运行，多个数据流处于打开状态并阻止了其他挂起的连接。这种有限的吞吐量导致了我遇到的错误行为。

使用类似的东西`EntityUtils.toString(entity)`成为一种更好的方式来消费内容并保证连接完成后关闭。

# python - python中的求和函数

> ID：11622107
> 
> 赞同：0
> 
> 时间：2012-07-23T23:40:44.967
> 
> 标签：python, matrix, numpy, addition

我有一个矩阵列表如下：

```
myarrlist = [array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]), array([[10, 20, 30],40, 50, 60],[70, 80, 90]])] 
```

和，

```
sum(myarrlist)/float(len(myarrlist)) 
```

给了我以下结果（这是我需要的：矩阵加法的结果是一个矩阵）

```
array([[  5.5,  11\. ,  16.5],[ 22\. ,  27.5,  33\. ],[ 38.5,  44\. ,  49.5]]) 
```

但是，当我给

```
from numpy import * 
```

对于使用 dot() 函数进行矩阵乘法，sum() 函数不再给出矩阵作为结果，而是给出单个值（添加所有元素）。我是 python 新手，我猜测 numpy 中的 sum() 会覆盖对 python 内置 sum() 的调用。

我正在尝试在没有循环的列表中添加矩阵并找到适合的内置 sum() 。是否可以使用 python sum() 并仍然使用 numpy 的其他功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T23:48:06.920

当你这样做

```
from SomeModule import * 
```

你确实覆盖了内置的 sum 函数。这会将 numpy 命名空间中的所有内容导入到默认命名空间中。您可能想要做的是：

```
import numpy as np 
```

然后，您可以将 numpy dot 函数作为 np.dot 访问。通过这样做，如果命名空间定义了同名的函数，则可以防止命名空间相互踩踏。

另一种选择，如果你只想要点函数是这样做的：

```
from numpy import dot 
```

那么 dot 函数是 numpy 中唯一可用的函数。这是使用其他模块时采用的两种主要方法。Import * 通常不受欢迎，因为永远不知道不同的模块是否会相互踩踏或覆盖内置函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T23:44:16.310

这正是发生的事情。避免命名空间冲突的一种方法是仅导入您需要的内容：`from numpy import dot`例如。另一种方法是做`import numpy`or `import numpy as np`，并`dot`称为`np.dot()`or`numpy.dot()`

# javascript - 检查是否已加载 javascript，然后调用另一个 javascript

> ID：11622112
> 
> 赞同：0
> 
> 时间：2012-07-23T23:41:18.927
> 
> 标签：javascript, html, function, call

我有一个 javascript，它从 URL 获取 JSON 数据并将数据加载到页面上，然后我想调用另一个 javascript 来添加幻灯片效果。

有一个更简单的解决方案，即使用 setTimeout。但是这个解决方案并不完整，因为从 URL 获取数据没有固定的时间。每次通话都会有所不同。

因此，我想检查我的第一个 javascript 是否已加载，然后我想调用第二个 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:52:10.097

JavaScript 是一种异步语言，或者至少，它的 HTTP API（大部分）是异步的。

您不应该使用 settimeout，而应该使用异步链接来构建因果事件列表。有一大堆图书馆可以帮助解决这个问题，例如[http://www.infoq.com/articles/surviving-asynchronous-programming-in-javascript](http://www.infoq.com/articles/surviving-asynchronous-programming-in-javascript)

如果您从自己的站点加载内容，那么当 JSON 最终加载时会出现 onsuccess/oncomplete 事件，您可以为其分配回调。它的实际调用方式取决于您的 javascript 框架（如果您使用一个框架）。

如果您使用名为 JSONP 格式的远程站点数据，您需要定义一个回调，它应该是一个公共函数名称，如*onMyDataArrived*。你应该在那里添加你的回调代码。一些框架对你隐藏了这个细节，它们生成一个随机函数，当数据到达时将其删除，并提供类似于 onSuccess / onComplete 的 API。

如今，最流行的 javascript 框架是 jQuery，您可以在其中执行以下操作，例如：

```
$.ajax({
    url: 'give_me_my_json.php',
    dataType: 'json', 
    success: function(data){
         //call your second javascript
    }, 
    error: function(){
         //WHOOOPSIE... data could not be loaded
    }
}); 
```

# c - 根据编译器和声明遇到无限循环

> ID：11622113
> 
> 赞同：2
> 
> 时间：2012-07-23T23:41:28.750
> 
> 标签：c, windows, mingw

在这个程序中有一行我创建了一个名为“crazy_integer”的变量。

如果我不创建这个变量，MinGW 会创建一个无限循环！我似乎对任何其他编译器都没有这个问题。

谁能告诉我这里发生了什么？

重新创建：使用 MingW 下载最新版本的 CodeBlocks，创建一个新的控制台项目，然后尝试运行该程序。

然后，尝试删除我创建“crazy_integer”的代码行并再次运行该程序。结果应该是一个无限循环。

```
// In this program there is a line where I create a variable called 
// "crazy_integer". 
//
// If I do not create this variable, CodeBlocks creates an infinite loop!
// I do not seem to have this problem with any other compiler.
//
// Can anyone tell me what is going on here? 
//
// To recreate: Download the latest version of CodeBlocks with MingW, create
// a new console project, and try running this program.
//
// Then, try removing the line of code where I create "crazy_integer" 
// and run the program again. The result should be an infinite loop.

#include <stdio.h>
#include <string.h>

int find_winning_move(char *, char, int);
int display_board(char *);
int is_winning_position(char *, char);
void show_win_details(int, char);

int main(void) {
    int retval = 0;
    char raw_data[]         = "X  X XO  ";
    char player = 'X';

    printf("We are examining this board:  \n");
    display_board(raw_data);

    find_winning_move(raw_data, player, 1);

    return 0;
}

int find_winning_move(char *raw_data, char player, int depth) {

    char test_position[9];
    int crazy_integer=0;    // Adding this line will fix an infinite loop
    int i, win_result;

    for (i = 0; i < 9; i++) {
        if (raw_data[i] == ' ') {
            strcpy(test_position, raw_data);
            test_position[i] = player;
            win_result = is_winning_position(test_position, player);
            printf("The result of playing %c at position %d is: %d  \n",
                player, i, win_result);

            display_board(test_position);
        }
    }

    return 0;
}

int display_board(char *raw_data) {
    char display_model[]     = "[ ][ ][ ]\n[ ][ ][ ]\n[ ][ ][ ]\n";

    int i, j, k; k=0;

    for (i = 0; i <= 2; i++) {
        for (j = 1; j <= 7; j+=3) {
            display_model[ (i * 10) + j ] = raw_data[k++];
        }
    }

    printf("%s ", display_model);
}

int is_winning_position(char *raw_data, char player) {

    int i;

    // Test for horizontal win
    for (i = 0; i <= 6; i+=3) {
        if (raw_data[i] == player
            && raw_data[i+1] == player
            && raw_data[i+2] == player)
        {
            return 10 + i;
        }
    }

    // Test for vertical win
    for (i = 0; i <= 2; i++) {
        if (raw_data[i] == player
            && raw_data[i+3] == player
            && raw_data[i+6] == player)
        {
             return 20 + i;
        }
    }

    // Test for diagonal win
    if (raw_data[4] == player) {
        if (raw_data[0] == player && raw_data[8] == player) {
            return 31;
        }
        if (raw_data[2] == player && raw_data[6] == player) {
            return 32;
        }
    }

    return 0;

}

void show_win_details(int win_value, char player) {

    switch (win_value) {

        // Horizontal
        case 10 :
            printf("Horizontal win on first row for Player: %c  \n",
                player);
        break;
        case 13 :
            printf("Horizontal win on second row for Player: %c  \n",
                player);
        break;
        case 16 :
            printf("Horizontal win on third row for Player: %c  \n",
                player);
        break;

        // Vertical
        case 20 :
            printf("Vertical win on first column for Player: %c  \n",
                player);
        break;
        case 21 :
            printf("Vertical win on second column for Player: %c  \n",
                player);
        break;
        case 22 :
            printf("Vertical win on third column for Player: %c  \n",
                player);
        break;

        // Diagonal
        case 31 :
            printf("Diagonal win upper left to lower right for Player: %c  \n",
                player);
        break;
        case 32 :
            printf("Diagonal win lower left to upper right for Player: %c  \n",
                player);
        break;

        default: printf("Some error occurred.  \n"); break;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T23:53:16.637

你的变量声明：

```
char test_position[9]; 
```

太短了`strcpy`in it ( `strcpy(test_position, raw_data);`)。源缓冲区`raw_data`是 9 个字符加上空终止符。所以它会导致缓冲区溢出。添加该整数变量可能会在堆栈上提供额外的空间，以“修复”堆栈溢出。

# c - 仍然是“错误：在'*'标记之前的预期'='，'，'，';'，'asm'或'__attribute__'”

> ID：11622115
> 
> 赞同：0
> 
> 时间：2012-07-23T23:41:30.897
> 
> 标签：c, macos, gcc

这是一个说明问题的小型纯 C 程序。该程序不做任何事情；它是一个大型程序的精简版本，它表现出同样的问题。

这是场景：

Mac OS X 狮子；

gcc 版本 i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2335.15.00）；

示例代码：

```
#include <stdlib.h>
#include <stdio.h>

char huge *pbA;
char huge *pbB;

int main(int argc,char *argv[])
{
    pbA = (char huge *)farmalloc(2);
    pbB = pbA;
    *(pbB++) = 'A';
    return( 0 );
} 
```

编译命令：

```
gcc -c -Wall -O -g -pipe  -D_SDL myTest.c 
```

错误消息：

```
myTest.c:4: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
myTest.c:5: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
myTest.c: In function ‘main’:
myTest.c:10: error: ‘pbA’ undeclared (first use in this function)
myTest.c:10: error: (Each undeclared identifier is reported only once
myTest.c:10: error: for each function it appears in.)
myTest.c:10: error: expected ‘)’ before ‘huge’
myTest.c:10: warning: implicit declaration of function ‘farmalloc’
myTest.c:11: error: ‘pbB’ undeclared (first use in this function) 
```

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:03:35.037

我不确定是什么/在哪里`huge`，但编译器无法在您提供的内容中找到它（即您可能缺少标题）。至于`farmalloc`，那看起来是在`<alloc.h>`。现在关于*使用这些，在*[另一个网站](http://bytes.com/topic/c/answers/911182-can-anybody-explain-following-declaration-i-do-not-understand)上有一个答案`huge`：

```
Keywords like near/far/huge were once used as memory models in the old MSDOS 
days when computers had a max of 640K memory.

Any machine built in the last 15 years does not have that restriction so 
unless you have a real issue where you have to use really obsolete hardware, 
I would not spend time with segmented memory model syntax. 
```

`huge`，并且可能`farmalloc`也被今天的标准所弃用（就像远与近指针一样）。使用just`char *`并且`malloc`应该是你所需要的；没有奇怪的旧标题。

# javascript - 单击项目时显示浮出控件

> ID：11622117
> 
> 赞同：0
> 
> 时间：2012-07-23T23:41:45.247
> 
> 标签：javascript, windows-8, microsoft-metro

在 Metro 应用程序中，当用户单击 ListView 项的子元素时如何显示弹出窗口。我的意思是当用户点击下面的 ListView 项目的“项目覆盖”时，应该显示一个弹出窗口。我遇到的问题是 Metro ListView 没有为我提供在 itemInvoked 中获取该 DOM 的事件方法。

HTML

```
<!-- Detail items -->
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title" />
    <div class="item-overlay">
        <h4 class="item-title" data-win-bind="textContent: shortTitle; id: key"></h4>
    </div>
</div> 
```

JS。这是 ListView 项目的 itemInvoked 事件

```
itemInvoked: function (args) {
    console.log("groupItems:itemInvoked");
    if (appView.value === appViewState.snapped) {
        // If the page is snapped, the user invoked a group.
        var group = Data.groups.getAt(args.detail.itemIndex);
        nav.navigate("/pages/groupDetail/groupDetail.html", { groupKey: group.key });
    } else {
        // If the page is not snapped, the user invoked an item.
        var item = Data.items.getAt(args.detail.itemIndex);

        nav.navigate("/pages/itemDetail/itemDetail.html", { item: Data.getItemReference(item) });
    }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:52:04.183

您可能需要将 win-interactive 添加到容器中，以确保列表视图不会吞噬与元素的任何交互。

也就是说，给定您的处理程序，您为什么还要走那条路，默认调用的东西不给您所需的东西吗？

# prism - 棱镜导航 - 找出导航请求的来源？

> ID：11622120
> 
> 赞同：0
> 
> 时间：2012-07-23T23:42:00.817
> 
> 标签：prism

我有一个与区域中使用的视图相关联的视图模型。我试图找到一种方法，当从特定视图（比如视图 A）导航到该视图时，它会在内部完成一些工作，比如初始化一些列表、设置一些东西等等。但是如果它已经从视图 B 导航到，它不需要重新初始化所有内容，而只显示它已经拥有的数据。

我可以传递一个我想的参数，说明这是一个新操作还是我们是否要回到旧操作，但我认为能够说明如果我们来自这个视图，我们会更好一件事，如果我们来自那件事，我们就会做另一件事。

如果这是有道理的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:06:23.593

您可以实现`INavigationAware`包含 3 个方法的接口。这些方法之一是`OnNavigatedTo`方法。在那里您可以访问日志并检查当前条目。从那里您应该能够确定它是来自视图 A 还是视图 B。

```
public void OnNavigatedTo(NavigationContext navigationContext)
{
    var journal = navigationContext.NavigationService.Journal;
    //use journal.CurrentEntry 
} 
```

# c# - 如何创建包含包含工厂的控制器的工厂

> ID：11622124
> 
> 赞同：0
> 
> 时间：2012-07-23T23:42:13.453
> 
> 标签：c#, asp.net-mvc, factory

我正在尝试创建一个工厂，它将在字典中保存“子”控制器的列表。这些子控制器必须包含工厂，以便它们可以访问其他子控制器。这里是工厂：

```
public interface IChildControllerFactory
{
    IChildController GetChildController(object item);
}

public class ChildControllerFactory : IChildControllerFactory
{
    private Dictionary<string, IChildController> _childControllerDictionary;

    public ChildControllerFactory(IEnumerable<IChildController> childControllers)
    {
        var childControllerDictionary = new Dictionary<string, IChildController>();

        //code to build dictionary
        _childControllerDictionary = childControllerDictionary;
    }

    public IChildController GetChildController(object item)
    {
        return _childControllerDictionary.Where(x => x.Key == item.GetType().Name).Select(x => x.Value).First();
    }
} 
```

下面是一个子控制器的例子：

```
public class ChildController : Controller, IChildController<TViewModel, TModel>
{
    private IChildControllerFactory _childControllerFactory;

    public ChildController(IChildControllerFactory childControllerFactory) //this will cause a circular reference
    {
        _childControllerFactory = childControllerFactory;
    }

    public ActionResult GetChildViewModel(object child)
    {
        var model = _childControllerFactory.GetChildController(child).ToViewModel(survey);
        return PartialView("Child.ascx", model);
    }
} 
```

和继承的接口：

```
public interface IChildController<TViewModel, TModel>
{
    int Create(object item);
    object Save(object item);
    object ToViewModel(object item);
} 
```

子控制器全部注册，工厂指定为带有结构映射的单例。

因为子控制器需要Factory，使用依赖注入在构造函数中设置工厂会导致循环引用，因为第一次初始化Factory时，会初始化所有子控制器，每个子控制器都会尝试初始化Factory（即已经在执行）。

如何让工厂实例化所有子控制器，然后从这些子控制器访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:11:02.300

让我们考虑一下。A`childController`只能在分配了工厂权限的情况下工作？所以在`childFactory`创建 a 之前， childControll 实际上是无用的。那就是说我会做类似的事情：

```
public class ChildController : Controller, IChildController<TViewModel, TModel>
{
    private IChildControllerFactory _childControllerFactory;

    public ChildController() 
    {
    }

    public void setChildControllerFactory( IChildControllerFactory childControllerFactory )
    {
       _childControllerFactory = childControllerFactory;
    }

    public ActionResult GetChildViewModel(object child)
    {
        var model = _childControllerFactory.GetChildController(child).ToViewModel(survey);
        return PartialView("Child.ascx", model);
    }
} 
```

所以你`ChildControllerFactory`会是这样的：

```
public ChildControllerFactory(IEnumerable<IChildController> childControllers)
{
    var childControllerDictionary = new Dictionary<string, IChildController>();
    _childControllerDictionary = childControllerDictionary;
    for(IChildController i in _childControllerDictionary) i.setChildControllerFactory(this);
} 
```

我没有测试它，但我没有看到具体对象有必要在构造函数中传递工厂，因为您将这个对象的字典存储在您的工厂中。

# python - Python 和 OpenCV - 视频中的对象检测和替换

> ID：11622126
> 
> 赞同：1
> 
> 时间：2012-07-23T23:42:21.467
> 
> 标签：python, opencv

我从openCV和Python开始，我需要做以下任务：

1.  获取人的头像，检测人脸并保存
2.  使用保存的面孔替换视频中的木偶头

第 1 点已经完成。

你能帮我解决第2点吗？

提前致以亲切的问候和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:45:20.607

您可以检测木偶脸并将其替换为从个人资料图片中裁剪出来的图像。

尝试在 puppet 视频上使用相同的算法（可能您使用 Haar 对象检测）检测面部，看看它是否正在检测。如果它正在检测人偶的脸，只需获取坐标并将其替换为人脸即可。看看这个[问题](https://stackoverflow.com/questions/10991523/opencv-draw-an-image-over-another-image)。

如果木偶脸与人脸不太相似，您将需要 Haar 模板来检测视频中的木偶头。为此，您必须自己准备一个模板。看看这个[链接](http://note.sonots.com/SciSoftware/haartraining.html)。

也看看这个[链接](http://opencv.willowgarage.com/wiki/FaceDetection/)。它在 C 中，但您可以毫不费力地将其转换为 Python。

# json - Neo4j::Rails::Model to_json - 缺少节点 ID

> ID：11622127
> 
> 赞同：2
> 
> 时间：2012-07-23T23:42:29.897
> 
> 标签：json, serialization, neo4j, jrubyonrails, activemodel

我有一个带有 Neo4j.rb 的 Jruby on Rails 应用程序和一个模型，比如说 Auth，定义如下：

```
class Auth < Neo4j::Rails::Model
  property :uid, :type => String, :index => :exact
  property :provider, :type => String, :index => :exact
  property :email, :type => String, :index => :exact
end 
```

而这段代码：

```
a = Auth.find :uid => 324, :provider => 'twitter'
# a now represents a node
a.to_json
# outputs: {"auth":{"uid": "324", "provider": "twitter", "email": "email@example.com"}} 
```

请注意，JSON 表示中缺少节点的 ID。我的应用程序中有一个 RESTful API，我需要该 id 来执行 DELETE 和 UPDATE 操作。

我试过这个看看它是否有效：

```
a.to_json :only => [:id] 
```

但它返回一个空的 JSON `{}`。

有什么方法可以在不重写整个`to_json`方法的情况下获取 JSON 表示中的节点 ID？

**更新**同样的问题也适用于该`to_xml`方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:35:37.007

我正在回答我自己的问题。我仍然认为有更好的方法可以做到这一点，但是，现在，我正在使用以下 hack：

在`/config/initializers/neo4j_json_hack.rb`我输入以下代码：

```
class Neo4j::Rails::Model
    def as_json(options={})
        repr = super options
        repr.merge! '_nodeId' => self.id if self.persisted?
    end
end 
```

现在我的持久`Neo4j::Rails::Model`对象的每个 JSON 表示都有一个`_nodeId`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:40:43.293

ID 通常不包括在内，因为它不应该暴露在 Neo4j 数据库之外。Neo4j 不保证各个实例的 ID 相同，如果在 Neo4j 的分布式企业安装中更改了 ID，我也不会感到惊讶。

您应该创建自己的 ID（GUID？），将其保存为节点上的属性，对其进行索引，并使用它来引用您的节点。不要将 Neo4j ID 暴露给您的用户或应用程序，并且绝对不要在单个请求之外依赖它（例如，不要在另一个数据库中保存对它的引用或使用它来测试是否相等）。

# php - 使用 MySQL while 循环显示多行

> ID：11622130
> 
> 赞同：-1
> 
> 时间：2012-07-23T23:42:52.170
> 
> 标签：php, mysql, loops, while-loop

我正在尝试使此代码显示与所有者匹配的行数。我用来测试的所有者目前有三个项目，但只有一个项目出现。我怎样才能让它显示所有者的所有物品？

```
<?php
    $username = $_SESSION['username'];
    $get = @mysql_query("SELECT * FROM items WHERE owner = '$username'");
    $row = mysql_fetch_assoc($get);
    $check = mysql_num_rows($get);

    if($check == 0)
        echo "You have no items in your inventory.";

    while($row = mysql_fetch_assoc($get))
    {
        echo "<p>Item Name:" . $row['name'] . "</p></br>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:49:29.107

像这样做

```
<?php
    $username = $_SESSION['username'];
    $get = @mysql_query("SELECT * FROM items WHERE owner = '$username'");
    // deleted
    $check = mysql_num_rows($get);

    if($check == 0)
        echo "You have no items in your inventory.";

    while($row = mysql_fetch_assoc($get))
    {
        echo "<p>Item Name:" . $row['name'] . "</p></br>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:49:31.480

你不应该`mysql_fetch_assoc`在之后打电话`@mysql_query`。它已经在那里获取了一条记录并将内部数据指针向前移动。

附带说明：您应该使用正确的用户名转义，因为在这种形式下，代码容易受到 SQL 注入的攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:51:18.947

拿出第一个`$row = mysql_fetch_assoc($get);`。

# c# - 车牌验证问题

> ID：11622131
> 
> 赞同：1
> 
> 时间：2012-07-23T23:43:04.797
> 
> 标签：c#, image-processing, aforge, anpr

我正在开发一个自动车牌验证系统。我已经设法在车辆图像上找到了车牌区域（矩形），但我需要过滤掉图像上的非车牌矩形区域。

我正在使用标准，例如

1.  最小车牌宽度 x 高度，以便可以过滤掉较小的非车牌区域

2.  车牌宽高比

这两个标准帮助我减少了非车牌区域的数量。但我仍然有一些不是车牌区域的候选区域。有人可以建议我一些标准，我可以用来返回确切的车牌区域。

我正在使用 C# 和 aforge.net

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:30:38.380

在现实世界的场景中，不可能保证接近 100% 的匹配记录。请注意尺寸和比例问题，因为某些合法车牌的尺寸和比例可能会大不相同。例如“Q”车牌、（Qld）和道路上的拖车/自行车架车牌。

如果您获得了合理的命中率，并确保您获得了几乎所有印版以及一些误报，则处理/OCR 所有命中并选择“最佳”匹配。如果您检测到误报，但找到一个匹配的可疑板块，请标记它们以供审查。（低紧急性）没有匹配或多个匹配的情况，标记为高度紧急审查。

您可以在图像中优先放置（取决于您是拍摄正面图像还是背面图像，正面应该更容易放置）但这不能太严格，因为卡车和自行车架可以在图像的不太预期的区域放置车牌，加上把它们放在后窗的人。（不知道这有多合法。）

在非技术方面，如果您可以控制硬件，那么请务必使用红外线摄像头。印版使用 IR 反射油墨制造。（通常是背景）这有助于 OCR 对比度，但也会从图像中过滤掉个性化的背景。（所以 Daffy 的脸不会弄乱 OCR。）

# iphone - 如何为 resultText.text 编写“if”条件？

> ID：11622133
> 
> 赞同：0
> 
> 时间：2012-07-23T23:43:11.640
> 
> 标签：iphone, if-statement, conditional-statements

以下是来自 Zbar SDK 的代码，它允许您扫描条形码。读取条码后，条码编号会出现在界面上的 textView 框中。您看到的 resultText.text = symbol.data 是条形码解码信息并允许条形码出现在 textView 框中的位置。所以基本上因为无论条形码解码都放在 resultText.text 中，我添加了“if”条件：

```
if ([symbol.data = 04176400]) {
    resultText.text = @"This is a sprite bottle";
} 
```

雪碧瓶上的条形码是 04176400。所以我希望显示文本“这是一个雪碧瓶”而不是瓶子上的条形码 04176400。但是，上面的这个“如果”条件不起作用。Xcode 显示错误“assignment to readonly property”。我相信我的“如果”条件是完全错误的，尽管它看起来很合乎逻辑。我应该用什么来代替这个，我很无能。下面是整体处理条形码数据的代码。

```
- (void) imagePickerController: (UIImagePickerController*) reader
didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    // ADD: get the decode results
    id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
    // EXAMPLE: just grab the first barcode
    break;
    // EXAMPLE: do something useful with the barcode data
    resultText.text = symbol.data;

    //THIS IS THE FAULTY CODE.
    if ([symbol.data = 04176400]) {
        resultText.text = @"This is a sprite bottle";
    }

    // setup our custom overlay view for the came
    // ensure that our custom view's frame fits within the parent frame

    // EXAMPLE: do something useful with the barcode image
    resultImage.image = [info objectForKey: UIImagePickerControllerOriginalImage];

    // ADD: dismiss the controller (NB dismiss from the *reader*!)
    //Delete below in entirety for continuous scanning.
    [reader dismissModalViewControllerAnimated: YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:15:24.870

Use `==` to compare the two values.

`if ([symbol.data == 04176400])`

In Objective-C, `==` is a comparative operator, and what you should be using in this situation. `=` is typically used for assignment. And on a separate note, you would get the same error if you tried to properly alter `symbol.data` because Xcode is saying it is a read-only property that cannot be altered.

# c# - 独立数据容器/数据库

> ID：11622134
> 
> 赞同：0
> 
> 时间：2012-07-23T23:43:13.960
> 
> 标签：c#, database, dataset, store

我在呼叫中心工作，我们需要使用大量基于 Web 的工具并处理大量信息。我们需要的工作方式效率不高，所以我为自己制作了几个 C# Windows 应用程序，以使我的工作更轻松一些。

问题是那些计算机被锁定在一个非常高的级别。几乎所有网站都被屏蔽了，我们无法使用 USB 驱动器在电脑上获取数据，在工作中将数据获取到我的帐户的唯一方法是将其压缩成 7z 文件邮寄。我们无法安装软件、驱动程序等。幸运的是，我对程序数据文件夹具有写入权限以保存一些数据。但我可以存储数据的唯一方法是将其全部放入 .txt 文件中。我尝试了很多独立数据库，但空间也有限，因为我们有 30MB。因此，xampp（或类似软件）的独立版本几乎是 40 MB，所以我不能使用它。

有人知道我存储数据的数据库类型是（主要是文本和整数）吗？我更喜欢可以放入程序数据文件夹中的单个文件。我也更喜欢它以与从数据库、数据集或类似的东西中获取数据相同的方式获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:03:00.543

您可能想查看 Infobright 社区版，它可以为您提供令人难以置信的平均 40:1 压缩比。Infobright 与 mysql 完全一样，而且非常紧凑。

*免责声明：作者隶属于 Infobright。*

# javascript - AngularJS指令链接功能不起作用

> ID：11622135
> 
> 赞同：6
> 
> 时间：2012-07-23T23:43:19.827
> 
> 标签：javascript, angularjs

[http://jsfiddle.net/kz26/kH9wg/](http://jsfiddle.net/kz26/kH9wg/)

我正在使用 AngularJS 中的指令，并尝试了简写指令样式（仅返回链接函数）和简写样式（返回全部或部分指令定义对象。

不幸的是，我只能使用`popup2`. 手写`popup2`指令似乎根本不起作用，特别是`link`我的定义对象中的函数永远不会被调用。我需要做什么才能使这个显式链接声明起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T04:11:23.197

您的两个指令都进行了一些小调整，以便在创建指令时重用相同的模块，而不是覆盖第一个。看到[这个小提琴](http://jsfiddle.net/kH9wg/3/)。

而不是这样做：

```
angular.module("app", []).directive('popover1'...

angular.module("app", []).directive('popover2'... 
```

做这样的事情：

```
var module = angular.module("app", []);

module.directive('popover1'...

module.directive('popover2'... 
```

**编辑：**查看[文档](http://docs.angularjs.org/api/angular.module)后，我发现您可以执行与原始帖子类似的操作，如下所示：

```
angular.module('app', []).directive('popover1'...

angular.module('app').directive('popover2'... 
```

`[]`在第一个参数之后的后续调用中省略第二个参数`angular.module`以配置现有模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-02T19:10:03.327

为什么这里没有调用链接函数？：

```
<div ng:app="app">
<div>
    <p test="">Hello!</p>
</div> 
```

```
var module = angular.module("app", []);

module.directive('test', function() {
return {
        restrict: '',
        link: function () {
            console.log('linkfn');
        },
        compile: function() {
            console.log('compile');
        }
    };

}); 
```

小提琴：http: [//jsfiddle.net/ZWLzb/](http://jsfiddle.net/ZWLzb/)

# c# - 如何在交叉表报告中分组

> ID：11622136
> 
> 赞同：0
> 
> 时间：2012-07-23T23:43:35.297
> 
> 标签：c#, crystal-reports, crystal-reports-2008, crosstab, crystal-reports-2010

我创建了一个交叉表，显示员工每周工作的小时数。但我想按他们的团队负责人对他们进行分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:34:47.657

为团队负责人添加一个组。将交叉表移动到新组的标题中。很难将组名字段可靠地定位在您想要的位置。我建议创建第二个组标题部分（插入下面的部分）并将交叉表移动到它。因此，GHXa 将具有组名字段，而 GHXb 将具有交叉表。

# wpf - 防止文本中 XAML 内联前后自动添加空格

> ID：11622137
> 
> 赞同：2
> 
> 时间：2012-07-23T23:43:50.170
> 
> 标签：wpf, visual-studio-2010, xaml

好的，所以这是我在 WPF 中使用 Visual Studio 2010 + XAML 时的一点烦恼。我想在我的 XAML 中插入超链接元素或运行元素。但是，Visual Studio 真的很喜欢在创建元素时将它们放在一个新行上，并在它们之后添加一个空格。所以，下面的代码：

```
(<Hyperlink Command="{Binding References}">Click Here for references</Hyperlink>) 
```

将变成：

```
(
<Hyperlink Command="{Binding References}">Click Here for references</Hyperlink> ) 
```

当我单击 Ctrl-K Ctrl-D （我经常这样做）来格式化文档时。当我将第一段代码粘贴到其他地方时，甚至当我键入超链接本身时，也会发生这种行为。

最终，代码最终呈现如下内容：

（点击这里查看参考资料）

空格太多，看起来很傻，需要手动删除。

我的代码中有很多超链接，可能还有同样多的 Run。

**如何在 Visual Studio 中删除此默认行为？**

欢迎使用 PS 链接 - 我试图四处搜索，但还没有找到任何东西。

# java - Swing 和 Nimbus：替换 JPopupMenu 的背景（附在 JMenu 上）

> ID：11622138
> 
> 赞同：17
> 
> 时间：2012-07-23T23:43:53.267
> 
> 标签：java, swing, nimbus, jpopupmenu

Nimbus 通常看起来很棒，但对于某些颜色组合，结果并不理想。就我而言， a 的背景`JPopupMenu`不适合，这就是我要手动设置它的原因。

我在 Java 7 上，有趣的是，Nimbus 完全忽略了`UIManager`(like `PopupMenu.background`) 中某些属性的设置。所以我唯一的选择是创建一个`JPopupMenu`overrides的子类`paintComponent(...)`。我知道，这很糟糕，但至少它奏效了。

但是，如果您将 a 添加`JMenu`到另一个菜单，它会嵌入它自己的实例，`JPopupMenu`我无法弄清楚如何用我自己的子类替换它。

即使为嵌入式实例分配一个自己`PopupMenuUI`也没有带来任何结果。`JPopupMenu`如果调用了直接从被覆盖的方法继承的`paint(...)`方法，但是无论我做什么，都没有绘制任何内容。如果从 继承`javax.swing.plaf.synth.SynthPopupMenuUI` `paint`甚至没有被调用，结果是如果我根本没有设置自己`PopupMenuUI`的。

所以一个简单的问题是：如何`JPopupMenu`使用 Nimbus 作为 L&F 在 Java 7 上调整一个或（如果更容易的话）所有这些的背景颜色？

**编辑：代码示例**

看看下面的代码和结果：

```
public static void main(final String[] args) {
    try {
        UIManager.setLookAndFeel(NimbusLookAndFeel.class.getCanonicalName());
        UIManager.getLookAndFeelDefaults().put("PopupMenu.background", Color.GREEN);
        UIManager.getLookAndFeelDefaults().put("Panel.background", Color.RED);
        UIManager.getLookAndFeelDefaults().put("List.background", Color.BLUE);
    } catch (ClassNotFoundException | InstantiationException
            | IllegalAccessException | UnsupportedLookAndFeelException e) {
        e.printStackTrace();
    }
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(200,200);

    JPanel panel = new JPanel(new BorderLayout());
    panel.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
    JList list = new JList();
    panel.add(list);

    frame.getContentPane().add(panel);

    JPopupMenu menu = new JPopupMenu();
    menu.add(new JMenuItem("A"));
    menu.add(new JMenuItem("B"));
    menu.add(new JMenuItem("C"));

    frame.setVisible(true);
    menu.show(frame, 50, 50);
} 
```

我知道，有人说你应该在设置 L&F*之前*`UIManager.put(key, value)`使用or ，但对我来说这不会带来任何结果（意思是：根本没有改变默认颜色）。上面的代码至少带来了：`UIManager.getLookAndFeelDefautls().put(key,value)`

 *![第一张截图](../Images/61801c90b2d0ebeed763a78df551e089.png)

如果您使用`JPopupMenu.setBackground(...)`. 这是因为 Nimbus 使用了一个内部绘制程序，它根据 Nimbus 的原色计算颜色并忽略组件的属性。在此示例中，您可以使用以下解决方法：

```
JPopupMenu menu = new JPopupMenu() {
    @Override
    public void paintComponent(final Graphics g) {
        g.setColor(Color.GREEN);
        g.fillRect(0,0,getWidth(), getHeight());
    }
}; 
```

这带来了

![第二屏](../Images/9f75a38c843c8c6762d97330e982b4e9.png)

`JMenu`但是，如果您插入一个本身包装`JPopupMenu`您无法覆盖的a，则此解决方法不起作用：

```
JMenu jmenu = new JMenu("D");
jmenu.add(new JMenuItem("E"));
menu.add(jmenu); 
```

正如预期的那样：

![第三屏](../Images/3cffe5f004e766d3a18299bc89ed0c1e.png)

`JPopupMenu`您可以使用它来检索它，`JMenu.getPopupMenu()`但不能设置它。即使在自己的子类中重写此方法`JMenu`也不会带来任何结果，因为`JMenu`似乎在`JPopupMenu`不使用 getter 的情况下访问它的封装实例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T12:35:16.213

*   两个答案都有一些错误

*   和上面提到的方法来覆盖大多数对另一个 JComponents 及其颜色产生影响的 UIDeafaults

*   Nimbus 有自己的 Painter，就是一个例子……

![在此处输入图像描述](../Images/a485eb1e5d36b6cfcf29e0c7ac6c9063.png)

从代码

```
import com.sun.java.swing.Painter;
import java.awt.*;
import javax.swing.*;

public class MyPopupWithNimbus {

    public MyPopupWithNimbus() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);
        JPanel panel = new JPanel(new BorderLayout());
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        JList list = new JList();
        panel.add(list);
        frame.getContentPane().add(panel);
        JPopupMenu menu = new JPopupMenu();
        menu.add(new JMenuItem("A"));
        menu.add(new JMenuItem("B"));
        menu.add(new JMenuItem("C"));
        JMenu jmenu = new JMenu("D");
        jmenu.add(new JMenuItem("E"));
        menu.add(jmenu);
        frame.setVisible(true);
        menu.show(frame, 50, 50);
    }

    public static void main(String[] args) {

        try {
            for (UIManager.LookAndFeelInfo laf : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(laf.getName())) {
                    UIManager.setLookAndFeel(laf.getClassName());
                    UIManager.getLookAndFeelDefaults().put("PopupMenu[Enabled].backgroundPainter",
                            new FillPainter(new Color(127, 255, 191)));
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyPopupWithNimbus aa = new MyPopupWithNimbus();
            }
        });
    }
}

class FillPainter implements Painter<JComponent> {

    private final Color color;

    FillPainter(Color c) {
        color = c;
    }

    @Override
    public void paint(Graphics2D g, JComponent object, int width, int height) {
        g.setColor(color);
        g.fillRect(0, 0, width - 1, height - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T18:43:46.997

一种方法是为各个 JMenuItems 的背景着色并使它们不透明：

```
JMenuItem a = new JMenuItem("A");
a.setOpaque(true);
a.setBackground(Color.GREEN); 
```

然后给菜单本身一个绿色边框来填充其余部分：

```
menu.setBorder(BorderFactory.createLineBorder(Color.GREEN)); 
```

那里可能有一个简单/更直接的方法，但这对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-30T09:17:43.380

不是全部 - 但看起来将菜单/项目的不透明度设置为 true 部分解决了它（正如@Derek Richard 已经为在完全应用程序控制下创建的项目所做的那样）：

```
UIDefaults ui = UIManager.getLookAndFeelDefaults();
ui.put("PopupMenu.background", GREEN);
ui.put("Menu.background", GREEN);
ui.put("Menu.opaque", true);
ui.put("MenuItem.background", GREEN);
ui.put("MenuItem.opaque", true); 
```

等等，适用于所有类型的项目，如单选按钮/复选框。

这仍然留下一个上/下灰色区域 - 不知道哪个部分负责该绘图。去除边距有助于以看起来受到挤压的代价

```
// this looks not so good, but without the margins above/below are still grey
ui.put("PopupMenu.contentMargins", null); 
```

本教程中有一个[属性键列表。](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)*

# validation - node.js 数据访问层中的错误处理

> ID：11622140
> 
> 赞同：2
> 
> 时间：2012-07-23T23:44:01.427
> 
> 标签：validation, node.js, coffeescript, typechecking

假设我正在使用存储库模式进行数据访问，如下所示：

```
#userController.coffee

# `userId` is obtained from the session

user =
  email: 'Bob'
  password: 'Secret'

db.userRepo(@userId).create user, (err, data) =>
  # return results in http response or socket.io 
```

这是此方法调用期间可能出现的问题：

*   访问数据库时出错
*   查询中的语法错误
*   在可变查询期间打破约束（我正在使用 node-mysql）
*   A`user`存在验证错误，例如缺少字段等。
*   用户已经存在`user.email`。

### 我的问题是如何在回调中返回这些错误中的每一个？

*回调参数的选项：*

*   `(err, data)`- 其中`err`是遇到的所有错误的数组。
*   `(err, data)`-`err`验证错误在哪里，数据库错误作为异常抛出。
*   `(err, data)`- 与上面相同，但当它`user`已经存在时它返回 null，因为这不是错误而是预期的行为。
*   `(err, data, validation)`-`validation`验证错误数组或`null`.
*   `(err, data, model)`- 返回具有验证属性的模型类 - 活动记录样式。

随意提出不同的建议。

### 后续问题：应该在哪里验证论点？在控制器/路由级别、数据访问级别或 SQL 数据库？

*   在这两个级别上都会有很多重复的代码。我宁愿干。
*   使用静态类型，我可以在控制器级别检测错误，并且可以信任类型系统。如果没有静态类型，数据层就不能真正信任任何人，因此它可能需要具有所有验证逻辑。
*   静态类型检查通常会发现的错误应该会引发错误，因为我需要修复它们。他们是虫子。但是，如果我没有找到它们，我宁愿给用户一个愉快的消息，而不是内部服务器错误 500 或堆栈跟踪。
*   如果我想把它演变成一个公共 API，我肯定需要所有的验证。

我计划结合使用[节点验证器](https://github.com/chriso/node-validator)和[重新](https://github.com/flatiron/revalidator)验证器来验证对象和参数。

*背景故事：出于更大的社区、良好的 web-sockets 支持和开发人员生产力的原因，我刚刚从 Scala/Play 转到 Node/Express。在开始使用[Sequelize](http://www.sequelizejs.com/) ORM 后，我认为它太受限制，无法创建连接，而且我的模式很简单，所以我开始编写原始 SQL。在开发速度得到初步提升后，我发现自己每天都想要静态输入。我正在编写的测试和验证代码的数量要大得多。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:48:28.403

我建议`(err, data, validation)`您可以轻松检查用户需要重新输入的无效输入和实际的 DB 错误`err`，这可能会在测试和原型设计期间将详细信息写入日志文件时打印出漂亮的错误消息。

# python - 使用 Mock 对调用 url 的函数进行单元测试

> ID：11622141
> 
> 赞同：1
> 
> 时间：2012-07-23T23:44:02.567
> 
> 标签：python

# 问题

我有一个调用 url 然后修改该 url 响应的函数。如何为修改响应的该函数代码部分编写单元测试，而不必依赖该 url？

## 例子

### 我的模块.py

```
import requests

def get_some_resource():
    url = 'http://httpbin.org/get'
    r = requests.get(url)
    # Special manipulation of returned text (what I want to test) simple example used
    output = r.text.upper()
    return output 
```

## 到目前为止我尝试过的

*   使用 mock 的 MagicMock() （据我所知，你不能用它来覆盖函数的变量）
*   我考虑过拆分该函数的两个部分（检索 url 和修改响应），但是，我不清楚这是否有必要
*   这么多谷歌搜索我的手受伤了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:56:49.223

如果这是一个单元测试，您可能只想模拟出`requests`库。你可以只是`patch`整个事情，或者只是`get`，这并不重要。

它看起来像：

```
get = mock.Mock()
text = get.return_value.text = "hey I got this")
with mock.patch("my_module.requests.get", get):
    resource = get_some_resource()
self.assertEqual(resource, text.upper()) 
```

干杯。

# oracle - 在文本字段上使用 Apex 验证？

> ID：11622144
> 
> 赞同：1
> 
> 时间：2012-07-23T23:44:52.837
> 
> 标签：oracle, oracle-apex

我在让验证在 Apex 中正常工作时遇到问题。

我有 3 个页面项目给我带来了麻烦，:P5_JACKPOT、:P5_TICKET_PRIZE、:P5_TOTAL_PRIZE。头奖可以是任意大小，ticket_prize + total_prize 可以是任意大小，只要它们比头奖少。我对此进行的验证如下：

```
if :P5_TICKET_PRIZE > :P5_JACKPOT then
return false;
else
return true;
end if; 
```

对这两个项目进行相同的验证，并进行必要的替换，非常简单。问题是，它似乎不适用于所有数字。例如，如果头奖值为 200，其他两个项目的头奖值为 50，则会导致错误标记，而它不应该标记。但是，累积奖金值为 200，而其他值为 100 + 100 不会导致错误标志，因为它应该。似乎有些数字有效，有些则无效。有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:12:49.680

听起来问题是数据类型之一。 `:P5_TICKET_PRIZE`and`:P5_JACKPOT`都是字符串，所以当你比较它们时，你会得到字符比较语义。按字母顺序，字符串“50”在字符串“200”之后，因为字符“5”在字符“2”之后。如果要将 in 中的数值与 in`:P5_TICKET_PRIZE`中的数值进行比较，则`:P5_JACKPOT`需要将`to_number`函数应用于表达式的两侧

```
if to_number( :P5_TICKET_PRIZE ) > to_number( :P5_JACKPOT ) then
  return false;
else
  return true;
end if; 
```

# c - 为什么 sizeof(param_array) 是指针的大小？

> ID：11622146
> 
> 赞同：19
> 
> 时间：2012-07-23T23:44:53.773
> 
> 标签：c

我想得到一个数组的长度，比如说`int array[] = {1, 2, 3, 4}`。我曾经`sizeof`这样做过。

```
int length(int array[])
{
     return sizeof(array) / sizeof(int);
}

int main()
{
    int array[] = {1, 2, 3, 4};
    printf("%d\n", length(array)); // print 1
    printf("%d\n", sizeof(array) / sizeof(int)); // print 4
} 
```

那么，为什么`sizeof(array)`in 函数`length`返回的指针大小为`array`? 但在功能`main`上，它是有效的。

而且，我应该如何修改`length`函数来获取数组的长度？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-23T23:51:46.777

一个特殊的 C 规则说，对于函数参数，数组类型被*调整*为指针类型。这意味着：

`int length(int array[]);`

相当于

`int length(int *array);`

因此，当您计算`sizeof`数组时，您实际上是在计算指针的大小。

> （C99，6.7.5.3p7）“将参数声明为“类型数组”应调整为“类型限定指针”，其中类型限定符（如果有）是在数组的 [ 和 ] 中指定的限定符类型推导。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T23:49:17.590

当您将数组传递给函数时，数组会衰减为指针。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T01:31:29.807

正如其他回答者所指出的，声明为采用数组的函数的编译方式与它采用指针的方式相同。

我见过的最常见的长度方法是使用#define，但是如果你使用模板玩技巧，你可以让你的函数工作。

```
template <size_t _Size> inline int length(int(& array)[_Size])
{
    //return sizeof(array) / sizeof(int);
    return _Size;
};

int array[] = {1, 2, 3, 4};
printf("%d\n", length(array)); // print 4 
```

使用长度为 4 的数组，这将被编译为采用长度为 4 的数组并返回静态 4 的方法。这还有一个优点是，如果您尝试传递不是数组的东西，编译器会给出一个错误，而#define 方法没有。

```
int* foo = array;
printf("%d\n", length(foo)); 
    // error C2784: 'int length(int (&)[_Size])' : could not deduce template
    //     argument for 'int (&)[_Size]' from 'int *'
    // test.cpp(56) : see declaration of 'length' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T23:47:25.647

在主程序中，编译器知道数组的长度。在子程序中，它没有。特别是，在子例程中，类型参数与类型`int[]`参数相同`int *`。另一方面，在主程序中，`array`有 type `int[4]`。（您可以通过尝试为`array`in side分配另一个值来测试这一点`main`。编译器会抱怨。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-23T23:47:01.980

C 不使用变量存储有关数组大小的运行时元数据。您必须自己将其存储在某个地方。

*在方法长度*的上下文中，类型为*int[]*的变量只是指向内存块的指针。这就是为什么大小与系统上任何其他指针的大小相同的原因。

 *当*sizeof*在编译时访问数组时（如在您的*main*函数中），它将返回数组占用的字节数。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-23T23:57:24.140

如果您想`length`知道传入数组的真实大小，则必须传入该信息，正如每个人所说的那样。但是它有可能接收到对数组的引用，其中包含内置的信息：

```
int length(int n, int (* array)[n])
{
     return sizeof(*array) / sizeof(int);
}

int main()
{
    int array[] = {1, 2, 3, 4};
    printf("%d\n", length(4, &array)); // print 1
    printf("%d\n", sizeof(array) / sizeof(int)); // print 4
} 
```

不过，我不知道这对您有什么好处，因为首先已经提供了尺寸。但是您会看到，`sizeof`在这种情况下，操作员按您希望的方式工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T23:47:31.707

因为里面的可变数组长度和外面的不一样。您必须将 sizeof(array) / sizeof(int) 保留在 main 函数中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T23:51:41.327

要修改代码以`length`获取数组的长度，请将其转换为宏：

```
#define length(x) (sizeof(x)/sizeof(*x)) 
```

对于您的代码示例，这将按照您的预期运行。

请注意，这*仅*适用于静态分配的数组，并且仅在使用原始数组调用时（使用指向数组的指针时不起作用）。这是因为当您编写指向数组的指针`sizeof(x)`where时，编译器会按字面意思解释它。`x`在`x`评估`sizeof`.*

# c++ - 有没有办法在 QMenu 中有多个列？

> ID：11622147
> 
> 赞同：3
> 
> 时间：2012-07-23T23:44:57.557
> 
> 标签：c++, qt, user-interface, qmenu

有没有办法在 QMenu 中有多个列？我将 Qt 与 C++ 一起使用。我已经搜索过，似乎没有办法在 Qt 中内置此功能。那么问题是如何将这个功能添加到我的程序中？有没有人建立一个可以有多个列的自定义菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:52:07.887

也许您正在寻找子菜单。正如 qt 文档[所说](http://doc.qt.digia.com/4.6/qmenu.html#details)：

> 使用 addSeparator() 插入分隔符，使用 addMenu() 插入子菜单，所有其他项都被视为操作项。

例如，这里有一个完整的例子。而“格式”菜单项是一个子菜单。您可以添加一个子菜单：

```
m_mysubmenu = QMenu(...);
...
m_menu->addMenu(m_mysubmenu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:30:18.210

我在[这里](http://qt.gitorious.org/qt/qt/merge_requests/1180)找到了一种方法。这通常不是您想要做的事情。通常有更好的方法；但在我的应用程序中，用户将得到很大的帮助。

# ruby - 异步截屏页面并使用 Active Record 存储它们？

> ID：11622151
> 
> 赞同：1
> 
> 时间：2012-07-23T23:45:33.930
> 
> 标签：ruby, activerecord, concurrency, screen-scraping

我需要截取一堆页面并使用 ActiveRecord 将它们存储在数据库中。我在使用 EventMachine 和 Typhoeus 时搞砸了，但我得到了不稳定的结果，大部分是神秘的空记录被保存了。

有什么诀窍？我在抓取页面并将它们写入磁盘，然后将它们插入数据库中获得了最好的结果，但我真的很想一次性完成。

有人成功做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:09:01.557

我的猜测是您的线程正在共享 AR 连接。这将导致问题，并且无论如何并发不会更快地将记录输入您的数据库。我建议您同时下载并将它们插入单个线程（就像您一直在做的那样。）

# hibernate - 休眠多重更新？

> ID：11622155
> 
> 赞同：0
> 
> 时间：2012-07-23T23:45:54.453
> 
> 标签：hibernate

在应用程序启动期间，我正在从 DB 加载对象数组。如何在应用程序启动期间通过一个查询刷新/重新加载基于数据库的所有对象。

我不想一一更新对象。

兄弟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:00:37.070

清除您的应用程序缓存（包含 db 对象的数组），清除加载对象的会话（如果仍然存在）并再次调用在启动时加载对象的函数。

# css - CSS3：目标问题

> ID：11622156
> 
> 赞同：0
> 
> 时间：2012-07-23T23:46:34.647
> 
> 标签：css, css-selectors

我有 2 个“链接”，当我点击它们时必须获得颜色。但它们也需要在 h1 标签中。

像这样：

```
<div id="content" class="work">
    <h1 style="border-bottom:1px solid #CCC;"><a id="link-grafisk-design" href="#grafisk-design">Grafisk design</a></h1>
    <h1 style="border-bottom:1px solid #CCC;">&nbsp;/&nbsp;</h1>
    <h1 style="border-bottom:1px solid #CCC; width:276px"><a id="link-webbdesign" href="#webbdesign">Webbdesign</a></h1>
</div> 
```

但是当我点击其中一个时它不会改变颜色。
这是CSS

```
#webbdesign:target ~ #link-webbdesign {
    color:#00A2FF;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T23:52:40.233

那不是[`:target`为了](http://css-tricks.com/on-target/)。对于您单击的链接的样式，您应该使用`h1 a:active`.

```
h1 a:active {
     color:#00A2FF;
} 
```

如果您希望更改的颜色一直持续到用户单击其他内容，请使用：

```
h1 a:focus,
h1 a:active {
    color: #00A2FF;
} 
```

[**演示**](http://dabblet.com/gist/3168595)

# html - Html5 元素未呈现。Html5shiv.js 不适用于页面

> ID：11622159
> 
> 赞同：0
> 
> 时间：2012-07-23T23:46:55.630
> 
> 标签：html, validation, rendering, syntax-error

我完成了我的网站，现在正处于验证和浏览器测试阶段。

因此，我的整个网站都已转换为 html5，因为默认主题不是。添加条件 ie 9 注释以将 html5shiv.js 应用于 ie 9 以下的浏览器版本后，某些页面可以正常呈现，而有些则不能。

请在 Internet Explorer 8（或 ie9，但在开发人员模式下的 ie 8 版本）中查看此页面以查看损坏的 html5 页面：[http ://www.gizmotrims.com/site/gizmotrims/music-ipods/1-ipod-nano .html](http://www.gizmotrims.com/site/gizmotrims/music-ipods/1-ipod-nano.html)

我对此问题进行了故障排除，但无法找到实际导致页面无法正确呈现并出现损坏的原因。请注意，并非所有页面都有此问题，只有少数页面。这很奇怪，因为有些页面很好，有些则不然。

有人可以帮我找到这个问题，以便我可以完成我的网站的开发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:57:17.193

路径`js/html5shiv.js`似乎不起作用。您可以将其更改为`../js/html5shiv.js`，但这可能会毁掉其他页面。在这种情况下，最好使用绝对路径 ( `http://www.gizmotrims.com/site/gizmotrims/js/html5shiv.js`) 或相对于根的路径 ( `/site/gizmotrims/js/html5shiv.js`)。您也可以设置 a `base[href]`，但这也会影响其他引用。

# text - 使用批处理文件查找/替换文件中的文本

> ID：11622165
> 
> 赞同：0
> 
> 时间：2012-07-23T23:47:33.150
> 
> 标签：text, batch-file, sed, replace

我需要用另一行文本替换一行文本的一部分，例如：

```
07/24/2012 06:30:00    <--what i start with
07/24/2012 06:30:00 Name=weather  <---is what i need it to look like 
```

日期每天都在变化，我每天大约有 20 行要更改，使用 bat 文件执行此操作的最简单方法是什么，我希望能够运行它并打开文件，更改需要的内容更改然后在另一个位置吐出更改后的文本文件。此文本文件中有数百行需要保留在新的行中而不更改，只有大约 20 行需要更改。我根本不需要它循环，因为每次我需要编辑文件时，需要更改的文本将完全相同，并且每次都需要更改相同的行数。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:55:51.077

一种使用方式`sed`：

```
sed -e "s/\(.*\)/\1 Name=weather/" file.txt > /your/new/location/newfile.txt 
```

也许您应该更新您的问题，以包括示例输入和预期输出。但是上面的行应该让你开始。

# objective-c - Cocoa/ObjC：在模态窗口上方放置一个浮动窗口

> ID：11622171
> 
> 赞同：2
> 
> 时间：2012-07-23T23:48:13.510
> 
> 标签：objective-c, macos, cocoa

我有两个 NSWindows。级别 0 的窗口 A，级别 1 的窗口 B。我使用 B 作为浮动窗口。

在我将 A 作为模式窗口（即，将 runModalForWindow:A 消息发送到 NSApplication）之前，这将按预期工作。那么B总是在A之后。

有没有办法让 B 高于 A，即使 A 作为模式窗口运行？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T20:09:26.107

要将浮动窗口放在前面，请使用`[myfloater setLevel: NSModalPanelWindowLevel+1]`.

其他人告诉您，您将无法与漂浮物互动，但我已经做到了，它对我有用。（我的浮动使用`NSPanel`“实用面板”样式而不是 plain `NSWindow`，但我不确定这是否重要。您可能还需要说`[myPanel setWorksWhenModal: YES]`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:22:24.813

AFAIK 那是不可能的。

来自 Apple 类参考：

**NSApplication runModalForWindow:**

> 此方法同步运行指定窗口的模态事件循环。它显示指定的窗口，使其成为关键，启动运行循环，并处理该窗口的事件。（您不需要自己显示窗口。）当应用程序处于该循环中时，它不会响应任何其他事件（包括鼠标、键盘或窗口关闭事件），除非它们与窗口相关联。它也不执行任何与模态运行循环无关的任务（例如触发计时器）。换句话说，此方法仅消耗足够的 CPU 时间来处理事件并将它们分派到与模态窗口关联的操作方法。

鉴于此，您的窗口 A 将成为关键窗口，并将始终显示在应用程序的任何其他窗口之上。我认为这就是模态窗口应该如何工作的。

作为替代方案，您可以考虑使用`NSPopover`对用户有明确存在但不会强制您的应用程序进入模态状态的方法。

从 Apple 文档中查看[此页面](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Windows/Windows.html)，了解有关您可以使用的各种选项的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:19:39.570

我认为如果您将窗口级别设置为 NSScreenSaverWindowLevel，它将始终位于顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T10:57:23.850

您可以使用`orderFront:`,`orderFrontRegardless`或`orderFront:relativeTo:`, 将 B 移动到 A 前面。但是不确定您可以在 B 中执行多少任务，因为 A 是模态的，您将无法与 B 交互。

# python - 将 Apache Pig 的输出加载到 Python 中

> ID：11622174
> 
> 赞同：0
> 
> 时间：2012-07-23T23:48:35.980
> 
> 标签：python, apache-pig

我想要在 Python 中处理一组 Pig 作业的（小）输出。有没有办法与 Pig 的输出进行交互，而无需编写我自己的 parse-from-string 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:49:44.207

查看python嵌入：

[http://ofps.oreilly.com/titles/9781449302641/embedding.html](http://ofps.oreilly.com/titles/9781449302641/embedding.html)

[http://pig.apache.org/docs/r0.10.0/cont.html#embed-python](http://pig.apache.org/docs/r0.10.0/cont.html#embed-python)

# php - 调用函数时出错

> ID：11622175
> 
> 赞同：2
> 
> 时间：2012-07-23T23:48:36.953
> 
> 标签：php, bots

我一直在寻找答案，但最终被难住了。我一直在编写代码以允许多个机器人连接到聊天框。我编写了所有主要代码并检查了它以确保一切正常。然后当我调用使它工作所需的函数时，它给了我一个错误说：

> 注意：未定义的变量：第 40 行 C:\wamp\www\BotRaid.php 中的 ip

还有一个错误说：

> 致命错误：无法访问第 40 行 C:\wamp\www\BotRaid.php 中的空属性

（这里还有截图：http: [//prntscr.com/ckz55](http://prntscr.com/ckz55)）

```
<?php

    date_default_timezone_set("UCT");
    declare(ticks=1);
    set_time_limit(0);

    class BotRaid
    {
        public $ip="174.36.242.26";
        public $port=10038;
        public $soc = null;
        public $packet = array();

        ##############################
        #   You can edit below this  #
        ##############################
        public $roomid="155470742";
        public $userid = "606657406";
        public $k = "2485599605";

        public $name="";
        public $avatar=;
        public $homepage="";
        ##############################
        #        Stop editing        #
        ##############################

        public function retry()
        {
            $this->connect($this->$ip,$this->$port); //Line 40, where I'm getting the error now.
            $this->join($this->$roomid);

            while($this->read()!="DIED");
        }

        public function connect($ip, $port)
        {
            if($this->$soc!=null) socket_close($this->$soc);
            $soc = socket_create(AF_INET,SOCK_STREAM,SOL_TCP);
            if(!$this->$soc)$this->port();
            if(!socket_connect($this->$soc,$this->$ip,$this->$port))$this->port();
        }

        public function port()
        {
            $this->$port++;
            if($this->$port>10038) $this->$port=10038;
            $this->retry();
        }

        public function join($roomid)
        {
            $this->send('<y m="1" />');
            $this->read();
            $this->send('<j2 q="1" y="'.$this->$packet['y']['i'].'" k="'.$this->$k.'" k3="0" z="12" p="0" c"'.$roomid.'" f="0" u="'.$this->$userid.'" d0="0" n="'.$this->$name.'" a="'.$this->$avatar.'" h="'.$this->$homepage.'" v="0" />');
            $this->port();
            $this->$roomid;
        }

        public function send($msg)
        {
            echo "\n Successfully connected.";
            socket_write($this->$soc, $this->$msg."\0", strlen($this->$msg)+1);
        }

        public function read($parse=true)
        {
            $res = rtrim(socket_read($this->$soc, 4096));
            echo "\nSuccessfully connected.";
            if(strpos(strtolower($res), "Failed"))$this->port();
            if(!$res) return "DIED";
            $this->lastPacket = $res;
            if($res{strlen($res)-1}!='>') {$res.=$this->read(false);}
            if($parse)$this->parse($res);
            return $res;
        }

        public function parse($packer)
        {
            $packet=str_replace('+','@più@',str_replace(' ="',' @=@"',$packet));
            if(substr_count($packet,'>')>1) $packet = explode('/>',$packet);
            foreach((Array)$packet as $p) {
                $p = trim($p);
                if(strlen($p)<5) return;
                $type = trim(strtolower(substr($p,1,strpos($p.' ',' '))));
                $p = trim(str_replace("<$type",'',str_replace('/>','',$p)));
                parse_str(str_replace('"','',str_replace('" ','&',str_replace('="','=',str_replace('&','__38',$p)))),$this->packet[$type]);
                foreach($this->packet[$type] as $k=>$v) {
                    $this->packet[$type][$k] = str_replace('@più@','+',str_replace('@=@','=',str_replace('__38','&',$v)));
                }
            }   
        }
    }

    $bot = new BotRaid; //This is where I had the error originally
    $bot->retry();

?> 
```

第 40 行位于“停止编辑”行下方。有人有什么建议吗？或者也许需要我清理一些事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T23:51:12.050

您正在错误地访问类的属性。

该行：

```
$this->connect($this->$ip,$this->$port); 
```

应该：

```
$this->connect($this->ip, $this->port); 
```

由于没有调用局部变量`$ip`，因此您的表达式`$this->`在尝试访问该属性时正在评估，因为 PHP 允许您使用变量访问属性和函数。

例如，这将起作用：

```
$ip = 'ip';
$theIp = $this->$ip; // evaluates to $this->ip

// or a function call
$method = 'someFunction';
$value  = $this->$method(); // evaluates to $this->someFunction(); 
```

由于您在整个课程中都使用了该符号，因此您将不得不更改所有出现的`$this->$foo`with 。`$this->foo`

正如@Aatch 的评论中所指出的，请参阅有关[变量变量](http://php.net/manual/en/language.variables.variable.php)的文档以获得进一步的解释。但那是你不小心遇到的。

# python - Python：重新设置或守护进程

> ID：11622184
> 
> 赞同：1
> 
> 时间：2012-07-23T23:49:22.133
> 
> 标签：python, process, parent-child, daemon

我有一个动作队列，我在其中使用 ssh 将不同的作业远程提交到不同的服务器。例如

```
ssh s1 job1.py
ssh s2 job2.py 
```

问题是`job1.py`并且`job2.py`可能需要很长时间才能完成，我不希望我的动作队列阻塞。我想知道我怎样才能以某种方式重新分配我的工作。

我目前的解决方案是：`job1.py`使用`subprocess.Popen(['my_actual_job.py'])`. 使用这个，ssh 不会阻塞，但`my_actual_job.py`永远不会完成。它在完成任务之前很久就以某种方式终止了。如果我这样做`ssh s1 "job1.py 2>1"`，`my_actual_job.py`则完成，但它会阻止我的动作队列。

任何人都知道我怎样才能以某种方式重新设置我的子进程（`my_actual_job.py`），以便 ssh 可以终止但我的工作可以在后台完成他们的任务？

我看到了[PEP 3143: Standard daemon process library](http://www.python.org/dev/peps/pep-3143/#example-usage)，但是有没有更好更干净的方法呢？

我无法更改我的 ssh 命令...我需要在我的 job1.py 中以某种方式进行。我做了[双叉](http://code.activestate.com/recipes/66012-fork-a-daemon-process-on-unix/)，但仍然不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:59:24.047

你的问题`Popen`是它`job1.py`会在不等待`my_actual_job.py`完成的情况下终止（假设你从不打电话`p.join()`或类似情况）；`my_actual.job.py`然后应该在被杀死之前几乎不能开始。

您是否尝试过`ssh`使用 eg 要求进程将自身置于后台`ssh -n s1 job1.py`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:58:22.710

我会推荐[Celery](http://celeryproject.org/ "芹菜")来解决这样的问题。它在最新版本（3.0）中变得非常棒，支持 eventlet、canvas 等。

如果 Celery 的开销太大，那么就增加项目的复杂性而言， [eventlet](http://eventlet.net/ "小事件")是比 Twisted 更好的解决方案（像[这样](https://stackoverflow.com/questions/3048012/eventlet-or-gevent-or-stackless-twisted-pylons-django-and-sql-alchemy "这")）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:21:01.313

1.  您可以在后台在服务器上运行您的命令，方式不是很明显，但是当您知道方式时很容易使用。 [让 ssh 在目标机器的后台执行命令](https://stackoverflow.com/questions/29142/getting-ssh-to-execute-a-command-in-the-background-on-target-machine)

2.  您可以运行简单的 Web 服务器来管理每台机器上的作业。使用[Twisted](http://twistedmatrix.com/trac/ "扭曲的")，您应该能够用很少的代码实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T21:48:58.423

我最终做了： subprocess.Popen(['nohup','my_actual_job.py']) 将stderr和stdout都发送到/dev/null。

# css - Safari 边框半径在桌子上剪裁

> ID：11622195
> 
> 赞同：1
> 
> 时间：2012-07-23T23:50:55.853
> 
> 标签：css

我有一个父元素的边框半径和纯色边框的情况。这在除 Safari (5.1.7) 之外的所有浏览器中都可以正常工作。在 Safari 中，子元素的背景颜色渗入边框，而 background-clip 似乎没有帮助。我见过其他人也有类似的问题已解决，这是表格特有的问题吗？关于为什么剪辑不能正确应用的任何想法？

[http://jsfiddle.net/q3NF9/2/](http://jsfiddle.net/q3NF9/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:57:00.923

尝试添加以下 CSS：

```
thead th:first-child {
   border-top-left-radius: 15px;
}
thead th:last-child {
   border-top-right-radius: 15px;
} 
```

见例子：http: [//jsfiddle.net/q3NF9/8/](http://jsfiddle.net/q3NF9/8/)

# c++ - 可以使用基于 C++11 范围的 [0, n-1] 区间进行迭代吗？

> ID：11622205
> 
> 赞同：4
> 
> 时间：2012-07-23T23:52:06.037
> 
> 标签：c++, for-loop, c++11

> **可能重复：**
> [C++11 中是否有一个范围类用于基于范围的 for 循环？](https://stackoverflow.com/questions/7185437/is-there-a-range-class-in-c11-for-use-with-range-based-for-loops)

即是否有一个带有迭代器的标准范围可以取消对整数的引用？我正在考虑这样的事情：

```
for (int i : rangeTo(10)) { ... }
for (int i : rangeFromTo(10, 20)) { .... } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T23:56:10.827

不，但有`boost::irange`：

```
#include <boost/range/irange.hpp>
...
for (auto i : boost::irange(10, 20))
{
    std::cout << i << ' ';
} 
```

和`boost::counting_range`

```
for (auto i : boost::counting_range(10, 20))
{
    std::cout << i << ' ';
} 
```

不同之处在于您可以添加一个步骤，对于`boost::irange(10, 20, 2)`.

# wordpress-theming - Wordpress - 如何获取特定的帖子页码 URL？

> ID：11622210
> 
> 赞同：0
> 
> 时间：2012-07-23T23:52:32.970
> 
> 标签：wordpress-theming, wordpress

是否可以在文章中获取特定的**帖子**页码 URL？例如，在正常循环中，该函数`get_pagenum_link(3)`将检索类似`http://mysite.com/blog/page/3/`

问题是，在一篇文章`is_single() == true`中，相同的函数不会返回分页结果。我知道我目前不在循环中，但是有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:12:32.810

```
global $post;

$url = $post ? get_permalink($post->ID) : ''; 
```

# ios - RestKit 序列化 Core Data 关系

> ID：11622211
> 
> 赞同：3
> 
> 时间：2012-07-23T23:52:33.807
> 
> 标签：ios, json, serialization, restkit

我有一个 CoreData 支持的联系人对象，它与电子邮件和电话号码实体具有一对多的关系。这里提到的所有对象都是 NSManagedObjects。

phone_number 和 email 实体都只有一个属性，即分别代表 phone_number 和 email 的 NSString*。

目前，当我序列化对象时，我得到类似

```
 {contacts: 
        [{"name":"person1", 
        "emails":[{"email":"email1@email.com"}, {"email":"email2@email.com"}], 
        "phone_numbers":[{"number":"1111111111"}, {"number":"2222222222"}]},
        {"name":"person2", 
        "emails":[{"email":"email1@email.com"}, {"email":"email2@email.com"}],
        "phone_numbers":[{"number":"3333333333"}, {"number":"4444444444"}]}]
    } 
```

我想序列化成这样的东西

```
 {contacts: 
        [{"name":"person1", 
        "emails":["email1@email.com","email2@email.com"], 
        "phone_numbers":["1111111111", "2222222222"]},
        {"name":"person2", 
        "emails":["email1@email.com", "email2@email.com"],
        "phone_numbers":["3333333333", "4444444444"]}]
    } 
```

注意“电子邮件”和“电话号码”列表只是一个字符串列表，没有每个电话号码/电子邮件的关联键

我当前的映射代码是（电话号码映射代码与电子邮件映射代码完全相同）

```
 @implementation Email

    @dynamic email;
    @dynamic contact;

    + (void)emailRKObjectMapping {
      RKManagedObjectMapping* emailMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Email" inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
      [emailMapping mapKeyPath:@"email" toAttribute:@"email"];
      [[RKObjectManager sharedManager].mappingProvider addObjectMapping:emailMapping];

      //Serialization mapping for Contact class
      [[RKObjectManager sharedManager].mappingProvider setSerializationMapping":[emailMapping inverseMapping] forClass:[Email class]];
     }
    @end 
```

具有指向电子邮件/电话号码的关系的联系人映射代码

```
 @implementation Contact
    ...
    @dynamic emails;
    @dynamic phoneNumbers;
    ...

    + (void)contactRKObjectMapping {
      RKManagedObjectMapping* contactMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Contact" inManagedObjectStore:[RKObjectManager sharedManager].objectStore];

      ...
      ...

      [[RKObjectManager sharedManager].mappingProvider addObjectMapping:contactMapping];

      //Serialization mapping for Contact class
      RKManagedObjectMapping* contactSerializationMapping = [contactMapping copy];
      [contactSerializationMapping mapKeyPath:@"emails" toRelationship:@"emails" withMapping:[[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[Email class]]];
      [contactSerializationMapping mapKeyPath:@"phone_numbers" toRelationship:@"phoneNumbers" withMapping:[[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[PhoneNumber class]]];
      [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[contactSerializationMapping inverseMapping] forClass:[Contact class]];
    } 
```

对我来说，必须为电子邮件和电话号码数组中的每个电话号码和电子邮件发送密钥“电话号码”或“电子邮件”似乎很愚蠢。我只是想要一种简单的方法来用一个键序列化字符串数组。

谢谢你的帮助！

# android - 在 Proguard 中保留带注释的类

> ID：11622212
> 
> 赞同：33
> 
> 时间：2012-07-23T23:52:37.947
> 
> 标签：android, proguard, roboguice

我有一堆使用例如@Singleton 注释的类，就像这样

```
@Singleton
public class ImageCache 
```

我想保留。如何配置 proguard -keep 语句，使其适用于所有具有该注释的类。

顺便说一句，就上下文而言，我需要这个在 Android 上使用 Roboguice 的应用程序，这就是我添加标签的原因。可能会帮助别人。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-24T23:12:55.190

ProGuard 基于带有通配符的类 java 配置。它确实需要完全限定的类名。这应该有效：

```
-keep @com.google.inject.Singleton public class * 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-09-10T20:05:11.920

首先定义一个注解

```
public @interface DoNotStrip {} 
```

然后把它放在 proguard.cfg 中：

```
-keep,allowobfuscation @interface com.something.DoNotStrip

# Do not strip any method/class that is annotated with @DoNotStrip
-keep @com.something.DoNotStrip class *
-keepclassmembers class * {
    @com.something.DoNotStrip *;
} 
```

# android - 为 Android 交叉编译 GSL

> ID：11622217
> 
> 赞同：1
> 
> 时间：2012-07-23T23:53:12.500
> 
> 标签：android, android-ndk, cross-compiling, elf, gsl

# 为 Android 交叉编译 GSL

我正在尝试使用 Autotools 交叉编译适用于 Android 4.1 的 GNU Scientific Library (GSL)。我的构建和主机如下：

```
build="i386-apple-darwin10.8.0"
host="arm-linux-androideabi" 
```

自动工具版本：

```
GNU Automake version 1.11.3
GNU Autoconf version 2.68
GNU Libtool version 2.4.2 
```

我的目标是编译一个可执行文件，我可以从模拟设备上的 shell 运行它。到目前为止，我已经使用我使用 Android Native Development Kit (NDK) 生成的工具链编译了 GSL 和我的可执行文件。然后我将共享库“libgsl.so.0”和“libgslcblas.so.0”（两者都列在我的可执行文件的动态部分中）推送到“/system/lib”并将可执行文件推送到设备。

这是 arm-linux-androideabi-readelf -d issm.exe 的输出

```
Dynamic section at offset 0x26a2a4 contains 26 entries:
Tag        Type                         Name/Value
0x00000001 (NEEDED)                     Shared library: [libgsl.so.0]
0x00000001 (NEEDED)                     Shared library: [libgslcblas.so.0]
0x00000001 (NEEDED)                     Shared library: [libm.so]
0x00000001 (NEEDED)                     Shared library: [libc.so]
0x00000001 (NEEDED)                     Shared library: [libdl.so]
0x0000000f (RPATH)                      Library rpath: [/Users/gperez/issm/issm-uci/trunk-jpl/externalpackages/gsl/install/lib]
0x00000020 (PREINIT_ARRAY)              0x26d000
0x00000021 (PREINIT_ARRAYSZ)            0x8
0x00000019 (INIT_ARRAY)                 0x26d008
0x0000001b (INIT_ARRAYSZ)               1100 (bytes)
0x0000001a (FINI_ARRAY)                 0x26d454
0x0000001c (FINI_ARRAYSZ)               8 (bytes)
0x00000004 (HASH)                       0x8128
0x00000005 (STRTAB)                     0x96a0
0x00000006 (SYMTAB)                     0x87f0
0x0000000a (STRSZ)                      3588 (bytes)
0x0000000b (SYMENT)                     16 (bytes)
0x00000015 (DEBUG)                      0x0
0x00000003 (PLTGOT)                     0x27239c
0x00000002 (PLTRELSZ)                   960 (bytes)
0x00000014 (PLTREL)                     REL
0x00000017 (JMPREL)                     0xa7ec
0x00000011 (REL)                        0xa4a4
0x00000012 (RELSZ)                      840 (bytes)
0x00000013 (RELENT)                     8 (bytes)
0x00000000 (NULL)                       0x0 
```

我意识到 RPATH 不正确，但如果我正确理解了动态链接器，那么它应该无法在 RPATH 中找到所需的库，然后继续检查所有库所在的 LD_LIBRARY_PATH。

然后我继续运行我的可执行文件，但我惊讶地发现以下链接错误：

```
link_image[1936]:   468 could not load needed library 'libgsl.so.0' for './issm.exe' (reloc_library[1285]:   468 cannot locate 'cblas_ctrmv'...
)CANNOT LINK EXECUTABLE 
```

这个错误导致我检查'libgsl.so.0'的内容如下：

```
Relocation section '.rel.plt' at offset 0x36014 contains 161 entries:
Offset     Info    Type            Sym.Value  Sym. Name
00201c54  00002316 R_ARM_JUMP_SLOT   00000000   cblas_ctrmv
00201c58  00002f16 R_ARM_JUMP_SLOT   00000000   cblas_zswap
00201c5c  00003816 R_ARM_JUMP_SLOT   00000000   cblas_zsymm
00201c60  00005016 R_ARM_JUMP_SLOT   00000000   cblas_cgeru
00201c64  00009216 R_ARM_JUMP_SLOT   00000000   cblas_sgemm
00201c68  00009c16 R_ARM_JUMP_SLOT   00000000   cblas_ctrsv
00201c6c  0000c316 R_ARM_JUMP_SLOT   00000000   cblas_sgemv
... 
```

'libgslcblas.so.0' 对应的 '.dynsym'：

```
Symbol table '.dynsym' contains 233 entries:
Num:    Value  Size Type    Bind   Vis      Ndx Name
...
218: 0004e148    64 FUNC    GLOBAL DEFAULT    7 __aeabi_f2d
219: 00050314     0 NOTYPE  GLOBAL DEFAULT   12 __data_start
220: 0000d69c  1604 FUNC    GLOBAL DEFAULT    7 cblas_dgbmv
221: 0002e008  3540 FUNC    GLOBAL DEFAULT    7 cblas_ctrmv
222: 00042c34  4184 FUNC    GLOBAL DEFAULT    7 cblas_ztbmv
223: 0004de4c   688 FUNC    GLOBAL DEFAULT    7 __subdf3
224: 00003dc4   284 FUNC    GLOBAL DEFAULT    7 cblas_snrm2
... 
```

由于重定位部分“.rel.plet”中的第一个条目导致链接失败，因此问题很可能与所有“cblas”符号有关。然后我决定查看“libgsl.so.0”的动态部分

```
Dynamic section at offset 0x200b60 contains 25 entries:
Tag        Type                         Name/Value
0x00000001 (NEEDED)                     Shared library: [libm.so]
0x00000001 (NEEDED)                     Shared library: [libc.so]
0x00000001 (NEEDED)                     Shared library: [libdl.so]
0x0000000e (SONAME)                     Library soname: [libgsl.so.0]
0x00000010 (SYMBOLIC)                   0x0
0x0000000f (RPATH)                      Library rpath: [:/Users/gperez/issm/issm-uci/trunk-jpl/externalpackages/gsl/install/lib]
0x00000019 (INIT_ARRAY)                 0x200c68
0x0000001b (INIT_ARRAYSZ)               8 (bytes)
0x0000001a (FINI_ARRAY)                 0x200c70
0x0000001c (FINI_ARRAYSZ)               12 (bytes)
0x00000004 (HASH)                       0xb4
0x00000005 (STRTAB)                     0x19b1c
0x00000006 (SYMTAB)                     0x860c
0x0000000a (STRSZ)                      107542 (bytes)
0x0000000b (SYMENT)                     16 (bytes)
0x00000003 (PLTGOT)                     0x201c48
0x00000002 (PLTRELSZ)                   1288 (bytes)
0x00000014 (PLTREL)                     REL
0x00000017 (JMPREL)                     0x36014
0x00000011 (REL)                        0x33f34
0x00000012 (RELSZ)                      8416 (bytes)
0x00000013 (RELENT)                     8 (bytes)
0x00000016 (TEXTREL)                    0x0
0x6ffffffa (RELCOUNT)                   1051
0x00000000 (NULL)                       0x0 
```

在这里，我发现该库具有引用“cblas”条目的重定位符号非常有趣，但“libgslcblas.so.0”未在动态部分中列出。这对我来说感觉不对，但我没有专业知识可以这么明确地说出来。任何人都可以帮忙吗？

我正在继续调查，但我非常感谢任何建议、更正或输入或任何形式！

## 问题

1.  鉴于“libgsl.so.0”在其重定位部分对 cblas 结构的引用，“libgslcblas.so.0”是否应该在“libgsl.so.0”的动态部分中？
2.  设置不正确的 RPATH 会是这一切的根源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T11:24:33.953

我建议使用 AOSP 而不是 autotools。

通过将 GSL 源代码包装到 Android make 文件中，可以将 GSL 集成到 Android 中。然后，您可以使用此 Android make 文件中定义的模块来访问 GSL 的功能。

但是，这仅提供对在 AOSP 中编译的应用程序的访问。

# jquery - jquery 插件和闭包

> ID：11622221
> 
> 赞同：1
> 
> 时间：2012-07-23T23:53:26.163
> 
> 标签：jquery, closures

我正在制作表单验证功能并为其提供以下代码

```
(function ( $ ) {
    $.fn.validate_thing = function (success_call_back) {
        var call_back = true;
        debugger;
        if (!this.is('form')) {
            return false;
        }

        $('input.empty').each(function() {
            if(!$(this).text()) {
                alert($(this).attr('name'));
                call_back = false;
            }
        });
    }
})(jQuery); 
```

问题是，当页面加载时，我收到一个 javascript 错误，指出 (jQuery) 行上的“对象不是函数”。如果我使用调试器逐步完成此操作，我不会遇到此问题。如果我把它放在一个文档就绪函数中，我就不会遇到这个问题。我认为这可能与运行此脚本时未加载 jQuery 有关，但我在包含此代码的库之前包含了 jQuery 库，更不用说如果我不在闭包中执行此操作，即这样做

```
$.fn.validate_thing = function (success_call_back) {
    var call_back = true;
    debugger;
    if (!this.is('form')) {
        return false;
    }

    $('input.empty').each(function() {
        if(!$(this).text()) {
            alert($(this).attr('name'));
            call_back = false;
        }
    });
} 
```

有用。

所以我有一些解决这个问题的方法，但我仍然想知道为什么会这样。提前致谢。

这是我在 javascript 页面中的内容

```
engine = new function() {
this.request = function ( params ) {
    var data = params.data ? params.data : '';

    if (params.url) {
        var url = params.url;
        var page = document.URL.split('/').pop();
        var page = page.split('.')[0];
        data += 'content_page='+page+'.tpl';
    }
    else {
        var url = document.URL;
    }

    debugger;
    if (params.action) {
        data += data ? '&action='+params.action : "action="+params.action;
    }

    $.ajax({
        url : url,
        type : 'POST',
        data : data,
        dataType: 'json',
        success : function(data) {
            debugger;
            if (data && data.partials) {
                for (var key in data.partials) {
                    var element = data.partials[key];
                    $('#'+element.partial_name).replaceWith(element.partial_content);
                }
            }
        },
        error : function (jqXHR, textStatus, errorThrown) {
            debugger;

            alert('ajax error: '+errorThrown);
        }
    }).success(params.success);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:10:12.237

如果在最后一行出现错误，JavaScript 很可能将括号解释`( function() { ... } )`为代码前面任何内容的函数调用。如果您在上一行中忘记了分号，就会发生这种情况。

考虑一下：

```
var foo = {};
var bar = foo
(function() {

}()); 
```

请注意，后面缺少分号`foo`，因此 JavaScript 将代码解释为`foo(...)`，这会引发错误

> 对象不是函数

# c# - 用于基于 Web 的“向导”的大型 MVC 控制器 - 有哪些方法可以减少大小和冗余？

> ID：11622223
> 
> 赞同：1
> 
> 时间：2012-07-23T23:53:45.263
> 
> 标签：c#, asp.net-mvc

我有一个非常大的（77 个动作）控制器，我用它来制作一个具有类似向导功能的网站。该站点就像一个“工作应用程序管理器”，具有多个组件，例如管理组件和最终用户组件。我正在使用的组件是用户实际填写工作申请的部分。事物与其他组件的结构方式，将所有作业应用程序的东西放在同一个控制器中是最有意义的。所有这些操作都执行类似的操作，但在不同的模型上，如下所示：

```
public class ExampleController : Controller
{
    public ActionResult Action1() 
    {
        Guid appId = new Guid(Session["AppId"].ToString());
        ... // logic to pull up correct model
        return View(model)
    }

    [HttpPost]
    public ActionResult Action1(FormCollection formValues)
    {
        Guid appId = new Guid(Session["AppId"].ToString());
        ... // logic to update the model
        return RedirectToAction("Action2");
    }

    public ActionResult Action2()
    {
        Guid appId = new Guid(Session["AppId"].ToString());
        ... // logic to pull up the correct model
        return View(model)
    }

    ... // on and on and on for 74 more actions
} 
```

有什么办法可以减少每一个动作中的一些持续冗余？这是我的想法：

*   创建一个成员变量 Guid 来存储 appId，然后覆盖 OnActionExecuting 来填充这个变量。这是一个好主意吗？
*   实现某种分页以减少操作的数量。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:58:33.470

我会对你的第一点说是，对你的第二点说“这取决于”。不要仅仅因为你有很多方法就改变你的设计，如果所有 77`ActionResult`种方法都有意义，那就保留它们。

使用成员变量和覆盖`OnActionExecuting`似乎是将 appID Guid 代码重构到一个地方的好方法，因此您可以在将来**快速**轻松**地对其进行修改。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:44:23.053

通常对于向导视图，单个操作和页面与多个 div 一起使用，这些 div 可以根据步骤显示。

例如，一个有 4 个步骤的注册向导屏幕，可以在一个页面中处理，每个步骤都有 div。您可以使用 JavaScript 和 css 使其成为向导流程。

如有必要，在步骤之间使用 ajax 更新不同的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:54:11.997

您可能希望将您的逻辑（与作业管理器相关）放在单个存储库/管理器类中。与不同视图关联的不同控制器（例如 AdminController、EndUserController 等）可以调用来自相同存储库/管理器类的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:33:36.297

另一种选择可能是替换这个..

```
Guid appId = new Guid(Session["AppId"].ToString()); 
```

..调用类似以下内容：

```
private Guid GetAppId(){
    return new Guid(Session["AppId"].ToString());
} 
```

现在，您可以`GetAppId()`在当前使用的任何地方使用`appId`. 您当然可以按照您的建议以类变量的形式缓存 GUID，但最好将该变量的访问和使用限制为这样的方法（通过该方法获取它的值）。如果您以后想更改某些内容，可能会更灵活一些。

至于将页面分成几页；当然，继续，如果它有意义并且感觉正确的话。一个类中有 70 多个动作听起来确实很多。但是，如果将它们保留在那里更有意义，您可以尝试将尽可能多的逻辑从方法本身移出，转入辅助类。我总是尽量保持动作尽可能小，并将逻辑放在单独的类中，每个类都是为做一件特定的事情而定制的。

我的观点是，如果每个动作不超过 2-4 行，那么 70+ 动作不一定是问题。

# google-chrome - 为 Chrome 中调整大小的 SVG 元素强制重排 DOM 容器

> ID：11622227
> 
> 赞同：1
> 
> 时间：2012-07-23T23:54:09.397
> 
> 标签：google-chrome, svg, reflow

查看实际问题：http: [//jsfiddle.net/krtGd/1/](http://jsfiddle.net/krtGd/1/)

我在 float 中有一个嵌入式 SVG 元素`div`，如下所示：

```
<div style="float: left;">
    <svg width="50" height="20" id="svg1">           
    </svg>
</div> 
```

这很好用；在`div`SVG 周围符合预期。但是，当我使用 JavaScript 调整 SVG 的大小时，如下所示：

```
$('#svg2').attr('width', 50); 
```

... SVG 正确调整大小，但它周围的框没有。正如您在 jsFiddle 中看到的那样，如果包含`div`具有`display:inline-block`而不是浮动样式，则同样的情况也是如此。

这里奇怪的是，让我相信这是一个回流问题而不是一个简单的布局问题的是，如果您检查 Chrome 控制台元素面板中的任何一个问题元素，这些`div`元素都会正确调整大小。此问题可能仅适用于 Google Chrome - 我在**Chrome OSX v.20.0.1132.57**中看到它，但在 Safari 中没有。我没有在 FF 或 IE 中测试过。

那么：**如何在 Chrome 中强制重排？**

我已经尝试了通常的嫌疑人，包括检查`div.offsetHeight`,`svg.getBBox()`和其他几个变体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:11:39.530

听起来像是 Chromium 中的一个错误。当 svg 元素的固有宽度/高度发生变化时，布局宽度/高度不会自动改变。您可以手动设置布局宽度/高度：`.css("width", "50px")`. 您是否考虑过使用 Chromium 提交错误？

# sql - Oracle SQL: variables used in place of table names

> ID：11622233
> 
> 赞同：12
> 
> 时间：2012-07-23T23:54:55.527
> 
> 标签：sql, oracle, plsql

I am converting a MSSQL script to Oracle, and I haven't been able to figure out the syntax to use a variable in place of a table name or column.

Here is a simple example that I've been try to make work in Oracle SQL Developer so I can better understand the syntax:

```
 set serveroutput on format wrapped;
declare 
  VR_TABLE VARCHAR2(256);
  VR_UPDATE VARCHAR2(256);
begin
  VR_TABLE :='SYSTEM_STATUS';
  EXECUTE IMMEDIATE 'select UPDATE_VERSION INTO VR_UPDATE from ' || VR_TABLE || 'where rownum < 2 ;'
end; 
```

Where VR_TABLE is the variable table name that will get changed each iteration of the loop. Can somebody point out what I'm doing wrong, or link me to a site that would be useful for me to read? I've read a few tutorials on this, but I haven't had any luck thus far.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T00:09:00.977

1.  You need to have a space between the table name and the subsequent `WHERE` clause
2.  The `INTO` needs to be part of the `EXECUTE IMMEDIATE`, not part of the dynamic SQL statement.
3.  The dynamic SQL statement should not have a trailing semicolon
4.  The `EXECUTE IMMEDIATE` statement should end with a semicolon

Putting those together, something like this should work

```
declare 
  VR_TABLE VARCHAR2(256);
  VR_UPDATE VARCHAR2(256);
begin
  VR_TABLE :='SYSTEM_STATUS';
  EXECUTE IMMEDIATE 'select UPDATE_VERSION from ' || VR_TABLE || ' where rownum < 2'
               INTO VR_UPDATE;
end; 
```

Of course, since you're not doing anything with `VR_UPDATE`, nothing will be displayed when this anonymous block is executed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-29T12:27:58.553

> INTO part of the query should not be directly included in the query string.

**Syntax**

```
EXECUTE IMMEDIATE(<SQL>)
[INTO<variable>]
[USING <bind_variable_value>] 
```

The above syntax shows EXECUTE IMMEDIATE command.

Clause INTO is optional and used only if the dynamic SQL contains a select statement that fetches values. The variable type should match with the variable type of the select statement.

Clause USING is optional and used only if the dynamic SQL contains any bind variable.

[https://www.guru99.com/dynamic-sql-pl-sql.html#2](https://www.guru99.com/dynamic-sql-pl-sql.html#2)

You can visit this site for a better understanding of Dynamic SQL.

# php - 如何从数组中删除某些条目（使用正则表达式）？

> ID：11622238
> 
> 赞同：8
> 
> 时间：2012-07-23T23:55:53.950
> 
> 标签：php, arrays, filter

我正在编写一个像 Facebook 一样的刮板来从给定的 url 获取信息。我只是完成基本功能的一步。到目前为止的问题是删除无用的图像。例如，当我运行一些随机 url 时，我得到所有这些图像：

```
Scraper Object
(
    [url] => http://buzz.money.cnn.com/2012/07/23/spain-italy-short-selling/?iid=HP_Highlight
    [title] => Spain and Italy ban short selling  - The Buzz  - Investment and Stock Market News
    [description] => The Euronext 100 stock index falls sharply on renewed concerns about Spain.    Securities regulators in Spain and Italy both instituted short-selling bans Monday as financial markets tumbled.    The move is designed to limit the downward pressure
    [imageUrls] => Array
        (
            [0] => http://cnnmoneybuzzblog.files.wordpress.com/2012/07/chart_ws_index_euronext100_201272310932-09.png
            [1] => http://i.cdn.turner.com/money/.e1m/img/5.0/data/feargreed/scale.316x95.png
            [2] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/ben_rooney_130.jpg
            [3] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/catherine_tymkiw.02.jpg
            [4] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/paul_lamonica.02.jpg
            [5] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/hibah_yousuf.02.jpg
            [6] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/maureen_farrell.02.jpg
            [7] => http://i2.cdn.turner.com/money/.element/img/5.0/sections/contributors/ben_rooney.02.jpg
            [8] => http://i.cdn.turner.com/money/.element/img/4.0/services/button_login.gif
            [9] => http://www.bizographics.com/collect/?fmt=gif&pid=311
            [10] => http://pixel.quantserve.com/pixel/p-5dyPa639IrgIw.gif
            [11] => http://i.cdn.turner.com/money/.element/img/1.0/misc/1.gif
            [12] => http://buzz.money.cnn.com/2012/07/23/spain-italy-short-selling/?iid=HP_Highlight//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cposttag.bonds%2Cposttag.dow%2Cposttag.ibex%2Cposttag.italy%2Cposttag.lehman%2Cposttag.milan%2Cposttag.nasdaq%2Cposttag.sp-500%2Cposttag.short-selling%2Cposttag.spain%2Cposttag.stock%2Cposttag.yields%2Cvip.cnnmoneybuzzblog
            [13] => http://stats.wordpress.com/b.gif?v=noscript
        )

) 
```

我只需要找到一种方法来删除所有以 .gif 或 .png 结尾的图像，并将 .jpg 放在数组中，这样用户就可以查看并为文章选择合适的图像。

我尝试了一些数组函数，但我认为这需要一些正则表达式魔法才能在几乎任何给定的 url 中工作。

PS 我可以使用`$info->url`,`$info->description`等访问所有数组数据。只需要过滤那个数组，它就准备好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T00:09:49.040

不使用正则表达式：

```
foreach ($objects_array as $obj){
  foreach($obj->imageUrls as $key => $img){
    if(substr($img, -4) === '.gif' || substr($img, -4) === '.png'){
      unset($key);
    }
  }
} 
```

并使用正则表达式：

```
$pt = '/gif$|png$/';
foreach ($objects_array as $obj){
  foreach($obj->imageUrls as $key => $img){
    $res = preg_match($pt, $img);
    if($res){
      unset($key);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T00:03:58.333

尝试 array_filter：

[http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

回调函数应该是一个非常基本的函数，如果您的正则表达式匹配 .png 或 .gif，则返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:29:41.870

您可以在构建数组后进行过滤：

```
function only_jpgs($url){
    return substr($url, -4) == '.jpg' ? $url : false;
}

$info->imageUrls = array_filter($info->imageUrls, "only_jpgs"); 
```

但是您可能应该在构建数组之前过滤掉图像。

# javascript - 我一直在我的 javascript 中编辑 dom 元素的 CSS。是否有一个好的模型可以遵循，不允许在我的 javascript 中编写“CSS”？

> ID：11622245
> 
> 赞同：4
> 
> 时间：2012-07-23T23:56:34.603
> 
> 标签：javascript, jquery, css

当某些事件发生时，我的网站会更改某些 DOM 元素的 CSS，但我发现在我的静态 CSS 文件和我的 javascript 文件中都有 CSS 很糟糕。有没有一个我可以坚持的好模型，它允许我更改 javascript 中元素的 CSS，而我的 javascript 代码中没有明确的 CSS？

目前我正在使用如下调用：

```
$domElement.css ('cssProperty', 'cssValue'); 
```

在我的 javascript 代码中，但我不想这样做，因为 CSS 信息应该在它自己的文件中。

我有什么好的选择？

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T23:58:12.233

一种选择是在 CSS 文件中定义不同的类，然后改为这样做，

```
$domElement.addClass("theclassname"); 
```

当然，如果您要`'cssValue'`动态生成示例的一部分，那么您无法提前指定 CSS，因此您别无选择，只能像当前一样直接使用 JavaScript 对其进行修改。

# css - Twitter Bootstrap - 宝丽来效果 (CSS) 移动网格

> ID：11622251
> 
> 赞同：0
> 
> 时间：2012-07-23T23:57:05.010
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 构建一个页面。要显示图片库，我使用如下设置：

```
<div class="container">
    <div class="row">
        <div class="span1">
            <a href="#">
                <img src="http://www.placehold.it/50x50" />
            </a>
        </div><!-- /.span -->
        <div class="span1">
            <a href="#">
                <img src="http://www.placehold.it/50x50" />
            </a>
        </div><!-- /.span -->
        <div class="span1">
            <a href="#">
                <img src="http://www.placehold.it/50x50" />
            </a>
        </div><!-- /.span -->
    </div><!-- /.row -->
</div><!-- /.container --> 
```

[小提琴](http://jsfiddle.net/UFxsP/1/)

现在我想要对这些图像进行某种宝丽来效果。为此，我添加了一个`photo`包含`a`and的类`img`。像这样：

```
<div class="span1">
    <div class="photo">
        <a href="#">
            <img src="http://www.placehold.it/50x50" />
        </a>
    </div>
</div><!-- /.span --> 
```

[小提琴](http://jsfiddle.net/UFxsP/)

如您所见，添加此类会以某种方式改变网格。这就是为什么网格不再居中的原因。我能做些什么来解决这个问题吗？

最好的情况是如果`span`得到 a`background-color`并且图像位于`span`. 我相信使用填充我可以控制边框的宽度 - 这是最初的想法，但它不起作用。您将如何创建这样的效果。使用 a`border-iage`也会移动网格。

我添加了一些截图：

这里是第一个例子——视觉居中 ![示例 1](../Images/d55c973028556f05ab589be82c4dddc6.png)

第二个例子 - 明显转移 ![示例 2](../Images/727e476fe2953b2415f36b866bfd4cf1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:49:26.950

解决了这个问题。忘记了我已经添加了`width`和。删除这些值后，它就可以正常工作了。`height``.photo`

# objective-c - keyDown 没有被调用

> ID：11622255
> 
> 赞同：8
> 
> 时间：2012-07-23T23:57:25.290
> 
> 标签：objective-c, cocoa, keyboard, nswindow, keydown

我有一个名为 SurfaceView 的自定义 NSView。它是 NSWindow 的 contentView，它处理鼠标点击和绘图等基本事件。但不管我做什么，它不处理 keyDown 功能。我已经覆盖了acceptsFirstResponder，但没有任何反应。

如果重要，我使用自定义 NSEvent 循环运行应用程序，如下所示：

```
NSDictionary* info = [[NSBundle mainBundle] infoDictionary];
NSString* mainNibName = [info objectForKey:@"NSMainNibFile"];

NSApplication* app = [NSApplication sharedApplication];
NSNib* mainNib = [[NSNib alloc] initWithNibNamed:mainNibName bundle:[NSBundle mainBundle]];
[mainNib instantiateNibWithOwner:app topLevelObjects:nil];

[app finishLaunching];

while(true)
{   
    NSEvent* event = [app nextEventMatchingMask:NSAnyEventMask untilDate:[NSDate date] inMode:NSDefaultRunLoopMode dequeue:YES];
    [app sendEvent:event];

    // Some code is execute here every frame to do some tasks...

    usleep(5000);
} 
```

这是 SurfaceView 代码：

```
@interface SurfaceView : NSView
{
    Panel* panel;
}

@property (nonatomic) Panel* panel;

- (void)drawRect:(NSRect)dirtyRect;
- (BOOL)isFlipped;
- (void)mouseDown:(NSEvent *)theEvent;
- (void)mouseDragged:(NSEvent *)theEvent;
- (void)mouseUp:(NSEvent *)theEvent;
- (void)keyDown:(NSEvent *)theEvent;
- (BOOL)acceptsFirstResponder;
- (BOOL)becomeFirstResponder;

@end 
```

--

```
@implementation SurfaceView

@synthesize panel;

- (BOOL)acceptsFirstResponder
{
    return YES;
};

- (void)keyDown:(NSEvent *)theEvent
{
    // this function is never called
};

...

@end 
```

这是我创建视图的方式：

```
NSWindow* window = [[NSWindow alloc] initWithContentRect:NSMakeRect(left, top, wide, tall) styleMask:NSBorderlessWindowMask | NSClosableWindowMask | NSMiniaturizableWindowMask backing:NSBackingStoreBuffered defer:NO];

...

[window makeKeyAndOrderFront:nil];

SurfaceView* mainView = [SurfaceView alloc];
[mainView initWithFrame:NSMakeRect(0, 0, wide, tall)];
mainView.panel = panel;
[window setContentView:mainView];
[window setInitialFirstResponder:mainView];
[window setNextResponder:mainView];
[window makeFirstResponder:mainView]; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-24T20:38:34.753

我发现是什么阻止了`keyDown`事件被调用。它是`NSBorderlessWindowMask`面具，它防止窗口成为关键和主窗口。所以我创建了一个`NSWindow`名为的子类`BorderlessWindow`：

```
@interface BorderlessWindow : NSWindow
{
}

@end

@implementation BorderlessWindow

- (BOOL)canBecomeKeyWindow
{
    return YES;
}

- (BOOL)canBecomeMainWindow
{
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T14:00:22.690

除了回答：检查您的 IB 复选框`NSWindow`。

`Title Bar`应该检查。它类似于`NSBorderlessWindowMask`

![在此处输入图像描述](../Images/41d4e9d22f6674b8f2b1be46f6512979.png)

# c - 为什么在 C 代码中出现多个定义错误？

> ID：11622258
> 
> 赞同：4
> 
> 时间：2012-07-23T23:57:33.480
> 
> 标签：c

我目前正在用c模拟adt，我应该制作一个包含字符串的二叉搜索树，我目前正在开始编码，但我收到了这个错误，它没有说明错误来自哪里，这里是代码，有人可以帮助我。

树.h

```
#ifndef tree_h
#define tree_h
#include <stdbool.h>
#include <stdlib.h>

typedef struct tree_node* node_ptr;

struct tree_node {
    char* word;
    node_ptr leftNode, rightNode;
};

node_ptr start = NULL;

void addItem(char*, int);
void display();

#endif 
```

树.c

```
#include "tree.h"
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

void addItem(char arr[], int mode) {
    node_ptr temp, temp2;

    temp = (node_ptr)malloc(sizeof(struct tree_node));
    temp->leftNode=NULL;
    temp->rightNode=NULL;

    if(mode == 1){
        temp->word = arr;
        start = temp;
        }
    }  

void display() {
    node_ptr temp;
    temp = start;
    printf("%s", start->word);       
} 
```

主程序

```
#include "tree.h"
#include <stdio.h>
#include <conio.h>

int main() {
    char word[31];

    printf("Enter Root Word: ");
    gets(word);
    addItem(word, 1);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T00:03:12.383

问题在于`tree.h`.

```
node_ptr start = NULL; 
```

而且您同时`tree.h`包含`main.c`和`tree.c`。`start`这为全局范围内的变量提供了多重定义错误。你真正需要的是，

```
// tree.h

extern node_ptr start; 
```

并将定义放在单个源文件中，例如 -

```
// tree.c

#include "tree.h"
........
node_ptr start = null; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T00:06:01.643

您正在谈论的错误是：

```
... multiple definition of `start' 
```

既然你有`node_ptr start = NULL;`，`tree.h`每个包含的编译单元`tree.h`都会有自己的变量定义`start`。在链接时，链接器将看到变量的*多个定义*`start`并抛出错误。

为避免这种情况，请在 中*定义* ：`start``tree.c`

```
node_ptr start; 
```

然后声明`start`为`extern`，以便其他编译单元知道它，但不会尝试自己定义它，在你的头文件中`tree.h`：

```
extern node_ptr start; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T00:03:26.003

您的错误是您定义：

```
node_ptr start = NULL; 
```

因此，在您的头文件中，当您导入它时（不管宏保护如何），您将获得 start 的两个重新定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T20:30:35.973

```
if(mode == 1)
{
temp->word = arr;/*here is another error*/
    start = temp;
    } 
```

arr 对 main 来说是本地的，我认为对于更多节点，您必须重用 arr 数组来获取输入。当时它反映在所有节点中，因为每个节点的单词都指向相同的内存位置。所以它不是直接的选项分配。

您还必须为字符串动态分配内存。然后使用 strcpy() 函数将数据复制到动态内存位置。

好的，在那个地方使用这个代码：-

```
if(mode==1)
 {
  w_len=sizeof(char)*(strlen(arr)+1);//one extra character for null character
  temp->word=malloc(w_len);
  strcpy(temp->word,arr);
  start=temp;
 } 
```

# java - Java调度服务

> ID：11622259
> 
> 赞同：0
> 
> 时间：2012-07-23T23:57:42.217
> 
> 标签：java, jakarta-ee, scheduled-tasks

我需要创建一个服务来安排基本上是获取命中某个 servlet 的请求的作业。我尝试使用基于这篇文章的 servlet 上下文侦听器来执行此操作，[在 Tomcat 中运行后台 Java 程序](https://stackoverflow.com/questions/4907502/running-a-background-java-program-in-tomcat)，但是定义的 web.xml 更改导致 Tomcat 服务器上出现 404 错误。有没有人对如何做到这一点有任何其他建议？

我此时的一个想法是定义一个可运行的 servlet

```
public class Service extends HttpServlet implements Runnable    {
     //Does stuff
     init()  {
         new Thread(this);
     }
} 
```

这是一个合理的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:02:30.460

您可以考虑使用石英调度程序进行作业：

```
http://quartz-scheduler.org/ 
```

例如（不特定于您的任务）：

```
import java.util.Map;
import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class SchedulerJob implements Job
{
  public void execute(JobExecutionContext context)
  throws JobExecutionException {

    Map dataMap = context.getJobDetail().getJobDataMap();
    SchedulerTask task = (SchedulerTask)dataMap.get("schedulerTask");
    task.printSchedulerMessage();
  }
} 
```

另一种选择（快速周转）是根据您的操作系统仅使用 cron 作业或 Windows 任务管理器。

# php - $_POST 的简单语法问题

> ID：11622260
> 
> 赞同：0
> 
> 时间：2012-07-23T23:57:48.597
> 
> 标签：php

我想在 $_POST[] 括号内连接一个变量以进行 while 循环。我的问题是，有没有可能。这是代码。

```
$m=0;

$_POST['tier_' . $m]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:00:53.383

是的。但是，您的表单可能更像是：

```
<input type="text" name="tier[]" /> 
```

然后`$_POST['tier']`将是一个可以循环的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:05:11.493

有可能，是的，但是您提供的代码示例会引起通知，因为它会尝试检查尚不存在的索引。以下将起作用：

```
$m=0;

$_POST['tier_' . $m] = 'something'; 
```

# validation - 依赖于相关域的 Grails 验证

> ID：11622262
> 
> 赞同：0
> 
> 时间：2012-07-23T23:58:05.773
> 
> 标签：validation, grails, groovy, jqgrid, dependencies

我有几个相关的域类，我试图弄清楚如何实现依赖于多个域的约束。问题的要点是：

资产有许多容量池对象

Asset 有很多 Resource 对象

当我创建/编辑资源时，需要检查资产的总资源是否超过容量。

我创建了一个服务方法来完成这个，但是这不应该通过资源域中的验证器来完成吗？我的服务等级如下：

```
 def checkCapacityAllocation(Asset asset, VirtualResource newItem) {     

// Get total Resources allocated from "asset"
        def allAllocated = Resource.createCriteria().list() {
            like("asset", asset)
        }
        def allocArray = allAllocated.toArray()
        def allocTotal=0.0
        for (def i=0; i<allocArray.length; i++) {
            allocTotal = allocTotal.plus(allocArray[i].resourceAllocated)
        }

// Get total capacities for "asset"
        def allCapacities = AssetCapacity.createCriteria().list() {
            like("asset", asset)

        }
        def capacityArray = allCapacities.toArray()
        def capacityTotal = 0.0
        for (def i=0; i<capacityArray.length; i++) {
            capacityTotal += capacityArray[i].actualAvailableCapacity
        }

        if (allocTotal > capacityTotal) {
           return false
        }
    }
    return true
} 
```

我遇到的问题是使用这种方法进行验证。我正在使用 JqGrid 插件（带有内联编辑）并且错误报告是有问题的。如果我可以在域中进行这种类型的验证，它会让事情变得容易得多。有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:51:58.613

怎么样：

```
def resourceCount = Resource.countByAsset(assetId)
def assetCapacityCount = AssetCapacity.countByAsset(assetId)
if(resourceCount < assetCapacityCount) return true
return false 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:07:28.350

要将 service 方法用作验证器，您需要将服务注入您的域，然后添加调用它的自定义验证器。我认为它看起来像这样：

```
class Asset {

    def assetService

    static hasMany = [resources: Resource]

    static constraints = {
        resources(validator: { val, obj ->
            obj.assetService.checkCapacityAllocation(obj, val)
        })
    }
} 
```

# jquery - 在 jquery 中对多个 html 表进行排序

> ID：11622267
> 
> 赞同：0
> 
> 时间：2012-07-23T23:58:29.677
> 
> 标签：jquery, css, sorting, html-table

我有一些代码可以在 jQuery 中对表格进行排序，如下所示。

```
 $(document).ready(function() {
        //grab all header rows
        $('thead th').each(function(column){
            $(this).addClass('sortable').click(function() {
                var findSortKey = function($cell) {
                    return $cell.find('.sort-key').text().toUpperCase()
                    + ' ' + $cell.text().toUpperCase();
                };

                var sortDirection = $(this).is('.sorted-asc') ? -1 : 1;

                //step back up tree and get the rows with data
                //for sorting
                var $rows = $(this).parent().parent().parent().find('tbody tr').get();

                //loop through all the rows and find
                $.each($rows, function(index, row) {
                    row.sortKey = findSortKey($(row).children('td').eq(column));
                });

                //compare and sort the rows alphabetically or numerically
                $rows.sort(function(a, b) {
                    if (a.sortKey.indexOf('-') == -1){
                        if (parseInt(a.sortKey) < parseInt(b.sortKey)) {
                            return -sortDirection;
                        }
                        if (parseInt(a.sortKey) > parseInt(b.sortKey)) {
                            return sortDirection;
                        }
                    } else {

                        if (a.sortKey < b.sortKey) {
                            return -sortDirection;
                        }
                         if (a.sortKey > b.sortKey) {
                            return sortDirection;
                        }
                    }

                    return 0;
                });

                //add the rows in the correct order to the bottom of the table
                $.each($rows, function(index, row) {
                    $('tbody').append(row);
                    row.sortKey = null;
                });

                //identify the column sort order
                $('th').removeClass('sorted-asc sorted-desc');
                var $sortHead = $('th').filter(':nth-child(' + (column + 1) + ')');
                sortDirection == 1 ? $sortHead.addClass('sorted-asc') : $sortHead.addClass('sorted-desc');

                // identify the column to be sorted by
                $('td').removeClass('sorted').filter(':nth-child(' + (column + 1) + ')').addClass('sorted');

                //$('.visible td').removeClass('odd');
                //zebraRows('.vi')
            });
        });
    }); 
```

还有css

```
root { 
    display: block;
}

th.sortable {
    color: #666;
    cursor: pointer;
    text-decoration: underline;

}
th.sortable:hover{color:black;}
th.sorted-asc, th.sorted-desc { color:black;
          background-color: cadetblue;
} 
```

这适用于一张桌子，但不适用于多张桌子。有没有什么办法可以根据表格嵌套的 div 的 id 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:21:02.867

如果你想要一个预打包的解决方案，我过去使用过 sortable.js。这是链接：[http ://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)

这很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:07:25.913

一些选择器需要特定于相关表。

通过逐步改进，我得出以下结论：

```
$(document).ready(function() {
    function findSortKey($cell) {
        return $cell.find('.sort-key').text().toUpperCase() + ' ' + $cell.text().toUpperCase();
    };
    function sortFn(a, b) {
        if (a.sortKey.indexOf('-') == -1) {
            return parseInt(a.sortKey, 10) - parseInt(b.sortKey, 10);
        } else {
            return a.sortKey - b.sortKey;
        }
    }
    $('thead th').each(function(column) {
        $(this).addClass('sortable').click(function() {
            var $th = $(this);
            var sortDirection = $th.is('.sorted-asc') ? -1 : 1;
            var $tbody = $th.closest('table').children('tbody');
            var rows = $tbody.children('tr').get();
            $.each(rows, function(index, row) {
                row.sortKey = findSortKey($(row).children('td').eq(column));
            });
            rows.sort(function(a, b) {
                if(sortDirection == 1) { return sortFn(a, b); }//sort asc.
                else { return sortFn(b, a); }//reverse a and b to sort desc.
            });
            $.each(rows, function(index, row) {
                $tbody.append(row);
                row.sortKey = null;//??
            });
            var filterSelector = ':nth-child(' + (column + 1) + ')';
            $th.removeClass('sorted-asc sorted-desc').filter(filterSelector).addClass( (sortDirection == 1) ? 'sorted-asc' : 'sorted-desc' );
            $tbody.children('td').removeClass('sorted').filter(filterSelector).addClass('sorted');
        });
    });
}); 
```

*未经测试，因此可能需要调试*

除了更正选择器之外，最重要的变化是将几个函数拉到外部`each()`循环之外并简化排序函数。

# c# - 调用 System.IO.Directory.GetFiles 和 System.IO.Directory.CreateDirectory 时出现零星 System.IO.IOException

> ID：11622270
> 
> 赞同：1
> 
> 时间：2012-07-23T23:58:42.297
> 
> 标签：c#, vb.net, ioexception, getfiles

我有 .net 4.0 (vb.net & c#) 代码（大约 15 个不同的程序）在虚拟服务器（Windows 2003 R2）上运行，试图处理本地网络中其他服务器上的文件（可能每天 1000 个），在域帐户下运行。这些目录是使用机器名称和别名 (\server\share) 的所有各种 Windows 共享。

95% 或更多的时间一切都很好，但在过去的两个月里，我看到更多由 System.IO.Directory.GetFiles 或 System.IO 引发的“找不到网络路径”错误的实例。目录.创建目录。

有没有人经历过并解决过同样的事情？在这一点上，我想知道 Active Directory 身份验证和坏交换机端口之类的事情，但不知道如何“证明”这确实是正在发生的事情。

我可以做任何附加软件陷阱吗？

我应该查看硬编码的 DNS 地址吗？

# javascript - Dojo AMD 1.7 使用声明的正确继承语法

> ID：11622271
> 
> 赞同：1
> 
> 时间：2012-07-23T23:58:52.623
> 
> 标签：javascript, inheritance, dojo, js-amd

我正在努力解决这个问题：

我在文件 Module1.js 中有这个简单的模块：

```
define(['dojo/_base/declare', 'esri/map'], function (declare, map) {
    return declare(null,
        {
            name: "Module 1 name",

            constructor: function() {
                this.name = "module 1";
                //this.age = age;
                //this.currentResidence = currentResidence;
            },

            doSomething: function() {
                alert("calling from Module1");
            }
        });
}); 
```

我正在尝试定义一个继承自 Module1 但似乎找不到正确语法的 Module2：这是我目前拥有的：

```
define(["dojo/_base/declare",
        "esri/map",
        "tut/Module1"],
    function (declare, map, Module1) {
        return declare(null, [Module1],     // or tut/Module1
        {
            name: "Module 2 name",

            constructor: function () {
                this.name = "module 2";
                //this.age = age;                 
            },

            doSomething: function () {
                this.inherited(arguments); // Call superclass method...
                alert("calling from Module 2");
            },

            doSomething1: function () {
                alert("calling do soething 1 from module 2");
            }
        });
}); 
```

在我的代码的其他地方，我正在这样做：

```
 require(["tut/Module1", "tut/Module2"], function (Module1, Module2) {        
        var m = new Module1();
        m.doSomething();

        var m2 = new Module2();
        m2.doSomething();    

    }); 
```

在加载加载 dojo 的 ESRI 脚本之前，我定义了以下 dojoConfig，如下所示：

```
 <script type="text/javascript">
   var dojoConfig = {
                async : true,                               
                packages: [{ name: "tut", location: liveString + '/scripts/xxxx/utilities'}]            
            };
 </script>
 <script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.0compact"></script> 
```

对 Module1 的调用向我表明我的包定义是正确的。但是，对 Module2 的调用会引发异常，指出 Object [object object] 没有方法“doSomething”。[我尝试了许多不同的排列，在手册](http://dojotoolkit.org/reference-guide/1.7/dojo/declare.html)中来回查找，但找不到正确的语法。现在我只是猜测所以需要一些帮助。

如何使用 Dojo 1.7 语法从 Module1 继承？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:00:14.470

调用`this.inherited(arguments)`将起作用（如果声明不抛出“不是有效的混合”，并且构造函数方法都不会抛出错误）。

尝试

### 模块 1

```
define(["dojo/_base/declare",
        "esri/map"],
    function (declare, map) {
        return declare("tut.Module1", [], {     // or tut>>.<<Module1
          constructor: function() { this.name='a'; console.log('a ctor'); }
          log: function() { console.log(this.name); }
        });
    }
}); 
```

### 模块 2 源自模块 1

```
define(["dojo/_base/declare",
        "esri/map",
        "tut/Module1"],
    function (declare, map, Module1) {
        return declare("tut.Module2", [Module1],
          constructor: function() { this.name='B'; console.log('B ctor'); }
          log: function() { this.inherited(arguments); console.log(this.name); }
        });
    }
}); 
```

尝试在模块实例（'new Module().constructor._meta'）中迭代constructor._meta'bases'，这应该可以了解this.inherited的工作原理

打电话

```
require(["tut/Module2"], function (M2) {
   var m = new M2();
   console.log('created');
   m.log()
}); 
```

会输出

“B ctor”
“A ctor”
“创造”
“A”
“B”

# java - 使用 easymock 在 for 循环中调用模拟对象

> ID：11622273
> 
> 赞同：0
> 
> 时间：2012-07-23T23:59:07.877
> 
> 标签：java, unit-testing, easymock

我已经使用`Easymock.createNiceMock`.

```
MYRepository mockedMyRepository = EasyMock.createNiceMock(MyRepositoryWrapper.class);

EasyMock.expect(mockedRepository.findList(Asset.class, criteria)).andReturn(statusTypeList); 
```

在测试类中，我有一个 for 循环，在其中我调用了该`findList`方法。它在第一个循环中获取值，但从下一个循环返回`null`。

即使没有循环，也只有一次它返回我指定的值。

```
System.out.println("first"+this.myRepository.findList(Asset.class).get(0)); \\ returns the correct value
System.out.println("second"+this.myRepository.findList(Asset.class).get(0)); \\ returns null 
```

这里的解决方案是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:07:00.427

添加

```
.anyTimes() 
```

到期望的尽头。所以你得到

```
EasyMock.expect(mockedRepository.findList(Asset.class , criteria)).andReturn(statusTypeList).anyTimes(); 
```

否则，您是在暗示只期望它一次。

# ruby-on-rails - 尝试遍历哈希中的项目并仅返回某些项目

> ID：11622276
> 
> 赞同：2
> 
> 时间：2012-07-23T23:59:55.493
> 
> 标签：ruby-on-rails, ruby, loops, hash

我有以下函数将 URL 解码为由 URL 的不同部分组成的哈希。例如，在我分配的第一行之后`hash`，我收到以下输出：

```
>> CGI.parse(URI.parse("http://google.com/?foo=bar&baz=hello").query)
=> {"foo"=>["bar"], "baz"=>["hello"]} 
```

在这个函数中，如果键是“p”或“q”，我会尝试提取值。我本质上想将散列过滤成我想要的键和值。

我的目标是只显示某人搜索的关键字，例如`brick`or `cement`。

这是我的功能：

```
 def self.get_search_terms(search_url)
    hash = CGI.parse(URI.parse(URI.encode(search_url)).query) #returns a hash
    keywords = []
    hash.each do |key|
      if key["q"] != nil || 
        key["p"] != nil
        keywords << key
      end
    end
    keywords
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:26:19.953

一种方法：

```
def self.get_search_terms(search_url)
  hash = CGI.parse(URI.parse(URI.encode(search_url)).query)
  keywords = []
  hash.each do |key, value|
    if key == 'p' || key == 'q'
      keywords << value
    end
  end
  keywords
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:09:00.747

更惯用的 ruby​​ 方式，本质上是一个衬里：

```
def self.get_search_terms(search_url)
  CGI.parse(URI.parse(URI.encode(search_url)).query).values_at('q','p')
end 
```

见[哈希#values_at](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-values_at)

如果要消除空参数，请在其中添加拒绝空白：

```
.values_at('q','p').reject(&:blank?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:13:01.330

可能是 100 种方法之一！

```
def self.get_search_terms(search_url)
  myhash = CGI.parse(URI.parse(URI.encode(search_url)).query) 
  keywords = []
  ["p","q"].each do |mykey|
     if myhash.has_key?(mykey)
       keywords << myhash[mykey]
     end
  end
  keywords
end 
```

或许

```
def self.get_search_terms(search_url)
  myhash = CGI.parse(URI.parse(URI.encode(search_url)).query) 
  keywords = []
  mykeywords = ["p","q"]
  mykeywords.each do |mykey|
    if myhash.has_key?(mykey)
      keywords << myhash[mykey]
    end
  end
  keywords
end 
```

在这两个版本中，您正在寻找的关键字列表是初始循环。您使用以下方法隐式迭代从 URI 中提取的哈希：

myhash.has_key？

这将遍历我的哈希，如果它包含键，则将键的值添加到关键字。

# java - Hibernate - 如何过滤@ManyToOne（@OneToMany 有效...）

> ID：11622281
> 
> 赞同：2
> 
> 时间：2012-07-24T00:00:43.917
> 
> 标签：java, hibernate, filter

我正在使用休眠 3.6。

当我使用与 的`@OneToMany`关系时`@Filter`，它可以工作。

前任：

```
@OneToMany(mappedBy="item", cascade={CascadeType.ALL}, fetch=FetchType.LAZY)
@Filter(name="filter_detail_status")
public List<Detail> details = new ArrayList<Detail>(); 
```

但是当我与 一起使用时`@ManyToOne`，它不会。

```
@ManyToOne(cascade={CascadeType.ALL}, fetch=FetchType.LAZY)
@JoinColumn(name="item_id")
@Filter(name="filter_item_status")
public Item item; 
```

我检查了 SQL，但不包括过滤器。

我尝试了`@Where`注释`@ManyToOne`，它也不起作用。

如何过滤一个`@ManyToOne`？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:05:22.043

我从未使用过过滤器，但我使用 Criteria API 来创建更复杂的查询，例如涉及多对一映射的查询。

# c# - 如何检查文件是否已经存在？

> ID：11622283
> 
> 赞同：-2
> 
> 时间：2012-07-24T00:01:03.087
> 
> 标签：c#

```
public void SaveFormPicutreBoxToBitMapIncludingDrawings()
{
    using (Bitmap b = new Bitmap(pictureBox1.Width, pictureBox1.Height))
    {
        pictureBox1.DrawToBitmap(b, new Rectangle(0, 0, pictureBox1.Width, pictureBox1.Height));
        string fn = @"d:\PictureBoxToBitmap\" + PbToBitmap.ToString("D6") + ".bmp";
        if (File.Exists(fn))
        {
        }
        else
        {
            b.Save(@"d:\PictureBoxToBitmap\" + PbToBitmap.ToString("D6") + ".bmp"); // to fix/repair give gdi error exception.
            PbToBitmap++;
        }
    } 
} 
```

如果我将 trackBar 向右移动，它将保存第一个文件 000000.bmp，然后在下次保存文件 000001.bmp 时将其提高一个

但是如果我现在向左移动一次，变量 fn 是 000002.bmp，它不存在，它将保存以前的图像，它实际上是 000001.bmp。

当我向左移动时它应该做什么应该是 000001.bmp 看到它存在并且什么都不做。

如果不进行此检查，如果我将 trackBar 向右或向左移动，它将一直保存文件，所以几次后我将拥有超过 90 个几乎相同的文件。

## 我该如何解决？

变量 PbtoBitmap 是 Form1 顶部的 int 类型，我刚从 0 开始。 PbToBitmap = 0;

我正在谈论的 trackBar 是 trackBar1，在滚动事件中我调用了这个 SaveFormPicutreBoxToBitMapIncludingDrawings 函数。

这是 trackBar1 滚动事件：

```
private void trackBar1_Scroll(object sender, EventArgs e)
{
    currentFrameIndex = trackBar1.Value;
    textBox1.Text = "Frame Number : " + trackBar1.Value;
    wireObject1.woc.Set(wireObjectAnimation1.GetFrame(currentFrameIndex)); 

    trackBar1.Minimum = 0;
    trackBar1.Maximum = fi.Length - 1;
    setpicture(trackBar1.Value);
    pictureBox1.Refresh();

    button1.Enabled = false;
    button2.Enabled = false;
    button3.Enabled = false;
    button4.Enabled = false;
    button8.Enabled = false;
    SaveFormPicutreBoxToBitMapIncludingDrawings();
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:43:27.130

目前尚不清楚您要完成什么，但您正在从 counter 生成文件名`PbToBitmap`。这个计数器只会增加而不会减少，所以它当然会“继续保存文件......”。

如果您希望计数器与您所在的框架相匹配，请摆脱`PbToBitmap`和内部`trackBar1_Scroll`调用：

```
string dir = @"d:\PictureBoxToBitmap";
SaveFormPictureBoxToBitMapIncludingDrawings(dir, currentFrameIndex); 
```

将您更改`SaveFormPictureBoxToBitMapIncludingDrawings`为：

```
public void SaveFormPictureBoxToBitMapIncludingDrawings(string dir, int frameIndex)
{
    string fn = Path.Combine(dir, frameIndex.ToString("D6") + ".bmp");
    if (!File.Exists(fn))
    {
        using (Bitmap b = new Bitmap(pictureBox1.Width, pictureBox1.Height))
        {
            pictureBox1.DrawToBitmap(b, new Rectangle(0, 0, pictureBox1.Width, pictureBox1.Height));
            b.Save(fn);
        }
    } 
} 
```

# c++ - 无法从 C++ 中的文件中逐个字符地读取字符

> ID：11622290
> 
> 赞同：0
> 
> 时间：2012-07-24T00:02:23.537
> 
> 标签：c++, string, file-io, stringstream

所以我有这段代码：

```
ifstream sFile;
sFile.open(argv[1]);
stringstream ss;
unsigned char aChar;
string aString;

while (sFile >> noskipws >> aChar) {
    ss << noskipws << aChar;
}
ss >> noskipws >> aString;
cout << noskipws << aString << endl; 
```

我的文件包含：“SHE SMELLS”

在标准输出中，我看到的只是“SHE”。我浪费了很多时间试图弄清楚这一点，有人可以帮我理解为什么会这样吗？

此外，这是否能够读取扩展 ascii 字母表中的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:09:32.750

查看此页面以了解 noskipws：

[http://www.cplusplus.com/reference/iostream/manipulators/noskipws/](http://www.cplusplus.com/reference/iostream/manipulators/noskipws/)

在示例中，它显示了您遇到的问题，可以使用以下方法修复：

```
iss.seekg(0); 
```

如果您这样做，这应该有效：

```
sFile.seekg(0); 
```

在你的 while 循环之前。希望这是正确的/有帮助。

# html-agility-pack - HTML 敏捷包：使用代理？

> ID：11622292
> 
> 赞同：0
> 
> 时间：2012-07-24T00:03:05.193
> 
> 标签：html-agility-pack

如何在 HAP 中使用代理？这就是我到目前为止所拥有的......（没有运气）。

IPCHICKEN 只是用来测试 ip 地址。它显示的是我的 IP 地址，而不是我的代理的 IP 地址

```
Function GetPrice(ByVal AmazonURL As String, ByVal Delay As Integer)
    Dim aHtml As New HtmlWeb
        Dim ChromeAgent As String = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11"
    aHtml.UserAgent = ChromeAgent

    Dim proxy As New System.Net.WebProxy
    Dim proxyAddress As New Uri("http://111.111.111/")

    Dim aDoc As HtmlDocument = aHtml.Load("http://www.ipchicken.com", "GET", proxy, System.Net.CredentialCache.DefaultCredentials)

    Dim aNode As HtmlAgilityPack.HtmlNode
    aNode = aDoc.DocumentNode.SelectSingleNode("//div[@id='olpDivId']/span[2]")

    If aNode.InnerText Is Nothing Then

    End If

    Dim UsedPrice1 As String = aNode.InnerText
    Dim i As Integer = UsedPrice1.IndexOf("$")
    Dim UsedPrice As Integer = UsedPrice1.Substring(i + 1)

    System.Threading.Thread.Sleep(Delay)

    Return UsedPrice
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:25:08.990

也许尝试以下类似的方法。根据页面的不同，您可能不需要 UTF8 转换。

```
WebProxy proxy = new WebProxy("proxyname", 8080);
proxy.Credentials = CredentialCache.DefaultCredentials;

WebClient client = new WebClient();
client.Proxy = proxy;

string baseHtml = "";

byte[] pageContent = client.DownloadData("your target url");

UTF8Encoding utf = new UTF8Encoding();
baseHtml = utf.GetString(pageContent);

HtmlDocument pageHtml = new HtmlDocument();
pageHtml.LoadHtml(baseHtml); 
```

# xml - 如何使用 vba 修改 xml 声明

> ID：11622294
> 
> 赞同：1
> 
> 时间：2012-07-24T00:03:10.013
> 
> 标签：xml, vba, declaration

我的第一篇文章，哇！在过去的 6 个月里，我一直在潜伏，因为我一直在学习 VBA，并且取得了很大的进步。但现在我被困住了，我需要你的帮助！

我有一组 xml 文档，我需要用另一个声明替换顶部的声明，但我不知道该怎么做。我已经阅读了许多关于在 VBA 中使用 DOMDocument 来修改 xml 文档的文章，并且我已经弄清楚了如何在 microsoft API 的帮助下修改 xml 文件中的不同节点。但是我似乎无法访问声明。

这可能吗？

如果是这样，我在正确的轨道上吗？

如果是这样，我需要调用哪些（如果存在）属性或方法来访问 xml 文件中的声明，以便我可以修改它们？

如果没有，我该怎么做？

我真的很想通过手动复制和粘贴来避免这样做，有成千上万的记录需要修改。

这是我的 VBA 来提取和修改字段：

```
Sub XMLtest()
    Dim strXML As String
    Dim objXML As MSXML2.DOMDocument
    Dim point As IXMLDOMNode
    Dim origVal As String
    Dim newVal As String

    Set objXML = New MSXML2.DOMDocument

    strXML = "Q:\TIS\!Safety(Beth)\Tim's Projects\Safety Inspections\xml\2011-12-07T10_32_31(good tag).xml"

    objXML.Load (strXML)

    Set point = objXML.DocumentElement.ChildNodes.Item(0)
    Debug.Print point.XML

    origVal = objXML.DocumentElement.ChildNodes.Item(0).Text
    MsgBox origVal

    'this is a section that will change the value of the first item
    objXML.DocumentElement.ChildNodes.Item(0).Text = "TimTest1"
    MsgBox objXML.DocumentElement.ChildNodes.Item(0).Text

    objXML.Save (strXML)

End Sub 
```

我的目标是删除 xml 文件的声明部分并将其替换为另一组声明，以允许 infopath 再次读取它（当前声明将不会被 infopath 表单读取）。

我要删除的声明：

```
<?xml version="1.0" encoding="UTF-8"?>
<?mso-infoPathSolution name="urn:schemas-microsoft-com:office:infopath:Office-Inspection:-myXSD-2011-10-05T14-49-56" PIVersion="1.0.0.0" href="http://a.octer.com/dept/TIS/TISSafety/Office%20Inspection/Forms/template.xsn" solutionVersion="1.0.0.31" productVersion="14.0.0" ?>

<?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?>

<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:tns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService" xmlns:s1="http://microsoft.com/wsdl/types/" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2011-10-05T14:49:56" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us"> 
```

这是我正在尝试修改的 xml 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<?mso-infoPathSolution name="urn:schemas-microsoft-com:office:infopath:Office-Inspection:-myXSD-    2011-10-05T14-49-56" PIVersion="1.0.0.0" href="http://a.octer.com/dept/TIS/TISSafety/Office%20Inspection/Forms/template.xsn" solutionVersion="1.0.0.31" productVersion="14.0.0" ?>

<?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?>

<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:tns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService" xmlns:s1="http://microsoft.com/wsdl/types/" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2011-10-05T14:49:56" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">  

<my:Manager>MikeTest2</my:Manager>
<my:Date>2011-12-07</my:Date>
<my:Team>Marketing</my:Team>
<my:Inspector>HermanTest3</my:Inspector>
<my:Aisles>Y</my:Aisles>
<my:SecondaryAisles>Y</my:SecondaryAisles>
<my:CircutOverload>Y</my:CircutOverload>
<my:OutletCovers>Y</my:OutletCovers>
<my:PanelsClosed>Y</my:PanelsClosed>
<my:FireExt>Y</my:FireExt>
<my:ExtTag>Y</my:ExtTag>
<my:CeilingTiles>Y</my:CeilingTiles>
<my:Sprinklers>Y</my:Sprinklers>
<my:Evacuation>Y</my:Evacuation>
<my:a44444>Y</my:a44444>
<my:Comments>email sent to team encouraging a general cleanup of floor space in cubicles.</my:Comments>
</my:myFields> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:12:04.297

所以我找到了答案：

您需要在此处进一步阅读 API 以了解如何使用 msxml 插件：http: [//msdn.microsoft.com/en-us/library/ms766487](http://msdn.microsoft.com/en-us/library/ms766487)

此时我使用这行 VBA 来访问声明：

```
objXML.ChildNodes.Item(0) 
```

这是第一个声明：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

基本上我需要了解 DOM 文档的结构以及节点及其属性的使用。希望这将帮助其他人在未来寻找这个答案。

# c# - debugging an executable created by application

> ID：11622303
> 
> 赞同：0
> 
> 时间：2012-07-24T00:03:47.453
> 
> 标签：c#, debugging

I'm having a difficult time finding the right keywords to search on for this. I'm simply trying to figure out a way to debug an executable file that was created by my application. I just created an executable file from my application that contains some encrypted stuff which starts my application when double clicked, that my application uses for certain things. Is it possible to run that executable program that starts the application, and debug the entry into visual studio? I need to verify that the encrypted data is decrypted properly in the application, and the only way to verify this is with debug, or writing to an output file the decrypted information. I'd rather just debug, so I don't have to remember to take out the code that produces the outfile.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:53:14.933

Make sure that you application is installed with the .PDBs in the directory with it.

In visual studio, load the solution containing your application.

After you have started the app by double clicking on the associated icon select debug| attach to process ...

Select your process.

If you application is going right into action you may have to add a thread.sleep(10000) (or show a modal dialog) to give you time to attach to the start while you debug - remove it when done.

# c++ - C ++ opencv在为Mat（矩阵）元素赋值时，先前分配的元素发生了变化

> ID：11622304
> 
> 赞同：2
> 
> 时间：2012-07-24T00:03:48.100
> 
> 标签：c++, opencv

我正在尝试将数据文件（1000 x 5 doubles）读入 Mat 对象。Mat 对象被初始化为 Mat::zeros(1000,5,CV_32F)。在读取每一行数据时，将相应的行分配给新值。代码如下所示：

```
void readNavFile(const char* filename, Mat& navdata) {

    ifstream infile(filename);
    string line;
    int x=0, y=0;

    if (infile.is_open()) {

        while (getline(infile, line)) {
            double value;
            stringstream converter(&line[0]);
            double* p = navdata.ptr<double>(x);
            while (converter >> value) {

                p[y++] = value;
                //DEBUGING
                cout << "Pointer value:" << p[y-1] << endl;
                cout << "Matrix value at:" << "row:" << x << " col:" << y-1 <<" is: "<< navdata.at<double>(x,y-1)<< endl;
                cout << navdata.at<double>(0,4) << endl;

            }
            y = 0;
            x++;
        }

        infile.close();
        //DEBUGING
        cout << "Final matrix first row, last element:" << navdata.at<double>(0,4) << endl;
    }
} 
```

如您所见，我尝试在分配 Mat（矩阵）元素时打印出它们的值，以便确保存储了正确的值。奇怪的是分配一切顺利，但是一些先前分配的元素会突然改变它们的值。示例输出如下所示，在最后一行，在分配元素 [1,2] 后，[0,4] 处的值从其正确值 18.1901 更改为 3.31757e-190：

```
Pointer value:-35.1236
Matrix value at:row:0 col:0 is: -35.1236
Matrix element [0,4]: 0
Pointer value:150.735
Matrix value at:row:0 col:1 is: 150.735
Matrix element [0,4]: 0
Pointer value:360.094
Matrix value at:row:0 col:2 is: 360.094
Matrix element [0,4]: 0
Pointer value:3.46045
Matrix value at:row:0 col:3 is: 3.46045
Matrix element [0,4]: 0
Pointer value:18.1901
Matrix value at:row:0 col:4 is: 18.1901
Matrix element [0,4]: 18.1901
Pointer value:-35.1236
Matrix value at:row:1 col:0 is: -35.1236
Matrix element [0,4]: 18.1901
Pointer value:150.735
Matrix value at:row:1 col:1 is: 150.735
Matrix element [0,4]: 18.1901
Pointer value:360.096
Matrix value at:row:1 col:2 is: 360.096
Matrix element [0,4]: 3.31757e-190 
```

有人可以帮我弄清楚发生了什么吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:16:10.647

32F 代表 OpenCV 中的浮点数。`navdata.at<double>(0,4)`是不正确的。您应该使用`navdata.at<float>(0,4)`或将您的数据类型更改为 64F。此外，OpenCV 应该为您的代码抛出异常。你确定没有？

# php - 使用 HTML 5 和 PHP 访问 MySql

> ID：11622309
> 
> 赞同：-3
> 
> 时间：2012-07-24T00:04:19.183
> 
> 标签：php, mysql, html

这是一个菜鸟问题，但如果我需要制作一个基本的表单类型页面，用户可以在其中提交数据（请注意我之前的问题，这是关于从移动应用程序发送的非常具体的数据）。为此，我会在 php 页面中运行 HTML5 代码吗？，任何入门指南都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:08:17.923

更准确地说，您将使用 PHP 提供 HTML 页面，并使用 PHP 处理生成的表单提交。它可以是 HTML5 或 XHTML1.1 等。

一个很好的起点是来自[Zend Developer Zone](http://devzone.zend.com/)[的绝对初学者的 PHP](http://devzone.zend.com/6/php-101-php-for-the-absolute-beginner/)。本教程继续讨论数据库访问和表单处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:08:08.417

您可以从阅读一些教程开始，例如[链接](http://bytes.com/topic/php/insights/664241-using-html-forms-pass-data-php)
Google 知道其中很多[google](https://www.google.com/webhp?q=php%20form%20send%20data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:58:51.507

看来你不知道 PHP+HTML 是如何工作的。

PHP 是一个 Pre HTML 处理器。

在手机上使用它与否不会有什么不同。请注意，HTML 5 是 HTML 的“模型”。php只是预处理数据并将其转换为HTML并输出到您的浏览器因此您可以使用它进行开发。

像：

```
<?
echo '<br /> asd asd <p>MESSAGE FROM PHP';
?> 
```

您需要做的是在您的 html 页面中创建一个表单并提交到 php 页面。

像 HTML

```
<form action="process.php" method="post">
  <input type="text" name="username" />
  <input type="submit" value="send" />
</form> 
```

进程.PHP

```
<?php

   $username=$_POST['username']; //now you have the username in a variable

   mysql_connect('ip', 'username', 'password');
   mysql_select_database("mydatabase");
   mysql_query("insert into users (username) values('".$username."')");
?> 
```

所以php处理表单并提交到数据库

# javascript - 在文本上使用鼠标向下获取所有元素

> ID：11622312
> 
> 赞同：0
> 
> 时间：2012-07-24T00:04:52.110
> 
> 标签：javascript

我正在尝试构建所见即所得的编辑器，当用户将鼠标放在 HTML 代码上时遇到问题：

```
<b><i>ABC</i></b> 
```

我想根据标签选择**B / Bold** button 和*I / Italic button 。*

我想要的结果是：

当用户将鼠标放在“ABC”上时，标签应该返回`b`和`i`。

这是我的代码，但它仅适用于一个元素，我需要多个元素的解决方案。

```
var ev = arguments[0] || window.event,
origEl = ev.target || ev.srcElement;

alert(origEl.tagName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:27:31.990

很抱歉成为一项破坏运动，但之前去过那里，我强烈建议不要建立自己的 WYSIWIG 编辑器。这太难了，连谷歌都放弃了*。

试试[http://www.tinymce.com](http://www.tinymce.com)或[http://developer.yahoo.com/yui/editor/](http://developer.yahoo.com/yui/editor/) - 我与 TinyMCE 的合作不多，但我可以证明 YUI 是非常可定制的。

* 排序，请参阅[https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html](https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html)

# php - 我的 PDO 构造错误 - Php

> ID：11622317
> 
> 赞同：3
> 
> 时间：2012-07-24T00:05:38.257
> 
> 标签：php, pdo

这是第 6 行的抱怨：`Warning: PDO::__construct() expects parameter 2 to be string, array given`

连同第 7 行错误：

```
Fatal error: Call to a member function prepare() on a non-object in 
```

我该如何解决？我已经测试了查询，它工作正常..

```
<?php

## Loop through results from mysql
try{
    #connection string
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT thecol FROM thetbl");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        foreach($result as $r){
            $xmlUrl = $r['FW_ArtSrcLink'];
            $ConvertToXml = simplexml_load_file($xmlUrl);
            # -> Setup XML
            $newsStory = $ConvertToXml->channel->item;
        }   

    # -----> Load News Stories
        for($i = 0;$i<sizeof($newsStory); $i++){

    # Source of Article Info-->
            $SrcTitle=$newsStory[$i]->title;
            $SrcLink=$newsStory[$i]->link;

    # Actual News Article Info -->
            $title=$newsStory[$i]->title;
            $desc=$newsStory[$i]->description;

    # Output Results ------------>      
            echo '<hr>';
            echo '<strong>'.'Title:'.$title.'</strong>'.'(via: <a href=\''.$SrcLink.'\'>'.$SrcTitle.'</a>'.'<br />';
            //echo 'Link:'.$link.'<br />';
            echo 'Description'.$desc.'<br>';
            echo '<hr>';
        }
} // try

catch(Exception $e){

    $errorStored = $e->getMessage() . ' on ' .'/errors/fanwire_loop.php';  #where errors are stored
    $pageDateOfError = '/aggregate_looping.php'.date('l jS \of F Y h:i:s A'); #inc the file and date into the file too
    file_put_contents($errorStored,$pageDateOfError, FILE_APPEND | LOCK_EX);
} // catch

#Load in File

/*************************************************

$xmlUrl ="http://sports.espn.go.com/espn/rss/mlb/news";
$ConvertToXml = simplexml_load_file($xmlUrl);

# -> Setup XML
$newsStory = $ConvertToXml->channel->item;

# -----> Load News Stories
for($i = 0;$i<sizeof($newsStory); $i++){

    // Source of Article Info-->
    $SrcTitle=$newsStory[$i]->title;
    $SrcLink=$newsStory[$i]->link;

    // Actual News Article Info -->
    $title=$newsStory[$i]->title;
    $desc=$newsStory[$i]->description;

    echo '<hr>';
    echo '<strong>'.'Title:'.$title.'</strong>'.'(via: <a href=\''.$SrcLink.'\'>'.$SrcTitle.'</a>'.'<br />';
    //echo 'Link:'.$link.'<br />';
    echo 'Description'.$desc.'<br>';
    echo '<hr>';
}

***********************************************/

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T00:08:42.657

您错误地初始化了 PDO 对象，构造函数的第二个参数应该是用户名，而不是选项数组。

```
$dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb',array(PDO::ATTR_PERSISTENT => true)); 
```

应该，

```
$dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb',
                  'yourusername',
                  'yourpassword',
                  array(PDO::ATTR_PERSISTENT => true)); 
```

有关更多信息，请参阅[PDO::__construct() 的 PHP 手册页](http://www.php.net/manual/en/pdo.construct.php)。

您遇到的第二个错误是因为`$dbconn`第一个错误导致对象未正确创建。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-24T00:11:04.327

你能试试吗

```
$dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb');
$q = $dbconn->prepare("SELECT thecol FROM thetbl", array(PDO::ATTR_PERSISTENT => true)); 
```

# css - CSS: position:absolute div inside position:relative div——我做错了什么？

> ID：11622318
> 
> 赞同：0
> 
> 时间：2012-07-24T00:05:56.733
> 
> 标签：css, positioning, css-position

读完这篇文章后：

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

我正在尝试实现垂直堆叠的 div，每个 div 包含位于每个父 div 的最左侧和右侧的 2 个子 div。我在这里找到了相同的概念：

[绝对位置但相对于父级](https://stackoverflow.com/questions/10487292/position-absolute-but-relative-to-parent)

但我不知道为什么我的不工作。可以在这里查看正在进行的文件：

[https://dl.dropbox.com/u/10388895/newPeterSalvatoDotCom/index.html](https://dl.dropbox.com/u/10388895/newPeterSalvatoDotCom/index.html)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:20:13.373

我认为将这些规则设置为`.projectDivs`班级可以完成您想要完成的工作。如果他们没有，请告诉我。

```
.projectDivs {position: relative;
    margin-bottom: 50px;
    clear: both;
    float: left;
    margin-left:auto;
    margin-right: auto;
    width: 100%;
} 
```

我单独设置边距，因为您已经设置了边距底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:21:34.303

解决此问题的一种方法是给出`projectDivs`高度。他们目前崩溃到`0`. 将以下内容添加到您的样式表中，看看会发生什么：

```
.projectDivs{height:600px} 
```

# objective-c - IOS中的CALayer可以在z位置变换吗

> ID：11622322
> 
> 赞同：2
> 
> 时间：2012-07-24T00:06:36.640
> 
> 标签：objective-c, ios, ipad, calayer

我有不同 z 深度的 CAlayers，我想在 z 深度中转换它们以查看我尝试使用此方法的所有层：

```
CATransform3D transform = CATransform3DMakeTranslation(0, 0,-50 );
rootLayer.sublayerTransform = transform; 
```

但没有改变，我尝试使用这种方法

```
CATransform3D transform = CATransform3DRotate(trackball->baseTransform, 30, 30 , 0 , 0 );
rootLayer.sublayerTransform = transform;
for (CALayer* layer in rootLayer.sublayers)
{
    CABasicAnimation *theAnimation;
    theAnimation=[CABasicAnimation animationWithKeyPath:@"zPosition"];
    theAnimation.fromValue=[NSNumber numberWithFloat:-40]; // [NSNumber numberWithFloat:frandom(800, 400)];
    theAnimation.toValue=[NSNumber numberWithFloat:200]; // [NSNumber numberWithFloat:frandom(-300, -100)];
    theAnimation.duration=8;
    theAnimation.repeatCount = 1e100;
    [layer addAnimation:theAnimation forKey:@"zPosition"];
} 
```

它向y方向移动

注意：Ipad 方向是横向的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:06:49.077

恐怕您提供的代码没有发现问题

假设我们有以下结构

```
-> rootLayer
    -> sublayer1
    -> sublayer2
    -> sublayer3
    ...
    -> sublayerN 
```

然后要变得可见，`sublayer2`您需要更改`zPosition`为`sublayer1``rootLayer`

# javascript - Javascript DOM 错误

> ID：11622324
> 
> 赞同：1
> 
> 时间：2012-07-24T00:06:58.590
> 
> 标签：javascript, html, json, google-chrome

这是我的 javascript 代码，我正在尝试使用从服务器收到的数据在 HTML 中创建一个动态列表，数据的类型为“json”

我的 Javascript 片段

```
function addBooks(data) { // USing DOM to populate the tables 

    //var  newdata=document.getElementById('addBooks');
    //newdata.setattribute()

    //get the unordered list

    var newdata = document.getElementById('addBooks');
    var parent = document.getElementById('gBookList');
    //removeChildrenFromNode(parent);

    //create list divider
    var listdiv = document.createElement('li');
    listdiv.setAttribute('id', 'gBookListDiv');
    listdiv.innerHTML = ("Books Found:");
    parent.appendChild(listdiv);
    // (this is where the first error happens)

    //create dynamic list

    for (i = 0; i < data.length; i++) {
        // (this is where the second error happens)

        //create each list item 
        var listItem = document.createElement('li');
        listItem.setAttribute('id', 'gBookListItem');
        parent.appendChild(listItem);
        //var link = document.createElement('a');
        //link.setAttribute('onclick','displayBook(data[i])');
        //link.setAttribute('href','#FindBook)');
        //listItem.appendChild(link);
        var pic = document.createElement('img');
        pic.setAttribute('src', data[i].pictureURL);
        pic.setAttribute('width', '80px');
        pic.setAttribute('height', '100px');
        pic.setAttribute('style', 'padding-left: 10px');
        link.appendChild(pic);
        var brk = document.createElement('br')
        link.appendChild(brk);
        var title = document.createElement('p');
        title.innerHTML = data[i].title;
        title.setAttribute = ('style', 'float:right');
        link.appendChild(title);
        var author = document.createElement('p');
        author.innerHTML = data[i].author;
        link.appendChild(author);
    }
    var list = document.getElementById('gBookList');
    // $(list).listview("refresh");
}

/*function removeChildrenFromNode(node){
            while (node.hasChildNodes()){
                node.removeChild(node.firstChild);
            }
        //}*/ 
```

我的html代码是

```
<!DOCTYPE html>

<head>
   <script ...> 
 <head>                  
<body onLoad="addBooks()">
    <div id="addBooks" class="row-fluid">
        <div id="gBookList">
        </div>
    </div>
</body>
</html> 
```

我不断收到以下错误，这使我无法填充列表，我正在使用 chrome

1) 未捕获的类型错误：无法调用 null 的方法“appendChild”
2) 未捕获的类型错误：无法读取未定义的属性“长度”

我不明白为什么会发生这种情况，因为当我使用警报框进行调试时，.length 命令返回正确的整数（json 对象的数量）。

调用它的函数

```
$.ajax({
    type: 'GET',
    url: ........,
    dataType: "json",
    complete: function (xhr, statusText) {
        alert(xhr.status);
    },
    success: function (data, textStatus, jqXHR) {
        alert(JSON.stringify(data));
        window.location.replace("Page2_updated.html");
        addBooks(data); // Passing JSON to be replaced on page
    },

    function (data, textStatus, jqXHR) {
        alert(data);
        alert('error');
    }, 
```

## });

编辑

在此论坛上提出建议后，我将我的 HTML 文件更改为以下结构

```
<html>
<head>
</head>
<body>
<div id="1" "display:block">
</div>
<div id="2" "display:none">  // no onLoad() anymore!!
</div>
</body>
</html> 
```

我已经在调用函数中编辑了这部分

```
 $.ajax({
        type: 'GET',
        url: ........,
        dataType: "json",
        complete: function (xhr, statusText) {
            alert(xhr.status);
        },
        success: function (data, textStatus, jqXHR) {
            alert(JSON.stringify(data));
            if(document.getElementById(1).style.display == "block"){ 
                document.getElementById(1).style.display = "none"; 
                document.getElementById(2).style.display = "block"; }
            addBooks(data); // Passing JSON to be replaced on page
        },

        function (data, textStatus, jqXHR) {
            alert(data);
            alert('error');
        },
    }); 
```

但我仍然收到以下错误 Uncaught TypeError: Cannot call method 'appendChild' of null Uncaught TypeError: Cannot read property 'length' of undefined

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:31:08.157

这是构建列表的代码的工作版本。与您的版本进行比较，以查看您在标记和代码中犯错的地方。

您的第二个错误的来源是传递给 addBooks 函数的不正确数据（很可能是 null），因此您必须修复它。

Chrome 和 Firebug 具有出色的带有断点的 JavaScript 调试器，因此可以利用它来识别问题：

[http://jsfiddle.net/tgth2/](http://jsfiddle.net/tgth2/)

编辑：

在您对问题发表评论和更新之后，您的问题非常明显：

1.  您的第一个页面正在从服务加载 JSON 数据，但随后会加载`window.location.replace("Page2 Updated.html");`，这会将浏览器发送到新页面（请注意，您是`addBooks(data);`在之后立即调用的。但该代码永远不会执行，因为浏览器已经转到另一个页面
2.  您的第二页包含`<body onload="addBooks();">`在其中，这将导致使用`null`数据调用该函数。这是你的问题的原因。

解决方案：

第一个建议是开始将 jQuery 用于您正在做的所有其他事情，而不仅仅是 AJAX 调用。

其次，您应该将 ajax 调用和结果呈现在一个页面中，因为将浏览器重定向到另一个页面没有任何意义。因为您的 javascript 始终在单个页面的上下文中工作。一旦你做了类似的事情，`window.location.replace(..)`你最终会失去你在当前页面中所做的一切。

如果您进行这些更改，您将看到您的列表加载得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:11:20.180

循环中的这一行创建多个具有相同 ID 的列表项：

```
listItem.setAttribute('id','gBookListItem'); 
```

尝试删除它 - 我认为你不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:16:15.230

这是一个错误：

```
title.setAttribute=('style','float:right'); 
```

做：

```
var title = document.createElement('p');
    title.innerHTML = data[i].title;
    title.style.cssFloat = 'right';
link.appendChild(title); 
```

和

```
var pic = document.createElement('img');
    pic.src = data[i].pictureURL;
    pic.width = '80px';
    pic.height = '100px';
    pic.style.paddingLeft = '10px';
link.appendChild(pic); 
```

ETC......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T00:36:40.140

您是否有可能不小心`addBooks()`在代码中的某个地方调用而没有任何`data`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T01:18:01.637

我试图将其简化为准系统，并且我很确定`link`未定义的事实是您在调用 appendChild 时出现错误的原因。这肯定是我在 Firebug 控制台中发现的第一个错误。以下准系统序列适用于 Firefox（对不起，我没有 Chrome）：

```
 var json =[
        {"pictureURL":"/test1.jpg/","title":"test1"},
        {"pictureURL":"/test2.jpg/", "title":"test2"},
        {"pictureURL":"/test3.jpg", "title":"test3"}
    ];
    function displayBook(title){
        alert(title);
        return false;
    }
    function addBooks(data) {
        var  newdata=document.getElementById('addBooks');
        var parent = document.getElementById('gBookList');
        var listdiv = document.createElement('li');
        listdiv.id = 'gBookListDiv';
        listdiv.innerHTML = "Books Found:";
        parent.appendChild(listdiv);
        for(var i=0;i<data.length;i++){
            var listItem = document.createElement('li');
            listItem.id = 'gBookListItem-' + i;
            parent.appendChild(listItem);
            var link = document.createElement('a');
            link.id = listItem.id + "-link";
            link.href = '#FindBook';
            link.innerHTML = data[i].title;
            listItem.appendChild(link);
            link.setAttribute("onclick", "return displayBook('" + data[i].title + "');");
            var pic = document.createElement('img');
            pic.src = data[i].pictureURL;
        }
        var list = document.getElementById('gBookList');
    } 
```

我从这个答案中发现[JavaScript: changed the value of onclick with or without jQuery](https://stackoverflow.com/questions/826628/javascript-changing-the-value-of-onclick-with-or-without-jquery)我必须使用 setAttribute 来添加 onclick 处理程序。我习惯于`id`直接添加其他属性，如 adeneo 提到的，而不调用 setAttribute。

# html - HTML5 Outliner 问题（小站点，不用担心）

> ID：11622325
> 
> 赞同：0
> 
> 时间：2012-07-24T00:06:59.917
> 
> 标签：html, outliner

当我检查我的网站的轮廓时，一个名为“联系表单”的页脚下方的 h2 标签正在获得最高账单，而开头的 h1 则被隐藏在下方。知道这是为什么吗？

[http://www.windupwebdesign.com](http://www.windupwebdesign.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:18:59.850

弄清楚了。

事实证明，您不能将“部分”列为列表中的第一件事，这是有道理的。节是节，而不是包装器。因此，如果您先放置一个部分，然后放置一个 h1，它将将该部分列为无标题。

# actionscript-3 - AS3 Starling Framework Texture Atlas TypeError #1007

> ID：11622329
> 
> 赞同：0
> 
> 时间：2012-07-24T00:07:23.733
> 
> 标签：actionscript-3, error-handling, sprite-sheet, starling-framework

我是 Starling 框架的新手，目前正在学习如何使用它。

我已经使用 starling 框架从嵌入的 PNG 文件创建了纹理，该框架可以完美地工作并显示在屏幕上，但我正在尝试让 spritesheet（Texture Atlas）工作，它给了我这个：

“错误 #1007：在非构造函数上尝试实例化。”

从我所做的所有研究中，我拥有的代码应该可以工作。

这是我的资产类中的适用代码。

```
public class Assets
{
    [Embed(source="assets/sky.png")]
    private static var SKY_CLASS:Class;
    public static var SKY:Texture;

    [embed(source="assets/generalsheet.png")]
    private static var GENERAL_SHEET_CLASS:Class;       
    [embed(source="assets/generalsheet.xml", mimeType="application/octet-stream")]
    private static var GENERAL_ATLAS_CLASS:Class;
    public static var GENERAL_SHEET:TextureAtlas;

    public static function init():void
    {
        SKY = Texture.fromBitmap(new SKY_CLASS());
        GENERAL_SHEET = new TextureAtlas(Texture.fromBitmap(new GENERAL_SHEET_CLASS()), XML(new GENERAL_ATLAS_CLASS())); // this is where Flash Builder tells me there is an error
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:45:48.097

您只需将`Embed`标签写成**大写**，只需更改：

```
[embed(source="assets/generalsheet.png")]
private static var GENERAL_SHEET_CLASS:Class;       
[embed(source="assets/generalsheet.xml", mimeType="application/octet-stream")]
private static var GENERAL_ATLAS_CLASS:Class; 
```

到：

```
[Embed(source="assets/generalsheet.png")]
private static var GENERAL_SHEET_CLASS:Class;       
[Embed(source="assets/generalsheet.xml", mimeType="application/octet-stream")]
private static var GENERAL_ATLAS_CLASS:Class; 
```

附带说明一下，类名通常用**UpperCamelCase**编写，而**ALL_CAPITALIZED**是为常量保留的。变量名通常用**lowerCamelCase**或**lowercase_separated_by_underscore**书写。这是大多数 ActionScript3（和 Java）程序员遵循的约定，如果您坚持下去，您的代码将更具可读性，因此下次应该更容易为您提供帮助；）

所以我推荐：

```
[Embed(source="assets/sky.png")]
private static var SkyClass:Class;

public static var sky:Texture;

[Embed(source="assets/generalsheet.png")]
private static var GeneralSheetClass:Class;

[Embed(source="assets/generalsheet.xml", mimeType="application/octet-stream")]
private static var GeneralAtlasClass:Class;

public static var general_sheet;

public static function init():void
{
    sky = Texture.fromBitmap(new SkyClass());

    general_sheet = new TextureAtlas(Texture.fromBitmap(new GeneralSheetClass()), XML(new GeneralAtlasClass()));
} 
```

# c# - C#：将 OpenFileDialog 中的数据路径存储到变量中？

> ID：11622330
> 
> 赞同：1
> 
> 时间：2012-07-24T00:07:32.993
> 
> 标签：c#, forms, variables

在以下显示的 c# 类中`Windows.Forms.OpenFileDialog`，我如何将数据路径存储到名为的变量中`m_settings`？

```
private SomeKindOfData m_settings;
public void ShowSettingsGui()
{
    System.Windows.Forms.OpenFileDialog ofd = new System.Windows.Forms.OpenFileDialog();
    ofd.Multiselect = true;
    ofd.Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*";
    if (ofd.ShowDialog() == DialogResult.OK)
    {
        string[] filePath = ofd.FileNames;
        string[] safeFilePath = ofd.SafeFileNames;
    }
        m_settings = //<-- ?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:08:31.760

这应该可以解决问题：

```
m_settings = ofd.FileName; 
```

编辑：实际上，现在我不确定您是否想要文件夹路径。在这种情况下：

```
m_settings = Path.GetDirectoryName(ofd.FileName); 
```

# java - 如何使用 jbuttons 和 actionlistener 绘制椭圆？

> ID：11622333
> 
> 赞同：0
> 
> 时间：2012-07-24T00:08:08.617
> 
> 标签：java, swing, japplet, jcreator

我查看了可能已经回答的其他一些问题，但我没有看到任何与我相关的内容，或者至少我理解的内容。

我正在尝试创建一个交通信号灯，我遇到的问题是当我单击一个按钮时实际绘制的红色绿色和黄色圆圈。一个快速的答复将不胜感激，谢谢。

```
public class TrafficLight extends JApplet implements ActionListener {

   private Image Hayden;

    JButton btn1;

    JButton btn2;

    JButton btn3;

    int x;

public void init() {

    setLayout(new FlowLayout());

    btn1 = new JButton("Stop");

    btn2 = new JButton("Wait");

    btn3 = new JButton("Go");

    Boolean Answer;

    add(btn1);

    btn1.addActionListener(this);

    add(btn2);

    btn2.addActionListener(this);

    add(btn3);

    btn3.addActionListener(this);

    Hayden = getImage(getDocumentBase(), "49.jpg");
}

public void actionPerformed(ActionEvent event){

    if (event.getSource()==btn1){
        boolean one = true;
    }
    if (event.getSource()==btn2){
        boolean two = true;
    }
    if (event.getSource()==btn3){
        boolean three = true;
    }
    repaint();

}
public void paint(Graphics g) {

    super.paint(g);

    g.setColor(Color.black);

    g.drawRect(0, 400, 700, 200);//creating the rectangle
    g.fillRect(0, 400, 700, 200);

    g.setColor(Color.black);
    g.drawRect(645, 0, 55, 155);//creating the rectangle
    g.fillRect(645, 0, 55, 155);

    g.setColor(Color.white);
    g.drawOval(650, 5, 45, 45);//creating the oval
    g.fillOval(650, 5, 45, 45);

    g.setColor(Color.white);
    g.drawOval(650, 55, 45, 45);//creating the oval
    g.fillOval(650, 55, 45, 45);

    g.setColor(Color.white);
    g.drawOval(650, 105, 45, 45);//creating the oval
    g.fillOval(650, 105, 45, 45);
    if (one == true){
        g.setColor(Color.red);
        g.drawOval(650,5,45,45);
    }
    else if (two == true){
        g.setColor(Color.red);
        g.drawOval(650,55,45,45);
    }
    else if (three == true){
        g.setColor(Color.red);
        g.drawOval(650,105,45,45);
    }
    g.drawImage(Hayden, 0, 500, 150, 100, this);//create the image

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:26:11.830

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:07:36.120

您需要注意的一件事是变量范围。布尔值一、二和三在它们各自的 if 语句中都有一个范围。如果您创建这些布尔实例变量（在类的顶部创建变量，如 int x 和您的按钮），那么它们的范围是整个类，并且可以在每个方法中引用它们。

```
JButton btn2;
JButton btn3;
boolean one, two three; 
```

截至目前，这些布尔值不能被任何不在它们各自的 if 语句中的东西访问，包括 paint 方法。

# mocking - 模拟抽象类的默认类型变量

> ID：11622337
> 
> 赞同：1
> 
> 时间：2012-07-24T00:08:35.667
> 
> 标签：mocking, abstract-class, default, jmockit

假设我有一个由其子类扩展的抽象类，我想模拟一个用于超类中受保护数据类型的类。问题是需要模拟的类是默认数据类型，因此无法在包外访问。让我举一个例子来说明我的观点。谢谢你的帮助。

```
 class protectedVariableClass{

    public SomeObject someObject1;
    public SomeObject someObject2;  
    }

    public abstract class superClass {

    protected protectedVariableClass protectedVariableClass;

    ..................
    .................
    }

    public class subClass extends superClass {

    protected boolean someMethod() {
    protectedVariableClass.someObject1.printValue;
    }

    } 
```

现在，当我尝试使用 Jmockit 对其进行测试时，我无法为超类的受保护变量创建模拟。

```
 public class SubClassTest{

    @Mocked
    private protectedVariableClass mockedObject; // Cannot access the class with default data type outside package.

    @Test
    public void testClass {
    subClass s1 = new subClass();
    s1.someMethod();
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:22:57.007

您可以使用 的[`realClassName`](http://jmockit.googlecode.com/svn/trunk/www/javadoc/mockit/Mocked.html#realClassName())属性`@Mocked`，但最好的解决方案是*不要*模拟不可访问的类。

您要测试的某些类使用包私有类这一事实通常只是一个实现细节，因此它不应出现在测试代码中。这同样适用于`private`被测试代码调用的方法：它们不应该被模拟。

# android - Android MapView MapController stopAnimation 不停止动画

> ID：11622340
> 
> 赞同：2
> 
> 时间：2012-07-24T00:09:08.307
> 
> 标签：android, android-mapview

好吧，我正在 Android 中开发一个地理定位应用程序。在第一次运行时，我们将地图居中在当前位置，然后用户可以自由缩放和平移，但我们有一个按钮可以动画地图并将其居中返回到实际位置。

问题是这只会在地图是静态的时候发生：如果用户滚动地图并让它惯性滚动，这个按钮将在动画停止之前不起作用。

这是代码。

```
mapView.getController().stopAnimation(false); //this aint working as expected
mapView.getController().animateTo(myLocationOverlay.getMyLocation()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:19:34.953

This works for me:

```
public void centerCurrentClickHandler(View v) {
    if (hasCurrentPosition) {
        GeoPoint point = new GeoPoint(currentLatitudeE6, currentLongitudeE6);
        mapController.animateTo(point);
    }
}

public void centerFlagClickHandler(View v) {
    if (hasPushpinPosition) {
        GeoPoint point = new GeoPoint(pushpinLatitudeE6, pushpinLongitudeE6);
        mapController.animateTo(point);
    }
} 
```

# javascript - AJAX 加载具有不同评论的多篇文章

> ID：11622341
> 
> 赞同：1
> 
> 时间：2012-07-24T00:09:16.810
> 
> 标签：javascript, jquery, ajax

我已经设法使用 Ajax 刷新整个页面或单个元素。但是，我现在正试图随时随地更新我的文章评论。

我有一个文章页面，它输出所有文章。在每篇文章的下方，都有一个输出属于该文章的评论的表格，以及一个用于撰写新评论的表格。

我如何同时刷新这些表中的每一个？

我一直在看这个，但我无法正确实现它：

```
$(document).ready(function(){
   //ajax.php is called every second to get view count from server
   var ajaxDelay = 1000;
   var ids = [];
   $('[id^="zone-"]').each( function() {
      ids.push( this.id );
   });
   setInterval(function(){
            $.ajax({
                url: 'ajax.php',
                dataType: 'json',
                type: 'get',
                data: { refresh: 'hits', ids: ids },
                success: function(data) {
                    for (var key in data) {
                        var div = $('#zone-' + key).html( data[key] );
                    }
                }
            });
    }, ajaxDelay);
}); 
```

[jQuery AJAX 实时更新同一页面上的多个元素](https://stackoverflow.com/questions/1277161/jquery-ajax-live-update-on-multiple-elements-on-the-same-page)

# ajax - Hashbang URL 使网站难以被 Google 抓取？

> ID：11622346
> 
> 赞同：3
> 
> 时间：2012-07-24T00:10:22.053
> 
> 标签：ajax, seo, hashbang

我们的代理机构建立了一个动态网站，该网站使用了大量的 AJAX 交互和 #! (hashbang) 网址：[http ://www.gunlawsbystate.com/](http://www.gunlawsbystate.com/)

这是一本很长的书，您可以滚动浏览，地址栏中的 URL 会动态变化。我们必须支持 IE，所以请不要建议使用 pushState - hansbang 是我们目前唯一的选择。

左侧边栏中有一个导航，其中包含指向本书所有章节的链接。

链接示例： [http ://www.gunlawsbystate.com/#!/federal-properety/national-parks-and-wildlife-refuges/](http://www.gunlawsbystate.com/#!/federal-properety/national-parks-and-wildlife-refuges/)

我们期待谷歌抓取这个：http://www.gunlawsbystate.com/?_escaped_fragment_=/federal-properety/national-parks-and-wildlife-refuges/ 这是该部分的完整 html 快照。（+ 有指向 www.gunlawsbystate.com/#!/federal-properety/national-parks-and-wildlife-refuges/ii-change-in-the-law/ => www.gunlawsbystate.com/ 等小节的链接?_escaped_fragment_=/federal-properety/national-parks-and-wildlife-refuges/ii-change-in-the-law/）。

根据 Google 的规范（developers.google.com/webmasters/ajax-crawling/docs/specification），这一切看起来都是完整的。该网站目前运行约 3 个月。主页每 10-15 天重新编入索引。

问题在于，由于某种原因，Google 无法正确抓取 hashbang URL。看起来谷歌只是“不喜欢”这些网址。

www.google.ru/search?&q=site%3Agunlawsbystate.com ：只有 67 个页面被编入索引。请注意，Google 索引的大多数页面都有“正常”的 URL（主要是 wordpress 博客文章、类别和标签），只有 5-10% 的结果页面是 hashbang URL，尽管有 400 多个具有独特内容的书籍部分 Google 应该真的很喜欢它是否正确爬行。

有人可以给我一个建议，为什么谷歌不能正确抓取我们的书页？任何帮助将不胜感激。

*PS 对于不可点击的链接，我很抱歉——stackoverflow 不允许我发布超过 2 个链接。*

**UPD。**该站点地图已在不久前提交给谷歌。谷歌网站管理员工具说，提交了 518 个 URL，只有 62 个 URL 被编入索引。此外，在网站管理员工具的“索引状态”页面上，我看到有 1196 个页面*曾经爬过*；1071 页*未选中*。它清楚地指出，由于某种原因，谷歌没有索引 #! 它经常访问的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T18:47:31.953

你错过了一些东西。首先，您需要一个元标记来告诉 google 可以通过不同的 url 访问哈希 URL。

```
<meta name="fragment" content="!"> 
```

接下来，您需要将每个 url 的映射版本提供给 googlebot。

当谷歌访问时：

[http://www.gunlawsbystate.com/#!/federal-regulation/airports-and-aircraft/ii-boarding-aircraft/](http://www.gunlawsbystate.com/#!/federal-regulation/airports-and-aircraft/ii-boarding-aircraft/)

它将改为爬行：

[http://www.gunlawsbystate.com/?_escaped_fragment_=federal-regulation/airports-and-aircraft/i-introduction/](http://www.gunlawsbystate.com/?_escaped_fragment_=federal-regulation/airports-and-aircraft/i-introduction/)

为此，您需要使用 PHP 或 ASP 之类的东西来提供正确的页面。如果您可以正确使用管道，则 Asp.net 路由也可以使用。有些服务实际上会为您创建这些“快照”版本，然后您的元标记将指向他们的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T06:31:50.203

由于它已被 Google 弃用，现在 Google 无法访问 hashbang URL 下的内容。

根据研究，谷歌现在避免使用转义片段 URL，并建议创建单独的页面而不是使用 HashBang。

所以我认为 PushState 是在这种情况下可以使用的另一个选项。

# java - 我需要用 try/catch/finally 块包围 fileInputStream.close 吗？它是如何完成的？

> ID：11622348
> 
> 赞同：8
> 
> 时间：2012-07-24T00:10:35.810
> 
> 标签：java, oop, try-catch-finally

我有以下 Java 类，它做一件事，从`config.properties`.

当需要关闭 时`fileInputStream`，我想我在 Wikipedia 上读到，将它放在 finally 块中是件好事。因为它在 try/catch 块中确实可以正常工作。

你能告诉我更正以进入`fileInputStream.close()`最后的部分吗？

ConfigProperties.java 包库；

```
import java.io.FileInputStream;
import java.util.Properties;

public class ConfigProperties {

    public FileInputStream fileInputStream;
    public String property;

    public String getConfigProperties(String strProperty) {

        Properties configProperties = new Properties();
        try {

            fileInputStream = new FileInputStream("resources/config.properties");
            configProperties.load(fileInputStream);
            property = configProperties.getProperty(strProperty);
            System.out.println("getConfigProperties(" + strProperty + ")");

            // use a finally block to close your Stream.
            // If an exception occurs, do you want the application to shut down?

        } catch (Exception ex) {
            // TODO
            System.out.println("Exception: " + ex);
        }
        finally {
            fileInputStream.close();
        }

        return property;
    }
} 
```

解决方案是否只能按照 Eclipse 的建议执行并在 finally 块中执行？

```
finally {
    try {
        fileInputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-24T00:13:35.407

是的，这是 Java 7 之前的常见解决方案。但是，随着 Java 7 的引入，现在有了[`try`-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)`try`语句，当块退出时，它们会自动关闭所有声明的资源：

```
try (FileInputStream fileIn = ...) {
    // do something
} // fileIn is closed
catch (IOException e) {
    //handle exception
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T00:12:42.623

因为`FileInputStream.close()`抛出一个 IOException，并且 finally{} 块没有捕获异常。因此，您需要捕获它或声明它才能编译。Eclipse 的建议很好；在 finally{} 块中捕获 IOException。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T00:18:37.320

标准方法是：

```
FileInputStream fileInputStream = null;
try {
    fileInputStream = new FileInputStream(...);
    // do something with the inputstream
} catch (IOException e) {
    // handle an exception
} finally { //  finally blocks are guaranteed to be executed
    // close() can throw an IOException too, so we got to wrap that too
    try {
        if (fileInputStream != null) {
            fileInputStream.close();
        }        
    } catch (IOException e) {
        // handle an exception, or often we just ignore it
    }
} 
```

# python - 导入模块属性错误，LPTHW ex47

> ID：11622350
> 
> 赞同：1
> 
> 时间：2012-07-24T00:10:44.593
> 
> 标签：python, attributeerror

我正在执行“Learn Python the hard way”中的[示例 47](http://learnpythonthehardway.org/book/ex47.html)。

这是我的代码：

```
from nose.tools import*
from ex47.game import Room

def test_room():

    gold = Room("GoldRoom",

                """This room has gold in it you can grab. there's a door to the north.""")

    assert_equal(gold.name, "GoldRoom")
    assert_equal(gold.paths, {})

def test_room_paths():

    center = Room("Center", "Test room in the center.")
    north = Room("North", "test room in the north.")
    south = Room("south", "test room in the south.")

    center.add_paths({'north': north, 'south': south})
    assert_equal(center.go('north'), north) 
    assert_equal(center.go('south'), south)

def test_map():

    start = Room("Start", "You can go west and down a hole.")
    west = Room("Trees", "There are trees here, you can go east.")
    down = Room("Dungeon", "It's dark down here, you can go up.")

    start.add_paths({'west': west, 'down': down})
    west.add_paths({'east': start})
    down.add_paths({'up': start})

    assert_equal(start.go('west'), west)
    asset_equal(start.go('west').go('east'), start)
    assert_equal(start.go('down').go('up'), start) 
```

但是，当使用nosetest 测试此代码时，出现错误：

```
Traceback <most recent call last>:
File "c:\Python31\lib\site-packages\nose\case.py", line 197,in runtest
    self.test<*self.arg>
File "C:\path\Ex47\skeleton\tests\ex47_tests.py", line 28, in test_map
    start.add_paths<{'west': west, 'down':down>}
AttributeError: 'Room' object has no attribute 'add_paths' 
```

* * *

```
Ran 3 tests in 0.030s

FAILED <errors=2> 
```

这似乎很荒谬，因为`add_paths`在`test_room_paths()`.

我正在使用 Python 3.1、Windows 7。

这是`game.py`以防万一您需要它的代码：

```
class Room(object):

    def __init__(self, name, description):
        self.name = name
        self.description = description
        self.paths = {}

    def go(self, direction):
        return self.paths.get(direction, None)

    def add_paths(self, paths):
        self.paths.update(paths) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:41:45.320

您说，“add_paths 在 test_room_paths() 中运行良好”，但您假设测试是按照您编写它们的顺序运行的。它们通常按字母顺序运行，这意味着 test_room_paths 尚未执行。

您的 Room 代码看起来不正确，您在`def add_paths`下缩进`def __init__`，意思`add_paths`是在 中本地定义的函数`__init__`，而不是您类中的另一个方法。确保`def`您班级中的所有关键字都排成一行。

# ios - 使 UITableViewCell 可编辑

> ID：11622354
> 
> 赞同：1
> 
> 时间：2012-07-24T00:11:10.493
> 
> 标签：ios, text, uitableview, edit, cells

鉴于[Apple 教程](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html#//apple_ref/doc/uid/TP40011318-CH5-SW3)中的详细视图，如何使详细视图中的单元格可编辑？不只是添加或删除单元格，而是修改单元格值中的文本（单元格中的右标签）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:25:04.993

在您的 UI 和代码中，将 UILabel 对象更改为 UITextField，以相同的方式连接它们。他们将允许编辑这些字段中的文本。

然后，您还必须连接您的 viewController 以在用户更改它们时（通过委托设置）获取它们，并设置您的模型以接受来自您的委托实现的数据。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T03:17:27.393

有一个 pod：[https ://github.com/fulldecent/FDTextFieldTableViewCell](https://github.com/fulldecent/FDTextFieldTableViewCell)

以下是相关代码：

```
 self.detailTextLabel?.isHidden = true
    self.contentView.viewWithTag(3)?.removeFromSuperview()
    self.textField.tag = 3
    self.textField.translatesAutoresizingMaskIntoConstraints = false
    self.contentView.addSubview(self.textField)
    self.addConstraint(NSLayoutConstraint(item: self.textField, attribute: .leading, relatedBy: .equal, toItem: self.contentView, attribute: .leading, multiplier: 1, constant: 50))
    self.addConstraint(NSLayoutConstraint(item: self.textField, attribute: .top, relatedBy: .equal, toItem: self.contentView, attribute: .top, multiplier: 1, constant: 8))
    self.addConstraint(NSLayoutConstraint(item: self.textField, attribute: .bottom, relatedBy: .equal, toItem: self.contentView, attribute: .bottom, multiplier: 1, constant: -8))
    self.addConstraint(NSLayoutConstraint(item: self.textField, attribute: .trailing, relatedBy: .equal, toItem: self.contentView, attribute: .trailing, multiplier: 1, constant: -16))
    self.textField.textAlignment = .right 
```

# vb.net - C# DLLImport 转换为 VB.NET DLLImport ......我错过了什么？

> ID：11622356
> 
> 赞同：4
> 
> 时间：2012-07-24T00:11:33.770
> 
> 标签：vb.net, interop, pinvoke, dllimport, c#-to-vb.net

在 C# 中，我有这个：

```
[DllImport("user32.dll", EntryPoint = "GetDesktopWindow")]
    public static extern IntPtr GetDesktopWindow(); 
```

因此，我尝试转换为 VB.NET：

```
<DllImport("user32.dll", EntryPoint:="GetDesktopWindow")>
Function GetDesktopWindow() As IntPtr
End Function 
```

但我收到一个错误...“Imports System.Runtime.InteropServices.DllImportAttribute 不能应用于实例方法。”

有人可以解释我需要做什么来解决这个问题，甚至更好的是，告诉我为什么？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T00:22:08.387

您忘记将`static`关键字从 C# 声明转换为 VB.NET。这就是错误消息告诉您的内容。除非您有静态方法，否则您声明的是实例方法，并且`DllImportAttribute`不能应用于实例方法。

VB.NET 等效`static`于`Shared`. 所以你的声明应该是这样的：

```
<DllImport("user32.dll", EntryPoint:="GetDesktopWindow")>
Shared Function GetDesktopWindow() As IntPtr
End Function 
```

我觉得有必要指出其他一些事情：

*   `EntryPoint`当您的函数声明具有相同名称时，无需指定。并不是说这样做会造成任何伤害，但我觉得如果你省略它，它可以减少重复并减少出错的机会。
*   像这样的 P/Invoke 声明通常应该进入具有类似名称的静态类`NativeMethods`（StyleCop 强制执行此准则）。在 VB.NET 中，静态类称为模块。所以它看起来像这样：

    ```
    Module NativeMethods
        <DllImport("user32.dll")>
        Shared Function GetDesktopWindow() As IntPtr
        End Function
    End Module 
    ```

*   在旧版本的 VB（VB 10 之前，随 VS 2010 一起提供）中，您需要换行符才能将函数声明分成多行。那些丑陋的疣使它看起来像这样：

    ```
    Module NativeMethods
        <DllImport("user32.dll")> _
        Shared Function GetDesktopWindow() As IntPtr
        End Function
    End Module 
    ```

最后，**要非常小心如何使用**函数返回的桌面窗口`GetDesktopWindow`！[很多人滥用它](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/24/79212.aspx)，而且大多数时候当我看到人们试图找回它的句柄时，这表明他们已经做错了。（不是说你是，因为我看不到你的其余代码，只是需要注意的事情！）

# opencv - Linker error LNK2019 (unresolved symbol) with OpenCV 2.4, CvBlob library, and Visual Studio 2012 RC

> ID：11622359
> 
> 赞同：2
> 
> 时间：2012-07-24T00:12:24.130
> 
> 标签：opencv, visual-studio-2012

I've spent the last hour or two trying to hunt this problem down and can't seem to get it right. I am using OpenCV with MS VS 2012 RC, and to this point it has worked quite well (one bug dealing with the newer Mat container, but fine otherwise). I have a previously written application I am trying to port (from GCC/G++), which used the cvblob.dll library from [here](http://code.google.com/p/cvblob/). I have recompiled the cvblob library with VS2012 (my previous version was compiled with MinGW and worked flawlessly), and managed to create both a DLL and an import library .LIB.

The application compiles properly, but the one spot where I use the cvblob library is now my source of error, because the linker cannot find the symbol for the cvLabel function in the library. This is the complete error message I get from VS2012:

ConsoleApplication1.cpp 1> Generating Code... 1>imageinput.obj : error LNK2019: unresolved external symbol _cvLabel referenced in function "public: class std::vector,class std::allocator > > _*thiscall ImageInput::getROI(class cv::Mat,class cv::Mat)" (?getROI@ImageInput@@QAE?AV?$vector@V?$Rect*@H@cv@@V?$allocator@V?$Rect_@H@cv@@@std@@@std@@VMat@cv@@0@Z) 1>C:\Users\Jake\Documents\Visual Studio 2012\Projects\ConsoleApplication1\Debug\ConsoleApplication1.exe : fatal error LNK1120: 1 unresolved externals

I'm not certain whether this is a problem with the cvblob library itself, my current binary for it, or just the process I used to compile it. I will gladly furnish any information I can upon request. Thanks in advance for your advice!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:10:58.897

您显然没有在项目设置中链接所需的库。尝试在项目的链接器属性中添加所有 OpenCV/CvBlob 库。请参阅[文档](http://msdn.microsoft.com/en-us/library/799kze2z%28v=vs.80%29.aspx)。

也看看[这个讨论](https://stackoverflow.com/questions/10474218/unresolved-external-symbol-error-when-importing-libraries-for-opencv2-3-in-visua)。

# java - How to only output one Pass/Fail result when test is rerun?

> ID：11622365
> 
> 赞同：2
> 
> 时间：2012-07-24T00:12:58.023
> 
> 标签：java, unit-testing, testng, reportng

I'm using the IRetryAnalyzer class in TestNG in order to relaunch tests that fail (up to 5 attempts). Right now if I run a test and it fails three times before passing, it says:

> Tests run: 4, Failures: 3, Errors 0, Skipped 0.

What I want the results to show is:

> Tests run: 1, Failures: 0, Errors 0, Skipped 0.

Basically, I don't want it to count as a failure unless it fails all 5 reruns. How do I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T22:26:37.773

我刚刚做到了这一点，我是如何做到的，我认为上次成功之前的一切。我这样做是为了允许 3 次重新运行，这是我使用的代码：

```
import org.testng.IRetryAnalyzer;
import org.testng.ITestResult;
import org.testng.Reporter;

public class RetryAnalyzer implements IRetryAnalyzer {
  private int count = 0;
  private int maxCount = 2;

  @Override
  public boolean retry(ITestResult result) {
    if (!result.isSuccess()) {
      if (count < maxCount) {
        count++;
        result.setStatus(ITestResult.SUCCESS);
        String message = Thread.currentThread().getName() + ": Error in " + result.getName() + " Retrying "
            + (maxCount + 1 - count) + " more times";
        System.out.println(message);
        Reporter.log(message);
        return true;
      } else {
        result.setStatus(ITestResult.FAILURE);
      }
    }
    return false;
  }
} 
```

这里的关键是当我还在重试时，我将结果设置为成功

```
result.setStatus(ITestResult.SUCCESS) 
```

当尝试已经完成但仍然失败时，将其设置为失败

```
result.setStatus(ITestResult.FAILURE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:07:08.673

由于没有人回复，我试一试。

只是我在阅读您的帖子时产生的随机想法，而我正在寻找解决问题的方法...

`@AfterTest`你可以通过你的方法得到你的测试结果`ITestResult result`

```
@AfterMethod
public void AfterMethod_CheckForFailure(ITestResult result, Method m) 
```

`@AfterMethod`当带有`@Test`注解的方法完成时调用an 。能够从`static`具有成员的类中读取当前迭代`static`，如果它`<5`然后使用

```
result.setStatus(ITestResult.SUCCESS); // or what ever status you want
setCurrentTestResult(result); 
```

不知道这是否有效，但在我看来它可以:) 祝你好运

# ruby-on-rails - 同一类的Rails多个belongs_to

> ID：11622368
> 
> 赞同：7
> 
> 时间：2012-07-24T00:13:21.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-models

假设我有一个 A 类型的模型和一个 B 类型的模型，其中包含字段 a_id a2_id。我想要类似的东西：

```
class B
  belongs_to :a
  belongs_to :a (using a2)
end 
```

有谁知道我会怎么做？我正在尝试使用 B 类来链接我的数据库中的类似对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T00:25:12.500

你可以这样做

```
class B
  belongs_to :a
  belongs_to :a2, foreign_key: 'a2_id', class_name: 'A'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T00:27:02.403

甚至这个：

```
class B < ActiveRecord::Base
  attr_accessible :a2_id, :a_id, :name
  belongs_to :a
  belongs_to :a2, class_name: "A"
end 
```

# java - 需要从 JFrame 获取输入并在不同的类中使用它（Pro-Engineer 的 J-link 应用程序）

> ID：11622370
> 
> 赞同：2
> 
> 时间：2012-07-24T00:13:45.370
> 
> 标签：java, swing, jframe, jlink

我有这种方法可以在名为 MaterialProperties 的类中打印和设置实体对象的材料属性，该类具有 printMaterial 和 setMaterial 方法。

```
public void Btn3_callback ( ) throws Exception {
        Model model = session.GetCurrentModel();

        if (model == null) {
            mesg = "No Model Selected!!";
            //TextField.Area("No Model Selected!!");
            System.exit(0);
        }
        else {
            Solid solid= (Solid) model;
            String newMaterial="copper";//user input for new Material name
            printMaterial(solid);//printMaterial print the Material properties of the Solid object
            setMaterial(solid,newMaterial);//setMaterial sets the Material properties of the Solid object to the material entered
        }
    } 
```

我需要获取 newMaterial 的用户输入，而不是对其进行硬编码。我需要做的是显示所有可用的材料类型，以便用户可以选择所需的材料。所以我尝试使用 JFrame 来做到这一点。这是我的代码：

```
public class MaterialWindow {

    JFrame frame = new JFrame("Material Selection");
     public MaterialWindow(){
             // Directory path here
      String path = "W:\\materials"; 

      JFrame frame = new JFrame("Material Selection");
      JPanel panel = new JPanel(new GridLayout(0, 4));
      ButtonGroup bg = new ButtonGroup();

      String files;
      File folder = new File(path);
      File[] listOfFiles = folder.listFiles(); 
      JRadioButton  button;

      for (int i = 0; i < listOfFiles.length; i++) 
      {

       if (listOfFiles[i].isFile()) 
       {
       files = listOfFiles[i].getName();
           if (files.endsWith(".mtl") || files.endsWith(".MTL"))
           {

              button = new JRadioButton(files);
              panel.add(first,BorderLayout.CENTER);
              panel.revalidate(); 

              bg.add(button);

              first.addActionListener(new MyAction());

            }
         }
      }

 frame.add(panel, BorderLayout.NORTH);
 frame.getContentPane().add(new JScrollPane(panel), BorderLayout.CENTER);
 frame.setSize(1000, 400);
 frame.setVisible(true);
 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 }

public class MyAction implements ActionListener{

    public void actionPerformed(ActionEvent e){

        String newMaterial =e.getActionCommand();
        String[] split = newMaterial.split("\\.");
        newMaterial = split[0];
        newMaterial.trim();
              //set the newMaterial for btn3_callback OR call the setMaterial method of MaterialPropeties class
        frame.dispose();
    }

}

} 
```

现在的问题是如何在我的 Btn3_callback() 函数中使用从单选按钮中选择的 newMaterial 字符串到 newMaterial？当我在 MyAction 类中为 newMaterial 创建一个 getString() 方法并使用它 Btn3_callback 它总是返回 null；

有什么办法可以做到这一点吗？或者我可以用什么不同的方式来实现这个想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:33:04.153

使用 a`JOptionPane`代替框架。将选项列表 ( `JList`..or `JComboBox`) 放在选项窗格中，并在返回后查询组件（窗格已关闭），以获取所选对象。

## EG 使用 JComboBox

应在 EDT 上创建和更改 GUI（不包括电池）。

```
import java.io.File;
import javax.swing.*;

public class QuickTest {

    public static void main(String[] args) throws Exception {
        File[] files = new File(System.getProperty("user.home")).listFiles();
        JFrame f = new JFrame("Faux J-Link");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        JEditorPane jep = new JEditorPane();
        f.add(new JScrollPane(jep));        
        f.setSize(600,400);
        f.setLocationByPlatform(true);
        f.setVisible(true);

        JComboBox choices = new JComboBox(files);
        int result = JOptionPane.showConfirmDialog(f, choices);
        if (result==JOptionPane.OK_OPTION) {
            System.out.println("OK");
            File file = files[choices.getSelectedIndex()];
            jep.setPage(file.toURI().toURL());
        }
    }
} 
```

# jakarta-ee - 创建 Pax Wicket（蓝图）应用程序

> ID：11622371
> 
> 赞同：2
> 
> 时间：2012-07-24T00:13:49.290
> 
> 标签：jakarta-ee, osgi, wicket-1.5, apache-karaf, blueprint-osgi

它仍然是一个请求：[Pax Wicket 的 Maven Archetype（蓝图）](http://team.ops4j.org/browse/PAXWICKET-234)

我想知道生成 Pax Wicket - 蓝图应用程序的最快方法是什么（或如何将现有的 Wicket 应用程序转换为 Pax Wicket 蓝图）

我看到的唯一选择是下载示例并进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:47:34.370

[为 Karaf 创建蓝图原型](http://karaf.apache.org/manual/2.2.5/developers-guide/archetypes.html)并将 Pax Wicket 依赖项添加到 pom.xml 是迄今为止创建骨架 Pax Wicket 应用程序的最快方法。

这[就是](https://github.com/akiwarheit/KeeboisAdventures/blob/master/KeeboisAdventures.md)我的做法。

# sql - 如何在关系上使用 sqlalchemy 版本控制

> ID：11622374
> 
> 赞同：5
> 
> 时间：2012-07-24T00:14:31.753
> 
> 标签：sql, sqlalchemy, python-2.7

我正在尝试为我的 sqlalchemy 数据库实现版本控制（使用此处的示例：http: [//docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#versioned-objects](http://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#versioned-objects)和来自源压缩包的 history_meta.py .)

使用该示例，我能够成功获取旧版本的对象：

```
history = Person.__history_mapper__.class_
old_person = history.filter(Person.id = instance.id, 
    history.version==someoldversion).one() 
```

我还可以获得它指向的任何对象的旧版本。

它在 sqlalchemy 版本控制代码中的实现方式是添加一个名为 person_history 的额外表。此表包含 Person 在特定版本中的所有字段 + 一个版本字段。

但是，我需要对关系进行版本控制。例如，也许这个人曾经有一辆汽车，但现在没有了，我需要得到他拥有的版本。谁能建议扩展示例以使其成为可能的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:25:56.663

作为数据建模问题，您的问题可能比找出 SA 中的功能更容易解决。在您的 Person-Car 示例中，可以将隐含的多对多关系 (car_ownership_timeperiods) 想象为 Title，该对象记录了 Person 对 Car 的所有权。

通过将隐式多对多关系表提升为架构中的完整对象，您保留了关联人员和汽车的能力，并且还可以在标题上使用 SA 的所有功能，包括跟踪历史记录（如果您愿意）（尽管您的示例的查询（一个人过去拥有哪些汽车）是一个普通的等值连接）。

# node.js - Svgs and other mime types in windows azure

> ID：11622376
> 
> 赞同：3
> 
> 时间：2012-07-24T00:14:52.330
> 
> 标签：node.js, azure, svg, mime-types

Hi im setting up a website in nodejs on windows azure, and would like to include svg's as background images. how do i allow svgs and mimetypes in general?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:16:31.610

Azure 使用[IISNode](https://github.com/tjanczuk/iisnode/)

我添加了这个 web.config 文件来让 svgs 工作。可以针对其他 mime 类型进行修改

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <staticContent>
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml"/>
    </staticContent>
    <handlers>
      <add modules="iisnode" name="iisnode" path="server.js" verb="*"/>
    </handlers>
    <rewrite>
      <rules>
        <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
          <match url="^[a-zA-Z0-9_\-]+\.js\.logs\/\d+\.txt$"/>
        </rule>
        <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">
          <match url="^server.js\/debug[\/]?"/>
        </rule>
        <rule name="StaticContent">
          <action type="Rewrite" url="public{REQUEST_URI}"/>
        </rule>
        <rule name="DynamicContent">
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="True"/>
          </conditions>
          <action type="Rewrite" url="server.js"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:38:53.747

如果 Node 正在提供文件，只需使用正确的 MIME 类型提供它（使用您正在使用的任何库）。如果您让 IIS 提供文件，那么您需要将 MIME 类型添加到您的 web.config。

# objective-c - 阻止两个 UILabel 相互重叠

> ID：11622383
> 
> 赞同：-1
> 
> 时间：2012-07-24T00:15:33.970
> 
> 标签：objective-c, ios, xcode

```
- (void)viewDidLoad
{
[super viewDidLoad];

objectiveLabel.text = objectstring;
objectiveLabel.lineBreakMode = UILineBreakModeWordWrap;
objectiveLabel.numberOfLines = 0;
[objectiveLabel sizeToFit];

vocabularyLabel.text = vocabularystring;
vocabularyLabel.lineBreakMode = UILineBreakModeWordWrap;
vocabularyLabel.numberOfLines = 0;
[vocabularyLabel sizeToFit];   

} 
```

有人可以指出我如何让​​标签 1 推动或移动标签 2 而不是重叠的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:25:16.627

如果你想“推动或移动”一个 UILabel，你只需相应地设置框架。所以看`objectiveLabel.frame`，加上`objectiveLabel.frame.origin.x`加号`objectiveLabel.frame.size.width`，这是你应该设置的最小值`vocabularyLabel.frame.origin.x`。如果您`vocabularyLabel`不仅要调整`objectiveLabel`帧宽度的宽度，而且实际上要根据在`objectstring`中的渲染方式进行调整`objectiveLabel`，您可以通过以下方式计算`objectiveLabel`'s 宽度的大小：

```
CGSize size1 = [objectstring sizeWithFont:objectiveLabel.font 
                        constrainedToSize:objectiveLabel.frame.size
                            lineBreakMode:objectiveLabel.contentMode];

CGRect frame2 = vocabularyLabel.frame;
frame2.origin.x = objectiveLabel.origin.x + size1.width;
vocabularyLabel.frame = frame2; 
```

不过，这不会考虑`minimumFontSize`标签的因素。但是，如果`minimumFontSize`它的大小与字体大小相同，那么您应该是金色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:19:38.250

你想要什么叫做`Auto Layout`.

# html - Nesting of CSS Selectors

> ID：11622387
> 
> 赞同：0
> 
> 时间：2012-07-24T00:15:52.880
> 
> 标签：html, css

I have a simple HTML page with divs nested within each other. And then I have another HTML page which displays a grid. The grid is styled using a stylesheet. Now I want to embed this grid within the 1st HTML page. So I have created a div inside the 1st page and set the source as the 2nd HTML page (which contains the code for displaying grid). Now the problem is, the stylesheet which was developed had the CSS selectors dependent on the structure of the 2nd Page. But now since I have embedded the code in the 1st file, I think the selectors and not getting applied and hence the grid not getting styled. How do I solve this problem ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:19:05.573

Maybe embedding the grid using an [`<iframe>`](https://developer.mozilla.org/en/HTML/Element/iframe) would be acceptable for you. Then you would not have to change any CSS code.

# iphone - 如何在所有相册中按日期顺序从我的图书馆中获取我的 alassets？

> ID：11622389
> 
> 赞同：0
> 
> 时间：2012-07-24T00:15:59.660
> 
> 标签：iphone, ios, alassetslibrary

我一直在环顾四周，只是在分组提取资产中找到了答案。我想要做的是从我的 iPhone/iPad 中获取所有图像/照片数据，而不是按专辑（即相机胶卷、自定义文件夹等）分组，而是按日期分组。我在这里或 Apple 文档中没有看到任何示例，说明如何只说“给我我所有的资产，但使用这个谓词对它们进行排序”我所看到的一切都使用枚举器按组返回结果。将组设置设置为“ALL”只会按组顺序返回资产，然后按我想要的方式对它们进行排序。

这是不可能的吗？我遇到了另一个性能问题，但我认为如果我能保证资产按日期排序，我可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:10:03.817

没有办法一次获得所有资产；他们总是按专辑分组。

您可以遍历每个专辑，将所有资产添加到 NSMutableArray，并使用自定义 NSComparator 对该数组进行排序。

我创建了一个基于 CoreData 的 ALAssets 数据库，它允许您使用谓词搜索所有资产。然而，ALAssetsLibrary 的问题是索引数据库中的每个 ALAsset 非常慢。

查看 Github 上的 LLAssetsDatabase：http: [//github.com/Glnn/LLAssetDatabase](http://github.com/Glnn/LLAssetDatabase)

# sql - SQL Group BY SUM one column and select of first row of grouped items

> ID：11622391
> 
> 赞同：4
> 
> 时间：2012-07-24T00:16:21.113
> 
> 标签：sql, sql-server, sql-server-2008

I have a part table where I have 5 fields. I want to sum the QTY of the mfgpn while showing the first returned row for the other 3 fields (Manfucturer, DateCode, Description). I initially thought of using the MIN function as follows, but that doesn't really help me insofar as that the data is not a int data type. How would I go about doing this? Right now I'm stuck at the following query below:

```
SELECT SUM([QTY]) AS QTY
  ,[MFGPN]
  ,MIN([MANUFACTURER]) AS MANUFACTURER
  ,MIN([DATECODE]) AS DateCode
  ,MIN([DESCRIPTION]) AS DESCRIPTION
  INTO part
GROUP BY MFGPN, MANUFACTURER, DATECODE, description
ORDER BY mfgpn ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:26:53.800

会`CROSS APPLY`为你工作吗？

```
SELECT 
    SUM(a.[QTY]) AS QTY
    ,a.[MFGPN]
    ,c.[MANUFACTURER]
    ,c.[DATECODE]
    ,c.[DESCRIPTION]
FROM part a
    CROSS APPLY (SELECT TOP 1 * FROM part b WHERE a.[MFGPN] = b.[MFGPN]) c
GROUP BY 
    a.[MFGPN]
    ,c.[MANUFACTURER]
    ,c.[DATECODE]
    ,c.[DESCRIPTION] 
```

* * *

经以下测试：

```
DECLARE @T1 AS TABLE (
    [QTY] int
    ,[MFGPN] NVARCHAR(50)
    ,[MANUFACTURER] NVARCHAR(50)
    ,[DATECODE] DATE
    ,[DESCRIPTION] NVARCHAR(50));

INSERT @T1 VALUES
(2, 'MFGPN-1', 'MANUFACTURER-A', '20120101', 'A-1'),
(4, 'MFGPN-1', 'MANUFACTURER-B', '20120102', 'B-1'),
(3, 'MFGPN-1', 'MANUFACTURER-C', '20120103', 'C-1'),
(1, 'MFGPN-2', 'MANUFACTURER-A', '20120101', 'A-2'),
(5, 'MFGPN-2', 'MANUFACTURER-B', '20120101', 'B-2')

SELECT 
    SUM(a.[QTY]) AS QTY
    ,a.[MFGPN]
    ,c.[MANUFACTURER]
    ,c.[DATECODE]
    ,c.[DESCRIPTION]
FROM @T1 a
    CROSS APPLY (SELECT TOP 1 * FROM @T1 b WHERE a.[MFGPN] = b.[MFGPN]) c
GROUP BY 
    a.[MFGPN]
    ,c.[MANUFACTURER]
    ,c.[DATECODE]
    ,c.[DESCRIPTION] 
```

生产

```
QTY MFGPN   MANUFACTURER    DATECODE    DESCRIPTION
9   MFGPN-1 MANUFACTURER-A  2012-01-01  A-1
6   MFGPN-2 MANUFACTURER-A  2012-01-01  A-2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:50:23.453

这可以通过[窗口](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.100%29.aspx "OVER 子句 (Transact-SQL)") `SUM()`轻松管理：

```
WITH summed_and_ranked AS (
  SELECT
    MFGPN,
    MANUFACTURER,
    DATECODE,
    DESCRIPTION,
    QTY = SUM(QTY) OVER (PARTITION BY MFGPN),
    RNK = ROW_NUMBER() OVER (
      PARTITION BY MFGPN
      ORDER BY DATECODE  -- or which column should define the order?
    )
  FROM atable
)
SELECT
  MFGPN,
  MANUFACTURER,
  DATECODE,
  DESCRIPTION,
  QTY,
INTO parts
FROM summed_and_ranked
WHERE RNK = 1
; 
```

对于每一行，计算组的总数量和组内的排名。当实际获取要插入新表（主 SELECT）的行时，只会`RNK`拉取值为 1 的行。因此，您会得到一个包含组总数以及某些行的详细信息的结果集。

# jquery - Get Class of Parent Div

> ID：11622394
> 
> 赞同：0
> 
> 时间：2012-07-24T00:16:58.040
> 
> 标签：jquery

I am trying to flip two cards. I don't want to create duplicate javascript for each "box" so I can easily add boxes and just change the class or id to the number of the box.

Here is my code:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" type="text/css" href="base.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="jquery.flip.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.7.2.custom.min.js"></script>
<title></title>
<script>
    $(document).ready(function(){
        $(".flip").click(function() {
            var className = $('.box').attr('id');
            $('#'+className).flip({
                direction:'lr',
                color: 'white',
            });

            $('#'+className+' .content').hide();
            $('#'+className+' .flipped_content').show();
        });

        $(".revert").click(function() {
            var className = $('.box').attr('id');
            $('#'+className).flip({
                direction:'lr',
                color: '#82f5f5',
            });
            $('#'+className+' .flipped_content').hide();
            $('#'+className+' .content').show();

        });

    });
</script>
</head>

<body>
<div id="nav">

    <div id="clear"></div>
</div><!-- END NAV -->

<div id="container">

    <div id="1" class="box">
        <div id="content" class="content">
            <div id="flip" class="flip">
                <img src="flip.png" width="25px"/>
            </div>
            <br/><br/>
            <h1 align="center">Subject 1</h1><br/>
            <p>This is a description of subject 1</p>
        </div>

        <div id="content" class="flipped_content b">
            <div id="flip" class="revert">
                <img src="flip.jpg" width="25px"/>
            </div>
            <br/><br/>
            <h1 align="center">Subject 1 B</h1><br/>
            <p>This is a description of subject 1 B</p>
        </div>
    </div><!-- END BOX -->

    <div id="2" class="box">
        <div id="content" class="content">
            <div id="flip" class="flip">
                <img src="flip.png" width="25px"/>
            </div>
            <br/><br/>
            <h1 align="center">Subject 2</h1><br/>
            <p>This is a description of subject 2</p>
        </div>

        <div id="content" class="flipped_content b">
            <div id="flip" class="revert">
                <img src="flip.jpg" width="25px"/>
            </div>
            <br/><br/>
            <h1 align="center">Subject 2 B</h1><br/>
            <p>This is a description of subject 2 B</p>
        </div>
    </div><!-- END BOX -->

    <div id="clear"></div>

    <div id="footer">
        <hr>

        <p style="float:right;">Tiny Learners - Copyright 2012</p>

        <p align="left">About</p>

        <p align="left">Contact</p>
    </div>
</div><!-- END CONTAINER -->
</body>
</html> 
```

When I click on flip I want to know hide the box of the associated div box.

So when I click "flip" inside class 2 I want to hide the div associated with class 2.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T00:20:38.617

除了 Musa 的 id 应该是唯一的评论之外，您还想多了这个问题。您不需要父类，您可以直接与父类交互。

将`flip`id 更改为类后：

```
$(".flip").click(function () {
    $(this).parent().hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:26:47.950

同意以上观点：http: [//jsfiddle.net/TNwYE/](http://jsfiddle.net/TNwYE/)

# c++ - Convert a RTP sequence payload in a .wav file

> ID：11622397
> 
> 赞同：3
> 
> 时间：2012-07-24T00:17:49.040
> 
> 标签：c++, c, linux, libpcap

I have a text file with the payload (in hex) of about RTP packets of a VoIP conversation, does anyone know how to convert the text into a file. wav audio using c/c++?

PS: I'm using GNU / Linux.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T19:28:41.603

我用 Java 做同样的事情。这是一个用于测试目的的类，用于接收 UDP RTP 数据包 (uLaw) 并将它们保存到 WAV 文件中。有关如何使用它的示例，请参见 main 方法。

```
public class UdpDataReceiver implements Runnable {

    private boolean isRunning = true;
    private int port = -1;
    private DatagramSocket socket;

    public UdpDataReceiver(int port) {
        this.port = port;
    }

    public void stop() {
        isRunning = false;
        socket.close();
    }

    @Override
    public void run() {
        try {
            socket = new DatagramSocket(port);
            System.out.println(" + Listening for UDP data on port " + port + ".");
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Size of data buffer is insignificant; it just needs to be big enough to hold the UDP packet (or it will be truncated).
        byte[] data = new byte[512];
        DatagramPacket packet = new DatagramPacket(data, data.length);

        String file = null;
        FileOutputStream fos = null;
        try {
            // For now we'll just dump to a file.
            file = "C:\\tmp\\" + System.currentTimeMillis() + ".raw";
            fos = new FileOutputStream(file);

            while (isRunning) {
                try {
                    socket.receive(packet);
                } catch (SocketException se) {
                    // If we're just trying to tell the socket we're done, we'll get a SocketException.
                    if (isRunning) {
                        se.printStackTrace();
                    }
                }
                if (packet.getLength() > 12) {
                    // Strip off 12 bytes of header data.
                    fos.write(packet.getData(), packet.getOffset() + 12, packet.getLength() - 12);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                fos.flush();
                fos.close();
                convertULawFileToWav(file);
            } catch (Exception e) {
            }
            System.out.println(" + Closed port " + port + " and wrote UDP packets to file: " + file);
        }
    }

    public static void convertULawFileToWav(String filename) {
        File file = new File(filename);
        if (!file.exists())
            return;
        try {
            long fileSize = file.length();
            int frameSize = 160;
            long numFrames = fileSize / frameSize;
            AudioFormat audioFormat = new AudioFormat(Encoding.ULAW, 8000, 8, 1, frameSize, 50, true);
            AudioInputStream audioInputStream = new AudioInputStream(new FileInputStream(file), audioFormat, numFrames);
            AudioSystem.write(audioInputStream, Type.WAVE, new File(file.getAbsolutePath().substring(0, file.getAbsolutePath().length() - 3) + "wav"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // For testing...
    public static void main(String[] args) throws InterruptedException {
        UdpDataReceiver r1 = new UdpDataReceiver(65337);
        new Thread(r1).start();
        // Send data...
        Thread.sleep(30000);
        r1.stop();
    }

} 
```

# jquery - Website sides not fitting on iPad

> ID：11622399
> 
> 赞同：0
> 
> 时间：2012-07-24T00:18:16.990
> 
> 标签：jquery, iphone, ipad, html

We are building a new section of our website and the sides of our website are not fitting correctly on iOS. We are using extensive Jquery. My developers are not able to fit the website correctly on the iPad and iPhone.

I will greatly appreciate your help on how to optimize the page so that it displays correctly. ![enter image description here](../Images/eda4dc74e853ee6d4497de94fd9e54db.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:28:29.740

您需要使用“viewport”元标记通知移动设备您网站的总宽度。 [http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)

# c# - 不同命名空间/类 WPF 中的 C# 后台工作程序

> ID：11622401
> 
> 赞同：-1
> 
> 时间：2012-07-24T00:18:32.240
> 
> 标签：c#, backgroundworker

**编辑：通过添加丢失的进度更改事件处理程序来解决。**

我正在将 WPF VB.net 应用程序移植到 C#，并且遇到了后台工作人员的问题，该工作人员在不同的类中具有 DoWork 方法。我怀疑我没有正确投射后台工作人员，或者我可能需要一个处理程序？

vb 示例代码工作正常，进度条指示正确，C# 代码似乎触发 bw.RunWorkerAsync(); 方法，因为它报告为 IsBusy=True 但没有其他响应、进度或对外部类的调用（据我所知）。

这是一个 WPF 应用程序，问题在于用户控件试图从控件外部的公共类报告进度。

如果有人能指出我正确的方向，我将不胜感激。

C# 示例代码

```
 namespace testApp.Usercontrols
    public partial class ucHome : UserControl
    {
        public Sharing.clsDownloadCollection foo = new Sharing.clsDownloadCollection(); 
         BackgroundWorker bw = new BackgroundWorker();

     public ucHome()         
{       InitializeComponent();
 }

private void Button1_Click(object sender, RoutedEventArgs e)
    {

        bw.WorkerReportsProgress = true;
        pBar.Maximum = 50000;   //progress bar on ucHome
        pBar.Value = 0;

        **// Indicates IsBusy=True when debugging but can't see any further activity
         bw.RunWorkerAsync();
        //**

    }

 public void bw_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
          var foo=new foo();

         // possible problem?
           foo.DoWork((BackgroundWorker)sender);

        }

        public void bw_ProgressChanged(object sender, System.ComponentModel.ProgressChangedEventArgs e)
        {

            this.pBar.Value = e.ProgressPercentage;
        } 
```

外部类不同的项目文件夹/命名空间

```
 namespace testApp.Sharing
{
//different namespace /folder than ucHome
 public class foo 

{
public void DoWork(BackgroundWorker bw)
{
    for (int i = 0; i <= 50000; i++) {
        i += 1;

        bw.ReportProgress(i - 1);
}
}

} 
```

按预期工作的示例 VB 代码。

```
 Public Class ucHome 'user control
Public foo As New foo
Friend WithEvents bw As New BackgroundWorker
Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
        bw.WorkerReportsProgress = True  
        pBar.Maximum = 50000
        pBar.Value = 0
        bw.RunWorkerAsync() 

    End Sub
    Private Sub bw_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bw.DoWork
          'possible my C# is not casting correctly?
        foo.DoWork(DirectCast(sender, BackgroundWorker)) 

    End Sub

    Private Sub bw_ProgressChanged(ByVal sender As Object, ByVal e As System.ComponentModel.ProgressChangedEventArgs) Handles bw.ProgressChanged
       Me.pBar.Value = e.ProgressPercentage
    End Sub

End Class 
```

用户控件调用的类 foo

```
Public Class foo

  Public Sub DoWork(ByVal bw As BackgroundWorker)
        For i As Integer = 0 To 50000
            i += 1
         bw.ReportProgress(i - 1)
        Next
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:07:50.730

通过添加缺少的后台程序 ProgressChanged 事件处理程序来解决。

# html - 按比例缩放所有图像以适合容器

> ID：11622403
> 
> 赞同：0
> 
> 时间：2012-07-24T00:18:36.780
> 
> 标签：html, css, scale

我正在构建一个自定义脚本，用户可以在其中上传图像并将其拖动到模板图像周围以获得所需的结果。问题是模板图像的高和宽超过 1000 像素，所以我把它放在一个限制它的高度/宽度的容器中。

如何使上传的图像缩放完全相同，这样当我通过 PHP 创建图像时，我可以获取`left:`和`top:`CSS 值并将它们应用于更大的模板图像和上传的图像？

当前的 CSS：

```
#template {
    position: relative;
    padding: 0;
    width: 500px;
    height: 500px;
    z-index: 1;
}
#uploaded {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:35:31.870

我不太确定这是否是您所要求的……无论如何：

CSS3 属性[`background-size: 100%`](https://developer.mozilla.org/en/CSS/background-size)允许您指定背景图像应填充容器的大小并按比例拉伸。连同[`background-repeat: no-repeat`](https://developer.mozilla.org/en/CSS/background-repeat)它可能是您正在寻找的：

```
#uploaded {
    height: 500px;
    width: 500px;

    background-image: url(...);
    background-size: 100%;
    background-repeat: no-repeat;
} 
```

Demo: [http://jsfiddle.net/pu76s/3/](http://jsfiddle.net/pu76s/3/)

# javascript - Clear canvas button in Javascript/HTML not working

> ID：11622406
> 
> 赞同：0
> 
> 时间：2012-07-24T00:18:52.917
> 
> 标签：javascript, html, canvas, callback

So my code displays an html page with some text on it and then below that I have a "clear Canvas" button which I would like to have clear the canvas once pushed and then be able to draw on this blank canvas. My clear canvas button isn't working, it isn't doing anything once pushed. I'm using a call back in order to perform the canvas clear and the html file is connected to a javascript file which then draws things on the new cleared canvas. The first code here is the .html file with the canvas that is being cleared that also has the.js file joined to it.

I tried context.Rect(x, y, w, h); and canvas.width.canvas.width; and neither seem to work. I'm using Chrome

```
 <html><head></head>
   <h3>  </h3>
   <body >
    <canvas id="main" width="300" height="500"></canvas>

   <script>
   var canvas = document.getElementById("main");
  var context = canvas.getContext('2d');
   context.fillStyle = "#008000";
  context.rect(0,0,300,300);
 context.fill();

 </script>
  </body></html>

  <!DOCTYPE html>
  <html>
  <head>
  <meta name="viewport" content="user-scalble=no,initial-scale=1.0,maximum-scale=1.0" />
 <style>
 body { padding:10px; margin:0px; background-color: #FF9; }
 #main { margin: 10px auto 0px auto; }
 </style>
 <script src=".js"></script>
</head>
<body >
 <button id="clear">Clear Canvas</button><br>
<canvas id="main" width="300" height="500"></canvas>
 </body>
  </html>
   //end of .html file

// JavaScript Document
 // wait until window is fully loaded into browser
 window.onload = function() 
 {
  // so smart phone does not move/resize image when touched
 document.ontouchmove = function(e)
  { 
  e.preventDefault(); 
   }
  var canvas = document.getElementById('main');
  // Number of pixels used by the Clear button above canvas 
  var canvasTop = canvas.offsetTop;
  var context = canvas.getContext('2d');
  var lastX, lastY;
  context.strokeStyle = #FA8072;
  context.lineCap = 'round';
  context.lineJoin = 'round'; 
  context.lineWidth = 8;
   context.fill();
  // Function to Clear the Canvas
    function clear() 
   { 
      context.fillStyle = 'blue'
     context.rect( 0, 0, 300, 500);
    context.fill();
     }
    // Function Dot (to start a new line or just a point)
      function dot(x,y) 
  { 
    context.beginPath();
   context.fillStyle = '#D2691E';
   // draw tiny circle
   context.arc(x,y,1,0, Math.PI*2, true); 
   context.fill();
  context.closePath();
  }
  // Handle the Clear button
   var clearButton = document.getElementById('clear');
  // set callback funct. clear()for future touch events
 clearButton.onclick = clear;
 clear(); // do a clear canvas now
 } // end window.onload 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:38:33.883

你在这一行有一个错字：

```
context.strokeStyle = #FA8072; 
```

你需要报价：

```
context.strokeStyle = '#FA8072'; 
```

有了这个修复它似乎工作：http: [//jsfiddle.net/eMSXU/](http://jsfiddle.net/eMSXU/)

（顺便说一句，您可能想按小提琴中的“整理”按钮来查看您的代码应该如何缩进......）

# bash - Bash 退出和进程替换

> ID：11622408
> 
> 赞同：2
> 
> 时间：2012-07-24T00:19:03.900
> 
> 标签：bash, process-substitution

如果函数失败，我想退出脚本。通常这不是问题，但如果您使用过程替代，它就会成为问题。

```
$ cat test.sh
#!/bin/bash

foo(){
  [ "$1" ] && echo pass || exit
}

read < <(foo 123)
read < <(foo)
echo 'SHOULD NOT SEE THIS'

$ ./test.sh
SHOULD NOT SEE THIS 
```

根据[**CodeGnome 的回答**](https://stackoverflow.com/a/11622465)，这似乎可行

```
$ cat test.sh
#!/bin/bash

foo(){
  [ "$1" ] && echo pass || exit
}

read < <(foo 123) || exit
echo 'SHOULD SEE THIS'
read < <(foo) || exit
echo 'SHOULD NOT SEE THIS'

$ ./test.sh
SHOULD SEE THIS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:26:55.843

您可以使用`set -e`在任何失败时退出脚本。这对于较小的脚本通常就足够了，但缺乏粒度。

您还可以直接检查任何命令或函数的返回状态，或检查`$?`变量。例如：

```
foo () {
  return 1
}

foo || { echo "Return status: $?"; exit 1; } 
```

# javascript - 为什么这个合并排序 java 脚本实现不起作用？

> ID：11622411
> 
> 赞同：0
> 
> 时间：2012-07-24T00:19:23.307
> 
> 标签：javascript, algorithm, mergesort

我已经尝试了一整天，似乎无法找出它为什么不起作用。我认为问题在于我的 JavaScript 语言技能。我可能会遗漏一些关于参数传递的概念。你能告诉我错误在哪里吗？

这是我的实现，基于我一年前用 C# 编写的另一个实现，可以在[这里](https://stackoverflow.com/questions/8304021/why-is-insertion-sort-always-beating-merge-sort-in-this-implementation)找到。

所以这里是代码（你可以直接在 Chrome 控制台上尝试，只需复制/粘贴它就会“工作”）：

```
function merge(A, p, q, r){
    var n1 = q - p + 1;
    var n2 = r - q;

    var i = 0;
    var j = 0;

    var L = [];
    while (i < n1){
        L.push(A[p + i++]);
    }

    var R = [];
    while(j < n2){
        R.push(A[q + j++ + 1]);
    }

    L.push(Number.MAX_VALUE);
    R.push(Number.MAX_VALUE);

    i = 0; 
    j = 0; 

    var k = p;
    while(k <= r){
        if(L[i] <= R[i]){
            A[k] = L[i];
            i = i + 1;
        }else{
            A[k] = R[j];
            j = j + 1;
        }

        k = k + 1;
    }
}

function mergeSort(A, p, r){
    console.log(A);

    if(p < r){
        var q = Math.floor((p + r) / 2);

        mergeSort(A, p, q); 
        mergeSort(A, q + 1, r);
        merge(A, p, q, r);
    }
}

function testMergeSort(array){
    var p = 0;
    var r = array.length - 1;

    console.log("BEFORE: " + array);

    mergeSort(array, p, r);

    console.log("AFTER: " + array);
    console.log("---------------------------------");
}

testMergeSort([5, 2, 4, 7, 1, 3, 2, 6]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T00:35:58.970

一个简单的错字：

```
if(L[i] <= R[i]){ 
```

应该

```
if(L[i] <= R[j]){ 
```

# php - 在 PHP 中添加到数据库中的字段总数

> ID：11622415
> 
> 赞同：1
> 
> 时间：2012-07-24T00:20:15.013
> 
> 标签：php, mysql, add

我有一个脚本，当用户输入一个我希望它添加到数据库总数中的代码时，我正在使用它，但是什么也没发生。

到目前为止，这是我的代码：

```
$err = array();
if (isset($_POST['doSubmit4']) === true ) // Was if ($_POST['access']=='submit')
{
$code = mysql_real_escape_string($_POST['access-key']); // Was $data['access-key']
$result = mysql_query("SELECT `akid`,`key`,`total_access` FROM access_keys WHERE id='$_SESSION[user_id]' AND type='1'") or die (mysql_error()); 
$num = mysql_num_rows($result);
// Match row found with more than 1 results  - the key exists. 
if ( $num > 0 ) {   
    list($akid,$key,$total_access) = mysql_fetch_row($result);
    if ($code == $key) { 
        if(empty($err)){
            $total_access++;
            mysql_query("update access_keys set total_access='$total_access' where akid='$akid'") or die(mysql_error());
            header("Location: ./");
        }
    } else {
        $err[] = "Invalid Access Key. Please try again with correct access key.";
    }
} else {
    $err[] = "Error - Invalid Access Key. No access exists for your user ID.";
}       
} 
```

每次用户输入正确的代码时，我都希望它添加到“总访问权限”字段中，但它不起作用。

这是我的表单代码：

```
<form name="postAccess" id="postAccess" method="post" action="access.php">
    <input type="password" name="access-key" id="access-key" style="background-color:black;color:white;" size="40" /><br/>
    <input name="doSubmit4" type="submit" id="doSubmit4" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:34:31.870

如果括号可能是你的父母。

尝试：

```
if (isset($_POST['access']) === true ) 
```

代替

```
if ( $_POST['access']=='submit' ) 
```

如果这似乎不起作用，请进行一些调试。

在 if 括号中添加一些 echo 语句，以查看哪些条件为真，哪些不是。

编辑：

我刚刚意识到另一个问题。

您的表单操作无效。这应该是您将数据发布到的页面的路径。所以：

代替：

`<form name="access" id="access" method="post" action="access">`

你应该有：

```
<form name="access" id="access" method="post" action="your-php-path-here.php"> 
```

**注意`action`上面代码中的 how = "your-php-path-here.php"。**

# java - 将对象添加到 StringBuilder

> ID：11622421
> 
> 赞同：0
> 
> 时间：2012-07-24T00:21:08.393
> 
> 标签：java, android

我对 Android 开发很陌生，我想做的是`ArrayList`在`TextView`.

我一直在尝试将 转换`ArrayList`为`Array`，然后将每个项目附加到`StringBuilder`. 但是，`StringBuilder`似乎不允许我`Object`从`Array`. 谁能告诉我为什么，或者实际上提供更好的解决方案？

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    ArrayList<String> temp = new ArrayList<String>();
    temp = data.getStringArrayListExtra("intentReturn");
    Object obj[] = temp.toArray();
    for(int i = 0; i < obj.length; i++){
        sBuilder.append((String)obj[i]); //This is the line which crashes the app
        if(i < obj.length - 1){
            sBuilder.append(", ");
        }
    }
    tvResult.setText(sBuilder.toString());
} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:31:02.563

将您的 sBuilder 附加行更改为：

```
sBuilder.append(obj[i].toString()); 
```

这样您就不会尝试将对象转换为字符串，而是获取对象的字符串表示形式。

[Object.toString() 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:40:52.200

**1.**我**不**明白你**转换**.`ArrayList to Array`

**2.**尝试这种方式...**我直接将String从ArrayList附加到StringBuilder，使用For-Each循环**

**例如：**

```
for (String te : temp){
    sBuilder.append(te);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T17:19:02.080

显然我忘了添加`StringBuilder sBuilder = new StringBuilder();`- 愚蠢的新手！感谢 Jeffrey 也清理了他的代码，非常感谢！

为了提供足够的答案，这是我的新代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    StringBuilder sBuilder = new StringBuilder();
    ArrayList<String> temp = new ArrayList<String>();
    temp = data.getStringArrayListExtra("intentReturn");
    for(int i = 0; i < temp.size(); i++){
        sBuilder.append(temp.get(i).toString());
        if(i < temp.size() - 1){
            sBuilder.append(", ");
        }
    }
    tvResult.setText(sBuilder.toString());
} 
```

# ruby-on-rails - 从类 Ruby 中删除保存的对象

> ID：11622429
> 
> 赞同：0
> 
> 时间：2012-07-24T00:21:59.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

从 Rails 类中删除现有对象的最有效方法是什么？我有一个对象数组

```
person_array = [Person1, Person2, Person3] 
```

我的目标是从他们所在的表中删除该数组中的所有人员。

所以我有一个他们目前所属的 People 类。

我在想类似的东西`People.delete(person_array)`似乎正在执行正确的 SQL 语句。我如何让这些删除语句实际更改我的 People 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:35:02.623

不确定您是否需要获取 id 或 Activerecord 会为您执行此操作。

```
Person.delete_all person_array.map(&:id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:39:43.727

由于您已经拥有这些对象，因此您可以直接调用[`destroy_all`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-destroy_all)它们：

```
Person.destroy_all(:id => person_array) 
```

与 不同[`delete_all`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all)的是，这将调用模型的回调，这可能需要更长的时间，但会保持完整性。

# ruby-on-rails - 如何向 jquery 组合框自动完成添加和显示新的选择值

> ID：11622430
> 
> 赞同：0
> 
> 时间：2012-07-24T00:22:02.703
> 
> 标签：ruby-on-rails, jquery-ui

我正在使用填充有选择框的 jquery UI 自动完成组合框。

这是代码：

```
$.widget( "ui.combobox", {
    _create: function() {
        var input,
            self = this,
            select = this.element.hide(),
            selected = select.children( ":selected" ),
            value = selected.val() ? selected.text() : "",
            wrapper = this.wrapper = $( "<span>" )
                .addClass( "ui-combobox" )
                .insertAfter( select );

        input = $( "<input>" )
            .appendTo( wrapper )
            .val( value )
            .addClass( "ui-state-default ui-combobox-input" )
            .autocomplete({
                delay: 0,
                minLength: 0,
                source: function( request, response ) {
                    var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                    response( select.children( "option" ).map(function() {
                        var text = $( this ).text();
                        if ( this.value && ( !request.term || matcher.test(text) ) )
                            return {
                                label: text.replace(
                                    new RegExp(
                                        "(?![^&;]+;)(?!<[^<>]*)(" +
                                        $.ui.autocomplete.escapeRegex(request.term) +
                                        ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                    ), "<strong>$1</strong>" ),
                                value: text,
                                option: this
                            };
                    }) );
                },
                select: function( event, ui ) {
                    ui.item.option.selected = true;
                    self._trigger( "selected", event, {
                        item: ui.item.option
                    });
                },
                change: function( event, ui ) {
                    if ( !ui.item ) {
                        var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                            valid = false;
                        select.children( "option" ).each(function() {
                            if ( $( this ).text().match( matcher ) ) {
                                this.selected = valid = true;
                                return false;
                            }
                        });
                        if ( !valid ) {
                            // remove invalid value, as it didn't match anything
                            $( this ).val( "" );
                            select.val( "" );
                            input.data( "autocomplete" ).term = "";
                            return false;
                        }
                    }
                }
            })
            .addClass( "ui-widget ui-widget-content ui-corner-left" );

        input.data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };

        $( "<a>" )
            .attr( "tabIndex", -1 )
            .attr( "title", "Show All Items" )
            .appendTo( wrapper )
            .button({
                icons: {
                    primary: "ui-icon-triangle-1-s"
                },
                text: false
            })
            .removeClass( "ui-corner-all" )
            .addClass( "ui-corner-right ui-combobox-toggle" )
            .click(function() {
                // close if already visible
                if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                    input.autocomplete( "close" );
                    return;
                }

                // work around a bug (likely same cause as #5265)
                $( this ).blur();

                // pass empty string as value to search for, displaying all results
                input.autocomplete( "search", "" );
                input.focus();
            });
    },

    destroy: function() {
        this.wrapper.remove();
        this.element.show();
        $.Widget.prototype.destroy.call( this );
    }
}); 
```

这是显示表单的屏幕截图： ![在此处输入图像描述](../Images/7df927b8d3a5945488f1da996046483c.png)

当用户单击“添加作者”时，会加载一个模式以供他们创建新的作者模型对象。我想在 jquery UI 组合框中添加并显示新创建的作者。我正在使用 Rails 3.2 并使用 create.js.erb 文件来控制创建对象的响应。

# javascript - 如何动态更改链接（）的行高或字体大小？

> ID：11622436
> 
> 赞同：1
> 
> 时间：2012-07-24T00:22:43.560
> 
> 标签：javascript, jquery, html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:02:09.197

考虑以下事项（添加适当的颜色和版式）：

```
#selection_menu div a {
    display: table-cell;
    height: 108px;
    text-align: center;
    vertical-align: middle;
    width: 162px
} 
```

无论它跨越多少行，这都会垂直居中`a`a `div`(inside )。`#selection_menu`适用于所有现代 Web 浏览器。您可以设置`line-height`为适当的值，例如`1.5`（它将定义链接跨越多行时的外观）。

# go - 你如何在 Go 中 Mmap() 一个大于 2GB 的文件？

> ID：11622438
> 
> 赞同：0
> 
> 时间：2012-07-24T00:23:00.810
> 
> 标签：go, mmap

syscall.Mmap() 调用采用 int 类型的长度参数，该参数仅适用于 2GB。那我该如何映射一个更大的文件呢？

注意：64位系统，所以地址空间不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:58:43.300

在[http://golang.org/src/pkg/syscall/syscall_unix.go](http://golang.org/src/pkg/syscall/syscall_unix.go)中查看mmapper 上的 Mmap 方法。您应该能够复制该代码并根据需要对其进行调整。

当然，您将无法映射到 []byte，因为切片长度被定义为“int”（目前到处都是 32 位）。您可以将mmap 映射到更大的元素类型（例如[]int32），或者只是使用指向内存的指针，但它不会替代syscall.Mmap。

# html - 如何在 Ruby on Rails 上创建选择表单？

> ID：11622439
> 
> 赞同：0
> 
> 时间：2012-07-24T00:23:01.387
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, forms

我正在尝试创建一个表单，该表单显示如何根据不同的时间跨度（星期几、一天中的时间......）在地图上显示数据的多个选项。我想使用 Ruby on Rails 从表单中保存用户输入的选项，但我不知道如何使用 select 标签创建表单。到目前为止，我有 html 中的代码，但想将其转换为 Ruby on Rails，以便我可以轻松地抽象用户输入的值以显示正确的数据。这是我的代码

```
 <!-- SPAN OF TIME--> 
                         <strong>Span:</strong>
                         <select id="span" class="span2">
                                <option>Today</option>
                                <option>This Week</option>
                                <option>This Month</option>
                                <option>This Year</option>
                            </select>
                            </br> 

                        <!-- WEEKDAY --> 
                        <strong>Weekday:</strong>
                            <select id="weekday" class="span2">
                                <option>All days</option>
                                <option>Weekend</option>
                                <option>Weekdays</option>
                                <option>Sunday</option>
                                <option>Monday</option>
                                <option>Tuesday</option>
                                <option>Wednesday</option>
                                <option>Thursday</option>
                                <option>Friday</option>
                                <option>Saturday</option>
                            </select>
                            </br> 

                        <!-- WEEKDAY --> 
                        <strong>Time of Day:</strong>
                            <select id="time" class="span2">
                                <option>Morning</option>
                                <option>Afternoon</option>
                                <option>Night</option>
                            </select>
                        </br> 

                        <button type="submit" class="btn btn-primary">Show Data</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:48:27.823

这是回答您问题的文档：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:21:19.553

您的选项标签需要有一个值属性。选项值是提交给控制器的内容。然后，您将能够通过 params 哈希访问这些数据。我还建议使用 rails form helpers 来动态生成这些标签。

[http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags](http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags)

# javascript - 如何在 jQuery mobile 中显示来自 XML 的图像？

> ID：11622444
> 
> 赞同：0
> 
> 时间：2012-07-24T00:23:26.983
> 
> 标签：javascript, jquery, xml, ajax, jquery-mobile

我觉得这有一个非常简单的解决方案，但我现在正试图让它工作太久。

我已经制作了一个渲染图像的功能，至少这是它应该做的，但事实并非如此。

```
function renderAD(entries) {
    var o = '';
    $.each(entries, function(i, v) {
        o +="<img src=" +v.image +"/>";
    });
    $("#adplace").html(o);    
} 
```

我检查了 v.image 是指[http://allroundcars.nl/logo-ijsselmondenieuws.png](http://allroundcars.nl/logo-ijsselmondenieuws.png)，这是我要加载的图像。但我看到的只是一个`'?' image`（找不到图片）。

我究竟做错了什么？任何帮助表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:27:20.720

尝试将每个替换为：

```
$(entries).each(function(i, v) {
    o +='<img src="' + v.image + '"/>';
}); 
```

**更新：**在它周围添加一个`<a>`：

```
o +='<a href="' + v.link + '"><img src="' + v.image + '"/></a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:31:39.730

这是一个工作版本：

```
function renderAD(entries) {
    var o = '';
    $(entries).each(function(i, v) {
        o +="<img src=\"" + v.image +"\"/>";
    });
    $("#adplace").html(o);    
} 
```

# c# - 从 CalDAV 获取用户的日历列表

> ID：11622447
> 
> 赞同：4
> 
> 时间：2012-07-24T00:24:11.710
> 
> 标签：c#, webdav, caldav

我正在尝试从 CalDAV 服务器获取当前用户拥有的日历列表。

通过以下请求，我能够使用我们的初始测试帐户获取此信息：

```
PROPFIND /calendars/users/test/
<propfind xmlns='DAV:'>
    <allprop/>
</propfind> 
```

结果是一个`<multistatus>`包含多个元素的`<response>`元素。如果我提取`resourcetype`日历所在的元素，我会得到我的日历列表。

但是，当我们添加其他用户时，会产生“未找到”错误，因此我改为使用“主要匹配”请求来获取当前用户的“日历-主页-设置”路径。

该路径看起来像 /d817aaec-7d24-5b38-bc2f-6369da72cdd9/。所以我用这条路径尝试了上述请求。现在结果是一个`<multistatus>`只有一个元素的`<response>`元素。它不包含任何日历。第一个响应与我原始请求中的第一个响应完全相同。

我一辈子都想不出能让我在所有情况下都获得日历用户列表的魔法酱。

**编辑：**

这是我的一些代码。我最初尝试的“/calendars/users/test/” URL 是从`GetRequestAddress()`. 我曾经使用`principal-match`日历路径的第二种情况`CalendarHomeSet`（如下所示）。

```
Headers["Depth"] = "1";
//XElement xmlResult = UploadXml(GetRequestAddress(), // Alternatively, CalendarHomeSet
    method: CalDavMethod.PropertyFind,
    xml: XDocument.Parse("<propfind xmlns='DAV:'>" +
        "<allprop/>" +
        "</propfind>").Root);

private string GetRequestAddress(string calendarHRef = null, string resource = null)
{
    string path = calendarHRef;
    if (String.IsNullOrWhiteSpace(path))
        path = String.Format("/calendars/users/{0}/", UserName);
    if (!String.IsNullOrWhiteSpace(resource))
        path = Path.Combine(path, resource);
    return path;
}

/// <summary>
/// Gets/sets the path to the parent folder of any calendar subfolders
/// owned by the current user.
/// </summary>
public string CalendarHomeSet
{
    get
    {
        if (calendarHomeSet == null)
        {
            Headers["Depth"] = "0";

            XElement xmlResult = UploadXml(String.Format("/principals/users/{0}/", UserName),
                method: "REPORT",
                xml: XDocument.Parse(XmlHeader +
                    "<D:principal-match xmlns:D=\"DAV:\">" +
                        "<D:self/>" +
                        "<D:prop>" +
                            "<C:calendar-home-set xmlns:C=\"urn:ietf:params:xml:ns:caldav\"/>" +
                        "</D:prop>" +
                    "</D:principal-match>").Root);
            //
            XElement el = xmlResult.Descendants(CalDavXmlns + "calendar-home-set").FirstOrDefault();
            if (el != null)
            {
                calendarHomeSet = (string)el;
                if (!calendarHomeSet.EndsWith("/"))
                    calendarHomeSet += '/';
            }
        }
        return calendarHomeSet;
    }

    set
    {
        calendarHomeSet = value;
    }
}

private string calendarHomeSet = null; 
```

**第二次编辑：**

以下是有关我的请求和响应的确切内容的更多详细信息。在第一个中，请注意结果包括一个集合，然后是两个日历集合。

```
PROPFIND /calendars/users/test/

<propfind xmlns="DAV:">
  <allprop />
</propfind> 
```

回复：

```
<multistatus xmlns="DAV:">
  <response>
    <href>/calendars/users/test/</href>
    <propstat>
      <prop>
        <getetag>"4293-1000-4FFC9A16"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <displayname>Test User</displayname>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
        </resourcetype>
        <getcontentlength />
        <getlastmodified>Tue, 10 Jul 2012 21:09:42 GMT</getlastmodified>
        <creationdate>2012-07-10T21:09:42Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">CalendarHomeFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/calendars/users/test/calendar/</href>
    <propstat>
      <prop>
        <getetag>"42DB-1000-50108ABC"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <calendar-order xmlns="http://apple.com/ns/ical/">1</calendar-order>
        <displayname>calendar</displayname>
        <calendar-color xmlns="http://apple.com/ns/ical/">#F64F00FF</calendar-color>
        <getctag xmlns="http://calendarserver.org/ns/">2012-07-26 00:09:32.361284</getctag>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
          <calendar xmlns="urn:ietf:params:xml:ns:caldav" />
        </resourcetype>
        <getcontentlength />
        <schedule-calendar-transp xmlns="urn:ietf:params:xml:ns:caldav">
          <opaque />
        </schedule-calendar-transp>
        <getlastmodified>Thu, 26 Jul 2012 00:09:32 GMT</getlastmodified>
        <creationdate>2012-07-26T00:09:32Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">CalDAVFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/calendars/users/test/8C1F393E-04E8-428A-819A-933C3A9338AD/</href>
    <propstat>
      <prop>
        <getetag>"43AA-1000-50079D1C"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <calendar-order xmlns="http://apple.com/ns/ical/">0</calendar-order>
        <displayname>Jon Wood Calendar</displayname>
        <calendar-color xmlns="http://apple.com/ns/ical/">#711a76</calendar-color>
        <getctag xmlns="http://calendarserver.org/ns/">2012-07-19 05:37:32.673835</getctag>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
          <calendar xmlns="urn:ietf:params:xml:ns:caldav" />
        </resourcetype>
        <getcontentlength />
        <schedule-calendar-transp xmlns="urn:ietf:params:xml:ns:caldav">
          <transparent />
        </schedule-calendar-transp>
        <getlastmodified>Thu, 19 Jul 2012 05:37:32 GMT</getlastmodified>
        <creationdate>2012-07-19T05:37:32Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">CalDAVFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/calendars/users/test/outbox/</href>
    <propstat>
      <prop>
        <getetag>"D4E-1000-4FFB15AF"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <displayname>outbox</displayname>
        <getctag xmlns="http://calendarserver.org/ns/">2012-07-09 17:32:31.950308</getctag>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
          <schedule-outbox xmlns="urn:ietf:params:xml:ns:caldav" />
        </resourcetype>
        <getcontentlength />
        <getlastmodified>Mon, 09 Jul 2012 17:32:31 GMT</getlastmodified>
        <creationdate>2012-07-09T17:32:31Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">ScheduleOutboxFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/calendars/users/test/freebusy</href>
    <propstat>
      <prop>
        <getetag>"D7D-0-4FFC3F7C"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <displayname>freebusy</displayname>
        <getcontenttype>text/plain</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <free-busy-url xmlns="http://calendarserver.org/ns/" />
        </resourcetype>
        <getcontentlength>0</getcontentlength>
        <getlastmodified>Tue, 10 Jul 2012 14:43:08 GMT</getlastmodified>
        <creationdate>2012-07-10T14:43:08Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">FreeBusyURLFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/calendars/users/test/inbox/</href>
    <propstat>
      <prop>
        <getetag>"42FB-1000-4FF21C60"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <displayname>inbox</displayname>
        <getctag xmlns="http://calendarserver.org/ns/">2012-07-02 22:10:40.527683</getctag>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
          <schedule-inbox xmlns="urn:ietf:params:xml:ns:caldav" />
        </resourcetype>
        <getcontentlength />
        <schedule-default-calendar-URL xmlns="urn:ietf:params:xml:ns:caldav">
          <href xmlns="DAV:">/calendars/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/calendar</href>
        </schedule-default-calendar-URL>
        <getlastmodified>Mon, 02 Jul 2012 22:10:40 GMT</getlastmodified>
        <creationdate>2012-07-02T22:10:40Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">ScheduleInboxFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
</multistatus> 
```

接下来，我尝试了相同的请求，但针对不同的 URL。这一次，我使用了通过查询主体获得的 URL。现在结果仍然包含初始集合，但它们不包含日历。

```
PROPFIND /calendars/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/ (CalendarHomeSet)

<propfind xmlns="DAV:">
  <allprop />
</propfind> 
```

回复：

```
<multistatus xmlns="DAV:">
  <response>
    <href>/calendars/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
    <propstat>
      <prop>
        <getetag>"4293-1000-4FFC9A16"</getetag>
        <current-user-principal>
          <href>/principals/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9/</href>
        </current-user-principal>
        <displayname>Test User</displayname>
        <getcontenttype>httpd/unix-directory</getcontenttype>
        <supportedlock>
          <lockentry>
            <lockscope>
              <exclusive />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
          <lockentry>
            <lockscope>
              <shared />
            </lockscope>
            <locktype>
              <write />
            </locktype>
          </lockentry>
        </supportedlock>
        <resourcetype>
          <collection />
        </resourcetype>
        <getcontentlength />
        <getlastmodified>Tue, 10 Jul 2012 21:09:42 GMT</getlastmodified>
        <creationdate>2012-07-10T21:09:42Z</creationdate>
        <resource-class xmlns="http://twistedmatrix.com/xml_namespace/dav/">CalendarHomeFile</resource-class>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
</multistatus> 
```

**第三次编辑：**

这是我用来设置日历主页的请求和响应：

```
REPORT /principals/users/test/

<D:principal-match xmlns:D="DAV:">
  <D:self />
  <D:prop>
    <C:calendar-home-set xmlns:C="urn:ietf:params:xml:ns:caldav" />
  </D:prop>
</D:principal-match> 
```

回复：

```
<multistatus xmlns="DAV:">
  <response>
    <href>/principals/users/test/</href>
    <propstat>
      <prop>
        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav">
          <href xmlns="DAV:">/calendars/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9</href>
        </calendar-home-set>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
</multistatus> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:07:59.900

我现在能想到的两件事：

1.  您是否指定 Depth: 1 标题？
2.  新用户真的有日历吗？对于新用户，该列表可能只是空的。

如果这些指针没有帮助，您应该显示完整的请求和响应。

**编辑**

这就是您通常应该在 CalDAV 中进行发现的方式。

1.  在用户提供的 url 上执行 PROPFIND，请求[{DAV:}current-user-principal](https://www.rfc-editor.org/rfc/rfc5397)。
2.  使用此 url，您可以执行 PROPFIND 以查找有关用户的更多信息。在这里，您通常应该请求 caldav 命名空间中的 calendar-home-set 属性。
3.  然后，使用 calendar-home-set，执行 PROPFIND (depth: 1) 来查找日历。

我有一种感觉，因为您进行了主体匹配，并且不使用当前用户主体；这有点不对劲。但我不完全确定。我的预感很简单，就是您检测到的 calendar-home-set 是错误的。

# c# - 在父窗口中调用控件

> ID：11622456
> 
> 赞同：0
> 
> 时间：2012-07-24T00:26:16.273
> 
> 标签：c#, wpf

我以前用过 vb.net，想探索 c#。（他们说 c# 比 vb.net 好）但无论如何......我在下面的 vb.net 调用父窗口中的控件中使用了这段代码。

```
Dim strWindowToLookFor As String = GetType(MainWindowForm).Name
Me.Close()
Dim win = (From w In Application.Current.Windows Where DirectCast(w, Window).GetType.Name = strWindowToLookFor Select w).FirstOrDefault
If win IsNot Nothing Then
    DirectCast(win, MainWindowForm).imglogin.Visibility = Windows.Visibility.Visible
    DirectCast(win, MainWindowForm).Focus()
End If 
```

我之前在其他论坛上找到了这段代码，并在 vb.net 中帮助了我很多......但现在我想在 c# 中使用这段代码来调用控件......所以我使用 SharpDevelop（一个很好的软件）对其进行了转换。 ...

```
 string strWindowToLookFor = typeof(MainWindowForm).Name;
        this.Close();
        var win = (from w in Application.Current.Windowswhere ((Window)w).GetType().Name == strWindowToLookForw).FirstOrDefault;
        if (win != null) {
            ((MainWindowForm)win).imglogin.Visibility = System.Windows.Visibility.Visible;
            ((MainWindowForm)win).Focus();
        } 
```

问题是它给了我一个错误：

**错误 1 ​​找不到源类型“System.Windows.WindowCollection”的查询模式的实现。'哪里' 没有找到。考虑明确指定范围变量“w”的类型。**

错误 #1 突出显示了 Application.Current.Windows。

**错误 2 查询正文必须以 select 子句或 group 子句结尾**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:00:52.523

我不认为你真的需要在这里使用反射。你可以尝试一些更简单的东西：

```
var mainWindow = Application.Current.Windows.OfType<MainWindowForm>()
                                            .FirstOrDefault();

if (mainWindow != null)
{
   //Visibility stuff goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:37:04.180

```
from w in Application.Current.Windowswhere

from w in Application.Current.Windows where

var win = (from w in Application.Current.Windows where ((Window)w).GetType().Name == strWindowToLookForw select w).FirstOrDefault() 
```

编辑：上面应该是完全修改的行。为“where”条件添加了空格并添加了“select”语句。

提醒一句：工具和示例旨在帮助理解，它们不能替代它。请务必阅读并理解您遇到的示例以及工具生成/转换的内容。

而且C#并不比VB.Net“更好”，它是同一平台上的不同语言。当然，很多人会认为它更好。:)

# google-tv - 如何检测 GTV 返回主窗口或启动新活动

> ID：11622457
> 
> 赞同：0
> 
> 时间：2012-07-24T00:26:17.693
> 
> 标签：google-tv

Google TV 有一个主页按钮，可让用户返回主页窗口。

如何确定它不是一个新的应用程序推出？我认为通常当我们回到家时，我们可以保持我们的应用程序处于活动状态（此时活动暂停），例如保持视频播放。但是如果它启动一个新的应用程序，我们应该停止视频并释放资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:14:50.920

当您的应用失去[AudioFocus](http://developer.android.com/training/managing-audio/audio-focus.html)时，您应该暂停/停止视频。或者，您可以只使用普通的[Android Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html)，然后覆盖 onPause() 然后停止/暂停。然后，您将在调用 onResume() 时恢复。

# android - Android - 尝试显示具有多列的列表时出现异常

> ID：11622460
> 
> 赞同：0
> 
> 时间：2012-07-24T00:26:32.187
> 
> 标签：android, android-layout, android-listview

我有一个列表，其中有一列与适配器一起使用，并且有效。现在我试图把它分成两列，但我遇到了例外。

我正在关注本教程，这似乎是最简单的：[http ://www.heikkitoivonen.net/blog/2009/02/15/multicolumn-listview-in-android/](http://www.heikkitoivonen.net/blog/2009/02/15/multicolumn-listview-in-android/)

我有一个这样声明的 Java Activity：

```
public class SeeAllQuestionsActivity extends ListActivity 
```

这是一些代码：

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
    FlurryAgent.onStartSession(this, "8CA5LTZ5M73EG8R35SXG");

    setContentView(R.layout.all_question_page);
... 
```

这是 all_question_page xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="3px"
        >

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<TextView
    android:id="@+id/loading_questions" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Some prompt text."
    android:textSize="10sp"
    />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>
</LinearLayout> 
```

顺便说一句，如果有人可以向我解释引用列表 id 的两种语法之间的差异，那就太好了：

```
 android:id="@android:id/list"  
  android:id="@+id/list" 
```

仅供参考，这些都不适合我:)

这是 questions_list.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/TRAIN_CELL"
         android:layout_width="50dip"
         android:layout_height="wrap_content"/>

     <TextView android:id="@+id/FROM_CELL"
         android:layout_width="70dip"
         android:layout_height="wrap_content" android:layout_weight="1"/>

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="60dip"
         android:layout_height="wrap_content"  android:layout_weight="1"/>
</LinearLayout> 
```

当我在模拟器上运行它时，它会因运行时异常而崩溃，并抱怨这一行：`setContentView(R.layout.all_question_page);`并且错误是：

```
 java.lang.RuntimeException: 
Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

请帮忙，我很卡住

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:52:44.343

不同之处似乎在于前者是您使用 ListActivity 所需要使用的，而后者是您在不使用 ListActivity 时需要使用的，而只是普通的 Activity。所以你必须坚持。（注意：我从来没有亲自使用过 ListActivity，所以我不能完全保证这一点）

```
android:id="@android:id/list" 
```

我还建议从您的 ListView 中删除这些行：

```
android:text="@+id/label"
android:textSize="20px" 
```

text 和 textSize 都不是[ListView](http://developer.android.com/reference/android/widget/ListView.html)的有效属性。对于任何文本是有效属性的小部件，我认为您永远不会希望将文本设置为类似于`"@+id/label"`. 如果您尝试从您的 strings.xml 文件中引用一个字符串，您需要使用`"@string/label"`. 为文本引用这样的 id 会将一些十六进制代码放入对用户没有意义的文本中（如果它完全有效的话）。

删除这些可能会解决您的问题，如果是这样的话，我的猜测是，将文本设置为另一个 id 会使某些东西混淆为认为您的列表没有 id`list`

如果那不能解决您的问题，我建议切换到普通的 Activity 而不是 ListActivity 并`findViewById()`像在您链接的示例中那样获取对您的 ListView 的引用。

# php - 防止 SQL 注入

> ID：11622462
> 
> 赞同：3
> 
> 时间：2012-07-24T00:26:44.557
> 
> 标签：php, filtering, sql-injection

我正在尝试学习 php 并想使用一个函数来保护表单免受 SQL 注入！但是以某种方式记录我的数据库每个包含任何特殊字符的数据，例如 '"=)/()/*/

我的过滤功能：

```
function filter($data) {
    $data = trim(htmlentities(strip_tags($data)));

    if (get_magic_quotes_gpc())
        $data = stripslashes($data);

    $data = mysql_real_escape_string($data);

    return $data;
} 
```

注册页面以获取 POST 数据：

```
foreach($_POST as $key => $value) {
    $data[$key] = filter($value);
} 
```

然后我正在尝试特殊字符并保存它们！我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:29:40.223

如果要防止 SQL 注入，最好的方法是使用[PDO](http://www.php.net/manual/en/book.pdo.php)和准备好的查询，其中所有用户提供的数据都通过 传递[`execute()`](http://php.net/manual/en/pdostatement.execute.php)，如下所示：

```
$stmt = $pdo->prepare("INSERT INTO foo (a_column, b_column) VALUES (:a, :b)");
$stmt->execute(array(':a' => $a, ':b' => $b)); 
```

您不必对`$a`或执行任何操作`$b`；无论您使用哪个数据库，PDO 都会以正确的方式绑定参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T00:31:49.187

呃...防止 SQL 注入的重点是继续允许用户键入他们喜欢的任何内容，而不会使服务器或其他用户处于危险之中。`htmlspecialchars`是一个很好的起点，因为它需要看起来像 HTML 标记的东西并使它们不被关注。您使用的`stripslashes`很好，尽管最新版本的 PHP 删除了魔术引号。`mysql_real_escape_string`允许您以具有合理安全性的字符串形式在数据库中插入任何内容。

所以你的过滤功能应该是这样的：

```
function filter($data) {
    if( get_magic_quotes_gpc()) $data = stripslashes($data);
    return trim(mysql_real_escape_string(htmlspecialchars($data));
} 
```

现在，如果您真的想要一个*过滤器*，例如只允许某些字符的过滤器，请使用正则表达式函数，例如[`preg_match`](http://php.net/preg-match).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:31:26.127

停止使用 mysql_* 函数，因为它们已被弃用。请改用[PHP 数据库对象 (PDO)](http://php.net/manual/en/book.pdo.php)，因为 PDO 允许参数绑定，从而保护您免受 sql 注入。

[您可以在此处](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)阅读有关使用 PDO的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T00:34:02.140

如果不使用框架，还可以考虑检查正则表达式。示例：[http ://www.symantec.com/connect/articles/detection-sql-injection-and-cross-site-scripting-attacks](http://www.symantec.com/connect/articles/detection-sql-injection-and-cross-site-scripting-attacks)

# ruby-on-rails - 如何将橡胶 ec2 配置为使用单个安全组？

> ID：11622473
> 
> 赞同：0
> 
> 时间：2012-07-24T00:27:38.807
> 
> 标签：ruby-on-rails, amazon-ec2

我正在使用`3.1.3`以下轨道和橡胶宝石`2.0.2`：

[https://github.com/wr0ngway/rubber](https://github.com/wr0ngway/rubber)

当我运行`cap rubber:create_instance`脚本在 Amazon EC2 上创建 5 个以上的安全组时，我想将其配置为仅使用一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:15:06.323

The best thing to do is to pre-define the security group ahead of time, and then assign it to your instances using the `assigned_security_groups:` config in the `rubber.yml` file.

Also, make sure `auto_security_groups:` and `isolate_security_groups:` are set to false.

# android - 我怎样才能杀死我的 Android 平板电脑上除了我的应用程序之外的所有东西，并让它们全部死掉？

> ID：11622480
> 
> 赞同：1
> 
> 时间：2012-07-24T00:28:39.473
> 
> 标签：android, background, kill

请不要告诉我这是什么坏主意。我没有将它用作 Android 平板电脑。这是我公司正在设计的一个医疗系统的接口。它的唯一功能就是控制我们正在构建的系统。

话虽如此，我怎样才能从平板电脑中删除所有内容，只运行我的应用程序，直到平板电脑死机或重新安装标准固件？

该平板电脑专门用作我的程序的接口控制面板和 CPU，该程序从外部控制医疗设备。我不想要平板电脑上的任何其他内容。除了在我的设备上运行我的程序之外，我不希望用户做任何事情。

如何在平板电脑的整个生命周期内锁定用户只使用我的程序？

（我正在构建一个恰好使用 Android 平板电脑来控制它的系统。基本上，我认为使用平板电脑会更容易，而不是从头开始设计一个基于一个或多个微处理器并使用定制设计和内置彩色界面面板。如果医生想在办公室使用安卓平板电脑，欢迎购买。）

先感谢您。

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:11:36.237

如果您希望这样做，您将必须构建自己的 Android 版本。出于多种原因，不可能制作出能够满足您需求并使其在消费类设备上运行的应用程序。

您需要如何自定义操作系统构建将取决于您的确切硬件。但最简单的修改是从`system/app/`和`data/app/`

[AOSP](http://source.android.com/)和[XDA-Developers](http://www.xda-developers.com/)是学习构建自定义 ROM 细节的两个重要资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:35:21.827

如果设备具有合理的功率，则无需担心后台进程。

如果这是一个消费产品，那么它可能具有 Google Apps 套件和其他相关项目，在这种情况下，将其植根而不安装这些将是最佳途径。AOSP 只运行开箱即用的运行 Android 所需的进程。

编辑：您可能只是将应用程序编写为启动器，而不允许打开其他应用程序作为实现目标的最佳途径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:06:28.510

I'm facing similar obstacles utilizing my business tablets. I want to restrict all the pre-loaded applications & only allow the tablet to be utilized for certain applications. White listed websites & such. I wonder if a 3rd party service such as ZENPRISE might offer a mobile management system that would take care of this for me?

[zenprise](http://www.zenprise.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T00:59:54.337

您可能需要自定义 ROM。这实际上取决于您的设备支持的 Android 版本。查看下面列表中的最后一个。

[http://www.redmondpie.com/best-most-popular-custom-roms-for-android-and-why-you-should-try-them-out/](http://www.redmondpie.com/best-most-popular-custom-roms-for-android-and-why-you-should-try-them-out/)

# iphone - 在 iOS 中添加应用程序范围的标题视图的最佳实践

> ID：11622481
> 
> 赞同：0
> 
> 时间：2012-07-24T00:28:53.210
> 
> 标签：iphone, ios, ipad

假设我的主视图控制器将是一个带有杂项子视图控制器的标签栏（即第一个将是导航控制器，第二个将是 uiviewcontroller 的子类等）

现在我想添加一个静态标题视图（将至少包含一个徽标 uiimageview 像网站）

那么实现这一目标的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:42:47.550

**编辑：**正如马克亚当斯在下面的评论中解释的那样，这*不是*一个好策略。我会留下它作为不做什么的说明。

* * *

“最佳实践”是一个冒险的术语，但我立即想到的是让您`UITabBarController`成为 parent 的根且唯一的视图控制器`UINavigationController`。`UIImageView`然后，您可以在导航栏中放置您喜欢的任何徽标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:46:12.997

如果您不想要一种`UINavigationBar`样式，那么我建议您继承 UIView 并创建您的自定义视图并使用简单的实现和偏移值将其添加到您的每个`UIViewControllers`. 它很麻烦，但它避免了`UINavigationControllers`对您的项目不必要的投入。

至于最佳实践，您应该始终将 the`UITabBarController`作为窗口的根，而不是将 a`UINavigationController`和 a`UITabBarController`作为根。

另外，我很欣赏其他海报的名字。

# asp.net-mvc - 带有扩展的请求在 asp.net mvc 中抛出 404

> ID：11622482
> 
> 赞同：0
> 
> 时间：2012-07-24T00:29:19.260
> 
> 标签：asp.net-mvc, iis-7.5

我所有以 .jpg、.gif 等任何扩展名结尾的请求都抛出 404。这些请求的内容来自数据库。如果我在请求中附加一个尾随反斜杠，它就可以工作。

[http://www.example.com/1.jpg](http://www.example.com/1.jpg) **不起作用**

[http://www.example.com/1.jpg/](http://www.example.com/1.jpg/) **作品**

我已将 runAllManagedModulesForAllRequests 设置为 true，但我认为它未在 7.5 中使用。

这在我的盒子里也很好用，但在测试盒里不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:44:45.820

我编辑了我的 web.config 并添加了以下内容以使 .json 工作。

```
<handlers>
  ...
  <add name="MyJsonHandler" path="*.json" verb="*" type="System.Web.UI.PageHandlerFactory" resourceType="Unspecified" preCondition="integratedMode" />
</handlers> 
```

您可以在 web.config 中手动执行此操作，或使用 IIS 在您正在配置的网站的 HTTP 处理程序中对其进行管理。

# php - POST 到 php 并返回包含已发布数据的页面

> ID：11622484
> 
> 赞同：0
> 
> 时间：2012-07-24T00:29:30.667
> 
> 标签：php, post

我有一个 download.php 文件和一个 index.php 文件。我希望 download.php 将数据发布到 index.php，然后在浏览器窗口中显示 index.php，其中包含发布的数据。这可能吗？我以为我可以为此使用 curl ，但这不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:41:48.813

您可以使用[jQuery.post()](http://api.jquery.com/jQuery.post/)

```
//post the data
$.post('ajax/test.html',{ name: "test", time: "2pm" }, function(data) {

    //replace the .result div with the
    //response from the server
    $('.result').html(data);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:33:57.493

你的代码出了什么问题？您可以使用卷曲。

试试这个：[http ://www.askapache.com/php/sending-post-form-data-php-curl.html](http://www.askapache.com/php/sending-post-form-data-php-curl.html)

# paypal - Paypal 付款数据传输在沙箱中不起作用

> ID：11622493
> 
> 赞同：3
> 
> 时间：2012-07-24T00:30:24.307
> 
> 标签：paypal, eclipse-pdt

我试图让 Paypal 在交易后重定向到我的网站并检索有关交易的信息。到目前为止，Paypal 确实重定向到了正确的位置，但是我之后返回到 Paypal 的 php curl 操作检索到一个错误页面，而不是我期待的 SUCCESS/FAIL 消息：

> 抱歉 - 您的最后一个操作无法完成
> 
> [...]
> 
> 我们目前无法完成您的请求。请单击重试或稍后重试。我们对不便表示抱歉。
> 
> 消息 3004

我试过让我的代码在屏幕上打印'tx'参数，手动构建我的请求并将其直接放在浏览器中，即：

[https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-synch&tx=34A96012RS258972T&at=x7cYS4yOvBi2k_LuLWsJ3h_J-2n-29VCgzhFDR79on8s1mQSlSxIIIibiW3e](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-synch&tx=34A96012RS258972T&at=x7cYS4yOvBi2k_LuLWsJ3h_J-2n-29VCgzhFDR79on8s1mQSlSxIIibiW3e)

但是返回了上述相同的错误页面。

我已登录到我的沙盒 paypal 帐户，并且“at”参数包含与我的沙盒商家测试帐户关联的正确支付数据传输身份令牌。

我的请求是否缺少任何内容？我没有用我的实际 Paypal 帐户对其进行测试，因为在我知道它有效之前我不想要任何真实的货币兑换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:44:46.067

同样的错误 - 两周前注意到 - 已与贝宝联系，后者告诉我检查我的代码 - 但即使复制和粘贴代码示例仍然会产生错误。登录测试卖家账号，能看到交易吗？我可以但再次单击详细信息视图会生成错误。

我能够通过此帐户通过 PDT，但随后它突然开始失败，而我的代码没有任何更改。

2012 年 7 月 31 日更新：Paypal 仍未确认解决方案 - 与商家电话支持而不是技术团队交谈，因为他们显然没有电话技术支持 - 商家建议基本上告诉他们进行现场测试并避免沙盒。每次测试至少 20 便士，因为您必须退还您的测试交易。

我可以告诉你不是一个很快乐的人。:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T12:58:31.583

```
$tx=$_REQUEST['tx'];

$paypal_url='https://www.paypal.com/cgi-bin/webscr?cmd=_notify-synch&tx='.$tx.'&at=token here';

$curl = curl_init($paypal_url);

$data = array(

"cmd" => "_notify-synch",

"tx" => $tx,

"at" => "token here"

);                                                                    

$data_string = json_encode($data); 

curl_setopt ($curl, CURLOPT_HEADER, 0);

curl_setopt ($curl, CURLOPT_POST, 1);

curl_setopt ($curl, CURLOPT_POSTFIELDS, $data_string);

curl_setopt ($curl, CURLOPT_SSL_VERIFYPEER, 0);

curl_setopt ($curl, CURLOPT_RETURNTRANSFER, 1);

curl_setopt ($curl, CURLOPT_SSL_VERIFYHOST, 1);

$headers = array (

'Content-Type: application/x-www-form-urlencoded',

'Host: www.paypal.com',

'Connection: close'

);

curl_setopt ($curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);

curl_setopt ($curl, CURLOPT_HTTPHEADER, $headers);

$response = curl_exec($curl);

$lines = explode("\n", $response);

$keyarray = array();

if (strcmp ($lines[0], "SUCCESS") == 0) {

for ($i=1; $i<count($lines);$i++){

list($key,$val) = explode("=", $lines[$i]);

$keyarray[urldecode($key)] = urldecode($val);

}

$first_name=$keyarray['first_name'];

$last_name=$keyarray['last_name'];

$payment_status=$keyarray['payment_status'];

$business=$keyarray['business'];

$payer_email=$keyarray['payer_email'];

$payment_gross=$keyarray['payment_gross'];

$mc_currency=$keyarray['mc_currency']; 

} 
```

# android - Android 使用计数器结果设置 ImageView 的可见性

> ID：11622494
> 
> 赞同：0
> 
> 时间：2012-07-24T00:30:35.117
> 
> 标签：android, imageview, visibility, counter

我有一个计数器，我想让这个计数器的结果决定 a 的可见性`ImageView`：

```
ImageView image_A_wrong = (ImageView) findViewById(R.id.IVimage_a_wrong); 
```

ImageView 的 XML：

```
<ImageView android:src="@drawable/small_wrong"
     android:id="@+id/IVimage_a_wrong" 
     android:layout_width="48dp"
     android:layout_height="48dp"
     android:layout_marginLeft="-50dp"
     android:padding="0dp"
     android:visibility="invisible"/> 
```

我已经尝试了几件事..这是我想要完成的一些伪代码

```
@Override
public void setVisible(boolean visible) {
    super.setVisible(visible);
    if (score == 0 ){
        image_A_wrong.getVisibility(View.VISIBLE);
    } else if(score == 1){
        image_A_wrong.getVisibility(View.VISIBLE);      
    }
} 
```

我在 tuts 和 Adroid 的 Dev 页面上环顾四周，但似乎找不到/理解适用于我需求的解决方案...thnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:22:06.517

您应该使用 setVisibility() 方法而不是 getVisibility()：

```
 imageview.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:35:47.973

因此[View#VISIBLE](http://developer.android.com/reference/android/view/View.html#VISIBLE)将其标记为可见，[View#INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)将其标记为不可见，而[View#GONE](http://developer.android.com/reference/android/view/View.html#GONE)完全隐藏了视图。这是您需要对代码执行的操作：

```
@Override
public void setVisible(boolean visible) {
    super.setVisible(visible);
    if (score == 0 ){
        //Hide the view
        image_A_wrong.setVisibility(View.INVISIBLE);
    } else if(score == 1){
        //Show the view
        image_A_wrong.setVisibility(View.VISIBLE);      
    }
} 
```

我建议阅读[View#setVisibility](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)文档以获得更好的想法。

编辑：我也不知道您在上面的代码中显示的 View#setVisible(boolean) 来自哪里。那不是`View`我所知道的功能...

# ruby-on-rails - 在 JSON 响应中返回 CSRF 令牌

> ID：11622496
> 
> 赞同：3
> 
> 时间：2012-07-24T00:30:39.333
> 
> 标签：ruby-on-rails, session, csrf

我正在构建一个应用程序，它将（希望）通过 JSON 处理会话创建和销毁。目前，我发现这样做的最好方法是让 Rails`form_authentication_token`作为对登录的成功 JSON 响应的一部分返回 ，即（在我的 Api::SessionsController 中）：

```
def create
  @user = User.find_for_authentication(email: params[:email])

  if @user && @user.valid_password?(params[:password])
    sign_in(@user)
    render json: { success: true, token: form_authenticity_token }
  else
    render json: { success: false, errors: ['Invalid email or password'] }, status: 401
  end
end 
```

但是，我对 CSRF 相关安全性的了解还不够扎实，无法知道这是否是一件坏事。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:07:09.233

我认为这应该是安全的事情。同源策略应该保护您免受恶意站点的侵害，该站点能够执行您的一个用户的 CSRF 登录并随后从响应中窃取令牌。浏览器不会向不同域的主机提交 JSON 请求。

JSON劫持（http://haacked.com/archive/2009/06/24/json-hijacking.aspx）之类的东西在理论上是可能的（尽管它已经在我知道的所有浏览器中进行了修补），但这种威胁应该是减轻以及假设以下情况：

*   您只在创建操作中返回令牌
*   此操作只能通过发布请求访问

# python - 按startswith match排序查询结果

> ID：11622501
> 
> 赞同：4
> 
> 时间：2012-07-24T00:31:11.733
> 
> 标签：python, django, django-queryset

我们正在做一个站点搜索，我们在其中搜索一个带有`icontains`. 它工作得很好，但出现的结果在顶部没有最相关的结果。

一个例子是搜索“权力的游戏”。如果搜索是“Game of”，第一个结果可能是“Crazy Game of...”，第二个结果可能是“Game of Thrones”

本质上，我想用 搜索`icontains`，但按`startswith`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-01-23T20:06:12.113

自从提出这个问题以来，Django 添加了新功能，现在本地处理这个用例。

您可以使用 Django 的 QuerySet API 中的以下功能通过任意比较对结果进行排序：

1.  **[`Q()`Object](https://docs.djangoproject.com/en/latest/ref/models/querysets/#q-objects)**：封装了一个可重用的查询表达式。我们的表达式将对象的字段与我们的“ *Game of* ”搜索值进行比较。
2.  **[`ExressionWrapper()`](https://docs.djangoproject.com/en/latest/ref/models/expressions/#expressionwrapper-expressions)**: 包装一个查询表达式，以便`ModelField`用`output_field`. 在这种情况下，类型是布尔值。
3.  **[`annotate()`](https://docs.djangoproject.com/en/latest/ref/models/querysets/#annotate)**[`ModelField`](https://docs.djangoproject.com/en/latest/ref/models/fields/#field-types)：根据查询表达式的结果，动态地向每个 QuerySet 对象添加一个。我们想添加一个`True`/`False`字段进行排序。
4.  **[`order_by()`](https://docs.djangoproject.com/en/latest/ref/models/querysets/#order-by)**：按指定字段对 QuerySet 对象进行排序。我们希望按带注释的字段值反向排序，以便`True`首先显示值。

```
 from django.db.model import Q, ExpressionWrapper, BooleanField

    ....

    # Your original setup.
    search_term = 'Game of'
    data = MyModel.objects.filter(name__icontains=search_term)

    # Encapsulate the comparison expression.
    expression = Q(name__startswith=search_term)

    # Wrap the expression to specify the field type.
    is_match = ExpressionWrapper(expression, output_field=BooleanField())

    # Annotate each object with the comparison.
    data = data.annotate(my_field=is_match)

    # Order by the annotated field in reverse, so `True` is first (0 < 1).
    data = data.order_by('-my_field')

    .... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T01:03:19.940

您描述的顺序是主观的，并且数据库中没有类似的数据（我知道）。如果这样的功能很重要，您可能需要查看像[Solr](http://lucene.apache.org/solr/)或[Sphinx](http://sphinxsearch.com/)这样的搜索引擎，您可以在其中配置如何确定相关性分数。

# jquery - $.each() 回调未定义 (jQuery)

> ID：11622504
> 
> 赞同：-1
> 
> 时间：2012-07-24T00:31:48.413
> 
> 标签：jquery, ajax, arrays, each

我正在尝试构建一个非常简单的管理区域，管理员可以在其中批准或拒绝图像/链接广告，然后再将它们显示在网站上。他们将使用包含“接受”或“拒绝”ID 的单选按钮，其值为广告的唯一 ID 号。

我想我会给这个非常方便`.each()`的函数一个尝试，将所有接受和拒绝的广告放入它们自己的数组中，然后让 PHP 相应地处理它们中的每一个。

但是，在提交表单时，我`Callback is undefined`从 FireBug 控制台收到错误消息。

示例 HTML（由 PHP 输出）：

```
<li><input type="radio" name="' . $a['adID'] . '" id="accept" value="' . $a['adID'] . '" /> Approve</li>
<li><input type="radio" name="' . $a['adID'] . '" id="reject" value="' . $a['adID'] . '" /> Reject</li> 
```

*   ...这是jQuery代码：

    ```
    $(document).ready(function() {

            $("#save").click(function() {
                var arrayOfAccepted = new Array();
                var arrayOfRejected = new Array();

                $.each("input:radio[id='accept']:checked"), function() {
                    arrayOfAccepted.push($(this).val());
                }

                $.each("input:radio[id='reject']:checked"), function() {
                    arrayOfRejected.push($(this).val());
                }

                    $.ajax({
                    type: 'POST',
                    url: 'exe/fn.moderateAds.php',
                    data: {acceptedAds : arrayOfAccepted, rejectedAds : arrayOfRejected},
                    success: function() {
                    alert("Changes saved successfully.");
                    }
                    });
                });
            }); 
    ```

    `acceptedAds`/`rejectedAds`在数据参数中将是我希望 PHP 在查找数组时识别数组的变量。

    语法错误，还是我通过 AJAX 函数传递数据的方式有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:33:09.440

您的右括号位于错误的位置，您不是在选择元素，而是在迭代一个字符串。此外，您的选择器有点过于具体。

```
$.each("input:radio[id='accept']:checked"), function() {
    arrayOfAccepted.push($(this).val());
} 
```

应该：

```
$("input:radio[id='accept']:checked").each(function() {
    arrayOfAccepted.push($(this).val());
}); 
```

另一个也一样。现在，它被视为一个逗号运算符，其左侧操作数为`$.each("input:radio[id='accept']:checked")`（因此您会看到错误）和一个从未使用过的匿名函数的右侧操作数。

代码提示：使用`[]`代替`new Array()`.

# java - Eclipse 找不到 JVM.dll

> ID：11622507
> 
> 赞同：2
> 
> 时间：2012-07-24T00:31:58.817
> 
> 标签：java, eclipse

当我尝试安装 Eclipse 时，我收到一条错误消息，指出“Eclipse 找不到`jvm.dll`，因为它不在我的`/bin`文件夹中。我似乎无法在我的机器上找到此文件，也不在`/bin`文件夹中。我必须下载这个文件并将其放在我的`/bin`文件夹中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T04:04:41.500

您使用的是 eclipse 64 位版本，而您的 jdk 是 32 位的。尝试安装 64 位 jdk 或使用 32 位 eclipse

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:53:10.657

> 我的机器上没有这个

这取决于你的意思。

如果您的意思是您不知道在哪里可以找到它，那么请尝试 windows 搜索。

如果您的意思是您已经查看过，但该文件在任何地方都不存在，那么......是的......您的安装没有工作。

如果您的意思是您找到了 DLL，但它不在您期望的“/bin”中，那么您需要配置 Eclipse 以在您找到它的位置查找它。

# github - Github：如何将要点嵌入到 README.md 中？

> ID：11622509
> 
> 赞同：51
> 
> 时间：2012-07-24T00:32:38.847
> 
> 标签：github, markdown

是否可以将要点嵌入到位于 GitHub 存储库中的 README.md 文件中？

就像是：

```
<code id="gist-3167145"></code> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T00:54:22.593

不，对不起，这是不可能的。您必须在 README.md 中有指向它的链接或复制其内容。

[Github Flavored Markdown](https://help.github.com/articles/github-flavored-markdown)将向您展示可以放入 README.md 文件中的内容。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-08-16T01:22:45.033

更新：我的答案适用于通过 jekyll 构建的 github 页面。我在 markdown 中使用脚本标签，然后由 jekyll 处理。

由于 Markdown 支持 html，因此可以简单地使用**`<script>`**标签来嵌入 gist。

只需复制[github提供的gist的embed url](https://gist.github.com/)

[![在此处输入图像描述](../Images/a3c820c06320a610b3f32dbca1672dd2.png)](https://i.stack.imgur.com/iZVwn.png)

..并将其粘贴到您的降价文件中。

**示例：**复制以下内容并粘贴到您的降价文件中。

`<script src="https://gist.github.com/nisrulz/11c0d63428b108f10c83.js"></script>`

..这就是你会得到的

[![在此处输入图像描述](../Images/4aad1675ed44ed71a0dfe179fca3e2ac.png)](https://i.stack.imgur.com/B3tjF.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-22T16:39:24.930

如果您使用的是诸如[Gitdown 之](https://github.com/gajus/gitdown)类的降价预处理器，则可以这样做：

```
/**
 * Resolve Gist (https://gist.github.com/)
 *
 * @param {Object} config
 * @param {String} config.id Gist ID.
 * @param {String} config.fileName Gist file name. Default to gistfile1.txt.
 */
gitdown.registerHelper('gist', {
    compile: function (config) {
        config = config || {};
        config.fileName = config.fileName || 'gistfile1.txt';

        if (!config.id) {
            throw new Error('Gist ID must be provided.');
        }

        return new Promise(function (resolve) {
            var https = require('https');

            https.get({
                host: 'api.github.com',
                path: '/gists/' + config.id,
                headers: {
                    // User agent is required to communicate with Github API.
                    'user-agent': 'Gitdown – gist'
                }
            }, function(res) {
                var body = '';

                res.setEncoding('utf8');

                res.on('data', function (d) {
                    body += d;
                });

                res.on('end', function () {
                    var gist = JSON.parse(body);

                    if (!gist.files) {
                        throw new Error('Gist ("' + config.id + '") not found.');
                    }

                    if (!gist.files[config.fileName]) {
                        throw new Error('File ("' + config.fileName + '") is not part of the gist ("' + config.id + '").');
                    }

                    resolve(gist.files['gistfile1.txt'].content);
                });
            });
        });
    }
}); 
```

然后在您的降价中，您将使用 JSON 挂钩引用 Gist，例如

```
{"gitdown": "gist", "id": "d3e4212c799252bac5fa"} 
```

这个功能应该在不久的将来成为 Gitdown 的一部分（有一个未解决的问题，[https://github.com/gajus/gitdown/issues/7](https://github.com/gajus/gitdown/issues/7)）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-22T19:02:35.050

当使用*GitHub Pages*和 Jekyll 主题时，这在 2017 年是可行的：

请参阅[@benbalter](https://gist.github.com/benbalter)的[https://gist.github.com/benbalter/5555251](https://gist.github.com/benbalter/5555251)

简单如：`{% gist 123456789 %}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-04T23:41:11.473

有些人最终会来到这里，因为他们想使用自动生成的 gists 来使他们在 github 上的个人资料更加有趣，包括活动框、生产框等（[这些东西的列表](https://github.com/matchai/awesome-pinned-gists)）。但是，您应该注意，这些自动生成的要点不应添加到您的个人资料专用 README 文件中，而应使用个人资料页面上的“**自定义您的 pin** ”选项固定。

# javascript - 用 JavaScript 改变焦点

> ID：11622511
> 
> 赞同：1
> 
> 时间：2012-07-24T00:32:41.170
> 
> 标签：javascript, text, input, onfocus

如果满足条件，我有一个条件语句来执行此操作。我的 if 语句很好，其他一切都很好。这个想法是，如果选中某个复选框，则其中一个文本输入将被设置为某个值并且变得不可编辑。我遇到了这条线的问题。有一个更好的方法吗？我无法弄清楚出了什么问题！

```
document.getElementById('amount').onfocus = "this.blur()"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:35:47.157

禁用它怎么样

```
document.getElementById('amount').disabled = true; 
```

或使其只读

```
document.getElementById('amount').readOnly = true; 
```

[小提琴](http://jsfiddle.net/GqeUW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:38:22.700

尝试

```
onFocus = function(){return false;} 
```

或者您可以在输入标签中使用 readonly 属性。但我不确定它是否适用于所有浏览器。

# python - 整个 Django 项目中的空白 label_suffix

> ID：11622513
> 
> 赞同：12
> 
> 时间：2012-07-24T00:33:00.703
> 
> 标签：python, django, django-forms, django-templates

我想消除自动添加到整个 Django 项目中的表单标签的冒号 (:)。我想避免添加`label_suffix=''`到项目中的每个表单。

有没有一种简单的方法可以在任何地方覆盖它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T00:53:57.530

最好扩展 Django 的`Form`类，覆盖默认值，并从中扩展所有表单，如下所示：

```
from django import forms

class MySiteForm(forms.Form):
    def __init__(self, *args, **kwargs):
        kwargs.setdefault('label_suffix', '')
        super(MySiteForm, self).__init__(*args, **kwargs)

...

class RegistrationForm(MySiteForm):
    username = forms.CharField(max_length=255)
    ... 
```

# html - 用于定制产品的 HTML

> ID：11622519
> 
> 赞同：0
> 
> 时间：2012-07-24T00:33:58.503
> 
> 标签：html, css, list

我正在寻找创建一个可定制的产品，您可以更改并查看网站上的视觉变化。我发现这很难解释，所以如果您立即知道这方面的教程，我深表歉意。我只是不知道如何真正解释这个想法。

```
http: //bit. ly/L8DfF2 
```

在页面上，它显示了他们销售的产品，一个自定义的 xbox 360 控制器，有人可以指出我如何用这个想法创建一个自定义产品页面的正确方法。

只需看一眼源，它看起来显然是下拉列表，每个选项都连接到更改产品特定组件的图片。但是还有什么其他的吗？我习惯于将列出的或公告的选项连接到链接，我只是简单地将其连接到图片吗？只是不确定如何设置产品以显示您可以选择的更新选项是我最大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:40:23.960

嗯，它是基本图像，然后在它上面是一堆空图像。当您更改设置时，每个都有一些 onChange 侦听器，它会更改`src`这些空图像或其中一个……从而更改整体堆叠图像。

这是有关该概念的一些示例代码...在您的实现中，每个选择都会调整不同的图像（仅代表产品的相关部分）：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#shell {width:100px;height:100px;display:block; background-color:#f00;}
#button {width:50px;height:50px;display:block; background-color:#00f;}
</style>
</head>
<body>
<div id="shell"><div id="button"></div></div>
Shell:
<select onChange="col('shell',this.value)">
<!-- in your version the values below would be file names of images -->
<option value="#f00">Red</option>
<option value="#0f0">Green</option>
<option value="#00f">Blue</option>
</select><br/>
Button:
<select onChange="col('button', this.value)">
<!-- in your version the values below would be file names of images -->
<option value="#00f">Blue</option>
<option value="#f00">Red</option>
<option value="#0f0">Green</option>
</select>

<script>
function col(part,x){
    document.getElementById(part).style.backgroundColor=x;
    //in yours, it would be document.getElementById(part).src=x;
}
</script>
</body>
</html> 
```

# c++ - 使用新的展示位置

> ID：11622521
> 
> 赞同：0
> 
> 时间：2012-07-24T00:34:20.783
> 
> 标签：c++

下面的代码对我有用。这怎么能行？这不会是段错误吗？

```
char * buffer = new char[100];
float * in_buf = new(buffer) float[100]; 
```

我也有这样的课：

```
class Item
{
public:
   Item(int num)
   {
     u = new float[num];
     v = new float[num];
   }
   float * u;
   float * v;
   //And many other variables
} 
```

我想创建一块内存并在其中分配 v 和 u 。这种方法安全吗？

```
class Item
{
public:
   Item(int num)
   {
     buffer = new char[(sizeof(char)+2*sizeof(float))*num];
     u = new (buffer) float[num];
     v = new (buffer+sizeof(float)*num) float[num];
   }
   char * buffer;
   float * u;
   float * v;
   //And many other variables
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:40:00.780

1.  第二个语句是潜在的 UB（您正在`buffer`用作 100 的后备存储`float`，它们肯定比 100 更多的内存`char`）。不过，我对 UB 并不完全确定，因为`new`标量类型的默认操作是让它们保持未初始化，因此该语句实际上没有涉及任何内存。

2.  当然，你可以做到，但这是一个无用的过度复杂化，只需使用普通的`new`. 请记住，放置`new`仅适用于少数极端情况，通常不应使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T02:40:25.263

> 下面的代码对我有用。这怎么能行？这不会是段错误吗？

```
char* buffer = new char[100];
float* in_buf = new(buffer) float[100]; 
```

“作品”是什么意思？由于`new`此处的 s 不需要初始化/构造相关数据类型，因此它们不会（必然）触发从您隐含计划用于它们的内存中的读取或写入。因此，您可能看不到段错误的一个原因是代码*实际上*只执行此操作：

```
char* buffer = new char[100];
float* in_buf = reinterpret_cast<float*>(buffer); 
```

如果您继续读取或写入 ala `in_buf[99] = 2;`，则更有可能出现段错误，但远不能保证-该地址处的内存可能位于应用程序的虚拟地址空间中。例如，假设对 100 个字符的请求通过对一页内存的请求得到满足，并且操作系统页面大小 >= 4096 字节 - 恰好适合 1000 个 4 字节浮点数，或者因为更早`new`并且`delete`已经映射了内存。即使它实际上并没有立即发生段错误，也可能有一天会崩溃或损坏堆或其他堆托管数据。更一般地说，你可以在 C++ 中做很多不安全的事情，但实际上不会立即咬人......

> 这安全吗？

```
buffer = new char[(sizeof(char)+2*sizeof(float))*num];
u = new (buffer) float[num];
v = new (buffer+sizeof(float)*num) float[num]; 
```

是的（假设 num 的值是正常的），但它毫无意义地复杂（并且额外的字符毫无意义且令人困惑）。你可以简单地做：

```
u = new float[2 * num];
v = &u[num]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T00:59:01.890

您的第一个问题中的问题可以通过一个很小的变化来说明，除非您并排比较代码，否则您看不到它：

```
char * buffer = new char[100];
float * in_buf = new(buffer) float[100](); 
```

这给了我一个 MSVS 中的运行时堆损坏错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T02:52:34.067

正如提到的其他答案一样，这条线`float * in_buf = new(buffer) float[100];`将大部分数组放在`buffer`. 这不是段错误，因为尚未触及内存。

如果 u 和 v 没有有意义的构造函数（即它们是零初始化的），那么放置 new 没有意义，也不会像这样清晰：

```
class Item
{
public:
    Item(int num)
    {
        size_t buffer_size = sizeof(*buffer);
        size_t u_size = sizeof(*u) * num;
        size_t v_size = sizeof(*v) * num;
        buffer = new char[buffer_size + u_size + v_size];
        u = reinterpret_cast<float* >(buffer + buffer_size);
        v = reinterpret_cast<float* >(buffer + buffer_size + u_size);
    }
    char * buffer;
    float * u;
    float * v;
    //And many other variables
}; 
```

你需要一个运行时`num`参数吗？如果您可以侥幸逃脱，我建议您将 Item 模板化如下：

```
template <int NUM>
class Item
{
public:
    Item() {}
    char buffer[NUM];
    float u[NUM];
    float v[NUM];
    //And many other variables
}; 
```

# r - 来自ggplot2的分面网格中的相关值

> ID：11622526
> 
> 赞同：6
> 
> 时间：2012-07-24T00:34:32.010
> 
> 标签：r, ggplot2, facet, facets

在 ggplot2 中使用 facet_grid 时，我希望能够获得特定图右上角每个网格单元的子集数据的相关值。

例如，如果运行：

```
p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()
p + facet_grid(vs ~ am, margins=TRUE) 
```

我想在某处查看网格中 9 个图的相关值。在示例中的这个特定情况下，我希望通过目视检查每个都接近 -0.9 左右。

或者也许是一个输出表，它给出了与 facet_grid 匹配的表中每个单元格的相关值......（这不太理想，但也是一个选项）。

理想情况下，我想将此扩展到我选择的任何其他函数，以便它可以使用绘制的两个变量中的一个或两个来计算统计数据。

这可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:50:58.247

Winston Chang 建议在 ggplot2 小组上回答...这就是他所说的...这不是一个糟糕的答案...

你可以这样做：

```
p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()

# Calculate correlation for each group
cors <- ddply(mtcars, c("vs", "am"), summarise, cor = round(cor(mpg, wt), 2))

p + facet_grid(vs ~ am) +
geom_text(data=cors, aes(label=paste("r=", cor, sep="")), x=30, y=4) 
```

不过，我不认为用 margins=TRUE 来正确显示它是不可能的。如果你想要边距，你可能需要预处理你的数据，为每个分面变量添加一个 ALL 值。

-温斯顿

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T08:10:29.983

我宁愿为数据添加一个（线性）平滑器。它为您提供了比相关性更多的信息。

```
ggplot(mtcars, aes(mpg, wt)) + 
    geom_smooth(method = "loess", colour = "red", fill = "red") + 
    geom_smooth(method = "lm", colour = "blue", fill = "blue") + 
    geom_point() + facet_grid(vs ~ am, margins=TRUE) 
```

![在此处输入图像描述](../Images/d541247a9d143ee7a49f6e9461143a80.png)

```
ggplot(mtcars, aes(mpg, wt)) + geom_smooth(method = "lm") + geom_point() + 
    facet_grid(vs ~ am, margins=TRUE) 
```

![在此处输入图像描述](../Images/334c7f4fe92ec89009645b859121d147.png)

# mod-rewrite - 将 lighttpd 重写规则转换为 nginx

> ID：11622529
> 
> 赞同：0
> 
> 时间：2012-07-24T00:35:05.383
> 
> 标签：mod-rewrite, nginx, rewrite, lighttpd

我有以下简单的`lighttpd`重写规则：

```
$HTTP["host"] =~ "^(app\.mydomain\.com)$" {
    url.rewrite-once = (
            "^[^.]*$" => "controller.php/$1"
    )
} 
```

我正在尝试将此规则移植到`nginx`并具有以下内容：

```
server {
  listen 80;

  server_name app.mydomain.com;

  if ($host = 'app.mydomain.com') {
    rewrite ^[^.]*$ controller.php/$1 last;
  }

  root /srv/www/domains/app.mydomain.com;

  index index.php;

  access_log /var/log/nginx/domains/app.mydomain.com/access.log;
  error_log /var/log/nginx/domains/app.mydomain.com/error.log;

  include /etc/nginx/excludes.conf;
  include /etc/nginx/php.conf;
  include /etc/nginx/expires.conf;
} 
```

问题是nginx的重写规则不能正常工作？知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:34:47.260

您需要在前面加上一个斜线，`controller.php`并且您可能不需要在 rewrite 周围使用 if 块，因为无论如何它都是虚拟主机的服务器名称。

```
rewrite ^[^.]*$ /controller.php/$1 last; 
```

# c# - C# 错误：当前上下文中不存在名称“已处理”

> ID：11622535
> 
> 赞同：0
> 
> 时间：2012-07-24T00:35:35.880
> 
> 标签：c#, visual-studio-2010, class, events

在下面关于 Visual Studio express C# 的代码中，我收到一条错误消息，指出当前上下文中不存在名称“handled”。我究竟做错了什么？已处理的返回通知软件它不应继续执行通常在双击时会执行的操作。

```
public class SettingsComponentAttributes : ComponentAttributes
{
    public override ObjectResponse RespondToMouseDoubleClick(Canvas sender, CanvasMouseEvent e)
    {
        ((SettingsComponent)Owner).ShowSettingsGui();
        return handled;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:20:06.653

以下是我解决问题的方法：

```
public class SettingsComponentAttributes : ComponentAttributes
{
    public override ObjectResponse RespondToMouseDoubleClick(Canvas sender, CanvasMouseEvent e)
    {
        ((SettingsComponent)Owner).ShowSettingsGui();
        return ObjectResponse.handled;
    }
} 
```

# php - 获取数组的键和值并将其分配给 PHP 中的另一个数组。（新手在这里）需要建议

> ID：11622538
> 
> 赞同：1
> 
> 时间：2012-07-24T00:35:50.310
> 
> 标签：php

我正在寻找一种从数组中提取/获取值并将值分配给变量并获取所有值之和的方法。

更具体地说，用户将输入一组字母。如果存在匹配，将输入的字母将与现有数组的键进行比较。当数组中有匹配项时，键的对应值（具有匹配项）将分配给一个新变量，并计算值的总和（w/c 应为数字）。我一直在想办法解决这个问题，但由于经验不足，我还没有真正找到好的方法。

你们对此有什么想法吗？请问有什么建议吗？

以下是代码：

```
<?php
    class GreekNum
    {           
        public function setText($text)
        {
            $this->text=$text;
        }

        public function getText()
        {
            return $this->text;
        }       

        public function Convert($text)
        {

            $TextLength = strlen($text);
            $text = strtoupper($text);
            $text = str_split($text);       

            $collection = array(
                                    "A" => 1,
                                    "B" => 2,
                                    "G" => 3,
                                    "D" => 4,
                                    "E" => 5,
                                    "#" => 6,
                                    "Z" => 7,
                                    "Y" => 8,
                                    "H" => 9,
                                    "I" => 10,
                                    "K" => 20,
                                    "4" => 30,
                                    "M" => 40,
                                    "N" => 50,
                                    "X" => 60,
                                    "O" => 70,
                                    "P" => 80,
                                    "Q" => 90,
                                    "R" => 100,
                                    "S" => 200,
                                    "T" => 300,
                                    "U" => 400,
                                    "F" => 500, 
                                    "C" => 600,             
                                    "$" => 700,
                                    "W" => 800,
                                    "3" => 900, 
                                );

            if(isset($text))
            {
                $total = 0;
                for($i=0; $i<$TextLength; $i++)
                {
                    if(array_key_exists($text[$i], $collection))
                    {
                        $total += $text[$i];
                    }
                }
                return $total;

            }                   
        }

    }   

    $GreekNum = new GreekNum();

    $text = $_POST['text'];
    $GreekNum->setText($text);

    echo "<br>";
    echo "<b>Entered Values: </b><br>". $GreekNum->getText();
    echo "<br>";
    echo "<br>";

    echo "<b>Decimal Number Equivalence: </b><br/>". $GreekNum->Convert($text);

?> 
```

对于看过这些代码的人来说，是的，我已经发布了它，因为我似乎找不到一个错误。我能够修复错误，但现在的问题是我无法真正获得所需的输出。请理解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:01:02.483

如果您要获取输入的每个字母的值的总和，请替换为：

```
$total += $text[$i]; 
```

这样 ：

```
$total += $collection[$text[$i]]; 
```

# java - 如何在 Android 上使用 tabHost

> ID：11622539
> 
> 赞同：18
> 
> 时间：2012-07-24T00:35:55.490
> 
> 标签：java, android, xml, android-tabhost

我看过 Stack Overflow 上的帖子和其他网站上的教程，但我不明白如何使用`TabHost`. 有人可以向我解释一下，或者给我发一个教程的链接吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-24T09:17:29.180

![概念 TabHost](../Images/0b29032b6f4518fb627ebcdb2f8a6073.png)

![在此处输入图像描述](../Images/67abd587875c3151b4f989294ad3fc69.png)

1.  在 ManiActivity 扩展 TabActivity

    ```
    public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //setContentView(R.layout.activity_main);

        TabHost mTabHost = getTabHost();

        mTabHost.addTab(mTabHost.newTabSpec("first").setIndicator("First").setContent(new Intent(this  ,FirstActivity.class )));
        mTabHost.addTab(mTabHost.newTabSpec("second").setIndicator("Second").setContent(new Intent(this , SecondActivity.class )));
        mTabHost.setCurrentTab(0);

    }
    } 
    ```

> *   在这个活动中不要使用布局 "activity_main.xml" 。
>     
>     
> *   标签主机 mTab​​Host = getTabHost(); 是创建主选项卡。
>     
>     
> *   mTabHost.newTabSpec("first") 是创建 tabspec id "first"。
>     
>     
> *   setIndicator("First") 在标题选项卡中创建文本“First”。
>     
>     
> *   setContent(new Intent(this ,FirstActivity.class)) 是使用来自 FirstActivity.class (FirstActivity.java) 的内容
>     
>     
> *   mTabHost.addTab(....) 是将 spectab 添加到主选项卡
>     
>     
> *   mTabHost.setCurrentTab(0) 是起始页时的默认选项卡。

第一活动.java

```
public class FirstActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView( R.layout.first_layout );
}

} 
```

SecondActivity.java

```
public class SecondActivity extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView( R.layout.second_layout );
}
} 
```

> *   “R.layout.first_layout”是来自 first_layout.xml 的内容
>     
>     
> *   “R.layout.second_layout”是来自 second_layout.xml 的内容

在 AndroidManifest.xml 中，在示例 xml 中添加活动名称“.FirstActivity”和“.SecondActivity”。

![在此处输入图像描述](../Images/9a56725183ef36b4c6544ccac170eabf.png)

结束！！！！！

![在此处输入图像描述](../Images/70494beafec746a8753d1800905451aa.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-13T04:21:34.693

首先 while`TabHost`没有被弃用，`TabActivity`另一方面由于`Fragment`API 而被弃用。

TabHost 有两种使用方式；通过使用 Fragment`FragmentTabHost`并使用`TabHost.TabContentFactory`.

**1.通过片段使用`FragmentTabHost`**

此示例代码向您展示如何在 Activity 中使用 TabHost。

**FragmentTabHostActivity.java**

```
public class FragmentTabHostActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_tab_host_activity);

        FragmentTabHost fragmentTabHost = (FragmentTabHost) findViewById(android.R.id.tabhost);
        fragmentTabHost.setup(this, getSupportFragmentManager(), android.R.id.tabcontent);
        fragmentTabHost.addTab(getTabSpec1(fragmentTabHost), Tab1Fragment.class, null);
        fragmentTabHost.addTab(getTabSpec2(fragmentTabHost), Tab2Fragment.class, null);
    }

    private TabHost.TabSpec getTabSpec1(FragmentTabHost tabHost) {
        return tabHost.newTabSpec("First Tab")
            .setIndicator("Tab1");
    }

    private TabHost.TabSpec getTabSpec2(FragmentTabHost tabHost) {
        return tabHost.newTabSpec("Second Tab")
            .setIndicator("Tab 2");
    }
} 
```

**fragment_tab_host_activity.xml**

```
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </LinearLayout>

</android.support.v4.app.FragmentTabHost> 
```

实际上，通过使用 Fragment，您可以在 Fragment 中使用 Tab（[Android 文档](https://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)）。

**2.使用`TabHost.ContentFactory`**

**TabHostActivity.java**

```
public class TabHostActivity extends AppCompatActivity implements TabHost.TabContentFactory {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);
        tabHost.setup();

        tabHost.addTab(getTabSpec1(tabHost));
        tabHost.addTab(getTabSpec2(tabHost));
    }

    private TabHost.TabSpec getTabSpec1(TabHost tabHost) {
        return tabHost.newTabSpec("First Tab")
            .setIndicator("Tab1")
            .setContent(this);
    }

    private TabHost.TabSpec getTabSpec2(TabHost tabHost) {
        return tabHost.newTabSpec("Second Tab")
            .setIndicator("Tab 2")
            .setContent(this);
    }

    @Override
    public View createTabContent(String tag) {
        return LayoutInflater.from(this).inflate(R.layout.activity_tab_1, null);
    }
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </LinearLayout>

</TabHost> 
```

不过，我个人推荐使用最新的[Material Design 风格`TabLayout`类](https://guides.codepath.com/android/Google-Play-Style-Tabs-using-TabLayout)。

# c# - 在 ASCX WebControl 中检索 HtmlGenericControl 的内容

> ID：11622541
> 
> 赞同：0
> 
> 时间：2012-07-24T00:36:01.947
> 
> 标签：c#, asp.net, html, event-handling, click

我有`HtmlGenericControl`一个简单的 DIV`runat=server`

此控件嵌入在驻留在多个页面上的 ASCX WebControl 内。在 Page_Load 中，此元素由数据绑定到特定于页面的数据库数据的转发器填充。

我遇到的麻烦是 ASCX WebControls 似乎不太容易阅读自己元素的内容。

到目前为止，这失败了： [如何在 .NET (C#) 中获取 UserControl 的 HTML 输出？](https://stackoverflow.com/questions/288409/how-do-i-get-the-html-output-of-a-usercontrol-in-net-c)

我正在寻找一种在按钮单击中获取 HtmlGenericControl 内容的方法。我该怎么做？

*简化上一个问题。* [在 ASCX 中检索特定元素的 HTML](https://stackoverflow.com/questions/11622094/retrieve-html-of-specific-element-in-ascx#comment15391079_11622094)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:14:08.253

好的，我得到它的工作（我认为......）

### 输出

![在此处输入图像描述](../Images/3a3f6f0232cf231341f55d40800882d0.png)

### ASPX 代码背后

```
 public override void VerifyRenderingInServerForm(Control control)
    {
        //base.VerifyRenderingInServerForm(control);
    } 
```

### ASPX 标记

```
%@ Page EnableEventValidation="false" ..... 
```

### 后面的用户控制代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            var d = new QuestionsContext().GetQuestions();

            this.repeater.DataSource = d;
            this.repeater.DataBind();
        }
    }

    protected void getContent_Click(object sender, EventArgs e)
    {
        var sb = new StringBuilder();

        this.generic.RenderControl(new HtmlTextWriter(new StringWriter(sb)));

        string s = sb.ToString();

        this.Trace.Warn(Server.HtmlEncode(s));
        this.message.Text = Server.HtmlEncode(s);
    } 
```

### 用户控件标记

```
<div runat="server" id="generic">
    <asp:Repeater runat="server" ID="repeater" >
        <ItemTemplate>
            <%# Eval("QuestionText") %>
        </ItemTemplate>
    </asp:Repeater>
</div>

<br />
<asp:Button Text="Get content" ID="getContent" runat="server" OnClick="getContent_Click" />
<br />
<asp:Label ID="message" runat="server" /> 
```

# c# - Asp.Net MVC RedirectAction 或 Shared 方法

> ID：11622542
> 
> 赞同：1
> 
> 时间：2012-07-24T00:36:02.277
> 
> 标签：c#, asp.net-mvc, post-redirect-get

在我的控制器的一个动作中，我必须执行同一个控制器的另一个动作。这两个操作都在相同的安全上下文中。我是否必须调用 RedirectAction 来执行其他操作，还是必须创建一个两个操作都可以调用的共享方法？

**作为使用 RedirectAction 的示例：**

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Search(string value)
{
   IPresenter presenter = new Presenter();
   List<Item> items = presenter.GetList(value);

   if (items.Count > 1)
      return base.View("List", items);
   else
      return base.RedirectAction("Detail", new { id = items.First().Id });
}

[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Detail(int id)
{
   IPresenter presenter = new Presenter();

   return base.View(presenter.GetItemById(id));
} 
```

**还有一个使用共享方法的例子：**

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Search(string value)
{
   IPresenter presenter = new Presenter();
   List<Item> items = presenter.GetList(value);

   if (items.Count > 1)
      return base.View("List", items);
   else
      return this.GetDetail(id);
}

[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Detail(int id)
{
   return this.GetDetail(id);
}

private ActionResult GetDetail(int id)
{
    IPresenter presenter = new Presenter();

    return base.View(presenter.GetItemById(id));
} 
```

在共享方法的情况下，我的 http 请求比在 RedirectAction 的情况下少，但在 RedirectAction 中，我有一个使用 Asp.Net MVC 方式更自然的流程。

您认为哪种情况最好，为什么？如果两者都是好的，取决于情况，好的和坏的情况是什么？

*注意：我故意不使用帖子查询，因为我知道在这种情况下，[PRG 模式](http://www.stevefenton.co.uk/Content/Blog/Date/201104/Blog/ASP-NET-MVC-Post-Redirect-Get-Pattern/)对于防止客户端出现不需要的行为至关重要，因为在使用浏览器的后退按钮时，可能会向服务器发送多个帖子。*

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:25:04.867

这是个好问题。

即使我不能 100% 确定完全正确的答案，我也会在我的应用程序中使用“共享方法”方法。原因是——简单。

同时，您正确地注意到这`RedirectToAction`是更多的 ASP.NET MVC 方式。

对于您发布的这种情况，我会完全避免这种行为。如果用户请求项目的“列表”，您应该向他显示一个列表，即使集合中只有一个项目。如果他决定查看详细信息，他会点击它。因此，您拥有简单的控制器操作和干净的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:27:04.540

正如您所说，我认为您应该创建一个共享方法。如果您这样做`RedirectToAction`，则会向您的 Webbserver 发出新请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:47:51.417

嗯，也许你应该只返回另一个视图。费：

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Search(string value)
{
    IPresenter presenter = new Presenter();
    List<Item> items = presenter.GetList(value);

    if (items.Count > 1)
    {
        return base.View("List", items);
    }  
    else
    {
        //your logic and model from Detail Action f.e:
        var model = repository.GetDetailModel(items.First().Id);

        return View("Detail", model);
    }
} 
```

# scala - 如何将 request.body 转换为字节数组以计算 MD5？

> ID：11622543
> 
> 赞同：3
> 
> 时间：2012-07-24T00:36:07.990
> 
> 标签：scala, playframework

我正在 Play 中创建一个 scala 函数！验证对我的 Web 服务的请求的应用程序。身份验证基本上是 HMAC 身份验证。该方法接收要使用的 bodyParser 的类型。由于我不知道 -bodyParser 的类型，如何将 request.body 转换为可以运行 MD5 处理的通用 Array[Byte]？

```
def Authenticated[T](authType : AuthenticationType, bodyParser : BodyParser[T])(f : (Request[T]) => Result) = {

    Action(bodyParser) { request => 

      // Authentication logic starts here

      // TODO: Something like: var bodyData : Array[Byte] = request.body.toByteArray()

      // The rest is easy...
      var contentMD5 = calculateMD5(bodyDat)
      f(request)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:23:46.177

Play 接收到的任何请求正文都可以解析为[`Http.RawBuffer`](http://www.playframework.org/documentation/api/2.0/scala/play/api/mvc/RawBuffer.html)可以提供请求正文的纯原始字节数组表示的 a。

您正在寻找的代码行是

```
var bodyData : Array[Byte] = request.body.asRaw.asBytes() 
```

# android - 修复圆形 ViewPager 的动画

> ID：11622544
> 
> 赞同：15
> 
> 时间：2012-07-24T00:36:10.780
> 
> 标签：android, android-viewpager

**目标**

构建一个圆形 ViewPager。

第一个元素可让您到达最后一个元素并滑动到它，反之亦然。您应该能够永远向任一方向滑动。

现在这已经完成了，但是这些问题对我的实现不起作用。这里有几个供参考：

*   [如何创建圆形viewpager？](https://stackoverflow.com/questions/11465815/how-to-create-circular-viewpager)
*   [ViewPager 作为循环队列/包装](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping)
*   [https://github.com/antonyt/InfiniteViewPager](https://github.com/antonyt/InfiniteViewPager)

**我是如何尝试解决问题的**

我们将使用一个大小为 7 的数组作为示例。要素如下：

```
[0][1][2][3][4][5][6] 
```

当您位于元素 0 时，ViewPagers 不允许您向左滑动！多么可怕:(。为了解决这个问题，我在前端和后端添加了 1 个元素。

```
 [0][1][2][3][4][5][6]      // Original
[0][1][2][3][4][5][6][7][8]   // New mapping 
```

当 ViewPageAdapter 请求 (instantiateItem()) 元素 0 时，我们返回元素 7。当 ViewPageAdapter 请求元素 8 时，我们返回元素 1。

同样在 ViewPager 的 OnPageChangeListener 中，当使用 0 调用 onPageSelected 时，我们设置 CurrentItem(7)，当使用 8 调用它时，我们设置 CurrentItem(1)。

这行得通。

**问题**

当你从 1 到 0 向左滑动时，我们设置了 CurrentItem(7)，它将动画一直向右移动 6 个全屏。这并没有给出一个圆形 ViewPager 的外观，它给出的外观是在用户通过滑动动作请求的相反方向上冲到最后一个元素！

这是非常非常刺耳的。

**我是如何解决这个问题的**

我的第一个倾向是关闭平滑（即全部）动画。它好一点，但是当您从最后一个元素移动到第一个元素时，它现在变得不稳定，反之亦然。

然后我制作了自己的 Scroller。

[http://developer.android.com/reference/android/widget/Scroller.html](http://developer.android.com/reference/android/widget/Scroller.html)

我发现在元素之间移动时总是有 1 次 startScroll() 调用，**除非**我从 1 移动到 7 和从 7 移动到 1。

第一个调用是方向和数量的正确动画。

第二个调用是将所有内容向右移动多页的动画。

这是事情变得非常棘手的地方。

我认为解决方案是跳过第二个动画。所以我做了。会发生从 1 到 7 的平滑动画，其中 0 个打嗝。完美的！然而，如果你滑动，甚至点击屏幕，你会突然（没有动画）在元素 6！如果您从 7 滑到 1，那么您实际上将位于元素 2。没有调用 setCurrentItem(2)，甚至没有调用 OnPageChangeListener，表明您在任何时间点都到达了 2。

但你实际上并不在元素 2，这有点好。您仍在元素 1 处，但将显示元素 2 的视图。然后当你向左滑动时，你会转到元素 1。即使你真的已经在元素 1 了.. 一些代码来帮助清理事情怎么样：

**动画坏了，但没有奇怪的副作用**

```
@Override
public void startScroll(int startX, int startY, int dx, int dy, int duration) {
    super.startScroll(startX, startY, dx, dy, duration);
} 
```

**动画作品！但一切都是陌生而可怕的……**

```
@Override
public void startScroll(int startX, int startY, int dx, int dy, int duration) {
    if (dx > 480 || dx < -480) {
    } else {
        super.startScroll(startX, startY, dx, dy, duration);
    }
} 
```

唯一不同的是，当调用第二个动画（大于 480 像素屏幕的宽度）时，我们忽略它。

在阅读了 Scroller 的 Android 源代码后，我发现 startScroll 并没有开始滚动任何东西。它设置所有要滚动的数据，但不启动任何内容。

**我的预感**

当您执行循环动作（1 到 7 或 7 到 1）时，会调用两次 startScroll()。我认为这两个电话之间的某些事情导致了一个问题。

1.  用户从元素 1 滚动到元素 7，导致从 0 跳转到 7。这​​应该向左移动。
2.  调用 startScroll() 来指示左侧的短动画。
3.  **发生的事情让我哭了可能我认为**
4.  调用 startScroll() 来指示**向右的****长**动画。
***   出现向右的长动画。**

 **如果我注释掉 4，那么 5 就变成“左边的正确动画，事情变得疯狂”

**概括**

我的 Circular ViewPager 实现有效，但动画已损坏。在尝试修复动画时，它会破坏 ViewPager 的功能。我目前正在旋转我的轮子，试图弄清楚如何让它工作。帮我！:)

如果有任何不清楚的地方，请在下面发表评论，我会澄清。我意识到我对事情是如何被破坏的并不是很精确。这很难描述，因为它甚至不清楚我在屏幕上看到的内容。如果我的解释是我可以解决的问题，请告诉我！

干杯，科尔廷

**代码**

尽管功能与我当前的代码迭代相同，但此代码稍作修改以使其本身更具可读性。

*OnPageChangeListener.onPageSelected*

```
@Override
public void onPageSelected(int _position) {
    boolean animate = true;
    if (_position < 1) {
        // Swiping left past the first element, go to element (9 - 2)=7
        setCurrentItem(getAdapter().getCount() - 2, animate);
    } else if (_position >= getAdapter().getCount() - 1) {
        // Swiping right past the last element
        setCurrentItem(1, animate);
    }
} 
```

*CircularScroller.startScroll*

```
@Override
public void startScroll(int _startX, int _startY, int _dx, int _dy, int _duration) {
    // 480 is the width of the screen
    if (dx > 480 || dx < -480) {
        // Doing nothing in this block shows the correct animation,
        // but it causes the issues mentioned above

        // Uncomment to do the big scroll!
        // super.startScroll(_startX, _startY, _dx, _dy, _duration);

        // lastDX was to attempt to reset the scroll to be the previous
        // correct scroll distance; it had no effect
        // super.startScroll(_startX, _startY, lastDx, _dy, _duration);
    } else {
        lastDx = _dx;
        super.startScroll(_startX, _startY, _dx, _dy, _duration);
    }
} 
```

*CircularViewPageAdapter.CircularViewPageAdapter*

```
private static final int m_Length = 7; // For our example only
private static Context m_Context;
private boolean[] created = null; // Not the best practice..

public CircularViewPageAdapter(Context _context) {
    m_Context = _context;
    created = new boolean[m_Length];
    for (int i = 0; i < m_Length; i++) {
        // So that we do not create things multiple times
        // I thought this was causing my issues, but it was not
        created[i] = false;
    }
} 
```

*CircularViewPageAdapter.getCount*

```
@Override
public int getCount() {
    return m_Length + 2;
} 
```

*CircularViewPageAdapter.instantiateItem*

```
@Override
public Object instantiateItem(View _collection, int _position) {

    int virtualPosition = getVirtualPosition(_position);
    if (created[virtualPosition - 1]) {
        return null;
    }

    TextView tv = new TextView(m_Context);
    // The first view is element 1 with label 0! :)
    tv.setText("Bonjour, merci! " + (virtualPosition - 1));
    tv.setTextColor(Color.WHITE);
    tv.setTextSize(30);

    ((ViewPager) _collection).addView(tv, 0);

    return tv;
} 
```

*CircularViewPageAdapter.destroyItem*

```
@Override
public void destroyItem(ViewGroup container, int position, Object view) {
    ViewPager viewPager = (ViewPager) container;
    // If the virtual distance is distance 2 away, it should be destroyed.
    // If it's not intuitive why this is the case, please comment below
    // and I will clarify
    int virtualDistance = getVirtualDistance(viewPager.getCurrentItem(), getVirtualPosition(position));
    if ((virtualDistance == 2) || ((m_Length - virtualDistance) == 2)) {
        ((ViewPager) container).removeView((View) view);
        created[getVirtualPosition(position) - 1] = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:51:09.537

我认为最好的可行方法是代替使用普通列表来对 List 进行包装，当执行**get(pos)**方法以获取创建视图的对象时，您可以进行类似**get(pos % numberOfViews )**并且当它询问 List 的大小时，您输入的 List 是**Integer.MAX_VALUE**并且您在 List 中间开始，所以您可以说这几乎不可能出错，除非它们实际上滑动到相同的位置边直到到达列表的末尾。如果时间允许，我将尝试稍后发布概念证明。

编辑：

我已经尝试过这段代码，我知道每个视图上都显示了一个简单的文本框，但事实是它可以完美运行，它可能会根据视图的总数而变慢，但概念证明就在这里。我所做的是**MAX_NUMBER_VIEWS**代表用户在停止之前可以完全给出的最大次数。如您所见，我在数组的长度处启动了viewpager，这将是它第二次出现，因此您可以向左和向右多转一圈，但您可以根据需要进行更改。我希望我不会因为实际上确实有效的解决方案而得到更多的负面评价。

**活动：**

```
pager = (ViewPager)findViewById(R.id.viewpager);
String[] articles = {"ARTICLE 1","ARTICLE 2","ARTICLE 3","ARTICLE 4"};
pager.setAdapter(new ViewPagerAdapter(this, articles));
pager.setCurrentItem(articles.length); 
```

**适配器：**

```
public class ViewPagerAdapter extends PagerAdapter {

private Context ctx;
private String[] articles;
private final int MAX_NUMBER_VIEWS = 3;

public ViewPagerAdapter(Context ctx, String[] articles) {
    this.ctx = ctx;
    this.articles = articles.clone();
}

@Override
public int getCount() {
    return articles.length * this.MAX_NUMBER_VIEWS;
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    TextView view = new TextView(ctx);
    view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                                          LayoutParams.MATCH_PARENT));
    int realPosition = position % articles.length;
    view.setText(this.articles[realPosition]);
    ((ViewPager) container).addView(view);
    return view;
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    ((ViewPager) container).removeView((View) object);
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view == ((View) object);
}

@Override
public Parcelable saveState() {
    return null;
}

} 
```**

# c# - C# Random 不像随机数那样工作

> ID：11622545
> 
> 赞同：3
> 
> 时间：2012-07-24T00:36:13.667
> 
> 标签：c#, .net, random

我有一个图，每个节点有 4 个子节点。我编写了一个算法来生成从开始节点到结束节点的随机路径。在每个节点，它选择一个随机的下一个节点。访问过的节点可以重新访问。

代码如下：

```
public List<Node> GetPath(Node begin, Node end)
{
    var nodes = new List<Node>();
    var node = begin;
    while (node != end)
    {
        nodes.Add(node);
        var next = node.Children[new Random().Next(4)];
        node = next;
    }

    nodes.Add(end);

    return nodes;
} 
```

但有时，Random 无法按预期工作。“new Random().Next(4)”不断生成 0。因此它始终是第一个子节点被选中，并且生成了一个非常长的重复序列，如 node1->node2->node1->node2... 并最终生成发生内存不足异常。

有没有办法让 Random 类正常工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T00:39:12.947

原因是因为 Random 是根据当前时间初始化的（计算机中没有真正的随机......只有伪随机）。while 循环迭代太快，并且系统时间没有记录更改。因此，您正在重新初始化一个以相同值开头的新 Random 对象。

尝试创建一个在整个方法中重复使用的 Random 对象：

```
public List<Node> GetPath(Node begin, Node end)
{
    var nodes = new List<Node>();
    var node = begin;

    Random r = new Random();
    while (node != end)
    {
        nodes.Add(node);
        var next = node.Children[r.Next(4)];
        node = next;
    }

    nodes.Add(end);

    return nodes;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T00:38:29.077

在循环外初始化随机实例，例如：

```
public List<Node> GetPath(Node begin, Node end)
{
    var nodes = new List<Node>();
    var node = begin;

    var random = new Random();

    while (node != end)
    {
        nodes.Add(node);
        var next = node.Children[random.Next(4)];
        node = next;
    }

    nodes.Add(end);

    return nodes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:42:02.277

这里有几件事对你不利。第一个是每次你要求一个不同的数字，但这不是这个类所做的，也不是随机的定义。所以，这个类实际上工作正常。

## 随机的定义

1.  没有方法或有意识地做出、完成、发生或选择：“100 个家庭的随机样本”。
2.  由或涉及每个项目的平等机会。

现在，这个班级尽最大努力为每个选项提供平等的选择机会。因此，当您想到随机时，请确保您将术语的定义置于上下文中。但是，请记住，这门课**不像**人的大脑那样工作。

现在，为了解决您非常频繁地归零的事实，它的发生有两个原因。首先，您`new`在每次迭代中创建一个 Random 类。但更重要的是，您的范围太小，因为您希望它每次在只有 4 个选项的范围内给您一个不同的数字，并且因为它是伪随机的，正如[MSDN](http://msdn.microsoft.com/en-us/library/system.random.aspx)所说的那样，您经常得到相同的答案。

我意识到你只给它 4 个选项的原因，但我认为你可能需要重新考虑你正在寻找的功能类型，因为它可能会减少挫败感。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T01:30:15.790

您提到该方法在多个线程中被调用。一种解决方案是每个线程有一个随机数生成器，由静态 rng 播种。

我还删除了常量 4 并将其更改为`node.Children.Count`.

```
static Random seed = new Random();
[ThreadLocal] static Random rng;

public List<Node> GetPath(Node begin, Node end)
{
var nodes = new List<Node>();
var node = begin;

if (rng == null)
   rng = new Random(seed.Next());

while (node != end)
{
    nodes.Add(node);
    var next = node.Children[rng.Next(node.Children.Count)];
    node = next;
}

nodes.Add(end);

return nodes;
} 
```

# python - python re.compile 匹配百分号 %

> ID：11622546
> 
> 赞同：4
> 
> 时间：2012-07-24T00:36:15.097
> 
> 标签：python, regex

我想为 Python 中的 % 符号创建一个简单的字符串匹配。
这是我的代码

```
import re  
a = "5%"  
p = re.compile(r'%')  
p.match(a) 
```

p.match(a) 返回无。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T00:38:23.930

`match`如果它出现在搜索字符串的*开头，则匹配正则表达式。*你想要`p.search(a)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T00:37:38.037

该`re.match`方法仅匹配位于字符串开头的模式。你的不是。试试`re.search`，它会在字符串中的任何位置找到模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-07T18:31:32.777

这是另一种风格：

```
for cell in row:
    cell_val = cell.value
    if bool(re.search(r'% grade', cell_val)):
        print("Yup, found it") 
```

# python - Boto connect_xxx 方法和连接池

> ID：11622548
> 
> 赞同：11
> 
> 时间：2012-07-24T00:36:19.627
> 
> 标签：python, amazon-web-services, flask, boto

如果我多次调用 boto.connect_xxx，其中 xxx 是某个服务（dynamodb、s3 等），是否每次都会创建一个新的连接池？我想做的是这样的（Flask中的例子）：

```
@app.before_request
def before_request():
    g.db = connect_dynamodb() 
```

以确保我始终连接，但我不想在每次请求之前执行此操作，如果它每次都会创建新的安全令牌等，整个 rigamarole。应用程序启动时只调用一次 connect_xxx() 是否安全，并根据需要依赖 boto 生成新连接等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T02:36:23.323

最好的方法是在应用程序启动时调用一次 connect_xxx 方法，然后依靠 boto 来管理连接。该规则的唯一例外是如果您使用多个线程。在这种情况下，每个线程都应该创建自己的连接，因为 boto 使用不是线程安全的 httplib。

即使你在每次请求之前调用 connect_xxx 方法，你真的应该没问题。Boto 在类级别池连接，应该以非常有效的方式处理这个问题。

# php - PHP 和 DOM 提取网页的这些特定数据

> ID：11622550
> 
> 赞同：1
> 
> 时间：2012-07-24T00:36:59.550
> 
> 标签：php, dom, web-scraping

使用 PHP 和 DOM 如何从以下代码（网页的一部分）中获取 PLACE、ADDRESS、LOCALITY、REGION、POSTAL CODE 和 COUNTRY。

从现在开始我已经开发了一部分代码来获取其他内容。这是到目前为止的代码。

```
$dochtml = new DOMDocument();
$dochtml->loadHTMLfile('');
$xpath = new DOMXpath($dochtml);

$descr = $xpath->query('//div[@class="description"]')->item(0);
    print_r($descr->nodeValue);

$abbr  = $dochtml->getElementsByTagName("abbr")->item(0);
    $title = $abbr->getAttribute("title");
    echo $title; 
```

这是代码的其余部分。

```
<div class="vcard location p">
    <div class="fn org">
        <a href="link here">PLACE</a>
    </div>
    <div class="adr">
        <div class="street-address">ADDRESS<br></div>
        <div>
            <span class="locality">LOCALITY</span>,
            <span class="region">REGION</span>
            <span class="postal-code">POSTAL CODE</span>,
            <span class="country-name">COUNTRY</span>
        </div>
    </div>
</div> 
```

**更新**

我对以下内容有一个小问题，在页面中有很多`<abbr>`标签，但是我想要的两个标签带有类`dtstart`，`dtend`如下所示是`#eventDetailInfo`. 不幸的是，并非所有人都有第二个`abbr`标签，`class=dtend`所以它从“相关事件”中获得第一个标签。所以我的问题是我如何将它限制在这个特定的 ID 上？

```
<div id="eventDetailInfo">
        <div class="p">
         <div><abbr class="dtstart" title="2012-07-16T21:00:00">Monday, July 16th, 2012</abbr></div>    
         <div><abbr class="dtend" title="2012-08-16T21:00:00">Monday, August 16th, 2012</abbr></div>    
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:20:21.463

通过阅读[`DOMXPath`文档](http://php.net/manual/en/class.domxpath.php)，我建议的解决方案概述如下。

**按类获取元素**

```
$nodes = $xpath->query('//div[contains(@class, "street-address")]'); 
```

**按 ID 获取元素**

```
$node = $xpath->query('//div[@id="someid"]'); 
```

**解决方案**

要提取您的值，您可以使用类似（[工作示例](http://codepad.viper-7.com/1tBVMW)）：

```
<?php
$html = '<div class="vcard location p">
    <div class="fn org">
        <a href="link here">PLACE</a>
    </div>
    <div class="adr">
        <div class="street-address">ADDRESS<br></div>
        <div>
            <span class="locality">LOCALITY</span>,
            <span class="region">REGION</span>
            <span class="postal-code">POSTAL CODE</span>,
            <span class="country-name">COUNTRY</span>
        </div>
    </div>
    <div id="eventDetailInfo">
        <div class="p">
         <div><abbr class="dtstart" title="2012-07-16T21:00:00">Monday, July 16th, 2012</abbr></div>    
         <div><abbr class="dtend" title="2012-08-16T21:00:00">Monday, August 16th, 2012</abbr></div>    
        </div>
    </div>
</div>';

$document = new DOMDocument();
$document->loadHTML($html);
$xPath = new DOMXpath($document);

function extractNodeValue($query, $xPath, $attribute = null) {
    $node = $xPath->query("//{$query}")->item(0);
    if (!$node) {
        return null;
    }
    return $attribute ? $node->getAttribute($attribute) : $node->nodeValue;
}

$place = extractNodeValue('div[contains(@class, "fn")]/a', $xPath);
$address = extractNodeValue('div[contains(@class, "street-address")]',$xPath);
$locality = extractNodeValue('span[contains(@class, "locality")]',$xPath);
$region = extractNodeValue('span[contains(@class, "region")]', $xPath);
$postalCode = extractNodeValue('span[contains(@class, "postal-code")]', $xPath);
$countryName = extractNodeValue('span[contains(@class, "country-name")]', $xPath);
$start = extractNodeValue('div[@id="eventDetailInfo"]/div/div/abbr[contains(@class, "dtstart")]', $xPath, 'title');
$end = extractNodeValue('div[@id="eventDetailInfo"]/div/div/abbr[contains(@class, "dtend")]', $xPath, 'title');

var_dump($place, $address, $locality, $region, $postalCode, $countryName, $start, $end); 
```

输出：

```
string(5) "PLACE" string(7) "ADDRESS" string(8) "LOCALITY" string(6) "REGION" string(11) "POSTAL CODE" string(7) "COUNTRY" string(19) "2012-07-16T21:00:00" string(19) "2012-08-16T21:00:00" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:30:19.993

你几乎完成了你的代码：

```
<?php

$dochtml = new DOMDocument();
$dochtml->loadHTML('<div class="vcard location p">
    <div class="fn org">
        <a href="link here">PLACE</a>
    </div>
    <div class="adr">
        <div class="street-address">ADDRESS<br></div>
        <div>
            <span class="locality">LOCALITY</span>,
            <span class="region">REGION</span>
            <span class="postal-code">POSTAL CODE</span>,
            <span class="country-name">COUNTRY</span>
        </div>
    </div>
</div>');

$xpath = new DOMXpath($dochtml);

$place       = $xpath->query('//div[@class="fn org"]/a')->item(0)->nodeValue;
$address     = $xpath->query('//div[@class="street-address"]')->item(0)->nodeValue;
$locality    = $xpath->query('//span[@class="locality"]')->item(0)->nodeValue;
$region      = $xpath->query('//span[@class="region"]')->item(0)->nodeValue;
$postalCode  = $xpath->query('//span[@class="postal-code"]')->item(0)->nodeValue;
$countryName = $xpath->query('//span[@class="country-name"]')->item(0)->nodeValue; 
```

[此处提供](http://codepad.viper-7.com/H8myIv)实时代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T20:39:55.230

如果您知道 CSS 选择器，请使用[PHPQuery或类似的库。](http://code.google.com/p/phpquery/)

# mysql - 如何摆脱表格中的重复结果

> ID：11622552
> 
> 赞同：0
> 
> 时间：2012-07-24T00:37:04.727
> 
> 标签：mysql

我有一个有一些重复结果的表。例如：

```
`person_url`    `movie_url`
1                2
1                2
2                3 
```

会变成 -->

```
`person_url`    `movie_url`
1                2
2                3 
```

我知道如何通过创建一个新表来做到这一点，

```
create table tmp_credits (select distinct * from name); 
```

但是，它是一个非常大的表，我有几个索引需要重新创建。我将如何就地进行这种转换，即不创建新表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:42:00.480

您可以使用关键字`UNIQUE`在表的列上添加索引：`IGNORE`

```
ALTER IGNORE TABLE name ADD UNIQUE INDEX (person_url, movie_url); 
```

如[手册](http://dev.mysql.com/doc/en/alter-table.html)所述：

> `IGNORE`是标准 SQL 的 MySQL 扩展。`ALTER TABLE`如果新表中的唯一键有重复项，或者在启用严格模式时出现警告，它会控制如何工作。如果`IGNORE`未指定，则在发生重复键错误时中止并回滚副本。如果`IGNORE`指定，则仅第一行用于在唯一键上具有重复项的行。其他冲突的行被删除。不正确的值将被截断为最接近的匹配可接受值。

这也将防止将来添加重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:50:52.383

```
`create table temp
(col1 varchar(20),col2 varchar(20));
INSERT INTO  temp VALUES
('1','one'),('2','two'),('2','two');
`select col1,col2 from temp
  union 
 select col1,col2 from temp; 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:44:08.580

您是否考虑过在重复数据删除的表顶部放置一个语义层/视图？

```
select  person_url, movie_url
from name
group by person_url, movie_url 
```

# ruby - 用 Ruby 中的空格替换 %20

> ID：11622559
> 
> 赞同：4
> 
> 时间：2012-07-24T00:38:14.740
> 
> 标签：ruby, arrays, string

我目前有一个字符串，其内容类似于`["green%20books"]`，我希望它读取`["green books"]`.

我认为谷歌搜索会很快产生结果，但每个人都只想把空格变成`%20s`. 不是反过来。

任何帮助将非常感激！

编辑：

这是我正在使用的函数，我很困惑在这里解码 URL 的位置。我尝试删除 URI.encode 文本，但这破坏了功能。

```
def self.get_search_terms(search_url)
    hash = CGI.parse(URI.parse(URI.encode(search_url)).query) #returns a hash
    keywords = []
    hash.each do |key, value|
      if key == "q" || key == "p"
        keywords << value
      end
    end
    keywords
  end 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T00:49:11.663

您可以使用 URI 的“unencode”方法。（别名为解码）

```
require 'uri'
URI.decode("green%20books")
# => "green books" 
```

这不仅会用空格替换“%20”，而且会替换每个 uri 编码的字符，我认为这就是你想要的。

[文件](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html#method-i-unescape)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T00:50:03.060

[`CGI::unescape`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-unescape)会做你想做的事：

```
1.9.2-p320 :001 > require 'cgi'
=> true 
1.9.2-p320 :002 > s = "green%20books"
=> "green%20books" 
1.9.2-p320 :003 > CGI.unescape(s)
=> "green books" 
```

另一种选择（如 YenTheFirst 提到的）可能是`URI.decode`. 然而，[我读到一个讨论它会被弃用](http://www.ruby-forum.com/topic/207489)——尽管那是在 2010 年。

无论如何，由于您要询问数组，因此您可能会`map`使用该方法：

```
ary.map { |s| CGI.unescape(s) } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T00:52:34.763

您可以使用正则表达式：

```
string = "green%20books"
string.gsub!('%20', ' ')

puts string 
```

# .htaccess - Mod Rewrite 排除文件夹

> ID：11622567
> 
> 赞同：1
> 
> 时间：2012-07-24T00:38:34.383
> 
> 标签：.htaccess, mod-rewrite

我有效地使用重写规则将我的网址从 /teams.php?team=New York Yankees&year=2012 更改为 teams/New York Yankees/2012。

我的 .htaccess 文件包含以下内容

```
RewriteEngine On
RewriteRule ^teams/([^/]*)/(^/]*)$ /teams.php?team=$1&year=$2 [L] 
```

但是，由于此重写规则当前生效，将不会加载任何外部 CSS 和 JS 文件。我尝试将以下重写条件放在重写规则之前，但没有成功

```
RewriteCond %{REQUEST_URI} !^/(css/js)/ 
```

几乎我所有的文件都有以下指向外部样式表的链接。

```
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" /> 
```

有什么想法我在这里做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:41:39.433

链接到样式表时必须使用完整路径，而不是像现在这样的相对路径。随着重写规则的到位，它们变得相对于预先重写的 URL。

例如，更改：

```
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" /> 
```

到：

```
<link rel="stylesheet" type="text/css" href="/css/stylesheet.css" /> 
```

他们没有加载的原因是浏览器试图访问：

```
http://yoursite.com/teams/New York Yankees/2012/css/stylesheet.css 
```

当你链接到`css/stylesheet`哪个当然不存在。

# python - 尝试和错误，除了捕捉中断？

> ID：11622568
> 
> 赞同：1
> 
> 时间：2012-07-24T00:38:37.597
> 
> 标签：python, file, break

我正在尝试编写代码，以便消除结果文件中的重复项，即带有“N/A”的行及其下方的行。这是我所拥有的：

```
 with open('false_'+uniprotID+'.txt','w') as fileinput:        
        for index, (start, end) in enumerate(searchPFAM(fname)):       
            for item in lookup[uniprotID]:
                for names in wholelookup[uniprotID]:
                    if re.search(r'\d+',names).group(0)==item and start <= int(item) <= end:
                        result = str(int(item) - start + 1)
                        try:
                            fileinput.write(">{0} | at position {1} | start= {2}, end= {3} | description: {4}\n".format(uniprotID, result, start, end, names))
                            fileinput.write(''.join(makeList[start-1:end]))
                            textwrap.wrap(''.join(makeList[start-1:end]),width = 60)
                            fileinput.write('\n')
                        except ErrorIO as e:
                           break 
                    else:
                        fileinput.write(">{0} | N/A | start= {1}, end= {2} | description: {3} \n".format(uniprotID, start, end, names))
                        fileinput.write(''.join(makeList[start-1:end]))
                        textwrap.wrap(''.join(makeList[start-1:end]),width = 60)
                        fileinput.write('\n') 
```

我的结果文件如下所示：

> Q14591 | 在位置 4 | 开始= 174，结束= 196 | 描述：A177T
> 
> YQCRHCSKSFSQRSDLVKHQRIH
> 
> Q14591 | 不适用 | 开始= 174，结束= 196 | 描述：M418T
> 
> YQCRHCSKSFSQRSDLVKHQRIH
> 
> Q14591 | 在第 21 位 | 开始= 398，结束= 420 | 描述：M418T YACSDCTKSFSRRSDLVKHQRIH
> 
> Q14591 | 不适用 | 开始= 398，结束= 420 | 描述：M418T
> 
> YACSDCTKSFSRRSDLVKHQRIH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:29:22.640

为什么不事后过滤掉它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:45:11.373

获取您复制的四行代码，并从中创建一个函数。然后从两个地方调用该函数。您必须对差异进行参数化，也就是说，为两个调用之间的差异提供一个参数，而不是为不同的值提供不同的值。

例如：

```
def do_the_common_thing(fileinput, uniprotID, result, start, end, names):
    fileinput.write(">{0} | {1} | start= {2}, end= {3} | description: {4}\n".format(uniprotID, result, start, end, names))
    fileinput.write(''.join(makeList[start-1:end]))
    textwrap.wrap(''.join(makeList[start-1:end]),width = 60)
    fileinput.write('\n') 
```

这是很多争论，您也许可以提出更好的重构。

# hibernate - 一对多休眠映射中的问题

> ID：11622569
> 
> 赞同：2
> 
> 时间：2012-07-24T00:38:52.340
> 
> 标签：hibernate, arraylist, indexing, one-to-many, bag

我检查了许多在 stackoverflow 上打开的主题，但我并没有真正得到我的问题的答案。好的，让我们考虑这个使用**ArrayList**的例子：

```
public class Stock implements java.io.Serializable {     
    private Integer stockId;
    private String stockCode;
    private String stockName;
    private ArrayList<StockDailyRecord> stockDailyRecords = new ArrayList<StockDailyRecord>(); 
    //getter, setter and constructor
}
public class StockDailyRecord implements java.io.Serializable { 
    private Integer recordId;
    private Stock stock;
    private Float priceOpen;
    private Float priceClose;
    private Float priceChange;
    private Long volume;
    private Date date;

    //getter, setter and constructor
} 
```

所以我们可以说从 Stock 到 StockDailyRecord 的关联是**一对多的**。这就是我试图在**Stock.hbm.xml**中映射的内容。我读到，在通过**list**标签映射时，我们需要一个**index**。

所以我的第一个问题是：是否可以将**索引列表**保持为空？

```
<list name="stockDailyRecords" table="stock_daily_record" inverse="true" lazy="true" fetch="select">
    <key>
        <column name="STOCK_ID" not-null="true" />
    </key>
    <list-index></list-index>
    <one-to-many class="com.mkyong.stock.StockDailyRecord" />
</list> 
```

我的第二个问题：现在假设我在表**STOCKDAILYRECORD**（在数据库中）中添加了一个名为**indexCol**的列。所以在 Conception 中我们会有：每个 Stock 都有一个 StockDailyRecord 列表，从 0 到 x 排序。这意味着**indexCol 相对于它的 Stock 是唯一的**，但**在 StoCKDAILYRECORD 中不是唯一的**。我的想法正确吗？

我的第三个问题是关于我在 stackoverflow 上找到的解决方案：[Hibernate one to many mapping works with a list but not a set?](https://stackoverflow.com/questions/3580686/hibernate-one-to-many-mapping-works-with-a-list-but-not-a-set) ，在最高投票的答案中，它说如果我们想避免**list ，我们可以****将对象声明为 Collection 并将其实例化为 ArrayList**并在 xml 映射文件中使用**bag**。那么是否可以将其**声明为 ArrayList 而不是 Collection？**非常感谢你:)

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:14:20.703

使用 List 有什么问题？您可以将其作为arraylist 进行管理。例如：

```
<bag name="stockDailyRecords" table="stock_daily_record" inverse="true" lazy="true" fetch="select">
<key column="STOCK_ID"/>
<many-to-many column="recordId" fetch="select" lazy="false" class="com.mkyong.stock.StockDailyRecord"/>
</bag> 
```

请记住，ArrayList 实现了 List 接口，顺便说一下，这两个对象具有相同的方法。****

# shell - 语法错误：“then”意外（预期“fi”）

> ID：11622571
> 
> 赞同：3
> 
> 时间：2012-07-24T00:38:54.273
> 
> 标签：shell, if-statement

我正在为一个文件编写一个 shell 脚本，它给了我这个错误：

我很确定语法是正确的。我不知道错误是什么

```
if[ "$check" = "rename" ]; then
      echo "now "
else
      echo "blub"
fi 
```

我知道这是一个重复的[问题](https://stackoverflow.com/questions/764908/syntax-error-end-of-file-unexpected-expecting-fi)。我也试过这个（第一个解决方案的替代部分）。:(。它仍然对我不起作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T00:44:51.460

您在关键字 if 之后缺少一个空格。

```
if [ $check == "rename" ]; then 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-15T08:43:58.700

当我不小心使用`#!/bin/sh`而不是`#!/bin/bash`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-21T13:51:14.663

@Lenar Hoyt 的回答让我找到了类似问题的解决方案。就我而言，我不小心在脚本的开头插入了空格，所以不是

```
#!/bin/bash 
```

我有

```
 #!/bin/bash 
```

...所以可能使用了“错误”的外壳。一旦我删除了空间，它就起作用了。

# iis - 由于权限不足，Redirection.config 无法读取

> ID：11622574
> 
> 赞同：3
> 
> 时间：2012-07-24T00:39:27.750
> 
> 标签：iis, iis-7, configuration, permissions, windows-server-2008

我不断收到以下错误：

```
c:\Windows\System32\inetsrv>appcmd set site /site.name:"WebVTS" /+bindings.[prot
ocol='https',bindingInformation='*:443:webvts.mprinc.com']
ERROR ( message:Configuration error
Filename: redirection.config
Line Number: 0
Description: Cannot read configuration file due to insufficient permissions
. ) 
```

我正在尝试将主机名添加到 Windows Server 2008 上 IIS 7 中的 https: 站点。我将 IUSR 读取/修改添加到我的 web.config 文件中。但似乎无法弄清楚redirection.config 的位置和内容是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:27:43.990

您需要确保从提升的命令提示符运行 AppCmd.exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-07T20:05:10.223

单击开始->键入“命令提示符”->右键单击命令提示符程序->“以管理员身份运行”。然后运行命令行程序，它应该可以工作。您还需要在您的机器上拥有管理员权限。

# excel - Excel VBA - 选择最后使用的列

> ID：11622575
> 
> 赞同：0
> 
> 时间：2012-07-24T00:39:33.607
> 
> 标签：excel, vba

我想在我的电子表格中选择最后一列和倒数第二列。

我通过以下方式找到了我的最后一个专栏：

```
LastColumn = Sheets("Sheet1").Cells.Find("*", [a1], , , xlByColumns, xlPrevious).Column
    On Error GoTo 0 
```

然后我尝试使用 LastColumn 从倒数第二列到最后一列进行选择并复制和粘贴。

```
Sheets("Sheet1").Columns(LastColumn - 1:LastColumn).Select 
```

但它似乎不起作用。有人可以帮忙吗，我可能出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:56:43.767

`Sheets("Sheet1").Columns(LastColumn - 1).Select`

**编辑**：感谢道格指出我的错误......

`Sheets("Sheet1").Columns(LastColumn - 1).Resize(,2).Select`

# c++ - c ++：使用指向它开始的指针访问向量元素

> ID：11622576
> 
> 赞同：2
> 
> 时间：2012-07-24T00:39:42.900
> 
> 标签：c++, pointers, stl, vector, std

我有一个指向机器的指针向量：也就是说，

```
vector<Machines*> m; 
```

我用指针填充向量，我知道存在的机器数量。如果我创建了一个指向 Machines 指向向量开头的指针：

```
Machines** m2;
m2 = & m[0]; 
```

当我增加'0'时，我会访问向量成员吗？

```
m2[0]->dostuff;
m2[1]->dostuff;
... 
```

这对我来说似乎可行，但我不确定这是否允许。:)

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:05:38.867

如果发生向量内存的重新分配，代码中的指针将无效。

将元素推送到向量时可能会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T01:00:16.957

这是允许的，但您是否意识到您可以执行以下操作并且没有理由使用`Machines** m2;`？

```
vector<Machines*> m;
// Fill vector here
m[0]->dostuff(); // I assumed dostuff was a function
m[1]->dostuff(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T00:49:10.250

由于`vector`保证分配连续的内存，这似乎是正确的。但你为什么要？您可以直接在`vector`.

# ios - iOS - NSURLAuthenticationChallenge 的问题 - 连接成功但无法访问服务器

> ID：11622577
> 
> 赞同：2
> 
> 时间：2012-07-24T00:39:55.817
> 
> 标签：ios, authentication, webserver

我正在使用 NSURLAuthenticationChallenge 通过我的应用程序登录到网络服务器。服务器只需要一个用户名和一个密码。这是正在发生的事情：

(1) Ping 服务器的 POST 消息在 HTML 标头中包含 User-Agent 字符串

(2) 服务器响应一个由**didReceiveAuthenticationChallenge**委托方法检测到的身份验证质询

(3) 通过使用用户名和密码发送质询响应来响应：

```
NSURLCredential *cred = [[NSURLCredential alloc] initWithUser:unameTextField.text           
                                                         password:pswdTextField.text
                                                      persistence:NSURLCredentialPersistenceForSession];
[[challenge sender] useCredential:cred forAuthenticationChallenge:challenge]; 
```

(4) 如果用户名/密码正确，则调用委托方法**connectionDidFinishLoading**，检测服务器接受了质询响应。用户现在已登录并可以从服务器发送/接收消息。（如果用户名/密码不正确，则调用委托方法**didFailWithError**并向用户显示警报。）

这就是问题所在：我第一次打开我的 Xcode 项目并运行应用程序并尝试使用正确的用户名/密码登录时，步骤 3 和步骤 4 之间存在 10-15 秒的时间延迟。然后甚至在**connectionDidFinishLoading**被调用，当我向服务器发送请求文件的消息时，它通过向我发送 HTML 登录页面来响应，这是未经身份验证的请求的默认行为......所以看起来我毕竟没有登录。

如果我停止然后再次运行该应用程序，则没有延迟，一切正常。

**编辑：我通过在每次登录尝试前清除 URLCache、所有 cookie 和所有凭据来解决上述问题。这三种方法的代码如下：**

```
- (void)clearCookiesForURL 
{

  NSURL *loginUrl = [NSURL URLWithString:@"https://www.MYURL.com"];
  NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
  NSArray *cookies = [cookieStorage cookiesForURL:loginUrl];
  for (NSHTTPCookie *cookie in cookies) 
  {
    [cookieStorage deleteCookie:cookie];
  }         
}

- (void)eraseCredentials 
{
    NSString *urlString = @"www.MYURL.com";
    NSURLCredentialStorage *credentialsStorage = [NSURLCredentialStorage sharedCredentialStorage];
    NSDictionary *allCredentials = [credentialsStorage allCredentials];

    if ([allCredentials count] > 0) 
    {
      for (NSURLProtectionSpace *protectionSpace in allCredentials) 
      {
        if ([[protectionSpace host] isEqualToString:urlString])
        {
            NSDictionary *credentials = [credentialsStorage credentialsForProtectionSpace:protectionSpace];
            for (NSString *credentialKey in credentials)
            {
              [credentialsStorage removeCredential:[credentials objectForKey:credentialKey] forProtectionSpace:protectionSpace];
            }
        }
      }       
    }
}

- (void)eraseURLCache 
{
    NSURL *loginUrl = [NSURL URLWithString:@"https://www.MYURL.com"];
    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:loginUrl];
[[NSURLCache sharedURLCache] removeCachedResponseForRequest:urlRequest];
[[NSURLCache sharedURLCache] setMemoryCapacity:0];
[[NSURLCache sharedURLCache] setDiskCapacity:0];
} 
```

另一个问题：如果我在应用程序运行时向服务器发送消息请求之间等待很长时间，服务器会认为我已经注销并表现出与上述相同的行为。

**编辑：这第二个问题仍未解决。附加信息 - 神奇的时间滞后数字似乎是 10 秒。换句话说，如果我在服务器对我进行身份验证以从服务器请求文件后等待超过 10 秒，它就无法识别我的请求，而是向我发送 Web 登录页面，就像它对未经身份验证的请求所做的那样.**

知道发生了什么吗？不，我不能简单地在我的应用程序中加载网络服务器登录页面，因为这不符合这个项目的要求。

# ios - 当地图视图只是屏幕的一部分时，如何在 iOS 模拟器中捏出？

> ID：11622579
> 
> 赞同：133
> 
> 时间：2012-07-24T00:40:04.020
> 
> 标签：ios, mkmapview, simulator, pinchzoom

我在 iPad 上添加了一个视图，即`MKMapView`全屏高度的一半。但是，当我尝试在 iOS 模拟器上捏出来时，它不起作用，因为 to nubs 填充了模拟器上的整个 iPad 视图。

因此，当地图视图占屏幕的一半并且我按下`Option`键盘上的键时，我无法抓住地图进行捏合。

有谁知道如何处理这个？

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-07-24T09:09:27.493

`Option`您可以通过按住并`Shift`移动鼠标在屏幕上移动代表手指的两个灰色圆圈。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-24T09:06:07.843

`option`尝试在按下键的情况下双击。在 iPhone 上，这会导致`MKMapView`缩小。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-03-04T08:03:07.913

只按了alt键，代表你手指的两个灰点就出现在我面前了……

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-09T09:35:08.450

您可以使用 Option (Alt) 按钮或 Option 按钮和命令按钮的组合以及鼠标移动来放大和缩小地图或图像。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-02-22T04:56:19.517

**更新的解决方案：**

按住 Option 和 Command 会为您提供 2 个展开和向内的手指矢量。在向内按住鼠标按钮将捏合，反之亦然以展开。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-16T22:48:33.953

Double click, hold, drag finger.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-14T10:16:21.700

**2019-20 更新**

**放大**

`alt/option`+ 使用鼠标捏合

> **备用选项**：`control`+单击（这将在地图上放置一个灰色圆圈，现在您可以单击并拖动鼠标来放大和缩小。如果要禁用它，只需再次单击圆圈）

**缩小**

`alt/option`+ 用鼠标捏出

**获取地图的平面视图**

Zoom to an area in map then `Shift` + `alt/option` + click and drag mouse

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-11T21:09:49.983

还有另一种方法可以做到这一点：

1- 在按住控制键的同时用鼠标单击您想要将捏合手势居中的位置。这将导致一个灰点留在屏幕上。（一旦它在那里，你可以放开控制键）

2- 现在您可以使用鼠标单击并拖动您在步骤 1 中指定的灰点

完成后，您可以通过点击它来删除灰点

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-10T06:12:00.540

使用鼠标双击放大。对于缩小，按住 option/alt 键，这将为您提供 2 个灰色圆圈，代表您的 2 个手指并向上拖动鼠标。要放大，按住选项键向下拖动鼠标（或双击鼠标）

# unit-testing - ReSharper Unit Test Runner 忽略部署项配置

> ID：11622581
> 
> 赞同：1
> 
> 时间：2012-07-24T00:40:16.537
> 
> 标签：unit-testing, resharper, resharper-6.1

我正在使用 Resharper 6.1 对一个新项目进行单元测试，它似乎忽略了我的 local.testsettings 文件的部署部分。

我尝试在“ReSharper -> 选项 -> 单元测试 -> MSTest -> 使用此测试运行配置”中进行配置，以明确使用 local.testsettings 文件，如何在此问题中提出建议：[ReSharper Unit Test Runner: Support for Deployment Items](https://stackoverflow.com/questions/747263/resharper-unit-test-runner-support-for-deployment-items)，但什么也没有发生。

绝望地我试图将文件移出测试项目，创建另一个测试设置文件，将测试项目移动到另一个解决方案，但仍然没有。

有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-05T21:14:44.447

这也是我自己遇到的一个 ReSharper-Configuration 问题。愿这对你有所帮助。

当我尝试运行该应用程序时，它收到此 ReSharper 错误：“解决方案中不存在使用此配置运行的项目”

[![在此处输入图像描述](../Images/7f4f7eb3266dc0d6d79821f0b50eee80.png)](https://i.stack.imgur.com/nvYVw.png)

在 Resharper 帮助页面中，我找到了运行配置的路径： [https ://www.jetbrains.com/help/resharper/2016.2/Run_Configurations.html](https://www.jetbrains.com/help/resharper/2016.2/Run_Configurations.html)

**锐化 | 工具 | 运行配置...** [![在此处输入图像描述](../Images/41d56dbf924c37cc59eaee37ff49b668.png)](https://i.stack.imgur.com/ecY7p.png)

由于该项目不再存在，因此我删除了该配置：

**{项目名称} > 配置 > 删除...** [![在此处输入图像描述](../Images/c133f3ee624a931f54679600f70d6740.png)](https://i.stack.imgur.com/oQV7s.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:17:09.617

此问题 (http://youtrack.jetbrains.com/issue/RSRP-295311) 应在 ReSharper 7 中修复：http: [//www.jetbrains.com/resharper/download/index.html](http://www.jetbrains.com/resharper/download/index.html)。

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-22T15:05:36.510

我在 VS2019、VS2022 中遇到了同样的 ReSharper 错误：

> ReSharper – 无法执行运行配置
> 
> 解决方案中不存在要使用此配置运行的项目。

事实证明，您不一定要运行有问题的项目。如果在 ReSharper 中为另一个项目保存了一些配置，并且该项目不再存在（例如，您已切换分支或从解决方案中删除了某些项目），则会弹出此错误。这是我的情况。

解决方法如上所述：

转到**扩展 -> ReSharper -> 工具 -> 运行配置... -> nonExistingProject -> 配置 -> 删除**

这将删除阻止 ReSharper 正常工作并阻止您在 IDE 上运行的配置。

貌似还是没修好...

# php - php unlink() 函数和西里尔文

> ID：11622583
> 
> 赞同：4
> 
> 时间：2012-07-24T00:40:44.443
> 
> 标签：php, delete-file, unlink

我在通过`unlink()`函数删除文件时遇到问题。当文件具有西里尔名称时，该功能不起作用。

> [2012 年 7 月 24 日 00:33:35 UTC] PHP 警告：取消链接（/home/gtsvetan/public_html/мениджър.doc）[function.unlink]：/home/gtsvetan/public_html/deleter 中没有此类文件或目录。第 114 行的 php

那么当名称被西里尔化时如何删除文件呢？

代码是：

```
$dir = is_array($dir) ? $dir : explode(',', $dir);
foreach($dir as $dirv) {
    if(is_dir($dirv)) {
        $objects = scandir($dirv);
        foreach($objects as $object) {
            if($object != "." && $object != "..") {
                if(filetype($dirv."/".$object) == "dir") {
                    $this->delete($dirv."/".$object); 
                }
                else {
                    unlink($dirv."/".$object);
                }
            }
        }
    reset($objects);
    rmdir($dirv);
    }
    else {
        unlink($dirv);
    }
} 
```

解决方案：

```
public function delete($dir) {
        $dir = is_array($dir) ? $dir : explode(',', $dir);
        foreach($dir as $dirv) {
            if(is_dir($dirv)) {
                $d = @dir($dirv) or die();
                while(false !== ($entry = $d->read())) {
                    if($entry[0] == ".") {
                        continue;
                    }
                    if(is_dir($dirv.$entry.'/')) {
                        $this->delete($dirv.$entry.'/');
                        @rmdir($dirv.$entry);
                    }
                    elseif(is_readable($dirv.$entry)) {
                        @unlink($dirv.$entry);
                    }
                }
                $d->close();
            }
            else {
                @unlink($dirv);
            }
            @rmdir($dirv);
        }
    } 
```

这是创建类实例的 ajax.php :)

```
case 'delete':
$location = $_POST['location'];
if(is_array($location)) {
    foreach($location as $v) {
    $loc[] = iconv('utf-8', 'cp1251', $v);
    }
    $pfm->delete($loc);
}
else {
    $location = iconv('utf-8', 'cp1251', $location);
    $pfm->delete($location);
}
break; 
```

它对我来说很完美:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T18:31:54.160

嗯，我做了这个，它可能会派上用场。

```
 <?php
function delete($link) {
    foreach($link as $u) {
        if(is_dir($u)) {
            delete(glob($u . DIRECTORY_SEPARATOR . "*"));
            rmdir($u);
        } else; unlink($u);
    }
    return;
}

delete(glob(__DIR__ . DIRECTORY_SEPARATOR . "*"));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:57:51.010

如果播放效果不好，我建议先重命名它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:13:20.980

我发现清理文件名总是一个好主意。我个人喜欢让我的脚本名称文件本身，而不是用户（特别是如果它是上传的文件）。创建一个转换西里尔字符的清理函数。看看 convert_cyr_string :: [http://php.net/manual/en/function.convert-cyr-string.php](http://php.net/manual/en/function.convert-cyr-string.php)

另一个想法，重命名文件与删除文件有同样的问题吗？如果没有，请将其重命名为 tobedeleted.ext 之类的名称，然后取消链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:27:54.453

`unlink`从 PHP 只是转发到相应的系统调用。文件名将按原样传递给该函数，因为 PHP 字符串只是不透明的字节序列。这意味着名称需要采用系统调用可以理解的编码。换句话说，这取决于您的操作系统。您还需要知道文件名的当前编码是什么；这取决于输入的来源。

如果您知道系统调用需要 UTF-8（在 Linux 上是这样）并且当前名称是 ISO-8859-5，那么使用的解决方案`iconv`看起来像

```
unlink(iconv('iso-8859-5', 'utf-8', $dirv."/".$object)); 
```

当然你也可以这样做`mb_convert_encoding`。对于所有其他与文件系统相关的调用，同样的处理也是必要的。

# actionscript-3 - Flex 默认高度 太高

> ID：11622586
> 
> 赞同：0
> 
> 时间：2012-07-24T00:41:15.593
> 
> 标签：actionscript-3, flash, apache-flex, list, actionscript

> **可能重复：**
> [Flex 4：将 Spark 列表高度设置为其内容高度](https://stackoverflow.com/questions/2559415/flex-4-setting-spark-list-height-to-its-content-height)

我的`<s:List>`Flex 4 应用程序中有一个如下所示：

![在此处输入图像描述](../Images/afd2b341290e9d73ba1341c08c0cb72e.png)

...并且呈现它的代码如下所示：

```
<s:VGroup gap="15" width="90%" left="{width * 0.1}">
<!-- Display the list of reviews -->
    <s:List contentBackgroundAlpha="0" borderVisible="true"
            itemRenderer="renderers.ReviewRenderer" dataProvider="{data}"
            top="10" minHeight="1"/>

<!-- Display the review entry form -->
    <pages:ReviewForm width="90%" />
</s:VGroup> 
```

有没有办法让列表完全适合其内容的高度，而不是在底部有这么多额外的空间？我很肯定我没有占用所有额外空间的列表项，因为当我将鼠标悬停在列表项上时，只有显示的区域在列表中被赋予蓝色背景。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:48:11.250

您可以设置名为“measuredHeight”的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:55:22.843

我找到了。显然这个问题已经被问到了：[https ://stackoverflow.com/a/3826295/663604](https://stackoverflow.com/a/3826295/663604)

希望对某人有所帮助。

# python - WTForms 创建可变数量的字段

> ID：11622592
> 
> 赞同：13
> 
> 时间：2012-07-24T00:41:49.887
> 
> 标签：python, wtforms

我如何动态创建一些具有不同问题但答案相同的表单字段？

```
from wtforms import Form, RadioField
from wtforms.validators import Required

class VariableForm(Form):

    def __init__(formdata=None, obj=None, prefix='', **kwargs):
        super(VariableForm, self).__init__(formdata, obj, prefix, **kwargs)
        questions = kwargs['questions']
        // How to to dynamically create three questions formatted as below?

    question = RadioField(
            # question ?,
            [Required()],
            choices = [('yes', 'Yes'), ('no', 'No')],
            )

questions = ("Do you like peas?", "Do you like tea?", "Are you nice?")  
form = VariableForm(questions = questions) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-26T04:42:02.343

它一直[在文档](http://wtforms.simplecodes.com/docs/1.0.1/specific_problems.html)中。

```
def my_view():
    class F(MyBaseForm):
        pass

    F.username = TextField('username')
    for name in iterate_some_model_dynamically():
        setattr(F, name, TextField(name.title()))

    form = F(request.POST, ...)
    # do view stuff 
```

我没有意识到必须在任何实例化发生*之前设置类属性。*清晰来自这个[bitbucket 评论](https://bitbucket.org/simplecodes/wtforms/issue/15/dynamic-creation-of-forms-is-problematic)：

> 这不是错误，而是设计使然。向实例化表单添加字段存在很多问题 - 例如，数据通过 Form 构造函数进入。
> 
> 如果您重新阅读链接的线程，您会注意到您需要派生类，向其中添加字段，然后实例化新类。通常，您将在视图处理程序中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:37:27.537

您快到了：

```
CHOICES = [('yes', 'Yes'), ('no', 'No')]

class VariableForm(Form):

    def __new__(cls, questions, **kwargs):
        for index, question in enumerate(questions):
            field_name = "question_{}".format(index)
            field = RadioField(question,
                                  validators=[Required()],
                                  choices=CHOICES)
            setattr(cls, field_name, field)
        return super(VariableForm, cls).__new__(cls, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T19:40:46.177

就我而言，我使用了 csv 并使用 pandas 将其导入。

因此，如果需要，此解决方案甚至允许您使用不同的答案。

```
data=pd.read_csv("./temp.csv") 
```

```
class UserForm(Form):
    for i in data:
        if data[i][0] == 'textbox':
            formElement='TextField("%s",validators=[validators.required()], default="please add content")' %(i)

        elif data[i][0] == 'radio':
            choice = list(data[i][1:].dropna().unique().tolist())
            choiceStr=''
            for k in choice:
               choiceStr +="('"+k+"','"+k+"'),"

            formElement = 'RadioField("%s",validators=[validators.required()],choices=[%s], default="%s")' %(i,choiceStr, choice[0])

        elif data[i][0] == 'dropdown':
            choice = list(data[i][1:].dropna().unique().tolist())
            # choice.remove('X')
            choiceStr=''
            for k in choice:
               choiceStr +="('"+k+"','"+k+"'),"

            formElement = 'SelectField("%s",validators=[validators.required()],choices=[%s])' %(i,choiceStr)

        exec("%s=%s" % (i,formElement)) 
```

# wpf - 检测 Image 控件是否完成了图像更新

> ID：11622596
> 
> 赞同：0
> 
> 时间：2012-07-24T00:42:14.893
> 
> 标签：wpf, image, dispatcher

**背景：**我正在显示来自高于 60Hz 的高速数码相机的实时图像。通过更新 Image 控件的 ImageSource 来显示实时图像：

```
 this.Dispatcher.Invoke(DispatcherPriority.Normal,(ThreadStart)delegate() { MyImage.Source = myNewBitMapImage; }); 
```

**问题：**如果以前的图像尚未显示在屏幕上，我想通过跳过任何新图像来提高应用程序的性能。例如，当 Image 控件（MyImage）还没有完成更新最后一个图像时，上面的调度程序调用将被跳过，直到 MyImage 再次变为“空闲”。

我在 MFC 中做了类似的事情，使用 GetUpdateRect() 来检查是否还有要更新的区域，如果有，则跳过新图像的显示。

**问题：**如何在 WPF 中实现相同的目标？如果图像控件尚未完成更新最后一个图像，则跳过新图像。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:47:36.890

经过一番研究和测试，我意识到这可以通过调度程序启动一个Backgroundworker来实现。基本上，“MyImage.Source = myNewBitMapImage”在工人的 DoWork 中处理，只要工人忙，就会跳过下一张图像。希望这可以帮助。

# javascript - JSON Stringify 子列表

> ID：11622597
> 
> 赞同：0
> 
> 时间：2012-07-24T00:42:17.670
> 
> 标签：javascript, json, node.js

这可能是一个菜鸟问题，但如果我想制作一个 JSON 项目列表（在 nodejs 应用程序中），我可以执行以下操作：

```
var myVar = {
  'title' : 'My Title',
  'author' : 'A Great Author'
};

console.log(JSON.stringify(myVar));

OUTPUT: { 'title' : 'My Title', 'author' : 'A Great Author' } 
```

一切都很好，但是我该如何制作如下的子列表？

```
OUTPUT: { book {'title' : 'My Title', 'author' : 'A Great Author'} } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:44:28.233

`{}`是对象字面量语法，`propertyName: propertyValue`定义了一个属性。继续并嵌套它们。

```
var myVar = {
    book: {
        'title' : 'My Title',
        'author' : 'A Great Author'
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:45:25.057

用 JavaScript 做到这一点：

```
var mVar = {
  'title'  : 'My Title',
  'author' : 'A Great Author'
};

var myVar = {};

myVar.book = mVar;

console.log(JSON.stringify(myVar));​ 
```

见：http: [//jsfiddle.net/JvFQJ/](http://jsfiddle.net/JvFQJ/)

使用对象文字符号来做到这一点：

```
var myVar = {
  'book': {
      'title'  : 'My Title',
      'author' : 'A Great Author'
  }
};

console.log(JSON.stringify(myVar));​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:44:27.130

如此：

```
var myVar = {
  'book': {
      'title' : 'My Title',
      'author' : 'A Great Author'
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T00:44:42.413

你会做这样的事情：

```
myVar = {
    book: {
        'title' : 'My Title',
        'author' : 'A Great Author'
    }
}

console.log(JSON.stringify(myVar)); // OUTPUT: { book {'title' : 'My Title', 'author' : 'A Great Author'} } 
```

如果您想要子列表中的多个项目，您可以将其更改为：

```
myVar = {
    book1: {
        'title' : 'My Title',
        'author' : 'A Great Author'
    },
    book2: {
        'title' : 'My Title',
        'author' : 'A Great Author'
    }
} 
```

# machine-learning - 通过模拟退火对 SVM 进行特征选择

> ID：11622598
> 
> 赞同：1
> 
> 时间：2012-07-24T00:42:20.273
> 
> 标签：machine-learning, svm, feature-selection

模拟退火（SA）在许多优化问题中是众所周知的。可以在此处阅读有关 SA 的更多信息 [http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing)

我只是对使用支持向量机分类进行特征选择的 SA 感兴趣，即我们需要从输入数据中定义一个子集以用作具有低分类错误的 SVM 的特征向量。因此我们可以将每个输入数据子集理解为状态 s，其能量 E(s) 作为分类错误的成本函数。

我的问题是如何为每个向量选择初始标签集？一开始可以随意吗？

每个状态的成本函数公式是什么（通常，对于非线性核 SVM）？以及如何定义下一个状态（选择下一个子集）？

# c# - 在选项卡控件中清除组合框选择

> ID：11622601
> 
> 赞同：0
> 
> 时间：2012-07-24T00:42:37.280
> 
> 标签：c#, winforms, combobox, tabcontrol

我正在做 c# winform 开发。

我有一个包含多个标签页的标签控件。一些标签页完全填充了用户控件，一些只是填充了组合框/文本框。

我为组合框设置数据源，它加载正常。但是，当我将整个 tabcontrol 实例作为参数传递给另一个表单时，在新表单中，组合框选择被清除并设置为第一个被选中的项目。

奇怪的是，对于放在用户控件中的组合框，选择不清晰，并且在新表单中正确显示。只有那些直接放在标签页中的东西不起作用。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:49:29.883

兄弟。美好的？关于组合框问题，我也有同样的问题。我通过这种方式解决：**不要使用DataSource**

之前（有问题）：

```
comboBox.DisplayMember = "NmConta";
comboBox.ValueMember = "CodConta";
comboBox.DataSource = dataTable; 
```

之后（没问题）：

```
comboBox.DisplayMember = "Value";
comboBox.ValueMember = "Key";
foreach (DataRow row in dataTable.Rows)
{
    comboBox.Items.Add(new KeyValuePair<int, string>(Convert.ToInt32(row["CodConta"]), Convert.ToString(row["NmConta"])));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:24:05.057

在上面的实现之后，我需要编写这个方法来读写comboBox.SelectedValue：

```
// Set ComboBox.SelectedValue
private void ComboBoxSelectedValue(ComboBox comboBox, object valueToSelect)
{
    for (int i = 0; i < comboBox.Items.Count; i++)
    {
        object item = comboBox.Items[i];
        object value = item.GetType().GetProperty("Key").GetValue(item, null);
        if (Convert.ToString(value) == Convert.ToString(valueToSelect))
        {
            comboBox.SelectedIndex = i;
            return;
        }
    }
    comboBox.SelectedIndex = -1;
}

// Get ComboBox.SelectedValue
private object ComboBoxSelectedValue(ComboBox comboBox)
{
    if (comboBox.SelectedIndex < 0) { return null; }
    object item = comboBox.Items[comboBox.SelectedIndex];
    return item.GetType().GetProperty("Key").GetValue(item, null);
}

// Get ComboBox.SelectedText
private object ComboBoxSelectedText(ComboBox comboBox)
{
    if (comboBox.SelectedIndex < 0) { return null; }
    object item = comboBox.Items[comboBox.SelectedIndex];
    return item.GetType().GetProperty("Value").GetValue(item, null);
} 
```

# sql-server - SQL Server：无法打开登录请求的数据库

> ID：11622604
> 
> 赞同：10
> 
> 时间：2012-07-24T00:43:06.267
> 
> 标签：sql-server, sql-server-2008, authentication

在调试在 IIS Express 下运行的 ASP.Net MVC 应用程序时，尝试使用成员资格提供程序时出现以下错误：

> 无法打开登录请求的数据库“MyDB”。登录失败。
> 
> 用户 'MY-PC\MyName' 登录失败。

我尝试使用中概述的步骤进行故障排除

[https://stackoverflow.com/a/2577854/141172](https://stackoverflow.com/a/2577854/141172)

```
SELECT SUSER_ID('MY-PC\MyName') 
```

返回一个 ID。

```
SELECT USER_ID('MY-PC\MyName') 
```

返回 NULL

```
CREATE USER [MY-PC\MyName] FROM LOGIN [MY-PC\MyName] 
```

返回错误信息

> 该登录名已经有一个使用不同用户名的帐户。

确实有一个登录账号，是我创建数据库的时候自动创建的，叫

> 德博

映射到`MY-PC\MyName`.

我的连接字符串是

```
Data Source=.\SQLEXPRESS;Initial Catalog=MyDB;Persist Security Info=True;Integrated Security=SSPI; 
```

在生产环境中运行我会知道如何创建适当的用户和登录。当该 Windows 帐户已与`dbo`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T15:41:14.597

原来是连接字符串的初始目录部分中的拼写错误。

查看事件日志，我看到了类似的错误

> 用户 'MY-PC\MyName' 登录失败。原因：无法打开明确指定的数据库。[客户： ]

然后查看同一事件的详细信息选项卡，我看到包含的**二进制数据** *字节*信息

```
0000: 18 48 00 00 0E 00 00 00   .H......
0008: 17 00 00 00 45 00 52 00   ....E.R.
0010: 49 00 43 00 2D 00 4F 00   I.C.-.O.
0018: 52 00 49 00 47 00 49 00   R.I.G.I.
0020: 4E 00 5C 00 53 00 51 00   N.\.S.Q.
0028: 4C 00 45 00 58 00 50 00   L.E.X.P.
0030: 52 00 45 00 53 00 53 00   R.E.S.S.
0038: 00 00 07 00 00 00 6D 00   ......m.
0040: 61 00 73 00 74 00 65 00   a.s.t.e.
0048: 72 00 00 00               r... 
```

请注意最后一部分是如何对单词“master”进行 UTF-16 编码的。这让我知道连接是连接到*主*目录而不是请求的目录，这反过来导致注意到连接字符串中目录名称的拼写错误。

如果微软只显示“没有这样的目录：MyCatalog”之类的错误，那就更好了。

# c# - 共享合同 WCF 数据服务

> ID：11622605
> 
> 赞同：0
> 
> 时间：2012-07-24T00:43:10.983
> 
> 标签：c#, shared-libraries, odata, wcf-data-services

有几种方法可以解决它。我可以序列化linq查询，但是允许表达式树序列化的OSS项目似乎支持不佳。

是否有更传统的方法来执行以下操作：

```
// Create the DataServiceContext using the service URI.
NorthwindEntities context = new NorthwindEntities(svcUri); 
```

但不使用实体生成工具。基本上我想使用类似于以下伪代码的东西 - 请注意共享的 IRepository 合同：

```
new ChannelFactory<IRepository<MyEntity>>(myBinding, myUri).CreateChannel() 
```

此外，我不喜欢完整地导出 DataSet。我只是想让我的常规服务公开 IQueryable 操作。通过这种方式，IQueryable 接口可以更紧密地与业务逻辑耦合，而不是成为一个独立的数据服务。

我接受 OSS 解决方案，但我希望有一些稳定、轻量级、活跃、支持良好且经常更新的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:18:02.757

如果您想实现存储库模式和大量自定义业务逻辑，Web API 可能是您短期内的最佳选择。在我的 WCF 数据服务优先级列表中，为这两个问题获得更好的支持是非常重要的，但事实是我们现在在这方面还很不足。

Web API 的限制将是 OData 支持的完整性，这可能会随着时间的推移而出现。WCF 数据服务的局限性在于易于业务逻辑插入/软件模式，这可能会随着时间的推移而得到改进。

也就是说，如果你有一个只读服务，反射提供者会做你想做的几乎所有事情。

# javascript - 是否可以在 jquery 启动或每个操作时将变量传递给它？

> ID：11622606
> 
> 赞同：3
> 
> 时间：2012-07-24T00:43:13.300
> 
> 标签：javascript, jquery

我是 jquery 的超级新手，只是了解了它令人敬畏的表面，如果这是一个非常基本的问题，我很抱歉，但我的网站上有一个按钮，一旦点击它就会将一些数据发布到我的服务器，我想知道如何提供 jquery有我想发布的数据。我制作了 jquery 无刷新表单，但他们要求用户输入我发布的内容，但现在我想发送一些网页上未输入或可用的数据。

在我的网站上，如果你想“关注”一个主题，我有一个按钮可以点击。如果您关注某个主题，我需要将 topic_id 和您的用户 ID 发送到我的服务器以启动该过程，但我认为将其放在我的网页上供 jquery 捕获会使用户感到困惑（如果我不能传递我计划的变量执行此方法但隐藏字段）。userid/topicid 可用于我的模板引擎，但我不确定如何将数据传递给脚本。

这是我的脚本 html 的示例：

```
<input type='button' value='Follow' id='btnFollow'> 
```

跟随.js：

```
$(document).ready(function () {
    $('#btnFollow').click(function() {
        //$("#btnFollow").prop('value', 'Following');
        if ($(this).val() == 'Follow') {
            $("#btnFollow").prop('value', 'Following')      
        } else if ($(this).val() == 'Following') {
            $("#btnFollow").prop('value', 'Follow') 
            $.ajax({
                type: 'POST',
                url: '/follow_modification',
                async: true,
                data: {
                    fe1: "test"
                },
                complete: function(xmlRequestObject, successString){
                    ymmReceiveAjaxResponse(xmlRequestObject, successString);
                }
            });
        }
    })
}); 
```

如何从 html 获取信息到函数中？到目前为止，我所有的 javascripts 都是由点击触发的，然后从页面中获取数据。如果我的模板中有一个名为 {{ user_id }} 的变量，我该如何将它传递给脚本，以便当点击触发操作时它'会有它需要发布的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:59:32.447

`<input type="button" value="Follow" id="btnFollow" data-topic="topicid" />`

```
$('#btnFollow').click(function() {
    var topic_id = $(this).attr('data-topic');
    alert(topic_id);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T01:09:11.207

```
<input type='button' value='Follow {{user-id}}' id='btnFollow' data-user="{{user-id}}"> 
```

在html方面，和

```
$(document).ready(function () {
$('#btnFollow').click(function() {
    var following = $(this).attr("data-user");
    if ($(this).val() == 'Follow') {
        $("#btnFollow").prop('value', 'Following')      
    } else if ($(this).val() == 'Following') {
        $("#btnFollow").prop('value', 'Follow') 
        $.ajax({
            type: 'POST',
            url: '/follow_modification',
            async: true,
            data: {
                fe1: following
            },
            complete: function(xmlRequestObject, successString){
                ymmReceiveAjaxResponse(xmlRequestObject, successString);
            }
        });
    }
})
}); 
```

在js方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:48:17.853

```
$(document).ready((function ( data ) {
    // do some thing with somevalue
})( somevalue )); 
```

或者

```
$(document).ready(function (  ) {
    var data = $('someSelector').val()
    // do some thing with somevalue
}); 
```

或者

```
var data = 'some value';
$(document).ready(function (  ) {
    // do some thing with somevalue
}); 
```

# jquery - 从 JQuery 上的跨度值属性设置文本字段的值

> ID：11622608
> 
> 赞同：0
> 
> 时间：2012-07-24T00:43:37.513
> 
> 标签：jquery, html, textfield

我有一个小问题，出于样式目的，我使用定义列表而不是组合框，在我的 dd 标记内，有一个 ul，在每个 li 内，有一个跨度，有一个 value 属性。我正在尝试将该值放在文本字段中，以便可以在发布操作中使用它。这段代码在我的 li 的 click 函数里面：

```
var temp = $(this).find("span").attr("value");
$("#ch").val(temp); 
```

我相信我的选择是正确的，因为当我记录 temp 的值时，它是我想要的值，但是当我记录 ch 字段的值时，我得到未定义。

我错过了什么？提前致谢。

何塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:45:39.673

```
$("#ch").val($(this).find("span").text()); 
```

但是，如果您确定`temp`具有正确的值（即使使用错误的方法），那么您可能没有达到目标，您确定元素具有 ID`ch`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:44:43.563

只是要知道，`span`元素没有`value`属性，除非您自己在标记中定义它。

* * *

**实现您想要的可能的方法：**

用这个：

```
$('#ch').val($(this).find('span').html()); 
```

或者：

```
$('#ch').val($(this).find('span').text()); 
```

在这里面：

```
$(selector).on('click', function() {
   $('#ch').val($(this).find('span').text());
}); 
```

**问题的可能解决方案`undefined`：**

*   确保为要设置值的元素使用正确的 id。
*   也许你的元素`#ch`在 DOM 中，所以你需要`.on()`像上面的例子一样使用，而不仅仅是`$(selector).click();`

# java - 仅报告 mapReduce 作业的映射器中的 k 个最低值

> ID：11622611
> 
> 赞同：0
> 
> 时间：2012-07-24T00:44:11.357
> 
> 标签：java, hadoop, mapreduce, report

我正在编写一个 mapReduce 作业，该作业从一个巨大的数据集中找到与一个点的距离最短的 k 个对象。

在我的映射器中，我只想报告该数据块距离最短的 k 个对象。这样，对于每个数据块，我都有 k 个中间值（键，值），其中键是距离，值是 object_id。所以在我的 reducer() 中，我可以轻松地处理和总结 k 个最小值。

我想不出一种方法来仅报告与我的映射器类中的一个数据块的点距离最短的 k 对象的中间键值对？

我知道我可以为该数据块中的所有输入数据返回 (distance,obj_id) 作为中间键值对，然后在我的减速器类中减少它并获得相同的结果。但是 k <<（每个数据块中的数据数量）并且通过只报告 k 个中间键值而不是全部，我可以显着减少数据传输/改组的数量。

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:25:43.320

假设 k 很小（你可以在内存中容纳这个数量的对象），那么这应该很容易：

*   创建一个包含两个实例变量的包装器/容器对象 - 计算距离（浮点数/双精度？）和 object_id（文本？）
*   有许多可能的方法来维护一组固定的值，但是对于这个例子，让我们使用 TreeSet（你的包装器对象类型）
*   要么确保你的包装对象实现了 Comparable 接口，要么创建一个可以被 TreeSet 用来确定顺序的 Comparator 实现——实现应该首先比较距离实例变量，如果它们相同，然后比较对象 ID（这个引出了一个有趣的问题——如果你想保留最小的 10 个值，但有 20 个值都具有最小的距离——你想保留哪 10 个？）
*   当您在映射器中处理值时，计算距离值，如果树集大小小于 K，或者距离小于集合的尾值距离，则添加此距离/obj_id 对（或者创建一个新实例如果集合大小小于 k，则删除包装器，或者驱逐尾部值并重新使用它来托管新的距离/obj id（确保将其从集合中删除，修改值，然后重新添加）
*   在映射器的清理方法中，一次输出一个值的树集。

# ruby-on-rails - 提高加载一长串 Facebook 好友时的性能

> ID：11622614
> 
> 赞同：4
> 
> 时间：2012-07-24T00:44:32.723
> 
> 标签：ruby-on-rails, performance, caching, delayed-job, fb-graph

![在此处输入图像描述](../Images/b69b275d4ff4a9781b15bcd0eca37411.png)

作为我的 Rails 项目的一部分，我有一个功能允许用户向他们的 FB 朋友发出邀请。我使用 fb_graph 进行 API 调用，下面是用户点击邀请页面时来自控制器的代码示例。

这个操作变得非常昂贵。我已经看到拥有超过 1000 个朋友的用户需要超过 30 秒的时间。此外，每次用户点击邀请页面时，此代码都会重新执行。虽然用户的 FB 好友列表并不完全是静态的，但不必在每个请求上都重新计算它应该没问题。

所以我想做的是改进这段代码，让它更有效率。我可以想出几种不同的潜在方法来做到这一点，但在这种情况下最有意义的是什么？这比我通常想在 SO 上问的要开放一些，但是由于我对编程还比较陌生，所以我对你会/不会做什么和如何做一样好奇它。

以下是我可以进行的优化的一些想法：

1) 仅在会话内进行优化。该代码在页面第一次被点击时执行，并将持续到会话的其余部分。我实际上不确定如何做到这一点。

2）持久化到数据库。将一列添加到将保存朋友哈希的用户表。我可以使用后台作业定期刷新这些数据（也许每周一次？）

3）坚持缓存。我什至不确定这涉及到什么，或者这是否是一个合适的用例。我的感觉是选项 2 需要大量手动维护，也许有一个很好的缓存解决方案可以处理过期等，但不确定

其他想法？感谢您对选项的想法。

```
 # fetch full array of facebook friends
  @fb_friends = current_user.facebook.fetch.friends

  # strip out only id, name, and photo for each friend
  @fb_friends.map! { |f| { identifier: f.identifier, name: f.name, picture: f.picture }}

  # sort alphabetically by first name
  @fb_friends.sort! { |a,b| a[:name].downcase <=> b[:name].downcase }

  # split into two lists. those already on vs not on network
  @fb_friends_on_network =  Array.new

  @fb_friends.each do |friend|
    friend_find = Authorization.find_by_uid_and_provider(friend[:identifier], 'facebook')
    if friend_find
      @fb_friends_on_network << friend_find.user_id
      @fb_friends.delete(friend)
    end 
  end 
```

**更新＃1**

在我进行的初始实验中添加更多内容。我在包含 @fb_friends 数组的用户表中添加了一个列（对上面显示的转换进行后处理）。基本上上面的控制器代码被简单地替换为@fb_friends = current_user.fbfriends。我认为这会大大减少负载，因为不再需要调用 Facebook，更不用说上面完成的所有处理了。这确实节省了一些时间，但没有预期的那么多。我自己的朋友列表在我的本地机器上加载大约需要 6 秒，在这些更改之后它下降到 4 秒。在负载问题上，我必须在这里遗漏一些更大的东西。

**更新#2**

经过进一步调查，我了解到几乎一半的数据传输归因于我用于“邀请”按钮的表单。该表单将为每个朋友加载一次，如下所示：

```
<%= form_for([@group, @invitation], :remote => true, :html => { :'data-type' => 'html', :class => 'fbinvite_form', :id => friend[:identifier]}) do |f| %>
    <%= f.hidden_field :recipient_email, :value => "facebook@meetcody.com" %>

    <div class = "fbinvite btn_list_right" id = "<%= friend[:identifier] %>">
    <%= f.submit "Invite", :class => "btn btn-medium btn-primary", :name => "fb" %>
    </div>
<% end %> 
```

我决定删除表单并在里面放置一个简单的按钮：

```
<div class = "fbinvite_form" id = "<%= friend[:identifier] %>" name = "fb">
    <div class = "btn btn-small">
        Invite
    </div>
</div> 
```

然后我使用 ajax 来检测点击并采取适当的措施。这种变化实际上将数据传输减少了一半。在加载大约 500 位朋友之前，大约需要 650kb，现在已降至约 330kb。

我想我会回去尝试我在更新＃1中尝试过的东西，进行预处理。结合起来，我希望我能把它降低到大约 2 秒的操作。

**更新#3**

我最终安装了[Miniprofiler](http://railscasts.com/episodes/368-miniprofiler)以了解更多可能会减慢此操作的原因，并了解到我上面的 for 循环效率非常低，因为它会让每个朋友都访问数据库。我发布了一个[单独的问题](https://stackoverflow.com/questions/11676760/rails-active-record-how-to-reduce-number-of-trips-to-database)，并得到了帮助将旅行减少到只有一次。然后我继续执行我在更新 #1 中提到的预处理。通过所有这些更改，我将它降低到 ~700 毫秒，考虑到它在走这条路之前需要 +20 秒以上的时间，这是非常了不起的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:43:17.407

如果您可以并行运行一些查询，我建议您看一下：[The futoroscope gem](https://github.com/codegram/futuroscope)。正如您在宣布的[博客文章](http://blog.codegram.com/2013/5/new-gem-released-futuroscope)中看到的那样，它试图解决同时进行 API 查询的相同问题。它似乎有很好的支持和良好的测试覆盖率。

# perl - Perl打印哈希数组？

> ID：11622615
> 
> 赞同：3
> 
> 时间：2012-07-24T00:44:40.443
> 
> 标签：perl, twitter, multidimensional-array, hashtable

我正在使用 Net::Twitter 访问我的 Twitter 消息。目前 direct_message() 返回消息数组。我发现它实际上是一个数组数组（基于帐户，然后是每个单独的消息）。

我想知道是否有人知道从结果中打印消息 ID 的更好方法？我只是认为它是一个数组的数组，因为 $msgs[0][0]{'id'} 会打印出消息 ID。当我做数据转储程序时，它看起来更像是一个哈希数组。

```
foreach my $msg (@{$msgs[0]})
{
    print $msg->{'id'} . "\n";
} 
```

数据::Dumper 结果

```
$VAR1 = [
      {
        'sender_screen_name' => 'text',
        'recipient' => {
                         'friends_count' => 'text',
                         'follow_request_sent' => 'text',
                         'profile_background_image_url_https' => 'text',
                         'profile_sidebar_fill_color' => 'text',
                         'profile_image_url' => 'text',
                         'profile_background_color' => 'text',
                         'notifications' => 'text',
                         'url' => 'text',
                         'id' => 'text',
                         'is_translator' => 'text',
                         'following' => 'text',
                         'screen_name' => 'text',
                         'lang' => 'text',
                         'location' => 'text',
                         'followers_count' => 'text',
                         'statuses_count' => 'text',
                         'name' => 'text',
                         'description' => 'text',
                         'favourites_count' => 'text',
                         'profile_background_tile' => 'text',
                         'listed_count' => 'text',
                         'contributors_enabled' => 'text',
                         'profile_link_color' => 'text',
                         'profile_image_url_https' => 'text',
                         'profile_sidebar_border_color' => 'text',
                         'created_at' => 'text',
                         'utc_offset' => 'text',
                         'verified' => 'text',
                         'show_all_inline_media' => 'text',
                         'profile_background_image_url' => 'text',
                         'protected' => 'text',
                         'default_profile' => 'text',
                         'id_str' => 'text',
                         'profile_text_color' => 'text',
                         'default_profile_image' => 'text',
                         'time_zone' => 'text',
                         'profile_use_background_image' => 'text',
                         'geo_enabled' => 'text',
                       },
        'id_str' => 'text',
        'sender_id' => 'text',
        'created_at' => 'text',
        'text' => 'text',
        'sender' => {
                      'friends_count' => 'text',
                      'follow_request_sent' => 'text',
                      'profile_background_image_url_https' => 'text',
                      'profile_sidebar_fill_color' => 'text',
                      'profile_image_url' => 'text',
                      'profile_background_color' => 'text',
                      'notifications' => 'text',
                      'url' => 'text',
                      'id' => 'text',
                      'is_translator' => 'text',
                      'following' => 'text',
                      'screen_name' => 'text',
                      'lang' => 'text',
                      'location' => 'text',
                      'followers_count' => 'text',
                      'statuses_count' => 'text',
                      'name' => 'text',
                      'description' => 'text',
                      'favourites_count' => 'text',
                      'profile_background_tile' => 'text',
                      'listed_count' => 'text',
                      'contributors_enabled' => 'text',
                      'profile_banner_url' => 'text',
                      'profile_link_color' => 'text',
                      'profile_image_url_https' => 'text',
                      'profile_sidebar_border_color' => 'text',
                      'created_at' => 'text',
                      'utc_offset' => 'text',
                      'verified' => 'text',
                      'show_all_inline_media' => 'text',
                      'profile_background_image_url' => 'text',
                      'protected' => 'text',
                      'default_profile' => 'text',
                      'id_str' => 'text',
                      'profile_text_color' => 'text',
                      'default_profile_image' => 'text',
                      'time_zone' => 'text',
                      'profile_use_background_image' => 'text',
                      'geo_enabled' => 'text',
                    },
        'recipient_screen_name' => 'text',
        'id' => 'text',
        'recipient_id' => 'text',
      }
    ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:04:26.623

我看了看，`Net::Twitter`它本质上是非常骨骼的。它把你引回到 API 上，而你几乎只剩下这些了——主要是因为 API 不断变化，这使得很难生成一个稳定的模块。大多数模块尝试清理*对哈希数组的引用对数组哈希的引用的引用*，但这个没有。

看起来您必须使用`Data::Dumper`来查看返回的数据结构，并以最佳方式对其进行解析。

在这种情况下，您可以使用该[`ref`](http://perldoc.perl.org/functions/ref.html)命令来准确验证您正在查看的内容（如果它在您期望对数组的引用时返回对哈希的引用，那么您知道您可能会遇到麻烦）。您还可以查看[`Net::Twitter::Lite`](https://metacpan.org/module/Net%3a%3aTwitter%3a%3aLite)哪些可能为基本对象处理提供更多支持。

# php - 如何拥有谷歌链接和面孔？

> ID：11622618
> 
> 赞同：0
> 
> 时间：2012-07-24T00:44:43.247
> 
> 标签：php, search, xhtml, search-engine

我一直在某些 Google 搜索中注意到这些链接、面孔和额外信息，我也想知道如何将它们实施到我的网站上。我真的不知道那是怎么称呼的，如果我为此放错了标签，很抱歉。

还有一个附带问题：这些照片看起来很专业，但我没有相机，所以我会放一个标志而不是照片——这会不会越界？

[![](../Images/9d94b65b237c36dccda64fc35f755634.png)](https://i.stack.imgur.com/uS0mB.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:49:25.790

这是关于如何将您的面孔添加到网站搜索结果的 Google 文章：搜索结果[中的作者信息](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1408986)

您可以添加以下代码：

```
<a href="[profile_url]?rel=author">Google</a> 
```

例子：

```
<a href="https://plus.google.com/109412257237874861202?rel=author">Google</a> 
```

或者，您还可以执行以下操作：

> 检查您的电子邮件地址（例如，levy@wired.com）是否与您的内容 (wired.com) 位于同一域中。确保您在该域上发布的每篇文章或帖子都有一个明确的署名，表明您是作者（例如，“作者：Steven Levy”或“作者：Steven Levy”）。访问作者页面并将您的电子邮件地址提交给 Google。无论您在此域上发布多少文章或帖子，您只需执行一次此过程。您的电子邮件将显示在您的 Google+ 个人资料的“投稿人”部分。如果您想将电子邮件保密，请更改链接的可见性。要查看 Google 可以从您的网页中提取哪些作者数据，请使用丰富网页摘要测试工具。

# android - 改进 Activity 启动时间（AsyncTask？）

> ID：11622619
> 
> 赞同：0
> 
> 时间：2012-07-24T00:44:46.257
> 
> 标签：android, multithreading, android-asynctask, android-viewpager

我有一个带有 ViewPager 和一些片段的活动。

问题：启动活动需要很长时间，因为 ViewPager 是在 onResume 方法中创建的。由于数据库请求，需要 2-3 秒。

我想我可以在 onResume 中启动一个 AsyncTask 并在那里完成繁重的工作。但是启动 Activity 的时间并没有减少。

如果我在视图中放置一个按钮并在 onClick 中完成工作，一切正常。活动开始得非常快，点击后开始繁重的工作。

一些需要考虑的代码：

AsyncTask 实现

```
private class LoadTask extends AsyncTask<Void, Integer, Boolean>{

        @Override
        protected Boolean doInBackground(Void... params) {
            PageAdapter mPageAdapter = new PageAdapter(
                    getSupportFragmentManager(), mFragments);
            mViewPager.setAdapter(mPageAdapter);

            return true;
        }

    } 
```

该任务在 onResume 中被调用

```
@Override
    protected void onResume() {
        super.onResume();

        LoadTask task = new LoadTask();
        task.execute();
    } 
```

此解决方案不会改善活动的开始时间。

有没有办法启动 Activity 并在充气和显示所有内容（进度条......）之后完成繁重的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:58:42.093

您需要做的是在创建活动时设置**空**视图寻呼机并将其链接到适配器。然后，将内容填充到异步任务中支持适配器的任何集合中，并通知视图数据集已更改。在创建视图之前无法显示视图，并且您已将适配器的注册移至异步任务，因此您不会注意到差异。目标是让您的应用程序在启动时显示一些视图，并在数据可用时简单地填写数据（您可能知道）。

# flash - 用于高级聊天应用程序的 HTML5 代替 Flash

> ID：11622622
> 
> 赞同：0
> 
> 时间：2012-07-24T00:45:02.027
> 
> 标签：flash, html, node.js, chat, socket.io

我的公司想要开发一个高级聊天应用程序，它具有：

1- 聊天室和用户

2- 实时音频流（一个/两个方向）

3- 实时视频流（一个方向）

4-私人聊天（两个用户之间）

5- 白板。

我们没有任何闪光（动作脚本）技能，所以我的问题是：

**我们可以在 NodeJS + socket.io + Redis + PHP 之类的辅助下使用 HTML5 来做到这一点吗？如果是，从哪里开始？**

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:48:30.797

您可能想查看[WebRTC](http://www.webrtc.org/home)，它看起来像是一个基于[相同想法](http://arstechnica.com/business/2012/04/html5-roundup-mozilla-demos-standards-based-video-chat-in-firefox/)的开放标准，可能有助于或损害您的事业。

**参考**

*   [WebRTC 1.0：浏览器之间的实时通信](http://www.w3.org/TR/webrtc/)

# design-patterns - 是否应该只使用工厂模式来设置状态或类型

> ID：11622625
> 
> 赞同：1
> 
> 时间：2012-07-24T00:45:17.537
> 
> 标签：design-patterns, factory-pattern

**工厂只创建正确的类型**

所以这里是一个`Factory`只返回正确类型的例子：

```
public class BirdFactory
{
    public static IBird CreateBird(string birdType)
    {
        switch (birdType)
        {
            case "Eagle":
                return new Eagle();
            case "Penguin":
                return new Penguin();
        }
    }
} 
```

像这样使用：

```
IBird bird = BirdFactory.CreateBird("eagle");
bird.FlyToLocation(new Location("London")); 
```

**考虑创建正确的类型和设置状态**

以下是用于设置状态和类型的工厂示例：

```
public class BirdFactory
{
    public static IBird CreateBird(string birdType, Location locationToFlyTo)
    {
        switch (birdType)
        {
            case "Eagle":
                return new Eagle(locationToFlyTo);
            case "Penguin":
                return new Penguin(locationToFlyTo);
        }
    }
} 
```

像这样使用：

```
IBird bird = BirdFactory.CreateBird("eagle", new Location("London"));
bird.FlyToLocation(); 
```

**问题**

第二种做法的可接受程度如何？哪个更易维护？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T03:21:56.413

没有基本规则不能在工厂模式中设置状态和类型。确实，组合模式是一种可以接受的做法。因此，如果您非常确定第二种方法完全符合您的需求，那就去做吧。

我更喜欢方法 1 而不是方法 2，因为它不那么模棱两可。

```
IBird bird = BirdFactory.CreateBird("eagle", new Location("London")); 
```

可能会让读者认为老鹰“生活”（或出生）在伦敦。

下一行：

```
bird.FlyToLocation(); 
```

会让他们感到困惑：“它要飞到哪里？哦！你的意思是这只鸟必须飞到伦敦？”

```
bird.FlyToLocation(new Location("London")); 
```

避免了这种歧义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T00:50:42.060

第一次练习更好。在第二个中，您将位置传递给构造函数，而位置实际上与鸟无关。该位置用于 FlyToLocation 方法，应尽可能靠近该方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:58:42.827

我认为这取决于对象所需的初始化复杂性。如果它只是一个属性，那么您最终得到的代码的复杂性可能不值得。

但是，在我想要执行一些复杂的初始化的情况下，我已经将构建器模式与工厂模式结合起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T03:31:06.567

尽管如前所述，您可以做的事情没有限制，但保持事情简单且职责分工明确是所谓的关键 - 良好的设计。所以工厂方法本身应该只负责创建对象——在这种情况下是 IBird 实例，如果实现也需要一个位置，我会继续在工厂中使用一些默认位置，以及将要使用的位置——之后设置位置。这样，您以后也可以修改工厂。您将看到此机制灵活的一个示例如下所示。想象一下，您有您所描述的工厂 - 传递位置的位置。如果明天您决定更改使用的 IBird 的实现，所以它不再使用该位置 - 你

问候， 阿尔塔克

# java - 更新两个 JProgressBars

> ID：11622629
> 
> 赞同：0
> 
> 时间：2012-07-24T00:46:38.783
> 
> 标签：java, multithreading, swing, swingworker, jprogressbar

因此，我使用 ONE JProgressBar 进行了这项工作。如何更新两个单独的进度条？我正在 doInBackground() 工作线程/swingworker 方法中执行下载。我要更新两个条，第一个是总计，第二个是一个节的总计。例如，21/100 //总计 21/50 /halvsies

[我已经在这里](https://stackoverflow.com/questions/11594139/using-swingworker-to-update-a-jprogressbar-during-download "垃圾神和 HovercraftFullOfEels，你们摇滚。")问了一个问题，终于弄清楚了这个线程问题。我现在正在寻找提高赌注，可以这么说，让两个进度条开始。感谢阅读，~Kyte

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:21:40.620

您可以通过在更新“部分”进度时触发新的属性更改事件来利用属性更改支持。

您可以通过多种方式实现，具体取决于您可用的信息。

您可以使用类似的东西直接调用它

```
firePropertyChange("sectionProgress", oldProgress, newProgress); 
```

现在显然，您遇到了可怕的 ETD 同步问题，因为该`firePropertyChange`方法不是线程安全的。

但是您可以创建一个在您的内部`Updater`实现的简单类`Runnable``SwingWorker`

```
private class TwoWorker extends SwingWorker<Double, Double> {

    protected Double doInBackGround() throws Exception {

        //... Do some work

        SwingUtilities.invokeLater(new Updater(oldProgress, newProgress));

    }

    public class Updater implements Runnable {

        private int oldProgress;
        private int newProgress;

        public Updater(int oldProgress, int newProgress) {
            this.oldProgress = oldProgress;
            this.newProgress = newProgress;
        }

        public void run() {
            firePropertyChange("sectionProgress", oldProgress, newProgress);
        }   

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T02:40:43.293

您可以利用用于在和方法中执行中间结果的`SwingWorker<T,V>`类型参数。例如：`V``publish``process`

```
class DownloadProgress {
    private int totalProgress;
    private int currentTaskProgress;

    public DownloadProgress(int totalProgress, int currentTaskProgress) {
        this.totalProgress = totalProgress;
        this.currentTaskProgress = currentTaskProgress;
    }
}

public class DownloadWorker extends SwingWorker<Double, DownloadProgress> {

    @Override
    protected Double doInBackground() throws Exception {
        ...
        publish(new DownloadProgress(1, 50));
    }

    @Override
    protected void process(List<DownloadProgress> progressList) {
        for (DownloadProgress p : progressList){
            //update progress bars
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T03:41:04.557

这是一个简单的例子（@Max 已经说过）：

![在此处输入图像描述](../Images/7850aca03a4ea8ebd2eaaeba57da030e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.Random;
import javax.swing.*;
public class TwoProgressBarsTest {
  private final JTextArea area     = new JTextArea();
  private final JPanel statusPanel = new JPanel(new BorderLayout(0,2));
  private final JButton runButton  = new JButton(new RunAction());
  private SwingWorker<String, DownloadProgress> worker;
  public JComponent makeUI() {
    area.setEditable(false);
    JPanel p = new JPanel(new BorderLayout(5,5));
    p.add(new JScrollPane(area));
    p.add(runButton, BorderLayout.NORTH);
    p.add(statusPanel, BorderLayout.SOUTH);
    p.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
    return p;
  }
  class RunAction extends AbstractAction {
    public RunAction() {
      super("run");
    }
    @Override public void actionPerformed(ActionEvent evt) {
      final JProgressBar bar1 = new JProgressBar();
      final JProgressBar bar2 = new JProgressBar();
      runButton.setEnabled(false);
      statusPanel.add(bar1, BorderLayout.NORTH);
      statusPanel.add(bar2, BorderLayout.SOUTH);
      statusPanel.revalidate();
      worker = new SwingWorker<String, DownloadProgress>() {
        @Override public String doInBackground() {
          int current = 0;
          int lengthOfTask = 12; //filelist.size();
          publish(new DownloadProgress(Target.LOG, "Length Of Task: "+lengthOfTask));
          publish(new DownloadProgress(Target.LOG, "\n-------------------------\n"));
          while(current<lengthOfTask && !isCancelled()) {
            if(!bar1.isDisplayable()) {
              return "Disposed";
            }
            try {
              convertFileToSomething();
            } catch(InterruptedException ie) {
              return "Interrupted";
            }
            publish(new DownloadProgress(Target.LOG, "*"));
            publish(new DownloadProgress(Target.TOTAL, 100*current/lengthOfTask));
            current++;
          }
          publish(new DownloadProgress(Target.LOG, "\n"));
          return "Done";
        }
        private final Random r = new Random();
        private void convertFileToSomething() throws InterruptedException {
          int current = 0;
          //long lengthOfTask = file.length();
          int lengthOfTask = 10+r.nextInt(50);
          while(current<=lengthOfTask && !isCancelled()) {
            int iv = 100 * current / lengthOfTask;
            Thread.sleep(20); // dummy
            publish(new DownloadProgress(Target.FILE, iv+1));
            current++;
          }
        }
        @Override protected void process(List<DownloadProgress> chunks) {
          for(DownloadProgress s: chunks) {
            switch(s.component) {
            case TOTAL:
              bar1.setValue((Integer)s.value);
              break;
            case FILE:
              bar2.setValue((Integer)s.value);
              break;
            case LOG:
              area.append((String)s.value);
              break;
            }
          }
        }
        @Override public void done() {
          runButton.setEnabled(true);
          statusPanel.removeAll();
          statusPanel.revalidate();
          String text = null;
          if(isCancelled()) {
            text = "Cancelled";
          } else {
            try {
              text = get();
            } catch(Exception ex) {
              ex.printStackTrace();
              text = "Exception";
            }
          }
          area.append(text);
          area.setCaretPosition(area.getDocument().getLength());
        }
      };
      worker.execute();
    }
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() { createAndShowGUI(); }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new TwoProgressBarsTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
enum Target { TOTAL, FILE, LOG }
class DownloadProgress {
  public final Object value;
  public final Target component;
  public DownloadProgress(Target component, Object value) {
    this.component = component;
    this.value = value;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T03:42:51.700

你可以走裸机路线：

每当您希望更新它时：

```
EventQueue.invokeLater(new Runnable(){
    public void run(){
        firstProgressBar.setValue(someInt);
        secondProgressBar.setValue(someOtherInt);
    }
}); 
```

# c++ - 协助代码组织？

> ID：11622630
> 
> 赞同：1
> 
> 时间：2012-07-24T00:47:07.503
> 
> 标签：c++, oop, design-patterns

我一直在为我的游戏编写服务器代码。它工作得非常好，但 90% 的功能都属于 1 类。

通常我发现很容易知道如何划分事物。每个对象都是一个类，或者每个对话框都是一个类并为其子级处理逻辑。

在这种情况下，服务器收到一个请求，然后要么告诉其他玩家，要么处理并通知适当的玩家。

这是头文件：

```
 class ServerCore : public ServerHost, public NetEventListener,
        public ServerEventProvider
    {
        NetEventDecoder m_dec;
        NetEventEncoder m_enc;
        LoginManager m_login;

        ServerPlayerManager m_playerMan;
        ServerTableManager m_tableMan;

        void sendToTarget();
        void sendToAllActive();
        void sendToActiveNotTarget();
        void sendToTable(int tableNo);

    public:
        ServerCore();
        virtual void onConnect (Lacewing::Server::Client &client);
        virtual void onDisconnect (Lacewing::Server::Client &client);
        virtual void onError (Lacewing::Error &error);
        virtual void onReceive (Lacewing::Server::Client &client, char * data, int size);
        virtual void sendChatMessageC(const std::string& message,ChatAreaEnum area);
        virtual void requestTableC(int tableNo, int seatNo);
        virtual void playerRequestSitC(int tableNumber, int seatNumber);
        virtual void playerStoodUpC();
        virtual void hostGameC(const SpadesGameInfo& info);
        virtual void gameMessageC(SpadesCSMessageEnum message, const std::vector<int>& params);
        virtual void modifyListC(const std::string& player, GroupTypeEnum group, bool add);
        virtual void canceledHostingRequestC();
        virtual void sendInviteC(int tableNo, const std::string& player);

        virtual void loginResult(const std::string& name, ServerPlayer* player,
            const std::string& sessionID, bool success, bool newSession);
        virtual void readyToReceiveLobbyDataC();

        virtual void playerAbandonedGameC();
        virtual void watchTableC(int tableNo);

        virtual void gameCompleted(int tableId);

        virtual void playerWantsPlayAgainC();
        virtual ~ServerCore(void);
    };
} 
```

我真的不知道如何将其分解为较小的班级。他们执行的任务被交给其他对象，例如身份验证和从数据库中检索数据，但所有事件当前都在这个 1 文件中处理。

网络事件解码器在从通过网络接收的字符串转换之后调用适当的方法。

这样做效果很好，但游戏会变得更大，我想保持干净和模块化。

这个设计是个好主意吗？如果不是，那么在游戏服务器开发中通常使用什么类型的模式来使事情更加面向对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:31:49.430

看着你的课，我想到了[命令模式。](http://en.wikipedia.org/wiki/Command_pattern)事实上，以结尾的方法`C`看起来很像命令。如果你有一个命令界面：

```
class Command {
  virtual void execute() = 0;
} 
```

以及每个命令的单独子类，然后`NetEventDecoder`可以将接收到的字符串解码为特定命令。

此外，每当您发现自己将相同的数据传递给多个方法时，这都暗示着其中隐藏着一个类。例如，您可以将所有采用 a 的方法拉`tableNumber`入一个`Table`类。我还将摆脱`Manager`类并更直接地对关联进行建模。

例如：

```
// A game server contains players and tables
class GameServer {
  map<string, Player *> players;
  map<int, Table *> tables;

  Player *findPlayer(const string &name);
  Table *findTable(int tableNumber);
  ...
}

// A player can perform various actions
class Player {
  string name;

  bool requestSeat(Table *table);
  void standUp();
  ...
}

// A table maintains the status of seats
class Table {
  int tableNumber;

  bool requestSeat(int seatNumber);
  ...
} 
```

上面的`GameServer`类只是简单地模拟游戏，根本不处理网络。然后可以协调以提供网络功能并`NetEventDecoder`在. 示例命令可能如下所示：`ServerCore``GameServer`

```
class PlayerStandUpCommand : public Command {
  GameServer *server;
  string playerName;

  void execute() {
    Player *player = server->findPlayer(playerName);
    player->standUp();
  }
} 
```

# jquery - jQuery dd 选择

> ID：11622639
> 
> 赞同：1
> 
> 时间：2012-07-24T00:48:29.877
> 
> 标签：jquery, html

如果我有下面的代码，是否可以分别选择第一个、第二个和第三个 dd。例如，如果我想将子价格更改为 30，运费更改为 10，总价更改为 40，我将如何在 jquery 中分别选择每个 dd？我知道我可以添加类并通过它来完成，我只是想知道是否还有另一种方法。

```
<dl class="cart">
  <dt>Sub-Total:</dt>
    <dd>10.00</dd>
  <dt>Shipping</dt>
    <dd>5.00</dd>
  <dt>Total:</dt>
    <dd>15.00</dd>
</dl> 
```

另外我将如何添加jquery

```
 <dt>Discount</dt>
    <dd>-5.00</dd> 
```

总 dt 正上方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:53:45.997

```
var newDD = '<dt>Discount</dt><dd>-5.00</dd>';

$('dd', '.cart').eq(0).text(30);
$('dd', '.cart').eq(1).text(10);    
$('dd', '.cart').eq(2).text(40);    

$('dt', '.cart').last().before(newDD); 
```

[小提琴](http://jsfiddle.net/5ntF7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:53:13.687

选择器返回匹配元素的数组。只需使用索引即可获得所需的索引。

```
$("dd")[0] gives you the first one. 
```

或者，您可以使用 nth-child 选择器

```
$("dl dd:nth-child(1)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:56:05.570

[http://jsfiddle.net/Neverever/37hSb/](http://jsfiddle.net/Neverever/37hSb/)

```
// Update Price
var updatedPrice = [10, 30, 40]

$("dl.cart > dd").each(function(idx, elm) {
   $(elm).text(updatedPrice[idx]);
});

// Insert Discount
$("<dt>Discount</dt><dd>-5.00</dd>")
   .insertBefore("dl.cart > dt:last");​ 
```

# vba - 在 VBA 中使用 for 循环调用连续的变量名（即 car1、car2.... car10）

> ID：11622648
> 
> 赞同：2
> 
> 时间：2012-07-24T00:49:57.403
> 
> 标签：vba, excel, for-loop

场景）我有七个变量；labelKid1，labelKid2，...LabelKid3。我在单元格中搜索不为空的单元格，然后将值输入到标签中，从 labelKid1 开始，然后转到下一个标签。

问题）有没有办法让我们使用 for 循环来遍历这些变量？我的意思是我可以用诸如 labelKid + j 之类的东西以某种方式调用变量，其中 j 是 for 循环的值吗？这将使我能够更轻松地通过标签。

现在，我知道我可以通过将标签放入一个数组并使用 for 循环来调用它们的索引来做到这一点，但是有没有办法按照我上面所说的来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:04:32.707

不，VBA 不支持可变变量（因为它们在 PHP 中被调用）。正如你所说，你需要使用列表、字典或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T15:35:26.420

`UserForm1.Controls("labelKid" & i)`您可以使用通过与 UserForm1 关联的名称调用任何表单控件来实现此目的

所以你需要这样的东西

```
Sub ControlName()
Dim i As Long
For i = 1 To 10
    UserForm1.Controls("labelKid" & i).Value = i 
Next
End Sub 
```

希望这可以帮助！

# python - pandas 中的大而持久的 DataFrame

> ID：11622652
> 
> 赞同：96
> 
> 时间：2012-07-24T00:50:49.087
> 
> 标签：python, pandas, sas

作为长期 SAS 用户，我正在探索切换到 python 和 pandas。

但是，今天运行一些测试时，我很惊讶 python 在尝试`pandas.read_csv()`128mb csv 文件时内存不足。它有大约 200,000 行和 200 列主要是数字数据。

使用 SAS，我可以将 csv 文件导入 SAS 数据集，它可以和我的硬盘一样大。

有类似的东西`pandas`吗？

我经常处理大文件，无法访问分布式计算网络。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-30T08:57:26.267

韦斯当然是对的！我只是想提供一些更完整的示例代码。我对一个 129 Mb 的文件有同样的问题，通过以下方式解决：

```
import pandas as pd

tp = pd.read_csv('large_dataset.csv', iterator=True, chunksize=1000)  # gives TextFileReader, which is iterable with chunks of 1000 rows.
df = pd.concat(tp, ignore_index=True)  # df is DataFrame. If errors, do `list(tp)` instead of `tp` 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-07-24T01:10:50.813

原则上它不应该用完内存，但目前`read_csv`由于一些复杂的 Python 内部问题导致大文件存在内存问题（这是模糊的，但它已经知道很长时间了：http: [//github.com/pydata /pandas/issues/407](http://github.com/pydata/pandas/issues/407)）。

目前还没有一个完美的解决方案（这是一个乏味的解决方案：您可以将文件逐行转录成预先分配的 NumPy 数组或内存映射文件—— `np.mmap`），但这是我将要工作的一个在不久的将来。另一种解决方案是读取较小的文件（使用`iterator=True, chunksize=1000`），然后连接，然后使用`pd.concat`. 当您一口气将整个文本文件拉入内存时，问题就出现了。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-02-06T17:46:34.837

这是一个较旧的线程，但我只是想在这里转储我的解决方法。我最初尝试了这个`chunksize`参数（即使是非常小的值，比如 10000），但它并没有太大帮助；内存大小仍然存在技术问题（我的 CSV 约为 7.5 Gb）。

现在，我只是在 for-loop 方法中读取 CSV 文件的块，然后逐步将它们添加到 SQLite 数据库中：

```
import pandas as pd
import sqlite3
from pandas.io import sql
import subprocess

# In and output file paths
in_csv = '../data/my_large.csv'
out_sqlite = '../data/my.sqlite'

table_name = 'my_table' # name for the SQLite database table
chunksize = 100000 # number of lines to process at each iteration

# columns that should be read from the CSV file
columns = ['molecule_id','charge','db','drugsnow','hba','hbd','loc','nrb','smiles']

# Get number of lines in the CSV file
nlines = subprocess.check_output('wc -l %s' % in_csv, shell=True)
nlines = int(nlines.split()[0]) 

# connect to database
cnx = sqlite3.connect(out_sqlite)

# Iteratively read CSV and dump lines into the SQLite table
for i in range(0, nlines, chunksize):

    df = pd.read_csv(in_csv,  
            header=None,  # no header, define column header manually later
            nrows=chunksize, # number of rows to read at each iteration
            skiprows=i)   # skip rows that were already read

    # columns to read        
    df.columns = columns

    sql.to_sql(df, 
                name=table_name, 
                con=cnx, 
                index=False, # don't use CSV file index
                index_label='molecule_id', # use a unique column from DataFrame as index
                if_exists='append') 
cnx.close() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-19T21:29:16.783

下面是我的工作流程。

```
import sqlalchemy as sa
import pandas as pd
import psycopg2

count = 0
con = sa.create_engine('postgresql://postgres:pwd@localhost:00001/r')
#con = sa.create_engine('sqlite:///XXXXX.db') SQLite
chunks = pd.read_csv('..file', chunksize=10000, encoding="ISO-8859-1",
                     sep=',', error_bad_lines=False, index_col=False, dtype='unicode') 
```

根据您的文件大小，您最好优化块大小。

```
 for chunk in chunks:
        chunk.to_sql(name='Table', if_exists='append', con=con)
        count += 1
        print(count) 
```

在数据库中拥有所有数据后，您可以从数据库中查询出您需要的数据。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-08T21:54:47.390

如果你想加载巨大的 csv 文件，dask 可能是一个不错的选择。它模仿了pandas api，所以感觉很像pandas

[链接到 github 上的 dask](https://github.com/dask)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-10T17:38:48.293

您可以使用 Pytable 而不是 pandas df。它专为大型数据集而设计，文件格式为 hdf5。所以处理时间比较快。

# silverlight - Silverlight 应用程序的 SharePoint 嵌入破坏了 ControlTemplates

> ID：11622657
> 
> 赞同：0
> 
> 时间：2012-07-24T00:51:30.613
> 
> 标签：silverlight, sharepoint, controltemplate

这里有一个奇怪的问题，我有一个在页面资源中声明了 4 个 ControlTemplates 的页面。在页面的代码中，我声明了对每个 ControlTemplate 的引用，以便我可以在绑定中使用它们。这在浏览器外和浏览器内都可以正常工作，除非它在 ​​SharePoint 的 Silverlight Web 部件中运行。在 SharePoint 中，我希望模板化的按钮仅显示为普通按钮，其中类作为文本，而不是我在模板中定义的特殊布局和内容。知道为什么它可以在除 SharePoint 之外的任何地方工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:08:39.093

虽然我不确定仅在 SharePoint 中运行时导致空引用的原因，但我重构了我的代码以使 ItemsControl.ItemsSource 引用属性而不是 List<> 的单个分配给它。现在它正在正常工作。

将 Visual Studio 附加到运行 Silverlight Web 部件的 Internet Explorer（对 Chrome 来说效果不佳）进程的能力有助于弄清楚这一点。这可以在 Visual Studio 中通过转到“工具”菜单 >“附加到进程”来找到。它是哪个 IE 进程将是显而易见的，因为它将在 Type 列中有 Silverlight。

# r - 如何将 R 用于多项选择问题？

> ID：11622660
> 
> 赞同：7
> 
> 时间：2012-07-24T00:51:53.777
> 
> 标签：r

我试图弄清楚如何在我最近进行的一项调查中分析多项选择/多项回答（即“选择所有适用的”）问题。

SPSS 有很好的分析在线调查数据和这些类型问题的能力，所以我猜 R 有这个和更多。在 Excel 中处理这些调查答案有点棘手。例如，按年龄向我展示每个喜欢草莓和巧克力冰淇淋的人的直方图/分布。

如何构建数据集以及执行频率、帕累托和逻辑 AND OR 函数的一些基本表格的命令是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T01:30:58.380

我还没有发现任何像 SPSS 中的多重响应集一样方便的东西。但是，您可以根据常见的列名相对轻松地创建组，然后使用任何`apply()`函数或朋友来遍历每个组。`adply()`这是从`plyr`包中使用的一种方法：

```
library(plyr)
set.seed(1)
#Fake data with three "like" questions. 0 = non selected, 1 = selected
dat <- data.frame(resp = 1:10,
                  like1 = sample(0:1, 10, TRUE),
                  like2 = sample(0:1, 10, TRUE),
                  like3 = sample(0:1, 10, TRUE)
                  )

adply(dat[grepl("like", colnames(dat))], 2, function(x)
  data.frame(Count = as.data.frame(table(x))[2,2], 
        Perc = as.data.frame(prop.table(table(x)))[2,2]))
#-----
     X1 Count Perc
1 like1     6  0.6
2 like2     5  0.5
3 like3     3  0.3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T03:14:38.907

我最近写了一个快速函数来处理这些。您也可以轻松修改它以添加总响应的比例。

```
set.seed(1)
dat <- data.frame(resp = 1:10,
                  like1 = sample(0:1, 10, TRUE),
                  like2 = sample(0:1, 10, TRUE),
                  like3 = sample(0:1, 10, TRUE)) 
```

功能：

```
multi.freq.table = function(data, sep="", dropzero=FALSE, clean=TRUE) {
  # Takes boolean multiple-response data and tabulates it according
  #   to the possible combinations of each variable.
  #
  # See: http://stackoverflow.com/q/11348391/1270695

  counts = data.frame(table(data))
  N = ncol(counts)
  counts$Combn = apply(counts[-N] == 1, 1, 
                       function(x) paste(names(counts[-N])[x],
                                         collapse=sep))
  if (isTRUE(dropzero)) {
    counts = counts[counts$Freq != 0, ]
  } else if (!isTRUE(dropzero)) {
    counts = counts
  }
  if (isTRUE(clean)) {
    counts = data.frame(Combn = counts$Combn, Freq = counts$Freq)
  } 
  counts
} 
```

应用功能：

```
multi.freq.table(dat[-1], sep="-")
#               Combn Freq
# 1                      1
# 2             like1    2
# 3             like2    2
# 4       like1-like2    2
# 5             like3    1
# 6       like1-like3    1
# 7       like2-like3    0
# 8 like1-like2-like3    1 
```

希望这可以帮助！否则，显示一些所需输出的示例或描述一些功能，我会看看可以添加什么。

# 更新

在在线查看 SPSS 的输出后，似乎以下内容应该为您完成。如果您需要大量使用它，这很容易包装到一个函数中。

```
data.frame(Freq = colSums(dat[-1]),
           Pct.of.Resp = (colSums(dat[-1])/sum(dat[-1]))*100,
           Pct.of.Cases = (colSums(dat[-1])/nrow(dat[-1]))*100)
#       Freq Pct.of.Resp Pct.of.Cases
# like1    6    42.85714           60
# like2    5    35.71429           50
# like3    3    21.42857           30 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-21T02:47:16.077

```
multfreqtable(data_set, "Banner")
multfreqtable = function(data, question.prefix) {
  z = length(question.prefix)
  temp = vector("list", z)

  for (i in 1:z) {
    a = grep(question.prefix[i], names(data))
    b = sum(data[, a] != 0)
    d = colSums(data[, a] != 0)
    e = sum(rowSums(data[,a]) !=0)
    f = as.numeric(c(d, b))
    temp[[i]] = data.frame(question = c(sub(question.prefix[i], 
                                            "", names(d)), "Total"),
                           freq = f,
                           percent_response = (f/b)*100,
                           percent_cases = (f/e)*100 )
    names(temp)[i] = question.prefix[i]
  }
  temp
} 
```

在为您提供数字、案例数量级别的百分比和回复数量级别的百分比方面做得非常好。非常适合分析多响应问题

# c++ - 在 QGraphicsScene 上强制更新 drawForeground

> ID：11622662
> 
> 赞同：1
> 
> 时间：2012-07-24T00:52:20.773
> 
> 标签：c++, qt, qt-creator

我想在我的鼠标位置上显示一个小图像。

所以我这样做了：

```
void AreaScene::mouseMoveEvent(QGraphicsSceneMouseEvent *event){
    MapData::pEnd.setX(event->scenePos().x());
    MapData::pEnd.setY(event->scenePos().y());
    this->update(0, 0, this->width(), this->height());
} 
```

pEnd 是我的观点。

在drawForeground我这样做了：

```
void AreaScene::drawForeground(QPainter *painter, const QRectF &rect){
qDebug() << "called";
    if(MapData::tileIndex!=-1&&MapData::pEnd.x()!=-1){

        painter->drawPixmap(MapData::pEnd.x(),MapData::pEnd.y(), *MapData::tileImage, (((int)(MapData::tileIndex%(MapData::tileImage->width()/MapData::tileSize.x())))*MapData::tileSize.y()),
                      (((int)(MapData::tileIndex/(MapData::tileImage->width()/MapData::tileSize.x())))*MapData::tileSize.x()),
                       MapData::tileSize.x(), MapData::tileSize.y());
    }
} 
```

注意：平铺索引是 tileImage (QPixelMap) 上子矩形的位置，所以我得到了点、图像和其中的子矩形。

如果我一直按鼠标右键或鼠标左键，它会更新，但我想在移动鼠标时更新它，我知道根本没有调用 drawForeground。有没有办法调用它，强制更新，以便我可以在屏幕上显示小瓷砖？

另一种选择（我认为）是将鼠标图标更改为平铺图像，但我做了一些研究并没有找到办法。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:37:59.160

调用`setMouseTracking(true);`显示场景的 QGraphicsView。这将告诉视图在鼠标悬停在视图上时生成鼠标移动事件。否则，只有在按住鼠标按钮的同时单击并拖动时，视图才会生成鼠标移动事件。

# json - 格式化所有模型和服务 URL 以在 AngularJS 中包含 .json

> ID：11622665
> 
> 赞同：0
> 
> 时间：2012-07-24T00:52:44.027
> 
> 标签：json, rest, angularjs

我遇到了一个问题，我的 Web 服务要求所有 RESTful url 在`.json`URL 上包含扩展名。我已经在我的 AngularJS 代码中做到了这一点，以便所有 URL 都具有该扩展名。所以我的服务网址如下所示：

```
/resources/:id.json 
```

但问题是，当我包含 .json 扩展名时，POST `create`RESTful 操作最终会发布到如下所示的 URL：

```
/resources/.json 
```

这会引发错误。

我需要做的是在我的 AngularJS 应用程序中设置默认值，以在返回每个 URL 之前设置 .json。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:34:53.297

我不这么认为。

你可以编辑你的 angular-resource.js 副本来拥有它。接受`suffix`资源中的参数或其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:44:34.810

由于这在 AngularJS 中（尚不存在）我不得不派生一个 repo 并自己添加它。

这是添加了此功能的存储库。

[https://github.com/yearofmoo/angular.js](https://github.com/yearofmoo/angular.js)

# android - 来自一个 Activity 的多个异步任务

> ID：11622675
> 
> 赞同：4
> 
> 时间：2012-07-24T00:54:24.373
> 
> 标签：android, android-asynctask

我想在一个活动中从 3 个不同的休息调用中获取数据。我如何使用异步任务来做到这一点。如何协调 3 个任务？

更新：我想做的是在更新 UI 之前等待所有三个任务完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:10:43.253

你可以参考这个帖子

[同时运行多个 AsyncTask ——不可能吗？](https://stackoverflow.com/a/4072832/1441666)

AsyncTask 使用线程池模式来运行来自 doInBackground() 的内容。问题最初是（在早期的 Android 操作系统版本中）池大小仅为 1，这意味着一堆 AsyncTask 没有并行计算。但后来他们修复了这个问题，现在大小为 5，所以最多 5 个 AsyncTask 可以同时运行。不幸的是，我不记得他们到底在哪个版本中改变了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:59:46.977

似乎其他人也有这个问题：

*   [如何使用 ExecutorService 等待所有线程完成？](https://stackoverflow.com/questions/1250643/how-to-wait-for-all-threads-to-finish-using-executorservice)
*   [如何在 Android 中高效管理多个异步任务](https://stackoverflow.com/questions/9221343/how-handling-multiple-async-tasks-efficiently-in-android)

# java - SQL排序部分字母顺序

> ID：11622680
> 
> 赞同：1
> 
> 时间：2012-07-24T00:55:17.410
> 
> 标签：java, sql

我很难使用 SQL。我在[这里使用这个 SQL 演示](http://www.w3schools.com/sql/sql_tryit.asp)

但我不知道如何仅列出以 A 或 F 开头的公司以及地址和城市。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:46:45.020

您可以使用 like 运算符，该运算符将使用索引（如果存在）。

```
SELECT CompanyName, ContactName, Address, City
FROM customers
WHERE CompanyName like '[af]%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:58:42.267

```
SELECT CompanyName, ContactName, Address, City
FROM customers
WHERE lower(substring(CompanyName,0,1)) in ('a','f') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:59:33.450

[http://msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

```
where  lower(substring(title,0,1)) in ('a', 'f') 
```

# python - Google App Engine 需要索引进行测试

> ID：11622683
> 
> 赞同：1
> 
> 时间：2012-07-24T00:55:27.133
> 
> 标签：python, google-app-engine, testing

我只是被我的功能测试所困扰，没有使用与我的 dev_appserver 相同的设置。我目前使用 require_indexes 运行我的 dev_appserver（非 rel）。

如何强制我的测试台使用相同的设置？

我尝试过使用`SetupIndexes`，但它没有“要求”在我的 index.yaml 中定义它们。我的设置不正确，因此我可以做任何我想做的查询。

IE

```
clz.testbed = Testbed()
clz.testbed.activate()
clz.testbed.init_memcache_stub()
clz.testbed.init_taskqueue_stub()
clz.testbed.init_urlfetch_stub()
clz.testbed.init_datastore_v3_stub(use_sqlite=True, datastore_file=somepath)
SetupIndexes('','')

model.objects().filter(x=1, y=2.....) #will work regardless of index defined. 
```

但是当查询在服务器上执行时，我得到了

> NeedIndexError：此查询需要未定义的复合索引。您必须更新应用程序根目录中的 index.yaml 文件。以下索引是所需的最低索引：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T03:07:25.447

尝试将 { "require_indexes" : True } 作为关键字参数添加到 init_datastore_v3_stub()

您可以查看（并单步执行）SDK 代码，以了解该参数最终是如何传递到数据存储存根的。

# c# - 在 Windows 服务中使用计时器 - 即使禁用计时器，已用事件处理程序也会继续触发

> ID：11622684
> 
> 赞同：1
> 
> 时间：2012-07-24T00:55:34.310
> 
> 标签：c#, windows, inheritance, service, timer

我已经阅读了很多与 Windows 服务和计时器使用相关的帖子，但我还没有找到任何原因导致我的事件处理程序仍然被触发。谁能指出我正确的方向？我想知道*为什么*会发生这种情况，所以我知道将来如何避免这种情况。

编辑：永远不会调用 onError 事件处理程序（或者我会在事件日志中看到该事件）。

**计时器：** System.Timers.Timer
**ServiceBase：** System.ServiceProcess.ServiceBase

* * *

这是抽象类：

```
public abstract class ABCService : ServiceBase
{
    // Members
    protected Timer             invocationTimer;
    protected Timer             wellnessTimer;
    protected FileSystemWatcher fsw;

    // Constructors
    protected ABCService()
    {
        invocationTimer = new Timer();
        wellnessTimer   = new Timer();
        fsw             = null;

        invocationTimer.AutoReset = false;
        invocationTimer.Interval  = 30000; // 30 seconds
        invocationTimer.Elapsed  += new ElapsedEventHandler(invocationTimer_Elapsed);

        wellnessTimer.AutoReset   = false;
        wellnessTimer.Elapsed    += new ElapsedEventHandler(wellnessTimer_Elapsed);
    }

    // Methods
    protected void invocationTimer_Elapsed(object o, ElapsedEventArgs args)
    {
        try
        {
            // log to event log

            invocationTimer.Stop();

            if ((new FileInfo(fsw.Path + "\\" + fsw.Filter)).Exists)
            {
                onCreated(this, new FileSystemEventArgs(WatcherChangeTypes.Created, fsw.Path, fsw.Filter));
            }
        }
        catch (Exception x)
        {
            onError(this, new ErrorEventArgs(x));
        }
    }

    protected void wellnessTimer_Elapsed(object o, ElapsedEventArgs args)
    {
        try
        {
            // log to event log

            wellnessTimer.Stop();
            wellnessTimer.Interval = 60000; // ms

            if (fsw != null)
            {
                fsw.Dispose();
            }

            fsw = new FileSystemWatcher(ConfigurationManager.AppSettings["pathKey"], ConfigurationManager.AppSettings["filterKey"]);

            invocationTimer.Start();
        }
        catch (Exception x)
        {
            onError(this, new ErrorEventArgs(x));
        }
    }

    protected abstract void onCreated(object o, FileSystemEventArgs args);

    protected virtual void onError(object o, ErrorEventArgs args)
    {
        // log to event log

        wellnessTimer.Start();
    }

    protected override void OnStart(string[] args)
    {
        // log to event log

        wellnessTimer.Interval = 5000; // 5 seconds
        wellnessTimer.Start();
    }

    protected override void OnStop()
    {
        // log to event log

        wellnessTimer.Stop();
    }
} 
```

* * *

这是一个实例类：

```
public partial class Service1 : ABCService
{
    // Members
    private static object locket = new object();
    private static DateTime LAST_RUN_TIME = DateTime.Now.AddSeconds(-10);

    // Constructors
    public Service1()
    {
        InitializeComponent();
    }

    // Methods
    protected override void onCreated(object o, FileSystemEventArgs args)
    {
        lock (locket)
        {
            // log to event log

            if ((DateTime.Now - LAST_RUN_TIME).Seconds >= 10)
            {
                // do stuff
            }
            else
            {
                // log to event log

                invocationTimer.Stop();
                invocationTimer.Start();
            }
        }
    }
} 
```

* * *

这是部分类的自动生成代码：

```
partial class Service1
{
    /// <summary> 
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Component Designer generated code

    /// <summary> 
    /// Required method for Designer support - do not modify 
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        // 
        // Service1
        // 
        this.ServiceName = "Service1";

    }

    #endregion
} 
```

* * *

那么究竟发生了什么？我正在查看我的事件日志，我看到每分钟调用一次 wellnessTimer 事件处理程序。

这是我**认为**正在发生的事情，但我显然错了：

```
1\. Service is started via MMC
2\. OnStart() method is invoked
3\. wellnessTimer interval is set to 5 seconds
4\. wellnessTimer start method is invoked
5\. wellnessTimer_Elapsed event handler is invoked
6\. wellnessTimer stop method is invoked
7\. wellnessTimer interval is set to 5 minutes
8\. invocationTimer start method is invoked
9\. 30 seconds later, the invocationTimer_Elapsed method is invoked
10\. invocationTimer stop method is invoked 
```

此时，此实例的两个计时器仍应存在，但应禁用。我通过附加到 Visual Studio 2010 中的进程对此进行了调试，并为传递给事件处理程序的对象（发送者）标记了一个 ID。它与实例是同一个对象。此外，Locals 窗口中的两个计时器都将其启用属性设置为 false。

这让我觉得我错误地使用了继承，或者线程正在发生一些事情。我在这两件事上都不是最好的，但如果是因为他们，请告诉我，以便我学习。

提前感谢大家。

* * *

编辑＃2：这是一些跟踪数据......

'o' 表示传递给事件处理程序的对象

```
ABCService() method invoked <--
ABCService() method invoked -->

Service1() method invoked <--
Service1() method invoked -->

OnStart() method invoked <--
OnStart() method invoked -->

wellnessTimer_Elapsed() method invoked <--
((System.Timers.Timer) o).Enabled  = False
((System.Timers.Timer) o).Interval = 5000
this.wellnessTimer.Enabled  = False
this.wellnessTimer.Interval = 5000
wellnessTimer_Elapsed() method invoked -->

invocationTimer_Elapsed() method invoked <--
((System.Timers.Timer) o).Enabled  = False
((System.Timers.Timer) o).Interval = 30000
this.invocationTimer.Enabled  = False
this.invocationTimer.Interval = 30000
invocationTimer_Elapsed() method invoked -->

wellnessTimer_Elapsed() method invoked <--
((System.Timers.Timer) o).Enabled  = False
((System.Timers.Timer) o).Interval = 60000
this.wellnessTimer.Enabled  = False
this.wellnessTimer.Interval = 60000
wellnessTimer_Elapsed() method invoked -->

invocationTimer_Elapsed() method invoked <--
((System.Timers.Timer) o).Enabled  = False
((System.Timers.Timer) o).Interval = 30000
this.invocationTimer.Enabled  = False
this.invocationTimer.Interval = 30000
invocationTimer_Elapsed() method invoked --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:11:01.697

从[MSDN 对 Timer 类的评论](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

> Elapsed 事件可能在调用 Dispose 或 Stop 方法之后或在 Enabled 属性设置为 false 之后发生，因为引发 Elapsed 事件的信号始终排队等待在线程池线程上执行。解决这种竞争条件的一种方法是设置一个标志，告诉 Elapsed 事件的事件处理程序忽略后续事件。

因此，您可以在事件处理程序中执行类似的操作，以防止在禁用计时器后执行它：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    if (timer.Enabled)
    {
        Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:21:03.113

您是否遇到与您提供的代码完全相同的问题，还是取决于周围的代码：

```
 // depending on logic, these next two lines will be called together or not at all 
```

根据我从代码中读到的内容，当在 onCreated 调用中遇到错误时，健康计时器将每 60 秒触发一次。如果这是在执行文件操作，那么需要注意的一件事是运行该服务的帐户的安全权限。

捕获异常时，将其输出到事件日志或日志文件。异常行为很容易导致令人困惑的情况，尤其是在连接调试器不太方便的情况下。

# xcode - Cocos2d / box2d 项目清理后无法编译

> ID：11622688
> 
> 赞同：0
> 
> 时间：2012-07-24T00:56:09.130
> 
> 标签：xcode, cocos2d-iphone, compiler-errors, box2d

我一直在用cocos2d 2.0和box2d构建一个项目，清理之后，它完全崩溃了。编译器在 30 多个错误后停止：“提交的错误太多，现在停止。”

像这样的错误：预编译前缀.pch：未知类型名'NSUInteger'

有任何想法吗？还有哪些信息会有所帮助？（这里是新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:14:39.920

我解决了。问题来自一个名为“Block”的类。我重命名了这个类，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:24:43.303

我的猜测是您在 prefix.pch 中添加了一个或多个 Box2D 头文件，而没有将其包含在 #ifdef __cplusplus 中，因此编译器将尝试将它们编译为常规 C（Objective-C）文件。

这是一个正确包含 Box2D 标头的示例 prefix.pch：

```
#ifdef __OBJC__
// objective-c headers go here, for example:
#import "cocos2d.h"
#endif // __OBJC__

#ifdef __cplusplus
// C++ header files go here, for example:
#import "Box2D.h"
#endif // __cplusplus 
```

# ios - 在 Sqlite 中存储 NSMutableArray

> ID：11622690
> 
> 赞同：2
> 
> 时间：2012-07-24T00:56:49.427
> 
> 标签：ios, sqlite, nsmutablearray

我有一个 NSMutableArray 包含多个 CGRects 的坐标和大小。我想把它存储到sqlite中。是否可以存储整个数组？还是我应该手动将 CGRects 存储在数据库中？

**更新：**

这是我从数据库中检索到的数据：

```
62706c69 73743030 d4010203 04050817 18542474 6f705824 6f626a65 63747358 24766572 
73696f6e 59246172 63686976 6572d106 0754726f 6f748001 a3090a0f 55246e75 6c6cd20b 
0c0d0e5a 4e532e6f 626a6563 74735624 636c6173 73a08002 d2101112 16582463 6c617373 
65735a24 636c6173 736e616d 65a31314 155e4e53 4d757461 626c6541 72726179 574e5341 
72726179 584e534f 626a6563 745e4e53 4d757461 626c6541 72726179 12000186 a05f100f 
4e534b65 79656441 72636869 76657208 11161f28 32353a3c 40464b56 5d5e6065 6e797d8c 
949dacb1 00000000 00000101 00000000 00000019 00000000 00000000 00000000 000000c3 
```

它与我放入数据库*之前*的完全相同。

编码：

这是我用来检查 NSArray 是否正在存档的代码。我还没有将它放入数据库中，因为我只想确保 NSKeyedUnarchive 正常工作。这里是：

```
 NSData *toData = [NSKeyedArchiver archivedDataWithRootObject:rectsArray];
    NSLog(@"The data %@", toData);
    NSArray *fromData = [NSKeyedUnarchiver unarchiveObjectWithData:toData];
    NSLog(@"The data %@", fromData); 
```

显示`toData`存档的表格，但`fromData`根本没有显示任何内容。为什么会这样？

这是一个示例`rectsArray`：

```
(
"NSRect: {{83.389008, 179.61432}, {8.775116, -10.616217}}",
"NSRect: {{83.389008, 179.61432}, {8.775116, -10.616217}}",
"NSRect: {{83.389008, 179.61432}, {8.775116, -10.616217}}",
"NSRect: {{96.085426, 179.61432}, {5.2029028, -10.616217}}",
"NSRect: {{101.28833, 179.61432}, {5.8532658, -10.616217}}",
"NSRect: {{107.1416, 179.61432}, {4.5525398, -10.616217}}",
"NSRect: {{115.61544, 179.61432}, {3.2518141, -10.616217}}",
"NSRect: {{115.61544, 179.61432}, {3.2518141, -10.616217}}",
"NSRect: {{118.86726, 179.61432}, {6.5036283, -10.616217}}",
"NSRect: {{118.86726, 179.61432}, {6.5036283, -10.616217}}"
) 
```

如您所见，它是一个 CGRect 数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:56:23.420

好的——使用 Core Data 会更容易一些，但基础是一样的。您需要使用存档将数组数据存储到 NSData 对象中：

```
NSData *dataFromArray = [NSKeyedArchiver archivedDataWithRootObject:myArray]; 
```

然后将该数据保存为数据库中的 blob。根据您使用的 SQLite 包装器，它可能有一个获取 NSData 对象并将其转换为字节的方法，否则您可以通过以下方式获取原始字节：

```
const char *arrayBytes = [dataFromArray bytes]; 
```

要取回数据，您需要将数据库中的字节取回 NSData 对象，然后将其取消归档。假设您可以将 blob 从数据库中取出并放入名为 dataFromDB 的 NSData 对象中，您将执行以下操作：

```
NSArray *myArrayFromDB = [NSKeyedUnarchiver unarchiveObjectWithData:dataFromDB]; 
```

你会得到你的阵列回来！

# python - 有没有更好的方法来广播数组？

> ID：11622692
> 
> 赞同：6
> 
> 时间：2012-07-24T00:57:03.513
> 
> 标签：python, numpy, array-broadcasting

我想将一个数组广播`b`到它与另一个数组进行算术运算时所采用的形状`a`。

例如，如果`a.shape = (3,3)`and`b`是一个标量，我想得到一个数组，其形状是`(3,3)`并且用标量填充。

一种方法是这样的：

```
>>> import numpy as np
>>> a = np.arange(9).reshape((3,3))
>>> b = 1 + a*0
>>> b
array([[1, 1, 1],
       [1, 1, 1],
       [1, 1, 1]]) 
```

虽然这实际上可行，但我不禁觉得它看起来有点奇怪，并且对于其他查看我正在尝试做的代码的人来说并不明显。

有没有更优雅的方法来做到这一点？我查看了 的文档`np.broadcast`，但速度要慢几个数量级。

```
In [1]: a = np.arange(10000).reshape((100,100))

In [2]: %timeit 1 + a*0
10000 loops, best of 3: 31.9 us per loop

In [3]: %timeit bc = np.broadcast(a,1);np.fromiter((v for u, v in bc),float).reshape(bc.shape)
100 loops, best of 3: 5.2 ms per loop

In [4]: 5.2e-3/32e-6
Out[4]: 162.5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T02:48:31.113

如果您只想用标量填充数组，`fill`可能是最好的选择。但听起来你想要更通用的东西。而不是使用`broadcast`你可以使用`broadcast_arrays`来获得（我认为）你想要的结果。

```
>>> a = numpy.arange(9).reshape(3, 3)
>>> numpy.broadcast_arrays(a, 1)[1]
array([[1, 1, 1],
       [1, 1, 1],
       [1, 1, 1]]) 
```

这推广到任何两个可广播的形状：

```
>>> numpy.broadcast_arrays(a, [1, 2, 3])[1]
array([[1, 2, 3],
       [1, 2, 3],
       [1, 2, 3]]) 
```

它不如`ufunc`基于 - 的方法快，但仍处于同一数量级：

```
>>> %timeit 1 + a * 0
10000 loops, best of 3: 23.2 us per loop
>>> %timeit numpy.broadcast_arrays(a, 1)[1]
10000 loops, best of 3: 52.3 us per loop 
```

但标量`fill`仍然是明显的领跑者：

```
>>> %timeit b = numpy.empty_like(a, dtype='i8'); b.fill(1)
100000 loops, best of 3: 6.59 us per loop 
```

最后，进一步的测试表明，最快的方法——至少在某些情况下——是乘以`ones`：

```
>>> %timeit numpy.broadcast_arrays(a, numpy.arange(100))[1]
10000 loops, best of 3: 53.4 us per loop
>>> %timeit (1 + a * 0) * numpy.arange(100)
10000 loops, best of 3: 45.9 us per loop
>>> %timeit b = numpy.ones_like(a, dtype='i8'); b * numpy.arange(100)
10000 loops, best of 3: 28.9 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T02:45:34.403

[`fill`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.fill.html)听起来像最简单的方法：

```
>>> a = np.arange(9).reshape((3,3))
>>> a
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
>>> a.fill(10)
>>> a
array([[10, 10, 10],
       [10, 10, 10],
       [10, 10, 10]]) 
```

**编辑：**`arange`正如@EOL 指出的那样，如果要创建一个新数组（或任何形状），则不需要这样做`np.empty((100,100))`更好。

时间：

```
In [3]: a = np.arange(10000).reshape((100,100))
In [4]: %timeit 1 + a*0
100000 loops, best of 3: 19.9 us per loop

In [5]: a = np.arange(10000).reshape((100,100))
In [6]: %timeit a.fill(1)
100000 loops, best of 3: 3.73 us per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T02:49:21.663

我知道的最快和最干净的解决方案是：

```
b_arr = numpy.empty(a.shape)  # Empty array
b_arr.fill(b)  # Filling with one value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T02:07:54.627

如果您只需要将标量广播到某个任意形状，则可以执行以下操作：

```
a = b*np.ones(shape=(3,3)) 
```

编辑：`np.tile`更笼统。您可以使用它来复制任意数量的维度中的任何标量/向量：

```
b = 1
N = 100
a = np.tile(b, reps=(N, N)) 
```

# c++-cli - 从类方法释放分配的内存

> ID：11622693
> 
> 赞同：0
> 
> 时间：2012-07-24T00:57:38.877
> 
> 标签：c++-cli

我有一个 c++-cli 类定位器，它的函数定位器在运行时会占用大量内存。在运行结束时，大部分内存通过释放指针随函数一起释放，但仍有一些内存未释放，如果我在 lopp 中连续运行程序，它会堆积起来。有没有办法完全删除每次在函数末尾使用析构函数/构造函数分配的所有内存？

```
public ref class Locator

{
public:
Locator() { } 
~Locator()  { } 
Dictionary<String^, array< Byte >^>^ Locate(Dictionary<String^, String^>^ imgParms) 
{ .....  }

private:
int m_HP;

int main ()

{   
Locator r;

Dictionary<String^,String^>^ myDictionary =   gcnew Dictionary<String^,String^>();

Dictionary<String^,List<array<Byte>^>^>^ myResult1 = gcnew  Dictionary<String^,List<array<Byte>^>^>(); 

myResult1=r.Locate(myDictionary,0);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:56:18.203

在您创建的对象上调用 delete()（就像普通的 C++ 一样）。简单地取消引用指针将把对象留给垃圾收集器来处理。通常这很好，但是如果您在应用程序中使用大量内存，您不希望等待 GC 释放内存。确保您的析构函数删除由它们各自的析构函数分配的所有对象。这与纯 C++ 完全相同。C++/CLI 类隐式继承了 IDisposable 接口，而析构函数是 Dispose() 的包装器，因此您不必单独定义 dispose() （如果我没记错的话；无论如何您都不能这样做）。

# python - Python MMTK“没有与..pdb文件关联的程序，请安装合适的查看器”

> ID：11622700
> 
> 赞同：1
> 
> 时间：2012-07-24T00:58:52.890
> 
> 标签：python, bioinformatics

我是编程和计算机世界的新手。我正在尝试用 MMTK 研究生物分子模拟。

我在 Windows 7 中运行它并且我已经安装了这个软件：

*   python-2.5.4
*   numpy-1.6.2-win32-superpack-python2.5
*   netCDF4-0.8.2.win32-py2.5
*   ScientificPython-2.9.0.win32-py2.5
*   MMTK-2.6.0.win32-py2.5
*   pywin32-217.win32-py2.7

当我运行这个[protein.py](http://structure.usc.edu/mmtk/Examples/MolecularDynamics/protein.py) mmtk 样本时，一切似乎都很好。它显示了 1000 个流程步骤的数量。

但是当我使用该方法运行脚本时`view`，如下所示：

```
from MMTK import *
molecule = Molecule('water')
molecule.view() 
```

然后我收到这条消息：

```
There is no program associated with ..pdb files, please install a suitable viewer 
```

在互联网上搜索了一些答案后，我得到了以下信息：“PDB 文件的查看器可以由环境变量 PDBVIEWER 定义。为了显示 PDB 文件，MMTK 将执行一个命令，该命令由该变量的值后跟一个空格组成以及 PDB 文件的名称。” 我的疑问是：如何通过环境变量 PDBVIEWER 定义 PDB 文件的查看器？变量值是多少？这个环境变量问题在我看来就像火星上出现生命之谜一样简单。我知道如何改变它，但我不知道改变**什么**或**何时**改变它。阅读有关该主题的维基百科文章对我没有太大帮助。所以我想知道的是：****案子？我必须添加一个新变量 (PDBVIEWER) 还是只添加一个现有变量的路径？PDBVIEWER 的值路径是什么（不应该是 C:\Windows\System32）？****

 ****这是我当前的变量值：

变量名称：路径

变量的值：

```
C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;%PYTHON_HOME%;%PYTHON_HOME%\Scripts;C:\Program Files (x86);C:\Python27\; C:\Python27\Scripts;C:\Python25\DLLs 
```

我也有这个 Python 变量：`PYTHON_HOME`这个变量的值：（`C:\Python27`虽然我使用的是带有 MMTK 的 Python25）。

对于有经验的程序员来说，这个问题似乎微不足道。但它的答案对其他人可能非常有用。有大量的生物学家、生物化学家和药剂师对使用计算方法来解决他们的问题感兴趣。这些专业人员并不总是在附近有计算机科学家（特别是如果他们在不发达国家）。

克服最初令人沮丧的错误和安装问题对于许多人的科学生涯至关重要。这个问题的答案将对他们有所帮助。

提前致谢。

如果这个论坛不适合这个级别的问题，请给我反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:05:43.987

谷歌说[http://spdbv.vital-it.ch/](http://spdbv.vital-it.ch/)是一个 PDB 查看器。

您需要安装它或您发现可以查看 PDB 文件的其他东西。假设安装程序不只是为您设置该环境变量（它可能），那么您需要将变量 PDBVIEWER 设置为可以查看 PDB 的可执行文件的路径。因此，假设 C:\SwissPDBViewer\view.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:01:48.760

安装[MMTK 推荐](http://dirac.cnrs-orleans.fr/Manuals/MMTK/mmtk.html?highlight=vmd#visualization-and-animation)用于可视化的[VMD](http://www.ks.uiuc.edu/Research/vmd/)并运行

```
import os
os.environ['PDBVIEWER'] = 'C:/Program Files (x86)/University of Illinois/VMD/vmd.exe'

from MMTK import *
molecule = Molecule('water')
molecule.view() 
```****

# asp.net-mvc - 尝试将 WebForm (ASPX) 登录页面与 MVC 3 应用程序一起使用

> ID：11622709
> 
> 赞同：1
> 
> 时间：2012-07-24T01:00:37.933
> 
> 标签：asp.net-mvc, security, webforms, single-sign-on, siteminder

我有一个技术要求，即从“公共”（非安全）物理 ASPX 页面开始，然后桥接到 MVC 3 应用程序。我已经弄清楚“路由”的更改，但是 MVC [Authorize] 似乎没有识别出用户（cookie）已经过身份验证。它不断将我带回 ASPX 登录页面。

有没有人成功地使用标准的物理页面作为登录，然后转移到安全的 MVC？这是更大的 SSO 设计工作的一部分。

# actionscript-3 - 将 ActionScript 2.0 代码转换为 ActionScript 3.0

> ID：11622710
> 
> 赞同：0
> 
> 时间：2012-07-24T01:00:44.087
> 
> 标签：actionscript-3, flash, actionscript-2

我目前在网上按照 Flash 教程创建交互式画板。教程的链接是[http://flashexplained.com/actionscript/making-an-interactive-drawing-sketchpad/](http://flashexplained.com/actionscript/making-an-interactive-drawing-sketchpad/)。

本教程的唯一问题是代码是针对 actionscript 2.0 而不是 3.0。我知道如何重新定义变量，但除此之外我一无所知，所以我希望有人可以帮助我将代码转换为 ActionScript 3.0。

这是 ActionScript 2.0 代码：

```
lineThickness = 0;
selectedColor = "0x000000";

_root.onMouseDown = startDrawing;
_root.onMouseUp = stopDrawing;

function startDrawing()
{
    if(_xmouse < 455)
    {
        _root.lineStyle(lineThickness, selectedColor);
        _root.moveTo(_root._xmouse, _root._ymouse);
        _root.onMouseMove = drawLine;
    }
}

function drawLine()
{
    _root.lineTo(this._xmouse, this._ymouse);
}

function stopDrawing()
{
    delete this.onMouseMove;
}

line0.onPress = function()
{
    lineThickness = 0;
}

line3.onPress = function()
{
    lineThickness = 3;
}

line6.onPress = function()
{
    lineThickness = 6;
}

colorRed.onPress = function()
{
    selectedColor = "0xFF0000";
}

colorGreen.onPress = function()
{
    selectedColor = "0x00FF00";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:13:27.937

AS2：

```
lineThickness = 0;
selectedColor = "0x000000"; 
```

AS3：

```
var lineThickness:int = 0;
var selectColor:uint = 0x000000; 
```

* * *

AS2：

```
_root.onMouseDown = startDrawing;
_root.onMouseUp = stopDrawing;

function startDrawing()
{
    if(_xmouse < 455)
    {
        _root.lineStyle(lineThickness, selectedColor);
        _root.moveTo(_root._xmouse, _root._ymouse);
        _root.onMouseMove = drawLine;
    }
}

function stopDrawing()
{
    delete this.onMouseMove;
}

function drawLine()
{
    _root.lineTo(this._xmouse, this._ymouse);
} 
```

AS3：

```
stage.addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
stage.addEventListener(MouseEvent.MOUSE_UP, stopDrawing);

function startDrawing(e:MouseEvent):void
{
    if(mouseX < 455)
    {
        this.graphics.lineStyle(lineThickness, selectedColor);
        this.graphics.moveTo(mouseX, mouseY);

        stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseMove);
    }
}

function stopDrawing(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, mouseMove);
}

function mouseMove(e:MouseEvent):void
{
    this.graphics.lineTo(mouseX, mouseY);
} 
```

* * *

AS2：

```
line0.onPress = function()
{
    lineThickness = 0;
}

line3.onPress = function()
{
    lineThickness = 3;
}

line6.onPress = function()
{
    lineThickness = 6;
}

colorRed.onPress = function()
{
    selectedColor = "0xFF0000";
}

colorGreen.onPress = function()
{
    selectedColor = "0x00FF00";
} 
```

AS3：

```
line0.addEventListener(MouseEvent.CLICK, changeLine);
line3.addEventListener(MouseEvent.CLICK, changeLine);
line6.addEventListener(MouseEvent.CLICK, changeLine);
colorRed.addEventListener(MouseEvent.CLICK, changeColor);
colorGreen.addEventListener(MouseEvent.CLICK, changeColor);

function changeLine(e:MouseEvent):void
{
    switch(e.currentTarget)
    {
        default: lineThickness = 1; break;

        case line0: lineThickness = 0; break;
        case line3: lineThickness = 0; break;
        case line6: lineThickness = 0; break;
    }
}

function changeColor(e:MouseEvent):void
{
    switch(e.currentTarget)
    {
        default: selectedColor = 0x000000;

        case colorRed: selectedColor = 0xFF0000; break;
        case colorGreen: selectedColor = 0x00FF00; break;
    }
} 
```

* * *

附加（清除图形）：

```
eraser_btn.addEventListener(MouseEvent.CLICK, erase);
function erase(e:MouseEvent):void
{
    this.graphics.clear();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:10:22.907

我建议您阅读此[http://www.actionscriptcheatsheet.com/downloads/as3cs_migration.pdf](http://www.actionscriptcheatsheet.com/downloads/as3cs_migration.pdf)

但是，这里有一些提示。

你这样编码的事件

```
object.addEventListener(Event.EVENT_TYPE,myFunctionToHandleTheEvent); 
```

如果是

```
_root.lineStyle(lineThickness, selectedColor);
_root.moveTo(_root._xmouse, _root._ymouse); 
```

你用这个

```
this.graphics.lineStyle(lineThickness, selectedColor);
this.graphics.moveTo(stage.mouseX, stage.mouseY); 
```

删除事件侦听器使用

```
object.removeEventListener(Event.EVENT_TYPE,myFunction); 
```

# php - 在 Symfony2 中使用 Composer 添加 CSS 或 JS 库作为依赖项的正确方法是什么？

> ID：11622711
> 
> 赞同：20
> 
> 时间：2012-07-24T01:00:44.793
> 
> 标签：php, symfony, composer-php

在[Symfony 2 文档](http://symfony.com/doc/master/cookbook/bundles/best_practices.html#vendors)中它说：

> 捆绑软件不应嵌入以 JavaScript、CSS 或任何其他语言编写的第三方库。

那我该怎么做呢？我想使用 Composer 安装 Twitter Bootstrap、DataTables 和许多其他东西作为依赖项。但我能想到的唯一方法是创建一个包并嵌入它们。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T19:23:39.770

你应该使用Twitter 的[Bower](https://bower.io/)。它是 HTML、CSS 和 Javascript 的包管理器。它的创建是为了解决您遇到的这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T02:58:41.133

编辑：截至目前，有非常好的 JS 库包管理器，例如 Bower、Jam 或 Component。

## **版本控制系统**

[语义版本控制](http://semver.org/)- Composer 建议使用语义版本控制系统。它使用 XYZ 设置，其中 X 是主要版本，Y 是次要版本，Z 是补丁版本。Y 和 Z 应该始终向后兼容，而 X 反映可能破坏向后兼容性的代码更改。

## **嵌入**

嵌入应该被理解为复制和粘贴代码（和二进制）作为库的一部分，而不是要求它作为第三方（供应商）包/包。就像在资源文件夹中包含 query.js 或将推进代码复制并粘贴到包内的文件夹中一样。

**为什么不嵌入 3rd 方库**

> 捆绑软件不应嵌入以 JavaScript、CSS 或任何其他语言编写的第三方库。

该声明来自最佳实践的观点。嵌入（如复制/粘贴）任何类型的第三方库（尤其是 PHP 库）通常不是一个好主意。例如，假设 BUNDLE A 使用 LIBRARY FOO v1.4.1，而 BUNDLE B 也使用 LIBRARY FOO，但版本不同 v1.5.2。如果任何 BUNDLES（A 或 B）嵌入 FOO lib，它们可能（很可能会）变得不兼容。例如，不能重新声明 php 类和函数。当然，任何捆绑软件都可以使用变通方法来缓解这个问题，例如为其 FOO 版本命名空间或自动加载规则，但这可能会引发其他问题，除了肯定会增加内存使用量，因为解析了相同内容的 2 个版本通过 PHP。

如果 PHP 包没有遵循这个最佳实践，那么出现的错误通常很容易发现（错误：无法重新定义函数 blablabla）。但是，对于 Javascript 库，情况并非如此。您可以重新声明函数（因为它们是对象属性）。所以如果现在 FOO 是一个 JS Lib，而 BUNDLE A 和 B 将它们嵌入到它们的库中，当它们被包含时，就会出现奇怪的问题。例如，可以重新声明一个函数，该函数缺少其中一个包的关键功能并破坏它。

## **Symfony 是一个 PHP 框架。**

它处理 PHP 库/包。Symfony 建议将一个库作为依赖项而不是嵌入它，因为它使用 Composer 作为包管理器，负责下载和加载所需的包。据我记得，当 2 个包/包使用同一个库时，如果它们有不同的版本要求，则使用最实际的，除非它向后不兼容。Composer 然后报告您必须手动解决的冲突。

但是...没有办法正确处理 javascript 库。那是因为 Composer 是 PHP 库的一个包。**您可以通过我能想到的**两种方式来解决这个问题：（可能有更多和最好的方法来处理这个问题，我只是想到了这两个，将它们作为建议阅读）

1.  围绕 javascript 库创建一个 PHP 包装器并包含它（尽管如果另一个包决定做同样的事情但给包一个不同的名称，这可能会产生同样的问题）
2.  通过 composer 创建一个需要 javascript 库作为第三方依赖项的包。由于 javascript 库的存储库中可能没有 composer.json 文件（有时它们作为独立的缩小文件存在），这可以通过创建[自定义 composer installer](http://getcomposer.org/doc/articles/custom-installers.md)来完成，分叉 javascript 存储库（例如在 gitHub 中）添加一个composer.json，等等......但是，您将需要不断维护和升级上述库，这可能很麻烦。

您必须记住：

1.  JS 和 CSS 库必须公开，以便客户端可以访问它（安全考虑）
2.  Symfony 是一个 PHP 框架，处理服务器端包。JS/CSS 是客户端。考虑到这一点，它才能正常工作。
3.  symfony 背后的主要思想之一（与其他 PHP 框架一样）是项目内部和项目之间的代码可重用性。纯 Javascript 库本身是可重用的。它们通常是独立的。此外，从服务器端“捆绑”一个 JS 库并没有真正的好处。您不需要任何类型的捆绑软件来实现可重用性。

## **我的方法**

由于作曲家系统非常吸引人，特别是在将包/包/库部署给其他人时，我使用第三方 javascript/css 库的方法是创建一个特定于 JS/CSS 的***依赖管理器***，其他包/包可以依赖它照顾他们的 JS/CSS 依赖，而不用担心这个。

## **我的建议**

如果你打算向公众发布你的项目，即作为一个 symfony 包，你应该仔细计划如何处理这个问题。如果您的项目是自包含的（个人使用或客户使用，而不是广泛使用），那么这与您（程序员）的相关性要低得多，因为您（程序员）可以完全控制您使用的第三方工具并包含在您的项目中。这些只是避免将来出现问题的最佳实践“建议”。

# jquery - 从 URL 中获取一个部分并使用 jQuery 附加一个链接

> ID：11622718
> 
> 赞同：0
> 
> 时间：2012-07-24T01:01:37.663
> 
> 标签：jquery

这有点超出了我的能力，但我想要实现的是从 URL 中获取一个部分并将其附加到 href 链接。

```
 <a href="http://www.mysite.com.au/?SQ_DESIGN_NAME=print">Print this page</a> 
```

这链接到我们正在使用的 CMS 中的“仅打印页面”设计

我尝试在初始 URL 之后附加的部分示例

```
 course_cd=802AA&version_number=5& 
```

所以我最终得到

```
 <a href="http://www.mysite.com.au/somepage/course?course_cd=802AA&version_number=5&SQ_DESIGN_NAME=print">Print this page</a> 
```

如您所见，我要添加的部分位于“？”之间 和 SQ_DESIGN_NAME=print

我希望这是有道理的 提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:06:05.753

```
var toAdd = 'course_cd=802AA&version_number=5&'
var aElm = $('a[href="http://www.mysite.com.au/?SQ_DESIGN_NAME=print"]')[0]; 
//an ID would do wonders

aElm.href = aElm.href.split('?')[0]+'somepage/course?'+toAdd+'SQ_DESIGN_NAME=print'; 
```

[小提琴](http://jsfiddle.net/5ntF7/2/)

而且您在 href 属性中缺少引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:08:27.680

为您的锚添加一个 id 属性：

```
<a href="http://www.mysite.com.au/?SQ_DESIGN_NAME=print" id="print">Print this page</a> 
```

然后是 jQuery：

```
var section = 'scourse_cd=802AA&version_number=5&';
var p = $("#print"), ph = p.attr("href");
p.attr("href",ph.replace(/(SQ_DESIGN_NAME)/i,section+'$1'));​​ 
```

**更新：**提取*查询字符串*参数：

```
var link = 'http://some.com/?param=value&param2=value2';
var section = link.split('?')[1];​​​​​ 
```

[http://jsfiddle.net/4eqxe/](http://jsfiddle.net/4eqxe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:15:39.540

使用它来`href`为您的链接设置新的，如果您使用现代 jQuery 版本，您也可以使用它`.prop()`来代替。`.attr()`

```
var v = 'course_cd=802AA&version_number=5&';
$('a').attr('href', $('a').attr('href').split('?')[0] + 'somepage/course?' + v); 
```

打印新的`href`只是为了测试：

```
console.log('modified link is: ' + $('a').attr('href'));​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T05:18:21.493

终于想通了我的问题。感谢所有给我时间的人

```
 $(document).ready(function() {

  var path = window.location.pathname;
  var query = window.location.search;
  $('a#print').attr('href', path + query + '&SQ_DESIGN_NAME=print');

}); 
```

# visual-c++ - 将 OpenCV 添加到 VC++ Kinect SDK 示例的奇怪代码行为

> ID：11622722
> 
> 赞同：2
> 
> 时间：2012-07-24T01:02:29.937
> 
> 标签：visual-c++, opencv, kinect

我是 C++ 新手，正在尝试将 OpenCV 添加到 Microsoft 的 Kinect 示例中。通过修改此函数，我能够为 ColorBasics-D2D 示例做到这一点

```
void CColorBasics::ProcessColor()
{
HRESULT hr;
NUI_IMAGE_FRAME imageFrame;

// Attempt to get the color frame
hr = m_pNuiSensor->NuiImageStreamGetNextFrame(m_pColorStreamHandle, 0, &imageFrame);
if (FAILED(hr))
{
    return;
}

INuiFrameTexture * pTexture = imageFrame.pFrameTexture;

NUI_LOCKED_RECT LockedRect;

// Lock the frame data so the Kinect knows not to modify it while we're reading it
pTexture->LockRect(0, &LockedRect, NULL, 0);

// Make sure we've received valid data
if (LockedRect.Pitch != 0)
{
    BYTE * pBuffer = (BYTE*) LockedRect.pBits;

    cvSetData(img,(BYTE*) pBuffer, img->widthStep);
    Mat &m = Mat(img);
    Mat &hsv = Mat();
    vector<Mat> mv = vector<Mat>(3,Mat(cvSize(640,480),CV_8UC1));
    cvtColor(m,hsv,CV_BGR2HSV);
    cvtColor(hsv,m,CV_HSV2BGR);//*/
    IplImage iplimg(m);
    cvNamedWindow("rgb",1);
    cvShowImage("rgb",&iplimg);
    // Draw the data with Direct2D
    m_pDrawColor->Draw(static_cast<BYTE *>(LockedRect.pBits), LockedRect.size);

    // If the user pressed the screenshot button, save a screenshot
    if (m_bSaveScreenshot)
    {
        WCHAR statusMessage[cStatusMessageMaxLen];

        // Retrieve the path to My Photos
        WCHAR screenshotPath[MAX_PATH];
        GetScreenshotFileName(screenshotPath, _countof(screenshotPath));

        // Write out the bitmap to disk
        hr = SaveBitmapToFile(static_cast<BYTE *>(LockedRect.pBits), cColorWidth, cColorHeight, 32, screenshotPath);

        if (SUCCEEDED(hr))
        {
            // Set the status bar to show where the screenshot was saved
            StringCchPrintf( statusMessage, cStatusMessageMaxLen, L"Screenshot saved to %s", screenshotPath);
        }
        else
        {
            StringCchPrintf( statusMessage, cStatusMessageMaxLen, L"Failed to write screenshot to %s", screenshotPath);
        }

        SetStatusMessage(statusMessage);

        // toggle off so we don't save a screenshot again next frame
        m_bSaveScreenshot = false;
    }
}

// We're done with the texture so unlock it
pTexture->UnlockRect(0);

// Release the frame
m_pNuiSensor->NuiImageStreamReleaseFrame(m_pColorStreamHandle, &imageFrame);
} 
```

这工作正常。但是，当我想在 SkeletalViewer 示例中添加这样的内容时，它只是显示一个空窗口。

```
/// <summary>
/// Handle new color data
/// </summary>
/// <returns>true if a frame was processed, false otherwise</returns>
bool CSkeletalViewerApp::Nui_GotColorAlert( )
{
NUI_IMAGE_FRAME imageFrame;
bool processedFrame = true;

HRESULT hr = m_pNuiSensor->NuiImageStreamGetNextFrame( m_pVideoStreamHandle, 0, &imageFrame );

if ( FAILED( hr ) )
{
    return false;
}

INuiFrameTexture * pTexture = imageFrame.pFrameTexture;
NUI_LOCKED_RECT LockedRect;
pTexture->LockRect( 0, &LockedRect, NULL, 0 );
if ( LockedRect.Pitch != 0 )
{
    BYTE * pBuffer = (BYTE*) LockedRect.pBits;

    cvSetData(img,(BYTE*) pBuffer, img->widthStep);
    Mat m(img);
    IplImage iplimg(m);
    cvNamedWindow("rgb",1);
    cvShowImage("rgb",&iplimg);
    m_pDrawColor->Draw( static_cast<BYTE *>(LockedRect.pBits), LockedRect.size );
}
else
{
    OutputDebugString( L"Buffer length of received texture is bogus\r\n" );
    processedFrame = false;
}

pTexture->UnlockRect( 0 );

m_pNuiSensor->NuiImageStreamReleaseFrame( m_pVideoStreamHandle, &imageFrame );

return processedFrame;
} 
```

我不确定为什么相同的代码在此示例中不起作用。我正在使用 Visual Studio 2010 和 OpenCV 2.4.2。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:04:32.603

弄清楚了。改成这个

```
if ( LockedRect.Pitch != 0 )
{
    BYTE * pBuffer = static_cast<BYTE *>(LockedRect.pBits);

    cvSetData(img,(BYTE*) pBuffer, img->widthStep);
    Mat m(img);
    IplImage iplimg(m);
    cvNamedWindow("rgb",1);
    cvShowImage("rgb",&iplimg);
    waitKey(1);
    m_pDrawColor->Draw( static_cast<BYTE *>(LockedRect.pBits), LockedRect.size );
} 
```

# javascript - 分别包含 javascript 对象的各个部分

> ID：11622728
> 
> 赞同：0
> 
> 时间：2012-07-24T01:03:18.470
> 
> 标签：javascript, object

我有一个使用 javascript 对象来保存各种函数和变量数据的站点。

```
var Site = {
    Page: {
    ...some functions...
    },
    Player: {
    ...more functions and variables...
    }
} 
```

我面临的问题是脚本所在的头文件已经增长到大约 500 行代码。我想将页面和播放器等部分分解为单独的文件，以便于操作。这样做的一个障碍是一些函数依赖于 PHP 的输出，并且必须保留在基本页面上。有没有办法可以将单独的文件包含到对象中并保留现有的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:19:37.033

请注意，按照惯例，以大写字母开头的变量是为构造函数保留的。

文件 1：

```
var Site = Site || {};

Site.Page = {     
    ...some functions...
} 
```

文件 2：

```
var Site = Site || {};

Site.Player = {
    ...more functions...
}; 
```

您还可以使用扩展函数来声明对象字面量，然后将属性和值复制到基础对象。或者您可以使用 IIFE 来分配功能。如果您要进行特征检测并根据结果创建不同的功能，这将非常方便。

```
var Site = Site || {};

(function(global) {

  function Player() {
    // stuff
  }

  global.Site.Player = Player;

  if (test) {
    global.Site.someFn = function() {
      // stuff 1
    };

  } else {
    global.Site.someFn = function() {
      // stuff 2
    };
  }

  ...

}(this)); 
```

或上述的某些版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:21:54.780

不要将数据与逻辑混为一谈。也就是说，“某些函数依赖于 PHP 的输出”是一种代码味道。如果你有这样的代码：

```
setSomeContent("<? echo $myobj->title() ?>");
setMoreContent("<? echo $myobj->description() ?>"); 
```

然后是时候备份一下了。

首先，很容易分解你的 JS。只需像这样为每个文件制作一个脚本标签。

```
<script src="main.js"></script>
<script src="page.js"></script>
<script src="player.js"></script> 
```

现在它们是按顺序加载的，所以我们可以确定`main`是先加载的。

```
// main.js
var Site = {
  // functions
};

// page.js
Site.Page = {
  // functions
};

// player.js
Site.Player = {
  // functions
}; 
```

现在对于来自 PHP 的数据，将其作为 JSON 导出到页面，存储在它自己的变量中：

```
var myObj = <? echo myObj->toJSON() ?>;
Site.Page.setContentForObject(myObj); 
```

然后将其完全传递给您在 JS 文件中声明的任何函数。以这种方式，数据和逻辑的分离仍然相当干净。

# javascript - 在单击时显示工具提示并向其添加模式

> ID：11622734
> 
> 赞同：6
> 
> 时间：2012-07-24T01:04:56.050
> 
> 标签：javascript, jquery

奇怪的是，我发现很难将 jquery 的 onclick 事件处理程序绑定到这个小提琴。我什至不知道我做错了什么。html如下：-

```
<ul>
    <li><a id="tooltip_1" href="#" class="tooltip" >Trigger1</a><li>
    <li><a id="tooltip_2" href="#" class="tooltip" >Trigger2</a><li>
    <li><a id="tooltip_3" href="#" class="tooltip" >Trigger3</a><li>
</ul>

<div style="display: none;">
    <div id="data_tooltip_1">
        data_tooltip_1: You can hover over and interacte with me
    </div>
    <div id="data_tooltip_2">
        data_tooltip_2: You can hover over and interacte with me
    </div>
    <div id="data_tooltip_3">
        data_tooltip_3: You can hover over and interacte with me
    </div>
</div>​ 
```

以这种方式设计：-

```
li { 
    padding: 20px 0px 0px 20px;
}​ 
```

使用这样的 jquery：-

```
$(document).ready(function() {
    $('.tooltip[id^="tooltip_"]').each

        (function(){
        $(this).qtip({
            content: $('#data_' + $(this).attr('id')),
                show: {
            },
            hide: {
                fixed: true,
                delay: 180
            }
        });
    });
});​ 
```

你看看我创建的小提琴页面：-`http://jsfiddle.net/UyZnb/339/.`

同样，我如何实现类似 jquery 模式的外观，以便工具提示成为焦点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T01:39:08.163

**工作演示**：使用鼠标悬停：http: [//jsfiddle.net/swxzp/](http://jsfiddle.net/swxzp/) **或**使用点击 [http://jsfiddle.net/rjGeS/](http://jsfiddle.net/rjGeS/)（我写了一个小的 JQuery/Css/Opacity 演示）

**更新：**使用触发器 1、2 和 3 的工作示例：http: [//jsfiddle.net/HeJqg/](http://jsfiddle.net/HeJqg/)

这个怎么运作：

它有 2 个 div，即`background`用于使休息页面像模态一样变成灰色，而第二个 div`large`将充当工具提示的占位符，因此即使背景是灰色的，您也可以在任何需要的情况下关闭和打开它。

休息随意玩代码，希望它有助于事业`:)`

**代码**

```
$('.tooltip_display').click(function() {
    var $this = $(this);
    $("#background").css({
        "opacity": "0.3"
    }).fadeIn("slow");

    $("#large").html(function() {
        $('.ttip').css({
            left: $this.position() + '20px',
            top: $this.position() + '50px'
        }).show(500)

    }).fadeIn("slow");

});

$('.note').on('click', function() {
    $('.ttip').hide(500);
    $("#background").fadeOut("slow");
    $("#large").fadeOut("slow");

});
$("#large").click(function() {
    $(this).fadeOut();

});​ 
```

**CSS**

```
.ttip {
    position: absolute;
    width: 350px;
    height: 100px;
    color: #fff;
    padding: 20px;
    -webkit-box-shadow: 0 1px 2px #303030;
    -moz-box-shadow: 0 1px 2px #303030;
    box-shadow: 0 1px 2px #303030;
    border-radius: 8px 8px 8px 8px;
    -moz-border-radius: 8px 8px 8px 8px;
    -webkit-border-radius: 8px 8px 8px 8px;
    -o-border-radius: 8px 8px 8px 8px;
    background-image:-moz-linear-gradient(top, #F45000, #FF8000);
    background-image: -webkit-gradient(linear, left top, left bottom, from(#F45000), to(#FF8000));
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F45000', endColorstr='#FF8000', GradientType=0);
    background-color:#000;
    display: none
}
.contents {
    font-size: 15px;
    font-weight:bold
}
.note {
    font-size: 13px;
    text-align:center;
    display:block;
    width: 100%
}
#background{
    display: none;
    position: absolute;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    background: #000000;
    z-index: 1;
}
#large {
    display: none;
    position: absolute;
    background: #FFFFFF;
    padding: 0px;
    z-index: 10;
    min-height: 0px;
    min-width: 0px;
    color: #336699;
}​ 
```

**HTML**

```
<span class="tooltip_display">Trigger</span>
<div id="large">
<div class="ttip">
  <div class="contents">Here goes contents...</div>
  <span class="note">(click here to close the box)</span> 
</div>
</div>
<div id="background"></div>​ 
```

**工作演示的**图像：****

 **![在此处输入代码](../Images/0b028cc920931d50ce9dfdc5d898d11d.png)**

# events - 使用协程进行事件处理的正确方法是什么？

> ID：11622736
> 
> 赞同：3
> 
> 时间：2012-07-24T01:05:38.013
> 
> 标签：events, lua, coroutine

我试图弄清楚如何使用协程（在 Lua 中）处理事件。我看到一种常见的方法似乎是创建产生当前协程的包装函数，然后在您等待的事情发生时恢复它。这似乎是一个不错的解决方案，但是这些问题呢？：

1.  您如何同时等待多个事件，并根据哪个事件先发生分支？还是应该重新设计程序以避免这种情况？

2.  一段时间后如何取消等待？事件循环可以在其套接字发送/接收包装器中包含超时参数，但是自定义事件呢？

3.  你如何触发协程从外部改变它的状态？例如，我想要一个在调用时会导致协程跳转到不同步骤或开始等待不同事件的函数。

编辑：

目前我有一个系统，我在其中注册一个带有事件的协程，并且每次事件发生时，协程都会以事件名称和信息作为参数恢复。使用这个系统，1 和 2 不是问题，3 可以通过让 coro 期望一个特殊的事件名称来解决，使其跳转到不同的步骤，并使用该名称作为 arg 恢复它。自定义对象也可以具有以相同方式注册事件处理程序的方法。

我只是想知道这是否被认为是使用协程进行事件处理的正确方法。例如，如果我有一个读取事件和一个计时器事件（作为读取的超时），并且读取事件首先发生，我必须手动取消计时器。它似乎不适合顺序性质或使用协程处理事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:34:22.737

> 您如何同时等待多个事件，并根据哪个事件先发生分支？

如果你需要为此使用协程，而不仅仅是你注册的 Lua 函数（例如，如果你有一个函数来做一些事情，等待一个事件，然后做更多的事情），那么这很简单。将返回协程恢复时`coroutine.yield`传递给的所有值。`coroutine.resume`

因此，只需传递事件，让脚本自行决定是否是它正在等待的事件。实际上，您可以构建一个简单的函数来执行此操作：

```
function WaitForEvents(...)
  local events = {...}
  assert(#... ~= 0, "You must pass at least one parameter")

  do
    RegisterForAnyEvent(coroutine.running()) --Registers the coroutine with the system, so that it will be resumed when an event is fired.
    local event = coroutine.yield()
    for i, testEvt in ipairs(events) do
      if(event == testEvt) then
        return
      end
    end
  until(false)
end 
```

此函数将继续产生，直到它给出的事件之一被触发。循环假定这`RegisterForAnyEvent`是临时的，只为一个事件注册函数，因此每次触发事件时都需要重新注册。

> 一段时间后如何取消等待？

在上面的循环中放一个计数器，一定时间后离开。我将把它作为练习留给读者；这完全取决于您的应用程序如何测量时间。

> 你如何触发协程从外部改变它的状态？

您不能将 Lua 函数魔术到不同的“状态”。您只能调用函数并让它们返回结果。因此，如果你想在某个进程中跳过，你必须编写你的 Lua 函数系统以便能够跳过。

你如何做到这一点取决于你。你可以让每组非等待命令成为一个单独的 Lua 函数。或者你可以设计你的等待状态来跳过。管他呢。

# c++ - 将用户界面添加到图像查看器插件

> ID：11622738
> 
> 赞同：0
> 
> 时间：2012-07-24T01:05:40.453
> 
> 标签：c++, firebreath

我有一个关于如何使用 Firebreath 开发图像查看器插件的一般性问题。为此，我想合并一个 GUI 框架，如 wxwidget 或 Qt。GUI 将用于启动一些对话框，在顶部添加工具栏，或通过右键单击图像打开上下文菜单。

据我了解，我有一个 hwnd 句柄，因此我可以在窗口上绘图。我也了解我可以对各种事件做出反应，例如鼠标按钮单击或键盘敲击。但它让我无法添加图形菜单、按钮等。我知道我可以在窗口周围使用 html，但这不是我喜欢采取的路线。

例如，将用户界面离线（在内存中）渲染到图像上，然后以某种方式在内部跟踪状态是否有意义？

有没有人做过这样的事情？或者任何人都可以给我一些关于如何完成添加用户界面的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:21:04.703

假设您只关心 windows 并且不介意使用最简单的窗口插件（但没有 HTML 元素可以浮动在插件上），它应该与在任何其他 windows 应用程序中创建 GUI 没有什么不同。

您将获得一个显示 AttachedEvent 的窗口；当 DetachedEvent 被触发时，您需要停止使用该窗口。许多人在该父窗口内创建一个子窗口，并将其用于所有实际的真实代码，这使得使用其他抽象之一更容易，但这基本上就是它的全部内容。我不知道具体是如何使用 QT 或 wxwidget 来完成的，但您会创建一个给定 HWND 的子窗口，并让抽象为您做事。

至于它是否会在屏幕外渲染东西等等，我不知道；这完全取决于窗口系统。我没有理由知道您需要这样做，而且大多数事情只是直接吸引到 HWND，但是您可以通过无数种不同的方式来做到这一点。在我看来，您真正需要的是了解 Windows 中的绘图实际上是如何工作的。

我希望这会有所帮助

# python - 在python中更改多进程的局部变量

> ID：11622742
> 
> 赞同：2
> 
> 时间：2012-07-24T01:06:06.567
> 
> 标签：python, queue, multiprocessing

我有一个多进程设置，或多或少看起来如下：

```
import multiprocessing

class Worker(multiprocessing.Process):
    def __init__(self, name):
        self.name = name
    def run(self):
        while True:
            #do something
            print( self.name + " is working!")
            #wait a few seconds

def main():
    workers = []
    for a in ["A", "B", "C", "D"]:
        w = Worker(a)
        workers += [w]
        w.start() 
```

我想做的是能够从 main() 更改工作人员的名称。为每个工人创建一个单独的队列是这样做的唯一方法，还是有更好的方法？我觉得我通过使用多进程不断遇到限制，我不确定我被允许做什么了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:27:31.797

你可以是[`Pipe`](http://docs.python.org/library/multiprocessing.html#multiprocessing.Pipe)：

```
import multiprocessing

class Worker(multiprocessing.Process):
    def __init__(self, name):
        self.name = name
        self.change_name_r, self.change_name_w = multiprocessing.Pipe(False)

    def run(self):
        while True:
            #do something
            if self.change_name_r.poll():
                self.name = self.change_name_r.recv()
            print( self.name + " is working!")
            #wait a few seconds

    def change_name(self, new_name):
        self.change_name_w.send(new_name) 
```

# c# - 在 C# 中过滤表

> ID：11622743
> 
> 赞同：0
> 
> 时间：2012-07-24T01:06:26.833
> 
> 标签：c#, wpf

我有一个附加到 C# 项目的数据库，其中包含 3 个表 Company、Product 和 Inventory。Inventory 列出 CompanyID、ProductID 和 Quantity。Combobox1 列出了所有的 companyID。当您选择一个时，我希望 listview1 仅显示 Inventory 中具有该 CompanyID 的行。

```
//binding DB to memorycopy   
this.DBContext = new DBEntities();

listView1.ItemsSource = this.SupPartContext.SPs;
GridViewColumn companyIDColumn = new GridViewColumn();
sNumColumn.Width = 90;
sNumColumn.Header = "companyID";
sNumColumn.DisplayMemberBinding = new Binding("COMPANYID");

GridViewColumn ProductIDColumn = new GridViewColumn();
pNumColumn.Width = 90;
pNumColumn.Header = "ProductID";
pNumColumn.DisplayMemberBinding = new Binding("PRODUCTID");
GridViewColumn quantityColumn = new GridViewColumn();
qtyColumn.Width = 90;
qtyColumn.Header = "quantity";
qtyColumn.DisplayMemberBinding = new Binding("QUANTITY");
GridView newGridview = new GridView();
newGridview.Columns.Add(companyIDColumn);
newGridview.Columns.Add(productIDColumn);
newGridview.Columns.Add(quantityColumn);

listView1.View = newGridview; 
```

任何帮助，即使是正确方向的一点，将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:25:37.497

如果您希望列表视图在不编写任何代码的情况下自动更改，您可能无法做到这一点。但是，如果您在组合框值随以下行更改时重新绑定列表，它将按照您的预期过滤列表。

```
listView1.ItemsSource = this.SupPartContext.SPs.Where(sp => sp.CompanyID = {get the select company from the row here}) 
```

# mysql - 对 varchar 列中包含文本和数字的数据进行排序

> ID：11622745
> 
> 赞同：1
> 
> 时间：2012-07-24T01:06:50.833
> 
> 标签：mysql, sorting

我`varchar`在 MySQL 数据库中有一个列，它存储一些可以包含任何字符和数字的文本。

架构`utf8`用作字符集和`utf8_unicode_ci`排序规则。`InnoDB`用作数据库引擎，因为我需要使用事务。

我想做的是能够以`ORDER BY`自然的方式访问该列。例如，这里有一些示例数据：

```
12234 some random text
my text 23
mytext3
123456abcd
text23
text1
text111
text33 
```

将测试数据插入测试表后，我运行查询和`ORDER BY`列：`varchar``ASC`

```
SELECT * FROM `test` WHERE 1 ORDER BY data ASC; 
```

问题是没有考虑数字的“大小”：

```
12234 some random text
123456abcd
my text 23
mytext3
text1
text111 <-------
text23
text33 
```

然后我在这里找到了这个[问题](https://stackoverflow.com/questions/5055049/how-to-order-mysql-varchar-results)，它提供了一个（几乎）解决方案：

```
SELECT * FROM `test` WHERE 1 ORDER BY data * 1 DESC;

123456abcd             <------ These 2 should
12234 some random text <------ be swapped
my text 23
mytext3
text23
text1
text33
text111 
```

上面的另一个缺点是上面不能使用任何索引，因为每一行都有一个操作。

我也不确定引入非拉丁字符后会产生什么效果。

有没有一种高效的方法让 MySQL 执行自然语言排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:38:05.690

您问：

```
 Is there a performant way to get MySQL to perform natural language sorting? 
```

简短的回答：没有。

更长的答案：

大概您希望 MySQL 以使用所选排序规则和数字文本处理非数字文本的方式来整理您的日期，就好像它是二进制数一样。

您将需要创建某种用于整理的代理键，并将其存储在自己的列中。您可以通过像这样转换每个文本字符串来做到这一点，并将原始字符串和代理键字符串都加载到 dbms 中。

```
Original Text                   Surrogate Key Text
12234 some random text          0000012234 some random text
my text 23                      my text 0000000023
mytext3                         mytext0000000003
123456abcd                      0000123456abcd
text23                          text0000000023
text1                           text0000000001
text111                         text0000000111
text33                          text0000000033
1text123                        0000000001text0000000123
2text124                        0000000002text0000000124 
```

请注意，在本例中，样本中的每一块数字数据都填充到十位十进制数中。

当您加载 DBMS 时，这在您的应用程序中是最容易做到的。您可以编写一个简单的字符串解析例程来完成它。您没有告诉我们您使用的是什么应用程序语言。

如果您在每次查询中只整理有限数量的记录，也可以在检索记录后在您的应用程序中进行。

# asp.net - .axd 路径中的连字符

> ID：11622747
> 
> 赞同：0
> 
> 时间：2012-07-24T01:07:28.800
> 
> 标签：asp.net, security, scriptresource.axd, axd

我今晚使用 Infragistics Web 控件为客户推送了一个网站，但我们遇到了一个问题，即相关 AXD 文件的路径包含双连字符。这会导致客户端的防火墙程序阻止对文件的访问，因为它将双连字符视为 SQL 注入攻击。

谁能提供一些关于如何进行的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:12:40.297

对于可能遇到此问题的其他人：所以我最终做的是修改 Infragistics ScriptManager 的配置，默认将脚本组合成一个大脚本文件，如下所示：

```
<ig:WebScriptManager runat="server" ID="igScriptManager" CompositeScript-ScriptMode="Release" CompositeScript-Path="InfragisticsCombined.js">
<CompositeScript>
<Scripts>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.0_igControlMain.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.2_igCollections.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.3_igUIBehaviors.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.4_igEnums.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.5_igObjects.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.7_igClientStateManager.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.8_igCallback.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.9_igPropertyManagers.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.1_igControlMainClientBinding.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.Scripts.6_igObjectsClientBinding.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.SharedScripts.igAnimation.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.EditorControls.WebTextEditor.js.igTextEditor.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.EditorControls.WebMonthCalendar.js.igCalendar.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebDataGrid.js.igWebDataGridBase.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebDataGrid.js.igWebDataGrid.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebDataGrid.js.igWebDataGridPaging.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebDataGrid.js.igWebDataGridSorting.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.SharedScripts.igDragDrop.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebHierarchicalDataGrid.js.igWebHierarchicalDataGrid.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.SharedScripts.igLayoutPane.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.LayoutControls.WebTab.js.igTab.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.GridControls.WebDataGrid.js.igWebDataGridSummaryRow.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Infragistics.Web.UI.SharedScripts.igDropDown.js" assembly="Infragistics4.Web.v12.1, Version=12.1.20121.2020, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb"/>
<asp:ScriptReference name="Common.Common.js" assembly="AjaxControlToolkit, Version=4.1.51116.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e"/>
<asp:ScriptReference name="ExtenderBase.BaseScripts.js" assembly="AjaxControlToolkit, Version=4.1.51116.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e"/>
<asp:ScriptReference name="PasswordStrength.PasswordStrengthExtenderBehavior.js" assembly="AjaxControlToolkit, Version=4.1.51116.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e"/>
</Scripts>
</CompositeScript>
</ig:WebScriptManager> 
```

ScriptReference 标记告诉 ScriptManager 哪些脚本包含在组合文件中。CompositeScript-Path 参数给它一个一致的名称，以便明确避免“危险”字符。

[在http://community.infragistics.com/aspnet/articles/understanding-script-combining.aspx](http://community.infragistics.com/aspnet/articles/understanding-script-combining.aspx)中可以找到关于如何找出要包含在列表中的 javascript 文件名的好文章。

另外，我没有尝试过，但我在研究这个问题时得到的印象是，在 ASP.NET 3.5 之后，AjaxToolkit ScriptManager 也可以使用类似的过程。

# iphone - UISearchDisplayController 显示与原点相同的单元格的最简单方法

> ID：11622753
> 
> 赞同：0
> 
> 时间：2012-07-24T01:07:51.863
> 
> 标签：iphone, objective-c, uitableview, uisearchdisplaycontroller

使 UISearchDisplayController 显示与其搜索的原始 tableView 完全相同的单元格（格式、高度、字体、颜色等）的最简单方法是什么？或者简单地说 - 让它出列相同的单元格标识符？

我正在使用标准的子类 UITableViewController + UISearchDisplayController 解决方案，并且更喜欢坚持使用它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:08:59.387

我实际上找到了最简单的方法。

我所要做的就是更改默认的 cellForRowAtIndexPath 第二行代码并添加“self”。到 tableView 到出队单元格标识符 - 这样，故事板中的单元格样式总是出队，而不是 searchResultsController.tableView 中的（不存在的）单元格样式

还实现 heightForRowAtIndexPath ，它将返回相同的高度而无需任何检查（searchresults 表或 self.table - 我们想要相同的高度）

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 62.0f;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"PhraseCell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //                       ^^^^ NEW

    //... 
```

# php - mysql时间戳转换/格式化注意：遇到格式不正确的数值

> ID：11622755
> 
> 赞同：9
> 
> 时间：2012-07-24T01:08:12.453
> 
> 标签：php, mysql, date, formatting, timestamp

在我的数据库中，我已将“已发布”行设置为时间戳，但在尝试对其进行转换/格式化时收到此通知：

```
Notice: A non well formed numeric value encountered 
```

代码：

```
$posted = date('d/m/Y H:i:s', $row['posted']);
    echo $posted; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T01:14:01.740

这意味着 for 的第二个参数`date()`是整数，所以`$row['posted']`先转换为时间戳。

尝试

```
$posted = date('d/m/Y H:i:s', strtotime($row['posted'])); 
```

# version-control - 将 JIRA 与 StarTeam 集成

> ID：11622756
> 
> 赞同：0
> 
> 时间：2012-07-24T01:08:13.813
> 
> 标签：version-control, jira, starteam, jira-plugin

是否可以将[JIRA](http://www.atlassian.com/software/jira)与[Borland 的 StarTeam](http://www.borland.com/products/starteam/)集成以进行源代码控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:56:23.733

目前没有官方支持的 StarTeam 和 JIRA 集成。

这可能会在未来通过适用于 JIRA 的 StarTeam 插件或通过创建自定义 JIRA 插件来实现。更多信息可在 JIRA 网站上找到：http: [//jira.atlassian.com/](http://jira.atlassian.com/)

# ruby-on-rails - 使用 Rails 创建数据可视化站点

> ID：11622757
> 
> 赞同：0
> 
> 时间：2012-07-24T01:08:14.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

例如，我有一个非常大的 Excel 电子表格，其中包含用户名、位置、日期和一些数字字段。

```
User,location,date,value1,value2,value3

Steve,NYC,2012,9,1,3
Steve,NYC,2011,3,3,2
Steve,CA,2011,1,2,0
Michael,CA,2012,10,3,2
Michael,CA,2011,10,2,0 
```

我将如何组织一个 Rails 站点，以便可以查看某个用户的所有值？

例如，

```
/users/steve/all 
```

将按日期降序显示 user=steve 的所有值。

```
/users/steve/nyc 
```

将按日期降序显示 user=steve 和 location=nyc 的所有值。

我想我需要创建一个用户模型并将所有数据从 excel 导入数据库，但我不知道如何做到这一点。

该应用程序本质上是一个简单的数据可视化工具。也许我必须分离数据库并创建一个用户 has_many :locations 和 locations :belongs_to 用户，我不确定。我希望以各种方式查看数据——也许我想显示某个位置的所有用户，或者查看某个用户的所有位置，等等……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:18:00.323

我建议首先在您的 rails 应用程序中设置您的模型。然后，您可以编写一个可能类似于[此问题](https://stackoverflow.com/questions/3346108/how-to-write-rake-task-to-import-data-to-rails-app)的 rake 任务，或者您可以[从头开始](http://jasonseifer.com/2010/04/06/rake-tutorial)构建它。还有一个[railscast](http://railscasts.com/episodes/66-custom-rake-tasks)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:12:24.707

如果您需要直接从 Excel 导入（例如 Excel 表格由用户上传）。您可以使用以下 gem 之一从 Excel 工作表中导入数据

*   [roo](http://roo.rubyforge.org/)读取新旧 excel 格式（+其他）
*   [电子表格](http://spreadsheet.rubyforge.org/)读取和写入旧的 exel 格式

如果您只有一张 excel 表，那么简单地将数据导出到 csv 并按照上面提到的 stackoverflow 问题中给出的答案进行操作会容易得多。

至于您关于如何为数据库建模的问题的第二部分，您已经有了正确的想法。

最简单的方法是对您的域的外观进行完全建模并相应地转换数据。

# python - python Win32 保存

> ID：11622759
> 
> 赞同：3
> 
> 时间：2012-07-24T01:08:33.633
> 
> 标签：python, win32com

我正在使用 python 打开一个 excel 文件并进行一些更改，然后我需要保存它。除了保存部分，我可以完成所有工作。如何让 python 保存文件。如果我手动保存它，我会弹出一个框，我可以点击保存，但我不想手动点击保存。我希望python只保存它并关闭excel。我需要帮助，这就是我所拥有的。但它不会工作。我可以保存但不能关闭？？？？

```
 import win32com.client
 import os

 xl = win32com.client.DispatchEx("Excel.Application")
 xl.workbooks.open("C:\file.xlsm")
 xl.run("file.xlsm!macro")
 xl.Visible = True
 xl.save = true
 xl.close 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T01:44:35.960

您需要获取工作簿对象的挂钩并将 save 作为参数应用到 close 方法：

```
xl = win32com.client.DispatchEx("Excel.Application")
wb = xl.workbooks.open("C:\file.xlsm")
xl.run("file.xlsm!macro")
xl.Visible = True
wb.Close(SaveChanges=1)
xl.Quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T14:35:05.123

有同样的问题，加上获取公式的值，这就是我所做的（这部分是在我将公式从不同的地方放入并保存 Excel 电子表格之后）：

```
 import win32com.client as win

     xl=win.Dispatch('Excel.Application') 
     wb = xl.Workbooks.Open('filepath')
     xl.Visible = True
     wb.Close(SAVE_ATTRIBUTE_VALUES)
     xl.Quit() 
```

然后当您打开电子表格或调用时：

```
 wb = openpyxl.load_workbook('filepath', data_only=True)
     ws = wb.get_sheet_by_name('Sheet1')
     print ws['A1'].value 
```

它为您提供使用公式加载的任何内容的值，但您可能需要添加一些

```
 time.sleep(sek) 
```

让它在关闭之前等待值加载

# java - 如何使用 Java 查询 Odata 提要

> ID：11622760
> 
> 赞同：0
> 
> 时间：2012-07-24T01:08:45.207
> 
> 标签：java, android, odata, visual-studio-lightswitch

我对 oData 服务很陌生，想从 lightswitch Odata 提要中查询（即挑选特定字段/记录）。有没有一种简单的方法可以在 Java 中做到这一点。我听说 oData 是“兼容的” - 如果是这样，任何人都可以让我开始。

我的提要如下所示：

```
<?xml version="1.0" encoding="utf-8"?><feed xml:base="http://my.ip.address/test5/testXPressDBData.svc/" xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><id>http://pocketsize/test5/testXPressDBData.svc/dogs/</id><title type="text">dogs</title><updated>2012-07-24T00:29:39Z</updated><link rel="self" title="dogs" href="dogs" /><entry m:etag="W/&quot;3&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(1)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(1)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">1</d:id><d:name>hammy</d:name><d:age m:type="Edm.Int32">3</d:age><d:weight m:type="Edm.Single">25</d:weight><d:colour>brown</d:colour></m:properties></content></entry><entry m:etag="W/&quot;5&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(2)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(2)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">2</d:id><d:name>rufus</d:name><d:age m:type="Edm.Int32">5</d:age><d:weight m:type="Edm.Single">10</d:weight><d:colour>blonde</d:colour></m:properties></content></entry><entry m:etag="W/&quot;1&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(3)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(3)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">3</d:id><d:name>jenkins</d:name><d:age m:type="Edm.Int32">1</d:age><d:weight m:type="Edm.Single">5</d:weight><d:colour>spotted</d:colour></m:properties></content></entry><entry m:etag="W/&quot;12&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(4)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(4)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">4</d:id><d:name>billy</d:name><d:age m:type="Edm.Int32">12</d:age><d:weight m:type="Edm.Single">23</d:weight><d:colour>Purple</d:colour></m:properties></content></entry><entry m:etag="W/&quot;2&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(5)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(5)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">5</d:id><d:name>Bulgaria</d:name><d:age m:type="Edm.Int32">2</d:age><d:weight m:type="Edm.Single">3</d:weight><d:colour>brown</d:colour></m:properties></content></entry><entry m:etag="W/&quot;2&quot;"><id>http://my.ip.address/test5/testXPressDBData.svc/dogs(6)</id><category term="LightSwitchApplication.dog" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="dog" href="dogs(6)" /><title /><updated>2012-07-24T00:29:39Z</updated><author><name /></author><content type="application/xml"><m:properties><d:id m:type="Edm.Int32">6</d:id><d:name>china</d:name><d:age m:type="Edm.Int32">2</d:age><d:weight m:type="Edm.Single">2</d:weight><d:colour>pink</d:colour></m:properties></content></entry></feed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:49:23.977

看看 OData4J - 它为 OData 提供了很多基本支持，并帮助从提要中实现实体。

[来自http://code.google.com/p/odata4j/source/browse/odata4j-fit/src/test/java/org/odata4j/examples/consumers/NetflixConsumerExample.java?name=0.6](http://code.google.com/p/odata4j/source/browse/odata4j-fit/src/test/java/org/odata4j/examples/consumers/NetflixConsumerExample.java?name=0.6)的示例代码：

```
package org.odata4j.examples.consumers;

import java.util.List;

import org.odata4j.consumer.ODataConsumer;
import org.odata4j.core.OEntity;
import org.odata4j.core.OProperty;
import org.odata4j.examples.AbstractExample;
import org.odata4j.examples.ODataEndpoints;

public class NetflixConsumerExample extends AbstractExample {

  public static void main(String[] args) {
    NetflixConsumerExample example = new NetflixConsumerExample();
    example.run(args);
  }

  private void run(String[] args) {
    ODataConsumer c = this.rtFacde.create(ODataEndpoints.NETFLIX, null, null);

    // locate the netflix id for Morgan Spurlock
    int morganSpurlockId = c.getEntities("People").filter("substringof('Spurlock',Name)").execute().first().getProperty("Id", Integer.class).getValue();

    // lookup and print all titles he's acted in
    List<OEntity> titlesActedIn = c.getEntities("People").nav(morganSpurlockId, "TitlesActedIn").execute().toList();
    for (OEntity title : titlesActedIn) {
      for (OProperty<?> p : title.getProperties()) {
        report("%s: %s", p.getName(), p.getValue());
      }
      report("\n");
    }
    report("count: " + titlesActedIn.size());

  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:16:30.757

只需通过 SaxParser 运行它。然后喝点水。

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

# c# - 写入 Program Files 文件夹中的配置文件

> ID：11622764
> 
> 赞同：0
> 
> 时间：2012-07-24T01:09:38.380
> 
> 标签：c#, configuration

是的，我知道我不应该这样做。但是有问题的配置文件属于 Windows 服务。我的程序为用户提供了用于编辑某些设置的 UI。该服务在其目录中查找该文件。我无法改变它。

对于 Windows 7，当我尝试编写配置文件时，UAC 是否会自动提示用户，或者是否需要进行一些编码才能使 UAC 提示？

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:47:11.187

我最终编写了由我的主程序启动的第二个程序来实际编写配置设置。

我的主程序检查 Windows 的版本。如果不是版本 6 或更高版本，它只是写入配置文件。如果是 6 或更高，它将配置文件写入临时文件。接下来，它启动配置保存程序，将临时文件的名称和程序文件夹中的文件名称作为参数传递。

第二个程序具有必要的清单文件设置，以使其在 UAC 开启时请求提升权限。因此，当它开始时，您会看到 UAC 对话框。如果您说是，程序运行并将数据从临时文件复制到实际配置文件。

# http-status-code-404 - TYPO3: 404 不重写 URL

> ID：11622765
> 
> 赞同：1
> 
> 时间：2012-07-24T01:09:46.993
> 
> 标签：http-status-code-404, typo3, realurl

所以我很难在 TYPO3 中获取语音 URL。我设法让它们在 localconf.php 中使用这 2 行

```
$TYPO3_CONF_VARS["FE"]["pageNotFound_handling"] = 'http://www.mysite.com/';
$TYPO3_CONF_VARS["FE"]["pageNotFound_handling_statheader"] = 'HTTP/1.1 404 Not Found'; 
```

但问题是，如果我键入一个不存在的页面，即使它会将我定向到主页，它也不会重写浏览器中的 URL。有什么可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:53:12.533

不更改浏览器中的 URL 是 404 的正确行为。对于重定向，我们有 30x http 状态码。但是您不能同时发送两个 http 状态码（404 和 301）。

重定向到主页而不是显示 404-not found 消息是一种不好的做法。用户可能会被激怒，问自己为什么他们现在在主页上而不是在他们输入的 URL 上……

# php - 文件上传无法使用 PDF Converter 正常工作

> ID：11622766
> 
> 赞同：1
> 
> 时间：2012-07-24T01:10:09.077
> 
> 标签：php, file-upload, uploadify, livedocx

您好我正在使用 LiveDocX 在用户上传时将 .Doc 文件转换为 .PDF 文件。

但是从 LiveDocX 返回的文件是空白的。

我似乎认为这与模板路径有关（通过表单上传的文件）

下面是有问题的代码。

```
if (!empty($_FILES)) {
$tempFile = $_FILES['file']['tmp_name'];
$tmpPath = '/CMS/Custom/vault/tmp/'.md5($_REQUEST['ID']).'/';

$targetPath = '/CMS/Custom/vault/'.md5($_REQUEST['ID']).'/';
$targetFile =  $targetPath . md5(time());

$filename = $_FILES['file']['name'];
$fname = substr($filename, 0,strrpos($filename,'.')); 

$fi = new finfo(FILEINFO_MIME_TYPE);
$ext = $fi->file($_FILES['file']['tmp_name']);
$extention = end(explode('.', $filename));

// IF DOCUMENT IS PDF

if(strstr($ext, "pdf")){
    $tmpFile = $_SERVER['DOCUMENT_ROOT'].'/CMS/Custom/vault/tmp'.md5($_REQUEST['ID']);
    exec('convert '.$tempFile.' -resample 300 '.$tmpFile);
    $tempFile = $tmpFile;
}

// IF DOCUMENT IS DOCX

if ($extention == 'docx') {

        $path = $_SERVER['DOCUMENT_ROOT'].'/CMS/Custom/ZendFramwork/library/Zend/Service/docx';
        require_once $path.'/common.php';

        $docx = new Zend_Service_LiveDocx_MailMerge();

        $docx->setUsername(DEMOS_ZEND_SERVICE_LIVEDOCX_USERNAME)
             ->setPassword(DEMOS_ZEND_SERVICE_LIVEDOCX_PASSWORD);

        $docx->setLocalTemplate($tempFile);

        $docx->assign('dummyFieldName', 'dummyFieldValue'); // necessary as of LiveDocx 1.2

        $docx->createDocument();

        $document = $docx->retrieveDocument('pdf');

        if(!is_dir($_SERVER['DOCUMENT_ROOT'].$tmpPath)){
            mkdir($_SERVER['DOCUMENT_ROOT'].$tmpPath, 0755, true);
        }

        $pdf = $_SERVER['DOCUMENT_ROOT'].$tmpPath.$fname.'.pdf';

        file_put_contents($pdf, $document);

        unset($docx);

        $tempFile = $pdf;
        $filename = $fname.'.pdf';
}

// CREATE VAULT DIRECTORY.  

if(!is_dir($_SERVER['DOCUMENT_ROOT'].$targetPath)){
    mkdir($_SERVER['DOCUMENT_ROOT'].$targetPath, 0755, true);
}

//CREATE MD5 FILE

$file = fopen($_SERVER['DOCUMENT_ROOT'].$targetFile, "w+");

if(fwrite($file, convert(file_get_contents($tempFile), md5($_REQUEST['ID'])))){

    $targetFile = str_replace('/CMS/Custom/vault/', "", $targetFile);

    $q = "INSERT INTO `member_vault` SET `member` = '{$_REQUEST['ID']}', `name` = '{$filename}', `ext` = '{$ext}', `path` = '{$targetFile}', `time` = '".time()."'";

    mysql_query($q) or die(mysql_error());

    unlink($tempFile);

    echo $targetFile;
}

} 
```

# c# - C# Skype4COM SendMessage 用户名

> ID：11622768
> 
> 赞同：3
> 
> 时间：2012-07-24T01:10:30.057
> 
> 标签：c#, skype, sendmessage, skype4com

我对 Skype4COM SendMessage 有疑问。

我的代码是：

```
skype.Attach(5, true);`
skype.SendMessage("CrazyGirl56", "hey"); 
```

但输出：

```
Sent message to crazygirl56. 
```

所以它发送给 crazygirl56，而不是 CrazyGirl56。有一个案例问题。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:33:50.550

Skype 用户名不区分大小写，因此向 CrazyGirl56 或 crazygirl56 发送消息是相同的

# java - 使用java将大量数据存储到mysql的最佳方法

> ID：11622770
> 
> 赞同：2
> 
> 时间：2012-07-24T01:10:49.937
> 
> 标签：java, mysql, database

我是一名 Java 开发人员。我想知道使用 Java 将大量数据存储到 mysql 的最佳方法是什么。

巨大：每秒 20 万条谈话消息。

这里不需要索引

我应该在用户创建消息后立即将消息存储到数据库中吗？会不会太慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:52:08.787

我的建议也是 MongoDB。由于 NoSQL 范式完全符合您的需求。以下是 Java 中的 MongoDB 风格 -

```
BasicDBObject document = new BasicDBObject();
document.put("database", "mkyongDB");
document.put("table", "hosting");

BasicDBObject documentDetail = new BasicDBObject();
documentDetail.put("records", "99");
documentDetail.put("index", "vps_index1");
documentDetail.put("active", "true");

document.put("detail", documentDetail);

collection.insert(document); 
```

本[教程](http://www.mongodb.org/display/DOCS/Java+Tutorial)非常适合入门。[您可以从github](https://github.com/mongodb/mongo-java-driver/)下载 MongoDB 。

有关 MongoDB 的优化，请参阅这篇[文章](http://www.mongodb.org/display/DOCS/Optimization)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:30:47.090

10 亿次写入/天约为 12k/秒。假设每条消息大约 16 个字节，那就是大约 200k / sec。如果您不关心阅读，您可以以这种速度轻松地将其写入磁盘，也许每行一条消息。您的读取访问模式可能会决定您最终需要在这里做什么。

如果您使用 MySQL，我建议尽可能每行组合多条消息。对表进行分区有助于将工作集保存在内存中，并且您需要为每个事务提交许多记录，可能是 1000 行。你需要做一些测试和调整，这个页面会很有帮助：

`http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html`

您可能还应该看看[Cassandra](http://cassandra.apache.org/)，它是在考虑到大量写入工作负载的情况下编写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:44:11.120

这个问题至少有两个不同的部分：

1.  处理消息以存储在数据库中

2.  用于消息的存储类型

为了处理消息，您可能需要一个水平可扩展的系统（这意味着您可以添加更多机器来快速处理消息），这样您就不会积累大量积压的消息。您绝对不应该尝试同步写入这些消息，而是在收到消息时将其放入队列中以进行处理以写入数据库（此处想到 JMS 之类的东西）。

在数据存储方面，MySQL 是一个关系型数据库，但听起来你并不是真的在做任何关系型数据处理，而只是存储了大量的数据。我建议研究 NoSQL 数据库（正如其他人在这里所建议的那样），例如 MongoDB、Cassandra、CouchDB 等。它们各有优缺点（您可以在各自的网站和其他地方阅读有关它们的更多信息）互联网）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T01:20:27.173

您是否必须绝对使用 MySQL 或者您是否也对其他数据库开放？MongoDb 或 CouchDB 将非常适合这些需求。如果您对其他数据库选项持开放态度，请查看它们。

如果您必须完全使用 MySql，那么我们已经做了类似的事情，所有相关的文本消息都作为单个 json 进入一个子项。我们每次都附加到它，并将 master 保存在一个单独的表中。因此，当消息超过一定数量（在我们的场景中为 30）时，至少一个主记录和一个子记录以及更多子记录，实现了一种“加载更多..”查询第二个子记录，其中包含 30 个以上。

希望这可以帮助。

仅供参考，由于其他一些原因和需求，我们正在迁移到 CouchDB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T04:46:01.627

我想，典型的访问将涉及至少检索一个聊天会话的所有文本。

行数很大，您的数据不是那么相关。这非常适合非关系数据库。

如果您仍想使用 MySQL，请使用分区。写入时使用批量插入，读取时在查询中提供足够的分区修剪提示。用于`EXPLAIN PARTITIONS`检查是否正在修剪分区。在这种情况下，我强烈建议您将一个聊天会话的聊天行合并为一行。与每行一条聊天行相比，这将大大减少行数。

您没有提到要存储多少天的数据。

单独说明一下：就用户而言，您的应用程序必须有多成功才能要求每秒 20 万条消息？一个活跃的聊天会话可能每 5 秒从一位用户生成大约 1 条消息。为便于计算，我们将其设为 1 秒。**因此，您正在为 20 万在线**用户构建容量。这意味着您至少会有几百万用户。

尽早考虑规模是件好事。但是，这需要工程上的努力。由于资源有限，请为每项任务（性能/用户体验等）仔细分配它们。例如，在用户体验上花费更多时间可能会产生更好的投资回报率。当你到达数百万用户的领域时，新的大门将会打开。你可能会得到天使或风险投资的资助。认为这是一个很好的问题。

我的 2 美分。

# ruby-on-rails - Rails 用户类没有响应方法，给出未定义的方法错误

> ID：11622772
> 
> 赞同：0
> 
> 时间：2012-07-24T01:10:54.217
> 
> 标签：ruby-on-rails, ruby

我已经生成了一个`User`模型以及另外两个名为`Update`和的随附模型`Round`。该类`User`响应控制台中的轮次和更新，但当我在浏览器中调用它时不响应。

在控制台中

```
:001 > user = User.first
:002 > user.updates
 Update Load (0.2ms) SELECT "updates".* FROM "updates" WHERE "updates"."user_id" = 1
 => [] //expected since there are no updates in the database but it responds 
```

**/user/1/更新错误**

```
undefined method 'updates' for #<Class:0x98afa1c> 
```

**用户.rb**

```
class User < ActiveRecord::Base

  attr_accessible :admin, :name, :provider :uid
  has_many :rounds
  has_many :updates

end 
```

**更新.rb**

```
class Updates < ActiveRecord::Base

  attr_accessible :user_id :recpcount
  belongs_to :user
end 
```

**更新控制器.rb**

```
class UpdatesController < ApplicationController

  def index
     @hist = User.updates.find(params[id])
  end
end 
```

我确定我在某处搞砸了一些简单的事情。谁能带领我朝着正确的方向前进？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:30:17.543

在控制台中，您调用`updates`的是 User*实例*，但在控制器中，您是在 User*类*本身上调用它。

您可能想要：

```
@hist = User.find(params[:id]).updates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:29:38.973

```
@hist = User.updates.find(params[id]) 
```

这是你的问题。 `User`类没有`updates`，实例有。你可能想要：

```
@user = User.find(params[id])
@hist = @user.updates 
```

# android - Android，线宽，像素大小

> ID：11622773
> 
> 赞同：1
> 
> 时间：2012-07-24T01:10:54.430
> 
> 标签：android, line, pixel

使用 Android 画布绘制命令：

如果我设置 stroke = 0 或 stroke =1 并绘制水平线，则线像素高两个像素。如果我设置 stroke = 2，像素也是两个像素高，但更亮。

如果我绘制单个像素，像素是一个 2x2 矩阵，笔画 = 0 或笔画 = 1。如果笔画 = 2，我也会得到一个 2x2 矩阵，但像素更亮。

我必须怎么做才能得到只有一个像素高的线条？我必须怎么做才能获得只有一个像素的像素？

注意：正在使用的设备的屏幕尺寸为 480 x 800 或更大。

```
Paint thePaint = new Paint();                   
thePaint.setARGB(a, r, g, b);                           
thePaint.setAntiAlias(true);
thePaint.setStyle(Paint.Style.FILL );
thePaint.setStrokeWidth(0);
canvas.drawLine(x1,y1,x2,y2, thePaint); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:04:03.940

我就这个问题与 The Roman Guy @Google 进行了沟通。他说除了设置stroke = 0之外还需要关闭AntiAlias。我的测试表明他是对的。Google 文档当前未反映此要求。此代码有效。

```
Paint thePaint = new Paint();                   
thePaint.setARGB(a, r, g, b);                           
thePaint.setAntiAlias(false);
thePaint.setStyle(Paint.Style.STROKE );
thePaint.setStrokeWidth(0);
canvas.drawLine(x1,y1,x2,y2, thePaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:21:07.487

看来您需要更换线路

```
thePaint.setStyle(Paint.Style.FILL); 
```

用这个代替：

```
thePaint.setStyle(Paint.Style.STROKE); 
```

# winforms - 没有身份验证代理的 ADFS 2.0

> ID：11622778
> 
> 赞同：1
> 
> 时间：2012-07-24T01:12:33.793
> 
> 标签：winforms

是否有可能集成到 ADFS 2.0 而无需编写身份验证代理或在 .net 中编写 Radius 客户端

是否可以获得有关 ADFS 与 SecureId OTP 集成的更多信息或演示？

如果不可用，为了以编程方式进行身份验证，从 .net 访问 .net 或 COM API 需要多少费用？

# jquery - JQuery remove() 当前表列由锚 rel

> ID：11622779
> 
> 赞同：0
> 
> 时间：2012-07-24T01:12:35.767
> 
> 标签：jquery, html-table

我在 thead 中有一个带有删除链接的表格，当单击此链接时，我想删除包括 tbody 在内的整个列（并淡出）。

**表格示例：**

```
<table class="example" id="dnd-example">
    <thead>
        <tr>
            <th>Column A <a href="" class="delsite" rel="1">x</a></th>
            <th>Column B <a href="" class="delsite" rel="2">x</a></th>
            <th>Column C <a href="" class="delsite" rel="3">x</a></th>
        </tr>
    <tbody>
        <td>213</td>
        <td>213</td>
        <td>213</td>
    </tbody>
</table> 
```

**我试图通过将 tr 更改为 td 来调整用于删除行的一些**代码，但它不适用于列。****

 **```
$(".delsite").click(function() { 
    var id =$(this).attr('rel');
    $(this).closest('td').fadeOut("normal", function() { $(this).remove(); });
    //
    //
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:18:18.560

[http://jsfiddle.net/zerkms/tyqAX/1/](http://jsfiddle.net/zerkms/tyqAX/1/)

```
$('#dnd-example .delsite').click(function(e) {
    e.preventDefault();

    var index = $(this).parent().index();

    $('tr', '#dnd-example').find('td:eq(' + index + '), th:eq(' + index + ')').hide();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:17:20.340

```
$('td:nth-child(XX),th:nth-child(XX)').fadeOut(); 
```

其中 XX 是列的索引**

# css - div 高度/溢出问题

> ID：11622786
> 
> 赞同：0
> 
> 时间：2012-07-24T01:13:50.307
> 
> 标签：css, html

我遇到的问题是我的页面顶部有两个 div，一个包含重复的蓝色背景，另一个包含背景图像。

我必须设置两个 div 的高度，以便它们垂直扩展，不要随内容扩展。我将右侧的表格设置为溢出。我相信这是导致问题的原因。

我试过在代码中没有高度 css，但它仍然不会垂直扩展。

为了让背景甚至出现，我必须手动设置高度。

这是页面：[http ://www.repipespecialists.com/landing/google/repiping.html](http://www.repipespecialists.com/landing/google/repiping.html)

这是CSS代码：

```
#top_container {
    width:100%;
    height:1040px;
    background-image:url(../images/top_bg_repeat.jpg);
    background-repeat:repeat-x;
    background-color:#83b4e9;
}

#top_header {
    width:1200px;
    height:1040px;
    background-image:url(../images/header_bg.jpg);
    background-repeat:no-repeat;
    background-color:#83b4e9;
    margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:18:15.533

我同意 WDan 的观点，因为您遇到的问题是由于您使用了and`float: left`元素。`float: right``left_content``right_content` `div`

当您`float`在一个元素上使用时，您基本上是将其从文档的正常流程中移除。默认情况下，元素将以您在标记中指定的任何顺序出现在页面上。使用`float`（或类似的东西`position: absolute`）将从这个“顺序”或“文档流”中删除元素，这样当将其他元素放置在页面上的默认位置时，浮动元素将被忽略。

**由于这些浮动元素使用的空间被忽略，因此`top_header` `div`在确定其自身大小时不会考虑浮动元素的大小。这就是为什么您的 div 不会自动扩展的原因。**

另一种选择`float`是使用`display: inline-block`. 您可以阅读以下链接以了解有关差异的更多信息：

*   [http://www.ternstyle.us/blog/float-vs-inline-block](http://www.ternstyle.us/blog/float-vs-inline-block)
*   [http://www.onderhond.com/blog/work/inline-block-vs-float/](http://www.onderhond.com/blog/work/inline-block-vs-float/)
*   [http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)
*   [http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:31:02.850

我认为问题是你在'left_content'和'right_content'中使用浮动

在包装器 div 中使用“溢出：隐藏”。

# joomla - Joomla 2.5：手动安装 K2？

> ID：11622789
> 
> 赞同：0
> 
> 时间：2012-07-24T01:14:35.530
> 
> 标签：joomla, joomla2.5, joomla-k2

我在使用 Joomla 2.5 安装 K2 组件时遇到各种问题。

如果我进行常规安装，我会收到以下消息：

```
JFolder::create: could not create directory 
```

即使我所有的文件夹权限都可以。

如果我尝试从目录安装，我会得到：

```
JInstaller::install: Cannot find XML setup file 
```

我搜索了 K2 的结构，它没有`setup.xml`文件。

谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:24:10.227

听起来您有服务器配置问题。您很可能需要启用 FTP 层才能使其工作。如果我是你，我会切换到像 Rochen 这样专门研究 Joomla 的主机。

# c# - 设置 DataGrid MaxHeight 属性

> ID：11622791
> 
> 赞同：1
> 
> 时间：2012-07-24T01:14:55.517
> 
> 标签：c#, .net, wpf, xaml, datagrid

```
<UserControl x:Class="DDCUI.CommDiagnosisWPFCtrl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Height="950" Width="300">
    <DockPanel LastChildFill="True">
        <DataGrid DockPanel.Dock="Top" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Height="300" AutoGenerateColumns="False" Name="DGComm" CanUserResizeColumns="True" IsReadOnly="True" SelectedCellsChanged="DGComm_SelectedCellsChanged">
            <DataGrid.Columns>
                <DataGridTextColumn Header="No." Binding="{Binding Number}" Width="0.1*"/>
                <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="0.1*" />
                <DataGridTextColumn Header="Protocol" Binding="{Binding Protocol}" Width="0.15*" />
                <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="0.15*" />
                <DataGridTextColumn Header="Destination" Binding="{Binding Destination}" Width="0.15*" />
                <DataGridTextColumn Header="Data" Binding="{Binding Data}" Width="0.5*" />
            </DataGrid.Columns>
        </DataGrid>
        <TreeView DockPanel.Dock="Top" MinHeight="200" Name="TreeViewDecode"/>
        <RichTextBox Name="RtbHexCode"/>

    </DockPanel>
</UserControl> 
```

由于某种原因，DataGrid 的 MaxHeight 属性不起作用。也就是说，每当我将一个大表绑定到它时，它总是溢出并隐藏 RichTextBox 和 TreeView（实际上它不应该超过 600 像素并显示垂直滚动条）。

DataGrid 也不显示水平滚动条。

我该如何解决这个问题？

编辑：更新的代码。MaxHeight 属性现在可以工作，但水平滚动条不显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:46:37.780

将以下内容添加到您的 DataGrid

```
VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" 
```

还将 StackPanel 替换为 DockPanel 或 Grid。StackPanel 不是受约束的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:47:16.157

Window 的高度必须至少为 950，或者将 Datagrid 的 MaxHeight 设置为 450，或者将 Window 的 SizeToContent 设置为 WidthAndHeight。我希望这将有所帮助。

# c# - LINQ 查询抛出空引用异常

> ID：11622792
> 
> 赞同：0
> 
> 时间：2012-07-24T01:15:16.033
> 
> 标签：c#, vb.net, linq, entity-framework, linq-to-sql

我正在使用 LINQ 查询来填充数据网格。作为新增强功能的一部分，我必须通过在 WHERE 子句中添加一个条件来更改现有的 LINQ 查询。看了这么多帖子，感觉堆叠WHERE子句条件会很简单。早些时候，查询返回简单的对象类型（匿名）并且工作正常。现在我将查询分为两部分。在第一部分中，我试图返回已知类型并尝试在下一部分中堆叠 where 子句。但是有些这不起作用并且没有获取任何结果。它在网格上抛出 NULL 引用异常。DataBind 正在抛出异常（Null 引用异常。）在这里发布我的代码。

```
Using db As New ProjectDataContext
        Dim orderLines As IEnumerable(Of orderline)
        Dim customOrderLines As Object
        Try
            If VATSearch = 1 Then
                ' Show only VAT orders
                'orderlines = (From O In db.orderlines Where O.order.order_date > MinTime And O.order.order_date < MaxTime And O.order.order_status_fk > 1 And (O.ol_vat_free Is Nothing OrElse O.ol_vat_free = 0) Order By O.order.order_date _
                '        Select OrderLineID = O.ol_id, Ref = O.order.order_ref, Email = CStr(IIf(O.order.User Is Nothing, O.order.order_billing_email, O.order.User.user_email)), Code = O.StockItem.productsbycolor.product.product_code & O.StockItem.productsbycolor.color.color_code, Size = O.size.size_code, Qty = O.ol_qty, Price = O.ol_product_price, LineTotal = O.ol_lineprice, Delivery = (O.order.order_delivery_total / O.order.orderlines.Count), NonVAT = O.order.order_vat_free _
                '            )
                orderLines = (From o In db.orderlines Where o.order.order_date > MinTime And o.order.order_date < MaxTime And o.order.order_status_fk > 1 And (o.ol_vat_free Is Nothing OrElse o.ol_vat_free = 0) Order By o.order.order_date _
                Select o)

            ElseIf VATSearch = 2 Then
                ' Show only non-VAT orders
                'orderlines = (From O In db.orderlines Where O.order.order_date > MinTime And O.order.order_date < MaxTime And O.order.order_status_fk > 1 And (Not O.ol_vat_free Is Nothing) AndAlso O.ol_vat_free = 1 Order By O.order.order_date _
                '    Select OrderLineID = O.ol_id, Ref = O.order.order_ref, Email = CStr(IIf(O.order.User Is Nothing, O.order.order_billing_email, O.order.User.user_email)), Code = O.StockItem.productsbycolor.product.product_code & O.StockItem.productsbycolor.color.color_code, Size = O.size.size_code, Qty = O.ol_qty, Price = O.ol_product_price, LineTotal = O.ol_lineprice, Delivery = (O.order.order_delivery_total / O.order.orderlines.Count), NonVAT = O.order.order_vat_free _
                '                )
                orderLines = (From O In db.orderlines Where O.order.order_date > MinTime And O.order.order_date < MaxTime And O.order.order_status_fk > 1 And (Not O.ol_vat_free Is Nothing) AndAlso O.ol_vat_free = 1 Order By O.order.order_date _
                        Select O)
            Else
                ' Show both VAT and non-VAT orders
                'orderlines = (From O In db.orderlines Where O.order.order_date > MinTime And O.order.order_date < MaxTime And O.order.order_status_fk > 1 Order By O.order.order_date _
                '   Select OrderLineID = O.ol_id, Ref = O.order.order_ref, Email = CStr(IIf(O.order.User Is Nothing, O.order.order_billing_email, O.order.User.user_email)), Code = O.StockItem.productsbycolor.product.product_code & O.StockItem.productsbycolor.color.color_code, Size = O.size.size_code, Qty = O.ol_qty, Price = O.ol_product_price, LineTotal = O.ol_lineprice, Delivery = (O.order.order_delivery_total / O.order.orderlines.Count), NonVAT = O.order.order_vat_free _
                '            )
                orderLines = (From o In db.orderlines Where o.order.order_date > MinTime And o.order.order_date < MaxTime And o.order.order_status_fk > 1 Order By o.order.order_date _
                        Select o)
            End If

            customOrderLines = (From o In orderLines
                        Select orderLineID = o.ol_id, ref = o.order.order_ref, email = CStr(IIf(o.order.User Is Nothing, o.order.order_billing_email, o.order.User.user_email)),
                        code = o.StockItem.productsbycolor.product.product_code & o.StockItem.productsbycolor.color.color_code,
                        size = o.size.size_code, qty = o.ol_qty, price = o.ol_product_price, lineTotal = o.ol_lineprice,
                        delivery = (o.order.order_delivery_total / o.order.orderlines.Count), nonVAT = o.order.order_vat_free, orderPaymentType = o.order.order_google_order_number)

            results.DataSource = customOrderLines
            results.DataBind()
            results.Visible = True
            btnExportButton.Visible = True

        Catch ex As Exception

        End Try
    End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:02:12.413

在 select 之后使用 new 创建匿名类型并将其括在大括号中。

```
customOrderLines = (From o In orderLines
                    Select new { orderLineID = o.ol_id, ref = o.order.order_ref, email = CStr(IIf(o.order.User Is Nothing, o.order.order_billing_email, o.order.User.user_email)),
                    code = o.StockItem.productsbycolor.product.product_code & o.StockItem.productsbycolor.color.color_code,
                    size = o.size.size_code, qty = o.ol_qty, price = o.ol_product_price, lineTotal = o.ol_lineprice,
                    delivery = (o.order.order_delivery_total / o.order.orderlines.Count), nonVAT = o.order.order_vat_free, orderPaymentType = o.order.order_google_order_number}) 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:33:14.553

您收到的错误表明`LINQ`您尝试运行的没有返回任何值，因此`customOrderLines`作为空集合返回。由于`LINQ`包括很多过滤器，我建议删除`Dim customOrderLines As Object`并改为执行以下操作：

```
Dim customOrderLines = (From o In orderLines 
  Select orderLineID = o.ol_id, ref = o.order.order_ref, 
  email = CStr(IIf(o.order.User Is Nothing, o.order.order_billing_email, o.order.User.user_email)), 
  code = o.StockItem.productsbycolor.product.product_code & o.StockItem.productsbycolor.color.color_code, 
  size = o.size.size_code, qty = o.ol_qty, price = o.ol_product_price, lineTotal = o.ol_lineprice, 
  delivery = (o.order.order_delivery_total / o.order.orderlines.Count), nonVAT = o.order.order_vat_free, 
  orderPaymentType = o.order.order_google_order_number)

if customOrderLines isnot nothing andalso customOrderLines.Any then
  results.DataSource = customOrderLines 
  results.DataBind() 
  results.Visible = True 
  btnExportButton.Visible = True
else
  results.DataSource = nothing
  results.DataBind()
  results.Visible = False
  btnExportButton.Visible = False
end if 
```

这将确保您不会尝试绑定空集合，并且`datagrid`如果`LINQ`.

但主要问题仍然是您`LINQ`正在沿线某处返回一个空集合。我主要建议返回并确保`LINQ`使用 LINQpad 或其他类似实用程序实际带回您期望的内容。

[你可以在这里](http://www.linqpad.net/)得到 LinqPad 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:33:23.937

我收到错误是因为我使用 IIF 进行空值检查。

有时它返回 null 并且查询抛出 NULL 引用异常。

现在我使用 IF 而不是 IIF，它工作正常。

*   纳雷什

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-19T01:12:29.847

我在这个页面上是因为我得到了`NullReferenceException`这个：

```
var allHeights = MyCities.SelectMany(city => 
    city.Houses.SelectMany(h => 
        h.Storeys.Values.Select(s => new { City = city, House = h, Storey = s })))
   .GroupBy(g => g.Storey.Height)
   .OrderBy(heightGroup => heightGroup.Key)
   .ToList();
int i = 0;
foreach (var heightGroup in allHeights)
{
    if (i > 1)
    {
        var previousHeightGroup = allHeights[i-1].ToList();
        var previousPartIDs = previousHeightGroup.Select(g => g?.City?.Name).ToList();
        //.... <do stuff in case of i > 0>
    }
    // do other stuff
    i++;
} 
```

" `previousHeightGroup.Select(g => g?.City?.Name).ToList()`" 扔了一个`NullReferenceException`，即使：

*   此数据结构的所有元素都不为空
*   `previousHeightGroup`不是空的
*   “名称”是`City`对象上的字符串属性并且非空
*   对象上的`Values`集合`Storeys`非空
*   无论如何，在调用时`NullReferenceException`，`allHeights`列表应该已经被`ToList()`调用完全评估，并且`Values`解决了
*   显然，所有意外的 null 成员访问都受到 Elvis 运算符的保护，即使访问的成员实际上不是 null

此外，我重构了这样的代码：

```
.Select(g => {
   var group = g;
   var city = g?.City;
   var cityName = city?.Name;
   return cityName;
}) 
```

...即，我分解了 Select 内部的数据结构取消引用，并在调试器中单步执行它，一切正常。尽管如此，该`Select()`电话随后有一个`NullReferenceException`, 据称在我自己的代码中。

解决这个问题的唯一方法是稍微重构下游代码，关闭 Visual Studio (2017) 和整个机器，重新启动一切，错误不再重现。

这意味着，LINQ*确实*有时会在这里和那里抛出。

这是 .Net 4.6.1 。

# php - 单选按钮表单代码和下拉菜单代码

> ID：11622803
> 
> 赞同：1
> 
> 时间：2012-07-24T01:16:41.260
> 
> 标签：php, javascript, forms, drop-down-menu, radio-button

我有一个简单的 php 联系表，但无法让单选按钮仅选择 1 个选项（需要选择）。也不确定下拉框所需的脚本（不需要此选择）

```
//radio button individual or team required 
if(trim($_POST['individual']) == '') {
    $hasError = true;
} else {
    $individual = trim($_POST['individual']);
}

//radio button individual or team required  
if(trim($_POST['team']) == '') {
    $hasError = true;
} else {
    $team = trim($_POST['team']);
}

<input type="radio" name="individual" value="individual" id="individual" checked="checked">Individual</label>
<input type="radio" name="team" value="team" id="team" > Team</label>
<label for="shirt"> <strong>T-Shirt size (Optional)</strong></label>
    <br />
      <select name="Shirt Sizes" id="shirt">
                    <option value="small" name="small" id="small">Small</option>
                    <option value="medium" name="medium" id="medium" selected="selected">Medium</option>
                    <option value="large" name="large" id="large">Large</option>
                    <option value="xlarge" name="xlarge" id="xlarge">Extra Large</option>
                    </select> 
```

任何帮助都会很棒。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:19:25.580

您需要将所有单选按钮命名为相同的名称，以便浏览器了解它们是分组的。

```
<input type="radio" name="team" value="individual" id="individual" checked="checked">Individual</label>
<input type="radio" name="team" value="team" id="team" > Team</label> 
```

发布时，将`value`在元素的变量名称下发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:19:35.517

如果您希望浏览器强制选择其中一个，单选按钮必须具有相同的名称

```
<input type="radio" name="quantity" value="individual" id="individual" checked="checked">Individual</label>
<input type="radio" name="quantity" value="team" id="team" > Team</label> 
```

然后在 PHP 中，您可以使用以下命令检查选择了哪个：

```
if(isset($_POST['quantity'])) {
    if($_POST['quantity'] == 'individual') {
        // individual
    } elseif($_POST['quantity'] == 'team') {
        // team
    }
} 
```

另外，我不确定这是否只是复制和粘贴的产物，但是您在两个单选按钮之前都缺少打开标签标签。

**编辑：**这是与您的问题无关的另一件小事，但除非您有特殊需要，否则您的`<option>`s 不需要具有 name 属性。该值会起作用（并且它们也不需要 id ，除非您需要一种简单的方法来使用 JS 单独访问它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:19:46.813

您需要为同一组中的单选按钮提供相同的“名称”属性：

```
<input type="radio" name="type" value="individual" id="individual" checked="checked">Individual</label>
<input type="radio" name="type" value="team" id="team" > Team</label> 
```

这样，当您单击一个时，它将取消选择另一个。

# javascript - 为什么人们使用 setTimeout("func()", ... ) 而不是 setTimeout(func, ... )

> ID：11622808
> 
> 赞同：4
> 
> 时间：2012-07-24T01:17:28.213
> 
> 标签：javascript

我看到这个用了很多，有人告诉我把函数引用放在引号之间是不好的，因为`setTimeout`/`setInterval` `evals`引用。这两者之间的实际区别是什么，一个被使用在另一个之上，为什么我看到这个被如此频繁地使用，即使它应该是常识，这种方式是不好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:20:27.283

1.  人们可能没有意识到他们可以使用不带引号的形式。

2.  字符串中引用的名称可能尚未定义。

3.  引用的表格让您延迟执行：

    ```
    setTimeout("myFunction(1, 'hello')", 100) 
    ```

    比以下更容易理解：

    ```
    setTimeout(function () { myFunction(1, 'hello') }, 100) 
    ```

    这不符合作者的要求：

    ```
    setTimeout(myFunction(1, 'hello'), 100) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:46:55.300

这两种形式有两个主要区别：

```
setTimeout("myFunc()", 100); 
```

和

```
setTimeout(myFunc, 100); 
```

第一个效率较低，它在全局范围内评估函数，因此您不能将本地函数或任何非全局函数传递给它。

看看效率参数，如果你想调用代码中的函数，你会写：

```
x = myFunc(); 
```

或者你会写：

```
x = eval("myFunc()"); 
```

当然，你会写第一个，因为：

1.  这就是您通常编写javascript的方式
2.  函数引用可以在解释器的第一次传递中解析一次，而不是每次执行时
3.  缩小器/优化器可以使用第一个重命名您的符号，但不能使用第二个。
4.  您可以使用第一个调用本地函数，但第二个需要全局函数
5.  `eval()`是一个相当重量级的东西，只有在没有其他更好的方法时才应该使用它。

仅供参考，[这个 jsPerf 比较](http://jsperf.com/eval-vs-direct-reference)表明该`eval()`版本慢了 96%。在某些情况下，性能可能无关紧要，但您可以了解它的效率有多低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:36:05.913

我敢打赌它还可以防止内存泄漏。

不泄漏 X：

```
var x = $("loading");
setTimeout("createTree(1);", 0); 
```

泄漏的 X：

```
var x = $("loading");
setTimeout(function(){createTree(1);}, 0); 
```

# java - Google-App-Engine (Struts2) 中的资源包

> ID：11622815
> 
> 赞同：1
> 
> 时间：2012-07-24T01:18:22.037
> 
> 标签：java, google-app-engine, struts2, resourcebundle

我在 Google App Enginge 中使用 Struts2。

在`global.properties`文件中，我有：

```
MESSAGE_SUBJECT = A user sent you a message. 
```

在 Struts.xml 中，我有：

```
<constant name="struts.custom.i18n.resources" value="global" /> 
```

如果我`getText("MMESSAGE_SUBJECT");`在行动中，我收到以下错误：

```
 com.opensymphony.xwork2.util.logging.commons.CommonsLogger error: Could not reload resource bundles
    java.lang.SecurityException: java.lang.IllegalAccessException: Reflection is not allowed on private static final java.util.concurrent.ConcurrentMap java.util.ResourceBundle.cacheList
        at com.google.appengine.runtime.Request.process-1e718b9b5c84cbb1(Request.java)
        at java.lang.reflect.Field.setAccessible(Field.java:166)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.clearMap(LocalizedTextUtil.java:836)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.reloadBundles(LocalizedTextUtil.java:794)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.reloadBundles(LocalizedTextUtil.java:780)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.findDefaultText(LocalizedTextUtil.java:205)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.getDefaultMessage(LocalizedTextUtil.java:654)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.findText(LocalizedTextUtil.java:534)
        at com.opensymphony.xwork2.util.LocalizedTextUtil.findText(LocalizedTextUtil.java:362)
        at com.opensymphony.xwork2.TextProviderSupport.getText(TextProviderSupport.java:202)
        at com.opensymphony.xwork2.TextProviderSupport.getText(TextProviderSupport.java:117)
        at com.opensymphony.xwork2.ActionSupport.getText(ActionSupport.java:102)
        at dating.message.WinkAction.execute(WinkAction.java:57)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:43)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
        at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
        at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
        at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
        at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
        at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
        at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 
```

该错误仅在部署时发生，但在开发环境中完全没有问题。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:39:49.563

Struts 无权重新加载容器（Jetty），被 AppEngine 禁止

struts.properties 中的更改 struts.i18n.reload=false

# r - R的read.table中的''和''有什么区别？

> ID：11622816
> 
> 赞同：1
> 
> 时间：2012-07-24T01:18:51.947
> 
> 标签：r

这是我的简单文本（名为测试）：

```
 name      sex     age  height  
1 x1        F       18   162
2 x2        M       19   170
3 x3        M       21   178
4 x4        F       22   166
5 x5        F       23   165

>read.table('test', sep='') 
```

没关系。

```
>read.table('test', sep=' ')  

Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :   
  line 1 did not have 20 elements 
```

我想知道为什么。

R的read.table中的''和''有什么区别？请告诉我原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T01:22:06.720

正如文档中所解释的，默认值的`''`意思是“任意数量的空白”，而您的第二个选择*正好*`' '`意味着一个实际上非常不同的空格。

 *措辞 (in `help(read.table)`) 并不理想，但可以完成工作：

> ```
>  sep: the field separator character.  Values on each line of the
>       file are separated by this character.  If ‘sep = ""’ (the
>       default for ‘read.table’) the separator is ‘white space’,
>       that is one or more spaces, tabs, newlines or carriage
>       returns. 
> ```

你想要默认值，除非你知道你有一个逗号分隔的 csv 文件。*

# c# - 计算一棵树的后代

> ID：11622817
> 
> 赞同：3
> 
> 时间：2012-07-24T01:18:56.840
> 
> 标签：c#

我有以下类，它在自身上重复形成一个树状数据结构：

```
public class chartObject
{
    public string name { get; set; }
    public int descendants { get; set; }
    public List<chartObject> children { get; set; }
} 
```

对于树中的每个对象，我想用它下面存在的数量对象填充后代属性。

示例结构：

```
chartObject1 (descendants: 4)
└-chartObject2 (descendants: 0)
└-chartObject3 (descendants: 2)
└--chartObject4 (descendants: 1)
└---chartObject5 (descendants: 0) 
```

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:23:15.077

递归公式如何：

```
children.Count + children.Sum(c => c.descendants) 
```

如果树是不可变的（它不是来自类声明），这适用于急切评估/缓存。如果您即使面对可变性也想要效率，您会发现这要困难得多；您可以考虑将树的某些部分标记为“脏”，因为它已发生突变/急切地强制重新评估此指标以“冒泡”，因为树的一部分已发生突变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T01:39:40.670

这对我有用：

```
public void SetDescendants(chartObject current)
{
    foreach (var child in current.children)
    {
        SetDescendants(child);
    }
    current.descendants = current.children.Sum(x => 1 + x.descendants);
} 
```

我用这段代码测试过：

```
var co = new chartObject()
{
    name = "chartObject1",
    children = new List<chartObject>()
    {
        new chartObject()
        {
            name = "chartObject2",
            children = new List<chartObject>() { }
        },
        new chartObject()
        {
            name = "chartObject3",
            children = new List<chartObject>()
            {
                new chartObject()
                {
                    name = "chartObject4",
                    children = new List<chartObject>()
                    {
                        new chartObject()
                        {
                            name = "chartObject5",
                            children = new List<chartObject>() { }
                        }
                    }
                }
            }
        }
    }
}; 
```

结果是这样的：

![结果](../Images/c9fc39ae1ad55f1eb79ce933ab4d2676.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T01:31:16.677

为了使计算最有效，请将其结果缓存在节点本身中。否则，您将在每次`descendants`查找该属性时重新计算计数。

这样做的代价是需要使父链上的缓存一直无效，如下所示：

```
public class chartObject
{
    private chartObject _parent;
    private int? _descCache = null;
    public string name { get; set; }
    public int descendants {
        get {
            return _descCache ?? calcDescendents();
        }
    }
    public List<chartObject> children { get; set; }
    public void AddChild(chartObject child) {
        child._parent = this;
        children.Add(child);
        chartObject tmp = this;
        while (tmp != null) {
            tmp._descCache = null;
            tmp = tmp._parent;
        }
    }
    private int calcDescendents() {
        return children.Count+children.Sum(child => child.descendants);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T01:34:44.743

遍历树的所有节点（深度优先），当孩子完成后，将“descendants 属性设置为孩子的后代 + 孩子计数的总和。你必须在每次更改树结构时都这样做。你应该能够限制更新仅适用于已更改元素的父母。

如果节点不可变，您可以在创建时填充该字段。

旁注：

*   您的树现在是可变的（可以轻松地在任何地方添加更多子节点），因此使用计算后代而不是节点上的属性的方法可能更安全。
*   将计算属性`int descendants { get; set; }`读/写是令人困惑的，因为任何人都可以将其值设置为任何数字。考虑是否将其设为只读并在子节点之一更改时进行更新（需要一些自定义通知机制）。
*   代码风格 - 考虑为打算公开的代码使用大写名称命名类（遵循 Microsoft 的 C# 编码指南）。`chartObject`->`ChartObject`

# wordpress - 为什么我的自定义帖子类型帖子不显示？

> ID：11622819
> 
> 赞同：3
> 
> 时间：2012-07-24T01:19:06.063
> 
> 标签：wordpress, themes, custom-post-type, posts

我使用functions.php中的以下代码创建了一个自定义帖子类型 - Press -

```
// Press Custom Post Type //

function press_custom_init() {

    $labels = array(
        'name' => _x('Press', 'post type general name'),
        'singular_name' => _x('Press', 'post type singular name'),
        'add_new' => _x('Add New', 'press'),
        'add_new_item' => __('Add New Press Item'),
        'edit_item' => __('Edit Item'),
        'new_item' => __('New Press Item'),
        'view_item' => __('View Press Item'),
        'search_items' => __('Search Press'),
        'not_found' =>  __('Nothing found'),
        'not_found_in_trash' => __('Nothing found in Trash'),
        'parent_item_colon' => ''
    );

    $args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'show_in_menu' => true,
        'show_in_nav_menus' => false,
        'query_var' => true,
        'rewrite' => array('slug','pages'),
        'capability_type' => 'post',
        'hierarchical' => false,
        'menu_position' => 5,
        'supports' => array('title','editor','thumbnail','excerpt',)
      );

    register_post_type( 'press' , $args );
}
add_action( 'init', 'press_custom_init' ); 
```

我已经添加了该帖子类型的项目并在我的导航栏中添加了一个菜单项，但是当我单击链接时，我收到一条“未找到帖子”消息。

你可以在这里看到它：http: [//s13.mynewsitereview.com//press](http://s13.mynewsitereview.com//press)

请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T09:59:55.777

**只需访问**WP-admin 中的永久链接页面`http://yoursite.com/wp-admin/options-permalink.php`即可解决此问题。

**为什么？**

在 WordPress 中创建任何插件（帖子类型、分类法等）后，WordPress 需要更新/创建一组新的**重写规则**（假设您使用的是漂亮的永久链接）。您需要做的就是访问后端的永久链接页面，以便您可以为新的帖子类型等**生成新规则**。技术术语是*冲洗重写规则*(http://codex.wordpress.org/Function_Reference/flush_rewrite_rules)

# gnuplot - 基于数据文件第四列的 gnuplot splot 颜色

> ID：11622820
> 
> 赞同：4
> 
> 时间：2012-07-24T01:19:14.893
> 
> 标签：gnuplot

我有一个包含 4 列数据的数据文件，前三列指定一个点 (x,y,z)，第四列是 1、2 或 3 - 我希望根据值对点进行着色第四列（即，如果是 2，则将点着色为红色，如果为 3，则为绿色，如果为 1，则为蓝色）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T01:35:44.570

```
set style line 1 lc rgb "red"
set style line 2 lc rgb "blue"
set style line 3 lc rgb "green"
splot 'datafile' u 1:2:3:4 lc variable 
```

# lisp - 在 cond 中使用 lisp 输出一些东西

> ID：11622822
> 
> 赞同：-1
> 
> 时间：2012-07-24T01:19:25.847
> 
> 标签：lisp, scheme

```
(define length1
 (lambda (lat)
  (cond 
   ((null? lat) 0)
   (else (+ 1 (length1 (cdr lat))))))) 
```

例如：在调用 length1 时显示数字（或其他任何内容）`cond`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:24:25.593

对于 common lisp，您可以使用`(progn (...) (...) ...)`将多个表达式组合为一个。

方案中的等价物是`(begin (...) (...) ...)`。

所以：

```
(define length1
 (lambda (lat)
  (cond 
   ((null? lat) 0)
   (else (begin (display "hello world") (+ 1 (length1 (cdr lat)))))))) 
```

或者你可能想要：

```
(define length1
 (lambda (lat)
  (cond 
   ((null? lat) 0)
   (else (let ((or-anything-else (+ 1 (length1 (cdr lat)))))
            (display or-anything-else)
            or-anything-else))) 
```

这几乎耗尽了我的耐心。

# javascript - URL 重定向，但无法将其保存在浏览器历史记录中。

> ID：11622826
> 
> 赞同：1
> 
> 时间：2012-07-24T01:19:38.263
> 
> 标签：javascript, jquery, browser-history, window.location

如果用户不在特定页面上或没有特定 cookie，我在下面包含的代码旨在重定向到新 url。cookie 功能与重定向一样完美。这是我的问题：窗口 url 重定向，但原始 url 未记录在我的浏览器历史记录中。

```
<script type="text/javascript">
    $(document).ready(function() {
        if (getCookie('legal_age') == "yes" || window.location =="http://example.com/home") {//user is legal age!
        } else {
            setTimeout(function() {
                window.open('http://example.com/welcome','_self','', false);
            },0)
        }
    });
</script> 
```

例如，如果我访问“ [http://example.com/page1](http://example.com/page1) ”，浏览器会重定向到“ [http://example.com/welcome](http://example.com/welcome) ”，这是应该的。但是，我需要访问的原始 url（“ [http://example.com/page1](http://example.com/page1) ”）显示在我的浏览器历史记录中，以便我可以在不同的函数中调用它。这是我用来调用历史记录的代码（在表单中）：

```
<form action="javascript:window.location.reload(history.go(-1));" method="get" name="age_form" id="ageForm" /> 
```

我也尝试过这种替代方法来调用历史记录，但没有帮助：

```
window.history.back(); 
```

我还尝试了以下方法，但未能在浏览器历史记录中保存原始 url：

```
window.location = "http://example.com/welcome";
window.location.href = "http://example.com/welcome";
window.location.assign("http://example.com/welcome"); 
```

最后，我包含了这个函数，因为另一个线程建议它可能会有所帮助，但它似乎并没有起到多大作用：

```
setTimeout(function(){ 
```

有任何想法吗？无论如何在重定向之前获取访问的原始网址以登录我的浏览器的历史记录？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:39:10.513

在重定向之前设置当前 URL 的 cookie 效果很好。这是有效的更改代码。请记住，为了设置 cookie，您必须引用 javascript cookie 函数（在这种情况下，我的函数称为 setCookie()：

```
<script type="text/javascript">
    $(document).ready(function(){
       if (getCookie('legal_age') == "yes" || window.location =="http://example.com/home") {//user is legal age!
       } else {
           setCookie('originalURL', window.location);
           var urlCheck = getCookie('originalURL');
           window.open('http://example.com/welcome','_self','', false);
       }
    });
</script> 
```

希望这对某人有帮助！

# ios - iOS 可访问性 - 如何为 UINavigationBar 的标题设置可访问性标签？

> ID：11622833
> 
> 赞同：13
> 
> 时间：2012-07-24T01:20:19.090
> 
> 标签：ios, objective-c, accessibility, voiceover

Apple 的配音误读了我的一个视图的标题，该视图位于 UINavigation 控制器中。

在应用程序的其他部分，我添加了一个自定义可访问性标签，以帮助它正确发音公司名称。如何设置 UINavigationBar 的可访问性标签？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-05-18T20:25:24.073

这适用于 iOS 8.2。在`viewDidLoad`：

```
self.navigationItem.accessibilityLabel = @"My accessible label"; 
```

当导航控制器转换到视图控制器时，`accessibilityLabel`读取的是 而不是视图控制器`title`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-24T03:25:36.470

我无法添加可访问性标签，但我找到了一种解决方法：

我用设置了可访问性的 UILabel 替换了 navigationItem 的标题视图。

```
UILabel *titleLabel = [[UILabel alloc] init];
titleLabel.text = @"myTitle";
[titleLabel setAccessibilityLabel:@"myCustomAccessiblityLabel"];
[titleLabel setFont:[UIFont boldSystemFontOfSize:20.0]];
[titleLabel setBackgroundColor:[UIColor clearColor]];
[titleLabel setTextColor:[UIColor whiteColor]];
[titleLabel sizeToFit];
self.navigationItem.titleView = titleLabel; 
```

我不确定为什么设置辅助功能标签不起作用，但上面的代码可以满足我的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:30:20.507

由于`UINavigationBar`继承自`UIView`，您应该能够设置其`accessibilityLabel`属性。试试： `yourUINavigationBar.accessibilityLabel = @"title";`。

此外，您可能需要确保它被标记为可访问性元素`yourUINavigationBar.isAccessibilityElement = YES;`（并且不在另一个也被标记为可访问性元素的视图内）。（我猜这最后一点可能是问题所在，因为您似乎已经知道可访问性标签。您可以使用模拟器中的可访问性检查器来查看是否是这种情况，方法是查看元素周围的框点击它以查看它是否在比导航栏更大的东西周围。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-02T10:14:31.733

我在 iOS 11 和 12 上测试过类似的解决方法，它可以按预期工作。对于`navigationItem.titleView`设置一个`UILabel`对象，然后为`navigationItem.titleView`.

```
self.navigationItem.titleView = YOUR_CUSTOM_UILABEL; 
```

可访问性标识符部分

```
self.navigationItem.titleView.accessibilityIdentifier = YOUR_ACCESSIBILITY_IDENTIFIER; 
```

您可以使用 Xcode 的**Accessibility Inspector**查看您的标识符。

# rest - 未通过 url.el 发送额外的标头

> ID：11622837
> 
> 赞同：1
> 
> 时间：2012-07-24T01:20:45.990
> 
> 标签：rest, emacs, curl, lisp, elisp

以下是我的 elisp 代码（凭证显然是假的）：

```
(defvar assembla-username  "foo")                                                                                                                                                                             
(defvar assembla-password  "bar")                                                                                                                                                                           
(defvar tickets-url "http://www.assembla.com/spaces/aWx7Oas2352cwqjQWU/tickets/")                                                                                                                       

(defvar assembla-auth-header (concat "Basic " (base64-encode-string (concat assembla-username ":" assembla-password))))                                                                                              

; curl -H "Accept: application/xml" -u "foo:bar" http://www.assembla.com/spaces/aWx7Oas2352cwqjQWU/tickets/                                                                                      
(defun get-tickets()                                                                                                                                                                                            
  (interactive)                                                                                                                                                                                                      
  (let ((url-request-extra-headers                                                                                                                                                                                   
         '(("Accept" . "application/xml")                                                                                                                                                                            
           ("Authorization" . assembla-auth-header)))))                                                                                                                                                                                
  (url-retrieve tickets-url (lambda (status)                                                                                                                                                                
                                       (switch-to-buffer (current-buffer))))) 
```

基于监视传出请求标头，未设置“接受”标头。我很确定这就是将我重定向到登录页面的原因，因为注释掉的 curl 请求非常有效并且确实设置了 Accept 标头。

话虽这么说，有什么特别是我做错了，和/或有更好的包装器可以在 elisp 中进行大量 REST 调用吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:59:39.327

您没有评估您的`assembla-auth-header`变量，而是`url-retrieve`在您的外部调用`let`，此时`url-request-headers`已恢复到其原始状态。似乎您可能需要使用`url-mime-accept-string`而不是将其添加到额外的标题中。

```
(defun get-tickets()
  (interactive)
  (let ((url-mime-accept-string "application/xml")
        (url-request-extra-headers
         `(("Authorization" . ,assembla-auth-header))))
    (url-retrieve tickets-url (lambda (status)
                                (switch-to-buffer (current-buffer)))))) 
```

我建议尝试这样的事情，看看这是否至少正确传递了*Accept*和*Authorization*标头。

# newsstand-kit - News Stand App 内容分发的最佳格式

> ID：11622838
> 
> 赞同：1
> 
> 时间：2012-07-24T01:20:50.233
> 
> 标签：newsstand-kit

我正在创建一个 News Stand 应用程序，我只是对选择哪种格式感到困惑：PDF、ePub 或 HTML5。

我更倾向于 HTML5 - 是否有任何关于如何将 HTML5 问题打包为我的 News Stand 应用程序中的问题进行分发的好的示例（我相信 HTML5 - 我只需要以这种方式在 WebView 中加载索引/目录页面其余页面是从 HTML 本身自动呈现的）。

期待您的建议和建议。

# iphone - 在 UIWebView 中 Facebook 登录失败

> ID：11622845
> 
> 赞同：4
> 
> 时间：2012-07-24T01:22:05.467
> 
> 标签：iphone, ios, facebook, cocoa-touch, login

在我的应用程序中，我必须在 UIWebView 中加载一个网页，用户可以在其中使用 Facebook 登录。问题是当用户点击登录时，会出现空白页面。

是否可以返回第一页并登录？

网页在 Safari 中完美运行并打开新窗口，登录后将其关闭并返回到它离开的位置。

编辑：向 UIWebView 提供了错误的 URL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:50:55.967

我认为适用于 iOS 的 facebook SDK 示例会按照您想要的方式登录。请参考链接：facebook-iOS-SDK-sample：[https ://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)

尤其是[https://github.com/facebook/facebook-ios-sdk/blob/master/sample/Hackbook/Hackbook/RootViewController.m中的这一部分](https://github.com/facebook/facebook-ios-sdk/blob/master/sample/Hackbook/Hackbook/RootViewController.m)

```
/**
 * Show the authorization dialog.
 */
- (void)login {
    HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    if (![[delegate facebook] isSessionValid]) {
        [[delegate facebook] authorize:permissions];
    } else {
        [self showLoggedIn];
    }
} 
```

当您单击登录按钮时，它将打开一个登录对话框，并请求许可。这就是它的样子：[https ://developers.facebook.com/docs/mobile/screenshots/ios/#iphone-native](https://developers.facebook.com/docs/mobile/screenshots/ios/#iphone-native)

我认为实现“facebook 相关”应用程序的最佳方式是从 Hacbook 开始。这真的是一个很好和详细的样本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:00:54.563

如果您想在关闭 facebook 登录弹出窗口后重新加载特定 url 以防止卡在空白页面上，您可以使用此代码。

首先包含 UIWebViewDelegate 并在代码中的某个位置设置您的委托。

```
[yourwebView setDelegate:self]; 
```

然后使用 shouldStartLoadWithRequest 方法检查 Facebook 用来关闭其弹出窗口的 close_popup.php 的请求 url。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{    
    NSString *urlString = [NSString stringWithFormat:@"%@", request];
    if ([urlString rangeOfString:@"close_popup.php"].location == NSNotFound) {
        //The close_pop.php is not found. (Do nothing)
    } else {
        //Facebook closed the popup so we should load the page we now want the user to see. 
        NSURL*url=[NSURL URLWithString:@"http://www.example.ca/thepageyouwanttoreload.html"];
        NSURLRequest*request=[NSURLRequest requestWithURL:url];
        [webView loadRequest:request];
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:40:10.233

SSL 问题？按照 Joanne 的说法，使用 facebook SDK，您可以免费获得大量额外功能，包括通过 facebook 本地应用程序（如果已安装）登录。

# javascript - 通过仅使用 html 和/或 javascript 的表单发送电子邮件？

> ID：11622849
> 
> 赞同：0
> 
> 时间：2012-07-24T01:22:22.087
> 
> 标签：javascript, html

> **可能重复：**
> [需要从 HTML 页面发送电子邮件](https://stackoverflow.com/questions/1818962/need-to-send-email-from-html-pages)

有没有办法使用表单发送没有数据库的电子邮件？有没有可以做到这一点的html元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:24:55.133

您可以使用电子邮件链接：

```
<a href="mailto:person@domain.tld">Person</a> 
```

**编辑：**如果您真的想使用表单，您可以利用`mailto`主题、正文、抄送和密件抄送等参数来自定义您的电子邮件。这是一个例子：

```
// JS 
// Uses jQuery but could be done without
$(function() {
    $('div').click(function() {
        var emailLink = $('#email');
        emailLink.attr('href', 'mailto:person@domain.com?subject=' + $('#subject').val() + '&body=' + $('#body').val());
    })
});
```

```
/* CSS */
div {
    cursor: pointer;
    color: blue;
    text-decoration: underline;
}
```

```
<!-- HTML -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
Subject: <input type="text" id="subject"><br>
Body: <input type="text" id="body"><br>

<div>Update Email Settings</div>
<a id="email" href="mailto:person@domain.com">
    Send Email
</a>
```

请注意，这仍将使用用户的默认电子邮件客户端，并且不会自行发送电子邮件。但是，它允许您从表单更改电子邮件的主题和内容并将其传递给电子邮件客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T01:31:50.820

```
<a href="mailto:name@company.com">someOne</a> 
```

它将打开一个电子邮件客户端软件，例如 MS-Outlook。如果你想直接用 HTML & JS 发送，那是不可能的。

因为，邮件需要 SMTP-protocol 才能发送邮件，而浏览器只支持 HTTP-protocol。你需要一个 SMTP 服务器来发送邮件，还需要一些服务器端代码，比如 php 或 jsp ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T01:28:03.433

如果您的意思是要动态发送电子邮件，则需要的不仅仅是 HTML 和 JavaScript，如 PHP 或 ASP.net。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T01:33:42.957

您可以使用超链接让用户单击然后将用户重定向到默认邮件系统。例如，您可以使用

```
<a href="mailto:user@gmail.com">Username</a> 
```

# php - Zend中如何设置和获取请求格式？

> ID：11622850
> 
> 赞同：0
> 
> 时间：2012-07-24T01:22:23.937
> 
> 标签：php, zend-framework

我想知道是否有办法从这个 url 获取“json”部分：“ ***/*** *post/* **index.json ”，或者，如果不存在，默认为“html”，就像在 Rails 中执行“request.format”一样。**

 **我也想知道这是否可以在路线上设置为参数。正在做：

```
resources.router.routes.default.route = /:controller/:action.:format 
```

在ini文件上不起作用，似乎分隔参数的唯一方法是添加/。

Zend 可以做到这一点，还是我必须自己编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:31:57.723

我没有使用 Rails 或 Ruby 的经验，但我认为您必须自己在 ZF 中编写代码。您可以在控制器中执行此操作：

```
$format = substr($this->getRequest()->getRequestUri(), -4);
if ($format === 'json') {
    // do something
} else {
    // do something else
} 
```

但这当然取决于 URI 中包含的请求的格式。

您是否将格式放入 URI 以便响应 AJAX 请求？我认为编写 HTTP 规范的人的意图是读取客户端给出的请求标头，即[Accept](http://shiflett.org/blog/2011/may/the-accept-header)标头。我还使用 ZF`$request->isXmlHttpRequest()`来检测 AJAX 请求。**

# javascript - 主干同步回调总是使用错误

> ID：11622851
> 
> 赞同：1
> 
> 时间：2012-07-24T01:22:30.477
> 
> 标签：javascript, backbone.js

在使用 Backbone 同步时，我很难弄清楚如何让回调正常工作。我正在查看我的返回数据包，响应代码是 200，这没有错误，但调用了 alert("fail") 语句。我正在请求来自 java servlet 的响应。有什么想法吗？谢谢

```
Backbone.sync("read", this.model, {
  url : "some url",
    success: function(model, response) {
      alert(response);
    },
    error: function(model, response) {
      alert("fail");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T00:27:55.363

我不明白你在做什么...

使用此方法而不是同步：

```
model.fetch();
model.save();
model.destroy(); 
```

他们会调用同步，并且他们工作得很好。

我认为没有必要覆盖原始同步，它已经足够好了。我为示例应用程序创建了一个模拟同步，它是这样工作的：

```
var User = Backbone.Model.extend({
    notAllowedEmailHost: "gmail.com",
    sync: function (method, model, options) {
        if (method == "read" || method == "delete")
            throw new Error("Example is not prepared for these methods.");
        var email = model.get("email");
        var status = 201;
        if (email.indexOf(this.notAllowedEmailHost) != -1)
            status = 400;
        else if (method == "update")
            status = 500;
        options.xhr = {
            status: status
        };
        if (status >= 400)
            options.error(options.xhr);
        else
            options.success({
                id: 1
            });
    }
}); 
```

上面的方法围绕你的回调创建包装函数，并且同步调用这些包装函数和结果。所以同步回调不是你通过调用获取、保存或销毁函数给出的回调......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T11:12:19.660

确保您的 servlet 返回一个 JSON 对象，即使它是空的。这解决了我的问题。

# javascript - 如何在 apache 服务器上运行 socket.io（仅限客户端）

> ID：11622853
> 
> 赞同：2
> 
> 时间：2012-07-24T01:22:58.120
> 
> 标签：javascript, jquery, socket.io

我想在我的 apache 服务器上运行 socket.io 的客户端。

我已将 socket.io 目录上传到我的 Web 服务器，并尝试了主站点[socket.io](http://socket.io)中的简单客户端连接示例，但它不起作用。我不知道我需要什么才能让它工作并连接我正在运行的服务器。

我希望，我已经清楚地解释了我的问题。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T03:17:36.447

将所有文件复制`socket.io\node_modules\socket.io-client\dist`到您的 apache 服务器，例如复制到`js`文件夹中。然后添加`socket.io.min.js`到您的页面。

```
<script src="js/socket.io.min.js" type="text/javascript"></script>
<script type="text/javascript">
    var socket = io.connect('http://localhost:3000');
    socket.on('news', function (data) {
        console.log(data);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T10:57:57.063

将可分发文件复制`.js`到您自己的 javascript 文件夹中。就我而言，我正在使用 xampp：

```
C:\xampp\htdocs\nodejs\node_modules\socket.io\node_modules\socket.io-client\dist 
```

# types - 从常量存储器统一加载 128 位数据

> ID：11622855
> 
> 赞同：0
> 
> 时间：2012-07-24T01:23:29.023
> 
> 标签：types, vector, cuda, structure, gpgpu

给定一个 CUDA 向量类型`int4`，我如何从常量内存中加载 128 位数据。

这似乎不起作用：

```
#include <stdio.h>
#include <cuda.h>

__constant__ int constant_mem[4];
__global__ void kernel(){
    int4 vec;
    vec = constant_mem[0];
}
int main(void){return 0;} 
```

在第七行，我试图将常量内存中的所有 4 个整数值加载到 128 位向量类型中。此操作会导致以下编译错误：

```
vectest.cu(7): error: no operator "=" matches these operands
            operand types are: int4 = int 
```

此外，是否可以直接访问向量类型而无需强制转换，如下所示：

```
int data = vec[0]; 
```

PTX 程序集中的 Switch 语句：

```
 @%p1 bra    BB1_55;

    setp.eq.s32     %p26, %r1, 1;
    @%p26 bra   BB1_54;

    setp.eq.s32     %p27, %r1, 2;
    @%p27 bra   BB1_53;

    setp.ne.s32     %p28, %r1, 3;
    @%p28 bra   BB1_55;

    mov.u32     %r961, %r61;
    bra.uni     BB1_56;

BB1_53:
    mov.u32     %r961, %r60;
    bra.uni     BB1_56;

BB1_54:
    mov.u32     %r961, %r59;
    bra.uni     BB1_56;

BB1_55:
    mov.u32     %r961, %r58;

BB1_56: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:46:30.077

在第一种情况下，强制转换可能是最简单的解决方案，因此如下所示：

```
__constant__ int constant_mem[4];
__global__ void kernel(){
    int4 vec = * reinterpret_cast<int4 *>(&constant_mem);
} 
```

（免责声明写在浏览器中，未经编译或测试，使用风险自负）

使用 C++`reinterpret_cast`运算符将强制编译器发出 128 位加载指令。

在第二种情况下，听起来您想使用 128 位内存事务直接寻址存储在 128 位向量类型数组中的 32 位字。这需要一些辅助函数，可能类似于：

```
__inline__ __device__ int fetch4(const int4 val, const int n)
{
     (void) val.x; (void) val.y; (void) val.z; (void) val.w;
     switch(n) {
         case 3:
            return val.w;
         case 2: 
            return val.z;
         case 1:
            return val.y;
         case 0:
         default:
            return val.x;
    }
}

__device__ int index4(const int4 * array, const int n)
{
    int div = n / 4;
    int mod = n - (div * 4);

    int4 val = array[div]; // 128 bit load here

    return fetch4(val, mod);
}

__constant__ int constant_mem[128];
__global__ void kernel(){
    int val = index4(constant_mem, threadIdx.x);
} 
```

（免责声明写在浏览器中，未经编译或测试，使用风险自负）

在这里，我们通过读取整个值并解析它们的内容来强制执行 128 位事务`int4`（强制转换为 void 是旧版本的 open64 编译器所必需的咒语，如果它认为成员未使用，则倾向于优化向量加载）。执行索引需要一些 IOP 开销，但如果生成的事务的负载带宽更高，它们可能是值得的。switch 语句可能是使用条件执行编译的，所以不应该有分支分歧惩罚。请注意，非常随机地访问 int4 值数组可能会浪费大量带宽并导致扭曲序列化。这样做可能会对性能产生很大的负面影响。

# php - 什么是类型的 tableresource(9)（pgsql 结果）

> ID：11622860
> 
> 赞同：-1
> 
> 时间：2012-07-24T01:24:28.977
> 
> 标签：php, postgresql, resources

```
$sql = "insert into my_table ...";
$rs = pg_query($rs);
var_dump($rs); // => tableresource(9) of type (pgsql result) 
```

这是什么？目的？大批？我该如何使用它？

该行被插入到表中。

PHP 文档页面应该在这方面进行改进。该页面[http://www.php.net/manual/en/function.pg-query.php](http://www.php.net/manual/en/function.pg-query.php)说：

> 返回值 成功时为查询结果资源，失败时为 FALSE。

应该有一个链接***结果资源***来解释它是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:19:42.573

嗯，你甚至看过你链接的文档吗？它显示了一个简单的示例...直接来自您链接的页面

```
$result = pg_query($conn, "SELECT author, email FROM authors");
if (!$result) {
  echo "An error occured.\n";
  exit;
}

while ($row = pg_fetch_row($result)) {
  echo "Author: $row[0]  E-mail: $row[1]";
  echo "<br />\n";
} 
```

它是您可以迭代的资源，它将为您提供一个数组。

**编辑**

对于插入语句，如果不成功将返回 null。如果成功，就可以用doign来获取插入id

```
$res = pg_query("INSERT INTO test VALUES (1)");

$id = pg_last_oid($res); 
```

你从来没有真正对资源本身做任何事情，而是通常将它传递给另一个函数。

您还可以通过以下方式获取查询的错误

```
echo pg_result_error($res) 
```

`pg_result_status`也使用它

# algorithm - 如何在一对节点之间的无向图中找到所有边不相交的等成本路径？

> ID：11622864
> 
> 赞同：2
> 
> 时间：2012-07-24T01:25:31.800
> 
> 标签：algorithm, graph, graph-algorithm, shortest-path, max-flow

给定一个无向图 G = (V, E)，G 中的边具有非负权重。

[1] 如何找到两个节点 s 和 t 之间的所有边不相交和等成本路径？

[2] 如何找到两个节点 s 和 t 之间的所有边不相交路径？

[3] 如何找到两个节点 s 和 t 之间的所有顶点不相交和等成本路径？

[4] 如何找到两个节点 s 和 t 之间的所有顶点不相交路径？

任何近似算法代替？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:31:43.143

构建一棵树，其中每个节点都表示通过单向图的路径。

我知道，树也是图，但在这个答案中，我将使用以下具有此含义的术语：

*   顶点：是单向图中的顶点。它不是我树中的一个节点。
*   edge：是单向图中的一条边。它不是我树的一部分。
*   节点：我的树中的一个顶点，而不是你的图中的一个顶点。
*   root：我树上唯一没有父节点的节点。
*   叶：我的树中没有子节点的任何节点。

我不会谈论我的树中的边缘，所以没有关于树边缘的词。此答案中的每条边都是您图表的一部分。

* * *

**构建树的算法**

树的根是仅包含顶点 s 且不包含边的路径的表示。让它的权重为0。

**对该树中的每个节点**执行以下操作：****

 **取该节点表示的路径的末端顶点（我称其为实际节点）并找到所有远离该末端顶点的边。
**如果：**没有从这个顶点引出的边，你走到了死胡同。这条路径永远不会通向顶点 t。所以将此节点标记为叶子并赋予它无限权重。
**别的：**

**对于**这些边中的每一个：
将子节点添加到实际节点。让它成为实际节点的副本。将边缘附加到路径的末端，然后将边缘末端顶点也附加到路径。（所以每条路径都遵循模式 vertex-edge-vertex-edge-vertex-...）
现在在树中向上遍历，回到根并检查是否有任何前辈具有与刚才相同的结束顶点添加了结束顶点。
**如果**您有匹配项，则新生成的节点是包含循环的路径的表示。将此节点标记为叶子并赋予其无限权重。
**否则**如果没有循环，只需将新添加的边权重添加到节点权重中即可。现在测试，如果新生成的节点的结束顶点是顶点 t。
**如果**确实是，将此节点标记为叶子，因为此节点表示的路径是从 s 到 t 的有效路径。

* * *

该算法总是在有限时间内结束。最后，你的树上有 3 种类型的叶子：

*   代表具有无限权重的死胡同的节点
*   代表循环的节点，也具有无限权重
*   表示从 s 到 t 的有效路径的节点，其权重是作为该路径一部分的所有边权重的总和。

由叶子表示的每条路径都有其单独的边序列（但可能包含相同的顶点序列），因此具有有限权重的叶子表示从 s 到 t 的完整边不相交路径集。这就是**练习[2]的解法**。

现在对所有具有有限权重的叶子执行以下操作：
将其权重及其路径写入列表。按权重对列表进行排序。现在具有相同权重的路径是列表中的邻居，您可以在此排序列表中找到并提取所有等价路径组。这就是**练习[1]的解法**。

现在，对该列表中的每个条目执行以下操作：
将其顶点列表添加到该列表中的每个路径。完成此操作后，您将拥有一个包含以下列的表：

*   重量
*   小路
*   第一个顶点（总是 s）
*   第二个顶点
*   第三个顶点
*   ...

按顶点排序此表字典序，然后按权重排序所有顶点（按第 1 个顶点、第 2 个顶点、第 3 个顶点、...、权重排序）如果此排序表中的一行与前一行具有相同的顶点序列，然后删除这一行。

这是两个节点 s 和 t 之间所有顶点不相交路径的列表，因此它是**练习 [4] 的解决方案**。

在此列表中，您可以找到所有等成本路径作为邻居，因此您可以轻松地从该列表中提取两个节点 s 和 t 之间的所有顶点不相交和等成本路径组，所以这里有**练习 [3 ]** .**

# php - 如何在codeigniter中连接用户指定的数据库

> ID：11622872
> 
> 赞同：3
> 
> 时间：2012-07-24T01:26:21.050
> 
> 标签：php, database, codeigniter, dynamic, connection

我有一个项目，我必须在其中连接用户指定的数据库。我想以适当的 codeigniter 风格实现它，但我不知道我该怎么做 codeigniter 将数据库凭据存储在 database.php 文件中是否有任何方法可以使其动态化。或者有没有其他方法可以实现这一目标？我用谷歌搜索了它，但没有发现任何有用的东西。任何帮助和建议将不胜感激。

**更新：**
该项目是关于报告的。我有一个表单，在其中我获得了数据库登录凭据，然后生成有关其数据库的报告，一切都将在运行时完成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T01:52:50.057

根据[指南](http://ellislab.com/codeigniter/user-guide/general/models.html#conn)，您可以通过以下第三个参数手动传递数据库连接设置`$this->load->model`：

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = "mydatabase";
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;

$this->load->model('Model_name', '', $config);
// or as gorelative notes, to access multiple databases:
$DB2 = $this->load->database($config, TRUE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-18T01:42:48.907

我知道这是一个老话题，但我一直在寻找这些信息，并相信其他人也可能需要。

> 如果您只需要在同一连接上使用不同的数据库，则不需要创建单独的数据库配置。您可以在需要时切换到不同的数据库，如下所示：

```
$this->db->db_select($database2_name) 
```

这解决了我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T01:56:26.120

## 首先一句警告

应该注意，这可能不是推荐的最佳主意，除非您限制用户允许的数据库名称或不允许他们自己选择它。

如果第一种情况是必须的，请清理数据，如果您知道它定义的数据库名称列表.. 为他们提供一个列表并针对该列表进行验证。

## 话虽如此：

这是您描述的代码。我在我的控制器中执行此操作。并`$db2->`在我的模型中参考。

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = $customUserDatabase;
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;

$DB2 = $this->load->database($config);

$q = $DB2->where('id', 13)->get('tablename');

if( $q->num_rows() > 0 ){
  return $q->result();
}else{
  return false;
} 
```

[http://codeigniter.com/user_guide/database/connecting.html](http://codeigniter.com/user_guide/database/connecting.html)

参考关于连接多个数据库的部分...

* * *

> ## 连接到多个数据库
> 
> 如果您需要同时连接到多个数据库，您可以这样做：
> 
> ```
> $DB1 = $this->load->database('group_one', TRUE); $DB2 = $this->load->database('group_two', TRUE); 
> ```
> 
> 注意：将单词“group_one”和“group_two”更改为您要连接到的特定组名称（或者您可以传递上述连接值）。
> 
> 通过将第二个参数设置为 TRUE（布尔值），函数将返回数据库对象。
> 
> 当您以这种方式连接时，您将使用您的对象名称而不是本指南中使用的语法来发出命令。换句话说，而不是发出命令：
> 
> ```
> $this->db->query(); $this->db->result(); etc... 
> ```
> 
> 您将改为使用：
> 
> ```
> $DB1->query(); $DB1->result(); etc... 
> ```

## 实时工作代码示例。

我使用这个完全相同的功能放置了我的控制器/模型的片段。我需要跨多个数据库使用相同的凭据/配置连接到多个数据库。因此，我可以`$this->db->`用来获取配置。

你可以在这里看到它的要点：[https ://gist.github.com/08a4f45da1ff7e177425](https://gist.github.com/08a4f45da1ff7e177425)

# jquery - 更好的方式来编写 jquery 验证 ajax 提交

> ID：11622874
> 
> 赞同：1
> 
> 时间：2012-07-24T01:26:39.503
> 
> 标签：jquery, serialization, jquery-validate

我从这段代码开始使用 jQuery ajax 方法提交表单（该方法没有问题）

```
$( function() {
//bind an event handler to the submit event for the appointment form
    $("#idw-form").on("submit", function(e) {
//cache the form element for use in this function
    var $form = $( this );
//prevent the default submission of the form
    e.preventDefault();
//run an AJAX post request to your server-side script, $this.serialize() is the data from your form being added to the request
    $.post($form.attr('action'), $form.serialize(), function (responseData) {
        if (responseData == 1) {
            $.mobile.changePage( 'thank-you-dialog.html', { transition: "pop" } );
        } else {
            $.mobile.changePage( 'error-dialog.html', { transition: "pop" } );
        }
        return false;
    });
});
}); 
```

然后我想介绍使用 jQuery validate 插件的验证。我以为我应该能够将这段代码放入 submitHandler 回调函数中，但它不起作用。花了好几个小时在萤火虫中调试，终于让它工作了。有几件事导致了这个问题。

1.  我不得不注释掉`e.preventDefault();`我习惯需要的东西。（现在我正在输入这个，我隐约记得我可能只包含了这行代码，因为它需要它来使用 jQuery Mobile 框架，但我不确定）。
2.  我不得不改变正在被`.serialize()`'d 的变量。由于某种原因，当使用此代码提交表单时，序列化函数将始终返回一个空字符串。

这是我终于能够开始工作的修改后的代码：

```
submitHandler: function(form) {
    formObj = $( '#' + form.id );
    var replaceDiv = $( '#main-content' );
    //prevent the default submission of the form
    //e.preventDefault();
    //run an AJAX post request to your server-side script, $this.serialize() is the data from your form being added to the request
    $.ajax({
        type: 'POST',
        url: '/scripts/idw-mail-handler.php',
        dataType: 'json',
        data: formObj.serialize(),
        success: function(responseData, responseStatus, responseXml){
            console.log( 'responseData is: ' + responseData );
            console.log( 'responseStatus is: ' + responseStatus );
            console.log( 'responseXML is: ' + responseXml );
            replaceDiv.hide();
            if (responseData.sentStatus == 1) {
                replaceDiv.before(responseData.successMessage);
                $('html, body').animate({
                    scrollTop: 0
                }, 300);
                console.log( 'sentStatus equals: ' + responseData.sentStatus );
            } else {
                replaceDiv.before(responseData.errorMessage);
                $('html, body').animate({
                    scrollTop: 0
                }, 300);
                console.log( 'sentStatus equals something other than 1: ' + responseData.sentStatus );
            }
        },
        error: function(errorXml, errorStatus, errorError){
            console.log( 'ErrorXml is: ' + errorXml );
            console.log( 'errorStatus is: ' + errorStatus );
            console.log( 'errorError is: ' + errorError );
        },
        complete: function(completeXml, completeStatus){
            console.log( 'completeXML is: ' + completeXml );
            console.log( 'completeStatus is: ' + completeStatus );
        }
    });
} 
```

当然`error:`and`complete:`方法（“方法”是正确的术语吗？）不是必需的。只是我用来更好地理解 jQuery 的 ajax 函数的东西。

所以，我有三个问题。

1.  jQuery 验证脚本是否有`default`需要阻止的操作？我知道它看起来并不基于我正在运行的代码，但我想看看是否有人对此有任何额外的见解。
2.  为什么我需要更改正在被`serialize()`'d 的变量？当我使用`.on("submit", function(e) { ...`允许 $(this) 的 jQuery 触发方法时，与我通过jQuery 验证函数`serialize()`的方法触发 ajax 提交时有什么不同？`submitHandler:`
3.  有没有更有效/更好的方法可以做到这一点？

非常感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:43:55.983

> jQuery 验证脚本是否有需要阻止的默认操作？我知道它看起来并不基于我正在运行的代码，但我想看看是否有人对此有任何额外的见解。

不，它没有。您可以通过检查最终处理[事件](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L58)[的代码`submit`](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L58)来验证这一点。你也可以写一个简单的例子来证明这一点：

```
$("#myform").validate({
    submitHandler: function (form) {
        console.log('hi');
    }
}); 
```

上面的示例实际上不会发布表单，即使它是有效的。`submit`如果您指定`submitHandler`.

> 为什么我需要更改正在序列化（）的变量？当我使用 jQuery .on("submit", function(e) { ... 允许 $(this) 序列化()'d 的触发方法时，与我通过触发 ajax 提交时有什么不同？ submitHandler：jQuery 验证函数的方法？

在 中`submitHandler`，`this`引用您应用到表单的验证器对象。这就是为什么`$(this).serialize()`它不像在事件处理程序内部那样有意义（其中`this`引用了事件发生的元素）。相反，您应该 jQuerify 传递给的表单元素`submitHandler`：

```
$("#myform").validate({
    submitHandler: function (form) {
        var serialized = $(form).serialize();
    }
}); 
```

> 有没有更有效/更好的方法可以做到这一点？

并不真地。我认为这是一种非常标准、正确的使用方式`submitHandler`。如果您希望 AJAX 提交代码更短一点，您可以查看[jQuery 表单插件](http://jquery.malsup.com/form/)，而不是执行普通的 jQuery AJAX 调用（事实上，验证文档中的一些示例代码使用了该插件）。

# mysql - MySqlConnection 未定义

> ID：11622876
> 
> 赞同：3
> 
> 时间：2012-07-24T01:27:06.870
> 
> 标签：mysql, vb.net, phpmyadmin

我是 vb.net 和 mysql 的新手。

当我将 Dim SQLConnection 定义为 MySqlConnection = New MySqlConnection 时，我感到很困惑。

它说新的“MySqlConnection”没有定义，但我确保我已经导入了需要的命名空间或任何东西，但我仍然有一个错误，我无法弄清楚是什么问题。

这是我的代码：

```
 Imports MySql.Data.MySqlClient 

 Public Class EditInfo
Dim bednumber As String = ""
Dim patient_name As String = ""
Dim patient_age As String = ""
Dim date_of_confinement As String = ""
Dim type_of_sickness As String = ""
Dim type_of_IV_fluid As String = ""
Dim number_of_bottles As String = ""
Dim drop_rate As String = ""

Dim ServerString As String = "Server=localhost; database=patientinfo;user id=root;password=root" 'connection to phpmyadmin database
Dim SQLConnection As MySqlConnection = New MySqlConnection

 Private Sub PatientInfoBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PatientInfoBindingNavigatorSaveItem.Click
    Me.Validate()
    Me.PatientInfoBindingSource.EndEdit()
    Me.PatientInfoTableAdapter.Update(Me.PatientInfoDBDataSet.PatientInfo)

End Sub 
```

任何帮助，将不胜感激。谢谢！弄糊涂了对不起XD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T02:18:41.773

尝试：

代替

```
Dim SQLConnection As MySqlConnection = New MySqlConnection 
```

经过

```
Dim SQLConnection As New MySqlConnection() 
```

另一点，您可以使用 String.Empty 来设置 String 而不是 "" 的值。

HTH。

# python - BeautifulSoup：跳过 html 元素

> ID：11622882
> 
> 赞同：0
> 
> 时间：2012-07-24T01:28:14.990
> 
> 标签：python, html, dom, beautifulsoup, scrape

我有以下 html 结构： 这只是其中的一部分，但我认为这个片段足以解释我的问题。

```
<tr>
<td> Color Digest </td>
<td> AgAkAZwCJgMZ </td>
</tr>
<tr>
<td> Color Digest </td>
<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
</tr> 
```

我有以下代码来提取“Color Digest”标签的下一个兄弟

```
for td in soupPage.html.findAll('td'):
    if td.text == 'Color Digest':
        if td.nextSibling.text != " ":
            a = set()
            a = "[" + td.nextSibling.text.strip(",") + "]"
            print a 
```

但我想跳过`<td> AgAkAZwCJgMZ </td>` 并获得价值`<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>`

我可以遵循的最佳beautifulsoup 机制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-15T14:42:57.010

更多的 html（例如整个表）将有助于编写更健壮的东西。

如果您知道要排除的字符串。使用 bs4 4.7.1

```
from bs4 import BeautifulSoup as bs

html = '''
<tr>
<td> Color Digest </td>
<td> AgAkAZwCJgMZ </td>
</tr>
<tr>
<td> Color Digest </td>
<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
</tr>
'''
soup = bs(html, 'lxml')
elems = [item.text for item in soup.select('td:contains("Color Digest") + td:not(:contains("AgAkAZwCJgMZ"))')]
print(elems) 
```

如果您不使用返回列表上的索引

```
elems = [item.text for item in soup.select('td:contains("Color Digest") + td')][1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T21:57:52.473

您可以通过以下方式实现：

```
import re
from bs4 import BeautifulSoup

html = """
<tr>
<td> Color Digest </td>
<td> AgAkAZwCJgMZ </td>
</tr>
<tr>
<td> Color Digest </td>
<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
</tr>
"""

soup = BeautifulSoup(html)
output = soup.find_all('td', text = re.compile(" Color Digest "))[1].find_next('td').text

print(output) 
```

# jquery - 使用 jQuery 在悬停时为特定角设置动画

> ID：11622883
> 
> 赞同：-1
> 
> 时间：2012-07-24T01:28:32.873
> 
> 标签：jquery, css

我在[这里](https://stackoverflow.com/questions/2181697/how-to-animate-specific-corners-of-the-border-radius-when-hovered-in-and-out-f)找到了一个很好的例子，讨论如何为边框的特定角设置动画。但是，似乎我没有得到任何改变。在输入和输出功能中插入警报后，我确认它们已被解雇。但是，对角化的任何更改都不存在。

这与我如何设置 div 的样式有关吗？

```
div.menuItem {
    border-width: 5px 3px;
    border-style: solid;
    border-radius: 25px 45px 25px 45px;
    font: 30px Arial;
    font-weight: bold;
    padding: 15px;
    display: block;
    width: 200px;
    border-color: #00bb00;
    color: #fff;
    background-color:#8822cc;
    -webkit-text-stroke: 1px #000;
} 
```

这是脚本。

```
$('div.menuItem').hover(function () {
            alert("in");
    $(this).animate({
        "MozBorderRadiusTopleft": '50px',
        "MozBorderRadiusTopright": '50px'
    }, 900);
}, function () {
            alert("out");
    $(this).animate({
        "MozBorderRadiusTopleft": '25px',
        "MozBorderRadiusTopright": '25px'
    }, 900);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:39:43.490

您可以简单地使用[CSS 过渡](https://developer.mozilla.org/en/CSS/CSS_transitions/)：

```
div.menuItem {
    border-radius: 25px 45px 25px 45px;
    transition: border-radius .9s;
    /* all other properties... */
}
div.menuItem:hover {
    border-radius: 25px;
} 
```

这是小提琴：http: [//jsfiddle.net/ucVPg/](http://jsfiddle.net/ucVPg/)

**PS**不要忘记供应商前缀。

# mongodb - Mongoid 递归查找嵌入文档

> ID：11622884
> 
> 赞同：6
> 
> 时间：2012-07-24T01:28:59.910
> 
> 标签：mongodb, mongoid

查找递归嵌入文档的最佳方法是什么？

我有以下设置：

组嵌入许多帖子。Post递归地嵌入许多帖子。

给定一个后嵌入对象的 id，是否有一种内置方法可以递归地搜索整个树结构？

我目前的实现本质上是广度优先搜索，但我很好奇 mongodb/mongoid 是否有更高效的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T02:11:32.720

当前的[Mongoid 文档](http://mongoid.org/en/mongoid/docs/relations.html#common)提到这是可能的，并展示了如何做到这一点，请参阅*Recursive Embedding*部分。这仅适用于嵌入式文档。

# iphone - NSDictionary 添加 NULL 键值

> ID：11622886
> 
> 赞同：3
> 
> 时间：2012-07-24T01:29:19.440
> 
> 标签：iphone, ios, nsarray, nsdictionary

所以我正在创建一个 NSDictionary 来提供要使用的方法数据，但是键数组中的一些键值并不总是用值填充。假设我有 18 个键（我有）。我可能只在一次通话中使用 5，但在另一个通话中使用 6，甚至在我的代码中的某些点使用全部 18。

我想知道的是如何将 NULL 值添加到这些键中，以便稍后当我查看键值对时，我可以看到我需要担心哪些键以及我可以忘记哪些键？所以问题是，如果我想在键中添加任何内容/空值，我该如何做到这一点而不会导致错误或认为它是数组 nil 的结尾。

这是我目前所拥有的，但一旦我尝试阅读 NSDicionary，它就会给我一个糟糕的 exe 错误

NSDictionary *sendSeriesDictionary = [[NSDictionary alloc] init];

```
NSArray *keys = [NSArray arrayWithObjects:@"Code", @"MaID", @"MoID", @"SuID",@"SMID",@"Ye",@"KID",@"KBlID",@"KBk",@"CaID",@"Caer",@"Loe",@"Kepe",@"KTGroup",@"Cesc",@"LID",@"IN",@"LaID", nil];

NSArray *objects = [NSArray arrayWithObjects: NULL, manufactureIdString, modelIdString, subModelIdString, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, nil];

sendSeriesDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

只是为了让您知道键名将被更改，这只是为了测试/示例如何执行此操作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T01:34:16.160

该[`NSNull`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)课程就是为此而设计的。您只需要确保将使用该集合的任何内容都会检查`NSNull`值。

```
NSArray *objects = [NSArray arrayWithObjects: [NSNull null], manufactureIdString, modelIdString, subModelIdString, [NSNull null], ..., nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T01:34:17.600

[NSNull](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)是您正在寻找的。

# .net - 间歇性 XmlSerializer（部分）空文件

> ID：11622890
> 
> 赞同：4
> 
> 时间：2012-07-24T01:30:02.097
> 
> 标签：.net, c#-4.0, xml-serialization, streamwriter

我正在使用带有 StreamWriter 的 XmlSerializer，如下所示：

```
...
string xmlFile = GetXMLLocation(objToSaveType);
XmlSerializer Serializer = new XmlSerializer(objToSaveType);
using (StreamWriter sw = new StreamWriter(xmlFile))
    Serializer.Serialize(sw, objToSave);
... 
```

这在绝大多数情况下都有效，但生成的文件很少充满空字符，并且偶尔有问题的文件仅以空字符结尾，例如。

```
...
        <Extension>0</Extension>
      </OrderProductLine>
      <OrderProductLine>
        <ProductDescription />
        <Commission>0.3</Commission>
        <UnitType />
        <UnitPrice>0</UnitPrice>
        <UnitQuantity>0</UnitQuantity>
        <PackageType />
        <Extension>0</Extension>
   [null x ~1 million] 
```

我自己从来没有能够复制它。它在序列化时不会产生任何错误，并且似乎只在程序关闭时发生。

相关问题：

*   [在这里](https://stackoverflow.com/questions/7635519/xmlserializer-saves-null-file)- 明显的修复，作家没有冲洗；我正在使用`using`与 Close() 相同的调用 Dispose()
*   [这里](https://stackoverflow.com/questions/4380424/will-xmlserializer-ever-create-empty-documents)- 最好的答案假设一个错误被遗漏了；我的不会产生错误；空文件和一个用空值填充的文件是不一样的。尽管如此，其中一个答案表明这是一个缓存问题。

如果缓存问题的想法是正确的，我已经修改了我的代码如下：

```
string xmlFile = GetXMLLocation(objToSaveType);
XmlSerializer Serializer = new XmlSerializer(objToSaveType);
using (Stream file = new FileStream(xmlFile, FileMode.Create,
                         FileAccess.Write, FileShare.None,
                         0x1000, FileOptions.WriteThrough))
    using (StreamWriter sw = new StreamWriter(file))
        Serializer.Serialize(sw, objToSave); 
```

我有一些解决方法的想法（主要是在保存后立即反序列化、回滚或在出现问题时重试），但修复该死的东西会很棒。由于它是如此断断续续，我还不知道上面是否修复了它。这篇文章要么是为了告知其他处于类似情况的人可能的修复方法，要么是为了获得其他可能原因的想法。谢谢阅读。（PS First SO post，对不起，如果我破坏了任何协议！）

更新：一个多星期后，该错误尚未再次出现。我的手指交叉，虽然我真的需要大约一个月才能合理确定地知道这是否解决了问题。

更新：两周半后，仍然很好。

希望最终更新：一个多月后，仍然很好。毕竟缓存似乎是个问题，耶！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:21:47.127

我与一位同事讨论了我们为在应用程序中解决此问题所做的工作。

我们在应用程序关闭时保存了一些 xml 数据，看起来有时将文件写入磁盘的线程被应用程序关闭进程杀死。

我们将保存命令从应用程序关闭移到数据更改的时间。这为我们解决了问题。

# screen-scraping - 亚马逊和 HTML AgiltiyPack

> ID：11622891
> 
> 赞同：1
> 
> 时间：2012-07-24T01:30:06.017
> 
> 标签：screen-scraping, amazon, html-agility-pack

似乎我的几乎所有请求都被 500 SERVICE ERROR 击中。

但是我可以通过 Web 浏览器访问该站点。我也通过 HAP 发送 UserAgent。

有没有这方面经验的人知道亚马逊如何检测到 HAP 请求是机器人？

```
 Dim aHtml As New HtmlWeb
    Dim UserAgent1 As String = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11"
    Dim iPadAgent As String = "Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.102011-10-16 20:23:10"
    Dim AndroidAgent As String = "Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13"
    Dim iPhoneAgent As String = "Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_2 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8H7 Safari/6533.18.5"
    Dim ChromeAgent As String = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11"
    aHtml.UserAgent = iPadAgent

    Dim Credentials As New System.Net.NetworkCredential("", "", "")

    Dim proxy As New System.Net.WebProxy

    Dim proxyAddress As New Uri("http://11.11.11.11")
    proxy.Address = proxyAddress

    Dim aDoc As HtmlDocument = aHtml.Load(AmazonURL, "GET")

    Dim aNode As HtmlAgilityPack.HtmlNode
    aNode = aDoc.DocumentNode.SelectSingleNode("//div[@id='olpDivId']/span[2]")

    If aNode.InnerText Is Nothing Then

    End If

    Dim UsedPrice1 As String = aNode.InnerText
    Dim i As Integer = UsedPrice1.IndexOf("$")
    Dim UsedPrice As Integer = UsedPrice1.Substring(i + 1)

    System.Threading.Thread.Sleep(Delay)

    Return UsedPrice 
```

'

WebClient 方法（返回 503）：

```
 Dim filename As String = "amzContent.html"
    Client.Headers("User-Agent") = ChromeAgent
    Client.Proxy = proxy
    Client.Credentials = Credentials
    Client.DownloadFile(AmazonURL, (Server.MapPath("amz//") & _
                  filename))
    Dim aDoc As HtmlDocument = aHtml.Load(Server.MapPath("amz//") & _
                  filename) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:16:13.467

**使用上面的 WebClient 方法，并且发送语言、字符集和接受标头现在似乎可以工作**

# soap - 使用 SAML SOAP 绑定时如何要求用户登录？

> ID：11622892
> 
> 赞同：2
> 
> 时间：2012-07-24T01:30:10.157
> 
> 标签：soap, binding, saml

我正在学习 SAML，关于 SOAP 绑定，我不确定它是如何工作的。

对于重定向绑定和后绑定，很明显 SP 可以通过浏览器与 IdP 对话，然后 IdP 可以在必要时显示登录屏幕。

但是对于 SOAP 绑定，它不需要通过浏览器，SP 可以简单地向 IdP 发送一个包含 SOAP 请求的 HTTP 请求，然后如果 IdP 发现没有有效的用户会话，他如何显示一个用户输入用户名和密码的登录屏幕？

还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:24:42.743

Authentication is out of scope of the SAML spec. However, what SAML Profile are you looking at? Is this for Web SSO or something else? For Web SSO, SOAP is only used with the HTTP artifact binding which means you would either be resolving the AuthnRequest (IDP calling the SP) or retrieving the Response (SP calling IDP). The Artifact is sent either via POST or Redirect while resolution of the message (AuthnRequest or Response) is done via back-channel SOAP. So, the browser (http client) is always involved with Web SSO so it is simple for the IDP to authenticate the user via some browser-friendly technology (username/password HTML form, 2 factor strong auth, x509 certs, etc etc).

You can find an example in the SAML Bindings

```
POST /SamlService HTTP/1.1
Host: www.example.com
Content-Type: text/xml
Content-Length: nnn
SOAPAction: http://www.oasis-open.org/committees/security
<SOAP-ENV:Envelope
xmlns:SOAP-ENV=”http://schemas.xmlsoap.org/soap/envelope/”&gt;
<SOAP-ENV:Body>
<samlp:ArtifactResolve xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
ID="identifier_2"
Version="2.0"
IssueInstant="2004-12-05T09:22:04Z"
Destination="https://idp.example.org/SAML2/ArtifactResolution">
<saml:Issuer>https://sp.example.com/SAML2</saml:Issuer>
<samlp:Artifact>artifact</samlp:Artifact>
</samlp:ArtifactResolve>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

The syntax might not be exact. Just something to give an idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:15:39.597

IdP 如何选择对用户进行身份验证超出了 SAML 的范围。如果您正在寻找一个示例，也许有一个本机应用程序向用户显示一个对话框，要求他进行身份验证。也许 IdP 通过 SMS 网关向您发送一条短信，您必须以某种方式回复短信。天空才是极限。

# html - 样式化 ap 元素

> ID：11622896
> 
> 赞同：-2
> 
> 时间：2012-07-24T01:30:22.880
> 
> 标签：html, css

由于某种原因，我无法获得我的样式

```
nav-content-right-notif-num p 
```

div 申请。我希望数字“4”（或任何文本）居中

```
nav-content-right-notif-num 
```

div（红色圆圈）。但是`<p>`只是继承了不同的样式。我究竟做错了什么？

这是我的来源：

[http://jsfiddle.net/n4sXe/2/](http://jsfiddle.net/n4sXe/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:38:02.350

问题是你`p`的左浮动。因为它是浮动的，所以它不再占据`div`. 文本居中，但它在缩小*的*`p`.

也许你不需要做`p`浮动。

# database - Django：实现类似数据库模型的“准接口”以有效处理多个子类型

> ID：11622903
> 
> 赞同：1
> 
> 时间：2012-07-24T01:31:25.750
> 
> 标签：database, django, database-design

如何模拟以下情况？我已经考虑了一段时间，无法确定一种有效的方法来完成我想做的事情。

我有一个有很多答案的问题课。答案可以有多种类型。

```
class Answer(models.Model):
    question = models.OneToOneField(Question)
    date = models.DateField()

class CharAnswer(Answer):
    data = models.CharField(max_length=256)

class NumberAnswer(Answer):
    data = models.DecimalField(max_digits=10, decimal_places=5)

class TimeAnswer(Answer):
    data = models.TimeField()

class ListAnswer(Answer):
    data = models.CommaSeparatedIntegerField(max_length=256)
    data_type = models.CharField(max_length=64) 
```

我希望能够做类似的事情`Answers.objects.all.values_list('data')`并能够聚合所有异构`data`领域。

如果我以次优的方式做事，我愿意进行全面的重新设计。我找了又找，我认为这不是一件容易完成的事情。我应该将所有答案数据存储在一张表中吗？

# android - 列表视图子项的 onclicklistener

> ID：11622905
> 
> 赞同：2
> 
> 时间：2012-07-24T01:31:46.970
> 
> 标签：android, listview, android-listview, android-event, subitem

我有一个`listview`，lisview 的每个项目都是一个`linearlayout`. 每个线性布局包含 3 个文本视图。

我如何`onclicklistener`为这些文本视图设置一个？

我试过这个：

```
TextView tv=(TextView)findById(R.id.textView1);
tv.setOnClickListener(...); 
```

这给了我一个`nullpointerexception`.

我还为列表视图尝试了 setonitemclickedlistener，但这仅允许我在线性布局上操作，而不是文本视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:00:28.853

如果这是静态需要的并且您的视图是基于 XML 的，这就是我所做的：

```
<TextView
    ...
    android:clickable="true"
    android:onClick="myHandler"
/> 
```

每当触摸/单击文本视图时，都会调用 myHandler 。当您在列表视图中使用它时，您仍然需要在 getView() 中添加一个标签并在 myHandler() 中使用它来确定按下了哪个行/字段。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:02:11.617

要获得此要求，您必须使用自定义适配器类，以便您可以非常轻松地获得此要求。使用自定义适配器是非常`easy and simple`过程。

单击此[链接](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)，它的简单应用程序，并代替`Buttons`您可以使用`TextView`。

祝你今天过得愉快..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:10:25.653

你应该去创建像使用 BaseAdpter 这样的客户适配器，在这里传递你的列表并根据位置设置该列表到 Textview，在这里你可以设置 onClick 事件，你也可以像 ex (1) 一样创建基本适配器

```
public class GridAdpter extends BaseAdapter 
{

List<String> checkednamelist;

public GridAdpter(Context c, List<String> myitem) {

this.checkednamelist =myitem
}

@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

            //Here change with yur row xml file name and  3 textview control id name
    View grid;
    if (convertView == null) {
        grid = layoutInflater.inflate(R.layout.row_grid, null);
    } else {
        grid = convertView;
    }

    TextView textView2 = (TextView) grid.findViewById(R.id.txtlable2);    
    textView.setText(checkednamelist.get(position);
    textView2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            // do here as per your require

        }
    }); 
```

}

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return myitem.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return myitem.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public List<String> mycheckeditem() {
    return checkednamelist;
} 
```

}

// 最后用你的列表视图设置这个适配器

# java - 联系人与我自己的应用程序（如 Skype 或 whatsapp）同步

> ID：11622909
> 
> 赞同：19
> 
> 时间：2012-07-24T01:32:17.543
> 
> 标签：java, android, sync

我正在制作一个类似于 Skype 的 android 应用程序，我想知道如何将 android 联系人与我的应用程序同步，以便在我的应用程序中注册并且也在我的 android 联系人中的数字有一个符号。例如，在您的联系人列表中，您会看到一个 Skype 图标或 whatsapp 图标，其中包含那些在 Skype 或 whats 应用程序中注册的联系人。任何人都可以指导我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T08:39:57.587

请参考 android.provider。`ContactsContract class`. 由于内容非常广泛，建议您先看一下 ContactsContract.RawContact 的 SDK 说明。在那里，您将找到有关联系人基本操作的代码片段的描述。

**另外，看看 Android SDK 代码示例：**

[Android 示例 - ContactOperations](https://github.com/flyskywhy/android-sdk/blob/master/samples/android-8/SampleSyncAdapter/src/com/example/android/samplesync/platform/ContactOperations.java)

# javascript - 我如何在 HTML 中自动更改测验（可能是 jquery？）

> ID：11622910
> 
> 赞同：0
> 
> 时间：2012-07-24T01:32:21.557
> 
> 标签：javascript, jquery, html

抱歉，我的标题太可怕了，因为我想不出如何解释。

基本上，我有一个特定的 DIV，我想在里面放一个小小的“测验”。这是一个测验，会问你几岁？有答案，图像 20-30、30-40、40-50 等。这将是这样的随机问题。但我希望它像，当他们点击一个答案时，它会自动转到下一个问题并询问他们下一个问题，他们在下一个答案中的位置。

我想让它像 5 个问题一样，然后让整个网页在此之后转到一个新页面。

这会是jQuery吗？我已经看到人们在 jquery 中使用手机类型的测验来做这种事情，但我不知道它在 HTML 中甚至被称为什么，或者甚至在谷歌上搜索什么。

如果有人可以为我指明前进的方向，那么您不必为我编写整个代码，而是从某个地方开始以及该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:47:59.353

jQuery /JS 可以解决。

您必须在答案元素上绑定事件，

当他们点击元素时，它会触发一个功能，

在此功能中，您可以根据需要添加、删除、修改页面中的元素。

jquery 有任何你想要的 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:39:28.933

jQuery 是一个简单的 JavaScript 库。它可以帮助操作页面内容（页面的 DOM 结构）。您可以根据需要添加、删除、修改页面中的元素，所以是的，我认为 jQuery 可能适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:22:11.287

查看用户[Faith](https://stackoverflow.com/users/480949/fatih)为回答这个 stackoverflow[问题而制作的这个小测验](https://stackoverflow.com/questions/4464406/creating-a-quiz-with-jquery)[脚本](http://www.fatihacet.com/lab/jQuiz/)。它使用 jQuery、CSS 和 HTML。

[HTML 源代码](http://pastebin.com/vByWz1tE)

[JS 源码](http://pastebin.com/QRjiY6KD)

[CSS 源代码](http://pastebin.com/k38xJb3B)

# java - 如何使用java删除文本文件中的行或行

> ID：11622925
> 
> 赞同：1
> 
> 时间：2012-07-24T01:35:36.863
> 
> 标签：java, delete-row

> **可能重复：**
> [Java - 在文件中查找一行并删除](https://stackoverflow.com/questions/1377279/java-find-a-line-in-a-file-and-remove)

```
ChavezJan2012   SLC   1.25
ChavezFeb2012   SLC   0.25
ChavezMar2012   SLC   1.25 
```

我使用 java 将这些数据写入文本文件，我想从文件的 3 行中删除一行。到目前为止，我仍在尽最大努力寻找使用 arrayList 的解决方案。

```
ChavezJan2012   SLC   1.25
ChavezMar2012   SLC   1.25 
```

删除后的期望结果。请帮忙，谢谢.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:09:08.753

唯一的方法是创建一个临时文件。写入该文件中的所有文本，除了要省略的行。并将该临时文件重命名为旧文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:46:04.240

您可以使用索引 i+3 进行循环，例如：

```
for (int i=0 i < arraylist.size(); i+3){

writeToFile.arraylist.get(i);
writeToFile.arraylist.get(i+2);

} 
```

# java - Android TextView 设置文字和颜色

> ID：11622926
> 
> 赞同：0
> 
> 时间：2012-07-24T01:35:38.373
> 
> 标签：java, android

我想在 onCreate 方法期间随机设置文本的大小和颜色

这是我的代码：

```
private TextView start;
private boolean isClicked;
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    start = (TextView) findViewById(R.id.tvStart);

    isclick = false;
    Random r = new Random();

    while (isclick = false)
    {

        start.setTextSize(r.nextInt(50));
        start.setTextColor(Color.rgb(r.nextInt(256), r.nextInt(256),
                r.nextInt(256)));
    }

} 
```

我的这段代码不起作用。

在 onCreate 期间，我希望文本大小和颜色连续随机变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:37:57.327

它对我有用：（让我知道有问题）

```
private boolean isclick;
Handler handler ; 
private TextView start;
private boolean isClicked;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        start = (TextView) findViewById(R.id.tvStart);
        handler = new Handler();

        isclick = false;
        new Thread(new Runnable() {

            @Override
            public void run() {
                 while (isclick == false)
                    {
                handler.post(new Runnable() {

                    @Override
                    public void run() {
                        Random r = new Random();

                            start.setTextSize(r.nextInt(50));
                            start.setTextColor(Color.rgb(r.nextInt(256), r.nextInt(256),
                                    r.nextInt(256)));

                        }

                    });
                     Log.w("DEBUG","Text View  value : "+ start.getText().toString());

                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                }

            }
        }).start();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:11:24.453

您需要使用处理程序，因为您正在修改 UI 小部件 [，本文](http://www.vogella.com/articles/AndroidPerformance/article.html)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T02:42:50.033

这是一些适用于名为 x 的 TextView 的代码

```
//create random value between 0 and 70
int random = (int)Math.ceil(Math.random()*70);
x.setTextSize((float)random);

int red = (int)Math.ceil(Math.random()*255);
int green = (int)Math.ceil(Math.random()*255);
int blue = (int)Math.ceil(Math.random()*255);

Color randomcolor = new Color();

if (red < 16){
    hexred = "0" + Integer.toHexString(red);
}else {
    hexred = Integer.toHexString(red);
}
if (green < 16){
    hexgreen = "0" + Integer.toHexString(green);
}else {
    hexgreen = Integer.toHexString(green);
}
if (blue < 16){
    hexblue = "0" + Integer.toHexString(blue);
}else {
    hexblue = Integer.toHexString(blue);
}

String color = "#" + hexred + hexgreen + hexblue;

x.setTextColor(randomcolor.parseColor(color)); 
```

但是，不建议继续更改。如果你想让它不断地改变颜色，很可能是颜色和大小的更新会减慢，以至于什么都没有显示。由于对 xml 的计算，也可能会发生整个 XML 布局未加载的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T01:46:38.187

如果您希望您的文本随机不断变化，请使用线程。
把你的“while”动作。内部运行方法，并给它一些延迟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T05:05:54.860

`isclick = false`我认为这是因为if 子句中缺少 = 。应该是`isclick==false`。

# amazon-s3 - 为什么图像确实存在时无法在 S3 上访问。

> ID：11622928
> 
> 赞同：2
> 
> 时间：2012-07-24T01:36:00.630
> 
> 标签：amazon-s3

我们构建了一个将渲染图像上传到 S3 的应用程序。然后我们将所有图片的 URL 返回给第三方，第三方拉下所有渲染的文件。问题是第三方收到错误*无法获取渲染文件*，这意味着我们给他们的 URL 没有返回图像。

如果他们再次尝试使用相同的 URL，一切正常。如果我们尝试通过浏览器加载图像 URL，它就在那里。

我们最初认为它与跨 S3 的传播有关。我们所在地区有文件，但第三方地区还没有图像。所以我们延迟了 10 分钟；这没有帮助。我们可以将其增加到 30 分钟或一个小时，但这会使测试变得更加困难，亚马逊表示只需几秒钟。

关于可能发生什么的任何想法？为什么存在的具有适当权限的图像不会在第三方服务第一次请求时返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:13:01.760

您所说的这个问题没有意义，因为如果客户端使用浏览器或您的第三方下载文件之间没有区别。

我唯一想到的是 url 的构建和通过 https 的访问。

**您可以使用https** ://<bucket-name>.s3.amazonaws.com/<file name>创建对象 url ，您可能会收到以下错误：

**curl: (51) SSL 对等证书或 SSH 远程密钥不正确**

或者使用 Firefox 你得到： ![此连接不受信任](../Images/1225445c00e225623c95f099b172bff6.png)

用户忽略证书错误可以轻松解决此问题，但如果第三方使用 API，则可能会通过使用错误的异常处理来隐藏此问题。

您能否获得有关第三方如何尝试检索此文件的更多信息？

# objective-c - 由于内存损坏，可能涉及 FMDB 的崩溃

> ID：11622934
> 
> 赞同：0
> 
> 时间：2012-07-24T01:36:31.217
> 
> 标签：objective-c, fmdb

我正在 iOS 模拟器上进行测试，涉及与 MapBox iOS SDK 一起分发的 FMDB。这是一个我无法捕捉到的错误，我想知道我是否违反了一些我不知道的 FMDB 规则，或者我在某处有严重的内存损坏（但我已经将问题缩小到几行）。以下代码将运行到注释为“不应该在这里”的行中。注释掉下面标记的任何行都会变成“应该在这里”。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    NSString * sql_gdb = @"/Users/t2wu/Library/Application Support/iPhone Simulator/5.1/Applications/BB193B94-2549-49DB-9BBB-C66D76743515/Library/Application Support/Poki.OfflineSpotty/fremont_spatial.gdb";

    FMDatabase * db = [FMDatabase databaseWithPath:sql_gdb];
    if ([db open]) {
        db.shouldCacheStatements = TRUE; // Correct when this line is commented out

        [self fooDB:db];

        FMResultSet * debug1 = [db executeQuery:@"SELECT id, type, state FROM payloads WHERE id=?", [NSNumber numberWithLong:2]];
        BOOL DOESFIND1 = FALSE;
        while ([debug1 next]) {
            DOESFIND1 = TRUE;
            NSLog(@"Does find."); // Should be here.
        }
        if (DOESFIND1 == FALSE) {
            NSLog(@"Does not find"); // Should not be here.
        }
    }

    return YES;
}

-(void) fooDB: (FMDatabase *)db
{
    NSLog(@"SELECT id, type, state FROM payloads WHERE id=%@", [NSNumber numberWithLong:1]);
    FMResultSet * result = [db executeQuery:@"SELECT id, type, state FROM payloads WHERE id=?", [NSNumber numberWithLong:1]];   // Correct when changed to "SELECT * FROM"  
    while ([result next]) {
        return;  // Correct when this line is commented out.
    }
    return;
} 
```

我已将代码放在 application:didFinishLaunchingWithOptions 中，这样我就可以在任何其他内存被弄乱之前将其作为第一件事运行。（这应该出现在所有观点之前，如果我对此是正确的。）但我不知道问题出在哪里。再次，注释掉两行中的任何一条，上面写着“Correct when”会产生预期的结果。或者用`SELECT *`而不是查询`SELECT id, type, state`也将产生所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:40:18.260

我想评论一下，您编写数据库代码和方法的方式`fooDB`有点难以阅读。

尝试以下操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 [self fooDB];
 return YES;
}

-(BOOL) fooDB
{

   NSString * sql_gdb = @"/Users/t2wu/Library/Application Support/iPhone Simulator/5.1/Applications/BB193B94-2549-49DB-9BBB-C66D76743515/Library/Application Support/Poki.OfflineSpotty/fremont_spatial.gdb";

   FMDatabase * db = [FMDatabase databaseWithPath:sql_gdb];
   if (![db open]) {
      NSLog(@"Could not open DB.");
      return NO;
   }    

   FMResultSet * result = [db executeQuery:@"SELECT id, type, state FROM payloads WHERE id = ?", [NSNumber numberWithLong:1]];   
  while ([result next]) {
      //DO SOMETHING HERE
  }
  [result close];
  [db close];
  return YES;
} 
```

# android - 首先单击更改为新图像，然后单击更改为旧图像，android

> ID：11622935
> 
> 赞同：2
> 
> 时间：2012-07-24T01:36:44.927
> 
> 标签：android

此应用程序要求：第一次单击将 image1 更改为 image2 第二次单击将更改回旧图像（image2 到 image1）

```
image1  = (ImageView)findViewById(R.id.imageView1);
        image1.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                image1.setImageResource(R.drawable.a3_01);
                image1.setTag(70);              
            }
        }); 
```

此图像将设置一个新标签，以便服务器知道该图片已更改。

*我使用的代码仅用于第一次点击，它可以工作。我只是不知道要进行第二次点击事件。谁能给我一个想法？非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T01:42:54.927

您可以使用布尔值作为开关，让您在 if 语句中来回切换。

```
boolean showingFirst = true;
image1  = (ImageView)findViewById(R.id.imageView1);
image1.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        if(showingFirst == true){
            image1.setImageResource(R.drawable.a3_02);
            showingFirst = false;
        }else{
            image1.setImageResource(R.drawable.a3_01);
            image1.setTag(70);
            showingFirst = true;
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:42:16.070

将两个图像放入一个`ImageSwitcher`并使用`Button`点击调用它的`showNext()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T10:02:42.850

你可以使用 if case in it like

```
 public void onClick(View v) {
        if (i == 0) {
            Toast.makeText(getApplicationContext(), "First Click", 1000).show();
            i++;
        } else if (i == 1) {
            Toast.makeText(getApplicationContext(), "Second Click", 1000).show();
            i = 0;
        }
    } 
```

# c - ARM处理器中的数据存储方式

> ID：11622936
> 
> 赞同：1
> 
> 时间：2012-07-24T01:37:06.323
> 
> 标签：c, arm

我是 ARM 实验的新手，我对这个处理器中的数据概念有疑问。我遇到了麻烦。有代码检查定时器间隔：

```
// get the current timer 0 count
unsigned long Timer0_GetTimestamp(void) 
{
 return T0TC;
}

// check to see if a timestamp is in the past
// returns 1 if in the past, 0 if not
int Timer0_TimestampExpiredCk(unsigned long timestamp) 
{
 unsigned long now = T0TC;

if (now > timestamp)
{
 if ((now - timestamp) < 0x80000000)
  return 1;
 else
  return 0;
}
else
{
if ((timestamp - now) >= 0x80000000)
  return 1;
else
  return 0;
}
}

// pause for a specific number of milliseconds
void Timer0_Delay(unsigned long milliseconds) {
 unsigned long timestamp = Timer0_GetTimestamp() + milliseconds;
 while (!Timer0_TimestampExpiredCk(timestamp));
} 
```

我对数字“0x80000000”有疑问。我们应该将此数字视为 2 的补码还是二进制？假设，当两个变量之间的差异为零时，我们改变我们的标志。如果我错了，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:51:43.303

（您的问题与 ARM 无关，这是一个语言问题）。

你希望这个数字是多少？你可以指定它 0x8000000UL 将使它成为无符号长是吗？

顺便说一句，如果您想要 0x80000000 作为无符号长整数，那么您也可以只查看现在时间戳结果的 msbit

```
if((now-timestamp)&0x80000000)
   return 0;
else
   return 1; 
```

那里没有歧义。

或者

```
return (~(now-timestamp))>>31; 
```

如果 unsigned long 是 64 位，则可能需要在结尾加上 &1，如果 unsigned long 是 32 则不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:15:14.617

在 C 中，常数`0x8000000`将表示为`unsigned int`32`int`位或更大的长度。这是因为编译器必须从下面的列表中选择第一个可以表示常量的类型：

*   整数
*   无符号整数
*   长
*   无符号长
*   长长的
*   无符号长长

（[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)第 6.4.4.1 节）

并且 0x80000000 不能表示为 32 位`int`，至少不能用 2 的补码表示。

被比较的两个变量都是无符号整数。在与 0x80000000 的比较中，我看不出任何目的。当然要检查时间戳是否在过去，您只需要进行比较

```
return (now > timeStamp); 
```

如果时间戳在过去，您的代码将返回 true，除非它过去很长，即超过 0x80000000 毫秒。如果时间戳在未来很长一段时间内，它也会返回 true。

顺便问一下，T0TC 是什么？如果它是一个常数，你的计时器将永远不会过期。

# ios - iOS关闭后台线程

> ID：11622937
> 
> 赞同：0
> 
> 时间：2012-07-24T01:37:20.640
> 
> 标签：ios, xcode, multithreading, memory

在我的 ViewController 中，我从互联网上下载了一些 png 文件并将它们添加到 UIImageViews，我将其添加到 UIScrollView。

但是，如果用户按下导航栏中的后退按钮，我注意到后台线程仍在继续下载这些文件。此外，我注意到因此出现了巨大的内存峰值，而且我认为我的对象没有被正确释放。

**当用户在导航栏中按回时，如何关闭所有线程？** xcode 4.2.1，弧

谢谢！

编辑 - 以下是在一个 for 循环

```
NSURL* url = [[NSURL alloc] initWithString:[@"someurl"]];
NSData* imageData = [[NSData alloc]initWithContentsOfURL:url];
UIImage* image = [[UIImage alloc] initWithData:imageData];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = aFrame;
[self.screenshots addSubview:imageView] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:16:29.950

您不应该在视图控制器中进行任何下载。这就是问题的根源。将您的数据移动到模型类中。在那里进行所有下载和数据管理。视图控制器只负责从模型中提取数据并将其提供给视图。视图控制器不负责从网络中获取数据。正如您所发现的，它们随时可能消失。

您不想在每次有人在屏幕之间移动时中止下载然后重新启动它们。您想让模型类知道需要一些数据（因为用户来到了屏幕），然后您希望模型类发布通知（或提供 KVO 更改通知），让视图控制器知道新的数据被读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:33:03.437

您可能需要考虑 NSOperationQueue 并通过添加新的下载操作。NSURLConnection 并添加一个供应你的 NSOperationQueue。您可以一次下载多个源，并在需要时立即取消所有操作。您还可以设置一次下载多少个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T03:00:41.257

试试这个：

在您的 for 循环中，设置一个条件，当您不再需要它们时停止下载：

声明类变量或正确

```
BOOL stopDownloading; 
```

开始下载时将其设置为 false：

```
stopDownloading = NO; 
```

修改您的 for 循环以在您将其设置为 NO 时停止：

```
if (!stopDownloading) {
    NSURL* url = [[NSURL alloc] initWithString:[@"someurl"]];
    NSData* imageData = [[NSData alloc]initWithContentsOfURL:url];
    UIImage* image = [[UIImage alloc] initWithData:imageData];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = aFrame;
    [self.screenshots addSubview:imageView];
} 
```

所以现在，当按下后退按钮时，设置

```
stopDownloading = YES; 
```

它将停止所有进一步的下载，但是由于您的设置，我没有立即看到停止当前正在下载的下载（仅后续下载）的方法。为了解决这个问题，我会创建一个 NSOperationQueue 并为每次下载添加 NSOperations。

或者更简单，使用一些现有的开源解决方案，如[AFNetworking](https://github.com/AFNetworking/AFNetworking/)。特别是这两个：

[AFImageRequestOperation AFHTTPRequestOperation](http://afnetworking.org/Documentation/Classes/AFImageRequestOperation.html) 的子类，用于下载和处理图像。

[UIImageView+AFNetworking](http://afnetworking.org/Documentation/Categories/UIImageView+AFNetworking.html) 添加`UIImageView`从 URL 异步加载远程图像的方法。

# shell - shebang groovy 给出错误

> ID：11622938
> 
> 赞同：0
> 
> 时间：2012-07-24T01:37:36.963
> 
> 标签：shell, groovy

我的 .sh 文件中有以下几行

```
#! /usr/bin/env /Users/myuser/Development/tools/groovy

println "this is a test" 
```

env：/Users/myuser/tools/groovy：权限被拒绝

当我运行命令 /usr/bin/env groovy 时，我没有收到任何错误。任何线索为什么它会发生在 OS X 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T03:11:59.057

该`#!/usr/bin/env`技巧的目的是避免必须指定解释器的完整路径。有关更多信息，请参阅[此问题](https://unix.stackexchange.com/q/29608/10454)（和[我的答案](https://unix.stackexchange.com/a/29620/10454)）。由于您无论如何都指定了完整的绝对路径，因此您不妨使用：

```
#!/Users/myuser/Development/tools/groovy 
```

至于为什么这不起作用，很可能你`groovy`在你的其他地方有一个命令`$PATH`，并且`/usr/bin/env groovy`正在调用另一个副本。

这：

```
type -a groovy 
```

会告诉你哪个`groovy`可执行文件在你的`$PATH`. 还有这个：

```
ls -l /Users/myuser/Development/tools/groovy 
```

应该告诉您为什么会收到“权限被拒绝”错误；该文件很可能是不可执行的。

`#!`另一种可能性：一些系统限制了一条线的长度。我不知道 OSX 是否这样做。如果是这样，您的`groovy`命令的路径可能会被截断。如果这是问题所在，您可能会考虑将`groovy`命令移动或复制到绝对路径较短的目录中。

# html - 可以在电子邮件中显示图像和 youtube 视频吗？

> ID：11622948
> 
> 赞同：0
> 
> 时间：2012-07-24T01:39:07.397
> 
> 标签：html, email

是否可以在电子邮件中显示图像和 youtube 视频？

示例：如果一封电子邮件包含

```
<img src="img.jpg" /> and the youtube <iframe width="560" height="315" src="http://www.youtube.com/embed/2ItZFNegL80" frameborder="0" allowfullscreen></iframe> 
```

它会显示在电子邮件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:48:36.547

如果您使用 GMail，YouTube 链接将在邮件底部自动展开为工作视频。其他客户端可能具有类似的功能，但由于电子邮件客户端不支持 JavaScript、HTML5 视频和 Flash，因此您没有嵌入视频的通用方法。

如果要包含预览图像，可以从视频 URL 为它构建一个 URL。

*   视频：http://www.youtube.com/watch?v=YOUTUBE_ID
*   图片：http://img.youtube.com/vi/YOUTUBE_ID/0.jpg

例如：

*   视频：[http ://www.youtube.com/watch?v=OwFbjJasW3E](http://www.youtube.com/watch?v=OwFbjJasW3E)
*   图片：http: [//img.youtube.com/vi/OwFbjJasW3E/0.jpg](http://img.youtube.com/vi/OwFbjJasW3E/0.jpg)

# objective-c - MPMoviePlayer 在应用程序中不起作用

> ID：11622950
> 
> 赞同：0
> 
> 时间：2012-07-24T01:39:14.087
> 
> 标签：objective-c, xcode, storyboard, mpmovieplayercontroller, nsbundle

我正在尝试使用我的视频创建一个应用程序，以便在带有 UIButton 的视图中播放。仅供参考：我正在使用带有标签栏视图控制器的情节提要，因此此代码 MPMoviePlayerView 位于另一个视图中。

我不断收到此错误：*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSURL initFileURLWithPath:]: nil string parameter”

这是我的代码：

**VideoTefViewController.h**

```
#import <UIKit/UIKit.h>

@interface VideoTefViewController : UIViewController

-(IBAction)playMovie;
@end 
```

**VideoTefViewController.m**

```
#import "VideoTefViewController.h"
#import <MediaPlayer/MediaPlayer.h>
@interface VideoTefViewController ()

@end

@implementation VideoTefViewController

-(IBAction)playMovie {

    NSBundle *bundle = [NSBundle mainBundle];
    NSString *moviePath = [bundle pathForResource:@"tef" ofType:@"mp4"];
    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
    MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    theMovie.scalingMode = MPMovieScalingModeAspectFill;
    [theMovie play];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:12:50.003

该错误告诉您 fileURLWithPath: 的参数为 nil，因此由于某种原因 moviePath 为 nil。你确定你的包中有一个名为 tef.mp4 的文件吗？

# email - 除了“主题”文本之外，还有其他方法可以将电子邮件联系在一起吗？

> ID：11622951
> 
> 赞同：0
> 
> 时间：2012-07-24T01:39:19.103
> 
> 标签：email, gmail, yahoo-api, gmail-imap, gmail-pop

我想以编程方式将电子邮件“线程”联系在一起，特别是 gmail 和雅虎电子邮件“对话”。有没有办法做到这一点（电子邮件中包含某种链接或指针或“线程 ID”），还是我坚持依赖电子邮件发送者不更改“主题”行中的文本？

此外，这个技巧根本不起作用，因为许多不相关的线程可能具有相同的主题（例如“[无主题]”等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:04:14.937

是的。电子邮件包含一个标题（消息 ID），它是该电子邮件的唯一标识符。它本身并没有传达任何意义，而是另一个标头（in-reply-to），它指的是它要回复的电子邮件的消息 ID。几乎每个电子邮件客户端都可以使用这些来完成工作，并被许多人用来提供您所指的线程。

此外，您可以使用主题加相对时间来允许相对排序。

维基百科有一篇很棒的文章讨论了这些问题，并将您链接到相关的 RFC： [http ://en.wikipedia.org/wiki/Email#Message_format](http://en.wikipedia.org/wiki/Email#Message_format)

# r - 如何正确指定用于 optim() 或其他优化器的梯度函数

> ID：11622956
> 
> 赞同：16
> 
> 时间：2012-07-24T01:39:46.940
> 
> 标签：r, optimization

我有一个该`Nelder-Mead`方法可以解决的优化问题，但我也想使用`BFGS`Newton-Raphson 或采用梯度函数的方法来解决该问题，以获得更快的速度，并希望得到更精确的估计。`optim`我在/`optimx`文档中的示例之后（我认为）编写了这样一个渐变函数，但是当我将它与`BFGS`我的起始值一起使用时，要么不要移动（`optim()`），要么函数完全不运行（`optimx()`返回`Error: Gradient function might be wrong - check it!`）。很抱歉，复制此内容涉及一些代码，但这里有：

这是我想要获得参数估计的函数（这是为了平滑老年死亡率，其中 x 是年龄，从 80 岁开始）：

```
 KannistoMu <- function(pars, x = .5:30.5){
      a <- pars["a"]
      b <- pars["b"]
      (a * exp(b * x)) / (1 + a * exp(b * x))
    } 
```

这是一个对数似然函数，用于根据观察到的比率（定义为死亡、`.Dx`过度暴露、`.Exp`）来估计它：

```
 KannistoLik1 <- function(pars, .Dx, .Exp, .x. = .5:30.5){
      mu <- KannistoMu(exp(pars), x = .x.)
      # take negative and minimize it (default optimizer behavior)
      -sum(.Dx * log(mu) - .Exp * mu, na.rm = TRUE) 
    } 
```

你看`exp(pars)`那里是因为我给`log(pars)`优化了，为了约束最终`a`和`b`积极。

示例数据（1962 年日本女性，如果有人好奇的话）：

```
 .Dx <- structure(c(10036.12, 9629.12, 8810.11, 8556.1, 7593.1, 6975.08, 
      6045.08, 4980.06, 4246.06, 3334.04, 2416.03, 1676.02, 1327.02, 
      980.02, 709, 432, 350, 217, 134, 56, 24, 21, 10, 8, 3, 1, 2, 
      1, 0, 0, 0), .Names = c("80", "81", "82", "83", "84", "85", "86", 
      "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", 
      "98", "99", "100", "101", "102", "103", "104", "105", "106", 
      "107", "108", "109", "110"))
    .Exp <- structure(c(85476.0333333333, 74002.0866666667, 63027.5183333333, 
      53756.8983333333, 44270.9, 36749.85, 29024.9333333333, 21811.07, 
      16912.315, 11917.9583333333, 7899.33833333333, 5417.67, 3743.67833333333, 
      2722.435, 1758.95, 1043.985, 705.49, 443.818333333333, 223.828333333333, 
      93.8233333333333, 53.1566666666667, 27.3333333333333, 16.1666666666667, 
      10.5, 4.33333333333333, 3.16666666666667, 3, 2.16666666666667, 
      1.5, 0, 1), .Names = c("80", "81", "82", "83", "84", "85", "86", 
      "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", 
      "98", "99", "100", "101", "102", "103", "104", "105", "106", 
      "107", "108", "109", "110")) 
```

以下适用于该`Nelder-Mead`方法：

```
 NMab <- optim(log(c(a = .1, b = .1)), 
      fn = KannistoLik1, method = "Nelder-Mead",
      .Dx = .Dx, .Exp = .Exp)
    exp(NMab$par) 
    # these are reasonable estimates
       a         b 
    0.1243144 0.1163926 
```

这是我想出的渐变函数：

```
 Kannisto.gr <- function(pars, .Dx, .Exp, x = .5:30.5){
      a <- exp(pars["a"])
      b <- exp(pars["b"])
      d.a <- (a * exp(b * x) * .Exp + (-a * exp(b * x) - 1) * .Dx) /
        (a ^ 3 * exp(2 * b * x) + 2 * a ^ 2 * exp(b * x) + a)
      d.b <- (a * x * exp(b * x) * .Exp + (-a * x * exp(b * x) - x) * .Dx) /
        (a ^ 2 * exp(2 * b * x) + 2 * a * exp(b * x) + 1)
      -colSums(cbind(a = d.a, b = d.b), na.rm = TRUE)
    } 
```

输出是一个长度为 2 的向量，它是关于参数`a`和的变化`b`。通过利用 的输出，我也得到了一个更丑陋的版本`deriv()`，它返回相同的答案，并且我没有发布（只是为了确认导数是正确的）。

如果我`optim()`按如下方式提供它，`BFGS`作为方法，估计值不会从起始值移动：

```
 BFGSab <- optim(log(c(a = .1, b = .1)), 
      fn = KannistoLik1, gr = Kannisto.gr, method = "BFGS",
      .Dx = .Dx, .Exp = .Exp)
    # estimates do not change from starting values:
    exp(BFGSab$par) 
      a   b 
    0.1 0.1 
```

当我查看`$counts`输出的元素时，它说它`KannistoLik1()`被调用了 31 次，而`Kannisto.gr()`只有 1 次。`$convergence`是`0`，所以我猜它认为它收敛了（如果我给出不太合理的开始，它们也会保持不变）。我降低了容忍度等，没有任何变化。当我尝试相同的调用`optimx()`（未显示）时，我收到上面提到的警告，并且没有返回任何对象。`gr = Kannisto.gr`使用`"CG"`. _ 使用该`"L-BFGS-B"`方法，我得到了与估计相同的起始值，但据报道，函数和梯度都被调用了 21 次，并且有一条错误消息： `"ERROR: BNORMAL_TERMINATION_IN_LNSRCH"`

我希望梯度函数的编写方式有一些小细节可以解决这个问题，因为后面的警告和`optimx`行为直言不讳地暗示该函数根本不正确（我认为）。我还尝试了包中的`maxNR()`最大化`maxLik`器并观察到类似的行为（起始值不移动）。谁能给我指点？非常感谢

[编辑] @Vincent 建议我与数值近似的输出进行比较：

```
 library(numDeriv)
    grad( function(u) KannistoLik1( c(a=u[1], b=u[2]), .Dx, .Exp ), log(c(.1,.1)) )
    [1] -14477.40  -7458.34
    Kannisto.gr(log(c(a=.1,b=.1)), .Dx, .Exp)
     a        b 
    144774.0  74583.4 
```

如此不同的符号，并且相差 10 倍？我更改渐变功能以效仿：

```
 Kannisto.gr2 <- function(pars, .Dx, .Exp, x = .5:30.5){
      a <- exp(pars["a"])
      b <- exp(pars["b"])
      d.a <- (a * exp(b * x) * .Exp + (-a * exp(b * x) - 1) * .Dx) /
        (a ^ 3 * exp(2 * b * x) + 2 * a ^ 2 * exp(b * x) + a)
      d.b <- (a * x * exp(b * x) * .Exp + (-a * x * exp(b * x) - x) * .Dx) /
        (a ^ 2 * exp(2 * b * x) + 2 * a * exp(b * x) + 1)
      colSums(cbind(a=d.a,b=d.b), na.rm = TRUE) / 10
    }
    Kannisto.gr2(log(c(a=.1,b=.1)), .Dx, .Exp)
    # same as numerical:
      a         b 
    -14477.40  -7458.34 
```

在优化器中尝试：

```
 BFGSab <- optim(log(c(a = .1, b = .1)), 
      fn = KannistoLik1, gr = Kannisto.gr2, method = "BFGS",
      .Dx = .Dx, .Exp = .Exp)
    # not reasonable results:
    exp(BFGSab$par) 
      a   b 
    Inf Inf 
    # and in fact, when not exp()'d, they look oddly familiar:
    BFGSab$par
      a         b 
    -14477.40  -7458.34 
```

按照文森特的回答，我重新调整了梯度函数，并使用`abs()`而不是`exp()`保持参数为正。最新的、性能更好的目标函数和梯度函数：

```
 KannistoLik2 <- function(pars, .Dx, .Exp, .x. = .5:30.5){
      mu <- KannistoMu.c(abs(pars), x = .x.)
      # take negative and minimize it (default optimizer behavior)
      -sum(.Dx * log(mu) - .Exp * mu, na.rm = TRUE) 
    }

    # gradient, to be down-scaled in `optim()` call
    Kannisto.gr3 <- function(pars, .Dx, .Exp, x = .5:30.5){
      a <- abs(pars["a"])
      b <- abs(pars["b"])
      d.a <- (a * exp(b * x) * .Exp + (-a * exp(b * x) - 1) * .Dx) /
        (a ^ 3 * exp(2 * b * x) + 2 * a ^ 2 * exp(b * x) + a)
      d.b <- (a * x * exp(b * x) * .Exp + (-a * x * exp(b * x) - x) * .Dx) /
        (a ^ 2 * exp(2 * b * x) + 2 * a * exp(b * x) + 1)
      colSums(cbind(a = d.a, b = d.b), na.rm = TRUE) 
    }

    # try it out:
    BFGSab2 <- optim(
      c(a = .1, b = .1), 
      fn = KannistoLik2, 
      gr = function(...) Kannisto.gr3(...) * 1e-7, 
      method = "BFGS",
      .Dx = .Dx, .Exp = .Exp
    )
    # reasonable:
    BFGSab2$par
            a         b 
    0.1243249 0.1163924 

    # better:
    KannistoLik2(exp(NMab1$par),.Dx = .Dx, .Exp = .Exp) > KannistoLik2(BFGSab2$par,.Dx = .Dx, .Exp = .Exp)
    [1] TRUE 
```

这个问题的解决速度比我预期的要快得多，而且我学到了不止几个技巧。谢谢文森特！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T02:41:45.037

To check if the gradient is correct, you can compare it with a numeric approximation:

```
library(numDeriv); 
grad( function(u) KannistoLik1( c(a=u[1], b=u[2]), .Dx, .Exp ), c(1,1) ); 
Kannisto.gr(c(a=1,b=1), .Dx, .Exp) 
```

The signs are wrong: the algorithm does not see any improvement when it moves in this direction, and therefore does not move.

You can use some computer algebra system (here, Maxima) to do the computations for you:

```
display2d: false;
f(a,b,x) := a * exp(b*x) / ( 1 + a * exp(b*x) );
l(a,b,d,e,x) := - d * log(f(a,b,x)) + e * f(a,b,x);
factor(diff(l(exp(a),exp(b),d,e,x),a));
factor(diff(l(exp(a),exp(b),d,e,x),b)); 
```

I just copy and paste the result into R:

```
f_gradient <- function(u, .Dx, .Exp, .x.=.5:30.5) {
  a <- u[1]
  b <- u[1]
  x <- .x.
  d <- .Dx
  e <- .Exp
  c(
    sum( (e*exp(exp(b)*x+a)-d*exp(exp(b)*x+a)-d)/(exp(exp(b)*x+a)+1)^2 ),
    sum( exp(b)*x*(e*exp(exp(b)*x+a)-d*exp(exp(b)*x+a)-d)/(exp(exp(b)*x+a)+1)^2 )
  )  
}

library(numDeriv)
grad( function(u) KannistoLik1( c(a=u[1], b=u[2]), .Dx, .Exp ), c(1,1) )
f_gradient(c(a=1,b=1), .Dx, .Exp)  # Identical 
```

If you blindly put the gradient in the optimization, there is a numeric instability problem: the solution given is `(Inf,Inf)`... To prevent it, you can rescale the gradient (a better workaround would be to use a less explosive transformation than the exponential, to ensure that the parameters remain positive).

```
BFGSab <- optim(
  log(c(a = .1, b = .1)), 
  fn = KannistoLik1, 
  gr = function(...) f_gradient(...) * 1e-3, 
  method = "BFGS",
  .Dx = .Dx, .Exp = .Exp
)
exp(BFGSab$par) # Less precise than Nelder-Mead 
```

# actionscript-3 - 如何从类 AS3 调用函数

> ID：11622958
> 
> 赞同：0
> 
> 时间：2012-07-24T01:40:54.567
> 
> 标签：actionscript-3

我正在学习成为一名游戏设计师，现在我的 Flash 游戏遇到了一些问题。

游戏有一个 Counter 类，其 Score 类扩展了 Counter。它被添加到我的 PlayScreenA 类的舞台上。

计时器以数字开始，每 24 帧减少一次。但在我的英雄课中，我可以捡起一些硬币，这些硬币会增加我的分数时间。

问题是：如何在我的 Hero 类中执行 Counter 类中的 addToValue 函数？

代码片段：在 PlayScreenA 类中创建我的分数：

```
 private var myTime:Score = new Score();
    private function create_time (){

        myTime.x = 800;
        myTime.y = 50;          
        addChild(myTime);
    } 
```

计数器类：

```
package 
{
import flash.display.MovieClip;
public class Counter extends MovieClip
{
    public var currentValue:Number;

    public function Counter()
    {
        reset();
    }

    public function addToValue( amountToAdd:Number ):void
    {
        currentValue = currentValue + amountToAdd;
        updateDisplay();
    }

    public function subToValue( amountToSub:Number ):void
    {
        currentValue = currentValue - amountToSub;
        updateDisplay();
    }

    public function reset():void
    {
        currentValue = 20;
        updateDisplay();
    }

    public function updateDisplay():void
    {

    }
}
} 
```

分数等级：

```
package 
{
import flash.text.TextField;
import flash.events.Event;
public class Score extends Counter
{
    protected var _timeCounter:int;     

    public function Score()
    {
        super();
        addEventListener(Event.ENTER_FRAME, onUpdate);
    }
    override public function updateDisplay():void
    {
        super.updateDisplay();
        scoreDisplay.text = currentValue.toString();
    }
    protected function onUpdate(e:Event):void
    {
        _timeCounter++;
        trace(currentValue);

        if (_timeCounter == 24)
        {
            this.subToValue( 1 );
            _timeCounter = 0;
        }           
    }
}
} 
```

我需要调用函数的英雄类的一部分：

```
for(var i:int; i<collisionList.length;i++)
        {
            var $collision:platform_tile = collisionList[i];

            if($hasCollided = hitbox.hitTestObject($collision.hitBox) && $collision.alpha<0.8 && $collision.alpha>0.6)
            {
                $collision.alpha=0;
                $collision.visible = false;
                //Here is where I want to call my subToValue                                        function!
                break;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:21:15.937

因为`addToValue`and`subToValue`是实例方法，你应该在你的 hero 对象中提供一个对 counter 对象的引用（一个实例变量），然后调用它的`addToValue`or`subToValue`方法。

```
var theCounter:Counter; 
```

你应该在你的英雄对象中启动它，或者通过 getter/setter 分配一个预先存在的计数器对象。然后你可以打电话：

```
theCounter.addToValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:16:12.497

我假设您正在尝试访问最初在 PlayerScreenA 类中创建的 Score 类的对象...

如果是这种情况，那么您要么派生两个类之间的关系以传递此对象，要么您可以保持一个静态类在全局级别跟踪函数......

```
public class AppRefrences
{
    public static var addToValueFunc:Function;    
} 
```

在玩家 A 类中，

```
 private var myTime:Score = new Score();
    private function create_time (){

        myTime.x = 800;
        myTime.y = 50;          
        addChild(myTime);

        // This is where you set the function
        Apprefrences.addToValueFunc = myTime.addToValue;
    } 
```

在英雄班，

```
for(var i:int; i<collisionList.length;i++)
        {
            var $collision:platform_tile = collisionList[i];

            if($hasCollided = hitbox.hitTestObject($collision.hitBox) && $collision.alpha<0.8 && $collision.alpha>0.6)
            {
                $collision.alpha=0;
                $collision.visible = false;

                // This is where you call the function
                if(AppRefrences.addToValueFunc != null) 
                AppRefrences.addToValueFunc(0); 

                break;
            } 
```

尝试使用 getter & setter 来控制静态变量的更新。为了清楚起见，我没有包括它。

# sql - 轨道范围和连接

> ID：11622959
> 
> 赞同：9
> 
> 时间：2012-07-24T01:41:07.927
> 
> 标签：sql, ruby-on-rails, activerecord

我已经尝试了所有我认为可以解决这个问题的方法，但一无所获。

在 rails 3 中，我需要找到所有车内装有 cd 播放器的用户。一辆车有一个用户和一个收音机，一个用户属于一辆车，一个收音机有很多车。

我对如何通过用户模型中的范围执行此搜索感到困惑。

```
class User  
  belongs_to :car

class Car  
  belongs_to radio
  has_one :user, :dependent => destroy

class Radio  
  has_many :cars 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-24T02:04:28.570

我假设您的意思是： Car has `radio_id`， User has `car_id`，因为收音机有很多汽车，而汽车有一个用户。具有外键的表始终位于关系的 belongs_to 端。

在不真正了解您正在寻找的结构的情况下，类似以下的内容应该可以工作：

```
scope :with_cd_player, joins(:cars).where('cars.radio_id is not null') 
```

如果收音机上有一个类别列，则以下内容将起作用。

```
scope :with_cd_player, joins(:car => :radio).where('cars.radio_id is not null').where("radios.category = 'cd_player'") 
```

对于 Rails 版本 >= 4：

```
scope :with_cd_player, -> { joins(:cars).where.not(cars: { radio_id: nil }) } 
```

# jquery - 重新启动一个 jQuery 函数。点击

> ID：11622960
> 
> 赞同：0
> 
> 时间：2012-07-24T01:41:46.957
> 
> 标签：jquery, function, restart

我正在编写一个自动“键入”一段文本的 jQuery 程序。我试图让用户重新启动功能“清除文本并重新启动功能”我不知道该怎么做。这是代码：

```
var char = 0;
var caption = "";
var standby

// initiate the Cursor

$(document).ready(function() {
    setInterval ( "cursorAnimation()", 600);
});

// initiate the Text

$(document).ready(function() {
    $('#abouttext').aboutText();
});

// The typing animation

function aboutText() {
    $('#abouttext').html(caption.substr(0, captionLength++));
    if(captionLength < caption.length+1){
        setTimeout("type()",50);
    }else{
        captionLength = 0;
        caption = "";
    }
}

// The Restart Button

function restart() {
    $('#restartbtn').click(function () {
        var typing = $('#abouttext');
    }
        typing.stop();

// The cursor animation

function cursorAnimation() {
    $('.cursor').animate({
        opacity : 0
    }, "fast", "swing").animate({
        opacity : 1
    }, "fast", "swing");
} 
```

我猜你必须用 stop(); 停止函数。然后重新启动整个事情。但我不知道该怎么做。任何帮助都是极好的。-谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:34:51.627

好吧，因为您使用的是间隔，所以将该间隔保存到更全局范围的变量中：

```
var typeThings = setInverval(function() { 'your func here' }, 50); 
```

这样，在该重新启动按钮上单击您可以：

```
clearInterval(typeThings); // stop the typing
$('#abouttext').html(''); // clear original text
callYourOriginalFunction(); // call the function again 
```

希望能有所帮助！

# mysql - 完整的数据库完整性（5 倍更多的表）与在 rdbms 中模仿 oo 概念

> ID：11622961
> 
> 赞同：2
> 
> 时间：2012-07-24T01:41:50.493
> 
> 标签：mysql, rdbms

所以我有这个噩梦（RDBMS）。我在这里问了很多问题，但没有一个得到回答，关于在 rdbms 中模仿 oo 概念......

许多网站（论坛、社交网络等）对发布的内容都有很多功能。
他们可以有评论，喜欢，分享，明星等......

假设可以有几种类型的帖子（普通帖子、评论、照片、问题）并且某些类型的帖子不能具有所有功能（比如我们只说星星和评论），很难决定走哪条路...

我可以去 ：

*   在 oo 路上，通过为每个帖子创建一个实体 id 和实体类型（这个实体 id 将在每个帖子表中引用，并且该功能也将引用实体 id）。还需要实体类型来制作一些完整性触发器，例如评论实体可以具有类似功能但不具有评论功能。如果需要为帖子添加更多功能（需要添加一些新的实体类型），此实体类型字段将是一场噩梦。而这对于数据完整性来说简直是一团糟。

*   或在 5 倍以上的数据库表上。我的意思是为每种类型的帖子表设计功能表。这将需要更多的连接，更长的查询，但至少我知道我不会遇到数据完整性或可伸缩性的问题。

我必须使用 rdbms ，不能采用 oodbms 方式或 graph db 方式。

你会从这两种设计中选择什么？或者你会如何更好地设计它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T22:41:00.870

> 你会从这两种设计中选择什么？或者你会如何更好地设计它？

专注于应用程序语言中的 OO。RDBMS 不适合 OO 概念。相反，使用 NULL 等，而不是尝试发明子类表。

（好吧，也许我的回答很蹩脚。但它让这个老歌脱离了“未回答”）

# php - PHP 仅从数组中的一个键中获取值

> ID：11622966
> 
> 赞同：1
> 
> 时间：2012-07-24T01:42:28.830
> 
> 标签：php, arrays, multidimensional-array

嘿伙计们，所以我有一个像

```
Array ( 
  [more] => 1 
  [routingTable] => Array ( 
    [0] => Array ( 
      [ip] =>fcca:948b:3c04:f481:e678:8539:a57e:197a 
      [link] => 90731030 
      [path] => 0000.0000.271a.c907 
      [isDct] => 1 
    ) 
    [1] => Array (
      [ip] => fc1c:fc12:2735:0c17:c864:5273:c66e:558f 
      [link] => 74624930 
      [path] => 0000.0000.006e.c907 
      [isDct] => 1 
    ) 
    [2] => Array ( 
      [ip] => fcf3:2015:05f7:e2d8:39e8:51ca:1cd5:b29b 
      [link] => 188709805 
      [path] => 0000.0000.2ab6.c387 
      [isDct] => 1 
    ) 
    [3] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 7331630 [path] => 0000.001c.4fca.4387 [isDct] => 1 ) [4] => Array ( [ip] => fc99:02f4:7795:c86c:36bd:63ae:cf49:d459 [link] => 188709805 [path] => 0000.0000.0006.4387 [isDct] => 1 ) [5] => Array ( [ip] => fcf3:ca3a:d5a9:3552:7e71:afa7:e87c:f1ce [link] => 188709805 [path] => 0000.0000.0006.c387 [isDct] => 1 ) [6] => Array ( [ip] => fc93:e5b5:7cde:7983:f50c:fe31:106b:1f88 [link] => 87509810 [path] => 0000.0000.004e.c387 [isDct] => 1 ) [7] => Array ( [ip] => fcd4:1dc1:cc08:c97d:85e2:6cad:eab8:0864 [link] => 188709805 [path] => 0000.0000.0056.c387 [isDct] => 1 ) [8] => Array ( [ip] => fce8:78b3:fa72:84a6:f737:e85f:7525:46a3 [link] => 188709805 [path] => 0000.0000.0076.c387 [isDct] => 1 ) [9] => Array ( [ip] => fc19:e2db:7977:6d2c:15ce:4363:19cc:6bd6 [link] => 127238194 [path] => 0000.0000.01e1.0387 [isDct] => 1 ) [10] => Array ( [ip] => fc1b:7538:824d:ccf2:f5da:96eb:a04a:f6e4 [link] => 188709805 [path] => 0000.0000.036a.4387 [isDct] => 1 ) [11] => Array ( [ip] => fc1f:8b91:f3e8:73b9:c46f:ed52:d09f:1c81 [link] => 188709805 [path] => 0000.0000.029a.4387 [isDct] => 1 ) [12] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 188709805 [path] => 0000.0000.0000.4607 [isDct] => 1 ) [13] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 279709270 [path] => 0000.0000.0000.43c3 [isDct] => 1 ) [14] => Array ( [ip] => fcc7:3fc5:d3f2:f66e:ec97:25e3:4a3d:948c [link] => 188709805 [path] => 0000.0000.0000.4387 [isDct] => 1 ) [15] => Array ( [ip] => fcca:948b:3c04:f481:e678:8539:a57e:197a [link] => 278098660 [path] => 0000.0138.cfe9.c383 [isDct] => 1 ) [16] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 9158 [path] => 0000.0000.02f8.c087 [isDct] => 1 ) [17] => Array ( [ip] => fc3a:956e:4b69:1c1e:5ebc:11a5:3e71:3e7e [link] => 0 [path] => 0000.0000.0348.c087 [isDct] => 1 ) [18] => Array ( [ip] => fc93:e5b5:7cde:7983:f50c:fe31:106b:1f88 [link] => 107374000 [path] => 0000.0000.02ad.8087 [isDct] => 1 ) [19] => Array ( [ip] => fc76:582b:9762:fcb6:1459:9564:f934:e02d [link] => 177703971 [path] => 0000.0095.8ea9.c4c7 [isDct] => 1 ) [20] => Array ( [ip] => fc41:bcf4:4c13:5cc6:d96d:aadc:74c2:df2a [link] => 177703970 [path] => 0000.008b.8ea9.c4c7 [isDct] => 1 ) [21] => Array ( [ip] => fce9:df87:2170:6a3d:e0d4:67a5:c82d:1bc0 [link] => 177703970 [path] => 0000.008d.0ea9.c4c7 [isDct] => 1 ) [22] => Array ( [ip] => fc56:926d:c133:bc89:e6eb:640c:aa4e:0cb2 [link] => 774372 [path] => 0000.0092.0ea9.c4c7 [isDct] => 1 ) [23] => Array ( [ip] => fcd9:c8a0:c35c:ba2e:e3de:b497:8706:2aab [link] => 99320952 [path] => 0000.008e.0ea9.c4c7 [isDct] => 1 ) [24] => Array ( [ip] => fcac:541e:9c5c:9ddc:f648:962a:2892:e33e [link] => 0 [path] => 0000.0086.8ea9.c4c7 [isDct] => 1 ) [25] => Array ( [ip] => fcd4:1dc1:cc08:c97d:85e2:6cad:eab8:0864 [link] => 188709805 [path] => 0000.0083.8ea9.c4c7 [isDct] => 1 ) [26] => Array ( [ip] => fc36:4345:785d:cbe6:fc6d:5d61:507a:d721 [link] => 25769760 [path] => 0000.008f.0ea9.c4c7 [isDct] => 1 ) [27] => Array ( [ip] => fca5:372b:57be:78aa:e490:6b0f:da2a:c882 [link] => 43486470 [path] => 0000.0094.0ea9.c4c7 [isDct] => 1 ) [28] => Array ( [ip] => fc73:81dc:9b2e:3095:cd37:0214:114e:d27f [link] => 0 [path] => 0000.049c.46a4.8047 [isDct] => 1 ) [29] => Array ( [ip] => fc30:5b55:a53d:c456:3c3d:da26:4759:3cbc [link] => 132321905 [path] => 0000.0091.0ea9.c4c7 [isDct] => 1 ) [30] => Array ( [ip] => fccf:3418:31dd:4126:c23a:1d73:4a2c:15e5 [link] => 774372 [path] => 0000.0097.0ea9.c4c7 [isDct] => 1 ) [31] => Array ( [ip] => fc05:2d70:2146:9298:73b9:14fb:d7a9:633a [link] => 257697600 [path] => 0000.0000.0007.4483 [isDct] => 1 ) [32] => Array ( [ip] => fcf3:2015:05f7:e2d8:39e8:51ca:1cd5:b29b [link] => 257697600 [path] => 0000.0000.026b.4483 [isDct] => 1 ) [33] => Array ( [ip] => fcd6:b2a5:e3cc:d78d:fc69:a90f:4bf7:4a02 [link] => 264676910 [path] => 0000.0000.0006.c483 [isDct] => 1 ) [34] => Array ( [ip] => fccc:3ddb:f184:ee46:ae1a:f2a4:4f79:1ee7 [link] => 34930104 [path] => 0000.0000.02fa.c483 [isDct] => 1 ) [35] => Array ( [ip] => fc98:82c4:0fca:f53e:2132:426a:c879:083c [link] => 159987260 [path] => 0000.0000.039a.c483 [isDct] => 1 ) [36] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 7046418 [path] => 0000.0000.038a.c483 [isDct] => 1 ) [37] => Array ( [ip] => fce8:78b3:fa72:84a6:f737:e85f:7525:46a3 [link] => 221190440 [path] => 0000.0000.02ca.c483 [isDct] => 1 ) [38] => Array ( [ip] => fcc7:3fc5:d3f2:f66e:ec97:25e3:4a3d:948c [link] => 190857286 [path] => 0000.0000.02ea.c483 [isDct] => 1 ) [39] => Array ( [ip] => fc5d:baa5:61fc:6ffd:9554:67f0:e290:7535 [link] => 190857285 [path] => 0000.0000.021a.c483 [isDct] => 1 ) [40] => Array ( [ip] => fcd9:c8a0:c35c:ba2e:e3de:b497:8706:2aab [link] => 190857285 [path] => 0000.0000.03ca.c483 [isDct] => 1 ) [41] => Array ( [ip] => fcd4:1dc1:cc08:c97d:85e2:6cad:eab8:0864 [link] => 264676910 [path] => 0000.0000.027a.c483 [isDct] => 1 ) [42] => Array ( [ip] => fc38:4c2c:1a8f:3981:f2e7:c2b9:6870:6e84 [link] => 4294960 [path] => 0000.0002.aa0b.c007 [isDct] => 1 ) [43] => Array ( [ip] => fcd9:6fcc:642c:c70d:5ff2:63c3:8ead:c9ad [link] => 0 [path] => 0000.0000.0c7b.c007 [isDct] => 1 ) [44] => Array ( [ip] => fc5b:0934:7fce:3885:7fe7:ab23:8743:3e14 [link] => 124285405 [path] => 0000.001a.df21.8047 [isDct] => 1 ) [45] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 147102381 [path] => 0000.0000.30be.c907 [isDct] => 1 ) [46] => Array ( [ip] => fcf3:2015:05f7:e2d8:39e8:51ca:1cd5:b29b [link] => 32212200 [path] => 0000.0154.a496.c387 [isDct] => 1 ) [47] => Array ( [ip] => fc97:d627:b1b6:3021:7b55:1ea3:1b3b:75a5 [link] => 188709805 [path] => 0000.0000.02eb.c007 [isDct] => 1 ) [48] => Array ( [ip] => fccc:3ddb:f184:ee46:ae1a:f2a4:4f79:1ee7 [link] => 26843500 [path] => 0000.0000.0329.8007 [isDct] => 1 ) [49] => Array ( [ip] => fcca:948b:3c04:f481:e678:8539:a57e:197a [link] => 188709805 [path] => 0000.0000.03e9.8007 [isDct] => 1 ) [50] => Array ( [ip] => fce1:b388:04e8:c4ff:654a:3e62:2c68:77ee [link] => 44560210 [path] => 0000.0000.2ea9.8007 [isDct] => 1 ) [51] => Array ( [ip] => fc3a:2804:615a:b34f:abfe:c7d5:65d6:f50c [link] => 135291240 [path] => 0000.0000.36a9.8007 [isDct] => 1 ) [52] => Array ( [ip] => fcd5:c432:affb:7e77:a754:74e0:5e98:12d3 [link] => 148176120 [path] => 0000.0000.32a9.8007 [isDct] => 1 ) [53] => Array ( [ip] => fc37:acb2:544b:ed86:8b8d:9945:add7:b119 [link] => 142807420 [path] => 0000.0000.26a9.8007 [isDct] => 1 ) [54] => Array ( [ip] => fc38:4c2c:1a8f:3981:f2e7:c2b9:6870:6e84 [link] => 188709805 [path] => 0000.0000.2aa9.8007 [isDct] => 1 ) [55] => Array ( [ip] => fc93:e5b5:7cde:7983:f50c:fe31:106b:1f88 [link] => 18186471 [path] => 0000.0000.33e9.8007 [isDct] => 1 ) [56] => Array ( [ip] => fc09:c762:d144:4e53:bb79:372c:28dd:2cd6 [link] => 166966572 [path] => 0000.0000.1549.8007 [isDct] => 1 ) [57] => Array ( [ip] => fcbd:9678:6e2c:568e:ea0d:6cc0:69f1:9996 [link] => 123480101 [path] => 0000.0001.fde9.8007 [isDct] => 1 ) [58] => Array ( [ip] => fcef:c7a9:792a:45b3:741f:59aa:9adf:4081 [link] => 81335805 [path] => 0000.0000.18c7.8043 [isDct] => 1 ) [59] => Array ( [ip] => fcb4:baa6:ca46:5255:8514:53da:28dc:1337 [link] => 44560210 [path] => 0000.0000.2aa9.c787 [isDct] => 1 ) [60] => Array ( [ip] => fcef:c7a9:792a:45b3:741f:59aa:9adf:4081 [link] => 137438720 [path] => 0000.0001.8ca9.c787 [isDct] => 1 ) [61] => Array ( [ip] => fc74:b146:a580:2be9:6285:7af3:6a56:2b7b [link] => 0 [path] => 0000.000a.22c7.8043 [isDct] => 1 ) [62] => Array ( [ip] => fc00:9846:1c48:9a10:9c1b:3bbc:2322:face [link] => 52613260 [path] => 0000.0001.94a9.c787 [isDct] => 1 ) [63] => Array ( [ip] => fc13:6176:aaca:8c7f:9f55:924f:26b3:4b14 [link] => 1 [path] => 0000.0000.32b6.8043 [isDct] => 1 ) [64] => Array ( [ip] => fc2c:700f:63fa:2eb1:c360:059d:9b3e:1703 [link] => 188709805 [path] => 0000.0000.0034.81c7 [isDct] => 1 ) [65] => Array ( [ip] => fc85:f077:1447:a03e:bae3:30b2:1e87:63b3 [link] => 2147480 [path] => 0000.0037.2a0b.c007 [isDct] => 1 ) [66] => Array ( [ip] => fc2c:700f:63fa:2eb1:c360:059d:9b3e:1703 [link] => 188709805 [path] => 0000.0000.348e.c087 [isDct] => 1 ) [67] => Array ( [ip] => fcd4:1dc1:cc08:c97d:85e2:6cad:eab8:0864 [link] => 188709805 [path] => 0000.0000.004e.c087 [isDct] => 1 ) [68] => Array ( [ip] => fc7e:854a:b6fe:440b:965d:e487:58fb:5701 [link] => 185220150 [path] => 0000.0000.298e.c087 [isDct] => 1 ) [69] => Array ( [ip] => fc9a:8c7e:a05f:62c0:4872:a860:0610:2e4b [link] => 61203180 [path] => 0000.0000.318e.c087 [isDct] => 1 ) [70] => Array ( [ip] => fc99:02f4:7795:c86c:36bd:63ae:cf49:d459 [link] => 294649 [path] => 0000.0000.0056.c087 [isDct] => 1 ) [71] => Array ( [ip] => fcf1:b5d5:d0b4:c390:9db2:3f5e:d2d2:bff2 [link] => 294649 [path] => 0000.0000.2196.c087 [isDct] => 1 ) [72] => Array ( [ip] => fc58:7ce1:b011:920f:5ac7:98dd:e3c4:0c81 [link] => 294650 [path] => 0000.0000.3296.c087 [isDct] => 1 ) [73] => Array ( [ip] => fcac:541e:9c5c:9ddc:f648:962a:2892:e33e [link] => 0 [path] => 0000.0000.2b96.c087 [isDct] => 1 ) [74] => Array ( [ip] => fca6:83a5:de61:21da:9f57:b943:c039:ffde [link] => 188709805 [path] => 0000.0000.0005.ca47 [isDct] => 1 ) [75] => Array ( [ip] => fc2c:700f:63fa:2eb1:c360:059d:9b3e:1703 [link] => 0 [path] => 0000.0000.03b8.c087 [isDct] => 1 ) [76] => Array ( [ip] => fc99:02f4:7795:c86c:36bd:63ae:cf49:d459 [link] => 124553840 [path] => 0000.0001.7140.c707 [isDct] => 1 ) [77] => Array ( [ip] => fc3a:956e:4b69:1c1e:5ebc:11a5:3e71:3e7e [link] => 107374000 [path] => 0000.00d2.7140.c707 [isDct] => 1 ) [78] => Array ( [ip] => fc72:6c3b:8c74:68a7:d8c3:b4e0:6cbd:9588 [link] => 100394690 [path] => 0000.008a.7140.c707 [isDct] => 1 ) [79] => Array ( [ip] => fcf1:b5d5:d0b4:c390:9db2:3f5e:d2d2:bff2 [link] => 0 [path] => 0000.0086.7140.c707 [isDct] => 1 ) [80] => Array ( [ip] => fc58:7ce1:b011:920f:5ac7:98dd:e3c4:0c81 [link] => 124553841 [path] => 0000.00ca.7140.c707 [isDct] => 1 ) [81] => Array ( [ip] => fcac:541e:9c5c:9ddc:f648:962a:2892:e33e [link] => 0 [path] => 0000.00ae.7140.c707 [isDct] => 1 ) [82] => Array ( [ip] => fce1:3a9f:4546:e9e5:6646:88f9:1b18:8d18 [link] => 83214850 [path] => 0000.00aa.7140.c707 [isDct] => 1 ) [83] => Array ( [ip] => fcfc:89e0:da25:3e98:23be:bc9a:4114:48d5 [link] => 1 [path] => 0000.00c6.7140.c707 [isDct] => 1 ) [84] => Array ( [ip] => fc9a:62c1:75d2:b027:ca9d:9278:4a22:bc37 [link] => 120795750 [path] => 0000.00a2.7140.c707 [isDct] => 1 ) [85] => Array ( [ip] => fc90:8f10:9ca3:12a1:ab12:c98d:0680:d915 [link] => 122406360 [path] => 0000.00b6.7140.c707 [isDct] => 1 ) [86] => Array ( [ip] => fcc7:3fc5:d3f2:f66e:ec97:25e3:4a3d:948c [link] => 0 [path] => 0000.00ba.7140.c707 [isDct] => 1 ) [87] => Array ( [ip] => fc8f:aa30:3bba:8b3e:12fd:44a5:0322:77ff [link] => 79456760 [path] => 0000.000b.2071.4a03 [isDct] => 1 ) [88] => Array ( [ip] => fcf6:28f2:3522:8ad0:57ad:cc26:0a6e:27a3 [link] => 113816440 [path] => 0000.0001.c4fa.c907 [isDct] => 1 ) [89] => Array ( [ip] => fc74:b146:a580:2be9:62 [isDct] => 1 ) ) [isDct] => 1 ) 
```

我只需要取出所有 ip（键“ip”的值）并将它们放入普通数组中，如 ips[]

我已经尝试了一些东西，但是自从我使用php以来已经很久了，它没有出现，任何帮助都很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:44:24.513

```
$ips = array_map(function($i) { return $i['ip']; }, $arr['routingTable']); 
```

如果您没有 php >= 5.3 - 只需使用普通旧`foreach`版本并手动收集数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T01:47:11.353

使用 zerkms 答案，但对于 PHP < 5.3：

```
$i=-1;
foreach($arr['routingTable'] as $a){
 $i++;
 $ips[] = $a[$i]['ip'];
} 
```

# jqgrid - MVC 中的 Jquery-Jqgrid

> ID：11622976
> 
> 赞同：0
> 
> 时间：2012-07-24T01:44:30.493
> 
> 标签：jqgrid

我有一个 Jqgrid，我试图在网格上显示一些字段，但是当我编辑它并显示所有字段时，它的列比在网格上显示的要多。

例如：我有一个文档表，其中有 ID、名称、大小、描述、日期

在网格上我只显示 ID、名称和大小

当用户单击编辑时，即表单编辑，然后让用户编辑所有列。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:36:22.597

好吧，首先你必须在这里放一些代码，据我在这里可以理解，你有一个网格，可以说是 5 列，当你想进行表单编辑时，你想编辑并只显示 3 列，对吧？所以你需要做的，把 editable:false 和你的 colModal

例如

 ``{ name: 'Id', index: 'Id', align: 'right', editable: false, hidden: true}`  `这将隐藏网格中的 Id 列，如果您尝试进行表单编辑，Id 将不可编辑，并且它不会出现在编辑表单对话框中。``

# android - 带有 Imageview 和 Listview 的线性布局

> ID：11622978
> 
> 赞同：0
> 
> 时间：2012-07-24T01:44:40.197
> 
> 标签：android, listview, imageview, android-linearlayout, composite

我正在开发一个应用程序，我希望徽标左对齐，然后在右侧列出类别列表。所以我所拥有的是线性布局中的图像视图中的徽标，然后我也将 ListView 添加到 LinearLayout 以便它们可以在同一个活动中。当我尝试运行它时，我得到了一个意外停止的错误。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Commands.setText("Commands");
    LinearLayout LL = new LinearLayout(this);

    ImageView Logo = (ImageView)findViewById(0x7f020000);
    Logo.setImageDrawable(getResources().getDrawable(android.R.drawable.ic_menu_myplaces));

    ListView Cats = new ListView(this);

    String Categories[] = new String[3];
    Categories[0] = "Hardware";
    Categories[1] = "Language";
    Categories[2] = "Libraries";
    ArrayAdapter<String> list = new ArrayAdapter<String>(this, 0, 2, Categories);

    Cats.setAdapter(list);
    LL.addView(Logo);
    LL.addView(Cats);
    setContentView(LL);

} 
```

任何帮助，我真的很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:02:38.977

行。我认为问题是，您没有在 onCreate() 中调用 setContentView()。

所以很明显，Android 不知道在哪里寻找`ImageView`那个 id，你很可能会遇到空指针。

添加`setContentView()` 到您的`onCreate()`前 thsi 行，

```
 ImageView Logo = (ImageView)findViewById(0x7f020000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:16:20.590

在 Android 中创建布局的最简单方法是在 xml 的 res/layout 文件夹中创建一个布局，并在加载 onCreate 方法时对其进行膨胀。例如，此 xml 可能会完成您正在寻找的内容：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="horizontal" >
    <ImageView
      android:id="@+id/(name for image view)"
      android:layout_width="(some size)"
      android:layout_height="(some size)"
     >
    </ImageView>

    <ListView
      android:id="@+id/(name for list view)"
      android:layout_width="(some size)"
      android:layout_height="fill_parent">
    </ListView>
<LinearLayout> 
```

您应该能够找到很多关于使用 xml 创建布局的教程。

# html - HTML/CSS div 样式溢出

> ID：11622982
> 
> 赞同：0
> 
> 时间：2012-07-24T01:45:20.807
> 
> 标签：html, css, overflow, styling

我有一个高度为 0 的 div，但文本没有被截断，只有 div 框。例子：

```
<div style="width:200px;height:10px;background-color:red;">
Text
</div> 
```

我希望它切断文本以免溢出 div。

这是它的样子：

![*图像1*](../Images/7d04567d0dd3cca6bd37cc1ef0867052.png)

这就是我希望它看起来的样子：

![图2](../Images/ab3e2415fb46825a85f5c7742a9d6d6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:47:41.560

将此添加到主 div

```
overflow:hidden; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:48:28.887

你需要使用`overflow:hidden;`

这是一个例子：http: [//jsfiddle.net/v4ykN/](http://jsfiddle.net/v4ykN/)

`overflow`这是对该属性的一个很好的概述： [http](http://css-tricks.com/the-css-overflow-property/) ://css-tricks.com/the-css-overflow-property/有一些很好的信息要记住：

> 请记住，以这种方式隐藏的内容是完全无法访问的（无法查看源代码）。因此，例如，用户将其默认字体大小设置为大于您的预期，您可能会将文本推送到框外并将其完全隐藏在他们的视图中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:39:51.123

请使用溢出：隐藏在 css 参考这个例子[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:34:43.297

你必须`overflow:hidden;`对你正在做的事情使用祝你好运

# responsive-design - HTML5 样板或响应式设计

> ID：11622985
> 
> 赞同：2
> 
> 时间：2012-07-24T01:45:56.270
> 
> 标签：responsive-design, 960.gs, html5boilerplate

我正在尝试决定如何简化我的投资组合设计。目前我正在使用带有 960 网格系统的 HTML5Boilerplate，但其他人建议使用响应式以获得更好的移动视图点。HTML5Boilerplate 确实有一些屏幕/打印媒体查询，我不喜欢流体宽度。哪个更适合任何观看环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:05:21.270

我倾向于回避网格，但这是我个人的偏好。我使用以下组合：

1.  [http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)
2.  HTML5 样板
3.  SMACSS

很多前端开发人员都在使用 twitter 引导程序，这在您的情况下可能是一个不错的折衷方案。

# c# - C# WebRequest 检查页面是否需要 HTTP 身份验证

> ID：11622986
> 
> 赞同：2
> 
> 时间：2012-07-24T01:46:05.943
> 
> 标签：c#, php, authentication

有谁知道如何使用 WebRequest 类检查网页是否通过 C# 请求 HTTP 身份验证？我不是在问如何将凭据发布到页面，只是如何检查页面是否要求身份验证。

获取 HTML 的当前代码段：

```
WebRequest wrq = WebRequest.Create(address);
wrs = wrq.GetResponse();
Uri uri = wrs.ResponseUri;
StreamReader strdr = new StreamReader(wrs.GetResponseStream());
string html = strdr.ReadToEnd();
wrs.Close();
strdr.Close();
return html; 
```

PHP服务器端源码：

```
<?php
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="Secure Sign-in"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} else {
    echo "<p>Hello {$_SERVER['PHP_AUTH_USER']}.</p>";
    echo "<p>You entered {$_SERVER['PHP_AUTH_PW']} as your password.</p>";
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T03:16:34.450

`WebRequest.GetResponse`返回一个类型的对象`HttpWebResponse`。只需投射它，您就可以检索`StatusCode`.

但是，如果.Net 收到状态为 4xx 或 5xx 的响应（感谢您的反馈），它会给您一个例外。有一个小解决方法，请查看：

```
 HttpWebRequest wrq = (HttpWebRequest)WebRequest.Create(@"http://webstrand.comoj.com/locked/safe.php");
    HttpWebResponse wrs = null;

    try
    {
        wrs = (HttpWebResponse)wrq.GetResponse();
    }
    catch (System.Net.WebException protocolError)
    {
        if (((HttpWebResponse)protocolError.Response).StatusCode == HttpStatusCode.Unauthorized)
        {
            //do something
        }
    }
    catch (System.Exception generalError)
    {
        //run to the hills
    }

    if (wrs.StatusCode == HttpStatusCode.OK)
    {
        Uri uri = wrs.ResponseUri;
        StreamReader strdr = new StreamReader(wrs.GetResponseStream());

        string html = strdr.ReadToEnd();
        wrs.Close();
        strdr.Close();
    } 
```

希望这可以帮助。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:04:54.343

可能想试试

```
WebClient wc = new WebClient();
CredentialCache credCache = new CredentialCache(); 
```

如果您可以使用 WebClient 而不是 WebRequest，那么您应该使用更高级别，更容易处理标头等。

此外，可能想检查这个线程： [System.Net.WebClient 异常失败](https://stackoverflow.com/questions/791658/system-net-webclient-fails-weirdly)

# c#-4.0 - c#在循环中抛出新异常好吗？

> ID：11622987
> 
> 赞同：0
> 
> 时间：2012-07-24T01:46:13.830
> 
> 标签：c#-4.0

我有一个通过外部 Web 服务检索到的记录列表。一些数据是垃圾，并且想通过抛出一个新的异常来记录失败的记录。

想知道这是否是最好的处理方式，因为我读取异常会影响性能？

```
Pseudo code e.g. 

try
Loop through listOfRecords
  perform logic.
catch
  throw new exception (record details) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:02:28.960

这取决于遇到异常时您想对其余记录做什么。您当前的实现将在第一个错误时终止循环。

但是，如果您只是想以某种方式将记录标记为“未处理”或“错误”并继续处理剩余记录，则您希望完全在循环中处理错误：

```
foreach (var record in records)
{
    try
    {
        Process(record);
    }
    catch (TypedException ex)
    {
        LogError(ex);
        MarkAsUnprocessed(record, ex);
        // respond in some other way as well?
    }
} 
```

最终，异常处理逻辑属于在逻辑上对处理异常有意义的任何地方。 *捕获*异常是容易的部分，这是所使用语言的简单构造。有意义地*处理*异常完全是另一回事，它是一个独立于所使用语言的逻辑结构。

**编辑：**同样值得注意的是，您的伪代码暗示了这种处理异常的方式：

```
try
{
    // something
}
catch
{
    throw new Exception("something");
} 
```

这是非常糟糕的做法。抛出一个全新的异常本质上是丢弃捕获的异常，从而消除了一些非常有用的调试信息（其中最重要的是堆栈跟踪）。如果您想立即记录异常，然后让它继续向上堆栈，只需单独使用关键字`throw`：

```
try
{
    // something
}
catch (Exception ex)
{
    // log the exception
    throw;
} 
```

如果你想为异常添加上下文，你可以在再次抛出它之前修改它的属性。或者甚至更好，抛出一个*自定义*异常（not `Exception`）并将现有异常附加为`InnerException`属性：

```
try
{
    // something
}
catch (Exception ex)
{
    throw new RecordProcessingException("some additional context", ex);
} 
```

另一方面，如果在当前上下文中对异常没有任何意义，甚至根本不要捕获它。让它在堆栈中冒泡，直到遇到可以有意义地处理它的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:49:17.687

这不是最好的方法，因为您只需要日志写入功能。只需写入日志和`continue`循环。

# javascript - DOM 中的元素尺寸正在更新，但更改未显示 onresize

> ID：11622992
> 
> 赞同：3
> 
> 时间：2012-07-24T01:47:06.893
> 
> 标签：javascript, html, css, firefox, svg

我正在尝试调整`svg`元素的大小以尽可能大地适应浏览器，同时保持 100x50 的比例。当我检查对 DOM 所做的更改时，一切正常，但更新后的尺寸似乎没有呈现。我该如何解决这个问题？

[http://jsfiddle.net/Wexcode/SE6d3/show/](http://jsfiddle.net/Wexcode/SE6d3/show/)

```
var svg = document.getElementById("svg");
resize.call(svg);

window.onresize = function() {
    resize.call(svg);
}

function resize() {    
    this.setAttribute("width", scale(100));
    this.setAttribute("height", scale(50));

    function scale(value) {
        return Math.min(window.innerWidth / 100, window.innerHeight / 50) * value;
    }
} 
```

* * *

**编辑：** [sq2's answer](https://stackoverflow.com/a/11623246/522877)，将代码从

```
 this.setAttribute("width", scale(100));
    this.setAttribute("height", scale(50)); 
```

到

```
 this.style.width = scale(100);
    this.style.height = scale(50); 
```

提供了修复，但在 Firefox 中仍然存在问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T17:09:07.160

**更新：** 此外，这个[http://jsfiddle.net/SE6d3/70/](http://jsfiddle.net/SE6d3/70/)在任何地方都可以使用，并且 resize 可以在 Chrome 和 Firefox 中使用，比例为 100 到 50

***编辑：而不是设置宽度/高度属性，设置宽度/高度 CSS 样式。***

* * *

您在 attr/style 级别没有问题：试试这个[http://jsfiddle.net/SE6d3/27/](http://jsfiddle.net/SE6d3/27/) 如果 firefox 和 chrome 一切正常。

我认为您在从窗口获取宽度/高度方面的问题。试试这个方法：

```
getClientHeight = function(){
    return document.compatMode=='CSS1Compat' ? document.documentElement.clientHeight : document.body.clientHeight;
};

getClientWidth = function(){
  return document.compatMode=='CSS1Compat' ? document.documentElement.clientWidth : document.body.clientWidth
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:24:36.757

不知道为什么它会间歇性地工作，非常奇怪和好奇是否有更好的答案。

但是...替换：

```
this.setAttribute("width", scale(100));
this.setAttribute("height", scale(50)); 
```

和：

```
this.style.width = scale(100);
this.style.height = scale(50); 
```

在 Chrome 的屏幕上正确呈现它，但是我怀疑设置 SVG 的样式是正确的方法。

# xml - 使用 xmllint 检查 XML 语法

> ID：11622995
> 
> 赞同：52
> 
> 时间：2012-07-24T01:47:39.857
> 
> 标签：xml

我遇到了一些 XML 打印文件的问题，其中源系统忽略了将某些字符转换为其 XML 语法等效项（例如 & 未转换为`&amp;`）。

有没有办法用 xmllint 来捕捉它？（我不需要使用 XSD 检查一般的树结构）。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-05T08:41:56.030

```
xmllint --noout your_test_file.xml 
```

检查此命令的返回码。请参阅[文档](http://xmlsoft.org/xmllint.html#Error%20Return%20Codes)。`1`遇到基本解析错误时返回的值。例如：

```
echo $? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-01T12:26:00.180

```
xmllint --valid --encode utf-8 TEST.xml 
```

将在 utf-8 中验证并输出 TEST.xml

```
cat TEST.xml 
```

<xml 版本="1.0" 编码="utf-8"?>

<!DOCTYPE JM 系统 "mydtd">

<JM> . . . </JM>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-05T16:35:17.903

我想将@nathan-basanese 的评论升级为对 OP 问题的实际最佳答案：

> // , 检查返回码的简单方法如下`$ xmllint --noout your_test_file.xml; echo $?`：– Nathan Basanese 2015 年 11 月 19 日 0:38

默认情况下 xmllint “检查以确定文档是否格式正确”。因此，`xmllint --noout --nonet goodfoo.xml`对于格式正确的 XML，退出代码为 0 将完全保持沉默，同时`xmllint --noout --nonet badfoo.xml`为每个错误发出一条错误消息，并根据特定错误发出 1 到 9 之间的退出代码。

--nonet 选项告诉 xmllint*不要*获取 DTD，因为听起来 OP 只是想扫描 XML 格式正确。

这就是我认为她正在寻找的东西：

```
xmllint --noout --nonet /path/to/xmlfiles/*.xml 2>&1 
```

如果有任何错误，这将生成所有错误的 grep-able 列表和 1 到 9 之间的退出代码。

如果任何扫描文件中没有错误，它将以退出代码 0 静默退出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-04T06:05:30.220

如果您只需要使用 xmllint 检查任何 xml 文档的有效性（正确性），这里还有另一种方法。

```
if xmllint --noout /tmp/test.xml > /dev/null 2>&1;
then
    echo "correct"
else
    echo "incorrect"
fi 
```

# python - 使用 Python os.system() 或 subprocess.check_call() 传递 shell 命令

> ID：11622998
> 
> 赞同：0
> 
> 时间：2012-07-24T01:47:54.833
> 
> 标签：python

我正在尝试从 Python 调用“sed”，并且无法通过 subprocess.check_call() 或 os.system() 传递命令行。

我在 Windows 7 上，但使用来自 Cygwin 的“sed”（它在路径中）。

如果我从 Cygwin shell 执行此操作，它可以正常工作：

```
$ sed 's/&amp;nbsp;/\&nbsp;/g' <"C:foobar" >"C:foobar.temp" 
```

在 Python 中，我在“名称”中得到了我正在使用的完整路径名。我试过：

```
command = r"sed 's/&amp;nbsp;/\&nbsp;/g' " +  "<" '\"' + name + '\" >' '\"' + name + '.temp' + '\"'
subprocess.check_call(command, shell=True) 
```

所有的连接都是为了确保我在输入和输出文件名周围有双引号（以防 Windows 文件路径中有空格）。

我还尝试将最后一行替换为：

```
os.system(command) 
```

无论哪种方式，我都会收到此错误：

```
sed: -e expression #1, char 2: unterminated `s' command
'amp' is not recognized as an internal or external command,
operable program or batch file.
'nbsp' is not recognized as an internal or external command,
operable program or batch file. 
```

然而，正如我所说，它在控制台上运行良好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T01:52:41.197

subprocess 使用的 shell 可能不是您想要的 shell。您可以使用`executable='path/to/executable'`. 不同的shell有不同的引用规则。

更好的可能是`subprocess`完全跳过，并将其编写为纯 Python：

```
with open("c:foobar") as f_in:
    with open("c:foobar.temp", "w") as f_out:
        for line in f_in:
            f_out.write(line.replace('&amp;nbsp;', '&nbsp;')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:54:56.137

我想你会发现，在 Windows Python 中，它实际上并没有*使用*CygWin shell 来运行你的命令，而是使用`cmd.exe`.

而且，`cmd`单引号不能很好地发挥`bash`作用。

您只需执行以下操作即可确认：

```
c:\pax> echo hello >hello.txt

c:\pax> type "hello.txt"
hello

c:\pax> type 'hello.txt'
The system cannot find the file specified. 
```

我认为最好的办法是使用 Python 本身来处理文件。Python 语言是一种跨平台语言，旨在消除所有平台特定的不一致，例如您刚刚发现的不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T02:52:38.483

我同意 Ned Batchelder 的[评估](https://stackoverflow.com/a/11623031/355230)，但考虑一下您可能想要考虑使用以下代码的原因，因为它可能会完成您最终想要完成的事情，这可以在 Python`fileinput`模块的帮助下轻松完成：

```
import fileinput

f = fileinput.input('C:foobar', inplace=1)
for line in f:
    line = line.replace('&amp;nbsp;', '&nbsp;')
    print line,
f.close()
print 'done' 
```

这将根据关键字的使用有效地更新给定文件。还有一个可选`backup=`关键字——上面没有使用——如果需要，它将保存原始文件的副本。

顺便说一句，关于使用诸如`C:foobar`指定文件名之类的东西要小心，因为在 Windows 上，这意味着该名称的文件位于驱动器 C: 上的任何当前目录中，这可能不是您想要的。