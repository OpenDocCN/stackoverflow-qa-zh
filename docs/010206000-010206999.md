# StackOverflow 问答 10206000-10206999

# c# - 如何每 10 分钟在服务中运行一个函数？

> ID：10206000
> 
> 赞同：8
> 
> 时间：2012-04-18T08:53:13.167
> 
> 标签：c#, windows-services

我有一个 Windows 服务正在运行，在这里面我想每隔几分钟运行一个函数。我找到了一些代码，但它似乎不起作用？我有一个记录器，它似乎没有进入 timer_Elapsed 函数？

```
 protected override void OnStart(string[] args)
    {
       // SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
       // test.Import();
         log.Info("Info - Service Started");
        _timer = new Timer(10 * 60 * 1000); // every 10 minutes??
        _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    }

    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        log.Info("Info - Check time");
        DateTime startAt = DateTime.Today.AddHours(9).AddMinutes(48);
        if (_lastRun < startAt && DateTime.Now >= startAt)
        {
            // stop the timer 
            _timer.Stop();               

            try
            {
                log.Info("Info - Import");
                SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
                test.Import();
            }
            catch (Exception ex) {
                log.Error("This is my error - ", ex);
            }

            _lastRun = DateTime.Now;
            _timer.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-18T08:55:17.757

您需要启动计时器：

```
protected override void OnStart(string[] args)
{
     log.Info("Info - Service Started");
    _timer = new Timer(10 * 60 * 1000); // every 10 minutes
    _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    _timer.Start(); // <- important
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T08:55:34.367

没看懂`_timer.Start()`，应该是你的问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T09:05:56.687

[Daniel Hilgarth](https://stackoverflow.com/a/10206031/65358)是正确的 - 主要问题是您永远不会在计时器上调用 Start。

话虽如此，您可能还需要考虑使用 Windows 任务计划程序而不是带有计时器的服务。这允许您将任务安排为每 10 分钟运行一次，但也可以在需要时更改计划，而无需更改编译。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T10:08:01.853

我也需要这个功能。也就是说，我的 C# windows 服务必须每 10 分钟检查一次电子邮件。我剥离了一些逻辑以使代码更有效，如下所示：

```
private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            _timer.Stop();
            try
            {
                EventLog.WriteEntry(Program.EventLogName, "Checking emails " + _count++);
            }
            catch (Exception ex)
            {
                EventLog.WriteEntry(Program.EventLogName, "This is my error " + ex.Message);
            }
            _timer.Start();
        } 
```

timer_elapsed 方法确实会每 10 分钟调用一次，从第一个 _timer.start() 开始，顺便说一下你错过了它。我没有对_lastRun 和startAt 进行任何检查。我认为我们不需要它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T08:56:58.187

尝试启动`timer`,

```
protected override void OnStart(string[] args)
    {
       // SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
       // test.Import();
         log.Info("Info - Service Started");
        _timer = new Timer(10 * 60 * 1000); // every 10 minutes??
            _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
_timer.Start();
    }

    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        log.Info("Info - Check time");
        DateTime startAt = DateTime.Today.AddHours(9).AddMinutes(48);
        if (_lastRun < startAt && DateTime.Now >= startAt)
        {
            // stop the timer 
            _timer.Stop();               

            try
            {
                log.Info("Info - Import");
                SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
                test.Import();
            }
            catch (Exception ex) {
                log.Error("This is my error - ", ex);
            }

            _lastRun = DateTime.Now;
            _timer.Start();
        }
    } 
```

# spring - Grails 在服务器端设置默认错误的地方

> ID：10206004
> 
> 赞同：0
> 
> 时间：2012-04-18T08:53:32.310
> 
> 标签：spring, grails

我有 2 个域类 Form 和 FormItem。Form 有很多 FormItem。我尝试使用表单中的 3 个项目运行我的 grails 应用程序，并且显然在第一个项目中设置了错误的值之一。单击“提交”后，我收到 2 条错误消息而不是 1 条。这是相同的错误消息“值为 -9 的包的属性编号小于最小值 0”。这是我的问题。Grails 在哪里尝试默认设置错误消息以及为什么 2 个错误而不是一个（这不是我的任务所特有的，我在各种项目中尝试并得到 2 个消息而不是一个）？

**以这种方式显示的已编辑** 错误。

```
<g:eachError>
        <dt>
          <a href=""
                   onclick="alert('adas'); javascript:document.getElementById('${it.getProperties().get("field")}').focus();
                   return false;">
                    <g:message error="${it}"/>
                </a>
            </dt>
</g:eachError>

//FormController    
def submit() {
        def formX = mergeGetFromSession()
        formX.status = "Stored"
        FormX.withTransaction {
            if (formX.save(flush: true)) {
                formXTaskService.startProcess(formX)
            }
        }

        if (formX.hasErrors()) {
            formX.isDocumentEditable = true
            render(view: "create", model: [formXInstance: formX])
        } else {
            session.invalidate()
            flash.message = message(code: 'default.created.message', args: [message(code: 'formX.label', default: 'FormX'), formX.id])
            redirect(action: "show", id: formX.id)
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:42:01.930

它存储在`grails-app/i18n/messages.properties`

另请参阅[http://grails.org/doc/latest/guide/validation.html#validationAndInternationalization](http://grails.org/doc/latest/guide/validation.html#validationAndInternationalization)

# java - Maven 和 Eclipse 集成的错误

> ID：10206005
> 
> 赞同：4
> 
> 时间：2012-04-18T08:53:32.840
> 
> 标签：java, eclipse, maven, maven-plugin

我对使用 Eclipse 和 Maven 完全陌生，我正在尝试遵循使用 java 库的教程，但在先决条件下失败：[http ://code.google.com/p/dkpro-core-asl/wiki /开发者设置](http://code.google.com/p/dkpro-core-asl/wiki/DeveloperSetup)

在页面的最后一次单击“完成”结束后，如果我查看我的 Eclipse 窗口，我认为出了点问题，因为我在 Eclipse 包资源管理器中有很多错误和一些小错误（我也没有得到不同红色感叹号、红色上的白色小十字（认为这是一个错误标记）或必须是“警告符号”（黄色感叹号三角形）之间的点。

所以我有很多不同类型的错误，不知道如何解决它们，我复制下面的完整日志。

我的错误是：

```
Missing artifact de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.frequency:jar:0.4.0:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin *:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.toolbox-asl  line 1  Maven Problem
The container 'Maven Dependencies' references non existing library 'C:\Users\stephane\.m2\repository\de\tudarmstadt\ukp\dkpro\teaching\de.tudarmstadt.ukp.dkpro.teaching.frequency\0.4.0\de.tudarmstadt.ukp.dkpro.teaching.frequency-0.4.0.jar' de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Build path  Build Path Problem
The project cannot be built until build path errors are resolved    de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Unknown Java Problem 
```

拜托，如果您对如何解决它们有任何线索，

我想知道我是否没有忘记一些基本结帐之王，因为我看起来几乎所有东西都坏了？

感谢你

（预期的教程是：“使用 DKPro Core 的第一个编程步骤”）

日志作为图像：http: [//imageshack.us/photo/my-images/856/dkprocoreaslmaven201204.png/](http://imageshack.us/photo/my-images/856/dkprocoreaslmaven201204.png/)

---8<---

```
Description Resource    Path    Location    Type
Failed to read artifact descriptor for edu.berkeley.nlp.lm:edu.berkeley.nlp.lm.berkeleylm:jar:1.0b2 pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact com.ibm.icu:icu4j:jar:4.0.1:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact commons-io:commons-io:jar:2.0:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact commons-lang:commons-lang:jar:2.5:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact commons-logging:commons-logging:jar:1.1.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.io-asl:jar:1.2.1-SNAPSHOT:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.lexmorph-asl:jar:1.2.1-SNAPSHOT:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.metadata-asl:jar:1.2.1-SNAPSHOT:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.resources-asl:jar:1.2.1-SNAPSHOT:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.segmentation-asl:jar:1.2.1-SNAPSHOT:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.core:jar:0.4.0:compile pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.corpus:jar:0.4.0:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.frequency:jar:0.4.0:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.ngram:jar:0.4.0:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact dom4j:dom4j:jar:1.6.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact jaxen:jaxen:jar:1.1.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact jdom:jdom:jar:1.0:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact junit:junit:jar:4.8.2:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact log4j:log4j:jar:1.2.14:compile pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.ant:ant-launcher:jar:1.8.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.ant:ant:jar:1.8.1:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:jVinci:jar:2.3.1:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:uimaj-adapter-vinci:jar:2.3.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:uimaj-core:jar:2.3.1:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:uimaj-cpe:jar:2.3.1:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:uimaj-document-annotation:jar:2.3.1:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.apache.uima:uimaj-tools:jar:2.3.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.springframework:spring-core:jar:3.0.5.RELEASE:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact org.uimafit:uimafit:jar:1.2.0:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact pcj:pcj:jar:1.2:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xalan:serializer:jar:2.7.1:compile pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xalan:xalan:jar:2.7.1:compile  pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xerces:xercesImpl:jar:2.9.1:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xerces:xmlParserAPIs:jar:2.6.2:compile pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xml-apis:xml-apis:jar:1.3.04:compile   pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Missing artifact xom:xom:jar:1.0:compile    pom.xml /de.tudarmstadt.ukp.dkpro.core.api.frequency-asl    line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.api.coref-asl    line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.api.corpus-asl   line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.api.parameter-asl    line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.arktweet-asl line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.frequency-asl    line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.io.aclanthology-asl  line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.io.bnc-asl   line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.io.jdbc-asl  line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.io.tei-asl   line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.io.web1t-asl line 1  Maven Problem
Project build error: Unresolveable build extension: Plugin de.tudarmstadt.ukp.dkpro.core:build-tools:3 or one of its dependencies could not be resolved: Failure to find de.tudarmstadt.ukp.dkpro.core:build-tools:jar:3 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced pom.xml /de.tudarmstadt.ukp.dkpro.core.toolbox-asl  line 1  Maven Problem
The container 'Maven Dependencies' references non existing library 'C:\Users\stephane\.m2\repository\de\tudarmstadt\ukp\dkpro\teaching\de.tudarmstadt.ukp.dkpro.teaching.frequency\0.4.0\de.tudarmstadt.ukp.dkpro.teaching.frequency-0.4.0.jar' de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Build path  Build Path Problem
The project cannot be built until build path errors are resolved    de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Unknown Java Problem 
```

---8<---

编辑 ：

我想我已经按照教程的要求安装了 eclipse 设置（但使用 Eclipse Indigo Service Release 2 Build id：20120216-1857）：

```
Subclipse 1.6.x
    update site: http://subclipse.tigris.org/update_1.6.x 
m2eclipse 0.10.0 or higher.
    update site: http://m2eclipse.sonatype.org/sites/m2e 
Maven SCM handler for Subclipse
    update site: http://m2eclipse.sonatype.org/sites/m2e-extras 
```

这是来自有 pom.xml 文件的目录的 mvn clean package 命令的输出：

```
[... here i am skipping as there are more 700 lines ... these below are last one :]

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 37.054s
[INFO] Finished at: Wed Apr 18 11:18:31 CEST 2012
[INFO] Final Memory: 93M/223M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12:test (default-test) on project de.tudarmstadt.ukp.dkpro.core.io.aclanthology-asl: There are test failures.
[ERROR] 
[ERROR] Please refer to D:\eclipseWorkspace\de.tudarmstadt.ukp.dkpro.core-asl\de.tudarmstadt.ukp.dkpro.core.io.aclanthology\target\surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :de.tudarmstadt.ukp.dkpro.core.io.aclanthology-asl 
```

编辑 2：

另一个非常奇怪的事情=>也许“mvndependecy：resolve”或“mvn clean package”为我做了一些事情，因为在计算机重新启动后，几乎所有错误都消失了，现在Eclipse“问题”选项卡中只有2个！（但仍有 225 项警告）

剩下的 2 个错误是：并且我在包资源管理器中的 de.tudarmstadt.ukp.dkpro.core.api.frequency-asl 上有一个红色感叹号（它代表什么？）

```
Description Resource    Path    Location    Type
The container 'Maven Dependencies' references non existing library 'C:\Users\stephane\.m2\repository\de\tudarmstadt\ukp\dkpro\teaching\de.tudarmstadt.ukp.dkpro.teaching.frequency\0.4.0\de.tudarmstadt.ukp.dkpro.teaching.frequency-0.4.0.jar' de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Build path  Build Path Problem
The project cannot be built until build path errors are resolved    de.tudarmstadt.ukp.dkpro.core.api.frequency-asl     Unknown Java Problem 
```

还是不知道它在问我什么！

最后编辑：

所以阅读 Kal 提供的答案（非常感谢 ua 的帮助），我真的想知道我的麻烦是否也来自缺少 jar 或一些“构建路径”引用的库（我对 Maven/Eclipse 真的很陌生）。从 de.tudarmstadt.ukp.dkpro.core.api.frequency-asl 的构建错误（来自EDIT2的带有红色感叹号的那个）我得到以下异常跟踪：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project de.tudarmstadt.ukp.dkpro.core.api.frequency-asl: Could not resolve dependencies for project de.tudarmstadt.ukp.dkpro.core:de.tudarmstadt.ukp.dkpro.core.api.frequency-asl:jar:1.2.1-SNAPSHOT: Failed to collect dependencies for [org.uimafit:uimafit:jar:1.2.0 (compile), xerces:xercesImpl:jar:2.9.1 (compile), xalan:xalan:jar:2.7.1 (compile), de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt.ukp.dkpro.teaching.frequency:jar:0.4.0 (compile), junit:junit:jar:4.8.2 (compile)]
at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:190) 
```

[...]

是不是我应该安装 xerces、xalan、uimafit、junit 或类似的东西来告诉在哪里可以找到它们？我以为一切都在教程中，或者直接由 Maven 处理，但可能是我错了吗？？？

我曾试图做：

```
mvn install:install-file -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\junit-4.8.2.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\uimafit-1.2.0.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\xalan-2.7.1.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\xercesImpl-2.9.1.jar \ 
```

从 mvnrepository.com 网站手动下载每个文件并将它们放入 d:\downloaded\dependencies-for-DKPro-Core-ASL\ 当然，我找不到 de.tudarmstadt.ukp.dkpro.teaching:de.tudarmstadt。 ukp.dkpro.teaching.frequency:jar:0.4.0 那里。

```
mvn clean install:install -file -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\junit-4.8.2.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\uimafit-1.2.0.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\xalan-2.7.1.jar -Dfile=d:\downloaded\dependencies-for-DKPro-Core-ASL\xercesImpl-2.9.1.jar \ -Dmaven.test.skip=true 
```

不再成功，并以：

```
[INFO] Deleting D:\eclipseWorkspace\maven.1334761781732\branches\1.2.x\de.tudarm
stadt.ukp.dkpro.core.io.text\target
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building DKPro Core ASL - IO - XMI 1.2.1-SNAPSHOT

[...]

[INFO] ------------------------------------------------------------------------
[INFO] Building DKPro Core ASL 1.2.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-install-plugin:2.3.1:install-file (default-cli) @ de.tudarmstad
t.ukp.dkpro.core-asl ---
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Skipping DKPro Core ASL
[INFO] This project has been banned from the build due to previous failures.
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] DKPro Core ASL .................................... FAILURE [0.139s]
[INFO] DKPro Core ASL - Anomaly API ...................... SUCCESS [0.048s]
[INFO] DKPro Core ASL - FeaturePath API (ASL) ............ SUCCESS [0.074s]
[INFO] DKPro Core ASL - Metadata API ..................... SUCCESS [0.227s]
[INFO] DKPro Core ASL - IO API ........................... SUCCESS [0.085s]
[INFO] DKPro Core ASL - Part-of-Speech API ............... SUCCESS [0.060s]
[INFO] DKPro Core ASL - Common API ....................... SUCCESS [0.075s]
[INFO] DKPro Core ASL - Lexical Units API ................ SUCCESS [0.117s]
[INFO] DKPro Core ASL - Structured and Semi-Structured Data API  SUCCESS [0.044s
]
[INFO] DKPro Core ASL - Syntactic Units API .............. SUCCESS [0.274s]
[INFO] DKPro Core ASL - CAS Transformation API ........... SUCCESS [0.042s]
[INFO] DKPro Core ASL - Named Entity Recognition API ..... SUCCESS [0.083s]
[INFO] DKPro Core ASL - Frequency Providers API (ASL) .... SUCCESS [0.015s]
[INFO] DKPro Core ASL - IO - MMAX2 (ASL) ................. SUCCESS [0.070s]
[INFO] DKPro Core ASL - IO - Text ........................ SUCCESS [0.090s]
[INFO] DKPro Core ASL - IO - XMI ......................... SUCCESS [0.083s]
[INFO] DKPro Core ASL - IO - XML ......................... SUCCESS [0.059s]
[INFO] DKPro Core ASL - IO - WSDL (CPL) .................. SUCCESS [0.096s]
[INFO] DKPro Core ASL - IO - Wikipedia (LGPL) ............ SUCCESS [0.114s]
[INFO] DKPro Core ASL - IO - PDFBox 0.7.3 (BSD) .......... SUCCESS [0.088s]
[INFO] DKPro Core ASL - IO - NEGRA ....................... SUCCESS [0.127s]
[INFO] DKPro Core ASL - TreeTagger (free for research) ... SUCCESS [0.113s]
[INFO] DKPro Core ASL - IO - IMS Corpus Workbench ........ SUCCESS [0.044s]
[INFO] DKPro Core ASL - IO - ANNIS2 ...................... SUCCESS [0.063s]
[INFO] DKPro Core ASL - Tokenization Toolkit ............. SUCCESS [0.134s]
[INFO] DKPro Core ASL - CAS Transformation (ASL) ......... SUCCESS [0.216s]
[INFO] DKPro Core ASL - Jazzy (LGPL) ..................... SUCCESS [0.159s]
[INFO] DKPro Core ASL - JWordSplitter (ASL) .............. SUCCESS [0.036s]
[INFO] DKPro Core ASL - LanguageTool (LGPL) .............. SUCCESS [0.062s]
[INFO] DKPro Core ASL - Norvig's Spelling Correction ..... SUCCESS [0.046s]
[INFO] DKPro Core ASL - Snowball (BSD) ................... SUCCESS [0.243s]
[INFO] DKPro Core ASL - TextCat (LGPL) ................... SUCCESS [0.062s]
[INFO] DKPro Core ASL - BananaSplit (ASL) ................ SUCCESS [0.046s]
[INFO] DKPro Core ASL - Stop Word Remover (ASL) .......... SUCCESS [0.505s]
[INFO] DKPro Core ASL - N-Gram Tools ..................... SUCCESS [0.307s]
[INFO] DKPro Core ASL - Part-of-Speech Filter ............ SUCCESS [0.058s]
[INFO] DKPro Core ASL - Dictionary Annotator ............. SUCCESS [0.344s]
[INFO] DKPro Core ASL - Examples ......................... SUCCESS [0.184s]
[INFO] DKPro Core ASL - Distribution ..................... SUCCESS [0.007s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.815s
[INFO] Finished at: Thu Apr 19 11:13:27 CEST 2012
[INFO] Final Memory: 9M/23M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.3
.1:install-file (default-cli) on project de.tudarmstadt.ukp.dkpro.core-asl: The
artifact information is incomplete or not valid:
[ERROR] [0]  'groupId' is missing.
[ERROR] [1]  'artifactId' is missing.
[ERROR] [2]  'packaging' is missing.
[ERROR] [3]  'version' is missing.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionE
xception 
```

还看到有一些关于：“依赖项解析无法正常工作。新的 m2eclipse 插件直到最后才解析依赖项。” 那可能涉及？

而且我仍然严重卡住：/而且对 maven/java/eclipse 平台技巧仍然太陌生...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:04:58.747

首先，您似乎有一些似乎是专有的依赖 jars（我可能是错的）其次，即使像 Apache 库这样的公共库也无法下载。你在防火墙后面吗？看起来 Maven 无法访问 Maven 中心来下载所有依赖项 jar 以及插件。确保您使用的是与您的项目兼容的正确版本的 maven。

`mvn clean package`如果您正在检查一个大型项目，我建议您首先在控制台中进行顶级构建（ ）。这将确保下载所有插件和依赖项，然后您可以解决将此项目导入 Eclipse 的问题。或者，您可以`mvn dependency:resolve`下载所有依赖项。

# delphi - 为什么“i := i + 1”不给整数和更大类型的范围检查错误？

> ID：10206007
> 
> 赞同：15
> 
> 时间：2012-04-18T08:53:37.080
> 
> 标签：delphi, range-checking

考虑：

```
{$R+}
i:= 1;
While i > 0 do
  i:= i + 1;
ShowMessage(IntToStr(i)); 
```

如果我声明`i`为 Byte、Word、Shorint 或 TinyInt，我会得到一个范围检查错误，正如预期的那样。如果我声明`i`为 LongWord、Cardinal、Integer、LongInt 或 Int64，它只会通过 while 循环并显示负值或 0 值，`i`当您通过上限时会显示该值。

Delphi 7 不支持 32 位和 64 位数字的范围检查吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T09:38:30.297

操作 i + 1 实际上不会产生范围检查错误。赋值操作确实如此。

Delphi 将常量 '1' 评估为整数，因此右侧将产生一个 Int64 或整数（i 的类型和整数中的较大者）的结果。

如果我们扩展这条线，我们会得到以下信息

```
temp := i + 1 
i := temp 
```

temp 将是 32 位或 64 位，如果达到上限，则会溢出。当我们进行赋值时，我们有一个完全有效的 32 位或 64 位值，因此如果 i 为 32 位或更多，则范围检查不会失败。

如果 i 小于 32 位，它将引发范围检查，如果 temp 太大而无法容纳。

对于 i >= 32bits，您可以像这样捕获溢出错误：

```
{$R+,Q+}
... 
```

# wordpress - wordpress 不发邮件

> ID：10206009
> 
> 赞同：1
> 
> 时间：2012-04-18T08:53:41.903
> 
> 标签：wordpress, email, smtp

我正在使用重力表格和联系表格 7，但我不知道为什么，但是当我在我的域中使用我的个人电子邮件时，我没有收到邮件。但是当我将其更改为 gmail 帐户时，它会神奇地工作。

有任何想法吗？

我搜索了一下，人们说他们在使用 gmail 时遇到了问题，所以这让我很困惑。

我也尝试使用插件修复它，但我不确定配置和默认设置不起作用。

我还尝试通过注释掉代码来解决问题，更改标题..

```
require_once( ABSPATH . WPINC . '/registration-functions.php');" line...

require_once( ABSPATH . WPINC . '/pluggable-functions.php'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:39:41.603

我刚刚发现我们的服务器和谷歌应用程序之间存在冲突，在完全关闭我们的邮件服务器后问题得到了解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:01:03.543

我相信问题出在主机服务器不允许您从外部表单发送电子邮件。您可以通过填写表格进行确认并将其发送到与您的主机域相同的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:29:05.233

有一个很棒的插件叫做 wp-mail-smtp，它在某些情况下工作得非常好。您可以指定发送电子邮件服务器以及用户名和密码。

我不得不主要在 Windows Server 托管网站上使用。

这是一个链接。

[http://wordpress.org/extend/plugins/wp-mail-smtp/](http://wordpress.org/extend/plugins/wp-mail-smtp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:43:22.967

你已经看到你的垃圾邮件箱了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:56:14.417

尝试通过 SMTP 发送邮件，我将它与 Google Apps 一起使用，效果很好：[http ://wordpress.org/extend/plugins/configure-smtp/](http://wordpress.org/extend/plugins/configure-smtp/)

# c# - 如何使用 http 处理程序打开以字节形式存储在数据库中的文件？

> ID：10206011
> 
> 赞同：1
> 
> 时间：2012-04-18T08:53:52.357
> 
> 标签：c#, asp.net, file, informix, generic-handler

我将文件作为字节存储在我的数据库中。

如何使用其应用程序（如 microsoft office、acrobat reader 等）打开这样的文件或下载它。

我想这样做`generic handler`：

* * *

```
 public class Attachement : IHttpHandler, System.Web.SessionState.IRequiresSessionState
    {
        public void ProcessRequest(HttpContext context)
        {
            try
            {
                byte[] Attachement = (byte[])AttachementDAL.ReadAttachement(int.Parse(context.Session["attch_serial"].ToString())).Rows[0]["attach_content"];

            }
            catch (Exception ee)
            {
            }

        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:00:25.997

您可以使用正确的 MIME 类型将其写入响应流。[您可以在此处](http://filext.com/faq/office_mime_types.php)找到 MS 文件格式 MIME 类型的列表，对于 pdf 它是`application/pdf`。如果你想保持通用（所有二进制文件）使用`application/octet-stream`

```
 public void ProcessRequest(HttpContext context)
 {
   try
   {
     byte[] Attachement = 
           (byte[])AttachementDAL
                  .ReadAttachement(
                      int.Parse(context.Session["attch_serial"].ToString())
                   ).Rows[0]["attach_content"];

     context.Response.Clear();
     context.Response.ContentType = "application/msword";
     foreach(byte b in Attachement)
     {
       context.Response.OutputStream.WriteByte(b);
     }
     context.Response.OutputStream.Flush();
   }
   catch (Exception ee)
   {
   }
} 
```

# php - csv文件损坏

> ID：10206012
> 
> 赞同：0
> 
> 时间：2012-04-18T08:53:52.327
> 
> 标签：php, excel, csv

```
/* generate csv content */

while($res = mysql_fetch_assoc($query))         {
        /* If two or more columns of the result have the same field names, the last column will take precedence. */
        for($i=0; $i<mysql_num_fields($query);$i++)             {
                $data = $res[mysql_field_name($query,$i)];
                $data = trim( preg_replace( '/\s+/', ' ', $data ) );
                echo "\"".$data."\";";
        }
        echo "\r\n";
} 
```

以下代码旨在删除多余的空格或换行符并生成 csv 文件。我的问题是，在某些工作站上，csv 文件显示正确，而在其他工作站上显示不正确，尽管所有工作站都具有相同的区域和语言设置。

还有什么我应该检查或使用不同的代码来生成正确的 csv 文件以清除隐藏空间或新行吗？

### 稍后编辑

我发现了一些关于区域和语言设置选项的错误设置，尽管我们的设置相同，但在区域选项>自定义>数字>列表分隔符中它与“;”不同 所以这解释了一些报告的问题。

解决方法是实施正确的 csv 代码生成器并检查工作站配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:04:12.837

试试这个：

```
$outfp = fopen('php://output', 'w');

while ($row = mysql_fetch_assoc($query)) {
  foreach ($row as &$field) {
    $field = preg_replace('/\s+/', ' ', trim($field));
  }
  fputcsv($outfp, $row, ';');
} 
```

考虑到您的代码没有的许多边缘情况，使用[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)将产生比您可以手动编写的任何东西更好的输出。你可以把它写进去，它[`php://output`](http://php.net/manual/en/wrappers.php.php)和`echo`ing 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:04:21.213

代替

```
for ($i=0; $i<mysql_num_fields($query); $i++) 
```

它应该是

```
for ($i=0; $i<mysql_num_fields($res); $i++) 
```

查看正确的字段数。

# facebook - 富文本框/TinyMCE 中类似 Twitter/Facebook 的用户标记

> ID：10206013
> 
> 赞同：1
> 
> 时间：2012-04-18T08:54:00.903
> 
> 标签：facebook, twitter, tinymce, tagging

我正在寻找有关如何进行此操作的一些建议。

我有一个用 C# 编写的 ASP.NET MVC 3 应用程序，其表单包含一个 TinyMCE 文本框作为其富文本编辑器。

我被要求查看是否可以通过文本框将用户标记添加到表单中，就像使用 @user 和自动完成功能的 Facebook/Twitter 一样。

我对如何获取数据有一个合理的想法，但我不确定是否可以将功能添加到 TinyMCE（如果需要添加的话）。

简而言之，我只是在寻找一种用户能够开始输入@user 并让自动完成下拉菜单出现的方式，就像在 Facebook 上一样。虽然我缺少的一块拼图是如何实现它。我对它如何整体拼凑有一个粗略的想法，只是不知道如何让它在 TinyMCE 框中工作或在输入 @ 时让它开始工作（当不是电子邮件地址的一部分时）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:17:10.143

Twitter 提供了他们自己的自动链接引擎，看看：[https ://github.com/twitter/twitter-text-js](https://github.com/twitter/twitter-text-js)

这很简单

```
// basic extraction
var usernames = twttr.txt.extract_mentioned_screen_names("Mentioning @twitter and @jack")
// usernames == ["twitter", "jack"] 
```

# css - 网站完成后css sprites变化

> ID：10206016
> 
> 赞同：1
> 
> 时间：2012-04-18T08:54:21.337
> 
> 标签：css

有没有更好的方法来更改为 CSS Sprites 生成的单个文件中的少量图像。

因为我有一个包含 50 个小图像的大图像文件，而我的 css 使用 Sprites。现在我想改变 4 个按钮的颜色和 s 指针的大小。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:50:29.983

使用任何 CSS Sprites 生成器，例如[Spritemapper](http://yostudios.github.com/Spritemapper/)。

顺便说一句，我创建[了 ZeroSprites](http://zerosprites.com/)，它是一个在线精灵生成器，旨在使用 VLSI 布局规划算法来最小化区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:00:24.820

在 Photoshop 或 GIMP 等图像软件中编辑您的 sprite 文件。

在现有精灵文件的底部添加新图像。这样，您可以保留精灵的现有位置。

如果要查找 css 指针，请使用图像软件中的测量工具。

# android - 在移动设备上构建游戏。原生还是引擎？

> ID：10206019
> 
> 赞同：5
> 
> 时间：2012-04-18T08:54:25.070
> 
> 标签：android, iphone, opengl-es, unity3d

我想开始涉足手机游戏编程。我在 Android 开发和 iPhone 开发方面已经有了一定的经验。

以前，我已经使用 XNA 构建了一个概念验证 2D JRPG 游戏和一个 3D FPS 引擎，并且我对游戏编程概念有了很好的了解。

[无论是开始研究 Android 上的 OpenGL，还是应该直接进入游戏引擎（例如Unity3D](http://www.unity3d.com/)），我都迷失了方向。

根据我的经验，将时间花在 Android/iPhone 上的原生图形编程上会更有效吗？我不仅在寻找“快速”的发展，我也在寻找有效的结果。另外，opengl-es 从一个平台到另一个平台的便携性如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:48:08.693

游戏引擎涉及的不仅仅是图形：音频、资源管理、网络、脚本等。为了跨平台，所有这些子系统必须为每个平台本地实现。这意味着拥有非常好的设计和架构，当然还有大量的代码。不幸的是，出于效率和可移植性的考虑，您应该使用 C/C++。尽管现在可以使用 C# 等高级语言开发此类引擎，但您仅限于其平台支持。

此外，您还需要考虑游戏代码。

我不会担心引擎速度的想法。编写引擎的人知道他们在做什么，除非您花费大量时间优化事物，否则您将不会获得可观的改进。

因此，编写便携式游戏需要大量工作，而没有一个引擎可以解决所涉及的所有问题。

OpenGL-ES 是一个标准。与所有标准一样，每个平台总是有一些小的调整，但没有什么真正令人不安的。

恢复，正确的答案取决于你。计算机科学中的一切都是一种权衡，你只知道所涉及的价值。

希望能帮助到你。

# jsf - jsf 1.2 复合组件支持

> ID：10206020
> 
> 赞同：0
> 
> 时间：2012-04-18T08:54:26.783
> 
> 标签：jsf, jakarta-ee, components, composite-component

JSF 1.2 是否支持创建复合组件？

就像是：

```
<composite:interface>
    ...
</composite:interface>
<composite:implementation>
    ...
</composite:implementation> 
```

或者这在 JSF 2.0 中可用吗？

在 JSF 1.2 中，我唯一的选择是使用`<ui:component>...</ui:component>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:08:04.550

JSF2 中引入了复合组件，您可以查看[此](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)问题以查看可用的替代方案。

# android - AlarmManager 在睡眠模式下不工作

> ID：10206021
> 
> 赞同：6
> 
> 时间：2012-04-18T08:54:29.627
> 
> 标签：android, alarmmanager, android-alarms

我已经设置了一个具有重复时间的 AlarmManagr。这是我设置它的方法：

```
public void setAlarmManager(Context context, Intent intent) {           
    PendingIntent pendingIntent;
    pendingIntent  = PendingIntent.getService(context, 0, intent, 0);               
    AlarmManager alarmManager =
        (AlarmManager)context.getSystemService(context.ALARM_SERVICE);

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, 
                              calendar.getTimeInMillis(), 
                              40000, pendingIntent);                   
} 
```

这工作正常，除非当我的设备进入睡眠模式时，警报停止工作，直到我手动唤醒我的设备。唤醒设备后，AlarmManager 再次开始工作。

即使在睡眠模式下，如何保持管理器运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T20:52:10.957

这是因为您`PendingIntent`调用的是服务而不是服务，`BroadcastReceiver`这意味着设备甚至可以在您的服务创建之前重新进入睡眠状态。如果您移动到广播接收器，它“应该”保持清醒，直到广播接收器的 onReceive 完成，这意味着您将有时间获得唤醒锁并启动您的服务。即使您移动到 ​​a `BroadcastReceiver`，您也将希望获得一个唤醒锁，直到您完成处理，如果它需要超过 10 秒（这是 a 的限制`BroadcastReceiver`）。

这取自 AlarmManager 的 android 文档的第 2 段：

“...如果您的警报接收器呼叫`Context.startService()`，则手机可能会在请求的服务启动之前休眠。为防止这种情况，您的 BroadcastReceiver 和 Service 将需要实施单独的唤醒锁定策略以确保手机继续运行直到服务变得可用。”

# web-services - 安装 WIF 运行时以在 Windows Azure 中托管 .NET 应用程序

> ID：10206022
> 
> 赞同：1
> 
> 时间：2012-04-18T08:54:44.090
> 
> 标签：web-services, azure, assemblies, wif, dynamics-crm-online

我开发了一个自定义应用程序，它能够使用 CRM Web 服务并从自定义 .NET 页面在 CRM 中执行 Windows Live Id 身份验证、创建、读取和更新操作。当我在 Visual Studio 2010 中调试应用程序时，它运行得非常好，但是当我部署相同的应用程序并尝试对其进行身份验证时，它会显示以下错误：

“无法加载文件或程序集 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件。”

我只是想知道如何使用启动任务安装**Microsoft.IdentityModel**程序集。我按照以下链接中的一些步骤操作：

[http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft-identitymodel.aspx](http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft-identitymodel.aspx)

但无法将 RegisterDLL.cmd 添加到我的项目解决方案中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:18:08.080

出色地，

您可以使用 Sandrino 的建议，但也可以使用[这个 powershell script](https://gist.github.com/1037384)。我在几个项目中使用它并且效果很好。它还自动识别 Windows 版本（因为对于 Azure 来宾操作系统系列 1.xx，您必须使用 Windows6.0-xxxxx，而对于来宾操作系统系列 2.xx，您必须使用 Windows6.1-xxx 版本的 KB 更新）。

您可以在一个非常简单的启动任务中执行该 powershell 脚本。创建一个 setup.cmd 文件，您具有以下内容：

```
@echo off
powershell -command "Set-ExecutionPolicy Unrestricted" 2>> err.out
powershell .\Install-WIF-OnAzure.ps1 2>> err.out 
```

并将其作为简单的启动任务运行：

```
 <WebRole name="AzureAndWif" vmsize="Small">
    <Startup>
      <Task commandLine="setup.cmd" executionContext="elevated" />
    </Startup>
   ...
 </WebRole> 
```

希望这也有帮助；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:08:44.063

“无法将 RegisterDLL.cmd 添加到我的项目解决方案”是什么意思？在 Visual Studio 中，只需按照以下步骤操作：

1.  右键单击您的项目
2.  选择添加 > 新项目 > 文本文件
3.  输入以下代码（来自博客文章）：

    ```
    @echo off
    sc config wuauserv start= demand
    wusa.exe "Windows6.1-KB974405-x64.msu" /quiet /norestart
    sc config wuauserv start= disabled
    exit /b 0 
    ```

4.  将文件重命名为 RegisterDLL.cmd

5.  在属性中，将复制到输出目录设置为**始终复制**
6.  转到文件 > 另存为。在 Save 按钮上，单击小箭头并选择 Save with Encoding
7.  选择**Unicode（不带签名的 UTF-8） - 代码页 65001**

这应该足以拥有一个工作文件。现在按照指南的其余部分重新部署您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:15:45.047

如果要将其部署到 Windows Azure，请确保在部署到 Azure 时将 Microsoft.IdentityModel 上的“本地复制”设置为 true。

----------- *****更新***** ----------------

云提示 #9 - 使用启动任务将 Microsoft.IdentityModel 添加到 GAC

[http://blogs.msdn.com/b/benko/archive/2012/04/07/cloud-tip-9-add-microsoft-identitymodel-to-the-gac-with-a-startup-task.aspx](http://blogs.msdn.com/b/benko/archive/2012/04/07/cloud-tip-9-add-microsoft-identitymodel-to-the-gac-with-a-startup-task.aspx)

这应该有帮助...

# spring - Maven Spring文件上传使用uploadTempDir属性

> ID：10206025
> 
> 赞同：1
> 
> 时间：2012-04-18T08:54:52.640
> 
> 标签：spring, file-upload

实际上我的要求是将上传的文件存储在类路径目录中，即`src/main/resources/uploads`. （我正在使用 Maven 项目）

但是调度程序无法找到此路径。我收到以下错误。

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'multipartResolver' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'uploadTempDir' threw exception; nested exception is java.io.FileNotFoundException: class path resource [uploads] cannot be resolved to URL because it does not exist 
```

**在调度程序文件中添加以下配置：**

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="1048576"/>
    <property name="uploadTempDir" ref="uploadDirResource"/>
</bean>

<bean id="uploadDirResource" class="org.springframework.core.io.ClassPathResource">
    <constructor-arg>
        <value>/uploads</value>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:48:14.230

path`src/main/resources(/uploads)`是 Maven 在编译之前使用的路径。您的服务器对这条路径一无所知！

中的人工制品在`src/main/resources(/uploads)`war 文件中复制到目录`WEB-INF/classes/uploads`中。

但是这个目录也包含java类文件，你不应该允许用户修改或添加文件到那个目录！

*您的配置可能不正确的一点是*

`<value>/uploads </value>`

# javascript - jquery 插件选项如何变得未定义？

> ID：10206026
> 
> 赞同：0
> 
> 时间：2012-04-18T08:54:56.687
> 
> 标签：javascript, jquery, plugins, jquery-mobile, options

我正在使用这样的插件结构：

```
(function( $, window) { 
    $.widget("mobile.multiview",$.mobile.widget, {
        options: {  
           switchable: false,           
           },
        create: function() {
           var self = this;
           // returns false
           console.log(self.options.switchable)
           },
        bindings: function() {
           $(document).on( "pagebeforechange", function( e, data ) {
              var self = this,
                  $link = self.options.switchable;
              // this is undefined, when the event fires - function fails
              console.log( $link )  
              });
           }
        }) 
     }) (jQuery,this); 
```

我不明白，选项如何变为*undefined*。我有很多选择，如果我在 pagebeforechange 事件中控制它们，它们都是未定义的。

他们似乎在其他地方都可以工作，所以我不知道他们为什么在这里失败。有什么想法可以引导我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:57:44.353

`this`将是文档而不是小部件，您的范围不同。

只需重新阅读您的代码`$(document).on(... var self = this`。在`create`方法中分配`this`一个变量，该变量将在其他地方可用。

有关如何在此处保留上下文的一些信息：

[如何在 jquery 中保留“this”的上下文](https://stackoverflow.com/questions/1043556/how-can-i-keep-the-context-of-this-in-jquery)

要解决此问题，您也可以将 self 声明移出闭包：

```
 bindings: function() {
       var self = this;
       $(document).on( "pagebeforechange", function( e, data ) {
          var $link = self.options.switchable;
          console.log( $link ); 
       });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:06:23.553

我用于所有 jQuery 插件的插件模板是这样的：

```
(function($){

$.fn.widget = function(options){
   var opts = $.extend({}, $.fn.widget.defaults, options);

return this.each(function(){
   //get a reference to the DOM element.
   var obj = $(this);
   //because you extended your options into your defaults, you can use them like this
   var isSwitchable = opts.switchable; 
};
};
//private function
function sayHello(name){
   alert(name);
};
//public functions
$.fn.widget.sayHello = function(name){
   alert("hello" + name);
};
//default settings
$.fn.widget.defaults = {
    switchable: false
};
})(jQuery); 
```

您可以通过调用 opts 变量在插件中使用您的选项。

# javascript - 附加 jQuery 的内联元素换行

> ID：10206027
> 
> 赞同：1
> 
> 时间：2012-04-18T08:54:57.990
> 
> 标签：javascript, jquery, html, css, forms

我试图构建一个响应式表单，然后我会在我的一些网站中使用它，但被一些细节卡住了。我想用javascript启用输入验证，所以当用户在输入文本框中插入无效输入时，我希望框弹出一条错误消息，输入右侧有一个IMG标签，下面有一个DIV标签输入。我通过将这些元素附加（jQuery）到输入的父元素（一个标签）来实现这一点。

这是基本输入：

```
<label for="errore"><span class="title">Errato</span><input type="text" name="errore" id="errore" size="30" maxlength="30" value="Cliccami e poi esci"/></label> 
```

这是我附加元素的方式。

```
$(this).parent().append("<img class='error' src='css/img/cross.png' alt='error' /><span class='error'>Input non valido.</span>"); 
```

因此，如果用户随后输入正确的输入并退出 INPUT 标签，则错误消息应该会消失。我通过删除这样的元素来做到这一点：

```
$(this).parent().find("*.error").remove(); 
```

它工作得很好。但是，如果我按照这个顺序：错误输入，退出元素，错误消息，正确输入，退出元素，错误消息消失，错误输入，退出元素，错误消息重新出现但图像在新行上！那只是在铬。不知道为什么。它似乎取决于 IMG 元素旁边的元素，如果它是内联元素，它在第一次和第二次都可以正常工作，如果它是块元素，它在第一次和第二次都可以正常工作。

所以，我的问题是图像元素，我不希望它换行，但我希望它旁边的元素是块元素。

我知道这可能不太清楚，所以我将包括我的例子。

[表单示例（JSFiddle）](http://jsfiddle.net/RedKnight91/CCEn2/4/)

在示例中，输入然后退出标题为“Errato”的输入，添加错误消息，然后输入并退出以删除它就足够了。因此，如果您这样做 3 次，您应该会收到错误的错误消息。

看起来图像要显示：块或其他东西，因为效果是那样，但是如果您检查浏览器控制台上的 css，它实际上是 display: inline。

如果您需要更多详细信息，请随时询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:12:32.587

看看这个方法来解决你的问题。我认为您只需将输入字段放在标签元素内，以便更好地添加和删除信息文本。所以这也可能是一个解决方案。

我所做的更改：在 CSS 中：删除了包装 labeltext 的 span 元素

```
label.title{ font-weight:bold; display:block; margin-top:5px; } 
```

在 Javascript 中：直接在输入字段之后添加两个 info 元素，并删除该输入字段的下两个兄弟元素，类为“.error”。还将保存错误消息的跨度更改为 div 元素。

[我也叉了你的小提琴](http://jsfiddle.net/junior87/FsUpG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:03:37.003

行对齐已解决：http: [//jsfiddle.net/CCEn2/6/](http://jsfiddle.net/CCEn2/6/)

所做的更改：
在 CSS 中：删除 - “display:block;” 对于“span.error”

```
span.error{ color: #ac3b2a; font-style: italic; } 
```

在 JS 中：在标签内添加图像

```
$(this).parent().append("<span class='error'><img class='error' src='css/img/cross.png' alt='error' />Input non valido.</span>"); 
```

我希望您的查询是关于内联对齐的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:59:08.250

`float:left`到图像可能会解决它。

# google-maps-api-3 - Search in Fusion Tables and Zoom to results

> ID：10206033
> 
> 赞同：0
> 
> 时间：2012-04-18T08:55:27.593
> 
> 标签：google-maps-api-3, google-fusion-tables

Hi all here's my situation: [http://www.tamrielma.ps/skyrim/](http://www.tamrielma.ps/skyrim/)

I've added a search based on this well know example: [https://developers.google.com/fusiontables/docs/samples/autocomplete](https://developers.google.com/fusiontables/docs/samples/autocomplete) But it's not enough :D and I want that the map zooms and centers on the basis of the search results (that's a single markers not a group of, so I imagine that's not a "bound related" solution).

Thanks in advance for any suggestion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:13:40.460

Interesting map. :-) I see you are already using the Google.visualization library for your autocompplete set up. I think that the same library (which uses FT JSONP API I believe) could be used to get the location values via a a callback, similar to your getData() callback. E.g.

```
function changeQuery(value) {
 value = value.replace("'", "\\'");
 layerMarkers.setQuery("SELECT Location FROM "+ fusione +" WHERE Name = '" + value + "'");

 // ADDED, using same query as above
  var queryText = encodeURIComponent( "SELECT Location FROM "+ fusione +" WHERE Name = '" + value + "'");
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
  query.send(getLocationData);

}
// location may need parsing into LatLng object
function getLocationData(response) {
    numRows = response.getDataTable().getNumberOfRows();
    if(numRows == 1){
          var loc_str = response.getDataTable().getValue(0, 0));
          var tmp = loc_str.split(" ");
          var lat = parseFloat(tmp[0]);
          var lng = parseFloat(tmp[1]);
          var zoom_level = 10;
          var location = new google.maps.LatLng(lat,lng);
          map.setCenter(location);
          map.setZoom(zoom_level);
    }

} 
```

# vb.net - 在 VB.NET 中调用另一种形式差异

> ID：10206036
> 
> 赞同：1
> 
> 时间：2012-04-18T08:55:33.733
> 
> 标签：vb.net

这些有什么区别？

**一个。）**

```
 Using xForm as New frmCall()
      xForm.ShowDialog()
 End Using 
```

**乙）**

```
 Dim xForm as new frmCall()
 xForm.ShowDialog()
 xForm.Dispose 
```

**C。）**

```
 frmCall.Show() 
```

他们都在展示表格，我知道它有区别。它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:38:35.640

除了 Dispose()（Reed 介绍过）之外，Show() 和 ShowDialog() 是一个很大的区别。

ShowDialog() 是一个阻塞调用，这意味着方法不会退出，直到您刚刚在屏幕上弹出的对话框被解除。对话框位于您的应用程序之上，并阻止您与下面的其他表单进行交互。这一切都被称为“模态”行为。

Show() 不会阻塞。该方法将使表单可见，然后继续。您可以通过这种方式显示多个表单并在它们之间单击/切换，没有任何限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:00:18.453

前两个例子非常相似。

主要区别在于，在第一种情况下，如果在 ShowDialog 中引发异常，Dispose 调用仍然会发生。在“B”中，如果您在 ShowDialog 中引发异常，则永远不会发生 Dispose 调用。

最后一个选项永远不会在 frmCall 实例上调用 Dispose。

# jqgrid - 如何将空行添加到 JQGrid

> ID：10206046
> 
> 赞同：1
> 
> 时间：2012-04-18T08:56:19.207
> 
> 标签：jqgrid

我有分页网格。每页最多有 10 行。如果我只有 3 条记录，我需要显示 7 个空行，

像excel表格布局

像这样：

![在此处输入图像描述](../Images/ddb9c93cb60d64cc62e0192e7c53a6bd.png)

我得到了**解决方案**：

```
loadComplete: function (data) {
                var pagesize = jQuery("#list5").jqGrid('getGridParam', 'rowNum');
                if (data.rows.length < pagesize) {
                    for (i = 0; i < pagesize - data.rows.length; i++) {
                        $("#list5").addRowData(i + 1, {});
                    }
                }
            } 
```

如果有任何其他有效的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:40:06.870

问题在于右下角的页数是错误的：它们包括空白行。例如，当只有 95 行时“查看 91 到 100”。这是一个解决方案：

```
loadComplete: function (data) {
  var grid = jQuery("#list5"),
    pageSize = parseInt(grid.jqGrid("getGridParam", "rowNum")),
    emptyRows = pageSize - data.rows.length;

  if (emptyRows > 0) {
    for (var i = 1; i <= emptyRows; i++)
        // Send rowId as undefined to force jqGrid to generate random rowId
        grid.jqGrid('addRowData', undefined, {});

    // adjust the counts at lower right
    grid.jqGrid("setGridParam", {
      reccount: grid.jqGrid("getGridParam", "reccount") - emptyRows,
      records: grid.jqGrid("getGridParam", "records") - emptyRows
    });
    grid[0].updatepager();
  }
} 
```

# asp.net - 如何在 ASP NET MVC 中使用自定义 SiteMapProvider？

> ID：10206047
> 
> 赞同：0
> 
> 时间：2012-04-18T08:56:21.097
> 
> 标签：asp.net, asp.net-mvc-3, web-config, sitemapprovider, security-trimming

我目前正在尝试实现自定义站点地图提供程序。我已经阅读了几个关于它的教程，并遵循了他们的领导。

我创建了一个名为 MySiteMapProvider 的 XmlSiteMapProvider 子类，它位于 MyProject.Security 中。

我已将以下代码添加到我的 Web.config 的 system.web 部分：

```
 <siteMap defaultProvider="MySiteMapProvider" enabled="true">
        <providers>
            <add name="MySiteMapProvider"
              description="Custom SiteMap provider."
              type="MyProject.Security.MySiteMapProvider "
              siteMapFile="Web.sitemap"
              securityTrimmingEnabled="true" />
        </providers>
    </siteMap> 
```

但我确信我的 Provider 使用不正确。我什至无法从实施开始。为了验证我是否包含了以下（伪）实现：

```
 public override bool IsAccessibleToUser(System.Web.HttpContext context, System.Web.SiteMapNode node)
    {
        Debug.Print("Hello World");
        throw new Exception();            
        return base.IsAccessibleToUser(context, node);
    }
    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection attributes)
    {
        Debug.Print("Hello World");
        throw new Exception();     
        base.Initialize(name, attributes);
    }
    public override SiteMapNode BuildSiteMap()
    {
        Debug.Print("Hello World");
        throw new Exception();     
        return base.BuildSiteMap();
    } 
```

但是我可以使用该站点并尽可能多地导航，没有出现异常，并且调试控制台根本没有显示 Hello World。

我是不是忘记了什么重要的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:11:34.987

我没有实现自己的 Provider，而是使用了[MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)。我需要实现的行为的定制是在一天内通过动态站点地图和自定义 SiteMapNodeVisibilityProvider 实现的。

我还考虑过实现整个 SiteMapProvider，也许是在 SQL 的基础上，我很高兴我不必这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:28:21.763

`System.Web.SiteMap.RootNode`尝试从代码调用。

# java - Struts2 portlet 在 Liferay 刷新时执行默认操作（而不是当前操作）

> ID：10206048
> 
> 赞同：2
> 
> 时间：2012-04-18T08:56:22.307
> 
> 标签：java, struts2, liferay, portlet

**编辑：**编辑标题以反映新发现。第二个 portlet 是什么类型的 portlet 并不重要。请参阅下面的一般行为：

1.  我在页面上有一个 Struts2 portlet A，它的默认“索引”操作是 pageA1。
2.  我单击 A1 上的链接并转到 pageA2。
3.  我刷新页面，portlet A 仍然显示 pageA2。
4.  页面上还有其他 portlet。我选择任何一个 portlet B 并单击 B1 上的链接。
5.  Portlet B 导航到 B2。同时，Liferay 刷新页面上的其他 portlet，包括 Struts2 portlet A。
6.  portlet A 刷新后的预期结果是 pageA2，*但是显示的页面是 pageA1！*

症状：

我在 struts 操作中添加了一些日志记录以显示传递的参数。在正常导航期间（即我只是单独使用struts2 portlet A），显示参数struts.portlet.action 和struts.portlet.mode。但是，如果由于另一个 portlet B 的呈现/操作阶段而在 struts2 portlet A 上发生自动刷新，则这些参数似乎不会传递给 struts2，因此 portlet A 默认返回其索引 pageA1，而不是页面显示在刷新之前（pageA2）。

这是否意味着由于 struts2 没有检测到 struts.portlet.action 参数，它将调用默认操作（在这种情况下，我将其设置为“index”->pageA1）？

* * *

*旧细节*

我有一个项目设置有两个portlet，都使用Struts2 框架。这两个portlet 实际上彼此非常相似，但是它们的代码存在于不同的包中，并且在struts.xml 中，它们的Action 定义在具有自己名称空间的单独模块中。但是，它们仍然是一个项目的一部分，并且一起打包在一个 WAR 文件中。

我将 WAR 部署到 Liferay，并将两个 portlet 添加到单个页面。当我使用这两个 portlet 时，会发生以下行为：

1.  单击 Portlet A 上的链接。
2.  Portlet A 加载到屏幕 A2 中。
3.  单击 Portlet B 上的链接。
4.  Portlet B 加载到屏幕 B2 中。
5.  然而，作为一个副作用，Portlet A 刷新并且显示的屏幕是它的“索引”页面（而不是屏幕 A2）。

这是预期的行为，还是我应该做些什么来使这个特定的设置在单个门户页面中工作？

**编辑：** 我单击的链接是 renderURLs（使用 s:url 标签生成）。两个 portlet 的第二页都包含表单，我不确定这些表单是否有意义。

我添加了一些简单的日志记录，基于它，我发现在每次页面刷新时，两个 portlet 都会被渲染两次。我不认为这是一种自然的行为。

这是我的 struts.xml，如果它有任何用处：

```
<package name="portletA" extends="struts-portlet-default" namespace="/portletA">

    <action name="index" class="my.a.DisplayFirstPageAction">
        <result name="success">/pageA1.jsp</result>
    </action>

    <action name="displayForm" class="my.a.DisplaySecondPageAction">
        <result name="input">/pageA2.jsp</result>
    </action>
</package>
<package name="portletB" extends="struts-portlet-default" namespace="/portletB">

    <action name="index" class="my.b.DisplayFirstPageAction">
        <result name="success">/pageB1.jsp</result>
    </action>

    <action name="displayForm" class="my.b.DisplaySecondPageAction">
        <result name="input">/pageB2.jsp</result>
    </action>
</package> 
```

在这两个portlet 上，pageA1.jsp 都有一个链接，该链接调用struts 操作“displayForm”。FirstPageAction 的执行方法返回 SUCCESS，而 SecondPageAction 的执行方法返回 INPUT。

我认为这可能是因为我的第二个操作没有“成功”结果（我的 execute() 方法返回“输入”，因为我在页面中有一个表单）。但是，添加 result=success 标签并没有帮助。

大声思考，如果我在渲染 B2 时单击 A1 的链接，则应该调用 B2 的渲染/执行操作，但似乎调用了 B1 的渲染/执行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:39:06.337

检查[http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution)，特别是以下段落：

Portlet 规范为 Portlet 的每个请求定义了两个阶段，以允许门户网站区分何时执行操作（并且不应重复）和何时生成（呈现）内容：

*   ***动作阶段***：动作阶段一次只能为一个 portlet 调用，通常是用户与 portlet 交互的结果。在此阶段，portlet 可以更改其状态，例如更改 portlet 的用户首选项。还建议在此阶段执行数据库中不应重复的任何插入和修改或操作。
*   ***渲染阶段***：在操作阶段（可能存在也可能不存在）之后，总是为页面中的所有 portlet 调用渲染阶段。这包括也已执行其操作阶段的 portlet。重要的是要注意，页面中 portlet 的呈现阶段的执行顺序不受 portlet 规范的保证。Liferay 通过 liferay-portlet.xml 中的元素 render-weight 对规范进行了扩展。具有较高渲染权重的 Portlet 将在具有较低值的 Portlet 之前渲染。

[...]

Portlet 可以生成三种类型的 URL：

*   ***renderURL***：这是我们目前使用的 URL 类型。它仅使用其呈现阶段来调用portlet。
*   ***actionURL***：这种类型的 URL 告诉 portlet 它应该在呈现页面中的所有 portlet 之前执行其操作阶段。
*   ***resourceURL***：这种类型的 URL 可用于检索图像、XML、JSON 或任何其他类型的资源。它通常用于动态生成图像或其他媒体类型。向服务器发出 AJAX 请求也非常有用。此 URL 类型与其他两种类型的主要区别在于，portlet 可以完全控制将作为响应发送的数据。

所以我猜你正在使用*actionURL*去页面 A2 而不是*renderURL*。

# c# - 是否可以将不同的接口绑定到实现所有这些接口的类的同一个实例？

> ID：10206049
> 
> 赞同：40
> 
> 时间：2012-04-18T08:56:32.247
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject, ninject-3

我有以下（简化的）情况：我有两个接口

```
interface IAmAnInterface
{
    void DoSomething();
} 
```

和

```
interface IAmAnInterfaceToo
{
    void DoSomethingElse();
} 
```

和一个实现两者的类：

```
class IAmAnImplementation: IAmAnInterface, IAmAnInterfaceToo
{
    public IAmAnImplementation()
    {
    }

    public void DoSomething()
    {
    }

    public void DoSomethingElse()
    {
    }
} 
```

现在我使用 Ninject 将同一个类绑定到两个接口。因为我想要使用相同的beeing*实例*，很明显我需要某种单例。我玩过[ninject.extensions.namedscope](https://github.com/ninject/ninject.extensions.namedscope)以及但没有成功。我最后一次尝试是：`IAmAnImplementation``IAmAnInterface``IAmAnInterfaceToo``InScope()`

```
Bind<IAmAnImplementation>().ToSelf().InSingletonScope();
Bind<IAmAnInterface>().To<IAmAnImplementation>().InSingletonScope();
Bind<IAmAnInterfaceToo>().To<IAmAnImplementation>().InSingletonScope(); 
```

但不幸的是，当我通过`kernel.Get<IDependOnBothInterfaces>();`它请求我的测试类的实例时，实际上使用了不同的`IAmAnImplementation`.

```
class IDependOnBothInterfaces
{
    private IAmAnInterface Dependency1 { get; set; }
    private IAmAnInterfaceToo Dependency2 { get; set; }

    public IDependOnBothInterfaces(IAmAnInterface i1, IAmAnInterfaceToo i2)
    {
        Dependency1 = i1;
        Dependency2 = i2;
    }

    public bool IUseTheSameInstances
    {
        get { return Dependency1 == Dependency2; } // returns false
    }
} 
```

有没有办法告诉 Ninject 使用相同的`IAmAnImplementation`for`IAmAnInterface`和 as实例`IAmAnInterfaceToo`？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-18T09:32:45.660

使用V3.0.0非常容易

```
Bind<I1, I2, I3>().To<Impl>().InSingletonScope(); 
```

# ms-access - “对象打开时不允许操作”

> ID：10206050
> 
> 赞同：2
> 
> 时间：2012-04-18T08:56:32.943
> 
> 标签：ms-access, vb6

当我尝试执行程序时，我收到一个错误，例如“对象打开时不允许操作”。我正在使用 vb 6.0 和 microsoft access 数据库。这是源代码

```
Private Sub cmdDelete_Click()
        dtaOverhead.Recordset.Open "Delete from variable where SWACTFM= " & txtEntry(0).Text & " And SWBUDACT = " & txtEntry(1).Text & " And SWREMFM = '" & txtEntry(12).Text & "' And SWACTRAW = " & txtEntry(2).Text & " And SWBUDRAW = " & txtEntry(3).Text & " And SWREMRAW = '" & txtEntry(13).Text & "' And SWACTWHS = " & txtEntry(4).Text & " And SWBUDWHS = " & txtEntry(5).Text & " And SWREMWHS = '" & txtEntry(14).Text & "' And SWACTLAB = " & txtEntry(6).Text & " And SWBUDLAB = " & txtEntry(7).Text & " And SWREMLAB = '" & txtEntry(15).Text & "' And SWACTWORK = " & txtEntry(8).Text & " And SWBUDWORK = " & txtEntry(9).Text & " And SWREMWORK = '" & txtEntry(16).Text & "' And SWACTTOTAL = " & txtEntry(10).Text & " And SWBUDTOTAL = " & txtEntry(11).Text & " And SWREMTOTAL = '" & txtEntry(17).Text & "'"
        MsgBox "Record deleted successfully !", vbInformation, "Deletion Successful"
        Call Filllist
        Call clearall
        cmdSave.Caption = "&Save"

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:31:44.663

您不能两次打开一个记录集（呃，无论如何都不会在两者之间关闭它）。

A`DELETE`通常使用`Connection.Execute`or `Command.Execute`， not来完成`Recordset.Open`。

# asp.net - 如何在 .net 2010 中隐藏按钮？

> ID：10206058
> 
> 赞同：0
> 
> 时间：2012-04-18T08:57:16.767
> 
> 标签：asp.net, vb.net, visual-studio, visual-studio-2010, asp.net-controls

我有一个简单的网络，它有一个下拉列表和表单上的一个按钮。下拉列表绑定到我的数据库中的一个表，并包含三个值，其 idents 介于​​ 1 和 3 之间（每周、每月、请选择）。

我已将数据源设置为将第 3 项（请选择）作为下拉列表中的第一项，以提示用户选择一个选项。项目 1 和 2 具有分配给它们的数据，这会拉回这些选项的相关数据。

这是我的问题。我需要在页面加载时隐藏我的按钮，直到用户选择项目 1 或 2 并希望选择选项 3 的隐藏按钮。我试图在我的页面加载事件和下拉列表的代码中完成这个，但我似乎无法让它工作。

```
 If IsNumeric(DropDownList1.SelectedValue) = 3 Then
        btnAddAgendaTemplate.Visible = False
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:02:54.437

编辑：（基于评论）
在 Selected Index changed 事件中，下拉检查 selectedvalue 是否为 3 并进行相应处理

假设您的 selectedIndexChanged 事件在您的代码中是这样的：

```
Protected Sub DropDownList1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DropDownList1.SelectedIndexChanged
 If DropDownList1.SelectedValue.Equals("3") Then
     btnAddAgendaTemplate.Visible = False
 End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:59:48.797

将比较更改为：

```
 If DropDownList1.SelectedValue = "3" Then
        btnAddAgendaTemplate.Visible = False
    End If 
```

该函数[`IsNumberic`](http://msdn.microsoft.com/en-us/library/6cd3f6w1(VS.90).aspx)只是确认这是否是数字而不是将其转换为数字，而不是将其与3进行比较。现在SelectedValue是一个字符串，所以直接将其与“3”进行比较，没有理由将其转换为数字为这是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:16:32.243

在页面加载事件中编写以下代码

```
If Not Page.IsPostBack() Then
//Set default value in drop down list as 3
End 
```

和

编写下拉选择索引更改事件并在其中编写以下代码。

```
If DropDownList1.SelectedValue = "3" Then
    btnAddAgendaTemplate.Visible = False
ELSE
    btnAddAgendaTemplate.Visible = True
END 
```

# java - 通过 Shell Script 运行 Java 程序时遇到一些问题

> ID：10206063
> 
> 赞同：0
> 
> 时间：2012-04-18T08:57:38.527
> 
> 标签：java, shell

我已经为自动 1) 启动 hadoop 服务 (namenode,datanode,jobtracker,tasktracker,secondary namenode) 编写了一个 shell 脚本，2) 从 hive 中删除所有表 3) 再次从 SQL SERVER 导入 hive 中的所有表

我从java调用这个shell脚本。下面是Shell Script和Java Code的代码

外壳脚本：

```
export HADOOP_HOME=/home/hadoop/hadoop-0.20.2-cdh3u2/
export HIVE_HOME=/home/hadoop/hive-0.7.1/
export SQOOP_HOME=/home/hadoop/sqoop-1.3.0-cdh3u1/
export MSSQL_CONNECTOR_HOME=/home/hadoop/sqoop-sqlserver-1.0
export HBASE_HOME=/home/hadoop/hbase-0.90.1-cdh3u0
export ZOOKEEPER_HOME=/home/hadoop/zookeeper-3.3.1+10
export SQOOP_CONF_DIR=/home/hadoop/sqoop-1.3.0-cdh3u1/conf/

/home/hadoop/hadoop-0.20.2-cdh3u2/bin/hadoop/start-all.sh
/home/hadoop/hadoop-0.20.2-cdh3u2/bin/hadoop -rmr /user/hadoop/*

/home/hadoop/hive-0.7.1/bin/hive -e 'show tables' > TablesToDelete.txt
while read line1
do
    echo 'drop table '$line1
    /home/hadoop/hive-0.7.1/bin/hive -e 'drop table '$line1
done < TablesToDelete.txt

while read line
do
    echo $line" ------------------------------"
/home/hadoop/sqoop-1.3.0-cdh3u1/bin/sqoop-import --connect 'jdbc:sqlserver://192.168.1.1;username=abcd;password=12345;database=HadoopTest' --table line --hive-table $line  --create-hive-table --hive-import -m 1 --hive-drop-import-delims --hive-home /home/hadoop/hive-0.7.1 --verbose
done < /home/hadoop/sqoop-1.3.0-cdh3u1/bin/tables.txt 
```

Java 代码：

```
public class ImportTables
{

    public static void main(String arsg[])
    {
        PrintWriter pw=null;
        try
        {
            Formatter formatter = new Formatter();
            String LogFile = "Log-"+ formatter.format("%1$tm%1$td-%1$tH%1$tM%1$tS", new Date());   
            File f=new File("/home/hadoop/"+LogFile);
            FileWriter fw1=null;   
            pw=new PrintWriter(f);

            String cmd = "/home/hadoop/sqoop-1.3.0-cdh3u1/bin/TablesToImport.sh"; // this is the command to execute in the Unix shell

            // create a process for the shell
            ProcessBuilder pb = new ProcessBuilder("bash", "-c", cmd);
            pb.redirectErrorStream(true); // use this to capture messages sent to stderr
            Process shell = pb.start();
            InputStream shellIn = shell.getInputStream(); // this captures the output from the command
            int shellExitStatus = shell.waitFor();
            // wait for the shell to finish and get the return code
            // at this point you can process the output issued by the command

            // for instance, this reads the output and writes it to System.out:
            int c;
            while ((c = shellIn.read()) != -1)
            {
                System.out.write(c);
            }

            // close the stream
            shellIn.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            e.printStackTrace(pw);
            pw.flush();
            System.exit(1);
        }

    }
} 
```

但是当我运行程序时，我在控制台上什么也看不到，程序仍处于运行模式。如果我把下面的代码离子外壳脚本：

```
/home/hadoop/hive-0.7.1/bin/hive -e 'show tables' > TablesToDelete.txt
while read line1
do
    echo 'drop table '$line1
    /home/hadoop/hive-0.7.1/bin/hive -e 'drop table '$line1
done < TablesToDelete.txt 
```

然后输出如下：

> 找不到 hadoop 安装：必须设置 $HADOOP_HOME 或 hadoop 必须在路径中

我的程序/脚本有什么问题？在哪里以及如何在我的脚本中设置 HADOOP_HOME 和所有路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:01:56.753

`waitFor`顾名思义，调用是阻塞调用。它会停止进一步的执行，直到该过程完成。但是由于您的代码也是进程标准输出的接收器，因此整个过程都会阻塞。处理完脚本的输出**后**，只需将 移至`waitFor`。

# android - 使用 Monkeyrunner 进行游戏测试

> ID：10206065
> 
> 赞同：3
> 
> 时间：2012-04-18T08:57:46.917
> 
> 标签：android, unit-testing, cocos2d-iphone, andengine, monkeyrunner

是否可以使用 Android Monkeyrunner 工具测试游戏。使用 AndEngine 或 Cocos2D 开发的游戏。如果是，我们如何在测试代码中获取精灵？

使用 By class 我们可以在屏幕上获取 Android 组件（文本字段、按钮...），但是我们如何获取精灵呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:43:23.090

Monkeyrunner 只了解坐标。要按下按钮，您需要传递 x,y 坐标。它不可能单独从显示中捕获精灵。它可以捕获显示缓冲区并写入图像文件。因此，为了测试整个图像中特定精灵的存在，您可以从命令行使用 imagemagick compare.exe。

例如

1.  从monkeyrunner 捕获整个图像。
2.  有一个参考精灵图像进行比较。
3.  从命令行执行下面提到的

    compare.exe -metric NCC deviceRefImg WholeImage diffimage.png

输出值（NCC）是指精灵是否存在于整个图像中。

谢谢你。

# c# - 在用户程序中添加网站快捷方式：http://www.google.com？

> ID：10206067
> 
> 赞同：0
> 
> 时间：2012-04-18T08:57:48.143
> 
> 标签：c#, winforms, shortcut, setup-deployment

我想为网站添加网站快捷方式：[http](http://www.google.com) ://www.google.com在用户程序中（开始->所有程序）在窗口窗体 C# 中，同时我们安装我们的软件设置，它像在用户程序中一样安装：-

演示（所有程序中的文件夹）

- 演示软件快捷方式

- 网站链接

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:13:51.567

您没有指定创建它的方式或内容。对于完全手动的方式

```
string fullURLYouWant = "http://www.google.com/";
using (StreamWriter writer = new StreamWriter(yourPath + "\\" + yourShortCutFileName + ".url"))
{
    writer.WriteLine("[InternetShortcut]");
    writer.WriteLine("URL=" + fullURLYouWant);
    writer.WriteLine("IconIndex=0");
    writer.WriteLine("IconFile=" + iconFileForYourUrl);
    writer.Flush();
} 
```

# image - matlab：读取图像的子部分

> ID：10206070
> 
> 赞同：1
> 
> 时间：2012-04-18T08:58:00.963
> 
> 标签：image, matlab, image-processing

我有一系列大图像，我想加载到 matlab 中，然后也进行一些处理。由于图像大小，读取它们需要很长时间，并且会很快填满计算机内存。

但是，我只对图像的中间部分感兴趣，大约 100 x 100 像素左右的区域。

有没有办法只读取图像的那个部分，从而节省时间和内存？

目前我正在使用：

```
ROIx = 450:550;
ROIy = 650:750;
image = double( imread( filename ) );
image = image(ROIx, ROIy); 
```

但是，imread() 会加载整个图像，这需要很长时间。有没有办法只阅读我感兴趣的部分？

（一个过程是将每个图像裁剪成一个较小的图像并重新保存。但我不想裁剪图像）。

谢谢，实验室迷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:07:50.087

Matlab 2012a 表明您可以从 JPEG2000 和 TIFF 图像中读取部分图像。查看 imread 的文档，检查选项 'PixelRegion' 以读取 TIFF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:21:09.773

您将需要使用[fopen](http://www.mathworks.com/help/techdoc/ref/fopen.html)之类的工具来打开文件并手动读取部分内容。当然，您将需要处理大量的编码/解码。或者反过来一点，就是增加系统的[交换空间。](http://www.mathworks.com/help/techdoc/matlab_prog/brh72ex-49.html)如果您遇到内存不足错误。

# ios - iOS 应用程序如何在后台运行时减少其内存占用？

> ID：10206080
> 
> 赞同：2
> 
> 时间：2012-04-18T08:58:54.507
> 
> 标签：ios, memory, background, instruments

我使用工具来跟踪一些 iOS 应用程序的内存使用情况，例如 Path、Instagram、Facebook。我发现，虽然前台应用程序占用了太多内存，但会导致“无物理内存”非常紧张。当内存空闲达到它的下限，可能是 10M 时，系统开始减少后台应用程序的内存大小，例如 Path 逐渐将内存从大约**70M 下降到 40M**。

我想知道这是怎么发生的，我发现我自己的应用程序在后台没有这种行为。如果需要，我应该怎么做才能使我的应用程序能够减少它在后台的内存占用？

# mkmapview - iOS：本地化 MKMapView 措辞

> ID：10206081
> 
> 赞同：1
> 
> 时间：2012-04-18T08:58:58.830
> 
> 标签：mkmapview, ios5

使用 MKMapView 来识别用户的位置时，该位置是用 Annotation “当前位置”固定的。

我可以使用更改“当前位置”的措辞吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:18:26.697

您可以通过设置更改当前位置注释的标题和副标题

```
mapView.userLocation.subtitle = @"mySubt";
mapView.userLocation.title = @"title"; 
```

# axapta - 如何设置报表页面大小？

> ID：10206084
> 
> 赞同：1
> 
> 时间：2012-04-18T08:59:24.653
> 
> 标签：axapta, dynamics-ax-2009

也许这是一个新手问题，但我不知道如何以及在哪里设置页面大小？

生成的设计和 AutoDesignSpec 有什么区别？

为什么我会在任一部分下找到相同的对象（标签、文本框等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:20:31.160

要设置页面大小，请右键单击报表的设计节点，然后选择“打印机设置”以选择打印机，并选择“页面设置”以选择纸张和方向。

通过[谷歌搜索](http://objectmix.com/axapta/788204-difference-between-autodesignspecs-generateddesign-reports.html)：

> 使用 AutoDesignSpecs，您可以为 AX 元数据提供您想要放入报告中的内容，并且 AX 将此呈现为运行时以获取布局。这是一种非常灵活的报表声明方式，应该用于大多数常规报表。
> 
> 使用 GeneratedDesign，您可以创建布局并控制放置所有内容的位置。这是发票或装箱单等文件所需要的东西。

您会在两者中找到相同的对象名称，因为生成的设计最初是从自动设计创建的，产生相同的节点名称。

另请参阅[最佳实践](http://msdn.microsoft.com/en-us/library/aa865736.aspx)。

# jsp - JSP c:out 指令未处理

> ID：10206085
> 
> 赞同：1
> 
> 时间：2012-04-18T08:59:25.007
> 
> 标签：jsp, jakarta-ee

我在 Java EE Web 应用程序中使用 JSP 2.1。

我的 JSP 页面是这样的：

```
<html><body>
<% String myText = (String) request.getAttribute("myText"); %>
<h1><c:out value="${myText}"/></h1>
</body></html> 
```

如果 myText="h & b"，则生成的 html 页面为：

```
<html><body>
<h1><c:out value="h & b"/></h1>
</body></html> 
```

因此，尚未处理 c:out 指令。

将第一行替换为：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jsp/jstl/core"> 
```

没有帮助；仍然是同样的问题。

如果我在 jsp 页面的顶部添加以下行：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

或者这个：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %> 
```

我收到以下错误： *找不到带有此 URI 的标记库。可能的原因可能是 URI 不正确，或者在解析 .tld 文件期间出现错误。*

问题是什么？

ps：我应该阅读哪些文档？我正在阅读 JSP 2.1 规范，但没有找到答案。 [http://download.oracle.com/otn-pub/jcp/jsp-2.1-fr-eval-spec-oth-JSpec/jsp-2_1-fr-spec.pdf](http://download.oracle.com/otn-pub/jcp/jsp-2.1-fr-eval-spec-oth-JSpec/jsp-2_1-fr-spec.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:07:44.707

您需要在类路径中有一个 JSTL 实现。例如，您可以[从 Apache 下载实现](http://tomcat.apache.org/taglibs/standard/)。

# iphone - 如何在 iOS 应用程序中打开 VRML(*.wrl) 文件

> ID：10206089
> 
> 赞同：2
> 
> 时间：2012-04-18T08:59:34.887
> 
> 标签：iphone, ios, vrml

我有 VRML(*.wrl) 文件，我想在我的 iOS 应用程序中打开该文件。有没有办法做到这一点，即任何 SDK 或其他方式。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:15:48.167

[**Cortona3D**](http://www.cortona3d.com/Products/Viewer/Cortona3D-Viewer-for-iOS.aspx)是一个非常好的 .wrl 文件查看器：

![适用于 iOS 的 Cortona3D](../Images/fba964fa973cf18d361a4ea8ab176147.png)

* * *

但是，如果您想制作自己的应用程序并且不介意高昂的价格和低于标准的文档，则可以改用[**BS Contact iOS**](http://www.bitmanagement.com/en/download)（尽管使用此查看器的应用程序从未上过 App Store）。

# nuget - 如何通过 NuGet 安装旧版本的包？

> ID：10206090
> 
> 赞同：393
> 
> 时间：2012-04-18T08:59:38.300
> 
> 标签：nuget, nuget-package

我想安装旧版本的包 ( `Newtonsoft.Json`)。但 NuGet 回滚：

```
PM> Install-Package Newtonsoft.Json -Version 4.0.5
Successfully installed 'Newtonsoft.Json 4.0.5'.
Install failed. Rolling back...
Install-Package : Already referencing a newer version of 'Newtonsoft.Json'. 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：584
> 
> 时间：2012-04-18T15:25:04.023

尝试以下操作：

```
Uninstall-Package Newtonsoft.Json -Force 
```

其次是：

```
Install-Package Newtonsoft.Json -Version <press tab key for autocomplete> 
```

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2014-02-12T23:09:13.090

从**NuGet 2.8**开始，有一个**降级**包的功能。

[NuGet 2.8 发行说明](http://docs.nuget.org/docs/release-notes/nuget-2.8)

例子：

输入包管理器控制台的以下命令会将 Couchbase 客户端降级到版本 1.3.1.0。

```
Update-Package CouchbaseNetClient -Version 1.3.1.0 
```

结果：

```
Updating 'CouchbaseNetClient' from version '1.3.3' to '1.3.1.0' in project [project name].
Removing 'CouchbaseNetClient 1.3.3' from [project name].
Successfully removed 'CouchbaseNetClient 1.3.3' from [project name]. 
```

**[根据下面的 crimbo](https://stackoverflow.com/questions/10206090/how-can-i-install-an-older-version-of-a-package-via-nuget/21741899#comment43303798_21741899)需要注意的事项：**

> *This approach doesn't work for downgrading from one prerelease version to other prerelease version - it only works for downgrading to a release version*

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2013-06-25T14:18:54.427

我已经多次使用[Xavier 的答案](https://stackoverflow.com/questions/10206090/how-can-i-install-an-older-version-of-a-package-via-nuget/10212667#10212667)。我想补充一点，在最新版本的 NuGet 中，将包版本限制在指定范围内既简单又有用。

例如，如果您不想在项目`Newtonsoft.Json`中更新过去的版本`3.x.x`，请将文件中的相应`package`元素更改`packages.config`为如下所示：

```
<package id="Newtonsoft.Json" version="3.5.8" allowedVersions="[3.0, 4.0)" targetFramework="net40" /> 
```

注意`allowedVersions`属性。这会将该软件包的版本限制为`3.0`( **inclusive** ) 和`4.0`( **Exclusive** ) 之间的版本。然后，当您执行`Update-Package`整个解决方案时，您无需担心该特定包被更新为过去版本`3.x.x`。

此功能的文档在[此处](http://docs.nuget.org/docs/reference/versioning)。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-10-27T10:18:03.073

Now, it's very much simplified in **Visual Studio 2015 and later**. You can do *downgrade / upgrade* within the User interface itself, without executing commands in the Package Manager Console.

1.  *Right click on your project* and *go to *Manage NuGet Packages*.

2.  Look at the below image.

    *   `Select your Package and Choose the Version`, which you wanted to install.

[![NuGet Package Manager window of Project](../Images/9f567bd25d9dab4d2abcf2bb147b3c7f.png)](https://i.stack.imgur.com/AvOkE.png)

***Very very simple, isn't it?*** :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-31T07:01:26.993

Another more manual option to get it:

```
.nuget\nuget.exe install Newtonsoft.Json -Version 4.0.5 
```

# asp.net - Web 应用程序中的 QuickBooks 导出功能

> ID：10206092
> 
> 赞同：0
> 
> 时间：2012-04-18T08:59:40.737
> 
> 标签：asp.net, c#-4.0, quickbooks

我必须在我的网络应用程序中使用但我对此一无所知。请帮我解决这个问题。或给我合适的链接，这也说明了它的基本情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:18:18.683

有一个类似的问题，就像你在这篇文章中的问题这个问题是使用 asp.net 的 quickbooks 上经常被问到的问题之一

请关注这个话题

[将 ASP.NET 应用程序连接到 QuickBooks Online Edition](https://stackoverflow.com/questions/1093030/connecting-an-asp-net-application-to-quickbooks-online-edition)

# java - Java：Java5 枚举自定义序列化

> ID：10206093
> 
> 赞同：0
> 
> 时间：2012-04-18T08:59:43.780
> 
> 标签：java, serialization, enums

为了序列化大型枚举实例，我正在考虑使用“序列化代理”，其中代理对象将是一个非常小的对象，唯一地标识相应的枚举实例。但是我发现枚举忽略了任何读/写对象或解析/替换方法。所以我的问题是，我将如何有效地序列化大型枚举实例？字符串/XML 表示是可能的，但我的感觉是这将是一个维护问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:34:40.810

您正在重新发明 Java 序列化默认情况下已经完成的工作：

引自 [http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/relnotes15.html](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/relnotes15.html)：

> 5.0 版中新增了对序列化处理枚举类型的支持。序列化枚举实例的规则与序列化“普通”可序列化对象的规则不同：枚举实例的序列化形式仅包含其枚举常量名称以及标识其基本枚举类型的信息。反序列化行为也不同——类信息用于查找适当的枚举类，并使用该类和接收到的常量名称调用 Enum.valueOf 方法，以获得要返回的枚举常量。

# java - java：使用 StringBuffer 反转单词而不使用 String.split

> ID：10206096
> 
> 赞同：0
> 
> 时间：2012-04-18T08:59:50.943
> 
> 标签：java

关于使用 StringBuffer 而不使用 String.split 的反向单词。
例如反向
Hello world
的输出必须

```
 olleh dlrow 
```

不是

```
 dlrow olleh 
```

有什么想法制作这个程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:12:53.707

这听起来像是一个家庭作业问题，所以我不会给你实际的代码，而是告诉你我使用伪代码的想法。

假设：您必须仅使用一个 StringBuffer 就地完成。单词用空格隔开。您不能使用 StringBuffer 以外的任何东西。

您将需要编写一个名为`reverse`

```
/**
 * This method reverse the word starting at startIndex 
 * and of length wordLength. For example:
 * StringBuffer buf = new StringBuffer("hello world");
 * reverse(buf, 0, 5);
 * will result in buf being "olleh world"
 */
reverse(StringBuffer s, int startIndex, int wordLength)

/* Now the pseudo code */
Given StringBuffer sb;
Find all the indexes of all the spaces in sb;
Using the indexes found to calculate the startIndex of each word and the lengths of the word;
call reverse for each of the calculated indexes and lengths; 
```

注意：这只是解决问题的众多方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:40:21.597

这是进行的一种方法：

```
User a result buffer to store the final string reversed word by word
Use a temp buffer to store each word you fond in the original string

Iterate over the chars in your buffer.
    // Identify a word: a word is terminated when you find a space
    If the actual char is not space then save it to temp buffer
    If the actual char is a space then you have a word witch is stored in temp buffer
        reverse that temp buffer and add it to the result buffer
        add a space the the result buffer
        clear the temp buffer so you can save the next word in it 
```

这是它在代码中的样子

**删除，因为这是家庭作业；-)**

输入：

```
"   HeLlo   world   " 
```

输出：

```
'   olLeH   dlrow   ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:06:23.567

导入库并使用此功能。

```
import org.apache.commons.lang.StringUtils;

String reverseWords(String string) {
    return StringUtils.reverseDelimited(StringUtils.reverse(string), ' ');
} 
```

# actionscript-3 - NetStream.send 不能与 RTMFP 中的 NetGroup 一起使用

> ID：10206097
> 
> 赞同：3
> 
> 时间：2012-04-18T08:59:58.670
> 
> 标签：actionscript-3, flash, stream, netstream, rtmfp

我们正在运行[Cumulus](https://github.com/OpenRTMFP/Cumulus)服务器来进行实时语音和文本聊天。

设置是每个客户端可以通过 group.post() 将数据发布到同一 NetGroup 中的其他客户端。不幸的是，这个函数非常慢（至少延迟半秒），所以我们改用 NetStream.send 来调用其他客户端上的函数，通过它传递数据。这几乎可以立即生效。

但是，我们现在正在尝试使用不同的 NetGroup 构建单独的聊天室。但是这样做时，NetStream.send() 不再起作用，这些函数永远不会在其他客户端上调用，也不会传输语音数据。基本上，整个发布 NetStream 似乎不再工作了。

我们有以下设置来在每个客户端上建立一个 NetGroup 和一个发布流：

```
var gspec:GroupSpecifier = new GroupSpecifier("Group1");
gspec.multicastEnabled = true;
gspec.postingEnabled = true;
gspec.serverChannelEnabled = true;
gspec.objectReplicationEnabled = true;
gspec.routingEnabled = true;

_group = new NetGroup(_netConnection, gspec.groupspecWithAuthorizations());
_group.addEventListener(NetStatusEvent.NET_STATUS, handleNetGroupStatus);

_sendStream = new NetStream(_netConnection, gspec.groupspecWithAuthorizations()); 
_sendStream.addEventListener(NetStatusEvent.NET_STATUS, handleNetStreamStatus);
_sendStream.client = this;
_sendStream.attachAudio(_mic); 
_sendStream.publish("media"); 
```

以下代码用于收听“媒体”流：

```
case "NetGroup.Neighbor.Connect":
  var netStream :NetStream = new NetStream(_netConnection, p_netStatusEvent.info.peerID);
  netStream.addEventListener(NetStatusEvent.NET_STATUS, handleNetStreamStatus); 
  netStream.client = this;
  netStream.play("media");
break; 
```

NetGroup 连接本身可以工作，当邻居连接时，每个客户端都会调用“NetGroup.Neighbor.Connect”。但是 _sendStream 本身根本不起作用。没有接收到数据，没有调用函数。

当发布 NetStream 以下列方式构建时，它确实有效：

```
_sendStream = new NetStream(_netConnection, NetStream.DIRECT_CONNECTIONS); 
```

但是，我们只希望 NetStream 发送到单个 NetGroup，并且根据[Adob​​e 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#NetStream%28%29)，在构造函数中使用**gspec.groupspecWithAuthorizations()**应该完全允许。

我们在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:55:20.707

我找到了答案：

您还必须让接收 NetStream 听**gspec.groupspecWithAuthorizations()**而不是**p_netStatusEvent.info.peerID**。

这确实有效。不幸的是，这使得语音聊天变得不可能，因为它非常慢（与 NetGroup.post() 一样慢）并且引入了许多声音伪像。

所以，我们必须为不同的聊天室找到另一种解决方案......

# iphone - Iphone dev：基本的静态页面导航？

> ID：10206101
> 
> 赞同：0
> 
> 时间：2012-04-18T09:00:16.020
> 
> 标签：iphone, xcode, cocoa-touch

这是一个非常基本的问题，但我不确定专业做这件事的最佳方法是什么。

假设我想制作一个用户只需点击多个页面的应用程序（一个页面可能只是一个带有背景图像和几个按钮的屏幕）。有时他们可能会点击返回以访问上一页。

我来自 cocos2d，那么实际上用 Cocoa Touch 做到这一点的最佳方法是什么？我是否对每个页面都有单独的视图，并且只是继续将它们添加/删除到主视图控制器？当用户点击离开时，我会在开始时加载所有内容还是从内存中删除页面？

请给我一个关于如何做到这一点的一般方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:13:52.630

最好的方法是使用`UINavigationController`. 你可以这样做：

AppDelegate.h

```
UINavigationController *navigationController;

@property (nonatomic, retain) UINavigationController *navigationController; 
```

AppDelegate.m

```
@synthesize navigationController;
// In ApplicationDidFinishLaunching
UIViewController *yourMainViewController = [[UIViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:yourMainViewController];
self.window.rootViewController = self.navigationController; 
```

在 YourMainViewController.m

```
// When you click on a button
[[self.navigationController pushViewController:yourNewViewController animated:YES]; 
```

# windows - 如何在 Win32 程序中完全隐藏控制台？

> ID：10206102
> 
> 赞同：1
> 
> 时间：2012-04-18T09:00:16.970
> 
> 标签：windows, winapi, console, windows-console

使用下面的代码，控制台被隐藏但它出现了大约 1 秒钟。

如何完全隐藏控制台？

```
#define _WIN32_WINNT 0x0500
#include <windows.h>
#include <iostream>

using namespace std;

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR cmdLine, int cmdShow){

HWND hWnd = GetConsoleWindow();
ShowWindow( hWnd, SW_HIDE );

MessageBox(NULL, TEXT("Hello!"), TEXT("yuhuuu"), 0);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:18:55.730

您的编译器设置有些奇怪。（你没有指定你的编译器，所以我假设是 MSVC）

您示例中的[WinMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)入口点函数由 GUI 应用程序（链接器开关[/SUBSYSTEM](http://msdn.microsoft.com/en-us/library/fcc1zstk%28v=vs.80%29.aspx) :WINDOWS）使用，除非您调用 AllocConsole，否则这些应用程序不会获得控制台。

如果您使用 /SUBSYSTEM:CONSOLE 链接，则 Windows 将在执行您的代码之前为该进程创建一个控制台，但这些应用程序的正常入口点是普通的旧[main](http://msdn.microsoft.com/en-us/library/3ze4ytsc%28v=vs.80%29.aspx)函数。

您是否使用 /ENTRY 开关强制进入点？无论哪种方式，请确保 /SUBSYSTEM 开关和入口点函数定义兼容并匹配您要创建的应用程序类型（GUI 或控制台）

# php - 在 PHP 中自动处理 POST 和 GET

> ID：10206104
> 
> 赞同：0
> 
> 时间：2012-04-18T09:00:18.737
> 
> 标签：php, function, post, get

有没有一种方法或一段代码可以查找 POST 和 GET 数据并将它们转换为普通变量？

我的意思是：

```
$_POST["hello"] = "Wow." 
```

进入

```
$hello = "Wow." 
```

但也可以自动完成，并使用许多 POSTS 和 GETS，就像这样：

```
$_POST["name"]="John"; 
$_GET["email"]="john@john.com"; 
$_POST["sex"]="male"; 
```

进入

```
$name="John"; 
$email="john@john.com"; 
$sex="male"; 
```

我知道第二个例子是不可能的（你不能同时获取 GET 和 POST 数据（或者我知道），但想法是页面是否获取 GET 或 POST 变量它应该自动将其转换为变量.

那么有什么功能或可以帮助我的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:05:43.707

您可以使用[Extract](http://php.net/manual/en/function.extract.php)，它适用于所有类型的数组。

```
<?php

/* Suppose that $var_array is an array returned from
   wddx_deserialize */

$size = "large";
$var_array = array("color" => "blue",
                   "size"  => "medium",
                   "shape" => "sphere");
extract($var_array, EXTR_PREFIX_SAME, "wddx");

echo "$color, $size, $shape, $wddx_size\n";

?> 
```

> 编辑：虽然我不认为这是一个好习惯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:05:54.163

您可以使用[extract(](http://php.net/extract)`extract($_REQUEST);` ) ：（`$_REQUEST`结合`$_POST`和`$_GET`）

但我认为这是**不好的做法**，因为它为您的代码添加了一些黑魔法，这可能导致不可预知的情况。它也很容易被利用：

考虑到你有一个变量：`$secret = 100;`没有人应该改变它。
现在来了一个古怪的用户，并在表单提交中注入了以下 POST 变量：`$_POST['secret'] = 200;`
你有漏洞利用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T22:05:58.783

我意识到这是一个非常古老的帖子，但如果有人在看，这里有一个答案。

有一种安全的方法可以在不使用 $_POST 上的提取的情况下自动执行此操作，如上所述，这是一个安全风险。如果你给它一个你期望的简单的键数组，这个函数将适用于 $_POST。

```
function post_params($arr){

    $pp = array();
    foreach($arr AS $key){
        if(isset($_POST[$key])){
            $pp[$key] = $_POST[$key];
        }
    }

    return $pp;
} 
```

然后，当您调用该函数时，请执行以下操作：

```
$expected_post_keys = array('firstname','lastname');
$safe_post_arr = post_params($expected_post_keys);
extract($safe_post_arr); 
```

对于 $_GET 你可以采取一些额外的措施（你也可以对 $_POST 这样做）：

```
function get_params($arr){
    // arr predefined explicitly - do not call with _GET as argument
    $gp = array();
    foreach($arr as $key){

        if(isset($_GET[$key])){
            $gp[$key] = htmlspecialchars($_GET[$key]);
        }else{
            $gp[$key] = 0;
        }

    }
    return $gp;
} 
```

当您调用该函数时：

```
$valid_get_keys = array('id','action');
$safe_get_arr = get_params($valid_get_keys);
extract($safe_get_arr ); 
```

此方法为您提供您期望的每个变量/键，但如果它们未在 $_GET 中定义，它们的值将为 0。

如果您必须经常这样做，只需将这两种方法都放在一个类中，您就可以自动化了。您需要检索 _GET 或 _POST 的任何脚本都可以调用该类，然后通过为其提供必要的键来调用您需要的任何方法。

# tfs - 让 TFS 将变更集放入程序集版本中

> ID：10206108
> 
> 赞同：13
> 
> 时间：2012-04-18T09:00:26.613
> 
> 标签：tfs, build, version, changeset

我有一个干净运行的 Team Foundation Server Build。它产生了几个程序集，我希望程序集版本的最后一个数字是*变更集*编号。也就是说，如果我使用 changeset11667 提交，例如程序集版本号应该是“xyz11667”。我检查了可用的宏，但没有一个是变更集编号。

我仍然希望能够像往常一样在我的开发机器上构建解决方案文件，只需使用签入的版本号。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:17:46.680

意识到一旦超过 65,535 个变更集，这将停止工作。也许您想更新其他字段。顺便说一句，是的，构建工程就是工程。指出解决方案并告诉它构建只是旅程的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:10:08.603

查看 CodePlex 上的[Community TFS Build Extension 项目](https://tfsbuildextensions.codeplex.com/)。它包含一个[AssemblyInfo 活动](https://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20AssemblyInfo%20build%20activity&referringTitle=Documentation)和[TfsVersion 活动](https://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20TfsVersion%20build%20activity&referringTitle=Documentation)，它们能够在构建过程中使用自定义格式更改程序集信息。

要让它在您的开发机器上构建，您必须使用批处理文件和 TFS 命令行实用程序自行实现这些构建扩展。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T20:00:54.897

我正在开发一种工具来自动化构建过程，它仍在开发中，它是开源的，这里是链接（我计划在大约一周内发布）：

[https://github.com/jupaol/NCastor](https://github.com/jupaol/NCastor)

现在我建议您检查语义版本控制：

[http://semver.org/](http://semver.org/)

要从 TFS 获取最新的变更集，您有多种选择：

我建立了一个自定义例程来做到这一点

[https://github.com/jupaol/NCastor/blob/develop/Solutions/NCastor.AutoBuilder/NCastor.AutoBuilder.Runner/Targets/Build/Versioning/VersionControlServers/TFS/GetTFSRevisionVersion.target](https://github.com/jupaol/NCastor/blob/develop/Solutions/NCastor.AutoBuilder/NCastor.AutoBuilder.Runner/Targets/Build/Versioning/VersionControlServers/TFS/GetTFSRevisionVersion.target)

我必须构建该例程，因为社区任务和 MSBuild 扩展任务无法在 64 位机器上运行，如果您使用 32 位机器进行构建，那么您可以使用以下任务：

使用[http://msbuildextensionpack.codeplex.com/](http://msbuildextensionpack.codeplex.com/)

```
<UsingTask AssemblyFile="$(ExtensionTasksPath)MSBuild.ExtensionPack.dll" TaskName="MSBuild.ExtensionPack.VisualStudio.TfsVersion"/> 
```

使用[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/)

```
<UsingTask AssemblyFile="$(MSBuildCommunityTasksLib)" TaskName="MSBuild.Community.Tasks.Tfs.TfsVersion" /> 
```

设置不同版本的示例：

```
<UsingTask AssemblyFile="$(MSBuildCommunityTasksLib)" TaskName="MSBuild.Community.Tasks.AssemblyInfo" />

<MSBuild.Community.tasks.AssemblyInfo OutputFile="$(AssemblyVersionFilePath)"
          CodeLanguage="C#"
          AssemblyFileVersion="$(FileVersion)"
          AssemblyInformationalVersion="$(InformationalVersion)"
          AssemblyVersion="$(SemanticVersion)" /> 
```

创建文件后，只需将该文件添加为每个项目的链接，瞧！您所有的项目都在共享通用的程序集信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:46:41.877

最后，我的一位同事编写了以下解决问题的 MSBuild 任务。

```
public class GetNextBuildNumber : Task
{
    [Required]
    public string TfsCommand { get; set; }

    [Required]
    public string TfsArgument { get; set; }

    [Output]
    public int BuildNumber { get; set; }

    public override bool Execute()
    {
        BuildNumber = GetLatestVersionNumber();
        return true;
    }

    private int GetLatestVersionNumber()
    {
        var process = new RunProcess();
        var result = process.ExecuteCommand(TfsCommand, TfsArgument);

        return ParseResult(result);
    }

    private int ParseResult(string result)
    {
        const string changeset = "Changeset:";
        const string user = "User:";

        if (string.IsNullOrEmpty(result) || !result.Contains(changeset))
        {
            // Invalid result
            Log.LogWarning("Could not get latest build number. Reason: " + result);
            return 0;
        }

        var indexOfChangeset = result.IndexOf(changeset, StringComparison.InvariantCulture) + changeset.Length;
        var indexOfUser = result.IndexOf(user, StringComparison.InvariantCulture);
        var revision = result.Substring(indexOfChangeset, indexOfUser - indexOfChangeset).Trim();

        return Convert.ToInt32(revision);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:12:23.640

你想这样做的目的是什么？如果您想在 DLL 和从 TFS 中提取的源代码之间建立关系，最好的方法是在 PDB 生成中使用 TFS 源代码控制来索引符号。这样，当您调试任何版本的软件时，Visual Studio 将在需要时从 TFS 获得正确版本的源代码。

# sql - 选择 * 并在一列上创建别名

> ID：10206110
> 
> 赞同：7
> 
> 时间：2012-04-18T09:00:33.233
> 
> 标签：sql, sqlite

让我们想象一个 3 个表的连接，例如它有 14 列。我想用别名重命名其中一列。有没有什么方法或者不需要在 select 语句中写下其他 13 个列名？

我在伪代码中寻找的是

```
SELECT * [rename user.login as username] from users join 
        (select * from statistics join accounts) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:02:52.080

```
select users.login as username, users.* 
     from users 
```

不幸的是，该列将出现两次，但您无能为力。

加入它看起来像这样：

```
select u.login as username, u.*, s.* 
     from users as u, statistics as s 
     where u.user_id = s.user_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T13:21:10.407

IMO，您建议的语法很好。事实上，它与数据库语言[Tutorial D](http://en.wikipedia.org/wiki/D_(data_language_specification))非常相似：

```
user RENAME ( login AS username ) 
```

将从`user`relvar 投影所有 14 个属性，其中一个按指定重命名。

类似地，Tutorial D 有一个`ALL BUT`投影算子，例如

```
user { ALL BUT login } 
```

在您的情况下会导致 13 个属性的关系。

可悲的是，SQL 从来没有这些有用的快捷方式，而且可能永远也不会。也许我们应该认为自己很幸运能够`SELECT *`在早期获得；在最近的时间里，我们永远不会被授予它！代表 SQL 用户的小组向 SQL 标准委员会提出了`SELECT * BUT <commalist>`类型语法的建议，但被拒绝了。[`SELECT *`SO也不喜欢！](https://stackoverflow.com/questions/413819/select-except)

# php - 如何获取 seo 友好的网址

> ID：10206112
> 
> 赞同：1
> 
> 时间：2012-04-18T09:00:39.937
> 
> 标签：php, apache, .htaccess

如何为此获取 seo 友好的网址

`mysite.com/list.php?place=japan&checkin=04%2F18%2F2012&checkout=04%2F20%2F2012&numberOfRooms=1&room-0-adult-total=2&room-0-child-total=0&x=105&y=23`

作为

```
mysite.com/japan/ 
```

我试过这样

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([^/]*)/$ /list.php?place=$1 
```

但是 apache 并没有重写，并且确信 apache mod_rewrite 是开启的。任何人都可以解决它的租约

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:59:00.587

只需像这样添加`PT`和`L`作为标志：

```
RewriteRule ^([^/]*)/$ /list.php?place=$1 [QSA,PT,L] 
```

然后，您可以编写您的 URL `mysite.com/japan/`，它会像内部一样进行处理，`/list.php?place=japan`但所有其他查询参数都会丢失。

如果您想附加其他参数，如签入、签出等，您可以在设置 QSA 标志时像我在规则中所做的那样附加它们。包含所有参数的 URL 将如下所示：

```
mysite.com/japan/?checkin=04%2F18%2F2012&checkout=04%2F20%2F2012&numberOfRooms=1&room-0-adult-total=2&room-0-child-total=0&x=105&y=23 
```

# wpf - 为什么 OpenFileDialog RestoreDirectory 没有实现？

> ID：10206114
> 
> 赞同：5
> 
> 时间：2012-04-18T09:00:45.037
> 
> 标签：wpf, openfiledialog

我在我的 wpf 应用程序中使用 Microsoft.Win32.OpenFileDialog，因为它在这里被声明为等效；[http://msdn.microsoft.com/en-us/library/ms750559.aspx](http://msdn.microsoft.com/en-us/library/ms750559.aspx)

我将 RestoreDirectory 属性设置为 true，但它没有任何效果。当我等待该属性时，记录显示“此属性未实现”。

那么如何在不自己实现逻辑的情况下完成这项任务呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T10:39:42.093

RestoreDirectory 是自动实现的。

```
string fileName = string.Empty;

var dialog = new OpenFileDialog();
dialog.InitialDirectory = @"c:\test";
if (dialog.ShowDialog() == true)
    fileName = dialog.FileName; 
```

如果您不指定 InitialDirectory 它将打开最后选择的文件的目录

# mysql - 使用 between 查询 varchar 日期

> ID：10206117
> 
> 赞同：0
> 
> 时间：2012-04-18T09:00:51.167
> 
> 标签：mysql

如何使用 BETWEEN 运算符选择存储为 varchar（格式：“2012.04”）的日期？

我需要在此字段上选择一年的间隔。

现在我正在尝试这个，但这给了我的 MySQL 语法错误：

```
SELECT DISTINCT monthcol
FROM bo_alerts
WHERE STR_TO_DATE(monthcol , '%Y.%m') BETWEEN
           (STR_TO_DATE('2012.04', '%Y.%m') AND STR_TO_DATE('2011.03', '%Y.%m'))
ORDER BY monthcol DESC 
```

日期现在是静态的（用于测试），但我需要计算 BETWEEN 中的第二个值，以便与 BETWEEN 部分的第一个值精确 -1 年。

非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:08:45.503

鉴于日期似乎是固定长度的字符串，为什么不使用字符串比较？：

```
SELECT DISTINCT monthcol
FROM bo_alerts
WHERE monthcol BETWEEN '2011.03' AND '2012.04'
ORDER BY monthcol DESC 
```

请注意，我颠倒了日期的顺序以满足大多数第一个小于第二个的 SQL 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:09:00.550

从`'.'`日期开始更新它将起作用。

试试下面的查询：

```
SELECT DISTINCT monthcol 
FROM bo_alerts 
WHERE concat(LEFT(monthcol,4),RIGHT(monthcol,2)) BETWEEN 201204  AND 201103
ORDER BY monthcol DESC 
```

# java - 删除 MouseListener 会产生 ArrayIndexOutOfBoundsException

> ID：10206119
> 
> 赞同：1
> 
> 时间：2012-04-18T09:00:55.823
> 
> 标签：java, swing, events, exception, mouselistener

我得到“线程中的异常“AWT-EventQueue-0”java.lang.ArrayIndexOutOfBoundsException：0，我真的不明白为什么。

我有这两个内部类，用作 JPanel 的侦听器，称为`bildYta`：

```
private class NyPlatsLyss implements ActionListener{
    public void actionPerformed(ActionEvent e){
        bildYta.setCursor(Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR));
        bildYta.addMouseListener(new BildYtaLyss());
        bildYta.addKeyListener(new EscLyss());
        bildYta.requestFocusInWindow();
        enableOperations(false);
    }
}

private class EscLyss extends KeyAdapter{
    public void keyPressed(KeyEvent e){
        if(e.getKeyCode()==KeyEvent.VK_ESCAPE){
            bildYta.setCursor(Cursor.getDefaultCursor());
            bildYta.removeMouseListener(bildYta.getMouseListeners()[0]);
            bildYta.removeKeyListener(this);
            enableOperations(true);
        }
    }
} 
```

当我按下一个按钮时，它会将两个听众都添加到`bildYta`. 我不明白为什么在删除刚刚添加的鼠标侦听器时会得到 .ArrayIndexOutOfBoundsException:0 。有时我什至没有例外，有时我会。我的其余代码中的任何内容都不会造成任何麻烦，因为在我添加了这些侦听器之后，我的程序中应该不会发生任何其他事情。它等待 ESC 按下或鼠标单击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:07:20.620

这是非常脆弱的代码。处理的事件`EscLyss`可能会触发多次，并且只有第一次才会起作用。在您的代码中添加一些检查。更好的是，将您的`EscLyss`实例保存到一个字段，然后直接删除该特定实例。更好的是，将该实例设为最终实例，您可以重复使用它，根据需要重复添加和删除它。事实上，这就是我们通常的做法。

```
private final MouseListener bildYtaLyss = new BildYtaLyss();

private class NyPlatsLyss implements ActionListener{
  public void actionPerformed(ActionEvent e) {
    bildYta.setCursor(Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR));
    bildYta.addMouseListener(bildYtaLyss);
    EscLyss escLyss = new EscLyss();
    bildYta.addKeyListener(escLyss);
    bildYta.requestFocusInWindow();
    enableOperations(false);
  }
}

private class EscLyss extends KeyAdapter{
  public void keyPressed(KeyEvent e){
    if(e.getKeyCode()==KeyEvent.VK_ESCAPE){
      bildYta.setCursor(Cursor.getDefaultCursor());
      bildYta.removeMouseListener(bildYtaLyss);
      bildYta.removeKeyListener(this);
      enableOperations(true);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:08:56.547

将删除代码包围在`SwingUtilities.invokeLater()`

# c++ - 我可以使用 RegNotifyChangeKeyValue 来跟踪对注册表项值的更改吗？

> ID：10206120
> 
> 赞同：0
> 
> 时间：2012-04-18T09:01:00.300
> 
> 标签：c++, winapi, registry

我一直在尝试针对我的特定情况调整[此处](http://msdn.microsoft.com/en-us/library/ms724892%28v=vs.85%29.aspx)给出的 uisng RegNotifyChangeKeyValue()示例——即跟踪对注册表项中的值所做的更改，但示例中使用的事件仅在应用程序启动后立即触发一次。

所以我想知道，我可以像这样跟踪对注册表键值所做的更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:20:44.753

好吧，在您提到的 MSDN 页面上，您可以发现使用`REG_NOTIFY_CHANGE_LAST_SET`作为过滤器执行以下操作：

> “通知调用者对键值的更改。这可以包括添加或删除值，或更改现有值。”

再往下说：

> 此函数检测单个更改。调用者收到通知事件后，应再次调用该函数以接收下一个通知。

您需要`RegNotifyChangeKeyValue`在循环中调用以捕获进一步的更改。

# python - __new__ 方法返回与其第一个参数不同类型的对象的用例是什么？

> ID：10206124
> 
> 赞同：9
> 
> 时间：2012-04-18T09:01:16.590
> 
> 标签：python, class, object, constructor

该文档[暗示](http://docs.python.org/reference/datamodel.html?highlight=__new__#object.__new__)可以`__new__(cls, ...)`返回不同于`cls`. 它说在这种情况下`__init__()`不会被调用。它没有明确说明，但常识或简单的测试确认生成的对象不会有 type `cls`。

为什么允许这种看似奇怪的行为？用例是什么？这显然是故意的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:05:30.223

当您为单元测试创​​建模拟对象时，它会很有用。

在某些情况下，您可以更改`__new__`方法以返回具有相同接口的另一个对象，作为原始对象（例如模拟原始类实例的行为），而无需修改其余代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T10:02:19.283

我猜 Python 的人刚刚决定没有理由强制`__new__(cls, ...)`返回`cls`. `__new__`是一种相当先进的方法，因此用户可能知道他在做什么，并且*可能*有一些理由来利用这种行为。

不过，他们仍然必须进行检查。在实例创建期间，`__init__`应该调用。`__new__`仅当实例（从 中返回）确实是时，这才是合理的`cls`。如果`__new__`返回不同的值，则该对象可能无法处理将传递给的参数`__init__`。

最后，`__new__`语言的加入给开发人员留下了三个选择：

1.  强制`__new__(cls, ...)`返回一个实例`cls`
2.  始终调用`__init__`由返回的实例`__new__`，让用户来确保对象可以处理参数。
3.  仅`__init__`当实例确实是`cls`.

我想选项 3 似乎最实用。

# android - @ViewDebug.ExportedProperty 到底是什么？

> ID：10206125
> 
> 赞同：4
> 
> 时间：2012-04-18T09:01:19.820
> 
> 标签：android, debugging

如果你查看[LienarLayout 的源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/LinearLayout.java)，你会注意到有一个注释叫做`@ViewDebug.ExportedProperty.` My questions is: what is`@ViewDebug.ExportedProperty`究竟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:06:07.820

`@ViewDebug.ExportedProperty`是用于调试Android框架的[注解。](http://www.androidjavadoc.com/1.0_r1_src/android/view/ViewDebug.ExportedProperty.html)它不是公共 API 的一部分。

> 此注解可用于标记视图服务器要转储的字段和方法。此注解只能注解没有参数的非 void 方法。

ViewServer 不是公共 API 的一部分。请参阅有关 Android 框架工程师 Romain Guy 所说的视图服务器的讨论[：](https://groups.google.com/group/android-developers/browse_thread/thread/ab595104969c9906/290b4bfbef4f1d91)

> ViewServer 不是公共 API，绝不应该这样使用。

# php - 在jQuery中将宽度和高度更改为百分比

> ID：10206126
> 
> 赞同：0
> 
> 时间：2012-04-18T09:01:22.830
> 
> 标签：php, jquery, drupal, slideshow

我正在使用 jquery 幻灯片。我必须将宽度和高度更改为百分比值。

jquerytransitions.js 包含以下代码

```
$.fn.jqFancyTransitions.defaults = {    
        width: 682, // width of panel
        height: 268, // height of panel
        strips: 10, // number of strips
        delay: 5000, // delay between images in ms
        stripDelay: 50, // delay beetwen strips in ms
        titleOpacity: 0.7, // opacity of title
        titleSpeed: 1000, // speed of title appereance in ms
        position: 'alternate', // top, bottom, alternate, curtain
        direction: 'fountainAlternate', // left, right, alternate, random, fountain, fountainAlternate
        effect: '', // curtain, zipper, wave
        navigation: false, // prev next and buttons
        links : false // show images as links       
    };

})(jQuery); 
```

我必须将宽度和高度更改为百分比..这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:56:32.513

您可以尝试将 width: 682, height: 268 替换为

```
width : screen.width * (47.45/100),
height: screen.height * (29.8/100), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:21:53.403

我唯一能想到的就是手动计算：

```
var percentage = 25; //Your desired percentage
daddyWidth = $('#daddyElelement').width();
finalWidth = daddyWidth*percentage/100; 
```

通过向“参数数组”添加更多元素，使您的脚本采用更多选项，最后您可以放置​​这些元素而不是像素数

```
width: finalWidth , // width of panel 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:23:15.793

如果您希望宽度和高度相对于浏览器窗口，请使用：

```
...
width : window.innerWidth * (percentage/100),
height: window.innerHeight * (percentage/100),
... 
```

或者，如果您希望它相对于任何其他元素：

```
...
width : element.offsetWidth * (percentage/100),
height: element.offsetHeight * (percentage/100),
... 
```

# ruby-on-rails-3 - Rails 3.2.3 sqlite gem 未安装

> ID：10206127
> 
> 赞同：1
> 
> 时间：2012-04-18T09:01:25.687
> 
> 标签：ruby-on-rails-3, sqlite

我将我的 MAC OSX 版本更改为 Lion。之后，我尝试创建一个新的 Rails 3.2.3 应用程序。但是，运行捆绑安装时出现错误，

> 使用原生扩展安装 sqlite3 (1.3.6) Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
> 
> ```
>  /Users/ender/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb  checking for sqlite3.h... *** extconf.rb failed *** Could not create 
> ```
> 
> 由于某种原因，Makefile 可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。
> 
> 提供的配置选项： --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib -- without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/ender/.rvm/rubies/ruby-1.9.3-p0/bin/ruby --with-sqlite3-dir --without-sqlite3-dir --with-sqlite3-include - -without-sqlite3-include=${sqlite3-dir}/include --with-sqlite3-lib --without-sqlite3-lib=${sqlite3-dir}/lib --enable-local --disable-local /Users /ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError) You have to install development tools first. from /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:506:in` try_cpp' 来自 /Users/ender/.rvm/rubies/ruby-1.9.3- p0/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header' from /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:790:in` block in checks_for' 来自 /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf。 RB：284：在 `block (2 levels) in postpone' from /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:254:in` 从 /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone' from /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:254:in` open' 来自 /Users/ender/.rvm/rubies/ruby -1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:280:in `postpone' from /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/mkmf.rb:789:in` checks_for' 来自 /Users/ender/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1 /mkmf.rb:969:in `find_header' from extconf.rb:34:in`'
> 
> Gem 文件将继续安装在 /Users/ender/.rvm/gems/ruby-1.9.3-p0/gems/sqlite3-1.3.6 中以供检查。结果记录到 /Users/ender/.rvm/gems/ruby-1.9.3-p0/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out 安装 sqlite3 (1.3.6) 和 Bundler 时出错无法继续。`gem install sqlite3 -v '1.3.6'`在捆绑之前确保成功。

当我尝试

> 宝石安装 sqlite3 -v '1.3.6'

我看到了同样的错误。

我应该怎么做才能修复它？

谢谢。

* * *

我更新了宝石，但此时发生 json 错误

```
Installing json (1.6.6) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/ender/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
creating Makefile

make
sh: make: command not found

Gem files will remain installed in /Users/ender/.rvm/gems/ruby-1.9.2-p290/gems/json-1.6.6 for inspection.
Results logged to /Users/ender/.rvm/gems/ruby-1.9.2-p290/gems/json-1.6.6/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.6.6), and Bundler cannot continue.
Make sure that `gem install json -v '1.6.6'` succeeds before bundling.
enders-MacBook-Pro:kodcu ender$ gem install json -v '1.6.6'
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

        /Users/ender/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb
creating Makefile

make
sh: make: command not found

Gem files will remain installed in /Users/ender/.rvm/gems/ruby-1.9.2-p290/gems/json-1.6.6 for inspection.
Results logged to /Users/ender/.rvm/gems/ruby-1.9.2-p290/gems/json-1.6.6/ext/json/ext/generator/gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:47:20.587

尝试重新安装/升级您的 Xcode。然后尝试再次安装 sqlite

# openejb - 如果openejb在我的webapp之前或之后启动，有人可以从这个日志文件中告诉我吗

> ID：10206128
> 
> 赞同：2
> 
> 时间：2012-04-18T09:01:35.943
> 
> 标签：openejb, apache-tomee

我正在运行一个企业 Java 应用程序，使用 openEJB 的 TomEE++。该应用程序是从 Eclipse Helios 中启动的。我已经更改了 Eclipse 中的“服务器位置”，以允许 Eclipse 负责 Tomcat。

当我从 Eclipse 中启动应用程序时，我得到了一些奇怪的 JPA 错误，我认为这可能是因为 openejb webapp 是在我的 webapp 之后加载的，称为“幻灯片”

我已将 web.xml 中 webapp 的 load-on-startup 值更改为 20，而 openejb 的值为 0。

从控制台的输出中，我无法确定 openejb 是在我的应用程序之前还是之后启动。日志似乎有点矛盾。

刚开始，我可以看到

```
ERROR: OpenEJB webapp was not found 
```

这似乎表明 openejb 没有启动。但不久之后，我看到了诸如

```
INFO: OpenWebBeans Container is starting... 
```

在我有限的知识中，这将来自 openejb。

在那之后发生了很多事情，包括几个应用程序的启动，包括我的。

```
TomcatWebAppBuilder.start /slides 
```

在那之后，我发现一行表明 openejb 已经启动

```
TomcatWebAppBuilder.start /openejb 
```

那么，到底发生了什么？openejb 是在我的申请之前还是之后启动？

在下面发布日志：

```
Apr 18, 2012 1:04:46 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Apr 18, 2012 1:04:47 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.j2ee.server:slides' did not find a matching property.
ERROR: OpenEJB webapp was not found
Apr 18, 2012 1:04:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 18, 2012 1:04:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 18, 2012 1:04:48 PM org.apache.openejb.cdi.CdiBuilder initializeOWB
INFO: Created new singletonService org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:04:48 PM org.apache.openejb.cdi.CdiBuilder initializeOWB
INFO: succeeded in installing singleton service
Apache OpenEJB 4.0.0-beta-2    build: 20120115-08:26
http://openejb.apache.org/
Apr 18, 2012 1:04:52 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:04:53 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:04:53 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:04:53 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:04:53 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:04:53 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [142] ms.
Apr 18, 2012 1:04:53 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 7751 ms
Apr 18, 2012 1:04:53 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 18, 2012 1:04:53 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.21
TomcatWebAppBuilder.start /slides
[severity=ERROR,message=unexpected element (uri:"", local:"global"). Expected elements are <{http://jboss.org/xml/ns/javax/validation/configuration}constraint-validator-factory>,<{http://jboss.org/xml/ns/javax/validation/configuration}property>,<{http://jboss.org/xml/ns/javax/validation/configuration}traversable-resolver>,<{http://jboss.org/xml/ns/javax/validation/configuration}constraint-mapping>,<{http://jboss.org/xml/ns/javax/validation/configuration}message-interpolator>,<{http://jboss.org/xml/ns/javax/validation/configuration}default-provider>,locator=[node=null,object=null,url=null,line=13,col=13,offset=-1]]
[severity=ERROR,message=unexpected element (uri:"", local:"global"). Expected elements are <{http://jboss.org/xml/ns/javax/validation/configuration}constraint-validator-factory>,<{http://jboss.org/xml/ns/javax/validation/configuration}property>,<{http://jboss.org/xml/ns/javax/validation/configuration}traversable-resolver>,<{http://jboss.org/xml/ns/javax/validation/configuration}constraint-mapping>,<{http://jboss.org/xml/ns/javax/validation/configuration}message-interpolator>,<{http://jboss.org/xml/ns/javax/validation/configuration}default-provider>,locator=[node=null,object=null,url=null,line=13,col=13,offset=-1]]
Apr 18, 2012 1:05:02 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:02 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:02 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:02 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:02 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:02 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [13] ms.
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/xml is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/sql is already defined
Apr 18, 2012 1:05:03 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Apr 18, 2012 1:05:05 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:05 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
Apr 18, 2012 1:05:06 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory manager
TomcatWebAppBuilder.start /manager
Apr 18, 2012 1:05:07 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:07 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:07 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:07 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:07 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:07 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [9] ms.
using context file /home/user/bin/tomcat/SlidesServer/apache-tomee-webprofile-1.0.0-beta-2/webapps/manager/META-INF/context.xml
Apr 18, 2012 1:05:07 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:07 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
Apr 18, 2012 1:05:07 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory docs
TomcatWebAppBuilder.start /docs
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:08 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:08 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [14] ms.
Apr 18, 2012 1:05:08 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:08 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
Apr 18, 2012 1:05:08 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
TomcatWebAppBuilder.start 
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:08 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:08 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:08 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [6] ms.
Apr 18, 2012 1:05:08 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:08 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
Apr 18, 2012 1:05:08 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory host-manager
TomcatWebAppBuilder.start /host-manager
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:09 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:09 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [8] ms.
using context file /home/user/bin/tomcat/SlidesServer/apache-tomee-webprofile-1.0.0-beta-2/webapps/host-manager/META-INF/context.xml
Apr 18, 2012 1:05:09 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:09 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
Apr 18, 2012 1:05:09 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory openejb
TomcatWebAppBuilder.start /openejb
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.CdiBuilder build
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@34b23d12
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Apr 18, 2012 1:05:09 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
Apr 18, 2012 1:05:09 PM org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points were validated successfully.
Apr 18, 2012 1:05:09 PM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took [9] ms.
using context file /home/user/bin/tomcat/SlidesServer/apache-tomee-webprofile-1.0.0-beta-2/webapps/openejb/META-INF/context.xml
Apr 18, 2012 1:05:09 PM org.apache.myfaces.shared.config.MyfacesConfig createAndInitializeMyFacesConfig
INFO: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Apr 18, 2012 1:05:09 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
WARNING: No mappings of FacesServlet found. Abort initializing MyFaces.
OpenEJB Loader init-params:
    There are no initialization parameters.
Apr 18, 2012 1:05:10 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Apr 18, 2012 1:05:10 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Apr 18, 2012 1:05:10 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 16795 ms
Apr 18, 2012 1:05:11 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [action] in context with path [/slides] threw exception [javax.ejb.EJBException: The bean encountered a non-application exception; nested exception is: 
    <openjpa-2.1.1-r422266:1148538 nonfatal general error> org.apache.openjpa.persistence.PersistenceException: null
FailedObject: Select s from SlideShow s [java.lang.String]] with root cause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:33:27.880

Sounds more like the JavaAgent isn't used when Tomcat/TomEE is started from Eclipse. There's an openejb-javaagent jar file that need to specified on the command line via the `-javaagent` vm parameter.

This turns on the OpenJPA bytecode enhancer and makes all the JPA functionality work properly. It will work somewhat without the `-javaagent` vm flag as OpenJPA has limited support for the subclass-based approach to implementing JPA (only two ways to implement JPA: subclassing entity classes or bytecode enhancing entity classes). Hibernate uses only subclassing, for example, and doesn't need a javaagent.

A vanilla Tomcat startup command will have these arguments:

```
/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/bin/java
-Djava.util.logging.config.file=<tomcat-home>/conf/logging.properties
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.endorsed.dirs=<tomcat-home>/endorsed
-classpath <tomcat-home>/bin/bootstrap.jar:<tomcat-home>/bin/tomcat-juli.jar
-Dcatalina.base=<tomcat-home>
-Dcatalina.home=<tomcat-home>
-Djava.io.tmpdir=<tomcat-home>/temp
org.apache.catalina.startup.Bootstrap
start 
```

A TomEE install will have one extra `-javaagent` as OpenJPA requires it (can be omitted if using Hibernate instead).

```
/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/bin/java
-Djava.util.logging.config.file=<tomcat-home>/conf/logging.properties
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.endorsed.dirs=<tomcat-home>/endorsed
-classpath <tomcat-home>/bin/bootstrap.jar:<tomcat-home>/bin/tomcat-juli.jar
-Dcatalina.base=<tomcat-home>
-Dcatalina.home=<tomcat-home>
-Djava.io.tmpdir=<tomcat-home>/temp
-javaagent:<tomcat-home>/lib/openejb-javaagent.jar
org.apache.catalina.startup.Bootstrap
start 
```

# list - 用数字排序列表

> ID：10206129
> 
> 赞同：0
> 
> 时间：2012-04-18T09:01:53.397
> 
> 标签：list, sorting, vim, numbers, numeric

这是列表`L`：

```
['25', '2', '15', '4', '81', '43'] 
```

这是我使用命令时的输出`sort(L)`

```
['15', '2', '25', '4', '43', '81'] 
```

这就是我想要的输出：

```
['2', '4', '15', '25', '43', '81'] 
```

是否有一个命令可以像`%sort n`在命令行中那样对列表中的数字进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:43:54.593

这在[文档](http://vimdoc.sourceforge.net/htmldoc/eval.html#sort%28%29)中进行了解释。您需要定义一个函数来进行列表条目之间的比较。如果参数相等，函数应该返回 0，如果第一个参数大于第二个，则返回 1，如果第二个参数大于第一个，则返回 -1。

```
function! MyCompare(i1, i2)
    return a:i1 == a:i2 ? 0 : a:i1 > a:i2 ? 1 : -1
endfunction 
```

然后，您可以使用新函数作为第二个参数调用 sort()。因此：

```
let list = ['25', '2', '15', '4', '81', '43']
echo sort( list, 'MyCompare' ) 
```

会回声

```
[2, 4, 15, 25, 43, 81] 
```

正如预期的那样。

# postgresql - 当它们将成为更大字符串的一部分时添加准备语句变量

> ID：10206132
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:02:10.107
> 
> 标签：postgresql, postgis

所以基本上我的问题是这个。我有一个从我数据库中的表中获取的 sql 语句。此 SQL 语句在其中包含用于预准备语句变量的占位符。我正在使用包装类来处理替换变量。包装类处理确保它们在传递到 PostgreSQL 时是正确的类型。我的语句中出现语法错误，这让我发疯。准备好的语句的一部分是在 ST_GeomFromText() 函数中使用的字符串。该字符串的值通过准备好的语句变量填充。奇怪的是，这些变量不仅被连接到字符串中，而且通过我收到的错误的外观被视为单独的实体。有关我尝试过的查询示例和错误消息，请参见下文。

任何人都可以对此有所了解吗？它快把我逼疯了。我必须能够从文本构建这个几何图形，并且参数必须能够通过准备好的语句传递。我已经在 C# 中跟踪，它结束了将值作为字符串传递到我的命令对象参数中，因此在我能够查看的代码中没有进行转换，这将使这些被视为字符串以外的任何东西。

**语句（从表中返回）**

**数字 1\. 有价值观**

```
select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy 
from 
   ST_ENVELOPE(
       ST_TRANSFORM(
          ST_GeomFromText('POLYGON(('||138082||' '||12907||','||207179||' '||12907||','||207179||' '||88647||','||138082||' '||88647'||','||138082||' '||12907||'))',27700),4326)) 
as a 
```

**第一，没有价值观**

```
select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy 
from 
   ST_ENVELOPE(
      ST_TRANSFORM(
         ST_GeomFromText('POLYGON(('||:0||' '||:1||','||:2||' '||:3||','||:4||' '||:5||','||:6||' '||:7'||','||:8||' '||:9||'))',27700),:10)) 
as a 
```

**数字 2\. 有价值观**

```
select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy
from 
   ST_ENVELOPE(
      ST_TRANSFORM(
         ST_GeomFromText($$POLYGON((138082 12907, 207179 12907, 207179 88647, 138082 88647, 138082 12907))$$,27700), 4326)) 
as a 
```

**数字 2\. 有价值观**

```
select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy
from 
   ST_ENVELOPE(
      ST_TRANSFORM(
         ST_GeomFromText($$POLYGON((:0 :1, :2 :3, :4 :5, :6 :7, :8 :9))$$,27700),:10)) 
as a; 
```

**来自 PostgreSQL 日志的错误：**

**1号**

```
2012-04-18 09:39:41 BST ERROR:  syntax error at or near "'||'" at character 283
2012-04-18 09:39:41 BST STATEMENT:  select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy from ST_ENVELOPE(ST_TRANSFORM(ST_GeomFromText('POLYGON(('||((E'138082'))||' '||((E'12907'))||','||((E'207179'))||' '||((E'12907'))||','||((E'207179'))||' '||((E'88647'))||','||((E'138082'))||' '||((E'88647'))'||','||((E'138082'))||' '||((E'12907'))||'))',27700),((E'4326')))) as a 
```

**2号**

```
09:39:27 BST ERROR:  parse error - invalid geometry
2012-04-18 09:39:27 BST HINT:  "POLYGON(((" <-- parse error at position 10 within geometry
2012-04-18 09:39:27 BST STATEMENT:  select st_xmin(a) minx, st_ymin(a) miny, st_xmax(a) maxx, st_ymax(a) maxy ,1, 1 from ST_ENVELOPE(ST_TRANSFORM(ST_GeomFromText($$POLYGON((((E'464217')) ((E'133902')), ((E'591014')) ((E'133902')), ((E'591014')) ((E'261209')), ((E'464217')) ((E'261209')), ((E'464217')) ((E'133902'))))$$,27700),((E'4326')))) as a; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:21:06.823

`'`您的第一个错误是一个简单的语法错误，在第 283 行字符处带有一个额外的字符。将您的无值版本更改`88647'||`为`88647||`, 和`:7'||`to `:7||`。

我无法重现您的第二个错误。

关于 MBR 的话题，你见过[盒子功能/类型](http://postgis.refractions.net/documentation/manual-1.5/ch08.html#PostGIS_BoxFunctions)吗？他们可以帮助你。

# php - 域、子域请求错误

> ID：10206139
> 
> 赞同：0
> 
> 时间：2012-04-18T09:02:35.740
> 
> 标签：php, jquery, .htaccess, iframe

我有这样的 iframe：

```
<iframe src="http://api.example.com/html/31" id="fa-iframe" scrolling="No" frameborder="0" style="height: 513px; width: 597px; "></iframe> 
```

和这样的javascript：

```
$.get("/inc_appdl_main.php", { id=args },function(data) {}); 
```

该网站是`http://example.com`...

我想在我的目录inc_appdl_main.php 中访问这个文件。

但是，当我提出请求时，.. 互联网不允许我因为它解释：

`http://example.com` 和

```
http://api.example.com 
```

作为两个单独的域..尽管两者都是相同的站点..具有不同的 url。api 只是获取请求到达的文件夹。

我有两个选项可以在我的获取中使用。任何一个..

```
.get(" http://api.example.com/inc_appdl_main.php", { id=args },function(data) {}); 
```

这会给我“404”

或者

```
 .get(" http://example.com/inc_appdl_main.php", { id=args },function(data) {}); 
```

这会给我一个无法跨域发布的错误

虽然站点是同一个站点，但 url 不同.. 我需要访问这个文件..

```
inc_appdl_main which sits on the same root directory...is there a way? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:12:22.530

几个可能的解决方案：

1.  配置您的服务器，使其能够接受 的请求`http://api.example.com/inc_appdl_main.php`，并像处理它一样处理它`http://example.com/inc_appdl_main.php"`。这可能是最简单的，因为您可以控制服务器。

2.  如果来自的响应`api.example.com`是 HTML 页面，则将 JavaScript 添加到它以设置[`document.domain`](https://developer.mozilla.org/en/document.domain)为`example.com`.

3.  要求您的用户使用与[跨域资源共享](http://www.w3.org/TR/access-control/)(CORS)[兼容的浏览器](http://caniuse.com/#search=cors)，并在服务器上回复 CORS 预检请求等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:11:23.300

在 inc_appdl_main.php 中设置 header() 以允许跨源请求

```
header('Access-Control-Allow-Origin: *'); 
```

# c# - Server.MapPath 可以在 c# 文件中使用吗？

> ID：10206140
> 
> 赞同：1
> 
> 时间：2012-04-18T09:02:45.550
> 
> 标签：c#

我试图获取文件的物理路径，并获得了`Server.MapPath`将为您提供的信息。但是对我来说，在我的窗口窗体中，即使我使用命名空间 using`System.Web;`但仍然没有得到，我也没有得到？例如，如果我在系统某处有一个名为“myTestClass.xml”的文件，并且我需要获取物理路径，我需要在按钮单击事件中做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:07:03.913

在 WinForm 应用程序中，您不需要使用 Server.MapPath。

相反，您可以使用相对于您的应用程序 StartupPath 的组合路径。

例如：

```
Directory.GetCurrentDirectory() 
```

**编辑：**

如果要在目录中查找文件，可以使用函数，例如：

```
string fileNameToFind = "*.txt";
string directoryToSearch = @"C:\Path\To\Folder\To\Search\In";
string[] files = Directory.GetFileSystemEntries(directoryToSearch, fileNameToFind, SearchOption.AllDirectories);
foreach (string f in files)
{
  Console.WriteLine("File: " + f);
}

Console.WriteLine("Total of " + files.Length + " files found."); 
```

# objective-c - 拥有许多objective-c类别有缺点吗？

> ID：10206144
> 
> 赞同：3
> 
> 时间：2012-04-18T09:03:05.747
> 
> 标签：objective-c, premature-optimization, objective-c-category

我们有一些 Objective-c 类别的代码，我们希望在项目之间共享。我们可以采取（至少）两种方法：

1.  将它们放在每个班级的一个类别中，称为`UIView+SGBExtensions`
2.  然后按用途将其放入许多不同的类别中，例如`UIView+SGBLayout`,`UIView+SGBDrawing`等。

我的直觉是选择后者，因为它更具描述性，我们可以挑选。但是，我们的大多数应用程序都将包含大部分共享代码，因此我有点担心拥有大量类别可能会影响性能或应用程序大小。拥有许多objective-c类别有缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:45:02.583

我认为差异可以忽略不计。在加载期间，它可能涉及更多步骤来迭代类别并添加它们的方法，而不是从单个类别中添加方法。同样，如果类别有`+load`方法，那是几个方法调用而不是一个方法调用。就像我说的，微不足道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:50:40.270

我的直觉和你一样。以自己的方式分离代码更易于维护。

在你的应用程序被证明在这些方面存在问题之前，我认为你不应该担心大小和性能。即使那样，也不要假设，衡量。对于它的价值，我很确定性能和尺寸影响将接近于零。

# joomla - 在 joomla 1.5 中添加语言文件

> ID：10206145
> 
> 赞同：0
> 
> 时间：2012-04-18T09:03:12.440
> 
> 标签：joomla, joomla1.5

我在`sys.ini`文件的菜单中提到了我的组件名称。我在 xml 文件中也提到了这一点，但 Joomla 1.5 中的语言文件没有改变

语言/en-GB/en-GB.com_examsmsstaff.sys.ini

```
COM_EXAM="Exam" 
```

xml文件

```
<languages folder="admin">
    <language tag="en-GB">language/en-GB/en-GB.com_examsmsstaff.sys.ini</language>
</languages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:36:07.530

`.sys.ini`文件[仅适用于 Joomla 1.6 及更高版本](https://stackoverflow.com/questions/11146890/joomla-v1-5-plugin-sys-ini-language-file)。如果您要命名菜单项，请将代码放入名为`.menu.ini`.

例如，您上面的文件将是：

```
en-GB.com_examsmsstaff.menu.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:59:52.083

Joomla 对命名约定非常挑剔。拿.sys。超出文件名，您应该会看到它正在工作（假设您的组件已安装并作为 com_examsmsstaff 工作）

# silverlight - Silverlight TreeviewItem IsSelected 似乎不起作用

> ID：10206147
> 
> 赞同：1
> 
> 时间：2012-04-18T09:03:23.780
> 
> 标签：silverlight

我目前正在从后面的代码中将 Treeview 项的 IsSelected 设置为 true，不幸的是，视觉状态没有改变。

我们有一个选定状态的样式，但是当 IsSelected 从后面的代码中设置时它不会被触发。

```
 TreeViewItem item = CurrentTree.Items.Where(i => (Guid)(i as TreeViewItem).DataContext == objectId).FirstOrDefault() as TreeViewItem;

              if (item != null) {

                   item.IsSelected = true;

                    CurrentTree.UpdateLayout();

                    OnTreeSelection(null, null);

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:09:03.133

我之前遇到过类似的问题，我意识到您必须确保将“SelectedValuePath”设置为确定您被选中的属性的绑定路径

# java - 迁移 Java EE 项目的规范级别

> ID：10206148
> 
> 赞同：0
> 
> 时间：2012-04-18T09:03:32.657
> 
> 标签：java, jakarta-ee, java-ee-6, java-ee-5

当我们说“迁移 Java EE 项目的规范级别”时，我们的意思是什么？这真的需要重写应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:52:58.910

基本上，Java EE 规范是向后兼容的，所以我认为它不需要您重写应用程序代码。

我认为这意味着您正在从例如 J2EE 1.4 迁移到 Java EE 6，因此您的应用程序服务器将提供您*可以*但*不必*使用的附加功能。

但是，随着时间的推移，可能需要或可以接受重写一些应用程序代码，因为它可能更简洁、更易于维护、更易于阅读、更快、更小等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:09:10.610

我不认为这意味着重写。

这可能意味着您的 Java EE 项目应该通过[应用程序验证工具包 (AVK)](http://java.sun.com/j2ee/avk/)中所需规范级别或版本的测试（例如：J2EE 1.4/Java EE 5/Java EE 6）

# mysql - OrderSubquery 结合第二张表

> ID：10206149
> 
> 赞同：0
> 
> 时间：2012-04-18T09:03:32.510
> 
> 标签：mysql, subquery

我有两张桌子：

```
1) product data
2) sales stats of these products 
```

在表 2 中，我有每种产品每天的销售统计数据。我想获得过去 30 天内最畅销的产品。我通过以下查询实现了这一点：

```
SELECT sku
FROM    prod_history
WHERE insert_date >= SUBDATE(CURDATE(), INTERVAL 31 DAY)
GROUP BY sku
ORDER BY SUM(number_of_orders) DESC 
LIMIT 0, 10 
```

此查询大约需要 4.5 秒。

现在我想将此查询结果与产品数据表 (1) 连接起来。

我为此使用以下查询，但得到的结果不正确。 **我收到的结果往往不是最畅销的产品。**

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, `prod_combined`.`link` 
FROM `prod_combined` 
WHERE (prod_combined.sku IN 
    (SELECT prod_combined.sku 
        FROM (SELECT sku FROM prod_history WHERE insert_date >= SUBDATE(CURDATE(), INTERVAL 31 DAY) 
        GROUP BY sku ORDER BY SUM(number_of_orders) DESC LIMIT 0 , 10 
     ) q 
     JOIN prod_combined ON prod_combined.sku = q.sku ) 
) 
AND (aktiv = 1) LIMIT 5 
```

有没有办法在一个查询中获得所需的结果？

亲切的问候，麦克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:28:14.767

我只是认为您的活动顺序在您的第二个查询中是关闭的......即您从产品开始，然后对其进行限定。如果我要走那条路，我会改用 where not exists 子句；数量大于我的产品数量的 x sku 不存在。

但是，您是否有理由不能将您的产品数据加入到您的原始数据中？

```
SELECT a.sku, a.titel, a.preis_vk, a.link, SUM(b.number_of_orders) as number_of_orders 
FROM prod_combined as a inner join 
     prod_history as b on a.sku = b.sku
WHERE b.insert_date >= SUBDATE(CURDATE(), INTERVAL 31 DAY)
GROUP BY a.sku, a.titel, a.preis_vk, a.link
ORDER BY SUM(b.number_of_orders) DESC 
LIMIT 0, 10 
```

或者沿着这些路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:21:59.997

内查询得到上个月最畅销的十个产品，而外查询只限制了五个没有任何订购。如果您将内部查询限制为五个，则应该修复它。

这是查询的联接版本：

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, `prod_combined`.`link`
FROM `prod_combined` 
INNER JOIN `prod_history`
ON prod_combined.sku = prod_history.sku
WHERE prod_history.insert_date >= SUBDATE(CURDATE(), INTERVAL 31 DAY) 
  AND prod_combined.aktiv = 1
GROUP BY `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, `prod_combined`.`link`
ORDER BY SUM(prod_history.number_of_orders) DESC
LIMIT 5 
```

# linux - 逐一获取 find/locate 的结果

> ID：10206150
> 
> 赞同：1
> 
> 时间：2012-04-18T09:03:33.337
> 
> 标签：linux, bash, scripting, locate

我怎样才能得到一个命令的结果，比如

```
# locate file.txt
/home/alex/file.txt
/backup/file.txt 
```

我想做的是制作一个交互式脚本来询问：`Which of the following files would you like to copy/recover? [1],[2]:`

例子：

```
filetorecover.txt
_________________
   file.txt
   file1.txt
   ...

./recover filestorecover.txt /home/alex/data/
file.txt could not be located at /home/alex/data, but it was locate here:
[1] /home/alex/files/
[2] /backup/file.txt 
```

*   filestorecover => 是包含要查找的文件的文件
*   /home/alex/files/ => 是要查找的主文件夹，如果文件不在那里，则执行`locate file.txt`

因此，主要是我正在寻找一种方法来从 find 或 locate 中获取这些 X 结果以供后期使用，如上所述。

## 更新

是否可以看到查找/定位结果的最常见路径？我的意思是，如果我想设置 6 个文件`/backup/`和 2个文件`/home/alex/files/`，或者询问他们是否从最常见的文件夹中获取所有文件，`/backup/`！

这意味着当我有超过 X 个文件（例如：10 个）时，因为有时我可以获得多达数百个结果，但我不能一个接一个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:39:14.317

如果您使用的是 bash，则可以使用内置数组，例如：

```
# Get all the files
files=`find . -name "file.txt"`
# Put them into an array
declare -a afiles
afiles=( ${files} )

# Output filenames
for (( i = 0; i < ${#afiles[@]}; i += 1 ));
do
    printf "[%d] %s\n" ${i} ${afiles[$i]}
done 
```

（声明不是必需的，但恕我直言，这是一个很好的评论，说这`afiles`是一个数组。）

使用数组的好处是您可以在用户使用 . 输入一些数字后访问文件名`${afiles[${number}]}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:45:01.780

我会使用 awk 并阅读。

```
# list of files in temp file
choices=$(mktemp -t choices.XXXXX)
find . -name "file.txt") > $choices

# choices with number prefix
cat $choices | awk '{print "[" NR "]" $0}'

# prompt
echo "Choose one"
read num

# find choice
choice=$( cat $choices | awk "{if (NR==$num){print \$0}}" )
echo "You choose $choice" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:31:00.110

为了您的更新

```
#paths in order
find . -name '*.txt' | awk '{gsub(/\/[^/]*$/,"");path[$0]+=1} END {for (i in path) print path[i]" "i}' | sort -rg | cut -d ' ' -f 2 
```

其余部分使用已发布的内容

# android - 博通 BLE SDK

> ID：10206152
> 
> 赞同：0
> 
> 时间：2012-04-18T09:03:42.757
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在尝试运行[BroadCom BLE SDK](http://code.google.com/p/broadcom-ble/)中提供的示例。我已通过安装此 SDK 创建了 AVD，但该应用程序未安装在模拟器上。它给出的错误是

> 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY [2012-04-18 14:17:59 - BleFindMeServer] 请检查 logcat 输出以获取更多详细信息。[2012-04-18 14:17:59 - BleFindMeServer] 发布取消！

任何指向解决此问题的方法？我们是否必须在实际设备上运行此示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:48:00.037

引用这个线程。

[http://community.developer.motorola.com/t5/Android-App-Development-for/Bluetooth-Low-Energy-on-XT910/td-p/24412](http://community.developer.motorola.com/t5/Android-App-Development-for/Bluetooth-Low-Energy-on-XT910/td-p/24412)

您正在构建的 android 设备可能不包含共享库，在本例中为 Broadcom ble sdk。因此，虽然您的应用程序可能会构建，但设备将无法识别共享库，因为它不支持它。

如果您想在设备上测试和使用 BLE，则必须确保该设备支持 BLE。目前，我认为这些只是摩托罗拉设备，您必须为特定设备包括摩托罗拉指定的 BLE SDK。

您可以在这里找到更多信息。[http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/](http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/)

另一方面，据我所知，android 模拟器不支持蓝牙。经典或 BLE。

希望这可以帮助

# objective-c - Objective-c 使用或不使用“强”

> ID：10206156
> 
> 赞同：2
> 
> 时间：2012-04-18T09:03:52.690
> 
> 标签：objective-c, reference, automatic-ref-counting

我有一个想要恢复的旧项目，我正在将其转换为 ARC，我想确定一些事情，然后再点击保存按钮：

重构工具将所有“保留”属性从

```
@property (nonatomic, retain) UIButton *myButton; 
```

至

```
@property (nonatomic) UIButton *myButton; 
```

他们都没有得到这个`strong`属性。

我是这个 ARC 的新手。从文档中，在这里：[Property Declaration Attributes](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW2)，我发现它`strong`指定与目标对象存在强（拥有）关系。这就是我想要的，但正如我所说，重构工具没有放入任何东西。

代码会以相同的方式工作还是我应该用强项找到/替换保留？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:15:14.673

你肯定想把`strong`你的类的保留属性放在上面。默认值为`assign`，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:08:20.963

```
@property (nonatomic, strong) UIButton *myButton; 
```

`strong , weak & unsafe_unretained`在 ARC 中使用以获取更多参考，请阅读 iOS 5。

如果您想创建一个启用 ARC 的项目并且某些页面不支持 ARC，请使用此命令，以便特定文件的 ARC 将包含在 ARC 中。`-fno-objc-arc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:14:41.297

取决于您是否想要对属性中的对象进行强引用。这只是 setter 的实现方式：（是否保留）这意味着，您分配给它的对象将不会被释放，直到您的类实例被释放。默认情况下，该属性已分配。但是话又说回来，你不需要太担心 ARC。我会和强者一起安全。

# javascript - 如何启用输入onclick多选

> ID：10206163
> 
> 赞同：0
> 
> 时间：2012-04-18T09:04:12.050
> 
> 标签：javascript, html

您好我想更改输入文本属性。像这样的代码

```
<div class="bungkus">
<div class="judul1"><input type="text" disabled value="data1" class="classb"/></div>
<div class="judul1"><input type="text" disabled value="data2" class="classb"/></div>
<div class="judul1"><input type="text" disabled value="data3" class="classb"/></div>

  <div class='edit'><input type="image" src="http://i1172.photobucket.com/albums/r568/novikoraharja/TextEdit.png" onclick="edit()" id="edit" ></div>

  <div class='cancel'><input type="image" src="http://i1172.photobucket.com/albums/r568/novikoraharja/Buttoncancel.png"  onclick="deletes(<?php echo $row['ID'];?>)"> </div>

<div class="judul1"><input type="text" disabled value="data4" class="classb"/></div>
<div class="judul1"><input type="text" disabled value="data5" class="classb"/></div>
<div class="judul1"><input type="text" disabled value="data6" class="classb"/></div>

  <div class='edit'><input type="image" src="http://i1172.photobucket.com/albums/r568/novikoraharja/TextEdit.png" onclick="edit()" id="edit" ></div>

  <div class='cancel'><input type="image" src="http://i1172.photobucket.com/albums/r568/novikoraharja/Buttoncancel.png"  onclick="deletes(<?php echo $row['ID'];?>)"> </div>
</div> 
```

我想将禁用更改为启用。但我必须在数据网格视图上选择多选。

[这里](http://jsfiddle.net/6J4K3/7/)的例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:11:50.357

使用 jQuery 的示例：

```
<script type="text/javascript" src="link/to/your/jquery.min.js"></script>

 <script type="text/javascript">
 $(document).ready(function(){

 $("#your_trigger_id").click(function(){

 $("#your_input_id").attr("disabled",true);

 });

//remove disabled again
 $("#your_trigger_id").click(function(){

 $("#your_input_id").removeAttr("disabled");

 });

 });
 </script> 
```

# c# - 外键属性错误

> ID：10206164
> 
> 赞同：0
> 
> 时间：2012-04-18T09:04:12.257
> 
> 标签：c#, wpf, entity-framework, entities

我有一组出租物业，每个都附有一堆图像（作为子对象）。我正在使用带有 sql ce 数据库的 EF 4.0，我需要能够从数据库中删除所有属性和图像。这是我正在使用的代码：

```
 private void SaveProperty()
    {
        try
        {
            if (PropertyList != null)
            {
                //Purge old database      
                IList<Property> ClearList = new List<Property>(from property in entities.Properties.Include("Images") select property);
                foreach (Property a in ClearList)
                {
                    if (a != null)
                    {
                        if (a.Images.Count != 0)
                        {
                            Property property = entities.Properties.FirstOrDefault();

                            while (property.Images.Count > 0)
                            {
                                var image = property.Images.First();
                                property.Images.Remove(image);
                                entities.DeleteObject(image);
                            }

                            entities.SaveChanges();
                        }
                        entities.DeleteObject(a);
                        entities.SaveChanges();
                    }
                }

                foreach(Property p in PropertyList.ToList())
                {                        
                    //Store sort (current position in list)
                    p.Sort = PropertyList.IndexOf(p);
                    entities.AddToProperties(p);
                    entities.SaveChanges();
                }
            }
        }

        catch (Exception ex)
        {
            System.Windows.MessageBox.Show(ex.Message);
        }
    } 
```

我收到此错误：操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

它在 Image foreach 循环之后直接链接到 SaveChanges() 命令。任何想法为什么我得到这个？

编辑：

这是在我的旧程序结构（没有 mvvm）下运行良好的旧代码。

```
 private void DeleteProperty()
    {
        if (buttonPres.IsChecked == false)
        {
            //Perform parts of DeleteImage() method to remove any references to images (ensures no FK errors)
            Property p = this.DataContext as Property;
            if (p == null) { return; }

            MessageBoxResult result = System.Windows.MessageBox.Show(string.Format("Are you sure you want to delete property '{0}'?\nThis action cannot be undone.", p.SaleTitle), "Confirm Delete", MessageBoxButton.YesNo, MessageBoxImage.Question);
            if (result == MessageBoxResult.Yes)
                try
                {
                    int max = listBoxImages.Items.Count;
                    for (int i = 0; i < max; i++)
                    {
                        Image img = (Image)listBoxImages.Items[0];
                        entities.DeleteObject(img);
                        entities.SaveChanges();
                    }

                    entities.DeleteObject(p);
                    entities.SaveChanges();
                    BindData();
                }
                catch (Exception ex)
                {
                    System.Windows.MessageBox.Show(ex.Message, "Exception", MessageBoxButton.OK, MessageBoxImage.Error);
                }
        }
    } 
```

注意：Binddata() 只是刷新属性列表框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:06:26.420

我的赌注是删除图像后删除保存更改，如果此关系为 1-many，您将保存更改为违反此关系的状态

尝试：

```
 //Purge old database                  
    foreach (Property a in entities.Properties)
    {
        if (a != null)
        {
            if (a.Images != null)
            {
                foreach (Image i in a.Images)
                {
                    entities.Images.DeleteObject(i);
                }
            }
            entities.Properties.DeleteObject(a);
        }

    }
    entities.SaveChanges(); 
```

# c# - WPF UIElement 刷新错误？

> ID：10206171
> 
> 赞同：6
> 
> 时间：2012-04-18T09:04:42.410
> 
> 标签：c#, .net, wpf, wpf-controls, uielement

我有一个自定义面板，用于绘制选择效果；但有时它不会清除之前的矩形，如果在屏幕足够大（跨两个显示器）时来回移动鼠标，是WPF错误还是限制？你知道如何解决这个问题吗？提前致谢。

简化的代码如下所示

```
public class CustomPanel : Panel
{
    private Rectangle _rectangle;

    public CustomPanel()
    {
        this._rectangle = new Rectangle();
        this._rectangle.StrokeThickness = 3;
        this._rectangle.Stroke = new SolidColorBrush(Color.FromArgb(220, 0, 0, 0)); ;
        this.Children.Add(this._rectangle);
    }            

    protected override Size MeasureOverride(Size availableSize)
    {
        this._rectangle.Measure(availableSize);
        return this._rectangle.DesiredSize;
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if (!finalSize.IsEmpty)
        {
            this._rectangle.Arrange(new Rect(new Point(0, 0), finalSize));
        }
        return finalSize;
    }
} 
```

我把它放在一个网格中并在鼠标移动期间使其无效，就像这样

```
 void OnMouseMove(object sender, MouseEventArgs e)
    {
        var point = e.GetPosition(this);
        var size = new Size(point.X>=0? point.X:0, point.Y>=0? point.Y:0);
        this.Selection.Measure(size);
        this.Selection.Arrange(new Rect(size));

    } 
```

结果如下图所示 ![在此处输入图像描述](../Images/bd75c408dc0e35cafe98df121a13a27c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:31:19.050

尝试`UIElement.InvalidateVisual();`

# android - 无法在 AVD 中显示“应用程序”

> ID：10206173
> 
> 赞同：1
> 
> 时间：2012-04-18T09:04:47.913
> 
> 标签：android, cordova, avd

编辑：似乎我一直在正确的轨道上，10+（左右）重新启动，瞧。有用。

首先，我正在尝试启动并运行 AVD，并使用真正简单的“helloWorld”对其进行测试。

我正在使用 Android 4.0.3，如果这可能重要的话。

在内存分配和运行时遇到大量麻烦之后，您可以命名它.. AVD 现在启动并运行，没有警告或错误。

我可以在上面安装我的项目..

```
[2012-04-17 23:28:04 - AndroidProj] Android Launch!
[2012-04-17 23:28:04 - AndroidProj] adb is running normally.
[2012-04-17 23:28:04 - AndroidProj] Performing com.phonegap.helloworld.AndroidProjActivity activity launch
[2012-04-17 23:28:09 - AndroidProj] Uploading AndroidProj.apk onto device 'emulator-5554'
[2012-04-17 23:28:12 - AndroidProj] Installing AndroidProj.apk...
[2012-04-17 23:28:54 - AndroidProj] Success!
[2012-04-17 23:28:54 - AndroidProj] Starting activity com.phonegap.helloworld.AndroidProjActivity on device emulator-5554 
```

我使用的所有代码几乎只是从教程中复制+粘贴：

“主”java 文件。(@AndroidProj/src/com.phonegap.helloworld)

```
package com.phonegap.helloworld;

import org.apache.cordova.*;
/*import com.phonegap.DroidGap;*/
import android.os.Bundle;

public class AndroidProjActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

和 html (@AndroidProj/assets/www)

```
<!DOCTYPE HTML>
<html>
<head>
<title>PhoneGap</title>
<script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>
</head>
<body>
<h1>Hello World</h1>
</body>
</html> 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.phonegap.helloworld"
    android:versionCode="1"
    android:versionName="1.0" >

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
    />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidProjActivity"
            android:label="@string/app_name" 
            android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="org.apache.cordova.DroidGap" android:label="@string/app_name" android:configChanges="orientation|keyboardHidden"> 
        <intent-filter> </intent-filter> 
        </activity> 
    </application>

</manifest> 
```

除了我需要永远安装我的项目这一事实之外，它似乎执行正确。但是，我得到的只是模拟器，我的项目/文件无处可寻。问题可能出在哪里的任何线索？

![在此处输入图像描述](../Images/347a82eddc1f7684a12db662505325d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:07:09.873

您是否尝试直接从已安装的应用程序运行它？由于安装成功，您应该是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T00:07:03.143

按照建议，我会自己“回答”这个问题。

事实证明没有问题，至少在代码方面没有问题，后来重新启动了一堆，一切都运行得很顺利。

不过，感谢您的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T21:06:40.707

我遇到了同样的问题。我重新开始黯然失色，一切都很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T06:06:51.907

使用鼠标卢克 - 单击底部的第三个图标，带有矩形的圆圈，这将显示你的所有应用程序，小绿人将显示 helloworld

# windows - 在 windows 中编译 gtk 程序时如何克服错误？

> ID：10206174
> 
> 赞同：0
> 
> 时间：2012-04-18T09:04:51.803
> 
> 标签：windows, gcc, gtk

我已经在 Windows 中安装了 gtk 和 mingw 并使用以下命令编译程序

```
 set VAR=-mms-bitfields -IC:/Windows/gtk+-bundle/include/gtk-2.0 -IC:/Windows/gtk+-bundle/lib/gtk-2.0/include -IC:/Windows/gtk+-bundle/include/atk-1.0 -IC:/Windows/gtk+-bundle/include/cairo -IC:/Windows/gtk+-bundle/include/gdk-pixbuf-2.0 -IC:/Windows/gtk+-bundle/include/pango-1.0 -IC:/Windows/gtk+-bundle/include/glib-2.0 -IC:/Windows/gtk+-bundle/lib/glib-2.0/include -IC:/Windows/gtk+-bundle/include -IC:/Windows/gtk+-bundle/include/freetype2 -IC:/Windows/gtk+-bundle/include/libpng14  -LC:/Windows/gtk+-bundle/lib -lgtk-win32-2.0 -lgdk-win32-2.0 -latk-1.0 -lgio-2.0-lpangowin32-1.0 -lgdi32 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lglib-2.0 -lintl

    gcc a.c %VAR% 
```

我有以下错误

```
C:\Users\kiran\Desktop\gtk>gcc a.c -mms-bitfields -IC:/Windows/gtk+-bundle/inclu
de/gtk-2.0 -IC:/Windows/gtk+-bundle/lib/gtk-2.0/include -IC:/Windows/gtk+-bundle
/include/atk-1.0 -IC:/Windows/gtk+-bundle/include/cairo -IC:/Windows/gtk+-bundle
/include/gdk-pixbuf-2.0 -IC:/Windows/gtk+-bundle/include/pango-1.0 -IC:/Windows/
gtk+-bundle/include/glib-2.0 -IC:/Windows/gtk+-bundle/lib/glib-2.0/include -IC:/
Windows/gtk+-bundle/include -IC:/Windows/gtk+-bundle/include/freetype2 -IC:/Wind
ows/gtk+-bundle/include/libpng14  -LC:/Windows/gtk+-bundle/lib -lgtk-win32-2.0 -
lgdk-win32-2.0 -latk-1.0 -lgio-2.0-lpangowin32-1.0 -lgdi32 -lpangocairo-1.0 -lgd
k_pixbuf-2.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lgli
b-2.0 -lintl
C:\Windows\MinGW\bin/ld.exe: cannot find -lgio-2.0-lpangowin32-1.0
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:16:22.237

我同意间距问题，应该是`-lgio-2.0 -lpangowin32-1.0`，不是`-lgio-2.0-lpangowin32-1.0`。如果您仍然有类似的错误，请使用`-L`选项检查您传递给 gcc 的目录中未找到的库是否可用（即。`C:/Windows/gtk+-bundle/lib`）

顺便说一句，更喜欢[GTK 建议的语法](http://developer.gnome.org/gtk/stable/gtk-compiling.html)，它可以防止复制/粘贴问题：

```
gcc $(pkg-config --cflags --libs gtk+-2.0) hello.c -o hello 
```

您可能需要将 .pc 文件添加`pkg-config`到您`PATH`的 .pc 文件所在的目录`PKG_CONFIG_PATH`。

# windows - 适用于 Windows 的简单、独立于编译器的 SCM

> ID：10206176
> 
> 赞同：0
> 
> 时间：2012-04-18T09:05:06.610
> 
> 标签：windows, version-control

[我不是真正的程序员，只是使用不同的工具（Python、VB.NET、 AutoIt](https://en.wikipedia.org/wiki/AutoIt)等）编写小的一次性脚本和程序。

在编写脚本和 proggies 时，我经常想要对代码进行版本化，以便我可以尝试新的东西，同时能够返回或跟踪我之前尝试过的内容。

目前，我使用[Fossil](http://en.wikipedia.org/wiki/Fossil_%28software%29)是因为它非常易于安装（只有一个 EXE 文件），不链接到特定的开发工具（IDE 等）并且相对易于使用。

但我想知道是否有更好的解决方案可以满足这些要求：

*   对于 Windows
*   免费或负担得起
*   GUI 而不是 CLI（Fossil 是 CLI：这是我寻找替代方案的主要原因）
*   易于安装和操作（添加文件/文件夹，可选择排除某些扩展名；创建文件/文件夹的新版本）

是否有支持这些要求的[SCM ？](https://en.wikipedia.org/wiki/Version_control)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:20:04.623

我不确定这是否是比 Fossil SCM “更好”的解决方案，但确实存在一个用于 Fossil 的跨平台基于 Qt 的 GUI 前端，看起来很有希望。它被称为[燃料](https://code.google.com/p/fuel-scm/)。

我个人不能保证（目前），但它似乎是一个可行的项目，接近 1.0 版本。

此外，Fossil 确实在基于 Web 的 GUI 中烘焙，可以从命令行调用并绑定到*127.0.0.1:8080*。这在[Fossil FAQ](http://www.fossil-scm.org/index.html/doc/trunk/www/faq.wiki#q1)中有详细说明，但基本思想是运行：

```
fossil ui REPOSITORY-FILENAME 
```

然后等待它启动您的默认网络浏览器。根据 Web UI 的文档，如果您在打开的签出中运行“ui”命令，则可以完全省略存储库名称。如果由于某种原因 Fossil 找不到您的网络浏览器，您可以手动设置路径（来自快速入门指南）：

```
fossil setting web-browser path-to-web-browser 
```

# c# - linq中的tsql如何查询

> ID：10206177
> 
> 赞同：1
> 
> 时间：2012-04-18T09:05:14.740
> 
> 标签：c#, sql, linq

在 sql 我有查询

```
select * from table where id in (5,7,8) 
```

如何在 LINQ 查询中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:08:50.447

```
var t = from u in table
               where new[] { 5, 7, 8 }.Contains(u.id)
               select u 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:11:42.717

```
var ids = new int[] { 5, 7, 8 };
var rows = from row in table 
           where ids.Contains(row.id) 
           select row 
```

# python - 如何在 Python 中记录包名称？

> ID：10206178
> 
> 赞同：8
> 
> 时间：2012-04-18T09:05:18.263
> 
> 标签：python, logging

我正在使用 Pythons`logging`模块。我想记录消息的完整路径，例如
“msg packagename.modulename.functionName lineNumber”，但是如何获取消息的包名称？

日志记录配置为：

```
LOGGING = {    
'formatters': {
    'simple': {
    'format': '[%(levelname)s] %(message)s [%(module)s %(funcName)s %(lineno)d]'
    },  
},
'handlers': {
'console': {
        'level':'INFO',
        'class':'logging.StreamHandler',
        'formatter':'simple',
    }
},
'loggers': {
    'develop': {
        'handlers': ['console'],
        'level': 'DEBUG',
        'propagate': True,
    },
} 
```

}

我得到一个这样的记录器：

```
logger = logging.getLogger('develop') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-22T01:03:04.273

我不知道如何像 Java 默认那样获取“包名”，但要添加文件名（它为您提供同样多的上下文），`%(pathname)s`请在您的格式字符串中使用：

```
'format': '[%(levelname)s] %(message)s [%(pathname)s %(funcName)s %(lineno)d]' 
```

请参阅此处的文档：[https ://docs.python.org/2/library/logging.html#logrecord-attributes](https://docs.python.org/2/library/logging.html#logrecord-attributes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-26T20:04:04.857

我建议使用 生成包的记录器`logging.getLogger(__name__.split('.')[0])`，使用包含`name`参数的格式化程序对其进行配置，然后使用 生成模块的记录器`logging.getLogger(__name__)`。

例如：

```
import logging

formatter = logging.Formatter('%(name)s - %(message)s')
handler = logging.StreamHandler()
handler.setFormatter(formatter)
handler.setLevel(logging.INFO)

package_logger = logging.getLogger(__name__.split('.')[0])
package_logger.setLevel(logging.INFO)
package_logger.addHandler(handler)

logger = logging.getLogger(__name__)
logger.info('message') 
```

对于`module.py`位于名为 的包内的模块`package`，`logger.info()`调用应生成以下消息`STDERR`：

```
package.module - message 
```

在同一个包内的其他模块中，您可以简单地设置您的记录器，如下所示以获得类似的功能：

```
import logging

logger = logging.getLogger(__name__)

logger.info('another message') 
```

对于`another.py`package 内部的模块，从同一包的模块`package`调用`module.py`，这应该生成以下文本`STDERR`：

```
package.another - another message 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:29:05.697

我看到了解决这个问题的两种方法。

一，在每次调用 log.[debug,info,error,...] 时传入文件名，由`__file__`魔法变量获得。这不会为您提供包名称，但它与找出日志消息的来源一样好。缺点是您需要修改应用程序中的每个日志记录调用。

二，创建一个`logging.Logger`覆盖`Logger.log`实例方法的子类。在您的新`log`方法中，使用`inspect.stack()`和`inspect.getframeinfo()`方法查找导致`log`代码调用的堆栈帧，并提取文件名和行号。然后，您可以相应地修改传入的日志消息。最后，`logging`通过调用告诉模块使用你的子类`logging.setLoggerClass()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-25T01:44:10.067

我在一个名为 common 的包中有一个 utils.py 文件，它具有以下内容。

*实用程序.py*

```
import logging
log = logging
log.basicConfig(level=log.INFO, format='%(asctime)s:%(filename)s:%(funcName)s'
                                       ':%(levelname)s :%(message)s') 
```

在我需要使用日志的任何其他文件中，我使用以下内容。

```
from pkg.common.utils import log
log.info("some msg") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T14:30:20.833

这是我如何实现的示例： [https ://github.com/JensTimmerman/vsc-base/blob/master/lib/vsc/utils/fancylogger.py](https://github.com/JensTimmerman/vsc-base/blob/master/lib/vsc/utils/fancylogger.py)

正如西蒙建议的那样，我扩展到 python 记录器以添加自定义字段。但是您也可以只定义一个新的 getLogger 函数来执行此操作：

```
rootmodulename = inspect.stack()[-1][1].split('/')[-1].split('.')[0]
callingfunctionname = inspect.stack()[2][3]
logger = logging.getLogger("%s.%s" % (rootmodulename, callingfunctionname)) 
```

但是请查看 fancylogger.py 以获得完整的示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-05T14:04:09.410

[只需按照https://docs.djangoproject.com/en/2.2/topics/logging/](https://docs.djangoproject.com/en/2.2/topics/logging/)的说明将样式“{”与 {module} 一起使用

例子：

```
'formatters': {
    'standard': {
        'format': '{asctime}: [{levelname}] [{name}] [{module}.{funcName} linenr: {lineno}]: {message}',
        'style': '{',
    },
    'report': {
        'format': '{asctime}: [{name}.{module}.{funcName} linenr: {lineno}]: {message}',
        'style': '{',
    },
    'simple': {
        'format': '{levelname} {message}',
        'style': '{',
    },
}, 
```

# iphone - 字符串中日期的奇怪问题

> ID：10206185
> 
> 赞同：2
> 
> 时间：2012-04-18T09:05:43.927
> 
> 标签：iphone, objective-c, ios, xcode4, nsdate

一个奇怪的问题：

我通过以下代码将字符串转换为日期：

```
NSString *dateStr = @"02/10/2012 12:00:13 PM";

NSDateFormatter *dtF = [[NSDateFormatter alloc] init];
[dtF setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];

NSDate *d = [dtF dateFromString:dateStr];
NSDateFormatter *dateFormatStr = [[NSDateFormatter alloc] init];

[dateFormatStr setDateFormat:@"MMMM dd, yyyy HH:mm a"];
NSString *strDate = [dateFormatStr stringFromDate:d];   
NSLog(@"Output:::-->%@",strDate); 
```

我正在使用**Xcode 4.2**

它在**模拟器和带有 iOS 5.0 和 iPhone 4 的设备 iPhone 3Gs 和 iPad 中运行良好**

但问题出在**装有 iOS 5.0.1 的 iPod 中**。在 iPod 中它显示**(null)**值。

代码有什么问题？或者还有其他问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:37:51.007

我发现由于用户在 iPhone 上的设置，NSDateFormatter 输出可能不稳定。您可以通过使用它来强制它标准化（我不记得细节） -

```
[dtF setLocale:enUSPOSIXLocale]; 
```

...使整个输出更可预测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:24:06.960

不如`a`试试`aaa`

用以下代码替换您的代码：

```
NSString *dateStr = @"02/10/2012 12:00:13 PM";

NSDateFormatter *dtF = [[NSDateFormatter alloc] init];
[dtF setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];

NSDate *d = [dtF dateFromString:dateStr];
NSDateFormatter *dateFormatStr = [[NSDateFormatter alloc] init];

[dateFormatStr setDateFormat:@"MMMM dd, yyyy hh:mm aaa"];
NSString *strDate = [dateFormatStr stringFromDate:d];   
NSLog(@"Output:::-->%@",strDate); 
```

输出:::-->`February 10, 2012 12:00 PM`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:34:20.593

解决了 ！！！

问题出在日期字符串中`NSString *dateStr = @"02/10/2012 12:00:13 PM";`

时间是 24 小时制的，我认为这是错误的**“AM/PM” 。****AM/PM**应采用 12 小时格式。

所以，我刚刚从字符串中删除了**AM/PM**并且它起作用了！！！

也来自代码：

```
[dtF setDateFormat:@"MM/dd/yyyy HH:mm:ss"]; 
```

# java - 证明 hashMap 是故障安全的代码

> ID：10206188
> 
> 赞同：1
> 
> 时间：2012-04-18T09:05:48.390
> 
> 标签：java, collections

问题已编辑：
HashSet 和 HashMap 是快速失败的（但这不是保证的），如代码中所述：

```
void goHashSet() {
        Set set = new HashSet();
        for (int i = 1; i <= 10; i++) {
            set.add(i);
        }
        Iterator i = set.iterator();
        while (i.hasNext()) {
            // set.add(16);//Exception in thread "main"
            // java.util.ConcurrentModificationException
            System.out.println("HashSet >>> itertor >>>" + i.next());
        }
    } 
```

现在，我想要我所知道的故障安全的示例和集合
：ConcurrentHashMap,CopyOnWriteArrayList 是故障安全的..但是如何对其进行编码以表明它们是故障安全的

**编辑和理解我想要什么以及我是如何实现它的：**

如果我们使用 HashMap

```
void goHashMap() {
        Map mp = new HashMap();
        for (int i = 19; i <= 24; i++) {
            mp.put(i, "x");
        }
        Set setKeys = mp.keySet();
        Iterator i = setKeys.iterator();
        while (i.hasNext()) {
            // mp.put(499, "x");// Exception in thread "main"
            // java.util.ConcurrentModificationException
            System.out.println("HashMap >>> itertor >>>" + i.next());
        }
    } 
```

我们得到 ConcurrentMException

但是使用 ConcurrentHashMap 完成相同的代码，没有错误（非多线程环境）

```
void goConcurrentHashMap() {
    Map mp = new ConcurrentHashMap();
    for (int i = 19; i <= 24; i++) {
        mp.put(i, "x");
    }
    Set setKeys = mp.keySet();
    Iterator i = setKeys.iterator();
    while (i.hasNext()) {
        mp.put(499, "x");
        System.out.println("HashConcurrentMap >>> itertor >>>" + i.next());
    }
} 
```

更重要的是：在多线程环境中，ConcurrentHashmap 可能会快速失败并抛出异常 CME

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:13:44.970

HashMap 不**保证**是故障安全的。您仍然可以在不同的线程中修改 HashMap 并且让另一个线程不会注意到。HashMap 的 OpenJDK 版本使用非`volatile`modcount 字段来识别并发修改。由于非易失性字段不能保证在线程之间保持一致，一个线程可以更改它，而另一个线程无法注意到它的更改。

这是一种相对罕见的竞争条件，因此很有可能会检测到 CME，但是即使您对其进行测试并且它连续 10000 次按预期运行，这也不能提供您可能正在寻找的证据。

事实上，它有可能编写将通过前 10000 次并在此之后始终失败的代码。这是因为 HotSpot 编译将在此之后编译为本机代码。这意味着在优化之前运行良好的代码在优化后可能表现不同。尤其是非易失性领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:10:07.817

API Javadoc（用于[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)和[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)）仅对故障安全做出软保证：

> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器`ConcurrentModificationException`在尽力而为的基础上抛出。因此，编写一个依赖于这个异常的正确性的程序是错误的：*迭代器的快速失败行为应该只用于检测错误*。

`HashSet`相同的行为可以通过在内部实现的事实来解释`HashMap`。

随意查看源代码，它与您的 JDK 安装捆绑在一起。

### 更新

> 现在，我想要示例和故障安全的集合

看看`java.util.concurrent`包装中的收藏品。

> 据我所知：ConcurrentHashMap,CopyOnWriteArrayList 是故障安全的..但是如何对其进行编码以表明它们是故障安全的

并发的本质**是不可能仅通过测试来证明线程安全（或故障安全）**。您只能证明相反的情况，即特定类不是线程安全的（如果恰好是这种情况）。这正是使并发变得困难的原因。

最接近证明这些事情的方法是由一位或多位并发专家对有问题的代码进行彻底分析。一些静态分析工具也可以发现一些问题，但同样不能保证干净的静态分析结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:47:49.940

就像我们看到 ConcurrentHashMap 的内部实现一样，它非常清楚地提到它适用于原始集合的克隆而不是原始集合。

因此，理想情况下，您的原始集合与初始集合相同......因此我们可以说 ConcurrentHashMap 避免了 COncurrentModifcationException 并且可以称为故障安全。

I tried to test it by creating a test programs where multiple threads was trying to modify my map .. I ran the test around 10 times and not even a single time it throws ConcurrentModification exception.

If we go more in detail implementation of ConcurentHashMap ... we will find that the synchronization mechanism is very much different from normal hashmap ... as CHM works on the algorithm segmentation lock.

# c - 用 C 重启程序

> ID：10206190
> 
> 赞同：5
> 
> 时间：2012-04-18T09:05:54.583
> 
> 标签：c, linux, signals, kernel

嗨，我有一个用 C 编写的程序。我有全局变量、数组、动态变量以及数组等...我将 SIGHUP 发送到我的程序并在处理程序中清理动态内存。我想用 HUP 重新启动我的程序.有没有办法在c中重新启动程序？我想从 main 退出并返回，以便清理 main 中的静态数组处理的内存并重新启动 main。

你好，我们又见面了。我编辑了信号处理程序并在处理程序中添加了 execv。在处理程序中，我有 2 个功能。首先是 clean_up(); 清理动态数组，第二个是 execv()。发送 HUP 后，首先运行 clean_up，然后运行 ​​execv。但过了一小段时间我有段错误。但是，当我不调用 clean_up 函数时，它工作正常吗？清理有问题吗？但清理适用于其他信号，例如终止信号

还有一个关于 execv 的问题？它不是从 main 启动新程序吗？当我调用 execv 时，它不会再次从 main 启动

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T09:13:01.157

由于您在 linux 上，我认为这是最干净的方法：

```
int main(int argc, char **argv) {
    /* your program here */

    /* if you want to restart call this */
    if (execv(argv[0], argv)) {
        /* ERROR, handle this yourself */
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:17:48.273

我假设您使用的是某种形式的 unix。[这里](https://stackoverflow.com/questions/2955847/how-to-restart-c-daemon-program-in-linux-after-receiving-sighup-signal)有一个类似问题的答案。该代码只是重新读取配置文件，这是人们在您叹气时期望发生的事情，而不是实际重新启动。也就是说，如果您想重新启动，只需将 load_config() 调用替换为 exec。有几个 exec 调用可供选择，因此请查看 exec 或 execve 的手册页以选择您想要的。您将从父进程传递环境和 argv 指针以在执行时保留它们。

不管它值多少钱，如果您要重新启动程序并可能只是重新初始化它们，我真的不明白为什么要清理静态数组。

# ruby - Ruby - 定义方法和闭包

> ID：10206193
> 
> 赞同：3
> 
> 时间：2012-04-18T09:05:57.937
> 
> 标签：ruby, reflection, closures, self

define_method 表现出以下行为：

```
class TestClass
  def exec_block(&block) ; yield ; end
end
TestClass.new.send(:exec_block) do ; puts self ; end
# -> main
TestClass.send(:define_method, :bing) do ; puts self ; end
TestClass.new.bing
# -> <TestClass:...> 
```

我不明白的是传递给 define_method 的块应该是一个闭包。因此，它应该（至少根据我的理解）捕获 as 的值，`self`如`main`调用时所展示的那样`exec_block`。

我知道该块将成为该方法的主体，但我不明白该行为的原因。为什么当使用不同的方法时，块会评估不同的东西？

如何使用`define_method`其他方法重现块的行为？即我怎么能写`exec_block`出来让它输出`<TestClass:...>`而不是'main'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:09:15.787

`self`像任何其他变量一样被闭包捕获。`Proc`我们可以通过传递不同的对象实例来验证这一点：

```
class A
  def exec_block(&block)
    block.call
  end
end

class B
  def exec_indirect(&block)
    A.new.exec_block(&block)
  end
end

block = proc { p self }
a = A.new; b = B.new

a.exec_block(&block)    # => main
b.exec_indirect(&block) # => main 
```

但是，[`BasicObject#instance_eval`](http://apidock.com/ruby/BasicObject/instance_eval)类似动态重新绑定`self`变量：

> 为了设置上下文，在代码执行时将变量`self`设置为*obj*，让代码可以访问*obj 的*实例变量

[`Module#define_method`](http://apidock.com/ruby/Module/define_method)反过来用于`instance_eval`执行关联的块：

> 如果指定了块，则将其用作方法体。使用 instance_eval [...] 评估此块

观察：

```
A.send(:define_method, :foo, &block)
a.foo                   # => #<A:0x00000001717040>
a.instance_eval(&block) # => #<A:0x00000001717040> 
```

有了这些知识，您现在可以重写您`exec_block`的使用`instance_eval`：

```
class A
  def exec_block(&block)
    instance_eval(&block)
  end
end

block = proc { p self }
A.new.exec_block(&block)  # => #<A:0x00000001bb9828> 
```

如前所述，使用`instance_eval`似乎是运行`Proc`具有修改上下文的实例的唯一方法。它可用于在 Ruby中[实现动态绑定。](https://github.com/niklasb/ruby-dynamic-binding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:51:47.707

灵感来自 Niklas B. 的评论：

```
class TestClass
  def exec_block(&block) ; yield ; end
end
s = self

TestClass.new.send(:exec_block) do ; puts s ; end
# -> main

TestClass.send(:define_method, :bing) do ; puts s ; end
TestClass.new.bing
# -> main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:20:22.617

第一件事 - 当您将块显式传递给方法而不是`yield`您可以使用`block.call`. 第二件事-内部`exec_block`方法替换`yield`为`instance_eval(&block)`，您将看到魔力；）

再澄清一点 - 在第一个示例中，该块捕获本地范围以及`self`指向`main`对象的变量。

在第二个示例中（使用`define_method`），该块将被视为一个新的方法体，并将在对象的范围内使用 进行评估`instance_eval`。有关更多详细信息，您可以查看：[http ://apidock.com/ruby/Module/define_method](http://apidock.com/ruby/Module/define_method)

# f# - 在序列计算表达式中的 for 循环中产生

> ID：10206199
> 
> 赞同：12
> 
> 时间：2012-04-18T09:06:09.620
> 
> 标签：f#, sequence

为什么这些工作

```
let x = seq { for i in 1 .. 10 do yield i }
let x = seq { for i in 1 .. 10 -> i }
let x = seq { for i = 1 to 10 do yield i } 
```

但是这个没有？

```
let x = seq { for i = 1 to 10 -> i } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T10:25:13.540

根据[F# 规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997064)，序列表达式可以是普通的计算表达式（这是您编写的情况`do yield`），也可以是特定于序列表达式的简短形式：

```
seq { comp-expr }
seq { short-comp-expr } 
```

该`comp-expr`案例涵盖了您的第一个和最后一个工作示例。短格式使用`->`并且规范明确指出唯一允许的短格式是`in`关键字：

```
short-comp-expr :=
   for pat in expr-or-range-expr -> expr        -- yield result 
```

还有许多其他的简短形式在实践中会很有用，但我想目的是为这个非常常见的大小写提供一种特殊的语法，并保持语言统一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T11:05:12.903

要为@Tomas 的答案添加更多详细信息，您的第一个和第三个示例详细说明为：

```
let x = Seq.collect (fun i -> {yield i}) {1..10} 
```

而您的第二个示例被翻译为：

```
let x = Seq.map (fun i -> i) {1..10} 
```

[规范中的第 6.3.11 节](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997064)中提到了翻译规则。在该部分中，您还可以看到 F# 统一处理完整`for`循环 ( `for...in...do`and `for...to...do`)，但特殊语法 with`->`仅应用于`for...in...`块。

没有问题，因为您始终可以使用`for...in...`来表达`for...to...`。

# linq - 如何连接到数据库 linq

> ID：10206201
> 
> 赞同：2
> 
> 时间：2012-04-18T09:06:17.467
> 
> 标签：linq, sql-server-2008, linq-to-sql, connection

在 SQL 中我们打开连接

```
 conn.Open();
 cmd.ExecuteNonQuery();
 conn.Close(); 
```

或者

```
 using (conn = new SqlConnection(connectionString))
 {
     cmd1.Connection = conn;
     conn.Open();
     cmd1.ExecuteNonQuery();
 } 
```

LINQ to SQL 的最佳实践是什么：

```
 DataClassesLinqDataContext dbLinq = new DataClassesLinqDataContext(); 
```

或者

```
 using(DataClassesLinqDataContext dbLinq = new DataClassesLinqDataContext())
 {
      var x = ...
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:09:00.633

是的，最佳实践是处理上下文以释放它所拥有的资源，所以我会选择`using ()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:08:52.693

当然，使用“using”子句，它只是确保 dispose 方法在结束其范围后被调用。无需释放昂贵的变量，如数据库连接。

# c# - 是否可以在 ASP.NET MVC 中将命名空间分组到一个文件中？

> ID：10206204
> 
> 赞同：4
> 
> 时间：2012-04-18T09:06:24.723
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有 10 多个文件（视图），其中许多使用公共命名空间（数量几乎为 5-6）。

很难为所有文件管理命名空间，我认为将命名空间分组到一个文件中并将该文件插入每个视图中，这意味着一行而不是 5-6 行命名空间。

怎么做 ？

使用部分视图，我想这是不可能的。将名称空间分组到一个文件中的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:09:46.887

您可以将命名空间添加到您的 web.config 下`system.web/pages/namespaces`

[http://msdn.microsoft.com/en-us/library/ms164642.aspx](http://msdn.microsoft.com/en-us/library/ms164642.aspx)

```
<system.web>
    <pages>
        <namespaces>
            <add namespace="System.SomeNamespace" />
       </namespaces>
    </pages>
</system.web> 
```

在此处添加它们具有将这些命名空间添加到所有页面/视图的效果。

# android - 来自 URL 的 ImageView

> ID：10206205
> 
> 赞同：1
> 
> 时间：2012-04-18T09:06:31.853
> 
> 标签：android, imageview

我想从我们的网络驱动器设置 ImageView 位图。但我无法连接到服务器：无法登录到服务器（PASS）：141.11.11.247 错误。

这是我为此下载的 ant setBitmap 代码：

`public class ResimCek implements Runnable {`

 ````
 int resimID = 0;

    public ResimCek(int parcaID) {
        // store parameter for later user
        resimID = parcaID;
    }

    public void run() {
        try {
            ImageView resim = (ImageView) findViewById(resimID);
            Bitmap bitmap = BitmapFactory
                    .decodeStream((InputStream) new URL(
                            "file://141.11.11.247/foto_metod/Parca/"
                                    + Integer.toString(resimID) + ".jpg")
                            .getContent());
            resim.setImageBitmap(bitmap);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
````  `这是我的最后一个代码：

`public class ResimCek implements Runnable {`

 ````
 int resimID = 0;

    public ResimCek(int parcaID) {
        // store parameter for later user
        resimID = parcaID;
    }

    public void run() {

        int resID = getResources().getIdentifier(Integer.toString(resimID) , "tag", getPackageName()); 
        ImageView resim = (ImageView) findViewById(resID);

        Drawable image = ImageOperations(getBaseContext(),"http://141.11.11.206/parca/" + Integer.toString(resimID) + ".jpg" ,"I" + Integer.toString(resimID) + ".jpg");
        // ******************************************************
        resim.setImageDrawable(image); // I GOT THE ERROR HERE!!!
    }
}
private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(new URL(url).openConnection().getInputStream(),saveFilename);
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
} 
```` 

`谢谢你的帮助。`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:09:16.093

可能是您忘记在清单文件中声明互联网权限，请检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:25:51.280

下载[FtpClient](http://www.lab4games.net/zz85/blog/2007/11/03/java-ftp-client/)

并使用用户名和密码登录。看看[这个](http://androiddevblog.blogspot.in/2010/08/android-ftp-client.html)文档，希望对你有帮助。``

# javascript - 刷新父窗口后弹出窗口的处理程序

> ID：10206208
> 
> 赞同：0
> 
> 时间：2012-04-18T09:06:36.203
> 
> 标签：javascript, window, handler, popupwindow

我有一个 Java 项目，使用 Java 脚本来管理站点。我有一个打开帮助对话框弹出窗口的功能。当我刷新主页时，弹出窗口没有关闭，它仍然打开。我有一个保护，您可以在帮助下打开 2 个窗口，但它正在使用处理程序 (helpWnd)，在刷新主页时它会丢失。

对不起我的英语不好; )

```
var helpWnd = null;
// Open help dialog with url from recived helpId
function openHelpDialog(helpId, height, width, title) {
    var url;
    if(helpId == "contact") {
        url = "help/contact.html";
    } else {
        var regularExpression = /[a-zA-Z][a-zA-Z][a-zA-Z][0-9][0-9][0-9][0-9]/;
        if(helpWnd!=null) {
            helpWnd.close();
        }
        url = "help/index.html?"+helpId.toLowerCase()+".html";
        if(!regularExpression.test(helpId)) {
            url = "help/index.html";
        }
    }
    helpWnd = window.open(url, title, 'width=1000, height=600, menubar=no, toolbar=no, location=no, scrollbars=yes, resizable=yes, status=no');
}

//this refresh main page
function changeRole(roleName,redirectUrl) {
    dojo.xhrPost({
        content: {
            role: roleName 
        },
        handleAs: "json",
        sync: true,
        url: 'someUrl.npi',
        load: function (response) {
            dojo.cookie(response.cookieHash, response.role, {expires : response.cookieExpiryTime});
            document.location.href = redirectUrl;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:31:47.160

正如您可能已经发现的那样，在许多情况下打开窗户被认为是有害的。

更好的选择是使用带有 javascript 的模态对话框，它本质上是同一页面中的分层对话框。我不是 Dojo 专家，但我很快找到了 Google 的文档 (http://dojotoolkit.org/reference-guide/1.7/dijit/Dialog.html)

无论如何，如果你仍然想去打开窗户，如果你确保它得到关注，你可能会得到更好的行为。看看这里：[http ://www.quirksmode.org/js/popup.html](http://www.quirksmode.org/js/popup.html)

# php - 上传服务器端后Plupload获取文件名

> ID：10206212
> 
> 赞同：2
> 
> 时间：2012-04-18T09:07:01.650
> 
> 标签：php, file, upload, plupload

我正在使用 PLUPLOAD 将文件上传到我的网页。但是，我想获取我上传的文件的名称。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T11:01:55.090

~~您从未说过您使用的是什么代码，所以我将使用通用处理程序为您提供 .NET VB 中的解决方案。~~

抱歉没有注意到`php`标签，但无论如何它都在 .NET 中

**上传.ashx**

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

Dim fileName as String = If(context.Request("name") IsNot Nothing, context.Request("name"), String.Empty)

end sub 
```

**插件.aspx**

只需按照手册初始化 pluploader 而不设置 unique_names，pluolpader 会在每个 POST 中发送文件名、块和块。

* * *

**上传.php**

所以在 PHP 中，我认为它应该是 ..（我不是 PHP 人，但你去吧）

```
$_POST["name"]; 
```

-或者-

```
$_REQUEST["name"] 
```

# aptana - 更新后无法启动 aptana 3

> ID：10206216
> 
> 赞同：0
> 
> 时间：2012-04-18T09:07:16.983
> 
> 标签：aptana, aptana3

昨天更新后，我无法启动 aptana 3。在 Windows 7 64 位上运行。我在尝试启动时收到此错误：

> aptana studio 3 可执行启动器无法找到它的配套共享库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:15:04.677

从 Aptana 网站重新安装了最新版本，我没有尝试这个主要是因为我担心我的所有设置都会消失（就像更新一样）。没什么好担心的，我只需要重新链接我的工作区。我所有的偏好仍然存在。

# ruby-on-rails - 表单未在 Rails 3 项目中加载

> ID：10206222
> 
> 赞同：0
> 
> 时间：2012-04-18T09:07:37.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, messaging, private-messaging

我遇到的问题与 Rails 3 项目的简单私人消息传递插件有关。

我的网站是一个市场，例如 GumTree.com，人们可以在其中发布他们的需求，其他人可以通过单击“联系”按钮并填写表格来做出回应，然后将表格提交给发布者。

我遇到的问题是消息表单未加载，当我转到 /messages/new 时，出现此错误：

```
undefined local variable or method `is_private_message' for #<Class:0x12cf23578> 
```

代码如下 - 感谢任何反馈！

谢谢，

费萨尔

* * *

**用户模型**

```
class User < ActiveRecord::Base

has_many :posts  
has_one :profile
has_private_messages

attr_accessible :email

validates_presence_of :email
validates_uniqueness_of :email, :message =>"Hmm, that email's already taken"
validates_format_of :email, :with => /^([^\s]+)((?:[-a-z0-9]\.)[a-z]{2,})$/i, :message => "Hi! Please use a valid email"

end 
```

**消息模型**

```
class Message < ActiveRecord::Base

is_private_message

attr_accessor :to        

end 
```

**ROUTES.RB**（仅相关部分）

```
get "messages/new" 
```

**消息> 新视图**

```
<% form_for @message, :url => user_messages_path(@user) do |f| %>
<p>
To:<br />
    <%= f.text_field :to %>
    <%= error_message_on @message, :to %>
</p>
<p>
Subject:<br />
<%= f.text_field :subject %>
<%= error_message_on @message, :subject %>
</p>
<p>
  Message<br />
  <%= f.text_area :body %>
        <%= error_message_on @message, :body %>
</p>
<p>
  <%= submit_tag "Send" %>
</p>
<% end %> 
```

**消息控制器**

```
class MessagesController < ApplicationController

before_filter :set_user

def index
if params[:mailbox] == "sent"
  @messages = @user.sent_messages
else
  @messages = @user.received_messages
end
end

def show
@message = Message.read_message(params[:id], current_user)
end

def new
@message = Message.new

if params[:reply_to]
  @reply_to = @user.received_messages.find(params[:reply_to])
  unless @reply_to.nil?
    @message.to = @reply_to.sender.login
    @message.subject = "Re: #{@reply_to.subject}"
    @message.body = "\n\n*Original message*\n\n #{@reply_to.body}"
  end
end
end

def create
@message = Message.new(params[:message])
@message.sender = @user
@message.recipient = User.find_by_login(params[:message][:to])

if @message.save
  flash[:notice] = "Message sent"
  redirect_to user_messages_path(@user)
else
  render :action => :new
end
end

def delete_selected
if request.post?
  if params[:delete]
    params[:delete].each { |id|
      @message = Message.find(:first, :conditions => ["messages.id = ? AND (sender_id = ? OR recipient_id = ?)", id, @user, @user])
      @message.mark_deleted(@user) unless @message.nil?
    }
    flash[:notice] = "Messages deleted"
  end
  redirect_to :back
end
end

private
def set_user
  @user = User.find(params[:user_id])
end 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:51:01.830

根据文档[https://github.com/jongilbraith/simple-private-messages](https://github.com/jongilbraith/simple-private-messages)没有`is_private_message`方法。但是`has_private_messages`，您已经在 User 模型中添加了一种方法。

我认为你只需要删除`is_private_message`

**编辑**

你执行了这个命令吗？`rails generate simple_private_messages:model User Message`或类似的东西。根据gem的代码（https://github.com/jongilbraith/simple-private-messages/blob/master/lib/generators/simple_private_messages/model/model_generator.rb）理论上，你应该有一个迁移生成，所以`rake db:migrate`不应为空 。

# javascript - 如何在文本框中查找两个日期之间的差异？

> ID：10206224
> 
> 赞同：0
> 
> 时间：2012-04-18T09:07:39.770
> 
> 标签：javascript, asp.net

我想找到两个日期之间的差异，其中 m 在文本框中给出日期值，我希望将差异/持续时间传递给其他文本框。

```
 <script language=javascript>
        function formshowhide(id) {
      if (id == "other") {
          //document.getElementById('quotef').style.display = "block";
          document.getElementById('otherf').style.display = "block";

     //here m writng the function for finding duration
          var txtdate1 = document.getElementById('MainContent_txtOStartDate').value;
          var txtdate2 = document.getElementById('MainContent_txtOEndDate').value;
          var date1 = new Date(txtdate1.split('-')[0], txtdate1.split('-')[1] - 1, txtdate1.split('-')[2]);
          var date2 = new Date(txtdate2.split('-')[0], txtdate2.split('-')[1] - 1, txtdate2.split('-')[2]);
          var timediffsec = date2.getTime() - date1.getTime();
          var timediffday = parseInt(timediffsec / (24 * 3600 * 1000));
          document.getElementById('MainContent_txtDays').value = timediffday;
     //here the function end for finding the duration
      }
      else {
          // document.getElementById('quotef').style.display = "none";
          document.getElementById('otherf').style.display = "none";
      }
  }
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:13:49.117

```
// Assuming you already have validation on the date input text boxes
DateTime startDate = Convert.ToDateTime(txtOStartDate.Text);
DateTime endDate = Convert.ToDateTime(txtOEndDate.Text);
TimeSpan timeDiff = startDate - endDate; 
```

然后你可以从时间跨度中显示你想要的任何东西：

```
string.Format("{0} days, {1} hours and {2} minutes.", timeDiff.Days, timeDiff.Hours, timeDiff.Minutes); 
```

# ruby-on-rails-3 - Datamapper 和 Rails 中的事务 (dm-rails)

> ID：10206231
> 
> 赞同：0
> 
> 时间：2012-04-18T09:08:22.943
> 
> 标签：ruby-on-rails-3, postgresql, transactions, datamapper

我有两个模型：酒店和位置。一个位置属于一个酒店，一个酒店只有一个位置。我正在尝试以单一形式创建两者，请记住，由于依赖冲突，我不能将 dm-nested 用于嵌套形式。

我的代码如下所示：

```
if (@hotel.save && @location.save)
  # process
else
  # back to form with errors
end 
```

不幸的是，@hotel.save 可能会失败，而@location.save 可以完成（这让我感到困惑，因为如果第一个条件失败，我认为第二个条件不会在 AND 块中运行）。

我想将这些包装在事务中，以便可以回滚位置保存。我似乎无法在网上找到一种方法。我正在使用 dm-rails、rails 3 和一个 postgresql 数据库。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:12:56.743

在 DataMapper 中包装数据库操作的常用方法是执行以下操作：

```
@hotel.transaction do
  @hotel.save
  @location.save
end 
```

请注意，`@hotel`那里是相当随意的；它也可以是`@location`，甚至是模型名称，例如`Hotel`.

以我的经验，当您启用抛出异常时，这最有效。然后如果`@hotel.save`失败，就会抛出异常，该异常会被事务块捕获，导致事务回滚。当然，这个例外被重新提出。

# ruby-on-rails - Ajax 不能在 Rails 3.1 中工作

> ID：10206233
> 
> 赞同：0
> 
> 时间：2012-04-18T09:08:30.643
> 
> 标签：ruby-on-rails, ajax, shopping-cart

基于['Agile Web Development with Rails，第三版'](http://pragprog.com/book/rails3/agile-web-development-with-rails)，我用 Ajax 创建了一个购物车，但 Ajax 不适合我。我的代码如下：

**/store/index.html.erb**：</p>

```
<%= form_tag({:action=>'add_to_cart', :id=>product}, :remote=>true ) do %>
<%= submit_tag "Add to Cart" %>
<% end %> 
```

**/layouts/store.html.erb**：</p>

```
<head>
...
<%= javascript_include_tag :defults %>
...
</head> 
```

**/controllers/store_controller.rb**：</p>

```
def add_to_cart
...
respond_to do |format|
format.js
end
...
end 
```

**add_to_cart.js.rjs**

```
page.replace_html("cart",:partial => "cart", :object=>@cart) 
```

导轨 3.1，红宝石 1.9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:58:27.457

在 Rails 3 中，Node.js 模板被命名为 name.js.erb。

让我假设您要在 ajax 调用中替换“购物车”div，并且您有 jQuery。使用以下代码创建 add_to_cart.js.erb。

```
$("#cart").replaceWith('<%=escape_javascript(render :partial => 'cart', :object=>@cart) %>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:14:54.860

RJS 不再是 Rails 的一部分。您可以使用 jQuery 而无需任何额外的下载：只是不要`.rjs`在最后使用。如果你知道 CoffeeScript，也可以在这里找到：命名你的文件`*.coffee`，你就完成了。您也可以将其命名`*.coffee.erb`为允许 ERb 预处理您的文件，但即使对于简单的文件，默认情况下也允许使用此功能`*.coffee`。

**升级版：**

```
page.replace_html("cart",:partial => "cart", :object=>@cart) 
```

应该变成：

```
$("#cart").html("<%= j render(@cart) %>") 
```

# iphone - 在 iPhone 的 PickerView 外框上设置标签

> ID：10206235
> 
> 赞同：0
> 
> 时间：2012-04-18T09:08:36.560
> 
> 标签：iphone, ios, label, uipickerview

![在此处输入图像描述](../Images/47bc517865693624c8a385ac282dcab5.png)

我创建了一个水平选择器视图，其中一个标签位于组件内部。我已将数组传递给该标签，但现在我想要 2 个标签。两者都在组件之外，但它们在框架外调整灰色。如何在外框上设置标签。有人知道如何做到这一点。

谢谢。

我想要框架外视图上的选择器上的粗体字符标签

```
 **label** 

                   then component with array

                           **label** 
```

# google-maps-api-3 - 仅显示路径上的第一个和最后一个标记

> ID：10206241
> 
> 赞同：0
> 
> 时间：2012-04-18T09:08:49.277
> 
> 标签：google-maps-api-3

为了在谷歌地图上生成标记，我使用下面的代码调用函数 displayLocation：

```
for (var i=0; i<data.length; i++) {
     displayLocation(data[i]);
} 
```

在 displayLocation 上，我创建了一个数组，其中包含我要创建的路径和标记的所有位置，我只想显示路径上的第一个和最后一个标记。我的 displayLocation 函数如下所示：

```
function displayLocation(location){
                var latLng = new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud)); 
                if(location.nombreequipo=="AST1"){
                    var path =  new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud));
                    rutaAST1.push(path);
                }

                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    icon: imagen,
                    draggable: false,
                    visible: true,
                    title: location.nombreequipo
                });
                arrayMarcadores.push(marker);
                google.maps.event.addListener(marker, 'click', function(){
                    infowindow.setContent(content);
                    infowindow.open(map, marker);
                });
                return marker;
            } 
```

在我设置路径的这部分代码中，我调用：

```
varBool = true;
dibujaRutaAST1(map, rutaAST1, varBool); 
```

功能是：

```
var ruta = null;
function dibujaRutaAST1(mapa, rutaVar, varBool){
if(!ruta){
    var coordRuta = rutaVar;
    console.log("En función dibujo de rutas AST1: "+rutaVar);
    ruta= new google.maps.Polyline({
        map: mapa,
        path: coordRuta,
        geodesic: true,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 3
    });
    console.log(ruta);
}if(varBool){
    ruta.setMap(mapa);
}else{
    ruta.setMap(null);
}
} 
```

标记数组的迭代：

```
function mostrarMarcas(nombreEquipo){
                for(var i=0;i<arrayMarcadores.length;i++){
                    if(arrayMarcadores[i].title==nombreEquipo){
                        arrayMarcadores[i].setVisible(true);
                    }
                }
            } 
```

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:53:40.680

最后，我只使用所有点从我的数组中创建第一个和最后一个标记：

```
if(rutaAST1.length!=0){
    dibujaRutaAST1(map, rutaAST1, varBool);
    var imagen ='img/markers/blue_MarkerA.png';
    var markerIniAST1 = new google.maps.Marker({
        position: rutaAST1[0],
        map: map,
        icon: imagen,
        draggable: false,
        visible: true,
        title: "AST1"
    });
    google.maps.event.addListener(markerIniAST1, 'click', function(){
        infowindow.setContent(contentAST1[0]);
        infowindow.open(map, markerIniAST1);
    });
    var markerFinAST1 = new google.maps.Marker({
        position: rutaAST1[rutaAST1.length-1],
        map: map,
        icon: imagen,
        draggable: false,
        visible: true,
        title: "AST1"
    });
    google.maps.event.addListener(markerFinAST1, 'click', function(){
        infowindow.setContent(contentAST1[contentAST1.length-1]);
        infowindow.open(map, markerFinAST1);
    });
} 
```

非常感谢你用我的这部分代码帮助我理清思路:)

# ios - 从数据模型更新 NSManagedObject 类定义

> ID：10206244
> 
> 赞同：2
> 
> 时间：2012-04-18T09:08:54.130
> 
> 标签：ios, core-data, nsmanagedobject, xcdatamodel

对 CoreData 相当陌生（2 小时前开始使用它；））我一直想知道是否有更简单的方法来做事。

我目前正在使用 DataModel 来创建我的持久对象代码。

但是，当我不断调整属性数量、字段名称等内容时，这会导致更新我的 NSManagedObjects 的代码。

**我发现您可以使用已经实现的属性创建类，但是，除了手动添加或创建新对象并覆盖现有类之外**，我还没有弄清楚如何更新现有类的代码？（或其他开发人员是如何做到的）

我知道答案肯定是：“没有更好的方法”，但我还是要问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:12:50.960

查看[发电机](http://rentzsch.github.com/mogenerator/)。

此命令行实用程序将生成两个类文件。机器生成的`_MyClass`标头和实现，包含模型的所有代码。它还将创建一个子类`MyClass`，您可以在其中添加自己的自定义项。

每次重新生成代码时，只会`_MyClass`更新机器生成的文件。您对的所有更改都`MyClass`将被保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:12:24.027

如果不能使用 mogenerator，可以使用原生代码生成。确保每次都重新生成代码。但是，这将删除任何更改。

因此，您有两个非常可行的选择。

1.  在实体类上写一个类别。你可以用一个类别做任何你想做的事情。

2.  实体的子类，并将所有代码放在那里。

就个人而言，我更喜欢使用类别，除非我绝对必须继承......这是极其罕见的。

# linux - 来自非 root 用户的单位（用于命令启动/停止/启用/禁用）

> ID：10206246
> 
> 赞同：5
> 
> 时间：2012-04-18T09:08:58.397
> 
> 标签：linux, startup, fedora16, systemd

我想在启动时通过`systemd`（操作系统是 Fedora Core 16）从一些非 root 用户（例如`michael`）执行我的脚本。

我不需要 root 权限 - 我只想在启动时和关闭时运行我的一些单元在`systemd`. 而且我不想为此打开`root`用户。我只想使用`systemd`单元语法的力量来启动和监视我的进程（当然没有 root 访问权限）。可能吗？

我在文档中没有找到任何帮助。我只发现`systemd(1) -> DIRECTORIES -> "User unit directories"`：

```
$ pkg-config systemd --variable=systemduserunitdir
/usr/lib/systemd/user 
```

但是`/usr/lib/systemd/user`是：

> drwxr-xr-x。2根根

我无法想象如何以非 root 用户身份使用此目录...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:48:59.893

[这个 Arch Linux 文档可能会有所帮助。](https://wiki.archlinux.org/index.php/Systemd/User)

> systemd 为用户提供了运行 systemd 实例来管理他们的会话和服务的能力。这允许用户在用户运行 systemd 时启动、停止、启用和禁用在某些目录中找到的单元。这对于通常以 root 用户或特殊用户（例如 mpd）以外的用户身份运行的守护程序和其他服务来说很方便。

他们建议通过 xinit 启动系统 --user 实例，但我想无论用户是否登录，您都想启动用户服务。

我通常会通过在我的 crontab 中添加 @reboot 行来做到这一点。

[来自维基百科](https://en.wikipedia.org/wiki/Cron#cite_ref-debiancron_2-0)：

> 如果需要在特定用户下启动服务器或守护程序，并且该用户无权配置 init 来启动程序，@reboot 会很有用。

也许你可以通过@reboot 启动 systemd --user ！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-17T00:27:27.533

为“michael”创建一个用户 systemd 单元文件。

这是确保用户 systemd 进程将在启动时而不是在登录时启动的魔法：

```
loginctl enable-linger michael 
```

[完整的细节](https://wiki.archlinux.org/index.php/Systemd/User#Automatic_start-up_of_systemd_user_instances)

# ember.js - 避免命名空间冲突和初始化函数测试 Ember.js 的最佳实践

> ID：10206247
> 
> 赞同：2
> 
> 时间：2012-04-18T09:08:59.953
> 
> 标签：ember.js, jasmine

为了避免基于 ember 的应用程序的开发/生产环境和测试环境之间的名称冲突，最好的做法是什么。

通常，每个 Ember 应用程序都有一个命名空间：

```
window.MyApp = Em.Application.create(); 
```

在生产中，我通过重新定义 Em.Application 的 ready 属性来运行一些初始化函数

```
window.MyApp = Em.Application.create(

    ready: function() {
      // create some objects
    }
); 
```

但是，在我的测试环境中，我不想运行这些初始化函数，因为我自己创建了对象。使用 MyApp 的相同定义会导致冲突，因为我创建的对象在 DOM 中插入了相同的元素。那么，当我测试我的应用程序时，如何在没有 ready 函数的情况下使用相同的命名空间 MyApp 呢？我使用 jasmine 来测试应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:25:26.273

我保留了实例化我的控制器、创建和设置视图的胶水代码`Application#ready`。

以[pangratz/ember.js-dashboard](https://github.com/pangratz/ember.js-dashboard/tree/dev/app/lib)为例：`core.js`只保存`Namespace`定义，而`controllers.js`,`views.js`等等定义我的类。实例化控制器、创建视图和设置绑定的胶水代码在`main.js`. 然后`main.js`在`index.html`.

我使用[interline/ember-skeleton](https://github.com/interline/ember-skeleton)作为基本应用程序布局，它本身使用 QUnit 进行测试。但这也应该适用于 Jasmine。

# html - HTML 电子邮件 样式问题

> ID：10206252
> 
> 赞同：24
> 
> 时间：2012-04-18T09:09:12.327
> 
> 标签：html, email, outlook, styles

我有一个问题，电子邮件客户端将我的样式恢复为`<hr/>`只有一条实线的样式。

以下是我的标记，在 Chrome 和 IE 中看起来不错，但 Outlook 总是将虚线还原为实线。

```
<hr style="background:none; border:dotted 1px #999999; border-width:1px 0 0 0; height:0; width:100%; margin:0px 0px 0px 0px; padding-top:10px;padding-bottom:10px;" ></hr> 
```

我看过 Campaign Monitor 但没有什么特别的东西可以指导我。

所有答案表示赞赏。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-18T09:26:52.950

我想这是因为 Outlook 使用 Microsoft 文字渲染引擎，而不是 HTML 引擎，并且 hr 标记只会恢复为 msword 中的实线。

我可能会尝试使用全宽 table->cell 或 div 和样式，而不是使用 hr 标签。

```
<table>
<tr>
<td style="background:none; border:dotted 1px #999999; border-width:1px 0 0 0; height:1px; width:100%; margin:0px 0px 0px 0px; padding-top:10px;padding-bottom:10px;">&nbsp;</td>
</tr>
</table> 
```

**nbsp**在那里，以防渲染引擎无法识别空单元格。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-18T09:31:03.670

根据其他答案，我发现这个效果最好：

```
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td style="background:none; border-bottom: 1px solid #d7dfe3; height:1px; width:100%; margin:0px 0px 0px 0px;">&nbsp;</td>
  </tr>
</table>
<br>
```

如果可能，宽度似乎需要以`table`% 或最好（根据[https://www.campaignmonitor.com/resources/will-it-work/guidelines/](https://www.campaignmonitor.com/resources/will-it-work/guidelines/)）设置。`px``td`

`border-bottom`速记似乎工作正常，其中科林回答中提到的速记版本在 Outlook 中没有*。*

编辑：我发现以前使用过并且至少在 Outlook 中也有效（如果有能力的人可以在其他客户端测试它会很好），是一种`<hr>`基于方法。

```
<hr height="1" style="height:1px; border:0 none; color: #D7DFE3; background-color: #D7DFE3; margin-top:1.5em; margin-bottom:1.5em;"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T07:57:29.763

相当不雅，仅对已知的固定宽度有用，但我发现这些是您在尝试修复 html 电子邮件中的格式时遇到的恐惧。

```
<p style="line-height:20%; color:#cccccc; margin:0px 0px 0px 0px; padding:0px 0px 0px 0px;">........................................................................................................................................</p> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-14T05:03:17.620

您可以使用此示例：

```
<div style="border-top: 1px dotted #999999;">&nbsp;</div> 
```

不幸的是，它只能在白色背景下工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-16T16:18:25.113

需要声明一个字体大小，否则“”会与高度混淆。

```
 <tr><td style="background:none; border-bottom: 4px solid #DC1431; height:1px; width:100%; margin:0px 0px 0px 0px; font-size: 1px">&nbsp;</td></tr> 
```

# nginx - 每个服务器块中的 Nginx 配置文件

> ID：10206258
> 
> 赞同：1
> 
> 时间：2012-04-18T09:09:18.613
> 
> 标签：nginx

我用 php-fpm 设置了一个 nginx 服务器，想知道如何在我创建的每个新服务器中包含一个文件？EG：此代码位于 /etc/nginx 中名为“server_config.conf”的文件中：

```
location = /favicon.ico
{
    log_not_found off;
    access_log off;
}

location = /robots.txt
{
    log_not_found off;
    access_log off;
} 
```

每个服务器（vhost）都需要包含这个块，我这样做是这样的：

```
#domain-one.com
server
{
    include  /etc/nginx/server_config.conf;

    server_name  domain-one.com www.domain-one.com;
    root  /var/www/vhosts/domain-one.com/httpdocs;

    access_log  /var/www/vhosts/domain-one.com/logs/access.log;
    error_log  /var/www/vhosts/domain-one.com/logs/error.log;
}

# domain-two.com
server
{
    include  /etc/nginx/server_config.conf;

    ......
} 
```

是否可以自动获取每个服务器块中包含的“/etc/nginx/server_config.conf”文件，而无需放置“include /etc/nginx/server_config.conf;” 在每个服务器块手动？

谢谢

# javascript - 用折线点设置属性

> ID：10206259
> 
> 赞同：0
> 
> 时间：2012-04-18T09:09:19.823
> 
> 标签：javascript

我知道下面的代码将以这种特殊的方式设置，以说明矩形宽度的设置属性对于折线是否相同，或者您是否必须更改它？

```
function newer() {
        document.getElementById("rectangle").setAttribute('width',"70");
} 
```

它会喜欢折线的以下代码还是其他方式？

```
 function new() {
        document.getElementById("polyline1").setAttribute('points', "0,0 200,0 200,200 100,200 100,100 0,100 0,0" );

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:19:53.067

假设我们谈论的是 SVG 折线 (http://www.w3schools.com/svg/svg_polyline.asp)，那么 points 是一个属性，“0,0 200,0 200,200 100,200 100,100 0,100 0,0”是属性值.

所以是的。

# jquery - 我有 10 个 div（触发器）水平排列，当悬停在触发元素弹出窗口上但想留在弹出内容上时，我该怎么做？

> ID：10206263
> 
> 赞同：0
> 
> 时间：2012-04-18T09:09:47.513
> 
> 标签：jquery

```
 $(document).ready(function() {
        //If Javascript is running, change css on product-description to display:block
        //then hide the div, ready to animate
        $("div.pop-up").css({'display':'block','opacity':'0'})

        $("a.trigger").hover(
          function () {
            $(this).prev().stop().animate({
              opacity: 1
            }, 500);
          },
          function () {
            $(this).prev().stop().animate({
              opacity: 0
            }, 200);
          }
        )
      }); 
```

我有 10 个 div（触发器）水平排列，当悬停在触发元素弹出窗口上但想留在弹出内容上时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:35:29.657

去掉将不透明度设置为0的函数？

[http://jsfiddle.net/mynameisdonald/m2ku9/](http://jsfiddle.net/mynameisdonald/m2ku9/)

如果那是错误的，请尝试向我们展示您的 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:43:24.200

也许这就是你要找的东西？

```
$(document).ready(function() {
        $(".pop-up").css({'display':'block','opacity':'0'})

        var timer;
        $(".trigger, .pop-up").on({
            mouseenter : function () {
              clearTimeout(timer);
              $(this).prev().stop().animate({
                 opacity: 1
              }, 500);
            },
            mouseleave: function () {
                var self = this;
                timer = setTimeout(function() {removeHover(self);}, 20);
            }
         });

         function removeHover(elm) {
             var element = $(elm).is('.pop-up') ? $(elm) : $(elm).prev();
             element.stop().animate({
                 opacity: 0
              }, 200);
         }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/shszE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:59:38.667

这里有点不同的解决方案[http://jsfiddle.net/9DD3v/](http://jsfiddle.net/9DD3v/)

您可以通过链接的父级触发事件，例如`li`

html

```
<ul>
<li>
    <a href="#" class="trigger">Show</a>
    <div class="profile">

    <div class="pop-up">
 <div style="margin-top:7px;position:absoult;left:0" ><font color=#f6f907 size=+1><b>Ii</b></font></div>nt.<br>Email :&nbsp;&nbsp;<a href=mailto:d@nt.com>d@nt.com </a> <br>
Website :&nbsp;&nbsp;<a href=http://www.nt.com>www.nt.com</a>
</div>
</li>
        <li>
    <a href="#" class="trigger">Show</a>
    <div class="profile">

    <div class="pop-up">
 <div style="margin-top:7px;position:absoult;left:0" ><font color=#f6f907 size=+1><b>Ii</b></font></div>nt.<br>Email :&nbsp;&nbsp;<a href=mailto:d@nt.com>d@nt.com </a> <br>
Website :&nbsp;&nbsp;<a href=http://www.nt.com>www.nt.com</a>
</div>
</li>
            </ul> 
```

* * *

css

```
ul li {display:relative;float:left;margin-left:10px;}
div.profile{

    display: none;
    text-align: left;
    position: absolute;
    z-index:9999;
    margin-top: ;
    margin-left: ;
    width: 300px;
    height: 100px;
    padding: 0px 10px;
    overflow:hidden;
    background:#222222 no-repeat; 
    color: #ffffff;
    border: 1px solid #1a1a1a;
    font-size: 90%;
    border:none;
} 
```

* * *

js

```
$(function(){
    $("li").hover(function(){
          $(this).children("div").stop().show(500);        
    },function(){
          $(this).children("div").stop().hide(500);            
    })
}); 
```

# unix - 禁用某些文件夹中的某些命令/程序？

> ID：10206265
> 
> 赞同：1
> 
> 时间：2012-04-18T09:09:55.290
> 
> 标签：unix

在某个文件夹中是否有拒绝访问某些命令和可执行文件的权限？

具体来说，我试图在某些文件夹中拒绝 pwd 的访问，以便通过符号链接访问文件夹的用户无法看到他们在文件层次结构中的位置（为了防止一些安全问题），但能够使用保留在其他地方使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:01:31.157

您可以将 pwd 移动到另一个目录并制作一个名为 pwd 的脚本，如下所示：
假设真实 pwd 的新位置是 /path/to/movedpwd：

`#!/bin/sh
if test /path/to/movedpwd = UNWANTED_DIR
then echo "Forbidden dir!"
else pwd fi`
然后让它只可执行，这样用户就找不到真正的密码。

# c# - 如何退出 Windows 窗体/C# 程序

> ID：10206271
> 
> 赞同：0
> 
> 时间：2012-04-18T09:10:24.503
> 
> 标签：c#, winforms, exit

A 类有一个 Form1（System.Windows.Forms.Form 的子类）成员。

```
class A {
        Form1 form;
        public A()
        {
            form = new Form1();
            form.Show();
        }
    }
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        A a = new A();
        Application.Run();
    } 
```

问题是我不知道如何退出程序。我在处理`Form.Closed`事件或调用 A.Dispose() 时尝试过 Application.Exit()，但 Windows 任务管理器仍然列出了我的程序的进程。

我如何完成这个程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:16:34.960

[Application.Run 有 3 个重载](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.run.aspx)。您正在使用[这个](http://msdn.microsoft.com/en-us/library/ms157900.aspx)没有参数。

Windows 在[消息循环](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)中运行您的程序，**但它并不关心您的表单。**
因此，如果您关闭表单，那也没关系；该程序仍将运行。

第二个重载是每个人都使用的[Application.Run(Form)](http://msdn.microsoft.com/en-us/library/ms157902.aspx)。这会在您的表单上运行一个 Windows 消息循环，因此当您单击窗口上的关闭时，应用程序将关闭。

您的代码应该是：

```
class A {
    Form1 form;
    public A()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        form = new Form1();
        form.Show();
        Application.Run(form);
    }
}
[STAThread]
static void Main()
{
    A a = new A();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:14:24.767

跟随[微软](http://msdn.microsoft.com/en-us/library/ms157902.aspx)你应该使用这个：

```
Application.Run(a.Form); 
```

因为[MSDN](http://msdn.microsoft.com/en-us/library/ms157900.aspx)声明

> 大多数 Windows 窗体开发人员将不需要使用此版本的方法。您应该使用 Run(Form) 重载来启动具有主窗体的应用程序，以便应用程序在主窗体关闭时终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:14:36.603

我认为你有一个混淆。检查[Application.Exit](http://msdn.microsoft.com/en-us/library/ms157894.aspx)的文档。

在那里，您将看到 Exit 将为您引发 Closed 事件，并且在那里调用 Exit 可能会导致无限循环（这可能会导致您的问题，即应用程序仍然可见）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:14:23.437

试试这个：

```
Environment.Exit(1); 
```

# grails - Grails 表单提交而不更改视图

> ID：10206272
> 
> 赞同：1
> 
> 时间：2012-04-18T09:10:32.417
> 
> 标签：grails, form-submit, gsp

我想从我的 GSP 调用一个操作（它会进行一些过滤和发送邮件），但我想继续使用该 GSP。如何实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:16:29.103

您必须使用 Ajax 来提交表单。

使用[formRemote](http://grails.org/doc/latest/ref/Tags/formRemote.html)标记来实现 Ajax 提交。

`onSubmit`或者，您可以通过连接到您的表单事件来自行构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:20:51.193

如果您想使用表单执行此操作，可以查看“submitToRemote”标签：[submitToRemote](http://grails.org/doc/latest/ref/Tags/submitToRemote.html)

但是如果你想用超链接来做......看看'remoteLink'标签：[remoteLink](http://grails.org/doc/latest/ref/Tags/remoteLink.html)

# excel - Excel中的依赖和多个下拉列表

> ID：10206273
> 
> 赞同：0
> 
> 时间：2012-04-18T09:10:33.073
> 
> 标签：excel, excel-formula

我正在尝试在 Excel 中创建依赖下拉列表。

我有 4 列。公司、年龄组、成员和区域。

当我选择公司名称 1 时，我应该得到与该公司相关的一组详细信息。我使用了 INDIRECR 和 SUBSTITUTE，它适用于第一两列。

没有宏我可以这样做吗？

我有一个 Table1 - 公司

```
Company 1
Company 2
Company 3 
```

对于每家公司，我都有一组数据表，例如

```
Age      Members          Area 
```

我拿了两张工作表。

在 Sheet1 中，我拥有来自所有公司的所有数据，并且我已经为公司和其他列创建了定义名称。

在 Sheet2 中，我正在创建下拉列表。

在单元格 A2 中，我在源区域中将公司列表创建为 = 公司（因为我在定义名称范围时给出了相同的名称）

对于 2nd 和 Dependent Dropdown(Age)，我使用了 =INDIRECT(SUBSTITUTE(A2," ", "")) 并且它有效。

但是对于在公司名称更改时也应该更改的第三个下拉菜单，并没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:37:22.577

让我们假设有一家公司：`Microsoft`. 您当前有一个命名范围 ( `Microsoft`)，其中包含年龄组列表；让我们假设它们`Under 18`是`18 to 40`和`Over 40`。对于每个年龄组，都有一个成员列表。

您需要为每个成员列表提供一个源自公司名称和年龄组的名称；例如`MicrosoftUnder18`会有`Alice`,`Bob`和`Charlie`; `Microsoft18to40`将有`Dave`, `Edgar`,`Fran`并且`MicrosoftOver40`将有`Gertrude`和`Hilary`.

假设下拉菜单 1 在`A1`，下拉菜单 2 在`A2`，下拉菜单 3 在`A3`，你会希望你的下拉菜单的来源`A3`是：

```
=INDIRECT(SUBSTITUTE(A1&A2," ","")) 
```

您需要根据需要对尽可能多的下拉菜单重复此操作。

如果您的数据可能经常更改，则将数据转换为常规格式可能会更容易。如果您只是想查看列表，则可以使用没有任何数据的数据透视表（只需将过滤字段放在`Page`部分中，将人员放在`Row`部分中）；如果您正在做更复杂的事情，VBA 例程可以帮助您。维护大量命名范围是灾难的根源。

# c# - 如何使用 Unity 3.5x 为 Android 中的多种屏幕调整屏幕？

> ID：10206278
> 
> 赞同：0
> 
> 时间：2012-04-18T09:11:15.623
> 
> 标签：c#, android, unity3d, screen-resolution

我有一个项目，我想为 Android 构建它。我想知道，如何调整屏幕，让我在多种安卓手机上都能正常播放？（因为 Android 有很多类型的屏幕）。我已经尝试了很多方法，包括在这个线程中的一个：http: [//answers.unity3d.com/questions/161281/is-there-a-way-to-android-physical-screen-size.html](http://answers.unity3d.com/questions/161281/is-there-a-way-to-android-physical-screen-size.html)，并使用 Screen.height 和 Screen.widht，但我做不到。顺便说一句，我正在使用 C#。有没有人有一些解决方案？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:32:41.410

屏幕的大小并不重要，因为统一会为您完成工作。唯一的问题是屏幕的比例。

您需要在 16/9 屏幕和 16/10 屏幕上测试您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:12:12.380

我已经解决了这个问题，创建了一个新类并缩放了我放置背景的面板（因此每个游戏对象也将缩放）。

# java - SWT 文本字段设置和 RCP 命令绑定到键

> ID：10206279
> 
> 赞同：4
> 
> 时间：2012-04-18T09:11:18.637
> 
> 标签：java, swt, eclipse-rcp, jface

我有 RCP 应用程序，并且我有一个命令，它启动某个实体的向导（编辑向导，显示实体的所有字段，用户可以更改它并完成向导以保存该实体）。我正在使用 JFace 数据绑定将实体的字段绑定到 swt Texts 和 Combos。

该命令具有处理程序（包含向导调用），并且该处理程序绑定到某个按钮并且一切正常。

然后我需要将此命令绑定到某个组合键（例如 Ctrl+E）。我正在使用 org.eclipse.ui.bindings 扩展：

```
<key
commandId="com.project.command"
contextId="com.project.view.context"
schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
sequence="M1+E">
</key> 
```

“com.project.view.context”是我制作的，用于在 2 个不同的视图中绑定到相同的组合键，看起来还可以（并在这 2 个视图中激活不同的命令）。

但是当我通过这个组合键打开我的向导时，出现了一个问题：

SWT 文本字段不绑定到实体的整数字段。使用 String 字段一切正常，并且它们绑定得很好。但是整数字段没有（里面只有空白）。

我试过的：

1.  我调试了我的向导和向导页面，并且所有时间实体状态都很好（它们的整数字段是正确的，而不是 0 或 null）

2.  试图为 JFace 绑定编写整数到字符串转换器。没有帮助。

3.  我尝试禁用此字段的 JFace 绑定，并手动设置文本字段值：

    ```
    swtTextField.setText(entity.getIntegerField().toString()); 
    ```

    但这也没有用！看起来不是 JFace 绑定问题，而是 SWT 文本问题？调试这种情况：

    entity.getIntegerField().toString() = "1234" 在 "setText" 之前和之后 swtTextField.getText = "" 在 "setText" 之前和之后

    （当我不是从组合键命令调用中运行此调试时，一切看起来都很好，并且在“setText”之后 swtTextField.getText =“1234”）

4.  试图将绑定扩展的上下文更改为默认值（“org.eclipse.ui.contexts.window”），但这也没有帮助。

所以，总而言之，当我通过按钮（或上下文菜单）调用我的命令时，一切正常。但是当我通过键组合绑定扩展调用我的命令时，整数->文本字段（字符串字段工作正常）存在问题。

有什么想法吗？

补充：我发现问题出在组合键上。当组合键包含非英语键符号（Ctrl+non-english-key 我的语言键符号，导致我们的应用程序使用非英语键组合）时，就会出现问题：SWT 文本不接受整数值。当组合键为英语时（Ctrl+english-key）- 一切正常。

所有其他命令（没有 SWT 文本字段）也可以正常工作，并且它们也绑定到 Ctrl+非英语键组合......

这很奇怪，我还是不明白，为什么那汉内普......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:18:30.473

几个月前我遇到了这个问题。问题出在 JFace 数据绑定上。有什么帮助：

*   用于`org.eclipse.core.databinding.observable.value.IObservableValue`观察您的`Text`. 所以你可以这样写代码：`IObservableValue yourTextObserveTextObserveWidget = SWTObservables.observeText(yourText, SWT.Modify);`
*   用于`org.eclipse.core.databinding.beans.BeansObservables`观察实体的值，以便您可以编写如下代码：`BeansObservables.observeValue(yourModel, "yourInt");`
*   像这样使用 `org.eclipse.core.databinding.DataBindingContext`和绑定你的`IObservableValue`：`bindingContext.bindValue(yourTextObserveTextObserveWidget, yourModelTemplateObserveValue, null, null)`

因此，将模型绑定到 a 的最终代码`Text`将如下所示：

```
DataBindingContext bindingContext = new DataBindingContext();
IObservableValue yourTextObserveTextObserveWidget = SWTObservables.observeText(yourText, SWT.Modify);
IObservableValue yourModelTemplateObserveValue = BeansObservables.observeValue(yourModel, "yourInt");
bindingContext.bindValue(yourTextObserveWidget, yourModelTemplateObserveValue, null, null); 
```

如果您有任何其他问题，请查看数据绑定的文档。这在我的程序中使用`String`,`boolean`和`Integer`类型。我还没有测试过其他任何东西。

# facebook-c#-sdk - 'bool' 不包含 Facebook c# SDK 上的 'id' 错误的定义

> ID：10206285
> 
> 赞同：0
> 
> 时间：2012-04-18T09:11:49.483
> 
> 标签：facebook-c#-sdk

我正在为我的画布应用程序使用 facebook c# SDK（我认为是 v4）。

在过去的 2 天里，我在尝试访问我的 facebook 画布应用程序时遇到了这种错误。

此错误不是永久性的，仅对某些用户出现。

这是日志：

消息：**“bool”不包含“id”的定义**

来源：匿名托管的 DynamicMethods 程序集

查询字符串：fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=3_0

FORM: signed_request=PiF_P1VgfghdfWryycfyS-OFaZOTsNB_rP7up2OsTQ.eyJhbGdvcml0aG0ifhfhfghjhgNiIsImV4cGlyZXMiOjEzMzQ3NDMyMDAsImlzc3VlZF9hdCI6MTMzNDczOTM5NSwib2F1dGhfdG9rZW4iOiJBQUFDUDZGertyertyING9aQ0YyQWNhNEVaQUtLMVZkVGIzOWVNTTZaQkFaQmJ2Q3oyMVMwNXFmV0R6SmlkQjNsRXgwWkFjMHpKUDJ6QlZoWTZ4am1RNUlpSUFmbzZNQnlXN3kxQnVhhpNRVBiV4ggY7IiwidXNlciI6eyJjbdghdfghdfaWwiLCJsb2NhbGUiOiJoZV9JTCIsImFnZSI6eyJtaW4iOjIxfX0sInVzZXJfaWQiOiIxMyumhjmhgjMzQzNjI3ODYifQ

目标：System.Object CallSite.Target（System.Runtime.CompilerServices.Closure，System.Runtime.CompilerServices.CallSite，System.Object）

STACKTRACE：在 CallSite.Target(Closure , CallSite , Object ) 在 System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,Tret](CallSite site, T0 arg0) 在 CallSite.Target(Closure , CallSite , Object ) 在 en_bubbles_Default.ShowFacebookContent()在 c:\hshome\Default.aspx.cs:line 93 at en_bubbles_Default.Page_Load(Object sender, EventArgs e) in c:\hshome\Default.aspx.cs:line 29

这是代码： var fb = new FacebookWebClient(); var app = new FacebookOAuthClient(FacebookApplication.Current);

```
dynamic ac = app.GetApplicationAccessToken();

string accessToken = fb.AccessToken.ToString();

dynamic myInfo = fb.Get("me");

Session["fbid"] = myInfo["id"]; 
```

错误在最后一行

有人可以告诉我发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:59:56.677

对 Get("me") 的调用没有返回具有属性“id”的预期对象，而 myInfo 动态对象只是一个布尔类型。而 bool 只能是真或假。您是否确定在什么情况下会看到这种情况。我怀疑这将是间歇性的。也许您应该只检查 myInfo 是否为 bool 并中止或重试该操作（如果是）。

# jquery - 如果用户未将 div 悬停 5 秒，jQuery 将执行操作

> ID：10206287
> 
> 赞同：0
> 
> 时间：2012-04-18T09:11:50.637
> 
> 标签：jquery, slider

我正在尝试制作图像滑块。现在，我得到了滑块的基本部分——唯一的事情是滑块每 5 秒自动显示一张新图片（已经构建）但是一旦用户悬停滑块菜单，5 秒计时器就不会停止.

这是我的滑块代码；

```
var index = $(this).parent("li").index();

        var item_y = $(this).parent("li").offset().top;
        var item_x = $(this).parent("li").offset().left;

        $("#slider li a").each(function(){
            $(this).removeClass("active");
            Cufon.refresh();
        });

        $(this).addClass("active");

        $("#slider_arrow").css({
            'top' : item_y,
            'left' : item_x-109
        });

        $("#slider_image li").hide().each(function(i,v){
            if (i == index) {
                $(this).fadeIn("medium");
            }
        });

        Cufon.refresh(); 
```

这实际上是 - 悬停 - 动作。以下是每 5 秒发生一次的操作的代码。

```
setInterval(function(){

        var current_index = $("#slider li a.active").parent("li").index();

        var new_index = $("#slider li").eq((current_index+1));

        if (new_index.length > 0)
        {
            new_index.children("a").mouseover();
        }
        else
        {
            $("#slider li:first-child").children("a").mouseover();
        }

    }, 5000); 
```

所以我想要的是一旦用户从`#slider li`菜单中触摸一个项目就重置 5 秒的间隔。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:01:37.913

查看此答案以了解如何创建可[暂停的 javascript timeout](https://stackoverflow.com/questions/3969475/javascript-pause-settimeout/10200261#answer-3969760)。

它应该运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:14:55.077

您必须存储间隔句柄，以便`clearInterval()`在需要时调用。

```
var myinterval = setInterval(
    ....
, 5000);

$('#slider li').mouseenter(function() {
    if(myinterval) clearInterval(myInterval);
}; 
```

# php - 从代码中读取字段，处理数据，将值保存到行中的新字段

> ID：10206288
> 
> 赞同：0
> 
> 时间：2012-04-18T09:11:56.343
> 
> 标签：php, mysql

所以这就是我正在做的事情。

1.  在 for 循环中读取一行。（因为我是在共享主机中，所以一下子会占用一些资源。） 2.将正确的字段数据获取到变量中。3.根据提取的字段操作req数据。4.更新字段=提取数据的新字段。

另外一点，我正在将当前位置添加到文件中，以便脚本下次运行时可以从那里继续。

问题：它似乎不起作用。counter.txt 的值类似于 3-4，但它只是驻留在那里。我的数据库有 1000k 行。

我的代码：

```
require ("dbconnect.php");
header("refresh:29;url=process.php"); // so it doesnt ever end. I cant use max_execution_time here for some reason.
$count = mysql_query("SELECT COUNT(*) FROM collection ");
$data = mysql_fetch_array($count);
$count = $data[0];
echo $count;

$countfile = fopen("counter.txt", "r");
$counter = fgets($countfile);
echo fgets($countfile);

while (fgets($countfile) <= $count)
 {
$i = fgets($countfile);
$takeword = mysql_query("SELECT word FROM collection WHERE id='$i'") or die();
$wd = mysql_fetch_array($takeword);
$data = $wd[0];

$d1 = hash($algorith='md2',$data);
$d2 = hash($algorith='md4',$data);

$write = mysql_query("UPDATE collection SET md2='$d1', md4='$d2' WHERE id='$i'") or die(mysql_error());

//opens, empties and write the new pointer to the file. closes, and open the file in readmode for the next read at the loop.
$counts = fopen("counter.txt", "w+");
fwrite($counts, $counter + 1);
fclose($counts);
$countfile = fopen("counter.txt", "r");
} 
```

任何帮助将不胜感激:) 寻找代码优化并消除错误。建议会做。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:12:15.540

好吧，我会做这样的事情（抱歉延迟回复，我一直忘记）

```
<?php
    //main execution
    $sql = mysql_connect(...);
    if (!$sql)
        die ("No database connection");

    if (!mysql_select_db(..., $sql))
        die ("Database does not exist in this schema");

    //Run the query for this iteration.
    processQuery();
    //---

    function getQueryOffset($file)
    {
        $offset = 0; //default offset
        if (file_exists($file)) //check if the counter file exists
        {
            $contents = file_get_contents($file); //get the contents of the counter
            if ($contents !== FALSE && is_numeric($contents)) //check if an appropriate counter value
                $offset = intval($contents);
        }
        return $offset;
    }

    function processQuery()
    {
        $table = "collection"; //table to update
        $counter = "counter.txt"; //where to look for the last execution's offset.
        $maxrows = 10000; //update 10,000 rows each time this file is loaded.
        $sql = $GLOBALS['sql'];

        //calculate the number of rows in the table
        $qCount = mysql_query("SELECT COUNT(*) max FROM $table", $sql);
        $aCount = mysql_fetch_assoc($qCount);
        mysql_free_result($qCount);
        $max = $aCount["max"];

        $offset = getQueryOffset($counter); //calculate the offset (or a default 0)
        if ($offset < $max) //if offet >= max, we're done.
        {
            $qUpdate = mysql_query("SELECT word, id FROM $table LIMIT $offset, $maxrows", $sql); //get the next "maxrows" rows from the table.
            if ($qUpdate) 
            {
                $assoc = NULL;
                while (($assoc = mysql_fetch_assoc($qUpdate)) != NULL)
                {
                    $md4 = hash("md4", $assoc["word"]); //calculate the hashes
                    $md2 = hash("md2", $assoc["word"]); 
                    $id = $assoc["id"]; //id the row
                    mysql_query("UPDATE $table SET md2='$md2', md4='$md4' WHERE id=$id", $sql); //update the table columns
                }
                //update the offset in the counter file.
                file_put_contents($counter, ($offset + mysql_num_rows($qUpdate)));
                mysql_free_result($qUpdate);
            }
        }
    }

    mysql_close($sql);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T09:29:36.880

我在这里看到的 1 个问题：

检查您的更新查询 - 这似乎是错误的。据我说，它应该是“SET md2='$d1' AND md4='$d2'”

另一个我不确定的问题：

我不确定 md2 和 md4 是否是哈希算法的有效名称

这样做的更好方法： 1\. 不要写入文件！2\. 在 SQL 中创建一个名为“status”的附加列，默认值为 0。更新时，将该值更改为 1。3\. 根据查询“SELECT word FROM collection WHERE status=0 limit”搜索要编辑的行0,1" 4\. 或者如果原始表中的 md2 和 md4 列为空，查询也可以是 "SELECT word FROM collection WHERE md2='' and md4='' limit 0,1"

希望这可以帮助。

# c# - 已添加具有相同密钥的项目 - 仅处于发布模式

> ID：10206289
> 
> 赞同：2
> 
> 时间：2012-04-18T09:11:57.577
> 
> 标签：c#, .net, entity-framework, release

专家们，

在运行时第一次使用实体框架函数时，我得到了这个**System.ArgumentException**（*已经添加了具有相同键的项目）。*奇怪的是：如果我使用调试模式，它工作正常。**在编译相同的代码后，在发布模式**中没有任何更改，它立即崩溃，并在本文顶部提到异常。

有谁知道更多关于这种奇怪行为的信息？我该如何解决？我无法向我的客户推出调试版本:(

此时抛出异常：

```
try
{
  var blub = context.ExecuteStoreQuery<int>(QueryString);
}
catch (Exception ex)
{
  // ...
} 
```

堆栈跟踪：

```
System.ArgumentException: An item with the same key has already been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boo
lean add)
   at System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadRelationshi
pTypes()
   at System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadTypesFromAs
sembly()
   at System.Data.Metadata.Edm.ObjectItemAssemblyLoader.Load()
   at System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.Load()
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boo
lean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData)
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boo
lean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData)
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boo
lean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData)
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boo
lean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData)
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boo
lean loadReferencedAssemblies, KnownAssembliesSet knownAssemblies, EdmItemCollec
tion edmItemCollection, Action`1 logLoadMessage, Object& loaderCookie, Dictionar
y`2& typesInLoading, List`1& errors)
   at System.Data.Metadata.Edm.ObjectItemCollection.LoadAssemblyFromCache(Object
ItemCollection objectItemCollection, Assembly assembly, Boolean loadReferencedAs
semblies, EdmItemCollection edmItemCollection, Action`1 logLoadMessage)
   at System.Data.Metadata.Edm.MetadataWorkspace.ImplicitLoadAssemblyForType(Typ
e type, Assembly callingAssembly)
   at System.Data.Objects.ObjectContext.ExecuteStoreQueryInternal[TElement](Stri
ng commandText, String entitySetName, MergeOption mergeOption, Object[] paramete
rs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:06:37.790

首先，确保即使您进行了**干净的发布构建**（我的意思是在运行构建之前没有二进制文件，仅源代码），您也会收到错误。如果您不这样做，则修复您的项目设置（例如，隔离调试和发布构建目标文件夹）。

如果错误只发生一次，然后应用程序正常工作，则您必须遇到一些同步问题。虽然这很奇怪，因为元数据加载似乎是同步的。但无论如何，EF 对象都不是线程安全的。不要在跨线程场景中使用它们。

如果上面说的没有帮助，那么也许我的研究结果会对你有所帮助。这是与错误相关的 EF 源代码的摘录：

```
//---------------------------------------------------------------------- 
// <copyright file="ObjectItemAttributeAssemblyLoader.cs" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
// 
// @owner       [....]
// @backupOwner [....] 
//--------------------------------------------------------------------- 

using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Objects.DataClasses;
using System.Diagnostics; 
using System.Reflection;

namespace System.Data.Metadata.Edm 
{
  /// <summary> 
  /// Class for representing a collection of items for the object layer.
  /// Most of the implemetation for actual maintainance of the collection is
  /// done by ItemCollection
  /// </summary> 
  internal sealed class ObjectItemAttributeAssemblyLoader :
      ObjectItemAssemblyLoader
  { 
    // ...

    /// <summary>
    /// This method loads all the relationship type that this entity takes part in
    /// </summary> 
    /// <param name="entityType"></param>
    /// <param name="context"></param> 
    private void LoadRelationshipTypes() 
    {
      foreach (EdmRelationshipAttribute roleAttribute in
               SourceAssembly.GetCustomAttributes(typeof(EdmRelationshipAttribute), false /*inherit*/)) 
      {
        // Check if there is an entry already with this name
        if (TryFindNullParametersInRelationshipAttribute(roleAttribute))
        { 
          // don't give more errors for these same bad parameters
          continue; 
        } 

        bool errorEncountered = false; 

        // return error if the role names are the same
        if (roleAttribute.Role1Name == roleAttribute.Role2Name)
        { 
          SessionData.EdmItemErrors.Add(new EdmItemError(
              System.Data.Entity.Strings.SameRoleNameOnRelationshipAttribute(roleAttribute.RelationshipName, roleAttribute.Role2Name),
                       null)); 
          errorEncountered = true; 
        }

        if (!errorEncountered)
        {
          AssociationType associationType = new AssociationType(
            roleAttribute.RelationshipName, roleAttribute.RelationshipNamespaceName,
            roleAttribute.IsForeignKey, DataSpace.OSpace); 
          SessionData.TypesInLoading.Add(associationType.FullName, associationType);
          TrackClosure(roleAttribute.Role1Type); 
          TrackClosure(roleAttribute.Role2Type); 

          // prevent lifting of loop vars 
          string r1Name = roleAttribute.Role1Name;
          Type r1Type = roleAttribute.Role1Type;
          RelationshipMultiplicity r1Multiplicity = roleAttribute.Role1Multiplicity;
          AddTypeResolver(() => 
            ResolveAssociationEnd(associationType, r1Name, r1Type, r1Multiplicity));

          // prevent lifting of loop vars 
          string r2Name = roleAttribute.Role2Name;
          Type r2Type = roleAttribute.Role2Type; 
          RelationshipMultiplicity r2Multiplicity = roleAttribute.Role2Multiplicity;
          AddTypeResolver(() =>
            ResolveAssociationEnd(associationType, r2Name, r2Type, r2Multiplicity));

          // get assembly entry and add association type to the list of types in the assembly
          Debug.Assert(!CacheEntry.ContainsType(associationType.FullName), "Relationship type must not be present in the list of types"); 
          CacheEntry.TypesInAssembly.Add(associationType); 
        }
      } 
    }

    // ...
  }
} 
```

该方法中使用的唯一字典是`SessionData.TypesInLoading`. 关键是`RelationshipName`和的组合`RelationshipNamespaceName`。有趣的是，评论说他们检查重复的键，但该方法`TryFindNullParametersInRelationshipAttribute`只检查属性的属性不是`null`s。我想这是一个错误。

但更重要的是，必须发生所描述的错误，因为在您的程序集中的某个地方，您有多个`EdmRelationshipAttribute`具有相同组合的`RelationshipName`和`RelationshipNamespaceName`属性。可能有多种原因：

1.  EDMX 文件不正确。
2.  不当复制的程序集，
3.  发布配置，将其构建结果输出到与调试配置相同的文件夹，
4.  手动生成 EF 映射程序集的错误，
5.  等等

不幸的是，要找出破裂关系的名字将非常困难。您可能必须`System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadRelationshipTypes()`在反汇编中设置断点并跟踪它。我会说这几乎是不可能的，因为该`Dictionary.Insert`方法将被**多次**调用。

如果所有这些仍然不能提出解决方案，那么您确实需要为您的问题准备一份副本并将其发布在此处。否则没有人能帮上忙。

# wordpress - 如何为 Wordpress 自定义帖子类型设置简单的用户角色

> ID：10206293
> 
> 赞同：7
> 
> 时间：2012-04-18T09:12:09.273
> 
> 标签：wordpress

我正在使用 Wordpress 为临时工/兼职人员开发一个系统。为此，我正在制作一个新的自定义帖子类型 EMPLOYEE，我需要 2 个相应的用户 AGENT 和 CUSTOMER ：

*   AGENT 用户可以*创建*和*编辑*他自己的 EMPLOYEE(s)，但不能编辑其他 AGENT(s) 的 EMPLOYEE(s)。
*   所有代理商、客户和公众都可以*查看*和*评论EMPLOYEE 帖子，*
*   这也意味着 CUSTOMER 用户只能*查看*所有 EMPLOYEE 帖子。
*   CUSTOMER 用户需要与普通大众区分开来，因为一旦他们雇用了 EMPLOYEE，系统需要将他们与 EMPLOYEE 关联起来，因此 CUSTOMER 需要成为登录用户。
*   最后，AGENT 和 CUSTOMER 用户都可以*创建/编辑*他们自己的 vanilla Wordpress 用户配置文件，并使用他们的用户名/密码组合登录。

我该如何执行这个安排？关于用户和功能的在线文档让我抓狂地绕圈子跑。到目前为止，这是我的自定义帖子类型注册，我目前正在为该帖子类型的其他信息设置元框：

```
register_post_type( 'employee',
    array(
        'labels' => array(
            'name' => __('Employees','tdom'),
            'singular_name' => __('Employee','tdom'),
            'add_new' => __( 'Add New' ),
            'add_new_item' => __( 'Add New Employee' ),
            'edit' => __( 'Edit' ),
            'edit_item' => __( 'Edit Employee' ),
            'new_item' => __( 'New Employee' ),
            'view' => __( 'View Employee' ),
            'view_item' => __( 'View Employee' ),
            'search_items' => __( 'Search Employees' ),
            'not_found' => __( 'No Employees found' ),
            'not_found_in_trash' => __( 'No Employees found in Trash' ),
            'parent' => __( 'Parent Employee' )
        ),
        'public' => true,
        'show_ui' => true,
        'query_var' => true,
        'menu_icon' => get_stylesheet_directory_uri() . '/images/emp_icon.png',
        'menu_position' => 4,
        'capability_type' => 'post',
        'hierarchical' => false,
        'rewrite' => true,
        'supports' => array('title', 'thumbnail', 'author')
    )
); 
```

我遇到过 Justin Tadlock 的[Members](http://wordpress.org/extend/plugins/members/)插件（在 Google 和论坛上非常流行），但我希望我的要求足够简单，不再使用插件。我的头也有点太多了。

帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:26:52.323

这真的不应该是非常困难的。

第一步是通过*传递*`'capability_type'`给[`register_post_type()`](http://codex.wordpress.org/Function_Reference/register_post_type). 您使用的是默认值，即：

```
'capability_type' => 'post', 
```

将其设置为其他值，也许`'employee'`，并且根据 Codex，也设置`'map_meta_cap'`为`true`：

```
'capability_type' => 'employee',
'map_meta_cap'    => true, 
```

下一步是通过`$capabilities`传递给您的调用的参数向您的自定义用户添加相关功能[`add_role()`](http://codex.wordpress.org/Function_Reference/add_role)。对于“员工”用户角色，您需要添加`edit_employee`et al（edit_、delete_ 等），对于“代理”用户角色，您需要包括`edit_employee`et al 和`edit_others_employee`et al。

# android - 在 android 上为输入类型电子邮件启用电子邮件键盘

> ID：10206295
> 
> 赞同：18
> 
> 时间：2012-04-18T09:12:11.803
> 
> 标签：android, html, email, input, android-webview

我正在使用`WebView`. 我使用`WebView`来显示包含输入字段的 HTML 页面。如果 HTML 输入字段希望用户输入电子邮件地址，那么我想启用电子邮件友好的键盘布局。是否可以设置 HTML 或`WebView`在 Android 上显示电子邮件友好型键盘，就像在 iPhone 上一样？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-18T09:16:13.307

你只会放

```
android:inputType="textEmailAddress" 
```

在您的编辑文本框中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T09:13:34.437

是的，这是可能的

在您的 Edittext xml 中只需添加属性

```
android:inputType="textEmailAddress" 
```

看到这个更多

[EditText、inputType 值 (xml)](https://stackoverflow.com/questions/2712761/edittext-inputtype-values-xml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-13T23:10:23.447

只需为您的 EditText 或 TextInputEditTex 或任何可编辑字段添加它。

```
 this.inputType = (InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS ) 
```

**注意：** 如果当您尝试指定输入类型并且放在一个“onFocusListener”中不起作用时，我遇到了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T14:29:56.033

您可以使用 HTML5 输入类型`email`，在最近的 Android 版本中，它提供了一个带有附加`@`和`.`键的 qwerty 键盘。

```
<input type="email" name="myinput" /> 
```

这似乎不适用于姜饼。

# jquery - jQuery 多选择器顺序

> ID：10206298
> 
> 赞同：4
> 
> 时间：2012-04-18T09:12:23.113
> 
> 标签：jquery, selector, coalesce

我想选择多个按钮并按顺序单击第一个。类似`COALESCE`功能的东西。

我试过这个：

```
$(".selector1, .selector2, .selector3").first().click(); 
```

这可行，但选择遵循 DOM 顺序，而不是我的选择器查询顺序。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:17:32.317

jQuery 总是以 DOM 顺序返回元素，因此您需要按照以下方式进行操作：

```
$.each(['.selector1', '.selector2', '.selector3'], function(i, selector) {
    var res = $(selector);
    if (res.length) {
        res.first().click();
        return false;
    }
}); 
```

你可以像这样把它变成一个 jQuery 扩展：

```
$.coalesce = function(selectors) {
    var match;
    var selector = $.each(selectors, function(i, selector) {
        var res = $(selector);
        if (res.length) {
            match = res;
            return false;
        }
    });
    return match || $([]);
}; 
```

然后打电话

> $.coalesce(['.selector1', '.selector2', '.selector3']).first().click();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:23:51.307

使用 each() 遍历元素将给出正确的顺序，如下所示：

```
var elms = [".selector1", ".selector2", ".selector3"];

$.each(elms, function(index, item) {
    $(item).append('<br><br>This is item '+index);
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/fe9KH/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T01:59:00.087

您可以使用[`get()`](http://api.jquery.com/get/)方法获取元素数组，然后将它们连接起来，如下所示：

```
$($(".selector1").get().concat($(".selector2").get(), $(".selector3").get())).first().click(); 
```

# regex - URL 的正则表达式

> ID：10206300
> 
> 赞同：1
> 
> 时间：2012-04-18T09:12:38.010
> 
> 标签：regex

有人可以帮我编写以下 URL 的正则表达式吗？我想要一个正则表达式来匹配整个 URL。url 格式将是这样的。

`https://www.mywebsite.com/us/cgi-bin/binary?cmd=_payment-option&transaction_id=8768JKHKJG19322&account_number=6UN85941RH525783L&transaction_date=Apr 12, 2012&transaction_amount=-$11.00&ccode=USD&act_id=6K6218756F7819322&counterparty=Pretty Flower Florist&initiated_page=_login&go_Ah9w8keNJ8YRLMkAMTS_Izeq0br1CF6OVtGv69WzOo8AjgDgGIiBetMG-lK&Go_Actions`

这是我到目前为止所得到的，但它只匹配到第一个'&'

`http[s]*:\/\/www.[a-zA-Z0-9.]*mywebsite.[a-zA-Z]*[/]*[a-zA-Z0-9]*[/]*cgi-bin[/]*binary[?]*cmd=[_a-z\-]*[[\&][a-zA-Z0-9_-]*[=][a-z ,A-Z0-9_-]*]*`

我怎样才能重复这种模式`&transaction_id=8768JKHKJG19322`？

`[[\&][a-zA-Z0-9_-]*[=][a-z ,A-Z0-9_-]*]*`似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:19:06.987

这不是非常健壮的正则表达式，但它应该给你一个想法——重复常见的模式。

```
http[s]?:\/\/www\.mywebsite\.com(?:\/[a-zA-Z-?=_&\d\s,$\.]+)+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:52:04.483

部分答案，因为（正如其他海报所指出的那样），尚不清楚您要完成什么以及您的上下文是什么。如果您只想提取查询字符串参数 transaction_id 的值，那么这将为您完成这项工作：

```
[&?]transaction_id=([^&]+) 
```

在您的 OP 中，您有嵌套的括号。方括号仅用于字符类；你不能嵌套它们。

相反，请使用括号。括号用于两件事：指示嵌套或分组，以及将值“捕获”到程序中的 match[] 数组中。

至于识别查询字符串的其余部分，您不必像示例中那样匹配嵌入的空格`&counterparty=Pretty Flower Florist`；您应该期望空格被编码为 + 或 %20。

**更新：**

此正则表达式片段将匹配您输入 URL 的查询字符串部分：

```
([&?]([^=]+)(=([^&]+))?)* 
```

它不是对查询字符串规则的精确重述，但您可以使用它来捕获参数名称和值。这部分

```
([^=]+) 
```

捕获参数名称，而这部分

```
([^&]+) 
```

捕获参数值（如果有）。

# perl - Perl DateTime subtract_datetime_absolute 有趣的行为

> ID：10206306
> 
> 赞同：4
> 
> 时间：2012-04-18T09:12:55.673
> 
> 标签：perl, datetime

这是 DateTime 错误还是我错过了什么？

```
sub get_diff_same_day {
  # return only the time difference between 2 dates 
  my ($dnow, $dt) = @_;
  my $dtx = $dt->clone();
  $dtx->set_year( $dnow->year );
  $dtx->set_month( $dnow->month );
  $dtx->set_day( $dnow->day );
  say $dnow;
  say $dtx;

  return $dtx->subtract_datetime_absolute($dnow);
} 
```

输出：

```
2012-04-18T09:56:39
2012-04-18T09:56:40

0  DateTime::Duration=HASH(0x1e10a34)
   'days' => 0
   'end_of_month' => 'wrap'
   'minutes' => 0
   'months' => 0
   'nanoseconds' => 0
   'seconds' => 3577     # <= huh? 
```

但是，如果我使用，而不是 subtract_datetime_absolute

```
$dtx - $dnow 
```

这给了我：

```
0  DateTime::Duration=HASH(0x1bada04)
   'days' => 0
   'end_of_month' => 'wrap'
   'minutes' => 0
   'months' => 0
   'nanoseconds' => 0
   'seconds' => 1 
```

在我看来，subtract_datetime_absolute 没有考虑 DateTime::set_xxxx 函数。

**编辑：下面的示例。**

```
use Modern::Perl; 
use autodie;
use DateTime;

use constant OFFSET => 0;

## main
test();

sub test {
  my $now = DateTime->now( time_zone => 'local' )->add( hours => OFFSET );
  my $ddt = get_rand_date();
  my $secs = get_secs_same_day_broken ($now, $ddt);
  my $secs2 = get_secs_same_day($now, $ddt);

  if ( $secs != $secs2 ) {
    say "expecting same result ( $secs, $secs2 )";
  }
}

sub get_secs_same_day_broken {
  # return the seconds time difference between 2 dates 
  my ($dnow, $dt) = @_;
  my $dtx = $dt->clone();
  $dtx->set_year( $dnow->year );
  $dtx->set_month( $dnow->month );
  $dtx->set_day( $dnow->day );
  say "A: $dnow vs $dtx";
  return $dtx->subtract_datetime_absolute($dnow)->seconds;
}

sub get_secs_same_day {
  # return the seconds time difference between 2 dates 
  my ($dnow, $dt) = @_;
  my $dtx = $dt->clone();
  $dtx->set_year( $dnow->year );
  $dtx->set_month( $dnow->month );
  $dtx->set_day( $dnow->day );
  say "B: $dnow vs $dtx";
  return ($dtx - $dnow)->seconds;
}

sub get_rand_date {
  my $d = int(rand(27)) + 1;
  my $M = int(rand(11)) + 1;
  my $h = int(rand(24));
  my $m = int(rand(60));
  my $s = int(rand(60));

  my $dt = DateTime->new( day => $d, month => $M, year => 2012, hour => $h, minute => $m, second => $s );
  $dt->add( hours => OFFSET );

  return $dt;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:48:27.650

`$dtx->subtract_datetime_absolute($now)->seconds`将两个日期之间的差作为绝对秒数返回。

试试这个：

```
my $now = DateTime->now(time_zone => 'local');
my $dtx = $now->clone->set(hour => 22, minute => 22, second => 22);

{
    use integer;
    my $seconds = $dtx->subtract_datetime_absolute($now)->seconds;
    my $minutes = $seconds / 60;
    say $seconds - ($minutes * 60);
}

{
    my $seconds = ($dtx - $now)->seconds;
    say $seconds;
} 
```

# c - 在 RAM 中保存树/哈希表

> ID：10206309
> 
> 赞同：1
> 
> 时间：2012-04-18T09:13:15.920
> 
> 标签：c, memory-management, data-structures

我必须为非常特定的用途编写一个简单的键值存储。该存储将在与使用它的进程相同的内存空间中运行。

此存储的一个要求是它保存在 RAM 中，并且必须尽可能快。我们还没有决定数据结构，但我们可能会使用[LLRB-Tree](http://en.wikipedia.org/wiki/LLRB_tree)。

如何确保我的数据结构始终保存在 RAM 中？不交换，不分页，不缓存在其他地方，而是专门在内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:19:54.847

如果您使用 Linux，请检查`mlock()`

> mlock() 和 mlockall() 分别将调用进程的部分或全部虚拟地址空间锁定到 RAM 中，防止该内存被分页到交换区域。 [（手册页）](http://linux.die.net/man/2/mlock)

# php - 在 zen 购物车中显示特定属性的库存水平

> ID：10206313
> 
> 赞同：0
> 
> 时间：2012-04-18T09:13:34.277
> 
> 标签：php, zen-cart

我有我的禅车网上商店。我面临的问题是，我想显示产品特定属性的库存可用性。假设我有 Reebok 鞋并且有不同颜色的**蓝色**、**白色**和**灰色**。每个都有 3 种不同的尺寸。例如**8、9 和 10**。现在，当用户选择白色和 10 尺寸时，它将显示该特定产品的库存信息。

任何人都可以有解决方案吗？

# visual-studio-2010 - 如何停止 VS2010 / ReSharper 在粘贴时重新格式化 HTML？

> ID：10206314
> 
> 赞同：2
> 
> 时间：2012-04-18T09:13:38.763
> 
> 标签：visual-studio-2010, resharper, copy-paste

我在 Windows 8 上的 Visual Studio 2010 中运行 ReSharper 6.1。当我将 HTML 粘贴到 HTML 页面中时，它会自动格式化。我宁愿不是。[Samuel Meacham 提出了一个巧妙](https://stackoverflow.com/a/3292853/575530)的解决方案，即在粘贴后使用**ctrl + z撤消格式化。**但是我如何完全关闭它呢？我有工具 -> 选项 -> 文本编辑器 -> HTML -> 杂项 -> '粘贴时格式化 HTML' 未选中，ReSharper 选项没有提到粘贴（至少据我所知），只是在输入时谈论重新格式化或在结束标签上。有没有办法关闭 ReSharper 自动格式化以进行粘贴？

- - - - - 编辑 - - - - -

请注意，如果我取消选中 ReSharper 选项“输入时自动格式化”，则会在粘贴停止时自动格式化。也许 ReSharper 不允许我区分“粘贴”和“输入”？

# sql - 使用变量查询

> ID：10206325
> 
> 赞同：9
> 
> 时间：2012-04-18T09:14:00.447
> 
> 标签：sql, sql-server, subquery, query-variables

是否可以从查询中设置/读取变量？

**伪代码：**

```
SELECT animal_name,
    @tallest_animal = (select top 1 height from animal order by height desc) as tallest,
    @smallest_animal = (select top 1 height from  animal order by height asc) as smallest
FROM animals
WHERE height BETWEEN @smallest_animal AND @tallest_animal 
```

我知道可以通过使查询不同来实现结果，我的问题的实际用途很难解释。

这是有问题的 Microsoft SQL Server。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T09:19:22.897

是的，您可以在查询中设置变量。您的语法实际上非常接近。

为此，您需要：

```
SELECT @YourVariable = Column
FROM Animals 
```

注意：将字段分配给变量时不能使用 AS。

您必须确保将查询中的所有字段都分配给一个变量，否则您将收到以下错误：

> 为变量赋值的 SELECT 语句不得与数据检索操作结合使用。

要克服这个问题，只需将 AnimalName 分配给 @AnimalName 变量。

**编辑：**

```
DECLARE @AnimalName  VARCHAR(20)
DECLARE @TallestAnimal  INT
DECLARE @SmallestAnimal INT

SELECT @AnimalName = animal_name,
   @TallestAnimal  = (select top 1 height from animal order by height desc),
   @SmallestAnimal = (select top 1 height from  animal order by height asc) 
FROM animals
WHERE height BETWEEN @SmallestAnimal AND @TallestAnimal 
```

此代码假设高度字段为 INT 类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T09:22:01.657

不，这是不可能的，而是像这样使用：

```
DECLARE @tallest_animal int, @smallest_animal int
SET @tallest_animal=(SELECT max(height) from animals)
SET @smallest_animal=(SELECT min(height) from animals)
SELECT animal_name from animals where height between @tallest_animal AND @smallest_animal 
```

像这样的东西会起作用，但我不确定你在找什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T09:55:47.197

您可以使用派生表而不是变量。

```
select A.animal_name, M.tallest, M.smallest
from animals A
  inner join 
      (
        select max(height) as tallest,
               min(height) as smallest
        from animal
      ) M
    on A.height between M.smallest and M.tallest 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T10:33:59.987

选择语句不可能为变量赋值并在同一个 SELECT 语句中返回结果集 - 这是 SQL Server 的限制。如果可以的话，那岂不是很棒！

如果您需要单个语句，为什么要在此处使用变量？以下内容不适合您吗？

```
WITH cte (tallest, smallest) AS (
    SELECT MAX(height), MIN(height) FROM animals
)
SELECT animal_name FROM animals, cte WHERE height BETWEEN smallest AND tallest 
```

如果您希望稍后在存储过程中使用变量，那么您唯一的选择是使用两个选择语句：一个用于赋值，一个用于选择：

```
DECLARE @tallest INT, @smallest INT
SELECT @tallest = MAX(height), @smallest = MIN(height) FROM animals
SELECT animal_name FROM animals WHERE height BETWEEN @smallest AND @tallest 
```

请注意，使用 ADO 时，您可以在 ADO 命令中使用复合查询。换句话说，您的命令组件可以包含多个语句，因此上述两种解决方案都可以工作。

# asp.net - Umbraco 工作流程通知电子邮件中的 HTML 格式错误

> ID：10206327
> 
> 赞同：0
> 
> 时间：2012-04-18T09:14:05.997
> 
> 标签：asp.net, umbraco

我已经在 Our Umbraco 论坛 ( [http://our.umbraco.org/forum/ourumb-dev-forum/bugs/30914-HTML-formatting-error-on-workflow-notification-emails](http://our.umbraco.org/forum/ourumb-dev-forum/bugs/30914-HTML-formatting-error-on-workflow-notification-emails) ) 上发布了这个，但我想扩大受众，因为我需要快速解决这个问题。

工作流通知电子邮件中使用的 HTML 似乎存在问题，显示了属性名称，但它们的值不可见。HTML 内容就在那里，如果我将源代码保存为 .htm 文件并在 Firefox 中查看，则会显示值（尽管位置错误）。

HTML 是从**umbraco.cms.businesslogic.workflow命名空间中的****sendNotification**函数生成的，我使用的是**Umbraco v4.7.1.1 ，并且在****Outlook 2007**中发现了这个问题。

 ******有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:20:57.523

看来这个问题已经用 Umbraco ( [http://umbraco.codeplex.com/workitem/26577](http://umbraco.codeplex.com/workitem/26577) ) 记录了，但尚未得到解决。

修复是一个简单的代码更改，对于我当前的项目，我决定下载 CMS 源代码并自己进行更改。这可行，但会引发维护问题，例如确保在 CMS 升级期间我的更改不会被清除。******

# c# - 使用 foreach 循环解析大型文本文件的奇怪行为（C# .NET 4）

> ID：10206328
> 
> 赞同：2
> 
> 时间：2012-04-18T09:14:07.420
> 
> 标签：c#, memory-management, garbage-collection, out-of-memory

我有一个非常大的文本文件要解析（~2GB）。由于各种原因，我必须逐行处理文件。我通过将文本文件加载到内存（我正在运行解析器的服务器有足够的内存）来做到这一点`var records = Regex.Split(File.ReadAllText(dumpPath, Encoding.Default), @"my regex here").Where(s => !string.IsNullOrEmpty(s));`。这消耗的 RAM 相当于文本文件的大小加上几 MB 的`IEnumerable`开销。到目前为止，一切都很好。然后我与`foreach (var recordsd in records) {...}`

有趣的部分来了。我在 foreach 循环中做了很多字符串操作和正则表达式。然后程序很快就会用 System.OutOfMemoryException 轰炸，即使我在 foreach 循环中从未使用超过几 kB。我使用我选择的分析器（ANTS 内存分析器）制作了一些内存快照，在堆上看到了数百万个第 2 代字符串对象，消耗了所有可用内存。

看到这一点，我 -**就像一个测试一样**- 在每次 foreach 迭代结束时都包含 a `GC.Collect();`，瞧，问题解决了，不再出现内存不足的异常（因为永久垃圾收集，程序现在运行得非常缓慢）。唯一消耗的内存是实际文件的大小。

现在我无法解释为什么会发生这种情况以及如何防止它。据我了解，当变量超出范围并且没有更多（活动）引用时，应该将其标记为垃圾收集，对吗？

另一方面，我试图在一台非常庞大的机器（64GB RAM）上运行该程序。程序成功完成，但在关闭之前从未释放一个字节的内存。为什么？如果没有更多对对象的引用加上如果对象超出范围，为什么永远不会释放内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:17:01.217

> 现在我无法解释为什么会发生这种情况以及如何防止它。据我了解，当变量超出范围并且没有更多（活动）引用时，应该将其标记为垃圾收集，对吗？

不。没有被“标记”为垃圾收集的东西，*变量*不是垃圾收集：对象是。并且已经在 gen2 中的对象直到 GC 下一次查看 gen2 时才会被垃圾收集，这种情况比较少见。

> 由于各种原因，我必须逐行处理文件。

然后就是您的答案：[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)如果您使用的是 .NET 4，请使用，如果您不是，请编写等效的（这很容易）。然后你不需要一次在内存中的整个文件 - 只需要一行。您的内存使用量绝对应该直线下降。（请注意`ReadLines`，*不是* `ReadAllLines`- 后者会将整个文件读入字符串数组，这不是您想要的。）

> 另一方面，我试图在一台非常庞大的机器（64GB RAM）上运行该程序。程序成功完成，但在关闭之前从未释放一个字节的内存。为什么？

如果您谈论的是进程从操作系统中获取的内存，我不*相信*CLR 会释放内存。我假设它采用的方法是，如果您曾经使用过这么多内存，您可能会再次使用这么多。

# c++ - 为什么更改 for 循环迭代顺序会增加运行时间？

> ID：10206330
> 
> 赞同：2
> 
> 时间：2012-04-18T09:14:14.907
> 
> 标签：c++, c, performance

> **可能重复：**
> [为什么循环的顺序会在迭代二维数组时影响性能？](https://stackoverflow.com/questions/9936132/why-does-the-order-of-the-loops-affect-performance-when-iterating-over-a-2d-arra)

我有这个简单的 for 循环

```
for (i=0;i<10000;i++){
   for(j=0;j<10000;j++){
      a[i][j]=i+j;
      }} 
```

当我将这些 for 循环的顺序更改为：

```
for (j=0;j<10000;j++){
   for(i=0;i<10000;i++){
      a[i][j]=i+j;
      }} 
```

我看到运行时间急剧增加。为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:18:23.687

访问局部性的丢失会导致更多的页面错误。

# gwt - 如何将 OpenLayers 中 VectorFeatures 或 Layer 的坐标从一个投影转换为另一个？

> ID：10206335
> 
> 赞同：2
> 
> 时间：2012-04-18T09:14:38.980
> 
> 标签：gwt, openlayers, gwt-openlayers

我在我的项目中使用 GWT-OpenLayers，但在转换坐标时遇到问题。我知道如何为单点执行此操作，`transform(from,to)`但我可以在不为每个点申请的情况下执行此操作吗？现在我正在解析 KLM 数据以获取特征列表，并将它们添加到新向量中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:36:03.773

调用`transform`任何几何，它应该可以工作。多点几何继承自`OpenLayers.Geometry.Collection`其中有自己的[`transform`](http://dev.openlayers.org/docs/files/OpenLayers/Geometry/Collection-js.html#OpenLayers.Geometry.Collection.transform)方法。

# bash - 如何从一组文件中删除与模式匹配的所有行？

> ID：10206337
> 
> 赞同：15
> 
> 时间：2012-04-18T09:14:43.830
> 
> 标签：bash, sed, grep, pattern-matching

我有一个令人讨厌的闭源工具，它将特定信息写入其配置文件。如果您随后尝试在其他文件上使用配置，则它会加载旧文件。呃……

幸运的是，配置文件是文本，所以我可以对它们进行版本控制，事实证明，如果只是从文件中删除有问题的行，就不会造成任何伤害。

但是该工具不断将这些行放回原处。因此，每次我想签入配置文件的新版本时，我都必须删除所有包含符号的行`openDirFile`。

我即将构建某种 bash 命令来在每个文件上运行 grep -v ，将结果存储在一个临时文件中，然后删除原始文件并重命名临时文件，但我想知道是否有人知道一个不错的干净解决方案，或者已经编造和调试了类似的调用。

对于额外的功劳，如何在不破坏同一目录（favourite.rc->signals.rc）中的符号链接的情况下做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-18T09:17:41.480

```
sed -i '/openDirFile/d' *.conf 
```

这会删除所有 conf 文件

如果您的 conf 文件位于不同的路径中，您还可以将该行与“find”命令结合使用。

请注意， -i 将“就地”删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:32:52.683

这是我想出的 bash-spell：

```
for i in *.rc ; do TMP=$(mktemp) ; grep -v openDirFile ${i} >${TMP} ; mv ${TMP} ${i} ; done 
```

肯特的回答显然更胜一筹。

# php - 如何使用 javascript 在 html 循环中获取动态 id 的值？

> ID：10206342
> 
> 赞同：0
> 
> 时间：2012-04-18T09:15:08.043
> 
> 标签：php, javascript, html

我正在使用 redips javascript 创建一个拖放系统。

这是我使用 html 和 php 生成数据的脚本

```
<div id="base">  
   <table>
     <tbody>
       <?php 
          foreach($deviceID as $row)
          { 
             echo '<tr><td><div class="drag">'.$row['description'].'<input type="hidden" id="bus" value="'.$row['description'].'"></div></td></tr>'; 
          }
        ?>
       </tbody>
    </table>
</div> 
```

这是我的 javascript 文件的片段。

```
var redips_init;
redips_init = function () {
    // reference to the REDIPS.drag
    var rd = REDIPS.drag;
    // initialization
    rd.init();
        rd.drop_option = 'shift';
    rd.animation_shift = true;

        rd.myhandler_dropped = function () {            
            alert($('#bus').val());
        }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:30:49.860

我不擅长 php，但我通常在 jsp 中做的是创建一个本地索引变量并将其附加到循环中的每个 ID 属性。

所以你的代码看起来像这样

```
 <?php 
      $index=0;    
      foreach($deviceID as $row)
          { 
             echo '<tr><td><div class="drag">'.$row['description'].'<input type="hidden" id="bus'.$index++.'" value="'.$row['description'].'"></div></td></tr>'; 
          }
        ?> 
```

在 javascript 中，您的 dragAndDrop 事件应该返回一个索引位置，您可以通过该索引位置获得适当的值。

现在你可以在你的 JavaScript 中使用这个动态 ID 来做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:56:59.333

REDIPS.drag 包含[save_content()](http://www.redips.net/javascript/redips-drag-documentation/#save_content)方法来扫描表中的所有 DIV 元素并将结果作为**查询字符串**或**JSON**对象返回。输入参数是表 id 和返回结果的类型（默认为查询字符串）。如果这还不够好，您可以搜索 save_content() 源并进行自定义。方法很简单，它使用几个循环来扫描表格内容。

另一方面，如果您需要知道可以在**myhandler_dropped**事件处理程序中写入的已删除 DIV 元素的 ID。这是代码片段：

```
rd.myhandler_dropped = function () {
    // define DIV id
    var id = rd.obj.id;
    // write DIV id to the console
    console.log(id)
}; 
```

希望这个答案会有所帮助。

# ruby-on-rails - Capistrano 部署、资产管道、未找到 ruby -debug

> ID：10206345
> 
> 赞同：3
> 
> 时间：2012-04-18T09:15:15.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, capistrano, asset-pipeline

我正在将带有 Capistrano 的 Rails 3.2.2、Ruby 1.9.3 应用程序部署到 Linux 服务器。当我运行时，`cap deploy`我收到此错误：

```
 * executing `deploy:assets:precompile'
  * executing "cd /var/www/production/releases/20120418090209 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["example.com"]
    [example.com] executing command
    [example.com] sh -c 'cd /var/www/production/releases/20120418090209 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'
 ** [out :: example.com] rake aborted!
 ** [out :: example.com] cannot load such file -- ruby-debug
 ** [out :: example.com] 
 ** [out :: example.com] (See full trace by running task with --trace)
    command finished in 8962ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/production/releases/20120418090209; true"
    servers: ["example.com"]
    [example.com] executing command
    [example.com] sh -c 'rm -rf /var/www/production/releases/20120418090209; true'
    command finished in 176ms
failed: "sh -c 'cd /var/www/production/releases/20120418090209 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on example.com 
```

它说，`ruby-debug`没有找到宝石。但是 ruby​​-debug 不在我的 Gemfile 的生产组中：

```
group :development, :test do
  gem "steak"
  gem "linecache19", :git => "git://github.com/mark-moseley/linecache", :require => "ruby-debug"
  gem "ruby-debug-base19x", "~> 0.11.30.pre4"
  gem "ruby-debug19"
  gem "rails_best_practices"
  gem "ruby_parser"
  gem "reek"
  gem "flog"
  gem "jslint_on_rails", :git => "git://github.com/psionides/jslint_on_rails"
  gem "jasmine-rails"
end 
```

导致在`rake assets:precompile`命令之后引发错误，我认为它与 Capistrano 和`load 'deploy/assets'`我的 Capfile 中的调用有关：

```
load 'deploy' if respond_to?(:namespace) # cap2 differentiator
Dir['config/deploy/recipes/*.rb','vendor/gems/*/recipes/*.rb','vendor/plugins/*/recipes/*.rb'].each { |plugin| load(plugin) }
load 'config/deploy' # remove this line to skip loading any of the default tasks
# Uncomment if you are using Rails' asset pipeline
load 'deploy/assets' 
```

当我删除这条线时，一切都部署得很好，但是（当然）在生产中找不到资产。而且，如果我`bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile`直接在服务器上运行（在应用程序目录内），我会得到同样的错误。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:06:54.860

`ruby-debug` is obsolete. In ruby >= 1.9 you should use excellent `debugger` gem see: [https://github.com/cldwalker/debugger](https://github.com/cldwalker/debugger) and [http://railscasts.com/episodes/54-debugging-ruby-revised](http://railscasts.com/episodes/54-debugging-ruby-revised)

# jqgrid - 触发“滚动”事件时调用函数

> ID：10206350
> 
> 赞同：1
> 
> 时间：2012-04-18T09:15:40.973
> 
> 标签：jqgrid

我有一个从数组数据本地初始化的网格。在向其中添加行之后，我希望能够在滚动条到达末尾时获取滚动条事件并在本地加载更多行。（网格有一定的高度和`'overflow-y' : scroll`）

如何才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:39:02.837

[您可以在grid.base.js](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js)的第 1831 行看到加载更多数据的代码：

```
 case "local":
            case "clientside":
                beginReq();
                ts.p.datatype = "local";
                var req = addLocalData();
                addJSONData(req,ts.grid.bDiv,rcnt,npage>1,adjust);
                $(ts).triggerHandler("jqGridLoadComplete", [req]);
                if(lc) { lc.call(ts,req); }
                $(ts).triggerHandler("jqGridAfterLoadComplete", [req]);
                if (pvis) { ts.grid.populateVisible(); }
                endReq(); 
```

好消息是该[`loadComplete`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件已被调用，因此您可以将代码放在那里。唯一的复杂性是`loadComplete`在最初构建网格时也可能会调用它，因此您也必须考虑到这一点。

# linux - getopt 命令部分解析

> ID：10206356
> 
> 赞同：0
> 
> 时间：2012-04-18T09:16:04.070
> 
> 标签：linux, bash, shell

我有一部分 bash 脚本假设要验证参数，如果匹配则继续或退出。
这是我的脚本

```
TEMP=`getopt --options b,t:,h,n,v,z: --longoptions batch,targetdir:,help,notar,verbose,zone: --name 'mysql-backup-start' -- "$@"`    
if [ $? -ne 0 ]; then  
  echo "Command Incoorect"  
  exit 1  
fi 
```

`mysql-backup-start`应采用以下参数：`-b`, `-t`, `-h`, `-n`, `-v`, `-z` `--targetdir`, `--help`, `--notar`, `--verbose`, 和`--zone`. 但是，如果我传递, 或它之类的参数`-nn`，它会起作用并且它不应该起作用。 `-hh``--tar`

更准确地说，我想要的是，如果我执行 **'mysql-backup-start'**应该可以工作，'mysql-backup **-start --notar'**应该可以工作， **'mysql-backup-start --n'**不应该工作， **'mysql -backup-start --targetdir=/home/backup/mysql'** 应该可以工作，**'mysql-backup-start --targetsdir=/home/backup/mysql'**不应该工作，**'--mysql-backup-start --ta =/home/backup/mysql'** 不应该工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:25:45.477

当您通过时`-nn`，`getopt`只需将其解释为您已指定`-n -n`. 这通常是传递参数的有效方式 - 例如，`ssh -vvv`以比`ssh -v`. 在其他命令中，您可以选择启用或禁用功能，最后一个选项（启用或禁用）“获胜”。例如，如果用户定义了一个别名`alias grep='grep -H'`（“打印每个匹配的文件名。”），但想要覆盖它，这很有用。为此，她可以运行`command grep`或简单地通过运行恢复选项，`grep -h`然后将其解析为`grep -H -h`.

如果你想检查一个选项是否被多次指定（尽管这通常不是必需的），你应该稍后在解析`$TEMP`.

`--tar` *~~不~~*应该*工作 - 请参阅@tuxuday 的评论和`man getopt`.*

# c# - 在 Windows Phone/C# 中的类之间传递对象

> ID：10206358
> 
> 赞同：1
> 
> 时间：2012-04-18T09:16:08.650
> 
> 标签：c#, windows-phone-7, xaml

我是 Windows Phone 和 C# 的新手，享受来自 Objective-C 和 Java 的变化。

我找不到将对象从一个类传递到另一个类的方法。我在 MSDN 上看到了一些示例代码，但我认为它可能不适用于我需要的东西。

```
 private void meetingList_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (meetingList.SelectedIndex != -1)
        {
            Meeting aMeeting = (Meeting)meetingList.SelectedItem;
            this.NavigationService.Navigate(new Uri("/MeetDetails.xaml", UriKind.Relative));
            ApplicationBar.IsVisible = true;
        }
    } 
```

如何将我的会议对象“aMeeting”传递给我的 MeetDetails 类，以便向用户显示所有详细信息。

我知道我可以分解它，并通过使用类似这样的东西传递来自“aMeeting”的所有变量：

```
this.NavigationService.Navigate(new Uri("/MeetDetails.xaml?Meeting=" +
            aMeeting.meetName + "&TheDate=" +
            aMeeting.meetDate, UriKind.Relative)); 
```

有什么我错过的吗？你们有其他方法可以推荐吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:21:53.443

您发布的内容是传输有关该地点的简单数据的好方法。但是，当您必须在页面之间传递复杂的对象时，它会变得很痛苦。

推荐的方法是使用 MVVM 模式（来自[wikipedia](http://en.wikipedia.org/wiki/Model_View_ViewModel)和[MSDN](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)）。这为您提供了一种通过使用数据绑定将视图与其他所有内容分开的方法。我见过的最好的教程是观看[MSDN 上的视频](http://www.galasoft.ch/mvvmvideo1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:21:03.797

您可能需要考虑具有可以存储当前会议对象的属性的管理器类。这将在您的 SelectionChanged 事件处理程序中设置，然后在您的 MeetDetails 页面中访问。管理器类是在您的页面外部定义的，以便可以从您的所有页面访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:34:21.377

```
 var t1 = App.Current as App;
         t1.SSIDToken = stData1SSID;
         t1.CSRFToken = stData1CSRF; 
```

这真的很好，只需在 app.cs 文件中添加您需要的成员（这里是：

公共字符串 SSIDToken {get; 设置；} 公共字符串 CSRFToken {get; 放;}

然后创建顶部代码以创建一个 var 作为临时缓冲区。如果您想取回这些值，请使用相同的代码：

```
 var t1 = App.Current as App;
     thisisatextbox.Text = t1.SSIDToken;
     thisisalsoatextbox.Text = t1.CSRFToken; 
```

更多信息； [http://www.eugenedotnet.com/2011/07/passing-values-between-windows-phone-7-pages-current-context-of-application/](http://www.eugenedotnet.com/2011/07/passing-values-between-windows-phone-7-pages-current-context-of-application/)

编辑：经过几个月的经验，注意到您可以添加

```
public static new App Current
{
    get { return Application.Current as App; }
} 
```

在 App.xaml（在公共类 App 中）能够调用 App.Current 而不必每次都声明它！

现在你可以使用 App.Current.CSRFToken = "" || 字符串 CSRFTk = App.Current.CSRFToken;

# c# - 如何从 ac# 应用程序调用 jquery 函数？

> ID：10206359
> 
> 赞同：2
> 
> 时间：2012-04-18T09:16:10.540
> 
> 标签：c#, jquery

我想从 C# 应用程序调用 jquery 函数。我有一个想法如何做到这一点，因为已经对它进行了一些研究。但我坚持如何开始。

我`System.Web.UI`在引用中添加了，但只能找到`ClientScriptManager`，我没有看到 a `ScriptManager`，也没有看到`ClientScript`某些论坛中提到的 a 。所以我从这个开始：

```
ClientScriptManager.RegisterStartupScript(this.GetType(), "jQuery", jsText, false); 
```

但似乎我需要一个对象`ClientScriptManager`来做到这一点。所以我创建了一个对象`ClientScriptManager`：

```
ClientScriptManager csm = new ClientScriptManager(); 
```

现在我收到一条错误消息`ClientScriptManager does not have a constructor`。

有关如何进行的任何帮助？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:19:16.743

改用 Page.ClientScript ...

```
this.Page.ClientScript.RegisterStartupScript(Page.GetType(), "jQuery", jsText, false); 
```

# c - .o 文件中的多重定义错误

> ID：10206367
> 
> 赞同：4
> 
> 时间：2012-04-18T09:16:32.440
> 
> 标签：c

我有一个 ah 文件，我在其中声明了这么多结构。我在 ac 文件中初始化这些结构（我已包含 ah 文件），我想在另一个 bc 文件中重用相同的 ah 文件。当我在 bc 中包含头文件 ah 时，我将错误作为多个定义。请帮助我如何防止此问题并在两个 .c 文件中重用相同的 .h 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:19:34.973

您绝不能在头文件中实例化事物，即永远不要定义任何东西，只需声明它们即可。

您应该将每个声明的事物的单个定义放在一个*C*文件中，并`extern`在共享标头中声明：

在`mydata.h`：

```
struct Foo {
  float baryness;
  float baziness;
};

extern struct Foo TheFoo; 
```

在*一个*C 文件中：

```
#include "mydata.h"

struct Foo TheFoo; 
```

在项目的其他标题中：

```
#include "mydata.h"

printf("the baziness is %f right now\n", TheFoo.baziness); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:20:07.883

`a.h`应该只声明结构而不是变量。或者如果它确实声明了变量，则应该声明它们`extern`以防止重复定义。（然后在其中一个 .c 文件中定义它们一次。）

该错误是由同一变量的多个定义引起的。确保`a.c`并且`b.c`不要都声明相同的变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:28:52.870

你的头文件应该这样声明..

```
#ifndef MYHEADER_H
#define MYHEADER_H

struct MyStruct {

     ...
     ...

};

#endif // MYHEADER_H 
```

因此，即使您将此文件包含在任意数量的 .c 文件中，其中的结构也只会定义一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:18:59.140

[http://en.wikipedia.org/wiki/Include_guard](http://en.wikipedia.org/wiki/Include_guard)

您不需要包含它两次，即将 .h 文件包装成相当于

```
#ifndef _MY_H_
#define _MY_H_

/* codez go here */

#endif _MY_H_ 
```

# html - Windows 手机 7 和 HTML5

> ID：10206371
> 
> 赞同：2
> 
> 时间：2012-04-18T09:17:03.157
> 
> 标签：html, html5-video, windows-phone, html5-audio

就编程而言，我对 Windows Phone 和 Windows 银河系完全陌生。对于一个必须在 Windows 手机上运行的手机应用程序的项目，我开始探索资源并且我有一些问题。

我遇到的问题之一是事情变化很快。例如，对[这个问题](https://stackoverflow.com/questions/4209497/windows-phone-7-and-html5)的回答说 Windows Phone 中的浏览器很可能不支持 HTML5。但是，有许多在线教程（例如[此处](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)）介绍了 ASP.NET MVC 4 以及它如何适用于移动应用程序。

我个人更愿意采用“HTML5+javascript”的方式，而不是学习如何使用 Silverlight 进行开发，这显然已被 Microsoft 停产。然而，我首先关心的显然是能够创建一个有效的应用程序！

因此，考虑到这一点，我的问题如下：

*   我的印象是 HTML5+JS 正在被引入来替代 Silverlight，并且在未来会被更多地使用。那是对的吗？
*   知道我必须构建一个应该能够播放视频和音频、录制音频并连接到库以在后台进行一些语音处理的应用程序，我应该使用 Silverlight 还是可以尝试使用 ASP.NET MVC 4？（据我所知，Silverlight 会比 XNA 更好）
*   与 Silverlight 或其他方式相比，使用 HTML5+JS 是否有限制？
*   如果无法访问远程服务器，您能否打包一个 Web 应用程序（即使用 HTML5+JS）在手机上本地使用？

任何关于这些具体问题的具体指示或答案都将受到欢迎！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:59:01.190

目前，Windows Phone 7.1 不支持完整的 HTML5+JS 作为 Silverlight 的替代品。在 Windows 8（不是下一个版本的 windows phone，而是下一个版本的微软桌面操作系统）中，HTML5+JS 被作为使用 XAML 和 C# 的*替代方案*（这有点令人困惑，因为在 Windows 8 上，“metro”应用程序可以不运行 Silverlight，但它们仍然使用 XAML 和 C# 运行）。但这既不是这里也不是那里... 总结一下您的问题：在手机的浏览器中，HTML5 功能非常有限。

根据您的描述，您肯定希望将 Silverlight 用于您的 Windows Phone 应用程序。*您的那*部分问题的答案从未改变，从 WP7 开始的 Silverlight 将是您的最佳选择。XNA 专为游戏开发而设计。

**要逐点回答您的所有问题：**

> 我的印象是 HTML5+JS 正在被引入来替代 Silverlight，并且在未来会被更多地使用。那是对的吗？

这还没有得到证实（截至这篇文章），但猜测是在未来的某些操作系统版本中会出现这种情况（没有关于何时会出现的消息）。但是不，目前这不是一个选项，而且微软也没有承诺它永远不会。

> 知道我必须构建一个应该能够播放视频和音频、录制音频并连接到库以在后台进行一些语音处理的应用程序，我应该使用 Silverlight 还是可以尝试使用 ASP.NET MVC 4？（据我所知，Silverlight 会比 XNA 更好）

银光。银光。银光。:) ASP.NET + MVC 将不起作用。XNA 旨在用于构建游戏。尝试使用它来构建更标准的用户界面至少会让你感到头痛，而且看起来也不会好到哪里去。

> 与 Silverlight 或其他方式相比，使用 HTML5+JS 是否有限制？

和

> 如果无法访问远程服务器，您能否打包一个 Web 应用程序（即使用 HTML5+JS）在手机上本地使用？

如上所述，没有办法在电话上执行此操作。

至于所有这一切的指针。我强烈建议你简单地用谷歌搜索（或者如果你喜欢这种东西的话）“windows phone 入门”或“windows phone 教程”。我可以为您指出的最佳来源是[Windows Phone 开发者](http://developer.windowsphone.com)网站。它有一些很棒的教程，不假设您对 Windows Phone 了解很多。最好从 Microsoft 获取此材料。它会更可靠，写得更好，最终更有用。自从手机发布之前，我就一直在编写 Windows Phone 应用程序，并且我仍然使用它来学习新事物的基础知识。好地方。

# actionscript-3 - 更改 ResourceManager 以按分号而不是逗号拆分值

> ID：10206372
> 
> 赞同：0
> 
> 时间：2012-04-18T09:17:03.360
> 
> 标签：actionscript-3, apache-flex, mobile, flex4, resourcebundle

正如标题所说，有没有办法改变 ResourceManager 的`getStringArray()`方式，它用分号而不是逗号分割资源？

实际方法可以在`ResourceManagerImpl`类中找到，可以在包中找到`mx.resources`。覆盖该方法会很好，但理想情况下我想`getStringArray`用变量分隔符编写自己的方法，但是，似乎没有办法扩展`ResourceManager`or`ResourceManagerImpl`类以某种方式添加该方法。

有人知道在这里做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:47:10.160

问题不在于您不能扩展`ResourceManagerImpl`，因为它不是`final`，而是您必须能够将您的实现注册到应用程序而不是默认应用程序。这样做有点棘手。

所以首先创建你的实现：

```
public class MyResourceManager extends ResourceManagerImpl {

    private static var instance:IResourceManager;

    static public function getInstance():IResourceManager
    {
        if (!instance) instance = new MyResourceManager();
        return instance;
    }

    override public function getStringArray(bundleName:String,
                                            resourceName:String,
                                            locale:String = null):Array {
        //do your stuff
    }

} 
```

所以我们重写了这个`getStringArray`方法。请注意，我们为 做了同样的事情`getInstance`，因为我们希望它返回一个新的实例，`MyResourceManager`而不是`ResourceManagerImpl`（我们不必标记`override`，因为它是一个`static`方法）。此外，您可能必须手动编写一些导入语句，因为您正在使用的某些类被标记为“排除”。

现在我们必须告诉 Flex 使用`MyResourceManager`而不是`ResourceManagerImpl`. 我们可以使用以下代码来做到这一点：

```
import mx.core.Singleton;
Singleton.registerClass("mx.resources::IResourceManager", MyResourceManager); 
```

问题是我们必须在 Flex 注册之前这样做`ResourceManagerImpl`，因为一旦注册就不能覆盖它。为此，我们需要创建一个自定义预加载器，在其中进行注册（遗憾的是，应用程序的“预初始化”阶段还不够早）。

```
public class RegisteringPreloader extends DownloadProgressBar {

    override public function initialize():void {
        super.initialize();
        Singleton.registerClass("mx.resources::IResourceManager", 
                                MyResourceManager);
    }

} 
```

现在将自定义预加载器分配给应用程序，我们就完成了：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               preloader="RegisteringPreloader" > 
```

有关更多信息，我向您推荐了一个非常相似但更详细的答案，我为另一个问题写了：[有没有办法在弹出管理器类上监听事件？](https://stackoverflow.com/questions/9034020/is-there-a-way-to-listen-for-events-on-the-pop-up-manager-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T10:47:22.170

仅作记录：如果您想为本地化提供包含逗号的字符串数组，`getObject`使用`IResourceManager`.

在您的属性文件中：

```
my.beloved.strings: ["That's it, string one", "Okay, string two"] 
```

在您的代码中：

```
var strings:Array = _resourceManager.getObject(_bundleId, 'my.beloved.strings') as Array;
var stringOne:String = strings[0]; 
```

您不必以这种方式覆盖任何内容。

# actionscript-3 - Flex：用 ObjectUtil 比较两个相同的字典失败了吗？

> ID：10206376
> 
> 赞同：0
> 
> 时间：2012-04-18T09:17:23.350
> 
> 标签：actionscript-3, apache-flex, dictionary, mxml

我想使用 ObjectUtil.compare() 比较两个字典。当字典相同时（两个不同的实例，但内容相同），比较失败并出现奇怪的异常：

```
Error #1034: Type Coercion failed: cannot convert "some_key" to QName. 
```

这里有一些代码让它更清楚。

主.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<local:MainTest xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:local="*"/> 
```

主测试.as

```
package {
  import spark.components.Application;
  import flash.utils.Dictionary;
  import mx.utils.ObjectUtil;

  public class MainTest extends Application {
    public function MainTest() {
      super();
      trace(ObjectUtil.compare(getMyDictionary(), getMyDictionary()));
    }

    private function getMyDictionary() : Dictionary {
      var myDictionary : Dictionary = new Dictionary();
      myDictionary["oranges"] = "orange";
      myDictionary["kiwis"] = "green";
      return myDictionary;
    }
  }
} 
```

如您所见，构造函数调用`ObjectUtil.compare`了两个字典。该`getMyDictionary()`方法显然每次都返回新的、相同的字典（当然，不同的实例，但它们是相同的）。当代码到达 时`ObjectUtil.compare()`，调试器会打印以下错误：

```
Error #1034: Type Coercion failed: cannot convert "oranges" to QName. 
```

为什么要将“oranges”键与 QName 进行比较？

**注意：**如果我调用`ObjectUtil.compare`提供与参数相同的实例，它可以正常工作。我的意思是，如果我将 的返回值保存`getMyDictionary()`到变量中`myDict`并调用`ObjectUtil.compare(myDict, myDict)`，则不会出现错误，并且比较会通过。

任何人都可以解释一下吗？我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:36:23.820

这是 Flex sdk 中的一个错误。`Object`如果您不`Dictionary`打算使用除`String`.

```
private function getMyDictionary() : Object {
      var myDictionary : Object = new Object();
      myDictionary["oranges"] = "orange";
      myDictionary["kiwis"] = "green";
      return myDictionary;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:44:34.150

当我浏览文档时，我发现了这个，这可能有帮助

> mx.utils.ObjectUtil.compare(a:Object, b:Object, depth:int=-1):int
> 
> 比较**对象并返回一个整数值**，指示第一项是否小于或等于第二项。此方法将递归比较嵌套对象的属性，并在找到非零结果后立即返回。默认情况下，此方法将递归到任何属性的最深层次。要更改用于比较的深度，请为深度参数指定一个非负值。参数：一个对象。b 对象。depth 指示执行比较时应该递归多少级别。将此值设置为 0 以仅对每个属性的原始表示进行浅比较。
> 
> 例如：

```
 var a:Object = {name:"Bob", info:[1,2,3]};
   var b:Object = {name:"Alice", info:[5,6,7]};
   var c:int = ObjectUtil.compare(a, b, 0); 
```

> 在上面的示例中，在进行比较时，a 和 b 的复杂属性将通过调用 toString() 来展平。在这种情况下，info 属性将在执行比较时转换为字符串。
> 
> 回报：
> 
> 如果 a 和 b 为 null、NaN 或相等，则返回 0。如果 a 为空或大于 b，则返回 1。如果 b 为 null 或大于 a，则返回 -1。
> 
> 语言版本：3.0
> 
> 播放器版本：Flash 9、AIR 1.1
> 
> 产品版本：Flex 3

# c++ - 将不可比较的对象添加到集合中

> ID：10206381
> 
> 赞同：2
> 
> 时间：2012-04-18T09:17:47.860
> 
> 标签：c++, data-structures, set

我有一个名为 Point 的类（在外部库中，我无法修改代码），用于表示 3d 空间中的点：

```
int x = 0; int y = 0; int z = 0;
Point my_point p(x,y,z); 
```

它重载了`==`and`!=`运算符，但不重载`<`or `>`。我需要以有效的方式存储它们（没有双重元素，没有重复）。我以为我的数据结构是`set`，但如果我尝试使用，我会收到此错误：

```
error: no match for ‘operator<’ in ‘__x < __y’ 
```

一些忠告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:21:34.417

编写一个比较运算符，并用它实例化`set`：

```
struct ComparePoints
{
    bool operator()( Point const& lhs, Point const& rhs ) const
    {
        if ( lhs.x != rhs.x ) {
            return lhs.x < rhs.x;
        } else if ( lhs.y != rhs.y ) {
            return lhs.y < rhs.y;
        } else {
            return lhs.z < rhs.z;
        }
    }
};

std::set <Point, ComparePoints> mySet; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:21:51.393

您可以定义一个比较函子并将其作为第二个模板参数传递给 std::set。看[这里](http://en.cppreference.com/w/cpp/container/set)，看`Compare`。也可以定义`bool operator<(const Point& lhs, const Point& rhs)`，但是如果不能碰类，这就需要通过 的公共接口来实现比较`Point`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:23:11.883

您可以自己定义运算符 <。如果 x、y 和 z 可从 Point 的公共接口获得，则它不必位于 Point 类中。

```
bool operator<(const Point& lhs, const Point& rhs)
{
  if( lhs.x != rhs.x ) return lhs.x < rhs.x;
  if( lhs.y != rhs.y ) return lhs.y < rhs.y;
  return lhs.z < rhs.z;
} 
```

# jquery - Html.ActionLink 导致我的布局重新加载

> ID：10206384
> 
> 赞同：0
> 
> 时间：2012-04-18T09:17:54.940
> 
> 标签：jquery, asp.net-mvc, jquery-ui-accordion

我在 MainController 的索引视图中定义了多个 ActionLink。

```
Html.ActionLink("admin",controller = "Admin",action = “Index”)
Html.ActionLink("customer",controller = "Customer",action = “Index”)
Html.ActionLink("billing",controller = "Billing",action = “Index”) 
```

这些动作链接在 Jquery 手风琴控件内。当我单击扩展器内容内的操作链接时，相关视图呈现在右侧 contentDIV 但左侧的手风琴已折叠以前打开的内容窗格并展开了初始内容窗格。为什么会这样，或者我该如何防止呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:26:18.753

您可以使用 2 个选项：

1.  页面的 Ajax 加载 - 您需要使用 ajax 查询加载页面内容，并且不要重新加载页面。它将允许您在正确的项目上保持手风琴展开。

2.  您需要在 $(document).ready() 上的手风琴中打开正确的项目...因为它会重新加载手风琴的页面状态将被刷新，并且您需要手动定义应该打开哪个项目。例如，您可以参考链接：

    ```
    if (url == 'admin')
        openAccordionItem(1);
    if (url == 'Customer')
        openAccordionItem(2);
    if (url == 'Billing')
        openAccordionItem(3); 
    ```

# sql-server - 如何使用与 sql server 的 DAO 连接更新 VB6 中的记录集

> ID：10206389
> 
> 赞同：0
> 
> 时间：2012-04-18T09:18:15.280
> 
> 标签：sql-server, vb6, dao

我正在使用 VB6 应用程序。哪个正在使用 MSAccess 数据库。现在我正在更改对 sql server 的数据库访问。从 MSAccess 获取/更新数据，应用程序正在使用 DAO 对象。所以现在我也在尝试用 DAO 方法连接 SQL Server。现在我能够连接数据库并能够获取数据。但是当我试图编辑记录时，它给出了错误“运行时错误'3027'无法更新。数据库或对象是只读的”。我在这里显示我的代码：

```
Public LSWs As Workspace, LSDb As Database
Dim lsConnString As String
Dim l0 As Recordset, SQL0 As String
Dim lehReturn As Integer, retrycount As Integer

lsConnString = "ODBC;DRIVER=SQL Server;SERVER=SERVERName;DATABASE=" & DBname & ";APP=Visual Basic;UID=UID;PWD=PWD"
Set LSWs = DBEngine.Workspaces(0)
Set LSDb = LSWs.OpenDatabase(DBname, dbDriverNoPrompt, True, lsConnString) 
retrycount = 0
SQL0 = "select * from schedule_hdr where status = '" & Trim(PCName) & "'"
Set l0 = LSDb.OpenRecordset(SQL0, dbOpenDynaset, dbSeeChanges, adLockPessimistic)
Do While Not (l0.EOF)
    LSWs.BeginTrans
    l0.Edit
    l0!status = "R"
    l0.Update
    LSWs.CommitTrans
    l0.MoveNext
Loop
l0.Close 
```

但它在 l0 处给出错误。编辑此行代码给出错误“运行时错误'3027'无法更新。数据库或对象是只读的任何帮助！或建议请回复

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:08:29.587

最初我认为您用于 SQL 服务器的用户名和密码可能具有只读权限。

如果不是这种情况，并且您想坚持使用 DAO，那么我建议使用 Access 的内置 ODBC 链接功能，因为这可以帮助您成功连接到 SQL 服务器。

但是，我的建议是放弃 DAO 并使用 ADO，主要是因为 DAO 将您的数据处理限制在缓慢的客户端，而拥有专用服务器的全部意义在于尽可能多地运行服务器端以显着提高表现。

# android - 动态按钮点击android

> ID：10206392
> 
> 赞同：0
> 
> 时间：2012-04-18T09:18:29.537
> 
> 标签：android

我想在单击特定按钮时更改按钮的图像并删除所有其他按钮，请帮助。

这是我的代码

```
public void onClick(View view) {
    Object tag = ((Button) view).getTag();

    System.out.println("value o ftagagdsgsdg:::" +tag.toString());
    String strtag = tag.toString();
    System.out.println("value of strtag:::" +strtag);

    enablebutton = Integer.valueOf(tag.toString());

    System.out.println("value of enable buttons variable::" +enablebutton);
    DeselectButtons();

    ((Button)view).setEnabled(true);
    for(int a = 0;a<adapt_obj.city_id_array.length;a++){
        System.out.println("ddsgdgsdg::"+adapt_obj.city_code_array[a]);
        System.out.println("value o ftagagdsgsdg:inside for loop::" +tag.toString());

        if(tag.toString() == adapt_obj.city_code_array[a]){
            ((Button)view).setFocusable(true);
            //clicked = false;

            // Calling process to fetch the data of city 
            selectedcityidclicked(tag.toString(), view);
            ((Button)view).setSelected(true);

            /*Drawable dr = getResources().getDrawable(R.drawable.location_btn_active_1);// active
            Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
            // Scale it to 50 x 50
            // Set your new, scaled drawable "d"
            ((Button)view).setBackgroundDrawable(new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 10, 10, true)));*/
           // ((Button)view).invalidate();
        }
        else if(tag.toString() != adapt_obj.city_code_array[a]){

            /*((Button)view).setFocusable(true);
            selectedcityidclicked(tag.toString(), view);
            Drawable dr2 = getResources().getDrawable(R.drawable.location_btn_active_1);// inactive
            Bitmap bitmap2 = ((BitmapDrawable) dr2).getBitmap();
            // Scale it to 50 x 50
            Drawable d2 = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap2, 10, 10, true));
            // Set your new, scaled drawable "d"
            ((Button)view).setBackgroundDrawable(d2);
            ((Button)view).invalidate();
            clicked = false;*/
        }
    }

    /*else if(tag.toString() != adapt_obj.city_code_array[a]){
         ((Button)view).setFocusable(true);
        Drawable dr2 = getResources().getDrawable(R.drawable.location_btn_inactive_1);//instead of inactive
        Bitmap bitmap2 = ((BitmapDrawable) dr2).getBitmap();
        // Scale it to 50 x 50
        Drawable d2 = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap2, 10, 10, true));
        // Set your new, scaled drawable "d"
        ((Button)view).setBackgroundDrawable(d2);
        ((Button)view).invalidate();
    }
    else {
        Drawable dr2 = getResources().getDrawable(R.drawable.location_btn_active_1);//white
        Bitmap bitmap2 = ((BitmapDrawable) dr2).getBitmap();
        // Scale it to 50 x 50
        Drawable d2 = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap2, 10, 10, true));
        // Set your new, scaled drawable "d"
        ((Button)view).setBackgroundDrawable(d2);
        ((Button)view).invalidate();
    }*/

    /*((Button) view).setText("*");
    //selectedcityidclicked(tag.toString());
    ((Button) view).setEnabled(false);*/
}
private void DeselectButtons() {
    // TODO Auto-generated method stub
    for(int x=0; x<adapt_obj.city_code_array.length;x++){ 
        System.out.println("value of enable tag::" +enablebutton);
        System.out.println("valuie dofdsf xxx:::" +x);
        if (enablebutton!= x)
            //What should i do here as i had to take the un clicked button as set selected as false //
            // ((Button)view).setSelected(false);
            //this.findViewById(i).setSelected(false);
            //this.findViewById(i).setSelected(false);
    }
}
private void selectedcityidclicked(String cityval, View view) {
     cityidvalue = "&city_code="+cityval;
     System.out.println("value of cityidvalue::" +cityidvalue);

     new MyAsyncTask(view).execute();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:27:58.160

您可以将此选择器用作按钮的可绘制对象，当您单击它或将其选中时，它将更改其可绘制对象。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/home_hover"></item>
    <item android:state_selected="true" android:drawable="@drawable/home_selected"></item>
    <item android:drawable="@drawable/home"></item>
</selector> 
```

为了使其他按钮未选中，您需要循环它们，例如将所有按钮置于线性或相对布局中，而不是在通过其子项获取该相对布局循环的引用并查看它们的标签之后。如果它们等于您想要取消选择的按钮标签，而不是调用该按钮的 setSelected(false)。

```
private void DeselectButtons() {
    LinearLayout layout = findViewById(R.id.parent_ofbuttons);
    for(int i=0; i<layout.getChildCount(); i++) {
         Button btn = (Button)layout.getChildAt(i);  
         if(btn.getTag().toString().equals("100")) {
              btn.setSelected(false);
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:38:49.200

创建一个通常是 xml 的选择器 xml

在项目中为 android:state_pressedpressed="true" 和 android:state_pressed="false" 设置图像

my_button_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/button_pressed_image"></item>
    <item android:state_pressed="false" android:drawable="@drawable/button_normal_image"></item>
</selector> 
```

然后将此文件保存在您的drawable中，然后将您的按钮背景设置为此文件

作为`myButton.setBackgroundResourceId(R.drawable.my_button_background);`

## -----------------------------------------

已编辑

```
button1.setOnClickListener(this);
button2.setOnClickListener(this); 
```

现在在你的覆盖 onClick

```
@Override
OnClick(View v)
{
   if(v.getId() == R.id.button1_id)
   {
      button1.setBackgroundResource(R.drawable.anyImage1);
      button2.setBackgroundResource(R.drawable.anyImage2);
   }
   else
   {
 if(v.getId() == R.id.button1_id)
   {
      button1.setBackgroundResource(R.drawable.anyImage2);
      button2.setBackgroundResource(R.drawable.anyImage1);
   }
   }
} 
```

不要忘记声明 button1 和 button2 成员变量

# c# - 更改显示（UI）/项目的顺序 Observable Collection

> ID：10206394
> 
> 赞同：3
> 
> 时间：2012-04-18T09:18:38.227
> 
> 标签：c#, .net, wpf

编辑＃2：

```
 public void ReverseOrderRegBtns()
    {
        ICollectionView view = CollectionViewSource.GetDefaultView(GlobalObservableCol.regBtns);
        view.SortDescriptions.Add(new SortDescription("ReverseOrder", ListSortDirection.Ascending));
        view.Refresh();
    } 
```

不太确定如何将 ICollectionView 放入其中，它还会中断正在执行某些逻辑的计时器。出于某种原因，它打断了我在创建按钮时开始计数的时间。

*我的应用程序有几个计时器，因此创建的按钮每隔 x 秒就会更新一次可能的新内容。*

编辑：

数据绑定如下所示：

```
<ListBox x:Name="lbRegistration" ItemsSource="{Binding regBtnsReverse, ElementName=Window}" Background="{x:Null}" 
```

**旧：** public ObservableCollection RegBtns { get { if (GlobalObservableCol.regBtns == null) { return new ObservableCollection(); } 返回 GlobalObservableCol.regBtns; } }

**新的（不再有效），相反的在 ObserableCol 类中**

```
public IEnumerable<RegistrationButton> RegBtns
        {
            get
            {
                return GlobalObservableCol.regBtnsReverse;
            }
        } 
```

我在 ObservableCollection 列表可用的静态类中创建了 IEnumerable。

*当我的数据绑定是 IENumerable 时，我似乎无法绑定。如何将位于其他类中的 NumbersReverse 方法绑定到我的 MainWindow.xls？*

* * *

我有一个 ObservableCollection 包含自定义样式的 WPF 按钮。

这些项目被动态创建并添加到自定义滑块控件（列表框）上。例如按钮 1、按钮 2、按钮 3、...

我想要的**恰恰相反**。

*例如按钮 3、按钮 2、按钮 1。* 这听起来像一个链表，但我的整个应用程序已经在整个逻辑中使用了这个 Observable Collection。

当按钮显示在 UI 中时，最后添加的按钮应作为我的滑块（即列表框控件）上的第一项放置。

我到底怎么才能做到这一点？

谢谢，彼得P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:30:01.207

```
<ListBox ItemsSource="{Binding Foo}"/>

private ObservableCollection<RegButtton> RegBtns = new...;

public ICollectionView Foo { get; set; }

Foo = CollectionViewSource.GetDefaultView(RegBtns);
Foo.SortDescriptions.Add(new SortDescription("SomePropertyName", ListSortDirection.Ascending));
Foo.Refresh(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:27:59.610

在您的代码中的某处应该有`myCollection.Add( someButton )`.

替换它，`myCollection.Insert( 0, myButton )`你就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:28:20.320

不知道你用的是什么框架。我会在我的视图模型中做类似的事情：

```
public ObservableCollection<int> Numbers { get; private set; }
public IEnumerable<int> NumbersReverse
{
    get
    {
        return Numbers.Reverse();
    }

} 
```

我会使用 NumbersReverse 作为数据源：

```
<ListBox Name="listBox1" ItemsSource="{Binding NumbersReverse}"/> 
```

当然，还有很多其他方法可以做到这一点。你必须弄清楚在你的情况下什么是最好的......

编辑：例如，如果您出于任何其他目的不关心项目的顺序，那么 stijn 提供的解决方案要好得多。

# android - RelativeLayout 宽度需要与其中最大的图像相同的宽度

> ID：10206398
> 
> 赞同：0
> 
> 时间：2012-04-18T09:18:56.960
> 
> 标签：android, android-relativelayout

我有包含不同相对布局和视图层的相对布局。在一个子相对布局中，我添加了尺寸为 2400*480、1600*480 和 920*480 的图像。现在我希望这些图像保持原始大小，但是当我将它们添加到相对布局时它们会缩小以适应屏幕的宽度和高度，并且它们在缩小时也会保持纵横比。下面是我的 XML 和添加 ImageViews 的代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
        /* Some other layouts */
    <RelativeLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"                      
        android:id="@+id/parallaxLayers"        
        android:visibility="gone">      
    </RelativeLayout>
    /* Viewgroup */    
</RelativeLayout>

RelativeLayout parallaxLayout = (RelativeLayout)findViewById(R.id.parallaxLayers);

private void addParallaxLayers() {
        // TODO Auto-generated method stub
        InputStream s1 = getResources().openRawResource(R.drawable.parallax_layer1);
        InputStream s2 = getResources().openRawResource(R.drawable.parallax_layer2);
        InputStream s3 = getResources().openRawResource(R.drawable.parallax_layer3);
        InputStream s4 = getResources().openRawResource(R.drawable.parallax_layer4);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        System.gc();
        bitmap = bitmap(s1);
        layer1Back = new ImageView(this);       
        layer1Back.setImageBitmap(bitmap);
        parallaxLayout.addView(layer1Back, 0, lp);
        try {
            s1.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        bitmap = null;
        s1 = null;
        System.gc();

        bitmap = bitmap(s2);
        layer2Back = new ImageView(this);
        layer2Back.setImageBitmap(bitmap);
        parallaxLayout.addView(layer2Back, 1, lp);
        try {
            s2.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        bitmap = null;
        s2 = null;
        System.gc();

        bitmap = bitmap(s3);
        layer3Back = new ImageView(this);
        layer3Back.setImageBitmap(bitmap);
        parallaxLayout.addView(layer3Back, 2, lp);
        try {
            s3.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        bitmap = null;
        s3 = null;
        System.gc();

        bitmap = bitmap(s4);
        layer4Back = new ImageView(this);
        layer4Back.setImageBitmap(bitmap);
        parallaxLayout.addView(layer4Back, 3, lp);
        try {
            s4.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        bitmap = null;
        s4 = null;
        System.gc();
    } 
```

即使必须调整相对布局的大小，如何使这些图像适合其原始大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:24:34.613

为每个 ImageView 尝试这一行：

```
 layer2Back.setScaleType(ScaleType.FIT_XY); 
```

我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:27:09.853

我认为更像是这样：

```
layer2Back.setScaleType(ScaleType.FIT_CENTER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:09:13.483

我最终使用带有框架布局的 Horizo​​ntalScrollView 来将图像视图相互放置。

```
<HorizontalScrollView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:fadingEdge="none">
            <FrameLayout android:layout_width="wrap_content"
                android:layout_height="fill_parent"                   
                android:id="@+id/parallaxLayers"        
                android:visibility="gone">      
            </FrameLayout>
        </HorizontalScrollView> 
```

# c# - 如何从 WPF 控件访问 windows 窗体控件？

> ID：10206412
> 
> 赞同：0
> 
> 时间：2012-04-18T09:19:35.500
> 
> 标签：c#, wpf

我需要根据 WPF 控件中的事件在表单中显示控件。

```
TheBoard theBoard = new TheBoard();
theBoard.keyboard.Visible = true; 
```

即使我写：

```
theBoard.Close(); 
```

什么都不会发生，如果有人可以给我一个解决方案，请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:32:23.410

您可以从 WPF 控件引发事件并在 Windows 窗体控件中订阅该事件。这是一个链接，可以为您提供可行的方法。

[http://www.a2zdotnet.com/View.aspx?Id=79#.T46J5bN-WUI](http://www.a2zdotnet.com/View.aspx?Id=79#.T46J5bN-WUI)

# google-apps - 允许使用 SPF 记录从域发送邮件

> ID：10206413
> 
> 赞同：1
> 
> 时间：2012-04-18T09:19:43.943
> 
> 标签：google-apps, spf

我对 SPF 记录有疑问。

我的一个客户的网站（例如 www.example.com）有一个联系表格，可以将邮件发送到contact@example.com。

我们只提供网站的托管，因此我们不管理电子邮件帐户、DNS 记录等......只有网络空间。所以我的客户管理 DNS 设置、名称服务器、邮件服务器等。

邮件是使用PHP 发送的，但contact@example.com 从未收到它们。当我将contact@example.com 更改为域外的电子邮件地址时，例如contact@test.com，我确实收到了联系电子邮件。

我的结论是他们的邮件服务器阻止了来自我们 IP 地址的邮件，因为 PHP 将邮件发送到具有相同域但具有另一个 IP 的电子邮件地址。

此外，我的客户使用 Google Apps 发送电子邮件，因此其 DNS 服务器上的 MX 记录指向 Google。

我该如何解决这个问题？我的客户是否需要添加接受我们 IP 地址的 SPF 记录？如果是这样，那么正确的 SPF 语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T20:35:16.120

如果您的域定义了 SPF 记录，那么您需要将 Web 服务器的地址添加到 SPF 记录中。您可以在这个网站上查看该域的 SPF 记录：http: [//spf.myisp.ch](http://spf.myisp.ch)

最好的方法是检查 Web 服务器或接收方服务器上的日志文件，以找出问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T02:38:35.310

确保 cpanel 没有任何 MX 记录，因为您没有托管 dns

# sencha-touch-2 - Sencha Touch 2.0.0 包含图像、表单和评论列表的视图

> ID：10206415
> 
> 赞同：0
> 
> 时间：2012-04-18T09:19:49.867
> 
> 标签：sencha-touch-2

我想创建一个视图，该视图首先包含一个图像部分，其中图像可以动态出现，然后是一个我可以向该图像添加评论的表单，最后我想在此容器中添加与该图像相关的评论列表。

请给我一些建议，我该如何构建这样的视图。

我必须创建三个单独的视图。

第一个图像部分（我应该使用什么样的扩展使其能够显示图像）

第二个表单面板（我使用扩展：“Ext.form.Panel”）

第三个评论部分（我使用了extend：“Ext.dataview.List”）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:32:54.397

*   您应该将图像部分构建为**Ext.Image** ( `xtype:'image'`)
*   包含 3 个部分的容器应具有如下配置：`layout: 'vbox'`. 这将垂直排列您的子组件。
*   如果您希望列表正确呈现，只需为其设置一些配置，`scrollable: false`或者如果它是可滚动的，请手动添加`maxWidth`配置。无论如何，`scrollable: false`更简单，让我们尝试一下。

希望能帮助到你。

# csv - 如何使用 awk 在 CSV 文件的一列中搜索完全匹配的文本并仅输出第一个匹配行？

> ID：10206418
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:03.560
> 
> 标签：csv, awk

我正在使用[如何限制 grep 仅搜索 CSV 文件中的一列，但输出完整匹配行的答案？](https://stackoverflow.com/questions/10118468/how-to-restrict-grep-to-search-only-the-one-column-within-a-csv-file-but-to-out)用 awk 搜索特定的列，然后输出匹配的行，例如：

```
awk -F@ "{if (\$2 ~ /$find_me/ ) { print \$0; } }" <input_file> 
```

*   如何将搜索限制为仅匹配列`$find_me`完全匹配的行？
*   如何将搜索限制为仅输出在文件中找到的第一个匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:46:10.630

你可以试试这个：

```
awk -F@ -v pattern="$find_me" '$2 ~ "^" pattern "$"' input.txt 
```

或者

```
awk -F@ -v pattern="^$find_me\$" '$2 ~ pattern' input.txt 
```

# url - 当访问者点击另一个域时检测目标 URL

> ID：10206419
> 
> 赞同：1
> 
> 时间：2012-04-18T09:20:04.523
> 
> 标签：url, redirect, detect

我想检测访问者是否点击了我的网页上的链接，该链接将访问者重定向到另一台服务器。有可能检测到这个吗？我应该这样做跟踪我的网关流量吗？

# php - PHP Mongo光标悬停在文档中的数据子集上？

> ID：10206423
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:14.077
> 
> 标签：php, mongodb, cursor, database

我有一个 Mongo 文档，其中一个字段包含大量数据，例如`achievements`在以下文档中：

```
{'id':12345,'name':'eric','achievements':['...','...','...']} 
```

有什么办法可以*用 cursor*`achievements`自己返回 PHP 中的字段，而不是将整个字段加载到内存中？当此字段非常大（超过一百万个项目）时，它会使用*大量*内存。

 **我已经尝试过`->find(['id'=>new MongoId('12345')],['achievements'])`语法，但是，整个`achievements`字段作为数组加载到内存中。理想情况下，我希望光标一次加载一项成就。这甚至可能吗？似乎是一个很酷的功能......

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:44:23.020

不，MongoDB 默认会返回完整的文档。正如您所建议的，您可以使用字段选择来限制返回的字段，对于数组，您可以使用`$slice`运算符仅检索数组的子集。但是，这样做时，获取数组的“下一个”切片需要新的查询和完整的网络往返。

另外两个注意事项：

1.  在 MongoDB 2.1（以及即将到来的 2.2 稳定版本）中，您可以使用[聚合框架](http://www.mongodb.org/display/DOCS/Aggregation+Framework)`$unwind`中的操作符来模拟这种行为；但是，请注意，在 2.2 中，聚合框架将始终将结果作为具有嵌套数组的单个文档返回，因此这仍然无法帮助您避免内存问题。

2.  我会强烈考虑在这里更改您的数据模型。如您所见，“数百万个元素”的数组将导致大型文档（MongoDB 的文档大小上限为 16MB）并增加应用程序代码的开销。有关如何对此建模的一些替代想法，请查看[Schema Design at Scale](https://www.10gen.com/presentations/mongosf2011/schemascale)，它涵盖了与您在此处描述的非常相似的数据模型用例。**

# python - 要实现的场景，认为 awk 最适合这种情况

> ID：10206431
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:20:27.810
> 
> 标签：python, linux, shell, awk

我有以下我需要的场景。

我有两个非常大的文件，它们的行数以千万计，而没有。每个文件中的行数相同。我认为 awk 是一个有用的工具，我可以使用它加入两个文件，其中包含一些条件。请建议。

```
File1
# header1, header2, header3, header4
1,2,3,4
11,12,13,14
21,22,23,24
31,32,33,34
41,42,43,44

File2
a   d  e  f
a   f  g  h
b   p  q
33  b  p  q
43  b  x  y

Final Output
1, 2, 3, 4, a, d, e, f
11, 12, 13, 14, a, f, g, h
21, 22, 23, 24, b, p, q
31, 32, 33, 34, b, p, q
41, 42, 43, 44, b, x, y 
```

file1、file2之间其实是有联系的。从file1的每一行收集很少的header，并基于一些小工具file2生成。所以对于file1中的每一行，file2的同一行中都有一些信息。现在我想加入这两个文件，如下逻辑。

file2 的第一个条目包含 'a'、'b' 或基于此的 file1 的标题 3，如果它包含 'a' 或 'b'，那么我们将这些行按“1、2、3、4、a、d , e, f"

如果 file2 的条目有 file1 的 header3，那么我们按原样加入 "31, 32, 33, b, p, q"

所有字段都必须用逗号分隔。并且输出必须转储到其他文件中。

我也可以在 python 中做同样的事情，但是循环处理需要太多时间，因为文件太大，并且涉及很多 python 解释时间。所以我认为 awk 会是更好的工具来完成这样的任务.

请建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:21:53.873

```
paste -d, <(tail -n+2 File1) <(awk -vOFS=, '
{
    $1 = ($1 !~ /^(a|b)$/) ? "" : $1
}1' File2) | tr -s , 
```

* * *

```
1,2,3,4,a,d,e,f
11,12,13,14,a,f,g,h
21,22,23,24,b,p,q
31,32,33,34,b,p,q
41,42,43,44,b,x,y 
```

*   **`paste <(commandA)`<(commandB)**将两个进程的输出组合在一起；
*   我**`cond ? YES : NO`**在`awk`命令中使用而不是**`if...else...`**;
*   **`tr -s`**将转换`,,`为`,`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:10:10.790

基本思想应该是将行与 连接在一起`paste`，然后使用 更正重复的标题`awk`。

我假设它`file2`有制表符分隔的字段。试试这个管道：

```
grep -v '^#' file1.csv \
| tr ',' '\t' \
| paste - file2.tsv \
| awk -v OFS="," '
    $3==$5 { print $1,$2,$3,$4,$6,$7,$8; next } 
    { $1=$1; print }' 
```

使用提供的示例数据，这会产生：

```
1,2,3,4,a,d,e,f
11,12,13,14,a,f,g,h
21,22,23,24,b,p,q
31,32,33,34,b,p,q
41,42,43,44,b,x,y 
```

# c++ - 如何在我的桌面上创建 Internet 链接？

> ID：10206434
> 
> 赞同：1
> 
> 时间：2012-04-18T09:20:33.933
> 
> 标签：c++, windows, winapi

是否有一些 API 可以在我的桌面上创建指向[http://www.google.com](http://www.google.com)的链接？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T09:28:51.733

从来没有这样做过，但试试这个：

在桌面上手动创建链接。给它一个名字，以及链接本身。然后导航到您的桌面目录，通常在里面`c:\documents and settings\<user>\Desktop`并搜索您输入的链接。在我的电脑上，它是一个 .url 文件。打开该文件并查看其内容。

然后尝试以编程方式在 Desktop 目录中创建这样的文件。这是一个黑客，但可能会奏效。

# sql - 根据优先级选择记录所需的 SQL

> ID：10206435
> 
> 赞同：-3
> 
> 时间：2012-04-18T09:20:35.013
> 
> 标签：sql, oracle

我想要一个从以下数据中选择记录的查询：

条件：仅选择组中优先级最高的记录（COB，CUR1，CUR2）。图例：1 为最高优先级，3 为最低优先级。

```
KEY     COB         CUR1    CUR2    RATE        PRIORITY
------  --------    -----   ----    --------    --------
46051   3/9/2012    AUD     USD     1.0573      1
44392   3/9/2012    AUD     USD     1.06195     2
43122   3/9/2012    AUD     USD     1.06585     3
44394   3/9/2012    BMD     USD     1.0000      2       
44395   3/9/2012    BSD     USD     1.0000      2       
46052   3/9/2012    BWP     USD     0.13875     1
44402   3/9/2012    BWP     USD     0.13925     2
46053   3/9/2012    DKK     RON     0.5859      1
44406   3/9/2012    EUR     CSD     110.62      2
46090   3/9/2012    EUR     USD     1.3109      1
44434   3/9/2012    EUR     USD     1.31185     2
43154   3/9/2012    EUR     USD     1.32556     3
44436   3/9/2012    FJD     USD     0.564       2
43156   3/9/2012    FJD     USD     0.5686      3
46092   3/9/2012    FKP     USD     1.51195     1
44437   3/9/2012    GBN     USD     1.6339      2
43185   3/9/2012    GBP     USD     1.57985     3 
```

输出应该是：

```
KEY     COB         CUR1    CUR2    RATE        PRIORITY
------  --------    -----   ----    --------    --------
46051   3/9/2012    AUD     USD     1.0573      1
44394   3/9/2012    BMD     USD     1.0000      2       
44395   3/9/2012    BSD     USD     1.000       2       
44402   3/9/2012    BWP     USD     0.13925     2
46053   3/9/2012    DKK     RON     0.5859      1
44406   3/9/2012    EUR     CSD     110.62      2
46090   3/9/2012    EUR     USD     1.3109      1
44436   3/9/2012    FJD     USD     0.564       2
46092   3/9/2012    FKP     USD     1.51195     1
44437   3/9/2012    GBN     USD     1.6339      2
43185   3/9/2012    GBP     USD     1.57985     3 
```

请提供您的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:29:52.480

像这样的东西：

```
WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY 
                          COB,CUR1,CUR2 ORDER BY PRIORITY) AS RowNbr,
        t.*
    FROM
        Table1 AS t
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:32:17.737

你可以用分析函数做到这一点

```
select max(key) keep (dense_rank first order by PRIORITY) as key,
       cob,cur1,cur2,
       max(RATE) keep (dense_rank first order by PRIORITY) as RATE,
       max(PRIORITY) keep (dense_rank first order by PRIORITY) as PRIORITY,
from your_table
group by cob,cur1,cur2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:28:50.140

查询太常见也太简单了：

```
select * 
from table 
where (COB, CUR1, CUR2, PRIORITY) in 
    (select COB, CUR1, CUR2, min(PRIORITY)
     from table
     group by COB, CUR1, CUR2) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T10:27:53.807

你可以试试这个

```
SELECT DISTINCT *
  FROM SO_BUFFER_TABLE_4 BT4
 WHERE BT4.KEY = (SELECT DISTINCT BT4_1.KEY
                    FROM SO_BUFFER_TABLE_4 BT4_1
                   WHERE BT4_1.COB = BT4.COB
                     AND BT4_1.CUR1 = BT4.CUR1
                     AND BT4_1.CUR2 = BT4.CUR2
                     AND BT4_1.PRIORITY =
                         (SELECT DISTINCT MIN(BT4_2.PRIORITY)
                            FROM SO_BUFFER_TABLE_4 BT4_2
                           WHERE BT4_2.COB = BT4.COB
                             AND BT4_2.CUR1 = BT4.CUR1
                             AND BT4_2.CUR2 = BT4.CUR2))
 ORDER BY BT4.CUR1 
```

希望能帮助到你

# php - 安全清单

> ID：10206437
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:39.310
> 
> 标签：php, apache, security

我正在寻找一个安全检查列表，以便在发布每个站点之前检查它，即如何保护您的服务器，请分享您的经验，我将我的网站托管在私人 vps 上，没有任何托管面板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-18T09:38:19.167

如果您在没有面板的情况下将站点托管在 VPS 或云上，那么您也必须管理操作系统层。它基本上归结为一些好的做法：公开最低限度的服务，特别是用于管理，使用堡垒访问您的服务器，定期更新，订阅安全新闻频道，检查 SSL 设置。

我们最近发表了这篇文章，您可能会觉得它有用：[https ://www.exoscale.ch/syslog/2016/02/12/wet-your-feet-with-security/](https://www.exoscale.ch/syslog/2016/02/12/wet-your-feet-with-security/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:09:57.683

您的问题有两部分，一部分与编程相关，另一部分与编程无关（这就是您投反对票的原因，因为您专门询问了第二部分）。首先，您需要保护您的实际代码/应用程序免受基于应用程序的攻击。其次，您需要保护您的服务器和部署。

第二个问题，关于如何保护您的服务器，与编程无关，也不属于 SO。您可以为此尝试 serverfault.com。

对于第一个问题，如何正确保护您的实际应用程序，这需要对安全开发方法进行大量培训。但是，**至少**您应该熟悉 OWASP 十大常见 Web 应用程序漏洞列表，并且您应该特别确保您的应用程序不会受到任何漏洞的攻击。此列表可在[OWASP 网站上找到](https://www.owasp.org/index.php/Category%3aOWASP_Top_Ten_Project)。研究此列表，分析您的应用程序，并针对这些问题部署缓解措施。OWASP 网络空间中还提供了有关如何执行此操作的深入指导 - 使用它。

# matlab - 用于文档二值化的 Niblack 算法

> ID：10206441
> 
> 赞同：13
> 
> 时间：2012-04-18T09:20:45.293
> 
> 标签：matlab, image-processing, signal-processing

我有这张照片：

![在此处输入图像描述](../Images/cc280d322e5f5dc0d53855ae7791c19b.png)

我正在尝试使用 niblack 算法进行文档二值化我已经实现了简单的 Niblack 算法

T = mean + K* standardDiviation

这就是结果：

![在此处输入图像描述](../Images/a71bc3b966b29fb824b80d610c7f5d83.png)

问题是图像的某些部分中窗口不包含任何对象，因此它将噪声检测为对象并对其进行详细说明。

我尝试应用模糊过滤器，然后应用全局阈值，结果是：

![在此处输入图像描述](../Images/9eeca62b7f11f23a1b373229a7b15bdb.png)

这不会被任何其他过滤器解决，我想唯一的解决方案是如果窗口没有对象，则阻止算法检测全局噪声

我有兴趣使用 niblack 算法而不是使用其他算法来做到这一点，所以有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T23:22:18.293

我在这篇论文中尝试了 sauvola 算法[Adaptive document image binarization J. Sauvola*, M.](http://www.mediateam.oulu.fi/publications/pdf/24.p) PietikaKinen 第 3.3 节

它是 niblack 算法的修改版本，它使用修改后的 niblack 方程 ![在此处输入图像描述](../Images/d10798f34a28202e48a79ed7f58d05aa.png)

它返回了一个很好的答案： ![在此处输入图像描述](../Images/f53bedca1e0a3f9c75e65f154ea7162c.png)

以及我尝试了 Niblack 的另一种修改，该修改在[本文](http://users.iit.demokritos.gr/~bgat/ICDAR2009DIBCO.pdf) 的 5.5 算法 No. 9a 中实现：法国 INSA 里昂大学（C. Wolf，JM Jolion）

这也返回了一个很好的结果：

![在此处输入图像描述](../Images/8deecde33584e81d0b07242c619f6964.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T14:08:48.730

你看过这里吗：[https ://stackoverflow.com/a/9891678/105037](https://stackoverflow.com/a/9891678/105037)

```
local_mean = imfilter(X, filt, 'symmetric');
local_std = sqrt(imfilter(X .^ 2, filt, 'symmetric'));
X_bin = X >= (local_mean + k_threshold * local_std); 
```

如果您坚持使用 niblack，我在这里看不到很多选择。您可以更改过滤器的大小和类型以及阈值。

顺便说一句，您的原始图像似乎有颜色。此信息可以显着改善黑色文本检测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-19T17:27:21.820

在这种情况下，有多种方法可以提供帮助：

1.  当然，您可以自行更改算法 =)
2.  也可以只应用形态过滤器：首先在窗口中应用最大值，然后是最小值。您应该调整窗口大小以获得更好的结果，请参阅[wiki](https://en.wikipedia.org/wiki/Mathematical_morphology)。
3.  您可以选择最难但更好的方法，并尝试改进 Niblack 的方案。如果标准差小于某个固定数字（应调整），则有必要增加 Niblack 的窗口大小。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-10-14T20:50:43.767

我使用优化尝试了 k=-0.99 和 windows=990 的 niblack 算法：

> Shafait –“使用积分图像有效实现局部自适应阈值技术”，2008

其中：T = mean + K* standardDiviation；我有这个结果：

[![在此处输入图像描述](../Images/cd73290f81cf04f956d2fb387b71c8b8.png)](https://i.stack.imgur.com/c0Aoi.jpg)

算法的实现取[在这里](https://artificode.com/product/image-binarization-using-niblack-thresholding-algorithm/)

# android - 在应用于活动的缩放动画期间背景中的黑屏是否可以着色

> ID：10206442
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:20:50.317
> 
> 标签：android, android-animation, android-lifecycle

我在活动打开时将比例动画应用于我的活动。所以可以给黑色背景一个颜色。由于先前的活动暂停，所以有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:36:19.200

尝试将背景设置为活动的窗口，例如

```
getWindow.setBackgroundDrawable(new ColorDrawable(0xffff0000)); 
```

# thrift - Apache Thrift：如何在服务器端检查客户端是否还活着？

> ID：10206443
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:52.797
> 
> 标签：thrift, thrift-protocol

我有一个用 Java 编写的节俭客户端和一个用 C++ 编写的节俭服务器。假设客户端通过 Thrift 接口调用 C++ 服务器上的耗时函数。在这种情况下，假设客户端在服务器完成这个耗时函数的执行之前就死掉了。thrift API 中是否有句柄或函数来检查服务器代码中客户端是否处于活动状态，以便服务器可以在尝试向已经死亡的客户端发送响应之前采取一些预防措施。谢谢。

简而言之，我的问题是我们可以在服务器中确定调用客户端是否还活着吗？thrift API 中是否有用于此目的的句柄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:44:48.383

你看过[TMonitoredServerSocket](http://twitter.github.com/commons/apidocs/com/twitter/common/thrift/monitoring/TMonitoredServerSocket.html)吗？

您还可以查看[TServerEventHandler 和 TProcessorEventHandler](https://issues.apache.org/jira/browse/THRIFT-1195)挂钩。

# actionscript-3 - AS3 3D 补间不工作

> ID：10206444
> 
> 赞同：1
> 
> 时间：2012-04-18T09:20:56.027
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

我有一个在 Flash 中创建的动画，我使用 3d 补间改变了许多角度和旋转超过 60 帧，播放这个动画本身就可以正常工作，“雪屏是 3d 补间”下面是对象旋转

![在此处输入图像描述](../Images/c1e18c53b8d356fce05f522dba81d5ab.png)

当我将此 SWF 加载到另一个主 SWF 中时，会忽略 3d 补间。问题如下![在此处输入图像描述](../Images/054d3e6da57dadfac0adab869f277855.png)

我希望有人能解释这是否是某种故障。我已经导出到不同的闪存版本并创建了不同的加载器类来尝试找到解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:01:38.493

我以前遇到过这种情况，它杀死了我。如果将一个 3D 补间加载到不同的 SWF 中，则父 SWF 将控制视角（至少从 Flash 10 播放器开始，每个 SWF 只能有一个视角）。您需要在加载的 SWF 和父 SWF 中设置相同的透视值。Flash 3D 的这一方面让我非常反感，我根本不再使用该功能。这甚至适用于动态父级在一起的不同资产。

# objective-c - 创建 JSON 字符串

> ID：10206445
> 
> 赞同：1
> 
> 时间：2012-04-18T09:20:57.960
> 
> 标签：objective-c, ios5

我的任务涉及在从 Web 服务获得响应之前为 JSON 字符串创建正确的设计。JSON 字符串必须如下所示：

```
{"nid":"","vocab":"", "inturl":"testoverview", "mail":"", "md5pw":""} 
```

我的 JSON 字符串如下所示：

```
"nid:",
"vocab:",
"inturl:testoverview",
"mail:",
"md5pw:" 
```

如您所见，它的构建方式不同，我没有使用大括号，也没有以正确的方式分隔字符串。我不知道该怎么做。

我的代码在这里：

```
NSString *nid = @"nid:";
NSString *vocab = @"vocab:";
NSString *inturl = @"inturl:testoverview";
NSString *mail = @"mail:";
NSString *md5pw = @"md5pw:";

NSArray *jsonArray = [NSArray arrayWithObjects:nid, vocab, inturl, mail, md5pw, nil];
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonArray options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

FSProductTestHandler *handler = [[FSProductTestHandler alloc] init];

if (!jsonData) {
    NSLog(@"Got an error; %@", error);
} else if(jsonData) {

    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    NSString *url = @"http://www.taenk.dk/services/mobile";
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLCacheStorageAllowed timeoutInterval:30.0];

    [request setValue:jsonString forHTTPHeaderField:@"X-FBR-App"];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:39:43.473

您正在为序列化提供一个数组，这意味着您将获得一个 JSON 数组作为输出，例如：

```
[ "foo", "bar", "baz"] 
```

（注意括号`[ ...]`而不是大括号`{ ... }`）

您需要构建一个 NSDictionary 并且对于您的特定示例，最快的方法是这样的：

```
NSDictionary* dictionary = [NSDictionary dictionaryWithObjectsAndKeys: 
                                @"", @"nid",
                                @"", @"vocab",
                                @"testoverview", @"inturl",
                                @"", @"md5pw", 
                                @"", @"mail",
                                nil]; 
```

把它喂进去`NSJSONSerialization`，你就会得到你想要的。

# java - 读取属性文件时找不到文件异常

> ID：10206447
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:58.863
> 
> 标签：java, file, filenotfoundexception

```
 public boolean  WriteProperty(String key,String value){
            try{  
                    int check=0;
                    while(check == 0){
                check=1;

                Properties pro = new Properties();

                File f = new File("/properties/IxFbConfiguration.properties");
                if(!f.exists()){
                  check=0;
                  System.out.println("File not found!");
                }
                else{
                  FileInputStream in = new FileInputStream(f);
                  pro.load(in);
                  System.out.print("Enter Key : ");
                  System.out.print("Enter Value : ");
                  pro.setProperty(key, value);

                  System.out.println("the property is"+pro.getProperty(key));
                 // pro.store(new FileOutputStream(str + ".properties"),null);
                  pro.store(new FileOutputStream("/properties/IxFbConfiguration.properties"),null);
                  System.out.println("Operation completly successfuly!");
                }
              }
            }
            catch(IOException e){
            System.out.println(e.getMessage());
            }
            return false;
          } 
```

运行此代码时出现文件未找到异常。

我确实有一个包含该`IxFbConfiguration.properties`文件的文件夹属性。当我将完整路径硬编码为 **C:\Documents and Settings\meenakshib.DCKAP-066\Desktop\xblitzjApril18\properties\IxFbConfiguration.properties** 时，它可以工作。

但是当我使用罐子时我遇到了问题。我尝试使用

```
 getClass().getResourceAsStream("/properties/IxFbConfiguration.properties") 
```

也，但它说路径无法识别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:41:05.813

恕我直言，使用带有静态值（路径）的 new File(....) 不是访问文件的正确方法

如果您希望此代码在您的 IDE、服务器和不同环境中运行，则文件的路径应为：

可以配置，也可以是绝对路径（Windows 环境中的 C:/ 等）

或者，在类路径中

# java - Java MIDI 声音被剪辑

> ID：10206448
> 
> 赞同：0
> 
> 时间：2012-04-18T09:20:59.113
> 
> 标签：java, audio, osx-lion, midi, javasound

我一直在尝试为我用 Java 制作的游戏使用 MIDI 文件。在此过程中，我遇到了很多问题，不仅因为我对这些东西不熟悉，而且更多是因为在新更新的 Java 中在 Mac OS X Lion 上播放音频文件时出现了错误。无论如何，现在我正在使用 Sequence，它工作得非常好，只是它在结束之前一直被随机剪辑。它停止，然后在几秒钟后继续播放。

我也尝试过使用`AudioClip`，这会产生类似的结果。（事实上​​它更糟糕，`AudioClip`因为它有时甚至随机更换乐器，我不知道为什么会这样）有**没有**办法让这些 MIDI 文件毫无问题地播放？我一直在寻找并为此提出了很多要求，但我仍然没有得到答案。

# ios - 如何在iphone中录屏

> ID：10206449
> 
> 赞同：-3
> 
> 时间：2012-04-18T09:21:02.110
> 
> 标签：ios, iphone, ipad, ios5

嗨，我正在 iphone 中使用相机集成做一个应用程序。我正在使用 iphone 3gS 进行测试。我的客户想要查看该应用程序，因此他要求我发送一段视频，展示完整的工作流程。由于该应用程序使用相机，我无法在刺激器上运行该应用程序。是否有任何适用于 iphone 的应用程序可以捕获其屏幕。我不想越狱我的 iPhone

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:26:00.360

没有办法在未越狱的 iPhone 上本地录制屏幕。

我想到了两个解决方案：

1.  为什么不直接使用模拟器？当然，它不能拍照，但你可以“操纵”代码来假装拍照，而实际上你使用的是假照片。一定要告诉客户，说明工作流程是一样的。

2.  您可以使用 AirPlay 镜像。打开 Airplay 镜像，它可以流式传输整个 iPhone 屏幕，镜像到[http://www.airserverapp.com/](http://www.airserverapp.com/)等 Mac 服务器。然后记录镜像输出。这个过程有一点延迟，但应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T00:10:13.463

iOS 11 终于可以录屏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T11:37:06.867

iTool 是一款非常不错的录屏工具，专业人士都在用，它也像itunes一样有更多的选择。这是下载链接

[http://itool.en.softonic.com/mac](http://itool.en.softonic.com/mac)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:56:42.190

好吧，如果客户**必须**有视频，您总是可以用数码相机记录实际设备。我知道这个答案听起来像是在嘲笑你，但我不是……这可能是从非越狱设备录制视频的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-06T10:59:51.633

类似于@Adam Wright 的第二点。比实际使用数码相机“更清洁”的方法可能是使用[Reflector](http://www.airsquirrels.com/reflector/)在 Mac 上显示 iOS 设备的屏幕，然后使用 Mac 上的众多免费屏幕录制应用程序之一（例如 QuickTime Player）来录制屏幕的该部分.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-06T12:14:00.253

在 Mac 上打开 QuickTime 并在模拟器上运行应用程序。从文件选项中选择新屏幕录制，然后仅选择选定区域或全屏选项来录制视频。而已！

# paas - 用于商业网站的 Openshift

> ID：10206457
> 
> 赞同：6
> 
> 时间：2012-04-18T09:21:16.360
> 
> 标签：paas, openshift

我们可以将目前免费的 OpenShift Express 用于商业 Web 应用程序吗？

如果没有，那么哪些 PAAS 服务是免费的，并且没有供应商锁定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T15:54:18.830

您可以将 OpenShift Express 用于商业 Web 应用程序，但请确保它能够满足您的要求。潜在问题包括：

*   目前不支持外发电子邮件
*   当前应用程序无法扩展以适应负载
*   1GB 磁盘空间限制
*   共享主机
*   每个应用程序限制 3 个墨盒（数据库、指标等）
*   Red Hat 没有官方支持。文档很好，[社区论坛](https://www.redhat.com/openshift/community/forums/openshift)支持非常活跃。

OpenShift 将满足许多商业站点的要求。我认为这是一个很好的选择。欲了解更多信息，请阅读[常见问题解答](https://www.redhat.com/openshift/community/faq)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T11:38:44.973

Openshift 现在已经打开了 SMTP 端口。检查：[https ://www.redhat.com/openshift/community/blogs/outbound-mail-ports-are-now-open-for-business-on-openshift](https://www.redhat.com/openshift/community/blogs/outbound-mail-ports-are-now-open-for-business-on-openshift)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T12:36:16.810

You can use [Cloudify](http://cloudifysource.org). It is build for orchestrating any application on any Cloud without changing the application code or architecture. Cloudify is opensource and free.

Cloudify offers many features such as pluggable monitoring, scale rules by any KPI, APIs for sharing runtime information between agents and even Chef integration

Due Diligence Im the product manager for Cloudify in GigaSpaces

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T19:02:18.097

我一直将它用于一些小型服务和客户。[使用条款中](https://openshift.redhat.com/community/legal/site_terms)没有任何条款规定您不能将其用作商业网络应用程序。但请注意以下行：

“您不得通过本网站发布或传输广告或商业招揽；与红帽和/或本网站竞争的网站或在线服务相关的宣传材料。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T17:34:26.513

是的，OpenShift 有一个完全免费使用的层，即使对于商业应用程序也是如此。没有计划在未来改变这一点。但是， FreeShift 层有一些[小的限制：](//openshift.com/developers/pricing)

*   缩放限制为 3 个齿轮
    *   服务约 15 页/秒
    *   3GB 总存储空间（每档 1GB）
*   您的自定义域名没有 SSL 证书
*   红帽不支持

* * *

另一种选择是[Heroku](//heroku.com)，如果你还没有的话，你一定要检查一下。两者都使用过之后，我可以告诉你，它是一个更加精致的平台：服务器速度提高了大约 4 倍，你可以运行任意数量的应用程序，而且 Heroku Toolbelt 比 OpenShift 的客户端工具强大得多。在您的数据库中达到 10k 行之前，Heroku 也是完全免费的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T08:52:32.160

RedHat 将在发布其 MegaShift 层时提供支持（和扩展）。（[https://openshift.redhat.com/community/developers/pricing](https://openshift.redhat.com/community/developers/pricing)）我认为这还没有日期。

它不会是免费的。

# r - 所有 R 包的并行编程

> ID：10206460
> 
> 赞同：2
> 
> 时间：2012-04-18T09:21:25.103
> 
> 标签：r, parallel-processing

你知道是否有计划在 R 中为所有包引入并行编程？我知道一些发展，例如 R-revolution 和并行编程包，但它们似乎具有替代最流行功能（线性编程等）的专用功能。然而，R 的一大优点是每天都有大量专门的软件包支持，使复杂且耗时的分析非常容易运行。其中很多使用了广义线性模型等非常流行的函数，但也将结果用于额外的计算和比较，最后整理输出。据我了解，您需要定义函数的哪些部分可以在并行编程中运行，所以这可能是大多数专业 R 包不运行的原因

是否有任何计划（或任何包）使所有最流行的 R 函数能够并行处理，以便包含这些的所有不太流行的函数都可以并行处理运行？例如，difR 包的大部分功能都使用了 glm 功能；如果 glm 包能够在所有多处理器机器的并行处理中运行（或重新编写，然后在新的 R 版本中发布），则不需要重新编写 difR 包，然后可以运行一些借助 Windows PC 上的并行编程，了解其最繁重的程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:12:54.100

我完全同意保罗的回答。

此外，用于并行化的通用系统需要一些非常重要的校准，即使对于那些可以轻松并行化的函数：如果您有一个提供并行计算的多个函数的调用堆栈（例如，您正在引导一些模型拟合，模型拟合可能已经提供并行化并且低级线性代数可以隐式并行）？您需要估计（或手动选择）应该在哪个级别进行显式并行化。此外，您可能有隐式并行化，因此您需要在这些之间进行权衡。

但是，有一种特别简单且通用的方法可以在 R 中隐式并行化计算：通过使用优化的 BLAS，可以显着并行化和加速线性代数。使用它可以（取决于您的系统）就像告诉您的包管理器安装优化的 BLAS 一样简单，R 将使用它。一旦链接到 R，所有使用基本线性代数函数（如 、 等）的包`%*%`都`crossprod`将`solve`受益。

参见例如 Dirk Eddelbüttel 的`gcbd`包及其小插图，以及如何使用 GotoBLAS2 / OpenBLAS 的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:00:52.890

如何并行化某个问题通常并非易事。因此，必须在每种情况下进行特定的实现，在这种情况下，对于每个 R 包。因此，我认为不会在 R 中实现并行处理的一般实现，甚至是不可能的。

# c++ - 自定义矢量模板 - 字符串

> ID：10206467
> 
> 赞同：0
> 
> 时间：2012-04-18T09:21:36.627
> 
> 标签：c++, string, templates, vector

我正在尝试从键盘读取字符串列表到我编写的自定义矢量模板，但是由于某种未知原因，当我尝试写入或读取矢量对象时，程序总是在第二次或第三次输入后崩溃。

注意：作业的重点是编写您自己的自定义向量类，并且不允许我使用 C++ STL 提供的任何功能，例如数组。

编辑：如果我将其设为 int 或 char 向量，一切正常，但它需要完成所有 3 项。

编辑：很明显，我的讲师正试图以某种混乱的方式强迫我们这样做，这与良好的编码实践相去甚远。感谢你们的帮助，但我认为我不会在这里取得任何进展，因为你们都在告诉我要做正确的事，而且很明显我的讲师不想要正确的事情，他想要他认为正确的事情事物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:28:46.367

使用`new`and`delete[]`代替`malloc`and `free`。为什么？

*   `new`并`delete`调用已创建对象的构造函数和析构函数，例如

    ```
    string * str = new string("foo"); 
    ```

    将在堆上创建字符串类型的对象，并返回指向它的指针，并且

    ```
    delete str; 
    ```

    将调用其析构函数，然后释放内存。

*   `malloc`和`free`是 C 的内存管理函数，所以他们不知道构造函数和析构函数。他们所做的只是从堆中获取并返回大块内存，所以如果你尝试：

    ```
    string * str = (string*) malloc(sizeof(string)); 
    ```

    您将获得与字符串对象一样大的未初始化内存块。 **不调用构造函数**。它可能（并且在大多数情况下会）导致错误，因为创建对象的正确操作很可能取决于正确的初始化（你`myvector`是一个很好的例子）。情况`free`是对称的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:30:11.603

When allocating memory for the elements you cannot use `malloc` for non-POD types - you need to call constructor for such type by using `new`. E.g. you cannot `malloc` memory for a `std::string` object and then use `operator=` to copy string (in whatever magical way) to returned address.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:02:26.523

切勿`new/delete`与`malloc/free/realloc`. 而且，`malloc/free/realloc`在非 POD 类型（如`std::string`）上会产生未定义的行为。您的代码很危险，并且没有定义的运行时行为。

^(如果你的老板坚持使用它们，试着教他 C++ 的真正方法，或者接受你的应用程序有一天会崩溃（而且你将很难找到错误），或者*辞掉*工作，或者，如果你有大坚果，去找你的老板老板告诉他)

此外，您有：

```
#include <stdlib.h>
#include <string.h> 
```

如果您指的是`std::string`. 利用

```
#include <cstdlib>
#include <string> 
```

更进一步：您在评论中声明不允许使用标准容器。但是您似乎使用`std::string`, 这是一个容器。

还有一件事：`using namespace std;`在标头中确实是不好的做法，迟早会导致难以调试的名称冲突。

让我再次重申： 在非 POD 类型上**使用`new/malloc/realloc`意味着您的程序会丢失任何已定义的行为。它就像黑洞的地平线。**

# regex - 搜索具有特定条件的字符串

> ID：10206472
> 
> 赞同：1
> 
> 时间：2012-04-18T09:21:57.093
> 
> 标签：regex

我正在搜索包含“a”和“b”的字符串的正则表达式，该字符串具有以下两个属性：1：字符串具有偶数个字符2：字符串可能不包含“aa”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:51:09.630

使用标准（旧）正则表达式是可能的：

`(ab|bb|(ba)*bb)*(ba)*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:08:22.943

怎么样：

```
/(?=^(?:..)+$)(?!aa)(?=.*a)(?=.*b)/ 
```

**解释：**

```
/         : delimiter
          : control there are an even number of char
  (?=     : positive lookahead
    ^     : begining of string
    (?:   : non capture group
      ..  : 2 characters
    )+    : one or more times
    $     : end of string
  )
          : control there aren't aa
  (?!     : negative look ahead
    aa    : aa
  )
          : control there is at least an a
  (?=     : positive lookahead
    .*a   : at least an a
  )
          : control there is at least a b
  (?=     : positive lookahead
    .*b   : at least a b
  )
/         : delimiter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:30:17.917

使用 Perl 兼容的正则表达式可以轻松完成： `^(ab|bb|(ba(?!a)))*$`

基本上它说字符串必须由`ab`, `bb`,`ba`以任何顺序混合的子字符串组成，但`ba`不能跟随另一个`a`字符。

字符串的长度是偶数，因为所有这些子表达式的长度都是偶数。`aa`不能出现在字符串中，因为它出现的唯一方法是在 substring 中`baab`，但是正则表达式特别限制 ba 后面跟`a`.

# javascript - JQuery：如何找出一个元素有多少个孩子？

> ID：10206476
> 
> 赞同：8
> 
> 时间：2012-04-18T09:22:12.983
> 
> 标签：javascript, jquery, dom, find, children

如何使用 jQuery 找出一个元素有多少个子元素？

假设我有以下结构：

```
<div id="container">
   <div id="column1">
      <div id="asset1"></div>
      <div id="asset2"></div>
   </div>
   <div id="column2">
      <div id="asset1"></div>
      <div id="asset2"></div>
   </div>
</div> 
```

我想知道 div 元素有多少个子元素：容器。在这种情况下，它将返回 2...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-18T09:23:05.177

使用[`children`](http://api.jquery.com/children/)和[`length`](http://api.jquery.com/length/)：

```
$("#container").children().length 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T09:24:02.827

使用直接子选择器 (>) 和长度属性：

```
$('#container > *').length 
```

示例 - [http://jsfiddle.net/TtV8d/](http://jsfiddle.net/TtV8d/)

# iphone - UITableViewCell 不显示背景颜色

> ID：10206478
> 
> 赞同：0
> 
> 时间：2012-04-18T09:22:15.930
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用下面的代码直接从 xib 加载一个单元格，但问题是即使我在 xib 中设置了单元格的背景颜色也没有显示，我也在通过代码设置它。任何人都可以指导我解决这个问题。

**我想知道为什么它没有显示在 xib 中设置的背景颜色**

```
 static NSString *cellIdentifier = @"GameCell123";

UITableViewCell *cell = [tableViewTemp dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) 
{
    NSArray *array=[[NSBundle mainBundle] loadNibNamed:@"GameCell" owner:self options:nil];
    if (array !=nil && [array count]>0) 
    {
        cell=[array objectAtIndex:0];
    }
    [cell setAccessoryView:[cell viewWithTag:3]];
    [(UIButton *)[cell viewWithTag:assessoryButtonCellSubviewTag] addTarget:self action:@selector(teamsAccessoryButtonTap:event:) forControlEvents:UIControlEventTouchUpInside];

    cell.backgroundColor=[UIColor blueColor];
    //cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier] autorelease];
    // seting teams button as accessory view; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:38:56.423

如graver所示，更改 willDisplayCell 委托方法中的背景颜色：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundColor = [UIColor blueColor];  
} 
```

# iphone - 在 Iphone 中将视频上传到 Youtube 时出错

> ID：10206479
> 
> 赞同：0
> 
> 时间：2012-04-18T09:22:16.527
> 
> 标签：iphone, objective-c, ios, xcode, gdata

我正在尝试使用 GData 将视频上传到 Youtube，并且我已经非常成功地这样做了。

**问题**

我在传递不同的类别名称时遇到了问题，其中一些有效，而另一些无效。

例如，当我通过视频类别“喜剧”时，视频将上传。

但是，如果我通过任何其他类别，例如“娱乐”，则会收到**400**错误。

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:56:39.993

给出 Youtube 接受的正确类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:57:55.350

您可以从我们上传视频的网站上查看类别名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:18:01.453

您可以在您的 youtube 个人资料中看到类别保管箱，您可以在其中选择不同的类别，例如喜剧、教育、娱乐、游戏、音乐、运动

**注意：您提供了相同的类别名称，这些名称显示在您的 youtube 个人资料的类别保管箱中** ![在此处输入图像描述](../Images/9707b26560d3169061b82ef7f3d9da60.png)

# javascript - 当我使用 input type="button" 时，一个函数运行良好，但是当我使用 button 时它不会

> ID：10206480
> 
> 赞同：0
> 
> 时间：2012-04-18T09:22:24.213
> 
> 标签：javascript, html

我用这两种类型的按钮调用相同的函数。第一个效果很好，但按钮效果很好，但在不到一秒钟的时间里，它看起来就像刷新页面。

```
<input type="button" id="bProv" value="filtrar" onclick="filtroP()"/>
<button id="bProv" onclick="filtroP()">filtrar</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:25:31.493

元素的默认为`type`，所以它会运行 JS 然后立即提交表单。`<button>``submit`

`<button type="button" ...`如果您不想提交表单，请使用。

也就是说，对按钮进行硬编码（没有 JS 什么都不做）违背了[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)原则（这是 WWW 最佳实践编程的一部分）。

# java - 间距 JTable 标头

> ID：10206481
> 
> 赞同：1
> 
> 时间：2012-04-18T09:22:26.790
> 
> 标签：java, swing, jtable, jtableheader

我知道间距`JTable`单元非常简单，如下所示；

```
int gapWidth = 10;
int gapHeight = 5;
table.setIntercellSpacing(new Dimension(gapWidth, gapHeight)); 
```

像这样的间距似乎不会影响表格标题。有没有办法用相同的尺寸间隔标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:29:57.767

Easiest way could be to set [EmptyBorders to the JTableHeader](https://stackoverflow.com/q/9851253/714968) inside the `TableCellRenderer`

> The code above does my spacing, but the alignment of header and the actual row cell values looks slighly off - as a result of spacing only placed on cells but not the header.

I added a SSCCE (3mins 27seconds inc. uploading here)

![enter image description here](../Images/343481f88bd3c220d71afbda1a53e921.png)![enter image description here](../Images/940f0600686d9c7e7118b52768c9a380.png)

from code

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class IntercellSpacingTableHeader {

    private JFrame frame = new JFrame("Table Demo");
    private String[] columnNames = {"String", "Integer", "Float", "Double"};
    private Object[][] data = {
        {"aaa", new Integer(12), new Float(12.15), new Double(100.05)},
        {"bbb", new Integer(5), new Float(7.154), new Double(6.1555)},
        {"CCC", new Integer(92), new Float(0.1135), new Double(3.1455)},
        {"ddd", new Integer(12), new Float(31.15), new Double(10.05)},
        {"eee", new Integer(5), new Float(5.154), new Double(16.1555)},
        {"fff", new Integer(92), new Float(4.1135), new Double(31.1455)}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };
    private JTable table = new JTable(model);

    public IntercellSpacingTableHeader() {
        int gapWidth = 10;
        int gapHeight = 5;
        table.setIntercellSpacing(new Dimension(gapWidth, gapHeight));
        table.setRowHeight(20);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scroll = new JScrollPane(table);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scroll);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new IntercellSpacingTableHeader();
            }
        });
    }
} 
```

# continuous-integration - 单元测试覆盖率；图形显示

> ID：10206483
> 
> 赞同：3
> 
> 时间：2012-04-18T09:22:34.730
> 
> 标签：continuous-integration, code-coverage, dotcover

我的任务是向我们的 CI 构建环境（我们使用 Hudson 和 MSBuild）引入自动化的单元测试覆盖率报告。我使用 dotCover 在构建作业中生成跨多个项目的覆盖率数据，合并该数据，生成单个 HTML 报告，并使用 HTML Publisher Hudson 插件将其与该作业的 Hudson 仪表板集成。

到目前为止，一切都很好。但是，我们最终想要的是在我们的一个团队显示器上以图形方式显示整个系统代码库（六个构建作业，大约 50 个项目）的单元测试覆盖率指标；高度可见的“一目了然”的测试覆盖率状态。我可以使用一个应用程序自己构建它，该应用程序将合并所有构建的 dotCover 覆盖率报告，报告到 xml 并围绕它构建我自己的 UI，但是那里有产品已经这样做了吗？我们没有与 dotCover 结婚，它可以改变，而且它也不必是免费的或开源的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:28:26.737

我们的[C# 测试覆盖工具](http://www.semanticdesigns.com/Products/TestCoverage/CSharpTestCoverage.html)工具可以将单独的 C# 工件的测试覆盖向量组合到一个整体视图中，开箱即用。

事实上，[我们的测试覆盖工具系列](http://www.semanticdesigns.com/Products/TestCoverage)可以以相同的方式组合来自多种不同语言（例如，C#、VB.net、C++、Java、PHP、COBOL 等）的结果。

这些工具既提供了覆盖代码的可视化视图，又提供了覆盖数据的报告，包括 XML 形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:19:56.550

[OpenCover](https://github.com/sawilde/opencover)和[PartCover](https://github.com/sawilde/partcover.net4)都是可以集成到构建自动化系统中的开源代码覆盖工具。

两者都可以使用[ReportGenerator](http://reportgenerator.codeplex.com/)来显示结果；虽然 PartCover 带有它自己的查看器，但我更喜欢自己使用 ReportGenerator，因为 HTML 可以很好地集成到构建状态报告中。

您也可以使用 XSLT 或类似工具构建自己的报告，因为这两种工具都有 XML 输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:35:16.870

我们正在使用 NCover 来获取测试覆盖率和一堆其他代码指标（符号覆盖率、分支覆盖率和圈复杂度）。

突出显示覆盖率非常好，您可以浏览源代码作为报告的一部分，看看哪些行被覆盖，哪些没有。

您还可以从报告中排除测试类别或特定命名空间。

据我所知，它与 Hudson 集成在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T13:54:20.007

我非常喜欢 SonarQube 的树形图功能，但这仅适用于 SonarQube 中的一个“项目”，不过，这是一个很好的研究工具。

Google for SonarQube 和树图示例。

# ios - iOS 数据存储指南拒绝

> ID：10206485
> 
> 赞同：5
> 
> 时间：2012-04-18T09:22:39.053
> 
> 标签：ios, iphone, appstore-approval

我的应用程序被拒绝，因为它必须遵循 iOS 数据存储指南。我已经在stackoverflow上阅读了一些答案，并且我已经阅读了一些博客......我知道我的问题，在第一次应用程序启动时我复制1个sqlite db并解压缩文档文件夹中的一些图像。问题是 icloud 自动备份文档目录中的任何文件。我不需要在我的应用程序中使用 icloud，但我的文件必须保留在文档文件夹中，因为它们是我的应用程序的基础数据并且必须保留（缓存文件夹或临时文件夹不是正确的解决方案）。所以我读到了一个标志，我可以逐个文件设置以禁止备份：

[URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];

我还读到此方法仅适用于高于 5.0.1 的 ios，在另一种情况下它将被简单地忽略（我已将我的 ios 部署目标设置为 4.3）...如果我使用此方法，我的应用程序将再次被拒绝因为旧的 ios 设备备份不受管理？如果是，是否有一个跨 iosversion 方法来设置 NSURLIsExcludedFromBackupKey？

编辑我很抱歉 icloud 在 ios 早期 5.0 中不存在所以我认为问题只涉及版本 5.0 和 5.0.1 之间的差异，我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:01:29.463

我已经通过这种方法传递了将存储在文档文件夹中的所有文件。

试试这个

```
-(BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{

const char* filePath = [[URL path] fileSystemRepresentation];
const char* attrName = "com.apple.MobileBackup";
if (&NSURLIsExcludedFromBackupKey == nil) {
    // iOS 5.0.1 and lower
    u_int8_t attrValue = 1;
    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;

}
else {
    // First try and remove the extended attribute if it is present
    int result = getxattr(filePath, attrName, NULL, sizeof(u_int8_t), 0, 0);
    if (result != -1) {
        // The attribute exists, we need to remove it
        int removeResult = removexattr(filePath, attrName, 0);
        if (removeResult == 0) {
            NSLog(@"Removed extended attribute on file %@", URL);
        }
    }

    // Set the new key
    NSError *error = nil;
    [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
    return error == nil;
}
} 
```

我在 Stack Overflow 中找到了这个方法：

*   [在 iOS 5.0 上使用 NSURLIsExcludedFromBackupKey 而不会崩溃](https://stackoverflow.com/questions/9620651/use-nsurlisexcludedfrombackupkey-without-crashing-on-ios-5-0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T06:29:29.413

注意：不要使用

```
NSString *mediaDir = [NSString stringWithFormat:@"%@/Library/Caches/%@", NSHomeDirectory(), MEDIA_DIRECTORY]; 
```

因为您正在对名称进行假设。相反，使用：

```
NSArray* lCachePaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString* lCacheDirectory = [lCachePaths objectAtIndex:0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:17:31.283

在我的应用程序中，我通过将文件（在我的情况下为图像）添加到包中来解决它，并检查加载图像的方法（如果它们存在于将放置用户生成的数据/图像的文件夹中）。

如果它不存在，我知道它是我预先填充的图像之一，我从包中加载它。

对于 sqlite 文件：不是一个真正令人满意的解决方案，但我现在在代码中创建数据，而不是预先填充的 sqlite 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T16:10:02.323

对于媒体文件，我们将它们存储在 Caches/ 目录中。在应用程序启动期间，我们检查它们是否存在。否则，图像要么从捆绑包中加载（在您的情况下为解压缩），要么在我们的情况下从服务器重新下载。

确切位置是

```
NSString *mediaDir = [NSString stringWithFormat:@"%@/Library/Caches/%@", NSHomeDirectory(), MEDIA_DIRECTORY]; 
```

这是您应该存储临时文件的地方。缓存中的文件通常是持久的，比 Temp 中的要持久得多，但可以在某些时候删除。

# asp.net - 远程服务器报表上的 ReportViewer、vb.net 和 PARAMETERS

> ID：10206487
> 
> 赞同：0
> 
> 时间：2012-04-18T09:22:51.047
> 
> 标签：asp.net, vb.net, reporting-services

我可能看起来很愚蠢，但这让我在转圈。

报表位于报表服务器上，需要一个参数“GROUPNAME”。当我尝试设置参数时，我的代码给了我一个转换错误。

请帮忙：

导入 Microsoft.Reporting.webforms 部分公共类 _Default 继承 System.Web.UI.Page

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim ReportParameter(0)
    ReportViewerMain.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote
    ReportViewerMain.ServerReport.ReportServerUrl = New Uri("http://localhost/ReportServer")
    ReportViewerMain.ServerReport.ReportPath = "/RptTest/RptTestParm"
    ReportViewerMain.ShowParameterPrompts = True
    ReportViewerMain.ShowPrintButton = True

    Dim rptParameters As New ReportParameter(1)
    rptParameters = New ReportParameter("GROUPNAME", "Adm01")

    ReportViewerMain.ServerReport.SetParameters(rptParameters)
    ReportViewerMain.ZoomPercent = 100
    ReportViewerMain.ServerReport.Refresh()
End Sub 
```

结束类

到目前为止，这是我的代码。

谢谢

苹果电脑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:35:55.907

你的问题在于你的代码本身

您没有正确实例化报告参数数组

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim ReportParameter(0)
    ReportViewerMain.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote
    ReportViewerMain.ServerReport.ReportServerUrl = New Uri("http://localhost/ReportServer")
    ReportViewerMain.ServerReport.ReportPath = "/RptTest/RptTestParm"
    ReportViewerMain.ShowParameterPrompts = True
    ReportViewerMain.ShowPrintButton = True
    Dim rptParameters As New ReportParameter(1)
    RptParameters(0) =  New ReportParameter("GROUPNAME", "Adm01") 
    ReportViewerMain.ServerReport.SetParameters(rptParameters)
        ReportViewerMain.ZoomPercent = 100
        ReportViewerMain.ServerReport.Refresh()
    End Sub 
```

您没有正确实例化报告参数的数组

谢谢

# wcf - 使用部分类和 OnDeserializing 扩展 WCF 代理：不会触发 OnDeserializing

> ID：10206490
> 
> 赞同：1
> 
> 时间：2012-04-18T09:23:01.940
> 
> 标签：wcf, proxy, deserialization, partial-classes

我正在尝试通过使用部分类使 OnDeserializing 与我的 WCF 代理一起工作，但由于某种原因，不会触发 OnDeserializing。在 OnDeserialing 中，我需要检查 Web 服务是否没有返回任何内容，并在这种情况下设置我自己的默认值。在 Visual Studio 2010 中一切正常，我可以在代码编辑器中访问我的 WCF 代理的属性，但在运行时永远不会调用 OnDeserialing。你能告诉我我做错了什么吗？这是代码：

代理类

```
public partial class SerialInfo : object, System.ComponentModel.INotifyPropertyChanged {

    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=2)]
    public string Location {
        get {
            return this.locationField;
        }
        set {
            this.locationField = value;
            this.RaisePropertyChanged("Location");
        }
    } 
```

}

扩展代理类

```
public partial class SerialInfo
{
[OnDeserializing]
void OnDeserializing(StreamingContext c)
{
  Location = "Test value";
  MessageBox.Show("OnDeserializing was triggered!");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:12:28.280

尝试在属性中添加括号，并更改方法名称

```
[OnDeserializing()]
void OnDeserializingMethod(StreamingContext c)
{
  Location = "Test value";
  MessageBox.Show("OnDeserializing was triggered!");
} 
```

编辑：另外，部分类不应该具有相同的继承吗？您确定您的部分课程正在扩展您认为的内容吗？

# android - 将图像拖动到屏幕上的特定位置并在其正确位置时发出警报 -Android-

> ID：10206492
> 
> 赞同：1
> 
> 时间：2012-04-18T09:23:05.823
> 
> 标签：android, drag-and-drop

我正在尝试开发一个应用程序，我可以在其中将图像拖动到屏幕中的特定位置并在其位置正确时发出警报，现在拖动部分完成我只需要验证位置并在图像出现时显示警报在那个特定的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:33:58.467

获取`Rect`特定位置的坐标，并检查拖动的项目坐标是否与位置 Rect 坐标冲突。您可以使用`Rect.contains()`api 进行检查。如果它返回 true，则可以显示警报。

```
if (locationRect.contains(drag.left, drag.top, drag.right, drag.bottom)) {
    // Show Alert dialog
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:40:32.157

我认为您的代码中有 onTouch 方法..

```
 @Override
    public boolean onTouch(View v, MotionEvent event) {

    switch(event.getAction())
         {
     case MotionEvent.ACTION_DOWN:   
          .....
           break;
       case MotionEvent.ACTION_MOVE:
         int x_cord = (int)event.getRawX();
         int y_cord = (int)event.getRawY();
        //if you want the alert when the image enters a square of (10,10)  (25,25),(10,25) and (25,10).. then 
        if(x_cord>=10 && x_cord<=25)
         {
        if(y_cord>10 && y_cord<25){<-- these cordinates work if the image you are moving is a square of side 15 .. so you can change accordingly..
         //alert here

           }
          }

 ......                       
  } 
```

# c - Semop：当减少一组信号量时全部减少一次，还是在第一次失败时阻塞？

> ID：10206501
> 
> 赞同：5
> 
> 时间：2012-04-18T09:23:33.193
> 
> 标签：c, unix, semaphore

因此，如果我有一个带有信号量和*sembuf的**信号量集* `semid``num_of_sems` *`*deleter_searchers_down`*

 *```
struct sembuf *deleter_searchers_down 
                        = malloc(sizeof (*deleter_searchers_down) * num_of_sems);
for (i = 0; i < num_of_sems; ++i) {
            (deleter_searchers_down + i)->sem_op = -1;
            (deleter_searchers_down + i)->sem_num = i;
            (deleter_searchers_down + i)->sem_flg = SEM_UNDO;
        }
semop(semid, deleter_searchers_down, num_of_sems); 
```

对 semop 的调用将尝试立即降低集合中的所有信号量，或者一旦它尝试降低第一个信号量为 0 并在其他进程提升该特定信号量后继续，它会阻塞吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T10:09:28.343

在所有更新都可以作为一个单元进行之前，不会发生更新。

POSIX 规范对这一点可能更清楚，尽管它确实说这`semop`是原子的。

在 Linux 上，`semop(3)`glibc 中是一个简单的`semop(2)`. 手册页反过来`semop(2)`说

> 中包含的操作集`sops`以*数组顺序*和*原子*方式执行，也就是说，操作要么作为一个完整的单元执行，要么根本不执行。

HP-UX`semop(2)`联机帮助页更加清晰：

> 信号量数组操作是原子的，因为在数组中所有信号量上的阻塞条件被移除之前，不会执行任何信号量操作。*

# .htaccess - 安装社交引擎时出错

> ID：10206505
> 
> 赞同：0
> 
> 时间：2012-04-18T09:23:46.650
> 
> 标签：.htaccess, failed-installation, socialengine

我在尝试安装 Social Engine 时遇到问题。上传所有文件，设置目录权限，但是当我进入我的域时，我得到一个：

```
Not Found

The requested URL /install/install was not found on this server. 
```

这与根目录和安装目录中的 .htaccess 文件有关，因为删除它们我确实开始安装过程，但使用长 URL，这样：

/install/index.php/install

例如，这将导致所有长 URL，而不是谷歌用来索引的短 URL。我的 ISP 关闭了安全模式，打开了 mod_rewrite，所以我有点迷路了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:09:04.603

.htaccess：

```
# $Id: .htaccess 7539 2010-10-04 04:41:38Z john $

<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule>

# sends requests /index.php/path/to/module/ to "index.php"
# AcceptPathInfo On

# @todo This may not be effective in some cases
FileETag Size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T10:32:58.807

在Vagrant 上运行 SocialEngine 时遇到同样的问题（使用[https://box.scotch.io/](https://box.scotch.io/)）并通过清除.`.htaccess``/install/`

# cruisecontrol.net - .net 开源代码覆盖工具，可与 cc net 集成

> ID：10206506
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:23:46.610
> 
> 标签：cruisecontrol.net, code-coverage

你能告诉我任何我可以在巡航控制.net中使用的代码覆盖工具名称吗？

部分封面是否开源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:17:41.793

[OpenCover](https://github.com/sawilde/opencover)和[PartCover](https://github.com/sawilde/partcover.net4)都是开源代码覆盖工具，可以集成到 CC.NET 等构建自动化系统中。

两者都可以使用[ReportGenerator](http://reportgenerator.codeplex.com/)来显示结果；尽管 PartCover 带有它自己的查看器，但我更喜欢自己使用 ReportGenerator，因为 HTML 可以很好地集成到构建状态报告中。

您也可以使用 XSLT 或类似工具构建自己的报告，因为这两种工具都有 XML 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:08:28.050

您可以将 OpenCover 输出与日志文件合并，通过使用 XSLT，您可以逐个构建显示代码覆盖率。

```
<publishers>
  <merge>
    <files>         
      <file>yourPath\coverage.xml</file>

    </files>
  </merge> 
```

# c# - C#如何从我的用户控件访问主窗体上的setter方法？

> ID：10206510
> 
> 赞同：2
> 
> 时间：2012-04-18T09:24:18.067
> 
> 标签：c#, forms, methods, setter

我有一个用户控件，它包含一个面板，该面板包含一个图片框。当我将鼠标移动到图片框上时，我想更新 MainForm 上的标签。我在主窗体上有一个 get/set 方法，但我该如何使用它？谢谢

```
 public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
        }
        public String MouseCords
        {
            get { return this.MouseCordsDisplayLabel.Text; }
            set { this.MouseCordsDisplayLabel.Text = value; }
        }
    }

    public partial class ScoreUserControl : UserControl
    {
        public ScoreUserControl()
        {
            InitializeComponent();
        }

        private void ScorePictureBox_MouseMove(object sender, MouseEventArgs e)
        {
            // MainForm.MouseCords("Hello"); //What goes here?
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:30:35.647

实际上，在您的情况下可以这样做：

```
((MainForm)this.ParentForm).MouseCords = "Some Value Here"; 
```

但正确的方法是像 Felice Pollano 提到的事件：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();

        this.myCustomControlInstanse.PicureBoxMouseMove += new EventHandler<StringEventArgs>(myCustomControlInstanse_PicureBoxMouseMove);
    }

    private void myCustomControlInstanse_PicureBoxMouseMove(object sender, StringEventArgs e)
    {
        this.MouseCordsDisplayLabel = e.Value // here is your value
    }
}

public class StringEventArgs : EventArgs
{
    public string Value { get; set; }
}

public partial class ScoreUserControl : UserControl
{
    public event EventHandler<StringEventArgs> PicureBoxMouseMove;

    public void OnPicureBoxMouseMove(String value)
    {
        if (this.PicureBoxMouseMove != null)
            this.PicureBoxMouseMove(this, new StringEventArgs { Value = value });
    }

    public ScoreUserControl()
    {
        InitializeComponent();
    }

    private void ScorePictureBox_MouseMove(object sender, MouseEventArgs e)
    {
        this.OnPicureBoxMouseMove("Some Text Here");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:35:09.513

理想情况下，您应该为此发起一个事件。

创建委托

```
public delegate void  Update(); 
```

在用户控件中

```
public class MyUserControl : UserControl
{
public event Update OnUpdate;

} 
```

在主窗体上为用户控件事件注册一个处理程序。

```
public class Main
{
public Main()
{
myUserControl.OnUpdate += new Update(this.UpdateHandler);
}

void UpdateHandler()
{
//you can set the delegate with sm arguments
//set a property here

}
} 
```

在用户控制上，

在按钮单击时引发事件

做这个

```
OnUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:32:11.433

这可能会给你一个想法...

```
 public partial class ScoreUserControl : UserControl
{
    public ScoreUserControl()
    {
        InitializeComponent();
    }

    private void ScorePictureBox_MouseMove(object sender, MouseEventArgs e)
    {
        // MainForm.MouseCords("Hello"); //What goes here?
        MainForm parent = this.ParentForm as MainForm;
        if (parent != null) parent.MouseCordsDisplayLabel.Text = "Hello";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:34:52.257

你有几个选择：

1.  在用户控件上创建一个事件并且必须形成监听它（我认为这是大多数 C# 程序员推荐的方式）。
2.  将对主窗体的引用传递给用户控件（在构造函数中）。这样，用户控件就知道它的 MainForm。
3.  投射`this.ParentForm`到 MainForm 类，然后你就有了参考。

选项 2 和 3 更舒适和懒惰，但代价是用户控件必须知道特定的 MainForm 类。第一个选项的优点是您可以在另一个项目中重用用户控件，因为它不知道 MainForm 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:27:03.090

您应该从用户控件发布一个[事件](http://msdn.microsoft.com/en-us/library/aa645739%28VS.71%29.aspx)并从主窗体订阅它。至少这是为 winform 建议的模式。无论如何，这个想法是让需要查看坐标的代理“**可观察**”控件，而不是使用它作为驱动程序来更新感兴趣的代理。

# c++ - 您可以使用 googlemock 对不属于某个类的函数设置期望吗？

> ID：10206513
> 
> 赞同：1
> 
> 时间：2012-04-18T09:24:31.540
> 
> 标签：c++, googlemock

如果在我的 main 中有一个从 main 调用的函数 func，我可以使用 googlemock 说 EXPECT_CALL( **no_class_here** , func).Times(1) 吗？

**no_class_here**类似于范围运算符，表示它不属于一个类，::。我不知道这将如何工作，但在功能实现中

我不想将 func 放在一个类中，因为它只是一个静态函数并且不需要一个类来运行......

我应该放弃并一直把我要测试的所有东西都放在课堂上吗？我知道 JUnit 和 JMock，Java 中的一切都是一个类，所以别无选择，但我想能够从一个只有虚函数的类继承下来的能力可能是允许 googlemock 完成工作的机制......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:14:37.513

恐怕不是。在 googlemock 有关模拟[自由函数](http://code.google.com/p/googlemock/wiki/V1_6_CookBook#Mocking_Free_Functions)的文档中，它们展示了如何用接口类中的等效函数替换自由函数。

您是否认为纯粹为了进行测试而更改现有代码是否值得取决于您。我可能一般不会这样做，特别是在这种情况下，您要将非成员函数更改为成员函数。

# c# - 如何设置具有必需而非空列的文件助手

> ID：10206514
> 
> 赞同：3
> 
> 时间：2012-04-18T09:24:32.430
> 
> 标签：c#, filehelpers

我一直在查看 filehelpers 文档，但似乎没有任何东西可以处理列中的空值。我需要能够在所有列上设置一个“非空”字符串属性。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:15:25.837

您可以在`AfterReadRecord`事件中执行您想要的任何验证。如果您想在出现错误的情况下继续处理文件的其余部分，您还需要`ErrorMode`将`SaveAndContinue`. 请参阅下面的工作示例。

```
[DelimitedRecord("|")]
public class MyClass
{
    public string Field1;
    public string Field2;
    public string Field3;
}

class Program
{
    static void Main(string[] args)
    {
        var engine = new FileHelperEngine<MyClass>();
        engine.AfterReadRecord += new FileHelpers.Events.AfterReadHandler<MyClass>(engine_AfterReadRecord);
        engine.ErrorMode = ErrorMode.SaveAndContinue;
        // import a record with an invalid Email
        MyClass[] validRecords = engine.ReadString("Hello||World");
        ErrorInfo[] errors = engine.ErrorManager.Errors;
        Assert.AreEqual(1, engine.TotalRecords); // 1 record was processed
        Assert.AreEqual(0, validRecords.Length); // 0 records were valid
        Assert.AreEqual(1, engine.ErrorManager.ErrorCount); // 1 error was found
        Assert.That(errors[0].ExceptionInfo.Message == "Field2 is invalid");
    }

    static void engine_AfterReadRecord(EngineBase engine, FileHelpers.Events.AfterReadEventArgs<MyClass> e)
    {
        if (String.IsNullOrWhiteSpace(e.Record.Field1))
            throw new Exception("Field1 is invalid");
        if (String.IsNullOrWhiteSpace(e.Record.Field2))
            throw new Exception("Field2 is invalid");
        if (String.IsNullOrWhiteSpace(e.Record.Field3))
            throw new Exception("Field3 is invalid");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:32:16.620

默认情况下，一个空字符串将被解析为`String.Empty`FileHelpers，但您可以使用自定义转换器覆盖它：

```
public class EmptyStringConverter : ConverterBase
{
    public override object StringToField(string sourceString)
    {
        if (String.IsNullOrWhiteSpace(sourceString))
            return null;
        return sourceString;
    }
} 
```

然后你像这样定义你的记录类属性

```
[FieldConverter(typeof(EmptyStringConverter))]
public string Field1; 
```

如果对应的字符串`Field1`为空或空白，则将其转换为null。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T18:37:12.323

使用转换器将不起作用，因为`FileHelpers.FieldBase`在调用转换器之前检查零长度字段并返回 Null。

使用`public static FileHelperEngine GetEngine()`确保`AfterReadRecord`事件验证正确连接。

```
[DelimitedRecord(",")]
public class RequiredField
{
    public string Required;

    public static FileHelperEngine GetEngine()
    {
        var result = new FileHelperEngine(typeof(RequiredField));
        result.AfterReadRecord += AfterReadValidation;

        return result;
    }

    private static void AfterReadValidation(EngineBase sender, AfterReadRecordEventArgs args)
    {
        if (String.IsNullOrWhiteSpace(((RequiredField)args.Record).Required))
        {
            throw new ConvertException("RequiredField is Null or WhiteSpace", typeof(String));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-26T17:57:20.550

对于我们的一个项目，我需要同样的东西，它大量使用 FileHelpers 并为提供新的[FieldNotEmptyAttribute](https://github.com/MarcosMeli/FileHelpers/commit/c0ac00af7cb9bcd50a5313ae590ea42dd50a6c7c)做出了贡献，它可以像这样使用：

```
[DelimitedRecord("|")]
public class MyClass
{
    [FieldNotEmpty()]
    public string Field1;
    public string Field2;
    [FieldNotEmpty()]
    public string Field3;
} 
```

在上面的示例中，如果源文件中的 Field1 或 Field3 为空，则会引发[ConvertException 。](http://filehelpers.com/FileHelpers.ConvertException.html)

# css - CSS 验证不再相关吗？

> ID：10206521
> 
> 赞同：9
> 
> 时间：2012-04-18T09:24:42.727
> 
> 标签：css

多年来，我使用 HTML5、Bootstrap 和 jQuery 构建了我的第一个网页。

当我通过 W3C CSS 验证器运行页面时，返回的结果包含近 800 个错误（主要来自 Bootstrap）。

CSS 验证不再相关，还是我可以使用更新的 css 验证器？

谢谢， N

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:26:42.823

这取决于`Profile`你选择什么。

根据您收到的错误数量，您可能选择了默认值`CSS level 2.1`

尝试将其更改为`CSS level 3`

![在此处输入图像描述](../Images/631409314c0940302fe2321048fa1a04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:35:04.870

同意。Bootstrap 2.3.1 仍然未能通过 WC3 的 CSS3 验证检查，出现 611 错误。

# sql - 如何在不影响数据的情况下保持 2 个数据库模式一致？

> ID：10206522
> 
> 赞同：0
> 
> 时间：2012-04-18T09:24:44.903
> 
> 标签：sql, sql-server, sql-server-2008

我有两台安装了 SQL Server 2008 的服务器机器（一台用于开发，另一台用于客户端）。每当开发人员对开发服务器中的表/视图/存储过程进行更改时，它也需要反映客户端服务器。

目前，我正在手动处理所有更改，例如表中的新列、存储过程中的更改等。数据库脚本或复制可以为我自动化整个过程吗？或者是否有更好的解决方案来保持数据库模式的一致性。

帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:38:28.070

我强烈建议创建一个环境，其中所有架构更改都完全通过 SQL 脚本完成 - 在任何环境中都不要“手动”。每个开发人员都必须将与他/她的错误修复（或新功能）相关的脚本提交到版本控制系统。

通常你会有一个从头开始创建数据库的大脚本和一个用于每个版本升级的脚本（从 1.0 到 1.1，一个从 1.1 到 1.2，依此类推）

如果您有人力，为每个版本维护一个“从头开始”脚本也非常方便。您是否需要它取决于在空系统上安装的频率。

我们在使用 Liquibase 来维护这一切方面拥有非常好的经验。它会自动跟踪哪些补丁已应用于数据库以及哪些补丁需要在升级期间运行。它还可以防止您两次运行相同的迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:22:03.033

所有数据库应用程序都存在的问题，并且很难解决。这样的解决方案无法计划，因为开发人员所做的更改需要首先进行测试，而且您当然不希望未经测试的代码与您的实时数据库合并。我对这个问题很感兴趣，因为我目前正在编写一个通用的解决方案来一劳永逸地解决这个问题。

但与此同时，我们正在使用一个名为 Open DBDiff 的开源产品（谷歌它 - 你不能错过它），它可以做一些改进，但效果很好。您将源数据库和目标数据库传递给它，它会生成一个脚本以使目标与源相同。复制程序集和用户角色似乎确实有些麻烦，但是对于所有事情，我都没有遇到任何麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:43:01.877

我相信在确保更改已经过测试并正确检查到源代码控制之后，应该由人来进行部署。这不是完全自动化的东西。

人类应该使用这些工具。我使用 Visual Studio 2010 Professional，它具有强大的架构比较工具、生成和执行部署脚本并具有源代码控制集成。

# facebook - 如何解决“阅读文章”动作的“开/关发布”要求

> ID：10206525
> 
> 赞同：0
> 
> 时间：2012-04-18T09:24:55.790
> 
> 标签：facebook, action, facebook-opengraph, built-in

现在，当您想使用 READ 等内置操作时，facebook 需要具有这些选项。

“一种让用户控制将其操作发布回 Open Graph 的清晰方法。在下面的示例新闻应用程序中，提供了一个清晰的“开/关”开关，适用于应用程序内所有未来的阅读操作。当用户切换将开关切换到“关闭”，这会阻止应用从那时起发布读取操作。将开关切换回“开启”会重新启用发布。“

“一种用户删除刚刚通过您的应用共享的文章的清晰方法。在下面的示例中，用户可以轻松删除由于应用发布的读取操作而共享的最近文章。”

示例图片在这里：[https](https://developers.facebook.com/docs/opengraph/actions/builtin/#read) ://developers.facebook.com/docs/opengraph/actions/builtin/#read在标题“发布意识”下

如何创建简单的按钮来停止分享和删除分享的文章？最好的会

我一直在寻找解决方案一周没有结果...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:53:15.253

对于文章，facebook 建议您将触发器放在“阅读更多”或其他类型的“下一页”按钮/链接上，这样用户实际上正在阅读文章的可能性非常高。

为此，您可以；

1.  在每篇文章中/上放置一个小表格，并带有一个单选按钮/复选框询问您是否要发布此文章（是/否） - 或
2.  使用与 1 中相同类型的表单在您的网站上为您的用户首选项添加一个部分。然后您可以更进一步，让他们可以选择为您网站的每个部分、类别或页面设置首选项。

无论哪种方式，但是您决定调用需要提交表单的操作（阅读更多或下一页等），检查答案是否是/否（发布与否），然后相应地发布操作。

使用会话变量也可能是一种选择！为用户提供为当前会话发布/不发布操作的能力会非常简洁。这可以以在每个会话开始时呈现给用户的相同形式进行处理，甚至可以给他们第三个选项，“每次都问我”。

就删除现有动作而言，这可以通过获取动作实例并以与创建类似的方式运行删除命令来完成。正如我所说，这取决于您如何触发 - CURL、js api 等...检查 FB 开发文档以了解您正在使用的方法。

希望这可以帮助！

盖兹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:04:14.703

您的问题有两个部分，一个是存储用户偏好，另一个是在文章页面上提供的共享/取消共享选项。问题的第一部分很简单，只需拥有一个包含最少两列（为简单起见）、用户 ID（varchar 或 long int）和 share（bool 或位）的小型数据库表即可实现。通过提供一个开/关按钮，为用户提供一个选项来切换此共享位，该按钮将共享值从 1 更改为 0（真到假），反之亦然，对于指定的用户 ID。现在，在进行社交操作（如阅读）之前，请在数据库中为登录的 facebook 用户检查此共享位，并相应地执行操作。

现在回答您问题的第二部分，您可以使用 Facebook JavaScript SDK 对 news.read 操作进行 api 调用，并提供一个回调来存储共享文章的返回 id。然后使用相同的 id 为用户提供取消共享的选项。假设您的页面中包含 jQuery，下面的内容应该可以工作（我很快就编写并测试了它，在大多数情况下应该可以工作）

> **在您的页面中包含以下脚本**

```
//set this at page load or from authResponse object
var fbDataObj = {
    user_id : <some user id>,
    access_token: <some access token>
};

//set currentPostFBUrl to your article url
var currentPostFBUrl = "http://www.yourpageurl.com";

var publishPost = function (articleLink, callback) {
    FB.api(
        '/' + fbDataObj.user_id + '/news.reads',
        'post',
        { article: articleLink,
          access_token: fbDataObj.access_token },
        function(response) {
           if (!response || response.error) {
              //alert('Error occured');
              if (typeof callback === 'function') {
                callback({text: "error", id: ""});
              }
           } else {
              //alert('Share was successful! Action ID: ' + response.id);
              if (typeof callback === 'function') {
                callback({text: "success", id: response.id});
              }
           }
        });
};

var deletePost = function (postId, callback) {
    FB.api(
        postId,
        'delete',
        { access_token: fbDataObj.access_token },
        function(response) {
           if (!response || response.error) {
              //alert('Error occured');
              if (typeof callback === 'function') {
                callback({text: "error", id: ""});
              }
           } else {
              //alert('Unshare was successful!');
              if (typeof callback === 'function') {
                callback({text: "success", id: ""});
              }
           }
        });
};

var publishOrDeleteArticle = function (btn_obj) {
    var btn_name = btn_obj.attr("name");
    if (isNaN(parseInt(btn_name, 10))) {
        publishPost(currentPostFBUrl, function(status){
            if (status.text === "success") {
                btn_obj.attr("name", status.id);
                btn_obj.text("Unshare");
            }
        });
    }
    else {                  
        deletePost(btn_name, function(status){
            if (status.text === "success") {
                btn_obj.attr("name", "share");
                btn_obj.text("Share")
            }
        });
    }
}; 
```

> **现在在你的页面做这样的事情**
> 
> **编辑：（**
> 还将 currentPostFBUrl 设置为您的文章网址，如下所示）
> ***var currentPostFBUrl = " [http://www.yourpageurl.com](http://www.yourpageurl.com) ";***

```
//within script tag
$(document).ready(function(){
    $("#btn_share").click(function(e){
        e.preventDefault();
        publishOrDeleteArticle($(this));
    });
});
//your actual share/unshare button
<a id="btn_share" name="share" href="#">Share</a> 
```

*最后一点，我为我正在开发的一个最近的 facebook 应用程序编写了一个包装 js 类。有了它，您只需一行代码就可以阅读/未阅读一篇文章。里面还有其他 WordPress 包装器，但在这种情况下可以单独使用，最简单的情况是，您可以在提供初始配置和初始化后使用下面的对象（检查下面的附加代码）。代码中可能存在一些错误，并且方法可能不完整和广泛，因为我仍在研究它，但目前它应该可以解决目的。为了清楚起见，也可以在上述代码中使用以下包装器方法。随意使用/修改代码，提供反馈和评论，并在发现任何问题时回复。*

```
/*!
 * --------------------------------------------------------------------------------------
 * Utility Library for Facebook Application
 * Contains wrapper methods for WordPress JSON API (named WPJsonApi)
 * and for Facebook Javascript SDK (named FBJsWrapper)
 * Dependency : jQuery, Facebook JavaScript SDK
 * Author : Emad Alam
 * Date: Thu Jun 07 21:11:03 2012 +0530
 * --------------------------------------------------------------------------------------
 * Notes:
 * Including this script adds a global object called FBAppUtil to the window object.
 * You may initialize the object with init method, providing init time configurations.
 * Once FBAppUtil object is initted, you get two sub-ojects, WPJsonApi & FBJsWrapper.
 * These two objects can be initted individually or while initing the main FBAppUtil.
 * Both the objects have a buffer that stores the last fetched data and responses.
 * Methods are provided to access these buffers individually.
 * Once the sub-objects are configured, their methods can be called from their references.
 *
 * Example Usage:
 *          //main object init. config can be given at this time
 *          FBAppUtil.init();
 *
 *          var wpJsonApiConfig = {
 *                  apiUrl : "http://www.example.com/wordpress/api",
 *                  permalinkEnabled : true,
 *                  crossDomain : true
 *          };
 *          FBAppUtil.WPJsonApi.init(wpJsonApiConfig);
 *          
 *          // now you may use all the methods of FBAppUtil.WPJsonApi 
 *          FBAppUtil.WPJsonApi.getRecentPosts(someParams, someCallback);
 *          FBAppUtil.WPJsonApi.getPost(someIdOrSlug, someCallback);
 *          var data = FBAppUtil.WPJsonApi.lastFetched();
 *          var response = FBAppUtil.WPJsonApi.lastResponse();
 *
 *          // other facebook related scripts and sdks initializations
 *          // at this point you should be having the FB object initialized
 *          // you may pass the authResponse object to init the FBJsWrapper or
 *          // populate one of your own to pass it to the FBJsWrapper.init(authResponse)
 *
 *          var fbJsWrapperConfig = {
 *                  userID : <logged in userId>,
 *                  accessToken : <user's accessToken>,
 *                  signedRequest : <from authResponse object>,
 *                  expiresIn : <from authResponse object>
 *              };
 *          FBAppUtil.FBJsWrapper.init(fbJsWrapperConfig);
 *          
 *          // now you may use all the methods of FBAppUtil.FBJsWrapper
 *          FBAppUtil.FBJsWrapper.sendAppRequest("some message", someCallback);
 *          FBAppUtil.FBJsWrapper.share(someArticleUrl, someCallback);
 *          FBAppUtil.FBJsWrapper.unshare(someId, someCallback);
 *          var fbdata = FBAppUtil.FBJsWrapper.dataFromLastCall();
 *          var fbresponse = FBAppUtil.FBJsWrapper.responseFromLastCall();
 */

(function (window) {

    /** Local helper Buffer Class - Start **/
    var LocalBuffer = function (size) {

        //enforce 'new' - object creation pattern
        if (!(this instanceof LocalBuffer)) {
            return new LocalBuffer(size);
        }

        //private variables
        var _buffer = {
            data        : [], //data fetched from the last successfull call
            response    : [] //response from the last call
        },
            _size = (function (size){
                        var n = parseInt(size || 10, 10);
                        return isNaN(n) ? 10 : n;
                    }(size)); //default buffer size

        var _pushToBuffer = function (name, data) {
            if (typeof _buffer[name][_size-1] !== 'undefined') {
                _buffer[name].shift(); //remove the first element in case the buffer is full
            }
            _buffer[name].push(data);
        };

        var _readFromBuffer = function (name) {
            var len = _buffer[name].length;
            return len === 0 ? {} : _buffer[name][len-1]; //read the last inserted without popping
        };

        var _getDataFromBuffer = function () {
            return _readFromBuffer("data");
        };

        var _getResponseFromBuffer = function () {
            return _readFromBuffer("response");
        };

        //expose methods
        this.pushToBuffer           =   _pushToBuffer,
        this.readFromBuffer         =   _readFromBuffer,
        this.getDataFromBuffer      =   _getDataFromBuffer,
        this.getResponseFromBuffer  =   _getResponseFromBuffer
    };  
    /** Local helper Buffer Class - End **/

    /** WordPress JSON API Plugin wrapper - Start **/
    var WPJsonApi;
    (function () {
        var instance;
        WPJsonApi = function (config) {
            if (!(this instanceof WPJsonApi)) {
                return new WPJsonApi(config);
            }
            if (instance) {
                return instance;
            }
            instance = this;

            //config variables
            var apiUrl, //complete url for the api
                cross_domain, //jsonp cross domain calls
                permalink_enabled, //whether permalink enabled
                templates, //TODO: templating system
                buffer_size; //size of the buffer

            //private variables
            var _buffer; //the LocalBuffer object

            //form the final api url string for the json call
            var _getControllerUrl = function (controller_name) {
                var url = apiUrl; //base url
                if (!permalink_enabled) {
                    url += "/?json=" + controller_name;
                    if (cross_domain) {
                        url += "&callback=?";
                    }
                } else {
                    url += "/" + controller_name;
                    if (cross_domain) {
                        url += "/?callback=?";
                    }
                }
                return url;
            };

            //fetch posts using the jQuery getJSON
            //push data and response to buffer
            //on successfull fetch, return array of post objects to the callback
            var _getRecentPosts = function (paramObj, callback) {
                var url = _getControllerUrl("get_recent_posts"); //base url for the specified controller
                if (typeof paramObj === 'function') {
                    callback = paramObj; //no parameters provided only callback
                    paramObj = {};
                }
                paramObj = paramObj || {};
                $.getJSON(url, paramObj, function(data) {
                        if (data.status === "ok") {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "ok",
                                    success : "Successfully fetched the post for the specified id/slug."
                                }
                            );
                            _buffer.pushToBuffer("data", data);
                            if (typeof callback === 'function') {
                                callback(data.posts);
                            }
                        } else if (data.status === "error") {
                            _buffer.pushToBuffer("response",
                                {
                                    status: "error",
                                    error : data.error
                                }
                            );
                        } else {
                            _buffer.pushToBuffer("response",
                                {
                                    status: "error",
                                    error : "Unknown error!"
                                }
                            );
                        }
                    }
                );
            };

            //fetch post by it's id or slug using the jQuery getJSON
            //push data and response to buffer
            //on successfull fetch, return the post object to the callback
            var _getPost = function (paramObj, callback) {
                var url = _getControllerUrl("get_post"), //base url for the specified controller
                    id  = parseInt(paramObj, 10); //assume the parameter to be id

                paramObj = paramObj || {};

                if (typeof paramObj !== 'object') {
                    if (typeof paramObj === 'number' || !isNaN(id)) {
                        paramObj = {id : id};
                    } else if (typeof paramObj === 'string') {
                        paramObj = {slug : paramObj};
                    }
                } 

                if (isNaN(parseInt(paramObj.id, 10)) && !paramObj.slug) {
                    throw {
                                status: "error",
                                error : "Provide a valid id or slug to get a post."
                            };
                }

                //TODO: Avoid server hit by searching and returning the post
                //      from the local buffer for the specified id/slug
                $.getJSON(url, paramObj, function(data) {
                        if (data.status === "ok") {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "ok",
                                    success : "Successfully fetched the post for the specified id/slug."
                                }
                            );
                            _buffer.pushToBuffer("data", data);
                            if (typeof callback === 'function') {
                                callback(data.post);
                            }
                        } else if (data.status === "error") {
                            _buffer.pushToBuffer("response",
                                {
                                    status: "error",
                                    error : data.error
                                }
                            );
                        } else {
                            _buffer.pushToBuffer("response",
                                {
                                    status: "error",
                                    error : "Unknown error!"
                                }
                            );
                        }
                    }
                );
            };

            //initialize the object and add methods to it
            var _init  = function (config) {
                if (typeof config === 'undefined') {
                    throw {
                        status: "error",
                        error : "Provide a valid configuration object to initialize WPJsonApi."
                    };
                }
                apiUrl = config.apiUrl || "/api", //assume base url relative to current page
                cross_domain = config.crossDomain || false, //jsonp cross domain calls
                permalink_enabled = config.permalinkEnabled || true, //assume permalink enabled
                templates = config.templates || {}, //TODO: templating mechanisms
                buffer_size = config.bufferSize || 10, //assume buffer size to be 10
                _buffer = new LocalBuffer(buffer_size); //new buffer object

                //expose the methods and variables
                this.getRecentPosts = _getRecentPosts; //method for fetching recent posts
                this.getPost        = _getPost; //method to fetch the post by id or slug
                this.lastFetched    = _buffer.getDataFromBuffer; //last fetched data from the buffer
                this.lastResponse   = _buffer.getResponseFromBuffer; //response from the last roundtrip to server
            };

            //init the object if config is provided while creating
            if (typeof config !== 'undefined') {
                _init(config);
            }

            //expose init
            this.init = _init;
        };
    }());
    /** WordPress JSON API Plugin wrapper - End **/

    /** FB JavaScript SDK wrapper - Start **/
    var FBJsWrapper;
    (function () {
        var instance;
        FBJsWrapper = function (config) {
            if (!(this instanceof FBJsWrapper)) {
                return new FBJsWrapper(config);
            }
            if (instance) {
                return instance;
            }
            instance = this;

            //config variables
            var access_token, //user access token
            expires_in, //time to expire
            signed_request, //the signed request object
            user_id; //user id of the current connected user

            //private variables
            var _buffer, //the LocalBuffer object
                _token_valid = true; //assume the access token to be valid

            var _isTokenValid = function () {
                //TODO: Implement the method to check for invalid access tokens or
                //      invalid calls to FB APIs
                return _token_valid;
            };

            var _read = function (article, callback) {
                //TODO: Avoid repeated code, make a generic function

                var paramObj = {}; //start with an empty parameter

                paramObj.article = article; //add article to the parameter object

                //if token is invalid, no further calls are possible, so return
                if (!_isTokenValid()) {
                    //TODO: Provide a better way of handling this
                    throw {
                        status: "error",
                        error : "Provide a valid configuration object to initialize FBJsWrapper."
                    };
                }

                if (!(!access_token || 0 === access_token.length)) {
                    paramObj.access_token = access_token; //access token not empty, add it to the parameter object
                }

                //TODO: Make a generic function to handle this call
                FB.api(
                    '/' + user_id + '/news.reads',
                    'post',
                    paramObj,
                    function(response) {
                        var i,
                            message, // response error message
                            exists = false, //assume the words don't exist in the message           
                            probable_words = [  "session has expired",
                                                "session has been invalidated",
                                                "session is invalid",
                                                "has not authorized" ]; //list of words that may denote an invalid token

                        //no response, return
                        if (!response) {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "error",
                                    error   : "No response returned by the server!"
                                }
                            );
                            return;
                        }

                        //some error
                        if (response.error) {
                            message = response.error.message.toLowerCase(); //case insensetive match
                            for (i in probable_words) {
                                if (message.indexOf(probable_words[i]) > -1) {
                                    exists = true;
                                    break;
                                }
                            }
                            if (exists) {
                                _token_valid = false; //denotes invalid token
                            }
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "error",
                                    error   : exists ? "Invalid access token!" : response.error.message
                                }
                            );
                        } else {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "ok",
                                    success : "Successfully read the specified article."
                                }
                            );
                            _buffer.pushToBuffer("data", response);
                            if (typeof callback === 'function') {
                                callback(response.id);
                            }
                        }
                    });
            };

            var _unread = function (articleId, callback) {
                //TODO: Avoid repeated code, make a generic function

                var paramObj = {}; //start with an empty parameter

                //if token is invalid, no further calls are possible, so return
                if (!_isTokenValid()) {
                    //TODO: Provide a better way of handling this
                    throw {
                        status: "error",
                        error : "Provide a valid configuration object to initialize FBJsWrapper."
                    };
                }

                if (!(!access_token || 0 === access_token.length)) {
                    paramObj.access_token = access_token; //access token not empty, add it to the parameter object
                }

                //TODO: Make a generic function to handle this call
                FB.api(
                    articleId,
                    'delete',
                    paramObj,
                    function(response) {
                        var i,
                            message, // response error message
                            exists = false, //assume the words don't exist in the message           
                            probable_words = [  "session has expired",
                                                "session has been invalidated",
                                                "session is invalid",
                                                "has not authorized" ]; //list of words that may denote an invalid token

                        //no response, return
                        if (!response) {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "error",
                                    error   : "No response returned by the server!"
                                }
                            );
                            return;
                        }

                        //some error
                        if (response.error) {
                            message = response.error.message.toLowerCase();//case insensetive match
                            for (i in probable_words) {
                                if (message.indexOf(probable_words[i]) > -1) {
                                    exists = true;
                                    break;
                                }
                            }
                            if (exists) {
                                _token_valid = false; //denotes invalid token
                            }
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "error",
                                    error   : exists ? "Invalid access token!" : response.error.message
                                }
                            );
                        } else {
                            _buffer.pushToBuffer("response",
                                {
                                    status  : "ok",
                                    success : "Successfully unread the specified article."
                                }
                            );
                            _buffer.pushToBuffer("data", response);
                            if (typeof callback === 'function') {
                                callback();
                            }
                        }
                    });
            };

            var _sendAppRequest = function (message, callback) {
                var paramObj = {}; //start with an empty parameter

                if (typeof message === 'function') { //no message only callback provided
                    callback = message;
                    message = 'Invite friends to this app.';
                }

                paramObj.method = 'apprequests';
                paramObj.message = message.toString();
                if (!(!access_token || 0 === access_token.length)) {
                    paramObj.access_token = access_token; //access token not empty, add it to the parameter object
                    paramObj.display = 'iframe'; //access token provided, iframe can be used
                } else {
                    paramObj.display = 'popup'; //no access token present, use popup dialog
                }

                FB.ui(paramObj, function (request, to) {
                    //TODO: Handle the error conditions
                    _buffer.pushToBuffer("response",
                        {
                            status  : "ok",
                            success : "Successfully sent the app request."
                        }
                    );
                    _buffer.pushToBuffer("data", { request: request, to: to });
                    if (typeof callback === 'function') {
                        callback(request, to);
                    }               
                });
            };

            var _init  = function (config) {
                if (typeof config === 'undefined') {
                    throw {
                        status: "error",
                        error : "Provide a valid configuration object to initialize FBJsWrapper."
                    };
                }
                access_token = config.accessToken || "", //assume a blank access token, will try to call FB.api without it
                expires_in = config.expiresIn || 0, //jsonp cross domain calls
                signed_request = config.signedRequest || {}, //signed request parameter
                user_id = config.userID || 'me', //assume 'me' (for a user it's user_id but for pages and apps it might be something else)
                buffer_size = config.bufferSize || 10, //default buffer size
                _buffer = new LocalBuffer(buffer_size); //local buffer object

                //expose the methods and variables
                this.sendAppRequest         = _sendAppRequest; //method for sending the app request from a dialog
                this.share                  = _read; //method to read an article, news.read
                this.unshare                = _unread //method to unread a previously read article
                this.dataFromLastCall       = _buffer.getDataFromBuffer; //last fetched data from the buffer
                this.responseFromLastCall   = _buffer.getResponseFromBuffer; //response from the last roundtrip to server
            };

            //init the object if config is provided while creating
            if (typeof config !== 'undefined') {
                _init(config);
            }

            //expose init
            this.init = _init;
        };
    }());
    /** FB JavaScript SDK wrapper - End **/

    /** The main Utility Class - Start **/
    var FBAppUtil;
    (function () {
        var instance;
        FBAppUtil = function () {
            if (!(this instanceof FBAppUtil)) {
                return new FBAppUtil();
            }
            if (instance) {
                return instance;
            }
            instance = this;

            var _init  = function (config) {
                if (typeof config !== 'undefined'){ 
                    if (typeof config.WPJsonApi !== 'undefined') {                  
                        this.WPJsonApi = new WPJsonApi(config.WPJsonApi); //WPJsonApi configuration provided while init
                    } else {
                        this.WPJsonApi = new WPJsonApi();
                    }
                    if (typeof config.FBJsWrapper !== 'undefined') {                    
                        this.FBJsWrapper = new FBJsWrapper(config.FBJsWrapper); //FBJsWrapper configuration provided while init
                    } else {
                        this.FBJsWrapper = new FBJsWrapper();
                    }
                } else {
                    this.WPJsonApi = new WPJsonApi();
                    this.FBJsWrapper = new FBJsWrapper();
                }
            };

            //expose the methods and variables
            this.init = _init;
        };
    })();
    /** The main Utility Class - End **/

    // Expose the Utility to the global object
    window.FBAppUtil = new FBAppUtil();
})(window); 
```

> ***FBAppUtil.FBJsWrapper.share(someArticleUrl, someCallback);*** ***FBAppUtil.FBJsWrapper.unshare(someId, someCallback);***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T19:40:51.320

开/关发布与**Facebook Graph API**无关，您必须自己实现这一点。应该有一个与用户表相关的标志即 is_publish 。如果用户通过单击用户开/关按钮授予权限，则您可以发布该操作，并且只有当用户在文章页面上停留至少 10 秒时，才能发布更多操作，为此您可以这样做

setTimeout('readArticle()', 10000);

希望这可以帮助！

# c++ - 如何从图像中检测文本区域？

> ID：10206526
> 
> 赞同：10
> 
> 时间：2012-04-18T09:25:02.710
> 
> 标签：c++, image-processing, tesseract, text-extraction

我想从图像中检测文本区域作为 tesseract OCR 引擎的预处理步骤，当输入仅为文本但当输入图像包含非文本内容时，引擎运行良好，所以我只想检测图像中的文本内容，任何如何做到这一点的想法会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T16:41:50.000

看看这个用 OpenCV 代码演示的[边界框技术：](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/)

**输入**：

![在此处输入图像描述](../Images/371210270adb7ef62671fbe284982e7b.png)

**侵蚀**：

![在此处输入图像描述](../Images/f02bca680d068ce5de09c68b99ade54e.png)

**结果**：

![在此处输入图像描述](../Images/bd415589b4cc6dc12271550964f08ae1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:21:05.173

好吧，我在图像处理方面的经验并不丰富，但我希望我的理论方法可以帮助你。

在大多数情况下，文本形成平行的水平行，其中行之间的空间将包含**大量**背景像素。这可以用来解决这个问题。所以......如果你**组合**图像中的每个像素列，你会得到一个 1 像素宽的图像作为输出。当输入图像包含文本时，输出很可能是一个周期性的模式，其中黑暗区域之后是明亮区域反复出现。这些较暗像素的“*组*”将指示文本内容的位置，而较亮的“*组”*" 将指示各行之间的间隙。您可能会发现较亮的区域会比其他区域小得多。文本比任何其他图片元素都更通用，因此应该很容易分开。

您必须实施一个程序来检测这些周期性重复。一旦脚本可以确定输入图片具有这些特征，它就很有可能包含文本。*（但是，这种方法无法区分实际文本和简单的水平条纹......）*

对于下一步，您必须找到一种方法来确定段落的边界，使用上述方法。我正在考虑一个非常虚拟的算法，女巫会将输入图像分成更小、更窄的条纹（50-100 像素），然后分别检查这些区域。然后，它会比较这些结果以构建可能填充文本的区域的地图。这种方法不会那么准确，但它可能不会打扰 OCR 系统。

最后，您需要使用文本映射仅在所需位置运行 OCR。

另一方面，如果输入文本旋转超过 ~3-5 度，此方法将失败。还有另一个倒退，因为如果您只有几行，那么您的模式搜索将非常不可靠。更多行，更准确...

问候，G。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-25T15:58:50.580

我是 stackoverflow.com 的新手，但我写了一个与此类似的问题的答案，这可能对任何分享此问题的读者有用。这个问题是否实际上是重复的，因为这是第一个，我将留给其他人。如果我应该在此处复制并粘贴该答案，请告诉我。我也首先在谷歌上发现了这个问题，而不是我回答的问题，所以这可能会使更多的人受益。特别是因为它提供了获取文本区域的不同方法。对我来说，当我查找这个问题时，它不适合我的问题案例。

[使用python和opencv检测图像中的文本区域](https://stackoverflow.com/a/38554331/6557057)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T18:27:43.510

当前，检测文本的最佳方法是使用 EAST（一种高效且准确的场景文本检测器）

据作者介绍，EAST 管道能够在 720p 图像上预测任意方向的单词和文本行，此外，可以以 13 FPS 的速度运行。

EAST 快速入门教程可以在[这里找到](https://www.pyimagesearch.com/2018/08/20/opencv-text-detection-east-text-detector/)

东纸可以在[这里找到](https://arxiv.org/abs/1704.03155)

# python - 在 2.7.3 OSX Lion 中使用 panda3D

> ID：10206527
> 
> 赞同：2
> 
> 时间：2012-04-18T09:25:13.483
> 
> 标签：python, .bash-profile, panda3d

我目前在 Panda3D 附带的 ppython 版本中使用 Panda3D。但是如何将 Panda3D 链接到 OSX Lion 2.7.1 附带的 python 版本？

我阅读了有关 ~/.bash_profile 的内容，并尝试了以下内容，包括 bash 配置文件的其余部分：

```
# Setting PATH for EPD-7.2-2
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/EPD64.framework/Versions/Current/bin:${PATH}"
export PATH

export PYTHONPATH="/Developer/Panda3D/lib/direct":$PYTHONPATH

export PYTHONPATH

MKL_NUM_THREADS=1
export MKL_NUM_THREADS 
```

但我仍然得到一个

```
ImportError: No module named direct.showbase.ShowBase 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:07:52.933

以下两行在 Lion 上对我有用（我还必须将 python 设置为更喜欢 32 位）

```
sudo cp /Library/Python/2.5/site-packages/Panda3D.pth /Library/Python/2.7/site-packages/
export VERSIONER_PYTHON_PREFER_32_BIT=yes 
```

导出命令应放入 .bashrc 或等效文件中。

# c# - 自定义状态栏被 SAP 的默认状态栏抑制

> ID：10206532
> 
> 赞同：0
> 
> 时间：2012-04-18T09:25:40.873
> 
> 标签：c#, sapb1

我正在尝试根据项目名称查找项目。如果项目存在状态栏，则显示“找到项目”，否则显示未找到项目。我的问题是状态栏不保留。它被 SAP 的默认状态栏操作覆盖成功点击按钮。我怎样才能防止这种情况发生。我使用的代码是

> 公共 SAPbouiCOM.BoStatusBarMessageType mt; mt = SAPbouiCOM.BoStatusBarMessageType.smt_Error；SapApp.StatusBar.SetText("找不到项目",SAPbouiCOM.BoMessageTime.bmt_Medium,SAPbouiCOM.BoStatusBarMessageType)mt);

即使尝试这种方式它也不起作用

> SapApp.SetStatusBarMessage("找不到项目", SAPbouiCOM.BoMessageTime.bmt_Medium, true);

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:25:12.523

训练是设置 **BubbleEvent =False**

# keyboard-shortcuts - 突出显示网页中文本的键盘快捷键

> ID：10206537
> 
> 赞同：1
> 
> 时间：2012-04-18T09:25:59.783
> 
> 标签：keyboard-shortcuts

我想知道是否有任何键盘快捷键可以突出显示网页（在 IE 或 Firefox 中）中的文本（可能是行或段落）。使用鼠标我们将不得不选择整行/文本，有时非常麻烦。我需要的是从网页中选择文本并将文本复制到记事本中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:31:26.753

您所需要的只是插入符号浏览。

IE 8 以后：

1.  按 F7。

2.  单击页面按钮，然后单击插入符号浏览。

3.  单击是以打开插入符号浏览。

为所有新窗口和选项卡打开插入符号浏览

1.  单击工具按钮，然后单击 Internet 选项。

2.  单击高级选项卡。

3.  在“辅助功能”下，选中“为新窗口和选项卡启用插入符号浏览”复选框，然后单击“确定”。

资料来源：[http ://windows.microsoft.com/en-US/windows-vista/How-can-I-select-text-and-move-around-a-webpage-with-my-keyboard?SignedIn=1](http://windows.microsoft.com/en-US/windows-vista/How-can-I-select-text-and-move-around-a-webpage-with-my-keyboard?SignedIn=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-17T07:26:29.863

尝试以下方法可以节省大量鼠标滚动。将鼠标光标放在要选择的文本块的开头并单击鼠标左键 - 如果在该位置没有看到垂直光标线，请不要担心。然后将鼠标光标放在要选择的文本块的末尾，如有必要，首先使用 Web 浏览器滚动条将该位置显示出来，然后按 SHIFT + 左键单击。当我在 Firefox 中执行此操作时，选定的文本块以蓝色背景突出显示，准备复制 - 在 IE 中试一试，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T17:28:48.673

对于 Chrome 中的我（运行 Windows 10），我使用 CTRL + ALT，然后选择文本。

# eclipse - 如何将外部文件添加到在 Eclipse 中使用 Jboss 运行的 webapp 类路径？

> ID：10206541
> 
> 赞同：0
> 
> 时间：2012-04-18T09:26:04.790
> 
> 标签：eclipse, jboss, eclipse-wtp

我的工作区中有三个项目：

*   prjData，一个“简单”项目（没有 java 也没有任何其他方面），包括许多配置文件（xml、属性等）
*   prjWeb，一个“动态网络”项目
*   prjEar，一个耳朵项目，它的“项目参考”中有 prjWeb

我尝试从 Eclipse (helios) 内部将 prjEar 部署在 JBoss 4.2 上。

我创建了服务器（在服务器视图中），然后在其 wtp 启动器的类路径中添加了 prdData/config（双击服务器项，然后从概览窗口中，单击“打开启动配置”，选择类路径选项卡，高级/添加文件夹）。

当我从服务器视图启动服务器时，控制台视图确认 Jboss 启动了 webapp，但在所有需要实际位于此附加类路径文件夹中的配置文件（如 log4j 或 OJB 配置）的任务上都失败了。

我习惯用 Tomcat 做到这一点，而且效果很好。但是对于当前的项目，必须坚持使用 JBoss。

Jboss和webapp考虑（或不考虑）在wtp启动器视图中设置的类路径附加文件夹的方式有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:09:15.957

实际上，Eclipse/WTP 将文件夹添加到 JBoss 运行时并没有错。

问题来自我对 OJB 配置加载的错误理解。

我正在处理一个现有的应用程序，其中 repository.xml 文件被拆分为通过 xml 实体包含的部分。这些片段位于 prjData 的不同文件夹中，但 prjData 被配置为一个 java 项目，具有尽可能多的“源”目录。然后 prjData 作为 java 子模块包含在 prjWeb 中，因此这些“源”目录中的部分都在 WEB-INF/classes 中的同一位置结束，这让 JBoss 很高兴。

当我决定打破 prjData 的 Java 特性并将其包含在 prjWeb 中替换为类路径包含时，问题就出现了。然后所有部分都在类路径中，但仍在不同的文件夹中。

当 repository.xml 尝试解析其 xml 实体时，它未能找到碎片（因为它通过文件系统组织查找文件，而不是当前的 java 类路径），从而导致整个应用程序无法启动。

我只需要更改 xml 实体声明中的文件组织和相对路径即可使其再次工作。

# objective-c - 如何将图像添加到滚动视图中并将滚动视图添加到表格单元格中？

> ID：10206542
> 
> 赞同：1
> 
> 时间：2012-04-18T09:26:06.303
> 
> 标签：objective-c, uiscrollview

嗨，我正在编写类似于 Pulse 新闻应用程序 (http://www.pulse.me/) 的教程，我不确定如何在表格单元格上进行滚动。我明白了，这个应用程序 + 图像项中的每个表格单元格都有滚动条。

我真的不知道如何开始。以前有人在表格单元格中做这个滚动+图像吗？请帮帮我，如果有代码示例就更大了。

提前致谢

# android - 单个设备突然停止从我的服务器接收 C2DM 推送

> ID：10206548
> 
> 赞同：4
> 
> 时间：2012-04-18T09:26:45.900
> 
> 标签：android, push-notification, android-c2dm

我们有一个工作应用程序和服务器，它使用 C2DM 将消息推送到 Android 设备。

两天前，我们的一台测试设备停止接收来自服务器的推送。

*   服务器发送到的 deviceRegistrationId 似乎已更新且正确，设备具有网络连接，并且使用 Gtalk 等 C2DM 的谷歌应用程序在其上正常工作。

*   服务器从 Google 的 C2DM 服务器获得成功响应，正确响应为“ `id=0:133467...61+ac67f...66`”

*   在此之前，该设备已正确接受推送。

*   我们的应用程序已投放市场，每天都有很多用户使用，我们还没有收到任何类似的用户投诉（这并不意味着它不会发生在我们的一些用户身上）

有什么想法可以进一步检查以了解这一点吗？

有没有办法使用从 C2DM 服务器收到的 id 来检查特定消息发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:41:46.213

我不知道有任何报告来跟踪消息。

我要检查的第一件事是您发送消息的注册 ID 仍然是设备正在使用的注册 ID - 如果它们不匹配，可能会导致您看到的内容。

我见过几个设备突然停止接收 C2DM 消息。在我们的例子中，重新启动设备通常会修复它。

我见过的另一种情况是特定网络上的设备不接收消息（特别是某些 wifi 网络）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:40:32.257

C2DM 服务器上的身份验证密钥会频繁更改每次都获取密钥吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:18:52.310

Google 正在更改其客户端登录过期政策。他们正在新标头中发送数据以更新我的注册，您需要更改代码才能使其正常工作。

以下是详细信息：[http ://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html?m=1](http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html?m=1)

# .net - VB.Net - 自动更新给用户

> ID：10206555
> 
> 赞同：0
> 
> 时间：2012-04-18T09:27:40.687
> 
> 标签：.net, vb.net, time, auto-update

我正在 Vb.net 中设计一个 Windows 应用程序。当我运行应用程序时，它需要检查当前时间并提醒我一些我已经定义的任务。我可以通过什么方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:49:18.197

您需要将您的任务存储在某个地方（数据库、文件等），并有一个与之关联的截止日期和时间。

当您的应用程序运行时，您会在数据中找到到期日期早于当前日期和时间的所有任务。

例如，如果您将任务存储在 sql server 数据库中，您可以运行类似于以下内容的查询：

```
Dim sql As String = "SELECT * FROM Tasks WHERE DueDate < @DueDate"
Using cn As New SqlConnection("Your connection string here"), _
    cmd As New SqlCommand(sql, cn)
    cmd.Parameters.Add("@DueDate", SqlDbType.DateTime).Value = DateTime.Now
    Dim reader As SqlDataReader = cmd.ExecuteReader
    While reader.Read
        Debug.WriteLine(reader(0))
    End While
End Using 
```

这应该让你开始

# c# - C# 强制转换字典 到字典 （涉及反射）

> ID：10206557
> 
> 赞同：13
> 
> 时间：2012-04-18T09:27:46.920
> 
> 标签：c#, reflection, casting

是否可以将 a`Dictionary<string, Anything>`转换为一致的中间泛型类型？所以我可以将`<string, string>`, `<string, bool>`, `<string, int>`,`<string, anything>`全部转换为相同类型的字典？

我正在开发一个使用大量反射的项目，我需要能够处理这样的 DIctionary 类型：

```
FieldInfo field = this.GetType().GetField(fieldName);
Dictionary<string, Object> dict = (Dictionary<string, Object>)field.GetValue(this); 
```

上面的代码是我目前拥有的，程序总是在从 field.GetValue 转换为 generic 时失败`Dictionary<string, Object>`。

有没有办法做到这一点？还是我应该想出一种不同的方式来处理这些字典？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T10:20:46.030

按照[AakashM 的回答](https://stackoverflow.com/a/10206944/113787)，Cast 似乎没有打球。不过，您可以通过使用一些辅助方法来解决它：

```
IDictionary dictionary = (IDictionary)field.GetValue(this);
Dictionary<string, object> newDictionary = CastDict(dictionary)
                                           .ToDictionary(entry => (string)entry.Key,
                                                         entry => entry.Value);

private IEnumerable<DictionaryEntry> CastDict(IDictionary dictionary)
{
    foreach (DictionaryEntry entry in dictionary)
    {
        yield return entry;
    }
} 
```

在这种情况下，输入 foreach 的鸭子很方便。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-18T09:30:58.483

这对你有帮助吗？

```
Dictionary<a, b> output =
   input.ToDictionary(item => item.Key, item => (SomeType)item.Value); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-18T09:51:37.990

即使你能找到某种方式来表达这一点，那也是错误的做法—— a`Dictionary<string, bool>` **不是**a `Dictionary<string, object>`，所以我们绝对不想**强制转换**。考虑一下，如果我们*可以*转换，我们可以尝试将 a`string`作为一个值，这显然不合适！

然而，我们可以做的是强制转换为非泛型`IDictionary`（所有`Dictionary<,>`s 都实现），然后使用它来构造具有相同值的*new ：* `Dictionary<string, object>`

```
FieldInfo field = this.GetType().GetField(fieldName);
IDictionary dictionary = (IDictionary)field.GetValue(this);
Dictionary<string, object> newDictionary = 
    dictionary
    .Cast<dynamic>()
    .ToDictionary(entry => (string)entry.Key,
                  entry => entry.Value); 
```

`.Cast<DictionaryEntry>`（请注意，由于此处[讨论的原因](https://stackoverflow.com/a/9713698)，您不能在此处使用。如果您是 C# 4 之前的版本，因此没有`dynamic`，则必须手动进行枚举，正如[Gibsnag 的回答所做的那样](https://stackoverflow.com/a/10207397/71059)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-21T22:07:34.783

当我偶然发现同样的情况时，我创建了以下助手：

```
/// <summary>
/// Casts a dictionary object to the desired Dictionary type.
/// </summary>
/// <typeparam name="TKey">The target Key type.</typeparam>
/// <typeparam name="TValue">The target value type.</typeparam>
/// <param name="dictionary">The dictionary to cast.</param>
/// <returns>A copy of the input dictionary, casted to the provided types.</returns>
private Dictionary<TKey, TValue> CastDictionary<TKey, TValue>(IDictionary dictionary)
{
    // Get the dictionary's type.
    var dictionaryType = typeof(Dictionary<TKey, TValue>);

    // If the input is not a dictionary.
    if (dictionaryType.IsAssignableFrom(typeof(Dictionary<,>)))
    {
        // Throw an exception.
        throw new Exception("The cast to a dictionary failed: The input object is not a dictionary.");
    }

    // Get the generic arguments of the dictionary.
    var arguments = dictionaryType.GetGenericArguments();

    // If the first type of the dictionary is not a descendant of TKey.
    if (!(arguments[0] is TKey || arguments[0].IsAssignableFrom(typeof(TKey)))
        // Or its second type is not a descendant of TValue.
        || !(arguments[1] is TValue || arguments[1].IsAssignableFrom(typeof(TValue))))
    {
        // Throw an exception.
        throw new Exception("The cast to a dictionary failed: The input dictionary's signature does not match <" + typeof(TKey).Name + ", " + typeof(TValue).Name + ">");
    }

    // Get the dictionary's default constructor.
    var constructor = dictionaryType.GetConstructor(Type.EmptyTypes);

    // Create a new dictionary.
    var output = (Dictionary<TKey, TValue>)constructor.Invoke(null);

    // Loop through the dictionary's entries.
    foreach (DictionaryEntry entry in dictionary)
    {
        // Insert the entries.
        output.Add((TKey)entry.Key, (TValue)entry.Value);
    }

    // Return the result.
    return output;
} 
```

可以在您的情况下使用如下：

```
FieldInfo field = (IDictionary)this.GetType().GetField(fieldName);

Dictionary<string, Object> dict = CastDictionary<string, Object>(field.GetValue(this)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-03T17:25:42.873

## 问题说明：差异

如[本答案](https://stackoverflow.com/a/10206944/5134722)所述：

> `Dictionary<string, bool>`a不是真的`Dictionary<string,object>`

让我解释一下为什么。这一切都与C# 中的[协变和逆变有关。](https://docs.microsoft.com/en-us/dotnet/standard/generics/covariance-and-contravariance)总之，在整个字典中，键类型和值类型都不是纯粹的输入参数或输出参数`K`。因此，任何泛型类型都不能转换为更弱或更强的类型。`V``Dictionary<K, V>`

如果您转换为较弱的类型，那么您会破坏输入。例如`Add`，期望类型`K, V`或更强大的函数不能接受任何一个的超类型`K, V`。如果您转换为更强的类型，则会破坏输出。例如， indexer 属性返回一个 type `V`。我们如何才能安全地将其转换为 的子类型`V`，只知道原始类型是`V`？我们不能。

## 使用变体泛型的类型安全部分解决方案

有一种方法允许强类型转换，但仅限于原始字典接口的部分片段，这些片段在泛型参数的协变/逆变方面是一致的。此解决方案使用实现了一堆部分接口的包装器类型。每个部分接口都有一个特定类型的键/值类型的协方差组合。然后我们将所有这些部分接口组合成一个主接口，并通过一个作为常规字典的支持对象来实现它。开始。一、接口：

```
public interface IDictionaryBase
{
    int Count { get; }
    bool IsReadOnly { get; }
    void Clear();
}

public interface IInKeyInValueSemiDictionary<in K, in V> : IDictionaryBase, IInKeySemiDictionary<K>
{
    V this[K key] { set; }
    void Add(K key, V value);
}

public interface IInKeyOutValueSemiDictionary<in K, out V> : IDictionaryBase, IInKeySemiDictionary<K>, IOutValueSemiDictionary<V>
{
    V this[K key] { get; }
    ISuccessTuple<V> TryGetValue(K key);
}

public interface ISuccessTuple<out V>
{
    bool WasSuccessful { get; }
    V Value { get; }
}

public class SuccessTupleImpl<V> : ISuccessTuple<V>
{
    public bool WasSuccessful { get; }
    public V Value {get;}

    public SuccessTupleImpl(bool wasSuccessful, V value)
    {
        WasSuccessful = wasSuccessful;
        Value = value;
    }
}

public interface IInKeySemiDictionary<in K> : IDictionaryBase
{
    bool ContainsKey(K key);
    bool Remove(K key);
}

public interface IOutKeySemiDictionary<out K> : IDictionaryBase
{
    IEnumerable<K> Keys { get; }
}

public interface IOutValueSemiDictionary<out V> : IDictionaryBase
{
    IEnumerable<V> Values { get; }
} 
```

注意：对于泛型参数，我们不必在这里涵盖所有的输入/输出组合，还要注意一些接口只需要一个泛型参数。原因是一些协变/逆变的组合没有任何关联的方法，因此不需要相应的类型。请注意，我忽略了`KeyValuePair<K, V>`类型——如果你想包含它，你需要在这个上做一个类似的技巧，而且在这个阶段它似乎不值得。

所以，接下来，所有这些接口的联合：

```
public interface IVariantDictionary<K, V> : IInKeyInValueSemiDictionary<K, V>, IInKeyOutValueSemiDictionary<K, V>,
    IOutKeySemiDictionary<K>, IDictionary<K, V>
{ } 
```

然后，包装类：

```
class VariantDictionaryImpl<K, V> : IVariantDictionary<K, V>
{
    private readonly IDictionary<K, V> _backingDictionary;

    public VariantDictionaryImpl(IDictionary<K, V> backingDictionary)
    {
        _backingDictionary = backingDictionary ?? throw new ArgumentNullException(nameof(backingDictionary));
    }

    public V this[K key] { set => _backingDictionary[key] = value; }

    V IInKeyOutValueSemiDictionary<K, V>.this[K key] => _backingDictionary[key];

    V IDictionary<K, V>.this[K key] { get => _backingDictionary[key]; set => _backingDictionary[key] = value; }

    public int Count => _backingDictionary.Count;

    public bool IsReadOnly => _backingDictionary.IsReadOnly;

    public IEnumerable<K> Keys => _backingDictionary.Keys;

    public ICollection<V> Values => _backingDictionary.Values;

    ICollection<K> IDictionary<K, V>.Keys => _backingDictionary.Keys;

    IEnumerable<V> IOutValueSemiDictionary<V>.Values => Values;

    public void Add(K key, V value)
    {
        _backingDictionary.Add(key, value);
    }

    public void Add(KeyValuePair<K, V> item)
    {
        _backingDictionary.Add(item);
    }

    public void Clear()
    {
        _backingDictionary.Clear();
    }

    public bool Contains(KeyValuePair<K, V> item)
    {
        return _backingDictionary.Contains(item);
    }

    public bool ContainsKey(K key)
    {
        return _backingDictionary.ContainsKey(key);
    }

    public void CopyTo(KeyValuePair<K, V>[] array, int arrayIndex)
    {
        _backingDictionary.CopyTo(array, arrayIndex);
    }

    public IEnumerator<KeyValuePair<K, V>> GetEnumerator()
    {
        return _backingDictionary.GetEnumerator();
    }

    public bool Remove(K key)
    {
        return _backingDictionary.Remove(key);
    }

    public bool Remove(KeyValuePair<K, V> item)
    {
        return _backingDictionary.Remove(item);
    }

    public ISuccessTuple<V> TryGetValue(K key)
    {
        bool wasSuccessful = _backingDictionary.TryGetValue(key, out V v);
        return new SuccessTupleImpl<V>(wasSuccessful, v);
    }

    public bool TryGetValue(K key, out V value)
    {
        return _backingDictionary.TryGetValue(key, out value);
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return ((IEnumerable)_backingDictionary).GetEnumerator();
    }
} 
```

在此类中包装字典后，您可以将其用作常规字典或定义的任何协变/逆变片段接口类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-04T08:45:53.867

是的，可以将其`FieldInfo`转换`Dictionary`为如下

这是一个例子，我在我的代码中使用过

```
Dictionary<string, string> 
                GetTheDict = FilesAndPaths.GetType()
                             .GetFields()
                             .Where(f => f.Name.Equals(pLoadFile))
                             .Select(f => (Dictionary<string, string>)f.GetValue(FilesAndPaths))
                             .Single(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-26T14:58:06.107

考虑是否`object`真的有必要进行转换。我开始走这条路，偶然发现了这篇文章，然后才意识到我可以通过泛型而不是转换来实现我所需要的。例如;

```
class DictionaryUtils<T>
{
    public static T ValueOrDefault(IDictionary<string, T> dictionary, string key)
    {
        return dictionary.ContainsKey(key) ? dictionary[key] : default(T);
    }
} 
```

这段代码更干净，并且比其他答案中显示的等效转换代码更快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-05T08:46:00.860

我有同样的情况，并创建了一个 WrapperDictionary 类和一个强制转换扩展方法。如果您还想对它进行操作（例如删除项目），会发现它很有帮助。

例子：

```
 const string TestKey1 = "Key";
        const string TestValue1 = "Value";
        var dict = new Dictionary<string, string>();
        dict.Add(TestKey1, TestValue1);

        var wrapper = dict.CastDictionary<string, string, string, object>();

        wrapper.Remove(TestKey1); 
```

代码：

```
public class DictionaryWrapper<TKeyTarget, TValueTarget, TKeySource, TValueSource> : IDictionary<TKeyTarget, TValueTarget>
{
    #region types

    private class EnumeratorWrapper : IEnumerator<KeyValuePair<TKeyTarget, TValueTarget>>
    {
        private readonly IEnumerator<KeyValuePair<TKeySource, TValueSource>> _enumerator;
        private readonly DictionaryWrapper<TKeyTarget, TValueTarget, TKeySource, TValueSource> _dictionaryWrapper;

        public EnumeratorWrapper(IEnumerator<KeyValuePair<TKeySource, TValueSource>> enumerator, DictionaryWrapper<TKeyTarget, TValueTarget, TKeySource, TValueSource> dictionaryWrapper)
        {
            _enumerator = enumerator;
            _dictionaryWrapper = dictionaryWrapper;
        }

        public void Dispose()
        {
            _enumerator.Dispose();
        }

        public bool MoveNext()
        {
            return _enumerator.MoveNext();
        }

        public void Reset()
        {
            _enumerator.Reset();
        }

        public KeyValuePair<TKeyTarget, TValueTarget> Current => _dictionaryWrapper._kvpSourceToTargetFunc(_enumerator.Current);

        object IEnumerator.Current => Current;
    }

    #endregion

    #region fields

    private readonly IDictionary<TKeySource, TValueSource> _dictionary;
    private readonly Func<TKeySource, TKeyTarget> _keySourceToTargetFunc;
    private readonly Func<TKeyTarget, TKeySource> _keyTargetToSourceFunc;
    private readonly Func<TValueSource, TValueTarget> _valueSourceToTargetFunc;
    private readonly Func<TValueTarget, TValueSource> _valueTargetToSourceFunc;
    private readonly Func<KeyValuePair<TKeySource, TValueSource>, KeyValuePair<TKeyTarget, TValueTarget>> _kvpSourceToTargetFunc;
    private readonly Func<KeyValuePair<TKeyTarget, TValueTarget>, KeyValuePair<TKeySource, TValueSource>> _kvpTargetToSourceFunc;

    #endregion

    #region Construction

    public DictionaryWrapper(
        IDictionary<TKeySource, TValueSource> dict, 
        Func<TKeySource, TKeyTarget> keySourceToTargetFunc = null,
        Func<TKeyTarget, TKeySource> keyTargetToSourceFunc = null, 
        Func<TValueSource, TValueTarget> valueSourceToTargetFunc = null, 
        Func<TValueTarget, TValueSource> valueTargetToSourceFunc = null)
    {
        _dictionary = dict;
        _keySourceToTargetFunc = keySourceToTargetFunc ?? (i => (TKeyTarget) (object) i);
        _keyTargetToSourceFunc = keyTargetToSourceFunc ?? (i => (TKeySource) (object) i);
        _valueSourceToTargetFunc = valueSourceToTargetFunc ?? (i => (TValueTarget) (object) i);
        _valueTargetToSourceFunc = valueTargetToSourceFunc ?? (i => (TValueSource) (object) i);
        _kvpSourceToTargetFunc = 
            kvp => new KeyValuePair<TKeyTarget, TValueTarget>(_keySourceToTargetFunc(kvp.Key), _valueSourceToTargetFunc(kvp.Value));
        _kvpTargetToSourceFunc = 
            kvp => new KeyValuePair<TKeySource, TValueSource>(_keyTargetToSourceFunc(kvp.Key), _valueTargetToSourceFunc(kvp.Value));
    }

    #endregion

    #region Interface Members

    public IEnumerator<KeyValuePair<TKeyTarget, TValueTarget>> GetEnumerator()
    {
        return new EnumeratorWrapper(_dictionary.GetEnumerator(), this);
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(KeyValuePair<TKeyTarget, TValueTarget> item)
    {
        _dictionary.Add(_kvpTargetToSourceFunc(item));
    }

    public void Clear()
    {
        _dictionary.Clear();
    }

    public bool Contains(KeyValuePair<TKeyTarget, TValueTarget> item)
    {
        return _dictionary.Contains(_kvpTargetToSourceFunc(item));
    }

    public void CopyTo(KeyValuePair<TKeyTarget, TValueTarget>[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool Remove(KeyValuePair<TKeyTarget, TValueTarget> item)
    {
        return _dictionary.Remove(_kvpTargetToSourceFunc(item));
    }

    public int Count => _dictionary.Count;
    public bool IsReadOnly => _dictionary.IsReadOnly;
    public bool ContainsKey(TKeyTarget key)
    {
        return _dictionary.ContainsKey(_keyTargetToSourceFunc(key));
    }

    public void Add(TKeyTarget key, TValueTarget value)
    {
        _dictionary.Add(_keyTargetToSourceFunc(key), _valueTargetToSourceFunc(value));
    }

    public bool Remove(TKeyTarget key)
    {
        return _dictionary.Remove(_keyTargetToSourceFunc(key));
    }

    public bool TryGetValue(TKeyTarget key, out TValueTarget value)
    {
        var success = _dictionary.TryGetValue(_keyTargetToSourceFunc(key), out TValueSource result);
        value = success ? _valueSourceToTargetFunc(result) : default;
        return success;
    }

    public TValueTarget this[TKeyTarget key]
    {
        get => _valueSourceToTargetFunc(_dictionary[_keyTargetToSourceFunc(key)]);
        set => _dictionary[_keyTargetToSourceFunc(key)] = _valueTargetToSourceFunc(value);
    }

    public ICollection<TKeyTarget> Keys => _dictionary.Keys.Select(k => _keySourceToTargetFunc(k)).ToList();
    public ICollection<TValueTarget> Values => _dictionary.Values.Select(v => _valueSourceToTargetFunc(v)).ToList();

    #endregion
}

public static class DictionaryWrapperExtensions
{
    public static IDictionary<TKeyCasted, TValueCasted> CastDictionary<TKey, TValue, TKeyCasted, TValueCasted>(this IDictionary<TKey, TValue> dictionary)
    {
        return new DictionaryWrapper<TKeyCasted,TValueCasted,TKey,TValue>(dictionary);
    }
} 
```

# c - 函数返回类型作为指针为什么不作为 int，同时返回变量的地址

> ID：10206559
> 
> 赞同：0
> 
> 时间：2012-04-18T09:27:58.673
> 
> 标签：c, pointers

我有一个功能如下

```
int* foo() {
int temp;
return(&temp); //address of temp variable. 
```

编写相同的函数有什么问题

```
int foo() {
    int temp;
    return(&temp); //address of temp variable.
    } 
```

因为“&”运算符返回的内存位置的地址是一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:37:41.923

编译器不按数字逻辑。对于它来说，`&temp`是一个指针，只是`temp`一个整数，并且**是不同的类型**，即使两者都是下面的数字流。

只有强制转换才能让编译器相信你的逻辑。

就像是

```
return (int)&temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:50:01.620

int * 不是 int 并且 c 是一种强类型语言。您知道内存中的所有内容都可以读取为数字，但您不能将所有内容都解释为 int。

顺便说一句，返回本地（堆栈）变量的地址似乎没用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:36:00.180

第一个示例将返回一个指向 temp 的指针（这没有意义，因为 temp 超出了范围，因此被删除）

第二个例子将把 temp 的地址作为一个整**数值**放在函数的返回值中，这只有在你想出于某种目的打印地址值时才有用。

所以写第二个例子是错误的，因为你需要将 int 转换为 int* 才能像指针一样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:37:00.027

这是真的，但是编译器对表示地址的整数是严格的，它不会让您将它们隐含地视为整数。而是尝试`return ((int)&temp);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:18:55.223

Both functions as you give them are fundamentally wrong since you return the address of a local variable. Such an address is invalid as soon as you finish the execution of your function. Just don't do that, this is **undefined behavior**, anything can happen if you try to access that object.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T11:29:22.560

int(integer type) and int*(address) are both integer values but can be of different size. Say if int occupies a byte in memory and if we returned a 32 bit address there would be a memory overflow.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T11:42:46.520

Because a pointer value is *not* just an integer. Yes, you can return an integer *representation* of a pointer value, but that's not the same thing as returning a pointer, because the semantics of integers and pointers are different. You can't dereference an integer type, for example, and pointer arithmetic is not the same as integer arithmetic.

For example, take this program (compiled as C99):

```
#include <stdio.h>

int main(void)
{
  int       x      = 0;
  char    *cp      = 0;
  int     *ip      = 0;
  double (*ap)[10] = 0;

  printf("sizeof  x = %zu,  x = %d,  x + 1 = %d\n", sizeof x, x, x + 1);
  printf("sizeof cp = %zu, cp = %d, cp + 1 = %d\n", sizeof cp, (int) cp, (int) (cp + 1));
  printf("sizeof ip = %zu, ip = %d, ip + 1 = %d\n", sizeof ip, (int) ip, (int) (ip + 1));
  printf("sizeof ap = %zu, ap = %d, ap + 1 = %d\n", sizeof ap, (int) ap, (int) (ap + 1));

  return 0;
} 
```

Now, if you think of pointers as just integer values, you'd expect to see the same results for all those print statements. However, here's the output on my system:

```
sizeof  x = 4,  x = 0,  x + 1 = 1
sizeof cp = 4, cp = 0, cp + 1 = 1
sizeof ip = 4, ip = 0, ip + 1 = 4
sizeof ap = 4, ap = 0, ap + 1 = 80 
```

Even though all the pointers have the same size and representation as an integer (at least on my system), the results of adding 1 to each pointer value gives me a different result based on the pointer type. `cp + 1` will give me the location of the next `char` value, while `ip + 1` will give me the location of the next `int` value, and `ap + 1` will give me the location of the next `double [10]` (10-element array of `double`) value.

Not to mention the logic of both your examples is flawed; when you return from the function, `temp` no longer exists and the pointer value you return is no longer valid.

**EDIT**

Just remembered something else; you'll get a diagnostic since you're attempting to convert a pointer value to an integer without an explicit cast, which is a constraint violation. Chapter and verse:

> **6.5.16.1 Simple assignment**
> 
> **Constraints**
> 
> 1 One of the following shall hold:^(96))
> 
> — the left operand has qualified or unqualified arithmetic type and the right has arithmetic type;
> 
> — the left operand has a qualified or unqualified version of a structure or union type compatible with the type of the right;
> 
> — both operands are pointers to qualified or unqualified versions of compatible types, and the type pointed to by the left has all the qualifiers of the type pointed to by the right;
> 
> — one operand is a pointer to an object or incomplete type and the other is a pointer to a qualified or unqualified version of void, and the type pointed to by the left has all the qualifiers of the type pointed to by the right;
> 
> — the left operand is a pointer and the right is a null pointer constant; or
> 
> — the left operand has type _Bool and the right is a pointer.
> 
> ...
> **6.8.6.4 The return statement**
> ...
> 3 If a return statement with an expression is executed, the value of the expression is returned to the caller as the value of the function call expression. If the expression has a type different from the return type of the function in which it appears, the value is converted as if by assignment to an object having the return type of the function.^(139))

# c++ - 如何创建 802.11 帧？

> ID：10206563
> 
> 赞同：3
> 
> 时间：2012-04-18T09:28:06.723
> 
> 标签：c++, c, sockets, networking, wifi

有人如何以编程方式创建 802.11 帧？

在这一边，解释了 802.11 MAC 帧的外观。 [http://technet.microsoft.com/en-us/library/cc757419(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc757419(v=ws.10).aspx)

是否可以使用 Berkeley Socket API 创建 802.11 MAC 帧？还是有另一个图书馆可以做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:53:35.917

您将需要一种称为帧注入的东西（带有 radiotap 标头）。它可以通过 libpcap 和 pcap_inject 函数轻松完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:41:10.083

您想要做的是称为[原始套接字](http://en.wikipedia.org/wiki/Raw_socket)。是的，大多数 Berkely 套接字 API 都支持原始套接字访问。请注意，您可能需要在您选择的操作系统上提升权限才能被允许制作和发送原始数据包。存在被利用的风险，这就是为什么它经常受到限制。

[本手册页](http://linux.die.net/man/7/raw)描述了 Linux 中对原始套接字的支持。

# javascript - jQuery.ajax 没有读取成功：function()

> ID：10206570
> 
> 赞同：0
> 
> 时间：2012-04-18T09:28:24.647
> 
> 标签：javascript, jquery, .net, json

我是网络编程新手。我在这里使用 ajax 时遇到问题，我正在读取返回的 json beig。要求是使用 Internet Explorer 浏览器，所以我在这里真的别无选择，只能使用它。我的问题是该功能未成功执行。我不太确定为什么，因为即使是错误也没有显示任何内容，所以我应该如何从这里开始。这段代码是由我的一位刚刚离开并辞职的同事提供的，现在我最终接受了他的工作。

下面是我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>ACES Wallboard</title>
        <link href="StyleSheet.css" rel="Stylesheet" type="text/css" />
        <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            <!--
            //var obj = jQuery.parseJSON('{"key": [{ "name": "ciq" },{ "name": "lwt" }],"value": [{ "ciq": "3", "lwt": "12" }]}');
            //window.onload = function() {
            //while (true) {
            //ajax request
            //for (var i = 0; i < obj.key.length; i++) {
            //    jQuery("#" + obj.key[i].name).html(obj.value[0][obj.key[i].name]);
            //}
            //sleep
            //}
            //}
            window.onload = function () {

                function errorAlert(e, jxr)
                {
                    alert("Your request is not successful. " + jxr);
                }

                jQuery.ajax(
                    {
                        type: "POST",
                        async: true,
                        url: 'WallboardHandler.ashx',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (obj) {
                            for (var i = 0; i < obj.key.length; i++) {
                                jQuery("#" + obj.key[i].name).html(obj.value[0][obj.key[i].name]);
                            }
                        }
                        error: errorAlert
                    });
            };
            //-->
        </script>
    </head>
    <body>
        <div>
            <div class="panelstyle">
                <div class="ciqrowstyle">Call in Queue: <span id="ciq">&nbsp;</span> Calls</div>
                <div class="lwtrowstyle">Longest Waiting Time: <span id="lwt">&nbsp;</span></div>
                <div>
                    <table style="border:5px solid black;font-family:Tahoma;font-size:50px;color:black" width="100%">
                        <tr style="background-color:SteelBlue;font-weight:bold;color:White;">
                            <td class="gridheader">&nbsp;</td>
                            <td class="gridheader">Avail</td>
                            <td class="gridheader">Unavail</td>
                            <td class="gridheader">Eng</td>
                            <td class="gridheader">Other</td>
                        </tr>
                        <tr>
                            <td class="rowstyle">HQ</td>
                            <td id="11" class="rowstyle">&nbsp;</td>
                            <td id="12" class="rowstyle">&nbsp;</td>
                            <td id="13" class="rowstyle">&nbsp;</td>
                            <td id="14" class="rowstyle">&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="alternatingrowstyle">CDA</td>
                            <td id="21" class="alternatingrowstyle">&nbsp;</td>
                            <td id="22" class="alternatingrowstyle">&nbsp;</td>
                            <td id="23" class="alternatingrowstyle">&nbsp;</td>
                            <td id="24" class="alternatingrowstyle">&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="rowstyle">Div 1</td>
                            <td id="31" class="rowstyle">&nbsp;</td>
                            <td id="32" class="rowstyle">&nbsp;</td>
                            <td id="33" class="rowstyle">&nbsp;</td>
                            <td id="34" class="rowstyle">&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="alternatingrowstyle">Div 2</td>
                            <td id="41" class="alternatingrowstyle">&nbsp;</td>
                            <td id="42" class="alternatingrowstyle">&nbsp;</td>
                            <td id="43" class="alternatingrowstyle">&nbsp;</td>
                            <td id="44" class="alternatingrowstyle">&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="rowstyle">Div 3</td>
                            <td id="51" class="rowstyle">&nbsp;</td>
                            <td id="52" class="rowstyle">&nbsp;</td>
                            <td id="53" class="rowstyle">&nbsp;</td>
                            <td id="54" class="rowstyle">&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="alternatingrowstyle">Div 4</td>
                            <td id="61" class="alternatingrowstyle">&nbsp;</td>
                            <td id="62" class="alternatingrowstyle">&nbsp;</td>
                            <td id="63" class="alternatingrowstyle">&nbsp;</td>
                            <td id="64" class="alternatingrowstyle">&nbsp;</td>
                        </tr>
                    </table>
                </div>
                <div class="dtrowstyle">Date: <span id="timestamp">&nbsp;</span></div>
            </div>
        </div>
    </body>
</html> 
```

下面是我的 WallboardHander.cs 的代码，但我不知道为什么在 url 上被称为 ashx？

```
/*
 * Copyright (C) 2009 CanaPlus Consulting Pte Ltd
 */

using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Web;
using Com.Canaplus.Commons.Config;
using Com.Canaplus.Commons.Logging;
using Newtonsoft.Json;

namespace Com.Canaplus
{
    public class WallboardHandler : IHttpHandler
    {
        private static ILogger _logger;

        protected string GetConnectionString()
        {
            return ConfigurationManager.GetInstance().GetConfiguration().GetConnectionString("SS1CMSDBC1");
        }

        protected static ILogger GetLogger()
        {
            return _logger ?? (_logger = LoggerFactory.GetLogger(typeof (WallboardHandler).FullName));
        }

        public bool IsReusable
        {
            // Return false in case your Managed Handler cannot be reused for another request.
            // Usually this would be false in case you have some state information preserved per request.
            get { return false; }
        }

        public void ProcessRequest(HttpContext context)
        {
            var data = new Dictionary<string, ICollection<JsonType>>();
            var keys = new LinkedList<JsonType>();
            data.Add("key", keys);
            var values = new LinkedList<JsonType>();
            data.Add("value", values);
            var value = new ValueType();
            values.AddLast(value);
            try
            {
                using (var conn = new SqlConnection(GetConnectionString()))
                {
                    conn.Open();
                    var spGetTotalCallInQueue = new SqlCommand("sp_getToTalCallInQueue", conn)
                                                    {CommandType = CommandType.StoredProcedure};
                    var o = new KeyType {name = "ciq"};
                    keys.AddLast(o);
                    value.ciq = spGetTotalCallInQueue.ExecuteScalar().ToString();

                    var spGetWallBoardMatrixTb = new SqlCommand("sp_getWallBoardMatrixTB", conn)
                                                     {CommandType = CommandType.StoredProcedure};

                    var spGetMaxLongestWaitingTime = new SqlCommand("sp_getMaxLongestWaitingTime", conn)
                                                         {CommandType = CommandType.StoredProcedure};
                    o = new KeyType { name = "lwt" };
                    keys.AddLast(o);
                    value.lwt = spGetMaxLongestWaitingTime.ExecuteScalar().ToString();

                    var spGetCurrentDateTime = new SqlCommand("sp_getCurrentDateTime", conn)
                                                   {CommandType = CommandType.StoredProcedure};
                    o = new KeyType { name = "timestamp" };
                    keys.AddLast(o);
                    value.timestamp = spGetCurrentDateTime.ExecuteScalar().ToString();
                }
            }
            catch(Exception e)
            {
                GetLogger().Error(e);
            }
            context.Response.ContentType = "text/json";
            context.Response.Write(JsonConvert.SerializeObject(data, Formatting.Indented));
        }
    }
} 
```

如果你能帮助我，我真的很感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:32:19.933

您的 AJAX 调用中有语法错误。成功函数后需要一个逗号。尝试用这个替换它：

```
 jQuery.ajax(
                {
                    type: "POST",
                    async: true,
                    url: 'WallboardHandler.ashx',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (obj) {
                        for (var i = 0; i < obj.key.length; i++) {
                            jQuery("#" + obj.key[i].name).html(obj.value[0][obj.key[i].name]);
                        }
                    },
                    error: errorAlert
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:35:16.807

您在错误处理程序之前缺少逗号。

我会试试这个

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>        
<script type="text/javascript">
$(document).ready(function () {
  $.ajax({
    type: "POST",
    async: true,
    url: 'WallboardHandler.ashx',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (obj) {
      for (var i = 0; i < obj.key.length; i++) {
        $("#" + obj.key[i].name).html(obj.value[0][obj.key[i].name]);
      }
    },
    error: function(e, jxr) {
      alert("Your request is not successful. " + jxr);
    }
  });
}); 
```

# java - 如何将接口添加到包中？

> ID：10206572
> 
> 赞同：0
> 
> 时间：2012-04-18T09:28:41.123
> 
> 标签：java, oop, interface

假设我有以下界面减速：

```
public interface classListener<classEvent> {

    void classMethod1(classEvent x);
    void classMethod2(classEvent y);
    void classMethod3(classEvent z);
} 
```

并假设我想将此接口添加到*whatever.something*包中。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:31:39.260

`package`在文件顶部放置一条语句：

```
package your.package.name;

public interface classListener<classEvent> {

    void classMethod1(classEvent x);
    void classMethod2(classEvent y);
    void classMethod3(classEvent z);
} 
```

> 假设我想将此接口添加到*java.something*包

您不能添加到`java.`包中。这仅适用于 JDK（自 Oracle 收购 Sun 以来目前由 Oracle 控制）。它会编译，但是当你尝试使用它时，你会得到`SecurityException`：

```
线程“主”java.lang.SecurityException 中的异常：禁止的包名称：java.util
    在 java.lang.ClassLoader.preDefineClass(ClassLoader.java:479)
    在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:625)
    在 java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    在 java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    在 java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    在 java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    在 java.lang.ClassLoader.defineClass1（本机方法）
    在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    在 java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    在 java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    在 java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    在 java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
找不到主类：UsePackage。程序将会退出。
```

我的代码给了我这个错误：

在`~/temp/java/util/AddPackage.java`：

```
package java.util;

public interface AddPackage {
    void doSomething();
} 
```

在`~/temp/UsePackage.java`：

```
import java.util.AddPackage;

class UsePackage implements AddPackage {
    public static final void main(String[] args) {
        new UsePackage().doSomething();
    }

    public void doSomething() {
        System.out.println("Hi");
    }
} 
```

命令：

```
~/temp$ javac java/util/AddPackage.java 
~/temp$ javac UsePackage.java 
~/temp$ java UsePackage
```

...于是发生了错误。使用 Oracle (Sun) 的 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:35:18.353

包 decl 为下面的内容创建了一个命名空间。只需在接口文件中添加一个包 decl 作为第一行。

包 org.whatever.foo

公共接口....

# html - 对 CSS 中的定位感到困惑

> ID：10206582
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:29:10.623
> 
> 标签：html, css, positioning

我完全迷失了，我刚刚完成了导航栏的设置**，现在我似乎无法在固定位置以外的任何其他位置显示设置图标和主要文本......**这是我的代码示例，它无法显示图片

这是整个相关代码、html 以及 css。

最终结果应该是一个导航栏，类似于 facebook 用于“群组”的导航栏。

HTML（PHP）：

```
 <div style='width:100%;max-height:31px;position:relative;top:1px;overflow:hidden;'>

        <div style='width:2000px;max-height:31px;position:relative;overflow:hidden;'>

            <div class='groups_navi-active' id='navbar-groupname'>

                <div style='height:30px;float:left; width:11px;'>
                </div>

                <div style='height:30px;float:left;'>
                ".$navbar_groupname."
                </div>

                <div style='height:30px;float:left;width:11px;'>
                </div>

            </div>

            <div class='groups_navi-inactive' id='navbar-structure'>

                <div style='height:30px;float:left; width:11px;'>
                </div>

                <div style='height:30px;float:left;'>
                Structure
                </div>

                <div style='height:30px;float:left;width:11px;'>
                </div>

            </div>

            <div class='groups_navi-inactive' id='navbar-explore'>

                <div style='height:30px;float:left; width:11px;'>
                </div>

                <div style='height:30px;float:left;'>
                Explore!
                </div>

                <div style='height:30px;float:left;width:11px;'>
            </div>

        </div>

        <div class='groups_navi-right'>

        </div>

    </div>

    <div style='float:right;position:fixed;top:42px;height:22px;width:796px;z-index:1'>

        <div class='groups_navi-settingsicon' id='groups_navi-settingsicon' ></div>

        <div style='clear:both;'></div>

<!-- THIS IS HIDDEN AND WILL BE MADE VISIBLE WITH JAVASCRIPT !-->    
        <div id='navbar-settings-list' style='border-left:1px solid #787878;border-right:1px solid #787878;border-top:1px solid #787878;background-color:#ffffff;border-bottom:2px solid #283d6c;background color:#ffffff;float:right;display:none;z-index:5;'>
            <div style='width:126px;height:4px;'></div>
            <div class='groups-navi-settings-list_option-inactive' id='groups-navi-settings-list_option--deletegroup' title='".$_GET['groupid']."'>
            Delete Group
            </div>
            <div style='width:126px;height:4px;'></div>
        </div>

    </div>

    <div style='z-index:8;position:fixed;width:796px'>

        <div>
        <img src='IMG/texticon.png'>
        </div>
        <div>
        ".$groupoverview_groupdescription."
        </div>
    </div> 
```

CSS：

```
.groups_navi-active
{
height:30px;position:relative;line-height:30px;
font-size:13px;
font-weight:bold;
color:#000000;
float:left;
z-index:2;
}

.groups_navi-inactive
{
float:left;
height:30px;
position:relative;
background-color:#f2f2f2;
border-bottom:1px solid #cccccc;
border-left:1px solid #dbdbdb;
border-right:0px;
border-top:0px;
line-height:30px;
font-size:11px; 
font-weight:bold;
color:#818181;
z-index:2;
}

.groups_navi-right
{
float:left;
height:30px;
width:1000px;
position:relative;
background-color:#f2f2f2;
border-bottom:1px solid #cccccc;
border-left:1px solid #dbdbdb;
border-right:0px;
border-top:0px;
line-height:30px;
font-size:11px; 
font-weight:bold;
color:#818181;
}

.groups_navi-settingsicon
{
width:31px;height:22px;background: url('../IMG/navbar-stgs.png');float:right;background-position: 0 0;
}

.groups_navi-settingsicon-active
{
width:31px;height:22px;background: url('../IMG/navbar-stgs.png');float:right;background-position: 0 -22;
}

.groups-navi-settings-list_option-inactive
{
width:126px; height: 18px;text-align:center;line-height:18px;
border-top:1px solid #ffffff;
border-bottom:1px solid #ffffff;
}

.groups-navi-settings-list_option-inactive:hover
{
width:126px; height: 18px;text-align:center;line-height:18px;background-color:#6c83b6;color:#f8ffff;
border-top:1px solid #39579b;
border-bottom:1px solid #39579b;
cursor:pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:37:08.327

设置图标的容器（父 div）是位置：固定。这将覆盖你的浮动：对。事实上，我看到两个使用 position:fixed 而不设置 X/Y 偏移的实例，这实际上是行不通的。

如果不是这样...我认为如果您可以将代码归结为有问题的区域，您将获得更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:43:23.450

我想你应该检查图像路径，它一定是正确的，我在这个 url [http://jsfiddle.net/563Vx/上做了样本](http://jsfiddle.net/563Vx/)

随时更新这个小提琴

# java - OFX4J 在正常工作后解析异常 - 聚合 SONRS

> ID：10206583
> 
> 赞同：1
> 
> 时间：2012-04-18T09:29:13.823
> 
> 标签：java, ofx

我有一段代码来读取 ofx 文件以检索多个标签（例如帐户编号、余额等）。我正在使用 net.sf.ofx4j

一段代码：

 `````
public void parse(String filename) throws OFXParseException, IOException, SQLException {

        AggregateUnmarshaller<ResponseEnvelope> unmarshaller = new AggregateUnmarshaller<ResponseEnvelope>(
                ResponseEnvelope.class);
        FileInputStream file = null;

        try {
            file = new FileInputStream(filename);
            ResponseEnvelope envelope = unmarshaller.unmarshal(file);

            BankingResponseMessageSet messageSet = (BankingResponseMessageSet) envelope.getMessageSet(MessageSetType.banking);

            List<BankStatementResponseTransaction> responses = messageSet.getStatementResponses();
            for (BankStatementResponseTransaction response : responses) {

                BankStatementResponse message = response.getMessage();
                String currencyCode = message.getCurrencyCode();
                String acct_number = message.getAccount().getAccountNumber();
                double av = message.getAvailableBalance().getAmount();
                double cur = message.getLedgerBalance().getAmount();
                AccountType acct_type = message.getAccount().getAccountType();

            }

        } catch (OFXParseException e) {
            System.out.println("Error: " + e.getMessage());
        }
        return null;

    } 
````  `它工作正常，直到有一天它开始抛出以下异常：

net.sf.ofx4j.io.AggregateStackContentHandler onElement INFO：索引 70 处的聚合 SONRS（类 net.sf.ofx4j.domain.data.signon.SignonResponse）不支持元素 INTU.BID。

net.sf.ofx4j.io.AggregateStackContentHandler onElement INFO：索引 70 处的聚合 SONRS（类 net.sf.ofx4j.domain.data.signon.SignonResponse）不支持元素 INTU.USERID。

线程“main”中的异常 java.lang.IllegalStateException: java.io.IOException: Unexpected EOF

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:16:27.443

希望 ofx 文件格式应该改变。因为您正在请求（**MessageSetType** .**银行**）。但是在您的 ofx 文件中可能有信用卡详细信息。

早期，交易数据包含在 < **BANKMSGSRSV1** > 标签内的 .ofx 文件中。但是现在交易数据包含在 < **CREDITCARDMSGSRV** > 标签中。您需要更改数据接收代码。

希望你能从中得到一些帮助。谢谢``

# flash - 嵌入的 Flash 内容不在时间轴上播放

> ID：10206584
> 
> 赞同：0
> 
> 时间：2012-04-18T09:29:15.023
> 
> 标签：flash, facebook-opengraph, facebook-timeline

我有一个嵌入在 html 页面中的 Flash 应用程序，当用户共享此页面时，我不想在时间轴上播放它。我已经阅读了文档 ( [https://developers.facebook.com/docs/share/](https://developers.facebook.com/docs/share/) ) 并添加了好的 og meta 但是当我分享一个页面时，Flash 应用程序可以直接在 Timeline 上使用，事实上，它是一个链接到网页。

这是我的标题：

```
<meta property="og:site_name" content="Albumblog" />
<meta property="og:type" content="video.other" />
<meta property="og:title" content="My title" />
<meta property="og:description" content="My Description" />
<meta property="og:image" content="http://www.mydomain.com/myimage.png" />
<meta property="og:video" content="http://www.mydomain.com/module/viewer/index.swf?book_id=1&book_token=2&token=3&gateway_url=http://www.mydomain.com/ws.php/amfgateway/service&src=abg&production_mode=true" /> 
<meta property="og:video:height" content="386" /> 
<meta property="og:video:width" content="393" />
<meta property="og:video:type" content="application/x-shockwave-flash" /> 
```

我的 facebook url 共享器 (sharer.php) 有另一个问题，get 参数“t”不起作用。只需测试一下：[https](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.sadtrombone.com%2F&t=HELLOWORLD) ://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.sadtrombone.com%2F&t=HELLOWORLD并且它不起作用。url 已编码，标题为“正常”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:39:26.530

如果您不希望视频在时间线中播放，请`og:video`从页面中删除标签。`og:image`相反，当有人分享您的页面时，让页面拾取。然后，用户必须单击图像或链接并被重定向到您可以观看视频的网站。

`t=...`Facebook 分享脚本长期以来一直忽略该参数。您必须`og:title`在页面上使用来自定义标题。

# c# - 如何在不等待响应的情况下发送 POST C#

> ID：10206585
> 
> 赞同：0
> 
> 时间：2012-04-18T09:29:19.310
> 
> 标签：c#, post, response, helper

**如何在 C# 中发送 POST 而不等待响应？我该怎么做？**

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:34:48.283

使用[`WebClient`](http://msdn.microsoft.com/en-us/library/tt0f69eh.aspx)类中的一种异步方法，例如[`UploadStringAsync`](http://msdn.microsoft.com/en-us/library/ms144239.aspx).

当帖子完成（或失败）时，将触发相应的事件（`UploadStringCompleted`例如），但您不必为该事件连接任何处理程序。但是，您可能希望这样做以检查是否有任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:32:54.223

HTTP 会话只是一个标准的 TCP 会话，而 POST 只是符合 HTTP 规范的格式正确的数据。您可以打开与 Web 服务器的 TCP 连接并发送 POST 请求，然后关闭 TCP 连接。您可以查看 HTTP 规范 (RFC 2616) 以了解如何正确格式化 POST。您可以在以下网址找到它：[http ://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

一个非常基本的 POST 将通过 TCP 连接发送以下内容：

```
POST / HTTP/1.1
Host: www.thehost.com
Content-Length: 3
Content-Type: application/x-www-form-urlencoded

Hi! 
```

用您要发送的任何内容替换内容和相应的长度，将 / 更改为正确的路径并将主机的主机名或 IP 放在 Host:... 并当然将 TCP 会话连接到该主机。

一个非常基本的例子：

```
using System.Net;
using System.Net.Sockets;

static void Main(string[] args)
{
    string Hostname = "www.website.com";
    TcpClient Client = new TcpClient(Hostname, 80);
    Client.Client.Send(new ASCIIEncoding().GetBytes("POST / HTTP/1.1\nHost: "+Hostname+"\nConnection: close\n\n"));
    Client.Close();
} 
```

将 www.website.com 更改为正确的主机名（以及端口，如果需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T12:50:00.460

UploadValuesAsync 看起来像一个更完整的解决方案，使用如下内容：

```
using (var client = new WebClient())
{
    var values = new NameValueCollection();
    // add values...
    client.UploadValuesAsync(new System.Uri(rawUrl), "POST", values);
} 
```

但是请注意，我没有测试过这段代码，因为我试图解决一个稍微不同的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:38:07.390

```
var wc = new WebClient();
wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
wc.UploadStringAsync(uri, data);
wc.UploadStringCompleted += (sender, e) =>
{
    // 完全的
};

```

# rest - 调用 REST API 在 JIRA 中创建新组件

> ID：10206589
> 
> 赞同：0
> 
> 时间：2012-04-18T09:29:39.220
> 
> 标签：rest, httpclient, jira

我必须在 JIRA 中创建一个新组件我发现了用于创建新组件的**POST url /rest/api/2/component**，但我无法知道要给出什么类型的输入。

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("http://localhost:8080/rest/api/2/component/");

String authorization = JiraRequestResponseUtil.conversionForAuthorization();
postRequest.setHeader("Authorization", authorization);

StringEntity input = new StringEntity("\"name\":\"Component 1\",\"description\":\"This is a TEST JIRA component\" ,\"leadUserName\":\"fred\",\"assigneeType\":\"PROJECT_LEAD\",\"isAssigneeTypeValid\":\"false\",\"project\":\"TEST\"");

input.setContentType("application/json");
postRequest.setEntity(input);

HttpResponse response = httpClient.execute(postRequest); 
```

这是我正在实现的代码。

我得到的输出失败：**HTTP 错误代码：400**

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:26:14.697

我们不能告诉你。您需要找到有关您发布到的服务的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:01:54.540

上面的代码是正确的，只需在 JSON 字符串中添加`{`&即可。`}`

# ios - 如何在 iPod Touch (iOS 5.1) 中编译 Obj-C 图形 Hello World

> ID：10206590
> 
> 赞同：2
> 
> 时间：2012-04-18T09:29:47.143
> 
> 标签：ios, compilation, jailbreak

iDevice 是 Ipod Touch 4 (ios 5.1)，带有 redsn0w 越狱功能。我没有Mac。
到目前为止，我已经能够通过 PuTTY 编译和运行 C hello world。

我想做的是编译一个Objective-C图形hello world，然后安装它，这样我就可以从SpringBoard执行它。

我遵循了来自 antirez 博客的（旧）[说明](http://antirez.com/page/iphone-gcc-guide.html)。
步骤是：

1.  使用 PuTTY 和 SSH 登录 iPod。
    （通过 SSH）
2.  将 SDK 2.0 标头下载到 iPod（使用`wget`）。提取，然后移动到`/var/include`
3.  下载，提取[此](http://antirez.com/misc/iphone-helloworld-1.tar.gz)源代码示例。到目前为止我很好。
4.  运行制作。

输出是：

```
arm-apple-darwin9-gcc -c -I"/var/include"  -I"/usr/include"  -F"/System/Library/         Frameworks"  -F"/System/Library/PrivateFrameworks"  -DDEBUG -Wall -std=c99 -DMAC         _OS_X_VERSION_MAX_ALLOWED=1050 Classes/HelloWorldApp.m -o Classes/HelloWorldApp.         o
arm-apple-darwin9-gcc -c -I"/var/include"  -I"/usr/include"  -F"/System/Library/         Frameworks"  -F"/System/Library/PrivateFrameworks"  -DDEBUG -Wall -std=c99 -DMAC         _OS_X_VERSION_MAX_ALLOWED=1050 Classes/main.m -o Classes/main.o
arm-apple-darwin9-gcc -arch arm -lobjc  -framework CoreFoundation  -framework Fo         undation  -framework UIKit  -framework QuartzCore -framework CoreGraphics  -fram         ework GraphicsServices  -framework CoreSurface  -L"/usr/lib" -F"/System/Library/         Frameworks" -F"/System/Library/PrivateFrameworks" -bind_at_load -multiply_define         d suppress -o HelloWorld Classes/HelloWorldApp.o Classes/main.o
ld: library not found for -lobjc
collect2: ld returned 1 exit status
make: *** [HelloWorld] Error 1 
```

现在，如果我删除它`-lobjc`，我意识到编译过程中实际上没有包含其他库（例如 CoreFoundation）。

a) 我该如何解决这个问题？或者……我是在尝试做一些不可能的事情吗？
b) 使用 iOS 5.1 是否会使开发程序变得更加困难？

听说需要整个 Apple SDK 才能编译。所以假设我下载它。
c) 我应该把它下载到 iPod 上吗？具体走哪条路？

# tinymce - 如何根据它们替换的输入的方向属性设置不同 TinyMCE 编辑器的方向性？

> ID：10206593
> 
> 赞同：4
> 
> 时间：2012-04-18T09:29:56.283
> 
> 标签：tinymce, bidirectional

我有一个包含多个文本区域的页面要替换为 TinyMCE。一些文本区域采用阿拉伯文本，一些英文文本。文本区域`dir`根据它们应该接收的输入正确设置了 - 属性。

如何根据文本区域设置不同编辑器的方向性？我可以为所有实例设置方向性，如下所示：

```
$('textarea.advanced_editor').tinymce({
    ⋮
    plugins : "…,directionality,…",
    directionality: "rtl",
    ⋮
}); 
```

但是如何为每个编辑器设置不同的方向呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:32:37.270

在这种情况下，您将需要不同的 tinymce 配置 - 一个方向设置为 rtl，另一个设置为默认值。

更新：

这个有可能。您需要使用正确的编辑器 ID 调用它

```
tinymce.get('my_editor_id').getBody().dir ="rtl"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T10:19:49.670

最后我想出了这个：

```
$('textarea.advanced_editor').tinymce({
    ⋮
    plugins : "…,directionality,…",
    directionality: "ltr",
    ⋮
    setup: function (ed) {
        ed.onInit.add(function(ed) {
            var direction = $('[name="'+ed.id+'"]').attr('dir');
            ed.getBody().dir = direction;
        });
    },
    ⋮
}); 
```

我使用了[基于事件的解决方案](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onInit)，例如 @Thariama 假定并引用回`dir`-attribute，我知道它始终设置正确。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-26T11:20:47.297

我编辑了 TinyMCE 工具栏编辑器的工具栏，并在那里提供了 ltr 和 rtl 选项供使用。

喜欢`toolbar1: "ltr rtl | undo redo"`函数 LoadTinyMCE()

因此，这里用户可以选择以 ltr 的形式编写，而 rtl 则以工具栏的形式出现。在 4.1.7 版中做到了。

# java - 了解简单 XML 解析器 - 新文件输出 - Java

> ID：10206596
> 
> 赞同：2
> 
> 时间：2012-04-18T09:29:58.143
> 
> 标签：java, android, xml, xml-parsing, simple-framework

我正在尝试学习如何使用此线程中详细介绍的简单 XML 框架：[解析 XML 的最佳实践](https://stackoverflow.com/questions/6166862/best-practises-for-parsing-xml)。

我正在使用以下代码：

```
public class SimpleXMLParserActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    Serializer serializer = new Persister();
    Example example = new Example("Example message", 123);
    File result = new File("example.xml");

    try {
        Log.d("Start", "Starting Serializer");
        serializer.write(example, result);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.d("Self", "Error");
        e.printStackTrace();
    }
}
} 
```

我在理解线路时遇到问题

```
File result = new File("example.xml"); 
```

1) 这一行是否在我的应用程序中创建了一个名为 example.xml 的新文件？如果是这样，该文件位于何处。

2) 或者这一行是否查找名为 example.xml 的现有文件然后添加到它？如果是这样，example.xml 文件应该放在我的应用程序包中的哪个位置，以便可以找到它。我确实注意到我收到一条错误消息：

```
java.io.FileNotFoundException: /example.xml (Read-only file system) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:14:19.887

```
File result = new File("example.xml") 
```

这一行只会将文件名“example.xml”存储在一个新`File`对象中。没有检查该文件是否确实存在，也不会尝试创建它。

没有指定绝对路径（以`/`like开头`new File("/sdcard/example.xml")`）的文件被认为位于当前工作目录中，我猜它是`/`用于 Android 应用程序（-> `/example.xml (Read-only file system)`）

我猜想`serializer.write(example, result);`尝试为您创建实际文件，但由于您无法写入“/”而失败。

您必须指定该文件的路径。有几个地方可以存储文件，例如

*   [Context#getFilesDir()](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)将在应用程序的主目录 ( `/data/data/your.package/files/`) 中为您提供一个位置，只有您可以读取/写入 - 无需额外权限。
*   [Environment#getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)将为您提供一般的主存储内容（可能是`/sdcard/`- 但对于设备来说这是非常不同的）。要在此处写入，您需要[WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)权限。
*   环境中有更多可用的地方更专业。例如用于媒体文件、下载、缓存等。
*   还有[Context#getExternalFilesDir()](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)用于您要存储在外部存储上的应用程序私有（大）文件（类似于`/sdcard/Android/data/your.package/`）

修复你可以做的代码

```
File result = new File(Environment.getExternalStorageDirectory(), "example.xml"); 
```

* * *

编辑：使用提供的机制来获取现有目录（首选但您仅限于您应该使用的文件夹）：

```
// via File - /data/data/your.package/app_assets/example.xml
File outputFile = new File(getDir("assets", Context.MODE_PRIVATE), "example.xml");
serializer.write(outputFile, result);

// via FileOutputStream - /data/data/your.package/files/example.xml
FileOutputStream outputStream = openFileOutput("example.xml", Context.MODE_PRIVATE);
serializer.write(outputStream, result); 
```

或者您可能需要自己创建目录（获取应用程序目录的黑客方式，但它应该可以工作）：

```
File outputFile = new File(new File(getFilesDir().getParentFile(), "assets"), "example.xml");
outputFile.mkdirs();
serializer.write(outputFile, result); 
```

尽量避免指定完整路径，`"/data/data/com.simpletest.test/assets/example.xml"`因为它们在其他设备/Android 版本上可能不同。甚至`/`不能保证是`/`。`File.separatorChar`如果必须，使用它会更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:56:35.840

我在 Android 页面上读到的内容，我看到它创建了一个具有该名称的文件：

[文件构造函数](http://developer.android.com/reference/java/io/File.html#File%28java.lang.String%29)

我认为它将它写入 /data/data/ **packagname**目录

编辑：上面的 tekst 中没有显示“包名”。我把它放在括号之间。：秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:13:56.577

2个干净的解决方案：

1.  使用 openFileOutput 在应用程序私有目录中写入一个私有文件（如果应用程序移到那里，它可以位于内部存储器或外部存储中）。看到[这里](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)的一个片段
2.  或使用[File 构造函数](http://developer.android.com/reference/java/io/File.html#File%28java.lang.String%29)在您的应用程序具有写入权限的任何位置创建文件。例如，如果您想将文件存储在 SDCard 上。实例化文件不会在文件系统上创建它，除非您开始对其进行写入（例如使用 FileOutputStream）

我推荐方法 1，它对用户更好，因为当您的应用程序被卸载时，这些文件会被删除。如果文件很大，那么使用外部存储可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:32:08.150

尝试保存到`/sdcard/example.xml`.

# iphone - UIPopoverController 模式问题

> ID：10206599
> 
> 赞同：0
> 
> 时间：2012-04-18T09:30:10.430
> 
> 标签：iphone, ios, uipopovercontroller, presentmodalviewcontroller, uipopover

![在此处输入图像描述](../Images/c9d9ea4a43c820de0b05ffa6febcf422.png)

我有 UIPopoverController

```
 UINavigationController *navVC = [[[UINavigationController alloc] initWithRootViewController:loginVC] autorelease];

    navVC.modalInPopover = YES;
    navVC.modalPresentationStyle = UIModalPresentationCurrentContext;    

    _popoverLoginVC = [[UIPopoverController alloc] initWithContentViewController:navVC]; 
```

当我呈现弹出框时

```
 [self.popoverLoginVC presentPopoverFromRect:centerFrame
                                     inView:self.splitVC.view
                   permittedArrowDirections:0 
                                   animated:YES]; 
```

**看起来它是模态的（我无法通过点击外部来关闭弹出框）但其他区域没有变暗。** 我玩过 modalPresentationStyle 没有运气（

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:47:16.293

它是模态的，因为您将其设置为模态。

```
navVC.modalInPopover = YES; 
```

只要删除它，如果我理解正确，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:48:05.477

删除线

> navVC.modalInPopover = 是；
> 
> navVC.modalPresentationStyle = UIModalPresentationCurrentContext;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:23:19.850

弹出框并不意味着（也不能指定）使“背景”视图变暗，即使以模态方式呈现也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T21:07:53.223

```
permittedArrowDirections:0 
```

这不是此参数的有效值，将导致未定义的行为（至少在 iOS >= 6 中）。您必须指定以下之一：

```
UIPopoverArrowDirectionUp = 1UL << 0,
UIPopoverArrowDirectionDown = 1UL << 1,
UIPopoverArrowDirectionLeft = 1UL << 2,
UIPopoverArrowDirectionRight = 1UL << 3,
UIPopoverArrowDirectionAny = UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown | UIPopoverArrowDirectionLeft | UIPopoverArrowDirectionRight, 
```

不幸的是，“无箭头”不是受支持的选项。:(

# windows - 为不同的客户定制应用程序

> ID：10206601
> 
> 赞同：0
> 
> 时间：2012-04-18T09:30:13.727
> 
> 标签：windows, winforms, c#-4.0

基于特定应用程序（面包店 ERP），我需要创建一个新分支作为具有基本功能（发票、订单、工作订单、客户通信......）的通用 ERP。

这个新分支必须为每个客户定制：打印格式、应用程序颜色和图标/图像，以及对某些应用程序部分的限制访问......

我已经阅读了有关文本/图标/图像自定义的资源文件，但我需要一些帮助或替代方法，也许定义一个接口来提供所需的资源。

我使用 DevExpress 组件，因此可以自定义打印格式和表单布局，将格式和布局存储在文件中。但是，必须完全重新设计主窗体，我想知道最好的方法。¿ 这可以通过一个包含主窗体并实现为按钮和其他自定义项提供自定义图像的界面的小项目来完成？

除了布局定制，我需要限制每个客户对 ERP 某些部分的访问，但行为定制将是最小的或根本不存在，所以，也许我可以使用每个客户的 xml 配置文件来个性化行为。

独立于我的想法，我感谢您对 mu 目的的任何想法或评论：每个客户端的界面定制和最小的行为定制。不需要像 Workflow Foundation 这样的复杂解决方案或完全基于插件的开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:35:43.073

如果它只是打印和屏幕图像的格式，只需使用资源文件或数据库配置。

如果您需要更改功能 - 使用接口并通过某些框架（例如[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)）注入它们的实现。

而且你的英语很好，不用抱歉

# c# - Linq syntax c# to select two field from table

> ID：10206606
> 
> 赞同：0
> 
> 时间：2012-04-18T09:30:27.783
> 
> 标签：c#

i am writing the following linq code in c#

```
 var groupedData = from b in dt.AsEnumerable()
                      group b by b.Field<string>("TypeColor") into g

                      select new
                      {

                          Key = g.Key,

                          Value = g.Select(r => r.Field<int>("Price")),
                          Price = g.Select(r => r.Field<int>("Price"))

                      };

 foreach (var g in groupedData)
    {
        string s = g.Key;
} 
```

how can i select two or more field from the datatable and group the table with one field. Can any body help me? Here dt is a datatable which is binding from database

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:05:31.367

如果您对行进行了分组，则需要聚合字段（类似于 SQL）：

```
var groupedData = from b in dt.AsEnumerable()
                  group b by b.Field<string>("TypeColor") into g
                  select new
                  {
                      Color = g.Key,
                      PriceSum = g.Sum(r => r.Field<int>("Price")),
                      FirstValue = g.First().Field<int>("Value")
                  };

foreach (var g in groupedData)
{
    string color = g.Color;
    Double priceSum = g.PriceSum;
    int firstValue = g.FirstValue;
} 
```

# java - 未发生事件变更

> ID：10206607
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:30:30.590
> 
> 标签：java, android

我为 Android 构建了一个井字游戏。我想在屏幕上显示即将轮到用户的轮到用户还是轮到 Android。我为此构建了一个函数 updateGameInfo ，它正在工作，但我无法决定我应该在哪里调用这个函数来获得正确的显示输出。请帮助提前致谢。这是我的代码

```
 public class Game extends Activity {
private final int GAME_VICTORY = 0x1;
private final int GAME_DEFEAT = 0x2;
private final int GAME_TIE = 0x3;
private final int GAME_CONTINUES = 0x4;
private final float UNIQUE_MAX_WEIGHT=0.85f;
static final int ACTIVITY_SELECTION = 1;
private int x_Player_win_counter;
private int o_Player_win_counter;
public static TextView textlevel=null;
public static TextView textlevel1=null;
public static TextView textlevel2=null;
public static TextView textlevel3=null;
public double userBest_Time=0;
public double cpuBest_Time=0;
public double startTime;
long prev_Time=0;
double userDuration;
double cpuDuration;
private float[] w;  
private int[] c;        
private int[][] PosTable;   
private Button[] buttons;
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);
    buttons = new Button[9];
    buttons[0] = (Button) findViewById(R.id.Button01);
    buttons[0].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(0);
        }
    });
    buttons[1] = (Button) findViewById(R.id.Button02);
    buttons[1].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(1);
        }
    });
    buttons[2] = (Button) findViewById(R.id.Button03);
    buttons[2].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(2);
        }
    });
    buttons[3] = (Button) findViewById(R.id.Button04);
    buttons[3].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(3);
        }
    });
    buttons[4] = (Button) findViewById(R.id.Button05);
    buttons[4].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(4);
        }
    });
    buttons[5] = (Button) findViewById(R.id.Button06);
    buttons[5].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(5);
        }

    });
    buttons[6] = (Button) findViewById(R.id.Button07);
    buttons[6].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(6);
        }
    });
    buttons[7] = (Button) findViewById(R.id.Button08);
    buttons[7].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(7);
        }
    });
    buttons[8] = (Button) findViewById(R.id.Button09);
    buttons[8].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(8);
        }
    });

  startActivityForResult(new Intent(Game.this, Game.class), ACTIVITY_SELECTION);

    DisplayMetrics dm = getApplicationContext().getResources().getDisplayMetrics();
    float h = (float) (dm.heightPixels - (100.0)*dm.density);
    float w = dm.widthPixels;
    for(int i=0;i<9;i++) {
        buttons[i].setHeight((int) (h/3));
        buttons[i].setWidth((int) (w/3));
    }
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    beginPlay();
    if (requestCode == ACTIVITY_SELECTION) {
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            if (extras.getString("result").equals("CPU")) cpuPlay();
        }
    }
}
public void userGame() {
    new AlertDialog.Builder(this)
    .setTitle("User Won!!!")
    .setMessage("want to start another game")
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {

            buttonsEnable(true);
            beginPlay();
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {
            finish();
        }
    })
    .show();

}

public void cpuGame() {
    new AlertDialog.Builder(this)
    .setTitle("Android Won!!!")
    .setMessage("want to start another game")
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {

            buttonsEnable(true);
            beginPlay();
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {
            finish();
        }
    })
    .show();

}

public void tieGame() {
    new AlertDialog.Builder(this)
    .setTitle("TIE!!!")
    .setMessage("want to start another game")
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {

            buttonsEnable(true);
            beginPlay();
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {
            finish();
        }
    })
    .show();

}

private void beginPlay() {
    //initializations start 
    w=new float[9];
    c=new int[9];
    InitTable();
    w[0]=0.7f;
    w[1]=0.4f;
    w[2]=0.7f;
    w[3]=0.4f;
    w[4]=0.7f;
    w[5]=0.4f;
    w[6]=0.7f;
    w[7]=0.4f;
    w[8]=0.7f;
    //c[i] : 0 for empty, 1 for cpu, 2 for user
    for(int i=0;i<9;i++)
        c[i]=0;
    //initializations done

    //now we play!
        startTime = System.currentTimeMillis();
        textlevel=(TextView)findViewById(R.id.userInfo);
        textlevel.setText(String.valueOf(x_Player_win_counter));

        textlevel1=(TextView)findViewById(R.id.cpuInfo);
        textlevel1.setText(String.valueOf(o_Player_win_counter));
    for(int i=0;i<9;i++)
        {     
        updateBtn(i);
        buttons[i].setTextColor(Color.BLACK);
        }
    String PlayerName="User";       
    updateGameInfo(PlayerName + " turn.");
}
private void cpuPlay() {
    //computer plays first
    int cpos=getDecision();
    if (cpos == -1) {
        Toast toast = Toast.makeText(getApplicationContext(), "GAME OVER", Toast.LENGTH_SHORT);
        toast.show();
        return;
    }
    c[cpos]=1;
    updateBtn(cpos);
    int gstatus = CheckGameStatus();
    if (gstatus == GAME_VICTORY) {
        userDuration = (System.currentTimeMillis() - startTime)/1000;
        Toast toast = Toast.makeText(getApplicationContext(), "Congrts You Won in " + userDuration + " seconds", Toast.LENGTH_SHORT);
        toast.show();
        ++x_Player_win_counter;
        userGame();
    }
    else if (gstatus == GAME_DEFEAT) {
        cpuDuration = (System.currentTimeMillis() - startTime)/1000;
        Toast toast = Toast.makeText(getApplicationContext(), "Sorry, Android Won in "  + cpuDuration + " seconds", Toast.LENGTH_SHORT);
        toast.show();
        ++o_Player_win_counter;
        cpuGame();
    }
    else if (gstatus == GAME_TIE) {
        Toast toast = Toast.makeText(getApplicationContext(), "Its a TIE", Toast.LENGTH_SHORT);
        toast.show();
        tieGame();
    }
    else if (gstatus == GAME_CONTINUES) {
        //user plays
    }
}
private void updateBtn(int i) {
    if(c[i]==0)
        buttons[i].setText(" ");
    else if(c[i]==1)
        {
        String PlayerName="Android";        
        updateGameInfo(PlayerName + " turn.");
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        buttons[i].setText("O");
        buttons[i].setTextColor(Color.RED);

        }
    else
        {
        String PlayerName="User";       
        updateGameInfo(PlayerName + " turn.");
        buttons[i].setText("X");

        }
}
private int CheckGameStatus() {
    int s = 0;
    //check horizontal
    if(c[0]==2&&c[1]==2&&c[2]==2) {s = GAME_VICTORY;}
    if(c[3]==2&&c[4]==2&&c[5]==2) {s = GAME_VICTORY;}
    if(c[6]==2&&c[7]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[1]==1&&c[2]==1) {s = GAME_DEFEAT;}
    if(c[3]==1&&c[4]==1&&c[5]==1) {s = GAME_DEFEAT;}
    if(c[6]==1&&c[7]==1&&c[8]==1) {s = GAME_DEFEAT;}
    //check vertical
    if(c[0]==2&&c[3]==2&&c[6]==2) {s = GAME_VICTORY;}
    if(c[1]==2&&c[4]==2&&c[7]==2) {s = GAME_VICTORY;}
    if(c[2]==2&&c[5]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[3]==1&&c[6]==1) {s = GAME_DEFEAT;}
    if(c[1]==1&&c[4]==1&&c[7]==1) {s = GAME_DEFEAT;}
    if(c[2]==1&&c[5]==1&&c[8]==1) {s = GAME_DEFEAT;}
    //check diagonal
    if(c[0]==2&&c[4]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[2]==2&&c[4]==2&&c[6]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[4]==1&&c[8]==1) {s = GAME_DEFEAT;}
    if(c[2]==1&&c[4]==1&&c[6]==1) {s = GAME_DEFEAT;}

    if (s != 0) {
        buttonsEnable(false);
        return s;
    }

    boolean box_empty = false;
    for(int i=0;i<9;i++) {
        if (c[i] == 0) box_empty = true;
    }
    if (box_empty) {    //if any box is empty -> game continues
        return GAME_CONTINUES;
    }
    else {  //else there is tie
        buttonsEnable(false);
        return GAME_TIE;
    }
}

private void buttonsEnable(boolean b) {
    for(int i=0;i<9;i++)
        buttons[i].setEnabled(b);
}

private void btnClicked(int i) {
    if(c[i]!=0) {
        Toast toast = Toast.makeText(getApplicationContext(), "Position occupied", Toast.LENGTH_SHORT);
        toast.show();
    }
    else {
        //all OK
        c[i] = 2;
        updateBtn(i);
        int gstatus = CheckGameStatus();
        if (gstatus == GAME_VICTORY) {
            userDuration = (System.currentTimeMillis() - startTime)/1000;
            Toast toast = Toast.makeText(getApplicationContext(), "Congrats You Won in "  + userDuration + " seconds", Toast.LENGTH_SHORT);
            toast.show();
            ++x_Player_win_counter;
            userGame();
        }
        else if (gstatus == GAME_DEFEAT) {
            cpuDuration = (System.currentTimeMillis() - startTime)/1000;
            Toast toast = Toast.makeText(getApplicationContext(), "Sorry, Android Won in "  + cpuDuration + " seconds", Toast.LENGTH_SHORT);
            toast.show();
            ++o_Player_win_counter;
            cpuGame();
        }
        else if (gstatus == GAME_TIE) {
            Toast toast = Toast.makeText(getApplicationContext(), "Its a TIE", Toast.LENGTH_SHORT);
            toast.show();
            tieGame();
        }
        else if (gstatus == GAME_CONTINUES) {
            cpuPlay();
        }
    }
}

private int getDecision() {
    String Player="Android";
//  updateGameInfo(Player + " turn.");
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    for(int i=0;i<9;i++)
        for(int j=0;j<9;j++) {
            if(c[i]==1&&c[j]==1)    //place 'o' to win
                if(PosTable[i][j]!=-1)  //if we have 3 in a row
                    if(c[PosTable[i][j]]==0)    //if position is free
                        return PosTable[i][j];
            if(c[i]==2&&c[j]==2)    //place 'o' to prevent user's victory
                if(PosTable[i][j]!=-1)  //if we have 3 in a row
                    if(c[PosTable[i][j]]==0)    //if position is free
                        return PosTable[i][j];
        }

    if(c[0]==1&&c[8]==0) return 8;
    if(c[2]==1&&c[6]==0) return 6;
    if(c[8]==1&&c[0]==0) return 0;
    if(c[6]==1&&c[2]==0) return 2;
    Random r=new Random();
    boolean exist07=false;
    boolean[] free=new boolean[9]; //will hold the free positions
    for(int i=0;i<9;i++)
        free[i]=false;
    for(int i=0;i<9;i++)
        if(c[i]==0) {   //free ??
            free[i]=true;   //add position to free
            if(w[i]==UNIQUE_MAX_WEIGHT) return i;
        }
    //more than 1 positions with same weight
    for(int i=0;i<9;i++)
        if(free[i]) //if position is free
            if(w[i]==0.7f) exist07=true;
    if(exist07)
        for(int i=0;i<9;i++)
            if(free[i]) //if position is free
                if(w[i]==0.4f) free[i]=false;

    int j=0;
    int rn=0;
    int[] tmp;
    for(int i=0;i<9;i++)
        if(free[i]) j++;
    if(j!=0) {
        tmp=new int[j];
        rn=r.nextInt(j);
        j=0;
        for(int i=0;i<9;i++)
            if(free[i]) tmp[j++]=i;
        return tmp[rn];
    }
    else {
        return -1; //else GAME OVER
    }
}
private void InitTable() {

    PosTable=new int[9][9];
    for(int i=0;i<9;i++)
        for(int j=0;j<9;j++)
            PosTable[i][j]=-1;
    PosTable[0][1]=2;
    PosTable[0][2]=1;
    PosTable[0][3]=6;
    PosTable[0][4]=8;
    PosTable[0][6]=3;
    PosTable[0][8]=4;
    PosTable[1][2]=0;
    PosTable[1][4]=7;
    PosTable[1][7]=4;
    PosTable[2][4]=6;
    PosTable[2][5]=8;
    PosTable[2][6]=4;
    PosTable[2][8]=5;
    PosTable[3][4]=5;
    PosTable[3][5]=4;
    PosTable[3][6]=0;
    PosTable[4][5]=3;
    PosTable[4][6]=2;
    PosTable[4][7]=1;
    PosTable[4][8]=0;
    PosTable[5][8]=2;
    PosTable[6][7]=8;
    PosTable[6][8]=7;
    PosTable[7][8]=6;

}
private void updateGameInfo(String info)
{
    TextView infoView =(TextView) findViewById(R.id.gameInfo);
    infoView.setText(info);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:19:31.900

我想你可以把你的 updateGameInfo 部分放在这之后..

```
 private void btnClicked(int i) {
    if(c[i]!=0) {
    Toast toast = Toast.makeText(getApplicationContext(), "Position occupied", Toast.LENGTH_SHORT);
    toast.show();
}
else {
    //all OK
    c[i] = 2;
    updateBtn(i);
     updateGameInfo(Player + " turn.");<---every time you are updating the value on button call updategameinfo...
   ....
    //remaining code... 
```

还有这里..

```
 private void cpuPlay() {
   //computer plays first
   int cpos=getDecision();
    if (cpos == -1) {
    Toast toast = Toast.makeText(getApplicationContext(), "GAME OVER", Toast.LENGTH_SHORT);
       toast.show();
    return;
    }
   c[cpos]=1;
    updateBtn(cpos);
     updateGameInfo(Player + " turn.");<-----
  //remaining code here... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:39:01.093

嘿，在 btnClicked 中更改您的 game_contiues 代码

```
String name= "Android";
            updateGameInfo("Wait it's" + name + " turn");
            new Handler().postDelayed(new Runnable() {

                @Override
                public void run() {
                    cpuPlay();
                }
            },500); 
```

这将解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:41:00.123

使用 Handler，无论您想在哪里举行游戏并设置文本

# c# - ServiceNow XML Web 服务 - 节点命名

> ID：10206615
> 
> 赞同：0
> 
> 时间：2012-04-18T09:31:02.713
> 
> 标签：c#, xml, web-services, servicenow

我正在创建一个与 ServiceNow 一起使用的应用程序（自定义报告工具）

[它被配置为使用这里](http://wiki.service-now.com/index.php?title=XML_Web_Service)描述的 demo12 和 XML 服务。

当我提出这个要求时

[https://demo12.service-now.com/incident_list.do?XML&sysparm_query=opened_at%3E2012-04-17%2000:00:00%5Eopened_at%3C2012-04-18%2000:00:00%5E&sysparm_view=](https://demo12.service-now.com/incident_list.do?XML&sysparm_query=opened_at%3E2012-04-17%2000:00:00%5Eopened_at%3C2012-04-18%2000:00:00%5E&sysparm_view=)

作为响应 XML，我不仅看到了`<incident>`节点，还看到了`<u_zprototype_incidents>`

获取节点名称的 XPath 是

```
distinct-values(/xml/*/name(.)) 
```

结果是（用户友好的格式）

```
<XdmValue>
  <XdmAtomicValue>u_zprototype_incidents</XdmAtomicValue>
  <XdmAtomicValue>incident</XdmAtomicValue>
</XdmValue> 
```

不确定，如果这是它应该显示的方式。

是否有任何其他方式（额外的 URI 参数等）来获取有效的 XML（仅限`<incident>`节点）？

我知道我可以`/xml/*[contains(name(.),'incident')][sys_id='my GUID']`用来获取所需的节点。但我认为它消耗的 CPU 时间不仅仅是`/xml/incident[sys_id='my GUID']`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:22:11.667

对于它的价值，demo12 网站上有一些非典型的东西。默认情况下不应该有名为“u_zprototype_incidents”的父元素。创建了一个自定义表，扩展了名为“u_zprototype_incidents”的“事件”表。

如果您只想将自己限制为基本“事件”表中的记录，我建议您只需为“sys_class_name=incident”添加一个新过滤器。给你这个网址：

[https://demo12.service-now.com/incident_list.do?XML&sysparm_query=opened_at%3E2012-04-17%2000:00:00%5Eopened_at%3C2012-04-18%2000:00:00%5E^sys_class_name=事件&sysparm_view=](https://demo12.service-now.com/incident_list.do?XML&sysparm_query=opened_at%3E2012-04-17%2000:00:00%5Eopened_at%3C2012-04-18%2000:00:00%5E%5Esys_class_name=incident&sysparm_view=)

...有了它，您可以使用`/xml/incident[sys_id='my GUID']`

# jquery - 获取没有设置高度/宽度的图像的高度/宽度

> ID：10206617
> 
> 赞同：0
> 
> 时间：2012-04-18T09:31:16.503
> 
> 标签：jquery, html, image

我正在使用从 swf 转换器创建的 HTML 页面。生成的 HTML 使用 SVG 图像来创建与 swf 布局匹配的元素。

然后我尝试在这些 svg 图像之上加载图像，但不幸的是 svg 图像没有设置高度和宽度，所以它们看起来像这样：

```
<div class="wlby_5">
    <!-- Start of symbol: element3 -->
    <img src="FlashTemplate_assets/svgblock_2.svg" class="wlby_4"></img>
    <!-- End of symbol: element3 -->
  </div> 
```

当我将图像附加到此图像上时，我无法获得原始高度和宽度来调整我正在加载的图像的大小，因此它会调整大小以匹配原始 svg 图像。这就是我在新图像中加载的方式：

```
var imgWidth = $('div[class~="' + obj.name+ '"]').find('img').width()
var imgHeight = $('div[class~="' + obj.name+ '"]').find('img').height();

console.log("width of image", imgWidth);
console.log("height of image", imgHeight);
console.log( $('div[class~="' + obj.name+ '"]').find('img') );

$('div[class~="' + obj.name+ '"]').find('img').attr('src', obj.value);
$('div[class~="' + obj.name+ '"]').find('img').attr('width', imgWidth);
$('div[class~="' + obj.name+ '"]').find('img').attr('height', imgHeight); 
```

所以我试图在 div 层中获取图像的高度和宽度，但这些是不可访问的，在控制台中它们都设置为 0。

如何访问原始 svg 图像的高度和宽度，以便将其应用于我正在加载的新图像？

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:37:15.350

在这些情况下，有两种方法可以检索 SVG 图像的高度/宽度。两种方法都有效，但我个人更喜欢第一种。

**选项1**

`getBBox()`可以使用 SVGElement 对象的方法。这可以检索 x 和 y 偏移，以及宽度和高度。

```
$('img').getBBox().width  
$('img').getBBox().height 
```

**选项 2**

或者，您可以使用如下`getBoundingClientRect()`方法：

```
$('img').getBoundingClientRect().width; 
```

# android - 将新项目添加到 JSON 时更新 Android 应用程序 GridView

> ID：10206618
> 
> 赞同：0
> 
> 时间：2012-04-18T09:31:24.680
> 
> 标签：android, json, gridview

在我的应用程序中，我正在使用远程 JSON 文件加载 GridView 的内容。但是该 JSON 每月更新一次。因此，用户每次加载 GridView 时都无需连接 Internet。所以我所做的是，在第一次加载 GridView 时将数据存储到数据库中，下次我使用数据库填充 GridView 时。

现在我有一个问题。当新项目添加到 JSON 文件时，我想发送通知或类似的东西。*如果不使用 C2DM*，还有其他方法可以实现我的目标吗？

我想当有新版本的应用程序可用时我们会收到通知。如果适用，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:43:31.230

我为同一个问题找到了不同的方法。在这里，我们不需要使用推送通知或 C2DM。通过使用`HttpUrlConnection`类和`getLastModified()`方法，我们可以实现我们的目标。

逻辑是，我们将文件的最后更新时间保存在我们的`SharedPreferences`和下次加载应用程序时，`SharedPreferences`值和最后更新日期的值相同，我们可以加载缓存数据或我们保存在数据库中的数据. 如果这些值不同，那么只有我们从服务器下载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:45:57.723

如果您不想将数据推送到您的应用程序，另一种明显的方法是定期轮询。服务可以在后台执行此操作。一旦服务器正面回复，您就可以显示通知。

# c++ - 模板函数错误

> ID：10206622
> 
> 赞同：3
> 
> 时间：2012-04-18T09:31:26.910
> 
> 标签：c++, templates

这段代码有什么问题？

```
#include <iostream>
using namespace std;

template <typename T>
T max(T X, T Y)
{
    return (X > Y) ? X : Y;
}

int main()
{
    int x = max(5,6);
} 
```

我收到此错误：

```
overload.C: In function 'int main()':
overload.C:19: error: call of overloaded 'max(int, int)' is ambiguous
overload.C:12: note: candidates are: T max(T, T) [with T = int]
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2  /bits/stl_algobase.h:206: note:                 const _Tp& std::max(const _Tp&, const _Tp&) [with _Tp = int] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T09:32:33.040

`max`已在标准库中定义。删除`using namespace std`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:34:57.143

也许`max`标准库已经声明了。尝试不导入命名空间。

# c# - 如何每秒有效地执行 50 个并行方法 500 次？

> ID：10206624
> 
> 赞同：2
> 
> 时间：2012-04-18T09:31:30.950
> 
> 标签：c#

我需要`strategy.AllTablesUpdated();`在 2 毫秒内执行 50 个策略（我需要每秒重复约 500 次）。使用下面的代码，我发现仅`Monitor.TryEnter`调用最多花费**1 毫秒**（！！！），我这样做了 50 次！

```
 // must be called ~500 times per second
    public void FinishUpdatingTables()
    {
        foreach (Strategy strategy in strategies)   // about ~50, should be executed in 2 ms
        {
            // this slow and can be paralleled
            strategy.AllTablesUpdated();
        }
    } 
```

.....................

```
 public override bool AllTablesUpdated(Stopwatch sw)
    {
        this.sw = sw;
        Checkpoint(this + " TryEnter attempt ");
        if (Monitor.TryEnter(desiredOrdersBuy))
        {
            Checkpoint(this + " TryEnter success ");
            try
            {
                OnAllTablesUpdated();
            } finally
            {
                Monitor.Exit(desiredOrdersBuy);
            }
            return true;
        } else
        {
            Checkpoint(this + " TryEnter failed ");
        }
        return false;
    }

    public void Checkpoint(string message)
    {
        if (sw == null)
        {
            return;
        }
        long time = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
        Log.Push(LogItemType.Debug, message + time);
    } 
```

从日志中（以 µs 为单位），失败的尝试花费了大约 1 毫秒：

> > 12:55:43:778 调试：TryEnter 尝试 1264 12:55:43:779 调试：TryEnter 失败 2123

从日志（以 µs 为单位），成功尝试花费了 ~ 0.01ms：

> > 12:55:49:701 调试：TryEnter 尝试 889 12:55:49:701 调试：TryEnter 成功 900

所以现在我认为这`Monitor.TryEnter`对我来说太昂贵了，不能一个一个地执行 50 个策略。所以我想用`Task`这样的方式并行这项工作：

```
 // must be called ~500 times per second
    public void FinishUpdatingTables()
    {
        foreach (Strategy strategy in strategies)  // about ~50, should be executed in 2 ms
        {
            // this slow and can be paralleled
            Task.Factory.StartNew(() => {
                strategy.AllTablesUpdated();
            });
        }
    } 
```

我也可能会替换`Monitor.TryEnter`为，`lock`就像使用这种方法一样，一切都将是异步的。

我的问题：

*   为什么`Monitor.TryEnter`这么慢？（如果未获得锁定则为 1 ms）
*   `Task`每 2 毫秒启动 50 个任务 = 每秒 25 000 个任务会有多好？.NET 可以有效地管理这个吗？我还可以使用生产者-消费者模式`BlockingCollection`并仅启动 50 个“工人”一次，然后每 2 毫秒向 BlockingCollection 提交 50 个项目的新包？那会更好吗？
*   您将如何执行每 2 毫秒（每秒 500 次）可以并行执行的 50 个方法，总共每秒 25 000 次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:48:32.347

1.  Monitor.TryEnter(object) 只是 Monitor.TryEnter(object, 0, ref false) （0 毫秒超时）。如果没有获得锁，那 1 毫秒只是尝试获得锁的开销。
2.  您可以根据需要启动任意数量的任务，它们都使用 ThreadPool，尽管这将限制为最大线程数。最大值取决于您的系统、内核数量、内存等……但可以肯定的是，它不会是 25,000 个线程。但是，如果您开始干预 TPL 调度程序，您会遇到麻烦。我只是使用`Parallel.Foreach`，看看它能让我走多远。
3.  `Parallel.ForEach`. 我还要确保它`strategies`是类型的`IList`，以便在不等待迭代器的情况下触发尽可能多的项目。

您尚未将代码粘贴到 OnAllTablesUpdated()，您在该过程期间保持锁定。这将成为你所有可能的瓶颈。

一些问题，你为什么要在表准备好处理时使用锁？

1.  代表不可以吗？
2.  为什么在运行策略时锁定它？您是否在每个策略中修改该表？如果是这种情况，你能不把它复印吗？

# asp.net-mvc-3 - 基于简单数学的验证码

> ID：10206625
> 
> 赞同：2
> 
> 时间：2012-04-18T09:31:33.680
> 
> 标签：asp.net-mvc-3, validation, captcha, recaptcha

reCaptcha 现在很难阅读（实际上是破译）。所以我正在寻找一个替代的验证码系统来使用。

我正在考虑使用一个简单的基于数学的系统，例如：“ `What is 2+5`”。

有没有这样的插件，或者，关于如何构建我自己的想法？

（不是[像这样](http://www.flickr.com/photos/ceejayoz/2674227920/)复杂的数学）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:15:47.437

PHP - 生成一个简单的加法或减法数学问题，在显示数字（10 - 3）和单词（七加五）之间随机交替，并接受数字（14）或单词（十四）的答案。返回一个表示方程分量的数组

[0] - 第一个变量值，作为字符串，如 '4' 或 'four' [1] - 第二个值，运算符，如 '+' 或 'plus' [2] - 第三个值，第二个变量，如'10' 或 '10' [3] - 答案，数字形式，如 '14' [4] - 答案，文本形式，如 '十四'

所以只需将方程打印到页面上，将数组存储在 $_SESSION 中，然后检查用户提供的答案。

```
<?php

// array of numbers and their corresponding word versions
// you can simply do $wordNumbers[6] and get 'six'
$wordNumbers = array(
    0 => 'zero',
    1 => 'one',
    2 => 'two',
    3 => 'three',
    4 => 'four',
    5 => 'five',
    6 => 'six',
    7 => 'seven',
    8 => 'eight',
    9 => 'nine',
    10 => 'ten',
    11 => 'eleven',
    12 => 'twelve',
    13 => 'thirteen',
    14 => 'fourteen',
    15 => 'fifteen',
    16 => 'sixteen',
    17 => 'seventeen',
    18 => 'eighteen',
    19 => 'nineteen', 
    20 => 'twenty'
);

/*
 * 
 * returns an array representing components of a math captcha
 *  [0] - first variable value, as string, like either '4' or 'four'
 *  [1] - second value, the operator, like '+' or 'plus'
 *  [2] - third value, the second variable, like 'ten' or '10'
 *  [3] - the answer, in numerical form, like '14'
 *  [4] - the answer, in text form, like 'fourteen'
 */
function getMathCaptcha(){

    global $wordNumbers;

    $equation = array();

    // get first number, between 7 and 13 inclusive
    $n1 = rand(7, 13);
    $r = rand(0,1);
    // return $n1 as digit or text
    if ($r == 0) {
        $equation[0] = $n1;
    } else {
        $equation[0] = $wordNumbers[$n1];
    }

    // get operator
    $o = rand(0,1);
    $r = rand(0,1);
    if ($o == 0){
        // subtraction
        if ($r == 0) {
            $equation[1] = '-';
        } else {
            $equation[1] = 'minus';
        }
    } else {
        // addition
        if ($r == 0) {
            $equation[1] = '+';
        } else {
            $equation[1] = 'plus';
        }
    }

    // get second number, between 0 and 7 inclusive, so no negative answers
    $n2 = rand(1,7);
    $r = rand(0,1);
    // return $n2 as digit or text
    if ($r == 0) {
        $equation[2] = $n2;
    } else {
        $equation[2] = $wordNumbers[$n2];
    }

    // get answer
    if ($o == 0){
        $answer = $n1 - $n2;
    } else {
        $answer = $n1 + $n2;
    }

    // answer as digit and text
    $equation[3] = $answer;
    $equation[4] = $wordNumbers[$answer];

    return $equation;

}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:49:09.527

你试过像我下面这样的验证码方法吗？

[这种验证码方法的缺点是什么](https://stackoverflow.com/questions/10207135/what-are-the-downpoints-of-this-captcha-method/)

还是您特别想使用用户输入方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:38:13.010

使用[Captchator](http://captchator.com/)怎么样？

它很容易实现，而且很有效！那里还有 PHP 和 Ruby 的代码示例，用其他语言实现应该不难。

基于数学的验证码很弱且容易通过，有很多垃圾邮件机器人知道如何做数学:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:48:11.823

如果我要制作一个简单的，它将遵循以下原则：

制作不同类别的物品，如鲜花、水果、蔬菜和肉类。然后设计验证码以询问总共一个类别。

例如：

随机化类别，选择 2 个独特的类别。所以也许我们得到了鲜花和水果。接下来，问用户：“如果你有 3 朵玫瑰、4 个橙子和 6 个苹果，那么你有多少水果？”

简单模式：

获取 n-1 个唯一类别。显示 n 个项目，其中每个项目属于唯一类别之一。要求一个类别的总数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:54:41.587

您可以自己创建这样的验证码。您所要做的就是创建一个函数，该函数将在给定的数字列表之间选取一个随机数，然后调用该函数两次以获取两个随机数。

将结果存储在会话变量或任何其他变量中，以便您以后可以验证它。

下面是一个用 c# 编码的示例

```
 Random a=new Random();
    a.Next();//it will return you a non negative number
    a.Next(min value,maximum value);//it will return you a number between the range specified. 
```

希望这可以帮助

# asp.net - 通过 Eval 设置 DevExpress ASPxCheckBox CheckState

> ID：10206632
> 
> 赞同：0
> 
> 时间：2012-04-18T09:32:18.950
> 
> 标签：asp.net, devexpress, eval

在 ASP.Net 4.0 中，我试图利用 DevExpress ASPxCheckBox 具有“三种状态”的能力：选中、未选中和不确定。我想根据布尔值进行设置：当布尔值为真时为“已检查”，为假时为“未检查”，为空时为“不确定”。为此，我试图在我的页面中使用以下代码：

```
 <dx:ASPxCheckBox ID="cb_located" runat="server" AllowGrayed="true"  AllowGrayedByClick="true" CheckState='<%# Eval("located") == DBNull.Value ? "Indeterminate" : (bool)Eval("PropertyLocated") == true ? "Checked" : "Unchecked" %>' /> 
```

但是，这给了我错误

> CS0030：无法将类型“字符串”转换为“DevExpress.Web.ASPxClasses.CheckState”

任何人都可以帮我正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:40:19.100

您需要使用[CheckState 枚举](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesCheckStateEnumtopic)。所以代替字符串值`"Indeterminate"`使用`CheckState.Indeterminate`等。

# mysql - 如何添加 1 年至今存储为 varchar？

> ID：10206637
> 
> 赞同：0
> 
> 时间：2012-04-18T09:32:32.870
> 
> 标签：mysql

如何将 1 年添加到作为 varchar 存储在数据库中的日期值（格式：“2011.03”）？

我正在尝试这个，但返回 NULL :(

```
DATE_FORMAT(DATE_ADD(STR_TO_DATE('2011.03', '%Y.%m'), INTERVAL 1 YEAR),'%Y.%m') 
```

非常感谢！

编辑。：这是我要使用的查询：

```
SELECT DISTINCT column FROM table WHERE column  BETWEEN '2011.03' AND DATE_FORMAT(DATE_ADD(STR_TO_DATE('2011.03', '%Y.%m'), INTERVAL 1 YEAR),'%Y.%m') ORDER BY column  DESC 
```

（“2011.03”是一个参数值，在外面）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:38:30.987

你正在尝试的是给出正确的结果

尝试 ：

```
SELECT DATE_FORMAT(DATE_ADD(STR_TO_DATE('2011.03', '%Y.%m'), INTERVAL 1 YEAR),'%Y.%m') 
```

它在给`2012.03`。

**编辑：**

您可以使用以下技巧使其在 mysql 版本 > 5.0 中可用

添加月份和日期，因为在 Mysql 版本 > 5.0 中`str_to_date()`，如果 %D 格式说明符不是格式字符串输入中的最后一个说明符，有时会返回 NULL。

试试下面：

```
 SELECT DATE_FORMAT(DATE_ADD(STR_TO_DATE('2011.03.01', '%Y.%m.%d'), INTERVAL 1 YEAR),'%Y.%m') 
```

# javascript - 带有预览和删除功能的图像上传

> ID：10206648
> 
> 赞同：5
> 
> 时间：2012-04-18T09:33:04.070
> 
> 标签：javascript, jquery, upload

对于以下将在上传前预览照片的脚本有以下问题并需要答案。该脚本来自[http://jsbin.com/uboqu3/edit#javascript,html](http://jsbin.com/uboqu3/edit#javascript,html)

1) 该脚本适用于 Firefox，不适用于 IE。如何使其适用于 IE？

2）它没有删除照片的方法。需要在预览照片上安装一个小图像“X”，单击此“X”将删除照片。谁能提供这个解决方案？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#img_prev')
            .attr('src', e.target.result)
            .height(200);
        };

        reader.readAsDataURL(input.files[0]);
    }
}
</script>

<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
article, aside, figure, footer, header, hgroup,
menu, nav, section { display: block; }
</style>
</head>
<body>
<input type='file' onchange="readURL(this);" />
<img id="img_prev" src="#" alt="your image" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:44:23.090

[**演示**](http://plungjan.name/test/previewjq.html)

在几个浏览器上测试过，Chrome、Fx、Safari 6（有人可以测试 5 吗？）

可以在 XP 上的 IE8 上工作，无需更改设置，但正如 @Gunasekaran 在本页后面提到的那样，您可能需要

> 打开工具->互联网选项->安全选项卡->自定义级别-找到设置“将文件上传到服务器时包含本地目录路径”，然后单击启用。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Image preview</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
var blank="http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif";
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#img_prev')
            .attr('src', e.target.result)
            .height(200);
        };

        reader.readAsDataURL(input.files[0]);
    }
    else {
      var img = input.value;
        $('#img_prev').attr('src',img).height(200);
    }
    $("#x").show().css("margin-right","10px");
}
$(document).ready(function() {
  $("#x").click(function() {
    $("#img_prev").attr("src",blank);
    $("#x").hide();  
  });
});
</script>
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
article, aside, figure, footer, header, hgroup,
menu, nav, section { display: block; }
#x { display:none; position:relative; z-index:200; float:right}
#previewPane { display: inline-block; }
</style>
</head>
<body>
<section>
<input type='file' onchange="readURL(this);" /><br/>
<span id="previewPane">
<img id="img_prev" src="#" alt="your image" />
<span id="x">[X]</span>
</span>
</section>
</body>
</html> 
```

* * *

在 XP 上的 IE8 中看起来像这样：

![例子](../Images/9298b4c306d6e16505311e2084ad3da0.png)

一种较新的方法是我尚未实现的[createObjectURL](https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL)

*更新*如果您想允许用户两次选择相同的图像，您将需要添加一个 onclick 以清除文件输入（onchange 不会触发）

[选择同一文件时未触发 HTML 输入文件选择事件](https://stackoverflow.com/questions/12030686/html-input-file-selection-event-not-firing-upon-selecting-the-same-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:36:22.400

这将不适用于 Internet Explorer 10 ...`FileReader()`直到 IE10 才引入支持 .. 它适用于 Chrome 7 和 Firefox 3.6

在此处查看对 FileReader或[caniuse.com](http://caniuse.com/filereader)[的支持的文档](https://developer.mozilla.org/en/DOM/FileReader)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:19:58.750

回复@user1315468 IE8 的最后一个响应需要更改安全设置：

打开工具-> 互联网选项-> 安全选项卡-> 自定义级别找到设置“将文件上传到服务器时包含本地目录路径”，然后单击启用。

进行此更改后，您可以使用 mplungjan 的演示链接重新打开浏览器。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T23:58:26.373

FileReader sounds great to read content of image or file. But consider that file that you were reading was 20MB big, reading it as dataURL is going to create a JS object which is tat big. How do you avoid that ?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T12:40:20.400

**我已经粘贴了所有浏览器的完整工作代码..

注意：有时 Internet Explorer 可能会阻止脚本，因此为了查看图像，请单击提示和“允许阻止的内容”。下面是工作代码...**

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>

</head>

<body>
<form name="form2">

<div>
<input type="file"  name="myFile"   id="myFile" onchange="readURL(this);"></input>
</div>

<div>
<img id="previewImg" src="#" />
</div>

</form>
<script>

function readURL(input) {

if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (e) {
        $('#previewImg')
            .attr('src', e.target.result)
            .width(130);
    }
reader.readAsDataURL(input.files[0]);

}else{
          var filename = "";
         filename = "file:\/\/"+input.value;
         document.form2.previewImg.src=filename;
         document.form2.previewImg.style.width="130px";

 }
}
 </script>   
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-03T08:15:35.710

`<img id="img1" alt="" runat="server"/> <span id="x" ></span> <asp:FileUpload runat="server" ID="FileUpload1" onchange="readURL(this)" />`

```
<script type="text/javascript">
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
            $("#imgRepresentImage").attr("src", e.target.result).width(200);
        };
        reader.readAsDataURL(input.files[0]);
    } else {
        var img = input.value;
        $("#imgRepresentImage").attr("src", img).width(200);
    }
    $("#x").text('[X]');
}
$(document).ready(function () {
    $("#x").click(function () {
        $("#imgRepresentImage").attr("src", "").width(0);
        $("#x").text('');
        $("#representImageUpload").val('');
    });
}); 
```

为我工作:)

# magento - 正确覆盖 Magento 中的管理模板文件

> ID：10206649
> 
> 赞同：0
> 
> 时间：2012-04-18T09:33:09.860
> 
> 标签：magento

我想正确地覆盖这个管理模板文件`app/design/adminhtml/default/default/template/sales/order/create/form/address.phtml`

根据我的[发现](https://stackoverflow.com/a/9790119/551713)，正确的方法是在新模块中创建一个布局文件，在我的模块目录中设置模板路径并使用引用节点引用该模板文件。但我不知道该怎么做。

到目前为止，我不明白如何使用 xml 控制布局。有人可以展示如何实际做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:11:09.673

您应该真正创建自己的模块，然后您可以创建一个新模板。

如果你想强制，你需要`setTemplate()`将你的 phtml 路径作为参数。`$this->getLayout()->createBlock('my_module/blockname')->setTemplate('my_module/template.phtml');`

请记住，这里的两个斜线符号是不同的。

`createBlock()`是一个街区，所以会在`/app/code/<codePool>/My/Module/Blocks/<blockname.php>`

`setTemplate()`用于模板，因此将在`/app/design/<area>/default/default/template/template.phtml`

`<area>`当您在管理后端时，您将是 /adminhtml。

为了使模板正常工作，您需要创建一个新模块并扩展使用此模板的 adminhtml 块文件。您必须从 layout.xml 中找到该块，然后您可以扩展该块并指定一个新模板。

我就是这样做的，但我也发现很难覆盖 Adminhtml 模块中的内容。

# sql - 我的分组是否正确，感觉我缺少数据

> ID：10206650
> 
> 赞同：0
> 
> 时间：2012-04-18T09:33:09.750
> 
> 标签：sql, oracle

我在我的网络系统中记录错误，人们可以从任何地方登录，例如下载我共享的内容；家庭照片，文件 ++。

这是一个矫枉过正的系统，但作为开发人员，我认为这很有趣 :D

在我的错误表中，我具有以下结构： DataTime Userid(int) IP(varchar) ErrorMessage(text)

在我的 persontable 中，我有以下结构： Id(int) Firstname(varchar) Lastname(varchar)

我想根据不同的错误计算错误的数量或错误......但我认为我做错了，因为同一个用户可以有多个 IP，而一个 IP 可以有多个用户。SQL如下：

```
SELECT TO_CHAR(DateTime, 'DD') DAY, 
       TO_CHAR(DateTime, 'MM') MONTH, 
       log.ErrorMessage, 
       CONCAT(CONCAT(person.lastname, ', '), person.firstname), 
       log.IP, 
       count(*) AS "COUNT"
  FROM errorlog log
  FULL JOIN person person
    ON log.Userid = person.Id
 WHERE log.DateTime BETWEEN foo 
                        AND foo2
 GROUP BY TO_CHAR(DateTime, 'MM'), 
          TO_CHAR(DateTime, 'DD'), 
          person.Lastname, 
          person.Firstname, 
          log.IP, 
          log.errormessage
ORDER BY MONTH ASC, 
         DAY ASC; 
```

我认为我的 sql 可能会在不同的 IP 上对“离开”同一个人进行分组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:52:05.870

由于您在`SELECT`子句中包含了人员的姓名和 IP 地址，因此它将返回每个日期每个人每个 IP 地址每个错误消息的错误计数。

如果您只想要每个日期的每个错误消息的错误计数，请从您的查询中省略人员的姓名和 IP 地址：

```
SELECT TO_CHAR(DateTime, 'DD') DAY,
       TO_CHAR(DateTime, 'MM') MONTH,
       log.ErrorMessage,
       count(*) AS "COUNT"
  FROM errorlog log
  WHERE log.DateTime BETWEEN foo
                         AND foo2
  GROUP BY TO_CHAR(DateTime, 'MM'),
           TO_CHAR(DateTime, 'DD'),
           log.IP,
           log.errormessage
ORDER BY MONTH ASC,
         DAY ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:55:59.100

您的查询不会给出错误计数。它将在同一天为同一 IP 地址和用户提供相同错误消息的计数。如果你想要一个用户列表和他们的错误计数，这是 SQL（未经测试）：

```
SELECT CONCAT(CONCAT(person.lastname, ', '),  person.firstname), 
log.IP, ISNULL(count(log.DateTime), 0) AS "COUNT"  
FROM person
LEFT OUTER JOIN errorlog log
ON person.Id = log.Userid
WHERE log.DateTime BETWEEN foo AND foo2  
GROUP BY person.Lastname, person.Firstname, log.IP
ORDER BY person.Lastname, person.Firstname, log.IP 
```

如果您确切地指定它是什么，我们将能够为您提供更多帮助。

# c# - 将 .aspx 页面转换为 Microsoft Excel 页面

> ID：10206652
> 
> 赞同：0
> 
> 时间：2012-04-18T09:33:36.037
> 
> 标签：c#, asp.net

嗨，我想在我的 Web 应用程序中使用这样的东西，即在按钮上单击转换为 Xls 页面的 .aspx 页面。我做到了，但结果并不如我所愿。我在按钮单击时使用了此代码，如下所示。

```
 Response.Clear();
        Response.Buffer = true;
        string filename = "TicketSecretary.xlxs";
        Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);
        Response.ContentEncoding = System.Text.Encoding.UTF8;
        Response.ContentType = "application/ms-excel";
        this.EnableViewState = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:40:08.160

我在`Response.End();`最后错过了。

[http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)

# iphone - 使用视频格式 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 从 CMSampleBufferRef 创建 UIImage

> ID：10206655
> 
> 赞同：1
> 
> 时间：2012-04-18T09:33:45.250
> 
> 标签：iphone, objective-c, uiimage, video-processing, pixelformat

我使用 CVPixelFormatType_420YpCbCr8BiPlanarFullRange 从 iphone 相机设备捕获，以更快地处理灰度平面（平面 0）。我在内存中存储了一些帧以供以后创建视频。在我创建灰度视频之前，我只存储了包含发光的平面（平面 0）。

现在我必须存储两个平面并从它们创建一个彩色视频，用于存储我使用这样的帧：

```
bytesInFrame = width * height * 2; //2 bytes per pixel, is that correct?
frameData = (unsigned char*) malloc(bytesInFrame  * numbeOfFrames); 
```

从我使用的灰度缓冲区创建图像的功能：

```
- (UIImage *) convertBitmapGrayScaleToUIImage:(unsigned char *) buffer 
                                withWidth:(int) width
                               withHeight:(int) height {

size_t bufferLength = width * height * 1;
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);
size_t bitsPerComponent = 8;
size_t bitsPerPixel = 8;
size_t bytesPerRow = 1 * width;

CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceGray();
if(colorSpaceRef == NULL) {
    DLog(@"Error allocating color space");
    CGDataProviderRelease(provider);
    return nil;
}

CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;

CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

CGImageRef iref = CGImageCreate(width, 
                                height, 
                                bitsPerComponent, 
                                bitsPerPixel, 
                                bytesPerRow, 
                                colorSpaceRef, 
                                bitmapInfo, 
                                provider,   // data provider
                                NULL,       // decode
                                YES,            // should interpolate
                                renderingIntent);

uint32_t* pixels = (uint32_t*)malloc(bufferLength);

if(pixels == NULL) {
    DLog(@"Error: Memory not allocated for bitmap");
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpaceRef);
    CGImageRelease(iref);       
    return nil;
}

CGContextRef context = CGBitmapContextCreate(pixels, 
                                             width, 
                                             height, 
                                             bitsPerComponent, 
                                             bytesPerRow, 
                                             colorSpaceRef, 
                                             bitmapInfo); 

if(context == NULL) {
    DLog(@"Error context not created");
    free(pixels);
}

UIImage *image = nil;
if(context) {

    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, width, height), iref);

    CGImageRef imageRef = CGBitmapContextCreateImage(context);

    image = [UIImage imageWithCGImage:imageRef];

    CGImageRelease(imageRef);   
    CGContextRelease(context);  
}

CGColorSpaceRelease(colorSpaceRef);
CGImageRelease(iref);
CGDataProviderRelease(provider);

if(pixels) {
    free(pixels);
}   
return image;
} 
```

我已经看到这个问题与我想要实现的类似： [kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 框架到 UIImage 转换](https://stackoverflow.com/questions/8838481/kcvpixelformattype-420ypcbcr8biplanarfullrange-frame-to-uiimage-conversion) 但我认为这会为我的转换增加一个额外的步骤。

有什么方法可以直接从缓冲区创建颜色 UIImage？我会很感激一些迹象。

# hibernate - Play Framework 1 使用什么来实现 ORM？

> ID：10206656
> 
> 赞同：3
> 
> 时间：2012-04-18T09:33:54.327
> 
> 标签：hibernate, jpa, orm, playframework, playframework-1.x

Play Framework 版本 1 使用什么 ORM？从我从该站点读到的内容中，它提到了 JPA，当我搜索 JPA 时，我找不到 ORM 框架的下载站点。CMIIW，JPA 似乎是 Java 的一个特性，而不是一个现成的 ORM 框架。

Play 使用休眠模式吗？如果是，我如何在 Java 中创建模型类并自动创建数据库中的表？如何在 Hibernate 中使用 .find() 方法？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:51:08.743

Play Framework 1.x 使用 Hibernate。您扩展 Play 的模型支持类，用必要的注释标记您的对象，其余的由 Play 处理。查看 Play 文档，例如[使用 Hibernate](http://www.playframework.org/documentation/1.2.4/model#hibernate)或[JPA 持久性持久化您的对象模型一章：查找对象](http://www.playframework.org/documentation/1.2.4/jpa#finding)- 那些应该回答您的问题。

# python - 如何过滤 Django ModelForm 中的 ManyToManyField 选项？

> ID：10206658
> 
> 赞同：6
> 
> 时间：2012-04-18T09:33:57.907
> 
> 标签：python, django, django-forms, django-orm

我想在我的 ModelForm 中过滤 ManyToManyField 选项：

```
class MyForm(forms.ModelForm):
    class Meta:
        model = Entity
        fields = ['parent_entities']

    def __init__(self, *args, **kwargs):
        self.root_entity = kwargs.pop('root_entity')
        self.Meta.fields['parent_entities'].queryset = Entity.objects.filter(root_entity=self.root_entity)
        super(MyForm, self).__init__(*args, **kwargs) 
```

我尝试了很多我见过的不同代码，但还没有任何效果。

我想我的问题是我无法获得这个“parent_entities”字段。使用此代码，我有错误：

```
list indices must be integers, not str 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T09:40:40.213

```
def __init__(self, *args, **kwargs):
   # First pop your kwargs that may bother the parent __init__ method
   self.root_entity = kwargs.pop('root_entity')
   # Then, let the ModelForm initialize:
   super(MyForm, self).__init__(*args, **kwargs)
   # Finally, access the fields dict that was created by the super().__init__ call
   self.fields['parent_entities'].queryset = Entity.objects.filter(root_entity=self.root_entity) 
```

# python - 没有 csrf_token 的 Django 1.4

> ID：10206663
> 
> 赞同：1
> 
> 时间：2012-04-18T09:34:35.023
> 
> 标签：python, django, django-csrf

我刚刚将 Django 从 1.2.3 升级到 1.4，并意识到 django.middleware.csrf.CsrfResponseMiddleware 已被贬低。有没有其他方法我不必在每篇文章中都使用 csrf_token ？前端设计师不必担心 django 特定的令牌会更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:38:03.140

检查[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#utilities)[`csrf_exempt`](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)，尤其是[`csrf_protect`](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#django.views.decorators.csrf.csrf_protect)装饰器。

然后，您可以使用`django.middleware.csrf.CsrfViewMiddleware`默认 csrf 保护 w/`csrf_exempt`来免除特殊视图；或仅`csrf_protect`用于每个视图进行保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:40:19.590

根据发行说明，现在有一个`ensure_csrf_cookie`-decorator: [decorator](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.ensure_csrf_cookie)和[csrf-docs](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)。

# c# - 替代 Thread.Suspend() 方法

> ID：10206664
> 
> 赞同：3
> 
> 时间：2012-04-18T09:34:36.473
> 
> 标签：c#, multithreading, suspend

`Thread.Suspend()`如您所知，方法已过时。当按钮单击事件发生时，我想立即暂停线程。我使用了 Thread.Suspend() 并且效果很好，但是每个人都建议使用 Thread.Suspend() 方法不是暂停任务的好方法。我使用了一个标志来暂停任务，但是每次按钮单击事件发生时，我都必须等待退出任务。我使用 Thread.IsAlive 标志来等待线程退出，但这种方法会冻结表单。

```
void ButtonClickEvent(object sender, ButtonClickEventArgs e)
{
    TheadExitFlag = false;

    if(MyThread != null)
    {
        while(MyThread.IsAlive);
        //MyThread.Suspend();
    }
}

void MyTask(void)
{
    while(TheadExitFlag)
    {
        // some process
        Thread.Sleep(5000);
    }
} 
```

我怎样才能立即暂停线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:53:16.603

AFAIK 没有具有相同功能的替代方案。我不确定操作系统的问题`Suspend()`是否可以在语言/库中解决，但没有尝试这样做，所以它可能太难了，甚至是不可能的。

在存在这样的替代方案之前，您只能轮询挂起标志，然后在某个同步对象上等待“恢复”信号。我为此使用了[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T15:12:37.203

使用 a`ManualResetEvent`在运行和空闲状态之间切换。

```
ManualResetEvent run = new ManualResetEvent(true);

void ResumeButton_Click(object sender, ButtonClickEventArgs e)
{
  run.Set();
  PauseButton.Enabled = true;
  ResumeButton.Enabled = false;
}

void PauseButton_Click(object sender, ButtonClickEventArgs e)
{
  run.Reset();
  PauseButton.Enabled = false;
  ResumeButton.Enabled = true;
}

void MyTask(void)
{
    while (run.WaitOne())  // Wait for the run signal.
    {
      // Do work here.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T07:59:40.023

[在https://stackoverflow.com/a/45786529/3013473](https://stackoverflow.com/a/45786529/3013473)有一个使用 AspectJ 和等待/通知的近似解决方案。

# c# - 部分视图中的原始 Route 参数

> ID：10206670
> 
> 赞同：0
> 
> 时间：2012-04-18T09:35:00.920
> 
> 标签：c#, asp.net-mvc

我试图在部分视图中获取原始路由参数，更具体：我有一个包含以下代码的视图：

```
@Html.Action("List", "Forum", new { obj = Model.Project}) 
```

我有一个论坛控制器，方法如下：

```
 public PartialViewResult List(IForumTopic obj)
    {
        return PartialView(obj.ForumTopics);
    } 
```

现在我想要原始请求的路由数据：如果我使用 url：/home/1/Forum/List 那么 List 是方法，1 是 Id，home 是控制器，但如果我这样做：

```
ViewContext.RequestContext.RouteData.Values["controller"].ToString(); 
```

值是论坛而不是主页，有没有办法从路由参数中获取主页和 Id？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:58:16.527

我自己找到的，您可以执行以下操作：`this.Request.RequestContext.RouteData.Values["controller"].ToString();`

# mongodb - Mongodb upsert 嵌入文档

> ID：10206673
> 
> 赞同：5
> 
> 时间：2012-04-18T09:35:10.070
> 
> 标签：mongodb

我每天每米有一个文件。如果他不存在，我如何在数据数组中添加另一个子文档并创建整个文档？

```
{
  “关键”：“20120418_123456789”，
  “数据”：[
     {
     “计”：123456789，
     "DT": ISODate("2011-12-29T16:00:00.0Z"),
     “能源”：25，
     “PM”：11，
     “最大峰值”：16
     }
  ],
  “配置”：{“someparam”：4.5}
}

```

我可以为此目的使用 upsert 吗？

结果将是如果文档存在：

```
{
  “关键”：“20120418_123456789”，
  “数据”：[
     {
     “计”：123456789，
     "DT": ISODate("2011-12-29T16:00:00.0Z"),
     “能源”：25，
     “PM”：11，
     “最大峰值”：16
     },
     {
     “计”：123456789，
     "DT": ISODate("2011-12-29T16:15:00.0Z"),
     “能源”：22，
     “Pmin”：13，
     “最大峰值”：17
     }
  ],
  “配置”：{“someparam”：4.5}
}

```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T10:33:05.790

我认为您想要的是 $addToSet 命令 - 只有当它不存在时才会将元素推送到数组中。为简洁起见，我稍微简化了您的示例：

```
db.meters.findOne()
{
    "_id" : ObjectId("4f8e95a718bc9c7da1e6511a"),
    "config" : {
        "someparam" : 4.5
    },
    "data" : [
        {
            "Meter" : 123456789,
        }
    ],
    "key" : "20120418_123456789"
} 
```

现在运行：

```
db.meters.update({"key" : "20120418_123456789"}, {"$addToSet": {"data" : {"Meter" : 1234}}}) 
```

我们得到了更新的版本：

```
db.meters.findOne()
{
    "_id" : ObjectId("4f8e95a718bc9c7da1e6511a"),
    "config" : {
        "someparam" : 4.5
    },
    "data" : [
        {
            "Meter" : 123456789,
        },
        {
            "Meter" : 1234
        }
    ],
    "key" : "20120418_123456789"
} 
```

再次运行相同的命令，结果不变。

注意：您可能会增加这些文档，特别是如果此字段是无限的并且通过以这种方式更新导致频繁（相对昂贵）移动 - 您应该在这里查看有关如何缓解这种情况的想法：

[http://www.mongodb.org/display/DOCS/Padding+Factor#PaddingFactor-ManualPadding](http://www.mongodb.org/display/DOCS/Padding+Factor#PaddingFactor-ManualPadding)

# php - 是否可以在 ASPX 页面上使用带有 cURL 的连续 POSTS？

> ID：10206682
> 
> 赞同：0
> 
> 时间：2012-04-18T09:35:33.313
> 
> 标签：php, curl

我正在尝试在 ASPX 页面上使用 cURL，我想知道我是否没有浪费时间处理我不确定的 POSTing 值：特别是：

```
__VIEWSTATE  
__EVENTVALIDATION  
__EVENTTARGET  
 __EVENTARGUMENT 
```

我需要一个接一个地发送几个表格，我认为这些值是相互依赖的。
我如何学习如何为它们生成正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:45:22.210

cURL 是一个 HTTP 客户端，它会很高兴地按照你告诉它的任何方式访问你告诉它的任何 URI。因此，“是否可以将连续的 POST 与 cURL 一起使用”的答案是肯定的。

我认为您要问的是如何确保您使用 cURL 来发布数据（特别是表单变量），以安全地模拟该特定站点的多个表单提交。

对于任何 HTTP 脚本/重放，您最好的选择是仔细研究当您“正常”（即使用浏览器）点击页面时会发生什么。

正如[这篇与您所做的非常相似的博客文章所](http://www.vaibhavbora.com/blog/2009/08/using-curl-for-aspx-with-viewstate/)暗示的那样，您几乎可以肯定想要一个像[LiveHTTPHeaders](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers)这样的工具来清楚地看到正在发生的事情。

一旦你知道要发送什么，cURL 肯定就等于完成任务。

# mysql - 为什么我在 MYSQL 中得到“错误代码 1005 无法创建表”，而 FK 中没有拼写错误

> ID：10206684
> 
> 赞同：0
> 
> 时间：2012-04-18T09:35:44.890
> 
> 标签：mysql

使用以下脚本，当我尝试创建 NetBankingTransaction 表时，它会失败并显示以下消息：

> 错误代码：1005。无法创建表“wah_schema.netbankingtransaction”（错误号：150）

数据库脚本：

```
CREATE  TABLE IF NOT EXISTS `wah_schema`.`Transaction` (
  `idTransaction` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `idOrder` INT UNSIGNED NOT NULL ,
  `type` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`idTransaction`, `idOrder`, `type`) )
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `wah_schema`.`NetBankingTransaction` (
  `idTransaction` INT NOT NULL ,
  `bankCode` VARCHAR(45) NOT NULL ,
  `type` VARCHAR(45) NOT NULL DEFAULT 'NETBANKING' ,
  PRIMARY KEY (`idTransaction`, `type`) ,
  INDEX `fk_NetBankingTransaction_Transaction1` (`idTransaction` ASC, `type` ASC) ,
  CONSTRAINT `fk_NetBankingTransaction_Transaction1`
    FOREIGN KEY (`idTransaction` , `type` )
    REFERENCES `wah_schema`.`Transaction` (`idTransaction` , `type` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

有人可以帮我理解为什么会出现这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:37:32.470

您需要正确添加该外键约束`UNIQUE KEY`。`Transaction (idTransaction, type)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:38:15.597

idTransaction 是每个表中的不同类型。一个是未签名的，另一个是签名的。尝试在第二个表中使 idTransaction 无符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:35:13.877

这个对我有用：

```
/*drop table if exists `Transaction`;*/
CREATE  TABLE IF NOT EXISTS `Transaction` (
  `idTransaction` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `idOrder` INT UNSIGNED NOT NULL ,
  `type` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`idTransaction`, `idOrder`, `type`), 
  key idx_idTransaction_type (idTransaction, `type`))
ENGINE = InnoDB;

/*drop table if exists NetBankingTransaction;*/
CREATE  TABLE IF NOT EXISTS `NetBankingTransaction` (
  `idTransaction` INT UNSIGNED NOT NULL ,
  `bankCode` VARCHAR(45) NOT NULL ,
  `type` VARCHAR(45) NOT NULL DEFAULT 'NETBANKING' ,
  PRIMARY KEY (`idTransaction`, `type`)
 , CONSTRAINT `fk_NetBankingTransaction_Transaction1`
    FOREIGN KEY (`idTransaction` , `type` )
    REFERENCES `Transaction` (`idTransaction` , `type` )
    ON DELETE CASCADE
    ON UPDATE CASCADE
    )
ENGINE = InnoDB; 
```

NetBankingTransaction 表中的 idTransaction 必须是无符号的。并且您需要在表中的 (idTransaction, `type`)上建立索引`Transaction`。您的主键不涵盖 FK 要求，因为它超过三列。

PS：您在 NetBankingTransaction 表中不需要这个

> 指数`fk_NetBankingTransaction_Transaction1`（`idTransaction`ASC，`type`ASC）

# java - Java - 编码字符串

> ID：10206688
> 
> 赞同：0
> 
> 时间：2012-04-18T09:35:58.587
> 
> 标签：java, string, sockets, encoding

我正在尝试从系统控制台读取流程，但我遇到了一些编码问题。由于我是法国人，我的键盘有一些特殊字符，例如“é”、“è”、“à”等...

当我将控制台的内容放入文本区域时，我得到了类似的东西：

```
Le volume dans le lecteur C s'appelle DisqueC
Le num?ro de s?rie du volume est CE7........
3 fichier(s)           20?229 octets
5 R?p(s)  450?096?623?616 octets libres 
```

它会自动将特殊字符替换为“？” 而且尺寸也有问题。

我这样阅读控制台的内容：

```
BufferedReader stdInput = new BufferedReader(new InputStreamReader(child.getInputStream(), "UTF-8"));
BufferedReader stdError = new BufferedReader(new InputStreamReader(child.getErrorStream(), "UTF-8"));

String line;
byte[] lineBytes;
while ((line = stdInput.readLine()) != null)
{
    lineBytes = line.getBytes("UTF-8");
    buffer.append("\t\t" + new String(lineBytes, "UTF-8") + "\n");
}
stdInput.close();
while ((line = stdError.readLine()) != null)
{
lineBytes = line.getBytes("UTF-8");
buffer.append("\t\t" + new String(lineBytes, "UTF-8") + "\n");
}
stdError.close(); 
```

然后缓冲区通过套接字发送，我将其显示到 jTextArea 中：

```
textArea.append(new String(console_output.getBytes(), "UTF-8");); 
```

那么，谁能告诉我为什么我有这个编码问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:39:27.480

如果您在 Windows 上执行此操作，则应该忘记这一点。默认的命令行编码是 CP850，这是废话。您可以为会话更改它，但您将无法调用任何批处理文件。

尝试`chcp 65001`

这将切换到 UTF-8。检查这个[StackOveflow 搜索](https://stackoverflow.com/search?q=windows+console+utf-8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T12:48:18.477

在某些情况下，这个功能会很好：

```
System.out.println(String.format(Locale.UK, <your String value>, args)); 
```

# oracle - 在 oracle 中找出最后执行的查询

> ID：10206691
> 
> 赞同：0
> 
> 时间：2012-04-18T09:36:01.877
> 
> 标签：oracle, triggers

我正在使用基于 Web 的应用程序，我必须在其中进行一些自定义。但我无权访问 Java 源代码甚至 JSP。我只能访问数据库。

有没有办法找出最后执行的查询。

简单地说，表上有很多触发器（当我从前端执行某些操作时它们会触发），我想知道哪个查询导致触发器触发。有没有办法找到它们。在触发器或其他一些 oracle 视图或表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:02:44.563

You can use the below example in the trigger to find the statement executed

```
create or replace TRIGGER tbuTAR_TSM
  BEFORE UPDATE ON TAR_TSM
  FOR EACH ROW
declare
  v_test varchar2(10000);
  cursor c1 is
    select ltrim(sq.sql_text)
      into v_test
      from v$sql sq, v$session se, v$open_cursor oc
     where sq.sql_id = oc.sql_id
       and se.saddr = oc.saddr
       and se.sid = oc.sid
       and se.audsid = SYS_CONTEXT('userenv', 'sessionid')
     order by oc.LAST_SQL_ACTIVE_TIME desc;
begin
  open c1;
  loop
    fetch c1
      into v_test;
    exit when c1%notfound;
    if substr(upper(v_test), 1, 6) = 'UPDATE' then
      if instr(upper(v_test), 'TAR_TSM') != 0 then
    dbms_output.put_line(v_test);
    exit;
      end if;
    end if;
  end loop;
  close c1;
end; 
```

# javascript - 正则表达式接受 4 个不同模式的字符

> ID：10206695
> 
> 赞同：0
> 
> 时间：2012-04-18T09:36:05.827
> 
> 标签：javascript, regex

我正在尝试满足以下要求的正则表达式。

1.  总字符串长度必须为 3 或 4。
2.  前两个字符必须来自 az 或 AZ
3.  最后两个字符必须是 0-9

我已经尝试过以下方法，但我知道这不是好方法

```
 var str = /^[a-zA-Z]{1,2} + [0-9]{2} + $/, 
```

请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:37:22.793

```
var str = /^([a-z]{1,2}|[A-Z]{1,2})[0-9]{2}$/; 
```

然后你测试它：

```
str.test("aa3"); // false, 2 integers are required
str.test("a34"); // true
str.test("aA33"); // false, 2 first characters have to be in the same case 
```

不确定你的真正意思`First two characters must be from a-z or A-Z`，如果你希望这些字符是相同的情况，请使用上面的正则表达式，否则

```
var str = /^[a-zA-Z]{1,2}[0-9]{2}$/; 
```

# jquery - 将条形与 jqPlot 中的条形标签对齐

> ID：10206696
> 
> 赞同：0
> 
> 时间：2012-04-18T09:36:09.277
> 
> 标签：jquery, jqplot

我无法将我的 jqPlot 的条与相应的标签对齐。请看我图表的图像。我如何确保条形图位于标签正上方的中心？

![显示未对齐条的图像](../Images/7482bd5bf5cfee85cf3b11e1edeb2e08.png)

这是我用于渲染图表的代码：

```
function drawReadsChart(json) {
        var s1 = [['<%= GetText("Combo Total") %>', json.Data.Combo.Total]];
        var s2 = [['<%= GetText("Soil In Total") %>', json.Data.SoilIn.Uhf]];
        var s3 = [['<%= GetText("UHF") %>', json.Data.Combo.Uhf]];
        var s4 = [['<%= GetText("LF") %>', json.Data.Combo.Lf]];

        $.jqplot('chart', [s2, s3, s4, s1], {
            grid: {
                drawBorder: false,
                shadow: false
            },
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: { fillToZero: true, shadow: false },
                pointLabels: { show: true }
            },

            series: [
                { color: '#68BA38' },
                { color: '#68BA38' },
                { color: '#28C9DE' },
                { color: '#2895DE' }
            ],
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                },
                yaxis: {
                    padMin: 0
                }
            }
        });
    } 
```

**编辑：**

我不得不把我所有的 4 个系列变成 1 个系列。然后一切都正确对齐。为了能够为每个条单独分配颜色，我必须在 BarRenderer 上设置“varyBarColor：true”，并指定“seriesColors”。没有意义，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T19:26:20.487

我不得不将我的 4 个系列合并到 1 个系列。像这样：

```
var bars = [['<%= GetText("Soil In Total") %>', json.Data.SoilIn.Uhf, 
['<%= GetText("UHF") %>', json.Data.Combo.Uhf], 
['<%= GetText("LF") %>', json.Data.Combo.Lf], 
['<%= GetText("Combo Total") %>', json.Data.Combo.Total]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:01:13.137

首先是你的 div 容器比它通常需要的大。尝试减小它的宽度。您的标签默认居中呈现，但您可以将它们向右移动。您可以使用它`tickOptions: { labelPosition: 'middle' }`来移动它。另请参阅此链接[http://www.jqplot.com/tests/rotated-tick-labels.php](http://www.jqplot.com/tests/rotated-tick-labels.php)

# f# - F#“模块化”脚本

> ID：10206697
> 
> 赞同：4
> 
> 时间：2012-04-18T09:36:10.870
> 
> 标签：f#

加载+重新加载 fsx 文件的推荐方法是什么？只是试验......是的，是的，正确的语言，正确的工作等等。

我喜欢如何在 FSI 中完成以下工作：

```
#load "script.fsx";
open Script

> let p = script.x 1 
  Error: This expression was expected to have type string but here has int...
(* edit script.fsx x to make it int -> int  *)
>
> #load "script.fsx"
> let p = script.x 1
val it : int = 2 
```

但是我们如何为通过 fsi blah.fsx 运行的应用程序执行此操作？也许是坐在一个while循环中的东西。似乎#load 和#use 不能在let 或module 中。即你不能像let reload script = #load script 那样使用#load，想知道为什么？

我最初的方法是拥有 .fs 文件并在每次我想添加/修复某些内容时重新编译 + 重新启动。这种方法感觉很原始。

第二种方法是尝试在模块内使用 #load 指令，结果证明它不起作用（就范围而言有点意义）......

```
module test1 =
  #load @"C:\users\pc\Desktop\test.fsx"

  open Test

module test2 = 
  ... 
```

另一种方法是通过加载带有进程诊断的 fsi module.fsx 来为每个模块创建一个新进程，但这看起来很糟糕、效率低下而且呃。

我内心深处有一种感觉，这在 .NET 中不会是微不足道的，但无论如何我想提出这个问题，FSI 做到了......我想知道我是否可以利用 FSI API 或其他东西（或至少复制他们的代码）？

TL;DR 我阅读了以下有关 erlang 的内容，并希望在 F# 中为自己使用它。 [Erlang：有没有办法用 rebar 将更改的模块重新加载到已经运行的节点中？](https://stackoverflow.com/questions/2955157/erlang-is-there-a-way-to-reload-changed-modules-into-an-already-running-node-wi)

“...只要程序中的模块在磁盘上发生更改，重新加载器就会自动替换正在运行的副本。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T00:02:09.857

我不知道这是否适用于 FS，但在 ML 中，您可以加载一个主文件，该文件将您的所有文件加载到您的项目中，然后执行您需要用来将它们组合在一起并运行您的应用程序的任何代码。要查看从 REPL 内部运行的大型应用程序的示例，请查看剑桥计算科学实验室的 Isabelle/HOL 站点[http://www.cl.cam.ac.uk/research/hvg/Isabelle/installation。 html](http://www.cl.cam.ac.uk/research/hvg/Isabelle/installation.html). 下载应用程序后，在 src 代码目录中查找任何名为 root.ml 的文件。其中将有六个控制不同级别的实施。这是递归的，因为顶级文件可以调用加载该特定子功能的多个子目录中的文件。这允许根据执行的顶级文件将您的应用程序定位到各种场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T06:15:52.463

典型的 .NET Framework 应用程序无法卸载/重新加载程序集，除非它们位于与应用程序一起启动的主要应用程序域不同的应用程序域中。这基本上是大多数插件系统是如何为在完整的 .NET Framework 上运行的应用程序设计的。[在 .NET Core 中的 .NET Standard 2.0 之后，使用Collectible Assemblies](https://github.com/dotnet/coreclr/issues/552)功能，情况可能会发生变化。

参考：

*   [https://github.com/dotnet/coreclr/issues/552](https://github.com/dotnet/coreclr/issues/552)
*   [https://github.com/dotnet/corefx/issues/19773](https://github.com/dotnet/corefx/issues/19773)

# c# - 在 Exchange 中创建和更新约会

> ID：10206701
> 
> 赞同：0
> 
> 时间：2012-04-18T09:36:22.413
> 
> 标签：c#, exchange-server, webdav

我正在尝试通过 C# 代码实现创建/更新约会。我正在使用专用交换帐户和 webdav 进行通信。更新约会需要将此约会保存到我们的技术用户邮箱。是否有任何其他选项来创建和更新约会？现在，我正在努力限制单个邮箱上的日历约会数量。我确定应该有其他选择，但我看不到它。

看看是否有其他人对此问题有任何建议或解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:50:35.700

创建约会... //为 Subject,body,.... 赋值。_service 是 Exchange 服务对象。

```
Appointment app = new Appointment(_service);
        app.Subject = subject;
        app.Body = body;
        app.Start = startTime;
        app.End = endTime;
        app.Location = location;

        DayOfTheWeek[] days = new DayOfTheWeek[] { DayOfTheWeek.Saturday };
        app.Recurrence = new Recurrence.WeeklyPattern(app.Start.Date, 1, days);
        app.Recurrence.StartDate = app.Start.Date;
        app.Recurrence.NumberOfOccurrences = 3;

        app.Save(); 
```

如果您需要更多信息，请询问...

# java - 如何在 JSTL 属性文件中编写注释

> ID：10206703
> 
> 赞同：0
> 
> 时间：2012-04-18T09:36:45.083
> 
> 标签：java, jsp, jakarta-ee, websphere, jstl

我想知道如何在这样使用的属性文件中写注释

`PF47=Ankomstdatum måste anges innan SIS kan avslutas. # AF PCT`

`#`应该是评论，但是当我使用 fmt 格式呈现消息时，JSTL 标记输出包括评论。属性文件中的注释必须在单独的行上吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:40:50.253

似乎 java-property 文件只允许在单独的行上进行注释，所以您需要编写

```
# AF PCT
PF47=Ankomstdatum måste anges innan SIS kan avslutas. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:41:34.603

该格式在[java.util.Properties 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29)中进行了描述。是的，`#`如果该字符是该行的第一个非空白字符，则该字符仅被视为注释的开头。

# plone - 在内容子项之后插入标签

> ID：10206707
> 
> 赞同：2
> 
> 时间：2012-04-18T09:37:02.910
> 
> 标签：plone, diazo

我正在尝试将自定义标签插入页面

这应该工作吗？

```
<after css:content-children="#viewlet-below-content-body">
   <a href="@@historyview">History</a>
</after> 
```

似乎只有替换允许我插入/替换自定义标签

```
<replace css:content-children="#viewlet-below-content-body">
   <a href="@@historyview">History</a>
</replace> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:11:55.883

Diazo 不支持只有 content/content-children 的 before/after 规则，您只能删除或替换。也许在未来的版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:28:29.697

如何将您自己的标签附加到主题（同时复制/替换孩子）：

```
<append css:theme="#theme-id-for-viewlet-below-content-body">
   <a href="@@historyview">History</a>
</append> 
```

# java - @PostLoad 在 JPA 2 中的 @Embeddable 上？

> ID：10206713
> 
> 赞同：4
> 
> 时间：2012-04-18T09:37:20.063
> 
> 标签：java, jpa, eclipselink

我的问题是我的`@PostLoad`方法`@Embeddable`没有被调用。

但我不知道，它是否应该工作并且在某处存在更多错误配置的错误，或者我它不应该工作，因为`@PostLoad`它只适用于`@Entity`s？

我没有在 JSR 中找到关于in[的](http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html)`@PostLoad`具体声明。`@Embeddable`

> 3.5.1 生命周期回调方法
> 
> 实体生命周期回调方法可以在实体侦听器类和/或直接在实体类或映射的超类上定义。

我不知道这个声明是否包括`@Embeddable`。

*我的持久性提供者是 Eclipselink。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:38:48.623

Embeddables 当前不处理实体回调和侦听器。这可能符合规范，因为它们被称为“实体”回调，而且 orm.xml 也不允许它们嵌入。

但是，EclipseLink 确实支持嵌入式事件，所以我们没有理由不支持这一点，所以请在 EclipseLink 上记录一个错误。

您应该能够使用 DescriptorCustomizer 为您的嵌入式定义 DescriptorEventListener，PostLoad 回调映射到 postBuild 和 postClone。

# java - 将二进制数据反序列化为对象时出现 StackOverflowError

> ID：10206716
> 
> 赞同：3
> 
> 时间：2012-04-18T09:37:28.547
> 
> 标签：java, coldfusion, stack-overflow, coldfusion-9

在 Windows 上使用 ColdFusion 9.0.1 我遇到了以下问题。

我有一些相当大而复杂的对象（嵌套对象，嵌套结构和嵌套对象......等）序列化为二进制数据，因此我可以将其放入我的数据库中。这就像一个魅力但是当我从我的数据库中检索这样的二进制数据然后尝试使用该`objectLoad()`函数反序列化数据时，我得到一个堆栈溢出错误：

```
Caused by: java.lang.StackOverflowError
at java.lang.Exception.(Exception.java:77)
at java.lang.reflect.InvocationTargetException.(InvocationTargetException.java:54)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:47)
at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.util.HashMap.readObject(HashMap.java:1030)
at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
at 
```

再重复一遍！！！！

```
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
    at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
    at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
    at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at coldfusion.runtime.TemplateProxyWrapper.readExternal(TemplateProxyWrapper.java:48)
    at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1792)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at org.hibernate.util.SerializationHelper.doDeserialize(SerializationHelper.java:244)
    at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:306)
    at org.hibernate.type.SerializableType.fromBytes(SerializableType.java:105)
    at org.hibernate.type.SerializableType.get(SerializableType.java:62)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:186)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:175)
    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:105)
    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2267)
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1423)
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1351)
    at org.hibernate.loader.Loader.getRow(Loader.java:1251)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:619)
    at org.hibernate.loader.Loader.doQuery(Loader.java:745)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)
    at org.hibernate.loader.Loader.list(Loader.java:2167)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:448)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1258)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at coldfusion.orm.hibernate.HibernatePersistenceManager._executeHQL(HibernatePersistenceManager.java:822)
    at coldfusion.orm.hibernate.HibernatePersistenceManager.executeHQL(HibernatePersistenceManager.java:751)
    at coldfusion.orm.hibernate.HibernatePersistenceManager.executeQueryWithNamedParams(HibernatePersistenceManager.java:626)
    at coldfusion.orm.ORMUtils._executeQuery(ORMUtils.java:332)
    at coldfusion.orm.ORMUtils.executeQuery(ORMUtils.java:320)
    at coldfusion.runtime.CFPage.ORMExecuteQuery(CFPage.java:7805) 
```

没有无限循环或任何东西，因为当我在 JVM 设置中增加堆栈大小时，一切正常。但是，我不想增加生产服务器上的堆栈大小。

**那么有没有人知道一种将二进制数据反序列化为对象而不创建如此巨大的堆栈的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:29:40.590

事实证明，解决这个问题的唯一方法是增加 JVM 的堆栈大小或重构我的对象。

# c# - 对枚举类型使用复选框或文本框

> ID：10206718
> 
> 赞同：0
> 
> 时间：2012-04-18T09:37:30.500
> 
> 标签：c#, wpf

如果我有这个结构：

```
public class Parent
{
  public string Name{get; set;}
  public List<Child> Childs {get; set;}
}

public class Child
{
  public string Name{get; set;}
  public string Value{get; set;}
  public enum ValueType {get; set;}
}

public enum ValueType
{
    Int,
    Boolean,
    String
};

public class ParentFactory
{
   public List<Parent> Parents {get; set;}

   public ParentFactory()
   {
      Child child1 = new Child() {Name="Filter1", Value="1", ValueType=ValueType.String};
      Child child2 = new Child() {Name="isExecuted", Value="true", ValueType=ValueType.Boolean};
      Child child3 = new Child() {Name="Width", Value="10", ValueType=ValueType.Int};

      Parent parent1 = new Parent(){Name="Adam", Childs = new List<Child>(){child1, child2}};
      Parent parent2 = new Parent(){Name="Kevin", Childs = new List<Child>(){child3}};

      Parents = new List<Parent>(){parent1, parent2};
   }
} 
```

我想将对象：绑定`ParentFactory parentFactory = new ParentFactory()`到 ItemsControl：

```
<DockPanel>
    <ItemsControl ItemsSource="{Binding Parents}">
    </ItemsControl>
</DockPanel>

 <Window.Resources>
     <DataTemplate DataType="{x:Type Parent}">
         <StackPanel Margin="2,2,2,1">
              <Expander Header="{Binding Name}">
                  <ItemsControl ItemsSource="{Binding Childs}" />
              </Expander>
         </StackPanel>
     </DataTemplate>
        <DataTemplate DataType="{x:Type Child}">
            <StackPanel>
                    <TextBox Grid.Column="0" Text="{Binding Name}" />
                    <TextBox Grid.Column="1" Text="{Binding Value}"/>
                    <TextBox Grid.Column="2" Text="{Binding ValueType}"/>
            </StackPanel>
        </DataTemplate>
 </Window.Resources> 
```

在 Stackpanel 中，有一个控件：TextBox。但是，我希望它更加动态：如果 ValueType 是 Boolean ，则使用 Checkbox ，否则使用 Textbox ：`<TextBox Grid.Column="1" Text="{Binding Value}"/>`。

这可能吗，如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:01:44.027

您可以`DataTemplate`动态更改

# Xaml

```
 <DataTemplate>
                    <DataTemplate.Resources>
                        <DataTemplate x:Key="Condition1">
                           <TextBox></TextBox> // Do you binding
                        </DataTemplate>
                        <DataTemplate x:Key="Condition2">
                           <CheckBox></CheckBox> // Do you binding
                        </DataTemplate>
                    </DataTemplate.Resources>                    
                </DataTemplate>
                    <ContentPresenter x:Name="ContentField"
                                      Content="{Binding}"
                                      ContentTemplate="{StaticResource ResourceKey=Condition1}" /> 
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Path=ValueType}" Value="1">
                            <Setter TargetName="ContentField" Property="ContentTemplate" Value="{StaticResource ResourceKey=Condition2}" />
                        </DataTrigger>
                    </DataTemplate.Triggers> 
```

确保正确设置绑定......并制作`DataTemplates`for`Condition1`和`Condition2`

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:02:01.577

我认为最简单的方法是将它们都放在面板中并定义两个新的布尔属性，这些属性将`Visibility`通过 Boolean To Visibility控制它们`ValueConverter`。

```
public bool IsValueTypeBoolean
{
    get
    {
         ...Conditions that will return true for CheckBox.
    }
}

public bool IsValueTypeOther
{
    get
    {
         return !this.IsValueBoolean;
    }
}

<TextBox Grid.Column="2" Visibility="{Binding IsValueTypeOther, Converter={StaticResource visibilityConverter}}"/> 
<CheckBox Grid.Column="2" Visibility="{Binding IsValueTypeBoolean, Converter={StaticResource visibilityConverter}}"/> 
```

Boolean 到 VisibilityConverter

```
[ValueConversion(typeof(bool), typeof(Visibility))]
public class BooleanToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        bool myValue = (bool)value;

        if (myValue)
            return Visibility.Visible;
        else
            return Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

将此作为资源添加到您的 XAML：

```
 <local:BooleanToVisibilityConverter x:Key="visibilityConverter"></local:VisibilityConverter> 
```

希望没有错别字...

# java - 如何在 Android 中找到这个 RuntimeException（堆栈跟踪）？

> ID：10206727
> 
> 赞同：2
> 
> 时间：2012-04-18T09:38:03.780
> 
> 标签：java, android, stack-trace, runtimeexception

我在 Google Play 上的开发者控制台中有这个 strack 跟踪，所以我无法重现这个异常，因为我不知道是什么触发了它。用户也没有留言，所以...

```
java.lang.RuntimeException: Binary XML file line #17: You must supply a layout_height attribute.
at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5319)
at android.view.ViewGroup$LayoutParams.<init>(ViewGroup.java:5271)
at android.widget.AbsListView$LayoutParams.<init>(AbsListView.java:6398)
at android.widget.AbsListView.generateLayoutParams(AbsListView.java:6035)
at android.widget.AbsListView.generateLayoutParams(AbsListView.java:96)
at android.view.LayoutInflater.inflate(LayoutInflater.java:477)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at com.android.internal.view.menu.ListMenuPresenter$MenuAdapter.getView(ListMenuPresenter.java:253)
at android.widget.AbsListView.obtainView(AbsListView.java:2212)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
at android.widget.ListView.onMeasure(ListView.java:1155)
at android.view.View.measure(View.java:12863)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2256)
at android.view.View.measure(View.java:12863)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1166)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2552)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

如何查明问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:10:37.913

这是 Android 的内部错误，您的代码中没有任何内容。您甚至不会在堆栈跟踪中看到您的应用程序代码，而且您的应用程序可以在许多其他设备上运行。

我收到了类似的偶尔崩溃报告，并且在某些 Android 版本（使用[ACRA](http://code.google.com/p/acra)）上也遇到了类似的崩溃。我见过几次“您必须提供 layout_height 属性”意外崩溃。

如果您使用 ACRA 或类似工具，有时您只会收到您的应用根本不负责的报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:20:27.377

消息说 - “您必须提供 layout_height 属性。” 因此，请仔细检查所有组件是否具有 layout_height 属性。

我还在这个堆栈中提到了“菜单”。它由系统生成。仔细检查您的所有菜单是否始终有有效项目（至少不是零项目）。

# jquery - Jquery Tools Overlay - 减少页面上的事件

> ID：10206729
> 
> 赞同：0
> 
> 时间：2012-04-18T09:38:08.813
> 
> 标签：jquery, jquery-plugins, overlay, jquery-tools

Overlay 插件来自[Jqery Tools](http://jquerytools.org/demos/overlay/index.html)

我用正常呼叫呼叫覆盖

```
$("img[rel]").overlay(); 
```

但是，如果 Overlay 打开，则我正在查看[Visual Event](http://www.sprymedia.co.uk/article/Visual+Event+2)，即关闭按钮有很多关闭事件（目前超过 40 个）。

我认为关闭事件来自对覆盖的每次调用。我有超过 40 个元素`img[rel]`（

是否有经验如何防止创建的关闭事件不多，或者如何委派 Overlay？

感谢帮助。

# git - 在 git 中，悬空提交和悬空 blob 有什么区别？

> ID：10206732
> 
> 赞同：3
> 
> 时间：2012-04-18T09:38:29.183
> 
> 标签：git, git-dangling

当我执行 a`git fsck`时，我会看到一个悬空对象列表。其中一些被称为悬空提交，而另一些被称为悬空 blob。我想知道这两者之间的确切区别是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:49:23.540

Git 为存储库中的每个文件创建 blob（除非已经存在相同的内容）。悬空 blob 是与任何提交无关的 blob，除非您的存储库在磁盘故障等情况下被破坏，否则没有多大用处。

您可以使用 . 查看它们的内容`git show <blob SHA-1>`。

悬空提交是无法从`HEAD`任何分支访问的提交。您仍然可以使用它们，例如通过调用`git cherry-pick <SHA-1>`or `git reset <SHA-1>`。

[Scott Chacon 的Git 用户手册](http://schacon.github.com/git/user-manual.html#dangling-objects)中有更多解释。

# c# - 无法将“Microsoft.Expression.Platform.WPF.InstanceBuilders.WindowInstance”类型的对象转换为“System.Windows.Window”类型

> ID：10206742
> 
> 赞同：1
> 
> 时间：2012-04-18T09:39:03.053
> 
> 标签：c#, wpf, mvvm, window

我在 WPF 中为窗口创建了一个样式

```
<Style x:Key="JIMSWindow" TargetType="Window">
    <Setter Property="ResizeMode" Value="NoResize"/>
    <Setter Property="ShowInTaskbar" Value="False"/>
    <Setter Property="SizeToContent" Value="WidthAndHeight"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="WindowStyle" Value="None"/>
    <Setter Property="BorderThickness" Value="0"/>        
    <Setter Property="AllowsTransparency" Value="True"/>                
    <Setter Property="loc:CloseWindow.EscapeClosesWindow" Value="True"></Setter>
</Style> 
```

`EscapeCloseWindow`课程就是这样。

```
public static class CloseWindow 
    {
        public static readonly DependencyProperty EscapeClosesWindowProperty = DependencyProperty.RegisterAttached(
           "EscapeClosesWindow",
           typeof(bool),
           typeof(CloseWindow ),
           new FrameworkPropertyMetadata(false, new PropertyChangedCallback(OnEscapeClosesWindowChanged)));

        public static bool GetEscapeClosesWindow(DependencyObject d)
        {
            return (bool)d.GetValue(EscapeClosesWindowProperty);
        }    
        public static void SetEscapeClosesWindow(DependencyObject d, bool value)
        {
            d.SetValue(EscapeClosesWindowProperty, value);
        }    
        private static void OnEscapeClosesWindowChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Window target = (Window)d;
            if (target != null)
            {
                target.PreviewKeyDown += new System.Windows.Input.KeyEventHandler(Window_PreviewKeyDown);
            }
        }    
        private static void Window_PreviewKeyDown(object sender, KeyEventArgs e)
        {
            Window target = (Window)sender;  
            // If this is the escape key, close the window
            if (e.Key == Key.Escape)
                target.Close();
        }
    } 
```

现在，当我`View`在 WPF MVVM 中打开我的时候，我会遇到一个异常，例如

```
Unable to cast object of type 'Microsoft.Expression.Platform.WPF.InstanceBuilders.WindowInstance' to type 'System.Windows.Window'.
   at JIMS.Commands.CloseWindow.OnEscapeClosesWindowChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) in C:\Documents and Settings\323582\Desktop\JIMS\JIMS.Commands\CloseWindow.cs:line 84
   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
   at System.Windows.StyleHelper.ApplyStyleOrTemplateValue(FrameworkObject fo, DependencyProperty dp)
   at System.Windows.StyleHelper.InvalidateContainerDependents(DependencyObject container, FrugalStructList`1& exclusionContainerDependents, FrugalStructList`1& oldContainerDependents, FrugalStructList`1& newContainerDependents)
   at System.Windows.StyleHelper.DoStyleInvalidations(FrameworkElement fe, FrameworkContentElement fce, Style oldStyle, Style newStyle)
   at System.Windows.StyleHelper.UpdateStyleCache(FrameworkElement fe, FrameworkContentElement fce, Style oldStyle, Style newStyle, Style& styleCache)
   at System.Windows.FrameworkElement.OnStyleChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
   at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
   at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
   at Microsoft.Expression.Platform.WPF.WpfDependencyPropertyImplementation.SetValue(Object target, Object valueToSet)
   at Microsoft.Expression.DesignModel.Metadata.DependencyPropertyReferenceStep.SetValue(Object target, Object valueToSet)
   at Microsoft.Expression.DesignModel.Core.InstanceBuilderOperations.SetValue(Object target, IProperty propertyKey, Object value)
   at Microsoft.Expression.DesignModel.InstanceBuilders.ClrObjectInstanceBuilder.ModifyValue(IInstanceBuilderContext context, ViewNode target, IProperty propertyKey, Object value, PropertyModification modification)
   at Microsoft.Expression.DesignModel.InstanceBuilders.DependencyObjectInstanceBuilderBase`1.ModifyValue(IInstanceBuilderContext context, ViewNode target, IProperty propertyKey, Object value, PropertyModification modification)
   at Microsoft.Expression.Platform.WPF.InstanceBuilders.FrameworkElementInstanceBuilder.ModifyValue(IInstanceBuilderContext context, ViewNode target, IProperty propertyKey, Object value, PropertyModification modification)
   at Microsoft.Expression.Platform.WPF.InstanceBuilders.WindowInstanceBuilder.ModifyValue(IInstanceBuilderContext context, ViewNode target, IProperty propertyKey, Object value, PropertyModification modification)
   at Microsoft.Expression.DesignModel.InstanceBuilders.ClrObjectInstanceBuilder.UpdateProperty(IInstanceBuilderContext context, ViewNode viewNode, IProperty propertyKey, DocumentNode valueNode) 
```

请任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:41:19.800

你可以尝试改变

```
 Window target = (Window)d; 
```

到

```
Window target = d as Window 
```

在我的机器上，它可以顺利进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-12T03:59:21.990

**Visual Studio**中的**WPF** **XAML**设计器无法显示任何派生自. 作为一种解决方法，它会拦截这种情况并替换它自己的内部代理类型来充当实时**XAML**根。该类型称为：**`System.Windows.Window`**

 ****```
Microsoft.VisualStudio.DesignTools.WpfDesigner.InstanceBuilders.WindowInstance 
```

它可以在 assembly 中找到`"Microsoft.VisualStudio.DesignTools.WpfDesigner, Version=15.0.0.0"`，我在以下位置找到：

**`"C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\PrivateAssemblies \Microsoft.VisualStudio.DesignTools.WpfDesigner.dll"`**

* * *

无论如何，我对这场可悲惨败的贡献如下：

> → 两者`System.Windows.Window`和 XAML 设计器的`WindowInstance`代理类共享相同的直接基类，即`System.Windows.Controls.ContentControl`. ←</p>

这意味着通过降低`TargetType`您（例如）控件上指定的类型，`Template`如下所示，它将适用于任何一种类型。当然，您将失去 的特定功能`Window`，但至少这为您提供了进一步解决方法的稳定起点。

```
<ControlTemplate x:Key="any_key_name" TargetType="{x:Type ContentControl}">
    <Border Background="Green">
        <ContentPresenter />
    </Border>
</ControlTemplate> 
```

与此相关，请注意，可以`WindowInstance`在运行时以编程方式检测案例，而无需实际加载或引用上面引用的 VS2017 类库，只需`IProvideValueTarget.TargetObject`使用字符串比较检查相关对象（即，可能来自 ）`GetType().Name == "WindowInstance"`：。

无论如何，上面的示例是在**XAML**`ControlTemplate`中定义的一个小例子，它确实对和都正确工作，并且没有普遍的崩溃，不幸的是，经常有损于**XAML**设计器的主要有用好处。**`System.Windows.Window``Microsoft.VisualStudio...WindowInstance`**

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T14:57:36.080

您可以添加对[Radical Framework](https://github.com/RadicalFx/)的引用并更改 Dependecy 属性的定义：

```
 public static readonly DependencyProperty ShowIconProperty = DependencyProperty.RegisterAttached(
                            "ShowIcon",
                            typeof(bool),
                            typeof(WindowsManager),
                            new FrameworkPropertyMetadata(true, new PropertyChangedCallback((d, e) =>
                                {
                                    if (!DesignTimeHelper.GetIsInDesignMode())
                                        RemoveIcon((Window)d);
                                }
                                ))); 
```********

# java - 如何在 Eclipse Indigo 中添加远程 Glassfish OpenSource 3.1.2？

> ID：10206743
> 
> 赞同：1
> 
> 时间：2012-04-18T09:39:10.620
> 
> 标签：java, eclipse, glassfish

就像标题一样；我有一个远程服务器，我想从 Eclipse 内部访问它。

![远程服务器](../Images/dba6792b95eafd3252d3e52ac6fccedd.png)

![设置](../Images/dc24d6d97cae00035ef1b41d989717ec.png)

为什么我必须为服务器设置本地目录？有人请告诉我如何做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:46:12.423

您必须设置一个目录，因为服务器应该是本地的。您可以在远程服务器上挂载（或在 Windows 中映射），但运行 Glassfish 的 JVM 进程将再次在本地运行。

如果您只想调试：

在 Glassfish 的管理控制台中启用调试并重新启动域。

使用 Eclipse 连接到 Glassfish 调试端口 | 调试配置... | 远程 Java 应用程序。

# sql - SQL/触发器：延迟后显示的输出

> ID：10206747
> 
> 赞同：0
> 
> 时间：2012-04-18T09:39:16.983
> 
> 标签：sql, oracle, triggers

[一个类似的案例](https://forums.oracle.com/forums/thread.jspa?threadID=322012)表明，有时会触发触发器并且 dbms_output.put_line stmts。其中不会立即在控制台上打印，而是在匿名块/过程中遵循另一个这样的 stmt。

为什么会这样？是因为Oracle客户端的版本吗？如果按顺序触发两个/三个这样的触发器怎么办？
服务器输出开启

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:19:20.523

写入 DBMS_OUTPUT 的文本会被缓冲，直到调用 DBMS_OUTPUT.GET_LINES 来检索缓冲数据。无论出于何种原因，您使用的工具都没有调用 DBMS_OUTPUT.GET_LINES 并显示数据。但是，如果您在触发器的输出*之前*看到后一个语句的输出，则表明创建该输出的 DBMS_OUTPUT.PUT_LINE 语句正在按该顺序调用。

关于触发器触发的问题，您需要通读 Oracle 数据库概念手册中关于触发器的部分。对于 11.1，可以在[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28318.pdf)找到数据库概念手册。

分享和享受。

# php - 如何使用 ajax 从 php 文件中获取多个数据？

> ID：10206753
> 
> 赞同：1
> 
> 时间：2012-04-18T09:39:36.143
> 
> 标签：php, ajax

我想从 submit.php 页面获取数据并将它们放在我页面的一些标签中。在下面的示例中，我可以只将数据放在具有 id:“shortcutTitle”的标签中。我从我的 php 文件（来自数据库）中获得了多个数据，我希望它们位于我页面中的各种标签上。

```
function submit(shortcutid,shortcuttitle,shortcutlink,icon)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
             document.getElementById("shortcutTitle").value=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","submit.php?shid="+shortcutid+"&shtitle="+shortcuttitle+"&shlink="+shortcutlink+"&shicon="+icon,true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:48:28.010

您可能希望使用`json_encode`将 javascript 对象发送回 XML 请求

```
<?php
  echo json_encode( array('name' => 'tehlulz', 'id' => '1') );
?> 
```

因此，从结果中，您可以通过以下方式调用输出：

```
var ajaxResuts = {};

if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
  ajaxResuts = JSON.parse( xmlhttp.responseText );
  alert("Returned: " + ajaxResults.name);
} 
```

# c# - sharepoint aspx 页面的代码隐藏在哪里？

> ID：10206756
> 
> 赞同：6
> 
> 时间：2012-04-18T09:39:39.193
> 
> 标签：c#, asp.net, visual-studio-2010, sharepoint-2010

毫无疑问，我在这里遗漏了一些非常明显的东西 - 但我是 sharepoint 的新手，所以请多多包涵。

我已经成功地添加了一个母版页，创建了一个内容类型，并为我的自定义内容类型创建了一个 aspx 页面 - 但我找不到它的 cs 文件！？

在共享点解决方案中是否有另一种实现代码隐藏的方式？创建控件时似乎是相似的。我习惯于标准的 asp .net c# web 应用程序开发，所有的 aspx 页面都带有“作为标准”的代码隐藏文件。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:36:38.053

在 SharePoint 中，您可以有一个代码隐藏类，但它需要在程序集中，而不是在 aspx.cs 代码隐藏文件中。

使用 Visual Studio 2010，您的 aspx 页面的 Page 指令将如下所示：

```
<%@ Page 
    Language="C#" 
    DynamicMasterPageFile="~masterurl/default.master" 
    Inherits="MyNamspace.MyPage, $SharePoint.Project.AssemblyFullName$"
    %> 
```

然后，您可以创建一个`MyNamspace.MyPage`类并执行您在常规代码隐藏文件中执行的所有操作。

如果你看一下 14 hive\TEMPLATE\LAYOUTS 目录中的开箱即用的 aspx 页面，你会看到，虽然有些页面有内联代码（在布局中是允许的），但几乎每个页面都继承自一个类SharePoint 程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:59:29.627

Code-Behind 在 2007 和 2010 版本中被设计隐藏。请参阅[此处](http://msdn.microsoft.com/en-us/library/bb862025%28v=office.12%29.aspx)以基于每个位置启用它 (PageParserPath)。

从长远来看，在可支持性、维护和管理方面，如果可以的话，您会更好地遵守 SharePoint 中的约定并使用控件而不是代码隐藏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T10:11:13.053

您应该在共享点设计器中打开您的`sharepoint .aspx`页面并[`inherit`](http://msdn.microsoft.com/en-us/library/1yk8s7sk%28v=vs.71%29.aspx)使用您的 .cs 类添加语句。

就像是 ：

```
 <%@ Page Language="C#" MasterPageFile="~masterurl/default.master" Inherits="Namespace.ClassName,Namespace,Version=1.0.0.0, Culture=neutral, PublicKeyToken=tokenid" %> 
```

一件事仍然是早先的@Paul's Answer，您应该基于每个位置启用它[(PageParserPath)](http://msdn.microsoft.com/en-us/library/bb862025%28v=office.12%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:48:07.777

我建议您在 SharePoint 专用网站上提出这个问题。你可以在[这里](https://sharepoint.stackexchange.com/)找到它。

但回答您的问题时，至少在 MOSS 2007 中，SharePoint 页面中没有可供您使用的代码。不确定 SharePoint 2010 是否准确，但必须相同。

# android - 如何拆分数组值并存储在android中的字符串中？

> ID：10206758
> 
> 赞同：0
> 
> 时间：2012-04-18T09:39:42.897
> 
> 标签：android

我从 arraylist **arr**获取值并将这些值存储在带有逗号分隔符的字符串中。但是对于最后一个值，逗号也在添加。我怎样才能删除它？请帮我...

我的代码：

```
ArrayList<String> arr;  
String str;

    for (int i = 0; i < arr.size(); i++) {

                int kk = arr.size();
                System.out.println("splitting test" + arr.get(i));
                str += arr.get(i) + ",";

                System.out.println("result" + str);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:42:37.090

根本不要添加它：

```
ArrayList<String> arr;  
String str;

for (int i = 0; i < arr.size(); i++) {
   int kk = arr.size();
   System.out.println("splitting test" + arr.get(i));
   str += arr.get(i);
   if (i + 1 != arr.size()) {
     str+= ",";
   }
   System.out.println("result" + str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:28:37.547

那这个呢：

```
StringBuilder builder = new StringBuilder();
for(Object item : arrayOrIterable) builder.append(item).append(",");
String result = builder.deleteCharAt(builder.length() - 1).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:42:34.157

尝试：

```
str.substring(0, str.length()-1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:42:48.753

如果你试试这个，我认为应该可以。

```
ArrayList<String> arr;  
String str;

    for (int i = 0; i < arr.size(); i++) {

                int kk = arr.size();
                System.out.println("splitting test" + arr.get(i));
                str += arr.get(i) + i!=arr.size()-1?"":",";

                System.out.println("result" + str);

            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:45:39.003

你总是可以这样写。

```
String str;

        for (int i = 0; i < arr.size(); i++) {

            int kk = arr.size();
            System.out.println("splitting test" + arr.get(i));
            // It is your old code str += arr.get(i) + ",";
            // Insted write like this

            str += arr.get(i);
            if (i < arr.size() - 1) {
                str += ",";
            }
            System.out.println("result" + str);
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T09:45:45.437

在 for 循环中添加一个条件

```
if(i == arr.size()-1)
{
    str += arr.get(i);
}
else
{
   str += arr.get(i) + ",";

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-26T08:32:08.103

您必须将数组列表传递给此函数。它将返回逗号分隔的值。

```
public static <T> String getReasonArray(Collection<T> values) {
    if (values == null || values.isEmpty()) return "";
    StringBuilder result = new StringBuilder();
    for (T val : values) {
        result.append(val);
        result.append(",");
    }
    return result.substring(0, result.length() - 1);
} 
```

# c# - Connection state MySql Connector/NET

> ID：10206760
> 
> 赞同：2
> 
> 时间：2012-04-18T09:39:53.363
> 
> 标签：c#, mysql, database-connection, mysql-connector

I'm using the latest stable MySql Connector/NET 6.5.4.0.

I open a connection to a MySQL database. In the C# code, the `Connection.State` property is `Open`. I do some magic stuf, and while I'm doing that, I kill the connection server side. However, in the code the State is still `Open`.

I ran into this problem because I save instances of my database class in a static variable per session (Dictionary). If a user does a request, the database class is pulled from this variable, and queries are fired to it. However, if the connection closes server side (killed by de sysadmin, wait timeout elapsed), the state isn't updated.

Is there a workaround for this problem? My colleague allready submitted a bug report for it (http://bugs.mysql.com/bug.php?id=64991).

Close and Open before execution, is very bad for the performance, so no option.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:06:01.190

根据您的评论，抛开设计问题（应该是池化）：

> 在这种情况下连接池被关闭，我将研究 Ping 方法。如果此连接关闭，我会收到“命令执行期间遇到致命错误”

如果 ping 失败，您是否有任何理由不重新创建连接？

```
private static MySqlConnection conn;
private static int maxRetries;

private static void connect()
{
    conn = <connect code>;
}

private static MySqlConection GetConnectionRetry(int count)
{
    if (conn != null && conn.State == Open)
    {
        try
        {
            conn.Ping();
            return conn;
        }
        catch (Exception e) // better be specific here
        {
            if (count <= maxRetries)
            {
                connect();
                return GetConnectionRetry(count + 1);
            }
            else throw e;
        }
    }
    else
    {
        connect();
        return GetConnectionRetry(count + 1);
    }
}

static MySqlConnection GetConnection()
{
    return GetConnectionRetry(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:48:03.967

我建议您使用单点模式进行连接。因此，您可以确保始终只有一个连接打开，您只需管理这个连接。

# c# - C# wpf 列表框显示多个成员路径

> ID：10206761
> 
> 赞同：2
> 
> 时间：2012-04-18T09:39:56.173
> 
> 标签：c#, .net, wpf

我想了解如何使用数组作为 itemsource 在列表框中显示更多值

到目前为止，我可以使用一个值进行管理，但无法弄清楚如何显示多个值：

代码：

```
 listBox1.ItemsSource = toReturn.groups;
        listBox1.DisplayMemberPath = "name"; 
```

`toReturn.Groups`是项目数组；每个项目都有一个 ID 和一个名称。

我希望能够同时显示两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:43:33.473

你为什么不在你的项目上创建一个名为 display 的属性

```
public string Display {
    get {
        return String.Format("{0} - {1}", ID, Name);
    }
} 
```

然后做：

```
listBox1.DisplayMemberPath = "Display"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:47:26.200

或者，您可以将 DataTemplate 应用于列表框项，以更好地控制它们的显示方式，而不是向视图模型添加冗余属性。请在此处查找示例：http: [//www.wpftutorial.net/ListBoxDataTemplate.html](http://www.wpftutorial.net/ListBoxDataTemplate.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:41:15.933

```
 string uriGroup = "http://localhost:8000/Service/Group"; //rest based http GET
    private void button14_Click(object sender, EventArgs e)
    {
    XDocument xDoc = XDocument.Load(uriGroup); //Load the uri into the xdoc
    var groups = xDoc.Descendants("Group") //descendants of xml query "Group" 
        .Select(n => new
        {
            GroupID = n.Element("GroudID").Value,
            Group = n.Element("GroupName").Value, //first "Group" Sets the column title, second sets the Element to be listed in this case "GroupName" from my service. 

        })
        .ToList();

    dataGridView2.DataSource = groups; 
```

当然我使用dataGrid，但我确定列表框同样适用？希望这可以帮助大卫。

# mysql - 如何对两个不同表的两个不同列的数据求和？

> ID：10206763
> 
> 赞同：2
> 
> 时间：2012-04-18T09:40:06.407
> 
> 标签：mysql, sum, aggregate-functions

我的数据库中有两个表，每个表中有两列，一列用于用户 ID，一列用于显示一些数字数据。

我只想添加数字列的值，但问题是两个表都具有相同的使用 ID 不是强制性的。

我将尝试使用示例来解释它：

```
table1

userid  score1

  1       200
  2       300

table2

userid  score2

  1       400 
```

所以现在我想做的是根据用户ID对这两个表的分数求和，并将其显示在一个新表中，如下所示：

```
userid  score_sum

  1       600
  2       300 
```

如果我只是使用

```
Select sum(table1.score1+table2.score2) 
FROM table1 JOIN table2 ON table1.id=table2.id 
```

那么它只会显示总和，`userid 1`因为`userid 2`第二个表中不存在。所以请建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:59:44.627

通常你会通过做一个完整的外连接来解决这个问题，但是 MySql 不支持这样的连接，所以它需要被伪造。

## 查询

```
SELECT SUM(COALESCE(table1.score1,0) + COALESCE(table2.score2,0))
FROM (
    SELECT DISTINCT(id) FROM (
        SELECT userid FROM table1 UNION SELECT userid FROM table2
    ) tmp
) userids
LEFT JOIN table2 ON table2.userid = userids.userid
LEFT JOIN table1 ON table1.userid = userids.userid
GROUP BY table1.userid 
```

## 解释

首先，我们需要获取一个包含所有用户 ID 的列表，或者*我们* 可以使用这个列表作为数据集来执行操作。任何开始连接或不会切断连接的方法，因为如果所选表不包含某些用户 ID X，那么该用户将根本不会出现在最终结果中。`table1``table2``LEFT OUTER JOIN``table1``table2`

通过子选择创建`userids`结果集后，我们通过`LEFT JOIN`两个有趣的表来获取每个用户的分数。如果两个表中都不存在用户，那么我们将`NULL`为该用户获得分数（因为`NULL + number`给`NULL`），所以我们使用`COALESCE`将 any 转换`NULL`为`0`.

我应该注意，无论哪个用户包含（或不包含）哪个表，或者表在查询中出现的顺序，此查询都将正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T19:24:38.093

不确定是否需要连接，只需要在外部查询中联合（所有）得分表和分组和总和

```
SELECT userid, SUM(score)
FROM ( 
    SELECT userid, score1 as score FROM table1 
    UNION ALL SELECT userid, score2 as score FROM table2
) t 
GROUP BY t.userid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:45:39.540

```
SELECT SUM(table1.score1 + IS NULL(table2.score2) 
FROM table1 
LEFT JOIN table2 
ON table1=table1.id 
```

# android - 在社交网站上上传应用程序内容

> ID：10206767
> 
> 赞同：1
> 
> 时间：2012-04-18T09:40:18.107
> 
> 标签：android, image, audio, social-networking

在我的个人日记应用程序中，我想上传内容以及附加的图像和音频文件。怎么办？

只有内容将被上传，但图像文件不能被上传。

我正在使用 Intent .....Action_Send。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:53:06.720

尝试查看[twitter API](https://dev.twitter.com/docs)和[Facebook 开发人员](http://developers.facebook.com/)，以获取有关在其上发帖的参考。

对于其余的人，在谷歌搜索 API 会给你答案

# vhdl - VHDL：“箭头”的哪一侧的信号和端口=>

> ID：10206776
> 
> 赞同：3
> 
> 时间：2012-04-18T09:40:50.897
> 
> 标签：vhdl, fpga, xilinx

非常基本的问题：

我怎么知道端口/信号/值应该放在箭头的哪一侧？我注意到通过切换 `port_a => x`到`x <= port_a`看起来非常相等的，我得到了一个错误。另外，`x => port_a`不要工作

我什至不知道箭头应该指向哪个方向。

答案非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:06:18.200

`<=`是一个赋值 - 特别是一个信号赋值，从其他地方驱动一个带有值的信号。对于物理类比，右侧的事物将值驱动到左侧。

`=>`是从引脚到信号的端口映射。这不是一项任务——物理类比可能是将引脚焊接到电线上。

您只能对实例进行“焊接”，因此`=>`映射只发生在`port map`. 在那里，“pin”*总是*在左边（因为这是语言规则所说的），这就是为什么你不能`x <= port_a`在`port map`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:47:33.300

信号分配从右到左使用`<=`. 右侧必须是来自实体的输入信号或在进程中声明的信号。左侧可以是来自实体的输出信号（或输入/缓冲区）、进程中声明的信号或进程中声明的变量。

除了其他答案中提到的端口映射之外，`=>`箭头还用于完全不同的事情 - 构造向量。例如，如果 v 是 4 位向量，`v <= (others => '0')`则将“0000”分配给 v。括号内的 ``=>` 是在向量内不同位置分配不同值的快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T05:44:45.163

如果 => 用于端口列表，那么这怎么可能？请注意，clk_40Mhz_i 是一个引脚。

```
COMPONENT clk_wiz_v3_5 is 
```

港口

(-- 端口时钟

CLK_IN1：在标准逻辑中；

-- 时钟输出端口

CLK_OUT1：输出标准逻辑；

-- 状态和控制信号

重置：在 std_logic 中；

锁定：出标准逻辑

);

结束组件；

xclk_wiz_v3_5：clk_wiz_v3_5

港口地图（

```
 CLK_IN1          => clk_40Mhz_i,

 -- Clock out ports

 CLK_OUT1         => clk_40Mhz,

 -- Status and control signals

 RESET            => pic_fpga_reset,

 LOCKED           => clk_locked 
```

);

pic_fpga_reset <= not(processor_fpga_resetn_i);

重置 <= 不（clk_locked）；

# php - Zend Framework - 每个控制器的标题相同

> ID：10206782
> 
> 赞同：0
> 
> 时间：2012-04-18T09:41:20.663
> 
> 标签：php, zend-framework, layout, bootstrapping

我如何在引导程序中分配一次页面标题（所以我不必在每个控制器中都这样做）？是否有链接可以为我指明正确的方向？

使用引导程序是否正确？

我目前在每个控制器中都有这个：

```
public function indexAction()
{
    $this->view->title = 'Cut It Out';
} 
```

layout.phtml 有这个：

```
<h1><?php echo $this->escape($this->title); ?></h1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:58:53.527

您可以为此使用视图助手将标题回显到 layouts/layout.phtml 中的布局脚本中。

创建文件 /application/views/helpers/SiteTitle.php ：-

```
<?php
class Zend_View_Helper_SiteTitle extends Zend_View_Helper_Abstract
{
    public function siteTitle()
    {
        $siteTitle = getTitleFromDbSomehow();
        return $this->view->escape(siteTitle);
    }
} 
```

然后在您的布局头部分中，您将拥有：-

```
<title><?php echo $this->siteTitle(); ?></title> 
```

如果你想把它放在身体的某个地方：-

```
<h1><?php echo $this->siteTitle(); ?></h1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:57:48.900

首选方法是使用视图助手：

在 application/views/helpers/Title.php 中：

```
<?php
class Zend_View_Helper_Title extends Zend_View_Helper_Abstract
{
    public function title()
    {
        $title = 'cut it out'; // or from database

        return $this->view->escape($title);
    }
} 
```

在您的 layout.phtml 中：

```
echo $this->title(); 
```

但是，如果您必须使用引导程序（例如，您想在控制器操作中覆盖）：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    protected function _initTitle()
    {
        $this->bootstrap('layout');
        $layout = $this->getResource('layout');
        $view = $layout->getView();
        $view->title = 'Cut It Out';
    }

} 
```

# android - 删除 ArrayList 上的元素会在 ArrayAdapter 上引发 IndexOutOfBoundsException

> ID：10206783
> 
> 赞同：2
> 
> 时间：2012-04-18T09:41:33.653
> 
> 标签：android, android-arrayadapter, indexoutofboundsexception

我正在开发一个 Android 3.1 应用程序。

我有我的自定义 ArrayAdapter。我想在 ListView 中显示名称列表。

这些名称是可以下载并保存在本地的表格。当用户下载并保存一个或多个时，我调用`updateFormsNotDownloaded()`. 但是当我这样做时，我得到一个 IndexOutOfBoundsException。而且我认为这个问题是因为我调用`notifyDataSetChanged()`.

看我的代码：

```
public class FormAdapter extends ArrayAdapter<Form>
{
    private Context context;
    private int layoutResourceId;
    private List<Form> forms;
    private ArrayList<Integer> checkedItemsPosition;
    private Button downloadButton;

    public ArrayList<Integer> getCheckedItemsPosition()
    {
        return checkedItemsPosition;
    }

    public String[] getSelectedFormsId()
    {
        String[] ids = new String[checkedItemsPosition.size()];
        int i = 0;
        for(Integer pos : checkedItemsPosition)
        {
            Form f = forms.get(pos.intValue());
            ids[i] = f.FormId;
            i++;
        }
        return ids;
    }

    /**
     * Called when selected forms has been downloaded and save it locally correctly.
     */
    public void updateFormsNotDownloaded()
    {
        ArrayList<Form> copyForms = new ArrayList<Form>();
        for (int i = 0; i < forms.size(); i++)
        {
            if (!checkedItemsPosition.contains(new Integer(i)))
                copyForms.add(forms.get(i));
        }
        forms = copyForms;
        checkedItemsPosition.clear();
        notifyDataSetChanged();
    }

    public FormAdapter(Context context, int textViewResourceId,
            List<Form> objects, Button downloadButton)
    {
        super(context, textViewResourceId, objects);

        this.context = context;
        this.layoutResourceId = textViewResourceId;
        this.forms = objects;
        this.checkedItemsPosition = new ArrayList<Integer>();
        this.downloadButton = downloadButton;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        if (row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
        }

        Form f = forms.get(position);
        if (f != null)
        {
            CheckBox checkBox = (CheckBox)row.findViewById(R.id.itemCheckBox);
            if (checkBox != null)
            {
                checkBox.setText(f.Name);
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
                {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        //Form f = forms.get(position);
                        if (isChecked)
                        {
                            //checkedItems.add(f.FormId);
                            checkedItemsPosition.add(new Integer(position));
                        }
                        else
                        {
                            //checkedItems.remove(checkedItems.indexOf(f.FormId));
                            checkedItemsPosition.remove(checkedItemsPosition.indexOf(new Integer(position)));
                        }
                        downloadButton.setEnabled(checkedItemsPosition.size() > 0);
                    }
                });
            }
        }

        return row;
    }
} 
```

我在表格上有三项，但我删除了其中一项。

为什么我得到那个例外？

这是异常日志：

```
java.lang.IndexOutOfBoundsException: Invalid index 2, size is 2
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)
at java.util.ArrayList.get(ArrayList.java:308)
at es.viacognita.adapters.FormAdapter.getView(FormAdapter.java:89)
at android.widget.AbsListView.obtainView(AbsListView.java:1949)
at android.widget.ListView.makeAndAddView(ListView.java:1756)
at android.widget.ListView.fillDown(ListView.java:656)
at android.widget.ListView.fillSpecific(ListView.java:1314)
at android.widget.ListView.layoutChildren(ListView.java:1587)
at android.widget.AbsListView.onLayout(AbsListView.java:1800)
at android.view.View.layout(View.java:9581)
at android.view.ViewGroup.layout(ViewGroup.java:3877)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
at android.view.View.layout(View.java:9581)
at android.view.ViewGroup.layout(ViewGroup.java:3877)
at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
at android.view.View.layout(View.java:9581)
at android.view.ViewGroup.layout(ViewGroup.java:3877)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
at android.view.View.layout(View.java:9581)
at android.view.ViewGroup.layout(ViewGroup.java:3877)
at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
at android.view.View.layout(View.java:9581)
at android.view.ViewGroup.layout(ViewGroup.java:3877)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1253)
at android.view.ViewRoot.handleMessage(ViewRoot.java:2003)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4025)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T10:03:13.807

覆盖 getCount()。并在其中返回值 forms.size() 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-11T13:27:07.917

就我而言，Shubhayu 的回答还不够。getCount 和 getItem 必须是同步的并且使用相同的列表对象。如果您的阵列适配器必须使用内部项目列表，则两者都需要被覆盖。

```
public class MyArrayAdapter extends ArrayAdapter<MyItemType> {

private final List<MyItemType> items;

public MyArrayAdapter(final Context _context, final int _resource, final List<MyItemType> _items) {
  super(_context, _resource, _items);

  this.items = _items;
}

// IMPORTANT: either override both getCount and getItem or none as they have to access the same list
@Override
public int getCount() {
  return this.items.size();
};

@Override
public Site getItem(final int position) {
  return this.items.get(position);
}

... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:59:32.390

位置是从一开始的，而数组索引是从零开始的。

所以改变那行：

```
if (!checkedItemsPosition.contains(new Integer(i)))
    copyForms.add(forms.get(i - 1)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T10:05:36.533

您正在使用两个`Lists`及其索引 - 但这些列表绝不会同步（它们可以单独更改而无需检查另一个）。

为什么不使用`ArrayList<Form> checkForms`and `ArrayList<Form> uncheckedForms`，然后您可以删除对表单的引用`uncheckedForms`并将其添加到`checkedForms`这将使两者保持`List`同步。

当您需要获取所有 Forms 时，您可以简单地返回两个`ArrayList`s 的并集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T13:56:04.467

没有人回答他为什么会得到例外。所以我会在这里提供我的答案，即使他的问题已经很老了。

您收到异常的原因是因为当您更新“表单”时，您创建了一个新的数组对象（因此是一个新的引用）并更改了表单对它的引用，而 ArrayAdapter 维护自己的数组对象 mObjects，其中构造函数复制您提供的数组对象（对象）的引用。如果你查看它的源代码，你可以看到这一点（好在它是开源的）。

要真正解决问题，您应该使用继承的函数 add(...)、addAll(...) 等来更新数组。或者只是扩展 baseadapter 并制作自己的实现。

# clearcase - 如何仅将基线应用于特定组件？

> ID：10206785
> 
> 赞同：1
> 
> 时间：2012-04-18T09:41:44.033
> 
> 标签：clearcase, clearcase-ucm

我们正在使用 Clearcase UCM。为了维护配置项，我们创建了组件。

我用来为整个项目/steram 应用基线。

有没有办法单独为特定组件应用基线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:26:12.297

如果您选择的活动仅包括该组件中的修改版本，则您还可以在制作基线时选择所需的组件（在`-component`选项旁边）m。 （您可以查看活动的“更改集”选项卡以查看活动的每个版本的扩展路径名）[`cleartool mkbl`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkbl.htm)

请注意，`cleartool mkbl -component`如果自上一个基线以来没有任何修改，则不会创建基线。
（除非您通过添加`-identical`选项来强制解决问题）

另请注意，您仍然需要一个 UCM 视图（与流关联）来运行该命令：始终为给定的流（在给定的关联视图中）创建基线（即使仅针对一个组件）。

我还建议始终制作完整的基线（`-full`选项）。
这避免了比较两个基线时的性能问题，因为两个增量基线必须在每个文件的版本树中返回到最后一个完整基线，以便获取给定基线的完整版本列表。

* * *

与`-comp`选项一起使用时，`mkbl`应将要创建的基线的名称放在命令的**末尾**（即最后一个参数）：

```
cleartool mkbl -comp myComponent@\myPVob aNewBlName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:11:17.357

如果你使用命令行，你可以使用`cleartool mkbl -component`

阅读 man ( `cleartool man mkbl`) 了解更多详情。

# sql-server - SQL Server 搜索表中的数百万行

> ID：10206787
> 
> 赞同：0
> 
> 时间：2012-04-18T09:41:50.540
> 
> 标签：sql-server, search, rows

是否可以不使用全文索引，我们可以根据关键字搜索巨大的表格吗？

我想搜索词`Country man working`，它返回以下结果：

1.  乡下人开始工作
2.  濒临失败的国家
3.  人开始他的工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:11:15.010

创建一个表以包含字典中的所有单词，减去噪音单词。

创建一个表以将字典关键字表链接到您的数据表

编写一些代码以在链接表中创建记录，其中字典中的单词出现在要搜索的表中的文本列中。

然后你可以像这样搜索一下：

```
SELECT T.TextStuff
FROM KeywordTable AS K
JOIN LinkTable AS L ON L.KeywordID = K.KeywordID
JOIN TableToSearch AS T ON T.KeyWordID = L.KeywordID
WHERE K.Keyword = 'Country'
OR K.Keyword = 'man'
OR K.Keyword = 'working' 
```

那只是伪代码，但希望它能证明这个想法。设置耗时，但应该比做一堆 LIKE 表现更好。

总而言之，您想查看每行一个单词的表，您想在链接表中找到匹配的单词，然后您可以从那里找到原始表中的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:53:04.180

这应该返回您需要的结果：

```
SELECT *
FROM TABLE
WHERE Field LIKE '%country%'
OR Field LIKE '%man%'
OR Field LIKE '%working%' 
```

虽然不能保证速度...

* * *

评论中的注释 - 这确实不是这样做的方法。全文索引是一种使用方法，但您没有详细说明为什么它不是一个选项。

# c# - 空 Session 对象记得 sessionID 吗？

> ID：10206788
> 
> 赞同：5
> 
> 时间：2012-04-18T09:41:52.327
> 
> 标签：c#, asp.net, session

如果其中没有存储任何值，我确定 Session id 会不断变化。

![在此处输入图像描述](../Images/6c7b769d8c1697ac373c77f95cea7208.png)

但似乎 2010 年有一个例外： [这是演示视频](https://skydrive.live.com/redir.aspx?cid=fe3c089563fd353c&resid=FE3C089563FD353C!539&parid=FE3C089563FD353C!174&authkey=!AGge923yUmaDFgk)

*新页面（空项目）：*

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Response.Write(Session.SessionID);
    } 
```

奇怪但在回发/刷新/ ctrl+f5 之后：我得到了**相同**的数字......但它**不**应该是那样......（因为我没有存储任何东西）

![在此处输入图像描述](../Images/b3d8dbcbbc3489c05007bb133b7accc2.png)

我错过了什么？

*ps Session.Count = 0.....*

## 编辑

**我只是在vs2005**中运行相同的代码，每次都有一个新的会话 ID ！！！

![在此处输入图像描述](../Images/4888bd981946d9f6a953c8d695e2b62b.png)

![在此处输入图像描述](../Images/b2696beba636c1ad4ab498e699eed425.png)

![在此处输入图像描述](../Images/be5f9baff16d0dd39f9b97ce043e7f24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:50:11.177

It should be like that.

Session is a special ASP.NET runtime object that exists for all requests/responses during the determined time. It's by design that it remains the same, doesn't matter it's page load or post back.

The session terminates then it reach it's timeout period. You might control what exact timeout you want to keep you session alive:

[Session timeout in ASP.NET](https://stackoverflow.com/questions/648992/session-timeout-in-asp-net)

You also able to control where the session is persisted between the request.

[http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

In Memory state management is simplies one, it just keeps Session object in RAM. So in case of app-pool is recycled all data is gone. More production-ready scenarios include SQL state management.

**EDIT:** I just assume, that then you running on VS2005, you run on old version of ASP.NET Web Development server (Cassini) that indeed my work in the way to have Session with each new request, if nothing is stored in Session yet.

# javascript - 如何从 JavaScript 调用 Objective-C 方法？

> ID：10206793
> 
> 赞同：3
> 
> 时间：2012-04-18T09:42:15.900
> 
> 标签：javascript, iphone, objective-c, ios, uiwebview

我想`SQLite`在 UIWebView 上显示数据库内容。为此，我有一个本地 HTML 文件。在调用 JavaScript 函数的 html 文件中加载正文。Java Script里面如何调用Objective-c方法。如何从 Objective c 获取数据到 Java 脚本。

```
<html>
    <head>
        <!-- a script inline --> 
        <script language="JavaScript" TYPE="text/javascript">
            <!--
            function myJsFunc() 
            { 

                //here i want to call objective-c methods.

            } 
            // -->
            </script>
        </head>
    <Body Bgcolor=#800000 onload="myJsFunc(); return true;">

        </Body>
</html> 
```

Objective-C 代码......

```
- (void)viewDidLoad
{
        [super viewDidLoad];
        NSString *path;
    NSBundle *thisBundle = [NSBundle mainBundle];
    path = [thisBundle pathForResource:@"Demo" ofType:@"html"];

    // make a file: URL out of the path
    NSURL *instructionsURL = [NSURL fileURLWithPath:path];
    [myWebView loadRequest:[NSURLRequest requestWithURL:instructionsURL]];
    [self.view addSubView:myWebView];
}
-(NSArray*)FetchingDataFromDataBase{

    // Code for retriving data from SQlite data Base, and return NSArray;
    return myArray;
} 
```

在Function `myJSFunc`()里面，怎么能调用`-(NSArray*)FetchingDataFromDataBase.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:50:47.183

Graver 给出的博客文章解释了它是如何做到的。

```
- (BOOL)webView:(UIWebView *)webView2 
      shouldStartLoadWithRequest:(NSURLRequest *)request 
      navigationType:(UIWebViewNavigationType)navigationType 
```

如果您的类中有上述方法，则将在加载新页面之前调用此方法。只有当此方法返回 YES 时，才会处理新的加载请求。我们使用该机制与 Objective-C 函数进行通信。

# javascript - Android Phonegap 数据库问题

> ID：10206795
> 
> 赞同：1
> 
> 时间：2012-04-18T09:42:20.400
> 
> 标签：javascript, cordova

我在 phonegap 应用程序 (android) 中创建了一个数据库，并用测试值填充它。

```
var db = window.openDatabase("achievements", "1.0", "AchievementsDB", 1000);
    db.transaction(createTables, function(tx, error){
        console.log("Error Creating Tables: "+error);
    }, function(){
        console.log("Successfully created Tables in Database");
    }); 
```

这是 createTables 函数

```
function createTables(tx){
tx.executeSql('CREATE TABLE IF NOT EXISTS Achievements (name unique, description)');  
tx.executeSql('INSERT INTO Achievements (name, description) VALUES (0, 1)');
tx.executeSql('INSERT INTO Achievements (name, description) VALUES ("good", "morning")'); 
```

}

问题是。我总是收到错误回调。当我在数据库上尝试 SELECT 时，它总是说检索到的数据（结果数据）是未定义的。另外，我想知道为什么我不能访问手机的 data/data/mypackage/database 文件夹（实际上，DDMS 只是显示一个空的数据文件夹）。

我真的不知道这里有什么问题了，我真的用谷歌搜索了很多关于这个的问题。请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:48:11.440

首先Phonegap在这里做数据库

> /data/data/package-name/app_database/file__0/0000000000000001.db

其次，您实际上是从哪个查询中获得 ErrorCallback 的？

# android - 从先前验证的 EditText 小部件中删除错误指示器

> ID：10206799
> 
> 赞同：124
> 
> 时间：2012-04-18T09:42:36.947
> 
> 标签：android, android-edittext

我正在使用 EditText 小部件，并且正在使用 EditText 的`setError()`方法对其进行验证，并且可以正确验证。

但是我在同一个屏幕上有一个按钮，可以重定向到另一个活动。当我按下返回按钮并返回屏幕时，验证仍然出现。

因此，在活动`OnPause`事件中，我想删除 EditText 的验证。这怎么可能。

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-04-18T09:48:49.020

```
protected void onPause () {
    TextView textView = ...; // fetch it as appropriate
    textView.setError(null);
} 
```

因为如文档中所述：

> 如果错误为空，则错误消息和图标将被清除。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2020-01-03T04:00:06.703

## 在科特林：

```
editText.error = null 
```

## Kotlin 扩展功能：

为了使其更具可读性，您可以添加此扩展功能

```
fun EditText.clearError() {
    error = null
} 
```

## 在 Java 中：

```
editText.setError(null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-27T12:15:57.570

您也可以使用以下方法进行操作：

```
protected void onPause () {    
    mEditText.setError(null);//removes error
    mEditText.clearFocus();    //clear focus from edittext
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-05T11:02:54.843

只需放在`.setError(null)`EditText 的末尾。

```
mEditText.setError(null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-03T05:13:40.957

在 kotlin 中，您可以使用属性访问语法简单地访问属性，即

```
protected void onPause () {
    EditText mEditText = ...; // fetch it as appropriate
    mEditText.error = null
} 
```

# php - 如何将 10 个查询优化为一个

> ID：10206802
> 
> 赞同：0
> 
> 时间：2012-04-18T09:42:40.720
> 
> 标签：php, mysql

请在如何优化我的查询方面需要您的帮助。我想从同一个表中获取 10 个不同的行数据。

**这是其中一个查询**

```
 $query1 = mysql_query("SELECT m.Course_code AS 'Course', m.score, m.grade
                   FROM maintable AS m  
                   INNER JOIN students AS s ON
                   m.matric_no = s.matric_no
                   INNER JOIN Courses AS c ON
                   m.Course_code = c.Course_code
                   WHERE m.matric_no = '".$matric_no."'
                   AND m.semester_name = 'hamattarn'
                   AND m.level = '100' ") or die (mysql_error());

                  $number_cols1 = mysql_num_fields($query1) ; 
```

**查询的这一部分正在针对所有查询进行更改**

```
 AND m.semester_name = 'hamattarn'
                   AND m.level = '100' "

 AND m.semester_name = 'rain'
                   AND m.level = '100' "

 AND m.semester_name = 'hamattarn'
                   AND m.level = '200' "

 AND m.semester_name = 'rain'
                   AND m.level = '200' "

  AND m.semester_name = 'hamattarn'
                   AND m.level = '300' "

  AND m.semester_name = 'rain'
                   AND m.level = '300' "

  AND m.semester_name = 'hamattarn'
                   AND m.level = '400' "

  AND m.semester_name = 'rain'
                   AND m.level = '400' "

 AND m.semester_name = 'hamattarn'
                   AND m.level = '500' "

 AND m.semester_name = 'rain'
                   AND m.level = '500' " 
```

这是我通过查询能够实现的目标的图片。优化后我仍然希望它看起来像这样。

< href="http://i.imgur.com/IGEj2.png">示例图片

感谢您的时间和耐心。

**更新**——这是我在优化之前显示 10 个查询中每一个查询的行表的方式。请问我如何通过新的优化查询来实现这种表类型结果？

```
 echo "<table class=\"altrowstable\" id = " bgcolor = gold >\n";
     echo "<tr align=center>\n";
     for ($i=0; $i<$number_cols10; $i++)
     {
               echo "<th>" . mysql_field_name($query10, $i). "</th>";
     }
     echo "</tr>\n";
               while ($row = mysql_fetch_row($query10))
    {
    echo "<tr align=center>\n";
    for ($i=0; $i<$number_cols10; $i++)
    {
    echo "<td>";
    if (!isset($row[$i]))
    {echo "NULL";}
    else
    {
    echo "<b>".$row[$i]."</b>";
    }
    echo "</td>\n";
    }
    echo "</tr>\n";
    }
    echo "</table>"; 
    echo"</span>" ; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:48:03.140

为什么不这样：

```
WHERE m.semester_name IN ('rain', 'hamattarn') 
  AND m.level IN ('100', '200', '300', '400', '500')) 
```

由于结果是混合的，您应该以预期的顺序获得结果，例如：

```
ORDER BY m.semester_name, m.level 
```

这将允许您在 PHP 中拆分结果，这样的事情很常见：

```
$previous_semester = $previous_level = false;
foreach(mysql_fetch_array($query) as $row) {
    if ($previous_semester == $row['semester_name']) {
        // row semester is different from the previous one
        echo $row['semester_name'];
    }

    if ($previous_level == $row['level']) {
        // row level is different from previous one
        echo $row['level']; 
    }

    print_r($row);

    $previous_level = $row['level'];
    $previous_semester = $row['semester_name'];
} 
```

您可以在 for 循环之前打开一个 HTML 表格。当学期或级别发生变化时，您可以关闭之前的表格并打开一个新表格，为同一学期/级别的其余行添加标题等...您可以在 for 之后关闭 HTML 表格环形。

这有点棘手，但最终它会让你到达那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:12:31.413

如果你真的想优化它，那么构建一个[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)- 一个表，其中一个轴枚举了 term_name 的每个可能值，另一个访问每个可能的 level 值，然后标记要包含在查询中的交叉点。由此，您将能够制定出最简单的查询来提供该数据。

但是，由于您没有指明要排除哪些值，并且您已经包含了 term_name={rain, hamattarn} 和 level={100,200,300,400,500} 的所有可能组合，因此一个简单的解决方案是：

```
WHERE semester_name IN ('rain', 'hamattarn')
AND level in (100,200,300,400,500) 
```

您需要在 where 子句中包含 term_name 和 level ，如果您这样做，生活会更简单

```
ORDER BY semester_name, level, course 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T09:50:24.153

Just get alls possible combinations via your WHERE clause:

```
WHERE m.matric_no = :matric_no
AND (
       m.semester_name = 'hamattarn'
    OR m.semester_name = 'rain'
)
AND (
       m.level = '100'
    OR m.level = '200'
    OR m.level = '300'
    OR m.level = '400'
) 
```

# actionscript-3 - 一次使用更多 Pixel Bender 过滤器 (FLEX)

> ID：10206803
> 
> 赞同：0
> 
> 时间：2012-04-18T09:42:43.020
> 
> 标签：actionscript-3, flash, apache-flex, filter, pixel-bender

我想知道是否有一种方法可以一次将更多像素弯曲器应用于 flex 中的图像。

例如，我有一类像素弯曲过滤器，它返回一个数组，所以我可以通过这种方式应用效果：

```
var class1:FilterClass1 = new FilterClass1();
bitmap.filters = class1.filter(parameters); 
```

它就像一个魅力，但有没有办法一次将更多过滤器应用于该位图？如果我调用另一个类并以相同的方式应用于位图

```
var class2:FilterClass2 = new FilterClass2();
bitmap.filters = class2.filter(parameters); 
```

它删除第一个过滤器并应用第二个过滤器。

希望一切都清楚:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:10:19.590

Have you tried joining your two arrays together and assigning them to filters... Something like:

```
bitmap.filters = class1.filter(parameters).concat(class2.filter(parameters)); 
```

# jquery - jQuery blockUI 自动重定向

> ID：10206804
> 
> 赞同：3
> 
> 时间：2012-04-18T09:42:47.913
> 
> 标签：jquery, blockui

我正在使用 blockUI，它的工作非常好。

我似乎也无法做到的唯一一件事是在 x 秒后重定向到另一个 URL。我可以让它重定向，但它没有考虑到 setTimeout ...

有没有人能够做到这一点？

```
<script type="text/javascript">
    $(document).ready(function() { 
        $('#demo2').click(function() { 
            $.blockUI({ css: { 
                border: 'none', 
                padding: '15px',
                color: '#fff',
                backgroundColor: '#54bdd9', 
                '-webkit-border-radius': '10px', 
                '-moz-border-radius': '10px', 
                opacity: 1.5, 
                color: '#fff' 
            } }); 

            setTimeout($.unblockUI, 6000),$(window.location).attr('href', 'http://www.mydomain.co.uk');

        }); 
    }); 
</script> 
```

如果有人能阐明任何观点，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T23:16:19.947

这已经有一段时间了，但我只是去找这个。经过试验，BlockUI 似乎并没有阻止窗口导航，因此您甚至不必取消阻止它。只是延迟和导航。

```
$('#demo2').click(function () {
  $.blockUI({
    css: {
      border: 'none',
      padding: '15px',
      color: '#fff',
      backgroundColor: '#54bdd9',
      '-webkit-border-radius': '10px',
      '-moz-border-radius': '10px',
      opacity: 1.5,
      color: '#fff'
    }
  });

  setTimeout(function() { window.location.href = "http://www.google.com/"; }, 6000);
}); 
```

（关于如何设置窗口位置，众说纷纭，此处不作讨论，`window.location.href`我就是这么干的。）

# java - 移位的 Java 日期是过去的

> ID：10206808
> 
> 赞同：0
> 
> 时间：2012-04-18T09:42:51.287
> 
> 标签：java, date, time, shift

我有一个我无法理解的问题 - 如果我添加超过 24 天，则过去的转移日期。

```
long start = System.currentTimeMillis();
long shift = 3600000 * 24 * 24;
System.out.println(new Date(start));
System.out.println(new Date(start + shift)); 
```

对于 24 天轮班：

```
start - Wed Apr 18 11:37:12 CEST 2012
end - Sat May 12 11:37:12 CEST 2012 
```

25天班：

```
start - Wed Apr 18 11:37:55 CEST 2012
end - Sat Mar 24 17:35:08 CET 2012 
```

有人可以告诉我为什么它会这样吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:48:35.870

您正在执行整数乘法，然后将结果转换为长整数。乘法溢出，所以结果为负。

使用以下代码进行长乘法：

```
long shift = 3600000L * 24 * 24; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:54:59.817

我真的建议不要以这种方式解决您的问题；改用 java.util.Calendar。它更有可能应对诸如夏令时更改之类的极端情况，而且 API 更好。

```
Calendar cal = Calendar.getInstance();
cal.setTime(new Date(start));
cal.add(Calendar.DAY_OF_MONTH, 24)
Date shifted = cal.getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:55:58.713

也许你应该只使用 java.util.Calendar 如下：

```
Calendar c = GregorianCalendar.getInstance(); //time default to now
c.add(Calendar.DATE, 24); //adds 24 days
Date end = c.getTime(); 
```

# java - 在 AddListener 中添加一个新的监听器

> ID：10206816
> 
> 赞同：0
> 
> 时间：2012-04-18T09:43:21.110
> 
> 标签：java, swt, listener, zest

我正在使用可视化工具包 Zest 创建一个图表。我首先创建一个图表，然后添加一个节点。我想向该节点添加鼠标双击事件。我尝试了以下代码，但它不起作用。是不是因为验证e.button == 3？

```
[...]
Graph graph = new Graph(parent, SWT.BORDER);

graph.addListener(SWT.MouseDown, new Listener() {
    public void handleEvent(Event e) {
        if (e.button == 3) {

            Menu menu = new Menu(parent);
            final MenuItem a1 = new MenuItem(menu, SWT.None);
            a1.setText("New Node");
            a1.addSelectionListener(new SelectionListener() {
                                @Override
                public void widgetSelected(SelectionEvent e) {
                                  GraphNode graphNode = new GraphNode(graph, SWT.NONE);
                                  graphNode.addListener(SWT.MouseDoubleClick, new Listener
                                         (
                                           @Override
                       public void handleEvent(Event event) {
                                               System.out.println("node created");});

                @Override
                public void widgetDefaultSelected(SelectionEvent e) {}
                    }
           }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:13:25.410

尝试使用`MouseAdapter`而不是 untyped `Listener`。并覆盖它的`mouseDoubleClick(MouseEvent e)`方法。

更新。怎么样

```
graph.addMouseListener(new MouseListener(){

     @Override
     public void mouseDoubleClick(MouseEvent arg0)
     {
          // TODO Auto-generated method stub
     }
     ...
} 
```

# javascript - jquery timeout-function 从不调用 mouseenter mouseleave

> ID：10206821
> 
> 赞同：0
> 
> 时间：2012-04-18T09:43:32.910
> 
> 标签：javascript, jquery

我对 setTimeout 函数有一点问题。

**$(this)**是具有特定类的每个 DOM 元素。

当鼠标进入一个元素，然后离开它，就没有问题了。但是当鼠标将一个元素直接离开另一个元素（在 500 毫秒超时内）时，第一个元素（即鼠标离开的那个元素）永远不会淡出。

因此，新的 mouseenter-Event 类型会阻止 timeOut 调用该函数。没有 setTimeout-wrapper 一切正常。

这是我的代码：

```
$(this).hover(methods['mouseenterManager'], methods['mouseleaveManager']);

/**
 * manage mouseenter events
 */
mouseenterManager: function() {

    clearTimeout(timer);

    //create toolbar, if no toolbar is in dom
    if ($(this).data("layouter").toolbar == undefined) {

        //get bottom center of this element
        pos_left = ($(this).width() / 2) + $(this).offset().left;
        pos_top = $(this).height() + $(this).offset().top;

        //create toolbar element
        toolbar = $('<div style="display:none; left:' + parseInt(pos_left) + 'px; top:' + parseInt(pos_top) + 'px;" class="layouter_bar"><ul><li><a class="edit" href="javascript:;">Edit</a></li><li><a class="copy" href="javascript:;">Edit</a></li><li><a class="remove" href="javascript:;">Edit</a></li></ul></div>');

        //bind this element to toolbar
        toolbar.data("layouter", {
            parent: $(this),
        });

        //bind toolbar to this element
        data = $(this).data("layouter");
        data.toolbar = toolbar;
        $(this).data("layouter", data);

        //bind this element to toolbar
        data = toolbar.data("layouter");
        data.parent = $(this);
        toolbar.data("layouter", data);

        element = $(this);
        toolbar.mouseleave(function() {

            toolbar = $(this);
            timer = setTimeout(function() {
                if (!toolbar.is(":hover") && !element.is(":hover")) {

                    toolbar.fadeOut("fast", function() {
                        $(this).remove();
                    });

                    data = element.data("layouter");
                    data.toolbar = undefined;
                    element.data("layouter", data);
                }
            }, 500);
        });

        //display the toolbar  
        $("body").append(toolbar);
        toolbar.fadeIn("fast");
    }
},

/**
 * manage mouseleave events
 */
mouseleaveManager: function() {

    toolbar = $(this).data("layouter").toolbar;
    element = $(this);
    if (toolbar != undefined) {
        timer = setTimeout(function() {
            if (!toolbar.is(":hover")) {

                toolbar.fadeOut("fast", function() {
                    $(this).remove();
                });

                data = element.data("layouter");
                data.toolbar = undefined;
                element.data("layouter", data);
            }
        }, 500);
    }
},

};​ 
```

有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:48:56.363

将要编辑的元素传递给计时器的功能。

例如：

```
timer = setTimeout(function(toolbar, element) {
        if (!toolbar.is(":hover")) {

            toolbar.fadeOut("fast", function() {
                toolbar.remove();
            });

            data = element.data("layouter");
            data.toolbar = undefined;
            element.data("layouter", data);
        }
    }, 500) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:51:55.480

在我看来，您使用了很多全局变量，当您进入另一个元素时，所有这些全局变量的值都会改变。您的超时函数正在引用这些全局变量，因此当它们通过输入另一个元素进行更改时它无法正常工作。

在我看来，一旦您输入另一个元素，您就会清除计时器以防止它运行，并且由于它是一个全局计时器，因此只有一个，因此您已经杀死了您想要触发的计时器。

对于全局变量问题，将`var`所有应该是本地的变量放在前面，如下所示：

```
var toolbar = $(this).data("layouter").toolbar;
var element = $(this); 
```

和

```
//get bottom center of this element
var pos_left = ($(this).width() / 2) + $(this).offset().left;
var pos_top = $(this).height() + $(this).offset().top; 
```

对于计时器问题，在我看来，您不需要一个全局计时器，而是每个元素都需要一个计时器。这有点复杂。如果没有我可以运行和测试的东西，我无法确定这是否可以在没有任何其他更改的情况下工作，但这是朝着正确方向迈出的一步，将变量修复为本地变量，并使每个元素的计时器成为本地的：

```
$(this).hover(methods['mouseenterManager'], methods['mouseleaveManager']);

/**
 * manage mouseenter events
 */
mouseenterManager: function() {

    var self = $(this);
    var timer = self.data("timer");
    if (timer) {
        clearTimeout(timer);
    }

    //create toolbar, if no toolbar is in dom
    if (self.data("layouter").toolbar == undefined) {

        //get bottom center of this element
        var pos_left = ($(this).width() / 2) + $(this).offset().left;
        var pos_top = $(this).height() + $(this).offset().top;

        //create toolbar element
        var toolbar = $('<div style="display:none; left:' + parseInt(pos_left) + 'px; top:' + parseInt(pos_top) + 'px;" class="layouter_bar"><ul><li><a class="edit" href="javascript:;">Edit</a></li><li><a class="copy" href="javascript:;">Edit</a></li><li><a class="remove" href="javascript:;">Edit</a></li></ul></div>');

        //bind this element to toolbar
        toolbar.data("layouter", {
            parent: self,
        });

        //bind toolbar to this element
        var data = self.data("layouter");
        data.toolbar = toolbar;
        self.data("layouter", data);

        //bind this element to toolbar
        data = toolbar.data("layouter");
        data.parent = self;
        toolbar.data("layouter", data);

        var element = self;
        toolbar.mouseleave(function() {

            toolbar = self;
            timer = setTimeout(function() {
                self.data("timer", null);
                if (!toolbar.is(":hover") && !element.is(":hover")) {

                    toolbar.fadeOut("fast", function() {
                        $(this).remove();
                    });

                    data = element.data("layouter");
                    data.toolbar = undefined;
                    element.data("layouter", data);
                }
            }, 500);
            self.data("timer", timer);
        });

        //display the toolbar  
        $("body").append(toolbar);
        toolbar.fadeIn("fast");
    }
},

/**
 * manage mouseleave events
 */
mouseleaveManager: function() {

    var toolbar = $(this).data("layouter").toolbar;
    var element = $(this);
    var timer = element.data("timer");
    if (toolbar != undefined && !timer) {
        timer = setTimeout(function() {
            element.data("timer", null);
            if (!toolbar.is(":hover")) {

                toolbar.fadeOut("fast", function() {
                    $(this).remove();
                });

                var data = element.data("layouter");
                data.toolbar = undefined;
                element.data("layouter", data);
            }
        }, 500);
        element.data("timer", timer);
    }
},

};​ 
```

# php - URL 中的非法字符

> ID：10206824
> 
> 赞同：0
> 
> 时间：2012-04-18T09:43:36.663
> 
> 标签：php, wordpress

我有一些旧的永久链接（帖子、页面、标签），其中包含现在非法的字符——这些不再起作用了。

在以前的 WP 版本中，允许使用非拉丁字符，但在较新的版本中有所改变。

有没有办法从这些永久链接中清除数据库（将它们转换为允许的格式）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:15:44.490

`sanitize_title( $title);`您可以在所有帖子中使用 wordpress 功能

```
$posts = get_posts(array('post_type' => array('post', 'page'))
foreach($posts as $post)
{

 $post[post_name] = sanitize_title( $title);

  wp_update_post( $post );

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:59:38.563

如果你知道字符是什么，以及你想用什么替换它们，你可以编写一个简单的 PHP 脚本来从数据库中获取数据，然后使用`preg_replace()`在 PHP 端修复字符，然后用修复更新表. 这是我想出的一个快速示例：

```
$query = "SELECT field, primarykey FROM table WHERE field LIKE "(weird character)";
/* run the query, blah blah */
$result = mysql_query($query);
$weird_character = "/weird character/";
$good_character = "good character";
$replace = "UPDATE table SET field='$field' WHERE field='$row['field']'";
while($row=mysql_fetch_array($result, MYSQL_ASSOC))
{
$field = preg_replace($bad_character, $good_character, $row['field']);
$replace_result = mysql_query($replace);
} 
```

如果你有大量的链接，这将需要很长时间。如果它的数量很少，这应该足够有效，无论如何你只会运行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:53:56.137

当然，如果您需要修改 url，也可以使用标准的 wordpress 函数 esc_url_raw。此功能可以消除无效字符，删除危险字符，并验证 url 是否具有正确的协议集（http、https、ftp 等）：

```
esc_url_raw( $current_url ); 
```

# apache-flex - 如何在 android 平板电脑上安装 air 应用程序？

> ID：10206825
> 
> 赞同：0
> 
> 时间：2012-04-18T09:43:41.837
> 
> 标签：apache-flex, air, flex3, android

如何在 Android 平板电脑上安装 Air 桌面应用程序？我正在尝试通过徽章安装程序安装应用程序。单击徽章“立即安装”按钮后，它什么也不做。

Android 平板 android 版本：4.0.3 Air 版本：3.2 Flex SDK：3.6

那么有没有其他方法来安装空气应用程序？请指导，任何网络链接或样本将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:26:05.333

您需要创建一个移动 flex 项目才能在 android 上安装 Flex 应用程序...

移动项目具有针对移动设备优化的皮肤/组件，但您仍然可以使用普通的，添加您需要的 swc...

创建移动项目后，您可以选择应用程序所需的目标：

Android / iOS / BlackBerry 然后当您导出发布版本时，您可以：

*   直接以移动格式导出（.apk for android），并自动安装在任何插入计算机的设备上
*   在桌面安装程序 (.air) 中导出项目

查看 application.xml 以获取更多安装选项...

# ninject - Ninject 拦截 - 移植到 Ninject 3.0 时的重大更改

> ID：10206827
> 
> 赞同：5
> 
> 时间：2012-04-18T09:43:47.840
> 
> 标签：ninject, aop, interceptor, ninject-extensions, ninject-interception

我将描述我的环境：我有 Ninject + Ninject Interception Extension 用于为所有方法启用拦截器的自动注册，并标有特殊属性。是常见的 AoP + 属性 + DI 容器场景。

我的问题是：当移植到最新版本的 Ninject 和 Ninject Interception Extension - 3.0 时，当我的拦截器应该运行时，我开始遇到异常。在解析属性类型和注册拦截器时，我的 InterceptorRegistrationStrategy 工作正常。但是运行被拦截的方法会导致以下异常：

```
System.ArgumentException : Interface not found.
at System.RuntimeTypeHandle.VerifyInterfaceIsImplemented(RuntimeTypeHandle handle, RuntimeTypeHandle interfaceHandle)
at System.RuntimeType.GetInterfaceMap(Type ifaceType)
at Ninject.Extensions.Interception.Advice.Advice.MatchesMethod(IProxyRequest request)
at System.Linq.Enumerable.WhereListIterator`1.MoveNext()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList(IEnumerable`1 source)
at Ninject.Extensions.Interception.Registry.AdviceRegistry.GetInterceptorsForRequest(IProxyRequest request)
at Ninject.Extensions.Interception.Registry.AdviceRegistry.GetInterceptors(IProxyRequest request)
at Ninject.Extensions.Interception.Wrapper.StandardWrapper.CreateInvocation(IProxyRequest request)
at Ninject.Extensions.Interception.Wrapper.DynamicProxyWrapper.Intercept(IInvocation castleInvocation)
at Castle.DynamicProxy.AbstractInvocation.Proceed()
at Infrastructure.Tests.Persistance.Conversations.NinjectConversationInterceptorBehavior.ShouldCreateInterceptorOnImplicitConversation() in NinjectConversationInterceptorBehavior.cs: line 74 
```

我不得不求助于 Reflector 并使用 Ninject Interception Extension 源来解决这个问题，再加上没有足够的文档，这让我处于不利的境地。

移植到 Ninject 3.0 时有人遇到同样的异常吗？

这是我用来根据属性自动注册拦截器的代码：

```
public class NinjectConversationInterceptorRegistrationStrategy : InterceptorRegistrationStrategy
{
    public NinjectConversationInterceptorRegistrationStrategy(IAdviceFactory adviceFactory,
                                                              IAdviceRegistry adviceRegistry)
        : base(adviceFactory, adviceRegistry)
    {
    }

    public override void Execute(IPlan plan)
    {
        var pcAttribute = plan.Type.GetOneAttribute<PersistenceConversationalAttribute>();

        if (pcAttribute != null)
        {
            if (pcAttribute.MethodsIncludeMode == MethodsIncludeMode.Implicit)
            {
                foreach (var mi in GetCandidateMethods(plan.Type))
                {
                    RegisterMethodInterceptors(plan.Type, mi);
                    if (!plan.Has<ProxyDirective>())
                    {
                        plan.Add(new ProxyDirective());
                    }
                }
            }
            else
            {
                foreach (
                    var mi in
                        GetCandidateMethods(plan.Type).Where(
                            mi => mi.HasAttribute<PersistenceConversationAttribute>()))
                {
                    if (!mi.IsVirtual)
                    {
                        throw new InvalidOperationException(
                            string.Format("[PersistentCoversation] attribute used on non-virtual method {0}.{1}",
                                          mi.DeclaringType.Name,
                                          mi.Name));
                    }
                    RegisterMethodInterceptors(plan.Type, mi);
                    if (!plan.Has<ProxyDirective>())
                    {
                        plan.Add(new ProxyDirective());
                    }
                }
            }
        }
    }

    protected virtual void RegisterMethodInterceptors(Type type, MethodInfo method)
    {
        IAdvice advice = this.AdviceFactory.Create(method);
        advice.Callback = GetIntercepor;
        this.AdviceRegistry.Register(advice);
    }

    protected virtual IInterceptor GetIntercepor(IProxyRequest arg)
    {
        var interceptor = new NinjectConversationLazyInterceptor(arg.Kernel);
        return interceptor;
    }

    protected override bool ShouldIntercept(MethodInfo methodInfo)
    {
        if (IsPropertySetter(methodInfo))
        {
            return false;
        }
        var ret = base.ShouldIntercept(methodInfo);
        return ret;
    }

    private static bool IsPropertySetter(MethodBase methodInfo)
    {
        return methodInfo.IsSpecialName && methodInfo.Name.StartsWith("set_");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:38:32.713

拦截的行为发生了变化：当注入接口而不是类代理时，扩展将创建一个接口代理，因为这样的优点是方法不再需要是虚拟的。要么你必须把它放到接口中，从拦截中排除方法（拦截一个无论如何都不能调用的方法是没有用的）或者注入一个类而不是一个接口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:29:13.820

问题移至项目的 git 中心：[问题](https://github.com/ninject/ninject.extensions.interception/issues/9)

# java - 克隆 JButton[][] 矩阵

> ID：10206832
> 
> 赞同：0
> 
> 时间：2012-04-18T09:44:02.537
> 
> 标签：java, arrays, swing, user-interface, jbutton

我正在尝试克隆一个 JButton[][]

例如，

```
JButton[][] Matrix = new JButton[8][8];

someFunction(Matrix);

void someFunction(JButton[][] Matrix)
{
  JButton[][] temp = Matrix.clone();
} 
```

当想要克隆矩阵以便我的函数可以在不更改我的 GUI 进行测试的情况下操作矩阵时。我对 JButtons 进行 hashValue 并且它们没有给出相同的值，这意味着它们应该被正确克隆并且它不仅仅是一个参考？

谢谢，

# c++ - 嵌入python并多次运行

> ID：10206833
> 
> 赞同：3
> 
> 时间：2012-04-18T09:44:14.517
> 
> 标签：c++, python, boost-python

我正在使用 boost::python 嵌入python，这就是我的做法：

```
void runCode(){
    Py_Initialize();
    //boost::python code goes here and embedded python code runs
    Py_Finalize();
} 
```

它第一次运行得很好，但是当它再次运行时，我收到了这个错误：

> LookupError：未知编码：utf8

并且代码没有按预期运行，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:33:05.447

由于您没有得到专家的答案，因此我提供了从解决类似问题中学到的知识。[Python 在重新初始化支持](http://docs.python.org/release/1.5.2/api/initialization.html)方面存在问题。如果您由于某些错误需要重新启动解释器，或者想要运行许多独立的解释器，这很不幸。

一个问题是资源和内存泄漏（引用上面的链接）：

> 错误和警告：由 Python 加载的动态加载的扩展模块不会被卸载。Python解释器分配的少量内存可能无法释放（如果发现泄漏，请报告）。对象之间的循环引用中占用的内存不会被释放。扩展模块分配的一些内存可能不会被释放。如果多次调用它们的初始化例程，某些扩展可能无法正常工作；如果应用程序多次调用 Py_Initialize() 和 Py_Finalize()，就会发生这种情况。

另一个问题是许多模块不能正确支持这一点，例如[在这个 SO thread 中](https://stackoverflow.com/questions/7754577/how-to-reinitialise-an-embedded-python-interpreter)可以看到。**我认为这是您面临的问题。**

似乎大多数 Python 应用程序都解决了这个问题：

*   通过让引擎在专用进程中运行；
*   通过使用代表不同执行状态的[子解释器（通用解释器的）](http://docs.python.org/c-api/init.html#sub-interpreter-support)

如果第二个对您有用，请继续。

# c - 使用 cvVideoWriter 时，OpenCV 2.3.1 highgui 在退出时崩溃

> ID：10206837
> 
> 赞同：1
> 
> 时间：2012-04-18T09:44:35.307
> 
> 标签：c, opencv, crash, exit

最近，我在 Stackoverflow 上被推荐升级到 OpenCV 2.3.1，以改善结果`cvVideoWriter`（视频的最后一帧既没有读/写），而且确实使用 v.2.3.1 阅读是可以的，但写作仍然是排序的一个问题。尽管如此，我还是解决了这个问题，但无法解决另一个问题：我的程序在使用 VideoWriter 函数时总是会崩溃。我检查了原因，结果是新版本的 highgui (2.3.1)，因为如果我使用 highgui210 而不是发生崩溃（当然是最后一帧问题）。有谁知道这个问题以及如何解决它？顺便说一句，我不知道这是否重要：我已按照下一页上的说明在我的系统上安装 OpenCV 2.3.1（我使用的是 VS 9 Express）：

[http://www.arunkumarr.co.in/site/index.php/articles/10-configuring-opencv-23-in-visual-studio-2008](http://www.arunkumarr.co.in/site/index.php/articles/10-configuring-opencv-23-in-visual-studio-2008)

干杯斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:06:27.710

您的代码不是我要求的最小示例。它不完整，非常糟糕，无法编译，因此无法判断它有什么问题。

它在最新的 OpenCV 版本中崩溃的事实并不一定意味着 OpenCV 存在问题：可能是他们最终在一个在以前版本中几乎没有做任何事情的函数中做了一个体面的实现。

您采取的最合适的行动方案是：**编写一个执行您感兴趣的核心任务的最小应用程序，**通过阅读您的代码，它似乎是：

*   **从相机读取帧；**

*   **打开视频写入器，将相机中的帧记录到磁盘中；**

就这2个任务，就这么简单！忘记所有其他的东西，`CreateAvi()`, `CloseAvi()`,`remove()`和其他不属于 OpenCV 的函数。

这个简单的应用程序将证明 OpenCV 可以工作，并且您看到的问题可能是由从这个简单的应用程序中删除的代码中存在的其他东西引起的。

这个问题不在 OpenCV 中，它来自您编写的代码。

**编辑**：

你好德国人，我不觉得你的问题受到攻击，我也开发 OpenCV。现在，下面的应用程序完成了您从一开始就应该做的事情。**这是一个使用 OpenCV 读取视频文件，在窗口上显示帧，然后将帧写入磁盘上的新文件的最小示例**。它很简单，很有效，它演示了我一直试图告诉您的内容：您观察到的问题不是由 OpenCV 2.3.1 中的错误引起的。享受：

```
#include <cv.h>
#include <highgui.h>

int main()
{   
    CvCapture* capture = cvCreateFileCapture("green_lantern_sample.avi");
    if (!capture)
    {
        printf("!!! cvCreateFileCapture failed\n");
        return -1; 
    }

    int frame_count = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_COUNT);
    int fps = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
    int video_w = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
    int video_h = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);
    printf("* %d x %d\n", video_w, video_h);

    CvVideoWriter* writer = cvCreateVideoWriter("out.avi", 
                                                CV_FOURCC('X','V','I','D'), 
                                                fps, 
                                                cvSize(video_w, video_h), 
                                                1);
    if (!writer)
    {
        printf("!!! cvCreateVideoWriter failed\n");
        return -1; 
    }

    cvNamedWindow("video");
    IplImage* frame = NULL;
    while (true)
    {        
        frame = cvQueryFrame(capture);
        if(!frame)
            break;

        cvWriteFrame(writer,frame);                 

        cvShowImage("video", frame);
        cvWaitKey(1);        
    }

    cvReleaseVideoWriter(&writer);
    cvReleaseCapture(&capture);
    cvDestroyWindow("video");

    return 0;
} 
```

使用 OpenCV 2.3.1 测试：VS 9 Express（Windows XP 32 位）和 Fedora Linux（也是 32 位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:51:31.503

目前可用的最新OpenCV是2.4 beta 2。请尝试一下，看看问题是否仍然存在。

但问题也可能是由错误的配置引起的 - 检查所有路径（ENV 变量、Visual Studio 配置、bin 文件、lib 文件和包含目录是否指向正确的 OpenCV 版本）

# sql - 从所选日期开始的可用时间

> ID：10206838
> 
> 赞同：1
> 
> 时间：2012-04-18T09:44:44.340
> 
> 标签：sql, vb.net

我正在创建一个预订系统，我已经完成了所有工作，以便用户可以选择日期和时间并进行预订，没有任何限制，因此 100 人可以预订相同的日期和时间。

我的讲师向我建议，为了让一天只有一个人可以预订一次，用户将选择一个日期，然后页面将重新加载，时间选择器仅显示该日期可用的时间。

我已经完成了一些与此类似的教程工作，但是更基本的一点是使用 except 操作显示可用插槽，例如 allavailableslots 除了预订插槽，但对日期没有限制，因此它只会显示所有尚未预订的时间句号。

我想我会使用 if 语句，但我不太确定，真的不知道从哪里开始......

如果有帮助，我的表格和字段如下

**应用程序**

*   预订ID
*   佩蒂德
*   青涩
*   日期
*   开始时间

**投币口**

*   开始时间

非常感谢任何帮助，如果您需要任何进一步的信息，请询问，否则任何我可以获得的进一步帮助的链接或关于我将如何去做的想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:57:06.510

您可以通过左外连接实现，并为那些没有 Bookingid 的从 s 选择所有开始时间

```
SELECT a.Bookingid,s.StartTime
FROM Slot s
LEFT OUTER JOIN App a ON s.StartTime = a.StartTime 
WHERE a.Bookingid= null And a.Date=DateTime.Now; 
```

# java - 如何阅读和理解一个怪物异常（例如这个）

> ID：10206843
> 
> 赞同：6
> 
> 时间：2012-04-18T09:44:57.723
> 
> 标签：java, spring, exception, grails, spring-security

我们目前面临的问题是在我们的应用程序的某个地方生成了一个巨大的异常。由于我们使用的是 Grails 和 Spring 框架，因此会在其中某个地方抛出异常。

似乎有一些无限循环，并且异常堆栈越来越长，每次再次抛出。我不知道我们的代码中是什么导致了这种情况，我认为这只是常见的错误配置或小错误之一，有时会使 Grails 严重失败。

我将尝试在此处概述异常的主要部分，但由于抛出的异常在日志中使用 2 GB，因此我只能显示部分。连vi都无法打开，好像一直扔到硬盘内存满了。

第一行

```
2012-04-17 23:52:34,325 [http-8080-9] 错误错误。GrailsExceptionResolver -
无法呈现错误视图：请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
[...]
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: org.springframework.web.util.NestedServletException: 请求处理失败；
嵌套异常是 org.codehaus.groovy.grails.exceptions.GrailsRuntimeException: javax.servlet.ServletException: Servlet 执行抛出异常

```

似乎重复的块：

```
在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
在 org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.apache.catalina.core.ApplicationDispatcher.invoke（ApplicationDispatcher.java:646）
在 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
在 org.apache.catalina.core.ApplicationDispatcher.doForward（ApplicationDispatcher.java:374）
在 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:298)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:264)
在 org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver.resolveException(GrailsExceptionResolver.java:120)
在 org.springframework.web.servlet.DispatcherServlet.processHandlerException（DispatcherServlet.java:987）
在 org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:319)
在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
在 org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.apache.catalina.core.ApplicationDispatcher.invoke（ApplicationDispatcher.java:646）
在 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
在 org.apache.catalina.core.ApplicationDispatcher.doForward（ApplicationDispatcher.java:374）
在 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:298)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:264)
在 org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver.resolveException(GrailsExceptionResolver.java:120)
在 org.springframework.web.servlet.DispatcherServlet.processHandlerException（DispatcherServlet.java:987）
在 org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:319)
在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
在 org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
在 org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
在 org.apache.catalina.core.ApplicationDispatcher.invoke（ApplicationDispatcher.java:646）
在 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
在 org.apache.catalina.core.ApplicationDispatcher.doForward（ApplicationDispatcher.java:374）
在 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:298)
在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:264)
在 org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver.resolveException(GrailsExceptionResolver.java:120)
在 org.springframework.web.servlet.DispatcherServlet.processHandlerException（DispatcherServlet.java:987）
在 org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:319)
在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
[...]

```

有什么线索吗？还是我应该再次检查错误视图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-02T19:30:58.837

我最近遇到了一个类似的问题。我们发生的事情（以及您可能发生的事情）是：

1.  过滤器中抛出异常
2.  这会导致 Grails 重定向到错误处理控制器，这很好，但是
3.  过滤器在**所有**控制器之前执行（除非另有说明），所以..
4.  有问题的过滤器再次执行并引发另一个异常.. GOTO 1。

您可以通过在各种过滤器中插入一致的异常来测试问题，并查看无限循环是否再次发生。

避免它的一种方法是[从所有 Filters 中排除您的错误处理控制器](http://grails.org/doc/2.2.1/guide/theWebLayer.html#applyingFilters)。由于在 grails 中处理错误的默认方式不会更改 uri，因此这可能仅在您`controller`用于指定应在何处应用过滤器时才有效（而不是`uri`）。这看起来像：

```
all(controller:'*', action:'*', controllerExclude: 'error') 
```

如果这对您的应用程序移动到静态错误处理页面可能不起作用。如果/当我发现有关此选项的更多信息时，将稍后更新。

[Grails 过滤器文档](http://grails.org/doc/2.2.1/guide/theWebLayer.html#applyingFilters)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T09:51:54.310

我可能会尝试使用 -Xss 减小堆栈大小，以便它更早地失败。

您可能会尝试的另一个想法是在带有异常断点的 IDE 中运行它以立即停止它并希望找到根本原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:17:13.283

这两天我解决了一个类似的问题。

使用过时的 API 与第三方通信。它返回了一些 Spring 无法理解的 JSON 数据，Spring 产生了大量的异常。更糟糕的是，Grails 中的自定义错误处理程序会尝试将异常捕获到电子邮件正文中，这会导致额外的 StackOverflow 错误并进入无限循环。结果是，几分钟之内，就生成了超过 20G 的日志，并吃掉了所有的硬盘空间。

升级旧API后，在异常消息转储块中添加try catch，现在可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T10:42:54.507

我会提供几个提示：

1.  堆栈值得拥有，但它通常是最重要的第一条消息。
2.  在寻找根本原因时，我会寻找属于我的课程。这些是我最能控制的。我在这条踪迹中看不到任何属于你的东西。
3.  将您看到的消息剪切并粘贴到 Google 中。我发现当出现问题时，我通常并不孤单，也不是第一个。当我为你的情况这样做时，我得到了这个：

[http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=3&dsMessageId=398648](http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=3&dsMessageId=398648)

你在什么操作系统和JVM上运行？32 位与 64 位在 Google 发现的问题中发挥了作用。

# migration - 用 Janrain 更改域名的后果

> ID：10206855
> 
> 赞同：1
> 
> 时间：2012-04-18T09:46:00.177
> 
> 标签：migration, single-sign-on, janrain

在一个网站上，我正在使用 Janrain 来允许用户登录/登录。由于更名，域名将更改为另一个。

后果会是什么？我的用户需要重新登录吗？他们是否需要再次授权该应用程序？有什么我需要告诉 Janrain 的吗？

如您所见，我对 Janrain 很陌生。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:31:27.620

在重新命名使用 Janrain Engage 的身份验证小部件的网站时，需要考虑几件事：

1.  SSL 证书
2.  自定义域设置（跨域接收者页面品牌）

如果您不使用上述任何一种（Pro/Enterprise 级别），那么它真的很容易和无缝。

先前已获得社交提供商授权的用户*应*不受影响，具体取决于您网站的框架。随时在我们的[自助论坛中发表讨论](https://support.janrain.com/forums)

# vhdl - VHDL：组件端口到实体端口，它怎么知道什么是什么？

> ID：10206857
> 
> 赞同：1
> 
> 时间：2012-04-18T09:46:09.643
> 
> 标签：vhdl, fpga

```
entity Adder4Bit is
Port ( A : in  STD_LOGIC_VECTOR (3 downto 0);
       B : in  STD_LOGIC_VECTOR (3 downto 0);
       S : out  STD_LOGIC_VECTOR (3 downto 0);
       COUT : out  STD_LOGIC);
end Adder4Bit;

architecture structure of Adder4Bit is

component FullAdder -- add the fulladder to this architecture
port (
        A       : in std_logic;
        B       : in std_logic;
        CIN : in std_logic;
        SUM : out std_logic;
        COUT    : out std_logic
        );
end component;

signal wires : std_logic_vector(3 downto 1) := "000";       -- Make a signal "wires" with initial value 000

begin

adder0 : FullAdder port map ( A=> A(0), B => B(0), CIN => '0', SUM => S(0), COUT => wires(1)        );
adder1 : FullAdder port map ( A=> A(1), B => B(1), CIN => wires(1), SUM => S(1), COUT => wires(2)   );
adder2 : FullAdder port map ( A=> A(2), B => B(2), CIN => wires(2), SUM => S(2), COUT => wires(3)   );
adder3 : FullAdder port map ( A=> A(3), B => B(3), CIN => wires(3), SUM => S(3), COUT => COUT       );

end structure; 
```

在最底层的adder3中，程序怎么知道哪个cout属于实体Adder4Bit，哪个cout属于组件FullAdder呢？它与箭头的方向有什么关系吗？

非常感谢您提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:50:50.363

当然左边是组件内部的名字，右边是你的vhdl信号的名字。

它知道左边的 B 是 std_logic 而右边的 B 是 std_logic_vector 的方式相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:02:12.990

左侧是“引脚名称”，右侧是“电线名称” - 所以这两个：

```
adder2 : FullAdder port map ( A=> A(2), B => B(2), CIN => wires(2), SUM => S(2), COUT => wires(3)   );
adder3 : FullAdder port map ( A=> A(3), B => B(3), CIN => wires(3), SUM => S(3), COUT => COUT       ); 
```

`adder2`的`COUT`引脚连接到被调用的信号`wires(3)`，并且`adder3`的`COUT`引脚连接到被调用的信号`COUT`。

这是将引脚和信号命名为同一事物的问题之一 - 坚持下去，一周左右您甚至不会注意到考虑它！

# algorithm - 寻找正向算法的用途

> ID：10206862
> 
> 赞同：4
> 
> 时间：2012-04-18T09:46:21.177
> 
> 标签：algorithm, hidden-markov-models

我正在寻找 Rabiner 提出的前向算法的一些实际应用（[维基百科上](http://en.wikipedia.org/wiki/Forward%E2%80%93backward_algorithm)的前向算法）。

我更喜欢执行时间很重要的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:54:45.480

如果您指的是前向-后向算法，那是在用于训练 HMM 的[Baum-Welch 算法](http://en.wikipedia.org/wiki/Baum%E2%80%93Welch_algorithm)中应用的，该算法用于 NLP（词性标注、语音识别）和生物信息学等各个领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:36:13.637

实际上，前向算法不同于 Baum-Welch 中使用的前向-后向 (EM) 算法。前向算法用于确定在给定观察序列的状态下的概率。对于每个观察，您获取为前一个观察计算的状态的概率，然后使用转移概率表将其扩展一个步骤。前向算法基本上是一种有效的方法，因为它缓存了所有中间状态概率，因此它们只计算一次。（这是一种记忆或动态编程的形式......）

Baum-Welch 算法用于从数据中导出转移和发射概率，而前向算法（和 Viterbi 算法）使用该数据来计算状态概率和给定观察值的最可能状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T02:43:17.217

为了澄清几点，我不同意 Wikipedia 对 Forward 算法的描述（参见 Durbin）：

前向（以及单独的后向）用于在状态路径未知时计算一系列观察/发射的概率，此外，它比简单方法（很快以组合爆炸）。它们一起可以提供观测序列中每个位置的给定发射/观测的概率。正是根据这些信息计算出最可能的状态路径的版本（“后验解码”）。Viterbi 算法计算最可能状态路径的另一个版本。

**实际上，与计算给定序列相对于其他**状态路径的概率的麻烦相比，向前或向后的良好实现将为您节省大量时间。

您将看到这些应用在您想要将系统可能处于的状态与您可以测量的有关系统的可观察值分开的任何上下文中。最受雇（和复杂）的可能是财务问题。简单地说，假设您的状态路径由 [Bull, Bear] 中的元素组成，并且您在过去几个月中以与您所遇到的商业/地缘政治事件相关的分辨率对 VIX 或其他东西的状态路径进行了后解码试图捕捉。当您收到新的和更多的数据（通过 Baum-Welch 或更通用的 EM 算法）时，这种计算可用于训练您的模型，Forward 会告诉您何时获得数据（您的实时序列观察）相对于你的概率变得非常低 d 期望从您的模型中获得（到那时为止的训练）。从统计学上讲，那是您买入或卖出的时间。

# iphone - 如何在iphone中将十六进制值转换为blob

> ID：10206864
> 
> 赞同：2
> 
> 时间：2012-04-18T09:46:46.060
> 
> 标签：iphone

在我的应用程序中，我有一个十六进制类型的图像；我想转换为blob类型并保存到数据库；

怎么可能。

问候吉隆坡白酒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:36:37.410

据我所知，它是 base64 编码的，假设如果您从 Web 服务获取图像数据，则需要将接收到的字符串数据编码为 base64 编码。

```
NSData* data=[[NSData alloc] initWithBase64EncodedString:base64ImageString];
```

然后您可以轻松地将数据检索到 UIImageView 中，

```
UIImageView* imageView=[[UIImageView alloc] initWithImage:[UIImage imageWithData:data]];
```

并将图像数据作为 Blob 数据类型保存到 sqlite 中，使用以下代码片段

```
if(insertStmt == nil) {
   const char *sql = "insert into TableName values(?,?)";
    if(sqlite3_prepare_v2(database, sql, -1, &insertStmt, NULL) != SQLITE_OK)
       NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(database));
    }

sqlite3_bind_text(insertStmt, 1, [imageName UTF8String], -1, SQLITE_TRANSIENT);

NSData *imgData = UIImagePNGRepresentation(imageView.image);

int returnValue = -1;

returnValue = sqlite3_bind_blob(insertStmt, 2, [imgData bytes], [imgData length], NULL);

if(returnValue != SQLITE_OK)
   NSLog(@"Not OK!!!");

if(SQLITE_DONE != sqlite3_step(insertStmt))
   NSAssert1(0, @"Error while inserting. '%s'", sqlite3_errmsg(database));

sqlite3_reset(insertStmt);

[data release];
[imageView release]; 
```

从数据库中检索图像数据

```
if(detailStmt == nil) {
 const char *sql = "Select * from TableName";
  if(sqlite3_prepare_v2(database, sql, -1, &detailStmt, NULL) != SQLITE_OK)
    NSAssert1(0, @"Error while creating detail view statement. '%s'", sqlite3_errmsg(database));
 }

 if(SQLITE_DONE != sqlite3_step(detailStmt)) {
 NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(detailStmt, 2) length:sqlite3_column_bytes(detailStmt, 2)];

  if(data == nil)
     NSLog(@"No image found.");
  else
    imageview.image = [UIImage imageWithData:data];        
 } 
```

问候，
马尤尔

# google-maps-api-3 - 谷歌地图 API OVER_QUERY_LIMIT

> ID：10206872
> 
> 赞同：0
> 
> 时间：2012-04-18T09:47:23.190
> 
> 标签：google-maps-api-3

我正在使用 Google Maps API 从 asp.net 对位置进行地理编码 - 每天进行一些查询（远低于 2500 个限制）。这已经运行了一年，并且仍然可以在我的开发服务器上运行，但现在我不断收到返回“OVER_QUERY_LIMIT”的状态。

我假设，但无法确定，这是因为我主机的同一 IP 地址上的其他人正在做同样的事情并使用所有限制。

地理编码 API 似乎不允许我使用 API 密钥。如果我尝试添加 &key=xxx 我会收到 REQUEST_DENIED 错误。

我如何向谷歌表明自己是独立的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:23:34.663

您无法将自己与共同托管的竞争对手区分开来（例如，通过使用密钥）。其原因可能是因为人们会简单地使用不同的密钥来获得多个津贴。

唯一的解决方案是更改您的主机，或切换到客户端地理编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:13:58.823

谷歌还限制了每秒的请求数，这可能是导致错误的原因。尝试切换到[http://developer.yahoo.com/geo/placefinder/](http://developer.yahoo.com/geo/placefinder/)使用限制是每天 50,000 个请求

# android - 基于输入类型的用户友好键盘

> ID：10206885
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:48:18.973
> 
> 标签：android, mobile, types, input, keyboard

这是操作系统提供的功能，还是基于浏览器还是基于设备？

在 iphone 上，它会根据 url/number/email 等字段类型显示相应的键盘。

检查这个[http://www.456bereastreet.com/archive/201004/html5_input_types/](http://www.456bereastreet.com/archive/201004/html5_input_types/)

可以为安卓启用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:26:43.250

`keyboard support with input type`如果您想使用 webview 启用相应的键盘，我们可以使用以下链接进行检查。

[http://www.quirksmode.org/html5/inputs_mobile.html](http://www.quirksmode.org/html5/inputs_mobile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:14:50.960

您可以**`android:inputType`**在 layout.xml 中设置属性。比如下图：

```
<EditText
android:id="@+id/et"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
android:inputType="textEmailAddress" /> 
```

# php - 在不编写 PHP 代码的情况下显示许多 sql 查询的结果？

> ID：10206888
> 
> 赞同：0
> 
> 时间：2012-04-18T09:48:31.673
> 
> 标签：php, mysql

对不起，如果这个问题对你们来说听起来很愚蠢，但我是编程的新手，除了知道 SQL 之外，问题是我得到了一个 MYSQL 数据库，其中包含有关儿童疾病的各种信息和一个用 php 编写的 Web 界面来创建报告可以通过接口访问的数据库。报告中需要计算近 25 个不同的变量，我已经编写了 sql 查询来计算所有这些值，但我对 PHP 一无所知，如果我有所有这些查询对我来说没有办法结合所有这些 sql 查询以在网页上显示结果并在不编写 PHP 代码的情况下生成此报告？

谢谢你的

如果这太基本了，再次非常抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:19:03.807

正如 mr_jp 所建议的那样，phpmysqladmin 提供了一个简单的前端来运行查询，还可以更改数据和修改架构。尽管您可以将命名用户限制为只有 SELECT 权限，但他们仍然需要了解 SQL 才能运行查询。

构建前端以获取一组参数，将它们替换为 SELECT 语句并将输出发送到格式化表并不难。有很多 datagrid 工具（例如 phplens、phpgrid，有一个 google for 'mysql datagrid' 更多）可以处理 MySQL 结果集的格式（或者只是将其下载为 CSV - 您的浏览器应该能够将数据传输到您的电子表格程序自动）。

有几个 PHP 报告生成器——但我最后一次深入研究这个时，并没有给我留下太深刻的印象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:01:13.310

您的网络主机可能已经安装了[phpmyadmin](http://www.phpmyadmin.net/home_page/index.php)。尝试从网络主机获取访问权限。

您可以在此处输入查询并将结果导出为 html、csv、excel 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:02:45.547

你可以写 Python。或者红宝石。或者你知道的东西。;-) 但是你需要一些东西来输出你的查询数据。

如果您只想自己检查结果而不需要直接发布，您可以使用一些 MySQL 查询浏览器或管理员，如[phpMyAdmin](http://www.phpmyadmin.net/)或[MySQL Workbench](http://www.mysql.com/products/workbench/)。这些工具允许您查询数据库，但仅将返回的数据显示为原始表。如果您需要一些样式或自己的布局，则必须使用自己的应用程序或手动编辑导出的数据（例如，使用 CSV 导出并使用 Excel 或 Calc 等电子表格应用程序重新打开它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:03:48.690

PHP + MySQL 的组合是一种非常流行的组合，强烈建议您一起使用它们。

为了使用 PHP 显示该信息，您需要编写的代码非常简单且不难。如果您确实了解一些基本的编程概念，则可以在几个小时内学会这样做。PHP 以其极其易于学习的曲线而闻名。网上有成千上万的代码示例，您可以查看这些示例以了解这是如何完成的。

# ruby-on-rails - 在数据库文本中使用 rails 辅助方法

> ID：10206892
> 
> 赞同：0
> 
> 时间：2012-04-18T09:48:41.213
> 
> 标签：ruby-on-rails

使用 Rails 3.1.1

我正在创建一个通常由“文章”组成的旅行指南。在这些文章中，我写了每个地方。每篇文章大约 500 字长，在数据库中保存为 article.content 属性。

现在，我希望能够在这些文章中使用 Rails 辅助方法（即来自 application_helper）和“link_to”。我不能使用 <%= %> 只是因为 Rails 只会将其解释为文章中的文本。

我想要这样做的主要原因是使用智能内部链接（路由）和辅助方法。

进一步澄清：

**文章**是具有**内容**属性的模型。

```
a = Article.first
z = Article.last
a.content = "This is a long article where I want to place a smart link to z by using <%= link_to 'z article', article_path(z) %> and use my helper method largify so that I can <%= largify('this text') %> but I can't. What should I do?"
a.save 
```

有解决这个问题的聪明方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:02:57.350

```
<%= render inline: a.content, type: :erb %> 
```

但请注意不要从不受信任的来源填充您的数据库 - 有人可以使用它在它们之间放置恶意代码`<%= %>`。

# php - PHP脚本中的编码错误以生成XML

> ID：10206894
> 
> 赞同：2
> 
> 时间：2012-04-18T09:48:46.590
> 
> 标签：php, mysql, xml, encoding

我的 PHP 文件从 MySQL 数据库生成 XML 时遇到问题。代码如下

```
<?php
require("decibelone_dbinfo.php");

function parseToXML($htmlStr)
{
    $xmlStr=str_replace('<','&lt;',$htmlStr);
    $xmlStr=str_replace('>','&gt;',$xmlStr);
    $xmlStr=str_replace('"','&quot;',$xmlStr);
    $xmlStr=str_replace("'",'&#39;',$xmlStr);
    $xmlStr=str_replace("&",'&amp;',$xmlStr);
    return $xmlStr;
}

// Opens a connection to a MySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
    die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
    die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM location WHERE 1";
$result = mysql_query($query);
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
    // ADD TO XML DOCUMENT NODE
    echo '<marker>';
    echo '<name>' . parseToXML($row['name']) . '</name>';
    echo '<address>' . parseToXML($row['address']) . '</address>';
    echo '<latitude>' . $row['latitude'] . '</latitude>';
    echo '<longitude>' . $row['longitude'] . '</longitude>';
    echo '<description>' . $row['description'] . '</description>';
    echo '<time>' . $row['time'] . '</time>';
    echo '</marker>';
}

// End XML file
echo '</markers>';

?> 
```

我不确定问题是什么，但我已将所有字符编码（在 mysql 和 htaccess 下）更改为 UTF8。这个问题最近在我的主机维护服务器后浮出水面，我没有在它之前和之后更改我的文件，所以我怀疑这可能是我的代码本身的问题。谁能指出我正确的方向？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:03:15.740

您可以使用 DomDocument 类。我认为您使用的是旧方法。请看以下链接。

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

# qt - 如何在 Qt 中快速下载大文件

> ID：10206898
> 
> 赞同：4
> 
> 时间：2012-04-18T09:48:53.640
> 
> 标签：qt

如何在 Qt 中并行下载大文件。从而减少文件下载时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T11:36:20.953

假设您使用的是 QNetwork 并且下载是 HTTP GET，您将需要执行以下操作：

1.  使用 HEAD 请求获取文件大小 ( [`Content-Length`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13)) 并检查服务器是否支持 Range 请求 ( [`Accept-Ranges`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.5))
2.  在 GET 请求上[启用流水线](http://en.wikipedia.org/wiki/HTTP_pipelining)
3.  [`Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)根据内容的大小设置标题

通过设置[`HttpPipeliningAllowedAttribute`](http://en.wikipedia.org/wiki/HTTP_pipelining)属性对您的请求启用 HTTP 管道：

```
QNetworkRequest req(url);
req.setAttribute(QNetworkRequest::HttpPipeliningAllowedAttribute, true); 
```

设置范围标题：

```
req.setRawHeader("Range", "bytes=0-499"); 
```

# html - 从单个列表中模仿两个列表

> ID：10206901
> 
> 赞同：1
> 
> 时间：2012-04-18T09:49:03.173
> 
> 标签：html, css

我有一个无序列表：

```
<ul>
    <li class="title">title1</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
    <li class="title">title2</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
</ul> 
```

我想显示此列表，其中标题将位于列表顶部。类似于以下结果：

```
<ul style="float:left;">
    <li>title1</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
</ul>
<ul style="float:left;">
    <li>title2</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
</ul> 
```

问题是我无法更改原始 html，我只能使用 css 来完成。这样的事情可能吗？我该怎么做？

这是两个列表 - 原始样式和所需样式：http: [//jsfiddle.net/MNYnW/2/](http://jsfiddle.net/MNYnW/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:17:20.353

愿你能用css3`cloumn-count`属性实现。像这样写：

**CSS**

```
.list {
    -moz-column-count: 2;
    -moz-column-gap: 5px;
    -webkit-column-count: 2;
    -webkit-column-gap: 5px;
    column-count: 3;
    column-gap: 5px;
    width: 100px;
} 
```

**HTML**

```
<ul class="list">
    <li>title1</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
    <li>title2</li>
    <li>elem1</li>
    <li>elem2</li>
    <li>elem3</li>
</ul> 
```

检查这个[http://jsfiddle.net/MNYnW/16/](http://jsfiddle.net/MNYnW/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:06:24.333

如果您需要跨浏览器完全动态的解决方案，您可以通过下面的 jQuery 来完成：

```
$(function() {

    var previousList = $('#list').html().split(/title[0-9]+/);  
    var newList = '';   
    var i = 1;

    $('#list > li').each(function() {
        var self = $(this);
        var title = /title[0-9]+/.test(self.text());

        if(!(self.index() == 0)) {
            if(title) {
                newList += '</ul><ul style="float: left;"><li>' + self.html() + previousList[i].substring(0, previousList[i].length - 4);
                i++;
            }
        }

        else {
            if(title) {
                 newList += '<ul style="float: left;"><li>' + self.html() + previousList[i].substring(0, previousList[i].length - 4);
                 i++;           
            }
        }        

    }); 

    newList += '</ul>';

    $('body').html(newList);
}); 
```

# sharepoint - SharePoint - 数字字段是什么类型

> ID：10206902
> 
> 赞同：3
> 
> 时间：2012-04-18T09:49:11.503
> 
> 标签：sharepoint, spfield

我有一个字段，有`Type="Number"`. 我可以分配什么类型的变量？将现场支持`float`或`double`？

```
oListItem["numberField"] = data; 
```

可以是什么类型`data`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:13:58.713

由于 SharePoint 将输入值转换为字符串，因此所有字符串表示形式的值都可以解析为双精度值：

```
case SPFieldType.Number:
case SPFieldType.Currency:
  str1 = Convert.ToString(value, (IFormatProvider) CultureInfo.InvariantCulture);
  break; 
```

（来自*SPListItem.SetValue(...)*）

你应该对`string`, `int`,`double`等没问题。

# python - 如何将json字符串转换为字典并在键中保存顺序？

> ID：10206905
> 
> 赞同：8
> 
> 时间：2012-04-18T09:49:19.523
> 
> 标签：python, json

当我想将 json 字符串转换为 Python 字典时遇到问题。我有类似的字符串

```
 s={"name":{"Saban:Saulic"},"price":{"koncert:1000"} ....} 
```

当我写类似的东西时

```
tags=json.loads(s) 
```

我 gtet 字典，但键的顺序与字符串中的顺序不同（它不是名称，价格......）。如何将 json 字符串转换为字典并在键中保存顺序？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-18T10:07:08.610

从[Python 2.7](https://www.python.org/download/releases/2.7/)开始，您的[`OrderedDict`](https://docs.python.org/2/library/collections.html#ordereddict-objects)模块来自[`collections`](https://docs.python.org/2/library/collections.html)

这种字典保留了元素的插入顺序。

来自 Python 文档：

> `json.load(fp[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, **kw]]]]]]]])`
> 
> 将 fp（一个支持 .read() 且包含 JSON 文档的类文件对象）反序列化为 Python 对象。
> 
> 如果 fp 的内容使用 UTF-8 以外的基于 ASCII 的编码（例如 latin-1）进行编码，则必须指定适当的编码名称。不允许使用不基于 ASCII 的编码（例如 UCS-2），应使用 codecs.getreader(encoding)(fp) 进行包装，或者直接解码为 un​​icode 对象并传递给 load()。
> 
> object_hook 是一个可选函数，将使用任何对象文字解码的结果（字典）调用。将使用 object_hook 的返回值而不是 dict。此功能可用于实现自定义解码器（例如 JSON-RPC 类提示）。
> 
> object_pairs_hook 是一个可选函数，将调用使用有序对列表解码的任何对象文字的结果。将使用 object_pairs_hook 的返回值而不是 dict。此功能可用于实现依赖于键值对解码顺序的自定义解码器（例如，collections.OrderedDict() 将记住插入顺序）。如果还定义了 object_hook，则 object_pairs_hook 优先。

我认为你可以使用 object_pairs_hook 参数[`collections.OrderedDict()`](https://docs.python.org/2/library/collections.html#ordereddict-objects)

```
tags=json.loads(s, object_pairs_hook=collections.OrderedDict) 
```

# iphone - 如何创建 UITableView 分隔符好看？

> ID：10206909
> 
> 赞同：2
> 
> 时间：2012-04-18T09:49:29.100
> 
> 标签：iphone, objective-c, uitableview

基本的分隔符看起来很简单，而且是一维的，但是大多数表格视图都有很好看的分隔符，我觉得它看起来不错，因为它有阴影或使它看起来像 3D 的东西。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:00:32.977

您可以通过编程/XIB 创建您的表格。现在在您的代码或 XIB 集中：

```
yourTable.separatorStyle=UITableViewCellSeparatorStyleNone; 
```

现在在 tableview 委托方法中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {  
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:Identifier];
    if (cell == nil) 
    {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:businessLogicIdentifier]
                autorelease];

        customSeperator=[[UIView alloc]initWithFrame:CGRectMake(0, (cell.frame.origin.y), 320, 1)];
        customSeperator.backgroundColor=[UIColor lightGrayColor];

        [cell.contentView addSubview:customSeperator];  
} 
```

现在在线 (customSeperator.backgroundColor=[UIColor lightGrayColor];) 你也可以试试

```
[UIColor colorWithPatternImage:[UIImage imageNamed:@"myimage.png"]]; 
```

用于使用您自己的图像。希望对你有帮助

# ruby - 如何删除出现在特定符号之后的行上的所有文本？

> ID：10206910
> 
> 赞同：0
> 
> 时间：2012-04-18T09:49:38.180
> 
> 标签：ruby, perl, bash, sed, python-2.7

我有一个文件`file1.txt`，像这样：

```
This is some text.
This is some more text. ② This is a note.
This is yet some more text. 
```

我需要删除出现在“②”之后的任何文本，包括“②”和紧接其前出现的任何单个空格（如果存在这样的空格）。例如，上面的文件将变为`file2.txt`：

```
This is some text.
This is some more text.
This is yet some more text. 
```

如何删除“②”、后面的任何内容以及前面的任何单个空格？

*   [如何在 bash 中删除一个字符后的所有文本](https://stackoverflow.com/questions/4168371/how-can-i-remove-all-text-after-a-character-in-bash)？似乎不起作用，也许是因为“②”不是一个普通的字符。
*   该文件以 UTF-8 格式保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:12:36.777

Perl 解决方案：

```
$ perl -CS -i~ -p -E's/ ②.*//' file1.txt 
```

您最终会在 file1.txt 中获得正确的数据，并在 file1.txt~ 中备份原始文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:04:48.797

我希望您确实意识到大多数 unix 实用程序不适用于 unicode。我假设您的输入是 UTF-8，如果不是，您必须相应地进行调整。

```
#!/bin/bash
function px {
 local a="$@"
 local i=0
 while [ $i -lt ${#a}  ]
  do
   printf \\x${a:$i:2}
   i=$(($i+2))
  done
}
(iconv -f UTF8 -t UTF16 | od -x |  cut -b 9- | xargs -n 1) |
if read utf16header
then
 echo -e $utf16header
 out=''
 while read line
  do
   if [ "$line" == "000a" ]
    then
     out="$out $line"
     echo -e $out
     out=''
   else
    out="$out $line"
   fi
  done
 if [ "$out" != '' ] ; then
   echo -e $out
 fi
fi |
 (perl -pe 's/( 0020)* 2461 .*$/ 000a/;s/ *//g') |
 while read line
  do
    px $line
  done | (iconv -f UTF16 -t UTF8 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:55:43.687

尝试这个：

```
sed -e '/②/ s/[ ]*②.*$//' 
```

*   `/②/`仅查找包含魔术符号的行；
*   `[ ]*`对于魔术符号前的任意数量（不匹配）空格；
*   `.*$`其他一切，直到行尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:54:57.443

`sed -e "s/[[:space:]]②[^\.]*\.//"`

However, I am not sure that the ② symbol is parsed correctly. Maybe you have to use UTF8 codes or something like.

# java - encodeURI 等效不需要 URLEncoder.encode 等效于 encodeURIComponent()

> ID：10206914
> 
> 赞同：0
> 
> 时间：2012-04-18T09:50:03.937
> 
> 标签：java, urlencode

请让我知道`encodeURI()`Java 中的 JavaScript 等价物。

虽然我知道这相当于`encodeURIComponent()`.

```
result = URLEncoder.encode(component, "UTF-8")
    .replaceAll("\\%28", "(") 
    .replaceAll("\\%29", ")") 
    .replaceAll("\\+", "%20") 
    .replaceAll("\\%27", "'") 
    .replaceAll("\\%21", "!") 
    .replaceAll("\\%7E", "~");" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T18:38:34.320

你可以尝试这样的事情；

```
 public static String encodeURIComponent(String url) {
        try {
            return URLEncoder.encode(url, "UTF-8")
                .replaceAll("\\+", "%20")
                .replaceAll("\\%21", "!")
                .replaceAll("\\%27", "'")
                .replaceAll("\\%28", "(")
                .replaceAll("\\%29", ")")
                .replaceAll("\\%7E", "~");
            //the slow option:
            //new ScriptEngineManager().getEngineByName("JavaScript")...etc
        } catch (UnsupportedEncodingException e) {
            //never
        }
    }

    public static String encodeURI(String url) {
            return encodeURIComponent(url)
                .replaceAll("%3A", ":")
                .replaceAll("%2F", "/")
                .replaceAll("%3F", "?")
                .replaceAll("%3D", "=")
                .replaceAll("%26", "&");
    } 
```

需要做更多的工作来确保它支持嵌套和完整的规范。

# iphone - 将外部框架编译/捆绑到我的 iOS SDK 的静态库/框架中

> ID：10206915
> 
> 赞同：0
> 
> 时间：2012-04-18T09:50:07.493
> 
> 标签：iphone, frameworks

我正在尝试构建一个使用来自 3rd 方框架的方法的框架。我想隐藏我的框架的用户无法访问的方法 3rd 方框架。

我尝试使用静态库方法和框架方法进行编译..但第 3 方框架似乎没有包含在我的框架中..

任何人都知道如何在我的库文件中捆绑 3rd 方框架？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:56:51.287

在自制框架中包含静态库或其他框架是不可能的。用户需要在其项目中添加您的框架和静态库（第 3 方方法）才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:21:53.287

在静态库/自定义框架中具有依赖关系并没有错。只需通知用户，如果可能，将依赖的库捆绑到您的发行版中。

ObjectiveC 不允许使用命名空间，因此无法有效地“隐藏”静态库的方法。

# jquery - 用于删除所有元素的 jQuery 规则，如果其任何深度的任何子元素具有特定类

> ID：10206917
> 
> 赞同：0
> 
> 时间：2012-04-18T09:50:13.157
> 
> 标签：jquery

采用此 DOM 的最简单规则是什么：

```
<div>
    <ul>
        <li>  
            <div>
                <a href="#" class="remove">link</a>
            </div>
        </li>
        <li>  
            <div>
                <span class="ok"></span>
            </div>
        </li>
        <li>  
            <div class="remove"></div>
        </li>
    </ul>
</div> 
```

并删除所有元素，如果它们中的任何一个在包含类`<li>`的任何深度都有一个子元素。`"remove"`结果html如下所示：

```
<div>
    <ul>
        <li>  
            <div>
                <span class="ok"></span>
            </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:51:47.883

```
$('li:has(.remove)').remove(); 
```

[http://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

从文档：

> `<div>`如果 a存在于其后代中的任何位置，则表达式 $('div:has(p)') 匹配 a `<p>`，而不仅仅是直接子代。

[http://jsfiddle.net/WNcKE/1/](http://jsfiddle.net/WNcKE/1/)

# iphone - iphone项目中何时调用[UIWebView stopLoading]？

> ID：10206925
> 
> 赞同：3
> 
> 时间：2012-04-18T09:50:41.737
> 
> 标签：iphone

对于iphone项目中的UIWebView，对于方法[webView stopLoading]，它是如何工作的？它真的会停止所有加载相关的过程吗？考虑这个 UIWebView 正在加载清单的情况，它是如何处理的？

在 [viewController viewWillDisappear] 或 [viewController dealloc] 期间调用 [webView stopLoading] 的合适时间是什么时候？

任何想法或讨论将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:00:31.933

在我的项目中，我这样做：

```
- (void)viewWillDisappear
{
    if ([webView isLoading])
        [webView stopLoading];
}

- (void)dealloc
{
    [webView setDelegate:nil];
    [webView release];
    [super dealloc];
} 
```

# transactions - SOA如何实现高可用、服务升级和ACID事务？

> ID：10206928
> 
> 赞同：1
> 
> 时间：2012-04-18T09:50:51.737
> 
> 标签：transactions, upgrade, soa

以下 3 个最理想的架构特性是如何在 SOA 中实现的：

1.  高可用性
2.  在线服务升级
3.  ACID 事务

指向有关上述内容的任何 SOA 产品文档的指针都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:09:19.063

在考虑面向服务的架构时，我会与您争论哪些特性是最理想的，但无论如何:)

1.  高可用性通常通过同时运行多个服务实例来获得。如果一个或多个服务实例失败请求仍然可以由其他实例提供服务。

2.  在线服务升级可以通过升级单个服务实例来进行，同时请求由其他实例提供服务（见上文）。在某些情况下，这是不可能的。

3.  ACID 事务本质上很难在分布式事务中很好地实现。请参阅[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)以对此产生共鸣。

# zend-framework - Zend 默认路由不起作用

> ID：10206929
> 
> 赞同：1
> 
> 时间：2012-04-18T09:50:55.437
> 
> 标签：zend-framework, routing

我正在尝试向现有应用程序添加多语言功能。

我的网址如下所示：

无语言：www.example.com/controller/action/params 有语言：www.example.com/de/controller/action/params

如果 :lang 没有指定（上面例子中的'de'），它应该采用默认语言（在 ini 中设置）或者只使用 Zend_Translate 默认键。

以上两个 URL 都需要工作。

我现在的问题如下：我可以激活 :lang 工作的第一个 URL，但是默认的 URL 不起作用。为什么？

不知何故，默认路由和语言路由的链接无法正常工作。

我的代码是相同的（对于链接/路由的东西），如下所示：http: [//devzone.zend.com/1765/chaining-language-with-default-route/](http://devzone.zend.com/1765/chaining-language-with-default-route/)

我没有使用模块（积极地，当然启用了默认的东西），也许我的默认路由（与代码中的相同）是错误的？虽然它有效，但如果我禁用语言路由和链接。

# javascript - 将 iframe 的源代码保存为桌面上的图像

> ID：10206930
> 
> 赞同：0
> 
> 时间：2012-04-18T09:50:56.113
> 
> 标签：javascript, asp.net

我在网页中有一个 iframe，当单击提交按钮时，它的源被填充。我需要将 iframe 源保存为桌面上的图像。如何做到这一点。继承人的代码：

```
<iframe id="IFAEventPerformance" name="IFAEventPerformance" scrolling="auto" runat="server"
 width="100%" height="403" class=""></iframe> 
```

和cs文件：

```
protected void lnkBTNSubmit_Click(object sender, EventArgs e)
        {
this.IFrame1.Attributes.Add("src", "https:\\anotherwebsitename");
}

function for export to ppt is:
 protected void imgBTNExportPPT_Click(object sender, ImageClickEventArgs e)
        {            
            //WebsiteToImage websiteToImage = new WebsiteToImage("http://www.google.co.in", @"C:\Users\312220\Desktop\myscreenshot.jpg");
            //websiteToImage.Generate();
            WebsiteToImage websiteToImage = new WebsiteToImage("C:\\Users\\304485\\Desktop\\Login.htm",(@"D:\\my\\chocos\\sample.jpg"));
            websiteToImage.Generate();
            TextBox txtTextBoxRetailGroup = (TextBox)uscRetailParameters.FindControl("txtRetailCustomerGroup");
            TextBox txtTextBoxPPGroup = (TextBox)uscRetailParameters.FindControl("txtProductGroup");
            TextBox txtTextBoxEventID = (TextBox)uscEventParameters.FindControl("txtEventId");

            string RetailGrp;
            RetailGrp = txtTextBoxRetailGroup.Text;
            string PPGrp;
            PPGrp = txtTextBoxPPGroup.Text;
            string EventID;
            EventID = txtTextBoxEventID.Text;

            ShowPresentation();
            GC.Collect();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:59:03.000

在您的呼叫者页面上提供 iframe。加载 ppt 作为框架的 src/href。如果用户浏览器设置允许，则 ppt 将显示在框架中。

我相信这与.NET无关

# sql - 按检索 3 个值分组

> ID：10206934
> 
> 赞同：2
> 
> 时间：2012-04-18T09:51:13.767
> 
> 标签：sql, sql-server, group-by, sql-function

我有以下查询

```
SELECT  Cod ,
        MIN(Id) AS id_Min,
        MAX(Id) AS id_Max,
        -- retrieve value in the middle,
        COUNT(*) AS Tot

FROM    Table a ( NOLOCK )        
GROUP BY Cod
HAVING  COUNT(*)=3 
```

我如何检索最小值和最大值之间的值，就像我对最小值和最大值所做的那样？

例子

```
Cod      |  Id

Stack       10
Stack       15
Stack       11
Overflow    100
Overflow    120
Overflow    15 
```

所需输出

```
Cod         | Min   | Value_In_The_Middle  |    Max

Stack         10          11                    15
Overflow      15          100                   120 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:59:08.893

我还没有测试过这个，但我认为这会工作

```
SELECT  Cod ,
        MIN(Id) AS id__Min,
        MAX(Id) AS id_Max,
        SUM(ID)-MAX(Id)-MIN(Id) as id_Middle,
        COUNT(*) AS Tot
FROM    Table a ( NOLOCK )        
GROUP BY Cod
HAVING  COUNT(*)=3 
```

这个技巧只有在你有 3 个值并且 SUM() 没有溢出时才有效（就像[Bogdan Sahlean](https://stackoverflow.com/users/924077/bogdan-sahlean)在评论中指出的那样）。

# postgresql - postgresql 多连接语法

> ID：10206936
> 
> 赞同：0
> 
> 时间：2012-04-18T09:51:17.413
> 
> 标签：postgresql, left-join

```
SELECT sessions_compare.*
    FROM archive_sessions as f_session, sessions_compare
    LEFT JOIN archive_sessions as s_session ON (s_session.id = sessions_compare.second_session_id)
    LEFT JOIN consols as f_consol ON (f_session.console_id = f_consol.id)

    where sessions_compare.first_session_id = f_session.id 
```

在执行 get 错误后

> 错误：对表“f_session”的 FROM 子句条目的无效引用第 13 行：
> LEFT JOIN consols as f_consol ON (f_session.console_id =...
> 
> 提示：表“f_session”有一个条目，但不能从这部分查询中引用它。

当我切换位置并遇到`from`类似的`sessions_compare, archive_sessions as f_session` 错误时

> 错误：对表“sessions_compare”第 4 行的 FROM 子句条目的无效引用：...archive_sessions as s_session ON (s_session.id = sessions_c...
> 
> 提示：表“sessions_compare”有一个条目，但不能从这部分查询中引用它。

唯一有效的是

```
SELECT sessions_compare.*
    FROM sessions_compare
    LEFT JOIN archive_sessions as s_session ON (s_session.id = sessions_compare.second_session_id)

    ,archive_sessions as f_session

    LEFT JOIN consols as f_consol ON (f_session.console_id = f_consol.id)
    where sessions_compare.first_session_id = f_session.id 
```

我的问题是正常吗？当使用来自表的多个连接时，我在 mysql 中的 Postgresql 中很年轻`()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:27:37.557

将主查询更改为 JOIN（并添加/缩短一些相关名称）似乎可以解决问题。

```
DROP SCHEMA fuzz CASCADE;
CREATE SCHEMA fuzz;
SET search_path='fuzz';

create table archive_sessions ( id INTEGER NOT NULL
 , console_id INTEGER NOT NULL, game_id INTEGER NOT NULL);
create table sessions_compare (first_session_id INTEGER NOT NULL
 , second_session_id INTEGER NOT NULL);
create table consols (id INTEGER NOT NULL);
create table games (id INTEGER NOT NULL);
create table localizations ( consols_id INTEGER NOT NULL, bars_id INTEGER NOT NULL);
create table bars ( id_bars INTEGER NOT NULL, area_id INTEGER NOT NULL);
create table areas ( id_areas INTEGER NOT NULL );

SELECT sco.*
    FROM archive_sessions as ase
    JOIN sessions_compare sco ON sco.first_session_id = ase.id

    LEFT JOIN archive_sessions as ss ON (ss.id = sco.second_session_id)
    LEFT JOIN consols as sc ON (ss.console_id = sc.id)
    LEFT JOIN games as sg ON (ss.game_id = sg.id)
    LEFT JOIN localizations as sl ON (sc.id = sl.consols_id)
    LEFT JOIN bars as sb ON (sl.bars_id = sb.id_bars)
    LEFT JOIN areas as sa ON (sb.area_id = sa.id_areas)

    LEFT JOIN consols as fc ON (ase.console_id = fc.id)
    LEFT JOIN games as fg ON (ase.game_id = fg.id)
    LEFT JOIN localizations as fl ON (fc.id = fl.consols_id)
    LEFT JOIN bars as fb ON (fl.bars_id = fb.id_bars)
    LEFT JOIN areas as fa ON (fb.area_id = fa.id_areas)

    -- WHERE sco.first_session_id = ase.id
        ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:37:09.297

是的，这是 PostgreSQL 中记录的行为。

> [在任何情况下，JOIN 比分隔 FROM 项的逗号绑定得更紧密。](http://www.postgresql.org/docs/9.1/static/sql-select.html)

这意味着 PostgreSQL 的行为就像它通过在评估 FROM 子句中的逗号列表之前评估 JOIN 子句来构建其工作表一样。

最佳实践通常被认为是始终使用 JOIN 子句；永远不要在 FROM 子句中放置多个表名。

# sql - 来自 oracle 的 sql 查询

> ID：10206940
> 
> 赞同：0
> 
> 时间：2012-04-18T09:51:24.327
> 
> 标签：sql, database, oracle, oracle10g

我正在使用`oracle 10g EE`数据库。我有一个表 mytable，有两列，数据如下：

**注意**：我只想在第二列中查找基于相同值的数据，第一列中是否存在相同或不同的值都没有关系。

`10``A, B and C`重复3 次`these 3 are required output`

同样`20`重复 2 次 for `C`and`D`这些也是必需的输出

```
 column1             column2
--------------     ---------------

     A                  10 //required
     A                  10 //required        
     B                  10 //required
     C                  20//required
     D                  20//required
     E                  30--------not required as 30 is only here and not duplicated
     F                  40--------not required as 40 is only here and not duplicated 
```

需要以下输出，即第二列中的相同值在第一列中具有相同或不同的值

```
 column1             column2
--------------     ---------------

     A                  10         
     A                  10           
     B                  10
     C                  20
     D                  20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:55:14.230

听起来你想要

```
SELECT *
  FROM table_name t1
 WHERE column2 IN( SELECT column2
                     FROM table_name t2
                    GROUP BY column2
                   HAVING COUNT(*) > 1 ) 
```

这似乎适用于您的示例数据

```
SQL> with table_name as (
  2    select 'A' column1, 10 column2 from dual union all
  3    select 'A', 10 from dual union all
  4    select 'B', 10 from dual union all
  5    select 'C', 20 from dual union all
  6    select 'D', 30 from dual)
  7  SELECT *
  8    FROM table_name t1
  9   WHERE column2 IN( SELECT column2
 10                       FROM table_name t2
 11                      GROUP BY column2
 12                     HAVING COUNT(*) > 1 );

C    COLUMN2
- ----------
B         10
A         10
A         10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:55:59.247

```
SELECT column1,
       column2
  FROM <table> t1
 WHERE column2 IN (SELECT column2
                     FROM <table> t2
                    GROUP BY column2
                    HAVING count(*) > 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:08:48.297

select * from table where column2 in ( select column2 from table group by coulmn2 with count(*)>1);

应该为你工作。

谢谢阿比

# android - 单击编辑文本时无法显示按钮

> ID：10206945
> 
> 赞同：0
> 
> 时间：2012-04-18T09:51:39.397
> 
> 标签：android

我有一个编辑文本和按钮。默认情况下，此按钮是不可见的。

当我单击编辑文本时，它会显示软键盘，并且此按钮可见。我抓住了编辑文本的点击事件，并设置了这个按钮是可见的。但是，在我单击第二个进入编辑文本（显示在软键盘中）之前，它是不可见的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
        android:focusable="true" 
    android:focusableInTouchMode="true" 
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10" >

</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:text="Button" />

</RelativeLayout> 
```

代码

```
public class anr extends Activity {
InputMethodManager imm; 
/** Called when the activity is first created. */ 

@Override 
public void onCreate(Bundle savedInstanceState) { 
imm = (InputMethodManager)this.getSystemService(Context.INPUT_METHOD_SERVICE); 
super.onCreate(savedInstanceState); 
setContentView(R.layout.testaaa); 

final Button btn = (Button)this.findViewById(R.id.button1);
btn.setVisibility(View.INVISIBLE);

final EditText txtSearch = (EditText)this.findViewById(R.id.editText1); 
txtSearch.setOnClickListener(new OnClickListener() { 

public void onClick(View v) { 
// TODO Auto-generated method stub 
txtSearch.setFocusable(true);//(false); 
txtSearch.setFocusableInTouchMode(true); 
txtSearch.requestFocus(); 
btn.setVisibility(View.VISIBLE);
} 
}); 

txtSearch.setOnKeyListener(new OnKeyListener() { 

public boolean onKey(View v, int keyCode, KeyEvent event) { 
// TODO Auto-generated method stub 
if ((event.getAction() == KeyEvent.ACTION_DOWN) && 
(keyCode == KeyEvent.KEYCODE_ENTER)) 
{ 
    btn.setVisibility(View.INVISIBLE);
    hideSoftKeyboard(v); 
    txtSearch.clearFocus(); 
} 

return false; 
}}); 

} 
public void hideSoftKeyboard (View view) { 

imm.hideSoftInputFromWindow(view.getWindowToken(), 0); 
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:27:49.290

请为您的编辑文本设置触摸侦听器。

并将您的 onclick 方法工作，即

```
txtSearch.setFocusable(true);
txtSearch.setFocusableInTouchMode(true); 
txtSearch.requestFocus(); 
btn.setVisibility(View.VISIBLE); 
```

那里 。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:40:41.917

试试这个代码...

```
txtSearch.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
btn.setVisibility(View.INVISIBLE);
hideSoftKeyboard(v); 
txtSearch.clearFocus(); 
} 
```

# javascript - jQuery 选项卡窗格

> ID：10206946
> 
> 赞同：0
> 
> 时间：2012-04-18T09:51:43.093
> 
> 标签：javascript, jquery

我引用[了这个](http://jqueryui.com/demos/tabs/#manipulation) 和下载的库（[这里](http://jqueryui.com/download)`jquery-ui-1.8.19.custom`提到的所有 31 个组件）

我遵循了示例代码。但它没有用。这是我的完整代码。

```
 <html>
    <head>
    <meta charset="utf-8">
    <title>jQuery UI Tabs - Default functionality</title>
        <script type="text/javascript" src="1_6js.js"></script>// this is 1.6 jQuery pluging and it works well in other pages    
        <script type="text/javascript" src="jquery-ui-1.8.19.custom.min.js"></script>  // this is my jquery ui plugin

    <script>
    $(function() {

                alert("hi")  // this alert showed in browser

        $( "#tabs" ).tabs();
                alert("oh") // this alert is also showed.
    });
    </script>
</head>
<body>

<div class="demo">

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a></li>
        <li><a href="#tabs-2">tab 2</a></li>
        <li><a href="#tabs-3">tab 3</a></li>
    </ul>
    <div id="tabs-1">
        Content 1
    </div>
    <div id="tabs-2">
        Content 2
    </div>
    <div id="tabs-3">
        Content 3

    </div>
</div>

</div><!-- End demo -->

</body>
</html> 
```

我不需要任何 CSS 样式。我只需要一个工作简单的选项卡窗格，以后可以改进。我`$( "#tabs" ).tabs();` 在 </script> 标签中放入了 body 标签。它也没有用。任何人都可以让我知道我错过了哪里或问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:59:24.143

您忘记添加相关的 CSS，例如：

```
<link rel="stylesheet" href="/css/custom-theme/jquery-ui-1.8.19.custom.css" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:08:42.120

添加`http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css`解决了这个问题。

# c# - 如何在不使用 ping 的情况下检查 Web 服务是否已启动并运行？

> ID：10206951
> 
> 赞同：10
> 
> 时间：2012-04-18T09:51:57.273
> 
> 标签：c#, wcf, web-services, methods, ping

如何检查 Web 服务中的方法是否正常工作？我无法使用 ping。我仍然想检查客户端从 Web 服务调用的任何类型的方法。我知道很难一概而论，但应该有一些方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-12T17:42:20.033

我使用这种方法并且效果很好：

```
public bool IsAddressAvailable(string address)
{
    try
    {
        System.Net.WebClient client = new WebClient();
        client.DownloadData(address);
        return true;
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-05T02:47:22.060

了解 Web 服务方法是否“正常”工作的唯一方法是调用该方法，然后评估结果是否“正常”。如果您想记录“罚款”与时间的关系，那么您可以记录评估的结果。

没有更通用的方法可以做到这一点。考虑：

1.  您可以拥有创建到服务端点的 HTTP 连接的代码，但成功并不能告诉您服务是否会在您向其发送任何消息后立即抛出异常。
2.  您可以连接并向其发送无效消息，但这并不能告诉您太多。
3.  您可以连接并发送一条有效消息，然后检查结果以确保它有效。这会给你一个很好的想法，即当真正的客户随后立即调用服务时，真正的客户应该期待一个有效的结果。
4.  除非该服务以此为契机崩溃，否则只是为了惹恼你！

最好的技术是使用 WCF 跟踪（可能使用消息级跟踪）来记录服务实际发生的情况，无论好坏。然后，人类可以查看日志以查看它们是否“正常”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-21T20:13:44.423

迄今为止，Powershell 是一种“ping”Web 服务端点的简单方法。

使用以下表达式：

```
Test-NetConnection -Port 4408 -ComputerName 192.168.134.1 
```

这是对不存在或未侦听的端口的故障响应；

```
WARNING: TCP connect to 192.168.134.1:4408 failed
ComputerName           : 192.168.134.1
RemoteAddress          : 192.168.134.1
RemotePort             : 4408
InterfaceAlias         : Ethernet0
SourceAddress          : 192.168.134.1
PingSucceeded          : True
PingReplyDetails (RTT) : 0 ms
TcpTestSucceeded       : False 
```

如果地址/端口正在侦听并且可访问，则这是成功的结果：

```
ComputerName     : 192.168.134.1
RemoteAddress    : 192.168.134.1
RemotePort       : 4407
InterfaceAlias   : Ethernet0
SourceAddress    : 192.168.134.1
TcpTestSucceeded : True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:58:30.080

你可以试试`curl`。它是一个 Linux 工具，Cygwin 中也应该有。

```
$ curl http://google.com
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML> 
```

有很多选择；例子可以在'net.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T09:55:29.213

只需在 web 服务的方法中使用 try catch 并将异常记录到日志文件或事件日志中。例子：

```
[OperationContract]
 public bool isGUID(string input)
{
    bool functionReturnValue = false;

    try
    {
        Guid guid;
        functionReturnValue = Guid.TryParse(input, guid);
    }
    catch (Exception ex)
    {
        Log.WriteServerErrorLog(ex);
    }

    return functionReturnValue;
} 
```

您不需要 ping web 服务，而是使用看门狗服务或其他东西 ping 服务器。无需“ping”网络服务。我也认为你不需要这样做。您的网络服务可以正常工作，或者由于代码错误而无法正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-14T07:49:11.863

您可以为自己编写一个小工具或 Windows 服务或任何您需要的东西，然后查看以下 2 篇文章：

[C#：如何以编程方式检查 Web 服务是否已启动并正在运行？](https://stackoverflow.com/questions/12094024/c-how-to-programmatically-check-a-web-service-is-up-and-running)

[检查网络服务是否启动并运行 - 有效](https://stackoverflow.com/questions/21726196/check-to-if-web-service-is-up-and-running-efficiently)

编辑：这是我在类似场景中的实现，我需要知道每次调用之前是否仍然存在外部服务：

```
bool IsExternalServiceRunning
    {
        get
        {
            bool isRunning = false;
            try
            {
                var endpoint = new ServiceClient();
                var serviceUri  = endpoint.Endpoint.Address.Uri;
                var request = (HttpWebRequest)WebRequest.Create(serviceUri);
                request.Timeout = 1000000;
                var response = (HttpWebResponse)request.GetResponse();
                if (response.StatusCode == HttpStatusCode.OK)
                    isRunning = true;
            }
            #region
            catch (Exception ex)
            {
                // Handle error
            }
            #endregion
            return isRunning;
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T10:03:05.867

在我看来，您有两个选择：

*   如果您可以访问它正在运行的服务器，请记录每个调用（以及引发的异常）。
    使用类似[baretail](http://www.baremetalsoft.com/baretail/)的软文件读取日志文件，该文件会随着文件的写入而更新。

*   如果您无法访问服务器，那么您必须让 Web 服务将该日志远程写入您有权访问的另一台计算机。
    流行的记录器内置了此功能。（[Log4Net](http://logging.apache.org/log4net/)，...）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-18T12:36:33.063

您也可以使用跟踪。

[http://msdn.microsoft.com/en-us/library/ms732023.aspx](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

# c# - 创建列表 IEnumerable 使用 CustomClass 类型的属性？

> ID：10206952
> 
> 赞同：1
> 
> 时间：2012-04-18T09:51:59.897
> 
> 标签：c#, list, casting, ienumerable

我如何智能地`List<int>`从一个创建一个`IEnumerable<CustomClass>`，如果`CustomClass`有一个类型的属性`int`，`customProperty`我希望使用它来创建我的`List<int>`？

`List<CustomClass>`我知道我可以通过调用创建一个`instance.ToList<CustomClass>();`

如何提取属性信息以填充我的列表？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:54:04.590

使用 Linq，您可以投影到属性和`ToList()`结果`IEnumerable<int>`：

```
var ints = customClasses.Select(c => c.customProperty).ToList(); 
```

如果您以前从未见过 Linq 扩展方法，那么`Select`这是一种常见的“投影”方法。它需要一个 lambda 表达式，在这种情况下，一个表达式采用`CustomClass`表示为的类型`c`，它返回任何你想要的，在这种情况下是一个`int`. 在`Select`处理一组（可枚举的东西）时，您实际上会得到`IEnumerable<int>`响应，它可以`IEnumerable`根据您的`Select`lambda 推断类型。

如果您想要延迟运行`IEnumerable<int>`，只需挂断`ToList()`电话。

我从不喜欢就最佳实践发表意见，但这是一个清晰的单行字，清楚地表明了意图（假设对 Linq 有基本的了解），而且我到处都能看到它。

**林克资源：**

[http://www.codeproject.com/Articles/84521/LINQ-for-the-Beginner](http://www.codeproject.com/Articles/84521/LINQ-for-the-Beginner)

[http://www.codeproject.com/Articles/19154/Understanding-LINQ-C](http://www.codeproject.com/Articles/19154/Understanding-LINQ-C)

**Lambda 表达式资源：**

[http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

或者，可以使用“LINQ 教程”或“lambda 表达式教程”等术语轻松搜索这些主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:54:35.400

假设 C# 3.0，因此 LINQ，

```
var intList = instance.Select(cc => cc.customProperty).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:55:32.763

使用 Linq 投影很容易做到这一点。使用功能符号：

```
 var myEnumerable = new IEnurable<CustomClass>;
 // ... fill myEnumerable
 List<int> customProperties
   = myEnumrable.Select(item => item.customProperty).ToList(); 
```

lambda 表达式投影`item => item.customProperty`int，因此您得到一个 int 列表。基本上，lambda 表达式相当于一个函数，它`item`作为参数接收并`item.customProperty`作为结果返回。类似的东西`int foo(CustomaClass item) { return item.customProperty}`。lambda 表达式的特殊性在于它是匿名的（没有`foo`），并且返回和参数类型是从上下文中推断出来的。

[Lambda 表达式（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

选择：

```
 List<int> customProperties
   = (from item in myEnumerable
      select item.customProperty).ToList(); 
```

在这种情况下，投影直接在`select`子句中完成。所有 LINQ 查询都在括号之间，以允许使用`ToList()`.

[查询表达式语法示例：投影](http://msdn.microsoft.com/en-us/library/bb738447.aspx)

在这里，我留下一个代码片段，您可以在其中看到类似查询的所有变体：

```
 public class Thing
    {
        public string Name { get; set; }
        public decimal Value { get; set; }
    }

    public decimal GetValue(Thing thing)
    {
        return thing.Value;
    }

    public Thing[] Things =
        {
            new Thing { Name="Stapler", Value=20.35M},
            new Thing { Name="Eraser", Value=0.65M}
        };

    [TestMethod]
    public void GetValueListFromThing()
    {
        // query notation, direct projection
        List<decimal> valuesA 
            = (from t in Things
               select t.Value).ToList();

        // query notation, projection with method
        List<decimal> valuesB 
            = (from t in Things
               select GetValue(t)).ToList();

        // functional notation, projection with method
        List<decimal> valuesC 
            = Things.Select(t => GetValue(t)).ToList();

        // functional notation, projection with anonymous delegate
        List<decimal> valuesD 
            = Things.Select(t => { return t.Value; }).ToList();

        // functional notation, lambda expression
        List<decimal> values
            = Things.Select(t => t.Value).ToList();

    } 
```

# android - 为什么这个 ListView 不滚动？

> ID：10206953
> 
> 赞同：-3
> 
> 时间：2012-04-18T09:52:03.170
> 
> 标签：android, scroll, android-listview

`ListView`我在一个和其他部分使用 25% 的屏幕，我使用`EditText`, another `ListView`, `RadioButton`s, `Button`s。当我尝试滚动`ListView`时，它不会滚动。

总的来说，我`ListView`在一个屏幕上使用了 6 秒，`ListView`除了占满 25% 屏幕的主屏幕之外，所有的都可以工作。

我已经将所有其他视图焦点设置为，`false`并将此主列表焦点设置为`true`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:01:31.843

将 ListView 保持在 linearLayout 下，然后尝试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T08:58:00.417

最后我得到了解决方案..它只是ListView的高度问题..

# html - html div 垂直对齐

> ID：10206955
> 
> 赞同：1
> 
> 时间：2012-04-18T09:52:08.413
> 
> 标签：html, css

谁能帮我垂直对齐这个div，我想`secondDiv`在下面`firstDiv`。我看到了很多帖子但无法解决它任何人都可以更改我的代码来工作。

```
<div>
    <div style="position:relative;width:800px;margin:0;padding:0">
        <div id="firstDiv" style="text-align:center;position:absolute;margin-top:0">
            <div>
                <span>
                    <input type="submit" title="" value="Select Photos From Your Computer"
                    name="sendBtn">
                </span>
            </div>
            <div style="width:492px;height:20px;position:absolute;top:8px;overflow:hidden;z-index:100">
                <form target="msa_frame" name="picForm" id="picForm" method="post" enctype="multipart/form-data">
                    <input type="file" style="opacity:0;font-size:20px;" accept="image/*"
                    name="d" id="d">
                </form>
            </div>
        </div>
        <div id="secondDiv" style="text-align:center;margin:3px 0 12px;">
            <span>You can add upto</span>
            <span style="font-weight:bold">3 Photos</span>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:08:02.553

从 firstDiv 的样式属性中删除“位置：绝对”，它似乎回答了你的问题。

这也会导致事物四处移动。所以你需要准确地描述你想要什么。

您应该避免使用 position:absolute 和 position:fixed ，除非您正在做一些花哨的事情（例如，菜单栏或窗口中的弹出窗口）。所以删除所有“位置：...”的东西以及“顶部：...”。

为什么中间有那个 opacity 0 文件输入？如果您希望它隐藏并删除空白空间，请将其更改为“display：none”（并取消隐藏：“display：block”（如 div）或“display：inline”（如 span））

在这里，将不透明度更改为显示，并删除了所有定位内容（顶部：、位置：等）。

```
<html>
<head>
<style>
</style>
</head>
<body>
    <div>
        <div style="width: 800px; margin: 0px; padding: 0px">   
            <div id="firstDiv" style="text-align: center; margin-top: 0">
                <div>
                    <span>
                        <input type="submit" title="" value="Select Photos From Your Computer" name="sendBtn" />
                    </span>
                </div>
                <div style="width:492px; height:20px; overflow:hidden; z-index:100">
                    <form target="msa_frame" name="picForm" id="picForm" method="post" enctype="multipart/form-data">
                        <input type="file" style="display: none; font-size:20px;" accept="image/*" name="d" id="d" />
                    </form>
                </div>
            </div>
            <div id="secondDiv" style="text-align: center; margin: 3px 0 12px;">
                You can add up to
                <span style="font-weight:bold">3 Photos</span>
            </div>   
        </div>
    </div>
</body>
</html> 
```

在阅读您对其他答案的评论后，试试这个：[http](http://www.quirksmode.org/dom/inputfile.html) ://www.quirksmode.org/dom/inputfile.html http://stackoverflow.com/questions/1944267/how-to-change-the-button-text-输入类型文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:58:46.053

如果您`position: absolute;`从其中删除`firstDiv`它将起作用...[请参阅此处以获取示例](http://jsfiddle.net/vSp4n/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:58:53.027

删除`position:absolute;`_`firstdiv`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:00:05.133

在 div 中改变了

```
>  <div id="firstDiv" style="text-align:center;margin-top:0;"> 
```

你会得到这样的输出

![在此处输入图像描述](../Images/bca6b2afe4c15f940f7a72b5028c85b9.png)

# excel - 在加载项目录中保存 xlam 文件

> ID：10206956
> 
> 赞同：0
> 
> 时间：2012-04-18T09:52:09.180
> 
> 标签：excel, vba

我有一个 xl 加载项（.xlam 文件），它使用其中一张表来存储从用户窗体收集的数据。

如果 Excel 关闭，那么我希望此文件将自身保存在加载项目录中。

当前在这里：
C:\Users\myName\AppData\Roaming\Microsoft\AddIns\ExcelStartUp_ExcelVersion.xlam

在插件关闭前的事件中，我有以下内容：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
ThisWorkbook.Save
End Sub 
```

看起来不错，但它将 xlam 的副本保存到 CurDir 的任何内容中。所以它在我们的文件系统周围复制自己！

如果我在 xlam 文件的代码窗口之一并打开立即窗口，则以下两行不一致！：

```
 ?ThisWorkbook.Path
 ?Thisworkbook.fullname 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-26T14:11:07.800

我一直遇到同样的问题，发现它是由插件在某些情况下将其只读状态更改为 True 引起的（无法准确指出在哪种情况下，但似乎与打开多个 Excel 实例有关）。

因此，解决方案是在您的代码中添加一个检查，如下所示：

```
If ThisWorkbook.ReadOnly = False Then
    ThisWorkbook.Save
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:48:53.283

当多个 Excel 实例打开时，我有这种行为 - 插件被保存在这里和那里。（实际上我昨晚只是在谷歌上搜索它，但找不到任何确认它的东西。）我有一个从 BeforeClose 事件调用的函数，它检查多个实例。

```
Private Sub App_WorkbookBeforeClose(Cancel As Boolean)
If Not ThisWorkbook.Saved Then
    If MsgBox(ThisWorkbook.Name & " Addin" & vbCrLf & "is unsaved. Save?", _
              vbExclamation + vbYesNo, "Unsaved Addin") = vbYes Then
        If ExcelInstanceCount > 1 Then
            MsgBox "More than one Excel instance running." & vbCrLf & _
               "Save cancelled", _
                vbInformation, "Sorry"
           Exit Sub
        Else
            ThisWorkbook.Save
        End If
    End If
End If
End Sub

Function GetExcelInstanceCount() As Long
Dim hwnd As Long
Dim i As Long
Do
    hwnd = FindWindowEx(0&, hwnd, "XLMAIN", vbNullString)
    i = i + 1
Loop Until hwnd = 0
GetExcelInstanceCount = i - 1
End Function 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-18T15:57:13.827

使用 Application 对象的 ActiveWorkbook.Save 方法而不是其 ThisWorkbook.Save 方法。请参阅此链接：[http ://www.techrepublic.com/blog/microsoft-office/avoid-this-potential-gotcha-when-using-add-ins-to-distribute-excel-macros/](http://www.techrepublic.com/blog/microsoft-office/avoid-this-potential-gotcha-when-using-add-ins-to-distribute-excel-macros/)

# c#-4.0 - 如何从 c# 向超级终端（TCP/IP 通信）发送命令。

> ID：10206957
> 
> 赞同：1
> 
> 时间：2012-04-18T09:52:14.550
> 
> 标签：c#-4.0, c#-3.0, c#-2.0, icsharpcode

在我们的 .net 应用程序中，我想使用**TCP/IP**连接向条形码扫描仪发送一些命令。如果我从**超级终端**向扫描仪发送命令，扫描仪正在响应并给出结果。在 c# 代码中，我使用`TcpClient`类与扫描仪进行通信。如果我从我的代码向扫描仪发送任何命令，它没有响应。所以我想从 c# 向超级终端发送命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:09:23.647

您可以在 C# 项目中使用 Com 端口控制并设置波特率和参与方检查，然后您可以通过 COM 接口发送/接收。

我不确定这是您要查找的内容，因为您没有给我更多详细信息

# javascript - xmlhttprequest 打开失败

> ID：10206959
> 
> 赞同：-1
> 
> 时间：2012-04-18T09:52:23.360
> 
> 标签：javascript, jquery, html, xml

```
<html>
<body>
 <script type="text/javascript">
 if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
 else
  {// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }

  var link = "http://www.utravel.com.hk/mobile-app/news-xml.php?id=3248";

 xmlhttp.open("GET",link,false);

xmlhttp.send();

 xmlDoc=xmlhttp.responseXML; 
var a=xmlhttp.readyState;

 document.write(xmlDoc.getElementsByTagName("content")[0].childNodes[0].nodeValue); 
```

为什么我打开后什么都不显示？如果我将链接（作为 .html 文件）下载到我的计算机中，它可以工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:55:29.200

您大概是遇到了[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。

网站上的 JavaScript 不能让浏览器从另一个网站获取数据并将其暴露给第一个网站上的 JavaScript。

# templates - 是否可以覆盖表单助手？

> ID：10206961
> 
> 赞同：3
> 
> 时间：2012-04-18T09:52:45.713
> 
> 标签：templates, scala, playframework-2.0

使用该文档，我可以为我的领域的布局设置我自己的助手，但我也想个性化一些由 play 给出的领域。

主要原因是 Twitter Bootstrap 2，我需要更改（在 checkbox.scala.html 中）

```
@input(field, args:_*) { (id, name, value, htmlArgs) =>
    <input type="checkbox" id="@id" name="@name" value="@boxValue" @(if(value == Some(boxValue)) "checked" else "") @toHtmlArgs(htmlArgs.filterKeys(_ == 'value))>
    <span>@args.toMap.get('_text)</span>
} 
```

到 ：

```
<label class="checkbox">
    <input type="checkbox" name="@name" id="@id" value="@boxValue" @(if(value == Some(boxValue)) "checked" else "") @toHtmlArgs(htmlArgs.filterKeys(_ == 'value)) />
    @args.toMap.get('_text)
</label> 
```

我怎样才能做到这一点 ？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:38:47.567

我终于这样做了：

我创建了一个包views.helpers.form，其中包含：

bootstrap.scala.html：

```
@(elements: helper.FieldElements)

<div class="control-group@if(elements.hasErrors) { error}">
    <label class="control-label" for="@elements.id">@elements.label(elements.lang)</label>
    <div class="controls">
        @elements.input
        @elements.infos(elements.lang).map { info =>
            <span class="help-inline">@info</span>
        }
        @elements.errors(elements.lang).map { error =>
            <span class="help-block">@error</span>
        }
    </div> 
```

复选框.scala.html：

```
@**
 * Generate an HTML input checkbox.
 *
 * Example:
 * {{{
 * @checkbox(field = myForm("done"))
 * }}}
 *
 * @param field The form field.
 * @param args Set of extra HTML attributes ('''id''' and '''label''' are 2 special arguments).
 * @param handler The field constructor.
 *@
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: helper.FieldConstructor, lang: play.api.i18n.Lang)

@boxValue = @{ args.toMap.get('value).getOrElse("true") }

@helper.input(field, args:_*) { (id, name, value, htmlArgs) =>
    <label class="checkbox">
        <input type="checkbox" id="@id" name="@name" value="@boxValue" @(if(value == Some(boxValue)) "checked" else "") @toHtmlArgs(htmlArgs.filterKeys(_ == 'value))>
        @args.toMap.get('_text)
    </label>

div>
</div> 
```

在我的模板中，我所要做的就是：

```
@import helper.{FieldConstructor, inputText, inputPassword} @** Import the original helpers *@
@import helpers.form.checkbox @** Import my helpers *@
@implicitField = @{ FieldConstructor(helpers.form.bootstrap.f) } 
```

瞧！有用！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T10:07:11.893

使用您想要的代码编写自己的标签并使用它而不是提供的帮助程序会更简单。它将简化与覆盖平台标签相关的潜在问题。

# html - 假 3D，动画。哪个更快：img 或 css 精灵？

> ID：10206964
> 
> 赞同：1
> 
> 时间：2012-04-18T09:52:50.193
> 
> 标签：html, css, animation, interactive

为了在本网站上创建交互式假 3D 动画：http: [//finnrudolph.de/JavaScriptObject/](http://finnrudolph.de/JavaScriptObject/)

或者苹果 iPad 功能页面上的那些交互式动画（中途）： http: [//www.apple.com/ipad/features/](http://www.apple.com/ipad/features/)

CSS Sprites 或 imgs 哪个更快？

（至少在语义上，我认为使用 img 更有意义。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:05:57.673

如果您使用的是更好的**矢量形状**，`sprite`但如果您使用的是这样的**图像**`car pic's`，`mountain pic's`等等。那么`sperate images`（IMG 标签）会更好。

所以，如果你使用**图像**，那么`<img>`性能会更好`sprite`。

# symfony - 听 Silex 上的 kernel.request 事件？

> ID：10206970
> 
> 赞同：2
> 
> 时间：2012-04-18T09:53:05.050
> 
> 标签：symfony, silex

[我想在 Silex 微框架http://silex.sensiolabs.org/documentation](http://silex.sensiolabs.org/documentation)上收听 kernel.request 事件

如何 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T11:32:47.553

您可以访问调度程序服务`$app['dispatcher']`，您可以[在此处查看](http://symfony.com/doc/current/components/event_dispatcher.html)如何使用它。但我认为你应该使用 Silex 的[`before`](http://silex.sensiolabs.org/doc/usage.html#before-and-after-filters)事件，因为它也被调用[`kernel.request`](https://github.com/fabpot/Silex/blob/master/src/Silex/Application.php#L438)（[这里](http://silex.sensiolabs.org/doc/cookbook/json_request_body.html#accepting-a-json-request-body)是一个很好的例子，如何使用它）。

**更新：**

上面的链接已过时。在过滤器移至新的[中间件部分](http://silex.sensiolabs.org/doc/middlewares.html#before-middleware)之前，您可以这样编写：

```
$app->before(function (Request $request) {
    // do what you want ...

    // if you want you can return a response so the controller won't be called
    // return new Response($content);

    // or just return null
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-28T09:11:11.397

silex 应用程序上有一种`on($eventName, $callback, $priority = 0)`方法，您可以使用它来监听任何事件。在这种特殊情况下，它将如下所示。

```
$app->on(Symfony\Component\HttpKernel\KernelEvents::REQUEST, function (Symfony\Component\HttpKernel\Event\GetResponseEvent $event) use ($app) {
    // Your actions
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-01T08:01:54.283

根据**Silex 中间件** [文档](http://silex.sensiolabs.org/doc/master/middlewares.html)：

Silex 允许您在通过中间件处理请求的不同阶段运行更改默认 Silex 行为的代码：

*   **应用程序中间件**的触发独立于当前处理的请求；
*   路由中间件在其关联路由匹配时触发。

# 应用程序中间件

应用程序中间件仅针对**主**请求运行。

## 中间件之前

前应用程序中间件允许您**在执行控制器之前**调整请求：

```
$app->before(function (Request $request, Application $app) {
    // ...
}); 
```

默认情况下，中间件**在路由和安全之后**运行。

如果您希望**即使在早期抛出异常**（例如 404 或 403 错误）也能运行中间件，则需要将其注册为早期事件：

```
$app->before(function (Request $request, Application $app) {
    // ...
}, Application::EARLY_EVENT); 
```

在这种情况下，**不会执行路由和安全性**，因此您将**无法访问**、或。`locale``current route``security user`

# android - 吐司消息android

> ID：10206977
> 
> 赞同：0
> 
> 时间：2012-04-18T09:53:35.840
> 
> 标签：android, broadcastreceiver, toast

只要电话响起并销毁敬酒，我就会尝试弹出敬酒消息，电话被拒绝或接听。

在`OnReceive`方法中我有这样的东西：

```
Bundle bundle=intent.getExtras();
final String state=bundle.getString(TelephonyManager.EXTRA_STATE);

if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
{
  Toast toast= new Toast(context);
  toast.show();

  new CountDownTimer(3500,1000)
{

@Override
public void onFinish()
{
  if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_IDLE)||
     (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK))
  {
    toast.cancel();
  }
  else
  {
    toast.setDuration(Toast.LENGTH_LONG);
    toast.show();
    start();
  }
} 
```

问题是，即使在挂断电话后，toast 消息也会不断弹出。就像状态永远不会处于 HANG_UP 或 IDLE 模式。

我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:01:37.800

在你的广播接收器中使用这个

```
 @Override
            public void onReceive(Context context, Intent intent) {
               Log.d("INCOMING", "service start");
               TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
               try {
                 Class c = Class.forName(tm.getClass().getName());
                 Method m = c.getDeclaredMethod("getITelephony");
                 m.setAccessible(true);
               //  telephonyService = (ITelephony) m.invoke(tm);
                 Bundle bundle = intent.getExtras();
                 String phoneNumber = bundle.getString("incoming_number");

                 Log.d("INCOMING", phoneNumber);

                 if ((phoneNumber != null) && !phoneNumber.equals(selectedtednumber)) { 
                     Toast.makeText(context, "Someone other calling sending to voice mail ...", Toast.LENGTH_LONG).show();
                     sendToVoiceMail();
                 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:02:01.280

这是对 Toast 功能的错误使用。你应该找到另一种方法来做你想做的任何事情。

我认为最符合您需要的是[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)。查看文档。

# facebook - 我可以使用 Facebook Graph API 浏览器获取我的所有帖子（个人资料提要）吗？

> ID：10206978
> 
> 赞同：7
> 
> 时间：2012-04-18T09:53:41.487
> 
> 标签：facebook, facebook-graph-api

我可以使用 Graph API 资源管理器获取我的所有帖子（我的个人资料提要）吗？

我尝试使用[https://graph.facebook.com/](https://graph.facebook.com/) /posts?limit=500

但它似乎并没有给我一切（即使增加限制也不起作用），这意味着它只给出了预定义数量的帖子。

有没有办法让我从我加入 Facebook 时获得所有帖子（因为我可以通过在我的墙上向下滚动来获取它们，这意味着 facebook 已经存储了它们）。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:37:34.860

获取访问令牌

[http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)

然后

[https://graph.facebook.com/YOUR_ID/feed?access_token=FACEBOOK_ACCESS_TOKEN](https://graph.facebook.com/YOUR_ID/feed?access_token=FACEBOOK_ACCESS_TOKEN)

这篇文章也可能会有所帮助：

[如何在没有 access_token 的情况下显示来自我网站的 Facebook 提要消息？](https://stackoverflow.com/q/9663700/#9663836)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T00:08:06.553

**您不需要访问令牌！**

```
$url = 'url_pulled_from_database';
$url = str_replace('http://www.', 'http://graph.', $url);
$get_id = file_get_contents($url);
$get_id = json_decode($get_id, true);   
$fbID = $get_id['id'];

//THEN CALL THE FUNCTION        
fb_parse_feed($fbID, $maxnumber); 
```

我不能把 fb_parse_feed 函数归功于它，但你可以在这里找到它 [https://gist.github.com/banago/3864515](https://gist.github.com/banago/3864515)

# c# - Cast exception when marshalling

> ID：10206979
> 
> 赞同：0
> 
> 时间：2012-04-18T09:53:46.353
> 
> 标签：c#, marshalling

I'm currently working with a struct which is written into a buffer. When reading the struct back into my Application i get the following exception:

> Unable to cast object of type 'System.Windows.Documents.TextStore' to type 'System.Version'.

### Code

The exception is thrown when casting the result back ( `(T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));` ).

```
protected static T ReadStruct<T>(Stream input)
    where T : struct
{
    Byte[] buffer = new Byte[Marshal.SizeOf(typeof(T))];
    input.Read(buffer, 0, buffer.Length);
    GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
    T result = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
    handle.Free();
    return result;
} 
```

### Used data-structure

```
/// <summary>
/// The header for all binary files
/// </summary>
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet=CharSet.Ansi)]
public unsafe struct BinaryHeader
{
    public const String MAGIC_KEY = "TABF";

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 5)]
    String _Magic;
    Version _Version;
    DateTime _Timestamp;
    Guid _Format;
    Int64 _Reserved0;
    Int64 _Reserved1;
    /// <summary>
    /// The magic value for the test automation binary
    /// </summary>
    public String Magic
    {
        get
        {
            return _Magic;
        }
    }
    /// <summary>
    /// The version of the assembly ( used for debugging )
    /// </summary>
    public Version AssemblyVersion { get { return _Version; } }
    /// <summary>
    /// The formatGuid of the current binary
    /// </summary>
    public Guid FormatGuid { get { return _Format; } }
    /// <summary>
    /// The timestamp of the file
    /// </summary>
    public DateTime Timestamp { get { return _Timestamp; } }

    public BinaryHeader(Guid formatGuid)
    {
        _Reserved0 = 0;
        _Reserved1 = 0;

        _Version = BinaryBase.AssemblyVersion;
        _Format = formatGuid;
        _Timestamp = DateTime.Now;
        _Magic = MAGIC_KEY;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:27:36.053

用这种方法编写自己的二进制序列化方案是可以的，但您必须了解其局限性。一个核心是它只能处理 blittable 值，简单的值类型值。pinvoke marshaller 为具有 [MarshalAs] 属性的字符串提供了一种解决方法。*Version类*没有这样的解决方法。存储在结构中的指针值将被写入文件。当你回读它时，更正常的事故是你会得到一个 AccessViolationException。除非你有幸指针碰巧取消引用存储在 GC 堆上的有效对象。在您的情况下为 TextStore 类型的对象。

当然，这并不完全是幸运。您必须重新考虑您的方法，_Version 字段必须删除。不要犹豫使用 BinaryFormatter 类，这*正是*它要做的。

# java - How to add jars available in a particular folder to classpath at runtime only for specific wars:

> ID：10206983
> 
> 赞同：0
> 
> 时间：2012-04-18T09:54:24.590
> 
> 标签：java, spring, web-applications, spring-mvc, web-application-project

I am using maven build tool.

The following two are my intentions.

1) To move some of the third party library jars out of my war from WEB-INF/lib folder [note: These jars are common between more than 2 war files (or artifacts)]

2) To make the war file small in size.

Is it possible to move those jars out of war and put it into a folder and these jars should be referred in the classpath only by the wars which require it.

I have tried adding the path to the jars in the Class-Path: of MANIFEST.MF of war files but it did not work out. Please help me out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:39:47.813

我认为有问题的 jar 是编译构成 Web 应用程序的代码所必需的。如果第三方 jar 是编译所必需的，但您不希望它们出现在您的 war 文件中，您有两种选择：

1.  在第三方 jar 的 <dependency></dependency> 部分中，添加“<scope>provided</scope>”。

2.  配置 maven 战争插件以排除战争中不需要的罐子。有关详细信息，请参阅[http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html](http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html)。

如何将您从战争中排除的 jar 文件放入 Web 容器的类路径取决于您的环境。如果您使用的是 ear 文件，上面的 Maven 文档讨论了如何获取包含在 ear 文件中的 jar。如果您不使用 ear 文件，则必须想出自己的方法将 jars 放入容器的 lib 目录。

# javascript - reading a text file line by line using javascript

> ID：10206989
> 
> 赞同：0
> 
> 时间：2012-04-18T09:54:56.090
> 
> 标签：javascript, asp.net

I am trying to read in lines from a text file that are in this form; 34.925,150.977 35.012,151.034 34.887,150.905

I am currently trying to use this methodology, which obviously isn't working. Any help would be appreciated.

```
var ltlng = [];
var txtFile = new XMLHttpRequest();
    txtFile.open("GET", "C:\Gmap\LatLong\Coordinates.txt", true);
    txtFile.onreadystatechange = function() {
        if (txtFile.readyState === 4) {  
        if (txtFile.status === 200) {  // Makes sure it's found the file.
           lines = txtFile.responseText.split("\n"); // separate each line into an array
             ltlng.push(new google.maps.LatLng(lines.split(",")[0],lines.split(",")[1]); //create the marker icons latlong array
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:56:18.487

`XMLHttpRequest`当资源由`HTTP/S`协议（而不是`file`协议，如您的示例）调用时有效

因此，要使您的代码正常工作，您应该尝试使用此代码和 Web 服务器

# objective-c - AVPlayer 动态音量控制

> ID：10206991
> 
> 赞同：3
> 
> 时间：2012-04-18T09:54:57.087
> 
> 标签：objective-c, ios, media-player, avfoundation, avplayer

如何动态更改 AVPlayer 的音量？我的意思是，我想在每次按下按钮时静音。给定的代码似乎只在编译时改变它。运行时怎么办？？？

```
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:[self myAssetURL] options:nil];
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];
NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}
AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
[audioZeroMix setInputParameters:allAudioParams];
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
[playerItem setAudioMix:audioZeroMix]; 
AVPlayer *player = [AVPlayer playerWithPlayerItem:playerItem];
self.mPlayer = player;
[mPlayer play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T21:05:57.533

您可以`playerItem`在播放期间发送新的 AVMutableAudioMix 实例以动态更改级别。只需将您的按钮链接到一个操作方法，该方法创建一个具有适当值的新 AVMutableAudioMix 实例（就像您在上面所做的那样），然后使用 playerItem 的`setAudioMix:`方法设置新的混合值。（如果您正在跨方法工作，请不要忘记保存对 playerItem 实例的引用以便以后访问它。）

（NB`setAudioMix:`在[AVPlayerItem 文档](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html)中没有明确提到，因为它是`audioMix`属性的综合设置器。）

# osgi - Pax Exam 运行两次测试

> ID：10206994
> 
> 赞同：2
> 
> 时间：2012-04-18T09:55:02.547
> 
> 标签：osgi, equinox, apache-felix, pax-exam

这是我琐碎的 Pax 考试测试：

```
package ru.focusmedia.odp.server.datastore.itests;

import static org.ops4j.pax.exam.CoreOptions.felix;
import static org.ops4j.pax.exam.CoreOptions.options;

import javax.inject.Inject;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.ops4j.pax.exam.Option;
import org.ops4j.pax.exam.junit.Configuration;
import org.ops4j.pax.exam.junit.JUnit4TestRunner;
import org.osgi.framework.Bundle;
import org.osgi.framework.BundleContext;

/**
 * @author Toni Menzel (tonit)
 * @since Mar 3, 2009
 */
@RunWith(JUnit4TestRunner.class)
public class SampleTest {

    @Inject
    BundleContext bundleContext = null;

    /**
     * You will get a list of bundles installed by default plus your testcase,
     * wrapped into a bundle called pax-exam-probe
     */
    @Test
    public void listBundles() {
        for (Bundle b : bundleContext.getBundles()) {
            System.out.println("Bundle " + b.getBundleId() + " : "
                    + b.getSymbolicName());
        }
    }

    @Configuration
    public Option[] config() {
        return options(felix());
    }
} 
```

及其POM文件：

```
<?xml version='1.0' encoding='UTF-8' ?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>ru.focusmedia.odp.server</groupId>
    <artifactId>datastore.itests</artifactId>
    <version>0.1.0</version>
    <!-- <packaging>bundle</packaging> -->

    <name>Pax Exam based Testproject</name>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.servicemix.tooling</groupId>
                <artifactId>depends-maven-plugin</artifactId>
                <version>1.2</version>
                <executions>
                    <execution>
                        <id>generate-depends-file</id>
                        <goals>
                            <goal>generate-depends-file</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <pluginManagement>
            <plugins>
                <!--This plugin's configuration is used to store Eclipse m2e settings 
                    only. It has no influence on the Maven build itself. -->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>
                                            org.apache.servicemix.tooling
                                        </groupId>
                                        <artifactId>
                                            depends-maven-plugin
                                        </artifactId>
                                        <versionRange>
                                            [1.2,)
                                        </versionRange>
                                        <goals>
                                            <goal>
                                                generate-depends-file
                                            </goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <execute />
                                        <!-- <ignore/> -->
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <dependencies>

        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.3.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-junit4</artifactId>
            <version>2.3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-container-native</artifactId>
            <version>2.3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam</artifactId>
            <version>2.3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.karaf</groupId>
            <artifactId>karaf</artifactId>
            <version>2.2.6</version>
            <type>pom</type>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.karaf</groupId>
            <artifactId>org.apache.karaf.main</artifactId>
            <version>2.2.6</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.apache.felix.framework</artifactId>
            <version>4.0.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-link-mvn</artifactId>
            <version>2.3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.url</groupId>
            <artifactId>pax-url-aether</artifactId>
            <version>1.3.5</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.karaf.tooling</groupId>
            <artifactId>org.apache.karaf.tooling.testing</artifactId>
            <version>2.2.6</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

我希望测试运行一次，但这是实际结果：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Pax Exam based Testproject 0.1.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- depends-maven-plugin:1.2:generate-depends-file (generate-depends-file) @ datastore.itests ---
[INFO] Created: /home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.datastore.itests/target/classes/META-INF/maven/dependencies.properties
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ datastore.itests ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.datastore.itests/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ datastore.itests ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ datastore.itests ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ datastore.itests ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ datastore.itests ---
[INFO] Surefire report directory: /home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.datastore.itests/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running ru.focusmedia.odp.server.datastore.itests.SampleTest
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/aromanov/.m2/repository/ch/qos/logback/logback-classic/1.0.1/logback-classic-1.0.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/aromanov/.m2/repository/org/apache/karaf/org.apache.karaf.client/2.2.6/org.apache.karaf.client-2.2.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/aromanov/.m2/repository/org/slf4j/slf4j-simple/1.6.4/slf4j-simple-1.6.4.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/aromanov/.m2/repository/org/ops4j/pax/logging/pax-logging-api/1.6.5/pax-logging-api-1.6.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
[   o.o.p.e.s.DefaultExamSystem] - Pax Exam System (Version: 2.3.1) created.
[org.ops4j.pax.exam.rbc.internal.Activator] : Name, port or host is null. So this RBC remains inactive.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling SLF4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Jakarta Commons Logging API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Log4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Avalon Logger API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling JULI Logger API support.
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Test PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d to be in PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d,
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Registering Service: org.ops4j.pax.exam.ProbeInvoker with Probe-Signature="PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d" and expression="ru.focusmedia.odp.server.datastore.itests.SampleTest;listBundles"
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Test PaxExam-Executable to be in PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d,
[org.ops4j.pax.exam.rbc.internal.Activator] : Name, port or host is null. So this RBC remains inactive.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling SLF4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Jakarta Commons Logging API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Log4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling Avalon Logger API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Enabling JULI Logger API support.
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Test PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d to be in PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d,
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Registering Service: org.ops4j.pax.exam.ProbeInvoker with Probe-Signature="PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d" and expression="ru.focusmedia.odp.server.datastore.itests.SampleTest;listBundles"
org.ops4j.pax.exam.extender.service[org.ops4j.pax.exam.raw.extender.intern.Probe] : Test PaxExam-Executable to be in PaxExam-1f348e55-521a-48f1-b5a2-3e1c3276012d,
Bundle 0 : org.eclipse.osgi
Bundle 1 : org.ops4j.pax.exam.rbc
Bundle 2 : org.ops4j.pax.exam.inject
Bundle 3 : org.ops4j.pax.exam.extender.service
Bundle 4 : osgi.cmpn
Bundle 5 : org.ops4j.pax.logging.pax-logging-api
Bundle 6 : org.apache.geronimo.specs.geronimo-atinject_1.0_spec
Bundle 7 : PAXEXAM-PROBE-5c53a55c-5180-4471-923d-41806df0eb26
Bundle 0 : org.apache.felix.framework
Bundle 1 : org.ops4j.pax.exam.rbc
Bundle 2 : org.ops4j.pax.exam.inject
Bundle 3 : org.ops4j.pax.exam.extender.service
Bundle 4 : osgi.cmpn
Bundle 5 : org.ops4j.pax.logging.pax-logging-api
Bundle 6 : org.apache.geronimo.specs.geronimo-atinject_1.0_spec
Bundle 7 : PAXEXAM-PROBE-5c53a55c-5180-4471-923d-41806df0eb26
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling SLF4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Jakarta Commons Logging API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Log4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Avalon Logger API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling JULI Logger API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling SLF4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Jakarta Commons Logging API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Log4J API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling Avalon Logger API support.
org.ops4j.pax.logging.pax-logging-api[org.ops4j.pax.logging.internal.Activator] : Disabling JULI Logger API support.
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.964 sec

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.130s
[INFO] Finished at: Wed Apr 18 13:50:30 MSK 2012
[INFO] Final Memory: 12M/214M
[INFO] ------------------------------------------------------------------------ 
```

为什么`org.eclipse.osgi`还要进行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:21:55.250

检查 Equinox 捆绑包的瞬态依赖性以获取测试范围并明确排除它。

> 选项（菲利克斯（））；- 仅适用于 PaxRunner 容器。本机容器忽略它。

本机容器使用类路径中的 OSGi 框架。

[Pax-考试选项](http://team.ops4j.org/wiki/display/paxexam/Configuration+Options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T22:09:14.620

我遇到了同样的问题，我的一位同事让我从返回 Option[] 的方法中删除了 @Configuration 注释，从而解决了这个问题。

# android - 仅使用 XML 将元素添加到 ExpandableListView

> ID：10206999
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:23.497
> 
> 标签：android, expandablelistview

我想开发几个示例屏幕（没有功能）。我不想为此使用太多 java 代码，我只想使用 XML（Strings.xml 或 Androidxmlfiles）。在我的流程中，我有一个 ExpandableListView，我必须向其中添加一些文本项。任何人请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:05:20.123

仅使用 XML 无法用您自己的内容填充 ExpandableListView。我相信 Eclipse UI 设计器会显示一些元素，就好像它们是添加的一样，但它们基本上像“项目 1”“项目 2”等，以便开发人员查看列表在屏幕上的位置。

如果您已经拥有 UI 流程，那么还有更多屏幕示例的原因是什么......