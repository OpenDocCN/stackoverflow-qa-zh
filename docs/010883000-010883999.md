# StackOverflow 问答 10883000-10883999

# xml - 有没有办法从实体转储中获取 XML 文档而不是 HTML？

> ID：10883001
> 
> 赞同：1
> 
> 时间：2012-06-04T14:28:32.660
> 
> 标签：xml, linqpad

我爱 Linqpad。有没有办法从实体转储中获取 XML 文档而不是 HTML？

我想使用 LinqPad.Util 在 LinqToSql Changeset 上创建 XML 文档而不是 HTML 文档。我尝试了很多方法来序列化变更集，但均未成功。Linqpad util CreateXhtmlWriter 效果很好，但我更喜欢它是一个 XML 文档。关于如何快速做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:54:32.270

现在 LINQPad 中没有任何东西可以将任意对象图转储到 XML。但是，您应该能够使用扩展方法轻松完成您所描述的事情。转到LINQPad 中的**My Extensions**并编写如下方法：

```
public static XElement ToXml (this ChangeSet cs)
{
    return new XElement ("ChangeSet",
        new XElement ("Inserts", cs.Inserts.Select (e => EntityToXElement (e))),
        new XElement ("Updates", cs.Updates.Select (e => EntityToXElement (e))),
        new XElement ("Deletes", cs.Deletes.Select (e => EntityToXElement (e))));
}

static XElement EntityToXElement (object o)
{
    return new XElement (
        o.GetType().Name,
        o.GetType().GetFields ().Select (f => new XElement (f.Name, f.GetValue (o))));
} 
```

然后，在任何查询中，您都可以：

```
GetChangeSet().ToXml().Dump(); 
```

# php - How to organise content in Drupal?

> ID：10883003
> 
> 赞同：0
> 
> 时间：2012-06-04T14:28:35.867
> 
> 标签：php, drupal, content-management-system

I want to set up a website containing 3 categories: movies, books and articles. And want every have menu item and subpage that features best content from the category. In every category i want to have articles, videos and galleries. I want every category page to look different, so with articles, videos and galleries from different categories.

In Drupal i can create "categories", "views" and "sections". I dont want to make a mistake on the design chosen. So my question is what methods of mentioned in last sentence should i use and in what order to organize the content i will have in a proper way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:10:20.590

Taxonomy terms describe and categorize content while Content Types define specific attributes of that content.

Generally you will want to divide your content into Content Types and Taxonomy. A content type is a way to divide content by what fields that content contains. Movies, Books, Articles, Videos (in your case... maybe), all sound like potential Content Types in your system.

You'd then want to add Taxonomy Vocabularies to each content type (categories). Examples of these would be as simple as "Article Contains" with terms like "Video", "Photos", "External Content".

I suggest you do not use 'articles' in both places. Call the taxonomy term something more like 'text' or 'written'. As long as you divide content this way, your pages will be flexible. You can create pages that display content from a single content type and single category or a page with All content types and a single category. You maintain flexible data this way.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:55:56.037

As always there are many different ways to do this in Drupal - and the right way depends on the context but usually anything to do with classification should be suggesting taxonomys.

In Drupal content types are best used when the actual content is different - from your description it sounds rather like the content will be similar - but I do find your question confusing.

So, if your content has the same fields needs to be classified into a category you'll use one content type with at least a new term reference field that you will create to hold the reference to the taxonomy vocabulary. This one content type will hold all of the content related to movies, books and articles.

If your content will contain different fields then you'll need a content type for each of movies, books and articles.

You will need to setup views for each of the taxonomy - as this is a good way to get a block that you can put onto the sidebar. Remember that block contents can be dynamic but blocks cannot (easily) take parameters so the dynamicness of the content needs to be driven by something else.

Sections aren't something that I've used - I've generally found it much better to understand and use the taxonomy - especially seeing as all too often it is necessary to have one content in two taxonomy vocabularies.

Setting up a view for each taxonomy vocabulary will give blocks. Views is great and needs to be understood.

You can setup a view for a taxonomy (block & page) - I generally use [panels](http://drupal.org/project/panels) to build specific pages presentations using a view of a taxonomy vocabulary (e.g. [this one](http://ellakabellawholesale.com)) which links through to the taxonomy term which is a page using a path (/taxonomy/term/%) with a grid view.

# coldfusion - 元素 sessionID 未定义 Coldfusion

> ID：10883006
> 
> 赞同：0
> 
> 时间：2012-06-04T14:28:47.683
> 
> 标签：coldfusion

我有一个测试服务器和一个coldfusion的实时服务器。在这两个项目中，我都托管了同一个项目，并且我在会话中的测试和实时服务器中都使用了 sessionid 的值。但是在实时服务器中，令人惊讶的是，会话中的 sessionID 是未定义的。我在 cfadmin 中启用了“启用 j2EE 会话变量”选项，错误已解决。但是我分析了测试服务器，发现 sessionId 存在于会话中，而没有选中“启用 j2EE 会话变量”选项。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:09:49.230

您可以在 Coldfusion 管理面板中检查范围级联（范围优先级）是否已关闭。寻找“范围”。这取决于您运行的 CFML 引擎在哪里可以找到它。或者你可以只限定你的变量，比如：#session.sessionID#

我建议始终确定变量的范围，因为： - 范围优先确实会降低性能，因为服务器必须循环通过不同的可能范围。- 如果你的变量范围正确并且你犯的错误更少，你的代码就更易读

# jsoup - Jsoup：500错误加载URL

> ID：10883023
> 
> 赞同：1
> 
> 时间：2012-06-04T14:29:59.143
> 
> 标签：jsoup

我正在尝试编写登录到 Google Play 网站并提取开发人员主页中存在的数据的代码。

现在，当我尝试解析 URL：[https://play.google.com/apps/publish/Home?dev_acc=12345678](https://play.google.com/apps/publish/Home?dev_acc=12345678)时，它只会解析页面的不相关部分。包含应用程序数据的页面部分不存在。我在浏览器中查看了同一页面的源代码，发现其中也不存在应用程序数据。

因此，在使用 Live HTTP Headers（使用 Firefox）时，我发现还有其他 URL 可能包含我想要的数据。但是当我尝试打开它们（使用 POST）时，它给出了一个错误：

```
500 error loading URL https://play.google.com/apps/publish/feedback?dev_acc=12345678 
```

现在我尝试在浏览器中打开相同的页面，我得到了，

```
HTTP method GET is not supported by this URL
Error 405 
```

有人可以指出如何进行吗？由于我的公司政策，我无法发布代码，但我可以告诉你，我已经在大多数网站上成功地使用了相同的技术并且它有效。无法理解这里发生了什么。

谢谢，阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:09:29.310

嗯...我不太了解谷歌 API，也不了解政策。但我知道他们不喜欢人们不使用他们自己的方法来获取他们的数据。你应该在谷歌中寻找一种方法来获得你想要的东西。

关于错误：500 - 内部服务器错误。我认为他们可能不允许您获取数据..

另外，我会看看[这个](http://code.google.com/p/google-api-java-client/wiki/DeveloperGuide)。这是谷歌自己的API。它可能会把你带到你想要的地方。

# html - 黑莓滚动问题

> ID：10883026
> 
> 赞同：1
> 
> 时间：2012-06-04T14:30:14.447
> 
> 标签：html, blackberry, blackberry-webworks

我为黑莓创建了一个 HTML 页面。我做得很好，但无法使用触控板滚动任何分区。

我正在用黑莓粗体测试这个。

这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width,height=device-height,target-  densitydpi=device-dpi,user-scalable=no,initial-scale=1.0">
<title>XXXX</title>
</head>
<body class="Claimtype">
<div class="mainwrapper">
<header>
<h1>Claim Type<span></span></h1>
</header>
<article>
<div class="claimtype_content">
  <div class="claim_summary">
    <h3>
      <label>Plan No:</label>
      183245</h3>
    <h4>Health Spending account</h4>
    <h4>Health Spending account</h4>
  </div>
  <div class="claim_type_selection">
    <h3>Type of Claim</h3>
    <select name="claim_type_selection">
      <option>Select</option>
      <option>Select2</option>
      <option>Select3</option>
      <option>Select4</option>
      <option>Select5</option>
    </select>
    <div class="claimtype_desc">
        <div class="claimdescimg">
            <img src="inputUser.png" width="50" height="50">
        </div>
      <div class="claimtype_desctxt">
      <h3>Dental</h3>
          <p>The following notes and warnings highlight missing or conflicting information which caused the validator to perform some guesswork prior to validation. The following notes and warnings highlight missing or conflicting information which caused the validator to perform some guesswork prior to validation. The following notes and warnings highlight missing or conflicting information which caused the validator to perform some guesswork prior to validation.</p>
      </div>
    </div>
  </div>
</div>
</article>
</div>
</body>
</html> 
```

在这里，我想滚动“claimtype_desctxt”文本，我还添加了溢出样式。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:28:36.347

您需要知道的一切都总结在这里：

[使用基于焦点的导航](https://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/using_the_navigation_mode_1866978_11.html)

1st-在配置文件中指定导航模式：

```
<widget>
    <rim:navigation mode=â€�focusâ€�/>
    <feature id="blackberry.ui.dialog" />
</widget> 
```

2nd-定义可聚焦元素，这是示例：

```
<img id="image1" src="imageb.png" x-blackberry-focusable="true" /> 
```

您还可以定义初始焦点：

```
<a class="list" x-blackberry-initialFocus="true">First element</a> 
```

这是一个完整的示例代码，其中包含一个更改焦点对象的突出显示样式的 javascript 函数：

```
<html>
<head>

   <title>Color Input Type</title>
   <script type="text/javascript">
      function highlight(e) {
         e.setAttribute("style", "background-color: red; outline: cyan solid thick;");
      }

      function unhighlight(e) {
         e.setAttribute("style", "");
      }
   </script>
</head>

<body>    
   <h2>Test input type - text/password/email/search/tel/number</h2>
      <div>
         <label >Text: </label>
         <input type="text" x-blackberry-focusable="true" onmouseover="highlight(this);" 
            onmouseout="unhighlight(this);" />
      </div>
      <div>
         <label>Number: </label>
         <input type="number" x-blackberry-focusable="true" onmouseover="highlight(this);" 
            onmouseout="unhighlight(this);" />
      </div>
</body>
</html> 
```

我希望这有帮助

# php - 出现错误：无法连接到“SERVER_IP”上的 MySQL 服务器 (99)

> ID：10883031
> 
> 赞同：3
> 
> 时间：2012-06-04T14:30:26.747
> 
> 标签：php, mysql

我正在使用 PHP5 和 MySQL，一切都很好，直到超过 9,000 份请愿书被发送到 MySQL 服务器。

例如，我正在尝试从具有 10,000 条记录（行）的 CSV 文件中插入 10,000 次。当循环运行时，我收到此错误：

> 无法连接到 '192.168.10.11' (99) 上的 MySQL 服务器。

我写了一个小循环来做 10,000 `select field_id from table where field_id = XX`，我得到了同样的错误。

我的 LAMP 使用 Debian Squeeze、PHP5、MySQL Server 5.1、Apache2

重要说明：使用 MySQL Workbench 或 MySQL CLI 没有错误，仅在 Web 环境中。

这是我的.conf

```
#
# The MySQL database server configuration file.
#
# You can copy this to one of:
# - "/etc/mysql/my.cnf" to set global options,
# - "~/.my.cnf" to set user-specific options.
# 
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

# This will be passed to all mysql clients
# It has been reported that passwords should be enclosed with ticks/quotes
# escpecially if they contain "#" chars...
# Remember to edit /etc/mysql/debian.cnf when changing the socket location.
[client]
port        = 3306
socket      = /var/run/mysqld/mysqld.sock

# Here is entries for some specific programs
# The following values assume you have at least 32M ram

# This was formally known as [safe_mysqld]. Both versions are currently parsed.
[mysqld_safe]
socket      = /var/run/mysqld/mysqld.sock
nice        = 0

[mysqld]
#
# * Basic Settings
#
user        = mysql
pid-file    = /var/run/mysqld/mysqld.pid
socket      = /var/run/mysqld/mysqld.sock
port        = 3306
basedir     = /usr
datadir     = /var/lib/mysql
tmpdir      = /tmp
language    = /usr/share/mysql/english
skip-external-locking
skip-name-resolve

wait_timeout=60
connect_timeout=10
max_allowed_packet=16M
interactive_timeout=120
join_buffer_size=1M
query_cache_size=128M
query_cache_limit=2M
table_cache=1024
sort_buffer_size=8M
read_buffer_size=2M
read_rnd_buffer_size=4M
key_buffer = 256M
key_buffer_size=64M

#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
#bind-address       = 127.0.0.1
#
# * Fine Tuning
#
#key_buffer     = 16M
#max_allowed_packet = 16M
thread_stack        = 192K
thread_cache_size       = 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover         = BACKUP
#max_connections        = 100
#table_cache            = 64
#thread_concurrency     = 10
#
# * Query Cache Configuration
#
#query_cache_limit  = 1M
#query_cache_size        = 16M
#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
# Be aware that this log type is a performance killer.
# As of 5.1 you can enable the log at runtime!
#general_log_file        = /var/log/mysql/mysql.log
#general_log             = 1
#
# Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf.
#
# Here you can see queries with especially long duration
#log_slow_queries   = /var/log/mysql/mysql-slow.log
#long_query_time = 2
#log-queries-not-using-indexes
#
# The following can be used as easy to replay backup logs or for replication.
# note: if you are setting up a replication slave, see README.Debian about
#       other settings you may need to change.
#server-id      = 1
#log_bin            = /var/log/mysql/mysql-bin.log
expire_logs_days    = 10
max_binlog_size         = 100M
#binlog_do_db       = include_database_name
#binlog_ignore_db   = include_database_name
#
# * InnoDB
#
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
#
# * Security Features
#
# Read the manual, too, if you want chroot!
# chroot = /var/lib/mysql/
#
# For generating SSL certificates I recommend the OpenSSL GUI "tinyca".
#
# ssl-ca=/etc/mysql/cacert.pem
# ssl-cert=/etc/mysql/server-cert.pem
# ssl-key=/etc/mysql/server-key.pem

innodb_buffer_pool_size=1024M

[mysqldump]
quick
quote-names
max_allowed_packet  = 16M

[mysql]
#no-auto-rehash # faster start of mysql but no tab completition

[isamchk]
key_buffer      = 16M

#
# * IMPORTANT: Additional settings that can override those from this file!
#   The files must end with '.cnf', otherwise they'll be ignored.
#
!includedir /etc/mysql/conf.d/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:33:31.417

您遇到了超时问题和太多的连接。尝试降低您的 wait_timeout 和可能的 interactive_timeout。

我不知道您是否使用 PDO（从我在这里看到的所有帖子中推荐），但请尝试使 MySQL 连接成为持久连接，这样它就不必为每次更新都打开新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T09:04:44.790

这在几个 MariaDB 安装中对我有用：

第 1 步 - 编辑 sysctl：

`sudo vim /etc/sysctl.conf`

第 2 步 - 粘贴这些行：

`net.ipv4.tcp_tw_reuse=1 net.ipv4.tcp_tw_recycle=1 net.ipv4.tcp_fin_timeout=30 net.ipv4.tcp_max_syn_backlog=8192`

基本上这将使连接保持打开更长的时间

第 3 步：应用设置

`sudo sysctl -p`

这应该可以解决问题。

# jquery - 使用 jquery 相等的高度，但列内也需要相等的元素

> ID：10883035
> 
> 赞同：0
> 
> 时间：2012-06-04T14:30:33.713
> 
> 标签：jquery, html

我正在为我的列使用 jQuery 等高插件，但设计师希望从价格下降到添加到购物车按钮也均衡。这可能与jQuery有关吗？我已经尝试将它添加到现有的相等高度，但实际上我不确定我在做什么。

这是jQuery：

```
 (function($) {
$.fn.equalHeights = function(minHeight, maxHeight) {
    tallest = (minHeight) ? minHeight : 0;
    this.each(function() {
        if($(this).height() > tallest) {
            tallest = $(this).height();
        }
    });
    if((maxHeight) && tallest > maxHeight) tallest = maxHeight;
    return this.each(function() {
        $(this).height(tallest).css("overflow","hidden");
    });
}
    })(jQuery); 
```

这是其中一个盒子的布局方式：

```
<ul id="phones" class="clearfix">
<li class="phone">
<div class="top"></div>
<img src="/_img/2012/accessories_product.jpg" alt="phone" width="192" height="120"/>
<h2>BLACKBERRY MICRO-USB VEHICLE POWER ADAPTER</h2>
<p>Product description sed ut perspici atis unde omnis iste natus sit volupt.</p>
<div class="btm">   
<h3 class="price">$29.99</h3>
<p class="modelnumb">MODEL #: 1234567890</p>
<a href="#" class="btn btn_addtocart">Add To Cart</a>
</div>
</li> 
```

我在这样的页面上调用它：

```
<script>
$j(document).ready(function() {
$j("#phones > li.phone").equalHeights(412);
});
</script> 
```

我已经包含了它现在的样子的图像：

![在此处输入图像描述](../Images/9981da57f0ce511860893428ee212e61.png)

如果有人可以给我一些帮助，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:57:01.987

所以，我现在找到了解决问题的方法，所以我会回答我自己的问题。基本上我有一堆盒子，它们都需要相同的高度。每个盒子的底部都有价格、型号和按钮。上面是文本，当然有可变的高度，所以从价格开始，盒子到盒子的高度是可变的。

我为相等的盒子使用了一个 jQuery 插件，所以我没有将它应用到整个盒子，而是将它应用到一个 div，该 div 只处理盒子的顶部，包括文本并停在价格上。这解决了问题。

也许这可以帮助其他人解决同样的问题。感谢您的建议。

# grails - 运行 grails 2.0.4 命令后的命令提示符

> ID：10883037
> 
> 赞同：1
> 
> 时间：2012-06-04T14:30:35.117
> 
> 标签：grails, console, command, hidden, prompt

我已经将一个 grails 项目升级到 2.0.4 版本，现在，在执行任何 grails 命令后，控制台的提示被隐藏，我看不到我正在输入的任何内容。这个问题发生在我检查的几台机器上。

我正在使用 ubuntu 12.0.4

谢谢你们。

# php - 在 1 类中使用多个 mysql 连接

> ID：10883038
> 
> 赞同：2
> 
> 时间：2012-06-04T14:30:37.300
> 
> 标签：php, mysql

我正在编写一个 cronjob，它将从一个表中传输数据，对其进行处理，然后将其应用于 Web 应用程序。为此，我有 2 个单独的数据库连接。目前，连接凭据是相同的，只是它是不同的数据库，但在上线时，它将完全分开。

问题是我正在创建一个连接，然后在我的班级中将其分配给 $this->staging，另一个称为 $this->production。我使用 mysql_ping 来确保两个连接都正常工作。

似乎发生的情况是，当它进行查询时，它会忽略连接标识符（$this->staging 示例）并尝试对创建的 2 个连接中的最后一个进行查询。

我在查询中使用连接标识符：

```
 // Connection:

 $this->staging = $this->mysql($config['staging']);
 $this->production = $this->mysql($config['production']);

 $sql = "SELECT * FROM TABLE";
 $query = mysql_query($sql,$this->staging);

 // Returns an unknown table in database defined in $this->production. 
```

我将 mysql_connect 作为 $this->mysql() 方法返回，而不是 mysql_select_db()。如果我尝试返回 mysql_select_db() mysql_ping 不起作用。

这是 mysql() 方法：

```
// connect(): Connect to a database (MySQL):

private function mysql($cred) {
    $connect = mysql_connect($cred['server'],$cred['username'],$cred['password']);
    if($connect) {
        $db = mysql_select_db($cred['database']);
        if($db) {
            return $connect;
        } else {
            $this->informer("[FATAL]","Could not make a mysql database connection on server ".$_SERVER['SERVER_ADDR']." for database: ".$cred['database']);
        }
    } else {
        $this->informer("[FATAL]","The database credentials appears to be wrong. ".$_SERVER['SERVER_ADDR']." for the mysql database: ".$cred['database']);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:35:37.720

出现问题是因为您连接到同一个 MySql 服务器，当您连接到暂存（第二个连接）时，PHP 返回为生产创建的相同连接并且不创建新连接，以强制 PHP 创建一个新连接一个你应该改变“mysql_connect”调用是这样的：

```
 $connect = mysql_connect($cred['server'],$cred['username'],$cred['password'], true); 
```

这将强制 PHP 开始一个新的连接。

参考：[http ://www.php.net/mysql_connect](http://www.php.net/mysql_connect)

# primefaces - 如何以编程方式应用 DataTable 过滤器？

> ID：10883040
> 
> 赞同：2
> 
> 时间：2012-06-04T14:30:43.547
> 
> 标签：primefaces

以 PrimeFaces Demo 过滤[数据表](https://www.primefaces.org/showcase/ui/data/datatable/filter.xhtml)（[https://www.primefaces.org/showcase/ui/data/datatable/filter.xhtml](https://www.primefaces.org/showcase/ui/data/datatable/filter.xhtml)）为例，我希望能够在表格之外提供“过滤”链接用户点击（比如沃尔沃、Forw、宝马等）。当用户单击链接时，我想在制造商过滤器下拉列表中切换所选项目并应用过滤器。我无法弄清楚如何访问过滤器属性以进行更改。这可以通过javascript完成吗？如何访问选择列表并设置当前选择？

**更新：**
按照丹尼尔的链接，我设法改变了下拉选择，但我无法应用过滤器。在过滤器基于输入字段的列中，触发 keyup 会导致数据过滤，但我无法确定在 select 上触发什么事件以使其过滤。这是我正在使用的代码：

```
<p:commandLink id="filterLink" 
    value="Click to filter to Volvo Only" 
    onclick="$('#carForm\\:dataTable\\:manufacturerColumn_filter').val('Volvo'),
        $('#carForm\\:dataTable\\:manufacturerColumn_filter').trigger('filter')"
/> 
```

上面创建的链接会将制造商过滤器切换到沃尔沃，但不会导致数据过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:40:54.027

关键是在表级别调用过滤事件。所以我上面的代码应该是：

```
<p:commandLink id="filterLink" 
value="Click to filter to Volvo Only" 
onclick="$('#carForm\\:dataTable\\:manufacturerColumn_filter').val('Volvo'), carsTable.filter()"
/> 
```

# asp.net - GridButtonColumn 自定义处理程序

> ID：10883044
> 
> 赞同：0
> 
> 时间：2012-06-04T14:30:52.450
> 
> 标签：asp.net, telerik

我有 4 个使用 RadGrid 创建的表。它们中的每一个都包含一个我有标题和 ID 的项目列表。我想要一个带有“删除”链接的列，它将触发一个事件处理程序，我将在其中编写代码以从数据库中删除这个 id。

这些表中的每一个在数据库中都有一个单独的表，所以我需要知道哪个表触发了处理程序以及它对应的 id 是什么。

另一个小问题是，我应该包含什么以便 Visual Studio 将 GridCommandEventArgs 识别为一种类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:30:34.017

你的问题有点混乱。您可以使用 DeleteCommand 获取行的 id 并将其删除。

```
<telerik:RadGrid ID="RadGrid1" runat="server"
   OnDeleteCommand="RadGrid1_DeleteCommand" 
   OnNeedDataSource="RadGrid1_NeedDataSource">
   <MasterTableView DataKeyNames="Id" CommandItemDisplay="Top">
      <Columns>
         <telerik:GridButtonColumn ButtonType="ImageButton" 
            ConfirmText="Are you sure you want to delete?"
            CommandName="Delete" ImageUrl="~/Images/Delete.png" 
            Text="Click to delete" UniqueName="Delete">
         </telerik:GridButtonColumn>               
      </Columns>
   </MasterTableView>            
</telerik:RadGrid>

protected void RadGrid1_DeleteCommand(object source, GridCommandEventArgs e)
{
   int id = Convert.ToInt32(e.Item.OwnerTableView.DataKeyValues[e.Item.ItemIndex]["id"]);

   // Do delete based on the given id
} 
```

# c# - 更新到数据库时出错：Oracle

> ID：10883049
> 
> 赞同：2
> 
> 时间：2012-06-04T14:31:04.733
> 
> 标签：c#

我在.Net Windows 应用程序中工作。在 App.Config 中，我给出了这样的连接字符串......

```
<add connectionString="Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.101)(PORT=1521)))(CONNECT_DATA=(SID=PROD)(SERVER=DEDICATED)));User Id=TEST;Password=TEST;" providerName="System.Data.OracleClient" name="ConnectionString" /> 
```

我正在做一个更新过程。一旦断点到达更新方法，我就会收到这样的消息..

> ORA-12504: TNS:listener 未在 CONNECT_DATA 中指定 SERVICE_NAME

为此我该怎么办...

我的 tnsnames.ora 是，

```
PROD =  (DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
(CONNECT_DATA =
  (SERVER = DEDICATED)
  (SERVICE_NAME = Prod)
) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:52:17.237

我记得当我们想为 Oracle 连接指定连接字符串时，应该提供服务名称，其余信息将从该服务名称加载。正如Romil在评论中所说，您必须在tnsnames.ora中创建一个服务名称。有一个用于创建服务名称的 GUI 工具。服务名称在概念上是一个连接说明符，连接所需的一切都将在其中提供。使用此获取更多信息： [Oracle 网络连接快速入门](http://docs.oracle.com/cd/B10500_01/network.920/a96580/gettings.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:01:06.350

举个例子，这是我在 ASP.NET 4.0 应用程序中使用的连接字符串，用于通过 ODP.NET 提供程序/驱动程序连接到 Oracle 数据库：

```
<add 
    name="oraOdpNet" 
    connectionString="Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.101)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=XE))); User Id=TEST; Password=TEST" 
    providerName="system.data.oracleclient" /> 
```

我想绝对*不*依赖外部的“tnsnames.ora”文件。

# c# - 适用于 .NET ListBuckets 的 AWS 开发工具包错误

> ID：10883050
> 
> 赞同：0
> 
> 时间：2012-06-04T14:31:12.107
> 
> 标签：c#, .net, amazon-web-services, sdk, aws-sdk

我在 ac# windows 应用程序中使用简单的 AWS SDK for .NET 文档示例来列出我的存储桶，我收到以下错误。我可以很好地创建存储桶并上传文件，但我不能对存储桶/对象进行任何列表/获取？有人可以帮我吗？谢谢。

ERROR MESSAGE - XML 文档中存在错误 (2, 2)。

错误内部异常 - 不是预期的。”

错误堆栈跟踪 - 在 System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\r\n 在 System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader)\r\n 在 Amazon.S3。 AmazonS3Client.processRequestResponse[T](HttpWebResponse httpResponse, S3Request request, Type t, T& response, Exception& Cause)\r\n 在 Amazon.S3.AmazonS3Client.handleHttpResponse[T](S3Request userRequest, HttpWebRequest request, HttpWebResponse httpResponse, Int32 重试, Int64 lengthOfRequest, T& response, Exception& cause, HttpStatusCode& statusCode)\r\n 在 Amazon.S3.AmazonS3Client.getResponseCallback[T](IAsyncResult 结果)\r\n 在 Amazon.S3.AmazonS3Client.endOperation[T](IAsyncResult 结果) \r\n 在 Amazon.S3.AmazonS3Client.EndListBuckets(IAsyncResult asyncResult)\r\n 在 Amazon.S3。AmazonS3Client.ListBuckets(ListBucketsRequest 请求)\r\n 在 Amazon.S3.AmazonS3Client.ListBuckets()\r\n

//代码

```
using (AmazonS3 amazonS3 = SetAmazonS3Client())
{
    using (ListBucketsResponse response = amazonS3.ListBuckets())
    {
        foreach (S3Bucket bucket in response.Buckets)
        {
            Console.WriteLine("You own Bucket with name: {0}", bucket.BucketName);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:41:32.620

您的示例代码对我来说很好......所以我认为该错误是特定于您的环境的：

*   与您的 AWS 凭证关联的 IAM 用户的奇怪/显式权限？
*   一些现有存储桶名称中的非标准字符？
*   AWSSDK 的旧版本？

# html - 如何从带引号的可打印编码 HTML 表中提取数据？

> ID：10883053
> 
> 赞同：0
> 
> 时间：2012-06-04T14:31:25.787
> 
> 标签：html, perl, parsing, html-table

我知道还有[许多其他与](https://stackoverflow.com/search?q=HTML%3A%3ATableExtract)[HTML::TableExtract](http://p3rl.org/HTML::TableExtract)模块相关的帖子，但所有这些帖子都比我目前理解的水平高得多。我有一个来自电子邮件的非常小的表格（3 行 5 列），我想抓取第二行中的所有数据。然而，由于我对 Perl 的了解有限，我在在线阅读文档时遇到了很多麻烦。

该表如下所示：

![](../Images/8048d754b5f1630bc47a06f6628bb438.png)

```
Time      notspam    probablespam    likelyspam    spam
2012-05   10252205   62192           55995         3797710
Total     ""         ""              ""            "" 
```

这是我要解析的代码片段。这是三行中的第二行：

```
<tr class=3DmailViewUnreadOdd>

<td  class=3DreportViewHeader align=3D"left">
=09
     2012-05
</td>
=20=20
=20=20=20=20
     <td align=3D'right' class=3D'mailViewRowReadEven'>
10252205
=20=20=20=20
</td>
=20=20
=20=20=20=20
     <td align=3D'right' class=3D'mailViewRowReadEven'>
62192
=20=20=20=20
</td>
=20=20
=20=20=20=20
     <td align=3D'right' class=3D'mailViewRowReadEven'>
55995
=20=20=20=20
</td>
=20=20
=20=20=20=20
     <td align=3D'right' class=3D'mailViewRowReadEven'>
3797710
=20=20=20=20
</td>
=20=20
</tr> 
```

这是我到目前为止所尝试的。我在 HTML::TableExtract 页面上使用了一个示例，并对其进行了修改以满足我的需要。但它没有返回任何东西：

```
use HTML::TableExtract;
my $te = HTML::TableExtract->new(
    headers => [qw(notspam  probablespam  likelyspam  spam)]);
my $html = 'test.html';
$te->parse($html);
# Examine all matching tables
foreach $ts ($te->tables) {
    print "Table (", join(',', $ts->coords), "):\n";
    foreach $row ($ts->rows) {
        print join(',', @$row), "\n";
    }
} 
```

我想提取日期（2012-05）和数字（10252205、62192、55995、3797710）并将它们存储在变量中。我应该使用深度和计数参数提取数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:35:51.857

这适用于您的示例数据。（当针对完整的电子邮件运行时，它可能会捕获太多内容，但我只能使用部分 HTML 来做这些。）

```
use strictures;
use File::Slurp qw(read_file);
use MIME::QuotedPrint qw(decode_qp);
use Web::Query qw();

my $w = Web::Query->new_from_html(decode_qp read_file 'so10883053.html');
my @data = $w->find('.mailViewUnreadOdd > *')->text;
# (
#     " 2012-05 ",
#       10252205 ,
#          62192 ,
#          55995 ,
#        3797710
# ) 
```

不要像我在代码中展示的那样手动解码电子邮件，而应该使用非常高级的解析器，例如[Courriel](http://p3rl.org/Courriel)。

# java - 脏检查：JSF + Primefaces 应用程序？

> ID：10883055
> 
> 赞同：2
> 
> 时间：2012-06-04T14:31:34.203
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

我有一个 Web 应用程序，我在其中使用 JSF + Primefaces 作为 UI。在处理 AJAX 调用（如对数据表的 rowSelect 事件进行 AJAX 调用）时，我在对网页应用脏检查时遇到了困难。

以下是我想通过 AJAX 调用应用脏检查的确切场景。以下是我在网页中使用的组件。

1）我有一个由名为“companyBean”的bean填充的数据表（具有公司属性）

```
<p:dataTable id="basic" var="company" value="#{companyInfoBean.companyList}" 
    rowKey="#{company.id}"
    selection="#{companyInfoBean.selectedCompany}" selectionMode="single">

    <p:ajax event="rowSelect" update=":customerDataForm:customerDataFields" />

    <p:column id="modelHeader">
        <f:facet name="header">
            <h:outputText value="Company Name" />
        </f:facet>
        <h:outputText value="#{company.companyName}" />
    </p:column>
      more columns....
</p:dataTable> 
```

如上所选行**（AJAX 调用）**所示，我更新了页面底部表单中的值

```
<h:form id="customerDataForm">
<p:panel id="customerDataFields">
<p:panelGrid >
<p:row>
    <p:column>
        <h:outputLabel for="companyname" value="Company Name " />
    </p:column>
    <p:column>
        <p:inputText id="companyname" value="#{companyInfoBean.selectedCompany.companyName}" label="Company Name" />
    </p:column>
         more columns...
  <p:row>
    <p:column colspan="2" style="text-align:right">
        <p:commandButton value="Save" actionListener="#{companyInfoBean.updateCompany}" 
        update=":customerDataForm:customerDataTable"/>
    </p:column>
    <p:column colspan="2" style="text-align:left">
        <p:commandButton value="Undo" />
    </p:column>
</p:row> 
```

在上面的表单中，用户可以编辑在数据表上的 rowSelect 上更新的值。

**现在我想对数据表上的 rowSelection 表单进行脏检查，**即，尽管执行了 rowSelect 的 AJAX 调用，但是否提示用户使用的表单上有一些未保存的更改。

基本上我可以从这个场景中理解..我需要一些基于条件的 AJAX 调用，而不是简单的。或者我必须使用一些 jQuery 的东西来实现脏检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:01:28.213

有不同的方法可以实现这一点。这里有一些（如果弹出窗口没问题，我更喜欢方法 3）：

### 方法一：

a) 使用 selectedCompany 的副本，例如 editCompanyBean 作为 customerDataFields 的支持 bean。
b) 向 ajax 事件添加一个“监听器”，这可以在使用 selectedCompany 的值设置它之前检查 editCompanyBean 的空值。如果失败，您可以咆哮一条消息并阻止该副本。注意：您可以使用覆盖开关来覆盖 (b)
c) 在保存 editCompanyBean 时将其初始化为字段的空值。

### 方法二：

a) 在 selectedCompany 的 set 语句中，检查 bean 是否已经填充了一个值。如果已填充并跳过编辑，则抛出警告消息。
b) 让用户在继续之前单击 customerDataFields 上的保存或重置。
注意：每次保存或重置 customerDataFields 后清除 selectedCompany

### 方法三：

a) 将 customerDataFields 放入模态弹出对话框中。设置它，以便用户在继续之前必须保存或重置。
b) ajax 事件会弹出上面的模态对话框。您也可以使用按钮弹出。

# jquery - Jquery：为字典中的范围设置值

> ID：10883056
> 
> 赞同：3
> 
> 时间：2012-06-04T14:31:56.910
> 
> 标签：jquery, dictionary, range

我想将值设置为像这样的 jquery 字典对象中的一个范围

```
var temp_dict = {'1-10': 'Woolen', '11-25':'Light Woolen', '26-36':'Light Cotton'} 
```

这里的关键`1-10, 11-25, 26-36`是不同的温度范围。我想将其存储在字典中，然后像这样调用它们：

```
alert(temp_dict[15]); 
```

以便它检查范围并返回适当的结果。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:35:24.387

```
function getTemp(t) {
    for (var key in temp_dict) {
        var range = key.split("-");
        if (t >= range[0] && t <= range[1])
            return temp_dict[key];
    }
}

var temp = getTemp(15); 
```

**演示：http:** [//jsfiddle.net/WPXdx/](http://jsfiddle.net/WPXdx/)

# php - 如何知道用户的语言？

> ID：10883062
> 
> 赞同：-4
> 
> 时间：2012-06-04T14:32:15.403
> 
> 标签：php

> **可能重复：**
> [用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)
> [在 PHP中检测浏览器语言 检测语言](https://stackoverflow.com/questions/3770513/detect-browser-language-in-php)
> [的最佳方法是什么？](https://stackoverflow.com/questions/8582405/whats-best-method-to-detect-language)

我创建了一个世界上任何人都可以访问的网站。

所以，我需要一种方法来大致了解用户的语言，而无需询问他们。

显然，还有一个通过 cookie 设置语言的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:35:04.047

据我所知，最好的方法是检查“Accept-Language”HTTP 标头：

```
if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE']) {
  // parse it and retrieve language
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:35:07.747

检查用户浏览器发送的标题“Accept-Language”。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

有关标头格式的更多详细信息，请参见第 14.4 节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:37:15.580

您可以使用`Accept-Language`每个浏览器发送的 HTTP 请求标头。

我找到了这个函数来解析它：

```
function getPreferredLanguage() {
    $langs = array();
    if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {
        // break up string into pieces (languages and q factors)
        preg_match_all('/([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?/i',
                $_SERVER['HTTP_ACCEPT_LANGUAGE'], $lang_parse);
        if (count($lang_parse[1])) {
            // create a list like "en" => 0.8
            $langs = array_combine($lang_parse[1], $lang_parse[4]);
            // set default to 1 for any without q factor
            foreach ($langs as $lang => $val) {
                if ($val === '') $langs[$lang] = 1;
            }
            // sort list based on value 
            arsort($langs, SORT_NUMERIC);
        }
    }
    //extract most important (first)
    foreach ($langs as $lang => $val) { break; }
    //if complex language simplify it
    if (stristr($lang,"-")) {$tmp = explode("-",$lang); $lang = $tmp[0]; }
    return $lang;
}
$language = getPreferredLanguage(); 
```

[http://snipplr.com/view.php?codeview&id=24897](http://snipplr.com/view.php?codeview&id=24897)

* * *

如果你想要它的完整版本（例如`English`），你可以使用这个数组：

```
$languageCodes = array(
 "aa" => "Afar",
 "ab" => "Abkhazian",
 "ae" => "Avestan",
 "af" => "Afrikaans",
 "ak" => "Akan",
 "am" => "Amharic",
 "an" => "Aragonese",
 "ar" => "Arabic",
 "as" => "Assamese",
 "av" => "Avaric",
 "ay" => "Aymara",
 "az" => "Azerbaijani",
 "ba" => "Bashkir",
 "be" => "Belarusian",
 "bg" => "Bulgarian",
 "bh" => "Bihari",
 "bi" => "Bislama",
 "bm" => "Bambara",
 "bn" => "Bengali",
 "bo" => "Tibetan",
 "br" => "Breton",
 "bs" => "Bosnian",
 "ca" => "Catalan",
 "ce" => "Chechen",
 "ch" => "Chamorro",
 "co" => "Corsican",
 "cr" => "Cree",
 "cs" => "Czech",
 "cu" => "Church Slavic",
 "cv" => "Chuvash",
 "cy" => "Welsh",
 "da" => "Danish",
 "de" => "German",
 "dv" => "Divehi",
 "dz" => "Dzongkha",
 "ee" => "Ewe",
 "el" => "Greek",
 "en" => "English",
 "eo" => "Esperanto",
 "es" => "Spanish",
 "et" => "Estonian",
 "eu" => "Basque",
 "fa" => "Persian",
 "ff" => "Fulah",
 "fi" => "Finnish",
 "fj" => "Fijian",
 "fo" => "Faroese",
 "fr" => "French",
 "fy" => "Western Frisian",
 "ga" => "Irish",
 "gd" => "Scottish Gaelic",
 "gl" => "Galician",
 "gn" => "Guarani",
 "gu" => "Gujarati",
 "gv" => "Manx",
 "ha" => "Hausa",
 "he" => "Hebrew",
 "hi" => "Hindi",
 "ho" => "Hiri Motu",
 "hr" => "Croatian",
 "ht" => "Haitian",
 "hu" => "Hungarian",
 "hy" => "Armenian",
 "hz" => "Herero",
 "ia" => "Interlingua (International Auxiliary Language Association)",
 "id" => "Indonesian",
 "ie" => "Interlingue",
 "ig" => "Igbo",
 "ii" => "Sichuan Yi",
 "ik" => "Inupiaq",
 "io" => "Ido",
 "is" => "Icelandic",
 "it" => "Italian",
 "iu" => "Inuktitut",
 "ja" => "Japanese",
 "jv" => "Javanese",
 "ka" => "Georgian",
 "kg" => "Kongo",
 "ki" => "Kikuyu",
 "kj" => "Kwanyama",
 "kk" => "Kazakh",
 "kl" => "Kalaallisut",
 "km" => "Khmer",
 "kn" => "Kannada",
 "ko" => "Korean",
 "kr" => "Kanuri",
 "ks" => "Kashmiri",
 "ku" => "Kurdish",
 "kv" => "Komi",
 "kw" => "Cornish",
 "ky" => "Kirghiz",
 "la" => "Latin",
 "lb" => "Luxembourgish",
 "lg" => "Ganda",
 "li" => "Limburgish",
 "ln" => "Lingala",
 "lo" => "Lao",
 "lt" => "Lithuanian",
 "lu" => "Luba-Katanga",
 "lv" => "Latvian",
 "mg" => "Malagasy",
 "mh" => "Marshallese",
 "mi" => "Maori",
 "mk" => "Macedonian",
 "ml" => "Malayalam",
 "mn" => "Mongolian",
 "mr" => "Marathi",
 "ms" => "Malay",
 "mt" => "Maltese",
 "my" => "Burmese",
 "na" => "Nauru",
 "nb" => "Norwegian Bokmal",
 "nd" => "North Ndebele",
 "ne" => "Nepali",
 "ng" => "Ndonga",
 "nl" => "Dutch",
 "nn" => "Norwegian Nynorsk",
 "no" => "Norwegian",
 "nr" => "South Ndebele",
 "nv" => "Navajo",
 "ny" => "Chichewa",
 "oc" => "Occitan",
 "oj" => "Ojibwa",
 "om" => "Oromo",
 "or" => "Oriya",
 "os" => "Ossetian",
 "pa" => "Panjabi",
 "pi" => "Pali",
 "pl" => "Polish",
 "ps" => "Pashto",
 "pt" => "Portuguese",
 "qu" => "Quechua",
 "rm" => "Raeto-Romance",
 "rn" => "Kirundi",
 "ro" => "Romanian",
 "ru" => "Russian",
 "rw" => "Kinyarwanda",
 "sa" => "Sanskrit",
 "sc" => "Sardinian",
 "sd" => "Sindhi",
 "se" => "Northern Sami",
 "sg" => "Sango",
 "si" => "Sinhala",
 "sk" => "Slovak",
 "sl" => "Slovenian",
 "sm" => "Samoan",
 "sn" => "Shona",
 "so" => "Somali",
 "sq" => "Albanian",
 "sr" => "Serbian",
 "ss" => "Swati",
 "st" => "Southern Sotho",
 "su" => "Sundanese",
 "sv" => "Swedish",
 "sw" => "Swahili",
 "ta" => "Tamil",
 "te" => "Telugu",
 "tg" => "Tajik",
 "th" => "Thai",
 "ti" => "Tigrinya",
 "tk" => "Turkmen",
 "tl" => "Tagalog",
 "tn" => "Tswana",
 "to" => "Tonga",
 "tr" => "Turkish",
 "ts" => "Tsonga",
 "tt" => "Tatar",
 "tw" => "Twi",
 "ty" => "Tahitian",
 "ug" => "Uighur",
 "uk" => "Ukrainian",
 "ur" => "Urdu",
 "uz" => "Uzbek",
 "ve" => "Venda",
 "vi" => "Vietnamese",
 "vo" => "Volapuk",
 "wa" => "Walloon",
 "wo" => "Wolof",
 "xh" => "Xhosa",
 "yi" => "Yiddish",
 "yo" => "Yoruba",
 "za" => "Zhuang",
 "zh" => "Chinese",
 "zu" => "Zulu"
); 
```

[http://www.fractalizer.ru/frpost_267/php-array-of-iso-639-1-language-codes-names/](http://www.fractalizer.ru/frpost_267/php-array-of-iso-639-1-language-codes-names/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:35:06.440

看看[`$_SERVER['HTTP_ACCEPT_LANGUAGE']`](http://php.net/manual/en/reserved.variables.server.php)

你也可以做类似的事情`substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);`来获得一个“id”，比如

*   FR
*   它
*   zh
*   很快 ....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T14:35:48.843

在标题旁边`Accept-Language`，仅使用 javascript 您可以获得所使用的浏览器的语言[`navigator.language`](https://developer.mozilla.org/en/Navigator.language)（但它当然不是很可靠）

或者，在现代浏览器上使用 HTML5 API，您可以检测到用户[`geolocation`](http://html5demos.com/geo)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T14:36:29.077

是的，您可以使用[`Accept-Language`HTTP 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)。[这篇 w3 文章](http://www.w3.org/International/questions/qa-accept-lang-locales)涵盖了所有问题，并提到您还应该设置一个 cookie 或等于允许覆盖该“默认语言”。

# java - 从 PSV 文件 Java 中读取

> ID：10883065
> 
> 赞同：0
> 
> 时间：2012-06-04T14:32:26.123
> 
> 标签：java

我想使用 java 读取 PSV 文件。我的 PSV 文件中的记录有 4 列。我只想读取和输出第 3 列和第 4 列。做这个的最好方式是什么。这是我所拥有的：

```
BufferedReader PSVFile = new BufferedReader(new FileReader(fileName));
String dataRow = PSVFile.readLine();
while (dataRow != null)
{
    String[] dataArray = dataRow.split("\n");
    for (String item:dataArray) 
    {
        String[] elements = item.split("|");
        System.out.println(item);
    }
    System.out.println();
    dataRow = PSVFile.readLine();
}
PSVFile.close();
System.out.println(); 
```

基于@AljoshaBre 建议我使用 CSVReader，这样做：

```
reader = new CSVReader(new FileReader(fileName),'|');
String [] nextLine;
while ((nextLine = reader.readNext()) != null) 
{
 System.out.println( nextLine[3] + nextLine[4]);
} 
```

我得到了所需的输出，但随后出现错误：线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 2 at Read_PSV.main(Read_PSV.java:20) 第 20 行是 System.out.println( nextLine[3] +下一行[4]);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:46:24.547

[OpenCSV](http://opencsv.sourceforge.net/)是我的首选武器。

此代码段将为您提供第三列和第四列：

```
try {
    //last parameter tells it which line (row) to consider as the first one
    CSVReader reader = new CSVReader(new FileReader("res/test.csv"), '|', '\0', 1);
    String[] row;

    List<String> columnThree    = new ArrayList<String>();
    List<String> columnFour     = new ArrayList<String>();

    while((row = reader.readNext()) != null) {
        columnThree.add(row[2]);
        columnFour.add(row[3]);
    }
    reader.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

它会打印

```
Nikola
Nenad
Ljubinka
Gordana 
```

对于这个输入：

***测试.psv***

```
Name|Surname|Father|Mother
Aleksandar|Milic|Nikola|Ljubinka
Nebojsa|Jakovljevic|Nenad|Gordana 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:51:31.093

Commons-Lang 也有一个很好的类：

```
// get a csv instance (which is cloned, so we can customize it)
StrTokenizer tokenizer = StrTokenizer.getCSVInstance();

// Set delimiter char
tokenizer.setDelimiterChar('|');

Scanner scanner = new Scanner(new File("file.psv"));
while (scanner.hasNextLine()) {
  // set the input on the tokenizer
  tokenizer.reset(scanner.nextLine());
  // get the tokens
  String toks[] = tokenizer.getTokenArray();
} 
```

注意：StrTokenizer 本身设计为一次处理一条记录，因此您必须使用类似 java 的 Scanner 之类的东西一次拉入一行。StrTokenizer 本身可以通过“reset”方法重用（尽管不是线程安全的）。

它有许多选项，例如引号字符、空格处理、空标记处理等……不确定 opencsv 会有哪些选项。

# spring - Spring Batch - 没有定义名为“job-configurations”的bean

> ID：10883066
> 
> 赞同：4
> 
> 时间：2012-06-04T14:32:30.530
> 
> 标签：spring, spring-mvc, spring-batch, spring-batch-admin

我正在使用一个自定义 MVC 应用程序，该应用程序依赖于他们的文档中描述的 SPring Batch，并得到了这个 SO 问题[Integrating Spring Batch Admin into an existing application 的帮助](https://stackoverflow.com/questions/6438570/integrating-spring-batch-admin-into-an-existing-application)。

**现在的问题是，当 web 应用程序开始将各种 URL 映射到适当的控制器时，作业配置步骤就会爆炸。**

```
2012-06-04 10:17:54,966 INFO [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping] - <Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'>
2012-06-04 10:17:55,512 INFO [org.springframework.ui.freemarker.SpringTemplateLoader] - <SpringTemplateLoader for FreeMarker: using resource loader [WebApplicationContext for namespace 'admin-servlet': startup date [Mon Jun 04 10:17:54 EDT 2012]; parent: Root WebApplicationContext] and template loader path [/WEB-INF/web/]>
2012-06-04 10:17:55,512 INFO [org.springframework.ui.freemarker.SpringTemplateLoader] - <SpringTemplateLoader for FreeMarker: using resource loader [WebApplicationContext for namespace 'admin-servlet': startup date [Mon Jun 04 10:17:54 EDT 2012]; parent: Root WebApplicationContext] and template loader path [classpath:/org/springframework/batch/admin/web/]>
2012-06-04 10:17:55,512 INFO [org.springframework.batch.admin.web.freemarker.HippyFreeMarkerConfigurer] - <ClassTemplateLoader for Spring macros added to FreeMarker configuration>
2012-06-04 10:17:55,528 INFO [org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping] - <Mapped URL path [/configuration] onto handler 'configurationHandler'>
2012-06-04 10:17:56,230 INFO [org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping] - <Mapped URL path [/job-configuration] onto handler '/job-configuration'>
...
2012-06-04 10:17:56,230 ERROR [org.springframework.web.servlet.DispatcherServlet] - <Context initialization failed>
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '/job-configuration.json': Cannot resolve reference to bean 'job-configurations' while setting bean property 'requestChannel'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'job-configurations' is defined 
```

有人遇到这种情况吗？该应用程序依赖于一个完全独立工作的简单 spring-batch jar，我希望它能够从该工件中提取任何需要的作业 bean。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:18:54.300

我向我的一些同事提出了这个问题，这似乎是我认为的 spring 批处理管理设计中的一个缺陷，它违背了许多典型的 Spring 设计模式。

依赖的 spring 批处理管理 jar 对包括数据源在内的解决方案的上下文“了解太多”。这样做的问题是，在一个体面的 web 应用程序中，数据源可能在运行时根据数字或环境变量（环境、数据中心、应用程序服务器）动态确定，并且不像[Dave Syer 的](http://www.davesyer.com/)（Mysql 或 HSQL）那么简单方法。[我在春季](http://forum.springsource.org/showthread.php?92223-How-to-configure-Spring-batch-admin)论坛上读过帖子，但他支持这一点，几乎是对被问者的侮辱。

如果您的批处理作业使用多个数据源（即源数据库和目标数据库），情况会变得越来越复杂。而且并不像在 webapp 中加载数据源那么简单，因为所有相关的 bean 都已经与 Dave 的 HSQL 驱动程序 DS 以及相关的 .sql 文件和初始化脚本连接。

这导致我基本上覆盖了批处理管理 jar 中每个与数据源相关的 bean，包括 jobrepository（预期的）、jobExplorer、jobService 以及其他一些在 META-INF/spring/batch/override 目录中具有不同文件的其他 bean。每个文件都利用 spring 3.1 的 Profile 命名空间来加载正确的数据源，并注入到所有需要的 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-15T11:41:21.620

确保您的 web.xml 指定 contextConfigLocation 如下。

```
<servlet>
<servlet-name>Batch Servlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
<param-name>contextConfigLocation</param-name>
<param-value> 
classpath*:/org/springframework/batch/admin/web/resources/servlet-config.xml,
classpath*:/org/springframework/batch/admin/web/resources/webapp-config.xml
</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet> 
```

# javascript - jQuery 变量另存为 JavaScript var 意外行为

> ID：10883073
> 
> 赞同：0
> 
> 时间：2012-06-04T14:33:24.647
> 
> 标签：javascript, jquery, variables

在一个脚本中，我有以下内容：

```
$('#image-slider').empty(); 
```

这清空了我的应用程序中的图像滑块元素。

我想在我的函数中直接使用 ID 引用，所以我在脚本顶部声明了一些变量，包括：

```
var globals = [];
globals.markup = [];
globals.values = [];
globals.markup.image_slider = $('#image_slider'); 
```

但是，当我现在打电话时：

```
globals.markup.image_slider.empty(); 
```

滑块未**清空**。

任何想法我做错了什么？

编辑：

一个完整的例子：

```
$(document).ready(function(){
  var projects = <?= $json; ?>;
  var globals = [];
  globals.markup = [];
  globals.values = [];

  globals.markup.title = $('#title');
  globals.markup.image_slider = $('#image_slider');

  function load_project(f)
  {
      var potential = window.location.hash.substring(1);

      $.each(projects, function(i, project){

          if (project.permalink == potential)
          {
              // Manage stats and fields
              $('#title').text(project.title);
              $('#agency').text(project.agency);
              $('#description').text(project.description);
              $('#website_url').attr('href', project.website_url);

              // Manage images
              globals.markup.image_slider.empty();
    ..... 
```

编辑：我是个白痴。这是一个简单的错字。 `image_slider`应该是`image-slider`..我的错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:41:07.177

看起来您的变量初始化脚本在创建元素之前运行，因此分配给 globals.markup.image_slider 的 jquery 集合是空的。您需要将该代码放入 DOMReady 脚本中：

```
$(function() { globals.markup.image_slider = $('#image_slider'); }); 
```

更新：从代码示例中，看起来您已经这样做了。稍后再尝试移动它-“加载”事件（ $(window).bind("load", ...); ）-或检查您的逻辑以确保该元素由文档呈现，而不是稍后动态创建你的“load_project”某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:52:48.007

正如@davin 正确建议的那样，代码很好，问题出在其他地方。我不小心输入了div，`image_slider`而不是`image-slider`在标记中标识了div。

# java - Java 和 Eclipse：JAR 中的资源？

> ID：10883077
> 
> 赞同：2
> 
> 时间：2012-06-04T14:33:34.047
> 
> 标签：java, eclipse, resources, jar, minecraft

如何将资源（图像）直接添加到我的 JAR 文件中？例如，如果您打开 minecraft.jar（Minecraft 的），您可以看到一些包含资源的类和文件夹。

如果我尝试将任何资源放在我的 /src 文件夹中，Eclipse 将在包资源管理器中显示它们，这很烦人。

当我反编译 Minecraft（Minecraft Coder Pack）时，/src 文件夹中没有资源。如何像 Minecraft 一样添加我的资源？

提前致谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:38:11.860

You can just create a new folder and mark it as source folder (rightclick on folder in Eclipse -> Build Path -> Use as source folder). Now you should be able to use the ressources without them being in the /src folder.

# c# - 上传到服务器后损坏的文件

> ID：10883078
> 
> 赞同：1
> 
> 时间：2012-06-04T14:33:41.560
> 
> 标签：c#, asp.net, upload

我的网络应用程序有问题。我已经为上传文件做了一个上传功能。本地调试它没有问题。当我在服务器上运行我的应用程序时，它也可以工作，但是文件在上传后损坏（例如，word 文件只有一些符号而不是正确的文本）。

我认为错误必须在服务器设置中的某个地方，或者可能在 webconfig 中？我从几个小时开始搜索解决方案，但找不到类似的问题（是的，也许我用错误的关键字搜索:(

有人有解决办法吗？谢谢！

我的代码：

```
<asp:FileUpload ID="FileUpload1" runat="server" /><br />
<asp:Button ID="btnUpload" runat="server" Text="Datei hochladen" onclick="btnUpload_Click" /> 
```

背后的代码

```
//some code for save fileinfos in database...
...
...

//Upload File
FileUpload1.SaveAs(path + fileName); 
```

我没有可以发布的错误消息，因为它显然一切正常。问题是在服务器上上传后文件损坏（本地有效）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:45:02.793

I can't see the byte array generation code here(the section you have commented above) but if everything is ok in the code, the byte array received from stream is corrupted. It may be because of errors in client side java script codes. But you say that a local test is ok. It may be because of the network settings ?! If packet payloads are corrupted, what you get on server side will be corrupted as well. Do you have any firewall in the middle ?! Any signature matching application ?!

# embedded - 树莓派上的ARM时钟速度

> ID：10883083
> 
> 赞同：2
> 
> 时间：2012-06-04T14:34:02.447
> 
> 标签：embedded, arm, low-level, raspberry-pi

运行裸机（无操作系统，无 Linux）

规格表明 ARM 可以/确实运行 700MHz，系统时钟与手册相匹配，并且似乎以 250MHz 运行。ARM 上的简单测试表明它正在做同样的事情，例如指令缓存打开

```
test:
  subs r0,r0,#1
  bne test 
```

并且改变 subs 指令的数量来控制分支，它在 250MHz 的范围内，但距离 700MHz 有很长的路要走。

我在数据表中没有看到用于倍增 ARM 时钟的 phy 设置？

编辑：

也许我的假设是有缺陷的......

```
.globl ARMTEST0
ARMTEST0:
    subs r0,r0,#1
    bne ARMTEST0
    bx lr

.globl ARMTEST1
ARMTEST1:
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    bne ARMTEST1
    bx lr

.globl ARMTEST2
ARMTEST2:
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    subs r0,r0,#1
    bne ARMTEST2
    bx lr

.globl ARMTEST3
ARMTEST3:
    subs r1,r0,#1
    subs r2,r1,#1
    subs r3,r2,#1
    subs r0,r3,#1
    subs r1,r0,#1
    subs r2,r1,#1
    subs r3,r2,#1
    subs r0,r3,#1
    subs r1,r0,#1
    subs r2,r1,#1
    subs r3,r2,#1
    subs r0,r3,#1
    subs r1,r0,#1
    subs r2,r1,#1
    subs r3,r2,#1
    subs r0,r3,#1
    bne ARMTEST3
    bx lr 
```

每个函数的系统计时器以十六进制计时（250Mhz 系统计时器已根据秒表等进行验证）。

```
02DB6DF7 ARMTEST0
02DB6E1C ARMTEST0
00AB6E2A ARMTEST1
00836E46 ARMTEST2
00836E2A ARMTEST3 
```

这使：

```
ARMTEST0
0x01000000 subs instructions
0x01000000 bne  instructions
0x02000000 instructions
1.43 clocks per instruction.  175Mips.

ARMTEST1
0x01000000 sub instructions
0x00200000 bne instructions
0x01200000 instructions
1.68 instructions per clock. 420Mips

ARMTEST2
0x01000000 sub instructions
0x00100000 bne instructions
0x01100000 instructions
2.07 instructions per clock. 517Mips

ARMTEST3
0x01000000 sub instructions
0x00100000 bne instructions
0x01100000 instructions
2.07 instructions per clock. 517Mips 
```

ARM11 是超标量，每个时钟多条指令并不意外。我会期待更多。仅使用寄存器 0 可能会弄乱管道，因为您必须在执行下一条指令之前等待一条指令的一个结果。我期待看到测试 2 和 3 之间的差异，这可能是另一个错误的假设。也许它真的是 500Mhz 而不是 700？linux 源代码中有一行提到了 500000000 时钟。

```
static struct clk osc_clk = {
#ifdef CONFIG_ARCH_BCM2708_CHIPIT
    .rate = 27000000,
#else
    .rate = 500000000,  /* ARM clock is set from the VideoCore booter */
#endif
};

/* warning - the USB needs a clock > 34MHz */

#ifdef CONFIG_MMC_BCM2708
static struct clk sdhost_clk = {
#ifdef CONFIG_ARCH_BCM2708_CHIPIT
    .rate = 4000000,    /* 4MHz */
#else
    .rate = 250000000,  /* 250MHz */
#endif
};
#endif 
```

也许我认为我测量的 250Mhz 是 270，而 ARM 是 500MHz？

EDIT2...DOH

这不是一个很好的管道改进，这是更好的：

```
.globl ARMTEST3
ARMTEST3:
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    subs r0,r0,#1
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    nop
    bne ARMTEST3
    bx lr

    ARMTEST3
    0x01000000 sub instructions
    0x08000000 nop instructions
    0x00100000 bne instructions
    0x09100000 instructions
    037000D7 system clocks
    2.64 instructions per clock. 659Mips 
```

一开始config.txt没能正常工作，然后重新建了一个linux sd卡，开机发现/boot/目录其实是包含gpu引导文件和kernel.img arm boot的fat分区文件。所以不在 boot/ 目录中，而是在与 .bin 和 .elf 和 .img 文件相同的目录中创建 config.txt 并放置 arm_freq=something，然后 gpu 引导加载程序对 pll 乘数进行修改，以便在 arm 启动时就是这样的速度。我仍然预计每秒有超过 7 亿条指令，但我没有看到，我猜需要继续尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:49:08.620

可能值得从 Raspberry Pi 组织的下载页面查看 Arch Linux 参考发行版提供的引导加载程序。我不知道它是否是一个工作选项，但它的 config.txt 包含该行

```
#arm_freq=800 
```

也有报道称人们对 Pi 进行了超频 - 因此有关初始化时钟的信息肯定在某处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:27:18.573

可能是因为 Raspberry Pi Foundation 主要由 Broadcom 员工组成，他们选择了 Broadcom 设备作为 CPU。虽然这意味着 RPi 以非常低的成本获得了相对高性能的 ARM11，但不幸的是，博通只向被许可方提供了芯片的全部细节，因此设置 PLL 所需的信息可能不会公开，我怀疑是嵌入在 Broadcom 提供的“固件”二进制文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:37:42.947

我对裸机编程了解不多，但这段代码可能有用： [https ://github.com/dwelch67/raspberrypi](https://github.com/dwelch67/raspberrypi)

值得注意的是描述引导顺序的自述文件部分：

> 1) 从某种片上 ROM 启动
> 2) 读取 sd 卡并在第一个分区的根目录中查找其他特定于 gpu 的启动文件 bootcode.bin、loader.bin、start.elf（FAT 格式）
> 3
> ( _文件并将其复制到内存
> 5) 释放 arm 上的重置，使其从写入 kernel.img 数据的地址运行

这意味着 config.txt 与 linux 内核是分开的，并且芯片自己设置时钟速度（只要这个序列实际上是真的。）

该存储库中的代码可能会帮助您回答您的问题。

另外，在树莓派网站上，他们发了一篇关于官方超频的帖子：[http ://www.raspberrypi.org/archives/2008](http://www.raspberrypi.org/archives/2008)

他们提到了一个 cpufreq 驱动程序，您应该能够获得源代码（因为它是 linux 源代码树的一部分。）这也可能有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T13:40:37.590

您可以调整 Raspberry Pi 并更改例如 ARM 时钟速度和 Ram/Video Ram。[一个很好的教程](http://developer-blog.net/en/hardware-2/raspberry-pi-performance-tuning-2/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T19:18:03.363

我知道这是不久前被问及回答的，但我遇到了这个问题，希望能得到一个快速的答案。万一其他人可能想知道这就是我为裸机设置修复它的方式。我通过添加在 RPI3 上取得了成功

> force_turbo=1
> arm_freq=1200

同样，即使这是裸机，在启动 ARM 并加载裸机代码（据我了解）之前，GPU 固件也会读取 config.txt。我发现这里引用[了这个](https://www.raspberrypi.org/documentation/configuration/config-txt/overclocking.md)。请注意，我还尝试以编程方式更改频率，但找不到参考（我什至查看了 linux 内核源代码树，但我是内核开发的新手）。

# javascript - eval 函数的目的是什么？

> ID：10883086
> 
> 赞同：0
> 
> 时间：2012-06-04T14:34:08.477
> 
> 标签：javascript

我知道这个函数获取一串有效的 JavaScript 表达式或语句并评估表达式或执行语句，但为什么我们需要将代码传递给函数以执行而不是简单地在脚本中编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:35:48.510

有时代码是动态构建的，或者它是需要在当前上下文中评估的 JSON 之类的东西，等等。这样做不一定是好的，也不一定是必要的——另作讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:36:25.213

这取决于您需要创建动态变量甚至解析 json 数据的情况。无论如何，强烈建议**不要**使用它。

更多解释见：

*   [探索 Javascript 的 eval() 功能和闭包作用域](http://www.bennadel.com/blog/1926-Exploring-Javascript-s-eval-Capabilities-And-Closure-Scoping.htm)

为了避免它，请参阅；

*   [JavaScript“eval”的解决方法](http://www.go4expert.com/forums/showthread.php?t=13979)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:47:24.537

假设您有函数：`makeCheckbox()`和`makeRadio()`（`makeSelect()`理论上）。您想通过用户的活动（例如菜单点击）调用函数。你可以用 制作它`if`，`else if`等等，你可以制作`switch`，但你也可以`eval`制作类似的东西：

```
eval('make'+userChoose.charAt(0).toUpperCase()+string.slice(1)+'()'); 
```

where`userChoose`是其中一个选项：`radio`,`checkbox`或`select`, 首先是[大写字符](https://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript)，然后与`make`(before) 和`()`(after) 连接，最后调用其中一个函数。

这不是好的做法，因为在大型项目中，您不能简单地找到函数调用，因为它们“隐藏在后面” `eval`，但有时这是唯一的方法。

# ios - 在应用程序中保存文件的位置

> ID：10883089
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:34:24.630
> 
> 标签：ios, objective-c, xcode

我制作了一个包含大量图像的网络应用程序。Safaris 内存无法打开所有这些。因此，我构建了一个将图像存储在 iPad 上的应用程序。但是，它们可以动态更改，我不知道可以将文件保存在哪里。其余代码适用于我放置一些图像的文件。

**注意：**在模拟器（iPad）上它可以正常工作，但在真实设备上我有权限问题。

这是我的代码：

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString: [NSString stringWithFormat:@"http://link_of_my_image", [splitLink objectAtIndex: 1],[splitLink objectAtIndex: 3] ] ]]];

NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];

BOOL test10 = [data1 writeToFile:[NSString stringWithFormat: @"%@/%@/folder/%@",linkSlidesFile, [splitLink objectAtIndex: 1],[splitLink objectAtIndex: 3]] atomically:YES];

NSLog(@"creat Image --------------------- %@ %i",
[NSString stringWithFormat: @"%@/%@/folder/%@",[splitLink objectAtIndex: 0], [splitLink objectAtIndex: 1],[splitLink objectAtIndex: 3]], test10); 
```

日志模拟器：

```
creat Image --------------------- Link_of_image_ipad 1 
```

登录 Ipad：

```
creat Image --------------------- Link_of_image_ipad 0 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:02:14.133

您将能够写入 Documents 目录；将此方法添加到您的类中以获取其路径：

```
+ (NSString *) applicationDocumentsDirectory 
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

# java - 创建 Google 日历请求时出现 NucleusUserException

> ID：10883092
> 
> 赞同：0
> 
> 时间：2012-06-04T14:34:37.153
> 
> 标签：java

我正在尝试让 Google Calendar API 的授权请求正常工作。我似乎获得了一个凭证，一切都很好，但是当我尝试使用它时，我被告知我正在尝试持久化一个已经持久化的对象。

这是授权 servlet 的代码，我在其中授权用户并执行请求（回调被调用一次，后续请求不需要它）。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    somethingTest();
    response.getOutputStream().println("<html><head><title>Hello</title></head><body><p>Hello world!</p></body></html>");
}

void somethingTest(){
    Event event = new Event();
    event.setSummary("appointment");
    event.setLocation("HQ");
    ArrayList<EventAttendee> attendees = new ArrayList<EventAttendee>();
    attendees.add(new EventAttendee().setEmail(OTHER_ATTENDEE));
    event.setAttendees(attendees);

    DateTime start = DateTime.parseRfc3339("2012-06-05T10:00:00.000+01:00");
    DateTime end = DateTime.parseRfc3339("2012-06-05T11:00:00.000+01:00");
    event.setStart(new EventDateTime().setDateTime(start).setTimeZone("CEST"));
    event.setEnd(new EventDateTime().setDateTime(end).setTimeZone("CEST"));
    event.setRecurrence(Arrays.asList("RRULE:FREQ=WEEKLY;UNTIL=20120801T100000+01:00"));

    Calendar calendar = Calendar.builder(HTTP_TRANSPORT, JSON_FACTORY)
            .setApplicationName("CalendarSyncTest/1.0")
            .setHttpRequestInitializer(getCredential()).build();
    try {
        // NEXT LINE THROWS EXCEPTION
        Event createdEvent = calendar.events().insert("primary", event).execute();
        log.trace("Event created: " + createdEvent.getId());
    } catch (IOException e) {
        log.warn("Exception caught mocking about", e);
    }

}

@Override
protected String getRedirectUri(HttpServletRequest req)
        throws ServletException, IOException {
    log.trace("getRedirectUri()");
    GenericUrl url = new GenericUrl(req.getRequestURL().toString());
    url.setRawPath("/google-sync/Callback");
    return url.build();
}

@Override
protected AuthorizationCodeFlow initializeFlow() throws ServletException,
        IOException {       
    log.trace("InitializeFlow()");

    javax.jdo.PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory("transactions-optional");

    return new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT,
            JSON_FACTORY,
            CLIENT_ID, CLIENT_SECRET, 
            Collections.singleton(CalendarScopes.CALENDAR)).setCredentialStore(new JdoCredentialStore(pmf))
            .build();
}

@Override
protected String getUserId(HttpServletRequest req) throws ServletException,
        IOException {
    return USER_EMAIL;
} 
```

当然也有例外：

```
org.datanucleus.exceptions.NucleusUserException: Object "com.google.api.client.extensions.jdo.auth.oauth2.JdoPersistedCredential@1abf87" being inserted has id [USER_EMAIL HERE] yet an object with this id already exists in the datastore!
org.datanucleus.store.xml.XMLPersistenceHandler.insertObject(XMLPersistenceHandler.java:96)
org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2376)
org.datanucleus.state.JDOStateManager.makePersistent(JDOStateManager.java:2352)
org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1840)
org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1689)
org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1554)
org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:740)
org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:765)
com.google.api.client.extensions.jdo.auth.oauth2.JdoCredentialStore.store(JdoCredentialStore.java:47)
com.google.api.client.auth.oauth2.CredentialStoreRefreshListener.makePersistent(CredentialStoreRefreshListener.java:62)
com.google.api.client.auth.oauth2.CredentialStoreRefreshListener.onTokenResponse(CredentialStoreRefreshListener.java:48)
com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:497)
com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:255)
com.google.api.client.http.HttpRequest.execute(HttpRequest.java:746)
com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:182)
com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:170)
com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:163)
com.google.api.services.calendar.Calendar$Events$Insert.execute(Calendar.java:1810)
com.zylinc.core.googleSync.Test.somethingTest(Test.java:78)
com.zylinc.core.googleSync.Test.doGet(Test.java:56)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
com.google.api.client.extensions.servlet.auth.oauth2.AbstractAuthorizationCodeServlet.service(AbstractAuthorizationCodeServlet.java:129)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我发现这一切都非常令人困惑，特别是因为 Google 文档是一大堆相互不完全匹配的已弃用方法。

# jquery - Deferred.done 回调在 done 函数中不起作用

> ID：10883094
> 
> 赞同：1
> 
> 时间：2012-06-04T14:34:50.263
> 
> 标签：jquery

几天来，我一直在努力完成这项工作，这是我的最后一次尝试。

对于发布具有相似目标的不同问题，我深表歉意。

我只是想用最好的方法弄清楚。

事情是这样的；我在另一个页面中有一些数据要在我的初始化函数中使用。

这里的一位成员建议我使用 deferred.done。

它部分工作。**我在其他页面中的数据已加载，如果我有警报（MapData）**，我可以显示它；在初始化函数中。

但是当我尝试在初始化函数中使用该数据进行实际工作时，我得到**MapData.users is undefined**错误。

我不明白，因为当我加载到警报框中时它看起来很好。

请建议！

```
 $(function CheckinMap() {
        $.when($.ajax({
            type: "GET",
            url: "content/home/index.cs.asp?Process=ViewCheckinMap"
        })).done(      function initialize(data) {
            var MapData = data;
            var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);
            var map = new google.maps.Map(document.getElementById('checkinmap'), {
              zoom: 2,
              center: center,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              maxZoom: 4
            });
            var markers = [];
            for (var i = 0; i < MapData.users.length; i++) {
              var location = MapData.users[i];
              var latLng = new google.maps.LatLng(location.latitude,
                  location.longitude);
              var marker = new google.maps.Marker({
                position: latLng
              });
              markers.push(marker);
            }
            var markerCluster = new MarkerClusterer(map, markers);
        });
    }); 
```

这是我需要在初始化函数中使用的数据。

```
{
  "users": [
    {
      "latitude": "48.405163",
      "longitude": "2.684659"
    },
    {
      "latitude": "43.7347242529278",
      "longitude": "7.42198348045349"
    }
  ]
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:40:16.057

您没有`dataType: 'json'`在`$.ajax()`通话中指定；这可能会导致您`data`成为原始文本 JSON 响应，而不是解码对象。

# xml - 在 C# 中序列化 - 每个与新 XmlElelemt 关联的变量属性

> ID：10883099
> 
> 赞同：0
> 
> 时间：2012-06-04T14:34:59.187
> 
> 标签：xml, serialization, xml-serialization

因为前段时间有一个类似的案例，我已经发布了。现在我在下一个港口，不幸的是它现在有点复杂。问题是我将一个类完全转换为XML，这种格式必须是：

```
<ENTITIES>
  <ENTITY name="S40">
    <ATTRIBUTES>
      <ATTRIBUTE name="INSOBJECT">X</ATTRIBUTE>
      <ATTRIBUTE name="INSOBJECTTYP">X</ATTRIBUTE>
    </ATTRIBUTES>
  </ENTITY>
  <ENTITY name="S41">
    <ATTRIBUTES>
      <ATTRIBUTE name="INSOBEZ">X</ATTRIBUTE>
      <ATTRIBUTE name="/SDE/CD_FDATE">X</ATTRIBUTE>
      <ATTRIBUTE name="/SDE/CD_COL_FORM">X</ATTRIBUTE>
      <ATTRIBUTE name="/SDE/CD_APPLNR">X</ATTRIBUTE>
      <ATTRIBUTE name="/SDE/CD_POLBEG">X</ATTRIBUTE>
    </ATTRIBUTES>
  </ENTITY> 
```

问题是这里看起来不错，因为每个变量都转换为 XML 格式，同时需要一个名为“ATTRIBUTES”的新 XmlElement。但是因为我可以创建一个新的项目 WITH 属性，我想到了一个 String.Replace ...不幸的是，我有，但问题是并且不能轻易替换，因为有几个不同的。不幸的是，我也无法切换到 XML 格式，因为这种格式是给我的，并且已经被其他人使用了。

我现在的方式：

```
[System.Xml.Serialization.XmlRoot("ENTITIES")]
public class ivRequester
{

    private s_40[] s40;
    private s_41[] s41;
    private s_42[] s42;
    private s_43[] s43;
    private s_45[] s45;
    private c_99[] c99;

    public s_40[] S40
    {
        get { return s40; }
        set { s40 = value; }
    }
    public s_41[] S41
    {
        get { return s41; }
        set { s41 = value; }
    }
    public s_42[] S42
    {
        get { return s42; }
        set { s42 = value; }
    }
    public s_43[] S43
    {
        get { return s43; }
        set { s43 = value; }
    }
    public s_45[] S45
    {
        get { return s45; }
        set { s45 = value; }
    }
    public c_99[] C99
    {
        get { return c99; }
        set { c99 = value; }
    }

    public class s_40
    {
        public string INSOBJECT = "X";
        public string INSOBJECTTYP = "X";
        public string CD_OLDOBJNR = "X";
    }

    public class s_41
    {
        public string INSOBEZ = "X";
        public string slashSDEslashCD_FDATE = "X";
        public string slashSDEslashCD_COL_FORM = "X";
        public string slashSDEslashCD_APPLNR = "X";
    }

    public class s_42
    {
        public string PARTNER = "X";
        public string PARTNER_EXT = "X";
        public string PARTNER_ADEXT = "X";
    }

    public class s_43
    {
        public string partner = "X";
    }

    public class s_45
    {
        public string PARTNER = "X";
        public string PARTNER_EXT = "X";
        public string PARTNER_ADEXT = "X";
    }

    public class c_99
    {
        public string CODE = "X";
        public string MV_MESSAGE = "X";
        public string MV_MSGTY = "X";
    }

    public string XMLout()
    {
        string returnstring = Program.ObjectToXml(this);

        Console.WriteLine(returnstring);

        string[] toreplace = {"INSOBJECT", "INSOBJECTTYP", "CD_OLDOBJNR", "CD_BRANCH", "PARTNER", "PARTNER_EXT", "PARTNER_ADEXT", ... };

        for (int i = 0; i < toreplace.Length; i++)
        {
            returnstring = returnstring.Replace("<" + toreplace[i] + ">", "<ATTRIBUTE name=\"" + toreplace[i] + "\">");
            returnstring = returnstring.Replace("</" + toreplace[i] + ">", "</ATTRIBUTE>");
            returnstring = returnstring.Replace("<" + toreplace[i] + "/>", "<ATTRIBUTE name=\"" + toreplace[i] + "\"/>");
            returnstring = returnstring.Replace("<" + toreplace[i] + " />", "<ATTRIBUTE name=\"" + toreplace[i] + "\"/>");
        }
        returnstring = returnstring.Replace("slashSDEslash", "/SDE/");
        returnstring = returnstring.Replace("<ENTITIES xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">", "<ENTITIES>");
        string[] EntitiesToReplace = { "S40", "S41", "S42", "S43", "S45", "C99" };
        for (int i = 0; i < EntitiesToReplace.Length; i++)
        {
            returnstring = returnstring.Replace("<" + EntitiesToReplace[i] + ">", "<ENTITY name=\"" + EntitiesToReplace[i] + "\">");
            returnstring = returnstring.Replace("</" + EntitiesToReplace[i] + ">", "</ENTITY>");
            returnstring = returnstring.Replace("<" + EntitiesToReplace[i] + "/>", "<ENTITY name=\"" + EntitiesToReplace[i] + "\"/>");
            returnstring = returnstring.Replace("<" + EntitiesToReplace[i] + " />", "<ENTITY name=\"" + EntitiesToReplace[i] + "\"/>");
        }
        string[] ChangeToAttributes = { "s_40", "s_41", "s_42", "s_43", "s_45", "c_99" };
        for (int i = 0; i < ChangeToAttributes.Length; i++)
        {
            returnstring = returnstring.Replace("<" + ChangeToAttributes[i] + ">", "<ATTRIBUTES>");
            returnstring = returnstring.Replace("</" + ChangeToAttributes[i] + ">", "</ATTRIBUTES>");
            returnstring = returnstring.Replace("<" + ChangeToAttributes[i] + "/>", "<ATTRIBUTES/>");
            returnstring = returnstring.Replace("<" + ChangeToAttributes[i] + " />", "<ATTRIBUTES/>");
        }

        return returnstring;
    }

    public ivRequester XMLin(string XMLCode)
    {
        Console.WriteLine(XMLCode);
        string returnstring = XMLCode;

        string[] toreplace = { "INSOBJECT", "INSOBJECTTYP", "CD_OLDOBJNR", "CD_BRANCH", "PARTNER", "PARTNER_EXT", "PARTNER_ADEXT", "VALID_FROM", "AEND_TMS", "FUNCTION", "USERNAME", "HOSTUSER", "SOURCE", "INSOBEZ", ... };

        for (int i = 0; i < toreplace.Length; i++)
        {
            returnstring = returnstring.Replace("<ATTRIBUTE name=\"" + toreplace[i] + "\">", "<" + toreplace[i] + ">");
            returnstring = returnstring.Replace("</ATTRIBUTE>", "</" + toreplace[i] + ">");
            returnstring = returnstring.Replace("<ATTRIBUTE name=\"" + toreplace[i] + "\"/>", "<" + toreplace[i] + "/>");
            returnstring = returnstring.Replace("<ATTRIBUTE name=\"" + toreplace[i] + "\"/>", "<" + toreplace[i] + " />");
        }
        returnstring = returnstring.Replace("/SDE/", "slashSDEslash");
        returnstring = returnstring.Replace("<ENTITIES>", "<ENTITIES xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">");
        string[] EntitiesToReplace = { "S40", "S41", "S42", "S43", "S45", "C99" };
        for (int i = 0; i < EntitiesToReplace.Length; i++)
        {
            returnstring = returnstring.Replace("<ENTITY name=\"" + EntitiesToReplace[i] + "\">", "<" + EntitiesToReplace[i] + ">");
            returnstring = returnstring.Replace("</ENTITY>", "</" + EntitiesToReplace[i] + ">");
            returnstring = returnstring.Replace("<ENTITY name=\"" + EntitiesToReplace[i] + "\"/>", "<" + EntitiesToReplace[i] + "/>");
            returnstring = returnstring.Replace("<ENTITY name=\"" + EntitiesToReplace[i] + "\"/>", "<" + EntitiesToReplace[i] + " />");
        }

        ivRequester test = new ivRequester();//<--Search for better way to do that... i want to give THIS as return, but that is coming next or somthing else ;)
        try
        {
            XmlSerializer serializer = new XmlSerializer(this.GetType());

            test = (ivRequester)serializer.Deserialize(new StringReader(returnstring)); //<--Search for better way to do that... i want to give THIS as return, but that is coming next or somthing else ;)
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            return test;
        }
        return test;
    } 
```

我以前用 [XmlAttribute ()] 和 [XmlElement ()] 尝试过，但不幸的是我没有进一步的类似的东西。当时间不是那么稀缺的时候，String.Replace 说绝对不适合这样的事情，但是当我打印所有东西时，我想自己无论如何用 <...> 指定不可能发生......当转换为XML 没问题，但不幸的是，将 XML 代码重新写入类是不可行的，因为财务报表都具有相同的名称（和）。因此，要么有一种方法可以序列化（但显然没有）带有属性的 XmlElement 产品，还是我需要一个更好的 XML 解析器，因为节点甚至无法重命名它。-.-

我希望有人给我小费，Szandor

PS：我还尝试了一个名为 ATTRIBUTE 的额外类，然后您必须输入属性名称和值的名称。不幸的是，当第二个 ATTRIBUTES 时间设置为 XmlElement 时，这不起作用，它会崩溃……当我调用 Attribute2 时，它会崩溃，但由于所有 HOT 必须属性，不幸的是无法使用:(

```
public class Attribute
{
    [XmlAttribute("name")]
    public string name;
    [XmlText()]
    public string wert;
}

public class s_40
{
    [XmlElement("ATTRIBUTE")]
    public Attribute INSOBJECT2 = new Attribute() { name = "INSOBJECT", wert = "test" };
    [XmlElement("ATTRIBUTE")]
    public Attribute INSOBJECTTYP2 = new Attribute() { name = "INSOBJECTTYP", wert = "test" };
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:35:21.413

已经通过这种方式解决了，代码真的不多，而且有效：）

```
XmlDocument OriginalXML = new XmlDocument();
XmlDocument ConvertedXML = new XmlDocument();
OriginalXML.LoadXml(XMLCode);
ConvertedXML.LoadXml("<ENTITIES xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"></ENTITIES>");

XmlNode rootNodeOriginal = OriginalXML.SelectSingleNode("/ENTITIES");
XmlNode rootNodeConverted = ConvertedXML.SelectSingleNode("/ENTITIES");
string EntityName = "";
string EntityName2 = "";
foreach (XmlNode EntityNodes in rootNodeOriginal.ChildNodes)
{
    if (EntityNodes.Name == "ENTITY")
    {
        EntityName = EntityNodes.Attributes[0].InnerXml;
        EntityName2 = EntityName.Replace("S","s_").Replace("C","c_");
        XmlNode newNode = ConvertedXML.CreateElement(EntityName);
        rootNodeConverted.AppendChild(newNode);
        ConvertedXML.SelectSingleNode("/ENTITIES/" + EntityName).AppendChild(ConvertedXML.CreateElement(EntityName2));

        if (EntityNodes.FirstChild.Name == "ATTRIBUTES")
            foreach (XmlNode ChildNodeToChange in EntityNodes.FirstChild.ChildNodes)
                if (ChildNodeToChange.Name == "ATTRIBUTE")
                {
                    XmlNode newChildNodes = ConvertedXML.CreateElement(ChildNodeToChange.Attributes[0].InnerXml.Replace("/","slash"));
                    newChildNodes.InnerXml = ChildNodeToChange.InnerXml;
                    ConvertedXML.SelectSingleNode("/ENTITIES/" + EntityName + "/" + EntityName2).AppendChild(newChildNodes);
                }
    }
} 
```

# iphone - 如何从图像中为创建的视频添加声音

> ID：10883104
> 
> 赞同：0
> 
> 时间：2012-06-04T14:35:15.863
> 
> 标签：iphone, xcode

这是我用于从图像创建视频的代码，但我还需要将音轨放回视频。任何帮助都会得到帮助。

```
- (IBAction)saveMovieToLibrary
{
    ImageVideoPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/movie.mp4"]];

    NSLog(@"<><><><>=%@",ImageVideoPath);

    testImageArray = [[NSArray alloc] initWithObjects:
                      [UIImage imageNamed:@"image1.png"], 
                      [UIImage imageNamed:@"image2.png"], 
                      [UIImage imageNamed:@"image3.png"],
                      [UIImage imageNamed:@"image4.png"],
                      [UIImage imageNamed:@"image5.png"], 
                      [UIImage imageNamed:@"image6.png"], 
                      [UIImage imageNamed:@"image7.png"],
                      [UIImage imageNamed:@"image9.png"], 
                      [UIImage imageNamed:@"image10.png"], 
                      [UIImage imageNamed:@"image11.png"], 
                      [UIImage imageNamed:@"image12.png"], nil];

    //  NSLog(@"testImageArray/=%@",testImageArray);

    [self writeImageAsMovie:testImageArray toPath:ImageVideoPath size:CGSizeMake(480, 320) duration:1];
}  

-(void)writeImageAsMovie:(NSArray *)array toPath:(NSString*)path size:(CGSize)size duration:(int)duration 
{
    NSError *error = nil;
    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path] 
                                                           fileType:AVFileTypeMPEG4 
                                                              error:&error];
    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                                   nil];

    AVAssetWriterInput* writerInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo
                                                                          outputSettings:videoSettings] retain];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput                                                                                                                     sourcePixelBufferAttributes:nil];

    NSParameterAssert(writerInput);
    NSParameterAssert([videoWriter canAddInput:writerInput]);

    [videoWriter addInput:writerInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;
    buffer = [self pixelBufferFromCGImage:[[array objectAtIndex:0] CGImage] size:CGSizeMake(480, 320)];
    CVPixelBufferPoolCreatePixelBuffer (NULL, adaptor.pixelBufferPool, &buffer);

    [adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

    int i = 1;
    while (1) 
    {
        if(writerInput.readyForMoreMediaData){

            CMTime frameTime = CMTimeMake( 0, 12);
            CMTime lastTime=CMTimeMake(i, 2);
            CMTime presentTime=CMTimeAdd(lastTime, frameTime);

            if (i >= [array count]) 
            {
                buffer = NULL;
            }   
            else 
            {
                buffer = [self pixelBufferFromCGImage:[[array objectAtIndex:i] CGImage] size:CGSizeMake(480, 320)];
            }          

            if (buffer) 
            {
                // append buffer
                [adaptor appendPixelBuffer:buffer withPresentationTime:presentTime];
                i++;
            } 
            else 
            {

                //Finish the session:
                [writerInput markAsFinished];
                [videoWriter finishWriting];                

                CVPixelBufferPoolRelease(adaptor.pixelBufferPool);

                [videoWriter release];
                [writerInput release];
                NSLog (@"Done");
                break;
            }
        }
    }

    audioFilePath1=[[NSBundle mainBundle]pathForResource:@"Video" ofType:@"mp3"];

    NSLog(@"%@",audioFilePath1);
    NSLog(@"Video File Path=%@",ImageVideoPath);

    [self addAudioToFileAtPath:ImageVideoPath andAudioPath:audioFilePath1];
}

- (CVPixelBufferRef) pixelBufferFromCGImage: (CGImageRef) image size:(CGSize) size{

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                             nil];
    CVPixelBufferRef pxbuffer = NULL;

    CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, size.width,
                                          size.height, kCVPixelFormatType_32ARGB, (CFDictionaryRef) options, 
                                          &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, size.width,
                                                 size.height, 8, 4*size.width, rgbColorSpace, 
                                                 kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
    CGContextConcatCTM(context, CGAffineTransformMakeRotation(0));
    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), 
                                           CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:34:09.683

代码在这里...

```
 AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
   // CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
   AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio 

here the code.

preferredTrackID:kCMPersistentTrackID_Invalid];
    [b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];

__block AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:[videoComposition copy] presetName:AVAssetExportPresetMediumQuality];

`_assetExport.videoComposition = videoComposition;
_assetExport.outputFileType = AVFileTypeQuickTimeMovie;
_assetExport.outputURL = outputFileUrl;

[_assetExport exportAsynchronouslyWithCompletionHandler:^{
    switch (_assetExport.status) {
        case AVAssetExportSessionStatusCompleted:
            // Custom method to import the Exported Video
            NSLog(@"completed video creation!!!");
            [self removeAudioFileFromDocumentsdirectory:outputFilePath1];
            [self removeAudioFileFromDocumentsdirectory:videoOutputPath];
            break;
        case AVAssetExportSessionStatusFailed:
            //
            NSLog(@"Failed video creation:%@",_assetExport.error);

            break;
        case AVAssetExportSessionStatusCancelled:
            //
            NSLog(@"Canceled:%@",_assetExport.error);
            break;
        default:
            break;
    }
}];` 
```

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:59:58.150

使用此代码：

```
AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audioUrl options:nil];
AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:videoUrl options:nil];

AVMutableComposition* mixComposition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio 
                                                                             preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) 
                                ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
                                 atTime:kCMTimeZero error:nil];

AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo 
                                                                                preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
                           ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
                            atTime:kCMTimeZero error:nil];

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition 
                                                                presetName:AVAssetExportPresetPassthrough];   

NSString* videoName = @"export.mov";

NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
NSURL    *exportUrl = [NSURL fileURLWithPath:exportPath]; //url of your video created from image

if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) 
{
   [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
}

_assetExport.outputFileType = @"com.apple.quicktime-movie";
DLog(@"file type %@",_assetExport.outputFileType);
_assetExport.outputURL = exportUrl;
_assetExport.shouldOptimizeForNetworkUse = YES;

[_assetExport exportAsynchronouslyWithCompletionHandler:
^(void ) {      
        // your completion code here
 }       
 }
 ]; 
```

希望有用。`

# javascript - Facebook like 按钮压倒 IE7

> ID：10883106
> 
> 赞同：3
> 
> 时间：2012-06-04T14:35:23.457
> 
> 标签：javascript, facebook

我最近注意到我网站上的 Facebook 点赞按钮似乎压倒了 IE7，而不是其他浏览器。浏览器速度减慢到无法使用的程度。我将虚拟机中的内存增加了三倍，看看是否有帮助，但没有。

标记：

```
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<fb:like show_faces="false" width="35" font="" layout="button_count"></fb:like> 
```

如果我删除这些行，问题就会消失。

我注意到加载漩涡在 IE7 中不断旋转（似乎永远不会完成），所以我打开了 Fiddler。该页面似乎每秒刷新一次。发出 GET 请求以刷新页面，并将 ?fb_xd_fragment 附加到我的查询字符串中。

所有这些请求的引用标头是[http://static.ak.facebook.com/connect/xd_artiber.php?version=6](http://static.ak.facebook.com/connect/xd_artiber.php?version=6)。

JavaScript 错误也会被抛出。

有谁知道更改 Facebook 标签上的任何特定设置是否可以解决问题？有谁知道任何解决方法？

我已经发布了一个示例提琴手（这是我的第一个，所以请多多包涵）：http: [//jsfiddle.net/jhoppe/yQdsT/](http://jsfiddle.net/jhoppe/yQdsT/)如果我去编辑提琴的文本，例如，我可以轻松查看页面性能如何下降。与我页面上的其他内容配对，性能变得难以忍受

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:26:09.597

它与 XML 命名空间一起工作

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" xmlns:fb="http://ogp.me/ns/fb#"> 
```

但后来它在 Chrome 中不起作用。

所以我决定使用用户代理来显示 IE7 的 iframe 版本。

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# virtual-machine - 使用具有 64MB 内存的 VPS 运行一个进程，该进程最多需要 600+ MB 内存

> ID：10883108
> 
> 赞同：0
> 
> 时间：2012-06-04T14:35:26.387
> 
> 标签：virtual-machine, vps, cloud-hosting

我对所有云计算和虚拟机都是新手。我有一个 768MB ram（1GB 可爆破）的 VPS，当我检查我的仪表板进行处理时，我看到平均使用量为 178MB，最大值为 618MB。

如果我在另一个 VPS 上运行相同的脚本会发生什么，但是这个 VPS 有 64MB。它会杀死这个过程吗？还是会使用磁盘空间中的虚拟内存之类的东西？

PHP 中的脚本，及其抓取网页并保存一些文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:42:42.710

它可能会终止进程并引发警报，或者进入交换状态（这会减慢整个系统的速度并且无论如何都会非常明显）；很难说，主要取决于主机的配置。

但是，如果我是主机，而您最终在本应*只有*64MB 的 VPS 上使用了那么多 RAM，那么您的帐户可能会完全终止。

# android - Android：创建 SQLite 数据库和表的最佳位置是什么

> ID：10883110
> 
> 赞同：0
> 
> 时间：2012-06-04T14:35:31.977
> 
> 标签：android, sqliteopenhelper

我必须在我的 android 应用程序中创建近 5-6 个表。创建 SQLite 数据库和 5-6 个表的最佳位置是什么？我可以在初始活动启动时编写所有这些逻辑（使用 SQLite 开放辅助方法），但如果我这样做，它将在每次初始活动启动时被调用。这意味着每次应用程序启动时都会执行这些数据库和表的创建逻辑。任何人都可以告诉最佳实践来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:43:46.030

如果您编写一个类来扩展 SQLiteOpenHelper 并在 onCreate 方法中创建您的表，它将只执行一次。仅当您从设备中完全删除数据/应用程序时，助手才会重新创建数据。

来自[developer.android.com：](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29)第一次创建数据库时调用。这是表的创建和表的初始填充应该发生的地方。

给你一些更多的信息。在用于扩展 SQLiteOpenHelper 的类的构造函数中，调用超级构造函数，它接受一些参数。其中之一是数据库版本。

如果传递给超级构造函数的这个 db_version 与最后传递的不同，则调用 onUpgrade 方法，在 onUpgrade() 方法中可以调用 onCreate()

所以：

1.  删除数据/应用
2.  导致调用 onUpgrade 调用 onCreate()

是创建/更新/删除数据库的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:43:27.130

您可以在主要活动中创建数据库和表

但在创建数据库之前，您可以检查

```
if(exits())
{
   // do not create
}
else
{
   // create here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:43:47.560

Personnaly，我使​​用选项 : `CREATE TABLE IF NOT EXISTS`。

所以打开的助手有这个参数：

```
 private static final int VERSION_BDD = 1; 
```

我认为 openHelper 不会在每次启动时重新创建每个表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:17:15.140

您可以使用扩展 SQLiteOpenHelper 的内部类并覆盖方法 public void onCreate(SqLiteDatabase sqlLiteDatabase) 和 public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion)

当磁盘中不存在数据库并且辅助类需要创建一个新数据库时调用 onCreate

当数据库版本不匹配时调用 onUpgrade。磁盘上的db版本需要升级到newVersion

```
private static final class PatientDatabaseHelper extends SQLiteOpenHelper {

    private static final String TAG = "PatientProvider";

    private static final String DATABASE_NAME = "myPatient.db";
    private static final int DATABASE_VERSION = 1;
    private static final String PATIENT_TABLE = "PATIENT";

    private static final String CREATE_TABLE_PATIENT =
            "create table " + PATIENT_TABLE + " ("
                    + PATIENT_KEY_ID + " integer primary key autoincrement, "
                    + PATIENT_NAME + " TEXT NOT NULL, "
                    + PATIENT_FIRST_NAME + " TEXT NOT NULL, "
                    + PATIENT_TEL + " TEXT, "
                    + PATIENT_GSM1 + " TEXT, "
                    + PATIENT_GSM2 + " TEXT, "
                    + PATIENT_BIRTHDATE + " DATE); ";

    public PatientDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        sqLiteDatabase.execSQL(CREATE_TABLE_PATIENT);
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
       //simple case sample - droppin the table
       sqLiteDatabase.execSQL("DROP TABLE IF IT EXISTS " + PATIENT_TABLE);

      //Create a new One
      onCreate(sqLiteDatabase);

    }
} 
```

取决于 android 的目标版本，但我认为一个好的方法是使用 ContentProvider [http://developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

# ruby-on-rails - 通过渲染传递变量

> ID：10883114
> 
> 赞同：2
> 
> 时间：2012-06-04T14:35:47.607
> 
> 标签：ruby-on-rails, ruby

我正在制作嵌套表单，就像在 railscasts 中完成的一样，并且渲染有问题。在我的表格中，我有

```
 <% form_for @question, :url => user_questions_path, :html => {:multipart => true} do |f| %>

          <%= f.label :name %>
          <%= f.text_field :name, :class => "text_input" %>
          <%= f.label :description %>
          <%= f.text_area :description, :cols => "1", :rows => "1", :class => "textarea" %>

          <div id="reg">
           <%= render :partial => "user_form", :f => f %>
          </div>

          ...
<% end %> 
```

在我的 user_form 文件中，我有

```
<% f.fields_for :user do |builder| %>
             <%= builder.label :email %>
             <%= builder.text_field :email, :class => "text_input" %>
             <%= builder.label :password %>
             <%= builder.text_field :password, :class => "text_input" %>
             <%= builder.label :password_confirmation %>
             <%= builder.text_field :password_confirmation, :class => "text_input" %>
             <% builder.fields_for :user_profile, @question.user.user_profile || @question.user.build_user_profile do |u| %>
                 <%= u.label :secondname %>
                 <%= u.text_field :secondname, :class => "text_input" %>
                 <%= u.label :firstname %>
                 <%= u.text_field :firstname, :class => "text_input" %>
             <% end %>
<% end %> 
```

我在部分的第一行有错误

> 未定义的局部变量或方法“f”

我做错了什么？（我使用的是rails 2.3，但也使用了cast rails 2）。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:45:25.257

我想你可能需要改变

```
<%= render :partial => "user_form", :f => f %> 
```

到以下之一：

```
<%= render "user_form", :f => f %>
<%= render :partial => "user_form", :locals => {:f => f} %> 
```

# java - 从 Java 执行查询时有什么更好的方法

> ID：10883115
> 
> 赞同：1
> 
> 时间：2012-06-04T14:35:48.230
> 
> 标签：java, database

我有以下疑问。当您必须从 Java 应用程序查询数据库时，有几种方法可以做到这一点。我想出了一些方法，但每个方法都有一个缺点。

第一个是，你有一个类，例如。`QueryManager`它为您提供查询功能，例如`executeUpdate(...)`隐藏`executeQuery(...)`连接管理的详细信息等（一种[*外观模式*](http://en.wikipedia.org/wiki/Facade_pattern)）。当您需要与数据库交互时，您会将查询作为字符串传递并管理`ResultSet`.

我看到的问题是，如果数据库发生变化，无论是 DBMS 还是数据库本身，您最终都会一个接一个地修改 SQL。我认为这是一个巨大的依赖。此外，您正在向所有人展示您的数据库的结构，并且您正在让每个班级都处理`ResultSet`. 另一方面，您可以通过使用此方法实现更高的模块化，因为您的类的模型（我是*[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)*的粉丝）可以具有包可见性。

我想到的第二个想法是创建一个`QueryManager`类，它不会为您提供查询方法，而是为您提供所需的方法。换句话说，每次你需要使用数据库时，你都会在这个类中创建一个方法，里面有SQL，它会返回你需要的信息。但是，我们在这里面临的问题是，您必须在返回`ResultSet`所需数据的一个或一个模型之间做出选择。
前者将使您的类对 DB 的依赖比在前面的示例中要少，因为现在与 DBMS 没有广泛传播的依赖关系，因为所有 SQL 都包含在一个类/文件中。但是，它仍然存在与 DB 结构的依赖关系，并且您也在向所有人公开您的 DB 结构。
后者意味着这些模型不再是包可见性，它们必须是公共的，允许任何类修改它们，并破坏封装。

有没有其他方法可以解决所有以前的问题？如果不是，您认为哪种方法更好？

我不认为有绝对的答案（也许有），但我必须说，我们期待 DB 的结构和 DBMS 的结构发生变化。这可能有助于您的回答。但是尽量让它尽可能通用，因为我可能在其他项目中也有同样的疑问，但没有同样的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:42:02.710

我不喜欢你的任何一种方法。

您可以编写一个处理所有这些的单一接口：通用 DAO。这是一个简单的示例，它并不打算成为完整的答案，因为它不允许临时查询或映射到任意对象，但它是一个开始：

```
public interface GenericDao<K, V> {
    List<V> find();
    V find(K key);
    K save(V value);
    void update(V value);
    void delete(V value);
} 
```

您应该在持久性和模型类之间有一个清晰的接口；后者不必知道前者。

您不应该允许`ResultSet`或`Statement`泄漏出持久层。

您应该有一个获取连接和管理事务的服务层。

您应该以这样一种方式编写 SQL，即切换数据库（如果有的话应该很少发生）就像更改 JDBC 驱动程序 JAR 和连接参数一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:43:45.797

第二个很好：您应该在数据访问对象 (DAO) 中提取您的数据访问方法，它将应用程序的其余部分与持久性相关的问题隔离开来。而且 DAO 绝对应该返回对象，而不是结果集。

这提供了以下优点：

*   关注点和责任的脱钩
*   当架构改变时，应用程序的其余部分更容易演变
*   当您选择使用 ORM 而不是 JDBC 访问数据库时，应用程序的其余部分更容易演变
*   更容易对查询（以及一般的持久层）进行单元测试，因为持久性代码没有与功能代码混合
*   业务（服务）层的单元测试更容易，因为它允许注入模拟 DAO 来提供数据，而不是需要数据库中的真实数据来测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:40:10.573

我建议为所有实体创建 DAO 类（[http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)），这将隐藏 SQL/HQL/里面的任何东西。它们将返回对象模型，因此业务逻辑类将不关心查询/从数据库/等中获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:43:30.977

我认为您所追求的是[数据访问对象](http://en.wikipedia.org/wiki/Data_access_object)(DAO) 模式。如果您使用像[Hibernate](http://www.hibernate.org/)这样的对象关系映射框架，您的 DAO 实际上可以[直接指定数据库模式](http://java.dzone.com/articles/hibernate-3-annotations)（我认为这非常简洁）。否则，通常会提供一组手工制作的 DAO 类，这些类抽象出所有底层数据库关注点（例如，DAO 类不应返回 ResultSet）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T14:45:02.037

我认为我们必须使用两种方法进行查找：可更新数据库和只读数据库。

如果您想在数据库中插入/更新/删除某些内容，我认为如果不了解您的数据库如何：名称、数据类型......

但是，另一方面，如果您只想在数据库中搜索，有一个很好的方法可以实现这一点：使用数据库视图。您可以有很多视图，每个视图都包含您需要的所有数据，但没有人需要确切知道视图背后有哪些数据。您可以限制某些用户只能看到视图，而不是原始表，因此您可以“隐藏”您的真实数据库结构。

我认为这不仅仅是 Java 方法：它是一种数据库 + java 方法。

# java - 将四个 CMYK 图像合并为一个 RGB 图像 Java

> ID：10883120
> 
> 赞同：0
> 
> 时间：2012-06-04T14:36:04.130
> 
> 标签：java, image, image-processing, bufferedimage, java-2d

提前感谢您可以为我提供的任何帮助，并为我的英语不好感到抱歉。

我知道关于这个话题有很多问题，但是我在所有的互联网上（以及 StackOverflow 也是）看了很多，但我还没有找到任何答案......

我有四个图像；它们中的每一个都在 TYPE_BYTE_GRAY 颜色模型中。我已经使用以下代码加载了这四个图像：

```
int numElems = 4;
BufferedImage[] img = new BufferedImage[numElems];
for(int i=0;i<numElems;i++){
    FileInputStream in = new FileInputStream(args[i]);
    img[i] = ImageIO.read(in);
    in.close();
} 
```

只是 ImageIO 读取...我需要将四个图像“合并”为一个 RGB 图像...每个图像都是 CMYK 图像的一个通道。所有这些图像都具有相同的尺寸。我已使用以下代码将四个图像转换为一个 CMYK 图像：

```
for(int j=0;j<img[0].getHeight();j++){
    //Read current point color...
    for(int k=0;k<numElems;k++){
        colPunto[k] = (img[k].getRGB(i, j) & 0xFF);
    }

    int colorPunto = convertComponentsRGB(colPunto);

    //Now, I set the point...
    out.setRGB(i, j, colorPunto);
    }
} 
```

这个函数“convertComponentsRGB”只是将 CMYK 颜色转换为 RGB 颜色的自然数学......

```
function convertComponentsRGB(int[] pointColor){
float cyan = (float)pointColor[0] / (float)255;
float magenta = (float)pointColor[1] / (float)255;
float yellow = (float)pointColor[2] / (float)255;
float black = (float)pointColor[3] / (float)255;

float c = min(1f,cyan * (1f - black) + black); //minimum value
float m = min(1f,magenta * (1f - black) + black); //minimum value
float y = min(1f, yellow * (1f - black) + black); //minimum value

result[0] = Math.round(255f*(1f - c));
result[1] = Math.round(255f*(1f - m));
result[2] = Math.round(255f*(1f - y));

    return (result[0]<<16) | (result[1]<<8) | result[2];
} 
```

这里的问题是......速度。处理一张图像需要 12 秒，因为我们必须读取每个像素并写入每个像素，而且我认为“getRGB”和“setRGB”函数不是很快（或者，这只是实现这一点的最佳方式） .

¿ 我怎样才能做到这一点？我已经阅读了很多关于 ColorModel、过滤器的内容，但我仍然不明白如何在更好的时间实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:44:45.410

您可以使用[`getData`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#getData%28%29)和[`setData`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#setData%28java.awt.image.Raster%29)来加快对像素的访问速度与.`getRGB`和`setRGB`.

无需将 CMYK 转换为浮点数并返回，您可以直接使用像素值：

```
function convertComponentsRGB(int[] pointColor){
    int r = max(0, 255 - (pointColor[0] + pointColor[3]));
    int g = max(0, 255 - (pointColor[1] + pointColor[3]));
    int b = max(0, 255 - (pointColor[2] + pointColor[3]));

    return (r<<16) | (g<<8) | b;
} 
```

# sql - 用逗号连接字符串

> ID：10883121
> 
> 赞同：2
> 
> 时间：2012-06-04T14:36:07.570
> 
> 标签：sql, sql-server, tsql

我正在尝试用逗号构建字符串，但我得到了额外的空间。如何删除 zipcode 和 country_name 之间的多余空格？这是我的字符串。谢谢你的任何建议。

```
SELECT
    (COALESCE(address + ', ', '') +
    COALESCE(city + ', ', '') +
    COALESCE(state_code + ' ', '') +
    COALESCE(zipcode + ' ', '') +
    COALESCE(country_name + '', '')) address
from table1
where a_id = 2 
```

结果如下：

```
tewt, test ct, DE 4444                 United States 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:38:49.013

您可以使用 RTRIM 函数从变量右侧删除空格。还要检查 LTRIM 的左侧情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:06:36.003

我会将表列数据磁带从 char(x) 更改为 varchar(x) 或从 nchar(x) 更改为 nvarchar(x)。并更改数据，使其不包含空格。只需执行一次并进行更改，以便应用程序不再存储空白。

char(x) 和 nchar(x) 我只会在有固定长度的字符串时使用，但情况似乎并非如此。

# c++ - 如何要求重启firefox？

> ID：10883122
> 
> 赞同：3
> 
> 时间：2012-06-04T14:36:08.850
> 
> 标签：c++, windows, winapi

我创建了一个 c++ 程序，它还安装了一个 firefox 扩展。因此，要使此扩展程序正常工作，他需要重新启动 Firefox。

那么，当用户使用它时，我如何要求重新启动 Firefox 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:45:31.487

This kind of looks like a duplicate to this question: [winapi - How can I get a process handle by its name in C++](https://stackoverflow.com/questions/865152/how-can-i-get-a-process-handle-by-its-name-in-c). Essentially, what you'd be looking to do is "find" the process "firefox.exe" (in place of "target.exe") and if finding it is successful, you put up a warning dialogue box to close firefox and re-open. If not, you just continue with the install or whatever. Hope this helped!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:46:33.363

Find the main window of Firefox using its caption. I guess Firefox appends the title of the current page to the caption of the main window, so `FindWindow` is not enough. Try to enumerate top-level windows using `EnumWindows`, and find the one containing "Mozilla Firefox" in the caption. If you have the window handle, send a `WM_CLOSE` message to it (use `PostMessage` which waits for the target window to process the message), and wait for it to disappear. You may get a popup, find and close it the same way. If the main Firefox window is still open after a few seconds (try to find it repeatedly), you may call `TerminateProcess` (you will need `GetWindowThreadProcessId` and `OpenProcess` for this). When the window is closed, restart Firefox by calling `CreateProcess`. (There are lots of examples for all these API functions on the Web.)

# algorithm - BST 到 AVL 算法的最坏情况旋转次数？

> ID：10883126
> 
> 赞同：0
> 
> 时间：2012-06-04T14:36:32.657
> 
> 标签：algorithm, time-complexity, binary-search-tree, avl-tree

我在下面有一个基本算法，我知道最坏情况的输入 BST 是从插入到仅一侧退化为链表的输入。

我如何计算这个 BST 到 AVL 转换算法的旋转次数的最坏情况复杂度？

```
IF tree is right heavy
{
  IF tree's right subtree is left heavy
  {
     Perform Double Left rotation 
  }
  ELSE
  {
     Perform Single Left rotation
  }
}
ELSE IF tree is left heavy
{
  IF tree's left subtree is right heavy
  {
     Perform Double Right rotation
  }
  ELSE
  {
     Perform Single Right rotation
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:58:45.220

如果单轮和双轮旋转需要恒定时间`O(1)`，那么对于最坏情况下的大小输入，`n`它将在所有节点上执行单轮（或双轮，取决于您的输入链表是左侧还是右侧）。所以它会是：

```
O(1) + O(1) + ... + O(1) # n times for worst case 
```

这使您的算法`O(n)`适用于最坏的情况。

# forms - MS-Access，将信息添加到一对多关系的表单

> ID：10883128
> 
> 赞同：0
> 
> 时间：2012-06-04T14:36:41.163
> 
> 标签：forms, ms-access, one-to-many

我有一个带有订单的访问表和一个带有 itemId 的子表。它有一对多的关系。

我想创建一个将 itemId 添加到选定订单（已经存在）的表单。

这就是我期望它的样子：

```
Order:        [            ]
ItemId:       [            ]
Measurement1: [            ]
Measurement2: [            ]

        [Save-button] 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:51:25.943

Subforms are the politically correct way to go IF you want users to have access to the order screen. If users do not need access to the order details directly, only to items, then you could put a combo-box for

```
 Order: [              [V]] 
```

which has its control source as a query for your order ID in the orders table. Link that to your Orders field in the Item table and it will store the order as a subform would, without letting the user see details of the order.

However, if you want multiple items shown for a selected order, use subforms (having a subform which is multiple-item)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:07:17.580

查看[子表单](http://office.microsoft.com/en-us/access-help/about-subforms-HP005188395.aspx)。订单表将用于主窗体，项目将位于子窗体上。Access 在处理 Items 记录中的 OrderID 键方面做得很好。

# asp.net-mvc-3 - Manage multiple calls of Membership.GetUser().ProviderUserKey;

> ID：10883129
> 
> 赞同：1
> 
> 时间：2012-06-04T14:36:49.217
> 
> 标签：asp.net-mvc-3, security, model-view-controller, asp.net-membership

I was thinking yesterday how to solve this issue, because everything what i give or check about user is depended of his ProviderUserKey (ID).

So i made one static function like

```
public static Guid GetUserID()
{
    string UserID = string.Empty;

    if(HttpContext.Current.Session["UserID"] != null)
    {
        UserID = HttpContext.Current.Session["UserID"].ToString();
    }

    if(!string.IsNullOrEmpty(UserID))
    {
        return new Guid(UserID);
    }

    UserID = Membership.GetUser().ProviderUserKey.ToString();
    HttpContext.Current.Session["UserID"] = UserID;
    return new Guid(UserID);
} 
```

Main point of this class is to reduce database connections to check/get user ID.

My problem with this function is not that this is not working, my problem is what if logged user log out and log with another account?

Or Is it better to add session value on log in and clear session value on log out?

Where you can see any other problem with this kind of "Get User ID"?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:25:41.207

If you log the user out then you should also be killing the session. When you login as another user you would also have the session reinitialized.

Note you'll want to keep the session and forms auth timeouts (assuming you are using forms auth) in sync with each other:

[How can I handle forms authentication timeout exceptions in ASP.NET?](https://stackoverflow.com/questions/7586469/how-can-i-handle-forms-authentication-timeout-exceptions-in-asp-net)

This should help keep the session in line with the forms auth token. You'll in turn need to kill the session on logout and intialize it upon login.

Another alternative is to implememt your own membership provider that caches this key to prevent constant db hits.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:11:04.747

您是否尝试过使用 ProfileProvider？

您可以使用和自定义特殊属性，这由每个用户的会话管理。

获取值的示例：

```
HttpContext.Profile.GetPropertyValue["CustomProperty"] 
```

在本视频中，您可以轻松实现、创建、配置和使用...

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-profile-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-profile-provider)

# ios - Test my Titanium application on multiple iPhone devices not via iTunes?

> ID：10883131
> 
> 赞同：1
> 
> 时间：2012-06-04T14:36:56.017
> 
> 标签：ios, xcode, testing, titanium, itunes

I'd like to test my application made by Titanium mobile on multiple devices.

The issue is, I do not care whatever would happen on my iphone, but not on the other iphones. Actually, I just have only one iphone, but I need to test on more than several devices (iPhone, iPhone 4, iPad, iPod) so I now borrow some of them from my friends. Since my friends seriously do not want me to mess their devices up, I need to do test with no trouble such as losing their applications data.

and I did some research about this, and now I understand if I import my application to their devices through the right way formally recommended by appcelerator, those devices will lose their individual data because it's implemented via my iTunes.

Is there any good way to achieve my testing ?

I would really appreciate it if anyone show the way.

Many thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:43:30.307

您应该尝试[广告分发](https://stackoverflow.com/questions/5295890/iphone-ad-hoc-build-using-xcode-4)：

> 通过 Ad Hoc 分发，您可以与多达 100 位其他 iPad、iPhone 或 iPod touch 用户共享您的应用程序。通过电子邮件或将其发布到网站或服务器，用户可以下载并安装您的应用程序。

或查看[TestFlight](https://testflightapp.com/)

> 为移动开发人员、经理和测试人员提供的免费测试服务。

# ajax - How can a JSF/ICEfaces component's parameters be updated immediately?

> ID：10883133
> 
> 赞同：1
> 
> 时间：2012-06-04T14:37:04.487
> 
> 标签：ajax, jsf, xhtml, components, icefaces

I have an ICEfaces web app which contains a component with a property linked to a backing bean variable. In theory, variable value is programmatically modified, and the component sees the change and updates its appearance/properties accordingly.

However, it seems that the change in variable isn't "noticed" by the component until the end of the JSF cycle (which, from my basic understanding, is the [render response phase](http://www.ibm.com/developerworks/library/j-jsf2/)).

The problem is, I have a long file-copy operation to perform, and I would like the the inputText component to show a periodic status update. However, since the component is only updated at the render response phase, it doesn't show *any* output until the Java methods have finished executing, and it shows it all changes accumulated at once.

I have tried using `FacesContext.getCurrentInstance().renderResponse()` and other functions, such as `PushRenderer.render(String ID)` to force XmlHttpRequest to initialize early, but no matter what, the appearance of the component does not change until the Java code finishes executing.

One possible solution that comes to mind is to have an invisible button somewhere that is automatically "pressed" by the bean when step 1 of the long operation completes, and by clicking it, it calls step 2, and so on and so forth. It seems like it would work, but I don't want to spend time hacking together such an inelegant solution when I would hope that there is a more elegant solution built into JSF/ICEfaces.

Am I missing something, or is resorting to ugly hacks the only way to achieve the desired behavior?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T19:54:30.033

多线程是缺少的链接，与 PushRenderer 和 PortableRenderer 结合使用（请参阅[http://wiki.icesoft.org/display/ICE/Ajax+Push+-+APIs](http://wiki.icesoft.org/display/ICE/Ajax+Push+-+APIs)）。

现在，我的支持 bean 中有三个线程——一个用于执行长操作，一个用于轮询状态，一个“主”线程用于生成新线程并将 UI 控制返回给客户端浏览器。

一旦主线程启动执行和轮询线程，它就会终止并完成原始 HTTP 请求。我的 PortableRenderer 被声明为`PortableRender portableRenderer;`并且在我的 init() 方法（由类构造函数调用）中包含：

```
PushRenderer.addCurrentSession("fullFormGroup");    
portableRenderer = PushRenderer.getPortableRenderer(); 
```

对于线程部分，我`implements Runnable`在我的类中使用，并且为了在单个类中处理多个线程，我遵循了这个 StackOverflow 帖子：[如何在一个类中处理多个线程？](https://stackoverflow.com/questions/2081747/how-to-deal-with-multiple-threads-in-one-class)

这是一些源代码。我无法透露我使用的明确源代码，但这是一个简化版本，不会透露任何机密信息。我还没有测试过它，我在 gedit 中编写了它，所以它可能有一两个语法错误，但它至少应该让你朝着正确的方向开始。

```
public void init()
{
    // This method is called by the constructor.
    // It doesn't matter where you define the PortableRenderer, as long as it's before it's used.
    PushRenderer.addCurrentSession("fullFormGroup");
    portableRenderer = PushRenderer.getPortableRenderer();
}   

public void someBeanMethod(ActionEvent evt)
{
    // This is a backing bean method called by some UI event (e.g. clicking a button)
    // Since it is part of a JSF/HTTP request, you cannot call portableRenderer.render

    copyExecuting = true;

    // Create a status thread and start it

    Thread statusThread = new Thread(new Runnable() {
        public void run() {
        try {
                        // message and progress are both linked to components, which change on a portableRenderer.render("fullFormGroup") call
            message = "Copying...";
            // initiates render. Note that this cannot be called from a thread which is already part of an HTTP request
            portableRenderer.render("fullFormGroup"); 
            do {
                progress = getProgress();
                portableRenderer.render("fullFormGroup"); // render the updated progress
                Thread.sleep(5000); // sleep for a while until it's time to poll again
            } while (copyExecuting);
            progress = getProgress();
            message = "Finished!";
            portableRenderer.render("fullFormGroup"); // push a render one last time
        } catch (InterruptedException e) {
            System.out.println("Child interrupted.");
        }
    });
    statusThread.start();

    // create a thread which initiates script and triggers the termination of statusThread
    Thread copyThread = new Thread(new Runnable() {           
        public void run() {
        File someBigFile = new File("/tmp/foobar/large_file.tar.gz");
            scriptResult = copyFile(someBigFile); // this will take a long time, which is why we spawn a new thread
            copyExecuting = false; // this will caue the statusThread's do..while loop to terminate

        } 
    });
    copyThread.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:29:00.560

我建议查看我们的展示演示：

[http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=progressBarBean](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=progressBarBean)

在进度条示例列表下是一个名为 Push 的示例。它使用 Ajax Push（ICEfaces 提供的一项功能）来做我认为你想要的。

此页面上还有一个名为 Easy Ajax Push 的教程，它将引导您完成一个使用 Ajax Push 的简单示例。

[http://www.icesoft.org/community/tutorials-samples.jsf](http://www.icesoft.org/community/tutorials-samples.jsf)

# php - Accepting login number with changing prefix with PHP

> ID：10883135
> 
> 赞同：-6
> 
> 时间：2012-06-04T14:37:10.970
> 
> 标签：php, forms, login, prefix, exact-match

I have a flatfile database file with the following numbers:

```
1
2
3
4
5
etc. 
```

The numbers correspond to a USER ID where a person would enter any of those numbers above, in order to login.

I do not want to modify my file. My question is, if there's a way to add an accepted "PREFIX".

For example, a user logs in with:

```
abcd1
abcd2
abcd3
abcd4
abcd5
etc. 
```

But my data file is still, but does not contain the prefix "abcd":

```
1
2
3
4
5
etc. 
```

It would also have to be a "perfect" match. The tests I have done so far have not been conclusive

I guess using an accepted "array" would be the way to go?

My present login PHP script is this, but **only works on an exact match** for a number, I would like to add a prefix that I can change later on:

```
<?php
date_default_timezone_set('America/New_York');
$today = mktime(0, 0, 0, date("m"), date("d"), date("y"));

$currenttime = date('h:i:s:u');
list($hrs,$mins,$secs,$msecs) = split(':',$currenttime);

echo "<center><form action=\"" . $PHP_SELF . "\" method='post'><input onkeypress=\"return isNumberKey(event)\" type='text' name='uNum' /><input type='submit' value='Submit' /></form></center>";

if(!$_POST['uNum']) {
die('<center>Entrer votre numéro d\'inscription pour finaliser votre demande.</center>');
}

$numbers = file_get_contents("datafile.txt");

$uNumber = $_POST['uNum'];

if ( @preg_match( "/([^0-9]{$uNumber}[^0-9])/", $numbers ) ) {

print_r( "<center>The number $uNumber is good. You may proceed.</b><br><br>" );

file_put_contents($_POST['uNum'].".txt",$_POST['uNum'] . "\nUsed on ".date("m/d/Y", $today). (" $hrs:$mins:$secs")."");

include 'validate_process.php';

if (isset($_POST['uNumber']))
{

$uNumber = $_GET['inscripnum1'];
}

} else {
echo "<center>Sorry, this login number does not exist.</center>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:57:04.737

在进行 preg_match 之前，请检查输入是否具有所需的前缀并将其删除。

```
$uNumber = $_POST['uNum'];

$prefix = "abcd"; //you can change the prefix anytime
$length = strlen($prefix);
if(substr($uNumber, 0, $length) === $prefix) {
    $uNumber = substr($uNumber,$length);
} else {
    $uNumber = ""; //empty or some value that is not a valid ID stored in your flatfile.
}

//Now use $uNumber in preg_match()

if ( @preg_match( "/([^0-9]{$uNumber}[^0-9])/", $numbers ) ) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:42:24.113

也许：

`if ( @preg_match( "/([^0-9]{abcd$uNumber}[^0-9])/", $numbers ) || @preg_match( "/([^0-9]{$uNumber}[^0-9])/", $numbers ) )`

认为这会奏效吗？我从不使用 preg_match

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:43:06.757

这是许多方法之一。创建一个文件内容数组并循环遍历该数组：

```
$numbers = file('datafile.txt');
$result = false;
foreach($numbers as $n) {
  if ('abcd'.$n === $uNumber) {
    $result = true;
    break;
  } 
}

if ($result) {
  // OK!
} 
```

这是另一个，我将文件作为数组加载，为每个元素添加前缀，然后检查提供的值是否在该数组中：

```
$numbers = file('datafile.txt');
$result = in_array($uNumber,
                   array_map(function($e) { return 'abcd'.$e; },
                             $numbers)
                  ); 
```

# javascript - Change Form Field Visibility in ModalPopupExtender

> ID：10883140
> 
> 赞同：0
> 
> 时间：2012-06-04T14:37:17.157
> 
> 标签：javascript, asp.net, field, visibility, modalpopupextender

Wanted to know if there's a way to change a form field's visibility within a ModalPopup (from ModalPopupExtender) based upon a DropDownList's change in value. This page's technique doesn't seem to work: [Change visibility of ASP.NET label with JavaScript](https://stackoverflow.com/questions/7773/change-visibility-of-asp-net-label-with-javascript).

Javascript:

```
<script type="text/javascript">
    function ShowHide() {
        if(document.getElementById('<%=DdlASVisibilityTest.ClientID%>') == "Show") {
            document.getElementById('<%=LblASBillingName.ClientID%>').style.display = 'inherit';
            document.getElementById('<%=TxtASBillingName.ClientID%>').style.display = 'inherit';
        }
        if(document.getElementById('<%=DdlASVisibilityTest.ClientID%>') == "Hide") {
            document.getElementById('<%=LblASBillingName.ClientID%>').style.display = 'none';
            document.getElementById('<%=TxtASBillingName.ClientID%>').style.display = 'none';
        }
    {
</script> 
```

asp.net:

```
<asp:ModalPopupExtender OKControlID="BtnASOkay" CancelControlID="BtnASCancel" BackgroundCssClass="modalBackground" DropShadow="True" ID="BtnAddSupplier_ModalPopupExtender" runat="server" DynamicServicePath="" Enabled="True" TargetControlID="BtnAddSupplier" PopupControlID="PnlAddSupplier">
    <Animations>
        <OnShown>
            <FadeIn Duration="0.25" Fps="40" />
        </OnShown>
        <OnHiding>
            <FadeOut Duration="0.25" Fps="40" />
        </OnHiding>
</Animations>
</asp:ModalPopupExtender>
<asp:RoundedCornersExtender ID="RCE" runat="server" TargetControlID="PnlAddSupplier" Radius="6" Corners="All" />
<asp:Button ID="BtnAddSupplier" runat="server" CssClass="buttonsmall" Text="Add Suplier" />
<asp:Panel ID="PnlAddSupplier" CssClass ="panel" runat="server">
    <div class="ASHeader">
        <asp:Label ID="LblASHeader" runat="server" Text="Add Supplier" CssClass="bodytxt" Font-Bold="True"></asp:Label>
    </div>
    <div class="ASInputs">
        <asp:Table runat="server">
            <asp:TableRow ID="TRASVisibilityTest" runat="server">
                <asp:TableCell ID="TCLblASVisibilityTest" runat="server"><asp:Label ID="LblASVisibilityTest" runat="server" Text="Test Visibility" CssClass="bodytxt" Font-Bold="False"></asp:Label></asp:TableCell>
                <asp:TableCell ID="TCDdlASVisibilityTest" runat="server"><asp:DropDownList ID="DdlASVisibilityTest" runat="server" onchange="ShowHide()">
                    <asp:ListItem>Show</asp:ListItem>
                    <asp:ListItem>Hide</asp:ListItem>
                </asp:DropDownList></asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TRASBillingName" runat="server">
                <asp:TableCell ID="TCLblASBillingName" runat="server"><asp:Label ID="LblASBillingName" runat="server" Text="Supplier's Billing Name" CssClass="bodytxt" Font-Bold="False" style="display: none;"></asp:Label></asp:TableCell>
                <asp:TableCell ID="TCTxtASBillingName" runat="server"><asp:TextBox ID="TxtASBillingName" CssClass="bodytxt" runat="server" style="display: none;"></asp:TextBox></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
    </div>
    <div class="DivASControls" align="center">
        <asp:Button ID="BtnASOkay" runat="server" CssClass="buttonsmall" Text="Add Supplier" style="display: none;" />
        <asp:Button ID="BtnASCancel" runat="server" CssClass="buttonsmall" Text="Cancel" />
    </div>
</asp:Panel> 
```

Thanks a lot in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:17:26.713

看起来您没有正确检查下拉列表的值/文本。相反，您将控件本身与“显示”或“隐藏”的值进行比较。尝试将您的代码更改为此，看看它是否有帮助：

```
<script type="text/javascript">
    function ShowHide() 
    {
        var visibilityElem = document.getElementById('<%=DdlASVisibilityTest.ClientID%>');
        var visibilityElemText = visibilityElem.options[visibilityElem.selectedIndex].text;
        var display = (visibilityElemText == 'Show') ? 'inherit' : 'none';

        document.getElementById('<%=LblASBillingName.ClientID%>').style.display = display;
        document.getElementById('<%=TxtASBillingName.ClientID%>').style.display = display;
    }
</script> 
```

# css - CSS Rotate 2 objects

> ID：10883141
> 
> 赞同：0
> 
> 时间：2012-06-04T14:37:18.983
> 
> 标签：css, transform, rotation

i've got very strange problem..

've got two objects:

```
<div id="menu">
        <a href="#"><img src="images/nagrody.png"></a>
        <a href="#"><img src="images/zwyciezcy.png"></a>
        <a href="#"><img src="images/zasady.png"></a>
</div> 
```

With style:

```
#menu {
float:right;
margin:20px 10px;
width: 160px;
-webkit-transform:rotate(3deg);
-moz-transform:rotate(3deg);
-o-transform:rotate(3deg);
}

#menu img{
    -webkit-transition-duration: 0.5s;
    -moz-transition-duration: 0.5s;
    -o-transition-duration: 0.5s;
    transition-duration: 0.5s;

    -webkit-transform:scale(0.95,0.95);
    -moz-transform:scale(0.95,0.95);
    -o-transform:scale(0.95,0.95);

    overflow:hidden;
}

#menu img:hover{

    -webkit-transform:scale(1,1);
    -moz-transform:scale(1,1);
    -o-transform:scale(1,1);
} 
```

And second object:

```
<div id="znajomi">
        <a href="#"><img src="images/zapros.png"></a>
        <p>BRAKUJE CI JESZCZE <span id="fr">3 ZNAJOMYCH</span></p>
</div> 
```

With style:

```
#znajomi {
    padding:420px 20px;
    -webkit-transform:rotate(-4deg);
    -moz-transform:rotate(-4deg);
    -o-transform:rotate(-4deg);
}

#znajomi p {
    font-family:DIN, Arial, Helvetica, sans-serif;
    font-size:13px;
    color:#fff;
    position:relative;
    top:-20px;
    left:20px;
}

#fr {
    font-family: Arista, Arial, Helvetica, sans-serif;
    font-size:21px;
    color:#c2dc2f;
    text-shadow:rgba(113,0,0,0.75) 2px 2px;
} 
```

And my problem is that: if i delete from #znajomi

```
-webkit-transform:rotate(-4deg);
-moz-transform:rotate(-4deg);
-o-transform:rotate(-4deg); 
```

Hover from menu work, but if this code is plaste - it doesn't work.

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:46:50.010

The `#znajomi`-element overlays the `#menu`. you have to use a z-index or other positioning. without the full site-layout i cannot give you an example for the best change.

it helps, if you remove the `float:right` from the menu. you might add an `margin-left` to get the same result as before.

# z-index - Change z-index of marker in openlayers

> ID：10883142
> 
> 赞同：9
> 
> 时间：2012-06-04T14:37:25.533
> 
> 标签：z-index, openlayers, openstreetmap, markers

I've a layer with multiple markers with rather big icons, so they overlap. Via the list on the side of the map users can select a marker and the map will pan (and zoom) to it. But it will still be behind some other makers. How do I get a individual makers z-index and set it? I would be useful to get the highest used z-index and just add one. (another solution is to add the total number of markers to the z-index)

The markers (or features) are in a myLib.features array. The console doesn't show any z-index type functions.

I can't find a appropriate example or api function for this.

**EDIT:**

I found this example: [http://dev.openlayers.org/examples/ordering.html](http://dev.openlayers.org/examples/ordering.html) I don't really understand it. Somehow the created feature takes the next z-index given by the layer via somekind of symbolizer. I have no idea how to work this static sort into a dynamic one.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:17:58.763

尝试这个：

首先，确保您使用的是 OpenLayers.Layer.Vector 图层，而不是 OpenLayers.Layer.Markers 图层。显然 Markers 层是旧消息，所有新的开发都是在 Vector 层中完成的。它有更多的功能。（我自己在标记层上浪费了很多时间）。

然后，您的每个标记都需要是一个 OpenLayers.Feature.Vector 对象。构造函数接受三个参数，其中第三个称为样式。样式是您设置图像属性、背景阴影、鼠标悬停文本和 z-index 的地方，它的属性名称为“graphicZIndex”。我想这就是你要找的。

[http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector.style](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector.style)

使用 addFeatures 函数将“标记”（即矢量）添加到矢量层。并且忽略“选项”参数。

[http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.addFeatures](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.addFeatures)

我也找到了那个示例页面，我也觉得它很混乱。它在 Vector 层的构造函数中设置所有标记的样式（如果省略标记样式，则作为默认值使用）而不是标记的构造函数。我认为在标记构造函数中设置标记样式更有意义。

要实时更改样式，请使用您的 OpenLayers.Feature.Vector 标记之一，称为“标记”并执行此操作。我们称向量层为“层”。

```
marker.style.graphicZIndex = 13;
layer.redraw(); 
```

# zend-framework - Zend Hostname Route dispatching defined controller / action

> ID：10883143
> 
> 赞同：0
> 
> 时间：2012-06-04T14:37:26.900
> 
> 标签：zend-framework, dns, routes

When a certain domain is requested, I would like to display page genereted by defined controller / action. I tried using hostname route (in this case requesting www.some-page.de should dispatch transportAction in IndexController), like this:

```
$hostnameRoute = new Zend_Controller_Router_Route_Hostname(
    'www.some-page.de',
    array(
        'controller' => 'index',
        'action'     => 'transport'
    )
);

$plainPathRoute = new Zend_Controller_Router_Route_Static('');

$router->addRoute('transport', $hostnameRoute->chain($plainPathRoute)); 
```

Apparently I am doing something wrong, because it isn't working (instead indexAction of IndexController is being dispatched). Any hints or ideas how can I achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:54:37.100

我明白了——这很简单，我希望这也是一种很好的做法：

在插件的 routeShutdown 挂钩中，我检查域名（使用 $_SERVER['HTTP_HOST']），如果它是所需的域，我使用以下代码设置操作名称：

```
$request->setActionName('transport'); 
```

# .net - Dynamic Data Access Layer with EF4.3

> ID：10883146
> 
> 赞同：0
> 
> 时间：2012-06-04T14:37:40.447
> 
> 标签：.net, entity-framework, ef-code-first, data-access-layer, entity-framework-4.3

I have been tasked with designing a data access layer that will connect to tables with interchangable schemas(used for permissions and separation). The database itself may different each call as well (because of business rules). I plan on using Entity Framework 4.3(all existing apps that will use this are already using Entity Framework) with POCO classes (to prevent multiple dev's from accidently using the model generator against something that's customized) and DbContext (so effectively Compact Framework without the code generating). I plan on utilizing [DbModelBuilder](http://blog.bennymichielsen.be/2011/05/21/entity-framework-4-1-change-mappings-at-runtime/) and [EntityConnectionStringBuilder](https://stackoverflow.com/questions/6003085/how-do-i-programmatically-set-the-connection-string-for-entity-framework-code-fi) to achieve these dynamic situations. Anyone done this or have a better solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:15:59.343

Visual Studio 有一些扩展，可以使用 t4 模板自动生成 POCO。还有用于自动生成存储库和相关接口的 T4 模板。这些选项还能够添加使使用 WCF 更容易的选项。这是视觉工作室扩展链接。

[http://visualstudiogallery.msdn.microsoft.com/ff781f46-d8c3-45e0-a545-40906921bb86](http://visualstudiogallery.msdn.microsoft.com/ff781f46-d8c3-45e0-a545-40906921bb86)

如果 .edmx 位于同一命名空间中，此扩展会自动更新 poco 类。更改名称空间或项目并将 poco 分离为与 DAL 分离的项目的选项是可以实现的，但您必须告诉 poco 寻找更改。

我希望这能回答你的问题。不是这样，我可以通过一些额外的上下文再次尝试它。

# c++ - COM interfaces declared in C++

> ID：10883150
> 
> 赞同：2
> 
> 时间：2012-06-04T14:38:11.930
> 
> 标签：c++, com, marshalling

Usually to create COM interface one should declare it in IDL file. In the project I work on I have one COM interface declared in *.h file in C++:

```
struct DECLSPEC_UUID("A67177F7-A4DD-4A80-8EE1-25CF12172068") ISomeService : public IUnknown
{
    virtual ~ISomeService() {}

    virtual HRESULT Initialize(const Settings& settings) = 0;

    // ...
}; 
```

Moreover the method Initialize takes a struct that contains std::string fields as its parameter. The corresponding COM class is implemented in C++ and it is used from another C++ module. This works fine until I run the code under AppVerifier. It causes access violation exceptions to occur.

So my questions are

1.  Is it right to sometimes declare COM-interface in *.h file?
2.  If yes is it right to specify C++ types as parameters for COM interface methods? Or should I always use COM compliant types in such cases (BSTR etc)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:35:49.040

1.  当然，您可以在不使用 IDL 的情况下描述 COM 接口。但是您将无法使用诸如类型库和编组代码生成之类的 IDL 功能。但是，如果您仅将 COM 组件用作进程内服务器 (DLL)，并且您可以将 .h 文件分发给客户端 - 那么这种方法可以正常工作。

2.  避免在接口中使用 C++ 类型，因为在处理跨 DLL 边界的内存时可能会导致访问冲突。更好地使用纯 C 类型或 COM 类型

# iphone - iPhone iOS how to instantiate a black and white CGColorSpaceRef?

> ID：10883155
> 
> 赞同：0
> 
> 时间：2012-06-04T14:38:24.403
> 
> 标签：iphone, objective-c, ios, core-graphics, color-space

I'm working with this excellent example of converting an image to grayscale: [Convert Image to B&W problem CGContext - iPhone Dev](https://stackoverflow.com/questions/3340564/convert-image-to-bw-problem-cgcontext-iphone-dev)

However, for my purposes, I would like to have **only pure black and pure white** left in the image.

It appears that to do so, I need to pass a black and white color space to the recolor method using a call:

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateWithName(/*black and white name*/); 
```

However, I was unable to find the proper iOS color space names. What I found was from Mac, and the "color space names" referenced from the iOS docs does not point anywhere.

**How can I properly create a black and white CGColorSpaceRef?**

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:59:36.850

我不熟悉只有黑白的颜色空间，但你可以做的是计算所有像素的总平均 RGB 值（让我们称之为`totalAvg`）并将其用作阈值。如果每个像素的 rgb 平均值大于计算值`totalAvg`，则将其设置为纯白色，否则将其设置为纯黑色。

我同意这需要更多的工作，但这就是我能想到的，除非你找到你正在寻找的色彩空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:30:59.393

您可以尝试创建一个灰色空间，然后使用两种颜色（显然是黑色和白色）[创建一个索引颜色空间并使用它。](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGColorSpace/Reference/reference.html#//apple_ref/c/func/CGColorSpaceCreateIndexed)

# mysql - bootstrap error trying to enable drupal module with drush

> ID：10883156
> 
> 赞同：1
> 
> 时间：2012-06-04T14:38:28.730
> 
> 标签：mysql, drupal, ubuntu, drush

Trying to install my first drupal module. Following the book did not work because of an "FTP" error so I installed drush. Download seemed to work now the enable command gives me this error. I'm a noob with ubuntu and every part of drupal. Help. Thanks.

* * *

```
NNH@comp:/var/www/drupal$ sudo drush en module_filter    
Command pm-enable needs a higher bootstrap level to run - you will   [error]    
need invoke drush from a more functional Drupal environment to run    
this command.    
The drush command 'en module_filter' could not be executed.          [error]    
Drush was not able to start (bootstrap) the Drupal database.         [error]    
Hint: This error often occurs when Drush is trying to bootstrap a    
site that has not been installed or does not have a configured    
database.and tried it.    

Drush was attempting to connect to :     
  Drupal version    : 7.14    
  Site URI          : http: //default    
  Database driver   : mysql    
  Database hostname : localhost    
  Database username : drupal7    
  Database name     : drupal7     
  Default theme     : garland    
  Administration theme: garland    
  PHP configuration :     
  Drush version     : 5.3    
  Drush configuration:     
  Drupal root       : /var/www/drupal    
  Site path         : sites/default    
  Modules path      : sites/all/modules    
  Themes path       : sites/all/themes    
  File directory path: sites/default/files    
  %paths            : Array    

You can select another site with a working database setup by    
specifying the URI to use with the --uri parameter on the command    
line or $options['uri'] in your drushrc.php file. 
```

Possibly related:

```
NNH@comp:~$ sudo dpkg-reconfigure -plow phpmyadmin     
[sudo] password for NNH:     
/usr/sbin/dpkg-reconfigure: phpmyadmin is broken or not fully installed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T15:11:09.827

Drush 基本上是一个命令行界面，用于交互、管理和配置 Drupal 及其模块。因此，如果您想将 Drush 用于任何与数据库相关的操作，您必须通过循环地址，即 localhost。但似乎 Drush 将*127.0.0.1*理解为循环地址而不是*localhost*。

只需在 settings.php 中定义这些，您就可以让 Drush 继续进行任何与数据库相关的操作。

而不仅仅是这个

```
'host' => 'localhost', 
```

用这个，

```
'host' => php_sapi_name() == 'cli' ? '127.0.0.1' : 'localhost', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:04:57.333

您通常会收到错误

> 命令 pm-enable 需要更高的引导级别才能运行 - 您将 [错误] 需要从功能更强大的 Drupal 环境调用 drush 才能运行此命令。

当您在运行命令时不在站点的根目录中时。

如果错误仍然存​​在，请尝试直接从提示连接到 MySQL。尝试使用 Drush 输出中的值进行连接，即：

```
mysql -hlocalhost -udrupal7 -p drupal7 
```

如果它正在运行并且该站点正在运行，那么您很可能可以排除数据库连接问题。假设您在自己的机器上进行本地开发，您可以尝试在 settings.php 中将 localhost 更改为 127.0.0.1。这似乎帮助了一些人。

站点 URI 设置似乎有点奇怪。

# regex - 用于选择单个间隔的短语但不选择空格的正则表达式

> ID：10883160
> 
> 赞同：3
> 
> 时间：2012-06-04T14:38:50.697
> 
> 标签：regex, perl

我需要一个相当复杂的正则表达式，它将选择单词之间有一个空格并且可以在其中包含“-”符号，但是它不应该选择连续的空格。

```
'KENEDY JOHN G JR E'                  'example'                 'D-54' 
```

我尝试了以下正则表达式：

```
\'([\s\w-]+)\' 
```

但它选择了我不希望它做的连续空白。

我希望表达式选择

```
'KENEDY JOHN G JR E'
'example'
'D-54' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:42:45.000

也许，

```
\'([\w-]+(?:\s[\w-]+)*)\' 
```

?

**编辑**

如果不允许前导/尾随破折号（在单词边界上），则应为：

```
/\'(\w+(?:[\s-]\w+)*)\'/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:44:11.637

像这样的表达式应该这样做：

```
'[\w-]+(?:\s[\w-]+)*' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:51:38.377

试试这个：

```
my $data = "'KENEDY JOHN G JR E'                  'example'                 'D-54'";

# Sets of
#     one or more word characters or dash
#     followed by an optional space
# enclosed in single quotes
#
# The outermost ()s are optional. There just
# so i can print the match easily as $1.
while ($data =~ /(\'([\w-]+\s?)+\')/g)
{
    print $1, "\n";
} 
```

输出

```
'KENEDY JOHN G JR E'
'example'
'D-54' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T15:24:50.793

不确定这是否适用于您，因为您专门要求使用正则表达式。但是，如果您希望字符串由两个或多个空格或破折号分隔，您可以使用[`split`](http://perldoc.perl.org/functions/split.html)

```
use strict;
use warnings;
use v5.10;

my $str = q('KENEDY JOHN G JR E'               'example'              'D-54');
my @match = split /\s{2,}/, $str;
say for @match; 
```

具有类似功能的正则表达式将是

```
my @match = $str =~ /(.*?)(?:\s{2,}|$)/g; 
```

请注意，您需要找到 end of line 的边缘情况`$`。

使用`split`or 通配符的好处`.`是您依靠空格来定义字段，而不是字段本身的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T15:28:06.337

您的代码实际上是按原样工作的。

```
use feature qw( say );
$_ = "'KENEDY JOHN G JR E'         'example'         'D-54'";
say for /\'([\s\w-]+)\'/g; 
```

输出：

```
KENEDY JOHN G JR E
example
D-54 
```

（如果您也想要引号，请移动括号。）

我会简单地使用

```
my @data = /'([^']*)'/g; 
```

如果您有任何验证要做，请稍后再做。

# android - 如何在子类中使用Activity

> ID：10883164
> 
> 赞同：0
> 
> 时间：2012-06-04T14:39:22.147
> 
> 标签：android, android-intent

概念问题在这里！我想把一个程序分解成更简单、更集中的类。我做的第一个需要一个 startActivityForResult() ，它又依赖于一个活动。

我可以将活动传递给班级。但是，当我使用 getActivity() 时，调用者出现了问题，这似乎对类没有定义。顺便说一句，为什么没有记录 getActivity ？

# solr - SOLR 3.6.0，在对一堆实体进行完全重新索引后，我的一些项目没有进入 SOLR 索引，但没有生成日志

> ID：10883165
> 
> 赞同：3
> 
> 时间：2012-06-04T14:39:30.917
> 
> 标签：solr, document

使用 StreamingUpdateSolrServer，我使用以下算法将我的庞大数据集重新索引到 SOLR。

```
Initialize StreamingUpdateSolrServer server = new StreamingUpdateSolrServer(solrServerUrl, numDocsToAddInBatch, numOfThreads);

For each Item…
-->Create document
-->Server.add(document)

When all finished,

server.commit();
server.optimize(); 
```

问题：

我的一些项目没有进入 SOLR 索引，但没有生成日志来告诉我发生了什么。

我能够找到大部分文件，但有些文件丢失了。任何日志中都没有错误——而且我有大量的 try/catch 块，其中包含客户端站点上所有 SOLRJ 异常的日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:39:31.213

# 验证 SOLR WAR 的日志记录没有被隐藏

您肯定要验证 SOLR 服务器日志设置是否隐藏文档未能添加到索引的事实。

因为 SOLR 使用 SLF4J API，所以您的 SOLR 服务器可能会覆盖日志设置，从而允许您在文档未能被索引时看到错误消息。

如果您有自定义的 {solr-war}/WEB-INF/classes/logging.properties，则需要确保设置不会隐藏错误消息。

默认情况下，应自动显示添加项目的错误。因此，如果您在任何时候都没有更改 SOLR 日志设置......您应该在服务器日志文件中的索引期间看到任何错误。

# 排查文档无法被索引的原因

为了调查这一点，在索引完成后随时遵循验证步骤是有帮助的：

```
Initialize new log log_fromsolr
Initialize new log log_notfound

    For each Item…
    -->Search SOLR for the item. If SOLR has the object, log each item’s fields into log_fromsolr on a single line into log_fromsolr. This should include the unqiueKey for your document if you have one. 
    -->If document cannot be found in SOLR for this item, write a line to log_notfound with all the fields from the object from the database, also supplying the uniqueKey as the first line. 
```

验证步骤完成后，日志 log_notfound 创建了所有未能添加到索引中的文档的列表。

您可以使用 log_fromsolr 创建的日志来比较进入索引的项目和没有进入索引的项目的文档字段。

## 验证它不是间歇性问题

有时可能是每次尝试索引时都无法将相同的项目添加到索引中。

如果您在 log_notfound 日志中找到对象，您将需要备份当前的 notfound 日志并从头开始再次运行索引过程。使用 diff 工具查看第一个 notfound 日志和第二个 notfound 日志之间的差异。

当您看到这些文件中存在大量差异时，就会出现间歇性问题（注意：如果在第一次和第二次重新索引之间在数据库中创建新对象，则会出现一些差异）。

如果您的问题是间歇性的，那么它肯定指向您的 SOLR 事务未正确提交的应用程序代码。

## 每次索引时总是会丢失相同的文档

此时，我们必须比较从 SOLR 索引中找到的文档与未进入 Lucene 索引的文档。通常，对象的逐个字段比较将开始转向一些可疑值，这些值可能会在将文档添加到索引时导致问题。

尝试消除所有可疑字段，然后再次重新索引整个内容。查看文档是否仍然无法被索引。如果这行得通，您将需要重新引入已删除的字段，看看您是否可以查明问题所在。

# apache - 当添加到其他工作的 Rewrite / Rewritemap 时，RewriteLock 会在重新启动时挂起 Apache

> ID：10883176
> 
> 赞同：1
> 
> 时间：2012-06-04T14:40:09.853
> 
> 标签：apache, mod-rewrite, virtualhost, rewritemap

我在一个Network Solutions VPS上，四个域名共享IP。我有一个有效的 Rewrite / RewriteMap 设置。重写位于 var/www/vhosts/example.com/conf/vhost.conf 中 example.com 网址的文件中，重写是 vhost.conf 文件中的唯一内容。它在服务器的主 httpd.conf 文件中不起作用。

RewriteMap 使用用户输入的 URL (http://example.com/bb/cc) 中的一些内容从匹配的数据库记录中获取第三条信息 (aa)，将第三条信息用作加载文件的查询字符串，并在地址栏中保留最初键入的 URL，同时根据查询字符串 aa 显示文件。

这是重写：

```
Options +FollowSymlinks
RewriteEngine on
RewriteMap newurl "prg://var/www/cgi-bin/examplemap.php"
RewriteRule ^/(Example/.*) ${newurl:$1} [L] 
```

当我在 RewriteMap 行上方或下方添加以下内容时：

```
RewriteLock /var/lock/mapexamplelock 
```

并尝试重新启动 Apache，它挂起并且 Apache 不会重新启动。我尝试了不同的文件路径（认为这可能是一个权限问题，只是希望它可以正常工作），去掉最初的 /，把它放在引号中，不同的文件类型（即结尾的 .txt），不同的文件名，几乎任何东西，每次重新启动时都会挂起 Apache。Rewrite / RewriteMap 没有它就可以工作，但是我已经阅读了很多关于 RewriteLock 重要性的内容，并且 php 在以 DANGEROUS 结尾的日志中发出警告，不要使用 RewriteLock。

这是地图（位于 Rewrite 所说的位置）：

```
#!/usr/bin/php
<?php
include '/pathtodatabase';
set_time_limit(0);
$keyboard = fopen("php://stdin","r");
while (1) {
$line = fgets($keyboard);
if (preg_match('/(.*)\/(.*)/', $line, $igot)) {
$getalias = mysql_query("select aa FROM `table`.`dbase` WHERE bb = '$igot[1]' && cc =     '$igot[2]'");
while($row=mysql_fetch_array($getalias)) {
$arid = $row['aa'];
}
print "/file-to-take-load.php?aa=$arid\n";
}
else {
print "$line\n";
}
}
?> 
```

我查看了主要的 httpd.conf 文件，我找不到任何关于 RewriteLock 可能会产生干扰的信息。这只是 VPS 设置中的标准配置。

如果有人知道为什么这只有在没有 RewriteLock 和可能的修复的情况下才能工作，将不胜感激。

谢谢格雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:10:25.930

如果您定义了多个 RewriteLock 指令或在 VHOST 配置中使用它，则 Apache 挂起。

RewriteLock 应该在服务器配置级别指定，并且只指定一次。此锁定文件将被所有 prg 类型映射使用。所以如果你想使用多个prg映射，我建议使用内部锁定机制，例如在PHP中有flock函数，并且简单地忽略apache在错误日志中写入的警告。

请参阅此处了解更多信息： http:
[//books.google.com/books ?id=HUpTYMf8-aEC&lpg=PP1&pg=PA298#v=onepage&q&f=false](http://books.google.com/books?id=HUpTYMf8-aEC&lpg=PP1&pg=PA298#v=onepage&q&f=false)

# jquery - IE8 的长轮询问题

> ID：10883180
> 
> 赞同：1
> 
> 时间：2012-06-04T14:40:39.603
> 
> 标签：jquery, ajax, long-polling

我正在构建一个使用长轮询技术的应用程序，并且在使用 IE8 时遇到了一些问题。

所以这是我使用的简化代码：

php:

```
 $time = time();
    while((time() - $time) < 10) {
        $data = rand(0,10);    
        // if we have new data return it
        if($data == 3 || $data == 6) {
            echo json_encode($data);
            break;
        }
            sleep(1);
        } 
```

js：

```
var lpOnComplete = function(response) {
        alert(response);
        // do more processing
        lpStart();
    };

    var lpStart = function() {
        $.post('http://example.com/test', {}, lpOnComplete, 'json');
    };

    $(document).ready(lpStart); 
```

问题似乎是 IE8 没有等待服务器响应，而是在第一次正确响应后立即触发下一个请求或死亡。什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:33:28.483

这似乎奏效了。

```
$.ajaxSetup ({
   cache: false
}); 
```

# javascript - IE7/8 Javascript 错误

> ID：10883181
> 
> 赞同：1
> 
> 时间：2012-06-04T14:40:40.550
> 
> 标签：javascript, internet-explorer, google-maps-api-3, internet-explorer-8

每当您单击标题链接时，我都会收到 JavaScript 错误；从本质上讲，这`document.write('<a href="javascript:myclick(' + (i) + ')">' + '[[Title]]' + '<\/a><br>');` 句话让我很沮丧，因为除了 IE7/8 之外的所有其他浏览器都没有任何问题。然而，我们的大多数访问者都在使用 IE7/8。该问题仅发生在 IE 中，几乎没有其他问题，但是据我所知，当我调试它时，它是一个 javascript 错误。

```
Thanks.. 
```

这是信息：

IE8 调试：

```
Line: 1 
Error: Function expected 

myclick(3) 
Function expected JScript - window script block, line 1 character 1 
```

IE9 调试（在 IE8 模式下）：

```
myclick(7)
SCRIPT5007: The value of the property 'myclick' is null or undefined, not a Function object script block (4), line 1 character 1 
```

这是第 1 行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

这是完整的脚本代码；谷歌地图：

```
<script type="text/javascript">
  var MapCenter = new google.maps.LatLng(41.52369114627216,-90.57780953284453)
  var i = -1;
  var Lat=new Array();
  var Long=new Array();
  var MarkerTitle=new Array();
  var Display=new Array();
  var myclick = new Array();
  var gmarkers = new Array();
</script>

<script type="text/javascript">
  var i = i + 1;
  Lat[i] = [[Lat]];
  Long[i] = [[Long]];
  MarkerTitle[i] = '[[Title]]';
  Display[i] = '<table><tr><td><div style="color: #a41d21;font-size: 13px; font-weight: bold;">[[Title]]</div></td></tr><tr><td>[[Address]]<br />[[City]], [[State]] [[Zip]]</td></tr><tr><td>[[Phone]]</td></tr><tr><td><a href="mailto:[[Email]]">[[Email]]</a></td></tr><tr><td><a href="[[WebURL]]" target="_blank">[[WebURL]]</a></td></tr></table>';
</script>

<div id="LeftArea" style="width: 220px; float: left; border-bottom: 1px solid #dedede; padding: 5px 0 5px 0;">
  <div style="color: #a41d21;font-size: 13px; font-weight: bold;">
    <script type="text/javascript">
      document.write('<a href="javascript:myclick(' + (i) + ')">' + '[[Title]]' + '<\/a><br>');
    </script>
  </div>
  <div>
    [[Address]]<br />
    [[City]], [[State]] [[Zip]]
  </div>
</div>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  function initialize() {
    myclick = function myclick(i) {
      google.maps.event.trigger(gmarkers[i], "click");
    }

    var myOptions = {
      zoom: 12,
      center: MapCenter,
      zoomControl: true,
      zoomControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT,
        style: google.maps.ZoomControlStyle.SMALL
      },
      mapTypeControl: true,
      mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
      },
      scaleControl: true,
      scaleControlOptions: {
        position: google.maps.ControlPosition.TOP_CENTER
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),myOptions);

    for (var i = 0, length = 50; i < length; i++) {
      var latLng = new google.maps.LatLng(Lat[i],Long[i]); 
      var InfoWindow = new google.maps.InfoWindow();

      var marker = new google.maps.Marker({
        position: latLng,
        map: map,
        title: MarkerTitle[i],
        html: Display[i]
      });

      gmarkers[i] = marker;

      google.maps.event.addListener(marker, 'click', function () {
        InfoWindow.setContent(this.html);
        InfoWindow.open(map, this);
      });
    }

    google.maps.event.addListener(map, 'click', function() {
      InfoWindow.close();
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:46:03.587

我认为您不需要在此变量定义中包含函数名称：

```
myclick = new function(i) {
      google.maps.event.trigger(gmarkers[i], "click");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T17:19:59.353

代替

```
<script type="text/javascript">
document.write('<a href="javascript:myclick(' + (i) + ')">' + '[[Title]]' + '<\/a><br>');
</script> 
```

通过以下

```
<script type="text/javascript">
document.write('#' <a href="#" onclick="javascript:myclick(' + (i) + ')">'> + '[[Title]]' + '<\/a><br>');
</script> 
```

# php - MySQL & php PDO 如何获取：SELECT EXISTS (SELECT 1 FROM x WHERE y = :value)

> ID：10883184
> 
> 赞同：2
> 
> 时间：2012-06-04T14:40:57.810
> 
> 标签：php, mysql, sql, pdo

我使用这种语法而不是 count (*) 因为它应该更快，但我不知道如何获取结果输出

```
$alreadyMember = $dataBase->prepare('SELECT EXISTS ( SELECT 1 
FROM TheCommunityReachLinkingTable 
WHERE communityKey = :communityKey 
AND userID = :userID)');
$alreadyMember->bindParam(':communityKey', $_POST['communityKey'], PDO::PARAM_STR);
$alreadyMember->bindParam(':userID', $_POST['userID'], PDO::PARAM_INT);
$alreadyMember->execute();

if($alreadyMember->fetch()) {do code here} 
```

但它似乎没有返回正确的东西，知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:49:11.643

这里的使用`EXISTS`似乎是错误的。只需执行此查询：

```
SELECT 1 
FROM TheCommunityReachLinkingTable 
WHERE communityKey = :communityKey 
AND userID = :userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:03:31.047

正确的用法和平常一样，捕获 fetch() 的返回值

```
$row = $alreadyMember->fetch();
print_r($row); // you may have numeric or string indices depending on the FETCH_MODE you set, pick one, consider a column alias and associative

//or the easy way
$alreadyMember->execute();
if ($alreadyMember-fetchColumn()) {
    //column 0 contained a truthy value
} 
```

# javascript - Facebook 登录按钮回调函数

> ID：10883187
> 
> 赞同：2
> 
> 时间：2012-06-04T14:41:03.630
> 
> 标签：javascript, facebook, facebook-graph-api, login

我的网站上的 Facebook 登录出现问题。下面的代码是我的 FB-Connect 代码。代码符号的注释部分让我进入我的网站。我的问题是，当我“重新激活”此代码时，它会在我每次访问该页面时立即登录。但是我想在用户单击“使用 Facebook 登录”按钮时登录。当我单击 facebook 登录按钮时，会出现一个弹出窗口，但没有任何反应..

当我单击 FB-Connect 按钮时，我可以以某种方式调用 JS 函数吗？

```
 <script>
                    window.fbAsyncInit = function() {
                      FB.init({
                        appId      : 'xxxxxxxxxxxxxxxxxx', // App ID
                        status     : true, 
                        cookie     : true,
                        xfbml      : true,
                        oauth      : true,
                      });   
            var login = false;

                 FB.getLoginStatus(function(response) {
                          if (response.status === 'connected') {
                              console.log('connected');
                              login=true;

                                var uid = response.authResponse.userID;

            //this part of the code below redircts me to the part, where i login to my system.
                                /*var accessToken = response.authResponse.accessToken;
                                $.ajax({
                                    type: 'POST',
                                    url: '/?eID=login',
                                    data: $(this).serialize(),
                                    success: function(msg) { 
            alert("LOGIN");
                                $('#content').load('/live-session/tickets/');

                        }
                    });*/
                }}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:44:23.597

您需要在单击 fb 连接按钮时使用[FB.login](https://developers.facebook.com/docs/reference/javascript/FB.login/)功能，并且不要使用 FB.getLoginStatus

```
 FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 }); 
```

*来自文档*

> FB.getLoginStatus 允许您确定用户是否登录到 Facebook 并验证了您的应用程序。

因此，如果您不想在页面加载时检查用户是否已登录，请不要调用它

> 当我单击 facebook 登录按钮时，会出现一个弹出窗口，但没有任何反应..

如果您已经授权该应用程序并通过身份验证，Facebook 不会再次要求您登录和授权

# clojure - 为什么使用 lein run 敲击 ENTER（看起来像挂起）后读取行不返回，但与 lein repl 一起使用？

> ID：10883188
> 
> 赞同：7
> 
> 时间：2012-06-04T14:41:04.097
> 
> 标签：clojure, leiningen

手头的问题是，当我使用`lein run`它运行程序时`(read-line)`，我无法摆脱它，这意味着：读取行永远不会返回。

以下是相关代码：

```
(def command (atom ""))

(defn print-prompt []
  (print "prompt> ")
  (flush)
)

(defn ask-for-input []
    (print-prompt)
    (let [x (str (read-line))]
      (println (str "User input: " x))
      (reset! command x)
    )
) 
```

我从来没有在屏幕上看到“用户输入：”字符串。奇怪的是，如果我运行`lein repl`并调用，`(ask-for-input)`那么它可以正常工作：S

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T15:11:21.580

试试**lein trampoline run**，它有效。

以下来自 leiningen 常见问题解答：

> 问：我无法访问项目中的标准输入。
> 
> A：这是JVM进程处理方式的限制；他们都没有正确地公开标准输入。这意味着 read-line 之类的函数在大多数情况下都不会按预期工作，尽管 repl 任务必须包含一个解决方法。您还可以使用 trampoline 任务在 Leiningen 退出后启动项目的 JVM，而不是将其作为子进程启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:29:06.517

我尝试了您的源代码，但省略了刷新。它没有问题。您使用的是哪个版本的 Clojure？我用 Clojure 1.3 尝试了以下代码。

```
(def command (atom 0))

(defn print-prompt []
  (print "prompt> ")
)

(defn ask-for-input 
    []
    (print-prompt)
    (let [x (str (read-line))]
      (println (str "User input: " x))
      (reset! command x)
    )) 
```

编辑：我改变了我复制和测试的你的一个功能，它现在可以与独立和 lein 运行一起使用。您在原始示例中有 (flush)。

```
(defn print-prompt []
  (print "prompt> ")
  (flush)
) 
```

据我所知， println 会导致冲洗，而 print 不会，并且您需要在打印后冲洗。

我正在添加此信息以防万一它可能有帮助。我有一个名为 repl-test 的 Clojure 项目。这是我的 repl-test 项目的 core.clj 文件头。您的来源，已经发布，在这个文件中还有一些其他的功能，与您的帖子无关。

```
(ns repl-test.core
  (:gen-class)
  (:use clojure.contrib.command-line)
  (:require [clojure.contrib.string :as cstr])
  (:require [clojure.contrib.trace :as ctr])
  (:require [clojure.string :as sstr])
  (:use clojure-csv.core)) 
```

这是 project.clj 文件：

```
(defproject repl-test "0.0.1-SNAPSHOT"
  :description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.clojure/clojure-contrib "1.2.0"]
                 [clojure-csv/clojure-csv "1.2.4"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clj-http "0.1.3"]]
   :aot [repl-test.core]
   :main repl-test.core) 
```

# scalaz - 验证是 SemiGroup/Monoid ：使用 |+| 不工作

> ID：10883189
> 
> 赞同：3
> 
> 时间：2012-06-04T14:41:05.467
> 
> 标签：scalaz

我的印象是 Validation 可以用作 Monoid/SemiGroup 我在 scala 2.9.2 和 scalaz 7 快照下尝试了以下代码

```
import scalaz._
import Scalaz._

val success1 = 1.success
val success2 = 2.success

val failureA = "A".fail
val failureB = "B".fail

success1 |+| success2
<console>:16: error: diverging implicit expansion for type scalaz.Semigroup[scalaz.Validation[Nothing,Int]]
starting with method validationSemigroup in trait ValidationInstances
              success1 |+| success2
              ^
<console>:16: error: value |+| is not a member of scalaz.Validation[Nothing,Int]

              success1 |+| success2 
```

我期待一个`Success(3)`

然后

`failureA |+| failureB``res1: scalaz.Validation[java.lang.String,Nothing] = Failure(AB)` 按预期给出

和

`success1 |+| failureA`按预期失败

```
<console>:16: error: diverging implicit expansion for type scalaz.Semigroup[scalaz.Validation[Nothing,Int]]
starting with method validationSemigroup in trait ValidationInstances
              success1 |+| failureA
              ^
<console>:16: error: value |+| is not a member of scalaz.Validation[Nothing,Int]

              success1 |+| failureA 
```

为什么`|+|`on`Success`不起作用？这是一个错误还是我在这里错过了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T20:50:41.013

它是这样工作的：

```
scala> import scalaz._, Scalaz._
import scalaz._
import Scalaz._

scala> val success1 = 1.success[String]
success1: scalaz.Validation[String,Int] = Success(1)

scala> val success2 = 2.success[String]
success2: scalaz.Validation[String,Int] = Success(2)

scala> val failureA = "A".fail[Int]
failureA: scalaz.Validation[java.lang.String,Int] = Failure(A)

scala> val failureB = "B".fail[Int]
failureB: scalaz.Validation[java.lang.String,Int] = Failure(B)

scala> success1 |+| success2
res0: scalaz.Validation[String,Int] = Success(1)

scala> failureA |+| failureB
res1: scalaz.Validation[java.lang.String,Int] = Failure(AB)

scala> success1 |+| failureA
res2: scalaz.Validation[String,Int] = Success(1) 
```

您没有`Failure`在前两个中指定左元素 ( )的类型`val`。这就是`Nothing`推断的原因。显然，如果左元素是一个（不是，是） ，则`Validation`有一个实例。这是一个[例子](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Validation.scala#L364)。`Semigroup``Semigroup``Nothing``String`

**UPD：**另外，如您所见，`Semigroup`实例获得第一个`Success`而不是使用`Success`'es`Semigroup`实例。我看到了，有一个方法[`append`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Validation.scala#L77)in `Validation`，它要求左右元素都是`Semigroup`s 并使用两个实例：

```
scala> success1 append success2
res6: scalaz.Validation[String,Int] = Success(3) 
```

不知道，为什么在`Validation`'s`Semigroup`实例中不使用它。创建了一个[拉取请求](https://github.com/scalaz/scalaz/pull/101)来更改此行为。

# javascript - Ace 编辑器“定义未定义”

> ID：10883190
> 
> 赞同：17
> 
> 时间：2012-06-04T14:41:05.267
> 
> 标签：javascript, ace-editor

我正在尝试将[ace 编辑器](https://github.com/ajaxorg/ace)添加到我的应用程序中。我从 github 下载了它，将“ace/lib/ace”目录放到了我的应用程序目录中，包括：

```
<script src="ace/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>" 
```

在我的身体标签和：

```
editor = ace.edit "editor" 
```

在我的脚本标签中。我尝试在 Chrome 和 Firefox 中加载页面，但在 ace.js:46 中出现“未定义定义”。ace.js 中的行是：

```
define(function(require, exports, module) { 
```

有谁知道为什么 ace 期望 define() 函数存在以及为什么找不到它？这是我的来源：

```
<html>
  <body>
    <div id="editor">some text</div>
    <script src="ace/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
      var editor = ace.edit("editor");
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T02:36:09.900

如果您已经有了源代码，那么仍然很容易做到。只需进入复制所有 ace 源的目录即可。

然后做：

```
npm install
node Makefile.dryice.js 
```

有关更多详细信息，请参阅 wiki [https://github.com/ajaxorg/ace/wiki/Building-ace](https://github.com/ajaxorg/ace/wiki/Building-ace)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-10T15:04:18.713

我通过放入`window.define = ace.define;`我的 DOMload 处理程序来破解它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-15T07:04:08.327

您收到此错误是因为[RequireJS](http://requirejs.org) JavaScript 库尚未包含在您的页面中。

要解决此问题，请使用 ace 构建或在您的页面中包含 RequireJS。

如果您选择包含 RequireJS，您的 html 片段将如下所示：

```
<!-- Editor will go here -->
<div id="editor"></div>

<!-- Load RequireJS -->
<script src="lib/requirejs/require.js"></script>

<!-- Initialize ace -->
<script>

    // Tell RequireJS where ace is located
    require.config({
        paths: {
            'ace': 'lib/ace'
        }
    });

    // Load the ace module
    require(['ace/ace'], function(ace) {
        // Set up the editor
        var editor = ace.edit('editor');
        editor.setTheme('ace/theme/monokai');
        editor.getSession().setMode('ace/mode/javascript');
        // etc...
    });
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-05T07:06:53.257

在 React 中，如果你从 ace-builds 导入任何东西，你的导入顺序很重要。

应该是这样的

```
import AceEditor from 'react-ace';
import 'ace-builds/src-noconflict/mode-json'; 
```

不像这样

```
import 'ace-builds/src-noconflict/mode-json';
import AceEditor from 'react-ace'; 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-07-05T11:44:16.077

或者，您可以使用 CDN

*   [http://cdnjs.com/libraries/ace/](http://cdnjs.com/libraries/ace/)
*   [http://www.jsdelivr.com/#!ace](http://www.jsdelivr.com/#!ace)

并更换

```
<script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script> 
```

有类似的东西

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js" type="text/javascript" charset="utf-8"></script> 
```

# spring - SPRING MVC 中的 URL 模式限制

> ID：10883192
> 
> 赞同：9
> 
> 时间：2012-06-04T14:41:06.750
> 
> 标签：spring, rest, spring-mvc, url-mapping

我的 Spring Web MVC 应用程序在 Controller 中有以下处理程序映射。

```
@RequestMapping(method = RequestMethod.GET, value = "/something") 
```

当请求发送到

> [http://www.someURL.com/something](http://www.someURL.com/something)

，它工作正常并映射到正确的控制器，但是，

`http://www.someURL.com/something.bak or http://www.someURL.com/something.abc or http://www.someURL.com/something.abc.deff.xyz` 也有效！

我想将此限制为公正`http://www.someURL.com/something`而不是其他人。

`web.xml`将映射定义为：-

```
<servlet-mapping>
        <servlet-name>abc</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:58:41.993

您可以使用[useDefaultSuffixPattern](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html#setUseDefaultSuffixPattern%28boolean%29)属性。

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="useDefaultSuffixPattern" value="false" />
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:19:44.387

除上述内容外，请参阅以下文档： [http ://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html)

方法：setUseDefaultSuffixPattern()

还可以通过以下类似的查询： [How to change Spring MVC's behavior in handling url 'dot' character](https://stackoverflow.com/questions/4135329/how-to-change-spring-mvcs-behavior-in-handling-url-dot-character)

# javascript - 使用 Javascript (Jasmine/Mocha) 中的间谍在方法中测试类实例化

> ID：10883194
> 
> 赞同：0
> 
> 时间：2012-06-04T14:41:12.177
> 
> 标签：javascript, testing, backbone.js, jasmine, mocha.js

我目前正在开始测试我的 javascipt 代码，但我现在遇到了一个我无法解决的问题。我有一个主干应用程序（AMD/requirejs 驱动），我使用 Mocha（Sinon、Chai、...）进行 BDD 测试——这基本上完成了我的设置。

假设我们正在谈论这个类

```
class MyApp extends App
    init: ->
        @initcontrollers()

    initControllers: ->
        new HeaderController()
        new NavController() 
```

对于第一种方法`init`，我可以编写以下测试用例

```
before ...

describe 'init', ->

    it 'should call @initControllers', ->
        spy = sinon.spy(@myInstance, 'initControllers')
        @myInstance.init()
        expect(spy.called).toBeTruthy() 
```

这很好用。但现在我想测试一下，如果第二种方法`initControllers`实际上创建了新的实例`HeaderController`和`NavController`

我怎样才能做到这一点？我现在被困住了，我有点困惑，因为我开始认为这不是调用这些控制器的正确方法。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:23:19.967

我真的很困惑，但@mu-is-to-short 可能给了我正确的提示

我现在是这样做的：

```
describe '@initControllers', ->
    it 'should call HeaderController', ->
        headerController = new HeaderController()
        spy = sinon.spy(headerController.__proto__, 'initialize')
        @myInstance.initControllers()
        expect(spy.calledOnce).toByTruthy() 
```

它对我有用，那是正确的方法吗？不管怎么说，还是要谢谢你

# asp.net - 如何使用工作单元在 Repository 类中创建多个 Repository 对象？

> ID：10883195
> 
> 赞同：0
> 
> 时间：2012-06-04T14:41:19.800
> 
> 标签：asp.net, asp.net-mvc-3, repository-pattern, unit-of-work

我是 MVC3 应用程序开发的新手，目前，我们需要以下应用程序技术作为要求

1.  MVC3 框架
2.  IOC 框架 – Autofac 动态管理对象创建
3.  起订量 – 单元测试
4.  实体框架
5.  模型类的存储库和工作单元模式

我已经阅读了许多文章来探索关于上述几点的基本思想，但我仍然对“存储库和工作单元模式”感到有些困惑。基本上我所理解的工作单元是一种模式，它将与存储库模式一起遵循，以便在所有存储库对象之间共享单个数据库上下文，所以这是我的设计：

**IUnitOfWork.cs**

```
public interface IUnitOfWork : IDisposable
{
    IPermitRepository Permit_Repository{ get; }
    IRebateRepository Rebate_Repository { get; }
    IBuildingTypeRepository BuildingType_Repository { get; }
    IEEProjectRepository EEProject_Repository { get; }
    IRebateLookupRepository RebateLookup_Repository { get; }
    IEEProjectTypeRepository EEProjectType_Repository { get; }
    void Save(); 
```

}

**UnitOfWork.cs**

```
public class UnitOfWork : IUnitOfWork
{
    #region Private Members

    private readonly CEEPMSEntities context = new CEEPMSEntities();
    private IPermitRepository permit_Repository;
    private IRebateRepository rebate_Repository;
    private IBuildingTypeRepository buildingType_Repository;
    private IEEProjectRepository eeProject_Repository;
    private IRebateLookupRepository rebateLookup_Repository;
    private IEEProjectTypeRepository eeProjectType_Repository;

    #endregion

    #region IUnitOfWork Implemenation

    public IPermitRepository Permit_Repository
    {
        get
        {
            if (this.permit_Repository == null)
            {
                this.permit_Repository = new PermitRepository(context);
            }
            return permit_Repository;
        }
    }

    public IRebateRepository Rebate_Repository
    {
        get 
        {
            if (this.rebate_Repository == null)
            {
                this.rebate_Repository = new RebateRepository(context);
            }
            return rebate_Repository;
        }
    } 
```

* * *

}

**许可存储库 .cs**

```
public class PermitRepository : IPermitRepository
{
  #region Private Members

  private CEEPMSEntities objectContext = null;
  private IObjectSet<Permit> objectSet = null;

  #endregion

  #region Constructors

  public PermitRepository()
  {
  }

  public PermitRepository(CEEPMSEntities _objectContext)
  {
      this.objectContext = _objectContext;
      this.objectSet = objectContext.CreateObjectSet<Permit>();
  }

  #endregion

  public IEnumerable<RebateViewModel> GetRebatesByPermitId(int _permitId)
  {
     // need to implment
  } 
```

}

**许可控制器 .cs**

```
public class PermitController : Controller
{
    #region Private Members       
    IUnitOfWork CEEPMSContext = null;
    #endregion

    #region Constructors

    public PermitController(IUnitOfWork _CEEPMSContext)
    {
        if (_CEEPMSContext == null)
        {
            throw new ArgumentNullException("Object can not be null");
        }
        CEEPMSContext = _CEEPMSContext;
    }

    #endregion
} 
```

所以在这里我想知道如何使用相同的模式生成一个新的存储库，例如“TestRepository.cs”，我可以在其中创建多个存储库对象，例如

```
RebateRepository rebateRepo = new RebateRepository ()
AddressRepository addressRepo  = new AddressRepository() 
```

因为，无论我想创建什么 Repository 对象，我首先需要一个 UnitOfWork 对象，如 PermitController 类中所实现的那样。因此，如果我在每个单独的 Repository 类中遵循相同的做法，这将再次打破工作单元的原则并创建对象上下文的多个实例。

因此，任何想法或建议都将受到高度赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:37:13.543

你的`IUnitOfWork`界面有太多的责任。每次添加新存储库时，都需要更改`IUnitOfWork`接口及其所有实现。

相反，这样的事情怎么样？

```
public interface IUnitOfWork
{
    int SaveChanges();
} 
```

然后，您可以在 Entity Framework ObjectContext 或 DbContext 中实现此接口：

```
public MyCustomContext : DbContext, IUnitOfWork
{
    // ... this class already implements the SaveChanges method
} 
```

然后，您可以构造函数将工作单元注入您的每个存储库。AutoFac 可以确保在同一个 HttpContext 中使用的多个存储库之间共享同一个实例：

```
public class PermitRepository : IPermitRepository
{
    #region Private Members

    private readonly IObjectSet<Permit> _objectSet;
    private readonly IUnitOfWork _unitOfWork;

    #endregion

    #region Constructors

    public PermitRepository(IUnitOfWork unitOfWork, IObjectSet<Permit> objectSet)
    {
          _unitOfWork = unitOfWork;
          _objectSet = objectSet;
    }

    #endregion

    public IEnumerable<RebateViewModel> GetRebatesByPermitId(int _permitId)
    {
       // need to implment
    }
} 
```

然后，当您构造函数将存储库注入控制器时，IUnitOfWork 将自动被构造函数注入存储库。

```
public class PermitController : Controller
{
    #region Private Members       
    private readonly IPermitRepository _permitRepos;
    #endregion

    #region Constructors

    public PermitController(IPermitRepository permitRepos)
    {
        if (permitRepos== null)
        {
            throw new ArgumentNullException("permitRepos");
        }
        _permitRepos = permitRepos;
    }

    #endregion
} 
```

请注意，从存储库中查询数据时，您实际上并没有做任何工作，因此 IUnitOfWork 接口不适用于此处。它适用于插入、更新和删除实体，而不是选择实体。

# xml - soapui 和 XQuery 表达式中的预期结果

> ID：10883206
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:42:06.467
> 
> 标签：xml, xquery, soapui

XML 的摘录：

```
 <ns4:Meldingen>                        
            <ns4:MeldingKey>
               <ns4:Nummer></ns4:Nummer>
               <ns4:Locale></ns4:Locale>
               <ns4:Kanaal></ns4:Kanaal>
               <ns4:Severity>Error</ns4:Severity>
               <ns4:Argumenten>
                  <ns4:Argument></ns4:Argument>
               </ns4:Argumenten>
               <ns4:Module></ns4:Module>
               <ns4:Routine></ns4:Routine>
            </ns4:MeldingKey>
    </ns4:Meldingen> 
```

用于返回数据的 XQuery 脚本：

```
<Result>
{
  for $x in //Meldingen/MeldingKey
   return<Severity>{data($x/Severity/text())}</Severity>
}
</Result> 
```

我的预期结果不止一场比赛：

```
 <Result>
     <Severity>Succes</Severity>
   </Result>

   <Result>
     <Severity>SuccesWithErrors</Severity>
   </Result> 
```

我面临的问题是 XQuery 只能同时返回一个严重性值。在soapui 中是否可以断言2 种可能的严重性。因此，如果 XQuery 返回 Succes 或 SuccesWithErrors 超出预期，否则它将失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:28:56.820

我的解决方案是我更改了返回一般结果的 XQuery 脚本：

```
<Result>
{
for $x in //Meldingen/MeldingKey
where $x/Severity/text()='Succes' or $x/Severity/text()='SuccesWithErrors'  
return<Severity>Succes or SuccesWithErrors as result</Severity>

}
</Result> 
```

我的预期结果是：

```
 <Result>
      <Severity>Succes or SuccesWithErrors as result</Severity>
   </Result> 
```

如果有比赛，那么灯会变绿，那么我肯定知道严重性是两个期望之一。如果 XQuery 返回其他内容，则表示不匹配并且灯变红。

# javascript - 为什么我的 http://localhost CORS 来源不起作用？

> ID：10883211
> 
> 赞同：254
> 
> 时间：2012-06-04T14:42:27.697
> 
> 标签：javascript, html, cors, xmlhttprequest, xmlhttprequest-level2

即使我为服务器（nginx/node.js）设置了适当的标头，我也遇到了这个 CORS 问题。

我可以在 Chrome 网络窗格中看到 -> 响应标头：

```
Access-Control-Allow-Origin:http://localhost 
```

这应该可以解决问题。

这是我现在用来测试的代码：

```
var xhr = new XMLHttpRequest();
xhr.onload = function() {
   console.log('xhr loaded');
};
xhr.open('GET', 'http://stackoverflow.com/');
xhr.send(); 
```

我明白了

> XMLHttpRequest 无法加载[http://stackoverflow.com/](http://stackoverflow.com/)。Access-Control-Allow-Origin 不允许来源[http://localhost 。](http://localhost)

我怀疑这是客户端脚本中的问题，而不是服务器配置中的问题...

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2012-06-05T06:06:16.513

Chrome[不支持 localhost 的 CORS 请求](https://bugs.chromium.org/p/chromium/issues/detail?id=67743)（2010 年发现的错误，2014 年标记为 WontFix）。

为了解决这个问题，您可以使用类似的域`localho.st`（它指向 127.0.0.1，就像 localhost 一样）或使用`--disable-web-security`标志启动 chrome（假设您只是在测试）。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2017-09-30T17:58:23.917

根据@Beau 的回答，Chrome 不支持 localhost CORS 请求，并且在这个方向上不太可能有任何改变。

我使用[Allow-Control-Allow-Origin: * Chrome Extension](https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf)来解决这个问题。该扩展将为 CORS 添加必要的 HTTP 标头：

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: "GET, PUT, POST, DELETE, HEAD, OPTIONS"
Access-Control-Expose-Headers: <you can add values here> 
```

[源代码发布在 Github](https://github.com/vitvad/Access-Control-Allow-Origin/blob/master/background.js)上。

请注意，扩展默认过滤所有 URL。这可能会破坏某些网站（例如：Dropbox）。我已将其更改为仅使用以下 URL 过滤器过滤*localhost URL*

```
*://localhost:*/* 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2020-04-22T18:58:47.447

没有一个扩展对我有用，所以我安装了一个简单的本地代理。在我的情况下[https://www.npmjs.com/package/local-cors-proxy](https://www.npmjs.com/package/local-cors-proxy) 这是一个 2 分钟的设置：

（来自他们的网站）

> ```
> npm install -g local-cors-proxy 
> ```
> 
> 我们要请求的具有 CORS 问题的 API 端点： `https://www.yourdomain.ie/movies/list`
> 
> 启动代理：`lcp --proxyUrl https://www.yourdomain.ie`
> 
> 然后在您的客户端代码中，新的 API 端点： `http://localhost:8010/proxy/movies/list`

对我来说就像一个魅力：你的应用程序调用代理，代理调用服务器。零 CORS 问题。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-06-15T16:11:55.770

真正的问题是，如果我们`-Allow-`为所有请求（`OPTIONS`& `POST`）设置，Chrome 将取消它。以下代码适用于`POST`带有 Chrome 的 LocalHost

```
<?php
if (isset($_SERVER['HTTP_ORIGIN'])) {
    //header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
    header("Access-Control-Allow-Origin: *");
    header('Access-Control-Allow-Credentials: true');    
    header("Access-Control-Allow-Methods: GET, POST, OPTIONS"); 
}   
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_METHOD']))
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS");         
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']))
        header("Access-Control-Allow-Headers:{$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}");

    exit(0);
} 
?> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-09-15T05:06:05.767

Chrome 会很好地从`localhost`来源发出 CORS 请求。这不是 Chrome 的问题。

您无法加载的原因`http://stackoverflow.com`是`Access-Control-Allow-Origin`标题不允许您的`localhost`来源。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-11-17T17:17:51.130

### 同意！应该在服务器端启用 CORS 以从根本上解决问题。然而...

### 对我来说，情况是：

我非常想使用客户端提供的 REST API 在本地测试我的前端（React/Angular/VUE）代码，而无法访问服务器配置。

### 只是为了测试

在尝试了上述所有不起作用的步骤后，我被迫禁用了 chrome 上的 Web 安全和站点隔离试验，同时指定了用户数据目录（尝试跳过这个，没有用）。

### 对于 Windows

```
cd C:\Program Files\Google\Chrome\Application 
```

### 禁用 Web 安全和站点隔离试验

```
chrome.exe  --disable-site-isolation-trials --disable-web-security --user-data-dir="PATH_TO_PROJECT_DIRECTORY" 
```

这终于奏效了！希望这可以帮助！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-11-27T22:34:23.187

我认为我的解决方案可能是最简单的。在我的开发机器上，我在主机文件中添加了一个类似于[http://myfakedomain.notarealtld](http://myfakedomain.notarealtld)的假域，并将其设置为 127.0.0.1。然后我更改了服务器的 CORS 配置（在我的情况下是 S3 存储桶）以允许该域。这样我就可以在 localhost 上使用 Chrome 并且效果很好。

确保您的 CORS 配置考虑了带有端口的整个主机名，即。[http://myfakedomain.notarealtld:3000](http://myfakedomain.notarealtld:3000)

您可以在 Linux、Mac 和 Windows 上轻松修改主机文件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-11-20T19:58:55.840

快速而肮脏的 Chrome 扩展修复：

[Moesif Orign & CORS 转换器](https://chrome.google.com/webstore/detail/moesif-orign-cors-changer/digfbfaphojjndkpccljibejjbppifbc?hl=en-US)

但是，Chrome 确实支持来自 localhost 的跨域请求。确保为`Access-Control-Allow-Origin`for添加标题`localhost`。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-06-19T18:44:24.117

Chrome 确实允许本地主机上的 CORS，我使它与 AWS API 网关/lambda 一起工作。在发送 http 请求时查看开发人员工具中的网络选项卡非常有帮助。我的问题是我的 lambda 函数没有处理预检 OPTIONS 请求，只有 POST 和 GET。我通过接受 OPTIONS 请求并确保从我的 API 返回以下标头解决了这个问题：

*   访问控制允许来源：'*'（或网站域）
*   访问控制允许方法：'POST、GET、OPTIONS'
    *   这是预检响应告诉 chrome 我们现在可以发送 POST/GET 请求
*   访问控制允许标题：“内容类型”
    *   不确定这是否有必要，但它告诉 chrome 请求可以包含 Content-Type 标头

需要注意的重要一点是浏览器发送了 2 组标头。

1.  OPTIONS 标头，其中包括
    *   access-control-request-method: 'POST' （或您请求的任何 http 方法）
    *   来源：'http://localhost:3000'（网站域）
    *   referer: 'http://localhost:3000/' （我相信这是完整的网站路径）
    *   秒获取模式：'cors'
    *   sec-fetch-site: '跨站点'

如果对请求 1 的响应是 200 代码并且响应标头包含： 'access-control-allow-methods': 'POST' （或请求中的任何访问控制请求方法），

2.  实际请求，例如：POST 标头，其中包括
    *   内容类型：'应用程序/json'
    *   产地：同上
    *   推荐人：同上

还有更多的标题，但我认为这些是最重要的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-16T22:50:28.747

我决定不触摸标题并在服务器端进行重定向，它就像一个魅力。

下面的示例适用于当前版本的 Angular（当前为 9）以及可能使用 webpacks DevServer 的任何其他框架。但我认为同样的原则也适用于其他后端。

*所以我在proxy.conf.json*文件中使用了以下配置：

```
{
  "/api": {
    "target": "http://localhost:3000",
    "pathRewrite": {"^/api" : ""},
   "secure": false
 }
} 
```

在 Angular 的情况下，我使用该配置：

```
$ ng serve -o --proxy-config=proxy.conf.json 
```

我更喜欢在 serve 命令中使用代理，但你也可以像这样把这个配置放到*angular.json*中：

```
"architect": {
  "serve": {
    "builder": "@angular-devkit/build-angular:dev-server",
    "options": {
      "browserTarget": "your-application-name:build",
      "proxyConfig": "src/proxy.conf.json"
    }, 
```

也可以看看：

[https://www.techiediaries.com/fix-cors-with-angular-cli-proxy-configuration/](https://www.techiediaries.com/fix-cors-with-angular-cli-proxy-configuration/)

[https://webpack.js.org/configuration/dev-server/#devserverproxy](https://webpack.js.org/configuration/dev-server/#devserverproxy)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2020-09-14T22:46:24.367

解决方案是安装一个扩展来解除 Chrome 所做的阻止，例如：

访问控制-允许-来源-取消阻止 ( [https://add0n.com/access-control.html?version=0.1.5&type=install](https://add0n.com/access-control.html?version=0.1.5&type=install) )。

# c# - 卡住了 httpwebrequest 的使用

> ID：10883212
> 
> 赞同：0
> 
> 时间：2012-06-04T14:42:29.643
> 
> 标签：c#, asp.net, url, httpwebrequest, http-post

我对使用 httpwebrequest 有点困惑。我试图查看一些文章，但由于我是第一次这样做，所以无法从中获得太多。下面是我正在尝试处理的代码，我有几个问题，

a) ASPX 页面定义了一些控件，并且在代码隐藏中我创建了一些控件。当我使用 POST 执行 httpwebrequest 时，是否需要考虑所有控件及其值？我只需要为其中一个控件执行 POST。我可以只为那个控制做吗？

b) 在“(HttpWebRequest)WebRequest.Create”中应该指定什么 URL？我假设它是向用户显示的同一页面。例如，在下面的示例中，它是 ("http://localhost/MyIdentity/Confirm.aspx?ID=New&Designer=True&Colors=Yes");

c) 还有什么我需要在标记或代码中修改或处理以实现 httpwebrequest 吗？

```
 private void OnPostInfoClick(object sender, System.EventArgs e)
{
    ASCIIEncoding encoding = new ASCIIEncoding();
    string postData =  ""; //Read from the stored array and print each element from the array loop here. 
    byte[] data = encoding.GetBytes(postData);

    // Prepare web request...
    HttpWebRequest myRequest =
      (HttpWebRequest)WebRequest.Create("http://localhost/MyIdentity/Confirm.aspx?ID=New&Designer=True&Colors=Yes");
    myRequest.Method = "POST";
    myRequest.ContentType = "application/x-www-form-urlencoded";
    myRequest.ContentLength = data.Length;
    Stream newStream = myRequest.GetRequestStream();
    // Send the data.
    newStream.Write(data, 0, data.Length);
    newStream.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:55:38.403

您*通常*只会将它用于服务器到服务器的通信（不一定用于页面到页面的数据传输）。

如果我正确理解了您的帖子和问题，您似乎只是想将 POST 数据发送到 ASP.Net 应用程序中的其他页面。如果是这样，您可以这样做的一种方法是简单地更改`PostBackUrl`您的提交按钮（表单目标）而不是正常的回发（到同一页面）。

还有其他方法，但这应该是最简单的。

```
<asp:Button ID="Button1" runat="server" Text="Button" PostBackUrl="foo.aspx" /> 
```

在上面，不是 POST 回自身，而是将 POST 发送到`foo.aspx`您可以检查/使用/处理 POST 数据的地方。

* * *

根据您的评论更新：

您不必为此编写通过 HttpWebRequest 的方式。正常的 ASP.net WebForms 模型会为您完成。

鉴于这个简单的 ASP.net Web 表单页面：

```
<form id="form1" runat="server">

Coffee preference:
<asp:RadioButtonList ID="CoffeeSelections" runat="server" RepeatLayout="Flow" RepeatDirection="Horizontal">
   <asp:ListItem>Latte</asp:ListItem>
   <asp:ListItem>Americano</asp:ListItem>
   <asp:ListItem>Capuccino</asp:ListItem>
   <asp:ListItem>Espresso</asp:ListItem>
</asp:RadioButtonList>

<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />

....
</form> 
```

您的内联或后面的代码将如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
   //do whatever you want to do on Page_Load
}

protected void Button1_Click(object sender, EventArgs e)
{
   //handle the button event
   string _foo = CoffeeSelections.SelectedValue;
   ...
} 
```

# java - 如何告诉 Digester 停止解析 XML？

> ID：10883219
> 
> 赞同：0
> 
> 时间：2012-06-04T14:42:57.047
> 
> 标签：java, apache, xml-parsing

我使用 Apache digester 来解析一个大的 XML 文件。当找到某个特定的标记值时，我需要优雅地停止解析 XML。在我的例子中，它是 XML 开头的一种元数据。

到目前为止，我发现的唯一解决方案是创建一个引发异常的规则。但我觉得这更像是hack而不是正确的解决方案。

我可以告诉 Digester 停止处理并跳过 XML 的其余部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:26:02.000

您正在寻找一种在遇到终止条件时短路正常处理的方法。您在驱动程序中捕获的异常是要走的路。

# javascript - 如何在jquery中获取ul的内容更改事件

> ID：10883223
> 
> 赞同：2
> 
> 时间：2012-06-04T14:43:26.220
> 
> 标签：javascript, jquery, bind

嗨，我有一个 ul，该 ul 是通过 ajax 请求填充的。现在我想在其中放置或更改内容时触发一个功能`ul`。我的ul是这样的

```
 <ul class="prodListing" id="prodListing"></ul> 
```

我试过这样的`.bind()`功能`contentchange`

```
$(".prodListing").bind('contentchange', function() {
                alert("called");
                show_Socialshare();
        }); 
```

也试过

```
$(".prodListing").change(function(){
            alert("called");
            show_Socialshare();
}); 
```

但两者都不起作用。任何人都可以告诉我如何在此事件中触发该功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:56:41.617

你可以使用：

```
$(document).bind('ajaxComplete', function(){
    alert("called");
    show_Socialshare();
}); 
```

这将监视文档中的任何 ajax 调用，并在完成后运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:51:20.073

Contentchange 不是真实事件，但如果您知道内容更改的位置，您可以将其作为自定义事件触发。

```
 $(".prodListing").trigger("contentchange") 
```

更新：然而，在你的 ajaxrequest 成功处理这个问题确实可能是你需要的。（见其他评论）

# pyqt4 - 运行 PyQt4 演示 --- 如何？

> ID：10883228
> 
> 赞同：0
> 
> 时间：2012-06-04T14:43:36.420
> 
> 标签：pyqt4

我最近下载并安装了最新版本的 PyQt4 for Windows。我测试了一些简单的 PyQt4 示例，没有发现明显的问题。但是，当我按照演示的自述文件中给出的说明进行操作时，我无法执行演示：

找到 PyQt 示例和演示启动器 ============================================ =

在 Windows 上：

可以通过 Windows 开始菜单访问启动器。在包含 PyQt4 的子菜单中选择名为“Examples and Demos”条目的菜单条目。

我可以毫无问题地找到并单击“示例和演示”条目；但是，我永远无法看到实际执行的演示。我正在使用带有 Python 2.6 的 Windows Vista（32 位）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:24:34.390

尝试进入`<PythonInstallation>\Lib\site-packages\PyQt4\examples`cmd 提示符，看看是否可以直接从那里运行示例。如果它不起作用，那至少应该会给你一些错误消息。

louncher 应该可以从 运行`demos\qtdemo\qtdemo.pyw`，但您也可以在没有 loucer 的情况下运行单个示例。

# c# - 检测泛型中的泛型类型

> ID：10883230
> 
> 赞同：1
> 
> 时间：2012-06-04T14:43:39.430
> 
> 标签：c#

我有一个方法可以接受许多不同类型的对象进行存储：

```
public void Store<T>(T item)
{
    // works fine
    if (item is Foo)
    {
      // ...
    }
    // works fine
    else if (item is Observation<ImageSignal>)
    {
      // ...
    }

    // isn't detected
    else if (item is Observation<Signal<ISpectrum>>)
    {
      // ...
    }

    else 
    {
      // Observation<Signal<ISpectrum>> always hits this.
      throw new NotSupportedException();
    }
} 
```

谁能告诉我如何检测到这一点？

**编辑：** 我实际上是在传递一个包装这个对象的对象。埃里克是对的。问题解决了。不过，感谢您的快速回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:47:19.113

In this case wouldn't it be better to overload the `Store` function? It would be much easier to follow the logic.

```
public void Store(Foo item)
{
}

public void Store(Observation<ImageSignal> item)
{
}

public void Store(Observation<Signal<ISpectrum>> item)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:45:28.080

`typeof(T)` or `item.GetType()`. hth

# windows - schtasks：设置工作目录？

> ID：10883235
> 
> 赞同：2
> 
> 时间：2012-06-04T14:43:49.647
> 
> 标签：windows, powershell, cmd

我有一个我试图在登录时运行的程序，它依赖于它所在目录中的文件。通过从命令行手动运行程序，我已经 cd'd 到，一切运行正常。但是，如果我安排一个任务来运行该程序，我会从我的程序中收到一个错误，抱怨找不到它需要的文件。所以我的问题是/是：1.）计划任务的工作目录是程序的位置吗？2.）如果没有，我将如何将工作目录设置为程序的位置？

这是我正在使用安排我的任务的代码：

```
SCHTASKS /Create /TN "Test" /TR $MyLocation\Test.exe /sc onlogon /RL Highest 
```

其中“$MyLocation”是我设置为引用程序目录的 powershell 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:22:14.633

我过去通过使用批处理文件解决了这个问题。您可以在批处理文件中使用一个巧妙的技巧，它将为您提供批处理文件所在的目录。因此，您可以非常轻松地运行您想要的应用程序。使用以下内容创建一个批处理文件并将其放在应用程序旁边的目录中，然后将其路径设置为 /TR 参数的值。

```
%~dp0\Test.exe 
```

严格来说，反斜杠不是必需的，因为`%~dp0`无论如何都包含尾随反斜杠。我认为它使批处理文件更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:35:47.237

如果您运行脚本并将 $MyLocation 作为参数发送，则类似这样的操作将设置任务 o：

```
 $cmdFile = "$MyLocation\Test.cmd"
 New-Item $cmdFile -type file
 "cd $MyLocation" >> $cmdFile
 "powershell -command '& {$($MyLocation)\Test.exe}'" >> $cmdFile
 SCHTASKS /Create /TN "Test" /TR $cmdFile /sc onlogon /RL Highest 
```

吉斯利

# javascript - 如何停止有弹性的 JQuery 动画？

> ID：10883238
> 
> 赞同：2
> 
> 时间：2012-06-04T14:44:07.503
> 
> 标签：javascript, jquery, animation, sliding

在我正在开发的 web 应用程序中，我想创建一些*滑块* `div`，它们将分别通过 mouseover 和 mouseout 上下移动。我目前使用 JQuery 的`hover()`功能实现它，根据需要使用`animate()`和减少/增加它的`top`css 值. 实际上，这工作得很好。

问题是它往往会卡住。如果将鼠标移到它上面（尤其是靠近底部），然后快速移开它，它会连续上下滑动，直到完成 3-5 个循环才会停止。对我来说，这个问题似乎与一个动画在另一个动画完成之前开始有关（例如，两个动画试图运行，所以它们来回滑动。）

好的，现在是代码。这是我正在使用的基本 JQuery：

```
$('.slider').hover(
    /* mouseover */
    function(){
        $(this).animate({
            top : '-=120'
        }, 300);
    },
    /* mouseout*/
    function(){
        $(this).animate({
            top : '+=120'
        }, 300);
    }
); 
```

我还重新创建了[JSFiddle](http://jsfiddle.net/W5EsJ/7/)中的行为。

关于发生了什么的任何想法？:)

==编辑==更新的JSFiddle

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:56:24.793

您可以使用[.stop()](http://jqapi.com/#p=stop)也可以使用外部容器位置

```
$(document).ready(function() {
    $('.slider').hover(
        /* mouseover */
        function(){
            $(this).stop().animate({
                    top : $('.outer').position().top
            }, 300);
        },
        /* mouseout*/
        function(){
            $(this).stop().animate({
                top : $('.outer').position().top + 120
            }, 300);
        }
    );
});
​ 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/W5EsJ/19/)**

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T15:43:51.953

它并不完美，但添加`.stop(true,true)`会阻止您看到的大部分内容。

[http://jsfiddle.net/W5EsJ/18/](http://jsfiddle.net/W5EsJ/18/)

如果您从下往上快速悬停，它仍然会闪烁，因为您将鼠标移出 div 导致 mouseout 事件触发，从而使 div 向下移动。

您可以通过减少延迟来减少闪烁，但它仍然会存在，直到延迟为 0（无动画）

**更新**

我想了想，意识到有一个明显的解决方案。类似 Hoverintent 的功能！

[http://jsfiddle.net/W5EsJ/20/](http://jsfiddle.net/W5EsJ/20/)

```
$(document).ready(function() {
    var timer;
    $('.slider').hover(
        /* mouseover */
        function(){
            var self = this;
            timer = setTimeout(function(){
                $(self).stop(true,true).animate({
                    top : '-=120'
                }, 300).addClass('visible');
            },150)
        },
        /* mouseout*/
        function(){
            clearTimeout(timer);
            $(this).filter(".visible").stop(true,true).animate({
                top : '+=120'
            }, 300).removeClass("visible");
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:49:37.847

无法重现您的问题，但我相信这`hover`会被多次调用。要解决此问题，您可以检查 div 是否已在动画中。如果是，则不要再次运行另一个动画。

添加以下代码来检查 div 是否已经“动画化”：

```
if ($(this).is(':animated')) {
   return;
} 
```

代码： http: [//jsfiddle.net/W5EsJ/2/](http://jsfiddle.net/W5EsJ/2/)
参考：http://api.jquery.com/animated-selector/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T15:01:29.690

我理解了这个问题并重现了它，它发生在从下往上悬停时。鼠标悬停是导致问题的原因，因为当鼠标悬停在图像上时将调用动画函数。您需要通过使用鼠标进入和鼠标离开来控制此处发生的情况，查看类似的示例：[Jquery Animate on Hover](https://stackoverflow.com/questions/1747039/jquery-animate-on-hover)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T15:06:14.717

之所以这样，是因为悬停正在排队，导致它多次上下滑动。有一个名为 hoverIntent 的插件可以解决这个问题。 [http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

如果您决定使用 hoverIntent，您唯一需要更改的代码是 .hover > .hoverIntent

# asp-classic - 在经典 ASP 中使用附件字段

> ID：10883246
> 
> 赞同：2
> 
> 时间：2012-06-04T14:44:27.810
> 
> 标签：asp-classic, ms-access-2007, attachment-field

我正在尝试在 Microsoft 访问和经典 asp 中使用附件数据类型来访问数据库。我正在尝试从经典的 asp 表单中插入附件。我收到错误“无法插入多个值”。我在网上尝试了很多，但我找不到最合适的解决方案。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:59:45.417

AFAIK，对新的 ACCDB 附件字段类型的支持尚未包含在 ADO 对象模型中。您将需要找到一种不同的方法来与您的 Access 数据库进行交互。我不知道哪种方法适用于经典 ASP。

我的倾向是修改没有附件字段的数据库。这对您来说似乎是一个痛苦的建议，但它可能比尝试使用经典 ASP 中的附件字段更痛苦。

# symfony1 - Symfony 西里尔文路由 slug

> ID：10883247
> 
> 赞同：1
> 
> 时间：2012-06-04T14:44:37.697
> 
> 标签：symfony1, symfony-1.4, cyrillic

我对 slugify 路由参数有问题。我想用“-”替换所有间隔和符号。当参数使用拉丁字母时，所有工作，但如果我尝试使用西里尔字母 slugify 参数，我会出错。

路由：

```
 catTests:
      url:    /cat/:id/:name_slug
      class:   sfDoctrineRoute
      options: { model: categories, type: object }
      param: { module: categories, action: testsByCat }
      requirements:
        id: \d+ 
```

蛞蝓功能：

```
static public function slugify($text)
{
  // replace all non letters or digits by -
  $text = preg_replace('/\W+/', '-', $text);

  // trim and lowercase
  $text = strtolower(trim($text, '-'));

  return $text;
}

public function getNameSlug()
{
  $text= Category::slugify($this->getName());
  return $text;
} 
```

示例：我在数据库中有两个名称：

*   英语
*   Български език

通常whitin函数url是：

*   英语+语言
*   Български+език

当我把函数结果是：

*   英语
*   并且在西里尔文版本参数为空。

    > 解析 URL “/cat/1/” (/) 后的空模块和/或操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:57:27.637

我建议你使用[Doctrine::urlize](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Inflector.php#L249)而不是你自己的 slugify 函数（因为你正在使用 Doctrine）。

然后，替换你的函数，如：

```
public function getNameSlug()
{
  return Doctrine_Inflector::urlize($this->getName());
} 
```

**编辑：**

事实上，Doctrine 似乎不能很好地处理 Cyrillic（即使在 2.0 中）。您将不得不自己处理它。我发现[了这个功能](http://pastebin.com/X1NAsnrJ)：

```
 public static function replaceCyrillic ($text)
  {
    $chars = array(
      'ґ'=>'g','ё'=>'e','є'=>'e','ї'=>'i','і'=>'i',
      'а'=>'a', 'б'=>'b', 'в'=>'v',
      'г'=>'g', 'д'=>'d', 'е'=>'e', 'ё'=>'e',
      'ж'=>'zh', 'з'=>'z', 'и'=>'i', 'й'=>'i',
      'к'=>'k', 'л'=>'l', 'м'=>'m', 'н'=>'n',
      'о'=>'o', 'п'=>'p', 'р'=>'r', 'с'=>'s',
      'т'=>'t', 'у'=>'u', 'ф'=>'f', 'х'=>'h',
      'ц'=>'c', 'ч'=>'ch', 'ш'=>'sh', 'щ'=>'sch',
      'ы'=>'y', 'э'=>'e', 'ю'=>'u', 'я'=>'ya', 'é'=>'e', '&'=>'and',
      'ь'=>'', 'ъ' => '',
    );

    return strtr($text, $chars);
  } 
```

进而 ：

```
public function getNameSlug()
{
  $slug = Category::replaceCyrillic($this->getName());
  return Doctrine_Inflector::urlize($slug);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:47:25.410

你也可以在你的项目中全局修复这种行为。感谢 symfony 自动加载器，它在插件之前添加了全局目录，您可以这样做：

```
mkdir lib/doctrine
touch lib/doctrine/Inflector_Cyrilic.php
touch lib/doctrine/Sluggable.php
touch test/unit/TransliterationTest.php 
```

**lib/doctrine/Inflector_Cyrilic.php：**

```
<?php
class Doctrine_Inflector_Cyrilic extends Doctrine_Inflector
{

    /**
     * @param string $text
     * @param Doctrine_Record $record
     *
     * @return string
     */
    public static function urlizeExtended($text, $record) {
        // we need to use other method name because of PHP strict standards (one more attribute unlike parent so its not compatible)
        // $record attribute is given here standardly, it was only not used before

        //XXX this sollution expect youll have all slugs in Translation records (in I18n in schema.yml)
        // You can alter this conditions how do you need for your project
        // this is important because this should not be used on other writing systems

        if (preg_match('/Translation$/', get_class($record))) {
            if ($record->lang === 'ru') {
                $text = self::cyrilicToLatin($text);
            }
        }
        return parent::urlize($text);
    }

    /**
     * @param string $text
     *
     * @return string
     */
    public static function cyrilicToLatin ($text)
    {
        $chars = array(
            'ґ'=>'g','ё'=>'e','є'=>'e','ї'=>'i','і'=>'i',
            'а'=>'a', 'б'=>'b', 'в'=>'v',
            'г'=>'g', 'д'=>'d', 'е'=>'e', 'ё'=>'e',
            'ж'=>'zh', 'з'=>'z', 'и'=>'i', 'й'=>'i',
            'к'=>'k', 'л'=>'l', 'м'=>'m', 'н'=>'n',
            'о'=>'o', 'п'=>'p', 'р'=>'r', 'с'=>'s',
            'т'=>'t', 'у'=>'u', 'ф'=>'f', 'х'=>'h',
            'ц'=>'c', 'ч'=>'ch', 'ш'=>'sh', 'щ'=>'sch',
            'ы'=>'y', 'э'=>'e', 'ю'=>'u', 'я'=>'ya', 'é'=>'e',
            'ь'=>'', 'ъ' => '',
        );
        return strtr($text, $chars);
    }

} 
```

**lib/doctrine/Sluggable.php：**

```
<?php
/**
* we cannot use inheritance here because we are replacing class by otherone with the same name
*/
class Doctrine_Template_Sluggable extends Doctrine_Template
{

    /**
     * Array of Sluggable options
     *
     * @var string
     */
    protected $_options = array(
        'name'          =>  'slug',
        'alias'         =>  NULL,
        'type'          =>  'string',
        'length'        =>  255,
        'unique'        =>  TRUE,
        'options'       =>  array(),
        'fields'        =>  array(),
        'uniqueBy'      =>  array(),
        'uniqueIndex'   =>  TRUE,
        'canUpdate'     =>  FALSE,
        'builder'       =>  array('Doctrine_Inflector_Cyrilic', 'urlizeExtended'),
        'provider'      =>  NULL,
        'indexName'     =>  NULL
    );

    /**
     * Set table definition for Sluggable behavior
     *
     * @return void
     */
    public function setTableDefinition()
    {
        $name = $this->_options['name'];
        if ($this->_options['alias']) {
            $name .= ' as ' . $this->_options['alias'];
        }
        if ($this->_options['indexName'] === NULL) {
            $this->_options['indexName'] = $this->getTable()->getTableName().'_sluggable';
        }
        $this->hasColumn($name, $this->_options['type'], $this->_options['length'], $this->_options['options']);

        if ($this->_options['unique'] == TRUE && $this->_options['uniqueIndex'] == TRUE) {
            $indexFields = array($this->_options['name']);
            $indexFields = array_merge($indexFields, $this->_options['uniqueBy']);
            $this->index($this->_options['indexName'], array('fields' => $indexFields,
                    'type' => 'unique'));
        }

        $this->addListener(new Doctrine_Template_Listener_Sluggable($this->_options));
    }

} 
```

**测试/单元/TransliterationTest.php：**

```
<?php

// some bootstrapping of your tests

$record = Doctrine_Core::getTable('YourTable')->create(array(
        'record params....'
    ));
$record->Translation['ru']->name = 'холодильник';
$record->save();
$t->ok(preg_match('/^holodilnik/', $record->Translation['ru']->slug), '        RU slug transliterated cyrilic to latin'); 
```

如果您想在 cli 任务中使用它，请注意，由于它的运行环境，您必须在那里手动预加载它。sf1.4 cli 任务有自己特定的运行环境，在我的项目中，它不会在 Doctrine 原始类之前预加载这些类。

```
//i have this in my abstract class which is parent of each my cli tasks
require_once(implode(DIRECTORY_SEPARATOR, array(
        __DIR__, '..',
        'Doctrine',
        'Sluggable.php'
    ))); 
```

# android - 是否可以在图像视图中获取图像的图像路径？

> ID：10883248
> 
> 赞同：1
> 
> 时间：2012-06-04T14:44:37.713
> 
> 标签：android, sql, image, path

我在图像视图中设置了图像。现在我想保存这个状态并且需要知道那个图像的图像路径。有没有办法做到这一点？

更新：

```
// Decode, scale and set the image.
            Bitmap myBitmap = BitmapFactory.decodeFile(selectedImagePath);
            Bitmap scaledBitmap = Bitmap.createScaledBitmap(myBitmap, NEW_WIDTH, NEW_HEIGHT, true);
            myBitmap.recycle();
            myBitmap = null;

            mImageView.setImageBitmap(scaledBitmap); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:48:45.887

不是直接的，一旦图像被设置在 an 上，`ImageView`它就会变成 a `Drawable`，而其他所有内容都被遗忘了。但是，您可以为此目的使用标签。任何视图都可以有一个与之关联的标签，该标签表示有关该视图的一些元数据。您可以执行以下操作：

```
ImageView iv; //Declared elsewhere
Uri imagePath = Uri.parse("...");
//Set the image itself
iv.setImageURI(imagePath);
//Add the path value as a tag
iv.setTag(imagePath);

//Sometime in the future, retrieve it
Uri path = (Uri)iv.getTag(); 
```

您还可以考虑创建一个子类`ImageView`来封装这个额外的函数，以帮助您的代码更易于阅读和维护。

高温高压

# listview - jQuery mobile listview 外部 data-role="page" 包装器

> ID：10883249
> 
> 赞同：0
> 
> 时间：2012-06-04T14:44:48.133
> 
> 标签：listview, jquery-mobile

如何将 jQuery 移动列表视图样式应用于位于 data-role="page" 包装器之外的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:31:11.257

将您的列表放在页面包装器中，在它被渲染后移动它是您想要的。

```
$('#page').before($("#menu")); 
```

# java - 检索 JSTL 标记中的 cookie 和数组值

> ID：10883251
> 
> 赞同：5
> 
> 时间：2012-06-04T14:44:57.017
> 
> 标签：java, jsp, jstl

在检索 cookie 时，我需要使用：

```
<c:forEach items="${cookie}" var="currentCookie">  
    ${currentCookie.value.name} </br>
</c:forEach> 
```

但是，在使用自定义数组时，为什么我们需要跳过 .value 函数？

```
<c:forEach items="${myList}" var="myList">  
    ${myList.name} </br>
</c:forEach> 
```

Cookie 包含一个 .getValue 函数（），它以字符串格式返回 cookie 的内容，那么使用 currentCookie.value.name 是如何工作的呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T15:05:31.043

`${cookie}`指向 a的[`Map<String, Cookie>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)cookie 名称作为映射键，[`Cookie`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html)对象作为映射值。`Map`对in 的每次迭代都会`<c:forEach>`给你一个[`Map.Entry`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)back ，它又具有[`getKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getKey%28%29)和[`getValue()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getValue%28%29)方法。您的困惑是`Cookie`对象又*具有*方法[`getValue()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#getValue%28%29)。

```
<c:forEach items="${cookie}" var="currentCookie">  
    Cookie name as map entry key: ${currentCookie.key}<br/>
    Cookie object as map entry value: ${currentCookie.value}<br/>
    Name property of Cookie object: ${currentCookie.value.name}<br/>
    Value property of Cookie object: ${currentCookie.value.value}<br/>
</c:forEach> 
```

这是`Map<String, Cookie>`因为它允许您在事先知道名称的情况下轻松直接访问 cookie 值。下面的例子假设它是`cookieName`：

```
${cookie.cookieName.value} 
```

顺便说一句，您的列表示例无效。`var`不应引用与列表本身相同的名称。

# asp.net-mvc-3 - 如果填写了另一个字段，则 MVC 3 字段是必需的

> ID：10883253
> 
> 赞同：4
> 
> 时间：2012-06-04T14:45:00.960
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个简单的问题。

例如，我在模型 ex 上映射了两个文件：textbox_1 和 textbox_2。

我想问是否存在一种方式（前强制装饰器），仅当我填写 textbox_1 时才强制 textbox_2。如果我不填写 textbox_1 文本框 2 是可选的。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T16:02:19.073

对此，ASP.NET MVC 中没有现成的解决方案。这是我为解决它而创建的属性。该属性有 3 种可用的用法：

*   传递给构造函数：仅`null`当`targetValue`依赖字段为空时才需要。
*   将任何值传递为`tagetValue`：仅当依赖字段等于传入任何值时才需要。
*   传递`"*"`为 `tagetValue`：仅在填充依赖字段时才需要。

在您的情况下，您需要传递`"*"`给`targetValue`构造函数，这意味着依赖属性可以是任何非空值。

**注意**：它包含服务器端和客户端（+ 不显眼）验证。

服务器端属性类：

```
public class RequiredIfAttribute : ValidationAttribute, IClientValidatable
{
    protected RequiredAttribute _innerAttribute;

    public string DependentProperty { get; set; }
    public object TargetValue { get; set; }

    public bool AllowEmptyStrings
    {
        get
        {
            return _innerAttribute.AllowEmptyStrings;
        }
        set
        {
            _innerAttribute.AllowEmptyStrings = value;
        }
    }

    public RequiredIfAttribute(string dependentProperty, object targetValue)
    {
        _innerAttribute = new RequiredAttribute();
        DependentProperty = dependentProperty;
        TargetValue = targetValue;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // get a reference to the property this validation depends upon
        var containerType = validationContext.ObjectInstance.GetType();
        var field = containerType.GetProperty(DependentProperty);

        if (field != null)
        {
            // get the value of the dependent property
            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);
            // trim spaces of dependent value
            if (dependentValue != null && dependentValue is string)
            {
                dependentValue = (dependentValue as string).Trim();

                if (!AllowEmptyStrings && (dependentValue as string).Length == 0)
                {
                    dependentValue = null;
                }
            }

            // compare the value against the target value
            if ((dependentValue == null && TargetValue == null) ||
                (dependentValue != null && (TargetValue == "*" || dependentValue.Equals(TargetValue))))
            {
                // match => means we should try validating this field
                if (!_innerAttribute.IsValid(value))
                    // validation failed - return an error
                    return new ValidationResult(FormatErrorMessage(validationContext.DisplayName), new[] { validationContext.MemberName });
            }
        }

        return ValidationResult.Success;
    }

    public virtual IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "requiredif",
        };

        string depProp = BuildDependentPropertyId(metadata, context as ViewContext);

        // find the value on the control we depend on;
        // if it's a bool, format it javascript style 
        // (the default is True or False!)
        string targetValue = (TargetValue ?? "").ToString();
        if (TargetValue is bool)
            targetValue = targetValue.ToLower();

        rule.ValidationParameters.Add("dependentproperty", depProp);
        rule.ValidationParameters.Add("targetvalue", targetValue);

        yield return rule;
    }

    private string BuildDependentPropertyId(ModelMetadata metadata, ViewContext viewContext)
    {
        // build the ID of the property
        string depProp = viewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(DependentProperty);
        // unfortunately this will have the name of the current field appended to the beginning,
        // because the TemplateInfo's context has had this fieldname appended to it. Instead, we
        // want to get the context as though it was one level higher (i.e. outside the current property,
        // which is the containing object, and hence the same level as the dependent property.
        var thisField = metadata.PropertyName + "_";
        if (depProp.StartsWith(thisField))
            // strip it off again
            depProp = depProp.Substring(thisField.Length);
        return depProp;
    }
} 
```

客户端（包括不显眼的验证）：

```
$.validator.addMethod('requiredif',
    function (value, element, parameters) {
        var id = '#' + parameters['dependentproperty'];

        // get the target value (as a string, 
        // as that's what actual value will be)
        var targetvalue = parameters['targetvalue'];
        targetvalue = (targetvalue == null ? '' : targetvalue).toString();

        // get the actual value of the target control
        // note - this probably needs to cater for more 
        // control types, e.g. radios
        var control = $(id);
        var controltype = control.attr('type');
        var actualvalue =
            controltype === 'checkbox' ?
            control.attr('checked').toString() :
            control.val();

        // if the condition is true, reuse the existing 
        // required field validator functionality
        if ($.trim(targetvalue) === $.trim(actualvalue) || ($.trim(targetvalue) === '*' && $.trim(actualvalue) !== ''))
            return $.validator.methods.required.call(
              this, value, element, parameters);

        return true;
    });

$.validator.unobtrusive.adapters.add(
    'requiredif',
    ['dependentproperty', 'targetvalue'],
    function (options) {
        options.rules['requiredif'] = {
            dependentproperty: options.params['dependentproperty'],
            targetvalue: options.params['targetvalue']
        };
        options.messages['requiredif'] = options.message;
    }); 
```

# android - Ignore backspace in EditText

> ID：10883255
> 
> 赞同：0
> 
> 时间：2012-06-04T14:45:02.597
> 
> 标签：android, android-edittext

I have an `EditText` that I need to ignore `Backspace` keyEvents. I have the following class, but it doesn't work:

```
public class CustomEditText extends EditText    {

    public CustomEditText(Context context, AttributeSet attrs) {
        super(context);
        // TODO Auto-generated constructor stub
        this.setOnKeyListener(new OnKeyListener() {                 
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                //You can identify which key pressed buy checking keyCode value with KeyEvent.KEYCODE_
                if(keyCode == KeyEvent.KEYCODE_DEL){  
                    //do nothing
                }
                return true;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:52:57.783

尝试覆盖[onKeyDown](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)方法而不是添加监听器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:54:13.350

尝试在此处返回 false：`if(keyCode == KeyEvent.KEYCODE_DEL){
return false; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:49:30.223

查出来`InputFilter`，它可能可以做到这一点

[https://stackoverflow.com/a/4401227/614231](https://stackoverflow.com/a/4401227/614231)

我已经使用 对`InputFilter`输入进行其他类型的过滤，但我不确定您是否可以实际使用它来防止退格字符。

# wpf - WPF Expand RadPanelBarItem only in available space

> ID：10883257
> 
> 赞同：1
> 
> 时间：2012-06-04T14:45:06.000
> 
> 标签：wpf, radpanelbar

I have a RadPanelBar with each RadPanelItem having a list of entities(Different list in each Item). Each item in the List is shown as a GroupBox. With a large number of items the RadPanelBar has to be scrolled in order for the other RadPanelBarItems to be visible. I want it such that the scrollbar appears within each RadPanelBarItem so that all the RadPanelBarItems will be visible on the screen at the same time and if the contents of an item are too long, the user has to scroll only within each RadPanelBarItem.

I'm using the ItemsSource property of each RadPanelBarItem and setting its ItemTemplate to display the GroupBoxes.

Is there a good way to do this, so that everything(Height and such) is kept dynamic?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:18:16.440

似乎没有简单的方法可以做到这一点。当我问一个类似的问题时，我得到了 Telerik 的以下回复：

> 如果我的情况正确，您有几种选择：
> 
> 1) 设置 PanelBarItem 的大小。这样，您将限制它们的大小。如果您将项目总和大小与 PanelBar 的大小相匹配，则应消除剪报。
> 
> 2) 自定义 PanelBar 和 PanelBarItem 控件模板，以支持自动按比例调整大小。在这种情况下，您应该从 PanelBar 控件模板中删除 ScrollViewer，并在顶级 PanelBarItem 控件模板中添加一个 ScrollViewer（在 ItemsPresenter 周围）。此外，您应该将 RadPanelBar ItemsPanel 更改为适当的面板。大概。它将是一个自定义面板，以便垂直测量大小相等的项目。

我已经尝试做一个自定义面板并修改控制模板。我已经让它工作了，但是代码很多，但是这里有：

**分布式高度面板.cs**

这是进行布局并分配可用高度的自定义面板。

```
/// <summary>
/// Panel that distributes the available height amongst it's children (like a vertical StackPanel but the children are not allowed to be placed "outside" the parent's visual area).
/// </summary>
public class DistributedHeightPanel : Panel
{
    /// <summary>
    /// If set to a positive number, no child will get less height than specified.
    /// </summary>
    public double ItemsMinHeight
    {
        get { return (double)GetValue(ItemsMinHeightProperty); }
        set { SetValue(ItemsMinHeightProperty, value); }
    }

    public static readonly DependencyProperty ItemsMinHeightProperty =
        DependencyProperty.Register("ItemsMinHeight", typeof(double), typeof(DistributedHeightPanel), new UIPropertyMetadata(0.0));

    public DistributedHeightPanel()
        : base()
    {
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        List<double> heights = new List<double>();
        //Find out how much height each child desire if it was the only child
        foreach (UIElement child in InternalChildren)
        {
            child.Measure(availableSize);
            heights.Add(child.DesiredSize.Height);
        }
        //Calculate ratio
        double ratio = GetRatio(availableSize.Height, heights);
        //Do the "real" Measure
        foreach (UIElement child in InternalChildren)
        {
            double actualHeight = child.DesiredSize.Height;
            if (ratio < 1)
            {
                //If ratio < 1 then the child can't have all the space it wants, calculate the new height
                actualHeight = child.DesiredSize.Height * ratio;
            }
            if (ItemsMinHeight > 0 && actualHeight < ItemsMinHeight)
            {
                //If ItemsMinHeight is set and the child is to small, then set the childs height to ItemsMinHeight
                actualHeight = ItemsMinHeight;
            }
            child.Measure(new Size(availableSize.Width, actualHeight));
        }
        return availableSize;
    }

    /// <summary>
    /// Calculates the ratio for fitting all heights in <paramref name="heightsToDistribute"/> in the total available height (as supplied in <paramref name="availableHeight"/>)
    /// </summary>
    private double GetRatio(double availableHeight, List<double> heightsToDistribute)
    {
        //Copy the heights list
        List<double> heights = new List<double>(heightsToDistribute);
        double desiredTotalHeight = heights.Sum();
        //If no height is desired then return 1
        if (desiredTotalHeight <= 0)
            return 1;
        //Calculate ratio
        double ratio = availableHeight / desiredTotalHeight;
        //We only want to compress so if ratio is higher than 1 return 1
        if (ratio > 1)
        {
            return 1;
        }
        //Check if heights become too small when the ratio is used
        int tooSmallCount = heights.Count(d => d * ratio < ItemsMinHeight);
        //If no or all all heights are too small: return the calculated ratio
        if (tooSmallCount == 0 || tooSmallCount == heights.Count)
        {
            return ratio;
        }
        else
        {
            //Remove the items which becomes too small and get a ratio without them (they will get ItemsMinHeight)
            heights.RemoveAll(d => d * ratio < ItemsMinHeight);
            return GetRatio(availableHeight - ItemsMinHeight * tooSmallCount, heights);
        }
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        //Arrange all children like a vertical StackPanel
        double y = 0;
        foreach (UIElement child in InternalChildren)
        {
            //child.DesiredSize.Height contains the correct value since it was calculated in MeasureOverride
            child.Arrange(new Rect(0, y, finalSize.Width, child.DesiredSize.Height));
            y += child.DesiredSize.Height;
        }
        return finalSize;
    }
} 
```

**主窗口.xaml**

包含控件模板作为名为 DistributedHeightRadPanelBarStyle 的样式和用于测试的 RadPanelBar。

```
<Window x:Class="WpfApplication9.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication9"
    Title="MainWindow" Height="350" Width="525" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation">
<Window.Resources>
    <Style x:Key="DistributedHeightRadPanelBarStyle" TargetType="{x:Type telerik:RadPanelBar}">
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:DistributedHeightPanel ItemsMinHeight="22" /> <!-- 22 is fine for collapsed headers -->
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type telerik:RadPanelBar}">
                    <Grid>
                        <telerik:LayoutTransformControl x:Name="transformationRoot" IsTabStop="False">
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                <!-- <ScrollViewer x:Name="ScrollViewer" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" HorizontalScrollBarVisibility="Auto" IsTabStop="False" Padding="{TemplateBinding Padding}" VerticalScrollBarVisibility="Auto" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">-->
                                <telerik:StyleManager.Theme>
                                    <telerik:Office_BlackTheme/>
                                </telerik:StyleManager.Theme>
                                <ItemsPresenter/>
                                <!--</ScrollViewer>-->
                            </Border>
                        </telerik:LayoutTransformControl>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Orientation" Value="Horizontal">
                            <Setter Property="LayoutTransform" TargetName="transformationRoot">
                                <Setter.Value>
                                    <RotateTransform Angle="-90"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Orientation" Value="Vertical"/>
    </Style>
</Window.Resources>
<Grid>
    <telerik:RadPanelBar Style="{StaticResource ResourceKey=DistributedHeightRadPanelBarStyle}" VerticalAlignment="Top" ExpandMode="Multiple" HorizontalAlignment="Stretch">
        <telerik:RadPanelBarItem DropPosition="Inside" Header="A - Colors" IsExpanded="True">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Height="100" Background="AliceBlue" Text="I'm AliceBlue" />
                    <TextBlock Height="100" Background="AntiqueWhite" Text="I'm AntiqueWhite" />
                </StackPanel>
            </ScrollViewer>
        </telerik:RadPanelBarItem>
        <telerik:RadPanelBarItem DropPosition="Inside" Header="B - Colors" IsExpanded="True">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Height="100" Background="Beige" Text="I'm Beige" />
                    <TextBlock Height="100" Background="Bisque" Text="I'm Bisque" />
                </StackPanel>
            </ScrollViewer>
        </telerik:RadPanelBarItem>
        <telerik:RadPanelBarItem DropPosition="Inside" Header="C - Colors">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Height="100" Background="CadetBlue" Text="I'm CadetBlue" />
                    <TextBlock Height="100" Background="Chartreuse" Text="I'm Chartreuse" />
                </StackPanel>
            </ScrollViewer>
        </telerik:RadPanelBarItem>
    </telerik:RadPanelBar>
</Grid> 
```

也许这个解决方案对你来说太晚了，但希望有人会发现它有用。

# css - CSS padding shorthand confusion

> ID：10883262
> 
> 赞同：2
> 
> 时间：2012-06-04T14:45:25.607
> 
> 标签：css, padding

```
padding:45px 65px 95px; 
```

Why is it that the shorthand above would set the LEFT padding to 65px when a value for the left padding was not even given?

This is a little confusing to me.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T14:48:36.830

这确实令人困惑，但这只是 CSS 的作品。如果您指定 1 个值，它将用于所有四个边。如果您指定两个，第一个将是`top/bottom`填充，第二个将是`left/right`. 因此，当指定三个时，它会`top, left/right, bottom`与仅提供两个值时的用法相呼应。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T14:47:31.067

顺序为：**上、右、下、左**

想想*TRBL*（麻烦）。或顺时针。

使用速记时，如果没有给出，则使用*对方*的值。在您的情况下，使用`65px`for *left*和`65px`from *right*。

更进一步，如果我有：

```
padding: 10px 20px; 
```

`10px`将导致*顶部*和*底部*以及`20px`右侧和左侧。

最后：

```
padding: 10px; 
```

将导致所有内容均为 10px。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T14:52:17.080

速记符号总是从它们相反的值中复制缺失的元素。

```
padding: top right bottom left; 
padding: top right; // bottom = top, left = right
padding: top right bottom; // left = right 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:49:44.903

实际上顺序是上、右、下、左。如果只给出两个值，则顶部和底部和左右将采用相同的值。因为你给了 65px 到右边，所以左边也一样。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-04T14:47:48.903

这是简写​​符号，通常您只提供 2 个参数，而不是 3 个参数，例如：

```
margin: 0 auto; 
```

这意味着顶部和底部为 0，左右为自动。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-04T14:48:30.123

顺序是上、右、下、左。当您省略一个数字时，它会选择相反的值：

```
x = t=x, r=x, b=x, l=x
x,y = t=x, r=y, b=x, l=y
x,y,z = t=x, r=y, b=z, l=y 
```

# ruby-on-rails - Rails i18n in one table (CakePHP-like)?

> ID：10883268
> 
> 赞同：0
> 
> 时间：2012-06-04T14:45:57.850
> 
> 标签：ruby-on-rails, cakephp, internationalization

Is there a Gem that stores translations in one table like CakePHP does?

The polymorphic CakePHP i18n-table has the following structure:

```
id
locale
model
foreign_key
field
content 
```

Globalize3 i.e. uses a new table for each model translation which I find too redundant.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:31:58.773

您可以将各种后端添加到通常为 ruby​​ 提供国际化的 i18n gem。Globalize3 是一种选择。一个更轻量级的替代方案可能是[i18n-active_record](https://github.com/svenfuchs/i18n-active_record)，它使用类似于您的 CakePHP 示例的单个表。

# php - 使用 PDO 插入的更有效方法？

> ID：10883274
> 
> 赞同：0
> 
> 时间：2012-06-04T14:46:21.013
> 
> 标签：php, mysql, insert, pdo, bind

嗨，每次将图像上传到我的服务器时，我都会将图像数据插入数据库。我使用的代码看起来有点“笨拙”，尤其是绑定。是否可以采取不同的方式来减少文本量并更快地执行，还是我不应该担心？

这是我正在使用的代码：

```
function($file_name, $cat, $year, $desc, $title, $image_size, $image_width, $image_height){
    //test the connection
    try {
        //connect to the database
        $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
    } catch( PDOException $e ) {
        //display the error
        echo $e->getMessage();
    }

    $stmt = $dbh->prepare("INSERT INTO mjbox_images(img_file_name,img_cat,
        img_year,img_desc,img_title,img_size,img_width,img_height) 
        VALUES(?,?,?,?,?,?,?,?)");

        $stmt->bindParam(1,$file_name);
        $stmt->bindParam(2,$cat);
        $stmt->bindParam(3,$year);
        $stmt->bindParam(4,$desc);
        $stmt->bindParam(5,$title);
        $stmt->bindParam(6,$image_size);
        $stmt->bindParam(7,$image_width);
        $stmt->bindParam(8,$image_height);
        $stmt->execute();
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T14:50:22.117

根据您要重写多少代码，您总是可以从使用纯 PDO 切换到像 RedBean 之类的东西（这实际上非常好，是一个零配置的 ORM）。

[http://www.redbeanphp.com/](http://www.redbeanphp.com/)

值得一看，即使您现在不会使用它；这绝对是一个很棒的工具。

然后插入将只需要修改 bean 属性，从而减少您使用的代码总量。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-04T14:59:58.853

您可以这样做，传递一个值数组并使用键作为占位符，这样您就可以使用相同的函数插入不同的表：

```
<?php 
$insert = array('img_file_name'=>'',
                'img_cat'=>'',
                'img_year'=>'',
                'img_desc'=>'',
                'img_title'=>'',
                'img_size'=>'',
                'img_width'=>'',
                'img_height'=>'');

insert('mjbox_images',$insert);

function insert($table,$values=array()){

    //test the connection
    try{
        //connect to the database
        $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
    } catch( PDOException $e ) {
        //display the error
        echo $e->getMessage();
    }

    $fieldnames = array_keys($values);

    $sql = "INSERT INTO $table";
    $fields = '( ' . implode(' ,', $fieldnames) . ' )';
    $bound = '(:' . implode(', :', $fieldnames) . ' )';
    $sql .= $fields.' VALUES '.$bound;

    $stmt = $dbh->prepare($sql);
    $stmt->execute($values);// whoops
}

//INSERT INTO mjbox_images( img_file_name ,img_cat ,img_year ,img_desc ,img_title ,img_size ,img_width ,img_height ) VALUES (:img_file_name, :img_cat, :img_year, :img_desc, :img_title, :img_size, :img_width, :img_height )

?> 
```

# hibernate - @OneToMany save duplicate records

> ID：10883275
> 
> 赞同：0
> 
> 时间：2012-06-04T14:46:21.810
> 
> 标签：hibernate, jakarta-ee, jpa

i have 3 tables: **Playlist** , **Advertisement** , **PlaylistadMap** (Join Table)

1- **PlayList**:

```
@Entity
@Table(name = "playlist", catalog = "advertisedb")
public class Playlist implements java.io.Serializable {

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    private Set<PlaylistadMap> PlaylistadMaps = new HashSet<PlaylistadMap>(0);

} 
```

2- **Advertisement**:

```
@Entity
@Table(name = "advertisement", catalog = "advertisedb")
public class Advertisement implements java.io.Serializable {

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "advertisement")
    private Set<PlaylistadMap> PlaylistadMaps = new HashSet<PlaylistadMap>(0);

} 
```

3- **PlaylistadMap**:

```
@Entity
@Table(name = "playlist_ad_map", catalog = "advertisedb")
public class PlaylistadMap implements java.io.Serializable {

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "fk_advertisement", referencedColumnName = "pkid", nullable = false)
    private Advertisement advertisement;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "fk_playlist", referencedColumnName = "pkid", nullable = false)
    private Playlist playlist;

} 
```

lets suppose that the playlist 1 has 3 related ads in the database:

(1,1)(1,2)(1,3) if i am trying to add 3 more ads to the old ones so the list to be updated will contain (1,1)(1,2)(1,3) (1,4)(1,5)(1,6) the records in the DB will be:

**(1,1)(1,2)(1,3)** (1,1)(1,2)(1,3)(1,4)(1,5)(1,6)

do i have to remove the duplicate records manually by deleting all records then insert the new ones ? or there's a solution in hibernate for this issue.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:54:09.983

您的映射是错误的：您在 Playlist 和 PlaylistadMap 之间定义了两个不同的关联，而不是一个双向关联，因为您忘记了`mappedBy`PlayList 中的属性。

不，您不必删除现有广告并将其重新添加到集合中。它不会改变任何东西。只需将您的 3 个新广告添加到集合中，确保关联的另一端已正确初始化，一切都应该没问题。

另请注意，级联与您的问题无关。级联意味着：当我在一个实体上做 X 时，也在关联的实体上做 X。您只是在此处创建实体之间的关联。没有什么可以级联的。

# macos - 别名函数的 Git 补全

> ID：10883283
> 
> 赞同：2
> 
> 时间：2012-06-04T14:46:43.283
> 
> 标签：macos, git, shell, zsh

我的 .zshrc 中有一些别名函数，例如`gb`for`git branch`和`gco`for `git checkout`。当我记得我正在创建、删除、签出等的完整分支名称时，这非常有用。但是，我注意到完成似乎不再起作用。以前，我可以做

```
$ git checkout m<TAB> 
```

如果这是一个分支的名称，它将自动完成 master。但是，现在我在使用时收到以下错误：

```
$ gco m<TAB>
_git:15: parse error: condition expected: 1 
```

我不确定为什么会这样。似乎可能缺少一个论点，但我不确定为什么。

*编辑：*

我正在为我的 .zshrc 文件设置一个别名，如下所示`git branch`：`git checkout`

```
alias gco='git checkout'
alias gb='git branch' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:32:51.990

经过更多的挖掘，我找到了一个针对 bash 的相同问题的解决方案，它看起来对 zsh 也同样有效。定义这两个函数后`__define_git_completion`，`__git_shortcut`您将调用`__git_shortcut`设置别名并一次调用完成。

```
__define_git_completion () {
eval "
    _git_$2_shortcut () {
        COMP_LINE=\"git $2\${COMP_LINE#$1}\"
        let COMP_POINT+=$((4+${#2}-${#1}))
        COMP_WORDS=(git $2 \"\${COMP_WORDS[@]:1}\")
        let COMP_CWORD+=1

        local cur words cword prev
        _get_comp_words_by_ref -n =: cur words cword prev
        _git_$2
    }
"
}

__git_shortcut () {
    type _git_$2_shortcut &>/dev/null || __define_git_completion $1 $2
    alias $1="git $2 $3"
    complete -o default -o nospace -F _git_$2_shortcut $1
}

__git_shortcut  ga    add
__git_shortcut  gb    branch            # I use this one.
__git_shortcut  gba   branch -a
__git_shortcut  gco   checkout          # and I use this one, too.
__git_shortcut  gci   commit -v
__git_shortcut  gcia  commit '-a -v'
__git_shortcut  gd    diff
__git_shortcut  gdc   diff --cached
__git_shortcut  gds   diff --stat
__git_shortcut  gf    fetch
__git_shortcut  gl    log
__git_shortcut  glp   log -p
__git_shortcut  gls   log --stat 
```

*   [从此处的原始答案中查看要点。](https://github.com/bronson/dotfiles/blob/731bfd951be68f395247982ba1fb745fbed2455c/.bashrc#L81%3aL114)
*   [在这个线程上找到了答案。](http://git.661346.n2.nabble.com/Bash-tab-completion-for-git-fetch-alias-is-broken-on-Git-1-7-7-1-td6980366.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:59:51.233

如果您希望自动完成功能也能正常工作，我相信您应该在 .gitconfig 中创建别名。但是，您必须拼写 git 命令。

```
[alias]
gb = branch
gco = checkout 
```

ETC...

您还可以像这样添加别名：

```
git config –-global alias.gb branch 
```

它们将附加到您的 .gitconfig

干杯

# facebook-graph-api - 无法发布 Open Graph 操作 - 错误 2500

> ID：10883287
> 
> 赞同：1
> 
> 时间：2012-06-04T14:46:59.837
> 
> 标签：facebook-graph-api, facebook-opengraph

你能帮我解决我最后几天面临的这个问题吗？

我正在尝试在我们的视频中使用 Open Graph。[这是示例页面的链接。](http://www.101greatgoals.com/gvideos/individual-highlights-zinedine-zidane-real-madrid-legends-3-manchester-united-legends-2/)

它正在使用 Facebook Graph API 以及位于我们服务器上但不属于该站点的测试页面。

当我在我们的系统上尝试时，我收到了这个错误：

> {"message":"必须使用活动访问令牌来查询当前用户的信息。","type":"OAuthException","code":2500}

当我在调试器工具上检查该页面时，我收到此错误：

> 对象无效值：URL 'http://www.101greatgoals.com/gvideos/stunning-setplay-juan-roman-riquelme-boca-juniors-vs-deportivo-merlo/' 类型'video.other' 的对象无效因为属性 'og:image:url' 的给定值 '' 无法解析为类型 'url'。

视频下方有一个“测试”按钮，用于运行此操作。

还没有找到修复它的解决方案。可以请一些建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:10:51.370

> 对象无效值：URL 'http://www.101greatgoals.com/gvideos/stunning-setplay-juan-roman-riquelme-boca-juniors-vs-deportivo-merlo/' 类型'video.other' 的对象无效因为属性 'og:image:url' 的给定值 '' 无法解析为类型 'url'。

哪一部分你不明白……？

在您的页面中，您有`<meta property='og:image' content='' />`（不是在元元素的第一个块中，而是在更下方）——并且 Facebook 无法读取空 URL……</p>

# android - Android：代表“获取我的位置！”的按钮

> ID：10883288
> 
> 赞同：0
> 
> 时间：2012-06-04T14:47:06.457
> 
> 标签：android, layout, button

我有一个编辑框，在这个编辑框的右侧我不想放一个代表“获取我的位置”的按钮。

用户点击这个按钮，我的应用程序得到他的位置并用它填充 EditBox。

我找到了一个指南针并添加了一个 ImageButton，但我不知道这是否真的代表了这个想法。

![编辑框 + 指南针](../Images/16577cf66f8a6e46a984174676f23a97.png)

有谁知道一个更好的按钮来代表“获取我的位置”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:03:34.293

您的 Button 看起来不错，并且会被大多数用户识别。如果您想获得系统默认值（Drawalbe 的图片可能与 HTC、三星摩托罗拉等的 rom 不同），您可以使用

```
getResources.getDrawable(android.R.drawable.ic_menu_location) 
```

始终在此处检查非 Null。如果呼叫失败，您可以在[此处](http://androiddrawableexplorer.appspot.com/)下载标准的 Android 位置按钮(ic_menu_location)，作为备用`getDrawable()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:05:42.900

我在我的应用程序中使用了“地球仪”。如果在用户请求他们的位置之前 EditBox 是空白的，为什么不使用在其中放置一些默认文本来请求用户单击按钮呢？

# android - Basis approach for Login and then listview

> ID：10883289
> 
> 赞同：1
> 
> 时间：2012-06-04T14:47:13.183
> 
> 标签：android, android-listview, android-asynctask

I'm working on an Android app that will display a ListView with items loaded from the web. The ListView must be displayed after logging in to the app.

What I've done so far:

*   I created a Main Activity with tabs on the top.
*   In one of the tabs (activity's) you have to log in.
*   Then I use the AsyncTask to do the authenticating in the background.

Now that's what I've done so far. I then need to make the following:

When the username and password meet requirements, the app should start a NEW activity, that will show the ListView with the remote items from the web. I need this to be done in a proper fashion, so i will also use an AsyncTask to do this. The Problem is...

I don't know how to approach this. Because when I verify the username it will load... and it will load again when it's loading the list items.. Is there a way to get this all working nicely and within the tabs interface as it currently is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:08:38.780

我不确定我是否完全理解您的要求。

据我所知，您想在身份验证后添加一个列表视图选项卡。因此，一旦您的异步任务返回登录成功，只需使用[TabHost.newTabSpec()创建一个新选项卡。](http://developer.android.com/reference/android/widget/TabHost.html#newTabSpec%28java.lang.String%29)

对不起，如果我误解了。希望有帮助。

# xml - Getting the wrong order when using ORDER BY in XQuery using Saxon processor on Oxygen XML Editor

> ID：10883290
> 
> 赞同：1
> 
> 时间：2012-06-04T14:47:18.343
> 
> 标签：xml, xquery, saxon, oxygenxml

this is my very first post and I'm seeking for some help because I've tried everything I could without any luck.

So, I'm trying to use some simple XQuery to get some data from an XML file (showed below), but I'm having trouble trying to order the results, as they don't appear as expected.

**My input file:**

```
<?xml version="1.0" encoding="UTF-8"?>
<database name="MyDB">
    <constraints>
        <constraint name="ASIGNATURAS_MATRICULADAS_CHK1">
            <type>C</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <condition>CONVOCATORIAS_AGOTADAS &gt;= 0 AND CONVOCATORIAS_AGOTADAS &lt; 6</condition>
        </constraint>
        <constraint name="SYS_C0029035">
            <type>C</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <condition>&quot;CONVOCATORIAS_AGOTADAS&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029034">
            <type>C</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <condition>&quot;COD_ASIGNATURA&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029033">
            <type>C</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <condition>&quot;NIF_ALUMNO&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029031">
            <type>C</type>
            <table-name>ASIGNATURAS</table-name>
            <condition>&quot;CODIGO&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029027">
            <type>C</type>
            <table-name>ALUMNOS</table-name>
            <condition>&quot;NIF&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029029">
            <type>C</type>
            <table-name>ALUMNOS</table-name>
            <condition>&quot;PRIMER_APELLIDO&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="SYS_C0029028">
            <type>C</type>
            <table-name>ALUMNOS</table-name>
            <condition>&quot;NOMBRE&quot; IS NOT NULL</condition>
        </constraint>
        <constraint name="ASIGNATURAS_MATRICULADAS_FK1">
            <type>R</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <referenced-constraint-name>ALUMNOS_PK</referenced-constraint-name>
        </constraint>
        <constraint name="ASIGNATURAS_MATRICULADAS_FK2">
            <type>R</type>
            <table-name>ASIGNATURAS_MATRICULADAS</table-name>
            <referenced-constraint-name>ASIGNATURAS_PK</referenced-constraint-name>
        </constraint>
        <constraint name="ALUMNOS_PK">
            <type>P</type>
            <table-name>ALUMNOS</table-name>
            <column-name>NIF</column-name>
        </constraint>
        <constraint name="ASIGNATURAS_PK">
            <type>P</type>
            <table-name>ASIGNATURAS</table-name>
            <column-name>CODIGO</column-name>
        </constraint>
    </constraints>
</database> 
```

What I'm trying to do is something quite simple, get all the constraints with type "C" and show the name of them, sorted alphabetically.

**This is the XQuery:**

```
<check-constraints>
{
for $r in doc("DB.xml")//constraint[type = 'C']/@name
order by $r
return <constraint>{data($r)}</constraint>
}
</check-constraints> 
```

The result I'm expecting is as follows:

```
<?xml version="1.0" encoding="UTF-8"?>
<check-constraints>
   <constraint>ASIGNATURAS_MATRICULADAS_CHK1</constraint>
   <constraint>SYS_C0029027</constraint>
   <constraint>SYS_C0029028</constraint>
   <constraint>SYS_C0029029</constraint>
   <constraint>SYS_C0029031</constraint>
   <constraint>SYS_C0029033</constraint>
   <constraint>SYS_C0029034</constraint>
   <constraint>SYS_C0029035</constraint>
</check-constraints> 
```

But instead, I'm getting this result:

```
<?xml version="1.0" encoding="UTF-8"?>
<check-constraints>
   <constraint>SYS_C0029031</constraint>
   <constraint>ASIGNATURAS_MATRICULADAS_CHK1</constraint>
   <constraint>SYS_C0029027</constraint>
   <constraint>SYS_C0029028</constraint>
   <constraint>SYS_C0029029</constraint>
   <constraint>SYS_C0029035</constraint>
   <constraint>SYS_C0029034</constraint>
   <constraint>SYS_C0029033</constraint>
</check-constraints> 
```

What am I doing wrong? Why is the "order by" not sorting as it should? If I don't put the "order by" I get the result in the same order as listed in the file, something that makes sense because the nodes are entered as they are found.

**Edit:** As suggested, apparently it could be due to the XQuery processor. In this case I'm working on Oxygen, which uses the Saxon processor as default. I just tried Zorba and it works there. So now I'm more confused, which is the right output?

**Solved:** My input file contained random length number of BOM characters on some of the values (by error), and they are invisible, so it made the ordering go off. Taking them away makes it work as expected.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:29:45.117

从 Saxon 9.4 中的命令行运行时，您的查询给出了预期的结果。它在 oXygen 13.1（使用 Saxon 9.3.0.5）中也能正常工作。因此，它必须与您运行它的方式有关。也许您以某种方式弄错了查询场景，因此您没有使用正确的文件？

# java - Checking if JTree node exist using path

> ID：10883293
> 
> 赞同：4
> 
> 时间：2012-06-04T14:47:24.617
> 
> 标签：java, swing, jtree

I have a classic JTree populated with some nods. Lets assume tree looks like this:

```
Root
|-Fruit
|--Apple
|--Orange
|-Objects
|--Table
|--Car 
```

Is there any way in java to check if node exists using assumed path like this:

```
TreeNode found = model.getNodeOrNull("\\Fruit\\Apple") 
```

so if node in given location exists it's returned, if not null is returned? Is there any such mechanism in Java?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:50:13.847

你可能会沿着这些思路尝试一些东西。

![树节点位置](../Images/7a5f61078c89c54cfc6d389d93372a6b.png)

## 示例输出

```
food:pizza found true
od:pizza found false
sports:hockey found true
sports:hockey2 found false 
```

## 树节点位置.java

```
import java.awt.BorderLayout;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.Position;
import javax.swing.tree.TreePath;

public class TreeNodeLocation {

    private JTree tree = new JTree();

    TreeNodeLocation() {
        JPanel p = new JPanel(new BorderLayout(2,2));

        final JTextField find = new JTextField("food:pizza");
        find.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                boolean found = findText(find.getText());
                System.out.println(find.getText() + " found " + found);
            }
        });
        p.add(find, BorderLayout.PAGE_START);

        tree.setVisibleRowCount(8);
        for (int row=tree.getRowCount(); row>=0; row--) {
            tree.expandRow(row);
        }

        p.add(new JScrollPane(tree),BorderLayout.CENTER);

        JOptionPane.showMessageDialog(null, p);
    }

    public boolean findText(String nodes) {
        String[] parts = nodes.split(":");
        TreePath path = null;
        for (String part : parts) {
            int row = (path==null ? 0 : tree.getRowForPath(path));
            path = tree.getNextMatch(part, row, Position.Bias.Forward);
            if (path==null) {
                return false;
            }
        }
        tree.scrollPathToVisible(path);
        tree.setSelectionPath(path);

        return path!=null;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TreeNodeLocation();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:00:05.600

不幸的是，没有任何开箱即用的东西可以做到这一点。这对 Swing 不想强加于其设计的节点做出一些假设，因为它会限制作为树中节点的含义（即所有节点都有某种唯一标识它们的字符串）。这并不意味着您不能轻松地自己实现它。您可能知道 TreePath 是 JTree 中的一个常见想法，所以这里有一个简单的方法，它返回一个 TreePath 给给定路径的节点：

[http://www.exampledepot.8waytrips.com/egs/javax.swing.tree/FindNode.html](http://www.exampledepot.8waytrips.com/egs/javax.swing.tree/FindNode.html)

您可以以此为基础来实现您所追求的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:50:18.160

您可以使用模型的实例之一进行搜索，如此[处](https://stackoverflow.com/a/8210759/230513)`Enumeration`所示。

# php - 使用 curl_multi_exec 运行 curl 的并行处理程序

> ID：10883294
> 
> 赞同：2
> 
> 时间：2012-06-04T14:47:30.817
> 
> 标签：php, curl, curl-multi

为什么在这段代码中我需要调用 2 次 curl_multi_exec 函数。

在第一个循环中，我正在执行 curl_multi_exec 处理程序以运行子处理程序。当 CURLM_CALL_MULTI_PERFORM 与 $mrc 不同时，循环结束。

在第二个循环中，我们从 curl 处理程序中找到结果，然后再次执行第一个循环，为什么？

```
<?php 

    do {
        $mrc = curl_multi_exec($multiHandle, $active);
    } while ($mrc == CURLM_CALL_MULTI_PERFORM);

    while ($active && $mrc == CURLM_OK) {
        if (curl_multi_select($multiHandle, $timeout) != -1) {
            do {
                $mrc = curl_multi_exec($multiHandle, $active);
            } while ($mrc == CURLM_CALL_MULTI_PERFORM);
        }
    }

?> 
```

代码摘自[PHP-Doc](http://www.php.net/manual/en/function.curl-multi-exec.php)站点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:22:49.773

答案在这里[curl_multi_exec()](https://stackoverflow.com/questions/5569507/curl-multi-exec)。

令人沮丧的是，PHP 的文档在某些方面可能毫无用处......

# java - 处理 IO 中断的优雅方法是什么？

> ID：10883296
> 
> 赞同：1
> 
> 时间：2012-06-04T14:47:41.680
> 
> 标签：java, io

我正在查看来自[http://www.docjar.com/html/api/org/apache/commons/io/IOUtils.java.html](http://www.docjar.com/html/api/org/apache/commons/io/IOUtils.java.html)`IOUtils.copy()`的Apache Commons 的实现，它最终归结为：

```
public static long copyLarge(InputStream input, OutputStream output)
        throws IOException {
    // DEFAULT_BUFFER_SIZE is 4096
    byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
    long count = 0;
    int n = 0;
    while (-1 != (n = input.read(buffer))) {
        output.write(buffer, 0, n);
        count += n;
    }
    return count;
} 
```

我正在运行它`Executor`，任务有超时等，但是如果我理解正确，即使它超时并且`Future`被取消，线程也会继续运行，因为在这个循环中的任何地方都没有检查线程状态。这会导致危险的泄漏和饥饿。

似乎我需要重写循环，但是处理这个问题的理智和正确的方法是什么？`throw new IOException(new InterruptedException())`? 将方法声明为 throwing`InterruptedException`并抛出它（讨厌为我所有的 IO 辅助方法这样做）？

***编辑***：我刚从 Guava 查了一下`ByteStreams`，他们似乎在做同样的事情。现在我想知道为什么两个主要库不支持这种循环中的中断。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:38:31.833

对于任何阻塞 I/O（即 java.io 包），您必须手动检查它并做一些响应它。

```
if (Thread.currentThread().isInterrupted()) { 
    // do something here to stop processing
} 
```

如果您使用的是通道 (java.nio)，则不必这样做。在 NIO 操作之一期间发出的任何线程中断都会导致该操作抛出 ClosedByInterruptException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:50:28.843

如果您关闭`input`和/或`output`，该`copyLarge`方法将抛出异常，退出循环。

# linux - 从 ls 中排除某些目录并将剩余的目录复制到共享路径

> ID：10883300
> 
> 赞同：1
> 
> 时间：2012-06-04T14:48:09.803
> 
> 标签：linux, scp, ls

我有一个包含子目录的文件夹`A,B,C and D`。我需要将目录复制`A and D`到另一个`'copy'`在排除时调用的目录`B and C`（即 B 和 C 不会被复制）。我正在考虑执行以下操作（在命令行伪代码中）：

```
ls (selective ls on the source directory) | 
   scp -r {returned value from the ls} {target directory} 
```

是否有 Linux 命令行方式来完成上述操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:08:27.800

我建议为此使用 find 。

让我们创建一些测试主题：

```
$ mkdir -p ./testing/test{1,2,3,4}
$ touch ./testing/test{1,2,3,4}/test{a,b} 
```

将导致：

```
$ ls -R ./testing
./testing:
test1  test2  test3  test4

./testing/test1:
testa  testb

./testing/test2:
testa  testb

./testing/test3:
testa  testb

./testing/test4:
testa  testb 
```

现在，运行

```
$ mkdir ./testing/copy
$ find ./testing/ -mindepth 1 -maxdepth 1 ! -name test1 ! -name test3 ! -name copy -execdir cp -R '{}' ./copy/ ';' 
```

将导致：

```
$ ls -R ./testing/
./testing/:
copy  test1  test2  test3  test4

./testing/copy:
test2  test4

./testing/copy/test2:
testa  testb

./testing/copy/test4:
testa  testb

./testing/test1:
testa  testb

./testing/test2:
testa  testb

./testing/test3:
testa  testb

./testing/test4:
testa  testb 
```

背景资料：

*总结：找到需要复制的目录，执行复制命令。在这种情况下，让我们复制除“test1”和“test3”之外的所有目录。*

**-mindepth 1**选项将阻止 find 包含 . 可能还有 .. 目录，因为它们位于深度 0 上。

-maxdepth **1**选项将阻止 find 单独复制每个子目录。命令 cp -R 处理子目录，因此它们被覆盖。

使用**-execdir**而不是 -exec，因此您不必包含整个路径作为 cp 命令的目标目录。

**在运行 find 之前不要忘记 mkdir 你的目标目录，并且不要忘记从结果中排除这个目录！因此*！我的示例中的-name 复制*选项。**

我希望这能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:35:18.207

简单的答案是只复制你想要的目录：

```
scp -r A D anotherhost:/path/to/target/directory 
```

这将完全按照您在示例中描述的方式进行。更通用的解决方案可能如下所示：

```
scp -r $(ls | egrep -v '^(B|C)$') anotherhost:/path/to/target/directory 
```

只要源目录中的文件数量不大，此命令就会起作用。随着文件数量的增加，您最终会遇到“命令太长”错误。

`scp`您可以使用代替 using ，`rsync`它具有多种包含/排除文件的机制。例如：

```
rsync --exclude='B/' --exclude='C/' . anotherhost:/path/to/target/directory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:35:04.127

如果你真的知道你的目录，只需将 all 添加到 scp：

```
scp A/* D/* targetHost:/copy 
```

此解决方案的唯一问题是，它将您的文件“混合”在复制目录中。可能，这并不重要:-)

# android - 在 TextView 中链接一些文本

> ID：10883301
> 
> 赞同：1
> 
> 时间：2012-06-04T14:48:10.560
> 
> 标签：android, textview, linkify

我在 TextView 中有一个字符串，我想从该字符串中链接一个子字符串。例如：

**点击这里**了解更多。

我正在动态获取字符串。所以我必须搜索它是否有**单击此处**并将其转换为链接。如何链接“单击此处”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:33:21.153

要在文本中查找模式并替换它，请使用以下命令：

```
Pattern p = Pattern.compile("click here");
Matcher m = p.matcher("for more info, click here");
StringBuffer sb = new StringBuffer();
boolean result = m.find();
while(result) {
    m.appendReplacement(sb, "<a href=\"www.mywebsite.com\">click here</a>");
    result = m.find();
}
m.appendTail(sb);
String strWithLink = sb.toString();

yourTextView.setText(Html.fromHtml(strWithLink));
yourTextView.setMovementMethod(LinkMovementMethod.getInstance()) 
```

此代码将在您的字符串中搜索并用链接替换所有“单击此处”。

最后，不要将 android:autoLink="web" 添加到您的 XML 资源（TextView 部分），否则 A 标记将无法正确呈现并且不再可点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:15:18.533

Raghav 使用 fromHtml() 方法具有正确的方法，但是如果您正在搜索具有固定长度的字符串，您可以执行以下操作：

```
String toFind = "click here";
if(myString.indexOf(toFind) > -1){
   String changed = myString.substring(0, myString.indexOf(toFind)) + "<a href='http://url.whatever'>" + myString.substring(myString.indexOf(toFind), myString.indexOf(toFind) + toFind.length()) + "</a>" + myString.substring(myString.indexOf(toFind) + toFind.length());
}
else {
   //String doesn't contain it
} 
```

设置实际文本时，需要使用：tv.setText(Html.fromHtml(yourText)); 否则它只会显示为没有任何添加剂的字符串。fromHtml() 方法允许您在应用程序中使用某些 HTML 标记。在这种情况下，用于链接的标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:51:01.447

你试过这样吗

```
 <a href="www.mywebsite.com">Click here</a> 
```

将其设置为 textview  

//通过 supstring 得到这个

```
String whatever="anything dynamically";        
String desc = "what you want to do is<a href='http://www.mysite.com/'>"+whatever+":</a>";

yourtext_view.setText(Html.fromHtml(desc)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T14:55:15.083

```
String urlink = "http://www.google.com";
String link = "<a href=\"+urlink+ >link</a>"; 
textView.setText(Html.fromHtml(link)); 
```

# java - Spring框架3中的JSON-RPC

> ID：10883302
> 
> 赞同：4
> 
> 时间：2012-06-04T14:48:14.233
> 
> 标签：java, javascript, spring, json-rpc

在我的 Spring 3 Web 应用程序中实现 JSON-RPC 时，我需要一些建议、最佳实践/库。

我找到了这个[http://code.google.com/p/jsonrpc4j/](http://code.google.com/p/jsonrpc4j/)但它似乎没有任何可用的版本。

编辑：

为了澄清，我想提供一个 JSON-RPC 服务

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:07:05.750

带有**Jackson的**[Spring MVC可以通过](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)**REST**调用提供**json**响应。这很简单。但我认为原生**Spring**中没有任何工具可以接受包含方法名称的[JSON-RPC](https://en.wikipedia.org/wiki/JSON-RPC#Version_1.1_.28Working_Draft.29)请求并返回包含**JSON-RPC**错误代码的响应。

 ******您最好的选择可能是查看像[jsonrpc4j](https://github.com/briandilley/jsonrpc4j)这样的库。******

# asp.net-mvc - 在没有 ReportViewer 控件的情况下查看报告

> ID：10883304
> 
> 赞同：0
> 
> 时间：2012-06-04T14:48:23.523
> 
> 标签：asp.net-mvc, reporting-services

拥有一个 JS Web 应用程序（ASP.NET MVC，通过 REST 与服务器对话）我无法使用服务器端 ReportViewer 控件打开由 Microsoft Reporting Services 生成的报告。

我正在寻找在不公开 Reporting Services 的情况下打开报告的方法。无法预先生成报告并仅链接它们。

我的第一个想法是设置一个到服务器端控制器的路由，该控制器创建一个 Web 请求（使用所有必要的参数调用 Reporting Services），缓存响应并将其返回给客户端。但我不确定这是否是最好的解决方案。

是否有人有相同的任务并可能分享他/她的解决方案？

谢谢！奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:54:51.167

事实上，报表可能有子报表，它必须从服务器加载数据，这是使用 ReportViewer 控件的最佳选择。因此，解决方案是创建一个包含此控件的普通旧 Web 窗体 APSX，直到 Microsoft 提供更新/新控件。这工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T01:31:15.543

没有回`ReportExecution2005.Render`发将是你的朋友。删除报表查看器并创建一个适合您的方案：) Telerik 控件刚刚发布了一个 MVC 查看器控件，但是。

我已经实现了 BaseReportController 和 BaseReportModel 以及 BaseReportView，其中包括分页、导出、刷新等。

屁股疼......请让我知道什么时候有更好的东西。

# php - 未从 onchange 调用 Javascript 函数（并非总是如此）

> ID：10883305
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:48:26.240
> 
> 标签：php, javascript, html

目前，我正在创建一个网站，在那里我有一些有数量的产品。这个数量取决于尺寸和颜色。

所以我想出了以下程序来检查并反馈还剩下多少。

```
<div class="product_stock" id="stock_form<?php echo $i; ?>"><?php 
  $size = $product_sizes[0];
  $color = $product_colors[0];
  $sql = "SELECT * FROM products WHERE product_id = '$product_id' AND size = '$size' AND color = '$color'";
  $result = mysql_query($sql) or die(mysql_error());  
  echo $sql;

  if(mysql_num_rows($result) > 0) {
    $product_stock = mysql_fetch_array($result);
    if($product_stock['stock'] > 0) {
      echo "Nog ".$product_stock['stock']." verkrijgbaar";
    } else {
      echo "Combinatie is niet meer verkrijgbaar";
    } 
  }?>
</div>
<div class="product_text"> 
  <?php echo $product['text']; ?>       
</div>
<div class="product_num">
  art: #<?php echo $product['product_id']; ?>
</div>
<div class="product_bar_bot">
  <form name="form<?php echo $i; ?>" action="shopping_cart.php?">
    <input type="hidden" name="id" value="<?php echo $product['pid']; ?>"/>
      <select name="size" class="product_select" onChange="get_stock('form<?php echo $i; ?>');">
    <?php foreach($product_sizes as $p_size) { ?>
    <option>
      <?php echo $p_size; ?>
    </option>
  <?php } ?>
</select>
<select name="color" class="product_select" onChange="get_stock('form<?php echo $i; ?>');"> 
  <?php foreach($product_colors as $p_color) { ?>
    <option value="<?php echo $p_color; ?>">
      <?php echo $color_array[$p_color]; ?>
    </option>
  <?php } ?>
</select>
<input type="hidden" name="url" value="sale">
<input type="hidden" name="action" value="add">
<input type="text" name="amount" value="1" size="1" style="vertical-align: top; margin-top: 9px;"></input>
<img src="images/icons/cart_shop.png" align="top"/> 
<input type="submit" class="button" value="Voeg toe" style="vertical-align: top; margin-top: 7px;"> 
```

需要调用的函数：

```
function get_stock(formid) {
  var form = document.forms[formid];
  var size = form.size.value;
  var color = form.color.value;
  var pid = form.id.value;
  var stock = 'stock_'+formid;

  // code for IE7+, Firefox, Chrome, Opera, Safari
  if (window.XMLHttpRequest)  {
    xmlhttp=new XMLHttpRequest();
  } else {
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
      document.getElementById(stock).innerHTML=xmlhttp.responseText;
    }
  }
  xmlhttp.open("GET","get_stock.php?id="+pid+"&size="+size+"&color="+color,true);
  xmlhttp.send();
} 
```

我遇到的问题是它确实适用于某些表单，但对于某些表单，`get_stock.php`页面甚至没有被调用。

如果需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:37:17.580

感谢@Bergi 的评论，我犯了一个已经修复的小错误。我通过每次在 $i 处添加 +1 来创建表单，但是我在错误的位置重新设置了 $i，这导致了不止一个 $i = 1。

# java - 如何处理 Java 的 BigDecimal 中的舍入错误

> ID：10883308
> 
> 赞同：3
> 
> 时间：2012-06-04T14:48:36.610
> 
> 标签：java, bigdecimal

我正在使用在 java 应用程序中实现脚本引擎的开源项目 (axil)，并且在尝试利用 BigDecimal 的舍入时遇到了一个主要的绊脚石。似乎 BigDecimal 正在将我的输入转换为科学记数法，然后将我传递的精度应用于数字的 SN 表示的系数，而不是它的非 SN 表示。例如：

`new BigDecimal("-232454.5324").round(new MathContext(2, RoundingMode.HALF_UP)).toString()`

产生 的结果`-2.3E+5`。这给我带来了两个问题。首先，我期待`-232454.5`( `-2.324545E+5`) 的结果，因此得到`-230000`抛出任何涉及结果的数学。其次，我不期望，也找不到解决方法，在 SN 中获得结果（尽管我希望有一种我还没有偶然发现的格式化方法）。

现在由于项目的性质，我们可以对传入 round() 方法的数字的大小/类型做出很少的期望，因此任何解决方案都需要高度模块化。有没有人有什么建议？[如果有帮助，这里是项目中此错误的谷歌代码问题报告的链接。](http://code.google.com/p/axil/issues/detail?id=58 "Axil 问题报告 #58") [这是项目主页的链接。](http://www.axil-lang.org/ "Axil 主页")

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T15:02:08.143

不要使用 round 方法，而是使用 setScale，其中参数是小数位数：

```
BigDecimal bd = new BigDecimal("-232454.5324").setScale(1,
                RoundingMode.HALF_UP);
String string = bd.toPlainString();
System.out.println(string); // prints -232454.5 
```

另请注意， setScale 返回一个新的 BigDecimal 实例，它不会更改当前实例的比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:46:01.630

A`MathContext`采用*精度*，它是结果中有效数字的*总数*（小数位之前和之后）。 `BigDecimal`的逻辑在这里是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:46:57.583

我会这样做：

```
BigDecimal number = new BigDecimal("22.2222").setScale(0, RoundingMode.UP);

if (number.intValue() % 2 != 0) {
    number = number.add(BigDecimal.ONE);
}

System.out.println(number); // => 24 
```

# javascript - 使用jquery在同一页面上进行多个倒计时

> ID：10883313
> 
> 赞同：1
> 
> 时间：2012-06-04T14:48:58.203
> 
> 标签：javascript, jquery, countdown

我对 jquery/javascript 倒计时有一点问题，我希望你能帮助我。

所以，我有计时器功能，它有一个参数，称为选择器（jquery 选择器）..

```
function timer(selector) {
    self = $(selector);     
    var sec = parseInt(self.find('span.timeout').text());

    var interval = setInterval(function() {
    sec--;
    if (sec >= 0) {
        self.find('span.timeout').text(sec);
    } else {
        setInterval(interval);
    }
    }, 1000);

} 
```

在，html 我有这样的东西。

```
<div class="element" id="el1"><span class="timeout">10</span></div>
<div class="element" id="el2"><span class="timeout">10</span></div> 
```

具有相同类和不同 id 的多个元素

函数的用法是这样的：

```
$("body").on('click', '.element', function() {
timer(this);
}); 
```

在第一次点击它工作得很好，计时器倒计时。但是当我单击具有相同类的第二个 div 时，第一个计数器停止，第二个计数器从前一秒开始。

那么，如何使用 js/jquery 在同一页面上进行多个倒计时，这样我就可以单击这两个元素并且两个计时器都可以正常工作？

演示：http: [//jsfiddle.net/zKTkj/](http://jsfiddle.net/zKTkj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:54:37.023

*   你忘了用`self`声明`var`。结果，`self`变成了全局变量。创建第二个计时器时，您正在覆盖此全局（“共享”）变量。因此，从那时起，两个计时器同时输出到第二个元素，从而导致故障。
*   你可能的意思是`clearInterval(interval)`。

[http://jsfiddle.net/zKTkj/1/](http://jsfiddle.net/zKTkj/1/)

# c - 对指针值 C 的加法运算

> ID：10883314
> 
> 赞同：1
> 
> 时间：2012-06-04T14:49:10.497
> 
> 标签：c, pointers, add

我在尝试用 C 语言创建汇编仿真程序时遇到问题。有 5 个寄存器：REGA、REGB、REGC、REGX AND INSP，以及 10 条指令：NOP、SET、AND（按位 &）、OR（按位 |）、 ADD、SUB、SHL（<< 左）、SHR（>>）、JMP。

程序从文件中读取指令；包含指令和 2 个参数的行。在大多数情况下，第一个参数是寄存器名称（例如 REGA），第二个参数可以是寄存器名称或整数。

我正在使用 sscanf 从文件中获取说明。

我在使用 ADD、SUB、SHL 和 SHR 功能时遇到问题。我的添加功能是：

```
int opcode_add(char* opcode, char *arg1, char *arg2){
    int i, j;
    for(i = 0; i < MAX_REGISTER; i++){ 
        if (strcmp(register_str[i],arg1) == 0){ 
            for(j = 0; j <=MAX_REGISTER; j++){ 
                if(strcmp(register_str[j],arg2) == 0){ 
                    *register_ptr[i] = *register_ptr[i] + *register_ptr[j]; 
                    break;
                }else {
                    *register_ptr[i] = *register_ptr[i] + atoi(arg2); 
                }       
            }

        }
    }
    INSP++; 
    return (0); 
} 
```

如果传递了 2 个寄存器参数，该函数将起作用。例如：

```
SET REGA 1
SET REGB 2
ADD REGA REGB 
```

但如果传递了寄存器和整数，则不会。例如：

```
SET REGA 2
ADD REGA 1 
```

问题出在这一行：

```
*register_ptr[i] = *register_ptr[i] + atoi(arg2); 
```

我试过这样做：

```
int y = *register_ptr[i];
int k = atoi(arg2);
int result = y+k;
*register_ptr[i] = result; 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:54:05.043

您没有说*什么*不起作用 - 但是，您构建内部循环和`if`. 每当内部循环看到与第二个操作数不匹配的寄存器时，该`else`块将被执行 - 因此将添加第二个操作数指定的寄存器之前的*所有*寄存器（如果第二个操作数是 int，则*所有*寄存器都将添加到）。块的内容`else`必须在循环*之后*移动，并且只有在内循环没有找到寄存器时才能执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:10:15.033

问题在这里：

```
for(j = 0; j <=MAX_REGISTER; j++){ 
    if(strcmp(register_str[j],arg2) == 0){ 
        *register_ptr[i] = *register_ptr[i] + *register_ptr[j]; 
        break;
    }else {
        *register_ptr[i] = *register_ptr[i] + atoi(arg2); 
    }       
} 
```

首先，您应该检查，`j < MAX_REGISTER`因为您的数组（显然）不包含`MAX_REGISTER`自身。但更重要的是，**您不应该`atoi`在一个寄存器名称不匹配时立即**尝试。

你现在所做的是，如果第二个参数不是`REGA`，你立即去`else`尝试`atoi`。您*应该*做的是检查所有寄存器，如果`arg2`没有，请尝试`atoi`：

```
bool found = false;
for(j = 0; j < MAX_REGISTER; j++){ 
    if(strcmp(register_str[j],arg2) == 0){ 
        *register_ptr[i] = *register_ptr[i] + *register_ptr[j]; 
        found = true
        break;
    }       
}
if (!found)
    *register_ptr[i] = *register_ptr[i] + atoi(arg2); 
```

# android - 在android上使用asmack和bonjour进行Xmpp连接

> ID：10883317
> 
> 赞同：1
> 
> 时间：2012-06-04T14:49:12.360
> 
> 标签：android, bonjour, smack, asmack

我正在尝试为 IM 做一个无服务器应用程序。我使用苹果 bonjour 协议来发现 xmpp 服务。但是一旦我得到这些，我就无法连接到我的主机（使用 pidgin + bonjour 的 Linux 计算机）。

这是我的代码（取自[这里](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/Connection.html)）：

```
public class Xmpp extends AsyncTask<Void, Void, Void>
{
    @Override
    protected Void doInBackground(Void... arg0)
    {
        ConnectionConfiguration connConfig =
                new ConnectionConfiguration("192.168.0.11", 5298, "bonjour");
        XMPPConnection connection = new XMPPConnection(connConfig);
         try
        {
            // Connect to the server
            connection.connect();
             // Most servers require you to login before performing other tasks.
            connection.login("grea08", "mypass");
            // Start a new conversation with John Doe and send him a message.
            Chat chat = connection.getChatManager().createChat("grea09@192.168.0.11", new MessageListener() {

                 public void processMessage(Chat chat, Message message) {
                     // Print out any messages we get back to standard out.
                     Log.v(getClass().getName(), "Received message: " + message);
                 }
             });

            chat.sendMessage("Howdy!");
        } catch (XMPPException e)
        {
            // TODO Auto-generated catch block
            Log.e(getClass().getName(), "Xmpp error !", e);
        }
         // Disconnect from the server
         connection.disconnect();
        return null;
    }

} 
```

我收到`XmppException`“服务器无响应”。我认为主机不是 XMPP 服务器，我们必须以[这种](http://xmpp.org/extensions/xep-0174.html)方式使用协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:58:46.493

**Smack 和 aSmack 不支持[XEP-0174](http://xmpp.org/extensions/xep-0174.html)**（又名链接本地或无服务器消息传递）。[乔纳斯补丁](http://community.igniterealtime.org/thread/36186)从未进入后备箱。要跟踪的相应问题是[SMACK-262](http://issues.igniterealtime.org/browse/SMACK-262)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T07:41:32.223

[Gibberbot](https://github.com/guardianproject/Gibberbot)开源项目支持 XMPP**和**Bonjour 无服务器通信。

它也[可以从 Google Play 安装](https://play.google.com/store/apps/details?id=info.guardianproject.otr.app.im&hl=en)。

也许您可以查看其来源并为您的应用提取相关代码。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:57:40.367

尝试`XMPPConnection`使用配置创建您的：

```
ConnectionConfiguration config = new ConnectionConfiguration("192.189.0.11", port);
//Set optional configurations on the config object.
Connection connection = new XMPPConnection(config); 
```

# database - 从 Amazon AWS EC2 服务器上的 Node.js 连接到 Redis 服务器时出错

> ID：10883325
> 
> 赞同：0
> 
> 时间：2012-06-04T14:50:23.430
> 
> 标签：database, node.js, amazon-ec2, redis

我正在尝试在 Amazon AWS Ec2 微实例上运行 node.js 服务器和 Redis 服务器。

我已经安装了 Redis 服务器并且 redis-server 命令运行良好。

我使用“[永远](http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever)”来保持 Redis-Server 运行。它工作正常。

但是当我启动 Node server 时，它无法连接到 Redis-Server 。

它给出以下错误 -

```
Error Error: Redis connection to 127.0.0.1:6379 failed - connect ECONNREFUSED 
```

执行“永久列表”表明 redis 服务器运行良好。

```
info:   Forever processes running
data:       uid  command script                         forever pid   logfile                        uptime          
data:   [0] _pXw node    app.js                         26670   26671 /home/ubuntu/.forever/_pXw.log 0:0:0:13.463    
data:   [1] ylT1 node    redis-server                   25013   26681 
```

我已经验证当 redis-server 启动时，它从 6379 端口开始。

谁能帮我解释为什么会发生这个错误以及我如何解决这个问题？

我使用以下代码连接到 Redis 。我为 Redis 安装了客户端库。

```
var redis = require("redis"),
        client = redis.createClient(); 
```

当我在 localhost 上运行代码时，一切运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-31T17:47:15.677

如果您打算在 AWS 之外使用 Redis，您可以尝试帮助我从本地 Nodejs 应用程序连接在 AWS 上工作的 Redis 服务器的后续步骤：

1) 在 AWS 上：**sudo cp /etc/redis/redis.conf.backup /etc/redis/redis.conf**。备份可以为您节省大量精力来找出问题所在 :)

2) 在 AWS 上：停止 redis-server: **sudo /etc/init.d/redis-server stop**

3) 在 AWS 上：打开 /etc/redis/redis.conf 并找到一行**bind 127.0.0.1**。**在bind 0.0.0.0**下复制并粘贴新行。所以你可以有几行带有**绑定**参数。顺便说一句，连接**端口**也可以在 redis.conf 中更改

4) 在 AWS 上：启动 redis-server: **sudo /etc/init.d/redis-server start**

5) 在 AWS 上：输入**redis-cli ping**如果 redis-server 启动正常，您应该会看到**PONG消息**

6）在 AWS 上：现在为您正在运行的实例打开 Sequrity Group 并添加带有“类型”的新规则 - 自定义 TCP 规则，端口范围 - 6379

7) 在您的本地 Nodejs 应用程序中：

`var redis = require("redis");
var redisClient = redis.createClient(redis_port, redis_host);`

[nodejs](/questions/tagged/nodejs "显示标记为“nodejs”的问题") [redis](/questions/tagged/redis "显示标记为“redis”的问题") [aws](/questions/tagged/aws "显示标记为“aws”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:45:06.073

您是否使用 ping-pong 例程检查了 AWS 上的 redis 客户端-服务器连接。接下来，也许您应该尝试以 root 身份永久运行它。

# jsp - 使用 Servlet 重定向页面

> ID：10883326
> 
> 赞同：0
> 
> 时间：2012-06-04T14:50:23.453
> 
> 标签：jsp, servlets, struts2, servlet-filters

我有一个混合了普通旧 servlet 和 Struts2 的应用程序。整个应用程序都使用了一个搜索页面，所以我把它作为一个通用页面。几个搜索页面只包含使用`jsp:include`.

**问题**：我有一页被大约 100 个其他页面引用，如下所示：

```
<a href="/reports/reportA/selectionPageA.jsp">Report Selection </a> 
```

这是一个不使用 struts2 的简单 jsp 页面，但我希望此页面包含通用搜索页面（使用 struts2）。所以我做了一个这样的映射，`struts.xml`因为通用搜索页面需要`GenericReportSelection`在显示页面之前使用 构建几件事：

```
<package name="reportA" extends="struts-default" namespace="/reportA">
    <action name="selectReportA" class="GenericReportSelection">
        <result>/reports/reportA/selectionPageA.jsp</result>
    </action>
</package> 
```

由于我不想更改其他 100 页，我将以下内容添加到我的 Servlet 过滤器中：

```
if (httpReq.getServletPath().endsWith("selectionPageA.jsp"))
    ((HttpServletResponse) resp).sendRedirect("/myapp/reportA/selectReportA.action"); 
```

**问题**：这是解决这个问题的正确方法吗？一切似乎都正常，但是当我访问这个特定页面时，我收到了某些 struts 错误，提示找不到某些“列表”方法。即使在前端一切看起来都很好......

# sql - WHERE 子句 IN 的 SQL 案例

> ID：10883327
> 
> 赞同：1
> 
> 时间：2012-06-04T14:50:28.160
> 
> 标签：sql, reporting-services

我正在尝试将报告参数传递给存储过程 (@Time) 以指示通过 WHERE 子句在我的数据集中返回哪些类别值，并且不知道正确完成此操作的语法。我怀疑需要使用 case/if 并且我之前已经这样做过，但在需要执行 WHERE 子句时不需要。

```
DECLARE @Time AS NVARCHAR
SET @Time = 'REG' --possible values of 'REG' and 'OT'

SELECT
f.[Category]    AS [Category]

FROM foo f

WHERE
@Time =  
  CASE @Time
    WHEN 'REG' THEN f.[Category] IN (A, B, C, D)
    WHEN 'OT' THEN f.[Category] IN (E, F, G) 
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:56:44.520

您可以使用以下查询限制`OR`替换：`CASE`

```
DECLARE @Time AS NVARCHAR(3)
SET @Time = 'REG' --possible values of 'OT' and 'REG'

SELECT
f.[Category] AS [Category]

FROM foo f

WHERE (@Time = 'REG' and f.[Category] IN (A, B, C, D))
   OR (@Time = 'OT'  and f.[Category] IN (E, F, G))

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:54:03.677

```
SELECT f.[Category] AS [Category]
FROM foo f
WHERE (@Time = 'REG' and f.[Category] IN (A, B, C, D))
    or (@Time = 'OT' and f.[Category] IN (E, F, G)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:56:12.600

首先，当你声明一个字符变量时，你应该总是包含一个长度。因此，您将 @Time 声明为一个字符。我想你想要3个字符。

其次，当您声明一个 nvarchar() 变量时，将一个 nvarchar() 分配给它。语法是 N'Reg' 而不是 'Reg'。

三、IN列表中有什么？您是否打算将它们作为数据中的常量或列？

最后，你想要的 WHERE 子句是这样的：

```
WHERE (CASE WHEN @Time ='REG' and f.[Category] IN (A, B, C, D)  then 'true'
            WHEN @Time ='OT' THEN f.[Category] IN (E, F, G) then 'true'
            else 'false'
       end) = 'true' 
```

# sql - 在 SQL 中混合日期频率

> ID：10883331
> 
> 赞同：2
> 
> 时间：2012-06-04T14:50:40.090
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有以下查询：

```
select s1.DATADATE, s1.PRCCD, c.EBIT
from sec_dprc s1 
left outer join rdq_temp c 
on s1.GVKEY = c.GVKEY
and s1.DATADATE = c.rdq
where s1.GVKEY = 008068
order by s1.DATADATE 
```

我正在尝试创建两个列之间的滚动计算，PRCCD 列是每日价格，EBIT 列是季度值。我希望能够计算两者的乘积，即每天的 PRCCD*EBIT，但 EBIT 在随机日期每季度仅更改一次。总而言之，当每个季度随机变化时，我希望能够仅使用 EBIT 的新值来计算 EBIT 和 PRCCD 的乘积

```
DATADATE                PRCCD   EBIT
1984-02-01 00:00:00.000 28.625  NULL
1984-02-02 00:00:00.000 27.875  NULL
1984-02-03 00:00:00.000 26.75   420.155
1984-02-06 00:00:00.000 27      NULL
1984-02-07 00:00:00.000 26.875  NULL 
```

. . .

```
DATADATE                PRCCD   EBIT
1984-05-02 00:00:00.000 30.75   NULL
1984-05-03 00:00:00.000 30.875  NULL
1984-05-04 00:00:00.000 30.75   NULL
1984-05-07 00:00:00.000 31.125  499.228
1984-05-08 00:00:00.000 31.75   NULL 
```

. . .

```
1984-07-31 00:00:00.000 25.625  NULL
1984-08-01 00:00:00.000 26.75   NULL
1984-08-02 00:00:00.000 26.375  348.364
1984-08-03 00:00:00.000 26.75   NULL
1984-08-06 00:00:00.000 27      NULL 
```

谢谢您的帮助！

我来到的解决方案之一：

```
select TD.Date, TD.C CD, TQ.C CQ, TQ.C1, TQ.C/TQ.C1 EBITps,TQ.C/TQ.C1/TD.C PE
from 
(select DataDate date, PRCCD C from sec_dprc where GVKEY = 008068) TD
cross apply (select top 1 rdq date, ebit C, csh12q C1 from rdq_temp  where rdq<=TD.Date order by rdq desc) TQ
order by TD.Date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:46:19.343

您正在寻找的是两个表之间的非等值连接。如果您在 rdq_temp 数据上有有效和结束日期，这会容易得多。为了在 SQL Server 中添加它们，您可以进行自联接和聚合（其他数据库支持 lag() 和 lead() 功能）。

以下查询在连接条件本质上是“介于”的情况下执行此操作：

```
with rdq as (
    select r.datadate, r.ebit, min(rnext.datadate) as nextdatadate
    from rdq_temp r left outer join
         rdq_temp rnext
         on r.datadate < rnext.datedate
    group by r.datadate, r.ebit
)
select  datadate, prccid, rdq.ebit
from sec_dprc sd left outer join
     rdq
     on sd.datadate >= rdq.datadate and rdq.datadate < rdq.nextdatadate 
```

我猜按季度的数据不是很大，所以这应该可以正常工作。如果您有更多数据，我强烈建议您在 rdq 记录中包含生效日期和结束日期，而不仅仅是截止日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:24:57.790

I havent checked the performance of this one, but I think it gives the result you want.

```
select  datadate
        ,prccid
        ,ebit
        ,(  select  top 1 ebit 
            from    sec_dprc s2 
            where   s2.datadate <= s1.datadate 
                and ebit is not null 
            order by datadate desc
        ) as latestEbit
from    sec_dprc s1 
```

# c# - 如何在 Word 文档中使用资源图像？

> ID：10883333
> 
> 赞同：0
> 
> 时间：2012-06-04T14:50:48.553
> 
> 标签：c#, ms-word, embedded-resource

我正在开发一个将自动生成 Word 和 HTML 报告的项目。如果他们没有提供要在 Word 报告的标题中使用的图像，则客户希望使用他们的徽标。我将徽标以 .jpg 格式存储在其中一个项目的资源中。

将图片添加到范围的方法需要将路径作为图像的字符串，没有任何重载。我知道当一个文件被添加到项目的资源中时，它不存在，因为它嵌入到创建的 .dll 中。有没有办法在该方法中利用该嵌入式资源？

我是否需要将该文件作为安装的一部分复制到目录中？我认为这可能是最简单的解决方案，但是为了测试目的我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:58:50.167

我让这变得比它需要的要困难得多。

您所要做的就是从资源中创建一个图像对象：

```
Image img = Data.Properties.Resources.ImageFile; 
```

然后，您所要做的就是保存它：

```
img.Save(@"C:\DestinationFolder\Image.jpg"); 
```

现在您可以随意使用该文件。如果您将它放在项目的子文件夹中（如您所愿），那么您是否正在调试（就您的 Application.Run 位置而言）并不重要，但不一定会在最后的路径相同。

前几天当我问这个问题时，我想得太多了。希望我能够帮助遇到同样问题的其他人。

# git - Kdiff3 不会用 mergetool 命令打开

> ID：10883336
> 
> 赞同：25
> 
> 时间：2012-06-04T14:51:01.977
> 
> 标签：git, git-bash, kdiff3

我有冲突，所以我输入：

```
git mergetool 
```

然后我收到一条消息说：

> 按回车键开始合并解析工具

通常当我这样做时，它会打开 kdiff3 以便我可以合并差异。

现在当我这样做时，它只是继续到下一个文件，而 kdiff3 根本没有打开。

我三次检查了我的 git 配置和系统路径，一切看起来都很完美。配置文件如下：

```
 [merge]
    tool = kdiff3
 [mergetool "kdiff3"]
    path = c:/Program Files (x86)/KDiff3/kdiff3.exe
 [diff]
    guitool = kdiff3
 [difftool "kdiff3"]
    path = c:/Program Files (x86)/KDiff3/kdiff3.exe
 [core]
    editor = \"C:/Program Files (x86)/GitExtensions/GitExtensions.exe\" fileeditor   autocrlf = true
 [user]
    name = James Farrell
    email = info@jamespfarrell.com
 [github]
    user = whygosystems
    token = 87d00c2e613b3a7c8c1be817b75b8a33
 [diff]
    external = C:/Program Files (x86)/Git/cmd/git-diff-wrapper.sh 
```

任何人有任何想法可能是什么问题？

我有一种感觉（虽然我可能是错的，这是一个问题，因为我安装了新的 Github windows 客户端）....

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T14:43:05.437

我意识到这已经过时了，但是对于未来的谷歌人来说，KDiff3 还有一个选项，如果合并是微不足道的，它会默默地解决它，甚至从不显示一个窗口。

我过去也遇到过这种情况，所以这可能是你正在发生的事情。我认为该选项称为“自动保存并在合并时退出而不会发生冲突”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T16:32:03.460

我有一段时间没有在 Windows 上为此目的使用 git，但是您的配置文件显示了一些有趣的差异：程序字符串。

```
[core]
    editor = \"C:/Program Files (x86)/GitExtensions/GitExtensions.exe\" fileeditor   autocrlf = true 
```

对比

```
[difftool "kdiff3"]
    path = c:/Program Files (x86)/KDiff3/kdiff3.exe 
```

我怀疑程序名称中的空格可能存在问题。尝试将您的 diff/mergetool 可执行路径设置为：

```
path = \"c:/Program Files (x86)/KDiff3/kdiff3.exe\" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-16T17:58:45.610

同样，对于未来的 Google 员工：

从版本 2.48.02（2014 年 11 月 29 日）开始，Git Extensions 开始分发 64 位版本的 kdiff3。（参见[https://github.com/gitextensions/gitextensions/blob/master/GitUI/Resources/ChangeLog.md#version-24802-29-november-2014](https://github.com/gitextensions/gitextensions/blob/master/GitUI/Resources/ChangeLog.md#version-24802-29-november-2014)。）

因此，如果您运行的是 32 位操作系统并且让 Git Extensions 安装程序安装了 kdiff3，那么您的 kdiff3 甚至不会自行运行。解决方案是下载 32 位版本 ( [http://sourceforge.net/projects/kdiff3/files/kdiff3/](http://sourceforge.net/projects/kdiff3/files/kdiff3/) ) 并重新安装。我什至不需要先卸载 64 位版本，因为安装程序只是覆盖了以前的安装。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-30T09:14:54.727

Git 已`--auto`硬编码为 KDiff3 的命令行选项，**如果所有冲突都可由 KDiff3 自动解决，这将导致 GUI 不显示**。

我们可以通过设置来改变这个默认行为：

```
git config --global mergetool.kdiff3NoAuto.cmd "/c/Program Files/KDiff3/kdiff3.exe --L1 \"\$MERGED (Base)\" --L2 \"\$MERGED (Local)\" --L3 \"\$MERGED (Remote)\" -o \"\$MERGED\" \"\$BASE\" \"\$LOCAL\" \"\$REMOTE\"" 
```

这导致`~/.gitconfig`文件（或者您可以直接修改文件）：

```
[merge]
        tool = kdiff3
[mergetool "kdiff3"]
        path = C:/Program Files/KDiff3/kdiff3.exe
        trustExitCode = false
        cmd = \"/c/Program Files/KDiff3/kdiff3.exe\" --L1 \"$MERGED (Base)\" --L2 \"$MERGED (Local)\" --L3 \"$MERGED (Remote)\" -o \"$MERGED\" \"$BASE\" \"$LOCAL\" \"$REMOTE\"
[diff]
        guitool = kdiff3
[difftool "kdiff3"]
        path = C:/Program Files/KDiff3/kdiff3.exe
        trustExitCode = false 
```

这样，无论是否还有未解决的冲突，kdiff3 都会一直打开。

参考：[https ://stackoverflow.com/a/15813064/2303761](https://stackoverflow.com/a/15813064/2303761)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T23:21:11.357

未来谷歌人的另一个答案：

实际上，不会启动任何外部合并工具。2015 年 8 月提交了一个问题：[https ://jira.atlassian.com/browse/SRCTREEWIN-3543](https://jira.atlassian.com/browse/SRCTREEWIN-3543)

# c# - LINQ 获取匿名类型的集合

> ID：10883337
> 
> 赞同：0
> 
> 时间：2012-06-04T14:51:02.200
> 
> 标签：c#, linq, entity-framework, anonymous-types

我有以下 LINQ 语句：

```
var query =(from item in _itemRepository.FindAll()
            where item.Id == "20649458"
                from singelitem in item.ListOfChildren
                where singelitem.Property == "singelitem"
                from manyitems in item.ListOfChildren
                where manyitems.Property == "many"
                select new
                            {
                                item.Id,
                                singelitem,
                                manyitems 
                            });
var result = query.ToList(); 
```

~~Tasks 是对象的集合，where 子句`tasks.Property == "something"`匹配集合中的多个项目，但是当我在 select 中使用匿名类型时，我只返回匹配结果的一个项目（第一个）而不是任务集合。如何取回集合中的所有匹配任务？~~

编辑：真正发生的是我得到了平面对象（就像来自连接语句的数据库结果集）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:53:31.150

当您不使用匿名类型时，您正在处理实体类，该实体类在您访问它们时会延迟加载任务。如果您想使用结果加载任务，请尝试使用 Include 方法来急切加载子项。请参阅[如何构造 LINQ to Entities 查询以直接加载子对象，而不是调用 Reference 属性或 Load()](https://stackoverflow.com/questions/315966/how-do-you-construct-a-linq-to-entities-query-to-load-child-objects-directly-in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:59:18.907

这是 Linq 的正确行为。事实上，你所期望的是不可能的。您期待一个匹配 item.Id == "123"; 的项目 如果不止一个怎么办？它只是为每个匹配的项目创建一个匿名项目。只需考虑将第一个“from”语句更改为第二个；你会期待什么？

此外，第一个“from”语句和第二个语句之间没有关系，这使得这个查询有点“奇怪”。为什么不直接将查询分成 2 个；并创建一个具有所需属性的新对象？

# c# - 通过 Resharper 或 DevExpress 的方法进行依赖注入

> ID：10883342
> 
> 赞同：2
> 
> 时间：2012-06-04T14:51:29.187
> 
> 标签：c#, dependency-injection, refactoring, devexpress, resharper-6.0

我想在我的一个类中注入一个依赖项，但我不知道在类似`Resharper`或`DevExpress`这样做的工具中是否有重构。

这是我的课：

```
 public class ClassWithInjections
   {
      private Dependency _fieldInjected;
   }

   public class Dependency
   {

   } 
```

我希望它看起来像最终结果：（请注意，该字段现在可以通过方法初始化`Initialize`）

```
 public class ClassWithInjections
   {
      private Dependency _fieldInjected;

      public void Initialize(Dependency fieldInjected)
      {
         _fieldInjected = fieldInjected;
      }
   } 
```

我希望能够在使用鼠标光标指定我的字段时激活重构选项，然后如果我想用方法、属性或构造函数注入依赖项，则可以建议我的工具。

使用`Resharper`，您可以使用 'Encapsulate field' ( `Ctrl`++ `Shift`)或使用代码生成工具 ( - )`R`创建构造函数，但我没有找到任何选项来使用 'method' 技术注入我的依赖项。`Alt``Insert`

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:38:30.537

首先。您不应该使用方法注入依赖项。[在这里阅读](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling.aspx)。我只会使用属性注入来解决循环依赖问题。

这留下了构造函数注入。

Resharper 可以帮助您。按下`ALT+ENTER`该字段并选择“在构造函数中初始化”

> 我没有找到任何使用“方法”技术注入我的依赖项的选项。

出色地。它不存在，因为您应该避免这种情况；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T11:35:34.787

您可以使用[DevExpress 重构！](http://help.devexpress.com/#RefactorPro/CustomDocument1716)Pro >为此目的[创建 Setter Method重构选项。](http://help.devexpress.com/#RefactorPro/CustomDocument1716)

# xpath - XQuery 中的 XPath 组合

> ID：10883347
> 
> 赞同：1
> 
> 时间：2012-06-04T14:51:38.360
> 
> 标签：xpath, xquery

我有两个 XPath，`f(x)`和`g(y)`，还有一些 XML `x`。

```
x = <example>
  <a>
    <number>1</number>
  </a>
  <b>
    <letter>A</letter>
  </b>
  <c>
    <number>2</number>
  </c>
</example> 
```

`f(x) = /example/*`

`g(y) = /number|/letter`

我如何`h(x)`在 XQuery 中这样`h(x) = g(f(x))`写`g(x)`呢？我不`g(x)`提前知道，所以我无法修改它。如果需要我可以修改`f(x)`。所有这些都需要在 XQuery 中进行，因为它是 Oracle 查询的一部分。

`h(x) = g(f(x)) = $data/example/*...`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:22:09.050

我可能对这个问题感到困惑，但如果我理解正确，那么答案是

```
let $f := FFFF return $f/(GGGG) 
```

其中 FFFF 和 GGGG 是对应于 f(x) 和 g(y) 的表达式

但我假设你的例子错了，当你写

```
g(y) = /number|/letter 
```

你的意思是

```
g(y) = number|letter 
```

即相对选择而不是绝对选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:59:55.220

一种方法是连接字符串：

```
h(x, g_postfix) = '$data/example/*' + g_postfix 
```

显然照顾'|' 这将需要拆分，连接然后加入。

另一种方法是传递“g”函数的名称，然后创建动态 SQL 以在 f() 返回的节点列表上循环执行它。

# android - 如何在android中获取捕获视频的持续时间？

> ID：10883349
> 
> 赞同：4
> 
> 时间：2012-06-04T14:51:46.753
> 
> 标签：android

使用下面的代码我捕获了视频，但是如何在 android 中获取捕获的视频的持续时间？并且有时用户丢弃视频并录制新视频然后获得新视频的持续时间。

```
Intent cameraIntent = new Intent(
android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
startActivityForResult(cameraIntent, TAKE_VIDEO); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T10:40:06.560

我认为最简单的方法是：

```
MediaPlayer mp = MediaPlayer.create(this, Uri.parse(uriOfFile);
int duration = mp.getDuration();
mp.release();
/*convert millis to appropriate time*/
return String.format("%d min, %d sec", 
        TimeUnit.MILLISECONDS.toMinutes(duration),
        TimeUnit.MILLISECONDS.toSeconds(duration) - 
        TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(duration))
    ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T14:59:43.677

使用光标您可以获得持续时间，并且`duration`光标中有列，您可以将其作为字符串获取。

```
Cursor cursor = MediaStore.Video.query(getContentResolver(),data.getData(),
                new String[] { MediaStore.Video.VideoColumns.DURATION });
System.out.println(">>>>>>>>>>"+cursor.getCount());
cursor.moveToFirst();

String duration = cursor.getString(cursor.getColumnIndex("duration")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-13T00:03:08.910

MediaPlayer 是一个重物。改用 MediaMetadataRetriever

```
fun getMediaDurationMs(context: Context, fileUri: Uri): Int? {
    val mmr = MediaMetadataRetriever()
    mmr.setDataSource(context, fileUri)
    return mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION)?.toInt()
} 
```

# git - git根据调用它的项目将不同的变量传递给涂抹过滤器

> ID：10883350
> 
> 赞同：0
> 
> 时间：2012-06-04T14:51:50.223
> 
> 标签：git, environment-variables

我想根据我在存储库中使用代码的环境，在 git 版本控制的 php 脚本中修改一些配置字符串。

我想设置一个涂抹/清洁过滤器来根据平台修改代码中的配置字符串，我正在检查（开发/测试）。我的脚本在里面`~/scripts`，我想添加一个配置文件`~/scripts/config`来设置脚本使用的值

我有不同的项目（在不同的存储库中），其中包含相同的文件，但它们应该进行不同的修改，因此脚本需要知道它是从哪个存储库调用的。

`.gitattributes`有没有办法在作为环境变量传递给过滤器脚本的文件中设置项目 ID ？

**例子：**

内容`.gitattributes`：

```
PROJECT_ID = "ProjectX" 
```

涂抹脚本的内容（伪代码）：

```
host = getConfigValueFromFile(projectXhost)
if $PROJECT_ID == "ProjectX" then
    print 'host=$host' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:29:21.657

您可以在存储库配置中设置任意值。例如，您可以像这样设置一个变量：

```
$ git config mytool.myvariable myvalue 
```

并像这样检索它：

```
$ git config mytool.myvariable
myvalue 
```

因此，您的涂抹/清洁脚本可以简单地调用`git config mytool.myvariable`并读取输出以获取您配置的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:26:02.050

我自己找到了答案：

使用（新）repos 目录作为工作目录执行 clean/smudge 脚本。因此，可以将文件例如`.projectID`放在您的存储库中并在涂抹脚本中读取其内容。

# python - 如何判断光标的当前形状？

> ID：10883353
> 
> 赞同：2
> 
> 时间：2012-06-04T14:52:03.077
> 
> 标签：python, windows-xp, mouse-cursor

当自动点击和击键时，我经常不得不等到按钮完成加载并变为可点击。据我所知，唯一的指标是光标的形状。在任何编程语言（最好是 Python）中，有没有办法判断它是否已从指针变为手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:42:09.650

您可以截屏，然后使用 PIL 图像库结合当前光标位置来找出鼠标的宽度。但是，如果有白色或黑色背景，它可能效果不佳。

# facebook - Facebook Page Tab App OAuth - 测试是否安装了全新的应用程序

> ID：10883356
> 
> 赞同：1
> 
> 时间：2012-06-04T14:52:15.083
> 
> 标签：facebook, oauth

我有一个页面标签应用程序。授权工作正常 - 用户单击应用程序上的授权按钮，弹出 OAuth 对话框，他们授权应用程序，它重定向回页面选项卡，用户使用应用程序以他们快乐的方式进行。

我需要知道一件事，而对于我的生活，我找不到真正的答案 - 是否可以识别用户授权应用程序后立即发生的一个 http 请求？我只是想在用户授权应用程序时记录用户的数据，而无需访问数据库并测试 facebook 用户 ID 是否已被记录。你会认为这很容易...

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:03:13.290

是的，您可以在[signed_request的帮助下完成](https://developers.facebook.com/docs/authentication/signed_request/)

[在此处](https://developers.facebook.com/docs/authentication/pagetab/)阅读如何在页面选项卡中处理授权。

**简单地说，当用户来到应用程序时**
- 检查签名请求中的 user_id 退出，如果不存在，那么他没有授权。
- 在会话中存储一些变量
- 当用户登录时，检查会话变量是否存在。如果存在，则为全新安装。

# java - 将不规则定位的数据插值到

> ID：10883357
> 
> 赞同：3
> 
> 时间：2012-06-04T14:52:16.713
> 
> 标签：java, interpolation, worldwind

我正在尝试在[Worlwind Java](http://worldwind.arc.nasa.gov/java/)中显示彩色表面，其中颜色取决于来自一组不规则位置数据的纬度/经度定位值（例如温度）。我正在使用[gov.nasa.worldwindx.examples.analytics](http://builds.worldwind.arc.nasa.gov/worldwind-releases/1.3/docs/api/gov/nasa/worldwindx/examples/analytics/package-summary.html)包中的示例。那里有一个 Interpolator2D 类，但它似乎无法计算位置不规则的数据。

据我所知，为了做到这一点，我只缺少一件事：一种从一组随机定位的点生成规则放置点的网格的方法。到目前为止，我还没有办法做到这一点。

撇开所有 WWJ 的东西不谈，我需要的是一种从一组任意定位的值中生成插值（也可能是外插）值网格的方法。

欢迎任何想法、代码、API 或算法。解决方案是否在纬度/经度坐标中不起作用都没关系，任意坐标都可以。

PS：基本上我想要的是在java中做到这一点：[https ://stackoverflow.com/a/3867302/1435322](https://stackoverflow.com/a/3867302/1435322)

谢谢。

# java - JAXB wrap 包裹集合

> ID：10883361
> 
> 赞同：5
> 
> 时间：2012-06-04T14:52:35.440
> 
> 标签：java, jaxb, xml-serialization, moxy

我有一个包含两个列表的类。我想围绕列表元素和两个列表生成一个包装器元素。

```
class SomeClass {

   private List<TypeA> listA;
   private List<TypeB> listB;

}

<some-class>
    <lists>
        <list-a>
            <element-from-list-a />
            <element-from-list-a />
            <element-from-list-a />
            ...
        </list-a>

        <list-b>
            <element-from-list-b />
            <element-from-list-b />
            <element-from-list-b />
            ...
        </list-b>
    </lists>
</some-class> 
```

我可以使用 xml-element-wrapper 围绕列表生成一个包装器，但我不能将两个列表包装成一个元素。

是否可以在 JAXB 和/或 moxy 实现中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:20:49.137

在我提出这个问题后，我成功地解决了 moxy 的 xml-path 扩展的问题，但我仍然对这个问题的标准 jaxb 解决方案感兴趣。

# ubuntu - 使用 ubuntu 对源代码洞察的程序错误

> ID：10883367
> 
> 赞同：0
> 
> 时间：2012-06-04T14:53:06.393
> 
> 标签：ubuntu, wine, source-insight

我在 Ubuntu 10.10 32bit 上使用 Source Insight 3.5。由于某种原因，当我工作时，程序卡住了。我关闭了它，从那以后，当我尝试打开它时，我收到以下错误消息：

> 程序错误
> 
> 程序 Insight3.exe 遇到严重问题，需要关闭。对此造成的不便，我们表示歉意。

重新启动计算机没有帮助。卸载程序和 wine 然后重新安装它们也没有帮助。我仍然收到相同的错误消息。

有人来救援吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T09:02:53.673

在 ubuntu 中转到 ~/Source Insight/ 并删除项目目录内容和设置目录内容，然后打开源代码洞察力并加载您现有的 .PR 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:04:15.850

I had the exact same problem. So to resolve it you have to blow away the GLOBAL.CF3 file each time before you launch Source Insight inside of WINE.

Then, to backup your settings, you can do a Save Settings AS and call it something other than GLOBAL.CF3\. Then, after you delete GLOBAL.CF3 and launch Source Insight, I go to Options > Load Configuration and load my backup.CF3 file. When you close out of Source Insight it will recreate the GLOBAL.CF3 file which you'll, again, have to delete the next time you go to launch Source Insight.

Eventually, I stopped working this way and now use Source Insight on a Windows PC and work on my source code on the Linux PC over a samba share.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T18:16:52.257

我也遇到了问题，删除了配置，将 Source Insight 更新到更高的子版本（.66 或 .72）并重新启动它。又没有这个问题了。

# antlr - 为什么像 yacc 和 ANTLR 这样的工具会生成源代码？

> ID：10883369
> 
> 赞同：1
> 
> 时间：2012-06-04T14:53:08.133
> 
> 标签：antlr, yacc, auto-generate

这些工具基本上输入语法和输出代码，将一系列标记处理成更有用的东西，比如语法树。但是这些工具可以改为以库的形式编写吗？生成源代码作为输出的原因是什么？有性能提升吗？对最终用户来说是否更灵活？yacc 和 ANTLR 的作者更容易实现吗？

抱歉，如果问题太模糊，我只是好奇作者做出决定背后的历史原因，以及自动生成的代码在当今环境中的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:18:20.020

解析器生成器计算出语法规则相互之间的交互，并将结果编译为代码，从而获得了很大的性能优势。

可以构建简单地接受语法并进行解析的解释器；有一些解析器类型（[Earley](http://en.wikipedia.org/wiki/Earley_parser)）实际上在这方面相对较好，并且可以在运行时计算语法交互（Earley 解析器无论如何都会这样做）而不是离线然后执行解析算法。

但是你会付出 10 到 100 倍的解析性能损失，并且可能需要很大的存储需求。

如果您只使用非常小的语法进行解析，或者您只解析非常小的文档，这可能无关紧要。但是，许多解析器生成器应用的语法最终变得相当大（人们一直想在语言中添加一些东西），并且它们通常最终会处理相当大的文档。所以现在性能很重要，而且中提琴，人们构建代码生成解析器生成器。

一旦有了工具，即使在简单的情况下也通常更容易使用。所以现在你*有了*解析器生成器，你甚至可以将它们应用于小语法或解析小文档。

编辑：附录。历史原因很可能是空间和时间需求驱动的*。*早期的系统空间不大（1975 年为 32Kb），运行速度不是很快（同一时间框架为 1 MIPS），而且人们已经拥有很大的源文件。解析器生成器倾向于帮助解决这组问题。解释语法的性能会差到令人无法忍受的地步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T20:14:40.473

[Ira Baxter](https://stackoverflow.com/users/120163/ira-baxter)为您提供了一组在运行时不处理语法解析的原因。

还有另一个原因。与语法中的每条规则相关的是适当的动作。动作通常是单独语言（例如，C 或 C++）的片段。在运行时解释的语法中的所有动作都必须可映射到程序中适当的东西。一般来说，这是一个失败的提议。片段可以做各种各样的事情，引用堆栈的一部分（`$$`、、`$1`等）和调用动作（`YYACCEPT`， ETC）。设计运行时系统以便它可以可靠地与此类片段一起使用将是困难的。您想创建源代码并将其编译成 DSO（动态共享对象）或 DLL（动态链接库）并加载它。这需要客户机器上的编译器，客户可能故意将他们的生产系统设计为无编译器。

# java - WEKA如何将实例的值编码为double值

> ID：10883370
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:53:13.413
> 
> 标签：java, machine-learning, data-mining, weka

当我们想要读取实例的特定值时，我们使用以下方法：

```
public double value(int attIndex) 
```

现在，我如何从 double 值恢复到原始值？是否有可能知道这个特定值是什么数据类型，如果我已经知道它是否是 String 类型，我怎样才能得到 String 值？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:19:18.520

If you wanto to get the String value you can use

```
public double stringValue(int attIndex) 
```

# android - Android警报，服务未调用

> ID：10883377
> 
> 赞同：1
> 
> 时间：2012-06-04T14:53:41.253
> 
> 标签：android, alarms

在我的活动中：

```
Intent myIntent = new Intent(this, MyAlarmService.class);
pendingIntent = PendingIntent.getService(this, 0, myIntent, 0);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 10);
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

Toast.makeText(this, "Start Alarm", Toast.LENGTH_LONG).show(); 
```

要调用的类：

```
public class MyAlarmService extends Service {

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
    }
} 
```

使用此代码，MyAlarmService 没有被调用。为什么？此代码从示例中删除，因此经过测试可以正常运行。我会忘记什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:13:44.607

我认为，您的服务已正确启动。Toast 在服务中存在问题。

尝试更改`Toast.makeText()`为`Log.d()`并查看记录是否出现在您的 Logcat 中。

服务中的 Toast 问题已在[此处](https://stackoverflow.com/questions/7298083/toast-in-a-self-running-service)进行了解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:15:46.693

似乎是对的。我还在我的代码中尝试了这个示例，它运行良好。

我认为问题出在 Manifest 中。您需要在项目的清单中声明服务，如下所示：

```
< service android:name=".MyAlarmService" /> 
```

# spring-mvc - 如何使用 Spring MVC 3 将图像上传数据作为字节 [] 使用

> ID：10883379
> 
> 赞同：3
> 
> 时间：2012-06-04T14:53:59.030
> 
> 标签：spring-mvc, file-upload, bytearray, image-uploading

我需要在服务器端的特定目录中写入图像数据，但是我尝试从 html 表单和 jquery ajaxuploader 插件从[此处](http://valums.com/ajax-upload/)发送的原始字节 [] 图像上传数据为空。

以下是我用来处理上传图像的原始字节的控制器的片段：

```
@RequestMapping(value = "uploadImage", method = RequestMethod.POST)
public void uploadImage(byte[] uploadData, Writer writer, HttpServletRequest request) throws IOException, JSONException {
    //uploadData is turning out to be null
    //..
}

@InitBinder
protected void initBinder(ServletRequestDataBinder binder) {
    binder.registerCustomEditor(byte[].class,
            new ByteArrayMultipartFileEditor());
} 
```

我在 spring 配置文件中配置了以下用于处理上传的内容：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
</bean> 
```

我正在使用 Spring MVC 3。有人可以指导我如何发送上传数据的原始字节吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:06:18.773

First, if you're form is uploading an image, make sure your content type is "multipart/form-data". You might want to change your RequestMapping as follows:

```
@RequestMapping(value = "uploadImage", method = RequestMethod.POST, headers={"content-type=multipart/form-data"}) 
```

Also, I'd suggest using CommonsMultipartFile to handle the upload. Change your function signature as follows, where "fieldName" is the name of the input field in your form:

```
public void uploadImage(byte[] uploadData, Writer writer, HttpServletRequest request, @RequestParam("fieldName") CommonsMultipartFile file) 
```

Then you can get the raw bytes as follows:

```
file.getBytes() 
```

Make sure you include the commons-fileupload dependency for CommonsMultipartFile.

I'm using spring3 + jquery ajaxform and this works like a charm. Hope this helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T11:48:25.377

以下是我在客户端使用的 JavaScript 和 HTML 代码，它们可以正常工作：

**JavaScript**：

```
function createUploader(){           
    var uploader = new qq.FileUploader({
    element: document.getElementById('file-uploader'),
    action: 'uploadImage',
    allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
    debug: true,
    onSubmit: function(id, fileName){
        console.log("id - " + id + ", fileName - " + fileName);
    },
        onComplete: function(id, fileName, responseJSON) {
            console.log("responseJSON -  " + responseJSON);
        }
    });           
}
window.onload = createUploader; 
```

**HTML**：

```
<div id="file-uploader" >
    <noscript>
    <p>Please enable JavaScript to upload your property location images</p>
    </noscript>
</div> 
```

**控制器**：

```
@Controller
public class FranchiseeLocationImageController {

    private static final Log logger = LogFactory.getLog(FranchiseeLocationImageController.class);

    @Autowired
    private ServletContext servletContext;

    @Autowired
    private FranchiseeLocationImageService franchiseeLocationImageService;  

    @RequestMapping(value = "uploadImage", method = RequestMethod.POST)
    public void uploadImage(byte[] qqfile, Writer writer, @RequestParam("qqfile") String img, HttpServletRequest request, HttpServletResponse response) throws IOException, JSONException{
        FranchiseeLocationImage image = null;       
        PrintWriter pr = null;
        InputStream is =  null;
        File file = null;
        FileOutputStream fos = null;
        String filename = request.getHeader("X-File-Name");
        String imageId = FilenameUtils.removeExtension(img);
        String imageFormat = franchiseeLocationImageService.getImageFormat();
        String outputDir = servletContext.getRealPath("") + File.separator + franchiseeLocationImageService.getImagesDirectory() + File.separator;
        File baseDirectory = null;
        File output = null;
        String path = FilenameUtils.removeExtension(img) + "." + imageFormat;
        File outputDirectory = null;
        HttpSession session = request.getSession();
        /*
        HttpSession session = request.getSession(false);
        if(session == null) {
            session = request.getSession();
        }
        */
        List<String> franchiseeLocationImages = (List<String>) session.getAttribute("franchiseeLocationImages");
        if(franchiseeLocationImages == null) {
            franchiseeLocationImages = new ArrayList<String>();
        }

        logger.debug( "filename - " + filename + " | img - " + img + " | img name - " + FilenameUtils.removeExtension(img) + " | img format - " + FilenameUtils.getExtension(img) + " | uploadData - " + qqfile + " | imageFormat - " + imageFormat);   
        /**
         * Reading the image being uploaded and writing it to images/franchiseeLocation folder ["qqfile" is used instead of "X-File-Name" as "X-File-Name" gives encoded HTML name with "%20" for " "]
         */
        try {
            pr = response.getWriter();
            is =  request.getInputStream();

            /*
            baseDirectory = new File(outputDir);
            baseDirectory.mkdirs();
            file = new File(outputDir, FilenameUtils.removeExtension(img) + "." + imageFormat);         
            fos = new FileOutputStream(file);
            int copiedNum = IOUtils.copy(is, fos);
            */

            outputDirectory = new File(outputDir);
            outputDirectory.mkdirs();
            output = new File(outputDirectory, path);
            BufferedImage sourceImage = ImageIO.read(is);
            boolean written = ImageIO.write(sourceImage, imageFormat, output);
            franchiseeLocationImages.add(img);
            session.setAttribute("franchiseeLocationImages", franchiseeLocationImages);

            logger.debug("franchiseeLocationImages - " + franchiseeLocationImages);
            logger.debug("outputDirectory - " + outputDirectory + " | output - " + output +  " | sourceImage - " + sourceImage + " | is - " + is + " | file - " + file + " |fos - " + fos + " | copiedNum - " + "copiedNum" + " | baseDirectory - " + baseDirectory + " | sourceImage - " + sourceImage + " | written - " + written);
            /*
            image = franchiseeLocationImageService.processProductImage(qqfile, imageId);
            JSONObject json = new JSONObject();
            json.put("path", image.getPath());
            json.put("id", image.getId());
            writer.write(json.toString());
            */
            pr.print("{success: true}");
        } finally {
            writer.close();
            /*
            try {
                fos.close();
                is.close();
            } catch (IOException ignored) {
            }
            */
            pr.flush();
            pr.close();
        }
    }

    @InitBinder
    protected void initBinder(ServletRequestDataBinder binder) {
        binder.registerCustomEditor(byte[].class,
                new ByteArrayMultipartFileEditor());
    }

    private static String html2text(String html) {
        return Jsoup.parse(html).text();
    }

} 
```

# sql - 连接两个查询的结果：#1248 - 每个派生表都必须有自己的别名

> ID：10883380
> 
> 赞同：1
> 
> 时间：2012-06-04T14:53:59.903
> 
> 标签：sql, join, alias

我正在尝试将我的数据库上的两个查询产生的结果结合起来......

q1：

```
SELECT * FROM werkgevers JOIN werkgevers_branches ON werkgevers.werkgever_id = werkgevers_branches.werkgever_id JOIN plaatsen ON werkgevers.plaats_id = plaatsen.plaats_id JOIN branches ON werkgevers_branches.branche_id = branches.branche_id GROUP BY werkgevers_branches.werkgever_id 
```

q2：

```
SELECT werkgever_id, COUNT(werkgever_id) AS aantalvacatures FROM vacatures GROUP BY werkgever_id 
```

... 像这样：

```
SELECT * FROM (
SELECT * FROM werkgevers JOIN werkgevers_branches ON werkgevers.werkgever_id = werkgevers_branches.werkgever_id JOIN plaatsen ON werkgevers.plaats_id = plaatsen.plaats_id JOIN branches ON werkgevers_branches.branche_id = branches.branche_id GROUP BY werkgevers_branches.werkgever_id
) AS tbl1
LEFT OUTER JOIN 
(
    SELECT * FROM (
        SELECT werkgever_id, COUNT(werkgever_id) AS aantalvacatures FROM vacatures GROUP BY werkgever_id
    ) AS tbl2
)
USING (werkgever_id) 
```

但我不断收到错误

> #1248 - 每个派生表都必须有自己的别名

我不确定我应该在哪里命名任何派生表，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:58:02.007

您的 LEFT OUTER JOIN 派生表需要一个别名。尝试这个：

```
select *
from (
    select *
    from werkgevers
    join werkgevers_branches on werkgevers.werkgever_id = werkgevers_branches.werkgever_id
    join plaatsen on werkgevers.plaats_id = plaatsen.plaats_id
    join branches on werkgevers_branches.branche_id = branches.branche_id
    group by werkgevers_branches.werkgever_id
    ) as tbl1
left outer join (
    select *
    from (
        select werkgever_id,
            COUNT(werkgever_id) as aantalvacatures
        from vacatures
        group by werkgever_id
        ) as tbl2
    ) a USING (werkgever_id) 
```

注意最后一行的别名`a`。

# java - Android 静态函数

> ID：10883383
> 
> 赞同：0
> 
> 时间：2012-06-04T14:54:08.617
> 
> 标签：java, android, function, static-functions

我想知道如何使用静态函数访问 return 语句。我有一个带有 Async 的静态函数，然后我想在另一个类中获取 return 语句 - 我知道这听起来很复杂，但我确信这是一个简单的解决方案。

登录类

```
public class LogIn extends Activity {
    Button login;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        TextView top = (TextView) findViewById(R.id.textView2);
        final EditText user = (EditText) findViewById(R.id.etUser);
        final EditText pass = (EditText) findViewById(R.id.etPass);
        CheckBox stay = (CheckBox) findViewById(R.id.cBStay);
        Button login = (Button) findViewById(R.id.btLogin);

    login.setOnClickListener( new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String user1 = user.getText().toString();
             String pass1 = pass.getText().toString();
            if(user1 !=null &user1.length()>=1 & pass1 !=null &pass1.length()>=1) {
                ComHelper.SendLogin(user1, pass1);

            }
        }
    });

    }

} 
```

ComHelper.class

```
public class ComHelper extends AsyncTask<String, Void, String> {
    static String adress ="http://gta5news.com/login.php";
    String user;
    String pass;
    public static boolean SendLogin(String user1, String pass1){
    String user = user1.toString();
    String pass = pass1.toString();
    new ComHelper().execute(user1, pass1, adress);
    return true;

    }

    private static StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;

    }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        InputStream inputStream = null;
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost post = new HttpPost(adress);
        try {
            /*Add some data with NameValuePairs */
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("user", user));
            nameValuePairs.add(new BasicNameValuePair("password", pass));
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            /*Execute */
            HttpResponse response = httpclient.execute(post);
            String str = inputStreamToString(response.getEntity().getContent())
                    .toString();
            Log.w("HttpPost", str);

            if (str.toString().equalsIgnoreCase("true"))
                return str;

        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {

        }

        return null;

        }
    } 
```

现在，我想看看是否`ComHelper.SendLogin()`返回了 true/或至少返回了一些东西。

编辑：当代码执行时什么都没有发生，我想那是因为我没有对 return 语句做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:35:18.233

你想实施

```
protected void onPostExecute (Result result) 
```

在您的 AsyncTask 实现上。结果参数将是您从 doInBackground 方法返回的任何值。由于它在 UI 线程中运行，因此您可以在那时按照您的需要修改 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:57:16.927

如果要查看值，则需要将方法的返回值保存在局部变量中

```
if(user1 !=null && user1.length() > 0 && pass1 !=null && pass1.length() > 0) 
{
     boolean comLogin = ComHelper.SendLogin(user1, pass1);
     if(comLogin)
     {
         //do something
     }
} 
```

# python - 如何计算 Python 程序运行的时间？

> ID：10883387
> 
> 赞同：5
> 
> 时间：2012-06-04T14:54:11.750
> 
> 标签：python, time

有没有一种简单的方法来计算 Python 程序的执行时间？

澄清：整个程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T14:55:54.887

使用[`timeit`](http://docs.python.org/library/timeit.html)：

> 该模块提供了一种简单的方法来计时少量 Python 代码。它既有命令行也有可调用的接口。它避免了一些用于测量执行时间的常见陷阱。

你需要一个字符串中的python语句；如果你的代码中有一个 main 函数，你可以像这样使用它：

```
>>> from timeit import Timer
>>> timer = Timer('main()', 'from yourmodule import main')
>>> print timer.timeit() 
```

第二个字符串提供设置，即要计时的第一条语句的环境。第二部分没有计时，旨在按原样设置阶段。然后第一根弦穿过它的步伐；默认情况下为一百万次，以获得准确的时间。

如果您需要有关速度慢的地方的更多详细信息，请使用以下之一[`python profilers`](http://docs.python.org/library/profile.html)：

> 分析器是描述程序运行时性能的程序，提供各种统计信息。

运行它的最简单方法是使用`cProfile`命令行中的模块：

```
$ python -m cProfile yourprogram.py 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T15:13:52.763

如果您在 Linux/Unix/POSIX 兼容平台上，只需使用[`time`](http://www.freebsd.org/cgi/man.cgi?query=time). 这样您就不会干扰您的脚本，也不会因为不必要的详细（对您）分析而减慢它的速度。自然，您可以将它用于几乎任何东西，而不仅仅是 Python 脚本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T14:59:46.273

您可能想要使用内置[分析器](http://docs.python.org/library/profile.html)。

此外，您可能希望使用以下简单的装饰器来测量函数的运行时间：

```
import time
def myprof(func):
    def wrapping_fun(*args):
        start = time.clock()
        result = func(*args)
        end = time.clock()
        print 'Run time of %s is %4.2fs' % (func.__name__, (end - start))
        return result
    return wrapping_fun 
```

用法：

```
@myprof
def myfun():
    # function body 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T14:55:50.667

对于片段，请使用该[`timeit`](http://docs.python.org/library/timeit.html)模块。

对于整个程序，请使用该 [`cProfile`](http://docs.python.org/library/profile.html#module-pstats)模块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T14:58:39.963

使用[时间](http://docs.python.org/library/timeit.html)

```
>>> import timeit  
>>> t = timeit.Timer(stmt="lst = ['c'] * 100")  
>>> print t.timeit()  
1.10580182076  
>>> t = timeit.Timer(stmt="lst = ['c' for x in xrange(100)]")  
>>> print t.timeit()  
7.66900897026 
```

# events - Sencha Touch 2 DataView itemtaphold 未触发

> ID：10883391
> 
> 赞同：1
> 
> 时间：2012-06-04T14:54:35.713
> 
> 标签：events, sencha-touch-2

对于我的一生，无论我如何附加事件处理程序，我都无法让我的数据视图触发 itemtaphold 事件。itemtap 事件触发得很好。我能做到的最接近的是在 dom 元素上使用 longpress ，但这并没有给我一个对我的控件的引用，只是 dom 元素。sencha touch 2 广告上的 dataview 的 itemtaphold 事件是否中断？

**BrowserGrid.js：**

```
Ext.define('MyApp.view.BrowserGrid', {
extend: 'Ext.dataview.DataView',
xtype: 'browsergrid',

requires: [
    'MyApp.view.BrowserGridItem',
    'Ext.dataview.*',
    'Ext.plugin.*'
],

config: {
    useComponents: true,
    cls: 'browser-grid',
    defaultType: 'browsergriditem',
    scrollable:{
        direction: 'vertical',
        directionLock: true
    },
    plugins :[{xclass:'Ext.plugin.ListPaging',autoPaging: true}],
    listeners: 
    {
        itemtaphold: function() { console.log('tapped'); }
    }
    }   
}); 
```

**BrowserGridItem.js**

```
Ext.define('MyApp.view.BrowserGridItem', {
    extend: 'Ext.dataview.component.DataItem',
    xtype : 'browsergriditem',

    config: {

        cls: 'browser-grid-item',
        dataMap: {
            getName: {
                setHtml: 'FILE_NAME'
            },
            getImage: {
                setSrc: 'IMG_URL'
            }
        },
        name: {
            cls: 'x-name'
        },
        image: {
            height:150,
            width: 150,
            flex:1
        },
        layout: {
            type: 'vbox',
            align: 'center'
        }
    },
    applyImage: function(config) {
        return Ext.factory(config, Ext.Img, this.getImage());
    },
    updateImage: function(newImage, oldImage) {
        if (newImage) {
            this.add(newImage);
        }

        if (oldImage) {
            this.remove(oldImage);
        }
    },
    applyName: function(config) {
        return Ext.factory(config, Ext.Component, this.getName());
    },
    updateName: function(newName, oldName) {
        if (newName) {
            this.add(newName);
        }

        if (oldName) {
            this.remove(oldName);
        }
    }
}); 
```

# javascript - Facebook 如何确定它是否是移动设备？

> ID：10883396
> 
> 赞同：1
> 
> 时间：2012-06-04T14:55:25.463
> 
> 标签：javascript, facebook-credits

在为外部站点实施 FB Pay 对话框时，我遇到了问题。

为了显示此对话框，我根据文档使用*FB.ui方法：*

[https://developers.facebook.com/docs/reference/dialogs/pay/](https://developers.facebook.com/docs/reference/dialogs/pay/)

但是 JS 生成的 Url 包含*display=popup*参数，该参数仅适用于移动设备。这不是我的情况：我需要付款才能在手机和台式机上工作。

因此，我决定对手机使用 JS *FB.ui*方法，对台式机使用简单的 GET Url。

以下是问题：

1) 这是正确的决定还是有更好的方法让 FB Pay 对话框在手机和台式机上都可以工作？

2）如果这是最好的方法，我怎样才能知道它是否是移动设备？在内部，在我们的站点中，我们只是使用移动用户代理列表进行猜测，但不一定是 FB 方式。那么，FB方式是什么？

# python - 无法编码/解码 pprint 输出

> ID：10883399
> 
> 赞同：17
> 
> 时间：2012-06-04T14:55:40.550
> 
> 标签：python, django, unicode, formatting

[这个问题是基于那个](https://stackoverflow.com/q/10881326/257972)的副作用。

我的`.py`文件在第一行都有`# -*- coding: utf-8 -*-`编码定义器，比如我的`api.py`

正如我在相关问题中提到的，我`HttpResponse`用来返回 api 文档。由于我通过以下方式定义编码：

```
HttpResponse(cy_content, content_type='text/plain; charset=utf-8') 
```

一切正常，当我调用我的 API 服务时，除了*pprint 从字典中形成的字符串之外，没有任何编码问题*

由于我在我的 dict 中的某些值中使用土耳其语字符，因此 pprint 将它们转换为`unichr`等价物，例如：

```
API_STATUS = {
    1: 'müşteri',
    2: 'some other status message'
}

my_str = 'Here is the documentation part that contains Turkish chars like işüğçö'
my_str += pprint.pformat(API_STATUS, indent=4, width=1)
return HttpRespopnse(my_str, content_type='text/plain; charset=utf-8') 
```

我的纯文本输出如下：

```
Here is the documentation part that contains Turkish chars like işüğçö

{
    1: 'm\xc3\xbc\xc5\x9fteri',
    2: 'some other status message'
} 
```

我尝试将 pprint 输出解码或编码为不同的编码，但没有成功......克服这个问题的最佳实践是什么

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-04T15:28:41.173

`pprint`默认情况下似乎使用`repr`，您可以通过覆盖来解决此问题[`PrettyPrinter.format`](http://docs.python.org/library/pprint.html#pprint.PrettyPrinter.format)：

```
# coding=utf8

import pprint

class MyPrettyPrinter(pprint.PrettyPrinter):
    def format(self, object, context, maxlevels, level):
        if isinstance(object, unicode):
            return (object.encode('utf8'), True, False)
        return pprint.PrettyPrinter.format(self, object, context, maxlevels, level)

d = {'foo': u'işüğçö'}

pprint.pprint(d)              # {'foo': u'i\u015f\xfc\u011f\xe7\xf6'}
MyPrettyPrinter().pprint(d)   # {'foo': işüğçö} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:17:58.660

您应该使用 unicode 字符串而不是 8 位字符串：

```
API_STATUS = {
    1: u'müşteri',
    2: u'some other status message'
}

my_str = u'Here is the documentation part that contains Turkish chars like işüğçö'
my_str += pprint.pformat(API_STATUS, indent=4, width=1) 
```

该`pprint`模块旨在以可读的方式打印出所有可能的嵌套结构。为此，它将打印对象表示，而不是将其转换为字符串，因此无论您是否使用 unicode 字符串，您都会得到转义语法。但是，如果您在文档中使用 unicode，那么您真的应该使用 unicode 文字！

无论如何，[thg435 已经为您提供了](https://stackoverflow.com/a/10883893/1350899)如何更改 pformat 的这种行为的解决方案。

# asp.net-mvc-3 - 将单选按钮绑定到 MVC3 中的单个模型预操作

> ID：10883400
> 
> 赞同：0
> 
> 时间：2012-06-04T14:55:45.167
> 
> 标签：asp.net-mvc-3, radiobuttonfor

如何使用 MVC 将 2 个单选按钮绑定到单个模型属性`@Html.RadioButtonFor()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:20:45.977

In your model:

```
public class MyModel
{
    public bool? DoYouAgree { get; set; }
} 
```

In your view:

```
<label>
    @Html.RadioButtonFor(m => m.DoYouAgree, false, 
        new { id = "DoYouAgree_false" })
    No
</label>
<label>
    @Html.RadioButtonFor(m => m.DoYouAgree, true, 
        new { id = "DoYouAgree_true" })
    Yes
</label> 
```

# css - DIV 不会针对小于 420 像素的宽度调整大小

> ID：10883401
> 
> 赞同：0
> 
> 时间：2012-06-04T14:55:46.290
> 
> 标签：css, html, browser, resize

我的自动调整大小功能有点问题！我已经熟练地三重检查（使用搜索工具）我的所有宽度设置都设置为 %。整个网站没有固定宽度的东西。（嗯，事实上是的，但不超过 100 像素，在这种情况下，每行不超过一个）。

但是，如果我将浏览器窗口的宽度调整为小于 420 像素，我的正文（html-body，当然是：P）的宽度将停止 420 像素，并且出现众所周知的 h-scrollbar。

有任何想法吗？是否有某种默认最小宽度？我尝试过设置较小主体的最小宽度，但没有结果。

以防万一有帮助：该网站由一个索引（在 html 中）、两组三个 jQuery 脚本和一个 CSS 文件组成，它们在站点加载时交替写入项目（一个用于桌面浏览器，一个用于移动）。我已经尝试过单独构建站点，但没有更好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:58:41.027

我想我解决了 Firefox 的问题。我认为 FF 允许将网站缩小到最小宽度，这需要带有网站地址、搜索器、书签等的工具栏。我正在测试 CSS 技巧，如果涉及到手机，这是一个很棒的网站 :)

在 280 像素宽度的第一个屏幕上，工具栏会随着网站停止收缩。有时我还有 Firebug 图标或 Fireftp 图标，这使我的网站更早停止收缩。

![在此处输入图像描述](../Images/fc950f290974a094678200b09f3d0c2d.png)

但是右键单击工具栏和未选中的工具栏菜单。菜单应该隐藏并且网站在调整大小时仍然会缩小。这是 Firefox 和 Chrome，您可以看到它们在最小宽度方面非常相似。

![在此处输入图像描述](../Images/594ea314fe64b3639334abb754075b89.png)

如果有人注意到这个灵魂是错误的并且不起作用，请给我反馈:)

# php - 在 UTF8 单词之间插入空格 - 我的 2 个简单正则表达式有什么问题？

> ID：10883402
> 
> 赞同：2
> 
> 时间：2012-06-04T14:55:50.033
> 
> 标签：php, regex, preg-replace, preg-match

我有[一个网页](http://preferans.de/user.php?id=DE8050)，用户可以在其中以俄语 (UTF-8) 发表评论，如下所示：

```
Хорошо, четко , уверено!Удачи!(БОРИС) 
```

一些用户为了好玩而“滥用”它，省略了单词之间的空格

```
НеСпитьсяЖукуНиЗимою,НиЛетом,лучшеПитатьсяСолнечнымСветом, лучшеСидетьЗаИгорнымСтолом,иНаслаждатьсяКаждымВистом, лучшеНоситьЗолотыеОдежды,искритьсяВсегда,неТеряяНадежды,лучшеПустьДругОстаетсяБезВзятки,ведьНевозможноЖукуЖитьБезЛапки! 
```

这导致非常宽的 HTML 表格行，破坏了我的布局。

我试图通过尝试查找包含超过 60 个非空格字符的评论并在标点符号（如逗号）之后插入一个空格字符来对抗这些用户 - 使用这段 PHP 代码：

```
 if (preg_match('/\S{60,}/u', $about) == 1) {
                    error_log('Splitting comment: ' . $about);
                    $about = preg_replace('/(\p{P}+\s*)/u', '$1 ', $about);
                    error_log('===Result comment: ' . $about);
            } 
```

然而这不起作用并且至少有2个问题

1.  每个评论都被匹配，即使是顶部的简短评论
2.  \s* 不是贪心的，“逗号和空格”被“逗号空格”替换，原因很奇怪

这是我的日志文件的摘录：

```
[04-Jun-2012 09:50:10] Splitting comment: Хорошо, четко , уверено!Удачи!(БОРИС)
[04-Jun-2012 09:50:10] ===Result comment: Хорошо,  четко ,  уверено! Удачи!( БОРИС)

[04-Jun-2012 09:50:10] Splitting comment: НеСпитьсяЖукуНиЗимою,НиЛетом,лучшеПитатьсяСолнечнымСветом,
лучшеСидетьЗаИгорнымСтолом,иНаслаждатьсяКаждымВистом, лучшеНоситьЗолотыеОдежды,искритьсяВсегда,неТеряяНадежды,лучшеПустьДругОстаетсяБезВзятки,ведьНевозможноЖукуЖитьБезЛапки!(nusja)
[04-Jun-2012 09:50:10] ===Result comment: НеСпитьсяЖукуНиЗимою, НиЛетом, лучшеПитатьсяСолнечнымСветом,
 лучшеСидетьЗаИгорнымСтолом, иНаслаждатьсяКаждымВистом,  лучшеНоситьЗолотыеОдежды, искритьсяВсегда, неТеряяНадежды, лучшеПустьДругОстаетсяБезВзятки, ведьНевозможноЖукуЖитьБезЛапки!( nusja) 
```

我尝试将反斜杠加倍 - 这并没有改变任何东西。

我正在使用带有最新 CentOS Linux 5.x 和 6.x 的股票 PHP：

```
# php -v
PHP 5.3.3 (cli) (built: May  7 2012 17:58:11)
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:03:10.943

试试[`wordwrap()`](http://php.net/manual/en/function.wordwrap.php)。这是一个内置函数，我认为它应该对您有所帮助。

如果您正在寻找 reg-exp 解决方案，评论中有一个 -[看这里](http://www.php.net/manual/en/function.wordwrap.php#107570)。它是 UTF-8 安全的，因此它应该适用于您的俄罗斯网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:12:54.660

您可以将注释放在 span 或 div 元素中。

```
<td><span class="comment">лучшеПитатьсяСолнечнымСветом</span></td> 
```

并将以下定义放入您的 css 文件中：

```
span.comment
{
    max-width: 300px;
    overflow: hidden;
} 
```

这将简单地隐藏任何比您预期更大的东西。

# c# - C# Datagridview SelectionChanged 事件比我想要的更早触发

> ID：10883405
> 
> 赞同：1
> 
> 时间：2012-06-04T14:55:52.947
> 
> 标签：c#, events, datagridview, selectionchanged

我正在使用 Windows 窗体。我希望当用户在 datagridview 中选择单元格（或一个单元格）时触发一个事件。只要我选择一个单元格，SelectionChanged 事件就会触发。有没有办法让它等待用户完成选择？

我已经尝试过 CellMouseUp 事件，但我不喜欢它的行为，因为如果 MouseUp 发生在网格之外，它不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:51:00.687

当他们选择每个单元格时，应该触发一个新的选择更改。因此，您正在查看每次触发事件处理程序时“记住”选定的单元格，然后基于此进行处理。这将是多么痛苦取决于您对选择进行的处理。可能是一笔不错的交易。

# android - 搜索小部件中的自定义建议 (Android ICS)

> ID：10883408
> 
> 赞同：5
> 
> 时间：2012-06-04T14:55:58.280
> 
> 标签：android, search, android-4.0-ice-cream-sandwich, android-actionbar

我的 ICS 应用程序中有一个带有搜索小部件的操作栏。我希望用户可以搜索应用程序附带的一些东西。因此，我想使用搜索小部件，显示一个结果列表，当用户输入新字符时会更新自身（与 Play 商店相同的功能）。我已经`SearchView.OnQueryTextListener`在我的活动中实现并实现了两种方法`onQueryTextChange(String newText)`和`onQueryTextSubmit(String query)`. 在`onQueryTextChange`我调用我的服务时，它会返回输入建议的值。但我没有计划，如何显示建议列表。我阅读了[developer.android.com](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)上的文章，但据我了解，它主要是针对旧的搜索实现（< Honeycomb）。在 Search Widget API 示例中，建议是安装在系统上的应用程序，由`SearchManager`. 我还没有找到涵盖该主题的教程或示例（搜索小部件中的自定义建议），有人知道这样的事情吗？

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.search_menu, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);

        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();    

        searchView.setOnQueryTextListener(this);
        return super.onCreateOptionsMenu(menu);
    }

@Override
    public boolean onQueryTextChange(String newText) {
        Log.i(TAG, "Query = " + newText);

      if(newText.length() > 0){
          //my suggestion service, returning an arraylist!
      }

        return false;
    } 
```

我读到，我需要`ContentProvider`扩展 from `SearchRecentSuggestionsProvider`，但我不知道如何处理和创建此提供程序。我有一个`searchable.xml`关于`searchSuggestAuthority`我的空白内容提供者的内容。在 AnroidManifest 中，我向 MainActivity 添加了一个 Search Intent，添加了元数据并添加了我的提供程序。但我不知道如何将我的值提供给内容提供者并将这些值显示为建议。

```
public class SuggentionsProvider extends SearchRecentSuggestionsProvider {
    public final static String AUTHORITY = "com.sap.hui.helper.SuggentionsProvider";
    public final static int MODE = DATABASE_MODE_QUERIES;

    public SuggentionsProvider(){
        setupSuggestions(AUTHORITY, MODE);
    }
} 
```

BR,

迈贝克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:40:05.490

我相信这些是你需要的。

教程：

[http://developer.android.com/guide/topics/search/adding-custom-suggestions.html](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)

这个例子：

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

# logging - 詹金斯：777文件的权限被拒绝

> ID：10883409
> 
> 赞同：6
> 
> 时间：2012-06-04T14:56:00.587
> 
> 标签：logging, jenkins, file-permissions, tee

我创建了一个 Jenkins 版本来编译和分发一些模块。构建命令（例如，`make`或`ant`）的输出被重定向到一个名为`build.log`.

有趣的是，重定向`echo`到同一个文件，使用`tee`，失败：

```
tee: ../../build.log: Permission denied 
```

该文件存在并具有 777 权限（用 选中`ls -ltrh ../..`）。任何想法这篇文章有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T15:17:26.443

文件的权限很重要，但该文件的超级目录的权限也很重要。

如果您对正在遍历的目录没有读取和执行权限，则无法遵循文件的相对路径。如果您缺乏对“build.log”所在目录的读取权限，则无法列出该目录中的文件。读、写和执行权限对目录很重要，它们大致映射到：

*   读取 = 允许列出文件
*   写入 = 允许创建/删除/修改文件
*   执行 = 允许将目录更改为该目录

# iphone - 如何将捏合限制为默认视图大小

> ID：10883420
> 
> 赞同：1
> 
> 时间：2012-06-04T14:56:36.807
> 
> 标签：iphone, uipinchgesturerecognizer

我正在开发基于 pdf 的应用程序，我正在尝试实现 UIPinchGestureRecognizer。当用户达到 640,960 的默认视图大小时，我想限制夹断功能。

在我当前的实现中，用户能够无限地捏入/捏出。

```
- (void)pinchZoom:(UIPinchGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

        if (!zoomActive) {
            zoomActive = YES;

            UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panMove:)];
            [panGesture setMaximumNumberOfTouches:2];
            [panGesture setDelegate:self];
            [self addGestureRecognizer:panGesture];
            [panGesture release];

        }

        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);

        [delegate leavesView:self zoomingCurrentView:[gestureRecognizer scale]];            

        [gestureRecognizer setScale:1];

    }
}  

    // This method will handle the PAN / MOVE gesture 
- (void)panMove:(UIPanGestureRecognizer *)gestureRecognizer    
{
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {  
        CGPoint translation = [gestureRecognizer translationInView:[[gestureRecognizer view] superview]];  
        [[gestureRecognizer view] setCenter:CGPointMake([[gestureRecognizer view] center].x + translation.x, [[gestureRecognizer view] center].y + translation.y)];  
        [gestureRecognizer setTranslation:CGPointZero inView:[[gestureRecognizer view] superview]];   
    }  
} 
```

这是我正在谈论的默认视图大小/比例：![默认pdf](../Images/a54b6b725e6e712509c15a4029c70546.png)

这是我不想要的或者我想限制的：
![无限捏出](../Images/c635cf90576e4682fd89625f0a0aff09.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:06:44.333

在处理程序函数中处理自己的下限怎么样？像这样的东西：

```
- (void)pinchZoom:(UIPinchGestureRecognizer *)gestureRecognizer {

     ....

    if ( [gestureRecognizer scale] > MIN_SCALE )
        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:08:06.253

在您的手势识别器中，您将必须测试和了解 PDF 视图的当前比例/大小，并且在您占据全屏时不要缩小。

# google-chrome - 将 Chrome 作为 Windows Shell 运行会破坏一些 CSS 属性

> ID：10883424
> 
> 赞同：1
> 
> 时间：2012-06-04T14:56:51.953
> 
> 标签：google-chrome, windows-shell

我们通过在注册表中设置 Google Chrome 以作为 Windows shell 运行： HKCU\Software\Microsoft\Windows NT\CurrentVersion\Winlogon Shell = [chrome path]

以这种方式运行时，一些 CSS 属性会破坏页面。这会呈现一个空白的白页：

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
* {
    -webkit-perspective: 1000; 
    -webkit-backface-visibility: hidden; 
}
</style>
</head>
<body>
Hello, World
</body>
</html> 
```

如果您启动 explorer.exe 并刷新页面，它就可以工作。一旦页面处于工作状态，您也可以杀死 explorer.exe，它会继续工作。

已经尝试使用 /AlternateShellStartup 执行 runonce.exe。

Windows 7 Professional 64 位上的 Chrome 版本 19.0.1084.52

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:59:16.847

尝试对 Chrome 使用以下命令行开关

```
--disable-accelerated-compositing 
```

我遇到了同样的问题（不完全是任务中的 CSS 属性，而是一些代码，包括 webkit-transform、webkit-animation 等）。该问题已通过禁用加速合成得到解决。当作为 Windows shell 运行时，它还可以播放 MP4 视频。

# csv - 如何在 Racket 中下载和解析 csv 文件？

> ID：10883426
> 
> 赞同：11
> 
> 时间：2012-06-04T14:56:54.370
> 
> 标签：csv, download, racket

如何在 Racket 中下载和解析 csv 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T14:56:54.777

用于[`get-pure-port`](http://docs.racket-lang.org/net/url.html?q=fetch#%28def._%28%28lib._net/url..rkt%29._get-pure-port%29%29)下载文件，并使用[Planet](http://planet.racket-lang.org/)库[`(require (planet neil/csv)`)](http://planet.racket-lang.org/package-source/neil/csv.plt/1/7/planet-docs/csv/index.html)对其进行解析。

以下示例下载并解析一个 csv 文件，该文件包含有关各种加拉帕戈斯群岛大小以及每个岛屿上发现的物种数量的数据。

```
#lang racket
(require (planet neil/csv:1:=7) net/url)

(define galapagos-url 
  (string->url
   "http://www.stat.washington.edu/~handcock/536/Data/galapagos.csv"))

(define make-galapagos-csv-reader
  (make-csv-reader-maker
   '((separator-chars              #\,)
     (strip-leading-whitespace?  . #t)
     (strip-trailing-whitespace? . #t))))

(define (all-rows url make-reader)
  (define next-row (make-reader (get-pure-port url)))
  (define (loop)
    (define row (next-row))
    (if (empty? row)
        '()
        (cons row (loop))))
  (loop))

(all-rows galapagos-url make-galapagos-csv-reader) 
```

返回的第一行是：

```
'(("Island"
   "Observed.species"
   "Native.species"
   "Area(km^2)"
   "Elevation(m)"
   "Distance.nearest.island(km)"
   "Distance.Santa.Cruz(km)"
   "Area.adj.island(km^2)")
  ("Baltra" "58" "23" "25.09" "" "0.6" "0.6" "1.84")
  ("Bartolome" "31" "21" "1.24" "109" "0.6" "26.3" "572.33")
  ("Caldwell" "3" "3" "0.21" "114" "2.8" "58.7" "0.78") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-08T22:39:39.167

Neil 有一个新的库，csv-reading，所以改用它。

**首先**，使用 raco 安装软件包：

```
raco pkg install csv-reading 
```

**要将 CSV 文件转换为 list**，这是一个辅助函数：

```
(require csv-reading)

(define (csvfile->list filename)
  (call-with-input-file filename
                        csv->list)) 
```

**要下载 CSV 文件并转换为列表**，请执行以下操作：

```
(require net/url)
((compose csv->list get-pure-port string->url) "http://example.com") 
```

有关 csv-reading 库，请参见此处：[csv-reading library](http://docs.racket-lang.org/csv-reading/index.html)，它是最新版本（其他答案正在使用已弃用的答案）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-29T01:13:33.177

这个答案让我找到了我想要去的地方，但我想我会为未来的勇敢探险家插话。有一个更简单的调用（也许使用更新版本的 csv 库？）来做你所要求的。这当然假设您想要逗号分隔符，并像上面的示例一样去除前导/尾随空格。

```
#lang racket
(require (planet neil/csv:2:0) net/url)

;; Continuing with the UW data sources examples
(define iver-url 
  (string->url
   "http://faculty.washington.edu/cadolph/vis/iver.csv"))

(csv->list (get-pure-port iver-url)) 
```

在这个版本中，csv->list 函数会自动创建一个具有上述默认值的 csv-reader。`make-csv-reader`您可以通过传递使用to构造的自定义 csv 阅读器来覆盖默认值（例如，如果您有不同的分隔符或不想去除尾随和前导空格）`csv->list`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-26T17:37:32.070

用于[`get-pure-port`](https://docs.racket-lang.org/net/url.html?q=fetch#%28def._%28%28lib._net/url..rkt%29._get-pure-port%29%29)下载文件，然后使用[`read-csv-file`](https://docs.racket-lang.org/teachpack/2htdpbatch-io.html?q=port-%3E#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-csv-file%29%29)（来自`2htdp/batch-io`Racket 中包含的库）解析数据。

**下载文件**

```
#lang racket
(require net/url)

;; Get the data.
(define the-url (string->url "http://www.example.com/data.csv"))
(define the-data (port->bytes (get-pure-port the-url)))

;; Write the data to a file.
(define outfile (open-output-file "data.csv"))
(write-bytes the-data outfile)
(close-output-port outfile) 
```

参考：[https ://www.monolune.com/how-to-download-files-using-racket/](https://www.monolune.com/how-to-download-files-using-racket/)

**警告**：默认情况下，当使用 HTTPS 时，Racket**不会**验证服务器的证书。[`get-pure-port`](https://docs.racket-lang.org/net/url.html?q=fetch#%28def._%28%28lib._net/url..rkt%29._get-pure-port%29%29)阅读有关如何在使用 HTTPS 时启用服务器证书验证的文档 ( )。

**解析数据**

```
#lang racket
(require 2htdp/batch-io)

(read-csv-file "data.csv")  ; Returns a list. 
```

# facebook - Facebook API 有时无法加载

> ID：10883429
> 
> 赞同：2
> 
> 时间：2012-06-04T14:57:05.990
> 
> 标签：facebook, facebook-graph-api

我在使用时遇到问题

```
 $facebook->api('/me','GET'); 
```

第一次加载页面时，什么也没有发生。我必须再次重新加载页面才能使脚本正常工作。不确定问题出在哪里。

```
require_once('src/facebook.php');

$app_id = "APP_ID";
$app_secret = "APP_SECRET";

// Init facebook api.
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true,
));

//Facebook Authentication part
$user_id = $facebook->getUser();
    $loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'publish_stream, user_likes'
        )
);

if (!$user_id) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
}

$user_profile = $facebook->api('/me','GET');
$user_gender = $user_profile['gender'];
    if($user_gender == 'male'){
        echo "you are male";
    } else {
        if ($user_gender == 'female'){
            echo "you are female";
        } else{
            echo "gender not specified";
        }
    } 
```

我尝试使用 $facebook->api('/me','GET'); 例如，输出并回显 $user_id，它可以工作。

# jquery - 如何为具有连续 ID 的元素组合函数

> ID：10883433
> 
> 赞同：1
> 
> 时间：2012-06-04T14:57:21.290
> 
> 标签：jquery

对不起，如果标题令人困惑，我想不出更好的东西。基本上，我想做的是直截了当。这是我的代码

```
jQUery('.button1').click(function() {
    jQuery(".box1").slideUp();
    jQuery(this).remove();
});
jQUery('.button2').click(function() {
    jQuery(".box2").slideUp();
    jQuery(this).remove();
});
jQUery('.button3').click(function() {
    jQuery(".box3").slideUp();
    jQuery(this).remove();
}); 
```

等等......现在当我有更多的盒子时，这几乎是一团糟。有什么办法可以将它们全部组合起来，让 jquery 做 ID 号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:00:41.070

您可以为按钮设置类名（例如`"buttons"`）并使用 ID：

```
<button id="button1" class="buttons">Delete</button> 
```

然后，您可以使用一些技巧从 ID 中获取数字：

```
$(".buttons").on("click", function() {
    var n = this.id.replace("button", "");
    $(".box" + n).slideUp();
    $(this).remove();
}); 
```

**演示：http:** [//jsfiddle.net/DXzKu/](http://jsfiddle.net/DXzKu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:02:00.847

以选择器开头的属性 ('^=) 将适用于您的 ID，如下所示：

```
$('[class^="button"]').click(function() {
  //do stuff
}); 
```

您可以从单击的元素中获取数字并显示/隐藏该框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:59:05.440

您可以将它们组合在一个选择器中：

```
jQUery('#button1, #button2, #button3')... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:59:13.783

```
for (var i=1; i<=3; i++) {
   $('.button'+i).click(function() {
      $(".box"+i).slideUp();
      $(this).remove();
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T15:02:03.243

尝试如下，

```
for (var i = 1; i <= 3; i++) {
   jQUery('.button'+i).click({ i: i }, function(e) {
     jQuery(".box"+ e.data.i).slideUp();
     jQuery(this).remove();
   });
} 
```

但是通过一些标记更改，我们可以做得更好。

# android - 使用 Tegra 优化 yuv420p 到 rgb565 的转换？

> ID：10883435
> 
> 赞同：0
> 
> 时间：2012-06-04T14:57:32.757
> 
> 标签：android, android-ndk, tegra

当我的 android 应用程序本机代码在 NEON 处理器上运行时，我正在利用快速 NEON 汇编程序指令将 yuv420p 转换为 rgrb565。

不过，Tegra 处理器有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:10:51.670

称为 NEON 的 ARM SIMD 指令集是大多数 Cortex-A8 和 Cortex-A9 处理器的标准功能。NVidia Tegra2 不包含 NEON，但 Tegra 3 包含。没有其他与多媒体相关的 ARM 标准指令集扩展。Marvel 在他们的 StrongARM 和 PXA 系列中添加了 MMX 变体，而英特尔拥有它们，但它们不再相关。

# html - HTML：为什么一个按钮元素总是出现在其他元素的下方？

> ID：10883437
> 
> 赞同：0
> 
> 时间：2012-06-04T14:57:43.160
> 
> 标签：html, button

我注意到 `<button>`HTML 中的元素总是看起来比其他元素略低，如下图所示。

![在此处输入图像描述](../Images/994c1bb2e3ed463486de26853b07d14f.png)

如您所见，“Go”按钮略低于与它位于同一行的 textarea 元素。代码如下...

```
<table width="100%">
            <tr>
                <th rowspan="2" align="left">
                    <img width="120px" height="60px" src="test-image.jpg" />
                </th>
                <th align="right">
                    User &nbsp;&nbsp;
                    <a href="">My Garage</a> &nbsp;|&nbsp;
                    <a href="">Account Settings</a>&nbsp;|&nbsp;
                    <a href="">Sign Out</a> &nbsp;|&nbsp;
                    <br/>
                    <textarea rows="1" id="search_text"></textarea><button>Go!</button>
                </th>
            </tr>
        </table> 
```

为什么会发生这种情况，最简单的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:02:19.553

尝试应用`vertical-align: text-bottom;`到您的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:03:27.207

您应该使用`input`标签，而不是`textarea`单行。试试这个代码：

```
<input type="text" id="search_text"><button>Go!</button>​​​​​​​​​​​​​​​​​​​​​​ 
```

# ios - UIGraphicsBeginImageContext 浪费？

> ID：10883438
> 
> 赞同：0
> 
> 时间：2012-06-04T14:57:50.073
> 
> 标签：ios, uiimage, cgcontextref

如果你想绘制一个 UIImage，它总是必须进入一个用 UIGraphicsBeginImageContext 创建的新 UIImage，这不是浪费吗？

如果需要频繁绘制，为什么不让我们绘制到预先存在的 UIImage 中呢？

或者有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:01:20.920

这是因为`UIImage`它是不可变的。如果你不断地渲染到一个新的`CGBitmapContext`，那么你在你的应用程序中做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:08:15.083

不，没有，但你可以有一个上下文，在你意识到它到图像之前不断更新它，这是一种不开始上下文并结束它，保持打开以供进一步绘图的方法

# php - Google Maps api v3 上的反向地理编码

> ID：10883440
> 
> 赞同：1
> 
> 时间：2012-06-04T14:57:50.127
> 
> 标签：php, google-maps-api-3, reverse-geocoding

我想知道是否有人可以帮助我。

我使用下面显示的代码正确绘制从谷歌地图上的 MySQL 数据库检索到的标记。

```
<script type="text/javascript">
             //Sample code written by August Li
             var icon = new google.maps.MarkerImage("images/location-marker-2.png")
             new google.maps.Point(16, 32);
             var center = null;
             var map = null;
             var bounds = new google.maps.LatLngBounds();
             function addMarker(lat, lng, info) {
             var pt = new google.maps.LatLng(lat, lng);
             bounds.extend(pt);
             var marker = new google.maps.Marker({
             position: pt,
             icon: icon,
             map: map
             });
             }
             function initMap() {
             map = new google.maps.Map(document.getElementById("gmaps-canvas"), {
             center: new google.maps.LatLng(0, 0),
             zoom: 6,
             scrollwheel: true,     
             draggable: true, 
             mapTypeId: google.maps.MapTypeId.SATELLITE
             });
                <?php

                        include("admin/link.php");
                        include("admin/opendb.php");

                        $query = mysql_query("SELECT * FROM `detectinglocations` WHERE `locationid` = '$lid'");
                        while ($row = mysql_fetch_array($query)){
                            $locationname=$row['locationname'];
                            $osgb36lat=$row['osgb36lat'];
                            $osgb36lon=$row['osgb36lon'];
                            echo ("addMarker($osgb36lat, $osgb36lon,'<b>$locationname</b><br/>');\n");
                        }
                             mysql_close($connect);
                 ?>

                         center = bounds.getCenter();
                         map.fitBounds(bounds);
                        }
</script> 
```

我现在要做的是添加更多功能，允许用户还可以单击地图绘制新标记，本质上使用数据库中预先存在的标记作为工作点，执行`reverse geocode`.

我已经研究了好几天了，我已经尝试实现了一大堆教程，但我似乎无法让这两个部分的功能都正常工作。

我确实知道要启用一个`on-click`事件，我需要合并以下内容：

`google.maps.event.addListener(map, 'click', function(event) { marker.setPosition(event.latLng) geocode_lookup( 'latLng', event.latLng ); }); }`

但我必须承认我有点不确定我还需要加入什么。

我只是想知道是否有人可以看看这个，如果有人能告诉我我哪里出错了，我将不胜感激。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:43:07.880

我写了一个单独的地图页面，只有点击反向地理编码功能

[http://jsfiddle.net/ZDQeM/](http://jsfiddle.net/ZDQeM/)

我认为地址详细信息令人困惑。结果是一个数组，具有不同的精确度，一个可能包括县，另一个是州，另一个是街道地址。通常我只使用结果[0]。详细信息在文档中：[https ://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResponses](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResponses)

如果您需要特定信息，获取它的可靠方法是遍历整个结果数组，直到找到您需要的信息（例如，包含 postal_code 的类型 []）。

```
 google.maps.event.addListener(map, 'click', function(event) {
      userMarker = new google.maps.Marker({
        map: map,
        position: event.latLng
      });

      geocoder.geocode({'latLng': event.latLng}, function(results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
          if (results[0]) {
            alert(results[0].formatted_address);
          }
          else {
            alert("No results");
          }
        }
        else {
          alert("Geocoding unsuccessful: Status " + status);
        }
      });
    }); 
```

你的代码在哪里？

```
<script type="text/javascript">
         //Sample code written by August Li
         var icon = new google.maps.MarkerImage("images/location-marker-2.png")
         new google.maps.Point(16, 32);
         var center = null;
         var map = null;
         var bounds = new google.maps.LatLngBounds();
         function addMarker(lat, lng, info) {
         var pt = new google.maps.LatLng(lat, lng);
         bounds.extend(pt);
         var marker = new google.maps.Marker({
         position: pt,
         icon: icon,
         map: map
         });
         }
         function initMap() {
         map = new google.maps.Map(document.getElementById("gmaps-canvas"), {
         center: new google.maps.LatLng(0, 0),
         zoom: 6,
         scrollwheel: true,     
         draggable: true, 
         mapTypeId: google.maps.MapTypeId.SATELLITE
         });
            <?php

                    include("admin/link.php");
                    include("admin/opendb.php");

                    $query = mysql_query("SELECT * FROM `detectinglocations` WHERE `locationid` = '$lid'");
                    while ($row = mysql_fetch_array($query)){
                        $locationname=$row['locationname'];
                        $osgb36lat=$row['osgb36lat'];
                        $osgb36lon=$row['osgb36lon'];
                        echo ("addMarker($osgb36lat, $osgb36lon,'<b>$locationname</b><br/>');\n");
                    }
                         mysql_close($connect);
             ?>

                     center = bounds.getCenter();
                     map.fitBounds(bounds);

                     var geocoder = new google.maps.Geocoder();

                     google.maps.event.addListener(map, 'click', function(event) {
                       var userMarker = new google.maps.Marker({
                         map: map,
                         position: event.latLng
                       });

                     geocoder.geocode({'latLng': event.latLng}, function(results, status) {
                       if(status == google.maps.GeocoderStatus.OK) {
                         if (results[0]) {
                           alert(results[0].formatted_address);
                         }
                         else {
                           alert("No results");
                         }
                       }
                       else {
                         alert("Geocoding unsuccessful: Status " + status);
                       }
                     });
                   });
                 }
</script> 
```

# javascript - 不同时区的时钟

> ID：10883441
> 
> 赞同：6
> 
> 时间：2012-06-04T14:57:52.450
> 
> 标签：javascript, jquery, timezone, clock

我正在尝试在一个网站上创建两个时钟，上面写着两次。一个来自伦敦，另一个来自纽约。

我已经能够在我的计算机上创建一个读取当前时间的时钟，但我不确定如何将时区放入其中。

我到目前为止的代码是：

```
<script type="text/javascript" language="javascript">

function renderTime() {
    var currentTime = new Date();
    var diem = "AM";
    var h = currentTime.getHours();
    var m = currentTime.getMinutes();
    var s = currentTime.getSeconds();

    if (h == 0) {
        h = 12
    } else if (h > 12) {
        h = h - 12;
        diem = "PM";
    }

    if (h < 10) {
        h = "0" + h;
    }

    if (m < 10) {
        m = "0" + m;
    }

    if (s < 10) {
        s = "0" + s;
    }

    var myClock = document.getElementById ("clockDisplay");
    myClock.textContent = h + ":" + m + ":" + s + " " + diem;

    setTimeout ('renderTime()', 1000);
}
renderTime();
</script> 
```

这将应用于我创建的 CSS 样式，因此我可以使用特定字体的时钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T20:17:35.453

要*正确*执行此操作，您将需要一个时区数据库，例如我在[此处](https://stackoverflow.com/a/15171030/634824)列出的数据库之一。

这个问题的所有其他答案都错误地认为“时区”和“时区偏移”是同一件事。他们不是。例如，伦敦的时区是`Europe/London`，它可以具有 +0 或 +1 偏移量，具体取决于它是一年中的什么时间。纽约的时区是`America/New_York`，根据与伦敦完全不同的一组日期，它可以具有 -5 或 -4 偏移量。

您可能想查看[moment-timezone](http://momentjs.com/timezone/)：

```
moment().tz("America/New_York").format() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:03:18.010

`currentTime.getTimezoneOffset()`将为您提供格林威治标准时间 (GMT) 与本地时间之间的时差，以分钟为单位。

您可以使用该值来计算所需时区的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:05:33.493

查看[http://www.datejs.com/](http://www.datejs.com/)它可以很好地处理日期和时区

如果您查看演示，请在文本框中输入`1 GMT`vs`1 MST`或`1 EST`，它会弹出一个适合您的日期/那个时区

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T15:08:19.327

您可以从日期中添加或减去小时数

```
currentTime.setHours(currentTime.getHours()+offset); 
```

其中 offset 是任意小时数。

我用该行和函数更新了 jsfiddle，以便它接受偏移量参数。这不是 UTC 偏移量，而是从系统时间添加多少小时。您可以通过以下方式获取当前的 UTC 偏移量`currentTime.getTimezoneOffset()/60`

[演示](http://jsfiddle.net/kqj2S/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:08:24.363

感谢大家的帮助。这一切都变得有点混乱，但我在这里找到了一个很好的例子，这就是我最终解决它的方式。查看示例 4：[http ://www.ajaxupdates.com/jclock-jquery-clock-plugin/](http://www.ajaxupdates.com/jclock-jquery-clock-plugin/)

希望对其他人有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-21T12:56:16.197

我在 m php 网站上使用以下内容：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"
<script type="text/javascript">
$(function() {
    getStatus();
});

function getStatus() {
<?php
echo "    var z = '".strftime("%Z",strtotime("now"))."';\n";
?>
    var d = new Date();
    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
    var offset = -8;
    if(z == "PDT") offset = -7;
    var currentTime = new Date(utc + (3600000*offset));
    var currentHours = currentTime.getHours ( );
    var currentMinutes = currentTime.getMinutes ( );
    currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
    var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";
    currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;
    currentHours = ( currentHours == 0 ) ? 12 : currentHours;
    var currentTimeString = currentHours + ":" + currentMinutes + ": " + timeOfDay + " " + z;

    $('td#clock').html(currentTimeString);
    setTimeout("getStatus()",5000);
}
</script> 
```

我在哪里使用桌子，所以这会填满

```
<table><tr><td id='clock'></td></tr></table> 
```

来自洛杉矶的时间（PDT 或 PST）但是我的服务器也在那个时间运行，因此从您的服务器传递 strftime 可能不会产生相同的效果。但如前所述，这是我在其他区域获得工作时间的决心。

# c# - 给定源代码，我们能找到我们需要的 .NET DLL 吗？

> ID：10883442
> 
> 赞同：3
> 
> 时间：2012-06-04T14:57:53.683
> 
> 标签：c#, codedom

假设我想编写一个程序，它需要一个 C# 源代码文件（只有一个 .CS 文件，并不复杂），我希望这个程序分析该源代码，结果告诉我我需要哪些 .NET DLL对于该源文件中使用的方法。这在技术上是否可行？

因此，例如，如果在该源文件中只有一个**Console.Writeline()**方法，我希望它能够告诉我需要**“mscorlib.DLL”**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:08:40.473

为了做到这一点，您基本上需要编写一个编译器。确定需要什么 DLL 的唯一方法是首先确定源文件中的标识符/名称绑定到什么。一旦确定了绑定的名称，您就可以了解哪些 DLL 是必需的（假设有一个 DLL 列表可供选择）。

理解名称绑定虽然需要你的程序理解......

*   C# 语法
*   名称绑定规则
*   重载解析规则

简而言之，您需要一个编译器:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:12:16.297

考虑以下示例：

```
using A;
static void Main(string[] args)
{
    Customer c = new Customer();
}

//AssemblyA.dll
namespace A { public class Customer { } }

//AssemblyB.dll
namespace A { public class Customer { } } 
```

在这种情况下，无法知道代码示例需要哪个程序集。理想情况下，您需要一个程序集列表与您的代码文件一起使用，以便您始终知道在哪里查找类型。

对于这个问题，一个容易出错的解决方案可能是采用第一个匹配命名空间/类型组合的程序集，查找代码文件中的所有类。但即使在这种情况下，你也不能确定你是否有正确的：

```
using A;
using B;
static void Main(string[] args)
{
    Customer c = new Customer();
}

//AssemblyA.dll
namespace A { public class Customer { } }
//AssemblyB.dll
namespace B { public class Customer { } } 
```

在解析这样的代码文件时，我总是会包含一个要引用的程序集列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T15:01:52.510

您可以查看所有`using`行以确定使用了哪些命名空间，然后您可以使用反射来确定哪些程序集实现了这些命名空间中的类型，但没有一对一的关系（甚至没有一对多的关系）命名空间和程序集之间的关系），因此，它充其量只能告诉您可能需要哪些程序集，而不仅仅是您肯定需要的程序集。即使要做到这一点，您也需要一个您可能想要考虑的每个可能程序集的列表，以便您知道要通过反射分析哪些程序集以查找名称空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T15:26:31.550

I don't know about CodeDOM, but the C# compiler (`csc.exe`) is smart enough to ignore assembly references that aren't needed, when it generates the final code.

So you can just enumerate assemblies (of the right architecture, please!) in the GAC, add all of them, and let the compiler sort it out.

# entity-framework - 如何使用实体框架进行身份验证

> ID：10883444
> 
> 赞同：0
> 
> 时间：2012-06-04T14:58:01.137
> 
> 标签：entity-framework, c#-4.0, wcf-data-services

我有一个包含表的实体框架模型

```
apsnet_Users
aspnet_Memberships 
```

我想检查 WCF 库中用户名和密码的验证如何实现

我应该添加会员资格`app.config`吗，如何实现这样的目标？

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:44:30.090

一个基本的（但安全的）用户名/密码数据库应该有这样的列：

```
UserName     - Text
PasswordSalt - Binary
PasswordHash - Binary 
```

用户名可以存储为纯文本。

盐是一个随机的字节串，最好至少和散列一样长。

密码哈希是密码+盐的二进制哈希。

以下是为用户提供新密码时的基本过程。我将使用 SHA-256 哈希作为示例。

1.  将所需的密码转换为字节数组。
2.  使用 CSPRNG 生成另一个 32 字节长的字节数组。这是盐。
3.  将盐添加到密码字节数组的末尾。
4.  使用 SHA-256 对密码进行哈希处理。
5.  将盐存储在数据库中。
6.  将密码哈希存储在数据库中。

然后当用户在登录时输入密码时，这就是过程。

1.  在数据库中查找用户。
2.  将输入的密码转换为字节数组。
3.  将数据库中的盐添加到密码字节数组的末尾。
4.  使用 SHA-256 对密码进行哈希处理。
5.  如果哈希与数据库中的哈希匹配，则密码正确。

这种密码验证方法是高安全性应用程序的首选方法。它并不慢，也不是很难实现。最好的事情是，您可以将整个密码表提供给您喜欢的任何人，他们最多只能选择一个用户并开始猜测密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:30:25.213

我没有使用实体框架和其他验证算法，所以我直接使用了 SQL 成员资格，Microsaoft 加密方式很难检索

# .net - Windows 和 Web 应用程序与 DB 的最佳策略

> ID：10883447
> 
> 赞同：0
> 
> 时间：2012-06-04T14:58:10.390
> 
> 标签：.net, sql-server

这是情况。我为客户开发了一个 WinForm 应用程序。我们使用了安装在本地域的一台服务器上的 SQL Server 数据库。到目前为止，一切正常。现在，客户想要为应用程序的一部分添加基于 Web 的应用程序，并且他们希望可以通过平板设备从 Internet 访问该部分。远程用户和本地用户都需要同时看到相同的数据。我们现在面临着连接到本地 SQL Server 的挑战。

如果请求只能远程使用应用程序，那么简单的 VPN 连接就可以解决问题。但由于远程员工只使用平板设备，看起来我们只能选择构建受限的公共 Web 应用程序。我很想知道数据访问部分的最佳方法是什么？我在考虑以下问题：

*   使用 SQL Azure 并将本地数据库移动到 SQL Azure 数据库。这样，Winform 和 Web 应用程序可以连接到同一个数据库。不太确定客户是否愿意接受他的数据库将在远程 Microsoft 服务器上......！
*   另一种选择可能是将本地 SQL Server 打开到 Internet 并允许远程连接。对我来说，这是我基于安全问题考虑的最后一个选项。
*   另一种选择可能是让 SQL Server 本地数据库和用于 Web 应用程序的 SQL Azure，并在两个服务器之间同步所需的数据

我真的很想知道你们在那种环境下会提出什么建议。我们需要保留 Winform 应用程序，并且我们需要能够通过平板设备访问数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:03:40.047

为什么你不创建一个暴露所需功能的网络服务层？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:00:52.573

我建议您开发一个 ASP.NET Web 应用程序，将其托管在本地服务器上并允许它连接到 SQL 数据库。

您需要配置您的路由器/防火墙以将 http 流量定向到此服务器。

如果可以为您的客户端提供域登录，则可以使用集成安全保护登录，或者使用 ASP.NET 表单身份验证。

为了轻松开发与平板电脑/手机等兼容的漂亮应用程序，我建议使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T22:33:52.637

我同意 Paul Grimshaw 的回答。

但是，如果您想创建特定于平板电脑（iOS、Android 等）的应用程序。您可以创建一个可以访问 SQL 数据库的 WCF 服务，该服务托管在客户端站点的服务器上。然后将 WCF 服务暴露给 Web，并通过 WCF 服务获取所需的数据。

您很可能可以为该服务重用大量当前的 WinForm 应用程序代码。在这种情况下，您将创建一个 WinForm 并自托管一个具有 HttpBinding 的 WCF 服务。

# c# - 限制从 Linq 列表中返回的结果数

> ID：10883451
> 
> 赞同：81
> 
> 时间：2012-06-04T14:58:39.033
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我正在使用 Linq/EF4.1 从数据库中提取一些结果，并希望将结果限制为 (X) 最近的结果。其中 X 是用户设置的数字。

有没有办法做到这一点？

我目前将它们传回，`List`好像这将有助于限制结果集。虽然我可以通过循环来限制这一点，直到我点击 X 我只是假设不传递额外的数据。

以防万一它是相关的...从 SQL Server 数据库运行的 C# MVC3 项目。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-06-04T15:00:56.497

使用`Take`功能

```
int numberOfrecords=10; // read from user
listOfItems.OrderByDescending(x => x.CreatedDate).Take(numberOfrecords) 
```

假设`listOfItems`是您的实体对象的列表，并且`CreatedDate`是一个具有创建日期值的字段（此处用于按降序进行排序以获取最近的项目）。

> Take() 函数从序列的开头返回指定数量的连续元素。

[http://msdn.microsoft.com/en-us/library/bb503062.aspx](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-06-04T15:00:59.463

```
results = results.OrderByDescending(x=>x.Date).Take(10); 
```

将按您的`OrderByDescending(...)`日期/时间属性（或您想要用于获取最新的 w/e 逻辑）对项目进行排序，`Take(...)`并将限制为前 x 个项目（首先是最新的，这要归功于排序）。

**编辑：**要返回一些不是从第一行开始的行，请使用`Skip()`：

```
results = results.OrderByDescending(x=>x.Date).Skip(50).Take(10); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-04T15:01:08.027

`Take()`在转换为列表之前使用,。这样 EF 可以优化它创建的查询并只返回您需要的数据。

# asp.net - Asp.net 电子邮件控制

> ID：10883456
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:59:01.427
> 
> 标签：asp.net, email, gmail

我正处于构建 Asp.net 电子邮件控件的开始阶段。我是 asp 的忠实粉丝，因为开发人员可以将控件放到页面上，并且所有功能都捆绑在其中。因此，我的目标是开发一个将发送/接收封装到单个服务器控件中的 EmailControl。

如果有人对此主题有一些提示或技术参考，我将不胜感激。对于所有想知道的人，我正在做自己的研究，但你们中的一些人可能还有一些我可以查看的其他网站。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:00:55.777

要让用户发送，您只需要基本的表单元素和下面页面上的代码即可发送邮件。

[使用 System.Net.Mail 发送电子邮件](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx)

.NET 没有任何本机 POP3/IMAP 支持，但有许多可用的库，例如：

[.NET POP3 MIME 客户端](http://www.codeproject.com/Articles/21377/NET-POP3-MIME-Client)

（这个答案假设“发送/接收”您指的是实现邮件客户端而不是邮件服务器。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:08:33.417

请注意，Aspnet 将被 Aspnet MVC 取代，这些“拖放”控件不再存在。

# android - 为 Android 应用使用不同的 SD 卡

> ID：10883460
> 
> 赞同：0
> 
> 时间：2012-06-04T14:59:22.910
> 
> 标签：android, android-sdcard

我正在构建一个应用程序，我可能需要从两个或多个不同的 SD 卡中读取内容。我将在设备上安装应用程序，但在不同的卡片上显示内容。用户必须插入不同的卡才能看到一些内容，而另一张卡才能看到另一个。我如何为此编码？SD卡有标识符吗？我不能只说从外部存储读取或执行 /mnt/sdcard，因为即使它可以工作，我也不知道我正在从哪张卡读取。ON 一个相关的话题是这是一种很好的设计方式，还是将不同的应用程序放在不同的卡片上更好，这样卡片就可以独立完成？

这里的主要理由是我有一个版本的应用程序的大量数据。假设我有 32 GB 的数据，我有一个 16 GB 的 SD 卡设备。我需要两张 sd 卡来购买单个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:19:10.490

同意@Rajesh，你能告诉我们更多关于为什么你想要它在单独的 SD 卡上吗？

而且我认为本杰明也是对的，你必须这样做的唯一方法是自己实施和执行它，通过放置一个特定的（唯一的）文件，你可以检查每张卡

# powershell - PowerShell-将文件添加到 .zip 存档，需要保留目录结构

> ID：10883461
> 
> 赞同：4
> 
> 时间：2012-06-04T14:59:36.110
> 
> 标签：powershell, zip

我正在使用以下函数将文件添加到工作正常的 .zip 存档中，但我需要能够包含某些文件的父目录。有任何想法吗？

```
function Add-ZipFile
{
    param([string]$zipfilename,
    [string]$filter)

    if(-not (test-path($zipfilename)))
    {
    set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
    (dir $zipfilename).IsReadOnly = $false  
    }

    $shellApplication = new-object -com shell.application
    $zipPackage = $shellApplication.NameSpace($zipfilename)
    $files = get-childitem -Filter "$filter" -recurse
    foreach($file in $files) 
     { 
        $zipPackage.CopyHere($file.FullName)
        Start-sleep -milliseconds 500
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:05:18.270

根据我的知识，您不能使用`shell.application`和保存其文件夹结构将一个特定文件添加到 zip 文件中。你有两个选择：

1.  像脚本一样在平面结构中添加单个文件
2.  添加一个文件夹及其所有内容（这将使用添加为父文件夹的文件夹保存结构文件夹）：

```
$Directory = Get-Item .

$ParentDirectory = Get-Item ..

$ZipFileName = $ParentDirectory.FullName  + $Directory.Name + ".zip"

if (test-path $ZipFileName) {

    echo "Zip file already exists at $ZipFileName"

    return

}

set-content $ZipFileName ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))

(dir $ZipFileName).IsReadOnly = $false

$ZipFile = (new-object -com shell.application).NameSpace($ZipFileName)

$ZipFile.CopyHere($Directory.FullName) 
```

正如我对您的问题的评论一样，我建议使用更安全的方式以编程方式创建 zip 文件，就像 DotNetZip (IMO) 那样。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-02T19:19:28.147

最终使用 CSharpZipLib。像我希望的那样工作。

感谢大家。

# wcf - 如何托管和连接到 net.tcp 服务

> ID：10883465
> 
> 赞同：0
> 
> 时间：2012-06-04T14:59:46.047
> 
> 标签：wcf, wcf-binding, net.tcp, self-hosting

我需要从头开始编写带有 net.tcp 绑定的 WCF 服务，在 IIS7 上自托管，并从控制台应用程序调用它。您能给我一份关于服务和示例客户端应用程序的分步指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:09:23.147

这个来自微软的小[指南怎么样？](http://msdn.microsoft.com/en-us/library/ff647180.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:07:52.040

请参阅以下指南和教程：

[http://msdn.microsoft.com/en-us/library/ms731758.aspx](http://msdn.microsoft.com/en-us/library/ms731758.aspx)

[http://www.youtube.com/watch?v=FPrQPA9QmUw](http://www.youtube.com/watch?v=FPrQPA9QmUw)

# c - 不从 C 中的结构打印字符串

> ID：10883470
> 
> 赞同：3
> 
> 时间：2012-06-04T15:00:25.023
> 
> 标签：c, string, pointers, struct

从 C 中的结构中打印字符串有问题...

```
typedef struct box{
    char *REF_OR_SYS; int num, x, y, w, h, o;
}BOX;

sscanf(str, "%s %d %d %d %d %d %d", &label, &refNum, &x, &y, &w, &h, &o);
BOX detect = {label, refNum, x, y, w, h, o};
printf("\nLABEL IS %s\n", detect.REF_OR_SYS); //Prints out the String correctly
                                              //(Either the word REF or SYS)
return detect; 
```

当这个结构被传递给另一个结构时，除了字符串之外的所有内容都会正确显示。

```
void printBox(BOX detect){
printf("Type: %s    Ref: %d    X: %d    Y: %d    W: %d    H: %d    O:%d\n", 
 detect.REF_OR_SYS, detect.num, detect.x, 
 detect.y, detect.w, detect.h, detect.o); 
```

}

我错过了一些简单的东西吗？REF_OR_SYS 始终打印为 ??_?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T15:05:01.483

使用`strdup()`（通常可用，如果不使用`malloc()`）复制由 读入的`label`字符串`sscanf()`：

```
detect.REF_OR_SYS = strdup(label); 
```

当该函数返回时`label`超出范围`REF_OR_SYS`并将成为悬空指针。`free()`不再需要时记住它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:02:59.750

假设`label`是一个本地字符数组，您将返回一个指向函数本地存储的指针，该指针在函数退出时变为无效指针。

你可能需要

```
char REF_OR_SYS[32]; 
```

或者使用`malloc()`（或者`strdup()`如果你有它）动态分配字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:04:52.563

尝试定义一个数组

```
typedef struct box{
    char REF_OR_SYS[20]; int num, x, y, w, h, o;
}BOX; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T15:07:23.307

```
typedef struct box{
    char REF_OR_SYS[N]; int num, x, y, w, h, o;
} BOX; 
```

其中 N 是所需的长度（一个常数）和

```
strcpy(detect.REF_OR_SYS, label); 
```

# java - HttpEntity 内容已被消费

> ID：10883471
> 
> 赞同：0
> 
> 时间：2012-06-04T15:00:34.330
> 
> 标签：java, entity

我搜索了这个错误，发现它通常发生在您尝试 GetContent 两次或更多次时，但问题是，我不是，我有两种几乎相同的方法，一种有效，另一种无效。

方法 ParseHor() - 不起作用

```
public ArrayList<Hor> ParseHor() throws Exception{
    ArrayList<Horario> listHorario = new ArrayList<Horario>();

    HttpGet get = new HttpGet(
            URL1);
    HttpResponse response = httpClient.execute(get);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent(); // Create an InputStream with the

    BufferedReader reader = new BufferedReader(new InputStreamReader(is,
            "iso-8859-1"));

    StringBuilder sb = new StringBuilder();
                ...
    } 
```

ParseGrades() - 作品

```
public ArrayList<Grade> ParseGrades() throws Exception {

    HttpGet get = new HttpGet(
            URL2);
    HttpResponse response = httpClient.execute(get);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent(); // Create an InputStream with the

    BufferedReader reader = new BufferedReader(new InputStreamReader(is,
            "iso-8859-1"));

    StringBuilder sb = new StringBuilder();
                ...
       } 
```

我试图只调用 ParseHor()，但是当它进入 InputStream 行时，异常会随着 IllegalState 上升 - 内容已经消耗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:09:42.363

找到它，问题是变量的名称是相同的，我改变了它并工作了。

# mysql - mysql语句不起作用

> ID：10883473
> 
> 赞同：0
> 
> 时间：2012-06-04T15:00:46.287
> 
> 标签：mysql

我正在尝试创建一个安全的会话管理，其中每个用户都会获得一个哈希，如果用户在其他地方登录，那么它会检查用户是否拥有最近登录的哈希。这样，如果用户忘记登出，系统会替他们登出帐户。这是我写的 sql 语句，它给了我这个错误。有人能告诉我为什么吗？

谢谢

```
"SELECT * FROM 'v_pos_user_session WHERE userID='$userID' AND hash='$hash' AND admin='0' time=(SELECT max(time) FROM v_pos_user_session WHERE userID='$userID' AND admin='0')"

QLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'time=(SELECT max(time) FROM v_pos_user_session WHERE userID='6' AND admin='0')' at line 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T15:03:17.067

你必须`time`用反引号逃脱而你忘记了`and`

```
SELECT * FROM v_pos_user_session 
WHERE userID='$userID' 
AND hash='$hash' 
AND admin='0' 
and `time`=(SELECT max(time) FROM v_pos_user_session 
            WHERE userID='$userID' AND admin='0') 
```

`'`而你之前留下了一个不必要的东西`v_pos_user_session`

# c# - 使用 webform 输入的字段和属性生成的 XML

> ID：10883474
> 
> 赞同：0
> 
> 时间：2012-06-04T15:00:51.677
> 
> 标签：c#, xml

我有以下问题！我需要在 asp.net 中生成一个 Xml 文档。为此，我需要输入以下信息： - 标签数量。- 每个标签的名称（例如：、、、等）。- 每个标签的属性（例如：Alex...等）..

我已经有了这个函数，它接收到一个带有 xml 标签名称的列表**（TAGLIST） 。**

```
public  void functionxml()
{
    string RutaSave             = string.Format(@"C:\xml.xml");
    var Serializer              = new XmlSerializer(typeof(List<string>));
    TextWriter textWriter       = new StreamWriter(RutaSave);
    Serializer.Serialize(textWriter, TagsList);
} 
```

但是这个函数生成的xml看起来是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
<dictionary>
  <item>
    <key>
      <string>CAMPO1</string>
    </key>
    <value>
      <anyType xmlns:q1="http://www.w3.org/2001/XMLSchema" d4p1:type="q1:string" xmlns:d4p1="http://www.w3.org/2001/XMLSchema-instance">test</anyType>
    </value>
  </item>
  <item>
    <key>
      <string>CAMPO2</string>
    </key>
    <value>
      <anyType xmlns:q1="http://www.w3.org/2001/XMLSchema" d4p1:type="q1:int" xmlns:d4p1="http://www.w3.org/2001/XMLSchema-instance">2</anyType>
    </value>
  </item>
</dictionary> 
```

拜托，欢迎任何帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:46:11.797

您应该使用 XMLWriter 而不是 XMLSerializer。XMLSerializer 尝试为对象生成 XML 文件；某种序列化。它更像是 BinarySerializer，但它生成 XML 格式而不是字节数组或流。XMLWriter 是一个将层次结构写入 XML 文件的类。

# google-maps - 如何更改街景工具的位置

> ID：10883481
> 
> 赞同：1
> 
> 时间：2012-06-04T15:01:01.147
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我正在使用 Google Maps API V3，我想知道当用户在街景内部时如何更改元素的位置（如图[http://www.pikky.net/uploads/d6964cfad0bb97cc3ada7852df260a715234d69a.png所示）。](http://www.pikky.net/uploads/d6964cfad0bb97cc3ada7852df260a715234d69a.png)谢谢，
米尔科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:05:04.233

您可以通过将 StreetViewPanoramaOptions 定义为 StreetViewPanorama 对象来实现此目的，您将在声明地图选项时将其初始化为地图变量。当您在街景中时，您可以在 StreetViewPanoramaOptions 中确定控件的位置。（有关更多信息，请参阅本文档[https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanoramaOptions](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanoramaOptions)）。这是有关如何解决此问题的片段。（注意：这一切都应该在初始化 map 变量之前在您的 initialize() 函数中完成）。

首先，我们将为 StreetViewPanoramaOptions 声明一个变量，并根据需要更改选项：

```
 var panoramaOptions = {
        addressControlOptions : { position : google.maps.ControlPosition.BOTTOM_CENTER },
        zoomControlOptions : { position : google.maps.ControlPosition.TOP_RIGHT},
        enableCloseButton : true,
        visible: false //set to false so streetview is not triggered on the initial map load
    }; 
```

下一步是声明一个 StreetViewPanorama 对象，该对象使用上面的 StreetViewPanoramaOptions 设置为地图的容器/div：

```
 var panorama = new  google.maps.StreetViewPanorama(document.getElementById("map_canvas"), panoramaOptions); 
```

最后，我们声明地图选项并使用地图选项设置地图变量，就像我们通常做的那样。除了，在地图选项中，我们将`streetView`选项设置为`panorama`变量：

```
 var mapOptions = {
        center: new google.maps.LatLng(42.345573,-71.098326),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetView : panorama //this is where we set the panorama object to the map
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

有关如何在地图 div 中定位控件的信息，请参阅此来源（[https://developers.google.com/maps/documentation/javascript/controls#ControlPositioning](https://developers.google.com/maps/documentation/javascript/controls#ControlPositioning)）

# jquery - 用 on() 替换 live()

> ID：10883488
> 
> 赞同：2
> 
> 时间：2012-06-04T15:01:28.907
> 
> 标签：jquery

从文档

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

我正在使用 jQuery 1.7.1

这适用于静态元素和动态加载的元素：

```
$("input").live("change", function () { alert("hello"); }); 
```

这不起作用，甚至对于静态元素也不起作用：

```
$("document").on("change", "input", function () { alert("hello"); }); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T15:02:22.310

像这样写

```
$(document).on("change", "input", function () { alert("hello"); }); 
```

您可以替换为始终存在的`document`任何内容以获得更好的性能。喜欢`closer parent element``DOM`

```
$('#closest_static_container_id').on("change", "input", function () { 
     alert("hello"); 
}); 
```

如果您使用`$("document")`jQuery 将搜索`node/tag`命名为`document`like`<document>`并且不会找到任何[`document`](https://developer.mozilla.org/en/DOM/document)实际的`object`.

但是你可以使用`$("body")`as`body`的节点/元素`DOM`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:02:36.660

改变：

```
$("document").on(...) 
```

至：

```
$(document).on("change", "input", function () { alert("hello"); }); 
```

[`document`](https://developer.mozilla.org/en/DOM/document)是一个对象（ 的一个属性`window`），而不是一个节点类型。

```
$("document").on(...) 
```

正在寻找对象`<document>`中的元素`document`，例如：

```
<document> 
```

正如你现在可能得到的那样，没有...

无论如何，最好的做法`on`是使用最接近动态添加元素的静态元素，例如：

```
<div id='container-div-id'>
    <input />  ... this will be added later.
</div>

$('#container-div-id').on("change", "input", function () {
     alert("hello"); 
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T15:05:09.250

`document`是一个对象，您将其用作字符串。所以`jQuery`将尝试将其用作 css 选择器，它不会找到任何附加事件处理程序的东西。

尝试这个。

```
$(document).on("change", "input", function () { alert("hello"); }); 
```

# windows-phone-7 - WP7 BackgroundAgent 无法启动

> ID：10883492
> 
> 赞同：0
> 
> 时间：2012-06-04T15:01:39.630
> 
> 标签：windows-phone-7, background-agents

我的预定代理遇到了一个奇怪的问题。几周前我创建了它，它可以在我的手机上运行，​​我对其进行了测试，一切都很好。但是今天我对其进行了修改，重新编译，部署并且......它没有启动。

我添加了 LaunchForTest，尝试了不同的时间跨度......没有任何效果。我已确保正确引用了所有程序集，我没有使用任何禁止的 API……而且它不会启动。即使是干净的构建和干净的安装。我在模拟器上试过，它可以工作。

如果有人知道可能发生的事情......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:31:56.560

听起来您没有删除旧计划并创建新计划。

确保您在您的应用程序（而不是后台代理）中执行此类操作。它将删除任何现有的并将其添加回来。

```
try
{
   PeriodicTask Action = (PeriodicTask)ScheduledActionService.Find(MainPage.AgentName);
   if ( Action != null)
   {
      ScheduledActionService.Remove(MainPage.AgentName);
   }

   ScheduledActionService.Add(periodicTask);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:23:00.820

`Background Agent`不启动时有三个选项：`Background Agent`设置中禁用，`Battery level`低，`Background Agent`连续崩溃两次

# php - 创建一个允许成员注册其他成员的网络应用程序

> ID：10883496
> 
> 赞同：0
> 
> 时间：2012-06-04T15:01:58.510
> 
> 标签：php, mysql

我处于紧张状态，我被委托创建一个 PHP Web 应用程序，允许一个注册，然后用户可以再注册 5 个其他用户，他注册的其他用户也可以每个注册 5 个成员。

我希望创建数据库以将用户保存在数组中注册的特定成员，从而我将以表格形式列出它们，

令人困惑的部分是

1.  如何分解数据库结构以便它可以保存五个用户，然后在查询时将它们列出（我很困惑将它们保存在数组或单独的表中）。但我更喜欢保存在数组中
2.  由 5 个注册的任何一个注册的任何其他用户都将被链接到主裁判，所有这些都将被计算在内，整个过程停止，因为用户注册了 5 个成员，并且 5 个成员也注册了 5 个用户到他/她的帐户使每个帐户的总数为 25

可以表示为

```
1\. Parent - 5 children - 
```

那么5个孩子每个生5个孩子，父母会承认他的孩子和他的孙子，一旦孩子和孙子的数量达到25，父母的生殖周期结束，他的孩子也可以继续做他们的25

我已经创建了数据库，但我需要一些指导来成功构建它，因为我有 3 天的时间来完成这部分。

```
public function userTable()
{
    $qry = "CREATE TABLE IF NOT EXISTS users(
    user_id         INT(8) NOT NULL AUTO_INCREMENT, 
    username        VARCHAR(35) NOT NULL,
    password        VARCHAR(35) NOT NULL,
    referralIDs             varchar(500) NOT NULL,
    totalRefers        VARCHAR(35) NOT NULL ,
    userIDhash          varchar(30) not null,
    date                date,
    time                varchar(20) not null,
    PRIMARY KEY (user_id)
    )TYPE=INNODB";
$result = $this->qry($qry);
    return;
}

    public function ReferralTable()
{
    $qry = "CREATE TABLE IF NOT EXISTS Refers(
    user_id         INT(50) NOT NULL, 
    usersRegistered        VARCHAR(500) NOT NULL,
    referby             int(50) not null
    )TYPE=INNODB";
$result = $this->qry($qry);
    return;
} 
```

我更喜欢只使用一个表，它将我的孩子保存在一个由“，”分隔的数组中，然后我可以从那里开始对如何保存它感到困惑，并一个接一个地检索孩子的 ID，我可以用它用于查询孙子

希望不会让任何人感到困惑？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:10:40.143

为什么需要使用数组？这是一个简单的一对多关系...只需创建一个包含此关系的表，或者见鬼 - 用户表中的一个字段...

这是两个表示例的示例...

用户表

```
id | email | name | whatever
1    a@b.c   jon
2    j@b.c   mel 
```

用户注册

```
register_id | registree_id
    1             null
    2              1 
```

一张桌子的例子

```
id | email | name | whatever | ref_user_id
1     a@b.c   jon                NULL
2     j@b.c   mel                  1
3     f@b.c   al                   1 
```

比你能得到所有 1 注册的用户：

```
SELECT * FROM user WHERE ref_user_id = 1 
```

或获取 1 注册的人数

```
SELECT COUNT(*) FROM user WHERE ref_user_id = 1 
```

在这两种情况下，id 为 1 的用户首先注册（未提及），然后他注册了用户 #2

# php - PHP不显示来自MySQL数据库的结果

> ID：10883497
> 
> 赞同：0
> 
> 时间：2012-06-04T15:01:58.410
> 
> 标签：php, mysql, sql

我正在尝试显示由 GET 数据选择的 MySql 数据库中的条目。

```
if (isset($_GET["id"])){

        $id=$_GET["id"];
        $result = getSelectedBlog($id); 

        while($row = mysqli_fetch_array($result))
            { 
                extract($row); 
                ?>

                    <div class="headline"><?php echo $headline ?></div>
                    <div class="subtitle"><?php echo $subTitle ?></div>
                    <div class="content"><?php echo $content ?></div>
                    <?php
            } 
```

下面是 SQL 语句：

```
function getSelectedBlog($id){

$con = mysqli_connect('localhost', 'root', '', 'michaelWebsite') or die('could not connect');
$sql = 'SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE "$id"';
$result = mysqli_query($con, $sql) or die('entry does not exist.:' . mysqli_error($con)); 
return $result; 
```

}

如您所见，我将获取数据作为 $id 传递给返回结果的方法。然而，没有任何东西被退回。目前有三个条目，如果我将 SQL 语句中的 $id 更改为 1、2 或 3，它将显示相应的数据，但它不适用于 $id 变量。

URL 确实以正确的信息 ?id=1 结尾。

如果这是愚蠢的，请原谅我，我已经坚持了几个小时了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:08:35.020

所有这些答案都将解决您的问题，但没有一个提到或阻止[SQL Injection](http://php.net/manual/en/security.database.sql-injection.php)。

在你的情况下，我推荐（假设`articleID`是一个整数字段）。

```
$sql = 'SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE "' . (int)$id . '"'; 
```

我也很好奇你为什么使用`LIKE`id*字段*。

**注意：**由于您使用的是 MySQLi，我鼓励您查看[prepared statements](http://php.net/manual/en/mysqli.prepare.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:06:34.147

```
$sql = 'SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE "'.$id.'"'; 
```

用简单的报价转义你的 var

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:06:37.087

试试这个：

```
$sql = "SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE '$id'"; 
```

或与

```
$sql = 'SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE "' . $id . '"'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:10:29.340

改变

```
'SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE "$id"' 
```

至

```
"SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE '$id'" 
```

只有在双引号之间的变量才会被评估`"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T15:07:02.017

您需要使用双引号以使 php 正确扩展您的变量:) 所以将您的查询更改为

```
$sql = "SELECT * FROM tblArticle WHERE tblArticle.articleID LIKE '$id'"; 
```

# javascript - 开放层中的 UTM 和 GeoJson

> ID：10883503
> 
> 赞同：2
> 
> 时间：2012-06-04T15:02:08.570
> 
> 标签：javascript, openlayers

我想实现这个由geoext和openlayers组成的例子[http://api.geoext.org/1.1/examples/feature-grid.html](http://api.geoext.org/1.1/examples/feature-grid.html)，该特征网格由geojson文件填充

在我的开发中，我有一个 utm 格式的 geojson 文件，这是我文件的一个特征（坐标是 utm）

```
{"geometry": {"type": "Point", "coordinates": [7535169.36, 402844.172]}, "type": "Feature", "properties": {"NOMBRE": "LA VICTORIA", "CODIGO": "1702"}, "id": "1702"} 
```

我试图在我的代码中显示要点，但我什么也看不到，这是我的代码

```
// create feature store, binding it to the vector layer
            store = new GeoExt.data.FeatureStore({
                layer: vecCiudades,
                fields: [
                    { name: 'NOMBRE' },
                    { name: 'CODIGO' }
                ],
                proxy: new GeoExt.data.ProtocolProxy({
                    protocol: new OpenLayers.Protocol.HTTP({
                        url: "data/summits.json",
                        format: new OpenLayers.Format.GeoJSON({
                            ignoreExtraDims: true,
                            internalProjection: new OpenLayers.Projection("EPSG:900913"),
                            externalProjection: new OpenLayers.Projection("EPSG:4326")
                        })
                    })
                }),
                autoLoad: true
            }); 
```

如您所见，我尝试指定功能商店的内部和外部投影，我的实现看起来像上面提到的链接示例，但是当我选择一个城市时，地图位于错误的地方（显示的地方靠近南极，但必须靠近南美洲）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T21:34:47.830

为什么FeatureStore..？只需定义图层如下：

```
var vecCiudades = new OpenLayers.Layer.Vector('MyLayer', {
    strategies:[new OpenLayers.Strategy.BBOX()],
    isBaseLayer:false,
    projection:new OpenLayers.Projection("EPSG:900913"),
    styleMap:new OpenLayers.StyleMap(null),
    transitionEffect:'resize',
    protocol:new OpenLayers.Protocol.HTTP({
        url: "data/summits.json",
        format:new OpenLayers.Format.GeoJSON({
            ignoreExtraDims:true
        }),
        readWithPOST:false,
        updateWithPOST:false,
        srsInBBOX:true
    })
}); 
```

同时在地图上注册以下活动：

```
map.events.register("moveend", this, function (e) {
    vecCiudades.refresh({force:true});
}); 
```

这将在任何时候重新读取 GeoJSON 移动或缩放的地图，并且请求将包含可见区域的边界框，因此您只能发送将不可见的特征而不是所有特征。

# c# - 任何人都知道如何通过 GoDaddy 电子邮件服务器使用 System.Net.Mail 发送 SSL 电子邮件

> ID：10883505
> 
> 赞同：0
> 
> 时间：2012-06-04T15:02:12.113
> 
> 标签：c#, ssl, smtpclient, mailmessage

我对此进行了研究，但找不到真正完整的答案。许多人，包括我自己，都能够通过 C# System.Net.Mail 使用端口 25 或 587 发送电子邮件，而不是使用 SSL。例如，请参见此处： [https ://stackoverflow.com/questions/1317809/sending-email-using-a-godaddy-account](https://stackoverflow.com/questions/1317809/sending-email-using-a-godaddy-account)

其他人有一个使用 System.Web.Mail 的解决方案，但该解决方案已过时： [如何使用 .NET Framework 通过 SSL SMTP 发送电子邮件？](https://stackoverflow.com/questions/1011245/how-can-i-send-emails-through-ssl-smtp-with-the-net-framework)

但是，似乎没有人有解决方案如何使用带有端口 465 的 SSL 发送电子邮件。有没有人有解决方案，或者至少知道为什么 SSL 在 C# 中不起作用？

这是我正在使用的代码：

```
try
{
    MailMessage mail = new MailMessage("sender@yourdomain.com", receivingEmail, subject, body);
    string host = "smtpout.secureserver.net";
    int port = 465; // it's 465 if using SSL, otherwise 25 or 587
    SmtpClient smtpServer = new SmtpClient(host, port);
    smtpServer.Credentials = new NetworkCredential("sender@yourdomain.com", "yourpassword");
    smtpServer.EnableSsl = true;
    smtpServer.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtpServer.Send(mail);
}
catch (Exception ex)
{
    // do something with the exception
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:25:28.733

.NET 内置邮件类不支持所需的 SSL 方法（隐式 SSL），与此无关：原因[在此处解释](http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx)。

存在执行显式和隐式 SSL 并具有其他很酷功能的第三方 SMTP 客户端组件。例如，[Rebex.Mail](http://www.rebex.net/mail.net/)或我们的[SecureBlackbox](http://www.eldos.com/sbb/desc-mail.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T10:11:20.147

它不起作用的原因在于 SmtpClient 的体系结构。SmtpClient 旨在使用纯文本而不是 ssl 建立连接。

但是，您可以使用 native.net 重新编写发件人。

试试看 [Aegis Implicit Mail (AIM)] ( [http://netimplicitssl.sourceforge.net/](http://netimplicitssl.sourceforge.net/) ) ，它是开源的，它的代码风格和架构与 System.Net.Mail 完全一样

[您可以在 [此处] ( https://sourceforge.net/p/netimplicitssl/wiki/Home/](https://sourceforge.net/p/netimplicitssl/wiki/Home/) )找到有关 465（隐式“SSL”）和其他端口（显式“TLS”）的详细信息

你可能是：

```
try
{
    MimeMailMessage mail = new MailMessage("sender@yourdomain.com", receivingEmail, subject, body);

   string host = "smtpout.secureserver.net";
    int port = 465; // it's 465 if using SSL, otherwise 25 or 587
    MimeMailer smtpServer = new MimeMailer(host, port);
    smtpServer.Credentials = new NetworkCredential("sender@yourdomain.com", "yourpassword");
    smtpServer.EnableSsl = true;
    smtpServer.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtpServer.Send(mail);
}
 catch (Exception ex)
{
    // do something with the exception
    ...
} 
```

# php - 致命错误：Zend 框架中未定义的类常量“EXCEPTION_NO_ROUTE”

> ID：10883508
> 
> 赞同：1
> 
> 时间：2012-06-04T15:02:17.783
> 
> 标签：php, zend-framework

我已经下载了 Zend 最新版本（Zend Framework 1.11），然后使用命令行工具创建了项目。

我还在创建的项目中创建了控制器。在创建的控制器中，我刚刚添加了新方法，

```
<?php

class UserController extends Zend_Controller_Action
{
public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    // action body
}

public function chatAction()
{

    echo 'Test';

}

} 
```

然后尝试在浏览器中访问

```
http://localhost/user/chat 
```

我收到以下错误

```
Fatal error: Undefined class constant 'EXCEPTION_NO_ROUTE' in F:\xampp\htdocs\z_app\application\controllers\ErrorController.php on line 16 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:20:20.693

您可能包含了错误的 zend 库。

`echo Zend_Version::VERSION;`在引导之前通过 index.php 和 die()检查您的版本（因为您的 mvc 已损坏）。

您可能需要将包含路径更新到 1.11 zend 框架库的正确位置。可能您安装了多个版本（即zend studio 自带）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:00:24.680

谢谢各位朋友，最后我通过将Zend框架目录库中的Zend目录复制到我的项目目录中解决了这个问题。现在它正在工作。

```
F:\xampp\htdocs\zend\library 
```

至

```
F:\xampp\htdocs\z_app\library 
```

即使我已将 php.ini 中的包含路径添加到 zend 框架库目录，如下所示，

```
include_path = ".;F:\xampp\php\PEAR;F:\xampp\htdocs\zend\library 
```

它没有工作。

# jquery - 使用 jquery validate 插件验证表单输入类型文件类型

> ID：10883512
> 
> 赞同：4
> 
> 时间：2012-06-04T15:02:30.007
> 
> 标签：jquery, jquery-plugins, jquery-validate, validation

以下代码：脚本代码

```
<script type="text/javascript">
$(document).ready(function() {
    $("#formElem").validate({

        rules: {  

            dimage:{
                minlength:200    
            }  
        },
messages: {

             dimage:{
               required: 'Please select the image!'  
            } ,

        }       
    });

});
</script> 
```

html代码

```
<form id="formElem" name="formElem" action="" method="post">

 <input type="file" name="dimage" id="dimage" />
</form> 
```

我正在使用 jquery validate.js 文件进行客户端验证。当我使用上述代码创建文件时，它没有显示任何错误消息。

当用户未选择文件时，我应该如何提醒错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:52:34.450

如果您上传图像文件 Jquery Validation 插件有一个选项`accept`，您可以将其设置为一个值，该值将验证文件是否真的是图像，那么您的 jquery 代码将如下所示：

```
$("#formElem").validate({

      rules: {  

            dimage:{
                    required: true,
                    accept:"jpg,png,jpeg,gif"
                }  
        },
    messages: {

            dimage:{
                    required: "Select Image",
                    accept: "Only image type jpg/png/jpeg/gif is allowed"
                }  

             }      
        }); 
```

更多信息参见[官方文档](http://docs.jquery.com/Plugins/Validation/Methods/accept)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:03:52.010

试试这个。

```
$(document).ready(function() {
    $("#formElem").validate({
        rules: {  
            dimage:{
                required: true    
            }  
        },
        messages: {
            dimage:{
               required: 'Please select the image!'  
            } ,
        }       
    });
}); 
```

# asp.net - 如何使用 .Net 或 SQL Server 检测相似性

> ID：10883513
> 
> 赞同：0
> 
> 时间：2012-06-04T15:02:31.597
> 
> 标签：asp.net, .net, sql-server, sql-server-2008-r2

我正在使用 Asp.Net 4 和 SQL Server 2008 R2。

我想知道数据库或.Net框架中是否存在用于计算两个字符串值之间的数据相似性的任何类或工具。

我需要的是一个**百分比值，**表示两个字符串之间的相似性，因此我可以根据该百分比执行一些逻辑（例如，如果某些数据与我的系统中已经存在的某些数据过于相似，则拒绝用户输入）。

有任何想法吗？谢谢

PS如果您需要更多信息或我的问题不合适，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:04:21.410

SQL中有模糊比较，但不是很好。相反，请使用在 SQL 和 C# 中都有实现的 Levenstein 算法。

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

或者类似的方法，Wiki 页面有很多信息。

# c# - 多选文件上传器

> ID：10883515
> 
> 赞同：0
> 
> 时间：2012-06-04T15:02:48.697
> 
> 标签：c#, jquery, asp.net, file, user-controls

我正在尝试为多选文件上传控件提出一个可行的（并且越简单越好）解决方案。通常这将是一件轻而易举的事，除了一些事情......

*   用户需要能够在对话框中逐个选择多个文件，而不是一一选择。
*   不能使用开源代码。（但 Javascript/JQuery 没问题）
*   不能使用微软不支持的第三方库。

（请不要打扰“你为什么不能？”评论。）

我没有太多制作自己的控件的经验。（我假设如果有一种简单的方法可以通过修改“打开”控件来做到这一点，那将是一个很容易找到的教程。）

谢谢。

编辑：回答一些问题......

*   除了研究之外，我没有尝试过太多的东西。不确定从哪里开始所有这些限制。
*   我不能使用 HTML5。其实我需要IE7的兼容性。所以没有多重属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:32:37.957

Telerik 的[多文件上传](http://demos.telerik.com/aspnet-ajax/upload/examples/overview/defaultcs.aspx)怎么样？我相信他们是 MS 认证的合作伙伴。

-J

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:40:15.700

If you want to make a customized multi-file uploader control yourself, you have to build a rich file explorer using java script client side and then upload files using ajax technology. I think all multi-file upload components use this method. If you can't use open source or third party components, it seems you have to make it from scratch.

# d3.js - D3如何改变SVG的宽度和长度

> ID：10883523
> 
> 赞同：18
> 
> 时间：2012-06-04T15:03:32.217
> 
> 标签：d3.js

我在谷歌地图上创建了一个 SVG，我想控制 SVG 对象的宽度和长度

大小还可以，但问题是 SVG 的位置不在正确的位置。

我如何控制对象的位置？

我试图为

```
.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")") 
```

但后来尺寸不起作用。当我还尝试添加比例并转换为投影时，大小也不起作用。你能告诉我如何控制位置和大小吗？SVG的第一个位置应该是相同的位置，只是大小应该改变，但位置应该始终相同。当前的问题是，当我更改缩放比例时，SVG 也会更改位置

```
 <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="http://mbostock.github.com/d3/d3.v2.js?2.8.1"></script>
<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=true"></script>
<style>
html,body,#map {
    width: 95%;
    height: 95%;
    margin: 0;
    padding: 0;
}

.stations,.stations svg {
    position: absolute;
}

.stations svg {
    width: 60px;
    height: 20px;
    padding-right: 100px;
    font: 10px sans-serif;
}

.stations circle {
    fill: brown;
    stroke: black;
    stroke-width: 1.5px;
}

.background {
    fill: none;
    pointer-events: all;
}

#states path:hover {
    stroke: white;
}

#state-titels text {
    font-family: "ff-dagny-web-pro-1", "ff-dagny-web-pro-2", sans-serif;
    font-size: 8px;
    font-weight: 700;
    font-style: normal;
    font-size-adjust: none;
    color: #333333;
    text-transform: none;
    text-decoration: none;
    letter-spacing: normal;
    word-spacing: 0;
    text-align: start;
    vertical-align: baseline;
    direction: ltr;
    text-overflow: clip;
}

#states path {
    fill: #ccc;
    stroke: #fff;
    stroke-width: 1.5px;
}
</style>
</head>
<body>
    <div id="map"></div>
    <script type="text/javascript">
        //Create the Google Map…

        var first = 1;
        var zoom = 2;
        var map = new google.maps.Map(d3.select("#map").node(), {
            zoom : 2,
            center : new google.maps.LatLng(-53.76487, -110.41948),
            mapTypeId : google.maps.MapTypeId.TERRAIN
        });

        google.maps.event.addListener(map, 'zoom_changed', function() {
            zoom = map.getZoom();
        });

        var width = 10000, height = 1000, centered;

        var projection = d3.geo.albersUsa();

        var path = d3.geo.path().projection(projection);

        var count = 1;

        d3.json("../d3/us-states.json", function(json) {

            var overlay = new google.maps.OverlayView();
                overlay.onAdd = function() {

                var layer = d3.select(this.getPanes().overlayLayer).append("div");

                var width1 = 1000;
                var height1 = 1000;
                var svg = layer.append("svg").attr("width", width1).attr(
                        "height", height1);

                var states = svg.append("g").attr("id",
                        "states");

                states.selectAll("path").data(json.features).enter()
                .append("path").attr("d", path)//.attr("transform", "scale(" + (zoom) + ")")//.each(transform)
                .style("opacity", "0.7");

                overlay.draw = function() {
                    if ( zoom == 2)
                states.transition().attr("transform", "scale(" + (zoom / 8 ) + ")").style("stroke-width", 2 / zoom + "px");
                    else if ( zoom == 3)
                         states.transition().attr("transform", "scale(" + (zoom / 6 ) + ")").style("stroke-width", 2 / zoom + "px");
                    else if ( zoom == 4)
                     states.transition().attr("transform", "scale(" + (zoom / 4 ) + ")").style("stroke-width", 2 / zoom + "px");
                    else if ( zoom == 5)
                         states.transition().attr("transform", "scale(" + (zoom / 2 ) + ")").style("stroke-width", 2 / zoom + "px");

                };

            };

            overlay.setMap(map);

        });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-04T15:27:19.060

除非我误解了这个问题，否则您应该能够简单地通过使用 CSS 来控制 SVG 的大小。因此，使用 d3，而不是使用`attr()`use `style()`：

```
layer.append("svg")
  .style("width", width1 + 'px')
  .style("height", height1 + 'px'); 
```

同样，您可以使用`.style("left", ...)`and控制位置`.style("top", ...)`，假设您的 svg 是绝对定位的。

# database - 从选择查询中选择记录后更新查询

> ID：10883525
> 
> 赞同：0
> 
> 时间：2012-06-04T15:03:35.990
> 
> 标签：database, apache-camel

我必须从表中选择一些行，将结果发送到队列，然后在数据库中与“发送”相同的记录。这就是我尝试执行此操作的方式，但不确定如何将列值传递给选择查询的每条记录的更新查询的**where子句。**

```
<route> 
 <from uri="timer://kickoff?period=10000"/>
     <setBody>
       <constant>select top 10 * from tableName</constant>
     </setBody>
 <to uri="jdbc:test"/>
 <multicast>
        <to uri="activemq:queue:TESTQUEUE"/>
        <setBody>
            <constant>update tableName set status='Sent' where primaryKey= ${primaryKey}</constant>
        </setBody>
    <to uri="jdbc:test"/>
 </multicast>
</route> 
```

这条路线会运行所有 10 条记录吗？

如果使用 JDBC/SQL 组件不可能，那么如何使用 Hibernate 组件来实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:13:25.880

当您使用 Camel JDBC 运行查询时，您将返回一个 HashMap 的 ArrayList。请参阅此处的骆驼文档：

[http://camel.apache.org/jdbc.html](http://camel.apache.org/jdbc.html)

“结果在 OUT 正文中以 ArrayList> 的形式返回。List 对象包含行列表，Map 对象包含以 String 键作为列名的每一行。”

您将需要设置一个 spring bean 来处理这个 body。您可以从 spring bean 中的 arraylist 中提取主键并设置标题。从那里您可以使用拆分器来处理所有行：

[http://camel.apache.org/splitter.html](http://camel.apache.org/splitter.html)

# ruby-on-rails - rvm 的 Phusion 乘客错误

> ID：10883526
> 
> 赞同：0
> 
> 时间：2012-06-04T15:03:37.573
> 
> 标签：ruby-on-rails, apache, passenger, phusion

我有一个 rails 2 应用程序，我正在升级到 rails 3。我安装了 rvm，所以我可以同时运行这两个应用程序。

rails 3 应用程序运行良好。但是当我尝试恢复 rails 2 应用程序时，我得到了这个错误。

```
Processing ApplicationController#index (for 122.179.134.45 at 2012-06-04 09:56:46) [GET]

ArgumentError (wrong number of arguments (1 for 2)):
<internal:prelude>:10:in `synchronize'
passenger (3.0.12) lib/phusion_passenger/rack/request_handler.rb:96:in   `process_request'
passenger (3.0.12) lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
passenger (3.0.12) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
passenger (3.0.12) lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
passenger (3.0.12) lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `block in handle_spawn_application'
passenger (3.0.12) lib/phusion_passenger/utils.rb:479:in `safe_fork'
passenger (3.0.12) lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
passenger (3.0.12) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
passenger (3.0.12) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
passenger (3.0.12) lib/phusion_passenger/abstract_server.rb:180:in `start'
passenger (3.0.12) lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
passenger (3.0.12) lib/phusion_passenger/spawn_manager.rb:219:in `block (2 levels) in spawn_rails_application'
passenger (3.0.12) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
passenger (3.0.12) lib/phusion_passenger/spawn_manager.rb:214:in `block in spawn_rails_application'
passenger (3.0.12) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
<internal:prelude>:10:in `synchronize'
passenger (3.0.12) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
passenger (3.0.12) lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
passenger (3.0.12) lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
passenger (3.0.12) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
passenger (3.0.12) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
passenger (3.0.12) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
passenger (3.0.12) helper-scripts/passenger-spawn-server:99:in `<main>'

Rendering /var/www/html/dbp/releases/20110518114228/public/500.html (500 Internal Server Error) 
```

有什么建议吗？

这是我的 rvm ruby​​ 和 rails ruby​​ 1.8.7 (2012-02-08 patchlevel 358) [i686-linux] Rails 2.3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T19:04:28.823

尽管这是一个古老的问题，并且该问题可能因提问者的不同原因而引起。但是我今天与乘客（使用 apache 和 nginx）遇到了同样的问题，并通过添加 config/secrets.yml 文件并在那里定义密钥来解决。

# selenium - 在 mstest trx 输出文件中注入自定义数据

> ID：10883527
> 
> 赞同：2
> 
> 时间：2012-06-04T15:03:38.097
> 
> 标签：selenium, cruisecontrol.net, mstest

在我们的 Cruise Control 构建中，我们为 3 个浏览器运行了一套 Selenium 测试。为此，我们通过 MSTest 运行相同的测试套件，但我们在每次运行之间更改 app.config 文件以设置要使用的浏览器。

问题是在 Cruise Control 的 MSTest 报告页面中，我们看到了三个测试运行，但我们无法看到每个测试运行使用哪个浏览器。

理想情况下，我想做一些事情，比如将浏览器的名称作为参数传递给 MSTest，以便将其写入 trx 文件，但我没有看到任何可能性。我唯一考虑的是为 trx 文件指定一个指定的输出名称，然后使用 Powershell 脚本更改此文件中的 xml。

你有更好的主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:19:44.763

按照 Elena 的建议，我查看了 MSTest 中的 TestContext 对象。我最终在我的测试套件中创建了一个特定的单元测试，以将浏览器名称添加到 trx 文件中，如下所示：

```
[TestClass]
public class ConfigurationTests
{
    public TestContext TestContext { get; set; }

    [TestMethod]
    public void DisplayBrowserUsedForSeleniumTests()
    {
        string browserName = ConfigurationManager.AppSettings["DriverName"];
        TestContext.WriteLine("for {0} browser.", browserName);
    }
} 
```

在我的输出 trx 文件中，我现在有类似的内容：

```
<UnitTestResult testName="DisplayBrowserUsedForSeleniumTests">
  <Output>
    <TextMessages>
      <Message>for Firefox browser</Message>
    </TextMessages>
  </Output>
</UnitTestResult> 
```

最后，我更改了 MSTest 报告的 Cruise Control xslt 转换，以在摘要标题中显示浏览器信息：

```
 <h2>Summary <xsl:value-of select="*[local-name()='Results']/*[local-name()='UnitTestResult'][@testName='DisplayBrowserUsedForSeleniumTests']"/></h2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:16:42.933

以下是一些可以帮助您的帖子：

*   [将自定义数据添加到 trx 结果文件](http://social.msdn.microsoft.com/Forums/en/vststest/thread/4743b42a-84a2-4fd9-94bb-e25e295fb184)
*   [添加额外的测试结果信息。](http://social.msdn.microsoft.com/Forums/en-US/vsautotest/thread/1cc8ebb3-c394-4f47-b80e-0f67c47237b7)

我没有尝试过，但它们听起来像是您要找的东西。

**编辑：** 只是为了防止上面的链接有一天被破坏：

## 将自定义数据添加到 trx 结果文件

> 您可以向您的 TestMethod 添加一个 TestProperty 属性，它将出现在您的 trx 文件中。

```
[TestProperty("Severity", "1")] 
```

> 谢谢，
> 
> 阿努伊
> 
> singhhome 标记为答案 2010 年 8 月 20 日星期五 2:34 PM 2010 年 8 月 20 日星期五 5:53 AM

## 添加额外的测试结果信息。

> **要在 TRX 文件中添加附加文件**- 您可以借助 TestContext 中针对每个测试的以下方法添加此文件。
> 
> **TestContext.AddResultFile(filePath)** 其中 filePath 是要添加到测试结果文件中的文件的路径。
> 
> 要在测试运行期间获取 TestResult 文件名 - 您可以使用以下属性来获取它
> 
> **TestContext.TestRunDirectory** 它将为您提供存储测试运行日志的目录名称以及完整路径。对于测试运行，目录名称和 trx 文件名将相同，因此如果将此字符串与 .trx 连接，则可以很好地访问测试结果文件。
> 
> 以下是示例代码片段。

```
[TestMethod]
public void CodedUITestMethod1()
{
        //add a file stored at c:\ location to the test result file
        this.TestContext.AddResultFile(@"c:\file.bmp");

        //Print the trx file name
        string testRunDirectory = TestContext.TestRunDirectory;
        string testRunTRXFileName = String.Concat(testRunDirectory, ".trx");
        Console.WriteLine("TestResult file : " + testRunTRXFileName);
} 
```

> Deepak.Singhal [MSFT]Microsoft 员工 2010 年 2 月 10 日星期三下午 1:32 建议为答案 Flying_Tiger 2010 年 2 月 10 日星期三下午 1:52 标记为答案

# grep - 在 grep 中寻找 mod_rewrite 正则表达式功能

> ID：10883536
> 
> 赞同：0
> 
> 时间：2012-06-04T15:04:20.733
> 
> 标签：grep, expression

因为图片（或示例）价值超过千字，我将使用一个示例：

```
RewriteRule ^/products/([0-9]+)$ /content.php?id=$1 
```

在这个 RewriteRule 示例中，我们有简单的正则表达式。$1 是对 ([0-9]+) 捕获的东西的引用，因此如果匹配存在，它是对某个数字的引用。是否可以在 grep 中做类似的事情？

比方说，一些 xml 文档包含以下内容：

```
<someTag>someValue</someTag> 
```

我只想提取**someValue**，但输入**second_bash_script**以下内容：

```
first_bash_script | grep "<someTag>\([[:digit::]]\)\+</someTag>" | second_bash_script 
```

是**someValue**。是否可以使用 grep仅提取**someValue ？**

感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:18:29.553

这是两个不同的问题，对吧？

第一个的答案是： use `sed`，`grep`不做替换。

```
sed 's_^/products/\([0-9]\+\)_/content.php?id=\1_g' 
```

第二件事可以通过`grep`使用 Perl 正则表达式来完成：

```
$ echo '<someTag>42</someTag>' | grep -oP '(?<=<someTag>)\d+(?=</someTag>)'
42 
```

# cdn - 实施 CDN 会涉及移动图像和更改路径名称吗？

> ID：10883538
> 
> 赞同：1
> 
> 时间：2012-06-04T15:04:22.127
> 
> 标签：cdn

我只是在学习 CDN，所以如果这是一个愚蠢的问题，请原谅。
实施 CDN 会涉及移动图像和更改路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:42:56.663

您可以在同一服务器上使用 CDN，但使用不同的 URI。例如，让您的页面位于：www.example.com 和 cdn：cdn.example.com（以 cdn.example.com 作为虚拟主机别名）应该比仅从 www.example.com 获取所有数据更快，我认为这是因为与地址相关的http连接数。当然，最好将它放在另一台服务器上，在这种情况下，您必须复制所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:07:56.553

是的，CDN（内容交付网络）只是一组网络服务器的基础。

如果您想在 CDN 上托管文件，则必须将文件复制到 CDN 服务器，然后在您自己的网页上使用指向这些服务器上这些文件的完整 CDN 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:48:36.550

不必要。您可以使用[CloudFlare](http://www.cloudflare.com)等服务，该服务只需要修改您的一些 DNS 设置。简而言之，该服务确定正在服务的文件是静态的，并将这些文件缓存在其网络中，通常会减少服务器的总体流量。您还可以获得该服务提供的任何地理分布的好处，而您自己的托管服务可能没有。

# hibernate - EntityManager 不能分配 id 吗？

> ID：10883539
> 
> 赞同：1
> 
> 时间：2012-06-04T15:04:25.373
> 
> 标签：hibernate, jpa-2.0

当合并不会分配 @Id 变量时，JPA2 中是否存在特定情况？然而返回一个新的实体实例而不触发异常？

假设我有这个层次结构：

```
@MappedSuperclass
abstract class Bar {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private Long id;

  ...
}

@Entity
@Table(name = "BAR_1S")
@Access(AccessType.PROPERTY)
class Bar1 extends Bar {
  ...
}

@Entity
@Table(name = "BAR_2S")
@Access(AccessType.PROPERTY)
class Bar2 extends Bar {
  ...
} 
```

由于尚未找到原因，Bar1 的实例在 merge() 之后获得了一个 id，而 Bar2 的实例没有。至少它看起来是这样的。我一直在尝试各种方法，但都没有成功。

看起来 Hibernate (4.1.4.Final) 不想为该特定类的实例分配 id。:-)

我的问题：

*   有人有过这样的事情吗？

*   有人可以告诉我在 Hibernate 中的哪个位置设置了 ID 吗？所以我可以调试那部分代码并找出它为什么会跳过分配。IntelliJ 似乎并没有打破实体中字段的修改。

编辑 - 环境配置

*   操作系统：LMDE amd64
*   数据库：MySQL (5.1.61-2) ConnectJ (5.1.17)
*   JVM：1.7.0_04
*   休眠：4.1.4.Final
*   春天：3.1.1

编辑 - 代码

*所有*实体类都是 Bar 的（内）直接子类。只有一个地方定义了@Id。并且有一些相同的 Bar2 案例*确实*获得了 id。但特别是 Bar2 没有。

最终 Bar1 bar = new Bar1(); JpaTemplate.merge(bar); <-- 得到一个 id

最终 Bar2 bar = new Bar2(); JpaTemplate.merge(bar); <-- 没有id

该应用程序使用 Spring 的 JpaTemplate 来合并实体。对于该特定类的所有例外情况，它都可以正常运行。

所以，如果我能找到分配 id 的 Hibernate 类，我可能会发现我忽略了哪些愚蠢的细节。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:05:01.117

首先注意： JpaTemplate 已弃用，不应再使用。它只是委托给 EntityManager 的`merge()`方法，并且都返回一个实体。

以下是 JPA 规范关于合并的内容：

> 如果 X 是一个新的实体实例，则创建一个新的托管实体实例 X'，并将 X 的状态复制到新的托管实体实例 X'。

因此，如果生成了 ID，它将分配给附加的实体，而不是您传递给 merge 方法的对象。因此，您永远不应该忽略 merge 方法的结果。代替

```
jpaTemplate.merge(bar); 
```

你应该做：

```
bar = jpaTemplate.merge(bar); 
```

此外，JPA 规范还说

> 在数据库插入发生之前，不能保证生成的 id 可用。

这可能是您没有身份证的另一个原因。AFAIK，使用 MySQL 的 AUTO 策略，依赖于数据库中的自动增量 ID 列，并且只有在插入完成后才能获取 ID 的值，并且 Hibernate 一直等到绝对需要刷新，因此执行插入。如果您确实需要在合并后立即拥有 ID，请执行以下操作：

```
bar = jpaTemplate.merge(bar);
jpaTemplate.flush();
Long id = bar.getId(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:45:07.923

找到了 ！合并发生在@Transactional 注释的重载方法中。我假设重载方法将“继承”注释。显然情况并非如此。

通过使用 @Transactional 注释重载方法，它似乎可以工作。

知道这将是一件愚蠢的事情......

# php - PHP - 通过 fread 下载文件，保留上次修改时间

> ID：10883543
> 
> 赞同：2
> 
> 时间：2012-06-04T15:04:49.047
> 
> 标签：php, download, fread, filemtime

以下脚本（只是相关部分）让我下载文件：

```
if ($file = fopen($file, 'r'))
{
    if(isset($_SERVER['HTTP_RANGE']))
    {
        fseek($file, $range);
    } 
    while(!feof($file) && 
        (!connection_aborted()) && 
        ($bytes_send<$new_length))
    {
        $buffer = fread($file, $chunksize);
        print($buffer); //echo($buffer); // is also possible
        flush();
        $bytes_send += strlen($buffer);
    }
    fclose($file);
} 
```

这样做，下载的文件将显示实际时间作为其创建时间。

我想知道如何保存它在服务器上的最后一个修改文件。

我知道我可以使用 filemtime 获取信息，但我不知道如何将它与上面的脚本结合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:49:11.663

Before sending any output, do

```
header("Last-Modified: " . gmdate("D, d M Y H:i:s", filemtime($file)) . " GMT"); 
```

I don't think this will cause a web browser to save the file locally with that modification time. I think you need to use some type of archive format for that, like zip.

# jquery - jQuery 动画边框

> ID：10883545
> 
> 赞同：0
> 
> 时间：2012-06-04T15:04:53.153
> 
> 标签：jquery, jquery-animate, border

嗨，我正在尝试为输入的边框设置动画，但无论我如何放置边框，它似乎都没有动画。

我当前的代码：

`$(this).animate({border : '1px solid #f00'}, 'slow', 'linear');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:07:03.017

您需要一次为一个参数设置动画。

```
border-width : '1px' 
```

或者

```
border-color : '#f00' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T23:15:33.053

您必须在完整的 jquery 中设置边框颜色和样式 css 属性：

```
$(this).css({borderColor:"#f00",borderStyle:"solid"}).animate({borderWidth : '3px'}, 'slow', 'linear'); 
```

您需要 jquery 中的动画边框颜色插件，请检查： http: [//www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

然后..

```
$(this).animate({borderColor: '#f00'}); 
```

也许这可以帮助某人...

# sql - Access 2007 左连接不起作用

> ID：10883546
> 
> 赞同：0
> 
> 时间：2012-06-04T15:04:54.983
> 
> 标签：sql, ms-access, join

我有 2 张桌子。表 1 是 tbl_DaysWeeksMonths，其中每个日期都有一行，它是相应的周结束日期和日历月。表 2 是 tbl_CallStats，它显示每个座席每天的一条记录及其相应的呼叫计数和统计信息等。并非所有顾问都有一周中每一天的记录。

左侧是表 1 (tbl_DaysWeeksMonths)，其中包含 Date、Week Ending、Month 列。右侧是表 2 (tbl_CallStats)，其中包含 row_date、agent、logid、total call、通话时间等列。

我想将 tbl_CallStats 链接到 tbl_DaysWeeksMonths 以便为每个代理（基于 tbl_DaysWeeksMonths）显示日期记录，即使他们在特定日期没有接听电话。

我尝试进行左连接，但它仍然只显示通话天数的记录。我觉得我在这里错过了一些简单的东西。请帮忙。

```
SELECT Date,[Week Ending],tbl_CallStats.agent
FROM tbl_DaysWeeksMonths
LEFT JOIN tbl_CallStats
ON tbl_DaysWeeksMonths.Date = tbl_CallStats.row_date
GROUP BY Date, Week, agent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:26:51.710

此查询获取所有天数，并应显示 tbl_CallStats 中的所有代理呼叫。这考虑到每天和代理在 tbl_CallStats 中总会有一行。

```
"select tbl_DaysWeeksMonths.Date, tbl_DaysWeeksMonths.WeekEnding, tbl_DaysWeeksMonths.Month, 
tbl_CallStats.agent, tbl_CallStats.logid, tbl_CallStats.totalcalls, tbl_CallStats.talktime
from tbl_DaysWeeksMonths
left join tbl_CallStats on tbl_CallStats.row_date = tbl_DaysWeeksMonths.Date
group by tbl_CallStats.agent, tbl_DaysWeeksMonths.Date " 
```

如果您在没有呼叫时只是在 tbl_CallStats 中没有记录，那么您可以为代理提供另一个表并获取与它们相关的值，例如，选择每天加入所有代理的所有日期，然后将连接留给 callstats。 ..

# javascript - 在所有前置元素上调用 JSON.stringify

> ID：10883553
> 
> 赞同：0
> 
> 时间：2012-06-04T15:05:14.203
> 
> 标签：javascript, jquery, google-code-prettify

我正在尝试 JSON.stringify`<pre>`具有指定类的文档中元素中的所有 JSON 文本，然后使用 google-code-prettify 添加语法着色。由于我不知道 Javascript 或 jQuery，我正在苦苦挣扎 - 到目前为止，我所拥有的只有以下内容：

```
<body onload="prettyPrint()">
    ...
    <pre class="prettyprint lang-js">{...}</pre>
    ...
</body>
<script>
    $('[class="prettyprint lang-js"]').next().text("TEST"); // call JSON.stringify()?
</script> 
```

漂亮的打印工作，但我不知道如何调用 JSON.stringify 甚至只是选择正确的元素。

更具体地说，我想要对`<pre>`文档中具有“prettyprint lang-js”类的所有元素，我想用调用`JSON.stringify`该文本的结果替换文本内容，然后调用
google-code-美化 `prettyPrint()' 以对其进行语法着色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:09:13.040

您可以使用类选择器通过类名选择任何元素。试试这个。

```
$('.prettyprint.lang-js').each(function(){
    var $this = $(this);
    $this.text(JSON.stringify($this.text()));
});

//Now you can call prettyPrint
prettyPrint(); 
```

# sparql - 音乐节的语义网络数据库？

> ID：10883558
> 
> 赞同：2
> 
> 时间：2012-06-04T15:05:40.543
> 
> 标签：sparql, semantic-web, dbpedia

我正在尝试使用 DBPedia 返回主要英国音乐节的列表（特别是在[此 Wikipedia 模板](http://en.wikipedia.org/wiki/Template%3aMajor_British_Music_Festivals)中定义的音乐节）及其过去二十年的日期/地点，但是，我正在查找实际数据（特别是关于日期) 有所限制。

任何人都知道这种任务比 DBPedia 更好的资源吗？或者，是否有某种方法可以使用我缺少的 DBPedia 收集这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:39:34.883

我不知道关于英国音乐节的更好的 RDF 资源。但是，这通常是当您从 DBPedia 等通用数据源获取特定主题时。如果您对“英国音乐节”等特定事物充满热情，我建议您构建自己的 RDF 数据集并将其发布到某个地方。其他与您有同样热情的人可能会来帮助您。如果您知道一个网站，其中包含您需要的所有 HTML 信息，那么您可能只需“抓取”即可获得所需的大部分信息。有没有关于“英国音乐节”的网站？

# ios - 登录会话 facebook / 上传照片

> ID：10883559
> 
> 赞同：0
> 
> 时间：2012-06-04T15:05:42.573
> 
> 标签：ios, objective-c, facebook, photo, facebook-wall

我有一个问题，我尝试将 facebook 集成到应用程序中，为此我遵循[教程](http://www.devapp.it/wordpress/t030-aggiungiamo-facebook-alle-nostre-applicazioni.html)

我以这种方式登录

```
_facebook = [[Facebook alloc] initWithAppId:kAppId];
[_facebook authorize:_permissions delegate:self]; 
```

我的问题是，有办法维持登录会话吗？现在每次我想在 fb 墙上发帖时，我都必须登录然后发帖。最后一个问题是，我可以在墙贴上的网络图像中发布本地图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:31:43.277

因为每次你都在创建 _facebook 对象。之后，您将调用以下方法。 `[_facebook authorize:_permissions delegate:self];`

因此，为了解决您的问题，在成功登录调用代码后维护一个会话，如下所示，

```
if(session)
 // write code here for post to wall
else
 // write your code for authentication 
```

为了更好地理解，您可以按照本教程[在 iOS 应用程序中轻松集成 Facebook](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)

# c# - 尝试实现 CustomObjectEvent 处理程序

> ID：10883561
> 
> 赞同：0
> 
> 时间：2012-06-04T15:05:52.820
> 
> 标签：c#, asp.net, kentico

我基本上遵循本[指南](http://devnet.kentico.com/docs/devguide/index.html?event_handlers_overview.htm)，除了我正在为对象而不是文档编写代码。这是我的代码：

```
using CMS.TreeEngine;
using CMS.SettingsProvider;

[CustomObjectEvents]
public partial class CMSModuleLoader
{
    /// <summary>
    /// Attribute class that ensures the loading of custom handlers
    /// </summary>
    private class CustomObjectEventsAttribute : CMSLoaderAttribute
    {
        /// <summary>
        /// Called automatically when the application starts
        /// </summary>
        public override void Init()
        {
            // Assigns custom handlers to the appropriate events
            ObjectEvents.GetContent.Execute += Category_Get_Content; //error is here

        }

        private void Category_Get_Content(object sender, DocumentEventArgs e)
        {
            // Add custom actions here
        }

    }
} 
```

上面的行抛出编译时错误：

错误 1 ​​无法将方法组“Category_Get_Content”转换为非委托类型“CMS.SettingsProvider.SimpleObjectHandler”。您是否打算调用该方法？C:\APPLICATIONS\DEVELOPMENT\KENTICO6\WebPartDev\wwwroot\App_Code\Blank Site\SearchByCategory.cs 22 40 C:...\wwwroot\

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:15:24.207

我不得不更改`DocumentEventArgs`为`ObjectEventArgs`Category_Get_Content 方法。

# c# - 打开带有凭据的 URL

> ID：10883565
> 
> 赞同：1
> 
> 时间：2012-06-04T15:05:57.703
> 
> 标签：c#, url, webbrowser-control

我们有一个知识库，我们想从我们的桌面应用程序链接以获得帮助。

我尝试使用默认的 Web 浏览器打开它，但我们设置了 .htaccess 凭据，因此会提示它们。我不希望他们必须输入用户名和密码，因为我们只是为应用程序设置一个。

这会导致它们每次都被提示：

```
Dim url = "http://mysite.com/index.php?/category/40/0/10/"
Process.Start(url) 
```

我不能再把用户名和密码放在 url 中，因为 IE9 不支持它：

[http://username:pass@url.com](http://username:pass@url.com) <-- 较新的浏览器不支持

我尝试使用 webbrowser 控件，但它使用的是 IE4 而不是当前的任何东西。这导致它显示不正确。

```
Dim hdr = "Authorization: Basic " + Convert.ToBase64String(Encoding.ASCII.GetBytes("myuser" + ":" + "password")) + System.Environment.NewLine
WebBrowser1.Navigate(Url, Nothing, Nothing, hdr) 
```

我试图让注册表设置强制 IE9，但我无法让它工作。此外，根据我的阅读，如果他们没有 IE9 也没关系。

关于如何解决这个问题的任何建议？我只想从我的应用程序中打开一个安全网页！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:30:33.893

在进一步编码之前，您可以搜索以了解基本身份验证的工作原理。您可以使用 HttpAnalyzer 或任何其他工具来查看浏览器如何在其请求的标头中发送用户名和密码。他们只是使用标头的身份验证部分。您必须构建一个新请求或找到一个现成的框架来为您执行此操作。

基本身份验证通常由 2 个请求/响应组成。浏览器一开始对身份验证一无所知，但服务器会用 401 回复代码通知他，这意味着浏览器应该提供身份验证。从现在开始，所有请求都有一个使用 Base64 编码的 Authentication 标头，其中包含用户名和密码。

# r - 在 ubuntu 上构建 R (cran) + rpy2 -> libRblas.so 未找到

> ID：10883569
> 
> 赞同：4
> 
> 时间：2012-06-04T15:06:17.037
> 
> 标签：r, ubuntu, building, rpy2

我正在尝试在 ubuntu（11.04，natty narwhal）上构建 R（尝试 2.14.2 和 2.15）和 rpy2（2.2.6，python 2.7.1），以将其部署到自定义目录（以下称为 /home/ me/lib/R)，因为我没有 root 访问权限，但需要比服务器上可用的更新版本。

构建等的详细信息进一步下降，但即使在运行 rpy2 的测试时，我总是会收到以下错误：

```
/home/me/lib/pythonlib/lib/python/rpy2/rinterface/__init__.py in <module>()
---> 87 from rpy2.rinterface._rinterface import *
ImportError: libRblas.so: cannot open shared object file: No such file or directory
WARNING: Failure executing file: <experiments/arrangement/test_smacof_arrange.py> 
```

我确定我正在调用正确的 rpy2 模块（我的定制模块），该模块是针对定制构建的 R 版本构建的。为此，我正在执行以下操作：

1.  我首先在 ubuntu 上构建 R-base

    ```
    wget http://cran.r-project.org/bin/linux/ubuntu/natty/r-base_2.14.2.orig.tar.gz
    # untar and go to directory

    # enable-R-shblib flag is needed for rpy2 linking, enable-BLAS-shlib was included
    # because I hoped to solve the problem, which doesnt change anything however
    ./configure --enable-R-shlib --enable-BLAS-shlib --prefix=/home/me/lib/R
    make
    make install 
    ```

2.  然后我针对这个 R 构建构建 rpy2

    ```
    wget http://pypi.python.org/packages/source/r/rpy2/rpy2-2.2.6.tar.gz
    # untar and go to directory

    # build rpy2, by providing the r-home-lib and r-home flags, and deploy to custom dir
    python setup.py build --r-home /home/me/lib/R --r-home-lib /home/me/lib/R/lib64/R/lib install --home /home/me/lib/pythonlib 
    ```

    我还调整了我的 pythonpath 以在 /home/me/lib/pythonlib 中查找模块，所以问题不存在。python构建返回正确的配置（注意Rblas出现在这里！）

    ```
    Configuration for R as a library:
    include_dirs: ('/home/me/lib/R/lib64/R/include',)
    libraries: ('R', 'Rblas', 'Rlapack')
    library_dirs: ('/home/me/lib/R/lib64/R/lib',)
    extra_link_args: () 
    ```

我试图追查错误，但没有结束。/home/me/lib/R/lib64/R/lib 包含 libRblas.so，但是有一件事情看起来很奇怪，那就是 libRblas.so 没有与 libR.so 正确链接，但我不确定是否这会导致错误，我也不知道如何修复它。

```
>> ldd -d libR.so

linux-vdso.so.1 =>  (0x00007fffcec58000)
libRblas.so => not found
libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007fe63d21d000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fe63cf97000)
... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-26T00:13:43.043

对于遇到此问题的其他人，我可以通过确保将 R 库添加到我在 bashrc 中的库路径中来解决它：

```
export LD_LIBRARY_PATH="R-install-location/lib65/R/lib:$LD_LIBRARY_PATH" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:01:36.080

简要地：

1.  为什么要在 Ubuntu 上构建 R？[只需按照http://cran.r-project.org/bin/linux/ubuntu](http://cran.r-project.org/bin/linux/ubuntu)上的自述文件从 CRAN 存储库中获取现有和当前的二进制文件——这些是通过 CRAN 提供的当前 Debian 软件包的端口，以克服正常的 Ubuntu 发布滞后。

2.  每当我需要 Ubuntu 上的更新（小）包时，我只需获取 Debian 包源并在 Ubuntu 上重建它们。网上应该有大量关于如何构建包的 HOWTO；最低要求是 a) 关闭三元组 .orig.tar.gz、.diff.gz 和 .dsc 并用于`dpkg-sourcepackage -x *.dsc`展开，然后 b) 切换到目录并运行`sudo debian/rules binary`（前提是您已安装所有 Build-Depends: 软件包）。您甚至可以使用`apt-get`为您执行这些步骤，但它有点超出了这个问题的范围......

# lua - Corona 中的按钮移除

> ID：10883570
> 
> 赞同：1
> 
> 时间：2012-06-04T15:06:18.047
> 
> 标签：lua, coronasdk

我正在尝试在我正在开发的应用程序中使用按钮来嵌套页面等。但是，作为一个小部件，它会继续存在，并且必须使用 display.remove() 或 :removeSelf 将其删除。我试图让这些按钮在按下它们并加载下一页时从视图中删除/删除，但是当我这样做时它要么不起作用，要么引发运行时错误。建议？

编辑：这是我目前使用的，虽然它让按钮在点击后永久消失。`

```
local onButtonEvent = function (event )
    if event.phase == "release" then
        display.remove( myButton )
        myButton = nil
        display.remove( buttonGroup )
        buttonGroup = nil
        storyboard.gotoScene( "shape" )
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T04:39:49.140

这将在 lua/Corona 中工作：

```
 MyButton:removeSelf( ) 
```

完全删除它。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:35:10.717

这是另一种方式。为什么不设置

```
myButton.isVisible = false 
```

在您的 onButtonEvent 函数中。

而且我从未使用过 StoryBoard，但我很确定当你进入场景时会触发一个事件（我认为是“willEnterScene”）。

所以你可以在`mybutton.isVisible = true`那里设置

# jquery - jQuery popover 不会第二次加载

> ID：10883577
> 
> 赞同：1
> 
> 时间：2012-06-04T15:06:39.927
> 
> 标签：jquery, popover

我在我的页面上使用此弹出框：[https](https://github.com/klaas4/jQuery.popover) ://github.com/klaas4/jQuery.popover 我有多个具有不同内容和触发器的弹出框实例。这是我的 JavaScript 说明当我按下链接时会发生什么

```
$(".addWorker").popover({
    title: "Worker",
    content: "Laddar..."
});

$(".addWorker").click(function (event) {
    event.preventDefault();
    $(this).popover(
        'ajax',
        "/jobs/AddWorker?jobid=" + $(this).attr("id")
    ).popover('show');
});

$(".markAsFinished").popover({
    title: "Finished",
    content: "Laddar..."
});

$(".markAsFinished").click(function (e) {
    e.preventDefault();
    $(this).popover( 
```

Uncaught TypeError: Object [object Object] has no method 'popover' (repeated 3 times) 'ajax', "/jobs/MarkAsFinished?jobid=" + $(this).parent().parent().attr("data -jobid") + "&userid=" + $(this).parent().parent().attr("data-userid") ).popover('show'); });

现在这在我第一次单击链接时效果很好，并且弹出窗口出现了。内容被加载并在弹出框内呈现。但是当我想打开另一个弹出窗口（按下另一个链接）时，它卡在“加载”并且没有加载任何内容。如果我刷新页面，相同的链接效果很好。Chrome 开发人员工具告诉我以下内容：

```
Uncaught TypeError: Object [object Object] has no method 'popover' 
```

我不知道如何解决这个问题，所以任何帮助表示赞赏。

# php - 多条件php/mysql

> ID：10883583
> 
> 赞同：0
> 
> 时间：2012-06-04T15:07:13.610
> 
> 标签：php, mysql, sql

我正在对 php/mysql 进行多标准搜索，此搜索有 5 个条目： - 类型、最低价格 - 最高价格、最低数量 - 最高数量：

```
$Type = $_POST['Type'];
$Pmin = $_POST['Pmin'];
$Pmax = $_POST['Pmax'];
$Qtmin = $_POST['Qtmin'];
$Qtmax = $_POST['Qtmax'];
$query = "SELECT * FROM products where type_product='$Type' 
and price_min<='$Pmin' 
and price_max>='$Pmax'  
and qty_min<='$Qtmin' 
and qty_max>='$Qtmax' " ; 
```

这工作得很好，但用户必须填写所有条目。我的想法是用户只能输入类型，或者类型和价格，或者只输入数量等等。我尝试使用 OR 子句，但我没有让它很好地工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T15:08:46.150

将您的查询分成几部分。在这种情况下使用查询程序集类更容易。当然还有 PDO。

```
$query->select('columns from MyTable')
 ->where('deleted = 0');

if (condition) {
  $query->where('field = ?', $value);
}

if (condition) {
  $query->where('field != ?', $value);
}

$results = $query->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:11:14.583

```
where 
    (a =  '$a' or '$a' = '')
and (b <= '$b' or '$b' = '')
and (c >= '$c' or '$c' = '') 
```

请注意，如果变量是空字符串，则始终满足其条件。

# asp-classic - 按日期对二维数组进行排序

> ID：10883588
> 
> 赞同：0
> 
> 时间：2012-06-04T15:07:28.627
> 
> 标签：asp-classic

我有一个二维数组。一维是日期，另一维是名称。

我正在尝试按最新日期对这些数组值进行排序。

我看了几个例子，我想出了这个。

但是日期没有正确排序。

```
 DataMax = uBound(sDateArray)-1

For i = 0 to DataMax
    For j = i + 1 to DataMax 
        If DateDiff("s", DataArray(j, 0), DataArray(i, 0)) > 0 Then
            TemporalVariable    =   sDateArray(i, 0)
            sDateArray(i, 0)        =   sDateArray(j, 0)
            sDateArray(j, 0)        =   TemporalVariable
        End If
    Next 
Next

    For i=0 to DataMax
      Response.write (sDateArray(i) & "<BR>") 
    next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:49:33.777

本文展示了经典 ASP 中的排序：[http ://www.4guysfromrolla.com/webtech/062701-1.shtml](http://www.4guysfromrolla.com/webtech/062701-1.shtml)

总之，这是排序部分（只需将字符串比较替换为日期比较）：

```
Sub SortArray(aTempArray) 
  Dim iTemp, jTemp, strTemp

  For iTemp = 0 To UBound(aTempArray)  
    For jTemp = 0 To iTemp  

      If strComp(aTempArray(jTemp), aTempArray(iTemp)) > 0 Then
        'Swap the array positions
        strTemp = aTempArray(jTemp) 
        aTempArray(jTemp) = aTempArray(iTemp) 
        aTempArray(iTemp) = strTemp 
      End If 

    Next 
  Next 
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:14:25.027

我实际上找到了一个在线示例。它不是一个功能，它是一个子，但它工作正常。其他建议总是受欢迎的。

```
Sub DataSorter(arrArray)
    Dim row, j, StartingKeyValue, StartingOtherValue, _
        NewStartingKey, NewStartingOther, _
        swap_pos

    For row = 0 To UBound(arrArray)-1
        StartingKeyValue = arrArray(row, 0)
        StartingOtherValue = arrArray(row, 0)
        NewStartingKey = arrArray(row, 0)
        NewStartingOther = arrArray(row, 0)
        swap_pos = row
        For j = row + 1 to UBound(arrArray)
            If arrArray(j, 0) > NewStartingKey Then
                swap_pos = j
                NewStartingKey = arrArray(j, 0)
                NewStartingOther = arrArray(j, 0)
            End If
        Next    
        If swap_pos <> row Then
            arrArray (swap_pos, 0) = StartingKeyValue
            arrArray (swap_pos, 0) = StartingOtherValue            
            arrArray (row, 0) = NewStartingKey
            arrArray (row, 0) = NewStartingOther     
        End If  
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T15:11:57.333

该循环不是正确的排序算法。

[http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)

# linux - 我的 rc.local 文件有什么问题（Ubuntu）？

> ID：10883589
> 
> 赞同：4
> 
> 时间：2012-06-04T15:07:29.227
> 
> 标签：linux, ubuntu, startup, boot

我有一个通过 rc.local 启动的 python 守护进程。这个具有相同权限的相同脚本安装在我拥有的其他几个 Ubuntu 机器上。它在这些安装上运行没有问题。也就是说，重启盒子后，守护进程正在运行。

但是，通过这个特定的安装，当我登录并检查进程是否存在时，守护进程并未运行。系统之间的 rc.local 文件是相同的（或至少足够接近）：

```
localaccount@sosms:~$ cat /etc/rc.local
#!/bin/sh -e
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.

python /var/www/myDaemon/Main.py > /var/log/somelog.txt

exit 0 
```

权限是：

```
localaccount@sosms:~$ ls -la /etc/rc.local
-rwxr-xr-x 1 localaccount localaccount 370 Jun  3 11:04 rc.local 
```

我使用此测试 rc.local 测试了 rc.local 进程是否正在执行：

```
localaccount@sosms:/var/log/sosmsd$ cat /etc/rc.local
#!/bin/sh -e
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.

echo "test" > /home/localaccount/test1
/usr/bin/python /var/www/sosms/sosmsd/Main.py > /var/log/sosmsd/log/log
echo "test" > /home/localaccount/test2

exit 0
localaccount@sosms:/var/log/sosmsd$ 
```

并且只有第一个测试文件（test1）在重启盒子后被创建。我猜这意味着 python 行引起了某种问题，但我在 /var/log/sosmsd/log/log 中没有输出：

```
localaccount@sosms:~$ ls
test1 
```

**更新：**

然后我听从了 larsks 的建议，并确定我在启动 python 脚本时遇到了这个错误：

```
mysql_exceptions.OperationalError: (2002, "Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)") 
```

这是否意味着 rc.local 在 MySQL 有机会被初始化之前被执行？我从这里去哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T17:08:52.097

回答的其他人错过的一件事是在启动时运行的 rc、init 等脚本中，PATH 变量可能会或可能不会被初始化（永远无法保证），这意味着只需执行“python somescript.py”而不是/usr/bin/python 可能并不总是有效。始终对 init 脚本和 rc 脚本中的所有内容使用绝对路径。

是的，很可能 rc.local 在 mysqld 启动之前运行。您需要将其设置为 init.d 脚本，并在标题中使用 insserv 样式的注释来告诉它需要哪些依赖项。[http://manpages.ubuntu.com/manpages/lucid/man8/insserv.8.html](http://manpages.ubuntu.com/manpages/lucid/man8/insserv.8.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T15:26:15.107

Python exceptions -- and most other error messages -- go to `stderr`, but you're only redirecting `stdout`. You should be running your service like this:

```
python /var/www/myDaemon/Main.py > /var/log/somelog.txt 2>&1 
```

The `2>&1` tells the shell to send `stderr` output to the same place as `stdout`. Do this and post any error messages you see if the problem doesn't end up being obvious.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T19:51:04.610

`/etc/init.d/mydaemon`您应该从可用的骨架中为您的守护程序创建一个初始化脚本。

然后您将能够设置它的启动顺序，以便 MySQL 已经可用。

这是一个[很好的起点](http://samcaldwell.net/index.php/technical-articles/3-how-to-articles/29-how-do-i-create-an-automatic-startup-script-in-ubuntu-linux)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-29T09:04:00.677

我的朋友。我花了几天时间来解决这个错误。幸运的是，我找到了解决方案。

```
sudo -u www -i /the/path/of/your/script 
```

请首选sudo手册~ -i [命令] -i（模拟初始登录）选项将目标用户的密码数据库条目指定的shell作为登录shell运行...

你可以更喜欢我在这里发布的内容：[Run script with rc.local: script works, but not at at boot](https://stackoverflow.com/questions/7783341/run-script-with-rc-local-script-works-but-not-at-boot/25011567#25011567)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T22:10:14.767

来自 mysql 文档： [C.5.2.2。无法连接到 [本地] MySQL 服务器](http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html)

错误 (2002) Can't connect to ... 通常意味着系统上没有运行 MySQL 服务器，或者您在尝试连接到服务器时使用了不正确的 Unix 套接字文件名或 TCP/IP 端口号。您还应该检查您正在使用的 TCP/IP 端口是否未被防火墙或端口阻止服务阻止。

“/var/run/mysqld/mysqld.sock”文件是否存在？

mysql 服务器是否与 python 守护进程在同一台服务器上运行？

你看过mysql的日志吗？

它应该位于`/var/log/`

命名为：
mysql.log
mysql.err
mysqld.log
mysqld.err

```
$ sudo ls -l /var/log/
// when you have the name try
$ sudo tail -n 50 /var/log/LogName 
```

一种可能性是您的磁盘空间不足，请尝试：

```
$ sudo df -h 
```

查看第 4 列“Avail”

另一种可能性是文件夹权限，请尝试：

```
$ sudo ls -l /var/lib/ 
```

您应该看到如下内容：

```
drwxr-xr-x 33 mysql     mysql   4096 May 22 10:02 mysql 
```

您很可能希望所有者和组是“mysql”，如果不是，您可以尝试：

```
$ sudo chown -R mysql:mysql /var/lib/mysql 
```

首先记下原始设置，以便在没有帮助时将其更改回来。“-R”表示递归更改子文件夹和文件的所有权。

权限应该是 rwxr-xr-x (755)，如果不是你可以试试：

```
$sudo chmod 755 /var/lib/mysql 
```

我不会递归地这样做，大多数文件和文件夹应该只能由 mysql 用户访问，可能是 mysql 组，并且只能读/写不可执行。

# sql-server - 我可以使用第一列的 where 语句吗？

> ID：10883591
> 
> 赞同：3
> 
> 时间：2012-06-04T15:07:39.287
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

> **可能重复：**
> [是否可以使用列序号位置选择 sql server 数据](https://stackoverflow.com/questions/368505/is-it-possible-to-select-sql-server-data-using-column-ordinal-position)

不确定标题是否有帮助，但我正在尝试创建一个通用函数，我想知道是否可以在 WHERE 语句中使用列位置而不是列名。所以例如

`SELECT * FROM table WHERE myID=1`

会变成这样

`SELECT * FROM table WHERE [0]=1`

这有意义吗？可行吗？多谢你们。

顺便说一句 - 使用 MSSQL 2005-2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:03:34.213

I think you must get column name of column position and generate execute query with column name. below code help you to get column name of column position and Execute your Query:

```
Declare @TableName  VarChar(100)
Declare @ColumnPosition int

Set @TableName = 'Table1'
Set @ColumnPosition = 1

Declare @ColumnName VarChar(250)
SELECT @ColumnName  = COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @TableName and ORDINAL_POSITIO = @ColumnPosition

Declare @Query VarChar(250)
Set @Query = 'Select * From ' + @TableName + ' Where '+ @ColumnName + ' = 1'
Exec (@Query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:13:30.627

我认为这是不可能的，但您可以在字符串中动态创建查询并使用 EXEC 运行它。

```
 DECLARE @query VARCHAR(100)
    SET @query = 'SELECT * FROM Table WHERE field = ' + CONVERT(VARCHAR(10), 100)
    EXEC (@query) 
```

# jquery - 如何在jsp中使用jquery提交表单

> ID：10883592
> 
> 赞同：2
> 
> 时间：2012-06-04T15:07:39.893
> 
> 标签：jquery, asp.net-mvc, jsp, post

在 ASP.net MVC 中，我们可以使用以下代码段将更改密码数据发送到控制器。在控制器中，我们可以将发布的数据转换为 ChangepasswordReq 对象，然后我们就可以做我们的事情了。现在我正在**jsp**中寻找与此等效的内容。如何从客户端通信到服务器端？我想传输一个带有多个控件的更大表单。（我只使用 html 来构建我的页面）。任何帮助都将是可观的。

```
 var ChangeReq = { CurrentPassword: epwd, NewPassword: newpwd }
 var jsondata = JSON.stringify(ChangeReq)

            $.ajax({
                type: 'POST',
                url: "/Account/ChangePassword",
                cache: false,
                timeout: 10000,
                contentType: "application/json; charset=utf-8",
                success: function (_results) {
                    //do something

                },
                error: function (_results) {
                   //do something
                }
            });

  [HttpPost]
  public ActionResult ChangePassword(ChangepasswordReq _ChangepasswordReq)
  {
     //do the business
  }

  public class ChangepasswordReq
    {
        public String CurrentPassword { get; set; }
        public String NewPassword { get; set; }
    } 
```

* * *

我尝试了以下方法。但就我而言，我正在动态生成一些控件。由于动态控件的数量不同，我无法在控制器中正确获取它们。jsp中是否有更好的方法来进行url路由，如asp.net MVC。（比**@RequestMapping（value =“/ChangePassword”，method = RequestMethod.POST**））如何在jsp中正确使用jquery。（请帮助我在客户端和服务器端代码中）

```
@RequestMapping(value = "/ChangePassword", method = RequestMethod.POST)
    public String home(@RequestParam("Currentpasswordtxtboxname") String Currentpassword,@RequestParam("NewPasswordtextboxname") String Newpassword, Locale locale, Model model) {
// do business
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:15:12.290

我在[这里](http://www.programming-free.com/2012/09/ajax-with-servlets-using-jquery-and-json.html?showComment=1350468049308#c5285910718433761568)找到了一些东西。

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
$(document).ready(function() {
    function Savedata() {  
    Var data={Username:$("#txtUsername").[0].value, CurrentPassword:  $("#txtCurrentpwd").[0].value, NewPassword: $("#txtNewpwd").[0].value }

   jsondata=Json.stringify(data);
   $.get('ActionServlet',jsondata,function(responseJson) {   
        //do something with response json
        });
    });
});         
 //Can use Jquery post also as in question
</script> 
```

在服务器端，我们可以将参数设置为

```
 protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException 
 {
  String Username =request.getParameter("Username");
  String CurrentPwd =request.getParameter("CurrentPassword");
  String Newpwd =request.getParameter("NewPassword");
 } 
```

在 web.xml 文件中

```
<servlet>
  <servlet-name>ActionServlet</servlet-name>
  <servlet-class>MyProject.ActionServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>ActionServlet</servlet-name>
  <url-pattern>/ActionServlet/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:32:39.977

jquery对于发送到jsp、asp或者php是相等的，服务器端谁改。也许正确的答案是如何在jsp中recib数据。

# android - 为网络事件注册自定义广播

> ID：10883593
> 
> 赞同：0
> 
> 时间：2012-06-04T15:07:40.480
> 
> 标签：android, broadcastreceiver

我正在尝试在我的 Android 应用程序中使用第三方 SIP 实现。由于我想支持早于 2.3 的版本，我不能使用 SIP 框架构建到 Gingerbread 中。
我是否需要一个持续运行的服务来监听 SIP 呼叫？

据我所知，服务并不意味着持续运行，并且监听来电或短信等事件是由系统本身完成的，它将在系统范围内广播。如果我错了，请纠正我。

# ember.js - 使用 Ember.js 编写和提交表单视图

> ID：10883597
> 
> 赞同：4
> 
> 时间：2012-06-04T15:08:03.137
> 
> 标签：ember.js

我正在做一个概念验证演示，我需要编写一个表单视图，它可以让我将项目添加到我的内容数组中。我在外部加载这个视图，然后使用处理程序编译它。我添加了一个提交方法并使用了 {{action}} 绑定，但每次单击提交按钮时它都会重新加载页面。我错过了什么？

// 模板

```
<form>
    <div>
        <label for="client">Client Name</label>
        <input type="text" id="client" placeholder="Add client name" />
    </div>
    <div>
        <button {{action "addClientSubmit" target="PM.addClientView"}}>Add Client</button>
    </div>
    <div>
        <a href="#" {{action "closeWindow" target="PM"}}>close</a>
    </div>
</form> 
```

// 视图代码

```
PM.addClientView = Ember.View.create({
    templateName: 'addClient',
    classNames: 'overlay',
    addClientSubmit: function(e){
        e.preventDefault();
        console.log('submitting add client form');
        console.log(a,b,c)
    }
}); 
```

// 最后这是我将它添加到页面的方式

```
PM = Ember.Application.create({
    loadView: function(view){
        $.ajax({
            url: viewPath,
            success: function (template) {
                if (!Ember.TEMPLATES[templateName]) {
                    Ember.TEMPLATES[templateName] = Ember.Handlebars.compile(template);
                };
                PM[view + 'View'].appendTo('body');
            }
        });
    }
}); 
```

其他一切正常，但是当我单击提交按钮时，页面会重新加载。我确定我遗漏了一些东西，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T17:49:29.697

您可能需要添加`type="button"`到您的按钮标签。默认设置是`type="submit"`触发表单提交。

这是一个 jsFiddle：http: [//jsfiddle.net/b2CTg/2/](http://jsfiddle.net/b2CTg/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:54:41.310

问题是创建 PM.addClientView 时模板不存在。

尝试更改`PM.addClientView = Ember.View.create({`为`PM.addClientView = Ember.View.extend({`

和你的成功功能

> PM[view + 'View'].create({ template: Ember.Handlebars.compile(template) }).append();

这是一个小提琴：http: [//jsfiddle.net/7E5zt/](http://jsfiddle.net/7E5zt/)

# ruby - 通配符 ** 如何在 fnmatch 中工作？

> ID：10883600
> 
> 赞同：4
> 
> 时间：2012-06-04T15:08:13.553
> 
> 标签：ruby, wildcard, matching

我注意到`fnmatch`Ruby 函数的一个令人惊讶的行为：

```
File.fnmatch('**.rb', 'main.rb')                    #=> true
File.fnmatch('**.rb', './main.rb')                  #=> false 
```

至于[Ruby 参考](http://ruby-doc.org/core-1.9.3/File.html#fnmatch-method)中的解释，`**`将：

> 递归匹配目录或扩展文件。

那么为什么它不扩展和匹配`./main.rb`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T15:42:08.203

这种行为实际上已[记录在案](http://ruby-doc.org/core-1.9.3/File.html#method-c-fnmatch)，但很容易错过。埋在它说的例子中：

> 默认情况下，通配符与前导句点不匹配。

要启用此行为，您需要指定**File::FNM_DOTMATCH**标志：

```
File.fnmatch('**.rb', './main.rb', File::FNM_DOTMATCH)
=> true 
```

# ios - 如何自定义 ui 项，并将其应用于所有视图控制器？

> ID：10883603
> 
> 赞同：0
> 
> 时间：2012-06-04T15:08:26.963
> 
> 标签：ios, user-interface, uikit, iboutlet

我有一个 UITextField，我在我的 firstViewController 中自定义了它。现在我不希望它在其他 ViewController 上具有相同的行为。无论如何要导入 IBOutlet 上的所有属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:13:25.253

为什么不定义一个基本视图控制器，然后从中派生所有视图控制器？

```
@interface MyBaseCustomViewController : UIViewController
 ...
@property(...) UITextField* ...
 ...
@end

@interface MyOtherCustomViewController : MyBaseCustomViewController
 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:15:38.357

是的，您可以创建 UITextField 的子类，该子类将包含您在视图控制器中执行的所有自定义代码作为子类中的函数。

例如

```
- (void) viewDidLoad
{
    //UITextField *textField;
    //change color, background, size etc..
} 
```

现在创建一个名为 UICustomTextField 的新类，它派生自此类中的 UITextField 创建一个方法：

```
//in UICustomTextField.m
- (void) doCustomModifications
{
    self.stuff = custom stuff;
    other custom stuff
    etc...
} 
```

在您的代码中调用 doCustomModifications

```
- (void)viewDidLoad
{
    [customTextField doCustomModifications];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:20:25.780

简单地创建您自己的 Customclass 并在构造函数中设置属性。

```
@interface CustomTextField : UITextField

@end

@implementation CustomTextField

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
      //Customize here
      self.autocapitalizationType = UITextAutocorrectionTypeDefault;
      self.text = @"Blub";
      ....
    }
    return self;
}
@end 
```

如果您创建一个新的文本字段，请使用您的自定义类创建对象：

```
CustomTextField *field = [[CustomTextField alloc] initWithFrame: ...]; 
```

# string - 在可以出现零次或多次的字符之后截断R中字符串的结尾

> ID：10883605
> 
> 赞同：8
> 
> 时间：2012-06-04T15:08:33.450
> 
> 标签：string, r, truncate

我有以下数据：

```
temp<-c("AIR BAGS:FRONTAL" ,"SERVICE BRAKES HYDRAULIC:ANTILOCK",
    "PARKING BRAKE:CONVENTIONAL",
    "SEATS:FRONT ASSEMBLY:POWER ADJUST",
    "POWER TRAIN:AUTOMATIC TRANSMISSION",
    "SUSPENSION",
    "ENGINE AND ENGINE COOLING:ENGINE",
    "SERVICE BRAKES HYDRAULIC:ANTILOCK",
    "SUSPENSION:FRONT",
    "ENGINE AND ENGINE COOLING:ENGINE",
    "VISIBILITY:WINDSHIELD WIPER/WASHER:LINKAGES") 
```

我想创建一个新向量，在存在“：”的情况下仅保留第一个“：”之前的文本，而当“：”不存在时，则保留整个单词。

我曾尝试使用：

```
temp=data.frame(matrix(unlist(str_split(temp,pattern=":",n=2)), 
+                        ncol=2, byrow=TRUE)) 
```

但在没有“：”的情况下不起作用

我知道这个问题非常类似于： [truncate string from a certain character in R](https://stackoverflow.com/questions/6861740/truncate-string-from-a-certain-character-in-r)，它使用：

```
sub("^[^.]*", "", x) 
```

但是我对正则表达式不是很熟悉，并且一直在努力反转该示例以仅保留字符串的开头。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T15:21:39.087

你可以用一个简单的正则表达式来解决这个问题：

```
sub("(.*?):.*", "\\1", x)
 [1] "AIR BAGS"                  "SERVICE BRAKES HYDRAULIC"  "PARKING BRAKE"             "SEATS"                    
 [5] "POWER TRAIN"               "SUSPENSION"                "ENGINE AND ENGINE COOLING" "SERVICE BRAKES HYDRAULIC" 
 [9] "SUSPENSION"                "ENGINE AND ENGINE COOLING" "VISIBILITY" 
```

* * *

正则表达式的工作原理：

*   `"(.*?):.*"`寻找一组重复的任何字符，但不要贪婪地`.*`修改它。`?`这应该后跟一个冒号，然后是任何字符（重复）
*   用括号内的位替换整个字符串 -`"\\1"`

需要理解的是，任何正则表达式匹配默认都是贪婪的。通过将其修改为非贪婪，第一个模式匹配不能包含冒号，因为括号后面的第一个字符是冒号。冒号后面的正则表达式恢复到默认值，即贪心。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T15:44:30.387

另一种方法是查找第一个“：”并将其替换为什么都没有：

```
yy <- sub(":.*$", "", yy ) 
```

如果没有找到“：”，那么什么都不会被替换，你会得到整个原始字符串。如果有一个“：”，那么第一个与它之后的所有内容一起匹配，然后将其替换为空（“”），这将删除它并将所有内容保留到第一个冒号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T15:14:26.953

这行得通吗（假设您的数据在字符向量中）：

```
x <- c('foobar','foo:bar','foo1:bar1 foo:bar','foo bar')
> sapply(str_split(x,":"),'[',1)
[1] "foobar"  "foo"     "foo1"    "foo bar" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T15:52:50.810

很抱歉将此添加为答案。响应时间：

```
> yy<-rep("foo1:bar1",times=100000)
> system.time(yy1<-sapply(strsplit(yy,":"),'[',1))
   user  system elapsed 
   0.26    0.00    0.27 
> 
> system.time(yy2<-sub("(.*?):.*", "\\1", yy))
   user  system elapsed 
    0.1     0.0     0.1 
> 
> system.time(yy3 <- sub(":.*$", "", yy ))
   user  system elapsed 
   0.08    0.00    0.07 
> 
> system.time(yy4<-gsub("([^:]*).*","\\1",yy))
   user  system elapsed 
   0.09    0.00    0.09 
```

正则表达式大致相当于 strsplit 需要更长的时间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T15:18:59.097

在这种情况下

```
yy<-c("AIR BAGS:FRONTAL",
"SERVICE BRAKES HYDRAULIC:ANTILOCK",
"PARKING BRAKE:CONVENTIONAL",
"SEATS:FRONT ASSEMBLY:POWER ADJUST",
"POWER TRAIN:AUTOMATIC TRANSMISSION",
"SUSPENSION",
"ENGINE AND ENGINE COOLING:ENGINE",
"SERVICE BRAKES HYDRAULIC:ANTILOCK",
"SUSPENSION:FRONT",
"ENGINE AND ENGINE COOLING:ENGINE",
"VISIBILITY:WINDSHIELD WIPER/WASHER:LINKAGES")
yy<-gsub("([^:]*).*","\\1",yy)
yy 
```

可能适合你

# knockout.js - 淘汰赛映射 wcf

> ID：10883613
> 
> 赞同：0
> 
> 时间：2012-06-04T15:08:54.513
> 
> 标签：knockout.js, knockout-mapping-plugin

我在映射 WCF 返回的 json 对象时遇到问题。wcf 返回一个 PaidPeople 类的列表，而 jSon 返回看起来像

```
[Object { __type="PaidPeople:#model", Amount=110, Attendee=1, more...},  more...] 
```

我也 JSON.stringify 返回对象，我得到一个数组

```
[
{"__type":"PaidPeople:#model","Amount":110,"Attendee":1,"CashPay":1,"DtPaid":"/Date(1338102000000-0700)/","Name":"John Doe"}, more
] 
```

我的问题是将它映射到我的视图

这是代码

```
 var PayinyVM = {};

    $.getJSON('/service/PaidService.svc/PaidList', function (data) {
        var tmp = JSON.stringify(data.d);

        PayinyVM.model = ko.mapping.fromJSON(tmp);
        ko.applyBindings(PayinyVM);
    }); //getJSON 
```

和 HTML 看起来像：

```
 <div data-bind="foreach: ????">
        <h3 data-bind="text: Name">
        </h3>
        <p>
            Name: <span data-bind="text: Name"></span>
        </p>
    </div> 
```

在长时间的 jquery 代码之后，我刚刚开始使用淘汰赛进行编码，并且非常喜欢它，但是我错过了很多练习。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:14:57.150

尝试使用以下代码（`model`而不是`????`）：

```
<div data-bind="foreach: model">
    <h3 data-bind="text: Name">
    </h3>
    <p>
        Name: <span data-bind="text: Name"></span>
    </p>
</div> 
```

# python - 在 Windows 中安装 MatPlotLib

> ID：10883621
> 
> 赞同：5
> 
> 时间：2012-06-04T15:09:32.330
> 
> 标签：python, matplotlib

我似乎无法让 MatPlotLib 工作。我下载并安装了正确的版本（matplotlib-1.1.0.win32-py2.7.exe），并且我已经安装了 numpy 和 scipy（它们可以正常工作）。

这是我得到的错误：

```
C:\python code>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import matplotlib.pyplot as plt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\matplotlib\pyplot.py", line 95, in <module>
    new_figure_manager, draw_if_interactive, _show = pylab_setup()
  File "C:\Python27\lib\site-packages\matplotlib\backends\__init__.py", line 25,
 in pylab_setup
    globals(),locals(),[backend_name])
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", lin
e 8, in <module>
    import Tkinter as Tk, FileDialog
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 38, in <module>
    import FixTk
  File "C:\Python27\lib\lib-tk\FixTk.py", line 65, in <module>
    import _tkinter
ImportError: DLL load failed: %1 is not a valid Win32 application.
>>> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T21:44:22.333

当您有一个未正确卸载的以前的 64 位版本的 python 时，会出现此问题。

正确卸载两个版本的 python，然后重新安装 32 位 python 解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T19:09:40.707

Zach 在 Windows 中安装 matplotlib 的最佳方式是使用 Python(x,y) 作为 Bundle。所有依赖项都已解决，您将获得一个非常酷的 IDE 和完整的文档。

请参阅[此处的 Python(x,y)](http://code.google.com/p/pythonxy/)，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T06:53:30.150

安装所有必要库的 32 位版本将解决该问题。

# javascript - 如何使用 JQuery WHEN 和 THEN 同步两个 Backbone fetch 调用

> ID：10883622
> 
> 赞同：4
> 
> 时间：2012-06-04T15:09:33.790
> 
> 标签：javascript, jquery, backbone.js

我在 jquery 中发现了一件很酷的事情：你可以这样做：

```
$.when([$.get(..), $.ajax(...), $.getJSON(...)]).then(function(data1,data2,data3){
         // code to run when all requests are done
        }); 
```

当您想要同步许多 ajax 调用时，这非常有用。

在主干中，每次获取模型或集合时都会发出 ajax 调用：

```
cardsCollection.fetch(); 
```

我的问题是如何通过主干模型/集合获取实现类似的同步功能：

我想做类似的事情：

```
$.when([series.fetch(), cardsCollection.fetch()]).then(function(){
            cardsListView.seriesID = seriesID;
            cardsListView.seriesName = series.get('seriesName');
            cardsListView.template = _.template(CardsListTemplate);
            cardsListView.render();
            $('#loader').hide();
        }); 
```

可能吗？

tnx。;-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:16:12.913

是的，这是可能的。只需传递几个 Deferred to `jQuery.when`：`$.when(series.fetch(), cardsCollection.fetch()).then(...)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:16:56.023

`$.when`不接受数组，您需要使用`.apply`with `$.when`。

```
$.when.apply($,[series.fetch(), cardsCollection.fetch()]).done(dostuff); 
```

但是，`series.fetch()`并且`cardsCollection.fetch()`必须返回延迟对象。

如果你不使用`.apply`，它会立即解决，因为你没有给它一个延迟对象。

# c# - 如何拆分字符串保留空格和任意数量的 \n 字符

> ID：10883623
> 
> 赞同：0
> 
> 时间：2012-06-04T15:09:38.397
> 
> 标签：c#, regex

我想拆分字符串并创建一个集合，规则如下：字符串应该拆分成单词。

1) 如果字符串包含 '\n' 它应该被视为一个单独的 '\n' 单词。
2) 如果字符串包含多个 '\n' ，则应将其视为超过 '\n' 个单词。
3) 不应从字符串中删除空格。唯一的例外是，如果两个 \n 之间有空格，则可以忽略。

PS：我尝试了很多字符串拆分，首先拆分了 \n 字符并创建了一个集合，缺点是，如果我连续有两个 \n ，我无法在集合中创建两个虚拟词。任何帮助将不胜感激。

![在此处输入图像描述](../Images/7f0f31765d3f3ff4230e554757913d00.png)

反正有没有使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:13:37.577

看起来像家庭作业。因此，[请继续阅读`\b`](http://www.regular-expressions.info/wordboundaries.html)。

应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:03:45.883

阅读[零宽度断言](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)。`\s`使用它们，您可以在 eg和`\S`不实际匹配任何相邻字符的情况下定义拆分位置。

*编辑：* 这是OP询问这些构造的[另一个问题。](https://stackoverflow.com/questions/10869547/regular-expression-a-z)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:14:27.867

用这样的正则表达式拆分：

```
(?<=[\S\n])(?=\s) 
```

就像是：

```
var substrings = Regex.Split(input, @"(?<=[\S\n])(?=\s)"); 
```

这根本不会删除任何空格，但这不是必需的，所以应该没问题。

如果您真的希望`\n`删除 s 之间的空格，可以使用以下内容进行拆分：

```
(?<=[\S\n])(?=\s)(?:[ \t]+(?=\n))? 
```

# actionscript-3 - as3 组合框内下拉列表的字体大小

> ID：10883628
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:26.960
> 
> 标签：actionscript-3, flash, combobox

![在此处输入图像描述](../Images/847f683c976a1ea451176cff4c587191.png)

如何减小下拉列表的字体大小以适应内容。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:34:09.137

你的标题说 comboBox 但你的文章说 dropdownList 所以我提供了两个例子：

```
<s:DropDownList fontSize="8"/>
<s:ComboBox fontSize="8"/> 
```

编辑：根据新信息在下面添加：

```
var dropdown:DropDownList = new DropDownList();
dropdown.setStyle("fontSize", "8"); 
```

# c# - 在本地网络中复制文件

> ID：10883629
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:26.877
> 
> 标签：c#, asp.net

这是一个 Web 应用程序，我有 2 台电脑：A：192.168.1.200 和 B：192.168.1.201，我想从 A 复制到 B，此代码工作是单台电脑，但它不能在网络中工作。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string sourcePath = @"D:\Source\";

    string[] filePaths = Directory.GetFiles(sourcePath, "*.txt");
    foreach (string a in filePaths)
    {
        CopyFiles(a, a.Replace("D:\\Source\\", "D:\\Source1\\New\\"));
       //CopyFiles(a, a.Replace("D:\\Source\\", "192.168.1.201\\Source1\\New\\"));
    }

}

private  bool CopyFiles(string Source, string Destn)
{
    try
    {
        if (File.Exists(Source) == true)
        {           
            File.Copy(Source, Destn);
            return true;
        }
        else
        {
            Response.Write("Source path . does not exist");
            return false; 
        }
    }
    catch (FileNotFoundException  exFile)
    {
        Response.Write("File Not Found " + exFile.Message);
        return false;
    }
    catch (DirectoryNotFoundException exDir)
    {
        Response.Write("Directory Not Found " + exDir.Message);
        return false;
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:16:28.350

尝试：

```
CopyFiles(a, a.Replace("D:\\Source\\", "\\192.168.1.201\\Source1\\New\\")); 
```

您还需要确保 Source1 文件夹在 B 上共享，并且您具有对它的写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:19:52.057

您是否在接收方计算机上创建了 Windows 共享“Source1”？如果你这样做了，我会尝试将它安装在你的发件人机器上并将代码更改为：

```
CopyFiles(a, a.Replace("D:\\Source\\", "\\\\192.168.1.201\\Source1\\New\\")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:22:25.303

你必须被允许在目标机器上写。可以在这里使用工作轮，您可以创建一个指向网络位置的虚拟驱动器，例如 Z:。现在您可以使用本地表示法。但在此之前，请确定远程 PC 上的权限。

# android - 找不到文件

> ID：10883630
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:29.030
> 
> 标签：android, android-file

我在打开文件时遇到了一些麻烦。好吧，我已经使用绝对路径知道文件在哪里，但它仍然无法打开文件（找不到文件）

```
 public void ReadFromFile() throws FileNotFoundException
 {
       /** Read the contents of the given file. */

         String SourceID = new String();
         String LogicalID = new String();

         File fileDir = getFilesDir();
         String s = new String();

         s+=fileDir.getAbsolutePath()+"/Nodes.txt";
         Scanner scanner = new Scanner(new FileInputStream(s));

         try 
         { 
            while (scanner.hasNextLine())  
            { 

                SourceID = scanner.nextLine();  
                LogicalID = scanner.nextLine();  
                String ss = new String();
                ss+="    ----------------> "+SourceID+" "+LogicalID+"   ";

                Log.v(TAG, ss);
                ListaNodesSTART.add(new NodesToStart(SourceID,LogicalID));
            } 
         }catch(Exception ee){//Log.v(TAG, "Could not read the file");  
             ERROR.setText("Could Not Read file Nodes.txt");
         ErRorLog.setText("Could Not Read file Nodes.txt");}

         finally{scanner.close(); }
     } 
```

我想问题是设备没有文件，但是，我如何在应用程序启动时上传它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:51:26.887

As you mentioned, you have NO file in the device! To work with static files, insert them in your assets folder and then:

```
AssetManager assetManager = getAssets();
String[] files = null;
try {
    files = assetManager.list("");
} catch (IOException e) {
    Log.d("tag", e.getMessage());
}
for(String filename : files) { 
    if( filename.equals("Nodes.txt") {
        InputStream in = null;
        try {
            // Do your work with file
            in = assetManager.open(filename);
            // ...
        } catch(Exception e) {
            Log.e("tag", e.getMessage());
        }
    }
} 
```

# database - 将值保存到数据库 - MVC

> ID：10883632
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:32.593
> 
> 标签：database, asp.net-mvc-3

我试图在“UserController”中保存一个值，但我似乎无法将它保存到数据库中。

我可以获取存储在 UserController 中的数据库值以进行更改，以便在提交值并刷新视图时，它看起来好像已存储。（即从测试更改为测试）但是，一旦我再次刷新页面，它就会返回到以前的值，并且数据库在整个过程中没有显示任何变化。

用户控制器：

```
var g = httpPost.VanityUrl;

DB.ppUser_editUser(g); 
```

ppUser 中的 ppUser_editUser：

```
public ppUser ppUser_editUser(string personVanity)
    {
        ppUser user = SessionUser.LoggedInUser.Person;
        user.VanityUrl = personVanity;
        BaseDB.SubmitChanges();
        return user;
    } 
```

编辑配置文件视图：

```
<div>
    @Html.LabelFor(m => m.VanityUrl, "Edit your Custom Url:")
    @Html.TextBoxFor(m => m.VanityUrl, new { maxlength = 15 })
</div> 
```

基础数据库：

```
public partial class StudioKit_MVC3Repository : IDisposable
{
    private StudioKit_MVC3ModelsDataContext _BaseDB;
    public StudioKit_MVC3ModelsDataContext BaseDB
    {
        get
        {
            if (_BaseDB == null)
            {
                if (StudioKit_MVC3Config.EnvironmentDetail.Name == "Production")
                {
                    _BaseDB = new StudioKit_MVC3ModelsDataContext(StudioKit_MVC3Config.EnvironmentDetail.ConnectionString);
                }
                else
                {
                    var sqlConnection = new SqlConnection(StudioKit_MVC3Config.EnvironmentDetail.ConnectionString);
                    var conn = new ProfiledDbConnection(sqlConnection, MiniProfiler.Current);
                    _BaseDB = new StudioKit_MVC3ModelsDataContext(conn);
                }
            }

            return _BaseDB;
        }
    }
} 
```

编辑：我发现了问题。我将值保存到会话用户实例而不是实际数据库。我摆脱了该方法，并在控制器中简单地输入了：

```
ppUser check = DB.ppUser_GetUserByPersonID(model.cskPersonID);
check.VanityUrl = httpPost.VanityUrl;
DB.Save(); 
```

# jsf - JSF 导航和传递参数

> ID：10883633
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:34.707
> 
> 标签：jsf, navigation, javabeans, communication

我在 JSF 导航和传递参数方面遇到了一些问题；这是场景：

三页：艺术家、专辑、曲目

每个页面都有一个 bean：ArtistBean、AlbumBean、TrackBean（会话范围）

艺术家页面包含艺术家列表，每个艺术家名称都是一个链接，单击它时，您会导航到列出该艺术家专辑的专辑页面。同样，单击专辑时，您会导航到包含该专辑曲目列表的曲目页面。

链接如下所示：

```
Page artist: <h:commandLink action="#{albumBean.showAlbums(artist)}" value="#{artist.name}" />
Page album:  <h:commandLink action="#{trackBean.showTracks(album)}" value="#{album.name}" /> 
```

bean 如下所示：

```
AlbumBean: public String showAlbums(Artist artist){
              [generate list of albums, fetched by page "albums" using getAlbumList()]
              return "Albums";
           }

           public List<Album> getAlbumList(){
              return albumList;
           }

TrackBean: public String showTracks(Album album){
              [generate list of tracks, fetched by page "tracks" using getTrackList()]
              return "Tracks";
           }

           public List<Track> getTrackList(){
              return trackList;
           } 
```

我不确定这是否是处理导航的“OK”方式；为尚未显示 bean 的页面调用支持 bean。我也遇到了一些奇怪的行为，主要是显示曲目的链接仅在我单击两次时才有效，而显示专辑的链接在单击一次时始终有效。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:21:22.890

我不确定你在做什么是错的。但我觉得很复杂。在我看来，更直接的解决方案如下：

你有 3 个 bean 和 3 个页面。显然，艺术家 bean 在艺术家页面等中被调用。

页面之间的导航是通过链接完成的，您可以添加一个参数。在专辑 bean 上，读取传递的参数并根据该参数填写专辑列表（您可以使用名称或 id 作为键值）

轨道信息也是如此。

这样你就不需要在会话范围内拥有 bean。最好使用视图范围。

# c# - 按每个条目不同的列表中的 int 属性对列表进行排序

> ID：10883635
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:40.480
> 
> 标签：c#, list, sorting, last.fm

我目前正在为自己开发一个连接到 LastFM 的小程序。在这里，我可以获取本周播放的完整艺术家列表。这是我第一次获取播放的艺术家并将它们存储到列表中的方式：

```
WeeklyArtistChart WeeklyArtists = user.GetWeeklyArtistChart();
//WeeklyArtistChart is a list 
```

现在，假设 WeeklyArtists[i].Artist 中的每个条目都有一个名为“Playcount”的属性。我想根据该属性按降序对列表进行排序，唯一的问题是，我不知道怎么做！

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:14:17.757

您可以使用 LINQ 和[`Enumerable.OrderByDescending`](http://msdn.microsoft.com/en-us/library/bb534855.aspx)：

```
var sortedArtists = WeeklyArtists.OrderByDescending(a => a.Artist.Playcount); 
```

如果您需要此订单的列表副本，您需要致电[`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)：

```
WeeklyArtists = sortedArtists.ToList(); 
```

# python - 删除选择，StyledTextCtrl - wxpython

> ID：10883636
> 
> 赞同：0
> 
> 时间：2012-06-04T15:10:43.000
> 
> 标签：python, wxpython, wxwidgets

我正在寻找一个功能来删除 StyledTextCtrl 中的选择（不选择任何内容）

```
txt.SetSelection(-1,-1) #Seems to select everything

txt.SetSelection(-1,0) # This will select the first letter 
```

有谁知道如何做到这一点？我似乎无法在 API 中找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:55:24.687

尝试这个：

```
txt.SetSelection(0, 0) 
```

# c# - C# -- TcpListener.Start() 导致 SocketException 并带有消息“每个套接字地址仅使用一次”

> ID：10883639
> 
> 赞同：3
> 
> 时间：2012-06-04T15:10:51.760
> 
> 标签：c#, .net, tcp, network-programming

我有一个服务，它即将调用 TcpListener 实例上的 Start() 方法。此侦听器正在使用一个不常见的端口，并且不知道任何其他服务都在使用该端口。很少会在一分钟左右的时间内遇到奇怪的错误。一分钟后，服务（在失败时立即重新启动）因以下异常而背靠背崩溃：

```
 SocketException
   at System.Net.Sockets.Socket.DoBind(System.Net.EndPoint, System.Net.SocketAddress)
   at System.Net.Sockets.Socket.Bind(System.Net.EndPoint)
   at System.Net.Sockets.TcpListener.Start(Int32)
   at MyTestServer.Server.StartListening() 
```

异常消息如下：

```
Only one usage of each socket address (protocol/network address/port) is normally permitted 
```

[本文](https://stackoverflow.com/questions/1339142/wcf-system-net-socketexception-only-one-usage-of-each-socket-address-protoco)建议我遇到端口耗尽的情况，我应该调整注册表以修改 WinSock 的超时和端口范围值。这一切都很好，但我只有（或预计会有）50-100 个客户端连接。我怎么可能用完端口？机器人和端口扫描器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:20:38.913

它可能不是那个帖子中的端口耗尽。他们正在使用 WCF（类似于 TCPClient）进行连接。您正在绑定到 TCP 端口并等待连接。严格来说，这不是一回事。您正在绑定到特定的 TCP 端口号。当您收到此消息时，Windows（无论是否正确）认为它正在使用中。Windows 报告另一个进程已经绑定到该端口，所以你不能。您可以有 2 个进程尝试使用该端口并遇到此问题，因此 50-100 的数字不是问题。

要么您在其他地方导致此问题，要么有其他应用程序导致此问题。

如果服务遇到问题并且在没有调用[TCPListener.Stop()](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.stop.aspx)的情况下死亡，则服务会自行重新启动，它将无法绑定到端口，因为 Windows 可能不知道该过程已完成。

您必须发布更多详细信息才能进一步了解它。

# html - 如何让表格行 CSS 和边框属性一起工作？

> ID：10883643
> 
> 赞同：6
> 
> 时间：2012-06-04T15:11:08.047
> 
> 标签：html, css

我有这个 CSS：

```
#center{
    display:table-row;
    border:solid #55A 1px;
    background-color:#AAF;
    height:100%;
} 
```

实际上，border 属性只是被忽略了。为什么？我该如何解决？
[演示](http://jsfiddle.net/ZJh9y/)
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T15:12:11.423

表格行不能有边框。表格行中的单元格可以，但行本身不能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:15:58.357

如果将“单元格”添加到表格行，例如：

```
<div id="content">
    <div id="top">TOP</div>
    <div id="center">
        <div>CENTER</div>
    </div>
</div>​ 
```

然后下面的 CSS 工作：

```
#center{
    display:table-row;
}
#center > div {
    display: table-cell;
    border:solid #55A 1px;
    background-color:#AAF;
    height:100%;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZJh9y/1/)。

重要的是要记住，浏览器会按照您的指示渲染元素；因此，如果您告诉 a `div`，`display: table-row` *它将以这种方式显示*；并且 a`table-row`没有 a `border`。`table-cell`但是，确实如此，这就是为什么我添加了孩子`div`并为其分配了该`display`属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T15:24:59.223

CSS

```
#content{
    display:table;
    border:solid black 1px;    
    width:250px;
    height:300px;
}
.center{
    display:table-row;
}
.center > div {
    display: table-cell;
    border:solid #55A 1px;
    background-color:#AAF;

}
#top{      
  border:solid red 1px;
} 
```

HTML

```
<div id="content">
    <div class="center" style="height:50px">
        <div id="top">TOP</div>
    </div>
    <div class="center" style="height:100%">
        <div>CENTER</div>
    </div>
    <div class="center" style="height:50px">
        <div>BOTTOM</div>
    </div>
</div> 
```

[demo](http://jsfiddle.net/ZJh9y/4/)

# python - MATLAB 到 Python 的转换、矩阵和列表

> ID：10883644
> 
> 赞同：0
> 
> 时间：2012-06-04T15:11:09.963
> 
> 标签：python, matlab, numpy

我如何将以下内容从 Matlab 翻译成 Python？我仍在尝试围绕 numpy 中的列表/矩阵和数组等进行思考。

```
outframe(:,[4:4:nout-1]) = 0.25*inframe(:,[1:n-1]) + 0.75*inframe(:,[2:n])
pos=(beamnum>0)*(beamnum<=nbeams)*(binnum>0)*(binnum<=nbins)*((beamnum-1)*nbins+binnum)
for index =1:512:
outarray(index,:) =uint8(interp1([1:n],inarray64(index,:),[1:.25:n],method)) 
```

（还有其他东西，这些只是我不确定如何理解的特定陈述。我导入了 numpy，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:57:10.290

numpy 中的主要工作是 ndarray（或数组）。当您翻译代码时，它将在很大程度上取代 matlab 矩阵。与 matlab 矩阵一样，ndarray 存储同质数据（即 float64）并针对数值运算进行了优化。

numpy 矩阵是 ndarray 的子类，可以方便一些线性代数密集型应用。[这](http://www.scipy.org/NumPy_for_Matlab_Users)是有关两者之间差异的更多信息。

python 列表更像是一个 matlab 元胞数组（尽管不完全相同）。它是基本的 Python 数据结构之一，但在科学应用程序中，我发现它最常出现在您需要保存异构数据时。（或者当你做一些非常简单的事情并且不想麻烦创建一个 numpy 数组时）。

上面的代码可以使用 ndarray 并将 () 替换为 [] 进行索引，并考虑到索引在 MATLAB 中从 1 开始，在 python 中从 0 开始，即：MATLAB 中的第一个元素是元素 1，并且在python它是元素0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:46:35.790

让我们逐行尝试：

```
outframe(:,[4:4:nout-1]) = 0.25*inframe(:,[1:n-1]) + 0.75*inframe(:,[2:n]) 
```

将用“英语”翻译为：outframe 的所有行，但只有从 4 到 nout-1 的每 4 列（即 4,8 ..）。我假设您了解框架内引用的含义。

```
pos=(beamnum>0)*(beamnum<=nbeams)*(binnum>0)*(binnum<=nbins)*((beamnum-1)*nbins+binnum) 
```

可能 beamnum 是一个向量，并且 (beamnum >0) 返回一个 {0,1} 的向量，使得元素为“1”，其中相应的 beamnum 元素为 >0，否则为 0。我希望其余部分很清楚。

倒数第二行是一个 for 循环，最后一行应该是清晰的。

# java - 差异。使用 Jmeter 和 Firebug-Net 面板显示的黑白性能结果

> ID：10883650
> 
> 赞同：0
> 
> 时间：2012-06-04T15:11:24.793
> 
> 标签：java, performance, firebug, jmeter, performance-testing

我正在尝试通过 JMeter 测试应用程序的性能，我使用聚合报告发现了结果，但与使用 Firebug-Net 面板发现的相比，报告显示的性能较低。那么，Firebug-Net Panel 和 Jmeter 中显示的时间究竟有什么区别。我还在 Jmeter 中启用了缓存，以便实现一个真实的场景。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T06:21:32.360

不同的工具执行不同类型的字节码采样和检测。您总是会发现测量性能的工具之间存在差异。这就是为什么你应该看这个数字的大小而不是它们的字面值。只需注意幅度而不是标量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T08:33:13.907

您是否在加载过程中使用了萤火虫并获得了不同的测量结果？尽管这两种工具的工作方式不同，但它们都应该显示出相同的性能**变化**。我的意思是，如果例如在某个时间点（例如 50 个并发用户加载），响应时间加倍，这应该在 firebug 和 JMeter 中反映相同。

# sql - 如何从 Postgres 的另外两行中生成新行？

> ID：10883651
> 
> 赞同：1
> 
> 时间：2012-06-04T15:11:30.987
> 
> 标签：sql, postgresql

我在 Postgres 表中有一些数据，如下所示：

```
1 apple datetime1
2 orange datetime2
3 apple datetime3
4 orange datetime4
5 apple datetime5
6 orange datetime6
. 
```

日期时间总是按升序排列，大多数时候苹果行首先插入，橙色排在第二位，但有一些我必须捕捉和消除的例外情况。

我实际上需要的是一个 Postgres 查询，它只配对苹果和橙子：

```
1 apple datetime1 2 orange datetime2
3 apple datetime3 4 orange datetime4
5 apple datetime5 6 orange datetime6 
```

苹果不应该和其他苹果搭配，橙子也不应该和其他橙子搭配。

有几个条件：

1）在新生成的行中，苹果应该始终排在第一位，橙色排在第二位。

2) 始终将 apple 和 orange 行与最接近的日期时间配对，并忽略其他行。

例如，如果我的原始数据如下所示：

```
1 apple datetime1
2 apple datetime2
3 orange datetime3
4 orange datetime4 
```

一对

```
2 apple datetime2 3 orange datetime3 
```

并忽略行

```
1 apple datetime1
4 orange datetime4 
```

任何想法如何在 Postgres 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:07:32.503

> 日期时间总是按升序排列，大多数时候苹果行首先插入，橙色排在第二位，但有一些我必须捕捉和消除的例外情况。

如果我理解正确，您想查找是否有任何连续两行具有相同的水果，对吗？

如果是这样，您可以这样做：

```
WITH Q AS (
    SELECT *, ROW_NUMBER() OVER (ORDER BY datetime) R
    FROM YOUR_TABLE
)
SELECT *
FROM Q Q1 JOIN Q Q2 ON Q1.R = Q2.R - 1
WHERE Q1.fruit = Q2.fruit; 
```

用简单的英语：将每一行与下一行连接起来（其中“下一个”的含义由`datetime`排序决定）并检查它们的水果是否匹配。您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!1/1a8a8/20)中使用它。

*顺便说一句，这不是一个好的数据库设计。您应该考虑重新设计，这样您上面描述的“无效”情况自然会被数据库结构本身阻止。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:49:40.013

具有 CTE 和窗口功能的解决方案：

```
WITH x AS (
    SELECT *
          ,lead(tbl) OVER (ORDER BY id) AS y
    FROM tbl
    )
SELECT x.id,     x.fruit,   x.dt
     , (y).id, (y).fruit, (y).dt
FROM   x
WHERE  fruit = 'apple'
AND    (y).fruit = 'orange'
ORDER  BY x.id; 
```

也可以作为子查询完成，但[根据来自 @wildplasser 的请求](https://stackoverflow.com/questions/10883651/how-can-i-generate-a-new-row-out-of-two-other-rows-in-postgres#comment14185141_10883651)。:)

我选择每个窗口函数的整个“下一个”行[`lead()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)。请注意使用括号访问复合（行）类型的列的语法`y`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:28:34.137

```
select 
    t0.id, t0.fruit, t0.datetime, 
    t1.id, t1.fruit, t1.datetime
from t t0
inner join t t1 on 
    t0.fruit = 'apple' 
    and 
    t1.fruit = 'orange'
    and
    t0.datetime < t1.datetime
order by t1.datetime - t0.datetime
limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:33:34.227

```
SET search_path='lutser';

DROP TABLE fruits;
CREATE TABLE fruits
    ( id INTEGER NOT NULL
    , fruit varchar
    , zdate varchar
    );  
INSERT INTO fruits(id,fruit,zdate)
VALUES

(1, 'apple', 'datetime01')
, (2, 'orange', 'datetime02')
, (3, 'apple', 'datetime03')
, (4, 'orange', 'datetime04')
, (5, 'apple', 'datetime05')
, (6, 'orange', 'datetime06')
, (11, 'apple', 'datetime11')
, (12, 'apple', 'datetime12')
, (13, 'orange', 'datetime13')
, (14, 'orange', 'datetime14')
    ;

SELECT fa.id, fa.fruit, fa.zdate
    , fo.id, fo.fruit, fo.zdate
FROM fruits fa
JOIN fruits fo ON fa.zdate < fo.zdate
WHERE fa.fruit = 'apple' AND fo.fruit = 'orange'
AND NOT EXISTS (
    SELECT *
    FROM fruits nx
    WHERE nx.fruit = 'orange'
    AND nx.zdate > fa.zdate
    AND nx.zdate < fo.zdate
    )   
AND NOT EXISTS (
    SELECT *
    FROM fruits nx
    WHERE nx.fruit = 'apple'
    AND nx.zdate < fo.zdate
    AND nx.zdate > fa.zdate
    )   
    ; 
```

结果：

```
DROP TABLE
CREATE TABLE
INSERT 0 10
 id | fruit |   zdate    | id | fruit  |   zdate    
----+-------+------------+----+--------+------------
  1 | apple | datetime01 |  2 | orange | datetime02
  3 | apple | datetime03 |  4 | orange | datetime04
  5 | apple | datetime05 |  6 | orange | datetime06
 12 | apple | datetime12 | 13 | orange | datetime13
(4 rows) 
```

# android - Streetnames openstreetmaps 在 Android 上更具可读性

> ID：10883653
> 
> 赞同：0
> 
> 时间：2012-06-04T15:11:44.850
> 
> 标签：android, zooming, openstreetmap, osmdroid

我使用 Openstreetmaps 和 OsmDroid 构建了一个带有离线地图数据的 Android 应用程序。在 MDPI 320x480 像素的设备上，地图看起来不错，但在具有 480x800 像素的 HDPI 屏幕的设备上，街道名称很小，而且有点难以阅读。我的地图数据直到缩放级别 18（我可以下载并与 Mapnik 平铺源一起使用的最大级别）作为 zip 文件从 SD 卡加载。我的本地地图来自布鲁塞尔（比利时）的特定区域。

320x480 像素的 MDPI 设备截图：

![在此处输入图像描述](../Images/f03f169e1b5b4860acc48a4f269b9863.png)

480x800 像素的 HDPI 设备的屏幕截图：

![在此处输入图像描述](../Images/60b9046d5a38c2e641f0a112b93ca715.png)

如果您在设备上的应用程序中看到这些视图，则 MDPI 地图具有良好的可读性，而在 HDPI 地图中，街道名称较小。

有没有办法让街道名称在 HDPI 设备上也更具可读性，所以用户会认为他在地图上再放大一步？因为无法转到缩放级别 19，因为没有针对它的 openstreetmaps 数据。因此，一个简单而小的实施时间/工作的解决方案对我来说没问题。现在通过在地图上滑动来完成缩放。如果您还需要代码，请告诉我，我会发布。

提前致谢。

氪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:40:25.443

Osmdroid 适用于静态 PNG 图像的图块。您不能更改平铺图像。如果您想获得更好的地图解决方案，请尝试 MapsForge。此应用程序/库使用地图数据并动态呈现它们。通过这种方式，您可以更好地控制渲染地图，并且可以自定义其文本、字体和颜色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T23:47:41.113

在这个答案中，我将解释一下我是如何更改街道名称的大小的。

在 MapsForge 的 jar 文件中包含一个 xml 文件，该文件将标准用于渲染地图数据。您也可以通过从服务器查看源代码来下载此文件：http: [//mapsforge.googlecode.com](http://mapsforge.googlecode.com)或从此处下载 xml 文件本身：http: [//mapsforge.googlecode.com/svn/trunk/mapsforge -render-theme/src/main/resources/osmarender/osmarender.xml](http://mapsforge.googlecode.com/svn/trunk/mapsforge-render-theme/src/main/resources/osmarender/osmarender.xml)。所以，你有一个基础来调整你自己的渲染文件。我把它改成这样：

（xml文件的片段）：

![在此处输入图像描述](../Images/18826c9135132ce18a7848d2185e7ef5.png)

在 MapsForgeRenderThemeAPI 页面（在上面的网站上）的 Wiki 页面上，您可以找到如何调整自己的渲染文件以及规则元素中的 e、k、v 属性的含义。如您所见，在无隧道方式规则元素中的某处，在方式规则元素下方有一个带有 e="way"、k="area"、v="~|no|false" 的规则元素。此元素下的每个规则元素都有一个 e="way"、k="highway" 和等于 openstreetmap 参数的 v 值。当您登录到[openstreetmap.org](http://openstreetmap.org)上的编辑页面时，您可以找到您想要调整名称的街道类型。

现在我要告诉你如何为指定类型的街道精确设置你想要的字体大小。作为一个例子，我将采用第三条道路元素。每种方式规则元素都包含一些这样的代码：

```
<rule e="way" k="highway" v="tertiary">
    <line stroke="#ffff90" stroke-width="1.5" />
    <rule e="way" k="*" v="*" zoom-min="14">
        <pathText k="name" font-style="bold" font-size="32" stroke="#ffff90" stroke-width="2.0" />
    </rule>
</rule> 
```

line 元素指定街道的显示方式（颜色、宽度、黑色边框，...）。这里还有一个规则元素，其中包含一个 pathText 元素。此元素指定文本在笔划内的显示方式（颜色、宽度、字体大小、...）。所以，这就是我们需要的元素！如您所见，在我的示例中，第三条道路的街道名称的字体大小将以 32 像素的大小显示，放大级别为 14 或更高。

现在我们要使用我们自己的渲染主题 xml 文件：

我在项目的 assets 文件夹中添加了自己的 render-xml 文件。与启动时相比，我将文件复制到一个位置，我可以在需要时将其读出。在您处理 mapsforge 地图的活动中，您只需通过实现如下代码（示例）链接到该文件：

```
File f = new File(Environment.getExternalStorageDirectory(), myRenderTheme.xml);
mapView.setRenderTheme(f); 
```

请注意，setRenderTheme(File) 将抛出 FileNotFoundException。

因此，这一切都是为了使用 mapsforge 更改街道名称。您可以根据需要渲染整个地图！

感谢 MapsForge 开发社区。

玩得开心！

氪

# php - jquery发布到php文件

> ID：10883658
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:12:38.823
> 
> 标签：php, jquery, codeigniter

试图让一些 jquery 代码将值发布到我拥有的 php 文件中，并返回一个数据数组。

基本思想是搜索数据库，然后用值填充引导程序的预输入。在 CodeIgniter 中工作。

搜索控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Search extends CI_Controller {

 public function index()
 {

 }

 public function getSearchResults() 
 {

  $partialSearch = $_POST['partialSearch'];
  if (strlen($partialSearch) > 5) {
  $this->db->select('mobile_number');
  $this->db->like('mobile_number', $partialSearch); 
  $query = $this->db->get('phone_lines');

  $result = $query->result();
  $data = "";
  foreach($result as $row){
     $data = $data . "<div>" . $row->mobile_number . "</div>";
  }
  echo $data; 
  }

 }
} 
```

当前填充预输入的jquery：

```
<script>
        //searches the database for mobile numbers
        $(function() {
        var searchItem = $("#typeahead").val();
        var itemsArray = [
                "1111111111",
                "2222222222",
                "3333333333"
                ];
        //push to search controller, receive back array of mobile numbers that match

            $("#typeahead").typeahead({

                source: itemsArray
            });
        });
    </script> 
```

所以，我不确定如何将搜索框的值发布到 php，然后在返回时如何正确格式化。有什么想法吗？这一切都很新。甚至不确定这是否可能。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:50:38.063

`$.ajax`, `$.post` and `$.getjson` are some of the many jQuery functions out there.

# canvas - FabricJS - 设置对象位置，枢轴位于左上角

> ID：10883660
> 
> 赞同：3
> 
> 时间：2012-06-04T15:12:50.633
> 
> 标签：canvas, positioning, conventions, fabricjs

我开始使用非常棒的[FabricJS](http://fabricjs.com)框架，并注意到对象定位的工作方式与 CSS 约定有点不同。CSS 将定位枢轴放置在左上角的位置，FabricJS 将其放置在对象的中心：

# CSS

```
@------------
|           |
|           |
|           |
|           |
|           |
------------- 
```

# FabricJS

```
-------------
|           |
|           |
|     @     |
|           |
|           |
------------- 
```

有没有办法控制这个设置？谢谢。

* * *

## 编辑：

这是该项目[路线图](https://github.com/kangax/fabric.js/wiki/Roadmap,-TODO)上的现有项目。所以它会在未来发生，但目前不支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-02T16:36:22.723

您现在可以在创建对象时指定对象定位的“原点”。

**originX**默认为“center”，但您可以将其更改为“left”或“right”

**originY**默认为“center”，但您可以将其更改为“bottom”或“top”

它在[docs](http://fabricjs.com/docs/fabric.Object.html)中指定。这是一个[测试](http://fabricjs.com/test/misc/origin.html)。

# jquery - Phonegap Android 应用程序在 Android 2.2 中无限弹出错误，但在 Android 4.0.3 中没有

> ID：10883664
> 
> 赞同：0
> 
> 时间：2012-06-04T15:12:56.493
> 
> 标签：jquery, android, cordova, android-2.2-froyo, android-4.0-ice-cream-sandwich

我正在使用 phonegap 为 Android 开发一个 HTML5 + jQuery 应用程序。当我在 Android 4.0.3 设备上对其进行测试时，它运行良好，但在 Android 2.2 中，我收到了无限的 gap_poll 弹出消息。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:07:52.480

我绕过了这个。我必须将我正在调用的应用程序所在的远程服务器的域放在 cordova.xml 文件的白名单中。

# makefile - makefile 缺少分隔符

> ID：10883666
> 
> 赞同：17
> 
> 时间：2012-06-04T15:13:03.920
> 
> 标签：makefile, syntax-error, gnu-make

好吧，我坚持这一点，我不知道我做错了什么。在更复杂的 makefile 上工作一切顺利，但突然之间我得到了“缺少分隔符”错误。我能够将其隔离为一个非常简单的场景：

## 测试.mk

```
define push_dir
$(info ${1})
endef

define pop_dir
$(info ${1})
endef

define include_submake
$(call push_dir,${1})
$(call pop_dir,${1})
endef 
```

## 简单的

```
include test.mk

INITIAL_SUBMAKE:= includeme.mk
$(call include_submake,${INITIAL_SUBMAKE})

process:
    @echo Processed... 
```

和输出：

```
C:\project>make -f Simple process
includeme.mk
includeme.mk
Simple:4: *** missing separator.  Stop. 
```

`includeme.mk`实际上并不存在。我不知道这里出了什么问题我尝试了很多东西。如果我在 info 中围绕对 include_submake 的调用，如下所示：

```
$(info $(call include_submake,${INITIAL_SUBMAKE})) 
```

缺少的分隔符错误消失了。此外，如果在`include_submake`定义中我只调用其中一个函数，它就可以正常工作。此外，如果我直接调用函数而不是调用它们`include_submake`，它也可以：

```
include test.mk

INITIAL_SUBMAKE:= includeme.mk
$(call push_dir,${INITIAL_SUBMAKE})
$(call pop_dir,${INITIAL_SUBMAKE})

process:
    @echo Processed...

C:\project>make -f Simple process
includeme.mk
includeme.mk
Processed... 
```

我觉得我在这里忽略了一些基本的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T15:38:14.457

发生错误是因为的`missing separator`非空返回值`include_submake`，在您的情况下这是一个换行符。Make 只允许空白字符（即空格或制表符）出现在不被假定为某些规则或其他指令的一部分的表达式中。

使用普通的 Make 变量赋值重写你的函数，错误应该消失：

```
push_dir = \
    $(info $1)

pop_dir = \
    $(info $1)

include_submake = \
    $(call push_dir,$1) \
    $(call pop_dir,$1) 
```

# UPD.: `define`vs 普通的旧变量赋值

回答第一条评论中的问题。就个人而言，我更喜欢`define`在几种情况下使用指令。

## 与`eval`功能一起使用

正如 GNU Make 手册所建议的那样，指令与[function](http://www.gnu.org/software/make/manual/make.html#Eval-Function)`define`结合使用非常有用。手册中的示例（重点是我的）：[`eval`](http://www.gnu.org/software/make/manual/make.html#Eval-Function)

```
程序 = 服务器客户端

server_OBJS = server.o server_priv.o server_access.o
server_LIBS = priv 协议

client_OBJS = client.o client_api.o client_mem.o
client_LIBS = 协议

*# 这之后的一切都是通用的*

.PHONY：全部
全部：$（程序）

定义 PROGRAM_template
  $(1): $$($(1)_OBJS) $$($(1)_LIBS:%=-l%)
  ALL_OBJS += $$($(1)_OBJS)
endef

$(foreach prog,$(PROGRAMS),$(eval $(call PROGRAM_template,$(prog))))

$（程序）：
    $(LINK.o) $^ $(LDLIBS) -o $@

干净的：
    rm -f $(ALL_OBJS) $(程序)

```

## 生成器模板

当您想从 GNU Make 生成文件时，逐字变量非常适合。例如，考虑根据 Makefile 中的一些信息生成头文件。

```
*#参数：
# 1\. 标头标识符。*
定义 header_template
/* 此文件由 GNU Make $(MAKE_VERSION) 生成。*/

#ifndef $(inclusion_guard)
#define $(inclusion_guard)

$(foreach 公司,$($1.includes),
#include <$(inc).h>)

/* 别的... */

#endif /* $(inclusion_guard) */

endef

*# 1\. 唯一的标头标识符。*
包含保护= \
    __GEN_$1_H

*# 壳逃逸。*
sh_quote = \
    '$(subst','"'"',$1)'

foo.includes := bar baz

标题：= foo.h

$(标头) : %.h :
    @printf "%s" $(call sh_quote,$(call header_template,$(*F)))> $@

```

## 扩展的 Make 语法

在我们的项目中，我们使用自己的构建系统[Mybuild](http://code.google.com/p/embox/wiki/Mybuild)，它完全在 GNU Make 之上实现。作为我们用来改善 Make 内置语言的糟糕语法的低级技巧之一，我们开发了一个[特殊的脚本](https://github.com/embox/embox/blob/b7839502277bba1fcb01c91c136a088c06176c2c/mk/core/define.mk)，它允许使用扩展语法来定义函数。脚本本身也是用 Make 编写的，因此它是 Make 中的一种元编程。

特别是，可以使用以下功能：

*   定义多行函数而不需要使用反斜杠
*   在函数内部使用注释（在普通的 Make 注释中只能出现在变量赋值指令之外）
*   定义自定义宏，如`$(assert ...)`or`$(lambda ...)`
*   内联简单函数，如`$(eq s1,s2)`（字符串相等检查）

这是一个如何使用扩展语法编写函数的示例。请注意，它成为一个有效的 Make 函数，并且可以在调用`$(def_all)`.

```
*# 反转指定的列表。
# 1\. 列表
＃ 返回：
# 其元素以相反顺序排列的列表。*
define reverse 
    *# 从空列表开始。*
    $(折叠,$1,

        *# 将每个新元素 ($2) 添加到
        # 先前计算的结果。*
        $(lambda $2 $1) )
 endef
$(def_all)

```

使用这些新功能，我们能够实现一些非常酷的东西（嗯，至少对于 Make :-)），包括：

*   具有动态对象分配、类继承、方法调用等的面向对象层
*   [GOLD Parser Builder](http://goldparser.org/)生成的解析器的 LALR 解析器运行时引擎
*   [为使用EMF](http://www.eclipse.org/modeling/emf/)生成的模型提供运行时支持的建模库

随意在您自己的项目中使用[代码的任何部分！](https://github.com/embox/embox/tree/b7839502277bba1fcb01c91c136a088c06176c2c/mk/core)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T03:03:10.790

我遇到了同样的问题。我插入了“标签”，删除了“标签”，重新插入以确保。相同的错误信息。

但是，我在 XCodem 中完成了所有这些操作，令我惊讶的是插入了空格，而不是 '\t'。一旦我使用了不同的编辑器，这些“幻影”错误就消失了。

HTH...

# python - 在 Heroku 上使用 Python/Django 拒绝访问 ClearDB 数据库

> ID：10883668
> 
> 赞同：0
> 
> 时间：2012-06-04T15:13:16.150
> 
> 标签：python, mysql, django, heroku

我正在尝试使用 Python/Django 在 Heroku 上构建一个 webapp，我只是按照教程设置了一个 Django 项目并将其推送到 Heroku。但是，我什至无法使用普通的 Django “它成功了！” 屏幕。当然，那是因为当我检查时`heroku ps`，从来没有任何进程在运行。没有`Procfile`，但根据教程，这对于 Django 应用程序来说无关紧要。

当我运行时`heroku run python manage.py runserver`，出现以下错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <dja
ngo.contrib.staticfiles.management.commands.runserver.Command object at 0x1ff819
0>>
Traceback (most recent call last):
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/com
mands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/bas
e.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/val
idation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/mysql/v
alidation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/mysql/b
ase.py", line 411, in get_server_version
    self.cursor()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/__init_
_.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/mysql/b
ase.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "/app/.heroku/venv/lib/python2.7/site-packages/MySQLdb/__init__.py", line
 81, in Connect
    return Connection(*args, **kwargs)
  File "/app/.heroku/venv/lib/python2.7/site-packages/MySQLdb/connections.py", l
ine 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (1044, "Access denied for user '<user>
'@'%' to database 'heroku_<####################>?reconnect=true'") 
```

我确实已经将 my 设置`DATABASE_URL`为`CLEARDB_DATABASE_URL`. 另外，在 Django`settings.py`中，我按照说明添加了：

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:23:48.363

该特定错误在调用 ClearDB 后得到修复。事实证明，这`?reconnect=true`仅适用于 Rails 应用程序，应该从`DATABASE_URL`Django 应用程序中删除。

# linux - htaccess 重定向到子域并保留字符串

> ID：10883671
> 
> 赞同：3
> 
> 时间：2012-06-04T15:13:37.437
> 
> 标签：linux, apache, .htaccess, redirect

发现了一些类似的问题，但要么我无法从答案中弄清楚，要么它们不直接符合我的需求。

我想要实现的是：

我最近将我的网站的一部分移到了另一台服务器上的子域，所以以前在：`http://mysite.com/clients`现在在`http://clients.mysite.com`

using:`RedirectMatch 301 https?://mysite.com/clients/^(.*)$ https://clients.mysite.com/$1`适用于简单地将人们重定向`http://mysite.com/clients`到新的子域但是我希望能够在 /clients/ 之后保留字符串

所以如果有人点击例如`http://mysite.com/clients/could_be_a_number_of_things.php`它重定向到`http://clients.mysite.com/could_be_a_number_of_things.php`

任何人都可以建议吗？

完整的 .htaccess 按要求：

```
 # -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
#AuthName mysite.com
#AuthUserFile /home/inhost/public_html/_vti_pvt/service.pwd
#AuthGroupFile /home/inhost/public_html/_vti_pvt/service.grp

# BEGIN WordPress
Options +FollowSymLinks -MultiViews
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteCond %{HTTPS}s on(s)|
RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$
RewriteRule ^clients/(.*)$ http%1://clients.mysite.com/$1 [L,NC,R=301]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:57:23.560

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在服务器上`.htaccess`的`DOCUMENT_ROOT`目录中：`mysite.com`

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS}s on(s)|
RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$
RewriteRule ^clients/(.*)$ http%1://clients.mysite.com/$1 [L,NC,R=301] 
```

# javascript - isPrototypeOf indesign

> ID：10883673
> 
> 赞同：2
> 
> 时间：2012-06-04T15:13:40.330
> 
> 标签：javascript, adobe-indesign

嗨，我是 indesign 脚本的相对新手，想弄清楚一个对象是否是一个类的子类型。示例：我想遍历所有页面项目并获取非图形的所有内容：

```
layer = app.activeDocument.layers[layerIndex];

for (i = 0; i < layer.allPageItems.length; i++) {
  alert(layer.allPageItems[i].reflect.name)
  if(layer.allPageItems[i].isPrototypeOf (Graphic) ) {
    alert("Graphic");
  } else {
    ....
  }
} 
```

但是 if nver 匹配。有没有例子说明如何使用`isPrototypeOf`？我必须做什么来测试一个对象是某种类型还是它的子类？

**编辑**：为了澄清，我试图测试我是否有一个从 Graphic*继承的任何东西的实例。*

但据我现在所见，这似乎是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:28:06.903

您可以通过调用 getElements() 方法来访问 pageItem 的本质。它返回原始材质的数组。给定页面上的一个矩形（仅此而已）：

```
app.activeDocument.allPageItems[0].getElements()[0] instanceof Rectangle //true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:32:57.370

您可能需要[instanceof](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special_Operators/instanceof_Operator)运算符。

```
if (layer.allPageItems[i] instanceof Graphic) {
    alert("Graphic");
} else {
    ....
} 
```

您也可以使用`isPrototypeOf`，但您必须颠倒顺序并获取原型本身，而不是构造函数。所以它看起来像这样：

```
if (Graphic.prototype.isPrototypeOf(layer.allPageItems[i])) {
    alert("Graphic");
} else {
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:19:29.423

你确定它不应该是

```
Graphic.isPrototypeOf(layer.allPageItems[i]) 
```

或类似的东西

```
Graphic.prototype.isPrototypeOf(layer.allPageItems[i]) 
```

?

您当前的版本听起来像是倒退。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T22:58:26.523

显然这是不可能的，我也在 adobe 论坛上询问了这个结果： [http ://forums.adobe.com/message/4461211#4461211](http://forums.adobe.com/message/4461211#4461211)

所以简短的回答是，我无法检查我是否持有一个对象，它是它的实例`someClass`还是子对象。既没有反思也没有`isPrototypeOf`帮助。

我可能会尝试在 try catch 块中进行强制转换，但认为这很丑陋。因此，我将采用 adobe 论坛上建议的解决方案，测试所有可能的继承人（从基类继承的孩子/类）和基类。这既丑陋又冗长，但我还没有找到更好的解决方案。

**编辑**：这是 adobes 示例之一的摘录，它允许 switch 语法避免无休止的 if 构造：

```
switch (app.selection[myCounter].constructor.name){
    case "Rectangle":
    case "Oval":
    case "Polygon":
    case "GraphicLine":
    case "TextFrame":
        myObjectList.push(app.selection[myCounter]);
        break;
} 
```

# android - 如何在图像视图中获取图像的图像路径？

> ID：10883676
> 
> 赞同：1
> 
> 时间：2012-06-04T15:13:43.257
> 
> 标签：android, image, path, imageview

我在图像视图中设置了缩放图像。现在我想得到那个缩放图像的路径。那可能吗？我听说它存储在内部存储器的某个地方。

更新：

我有这个问题：我在 imagview 中设置了一组来自画廊的图像。我现在想要的是保存这个状态（这意味着图像视图中的图像）。我怎样才能做到这一点？

我考虑将带有 blob 的整个图像保存到我的 SQL 数据库中。但是后来我听说应该宁愿走图像路径。

谁能告诉我我该怎么做？

这就是我从图库中获取图像以及在 ImageView 中设置图像的方式。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICK_FROM_FILE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Log.v("IMAGE PATH====>>>> ",selectedImagePath);

            // Decode, scale and set the image.
            Bitmap myBitmap = BitmapFactory.decodeFile(selectedImagePath);
            Bitmap scaledBitmap = Bitmap.createScaledBitmap(myBitmap, NEW_WIDTH, NEW_HEIGHT, true);
            myBitmap.recycle();
            myBitmap = null;

            mImageView.setImageBitmap(scaledBitmap);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:35:36.757

尝试这个

```
String filename = "myfilename"
FileOutputStream out = new FileOutputStream(filename)
scaledBitmap.compress(Bitmap.CompressFormat.PNG, 90, out); 
```

这里有更多关于如何保存 BitMap 对象的[示例](https://stackoverflow.com/questions/649154/android-bitmap-save-to-location)。

# php - 使用来自多个表的数据

> ID：10883677
> 
> 赞同：1
> 
> 时间：2012-06-04T15:13:43.817
> 
> 标签：php, mysql, database, syntax

这是我的问题：我有 3 个表，每个表都有重叠的信息（特别是用户名）。除了用户名行在每个表中的名称不同。因为用户名是特定于用户的，所以根据用户名获取有关用户的所有其他信息是有意义的。这就是我所拥有的。（第一个函数返回查询，第二个函数返回数组中的信息（或者应该是，无论如何）。

```
function get_user_by_id($id) {
    global $connection;
    $query = "SELECT * FROM ownerOrganization, owner, queue_acl";
    $query .=" WHERE owner.ownerId=ownerOrganization.ownerId";
    $query .=" AND owner.ownerId=queue_acl.user_id";
    $query .= " AND owner.ownerId ='{$id}'";
    $result_set = mysql_query($query);
    confirm_query($result_set);
    if ($user = mysql_fetch_array($result_set)) {
        return $user;
    } else {
        return NULL;
    }
}

function get_user_id() {
    if (isset($_GET['ownerId'])) {
        return get_user_by_id($_GET['ownerId']); 
    } 
} 
```

但是当我在另一个页面上做类似的事情时`$sel_user = get_user_id();`，它实际上并没有提取任何选定的用户信息......我认为这是因为我关于使用多个表的语法不正确。无论如何，任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:21:53.617

要使用 JOINS，请在示例中使用此 snipcode：

```
$query = "SELECT * FROM (ownerOrganization INNER JOIN owner ON owner.ownerId=ownerOrganization.ownerId) INNER JOIN queue_acl ON owner.ownerId=queue_acl.user_id";
$query .=" WHERE owner.ownerId ='{$id}'"; 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:56:10.137

我正在输入@MTranchant 所写的或多或少的内容。我建议重命名您的列以便于查询创作并避免混淆。例如，您的 ownerOrganization.ownerid 可以命名为 oo_ownerid，并且表中的其他列可以遵循该命名约定。

此外，您是否使用您知道存在的硬编码 $id 对数据库运行查询？

最后，在发送到下一页的查询字符串中，是否出现了一个类似于“&ownerId=”的 ownerId 参数？

# java - 将 JSON 解析为对象数组

> ID：10883680
> 
> 赞同：0
> 
> 时间：2012-06-04T15:13:59.357
> 
> 标签：java, json, jackson, playframework-2.0

目前，我在操作中收到以下 JSON 数据：

```
[
    { "civilStatus": "M" },
    "and",
    { "familySize": "2|bw|4" },
    "or",
    { "civilStatus": "D" }
] 
```

我一直在尝试用它`play.libs.Json`来解析我在服务器上收到的字符串，但我找不到获取数组或对象的方法。

我也查看了`org.codehaus.jackson.JsonNode`文档，但我没有任何办法。另外我使用的是 Java，而不是 Scala。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:32:20.977

我发现使用 Gson 更容易。只需将其添加为 Build.scala 文件中的依赖项：

```
val appDependencies = Seq(
    ... other dpenedencies ...
    "com.google.code.gson" % "gson" % "2.1",
    ... other dpenedencies ...
) 
```

然后只需解析类似：

```
Gson gson = new Gson();
List<YourCustomBean> data = gson.fromJson(jsonString, new TypeToken<List<YourCustomBean>>(){}.getType()); 
```

# html - 在文本输入中有插入符号时保留可内容编辑的 div 选择

> ID：10883687
> 
> 赞同：0
> 
> 时间：2012-06-04T15:14:39.397
> 
> 标签：html, selection, range, mouse-cursor, multipleselection

我有一个 contenteditable div，但我希望允许用户进行选择，然后单击文本输入字段并输入一个值，而不会丢失 contenteditable 选择的突出显示。

这可能吗？我可以在 Firefox 中破解它。

当光标在另一个输入中时，我在 mousedown 上获得选择并在 mouseup 上恢复选择，但在 Chrome 中，当我恢复选择时，它会导致输入字段中的焦点丢失。这不一定在 IE 中有效，只在 FF、Safari 和 Chrome 中有效。

如果我要走的路线不可能，还有其他解决方法吗？

# c# - 无论如何要调用从 mvc3 控制器的 system.web.ui.page 继承的类中的函数？

> ID：10883692
> 
> 赞同：0
> 
> 时间：2012-06-04T15:15:00.323
> 
> 标签：c#, asp.net, asp.net-mvc-3, webforms

我有一个供应商提供的 cs 文件，其结构如下：

```
public partial class Test : System.Web.UI.Page 
{ 
    public void InsertSignature() 
   { 
        Response.Write("ASDFASDFAF#WRRASDFCAERASDCDSAF"); 
   } 
} 
```

我正在尝试使用以下代码在 MVC 3 应用程序中使用 InsertSignature 函数

```
MySample sample = new Test();

sample.InsertSignature(); 
```

我收到以下 HttpException：“响应在此上下文中不可用。” 无论如何，这可以在不修改供应商交付的产品的情况下工作。我知道有办法通过修改文件来完成这项工作，但如果可能的话，最好避免这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:12:30.350

这似乎是一个已知问题（[在这种情况下没有响应](https://stackoverflow.com/questions/6624210/response-is-not-available-in-this-context)）

只需更换

```
Response.Write("ASDFASDFAF#WRRASDFCAERASDCDSAF"); 
```

和

```
HttpContext.Current.Response.Write("ASDFASDFAF#WRRASDFCAERASDCDSAF"); 
```

这可以解决问题。好像变化不大。

**更新**：如果您希望防止代码被未来的更新重写，只需重命名该方法 - 例如从 InsertSignature() 到 InsertSig()。如果文件正在使用供应商的版本进行更新，它将根本无法编译，并且会清楚原因是什么。

# perl - 从哪里开始学习 Mojolicious？

> ID：10883698
> 
> 赞同：4
> 
> 时间：2012-06-04T15:15:25.277
> 
> 标签：perl, mojolicious

我是 Mojo 框架的新手……我浏览了[Mojolicious 网站](http://mojolicio.us)上的一些 wiki 页面，但无法理解很多东西。该文档似乎是为已经具有 Mojo 框架背景的人准备的。

所以，我想知道是否有任何地方可以让新手开始？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T17:56:31.513

wiki 不一定值得信赖，因为任何人都可以更改它，而且它并不总是最新的。

[从http://mojocasts.com](http://mojocasts.com)上的 mojocasts 开始；然后继续阅读文档。

新用户可以访问这些文档；只需确保按照[http://mojolicio.us/perldoc](http://mojolicio.us/perldoc)上列出的顺序阅读指南即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T23:18:36.137

tempire 引用的 mojocast 是一个好的开始，我发现文档有点零碎，更喜欢挖掘其他项目的代码......在这里你可以找到一些代码来阅读这里 [https://github.com/kraih/mojo /wiki/Example-applications](https://github.com/kraih/mojo/wiki/Example-applications) 这个不错： [https ://github.com/tempire/MojoExample](https://github.com/tempire/MojoExample)

# c# - 浏览器中的不同视图源内容和 c# 中的 httpwebrequest

> ID：10883699
> 
> 赞同：0
> 
> 时间：2012-06-04T15:15:29.380
> 
> 标签：c#, asp.net, web-scraping

我正在尝试从此页面中抓取内容：[https://www.google.com/search?hl=en&biw=1920&bih=956&tbm=shop&q=Xenon+12640&oq=Xenon+12640&aq=f&gs_l=serp.3...3743.3743。 0.3905.1.1.0.0.0.0.0.0..0.0.ekh..0.0.Hq3XS7AxFDU&sei=Dr_MT_WOM6nO2AWE25mTCA&gbv=2](https://www.google.com/search?hl=en&biw=1920&bih=956&tbm=shop&q=Xenon+12640&oq=Xenon+12640&aq=f&gs_l=serp.3...3743.3743.0.3905.1.1.0.0.0.0.0.0..0.0.ekh..0.0.Hq3XS7AxFDU&sei=Dr_MT_WOM6nO2AWE25mTCA&gbv=2)

我遇到的问题是在浏览器中打开该网址我得到了我需要抓取的所有内容，但在代码中抓取相同的链接，缺少两个（重要）部分，评论编号和评级，低于价格和卖家信息。这是来自 c# 内部 Web 客户端的屏幕截图：http: //gyazo.com/908a37c7f70712fba1f82ec90a604d4d.png? [1338822369](http://gyazo.com/908a37c7f70712fba1f82ec90a604d4d.png?1338822369)

这是我试图获取内容的代码：

```
 public string navGet(string inURL, CookieContainer inCookieContainer, bool GZip, string proxyAddress, int proxyPort,string proxyUserName, string proxyPassword)
    {
        try
        {
        this.currentUrl = inURL;           
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(inURL);
    webRequest.Timeout = this.TimeOutSetting;
    webRequest.CookieContainer = inCookieContainer;

    if (proxyAddress == "0" || proxyPort == 0)
    { }
    else
    {
        webRequest.Proxy = new WebProxy(proxyAddress, proxyPort);
        // Use login credentials to access proxy
        NetworkCredential networkCredential = new NetworkCredential(proxyUserName, proxyPassword);
        webRequest.Proxy.Credentials = networkCredential;
    }

    Uri destination = webRequest.Address;
    webRequest.KeepAlive = true;
    webRequest.Method = "GET";
    webRequest.Accept = "*/*";
    webRequest.Headers.Add("Accept-Language", "en-us");
    if (GZip)
    {
        webRequest.Headers.Add("Accept-Encoding", "gzip, deflate");
    }
        webRequest.AllowAutoRedirect = true;
    webRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; FunWebProducts; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";

        webRequest.ContentType = "text/xml";         
        //webRequest.CookieContainer.Add(inCookieContainer.GetCookies(destination));

    try
    {
        string strSessionID = inCookieContainer.GetCookies(destination)["PHPSESSID"].Value;
        webRequest.Headers.Add("Cookie", "USER_OK=1;PHPSESSID=" + strSessionID);
    }
    catch (Exception ex2)
    {

    }
        HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
        if (webRequest.HaveResponse)
        {
            // First handle cookies
            foreach(Cookie retCookie in webResponse.Cookies)
            {
                bool cookieFound = false;
                foreach(Cookie oldCookie in inCookieContainer.GetCookies(destination))
                {
                    if (retCookie.Name.Equals(oldCookie.Name))
                    {
                        oldCookie.Value = retCookie.Value;
                        cookieFound = true;
                    }
                }
                if (!cookieFound)
                    inCookieContainer.Add(retCookie);
            }                

            // Read response
        Stream responseStream = responseStream = webResponse.GetResponseStream();

        if (webResponse.ContentEncoding.ToLower().Contains("gzip"))
        {
            responseStream = new GZipStream(responseStream, CompressionMode.Decompress);
        }
        else if (webResponse.ContentEncoding.ToLower().Contains("deflate"))
        {
            responseStream = new DeflateStream(responseStream, CompressionMode.Decompress);
        }

        StreamReader stream = new StreamReader(responseStream, System.Text.Encoding.Default);

        string responseString = stream.ReadToEnd();
            stream.Close();
            this.currentUrl = webResponse.ResponseUri.ToString();
            this.currentAddress = webRequest.Address.ToString();               
            setViewState(responseString);
            return responseString;
        }
        throw new Exception("No response received from host.");
        return "An error was encountered";
        }
        catch(Exception ex)
        {
            //MessageBox.Show("NavGet:" + ex.Message);
            return ex.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:19:54.760

看起来这是因为评论数量和评级是使用 Java 脚本（可能是 AJAX 或其他东西）动态生成的。在这种情况下，您需要分析页面在浏览器中加载时发生的额外流量，并查找此数据的传输位置或分析 JavaScript 代码以查看其生成方式。

# c# - 扫描仪连接通知

> ID：10883701
> 
> 赞同：0
> 
> 时间：2012-06-04T15:15:39.783
> 
> 标签：c#, imaging, twain

我正在开发一个扫描应用程序，并且我想仅在我的/任何扫描仪可用时启用“扫描”按钮。

我尝试使用[GdPicture](http://guides.gdpicture.com/v9/html/content/TWAIN_Features.html)来实现这一点，但没有任何成功（顺便说一句。它的库真的很差，不要使用它）。[我还尝试使用Atalasoft 的 TWAIN](http://www.atalasoft.com/docs/dotimage/docs/Atalasoft.DotTwain.html)和较低级别的[TWAIN 库](https://code.google.com/p/twaindotnet/)（感谢那篇[文章](https://stackoverflow.com/questions/476084/c-sharp-twain-interaction)我找到了）来获得某种类似的事件。没有工作。

我也有一个想法来[检测](https://stackoverflow.com/questions/1783657/get-notification-when-a-new-drive-is-connected-via-usb-or-other-means-c)连接到计算机的新设备，而不是重新扫描 TWAIN 设备，但也许你们中的任何人都知道更好的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:51:17.160

You may need to write a wrapper yourself for a scanner. If the above mentioned libraries have no API to tell the scanner's status, you can try to connect to the scanner, if you get connected it means the scanner is up. I think they provide connection API for a scanner.

# firefox - 如何使 Firefox 以正确的颜色渲染 PNG？

> ID：10883702
> 
> 赞同：2
> 
> 时间：2012-06-04T15:15:40.417
> 
> 标签：firefox, png

Firefox 12 以较淡的颜色呈现下面的图像，而 Chrome 19、Opera 11、Safari 5 和 IE9 正确呈现它。

左边的图片是上传到 Stackoverflow 的原始 PNG，右边的是 Firefox 渲染的截图片段：

![原来的](../Images/53a461d4cd4ddeb1b69c2130234f071d.png) ![火狐](../Images/900b1d6698fc1c474234ec2fac8500bf.png)

当您在 Firefox 上查看此问题页面时，您仍然会看到不同之处。我相信 Firefox 也将相同的颜色转换应用于它自己的渲染（由 snip 工具保存）。但我在 stackoverflow 徽标上看不到任何渲染差异。

我尝试使用 Paint.NET 保存的 PNG 和 OptiPNG 的输出，结果是一样的。任何故障排除提示也值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:12:10.430

png 图像有一个 gAMA 块，因此它的渲染将取决于进行渲染的事物是否支持 PNG 的伽马校正。

Firefox 确实支持这一点。其他浏览器可能没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T13:22:20.413

有趣的是，2016 年的情况正好相反。在没有 ICC 配置文件的情况下，Firefox 需要 sRGB 块来呈现与 Safari/Chrome/WebKit 相同的 PNG。

如果没有 sRGB 块，您可以使用免费/开源 pngcrush 将 sRGB 块添加到您的图像中。

```
pngcrush -sRGB existing.png new-better.png 
```

注意 - Firefox 45.0.2 for OS X，由 Adob​​e Illustrator CC 2015 生成的 PNG，您的里程可能会有所不同...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T17:31:06.580

在 PHP 中使用**iMagick**创建 png 图片时，可能会出现同样的情况。目前，Firefox 和 Chrome 都以与 IE11 不同的颜色呈现图像。

您可以在保存之前使用此 PHP 代码删除伽玛信息：

```
$imagick->stripImage(); 
```

# php - 将 actionscript 中的变量插入 MySQL 表

> ID：10883704
> 
> 赞同：2
> 
> 时间：2012-06-04T15:15:44.603
> 
> 标签：php, mysql, flash, uploadify, user-agent

我正在使用 $_SERVER['HTTP_USER_AGENT'] 将上传文件到我的网站的用户的浏览器和操作系统插入到 MySQL 表中。我正在使用uploadifive，它可以在不支持HTML5 的浏览器中使用flash (uploadify)。使用 Flash 时，不使用 $_SERVER['HTTP_USER_AGENT'] 返回操作系统和浏览器，而是看到“Adobe Flash Player 11”。

我可以从[本教程](http://active.tutsplus.com/tutorials/actionscript/quick-tip-detect-the-browser-and-user-agent-with-as3/)中看到，我可以在uploadify flash 文件中添加一些动作脚本以返回浏览器。ExternalInterface.call 返回与 $_SERVER['HTTP_USER_AGENT'] 相同的信息，该信息存储在 userAgent 变量中。我不确定如何将它与插入 MySQL 数据库集成。我需要一个参数来插入 MySQL 表中的字段。

有人可以帮忙吗？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:00:39.000

您可以通过 javascript 获取 userAgent`navigator.userAgent`

在 Uploadify 中应该有一个类似于以下内容的 js：
在本例中，服务器文件是 uploadify.php，因此您可以像在任何其他 url 中一样轻松传递值。

```
$(function() {
    $('#file_upload').uploadify({
        'swf'      : 'uploadify.swf',
        'uploader' : 'uploadify.php' + '?ua=' + encodeURIComponent(navigator.userAgent)
    });
}); 
```

因此，在uploadify.php 中，您可以通过以下方式访问用户代理

`$_GET['ua']`

现在您只需要检查实际分配了哪个输入变量：

```
$userAgent = '';
if (isset($_SERVER['HTTP_USER_AGENT'] && false === strstr($_SERVER['HTTP_USER_AGENT'], 'Adobe Flash Player') {
    $userAgent = $_SERVER['HTTP_USER_AGENT'];
} else {
    $userAgent = $_GET['ua'];
} 
```

所以你可以在你的 mysql 语句中使用 $userAgent 。
但是不要忘记使用`mysql_real_escape_string`（或使用 PDO 绑定）来逃避它：

```
$userAgent = mysql_real_escape_string($userAgent); 
```

# c++ - 在地图中存储 boost::signals2 信号？

> ID：10883705
> 
> 赞同：1
> 
> 时间：2012-06-04T15:15:47.980
> 
> 标签：c++, signals-slots, boost-signals2

我面临以下问题：我想在地图中*存储*许多 `boost::signals2`信号变量。由于这些信号是*不可复制的*，这显然是行不通的。我该如何解决这个问题？我已经找到[了这个较旧的问题](https://stackoverflow.com/questions/3057009/storing-objects-in-the-array)。在其中，一张海报建议将信号存储为`shared_ptr`. 这是*唯一*的方法吗？它是否有任何缺点，或者更重要的是，它是否*安全*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:08:04.587

正如一些评论员所指出的：使用`shared_ptrs`for 信号是非常安全的。我的实现工作有效，同时经过了彻底的测试，我很高兴地报告确实没有问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T05:45:32.200

如果不打算共享信号，则可以将`boost::signal`在堆上分配的对象存储在[Boost Pointer Container](http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html)内：

> Boost.Pointer Container 以异常安全的方式和最小的开销提供了用于保存堆分配对象的容器。

升压指针容器存储指向其元素的指针，并在必要时自动删除这些堆对象。API 试图隐藏元素由指针存储的事实，并尽可能返回元素引用。

例子：

```
#include <iostream>
#include <map>
#include <string>
#include <boost/ptr_container/ptr_map.hpp>
#include <boost/signals.hpp>

void foo() {std::cout << "foo\n";}

void bar() {std::cout << "bar\n";}

int main()
{
    typedef boost::signal<void ()> Signal;
    boost::ptr_map< std::string, Signal> sigmap;
    sigmap["foo"].connect(&foo);
    sigmap["bar"].connect(&bar);
    sigmap["foo"](); // emit signal associated with "foo"
    sigmap["bar"](); // emit signal associated with "bar"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T08:01:32.683

由于它不可复制且不可移动（可能在最新版本中已更改）。对于 std::map 如果您不想使用 shared_ptr ，则可以使用 operator[] 而不是 insert 或 emplace 方法，因为 operator[] 如果 key_value 不存在则构造 mapped_type 。显然，当您想使用先前分配的插槽添加信号时，它并不能解决问题。

```
typedef boost::signal2... Signal;
std::map<int, Signal> sigmap;
sigmap[1]; // constructs signal using default constructor
sigmap[2].connect(slot); // constructs signal and connects slot 
```

# svn - Subversion 重新整合分支冲突

> ID：10883708
> 
> 赞同：4
> 
> 时间：2012-06-04T15:16:03.903
> 
> 标签：svn, version-control, merge, conflict, feature-branch

我正在使用`svn`版本控制并有以下问题：

*   假设我在我的`feature branch`不断上游变化中开发了一些东西`trunk` *（通过简单地合并它们并解决冲突）。*现在，在某个时刻，我进行了最后一次上游合并`trunk`并解决了冲突。而且，例如，在那之后，`merge`我以某种方式设法**“冻结”**了`trunk`- 所有提交`trunk`都被拒绝并且它始终保持在相同的状态。

*   这是否**保证**我执行`merge --reintegrate`for my时不存在冲突`feature branch`？或者我错过了一些可能导致它们的其他条件和行动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:14:15.510

你打算如何*冻结*树干？

如果您先冻结主干，然后从主干合并到分支，则可以保证自上次合并以来没有人接触过主干。

在以下情况下，您不应该有任何合并冲突：

*   您不会挑选合并，因为当您从分支合并到主干时应该处理所有合并冲突 - 如果您没有对合并进行任何挑选。
*   您总是从同一个根目录进行合并。

然而，在一些奇怪的边缘情况下，这可能不一定是真的。我已经尝试使用两个功能分支来查看是否可以强制重新集成冲突，但我不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T00:09:44.583

我没有看到这种行为，我能够在合并 --reintegrate 上产生冲突。这是 svn 1.6.18，不确定这里是否有功能依赖。特别是，如果分支上的冲突需要手动解决（即 --accept mine-* 或 --accept theirs-* 不起作用），我看不出颠覆如何*避免*合并冲突 -重新整合，因为它不能真正“告诉”你是如何解决冲突的，并且主干上的冲突线路没有改变。

我实际上正在寻找一个相关问题的解决方案 - 如何在重新合并到主干时“记住”手动解决方案，因此用户不必经历两次相同的冲突解决方案（以及相同的思考过程） - 但是如果这里没有讨论，我会单独问这个问题。

# ruby - atom.xml 中的液体异常

> ID：10883709
> 
> 赞同：0
> 
> 时间：2012-06-04T15:16:08.177
> 
> 标签：ruby, regex, liquid, octopress

我正在使用 Octopress 写博客。但是原来它不支持Tex，所以我在网上寻求了一些指导。最后，我没有使用Tex&markdown。

更糟糕的是，会出现以下问题：

```
lo@lo:~/blog/octopress$ rake generate
## Generating Site with Jekyll
unchanged sass/screen.scss
unchanged sass/syntax/syntax.scss
unchanged sass/bootstrap/responsive.scss
unchanged sass/bootstrap/bootstrap.scss
Configuration from /home/lo/blog/octopress/_config.yml
Building site: source -> public
Liquid Exception: Variable '{{' was not properly terminated with regexp: /\}\}/  in    atom.xml
Liquid Exception: Variable '{{' was not properly terminated with regexp: /\}\}/  in atom.xml
Liquid Exception: Variable '{{' was not properly terminated with regexp: /\}\}/  in atom.xml
Successfully generated site: source -> public
lo@lo:~/blog/octopress$` 
```

现在我不知道如何解决它。

我尝试了`diff`所有文件`/octopress`和`/octopress.bk`.
最后，我发现我在`*.markdown.`

我写了`\{\{\{ \}\}\}`，这导致了问题。现在我解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:03:10.773

似乎您的 atom.xml 文件已更改。您可以在包含您的网站的文件夹的根目录中找到它。您需要找到的是不匹配的 {{ tag }}。很可能缺少一个括号，例如 {{ 仅用一个 } 关闭它。

这是您可以用作示例的默认 atom.xml 文件：

```
---
layout: nil
---
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Your Title</title>
 <link href="http://www.example.com/atom.xml" rel="self"/>
 <link href="http://www.example.com/"/>
 <updated>{{ site.time | date_to_xmlschema }}</updated>
 <id>http://www.example.com/</id>
 <author>
   <name>Your Name/name>
   <email>Your Email</email>
 </author>

 {% for post in site.posts %}
 <entry>
   <title>{{ post.title }}</title>
   <link href="http://www.example.com{{ post.url }}"/>
   <updated>{{ post.date | date_to_xmlschema }}</updated>
   <id>http://www.example.com{{ post.id }}</id>
   <content type="html">{{ post.content | xml_escape }}</content>
 </entry>
 {% endfor %}

</feed> 
```

# c# - 在while循环中为bool赋值

> ID：10883711
> 
> 赞同：-2
> 
> 时间：2012-06-04T15:16:15.603
> 
> 标签：c#

我知道这是一个非常新手的 C# 问题，但我正在实现一个小程序，它执行以下操作：

```
namespace ConsoleApplication
{
    class Program
{
static void Main(string[] args)
        {
    bool isRun = false;
                int number = 0;
                while (isRun = (true) && number < 3)
                {
                    ++number;
                    Console.WriteLine("Number = {0}", number.ToString());
                    Console.WriteLine();
                }
                Console.WriteLine(isRun.ToString());
                Console.ReadLine();
}
}
} 
```

在 while 循环结束时，我预计该`bool`值为 true，但 is 打印为`false`. 这是为什么？这与 C++ 有什么不同吗？在 C++ 中我会做类似的事情，而 C# 中的同样事情给了我错误

```
while(number<3)
{
is = true;
}
if(is){
cout<<true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T15:21:53.790

您看到此行为的原因是涉及的运算符优先级。这里的绑定比循环中的代码实际上绑定`&&`得更强烈，如下所示`=`

```
while (isRun = (true && number < 3)) {
  ...
} 
```

一旦表达式被赋值给`number > 3`值并同时终止循环。因此，一旦循环退出，您将看到`&&``false``isRun``isRun``false`

要获得您正在寻找的行为，您需要使用括号手动更正优先级。

```
while ((isRun = (true)) && number < 3) {
  ...
} 
```

注意：通常，正如@Servey 指出的那样，将局部变量分配给循环谓词内的表达式被认为是不好的做法。许多 C# 用户实际上会对代码完全编译感到惊讶，因为它们已被限制为仅`==`在循环中使用。

在此模式的循环的第一行简单地设置`isRun`为更惯用。`true`

```
while (number < 3) {
  isRun = true;
  ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T15:24:25.717

问题是您已将`boolean`变量设置为`false`并且没有将其分配回`true`，在 while 循环中，您是`matching`针对 的`value true`，因此以防`fails`万一`every`。

# c# - 延迟双击编辑文本块 WPF

> ID：10883712
> 
> 赞同：0
> 
> 时间：2012-06-04T15:16:24.970
> 
> 标签：c#, wpf, textblock

我正在尝试通过延迟双击使某个文本块变为可编辑。当您执行延迟双击以编辑文件和文件夹名称时，类似于 Windows 资源管理器中的功能。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:31:19.853

您在 Windows 资源管理器中看到的是单击选定/焦点项目启动重命名操作。您看到的第一次单击实际上选择/聚焦项目，第二次单击启动重命名操作。您可以通过使用键盘选择不同的项目，然后单击新选择的项目来验证这一点。

似乎在单击选定/焦点项目和 UI 进入重命名模式之间有很短的持续时间（例如半秒）。所以......如果点击了一个已经有焦点的项目，你需要做一些事情，比如启动一个计时器。如果计时器到期时该项目仍然具有焦点，请进入重命名模式。

从那里开始，只需将正确的模板与您希望实现的任何触发器/标志逻辑一起应用即可。

**编辑**：对 WPF[就地编辑](https://stackoverflow.com/questions/6923851/how-do-i-fully-implement-in-place-editing-in-a-listbox)进行搜索，您应该会找到一些代码示例。

**注意**：如果您也想连接 F2 键，也倾向于对选定项目启动重命名操作。

# php - 如何在执行操作之前确保对象存在

> ID：10883714
> 
> 赞同：2
> 
> 时间：2012-06-04T15:16:39.750
> 
> 标签：php, oop, class

我有一个`index.php`从其他 php 文件加载页面的片段。在顶部`index.php`我有所有的`require_once`语句，包括处理数据库连接的 PHP 类，我还实例化了该类的一个对象：

```
<?php 
    require_once 'libs/DatabaseHandler.php';

    $dbh = new DatabaseHandler('localhost', 'root', '*******', 'pride2012');

    require_once 'pages/01_includes.php';
    require_once 'pages/02_menu.php';
    require_once 'pages/03_slider.php';
    require_once 'pages/04_news.php';   
?> 
```

使用 db 管理类的页面位是`04_news.php`，在加载之前构造对象是否足以`04_news.php`确保在数据库相关操作开始之前对象存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:19:27.587

如果它是一个对象并且它是DatabaseHandler的一个实例，您可以尝试该对象是否退出。

[http://php.net/manual/en/function.is-object.php](http://php.net/manual/en/function.is-object.php)

[http://php.net/manual/en/internals2.opcodes.instanceof.php](http://php.net/manual/en/internals2.opcodes.instanceof.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:21:06.130

在操作之前定义对象就足够了。

或者，您可以根据需要使用内置`__autoload( )`方法动态加载类。

查看[PHP.net: Autoloading Classes](http://php.net/manual/en/language.oop5.autoload.php)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:22:49.093

如果您确定 04_news.php 永远不会被单独调用，也就是不会被 index.php 调用，那就足够了。

您还可以将 DatabaseHandler 实现为单例[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

# php - ImageMagick/PHP 调整大小问题：图像不会调整大小，但安装了 ImageMagick

> ID：10883716
> 
> 赞同：0
> 
> 时间：2012-06-04T15:16:46.280
> 
> 标签：php, imagemagick

我对 ImageMagick 有一个奇怪的问题。

在同一个脚本中，我有以下代码：

```
 $ct = system("convert -version");
 echo $ct; 
```

并显示以下响应：

```
 Version: ImageMagick 6.6.0-4 2012-04-26 Q16 http://www.imagemagick.org Copyright: Copyright (C) 1999-2010 ImageMagick Studio LLC Features: OpenMP 
```

但是，当我尝试这样做时：

```
 $ct2 = system("convert -resize 800x600 test-image.jpg test-image2.jpg", $retval);
 echo $retval; 
```

它返回 1，但图像不会调整大小。不应该在文件名“test-image2.jpg”下创建第二个图像，调整大小吗？我检查了目录权限，它们设置为 0777，所以这不应该是问题。知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:24:06.217

试试这个来显示错误：

```
$array = array(); 
echo "<pre>"; 
exec("convert test-image.jpg -resize 800x600 test-image2.jpg 2>&1", $array);  
echo "<br>".print_r($array)."<br>";  
echo "</pre>"; 
```

此外，我使用 exec 而不是 system，如上所述，文件名应该在 convert 之后直接出现，我不会使用 - 而是 _ 。

系统输出到屏幕而 exec 在您的第一个代码中没有这样，您应该能够使用它：

```
system("convert -version"); 
```

试试这个，看看 IM 的路径是什么，然后尝试将 convert 更改为可能类似于 /usr/local/bin/convert 的路径

```
echo "<pre>";
system("type convert"); 
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:22:38.080

的返回码`1`通常被认为是错误。`0`表示“没有发生错误”。

我认为这是因为您的论点顺序错误。ImageMagick 想要一个输入文件、一堆操作，然后是一个输出文件。尝试切换参数的顺序：

```
convert test-image.jpg -resize 800x600 test-image2.jpg 
```

* * *

一个好主意是查看 PHP 的[IMagick](http://php.net/IMagick)扩展。它为大多数 ImageMagick 函数提供了面向对象的接口。

# c++ - Matlab - 累积分布函数（CDF）

> ID：10883717
> 
> 赞同：1
> 
> 时间：2012-06-04T15:16:50.197
> 
> 标签：c++, matlab, optimization, boost

我正在进行从 Matlab 到 C++ 的代码转换，出于某些重要原因，我必须获得均值 = 0 且方差 = 1 的“正态”函数（在 matlab 中为“范数”）的累积分布函数。

Matlab 中的实现是这样的：

```
map.c = cdf( 'norm', map.c, 0,1 ); 
```

这应该是来自 map.c 的直方图的均衡化。

由于我没有小数，问题出现在将其翻译成 C++ 的那一刻。我尝试了很多典型的 cdf 实现：例如我在这里找到的 C++ 代码 [，C/C++ 中的累积正态分布函数，](https://stackoverflow.com/questions/2328258/cumulative-normal-distribution-function-in-c-c)但我严重缺乏小数，所以我尝试了 boost 实现：

```
#include "boost/math/distributions.hpp" 

boost::math::normal_distribution<> d(0,1); 
```

但它仍然与 Matlab 的实现不同（我想它似乎更精确！）

有谁知道我在哪里可以找到这样一个过程的原始 Matlab 源代码，或者我应该考虑哪个小数位数是正确的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:36:45.740

*Octave*是一个开源的 Matlab 克隆。这是 Octave 实现的源代码：http `normcdf`: [//octave-nan.sourcearchive.com/documentation/1.0.6/normcdf_8m-source.html](http://octave-nan.sourcearchive.com/documentation/1.0.6/normcdf_8m-source.html)

如果对您有帮助，它应该（几乎）与 Matlab 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:41:25.223

高斯 CDF 是一个有趣的函数。我不知道我的回答是否会引起您的兴趣，但可能会引起稍后查找您问题的其他人的兴趣，所以在这里。

可以通过逐项积分 PDF 的泰勒级数来计算 CDF。这种方法在高斯钟形曲线的主体中效果很好，只是在尾部数字上失败了。在尾巴上，它需要特殊功能的技术。我读过的最好的资料是 NN Lebedev 的[Special Functions and They Applications](http://store.doverpublications.com/0486606244.html)，Ch。2，多佛尔，1972 年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:26:37.293

C and C++ support `long double` for a more precise floating point type. You could try using that in your implementation. You can check your compiler documentation to see if it provides an even higher precision floating point type. GCC 4.3 and higher provide `__float128` which has even more precision.

# java - 如何使用 java-Google Docs Api 将文件上传到谷歌驱动器？

> ID：10883718
> 
> 赞同：0
> 
> 时间：2012-06-04T15:16:50.827
> 
> 标签：java, jakarta-mail, google-docs-api

我已经使用旧版本的 API 将文件上传到 Google 文档，但现在 API 版本已修改，所以我无法上传。

以前我使用这些行进行授权：

```
DocsService service = new DocsService("MyDocumentsListIntegration-v1");
    service.setUserCredentials(USERNAME, PASSWORD); 
```

但现在它给出了这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/mail/MessagingException
    at sample.main(sample.java:15)
Caused by: java.lang.ClassNotFoundException: javax.mail.MessagingException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:14:50.113

您似乎缺少外部依赖项之一 mail.jar，它是 Sun 的 JavaMail API 的一部分。

查看此页面以获取有关如何获取它以及所有其他外部依赖项的说明：[https ://developers.google.com/gdata/articles/java_client_lib](https://developers.google.com/gdata/articles/java_client_lib)

# java - 如何绕过扫描仪检查下一个元素（如果有意义的话）

> ID：10883722
> 
> 赞同：1
> 
> 时间：2012-06-04T15:17:01.070
> 
> 标签：java, networking, java.util.scanner

我正在尝试创建一个连续线程，其中服务器从客户端接收/发送消息但是当我尝试检查下一个元素时它卡住了：

```
public void run()
{
    try
    {
        try
        {
            ArrayList<Socket> connections = parent.getConnections();
            in = new Scanner(socket.getInputStream());

            while(true)
            {
                if(in.hasNextLine()) // Gets stuck here
                {
                    String message = in.nextLine();
                    System.out.println("Client said " + message);
                }
            }
        }

        finally
        {
            socket.close();
        }
    }

    catch(Exception e)
    {
        e.printStackTrace();
    } 
```

如何使循环不会卡在指定点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:28:53.237

假设您希望能够处理“行”，我可能会从以下内容开始：

```
public class SocketReader implements Runnable {

    private final InputStream stream;
    private final Queue<String> destination;
    private volatile boolean active = true;

    private SocketReader(InputStream stream, Queue<String> destination) {
        this.stream = stream;
        this.destination = destination;
    }

    public static SocketReader getReader(Socket toRead, Queue<String> destination) throws IOException {
        return new SocketReader(toRead.getInputStream(), destination);
    }

    public void shutdown() {
        active = false;
    }

    public void run() {
        while(active) {
            if (stream.hasNextLine() && active) {
                final String line = stream.nextLine;
                destination.add(line);
            }
        }
        try {
            stream.close();
        } catch (IOException e) {
            // Log somewhere
        }
    }
} 
```

将它放到它自己的线程中（或者作为线程或执行程序池的一部分，真的），并且您已经使应用程序的其余部分与此代码无关。 **期望**在等待来自 的更新时阻塞`stream.hasNextLine()`。`BlockingQueue`如果您不想主动轮询队列，但正在以其他方式处理更新，您甚至可以提供。

然后，您可以对输出执行以下操作：

```
public class QueuedPrinter implements Runnable {

    private final Queue<String> input;
    private final PrintStream destination;
    private volatile boolean active;

    public QueuedPrinter(Queue<String> input, PrintStream destination) {
        this.input = input;
        this.destination = destination;
    }

    public void shutdown() {
        active = false;
    }

    public void run() {
        while(active) {
            final String line = input.poll();
            if (line != null && active) {
                destination.println(line);
            }
        }
    }

} 
```

请注意，我没有对此进行测试，您可能需要针对其他 Checked 异常稍作调整。您可能需要添加额外的错误检查代码（想到空处理）。此外，这不是*完全*线程安全的，但对于大多数用途来说可能“足够好”。

# ruby-on-rails - 哪些 Rails 3.1 或更高版本的调度程序可以在 ubuntu 12.04 上一直保持运行？

> ID：10883728
> 
> 赞同：0
> 
> 时间：2012-06-04T15:17:23.247
> 
> 标签：ruby-on-rails, scheduled-tasks, scheduler, rufus-scheduler

我们正在为 ubuntu 12.04 服务器上的 rails 3.1 应用程序寻找一个可以一直保持运行的调度程序。目前我们正在使用 rufus 调度程序，它可能会被乘客意外杀死，并且不能一直保持打开状态。那里有很多调度程序可用。我们正在为我们的 rails 应用程序寻找一个简单易用的应用程序。调度程序的主要目的是定期触发以检查会话时间戳并在必要时重置。有什么推荐吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:07:43.347

你看过发条吗？

[https://rubygems.org/gems/clockwork](https://rubygems.org/gems/clockwork)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T22:52:44.373

对于 rufus-scheduler vs Passenger，您可能需要查看[Debugging Rufus scheduler](https://stackoverflow.com/questions/18108719/debugging-rufus-scheduler/18156180#18156180)

否则，如果您不想调整您的Passenger，请使用crond 方式并使用Whenever：[https ://github.com/javan/whenever](https://github.com/javan/whenever)

# java - Java ProcessBuilder 内存

> ID：10883729
> 
> 赞同：1
> 
> 时间：2012-06-04T15:17:24.217
> 
> 标签：java, memory, processbuilder

我想知道是否有人确切地知道 ProcessBuilder/Runtime.exec() 是否在 JVM 内存空间内执行，或者它是否使用完全独立的系统内存并以某种方式将输出发送到 Java。我找不到有关该主题的任何文档。

由于安全问题和能够读取输出，我认为是前者，但我想绝对确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T15:25:41.860

新进程在启动它的 Java 进程之外运行。作为进程管理的一部分，分配给新进程的内存由操作系统[管理](http://en.wikipedia.org/wiki/Process_management_%28computing%29)。

Java 类`ProcessBuilder`，它提供了一个用于启动和与新进程通信的接口，在 Java 进程内部运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:29:23.100

似乎很清楚 exec 为那些不熟悉操作系统术语的人启动了一个新进程或程序。这就是为什么它具有输入输出功能、设置环境的能力以及等待外部程序返回的能力。

[javadoc 的第一行说明了一切](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)。

```
Executes the specified string command in a separate process.

The command argument is parsed into tokens and then executed as a command in a
separate process. The token parsing is done by a StringTokenizer created by the 
call:

     new StringTokenizer(command)

with no further modifications of the character categories. This method has exactly
the same effect as exec(command, null). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:31:51.053

从Java SE的[并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)参考中说：

> 一个进程有一个独立的执行环境。一个进程通常有一套完整的、私有的基本运行时资源；特别是，每个进程都有自己的内存空间。

如果您对内部结构感兴趣，请查看 openJDK 中的 UNIX Process 类。

# windows - 加载两个本身与不同版本的库静态链接的 dll 会在将它们都加载到可执行文件中时导致崩溃

> ID：10883731
> 
> 赞同：1
> 
> 时间：2012-06-04T15:17:46.577
> 
> 标签：windows, dynamic, dll, static, linker

我们有两个 dll，分别是 A 和 B。两者都使用静态链接到它们的库 C 的不同版本。现在，当我们将这些 dll 加载到可执行文件中并使用它们的功能时，程序就会崩溃。

有人可以解释这背后的原因以及如何解决吗？我们只能在 XP 中看到这个问题，它在 Windows 7 中运行良好（不知何故）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:22:03.913

程序崩溃是因为不同版本的 C DLL 具有相互冲突的不同类型定义。如果您有某些字段在一个版本中不存在而在另一个版本中存在，那么根据 DLL 的类型，您将获得 2 种不同的场景。托管将无法绑定并会告诉您。非托管会破坏内存，并且您会在其他地方意外地遇到一些令人讨厌的错误。

您在操作系统之间看到不同的行为可能是因为 XP 的内存管理方式与 7 不同（让我相信它是非托管 DLL），但这很难说。

# java - 如何处理应用 BeanValidation 关系约束的错误？

> ID：10883736
> 
> 赞同：6
> 
> 时间：2012-06-04T15:18:04.190
> 
> 标签：java, spring, hibernate, tomcat, constraints

我在 Spring + Hibernate 4.1 应用程序中建立 oneToMany 关系时遇到了一些问题这是我的实体类。每个 USER_ROLE 记录都有 FK 到 USER 记录。我在互联网上找不到任何有用的东西。

```
@Entity
@Table( name = "USERS" )
public class User {

     long id;
     String login;
     String password;
     String name;
     String surname;
     GregorianCalendar birthDate;
     String email;
     GregorianCalendar joinDate;
     String randomKey;
     List<UserRole> userRoles = new ArrayList<UserRole>();

    public User(){ } //JavaBean Hibernate requirement

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy = "increment")
    @Column(name="USER_ID", unique=true, nullable=false)
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }
...

    @OneToMany(mappedBy = "user", fetch = FetchType.LAZY)
    public List<UserRole> getUserRoles() {
        return userRoles;
    }

    public void setAccountRole(List<UserRole> aUserRoles) {
        for (UserRole role : aUserRoles) {
            this.addUserRole(role);
        }
    }

    public void addUserRole(UserRole aRole) {
        if (!this.userRoles.contains(aRole)) {
            aRole.setUser(this);
            this.userRoles.add(aRole);
        }
    }
}

@Entity
@Table(name = "USER_ROLE")
public class UserRole {

    Integer roleId;
    String role;
    User user;

    public UserRole() { }

//  public UserRole(String role) {
//      this.setRole(role);
//  }

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy = "increment")
    @Column(name = "ROLE_ID", unique = true, nullable = false)
    public Integer getRoleId() {
        return roleId;
    }

    public void setRoleId(Integer roleId) {
        this.roleId = roleId;
    }

    @Basic
    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "USER_ID", nullable = false)
    public User getUser() {
        return user;
    }

    public void setUser(User aUser) {
        this.user = aUser;
    }
} 
```

这是我的堆栈跟踪中的第一个异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'homeController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: pl.rafalo235.encyklopedia.model.dao.UserDAO pl.rafalo235.encyklopedia.controllers.HomeController.userDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDAO': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.orm.hibernate4.LocalSessionFactoryBean pl.rafalo235.encyklopedia.model.dao.UserDAO.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/encyklopediaDispatcherServlet-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1189)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1103)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4935)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5262)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5257)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T00:58:31.560

我没有使用 Spring，我使用的是 hibernate 4.1.8 并且可以添加到我的 hibernate.cfg.xml 中：

```
<property name="javax.persistence.validation.mode">none</property> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-27T12:39:53.290

尝试在 Spring **validation.mode**中添加到休眠配置- 无：

```
<bean id="sessionFactory"
      class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            ....
            <prop key="javax.persistence.validation.mode">none</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-24T11:22:57.883

使用 JPA 和 Hibernate 对我添加到 persistence.xml 有效：

```
<property name="javax.persistence.validation.mode" value="none"/> 
```

# macos - NSTextView：何时自动插入字符（如自动匹配括号）？

> ID：10883738
> 
> 赞同：1
> 
> 时间：2012-06-04T15:18:24.780
> 
> 标签：macos, cocoa, nstextview, nstextstorage

我有一个`NSTextView`and 我正在充当它的`NSTextStorage`代表，所以我正在获取`textStorageWillProcessEditing:`and的回调`textStorageDidProcessEditing:`，目前我正在使用`did`回调来更改文本上的一些属性（为某些单词着色）。

我想做的是添加某些字符对的自动匹配。当用户键入`(`时，我也想插入 a`)`但我不确定何时何地是执行此操作的适当时间。

从文本存储委托协议中，它说该`will`方法允许您更改要显示的文本..但我不确定这意味着什么或如何做到这一点。文本系统真的很大而且很混乱。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:22:11.137

在我的开源项目中，我进行了子类化`NSTextView`和覆盖`insertText:`以处理在那里插入匹配字符。您可以检查参数以`insertText:`查看它是否是您想要执行的操作，调用 super 以执行文本的正常插入，然后在需要`insertText:`时使用适当的匹配字符串再次调用。

像这样的东西：

```
- (void)insertText:(id)insertString {
    [super insertText:insertString];

    // if the insert string isn't one character in length, it cannot be a brace character
    if ([insertString length] != 1)
        return;

    unichar firstCharacter = [insertString characterAtIndex:0];

    switch (firstCharacter) {
        case '(':
            [super insertString:@")"];
            break;
        case '[':
            [super insertString:@"]"];
            break;
        case '{':
            [super insertString:@"}"];
            break;
        default:
            return;
    }

    // adjust the selected range since we inserted an extra character
    [self setSelectedRange:NSMakeRange(self.selectedRange.location - 1, 0)];
} 
```

# ios - AFHttpClient 帖子在正文中包含参数和 JSON

> ID：10883741
> 
> 赞同：2
> 
> 时间：2012-06-04T15:18:30.303
> 
> 标签：ios, json, http, post, afnetworking

对不起，但我对 http post 术语有点陌生！

我必须发布到无法更改的网络服务：格式如下：

```
http://SomeWebAddress/JSON/GetAllFeedsRestfullyWrapped?userToken=FOO 
```

所以参数是：

> 键：用户令牌，值 = FOO

在正文中，我需要像这样放置一个 JSON 格式的数组：

> {“feedIds”：[1,2,3,4,5,6]}

我试图通过 AFNetworking 来实现这一点，但似乎无法使其适用于这种情况。

我已经尝试过 AFHttpclient 和 AFJSONReqestIOperation 但我无法正确组合请求和正文。

所以我希望有人知道如何做到这一点。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:34:18.747

试试看

```
[[YourHTTPClient sharedHTTPClient] postPath:@"GetAllFeedsRestfullyWrapped?userToken=FOO"
                              parameters:[NSDictionnary {"feedIds":[1,2,3,4,5,6]}]
                                 success:^(AFHTTPRequestOperation *request, id JSON)
 {

 }
                                 failure:^(AFHTTPRequestOperation *request, NSError *error)
 {

 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:06:18.580

因此，使用 Mathieu Hausherr 的回答作为基线，这是我的解决方案：

```
NSArray *feedIds = [NSArray arrayWithObject:[NSNumber numberWithInteger:3]];
NSMutableDictionary *parameters = [[NSMutableDictionary alloc]init];
[parameters setObject:feedIds forKey:@"listOfFeedIds"];    
[[RssReaderWebserviceApiClient sharedInstance] postPath:@"GetFeedsRestfullyWrapped?userToken=FOO"
                                             parameters:parameters
                                                success:^(AFHTTPRequestOperation *request, id JSON){
                                                    LOG_TEST(1,@"Response: %@",JSON);
                                                }
                                                failure:^(AFHTTPRequestOperation *request, NSError *error){
                                                    LOG_ERROR(1,@"Error: %@",error);
                                                }]; 
```

我使用 postPath:parameters 方法来实现 post。
我手动设置请求标头中的参数并从字典中输入正文参数。
编码设置为 JSON。
我有人想知道日志记录是使用 NSLogging 完成的。太棒了。

# python - uWSGI [+ nginx] 文件描述符错误（没有这样的文件或目录）

> ID：10883744
> 
> 赞同：1
> 
> 时间：2012-06-04T15:18:52.410
> 
> 标签：python, uwsgi

我正在尝试为 Django 项目配置 uWSGI。不幸的是，当我运行 uwsgi 可执行文件时，它失败并出现一个奇怪的错误：

```
$ bin/uwsgi -s sock/uwsgi.sock --chdir testit --vacuum \
--env DJANGO_SETTINGS_MODULE=testit.testit.settings --wsgi-file testit/wsgi.py --master
*** Starting uWSGI 1.2.3 (32bit) on [Mon Jun  4 17:14:52 2012] ***
compiled with version: 4.7.0 20120414 (prerelease) on 04 June 2012 16:20:49
detected number of CPU cores: 2
current working directory: /home/miki/sites/testit
detected binary path: /home/miki/sites/testit/bin/uwsgi
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
bind(): No such file or directory [socket.c line 107] 
```

我不知道该怎么做……我试过了`ulimit`，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:06:05.720

似乎该`chdir`命令在执行任何其他操作之前执行，因此如果您使用相对路径，它无法找到文件。尝试在参数中使用完整路径：

```
bin/uwsgi -s $PWD/sock/uwsgi.sock --chdir testit --vacuum \
--env DJANGO_SETTINGS_MODULE=testit.testit.settings \
--wsgi-file $PWD/testit/wsgi.py --master 
```

# .net - 在 App.config 中转义 &

> ID：10883745
> 
> 赞同：50
> 
> 时间：2012-06-04T15:18:53.773
> 
> 标签：.net, app-config

我的 App.config 文件中有以下配置：

```
<add key="ConnectionString" 
     value="INITIAL CATALOG=myDatabase;DATA SOURCE=myServer;User ID=myUser;Password=!&myPass99;"/> 
```

上述连接字符串被 Visual Studio 智能感知拒绝。它说实体`myPass99`未定义。问题是由密码中的 & 引起的。

我该如何逃脱它？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-04T15:23:26.980

通过使用`&amp;`代替`&`

作为仅供参考，请参阅此处了解更多字符： [我需要在 XML 文档中转义哪些字符？](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)

# android - 从另一个应用程序获取一个应用程序的状态

> ID：10883746
> 
> 赞同：2
> 
> 时间：2012-06-04T15:18:54.250
> 
> 标签：android, android-activity

我有两个应用程序，例如`Activity`和`Service`。我`Service`从`Activity`. 当我退出活动时，它会停止，但它并没有完全停止，而是在后台运行（可以在`Settings->ManageApplications`菜单中看到）。所以我使用`android.os.Process.killProcess(android.os.Process.myPid())`了 in `onDestroy`() 函数，它完全终止了应用程序。但问题是它也停止了我的服务，因为它是从我的活动开始的。我也尝试使用以下几行，

```
ActivityManager activityManager = (ActivityManager)this.getSystemService(Context.ACTIVITY_SERVICE);
        activityManager.killBackgroundProcesses(this.getApplication().getPackageName()); 
```

但它仍然会停止我的服务，因为它会停止文档中所述的关联进程。我的问题是，我怎样才能完全终止我的活动而不终止我的服务。提前谢谢。

**设想**

* * *

假设有两个应用程序“a”和“b”。我使用`finish()`调用停止应用程序“a”，“a”成功关闭。现在我使用调用从'b'检查'a'的状态，`runningProcessInfo`我仍然发现应用程序'a'正在后台运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:18:26.043

> 我的问题是，我怎样才能完全终止我的活动而不终止我的服务。

Call `finish()`，当用户按下 BACK 时自动发生（默认情况下）。

> 当我退出活动时它停止但它没有完全停止，在后台运行（可以在设置->管理应用程序菜单中看到）

应用程序不是活动。应用程序是组件的集合。在您的情况下，您的应用程序包含至少一项活动和至少一项服务，具体取决于您问题中的信息。

> 所以我在 onDestroy() 函数中使用了“android.os.Process.killProcess(android.os.Process.myPid())”，它完全终止了应用程序。

不要这样做。

# ruby-on-rails - 嵌套模型的 Rails 路线

> ID：10883751
> 
> 赞同：0
> 
> 时间：2012-06-04T15:19:05.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-routes

我有一个嵌套的 rails 模型：

```
# app/models/frontend/item.rb
class Frontend::Item < Item
end 
```

当我打电话

```
form_for(@frontend_item) 
```

它试图转到**“/frontend/items”**路径。

有没有办法让它转到**'/items'**（没有继承的'/frontend'）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:20:49.360

您可能已经这样做了，但您尝试过

```
rake routes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:25:01.643

有一个很好的例子可以准确地说明您在 rails 指南中想要什么：

[http://guides.rubyonrails.org/routing.html#limits-to-nesting](http://guides.rubyonrails.org/routing.html#limits-to-nesting)

~查尔斯~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:24:38.737

您已将 a 明确命名`Frontend::Item`为与`Item`. 因此，`frontend_item`正确路由到`/frontend/items/:id`.

要覆盖它，将以下行添加到您的路由文件中：

```
# routes.rb
match 'item/:id' => 'Frontend::Item#show' 
```

请注意，这现在将与您的`Item`模型的路线冲突，因此您应该删除该路线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:05:58.963

解决方案是创建一个范围部分：

```
# config/routes.rb
scope :module => "frontend", :as => 'frontend' do
  resources :items
end 
```

# java - Axis2/SOAP，返回列表 产生空回报

> ID：10883756
> 
> 赞同：0
> 
> 时间：2012-06-04T15:19:28.523
> 
> 标签：java, soap, axis2

所以我有一段代码在 Java 中生成一个 SOAP 服务，通过 Jython 在 Tomcat/Axis2 服务器上包装一些 Python 代码......它可以工作！

我有一个返回的方法

```
 public static List<MyClass> doSomething() 
```

但从肥皂回答我只得到一些空数据：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Body>
      <ns:doMyServiceResponse xmlns:ns="http://mypyinterface" xmlns:ax23="http://mypyinterface/xsd">
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
     <ns:return xsi:type="ax23:MyClass" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </ns:doMyServiceResponse >
   </soapenv:Body>
</soapenv:Envelope> 
```

我在网络上找到了许多关于该主题的帖子，例如 [axis2 - Map 中的复杂类型](https://stackoverflow.com/questions/8615154/complex-types-in-axis2-map)，[如何使用Java 中的Web 服务（例如Axis2）发送复杂对象的数组或集合？](https://stackoverflow.com/questions/5313545/how-do-i-send-an-array-or-collection-of-complex-objects-using-web-services-in-ja)很多人说不能得到**List**作为回报，而只能得到**Array**，

但是，我不明白，因为我注意到上面的结果实际上是一个具有正确元素数量的空列表，如果我决定生成一个**List< String >**作为结果，那么我会得到正确的值（是因为我在 List 中使用了一个简单的 < String > Java 类型？）甚至没有将任何内容更改为 Array 或 ArrayList（虽然我已经读过无法生成 List）

所以我可能错过了其他东西，有什么我可能忘记的技巧吗？就像将我的 MyClass 更改为 java.io.Serilizable 或提供一些特定的方法，Axis2 可以使用这些方法在我的 XML 输出 SOAP 流中拥有/产生正确的值？

是否可以通过 Axis2 进行回复以生成列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:24:48.700

不，这是不可能的。[您可以在此处](https://stackoverflow.com/questions/13743349/returning-list-in-axis2-web-service/15002676#15002676)阅读此问题的先前答案。

在你的情况下，你会像这样返回：

```
public static MyClass[] doSomething() 
```

让 List.toArray() 为您施展魔法吧！

# jquery-ui-dialog - jQuery-ui-dialog - 下拉菜单不保持打开状态

> ID：10883758
> 
> 赞同：1
> 
> 时间：2012-06-04T15:19:29.133
> 
> 标签：jquery-ui-dialog

使用对话框并添加不同的表单元素。

当您单击对话框上的箭头按钮时，我的下拉菜单不会保持打开状态。您可以按住按钮，但单击仅显示选项，然后消失。

有人见过这个吗？

[http://jsfiddle.net/tvance929/7pvb6/](http://jsfiddle.net/tvance929/7pvb6/) - 这是我在小范围内所做的一个例子......但是，不幸的是，这并没有显示我遇到的问题。我猜这与我在下拉列表中添加信息和或添加额外样式的事实有关...

# java - 修复 JList 的最大大小并更改空单元格的外观

> ID：10883760
> 
> 赞同：0
> 
> 时间：2012-06-04T15:19:36.047
> 
> 标签：java, swing, size, jlist, max

我正在使用最多可以包含 8 个项目的 JList 处理 UI 内容。从逻辑上讲，一旦应用程序达到限制，我就阻止了应用程序添加到 JList，但是，我想知道是否有一种方法可以显式地设置 JList 本身的限制。这将有助于我接下来要做的事情，即重新绘制空单元格（最多 8 个单元格）以指示它们是可以填充的空槽。我试图找到一种方法来做到这一点（也许通过扩展 ListUI），它不涉及将占位符元素添加到 JList 中以表示空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:57:45.227

您可以尝试[此处](https://stackoverflow.com/a/5760093/230513)显示的方法，该方法限制`N`条目的增长，此后启用滚动。[此处](https://stackoverflow.com/a/7620726/230513)`ListCellRenderer`显示的 A可用于更改项目的外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:52:12.163

我认为最简单的方法是实现一个列表模型（使用 DefaultListModel 或 AbstractListModel） 我的想法是该模型将始终有 8 个项目。所有这些都带有一条空消息。

如果您向模型添加新项目，您可以将空文本替换为该项目的特定文本。模型将跟踪向模型中添加了多少项目。如果您尝试添加更多 MAX_ITEMS，您可以抛出异常或类似的东西。

实现 DefaultListModel 非常简单，并且您在 Internet 上有很多示例。

# java - 正则表达式替换图像文件扩展名的 URL；用加号替换空格

> ID：10883761
> 
> 赞同：0
> 
> 时间：2012-06-04T15:19:36.333
> 
> 标签：java, regex

我正在学习正则表达式，并希望在 URL 中搜索任何可能的图像扩展名（jpg、jpeg、png、gif .. 等），并且如果 URL 的文件扩展名是图像。

我想`%20`用加号替换任何或空格`+`

如何才能做到这一点？

```
www.test.com/this/is/an/image&20with%20spaces.jpg 
www.test.com/this/is/an/image+with+spaces.jpg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:26:54.880

按照我的看法，您必须分两行执行此操作。

```
Pattern imagePattern = Pattern.compile("\\.(png|gif|jpg|jpeg)$", Pattern.CASE_INSENSITIVE);
if (imagePattern.matcher(input).find())
  input = input.replaceAll("(%20)|\\s", "+"); 
```

# jquery - jQuery合并循环返回？

> ID：10883764
> 
> 赞同：0
> 
> 时间：2012-06-04T15:20:00.083
> 
> 标签：jquery, ajax, loops, merge

我正在尝试将所有循环结果合并为一个，然后使用 ajax 将它们全部发送一次

这是更多解释的代码：

```
<div class='item'>Name1</div>
<div class='item'>Name2</div> 
```

jQuery

```
$(".item").each(function(){
  var value = $(this).text();
}); 
```

^ 这会同时返回 Name1 和 Name2 但不是一次，我需要将它们合并在一起，以便我可以将它们都发送到 ajax 请求

这就是我想要的（无效代码）

```
$(".item").each(function(){
  var value1 = $(this[0]).text(); // even tho i dont wanna use numbers, i wanna all of them
  var value2 = $(this[1]).text();
   var final = value1 + value2; // Name1Name2
});
    $.get('go.php', {items : final}, function(... 
```

这是一个无效的代码 ^ 只是为了给你一个例子，它应该如何结束
第一个问题是合并，我不知道它应该如何，
第二个是我想从循环外部调用**var final**所以它不会重复请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:25:26.120

Use [`$.map()`](http://api.jquery.com/map/) to translate all elements in the jQuery object to an array of strings.

```
var values = $(".item").map(function() {
    return $(this).text();
}).get();
// values = ["Name1", "Name2"] 
```

Alternatively, you can use [`jQuery.map()`](http://api.jquery.com/jQuery.map/).

```
var values = $.map($(".item"), function(item) {
    return $(item).text();
});
// values = ["Name1", "Name2"] 
```

Then, you can either send the values as an array to your PHP script, so you can retrieve it as a PHP array in `$_POST["items"]`.

```
$.get("go.php", {items : values}, function() { ... }); 
```

Or you can first join the array to a single string to receive it as a PHP string.

```
var joinedValues = values.join(",");
// joinedValues = "Name1,Name2"
$.get("go.php", {items : joinedValues}, function() { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:23:18.773

您可以使用[$.map](http://api.jquery.com/jQuery.map/)

```
var arr =  $(".item").map(function(){
             return $(this).text();
           }).get(); 
```

在这之后，你`arr`可以`['Name1','Name2']`随心所欲`Name1Name2`地得到它

```
arr.join('') 
```

但是，如果您想稍后将它们分开，最好使用分隔符将它们连接起来`_`or `,`。所以如果你想`Name1_Name2`使用`.join('_')`

然后`arr`像这样使用

```
$.get('go.php', {items : arr.join('_')}, function(... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:23:21.417

在函数外部声明`final`以使其成为全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:23:33.507

小提琴：http: [//jsfiddle.net/iambriansreed/Wf3SF/](http://jsfiddle.net/iambriansreed/Wf3SF/)

尝试：

```
var final = [];
$(".item").each(function(){
   final.push(this.innerHTML);
}); 
```

或者：

```
var final = $('.item').map(function() {
    return this.innerHTML;
}).get(); 
```

或者正如您在评论中提到的：

```
var items = $('.item').map(function() {
    return this.innerHTML;
}).get();

var final = "Something1" + items[0] + "Something2" + items[1]; 
```

或者最后像这样：

```
$('.item').each(function(i) {
    window['value'+(i+1)] = this.innerHTML;
});

var final = "Something1" + value1 + "Something2" + value2;

$.get('go.php', {'items' : final }, function(... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T15:24:11.300

```
$('.item').text()​​; 
```

这将`Name1Name2`作为输出返回。

**[现场演示](http://jsfiddle.net/SivaCharan/Y4L5P/1/)**

## 编辑：

在查看了您对所有答案的所有评论后，我了解到您可能正在寻找这个。

```
var customTextArray = [ "AAA", "BBB" ];
var final = "";
i = 0;
$('.item').each(function() {
    final += $(this).text();
    if (customTextArray.length != i)
        final += customTextArray[i++];

});

$(".result").text(final);​ 
```

**输出：**

```
Name1AAAName2BBBName3 
```

参考另一个**[LIVE DEMO 2](http://jsfiddle.net/SivaCharan/Y4L5P/2/)**

# css - 禁用组合框时更改填充颜色

> ID：10883779
> 
> 赞同：0
> 
> 时间：2012-06-04T15:21:03.063
> 
> 标签：css, apache-flex, flex3

我已经被这个问题困扰了几天。解决方案似乎很简单，但我还没有找到。

我正在使用 Flex 3，并且尝试将 ComboBox 禁用时的颜色更改为更亮的颜色。当前的 CSS 是这样的：

```
ComboBox {
color:#000000;
fillAphas: 1, .5, .55, .35;
fillColors: #ffffff, #cccccc, #999999, #666666;
fontWeight: normal;
backgroundAlpha: 1;
fontSize:11;
} 
```

问题是当我使用 backgroundDisabledColor 属性时，启用和禁用的组合框都用新颜色更改。有没有办法设置禁用的填充颜色属性，或者在禁用组合框时以某种方式关闭填充颜色？谢谢。

** 看到我无法直接使用 css 属性更改禁用组合框的填充颜色，并且 flex 3 不喜欢 css 属性选择器，我添加了一个属性以在禁用时链接到皮肤，并简单地制作了一个更轻的 ComboBox 皮肤颜色。这似乎是最好的选择。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:29:28.577

您是否尝试设置 disabledColor[样式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ComboBox.html#styleSummary)？

我很确定一个组件在视觉上被禁用了，通过在它上面绘制一个半透明的图形。我不确定我是否建议尝试更改背景颜色以便在视觉上传达“已禁用”。

更改通用“组合框”样式将更改所有组合框。但是，您可以创建一个命名样式：

```
.disabledComboStyle {
color:#000000;
fillAphas: 1, .5, .55, .35;
fillColors: #ffffff, #cccccc, #999999, #666666;
fontWeight: normal;
backgroundAlpha: 1;
fontSize:11;
} 
```

并使用 styleName 样式在禁用的组件上指定它：

```
<mx:ComboBox styleName = "disabledComboStyle" /> 
```

但是，众所周知，样式计算是一项性能繁重的操作，所以我不确定我是否会推荐很多这样的切换样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:30:30.057

我不知道 flex 的属性是如何工作的，但在您的情况下选择带有 CSS 的元素的一般规则如下：

```
ComboBox[attribute='value'] {
  //the changed properties
} 
```

# android - android中Expandble listview下面的元素

> ID：10883781
> 
> 赞同：1
> 
> 时间：2012-06-04T15:21:13.470
> 
> 标签：android

我在我的android应用程序中使用ExpandableListView。我面临的问题是，如果我在expandablelistview下方有一些元素，例如textview，则在单击组并显示其子项时它会被隐藏。当我使用LinearLayout时会发生这种情况.以下是我的代码：

```
<LinearLayout
android:orientation="vertical"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
 >
<ExpandableListView
    android:id="@android:id/list"
    style="@style/listStyle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:groupIndicator="@drawable/group_indicator"

    />
   <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView below ExpandableListView"
/>
</LinearLayout> 
```

如果我将 LinearLayout 替换为 RelativeLayout，则会发生相反的情况。textview 没有隐藏，但打开组的孩子或列表中的较低组隐藏在 textview 下方。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:39:45.273

将此行添加到代码中：

```
 android:layout_weight="1" 
```

如下：

```
 <LinearLayout  
     android:orientation="vertical"
     android:layout_height="fill_parent" 
     android:layout_width="fill_parent"    > 
 <ExpandableListView   
     android:id="@android:id/list"  
     style="@style/listStyle"    
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:groupIndicator="@drawable/group_indicator"          />
  <TextView   
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:text="TextView below ExpandableListView"   />
</LinearLayout> 
```

希望这有帮助。

# android - Android：动态地将文本视图添加到滚动视图

> ID：10883782
> 
> 赞同：2
> 
> 时间：2012-06-04T15:21:15.227
> 
> 标签：android, android-layout, android-ui, android-linearlayout, android-scrollview

我正在开发一个功能类似于短信应用程序的应用程序。我现在正在处理应用程序的布局。在 XML 文件中，我在屏幕顶部有一个编辑文本，在屏幕底部有一个。我想动态创建一个位于两个编辑文本之间的滚动视图。滚动视图可以滚动浏览应用程序的多条消息。当我尝试动态创建滚动视图和文本视图时，它会替换编辑文本并且它们会消失。

所以我的问题是我将如何防止编辑文本消失并在两个编辑文本之间添加滚动视图？

我的代码是这样的：

```
 ScrollView sv = new ScrollView(this);
   LinearLayout ll = new LinearLayout(this);
   ll.setOrientation(LinearLayout.VERTICAL);
   sv.addview(ll);

    TextView tv = new TextView(this);
    tv.setText("Dynamic layouts ftw!");
    ll.addView(tv);
    this.setContentView(sv); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:36:39.267

您要求做的是构建一个[ListView](http://developer.android.com/reference/android/widget/ListView.html)。ListView 具有您需要的所有功能以及更多功能。此外，使用适配器，它们非常快。这是一个关于使用 ListViews[的不错的教程。](http://www.vogella.com/articles/AndroidListView/article.html)

# android - 进度对话框简单

> ID：10883784
> 
> 赞同：0
> 
> 时间：2012-06-04T15:21:18.843
> 
> 标签：android, progressdialog

当我在新活动出现之前单击此按钮时，我想添加一个进度对话框按钮，我认为我不需要线程，我进行了搜索，但我发现我只需要做一个线程，而许多其他人认为它是不清楚我只是想当我点击进度对话框时告诉用户等待几秒钟，其他活动将出现，仅此而已：

```
btn_newsfeed.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(getApplicationContext(), CustomizedListView.class);
            startActivity(i);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:04:26.343

您可以通过三种不同的方式使用 ProgressDailog - 使用线程、处理程序和异步任务。这是使用进度对话框的异步任务示例

```
 private class Operation extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params)
 {
// code to be executed in background thread 
                for(int i=0;i<5;i++) {
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                return "Executed";
          }      

          @Override
          protected void onPostExecute(String result) {
// runs on UI thread and updated UI after executing doInBackground
                progressDialog.dismiss();
          }

          @Override
          protected void onPreExecute() {
ProgressDialog progressDialog = ProgressDialog.show(MainActivity.this, "Title ", "Loading...");
              progressDialog.show();

          }

          @Override
          protected void onProgressUpdate(Void... values) {
// runs on UI thread and starts first

          }
    } 
```

# jquery - jQuery：强制执行 document.ready() 调用的顺序

> ID：10883786
> 
> 赞同：33
> 
> 时间：2012-06-04T15:21:29.810
> 
> 标签：jquery, document-ready, order-of-execution

我正在使用多个代码块在 document.ready() (jQuery) 上设置一些行为的代码库。有没有办法强制在任何其他块之前调用一个特定块？

背景：我需要在自动化测试环境中检测 JS 错误，因此我需要在执行任何其他 JS 代码之前执行开始记录 JS 错误的代码。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-04T15:26:54.973

`document.ready()`回调按照它们注册的顺序被调用。如果您先注册您的测试回调，它将首先被调用。

此外，如果您的测试代码实际上不需要操作 DOM，那么您可以在代码被解析时运行它，而不是等到 DOM 准备好后，它会在`document.ready()`调用其他回调之前运行。或者，也许您可​​以立即运行部分测试代码并仅将使用 DOM 的部分推迟到`document.ready()`.

另一个想法是（仅用于测试目的）您可以使用稍微修改过的 jQuery 版本运行，该版本`document.ready()`在传递时添加一个标志并设置为`true`指示首先调用该函数，或者您可以添加一个新方法`document.readyFirst()`首先调用您的函数。`document.ready()`这将涉及对 jQuery中处理代码的微小更改。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-02-29T17:13:52.420

正如@jfriend00 提到的那样`ready callbacks are called in the order they were registered.`

因此，即使此代码块在开始时调用，您也可以在其中设置另一个回调，以便它会在最后执行。

```
jQuery(document).ready(function(){
    jQuery(document).ready(function(){
        // This block will be executed after all ready calls.
    });
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-04T15:26:31.767

You should be able to use [holdReady](http://api.jquery.com/jQuery.holdReady/) to do this. As long as it is included before your ready events, you can run your own code and then trigger the other ready events.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-18T17:10:58.687

我正在尝试做类似的事情，我正在加载一堆具有 .ready() 函数的 polyfill，但我在页面上也有我自己的 .ready()，我需要首先执行，尽管 polyfill 已加载到标题中.

我找到了一个很好的解决方法，方法是在很早的时候（在 jQuery 加载之后）使用 .ready() 来执行数组中的函数。因为它在源代码中非常早，所以首先执行 .ready()。在页面的下方，我可以将函数添加到数组中，因此它们都在任何其他 .ready() 之前执行。

我将它封装在一个 .beforeReady() 函数中，并将其作为 jQuery-Before-Ready 放在 GitHub 上，供任何感兴趣的人使用。 [https://github.com/aim12340/jQuery-Before-Ready](https://github.com/aim12340/jQuery-Before-Ready)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T15:23:55.723

您可以在 DOMReady 中执行日志记录启动代码，并在加载中执行其他初始化。或者您可以创建自己的初始化管理器，它首先调用您的日志记录启动代码，然后是所有其他初始化回调（前提是这些回调是向您的管理器注册而不是 jQuery，除非您想破解 jQuery 并从那里提取它们，我不这样做'建议）。

# objective-c - 默认情况下，Objective C 方法中指向参数的指针是 const 吗？

> ID：10883790
> 
> 赞同：1
> 
> 时间：2012-06-04T15:21:45.280
> 
> 标签：objective-c, pointers

Cocoa 类中有一些方法可以接受指针的地址。最常见的参数是`NSError *`CoreData 验证方法（等等）中未来对象的地址。这样就可以将自定义或拥有的对象放入给定参数指向的地址的位置。

我的问题是：为什么我们不能用简单的指针参数来做到这一点？例如，假设我有一个方法：

```
- (void)addObject:(id)someObject toArray:(NSMutableArray *)array; 
```

我可以轻松地将可变数组作为第二个参数传递，调用`addObject:`它，在方法调用之后数组将被修改。为什么这不是用`NSError *`对象完成的？默认情况下，传递给方法的指针是否定义为 const？这是为了避免访问`NULL`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:29:11.890

> 为什么这不是用 NSError * 对象完成的？

因为没有`NSMutableError`. 您的示例有效，因为您可以在不修改指向数组本身的指针的情况下修改数组的内容。但是，由于`NSError`实例是不可变的，因此您不能修改`NSError`. 因此，您必须创建一个新的错误对象。而且，如果您想将该错误对象与其他一些数据一起返回，则至少其中一个必须通过输出参数（例如 an `NSError **`）完成。

> 默认情况下，传递给方法的指针是否定义为 const？

没有。在该方法中，欢迎您这样做：

```
- (void)addObject:(id)someObject toArray:(NSMutableArray *)array {
  someObject = somethingElse;
  [array addObject:someObject];
} 
```

这里要记住的重要一点是，您只是在更改内存插槽中的指针。对应的内存槽`someObject`只是堆栈上的一个空间，并且您正在更改该空间的内容以具有指向与给定对象不同的分配对象的值。

> 这是为了避免访问NULL吗？

您需要的任何`NULL`保护都必须自己完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:28:08.130

这是因为`NSError`该类没有定义任何在创建后修改实例的方法。指针本身是可变的，但 an`NSError`不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:36:04.633

它们都是普通的 C 指针。除非您将它们设为 const，否则它们不是 const。在 Objective-C 的大多数情况下，甚至在普通 C 中使用 const 指针都不是一件好事。 const 指针是一个微妙的概念，其含义和语法的复杂性与 Objective-C 的风格不太吻合编程。忘记它们的存在可能是一个很好的初步近似。

示例：NSArray 和 NSMutableArray - 如果 const “正确”工作，我们将不需要 NSArray 类 - 但由于 C 的设计，它不能。

** - 对于 NSError 等，想法是创建一个 NSError，而不是更改您传入的那个。换句话说，您需要一个指向指针的指针才能创建实例（即更改实际对象）。

# rest - 接缝 3 / REST / 注入

> ID：10883795
> 
> 赞同：0
> 
> 时间：2012-06-04T15:22:02.113
> 
> 标签：rest, seam, code-injection, cdi

> 块引用

我正在尝试使用 Seam 3 制作一个 REST 应用程序。Hello world 运行良好。但是我尝试在带有注释 @Inject 的 Rest Application 中使用注入，但该对象仍然为空。

是否有人有一段代码可以初始化 REST 类中调用的组件？

多谢。web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
<servlet>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
        <load-on-startup>1</load-on-startup>
    </servlet>
</web-app> 
```

REST 应用程序

```
@ApplicationPath("object")
@Path("creation")
@RequestScoped
public class ObjectApplication extends javax.ws.rs.core.Application {

@Inject   
ObjectManager objectManager;
....

@POST
@GET
@Path("create")
@Produces(MediaType.APPLICATION_XML)
@Consumes(MediaType.APPLICATION_XML)
public String createObject(ObjectType objectType) {
...
}
} 
```

和对象管理器

```
@Stateless
public class ObjectManager {
} 
```

.

```
20:30:50,362 INFO  [org.jboss.weld.deployer] (MSC service thread 1-5) JBAS016008: Starting weld service for deployment ObjectRest.war
20:30:50,420 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit."ObjectRest.war".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."ObjectRest.war".WeldService: org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [ObjectManager] with qualifiers [@Default] at injection point [[field] @Inject com.qc.api.rest.ObjectApplication.objectManager] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:45:42.990

我如何成功：将所有内容放在 eclipse中的**同一个项目中。**并删除：

```
<servlet-name>javax.ws.rs.core.Application</servlet-name>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

似乎问题在于有两个项目：

```
XXXRest
 +--XXXCore 
```

并且注射没有完成...

# django - 日志记录错误位于 django 网站的位置

> ID：10883797
> 
> 赞同：0
> 
> 时间：2012-06-04T15:22:06.113
> 
> 标签：django, apache

我是 Django 的新手。我有一个用 Django + Apache 创建的网站。我导入了日志模块并打印了一些带有日志错误功能的中间值。但我不知道日志文件的位置。操作系统是 Ubuntu。

我在网上搜索并找不到一个好的答案（也许我没有正确地做）。有人能告诉我在哪里可以找到包含我在代码中记录的值的日志文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:41:41.907

将此保留在您的设置中，文件名指定文件的位置

```
LOGGING = {
'version': 1,
'disable_existing_loggers': True,
'formatters': {
    'verbose': {
        'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
    },
    'simple': {
        'format': '%(levelname)s %(message)s'
    },
},
'handlers': {
    'file_userlogins': {                # define and name a handler
        'level': 'DEBUG',
        'class': 'logging.FileHandler', # set the logging class to log to a file
        'formatter': 'verbose',         # define the formatter to associate
        'filename': os.path.join(VENV_ROOT, 'log', 'userlogins.log') # log file
    },
 'loggers': {
    'logview.userlogins': {              # define a logger - give it a name
        'handlers': ['file_userlogins'], # specify what handler to associate
        'level': 'INFO',                 # specify the logging level
        'propagate': True,
    },     
}       
} 
```

# android - 无法将文件从内部存储加载到图库

> ID：10883802
> 
> 赞同：0
> 
> 时间：2012-06-04T15:22:42.947
> 
> 标签：android, gallery

我的应用程序有一点问题。我有一个功能可以拍照并存储它然后将其加载到画廊中。

在存储图片之前，我会检查手机是否有`ExternalStorage`. 如果不是，图片将保存在 Files 目录中，`getFilesDir()`但我无法从内部存储将其加载到图库中。

`ExternalStorage`从（重新扫描ExternalStorage，完美工作）加载图片到画廊的代码：

```
 path = Environment.getExternalStorageDirectory()+"";
 c.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
                        + path))); 
```

从目录加载图片到画廊的代码`Files`（不加载任何内容）：

```
 c.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
                    + c.getFilesDir()+"/files/"))); 
```

PS：文件存在。我用`adb shell`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:53:22.860

默认情况下，保存在内部存储（应用程序文件夹 - /files）中的文件仅可用于创建它们的应用程序 - 在文件系统级别得到保证 - 画廊应用程序无法加载文件。当您在内部存储中保存新文件时，您必须明确允许其他应用程序读取/写入该文件。参考：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

“MODE_PRIVATE 将创建文件（或替换同名文件）并使其对您的应用程序私有。其他可用模式有：MODE_APPEND、MODE_WORLD_READABLE 和 MODE_WORLD_WRITEABLE。”

# python - 将未对齐的时间序列加载到具有一个索引的 DataFrame 中？

> ID：10883805
> 
> 赞同：1
> 
> 时间：2012-06-04T15:22:52.807
> 
> 标签：python, pandas

我开始学习这个很棒的工具，我被困在加载几个时间序列并将它们与“主”日期向量对齐的简单任务上。

例如：我有一个 csv 文件：Data.csv，其中第一行包含标题`"Date1, Rate1, Date2, Rate2"`，其中 Date1 是 Rate1 的日期，Date2 是 Rate2 的日期。

在这种情况下，Rate2 有更多的观察值（开始日期与 Date1 相同，但结束日期比 Date1 中的结束日期更远，并且缺失值较少），所有内容都应根据 Date2 进行索引。

获取以下 DataFrame的*首选方法是什么？*（或完成类似的事情）

```
index(Date2) Rate1 Rate2
11/12/06     1.5   1.8
12/12/06     NaN   1.9
13/12/06     1.6   1.9
etc
etc
11/10/06     NaN   1.2
12/10/06     NaN   1.1
13/10/06     NaN   1.3 
```

我尝试按照官方 pandas.pdf 和谷歌搜索中的示例进行操作，但无济于事。（我什至买了麦金尼先生的熊猫书的预版，但是关于熊猫的章节还没有准备好：（）

有这个很好的食谱吗？

非常感谢

**编辑**：关于将系列分成两个 .CSV 文件的答案：但是如果我有很多时间序列怎么办，例如

日期 1 比率 1 日期 2 比率 2 ... 日期 N 比率 N

我所知道的是日期应该几乎相同，但来自包含缺失值的序列的例外情况（没有日期或利率条目）（顺便说一下，这将是一些金融经济学时间序列的一个例子）

加载此数据集的首选方法是否仍将每个系列拆分为单独的 .CSV？

**EDIT2** archlight 是完全正确的，只是做“csv_read”会把事情搞砸。

基本上我的问题可以归结为：如何**加入**几个未对齐的时间序列，其中每个系列都有一个日期列，以及系列本身的列（从 Excel 导出的 .CSV 文件）

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:00:27.223

我认为没有必要将数据拆分为多个文件。如何加载文件`read_csv`并将每个日期/速率对转换为单独的时间序列？所以你的代码看起来像：

```
data = read_csv('foo.csv')

ts1 = Series(data['rate1'], index=data['date1'])
ts2 = Series(data['rate2'], index=data['date2']) 
```

现在，要将它们连接在一起并对齐 DataFrame 中的数据，您可以执行以下操作：

```
frame = DataFrame({'rate1': ts1, 'rate2': ts2}) 
```

这将形成日期的联合，`ts1`并`ts2`对齐所有数据（在适当的情况下插入 NA 值）。

或者，如果你有 N 个时间序列，你可以这样做：

```
all_series = {}
for i in range(N):
   all_series['rate%d' % i] = Series(data['rate%d' % i], index=data['date%d' % i])

frame = DataFrame(all_series) 
```

这是我的经验中非常常见的模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:47:09.123

如果您确定 Date1 是 Date2 的子集并且 Date2 不包含空值，您可以简单地执行

```
df = read_csv('foo.csv', index_col=2, parse_dates=True)
df = df[["rate1", "rate2"]] 
```

但是如果 Date2 有 Date1 没有的日期，那将会很复杂。我建议您将日期/速率对放在单独的文件中，并将日期作为通用标题

```
df1 = read_csv('foo1.csv', index_col=0, parse_dates=True)
df2 = read_csv('foo2.csv', index_col=0, parse_dates=True)
df1.join(df2, how="outer") 
```

**编辑：** 这种方法看起来不太好。因此，对于您的日期时间中的 NaN，您可以这样做

```
dateindex2 = map(lambda x: datetime(int("20"+x.split("/")[2]), int(x.split("/")[0]), int(x.split("/")[1])), filter(notnull, df['Date2'].values))
ts2 = Series(df["Rate2"].dropna(), index=dateindex2)
#same for ts1
df2 = DataFrame({"rate1":ts1, "rate2":ts2}) 
```

问题是您必须确保存在日期之类的情况但不存在费率。因为 dropna() 将移动记录并与索引不匹配

# javascript - 复选框div加倍标签？

> ID：10883814
> 
> 赞同：0
> 
> 时间：2012-06-04T15:23:34.547
> 
> 标签：javascript, jquery, checkbox

我不知道为什么当一个复选框被点击时，它会加倍相关的标签文本。有人可以帮我吗？

```
// add multiple select / deselect functionality
                $("#selectall").click(function () {
                    $('.child').attr('checked', this.checked);
                    $('.ck,.chkbox,.checkAll ,input:radio').DcustomInput();
                }); 

jQuery.fn.DcustomInput = function(){
                    $(this).each(function(i){   
                        if($(this).is('[type=checkbox],[type=radio]')){
                            var input = $(this);
                            var id=input.attr('id');

                        // get the associated label using the input's id
                        var forlabel = $('label[for='+input.attr('id')+']');
                        var chklabel = forlabel.text();
                        forlabel.hide();
                        var label = $("<label  for='"+id+"' class='checker'>"+chklabel+"</label>");

                        //get type, for classname suffix 
                        var inputType = (input.is('[type=checkbox]')) ? 'checkbox' : 'radio';   
                        //  alert(label);
                        // wrap the input + label in a div 
                        $('<div class="custom-'+ inputType +'"></div>').insertBefore(input).append(input, label);

                        // find all inputs in this set using the shared name attribute

                        if(input.is(':disabled')){
                            if(inputType == 'checkbox' && input.is(':checked')){ 
                                label.addClass(' checkedDisabled '); 
                            } else{
                                label.addClass(' disabled ');   
                            }
                        }

                        // necessary for browsers that don't support the :hover pseudo class on labels
                        label.hover(
                        function(){ 
                            if(!input.is(':disabled') ){
                                $(this).addClass('hover');
                            }
                            if(inputType == 'checkbox' && input.is(':checked') && !input.is(':disabled')){ 
                                $(this).addClass('checkedHover'); 
                            } 
                        },
                        function(){ $(this).removeClass('hover checkedHover focus'); }
                    );

                        //bind custom event, trigger it, bind click,focus,blur events                   
                        input.bind('updateState', function(){   
                            if (input.is(':checked') && !input.is(':disabled')) {
                                if (input.is(':radio')) {   
                                    var allInputs = $('input[name='+input.attr('name')+']');
                                    allInputs.each(function(){
                                        $('label[for='+$(this).attr('id')+']').removeClass('checked');
                                    });     
                                };
                                label.addClass('checked ');
                            }
                            else { label.removeClass('checked checkedHover checkedFocus '); }

                        })
                        .trigger('updateState')
                        .click(function(){ 
                            $(this).trigger('updateState'); 
                        })
                        .focus(function(){ 
                            label.addClass('focus'); 
                            if(inputType == 'checkbox' && input.is(':checked')){ 
                                $(this).addClass('checkedFocus'); 
                            } 
                        })
                        .blur(function(){ label.removeClass('focus checkedFocus'); });
                    }
                });
            };
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:27:18.310

我真的不知道做什么`DcustomInput`，但我猜想这`$('.ck,.chkbox,.checkAll ,input:radio').DcustomInput();`需要放在准备好的文档上而不是点击处理程序上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:37:01.350

好的，我找到了解决方案，只需评论以下两行：

```
forlabel.hide();
$('<div class="custom-'+ inputType +'"></div>').insertBefore(input).append(input, label); 
```

这样旧标签就不会被隐藏，我们不会尝试复制输入和旧标签。

# mysql - 将 MySQL 数据导入 Access 2010 时出现问题

> ID：10883815
> 
> 赞同：1
> 
> 时间：2012-06-04T15:23:35.083
> 
> 标签：mysql, ms-access, odbc

我有一个包含 10 个表的小型数据库，其中 6 个通过 ODBC 连接直接导入 Access 到 MySQL 数据库，没有任何问题。但是，其中 4 个抛出错误：“无法打开对象”

MySQL ODBC 驱动程序是 3.51——任何更高版本的驱动程序都不起作用，MySQL.com 支持站点上建议使用 3.51。

我也可以毫无问题地将这些导入 Excel...所以我不确定问题是出在 Access 还是 ODBC 驱动程序上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:29:38.070

我已经看到这个问题发生在包含 Access/Jet 不理解的字段类型的 MySQL 表中，并且 MySQL ODBC 驱动程序没有完全转换为 Access 以映射到已知字段类型（到 Access）。我知道这已经是一段时间了 - 但你认为你可以发布一个有问题的桌子的描述吗？也许您可以在这里让更多的 MySQL/Access 人员回答您的问题（如果我不能，那就是）。

# sql - PL/SQL 出错后是否可以返回行？

> ID：10883821
> 
> 赞同：0
> 
> 时间：2012-06-04T15:23:54.497
> 
> 标签：sql, oracle, exception-handling, plsql, plsqldeveloper

我有大量的插入语句。

我想在执行这些行期间忽略错误，并且我不想单独包装每一行。

例子：

```
try
    insert 1
    insert 2
    insert 3
exception
    ... 
```

我希望如果在插入 1 中引发异常，它将忽略它并返回执行插入 2，等等。

我该怎么做？

我在 VB 中寻找类似“Resume next”的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:30:45.970

您需要`INSERT`使用自己的异常处理程序包装每个语句。但是，如果您有“大量”插入语句，其中任何语句都可能失败，那么我倾向于怀疑您正在错误地解决问题。这些说法是从哪里来的？你能直接从那个源系统中提取数据吗？您可以在循环中执行语句而不是列出每个语句吗？您能否先将数据加载到一组临时表中，以确保所有`INSERT`语句都成功（即没有约束，所有列定义为 VARCHAR2(4000) 等），然后编写一条 SQL 语句将数据移动到具有适当验证和异常处理的实际目标表？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T05:57:45.490

如果您可以将所有插入移动到一个 sql 脚本中，然后在 sql*plus 中运行它们，那么每个插入都将自行运行，脚本将继续运行。

如果您使用的是 plsqldeveloper（您已对其进行了标记），则打开一个新的命令窗口（这与 sql*plus 运行的 sql 脚本完全相同）并将您的 staements 如下所示：

```
insert into table your_table values(1,'aa');
insert into table your_table values(2/0,'bb');
insert into table your_table values(3,'cc');
commit; 
```

即使语句 (2) 会抛出一个异常，因为它不在一个块中，它会继续执行下一个命令。

**更新：**根据@CheranShunmugavel 评论，添加

```
WHENEVER SQLERROR CONTINUE NONE 
```

在脚本的顶部（特别是如果您使用 sql*plus 存在的问题`exit`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:07:59.803

使用[日志错误子句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9014.htm#BGBDIGAH)。[使用 DML 错误日志记录避免批量插入失败](http://docs.oracle.com/cd/E11882_01/server.112/e25494/tables004.htm#InsertDMLErrorLogging)中的更多信息

# android - Issue with Android's onTouchEvent()

> ID：10883830
> 
> 赞同：1
> 
> 时间：2012-06-04T15:24:35.363
> 
> 标签：android, touch-event

I am creating my first Android app using [this guide](http://obviam.net/index.php/displaying-graphics-with-android/) as a reference. Currently, I have a red button on my canvas and when the user clicks the button a boolean (green) will be set to true in order for the button's bitmap to a green button.

That part of the application works, however it works regardless where the user clicks on the canvas. I only want the boolean to be changed when the user clicks on the button's bitmap. Here is what I currently have in my code:

**The onTouchEvent() method**

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {

        button.handleActionDown((int)event.getX(), (int)event.getY());

        if (button.isTouched()) {
            green = true;
        }
    } if (event.getAction() == MotionEvent.ACTION_MOVE) {

    } if (event.getAction() == MotionEvent.ACTION_UP) {
        if (button.isTouched()) {
            green = false;
            button.setTouched(false);
        }
    }
    return true;
} 
```

**The handleActionDown() Method**

```
 public void handleActionDown(int eventX, int eventY) {
    if (eventX >= (x - bitmap.getWidth() / 2) && (eventX <= (x + bitmap.getWidth()/2))) {
        if (eventY >= (y - bitmap.getHeight() / 2) && (eventY <= (y + bitmap.getHeight()/2))) {
            setTouched(true);

        } else {
            setTouched(false);
        }
    } else {
        setTouched(false);
    }
} 
```

Can anybody see what I am missing in order for the ACTION_DOWN event to make it so it only triggers when the bitmap's bitmap is touched?

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T10:40:23.843

避免将 onTouchEvent 与按钮一起使用，最好使用 onClick，因为操作系统会检测是否单击了特定按钮，而不必计算按钮的位置

一、设置onClickListener

```
btn.setOnClickListener(this); 
```

这假设当前类 implements `View.OnClickListener`，所以如果你不实现它，你要么必须使用不同的类，要么创建一个匿名内部类。

然后，在该`onClick`方法中，确保 ID 匹配并在 if 语句（或 switch 语句）中添加您想要执行的任何操作

```
@Override
public void onClick(View v) {

    if(v.getId() == R.id.btn1){
        //do whatever you want on press
    }
} 
```

# parameters - SSRS 2008 R2 - 级联参数 - 设计视图

> ID：10883831
> 
> 赞同：0
> 
> 时间：2012-06-04T15:24:36.387
> 
> 标签：parameters, ssrs-2008

所以我的任务是修改 TFS 的 Stories Overview 报告。我可以让报告在预览中正常运行。

在设计时，级联参数似乎无法相互看到。这是应该的吗？当我试图让我的更改生效时，我是否必须为每个数据集\参数输入（并修改）参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:51:53.453

我最终只是在对话框中填写了设计模式参数。

# barcode-scanner - 有哪些好的可编程条码扫描仪？

> ID：10883833
> 
> 赞同：0
> 
> 时间：2012-06-04T15:24:41.817
> 
> 标签：barcode-scanner

从本质上讲，我正在寻找一种可以通过提供的软件或某种编程语言进行编程的一维条码扫描仪，它将读取条码并格式化生成的字符串。

我已经尝试过 Datalogic Gryphon GD 4130 扫描仪，但它不能很好地满足我们的需求，而且我认为他们提供的软件很难使用。

价格也不是问题。所以任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:58:03.620

[Honeywell Voyager 9520/40](http://www.honeywellaidc.com/en-us/pages/Product.aspx?category=Laser&cat=HSM&pid=9520/40)系列对我来说效果很好。通过扫描他们提供的“程序条形码”，扫描仪本身很容易编程。

但我还需要我的程序能够检测条形码扫描，即使它不是“活动”窗口。而且我不想创建一个全局键盘挂钩来检查任何键盘输入是否实际上是条形码扫描。

我发现霍尼韦尔提供了免费的驱动程序，可以将此扫描仪的输出转换为 PC 上的“串行端口”输入——尽管它是一个 USB 扫描仪。这对编程很有好处，因为在大多数编程语言中读取串行端口数据很容易，而且对我来说创建一些本机代码来读取 USB 端口数据会很困难。

在研究这一点时，我发现大多数扫描仪实际上都具有模拟串行端口输入的能力，因此如果您希望程序能够检测扫描而不必先获得焦点，我建议您注意该功能。

[我在这里](https://stackoverflow.com/a/8621266/1062992)用一些例子回答了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T04:16:44.297

Symbol 系列扫描仪运行良好并且是可编程的。我们使用[型号：LS2208](https://www.zebra.com/us/en/products/scanners/general-purpose-scanners/handheld/ls2208.html)。您可以通过条形码或可从其网站下载的免费软件对其进行编程。创建程序后，您可以将其保存和/或打印为一张条形码，可以对其进行扫描以重新编程其他其他单元。

# makefile - 如何在makefile中执行条件语句

> ID：10883836
> 
> 赞同：8
> 
> 时间：2012-06-04T15:24:56.653
> 
> 标签：makefile, gnu-make

我正在尝试使用命令行 var 来选择我们用来编译的工具包。在命令行中，我使用如下行：

```
make all-arm OUR_TOOLKIT=1 
```

而且，在每个隐含的makefile中，我都把它包含在

```
include ARM_Compiler.inc 
```

然后，在每个 makefile 中，

```
all: setToolkit $(otherOperations) 
```

而ARM_Compiler的内容就是选择编译器的逻辑：

```
setToolkit: 
ifdef OUR_TOOLKIT
    TOOLKIT=1
endif
ifdef CUSTOMER_TOOLKIT
    TOOLKIT=2
endif

ifeq ($(TOOLKIT), 1)
    $(info "=========Our toolkit selected======================")
    rm=/bin/rm -f
    CC= arm-linux-c++ -fPIC
    CXX= arm-linux-c++ -fPIC
    LINK= arm-linux-c++ -shared -Wl
    AR= ar cq
    RANLIB= ranlib
    STRIP=arm-linux-strip 

    # para que se utilicen las herramientas y librerias del cross compiler
    PATH:=$(PATH):/path/to/our/toolkit
    LD_LIBRAY_PATH:=$(LD_LIBRAY_PATH):/path/to/our/toolkit          
endif

ifeq ($(TOOLKIT), 2)
    $(info "================Customer toolkit selected====================")
    rm=/bin/rm -f
    CC= arm-none-linux-gnueabi-c++ -fPIC
    CXX= arm-none-linux-gnueabi-c++ -fPIC
    LINK= arm-none-linux-gnueabi-c++ -shared -Wl
    AR= ar cq
    RANLIB= ranlib
    STRIP= arm-none-linux-gnueabi-strip 

    # para que se utilicen las herramientas y librerias del cross compiler
    PATH:=$(PATH):/path/to/other/toolkit
    LD_LIBRAY_PATH:=$(LD_LIBRAY_PATH):/path/to/other/toolkit
endif 
```

感谢 0A0D 的帮助，我发现 TOOLKIT 的值总是空的。我已经稍微更改了代码。现在的问题是 make 抛出错误

```
../makefile-includes/ARM-compiler.inc:10: *** commands commence before first target 
```

在这一行：

```
ifeq ($(TOOLKIT), 1) 
```

有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T19:46:55.893

这个问题的变体出现了很多。

**每个命令都在自己的子shell中执行；在一个命令中设置的变量不能在另一个命令中使用。**

但是您可以在规则之外设置变量：只需从上面的条件语句中删除所有前导 TAB。这将适用于除`PATH`and之外的所有内容`LD_LIBRARY_PATH`。在我看来，这些都不是 Make 应该解决的问题，但是有一些方法可以获得你想要的效果。你可以这样处理`PATH`：

```
ifeq ($(TOOLKIT), 1)
  TOOLKITPATH = /path/to/our/toolkit
endif
...

sometarget:
    $(TOOLKITPATH)/sometool somearg 
```

或者像这样：

```
all:
    export PATH=$$PATH:$(TOOLKITPATH) ; $(MAKE) $(otherOperations) 
```

你可能根本不应该使用`LD_LIBRARY_PATH`。

# objective-c - 添加/隐藏 UITabBarItem

> ID：10883839
> 
> 赞同：0
> 
> 时间：2012-06-04T15:24:59.630
> 
> 标签：objective-c, xcode4

我有一个 UITabBarController 并想添加一个选项卡，使其能够消失。我用 XCode 添加了 2 个选项卡。您可以通过程序添加第三个选项卡吗？我知道这样的命令：

```
 [self setViewControllers: [NSArray arrayWithObjects: x1, nil] animated: NO]; 
```

您可以检索使用 XCode 添加第三个视图的数组吗？谢谢

* * *

我无法使用代码加载视图。我从情节提要创建了一个视图控制器，当我尝试从代码中加载它时出现黑屏，请使用以下代码：

```
ViewControllerA *x1 = [[ViewControllerA alloc] init];
[self setViewControllers:[NSArray arrayWithObjects: x1, nil] animated:NO]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:07:42.043

是的，如果您使用，[`[UITabViewController setViewControllers: animated:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarController/setViewControllers%3aanimated%3a)您可以添加一个包含两个先前视图控制器和新的第三个视图控制器的数组。

例如，您可能希望这样做：

```
// assuming you've set an IBOutlet to your tab bar controller
NSArray * currentSetOfViewControllers = [appTabBarController viewControllers];
if((currentSetOfViewControllers == NULL) || [currentSetOfViewControllers count] == 0))
{
    NSLog( @"I don't see any view controllers; is my tab bar controller outlet set properly?")
} else {
    NSMutableArray newSetOfViewControllers = [[NSMutableArray alloc] initWithArray: currentSetOfViewControllers];
    if(newSetOfViewControllers)
    {
        ViewControllerA *x1 = [[ViewControllerA alloc] init];
        if(x1)
        {
            [newSetOfViewControllers addObject: x1];

            [appTabBarController setViewControllers: newSetOfViewControllers];

            // release our alloc'd mutable array only if you do not have ARC turned on
            [newSetOfViewControllers release];
        }
    }
} 
```

您可能还想为您的新视图控制器提供一个带有标题和图像的关联标签栏项目。退房[`[UITabBarItem initWithTitle: image: tag:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarItem/initWithTitle%3aimage%3atag%3a)。

我已经为您链接了 Apple 文档，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:37:18.287

在委托中创建一个自定义选项卡栏，因此创建一个类似于选项卡栏的视图，并在视图和 3 个按钮（1 个按钮设置为隐藏）上设置 1 个图像视图（1 个按钮设置为隐藏）在您需要第三个按钮启用第三个按钮之后在选项卡栏控制器中添加此视图

# java - 如何使用 Class.forName 的结果创建泛型类的实例

> ID：10883844
> 
> 赞同：0
> 
> 时间：2012-06-04T15:25:15.417
> 
> 标签：java, generics, reflection

我可以在不知道其类型参数的情况下创建泛型类的实例吗？我只有 'class' 类型，它是从 Class.forName(classname) 中获得的；

```
//generic class

public class MappedField<T> extends Field {
    private T value;
    private String sourceName;

public MappedField(String name, String sourceName, FieldType type){
    super(name, type);
    this.sourceName = sourceName;
}    

public MappedField(String name, String sourceName, FieldType type, boolean key){
    super(name, type, key);
    this.sourceName = sourceName;
} 
```

}

```
//here's my situation

    String columnName = field.getSourceName() != null ? field.getSourceName() : field.getName();
            Class c = Class.forName(field.getType().getFullClassName());            

            //I need like that if `field.getType() = "Integer"`: `MappedField<Integer> objField = new MappedField<Integer>(field)`;
            MappedField objField = new MappedField(field);

            objField.setValue(getField(c, rset, columnName));            
            object.getValues().add(objField); 
```

**编辑：** 就像我有“java.lang.Integer”并想要获取 MappedField

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:35:23.863

成功编译后，泛型类型将从类和接口中删除。在运行时无法检测到泛型类型。

参考链接： [使用反射在Java中创建泛型参数化类](https://stackoverflow.com/questions/6373800/use-reflection-to-create-a-generic-parameterized-class-in-java)

# python - How do I database off Heroku to my local machine? I have a Django app (not Rails)

> ID：10883846
> 
> 赞同：2
> 
> 时间：2012-06-04T15:25:32.810
> 
> 标签：python, database, django, heroku

How do I get my database off Heroku? I'm trying to figure out how to sync with my local machine.

I easily found instructions for a rails app, but not Django.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:44:27.260

虽然方便，但使用水龙头可能无法准确复制您的数据，并且可能会在较大的传输中遇到错误。要从生产系统导入或导出数据，我们强烈建议使用 pgbackups。[https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:33:58.973

heroku cli 提供了“db”命令在本地机器和 heroku 之间移动数据。

查看他们的帮助：[https ://devcenter.heroku.com/articles/taps](https://devcenter.heroku.com/articles/taps)

以及他们几年前的博客文章：http: [//blog.heroku.com/archives/2009/3/18/push_and_pull_databases_to_and_from_heroku/](http://blog.heroku.com/archives/2009/3/18/push_and_pull_databases_to_and_from_heroku/)

# javascript - WebForm_AutoFocus is not being generated

> ID：10883847
> 
> 赞同：0
> 
> 时间：2012-06-04T15:25:33.483
> 
> 标签：javascript, asp.net, focus

I have an ASP.NET page which sometimes does not generate the expected "WebForm_AutoFocus()" javascript, even though I am explicitly calling .Focus() on one of the controls. Are there any known scenarios where some factor would prevent that javascript from being generated?

Specifically, when the user clicks a particular button, I'm creating some new controls dynamically: in this case a text box. In OnPreRender I'm grabbing that newly-created control and calling .Focus() on it. The idea is, when the postback completes, the browser gives focus to the newly-created textbox control. However, the generated HTML (verified via firebug and fiddler) simply does not contain a WebForm_Autofocus call at all.

In other scernarios, the same page (on postback or on initial hit) calls .Focus() on a different control - one which is not dynamically created; in those cases the WebForm_AutoFocus() script is generated perfectly, and all is well.

Unfortunately, I'm working on a client system that LOVES frameworks upon frameworks, and abstractions upon abstractions, so I cannot post a meaningful/concise code sample here. However, if any of my friendly SO'ers knows more about generation of that "WebForm_AutoFocus" javascript - and scenarios which would prevent it from being generated - that would give me a good place to start digging.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:09:02.233

只有当 asp.net 认为有需要时，才会包含自动对焦调用。在页面上设置一个默认按钮，以便 asp.net 知道该方法。

# codeigniter - Codeigniter - Ordering active record alphabetically

> ID：10883848
> 
> 赞同：9
> 
> 时间：2012-06-04T15:25:35.593
> 
> 标签：codeigniter

I was wondering if someone could help me out with something.

I have a bit of ajax that calls a function in my model.

But i cant seem to be able to order the output by 'model'.

Below the function im having trouble with

```
function get_models_by_brand($tree = null)
{
    $this->db->select('id, model');

    if($tree != NULL){
        $this->db->where('brand_id', $tree);
    }

    $query = $this->db->get('models');
    $models = array();

    if($query->result()){
        foreach ($query->result() as $model) {
            $models[$model->id] = $model->model;
        }
        return $models;
    } else {
        return FALSE;
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-04T15:29:59.280

[从文档](https://ellislab.com/codeigniter/user-guide/database/active_record.html)中，

> **$this->db->order_by();**
> 
> 允许您设置 ORDER BY 子句。第一个参数包含您要排序的列的名称。第二个参数允许您设置结果的方向。选项是 asc 或 desc，或随机。
> 
> ```
> $this->db->order_by("title", "desc"); 
> // Produces: ORDER BY title DESC 
> ```
> 
> 您也可以在第一个参数中传递您自己的字符串：
> 
> ```
> $this->db->order_by('title desc, name asc'); 
> // Produces: ORDER BY title DESC, name ASC 
> ```
> 
> 或者，如果您需要多个字段，可以进行多个函数调用。
> 
> ```
> $this->db->order_by("title", "desc");
> $this->db->order_by("name", "asc"); 
> // Produces: ORDER BY title DESC, name ASC 
> ```

# xml - Group child nodes into group of 4

> ID：10883852
> 
> 赞同：0
> 
> 时间：2012-06-04T15:26:04.140
> 
> 标签：xml, xslt

I have the following XSLT, I am using identity transform because I need to keep the xml intact and only change a specific section of the XML i.e: the `<committee committeetype="Associate">`

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output indent="yes"/>
        <xsl:strip-space elements="*"/>

        <!--Identity Transform.-->
        <xsl:template match="node()|@*">
            <xsl:copy>
                <xsl:apply-templates select="node()|@*"/>
          </xsl:copy>
        </xsl:template>

      <xsl:template match="committee[@committeetype='Associate']/affiliation">
            <Committee CommitteeType="Associate"> 
                <xsl:copy>  
                    <xsl:apply-templates select="node()|@*"/>   
                </xsl:copy>  
           </Committee >
      </xsl:template>

  <xsl:template match="committee[@committeeType='Associate']">
        <xsl:apply-templates/>
  </xsl:template>

</xsl:stylesheet> 
```

Transforms

```
<committee committeetype="Associate">
    <affiliation dbid="11">
        <name>Eve </name>
    </affiliation>
    <affiliation dbid="12">
        <name>Dan </name>
    </affiliation>
    <affiliation dbid="13">
        <name>Harold </name>
    </affiliation>
    <affiliation dbid="14">
        <name>Chris </name>
    </affiliation>      
    <affiliation dbid="25">
        <name>Malcolm </name>
    </affiliation>
    <affiliation dbid="15">
        <name>Mike </name>
    </affiliation>
</committee> 
```

Into

```
 <committee committeetype="Associate">
                <affiliation dbid="11">
                    <name>Eve </name>
                </affiliation>
            </committee>
            <committee committeetype="Associate">
                <affiliation dbid="12">
                    <name>Dan </name>
                </affiliation>
            </committee>
            <committee committeetype="Associate">
                <affiliation dbid="13">
                    <name>Harold </name>
                </affiliation>
            </committee>
            <committee committeetype="Associate">
                <affiliation dbid="14">
                    <name>Chris </name>
                </affiliation>
            </committee>
            <committee committeetype="Associate">
                <affiliation dbid="25">
                    <name>Malcolm </name>
                </affiliation>
            </committee>
            <committee committeetype="Associate">
                <affiliation dbid="15">
                    <name>Mike </name>
                </affiliation>
            </committee> 
```

> How can i make it so it groups the affiliation into 4 per `<committee committeetype="Associate">`

Such as

```
 <committee committeetype="Associate">
                <affiliation dbid="11">
                    <name>Eve </name>
                </affiliation>
                <affiliation dbid="12">
                    <name>Dan </name>
                </affiliation>
                <affiliation dbid="13">
                    <name>Harold </name>
                </affiliation>
                <affiliation dbid="14">
                    <name>Chris </name>
                </affiliation>
   </committee>
   <committee committeetype="Associate">
                <affiliation dbid="25">
                    <name>Malcolm </name>
                </affiliation>
               <affiliation dbid="15">
                    <name>Mike </name>
                </affiliation>
   </committeemembergroup> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:50:57.870

Here is a suggestion that might suffice:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:param name="chunk-size" select="4"/>

  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

        <!--Identity Transform.-->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="committee[@committeetype='Associate']">
    <xsl:apply-templates select="affiliation[position() mod $chunk-size = 1]" mode="group"/>
  </xsl:template>

  <xsl:template match="committee[@committeetype='Associate']/affiliation" mode="group">
    <committee committeetype="Associate">
      <xsl:apply-templates select=". | following-sibling::affiliation[position() &lt; $chunk-size]"/>
    </committee>
  </xsl:template>

</xsl:stylesheet> 
```

It transforms

```
<committee committeetype="Associate">
    <affiliation dbid="11">
        <name>Eve </name>
    </affiliation>
    <affiliation dbid="12">
        <name>Dan </name>
    </affiliation>
    <affiliation dbid="13">
        <name>Harold </name>
    </affiliation>
    <affiliation dbid="14">
        <name>Chris </name>
    </affiliation>      
    <affiliation dbid="25">
        <name>Malcolm </name>
    </affiliation>
    <affiliation dbid="15">
        <name>Mike </name>
    </affiliation>
</committee> 
```

into

```
<committee committeetype="Associate">
   <affiliation dbid="11">
      <name>Eve </name>
   </affiliation>
   <affiliation dbid="12">
      <name>Dan </name>
   </affiliation>
   <affiliation dbid="13">
      <name>Harold </name>
   </affiliation>
   <affiliation dbid="14">
      <name>Chris </name>
   </affiliation>
</committee>
<committee committeetype="Associate">
   <affiliation dbid="25">
      <name>Malcolm </name>
   </affiliation>
   <affiliation dbid="15">
      <name>Mike </name>
   </affiliation>
</committee> 
```

I don't know however whether your `committee` elements have other child elements than the `affiliation` ones the above stylesheet processes. If there are more code is needed.

# php - PHP's date usage results in 2 hours error

> ID：10883854
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:26:10.340
> 
> 标签：php

I'm using `date('H:i:s', (time() - $start['time']))` to displa time that passed since start of the script.

whatever the result of `time() - $start['time']` - be it 0, 17 or whatever the date prints out like 02:00:00, 02:00:17 etc.

What may be the reason?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:32:45.127

`time`返回一个**绝对**数字时间戳，例如`2012-06-04 16:35:12`. 您的开始时间是一个类似的数字绝对时间戳。从另一个中减去一个将导致一个非常小的数字，这又是一个绝对时间戳。可能在 1970 年初的某个时间。当您使用 格式化该时间戳时`date('H:i:s')`，您只显示时间戳的时间部分，例如`1970-01-01 02:00:00`。

阅读[UNIX 时间戳实际代表](http://en.wikipedia.org/wiki/Unix_timestamp)的内容。

您要查找的时差是 的结果`time() - $start['time']`，以秒为单位，您不能简单地使用`date()`. 更多沿线：

```
$diff = time() - $start['time'];
echo 'Difference in seconds: ' . $diff;
echo 'Difference in minutes: ' . $diff / 60;
echo 'Difference in hours: '   . $diff / 60 / 60; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:37:38.243

似乎您添加了 2H 偏移量。

```
// save current TZ
$current_tz = date_default_timezone_get();
// Use universal time
date_default_timezone_set('UTC');
$t = time();
echo "T:".$t."<br/>";
sleep(2);
echo "T2: ".date('H:i:s', time() - $t );
// return correct TZ
date_default_timezone_set($current_tz); 
```

如果我在没有 date_default_timezone_set('UTC') 的情况下尝试此代码，它将给我预期值 + 夏令时 (GMT+1) 的 1H。如果您只需要 2 次之间的差异，您可以同时使用 UTC 并且您只能获得差异，或者您可以检查当前时间偏移并减去它。

希望能帮助到你

# wordpress - Wordpress 博客 URL 重定向

> ID：10883857
> 
> 赞同：0
> 
> 时间：2012-06-04T15:26:26.887
> 
> 标签：wordpress, blogs

只有两个问题：

1.  我有一个网站，包括 wordpress 中的博客部分。现在要求发生了变化，我的客户希望我在不同的域上创建一个博客部分。他想要不同域的网站和博客。昨天我在另一台服务器上设置了博客，但问题是当我点击任何帖子时，它会将我带到旧域上的帖子。知道如何解决这个问题吗？

2.  此外，我们还向客户发送了许多时事通讯，其中我们发布了旧域的 URL。是否可以将他们重定向到新域上的帖子，过程是什么？

如果你给我文章或教程链接，我真的很感激，因为我不是 PHP 人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:09:35.757

这是一个有趣的东西，所以这就是你应该如何进行 -

**第一个问题的解决方案**是用 MySQL 转储文件中的新域替换旧域。在继续之前，请备份您的数据库，以防万一。但是这个解决方案效果最好，因为我时不时地将客户的网站从我的 Devserver 转移到实时服务器。跟着这些步骤 -

1.  [使用 shell 中的 mysqldump 命令](http://www.digimantra.com/technology/mysql/transfer-database-host-mysqldump-shell/)打开新主机的 cpanel 或转储 mysql 文件
2.  在您最喜欢的文本编辑器中打开这个转储文件，只需找到“http://old_domain.com”并替换为“http://new_domain.com”，它将替换所有元条目、帖子条目等。现在保存htis 文件。
3.  截断新域数据库的数据库表（别担心，我们有备份）
4.  导入您在步骤 2 中保存的 SQL 文件，大功告成！

**第二个问题的解决方案**是设置 .htaccess 重定向。我确定您使用的是 apache 服务器，因为每个人都这样做 :) ，设置 .htaccess 重定向非常容易，您可以使用它将所有访问旧网站的访问者重定向到新网站 URL。几年前我在我的博客上使用了以下代码，并且有一篇关于[如何设置 apache 重定向到新域](http://www.digimantra.com/tutorials/wordpress/moving-your-wordpress-blog-from-one-domain-to-other/)的博文，以防你想了解更多信息。

```
RewriteCond %{HTTP_HOST} ^.*old_domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.new_domain.com/$1 [R=301,L] 
```

如果有什么不清楚的地方请告诉我，我会尽力澄清。

干杯，

萨钦·科斯拉

# mobile - How do I develop an OAuth Authorization page which a user can interact with but not the application being authorized?

> ID：10883861
> 
> 赞同：0
> 
> 时间：2012-06-04T15:26:36.650
> 
> 标签：mobile, oauth, authorization

How do I develop an OAuth Authorization page which a user can interact with but not the application being authorized?

I'm developing an API set and want to allow mobile apps to interact with the API, provided that they're authorized to do so on behalf of the user.

Once I've authenticated the user, how do I ensure that the user has clicked the OK button, rather than the application itself?

Regards, Yusuf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:31:48.200

在发送访问令牌之前，您可以添加输入任何类型的验证码的需要，例如重新输入密码或输入验证码。

# uitableview - 如何让一个部分显示所有内容？（在 UITableView 中）

> ID：10883868
> 
> 赞同：0
> 
> 时间：2012-06-04T15:26:57.243
> 
> 标签：uitableview

我正在玩一段代码，这就是我到目前为止所得到的。该应用程序获取一个 XML 提要来显示招聘广告，并将它们显示在我附加的图像中。

我想弄清楚的是，如何使“描述”部分显示从 XML 文件中获取的所有信息。

答案会隐藏在用这种方法改变一些东西吗？

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
}

switch(indexPath.section)
{
    case 0:
        cell.text = aBook.title;
        break;
    case 1:
        cell.text = aBook.author;
        break;
    case 2:
        cell.text = aBook.summary;
        break;
}

return cell; 
```

}

![工作清单](../Images/5f90548616f852fbead1b2a826a5d7f0.png)

![工作细节](../Images/9df4097a5fb2d586d957858c3457df17.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:51:14.733

尝试实现这一点：

```
-(CGFloat ) tableView:(UITableView*) tableView heightForRowAtIndexPath:(NSIndexPath*) indexPath
{
If(indexPath.section==2)
{
return 60;
}
} 
```

# c# - 使用 Linq 高效处理 Xnode

> ID：10883872
> 
> 赞同：1
> 
> 时间：2012-06-04T15:27:07.203
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有以下格式的 xml 节点。该节点必须转换为用户定义的类型，即每个节点必须转换为 MyClass 的对象

```
class MyClass
{
  public string tag1Id {get;set;}
  public int tag3Val {get;set;}
  public string tag3Id {get;set;}
  public int tag5Val {get;set;}
  public string tag5Id {get;set;}
  public DataTime tag7Val {get;set;}

}

  <tag1 id="id1">
     <tag2>
       <tag3 id="id3">10</tag3>
       <tag4>
        <tag5 id="id5">20</tag5>
       </tag4>
     </tag2>
     <tag6>
      <tag7>2010-12-31</tag7>
     </tag6>
    </tag1> 
```

我是 linq 的新手，可以使用 linq 完成吗？要求是不应使用 xmlseralization :( 有没有其他方法可以轻松处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:11:03.560

不，它不能完成。

由于业务逻辑管道从严格的节点 ID/位置转到特定属性，因此必须在某处进行转换。

可以做的是编写一个构造函数，该构造函数接受节点并相应地填充属性。然后可以使用 Linq 枚举节点并通过 select 创建类元素的新投影，例如：

```
 string data = @"
<tags>
  <tag id=""id1""> 
     <tag2> 
       <tag3 id=""id3"">10</tag3> 
       <tag4> 
        <tag5 id=""id5"">20</tag5> 
       </tag4> 
     </tag2> 
     <tag6> 
      <tag7>2010-12-31</tag7> 
     </tag6> 
    </tag> 
</tags>
    ";
var xml = XDocument.Parse(data);

    var classes = xml.Descendants( "tag1" )
                     .Select( nd => new MyClass( nd ) ); 
```

# android - Android通知栏图标，有没有办法锁定图标的位置？

> ID：10883873
> 
> 赞同：0
> 
> 时间：2012-06-04T15:27:09.727
> 
> 标签：android, notifications, icons, android-notification-bar

我目前有一个服务驱动的通知出现。我试图弄清楚是否有办法锁定图标出现的位置。我想确保该图标始终位于通知栏上的同一位置，无论它之前或之后出现多少通知。理想情况下，我想将其锁定在时钟和 Wifi 图标的右侧。我在冰淇淋三明治。有谁知道这是否可能？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:56:23.993

使用 Notification.when 属性。您可以使用非常高的值（long.Max）或非常小的值（-long.Max）将它定位在第一个或最后一个。但我们总是在谈论左派。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:39:25.860

First, you cannot control the position of your `Notification` in the status or system bar, sorry.

Second, at least on phones, your `Notification` will be on the left, away from "the clock and Wifi icons".

# java - Java Web 应用程序中的静态函数

> ID：10883874
> 
> 赞同：-2
> 
> 时间：2012-06-04T15:27:13.790
> 
> 标签：java

我在一个由 Servlet 调用的类中有一个静态函数。假设，如果一次有 100 个请求，该功能是否适用于所有请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:40:55.130

所有请求都由同一个虚拟机在同一个进程中处理，但线程不同。所以是的，任何静态成员都可用于所有请求。

请注意，如果您从这些多个线程更改静态数据，您最好同步该数据以确保线程安全。或使用 ThreadLocal 对象，这些对于每个线程都是不同的。

# jquery - BlackBerry 的 jQuery 移动固定工具栏解决方法？

> ID：10883880
> 
> 赞同：2
> 
> 时间：2012-06-04T15:27:31.320
> 
> 标签：jquery, blackberry, jquery-mobile, blackberry-webworks

我正在使用 jquery mobile 构建一个 webworks 应用程序。

我想使用 jQuery 移动[固定工具栏](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)，但 BB7 似乎不支持它。

有谁知道在 BB7 中获得类似工具栏行为的解决方法？

*编辑：*

这是 Android 中带有固定页眉和页脚的应用程序，适用于我测试过的所有模型。

![在此处输入图像描述](../Images/1f208d9d76865f8e54ec796a3b224ae3.png)

这就是它在 BB 7.1 上的 9860 上的工作方式。我可以确认以下设备 BB7.1(9860、9810、9320)、BB6(9700) 上发生了同样的问题。到目前为止，我已经测试过这些。

![在此处输入图像描述](../Images/2201ed454a03b5088961c91340318036.png)

正如@JasonDScott 指出的那样，尽管该属性确实适用于BB7.1（9930）和BB7（9930）。我还发现它适用于 BB7（9360-ATT）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:36:24.023

尝试这个 -

```
$(document).bind("pagecreate", function()
{
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
$("[data-role=header]").fixedtoolbar({ tapToggle: true });
$("[data-role=footer]").fixedtoolbar({ tapToggle: true });
$("[data-position='fixed']").fixedtoolbar('show');
}); 
```

# actionscript-3 - 访问嵌入式 aswf 的子项

> ID：10883884
> 
> 赞同：1
> 
> 时间：2012-06-04T15:28:01.733
> 
> 标签：actionscript-3, flash, embedding

我正在嵌入一个 swf 文件，该文件在其时间线上有一些子项。像这样：

```
[Embed(source="assets/skyscraper200x600.swf")]
private var Skyscraper  :Class; 
```

swf 中的所有子对象都有一个实例名称，我在 Flash CS5 中创建 swf 时仔细检查了该名称。我正在尝试按如下名称访问这些孩子：

```
_bg = MovieClip(new Skyscraper());
_pig = MovieClip(_bg.getChildByName("chara_pig"));
_arrow = MovieClip(_bg.getChildByName("arrow_banner")); 
```

但是，_pig 和 _arrow 最终都为空。

更奇怪的是，当我在调试器中查看 Skyscraper 对象时，它显示了一个相当奇怪的类名和一个 Loader 作为其唯一的孩子（而它又没有孩子）。这是怎么回事？

.

如果我不嵌入 swf，我**可以像上面那样访问它们，而是使用 Loader 加载它。**但在这种情况下我不能这样做。我需要嵌入瑞士法郎。

那么，如何访问嵌入式 swf 的子项？

我说的**不是**访问嵌入式 swf 库中的类，而是时间轴上的实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:28:40.900

这是一个解决方案。您还可以查看帮助我找到此解决方案的步骤（describeType 是您的朋友）：

```
public class Demo extends Sprite {

    [Embed(source="test.swf")]
    private var Test:Class

    public function Demo() {
        //first guess is that embed SWF is a MovieClip
        var embedSWF:MovieClip = new Test() as MovieClip;
        addChild(embedSWF);

        //well, emebed SWF is more than just a MovieClip...       
        trace(describeType(embedSWF));//mx.core::MovieClipLoaderAsset
        trace(embedSWF.numChildren);//1
        trace(describeType(embedSWF.getChildAt(0)));//flash.display::Loader

        var loader:Loader = embedSWF.getChildAt(0) as Loader;

        //the content is not already loaded...
        trace(loader.content);//null

        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(){
            var swf:MovieClip = loader.content as MovieClip;
            var child:MovieClip = swf.getChildByName("$blob") as MovieClip;
            //do nasty stuff with your MovieClip !
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:43:02.393

在本教程的末尾[http://jadendreamer.wordpress.com/2010/12/20/flash-as3-embedding-symbols-from-external-swf-game-tutorial](http://jadendreamer.wordpress.com/2010/12/20/flash-as3-embedding-symbols-from-external-swf-game-tutorial) 有一个如何完成的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:13:47.450

一种解决方案是将 swf 嵌入为[八位字节流并重构其字节。](http://cookbooks.adobe.com/post_Embedding_assets_with_application_octet_stream-8046.html) 但是，我似乎记得在某处读过，如果您只是将 mimeType 设置为“application/x-shockwave-flash”，您会得到一个正常工作的 MovieClip。

# jquery - jQuery onclick 不适用于 href 和 img

> ID：10883898
> 
> 赞同：0
> 
> 时间：2012-06-04T15:29:02.983
> 
> 标签：jquery, html, cordova

我想在单击链接到 ID 时显示 div。

jQuery：

```
 $('#tab-bar a').on('click', function(e){

    e.preventDefault();
    var nextPage = $(e.target.hash);
    page(nextPage);
    $("#pages .current").removeClass("current");
    nextPage.addClass("current");
    }); 
```

HTML：

```
 <div id="pages">
     <div id="mainpage" class="current">
      <ul id="tab-bar">
    <li>
    <a href="#mimik"><img src="img/mimik.jpg"  alt="mimik"></img></a><br>
    </li>
      </ul>
     </div>

  <div id="mimik">
   <h2 style="color:red">Mimik</h2>
  </div> 
```

当我使用文本而不是图像时，它可以按我的意愿工作。显示 h2。将图像作为“链接”显示为空白页。我怎么解决这个问题？

最好的问候西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:32:35.210

那是因为当您在锚点中有图像时，事件目标`img`在您单击它时是一个元素，并且它没有任何`hash`属性。在我使用方法从目标元素`closest`中找到最接近的元素的地方试试这个。`a`

```
$('#tab-bar a').on('click', function(e){
    e.preventDefault();
    var nextPage = $($(e.target).closest('a')[0].hash);
    page(nextPage);
    $("#pages .current").removeClass("current");
    nextPage.addClass("current");
}); 
```

或者，您可以使用`this.hash`where`this`将指向附加事件的元素。

```
$('#tab-bar a').on('click', function(e){
    e.preventDefault();
    var nextPage = $(this.hash);
    page(nextPage);
    $("#pages .current").removeClass("current");
    nextPage.addClass("current");
}); 
```

# asp.net - 尝试在 asp.net webforms 中使用 jquery-ui 组合框

> ID：10883901
> 
> 赞同：2
> 
> 时间：2012-06-04T15:29:11.250
> 
> 标签：asp.net, jquery-ui, webforms

我正在尝试在我的 asp.net 3.5 webforms 应用程序中使用 jqueryUI 组合框。我添加了一个下拉列表并使用 jquery 修改了它的样式。我遇到的问题是，当我尝试执行回发时，下拉菜单通常会在它选择的项目被更改时执行。组合框不会更改它的值，并且我收到错误消息，即 _dopostback 未在我的 firebug 错误控制台中定义。我一直在这里以及在 asp.net 论坛中阅读有关此内容的内容，并找到了一些答案，告诉我应该尝试 GetPostBackEventReference 方法，但仍然没有发生任何事情。下面是代码，谢谢。

```
<script type="text/javascript">
    (function ($) {
        $.widget("ui.combobox", {
            _create: function () {
                var input,
                self = this,
                select = this.element.hide(),
                selected = select.children(":selected"),
                value = selected.val() ? selected.text() : "",
                wrapper = $("<span>")
                    .addClass("ui-combobox")
                    .insertAfter(select);

                input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .addClass("ui-state-default")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function (request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                        response(select.children("option").map(function () {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>"),
                                    value: text,
                                    option: this
                                };
                        }));
                    },
                    select: function (event, ui) {
                        ui.item.option.selected = true;
                        self._trigger("selected", event, {
                            item: ui.item.option
                        });
                        _doPostBack('<%= ddlModalities.UniqueID %>', "");
                    },
                    change: function (event, ui) {
                        if (!ui.item) {
                            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                valid = false;
                            select.children("option").each(function () {
                                if ($(this).text().match(matcher)) {
                                    this.selected = valid = true;
                                    $(select).change();

                                    return false;
                                }
                            });
                            if (!valid) {
                                // remove invalid value, as it didn't match anything
                                $(this).val("");
                                select.val("");
                                input.data("autocomplete").term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass("ui-widget ui-widget-content ui-corner-left");

                input.data("autocomplete")._renderItem = function (ul, item) {
                    return $("<li></li>")
                    .data("item.autocomplete", item)
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
                };

                $("<a>")
                .attr("tabIndex", -1)
                .attr("title", "Show All Items")
                .appendTo(wrapper)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-button-icon")
                .click(function () {
                    // close if already visible
                    if (input.autocomplete("widget").is(":visible")) {
                        input.autocomplete("close");
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $(this).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete("search", "");
                    input.focus();
                });
            },

            destroy: function () {
                this.wrapper.remove();
                this.element.show();
                $.Widget.prototype.destroy.call(this);
            }
        });
    })(jQuery);

    $(function () {
        $("#<%=ddlModalities.ClientID %>").combobox();
    });
</script>

<div class="ui-widget">
    <asp:DropDownList runat="server" ID="ddlModalities" Width="150px" AutoPostBack="True"
                                DataSourceID="odsModalitiesNoWorklist" DataTextField="Ae" DataValueField="Id"
                                CssClass="ddlStandardWidth" OnDataBound="ddlModalities_DataBound" OnSelectedIndexChanged="ddlModalities_SelectedIndexChanged" />
                        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:42:44.363

看起来你正在调用“ `_doPostBack`”。但是，ASP.NET 生成的函数是“ `__doPostBack`”——开头有两个“_”字符，而不仅仅是一个。这可能是您的“功能未定义”错误的原因。

# java - 如何在 Java 中测试 IO 问题？

> ID：10883907
> 
> 赞同：0
> 
> 时间：2012-06-04T15:29:28.667
> 
> 标签：java, unit-testing, io

在不使用休眠的模拟流（因为它们会对中断做出反应）的情况下，如何测试我的应用程序代码的行为以应对 IO 性能非常差的情况？

例如，我想测试一个`ConcurrentWrapper`具有文件 IO 线程池的实用程序。它将每个操作提交给一个`ExecutorService`带有`invokeAll()`超时的操作。我不仅要确认调用`ConcurrentWrapper`在超时之前退出，而且还要确认它以某种方式使其内部线程`ExecutorService`终止（以避免泄漏）。

我需要以某种方式模拟内部线程中的慢速 IO，但是以一种忽略中断的方式（就像真正的 IO 一样）。

**澄清一下**：没有像“睡觉和吞咽`InterruptedException`”或“睡觉，抓住`InterruptedException`然后继续睡觉”这样的答案是可以接受的。我想测试我的代码如何处理中断，而这种检测会通过处理它们本身来破坏目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:34:18.277

您可以通过中断坚持睡眠的方式进行睡眠：

```
long start = System.currentTimeMillis();
long end = start + sleepTime;
for (long now = start; now < end; now = System.currentTimeMillis()) {
    try {
        Thread.sleep(end - now);
    } catch (InterruptedException ignored) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:38:17.343

对于超时测试，您实际上可以设置执行测试的最长时间，在[JUnit](http://junit.sourceforge.net/javadoc/org/junit/Test.html)中您可以包含注释超时：

```
@Test(timeout=100)
public void method_withTimeout() {
       while(true);
} 
```

对于该方法退出的测试部分，您可以使用[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)接口，该接口提供超时以获取结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:26:01.353

如果我正确理解您的问题，ReentrantLock 可能会有所帮助。

```
final ReentrantLock lock = new ReentrantLock();

Callable<Void> c = new Callable<Void>() {
  public void call() {
    lock.lock();

    try {

       if (Thread.currentThread().isInterrupted()) {
         ...
       }
    }
    finally {
      lock.unlock();
    }
  }
}

// Submit to the pool
Future<Void> future = executorService.submit(c);

// you might want to sleep a bit to give the pool a chance
// to pull off the queue.

// Issue a cancel
future.cancel();

// Now release the lock, which should let your
// callable continue onto to the interrupted check.
lock.unlock(); 
```

请注意，“lock”方法不会抛出任何 InterruptedException（尽管有一个称为“lockInterruptibly”的方法），如果您查看该类的代码，它不会捕获和吞咽（正如您所说的不会成为你想成为的人）。

# mysql - 为什么这个带有子查询的 SQL 查询很慢？

> ID：10883908
> 
> 赞同：9
> 
> 时间：2012-06-04T15:29:29.337
> 
> 标签：mysql, sql

我有这个查询：

```
select *
from transaction_batch
where id IN
(
    select MAX(id) as id
    from transaction_batch
    where status_id IN (1,2)
    group by status_id
); 
```

内部查询运行非常快（不到 0.1 秒）以获取两个 ID，一个用于状态 1，一个用于状态 2，然后它根据主键进行选择，因此它被索引。解释查询说它只使用 where 搜索 135k 行，我终其一生都无法弄清楚为什么这么慢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T15:34:02.113

内部查询会一遍又一遍地为表的每一行单独运行。

由于内部查询中没有对外部查询的引用，我建议您拆分这两个查询并将内部查询的结果插入`WHERE`子句中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T15:34:36.950

```
select b.*
from transaction_batch b
inner join (
    select max(id) as id
    from transaction_batch
    where status_id in (1, 2)
    group by status_id
) bm on b.id = bm.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T17:39:58.383

我在这里的第一篇文章..抱歉缺少格式

我遇到了如下所示的性能问题：

90sec: `WHERE [Column] LIKE (Select [Value] From [Table])` //动态的，慢的

1sec: `WHERE [Column] LIKE ('A','B','C')` //硬编码，快速

1sec: `WHERE @CSV like CONCAT('%',[Column],'%')` //解，如下

我曾尝试加入而不是子查询。

我也尝试过硬编码的 CTE。

我最后尝试了一个临时表。

这些标准选项都不起作用，我也不愿意 dosp_execute 选项。

唯一的解决方案是：

```
DECLARE @CSV nvarchar(max) = Select STRING_AGG([Value],',') From [Table];

// This yields @CSV = 'A,B,C'

...

WHERE @CSV LIKE CONCAT('%',[Column],'%') 
```

# objective-c - 使用 UIImageView 上的缩放按钮进行缩放

> ID：10883910
> 
> 赞同：1
> 
> 时间：2012-06-04T15:29:45.910
> 
> 标签：objective-c, ios

我在 UIImageView 中有一张地图的平面图像，我的工作是向一些预定义的“热点”添加清晰的按钮，这些“热点”代表地图上感兴趣的位置。然而，考虑到 iPhone 上图像的大小，他们定义的热点非常接近，很难触摸/点击。

有没有办法放大图像，让这些按钮放大，以便更容易按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:33:11.297

是的，在滚动视图中添加图像视图，使用此代码

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIImageView *imageview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourimage"]];
    self.imageView = imageview;
    [imageview release];

    scrollView.contentSize = CGSizeMake(imageView.frame.size.width, imageView.frame.size.height);
    scrollView.maximumZoomScale = 4.0;
    scrollView.minimumZoomScale = 0.75;
    scrollView.clipsToBounds = YES;
    scrollView.delegate = self;
    [scrollView addSubview:imageView];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return imageView;
} 
```

在 .h 文件中，您将拥有

```
@property (nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) UIImageView *imageView; 
```

有关更多信息，请查看 StackOverFlow 以了解如何添加以使用 UIScrollView，例如[将 UIImageViews 添加到 UIScrollView](https://stackoverflow.com/questions/3777364/adding-uiimageviews-to-uiscrollview)

# iphone - 不明白为什么我的带有 GCD 的 tableview 崩溃了

> ID：10883913
> 
> 赞同：0
> 
> 时间：2012-06-04T15:30:14.367
> 
> 标签：iphone, ios, objective-c, uitableview, grand-central-dispatch

我刚刚重写了这篇文章，涵盖了我能想到的每一个可能的角度。我不知道为什么这会崩溃。也许有人可以帮我弄清楚。

这是 cellForRowAtIndexPath 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    JHomeViewCell *cell = (JHomeViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[JHomeViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                    reuseIdentifier:CellIdentifier];
        cell.delegate = self;
    }

    cell.cellContent.cellInfo = [self cellInfoForCellAtIndexPath:indexPath];
    if (cell.cellContent.cellInfo.thumbnailsComplete == YES || cell.cellContent.cellInfo.thumbnailsBeingCreated == YES) {
        [cell.cellContent setNeedsDisplay];
    }
    else {
        [cell.cellContent setup];
    }

    return cell;
} 
```

在 cellContent 中，有这个设置方法：

```
-(void)setup {

    [self setNeedsDisplay];

    self.cellInfo.thumbnailsBeingCreated = YES;

    NSManagedObjectID *entryID = self.cellInfo.objectID;

    dispatch_queue_t cellSetupQueue = dispatch_queue_create("com.Journalized.SetupCell", NULL);
    dispatch_async(cellSetupQueue, ^{
        NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];

        NSPersistentStoreCoordinator *coordinator = [[CoreDataStore mainStore] context].persistentStoreCoordinator;

        [newMoc setPersistentStoreCoordinator:coordinator];
        NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];
        [notify addObserver:self 
                   selector:@selector(mergeChanges:) 
                       name:NSManagedObjectContextDidSaveNotification 
                     object:newMoc];

        Entry *entry = (Entry *)[newMoc objectWithID:entryID];

        [newMoc save:nil];
        int i = 0;

        while (i < self.cellInfo.numberOfThumbnailsToDraw) {
        NSLog(@"number of thumbnails: %i %i %i", self.cellInfo.numberOfThumbnailsToDraw, entry.media.count, i);
            Media *media = [entry.media objectAtIndex:i];
            UIImage *image = [media getThumbnail];

            BOOL success = [newMoc save:nil];

            //NSLog(@"time: %@ success: %i", entry.entryTableInfo.creationTimeString, success);

            [self.cellInfo.thumbnails setObject:image forKey:[NSNumber numberWithInt:i]];
            i++;
        }
        [[NSNotificationCenter defaultCenter] removeObserver:self];

        dispatch_async(dispatch_get_main_queue(), ^{

            self.cellInfo.thumbnailsComplete = YES;

            [self setNeedsDisplay];
        });

    });
    dispatch_release(cellSetupQueue); 
```

它在线崩溃：

```
Media *media = [entry.media objectAtIndex:i]; 
```

出现错误：

```
index 1 beyond bounds [0 .. 0] 
```

上面的NSLog...

```
NSLog(@"number of thumbnails: %i %i %i", self.cellInfo.numberOfThumbnailsToDraw, entry.media.count, i); 
```

给出结果：

```
number of thumbnails: 2 1 1 
```

哪种解释了崩溃，除了在 [cellInfoForCellAtIndexPath:] 中设置的值；方法，像这样：

```
cellInfo.numberOfMediaItems = entry.media.count;
cellInfo.numberOfThumbnailsToDraw = MIN(cellInfo.numberOfMediaItems, 3); 
```

我真的不知道问题出在哪里，或者为什么会发生，但在这部分得到修复之前，我无法继续使用我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:54:25.087

那么 numberOfThumbnailsToDraw 是 2，这意味着 while 循环会执行 0、1，但是您的 entry.media 的计数只有 1，所以它只有一个 0 索引，所以它当然会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:41:13.710

看起来您正在查询 entry.media.count ，其中 entry 是指向一个 MOC 的指针，然后您正在从另一个 MOC 查询它。您要求使用 objectID，这是合理的。

但是，当新 MOC 获取对象时，它不会看到与您在其他 MOC 中看到的相同的值。很可能，这意味着您没有正确保存另一个 MOC。

如果您在新 MOC 上对对象执行 fetch 会发生什么？

另外，我会在命令行选项中启用核心数据调试（-com.apple.CoreData.SQLDebug 1）。这将记录到控制台下面发生的事情。您应该会看到记录到控制台的底层数据库的 SQL 语句。

此外，您正在保存您的 MOC 而不对其进行任何更改，这让我相信您对您的许多 MOC 如何协同工作有点困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:13:56.603

```
[managedObjectContext obtainPermanentIDsForObjects:self.cellInfo error:nil];
[managedObjectContext save:...];
NSManagedObjectID *entryID = self.cellInfo.objectID; 
```

您需要确保 1\. 您有一个永久对象 ID；不是临时的 2\. 对象被持久化，以便它出现在新的 MOC 上。

# ios - 在 Xcode 中添加开发人员

> ID：10883914
> 
> 赞同：0
> 
> 时间：2012-06-04T15:30:21.373
> 
> 标签：ios, xcode, provisioning, beta-testing

假设我有一个在 Github 和多个开发人员上运行的 Xcode 项目。我有一个新的开发人员，他将克隆 git 存储库并开始开发应用程序。我想将他的 iOS 设备添加为可以运行构建的设备，而无需重新颁发证书并在 iOS 开发中心执行所有漫长的过程。我怎样才能做到这一点？我希望他克隆 repo，将他的设备连接到 Xcode 并能够在他的设备上运行该应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:24:23.853

如果他是付费 iOS 开发人员并且没有理由使用特定的配置文件，那么您无需执行任何操作。Xcode 可以在他编译时自动配置他的设备。只需在构建设置中为您的开发构建使用自动配置文件选择。

如果您都使用正确的配置文件（例如测试推送通知）很重要，则无法将他的设备添加到开发人员门户上的配置文件中。另外，您需要让他使用您的开发人员证书和私钥（您必须从开发机器上的 Keychain 导出）像您一样签署二进制文件。

# php - Symfony2 - 使用第三方库（SSRS）

> ID：10883920
> 
> 赞同：4
> 
> 时间：2012-06-04T15:30:47.153
> 
> 标签：php, symfony, reporting-services

也许是愚蠢的问题，我是 Symfony2 的新手，我正在将它用于我的一个项目。
我希望能够使用第三方库，即[SSRSReport](http://ssrsphp.codeplex.com/)（SSRS 报告的 API）。

我已将库放入`Symfony/vendor/ssrs/lib/Ssrs/src`.
这里定义了很多类，我不需要自动加载它们。

我根本不知道如何从控制器要求和调用它们。

肯定这不起作用

```
require_once '/vendor/ssrs/lib/Ssrs/src/SSRSReport.php';
class DefaultController extends Controller
{
    public function viewAction()
    {
        define("UID", "xxxxxxxx");
        define("PASWD", "xxxxxxxx");
        define("SERVICE_URL", "http://xxx.xxx.xxx.xxx/ReportServer/");
        $report = new SSRSReport(new Credentials(UID, PASWD), SERVICE_URL);
        return $this->render('myBundle:Default:view.html.twig'
            , array('report' => $report)
        );
    }
} 
```

`SSRSReport()`在这里`Credentials()`使用的是 API 中包含的许多类中的 2 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:42:32.697

首先，我不建议将非 symfony 管理的库放入`/vendors`. 由于您正在管理此库，请将其放入`/src`.

其次，当使用不是命名空间的类时（即，在根命名空间中），请确保正确引用它们，否则 PHP 将在当前命名空间中查找（在这种情况下，它是您的控制器命名空间）

第三，快速而简单的解决方案是正确地包含来自控制器的文件：

```
class DefaultController extends Controller
{
    protected function includeSsrsSdk()
    {
      require_once(
          $this->container->getParameter( 'kernel.root_dir' )
        . '/../src/ssrs/lib/Ssrs/src/SSRSReport.php'
      );
    }

    public function viewAction()
    {
        $this->includeSsrsSdk();
        define("UID", "xxxxxxxx");
        define("PASWD", "xxxxxxxx");
        define("SERVICE_URL", "http://xxx.xxx.xxx.xxx/ReportServer/");
        $report = new \SSRSReport(new \Credentials(UID, PASWD), SERVICE_URL);
        return $this->render('myBundle:Default:view.html.twig'
            , array('report' => $report)
        );
    }
} 
```

但这会锁定您将库包含到这个控制器中的逻辑。您可以为执行此操作的 SDK 创建一个单独的包装器，甚至将其注册为服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T11:17:11.743

您可能正在使用带有 symfony 的作曲家，所以这是我的建议。

而不是 require_once，您应该使用 composer 的自动加载机制来自动加载非命名空间的库或函数[http://getcomposer.org/doc/04-schema.md#files](http://getcomposer.org/doc/04-schema.md#files)

所以只需更新 composer.json 中的自动加载部分。

```
   “自动加载”：{
        “psr-0”：{“”：“src/”}，
        “文件”：[“src/SsrsReport/SSRSReport.php”]
   },

```

为了使用该服务，我将使用 Facade（扩展 SSRSREport 类）或返回它的 Factory。

# internet-explorer-8 - CSS Sprite 在 FF12 中有效，但在 IE8 中无效

> ID：10883923
> 
> 赞同：1
> 
> 时间：2012-06-04T15:30:50.943
> 
> 标签：internet-explorer-8, css-sprites, firefox-12

这个 HTML 代码...

```
<a href="LINK" class="testclass"></a> 
```

...与此 CCS 代码一起使用...

```
 a.testclass
  {
    background: transparent url(sprite.png) no-repeat -125px -671px;  
    display: block;
    width: 378px;
    height: 150px;
  } 
```

...在 Firefox 12 中，但不在 Internet Explorer 8 中。

该代码的灵感来自这个[关于锚点、精灵和 CSS](https://stackoverflow.com/questions/6043019/using-css-sprites-on-anchor-tags)的问题。我发现了一个[类似的问题](https://stackoverflow.com/questions/560339/css-sprites-dont-work-in-ie8-7-6)，但是由于这段代码被放置在一个相当复杂的 Drupal 安装中，我仍然希望有一种更简单的方法来解决这个问题，而不是通过代码找到一些“绝对定位的外部 div 和一些菜单样式” "，它负责[2](https://stackoverflow.com/questions/560339/css-sprites-dont-work-in-ie8-7-6)中的问题。

谢谢你的帮助。

**编辑-1：**

这是 Firebug HTML 日志：

```
<div id="banner-area">
  <div id="banner-left">
    <div class="region region-banner-left">
      <div>
        <a href="LINK">
          <img width="378" height="150" alt="ALTTEXT" src="IMAGE.GIF">
        </a>
      </div>
    </div>
  </div>
  <div id="banner-right">
    <div class="region region-banner-right">
      <p>
        <a class="testclass" href="LINK"></a>
      </p>
    </div>
  </div>
</div> 
```

引用的 CSS 代码是：

```
#banner-area {
    width:756px;
    margin:0;
    padding:0;
    overflow:hidden;
}

#banner-left {
    width:378px;
    float:left;
    margin:0;
    padding:0;
}

#banner-right {
    width:378px;
    float:right;
    margin:0;
    padding:0;  
} 
```

第一张图片 (IMAGE.GIF) 在 FF 和 IE8 中显示。第二个，我想用精灵替换的那个，只在FF中显示，而不在IE8中显示。

我按照弗洛里安的建议打开和关闭了透明度，但没有效果。我已将图像大小在宽度和高度上减小了 10 像素，但这也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:29:15.377

经过两天的浪费时间，我发现 IE8 导入的 css 文件不超过 31 个：[http ://drupal.org/node/228818?page=1](http://drupal.org/node/228818?page=1)

在我安装的 Drupal 管理面板中再次启用“优化 css 文件”功能后，我已将其关闭，因此它不会干扰我的开发，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:47:10.127

这个问题是相关的： [IE CSS Bug: background-color: transparent behavior different to background-color: (any other colour)](https://stackoverflow.com/questions/3997065/ie-css-bug-background-color-transparent-behaves-differently-to-background-colo)

所以将您的代码更改为：

```
a.testclass
{
  background: url(sprite.png) no-repeat -125px -671px;
  display: block;
  width: 378px;
  height: 150px;
} 
```

如果您确实需要擦除该背景颜色（因此将其设置为透明），请尝试其他设置，例如

```
a.testclass
{
  background-color: transparent;
} 
```

但是，IE8 不喜欢这样，因此请注意为 IE8 包含一些修复程序。

# php - 无法在 Facebook 上将高分发布到玩家的时间线

> ID：10883928
> 
> 赞同：10
> 
> 时间：2012-06-04T15:31:23.527
> 
> 标签：php, facebook, facebook-graph-api

我正在开发一个 PHP 游戏，并希望将玩家高分发布到他们自己的 Facebook 墙/时间线。

我已经设置了一个 Facebook 应用程序，我用来发布分数的 PHP 代码是（由 Facebook 本身提供）：

```
<?php
 require 'facebook-sdk/facebook.php';

 $app_id = MY_APP_ID;
 $app_secret = MY_APP_SECRET;
 $score = 1500;  // this is gonna be passed someway...

 $facebook = new Facebook(array(
   'appId'  => $app_id,
   'secret' => $app_secret,
 ));

 $user = MY_USER_ID;  // to be replaced with a call to $facebook->getUser()

 $app_access_token = get_app_access_token($app_id, $app_secret);
 $facebook->setAccessToken($app_access_token);
 $response = $facebook->api('/' . $user . '/scores', 'post', array(
   'score' => $score,
 ));
 print($response);

 // Helper function to get an APP ACCESS TOKEN
 function get_app_access_token($app_id, $app_secret) {
   $token_url = 'https://graph.facebook.com/oauth/access_token?'
     . 'client_id=' . $app_id
     . '&client_secret=' . $app_secret
     . '&grant_type=client_credentials';

   $token_response =file_get_contents($token_url);
   $params = null;
   parse_str($token_response, $params);
   return  $params['access_token'];
 }
?> 
```

当然有一个我省略的登录和安装部分，要求用户登录并授予应用程序“ `publish_stream`”和“ `publish_actions`”权限。

这很成功，响应变量输出 1。我可以使用 Facebook Graph API Explorer 查看发布的分数，所以我认为一切都运行良好且顺利。

问题是我无法在 Facebook 上的任何地方看到所谓发布的用户故事。阅读文档，在我看来，用户故事必须在保存分数时自动发布。例如，看看[这里](https://developers.facebook.com/blog/post/2012/03/05/games-update--expanding-distribution-for-scores-and-achievements/)或[这里](https://developers.facebook.com/docs/guides/games/getting-started/#step4)。

有没有人已经解决了这个问题？你看到我可能遗漏的东西了吗？你能指出我解决这个问题的正确方向吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:51:33.873

你写

> 阅读文档，在我看来，用户故事必须在保存分数时自动发布。

分数不会自动发布。它们仅在特定条件下发布，即当用户：

*   获得新的高分（“高分故事”）。
*   传递另一个朋友的分数（“传递故事”）。

在您的代码中，您每次都发布分数 1,500。第一次发帖后，再重复发帖测试，发帖成功，但分数不是新高，不会再发。

资料来源：
[Facebook 开发者：游戏教程。](https://developers.facebook.com/docs/guides/games/)
[Facebook 开发者开发者博客：游戏更新：扩大分数和成就的分发范围](https://developers.facebook.com/blog/post/2012/03/05/games-update--expanding-distribution-for-scores-and-achievements/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:29:30.477

试试看这个

[https://github.com/fbsamples/CriticalMass/tree/master/web/criticalmass](https://github.com/fbsamples/CriticalMass/tree/master/web/criticalmass)

希望会有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:18:55.537

您可以通过向具有 publish_stream 权限的 APP_ID/feed（而不是 PROFILE_ID/posts）发出 HTTP POST 请求，在应用程序的配置文件页面上创建帖子。

更多详情：[TechNew.In](http://www.technew.in)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T23:00:07.047

如果您的问题是“当我成功将分数发布到 API 时，它不一定会在动态消息或时间轴上创建故事”，这不是问题 - 这就是分数 API 的工作方式。

分数是一种轻量级的共享选项，并不总是单独显示 - 我很少在 Facebook 上看到“用户获得分数 X”的故事，但经常看到“X 在 Z 中击败 Y 的分数”和“X 获得新的高分” -用户个人资料上还有一个时间轴单元，显示游戏活动的摘要，并在此处显示分数数据。

当用户获得新的高分时，继续向 /[user]/scores 发帖，让 Facebook 负责分发

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:10:33.417

我最近读到 FB 已经停止允许 Api 发布到时间线。它仍然会出现在新闻提要中，但不再出现在他们的墙上。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-14T22:46:46.503

我想我已经为你找到了问题。

[https://developers.facebook.com/docs/opengraphprotocol/#types](https://developers.facebook.com/docs/opengraphprotocol/#types)

见声明：

文章或视频类型的页面没有发布权，并且不会显示在用户的个人资料中，因为它们不是现实世界的对象。

# sql - 创建一个显示来自哪个表格内容的视图

> ID：10883930
> 
> 赞同：1
> 
> 时间：2012-06-04T15:31:41.460
> 
> 标签：sql, postgresql

我必须为学校项目创建的 postgreSQL 视图有一点问题。

我有五个名为：

*   输入（inputId，distributorId，日期）
*   Inputline(InputId, ObjectId, 数量)
*   输出（outputId，clientId，日期）
*   输出线（输出标识，对象标识，数量）
*   库存（ObjectId，数量）

现在我需要一个视图来显示按时间顺序进行的更改（每个 objectId），如下所示：

```
| Date       | type   | ammount In | ammount out |
+------------+--------+------------+-------------+
| 10-10-2007 | Input  | 10         |             |
| 11-10-2007 | Output |            | 5           |
| 12-10-2007 | Input  | 20         |             | 
```

我完全不知道如何做到这一点，所以我非常感谢你的帮助。如果需要更多详细信息，请随时询问 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:37:57.323

视图更多地是来自其他表的数据的组合，而不是新信息。我建议使用新表来显示更改，然后使用[触发器](http://www.postgresql.org/docs/8.1/static/triggers.html)，或者如果您通过存储过程为表插入/更新/等数据，那么只需通过该过程将插入添加到更改表中。触发器放置在您的表上 例如，输出行表上的“插入”触发器在另一个表（更改表）上执行操作（在本例中为插入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:49:42.660

```
select "date", type, "amount in", "amount out"
from (
    select 'output' as "type", "date", amount as "amount out", 0 as "amount in"
    from outputline
    union all
    select 'input' as "type", "date", 0 as "amount out", amount as "amount in"
    from inputline
) s
order by "date" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:24:09.353

```
SELECT o.date, 'Output' AS type, ol.amount AS amount_out, NULL AS amount_in
FROM   outputline ol
JOIN   output     o USING (outputid)

UNION ALL
SELECT i.date, 'Input', NULL, il.amount
FROM   inputline il
JOIN   input     i USING (inputid)
ORDER  BY date, type; 
```

or之后的`ORDER BY`子句适用于整个结果集。`UNION``UNION ALL`

我`type`另外订购以打破与日期的联系，以便输入先于输出。

# git - 将提交的 git 文件移动到另一个目录

> ID：10883931
> 
> 赞同：4
> 
> 时间：2012-06-04T15:31:43.910
> 
> 标签：git, commit, reset

我一直在“dev-test”目录中进行开发工作，并在此过程中提交了文件。我现在需要将这些相同的文件提交到不同命名的目录，并删除“dev-test”目录中提交的文件。我不确定如何保留我的工作文件。

我的“开发测试”存储库是本地的，但我一直在做跟踪为“主”的拉动，但我没有合并我的代码。

我可以在我第一次提交这些文件之前使用 git reset 吗，因为其他开发人员已经合并到“master”中：

```
git reset --soft #commitID 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-04T16:12:24.193

您的问题仍然有点不清楚，但您可能想要其中之一：

1.  如果文件不是对其他文件的修改，只需移动文件

    ```
    $ git mv dev-test/files other-dir
    $ git commit -a 
    ```

2.  如果您的测试文件是对其他文件的修改，您可能希望获得`diff`从开始到现在的工作并将补丁应用到其他目录。

如果您想要的是第二个，实际上您应该从一开始就做不同的事情。如果你想测试一些东西，然后将它应用到 master，你应该创建一个分支，处理它，如果你满意，将 master 合并到你的分支中。如果一切都很好，那么您可以将所有内容合并回 master 并让每个人都知道它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-07T06:20:18.667

要将文件从一个目录移动到另一个目录，您可以使用**git mv**命令。例如，您的 git 存储库中有 2 个目录 **a.draft**，**b.pages**（在我的例子中，gitrepo 是名称）。你想将文件 abc.md 从草稿移动到页面确保你在你的 gitrepo 使用**cd**去你的 gitrepo （你也可以通过**$git status**检查状态）并写：

```
[zuha@localhost gitrepo] $ git mv draft/abc.md pages 
```

它会显示类似

```
[zuha@localhost gitrepo] $ renamed: draft/abc.md -> pages/single-batch-ex.md~ 
```

现在提交你的文件

```
 [zuha@localhost gitrepo] $ git commit -m "first file" 
```

输入您的用户名和密码，然后推送。

```
 [zuha@localhost gitrepo]  $ git push origin (your-branch) 
```

# mysql - 被杀死的进程仍在我的进程列表中

> ID：10883936
> 
> 赞同：17
> 
> 时间：2012-06-04T15:32:16.820
> 
> 标签：mysql

我杀死的线程仍在我的线程列表中如何消除它？

```
+-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+
| Id  | User | Host      | db          | Command | Time  | State     | Info                                                                                                 |
+-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+
| 678 | root | localhost | hthtthv     | Killed  | 36923 | query end | INSERT INTO `gtgttg` VALUES (1,'tgtg'),(2,'Shopping'),(4,'tgtgtg'),(          |
| 695 | root | localhost | NULL        | Query   |     0 | NULL      | show processlist                                                                                     |
+-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-04T15:34:52.177

它需要恢复它所做的操作，因此这可能需要很长时间。如果它是一个 INNODB 数据库，你可以看看这个问题：[https ://dba.stackexchange.com/questions/5654/internal-reason-for-killing-process-taking-up-long-time-in- mysql](https://dba.stackexchange.com/questions/5654/internal-reason-for-killing-process-taking-up-long-time-in-mysql)

所以最后：你需要等待它被淘汰

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-06T13:15:52.940

就我而言，我的 /var 分区已满，其中写入了 MySQL 二进制日志。一旦我释放了一些磁盘空间，被杀死的连接立即消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-16T14:40:41.140

我知道这是一个老问题。我遇到了类似的情况，线程被卡在了被杀死的状态。

我没有强行杀死mysqld，而是发出

```
sudo service stop mysqld 
```

该命令可能因您的操作系统而异，但您需要优雅地要求系统终止守护程序。它将杀死卡住的线程，并且不会对数据库产生副作用，因为它将是正常关闭。

上面的其他建议要求终止该进程，这将导致可能有其自身问题的数据库恢复。所以我建议使用守护进程优雅停止。

希望有帮助。

# codeigniter - Codeigniter URI 路由

> ID：10883938
> 
> 赞同：0
> 
> 时间：2012-06-04T15:32:18.997
> 
> 标签：codeigniter, codeigniter-routing

我已经检查了 codeigniter 用户指南，但我没有幸运地解决我的问题。

我在本地主机上创建了一个网页。

我去的`http://localhost/webpage/`时候就没事了。它将转到默认控制器。

我的默认控制器是`Homepage`并且有名为的方法`index`，`guarantee`并且`about`

当我转到我的 routes.php 时，我添加了这个：

```
$route['guarantee'] = "homepage/guarantee";
$route['about_us'] = "homepage/about"; 
```

然后尝试访问它`http://localhost/webpage/guarantee`并`http://localhost/webpage/about_us`显示 ERROR 404

但是当我这样做时，`$route['default_controller'] = "homepage/guarantee";`将显示保证页面。

谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:14:37.713

在你的`application/config/config.php`, 设置`$config['index_page']`为空的 `$config['index_page'] = '';`应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:15:30.397

您需要删除 index.php。在您的 application/config.php 文件更改

```
$config['index_page'] = 'index.php'; 
```

到

```
$config['index_page'] = ''; 
```

然后将此 .htaccess 文件放在您的根文件夹中（与 index.php 位于同一文件夹中：

```
Options -Indexes
Options +FollowSymLinks

# Set the default file for indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>

    # Activate URL rewriting:
RewriteEngine on

# do not rewrite links to the documentation, assets and public files
RewriteCond $1 !^(uploads|assets|js|css|images|img)

    # but rewrite everything else
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 index.php
</IfModule> 
```

# haskell - unsafeRead 导致堆栈溢出

> ID：10883939
> 
> 赞同：3
> 
> 时间：2012-06-04T15:32:22.147
> 
> 标签：haskell, stack-overflow

[这是一些在ideone](http://ideone.com/QiwTJ)进行边界检查的代码。

它成功运行，没有越界错误。

在[这段](http://ideone.com/iOO1c)代码中，我在第 34 行更改`readArray`为`unsafeRead`，它仍然可以编译，但由于堆栈溢出而崩溃。

这是 GHC 错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T15:54:46.487

`unsafeRead`使用基于 0 的索引，因此您必须调整索引以进行读取，

```
elem <- unsafeRead arr (i-1) 
```

或者，更好的是，分配最小索引为 0 的数组

```
arr <- newArray (0,upperbound) maxBound 
```

照原样`unsafeRead`，从数组中的错误位置读取。

无关：我怀疑 ideone 使用 32 位 GHC，所以最好不要在`upperbound > 100000`那里运行代码。

# c# - 使用 Linq to Xml 的空引用

> ID：10883941
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:32:34.580
> 
> 标签：c#, xml, linq, linq-to-xml

我正在制作国家，州下拉列表。

例如：对于特定国家，我将从下面的 XML 文件中读取该国家的状态是我的代码

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
         string  st = (DropDownList1.SelectedIndex).ToString();

         XDocument main = XDocument.Load((Server.MapPath(@"XMLFile1.xml")));

    var query = from user in main.Descendants("country")
            where st == user.Element("state").Value --//i am getting an error here like object 
            select user;                                reference not set to an instance object

    DropDownList2.DataSource = query;
    DropDownList2.DataBind();   

    } 
```

OP 的 XML（Chuck 评论中提供的链接）：[使用 XML 绑定下拉列表](https://stackoverflow.com/questions/10224655/bind-dropdownlist-using-xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:12:55.547

如果您在 xml 文件中使用命名空间，那么以下内容可能会对您有所帮助：

```
XNamespace ns = "url";// the url is the namespace path for your namespace
var query = from user in main.Descendants("country")
            from state in user.Elements("state")
            where state.Value == "st"
            select user; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:57:15.723

您需要发布您的 XML，但当前的问题是用户没有孩子 `.Element("state")`，因此您正在尝试`null.Value`为该用户引用。

这个 Xml 库可以帮助您：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

使用以下代码，您可以获得所需的项目。

```
string country = "Sri Lanka";
XElement root = XElement.Load(Server.MapPath(@"XMLFile1.xml"));
XElement xcountry = root.XPathElement("//country[.={0}]", country); 
```

或者

```
XElement xcountry = root.Descendants("country")
            .FirstOrDefault(user => user.Value == country); 
```

然后

```
XElement state = (XElement)xcountry.NextNode;
string[] states = state.Elements("text").Select(xtext => xtext.Value).ToArray(); 
```

然后您可能将状态绑定为您的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:14:12.120

根据经验，您最好使用“SelectMany”解决方案来避免检查节点的存在

```
 var query = from user in main.Descendants("country")
            from state in user.Elements("state")
            where state.Value == st
            select user; 
```

如果节点不存在，users.Elements("state") 将为空（非 null），因此用户节点不会包含在 where 子句中

100% 纯 Linq，无需默认值即可工作

编辑：在 Chuck 的回答评论中从 xml 形状中获取新信息，请求可能应该是

```
 var query = from user in main.Descendants("country")
            from state in user.Elements("state")
            from text in state.Elements("text")
            where text.Value == st
            select user; 
```

编辑 2：我的错，xml 没有完全分层......

# codeigniter - CodeIgniter 验证：可以验证 GET 查询字符串吗？

> ID：10883949
> 
> 赞同：7
> 
> 时间：2012-06-04T15:32:57.997
> 
> 标签：codeigniter, codeigniter-2

表单验证库似乎只适用于 POST。我需要使用查询字符串并想使用 CI 来验证传递的值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T16:12:22.080

[当前的 Codeigniter 3.0 开发分支](https://github.com/EllisLab/CodeIgniter)提供了插入您自己的变量而不是 $_POST 的选项。所以你可以开始使用 3.0。

或者，CI2.1 中的唯一方法是在运行验证之前执行 $_POST=$_GET。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-18T12:36:46.360

请参阅此页面了解 CodeIgniter 3 解决方案：- [http://www.codeigniter.com/userguide3/libraries/form_validation.html#validating-an-array-other-than-post](http://www.codeigniter.com/userguide3/libraries/form_validation.html#validating-an-array-other-than-post)

对于 CodeIgniter 2，您可以执行 $_POST = $_GET; 如上所述，在 $this->form_validation->run() 之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:14:44.670

您可以覆盖在 MY_Form_Validation 中运行的 Form_validation 函数并对其进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-21T10:08:52.480

参考[使用 Get 参数时如何验证 Codeigniter 中的表单字段？](https://stackoverflow.com/questions/10524992/how-do-i-validate-a-form-field-in-codeigniter-when-using-get-parameters)

在验证规则之前，使用以下代码设置验证数据。

```
 $this->form_validation->set_data($_GET); 
```

# maven - 使用 Spring Roo 的混合多模块 Maven 项目 - 多个 JPA 持久性单元

> ID：10883952
> 
> 赞同：0
> 
> 时间：2012-06-04T15:33:02.717
> 
> 标签：maven, jpa, spring-roo, multi-module

我正在尝试创建一个混合多模块 maven 项目，其中一些项目由 Spring Roo 管理，而其他项目则是独立的。

到目前为止，这是我的项目结构：

根项目（根 POM）
|
| -- **commons**    （maven 模块、Spring Roo 托管、JPA 持久性模块）
| --**核心**           （maven 模块、Spring Roo 托管、JPA 持久性模块）
| --**后台**（maven 模块、Spring Roo 托管、WebApp）
| -- **frontoffice** (maven module, WebApp)

Maven 依赖:
- Backoffice < Core < Commons
- FrontOffice < Core < Commons

到目前为止，一切都很好。我可以使用 Spring Roo 构建我的工件并管理上述项目。但是，由于我在两个持久性模块中都使用了 spring roo，所以我有两个 jpa 持久性单元。我想将该责任委托给 FrontOffice 或 BackkOffice Web 应用程序，但是，由于持久性模块是使用 Spring Roo 管理的，因此它需要具有 JPA 配置。

当某些模块由 Spring Roo 管理时，您对如何组织多模块 maven 项目有什么建议吗？

感谢您的帮助和建议

此致

JSimas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T01:26:13.330

我知道我没有指出答案，但这实际上可能会有所帮助。

[http://labs.bsb.com/2010/11/configuring-modular-jpa-applications-with-spring/](http://labs.bsb.com/2010/11/configuring-modular-jpa-applications-with-spring/)

# javascript - Javascript：将脚本附加到一个对象，并创建一个本地实例

> ID：10883955
> 
> 赞同：2
> 
> 时间：2012-06-04T15:33:18.107
> 
> 标签：javascript, scope, append, global, local

让我公开我的问题：我有一个主脚本，假设它创建了一个“游戏”对象的实例，根据用户的操作，它会加载许多 javascript 文件之一，我们称它们为“级别”： D 这些文件包含不同的对象，例如，“level1.js”包含 level1 的对象，然后是“level2.js”等。

每次加载关卡脚本（例如 level1.js）时，“game”的实例都会创建对象 level1 的实例并将其存储在局部变量中。

我发现这样做的唯一方法是在所有“级别”脚本的末尾编写一个全局变量，该变量始终具有相同的名称，并且指向当前级别的定义。然后在游戏中，当加载任何关卡脚本时，我使用这个全局变量来创建当前关卡的实例。我想知道是否有办法在不使用全局变量的情况下做到这一点。

这是一个简化的示例：

在 game.js 中：

```
function Game() {
    var levelCurrent = null;
    var scriptCour = document.createElement("script");

    scriptCur.type = "text/javascript";
    scriptCur.onload = function() {
         levelCurrent = new level();
    }
} 
```

并且在每个“级别”脚本（level1.js、level2.js）中：

```
function level1() {
    //definition of the level
    //...
}
level = level1; 
```

或者，类似地：

```
level = function() {
    //definition of the level
    //...
} 
```

我不知道我是否解释得足够好我的问题，但如果有人有答案......谢谢！请注意，游戏实例是使用自执行函数创建的，因此是一个局部变量，例如：

```
(function() {
    var game = new Game();
})(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:41:12.697

而不是将新级别分配给全局变量，您应该使用级别信息调用全局函数，例如

```
window.addLevel(function level1() {
    //definition of the level
    //...
}); 
```

为什么你的 Game 实例是局部变量，不能访问？我猜它是一个单例（只有一个实例），所以将它作为一个全局变量是完全有效的。那么它将是 addLevel 函数 ( `window.game.addLevel()`) 的一个很好的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:36:45.560

您可以让主游戏代码公开一个全局函数，例如“startNewLevel”或其他东西，然后您无需声明全局变量，只需将新关卡本身传递给该函数即可。

# android - 我应该怎么做才能在不扩展 ListActivity 的类中激活 ListView？

> ID：10883961
> 
> 赞同：0
> 
> 时间：2012-06-04T15:33:49.167
> 
> 标签：android, listview

我有[http://developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)教程，我想在另一个课程中做同样的事情。我不想在活动课上这样做！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:39:37.320

//you need to extends the Activity

and in your onCreate() method

you need to get the ListView id

```
ListView myListview=(ListView)findViewbyId(R.id.mylist);
myListview.setAdapter(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:40:23.983

Lunch from an **Activity** your list view after getting reference to your **listview widget** by

```
ListView myListview=(ListView)findViewbyId(R.id.mylist); 
```

in your layout after that bind data to your list view using **Adapter** by calling

```
myListview.setAdapter(); 
```

see this [tutorial](http://www.mikeplate.com/2010/01/21/show-a-context-menu-for-long-clicks-in-an-android-listview/)

![enter image description here](../Images/19906f9448d40b6c57f90d707ddaa6a3.png)

and this [one](http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/) is a custom list view with icon

![enter image description here](../Images/d7e32086c589c508a0a97f5cd2dda0b5.png)

# html - 平尖角或斜角

> ID：10883963
> 
> 赞同：10
> 
> 时间：2012-06-04T15:33:55.710 元素
> 
> 标签：html, css, css-shapes

有没有办法用 CSS 和 HTML 创建一个尖锐的平角？

像这样的东西：

```
 ____
 /    \
 |    |
 \____/ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-04T15:37:45.433

看这里。在那里您可以找到所需的一切：

[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

编辑如果链接丢失：

CSS

```
#octagon { 
  width: 100px; 
  height: 100px; 
  background: red;  
  position: relative; 
} 

#octagon:before { 
  content: ""; 
  position: absolute;  
  top: 0; left: 0; 
  border-bottom: 29px solid red; 
  border-left: 29px solid #eee; 
  border-right: 29px solid #eee; 
  width: 42px; height: 0; 
} 

#octagon:after { 
  content: ""; 
  position: absolute; 
  bottom: 0; 
  left: 0; 
  border-top: 29px solid red; 
  border-left: 29px solid #eee; 
  border-right: 29px solid #eee; 
  width: 42px; 
  height: 0; 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T16:29:52.227

这是我的解决方案，使用来自 Chris Coyier 的 CSS 形状。

[http://jsfiddle.net/dDejan/XSs9L/](http://jsfiddle.net/dDejan/XSs9L/)

通过 JavaScript（实际上是 jQuery）为您希望以这种方式塑造的每个容器插入 4 个额外的 div。这些 div 绝对位于其父级的角落，并且按照 Sven Bieder 发布的链接中的说明对它们进行相应的样式设置

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T15:36:52.473

您可以使用绝对定位`:before`和使用[CSS 三角形](http://css-tricks.com/snippets/css/css-triangle/)技术`:after`的元素来组合它。

```
<div class="box"></div> 
```

CSS：

```
.box {
   background-color:#2020ff;
   height:50px;
   width:50px;
   position:relative   
}

.box:after {
    content:" ";
    width: 0;
    height: 0;
    border-top: 10px solid #ffffff;
    border-bottom: 10px solid transparent;
    border-right:10px solid #ffffff;  
    position:absolute;
    top:-9px;
    right:0px;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-15T15:39:13.423

```
box {
  background-color: transparent;
  position: fixed;
  width: 300px;
  height: 300px;
}
svg {
  width: 300px;
  height: 300px;
}
polygon {
  visibility: visible;
  background: black;
  stroke: white;
}
```

```
<box>
  <svg>
    <polygon points="0 250, 50 300, 300 300, 300 50, 250 0, 0 0" />
  </svg>
</box>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-01T10:27:01.877

这是整个盒子的完整解决方案。它**根据内容大小进行缩放，**就像您对常规 div 所期望的一样。您可以使用 height 和 width 属性**轻松调整**它的大小，而无需修改其他任何内容。它是[这个 codepen](https://codepen.io/Crook/pen/QjOMrv#anon-signup)的修改版本。

```
div {
  padding: 5px;
  margin: 40px auto;
  width: 230px;
  background: rgba(47,51,54,1); /* fallback */
  background:
        -moz-linear-gradient(45deg,  transparent 7px, rgba(47,51,54,1) 7px),
        -moz-linear-gradient(135deg, transparent 7px, rgba(47,51,54,1) 7px),
        -moz-linear-gradient(225deg, transparent 7px, rgba(47,51,54,1) 7px),
        -moz-linear-gradient(315deg, transparent 7px, rgba(47,51,54,1) 7px);
  background:
        -o-linear-gradient(45deg,  transparent 7px, rgba(47,51,54,1) 7px),
        -o-linear-gradient(135deg, transparent 7px, rgba(47,51,54,1) 7px),
        -o-linear-gradient(225deg, transparent 7px, rgba(47,51,54,1) 7px),
        -o-linear-gradient(315deg, transparent 7px, rgba(47,51,54,1) 7px);
  background:
        -webkit-linear-gradient(45deg,  transparent 7px, rgba(47,51,54,1) 7px),
        -webkit-linear-gradient(135deg, transparent 7px, rgba(47,51,54,1) 7px),
        -webkit-linear-gradient(225deg, transparent 7px, rgba(47,51,54,1) 7px),
        -webkit-linear-gradient(315deg, transparent 7px, rgba(47,51,54,1) 7px);
  xbackground:
        linear-gradient(45deg,  transparent 7px, rgba(47,51,54,1) 7px),
        linear-gradient(135deg, transparent 7px, rgba(47,51,54,1) 7px),
        linear-gradient(225deg, transparent 7px, rgba(47,51,54,1) 7px),
        linear-gradient(315deg, transparent 7px, rgba(47,51,54,1) 7px);
}

div {
    background-position: bottom left, bottom right, top right, top left;
    -moz-background-size: 50% 50%;
    -webkit-background-size: 50% 50%;
    background-size: 50% 50%;
    background-repeat: no-repeat;
}

p {
  border-left: none;
  border-right: none;
  color: #ccc;
  margin: 0;
  min-height: 40px;
  padding: 10px;
  position: relative;
}
```

```
<div>
  <p>Here is some content.</p>
</div>
```

[https://codepen.io/c0n5/pen/vYyRPVZ](https://codepen.io/c0n5/pen/vYyRPVZ)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-04-12T05:01:47.473

```
.rotate {
    margin: 100px;
    background-color: olivedrab;
    width: 100px;
    height: 100px;
    transform: rotate(45deg);
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="rotate"></div>
</body>

</html>
```

# java - 隐藏一个 使用检票口和日食标记

> ID：10883968
> 
> 赞同：2
> 
> 时间：2012-06-04T15:34:13.987
> 
> 标签：java, html, wicket

我试图在检票口中隐藏一个标签，只有在以下情况下我才设法做到这一点：

```
HTML
...
<div wicket:id="div_id">This is what hides</div>

JAVA
final WebMarkupContainer wmc = new WebMarkupContainer("div_id");

Method
public onSubmit(){
      wmc.setVisible(false);
} 
```

这设法隐藏了 div，但我的 div 标签内部有另一个检票口组件，所以我似乎无法让它工作，错误弹出说内部组件未在组件“div_id”中定义。

知道如何让它工作吗？

多谢你们！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-03T23:14:13.570

如果您在该 div 中有其他组件，则必须将其他组件添加到您为该 div 拥有的标记容器中，而不是将它们添加到您的页面中。wicket 正在寻找的是 Java 和 HTML 部分的层次结构之间的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:27.223

这只是一个非常疯狂的猜测，因为我不知道您如何添加内部组件以及究竟是什么失败了，但是如果您在 onBeforeRender() 中添加或修改它们并且您使用的是 Wicket 1.4.x，您将需要覆盖 WebmarkupContainer.callOnBeforeRenderIfNotVisible() 以返回 true...

对于 Wicket 1.5，此代码应移至 onConfigure()

# apache-flex - 如何在flex中嵌入html5网页

> ID：10883969
> 
> 赞同：0
> 
> 时间：2012-06-04T15:34:16.240
> 
> 标签：apache-flex, html, embed, webpage

使用 flex mx HTML 组件我们可以在 AIR 上预览网站，但是它似乎不支持 html5 的所有功能（音频、视频）。比如下面的例子：

```
<mx:HTML location="http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_video_bear" width="100%" height="100%"/> 
```

运行应用程序时，视频无法在 AIR 窗口中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:09:31.443

当前在 AIR 中禁用了视频/音频 HTML5 标记。 [这是](http://www.adobe.com/devnet/air/ajax/articles/air_and_webkit.html)有关 AIR 目前支持和不支持的项目的文章。

# c++ - 将数据从 OpenCV 矩阵发送到 Matlab 引擎，C++

> ID：10883976
> 
> 赞同：7
> 
> 时间：2012-06-04T15:34:40.220
> 
> 标签：c++, matlab, opencv, matlab-engine

我正在使用 C++ 和 Matlab 引擎将数据从 OpenCV 矩阵发送到 matlab。我试图从列专业转换为行专业，但我真的很困惑如何做到这一点。我无法理解如何处理 Matlab 指针 mxArray 并将数据放入引擎。

有没有人使用 OpenCV 和 matlab 一起发送矩阵？我没有找到太多信息，我认为这是一个非常有趣的工具。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T15:46:33.600

如果您创建了 matlab 引擎，我有一个可以工作的函数。我所做的是为 matlab 引擎创建一个 SingleTone 模板：

我的标题如下所示：

```
/** Singletone class definition
  * 
  */
class MatlabWrapper
    {
    private:
        static MatlabWrapper *_theInstance; ///< Private instance of the class
        MatlabWrapper(){}           ///< Private Constructor
        static Engine *eng; 

    public:
        static MatlabWrapper *getInstance() ///< Get Instance public method
        {
            if(!_theInstance) _theInstance = new MatlabWrapper(); ///< If instance=NULL, create it

    return _theInstance;            ///< If instance exists, return instance
        }
    public:
    static void openEngine();               ///< Starts matlab engine.
    static void cvLoadMatrixToMatlab(const Mat& m, string name);
    }; 
```

我的cp：

```
#include <iostream>
using namespace std;

MatlabWrapper *MatlabWrapper::_theInstance = NULL;              ///< Initialize instance as NULL    
Engine *MatlabWrapper::eng=NULL;
void MatlabWrapper::openEngine()
{
        if (!(eng = engOpen(NULL))) 
        {
            cerr << "Can't start MATLAB engine" << endl;
            exit(-1);
        }       
}
void MatlabWrapper::cvLoadMatrixToMatlab(const Mat& m, const string name)
{
    int rows=m.rows;
    int cols=m.cols;    
    string text;
    mxArray *T=mxCreateDoubleMatrix(cols, rows, mxREAL);

    memcpy((char*)mxGetPr(T), (char*)m.data, rows*cols*sizeof(double));
    engPutVariable(eng, name.c_str(), T);
    text = name + "=" + name + "'";                    // Column major to row major
    engEvalString(eng, text.c_str());
    mxDestroyArray(T);
} 
```

例如，当您要发送矩阵时

```
Mat A = Mat::zeros(13, 1, CV_32FC1); 
```

就这么简单：

```
MatlabWrapper::getInstance()->cvLoadMatrixToMatlab(A,"A"); 
```

# c# - 另一个类中的 WPF 事件处理程序

> ID：10883983
> 
> 赞同：3
> 
> 时间：2012-06-04T15:35:26.140
> 
> 标签：c#, wpf, events, event-handling

我为一些自定义 WPF 控件构建了一系列事件处理程序。该事件根据包含的数据类型（电话号码、邮政编码、货币价值等）处理用户进入或离开文本框时显示的文本格式

现在，我在本地将所有事件都直接附加到 xaml 的 C# 代码中。因为我开发了一个can控件，这意味着逻辑会重复很多次，如果我想更改程序范围的功能，我必须在事件代码所在的任何地方进行更改。

我确信有一种方法可以将我所有的事件处理程序放在一个类中。谁能帮我指出正确的方向？

我看到了这篇文章：[事件处理程序位于与 MainWindow 不同的类](https://stackoverflow.com/questions/8021590/event-handler-located-in-different-class-than-mainwindow)但我不确定它是否与我正在做的事情直接相关。我宁愿对现有的逻辑进行一些小的更改，因为它可以工作，然后将所有内容重写为命令。

如果可能的话，我基本上想要这样的事情：

```
LostFocus="ExpandedTextBoxEvents.TextBox_LostFocus" 
```

做这样的事情很容易：

```
private void TextBoxCurrencyGotFocus(object sender, RoutedEventArgs e)
{
    ExpandedTextBoxEvents.TextBoxCurrencyGotFocus(sender, e);
}
private void TextBoxCurrencyLostFocus(object sender, RoutedEventArgs e)
{
    ExpandedTextBoxEvents.TextBoxCurrencyLostFocus(sender, e);
} 
```

但这不那么优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:37:26.673

您可以创建一个依赖属性并在 XAML 中使用它，如下所示：

```
ExpandedTextBoxEvents.Subscribe="True" 
```

依赖属性将存在于`ExpandedTextBoxEvents`类中，并且当 Subscribe 属性设置为 时，它可以建立所有必要的事件订阅`True`。

这将为您留下一个单独的类，由 XAML（或 C#，如果您愿意）在一个简单的语句中引入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:09:01.037

[附加属性](http://msdn.microsoft.com/en-us/library/ms749011%28v=vs.110%29.aspx)是您想要的一种方法。我经常使用它们。

附楼盘代码：

```
Public Class TextBoxFormatter

    ' ------------------------------------------------------
    ' Define the FormatType attached property

    Public Shared ReadOnly FormatTypeProperty As DependencyProperty = _
        DependencyProperty.RegisterAttached( _
            name:="FormatType", _
            propertyType:=GetType(TextBoxFormatterType), _
            ownerType:=GetType(TextBoxFormatter), _
            defaultMetadata:=New FrameworkPropertyMetadata( _
                defaultValue:=TextBoxFormatterType.None, _
                PropertyChangedCallback:=New PropertyChangedCallback(AddressOf FormatTypePropertyChanged) _
            ) _
        )
    ' ------------------------------------------------------
    ' Define the "getter" and "setter" for FormatType
    Public Shared Function GetFormatType(ByVal target As DependencyObject) As TextBoxFormatterType
        target.GetValue(FormatTypeProperty)
    End Function
    Public Shared Sub SetFormatType(ByVal target As DependencyObject, ByVal value As TextBoxFormatterType)
        target.SetValue(FormatTypeProperty, value)
    End Sub

    ' ------------------------------------------------------
    ' Define the FormatType "PropertyChanged" event handler

    Private Shared Sub FormatTypePropertyChanged(ByVal target As DependencyObject, ByVal e As DependencyPropertyChangedEventArgs)
        If CType(e.NewValue, TextBoxFormatterType) = TextBoxFormatterType.None Then
            UnregisterFormatTypeControl(target)
        Else
            RegisterFormatTypeControl(target)
        End If
    End Sub

    ' ------------------------------------------------------
    ' Define the a collection of event listerns for the
    ' FormatType "PropertyChanged" event

    Private Shared _registeredFormatTypeControlDelegates As New Dictionary(Of TextBox, RoutedEventHandler)

    ' ------------------------------------------------------
    ' Register a control as an event listener
    ' (also, attach to the control's LostFocus event)

    Private Shared Sub RegisterFormatTypeControl(ByVal candidate As DependencyObject)
        Dim l_control = TryCast(candidate, TextBox)
        If l_control IsNot Nothing Then
            Dim l_handler = New RoutedEventHandler(AddressOf FormatTypeControl_LostFocus)
            _registeredFormatTypeControlDelegates.Add(l_control, l_handler)
            l_control.AddHandler(TextBox.LostFocusEvent, l_handler)
        End If
    End Sub

    ' ------------------------------------------------------
    ' Unregister a control as an event listener
    ' (also, unattach from the control's LostFocus event)

    Private Shared Sub UnregisterFormatTypeControl(ByVal candidate As DependencyObject)
        Dim l_control = TryCast(candidate, TextBox)
        If l_control IsNot Nothing AndAlso _registeredFormatTypeControlDelegates.ContainsKey(l_control) Then
            Dim l_handler = _registeredFormatTypeControlDelegates(l_control)
            l_control.RemoveHandler(TextBox.LostFocusEvent, l_handler)
            _registeredFormatTypeControlDelegates.Remove(l_control)
        End If
    End Sub

    ' ------------------------------------------------------
    ' On the control's LostFocus event, apply the format
    ' (You could apply the format based on another event,
    ' just be careful if using the TextChanged event - it
    ' will fire whether the user has changed the text or
    ' your code has changed the text - could introduce an
    ' infinite loop)

    Private Shared Sub FormatTypeControl_LostFocus(ByVal sender As Object, ByVal e As RoutedEventArgs)
        Dim l_textBox = TryCast(e.Source, TextBox)
        If l_textBox IsNot Nothing Then

            Dim l_formatType = CType(l_textBox.GetValue(FormatTypeProperty), TextBoxFormatterType)
            Select Case l_formatType

                Case TextBoxFormatterType.SocialSecurityNumber
                    ' Apply the format to the l_textBox
                    ' (What do you want a social security number to look like?)

                Case TextBoxFormatterType.ZipCode
                    ' Apply the format to the l_textBox
                    ' (What do you want a zip code to look like?)

                Case TextBoxFormatterType.Etc
                    ' Apply the format to the l_textBox

            End Select

        End If
    End Sub

End Class

Public Enum TextBoxFormatterType
    None
    ZipCode
    SocialSecurityNumber
    Etc
End Enum 
```

上面的代码看起来有点混乱，但是一旦编写了代码（一次），你就可以在你的 UI 中一遍又一遍地使用它：

```
<Window x:Class="Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:this="clr-namespace:WpfApplication1"
        Title="Window1">
  <Grid>

    <StackPanel>

      <TextBox this:TextBoxFormatter.FormatType="SocialSecurityNumber" />
      <TextBox this:TextBoxFormatter.FormatType="ZipCode" />
      <TextBox this:TextBoxFormatter.FormatType="None" />

    </StackPanel>

  </Grid>
</Window> 
```

这种方法的一个优点是“FormatType”成为一个依赖属性，这意味着您可以在运行时将值绑定到它（而不是像上面的示例中那样仅进行编码）。例如：

```
<TextBox this:TextBoxFormatter.FormatType="{Binding ViewModel.DesiredFormat}" /> 
```

# java - Appcelerator中文本值的拆分方法

> ID：10883984
> 
> 赞同：0
> 
> 时间：2012-06-04T15:35:30.203
> 
> 标签：java, text, split, label, appcelerator-mobile

我有一个窗口，可以在标签中显示我的推文。

我的推文来自我的 FB 页面状态，如果我放了一张图片或写了超过 140 个字符，那么我会在推文中获得指向实际帖子的链接。

我想知道是否有任何方法可以拆分标签文本，以便我可以将链接指向要在 webview 中打开的 url

这是我已经走了多远：

```
var win = Ti.UI.currentWindow;

win.showNavBar();

        var  desc = Ti.UI.createLabel({
        text: win.data,
        font:{
            fontSize:'20dp',
        fontWeight:'bold'
    },
    height:'300dp',
    left:'5dp',
    top:'10dp',
    color:'#111',
    touchEnabled:true
    });

  win.add(desc);

        desc.addEventListener('click',function(e){
var v = desc.text;

if(v.indexOf('http') != -1){
    // open new window with webview
    var tubeWindow = Ti.UI.createWindow({ 
    modal: true,
    barColor: '#050505',
    backgroundColor: '#050505' 
}); 
    var linkview = Ti.UI.createWebView({
            url:  e.v,
            barColor: '#050505',
            backgroundColor: '#050505'              
        });
        // Create a button to close the modal window
var close_modal = Titanium.UI.createButton({title:'Stäng'});
tubeWindow.rightNavButton = close_modal;

// Handle close_modal event
close_modal.addEventListener('click', function() {
    tubeWindow.close();
});
 tubeWindow.add(linkview);
tubeWindow.open({
     modalTransitionStyle: Ti.UI.iPhone.MODAL_TRANSITION_STYLE_FLIP_HORIZONTAL,
});

}
});
win.open(); 
```

我被告知我需要拆分 win.data 以获取链接。（win.data 是推文）

现在我只有：url：ev，我需要把链接拿出来

关于如何工作的任何想法？

谢谢

//R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:41:44.493

不久前我做过类似的事情。下拉推文通过正则表达式运行文本以提取 URL。

我所做的是将每条推文放在一个 tableview 行中，如果正则表达式返回任何内容，则将 tableview 行设置为 hasChild=true，然后 onClick 一个 tableView 行，如果 hasChild == true 打开一个具有给定 URL 的 webview（存储在行）。

像这里这样的常规表达式应该可以工作： [http ://www.geekzilla.co.uk/view2D3B0109-C1B2-4B4E-BFFD-E8088CBC85FD.htm](http://www.geekzilla.co.uk/view2D3B0109-C1B2-4B4E-BFFD-E8088CBC85FD.htm)

所以像：

```
str= <<tweet text>>;
re= <<URL expression>>;

check=str.match(re); 
```

现在检查包含 null 或 url。

# python - Windows Live 登录 API SSL 问题 - Python

> ID：10883992
> 
> 赞同：1
> 
> 时间：2012-06-04T15:35:46.530
> 
> 标签：python, api, rest, ssl, windows-live

我正在编写一个程序来邀请多个 Windows Live 联系人进入一个 Web 应用程序，所有这些都在 Django 1.4 中。我遇到以下问题。

我可以使用这段代码通过 Windows Live REST API 使用他的帐户凭据在 Windows Live 中登录用户

```
def hotmail(request):
auth_params = { 
        'client_id': settings.HOTMAIL_KEY,
        'scope': 'wl.basic',
        'response_type': 'code',
        'redirect_uri': 'http://my_testing_comain/hotmail/process'
    }   
auth_url = settings.HOTMAIL_AUTH_URL % urllib.urlencode(auth_params)
return HttpResponseRedirect(auth_url) 
```

然后，我收到一个授权码，我用它换取一个访问令牌（根据 OAuth 协议），这是我用来处理 Windows Live 响应的一段代码：

```
def hotmail_process(request):
if request.method == 'GET':
    parameters = { 
            'code': request.GET['code'],
            'grant_type': 'authorization_code',
            'redirect_uri': 'http://my_testing_url/hotmail/process',
            'client_id': settings.HOTMAIL_KEY,
            'client_secret': settings.HOTMAIL_SECRET,
        }   
    response = urllib2.urlopen(settings.HOTMAIL_AUTH_URL % urllib.urlencode(parameters)).read()
    response = simplejson.loads(response)
    consumer = oauth.Consumer(settings.HOTMAIL_KEY, settings.HOTMAIL_SECRET)
    client = oauth.Client(consumer)
    contacts = client.request(settings.HOTMAIL_USER_FRIENDS_URI % response['access_token'])
    return HttpResponse(simplejson.loads(contacts))
return HttpResponse('Invalid request') 
```

但我收到以下错误：

```
SSLHandshakeError at /hotmail/process/
[Errno 1] _ssl.c:499: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
Request Method: GET
Request URL:    http://my_testing_url/hotmail/process/?code=5330307c-664c-4d5b-27b3-a19a97bc8546
Django Version: 1.4
Exception Type: SSLHandshakeError
Exception Value:    
[Errno 1] _ssl.c:499: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed

and the following traceback:

Environment:

Request Method: GET
Request URL: http://my_testing_url/hotmail/process/?code=5330307c-664c-4d5b-27b3-a19a97bc8546

Django Version: 1.4
Python Version: 2.7.1
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'contacts')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/user/virtenvs/israel/networks/contacts/views.py" in hotmail_process
  26\.         contacts = client.request(settings.HOTMAIL_USER_FRIENDS_URI % response['access_token'])
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/oauth2/__init__.py" in request
  682\.             connection_type=connection_type)
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/httplib2/__init__.py" in request
  1544\.                     (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/httplib2/__init__.py" in _request
  1294\.         (response, content) = self._conn_request(conn, request_uri, method, body, headers)
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/httplib2/__init__.py" in _conn_request
  1230\.                   conn.connect()
File "/home/user/virtenvs/israel/lib/python2.7/site-packages/httplib2/__init__.py" in connect
  1005\.                     raise SSLHandshakeError(e)

Exception Type: SSLHandshakeError at /hotmail/process/
Exception Value: [Errno 1] _ssl.c:499: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

问题是，如果我为此删除执行 client.request() 的行：

```
return HttpResponseRedirect(settings.HOTMAIL_USER_FRIENDS_URI % response['access_token']) 
```

我在浏览器中获取 json 格式的联系人

所以，显然，我的 python oauth2 lib 缺少一些证书（或者这就是我的想法），所以我尝试了这个[Python - SSL Issue with Oauth2](https://stackoverflow.com/questions/9270195/python-ssl-issue-with-oauth2)，但没有结果。在发现它们已被弃用之前，我还尝试了一些库。我也尝试过使用普通的 REST API 调用，但我得到了“禁止”响应。

我的 oauth2 库运行良好，因为我能够使用 GMail 实现相同的功能。

任何帮助或提示将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:47:10.507

为什么不这样做呢？

```
jcts = urlib2.urlopen(settings.HOTMAIL_USER_FRIENDS_URI % response['access_token'])
contacts = simplejson.loads(jcts) 
```

# java - 在 ImageView(?) 中操作照片，然后返回该图片

> ID：10883996
> 
> 赞同：0
> 
> 时间：2012-06-04T15:36:12.707
> 
> 标签：java, android, bitmap, android-imageview

我试图弄清楚如何实现这一点。

在 Touchnote 中，当您开始制作明信片时，您从相机/图库/facebook 中选择一张图片，然后将其显示在 ImageView 中（我认为？），您可以捏缩放和旋转等。

![在此处输入图像描述](../Images/268fb7a0318ad7e2c33f3b4135fe488f.png)

**捏2缩放**
![在此处输入图像描述](../Images/6ad11d59f1e5a52ef126f5e7eab6843f.png)

此外，在用户编辑图片后，我想在另一个图像视图中使用该图像。

那是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:22:55.343

如果你真的希望使用 MOSTLY Native Android APIs 来做到这一点，那么你可以实现 ImageView 和 android 的原生捏到缩放功能。从那里您可以按照我在 StackOverflow 上提供的链接来获取 ImageView 的绘图缓存（本质上是屏幕截图）以放入另一个 imageview

[安卓截图？](https://stackoverflow.com/questions/6436899/android-screenshot)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:05:19.457

好吧，我在 github 上找到了这个库，它可以缩放一些东西：

[https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

我在这里发布这个，所以如果有人有同样的问题，他们可以使用这个。是的，它有点有限，但它的工作原理:)

# c - 使用 Accelerate 框架执行 FFT

> ID：10883997
> 
> 赞同：0
> 
> 时间：2012-06-04T15:36:18.290
> 
> 标签：c

[这个发病检测程序](http://onsetsds.sourceforge.net/)中有几行代码使用了难以合并到 iOS中的[FFTW3 库。](http://www.fftw.org/)我想使用[Accelerate 框架](http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)替换它。

在[onsetdshelpers.h](https://onsetsds.svn.sourceforge.net/svnroot/onsetsds/src/onsetsdshelpers.h)中有一个成员变量：

`fftwf_plan fftplan;`

然后在[onsetdshelpers.c](https://onsetsds.svn.sourceforge.net/svnroot/onsetsds/src/onsetsdshelpers.c)中有几个 malloc 方法：

```
odsbuf->windoweddata = (float*) fftwf_malloc(framesizebytes);  
odsbuf->fftbuf       = (float*) fftwf_malloc(framesizebytes); 
```

实例化的方法`fftplan`

```
odsbuf->fftplan = fftwf_plan_r2r_1d(ods->fftsize, odsbuf->windoweddata, odsbuf->fftbuf, FFTW_R2HC, FFTW_ESTIMATE); 
```

释放内存的方法：

```
void onsetsds_destroy_audiodata(OnsetsDSAudioBuf *odsbuf){
    // take down the FFTW stuff
    fftwf_destroy_plan(odsbuf->fftplan);
    // free mem
    free(odsbuf->data);
    free(odsbuf->window);
    fftwf_free(odsbuf->windoweddata);
    fftwf_free(odsbuf->fftbuf);
} 
```

最后是实际执行 FFT 的方法：

```
fftwf_execute(odsbuf->fftplan); 
```

我对 C 和 FFT 的了解非常有限。任何让我朝着正确方向前进的指示都非常感谢。

# hibernate - 找出 Cache Hibernate 正在使用什么？

> ID：10883998
> 
> 赞同：0
> 
> 时间：2012-06-04T15:36:20.133
> 
> 标签：hibernate, ehcache

是否有任何故障安全方法可以 100% 确定 Hibernate 正在使用什么缓存？即它是否使用EhCache 的其他东西？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:27:51.463

```
String cacheIntegrationName = ( (SessionFactoryImplementor) sessionFactory )
    .getSettings()
    .getRegionFactory()
    .getClass()
    .getName(); 
```

当然，Hibernate 已经记录了“某事”。为记录器启用调试日志`org.hibernate.cfg.SettingsFactory`记录并查找“缓存区域工厂：XYZ”