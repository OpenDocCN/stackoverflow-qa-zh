# StackOverflow 问答 12115000-12115999

# django - django-registration - 重定向到注册表并显示消息

> ID：12115000
> 
> 赞同：1
> 
> 时间：2012-08-24T18:45:22.860
> 
> 标签：django, django-registration, django-1.4

成功注册后，用户被重定向到模板“registration_complete.html”。

有没有办法改变这种行为，将用户重定向到注册页面并显示一条消息？

我想在registration_complete.html中做这样的事情：

```
{% include 'registration/registration_form.html' with message='Your account has been created. Please check your email for activation instructions' %} 
```

但`form`我在模板中使用的变量在此视图中不可用，因此未显示注册表单。此外，我不知道这是否是最好的方法。

编辑：

```
url(r'^register/$', 'registration.views.register',
    {
        'backend': 'trabam.apps.accounts.regbackend.Backend',
        'form_class' : UserRegistrationForm,
        'success_url': '/accounts/register'
    },
    name='registration_register'
), 
```

注册完成后如何在模板中设置消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:08:25.807

您可以指定成功注册后将用户重定向到该 url 的 success_url。

为了显示消息，一个简单的方法是在 success_url 中添加一个 get 参数，但是您必须修改视图以从 request.GET 获取它并放置在您的请求上下文中。

在 urls.py 中：

```
url(r'^register/$', 'registration.views.register',
  {
    'backend': 'trabam.apps.accounts.regbackend.Backend',
    'form_class' : UserRegistrationForm,
    'success_url': '/accounts/register/?on_success=true'
  },
    name='registration_register'
 ), 
```

鉴于：

```
on_success = request.GET.get('on_success', None)
context.update({'on_success': on_success}) 
```

在模板中：

```
{% if on_success %}
    <p>You are successfully registered</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:18:53.363

从您的 urls.py 看来，您将其`success_url`作为`register`视图本身发送。您不能这样做，因为`register`如果您想`message`在成功注册后在上下文中发送 a ，则需要您更改视图。

因此，您需要编写一个额外的视图。假设这个文件是`accounts/views.py`.

```
from registration.forms import RegistrationForm
def registration_complete(request):
    .....
    form = RegistrationForm()
    .....
    message = "You are successfully registered"
    return render_to_response("registration/registration_form.html", {'form': form, 'message': message}) 
```

模板`registration/registration_form.html`与将使用的模板相同`django-registration`。

`accounts/urls.py`

```
url(r'^registration_complete/', 'accounts.views.registration_complete', name='accounts_registration_complete'), 
```

你的 urls.py

```
urlpatterns = patterns('',
    (r'^registration/register/$', 'registration.register', {'backend': 'registration.backends.default.DefaultBackend', 'success_url': 'accounts_registration_complete'}),
    (r'^registration/', include('registration.urls')),) 
```

`registration/registration_form.html`

```
{% if message %}
    {{message}}
{% endif %}
.......
{{form.as_p}} 
```

所以，只有在注册成功后，`success_url`才会使用你的，它会调用`registration_complete`你定义的视图。此视图将`message`在注册模板可以使用的上下文中发送。

# ajax - 使用 Ruby on Rails、jQuery 和 Ajax 拉回基于 onChange 的查询

> ID：12115001
> 
> 赞同：0
> 
> 时间：2012-08-24T18:45:24.340
> 
> 标签：ajax, ruby-on-rails-3, jquery

这是我想做的事情：

1.  基于两个下拉值（:year、:category），检索“select * from tablename where year = :year and category = :category”。
2.  我想通过 $('#lookup_category').change() 而不是表单提交来做到这一点。

这是 jQuery 代码（lookup.js）：

```
$('#lookup_category').change(function(){
     year = $('#lookup_year :selected').text()
     category = $('#lookup_category :selected').text()

     $.ajax({
         type:'POST',
         url:'/lookup/getrows',
         data: 'year, category',    //// I dont know if this is correct
         datatype:  //// dont know what i want here yet, JSON maybe 
     })
}); 
```

这是我在查找控制器中的 getrows 方法：

```
def getrows
  @lookuprows = Lookup.return_lookup_row(params[:year], params[:category])
end 
```

这是我在 Lookup 类中的查询：

```
def self.return_lookup_row
  Lookup.select("year, category, field, serialnumber, active, remarks").where("year =
               ? and category = ?", params[:year], params[:category]) 
end 
```

你能告诉我是否朝着正确的方向前进吗？以及如何将这些查询结果返回到同一页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:56:10.090

您走在正确的道路上，但可以进行一些改进：

1.  确保在触发 AJAX 请求之前提供类别和年份
2.  从您的 javascript 代码中删除 URL '/lookup/rows'，当您更改路由时，硬编码的 URL 会导致问题。
3.  将查找请求实现为 GET 请求

我假设您已经安装了 jquery-rails gem，如果没有，请安装并按照此处的说明进行操作：[https ://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)

现在，Rails UJS（不显眼的 javascript）中有一个漂亮的功能，可以让您创建一种与标签绑定的 javascript。

让我们在表单构建器中修改视图中的几行：

```
<%= f.select :year, ... your previous parameters ..., :'data-remote' => true, :'data-url' => '/lookup/getrows', :'data-type' => 'json' %>
<%= f.select :category, ... your previous parameters ..., :'data-remote' => true, :'data-url' =>  '/lookup/getrows', :'data-type' => 'json' %> 
```

这是什么意思？

data-remote：在 HTML 标记上设置一个标志，应观察选择框以进行更改 data-url：定义查找数据的 URL（如果可能，请尝试使用 url 帮助器，如 lookup_getrows_path 或类似的）数据类型：响应将是什么数据类型

现在到应该响应 JSON 的控制器：

```
def getrows
  @lookuprows = Lookup.return_lookup_row(params[:year], params[:category]).all

  respond_to do |format|
    format.json { render :json => @lookuprows }
  end
end 
```

剩下的是 javascript，结果非常简单：

```
// this handler will be invoked BEFORE the request is sent to the server, we can do checking here
$('#lookup_category, #lookup_year').live('ajax:before', function(evt) {
  var categorySelect = $('#lookup_category');
  var yearSelect = $('#lookup_category');

  // we need both values to send a request
  if(categorySelect.val() && yearSelect.val()) {
    // add parameters
    $(this).data('params', categorySelect.serialize() + '&' + yearSelect.serialize());
  }
  else
  {
    return false;
  }
});

// this handler will be invoked when the request has completed successfully
$('#lookup_category, #lookup_year').live('ajax:success', function(evt, data) {
  // data is now an array containing your objects 
  // you can dump them on firebug or your web browser console using console.log(data); 
}); 
```

# javascript - 使用闭包创建原型中引用的私有属性

> ID：12115004
> 
> 赞同：0
> 
> 时间：2012-08-24T18:45:54.183
> 
> 标签：javascript

我想知道这是否是一种公认​​的创建私有属性的方法，以便在 javascript 中的新类的原型中引用。因此，不必像这样在构造函数中创建方法：

```
function Bar(){ 
  var bar = 'bar';
  this.getbar = function(){
    return bar
  }
} 
```

我想将 getbar 方法放在这样的原型中：

```
var Bar;
(function(){
  var bar = 'bar';
  Bar = function(){};
  Bar.prototype.getbar = function(){
    return bar;
  };
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:53:35.147

它不会对你特别有用。

```
var foo = new Bar();
var foo1 = new Bar();
var foo2 = new Bar(); 
```

每个都将具有***完全相同的值`.getBar()`***

`.prototype`***根本***无法访问私有变量。

您所拥有的实际上更像是静态属性，而不是实例的私有属性。

如果您想这样做，您需要创建一个公共访问器，然后您可以从原型（或代码的任何其他部分，因为它是公共的）调用它。

```
function Wallet (amount) {
    var balance = amount; // this will be unique to each wallet
    this.getBalance = function () { return balance; };
    this.addToBalance = function (amount) { balance += amount; };
    // these ***NEED*** to be in the constructor to have access to balance
}

Wallet.prototype.addFunds = function (amount) { this.addToBalance(amount); };
Wallet.prototype.checkFunds = function () { return this.getBalance(); };

var wallet = new Wallet(371.00);
wallet.addFunds(2.00); 
```

现在您的原型可以访问公共方法，而这些方法本身可以访问私有变量。*...但是当您可以使用实例的公共方法时（无论如何我在原型中正在做的），*
***为什么还要经历那个麻烦，把它放在原型中*** ***？***

 **寓意是，如果一个对象***只有***面向公众的数据，那么请随意将所有方法移至原型。

但是，如果在任何对象中都存在任何私有状态，那么任何应该可以访问该状态的方法都需要在构造函数中，并且任何只使用公共状态的方法（即：调用 with `this`）可以在原型中。**

# less - Symfony 2 开发环境中的资产路径。路径有效，但未应用样式

> ID：12115005
> 
> 赞同：4
> 
> 时间：2012-08-24T18:46:06.710
> 
> 标签：less, symfony-2.1, assetic

我在 Symfony 2 和 MopaBootstrapBundle 中使用较少的资产。

动态生成的 css 文件似乎有效，但未应用样式。如果我们转储资产，那么它确实可以在 prod 中使用，但我不想在 dev 中这样做，因为这与我的想法背道而驰。

**配置.yml**：

```
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ MopaBootstrapBundle ]
    #java: /usr/bin/java
    filters:
        cssrewrite:     ~
        less:
            node:       /usr/local/bin/node
            node_paths: [/usr/local/lib/node_modules]
            # auto apply less to all .less files
            apply_to:   "\.less$" 
```

**config_dev.yml**

```
assetic:
    use_controller: true 
```

在我的模板中是：

```
{% stylesheets
    '@MopaBootstrapBundle/Resources/public/less/mopabootstrapbundle.less'
%}
<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" /> 
```

呈现的html是：

```
 <link href="/app_dev.php/css/bab9907_mopabootstrapbundle_1.css" type="text/css" rel="stylesheet" media="screen" /> 
```

此文件解析，我可以将 URL 粘贴到地址栏中并查看有效的 CSS 文件。

此外，如果我们将资产倾销到产品中，它也可以工作

```
app/console assetic:dump --env=prod 
```

我们清除 prod 缓存并设置输出样式。在开发中，我得到零样式。

我也跑过：

```
app/console assets:install --symlink web
Installing assets using the symlink option
Installing assets for Symfony\Bundle\FrameworkBundle into web/bundles/framework
Installing assets for Mopa\Bundle\BootstrapBundle into web/bundles/mopabootstrap
Installing assets for Symfony\Bundle\WebProfilerBundle into web/bundles/webprofiler
Installing assets for Sensio\Bundle\DistributionBundle into web/bundles/sensiodistribution 
```

所有这些都是同上的 Javascript（当 URL 被跟踪时文件解析）

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T13:43:10.427

我也遇到了这个问题，我也在使用[FosRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)并且配置错误：

```
fos_rest:
    format_listener:
        rules:
            - { path: '^/', priorities: ['json', 'html'], fallback_format: html, prefer_extension: true } 
```

此规则现在适用于对应用程序的每个请求，并且只会知道 json 和 html，并且由于 .css 不匹配它使用 application/json

正确的应该是：

```
fos_rest:
    format_listener:
        rules:
            - { path: '^/api', priorities: ['json', 'html'], fallback_format: html, prefer_extension: true }                
            - { path: '^/', priorities: [ 'html', '*/*'], fallback_format: html, prefer_extension: true } 
```

最后一行适用于尚未匹配的所有内容，它告诉*/*使用内部匹配的内容或类似的智能内容。瞧`use_controller: true`，又开始工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:11:21.593

同样的事情发生在我身上，所以这就是我解决它的方法

我已将 config_dev.yml 中的此资产设置更改为此

```
assetic:
    use_controller: false 
```

删除了开发缓存并且它有效

注意：如果您使用的是 MAMP，请确保遵循此链接中的内容

[MopaBootstrapBundle 少安装](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/doc/less-installation.md#mac-and-mamp-problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T03:15:04.760

您是粘贴带有 app_dev.php 的 URL 还是没有粘贴？如果文件真的解决了，它应该可以工作，而不是 Sf2 问题。您的 webroot 是否指向“web”目录？如果没有，请尝试删除链接 href 中的前导“/”，或将其更改为正确的路径。在开发中，我通常有这样的东西：

```
<link href="http://myapp-static.dev/myapp/web/app_dev.php/css/all.css" media="screen" type="text/css" rel="stylesheet"> 
```

我预先添加了一个“assets_base_url”变量（我在 twig globals 和 parameters.yml 中定义），这就是生成的 URL。如果我改用“/app_dev.php/css/all.css”，它会失败，因为浏览器会将其解释为“http://myapp-static.dev/app_dev.php/css/all.css”

# mysql - MySQL从n个选择中随机m个

> ID：12115012
> 
> 赞同：0
> 
> 时间：2012-08-24T18:46:20.887
> 
> 标签：mysql, sql

假设我有一个学生列表，我想做一个简单的查询，例如：

```
SELECT * FROM STUDENTS WHERE SCHOOLID = 10; 
```

但是，如果第 10 所学校有 20（或 n）名学生，我想在每次运行查询时随机选择 7（或 m）名学生。MySQL中是否有可能的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:51:08.210

采用

```
SELECT * FROM students WHERE schoolid = 10 ORDER BY RAND() LIMIT m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:48:11.317

```
SELECT * FROM STUDENTS WHERE SCHOOLID = 10 ORDER BY RAND() LIMIT 7 
```

请注意`RAND()`对大桌子使用是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:48:24.210

您可以尝试（编辑：哎呀，TOP 是一个 T-SQL 关键字；Oracle/MySQL 使用限制）：

```
SELECT * FROM STUDENTS WHERE SCHOOLID=10 ORDER BY RAND() LIMIT 7 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T18:49:39.247

用于`LIMIT m`仅选择 m 个结果，并`ORDER BY RAND()`随机化您选择的 m 个记录：

```
SELECT * FROM Students
WHERE SchoolID = 10
ORDER BY RAND()
LIMIT 7 
```

# xcode - 为新 Mac 创建新证书

> ID：12115015
> 
> 赞同：2
> 
> 时间：2012-08-24T18:46:33.777
> 
> 标签：xcode, certificate

我正在使用我的开发者帐户使用我的 Mac 开发应用程序。我现在有一台新的 Mac（视网膜！），我必须再次获得证书，因为我没有旧 Mac 的旧 Mac（没有他）。

我遵循了苹果开发网站指南，但是当我尝试上传到 iPhone 时，我收到了代码签名错误。我想那是因为我没有私钥或其他东西。我记得我必须将一些内容上传到该站点然后再次下载，但我在任何地方都找不到该指南。

我只是找不到如何做到这一点的简单步骤。不能。我在这里找到的所有链接都指向了 Apple 糟糕的指南，但并没有多大帮助。

有人可以在这里指导我吗，在新 Mac 上从头开始创建所有内容的确切步骤是什么，以便我可以为 iPhone 编程。

（如果可以的话，也回答这个问题：我不明白 Apple 的私钥/公钥图表。公共用于加密什么？谁发送公共，私人何时打开它？我不明白。 )

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:08:52.143

您必须从旧 Mac 中取出您的私钥。如果你不能这样做，你将不得不生成一个新的私钥，并从 Apple 开始。

此外，您可以前往 Xcode 中的 Organizer 来满足您的证书/配置需求，这些天来要容易得多。

有关私钥生成的信息，请参见[此处。](https://stackoverflow.com/a/5392177/420001)

# ember.js - 如何观察父视图中的属性？

> ID：12115018
> 
> 赞同：1
> 
> 时间：2012-08-24T18:46:37.510
> 
> 标签：ember.js

假设我有以下代码：

```
App.PeopleView = Ember.View.extend
({
    templateName: 'people',

    people: Ember.ArrayController.create(
    {
        sortProperties:     ['lastName'],
        sortAscending:      true,
        contentBinding:     Ember.Binding.oneWay('App.Mapper.person')
    }),

    Sort: Ember.View.extend(
    {
        templateName: 'people/sort',

        isAscending: function()
        {
            alert('Here');

            var rootView = this.nearestWithProperty('people');
            return rootView.get('people').get('sortAscending');
        }
        .property('$root.people.sortAscending')
    })
}); 
```

我希望能够`property()`在`sortAscending`属性上设置，但它属于父视图，我不知道如何引用它。`$root`不起作用，但这是我对它如何工作的猜测。

# c# - 在同一个 ASP 按钮上使用 jQuery 警报和确认弹出窗口？

> ID：12115022
> 
> 赞同：1
> 
> 时间：2012-08-24T18:46:53.937
> 
> 标签：c#, asp.net, jquery-ui

我有一种情况，我需要在同一个 ASP 按钮上同时弹出警报和确认弹出窗口。我需要提醒验证，一旦用户输入所有必要的信息，我需要确认弹出来发送电子邮件或提交另一个条目。

我已经在使用 jQuery 对话框弹出来进行警报和确认，但不知道如何将它们组合在同一个按钮上。

**//我的确认码**

```
<script type="text/javascript">
    jQuery(function() {
        var dlg = jQuery("#dialog").dialog({

            draggable: false,
            autoOpen: false,
            minHeight: 10,
            minwidth: 10,
            zIndex: 99999

        });
        $('#<%=btnStart.ClientID%>').click(function() {
            $('#dialog').dialog('open');
        });
        $(".ui-dialog-titlebar").hide();
        $(".ui-dialog-titlebar-close").hide();
       dlg.parent().appendTo(jQuery("form:first"));
    });
<asp:Button  id="btnStart" runat="server" Text="btnStart"  onclick="btnStart_Click" />
<div id="dialog" style="text-align: center; display: none;font-size:14px;">
    <table>
        <tr>
            <td colspan="2">
                <asp:Label Text="Do you want to exclude these dates?" runat="server" ID="lbl"></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                <asp:Button ID="btnOk" runat="server" Text="Yes" OnClick="btnOK_Click" Style="width: 60px;" />
            </td>
            <td>
                <asp:Button ID="Button1" runat="server" Text="No" OnClick="btnCancel1_Click" Width="60px" />
            </td>
        </tr>
    </table>
</div> 
```

**//我的警报弹出窗口**

```
 $(document).ready(function() {
   $('#<%=btnStart.ClientID%>').click(function() {
        alert("Correct it!");
    });

    }); 
```

这是.net 网络应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:02:18.917

不确定您对使用 jQuery .click 事件的态度如何，但您可以使用 onClientClick 属性直接在按钮上调用多个函数，如下所示：

```
<asp:button runat="server" text="submit" OnClientClick="alert('fn1');alert('fn2');" onclick="ServerSubmitLogicMethod" /> 
```

编辑 1：澄清一下，您可以直接在事件中运行脚本，甚至无需定义匿名函数（在 onclick 事件中隐式创建）你可以这样做：

```
<asp:button runat="server" text="submit" OnClientClick="if(formIsValid()){alert('confirmed!');}" onclick="ServerSubmitLogicMethod" /> 
```

在哪里

```
function formIsValid()
{
//some validation logic ultimately leading to a Boolean return//
return true;
} 
```

也就是说，没有理由不能像现在这样将验证警报与代码中的确认逻辑一起放入 validates() 函数调用中，如下所示：

```
 jQuery(function() {
        var dlg = jQuery("#dialog").dialog({

            draggable: false,
            autoOpen: false,
            minHeight: 10,
            minwidth: 10,
            zIndex: 99999

        });
        $('#<%=btnStart.ClientID%>').click(function() {
            if(validates())
            {           
              $('#dialog').dialog('open');
            }
        });
        $(".ui-dialog-titlebar").hide();
        $(".ui-dialog-titlebar-close").hide();
       dlg.parent().appendTo(jQuery("form:first"));
    });

function validates(){
//...validation logic...//
alert("Correct it!");
return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:51:54.147

如果您使用 jqueryUI 中的 Dialog 插件，您可以使用 close 事件：

从他们的网站：

**关闭事件**

该事件在对话框关闭时触发。

代码示例

提供一个回调函数来处理关闭事件作为初始化选项。

```
$( ".selector" ).dialog({
   close: function(event, ui) { ... }
});
//Bind to the close event by type: dialogclose.
$( ".selector" ).bind( "dialogclose", function(event, ui) {
  ...
}); 
```

这将在弹出窗口关闭后触发。

编辑：你不会在同一个按钮中有这个，但首先你打开一个对话框，然后在关闭这个对话框时调用另一个，所以它作为一个回调函数工作。

# wpf - 在 Microsoft 显示错误消息之前，在 Word 加载项中捕获 C# WPF 未处理的异常

> ID：12115030
> 
> 赞同：3
> 
> 时间：2012-08-24T18:47:20.817
> 
> 标签：wpf, exception-handling, add-in, dispatcher, unhandled-exception

我正在使用 C# 和 WPF 开发 Microsoft Word 插件。

在我的一个窗口中，一个助手类在事件中引发异常。我希望异常冒泡到窗口级别，以便我可以捕获它并向用户显示错误消息。因为它在帮助程序类中的一个事件中，所以我不能只在窗口代码中用一个 try/catch 块来包围一个方法调用来捕获它。

Application.Current 返回 null，因此我无法使用 Application Dispatcher。

我可以使用`Dispatcher.CurrentDispatcher.UnhandledException`并添加一个`DispatcherUnhandledExceptionEventHandler`。这*有效*并且异常被捕获。但是，微软显示

> 您的应用程序中发生未处理的异常

调用我的事件处理程序**之前**的错误消息。

我是在尝试以错误的方式解决此问题，还是有办法抑制 Microsoft 未处理的异常错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:52:48.007

在 Microsoft Word 捕获异常并引发未处理的异常消息之前，使用 UnhandledExceptionFilter 捕获异常。

```
Dispatcher.CurrentDispatcher.UnhandledExceptionFilter += 
  new DispatcherUnhandledExceptionFilterEventHandler(Dispatcher_UnhandledExceptionFilter);

void Dispatcher_UnhandledExceptionFilter(object sender, DispatcherUnhandledExceptionFilterEventArgs e)
{
  e.RequestCatch = false;
  // Display error message or close the window.
} 
```

确保将 RequestCatch 设置为 false，以便 Word 不处理异常。

# ios5 - 如何摆脱 UISlider 左右两边的空隙

> ID：12115031
> 
> 赞同：1
> 
> 时间：2012-08-24T18:47:26.027
> 
> 标签：ios5, uislider

我使用 setMinimumTrackImage 和 setMaximumTrackImage 创建了一个带有自定义图像的 UISlider。在下图中，我将 UISlider 的背景设置为红色，因此您可以看到滑块的左右端仍有一点间隙。

我怎样才能摆脱这些差距？

![自定义uislider](../Images/00bbb53054e5b72e48edbf8bc56137d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:52:25.023

通过继承 UISlider 并覆盖 trackRectForBounds: 方法解决了这个问题。

```
- (CGRect)trackRectForBounds:(CGRect)bounds
{
    CGRect result = [super trackRectForBounds:bounds];
    result.origin.x = 0;
    result.size.width = bounds.size.width;
    return result;
} 
```

# android - 配置更改后恢复片段的对象引用

> ID：12115032
> 
> 赞同：3
> 
> 时间：2012-08-24T18:47:29.193
> 
> 标签：android, android-fragments

我的活动中有一个复杂的数据对象。当用户想要编辑该对象的数据时，会显示一个类似于片段的浮动对话框。该片段引用了数据对象的某些部分。用户从此片段中对该数据进行实时编辑。例如，一些简单的文本编辑。

当用户编辑此数据时，会发生配置更改。（著名的方向更改）。更改后，系统会自动重新创建包括浮动片段在内的所有内容，就像以前一样。

*我不知道为什么，Android应该刚刚重新启动了Activty，为什么要保存并重新加载之后手动创建的东西？但这是另一个问题。*

因此，虽然片段的新克隆又回来了，但它已经失去了与数据对象的“*连接”。*因为那个数据对象也消失了，我们有一个新的，所有用户编辑都丢失了。我想在配置更改之前保存状态并在之后重新获得它。

1.  Activity 如何确定它是由用户启动（应该从头开始）还是由系统在配置上重新创建。改变（应该重新加载保存的状态）？

2.  之后，如何重新建立片段与数据对象的连接，以便用户可以像什么都没发生一样继续编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:27:50.277

对于大多数问题，我找到了一些好方法：

*   传递给片段 using 的参数`setArguments()`似乎被保留了。
*   `Fragment`方法的调用`onAttach()`是有保证的。与父母的数据交换和事件注册在这里。父母可以是`Activity`或其他`Fragment`，因此`Fragment.getParentFragment()`可能需要检查。
*   `AsyncTaskLoader`的被保留并由系统自动重新连接。片段的数据获取/处理代码在这里。
*   使用自定义数据管理器类，片段不包含对数据对象的引用，而是它们的数字 id，就像在数据库中一样。
*   可以使用 Command 对象，而不是直接引用的方法调用。
*   让 Parent Activity 从一个 Fragment 向所有子 Fragment 广播事件，这些子 Fragment 可以充当独立的订阅者。

# jquery - Jquery Masonry 无缝响应图像网格

> ID：12115037
> 
> 赞同：4
> 
> 时间：2012-08-24T18:47:42.573
> 
> 标签：jquery, fullscreen, responsive-design, jquery-masonry

我正在寻找使用 jquery masonry 创建一个无缝（无排水沟）全屏图像网格，其中图像完全响应并且具有不同的宽度。我在那里找到了其他几个起点，但事实证明这对于我的 jquery 知识量来说是相当困难的。

这就是我想要的：http: [//future.thefutureforward.com/~cycles/assets/images/HUB0002_dAutremont_4WEB.jpg](http://future.thefutureforward.com/~cycles/assets/images/HUB0002_dAutremont_4WEB.jpg)

这就是我到目前为止所拥有的：http: [//future.thefutureforward.com/~cycles/archive-test-fluid.html](http://future.thefutureforward.com/~cycles/archive-test-fluid.html)

HTML（只是一部分）：

```
<div id="masonry-container">  
    <div class="box nav-container">
        <div id="bumble-bee-sub"><a href="[[~1]]"><img src="assets/img/bumble_bee.png" alt="Cycles d'Autremont" title="Cycles d'Autremont" /></a></div>
        <ul id="nav-masonry">
            <li><a href="#">Featured</a></li>
            <li><a href="#">Process</a></li>
            <li><a href="#">Archive</a></li>
            <li><a href="#" class="active">Blog</a></li>
        </ul>
    </div>  
    <div class="box">
        <a href="#">
            <img src="assets/images/archive-thumbs/one.jpg" alt="" title="" />
            <span class="bike-name"><span>Bicycle #001</span></span>
        </a>
    </div>
    <div class="box">
        <a href="#">
        <img src="assets/images/archive-thumbs/two.jpg" alt="" title="" /> 
        <span class="bike-name"><span>Bicycle #002</span></span>
        </a>
    </div>
    <div class="box">
        <a href="#">
        <img src="assets/images/archive-thumbs/three.jpg" alt="" title="" />
        <span class="bike-name"><span>Bicycle #003</span></span>
        </a>
    </div>
</div> 
```

每个“盒子”的 CSS：

```
.box{
margin: 0px 0px 0px 0px;
padding: 0px;
float: left;
max-width: 33.3%; /* since we're going for three across... */
}
.box img {
    margin: 0px 0px 0px 0px;
    padding: 0px;
    max-width:100%;
    display:block;
} 
```

这是最繁重的jQuery：

```
jQuery(document).ready(function($) {
        var CollManag = (function() {
            var $ctCollContainer = $('#masonry-container'),
            collCnt = 1,
            init = function() {
                changeColCnt();
                initEvents();
                initPlugins();
            },
            changeColCnt = function() {
                var w_w = $(window).width();
                if( w_w <= 600 ) n = 2;
                else n = 3;
            },
            initEvents = function() {
                $(window).on( 'smartresize.CollManag', function( event ) {
                    changeColCnt();
                });
            },
            initPlugins = function() {
                $ctCollContainer.imagesLoaded( function(){
                    $ctCollContainer.masonry({
                        itemSelector : '.box',
                        columnWidth : function( containerWidth ) {
                            return containerWidth / n;
                        },
                        isAnimated : true,
                        animationOptions: {
                            duration: 300
                        }
                    });
                });
            };
            return { init: init };
        })();
        CollManag.init();
    }); 
```

它已经到了那里，但是在某些宽度上它并没有正确地填补所有的空白，并且较小的屏幕尺寸需要一些工作。如果有人对如何改进这一点有任何提示或想法，那将是惊人的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:15:01.283

同位素布局中可能会出现空洞，因为同位素项目在 DOM 中以特定顺序（自上而下）出现，并且 - 如果项目跨越两列或三列，或者如果项目不符合列宽 - 因此想要调整浏览器大小时，以原始顺序重新排列。当浏览器窗口被充分调整大小时，可以在[**此处**](http://isotope.metafizzy.co/demos/relayout.html)或[**此处（使用 jsfiddle）**](https://stackoverflow.com/a/11701171/963514)看到这一点 - 即使如此严格的一致性也可能导致某些浏览器大小的空白。洗牌可能会导致最佳拟合，但不一定如此。

可以使用排序来排序项目；为此，它们必须符合一项的宽度和高度倍数（应用适当的边距）。使用 Isotope，您拥有 Masonry 以及更多功能，同时它同样易于实施。最好的办法是考虑布局应该为观众做什么，也许首先在纸上，然后模拟一个未设计的沙箱，同时牢记模块化问题。

**更新**如果你用谷歌浏览器的开发工具检查你的沙箱，你会看到

1.  您的导航容器没有设置大小；它的大小 x=426/y=469px 仅取决于其内容；你应该在 CSS 中设置一个与你的其他项目的尺寸方案一致的尺寸，如果你看起来最小的公约数，那就是 x=240px (240(1), 480(2), 720(3)/y=120px (240(2)、360(3)、720(6))。

2.  就像我上面提到的，你有跨越多列和多行的元素；因此，在某些浏览器窗口大小下，空白将是不可避免的。如果您最后选择黑色作为#isotope-container 背景，这将不太明显，因为黑色是您的自行车图像背景颜色。

3.  不知道#twenty-seventh-letter 是如何干扰的，但请参阅[更改后的 jsfiddle](http://jsfiddle.net/9T2ab/) 如何在 Isotope 触发布局之前在右侧实现一点出血。但是，由于布局（砌体，同位素），这是这里的全部目的，你不能在所有尺寸上都流血 - 为此，你还需要对具有流体宽度的框进行编码，这可以通过一些额外的努力来完成.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:32:33.767

流体/响应式布局、不同宽度的盒子和同位素/砌体的问题似乎是一个错误。如果您的项目宽度等于浏览器窗口的整个宽度，但为十进制像素值，则存在问题。

我最终做的是将三个可变宽度列分别设置为 19.5%、39.5% 和 59.5%。这解决了我之前遇到的随机间隙问题（尽管它确实引入了我不太感兴趣的排水沟）。

它在这里运行： [http ://cyclesdautremont.com/blog/](http://cyclesdautremont.com/blog/)

有关此错误的更多信息（希望有一天能修复），请查看专门针对它的同位素 github 问题： [https ://github.com/desandro/isotope/issues/222](https://github.com/desandro/isotope/issues/222)

# c# - 为什么我的 XBOX 360 ADK 参考应用程序项目的 VS 2010 中的监视值格式奇怪（文本/html/xml 可视化工具不会出现）

> ID：12115040
> 
> 赞同：0
> 
> 时间：2012-08-24T18:48:00.310
> 
> 标签：c#, visual-studio-2010, xbox360, xbox

在尝试在 Xbox 360 ADK 参考应用程序上使用 Visual Studio 2010 调试器时，我注意到调试输出中的监视值的格式很奇怪。

一旦我获得足够的声望点（新用户），我将发布截图。

“值”字段应该是一个字符串，但它以“0x004df938”开头。因此，我无法使用任何可视化工具。

注意：我没有启用“十六进制显示”。

我做了很多搜索，只发现了一个与我所遇到的问题接近的问题：

[http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/ac20a4d8-8519-4daa-a8b4-efe88d9fda24](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/ac20a4d8-8519-4daa-a8b4-efe88d9fda24)

（上面链接中包含的屏幕截图反映了我最终看到的内容）

提出问题的人将他们的目标平台（在项目配置管理器中）从 Any CPU 更改为 x86，但我无法做到这一点（以下 UI 中没有可用的 x86 选项）：

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:34:52.623

机器上安装的 ADK 和 XDK 版本不匹配。该系统有 XDK 的 7 月版本和 ADK 的 4 月版本。一旦我卸载了 4 月版本并安装了 7 月版本（2012 年 7 月 QFE ADK），我的问题就解决了。

# java - 如何从 finally 子句中抛出 catch 子句中捕获的异常？

> ID：12115044
> 
> 赞同：2
> 
> 时间：2012-08-24T18:48:21.513
> 
> 标签：java, exception, try-catch-finally

是否可以**不使用额外的变量**来找出在 catch 子句中捕获的异常，然后从 finally 子句中再次抛出它？

```
public void exceptionalFunction() throws Exception
 {
    try
     {
         // exception causing code
     }
    catch (TypeAException e)
     {
        // exception specific logic
     }
    catch (TypeBException e)
     {
         // exception specific logic        
     }
    catch (TypeCException e)
     {
        // exception specific logic        
     }
    finally
     {
         // throw the exception that was caught, if one was caught. 
     }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:51:19.690

并非不使用附加变量。如果不使用附加变量，您只能在异常特定逻辑之后再次抛出异常：

```
catch (TypeAException e)
{
    // exception specific logic 
    throw e;       
}
catch (TypeBException e)
{
    // exception specific logic 
    throw e;       
}
catch (TypeCException e)
{
    // exception specific logic 
    throw e;       
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:09:37.090

您无法在 finally 子句中捕获它们。catch 和 finally 的范围是分开的。但是由于您不想编写多个异常处理代码，我建议您使用 Java 7 中引入的功能。

```
....
....
catch (Exception1|Exception2|Exception2 e){
    //determine type and handle accordingly
} 
```

如果您使用的是 java6 或更早版本，则节省编码工作的唯一方法是通过方法处理它们。

```
....
....
catch(Exception1 e){
    handle(e);
}
catch(Exception2 e){
    handle(e);
} 
```

然后您可以使用 instanceof 来确定异常的类型并执行您的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:11:16.090

我必须同意tibtof。

在 finally 块中重新抛出异常而不是在每个 catch 块的实现逻辑之后执行它是没有意义的——这样做你什么也得不到。所以他是正确的解决方案。

一般来说，最好以这种方式进行，因为您可以通过每次声明更具体的异常并将这些异常传递回调用堆栈来扩展它 - 通过创建自己的自定义异常类型并执行以下操作：

```
catch (TypeAException e) 
{ 
    // exception specific logic  
    throw new myCustomException("Custom message " + e.getMessage);      
} 
```

每一次。

希望有帮助。

# exception - 在 GNU Octave 中，如何捕获异常

> ID：12115046
> 
> 赞同：4
> 
> 时间：2012-08-24T18:48:27.307
> 
> 标签：exception, exception-handling, try-catch, octave

在 GNU Octave 中捕获异常的正确语法是什么？如果没有文件存在，我有一行失败：

```
mymatrix = load("input.txt"); 
```

如果 input.txt 中有一些不好的行，八度音阶会出现这种情况：

```
error: load: unable to extract matrix size from file `input.txt'
error: called from:
error: /home/el/loadData.m at line 93, column 20
error: main at line 37, column 86
error: /home/el/main.m at line 132, column 5 
```

我想在 Octave 中使用 try/catch 块，正确的语法是什么？

我希望能够干净、准确地向用户报告输入文件有问题（丢失、配置错误的列、太多列、错误字符等）并恢复。不只是吐出神秘的错误并停止。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:59:16.130

首先，阅读[有关 Octave try/catch 的官方文档](https://www.gnu.org/software/octave/doc/interpreter/The-try-Statement.html)

和[一般异常处理](http://www.gnu.org/software/octave/doc/interpreter/Exception-and-Error-Handling-in-Oct_002dFiles.html)

**以下是在 GNU Octave 中捕获异常的正确语法：**

```
%make sure foobar.txt does not exist.
%Put this code in mytest.m.

try
  mymatrix = load("foobar.txt");   %this line throws an exception because 
                                   %foobar does not exist.
catch
  printf ("Unable to load file: %s\n", lasterr)
end

disp(mymatrix)  %The program will reach this line when the load command
%fails due to missing input file.  The octave catch block eats the 
%exception and ignores it. 
```

当您运行上述代码时，将打印：

```
Unable to load file: load: unable to find file foobar.txt 
```

然后从加载文件抛出的异常被忽略，因为在 try 块中没有定义 disp(mymatrix)，一个额外的异常停止了程序，因为 mymatrix 没有定义。

# visual-studio-2010 - VS 2010 安装项目，属性 | 先决条件不显示 VC++ 运行时 x64 库

> ID：12115049
> 
> 赞同：1
> 
> 时间：2012-08-24T18:48:51.610
> 
> 标签：visual-studio-2010, 64-bit, visual-c++-2010, prerequisites

Visual Studio 2010 Professional，目标框架/平台：.Net 4/x64

我为我的应用程序构建了一个安装项目，当打开它的属性和先决条件时，我没有看到“Visual C++ 2010 Runtime Libraries (x64)”列出。但是，x86 版本在先决条件*中*列出。vcredist_x86 和 vcredist_x64 目录均已确认存在于：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages 
```

我已经在两台不同的开发机器上确认了这一点，并且具有设置项目的不同解决方案。

4.0 in 的 GenericBootstrapper 路径

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\GenericBootstrapper\4.0 
```

已确认指向正确的目录。

当查看包的注册表项时

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\Folders 
```

我注意到存在 x86 可再发行组件的路径

```
 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\vcredist_x86\
   C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\vcredist_x86\en\ 
```

但 x64 包的路径*不*存在。我将两个 x64 路径作为字符串值添加到文件夹目录中（我之前在构建新包时已成功完成此操作，以便让新包出现在先决条件列表中），但仍然没有运气。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:37:18.670

我没有找到解决已安装 vcredist_x64 软件包问题的方法，但确实找到了解决方法。

1) 在

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\ 
```

**将vcredist_x64**目录复制到 Packages 目录中的新名称（我将其重命名为“custom_vcredist_x64”）。

2) 在 RegEdit 中，转到

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\Folders 
```

3) 在文件夹中，删除原始安装包的路径字符串（如果存在）：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\vcredist_x64\
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\vcredist_x64\en\ 
```

4) 现在将两个新路径作为字符串值添加到文件夹目录：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\custom_vcredist_x64\
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\custom_vcredist_x64\en\ 
```

5) 关闭注册表编辑器后，“Visual C++ 2010 Runtime Libraries (x64)”将在 Prerequisites 中可用。

# android - Android：从未选择 GPS 提供商。只有网络提供商存在

> ID：12115050
> 
> 赞同：1
> 
> 时间：2012-08-24T18:48:52.873
> 
> 标签：android, networking, gps, provider

我正在尝试让我的应用选择 GPS 提供商。方法 getBestProvider() 产生网络提供者，方法 getAllProviders() 也产生三个网络提供者。奇怪的是，在我的三星 GTS5360 设备中启用了 GPS，isProviderEnabled(LocationManager.GPS_PROVIDER) 调用也证明了这一点。我使用的是安卓 2.3.6。

我的清单文件具有两种权限（ACCESS_FINE_LOCATION 和 ACCESS_COARSE_LOCATION）。我还实现了一个 GpsStatus 侦听器，我将它添加到我的 locationManager 对象中以侦听 GPS_EVENT_SATELLITE_STATUS 事件，但到目前为止还没有发生任何事情。

当我运行其他嵌入式 GPS 应用程序时，GPS 工作。我坐在阳台上，天空晴朗。

任何关于可能发生的事情的建议都非常受欢迎。如有必要，我可以发布我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:42:23.417

CommonsWare 为我的问题提供了解决方案。通过设置正确的标准 ACCURACY_FINE 和 POWER_LOW，GPS 提供商成为首选提供商。向 CommonsWare 致敬！

# java - 用 Java 管理我的图像

> ID：12115052
> 
> 赞同：5
> 
> 时间：2012-08-24T18:49:02.173
> 
> 标签：java, image, swing, resources

我正在构建一个 Java Swing gui，我想知道管理所有图像的最佳方法是什么。到目前为止，我只是在需要时通过指出每个类的路径来创建来自不同类的图像，例如：

```
ImageIcon temp= new ImageIcon("resources/pictures/temp.png"); 
```

有两件事我不喜欢。首先是拥有所有这些路径。其次是我更喜欢“中央存储库”的方法。有没有人有更好的做法可以建议，我在想可能像 ImageManager 这样的东西，它在程序的一开始就加载所有图像。属性文件可以以某种方式（从未使用过它们）帮助所有这些路径吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:52:36.557

属性可用于定义一些键=值，其中键是唯一键，值是图像的路径。然后，正如您所建议的，您可以使用 ImageManager 来定义获取键作为参数的方法，并返回对 ImageIcon 或任何图像类型的引用。

# python - 使用哪个：OneToOne vs ForeignKey？

> ID：12115073
> 
> 赞同：7
> 
> 时间：2012-08-24T18:51:11.933
> 
> 标签：python, django

我的理解是 OneToOneField 仅用于***Table2***（最喜欢的水果）中的 1 行数据链接到*Table1*（人名）中的一行数据，ForeignKey 用于***Table2***（汽车模型）中的多行数据到 1 行***表 1***中的数据（品牌/制造商）。

我的问题是，如果我有多个表，但每个表中只有一行数据链接回***Table1*** ，我应该使用什么。例如：我有表1为“汽车”，我的其他表是“保险信息”、“汽车信息”、“维修历史”。我应该使用 ForeignKey 还是 OneToOne？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T19:08:10.027

你只需要问自己“对象 A 可以有很多对象 B，或者对象 B 有很多对象 A”吗？

这些表关系每个都可能不同：

1.  一辆车可以有一份或多份保险单，而一份保险单只适用于一辆车。如果汽车只能有一个，那么它可能是一对一的。
2.  一辆汽车可以有许多维修历史行，所以这将是维修历史上的一个外键，与汽车作为一个集合具有反向关系。
3.  Car Info 类似于 django 中的 UserProfile 概念。如果它是真正独特的信息，那么它也是一对一的。但是，如果您将 Car Info 定义为可以应用于类似 Car 模型的一般描述，那么引用 Car Info 将是 Car Table 上的外键

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:06:48.913

ForeignKey 表示您正在引用另一个表中存在的元素。OneToOne 是一种 ForeignKey，其中 table1 和 table2 的元素唯一绑定在一起。

您最喜欢的水果示例是 OneToMany。因为每个人都有一个独特的最喜欢的水果，但每个水果可以有多个人将该特定水果列为他们的最爱。

OneToOne 关系可以通过您的 Car 示例完成。Cars.VIN 可以与 CarInfo.VIN 建立 OneToOne 关系，因为一辆车只会有一个 CarInfo 与之关联（反之亦然）。

# spring - 无法以速度创建地图

> ID：12115086
> 
> 赞同：0
> 
> 时间：2012-08-24T18:52:26.150
> 
> 标签：spring, spring-mvc, velocity

在我的速度模板中，我正在创建这样的地图：

```
#set($mymap.Map={"key":"value","key2":"value2"}) 
```

我认为它必须根据速度的文档工作，但是有下一个错误：

```
HTTP Status 500 - Could not load Velocity template for URL [editEmployee.vsl]; nested exception is org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 44, column 36\. Encountered: "{" (123), after : ""

type Exception report

message Could not load Velocity template for URL [editEmployee.vsl]; nested exception is org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 44, column 36\. Encountered: "{" (123), after : ""

description The server encountered an internal error (Could not load Velocity template for URL [editEmployee.vsl]; nested exception is org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 44, column 36\. Encountered: "{" (123), after : "") that prevented it from fulfilling this request.

exception

org.springframework.core.NestedIOException: Could not load Velocity template for URL [editEmployee.vsl]; nested exception is org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 44, column 36\.  Encountered: "{" (123), after : ""
    org.springframework.web.servlet.view.velocity.VelocityView.checkResource(VelocityView.java:270)
    org.springframework.web.servlet.view.UrlBasedViewResolver.loadView(UrlBasedViewResolver.java:421)
    org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:158)
    org.springframework.web.servlet.view.UrlBasedViewResolver.createView(UrlBasedViewResolver.java:384)
    org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:77)
    org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1078)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1027)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

root cause

org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 44, column 36\.  Encountered: "{" (123), after : ""
    org.apache.velocity.Template.process(Template.java:141)
    org.apache.velocity.runtime.resource.ResourceManagerImpl.loadResource(ResourceManagerImpl.java:423)
    org.apache.velocity.runtime.resource.ResourceManagerImpl.getResource(ResourceManagerImpl.java:341)
    org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:831)
    org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:813)
    org.apache.velocity.app.VelocityEngine.getTemplate(VelocityEngine.java:470)
    org.springframework.web.servlet.view.velocity.VelocityView.getTemplate(VelocityView.java:501)
    org.springframework.web.servlet.view.velocity.VelocityView.checkResource(VelocityView.java:260)
    org.springframework.web.servlet.view.UrlBasedViewResolver.loadView(UrlBasedViewResolver.java:421)
    org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:158)
    org.springframework.web.servlet.view.UrlBasedViewResolver.createView(UrlBasedViewResolver.java:384)
    org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:77)
    org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1078)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1027)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

我的 pom 有速度：

```
<dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.6.2</version>
        </dependency>   
        <dependency>
            <groupId>velocity-tools</groupId>
            <artifactId>velocity-tools</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>velocity-tools</groupId>
            <artifactId>velocity-tools-generic</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.1</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T01:43:54.420

这应该在 Velocity 中工作。我在 1.7 和 1.6.2 中都尝试了以下简单的代码段，它打印了正确的响应：

```
#set ($mymap = {})
#set ($mymap.Map={"key":"value","key2":"value2"})
$mymap 
```

印刷：

```
{Map={key=value, key2=value2}} 
```

因此，请确保错误确实在这里：

1.  建议的错误位置（第 44 行，第 36 列）是否与您引用的行匹配？
2.  如果您注释掉该行，错误是否仍然存在？
3.  Spring 中的另一个组件是否对模板进行了预处理，以便最终 Velocity 看到的东西与您认为的不同？
    *   如果您用更多的空格重新格式化代码，错误是否仍然存在？
4.  如果您使用这种替代语法，错误是否仍然存在？

```
#set($discard = $mymap.put('Map', {'key':'value','key2':'value2'})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T13:38:14.520

尝试

```
#set($mymap={"key":"value","key2":"value2"})     
$mymap 
```

# algorithm - 八度：逻辑回归：fmincg 和 fminunc 之间的差异

> ID：12115087
> 
> 赞同：54
> 
> 时间：2012-08-24T18:52:28.427
> 
> 标签：algorithm, machine-learning, neural-network, octave

我经常`fminunc`用于逻辑回归问题。我在网上读到[Andrew Ng](http://en.wikipedia.org/wiki/Andrew_Ng)用相同的论点`fmincg`代替, 。`fminunc`结果是不同的，通常`fmincg`更准确，但不会太多。（我将 fmincg 函数 fminunc 的结果与相同的数据进行比较）

所以，我的问题是：这两个功能有什么区别？每个函数都实现了什么算法？（现在，我只是使用这些函数而不知道它们是如何工作的）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-24T20:47:11.400

您将不得不查看代码的内部，`fmincg`因为它不是 Octave 的一部分。经过一番搜索，我发现它是 Coursera 机器学习类提供的一个函数文件，作为作业的一部分。[阅读有关此问题](https://stackoverflow.com/questions/10770934/matlabs-fminsearch-different-from-octaves-fmincg)的评论和答案，以讨论算法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-08-23T20:20:39.020

与此处暗示 fmincg 和 fminunc 之间的主要区别是准确性或速度的其他答案相反，对于某些应用程序而言，最重要的区别可能是内存效率。在 Coursera 吴恩达的机器学习课程的编程练习 4（即神经网络训练）中，ex4.m 中关于 fmincg 的评论是

> %% =================== 第 8 部分：训练 NN ===================
> % 你现在已经实现了训练神经
> 网络所需的所有代码。为了训练你的神经网络，我们现在将使用“fmincg”，它
> 是一个类似于“fminunc”的函数。 回想一下，只要我们为它们提供梯度计算 ，这些
> 高级优化器就能够有效地训练我们的成本函数。

像原始海报一样，我也很好奇 ex4.m 的结果使用 fminunc 而不是 fmincg 可能会有什么不同。所以我尝试替换 fmincg 调用

```
options = optimset('MaxIter', 50);
[nn_params, cost] = fmincg(costFunction, initial_nn_params, options); 
```

通过以下对 fminunc 的调用

```
options = optimset('GradObj', 'on', 'MaxIter', 50);
[nn_params, cost, exit_flag] = fminunc(costFunction, initial_nn_params, options); 
```

但从在 Windows 上运行的 32 位 Octave 构建中收到以下错误消息：

> 错误：内存已用完或请求的大小对于 Octave 的索引类型范围来说太大——试图返回提示

在 Windows 上运行的 32 位版本的 MATLAB 提供了更详细的错误消息：

> 使用查找内存不足时出错。键入 HELP MEMORY 作为您的选项。
> Spones 错误（第 14 行）
> [i,j] = find(S);
> 颜色错误（第 26 行）
> J = spones(J)；
> sfminbx 中的错误（第 155 行）
> 组 = 颜色（Hstr，p）；
> fminunc 中的错误（第 408 行）
> [x,FVAL,~,EXITFLAG,OUTPUT,GRAD,HESSIAN] = sfminbx(funfcn,x,l,u, ...
> ex4 中的错误（第 205 行）
> [nn_params, cost, exit_flag] = fminunc（成本函数，initial_nn_params，选项）；

我笔记本电脑上的 MATLAB memory 命令报告：

> 最大可能数组：2046 MB（2.146e+09 字节）*
> 可用于所有数组的内存：3402 MB（3.568e+09 字节）**
> MATLAB 使用的内存：373 MB（3.910e+08 字节）
> 物理内存 (RAM) : 3561 MB (3.734e+09 bytes)
> * 受限于可用的连续虚拟地址空间。
> ** 受限于可用的虚拟地址空间。

之前我在想 Ng 教授选择使用 fmincg 来训练 ex4.m 神经网络（有 400 个输入特征，401 包括偏置输入）来提高训练速度。然而，现在我相信他使用 fmincg 的原因是为了提高内存效率，足以允许在 Octave/MATLAB 的 32 位构建上执行训练。关于获得在 Windows 操作系统上运行的 64 位 Octave 构建的必要工作的简短讨论在[这里。](http://octave.1599824.n4.nabble.com/error-memory-exhausted-or-requested-size-too-large-for-range-of-Octave-s-index-type-trying-to-returnt-td4646032.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-23T22:36:29.427

根据 Andrew Ng 本人的说法，`fmincg`它不是用来获得更准确的结果（请记住，您的成本函数在任何一种情况下都是相同的，并且您的假设不会更简单或更复杂），而是因为它在对特别复杂的情况下进行梯度下降时更有效假设。他自己似乎使用`fminunc`了假设很少有特征但`fmincg`有数百个特征的地方。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-28T14:04:14.440

> 为什么 fmincg 有效？

这是源代码的副本，其中包含解释所使用的各种算法的注释。这真是太棒了，就像孩子的大脑在学习区分狗和椅子时所做的一样。

这是 fmincg.m 的 Octave 源代码。

```
function [X, fX, i] = fmincg(f, X, options, P1, P2, P3, P4, P5)
% Minimize a continuous differentialble multivariate function. Starting point
% is given by "X" (D by 1), and the function named in the string "f", must
% return a function value and a vector of partial derivatives. The Polack-
% Ribiere flavour of conjugate gradients is used to compute search directions,
% and a line search using quadratic and cubic polynomial approximations and the
% Wolfe-Powell stopping criteria is used together with the slope ratio method
% for guessing initial step sizes. Additionally a bunch of checks are made to
% make sure that exploration is taking place and that extrapolation will not
% be unboundedly large. The "length" gives the length of the run: if it is
% positive, it gives the maximum number of line searches, if negative its
% absolute gives the maximum allowed number of function evaluations. You can
% (optionally) give "length" a second component, which will indicate the
% reduction in function value to be expected in the first line-search (defaults
% to 1.0). The function returns when either its length is up, or if no further
% progress can be made (ie, we are at a minimum, or so close that due to
% numerical problems, we cannot get any closer). If the function terminates
% within a few iterations, it could be an indication that the function value
% and derivatives are not consistent (ie, there may be a bug in the
% implementation of your "f" function). The function returns the found
% solution "X", a vector of function values "fX" indicating the progress made
% and "i" the number of iterations (line searches or function evaluations,
% depending on the sign of "length") used.
%
% Usage: [X, fX, i] = fmincg(f, X, options, P1, P2, P3, P4, P5)
%
% See also: checkgrad
%
% Copyright (C) 2001 and 2002 by Carl Edward Rasmussen. Date 2002-02-13
%
%
% (C) Copyright 1999, 2000 & 2001, Carl Edward Rasmussen
%
% Permission is granted for anyone to copy, use, or modify these
% programs and accompanying documents for purposes of research or
% education, provided this copyright notice is retained, and note is
% made of any changes that have been made.
%
% These programs and documents are distributed without any warranty,
% express or implied.  As the programs were written for research
% purposes only, they have not been tested to the degree that would be
% advisable in any important application.  All use of these programs is
% entirely at the user's own risk.
%
% [ml-class] Changes Made:
% 1) Function name and argument specifications
% 2) Output display
%

% Read options
if exist('options', 'var') && ~isempty(options) && isfield(options, 'MaxIter')
    length = options.MaxIter;
else
    length = 100;
end

RHO = 0.01;                            % a bunch of constants for line searches
SIG = 0.5;       % RHO and SIG are the constants in the Wolfe-Powell conditions
INT = 0.1;    % don't reevaluate within 0.1 of the limit of the current bracket
EXT = 3.0;                    % extrapolate maximum 3 times the current bracket
MAX = 20;                         % max 20 function evaluations per line search
RATIO = 100;                                      % maximum allowed slope ratio

argstr = ['feval(f, X'];                      % compose string used to call function
for i = 1:(nargin - 3)
  argstr = [argstr, ',P', int2str(i)];
end
argstr = [argstr, ')'];

if max(size(length)) == 2, red=length(2); length=length(1); else red=1; end
S=['Iteration '];

i = 0;                                            % zero the run length counter
ls_failed = 0;                             % no previous line search has failed
fX = [];
[f1 df1] = eval(argstr);                      % get function value and gradient
i = i + (length<0);                                            % count epochs?!
s = -df1;                                        % search direction is steepest
d1 = -s'*s;                                                 % this is the slope
z1 = red/(1-d1);                                  % initial step is red/(|s|+1)

while i < abs(length)                                      % while not finished
  i = i + (length>0);                                      % count iterations?!

  X0 = X; f0 = f1; df0 = df1;                   % make a copy of current values
  X = X + z1*s;                                             % begin line search
  [f2 df2] = eval(argstr);
  i = i + (length<0);                                          % count epochs?!
  d2 = df2'*s;
  f3 = f1; d3 = d1; z3 = -z1;             % initialize point 3 equal to point 1
  if length>0, M = MAX; else M = min(MAX, -length-i); end
  success = 0; limit = -1;                     % initialize quanteties
  while 1
    while ((f2 > f1+z1*RHO*d1) | (d2 > -SIG*d1)) & (M > 0)
      limit = z1;                                         % tighten the bracket
      if f2 > f1
        z2 = z3 - (0.5*d3*z3*z3)/(d3*z3+f2-f3);                 % quadratic fit
      else
        A = 6*(f2-f3)/z3+3*(d2+d3);                                 % cubic fit
        B = 3*(f3-f2)-z3*(d3+2*d2);
        z2 = (sqrt(B*B-A*d2*z3*z3)-B)/A;       % numerical error possible - ok!
      end
      if isnan(z2) | isinf(z2)
        z2 = z3/2;                  % if we had a numerical problem then bisect
      end
      z2 = max(min(z2, INT*z3),(1-INT)*z3);  % don't accept too close to limits
      z1 = z1 + z2;                                           % update the step
      X = X + z2*s;
      [f2 df2] = eval(argstr);
      M = M - 1; i = i + (length<0);                           % count epochs?!
      d2 = df2'*s;
      z3 = z3-z2;                    % z3 is now relative to the location of z2
    end
    if f2 > f1+z1*RHO*d1 | d2 > -SIG*d1
      break;                                                % this is a failure
    elseif d2 > SIG*d1
      success = 1; break;                                             % success
    elseif M == 0
      break;                                                          % failure
    end
    A = 6*(f2-f3)/z3+3*(d2+d3);                      % make cubic extrapolation
    B = 3*(f3-f2)-z3*(d3+2*d2);
    z2 = -d2*z3*z3/(B+sqrt(B*B-A*d2*z3*z3));        % num. error possible - ok!
    if ~isreal(z2) | isnan(z2) | isinf(z2) | z2 < 0   % num prob or wrong sign?
      if limit < -0.5                               % if we have no upper limit
        z2 = z1 * (EXT-1);                 % the extrapolate the maximum amount
      else
        z2 = (limit-z1)/2;                                   % otherwise bisect
      end
    elseif (limit > -0.5) & (z2+z1 > limit)          % extraplation beyond max?
      z2 = (limit-z1)/2;                                               % bisect
    elseif (limit < -0.5) & (z2+z1 > z1*EXT)       % extrapolation beyond limit
      z2 = z1*(EXT-1.0);                           % set to extrapolation limit
    elseif z2 < -z3*INT
      z2 = -z3*INT;
    elseif (limit > -0.5) & (z2 < (limit-z1)*(1.0-INT))   % too close to limit?
      z2 = (limit-z1)*(1.0-INT);
    end
    f3 = f2; d3 = d2; z3 = -z2;                  % set point 3 equal to point 2
    z1 = z1 + z2; X = X + z2*s;                      % update current estimates
    [f2 df2] = eval(argstr);
    M = M - 1; i = i + (length<0);                             % count epochs?!
    d2 = df2'*s;
  end                                                      % end of line search

  if success                                         % if line search succeeded
    f1 = f2; fX = [fX' f1]';
    fprintf('%s %4i | Cost: %4.6e\r', S, i, f1);
    s = (df2'*df2-df1'*df2)/(df1'*df1)*s - df2;      % Polack-Ribiere direction
    tmp = df1; df1 = df2; df2 = tmp;                         % swap derivatives
    d2 = df1'*s;
    if d2 > 0                                      % new slope must be negative
      s = -df1;                              % otherwise use steepest direction
      d2 = -s'*s;
    end
    z1 = z1 * min(RATIO, d1/(d2-realmin));          % slope ratio but max RATIO
    d1 = d2;
    ls_failed = 0;                              % this line search did not fail
  else
    X = X0; f1 = f0; df1 = df0;  % restore point from before failed line search
    if ls_failed | i > abs(length)          % line search failed twice in a row
      break;                             % or we ran out of time, so we give up
    end
    tmp = df1; df1 = df2; df2 = tmp;                         % swap derivatives
    s = -df1;                                                    % try steepest
    d1 = -s'*s;
    z1 = 1/(1-d1);
    ls_failed = 1;                                    % this line search failed
  end
  if exist('OCTAVE_VERSION')
    fflush(stdout);
  end
end
fprintf('\n'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-05T04:16:41.167

fmincg 使用[共轭梯度法](https://en.wikipedia.org/wiki/Conjugate_gradient_method)

如果您查看此链接上的图片，您会发现 CG 方法的收敛速度比 fminunc 快得多，但它假设了一些我认为 fminunc 方法（[BFGS](https://en.wikipedia.org/wiki/Broyden%E2%80%93Fletcher%E2%80%93Goldfarb%E2%80%93Shanno_algorithm)）不需要的约束（共轭向量与非共轭向量）。

换句话说，fmincg 方法比 fminunc 更快但更粗略，因此它更适用于大型矩阵（许多特征，例如数千个），而不是具有多达数百个特征的较小矩阵。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-03T18:36:13.273

**fmincg 比 fminunc 更准确。他们两个所花费的时间几乎相同。在神经网络或一般情况下，没有更多的权重 fminunc 可以给出内存不足错误。所以 fmincg 内存效率更高。**

使用 fminunc，准确度为 93.10，所用时间为 11.3794 秒。

```
Testing lrCostFunction() with regularization
Cost: 2.534819
Expected cost: 2.534819
Gradients:
 0.146561
 -0.548558
 0.724722
 1.398003
Expected gradients:
 0.146561
 -0.548558
 0.724722
 1.398003
Program paused. Press enter to continue.

Training One-vs-All Logistic Regression...
id = 1512324857357
Elapsed time is 11.3794 seconds.
Program paused. Press enter to continue.

Training Set Accuracy: 93.100000 
```

使用 fmincg，准确度为 95.12，所用时间为 11.7978 秒。

```
Testing lrCostFunction() with regularization
Cost: 2.534819
Expected cost: 2.534819
Gradients:
 0.146561
 -0.548558
 0.724722
 1.398003
Expected gradients:
 0.146561
 -0.548558
 0.724722
 1.398003
Program paused. Press enter to continue.

Training One-vs-All Logistic Regression...
id = 1512325280047
Elapsed time is 11.7978 seconds.

Training Set Accuracy: 95.120000 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-10T12:16:06.403

使用 fmincg 优化成本函数。fmincg 的工作方式与 fminunc 类似，但在处理大量参数时效率更高。在任何一种情况下，您的成本函数都是相同的，并且您的假设不会更简单或更复杂），但是因为它在对特别复杂的假设进行梯度下降时更有效。

它用于有效地利用内存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-10T10:34:29.573

fmincg 是 Coursera 上 course 开发的内部函数，不像 fminunc 是内置的 Octave 函数。由于它们都用于逻辑回归，因此它们仅在一个方面有所不同。当要考虑的参数数量相当大时（如果与训练集的大小相比），fmincg 比 fminunc 工作得更快并且处理更准确。而且，当传递给它的参数没有限制（不受约束）时，首选 fminunc。

# ruby-on-rails - 使用带有 Ajax Rails 3.2 的 Kanimari 进行双分页

> ID：12115094
> 
> 赞同：0
> 
> 时间：2012-08-24T18:52:55.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery, kaminari

我的应用程序几乎完成了，现在我正在搞乱化妆品，并决定做一些分页。will_paginate 对我来说没有用，所以我尝试了 Kanimari，它在不使用 Ajax 的时候就可以工作。

我的问题是我的页面有 2 个彼此不同的分页索引，因此使用不同的集合。

使用分页标签上的标签“：remote => true”它不起作用，在我看来，它试图在只点击一个分页时填充两个分页。

我的文件如下

**feed.js.erb**

```
$("#myItems").html("<%= escape_javascript(render partial: 'shared/feed_item', collection: @feed_items) %>");
$("#myBids").html("<%= escape_javascript(render partial: 'shared/feed_bid_item', collection: @feed_bids) %>");
$("#paginatorItem").html("<%= escape_javascript(paginate(@feed_items, :remote => true, :param_name => 'feed_items_page').to_s) %>")
$("#paginatorBids").html("<%= escape_javascript(paginate(@feed_bids, :remote => true, :param_name => 'feed_bids_page').to_s) %>") 
```

**feed.html.erb**

```
<div class="row span8">
  <h3>Latest Bidded Items</h3>
  <div id="paginatorBid"><%= paginate @feed_bids, :remote => true, :param_name => :feed_bids_page  %> </div>
  <% if @feed_bids.any? %>
      <div id ="myBids" class="microposts">
        <%= render partial: 'shared/feed_bid_item', collection: @feed_bids %>
      </div>
  <% end %>
</div>
<div class="row span8">
  <h3>My Items</h3>
  <div id="paginatorItem"> <%= paginate @feed_items, :remote => true, :param_name => :feed_items_page %>  </div>
  <% if @feed_items.any? %>
      <div id="myItems" class="microposts">
        <%= render partial: 'shared/feed_item', collection: @feed_items %>
      </div>
  <% end %>
  <div id="paginatorItem"> <%= paginate @feed_items, :remote => true, :param_name => :feed_items_page %>  </div>
</div> 
```

**页面控制器**'

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      @items  = current_user.items.build
      @feed_items = current_user.feed.page(params[:feed_items_page]).per(10)
      @feed_bids = current_user.bid_feed.page(params[:feed_bids_page]).per(2)
    end
  end

  def help
  end

  def about
  end

  def contact
  end

  private

end 
```

我在 firebug 的控制台上得到的错误是：

```
GET http://localhost:3000/?feed_bids_page=2 500 (Internal Server Error) jquery.js:8241
jQuery.ajaxTransport.send jquery.js:8241
jQuery.extend.ajax jquery.js:7720
$.rails.rails.ajax jquery_ujs.js:99
$.rails.rails.handleRemote jquery_ujs.js:158
(anonymous function) jquery_ujs.js:309
jQuery.event.dispatch jquery.js:3333
jQuery.event.add.elemData.handle.eventHandle jquery.js:2942 
```

控制台的日志：

```
Started GET "/?feed_bids_page=2" for 127.0.0.1 at 2012-08-24 15:38:32 -0300
Processing by StaticPagesController#home as JS
  Parameters: {"feed_bids_page"=>"2"}
  User Load (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'mb0cXIVY5QJQEoQt0dr7Zg' LIMIT 1
   (0.0ms)  SELECT COUNT(*) FROM "items" WHERE "items"."user_id" = 1
  Rendered shared/_user_info.html.erb (3.0ms)
  Rendered shared/_error_messages.html.erb (1.0ms)
  Rendered shared/_item_form.html.erb (4.0ms)
  Rendered shared/_feed_item.html.erb (3.0ms)
  Rendered shared/_feed.js.erb (24.0ms)
  Rendered static_pages/home.html.erb (37.0ms)
Completed 500 Internal Server Error in 2080ms

ActionView::Template::Error (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
    1: <li id="<%= feed_item.id %>" class="row">
    2:    <span class="user span6">Item Name:  <%= link_to feed_item.item_name, feed_item %></span>
    3:   <% if current_user?(feed_item.user) %>
    4:       <%= link_to "delete", feed_item, method: :delete,
  app/views/shared/_feed_item.html.erb:1:in `_app_views_shared__feed_item_html_erb___529660946_51689088'
  app/views/shared/_feed.js.erb:1:in `_app_views_shared__feed_js_erb___248436956_49382712'
  app/views/static_pages/home.html.erb:12:in `_app_views_static_pages_home_html_erb___289375805_49187496'

  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (23.0ms) 
```

当我点击它时，网址也不会改变......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:25:01.097

您是否有理由将“.to_s”附加到您的 javascript 调用中？尝试改变：

```
$("#paginatorItem").html("<%= escape_javascript(paginate(@feed_items, :remote => true, :param_name => 'feed_items_page').to_s) %>")
$("#paginatorBids").html("<%= escape_javascript(paginate(@feed_bids, :remote => true, :param_name => 'feed_bids_page').to_s) %>") 
```

至

```
$("#paginatorItem").html("<%= j paginate(@feed_items, :remote => true, :param_name => 'feed_items_page') %>")
$("#paginatorBids").html("<%= j paginate(@feed_bids, :remote => true, :param_name => 'feed_bids_page') %>") 
```

# html - Apache 不会更新 html，但这不是通常的修复

> ID：12115096
> 
> 赞同：2
> 
> 时间：2012-08-24T18:53:03.307
> 
> 标签：html, apache

我在使用 Apache 时遇到了一个常见问题，但我认为它没有相同的常见原因，因此没有通用的解决方案。

它始于对我的索引文件 (html) 的更新，但并未反映在浏览器中。我搜索了这个网站和谷歌上下，接受了我找到的建议，并检查了我自己的常见嫌疑人。我清除了浏览器的缓存，尝试了不同的浏览器，以前从未访问过该网站的浏览器，并请不同城市甚至从未听说过该网站的人为我访问该网站并查看显示的内容-每次旧索引文件显示，但不是新的。

这是奇怪的部分：最后，我卸载了 Apache，然后去删除了 Apache 目录，重新安装了 Apache，当我访问 URL 时，我仍然看到了旧版本的网站。

什么可能导致一些从未访问过该网站的人在完全卸载然后重新安装后看到旧的索引文件？

# ember.js - Ember.js + Leaflet + rails（使用 Javascript MVC 创建一个 rails 应用程序并打开源地图）

> ID：12115098
> 
> 赞同：3
> 
> 时间：2012-08-24T18:53:05.427
> 
> 标签：ember.js, javascript, leaflet

我是 Rails 新手（6 个月有几个应用程序）。我也是 Javascript 新手。我现在自学了 Rails 我自学了一个 Javascript 框架。我已经分析了所有框架并决定学习“ember.js”。

我还需要在我的应用程序中使用地图库。我过去使用过谷歌地图，但由于谷歌的许可和其他问题，这不再是一种选择。

所以我决定使用传单。

现在从新手的角度来看，我很想知道传单和 ember.js 库之间是否存在任何冲突。他们会好好相处吗？

在我投入时间和精力之前，在将两者结合起来时，我应该注意哪些警告。另一个 Javascript MVC 库会更好吗？

是否有任何带有rails、ember 和leaflet 的链接教程？（我用谷歌搜索了这个词，找不到）

任何让我开始的帮助都会很棒，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:42:42.497

快速浏览传单源代码表明 ember.js 应该没有任何问题 这两个框架很可能都写在一个[闭包](http://thatsobscene.wordpress.com/2010/03/13/javascript-closures-a-fairly-simple-explanation-of/)中以解决不兼容的问题。看到他们不做同样的事情（即像使用余烬的骨干）我会说你很好。

在帮助你起步方面，我建议你看一些关于使用 ember 和 rails 的教程。快速的[谷歌搜索](https://www.google.ca/search?sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8&q=emberjs%20and%20rails)显示了大量的演练

# memory - C18 中的 ORG 功能汇编块

> ID：12115102
> 
> 赞同：0
> 
> 时间：2012-08-24T18:53:38.050
> 
> 标签：memory, assembly, microchip, c18

你好，stackoverflow。

我正在使用带有引导加载程序的 pic 18f4550。

由于引导加载程序，我需要在内存中的指定地址中启动解码。

在这种情况下 0x1000 因为我没有任何中断。

到目前为止，这是我的代码（简单）：

```
#include <p18f4550.h>
#include <delays.h>

#pragma config FOSC = INTOSCIO_EC //Internal oscillator, port function on RA6, EC used by USB 
#pragma config WDT = OFF //Disable watchdog timer

#define LEDPin PORTAbits.RA0 //Define LEDPin as PORT D Pin 1
#define LEDTris TRISDbits.TRISD1 //Define LEDTris as TRISD Pin 1
void main()
{   
    _asm org 1000h
    LEDTris = 0;//Set LED Pin data direction to OUTPUT
    LEDPin = 1;//Set LED Pin

    while(1)
    {
        LEDPin = ~LEDPin;//Toggle LED Pin
        Delay10KTCYx(25);//Delay 250K cycles (1 second at 1MHz since each instruction takes 4 cycles)
    }

} 
```

但！...

> C:\Users\User\Documents\ProjectosPIC\testeled\main.c:13:Error: 语法错误

我知道如何解决吗？这是编译器的问题吗？？

我正在使用带有 mpasm 和其他语言的微芯片 C18 工具套件的 mplab IDE。

为什么是 sintaxe 错误？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:08:02.500

如果您有 C 编译器，则无需担心`org`地址。编译器和/或链接器启动代码会处理这些，然后调用`main`. 如果这不是真的，你有一个非标准的编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:53:58.330

内联汇编不太可能支持`org`.

此外，`main()`这不是将在您的程序中执行的第一段代码。之前将有一段相对较短的代码来初始化硬件、全局变量和可能的 C(++) 标准库`main()`。

因此，这个错误根本不应该让人感到意外。

您需要研究编译器和链接器选项以了解如何指定加载和起始地址。通常，设置此类地址是通过一个特殊的链接器脚本完成的，您将其作为参数传递给编译器或链接器。

查找编译器/链接器及其文件的文档。

# java - 不使用指针如何实现链表？

> ID：12115106
> 
> 赞同：7
> 
> 时间：2012-08-24T18:53:55.290
> 
> 标签：java, c++

在有指针的 C++ 中很容易实现链表。但是它们是如何用其他语言（如 java、python 等）实现的。我不想将内置类（在 JAVA 中支持）用于链表，但我想要的是如何替换指针来创建链表？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-24T18:55:53.980

它们是使用引用来实现的，这些引用本质上是（不包括语法）指针，您不能使用这些指针进行指针运算（在某些语言中，它们也不能为空）。在许多语言中，引用是使用变量的默认方式，这与 C++ 的默认方式是按值不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T18:54:53.673

对于其他语言，您处理与指针密切相关的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:59:45.897

如前所述，使用引用而不是指向内存块的指针。所以就像你在 C++ 中所做的那样

```
Struct Node {
  Node *last;
  Node *next;
} 
```

它看起来像这样：

```
Struct Node {
  Node last;
  Node next;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T19:09:04.723

一个好的数据结构类会告诉你一个链表可以用任何使用数组的语言来实现，比如 FORTRAN。

您将使用其他方法来定位下一个链接，而不是使用指针。对于数组，您可以使用指向下一个元素的索引而不是指针。

因此，您可以通过使用文件位置而不是指针在随机访问文件中实现链表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:56:37.290

当您编写自己的类时，例如`class node`，并让每个类都`node`持有一个字段到下一个 `node`，您实际上持有对该下一个节点的引用（如果它是最后一个节点，则为 null）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T19:13:03.997

您可能会在本书中找到一个很好的答案 - [http://www.amazon.com/Introduction-Algorithms-Thomas-H-Cormen/dp/0262033844](https://rads.stackoverflow.com/amzn/click/com/0262033844) - 我将为您总结一下我记得的内容。

基本上，您将拥有两个大小相等的数组（希望大于 n，其中 n=要存储的元素数）。我们称它们为数组 A 和数组 B。

数组 A[i] 保存数据值。数组 B[i] 保存“下一个”值“k”，使得 A[i]->next = A[k]。

希望这会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-08T18:34:43.203

记住链表的概念是你可以从一个元素到另一个元素。你如何做到这一点可能会非常不同。

例如，在 C++ 中，您提到可以使用指针。这表示另一种方式是您使用对象内存地址。

但这只是一种方式。如果您的所有对象都是从数组中引用的，那么您将能够通过它在该数组上的索引来引用一个对象。因此，链表中的每个元素都有一个整数，指定它所连接的对象的索引。

再举一个例子。如果您有一个字典，其中将对象与字符串相关联。然后你可以使用字符串来相互引用。

链表的核心概念不是指针，而是链表中的元素负责跟踪它所连接的元素。

# asp.net - 多页订阅单个usercontrol事件，asp.net 4.0

> ID：12115111
> 
> 赞同：1
> 
> 时间：2012-08-24T18:54:22.860
> 
> 标签：asp.net, user-controls

我有一个带有 asp.net 服务器端按钮控件的用户控件。我在多个页面上使用此用户控件。我在用户控件的按钮单击事件上引发自定义事件。使用此用户控件的所有父页面都应收到我从用户控件引发的此自定义事件的通知。除了在所有父页面中订阅此事件之外，是否有一种简单的方法可以让我在父页面中获得有关此自定义事件的通知？

我尝试在一个抽象基类中订阅此用户控件事件，该基类覆盖`OnLoad()`父页面的事件并让所有父页面都继承自此抽象基类。后面的用户控件代码是：

```
public partial class CustomPaging : System.Web.UI.UserControl
    {
         public delegate void NavigationButtonHandler(int currentPage);

         public event NavigationButtonHandler NavigationButtonClicked;
         public int CurrentPage { get; set; }

         protected void btnPrev_ServerClick(object sender, EventArgs e)
        {
            if (NavigationButtonClicked != null)
            {

                    NavigationButtonClicked(CurrentPage);

            }
        }

  } 
```

抽象基类是：

```
public abstract  class CustomPagingBase 
    {

        protected override void OnLoad(EventArgs e)
        {

                 base.OnLoad(e);
                ((CustomPaging)this.FindControl("ucPaging")).NavigationButtonClicked += new CustomPaging.NavigationButtonHandler(CustomPagingBase_NavigationButtonClicked);
        }

        void CustomPagingBase_NavigationButtonClicked(int currentPage)
        {
            LoadData(currentPage);
        }

        protected abstract void LoadData(int currentPage);

    } 
```

但是这件作品`this.FindControl("ucPaging")`返回null。请注意，我有一个 ucPaging id 的用户控件，我在父页面的标记中以声明方式设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:02:15.473

FindControl 默认不递归搜索。

因此，除非您`ucPaging`的控件直接添加到实现您的抽象类的控件集合中，否则您将获得空值。

您可以使用此功能找到它

```
 public static Control FindControlRecursive(this Control control, string id)
    {
        if (control == null) return null;
        //try to find the control at the current level
        Control ctrl = control.FindControl(id);
        if (ctrl == null)
        {
            //search the children
            foreach (Control child in control.Controls)
            {
                ctrl = FindControlRecursive(child, id);
                if (ctrl != null) break;
            }
        }
        return ctrl;
    } 
```

# javascript - 停止从移动屏幕切换 div？

> ID：12115112
> 
> 赞同：2
> 
> 时间：2012-08-24T18:54:40.687
> 
> 标签：javascript, jquery, css, html, onclick

我有一个 div 设置来切换隐藏/显示 onClick。我目前已将其设置为触发聊天功能，但是当有人单击它时，它会将他们带回页面的最顶部，或重置他们最后的位置。我怎样才能阻止这种情况轻易发生？谢谢！

解决方案：感谢所有贡献的人！虽然所有答案都有效，但我最终只是像大家所说的那样删除了 href="#" ，因为它是最简单的方法。再次感谢各位！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:56:38.920

防止在使用 jQuery 单击链接时发生默认操作。

```
$('#theLink').click(function(c) {
    c.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:04:38.817

利用：

```
$('.link').click(function(ev) {
    if(ev && !ev.preventDefault()) ev.returnValue = false;
    .... 
```

因为这在 IE<9 上按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:56:48.630

通常这是因为你有`href="#"`什么东西，它实际上是去这个锚点而不是找到它。

所以你应该做的是`return false;`在你的 onclick 处理程序中。这将阻止点击处理继续，从而阻止浏览器导航到您不存在的锚点。

# java - 用于多行文本的 Java 注释实用程序

> ID：12115115
> 
> 赞同：6
> 
> 时间：2012-08-24T18:55:02.170
> 
> 标签：java, reflection, annotations, multiline

WRT[多行 Java 字符串的任何未来计划](https://stackoverflow.com/questions/11659225/any-future-plans-for-multiline-java-string)。

编写执行以下操作的实用程序有多难？

```
@AllYouCanEatText(return="query")
private String getQuery(String empid, String[] columns) {
  String query;
  /*
  SELECT ${columns}
  FROM Employees
  WHERE empid = ${empid}
  ;
  */
  return query;
}; 
```

当然，在我跳到枪管前面之前，我应该问一下——这样的实用程序已经可用了吗？如果有，在哪里？

手头的问题实际上是 - 我如何在编译期间阅读评论部分的反思。作为我对反射和注释处理的（令人沮丧的）熟悉程度的指示——我最后一次使用反射是在运行时读取方法。编译时反射可能吗？

有没有人有兴趣与我分享一个谷歌代码项目来做到这一点？可能已经有一个 apache 项目在进行中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:50:41.097

我不久前遇到过这个，我自己从来没有使用过，但我认为它是你正在寻找的[http://www.adrianwalker.org/2011/12/java-multiline-string.html](http://www.adrianwalker.org/2011/12/java-multiline-string.html)

# jquery - 如何循环遍历 jQuery 元素数组并访问数据？

> ID：12115118
> 
> 赞同：1
> 
> 时间：2012-08-24T18:55:21.343
> 
> 标签：jquery

我正在使用 jQuery 1.7.2。

我有三个复选框，每个复选框都有一个唯一的公司 ID。检查一个框时，我想列出从已检查的框创建的公司ID列表。

```
<input type='checkbox' class='Company' data-companyid='1'> 1<br>
<input type='checkbox' class='Company' data-companyid='2'> 2<br>
<input type='checkbox' class='Company' data-companyid='3'> 3<br>

// SET BY CLASS
$Company = $("input.Company");

// GET COMPANY LIST 
function getCompanyList() {
    var len = $Company.length;
    for (i = 0; i < len; i++) {
         var CompanyID = $Company[i].data("companyid");
         alert(CompanyID);
    }
}
$Company.change(getCompanyList);​ 
```

出于某种原因，我无法通过循环中的数据方法访问公司 ID。我有很多我自己的代码示例，我在其中做这种事情，但我无法完成这项工作。

我错过了什么？

[http://jsfiddle.net/Msc95/](http://jsfiddle.net/Msc95/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:57:43.807

您不会将单个公司 ID 累积到任何类型的数据结构中。

从（检查的）元素数组返回值数组的最简单方法是使用 jQuery 的`.map`函数：

```
function getCompanyList() {
    var companyList = $Company.filter(':checked').map(function() {
       return $(this).data('companyid');
    }).get();
    alert(companyList);
} 
```

该`.get()`调用对于将结果`.map()`转换为普通数组是必要的。

见[http://jsfiddle.net/alnitak/zfUXj/](http://jsfiddle.net/alnitak/zfUXj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:03:48.337

为什么不这样，并将它们放在一个数组中？

```
var checkedCompanys = new Array();
 $('input.company:checked').each(function() {
     checkedCompanys.push($(this).data("companyid"));    
  }); 
```

祝你好运

# c# - 如何使用 LINQ 从 DataTable 中进行选择，并列出所需的列名

> ID：12115120
> 
> 赞同：0
> 
> 时间：2012-08-24T18:55:33.263
> 
> 标签：c#, linq, linq-to-objects

我有一些从各种来源（SQL 和 MS Access）加载到内存中的数据表，每个数据集都有几列，每个数据集之间只有一部分列是相同的。我正在编写一些数据同步代码，我想比较这些数据表，但只能根据它们共有的列进行比较。如果我不得不这样做，我可能会使用很多循环来做到这一点，但我想更熟悉 LINQ 并拥有更简洁的代码。

到目前为止，我已经设法从每个数据表中获取列名列表，并使用 Intersect 来获取它们共同的列名列表，如下所示：

```
private string[] Common_ColumnNames {
    get {
        // get column names from source & destination data
        string[] src_columnNames = 
        (from dc in _srcDataTable.Columns.Cast<DataColumn>() 
        select dc.ColumnName).ToArray();

        string[] dest_columnNames = 
        (from dc in _destDataTable.Columns.Cast<DataColumn>() 
        select dc.ColumnName).ToArray();

        // find the column names common between the two data sets 
        // - these are the columns to be compared when synchronizing
        return src_columnNames.Intersect( dest_columnNames ).ToArray();                
    }
} 
```

现在我被困住了......我需要从每个 DataTable 中选择所有行，但只能选择那些常见的列。在我的脑海中，我看到这有几种不同的方式：

1）从数据表中选择所有行，并传入我想要的列列表字符串 [] 变量来告诉 LINQ 我想要哪些列

2）从数据表中选择所有行，并使用一些 lambda 函数（对我来说也是相当新的）从每一行中删除不需要的列，并输出一个包含一些删除列的新数据表。

任何有关如何实现这一目标的建议/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:19:24.717

好吧，它不是 LinQ，但使用 DataView 非常简单

```
string[] commonCols = obj.Common_Columns;
DataView myTableView = new DataView(srcDataTable); 
DataTable srcReducedTable = myTableView.ToTable(false, commonCols); 
```

[MSDN 参考](http://msdn.microsoft.com/en-us/library/wec2b2e6)

# php - PHP MSSQL mssql_fetch_array - 无法得到回显的结果

> ID：12115121
> 
> 赞同：1
> 
> 时间：2012-08-24T18:55:33.590
> 
> 标签：php, sql-server

我已经成功地创建了一个到 MSSQL 数据库的连接，执行了一个查询并使用 mssql_num_rows 返回了结果。我能够`$numRows`回显并在页面上显示“返回的行”。

表中的列具有以下名称：employeeName、prideSelect、prideComment、flagpoleSelect、flagpoleComment。都是 nvarchar(50) 或 nvarchar(max)

我无法做的是回显表中的任何数据。我是 php/sql 的新手，我尝试寻找没有运气的解决方案。我不确定它是否与设置为 nvarchar 的数据库列有关。或者，如果这是我的代码中的错误。我已经尝试过`mssql_fetch_array`并`mssql_fetch_row`显示结果，但都无法正常工作。下面是我正在使用的代码：

```
<?php

//connects to Heros database

$conn = mssql_connect($host, $uid, $pwd) or die('Could not connect')
        or die("Couldn't connect to SQL Server on $host");

$selected = mssql_select_db($db, $conn)
        or die("Couldn't open database $db");

echo "MSSQL Connection successful";

//declare the SQL statement that will query the database
$query = mssql_query('SELECT * FROM [Heros].[dbo].[tblHeros]');

//execute the SQL query and return records
$result = mssql_query($query);

$numRows = mssql_num_rows($result);
echo "<h1>" . $numRows . " Row" . ($numRows == 1 ? "" : "s") . " Returned </h1>";

//display the results 
while ($row = mssql_fetch_array($result)) {
    echo "<li>" . $row["employeeName"] . $row["prideSelect"] . $row["prideComment"] . "</li>";
}

//close the connection
mssql_close($conn);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:59:38.300

你要`mssql_fetch_assoc`

[http://php.net/manual/en/function.mssql-fetch-assoc.php](http://php.net/manual/en/function.mssql-fetch-assoc.php)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T19:31:29.947

你写了：`$query = mssql_query('SELECT * FROM [Heros].[dbo].[tblHeros]');`

代替：`$query = 'SELECT * FROM [Heros].[dbo].[tblHeros]';`

# jqgrid - jqGrid - 删除所有行而不调用 loadComplete 或 gridComplete

> ID：12115122
> 
> 赞同：1
> 
> 时间：2012-08-24T18:55:42.017
> 
> 标签：jqgrid

有没有办法在不调用 gridComplete 事件的情况下删除 jqGrid 的所有行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:01:32.527

您可以使用几种方法。gridDestroy 和 grid Unload，您可以根据需要使用其中的任何一个。

检查此链接以进一步参考[jqGrid GridUnload/ GridDestroy](https://stackoverflow.com/questions/4920323/jqgrid-gridunload-griddestroy)

或者你可以使用这个

$('#grid1').jqGrid('clearGridData');

# c# - 为什么我的 DataGridView 在重绘时会分崩离析？

> ID：12115123
> 
> 赞同：-1
> 
> 时间：2012-08-24T18:55:43.323
> 
> 标签：c#, winforms, dynamic, datagridview

启动时，动态创建的行和列的 DataGridView 看起来不错。

DGV 位于 TabPage 上。当我切换到另一个 TabPage 并再次返回时，DGV 全部转到达拉斯。它几乎看起来好像在旧渲染之上绘制了一个新的渲染，但有点偏离中心。

我在以下位置获得了“好网格”和“坏网格”的尖叫声：

[http://warbler.posterous.com/good-grid-bad-grid#](http://warbler.posterous.com/good-grid-bad-grid#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:02:11.780

彻头彻尾的牛！

注释掉这段代码：

```
protected override CreateParams CreateParams {
    get {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED 
        return cp;
    }
} 
```

...解决了问题。当我使用 TableLayoutPanel 时，该代码是必需的，但显然在用 DGV 替换 TLP 时会出现问题。

# android - 创建自定义样式崩溃应用

> ID：12115125
> 
> 赞同：6
> 
> 时间：2012-08-24T18:55:45.413
> 
> 标签：android, styles, themes

我正在构建我的应用程序，以便它可以从多个主题中受益。

我已经到了要添加自定义项目的阶段，例如

```
<style name="My.Theme.Default">
...
    <item name="borderColorDialog">@color/red</item>
...
</style>

<style name="My.Theme.Blue">
...
    <item name="borderColorDialog">@color/blue</item>
...
</style> 
```

所以我将属性添加`borderColorDialog`到我的 attr 文件中，如下所示：

```
<attr name="borderColorDialog" format="color" /> 
```

现在我想测试它。我有一个drawable如下：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list 
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>

        <shape 
            android:shape="rectangle" >

            <solid 
                android:color="?borderColorDialog" />

        </shape>

    </item> 

    <item
        android:bottom="2dp">

        <shape 
            android:shape="rectangle" >

            <solid 
                android:color="@color/black" />

        </shape>

    </item>
</layer-list> 
```

这一切对我来说在逻辑上都是合理的，但是`?borderColorDialog`参考使模拟器崩溃：

```
E/AndroidRuntime(1461): FATAL EXCEPTION: main
E/AndroidRuntime(1461): java.lang.RuntimeException: Unable to start activity ComponentInfo{.MainActivity}: android.view.InflateException: Binary XML file line #26: Error inflating class com.android.internal.widget.ActionBarContainer
E/AndroidRuntime(1461):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
E/AndroidRuntime(1461):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(1461):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(1461):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(1461):     at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(1461):     at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(1461):     at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(1461):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(1461):     at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(1461):     at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(1461): Caused by: android.view.InflateException: Binary XML file line #26: Error inflating class com.android.internal.widget.ActionBarContainer
E/AndroidRuntime(1461):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
E/AndroidRuntime(1461):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2784)
E/AndroidRuntime(1461):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2844)
E/AndroidRuntime(1461):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:252)
E/AndroidRuntime(1461):     at android.app.Activity.setContentView(Activity.java:1867)
E/AndroidRuntime(1461):     at .MainActivity.onCreate(MainActivity.java:30)
E/AndroidRuntime(1461):     at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime(1461):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime(1461):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
E/AndroidRuntime(1461):     ... 11 more
E/AndroidRuntime(1461): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(1461):     at java.lang.reflect.Constructor.constructNative(Native Method)
E/AndroidRuntime(1461):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
E/AndroidRuntime(1461):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
E/AndroidRuntime(1461):     ... 24 more
E/AndroidRuntime(1461): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/actionbar_background.xml from drawable resource ID #0x7f020001
E/AndroidRuntime(1461):     at android.content.res.Resources.loadDrawable(Resources.java:1918)
E/AndroidRuntime(1461):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
E/AndroidRuntime(1461):     at android.view.View.<init>(View.java:3336)
E/AndroidRuntime(1461):     at android.view.ViewGroup.<init>(ViewGroup.java:427)
E/AndroidRuntime(1461):     at android.widget.FrameLayout.<init>(FrameLayout.java:101)
E/AndroidRuntime(1461):     at android.widget.FrameLayout.<init>(FrameLayout.java:97)
E/AndroidRuntime(1461):     at com.android.internal.widget.ActionBarContainer.<init>(ActionBarContainer.java:52)
E/AndroidRuntime(1461):     ... 27 more
E/AndroidRuntime(1461): Caused by: java.lang.UnsupportedOperationException: Can't convert to color: type=0x2
E/AndroidRuntime(1461):     at android.content.res.TypedArray.getColor(TypedArray.java:326)
E/AndroidRuntime(1461):     at android.graphics.drawable.GradientDrawable.inflate(GradientDrawable.java:951)
E/AndroidRuntime(1461):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
E/AndroidRuntime(1461):     at android.graphics.drawable.LayerDrawable.inflate(LayerDrawable.java:165)
E/AndroidRuntime(1461):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
E/AndroidRuntime(1461):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
E/AndroidRuntime(1461):     at android.content.res.Resources.loadDrawable(Resources.java:1915)
E/AndroidRuntime(1461):     ... 33 more 
```

错误一直在继续。基本上是指XML。

将其恢复`@color/red`正常工作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:58:22.870

根据我的经验，Android 不允许在可绘制对象中引用具有属性的颜色。我通过为每个主题创建一个形状的解决方法解决了这个问题。我在这里发布了一个描述作为对上一个问题的回答：

[https://stackoverflow.com/a/13471695/891479](https://stackoverflow.com/a/13471695/891479)

# c# - 复杂度压缩字符串

> ID：12115131
> 
> 赞同：3
> 
> 时间：2012-08-24T18:55:53.870
> 
> 标签：c#, string, compression, complexity-theory

我有一个大型理论字符串（104 个字符长）数据库生成程序，它返回以 PB 为单位的结果。我没有那么多的计算能力，所以我想从数据库中过滤出低复杂度的字符串。

我的语法是英文字母表的修改形式，没有数字字符。我阅读了有关[Kolmogorov 复杂性](https://en.wikipedia.org/wiki/Kolmogorov_complexity)以及[理论上不可能计算](https://en.wikipedia.org/wiki/Kolmogorov_complexity#Incomputability_of_Kolmogorov_complexity)的内容，但我只需要使用压缩的 C# 中的一些基本内容。

使用这两个链接

*   [如何测量字符串的复杂度？](https://stackoverflow.com/questions/6084402/how-to-measure-complexity-of-a-string)
*   [如何确定字符串的大小并压缩它](https://stackoverflow.com/questions/2764821/how-to-determine-size-of-string-and-compress-it)

我想出了这个：

```
MemoryStream ms = new MemoryStream();

GZipStream gzip2 = new GZipStream(ms, CompressionMode.Compress, true);

byte[] raw = Encoding.UTF8.GetBytes(element);
gzip2.Write(raw, 0, raw.Length);
gzip2.Close();

byte[] zipped = ms.ToArray(); // as a BLOB
string smallstring = Convert.ToString(zipped); // as a string
// store zipped or base64
byte[] raw2 = Encoding.UTF8.GetBytes(smallstring);
int startsize = raw.Length;
int finishsize = raw2.Length;
double percent = Convert.ToDouble(finishsize) / Convert.ToDouble(startsize);
if (percent > .75)
{
    ///output
} 
```

我的第一个元素是：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊！

并且它压缩到**13 个**字符的完成大小，但是这个其他聊天集

> mlcllltlgvalvcgvpamdipqtkqdellplagtwhsmamatnnislmatlkaplrvhitsllptpednleivlhrwennscvekkvlgektenpkkfkinytvaneatlldtdydnflflclqdtttpiqsmmcqylarvlveddeimqgfirafrplprhlwylldlkqmeepcrf

也评估为**13**。有一个错误，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:31:04.197

您的错误是将数组转换为字符串的以下部分：

```
byte[] zipped = ms.ToArray(); // as a BLOB
string smallstring = Convert.ToString(zipped); // as a string
// store zipped or base64
byte[] raw2 = Encoding.UTF8.GetBytes(smallstring); 
```

调用`Convert.ToString()`数组将返回一些调试输出，在本例中为 string `System.Byte[]`。（请参阅以下关于[ideone](http://ideone.com/nC3di)的示例。）

您应该直接比较未压缩和压缩字节数组的长度：

```
int startsize = raw.Length;
int finishsize = zipped.Length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:34:53.613

这是我使用的代码

```
/// <summary>
/// Defines an interface to calculate relevant 
/// to the input complexity of a string
/// </summary>
public interface IStringComplexity
{
    double GetCompressionRatio(string input);
    double GetRelevantComplexity(double min, double max, double current);
} 
```

以及实现它的类

```
public class GZipStringComplexity : IStringComplexity
{
    public double GetCompressionRatio(string input)
    {
        if (string.IsNullOrEmpty(input))
            throw new ArgumentNullException();

        byte[] inputBytes = Encoding.UTF8.GetBytes(input);
        byte[] compressed;

        using (MemoryStream outStream = new MemoryStream())
        {
            using (var zipStream = new GZipStream(
                outStream, CompressionMode.Compress))
            {
                using (var memoryStream = new MemoryStream(inputBytes))
                {
                    memoryStream.CopyTo(zipStream);
                }
            }
            compressed = outStream.ToArray();
        }

        return (double)inputBytes.Length / compressed.Length;
    }

    /// <summary>
    /// Returns relevant complexity of a string on a scale [0..1], 
    /// where <value>0</value> has very low complexity
    /// and <value>1</value> has maximum complexity
    /// </summary>
    /// <param name="min">minimum compression ratio observed</param>
    /// <param name="max">maximum compression ratio observed</param>
    /// <param name="current">the value of compression ration
    /// for which complexity is being calculated</param>
    /// <returns>A relative complexity of a string</returns>
    public double GetRelevantComplexity(double min, double max, double current)
    {
        return 1 - current / (max - min);
    }
} 
```

这是您如何使用它的方法

```
class Program
{
    static void Main(string[] args)
    {
        IStringComplexity c = new GZipStringComplexity();

        string input1 = "HHHFHHFFHHFHHFFHHFHHHFHAAAAHHHFHHFFHHFHHFFHHFHHHFHAAAAHHHFHHFFHHFHHFFHHFHHHFHAAAAHHHFHHFFHHFHHFFHHFHHHFH";
        string input2 = "mlcllltlgvalvcgvpamdipqtkqdlelpklagtwhsmamatnnislmatlkaplrvhitsllptpednleivlhrwennscvekkvlgektenpkkfkinytvaneatlldtdydnflflclqdtttpiqsmmcqylarvlveddeimqgfirafrplprhlwylldlkqmeepcrf";
        string inputMax = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";

        double ratio1 = c.GetCompressionRatio(input1); //2.9714285714285715
        double ratio2 = c.GetCompressionRatio(input2); //1.3138686131386861
        double ratioMax = c.GetCompressionRatio(inputMax); //7.5

        double complexity1 = c.GetRelevantComplexity(1, ratioMax, ratio1); // ~ 0.54
        double complexity2 = c.GetRelevantComplexity(1, ratioMax, ratio2); // ~ 0.80
    }
} 
```

我发现一些有用的附加信息。

您可以尝试使用[7zip 库](http://www.7-zip.org/sdk.html)中的 LZMA、LZMA2 或 PPMD ​​。这些相对容易设置，并且提供您可以实现多种压缩算法的接口。我发现这些算法的压缩性能比 GZip 好得多，但如果你把压缩比放在一个比例上，这并不重要。

如果您需要一个归一化的值，例如从 0 到 1，则需要首先计算所有序列的压缩比。这是因为您无法确定可能的*最大*压缩比是多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:01:08.697

当然，这会奏效。只要你只是比较大小，你使用什么压缩算法并不重要。您主要关心的是密切关注您用于压缩字符串的处理能力。

# ant - 在 SVN 中使用 Ant

> ID：12115132
> 
> 赞同：2
> 
> 时间：2012-08-24T18:56:15.913
> 
> 标签：ant

这些文件的最新版本在哪里？

我不断收到以下错误：使用以下配置**未找到引用 svnant.classpath ：**

```
<path id="path.svnant"> <pathelement location="${SVN.ANT.LIB}/svnant.jar"/> 
</path> 

<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="path.svnant" /> 
```

所以我在写博客后添加了这些条目：

```
<path id="path.svnant">
<pathelement location="${SVN.ANT.LIB}/svnant.jar"/>
<pathelement location="${SVN.ANT.LIB}/svnClientAdapter.jar"/>
<pathelement location="${SVN.ANT.LIB}/svnkit.jar"/>
<pathelement location="${SVN.ANT.LIB}/svnjavahl.jar"/>
</path>
<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="path.svnant" /> 
```

但我似乎找不到这些文件或它们的最新版本。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:45:56.093

[您可以在此处](http://subclipse.tigris.org/svnant.html)从 CollabNet 获取这些内容。有许多版本可用，请选择适合您的 Subversion 版本的版本。该页面中链接到的每个 svnant-xxxzip 下载都包含您需要的 jar 文件。您可能还[需要 JavaHL](http://subclipse.tigris.org/wiki/JavaHL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:56:34.220

Just curious, why do you want to do Subversion commands in Ant?

Sometimes it's necessary. For example, if you use CruiseControl, you need to do the checkout for CruiseControl in your `build.xml` because CruiseControl doesn't do it.

However, most of the time, it's not a good idea. For example, you might use your `build.xml` to checkin the resulting built artifacts. This is not a good idea. You should be storing built artifacts in a release repositor where they can be available for other projects. Checking in large binary files into your Subversion repository will make your Subversion repository grow to tremendous size with little benefit. These built binaries take a lot of room and become obsolete in a matter of months.

We use Ant with [Ivy](http://ant.apache.org/ivy). Our builds are done with [Jenkins](http://jenkins-ci.org), and we use the `mvm deploy:deploy-flle` command in Jenkins to deploy our files into our Maven repository where Ant w/ Ivy can check them out for other projects. The stuff we deploy to other machines are kept in Jenkins.

[Martin Clayton](https://stackoverflow.com/a/12129844/368630) has answered you where you can find the files you need to get the Ant Subversion tasks working. However, my experience has been that it's simply easier just to use `<exec>` and execute Subversion commands directly. This way, you don't have to make sure that the Subversion API is installed and that it matches the Subversion client and server.

# r - 高效使用 as.numeric() 和 factor()

> ID：12115144
> 
> 赞同：5
> 
> 时间：2012-08-24T18:57:19.380
> 
> 标签：r, character, numeric

我有数百个从数据库导入到 R 中的字符向量——每个字符向量的长度为 6-7 百万。它们是具有标签字符（字母）的数字或因子数据 - 要设置的级别，所有因子，都有一些 NA。举个例子

```
vecA <- c("1",NA, "2",....,NA, "100")
vecB <- c("smith", NA, NA, ... , "jones") 
```

有没有一种有效的方法来强制 vecA 为数字和 vecB 为因子。问题是我不知道数字和因子向量在数据中的位置，并且一一浏览它们很乏味。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:44:53.500

我可能会使用`tryCatch()`, 首先尝试将每个向量转换为 class `"numeric"`。如果`as.numeric()`抛出警告消息（就像输入向量包含非数字字符时一样），我会捕获警告并将向量转换为 class `"factor"`。

```
vecA <- c("1",NA, "2",NA, "100")
vecB <- c("smith", NA, NA, "jones")

myConverter <- function(X) tryCatch(as.numeric(X), 
                                    warning = function(w) as.factor(X))

myConverter(vecA)
# [1]   1  NA   2  NA 100
myConverter(vecB)
# [1] smith <NA>  <NA>  jones
# Levels: jones smith 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:43:09.427

也许是一个正则表达式？对于每个向量，匹配看起来像数字的东西。

```
convert.numeric <- function(vec) {
  if( grepl("^[0-9]*(\\.[0-9]+)?$",vec)) == !is.na(vec)) ) {
    vec <- as.numeric(vec)
  } else { vec <- as.factor(vec) }
  return(vec)
} 
```

然后将您的向量包装到一个列表中并使用`lapply`：

```
new.vectors <- lapply(old.vectors,convert.numeric) 
```

# ruby-on-rails-3 - 如何国际化咖啡脚本中的值

> ID：12115146
> 
> 赞同：3
> 
> 时间：2012-08-24T18:57:32.247
> 
> 标签：ruby-on-rails-3, internationalization, coffeescript

下面的代码是我在 rails 应用程序中的一个咖啡脚本文件中的代码。我正在努力为“Select Account First”和“Select One”等字符串值添加 i18n 支持。在常规 javascript 文件中，我一直在使用 I18n.t("shared.select_account_first") 之类的东西来获取使用 i18n-js gem 的字符串的国际化值。

```
jQuery ->
  networks = $('#account_offering_network_id').html()
  select_network_options = new Option("Select Account First", "", true, false)

  filter_networks_by_account = (account) ->
    if account is 'Select One'
      $('#account_offering_network_id').html(select_network_options)
    else
      escaped_account = account.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
      options = $(networks).filter("optgroup[label='#{escaped_account}']")
      $('#account_offering_network_id').html(options.html())

  # Show proper network dropdown first time
  filter_networks_by_account($('#account_offering_account_id :selected').text())

  # Show proper network dropdown on account change
  $('#account_offering_account_id').change -> filter_networks_by_account($('#account_offering_account_id :selected').text()) 
```

所有这些的目标是根据所选帐户过滤网络下拉列表。如果未选择帐户（帐户下拉菜单的值显示“选择一个”或相应的 i18n 值），网络下拉菜单应在所选区域设置中显示“首先选择帐户”。

我正在使用 i18s-js gem(https://github.com/fnando/i18n-js) 在 javascript 中启用翻译。以下是我必须在应用程序中进行的更改以支持 gem。

在 application.js 中：

```
//= require i18n
//= require i18n/translations 
```

在 production.rb 和 development.rb 中添加的属性：

```
# Enable locale fallbacks for I18n (makes lookups for any locale fall back to
# the I18n.default_locale when a translation can not be found)
config.i18n.fallbacks = true
config.i18n.available_locales = [:en, :ru] 
```

在 application.html.erb 中：

```
<%# For localization/i18n in javascript %>
<script type="text/javascript">
  I18n.defaultLocale = "<%= I18n.default_locale %>";
  I18n.locale = "<%= I18n.locale %>";
  I18n.fallbacks = true;
</script> 
```

最后我运行了“rake i18n:js:export”，它将创建一个翻译文件 (app/javascripts/i18n/translations.js)，其中加载了名称-值对。现在，我可以通过任何 javascript 访问使用 I18n.t(name) 的翻译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T11:01:00.307

我试图做同样的事情，但我认为你做不到，因为显然制作咖啡脚本的人做出了设计决定，禁止将 ruby​​ 变量注入到咖啡脚本文件中，以避免在每个请求上重新编译咖啡脚本 -如果你问我，有点无赖！一种可怕的方法是通过内联所需的翻译，但这听起来很可怕！

看看这个：[How to access instance variables in CoffeeScript engine inside a Slim template](https://stackoverflow.com/questions/8108511/how-to-access-instance-variables-in-coffeescript-engine-inside-a-slim-template)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T15:14:14.520

@mulus 的建议很有意义，因为您想缩小 js 并缓存它；做 a`.js.erb`不是最佳方式。

无论如何，这是一种快速简便的方法：

我正在使用 Ruby on Rails，所以在我的应用程序布局 ( `app/views/layouts/application.html.erb`) 中，我有以下内容：

```
<head>
  ...
  <meta name='locale' content="<%= params[:locale] %>"><meta>
  ...
</head> 
```

这将允许我在“运行时”将语言环境从 Ruby on Rails 传递给 Javascript。

然后我创建了一个 Translator.coffee 文件

```
class Translator
  @en = {
    internet_connection_lost: "You internet connection has been lost"
    bid_received: "Bid received. New balance $$bid_balance$$"
  }

  @ar = {
    internet_connection_lost: "ra7et el connection"
    bid_received: "Bid received. New balance $$bid_balance$$"
  }

  # you can place the variables above in here too
  # or you can have them in different files. Organize stuff as needed
  @get_translations: (locale) ->
    switch (locale)
      when 'en'
        @en
      when 'ar'
        @ar

  @translate: (val, interpolation) ->
    # get locale from meta
    locale = $("meta[name='locale']").attr("content") || "en"

    # get the translation for the val
    translation = Translator.get_translations(locale)[val]

    # substitute values
    for k,v of interpolation
      translation = translation.replace(k, v)

    return translation

window.Translator = Translator 
```

像这样称呼你`Translator`：

```
message = Translator.translate("bid_received", { "$$bid_balance$$": "$10.00" })
console.log(message) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T20:57:38.003

只是想在这里插话，因为这是我在一些项目中必须定期做的事情。它并不漂亮，但它是迄今为止我能够提出的最佳解决方案。

使用上面的示例代码：

```
networks = $('#account_offering_network_id').html()
select_network_options = new Option("Select Account First", "", true, false) 
```

我将假设您的 HTML 代码如下所示：

```
<select id="account_offering_network_id">
    ...you generate a list of stuff here...
</select> 
```

但您真正的问题是您希望翻译文本“首先选择帐户”。所以这就是我所做的：

```
<select id="account_offering_network_id" data-default-option-text="Select Account First">
  ...you generate a list of stuff here...
</select> 
```

然后在你的咖啡脚本中，你已经有了这个：

```
networks = $('#account_offering_network_id').html() 
```

要访问翻译后的值（您在 HTML / ERB 文件中而不是您的咖啡脚本文件中定义），您可以按以下方式访问它：

```
networks = $('#account_offering_network_id').html()
default_text = $('#account_offering_network_id').attr('data-default-option-text'); 
```

当然，在您的 ERB 文件中，您不会传递硬编码的英文翻译，因为您需要当前的语言环境翻译，因此您的实际选择框定义将如下所示：

```
<select id="account_offering_network_id" data-default-option-text="<%=I18n.t("views.default_select_text")%>">
  ...you generate a list of stuff here...
</select> 
```

这将为您提供您想要在您的咖啡脚本代码中访问的任何内容的翻译版本，该代码可通过您正在使用的任何元素的数据属性访问。

就像我说的 - 它不是很棒，但它工作得非常好，我经常使用它。

# coffeescript - 带有承诺的 AngularJS 服务

> ID：12115151
> 
> 赞同：1
> 
> 时间：2012-08-24T18:58:03.950
> 
> 标签：coffeescript, angularjs, promise

我有一个 AngularJS 服务，它执行以下操作：

1.  它尝试从 Lawnchair 读取用户数据（带有后备的 localStorage 抽象）。

2.  如果用户数据不在 Lawnchair 中，该服务会调用 REST API 来检索它，并将值存储在 Lawnchair 中。

3.  它返回用户数据。

由于 Lawnchair 操作和 REST 调用都是异步的，我认为这是对 Promises 的完美使用。

但是，我似乎无法收回价值。如果我调试，我可以看到从 REST 调用返回的值，并且还存储在 Lawnchair 中。如果我刷新，我可以看到 REST 调用从未进行过，并且 Lawnchair 返回它的版本。

任何提示表示赞赏！

这是我尝试从控制器中访问值的方式：

```
$scope.userdata = UserDataStore.Data() 
```

这是相关服务的咖啡脚本：

```
.factory('UserData', ($resource,$location) ->
    return $resource('http://' + $location.host() + '/Services/userinfo')
  )
.factory('UserDataStore', ($resource, $location, UserData, $q) ->
    GetUserDataFromXhr = () ->
      xhrDeferred = $q.defer()
      UserData.get((userdata) ->
        xhrDeferred.resolve userdata.userInfo
        )
      return xhrDeferred.promise
    GetUserDataFromStore = () ->
      storeDeferred = $q.defer()
      Lawnchair ()->
        @get 'userdata',(result) ->
          storeDeferred.resolve result
      return storeDeferred.promise
    return {
      Clear: () ->
        Lawnchair ()->
          @remove('userdata')
      Data: () ->
        sPromise = GetUserDataFromStore()
        combinedPromise = sPromise.then((result) ->
          if not result
            xPromise =  GetUserDataFromXhr()
            xPromise.then((result) ->
              resultString = JSON.stringify(result)
              userdata = {key:"userdata", value:resultString}
              Lawnchair () ->
                @save userdata
            )
            return xPromise
          else
            return result
        )
        return combinedPromise.promise
      }
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:57:08.470

我发现了几个必须修复的地方：

1.  在返回对象的 Data 方法中，我试图返回 combinePromise.promise，考虑到 combinePromise 已经是内部 .promise 对象，这将不起作用，因此我不断返回 Undefined。

2.  为了让值在我的控制器中使用，我必须在 promise 回调中这样做，如下所示：

    ```
    UserDataStore.Data().then((result) ->
         $scope.userdata = result
      ) 
    ```

# linux - 在Linux上使用文件作为IPC

> ID：12115154
> 
> 赞同：1
> 
> 时间：2012-08-24T18:58:15.423
> 
> 标签：linux, file-io, ipc

我有一位作家，它创建并有时更新带有一些状态信息的文件。阅读器是在 lua 中实现的（所以我只有`io.open`），可能还有 bash （`cat`,`grep`等）。我担心如果更新状态信息（这意味着完整的文件重写）而读者拥有文件的打开句柄会发生什么：会发生什么？[我还读到](https://stackoverflow.com/questions/4624071/pipe-buffer-size-is-4k-or-64k)如果写/读操作低于 4KB，它是原子的：这对我来说非常好，因为状态信息可以很好地适应这样的维度。我可以做这个假设吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:26:35.883

读取或写入在 4Kbytes 以下是原子的，仅适用于管道，而不适用于磁盘文件（原子粒度可能是文件系统块大小，通常为 512 字节）。

在实践中，您可以避免担心此类问题（假设您的状态文件例如小于 512 字节），并且我相信如果作者正在快速打开和写入该文件（特别是，如果您避免使用[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html) -ing a文件并保持打开的文件句柄很长一段时间 - 很多秒 - 然后[write(2) -](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)稍后 - 一次，一个小字符串 - 在里面），你不需要打扰。

如果你是偏执狂，但假设读者（喜欢`grep`）打开一个文件并快速阅读它，你可以写入一个临时文件并[rename(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/rename.2.html)写入时（和[close(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html) -ed） .

正如 Duck 所[建议](https://stackoverflow.com/a/12115496/841108)的那样，将文件锁定在读取器和写入器中也是一种解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:26:44.073

我可能弄错了，在这种情况下有人会纠正我，但我认为外部读者不会关注文件是否正在同时更新。他们将打印（或者可能是 eof 或错误输出）那里的任何内容。

无论如何，为什么不避免整个混乱而只使用文件锁。让作者`flock`（或类似人员）和读者检查锁。如果他们得到锁，他们就知道他们可以阅读。

# c++ - 新的 c++ eclipse 项目上的 STATUS_ACCESS_VIOLATION

> ID：12115158
> 
> 赞同：0
> 
> 时间：2012-08-24T18:58:27.817
> 
> 标签：c++, windows, eclipse

我是 C++ 的新手，我下载了用于 C++ 开发的 Eclipse，我也下载了 MinGW，因为我想开发 cocos2d-x 应用程序。

我的问题是，当我尝试创建一个新的 C++ 项目时，我从 Windows 得到一个窗口，显示 seq.exe 停止工作，并在其中创建了 seq.exe.stackdump 文件：

> MSYS-1.0.17 内部版本：2011-04-24 23:39 异常：在 eip=00000000 eax=6855477C ebx=6855022C ecx=0001B008 edx=00000080 esi=00000000 edi=6885500DespEC000 时的STATUS_ACCESS_VIOLATION=285500DespEC008 \MinGW\msys\1.0\bin\seq.exe cs=0023 ds=002B es=002B fs=0053 gs=002B ss=002B 堆栈跟踪：帧函数 Args 堆栈跟踪结束

我怎样才能解决这个问题？提前致谢。哈维尔-

# c++ - 什么是 Bison，它为什么有用？

> ID：12115159
> 
> 赞同：0
> 
> 时间：2012-08-24T18:58:31.703
> 
> 标签：c++, c, bison

我已经编程了几年`Bison`，顺便看到了这个名字，但从来没有费心去问它为什么是或者为什么可能需要它。Bison 如何影响我的编程方式，它能让我的 C/C++ 代码更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:07:07.000

Bison 是一个解析器生成器。它以类似于 Backus-Naur 表示法的形式接受输入，并输出代码以根据该语法解析输入。它使您可以比其他方式更轻松地编写解析器。不必手动执行所有操作，您只需指定语法规则以及当它匹配其中一个规则时想要发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:05:27.313

[GNU Bison](http://en.wikipedia.org/wiki/GNU_bison)是我所知道的唯一与编程相关的 Bison。它不会使您的代码更快，而且您可能永远不需要它。但是，学习一些编译器理论，甚至自己编写一个简单的编译器，是一种非常棒的学习体验，它确实会影响您的编程方式、您对计算机编程的看法以及很多类似的事情。如果你喜欢形式语言和自动机，你就会喜欢编译器理论；如果您一般不喜欢理论，那可能不适合您。如果您有兴趣，有很多关于 Stackoverflow 入门书籍的问题。

哦，有时程序员确实需要一些更复杂的解析工作等，了解解析器生成器是一个巨大的福音，而不是按照一种天真的方法手动编写所有内容。

# ubuntu - 在 Ubuntu 上编译 JZMQ

> ID：12115160
> 
> 赞同：20
> 
> 时间：2012-08-24T18:58:40.080
> 
> 标签：ubuntu, makefile, zeromq, jzmq

大家好，我正在尝试按照以下位置的说明进行操作：[https](https://github.com/nathanmarz/storm/wiki/Installing-native-dependencies) ://github.com/nathanmarz/storm/wiki/Installing-native-dependencies用于在 Ubuntu 12.04 机器上安装 Zero MQ 作为 Storm 的依赖项。但是，当尝试运行 make 命令时，出现以下错误

```
Making all in src
make[1]: Entering directory `/home/localadmin/jzmq/src'
make[1]: *** No rule to make target `classdist_noinst.stamp', needed by `org/zeromq/ZMQ.class'.  Stop.
make[1]: Leaving directory `/home/localadmin/jzmq/src'
make: *** [all-recursive] Error 1 
```

有谁知道这个错误来自哪里以及我将如何纠正它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-28T13:53:17.053

显然，在 Ubuntu 12.04 上编译 JZMQ 比我意识到的要复杂一些。但是，我花时间写出我找到的解决方案。您可以在以下位置找到它：[在 Ubuntu 12.04 上安装 Storm 的本机依赖项](http://www.christophermaness.com/installing-storms-native-dependencies-on-ubuntu-1204)。为了时间的缘故，这里是说明：

1.  您需要确保首先安装了一些软件包：build-essential、uuid-dev、libtool、git、autoconf、openjdk-6-jdk
2.  创建一个指向您刚刚安装的 jdk 的 JAVA_HOME 变量。应该在 /usr/lib/jvm 目录下

    `JAVA_HOME=/usr/lib/jvm/(your jdk folder); export JAVA_HOME`

3.  运行以下命令安装零 MQ：

    ```
    wget http://download.zeromq.org/zeromq-2.1.7.tar.gz
    tar -xzf zeromq-2.1.7.tar.gz
    cd zeromq-2.1.7
    ./configure
    make
    sudo make install 
    ```

4.  下载 JZMQ 并导航到 src 目录

    ```
    git clone https://github.com/nathanmarz/jzmq.git
    cd jzmq
    cd src 
    ```

5.  进入 src 目录后，运行 touch 命令创建一个文件，然后重新定义类路径。

    ```
    touch classdist_noinst.stamp
    CLASSPATH=.:./.:$CLASSPATH javac -d . org/zeromq/ZMQ.java org/zeromq/ZMQException.java org/zeromq/ZMQQueue.java org/zeromq/ZMQForwarder.java org/zeromq/ZMQStreamer.java 
    ```

    6.导航回/jzmq并运行make

    ```
    cd ..
    ./autogen.sh 
    If you get this error "autogen.sh: error: could not find pkg-config.pkg-config is required to run autogen.sh", then install pkg-config. In Ubuntu sudo apt-get install pkg-config and again run the above command.
    ./configure
    make
    sudo make install 
    ```

其中部分内容来自[Storm - 安装本机依赖](https://github.com/nathanmarz/storm/wiki/Installing-native-dependencies)项和[Tijun - 如何在 Mac OS X Lion 中构建 jzmq](http://tjun.jp/blog/2012/04/how-to-build-jzmq-in-mac-os-x-lion/)。谢谢大家把你的拼图拼起来，我刚刚把它们缝合在一起。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T15:20:14.687

现在在我添加到我的冻结 jzmq 存储库的 zeromq/jzmq 存储库中对此进行了修复：[https ://github.com/halfaleague/jzmq](https://github.com/halfaleague/jzmq)

现在，您可以按照说明进行操作（`./autogen.sh`、`./configure`、`make`、`make install`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T19:02:39.593

为什么不直接使用包管理器来安装呢？

```
sudo apt-get install libzmq0 libzmq-dev zeromq-bin 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-03T21:38:56.683

你需要`classdist_noinst.stamp`用`classnoinst.stamp`in替换`jzmq/src/**Makefile.am**`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-10T18:16:08.533

对于 Ubuntu 13.04 (Raring)，我需要在 ./autogen.sh 步骤之前运行以下命令：

> > sed -i 's/classdist_noinst.stamp/classnoinst.stamp/g' src/Makefile.am

我在这里找到了这个解决方法，我认为这个线程可能对任何有这种问题的人有用：[https ://github.com/zeromq/jzmq/issues/114](https://github.com/zeromq/jzmq/issues/114)

# jquery - JQGrid。如何防止节点在单击时崩溃？

> ID：12115162
> 
> 赞同：0
> 
> 时间：2012-08-24T18:58:43.120
> 
> 标签：jquery, jqgrid

所以我创建了一个分层网格来填充和自动扩展所有节点（我将它用作报告显示。我们不想让用户折叠节点）

但是，删除“折叠”图标仍然会在父节点左侧留下一个小“热点”，如果用户不小心点击它，那么记录将出现“消失”。

如何禁用“折叠”功能？

[http://jsfiddle.net/KevinGabbert/ZB2De/3/](http://jsfiddle.net/KevinGabbert/ZB2De/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:40:05.177

知道了..

因为我在网格时自动展开所有节点，所以我可以在展开后立即**取消绑定**事件。

前：

```
$(".sgcollapsed","#tableToLoad").each(function() {
        $(this).trigger("click");
}); 
```

后：

```
$(".sgcollapsed","#tableToLoad").each(function() {
        $(this).trigger("click").unbind('click');
}); 
```

[http://jsfiddle.net/KevinGabbert/ZB2De/11/](http://jsfiddle.net/KevinGabbert/ZB2De/11/)

# android - Android 模拟器无法启动

> ID：12115165
> 
> 赞同：0
> 
> 时间：2012-08-24T18:58:54.493
> 
> 标签：android, android-emulator, emulation

我真的需要一些帮助..我做了很多搜索和谷歌搜索，但没有一个解决方案适合我..直到 2-3 个月前，我可以让模拟器在合适的时间运行..但最近模拟器不会启动..它将永远停留在“android”屏幕中..我已经卸载并重新安装了 sdk 2-3 次卸载后我还检查了系统并重新启动了潜在的错误..但没有结果我已经安装了所有必要的文件，图像等..我试过cmd启动没有区别..禁用启动动画，仍然没有..我什至整夜离开模拟器加载但仍然没有成功..我能想到的唯一解决方案是从头开始全新安装 Windows .. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:05:52.550

你能跑吗

> adb -e logcat

指挥部，看看那里有没有什么有意义的显示？该命令访问当前运行的模拟器的日志。

它可能会为引导循环提供更多信息。

# c# - 为什么这个 async / await 代码会生成“......并非所有代码路径都返回一个值”？

> ID：12115168
> 
> 赞同：12
> 
> 时间：2012-08-24T18:59:06.413
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, c#-5.0

希望这不是重复，但这里有 5000 多个问题，“并非所有代码路径都返回值”！

很简单，为什么这个带有非泛型实现的方法编译得很好：

```
 public static async Task TimeoutAfter(this Task task, int millisecondsTimeout)
    {
        if (task == await Task.WhenAny(task, Task.Delay(millisecondsTimeout)))
            await task;
        else
            throw new TimeoutException();
    } 
```

虽然这种使方法通用的尝试会产生`Return state missing`/ ...`not all code paths return a value`警告/错误？：

```
 public static async Task<T> TimeoutAfter<T>(this Task<T> task, int millisecondsTimeout)
    {
        if (task == await Task.WhenAny(task, Task.Delay(millisecondsTimeout)))
            await task;
        else
            throw new TimeoutException();
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T19:13:01.153

非泛型`Task`类型在某种程度上等同于可等待的 void 方法。就像 void 方法一样，您*不能*从返回类型为 的方法返回任何内容`Task`，这就是第一个示例编译的原因。但是，第二个示例需要一个泛型类型的返回值，并且您没有在等待另一个调用的路径中提供一个返回值。

引用关键字的[MSDN 参考](http://msdn.microsoft.com/en-us/library/hh156513.aspx)，特别是关于返回类型。`async`

> 如果在方法完成时没有返回有意义的值，则使用 Task。也就是说，对该方法的调用会返回一个 Task，但是当 Task 完成时，任何等待 Task 的 await 表达式的计算结果都为 void。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T19:09:01.890

在您提供的第二个示例中，您没有返回任何内容。（有关原因，请参阅 Chris Hannon 的回答）。

```
public static async Task<T> TimeoutAfter<T>(this Task<T> task, int millisecondsTimeout) {
    if (task == await Task.WhenAny(task, Task.Delay(millisecondsTimeout)))
        return await task; // return the Task of T
    else
        throw new TimeoutException();
} 
```

除了 @ChrisHannon 所说的，来自[await 文档](http://msdn.microsoft.com/en-us/library/hh156528.aspx)。

> ...如果`await`应用于返回 a 的方法调用的结果`Task<TResult>`，则 await 表达式的类型是`TResult`。如果`await`应用于返回 a 的方法调用的结果`Task`，则 await 表达式的类型为`void`。...

# javascript - jQuery插件冲突

> ID：12115174
> 
> 赞同：2
> 
> 时间：2012-08-24T18:59:41.283
> 
> 标签：javascript, web, conflict, jquery

你们如何解决 Jquery 插件之间的冲突。冲突是两个或多个 Jquery 插件（例如文件上传插件）单独正常工作但在包含第二个插件时导致错误或意外行为的情况。

我现在有这个问题，我正在考虑使用 iframe 将我的页面部分与其他部分隔离开来。但我想尽可能避免这种情况以解决这些冲突。

审核插件代码是不可行的，因为它有大量的代码，并且需要考虑较短的开发时间。

我不能使用 jquery.noConflict 因为我必须触发它，然后在我的代码的任何一行中`$`替换它。`Jquery`编辑插件是不可行的。我认为 jquery.noConflict 不适用于插件？它只适用于 javascript/jquery 库？我不是指图书馆。只是像滑块、画廊、文件上传器等插件。

我用了：

```
(function($) {
jQuery.noConflict(); 
```

});

已经..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:34:42.613

在网上搜索了一番后，我找到了一些资源

1.  [jQuery插件冲突](https://stackoverflow.com/questions/10943631/jquery-plugin-conflict)

2.  [如何解决这个 jQuery 插件冲突？](https://stackoverflow.com/questions/6531227/how-do-i-solve-this-jquery-plugins-conflict)

3.  [http://forum.jquery.com/topic/jquery-plugins-conflict](http://forum.jquery.com/topic/jquery-plugins-conflict)

最后一个 [http://www.jotform.com/help/130-Fixing-Jquery-Plugin-Conflicts-jCarousel](http://www.jotform.com/help/130-Fixing-Jquery-Plugin-Conflicts-jCarousel)

似乎每个人都建议使用`noconflict`，但除了最后一个说它有效的人 - 我看不出它应该有效的原因，因为[在文档中](http://api.jquery.com/jQuery.noConflict/)JQuery 解释说它适用于不使用 JQuery 但与它发生冲突的库. （请参阅我在此处粘贴的第三个资源）。

无论如何，似乎最好的选择是深入研究代码并对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:42:00.887

我遇到了 jquery 冲突的问题，但我的情况是我也使用了prototype.js。我为此制定了一个解决方案。如果有帮助，这里是一个指针结帐。

当某些其他插件也使用“$”时，会发生 jquery 冲突。因此我们需要定义[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)

以便在这种情况下使用其他引用“jQuery”调用所有方法。

尝试在页面上包含脚本文件，如下所示。

1.  包括所有 jQuery 文件（依赖于 jquery 的库和所有插件）。
2.  触发 jQuery.noConflict();
3.  包括所有其他库/插件。
4.  在调用 jquery 方法的任何地方都使用“jQuery”而不是“$”

希望这可以帮助你..

# android - Android工具内部出错，检查控制台

> ID：12115176
> 
> 赞同：1
> 
> 时间：2012-08-24T18:59:46.850
> 
> 标签：android, processing, processing-ide

使用 Processing IDE 为 Android 编写处理应用程序时，我有时会遇到这个问题。

在 Processing IDE 输出窗口中通常是这样的：

```
BUILD FAILED
/Users/xxxxx/Tools/android-sdk-macosx/tools/ant/build.xml:850: The following error occurred while executing this line:
/Users/xxxxx/Tools/android-sdk-macosx/tools/ant/build.xml:852: The following error occurred while executing this line:
/Users/xxxxx/Tools/android-sdk-macosx/tools/ant/build.xml:864: The following error occurred while executing this line:
/Users/xxxxx/Tools/android-sdk-macosx/tools/ant/build.xml:266: null returned: 1 
```

在大多数情况下，我可以回溯并纠正它，但这不是一个非常有用的错误报告。我试图弄清楚我如何“检查控制台”，但在这方面失败了。

这个神话般的控制台在哪里以及如何“检查”它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:01:42.493

您是否在问如何检查 Android DDMS 调试器（允许您查看设备上的进程和 CPU 等）？或者如何打开 OS X 控制台（它只会重复处理控制台所说的......）？

对于 DDMS，在 SDK 的 /tools 目录中运行 DDMS shell。对于 OSX，打开 /Applications/Utilities 中的“Console.app”

一般来说，虽然处理中的这个错误消息只是意味着它没有编译 - 即。您的代码有问题...（NPE等）。

# netbeans - 在 netbeans 7.2 中 - 更改 EOL 字符的颜色

> ID：12115180
> 
> 赞同：1
> 
> 时间：2012-08-24T19:00:19.687
> 
> 标签：netbeans, netbeans-7, netbeans-7.2

是否可以更改 netbeans 7.2 eol 字符的颜色？

如此处所示：

![在此处输入图像描述](../Images/910e2e15c72ab39ce1f33cf225d71038.png)

我希望它像空格字符一样是浅灰色 - 深黑色非常分散注意力（恕我直言）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:45:39.093

在**NetBeans 7.1.2**中，您可以通过执行以下操作来更改颜色：

*   *工具*->*选项*->*字体和颜色*

*   选择*Syntax*选项卡，然后单击*Whitespace*。

您应该能够通过从右侧面板的可用字符中选择它来更改 eol 字符的颜色。

我想这也适用于 NetBeans 7.2。

* * *

PS：这是一个老问题，但我认为无论如何它应该有一个答案:)

# google-maps-api-3 - google maps api v3 中 infoWindow 的大小。什么是正确的解决方案？

> ID：12115183
> 
> 赞同：12
> 
> 时间：2012-08-24T19:00:30.747
> 
> 标签：google-maps-api-3

我需要更改谷歌地图 infoWindow 的宽度和高度，我看到了这个主题[Google Map .InfoWindow Set Height and Width](https://stackoverflow.com/questions/5858898/google-map-infowindow-set-height-and-width)。我发现它的解决方案不起作用。即使是标准`infoWindow = new google.maps.InfoWindow({maxWidth: '50px'})`也行不通。

那么什么是解决方案？如何更改 infoWindow 的宽度和高度？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T19:46:16.497

我总是在信息窗口中使用一个 div，它最适合我。然后你只需通过 css 设置 div 的大小。

这是一个链接。：

[Google Maps API v3：InfoWindow 大小不正确](https://stackoverflow.com/questions/1554893/google-maps-api-v3-infowindow-not-sizing-correctly)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-24T19:04:47.953

这对我有用：

```
new google.maps.InfoWindow({ maxWidth: 320 }); 
```

删除 ' ' 和 px 说明符，我相信它也适合你。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-10T14:41:29.547

GoogleMaps - **API**在`gm-style-iw`. `InfoWindow`所以你可以简单地通过**CSS**改变大小，而不需要额外的标记：

```
var infowindow = new google.maps.InfoWindow({
    content: contentString
});

.gm-style-iw {
    height: 100px;
    width: 300px;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-26T19:09:32.450

我已经添加并且它正在工作

```
var infowindow = new google.maps.InfoWindow({
content:'<div style="width:200px; height:100px">Some text</div>'
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-09T12:24:05.987

```
infowindow = new google.maps.InfoWindow({
    content: "",
    maxWidth: 200 ,
    maxHeight: 400
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-12T19:18:33.667

我发现除非我用 强制样式，否则`!important`它不起作用。所以：

```
.gm-style-iw {
    height: 100px;
    width: 300px !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-04T22:34:01.640

我知道这是一个老问题，但我想添加一个响应式解决方案。这将很好地适应小型设备。

```
@media (max-width: 413px) {
// Set gm container to screen width leaving 20px pad on each side
  .gm-style-iw {
    width: calc(100vw - 40px)!important;
    min-width: unset!important;
    max-width: unset!important;
  }

  // Next is the container Div that you create on your infoWindow function
  // on google example var contentString = '<div id="content">'+

  .your-main-container-class {
    width: calc(100vw - 80px);
    padding: 8px 0;
    margin: auto;
  }
} 
```

然后对于更大的屏幕，只需按照谷歌的建议设置你的宽度

```
.your-main-container-class{
  width: 316px; // Your desire width
  padding: 8px 0 8px 8px; // Play with padding if you have a custom close button
} 
```

# ruby-on-rails - 更改 git forked repo 并通过 git URL 获取更新后的代码

> ID：12115185
> 
> 赞同：0
> 
> 时间：2012-08-24T19:00:31.480
> 
> 标签：ruby-on-rails, github, resque, gemfile

我已经从 Github 分叉了 resque repo，并对标签 v1.20.0 进行了一些更改。然后我想使用 Gem 文件中的 git URL 从 Github 获取更改后的代码。

gem 'resque', :git => "git://github.com/forked_repo/resque.git", :tag => "v1.20.0"

实际上，当我进行更改时，在分叉的 repo 中创建了一个带有 tag_name 的分支。所以，我也在 Gem 文件中尝试了以下行。

gem 'resque', :git => "git://github.com/forked_repo/resque.git", :branch => "v1.20.0"

但是，我没有得到我已经改变的新变化（进入捆绑器）。我得到了 v1.20.0 的 repo 代码，没有我的更改。

我已经登录到 Github 并在那里编辑了更改。

请在这里提出解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:14:26.700

您可以将其指向具有您最近更改的特定提交：

```
gem 'resque', :git => "git://github.com/forked_repo/resque.git", :ref => "abcdef" 
```

只要确保你做一个`bundle update resque`之后。

# scala - 用。。。来代替 \”

> ID：12115187
> 
> 赞同：9
> 
> 时间：2012-08-24T19:00:43.400
> 
> 标签：scala

如何将“替换为\”。

这是我正在尝试的：

```
def main(args:Array[String]) = {      
  val line:String = "replace \" quote";
  println(line);
  val updatedLine = line.replaceAll("\"" , "\\\"");
  println(updatedLine);
} 
```

输出 ：

```
replace " quote
replace " quote 
```

输出应该是：

```
replace " quote
replace \" quote 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T02:09:43.733

使用 StringOps 类的“replaceAllLiterally”方法。这将替换参数的所有文字出现：

```
scala> val line:String = "replace \" quote"
line: String = replace " quote

scala> line.replaceAllLiterally("\"", "\\\"")
res8: String = replace \" quote 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T19:06:34.423

还有两个`\\`做这项工作：

```
scala>  line.replaceAll("\"" , "\\\\\"");
res5: java.lang.String = replace \" quote 
```

这里的问题是有两个“层”逃脱了字符串。第一层是编译器，我们在 REPL 中很容易看到：

```
scala> "\""
res0: java.lang.String = "

scala> "\\"
res1: java.lang.String = \

scala> "\\\""
res2: java.lang.String = \"

scala> val line:String = "replace \" quote";
line: String = replace " quote 
```

第二层是正则表达式解释器。这一个更难看到，但可以通过您的示例中的 apply 看到：

```
scala>  line.replaceAll("\"" , "\\\"");
res5: java.lang.String = replace " quote 
```

什么注册。exp。解释器真正收到的是\"，它被解释为只有". 所以，我们需要注册。exp。接收 \\"。为了让编译器给我们 \ 我们需要写 \\.

让我们看一下转义：

*   正确的情况：\\\" 编译器看到\"，正则表达式看到\"。
*   错误情况：\\" 编译器看到\"，正则表达式看到"。

尽管非常直截了当，但它可能有点令人困惑。

正如@sschaef 所指出的，另一种使用 """ 三引号的替代方法，这种形式的字符串不会被编译器转义：

```
scala>  line.replaceAll("\"" , """\\"""");
res6: java.lang.String = replace \" quote 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T16:45:36.757

@pedrofurla 很好地解释了你为什么看到你所做的行为。您的问题的另一个解决方案是使用带有 scala 的三引号字符的原始字符串。一对三引号之间的任何内容都被视为原始字符串，Scala 编译器不会对其进行解释。因此：

```
scala> line.replaceAll("\"", """\\"""")
res1: String = replace \" quote 
```

三引号与 结合使用`stripMargin`是一种将原始字符串嵌入代码的强大方法。例如：

```
val foo = """
        |hocus
        |pocus""".stripMargin 
```

产生字符串：`"\nhocus\npocus"`

# json - JMSSerializerBundle的响应内容必须是字符串或实现__toString()的对象"

> ID：12115190
> 
> 赞同：1
> 
> 时间：2012-08-24T19:00:50.973
> 
> 标签：json, serialization, symfony, bundle

我遇到了 JMSSerializerBundle 的问题。

我在那里有我的实​​体 AGVote：

```
<?php

namespace K\AGBundle\Entity;

use JMS\SerializerBundle\Annotation\Type;
use JMS\SerializerBundle\Annotation\Accessor;
use JMS\SerializerBundle\Annotation\AccessType;
use JMS\SerializerBundle\Annotation\Exclude;
use JMS\SerializerBundle\Annotation\ExclusionPolicy;
use Doctrine\ORM\Mapping as ORM;

/**
 * K\AGBundle\Entity\AGVote
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 * 
 */

/*
 * 
/** @AccessType("public_method") */

class AGVote
{

   /**
* @Type("integer") 
* @Accessor(getter="getId") 
*/

 /**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
public $id;

 /**
 * @ORM\Column(type="text")
  * @Accessor(getter="getQuestion")
  * @Type("text")
 */
public $question;

/**
 * @ORM\Column(type="smallint")
 * @Type("integer")
 * @Accessor(getter="getActif")
 */
public $actif;

 /**
 * @ORM\ManyToOne(targetEntity="\K\KBundle\Entity\Users", cascade={"all"})
  * @Exclude
 */
protected $users;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set question
 * Nb : Only AG admin can set a question
 * @param text $question
 */
public function setQuestion($question)
{
    $this->question = $question;
}

/**
 * Get question
 *
 * @return text 
 */
public function getquestion()
{
    return $this->question;
}

/**
 * Set actif
 *
 * @param smallint $actif
 */
public function setActif($actif)
{
    $this->actif = $actif;
}

/**
 * Get actif
 *
 * @return smallint
 */
public function getActif()
{
    return $this->actif;
}

 /**
 * Set Users
 *
 * @param K\KBundle\Entity\Province $Users
 */
public function setUsers(\K\KBundle\Entity\Users $users)
{
    $this->users = $users;
}

/**
 * Get Users
 *
 * @return K\KBundle\Entity\Users
 */
public function getUsers()
{
    return $this->users;
}

  public function __toString()
{
   return $this->getquestion();
}

} 
```

我制作了一个控制器，它在 Json 中向我返回了一个 AGVote 实体：

```
 public function jsonvoteAction($id) {
  $em = $this->getDoctrine()->getEntityManager();
  $entity = $em->getRepository('KAGBundle:AGVote')->findOneById($id);

  if ($entity->getActif() == 1) {
     $serializer = $this->container->get('serializer');
     $serializer->serialize($entity, 'json');
     $response = new Response($serializer);

     return $reponse;
     }
     } 
```

我在 Json 中有一个响应，但它是一个错误说：

> [{"message":"响应内容必须是实现__toString()的字符串或对象，\"object\"给出。","class":"UnexpectedValueException","trace":

事实上，我已经在我的所有实体中实现了一个 __toString() 方法。

有人有想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T22:47:04.630

When you call the `serialize` method on the `$serializer`, it returns the serialized data (a string). The problem is that you do not use this returned value, and create the response with the `$serializer` itself, which makes no sense.

First, store the serialized $entity:

```
$serializedEntity = $serializer->serialize($entity, 'json'); 
```

Then, you can return a new response using with string:

```
return new Response($serializedEntity, 200, array('Content-Type' => 'application/json')); 
```

# haskell - GHCI字数限制？

> ID：12115193
> 
> 赞同：1
> 
> 时间：2012-08-24T19:01:06.503
> 
> 标签：haskell, emacs, runhaskell

我正在使用`ghci`Emacs' 进行一些增量开发`run-haskell`。每隔一段时间，我就会收到一个看起来像的错误

```
<interactive>:[line]:[character]: _Lexical error at character '\EOT' 
```

设置一个或两个中间变量会得到一个有效的响应，并且我正在处理的文件可以正确加载和编译。减少字符数也有效；我似乎能够达到的最大值是 252。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:20:29.070

这是几年前在 GHC 中作为一个错误[提交并关闭的，所以看起来在 GHCi 端修复它似乎没有任何风险。](http://hackage.haskell.org/trac/ghc/ticket/3256)（搜索“_Lexical error at character '\EOT'”会给出一些其他结果（[例如](http://comments.gmane.org/gmane.comp.lang.agda/914)），但我无法确定它们的适用性。）

# c++ - 赋值操作在 C 中隐式计算为什么布尔值？

> ID：12115199
> 
> 赞同：2
> 
> 时间：2012-08-24T19:01:35.720
> 
> 标签：c++, c, conditional-statements

我最近偶然发现了这段代码：

```
void strcat( char* dest, char* src )
{
     while (*dest) dest++;
     while (*dest++ = *src++);
} 
```

看起来该`*dest++ = *src++`操作被用作 while 循环的条件。这个赋值操作如何转换为布尔值？我很难理解它。

此外，相同的语法在 C++ 中是否有效？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T19:02:50.420

在 C 语言中，逻辑语句中的非零值计为*真*，零计为*假*。

而任何赋值语句的结果都是赋值后左操作数的值。

因此在第二个循环中，如果分配的值为`0`，则条件的结果为*false*。在第一个循环中，如果指向变量*本身*的值为`0`，则条件为*false*。

此语法在 C++ 中也有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:06:39.387

> 赋值操作在 C 中隐式计算为什么布尔值？

赋值操作对被赋值的变量求值（左侧）：

```
int i = 0;
int j = (i = i+5); // j == 5 | (i = i+5) assigns 5, then evaluates to i 
```

现在，当用作条件时，整数值在非零时计算为*真，如果为零，则计算为**假*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:04:26.143

计算结果为 0 的表达式为假。计算结果为非零的表达式为真。

当 *dest 等于 0 时，第一个 while 循环将终止。

与第二个类似。

# r - 每 15 分钟绘制点

> ID：12115201
> 
> 赞同：1
> 
> 时间：2012-08-24T19:01:50.660
> 
> 标签：r, statistics

我有一个文本文件，其中包含以秒为单位的数字（浮点类型）。我希望代表每 15 分钟出现的次数。我的文件样本是：

```
0.128766
2.888977
25.087900
102.787657
400.654768
879.090874
903.786754
1367.098789
1456.678567
1786.564569
1909.567567 
```

前 900 秒（15 分钟），有 6 次出现。我想先在 y 轴上绘制那个点。然后从 900-1800（接下来的 15 分钟），有 4 次出现。所以，接下来我想在我的 y 轴上绘制 4。这应该继续...

我知道基本的 plot() 函数，但我不知道如何每 15 分钟绘制一次。如果存在链接，请引导我访问该链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:08:14.533

使用`findInterval()`：

```
counts <- table(findInterval(x, seq(0, max(x), 900)))
counts

1 2 3 
6 4 1 
```

很容易绘制：

```
plot(counts) 
```

![在此处输入图像描述](../Images/dbac09b9ad17fd37977879e28011054f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:05:04.090

以安德烈的回答为基础。您可以添加`plot(counts, type = 'p')`到绘图点或`plot(counts, type = 'l')`绘制连接线。如果要绘制计数曲线，则需要使用`?lm`或对其进行建模`?nls`。

# jquery-mobile - 在 jQuery Mobile 选择菜单旁边添加图像

> ID：12115207
> 
> 赞同：6
> 
> 时间：2012-08-24T19:02:28.770
> 
> 标签：jquery-mobile

是否可以在下图中的 jQuery Mobile 选择菜单旁边添加某种图标？如果是这样，所需的图像尺寸是多少？提前致谢！

![在此处输入图像描述](../Images/9d33146541fd2062828090f0be410f9d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T02:41:20.490

您可以通过将以下参数添加到您希望图标出现在其中的元素中，将图标添加到几乎任何东西：

```
 data-icon="arrow-l" data-iconpos="left" 
```

where`arrow-l`指定一个指向左的箭头。

如果您想指定自己的图标/图像而不是使用 jQuery Mobile 提供的图标/图像，那么您可以在 li 内（在您的文本之前）添加一个图像，其类为`ui-li-icon`or `ui-li-thumb`：

```
<li>
    <img src="images/gf.png" alt="France" class="ui-li-icon">
    <a href="#">Social Triangle</a>
</li> 
```

[ui-li-icon](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-icons.html)，似乎被限制为 16px X 16px，并使用以下 css 条件：

```
ui-li-icon {
max-height: 16px;
max-width: 16px;
} 
```

[ui-li-thumb](http://jquerymobile.com/test/docs/lists/lists-thumbnails.html)，似乎限制为 80px X 80px，并使用以下 css 条件：

```
.ui-li-thumb {
max-height: 80px;
max-width: 80px;
} 
```

如果您查看上面指向 jQuery Mobile 文档的链接，它会更详细地向您展示如何使用它们，只需查看源代码：

# asp-classic - 如何加载动态生成的 XML 文件？

> ID：12115208
> 
> 赞同：0
> 
> 时间：2012-08-24T19:02:29.277
> 
> 标签：asp-classic, jscript

假设我有一个文件包含：

```
<%
    Response.write("<my_tag>value</my_tag>")
%> 
```

如果我将它作为普通 XML 文件获取，我会收到一条错误消息，告诉我 XML 格式不正确，因为它以“<%”开头。如何读取动态生成的 XML？

**编辑：**

事实上，那是一种错觉。Server.Execute 方法只打印另一个文件。我能做些什么 ？如何将 ASP 页面的结果放入我可以通过 loadXML 方法读取的字符串中？或者我怎么能在加载文件之前处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:16:18.283

给它一个 ASP 知道要处理的文件扩展名，或者告诉 ASP 处理您正在使用的文件扩展名。服务器必须知道处理文件并为您提供动态结果。它不会将每个文件都视为经典的 ASP 文件，您必须告诉它如何处理该文件，就好像您正在使用非标准的 ASP 扩展名一样。您可以通过将经典的 ASP 处理程序映射到您尝试 HTTP GET 的文件类型来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:34:47.647

使用 .asp 扩展名并设置内容类型：

```
<%
Response.CharSet = "utf-8"
Response.Buffer = True
Response.ContentType="text/xml"

Response.Write "<?xml version=""1.0"" encoding=""utf-8""?>"
Response.Write "<my_tag>value</my_tag>"

Response.Flush
%> 
```

你可以看看这里：[http ://www.w3.org/TR/REC-xml/](http://www.w3.org/TR/REC-xml/)

# c++ - 错误 1 错误 C2039：“getIterator”：不是“DoublyLinkedList”的成员

> ID：12115211
> 
> 赞同：-1
> 
> 时间：2012-08-24T19:02:35.480
> 
> 标签：c++, doubly-linked-list

嘿，我遇到了这个错误，但正如我将向您展示的那样，getIterator 方法显然位于 DoublyLinkedList.h 中。

任何人都可以看到问题吗？如果需要，我会发布标题。

声明中的错误

```
DoublyLinkedList<int>* statsList = new DoublyLinkedList<int>;
DoublyListIterator<Stats> statsIterator = statsList->getIterator();<------error 
```

获取迭代器

```
//getIterator
    DoublyListIterator<Datatype> getIterator()
    {
        return DoublyListIterator<Datatype>(this, m_head);
    } 
```

头文件

```
#ifndef DOUBLYLINKEDLIST_H
#define DOUBLYLINKEDLIST_H

#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
using namespace std;

template<class Datatype> class DoublyListNode;
template<class Datatype> class DoublyLinkedList;
template<class Datatype> class DoublyListIterator;

// -------------------------------------------------------
// Name:        DListNode
// Description: This is the Doubly-linked list node class.
// -------------------------------------------------------
template<class Datatype>
class DListNode
{
public:
    Datatype m_data;
    DListNode<Datatype>* m_next;
    DListNode<Datatype>* m_prev;

    // ----------------------------------------------------------------
    //  Name:           InsertAfter
    //  Description:    This adds a node after the current node.
    //  Arguments:      p_data - The data to store in the new node.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void InsertAfter(Datatype p_data)
    {
        // create the new node.
        DListNode<Datatype>* newNode= new DListNode<Datatype>;
        newNode->m_data = p_data;
        // make the new node point to the next node.
        newNode->m_next = m_next;
        newNode->m_prev = this;

        // make the node before it, point to the new node
        if(m_next != 0)
            m_next->m_prev= newNode;

        m_next = newNode;
    }
    // ----------------------------------------------------------------
    //  Name:           InsertBefore
    //  Description:    This adds a node before the current node.
    //  Arguments:      p_data - The data to store in the new node.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void InsertBefore(Datatype p_data)
    {
        //Create new Node
        DListNode<Datatype>* newNode = new DListNode<Datatype>;
        newNode->m_data = p_data;
        //Set up new Node Pointers
        newNode->m_next = this;
        newNode->m_prev = m_prev;
        //if theres a node before it, make it point to new node
        if(m_prev != 0)
            m_prev->m_next = newNode;

        m_prev = newNode;
    }
};
// -------------------------------------------------------------
// Name:        DLinkedList
// Description: This is the Doubly-linked list container class.
// -------------------------------------------------------------
template<class Datatype>
class DoublyLinkedList
{
public:
    DListNode<Datatype>* m_head;
    DListNode<Datatype>* m_tail;
    int m_count;

    // -----------------------------------------------------------------------------------------
    //  Name:           DLinkedList
    //  Description:    Constructor, creates a head node, tail node & a count.
    //  Arguments:      m_head: the head node of the list.
    //                  m_tail: the tail node of the list.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    DoublyLinkedList()
    {
        m_head= 0;
        m_tail= 0;
        m_count= 0;
    }

    // -----------------------------------------------------------------------------------------
    //  Name:           ~DLinkedList
    //  Description:    Destructor, creates a pointer for the head node,
    //                  deletes the value in the list and iterates.
    //  Arguments:      m_head: the head node of the list.
    //                  itr:    moves through the list.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    ~DoublyLinkedList()
    {
        // temporary node pointers.
        DListNode<Datatype>* itr= m_head;
        DListNode<Datatype>* next;
        while(itr != 0)
        {
            // save the pointer to the next node.
            next = itr->m_next;
            // delete the current node.
            delete itr;
            // make the next node the current node.
            itr= next;
        }
    }
    // ----------------------------------------------------------------
    //  Name:           Length
    //  Description:    Gets the size of the list
    //  Arguments:      None.
    //  Return Value:   size of the list.
    // ----------------------------------------------------------------
    int Length()
    {
        return m_count;
    }
    // -------------------------------------------------------------------------------------
    //  Name:           Append
    //  Description:    This adds a node to the end of the list, then points to the newNode
    //  Arguments:      p_data - The data to store in the new node.
    //                  m_count is increased.
    //  Return Value:   None.
    // -------------------------------------------------------------------------------------
    void Append(Datatype p_data)
    {
        if(m_head == 0)
        {
            // create a new head node.
            m_head= m_tail= new DListNode<Datatype>;
            m_head->m_data= p_data;
            m_head->m_next= 0;
            m_head->m_prev= 0;
        }
        else
        {
            // insert a new node after the tail and reset the tail.
            m_tail->InsertAfter(p_data);
            m_tail= m_tail->m_next;
        }
        m_count++;
    }
    // -----------------------------------------------------------------------------------
    //  Name:           Prepend
    //  Description:    This adds a node before the head node, then points to the newNode
    //  Arguments:      p_data - The data to store in the new node.
    //                  m_count is increased.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------
    void Prepend(Datatype p_data)
    {
        // create the new node.
        DListNode<Datatype>* newNode= new DListNode<Datatype>;
        newNode->m_data= p_data;

        newNode->m_next= m_head;
        // set the head node and the tail node if needed.
        m_head= newNode;
        if(m_tail== 0)
            m_tail= m_head;
        m_count++;
    }
    // ----------------------------------------------------------------------------------------------------------------
    //  Name:           Insert
    //  Description:    Inserts data before the iterator, this works whether the iterator is backwards of forwards
    //                  through the list.Inserts at the end of the list if iterator is invalid.
    //  Arguments:      p_iterator: The iterator to insert before
    //                  p_data: the data to insert
    //  Return Value:   None.
    // ----------------------------------------------------------------------------------------------------------------
    void Insert(DoublyListIterator<Datatype>& p_itr, Datatype p_data)
    {
        if(p_itr.m_node != 0)
        {
            // insert the data before the iterator
            p_itr.m_node->InsertBefore(p_data);

            //if the iterator was at the head of the list,
            //reset the head pointer
            if(p_itr.m_node == m_head)
            {
                m_head = m_head->m_prev;
            }
            // increment the count
            m_count++;
        }
        else
        {
            Append(p_data);
        }
    }

    // -------------------------------------------------------------------------------------------------------
    //  Name:           Remove
    //  Description:    Removes the node that the iterator points to, moves iterator forward to the next node.
    //  Arguments:      p_iterator: The iterator to remove
    //                  isForward: Tells which direction the iterator was going through the list
    //  Return Value:   None.
    // -------------------------------------------------------------------------------------------------------
    void Remove(DoublyListIterator<Datatype>& p_itr, bool isForward)
    {
        // temporary node pointer.
        DListNode<Datatype>* newNode;

        // if node is invalid, do nothing.
        if(p_itr.m_node == 0)
            return;

        // save the pointer to the node we want to delete.
        newNode = p_itr.m_node;

        // if the node we want to remove is the head or the tail
        // nodes, then move the head or tail to the next or
        // previous node.
        if(newNode == m_head)
        {
            m_head = m_head->m_next;
        }
        else if(newNode == m_tail)
        {
            m_tail = m_tail->m_prev;
        }
        // if moving from head to tail, move the iterator forward 
        // to the next valid node
        if(isForward == true)
        {
            p_itr.Forth();

        }
        //else, we are moving from tail to head, so move the iterator
        // to the previous valid node
        else
        {
            p_itr.Back();
        }

        if(newNode->m_prev != 0)
            newNode->m_prev->m_next = newNode->m_next;
        else if(newNode->m_next != 0)
            newNode->m_next->m_prev = newNode->m_prev;
        // delink and delete the node.
        delete newNode;

        // if the head is 0, then set the tail to 0 as well.
        if(m_head == 0)
            m_tail = 0;

        m_count--;

    }
    // -----------------------------------------------------------------------------------
    //  Name:           RemoveHead
    //  Description:    Removes the Head of the List and points to the New Node
    //  Arguments:      None
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------
    void RemoveHead()
    {
        DListNode<Datatype>* newNode = 0;
        if(m_head!= 0)
        {
            // make node point to the next node.
            newNode = m_head->m_next;
            // then delete the head and make the pointer
            // point to node.
            delete m_head;
            m_head= newNode;
            // if the head is null, then you’ve just deleted the only node
            // in the list. set the tail to 0.
            if(m_head== 0)
                m_tail= 0;
            m_count--;
        }
    }

    // -----------------------------------------------------------------------------------------
    //  Name:           RemoveTail
    //  Description:    The tail node is removed - but at a much slower pace than the head node, 
    //  this is because the node has to search through the list to find the node before the tail
    //  node and set it to the new tail node then deleting the tail node
    //  Arguments:      None.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    void RemoveTail()
    {
        DListNode<Datatype>* newNode = m_head;
        // if the list isn’t empty, then remove a node.
        if(m_head!= 0)
        {
            // if the head is equal to the tail, then
            // the list has 1 node, and you are removing it.
            if(m_head == m_tail)
            {
                // delete the node and set both pointers
                // to 0.
                delete m_head;
                m_head= m_tail= 0;
            }
            else
            {
                // skip ahead until you find the node
                // right before the tail node
                while(newNode->m_next!= m_tail)
                    newNode = newNode->m_next;
                // make the tail point to the node before the
                // current tail and delete the old tail.
                m_tail= newNode;
                delete newNode->m_next;
                newNode->m_next= 0;
            }
            m_count--;
        }
    }

    // ------------------------------------------------------------------------------
    //  Name:           GetIterator
    //  Description:    Generates an iterator pointing towards the current head node
    //  Arguments:      None.
    //  Return Value:   <Datatype> Iterator
    // ------------------------------------------------------------------------------
    DoublyListIterator<Datatype> GetIterator()
    {
        return DoublyListIterator<Datatype>(this, m_head);
    }
};
// ----------------------------------------------------------
// Name:        DoublyListIterator
// Description: This is the basic linked list iterator class.
// ----------------------------------------------------------
template<class Datatype>
class DoublyListIterator
{
public:
    // ----------------------------------------------------------------
    //  Name:           m_node
    //  Description:    pointer to the current node
    // ----------------------------------------------------------------
    DoublyListNode<Datatype>* m_node;

    // ----------------------------------------------------------------
    //  Name:           m_list
    //  Description:    pointer to the current list.
    // ----------------------------------------------------------------
    DoublyLinkedList<Datatype>* m_list;

    // -----------------------------------------------------------------------------------------
    //  Name:           DListIterator
    //  Description:    Constructor, creates an iterator that points to the given list and node.
    //  Arguments:      p_list: pointer to the list the iterator belongs to.
    //                  p_node: pointer to the current node.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    DoublyListIterator(DoublyLinkedList<Datatype>* p_list= 0, DoublyListNode<Datatype>* p_node= 0)
    {
        m_list= p_list;
        m_node= p_node;
    }

    // ------------------------------------------------------------------
    //  Name:           Start
    //  Description:    Resets the iterator to the beginning of the list.
    //  Arguments:      None.
    //  Return Value:   None.
    // ------------------------------------------------------------------
    void Start()
    {
        if(m_list!= 0)
            m_node= m_list->m_head;
    }

    // ----------------------------------------------------------------
    //  Name:           End
    //  Description:    Resets the iterator to the end of the list
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void End()
    {
        if(m_list!= 0)
            m_node = m_list->m_tail;
    }

    // ----------------------------------------------------------------
    //  Name:           Forth
    //  Description:    Moves the iterator forward by one position
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void Forth()
    {
        if(m_node!= 0)
            m_node= m_node->m_next;
    }

    // ----------------------------------------------------------------
    //  Name:           Back
    //  Description:    Moves the iterator backward by one position.
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void Back()
    {
        if(m_node!= 0)
            m_node = m_node->m_prev;
    }

    // ----------------------------------------------------------------
    //  Name:           Item
    //  Description:    Gets the item that the iterator is pointing to.
    //  Arguments:      None.
    //  Return Value:   Reference to the data in the node.
    // ----------------------------------------------------------------
    Datatype& Item()
    {
        return m_node->m_data;
    }

    // ----------------------------------------------------------------
    //  Name:           Valid
    //  Description:    Determines if the node is valid.
    //  Arguments:      None.
    //  Return Value:   true if valid
    // ----------------------------------------------------------------
    bool Valid()
    {
        return (m_node!= 0);
    }
    // ----------------------------------------------------------------
    //  Name:           operator==
    //  Description:    Determines if two iterators point to the same node.
    //  Arguments:      None.
    //  Return Value:   true if they point to the same node.
    // ----------------------------------------------------------------
    bool operator==( DoublyListIterator<Datatype>& p_rhs )
    {
        if( m_node == p_rhs.m_node && m_list == p_rhs.m_list )
        {
            return true;
        }
        return false;
    }
    //getIterator
    DoublyListIterator<Datatype> getIterator()
    {
        return DoublyListIterator<Datatype>(this, m_head);
    }
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:30:12.693

`DoublyLinkedList`正如编译器所说，**没有**成员函数。`getIterator`它有`GetIterator`（不是大写字母）。

`getIterator`（不是第一个字母的小写）是 的成员`DoublyListIterator`。

你还有其他问题。但我想你会修复它们，一旦你修复了这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:30:39.387

所以编译器是正确的：`getIterator`不是`DoublyLinkedList`. 最接近的是`GetIterator`.

# c# - 如何让 axMozillaBrowser1 等到它完全加载？

> ID：12115215
> 
> 赞同：0
> 
> 时间：2012-08-24T19:02:45.857
> 
> 标签：c#, .net, browser, mozilla

我正在尝试使用“axMozillaBrowser1（Mozilla ActiveX 控件）”重新加载网页 3 次，但 axMozillaBrowser1 控件未加载网页，它正在等待进程正在定期闪烁，但浏览器控件未加载网页。

如何`axMozillaBrowser1`等到它加载网页。

这是我的程序代码：

```
public partial class Form1 : Form
{
public Form1()
{
    InitializeComponent();
    progressBar1.Maximum = 3;
}

private void Form1_Load(object sender, EventArgs e)
{

}

private void button1_Click(object sender, EventArgs e)
{
    do
    {
        axMozillaBrowser1.Navigate(textBox1.Text);
        while(axMozillaBrowser1.ReadyState != MOZILLACONTROLLib.tagREADYSTATE.READYSTATE_COMPLETE)
        {
            Application.DoEvents();
            if (axMozillaBrowser1.ReadyState == MOZILLACONTROLLib.tagREADYSTATE.READYSTATE_COMPLETE)
            { 
                progressBar1.Value = progressBar1.Value + 1; 
            }
        }
    }while(progressBar1.Value != 3);
}
} 
```

# asp.net - 无法使用本地 IIS Web 服务器在我的视图中显示图像。它适用于 IIS Express

> ID：12115218
> 
> 赞同：1
> 
> 时间：2012-08-24T19:03:00.053
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7.5, iis-express

我使用 Visual Studio 2010 开发 ASP.NET MVC3 解决方案。我有一个显示从 WCF 服务调用获得的图像的视图。此视图未通过本地 IIS Web 服务器正确呈现。然后我尝试使用本地 IIS Express，我意识到一切都按预期工作。所以我得出结论，我的 IIS Web 服务器配置有问题。我希望能够使用 IIS Web 服务器。

这是视图的摘录：

```
<!DOCTYPE html>
<html lang="en">
<head>
...
</head>
<body>
...
<img src="@Url.Action("DownloadImage", new { imageID = 72 })" />
<img src="@Url.Action("DownloadImage", new { imageID = 73 })" />
...
</body>
</html> 
```

这里没有什么复杂的。只有图像标签中有趣的部分。我在我的控制器中调用一个操作，该操作调用 WCF 服务来呈现图像（来自我的数据库）。

当我将我的解决方案配置为使用 IIS Express 时，它运行良好：

![在此处输入图像描述](../Images/c03cd78ce55bc5c8bd23c77968b4e9de.png)

您在下面的屏幕截图中看到我的图像已正确获取。

![在此处输入图像描述](../Images/98798fbfd3340ac962ca41448a9a7937.png)

当我将我的 colution 配置为与 IIS Web 服务器一起使用时，它不再起作用：

![在此处输入图像描述](../Images/a5a508de5bd7834cee59571d3e2ee9a8.png)

您在下面的屏幕截图中看到我的图像从未获得。

![在此处输入图像描述](../Images/a26bc01194c6f62b76cab56b5ec782be.png)

我在这个问题上花了很多时间。我真的很希望能够使用我的本地 IIS Web 服务器。

不要犹豫，向我询问配置、代码或其他任何内容，以帮助您了解这里出了什么问题。

谢谢。

编辑

正如 Darin 谈到的会话状态，下面是会话状态的 IIS Web 服务器配置。

![在此处输入图像描述](../Images/776f3078fe052520943f0bce47fc58f3.png)

![在此处输入图像描述](../Images/18dd53d985c15fb4a663c1e2f0c2e8d4.png)

# android - Android Jellybean（PhoneGap）上的空白键盘输入？

> ID：12115227
> 
> 赞同：2
> 
> 时间：2012-08-24T19:03:34.333
> 
> 标签：android, cordova

我对 Jellybean 键盘有一个奇怪的问题。当我的用户升级他们的操作系统时，只要他们尝试使用键盘输入数据，它就不会输入。时期。

这很奇怪，因为您确实可以专注于文本区域，但是在键盘上输入却没有输出。

有人知道修复吗？更具体地说，我的平台是 PhoneGap 1.9.0，我在项目中没有任何其他原始 java 文件，我的应用程序清单如下：

```
<application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:configChanges="orientation|keyboardHidden|screenSize">
        <activity
            android:name=".App"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application> 
```

我的 onCreate 非常简单，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      super.setIntegerProperty("loadUrlTimeoutValue", 60000);
      super.loadUrl("file:///android_asset/www/index.html");
      this.appView.setInitialScale(100);
    } 
```

这是 Sencha Touch 2 生成的表单的来源：

```
config: {
        padding: 20,
        items: [
        {
            xtype: 'image',
            src: 'resources/img/logo-splash.png',
            width:250,
            height: 229,
            baseCls: 'login-splash'
        },
        {
            xtype: 'fieldset',
            defaults: {  
                required: true,  
                labelAlign: 'left',  
                labelWidth: '35%'  
            },  
            items: [  
            {  
                xtype: 'emailfield',  
                name : 'email',  
                label: 'Email',  
                clearIcon: true  
            }, {  
                xtype: 'passwordfield',  
                name : 'password',  
                label: 'Password',  
                clearIcon: true  
            }],

        }, 
        {
            xtype: 'button',
            text: 'Login',
            ui: 'action',
            id: 'loginBtn',
            baseCls: 'btn-orange ui-rd'
        }
        ]
    }, 
```

然后是 Sencha 的最终 HTML 输出（在 webkit 浏览器上查看）：

```
<div class="x-inner x-form-fieldset-inner" id="ext-element-129"><div class="x-container x-field-text x-field x-label-align-left x-field-required x-field-labeled x-form-label-nowrap x-empty" id="ext-emailfield-1"><div class="x-form-label" id="ext-element-131" style="width: 35% !important; "><span id="ext-element-132">Email</span></div><div class="x-component-outer" id="ext-element-130"><div id="ext-input-1" class="x-field-input"><input id="ext-element-133" class="x-input-el x-form-field x-input-email" type="email" autocapitalize="off" name="email"><div class="x-clear-icon" id="ext-element-135"></div><div class="x-field-mask" id="ext-element-134"></div></div></div></div><div class="x-container x-field-text x-field x-label-align-left x-field-required x-field-labeled x-form-label-nowrap x-empty" id="ext-passwordfield-1"><div class="x-form-label" id="ext-element-137" style="width: 35% !important; "><span id="ext-element-138">Password</span></div><div class="x-component-outer" id="ext-element-136"><div class="x-field-input" id="ext-input-2"><input class="x-input-el x-form-field x-input-password" type="password" id="ext-element-139" autocapitalize="off" name="password"><div class="x-clear-icon" id="ext-element-141"></div><div class="x-field-mask" id="ext-element-140"></div></div></div></div></div> 
```

谢谢！

**澄清一下：**问题是当字段聚焦时，键盘会弹出，但是当你按下键时它不会填充文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:47:36.787

I was able to resolve the issue by upgrading PhoneGap from 1.9.0 to 2.0.0.

I am not sure what was the exact cause, but I also made a post to the community here: [http://community.phonegap.com/nitobi/topics/blank_keyboard_input_on_android_jellybean](http://community.phonegap.com/nitobi/topics/blank_keyboard_input_on_android_jellybean)

My instinct is that it was related to a way Cordova was handling Javascript events and keyboard events. But nonetheless it's working now.

# python - matplotlib中的周期轴类？

> ID：12115233
> 
> 赞同：16
> 
> 时间：2012-08-24T19:04:11.323
> 
> 标签：python, matplotlib, projection

我有一组跨越 longitude=0 线的纬度/经度点。我想使用 matplotlib Axes 类来绘制这些，该类“包裹”水平维度，这样，当朝向 l=360 时，l=1 处的点被绘制为 l=361 的等价物。理想情况下，我还想要一些定义平移/缩放动作的东西，这样我就可以交互式地使用绘图。

我知道可以[在 matplotlib 中定义自定义投影](http://matplotlib.sourceforge.net/examples/api/custom_projection_example.html)，但我还没有找到实现所有这些功能的圆柱投影的等价物。我宁愿不使用`basemap`. 有谁知道这样的东西是否存在于某处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T16:39:39.383

您可以通过修改 mathplotlib 示例来获得您所要求的内容 - [api 示例代码：custom_projection_example.py](http://matplotlib.org/examples/api/custom_projection_example.html)您只需要决定您想要球形表示还是圆柱形 - 如果是后者，那么您可能会在[custom_scale_example中找到更有用的代码.py](http://matplotlib.org/examples/api/custom_scale_example.html)还包括平移和缩放，但在示例中故意将数据限制为 +-90 度 - 您将需要换行。

![球面图](../Images/38e856d998f97700a46f001ffc9f2452.png) ![在此处输入图像描述](../Images/7e7e621fcf699c45422be20938ac6815.png)

# mysql - 将 MySQL 6.x 降级到 5.x

> ID：12115238
> 
> 赞同：0
> 
> 时间：2012-08-24T19:04:38.823
> 
> 标签：mysql

如何将我的 MySQL 数据库从版本 6 降级到 5？由于我设法安装了一些仅支持版本 5 的软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:12:05.353

您最好的选择是尝试转储和恢复。只要您不使用任何 MySQL 6.x 功能，它应该可以顺利进行。

与往常一样，在执行潜在危险操作之前进行备份。

# c# - windows钩子的奇怪行为

> ID：12115244
> 
> 赞同：2
> 
> 时间：2012-08-24T19:04:54.983
> 
> 标签：c#, c++, winapi, dll, hook

我一直在寻找在操作系统（Windows XP 32 位）中激活任何窗口时在 .NET Windows 应用程序中收到通知的可能性。在 CodeProject 上，我找到了使用全局系统挂钩的解决方案。

[http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H)。

以下是此过程的简短摘要：

在非托管程序集（用 C++ 编写）中，实现了一个安装`WH_CBT`钩子的方法。

```
bool InitializeCbtHook(int threadID, HWND destination) 
{ 
    if (g_appInstance == NULL) 
    { 
       return false; 
    }  

    if (GetProp(GetDesktopWindow(), " HOOK_HWND_CBT") != NULL) 
    { 
        SendNotifyMessage((HWND)GetProp(GetDesktopWindow(), "HOOK_HWND_CBT"), 
            RegisterWindowMessage("HOOK_CBT_REPLACED"),  0, 0); 
    } 

    SetProp(GetDesktopWindow(), " HOOK_HWND_CBT", destination); 

    hookCbt = SetWindowsHookEx(WH_CBT, (HOOKPROC)CbtHookCallback,     g_appInstance, threadID); 

    return hookCbt != NULL; 

} 
```

在回调方法（过滤器函数）中，根据钩子类型窗口消息被发送到目标窗口。

```
static LRESULT CALLBACK CbtHookCallback(int code, WPARAM wparam, LPARAM lparam) 
{ 
    if (code >= 0) 
    { 
        UINT msg = 0; 

        if (code == HCBT_ACTIVATE) 
            msg = RegisterWindowMessage("HOOK_HCBT_ACTIVATE"); 
        else if (code == HCBT_CREATEWND) 
            msg = RegisterWindowMessage("HOOK_HCBT_CREATEWND"); 
        else if (code == HCBT_DESTROYWND) 
            msg = RegisterWindowMessage("HOOK_HCBT_DESTROYWND"); 
        else if (code == HCBT_MINMAX) 
            msg = RegisterWindowMessage("HOOK_HCBT_MINMAX"); 
        else if (code == HCBT_MOVESIZE) 
            msg = RegisterWindowMessage("HOOK_HCBT_MOVESIZE"); 
        else if (code == HCBT_SETFOCUS) 
            msg = RegisterWindowMessage("HOOK_HCBT_SETFOCUS"); 
        else if (code == HCBT_SYSCOMMAND) 
            msg = RegisterWindowMessage("HOOK_HCBT_SYSCOMMAND"); 

        HWND dstWnd = (HWND)GetProp(GetDesktopWindow(), HOOK_HWND_CBT"); 

        if (msg != 0) 
            SendNotifyMessage(dstWnd, msg, wparam, lparam); 
    } 

    return CallNextHookEx(hookCbt, code, wparam, lparam); 
} 
```

要在 .NET Windows 应用程序中使用此程序集，必须导入以下方法：

```
[DllImport("GlobalCbtHook.dll", CallingConvention = CallingConvention.Cdecl)] 
public static extern bool InitializeCbtHook (int threadID, IntPtr DestWindow);

[DllImport("GlobalCbtHook.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern void UninitializeCbtHook(int hookType); 
```

调用后`InitializeCbtHook`收到的消息`GlobalCbtHook.dll`可以在：

```
protected override void WndProc(ref Message msg) 
```

消息必须通过调用在程序集和应用程序中注册 `RegisterWindowMessage`。

```
[DllImport("user32.dll")]
private static extern int RegisterWindowMessage(string lpString); 
```

此实现工作正常。但在大多数情况下，当我激活 Microsoft Office Outlook 时，我的 .NET 应用程序会在我最小化 Outlook 或激活其他窗口后收到激活事件。起初我认为我的 .NET 包装器是问题的原因。但是在我使用上述链接的来源之后，我可以识别出相同的行为。我实际的解决方法是使用`WH_SHELL`钩子。`WH_CBT`我知道和钩子之间的一个区别`WH_SHELL`是，当使用`WH_CBT`钩子时，可以通过不调用该`CallNextHookEx`方法来中断过滤器函数链。这会在我的问题中发挥作用吗？请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:36:16.590

显然，挂钩在 Outlook 的情况下不起作用 -**其他**微软产品（word、power point ...）呢？

但是，为什么要上钩？即使激活了 Outlook，这个小班也可以工作

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WindowsMonitor
{
    public class ActiveWindowChangedEventArgs : EventArgs
    {
        public IntPtr CurrentActiveWindow { get; private set; }
        public IntPtr LastActiveWindow { get; private set; }

        public ActiveWindowChangedEventArgs(IntPtr lastActiveWindow, IntPtr currentActiveWindow)
        {
            this.LastActiveWindow = lastActiveWindow;
            this.CurrentActiveWindow = currentActiveWindow;
        }
    }

    public delegate void ActiveWindowChangedEventHandler(object sender, ActiveWindowChangedEventArgs e);

    public class ActiveWindowMonitor
    {
        [DllImport("user32.dll")]
        private static extern IntPtr GetForegroundWindow();

        private Timer monitorTimer;

        public IntPtr ActiveWindow { get; private set; }
        public event ActiveWindowChangedEventHandler ActiveWindowChanged;

        public ActiveWindowMonitor()
        {
            this.monitorTimer = new Timer();
            this.monitorTimer.Tick += new EventHandler(monitorTimer_Tick);
            this.monitorTimer.Interval = 10;
            this.monitorTimer.Start();
        }

        private void monitorTimer_Tick(object sender, EventArgs e)
        {
            CheckActiveWindow();
        }

        private void CheckActiveWindow()
        {
            IntPtr currentActiveWindow = GetForegroundWindow();
            if (this.ActiveWindow != currentActiveWindow)
            {
                IntPtr lastActiveWindow = this.ActiveWindow;
                this.ActiveWindow = currentActiveWindow;

                OnActiveWindowChanged(lastActiveWindow, this.ActiveWindow);
            }
        }

        protected virtual void OnActiveWindowChanged(IntPtr lastActiveWindow, IntPtr currentActiveWindow)
        {
            ActiveWindowChangedEventHandler temp = ActiveWindowChanged;
            if (temp != null)
            {
                temp.Invoke(this, new ActiveWindowChangedEventArgs(lastActiveWindow, currentActiveWindow));
            }
        }
    }
} 
```

用法

```
 public void InitActiveWindowMonitor()
    {
        WindowsMonitor.ActiveWindowMonitor monitor = new WindowsMonitor.ActiveWindowMonitor();
        monitor.ActiveWindowChanged += new WindowsMonitor.ActiveWindowChangedEventHandler(monitor_ActiveWindowChanged);
    }

    private void monitor_ActiveWindowChanged(object sender, WindowsMonitor.ActiveWindowChangedEventArgs e)
    {
        //ouh a window got activated
    } 
```

# php - 用 mysqli fetch 将 while 循环放在哪里？

> ID：12115245
> 
> 赞同：0
> 
> 时间：2012-08-24T19:05:00.977
> 
> 标签：php, mysqli

我使用 mysqli 和 php 能够从数据库中选择一列，并且还能够将数据插入数据库。现在在研究 mysqli 时，我发现在检查行数是否等于 0 之前，我需要包含一个`while($stmt->fetch()) {`

现在因为我必须使用代码块，一个用于 SELECT 和其他 INSERT，我想知道 while fetch 循环是否假设环绕整个代码，或者它是否假设环绕 SELECT 代码块和 INSERT 代码块分别地？

更新：

```
 $query = "SELECT TeacherAlias FROM Teacher WHERE TeacherAlias = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s",$getid);
       // execute query
       $stmt->execute();
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbTeacherAlias);
       //get number of rows
       $stmt->store_result();
       $numrows = $stmt->num_rows();
       $results = $stmt->fetch_all();

    foreach ($results as $row) {
       if ($numrows == 0){    

           // don't use $mysqli->prepare here
       $query = "SELECT TeacherUsername FROM Teacher WHERE TeacherUsername = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s",$getuser);
       // execute query
       $stmt->execute(); 
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbTeacherUsername);
       //get number of rows
       $stmt->store_result();
       $numrows = $stmt->num_rows();
       $results = $stmt->fetch_all();
    }

foreach ($results as $row) {  
       if ($numrows == 0){
                                               // don't use $mysqli->prepare here
       $query = "SELECT TeacherEmail FROM Teacher WHERE TeacherEmail = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s",$getemail);
       // execute query
       $stmt->execute(); 
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbTeacherEmail);
       //get number of rows
       $stmt->store_result();
       $numrows = $stmt->num_rows();
       $results = $stmt->fetch_all();
}

}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:15:52.320

Try [`mysqli::fetch_all()`](http://php.net/manual/en/mysqli-result.fetch-all.php)，它返回一个关联数组：

```
$results = $stmt->fetch_all();

foreach ($results as $row) {
    // do something...
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-25T00:55:02.037

```
// if no results found it will return either empty array or null (not sure, check it)
$results = $stmt->fetch_all();

// if $results is an empty array it will not enter the loop
foreach($results as $row) {
    if ($numrows == 0){   // this is never reached if results no results were found 
```

# java - 如何在 web.xml Web 应用程序的设置文件中配置 url 路径？

> ID：12115246
> 
> 赞同：0
> 
> 时间：2012-08-24T19:05:10.397
> 
> 标签：java, web-services, jetty, web.xml

我在 Eclipse 中有一个 Web 服务项目，我导出了 war 文件并将其部署在 jetty 中，但随后在项目名称 (localhost:8080/projectname/home/) 下找到了该应用程序

我想将其配置为使用与项目名称不同的名称（例如：localhost:8080/myname/home/）。

如何在 web.xml 中对其进行配置？如果那不在 web.xml 中，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:03:21.227

使用[Maven 码头插件](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)。设置可选`<contextPath>`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:47:04.657

部署位置通常基于 WAR 文件名，但您也可以在服务器上的 jetty.xml 文件中进行设置。

您可以在此处找到有关命名约定的更多信息：http: [//wiki.eclipse.org/Jetty/Howto/Deploy_Web_Applications](http://wiki.eclipse.org/Jetty/Howto/Deploy_Web_Applications)

还有一些关于 contextDeployers 的信息：http: [//wiki.eclipse.org/Jetty/Feature/ContextDeployer](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)

# html - 如何让图像闪烁？

> ID：12115247
> 
> 赞同：14
> 
> 时间：2012-08-24T19:05:12.207
> 
> 标签：html, css, image, blink

如果可能的话，我想知道如何在 CSS 中使图像闪烁。我想让它在它所在的地方闪烁。

我也想改变速度，但主要是想让它闪烁。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-24T19:15:55.967

CSS动画来拯救！

```
@keyframes blink {
    0% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
img {
    animation: blink 1s;
    animation-iteration-count: infinite;
} 
```

[http://jsfiddle.net/r6dje/](http://jsfiddle.net/r6dje/)

您可以通过调整间隔使其急剧闪烁：

```
@keyframes blink {
    0% {
        opacity: 1;
    }
    49% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 0;
    }
} 
```

[http://jsfiddle.net/xtJF5/1/](http://jsfiddle.net/xtJF5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:11:53.853

使用 Javascript 的 setInterval 方法将其用作[W3Schools](http://www.w3schools.com/js/tryit.asp?filename=tryjs_setinterval1)的参考，然后将 css 从更改`visibility:visible`为`visiblity:hidden`我们不会使用`display:none`，因为它也会删除图像的空间，但我们确实需要图像的空间才能使闪烁的东西工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-31T09:39:18.957

你可以很容易地用 CSS 做到这一点。只需在图像的 CSS 元素中添加以下跨浏览器代码即可。如果您更改代码中的数字，您还可以设置时间。

```
-webkit-transition:all 1s ease-in-out;
-o-transition:all 1s ease-in-out;
-ms-transition:all 1s ease-in-out;
transition:all 1s ease-in-out;
-webkit-animation:blink normal 2s infinite ease-in-out; 
-ms-animation:blink normal 2s infinite ease-in-out; 
animation:blink normal 2s infinite ease-in-out; 
```

# jquery-mobile - jQuery Mobile - 谷歌导航 - 方向服务 - 当前位置识别

> ID：12115250
> 
> 赞同：1
> 
> 时间：2012-08-24T19:05:26.987
> 
> 标签：jquery-mobile

我有一个人们在他们的 Android 设备上使用的 JQuery Mobile 网站。
（这个网站主要处理客户信息。）
我一直在寻找集成“获取方向”功能。
我想知道是否可以通过 JQM 打开具有当前位置和一个客户地址的 Google 导航应用程序（因为它可以用作 GPS、语音导航）？
如果没有，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:55:39.690

W3C 官方网站介绍了[W3C 地理定位工作组](http://www.w3.org/2008/geolocation/)和已设定的里程碑。

您可以在[此处](http://dev.w3.org/geo/api/spec-source.html)找到新的（2012 年 5 月）W3C 地理定位 API 提案草案。

您可以在下面找到我创建的示例工作示例。代码找到当前位置并提供方向服务。有一个文本框，您可以在其中编写目标目的地和一个“获取路线”按钮。当您单击按钮时，页面末尾的列表中会填满方向。

您可以对其进行修改以满足您的需求。[此外，您可以在Google Map JavaScript API Directions Service](https://developers.google.com/maps/documentation/javascript/directions)中找到有关路线服务的更多信息。

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQuery mobile with Google maps</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript">

            var map;
            var currentPosition;
            var directionsDisplay = new google.maps.DirectionsRenderer();         
            var directionsService = new google.maps.DirectionsService();

            function initialize(lat, lon)
            {
                currentPosition = new google.maps.LatLng(lat, lon);

                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 15,
                   center: currentPosition,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });

                directionsDisplay.setMap(map);
                //directionsDisplay.setPanel($("#instructions-content"));

                 var currentPositionMarker = new google.maps.Marker({
                    position: currentPosition,
                    map: map,
                    title: "Current position"
                });

                var infowindow = new google.maps.InfoWindow();
                google.maps.event.addListener(currentPositionMarker, 'click', function() {
                    infowindow.setContent("Current position: latitude: " + lat +" longitude: " + lon);
                    infowindow.open(map, currentPositionMarker);
                });
            }

            function locError(error) 
            {
                alert("The position or the map could not be loaded.");
            }

            function locSuccess(position) 
            {
                initialize(position.coords.latitude, position.coords.longitude);
            }

            $(document).ready(function() 
            {
                navigator.geolocation.getCurrentPosition(locSuccess, locError);

                $("#directions-button").click(function(){
                    var targetDestination = $("#target-dest").val();

                    if (currentPosition && currentPosition != '' && targetDestination && targetDestination != '')
                    {
                        var request = {
                            origin:currentPosition, 
                            destination:targetDestination,
                            travelMode: google.maps.DirectionsTravelMode["DRIVING"]
                        };

                        directionsService.route(request, function(response, status) {
                            if (status == google.maps.DirectionsStatus.OK) {
                                directionsDisplay.setPanel(document.getElementById("instructions-content"));
                                directionsDisplay.setDirections(response); 

                                // For debuging reasons uncomment
                                /*
                                var myRoute = response.routes[0].legs[0];
                                for (var i = 0; i < myRoute.steps.length; i++) {
                                  alert(myRoute.steps[i].instructions);
                                }*/
                            }
                        });
                    }
                    else
                    {
                        alert("The target destination is empty or the current position could not be located.");
                    }
                }); 
            });
        </script>
    </head>
    <body>
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
                <div data-role="fieldcontain">
                    <label for="name">Target Destination:</label>
                    <input type="text" name="target-dest" id="target-dest" value=""  />
                </div>
                <a href="#" id="directions-button" data-role="button" data-inline="true" data-mini="true">Get Directions</a>
                <div data-role="collapsible" id="instructions-container">
                   <h3>Instructions</h3>
                   <p><div id="instructions-content"></div></p>
                </div>
            </div>
        </div>      
    </body>
</html> 
```

将 HTML 代码放在文件 map.html 中，然后直接用 Mozilla Firefox 打开它（以防您不想将它放在服务器上进行测试）。否则将文件放在服务器上并使用您想要的任何浏览器打开它。

最初，系统会询问您是否要共享当前位置。按下共享按钮后，您将看到带有标记的地图，显示您当前的位置。如果单击标记，您将看到纬度和经度。

![在此处输入图像描述](../Images/0f11377c34d07dd31ec95deba30d49ca.png)

![在此处输入图像描述](../Images/761a7c6cadbd19866d7dfea1cf3222d2.png)

我希望这有帮助。

# php - phpseclib - 尝试连接到 HP procurve 交换机返回错误：不支持 SSH 命令执行

> ID：12115252
> 
> 赞同：1
> 
> 时间：2012-08-24T19:05:32.330
> 
> 标签：php, ssh, phpseclib

我正在尝试使用 phpseclib 的 NET_SSH2 库连接到 HP 交换机。只是为了测试/开始，我正在尝试登录，然后在交换机上运行“显示接口简要”命令。但是在它让我登录后，我收到一条错误消息：

```
 SSH command execution is not supported. 
```

这是代码：

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . '../phpseclib');
include('Net/SSH2.php');
define('NET_SSH2_LOGGING', true); //turn on logging.

$ssh = new Net_SSH2('10.10.10.10'); //starting the ssh connection to localhost
if (!$ssh->login('', 'password')) { //if you can't log on...
  exit('Login Failed');
}
else  {
echo 'logged in<br>';
}
echo 'Attempting command: <br>';
$output = $ssh->exec('show interfaces brief');    
echo $output.'<br>';
echo 'Error message is: <br>';
$log = $ssh->getLog(NET_SSH2_LOG_COMPLEX);
foreach ($log as $logitem)  {
echo $logitem.'<br>';
}
?> 
```

这返回的输出是：

```
 logged in
 Attempting command:

 Notice: Connection closed prematurely in /var/www/phpseclib/Net/SSH2.php on line 1941
 SSH command execution is not supported.
 Error message is:
 <-
 ->
 <- NET_SSH2_MSG_KEXINIT (0.0015s)
 -> NET_SSH2_MSG_KEXINIT (0s)
 -> NET_SSH2_MSG_KEXDH_INIT (0s)
 <- NET_SSH2_MSG_KEXDH_REPLY (0.5123s)
 -> NET_SSH2_MSG_NEWKEYS (0s)
 <- NET_SSH2_MSG_NEWKEYS (0s)
 -> NET_SSH2_MSG_SERVICE_REQUEST (0s)
 <- NET_SSH2_MSG_SERVICE_ACCEPT (0.1962s)
 -> NET_SSH2_MSG_USERAUTH_REQUEST (0.0001s)
 <- NET_SSH2_MSG_USERAUTH_BANNER (0.0014s)
 <- NET_SSH2_MSG_USERAUTH_SUCCESS (0.0392s)
 -> NET_SSH2_MSG_CHANNEL_OPEN (0s)
 <- NET_SSH2_MSG_CHANNEL_OPEN_CONFIRMATION (0.0204s)
 -> NET_SSH2_MSG_CHANNEL_REQUEST (0s)
 <- NET_SSH2_MSG_CHANNEL_SUCCESS (0.1011s)
 <- NET_SSH2_MSG_CHANNEL_DATA (0s)
 -> NET_SSH2_MSG_CHANNEL_DATA (0s)
 <- NET_SSH2_MSG_CHANNEL_EOF (0s)
 <- NET_SSH2_MSG_CHANNEL_REQUEST (0s)
 <- NET_SSH2_MSG_CHANNEL_CLOSE (0s)

 Notice: Connection closed prematurely in /var/www/phpseclib/Net/SSH2.php on line 1941 
```

ssh2.php 中的第 1941 行是您在下面看到的“user_error”行：

```
 function _send_binary_packet($data)
{
    if (feof($this->fsock)) {
        user_error('Connection closed prematurely', E_USER_NOTICE);
        return false;
    } 
```

到目前为止我所做的：

1.  我已经通过 ssh 手动登录并确保我可以运行相同的命令。
2.  我已经浏览了交换机的 web 配置页面，以确保我不需要为 ssh 打开其他任何东西。
3.  我一直在检查 phpseclib 的论坛是否有任何类似的问题。

我正在使用 phpseclib 的 1.53 2010/10/24 01:24:30 版本。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:13:02.167

您无法在 HP Procurve 交换机上使用 exec 命令。您必须模拟交互式外壳（不幸的是）。

这是我为了基本上拥有一个批处理控制台以便一次配置多个交换机而制作的。我将 IP 地址列表放在一个名为 switch.txt 的文件中，用新行分隔每个地址（确保在文件末尾也保留一个新行）。很乱，我也只用过一次，也没多想，但确实省了很多时间，而不是手动登录上百台交换机。我等不及要获得 Procurve Manager...

此外，我没有花时间正确实施和读取 STDOUT，因此您看不到任何输出给开关，但我相信这不会那么困难。

```
<?php

require ('Net/SSH2.php');
$cnt = 0;
$ssh = array();
$ips = array();
echo "\n";

$handle = fopen('switches.txt', 'r');
while (!feof($handle)) {
    $ip = trim(fgets($handle)); 
    $ips[$cnt] = $ip;

    //SSH Setup

    $ssh[$cnt] = new Net_SSH2($ip);
    echo "Logging into device: ".$ip."\n";
    if (!$ssh[$cnt]->login('USERNAMEHERE', 'PASSWORDHERE')) {
        exit ('Login Failed');
    }
    $cnt++;

}
fclose($handle);

//Initial Post Login Setup
sleep(1);
for ($i=0; $i<sizeof($ssh); $i++) {
echo "Performing Post Login Setup (1/2) on device: ".$ips[$i]."\n";
$ssh[$i]->write("\n");
}
sleep(1);
for ($i=0; $i<sizeof($ssh); $i++) {
echo "Performing Post Login Setup (2/2) on device: ".$ips[$i]."\n";
$ssh[$i]->write("conf\n");
}
sleep(1);

//Command Loop
while (true) {
    //Device Loop
    echo "\nBatch Input# ";
    $in = fopen('php://stdin', 'r');
    $buffer = fgets($in);
    for ($i=0; $i<sizeof($ssh); $i++) {
        $ssh[$i]->write($buffer);
        //echo "Wrinting command: $buffer  ;  To Device: ".$ips[$i].";\n";
    }   
}
fclose($handle);
?> 
```

# css - :last-child 不选择最后一个元素

> ID：12115255
> 
> 赞同：17
> 
> 时间：2012-08-24T19:05:46.940
> 
> 标签：css, css-selectors

我想从最后一个`figure`元素中删除背景：

```
@media (min-width: 50em) {
  #mission #press figure {
    padding-left: 0;
    background: url('/assets/img/splash-green.png?1345829368') no-repeat 50% bottom;
  }
  #mission #press figure:last-child {
    background: none;
  }
} 
```

背景仍然出现。我是否定位错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T19:36:59.237

我认为您实际上可能正在寻找功能 of`last-of-type`而不是`last-child`.

[关联](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3alast-of-type)

# javascript - 使用 JavaScript 增加上/左/下/右值

> ID：12115258
> 
> 赞同：21
> 
> 时间：2012-08-24T19:05:59.810
> 
> 标签：javascript, css

我正在尝试将元素的位置增加*x*像素。这是我迄今为止尝试过的：

```
var top = document.getElementById("something").style.top;
top = top + "300px" 
```

我知道这行不通，但我想知道是否可以增加这样的位置值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T19:08:27.500

因为`style.top`它是一个末尾带有单位的字符串，就像`"300px"`您仅将数字部分转换为实际数字时才能对其进行数学运算一样。

假设你有一个定位元素（所以设置`top`值会做一些事情）并且你已经`top`在元素上直接设置了一个样式而不是通过 CSS 设置（所以 get`obj.style.top`实际上会给你一些东西），你可以通过解析数字来做到这一点的样式值是这样的：

```
var obj = document.getElementById("something");
var topVal = parseInt(obj.style.top, 10);
obj.style.top = (topVal + 300) + "px"; 
```

工作示例：http: [//jsfiddle.net/jfriend00/pt46X/](http://jsfiddle.net/jfriend00/pt46X/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:08:46.430

这将无法正常工作，因为例如，如果`top`值为`200px`，它将变为`"200px300px"`。试试这个：

```
var elem = document.getElementById("something");
elem.style.top = parseInt(elem.style.top, 10) + 300 + "px" 
```

[演示 WEEEE!!!!](http://jsfiddle.net/u7uzf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T13:35:42.867

```
let top = 0;
let left = 0;
let text = document.getElementById("TextToTranslate");
text.setAttribute("style","top:"+top+"px; "+left+":px;"); 
```

在while循环中使用它，它工作正常，我只是想知道如何减慢它，以便我可以看到过渡

# controller - AngularJS：在不完全重新加载控制器的情况下更改哈希和路由

> ID：12115259
> 
> 赞同：35
> 
> 时间：2012-08-24T19:06:17.463
> 
> 标签：controller, reload, routes, angularjs, persist

我有一个控制器，路线如下：

#/articles/1234

我想在不完全重新加载控制器的情况下更改路线，所以我可以保持控制器中其他东西的位置不变（滚动的列表）

我可以想到几种方法来做到这一点，但它们都很丑陋。有没有做这样的事情的最佳实践？我尝试尝试使用 reloadOnSearch: false，但它似乎并没有改变任何东西。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-15T01:03:16.610

有同样的挑战，

[在另一个 StackOverflow 响应](https://stackoverflow.com/a/12429133/682267)中发现了一个可以解决问题的 hack

相当干净的解决方案 - 我所做的只是将这些行添加到设置 $location.path 的控制器中：

```
var lastRoute = $route.current;
$scope.$on('$locationChangeSuccess', function(event) {
    $route.current = lastRoute;
}); 
```

..并确保将 $route 注入到控制器中。

但是，感觉就像“DoNotFollowRoutesOnPathChange”是AngularJS中缺少的功能。

/詹斯

**更新：**由于监听此事件有效地杀死了 $routeProvider 配置的进一步使用，我不得不将此捕获限制为仅当前路径：

```
 var lastRoute = $route.current;
    if ($route.current.$route.templateUrl.indexOf('mycurrentpath') > 0) {
        $route.current = lastRoute;         
    } 
```

变丑了...

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-12T03:10:32.387

## 简要回答：

您可以使用`$location.search()`您提到的方法。您应该在范围内收听`"$routeUpdate"`事件，而不是其他路由事件。[$路由 API](https://docs.angularjs.org/api/ngRoute/service/$route)。

## 解释：

1.  首先（您已经知道），添加`reloadOnSearch: false`到您的`$routeProvider`：

    ```
    $routeProvider.when('/somewhere', {
        controller: 'SomeCtrl',
        reloadOnSearch: false
    }) 
    ```

2.  如果路径部分 ( ) 与当前位置不同，则更改您的锚标记`href`或这将触发事件。否则会触发事件。`ng-href``href="#/somewhere?param=value"``$routeChangeSuccess``/somewhere``$routeUpdate`

3.  监听范围内的事件：

    ```
    $scope.$on("$routeUpdate", function(event, route) {
        // some code here
    }); 
    ```

4.  如果要更改代码中的搜索参数，可以使用`$location.search()`方法。[$location.search API](https://docs.angularjs.org/api/ng/service/$location#search)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-25T03:05:05.673

如果将 reloadOnSearch 设置为 false，则可以设置`?a=b&c=d`不重新加载的 url 部分。但是，如果不重新加载，您将无法漂亮地更改实际位置。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-11T10:24:23.097

# 编辑

使用 ngRoute 时更好的方法：

```
/**
 * Add skipReload() to $location service.
 *
 * See https://github.com/angular/angular.js/issues/1699
 */
app.factory('location',
  ['$rootScope', '$route', '$location',
  function($rootScope, $route, $location) {

  $location.skipReload = function() {
    var lastRoute = $route.current;

    var deregister = $rootScope.$on('$locationChangeSuccess',
                                    function(e, absUrl, oldUrl) {
      console.log('location.skipReload', 'absUrl:', absUrl, 'oldUrl:', oldUrl);
      $route.current = lastRoute;
      deregister();
    });

    return $location;
  };

  return $location;
}]); 
```

如何使用：

```
app.controller('MyCtrl', ['$scope', 'location', function($scope, location) {
  $scope.submit = function() {
    location.skipReload().path(path);
  };
}]); 
```

# 旧答案

我根据 Jens X Augustsson 的回答写了一个可重用的工厂：

```
app.factory('DoNotReloadCurrentTemplate', ['$route', function($route) {
  return function(scope) {
    var lastRoute = $route.current;
    scope.$on('$locationChangeSuccess', function() {
      if (lastRoute.$$route.templateUrl === $route.current.$$route.templateUrl) {
        console.log('DoNotReloadCurrentTemplate',
                    $route.current.$$route.templateUrl);
        $route.current = lastRoute;
      }
    });
  };
}]); 
```

适用于 AngularJS 1.0.6

如何使用：

```
app.controller('MyCtrl',
  ['$scope', 'DoNotReloadCurrentTemplate',
  function($scope, DoNotReloadCurrentTemplate) {

  DoNotReloadCurrentTemplate($scope);
}]); 
```

AngularJS 问题在这里：[https ://github.com/angular/angular.js/issues/1699](https://github.com/angular/angular.js/issues/1699)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-24T11:16:16.597

定义一个工厂来处理 HTML5 的 window.history 像这样（注意我保留了一个自己的堆栈以使其在 android 上也能工作，因为它在那里有一些问题）：

```
.factory('History', function($rootScope) {
    var StateQueue = [];
    var StatePointer = 0;
    var State = undefined;
    window.onpopstate = function(){
        // called when back button is pressed
        State = StateQueue.pop();
        State = (State)?State:{};
        StatePointer = (StatePointer)?StatePointer-1:0;
        $rootScope.$broadcast('historyStateChanged', State);
        window.onpopstate = window.onpopstate;

    }
    return {
        replaceState : function(data, title, url) {
            // replace current state
            var State = this.state();
            State = {state : data};
            window.history.replaceState(State,title,url);
            StateQueue[StatePointer] = State;
            $rootScope.$broadcast('historyStateChanged', this.state());
        },
        pushState : function(data, title, url){
            // push state and increase pointer
            var State = this.state();
            State = {state : data};
            window.history.pushState(State,title,url);
            StateQueue.push(State);
            $rootScope.$broadcast('historyStateChanged', this.state());
            StatePointer ++;
        },
        fakePush : function(data, title, url) {
            // call this when you do location.url(url)
            StateQueue.push((StateQueue.length - 1 >= 0)?StateQueue[StateQueue.length -1]:{});
            StatePointer ++;
            $rootScope.$broadcast('historyStateChanged', this.state());
        },
        state : function() {
            // get current state
            return (StateQueue[StatePointer])?StateQueue[StatePointer]:{};
        },
        popState : function(data) {
            // TODO manually popState
        },
        back : function(data) {
            // TODO needed for iphone support since iphone doesnt have a back button
        }
    }
}) 
```

在您的依赖范围上添加一些侦听器，您会像这样：

```
$scope.$on('historyStateChanged', function(e,v) {
        if(v)
            $scope.state = v;
        else
            $scope.state = {}
    }); 
```

我就是这样做的。在我看来，URL 只应在加载新视图时更改。我认为这就是 Angular 团队的意图。如果您想在模型上映射前进/后退按钮，请尝试使用 HTML5 的 window.history

希望我能帮上忙。干杯，海因里希

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-24T22:00:43.987

如果你在 2015 年登陆这里：真正的答案是不使用这些黑客（我敢这么命名，因为使用上面列出的任何方法，你将失去使用 resolve 等的可能性），而是切换到[用户界面路由器](https://github.com/angular-ui/ui-router)。

[这是](http://slides.com/timkindberg/ui-router)关于差异的方便演示。实现应该像将 $route 交换为 $state 并将状态转换为名称一样简单。

我目前正在切换到一种方法，在该方法中我将使用 a href 引用路由，并带有一个可选的 get 参数，该参数可以更改状态而不重新加载它。有关这方面的更多信息，请查看[此处的“参数”部分](http://angular-ui.github.io/ui-router/site/#/api/ui.router.state.$stateProvider)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-06T20:18:18.870

利用：

```
$routeProvider.when('/somewhere', {
    controller: 'SomeCtrl',
    reloadOnSearch: false
}) 
```

这将防止在查询参数更改以及哈希更改时重新加载控制器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-27T02:25:36.073

这个简单的解决方案（令人惊讶）对我有用：

```
$state.params.id = id;  //updating the $state.params somehow prevents reloading the state
$location.path('/articles/' + id); 
```

它不会阻止状态重新加载后退和前进按钮。注意：我使用的是 angularjs 1.2.7 和 ui-router 0.0.1（我知道它很旧）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-12T11:26:19.543

这是插件：[https ://github.com/anglibs/angular-location-update](https://github.com/anglibs/angular-location-update)

用法：

```
$location.update_path('/notes/1'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-14T04:37:25.710

您可以使用s promise 选项在没有`$locationChange~`and `HistoryState`hacks的情况下执行此操作。`route`[`resolve`](https://docs.angularjs.org/api/ngRoute/provider/$routeProvider)

假设您有一条`article`路线，其中该号码发生了变化，您可以这样做；

```
$routeProvider.when(
    '/article/:number',
    {
        templateUrl : 'partial.html',
        controller : 'ArticleCtrl',
        resolve : {
            load : ['$q', '$routeParams', function($q, $routeParams) {
                var defer = $q.defer();

                //number was specified in the previous route parameters, means we were already on the article page
                if ($routeParams.number)
                    //so dont reload the view
                    defer.reject('');
                //otherwise, the number argument was missing, we came to this location from another route, load the view
                else
                    defer.resolve();

                return defer.promise;
            }]
        }
    }
); 
```

# jquery - JQuery 修复了 IE7 中的滚动问题

> ID：12115262
> 
> 赞同：0
> 
> 时间：2012-08-24T19:06:25.987
> 
> 标签：jquery, internet-explorer-7, scroll, css-position

我正在尝试根据用户向下滚动页面并备份它的距离使这个 .side_content_wrapper 变得固定或静态。我让它在 IE8+/chrome/firefox 中运行良好。但由于某种原因，我无法让它在 IE7 中工作。难道我做错了什么？

谢谢你的帮助！

```
$(window).scroll(function(e){

var scrollAmount = $(window).scrollTop();
var documentHeight = $(document).height();
var heightFromBottom = documentHeight - scrollAmount;
$el = $('.side_content_wrapper'); 

if((scrollAmount > 320 && heightFromBottom > 950) && $el.css('position') != 'fixed') {
    fixToScroll();}

else if (scrollAmount < 320 && $el.css('position') == 'fixed') {
    fixToStatic();}

if(heightFromBottom <= 950 && $el.css('position') == 'fixed') {
    fixToBottom();} 

else if((heightFromBottom > 950 && scrollAmount > 320) && $el.css('position') == 'fixed') {
    fixToScroll();}

function fixToScroll() { 
    $('.side_content_wrapper').css({'position': 'fixed', 'top': '35px', 'right': '218px'});
}
function fixToStatic() { 
    $('.side_content_wrapper').css({'position': 'static', 'top': '0px', 'right': '0px'}); 
}
function fixToBottom() { 
    $('.side_content_wrapper').css({'position': 'fixed', 'bottom': '400px', 'top': 'inherit', 'right': '218px'}); 
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:36:46.503

我想到了：

```
$(document).ready(function () {
    var div = $('.fixed_floater');
    var offset = div.offset();
    var top = offset.top;
    $(window).scroll(function() {
        var heightFromBottom = $(document).height() - $(window).scrollTop();
        var y = $(this).scrollTop();

        if (y >= top && heightFromBottom > 950) {
            div.css({'position': 'fixed', 'top': '0px'});
        } else {
            div.css({'position': 'static'});
        }

        if (heightFromBottom <= 950)
            div.css({'position': 'fixed', 'bottom': '390px', 'top': 'auto'});
    });
}); 
```

# java - JSP servlet 之间的通信（替代静态字段）

> ID：12115269
> 
> 赞同：0
> 
> 时间：2012-08-24T19:07:04.333
> 
> 标签：java, jsp, servlets, asynchronous, servlet-3.0

我正在实现一个 serlvet，它使用[AsyncContext](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncListener.html)可以将消息异步发送回客户端。其他 servlet 需要能够为客户端排队消息，然后当浏览器通过 AJAX 请求消息时将这些消息提供给客户端。

我当前的实现使用静态计时器：

```
private static Timer messageSender = new Timer("MessageSerlvetSender", true); 
```

它被创建为一个守护线程，因此它不会使 servlet 容器的线程保持活动的时间超过应有的时间。其他 servlet 通过以下方式排队消息：

```
public static void write(HttpServletRequest req, MessageType type, String message) {
    try {
        synchronized (messageSender) {
            messageSender.schedule(new MessageTask(hashSession(req), type, message), MSG_DELAY_MS, MSG_TIMEOUT_MS);
        }
    } catch (IllegalStateException ex) {
        // Timer daemon thread has been canceled
        messageSender = new Timer("MessageSerlvetSender", true);
        write(req, type, message);
    }
} 
```

`MessageTask`是一个可运行对象，它抓取`AsyncContext`已添加到哈希映射（使用会话 ID）、写入消息、完成上下文并在成功时取消任务。

这是线程安全的，并且允许在守护线程死亡时重新启动计时器。这个实现试图不假设任何状态来遵守 servlet 的 API，但它感觉......很脏。在这种情况下，最佳做法是什么？如何利用 HTTP 会话属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:34:49.997

您可以将计时器放在 ServletContext 中，而不是静态字段。

# objective-c - UIBezierPath 永远不会被渲染

> ID：12115274
> 
> 赞同：0
> 
> 时间：2012-08-24T19:07:10.803
> 
> 标签：objective-c, uibezierpath

所以我对objective-c有一点经验，但不是很多。我正在尝试通过 TouchEvents 渲染 UIBezierPath （换句话说，用手指画一条线）。此外，我想将所有 bezierPaths 保存到 NSMutableArray（路径）中，以便以后可以移动或修改它们。这是最简单的应用程序。我的标题如下所示：

```
@interface ViewController : UIViewController{
    UIBezierPath* path;
    NSMutableArray* paths;

    int curThickness;

}

@property (strong, nonatomic) IBOutlet UIView *scene;
@end 
```

场景是占据整个屏幕的视图，也是我试图绘制路径的地方。

相关实现如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    NSLog(@"Starting Path");

    path = [UIBezierPath bezierPath];
    path.lineWidth = 15.0f;
    path.lineCapStyle = kCGLineCapRound;
    path.lineJoinStyle = kCGLineJoinRound;
    path.flatness = 2.0;
    path.miterLimit = 4.0;

    [path moveToPoint:[touch locationInView:scene]];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    [path addLineToPoint:[touch locationInView:scene]];
    [scene setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"I'm supposed to be drawing something...");
    [[UIColor redColor] set];
    [path stroke];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    NSLog(@"No more touchy feelies");
    UITouch *touch = [touches anyObject];
    [path addLineToPoint:[touch locationInView:scene]];
    [paths addObject:path];
    [scene setNeedsDisplay];

    NSLog(@"number of paths: %i.", paths.count); 
```

}

当我在模拟器上运行它时，所有事件都已注册，从不调用 DrawRect，屏幕上没有绘制任何内容（即使我在 touchesEnded 的末尾添加了 [path trace]），path 是 nonEmpty，并且 paths.count无论我追踪多少条路径，它都保持为零。

我错过了什么？一如既往，我们非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:27:50.323

几件应该对你有帮助的事情：

1.  `UIViewController`不实现`- (void)drawRect`..你需要在`UIView`子类中执行此代码！

2.  如果您的`paths`集合总是零计数，那么导致这种情况的常见错误是当 `paths`它本身为零时。（如果您尝试向 nil 对象发送消息，Obj-c 不关心，它只会返回一个默认值而不是崩溃。）仔细检查您是否实例化了一个`NSMutableArray`对象并指向`paths`它。

# java - 如何移动 JPanel

> ID：12115275
> 
> 赞同：5
> 
> 时间：2012-08-24T19:07:13.550
> 
> 标签：java, swing, awt

我有一个`JDialog`which contains`JPanel`和其他元素，如`JTextField`. 我想`JDialog`在屏幕上加载后从一个位置移动到另一个位置。当我尝试使用`jdialog.setLocation()`时，我无法移动`JDialog`，并且添加到其中的所有其他组件也变得不可见。

谁能告诉我我的方法可能有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T19:19:52.690

关于 Gilbert 断言设置为可见后无法移动对话框，请运行以下命令：

```
import java.awt.Component;
import java.awt.Dialog.ModalityType;
import java.awt.Dimension;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class MovingDialog {
   private static void createAndShowGui() {
      JPanel panel = new JPanel();
      panel.add(new JButton(new ShowMovingDialogAction()));
      JFrame frame = new JFrame("MovingDialog");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(panel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class ShowMovingDialogAction extends AbstractAction {
   private JPanel panel = new JPanel();

   public ShowMovingDialogAction() {
      super("Show Moving Dialog");
      panel.add(new JLabel("label"));
      panel.add(new JTextField("TextField", 10));
      panel.add(new JButton("Button"));
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      JFrame owner = (JFrame) SwingUtilities.getWindowAncestor((Component) e
            .getSource());
      final JDialog dialog = new JDialog(owner, "Dialog",
            ModalityType.APPLICATION_MODAL);
      dialog.getContentPane().add(panel);
      dialog.pack();
      dialog.setLocation(0, 0);

      int delay = 20;
      new Timer(delay , new ActionListener() {
         int x = 0;
         int y = 0;
         Dimension scrn = Toolkit.getDefaultToolkit().getScreenSize();

         @Override
         public void actionPerformed(ActionEvent e) {
            int maxX = scrn.width - dialog.getWidth();
            int maxY = scrn.height - dialog.getHeight();
            if (x < maxX  && y < maxY) {
               x++;
               y++;
               dialog.setLocation(x, y);
            } else {
               ((Timer)e.getSource()).stop();
            }
         }
      }).start();

      dialog.setVisible(true);

   }
} 
```

请注意，动画 Swing Timer*必须*在调用 setVisible(true) 之前启动。也许这就是吉尔伯特所指的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:16:10.820

如果您尝试制作动画，那么您将不得不初始化并启动一个新线程并在那里执行。线程方法内的代码`run()`应检查对话框是否可见，并`dialog.setLocation()`在每次迭代时使用修改后的值进行调用。

# javascript - Javascript多行字符串和意外令牌非法

> ID：12115276
> 
> 赞同：9
> 
> 时间：2012-08-24T19:07:15.487
> 
> 标签：javascript, string, templates, underscore.js, multiline

我在它自己的单独 js 文件中有一个多行字符串模板，用于下划线 js。但是，无论我如何逃脱换行符，我仍然得到：

> Uncaught SyntaxError: Unexpected token ILLEGAL

在文件加载到浏览器时的第 1 行。

```
App.Templates['template1'] = '\

<div data-role="page" data-theme="c" id="" data-title="">\

    <div data-role="content" class="subnav">\

        <table id="day-table" cellpadding="0" cellspacing="0" border="0">\
            <thead class="ui-body-a">\
                <tr>\
                    <th>T</th>\
                    <th>J</th>\
                    <th>H</th>\
                    <th>C</th>\
                </tr>\
            </thead>\
            <tbody>\
            </tbody>\
            <tfoot>\
                <tr>\
                    <td class="total-label" colspan="2">Total:</td>\
                    <td class="total"></td>\
                </tr>\
                <tr>\
                    <td class="btn-row">\
                        <a href="#r" data-role="button" id="add-btn" data-rel="dialog" data-mini="true" data-inline="true" data-icon="add">Add Rows</a>\
                        <a href="#" data-role="button" id="save-btn" data-rel="dialog" data-mini="true" data-inline="true" data-theme="b" data-icon="check">Save</a>\
                    </td>\
                </tr>\
            </tfoot>\
        </table>\

    </div><!--/content-->\

</div><!-- /page -->'; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T19:10:38.187

字符串中不允许使用行终止符，您需要对它们进行转义：

```
App.Templates['template1'] = '\
\
<div data-role="page" data-theme="c" id="" data-title="">\
\
    <div data-role="content" class="subnav">\
\
        <table id="day-table" cellpadding="0" cellspacing="0" border="0">\
            <thead class="ui-body-a">\
                <tr>\
                    <th>T</th>\
                    <th>J</th>\
                    <th>H</th>\
                    <th>C</th>\
                </tr>\
            </thead>\
            <tbody>\
            </tbody>\
            <tfoot>\
                <tr>\
                    <td class="total-label" colspan="2">Total:</td>\
                    <td class="total"></td>\
                </tr>\
                <tr>\
                    <td class="btn-row">\
                        <a href="#r" data-role="button" id="add-btn" data-rel="dialog" data-mini="true" data-inline="true" data-icon="add">Add Rows</a>\
                        <a href="#" data-role="button" id="save-btn" data-rel="dialog" data-mini="true" data-inline="true" data-theme="b" data-icon="check">Save</a>\
                    </td>\
                </tr>\
            </tfoot>\
        </table>\
\
    </div><!--/content-->\
\
</div><!-- /page -->'; 
```

为了更容易查看行终止符的位置，您可以在文本编辑器中打开可见空白，您应该会看到如下内容：

![在此处输入图像描述](../Images/0e3153907345bf04a608499e38838dd9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:11:55.080

我想到了。空行也需要转义。

```
App.Templates['template1'] = '\
\
<div data-role="page" data-theme="c" id="" data-title="">\
\
    <div data-role="content" class="subnav">\
\
        <table id="day-table" cellpadding="0" cellspacing="0" border="0">\
            <thead class="ui-body-a">\
                <tr>\
                    <th>T</th>\
                    <th>J</th>\
                    <th>H</th>\
                    <th>C</th>\
                </tr>\
            </thead>\
            <tbody>\
            </tbody>\
            <tfoot>\
                <tr>\
                    <td class="total-label" colspan="2">Total:</td>\
                    <td class="total"></td>\
                </tr>\
                <tr>\
                    <td class="btn-row">\
                        <a href="#r" data-role="button" id="add-btn" data-rel="dialog" data-mini="true" data-inline="true" data-icon="add">Add Rows</a>\
                        <a href="#" data-role="button" id="save-btn" data-rel="dialog" data-mini="true" data-inline="true" data-theme="b" data-icon="check">Save</a>\
                    </td>\
                </tr>\
            </tfoot>\
        </table>\
\
    </div><!--/content-->\
\
</div><!-- /page -->'; 
```

# php - 安全地评估简单的数学

> ID：12115277
> 
> 赞同：3
> 
> 时间：2012-08-24T19:07:18.217
> 
> 标签：php

我想知道是否有一种安全的方法来评估数学，例如

```
2+2
10000+12000
10000-20
2 + 2
40 - 20 + 23 - 12 
```

无需使用，`eval()`因为输入可以来自任何用户。我需要实现的只是整数的加法和减法。

是否有任何已经存在的片段，或者我没有遇到过的任何 PHP 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:12:38.797

`eval`考虑到 PHP 中可用的各种数学函数，我会质疑 using 。您说过您只想做简单的数学运算——使用的唯一原因`eval`是执行更复杂的运算，或者从用户那里完全接受方程。

如果您只想加减，请清理输入`intval`并前往城镇：

```
$number1 = '100';
$number2 = 'shell_exec(\'rm -rf *\')';
echo intval($number1) + intval($number2); // 100 
```

试试看：[http ://codepad.org/LSUDUw1M](http://codepad.org/LSUDUw1M)

这是有效的，因为`intval`忽略了任何非数字。

如果您确实从用户输入（即`100 - 20`）中获得了整个方程式，则可以使用`preg_replace`删除除允许的运算符和数字之外的任何内容：

```
$input = '20 + 4; shell_exec(\'rm *\')';
$input = preg_replace(
    '/[^0-9+-]/', 
    '',
    $input
);
eval('$result = '.$input.';');
echo 'result: '.$result; // 24 
```

试试看：[http ://codepad.org/tnISDPJ3](http://codepad.org/tnISDPJ3)

在这里，我们使用 regex `/[^0-9+-]/`，它匹配任何不是 0-9 OR + OR - 的东西，并将其替换为空字符串。

如果您想更深入地了解允许的方程式，请直接从`eval`手册页中获取：

```
// credit for code to bohwaz (http://www.php.net/manual/en/function.eval.php#107377)
$test = '2+3*pi';

// Remove whitespaces
$test = preg_replace('/\s+/', '', $test);

$number = '(?:\d+(?:[,.]\d+)?|pi|π)'; // What is a number
$functions = '(?:abs|a?cosh?|a?sinh?|a?tanh?|exp|log10|deg2rad|rad2deg|sqrt|ceil|floor|round)'; // Allowed PHP functions
$operators = '[+\/*^%-]'; // Allowed math operators
$regexp = '/^(('.$number.'|'.$functions.'\s*\((?1)+\)|\((?1)+\))(?:'.$operators.'(?2))?)+$/'; // Final regexp, heavily using recursive patterns

if (preg_match($regexp, $q))
{
    $test = preg_replace('!pi|π!', 'pi()', $test); // Replace pi with pi function
    eval('$result = '.$test.';');
}
else
{
    $result = false;
} 
```

**文档**

*   `preg_replace`- [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)
*   `intval`- [http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)
*   `eval`- [http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)
*   PHP 数学函数 - [http://www.php.net/manual/en/ref.math.php](http://www.php.net/manual/en/ref.math.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:11:59.003

您可以自己解析表达式。

像这样的东西：

```
// Minus is the same as plus a negative
// Also remove spaces after minus signs
$str = preg_replace('/-\s*(\d+)/', '+-$1', $str);

// Split on plusses
$nums = explode('+', $str);

// Trim values
$nums = array_map('trim', $nums);

// Add 'em up
echo array_sum($nums); 
```

演示：[http ://codepad.org/ANc0gh27](http://codepad.org/ANc0gh27)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:14:12.913

我在计算器脚本中使用了这种方法。

```
$field1 = $_GET["field1"];
$field2 = $_GET["field2"];

$answer = $field1 + $field2;
echo "$field1 + $field2 = $answer"; 
```

# java - 在 JAVA 的 ICU4J 中的 ERA 日期之前设置

> ID：12115279
> 
> 赞同：0
> 
> 时间：2012-08-24T19:07:46.403
> 
> 标签：java, date, calendar, icu

我正在使用`ICU4J`日历库在日历系统（公历、日文、中文、Jalali、伊斯兰……）之间转换日期。
我将它与正常日期（在 ERA 之后）一起使用，如下所示：

```
Calendar gc = new GregorianCalendar();
gc.setTime(dateOBJ); 
```

是否可以在 ERA 日期之前设置（例如公元前 500 年）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:05:33.403

是的。

尝试

```
gc.setTime(new Date((long)((-500-1970)*(86400.0)*(365.25)*(1000.0))));  // -17104219200.00, approx 500BC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:36:34.713

我有它的实现，我用这个：

```
calObj = new GregorianCalendar(500,6,12,0,0,0);
calObj.set(GregorianCalendar.ERA, GregorianCalendar.BC); 
```

# java - 来自 Java 的 DOS“复制”命令

> ID：12115280
> 
> 赞同：0
> 
> 时间：2012-08-24T19:07:54.920
> 
> 标签：java, copy, dos

我想使用 DOS 命令“copy *.txt NEW.txt”将单个目录中的几个 txt 文件连接在一起，以从 java 程序中形成一个新的 txt 文件。

如何将 DOS 导航到我的目录并执行命令？我很茫然。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:41:20.130

调用 DOS 命令不是一个好主意。您的应用程序将极大地依赖环境，并且更难以正确检测 IO 错误并从中恢复。我建议您使用来自[Apache Commons IO的](https://commons.apache.org/io/)[IOUtils](https://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)。通过重复调用其中一种方法，您可以轻松实现所需的功能。`copy`

如果您只需要读取连接成单个流的多个文件，您也可以使用[SequenceInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/SequenceInputStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:10:32.007

你可以使用：

```
Runtime.getRuntime().exec("cmd /c copy *.txt NEW.txt", 
    null, new File("<yourDirectory>")); 
```

甚至认为我不会建议这样做。首先，做对是很棘手的。然后，它是特定于平台的（仅适用于 Windows）。相反，我会使用`java.io.FileInputStream`/`java.io.FileOutputStream`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T04:30:58.893

在执行它之前创建一个`Process`并设置它的工作目录。

# mysql - INSERT ON DUPLICATE KEY UPDATE 代替 UPDATE

> ID：12115284
> 
> 赞同：1
> 
> 时间：2012-08-24T19:08:23.833
> 
> 标签：mysql, insert, on-duplicate-key

这个问题有点关于“最佳实践”，但也是对潜在问题的搜索。我希望能够在不运行多个查询且不使用超级复杂查询的情况下对多个字段运行更新并分配不同的值。所以，我所做的是创建了一个带有主键和“名称”列作为唯一键的表。

现在，当我想用​​不同的值更新多个列时，我可以运行如下查询：

```
INSERT INTO my_table (name, description) VALUES ('name', 'mydescription'), ('name2', 'description2') ON DUPLICATE KEY UPDATE description = VALUES(description) 
```

这是一个坏主意吗？有一个更好的方法吗？标准警察会来逮捕我吗？

* * *

编辑：我确实注意到了一个潜在的问题，即竞争条件。如果一个用户在另一个用户正在编辑它时删除了一行并保存了信息，则编辑将重新创建该行。（这可以用作功能或错误。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:17:34.623

除了[我上面的评论](https://stackoverflow.com/questions/12115284/insert-on-duplicate-key-update-as-substitute-for-update#comment16197450_12115284)（链接到另一个发布者建议使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)已知记录存在的地方对性能影响的问题），可以使用多表[`UPDATE`](http://dev.mysql.com/doc/en/update.html)语法和从常量实现的表，使用[`UNION`](http://dev.mysql.com/doc/en/union.html)：

```
UPDATE my_table JOIN (
    SELECT 'name' AS name, 'mydescription' AS description
  UNION ALL
    SELECT 'name2', 'description2'
) t USING (name) SET my_table.description = t.description 
```

# c# - 自定义数据驱动 MSTest

> ID：12115286
> 
> 赞同：2
> 
> 时间：2012-08-24T19:08:27.587
> 
> 标签：c#, visual-studio, unit-testing, mstest, vs-unit-testing-framework

我有从 Excel 创建的 XML 电子表格文件，我需要将其用作数据驱动测试的输入。`DataSource`由于使用 Oledb 提供程序解析文件的不一致，我无法在我的测试方法上使用该属性。我想知道是否有一种方法可以像`DataSource`属性那样嵌套测试结果？

我希望 MSTest 显示迭代的每一行的细分，而不是我捕获失败的断言异常并保留失败的集合。我当然希望测试针对每一行运行，而不是在第一个失败的断言时退出执行。

我不是在寻找坚持通过 DataSource 属性加载数据的答案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T07:32:14.697

1.  使用您每个人的[DeploymentItem](http://msdn.microsoft.com/en-us/library/ms182475%28v=vs.100%29.aspx)`TestMethods`来部署每个测试所需的 XML 电子表格文件。它将部署在大会所在地。

2.  在该`TestInitilize`方法中，使用 Assemby 的路径将您的文件解析为您的自定义`DataSource`（可能是输入数据的对象列表）。

3.  将您`TestMethod`的代码捕获放在 try/catch 块中。如果抛出异常，请使用该`TestContext.WriteLine`方法报告错误或将其附加到您的自定义结果文件中（类似[这样](https://stackoverflow.com/questions/11801006/vs-2010-coded-ui-tests-re-run-failed-test-cases/11808448#11808448)）。

4.  使用类级别计数器，并在每次`TestMethod`检查结束时检查计数器是否等于您的自定义数据源长度。如果不是，则将其增加一并重新运行测试。

# jquery - jquery.validate 无法与 jquery-1.4.3 一起正常工作

> ID：12115287
> 
> 赞同：3
> 
> 时间：2012-08-24T19:08:38.460
> 
> 标签：jquery, jquery-validate

以下脚本将在未聚焦时显示错误消息。我将其更改为 jQuery 4.3 或更高版本，但它没有这样做。我知道我在做一些愚蠢的事情，但找不到。请提供建议。谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>jQuery validation</title>
        <script src="http://code.jquery.com/jquery-1.4.2.js"></script> 
        <script src="jquery.validate.js" type="text/javascript"></script>
        <script src="additional-methods.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(function(){
                var validate = $("#signupForm").validate({
                    rules: {phone:'phoneUS'},
                    messages: {phone:'Enter a valid phone number'},
                    submitHandler: function(form) {alert('submit');}
                });

            });
        </script>
    </head>
    <body>

        <form id="signupForm" method="get" action="">
            <label for="phone">phone</label>
            <input id="phone" name="phone" />
            <input type="submit" value="Submit" class="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:20:50.037

该`phoneUS`方法定义在`additional-methods.js`. 如果您包含此文件（并确保您的输入有`type='text'`），它应该可以正常工作：

**JavaScript：**

```
$("#signupForm").validate({
    rules: {
        phone: 'phoneUS'
    },
    messages: {
        phone: 'Enter a valid phone number'
    },
    submitHandler: function(form) {
        alert('submit');
    }
}); 
```

**HTML：**

```
<form id="signupForm" method="get" action="">
    <label for="phone">phone</label>
    <input id="phone" name="phone" type="text"/>
    <input type="submit" value="Submit" class="submit" />
</form>​​​​​​​​​​​​​​​ 
```

**示例：http:** [//jsfiddle.net/kzDnx/5/](http://jsfiddle.net/kzDnx/5/)

# java - 在 Java 中调用实例方法

> ID：12115292
> 
> 赞同：1
> 
> 时间：2012-08-24T19:08:49.807
> 
> 标签：java, android

按照本教程：

[http://developer.android.com/training/notepad/notepad-ex2.html](http://developer.android.com/training/notepad/notepad-ex2.html)

在第 2 步中，调用此方法：

```
registerForContextMenu(getListView()); 
```

这是 Activity 的公共方法。现在，我在这里有点像 Java 新手——我想如果你想调用超类的实例方法，你需要在它前面加上**this**。例如

```
this.registerForContextMenu(getListView()); 
```

这只是一种风格吗？有没有区别

```
this.registerForContextMenu 
```

简单地说

```
registerForContextMenu 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:11:37.757

不，没有区别。

您不必使用`this.`，但通常会这样做以使代码更清晰。

一方面，`static`如果您使用调用实例方法的约定，可以很容易地判断一个方法是否存在，如下所示：

```
this.registerForContextMenu() 
```

和`static`这样的方法：

```
ClassName.staticRegisterForContextMenu() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:13:30.170

你不必使用`this`. 如果您省略它，则假定您在`this`范围内调用了方法。一个可能有帮助的特定示例`this`可能是：

```
Boolean someVar;
public function setMe( Boolean someVar ) {
  this.someVar = someVar;
} 
```

在这种情况下，w/o`this`你会得到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:42:48.490

要调用超类的方法，您需要 **superclss 的对象**或关键字**super**。例如。

```
superObject.superclassMethod();
    super.superclassMethod(); 
```

**这**是当前对象的引用。**this**可用于调用使用它的类的方法。**this**永远不能用于调用超类方法。

至于

```
this.registerForContextMenu() 
```

和

```
registerForContextMenu() 
```

没有这样的区别。你可以使用它们中的任何一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T19:11:57.857

这两种方法对于在类的当前 (this) 实例上调用方法都是正确的。非私有方法继承自超类，因此您可以使用相同的语法来调用此类方法。

# javascript - 在 jQuery 和 Bootstrap 2.1 中使用 TypeAhead

> ID：12115293
> 
> 赞同：9
> 
> 时间：2012-08-24T19:08:50.817
> 
> 标签：javascript, jquery, twitter-bootstrap

在[Twitter Bootstrap 的 2.1版中，](http://twitter.github.com/bootstrap/javascript.html#typeahead)[添加](https://github.com/twitter/bootstrap/pull/3250)了在 Typeahead 选项中传递回调函数的能力。但是，我一直很难让它与 jQuery ajax 调用一起工作。

这是我到目前为止所拥有的。

**HTML**

```
<form class="form-horizontal" action="">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="myTypeahead">User</label>
            <div class="controls">
                <input type="text" id="myTypeahead" />
            </div>
        </div>
    </fieldset>
</form> 
```

**JavaScript（在 jQuery`$(document).ready`函数中设置）**

```
$("#myTypeahead").typeahead({
  source: function (query, process) {
    $.ajax({
      type: "POST",
      url: ServiceURL + "/FindUsers",
      data: "{ SearchText: '" + query + "' }",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (r1) {
        var users = [];
        if (r1.d.Records) {
          $(r1.d.Records).each(function (index, val) {
            users.push(val.User.Name);
          });
          console.log(users);
          process(users);
        }
      }
    });
  }
}); 
```

当我在 Typeahead 输入中键入`test`(或`Test`) 时，不会显示任何 Typeahead 结果，但从`users`变量记录的数据如下所示：

```
["Test User A", "Test User B", "Test User C", "Test User D", "Test User E", "Test User F"] 
```

为什么这行不通？

另外，作为参考，这里是[Bootstrap 的 Typeahead JavaScript](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-typeahead.js)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T20:21:18.573

我想到了。HTML 表单（在问题中列出）显示在模式对话框中，并且 Typeahead 结果 div 出现在模式对话框的后面。

结果是结果被返回并显示，但 typeahead 结果容器只是不可见。

为了解决这个问题，我添加了这个 CSS：

```
.typeahead {
    z-index: 1100;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T21:16:05.433

z-index 在 bootstrap 的 2.3.1 版本中工作，但如果 Typeahead 菜单在任一方向上超出对话框的边界，它们仍然会被切断。

作为修复，*在加载*bootstrap.css 后添加这个 CSS：

```
/* Fix for Bootstrap dialog typeahead cut-off */
.modal-body {
    overflow: visible;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T05:24:51.620

```
 $('#activity').typeahead({
                        itemSelected:function(data,value,text){
                            console.log(data)
                            alert('value is'+value);
                            alert('text is'+text);
                        },                                                    
                        ajax: {
                            url: "/path/to/destination",
                            timeout: 500,
                            displayField: "activity",
                            triggerLength: 2,
                            method: "get",
                            loadingClass: "loading-circle",
                            preDispatch: function (query) {
                                //showLoadingMask(true);
                                return {
                                    search: query
                                }
                            },
                            preProcess: function (data) {
                                //showLoadingMask(false);
                                if (data.success === false) {
                                    // Hide the list, there was some error
                                    return false;
                                }
                                // We good!            
                                return data.mylist;
                            }
                        }
}); 
```

您可以使用上面的代码来获得打字头的工作。确保您以以下格式返回 JSON 数据 data.mylist 必须存在才能使用上述代码。

# coldfusion - Coldfusion ListToArray 并使用“==”作为分隔符

> ID：12115294
> 
> 赞同：2
> 
> 时间：2012-08-24T19:08:53.037
> 
> 标签：coldfusion, coldfusion-9

编码：

```
<cfset LOCAL.temp = 'something==a descript >= ive value' />
<cfdump var="#ListToArray(LOCAL.temp, '==')#" /> 
```

我期望的是一个具有两个索引的数组，我得到的是一个具有三个索引的数组，CF 也在单个等号处拆分。

是否有其他人遇到这种行为或可以解释发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T19:11:59.770

这是预期的行为。如文档中所述，[ListToArray](http://cfdocs.org/listtoarray)使用单字符分隔符（默认情况下）。

一种解决方案是使用拆分：

```
Temp.split('==') 
```

*（这是利用底层 Java [string.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))方法，该方法在指定正则表达式的每次匹配时拆分一个字符串，并且适用于所有基于 Java 的 CFML 引擎，但会生成一个 Java 字符串数组 - 不能直接操作用 CF 的 ArrayAppend 和相关函数，除非是先[转换](http://www.bennadel.com/blog/760-Converting-A-Java-Array-To-A-ColdFusion-Array.htm)的。）。*

由于您使用的是 CF9，因此您还可以通过将第四个参数设置为 true 来使用新的多字符分隔符标志：

```
ListToArray(Temp,'==',false,true) 
```

# drupal-6 - 缺少 jQuery UI 插件？

> ID：12115296
> 
> 赞同：0
> 
> 时间：2012-08-24T19:08:57.730
> 
> 标签：drupal-6, drupal-modules

我已经下载了Drupal 6`CCK`的`Views`和`Panel`模块，还下载了它们的依赖项。但是每次我保存配置时，总是会出现错误消息。这条信息，

```
The jQuery UI plugin is missing. Download and extract it into the sites/all/libraries directory. Rename the extracted folder to jquery.ui. (Currently using jQuery UI Not found) 
```

我很确定我已经下载了正确的文件，并将其解压缩并将其放在正确的目录中，但这种情况不断出现。我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:59:29.710

*   将 jquery_ui 模块目录复制到您的 sites/all/modules 目录中，因此它位于 sites/all/modules/jquery_ui/
*   [下载 jQuery UI 1.6 版本]：[http ://code.google.com/p/jquery-ui/downloads/list?q=1.6](http://code.google.com/p/jquery-ui/downloads/list?q=1.6)
*   将下载的存档放入目录/sites/all/libraries/jquery.ui-1.6.zip
*   提取存档（/sites/all/libraries/jquery.ui-1.6/）
*   将子目录重命名为“jquery.ui”（/sites/all/libraries/jquery.ui/）
*   所以实际的 jQuery UI JavaScript 文件位于：/sites/all/libraries/jquery.ui/ui/*.js

# python - 管理与托管 Elastic Search 提供程序的连接池

> ID：12115302
> 
> 赞同：4
> 
> 时间：2012-08-24T19:09:30.103
> 
> 标签：python, django, http, elasticsearch, pyes

我需要一种方法来管理与托管 Elastic Search 提供商的连接，以加快我网站上的搜索速度。我们在 Heroku 上运行 Django，使用 Found ElasticSearch 插件和 pyes，它是一个 ElasticSearch Python 库。

使用 pyes 建立与 ElasticSearch 的连接的标准方法是将提供程序 URL 传递给 ES 对象，如下所示：

(1)`connection = ES(my_elasticsearch_url)`

Pyes 在幕后使用 ES 对象建立到我的 ElasticSearch 提供程序的开放 HTTP 连接，因此我可以像这样运行搜索：

(2)`results = connection.search(some_query, index_name)`

以前，我在 Django 视图中执行这两个步骤以进行搜索——每次用户进行搜索时，它都会打开一个新的 HTTP 连接，然后运行搜索。因此，搜索调用很慢。

我通过将 (1) 移动到我的应用程序文件中来加快搜索速度`__init__.py`——现在，我只设置了一次连接，并将其导入到搜索视图中。但我担心如果很多人同时尝试搜索，它会阻塞 HTTP 连接。

我正在寻找有关如何设置连接池的想法，在应用程序启动时启动它们，然后根据需要将它们分配到我的搜索视图中。理想情况下，我希望能够轻松地上下缩放池的大小，而只需对我的代码进行最少的更改。

我可以想出几种方法来解决它，但这似乎是一个常见的与计算相关的问题，所以我相信你们中的很多人都对这样一个系统的良好设计和最佳实践有想法。我很想听听他们的意见。

非常感谢！

黏土

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:41:58.793

如果您在多线程环境中运行，则只需扩展[`Queue.Queue`](http://docs.python.org/library/queue.html)创建一个实例，该实例可以从您的视图处理请求-响应流的多个线程按需获取和实例化连接。您可能希望通过限制队列的最大大小来限制保留的连接数，尽管您可以实例化更多连接，如果可以将它们放回队列，则只需丢弃它们。

使用的缺点`Queue.Queue`是，如果您的视图负责从队列中检索连接并将它们返回到队列中，它可能会产生横切关注点。`pyes.ES`如果您只对持有连接的实际对象进行排队并为此创建一个包装器，那么您可以获得更健康的设计`ES`，在执行查询时，创建一个新`ES`实例，从队列中获取一个连接，在实例上设置它，执行查询，将连接返回到队列中，丢弃`ES`实例并返回查询结果。

# c# - 迭代失败排序数组

> ID：12115305
> 
> 赞同：-3
> 
> 时间：2012-08-24T19:09:36.587
> 
> 标签：c#, .net, arrays, loops

我有以下方法对绑定源索引列表进行排序并将其对应的对象放入数组中。我也尝试过使用`Array.Sort()`，但都不起作用，foreach 循环中的代码永远不会被调用。我已经测试过该变量`int[] indices`既不为空也不为空。

```
internal void Foo(int[] indices)
{
    var bar = new Object[indices.length];
    int i = 0;
    foreach (int index in indices.OrderBy(x => x))
    {
        // this block never gets called
        bar[i] = BindingSource[index];
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:15:19.120

你可以试试这个：

```
var bar = indices.OrderBy(x => x).Select(x => BindingSource[x]).ToArray(); 
```

但是我认为您的代码应该可以工作，尽管我认为您可以使用 for 循环而不是 foreach 来改进它。

```
internal void Foo(int[] indices)
{
    var bar = new Object[indices.Length];
    indices = indices.OrderBy(x => x);
    for(int i = 0; i < indices.Length; i++)
        bar[i] = BindingSource[indices[i]];    
} 
```

另一件事，你应该确保`indices.Length`不等于`0`，所以我认为索引是空的。

**PS：** C# 区分大小写，因此`indices.length`在您的代码中应该是`indices.Length`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:35:24.640

问题是它`OrderBy`没有返回排序后的数组，就像我假设的那样。以下是我的解决方案。

```
internal void Foo(int[] indices)
{
    var bar = new Object[indices.Length];
    int i = 0;
    indices = indices.OrderBy(x => x).ToArray();
    foreach (int index in indices)
    {
        // now this block gets called
        bar[i] = BindingSource[index];
        i++;
    }
} 
```

# scala - 不同函数式编程概念之间的关系

> ID：12115312
> 
> 赞同：8
> 
> 时间：2012-08-24T19:10:09.683
> 
> 标签：scala, functional-programming

我自己理解函数式编程的不同概念：副作用、不变性、纯函数、引用透明性。但我无法在我的脑海中将它们联系在一起。例如，我有以下问题：

1.  ref之间的关系是什么？透明度和不变性。一个是否暗示另一个？

2.  有时副作用和不变性可以互换使用。这是对的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T23:00:40.690

这个问题需要一些特别挑剔的答案，因为它是关于定义常用词汇的。

首先，**函数**是输入“域”和输出“范围”（或共域）之间的一种数学关系。每个输入都会产生一个明确的输出。例如，整数加法函数`+`接受域中的输入`Int x Int`并产生范围内的输出`Int`。

```
object Ex0 {
  def +(x: Int, y: Int): Int = x + y
} 
```

`x`给定和的任何值`y`，显然`+`总是会产生相同的结果。这是一个功能。如果编译器更加聪明，它可以插入代码来缓存每对输入的此函数的结果，并执行缓存查找作为优化。这里显然是安全的。

问题是在软件中，“函数”这个术语被滥用了：虽然函数接受参数并返回在其签名中声明的值，但它们也可以读取和写入某些外部上下文。例如：

```
class Ex1 {
  def +(x: Int): Int = x + Random.nextInt
} 
```

我们不能再将其视为一个数学函数，因为对于给定的 值`x`，`+`可以产生不同的结果（取决于随机值，它不会出现在`+`的签名中的任何位置）。`+`如上所述，无法安全缓存的结果。所以现在我们有一个词汇问题，我们通过说`Ex0.+`是**纯**的来解决这个问题，而`Ex1.+`不是。

好的，既然我们现在已经接受了某种程度的杂质，我们需要定义我们在谈论什么样的杂质！在这种情况下，我们已经说过不同之处在于我们可以缓存`Ex0.+`与其输入相关联的结果，`x`而`y`我们*不能*缓存`Ex1.+`与其输入相关联的结果`x`。我们用来描述可缓存性（或者更准确地说，函数调用及其输出的可替代性）的术语是**引用透明性**。

所有纯函数都是引用透明的，但一些引用透明的函数不是纯函数。例如：

```
object Ex2 {
  var lastResult: Int
  def +(x: Int, y: Int): Int = {
    lastResult = x + y
    lastResult
  }
} 
```

在这里，我们不是从任何外部上下文中读取，并且任何输入产生的值都`Ex2.+`将*始终*是可缓存的，如. 这是引用透明的，但它确实有一个**副作用**，即存储函数计算的最后一个值。其他人可以稍后出现并抓住，这将使他们对正在发生的事情有一些偷偷摸摸的洞察力！`x``y` *`Ex0`**`lastResult``Ex2.+`***

 ***> *附注：*您也可以争辩说它*不是*`Ex2.+`引用透明的，因为尽管缓存对于函数的结果是安全的，但在缓存“命中”的情况下，副作用会被默默地忽略。换句话说，如果副作用很重要（因此[Norman Ramsey 的评论](https://stackoverflow.com/a/4965613/1011414)），引入缓存会改变程序的含义！如果您更喜欢这个定义，那么函数必须是纯函数才能实现引用透明。

 *现在，这里要注意的一件事是，如果我们`Ex2.+`使用相同的输入连续调用两次或多次，`lastResult`则不会改变。调用*n*次方法的副作用相当于只调用一次方法的副作用，所以我们说它`Ex2.+`是**幂等**的。我们可以改变它：

```
object Ex3 {
  var history: Seq[Int]
  def +(x: Int, y: Int): Int = {
    result = x + y
    history = history :+ result
    result
  }
} 
```

现在，每次我们调用`Ex3.+`，历史都会改变，所以函数不再是幂等的。

好的，到目前为止的回顾：**纯**函数是既不读取也不写入任何外部上下文的函数。它是**参照透明**和**无副作用的**。从某些外部上下文读取的函数不再是引用透明的，而写入某些外部上下文的函数不再没有副作用。最后，使用相同输入多次调用的函数与只调用一次具有相同的副作用，称为**idempotent**。请注意，没有副作用的函数（例如纯函数）也是幂等的！

那么**可变性**和**不变性**是如何影响这一切的呢？好吧，回头看看`Ex2`and `Ex3`。他们引入了 mutable `var`s。`Ex2.+`和的副作用`Ex3.+`是改变各自`var`的 s! 所以可变性和副作用是齐头并进的；仅对不可变数据进行操作的函数必须没有副作用。它可能仍然不是纯的（也就是说，它可能不是引用透明的），但至少它不会产生副作用。

一个合乎逻辑的后续问题可能是：“纯函数式风格有什么好处？” 这个问题的答案更复杂；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:24:34.190

对第一个表示“否” - 一个表示另一个，但不是相反，对第二个表示一个合格的“是”。

1.  “[如果可以在不改变程序行为的情况下将表达式替换为其值，](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)[则称该表达式是**引用透明**](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)的”。 **不可变**输入表明表达式（函数）将始终计算为相同的值，因此是**引用透明**的。

    但是，（在这一点上，mergeconflict 善意地纠正了我）**引用透明**并不一定需要**immutability**。

2.  根据定义，**副作用是***函数*的一个方面；这意味着当你调用一个函数时，*它会改变一些东西*。 **不变性**是*数据*的一个方面；它不能改变。调用这样的函数确实意味着不会有副作用。（在 Scala 中，这仅限于“不更改不可变对象”——开发人员有责任和决定）。

    虽然**副作用**和**不变性**并不意味着同一件事，但它们是函数和函数所应用的数据密切相关的方面。

由于 Scala 不是一种纯函数式编程语言，因此在考虑诸如“不可变输入”之类的语句的含义时必须小心——函数的输入范围可能包括*作为参数传递的元素以外的*元素。同样考虑副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T22:04:57.443

这取决于您使用的具体定义（可能存在分歧，例如[纯度与参考透明度](https://stackoverflow.com/questions/4865616/purity-vs-referential-transparency)），但我认为这是一个合理的解释：

引用透明度和“纯度”是函数/表达式的属性。函数/表达式可能有也可能没有副作用。另一方面，不变性是对象的属性，而不是函数/表达式。

参照透明、副作用和纯度密切相关：“纯粹”和“参照透明”是等价的，这些概念等价于没有副作用。

不可变对象可能具有引用不透明的方法：这些方法不会更改对象本身（因为这会使对象可变），但可能具有其他副作用，例如执行 I/O 或操作其（可变）参数.****

# java - 为什么我的应用程序在 5-10% 的进度处总是停止下载相同的文件？（仅在少数机器上）

> ID：12115313
> 
> 赞同：0
> 
> 时间：2012-08-24T19:10:16.900
> 
> 标签：java, download, launcher

我的应用程序似乎可以在大多数机器上运行，但有些只是不想合作......服务器上的文件很好，服务器本身没有关闭或任何东西。问题是该应用程序正确下载了所有必需的文件（最多 600KB），除了一个（12MB）。我不知道出了什么问题。我的猜测是后台运行的东西阻止了我的应用程序的下载线程，或者路由器阻止了一些数据包？我所看到的只是进度条上升到 4%（有时甚至上升到 8 个！）然后停止而没有错误或异常，而所有其他下载上升到 100% 没有问题。有任何想法吗？

这是我用来下载文件的类（我已经从[http://www.java-tips.org/java-se-tips/javax.swing/how-to-create-a下载了整个“下载管理器”脚本-download-manager-in-java.html](http://www.java-tips.org/java-se-tips/javax.swing/how-to-create-a-download-manager-in-java.html)）：

```
class Download extends Observable implements Runnable {
  private static final int MAX_BUFFER_SIZE = 1024;

  public static final String STATUSES[] = { "Pobieranie", "Pauza", "OK", "Anulowany",
      "Błąd" };

  public static final int DOWNLOADING = 0;

  public static final int PAUSED = 1;

  public static final int COMPLETE = 2;

  public static final int CANCELLED = 3;

  public static final int ERROR = 4;

  private URL url; // download URL

  private int size; // size of download in bytes

  private int downloaded; // number of bytes downloaded

  private int status; // current status of download

  // Constructor for Download.
  public Download(URL url) {
    this.url = url;
    size = -1;
    downloaded = 0;
    status = DOWNLOADING;
    System.err.println("==========Pobieram plik: " + url.toString());

    // Begin the download.
    download();
  }

  // Get this download's URL.
  public String getUrl() {
    //return url.toString();
      return getFileName(url);
  }

  // Get this download's size.
  public int getSize() {
    return size;
  }

  // Get this download's progress.
  public float getProgress() {
    return ((float) downloaded / size) * 100;
  }

  public int getStatus() {
    return status;
  }

  public void pause() {
    status = PAUSED;
    stateChanged();
  }

  public void resume() {
    status = DOWNLOADING;
    stateChanged();
    download();
  }

  public void cancel() {
    status = CANCELLED;
    stateChanged();
  }

  private void error() {
    status = ERROR;
    stateChanged();
  }

  private void download() {
    Thread thread = new Thread(this);
    thread.start();
  }

  // Get file name portion of URL.
  private String getFileName(URL url) {
    String fileName = url.getFile();
    return fileName.substring(fileName.lastIndexOf('/') + 1);
  }

  // Download file.
  public void run() {
    RandomAccessFile file = null;
    InputStream stream = null;

    try {
      // Open connection to URL.
      HttpURLConnection connection = (HttpURLConnection) url.openConnection();

      // Specify what portion of file to download.
      connection.setRequestProperty("Range", "bytes=" + downloaded + "-");

      // Connect to server.
      connection.connect();

      // Make sure response code is in the 200 range.
      if (connection.getResponseCode() / 100 != 2) {
        error();
      }

      // Check for valid content length.
      int contentLength = connection.getContentLength();
      if (contentLength < 1) {
        error();
      }

      /*
       * Set the size for this download if it hasn't been already set.
       */
      if (size == -1) {
        size = contentLength;
        stateChanged();
      }

      File f = new File(Files.download_dir + Files.SEPARATOR + getFileName(url));
      if (f.exists()) f.delete();
      // Open file and seek to the end of it.
      file = new RandomAccessFile(Files.download_dir + Files.SEPARATOR + getFileName(url), "rw");
      file.seek(downloaded);

      stream = connection.getInputStream();
      while (status == DOWNLOADING) {
        /*
         * Size buffer according to how much of the file is left to download.
         */
        byte buffer[];
        if (size - downloaded > MAX_BUFFER_SIZE) {
          buffer = new byte[MAX_BUFFER_SIZE];
        } else {
          buffer = new byte[size - downloaded];
        }

        // Read from server into buffer.
        int read = stream.read(buffer);
        if (read == -1)
          break;

        // Write buffer to file.
        file.write(buffer, 0, read);
        downloaded += read;
        //System.out.println("Pobralem juz: " + String.valueOf(downloaded));
        stateChanged();
      }

      /*
       * Change status to complete if this point was reached because downloading
       * has finished.
       */
      if (status == DOWNLOADING) {
        status = COMPLETE;
        stateChanged();
      }
    } catch (Exception e) {
      error();
    } finally {
      // Close file.
      if (file != null) {
        try {
          file.close();
        } catch (Exception e) {
        }
      }

      // Close connection to server.
      if (stream != null) {
        try {
          stream.close();
        } catch (Exception e) {
        }
      }
    }
  }

  private void stateChanged() {
    setChanged();
    notifyObservers();
  }
} 
```

（如果您需要更多代码，请告诉我，我会将所有内容上传到某个地方。）

# javascript - 回调函数的问题

> ID：12115318
> 
> 赞同：0
> 
> 时间：2012-08-24T19:10:50.317
> 
> 标签：javascript, jquery

我有三个下拉列表，我试图在加载 HTML 表单时动态填充。它们都使用第三方云数据库提供商提供的 API 回调函数来检索数据并填充下拉列表。我遇到的问题是只有最后一个填充。这是我调用函数的方式：

```
$(function ()
{
    PopulateDropdown('OwnerList');
});

$(function()
{
    PopulateDropdown('ClientList');
});

$(function ()
{
    PopulateDropdown('AssignedToList');
}); 
```

括号内的文本是 HTML 中下拉菜单（选择元素）的 ID。

唯一被填充的下拉列表是列表中的最后一个。如上所示的代码仅填充 AssignedToList 下拉列表。如果我将填充 AssignedToList 的调用移至顶部，将 ClientList 移至底部，则仅填充 ClientList 下拉列表。我对 JavaScript 和 jQuery 还很陌生，所以我确信有一种方法可以确保所有三个调用都正常工作。我已经用谷歌搜索了我能想到的所有内容，但找不到任何帮助。我什至不确定谷歌需要什么！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:12:33.520

这就是您将 3 组合成单个函数的方式：

```
$(function () {
    PopulateDropdown('OwnerList');
    PopulateDropdown('ClientList');
    PopulateDropdown('AssignedToList');
}); 
```

# java - 中位数为五个元素的 QuickSelect

> ID：12115323
> 
> 赞同：0
> 
> 时间：2012-08-24T19:11:39.010
> 
> 标签：java, algorithm, quicksort

我一直在尝试实现快速选择算法作为作业的一部分。我已经阅读了快速排序的工作方式，以了解分区的工作原理并找到五个元素的中位数等。但是当涉及到分区时，我陷入了困境。

我意识到我的分区结果不包含`(less than pivot) | pivot | (greater than pivot)`表单中的元素。我一直在为此烦恼，但我似乎无法掌握它。

我从维基百科改编的快速选择算法，我正在使用迭代版本（我提到的一个要求）。我的快速选择算法如下：

```
public static Numbers quickselect(Numbers[] list, int arraylength,
        int kvalue) {

    int start = 0, end = arraylength - 1;
    if (arraylength == 1)
        return list[start];
    while (true) {

        int newPivotIndex = partition(list, start, end);
        int pivotDist = newPivotIndex - start + 1;
        if (pivotDist == kvalue)
            return list[newPivotIndex];
        else if (kvalue < pivotDist)
            end = newPivotIndex - 1;
        else {
            kvalue = kvalue - pivotDist;
            start = newPivotIndex - 1;
        }
    } 
```

我的分区算法：

```
 private static int partition(Numbers[] list, int start, int end) {
        Numbers[] tempMedianArray = new Numbers[5];
        tempMedianArray[0] = list[start];
        tempMedianArray[1] = list[(start + end) / 4];
        tempMedianArray[2] = list[(start + end) / 12];
        tempMedianArray[3] = list[(start + end) / 2];
        tempMedianArray[4] = list[end];
        Numbers pivot = getmedian(tempMedianArray);
           int i = start, j = end;

          while (i <= j) {
                while (compare(list[i], pivot).equals(Order.LESSER)){
                      i++;
                }
                while (compare(list[j], pivot).equals(Order.GREATER)){
                    j--;
                      }
                if (i <= j) {
                    Numbers tmp = list[i];
                      list[i] = list[j];
                      list[j] = tmp;
                }
          }; 
```

一旦选择了支点，我认为标准的 Hoare 算法会起作用。但是当我自己进行试运行时，我知道我错了。

有人可以帮助我正确实现分区算法，该算法适用于五个枢轴的中位数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:13:43.060

怎么样：

```
tempMedianArray[0] = list[start];
tempMedianArray[1] = list[(start + end) / 4];
tempMedianArray[3] = list[(start + end) / 2];
tempMedianArray[2] = list[3 * (start + end) / 4];
tempMedianArray[4] = list[end]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T05:31:04.633

在获取临时数组索引时，您必须继续添加开始。

```
 int localStart = 0;
    int localEnd = end - start;
    Number[] local = new Number[5];
    tempMedianArray[0] = list[localStart + start];
    tempMedianArray[1] = list[(localStart + localEnd) / 4 + start];
    tempMedianArray[2] = list[(localStart + localEnd) / 4 * 3 + start];
    tempMedianArray[3] = list[(localStart + localEnd) / 2 + start];
    tempMedianArray[4] = list[localEnd + start]; 
```

# android - 退出应用程序时未保存 SharedPreferences

> ID：12115331
> 
> 赞同：2
> 
> 时间：2012-08-24T19:12:04.383
> 
> 标签：android, sharedpreferences, android-2.3-gingerbread

我在 Eclipse 中构建的适用于 Android 的 Gingerbread 2.3.3 应用程序中有 3 个活动。

1) `MainActivity` ---两个选项，去LoginActivity或者直接去HomeScreenActivity

2) `LoginActivity`--- 输入登录凭据（即用户名和密码），验证，然后存储在 SharedPreferences 中。验证成功后，进入 HomescreenActivity。这是我在 LoginActivity 中的 SharedPreferences 部分的内容：

```
public static final String PREFS_FILE = "MY_PREFS";

SharedPreferences prefs = getSharedPreferences(PREFS_FILE, MODE_PRIVATE);
                SharedPreferences.Editor editor = prefs.edit();
                editor.putString("USERNAME", getUsername());
                editor.putString("PASSWORD", getPassword());
                editor.commit(); 
```

3) `HomescreenActivity`--- 一个基本的主屏幕，在 TextView 的右上角显示谁现在已登录。为此，我的 onResume() 包含：

```
public static final String PREFS_FILE = "MY_PREFS";

SharedPreferences prefs = getSharedPreferences(PREFS_FILE, MODE_PRIVATE);
TextView name_text = (TextView) findViewById(R.id.name_text_vw);
name_text.setText(prefs.getString("USERNAME", ""); 
```

当我使用`LoginActivity`和登录时，我在`HomescreenActivity`. 但是，当我退出应用程序并执行一些其他操作以使活动脱离堆栈时，我想返回应用程序，直接转到我的`HomescreenActivity`并查看我的用户名已经登录。但这不会发生。有谁知道为什么？我认为即使在您离开应用程序之后，SharedPreferences 也是存储设置和数据的方式。也许我没有使用正确的模式——又名`MODE_WORLD_READABLE`或`MODE_WORLD_WRITABLE`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:48:56.677

有活动的共享首选项和应用程序的共享首选项。也许您正在使用活动首选项。

要保存到首选项：

```
PreferenceManager.getDefaultSharedPreferences(context).edit().putString("MYLABEL",
      "myStringToSave").commit(); 
```

要获取存储的首选项：

```
PreferenceManager.getDefaultSharedPreferences(context).getString("MYLABEL",
     "defaultStringIfNothingFound"); 
```

上下文是您的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:37:49.883

我不得不说我不知道​​你的具体问题的答案，我怀疑这是因为 getSharedPreferences 不是静态的，而是一个上下文的方法。因此，您无法控制 commit() 何时实际写入存储。但是，我推荐一种不同的方法。

我在扩展应用程序的自定义类中使用静态引用。

```
public class MyApp extends Application

{ 

    protected static SharedPreferences preferences;

    public static void loadPreferences(Context context) {

       // load your preferences

    }

    public static void savePreferences(Context context) {

      // save your preferences

    } 
```

您可以通过 MyApp.preferences 访问它们。

不要忘记将您的应用程序类添加到清单中。

祝你好运！

# mysql - 将表 1 中的第 1 列中的数据复制到表 2 中的第 2 列并忽略重复项

> ID：12115334
> 
> 赞同：0
> 
> 时间：2012-08-24T19:12:08.363
> 
> 标签：mysql, wordpress

我在wordpress中有一个表1

```
wp_term_relationships (
   object_id bigint(20),
   term_taxonomy_id bigint(20),
   term_order int(11)
) 
```

和表 2 作为

```
 wp_test (
    object_id bigint(20),
    term_taxonomy_id bigint(20)
) 
```

现在我正在尝试使用as`wp_term_relationships`中的值进行更新`wp_test`

```
update ignore wp_term_relationships m1 
inner join wp_test m2
on (m1.term_taxonomy_id = m2.term_taxonomy_id)
set m1.object_id = m2.object_id 
```

但是，所有的值`wp_test`都不会更新为`wp_term_relationships`

我什至尝试直接将值`wp_test`插入`wp_test_relationships`

通过使用插入作为

```
insert ignore into wp_term_relationships(object_id, term_taxonomy_id)
select object_id, term_taxonomy_id from wp_test 
```

但它只是更新`term_taxonomy_id`对应值为 0 的值`object_id`或 `object_id`对应`term_taxonomy_id`值为 0的值

如何将这 2 列`wp_test`从`wp_term_relationships`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:25:44.553

我认为你需要的是一个`INSERT` **没有** `IGNORE`和**而** `ON DUPLICATE KEY UPDATE`不是：

```
INSERT INTO 
  wp_term_relationships (object_id, term_taxonomy_id)
SELECT 
  object_id, 
  term_taxonomy_id 
  FROM wp_test
ON DUPLICATE KEY UPDATE 
  wp_term_relationships.term_taxonomy_id = VALUES(term_taxonomy_id) 
```

请注意，这假设您对 wp_term_relationships.object_id 有唯一约束

# 编辑不同的情况：

如果您的意思是构成“重复”的是两列的不同组合，那么您需要在 MySQL 中的两列上添加唯一约束，然后使用您的`INSERT IGNORE`查询：

```
ALTER TABLE wp_term_relationships ADD UNIQUE (object_id, term_taxonomy_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:46:02.593

```
UPDATE wp_term_relationships m1, wp_test m2
SET m1.term_taxonomy_id = m2.term_taxonomy_id
WHERE m1.object_id = m2.object_id; 
```

我假设表是由一个名为“object_id”的列链接的。

# ruby - 使用 Ruby，我如何只打印 MongoDB 查询结果的值

> ID：12115335
> 
> 赞同：1
> 
> 时间：2012-08-24T19:12:17.857
> 
> 标签：ruby, mongodb

我只想打印相关字段的值 ( `name`)。它现在所做的是打印以下内容。

```
nameHOSTA
nameHOSTB 
```

我要打印

```
HOSTA
HOSTB 
```

询问 ...

```
puts collection.find({"environment_name" => role, "type" => "TF"}, {:fields => {"_id" => 0, "name" =>
    1}}).to_a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:00:04.240

我认为这样的事情应该让你想要你想要的：

```
collection.find({"environment_name" => role, "type" => "TF"}, {:fields => {"_id" => 0, "name" =>1}}).each { |item| 
    puts item['name'] 
} 
```

# android - SQLiteException：查询数据库时没有这样的列

> ID：12115337
> 
> 赞同：0
> 
> 时间：2012-08-24T19:12:24.440
> 
> 标签：android, database, sqlite, exception

尝试查询 sqlite 数据库表的所有行时出现以下异常：

```
08-24 20:36:48.134: E/AndroidRuntime(351): java.lang.RuntimeException: 
Unable to start activity ComponentInfo{se.p950tes.workouttracker/se.p950tes.workouttracker.SavedActivity}:
android.database.sqlite.SQLiteException: no such column: col_distance: , 
while compiling: SELECT _id, col_date, col_time, col_distance, col_route FROM workout 
```

我从未更新过数据库，这是我第一次在此设备上安装该应用程序，并且在模拟器上也进行了测试，结果相同。尽管如此，我还是尝试了几次升级版本号，但没有任何变化。

这是我的代码。在 getAll 方法中抛出异常。

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler
{
    public static final String DATABASE_NAME = "workout_tracker";

    private static final String KEY_ID       = "_id";
    private static final String KEY_DATE     = "col_date";
    private static final String KEY_TIME     = "col_time";
    private static final String KEY_DISTANCE = "col_distance";
    private static final String KEY_ROUTE    = "col_route";

    private static final String TABLE = "workout";
    private static final String[] ALL_FIELDS = {KEY_ID, KEY_DATE, KEY_TIME, KEY_DISTANCE, KEY_ROUTE};

    private static final int DATABASE_VERSION = 3;

    private final Context context;
    private DatabaseHelper helper;
    private SQLiteDatabase db;

    public DatabaseHandler(Context context)
    {
        this.context = context;
        this.helper = new DatabaseHelper(context);
    }

    public void connect()
    {
        db = helper.getWritableDatabase();
    }
    public void disconnect()
    {
        db.close();
    }

    public Cursor getAll()
    {
        return db.query(TABLE, ALL_FIELDS, null, null, null, null, null);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        private static final String CREATE = "CREATE TABLE " + TABLE + "("
                                                + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                                                + KEY_DATE + " INTEGER NOT NULL, "
                                                + KEY_TIME + " INTEGER NOT NULL, "
                                                + KEY_DISTANCE + "INTEGER NOT NULL, "
                                                + KEY_ROUTE + " BLOB NOT NULL"
                                                + ");";
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(CREATE);
            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w("DBHandler", "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS "+TABLE);
            onCreate(db);
        }
    }
} 
```

我意识到这个“为什么我得到这个 SQLiteException”的问题被问了很多，但到目前为止，我看到的大多数问题都没有用引号引起来。如果结果是重复的，我提前道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T19:15:32.163

您缺少`"INTEGER NOT NULL, "`.

# delphi - Delphi Intraweb 网站未被谷歌索引

> ID：12115338
> 
> 赞同：0
> 
> 时间：2012-08-24T19:12:27.137
> 
> 标签：delphi, indexing, intraweb

我用 Intraweb 创建了一个网站，它在我的家庭服务器上运行。我有一个在 IIS 中工作的基本 home.html，其中包括重定向到端口 8888。它运行良好，但谷歌不索引 misite:8888，只有 misite 被索引，当我在谷歌搜索 misite 时没有出现标题或描述。我必须在我的 Intraweb Delphi 网站中包含一些说明才能获得它。该网站是 www.raizcuadrada.es，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:26:35.290

您需要调整您的 IW 应用程序以使其对搜索引擎友好。为此，您需要使用 IW XI 或更高版本并在服务器控制器上使用 OnBrowserCheck 事件：http: [//www.atozed.com/intraweb/Blog/20110621B.EN.aspx](http://www.atozed.com/intraweb/Blog/20110621B.EN.aspx)

查看 IW XI / XII 演示 (SEODemo) 以获取示例 (http://www.atozed.com/intraweb/Download/IntraWebDemos.EN.aspx)

# javascript - ASP.Net MVC3 RawUrl 检查

> ID：12115349
> 
> 赞同：1
> 
> 时间：2012-08-24T19:13:04.893
> 
> 标签：javascript, c#, asp.net-mvc-3

我有这个 JavaScript 代码来修改菜单项的类：

```
switch(@Request.RawUrl.Trim()) 
{
    case "/MyInfo":
    case "/":
    case "/MyDocuments":
        // add the javascript here
        break;
} 
```

我的 MyDocuments 网址将始终带有后缀，`?Page=x`其中 x 是文档列表的页码。

如何修改 switch 语句中的代码以使修改后的 URL 包含在菜单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:50:18.237

```
switch (Request.Url.AbsolutePath.ToLower())
{
    case "/myinfo":
    case "/":
    case "/mydocuments":
        // add the javascript here
        break;
} 
```

# android - 带有消息的 Android 自定义 ProgressDialog

> ID：12115350
> 
> 赞同：3
> 
> 时间：2012-08-24T19:13:16.937
> 
> 标签：android, progressdialog

我找到了很多关于如何制作没有文本的自定义 ProgressDialog 的教程。使用自定义图像和消息创建自定义 ProgressDialog 的最简单方法是什么。像这样的东西...

![在此处输入图像描述](../Images/951cc0c4dd1d48a089992fea310b59b6.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-24T19:19:26.307

创建自定义对话框

如果您想要自定义的对话框设计，您可以使用布局和小部件元素为对话框​​窗口创建自己的布局。定义布局后，将根视图对象或布局资源 ID 传递给 setContentView(View)。

例如，要创建如右图所示的对话框：

创建一个保存为 custom_dialog.xml 的 XML 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/layout_root"
              android:orientation="horizontal"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:padding="10dp"
              >
    <ImageView android:id="@+id/image"
               android:layout_width="wrap_content"
               android:layout_height="fill_parent"
               android:layout_marginRight="10dp"
               />
    <TextView android:id="@+id/text"
              android:layout_width="wrap_content"
              android:layout_height="fill_parent"
              android:textColor="#FFF"
              />
</LinearLayout> 
```

此 XML 在 LinearLayout 中定义了一个 ImageView 和一个 TextView。将上述布局设置为对话框的内容视图，并为 ImageView 和 TextView 元素定义内容：

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext);

dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Custom Dialog");

TextView text = (TextView) dialog.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");
ImageView image = (ImageView) dialog.findViewById(R.id.image);
image.setImageResource(R.drawable.android); 
```

实例化对话框后，使用 setContentView(int) 将自定义布局设置为对话框的内容视图，并将布局资源 ID 传递给它。现在 Dialog 已经定义了布局，您可以使用 findViewById(int) 从布局中捕获 View 对象并修改它们的内容。而已。您现在可以显示对话框，如显示对话框中所述。使用基本 Dialog 类创建的对话框必须有标题。如果您不调用 setTitle()，则用于标题的空间仍然是空的，但仍然可见。如果您根本不想要标题，那么您应该使用 AlertDialog 类创建自定义对话框。但是，由于使用 AlertDialog.Builder 类最容易创建 AlertDialog，因此您无法访问上面使用的 setContentView(int) 方法。相反，您必须使用 setView(View)。

要膨胀 XML 布局，请使用 getLayoutInflater()（或 getSystemService()）检索 LayoutInflater，然后调用 inflate(int, ViewGroup)，其中第一个参数是布局资源 ID，第二个参数是根 View 的 ID。此时，您可以使用膨胀布局在布局中查找 View 对象，并为 ImageView 和 TextView 元素定义内容。然后实例化 AlertDialog.Builder 并使用 setView(View) 设置对话框的膨胀布局。

这是一个示例，在 AlertDialog 中创建自定义布局：

```
AlertDialog.Builder builder;
AlertDialog alertDialog;

Context mContext = getApplicationContext();
LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.custom_dialog,
                               (ViewGroup) findViewById(R.id.layout_root));

TextView text = (TextView) layout.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");
ImageView image = (ImageView) layout.findViewById(R.id.image);
image.setImageResource(R.drawable.android);

builder = new AlertDialog.Builder(mContext);
builder.setView(layout);
alertDialog = builder.create(); 
```

为您的自定义布局使用 AlertDialog 可让您利用内置的 AlertDialog 功能，如托管按钮、可选列表、标题、图标等。

有关详细信息，请参阅 Dialog 和 AlertDialog.Builder 类的参考文档。

# java - 在 Java 中读取 BIG XML 文件的一小部分的有效方法

> ID：12115355
> 
> 赞同：4
> 
> 时间：2012-08-24T19:13:30.197
> 
> 标签：java, xml-parsing, sax

我们有一个新要求：

有一些 BIG xml 文件不断进入我们的系统，我们需要立即使用 Java 快速处理它们。该文件很大，但我们处理所需的信息在一个非常小的元素内。……

在我们开始处理之前，从大文件中提取这小部分数据的最佳方法是什么？如果我们尝试加载整个文件，由于大小，我们将立即出现内存不足错误。我可以使用Java中的有效方法来获取 ..data..data..data.. 数据元素而无需逐行加载或读取文件。是否有任何 SAX 解析器可以用来完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:19:48.877

SAX 解析器是基于事件的并且速度更快，因为它们可以满足您的需求：它们不会完全读取 xml 文档。`SAXParser`Java 发行版中有一个可用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T20:16:45.243

我不得不在以前的项目（1G-2G）中解析大文件，并且不想使用 SAX 来处理。我发现 SAX 在某些情况下太低级，并且在大多数情况下喜欢保持遍历方法。

我使用了 VTD 库[http://vtd-xml.sourceforge.net/](http://vtd-xml.sourceforge.net/)。这是一个非常快速的库，它使用指针在文档中导航。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T19:25:01.660

好吧，如果您想读取文件的一部分，*则*需要读取文件的每一行才能识别感兴趣的文件部分，然后提取您需要的内容。

如果您只需要传入 XML 的一小部分，您可以使用 SAX，或者如果您只需要读取特定的元素或属性，您可以使用 XPath，这将更容易实现。

Java 带有一个内置的 SAXParser 实现以及一个 XPath 实现。[在这里](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParser.html)找到 SAXParser和 XPath[的](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html)javadocs 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T20:13:17.920

[StAX](http://en.m.wikipedia.org/wiki/StAX)是另一种基于流数据的选项，如 SAX，但受益于更友好的方法 (IMO)，通过“拉”您想要的而不是“推”给您来处理数据。

# python - 在创建 Python 类时调用类方法

> ID：12115357
> 
> 赞同：12
> 
> 时间：2012-08-24T19:13:40.493
> 
> 标签：python, class-method, initializer

我想在创建类时自动运行一些可以调用其他类方法的代码。我还没有从类声明本身中找到这样做的方法，并最终在类声明之后立即创建一个`@classmethod`被调用`__clsinit__`并从定义范围调用它。有没有我可以定义的方法，以便在创建类对象后自动调用它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T19:17:01.773

您可以使用[**元类**](http://docs.python.org/reference/datamodel.html#customizing-class-creation)或[**类装饰器**](http://docs.python.org/whatsnew/2.6.html#pep-3129-class-decorators)来做到这一点。

类装饰器（从 2.6 开始）可能更容易理解：

```
def call_clsinit(cls):
    cls._clsinit()
    return cls

@call_clsinit
class MyClass:
    @classmethod
    def _clsinit(cls):
        print "MyClass._clsinit()" 
```

元类更强大；他们可以在创建之前和之后调用代码并修改类的成分（也可以继承它们）：

```
def call_clsinit(*args, **kwargs):
    cls = type(*args, **kwargs)
    cls._clsinit()
    return cls;

class MyClass(object):
    __metaclass__ = call_clsinit

    @classmethod
    def _clsinit(cls):
        print "MyClass._clsinit()" 
```

# javascript - 从 rails helper 触发 Javascript

> ID：12115358
> 
> 赞同：1
> 
> 时间：2012-08-24T19:13:42.520
> 
> 标签：javascript, ruby-on-rails, modal-dialog, helper

我有一个 javascript 函数，它在页面上当前的内容上方显示一个登录窗格。我知道在我的控制器中我可以做到：

```
respond_to do |format|
  format.html
  format.js 
end 
```

但我希望能够从我的 session_helpers 方法 signed_in_user 触发 Javascript，该方法放置在我的控制器中，如下所示：

```
:before_filter signed_in_user

def signed_in_user
 unless signed_in?
  store_location
  redirect_to signin_path, notice: "Please sign in."
 end
end 
```

基本上我只需要打电话

```
return false;  //stop the redirect
$('#loginwindow').fadeIn(); or $('#loginwindow').show() 
```

这将允许我处理同时拥有和没有 javascript 的用户，但是无论如何可以从帮助程序中触发这样的 javascript 吗？

# apache - 使用 vhosts 配置的项目服务器设置

> ID：12115359
> 
> 赞同：1
> 
> 时间：2012-08-24T19:13:44.033
> 
> 标签：apache, zend-framework, vhosts

Zend 框架对我来说是新的，我正在研究一本书，所以我可以对事物有一个基本的了解（书是 Zend Framework A Beginners Guide）。

我已经建立了我的项目并在一个名为“test”的文件夹中创建了它

我还添加了一个 vhost，vhosts 文件包含：

```
<VirtualHost *:80>
   DocumentRoot "C:/Program Files/Zend/Apache2/htdocs/test/public"
   ServerName .localtest

   # This should be omitted in the production environment
   SetEnv APPLICATION_ENV development

   <Directory "C:/Program Files/Zend/Apache2/htdocs/test/public">
       DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

</VirtualHost> 
```

我已经从 apaches conf 文件中调用了 vhosts 文件

我还在 system32 hosts 文件中添加了一行：

```
127.0.0.1 test.localtest 
```

我的问题是，当我浏览到[http://test.localtest/](http://test.localtest/)时，我得到了 zend 服务器测试页面，从我正在阅读的内容开始，我应该得到 Zend Framework 项目主页启动画面，我可以通过浏览到[http://test.localtest/test/public/](http://test.localtest/test/public/)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:41:02.617

尝试改变

```
<VirtualHost *:80>
   DocumentRoot "C:/Program Files/Zend/Apache2/htdocs/test/public"
   ServerName .localtest 
```

到

```
<VirtualHost *:80>
   DocumentRoot "C:/Program Files/Zend/Apache2/htdocs/test/public"
   ServerName test.localtest 
```

**编辑**

好的，我检查了我的系统，它运行良好，但我正在使用 ubuntu 希望这会有所帮助

编辑这个文件

```
C:\Program Files\Zend\Apache2\conf (Zend Server on Windows machines) 
```

并添加此代码

```
<VirtualHost *:80>
    ServerName test.localtest
    DocumentRoot "C:/Program Files/Zend/Apache2/htdocs/test/public"

    SetEnv APPLICATION_ENV "development"

    <Directory "C:/Program Files/Zend/Apache2/htdocs/test/public">
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

然后编辑这个文件

```
C:\WINDOWS\system32\drivers\etc\hosts 
```

并添加这一行

```
127.0.0.1 test.localtest 
```

然后不要忘记重新启动您的 apache 服务器（wamp 或 xampp 或您正在使用的任何东西）

然后打开这个链接

```
http://test.localtest 
```

尝试编写 url`http://`有时浏览器无法正常工作`http://`

如果不起作用，请尝试评论

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T07:03:39.927

大多数人都错过的一件事是 Zf 需要 FollowSymlinks 大部分时间都可以工作。

这是我通常在我的虚拟主机中使用的目录定义

```
<directory "C:\www\project">
    Options Indexes FollowSymlinks
    AllowOverride all
    Order Deny,Allow
    Allow from all
</directory> 
```

不确定 DirectoryIndex 将如何影响这一点。

确保在 Apache 中启用了 mod_rewrite：

```
LoadModule rewrite_module modules/mod_rewrite.so //make sure this line is uncommented httpd.conf 
```

在 apache 中启用了 make vhosts：

```
Include conf/extra/httpd-vhosts.conf //make sure this line is uncommented httpd.conf 
```

确保此行出现在您的 vhosts 文件中，通常位于 vhosts 定义的上方：

```
NameVirtualHost *:80 
```

# c# - Linq 和匿名类型

> ID：12115360
> 
> 赞同：0
> 
> 时间：2012-08-24T19:13:52.670
> 
> 标签：c#, linq

```
select new
{
 Selected = (cvf != null && cvf.Deleted==false)
} 
```

即使 cvf 为空，上述语句也会继续检查 cvf.Deleted。然后它抛出一个无效的对象引用错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:16:25.950

`&&` *可能会* 发生其他事情，因为[短路评估](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.110%29.aspx)。也就是说，试试这个：

```
select new
{
    Selected = cvf != null
        ? !cvf.Deleted
        : false
}; 
```

# web-services - 如何在 SharePoint 网站中使用 asp.net Web 服务？

> ID：12115365
> 
> 赞同：0
> 
> 时间：2012-08-24T19:14:12.193
> 
> 标签：web-services, sharepoint-2010, infopath2010, infopath-forms-services

我在 VS 2010 中创建了 asp.net Web 服务应用程序。我在 VS 2010 中使用 ASP.NET Web 服务应用程序模板创建了这个 Web 服务。我的 InfoPath 表单使用了我的 Web 服务。但是，要填写我的 IP 表格，我首先必须确保我运行我的网络服务，否则我会收到无法连接到网络服务之类的错误。

如何确保我的 Web 服务正确部署到托管 infoPath 表单服务的 SharePoint 网站？请让我知道必要的步骤。如果我的 Web 服务部署到我的 SharePoint 站点，则无需在每次需要填写表单时在浏览器中手动运行我的 asp.net Web 服务。谢谢。

![在此处输入图像描述](../Images/89baf918a013c9d4e859ed6f0368e8ec.png) 这是我尝试浏览部署到布局文件夹的自定义 Web 服务时收到的错误消息：

```
http://abcd/_layouts/WebServiceDemo/MyCustomWebService.asmx 
```

我在 14-->LOGS 中找不到相关消息。知道是什么原因造成的吗？谢谢。我自己的分析：请访问 LAYOUTS 文件夹中的 web.config 并将 Customerros 设置为 Off 以获得更有意义的错误消息。

![在此处输入图像描述](../Images/0d944c43c946a5eb0985979ea1d7a6fd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:31:54.050

我在 Google 上搜索了“如何在 SharePoint 网站中使用 asp.net Web 服务”。

第三次点击是[演练：在 SharePoint 2010 中创建自定义 ASP.NET (ASMX) Web 服务](http://msmvps.com/blogs/windsor/archive/2011/11/04/walkthrough-creating-a-custom-asp-net-asmx-web-service-in-sharepoint-2010.aspx)。这篇文章展示了如何创建、部署和使用服务。

# javascript - 需要摆脱许多如果

> ID：12115366
> 
> 赞同：0
> 
> 时间：2012-08-24T19:14:20.367
> 
> 标签：javascript, refactoring

我的 java 脚本中有全局变量。现在每次调用内部函数时我都会得到不同的值。我需要创建一个选项标签，其中包含属性中的选定值和一个基于变量没有选定值的选项标签。我想这更令人困惑，让我举个例子。

```
var a1 = "a1c" // default value but may change

if(a1 == "all")
{
    var allstatusdefault = '<option value="all" selected="selected">All</option>';
}
else
{
    var allstatusdefault = '<option value="all" >All</option>';
}

if(a1 == "a1b")
{
    var allstatusdefault1 = '<option value="a1b" selected="selected">a1b</option>';
}
else
{
    var allstatusdefault1 = '<option value="a1b" >a1b</option>';
}

if(a1 == "a1bc")
{
    var allstatusdefault2 = '<option value="a1bc" selected="selected">a1bc</option>';
}
else
{
    var allstatusdefault2 = '<option value="a1bc" >a1bc</option>';
} 
```

这只是示例，但我必须生成许多具有不同值的选项标签。如果..任何人有其他想法，我不想写信给很多人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:20:16.213

提取公共代码，我在这里看到很多重复。

```
var a1 = "a1c";

function buildOption(id) {
    var selected = (a1 == id? ' selected="selected"' : '');
    return '<option value="' + id + '"' + selected + '>' + id + '</option>';
}

var allstatusdefault =  buildOption('all');
var allstatusdefault1 = buildOption('a1b');
var allstatusdefault2 = buildOption('a1bc'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:18:37.710

从我这里可以推断出你应该做什么

```
var default1 = '<option value="'+a1+'" selected="selected">'+a1+'</option>';
var default2 = '<option value="'+a2+'" selected="selected">'+a2+'</option>'; 
```

由于`a1`在字符串中重用了的值，不如直接设置它而不是使用多个 if 语句。

注意：当你有很多 if 语句时，这是使用 switch 语句的绝佳机会

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:18:18.043

对于初学者，了解[`switch...case`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch). 在您的情况下，您似乎可以通过将变量连接到字符串来简单地使用变量本身来形成字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T19:21:47.307

```
 var a1 = "a1bc" // default value but may change
    switch(a1)
        {
        case "all" : allstatusdefault = '<option value="all" selected="selected">All</option>';break;
        case "a1b" : allstatusdefault = '<option value="a1b" selected="selected">a1b</option>'; break;
        case "a1bc" :  allstatusdefault = '<option value="a1bc" selected="selected">a1bc</option>'; break;
        default :  allstatusdefault = '<option value="all" >All</option>';break;
        }
    window.alert(allstatusdefault); ​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-24T19:22:13.607

我认为从您编写代码的方式来看，您可以使用 jQuery 来完成。首先创建整个 HTML，所有选项值都使用 jQuery 对象，如下所示：

`var $optionHTML = $('<option value=""> Blahblah </option>')`; 现在你可以将所有 jquery 函数应用到这个人身上。所以你附加一个这样的新选项。

`$optionHTML.append('<option>...</option>')`

当您完成所有选项元素时，使用 jquery 选择器方法查找具有值属性匹配的选项的元素，`a1c`然后添加属性`selected`，然后您就完成了。

如果您需要一些初学者代码，请告诉我。

谢谢。

编辑 ：

这是答案

```
<html>
<head>
    <script type = "text/javascript" src= "http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type = "text/javascript">
        $(document).ready (function () {
            var value = "test 2";
            $select = $("<select></select>");
            $optionHTML1 = $('<option value="test 1">Test 1</option>');
            $optionHTML2 = $('<option value="test 2">Test 2</option>');
            $optionHTML1.appendTo($select); 
            $optionHTML2.appendTo($select);
            $select.find("[value='test 2']").attr('selected','selected');
            alert($select.html());  
            $("div").append($select);
        });
    </script>
    <style type = "text/css">
    </style>
</head>
<body>
    <div>
    </div>
</body> 
```

# javascript - 在 touchmove 事件之前忽略 touchend 事件

> ID：12115371
> 
> 赞同：0
> 
> 时间：2012-08-24T19:14:55.167
> 
> 标签：javascript, android, jquery, ios, mobile

使用 jquery，我有一个在 touchend 上触发的事件。我不希望在用户滚动（touchmove）时触发该事件。我在 SO 上找到的唯一东西就是[this](https://stackoverflow.com/questions/9648863/canceling-touchend-event-when-touchmove-starts)，但我不喜欢它。感觉很hacky。想到如果不设置全局标志就无法解决这个问题，只是为了检查是否发生了触摸移动，这让我很头疼。

有没有办法弄清楚事件的顺序？封装所有发生的触摸事件的包装器。因为这是为了工作和不想用库来膨胀我们的代码库的权力，所以我不能使用外部库，但是如果有人知道一个具有此功能的库，我可以仔细阅读以寻找灵感有帮助。

# android - Android：单击搜索时，ActionBar 图标和导航下拉菜单之间的边距会发生变化

> ID：12115372
> 
> 赞同：6
> 
> 时间：2012-08-24T19:15:00.867
> 
> 标签：android, android-actionbar

我有以下设置：

![发射时](../Images/ff5e47542b13bc95639869fe9ba63ded.png)

因此，您可以单击操作栏的搜索图标变成搜索栏。很标准：

![搜索](../Images/3d82e55f0905e8454744fa2bc713731e.png)

因此，如果您完成搜索，您可以单击主页图标使该栏消失：

![还原](../Images/8196aa8a73c5e4307933fdb3cffbfa9f.png)

但是当您返回时，导航下拉菜单会向右移动很多：

![错误的！](../Images/bf2ad4266a1847d244f5a2e0d64d0001.png)

我真的无法弄清楚这里发生了什么。我做的第一件事是制作一个全新的应用程序并重新创建它（如下所示），以确保它不是我在主应用程序中使用的样式或主题的问题。这对问题没有帮助。我正在使用 ActionBarSherlock，所以我接下来要做的是使用 Google 的官方 Action Bar API 重建项目。那也没有什么不同。

有没有人有任何想法？我会提供你们认为可以提供帮助的任何代码，但我几乎直接从 Google 的文档中获取了实现。谢谢！

编辑：添加一些带有可见布局边框的前后图像（4.1+ 中的开发选项功能）

前：

![好的](../Images/d0397044518b8207fb40a3204bb22d47.png)

后：

![坏的](../Images/689a27c627b8d01a80407f69bb1cea15.png)

我还包括了菜单 XML：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:id="@+id/abm_search"
    android:icon="@android:drawable/ic_menu_search"
    android:showAsAction="always|collapseActionView"
    android:actionViewClass="android.widget.SearchView" />

<item android:id="@+id/abm_location"
    android:title="Stuff"
    android:showAsAction="never" />

<item android:id="@+id/abm_radius"
    android:title="More Stuff"
    android:showAsAction="never" />

<item android:id="@+id/abm_settings"
    android:title="Other Stuff"
    android:showAsAction="never"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T20:29:43.090

发现了问题。我给操作栏起了一个标题“”。相反，如果您为操作栏提供此显示选项：

`actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_HOME);`

它解决了这个问题。希望这对其他人有帮助。

# php - 检测未选中的复选框php

> ID：12115373
> 
> 赞同：4
> 
> 时间：2012-08-24T19:15:03.660
> 
> 标签：php

有没有办法用php检查复选框是否未选中？我知道您可以在 html 中执行隐藏字段类型，但是在提交表单时仅使用 php 呢？我试过下面没有运气。

```
if(!isset($_POST['server'])||$_POST['server']!="yes"){
        $_POST['server']     == "No";
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T19:17:46.077

如果未选中复选框，则不会发布。`if(!isset($_POST['checkboxname']))`会成功的。

但是请注意，您至少应该提交*一些*内容，以便您知道表单是首先提交的。

```
if (isset($_POST['formWasSubmitted'])) {
    //form was submitted...let's DO this.

    if (!isset($_POST['checkboxname'])) {
        // checkbox was not checked...do something
    } else {
        // checkbox was checked. Rock on!
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-30T15:47:46.357

这是一个老问题，但对于寻找这个的人来说......

对马特的回答更好的方法是`$_SERVER['REQUEST_METHOD']`检查表单是否已提交：

```
if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) {
    //form was submitted...let's DO this.

    if (!isset($_POST['checkboxname'])) {
        // checkbox was not checked...do something
    } else {
        // checkbox was checked. Rock on!
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:17:26.047

```
$checkedfeild = @$_POST["yourfeildname"];

if(isset($checkedfeild))
{
 //Code here
}
else
{
echo"Not checked";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-13T01:43:31.973

尝试这个：

```
$checked = $_POST['notif'];
foreach($checked as $ch){
    if($ch == $i){
       /add element to checked set
       $array_checked[]=$ch;
    }
}
for($i=1;$i<6;$i++){
    if(in_array($i,$array_checked)){
        //do for checked
    }else{
        //do for unchecked
    }
} 
```

# c# - 左外连接，对象引用未设置为对象的实例

> ID：12115393
> 
> 赞同：3
> 
> 时间：2012-08-24T19:16:22.200
> 
> 标签：c#, linq-to-sql, c#-3.0, linq-to-objects

我正在尝试对 2 个对象执行左外连接并收到错误：**对象引用未设置为对象的实例。**

对象看起来像这样

```
 var deliverables = OCHART.GetACAPValues(organization, ReportingPeriod, FiscalYear, "(09-10.10a) Outreach Significant").ToList();
  var references = (from rf in OCHART.References where rf.RefType.Equals("09-10.10a") && rf.Comments.Equals("2") select rf).ToList(); 
```

其中可交付成果通常可能返回 0 条记录。不幸的是，我不能只是去连接数据库中的两个表，因此可交付成果必须是一个对象。

有人可以指出我正确的方向吗

谢谢，

我的代码是

```
 var items = (from rf in references
              join pt in deliverables on rf.Description equals pt.b into prt
              from x in prt.Where(prt2 => prt2.a.Equals(audience)).DefaultIfEmpty()
              where rf.RefType.Equals("09-10.10a") && rf.Comments.Equals("2")
              select new 
              {
                    audience = (string)(audience == null ? "" : audience),
                    RefType = (string)(rf.RefType == null ? "" : rf.RefType),
                    RefOrder = (int)(rf.RefOrder == null ? 0 : rf.RefOrder),
                    refName = (string)(rf.Description == null ? "" : rf.Description),
                    collumn_attr = (string)(x.b == null ? string.Empty : x.b),
                    value = (int)(x.ACAP == null ? (int?)null : x.ACAP)
               })
               .OrderBy(o => o.RefOrder)
               .Take(9)
               .ToList(); 
```

**编辑：** 经过更多调试后，我的代码中的以下行似乎出现错误

```
collumn_attr = (string)(x.b == null ? string.Empty : x.b),
value = (int)(x.ACAP == null ? (int?)null : x.ACAP) 
```

我注意到即使我在可交付成果中有值（添加用于测试）并且当值匹配时查询将正确执行，但是当可交付成果中没有匹配时，那是我收到错误消息的时候。

问题可能与处理空值有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T01:27:39.073

我认为`x`是 null 并导致`NullReferenceException`以下几行：

```
collumn_attr = (string)(x.b == null ? string.Empty : x.b),
value = (int)(x.ACAP == null ? (int?)null : x.ACAP) 
```

这个判断是基于`from x in`线路的`DefaultIfEmpty()`调用，典型的左外连接。

在数据库代码中，您会编写类似的东西`x.ACAP == null`来检测没有匹配的连接元素的情况。如果你改变这个，用“x == null”检查替换“x.property == null”检查，我怀疑你的问题会解决。

第二行仍然存在问题 - 如果您尝试将值强制`(int?)null`转换为整数，您将在运行时遇到异常。在这种情况下使用有意义的默认`int`值（例如 0）`x == null`可以清除该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:28:03.443

如果您单步执行您的代码，在执行查询之前，您是否真的看到“可交付成果”和“参考”被填充了数据？

调查您在查询中使用的所有子表/属性。您收到该错误的原因很可能是因为您在比较时使用的属性之一为空。.RefType .Comment 例如。也许 .RefType 为 null 并且在最后排序时遇到问题。很难说没有看到这两个系列中有什么。

在您的评论后添加：

请注意，当您的变量可能为空时，最好不要使用 .Equals()。使用 == 代替。参考： http: [//www.dotnetperls.com/string-equals](http://www.dotnetperls.com/string-equals)

还可以想象`(x.ACAP == null ? (int?)null : x.ACAP)`返回一个`null`. 您正在将整个内容转换为 int : `value = (int)(x.ACAP == null ? (int?)null : x.ACAP)`。转换`null`为 n`int`显然会失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T16:13:17.457

仅作记录，C# 6.0 中新的 Null 条件运算符可以这样使用：

```
 collumn_attr = x?.b ?? string.Empty,
                value = x?.ACAP 
```

# sql-server - 发布 Oracle 和 SQL Server 性能测试是否违反许可？

> ID：12115397
> 
> 赞同：20
> 
> 时间：2012-08-24T19:16:33.880
> 
> 标签：sql-server, performance, oracle, geospatial, database

我想对 Oracle 和 SQL Server 中的空间索引进行性能测试。我想把它包括在我的理学硕士工作中。发布这种结果是否违反 dbms 的许可？

也许有人已经遇到过这种问题？我不热衷于挖掘无聊的许可证内容；）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-24T21:25:48.230

当您从 Oracle 技术网 (OTN) 下载软件时，您同意的[标准许可](http://www.oracle.com/technetwork/licenses/standard-license-152015.html)声明您不得披露基准。

```
You may not: 
<<list of things you cannot do>>
- disclose results of any program benchmark tests without our prior consent. 
```

Microsoft 的许可证（例如[较旧的 SQL Server 7.0 许可证](http://contracts.onecle.com/aristotle-international/microsoft-eula.shtml)）通常具有类似的条款

> 性能或基准测试。未经 Microsoft 事先书面批准，您不得向任何第三方披露 Microsoft SQL Server、Microsoft Exchange Server 或 Microsoft 代理服务器的服务器软件或客户端软件的任何基准测试结果。

大多数其他大公司在他们的许可协议中加入了类似的条款。这些许可条款在您的案件中是否实际上可以作为法律问题执行（特别是在这是一项学术活动的情况下），以及任何一家公司是否会认真考虑就硕士论文的发表提起诉讼，这些都是您需要与您的大学的法律部门（和/或拥有您正在使用的软件许可证的人的法律部门）。实际上，我认为两家公司都不太可能认真考虑起诉一个没有钱的硕士生，因为基准测试结果不佳。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T19:24:24.713

我认为您不能许可阻止有效的研究论文。这就像福特说您无法验证其排放声明一样。类似产品/服务的禁言令通常不合法，即使条款表明您同意。如果您的实验方法或研究分析存在缺陷，您可能会因诽谤或诽谤而被起诉。

**很难以不会被起诉的方式对公司标准进行基准测试。**

这里已经有一篇关于 Oracle 技术的论文。[http://www.iisocialcom.org/conference/passat2012/PASSATProceedings/data/4578b119.pdf](http://www.iisocialcom.org/conference/passat2012/PASSATProceedings/data/4578b119.pdf)

“我不热衷于挖掘无聊的许可证内容” 好吧，如果您害怕被起诉，也许您应该热衷于。

这是 7 月的 Oracle 许可证。快速浏览，我没有看到任何限制。[http://docs.oracle.com/cd/E11882_01/license.112/e10594.pdf](http://docs.oracle.com/cd/E11882_01/license.112/e10594.pdf)

除非您将具体技术详细说明到版本或许可/使用条款的链接，否则我们无法具体说明。

这是关于“堵嘴”政策的有趣读物，但它是从 2007 年开始的。 [http://genellebelmas.com/documents/Belmas-Larson-Clicking%20away.pdf](http://genellebelmas.com/documents/Belmas-Larson-Clicking%20away.pdf)

结论中值得注意的是：第一修正案的判例为听证权的概念提供了相当大的支持。使用第一修正案直接攻击 gagwrap 条款将需要首先找到国家行动。然而，即使没有国家行动，第一修正案也提供了一个重要的公共政策基础，据此可能会发现堵嘴条款无法执行。在评估 gagwrap 条款时，这种公共政策原理将如何与合同重述框架一起工作还有待观察。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:22:40.673

如果您为此目的使用“Oracle 数据库快捷版”，我想您可以。但是我想用 Express 版的许可文件与律师进行快速咨询会很聪明。

# ruby-on-rails-3 - 无法设置一个有很多的活动管理资源表单：通过 assoc

> ID：12115403
> 
> 赞同：0
> 
> 时间：2012-08-24T19:17:04.343
> 
> 标签：ruby-on-rails-3

我正在开发一个 rails (3.7.8) 应用程序并使用活动管理员来管理 ff 模型的资源：

```
class AdminUser < ActiveRecord::Base
  has_many :user_article_categories, :include => :article_categories  
  has_many :article_categories, :through => :user_article_categories, 
:source => :admin_user  
  has_many :articles, :through => :user_article_categories, 
:source => :admin_user
  # ...
end

class UserArticleCategory < ActiveRecord::Base
  belongs_to :admin_user
  belongs_to :article_category
  attr_accessible :admin_user_id, :article_category_id, :included
  attr_accessor :included
  after_find :set_included

  private

  def set_included
    self.included = "1"
  end
  # ...
end 
```

“包含”属性基于[此处提供的解决方案](http://tech.thereq.com/post/12671192370/rails3-forms-for-has-many-through-and-nested-models)

```
class ArticleCategory < ActiveRecord::Base
  has_many :user_article_categories, :include => :admin_users
  has_many :admin_users, :through => :user_article_categories, 
:source => :article_category
  has_many :articles, :through => :user_article_categories, 
:source => :article_category
  # ...    
end 
```

但我似乎没有为 admin_users 设置（正确）表单，这样创建新的 admin_user 会将所有 article_categories 显示为复选框列表

虽然用于更新的持久 admin_user 将显示所有 article_categories 复选框，但会检查所有先前设置的文章类别，以便更新将删除未选中的复选框并将新选中的复选框添加到连接表中

对于 admin/admin_users.rb 我创建如下表单，这不起作用，虽然它呈现正确，任何帮助将不胜感激

```
form do |f|
  if f.object.persisted? and current_admin_user.id == f.object.id
    f.inputs "Admin Details" do
      f.input :email
      f.inputs :for => user_article_categories do |usr_art_catr|
        usr_art_catr.input :article_category_id, :hidden
        usr_art_catr.input :included
      end
    end
  else
    f.inputs "Admin Details" do
      f.input :email
      f.input :superuser, :label => "Super User Priveleges"
      f.input :article_categories, :as => :check_boxes, 
    :collection => ArticleCategory.select("id, name")
    end
  end
  f.buttons
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:44:13.683

实际上，要显示所有 article_categories 的复选框列表，并在更新时检查给定 admin_user 的所有已检查的文章类别。

Formtastic，在为表单对象渲染显示表单时，通过调用表单对象上提供的方法

```
f.input :method_to_be_called, :as => :checkboxes 
```

哪个 formtastic 会将其结果与通过

```
:collection => any_valid_ruby_object 
```

但两者都应该返回相同的种类；数组/数组或哈希/哈希，无论如何，通过对两个集合执行差异来确定应该检查哪些复选框。

formtastic 调用的方法可以是 admin_user 上查询连接表的实例方法，以确定应检查哪些复选框并从相关的 article_categories 表中构建一个数组，或者在没有时返回一个空数组。

这允许 formtastic 做正确的事情，至少在这种情况下是这样。此解决方案使 user_article_categories（连接表）上的“包含”属性变得多余！

# javascript - 在鼠标悬停时更改映射图像热点的背景

> ID：12115412
> 
> 赞同：3
> 
> 时间：2012-08-24T19:17:42.793
> 
> 标签：javascript, html, css, imagemap

我有 3 个多边形的图像映射。实际的图像热点是由多条曲线和边缘组成的复杂形状。

```
<img src="/images/map.gif" alt="HTML Map" 
        border="0" usemap="#map"/>

<map name="map">
   <area shape="poly" 
            coords="74,0,113,29,98,72,52,72,38,27"
            href="index.htm" alt="area1" />

   <area shape="poly" 
            coords="22,83,126,125"
            href="index.htm" alt="area2" />

   <area shape="poly" 
            coords="73,168,32"
            href="index.htm" alt="area3" />
</map> 
```

我创建了一个名为 map_over.gif 的 map.gif 副本，以不同的颜色呈现。我想做的是在鼠标悬停时将 map.gif 的可点击热点内的区域更改为 map_over.gif。关于如何使用 CSS 或 Javascript 完成此任务的任何建议？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:22:28.903

a这是一个简单的。

html:

```
<img src="/images/map.gif" alt="HTML Map" border="0" usemap="#map" id="mappedImage" /> 
```

CSS：

```
img#mappedImage:hover {
    background: url("/images/map2.gif") no-repeat scroll 0 0 transparent;
} 
```

应该做的伎俩。您也可以使用 background-image: url("/images/map2.gif") - background 同时提供更多选项，例如 background-repeat、background-position 等。

至于关于 css 的任何问题，我可以推荐[http://www.css4you.de/borderproperty.html](http://www.css4you.de/borderproperty.html)作为一个很好的参考站点，其中有很好的例子。

# c# - 如何为多个应用程序建模核心业务逻辑和专业化？

> ID：12115415
> 
> 赞同：0
> 
> 时间：2012-08-24T19:17:45.047
> 
> 标签：c#, oop, business-logic-layer

我有一些复杂的场景，我一直在尝试确定一个好的模型。基本思想是我有一个业务逻辑层，由在同一域中工作的多个应用程序共享。某些次要功能（例如安全性和可用信息）因应用程序而异。

我有一个特定于应用程序的类要在每个应用程序中使用（由工厂提供）。这将确保在每个应用程序中，唯一加载的对象是与当前应用程序相关的类型。

我遇到的问题是，如果我有一个从核心逻辑类 A 和 A 的应用程序特定版本继承的核心逻辑类 B，我需要某种方法来让 B 的应用程序特定版本以它的方式运行对 B 进行了更改，对 A 进行了更改。

我意识到这是一个经典的多重继承问题，但我想我会在这里查看是否有人对允许应用程序特定和核心共享功能的替代模型有任何想法。

在这一点上，我的另一种选择是简单地禁止在任何应用程序特定代码中进行继承，并要求将任何公共应用程序特定代码写入两个非相关应用程序特定叶使用的共享库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:49:04.420

这样做的最终结果是，每个应用程序的继承需要限制在叶子中，并且跨多个叶子的应用程序特定的任何内容都需要分解为可以包含的类。不理想，但可以在没有多重继承的情况下做到最好。

# sharepoint - EPM Project Server 2010 - PSI - 以编程方式分配项目权限

> ID：12115416
> 
> 赞同：0
> 
> 时间：2012-08-24T19:17:46.137
> 
> 标签：sharepoint, permissions, project, psi, epm

我需要在创建项目时为其分配权限。我已经创建了一个在创建项目时运行的事件，但我没有找到 PSI 的哪些方法可用于为项目中的组和用户分配权限。澄清一下，我想做的与“项目权限”部分中所做的相同，但以编程方式。

如果您可以添加一些代码，我会感谢您。对不起我的英语：P。

谢谢迭戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:21:18.733

具有权限的人员和组通过安全类别进入 Project。在 2010 中有 2 种类别：在服务器设置 -> 管理类别中定义的全局类别和通过项目中心的项目权限提供的项目类别。所以这是关于 PWA 的。

对于 PSI，WebSvcSecurity 中提供了所有内容：http: [//msdn.microsoft.com/en-us/library/gg221489 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/gg221489%28v=office.14%29.aspx)

关键方法是：

*   CreateCategories / CreateProjectCategories - 创建任何此类
*   ReadProjectCategory / ReadCategory - 查询类别
*   SetCategories / UpdateProjectCategories - 更新类别：添加/删除用户，授予/撤销权限。

# java - Eclipse 调试器是否支持保存/恢复或检查点/倒带？

> ID：12115417
> 
> 赞同：11
> 
> 时间：2012-08-24T19:18:05.003
> 
> 标签：java, debugging

我的意思是以下，通过一个例子来说明：

我启动我的 Java 应用程序（它恰好是一个模拟器）。应用程序运行 1 小时并失败。我想以调试模式重新启动我的应用程序，将其运行到第 59 分钟，然后开始逐步执​​行代码。在任何时候，我都想回到第 59 分钟时的状态并重新开始调试。

Eclipse 或某些插件是否有这样的支持？如果没有，是否有其他可以使用的开源应用程序？

这可以通过使用 VM 并简单地保存感兴趣点的状态来完成。但我想知道是否有更本机/更快的 Java 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:17:38.100

我知道在 Java 中执行此操作的唯一可能解决方案是来自 Chronon [http://www.chrononsystems.com/](http://www.chrononsystems.com/)的调试器，它与 Eclipse IDE 集成。

这个想法是你记录一个调试会话，让你回放它。尽管这是非开源和许可软件，但它仍然是一个很酷的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T17:01:19.667

这可以使用虚拟机并在所需的调试状态下拍摄快照来完成。然后，您可以一遍又一遍地应用此快照，尽管此解决方案需要相当长的时间。

# python - 来自文本的 Pandas 时间序列

> ID：12115421
> 
> 赞同：0
> 
> 时间：2012-08-24T19:18:31.217
> 
> 标签：python, time-series, pandas

Python 在 Pandas 中有时间序列库。我在 python 程序中有一个文本文件，它是最常用词和天数的简单计数器。我可以使用 Pandas 库为最常用词制作简单的时间线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:14:38.503

是的。不知道数据的确切结构，很难给你准确的代码，但是一旦你学习了这个库，它应该不是很困难。查看[我即将出版的书](http://shop.oreilly.com/product/0636920023784.do)（/shameless self Promotion）或 pandas 文档以获取良好的学习资源。

# php - Yii clientScript 渲染抛出错误

> ID：12115427
> 
> 赞同：0
> 
> 时间：2012-08-24T19:19:09.850
> 
> 标签：php, yii

我有以下部分观点：

```
<?php
Yii::app()->clientScript->registerPackage('nivo-slider');
Yii::app()->clientScript->render(); 
```

但是，我收到一条错误消息`Missing argument 1 for CClientScript::render(),`

render 方法需要哪些参数？我检查了文档，但找不到任何确定的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:22:58.417

[他们对我来说似乎很清楚](http://www.yiiframework.com/doc/api/1.1/CClientScript#render-detail)。您需要向它传递一个引用变量，该变量将保存渲染字符串的值。

```
// as an example:
$output = NULL;
Yii::app()->clientScript->render($output);
// you can now do something with output! 
```

# javascript - 灯箱中的 jQuery 视频

> ID：12115429
> 
> 赞同：1
> 
> 时间：2012-08-24T19:19:19.710
> 
> 标签：javascript, jquery, html, video

我正在构建一个灯箱，并已添加对 Flash 和视频的支持。我从来没有对视频有任何要求或需要，所以说实话不知道从哪里开始。我知道我必须能够为不同的浏览器提供不同的视频格式，但不知道如何解决这个问题。我也希望在“非现代”浏览器中进行这项工作。我发现的教程和问题非常模糊，通常会导致“尝试使用此插件”。也许有人可以帮助解释我将如何加载与浏览器兼容的视频，以及我应该支持的视频格式？或链接:) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:24:31.820

我只是做了同样的事情。我使用了[Fancybox](http://fancybox.net/)和[Video for](http://camendesign.com/code/video_for_everybody) Everyone 的组合。

基本上，Video for Everyone 背后的想法是，您可以将 HTML5`video`标签与嵌入式 Flash 视频播放器一起用于不支持 HTML5 视频的浏览器。对于嵌入式 Flash 播放器，我使用[了 JWPlayer](http://www.longtailvideo.com/players)。

然后您只需制作类似`<a href="#videoPlayer" class="video_link">Play Video</a>`的内容并将 Fancybox 指向链接。瞧，您在 Fancybox 中有一个视频（与 Lightbox 大致相同）。

为了跨浏览器的兼容性，[您应该提供 MP4（使用 H.264 编解码器）和 WebM 或 Ogg 格式的文件](http://html5doctor.com/multimedia-troubleshooting/#video-support)。不支持 HTML5 视频的旧版浏览器无论如何都会使用 Flash 播放器作为 MP4 文件的后备。

MP4 文件要记住的一件事是[moov atom](http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html)通常放在文件的末尾，因此文件在完全下载之前无法开始播放。使用[qt-faststart](http://multimedia.cx/eggs/improving-qt-faststart/)之类的工具将其移动到文件的开头，使其在完全下载之前开始播放。

* * *

**例子：**

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("a.video_link").fancybox();
        });
    </script>
</head>
<body>
    <a href="#videoPlayer" class="video_link">Play video</a>
    <video width="640" height="360" controls id="videoPlayer">
        <source src="__VIDEO__.MP4" type="video/mp4" />
        <source src="__VIDEO__.OGV" type="video/ogg" />
        <object width="640" height="360" type="application/x-shockwave-flash" data="__FLASH__.SWF">
            <param name="movie" value="__FLASH__.SWF" />
            <param name="flashvars" value="controlbar=over&amp;image=__POSTER__.JPG&amp;file=__VIDEO__.MP4" />
            <img src="__VIDEO__.JPG" width="640" height="360" alt="__TITLE__" title="No video playback capabilities, please download the video below" />
        </object>
    </video>
</body>
</html> 
```

# cocos2d-iphone - cocos2d 创建 CCParticlySystemQuad

> ID：12115432
> 
> 赞同：0
> 
> 时间：2012-08-24T19:19:27.340
> 
> 标签：cocos2d-iphone, ccparticlesystem

这个函数什么都不做，大约 30 秒后 fps 开始下降。我想知道我必须做什么才能正确显示 ccparticle。

这是我的代码：

```
-(void) coccomilk:(CGPoint) p{

   CCParticleSystemQuad *milk = [[[CCParticleSystemQuad alloc] initWithTotalParticles:100 ] autorelease];

   milk.texture = [[CCTextureCache sharedTextureCache] addImage:@"milk.png"];
   milk.emitterMode = kCCParticleModeGravity;
   milk.totalParticles = 100;
   //milk.particleCount = 100;
   milk.life = 0.2f;
   milk.lifeVar = 0.1f;
   milk.startSize = 32;
   milk.startSizeVar = 32;
   milk.endSize = 2;
   milk.endSizeVar = 0;
   milk.angle = 90;
   milk.angleVar = 42;
   //milk.rotation = 0;
   //milk.rotatePerSecond = 0;
   //milk.rotatePerSecondVar = 0;
   milk.speed = 651;
   milk.speedVar= 335.5;
   milk.gravity = ccp(0,-2.72);
   //milk.blendAdditive = NO;
   milk.duration = 0.08;
   //milk.blendFunc = (ccBlendFunc) {GL_ONE,GL_DST_ALPHA} ;
   milk.emissionRate = milk.particleCount / milk.life;
   milk.radialAccel = 0;
   milk.radialAccelVar = 0;
   milk.tangentialAccel = 0;
   milk.tangentialAccelVar = 0;
   ccColor4F color = {1.0f,1.0f,1.0f,0.8f};
   milk.startColor = color;
   milk.startColorVar = (ccColor4F) {0.0f,0.0f,0.0f,0.0f};
   milk.endColor = color;
   milk.endColorVar = (ccColor4F) {0.0f,0.0f,0.0f,0.0f};
   milk.position = ccp(p.x,p.y);
   //milk.posVar = 0.0;
   milk.sourcePosition =  ccp(p.x,p.y);
   milk.visible = YES;

   [self addChild:milk z:2];

   milk.autoRemoveOnFinish = YES;
   [milk release];
   //[self performSelector:@selector(clearSprite:) withObject:water afterDelay:0.4];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:26:28.257

我建议你试试 ParticleDesigner，这是一个轻量级的应用程序，它允许以图形方式设计你需要的粒子，一旦你满意，就会生成 cocos2d 可以管理的配置文件。[http://particledesigner.71squared.com/](http://particledesigner.71squared.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:34:46.930

还有更多错误：

1.  发射率错误。你是从实际的粒子数来算的，初始化的时候是0。您的emissionRate 为0，这意味着不会发射任何粒子。正确的计算是：

    > ```
    > milk.emissionRate = milk.totalParticles / milk.life; 
    > ```

2.  发布的太多了。它将在最后一个版本 (autoRemoveOnFinish) 上崩溃，因此请`[milk release]`从您的代码中删除最后一个版本。您的粒子系统将在其生命周期结束后释放 - 这就是 autoRemoveOnFinish 的用途 - 因此您无需手动执行此操作。

# linux - Linux，第一次读取或第一次写入时会归零页面页面错误吗？

> ID：12115434
> 
> 赞同：9
> 
> 时间：2012-08-24T19:19:45.160
> 
> 标签：linux, linux-kernel, virtual-memory, page-fault

我的问题是 Linux 特定的，需要了解内核、虚拟内存、mmap、页面错误。我有带有大型静态数组的 C 程序，它将进入 bss 部分（内存，初始化为零）。程序启动时，这块内存没有物理分配，只有虚拟内存，虚拟内存的每一页都映射到特殊的零页（全零页）。当应用程序访问这个页面时，会产生pagefault并分配物理页面。

问题是：在第一次读取访问或从 bss 部分对页面的第一次写入访问时会生成这样的页面错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T19:23:24.997

Linux 为该内存分配一个零页（整个区域为一个零页），然后本质上会在该页上执行 COW（写入时复制）行为，因为您正在更改内容。所以你不会得到读取错误（除非页面被换出或者它是一个小的页面错误，这意味着页面在内存中但没有映射）。

所以只有写错误才会导致在零页上分配新页的错误。

# google-analytics - Google Analytics（分析）页内分析中的增强链接属性不起作用

> ID：12115438
> 
> 赞同：3
> 
> 时间：2012-08-24T19:20:07.130
> 
> 标签：google-analytics

是否有人能够按照本文档在 Google Analytics 的页内分析界面中使用和查看增强型链接归因数据？

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867)

我已经实现了这个插件和调用，我可以在我的 __utm.gif 调用中看到正在传输到 GA 的数据，但是在查看站点的页内分析时，没有区别。我仍然看到点击以聚合的标准形式显示。

我很好奇是否缺少一块，我需要启用一些高级细分过滤器或其他东西来查看信息。

Google Groups 上有一个帖子，人们分享了类似的实施经验，我的观察结果是一样的：

[http://productforums.google.com/forum/#!searchin/analytics/enhanced](http://productforums.google.com/forum/#!searchin/analytics/enhanced) $20link$20attribution/analytics/-FuKG8ARAPY/t-crCmrGEHsJ

任何帮助或见解将不胜感激！谷歌似乎像往常一样处于静音状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T00:06:49.677

为了解决这个问题，我不得不手动为每个链接标签添加一个唯一的“id”属性，指向我想要区分的同一个 URL。范围是页面，因此您不必担心相同的 ID 在不同页面上重复，它们只需要在每个页面上都是唯一的。

我使用的命名约定允许我拥有唯一的 ID 而不必担心重复性，除非在一个部分中有两个指向同一个 URL 的链接（在我的标题中，我有徽标和主页导航链接指向同一个 URL） .

例如，在我的站点模板中，所有页眉链接使用 id="header-..."，所有页脚链接使用 id="footer-..."，所有页面正文中的链接使用 id= “身体-...”。

例子：

`<a href="/" id="header-home">Home</a> <a href="/" id="header-logo"><img src="/logo.gif" alt="logo" /></a> <a href="/" id="body-home">go to homepage</a> <a href="/" id="footer-home">Homepage</a>`

这使得 GA 中的百分比对同一 URL 显示不同的值，从而解决了问题。我在设置中尝试过的任何其他方法，或初始化增强归因插件，都不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T17:24:18.963

这刚刚宣布： [http ://analytics.blogspot.co.il/2012/11/announcing-enhanced-link-attribution.html](http://analytics.blogspot.co.il/2012/11/announcing-enhanced-link-attribution.html)

您需要在网络媒体资源设置选项卡（在“管理”部分）中启用增强的链接归因，该选项正在推出 - 您可能只会在几天/几周内看到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T06:13:43.127

首先：转到分析。点击所选网络媒体资源右上角的“管理员”。属性设置选项卡 > In-Page Analytics 标题 > 使用增强链接属性 = 勾选复选框。

在查看数据时，您可能还希望将日期窗口缩小到最后几天（在允许 24 小时后）。如果您不这样做，链接归因数据可能会在标准“过去 30 天”窗口中被稀释。

# highcharts - 在某些行上禁用 highcharts 工具提示，在其他行上启用它？

> ID：12115445
> 
> 赞同：50
> 
> 时间：2012-08-24T19:20:54.520
> 
> 标签：highcharts

我有一个包含多行的 Highchart。我想禁用某些行的工具提示，并为其他行启用它。那可能吗？我看到如何全局禁用工具提示，但不是按系列。

例如，在[标准折线图示例](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/ "这个例子")中，是否可以禁用红线和蓝线上的工具提示，但在其他两条线上保持启用状态？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-24T19:49:14.400

**更新**

使用[enableMouseTracking: 布尔值](http://api.highcharts.com/highstock#plotOptions.series.enableMouseTracking)

**`enableMouseTracking: Boolean`提出这个问题后才引入**通知****

 ****旧答案**

我只是禁用了`Tokyo` 系列中的高度点

这是你的代码

```
 tooltip: {
                formatter: function() {

                    if(this.series.name == 'Tokyo' && this.y == 26.5 ){
                      return false ;
                    // to disable the tooltip at a point return false 
                    }else {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y +'°C';
                }   
                }
            } 
```

[jsfiddle](http://jsfiddle.net/bV6fT/)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-24T23:02:56.077

使用`enableMouseTracking`. 这是最好的方法。

**意甲**

```
series: [{
    name: 'Serie1',
    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
    enableMouseTracking: false
}, {
    name: 'Serie2',
    data: [7.0, 6.9, 9.5, 15.5, 15.2, 15.5, 15.2, 15.5, 11.3, 17.3, 11.9, 9.6]
}] 
```

**全球的**

```
plotOptions: {
    series: {
        enableMouseTracking: false
    }
} 
```

上面的代码将仅显示第一个系列的工具提示。

参考：[enableMouseTracking](http://api.highcharts.com/highstock#plotOptions.series.enableMouseTracking)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-01T14:53:57.390

对于股票图表**enableMouseTracking: false**使线条在悬停时无效。

这是更好的解决方案：

```
Highcharts.chart('container', {
  series: [{
    name: 'John',
    type: 'column',
    data: [5, 3, 4, 7, 2],
    tooltip: {
      pointFormatter: function() {
        return false
      }
    }
  }, {
    name: 'Jane',
    type: 'column',
    data: [2, 2, 3, 2, 1],
    tooltip: {
      pointFormatter: function() {
        return 'Second <strong>column</strong> series.'
      }
    }
  }, {
    name: 'Joe',
    type: 'line',
    data: [3, 4, 4, 2, 5],
    tooltip: {
      pointFormatter: function() {
        return false
      }
    }
  }]

}); 
```**

# django - 在没有视图的情况下访问模板中的请求上下文 - django

> ID：12115451
> 
> 赞同：0
> 
> 时间：2012-08-24T19:21:22.110
> 
> 标签：django, django-1.4

我有以下显示用户配置文件的视图：

```
@login_required
def user_profile(request):
    return render_to_response('registration/profile.html',context_instance=RequestContext(request)) 
```

`request.user`我通过模板中的变量访问用户信息。

我在想只有一个`direct_to_template`url 可能更容易，但是请求上下文将不存在。

有没有更好的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:39:51.590

另一种方法是使用[TemplateView](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#templateview)：

```
url(r'^...$', TemplateView.as_view(template_name='registration/profile.html'), name='...'), 
```

**但是**，根据direct_to_template的源码：

```
def direct_to_template(request, template, extra_context=None, mimetype=None, **kwargs):
    """ 
    Render a given template with any extra URL parameters in the context as
    ``{{ params }}``.
    """
    if extra_context is None: extra_context = {}
    dictionary = {'params': kwargs}
    for key, value in extra_context.items():
        if callable(value):
            dictionary[key] = value()
        else:
            dictionary[key] = value
    c = RequestContext(request, dictionary)
    t = loader.get_template(template)
    return HttpResponse(t.render(c), content_type=mimetype) 
```

direct_to_template 使用 RequestContext。

# maven - 如果插件在 pluginManagement 下定义，maven 目标将无法正确执行

> ID：12115454
> 
> 赞同：6
> 
> 时间：2012-08-24T19:21:52.043
> 
> 标签：maven, maven-plugin

我有 maven-jaxb2-plugin。我生成 jaxb 对象并将其引用到其他项目类中。我已将 jaxb 插件和编译器插件放在 pluginManagement 标记下。Maven首先执行编译阶段而不是生成阶段，就像我删除pluginManagement标记一样，它工作正常，首先执行生成阶段并生成所有jaxb对象，然后执行编译阶段。由于 pluginManagement 标记，我的项目无法编译。pluginManagement 标签是否仅用于定义父 pom 中的所有插件，以便子 pom 可以引用这些插件？我的项目不是多模块项目。

```
 <pluginManagement>       
      <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <schemaDirectory>${basedir}/src/main/resources/schema</schemaDirectory>
                <generatePackage>com.common.dto</generatePackage>
                <schemaIncludes>
                    <include>*.xsd</include>
                </schemaIncludes>
                <removeOldOutput>false</removeOldOutput>
                <strict>false</strict>
                <verbose>true</verbose>
                <forceRegenerate>true</forceRegenerate>
                <extension>true</extension>
            </configuration>
        </plugin>
    </plugins>
 </pluginManagement> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T23:14:57.367

是的，<pluginManagement> 用于创建即用型配置，但不会自动激活您的插件 - 您仍然需要包含它们。所以实际上你是对的，<pluginManagement>，就像 <dependencyManagement> 在父 pom 中对集中插件配置和依赖管理非常有用。

实际上，在正确的模块中“声明”您的插件受益于更紧凑的语法：

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
    </plugin>

    <plugin>
        <groupId>org.jvnet.jaxb2.maven2</groupId>
        <artifactId>maven-jaxb2-plugin</artifactId>
    </plugin>
</plugins> 
```

# mvvm - 是否允许 IoC 容器使用 Messenger/Mediator 类？

> ID：12115461
> 
> 赞同：0
> 
> 时间：2012-08-24T19:22:51.570
> 
> 标签：mvvm, inversion-of-control, ioc-container, mediator, messenger

我是 IoC 的新手，我想知道最佳实践是否允许容器使用中介类，例如 MVVM Lite 的 Messenger。容器可以注册和发送消息吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:12:32.657

您的容器不应该（也不需要）与应用程序的任何部分通信。您应该引用容器的唯一一点是您的[组合根目录](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)，该根目录通常位于您的应用程序引导程序中。

# backbone.js - 使用主干集合查询数据库

> ID：12115465
> 
> 赞同：3
> 
> 时间：2012-08-24T19:23:07.793
> 
> 标签：backbone.js

我需要使用骨干集合查询数据库。我不知道该怎么做。我假设我需要在某处设置一个 url，但我不知道那在哪里。我很抱歉这一定是一个非常基本的问题，但我在 CodeSchool.com 上学习了主干课程，但我仍然不知道从哪里开始。

这是我收集的代码：

```
var NewCollection = Backbone.Collection.extend({

    //INITIALIZE

    initialize: function(){

        _.bindAll(this); 

        // Bind global events

        global_event_hub.bind('refresh_collection', this.on_request_refresh_collection);

    } 

    // On refresh collection event

    on_request_refresh_collection: function(query_args){

        // This is where I am lost. I do not know how to take the "query_args"

        //   and use them to query the server and refresh the collection <------

    } 

}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:44:30.457

简单的答案是您可以像这样为 Backbone.Collection 定义一个 URL 属性或函数：

```
initialize: function() {
    // Code
},
on_request_refresh_collection: function() {
    // Code
},
url: 'myURL/whateverItIs' 
```

或者

```
url: function() {
    return 'moreComplex/' + whateverID + '/orWhatever/' + youWant;
} 
```

定义 URL 函数后，您所要做的就是`fetch()`在该集合实例上运行 a ，它将使用您将 URL 设置为的任何内容。

**编辑 -------- 进行收藏查询**

`fetch()`因此，一旦您设置了 URL，您就可以使用本机方法轻松进行查询。

`fetch()`接受一个名为的选项`data:{}`，您可以将查询参数发送到服务器，如下所示：

```
userCollection.fetch({
    data: {
        queryTerms: arrayOfTerms[],  // Or whatever you want to send
        page: userCollection.page,  // Pagination data
        length: userCollection.length  // How many per page data
        // The above are all just examples. You can make up your own data.properties
    },
    success: function() {
    },
    error: function() {
    }
}); 
```

然后在您的服务器端，您只想确保获取您的请求的参数，瞧。

# java - 使用 Java 作为后端和 PHP 作为前端

> ID：12115470
> 
> 赞同：8
> 
> 时间：2012-08-24T19:23:53.710
> 
> 标签：java, php

已经有一些关于 SO 讨论这个架构是好主意还是坏主意的帖子。由于我们公司内部的许多原因，包括现有的编程人才，我们决定使用 Java 作为后端，使用 PHP 作为前端。我们的目标是......

Java - 模型/控制器

PHP - 视图

我们正在努力构建 Glassfish 和 Apache 之间交互的原型。我们仍在处理的一件事是，当用户访问[http://domain.com/login.html](http://domain.com/login.html)并登录时，该登录名将被发送到 Glassfish 控制器，该控制器存在于`/login.java`. 我们可以做到这一点没问题，问题是让视图在该 URL 处呈现。

有没有人用 PHP 或任何其他技术做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T19:51:10.730

您是否考虑过在 Java 中设置一个肥皂/休息服务器并让 PHP 与之对话？我想这会比你想要实现的要简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:53:16.033

我很抱歉提出这个问题，但似乎只使用其中一种语言会使事情变得更简单。如果您使用 PHP 在视图中添加更多逻辑，则可能值得一看[Velocity](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html)。它允许您访问和创建变量、遍历列表、使用条件、定义宏、进行方法调用等。这似乎可以让事情变得更简洁。但是，尝试在模板中保留尽可能多的逻辑通常是一个好主意。

If you would like to use PHP because that is what is required I would suggest taking a look at using web services to communicate. Take a look at Googles [GSON](http://code.google.com/p/google-gson/) library. It is really nice tool (on the java side) for mapping JSON Objects to your model (and vice versa).

On your front-end, it might also be worth taking a look at [Backbone](http://backbonejs.org/). It is a tool that makes it simple to mock up your model Objects and bind events to them, or add tie them directly to fields, etc.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:02:07.890

我在两家使用 Java*服务*层和 PHP*客户端*层技术堆栈的公司有过第一手经验，尽管它不是专门使用的。为了清楚地分离这些层，构建了一个定义良好的 JSON REST API，因此每个层都有一个可以编码的合约。

Java 层在持久层之间使用[SpringMVC生成具有明确定义的](http://en.wikipedia.org/wiki/Spring_MVC)*路由*（即 URL 结构）的 JSON 视图，以便 PHP 层获取`GET/PUT/POST/DELETE`资源。

关于*登录*问题，实际上有两个 Java 服务，一个专门用于登录/注销，另一个用于常规后端。

访问时`/login`，我认为这将是一个`.php`文件。向“登录”服务提交登录`<form>`会导致添加会话 cookie，但也会添加加密的“用户 ID”cookie。然后可以使用加密的 cookie 来保护对产品 Java 服务层的访问。从 PHP 到 Java 的每个 REST 请求都可以访问 cookie，然后 Java 层可以解密“用户 ID”并在其有效时响应 PHP REST 调用。然后，Java 层将有权访问真实的用户 ID，以便从持久性存储中返回用户特定的数据。

# ios - 以编程方式转到目标视图控制器后，目标视图控制器上的 segue 不起作用

> ID：12115472
> 
> 赞同：0
> 
> 时间：2012-08-24T19:24:01.757
> 
> 标签：ios

通过按钮单击视图控制器（不在情节提要中）以编程方式转到目标视图控制器（在情节提要中）后，segues 不起作用

```
- (IBAction)OK:(id)sender {  
    UIStoryboard *myStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    mainViewController *controller = (mainViewController *)[myStoryboard instantiateViewControllerWithIdentifier:@"mainViewController"];
    [controller setModalPresentationStyle: UIModalPresentationFormSheet];
    [self presentModalViewController:controller animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:09:04.407

好吧，如果我没记错的话，我想，按钮点击segue正在使用navigationcontroller，如果是这样，请注意你的自定义segue，

**[自我presentModalViewController：控制器动画：YES]；**

您正在制作模型转场，因此转场完成后您的导航控制器将是未知的。

# objective-c - 如何根据您的 UITableView 单元格选择绘制不同颜色的矩形

> ID：12115482
> 
> 赞同：0
> 
> 时间：2012-08-24T19:25:34.397
> 
> 标签：objective-c, xcode, uitableview, cgcontext

我正在尝试制作一个应用程序，根据从 UITableView 中选择的颜色显示不同颜色的矩形。

我选择了哪个 UITableView 行没有问题，在我的 NSLog 中，我可以看到当我切换到不同的视图时正在发送正确的颜色名称。

但我不知道如何调用“(void)drawRect:(CGRect)rect”方法来开始绘制矩形。

例如，如果我从 UITableView 中选择了“黑色”颜色，当我点击接受按钮时，它将转到一个新视图，其中将出现一个“黑色”矩形（因为用户选择了颜色“黑色”）

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([[segue identifier] isEqualToString: @"switch"]) {

    //what is inside the chosenColors array?
    NSLog(@"%@ clicked", _chosenColors);

    //if the chosen color is black then do something
    if ([_chosenColors isEqual:@"Black"]) {
        NSLog(@"BLAH");
        //CGContextRef context = UIGraphicsGetCurrentContext();
        //[[UIColor blackColor] set];
        //RectangleView *gotColors = [[RectangleView alloc]initWithFrame:CGContextFillRect(context, CGRectMake(220, 20, 40, 40))];
        RectangleView *gotColors = [[RectangleView alloc]init];
        //RectangleView *gotColors = [[RectangleView alloc] initWithFrame:CGRectMake(220, 40, 40, 40)];
        //[self.navigationController pushViewController:gotColors animated:YES];

       // gotColors.CGContextFillRect(context, CGRectMake(220, 20, 40, 40));
        //changeClothes *new = [[changeClothes alloc]initWithNibName:@"changeClothes" bundle:nil];

    }

} 
```

}

如您所见，我尝试做很多事情，但都没有工作:(此代码在我的 UITableViewController 中，当我点击“接受”按钮时，它会将数据（选择的颜色名称）发送到 UIViewController。

我正在从 NSMutableArray 制作动态单元格来填充颜色表，如果选择了颜色，它会存储在另一个名为 selectedColors 的 NSMutableArray 中

这是我绘制矩形的方法

```
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
   // Drawing code
CGContextRef context = UIGraphicsGetCurrentContext();
[[UIColor blueColor] set];
//CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 0.5); //CGContextRef, Red, Green, Blue, Alpha
rect = CGRectMake(220, 20, 40, 40); //x, y, width, height
CGContextFillRect(context, rect); //CGContextRef, CGRect 
```

}

此代码在称为 RectangleView 的 UIView 内

我对 iPhone 开发相当陌生，任何形式的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:26:00.817

你必须

*   子类`UIView`
*   覆盖它`drawRect`做你想做的事
*   `view`将呈现的视图控制器的属性设置为新类

视图控制器现在可以告诉视图使用哪种颜色。

# c# - `IsAuthenticated` 属性如何默认获取真值？

> ID：12115487
> 
> 赞同：0
> 
> 时间：2012-08-24T19:26:00.513
> 
> 标签：c#, asp.net, .net

在 Page_Load 事件处理函数中，我尝试了以下操作：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Context.User.Identity.IsAuthenticated)
        {
            Response.Write("Hello World");
        }
    } 
```

它有效！浏览器显示 Hello World ！但是默认情况下该`IsAuthenticated`属性如何获得真实值？

我的 web.config 文件如下：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

    <connectionStrings>
        <add name="arsenicDesktopConnectionString" connectionString="Data Source=localhost\sqlexpress;Initial Catalog=arsenicDesktop;Persist Security Info=True;User ID=sa;Password=1234"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
    <system.web>
        <compilation debug="false" targetFramework="4.0" />
    </system.web>
    <!--LOCAL APPLICATION SETTINGS-->
  <appSettings>
    <add key="Accounts_SettingsFile" value="C:\Users\user\Documents\Visual Studio 2010\WebSites\UserAuthenticationSystem\Config\Accounts.Config"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:28:33.337

这取决于`<authentication />`元素的 mode 属性；如果是 Windows，它将设置为 true，因为它使用当前的 windows 用户；如果是表格，那么您必须登录。

设置表单身份验证的指南在这里：http: [//msdn.microsoft.com/en-us/library/ff647070.aspx](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:28:53.133

添加以下内容：

```
<authentication mode="Windows"/> 
```

该部分中的某处`<system.web>`，如下所示：

```
<configuration>
    <system.web>
        <authentication mode="Windows"/>
    <system.web>
</configuration> 
```

更新您的示例：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

    <connectionStrings>
        <add name="arsenicDesktopConnectionString" connectionString="Data Source=localhost\sqlexpress;Initial Catalog=arsenicDesktop;Persist Security Info=True;User ID=sa;Password=1234"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
    <system.web>
        <compilation debug="false" targetFramework="4.0" />
        <authentication mode="Windows"/>
    </system.web>
    <!--LOCAL APPLICATION SETTINGS-->
  <appSettings>
    <add key="Accounts_SettingsFile" value="C:\Users\user\Documents\Visual Studio 2010\WebSites\UserAuthenticationSystem\Config\Accounts.Config"/>
  </appSettings>
</configuration> 
```

# matlab - Matlab 2012a 获取边界/边界单元格

> ID：12115488
> 
> 赞同：1
> 
> 时间：2012-08-24T19:26:02.620
> 
> 标签：matlab, matrix

我有一个地形数据矩阵，它很大。我已经用 NaN 替换了陆地数据，并且海深数据是正的。（可以在下面看到一个小样本）

```
b= [
NaN NaN NaN NaN
4   NaN NaN NaN
19  14  NaN NaN
21  18  14  NaN
24  17  NaN NaN
40  13  NaN NaN
154 26  NaN NaN
232 44  NaN NaN
500 200 100 NaN
200 100 200 NaN
NaN NaN NaN NaN
]; 
```

我想获得沿海细胞。它应该是： (1,1) (2,2) (3,3) (4,4) (5,3) (6,3) (7,3) (8,3) (9,4) (10,4) (11,3) (11,2) (11,1) 这样我们就可以将单线轮廓绘制为海岸线。

我读了这篇文章[MATLAB，在每一步都发生变化的矩阵中跟踪边界的最佳方法是什么？](https://stackoverflow.com/questions/8773466/matlab-what-is-the-best-way-to-trace-a-boarder-in-a-matrix-that-is-changing-eac) 但我无法使用它获得想要的海岸线。我也写了一个如下的脚本，但它返回一个刻度线（2 或 3 个单元格）和一些中断。

```
b(~isnan(b))=9;      % sea cells will be 9
b(isnan(b))=98672;   % land cells will be 98672
for i=1:255
    for j=2:119
        if b(i,j)==9
            if ((b(i,j-1)==98672)||(b(i,j+1)==98672))
                b(i,j-1)=333;      % 333 will be the coastline
            end
if ((b(i-1,j)==98672)||(b(i+1,j)==98672))
                b(i,j-1)=333;
            end
        end
    end
end
b(b==98672)=NaN;
b(b==9)=0.001;

pcolor(b);shading flat 
```

中断发生在我们在海岸有岛屿或 V 形的点上。

你能帮我吗？请也给我发电子邮件。apt.man@gmail.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:11:55.710

这是一个形态分析的问题，可以通过[膨胀算子](http://en.wikipedia.org/wiki/Dilation_%28morphology%29)很容易地解决。为了效率，制作一个逻辑矩阵并减去膨胀

```
a             = false (size (b));
a(~isnan (b)) = true;
coastline     = imdilate (a, logical (ones (3))) - a; 
```

这段代码在 Octave 中工作，但在 Matlab 中我相信你需要图像处理工具箱。如果你没有它，[Octave 代码](http://octave.svn.sourceforge.net/viewvc/octave/trunk/octave-forge/main/image/inst/imdilate.m?revision=10911&content-type=text/plain)应该可以在 Matlab 中运行，只需稍作调整。基本上，它的行是`dilated = filter2 (se, im) > 0;`.

尝试使用不同的结构元素（'imdilate' 的第二个参数）以对顶点上发生的事情产生不同的影响。例如，不要使用正方形，而是尝试使用十字形，`[0 1 0; 1 1 1; 0 1 0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:49:56.143

这也可以：

```
diff([zeros(size(b,1),1) isnan(b)], [],2) ~= 0 
```

您将获得一个逻辑矩阵，其中的`true`条目是沿海单元格。

# android - SmsManager + SQLiteDatabase？

> ID：12115490
> 
> 赞同：1
> 
> 时间：2012-08-24T19:26:13.660
> 
> 标签：android, sqlite

我做了一个应用程序，我在 SQLiteDatabase 中保存了一些数字。

我的问题是：我可以从 SmsManager 中读取这个数据库吗？

例如：我想在 sendTextMessage() 中与保存在此数据库中的值进行一些比较。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:50:01.317

*在内部* 做某事的唯一方法`sendTextMessage()`是扩展`SmsManager`类并覆盖`sendTextMessage()`。但是在调用之前执行比较可能更容易`sendTextMessage()`。

# vim - 为什么 :execute 在 Vim 中没有按预期工作：LearnVimscriptTheHardWay

> ID：12115494
> 
> 赞同：5
> 
> 时间：2012-08-24T19:26:40.510
> 
> 标签：vim

我正在尝试从中学习 Vimscript，`LearnVimscriptTHW`并且遇到了`:execute and :normal`.

[来自 LVSTHW 的示例](http://learnvimscriptthehardway.stevelosh.com/chapters/16.html)：

```
:normal! gg/a<cr> 
```

**从书中：** 问题是`normal!`不识别“特殊字符”，如`<cr>`. 有很多方法可以解决这个问题，但最容易使用和阅读的是`execute`.

现在，当我使用`:execute "normal! gg/a<cr>"`它时，它对我不起作用。它不会`a(char)`在我当前的文件中搜索，而是它只是执行`gg`而不是什么都不做，但如果使用`:execute "normal! gg/a\r"`它，它可以工作并成功突出显示`char a`我的文件中的。

我也尝试了以下方法，但都没有奏效。

```
:execute "normal! gg/a"<cr>
:execute normal! gg/a<cr>
:execute "normal! gg/a<cr>"<cr> 
```

从书中看来，`execute`内部转换`<cr> to \r`。那么，为什么在我的情况下没有发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T19:46:34.620

您需要`<cr>`使用反斜杠转义：`exe "norm! iHello\<cr>World"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T19:53:25.237

看看`:help :execute`可能有用，在这里。当你在表达式中使用它们时，你必须使用反斜杠转义它们： `<CR>`, ... 如果我理解正确，这些符号仅在映射中有效。`<ESC>``\<CR>``\<Esc>`

另一种选择是输入“字面”键：

*   `i`进入插入模式，如果你在命令行上则不需要
*   `<C-v>`
*   `<CR>`

您将获得一个看起来像`^M`并且不需要转义的单个字符。

# php - 在 magento 中我无法删除 cookie

> ID：12115498
> 
> 赞同：0
> 
> 时间：2012-08-24T19:26:48.593
> 
> 标签：php, cookies, magento-1.4

我正在运行 PHP Magento 1.4.1.1，并且正在存储一个带有用户首选项的 cookie。

我用它来存储cookie。

```
umask(0);
Mage::app();
Mage::getModel('core/cookie')->set('lunch', 'user likes tuna fish', (60*60*24)); 
```

现在这可以很好地保存 cookie...但是如果我尝试更新或删除 cookie，我看不到任何变化。

我尝试使用新数据设置 cookie，如下所示：

```
umask(0);
Mage::app();
Mage::getModel('core/cookie')->set('lunch', 'user likes hamburgers', (60*60*24)); 
```

通常会使用完全相同的名称、域和路径创建第二个 cookie。

此外，如果我尝试删除而不是更改，我会使用这个：

```
umask(0);
Mage::app();
Mage::getModel('core/cookie')->delete('lunch'); 
```

cookie 没有任何变化。

我也使用过这样的删除：

```
Mage::getModel('core/cookie')->delete('lunch', '/', 'www.domain.com');
Mage::getModel('core/cookie')->delete('lunch', '/', '.domain.com');
Mage::getModel('core/cookie')->delete('lunch', '/', 'domain.com'); 
```

也没有运气。

有任何想法吗？

仅供参考...我在根文件夹之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:17:15.610

好的，在这个我最终解决了自己......但导致了问题。我在使用 set 时传递的变量本身没有设置...发送 NULL 或 FALSE。如果这是 FALSE 或 NULL，显然 Magento 不会设置 cookie

所以再次解决方案是确保设置值。

```
Mage::getModel('core/cookie')->set('lunch', $SET_VALUE_HERE, (60*60*24)); 
```

此外，我似乎更幸运地使用 set 和最后一个零来杀死 cookie。

```
Mage::getModel('core/cookie')->set('lunch', $SET_VALUE_HERE, 0 ); 
```

# opengl - 为什么我的模型的颜色会模糊在一起？

> ID：12115499
> 
> 赞同：0
> 
> 时间：2012-08-24T19:26:50.010
> 
> 标签：opengl

我整天都在努力让一个物体正常点亮，但没有结果，所以我要在这里尝试。本质上，我正在尝试使对象看起来像这样：

![我在 GLC 播放器中的 3D 模型的一部分（3D 模型查看器）](../Images/292614121f89805a443ab51c5c722e08.png)

在我的程序中，它看起来像这样：

![我的渲染器绘制的 3D 模型的一部分](../Images/398b0b7a5c78cdbbd61b3074f513ef0d.png)

这是我的背景：

```
glClearDepth(1.0);
glShadeModel(GL_SMOOTH);
glEnable(GL_DEPTH_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glLight(GL_LIGHT0, GL_POSITION, {0, 5, 0, 1});
glDisable(GL_TEXTURE_2D); 
```

我的材质/照明设置：

```
glMaterialf(GL_FRONT, GL_SHININESS, 10);

glLight(GL_LIGHT0, GL_AMBIENT, {0.1, 0.1, 0.1, 1.0});
glLight(GL_LIGHT0, GL_DIFFUSE, {0.2, 0.2, 0.2, 1.0});
glLight(GL_LIGHT0, GL_SPECULAR, {0.6, 0.6, 0.6, 1.0});

glMaterial(GL_FRONT, GL_AMBIENT, {1, 0.8078, 0});
glMaterial(GL_FRONT, GL_DIFFUSE, {1, 0.8078, 0});
glMaterial(GL_FRONT, GL_SPECULAR, {0.5, 0.5, 0.5});
glMaterial(GL_FRONT, GL_EMISSION, {0, 0, 0}); 
```

[为简单起见，我使用 {r, g, b, a} 来表示数组。我查找了用于绘制模型的实际值并将它们写入数组]

主要问题是，每当我的物体完全亮起时，所有东西都会“杂乱”在一起，形成环境色。不再有取决于碎片方向的更亮和更暗的部分，只有一大块纯色。

我已经在整个项目中搜索了我可能错过的 openGL 设置，但我发现的唯一内容就是您在上面看到的内容（省略了一些重置投影和模型视图矩阵的调用、清除屏幕和平移/旋转）。

我还尝试改变灯光和材料的值，但没有取得多大成功。改变环境颜色只会使整个模型变得更亮。我也试过移动灯。

编辑：根据要求，这是我存储和绘制模型的方式：

我从 OBJ 文件加载模型。我查看了文件本身，其中列出了法线。装载机也认识到这一点。

下面是它如何绘制 VBO：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glBindBufferARB(GL_ARRAY_BUFFER_ARB, vertexBufferID);
glVertexPointer(3, GL_FLOAT, stride, 0 * 4);
glNormalPointer(GL_FLOAT, stride, 3 * 4);
glBindBufferARB(GL_ELEMENT_ARRAY_BUFFER_ARB, indexBufferID);
glDrawElements(GL_TRIANGLES, this.numberOfVertices, GL_UNSIGNED_INT, 0); 
```

VBO 是交错的，格式类似于 [vertex, normal, vertex, normal, ..]。我在绘图代码中删除了一些打印调用，它设置了顶点和法线指针。因此，我很确定 VBO 本身已正确加载和绘制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:01:47.100

它崩溃了，因为您启用了 texture_coord_array 客户端状态，因此它尝试访问 texcoord 指针处的任何内容，该指针为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:10:42.380

所以有很多问题，答案往往出乎意料。第一部分是我用来确定如何设置 VBO 的数据指针的 switch 语句：

```
private void setDataPointers() {
    int stride = this.dataFormat.elementsPerVertex * 4;
    glVertexPointer(3, GL_FLOAT, stride, 0 * 4);
    switch(this.dataFormat)
    {
        case VERTICES_AND_TEXTURES:
            glTexCoordPointer(2, GL_FLOAT, stride, (3)*4);
        case VERTICES_AND_NORMALS:
            glNormalPointer(GL_FLOAT, stride, 3 * 4);
        case VERTICES_TEXTURES_NORMALS:
            glTexCoordPointer(2, GL_FLOAT, stride, 3 * 4);
            glNormalPointer(GL_FLOAT, stride, (3 + 3) * 4); 
    }
} 
```

如您所见，休息时间；语句丢失。因此将设置顶点、法线和纹理指针。

其次，在绘制 VBO 时，启用了所有三种客户端模式：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY); 
```

所以渲染器正在寻找不存在的纹理坐标，并以某种方式吐出奇怪的无光照几何体。

# php - $.getJSON 函数不适用于 php json_encoded 数组

> ID：12115500
> 
> 赞同：0
> 
> 时间：2012-08-24T19:26:54.003
> 
> 标签：php, jquery, json

我是 JSON 新手，对 jQuery 不太熟悉。

我一直试图让 $.getJSON 函数工作几个小时，但它不会。这是我的设置：

ajax.php 文件：

```
<?php 
require_once('../../libs/connection.class.php');
require_once('../../libs/actions.class.php');

$dbcon = new connection();

$actions = new action($dbcon);

if (isset($_GET['action'])) {

switch ($_GET['action']) {

    case 'getstates':
        header('Content-Type: application/json');
        echo json_encode($actions->liststates());
        break;

    default:
        break;
}

}
?> 
```

scripts.js 文件：

```
$('select[name=stationcountry]').change(function(){

    var value = $(this).val();

    $.getJSON('lib/ajax.php?action=getstates',function(data){

        //What CODE TO PUT HERE?

        $("#kirky").html()
    };

    });

}); 
```

actions.class.php - 这是**liststates**类：

```
public function liststates(){

    $states = array(
        'AL'=>"Alabama",
        'AK'=>"Alaska", 
        'AZ'=>"Arizona", 
        'AR'=>"Arkansas", 
        'CA'=>"California", 
        'CO'=>"Colorado", 
        'CT'=>"Connecticut", 
        'DE'=>"Delaware", 
        'DC'=>"District Of Columbia", 
        'FL'=>"Florida", 
        'GA'=>"Georgia", 
        'HI'=>"Hawaii", 
        'ID'=>"Idaho", 
        'IL'=>"Illinois", 
        'IN'=>"Indiana", 
        'IA'=>"Iowa", 
        'KS'=>"Kansas", 
        'KY'=>"Kentucky", 
        'LA'=>"Louisiana", 
        'ME'=>"Maine", 
        'MD'=>"Maryland", 
        'MA'=>"Massachusetts", 
        'MI'=>"Michigan", 
        'MN'=>"Minnesota", 
        'MS'=>"Mississippi", 
        'MO'=>"Missouri", 
        'MT'=>"Montana",
        'NE'=>"Nebraska",
        'NV'=>"Nevada",
        'NH'=>"New Hampshire",
        'NJ'=>"New Jersey",
        'NM'=>"New Mexico",
        'NY'=>"New York",
        'NC'=>"North Carolina",
        'ND'=>"North Dakota",
        'OH'=>"Ohio", 
        'OK'=>"Oklahoma", 
        'OR'=>"Oregon", 
        'PA'=>"Pennsylvania", 
        'RI'=>"Rhode Island", 
        'SC'=>"South Carolina", 
        'SD'=>"South Dakota",
        'TN'=>"Tennessee", 
        'TX'=>"Texas", 
        'UT'=>"Utah", 
        'VT'=>"Vermont", 
        'VA'=>"Virginia", 
        'WA'=>"Washington", 
        'WV'=>"West Virginia", 
        'WI'=>"Wisconsin", 
        'WY'=>"Wyoming"
    );

    return $states;

    } 
```

这是页面输出的 JSON：

```
{"AL":"Alabama","AK":"Alaska","AZ":"Arizona","AR":"Arkansas","CA":"California","CO":"Colorado","CT":"Connecticut","DE":"Delaware","DC":"District Of Columbia","FL":"Florida","GA":"Georgia","HI":"Hawaii","ID":"Idaho","IL":"Illinois","IN":"Indiana","IA":"Iowa","KS":"Kansas","KY":"Kentucky","LA":"Louisiana","ME":"Maine","MD":"Maryland","MA":"Massachusetts","MI":"Michigan","MN":"Minnesota","MS":"Mississippi","MO":"Missouri","MT":"Montana","NE":"Nebraska","NV":"Nevada","NH":"New Hampshire","NJ":"New Jersey","NM":"New Mexico","NY":"New York","NC":"North Carolina","ND":"North Dakota","OH":"Ohio","OK":"Oklahoma","OR":"Oregon","PA":"Pennsylvania","RI":"Rhode Island","SC":"South Carolina","SD":"South Dakota","TN":"Tennessee","TX":"Texas","UT":"Utah","VT":"Vermont","VA":"Virginia","WA":"Washington","WV":"West Virginia","WI":"Wisconsin","WY":"Wyoming"} 
```

有人可以帮我列出 JSON 输出中的所有状态吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:32:10.297

假设 json 被 jquery 正确检索并处理，那么它只是另一个 javascript 数据结构，你循环它来构建你的状态列表，例如：

```
$.each(data, function(key, val) {
    $('#kirky').append(key + ': ' + val + '<br />');
}); 
```

# iphone - iOS 设计最常用的字体是什么？

> ID：12115501
> 
> 赞同：4
> 
> 时间：2012-08-24T19:26:56.230
> 
> 标签：iphone, ios, fonts, font-size

我正在深入设计我的第一个 iOS 应用程序，并对哪些字体最常用（或最好的）感到好奇。此外，Feed 项目、名称、标题等使用什么尺寸......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:30:27.280

系统字体（操作系统默认使用）是 Helvetica 和 Helvetica Neue

我不确定您是否正在寻找有关使用非系统字体的应用程序的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:28:04.520

Helvetica 可能是最常用的字体，通常是它们的系统默认字体。我不知道是否有最好的，因为那是意见。

# c# - 事务性地切换两个文件？

> ID：12115502
> 
> 赞同：1
> 
> 时间：2012-08-24T19:26:56.847
> 
> 标签：c#, .net, file, io

我有 a.tmp 和 b.tmp。我喜欢将 a 重命名为 b 并将 b 重命名为 a 但是 a.tmp 必须始终存在。是否可以通过事务重命名？

我在 Windows 上使用 C#。但是我可以使用 cmd/shellexecute 来使用 Windows 内置的其他东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:31:28.060

使用`File.OpenWrite`并写入`b.tmp`into的内容`a.tmp`。它将覆盖 的内容，`a.tmp`而无需将其从文件夹中删除。

参考：http: [//msdn.microsoft.com/en-us/library/system.io.file.openwrite.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.openwrite.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:46:46.383

如果您在 Vista 或更高版本上使用 NTFS，您还可以查看 TxF 包装器，如[Transactional NTFS](http://txfnet.codeplex.com/ "事务性 NTFS (TxF) .NET")。它使用基于内核事务管理器的 NTFS 事务，并且据说可以很好地[集成](http://txfnet.codeplex.com/documentation "事务性 NTFS (TxF) .NET - 文档")，`TransactionScope`因此如果需要，您还可以将它与数据库和不止一台计算机一起使用。

是的，这对于您的用例来说可能完全是矫枉过正，但我​​只是想在这里放弃这一点信息，因为您明确地询问了事务文件系统操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:17:51.247

将 a.tmp 的内容复制到 c.tmp，使用控制台移动 /Y via`cmd /c move /y thisfile thatfile`然后将 c.tmp 重命名为 b.tmp

# r - 将行从一个矩阵映射到另一个矩阵。共享唯一 ID

> ID：12115504
> 
> 赞同：1
> 
> 时间：2012-08-24T19:27:08.157
> 
> 标签：r

我有三张桌子。一个包含结果。另外两个包含有关出现在结果中的唯一 ID 的注释。我将尝试稍微解释一下格式。

结果

UniqueID1 UniqueID2 [包含某些实验结果的列。]

注释1

UniqueID [有关此特定唯一 ID 的说明]

注2

和上面一样。

因此，我希望结果中的每一行都包含 NOTES 表中的注释。我现在迭代地完成这个；这个过程现在比实验本身需要更长的时间。我可能考虑过使用 subsetting 或 lapply ，但似乎找不到合适的东西。

**有些事情要考虑。**

关于结果：结果中的两个 UniqueID 列是不相交的。它们不是集合；它们包含重复。但是，每对唯一 ID 在结果中只出现一次。桌子。

关于 NOTES：唯一 id 列不包含重复。

我在上面给出的详细信息是我不只是懒惰地对 NOTES 表进行子集化并在结果和 NOTES 子集上调用 cbind 的部分原因。

我相信我已经为此付出了相当多的思考；请不要仅仅因为答案对您来说微不足道而投反对票。我没有包含代码，因为我想知道如何在没有迭代的情况下为 R 中的一般情况完成此操作。如果您认为它会有所帮助，我可以包含一些代码。

样品表：

结果

```
"UniqueID_1"    "UniqueID_2"    "P_val" "Corr_Coef"
"M200000001"    "M200000113"    "0.530536974203384" "-0.115081242888051"
"M200000001"    "M200000113"    "0.530536974203384" "-0.115081242888051"
"M200000001"    "M200000114"    "0.252990706016934" "0.399292132865147"
"M200000001"    "M200000115"    "0.368094246871692" "0.16456647390621"
"M200000001"    "M200000116"    "0.78457345841227"  "-0.0502948318806314"
"M200000001"    "M200000117"    "0.874022710686625" "-0.0291832590390869"
"M200000001"    "M200000121"    "0.199903265024637" "0.232729988792225"
"M200000001"    "M200000122"    "0.892630363051574" "-0.024845579436259"
"M200000001"    "M200000126"    "0.27862153489629"  "-0.208127935743872" 
```

笔记

```
M200000002  22352   Vim
M200000004  20810   Srm
M200000005  17878   Myf6
M200000006  27061   Bcap31
M200000007  54204   1-Sep
M200000008  71995   Erv3
M200000009  15384   Hnrpab
M200000010  14453   Gas2
M200000011  12054   Bcl7b
M200000012  26572   Cops3
M200000014  17896   Myl4
M200000016  52469   Ccdc56
M200000017  19720   Trim27
M200000019  11434   Acr 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:29:31.840

```
merge(results, notes, by="UniqueID_1", all.x=TRUE) 
```

或者，对于两个音符的情况：

```
merge(merge(results, notes1, by="UniqueID_1", all.x=TRUE),
      notes1, by="UniqueID_2", all.x=TRUE) 
```

您还没有告诉我们您的 NAMES 列的名称，因此如果每个中的 ID 列实际上是，`UniqueID`那么您需要执行以下操作：

```
merge(merge(results, notes1, by.x="UniqueID_1", by.y="UniqueID", all.x=TRUE),
      notes1, by.x="UniqueID_2", by.y="UniqueID", all.x=TRUE) 
```

`notes1`来自和的注释`notes2`将在不同的列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T01:30:57.997

我仍然不清楚为什么`subset`并且`cbind`不适合您；看起来像这样的东西可以正常工作。

```
 cbind(Results, Notes1[Results$UniqueID_1,], Notes2[Results$UniqueID_2,]) 
```

这将要求 Notes 表的行名是 ID；也许这就是问题所在？

```
 rownames(Notes1) <- Notes1$UniqueID
 rownames(Notes2) <- Notes2$UniqueID 
```

`match`在这种情况下也很有用；这`merge`是在幕后使用的东西。

# c# - C#根据字符串同步线程

> ID：12115506
> 
> 赞同：3
> 
> 时间：2012-08-24T19:27:47.290
> 
> 标签：c#, multithreading, thread-synchronization

在我的程序中，我需要处理文件。我的程序可以使用多个线程来处理文件，因此我需要某种锁定，因为每个文件一次不应由多个线程处理。

```
private object lockObj = new object();

public void processFile(string file)
{
  lock(lockObj)
  {
    //... actuall processing
  }
} 
```

使用上面的代码一次只能处理一个文件，但是两个线程应该能够同时处理两个不同的文件，但不能处理同一个文件。

我的第一个想法是创建一个字典，其中包含文件的密钥和锁定对象的值。但我想知道是否也可以锁定字符串文件？对此有什么想法吗？

PS：抱歉找不到更好的标题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:30:27.593

> 我的第一个想法是创建一个字典，其中包含文件的密钥和锁定对象的值。但我想知道是否也可以锁定字符串文件？对此有什么想法吗？

如果字符串将在运行时创建，则锁定字符串将不安全。最好制作一个对象字典，并使用它们来锁定。

话虽如此，您应该考虑使用 a [`ConcurrentDictionary<string,object>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)for this dictionary，因为它会防止您的字典本身出现竞争条件（或其他锁定）。通过使用[GetOrAdd](http://msdn.microsoft.com/en-us/library/ee378677.aspx)，您可以安全地获取用于锁定的适当对象。

话虽如此，这里可能适合采用不同的方法。您可以使用`ConcurrentQueue`or`BlockingCollection`提供要处理的项目列表，然后让固定数量的线程处理它们。这将首先防止同步问题的发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:31:33.213

我认为您以错误的方式处理此问题。您可以简单地将生产者-消费者模式与[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)一起使用。一个线程不断读取文件并将它们放入队列（使用`Add`），而一堆工作线程不断从队列中获取（使用`Take`）并处理文件。队列的实现方式保证了两个线程不能检索同一个文件，因此不需要显式锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:37:35.390

如果您在 c# 中使用线程，您应该自己检查任务并行库 (TPL)。有一个学习曲线，但是一旦你掌握了它，你的多线程代码就会更简单，更易于维护。

[这是一个](http://msdn.microsoft.com/en-us/library/dd460720.aspx)使用 TPL 完全符合您要求的示例。

# sql - 计算字段数

> ID：12115512
> 
> 赞同：2
> 
> 时间：2012-08-24T19:28:17.250
> 
> 标签：sql, cross-reference

我有三张桌子：

*   文章(idArticle,NameArt)
*   标签(idTag, NameTag)
*   ArtiTag(idArticle,idTag)

我想要这样的结果：NameTag,Count(属于该标签的文章)

我尝试了以下方法：

```
SELECT Tag.NameTag , COUNT(DISTINCT(idArticle))
  FROM ArtiTag, ArtiTag 
```

但它总是只返回一行，即使我有很多标签和很多相关文章

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:33:24.550

```
SELECT t.NameTag, COUNT(*)
    FROM ArtiTag at
        INNER JOIN Tag t
            ON at.idTag = t.idTag
    GROUP BY t.NameTag; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:41:04.523

```
Select T.idTag, Max(nametag), count(artitag.idArticle) from Tag t 
  left join ArtiTag on t.idTag=ArtiTag.idTag
    Group by t.idTag 
```

此查询输出所有标签，包括包含 0 篇文章的标签。

# c# - 难以为产品配置器管理具有依赖关系的数据/项目

> ID：12115515
> 
> 赞同：3
> 
> 时间：2012-08-24T19:28:40.080
> 
> 标签：c#, algorithm, parsing, logic, evolutionary-algorithm

我正在解析一些字符串，这些字符串包含对象信息以及对象的一些依赖项或要求。

这是用于产品配置的，对象是构成产品构建的组件。想象一下，当您通过列表构建汽车、计算机或其他任何具有需要您选择某些组件才能获得其他组件的组件时。这是我试图在我的应用程序中创建的逻辑。

我的应用程序向用户展示了一个 treeView 组件，其中包含从 excel 文件加载的对象列表。我正在尝试创建一个交互式对象列表，该列表可以根据节点所代表的对象之间的依赖关系正确启用和禁用 treeView 的节点。对象列表表示构建的配置。因此，对象是构成最终产品的组件，并且对于可以为任何给定构建选择哪些组件或对象具有限制。

这是包含我要为其编写逻辑的依赖项的行的示例格式：

```
objectID_y1234_y1233_n2345 
```

*   **objectID**是此对象（组件）的 id，是一个 4 位数字，极少数情况下对象的 id 中有一个字母，例如：12a4

*   **y1234**表示此对象需要选择 id 为 1234 的对象才能处于活动状态。

*   **y1233**表示此对象需要选择 id 为 1233 的对象才能处于活动状态。

    由于 y1234 和 y1233 在它们的 ID 号中共享相同的前两位数字，因此创建了一个 or 条件。

    因此，此对象需要选择对象 1234 或 1233，而不是同时选择两者。

*   **n2345** means this object is not active when object 2345 is selected.

列出的第一个依赖项始终以“y”或“n”开头，因此您永远不能拥有 objectID_1234_n2345_y1235，但您可以拥有 objectID_y1234_1235_n2345。

此外，如果条件是“或”条件，则不能有 y1234_n1233，它要么都具有 y，要么都具有 n。

更多可能的格式：

1.  `objectID_y1234_2345`
    这是说明对象需要选择对象 1234 和对象 2345 才能使该对象处于活动状态。

2.  `objectID_n1234_2345_y3456`
    此状态 objectID 要求不选择 1234 和 2345 并选择 3456 以使该对象处于活动状态。

3.  `objectID_n1234_n1233`
    与 y1234_y1233 不同，如果使用 n，则条件始终为“and”，因此这意味着无法选择 1234 和 1233 以使该对象处于活动状态。

如果有不清楚的地方，请随时询问更多信息/解释。我试图尽可能清楚地解释这一点，因为依赖关系很容易变得混乱。我没有列出语句的所有可能组合，因为它们没有长度限制，而只是由带有对象 ID 的更长或多个“或”和“和”条件组成。

### 正在发生的事情的大图：

我有一个 objectID 的树形视图，当您选择一个对象时，您必须停用冲突的对象并激活或现在可以选择的对象。

### 依赖的目的：

依赖项必须回答两个问题......

1：哪些对象不能被选中来激活这个对象？

2：必须选择哪些对象才能使该对象处于活动状态？

### 我的问题/问题：

我发现这些数据非常脆弱，有时对象会相互依赖，从而使两个对象都失效，并且两者都无法被选中。

例子：

ID1234_y2345

ID2345_y1234

这导致 1234 或 2345 都不是活动的，因为在开始时两者都被停用，因为不满足要求（依赖关系）。

如果有人有想法可以更改表示依赖项的语法或格式，我可以这样做。我只是还没有找到一种替代方法来满足要求而不会导致更多的复杂性或问题。

最终，我正在寻找一种方法来解决这个问题并提出一个可行的解决方案。一段时间以来，我一直在尝试实施解决方案，但到目前为止，我的所有尝试都失败了。我尝试了各种递归和非递归解决方案。我可能错了，但我几乎觉得这是神经网络可以做的事情，因为我基本上是想让计算机在这里自己思考。

我一直在尝试从我需要做的所有事情的列表开始，然后实施一个满足列表的解决方案，但我最终发现了更多的问题并添加到列表中，所以我永远不会涵盖所有的可能性和那里可能还有更多我还没有发现。总的来说，我已经能够在某些时候正确地停用和激活，但它并不总是可靠的，它需要是。

### 当前逻辑

在树中，相同类型的组件共享相同的 2 个前导字符，因此如果 1234、1233 和 1245 在一个组中并且用户选择 1234，我将该组视为单选按钮。因此，将 1234 添加到跟踪所选组件的列表中，并将 1233,1245 添加到另一个禁用组件列表中。然后通过检查每个组件并确保它被禁用或启用，这取决于它现在是否满足它的要求来更新整个树。但是，如果我在检查时必须禁用另一个组件，目前我会重新检查树，这是非常低效的，因为它可能会继续这样做一段时间。我认为递归可能会更好地工作，但是却弄得一团糟，很难调试并且仍然存在太多问题。

对于检查组件列表，我仍然认为递归是一种方式，因为当我选择一个组件时，我需要禁用其他不可用的组件，然后检查我禁用的组件，然后检查任何因我禁用的组件禁用等等...

示例：如果我禁用 1234 并且 1890 需要 1234，我现在禁用 1890。但现在 1770 需要 1890，所以我禁用 1770。然后如果某些东西需要 1770，我需要禁用它等等...

感谢所有帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:30:21.367

一个有效的解决方案，已经取代我原来的逻辑。

原始逻辑让应用程序检查受用户选择的节点影响的所有节点。节点状态（禁用、启用、选择）由用户选择的节点控制，并且每次用户在树视图中选择一个组件时都会对其进行验证。

### 解决方案：

通过重新思考我的方法，我为应用程序提出了以下逻辑，该应用程序完成了确保强制执行组件的依赖关系的任务：

当用户选择一个组件时，应用程序执行以下步骤：

*   检查组件是否存在与其不兼容的对象，并检查用户是否选择了任何组件。

    *   如果发现了不兼容的对象，它会向用户提示一条信息性消息，说明用户选择的哪个组件与用户试图选择的组件冲突。
*   检查该组件是否有该组件所需的其他组件，并检查这些组件是否已被选中。

    *   如果尚未选择所有必需的组件，则会提示用户一条消息，说明还需要选择哪些组件，并将所选组件的文本变为红色并在树视图中选择它。
    *   如果满足所有要求，则选择该组件并且如果该组件具有红色文本，则该文本将改回默认的黑色。

注意：提示将是可选的，因为它们被记录在界面上的日志中，允许用户在需要时参考它们。

### 结论：

该解决方案允许配置器确保满足组件的依赖性和要求。尽管更新节点是最初的意图，但我意识到在最初的逻辑中我没有想到如何帮助用户找出组件被禁用的原因。使用这种新方法，配置器提供了丰富的信息，不会让用户感到困惑。

当然，可以创建一个像原始概念一样的配置器，但鉴于我的经验和各种工具，这个其他解决方案提供了一个我的用户更满意的工作应用程序。

# ios - 视频在 Mobile Safari 中有效，但在 UIWebView 中无效

> ID：12115516
> 
> 赞同：0
> 
> 时间：2012-08-24T19:28:49.740
> 
> 标签：ios, uiwebview, mobile-safari

我正在尝试将此页面加载到`UIWebView`：

[http://www.usopenofsurfing.com/on-demand/dvr](http://www.usopenofsurfing.com/on-demand/dvr)

它在桌面浏览器上使用 Flash 工作，但在检测到 iOS 时有不同的实现。它在 Mobile Safari 上运行良好，但在`UIWebView`.

知道为什么吗？

我查看了实际 Mobile Safari 和`UIWebView`.

```
UIWebView: iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B206
Safari: iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3 
```

在 flash 和 iOS 功能之间切换的 javascript 只查找字符串 ipad、iphone 或 ipod：

```
var deviceAgent = navigator.userAgent.toLowerCase();
var is_iOS = deviceAgent.match(/(iphone|ipod|ipad)/); 
```

因此，用户代理应该只在 Flash 和 iOS 之间进行选择时才会发挥作用，而且这似乎是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:00:12.750

Cookie 可能是这里的问题。

据我所知，Cookie 不能与来自 Webview 的第一个请求一起发送，但可以与后续请求一起发送到同一个 URL，当且仅当第一个请求成功时。

这会导致身份验证服务出现问题，这些服务需要 cookie 在对 URL 的第一次请求时进行身份验证。

另请参阅[此堆栈文章](https://stackoverflow.com/questions/12840587/uiwebview-using-mobile-safari-cache-data-cookies-is-this-possible)和此[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)。

# ruby - ...1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- streamio-ffmpeg (LoadError)

> ID：12115518
> 
> 赞同：2
> 
> 时间：2012-08-24T19:29:27.110
> 
> 标签：ruby, gem, rvm

我想使用 FFMPEG 将一些 MP3 文件转换为 OGG 文件。我在终端中使用了以下命令：

```
sudo gem install streamio-ffmpeg 
```

之后，尝试运行此脚本：

```
require 'rubygems'
require 'streamio-ffmpeg'

movie = FFMPEG::Movie.new("path/to/movie.mov")

movie.duration # 7.5 (duration of the movie in seconds)
movie.bitrate # 481 (bitrate in kb/s)
movie.size # 455546 (filesize in bytes)

movie.video_stream # "h264, yuv420p, 640x480 [PAR 1:1 DAR 4:3], 371 kb/s, 16.75 fps, 15 tbr, 600 tbn, 1200 tbc" (raw video stream info)
movie.video_codec # "h264"
movie.colorspace # "yuv420p"
movie.resolution # "640x480"
movie.width # 640 (width of the movie in pixels)
movie.height # 480 (height of the movie in pixels)
movie.frame_rate # 16.72 (frames per second)

movie.audio_stream # "aac, 44100 Hz, stereo, s16, 75 kb/s" (raw audio stream info)
movie.audio_codec # "aac"
movie.audio_sample_rate # 44100
movie.audio_channels # 2

movie.valid? # true (would be false if ffmpeg fails to read the movie) 
```

* * *

但我在终端窗口中收到此错误：

```
sergio@mint-vm ~/Documents/audio-convert $ ruby demo.rb
/home/sergio/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- streamio-ffmpeg (LoadError)
    from /home/sergio/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from demo.rb:2:in `<main>' 
```

这不是一个 Rails 应用程序，只是我打算从命令行使用的一个普通的旧 Ruby 脚本。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:31:22.390

尝试使用以下命令创建和应用新的 RVM gemset：

```
rvm use 1.9.3@ffmpegnewgemset --create 
```

然后安装streamio-ffmpeg gem **：**

```
gem install streamio-ffmpeg 
```

然后将其运行为：

```
ruby demo.rb 
```

（*确保您已经在脚本所在的文件夹中，因为使用“cd”更改文件夹可能会更改您的活动 RVM gemset。*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:16:44.553

我看到你使用 rvm。请确保，当您使用rvm 时，`sudo gem install streamio-ffmpeg`您的 rvm 使用的版本与您在运行脚本时使用的版本相同。

尝试在没有 sudo 的情况下安装它，并在同一终端中安装 gem 后准确运行 demo.rb ...

`gem install streamio-ffmpeg && ruby demo.rb`

# javascript - 如何获取已登录用户的 twitter oAuth 令牌

> ID：12115522
> 
> 赞同：0
> 
> 时间：2012-08-24T19:29:48.777
> 
> 标签：javascript, twitter, twitter-oauth, tweets

我正在尝试设置一个 javascript 函数，以使用 POST statuses/update 将状态发布到 Twitter 帐户，详细信息请参见：[https](https://dev.twitter.com/docs/api/1/post/statuses/update) ://dev.twitter.com/docs/api/1/post/statuses/update 。目标是类似于 Facebook 上的开放图形操作的 Twitter 帖子。

我正在使用 jQuery ajax 发出发布请求，这是我目前所拥有的：

```
$.ajax
({
  type: "POST",
  url: "https://api.twitter.com/1/statuses/update.json",
  headers: jsonData,
  data: {},
  dataType: "jsonp",
  success: function( data )
  {

  }
}); 
```

我相信为了安全起见，我需要生成类似这样的标题：

```
Authorization: OAuth oauth_consumer_key=consumerKey, oauth_nonce=nonce, 
oauth_signature=signature, oauth_signature_method="HMAC-SHA1",  
oauth_timestamp=timestamp, oauth_token=userToken, oauth_version="1.0" 
```

我有我的应用程序的使用者密钥，我可以生成一个随机数，我正在使用这个问题[Twitter OAuth authentication in javascript](https://stackoverflow.com/questions/6700106/twitter-oauth-authentication-in-javascript)中的方法生成签名和时间戳。我唯一剩下的就是 oauth_token，我相信它是我希望向其发布提要的用户的令牌。如果我错了，请纠正我。

问题是，我完全不知道如何从用户那里获取此令牌以发布到他们的提要。在过去的 2 个小时里，我一直在 Twitter 的 oAuth 文档中转来转去，但没有找到任何看起来有用的东西；我发现的一切要么是没有代码示例的流程图，要么是基于我的代码已经拥有用户的 oAuth 令牌。

我的问题是：如何使用 javascript 获取登录用户的 oAuth 令牌？

如果这是不可能的，我有另一个页面，我目前在数据库中存储用户的 twitter id 并获得他们的许可，获取他们的令牌并在 PHP 中将其数据库化也将是令人满意的，假设它不会经常更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:54:44.570

为了获得 oauth_token，您需要遵循身份验证过程。您的应用程序需要被授权代表用户行事。我建议先花一些时间了解 OAuth 的确切工作原理（有很多可用信息），然后在您的应用程序中实现它。( [http://hueniverse.com/oauth/](http://hueniverse.com/oauth/) ) 您还可以从图书馆中受益，这将使您的生活更轻松。（在您的情况下，请查看：[https](https://dev.twitter.com/docs/twitter-libraries#php) ://dev.twitter.com/docs/twitter-libraries#php ）。

希望这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T09:40:35.573

这是获取 twitter oauth 令牌并在 twitter 中发布推文的示例。代码示例在 php 中。

[http://www.phpgang.com/how-to-post-tweet-on-twitter-with-php_414.html](http://www.phpgang.com/how-to-post-tweet-on-twitter-with-php_414.html)

1) 要获取 oauth 令牌，您需要遵循身份验证过程。

2) 并且您的应用程序需要被授权代表用户行事。

您还可以查看此 twitter 示例以更好地了解其工作原理

在这个使用中可以看到授权用户的过程和post并得到json结果。

[https://dev.twitter.com/rest/tools/console](https://dev.twitter.com/rest/tools/console)

我希望这能帮到您。

谢谢

# json - JSON 意外令牌镶边

> ID：12115523
> 
> 赞同：2
> 
> 时间：2012-08-24T19:29:54.863
> 
> 标签：json

我的浏览器（chrome）似乎不喜欢我的 JSON（通过 ASP.NET 的 return Json(object) 格式化）。

我失败的 JavaScript 处理程序如下所示：

```
var responseObj = JSON.parse(msg); 
```

在我解析它之前，我可以看到 chrome JavaScript 调试器中的所有内容，但是当我将它发送到 JSON.parse() 时它失败了。

真正奇怪的是 JSONLint 说它是有效的。

我的 JSON 看起来像这样（实际对象要长得多，信不信由你）：

```
{
    "crct": {
        "ETL_ID": 221,
        "DELETE_FLAG": "N",
        "ID": "a0Wc00000008sZGEAY",
        "ISDELETED": "false",
        "NAMEX": "CRCT-4474",
        "CREATEDDATE": "/Date(1345769442000)/",
        "CREATEDBYID": "005C00000049nuYIAQ",
        "LASTMODIFIEDDATE": "/Date(1345771729000)/",
        "LASTMODIFIEDBYID": "005C00000049nuYIAQ",
        "SYSTEMMODSTAMP": "/Date(1345771729000)/",
        "CLIENT_TASK": "a0Xc0000001lLihEAE",
        "COUNTRY": null,
        "PRA_CRCT_ID": null,
        "PROJECT_REGION": "a0mc00000008ZPgAAM",
        "TOTAL_UNITS_FRM": 200,
        "UNIT_SCOPE_CHANGE": null,
        "UNIT_SCOPE_DIFFERENCE": 0,
        "CUMULATIVE_OFFICIAL_FORECAST_U": 200,
        "CUMULATIVE_PENDING_DOWNSCOPE_U": 0,
        "CUMULATIVE_BASELINE_UNITS_ROLL": 200,
        "CUMULATIVE_WORKED_HOURS_ROLLUP": 0,
        "CUMULATIVE_WORKED_UNITS_ROLLUP": 0,
        "CLIENT_UNIT_NUMBER": null,
        "EntityState": 2,
        "EntityKey": {
            "EntitySetName": "SF_CLIENT_REGION_COUNTRY_TASK",
            "EntityContainerName": "SFEntities",
            "EntityKeyValues": [
                {
                    "Key": "ETL_ID",
                    "Value": 221
                }
            ],
            "IsTemporary": false
        }
    },
    "unitChecks": {
        "gaps": false,
        "duplicates": false,
        "startDate": "/Date(1343793600000)/",
        "endDate": "/Date(1370059200000)/",
        "liDurations": [
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Baseline",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Previous Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Historical",
                "gaps": false,
                "duplicates": false
            }
        ],
        "numberOfUniqueBufCodes": 0
    },
    "effortChecks": {
        "gaps": false,
        "duplicates": false,
        "startDate": "/Date(1343793600000)/",
        "endDate": "/Date(1370059200000)/",
        "liDurations": [
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Baseline",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Previous Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Historical",
                "gaps": false,
                "duplicates": false
            }
        ],
        "numberOfUniqueBufCodes": 0
    },
    "hourChecks": {
        "gaps": false,
        "duplicates": false,
        "startDate": "/Date(1343793600000)/",
        "endDate": "/Date(1370059200000)/",
        "liDurations": [
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Baseline",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Previous Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Historical",
                "gaps": false,
                "duplicates": false
            }
        ],
        "numberOfUniqueBufCodes": 0
    },
    "effortRatioChecks": {
        "gaps": false,
        "duplicates": false,
        "startDate": "/Date(1343793600000)/",
        "endDate": "/Date(1370059200000)/",
        "liDurations": [
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Baseline",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Previous Official Forecast",
                "gaps": false,
                "duplicates": false
            },
            {
                "thisTypeFound": true,
                "startDate": "/Date(1343793600000)/",
                "endDate": "/Date(-62135578800000)/",
                "type": "Historical",
                "gaps": false,
                "duplicates": false
            }
        ],
        "numberOfUniqueBufCodes": 0
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:36:29.127

`JSON.parse`用于将 JSON 字符串解析为 JavaScript 对象。

如果您尝试解析一个对象（这是您在问题中发布的内容），您将在 Chrome 中收到“意外令牌”消息。

所以，要么你试图转换不需要转换的东西，要么你想把一个对象转换成 JSON，在这种情况下你需要[`stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:47:10.720

没有看到你的代码，很难说发生了什么，但你的 JSON 很好：

现在，如果您尝试*在 Javascript 编码*中使用它，那么您不应该使用 JSON，而应该只分配一个对象。不需要解析，编译器会为您完成。

换句话说——不要做我刚才做的事。我只是用它来表明它可以在 Chrome (21.0.1180.57) 下正确解析*为 JSON*

```
<html>
<head>
<title>Quick test</title>

<script>
var a = '\
{\
    "crct": {\
        "ETL_ID": 221,\
        "DELETE_FLAG": "N",\
        "ID": "a0Wc00000008sZGEAY",\
        "ISDELETED": "false",\
        "NAMEX": "CRCT-4474",\
        "CREATEDDATE": "/Date(1345769442000)/",\
        "CREATEDBYID": "005C00000049nuYIAQ",\
        "LASTMODIFIEDDATE": "/Date(1345771729000)/",\
        "LASTMODIFIEDBYID": "005C00000049nuYIAQ",\
        "SYSTEMMODSTAMP": "/Date(1345771729000)/",\
        "CLIENT_TASK": "a0Xc0000001lLihEAE",\
        "COUNTRY": null,\
        "PRA_CRCT_ID": null,\
        "PROJECT_REGION": "a0mc00000008ZPgAAM",\
        "TOTAL_UNITS_FRM": 200,\
        "UNIT_SCOPE_CHANGE": null,\
        "UNIT_SCOPE_DIFFERENCE": 0,\
        "CUMULATIVE_OFFICIAL_FORECAST_U": 200,\
        "CUMULATIVE_PENDING_DOWNSCOPE_U": 0,\
        "CUMULATIVE_BASELINE_UNITS_ROLL": 200,\
        "CUMULATIVE_WORKED_HOURS_ROLLUP": 0,\
        "CUMULATIVE_WORKED_UNITS_ROLLUP": 0,\
        "CLIENT_UNIT_NUMBER": null,\
        "EntityState": 2,\
        "EntityKey": {\
            "EntitySetName": "SF_CLIENT_REGION_COUNTRY_TASK",\
            "EntityContainerName": "SFEntities",\
            "EntityKeyValues": [\
                {\
                    "Key": "ETL_ID",\
                    "Value": 221\
                }\
            ],\
            "IsTemporary": false\
        }\
    },\
    "unitChecks": {\
        "gaps": false,\
        "duplicates": false,\
        "startDate": "/Date(1343793600000)/",\
        "endDate": "/Date(1370059200000)/",\
        "liDurations": [\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Baseline",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Previous Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Historical",\
                "gaps": false,\
                "duplicates": false\
            }\
        ],\
        "numberOfUniqueBufCodes": 0\
    },\
    "effortChecks": {\
        "gaps": false,\
        "duplicates": false,\
        "startDate": "/Date(1343793600000)/",\
        "endDate": "/Date(1370059200000)/",\
        "liDurations": [\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Baseline",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Previous Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Historical",\
                "gaps": false,\
                "duplicates": false\
            }\
        ],\
        "numberOfUniqueBufCodes": 0\
    },\
    "hourChecks": {\
        "gaps": false,\
        "duplicates": false,\
        "startDate": "/Date(1343793600000)/",\
        "endDate": "/Date(1370059200000)/",\
        "liDurations": [\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Baseline",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Previous Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Historical",\
                "gaps": false,\
                "duplicates": false\
            }\
        ],\
        "numberOfUniqueBufCodes": 0\
    },\
    "effortRatioChecks": {\
        "gaps": false,\
        "duplicates": false,\
        "startDate": "/Date(1343793600000)/",\
        "endDate": "/Date(1370059200000)/",\
        "liDurations": [\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Baseline",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Previous Official Forecast",\
                "gaps": false,\
                "duplicates": false\
            },\
            {\
                "thisTypeFound": true,\
                "startDate": "/Date(1343793600000)/",\
                "endDate": "/Date(-62135578800000)/",\
                "type": "Historical",\
                "gaps": false,\
                "duplicates": false\
            }\
        ],\
        "numberOfUniqueBufCodes": 0\
    }\
}';

var b = JSON.parse(a);
window.alert(typeof b);
window.alert(JSON.stringify(b));

</script>
<body>
This is a test
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:24:22.830

在构建带有融合表的应用程序时，我遇到了同样的错误。谷歌的回复没有被正确解析。[我用json2.js](https://github.com/douglascrockford/JSON-js)替换了原生的 json 库，问题就解决了。

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:18:46.080

我通过简单的 JSON 尝试遇到了这个问题（使用 Chrome）：

```
var TOC = { id: 1, title: "header" } 
```

$.parseJSON 给出了同样的错误。

我发现的解决方法是将它包含在一个数组中（然后引用索引零）。

```
var TOC = [{ id: 1, title: "header" }][0] 
```

# java - 线程状态监视器。我该如何调试？是什么原因造成的？

> ID：12115525
> 
> 赞同：6
> 
> 时间：2012-08-24T19:30:05.360
> 
> 标签：java, android, multithreading, synchronization, threadpool

我正在 Android 上开发，但我无法弄清楚为什么我的某些线程会进入“监控”状态。我读过它可能是因为“同步”问题，但我不确定一个对象如何不会释放他们的锁。

任何人都可以帮助如何调试这个或者你看到我做错了什么吗？是同步对象没有被释放的问题，还是我的加载没有正确超时并锁定所有线程？

![在此处输入图像描述](../Images/722a9a0373f6326badc1920de69b6a03.png)

这是我使用同步的方式。

```
private Bitmap getFromSyncCache(String url) {
    if (syncCache == null) return null;
    synchronized (syncCache) {
        if (syncCache.hasObject(url)) {
            return syncCache.get(url);
        } else {
            return null;
        }
    }
} 
```

和这里：

```
bitmapLoader.setOnCompleteListener(new BitmapLoader.OnCompleteListener() {
            @Override
            public void onComplete(Bitmap bitmap) {
                if (syncCache != null) {
                    synchronized (syncCache) {
                        syncCache.put(bitmapLoader.getLoadUrl(), bitmap);
                    }
                }
                if (asyncCache != null) addToAsyncCache(bitmapLoader.getLoadUrl(), bitmap);
                if (onCompleteListener != null) onCompleteListener.onComplete(bitmap);
            }
        }); 
```

这是我的缓存

```
public class MemoryCache<T> implements Cache<T>{

private HashMap<String, SoftReference<T>> cache;

public MemoryCache() {
    cache = new HashMap<String, SoftReference<T>>();
}

@Override
public T get(String id) {
    if(!cache.containsKey(id)) return null;
    SoftReference<T> ref = cache.get(id);
    return ref.get();
}

@Override
public void put(String id, T object) {
    cache.put(id, new SoftReference<T>(object));
}

@Override
public void clearCache() {
    cache.clear();
}

@Override
public boolean hasObject(String id) {
    return cache.containsKey(id);
} 
```

这就是我从网上加载图像的方式：

```
private void threadedLoad(String url) {
    cancel();
    bytesLoaded = 0;
    bytesTotal = 0;
    try {
        state = State.DOWNLOADING;
        conn = (HttpURLConnection) new URL(url).openConnection();
        bytesTotal = conn.getContentLength();

        // if we don't have a total can't track the progress
        if (bytesTotal > 0 && onProgressListener != null) {
            // unused               
        } else {
            conn.connect();
            inStream = conn.getInputStream();
            Bitmap bitmap = BitmapFactory.decodeStream(inStream);
            state = State.COMPLETE;
            if (state != State.CANCELED) {
                if (bitmap != null) {
                    msgSendComplete(bitmap);
                } else {
                    handleIOException(new IOException("Skia could not decode the bitmap and returned null. Url: " + loadUrl));
                }
            }
            try {
                inStream.close();
            } catch(Exception e) {

            }
        }
    } catch (IOException e) {
        handleIOException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-14T23:21:55.020

检查是否确实死锁的一种方法是使用 Android Studio 的调试器：查看线程，右键单击处于“MONITOR”状态的线程，然后单击“Suspend”。调试器会将您带到代码中线程被卡住的行。

[![在此处输入图像描述](../Images/ce1fa073fd500c3a6c914c805b26439b.png)](https://i.stack.imgur.com/SZWgp.png)

当我调试死锁时，两个线程都在等待同步语句。

# xcode4 - iOS 6 原生 UI 元素

> ID：12115533
> 
> 赞同：0
> 
> 时间：2012-08-24T19:31:21.077
> 
> 标签：xcode4, ios6

iOS 6 是否为开发人员提供了一种复制其用户界面的方法，即如果我希望我的应用程序看起来像 iTunes 或 App Store，我可以使用 SDK 轻松做到这一点，还是我必须自己设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:17:11.687

你没有办法实现这一点。如果您在文件系统中搜索一下，您会发现 UI 实际上是 Apple 使用的图像。你必须自己动手，但我相信迟早会有类似的图像供你在互联网上使用。然后，您可以使用 UIAppearance 代理将外观设置为尽可能与 Apple 相似。

# matlab - Plottig 数据 - 时间绘图

> ID：12115534
> 
> 赞同：0
> 
> 时间：2012-08-24T19:31:25.007
> 
> 标签：matlab, time, plot

我想在 Matlab 中绘制一些数据，但我在正确显示时间时遇到了问题。

时间格式：

```
HH:MM:SS.miliseconds 
```

例如：`11:16:41.835`

我读了我的`.txt`文件（制表符分隔），现在我需要绘制数据。所有数据的长度相同，我认为时间格式有问题。有什么建议吗？`plot(time, data1)`也不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T03:47:48.600

考虑使用matlab内置的datavec，例如：

```
 dvec = datevec('11:21:02.647', 'HH:MM:SS.FFF') 

dvec =   1.0e+003 *
2.0100    0.0010    0.0010    0.0110    0.0210    0.0026 
```

更多信息可以在[这里找到](http://www.mathworks.com/help/techdoc/matlab_prog/bspgcx2-1.html)

# .net - 添加到中继器字段标签的额外文本

> ID：12115536
> 
> 赞同：0
> 
> 时间：2012-08-24T19:31:31.510
> 
> 标签：.net, text, internet-explorer-8

这只发生在 IE8 中（我没有 IE7 或 IE9 可供测试）。在Firefox中它看起来不错。

我有一个中继器，它显示从数据库读取的不同类型的徽标。它显示一个复选框、徽标图像和徽标类型的名称。很容易。

这是.NET代码

```
<asp:Repeater ID="rptLogos" runat="server" DataSourceID="ShirtLogos">
    <ItemTemplate>
        <div class="logos">
            <asp:CheckBox ID="checkBoxLogo" runat="server" value='<%# Eval("intID") %>' />
            <asp:Label ID="Label13" AssociatedControlID="checkBoxLogo" runat="server" Text='<%# Eval("strName") %>'></asp:Label>
            <asp:Image ID="Image1" ImageUrl='<%# "~/Images/Logos/" + Eval("strFileName") %>' runat="server" />                                                          
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我不使用 CheckBox Text 的原因是因为我需要完全控制带有样式的布局。无论如何，幕后的 html 并没有显示出来。只有当它呈现到页面时。案文如下：

> 全彩标志 ogo

它应该是

> 全彩标志

那个额外的“ogo”是从哪里来的？

我尝试只插入一个通用的“测试”作为文本。我得到了

> 测试

页面源代码中没有显示它。什么可能导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:13:04.683

我求助于使用 asp:CheckBox TEXT="" 调用来解决问题。多么奇怪的情况。无论如何，只需修复样式以适应不同的布局。

# java - Java 服务器中的模态式编程

> ID：12115540
> 
> 赞同：0
> 
> 时间：2012-08-24T19:31:54.407
> 
> 标签：java, modal-dialog

对于我的游戏，我让它在两台服务器上运行（一台用于游戏，一台用于登录系统）。他们都需要相互交互，有时还需要询问有关另一台服务器中其他东西的状态的问题。

在本例中，游戏服务器将询问登录服务器是否有玩家尝试登录：

```
public boolean isLoggingIn(int accountId) {
//Form a packet to send.
int retVal = sendData();
return retVal > 0;
} 
```

显然我会使用一个 int 所以可以返回布尔值以外的信息。

我的问题是，我如何让这种模态风格的编程工作？它就像 JFileChooser 的 getOpenDialog() 函数一样工作。

另外，我应该提一下，不止一个线程可以同时调用这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:41:56.850

我假设模态，你的意思是试图阻止除一个之外的所有动作。我强烈怀疑这种风格会给你带来麻烦。模态交互是一种锁定形式，因此对挂断和断开连接等不太容忍。为了使其具有容错性，您需要超时和清理代码，以应对有人进入模式但没有进一步发生的情况。（即他们关闭了笔记本电脑，或者游戏崩溃了，他们拔掉了网线等）。

如果我是你，我会尝试从身份验证和授权方面考虑问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:15:45.023

如果你在一个应该在它之后处理其他请求的线程上使用这样的东西，如果游戏和登录服务器之间的延迟很高，它会在阻塞返回值时挂起所有这些请求。当然，您想要的是一个回调，以便您的线程可以在等待响应时处理其他请求。

在收到值之前，我认为没有理由停止线程的执行。如果您需要它之后的操作的值，那么只需复制您希望在回调中成为“模态”的调用之后的所有代码。如果您希望在等待响应的同时发送多个请求，请从请求方发送一个唯一的“responseId”，响应方可以将其包含在其响应中。使用“responseId”作为以 Runnables 作为值的 Map 的键。当您收到响应时，使用 responseId 键在 Map 上调用 remove 并在返回的 Runnable 值上调用 run()。MINA 应该是异步的，不应该阻塞响应数据包。

如果你有充分的理由想在同一个线程上处理这一切，你可以查看 java.util.concurrent 包。我将使用计数为 1 的 CountDownLatch 来实现它，在发送请求消息后调用 await()，并在收到 MINA 的响应时调用 countDown()。您必须使用 AtomicReference 或长度为 1 的数组来保存您在响应中收到的值，您可以将其读回等待线程。

PS，你还在做冒险岛的工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:20:00.643

快速回答 - 您需要将两台服务器上的方法公开为支持 RMI，并简单地调用您描述的方法。

您可能会发现查看官方 Oracle RMI 教程很有用：http: [//docs.oracle.com/javase/tutorial/rmi/index.html](http://docs.oracle.com/javase/tutorial/rmi/index.html)

尽管你的设计可能是错误的——这是你的设计，为什么不让你开枪呢？;)

此外，值得一看 Spring Security：[http ://static.springsource.org/spring-security/site/](http://static.springsource.org/spring-security/site/)

# ios - NSDateFormatter 没有显示完整的月份名称，只有一位数字

> ID：12115545
> 
> 赞同：28
> 
> 时间：2012-08-24T19:32:20.010
> 
> 标签：ios, nsdate, nsdateformatter

不确定问题是什么，但我没有得到月份名称“July”，而是得到“07”。

```
dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setLocale:[NSLocale systemLocale]];
[dateFormat setTimeZone:[NSTimeZone localTimeZone]];    
[dateFormat setDateFormat:@"MMMM dd, h:mm a"]; 
```

我尝试过 M、MM、MMM、MMMM，它们都给了我一个数字，而不是月份名称，尽管前导 0 的数量不同。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-24T19:38:32.550

原来是第二行的问题，`setLocale`. `locale`我假设在手动设置时系统不会默认使用英文月份名称？我生活在讲英语的环境`locale`中，但也许没关系。

无论如何，不​​设置语言环境可以解决月份名称问题。

```
dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setTimeZone:[NSTimeZone localTimeZone]];    
[dateFormat setDateFormat:@"MMMM dd, h:mm a"]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-24T19:39:37.463

问题是语言环境，而不是格式。看一下这个：

[http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/)

基本上，“MMMM”会给你这个月的全名。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-24T19:37:21.200

`-systemLocale`不是你想要的。如果没有其他语言环境适合，它会返回一个备用语言环境。用于`-currentLocale`获取用户的当前语言环境。

另外：
您应该使用`NSDateFormatter`'`+dateFormatFromTemplate:options:locale:`方法来获取正确的日期格式。在某些语言中，这一天在月份之前，等等，反之亦然。

# javascript - HTML 可点击表格行

> ID：12115550
> 
> 赞同：0
> 
> 时间：2012-08-24T19:32:48.547
> 
> 标签：javascript, html, twitter-bootstrap

我正在使用 Twitter 的 Bootstrap，它包括表格行的简洁悬停效果，并且我想添加用户在一行亮起时所期望的可点击性。有什么万无一失的方法吗？

是的，我已经完成了我的研究，但是每个解决方案都非常尴尬并且充其量是有缺陷的。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T07:27:14.140

**的HTML**

```
<table id="example">
<tr>
    <th>&nbsp;</th>
    <th>Name</th>
    <th>Description</th>
    <th>Price</th>
</tr>
<tr>
    <td><a href="apples">Edit</a></td>
    <td>Apples</td>
    <td>Blah blah blah blah</td>
    <td>10.23</td>
</tr>
<tr>
    <td><a href="bananas">Edit</a></td>
    <td>Bananas</td>
    <td>Blah blah blah blah</td>
    <td>11.45</td>
</tr>
<tr>
    <td><a href="oranges">Edit</a></td>
    <td>Oranges</td>
    <td>Blah blah blah blah</td>
    <td>12.56</td>
</tr>
</table> 
```

**CSS**

```
table#example {
    border-collapse: collapse;   
}
#example tr {
    background-color: #eee;
    border-top: 1px solid #fff;
}
#example tr:hover {
    background-color: #ccc;
}
#example th {
    background-color: #fff;
}
#example th, #example td {
    padding: 3px 5px;
}
#example td:hover {
    cursor: pointer;
} 
```

**jQuery**

```
$(document).ready(function() {

    $('#example tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });

}); 
```

我在[这里得到了代码](http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:38:19.687

虽然我的谷歌技能非常棒，但这是大多数人应该找到的...... [http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/](http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/)

但是，为了使它更容易......简单地给行一个 id 并使用 jQuery 分配一个指向该 id 的链接怎么样？

```
<table>
<tr id='link1'>
    <td>one</td>
    <td>two</td>
    <td>three</td>
    <td>four</td>
</tr>
<tr id='link2'>
    <td>two-one</td>
    <td>two-two</td>
    <td>two-three</td>
    <td>two-four</td>
</tr>
</table>​ 
```

​和

```
$("#link1").click(function(){
window.location = "http://stackoverflow.com/questions/12115550/html-clickable-table-rows";
});
$("#link2").click(function(){
window.location = "http:///stackoverflow.com";
}); 
```

另见： http: [//jsfiddle.net/avrZG/](http://jsfiddle.net/avrZG/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T10:34:30.277

没有 jQuery：

```
<table>
<tr id='link1' onclick="document.location='http://stackoverflow.com/about';">
    <td>one</td>
    <td>two</td>
    <td>three</td>
    <td>four</td>
</tr>
<tr id='link2' onclick="document.location='http://stackoverflow.com/help';">
    <td>two-one</td>
    <td>two-two</td>
    <td>two-three</td>
    <td>two-four</td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T08:19:21.077

目前尚不清楚您要做什么，但您可能想要以下内容。将 tabindex 添加到 tr 元素将在大多数浏览器中工作，并且可以通过鼠标单击或键盘选项卡将焦点设置在行上。

```
<table>
    <tr id='link1' tabindex="100">
        <td>one</td>
        <td>two</td>
        <td>three</td>
        <td>four</td>
    </tr>
    <tr id='link2' tabindex="101">
        <td>two-one</td>
        <td>two-two</td>
        <td>two-three</td>
        <td>two-four</td>
    </tr>
</table> 
```

# java - 在 Java 中优化 for 循环有用吗？

> ID：12115555
> 
> 赞同：3
> 
> 时间：2012-08-24T19:32:56.870
> 
> 标签：java, optimization, for-loop

> **可能重复：**
> [for循环优化](https://stackoverflow.com/questions/6093537/for-loop-optimization)

假设我们要遍历 string 的字符`s`。我想说以下代码或多或少是默认代码。

```
for( int i = 0; i < s.length(); i++ ) {
    doSomethingWith( s.charAt( i ) );
} 
```

问题 #1：为什么我经常看到以下内容？

```
final int length = s.length();
for( int i = 0; i < length; i++ ) {
    doSomethingWith( s.charAt( i ) );
} 
```

乍一看，这似乎是合理的，因为每次迭代都会评估不等式。但是，我希望 VM 无论如何都会对此进行优化，因为字符串是不可变的。有什么想法吗？如果我们迭代一个可变结构（没有被任何其他线程引用）怎么办？如果`length()`不能保证在 O(1) 中运行怎么办？

问题 #2：有些人似乎认为替代`++i`可以`i++`加快代码速度。他们是对的吗？同样，这不是我所期望的，但我只是不确定。

我们都知道不要过早优化。同时，如果我们能够以几乎不花费任何代价来生成稍微快一点的代码，那么我们不这样做就太愚蠢了。当然，有人可能会争辩说这两种“优化”都会损害可读性，但在我看来，损害是如此之小，以至于在某些情况下它是合理的。

我试图衡量性能上的任何差异，但很难得出结论性的结果。尽管这应该适用于任何特定的应用程序，但我的目标是在这里获得洞察力和一般性答案。

（虽然我在写这篇文章时考虑到了 HotSpot VM，但考虑其他平台也可能很有趣，比如移动设备。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T19:35:29.403

> 问题 #1：为什么我经常看到以下内容？

第一个例子是过早的优化。人们这样做的原因是他们通常不会分析他们的代码以查看真正的瓶颈在哪里，而只是尝试猜测。

> 如果不能保证 length() 在 O(1) 中运行怎么办？

那么进行这种优化会更有意义。如果您知道计算长度是一项昂贵的操作并且值不会改变，那么计算一次并存储结果可能会提高性能。

> 问题 #2：有些人似乎认为用 ++i 代替 i++ 可以加快代码速度。他们是对的吗？同样，这不是我所期望的，但我只是不确定。

他们是不对的。他们的论点是`i++`必须创建变量的临时副本，而`++i`没有。很久以前，当编译器不擅长优化时，这在 C 或 C++ 中曾经是正确的。Java 并非如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:35:41.963

> 乍一看，这似乎是合理的，因为每次迭代都会评估不等式。但是，我希望 VM 无论如何都会对此进行优化，因为字符串是不可变的。

编译器对此进行了优化。像那样做`i < s.length();`就好了。

> 有些人似乎认为用 ++i 代替 i++ 可以加快代码速度。

它不会，除非你给 ++i 的返回值赋值

# iphone - UIbutton 标签属性

> ID：12115561
> 
> 赞同：0
> 
> 时间：2012-08-24T19:33:48.127
> 
> 标签：iphone, objective-c, ios, uikit, uibutton

刚开始使用 Xcode。我从 UIButton 制作了一个 IBOutlet，以便可以通过更改本地化设置来更改标题。我尝试使用此代码来执行此操作

```
_loginButton.titleLabel.text = NSLocalizedString(@"Login", nil); 
```

但是这段代码没有设置按钮标题。我需要使用另一种财产吗？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:36:13.713

您需要提供一个`UIControlState`来设置标题。

```
[_loginButton setTitle:NSLocalizedString(@"Login", nil) forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:36:01.857

对于 UIButton，尝试像这样设置标题：

```
[self.loginButton setTitle:NSLocalizedString(@"Login", nil) forState:UIControlStateNormal]; 
```

[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)记录的还有其他状态

但是如果你不指定这些状态的标题，它们将默认使用正常状态。

# regex - 正则表达式匹配所有不是 4 位数的数字

> ID：12115566
> 
> 赞同：9
> 
> 时间：2012-08-24T19:34:12.127
> 
> 标签：regex, r

我匹配并替换前面和后面跟着空格的 4 位数字：

```
str12 <- "coihr 1234 &/()= jngm 34 ljd"
sub("\\s\\d{4}\\s", "", str12)
[1] "coihr&/()= jngm 34 ljd" 
```

但是，每次尝试反转它并提取数字都会失败。我想：

```
[1] 1234 
```

有人有线索吗？

ps：我知道如何用 {stringr} 做到这一点，但我想知道它是否可能只用 {base} ..

```
require(stringr)
gsub("\\s", "", str_extract(str12, "\\s\\d{4}\\s"))
[1] "1234" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T20:55:41.440

`regmatches()``regexpr`，仅从 R-2.14.0 开始可用，允许您“从通过,`gregexpr`或获得的匹配数据中提取或替换匹配的子字符串`regexec`”

以下是如何使用示例`regmatches()`来提取输入字符串中的*第一个空白缓冲 4 位子字符串或**所有*此类子字符串。

```
## Example strings and pattern
x <- "coihr 1234 &/()= jngm 34 ljd"          # string with 1 matching substring
xx <- "coihr 1234 &/()= jngm 3444  6789 ljd" # string with >1 matching substring
pat <- "(?<=\\s)(\\d{4})(?=\\s)"

## Use regexpr() to extract *1st* matching substring
as.numeric(regmatches(x, regexpr(pat, x, perl=TRUE)))
# [1] 1234
as.numeric(regmatches(xx, regexpr(pat, xx, perl=TRUE)))
# [1] 1234

## Use gregexpr() to extract *all* matching substrings
as.numeric(regmatches(xx, gregexpr(pat, xx, perl=TRUE))[[1]])
# [1] 1234 3444 6789 
```

（请注意，这将返回`numeric(0)`不包含与您的条件匹配的子字符串的字符串）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T20:35:16.320

可以使用 .regex 在正则表达式中捕获组`()`。举同样的例子

```
str12 <- "coihr 1234 &/()= jngm 34 ljd"
gsub(".*\\s(\\d{4})\\s.*", "\\1", str12)
[1] "1234" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:58:03.997

一般来说，我对正则表达式很天真，但这是在基础上做的一种丑陋的方式：

```
# if it's always in the same spot as in your example
unlist(strsplit(str12, split = " "))[2]

# or if it can occur in various places
str13 <- unlist(strsplit(str12, split = " "))
str13[!is.na(as.integer(str13)) & nchar(str13) == 4] # issues warning 
```

# php - 在通过 AJAX 传递的 PHP 中附加 XML 时遇到问题

> ID：12115571
> 
> 赞同：0
> 
> 时间：2012-08-24T19:35:06.897
> 
> 标签：php, ajax, jquery, simplexml

我已经为同一个项目发布了另一个问题，该问题得到了有益的回答，但我似乎遇到了另一个问题，该问题似乎足够不同，因此需要一个单独的问题。任何帮助将不胜感激，如果您能提供任何帮助，请提前感谢您。

好的，首先让我描述一下我在做什么。我正在使用带有位置库的 google Maps Javascript v3 API 来查找附近的餐馆和一些关于它们的额外信息。每个搜索结果（在本例中为餐厅）的数据都存储在 JSON 对象中。现在一位同事需要这些 XML 格式的数据并存储在我们的 Web 服务器上，以便他的程序可以访问和读取它。所以我使用 jQuery JSON2XML 插件 ( [http://goessner.net/download/prj/jsonxml/](http://goessner.net/download/prj/jsonxml/) ) 将该 JSON 转换为 XML 字符串。然后我使用 jQuery ajax 函数将数据推送到应该保​​存它的 php 文件中。这是javascript代码：

```
function sendData(result)
{
    $.ajax(
    {
        type:'POST',
        url:'getXML.php',
        data:
        {
            'myXML': result,
            'ajax' : true
        },
        success: function(data)
        {
            $('#output').text(data);
        }
    })
} 
```

然后从那里数据应该被发送到我的 PHP 文件 (getXML.php)，我编写的代码将打开一个现有的 XML 文件（在 PHP5 中使用 SimpleXML），然后附加来自 AJAX 调用的 XML。然后它将保存 XML 文件，这一切都将在每家餐厅再次发生。（所以它将向服务器发送多个 AJAX POST 请求。）这是我的 PHP 代码：

```
<?php
    //Set error reporting
    ini_set('display_errors', 1);
    ini_set('log_errors', 1);
    ini_set('error_log', dirname(__FILE__) . '/error_log.txt');
    error_reporting(E_ALL);

    //Checks if the get request is from the AJAX call
    if($_POST['ajax'])
    {
        //////////////////////////////Code for editing XML/////////////////////////////////////////
        //Checks to see if the xml file exists.
        if (file_exists('business.xml')) 
        {
            //Loads the XML file
            $xml = simplexml_load_file('business.xml');

            //Append XML to existing file using data loaded in from AJAX request
            appendXML($xml);    
        } 
        else 
        {
            //Loading XML has failed
            exit('Failed to open business.xml.');
        }
    }

    function appendXML($xml)
    {
        //Creates new business node
        $business = $xml ->addChild('business');

        //Adds XML to business node (Please oh dear god let this work)
        $business ->addChild($_POST['myXML']);

        file_put_contents("business.xml", $xml);
        header('Location: form_upload.php');
    }
?> 
```

好的，这有点多，但让我进入我告诉你我的问题的部分。我是 PHP 新手，所以我不完全确定这里出了什么问题，但是当我将数据发布到服务器时，每个 ajax 请求都会出现两个错误。

第一个是：

```
PHP Warning:  simplexml_load_file() [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: business.xml:1: parser error : Document is empty in /home/mpn3712/www/309/gPlaces/getXML.php on line 16 
```

第二个是

```
PHP Fatal error:  Call to a member function addChild() on a non-object in /home/mpn3712/www/309/gPlaces/getXML.php on line 31 
```

再次感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:39:02.213

`$xml`中引用时不在范围内`appendXML()`。您需要通过参数传递它。

另外，一定要`exit()`在你写一个`Location`标题之后。

```
if (file_exists('business.xml')) 
{
    //Loads the XML file
    $xml = simplexml_load_file('business.xml');

    //Append XML to existing file using data loaded in from AJAX request
    appendXML($xml);    
} 
. 
. 
.
function appendXML($xml)
{
    //Creates new business node
    $business = $xml ->addChild('business');

    //Adds XML to business node (Please oh dear god let this work)
    $business ->addChild($_POST['myXML']);

    file_put_contents("business.xml", $xml);
    header('Location: form_upload.php');
    exit();
} 
```

[这是 PHP 手册中关于变量范围的文档。](http://php.net/manual/en/language.variables.scope.php)

# java - 图像作为游戏关卡

> ID：12115574
> 
> 赞同：-2
> 
> 时间：2012-08-24T19:35:13.117
> 
> 标签：java, image, game-engine, levels

过去几天我一直在搜索，但似乎找不到任何关于如何读取 .png 文件然后构建关卡的内容。我已经知道如何加载图像和文件，但是如何从其中提取数据以构建游戏关卡。有人愿意开导我吗？顺便说一句，我使用 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:40:55.863

你想的太高了。编程语言不知道什么是“游戏”或“关卡”。你可以加载一个图像文件，这很棒——现在你在内存中有一组二进制数据。这些位没有任何*意义。*你需要的是一个代表你水平的模型；例如，也许您可​​以简单地拥有两张图像，其中一张是“背景”，另一张是遮挡图。例如，第二张图像上的黑色区域是不可通过/阻挡的，而第一张图像只是显示时的级别。

当您使用“真正的”编程语言而不是游戏构建工具包编写代码时，构建模型来表示您的问题是*您的*责任。

# javascript - UTF-8 字符串比较在 javascript 中返回 false

> ID：12115576
> 
> 赞同：1
> 
> 时间：2012-08-24T19:35:24.540
> 
> 标签：javascript, android, cordova, utf-8

我有一个Phonegap，并且在比较从SD卡中编码为UTF-8的文件中读取的字符串和存储在程序中的常量时遇到问题。在文件中，我正在阅读“模型”（UTF-8）==“模型”（存储在 js 文件中）是错误的！。有没有人遇到过这样的问题？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:48:23.777

字符串不能完全是你所说的那样。如果它们确实是 UTF-8，拼写“模型”（非常适合 ascii 范围），那么它们将是相同的。

我将采取的下一步只是逐字节分析两个字符串。当你用所有信息扩展你的问题时，包括实际代码，也许还有你试图读取的数据的十六进制转储。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T19:44:59.837

也许尝试这样的事情

```
function encode_utf8( s )
{
  return unescape( encodeURIComponent( s ) );
}

function decode_utf8( s )
{
  return decodeURIComponent( escape( s ) );
} 
```

# jquery - 选择没有特定类的元素的最后一个子元素

> ID：12115578
> 
> 赞同：0
> 
> 时间：2012-08-24T19:35:29.963
> 
> 标签：jquery, css

我试图选择一个没有特定类的孩子的最后一个元素。我已经设置了一个[`js fiddle`](http://jsfiddle.net/VATaj/2).

```
<aside class="col2">
    <div class="infobox teal"></div>
    <div class="infobox mediumbrown"></div>
    <div class="quotebox"></div>
    <div class="quotebox"></div>
</aside> 
```

我试过了：

```
$("aside.col2 div:last").not(".quotebox").addClass("last-round"); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T19:39:22.587

您必须先执行以下`not`操作`last`：

```
$("aside.col2 div:not('.quotebox'):last") 
```

[http://jsfiddle.net/VATaj/1/](http://jsfiddle.net/VATaj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:39:48.840

```
$("aside.col2 div:last:not(.infobox)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:40:18.993

```
$("aside.col2 div").not('.quotebox').last(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T19:41:07.443

```
$("aside.col2 :not(.quotebox)").last().addClass("last-round"); 
```

选择所有没有类的，然后得到最后一个。

# ruby-on-rails - Spree Commerce 正在运作，但没有资产。

> ID：12115579
> 
> 赞同：0
> 
> 时间：2012-08-24T19:35:36.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, e-commerce, spree

我正在尝试自定义和修改 Spree Commerce，但在 app/views、lib/assets 或我能想到的其他任何地方都没有标准资产文件/图像/视图。我正在尝试阅读他们的教程，但找不到任何可编辑的内容。是否有另一个命令我需要解压缩所有内容或其他内容？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:41:34.310

我的方法是通过 github.com 下载主要的 spree gem，查看图像的位置，然后在我的本地 app/assets 目录中创建我想要覆盖的图像，并使用相同的路径运行：

```
rake assets:precompile:nondigest 
```

重新启动 webrick/pow 或您正在运行的任何其他 Web 服务器，瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T19:32:29.273

我猜你并不真正熟悉宝石的工作原理。正如这里的人所说，这些不会自动显示在您的核心应用程序目录中，但 gemfile 和运行的 bundle install 知道如何引用它们。

因此，正如您所说，您需要找到那些宝石来找出文件名。如果要查看 gemfiles，请在终端中运行以下命令：

```
$ bundle open spree_frontend 
```

如果您收到此错误：

`To open a bundled gem, set $EDITOR or $BUNDLER_EDITOR`

那么你还没有设置编辑器，所以这样做：

```
export BUNDLER_EDITOR=sublime 
```

然后重做捆绑打开命令。这应该会打开 spree_frontend 目录，让您可以调查文件名/路径和资产。如果要更改整个模板，则需要创建与 spree gem 中的名称和路径完全匹配的文件（例如 spree/layouts/spree_application.html.erb），然后在编辑它时，您的 rails 应用程序将在您的核心应用程序目录中呈现代码，从而覆盖 spree gem。

有道理？

# regex - 正则表达式匹配任何子目录

> ID：12115580
> 
> 赞同：3
> 
> 时间：2012-08-24T19:35:39.887
> 
> 标签：regex

请原谅我的标题不够准确......我需要一个（简单的？）正则表达式（我很讨厌）来匹配以下内容

```
/Parent/AnySubDirectory/Child/ 
```

父母和孩子总是父母和孩子。任何子目录可以有任何名称：

```
/Parent/Sub1/Child/
/Parent/Sub2/Child/ 
```

我研究的一切都比必要的复杂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T19:37:04.553

```
/Parent/[^/]+/Child/ 
```

应该管用。

`[^/]+`表示“除斜线之外的一个或多个字符”。

# c# - 将所选值从一个下拉列表传递到另一个

> ID：12115583
> 
> 赞同：1
> 
> 时间：2012-08-24T19:35:48.567
> 
> 标签：c#, asp.net, .net

我有一个从本地机器读取驱动器的下拉菜单。我想将另一个 DDL 链接到驱动器 DDL。因此，无论选择哪个值，我都想将其传递给第二个 DDL 以显示该驱动器上的目录，尽管我遇到了一些麻烦。换行常数不断弹出。有任何想法吗？谢谢

```
 //get value from first Drive drop down
    var driveValue = ddl_listDrives.SelectedValue.ToString();

    //pass it in directories to be called when btn is clicked
    var directorys = Directory.GetDirectories("@" + driveValue + ":\"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:45:40.127

我认为以下行是不正确的，因为这`":\"`意味着将在 之后提供另一个字符`\`以形成控制字符...

```
var directorys = Directory.GetDirectories("@" + driveValue + ":\"); 
```

为了`"c:\dir\file.txt"`在 C# 中使用，您需要`"c:\\dir\\file.txt"`或者（正如您在评论中提到的那样）`@"c:\dir\file.txt"`称为“带引号的字符串文字”（[有关更多详细信息，请参见此处](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.71%29.aspx)）

我相信你应该拥有的是以下**几**行之一......

```
var directorys = Directory.GetDirectories(driveValue + @":\");
var directorys = Directory.GetDirectories(driveValue + ":\\"); 
```

# c++ - 用 c++ 和 mex 输出一个矩阵

> ID：12115584
> 
> 赞同：0
> 
> 时间：2012-08-24T19:35:57.037
> 
> 标签：c++, matlab, mex

我的 C++ 代码有问题。我想从我的 cpp 程序返回一个 k 维矩阵到 Matlab。

我要传递的矩阵存储在`all_data`, 并且是一个大小为 的矩阵`(npoints+1) x ndims`。

我一直在寻找如何做到这一点，我想出了：

```
 //send back points
    vector< vector <double> > indexes = mxGetPr(plhs[0]);
    for (int i=0; i < (npoints1+1); i++)
            for (int j=0; j < ndims1; j++)
                indexes[ i ][ j ] = all_data[ i ][ j ]; 
```

但它不起作用，因为它`all_data`是一个`vector<vector<double>>`变量，matlab 说：

```
error: conversion from 'double*' to non-scalar type 
'std::vector<std::vector<double, std::allocator<double> >, 
std::allocator<std::vector<double, 
std::allocator<double> > > >' requested 
```

有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:43:42.077

`mxGetPr`不返回`vector<vector<double> >`. 它返回一个`double *`. MATLAB 数组以列为主连续存储在内存中。假设您已经创建了具有正确尺寸的 plhs[0]，那么您需要做的就是：

```
double *indexes = mxGetPr(plhs[0]);
for (int i=0; i < (npoints1+1); i++)
    for (int j=0; j < ndims1; j++)
        indexes[i + ndims1*j] = all_data[ i ][ j ]; 
```

请注意将 2 个索引转换为线性偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:41:59.750

看起来 mxGetPr 正在向您返回一个指向双精度数组的指针，并且您正在将它分配给一个向量向量。

这应该有效：

```
double* indexes = mxGetPr(plhs[0]); 
```

# jquery - jquery.maskedinput-1.3.js 与 jquery.validate 1.9.0 冲突

> ID：12115588
> 
> 赞同：0
> 
> 时间：2012-08-24T19:36:13.617
> 
> 标签：jquery, jquery-validate

将 jquery.maskedinput 应用到使用 jquery.validate 验证的输入时，jquery.validate 错误地将输入解释为需要关注输入元素。我怎样才能防止这种影响？

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>jQuery validation with mask</title>

        <script src="http://code.jquery.com/jquery-1.7.2.js"></script> 
        <script src="http://cloud.github.com/downloads/digitalBush/jquery.maskedinput/jquery.maskedinput-1.3.js" type="text/javascript"></script>

        <!-- Using jquery.validate 1.9.0 -->
        <script src="jquery.validate.js" type="text/javascript"></script>
        <script src="additional-methods.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(function(){
                var validate = $("#myForm").validate({
                    rules: {phone:'phoneUS'},
                    messages: {phone:'Enter a valid phone number'},
                    submitHandler: function(form) {alert('submit');}
                });

                $("#phone").mask("(999) 999-9999");

            });
        </script>
    </head>
    <body>
        <form id="myForm" method="get" action="">
            <label for="phone">Phone</label>
            <input id="phone" name="phone" type='text' />
            <input type="submit" value="Submit" class="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:43:05.047

我只是在研究类似的问题/错误时发现了这一点。我认为该版本的 maskedinput 与 jquery-1.9 冲突。我在这里发现： [https](https://github.com/angular-ui/angular-ui/issues/495) ://github.com/angular-ui/angular-ui/issues/495不知道这是否对您有帮助，但是..

# c# - 从字符串中解析一个值

> ID：12115592
> 
> 赞同：1
> 
> 时间：2012-08-24T19:36:34.180
> 
> 标签：c#, regex

我在谷歌上搜索了 30 分钟，但没有找到任何可以帮助我的东西。

我的问题是我正在尝试使用 RegExp 从字符串中解析某些内容。我通常是一名 PHP 开发人员并且会使用`preg_match_all()`它，但由于 C# 中不存在这（哦，真的），我需要别的东西。

想象一下我有这个字符串：

```
string test = "Hello this is a 'test' a cool test!"; 
```

现在我想获取单引号 ( **'** ) 中的内容 - 在此示例中为**test**。

提前感谢您帮助我。对不起我的英语不好，这不是我的母语！：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:50:45.553

一种更简单、非正则表达式的方法：

```
string textInQuotes = String.Empty;
string[] split = test.Split('\'');
if (split.Length > 2) textInQuotes = split[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:38:14.787

C# 的做法 `preg_match_all`是使用`System.Text.RegularExpressions.Regex`类和`Match`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:45:32.360

这是示例应用程序代码。

```
using System;
using System.Text.RegularExpressions;

namespace ExampleApp
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            // This is your input string.
            string test = "Hello this is a 'test' a cool test!";
            // This is your RegEx pattern.
            string pattern = "(?<=').*?(?=')";

            // Get regex match object. You can also experiment with RegEx options.
            Match match = Regex.Match(test, pattern);
            // Print match value to console.
            Console.WriteLine(match.Value);
        }
    }
} 
```

希望它有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T20:41:21.437

这是一个正则表达式解决方案，它允许在文本的引用部分中使用转义分隔符。如果您更喜欢 *nix 反斜杠样式的转义，只需将正则表达式的适当部分 , 替换`('')`为`(\\')`.

```
static readonly Regex rxQuotedStringLiteralPattern = new Regex(@"
                 # A quoted string consists of
    '            # * a lead-in delimiter, followed by
    (?<content>  # * a named capturing group representing the quoted content
      (          #   which consists of either
        [^']     #   * an ordinary, non-delimiter character
      |          #   OR
        ('')     #   * an escape sequence representing an embedded delimiter
      )*         #   repeated zero or more times.
    )            # The quoted content is followed by 
    '            # * the lead-out delimiter
    "
    , RegexOptions.ExplicitCapture|RegexOptions.IgnorePatternWhitespace
    ) ;

public static IEnumerable<string> ParseQuotedLiteralsFromStringUsingRegularExpressions( string s )
{
  for ( Match m = rxQuotedStringLiteralPattern.Match( s ?? "" ) ; m.Success ; m = m.NextMatch() )
  {
    string raw    = m.Groups[ "content" ].Value ;
    string cooked = raw.Replace( "''" , "'" ) ;
    yield return cooked ;
  }
} 
```

# c# - jQuery-validation 的奇怪滚动条行为

> ID：12115596
> 
> 赞同：1
> 
> 时间：2012-08-24T19:36:57.663
> 
> 标签：c#, javascript, asp.net, css, jquery-validate

当我单击 Add Dependent 链接按钮时，我希望滚动条滚动到底部，这很有效。问题是当回发后选择添加相关链接按钮时，文本“<em>请修复以下问题：”会显示一秒钟。但是，它下面没有错误消息。如果存在验证问题，验证（jQuery-validation 插件）可以正常工作。

谢谢。

这是相关的asp.net代码：

```
<script type="text/javascript" language="javascript">
    function toBottom(id) {
        document.getElementById(id).scrollTop = document.getElementById(id).scrollHeight
    }

</script>
<div id="divscroll" class="scroll">

</div>

<div id="validationMessageContainer" class="error" >
    <span id="info_dep_fix_problemls">Please fix the following problems:</span>
    <ul></ul>
</div> 

<asp:LinkButton ID="AddDependent" Text="Add Dependent" CssClass="btngeneral" OnClientClick="toBottom('divscroll')"
            OnClick="AddDependent_Click" runat="server" />&nbsp;&nbsp; 
```

后面的 C# 代码：

```
protected void AddDependent_Click(object sender, EventArgs e)
{
    //Other unrelated code  -- the button has to be server side as we do database connections, etc.
getScrollPosition();
}

protected void getScrollPosition()
    {
        //Sets the scroll position of the divscroll to the bottom on postback
        ClientScript.RegisterStartupScript(this.GetType(), "toBottom", "toBottom('divscroll')", true);
    } 
```

这是滚动div的css。

```
div.scroll
{
    -ms-overflow-x:hidden; 
    overflow-x:hidden; 
    -ms-overflow-y:auto; 
    overflow-y:auto; 
    max-height: 400px;
    max-width: 900px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:47:16.850

我们想通了，添加`style="display:none"`到`validationMessageContainer`div 中，修复了它。

感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:13:52.377

尝试在 JavaScript 末尾添加 return false; 或者可能是从后面的代码中出现的？目前还不清楚。你的意思是jquery验证插件？如果是表单验证器，请查看插件代码。

# html - 新的 HTML5 画布方法：addHitRegion

> ID：12115597
> 
> 赞同：3
> 
> 时间：2012-08-24T19:36:58.067
> 
> 标签：html, canvas

我一直在阅读一些关于即将推出`addHitRegion()`的`canvas`. 从我读过的内容来看，这听起来很像是在画布上添加可点击热点的一种方式——这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:53:53.113

我以前从未听说过，但似乎可点击的热点是可能的用途之一。

从目前的[规格](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#hit-region)：

> 命中区域可用于多种目的：
> 
> *   有了 ID，他们可以通过让用户代理检查鼠标在哪个区域上并将 ID 包含在鼠标事件中来更轻松地检测命中。
> *   使用控件，他们可以自动将事件路由到 DOM 元素，例如允许单击画布以通过按钮元素自动提交表单。
> *   使用标签，他们可以使用户更容易在不看到画布的情况下探索它，例如通过在移动设备上触摸。
> *   使用光标，它们可以使画布的不同区域更容易拥有不同的光标，用户代理会自动在它们之间切换。

# jquery - 从外部 SharePoint 页面上下文调用 SPService

> ID：12115607
> 
> 赞同：1
> 
> 时间：2012-08-24T19:37:39.893
> 
> 标签：jquery, sharepoint-2010

使用来自 codeplex 的 SPServices jQuery 库或任何其他基于 javascript 的解决方案是否可以使用此库和 jQuery 从独立的 HTML 页面调用 SharePoint 2010 Web 服务？基本上我需要将文件上传到现有的文档集，但我需要从独立页面这样做。用户将处于单点登录情况并登录到 Dynamics CRM。

[CodePlex 的 SPService](http://spservices.codeplex.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:55:31.917

谷歌“共享点外的 spservices”。

第二个链接是[必须在 SharePoint 中托管使用​​ SPServices 的页面吗？](http://spservices.codeplex.com/discussions/267417)

来自 SPServices 作者：

> 虽然您使用 SPServices 的页面不必位于 SharePoint 中，但如果不是，*则*通常会遇到身份验证问题。SharePoint 不知道用户的身份，或者可能存在跨域脚本问题。所有这一切都有太多的变化，我通常无法给出是或否的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T03:05:34.303

这是一个旧线程，但是在我自己尝试了很多痛苦之后，我通过在一个独立的 html 页面上创建一个 iFrame 来解决身份验证问题，该页面本身会加载另一个托管在 SharePoint 网站上的 html 页面。iFrame 中加载的页面使用 postMessage() 将 List 数据发送到父页面。这似乎也适用于 Firefox 和 Chrome。

总之：

第 1 步：创建一个 html 页面 (SharepointProxy.html) 并将其放入您要查询的站点上的 Sharepoint 列表中：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Web Proxy IFrame</title>
        <meta charset="windows-1252">
        <meta name="viewport" content="width=device-width">
        <script src="jquery-1.10.2.js"></script>
        <script src="jquery.SPServices-2014.01.js"></script>
        <script>
            function callback(e){

                if(e.origin == "https://your.otherdomain.com/index"){ //this is your standalone web page
                    e.source.postMessage(jsonToSend, "https://your.otherdomain.com/index"); //same standalone web page here
                }
                return true;
            }
        </script>
    </head>
    <body>
        <h1>SharePoint proxy - Do Not delete!</h1>
        <p>If you'd like to know further detail about its purpose, please email someperson@some.com</p>
        <h2>Purpose</h2>
        <p>This page serves as a proxy to call within an Iframe on an external site. This page fetches [whatever]
            from the SharePoint Portal and makes them available as a JSON string</p>

        <script>
            var someListData;
            $().SPServices({
                operation: "GetListItems",
                webURL: "https://sharepoint-portal.com/sites/your_site",
                listName: "List Name",
                async: false,
                completefunc: function(xData, Status) {
                    //alert(xData.responseText);
                    someListData = $(xData.responseXML).find("z\\:row, row").map(function() {
                        return {
                            value: $(this).attr("ows_LinkTitle") || " ",
                            desc: $(this).attr("ows_Details") || " "
                        };
                    }).get();
                }
            });

            var jsonToSend = JSON.stringify(someListData);

            document.addEventListener("message", callback,false);
            window.top.postMessage(jsonToSend, "*");
        </script>
    </body>
</html> 
```

第 2 步：在您要显示 Sharepoint 列表数据的网页上，放置这些函数以创建 iFrame 并从 SharePoint 加载您的页面：

```
(function() { //create an iFrame to load our SharepointProxy.html page inside of
    var iFrame = document.createElement("iframe");
    iFrame.style.display = "none";
    iFrame.id = "sharePointProxyFrameContainer";
    iFrame.src = "https://sharepoint-portal.com/sites/your_site/Site%20Assets/SharepointProxy.html";
    document.body.appendChild(iFrame);
})();

function processSharePointListData(d){
    var data = JSON.parse(d);
    // do something with data
}

window.addEventListener("message", function(e) {
    if (e.origin === "https://sharepoint-portal.com/") {
        processSharePointListData(e.data);
        return true;
    }

}, false); 
```

# php - sharer.php?u= 停止为我的域工作

> ID：12115608
> 
> 赞同：1
> 
> 时间：2012-08-24T19:37:44.790
> 
> 标签：php, facebook-sharer

我们的软件有一个视频库，可以让用户将视频链接发送到 facebook。我们正在使用非常简单的 sharer.php 技术。

在过去的几天里，这突然停止工作。

这是我要分享的链接。当我转到它时，有时我会看到一个空白屏幕，有时我会看到共享者但没有预定义的内容。

[https://www.facebook.com/sharer/sharer.php?u=http://RachelHomer1234.nowsender.com/e/vd?NW76AT](https://www.facebook.com/sharer/sharer.php?u=http://RachelHomer1234.nowsender.com/e/vd?NW76AT)

（也发布 URL 编码的一个。两者都不起作用。）

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2FRachelHomer1234.nowsender.com%2Fe%2Fvd%3FDQT5XC](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2FRachelHomer1234.nowsender.com%2Fe%2Fvd%3FDQT5XC)

我在我们的其他网站上使用相同的共享代码，并且工作正常，这让我怀疑可能存在一些域阻止？

任何帮助将不胜感激。

在此先感谢，雷切尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:28:33.067

事实证明，问题出在域的情况下。如果您将 RachelHomer1234 更改为 rachelhomer1234 它似乎工作得很好。

没有文档可以支持这一点，只有我自己的试验和错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:40:37.017

您可以通过以下方式尝试：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frachelhomer1234.nowsender.com%2Fe%2Fvd%3FNW76AT](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frachelhomer1234.nowsender.com%2Fe%2Fvd%3FNW76AT)

此工具删除缓存（如果存在）。

现在链接有效。

# android - 在 Google Play 上从免费应用更改为付费应用

> ID：12115614
> 
> 赞同：16
> 
> 时间：2012-08-24T19:38:16.087
> 
> 标签：android, google-play

这个问题可能跑题了，但我想问问其他开发人员。

有没有办法在 Google play 上将我的免费应用程序更改为付费应用程序？

如果允许，现有用户会发生什么？当新的更新可用时，他们会被要求付款吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T19:44:19.037

您不能在 Google Play 商店中将免费应用程序更改为付费应用程序。您可以使用不同的名称重新上传，但这显然会破坏您的用户群。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-11T11:43:06.767

您可以将应用内支付处理添加到您的免费​​应用并为增强功能收费。每

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1153479](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1153479)

“通过使用应用内计费功能，您可以为您的应用程序添加创收功能，增强付费应用程序的收入潜力，并将免费应用程序转变为新的收入来源。”

现在，您是否可以禁用免费应用程序中已经提供的功能，然后通过应用程序内付款进行收费以恢复它？从技术上讲，我确实认为可以做到，因为您可以控制这些功能的实现，尽管您必须调查这是否违反了 Google 的政策。

但是，这样做可能会疏远您的用户，如果消息传开，他们甚至可能会停止更新您的应用程序以避免“陷阱”。因此，更好的方法可能是添加增强现有功能的诱人*新*功能，然后*对其收费*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-05T08:17:32.267

你不能。检查[这个](https://support.google.com/googleplay/android-developer/answer/6334373?visit_id=1-636558273519012181-3217689816&rd=1#paid_free)

> “一旦您的应用程序免费提供，该应用程序就无法更改为付费应用程序。如果您想为应用程序收费，您需要创建一个具有新包名称的新应用程序并设置价格。”

# java - Java TV API 指南

> ID：12115616
> 
> 赞同：3
> 
> 时间：2012-08-24T19:38:24.650
> 
> 标签：java, network-monitoring, dvb, transport-stream, dvblast

我想编写一个传输流（TS）监控程序来监控网络上的媒体流。我想监视哪些流是活着的，如果可能的话，捕获有关它们的信息。我想使用免费的开源框架，而不是这样的应用[程序](http://www.tsreader.com/tsreader/index.html)。我是一名 java 程序员，发现[Java TV API 1.1 (JSR-927)](http://java.sun.com/javame/reference/apis/jsr927/overview-summary.html)是我的目的的 java 框架。我找到了几个资源和 java-docs 但是我没有找到任何使用这个框架的示例程序。我所看到的只是一些 java 接口，我很困惑如何在实际程序中使用它们。是否需要使用[videoLan DVBLast](http://www.videolan.org/projects/dvblast.html)等DVB框架才能使用？如果有人知道这个框架的用法；这对我很有用。

# rdbms - RA 算子差异 - 关系代数

> ID：12115624
> 
> 赞同：1
> 
> 时间：2012-08-24T19:39:11.027
> 
> 标签：rdbms, relational-algebra

我很困惑 PROJECT A(r - s) 和 PROJECT A(r) - PROJECT A(s) 在 RDBMS 中的表达方式有何不同。任何人都可以举一个例子来证明上面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:57:48.980

```
s = [x  y]
     0  0
     1  1
     2  2

r = [x  y]
     0  0
     0  1
     0  2
     1  1
     1  2
     2  2

A = {y}

PROJECT A(r − s)=[y]
          1
          2

PROJECT A(r) − PROJECT A(s)=[y] 
```

以下是如何生成（反）这样的示例。OP 问题转化为[QBQL](http://code.google.com/p/qbql/)断言：

```
a <AND> TABLE_DUM = a & r <AND> TABLE_DUM =s <AND> TABLE_DUM 
-> 
a v ( r <AND> <NOT> s ) = (a v  r) <AND> <NOT> (a v s). 
```

除了`"v"`（广义投影）之外的所有操作都来自 D&D 代数 A。前两个蕴含条件要求关系`a`为空，关系`r`和`s`具有相同的标题。它输出：

```
s = [p]
     0
;
r = [p]
     1
;
a = [r]
;
*** False Assertion *** 
```

尽管这是合理的答案，但有些人可能会对将关系投影到不属于标题的属性的想法感到不舒服。需要为`a`和`r`标题重叠添加一个条件：`(a v s) <AND> TABLE_DUM != TABLE_DUM`. 然后，属性 {p,r} 应手动转换为 OP 的 {x,y}。（这是引入 Erwin 注意到的错误的地方）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:03:21.327

`r = { TUPLE {X 1 , Y 1} }
s = { TUPLE {X 1 , Y 2} }`

 `r MINUS s = r = { TUPLE {X 1 , Y 1} }

Take projections over X (A = {X} ???)

r PROJECT {X} === { TUPLE {X 1} }
s PROJECT {X} === { TUPLE {X 1} }` 

`(r PROJECT {X}) MINUS (s PROJECT {X}) === { }
(r MINUS s) PROJECT {X} === { TUPLE {X 1} }`

它是 s 中的 Y 2 部分。这就是 r 和 s 中的元组之间的区别。如果您首先“投射出这种差异”，那么之后剩下的一切都是平等的，计算平等事物之间的差异当然根本不算什么。

但是，如果您首先计算差异，那么 s 中的元组中的 Y 2 部分会导致 r 中的元组（粗略地说）不会从结果中丢弃，然后对该结果进行投影当然会产生一些非空的东西。

# android - 在 Android SDK 的 ddms（Delvik 调试监视器系统）中使用过滤器时，日志不能无缝打印/刷新问题

> ID：12115634
> 
> 赞同：1
> 
> 时间：2012-08-24T19:40:04.293
> 
> 标签：android, printing, sdk, adb, ddms

谁能帮我找到为什么在我创建过滤器时 ddms 日志不能无缝刷新的问题？

所以明确地我一直按下过滤器，然后我看到日志。

否则，当我不使用过滤器时，ddms 会在我连接 android 设备时无缝打印日志。

环境：Windows Vista 和 Ubuntu（两个操作系统都看到这个问题）

# java - 如何在同一个类的方法中使用一个类的对象？

> ID：12115641
> 
> 赞同：0
> 
> 时间：2012-08-24T19:40:20.777
> 
> 标签：java

我的问题如下：

我有 2 节课：`MainActivity`和`Compartment`.

`MainActivity`创建 一个数组`myComp[][]`。有一个名为 的静态变量和一个计算 的公共方法。`Compartment``Compartment``PpN2``PpN2`

这种方法得计算`myComp[x][y]`。`PpN2`这是 的函数`myComp[x-1][y].PpN2`。

问题：我怎样才能访问`myComp[x-1][y].PpN2`计算的方法`myComp[x][y].PpN2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:42:09.117

如果它是静态变量，您可以使用引用（或）使用类名访问。

例子：

```
Compartment.PpN2 
```

请记住，由于静态变量， myComp[x][y] (or)myComp[x-1][y] 引用更新相同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:47:52.870

听起来您需要`PpN2`成为实例变量而不是静态变量，并且必须传入`MainActivity`或调用 calc 方法。`myComp[x-1][y]``myComp[x][y].calcPpN2()`

或者，您可以`Compartment`保留对 calc 所依赖的前一个的引用`PpN2`，并在构造过程中将其传入。

`PpN2`可能应该是静态的原因是，作为静态，它的值由 type 的所有实例共享`Compartment`。作为实例变量，每个单独`Compartment`的对象都有自己的`PpN2`值。

# mysql - 将 SQL 查询转换为 Ruby on Rails

> ID：12115642
> 
> 赞同：0
> 
> 时间：2012-08-24T19:40:27.670
> 
> 标签：mysql, ruby-on-rails, ruby, haml

我需要转换一个相对简单的查询，以在 Rails/HAML 中设置的表中显示给定用户的总测验平均值。我们让用户参加测验，记录分数，并显示每个测验的平均值。我们现在想要所有测验的总平均值。简单的：

```
SELECT (ROUND(AVG(`score`*100), 1)) FROM `quiz_results` WHERE `user_id`=$user 
```

结果需要显示在已经设置好的表格单元格中，但我无法弄清楚。

也许这条线会有所帮助。它是预先存在的代码，用于计算该用户的特定测验的平均值：

```
%td.separate="#{(((lesson.quiz_results.average('score', :conditions => "user_id = #{@user.id}")) * 100).to_i)}%" 
```

我有 Rails 2.3.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:52:14.913

好吧，正如我现在所看到的 - 你需要的只是删除特定的测验限制，这是由关联使用强加的`lesson.quiz_results`- 而不是只使用模型类，这很可能是`QuizResult`.

而且，您现有的代码中还有一个小错误 -`.to_i`将四舍五入，您应该使用`.round`. 看到不同：

```
irb(main):002:0> 1.6.to_i
=> 1
irb(main):003:0> 1.6.round
=> 2 
```

所以，完整的代码应该是：

```
(QuizResult.average('score', :conditions => "user_id = #{@user.id}") * 100).round 
```

（我还删除了一些不必要的括号）

# regex - .htaccess 使用 FilesMatch 进行缓存

> ID：12115652
> 
> 赞同：4
> 
> 时间：2012-08-24T19:41:14.520
> 
> 标签：regex, .htaccess, caching, browser-cache

我需要使用 htaccess 文件进行浏览器缓存。

从[这个问题](https://stackoverflow.com/questions/6724549/caching-and-gzip-compression-by-htaccess/6724556#6724556)中，我发现了如何向 htaccess 文件添加扩展名。

```
<FilesMatch "\.(js|jpeg|jpg)$"> 
```

但我需要添加扩展。但排除一些文件。
我从[这个问题中找到了类似的东西](https://stackoverflow.com/questions/2182936/htaccess-deny-access-to-specific-files-more-than-one/2183013#2183013)

```
<FilesMatch ^((myfile|myfile2)\.js$|myphoto\.jpe?g)$> 
```

添加除“myfile.js”、“myfile2.js”、“myphoto.jpg”之外的所有 js 和 jpeg 文件 我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:41:36.577

试试这个

```
<FilesMatch "((?<!myfile|myfile2)\.js|(?<!myphoto).jpe?g)$">
    Header set Cache-Control "max-age=604800, public"
</FilesMatch> 
```

这将匹配除、`js`和之外的所有`jpeg`文件，并使用负前瞻/后视。有点难看，但我找不到这样做的好方法。`myfile.js``myfile2.js``myphoto.jpeg`

然后，您可以*只*为这些文件匹配单独的文件并设置不同的标题：

```
<FilesMatch "((myfile|myfile2)\.js|myphoto\.jpe?g)$">
    Header set Cache-Control "max-age=3600, public" 
</FilesMatch> 
```

# java - 为什么我的 OpenGL 代码失败了？

> ID：12115655
> 
> 赞同：1
> 
> 时间：2012-08-24T19:41:32.230
> 
> 标签：java, android, opengl-es

请记住，我是 android 开发新手，之前没有使用 OpenGL 的经验。我学习了这一课：http: [//developer.android.com/training/graphics/opengl/environment.html](http://developer.android.com/training/graphics/opengl/environment.html)

我当前的代码是：

OpenGLESTestActivity.java：

```
package com.KML;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.opengl.*;

import com.KML.MyGLRenderer;

public class OpenGLESTestActivity extends Activity {
    /** Called when the activity is first created. */

    private GLSurfaceView mGLView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mGLView = new MyGLSurfaceView(this);
        setContentView(mGLView);
    }
}

class MyGLSurfaceView extends GLSurfaceView {

    public MyGLSurfaceView(Context context) {
        super(context);
        setRenderer(new MyGLRenderer());
        this.setEGLContextClientVersion(2);
        this.setRenderMode(RENDERMODE_WHEN_DIRTY);
    }
} 
```

在 MyGLRenderer.java 中：

```
package com.KML;

import android.opengl.GLES20;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLSurfaceView;

public class MyGLRenderer implements GLSurfaceView.Renderer {

    public void onSurfaceCreated(GL10 unused, EGLConfig config) {
        GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    }

    public void onDrawFrame(GL10 unused) {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    }

    public void onSurfaceChanged(GL10 unused, int width, int height) {
        GLES20.glViewport(0, 0, width, height);
    }

} 
```

这让我“不幸的是，OpenGLESTest 已停止。” 在我的安卓设备上。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:48:51.473

[Android 上的 OpenGLES - IllegalStateException：已为此实例调用 setRenderer](https://stackoverflow.com/questions/13301468/opengles-on-android-illegalstateexception-setrenderer-has-already-been-called)

```
public MyGLSurfaceView(Context context) 
{
    super(context);
    setEGLContextClientVersion(2);
    setRenderer (new MyRenderer());
    setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
} 
```

这是您设置所有错误的顺序。

# ssrs-2008 - 如何在 SSRS 2008 中使用表达式设置布尔参数的默认值？

> ID：12115660
> 
> 赞同：0
> 
> 时间：2012-08-24T19:42:07.413
> 
> 标签：ssrs-2008, bids

我目前正在将库存报告从 Web 应用程序转换为 SSRS 报告。我正在尝试获得相同的功能，但我无法根据先前选择的参数的值设置布尔参数的默认值。布尔参数允许用户在库存中搜索现有产品，true 或所有产品，false，如果他们正在搜索延期交货的产品，我希望它默认，否则为 true。我正在使用表达式来确定默认值。

```
=iif(Parameters!Type.Value="Back Order",false,true) 
```

当我运行报告时，它的真假都变灰了，两者都没有被选中。我试图避免使用多选下拉菜单，但我担心我可能需要获得我想要的功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:59:40.583

您是否尝试将 false 和 true 放在“（反引号）下。
您确定 Type 参数的值是“Black Order”，也许这是显示成员（标签）并且值不同。
尝试在 IIF 中设置一些愚蠢的条件来看看做您可以根据需要得到结果 =iif(1=1,true,false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:14:14.333

试试这个作为另一种方式：

`=Switch(Parameters!Type.Value = "Back Order", True, Parameters!Type.Value <> "Back Order", False)`

* * *

*   我在您的`IIf()`声明中注意到您正在尝试将布尔值分配给`False`函数的 True 输出参数，反之亦然，因此您也可以尝试...

    *   `=IIf(Parameters!Type.Value <> "Back Order", True, False)`

    *   将 True 和 False 放在引号中会使 VB 处理认为它们是 data-type `String`，所以**不要**尝试。

# php - 更好的加载顺序？

> ID：12115662
> 
> 赞同：0
> 
> 时间：2012-08-24T19:42:11.660
> 
> 标签：php, html, parsing, load-time

我有一个侧边栏，里面有很多功能。它工作得很好，但现在我有一个模块需要一点时间来加载（它`file_get_contents()`用于 3 个请求，尽管它们被缓存了）。这需要一分钟，所以网站看起来一分钟坏了。

我想这是因为它是这样的

```
<aside class="sidebar">
    <div class="module one">Stuff</div>
    <div class="module two">Stuff</div>
    <div class="module three">Stuff</div>
    <div class="module four">Stuff</div>
    <div class="OMG I TAKE A SECOND TO LOAD">FOOBAR</div>
</aside> 
```

我认为它在解析最后一个 div 时会卡住，因此实际上还没有关闭侧边栏。

我的问题是，在长时间加载 div 加载之前，是否有一种“好的”（最好是无 javascript）方式来加载所有侧边栏并关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:48:37.660

“javascriptless”将是这里的问题。如果您希望将整页快速发送给用户，然后在该页面上异步加载一些“较重”的组件，那么最好的选择是 ajax。事实上，建议对页面的所有具有外部依赖关系且不是用户页面访问的主要主题的组件多产地执行此操作。

这可能需要一些工作，但现代 js 库可以完成所有客户端的繁重工作。您只需要为每个侧边栏 div（或至少将异步加载的那些）创建不同的 URL。

你的想法很好，这是一个很好的架构（不要让用户等待侧边栏中的东西！）。

# python - 为 Ubuntu 创建调试版本的 python 包 python-msgpack

> ID：12115663
> 
> 赞同：0
> 
> 时间：2012-08-24T19:42:12.553
> 
> 标签：python, python-2.7, msgpack, messagepack

我需要一个可以与 python2.7-dbg 一起使用的消息包版本。我将如何创建一个？

作为参考，我通过 github [https://github.com/msgpack/msgpack-python](https://github.com/msgpack/msgpack-python)上的一个问题询问了这里的一些上下文[python-dbg 在调试时找不到 Py_InitModule4](https://stackoverflow.com/questions/12098694/python-dbg-cant-find-py-initmodule4-when-debugging)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:13:11.560

[https://wiki.ubuntu.com/PackagingGuide/Complete](https://wiki.ubuntu.com/PackagingGuide/Complete)

[https://wiki.ubuntu.com/PyDbgBuilds](https://wiki.ubuntu.com/PyDbgBuilds)

[http://svn.python.org/projects/python/trunk/Misc/SpecialBuilds.txt](http://svn.python.org/projects/python/trunk/Misc/SpecialBuilds.txt)

这些参考资料真的很有帮助。此外，始终可以选择通过启动板和邮件列表在线与开发人员交谈

谢谢您的帮助

# .net - 在 Mono v2.10 上使用 RazorEngine v3

> ID：12115664
> 
> 赞同：3
> 
> 时间：2012-08-24T19:42:16.167
> 
> 标签：.net, mono, razorengine

有没有办法在 Mono v2.10 上使用 RazorEngine v3？

尝试解析模板时出现以下错误。

```
TypeLoadException: A type load exception has occurred.
  at RazorEngine.Templating.TemplateService.CreateTemplateType (System.String razorTemplate, System.Type modelType) [0x00000] in <filename unknown>:0 
  at RazorEngine.Templating.TemplateService.CreateTemplate[<>f__AnonymousType0`2] (System.String razorTemplate, .<>f__AnonymousType0`2 model) [0x00000] in <filename unknown>:0 
  at RazorEngine.Templating.TemplateService.Parse[<>f__AnonymousType0`2] (System.String razorTemplate, .<>f__AnonymousType0`2 model) [0x00000] in <filename unknown>:0 
  at RazorEngine.Razor.Parse[<>f__AnonymousType0`2] (System.String razorTemplate, .<>f__AnonymousType0`2 model) [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:52:28.830

TL/DR：更新到 Mono 3.x。

长话短说：在 Mono 2.10.x 发布时，Microsoft 尚未将 ASP.NET 堆栈作为开源完全发布（Razor 是仍然是封闭源代码的组件之一）。

最近微软终于开源了完整的堆栈，Mono 已经将它包含在他们的树中，但是这发生在 2.10 发布之后并且不会被向后移植。

更长的故事：[http ://tirania.org/blog/archive/2012/Mar-28.html](http://tirania.org/blog/archive/2012/Mar-28.html)

# jakarta-mail - Java 电子邮件：获取要在电子邮件地址旁边打印的名称

> ID：12115666
> 
> 赞同：0
> 
> 时间：2012-08-24T19:42:19.287
> 
> 标签：jakarta-mail, names

使用 Java 发送电子邮件，我将如何在电子邮件地址旁边打印名称，最好采用这种样式？：

```
Joe A. Blow <joe.a.blow@host.org> 
```

我在 *.properties 文件中有我的电子邮件列表，其中包含如下数据：

```
email_list_3 = Bob Smith<bob.smith@acme.com>,Jane Doe<jane.doe@acme.com, Betty Crocker<betty.crocker@acme.com 
```

我正在使用此函数将属性文件中的每个电子邮件列表（例如“email_list_3”）作为数组列表返回：

private static ArrayList setEmailList(String email_list_name)throw Exception { Properties props = new Properties(); ArrayList email_list = new ArrayList();

```
try {
    props.load(MailSender.class.getResourceAsStream("/email_lists.properties"));
    email_list.addAll(Arrays.asList(props.getProperty(email_list_name).split(",")));

}// end try
catch (Exception e) {
    logger.error("Failure populating email list: " + email_list_name + "\n",e);
}

return email_list; 
```

}// 结束函数 setEmailLists()

接下来，我将收集电子邮件地址（我假设名称仍然在他们身边？）到这样的 InternetAddresses 数组中

```
ArrayList<String> recipientsArray    = null;
ArrayList<InternetAddress> addressTo = new ArrayList<InternetAddress>();

recipientsArray = getAnArrayListOfEmailAddresses();

for (String tempAddress: recipientsArray) {
    if (tempAddress != null) {
        addressTo.add(new InternetAddress(tempAddress));
    }
} 
```

这就是我将我的地址插入电子邮件的方式：

```
 InternetAddress[] to = new InternetAddress[addressTo.size()];
 to                    = addressTo.toArray(to);

 // processed in a for loop
 tempAddress = (to[i]).getAddress();

 MimeMessage msg  =  null;
 msg     = new MimeMessage(session);
 msg.setSubject(subject);
 msg.setFrom(new InternetAddress(fromAddressStringl));
 msg.setRecipients(Message.RecipientType.TO, tempAddress); 
```

对我来说，现在，它看起来像是在电子邮件地址旁边显示的名称，我使用 InternetAddress 的另一个构造函数，它接受两个参数，地址和名称。

这是正确的还是有一个设置我可以更改，这样当Java从我的文件中解析名称+地址组合项时，它会自动执行它？

非常感谢提前

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:18:29.317

你把这弄得太复杂了。

您有一堆 InternetAddress 对象，只需直接使用它们来设置收件人：

```
 InternetAddress[] to = new InternetAddress[addressTo.size()];
 to                    = addressTo.toArray(to);

 MimeMessage msg  = new MimeMessage(session);
 msg.setSubject(subject);
 msg.setFrom(new InternetAddress(fromAddressStringl));
 msg.setRecipients(Message.RecipientType.TO, to); 
```

您使用 getAddress() 将地址字段与个人姓名字段分开；不要那样做。

此外，您可以使用 InternetAddress.parse() 方法将您的属性解析为 InternetAddress 对象数组，而不是自己用逗号分割。

# python - 如何将 shell 脚本添加到 word 功能区栏？

> ID：12115670
> 
> 赞同：1
> 
> 时间：2012-08-24T19:42:45.120
> 
> 标签：python, ms-office, ribbon

我有一个 shell 脚本，它接受一个文本参数并从中返回一个图像。我想将此作为按钮添加到文字功能区栏，并将所选文本替换为脚本生成的图像（基本上是复制粘贴）。最好的方法是什么？

1.  创建 c# word 插件并手动将其添加到插件功能区
2.  创建 vba 插件并创建 word.ribbonui xml
3.  创建宏和...
4.  使用 windows com 作为传递消息并创建客户端-服务器系统
5.  使用activeX
6.  别的东西
7.  以上的一些不同组合

此外，如果您有一些教程或伪代码如何在实践中进行操作，那将会很有帮助。我不是在寻找一个完整的答案，只是一些我应该从哪里开始的提示。

脚本是 python，word 是 2010。额外的好处是，如果可以打包分发（一些 GPL 风格的许可证）。

**编辑：**

我学到的一些东西...

*   ActiveX 属于 COM（组件对象模型）组
*   你需要visual studio 2010 pro 才能拥有c#/vba office 开发工具
*   存在使用 win32com 的“excelAddin.py”谷歌，经过一些调整后可以工作
*   存在 win32con.WM_GETTEXT 和 WM_GETSEL 消息：请参阅[如何从活动窗口中检索选定的文本](https://stackoverflow.com/questions/1007185/how-to-retrieve-the-selected-text-from-the-active-window)

下一步：把所有东西放在一起，写下答案……

相关资料：

*   整个代码（最初在 codereview 中）：[如何使用不同的 clsid 注册代码？](https://stackoverflow.com/questions/12206780/how-can-i-register-the-code-with-different-clsid#comment24692_15212)

*   对最后一个问题的可能帮助：

    *   [CLSIDFromProgID 成功但 CreateInstace 失败！为什么？](https://stackoverflow.com/questions/259972/clsidfromprogid-is-successful-but-createinstace-fails-why?rq=1)
    *   [为什么genguid.exe 生成的clsid 不起作用？](https://stackoverflow.com/questions/12184425/why-genguid-exe-generated-clsid-wont-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:10:11.793

这是大纲：

1.  创建 com 服务
2.  注册com-service（仅限第一次）
3.  手动将 com-service 添加到功能区栏

第 1 步 - 创建 com 服务：

```
class myService:
   def mandatoryInitFunction1(self,arg1,arg2,arg3): 

   def mandatoryKillFunction1(self,arg1,arg2,arg3): 

   def mandatoryXFunction1(self,arg1,arg2,arg3): 

   def mandatoryCallbackFunction(self,arg1,arg2,arg3):     
       selection = wincom.WM_GETTEXT(argX)
       popen(selection, shell=True) 
```

第 2 步 - 注册服务：

*   见 excelAddin.py

第 3 步 - 添加到功能区栏：

*   word -> 选项/首选项 -> 功能区 -> com-objects -> myService

# php - 我的会话类应该是静态的吗？

> ID：12115671
> 
> 赞同：5
> 
> 时间：2012-08-24T19:42:46.133
> 
> 标签：php, session

我一直被告知在创建静态类时要非常小心，因为它们往往会被不太熟练的程序员过度使用。

我目前正在用 PHP 编写一个会话类来跟踪网站上的用户。

一个会话似乎在一个静态类中是有意义的，因为只有它们中的一个，对吗？

我曾经在一个 CMS 中工作，该工厂有一个创建会话对象但随后存储实例的工厂，当请求一个新会话时（ MyFactory::getSession() ）它会返回先前初始化的会话。这有什么好处吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:54:05.610

不，如果你在做面向对象的编程，类**永远不应该是静态的。**这也适用于工厂。静态工厂方法模式（您在示例中显示）被认为是一种不好的做法，因为它违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

静态变量只是名称不同的全局变量，静态方法是命名空间函数，其中命名空间恰好看起来像类。

如果您需要多个对象来使用同一个会话实例，那么您应该将它们全部提供给它们。直接或通过使用工厂。

```
class ObjectFactory
{

    protected $session;

    public function __construct( $session )
    {
        $this->session = $session;
    }

    public function create( $name ) 
    {
        return new $name( $this->session );
    }

} 
```

您将此工厂的实例传递给任何需要创建使用会话的结构的对象。您只需使用此工厂创建对象，它们都将使用相同的会话实例进行初始化。

在更简化的示例中，您可以手动将会话传递给每个对象：

```
$session = new Session;

$user = new User( $session );
$article = new Document( $session ); 
```

`$user`和实例`$article`现在将共享同一个会话实例。

有关更多信息，请观看以下演示：

*   [全局状态和单例](http://www.youtube.com/watch?v=-FRm3VPhseI)
*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)

# javascript - 如何检查异步加载的脚本是否已在 javascript 中完成加载

> ID：12115676
> 
> 赞同：6
> 
> 时间：2012-08-24T19:43:25.953
> 
> 标签：javascript, yepnope, dynamic-script-loading

使用 javascript 异步下载另一个 javascript 文件。

我知道这可以通过在页面上插入一个新的脚本标签来完成，并将`src`属性设置为文件 url。

脚本下载完成后，我还需要运行一些代码。我一直在为此使用[yepnope](http://yepnopejs.com/)，它们提供了在脚本完成下载和执行时执行的“回调”。

这是如何实现的？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:02:14.240

大多数 JS 加载器通过将`<script>`标签注入 DOM 并将其`onload`事件绑定到您提供的函数来执行此操作。

`yepnope`使用相同的方法，您可以简单地从其[源代码](https://github.com/SlexAxton/yepnope.js/blob/master/yepnope.js)中观察到。该函数使用, 设置和其他需要的属性`injectJs`创建一个 DOM 元素，将&事件绑定到提供的回调，最后将元素插入到文档中。`doc.createElement``src``setAttribute``onreadystatechange``onload`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:46:43.077

`yepnope.injectJs( scriptSource [, callback ] [, elemAttributes ] [, timeout ]);` 直接离开[他们的网站](http://yepnopejs.com/)：您只需像这样在成功的回调中运行您需要的代码。

```
// Example
yepnope.injectJs("jquery.js", function () {
  console.log("It is finished loading and I can do whatever I need to here");
}, { charset: "utf-8" }, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:23:29.693

这可以使用 jquery 来完成，如果你想使用它，[Jquery.getScript()](http://api.jquery.com/jQuery.getScript/)

结帐它提供有关它的详细信息的链接。

# c# - 部署的代码找不到库引用

> ID：12115679
> 
> 赞同：0
> 
> 时间：2012-08-24T19:43:48.723
> 
> 标签：c#, visual-studio-2010, dll

我在 Visual Studio Express 2010 中编写了一个应用程序，其中引用了我编写的类库。对于此参考，我已将“复制本地”属性设置为 true，但是当我将此代码部署到开发目录之外时，它会引发错误，因为它找不到库。我认为 Copy Local = True 解决了这个问题。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:48:38.223

`Copy Local = true`确保在构建时将引用的程序集复制到输出目录。无论采用何种部署方法，您仍然需要确保已部署引用的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:50:25.750

正如其他人所说，本地复制仅适用于在 Visual Studio 中编译时。如果您使用的是 Visual Studio 部署，则可能需要右键单击部署项目并点击“刷新依赖项”。

# css - 链接颜色不同

> ID：12115680
> 
> 赞同：0
> 
> 时间：2012-08-24T19:44:02.000
> 
> 标签：css

我有这个：

```
DIV#tt {
    background: #fff;
    color: #333;
    margin: 0 0 15px;
    position: relative;
    padding: 1px;
}
DIV#tt A,
DIV#tt SPAN.link {
    color: #990000;
} 
```

这工作正常并改变了我的链接的颜色。

```
<div class="someotherclass"><span>My Link </span></a></div> 
```

现在我的问题是，有时我需要绿色代替。如何在上面的 CSS 中创建该异常，然后在 HTML 中调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:49:52.440

选择`div#tt a`器指示id`<a>`内的所有链接 ( )应以特定方式设置样式 - 在本例中，设置颜色。所以：`<div>``tt`

```
<div id="tt">
    <a href="#">Link 1</a>
</div>
<div id="abc">
    <a href="#">Link2</a>
</div> 
```

在此示例中，链接 1 的样式将根据`div#tt a`，但链接 2 不会。

现在，如果您在 tt div 中有 Link 2，则类似这样

```
<div id="tt">
    <a href="#">Link 1</a>
    <div id="abc">
        <a href="#">Link 2</a>
    </div>
</div> 
```

然后链接 2的样式*将*与链接 1 相同，由用于 .css 的 css 指定`div#tt a`。如果您想在 Link 2 上使用不同的样式，则需要应用一个选择器，例如`div#tt div#abc a`.

有关示例，请参阅[此 JSFiddle](http://jsfiddle.net/UEqKY/)。

**编辑**

如果您希望两个链接位于同一行，但样式不同，则可以用 a`<span>`而不是 a包围第二个链接`<div>`，这不会强制换行，或者您可以为第二个链接添加一个 id。

使用 a `<span>`，这是 HTML：

```
<div id="tt">
    <a href="#">Link 1</a>
    <span id="abc"><a href="#">Link 2</a></span>
</div> 
```

然后，您将使用`div#tt span#abc a`.

或者，您可以将 id 添加到第二个链接并将其用于样式。的HTML：

```
<div id="tt">
    <a href="#">Link 1</a>
    <a href="#" id="two">Link 2</a>
</div> 
```

然后，您通常将链接设置为样式，`div#tt a`第二个链接使用`div#tt a#two`.

我已经更新[了 JSFiddle 示例](http://jsfiddle.net/UEqKY/1/)以显示上述内容。

**编辑 2**

根据 F. Müller 下面的评论，这是绝对正确的。我在上面的示例中使用了很多 id，但使用其他类型的选择器可能是更好的做法（特别是如果您想以“次要”样式设置多个链接的样式）。

例如，如果您希望 Link 1 和 Link 2 以一种方式设置样式，而 Link 3 和 Link 4 以另一种方式设置样式，那么这将是一个很好的 HTML：

```
<div id="myDiv" class="something">
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
    <a href="#" class="secondary">Link 3</a>
    <a href="#" class="secondary">Link 4</a>
</div> 
```

样式将是：

```
div.something a {
    /* styling for primary links */
}
div.something a.secondary {
   /* styling for secondary links */
} 
```

在这里，如果您想为更多链接添加辅助样式，您只需将类名添加到链接中。（也就是说，如果你想添加一个新的 Link 5，你只需要添加`class="secondary"`到`<a>`，它就会被适当地设置样式。）

JSFiddle[再次更新](http://jsfiddle.net/UEqKY/2/)以显示这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:47:52.560

使用你的班级：

```
#tt.someotherclass a, #tt.someotherclass span.link {
    color: green;
} 
```

# c++ - 在 c++ 中出现这种异常输出的原因

> ID：12115683
> 
> 赞同：1
> 
> 时间：2012-08-24T19:44:08.710
> 
> 标签：c++, printf

我无法理解此代码输出的异常行为。它打印：

```
 hellooo
monusonuka 
```

代码在这里：

```
#include <iostream>
#include <cstdio>
using namespace std;

int main()
{
printf(" hellooo \n");
char name[7]="sonuka";
char name1[4]={'m','o','n','u'};
printf("%s",name1);
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T19:46:03.980

您的`name1`数组未以零字符 ( `'\0'`) 终止。该`printf`函数打印字符，直到找到零为止。在您的情况下，它超出了数组的末尾。发生的是**未定义的行为**。一个可能的结果是其他变量或垃圾被打印到屏幕上，直到最终`\0`命中内存中的其他地方，但任何事情都可能发生，包括您的程序崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T19:46:04.637

`name1` *必须*以 NULL 结尾，否则`printf`将打印尽可能多的字节，直到找到`\0`.

肯定是

```
char name1[5]={'m','o','n','u', '\0'}; 
```

你所拥有的是*未定义的行为*：`printf`在内存之后打印内存，分配给`name1`.

在这种情况下，您的编译器似乎已经为`name`after放置了内存`name1`，这就是为什么它们都被打印（`name`正确`NULL`终止，就像所有文字一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:46:07.243

`name1`不是以空值结尾的，因此`printf`只需继续打印字符直到`\0`达到 a 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T19:46:07.490

```
 printf("%s",name1); 
```

`s`转换说明符要求参数是指向 C 字符串的指针。

```
char name1[4]={'m','o','n','u'}; 
```

不是 C 字符串，因为数组不是以空值结尾的。违反转换规范的要求会调用未定义的行为，这就是您得到此意外结果的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T19:48:16.693

您正在尝试使用 printf 将 char 数组打印为字符串。试试这个代码：

```
int pointer=0;
while(pointer < 4){
     printf("%c",name1[pointer]);
     pointer++;
} 
```

# php - 我有这个对象的实例吗？

> ID：12115689
> 
> 赞同：1
> 
> 时间：2012-08-24T19:44:28.217
> 
> 标签：php, sql, variables, undefined

当我调用我“认为”我已经实例化但显然没有实例化的对象时，我不断收到“未定义变量”通知。我无法指出我的错误。该对象是 $fgmembersite，根据我的错误消息它不存在，我对为什么感到困惑。这可能是我在脚本的 include/require 部分中弄乱了我的目录的一个简单案例，但我一直在查看它们并且看不到任何错误。告诉我你们是否想看看我的文件层次结构。

再次感谢您的帮助！

我有三个正在运行的 PHP 文件。

## 第一个是 login-home.php

```
<?PHP
require_once("./profile_settings/view.php");

if(!$fgmembersite->CheckLogin())
{
    $fgmembersite->RedirectToURL("login.php");
    exit;
}
?>

/*a bunch of stuff*/
<img id="profile_avatar" src="profile_settings/<?php echo fetchAvatarLocation(); ?>"></img>
/*a bunch of stuff*/ 
```

## 接下来我有 view.php，它包含一个函数，用于生成存储图片的路径名。

```
<?php 
include("./include/membersite_config.php");

    function fetchAvatarLocation()
    {
        $user_id = $fgmembersite->UserId();
        $query = mysql_query("SELECT * FROM ddmembers WHERE id_user = '$user_id'");
        if(mysql_num_rows($query)==0) 
            die("User not found!");
        else
        {
            $row = mysql_fetch_assoc($query);
            $location = $row['imagelocation'];
            return $location;
        }
    }
    ?> 
```

## 最后我有 membersite_config.php

```
<?PHP
include("fg_membersite.php");

$fgmembersite = new FGMembersite();

//Provide your site name here
$fgmembersite->SetWebsiteName('Mysitename.com');

//Provide the email address where you want to get notifications
$fgmembersite->SetAdminEmail('My.Email@Provider.net');

//Provide your database login details here:
//hostname, user name, password, database name and table name
//note that the script will create the table (for example, fgusers in this case)
//by itself on submitting register.php for the first time
$fgmembersite->InitDB(/*hostname*/'localhost',
                      /*username*/'user',
                      /*password*/'password',
                      /*database name*/'database',
                      /*table name*/'table');

//For better security. Get a random string from this link: http://tinyurl.com/randstr
// and put it here
$fgmembersite->SetRandomKey('**************');

?> 
```

## fg_membersite 是一个包含 fgmembersite 类的文件，其中存储了一堆函数，我需要它的那些是......

```
function UserId()
    {
        return isset($_SESSION['userid_of_user'])?$_SESSION['userid_of_user']:'';
    }

    function UserName()
    {
        return isset($_SESSION['username_of_user'])?$_SESSION['username_of_user']:'';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:46:07.133

该对象不在函数的范围内，因此它是未定义的。您需要将其作为参数传递：

```
function fetchAvatarLocation( $fgmembersite) 
```

然后以对象作为参数调用它：

```
<img id="profile_avatar" src="profile_settings/<?php echo fetchAvatarLocation( $fgmembersite); ?>"></img> 
```

另一种方法是使用全局变量，但我不推荐它。

# javascript - svg / d3.js 矩形一个角上的圆角

> ID：12115691
> 
> 赞同：45
> 
> 时间：2012-08-24T19:44:32.310
> 
> 标签：javascript, svg, d3.js, rounding

我知道 svg 有一个内置函数来做圆角，但我只需要在四个角中的 2 个上做圆角。

我知道我可以在彼此之上绘制多个矩形来模仿它，但这似乎有点俗气。有什么方法可以使用剪辑或任何 d3.js 方法来做到这一点？

现在我有一个水平条形图，其矩形如下：

```
 rects.enter().append("rect")
        .attr("x",function(d,i) { return x(0); })
        .attr("width",function(d) { return x(d.value) - x(0); })
        .attr("height",y.rangeBand())
        .attr("y",function(d) { return y(d.name); }) 
```

我正在尝试在矩形的右侧制作圆角，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-25T17:32:02.723

扩展@robert-longson 的答案，您可以使用 SVG 的[椭圆弧命令](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)来制作拐角，并结合[lineto 命令](http://www.w3.org/TR/SVG/paths.html#PathDataLinetoCommands)来制作直边。这些与[路径元素](http://www.w3.org/TR/SVG/paths.html)一起使用。这是一种可能的实现：

```
// Returns path data for a rectangle with rounded right corners.
// The top-left corner is ⟨x,y⟩.
function rightRoundedRect(x, y, width, height, radius) {
  return "M" + x + "," + y
       + "h" + (width - radius)
       + "a" + radius + "," + radius + " 0 0 1 " + radius + "," + radius
       + "v" + (height - 2 * radius)
       + "a" + radius + "," + radius + " 0 0 1 " + -radius + "," + radius
       + "h" + (radius - width)
       + "z";
} 
```

然后，您可以调用此函数来计算“d”属性。例如：

```
rects.enter().append("path")
    .attr("d", function(d) {
      return rightRoundedRect(x(0), y(d.name), x(d.value) - x(0), y.rangeBand(), 10);
    }); 
```

现场示例：

*   [http://bl.ocks.org/3468167](http://bl.ocks.org/3468167)

**可选：**如果您愿意，可以重构 rightRoundedRect 函数以使其可*配置*，而不是采用大量参数。这种方法类似于 D3 的内置[形状生成器](https://github.com/mbostock/d3/wiki/SVG-Shapes)。例如，您可以像这样使用 rect 生成器：

```
rects.enter().append("path")
    .attr("d", rightRoundedRect()
      .x(x(0))
      .y(function(d) { return y(d.name); })
      .width(function(d) { return x(d.value) - x(0); })
      .height(y.rangeBand())
      .radius(10)); 
```

有关该方法的更多详细信息，请参阅可[配置函数教程](http://bost.ocks.org/mike/chart/)。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-22T03:50:44.207

只是为了扩展给出的答案，这里有一个更全面的函数来返回你的矩形的路径。

```
x: x-coordinate
y: y-coordinate
w: width
h: height
r: corner radius
tl: top_left rounded?
tr: top_right rounded?
bl: bottom_left rounded?
br: bottom_right rounded?

function rounded_rect(x, y, w, h, r, tl, tr, bl, br) {
    var retval;
    retval  = "M" + (x + r) + "," + y;
    retval += "h" + (w - 2*r);
    if (tr) { retval += "a" + r + "," + r + " 0 0 1 " + r + "," + r; }
    else { retval += "h" + r; retval += "v" + r; }
    retval += "v" + (h - 2*r);
    if (br) { retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + r; }
    else { retval += "v" + r; retval += "h" + -r; }
    retval += "h" + (2*r - w);
    if (bl) { retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + -r; }
    else { retval += "h" + -r; retval += "v" + -r; }
    retval += "v" + (2*r - h);
    if (tl) { retval += "a" + r + "," + r + " 0 0 1 " + r + "," + -r; }
    else { retval += "v" + -r; retval += "h" + r; }
    retval += "z";
    return retval;
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-01-23T12:53:22.633

如果其他人最终想要绕过元素的*所有*角落`rect`，您可以向元素添加一个`rx`属性`rect`（正如@mbostock 在上面的小提琴中提到的那样）：

```
var rectangle = group.append("rect")
    .attr("width", 60)
    .attr("height", 75)
    .attr("rx", 4)
    .style("fill", function(d) { return "#e6653e"; })
    .style("stroke", function(d) { return d3.rgb("#e6653e").darker(); }) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-24T14:38:50.260

任何寻找 stackmate -s 的 Eslinted 版本的人都可以回答：

```
function roundedRect(x, y, w, h, r, tl, tr, bl, br) {
  let retval;
  retval = `M${x + r},${y}`;
  retval += `h${w - (2 * r)}`;
  if (tr) {
    retval += `a${r},${r} 0 0 1 ${r},${r}`;
  } else {
    retval += `h${r}`; retval += `v${r}`;
  }
  retval += `v${h - (2 * r)}`;
  if (br) {
    retval += `a${r},${r} 0 0 1 ${-r},${r}`;
  } else {
    retval += `v${r}`; retval += `h${-r}`;
  }
  retval += `h${(2 * r) - w}`;
  if (bl) {
    retval += `a${r},${r} 0 0 1 ${-r},${-r}`;
  } else {
    retval += `h${-r}`; retval += `v${-r}`;
  }
  retval += `v${((2 * r) - h)}`;
  if (tl) {
    retval += `a${r},${r} 0 0 1 ${r},${-r}`;
  } else {
    retval += `v${-r}`; retval += `h${r}`;
  }
  retval += 'z';
  return retval;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-13T10:29:42.537

我最近发现自己遇到了这个问题，以便**在 d3 中制作带有顶部圆角的条形图**。我对我找到的解决方案做了一个[代码框演示](https://codesandbox.io/s/rounded-corners-column-zhrku?fontsize=14&hidenavigation=1&theme=dark)。

# python - 芹菜错误“没有这样的运输：amqp”

> ID：12115692
> 
> 赞同：3
> 
> 时间：2012-08-24T19:44:46.167
> 
> 标签：python, virtualenv, celery, pip, kombu

芹菜工作正常，有一天命令行工作人员无法启动以下跟踪：

```
Traceback (most recent call last):
  File "/home/buildslave/venv/bin/celery", line 9, in <module>
    load_entry_point('celery==3.0.7', 'console_scripts', 'celery')()
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/__main__.py", line 14, in main
    main()
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 942, in main
    cmd.execute_from_commandline(argv)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 886, in execute_from_commandline
    super(CeleryCommand, self).execute_from_commandline(argv)))
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/base.py", line 175, in execute_from_commandline
    return self.handle_argv(prog_name, argv[1:])
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 881, in handle_argv
    return self.execute(command, argv)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 856, in execute
    return cls(app=self.app).run_from_argv(self.prog_name, argv)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 142, in run_from_argv
    return self(*args, **options)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 112, in __call__
    ret = self.run(*args, **kwargs)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celery.py", line 214, in run
    return self.target.run(*args, **kwargs)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/bin/celeryd.py", line 153, in run
    return self.app.Worker(**kwargs).run()
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/apps/worker.py", line 167, in run
    print(str(self.colored.cyan(' \n', self.startup_info())) +
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/celery/apps/worker.py", line 234, in startup_info
    'conninfo': self.app.connection().as_uri(),
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 445, in as_uri
    fields = self.info()
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 434, in info
    return OrderedDict(self._info())
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 413, in _info
    D = self.transport.default_connection_params
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 636, in transport
    self._transport = self.create_transport()
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 395, in create_transport
    return self.get_transport_cls()(client=self)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/connection.py", line 402, in get_transport_cls
    transport_cls = get_transport_cls(transport_cls)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/transport/__init__.py", line 110, in get_transport_cls
    _transport_cache[transport] = _get_transport_cls(transport)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/transport/__init__.py", line 92, in _get_transport_cls
    transport_module_name, transport_cls_name = resolve_transport(transport)
  File "/home/buildslave/venv/local/lib/python2.7/site-packages/kombu/transport/__init__.py", line 87, in resolve_transport
    raise KeyError('No such transport: %s' % (transport, ))
KeyError: 'No such transport: amqp' 
```

跟踪代码显示“amqp”神秘地失踪了`kombu.transport.TRANSPORT_ALIASES`——但这就是我失去踪迹的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T19:45:13.250

该问题似乎是由于升级到 celery 3.0.7 造成的。以下为我解决了这个问题：

```
pip install kombu==2.4.0 
```

*注意：这似乎已由 kombu==2.4.3 per [https://github.com/celery/kombu/commit/c3b7a0d885fef3a43b76af0881fee6b5d012923f解决](https://github.com/celery/kombu/commit/c3b7a0d885fef3a43b76af0881fee6b5d012923f)*

# c++ - 有没有办法在linux中编辑windows C++ exe文件

> ID：12115696
> 
> 赞同：0
> 
> 时间：2012-08-24T19:45:11.000
> 
> 标签：c++, c, linux, windows, unix

我一直在网上搜索，但还没有真正找到任何确定的东西。

假设我有一个 Windows .exe 文件，其中包含在（C++ 编译）中编译的资源（rc 文件）。

在Linux中是否可以破解打开exe，修改rc文件，然后再次保存？

我正在编写一个程序，每个下载它的用户都需要使用不同的参数运行它（类似于 UltraVNC SC）。现在我正在分发一个 exe 文件，并且每次都让用户下载一个配置文件。我想简化这个过程，所以如果你有任何想法，请分享。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:56:13.590

你可以做到这一点，但如果你有资源，它的工作量将超过它的价值。

您可以使用反汇编程序来查找资源（它是文件中的二进制偏移量），然后使用二进制编辑器修改该资源。如果你是铁杆，你可以使用[bvi](http://bvi.sourceforge.net/)来做到这一点。需要注意的一件事是，如果您确实编辑了资源注释，则不能使资源比它更大或更小，否则您将破坏对其他资源的引用。

也就是说，如果您有资源，只需更改资源并重建，您就不必担心任何这些。

如果它是一个配置的东西并且您不想分发配置文件，标准做法似乎是将您的配置存储在注册表中，并在选项或首选项下提供一个漂亮的 UI 来修改这些配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:25:23.180

这是可能的（只要付出足够的努力，一切皆有可能），但这是实现您想要实现的目标的*可怕方式。*

您真正想要的是一个安装程序，它会在用户安装程序时设置程序的配置。

# php - 空白 $_POST 条目不替换 MySQL UPDATE 中的数据

> ID：12115699
> 
> 赞同：-1
> 
> 时间：2012-08-24T19:45:27.757
> 
> 标签：php, mysql, phpmyadmin

我在更新 MySQL 数据库时遇到问题。我希望能够在更多信息进入时更新图表（MySQL 数据库），我公司的员工不会一次填写所有信息，而是在更多信息进入时填写此图表。

这是我的代码：

```
<?php
//retrieve our data from POST
$ID = $_POST['ID'];
$Date_Received = $_POST['DateReceived'];
$Mortgagee_Vendor = $_POST['Mortgagee'];
$Mortgagor_Purchaser = $_POST['Mortgagor'];
$We_Act_For = $_POST['WeActFor'];
$Amount = $_POST['Amount'];
$Full_Address = $_POST['FullAddress'];
$Lot = $_POST['Lot'];
$Plan = $_POST['Plan'];
$Municipality = $_POST['Municipality'];
$Solicitor = $_POST['Solicitor'];
$Closing_Date = $_POST['ClosingDate'];
$Has_Union = $_POST['Union'];
$Lawyer_Clerk = $_POST['LawyerClerk'];
$Date_File_Opened = $_POST['FileOpened'];
$Search_Date = $_POST['Search'];
$Requisition_Date = $_POST['ReqDate'];
$Requisition_Sub = $_POST['ReqSubmittedReplied'];
$Mortgage_Inst = $_POST['MortgageInst'];
$Appointment_Date = $_POST['AppDate'];
$Payout_Req_Sent = $_POST['PayoutSent'];
$Payout_Req = $_POST['PayoutRequest'];
$Requisition_Recieved = $_POST['ReqReceived'];
$Draft_Deed = $_POST['DraftDeed'];
$Report_Letter = $_POST['ReportLetter'];
$Undertakings = $_POST['Undertakings'];
$File_Closed = $_POST['FileClosed'];
$Special_Notes = $_POST['SpecialNotes'];
$Deal_Active = $_POST['DealActive'];

//connect to database    
$dbhost = 'localhost';
$dbname = 'database';
$dbuser = 'user';
$dbpass = 'Password'; 
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname, $conn);

//sanitize all fields

$ID = mysql_real_escape_string($ID); 
$Date_Received = mysql_real_escape_string($Date_Received);
$Mortgagee_Vendor = mysql_real_escape_string($Mortgagee_Vendor);
$Mortgagor_Purchaser = mysql_real_escape_string($Mortgagor_Purchaser);
$We_Act_For = mysql_real_escape_string($We_Act_For);
$Amount = mysql_real_escape_string($Amount);
$Full_Address = mysql_real_escape_string($Full_Address);
$Lot = mysql_real_escape_string($Lot);
$Plan = mysql_real_escape_string($Plan);
$Municipality = mysql_real_escape_string($Municipality);
$Solicitor = mysql_real_escape_string($Solicitor);
$Closing_Date = mysql_real_escape_string($Closing_Date);
$Has_Union = mysql_real_escape_string($Has_Union);
$Lawyer_Clerk = mysql_real_escape_string($Lawyer_Clerk);
$Date_File_Opened = mysql_real_escape_string($Date_File_Opened);
$Search_Date = mysql_real_escape_string($Search_Date);
$Requisition_Date = mysql_real_escape_string($Requisition_Date);
$Requisition_Sub = mysql_real_escape_string($Requisition_Sub);
$Mortgage_Inst = mysql_real_escape_string($Mortgage_Inst);
$Appointment_Date = mysql_real_escape_string($Appointment_Date);
$Payout_Req_Sent = mysql_real_escape_string($Payout_Req_Sent);
$Payout_Req = mysql_real_escape_string($Payout_Req);
$Requisition_Recieved = mysql_real_escape_string($Requisition_Recieved);
$Draft_Deed = mysql_real_escape_string($Draft_Deed);
$Report_Letter = mysql_real_escape_string($Report_Letter);
$Undertakings = mysql_real_escape_string($Undertakings);
$File_Closed = mysql_real_escape_string($File_Closed);
$Special_Notes = mysql_real_escape_string($Special_Notes);
$Deal_Active = mysql_real_escape_string($Deal_Active);

//insert values to mysql database
mysql_query("UPDATE `all_info` SET `Date Received` = '$Date_Received', `Deal Active` = '$Deal_Active', `Mortgagee/Vendor` = '$Mortgagee_Vendor', `Mortgagor/Purchaser` = '$Mortgagor_Purchaser', `We Act For` = '$We_Act_For', `Amount` = '$Amount', `Full Address` = '$Full_Address', `Lot` =  '$Lot', `Plan` = '$Plan', `Municipality` = '$Municipality', `Solicitor` = '$Solicitor', `Closing Date` = '$Closing_Date', `Lawyer/Clerk` = '$Lawyer_Clerk', `File Opened` = '$Date_File_Opened', `Search Date` = '$Search_Date', `Requisition Date` = '$Requisition_Date', `Requisition Submitted/Replied` = '$Requisition_Sub', `Mortgage Instructions Received` = '$Mortgage_Inst', `Appointment Date for Clients` = '$Appointment_Date', `Pay Out Request Sent` = '$Payout_Req_Sent', `Payout/Funding Sent`= '$Payout_Req', `Requisition Received` = '$Requisition_Recieved', `Draft Deed/Adjustment Sent` = '$Draft_Deed', `Reporting Letter` = '$Report_Letter', `Undertaking Satisfied` = '$Undertakings', `File Closed` = '$File_Closed', `Special Notes` = '$Special_Notes' WHERE ID = '$ID'");

echo mysql_error();     

mysql_close();

?> 
```

所以基本上，当用户创建行（使用单独的脚本）时，他/她将填写“一些”帖子条目。我的主要问题是当条目存在时，它们被替换为空白帖子提交。我需要 MySQL 忽略这些“空白”帖子条目，而不是替换存在的数据。

**编辑：**在 arxanas 的帮助下，我能够想出这段代码，这是带有工作代码的最终产品。

```
<?php
$ID = $_POST['ID'] 
$Date_Received = $_POST['DateReceived'];
$Mortgagee_Vendor = $_POST['Mortgagee'];
$Mortgagor_Purchaser = $_POST['Mortgagor'];
$We_Act_For = $_POST['WeActFor'];
$Amount = $_POST['Amount'];
$Full_Address = $_POST['FullAddress'];
$Lot = $_POST['Lot'];
$Plan = $_POST['Plan'];
$Municipality = $_POST['Municipality'];
$Solicitor = $_POST['Solicitor'];
$Closing_Date = $_POST['ClosingDate'];
$Has_Union = $_POST['Union'];
$Lawyer_Clerk = $_POST['LawyerClerk'];
$Date_File_Opened = $_POST['FileOpened'];
$Search_Date = $_POST['Search'];
$Requisition_Date = $_POST['ReqDate'];
$Requisition_Sub = $_POST['ReqSubmittedReplied'];
$Mortgage_Inst = $_POST['MortgageInst'];
$Appointment_Date = $_POST['AppDate'];
$Payout_Req_Sent = $_POST['PayoutSent'];
$Payout_Req = $_POST['PayoutRequest'];
$Requisition_Recieved = $_POST['ReqReceived'];
$Draft_Deed = $_POST['DraftDeed'];
$Report_Letter = $_POST['ReportLetter'];
$Undertakings = $_POST['Undertakings'];
$File_Closed = $_POST['FileClosed'];
$Special_Notes = $_POST['SpecialNotes'];
$Deal_Active = $_POST['DealActive'];

// connect to database
$dbhost = 'localhost';
$dbname = 'dbname';
$dbuser = 'user';
$dbpass = 'pass'; 
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname, $conn);

$fields = array(
    "ID" => "ID",
    "Date Received" => "DateReceived",
    "Mortgagee/Vendor" =>"Mortgagee",
    "Mortgagor/Purchaser" => "Mortgagor",
    "We Act For" => "WeActFor",
    "Amount" => "Amount",
    "Full Address" => "FullAddress",
    "Lot" => "Lot",
    "Plan" => "Plan",
    "Municipality" => "Municipality",
    "Solicitor" => "Solicitor",
    "Closing Date" => "ClosingDate",
    "Union" => "Union",
    "Lawyer/Clerk" => "LawyerClerk",
    "File Opened" => "FileOpened",
    "Search Date" => "Search",
    "Requisition Date" => "ReqDate",
    "Requisition Submitted/Replied" => "ReqSubmittedReplied",
    "Mortgage Instructions Received" => "MortgageInst",
    "Appointment Date for Clients" => "AppDate",
    "Pay Out Request Sent" => "PayoutSent",
    "Payout/Funding Sent" => "PayoutRequest",
    "Requisition Received" => "ReqReceived",
    "Draft Deed/Adjustment Sent" => "DraftDeed",
    "Reporting Letter" => "ReportLetter",
    "Undertaking Satisfied" => "Undertakings",
    "File Closed" => "FileClosed",
    "Special Notes" => "SpecialNotes",
    "Deal Active" => "DealActive",    

);
$update = array();
foreach ($fields as $column => $field) {
    if (isset($_POST[$field]) && strlen($_POST[$field])) {
        $update[] = "`".$column."` = '".mysql_real_escape_string($_POST[$field])."'";
    }
}
$sql = "UPDATE `all_info` SET ".implode(", ", $update)."WHERE ID = '$ID'";
mysql_query($sql);

echo mysql_error();
echo "<br><br><center>Table Sucessfully Updated</center>";      

mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:52:45.727

```
$fields = array(
    "ID" => "ID",
    "Date Received" => "DateReceived",
    "Mortgagee/Vendor" =>"Mortgagee",
    ...
);
$update = array();
foreach ($fields as $column => $field) {
    if (isset($_POST[$field]) && strlen($_POST[$field])) {
        $update[] = "`".$column."` = '".mysql_real_escape_string($_POST[$field])."'";
    }
}
$sql = "UPDATE `all_info` SET ".implode(", ", $update)."WHERE ID = '$ID'";
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T19:57:12.967

相当简单，当您处理帖子时，您将拥有：

```
$values = array();
foreach($_POST as $key => $val) {
   if (empty($key)) {
       continue;
   }
   $fields[] = mysql_real_escape_string($key) . "='" . mysql_real_escape_string($val) . "'";
}

$value_list = implode(', ', $fields);
$sql = "UPDATE ... SET " . $value_list; 
```

但这引出了一个问题——如果用户想要清空一个字段怎么办？这个简单的代码将简单地忽略任何空字段，并在数据库中保持原始值不变。

# r - 将 grid.text 添加到 ggplot 时出错

> ID：12115701
> 
> 赞同：3
> 
> 时间：2012-08-24T19:45:38.673
> 
> 标签：r, ggplot2

我正在尝试使用`grid.text`在`ggplot2`我的情节中添加一个文本框。情节本身可以正常工作，但是当我添加`grid.text`命令时，我收到错误“不知道如何将 o 添加到情节中”。如果 Is use `last_plot()`，我仍然会收到错误消息，但该字母会显示在图表上 - 但不会与绘图的其余部分一起保存。数据集和命令如下：

```
foldchange  order
1.583591249 1c
1.973012368 1c
1.339505031 1c
0.776845711 2c
1.004515622 2c
1.225864907 2c
13.27371225 3c
7.599476289 3c
10.74132453 3c
3.347536996 4c
4.286202467 4c
3.612756449 4c
17.40825874 5c
20.61039144 5c

ggplot(test, aes(order, foldchange))  + geom_point()  #this part works fine
+ grid.text(label="a", x=.18, y=.9) +  #this part gives me the error 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T19:57:35.677

那是因为 grid.text 是网格的一部分，而不是 ggplot。此外， grid.text 只绘制一些它不会将其添加到 ggplot 对象的底层结构的东西。您正在寻找注释。

```
ggplot(test, aes(order, foldchange))  + geom_point() +
annotate(geom = "text", label="a", x=.18, y=.9) 
```

![在此处输入图像描述](../Images/bfd53f3122fad542fc9e4830f1351008.png)

这个情节是用：

```
ggplot(test, aes(order, foldchange))  + geom_point() +
annotate(geom = "text", label="a", x=5, y=.9) 
```

因为`x = 0.18`不会显示。

# ios - IOS setTransform 和实际 Bounds/Frame

> ID：12115703
> 
> 赞同：0
> 
> 时间：2012-08-24T19:45:42.160
> 
> 标签：ios, resize, setbounds, cgaffinetransformscale

我正在使用 setTransform 方法调整视图的大小。因为我不希望视图变得太小，所以我得到了这样的支票：

```
if(view.bounds.size.width > 100 && view.bounds.size.height > 100 && view.bounds.size.width < 300 && view.bounds.size.height < 300){
    //..resizing part
} 
```

现在我很困惑。通常我会改变我的观点：

```
[view setTransform:scaleTransform]; 
```

但是因为我正在检查视图的大小，所以我怀疑会做这样的事情：

```
CGAffineTransform scaleTransform = CGAffineTransformScale(view.transform, xScale, yScale);
CGRect newRect = CGRectApplyAffineTransform(view.frame, scaleTransform);
[view setBounds:newRect]; 
```

这是正确的还是我错过了链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:05:38.550

我做了什么来解决这个问题：

如果新框架大于我提供的范围，请不要翻译。如果它在提供的范围内，设置新框架并翻译。

# filter - SlickGrid 将 Andrew Childs 过滤器应用于最新版本的主分支

> ID：12115704
> 
> 赞同：0
> 
> 时间：2012-08-24T19:45:46.697
> 
> 标签：filter, slickgrid

首先让我说我对 jQuery 或任何 JavaScript 编程都很陌生，所以请原谅任何与 noob 相关的错误。

我正在使用 SlickGrid 为我的公司创建一个 Web 应用程序，它将根据用户的角色加载不同的数据集，因此我的字段将由动态 sql 查询定义，而不是硬编码。

我想将 SlickGrid 分支上的 Andrew Child 过滤器应用于 master 分支的最新版本。过滤器显示在此示例中：[https ://github.com/andrewchilds/SlickGrid/blob/master/examples/example15-fork-feature-demo.html](https://github.com/andrewchilds/SlickGrid/blob/master/examples/example15-fork-feature-demo.html)

我创建了一个控件（使用 pager 控件作为模板）来添加过滤标题元素。看起来不错！现在我只需要让它发挥作用。在下面[https://github.com/mleibman/SlickGrid/blob/master/examples/example4-model.html](https://github.com/mleibman/SlickGrid/blob/master/examples/example4-model.html)看起来我需要修改这个函数来遍历列，返回过滤器类型和列名，而不是硬编码过滤器类型和列名。

```
function myFilter(item, args) {
  if (item["percentComplete"] < args.percentCompleteThreshold) {
    return false;
  }

  if (args.searchString != "" && item["title"].indexOf(args.searchString) == -1) {
    return false;
  }

  return true;
} 
```

我的问题是：

1.  我什至接近正确的轨道吗？
2.  如果是 1，如何修改 myFilter() 和 dataView.compileFilter()？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:57:47.983

欢迎来到 SO！

过滤器功能（`myFilter`在您的情况下）被应用于 DataView 中的每个项目（行）。如果您的列没有硬编码，您可以使用`grid.getColumns()`. 例如，看看我的过滤器功能：

```
function filter(item) {
  for (var columnId in columnFilters) {
    if (columnId !== undefined && columnFilters[columnId] !== "") {
        var c = grid.getColumns()[grid.getColumnIndex(columnId)];
        if(c.field == "...") {
            // return filtered items
        }
        else {
            // return false
        }
    }
  }
return true;
} 
```

这`columnFilters`是一个包含我要过滤的值的数组。

如果您有任何问题，请告诉我。

# database - Ms Access 中的公式

> ID：12115710
> 
> 赞同：-1
> 
> 时间：2012-08-24T19:46:05.563
> 
> 标签：database, excel, ms-access

我需要编写一些公式来根据其他字段值计算字段值（就像我们在 excel 中所做的那样），最好的方法是什么？你能推荐参考吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:48:55.557

这有帮助吗？

[http://www.techonthenet.com/access/functions/](http://www.techonthenet.com/access/functions/)

如果您在设计模式下使用 MS Access，在线帮助和代码完成非常好，它们将指导您轻松完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:03:00.327

您应该提供有关您希望公式执行的操作的更多详细信息。

简而言之，尽管您可以像这样在查询设计中输入公式

```
NewColumnName: (value / formula) 
```

引用其他字段时，您希望将它们包含在 [] 中

所以你可以说：

```
NewColumnName: [Column1] + 5 
```

最后，如果您打算使用 sart excel If 语句，请注意语法是相似的，但它被称为 IIF，所以它会像：

```
NewColumnName: IIF( [Column1] > 0 , "Positive","Negitive") 
```

# r - 在 R 中将制表符分隔为 XTS？

> ID：12115716
> 
> 赞同：1
> 
> 时间：2012-08-24T19:46:16.350
> 
> 标签：r, tabs, xts, delimited

我有以下格式的制表符分隔文件：

```
Date    Time    Last    LastSize    TotVol  Bid Ask TickID  BidSize AskSize
8/23/2012   0:00:00 0.95711 1   20670   0.95711 0.95742 0   0   0
8/23/2012   0:00:04 0.9571  1   20671   0.9571  0.9574  0   0   0 
```

我正在使用该函数在 R 中创建 XTS。

```
> EURUSD <- as.xts(read.zoo("C:\\Users\\caustic\\Documents\\DTN\\IQFeed\\EURUSD.FXCM_1.txt",
+                           sep='\t', 
+                           tz='',   
+                           header=T,
+                           format='%d/%m/%Y %H:%M:%S')) 
```

我收到以下错误： as.POSIXlt.character(x, tz, ...) 中的错误：字符串不是标准的明确格式

问题是：如何将数据和时间组合成所需的 POSIX 格式？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:21:39.070

由于 OP 并没有真正更新他的答案，我将添加一种方法。要将制表符分隔的（或 CSV ）内容转换为`xts`，我更喜欢先将数据作为普通数据框读取，然后使用`.xts`函数将其转换`data.frame`为`xts`

`.xts`虽然目前是未记录的功能。

```
require(xts)
filecontent <- 'Date    Time    Last    LastSize    TotVol  Bid Ask TickID  BidSize AskSize
8/23/2012   0:00:00 0.95711 1   20670   0.95711 0.95742 0   0   0
8/23/2012   0:00:04 0.9571  1   20671   0.9571  0.9574  0   0   0'

DF <- read.table(text = filecontent, header = TRUE, stringsAsFactors = FALSE)

DFINDEX <- paste(DF$Date, DF$Time, sep = " ")

DF.XTS <- .xts(x = DF[, 3:10], index = as.POSIXct(DFINDEX, format = "%m/%d/%Y %H:%M:%S", tzone = "GMT"))

DF.XTS
##                        Last LastSize TotVol     Bid     Ask TickID BidSize AskSize
## 2012-08-23 08:00:00 0.95711        1  20670 0.95711 0.95742      0       0       0
## 2012-08-23 08:00:04 0.95710        1  20671 0.95710 0.95740      0       0       0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T21:43:36.133

在 cran.r-project.org/web/packages/zoo/vignettes/zoo-read.pdf 中工作的示例 4 感谢 Joshua Ulrich 的帮助

# compilation - 内核编译中缺少标头...但已安装标头

> ID：12115720
> 
> 赞同：0
> 
> 时间：2012-08-24T19:46:42.717
> 
> 标签：compilation, header, linux-kernel

我在为我正在使用的主板编译新内核时遇到了一个奇怪的问题......

我只需要调用 ./makeall.sh 脚本来编译所有内容，因此我无法控制标志。一位同事已经成功构建了它。

我正在使用 Ubuntu 10.04 32 位。

问题是：

```
In file included from base.h:26,
             from mod_flv_streaming.c:1:
keyvalue.h:56: error: expected specifier-qualifier-list before 'pcre'
keyvalue.h:61: warning: struct has no members 
```

我经常看到这种情况，另一行抱怨找不到 /usr/include/pcre.h

* * *

我安装了以下 lilbraries，并且 pcre.h 确实存在于 /usr/include 中：

*   libpcre3-dev
*   libpcre++-dev
*   libpcrecpp0

当然还安装了运行时（删除-dev）

有什么建议吗？我没主意了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:36:52.743

这与 Ubuntu 10.04 的一个奇怪情况有关：

```
/bin/sh -> /bin/dash 
```

链接

```
/bin/sh -> /bin/bash 
```

导致编译成功。

# selenium - 如何在 Selenium IDE 中的所有当前文本字段中输入数据

> ID：12115723
> 
> 赞同：1
> 
> 时间：2012-08-24T19:46:52.140
> 
> 标签：selenium, selenium-ide

我正在尝试在所有当前文本字段中输入相同的句子。

例如，我正在尝试输入“dsafafsa”。标识符总是变化的。

这是代码：

textarea id="3765_id_50" name="entry_field[2679]" style="width:350px;" 行="3" 换行="物理">

textarea id="3772_id_100" name="entry_field[2686]" style="width:350px;" 行="3" 换行="物理">

我删除了文本区域前面的 < 因为它没有显示代码。

到目前为止，我只有，

```
type  xpath=(//textarea[contains(@name, 'entry')])   sdafdsfsdafsda 
```

但它只在它看到的第一个文本框中输入它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:33:44.550

因此，鉴于今天和昨天的问题，它表明您现在确实达到了 IDE 的极限。特别是考虑到您似乎对定位器有深入的了解，我真的建议您迁移到 WebDriver

答案是：假设您有两个像您提到的元素；那么你的代码是

```
type xpath=(//textarea[contains(@name, 'entry')])[1]  sdafdsfsdafsda
type xpath=(//textarea[contains(@name, 'entry')])[2]  sdafdsfsdafsda 
```

[1] 对应于 selenium 找到的第一个元素，而 [2] 对应于第二个元素。

这在 IDE 中当然存在问题，因为您必须为您拥有的每个盒子手动输入此命令，所以如果您有 10 个盒子，那就是 10 次手动插入，然后在出现故障时进行维护以修复某些问题。WebDriver 有更好的 api 来处理这些您无法使用 IDE 访问的情况。我建议，如果您对硒很认真，请仔细研究一下。

*编辑*

顺便说一句，从 IDE 中迁移出来并没有那么糟糕。因此，IDE 有一些有趣的功能，您实际上可以在其中以某种编程语言保存测试。所以你可以做到这一点，并且通过一些额外的工作，你可以开始运行所有那些你在没有 IDE 的情况下辛勤工作的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T11:54:28.080

在这种情况下，您应该在浏览器中添加“Selenium IDE: Flow Control”，然后输入以下行：

```
store 1 FIELD_NUMBER

storeElementPresent xpath=(//textarea[contains(@name, 'entry')])[${FIELD_NUMBER}] FIELD_EXISTS

while ${FIELD_EXISTS}==true

type xpath=(//textarea[contains(@name, 'entry')])[${FIELD_NUMBER}] sdafdsfsdafsda

storeEval storedVars['FIELD_NUMBER']=${FIELD_NUMBER}+1

storeElementPresent xpath=(//textarea[contains(@name, 'entry')])[${FIELD_NUMBER}] 
FIELD_EXISTS

endWhile 
```

# git - 合并当前分支到 HEAD

> ID：12115724
> 
> 赞同：2
> 
> 时间：2012-08-24T19:46:53.533
> 
> 标签：git, merge, git-merge, pull

Master HEAD 有一些更改，我正在尝试将我当前的本地更改与 Head 合并。
假设我有冲突的更改。`git`只是拒绝`pull`。

它说我有冲突的更改，所以在这种情况下，我希望它告诉我有冲突的文件，但它希望我恢复我的本地更改然后拉

```
 Master 
     /    \
  branch1  branch2 (local)
      \
   Master 
```

当 branch2 尝试向 master 提交更改时失败。在这种情况下我该怎么办？手动将文件复制到某个位置，拉然后使用 winmerge 合并文件？还是有更好的合并方式？

当我执行 a`git pull`时，它声明 - 本地更改将被覆盖，因此在拉取之前存储或提交更改。

当我`stash`或`commit`更改，然后`pull` `stash pop`失败说明工作副本中的更改将被覆盖。

顺便说一句，在任何一种情况下，我都没有看到有冲突的文件，即使我尝试了变基。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:50:43.083

这个问题的答案隐藏在文档中的普通视图中。来自`git help merge`：

* * *

# 如何解决冲突

看到冲突后，您可以做两件事：

*   决定不合并。您需要的唯一清理是将索引文件重置为 HEAD 提交以反转 2\. 并清理 2\. 和 3\. 所做的工作树更改；`git merge --abort`可用于此。

*   解决冲突。Git 将标记工作树中的冲突。将文件编辑成形状并将`git add`它们编辑到索引中。用来敲定`git commit`交易。

您可以使用多种工具解决冲突：

*   使用合并工具。 `git mergetool`启动图形合并工具，它将帮助您完成合并。

*   看看差异。 `git diff`将显示三向差异，突出显示 HEAD 和 MERGE_HEAD 版本的更改。

*   查看每个分支的差异。 `git log --merge -p <path>`将首先显示 HEAD 版本的差异，然后是 MERGE_HEAD 版本。

*   看看原件。 `git show :1:filename`显示共同祖先，`git show :2:filename`显示 HEAD 版本，并`git show :3:filename`显示 MERGE_HEAD 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:33:04.200

看起来使用 GIT 的最佳方式是拥有分支。

**分支 1**
GIT Commit
GIT PUSH
GIT MERGE master（获取更新的更改）

**分支 2**
GIT 提交
GIT PUSH

**主**
GIT 合并分支 1
GIT 合并分支 2

我不认为有任何其他方式。如果我错了，请纠正我？

这是正确的吗？如果是的话，在这种情况下使用分支很顺利！

# java - ConcurrentHashMap 的线程安全

> ID：12115727
> 
> 赞同：7
> 
> 时间：2012-08-24T19:46:56.180
> 
> 标签：java, multithreading, concurrency, thread-safety

我有以下课程。我使用 ConcurrentHashMap。我有许多线程写入地图和一个计时器，每 5 分钟将数据保存在地图中。当我在映射中写入条目时，我设法通过使用 putIfAbsent() 来实现线程安全。但是，当我从中读取然后通过 clear() 方法删除所有条目时，我希望在读取映射内容然后删除它们的过程中没有其他线程写入映射。显然，即使使用了同步（锁定）{}，我的代码也不是线程安全的，b/c 在 saveEntries() 中拥有锁的线程不一定是在 log() 方法中写入我的地图的同一线程！除非我用同一个锁对象锁定 log() 中的整个代码！

我想知道是否有任何其他方法可以实现线程安全而无需通过外部锁强制同步？任何帮助是极大的赞赏。

```
public class Logging {

private static Logging instance;    
private static final String vendor1 = "vendor1";
private static final String vendor2 = "vendor2";    
private static long delay = 5 * 60 * 1000;

private ConcurrentMap<String, Event> vendor1Calls = new ConcurrentHashMap<String, Event>();
private ConcurrentMap<String, Event> vendor2Calls = new ConcurrentHashMap<String, Event>();

private Timer timer;    
private final Object lock = new Object();

private Logging(){
    timer = new Timer();                
    timer.schedule(new TimerTask() {
        public void run() {
            try {
                saveEntries();
            } catch (Throwable t) {
                timer.cancel();
                timer.purge();
            }
        }       
    }, 0, delay);
}

public static synchronized Logging getInstance(){     
    if (instance == null){
        instance = new Logging();
    }
    return instance;
 }

public void log(){      
    ConcurrentMap<String, Event> map;
    String key = "";        

    if (vendor1.equalsIgnoreCase(engine)){
        map = vendor1Calls;
    }else if(vendor2.equalsIgnoreCase(engine)){  
        map = vendor2Calls;
    }else{
        return;
    }       

    key = service + "." + method;
// It would be the code if I use a regular HashMap instead of ConcurrentHashMap
    /*Event event = map.get(key);       

    // Map does not contain this service.method, create an Event for the first     time.
    if(event == null){
        event = new Event();            
        map.put(key, event);

        // Map already contains this key, just adjust the numbers.
    }else{
        // Modify the object fields
    }*/
    //}

    // Make it thread-safe using CHM
    Event newEvent = new Event();
    Event existingEvent= map.putIfAbsent(key, newEvent); 

    if(existingEvent!=null && existingEvent!=newEvent){
        // Modify the object fields
}       

private void saveEntries(){

    Map<String, List<Event>> engineCalls = null;
    try {           

        engineCalls = new HashMap<String, List<Event>>();
        List<Event> events = null;

// How can I achieve therad safety here w/o applying any lock?
        //synchronized(lock){
            if(!vendor1Calls.isEmpty()){
                events = new ArrayList<Event>();
                events.addAll(vendor1Calls.values());
                engineCalls.put(vendor1, events);
                vendor1Calls.clear();
            }
            if(!vendor2Calls.isEmpty()){
                events = new ArrayList<Event>();
                events.addAll(vendor2Calls.values());
                engineCalls.put(vendor2, events);
                vendor2Calls.clear();
            }
        //}

// logICalls() saves the events in the DB.          
        DBHandle.logCalls(engineCalls);
    } catch (Throwable t) {         
    } finally {
        if(engineCalls!=null){
            engineCalls.clear();
        }                       
    }   
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:04:09.420

> 但是，当我从中读取然后通过 clear() 方法删除所有条目时，我希望在读取映射内容然后删除它们的过程中没有其他线程写入映射。

我认为您想说的是您并不真正关心严格锁定地图。相反，您只真正关心 vender1Calls.values() 和 vendor1Calls.clear() 之间的任何日志条目的丢失，对吗？

在这种情况下，我可以想象你可以更换

```
events.addAll(vendor1Calls.values());
vendor1Calls.clear(); 
```

在 saveEntries 中有这个：

```
for (Iterator<Event> iter = vendor1Calls.values().iterator(); iter.hasNext(); ) {
    Event e = iter.next();
    events.add(e);
    iter.remove();
} 
```

这样，您只需删除已添加到事件列表中的事件。当 saveEntries() 仍在执行时，您仍然可以写入 vendor1Calls 映射，但迭代器会跳过添加的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T21:04:42.760

如果没有任何外部同步，您无法使用 CHM 实现此目的。返回的 Iterator 视图是弱一致的，这意味着 Map 的内容可以在您实际迭代它时发生变化。

看来您需要使用 a`Collections.synchronizedMap`来获得您正在寻找的功能。

编辑以使我的观点更清楚：

要实现这一点，`synchronizedMap`您首先必须`synchronize`在地图上，然后您可以将内容迭代或复制到另一个地图中，然后再清除。

```
Map map = Collections.synchronizedMap(new HashMap());

public void work(){
  Map local = new HashMap();
  synchronized(map){
     local.putAll(map);
     map.clear();
  }
  //do work on local instance 
} 
```

`local`正如我提到的那样，您可以`iterate + remove`类似于@Kevin Jin 的回答，而不是实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:35:47.007

[此线程](https://forums.oracle.com/forums/thread.jspa?threadID=2431482&tstart=0)中显示了此示例的原子版本（仅使用 ConcurrentMap 中的功能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T22:42:48.947

我最好的建议是使用[ReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)但是当您明确声明您不想使用任何锁（顺便说一句`ConcurrentHashMap`可能会在内部使用它们）时，您可以尝试以下操作。

对每个地图使用[AtomicReference](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html)，当需要记录其内容时，使用[getAndSet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html#getAndSet%28V%29)将旧地图替换为全新的空地图。

您现在拥有一个专属使用的地图，您可以随心所欲地遍历和清除它。不幸的是，有一个小问题（使用锁将摆脱），那就是如果另一个线程正在添加到映射的过程中，而您将它换成一个空的。您也许可以在这一点上添加一个延迟，希望等待足够长的时间让另一个线程完成它正在做的事情。也许您可以使用 a 的一些内部功能`ConcurrentHashMap`来等到每个人都完成它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T09:30:47.107

以下代码使用[功能性 java](http://functionaljava.org/)项目中的[持久映射。](http://en.wikipedia.org/wiki/Persistent_data_structure)它使用更多内存，但（AFAIK :) 可以安全地被多个线程使用。中唯一的可变值，它使用*compare-and-set 进行*更新。地图和事件是*不可变*的，因此是线程安全的。另外，我没有清除地图，而是替换了对它的引用。`AtomicReference`

 **```
import fj.F;
import fj.Ord;
import fj.data.TreeMap;

import java.util.*;
import java.util.concurrent.atomic.AtomicReference;

public class Logging
{
    // Event is immutable
    private static class Event
    {
        // updates are done by creating new values
        Event update(String key)
        {
            return new Event();
        }
    }

    // Refactored code pertaining to one vendor into a separate class.
    private static class EngineLogger
    {
        public final String vendor;
        private final AtomicReference<TreeMap<String, Event>> mapRef =
                new AtomicReference<TreeMap<String, Event>>(TreeMap.<String, Event>empty(Ord.stringOrd));

        private EngineLogger(String vendor)
        {
            this.vendor = vendor;
        }

        public void log(String service, String method)
        {
            final String key = service + "." + method;
            boolean updated = false;
            while (! updated)
            {
                // get the current value of the map
                TreeMap<String, Event> currMap = mapRef.get();

                // create an updated value of the map, which is the current map plus info about the new key
                TreeMap<String, Event> newMap = currMap.update(key, new F<Event, Event>()
                {
                    @Override
                    public Event f(Event event)
                    {
                        // Modify the object fields of event, if the map contains the key
                        return event.update(key);
                    }
                    // create a new event if the map does not contain the key
                }, new Event());

                // compare-and-set the new value in .. repeat until this succeeds
                updated = mapRef.compareAndSet(currMap, newMap);
            }
        }

        public List<Event> reset()
        {
            /* replace the reference with a new map */
            TreeMap<String, Event> oldMap = mapRef.getAndSet(TreeMap.<String, Event>empty(Ord.stringOrd));

            /* use the old map to generate the list */
            return new ArrayList<Event>(oldMap.toMutableMap().values());
        }
    }

    private static Logging instance;
    private static long delay = 5 * 60 * 1000;
    private final Timer timer;

    private final EngineLogger vendor1 = new EngineLogger("vendor1");
    private final EngineLogger vendor2 = new EngineLogger("vendor2");

    private Logging()
    {
        timer = new Timer();
        timer.schedule(new TimerTask()
        {
            public void run()
            {
                try
                {
                    saveEntries();
                }
                catch (Throwable t)
                {
                    timer.cancel();
                    timer.purge();
                }
            }
        }, 0, delay);
    }

    public static synchronized Logging getInstance()
    {
        if (instance == null)
        {
            instance = new Logging();
        }
        return instance;
    }

    public void log(String engine, String service, String method)
    {
        if (vendor1.vendor.equals(engine))
        {
            vendor1.log(service, method);
        }
        else if (vendor2.vendor.equals(engine))
        {
            vendor2.log(service, method);
        }
    }

    private void saveEntries()
    {
        Map<String, List<Event>> engineCalls = new HashMap<String, List<Event>>();
        engineCalls.put(vendor1.vendor, vendor1.reset());
        engineCalls.put(vendor2.vendor, vendor2.reset());
        DBHandle.logCalls(engineCalls);
    }
} 
```**

# c# - 如何在 C# 中禁用 Outlook 空白主题提示

> ID：12115729
> 
> 赞同：2
> 
> 时间：2012-08-24T19:47:00.767
> 
> 标签：c#

我想禁用默认的 Outlook 主题弹出，因为它使主题成为可选的。我想有我自己的弹出，这使得主题成为强制性的。我是 Outlook 开发人员并使用 C#.Net。谁能告诉我如何禁用 C# 中弹出的 Outlook 空白主题？

谢谢，尼迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:54:47.733

向事件添加处理程序[`ItemSend`](http://msdn.microsoft.com/en-us/library/office/ff865076.aspx)并将`Cancel`属性设置为`True`如果主题为空（当然告诉用户主题是强制性的）。

# wxpython - WXpython 教程

> ID：12115734
> 
> 赞同：4
> 
> 时间：2012-08-24T19:47:12.390
> 
> 标签：wxpython

我正在尝试使用 WxPython 创建一个 GUI 项目。我想知道在哪里可以获得 Wx Python 的完整教程。我查看了[Zetcode](http://zetcode.com/wxpython/)上的教程，但我确信它并没有涵盖所有内容。

在哪里可以查看类似于 MSDN 库的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:42:43.393

wxPython 中的每个小部件都没有完整的教程。zetcode 教程虽然展示了很多基础知识。如果您下载 wxPython 演示，您将拥有演示表单中的 99% 的小部件。您还可以查看我列出的优秀 wxPython 文档来源：

[http://www.blog.pythonlibrary.org/2010/12/05/wxpython-documentation/](http://www.blog.pythonlibrary.org/2010/12/05/wxpython-documentation/)

我是在 Phoenix 文档发布之前写的，所以如果您使用的是 Phoenix 或 2.9，您可能也想检查一下：[http ://wxpython.org/Phoenix/docs/html/index.html](http://wxpython.org/Phoenix/docs/html/index.html)

[我也在我的博客](http://www.blog.pythonlibrary.org)上介绍了很多关于 wxPython 的零碎东西。

# javascript - 图像输入按钮的动态创建和 appendChild 未显示为表单元素？

> ID：12115735
> 
> 赞同：1
> 
> 时间：2012-08-24T19:47:35.367
> 
> 标签：javascript, image, forms

我正在动态创建文件上传表单。我将动态创建的表单附加到动态创建的 div 上。到目前为止，一切都很好。

其中两个表单元素显示为有效的表单字段：type=text 字段和 type=file 字段。

在 appendChild-ing 两个 type=image 字段之后，图像按钮确实显示在弹出表单中，但由于某种原因，我收到一个 javascript 错误“错误：TypeError：document.forms.fileform.Upload 未定义”。

警报提示显示 document.forms['fileform'].length 只是两个元素，而不是我期望的四个元素。

在 div 中创建 div 和表单的代码：

```
if(! document.getElementById("fileformdiv")){
  var fileformdiv = document.createElement("div");
  fileformdiv.setAttribute("id","fileformdiv");
  fileformdiv.setAttribute("style","position:relative;top:-200px;left:-250px;height:160px;line-height:30px;width:220px;border:#aaa 1px solid;background:#eee;z-index:10;text-align:left;padding:10px 10px 10px 10px;");
  document.getElementById("stampContainer").appendChild(fileformdiv);

  var fileform = document.createElement("form");
  fileform.setAttribute("enctype","multipart/form-data");
  fileform.setAttribute("id","fileform");
  fileform.setAttribute("name","fileform");

  var descriptionprompt = document.createTextNode("Say something about this file:");

  var filedescription = document.createElement("input");
  filedescription.setAttribute("id","filedescription");
  filedescription.setAttribute("name","filedescription");
  filedescription.setAttribute("type","text");
  filedescription.setAttribute("style","position:relative;width:200px;height:30px;margin:10px 10px 10px 0px;");

  var filename = document.createElement("input");
  filename.setAttribute("id","filename");
  filename.setAttribute("name","filename");
  filename.setAttribute("type","file");
  filename.setAttribute("style","position:relative;width:200px;margin:10px 10px 10px 0px;");

  var uploadbutton = document.createElement("input");
  uploadbutton.setAttribute("name","Upload");
  uploadbutton.setAttribute("id","Upload");
  uploadbutton.setAttribute("type","image");
  uploadbutton.setAttribute("style","position:relative;margin:0px 0px 0px 60px;width:80px;height:30px;");
  uploadbutton.setAttribute("src",baseUrl+"images/upload.gif");

  var cancelbutton = document.createElement("input");
  cancelbutton.setAttribute("name","Cancel");
  cancelbutton.setAttribute("id","Cancel");
  cancelbutton.setAttribute("type","image");
  cancelbutton.setAttribute("style","position:relative;margin:-30px 0px 0px 140px;width:80px;height:30px;");
  cancelbutton.setAttribute("src",baseUrl+"images/cancel.gif");

  var linebreak = document.createElement("br");

  document.getElementById("fileformdiv").appendChild(fileform);
  document.forms['fileform'].appendChild(descriptionprompt);
  document.forms['fileform'].appendChild(filedescription);
  document.forms['fileform'].appendChild(linebreak);
  document.forms['fileform'].appendChild(filename);
  document.forms['fileform'].appendChild(linebreak);
  document.forms['fileform'].appendChild(uploadbutton);
  document.forms['fileform'].appendChild(cancelbutton);

  document.forms['fileform']['Upload'].onclick = function() { submitFile(); return false; };
  document.forms['fileform']['Cancel'].onclick = function() { document.getElementById("fileformdiv").parentNode.removeChild(document.getElementById("fileformdiv")); };

  for(i=0;i<document.forms['fileform'].length;i++){
     alert(document.forms['fileform'][i].name);
  }
} 
```

我应该补充一点，如果我使用plain-jane type="submit" 而不是 type="image" 按钮，则此表单可以正常工作。但这不是我想要的，我不甘于平庸。

感谢**Musa**引导我找到解决方案。

我变了：

```
document.forms['fileform']['Upload'].onclick = function() { submitFile(); return false; };

document.forms['fileform']['Cancel'].onclick = function() { document.getElementById("fileformdiv").parentNode.removeChild(document.getElementById("fileformdiv")); }; 
```

至：

```
submitbutton.onclick = function() { submitFile(); return false; };

cancelbutton.onclick = function() { document.getElementById("fileformdiv").parentNode.removeChild(document.getElementById("fileformdiv")); }; 
```

...瞧，脚本可以正常工作。不过，这些字段不会显示为表单字段。但实际上这并不重要，因为我可以将 onclicks 附加到它们上，它们会做他们应该做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:42:37.977

我做了一些搜索，`<input type="image">`表单元素集合中不包含元素，请参阅备注[http://msdn.microsoft.com/en-us/library/ms537449(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms537449(v=VS.85).aspx)，因此您无法从表单元素。由于您已经引用了元素，因此您应该使用它

```
if(! document.getElementById("fileformdiv")){
  var fileformdiv = document.createElement("div");
  fileformdiv.setAttribute("id","fileformdiv");
  fileformdiv.setAttribute("style","position:relative;top:-200px;left:-250px;height:160px;line-height:30px;width:220px;border:#aaa 1px solid;background:#eee;z-index:10;text-align:left;padding:10px 10px 10px 10px;");
  document.getElementById("stampContainer").appendChild(fileformdiv);

  var fileform = document.createElement("form");
  fileform.setAttribute("enctype","multipart/form-data");
  fileform.setAttribute("id","fileform");
  fileform.setAttribute("name","fileform");

  var descriptionprompt = document.createTextNode("Say something about this file:");

  var filedescription = document.createElement("input");
  filedescription.setAttribute("id","filedescription");
  filedescription.setAttribute("name","filedescription");
  filedescription.setAttribute("type","text");
  filedescription.setAttribute("style","position:relative;width:200px;height:30px;margin:10px 10px 10px 0px;");

  var filename = document.createElement("input");
  filename.setAttribute("id","filename");
  filename.setAttribute("name","filename");
  filename.setAttribute("type","file");
  filename.setAttribute("style","position:relative;width:200px;margin:10px 10px 10px 0px;");

  var uploadbutton = document.createElement("input");
  uploadbutton.setAttribute("name","Upload");
  uploadbutton.setAttribute("id","Upload");
  uploadbutton.setAttribute("type","image");
  uploadbutton.setAttribute("style","position:relative;margin:0px 0px 0px 60px;width:80px;height:30px;");
  uploadbutton.setAttribute("src",baseUrl+"images/upload.gif");

  var cancelbutton = document.createElement("input");
  cancelbutton.setAttribute("name","Cancel");
  cancelbutton.setAttribute("id","Cancel");
  cancelbutton.setAttribute("type","image");
  cancelbutton.setAttribute("style","position:relative;margin:-30px 0px 0px 140px;width:80px;height:30px;");
  cancelbutton.setAttribute("src",baseUrl+"images/cancel.gif");

  var linebreak = document.createElement("br");

  fileformdiv.appendChild(fileform);
  fileform.appendChild(descriptionprompt);
  fileform.appendChild(filedescription);
  fileform.appendChild(linebreak);
  fileform.appendChild(filename);
  fileform.appendChild(linebreak);
  fileform.appendChild(uploadbutton);
  fileform.appendChild(cancelbutton);

  uploadbutton.onclick = function() { submitFile(); return false; };
  cancelbutton.onclick = function() { fileformdiv.parentNode.removeChild(fileformdiv); };

  for(i=0;i<fileform.length;i++){
     alert(fileform[i].name);
  }
} 
```

# c# - vsto 插件中的本地化

> ID：12115740
> 
> 赞同：3
> 
> 时间：2012-08-24T19:47:55.547
> 
> 标签：c#, .net, localization, vsto

这是在 VSTO Word Addin 中实现本地化的正确方法吗？现在我只遵循一个命名约定，将当前文化附加到它搜索的资源文件中。我已经阅读了足够多的不同材料来混淆，一种方法是使用 Resgen.exe 然后 Al.exe 生成 .dll 但我不明白为什么，它能够更新语言而无需重新编译?

```
System.Resources.ResourceManager resMgr;
System.Globalization.CultureInfo ci = System.Threading.Thread.CurrentThread.CurrentCulture;
try
{
    // somehow I feel this isn't how it was meant to be? but it works
    resMgr = new System.Resources.ResourceManager("MyAddin.MyLocalisation." + ci, Assembly.GetExecutingAssembly());
    string title = resMgr.GetString("MyTitle");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:47:57.200

混淆可能是因为有[(5) 种不同的方法可以为桌面应用程序创建资源文件](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)。[程序集链接器](http://msdn.microsoft.com/en-us/library/21a15yht.aspx)( *al.exe* ) 和[资源文件生成器](http://msdn.microsoft.com/en-us/library/ccec7sz1%28v=vs.110%29.aspx)( *resgen.exe* ) 是处理本地化资源时使用的主要工具。**Resgen.exe**会将 resx ( *XML* ) 编译成资源 ( *binary* )，而**al.exe**会将资源 ( *binary* ) 组合成附属程序集 ( *dll* )。[卫星程序集通常针对每种支持的文化](http://msdn.microsoft.com/en-us/library/sb6a8618.aspx)（*中心和辐射*）。无需重新编译应用程序即可更新附属程序集。

* * *

### 来自[MSDN](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)：

> 您可以在资源文件中包含诸如字符串、图像或对象数据之类的资源，以便您的应用程序可以轻松使用它们。.NET Framework 提供了**五种创建资源文件的方法**：

[*1\. 创建一个包含字符串资源的文本文件。您可以使用资源文件生成器 (Resgen.exe) 将文本文件转换为二进制资源 (.resources) 文件。然后，您可以使用语言编译器将二进制资源文件嵌入到应用程序可执行文件或应用程序库中，也可以使用 Assembly Linker (Al.exe) 将其嵌入到附属程序集中。有关更多信息，请参阅文本文件中的资源部分。*]

[*2\. 创建一个包含字符串、图像或对象数据的 XML 资源 (.resx) 文件。您可以使用资源文件生成器 (Resgen.exe) 将 .resx 文件转换为二进制资源 (.resources) 文件。然后，您可以使用语言编译器将二进制资源文件嵌入到应用程序可执行文件或应用程序库中，也可以使用 Assembly Linker (Al.exe) 将其嵌入到附属程序集中。有关详细信息，请参阅 .resx 文件中的资源部分。*]

[*3\. 使用 System.Resources 命名空间中的类型以编程方式创建 XML 资源 (.resx) 文件。您可以创建 .resx 文件、枚举其资源并按名称检索特定资源。有关详细信息，请参阅以编程方式使用 .resx 文件主题。*]

[*4\. 以编程方式创建二进制资源 (.resources) 文件。然后，您可以使用语言编译器将该文件嵌入到应用程序可执行文件或应用程序库中，也可以使用程序集链接器 (Al.exe) 将其嵌入到附属程序集中。有关详细信息，请参阅 .resources 文件中的资源部分。*]

[*5\. 使用 Visual Studio 创建资源文件并将其包含在您的项目中。Visual Studio 提供了一个资源编辑器，可让您添加、删除和修改资源。在编译时，资源文件会自动转换为二进制 .resources 文件并嵌入到应用程序程序集或附属程序集中。有关详细信息，请参阅 Visual Studio 中的资源文件部分。*]

# cloudbees - SDK 1.2.1 Windows：蜜蜂运行日志库错误（commons-logging-1.0.4.jar）

> ID：12115741
> 
> 赞同：0
> 
> 时间：2012-08-24T19:47:56.400
> 
> 标签：cloudbees

我们的设置：Windows 7 CloudBees SDK 1.2.1（和早期版本） 在本地和 CloudBees 部署 ColdFusion 9 应用程序

我们发现以下情况始终如一地发生：

使用“bees run”命令在本地部署我们的应用程序，我们总是会收到与“logging”有关的 Java 错误。我们发现我们可以通过将 /lib/commons-logging-1.0.4.jar 重命名为 DISABLED 来禁用它来解决这个问题。“bees run”命令现在可以工作了，我们可以正常进行了。

但是，当我们使用“bees deploy”命令时，我们发现必须重新启用 commons-logging-1.0.4.jar，将其命名回原来的名称。如您所料，这种常量文件重命名并不是真正的解决方案。

有人可以帮忙吗？

这是错误（或它的一部分）信息：启动 Servlet 引擎：Apache Tomcat/6.0.35 java.lang.ExceptionInInitializerError 原因：org.apache.commons.logging.LogConfigurationException：org.apache.commons.logging.LogConfigurationException ：没有合适的日志构造函数 [Lj ava.lang.Class;@2d388e5e for org.apache.commons.logging.impl.Log4JLogger（由 java.lang.NoClassDefFoundError 引起：org/apache/log4j/Category）（由 org.apache 引起.commons.logging.LogConfigurationException：没有合适的日志构造函数 [Ljava.lang.Class;@2d388e5e for org.apache.commons.logging.impl.Log4JLogger（由 java.lang.NoClassDefFoundError 引起：org/apache/log4j/Category））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:26:21.907

这看起来像是 commons-logging 的类加载问题（当您调用“bees run”时，tomcat 运行时也会使用它）。我建议你在你的战争中包含 commons-logging-api.jar 作为完整的 commons-logging 库的替代品。

# php - Siebel COM 接口 - PHP

> ID：12115745
> 
> 赞同：0
> 
> 时间：2012-08-24T19:48:23.847
> 
> 标签：php, com, siebel

我可以在我的系统上访问名为 sstchca.dll 的 DLL，它提供了访问 Siebel 业务层的功能。我能够在 Excel 中引用 DLL 并编写 VBA 程序来执行功能。这是执行连接的示例 VBA 代码：

```
Private Function CreateConn(strConnect As String, strEnterprise As String, strPort As String, strPass As String) As Boolean
Dim errCode As Integer
Dim errText As String
Dim SiebelApp As SiebelDataControl    
Set SiebelApp = CreateObject("SiebelDataControl.SiebelDataControl.1")
CreateConn = True
SiebelApp.Login "host=""siebel://" & strConnect & ":" & strPort & "/" & strEnterprise & "/EAIObjMgr_enu""", _
                "sadmin", strPass

errCode = SiebelApp.GetLastErrCode()
If errCode <> 0 Then
    errText = SiebelApp.GetLastErrText
    CreateConn = False
    Exit Function 
```

我们正在研究在 PHP 中访问相同 COM 接口的可行性，我不知道从哪里开始？

任何人都可以帮我一些在 PHP 中建立 COM 连接的示例代码，以保持上述 VBA 代码为基础，或者为我指出正确的方向以获取 PHP COM 的一些好的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:27:35.067

我尝试将您的 VBA 代码转换为 PHP 代码，结果如下：

```
<?php

function CreateConn($strConnect, $strEnterprise, $strPort, $strPass) {
    global $errText;

    $SiebelApplication = new COM('SiebelDataControl.SiebelDataControl.1') or die("Unable to instantiate SiebelDataControl");
    $ConnStr = "host=\"siebel://".$strConnect.":".$strPort."/".$strEnterprise."/EAIObjMgr_enu\"";
    $SiebelApplication->Login($ConnStr, "sadmin", $strPass);
    $errCode = $SiebelApplication->GetLastErrCode();
    if ($errCode != 0) { 
        $errText = $SiebelApplication->GetLastErrText();
        return false;
    } else {
        return true;
    }
}

?> 
```

我的系统上没有安装 Siebel 软件，所以我不能说这段代码是否真的有效，但我希望它可以作为一个起点。

# javascript - JavaScript 函数在 Safari 中有效，但在 Firefox 中找不到

> ID：12115749
> 
> 赞同：-1
> 
> 时间：2012-08-24T19:48:40.267
> 
> 标签：javascript, html, firefox

我有非常简单的 html 和 js 文件 - 我在下面包含了这些文件。

有趣（也令人沮丧）的是这些文件在 Safari 中工作 - 但在 Firefox 中，按下提交按钮会生成以下错误消息：

> 错误：sFeedback 未定义
> 
> 源文件：javascript:sFeedback(); 线路：1

阅读其他帖子，如[Firefox 中未定义的 JavaScript 函数？](https://stackoverflow.com/questions/8810399/javascript-function-not-defined-in-firefox)，似乎Firefox可能需要先定义函数才能调用它。如果是这种情况，有没有办法 - 在我的设置中 - 在调用之前定义函数？

测验.html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Math Quiz</title>
    <meta name="generator" content="BBEdit 9.6" />
</head>
<script language="JavaScript" src="generateQuizItem.js">
</script>

<body onLoad="javascript:sGenerateQuizItem();">

</body>
</html> 
```

和 javascript：

```
var a0;
var a1;
var sum;

function sFeedback()
    {
    var answer = document.quiz_form.answer.value;
    document.write("answer = " + answer + "<br>");
    if (answer == sum)
        document.write("Right!<br>");
    else
        document.write("Wrong!<br>");
    }

function sGenerateQuizItem()
    {
    a0 = 20;
    a1 = 40;
    sum = a0 + a1;

    document.write("<form action=\"javascript:sFeedback();\" method=\"get\" name=\"quiz_form\">\n");
    document.write(a0 + " + " + a1 + " = ");
    document.write("<input name=\"answer\" id=\"answer\" type=\"text\" size=\"4\" maxlength=\"4\" /><br><br>\n");
    document.write("<button type=\"submit\" id=\"submit\">Submit</button>");
    document.write("</form>");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T03:40:18.960

好吧，你遇到了一些奇怪的事情。

document.write 使用起来很奇怪，根据你调用它的时间，它的行为会有所不同。如果它在页面加载期间运行，那么它会将其输出插入 HTML...

```
<p>Hello your name is:
<script>
  document.write("Somebody");
</script>
</p> 
```

但是，如果您**在页面加载**后使用 document.write，那么它将用 document.write 的输出**替换**当前页面。有时对调试或转储大量信息很有用——对其他任何事情都没有用。

因此，您使用 document.write会在代码运行时**破坏**当前页面。不同的浏览器会有不同的处理方式。不要这样做。

有更好的方法来修改页面。任何内容都可以在基本 HTML 中包含表单并将其隐藏——然后在您需要时显示它。

使用 document.createElement 和朋友在运行中构建数据。

尽管我不喜欢innerHTML，但即使*这样*也是一个更好的选择。

TL:DR 很久以前，document.write 是与网页交互的唯一方式。在 20 多年左右的时间里并非如此。不要这样做。假装不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:53:33.007

尝试将脚本引用放在文档的头部。

```
<!DOCTYPE html>
<html>
<head>
    <title>Math Quiz</title>
    <script src="generateQuizItem.js"></script>
</head>
<body onLoad="sGenerateQuizItem();">

</body>
</html> 
```

# .net - 如何在机器上运行 .NET 4.5 应用程序

> ID：12115750
> 
> 赞同：1
> 
> 时间：2012-08-24T19:48:47.153
> 
> 标签：.net

我最近安装了 Visual Studio 的 RC 12，并使用 .NET 4.5 中的一些新功能创建了一个应用程序。

这个应用程序在 VS 下运行良好，但是当我从命令行运行它时，我收到错误消息，即程序集是使用与当前加载的运行时不同的运行时构建的。

不太确定如何解决这个问题？

任何想法将不胜感激！

# android - 应用内版本检查 - Android-Query

> ID：12115756
> 
> 赞同：2
> 
> 时间：2012-08-24T19:49:01.070
> 
> 标签：android, android-query

我正在使用**In-App Version Checking**，我想测试对话框是否正常工作。

如果我尝试：

*ms.locale(Locale.getDefault().toString()).force(true).level(MarketService.MINOR).checkVersion();*

它工作得很好，但这是一个强制警报对话框，我要使用的是自动代码：

*ms.level(MarketService.MINOR).checkVersion();*

但我看不出它是否有效。

我试图降低清单中的应用程序版本代码和版本名称，但它似乎不起作用。

有任何想法吗？？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T04:20:44.527

利用

```
ms.level(MarketService.MAJOR).level(MarketService.MINOR).level(MarketService.REVISION).checkVersion(); 
```

当您提交您的应用程序时，在“此版本有什么新功能？”下，请确保您使用例如“v1.1.2”打开您的句子。

# c++ - 使用 LLVM 生成纯机器码

> ID：12115758
> 
> 赞同：3
> 
> 时间：2012-08-24T19:49:09.993
> 
> 标签：c++, c, compiler-construction, llvm, bytecode

有没有办法从带有 LLVM 的模块生成“纯”机器代码？

我的意思是，我有一个模块，并且只想获取没有任何 MachO 或 Darwin 对象标头的 x86 操作码，只获取操作码（如果可能，将它们重新定位到某个基地址）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:51:36.927

我认为您正在寻找 objdump。利用`objdump -d your_executable > dump_file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:40:10.093

执行此类操作的“标准”方法是构建可执行文件，然后根据需要提取原始位。像[http://www.bravegnu.org/gnu-eprog/hello-arm.html](http://www.bravegnu.org/gnu-eprog/hello-arm.html)之类的东西。

另一种方法是使用 LLVM JIT API；不过，我没有任何好的文档或示例代码来说明如何以这种方式使用 LLVM。也许看看 lldb 中的 ClangExpressionParser::PrepareForExecution 是如何工作的（[http://llvm.org/viewvc/llvm-project/lldb/trunk/source/Expression/ClangExpressionParser.cpp?revision=161559&view=markup](http://llvm.org/viewvc/llvm-project/lldb/trunk/source/Expression/ClangExpressionParser.cpp?revision=161559&view=markup)）。

# iphone - Restkit 的链接器错误，未找到 Restkit.framework

> ID：12115759
> 
> 赞同：1
> 
> 时间：2012-08-24T19:49:10.070
> 
> 标签：iphone, ios, xcode, restkit

# 问题

在 iOS 上完成 Restkit 的安装说明后，我收到 Apple Mach-o 链接器错误：

![在此处输入图像描述](../Images/cb12282c694fe77517c3be4fc62e87b2.png)

# 我的过程

我尝试按照此处找到的 Restkit 安装说明进行操作：[https ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

我首先通过 Git 添加了 Restkit 作为子模块。

我将 Restkit 添加到我的项目中，并将必要的配置添加到项目的目标构建设置中 ![在此处输入图像描述](../Images/330463b92fda84c9e836da3c1045cb2a.png) ![在此处输入图像描述](../Images/56756d500b3774a22a3cd60bf3ef07d7.png)

然后我将 Restkit 添加为目标依赖项

![在此处输入图像描述](../Images/fc7fa3b1211049c97db2ac7a35d9f871.png)

# 解决方案的线索

无论出于何种原因，Restkit 中的一些文件都显示为红色。

![在此处输入图像描述](../Images/5633abc9d67f813e8f5047fdd100bbc2.png)

链接 Restkit 框架时，这会导致类似的行为

![在此处输入图像描述](../Images/deaaff063dfc5420f6f310af84cd9878.png)

# 我试过的

1.  我尝试删除和阅读 Restkit 无济于事。
2.  我已经尝试在 Xcode 项目中移动它，但这只会让事情变得更加奇怪（目标不再识别它对 Restkit 的依赖）。
3.  我确认我在构建设置中输入的内容是正确的。
4.  我检查了 SO 的解决方案，甚至[在为设备编译时检查了 Linker Errors Apple Mach-O Linker Error 的](https://stackoverflow.com/questions/5329001/apple-mach-o-linker-error-when-compiling-for-device)常见解决方案我没有看到任何明显的解决方案（我可能错了）。

就是这样。我希望这足以解决问题。

编辑：确认标题搜索路径的额外图像：

![在此处输入图像描述](../Images/4add8ab2c367dcdbfcafea83669e1302.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:50:57.177

好吧，这个解决方案很傻，但我意识到 Restkit 实际上并不需要在 iOS 上构建 Restkit.framework。相反，它需要将 libRestkit.a 文件添加到“使用库链接二进制文件”部分。

这使您可以在`<Restkit/Restkit.h>`没有编译错误或警告的情况下添加代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:22:17.993

您需要手动构建 RestKit 目标，以便将头文件复制到构建目录中。显然主项目构建不能可靠地运行子项目构建？

所以，我解决这个问题的步骤：

```
Select the RestKit run target
Build
Make sure the header search path was set on all target (apparently on project itself is not enough)
Build main project 
```

* * *

有关更多分步说明，请阅读[本教程](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)。[从这里](http://cdn1.raywenderlich.com/downloads/CoffeeShop.zip)下载源代码代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T14:11:35.203

我有很多问题试图通过下载项目、尝试手动链接它们等等来让它工作。最后我发现了可可豆荚，这是一种管理依赖的方式。我遵循了本指南：[http](http://www.raywenderlich.com/12139/introduction-to-cocoapods) ://www.raywenderlich.com/12139/introduction-to-cocoapods ，它帮助我启动并运行。在这个过程之后，cocoapods 为我引入了 rest kit 依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T02:31:48.713

这一切都在我创建项目的计算机上为我工作，但是当我将项目复制到新计算机时，我遇到了同样的错误。

我认为原因是 xcode 无法找到由可可豆荚创建的二进制文件。当您转到目标项目设置时，它是可见的。因此，只需将 libPods.a 从项目导航器拖到项目设置的链接二进制文件和框架部分。看一下屏幕截图，您可以看到旧的和新的，简单的一步。![在此处输入图像描述](../Images/6dd3f41db9b9a930fc8b63451fb8f09d.png)

基本上，这只是简单地添加库搜索路径

```
 LIBRARY_SEARCH_PATHS = (
                                   "$(inherited)",
                                   "$(PROJECT_DIR)/Pods/build/Debug-iphoneos",
                           ); 
```

：

# jquery - 子菜单不会在主菜单的鼠标离开时向上滑动

> ID：12115760
> 
> 赞同：0
> 
> 时间：2012-08-24T19:49:13.720
> 
> 标签：jquery, asp.net

当我将鼠标移出子菜单时，它会向上滑动，但如果我从主菜单中鼠标移出而不专注于子菜单，则不会。这是我的代码

```
$('.dropdown').mouseenter(function () {
    $('.sublinks').stop(false, true).hide();
    var submenu = $(this).parent().next();
    submenu.css({
        position: 'absolute',
        top: $(this).offset().top + $(this).height() + 'px',
        left: $(this).offset().left + 'px',
        zIndex: 1
    });
    submenu.stop(true,
    true).slideDown(300);
    submenu.mouseleave(function () {
        $(this).slideUp(300);
    });
}); 
```

* * *

HTML-

```
<ul id ="ul1" >
        <li><a href="#" class="dropdown"></a></li>

        <li class="sublinks">
            <table cellpadding ="0" cellspacing ="0">
            <tr>
                <td><a href="Product1.aspx">Product 1
                </a></td>
            </tr>
            <tr>
                <td><a href="Product2.aspx">Product 2</a></td>
            </tr>
              <tr>
                <td><a href="Product3.aspx">Product 3</a></td>
            </tr>
            <tr>
                <td><a href="Product4.aspx">Product 4</a></td>
            </tr>
            <tr>
                <td><a href="Product5.aspx">Product 5</a></td>
            </tr>
            <tr>
                <td><a href="Product6.aspx">Product 6</a></td>
            </tr>

            </table>
        </li>

    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:16:24.377

它不会起作用，因为`mouseleave`必然会`sublinks`. 它不会发生，因为鼠标永远不会进入`sublinks`。`mouseleave`您可以通过绑定到`sublinks`and来解决此问题`dropdown`（如果是`dropdown`处理程序，您还需要检查鼠标是否不进入`sublinks`）。但这对我来说不是最好的方法。

假设最好同时使用`mouseleave`和`mouseenter`。`ul1`由于`dropdown`和`sublinks`都是 的孩子`ul1`，`mouseleave`事件将正常工作。

# php - 在 PHP 中从 XML 获取属性

> ID：12115762
> 
> 赞同：3
> 
> 时间：2012-08-24T19:49:21.170
> 
> 标签：php, xml, simplexml

我正在尝试使用以下代码从 XML 文件中获取属性：

```
$xmlFile = "http://weather.aero/dataserver_current/httpparam?dataSource=metars&requestType=retrieve&format=xml&stationString=".$_GET['station']."&hoursBeforeNow=1";

$xml = simplexml_load_file($xmlFile); 
```

这是 XML 文件：

```
<response xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XML-Schema-instance" version="1.2" xsi:noNamespaceSchemaLocation="http://weather.aero/schema/metar1_2.xsd">
<request_index>29916745</request_index>
<data_source name="metars"/>
<request type="retrieve"/>
<errors/>
<warnings/>
<time_taken_ms>2</time_taken_ms>
<data num_results="1">
<METAR>
<raw_text>EGHH 241850Z 17014KT 9999 BKN006 17/16 Q1000</raw_text>
<station_id>EGHH</station_id>
<observation_time>2012-08-24T18:50:00Z</observation_time>
<latitude>50.78</latitude>
<longitude>-1.83</longitude>
<temp_c>17.0</temp_c>
<dewpoint_c>16.0</dewpoint_c>
<wind_dir_degrees>170</wind_dir_degrees>
<wind_speed_kt>14</wind_speed_kt>
<visibility_statute_mi>6.21</visibility_statute_mi>
<altim_in_hg>29.52756</altim_in_hg>
<sky_condition sky_cover="BKN" cloud_base_ft_agl="600"/>
<flight_category>IFR</flight_category>
<metar_type>METAR</metar_type>
<elevation_m>11.0</elevation_m>
</METAR>
</data>
</response> 
```

现在，我可以提取其他信息，但要获取 的属性，我使用的是：

```
<?php foreach ($xml->data->METAR[0]->sky_conditions->attributes() as $sky_cover => $cloud_base_ft_agl){

            echo"<tr>";
            echo"<td><strong>";
            if ($sky_cover == "CAVOK") {echo "Ceiling and Visibility OK";} else {echo $val['sky_cover'];}
            echo"</strong></td>";
            echo"<td><strong>";
            if (isset($cloud_base_ft_agl)){echo $cloud_base_ft_agl; }
            echo"</strong></td>";
            echo"</tr>";
        }?> 
```

但是，我收到错误：警告：main() [function.main]：节点不再存在于

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:01:47.193

`sky_conditions`不退出哪个不存在..请注意`sky_condition`不在`$xml->data->METAR[0]->sky_conditions->attributes()`

这将解决问题

```
$td = "<tr><td><strong>%s</strong></td><td><strong>%s</strong></td></tr>";
echo '<table>';
foreach ( $xml->data->METAR[0]->sky_condition as $value ) {
    $attribute = $value->attributes();
    printf($td, $attribute['sky_cover'], $attribute['cloud_base_ft_agl']);
}
echo '</table>'; 
```

# mysql - 如何正确使用 mysqldump

> ID：12115763
> 
> 赞同：6
> 
> 时间：2012-08-24T19:49:22.677
> 
> 标签：mysql, database

我使用 MySQL Server 5.5 并且在提取数据库时遇到问题，这就是我使用此命令的方式：

```
mysql> mysqldump -uroot -pkail mybase > C:\Program Files\MySQL\MySQL Server 5.5\b 
in\base.sql; 
```

这是我得到的错误：

```
ERROR: 
Unknown command '\P'. 
ERROR: 
Unknown command '\M'. 
ERROR: 
Unknown command '\M'. 
ERROR: 
Unknown command '\b'. 
Outfile disabled. 
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near 'mysq 
dump -uroot -pkail mybase > C:\Program Files\MySQL\MySQL Server 5.5\bin' at 
line 1 
```

我该如何解决问题并感谢您的帮助:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T19:54:53.543

不应从 MySQL 中执行 Mysqldump。这是一个单独的命令。

退出 MySQL 控制台并在那里尝试。

* * *

如果你查看 C:\Program Files\MySQL\MySQL Server 5.5\bin，你会看到 mysql.exe，你也会看到 mysqldump.exe。所以 mysqldump 是一个完全独立于 mysql.exe 的可执行文件，这就是为什么你从 Windows 命令行而不是从 MySQL 控制台运行它的原因。

# asp.net-mvc-3 - 使用 IEnumerable 在域模型和视图模型之间进行映射

> ID：12115764
> 
> 赞同：4
> 
> 时间：2012-08-24T19:49:29.470
> 
> 标签：asp.net-mvc-3, linq-to-sql, model

所以我的域模型有一个名为的属性`Children`，它返回所有具有当前对象 ID 的菜单。我想创建一个视图模型并在控制器中映射它们之间的值。所以`Children`属性是`IEnumerable<MenuModel>`并且`menu.Children`是类型`IEnumerable<MenuCache>`。最简单的方法是什么？我是否需要遍历所有孩子并将它们手动添加到当前模型中，然后对所有级别重复此操作？

模型：

```
public class MenuModel
{
    public int ID { get; set; }

    public string URL { get; set; }

    public int ParentID { get; set; }

    public IEnumerable<MenuModel> Children { get; set; }
} 
```

控制器：

```
using (var context = ww.WebObjs.WebDataContext.Get())
{
    var menu = context.MenuCaches.Where(x=> x.ID == 0).FirstOrDefault();
    model = new MenuModel()
    {
        ID = menu.ID,
        URL = menu.Text,
        ParentID = menu.ParentID,
        Children = menu.Children // how do I get those children?
   };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:54:56.863

您可以使用 LINQ：

```
using (var context = ww.WebObjs.WebDataContext.Get())
{
    var menu = context.MenuCaches.Where(x => x.ID == 0).FirstOrDefault();
    model = new MenuModel()
    {
        ID = menu.ID,
        URL = menu.Text,
        ParentID = menu.ParentID,
        Children = menu.Children.Select(x => new MenuModel
        {
            Prop1 = x.Prop1,
            Prop2 = x.Prop2,
            // and so on ...
        })
   };
} 
```

或我强烈推荐的[AutoMapper 。](http://automapper.org/)因此，在定义了相应的映射之后，您的控制器操作变得更具可读性：

```
using (var context = ww.WebObjs.WebDataContext.Get())
{
    var menu = context.MenuCaches.Where(x => x.ID == 0).FirstOrDefault();
    model = Mapper.Map<MenuCache, MenuModel>(menu);
} 
```

# tomcat - Tomcat中的内存泄漏

> ID：12115771
> 
> 赞同：2
> 
> 时间：2012-08-24T19:50:04.003
> 
> 标签：tomcat, memory-leaks

我的 Web 应用程序在 tomcat 服务器中运行，但经过一段时间后，内存使用量开始增长，直到服务器出现故障。

这仅发生在现场，当我尝试在本地重现这种情况时并没有发生。我尝试使用 JProfiler 远程分析，并在服务器关闭之前发现了很多字节 []。服务器在开始占用越来越多的内存后会停机 2-3 分钟，所以我看不到代码中使用 byte[] 的项目，因为 Heap walk 需要更多时间（网络应用程序真的很大）。

我将不胜感激任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:05:26.190

建议：在您的类中放置一些内存使用转储，其中缓存存储字段与 HashMap、Vector（或这些集合的非同步版本）通常保持引用。比我放一个加号 url，它将转储我的变量，例如：

Runtime.getRuntime().callMemoryFunctionForgotName()：已用内存为 270mb ... 例如。- 在这里你应该看到何时增长，随着时间的推移有行动，其中之一有泄漏。

*   当您检测到带有 action9 的 link43 时会产生内存泄漏，这很容易:)
*   只需添加一些 hashMap.count() 或 size() （也忘记了，哈哈）到 logg，你就会看到 20 个集合中的哪一个在增加而不是减少。希望您可以访问实时服务器日志。

所以我会分两步做。

# perl - Perl 文件名通配符命令两种形式的区别

> ID：12115772
> 
> 赞同：2
> 
> 时间：2012-08-24T19:50:11.123
> 
> 标签：perl, wildcard

Perl 文件名通配符命令有两种形式：`<>`和`glob`. 但是我发现这两种形式的效果是有区别的：

我想使用以下代码检索具有相似名称的所有文件：

```
my @files = <"rawdata/*_${term}_*.csv">;   #(1) 
```

和另一种格式：

```
my @files = glob "rawdata/*_${term}_*.csv";  #(2) 
```

我希望使用这两个代码得到相同的结果。但是有区别：如果`$term`是一个没有空格的字符串（或者说，一个单词），那么（2）可以正常工作，但是（1）不行；如果`$term`是一个带空格的字符串（或者说是几个单词），那么（1）效果很好，（2）不起作用。

这两种表达方式有区别吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:07:22.067

这里的区别在于引号的使用。从文档：

> 请注意，glob 在空格上拆分其参数并将每个段视为单独的模式。

使用尖括号 <> 不需要引号。Glob 需要引号。因此，以下是等价的：

```
my @files = <rawdata/*_${term}_*.csv>;
my @files = glob "rawdata/*_${term}_*.csv"; 
```

如果 ${term} 包含空格，它们都会拆分模式。当您在 <> 表单中引入引号时，它可以防止在带有空格的 ${term} 上发生这种拆分，从而搜索不同的模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T20:08:34.193

`<SomeStuff>`等同于`glob "SomeStuff"`（除了`<>`用于从文件句柄读取的所有歧义之外——请参阅`perldoc perlop`并查找`I/O Operators`那里）。因此，您的示例不等效。你应该使用

```
my @files = glob "\"rawdata/*_${term}_*.csv\"";  #(2) 
```

反而。

但是，至于为什么图案中的空间会有所不同：`perldoc -f glob`讲述故事。正常`glob`（因此`<>`通过 实现`glob`）将空格视为模式分隔符。该文档还提到`File::Glob`了它的功能`bsd_glob`，它不将空格视为模式分隔符。因此考虑改用这个：

```
use File::Glob ':glob';

my $term1  = "some stuff";
my @files1 = glob "dir/${term1}*";
my $term2  = "more";
my @files2 = glob "dir/${term2}*";

print join(' :: ', sort @files1), "\n", join(' :: ', sort @files2), "\n"; 
```

我刚刚创建的一些文件的可能输出：

```
[0 mosu@tionne ~/tmp] ~/test/test1.pl
dir/some stuff is betther than other stuff.doc :: dir/some stuffy teachers.txt
dir/more beer.txt :: dir/more_is_less.csv 
```

# xslt - 使用属性作为键深化 XSLT 结构

> ID：12115773
> 
> 赞同：1
> 
> 时间：2012-08-24T19:50:11.513
> 
> 标签：xslt, xslt-1.0, xslt-2.0, iterative-deepening

我在这里看到了这个问题的一些变化，但我不确定如何将它们应用于我的情况，所以我希望也许有人可以在这里帮助我。

我有一个类似于以下格式的平面 XML 文件：

```
<item id="1"/>
<item id="1.1"/>
<item id="1.1.1"/>
<item id="1.1.2"/>
<item id="1.1.2.1"/>
<item id="1.2"/>
<item id="1.3"/> 
```

我希望根据 id 属性分层设置标签，如下所示：

```
<item id="1">
  <item id="1.1">
    <item id="1.1.1"/>
    <item id="1.1.2">
      <item id="1.1.2.1"/>
    </item>
  </item>
  <item id="1.2"/>
  <item id="1.3"/>
</item> 
```

一些 id 值有两位数字（例如，“1.2.3.15.1”），这使得比较它们更具挑战性。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:04:38.140

选择正确的节点可能很棘手，但由于您没有层次结构，这适用于您的示例输入（如果您向其中添加根元素）

```
 <!-- start somewhere -->
  <xsl:template match="/root">
    <root>
      <!-- select all with no . in the id -->
      <xsl:apply-templates  select="//item[string-length(translate(@id,'1234567890',''))=0]" />
    </root>
  </xsl:template>

  <xsl:template match="item">
    <xsl:variable name="id" select="@id"/>
    <!-- how many . have we ? That is how deep we are and add 1 -->
    <xsl:variable name="deep" select="string-length(translate(@id,'1234567890',''))+1" />
    <xsl:copy>
      <!-- copy attribs over -->
      <xsl:apply-templates select="@*"/> 
      <!-- select all nodes that start with our curent id,  
           select nodes that are just one level below us 
           and don't select our selfs-->
      <xsl:apply-templates select="//item[starts-with(@id, $id) and string-length(translate(@id,'1234567890',''))=$deep and not(@id=$id)]"/>
    </xsl:copy>
  </xsl:template>

  <!-- copy attribs -->
  <xsl:template match="@*">
    <xsl:copy />
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T03:58:13.850

**I. 这是一个简单的 XSLT 2.0 解决方案**（类似的 XSLT 1.0 解决方案紧随其后）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     <xsl:sequence select="my:grouping(*, 1)"/>
 </xsl:template>

 <xsl:function name="my:grouping" as="element()*">
  <xsl:param name="pNodes" as="element()*"/>
  <xsl:param name="pLevel" as="xs:integer"/>

  <xsl:if test="$pNodes">
      <xsl:for-each-group select="$pNodes" group-by="tokenize(@id, '\.')[$pLevel]">
       <xsl:copy>
         <xsl:copy-of select="@*"/>
         <xsl:sequence select="
          my:grouping(current-group()[tokenize(@id, '\.')[$pLevel+1]], $pLevel+1)"/>
       </xsl:copy>
  </xsl:for-each-group>
  </xsl:if>
 </xsl:function>
</xsl:stylesheet> 
```

**当将此转换应用于此 XML 文档**（提供的 XML 片段，包装在单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
    <item id="1"/>
    <item id="1.1"/>
    <item id="1.1.1"/>
    <item id="1.1.2"/>
    <item id="1.1.2.1"/>
    <item id="1.2"/>
    <item id="1.3"/>
</t> 
```

**产生了想要的正确结果**：

```
<item id="1">
   <item id="1.1">
      <item id="1.1.1"/>
      <item id="1.1.2">
         <item id="1.1.2.1"/>
      </item>
   </item>
   <item id="1.2"/>
   <item id="1.3"/>
</item> 
```

* * *

**二、这是一个类似的 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="item"
   use="generate-id(preceding-sibling::*
                     [string-length(current()/@id) > string-length(@id)
                    and
                      starts-with(current()/@id, concat(@id, '.'))]
                       [1])"/>

 <xsl:template match="/*">
     <xsl:call-template name="grouping">
      <xsl:with-param name="pNodes" select="*"/>
      <xsl:with-param name="pLevel" select="1"/>
     </xsl:call-template>
 </xsl:template>

 <xsl:template name="grouping">
  <xsl:param name="pNodes"/>
  <xsl:param name="pLevel" select="1"/>

  <xsl:for-each select=
    "$pNodes[$pLevel > string-length(@id) - string-length(translate(@id, '.', ''))]">
   <xsl:copy>
     <xsl:copy-of select="@*"/>

     <xsl:call-template name="grouping">
       <xsl:with-param name="pNodes" select="key('kFollowing', generate-id())"/>
         <xsl:with-param name="pLevel" select="$pLevel+1"/>
     </xsl:call-template>
   </xsl:copy>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当这个 XSLT 1.0 转换应用于同一个文档（上图）时，会产生同样想要的正确结果**：

```
<item id="1">
   <item id="1.1">
      <item id="1.1.1"/>
      <item id="1.1.2">
         <item id="1.1.2.1"/>
      </item>
   </item>
   <item id="1.2"/>
   <item id="1.3"/>
</item> 
```

# cocoa - 从 NSPasteboard 中删除项目

> ID：12115777
> 
> 赞同：3
> 
> 时间：2012-08-24T19:50:30.750
> 
> 标签：cocoa, copy-paste, nspasteboard

目标：Mac OS X 10.7+，Xcode 4.3.x

核心需求：拖动/粘贴时，允许我处理一种类型的项目，将其余的传递给超类。

我有一个`NSTextView`带有 performDragOperation 方法的子类。我想做的是拦截所有文件删除以做额外的事情，然后允许任何其他项目通过`NSTextView`调用传递给超类（）`[super performDragOperation]`

我看不到从粘贴板上删除一个项目的方法。看来我只有两个选择：

1.  自己处理将所有粘贴板项目插入到我的 textView 中。
2.  缓存项目，清除粘贴板，然后在将它们传递到链上之前将它们重新插入（我尝试过这个选项但没有成功，但我可能知道它为什么会中断）。

我错过了#3 选项吗？如果不是，您会建议#1 或#2 中的哪一个？

# javascript - IE9中的jQuery错误

> ID：12115778
> 
> 赞同：1
> 
> 时间：2012-08-24T19:50:38.393
> 
> 标签：javascript, jquery, jquery-plugins, internet-explorer-9

我正在使用 Jquery 1.8.0 创建横幅旋转器插件，并且我的代码在 Firefox 和 chrome 中正常工作，但在 IE9 中神秘地***有时无法正常工作，原因不明。***我的意思是，横幅根本不会出现，也不会出现错误。它根本不存在。

所以我在我的代码中添加了一些警报（更改为`console.log`）以跟踪代码失败的位置，我想我找到了哪里。

页面上的html代码：

```
<div class="content-top">
    <div id="bannerRotator"></div>
</div>
<div class="content-bot">
</div> 
```

页面上的javascript代码：

```
$(document).ready(function() {
    console.log("Before banner rotator");
    $("#bannerRotator").BannerRotator({
        BRBannerImages: ["../Images/Banners/banner1.jpg",
                        "../Images/Banners/banner1-b.jpg",
                        "../Images/Banners/banner2.jpg",
                        "../Images/Banners/banner2-b.jpg",
                        "../Images/Banners/banner3.jpg",
                        "../Images/Banners/banner3-b.jpg",
                        "../Images/Banners/banner4.jpg",
                        "../Images/Banners/banner4-b.jpg",
                        "../Images/Banners/banner5.jpg",
                        "../Images/Banners/banner5-b.jpg",
                        "../Images/Banners/banner6.jpg",
                        "../Images/Banners/banner6-b.jpg"]
    });
    console.log("After banner rotator");

    $("#white-bg").css({ height: $(document).height() });

    console.log("After white bg");
}); 
```

横幅旋转插件：

```
(function($) {

    $.fn.BannerRotator = function(options) {
        console.log("banner creation: begin");
        var opts = $.extend($.fn.BannerRotator.defaults, options);
        console.log("before foreach");
        return this.each(function() {
            alert("before this");
            // Commented out code
            alert("banner creation: end");
        });
        console.log("after foreach");
    };

    $.fn.BannerRotator.defaults = {
       // Default settings
    };

    // Other functions

})(jQuery); 
```

执行此代码时，`alert("after foreach");`永远不会出现，这是完全正常的。问题是有时它会全部工作，但在其他时候我得到的最后一个警报是`alert("before this");`然后我直接进入`alert("After banner rotator");`.

我看到的最后一件事是，当插件工作时，`content-bot`可以在警告框后面看到里面的内容，而当插件失败时，我看不到`content-bot`，但`bannerRotator`会显示之前的所有内容。这使我认为它可能与`$(document).ready`功能有关，因为似乎当插件失败时，它会因为`$(document).ready`触发得太早而失败。

**更新**

这是我注意到的另一件事。当我第一次打开我的页面时，我的横幅没有出现。没有。不管我刷新多少时间，还是什么都没有。但是当我按 F12 进入开发者工具窗口时，横幅就起作用了。它仍然不是一直有效，但大多数时候它确实有效。

没关系那部分。正是`console.log`导致该问题的原因。请参阅[为什么 JavaScript 仅在 IE 中打开开发人员工具一次后才能工作？](https://stackoverflow.com/questions/7742781/ie9-bug-javascript-only-works-after-opening-developer-tools-once-very-stran)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:45:33.010

尝试使用 Jquery 1.7.2

Ie9 上的 document.ready 事件有回归

[http://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

# c++ - 如何在非 COM dll 中为 #import 查找签名到 c++

> ID：12115780
> 
> 赞同：0
> 
> 时间：2012-08-24T19:50:43.667
> 
> 标签：c++, dll, import, typelib

我有一个似乎是本机 C 的第 3 方 dll（Dumpbin 显示所有 C 函数）。我没有 lib 或 .h 文件。但是，当我在 C# 程序中引用此 dll 时，它神奇地知道签名（所有参数的类型和描述）。我需要使用 C++ 应用程序中的 DLL，并且可以使用 Dumpbin 和 Lib 创建一个 lib 文件，但我不知道签名（除非我从 c# 手动复制它们）。#import 给出找不到类型库（ tlh ）的错误。inf 必须在 dll 中，因为 c# 可以弄清楚。我怎样才能弄清楚（非托管）C++？

谢谢

# java - 我可以确定 JSF2 方面是否定义在复合组件中吗？

> ID：12115783
> 
> 赞同：8
> 
> 时间：2012-08-24T19:50:53.433
> 
> 标签：java, jsf, jsf-2, facelets, composite-component

我正在创建一个 JSF2 Facelets 复合组件。如果定义了特定方面，我希望 HTML 以不同的方式呈现。有什么方法可以检查是否`<f:facet name="..." />`为复合组件定义了 a ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T03:32:05.467

是的，您可以使用[`UIComponent#getFacets()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#getFacets%28%29)它们的名称获取所有方面的映射。所以你需要做的就是检查地图值是否不为空。

```
<h:panelGroup rendered="#{not empty cc.facets.foo}">
    The facet with name "foo" has been definied for this composite!
</h:panelGroup> 
```

# ruby-on-rails - 如果类名不匹配，如何从 ActiveRecord 关系中自动设置新对象的外键？

> ID：12115785
> 
> 赞同：1
> 
> 时间：2012-08-24T19:51:04.680
> 
> 标签：ruby-on-rails, ruby

以下类是使用单表继承的 Quote 的子类。

```
class BuyQuote < Quote
  has_many :shipment_quotes, foreign_key: :quote_id
  has_many :shipments, through: :shipment_quotes
end 
```

我想使用标准的 ActiveRecord`new`方法创建一个货件。

```
quote = BuyQuote.create
shipment = quote.shipments.new 
```

但是，并没有设置`shipment`和之间的关系`quote`。我认为这是由于类名与预期不同，但我不确定。

我怎样才能修改 ActiveRecord 关系，这样才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:05:55.500

看起来您在发布的代码中有一些语法错误，并且可能是不正确的表名。如果查找表不需要任何其他属性（除了将 Shipment 与 Quote 相关联），我将只使用简单的 has_and_belongs_to_many 关系。这取决于您是否计划将货物与多个报价相关联。

```
class BuyQuote < Quote
  has_many :shipments_quotes, :foreign_key => :quote_id
  has_many :shipments, :through => :shipments_quotes
end 
```

或与 habtm 关系：

```
class BuyQuote < Quote
  has_and_belongs_to_many :shipments, :foreign_key => :quote_id
end 
```

另一个问题可能是因为您正在实例化一个 Quote 类，而您没有显示其定义。您似乎正在为 BuyQuote 类定义“发货”关系，但不是为父类 Quote。

也许尝试：

```
quote = BuyQuote.create
shipment = quote.shipments.new 
```

# .net - 许多调度程序调用（.NET）的性能受到影响？

> ID：12115791
> 
> 赞同：0
> 
> 时间：2012-08-24T19:51:22.230
> 
> 标签：.net, wpf, dispatcher

我编写了一个由 WPF 应用程序中的 BackgroundWorker 运行的验证函数。它以前在 UI 线程上运行，但它有点紧张并且冻结了 UI。结果，我不得不在验证函数中用调度程序调用包装很多行，以至于我担心会影响性能。我在 53 个 SLOC 中计算了 20 个调度员呼叫。在大多数情况下，它们都是非常简单的调用——通常只是设置属性的 lambda。

这以后会咬我吗？

谢谢！

# ms-access - 子表单反转

> ID：12115793
> 
> 赞同：1
> 
> 时间：2012-08-24T19:51:42.810
> 
> 标签：ms-access, ms-access-2010, subform, subforms

这个问题是我之前的一个问题的延伸，我已经解决了这个问题。有关详细信息，请参见[此处](https://stackoverflow.com/questions/12079471/query-creates-redundant-entries)。

我对子表单有疑问。我有两个表，TableA 和 TableB，从 A 到 B 具有一对多（父对子）关系。现在我知道 Microsoft 设计了子表单，以便用户可以查看/与表上的信息交互关系的许多/孩子方面。我的问题是，这可以逆转吗？也就是说，我可以拥有关系的一方/父方信息的子表单吗？

在更广泛的背景下（参见上面的链接），我正在尝试使用子表单，因为组合框的功能有限。假设 Column Count 属性设置为大于 1 的值，组合框将允许通过其 Row Source 属性查看多个列。但是，组合框的文本输入部分将只允许一个条目。如果需要将新记录添加到基础表中，我需要能够输入多个字段值。

如果有一个完全不同的方法来完成这个不涉及子表单，那很好。我也在考虑将级联组合框作为一种可能的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:56:40.763

是的你可以。您可以拥有一个包含两个子表单的表单。在 2000 / 2003 Northwind 示例数据库中有一个示例，其中选择子表单 1 中的记录会显示子表单 2 中选择的子记录。相关表单是客户订单表单。

它的工作方式是设置链接子文件和主文件，并在第一个子表单的当前事件中包含重新查询：

```
Me.Parent![Customer Orders Subform2].Requery 
```

![罗斯文客户订单子窗体](../Images/15253591ba21c89673fd79be2ac5ae75.png) ![Northwind 客户订单子窗体设计视图](../Images/d827da6131b93dc59172c400c00f71d6.png)

# sql - 这两个 CTE 是否应该执行相同的操作？

> ID：12115796
> 
> 赞同：4
> 
> 时间：2012-08-24T19:52:12.743
> 
> 标签：sql, sql-server, database, sql-server-2008, common-table-expression

如果我们有一个`VIEW_MYTABLE`包含 50 列的 SQL 视图。

**选项 1**：

```
with CTE_MYQUERY1 as (
  select [VIEW_MYTABLE].*
  from [VIEW_MYTABLE]
  /*some complex where clause*/
) 
```

**选项 2**：

```
with CTE_MYQUERY2 as (
  select [COLUMN_1], [COLUMN_2], [COLUMN_3], ...., [COLUMN_10]
  from [VIEW_MYTABLE]
  /*some complex where clause*/
) 
```

据我了解，定义列的选择总是比`select *`语句快。请注意，在第二个查询中，我只选择了视图中 50 列中的 10 列。

我得到的结果都一样吗？谁能让我知道 CTE 在内部是如何工作的，它是否首先生成结果集，然后将其提供给后续查询（`SELECT`在我的情况下为查询）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T20:06:06.593

我希望这两个查询之间的运行时绝对没有明显的差异。

但是，我仍然*反对*SELECT *，而不是出于性能原因。有一个由来已久的神话，即 SELECT * 效率较低，因为引擎必须在元数据中查找列名，但事实是仍然存在一个查找来*验证*您编写的列名，并且无论结果集大小如何，人类都不会注意到检索名称的额外成本。

我反对 SELECT * 的原因是：

*   您不太可能需要表中的*所有*列（或所有行，但这是另一回事）。如果您拉回的列比您需要的多，那么您正在执行不必要的 I/O，并且可能会强制 SQL Server 执行表/聚集索引扫描，而它本可以对更精简的索引执行扫描。

*   即使您确实需要所有列，使用 SELECT * 也可能会在以后的代码中导致难以检测的问题。如果有人在表格中间插入一列怎么办？删除一列？添加一列？重命名列？其中一些会立即被捕获，但我已经展示了这可能导致各种难以调试的问题的案例。

    *   [要踢的坏习惯：使用 SELECT * / 省略列列表](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

* * *

至于 CTE 一般如何工作，这是一个相当广泛的问题。我将从这些文章开始：

[http://www.simple-talk.com/sql/t-sql-programming/sql-server-cte-basics/](http://www.simple-talk.com/sql/t-sql-programming/sql-server-cte-basics/)

[https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008/ms190766(v=sql.100)](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008/ms190766(v=sql.100))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:30:42.227

损害性能的主要方法`SELECT *`是导致查询浪费时间检索比实际需要的更多的数据。但它是`SELECT`查询主要部分中的子句决定检索哪些数据。* （非递归）公用表表达式可以被认为是一种一次性视图。CTE 中未在使用它的查询中引用的任何列最终将被有效地忽略。类似于查询视图时，引擎不一定会抓取视图中的每一列，而只会抓取您要求的每一列。

我的猜测是，这两种 CTE 的性能相同，因为使用它们的查询（您在示例中省略了）在两种情况下都是相同的。因此，在您的第一个选项中引用的额外列最终不会对完整查询检索到的数据产生任何影响。

*补充：为了清楚起见，这只是`SELECT`s 的情况。`WHERE`and`JOIN`子句将影响无论出现在何处都必须读取哪些列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:58:23.530

不要向客户端返回比绝对必要更多的列或行数据。这只会增加服务器上的磁盘 I/O 和网络流量，这都会损害性能。在`SELECT`语句中，不要使用`SELECT *`返回行，始终在`SELECT`语句中准确指定此特定查询需要返回哪些列，而不是更多列。在大多数情况下，一定要包含一个`WHERE`子句，以减少发送到客户端需要立即执行手头任务的那些行的数量或行数。

在我看来，最大的区别在于您的复杂`WHERE`条款，主要行动发生的地方，涉及的索引等。

综上所述，我相信第二个在几乎所有情况下都会表现得更好。

[查看Steve Jones 在 SQL Central 上](http://www.sqlservercentral.com/blogs/steve_jones/2010/09/01/common-sql-server-mistakes-_2D00_-select-_2A00_/)的这篇详细文章。

# pdf - 在一次调用中使用 ghostscript 将多个 pdf 转换为 tiff，并保留对原始文件的引用

> ID：12115799
> 
> 赞同：2
> 
> 时间：2012-08-24T19:52:41.413
> 
> 标签：pdf, command-line-arguments, ghostscript

我正在尝试将几个多页 pdf 转换为几个单页 tiff。我想用一个命令来完成，并保留从单个 tiff 到原始 pdf 的引用。

现在我正在使用

```
gs -dNOPAUSE -dNoVerifyXref -sDEVICE=tiffg4 -r300 -dBATCH -sOutputFile=page-%d.tiff pdf1.pdf pdf2.pdf ... pdfn.pdf 
```

与生成的文件

```
page-1.tiff, page-2.tiff ... page-m.tiff 
```

其中 m 是在所有输入的 pdf 中组合的总页数。

## 我想要达到的目标

是否可以更新命令以获取结果文件：

```
[pdf name]_[pdf page].tiff 
```

例如。pdf1_1.tiff pdf1_2.tiff pdf2_1.tiff，如果 pdf1 有两页而 pdf2 有一页。

或类似的

笔记。不想要任何脚本示例，只是寻找 Ghostscript 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:20:39.027

Ghostscript 设备（例如 TIFF 输出）独立于输入解释器，因为它们需要使用多种不同的输入语言（PDF、PostScript、XPS、PCL）。因此，他们不知道有多个输入文件这一事实，他们只是看到一个输出流来格式化和交付。

所以不，你不能在一次调用 GS 时做到这一点。您可以通过为每个输入文件调用一次 GS 在脚本中执行此操作，仅此而已。

# jquery - 剧本中的 jquery mobile，$("select").selectmenu("refresh", true) 在 addClass 错误时中断

> ID：12115801
> 
> 赞同：0
> 
> 时间：2012-08-24T19:53:11.483
> 
> 标签：jquery, jquery-mobile, blackberry-playbook, playbook

我正在使用 jquery mobile 并遇到了黑莓剧本的问题。我有通过 jquery 动态加载的页面 在 jquery mobile 中使用 $.mobile.changePage('/full/url/to/page');

当页面加载时，我捕获 pageinit 事件，您可以在下面看到我正在处理的内容......

```
<div id="Page1">
<select id="selectId">
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
</select>
</div>
...

$("#Page1").live('pageinit', function () {

  $("#selectId").val("1");
  $("#selectId").selectmenu("refresh", true);
}); 
```

这在 iOS、chrome、android 等中运行良好……除了黑莓剧本。

在剧本中，附加 Web Inspector 后，我收到了这个 javascript 错误，看起来 jquery 库在尝试重新格式化选择对象时没有加载......

```
TypeError: Result of expression 'span.text( text ).addClass' [undefined] is not a function.
code.jquery.com/mobile/latest/jquery.mobile.js:8107 
```

（根据说明：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)）

此外，我注意到当我在我的主索引页面上尝试此操作并将其加载到文档 pageinit 中时，它工作得非常好。

```
$(document).bind("pageinit", function () {
    $("#test").val("2");
    $("#test").selectmenu("refresh", true);
}); 
```

如果您能阐明为什么我的“现场”活动不起作用，请告诉我。

（我知道 live 在 1.7 中已被弃用，但我还没有找到任何关于 jquery mobile 与 ajax 页面调用的其他用途的文档）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:02:54.790

您正在寻找的是委托的事件处理程序。`$([selector]).live([event], [callback])`是一样的`$(document).on([event], [callback])`。基本上在元素`.live()`上设置一个委托事件处理程序。`document`使用`.on()`(jQuery 1.7+) 或`.delegate()`(jQuery 1.4.2+) 会带来额外的好处，即您可以选择根元素（必须始终存在于 DOM 中的元素），这可以让您的代码执行得更快。

jQuery 1.7+：

```
$(document).on("pageinit", "#Page1", function () {
    $(this).find("#selectId").val("1").selectmenu("refresh", true);
}); 
```

文档：[http ://api.jquery.com/on](http://api.jquery.com/on)

jQuery 1.4.2+

```
$(document).delegate("#Page1", "pageinit", function () {
    $(this).find("#selectId").val("1").selectmenu("refresh", true);
}); 
```

文档：[http ://api.jquery.com/delegate](http://api.jquery.com/delegate)

*旁注*：如果您使用的是 jQuery 1.7+，`.delegate()`并且`.live()`只是使用新`.on()`方法的快捷方式。

**更新**

[这是与http://code.jquery.com/mobile/latest/jquery.mobile.js](http://code.jquery.com/mobile/latest/jquery.mobile.js)中的第 8107 行关联的代码块：

```
...
setButtonText: function() {
    var self = this,
        selected = this.selected(),
        text = this.placeholder,
        span = $( document.createElement( "span" ) );

    this.button.find( ".ui-btn-text" ).html(function() {
        if ( selected.length ) {
            text = selected.map(function() {
                return $( this ).text();
            }).get().join( ", " );
        } else {
            text = self.placeholder;
        }

        // TODO possibly aggregate multiple select option classes
        return span.text( text )
            .addClass( self.select.attr( "class" ) )//line 8107 right here
            .addClass( selected.attr( "class" ) );
    });
},
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:57:40.993

想通了，自己的错。在以下场景中，假设您正在尝试设置选项中不存在的值...

```
<div id="Page1">
<select id="selectId">
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
</select>
</div>
...

$("#Page1").live('pageinit', function () {

$("#selectId").val("notHere");
  $("#selectId").selectmenu("refresh", true);
}); 
```

jquery 在这种情况下会中断。经验教训，在运行“刷新”之前始终检查选项白名单。

# ipad - 设置 MKMapView 的框架会导致 resignFirstResponder，但仅在 iPad 上的横向与拆分键盘

> ID：12115808
> 
> 赞同：0
> 
> 时间：2012-08-24T19:53:54.680
> 
> 标签：ipad, uikit, mkmapview, becomefirstresponder

这有点奇怪，我不确定到底发生了什么。我正在使用具有自定义注释的 MKMapView。在该注释中，我有一个可编辑的文本字段。当用户点击该字段时，键盘会出现，我通过移动/缩小我的地图视图并重新居中注释来响应它。一切都很好，除了 iPad 在横向模式下使用拆分键盘。只有在这种情况下，当我更改地图视图的框架时，它会在我的文本字段上调用“resignFirstResponder”并开始在屏幕外设置键盘动画。当它被移出屏幕时，我的代码通过移动/扩展我的地图视图来填充空间来响应它。然后，我的文本字段再次收到消息`becomeFirstResponder`。我检查了调用堆栈，这来自：`[UIView(Hierarchy) deferredBecomeFirstResponder]`. 键盘重新启动，我再次响应，循环继续：上 -> 下 -> 上 -> 下 -> 上 -> 下.....不断。这`resignFirstResponder`肯定来自设置我的地图视图的框架。如果我在我的文本字段上设置一个中断`resignFirstResponder`并检查调用堆栈，则上一个调用是我设置地图视图框架。此外，如果我在关闭键盘时中断了响应键盘的代码，我会在设置地图视图框架后立即注意到堆栈上的这些调用：

```
#6  0x001264cf in -[CTView resignFirstResponder]
#7  0x00e3bed7 in -[UIView setUserInteractionEnabled:] ()
#8  0x00710020 in ___lldb_unnamed_function213$$MapKit ()
#9  0x00714c14 in ___lldb_unnamed_function326$$MapKit ()
#10 0x00716f82 in ___lldb_unnamed_function361$$MapKit ()
#11 0x007168c4 in ___lldb_unnamed_function359$$MapKit ()
#12 0x00716068 in ___lldb_unnamed_function344$$MapKit ()
#13 0x00715c5c in ___lldb_unnamed_function343$$MapKit ()
#14 0x007198d0 in ___lldb_unnamed_function385$$MapKit ()
#15 0x0071a1ad in ___lldb_unnamed_function392$$MapKit ()
#16 0x0071a417 in ___lldb_unnamed_function396$$MapKit ()
#17 0x00711074 in ___lldb_unnamed_function255$$MapKit () 
```

我可以通过不调整地图视图的大小来解决这个问题。如果我不这样做，则循环永远不会启动。相反，如果我将地图视图放在容器视图中，`clipToBounds = YES`在容器视图上设置并且地图视图上没有自动调整大小，我可以调整容器视图的大小并使地图视图保持相同的大小......问题是它解决方法。如果用户旋转 iPad，我需要更改地图视图的大小，但这将启动这个丑陋的循环。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:46:09.953

在调整大小期间， `MKMapView` 可能会计算出注释的位置在屏幕外并转储或标记`MKAnnotationView`包含`UITextField`当前第一响应者的位置。这会导致`UITextField`被`ResignFirstResponder`反对。调整大小后，UIKit 决定`UITextField`仍然应该是第一响应者。也许`UITextField`仍然有*isFirstResponder == YES*因为这个特定的动画系列是 UIKit 不能很好处理的边缘情况。然后 UIKit 会显示键盘，触发你的代码，然后不断地运行。

您是否尝试过使用`UITextField`继承自的方法`UIResponder`？也许在调整大小动画期间设置*canResignFirstResponder == NO*？

或者，如果这是由不应显示的`MKMapView`计算触发的，您是否尝试过设置动画以使注释永远不会被计算为超出可见范围？`MKAnnotationView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:33:29.417

所以最后我能想到的唯一解决方案是将文本字段作为 MKMapView 的子视图删除并将其放在 MKMapView 的超级视图中。据我所知，让 MKMapView 的任何子视图成为第一响应者并不是一个好主意。MKMapView 倾向于“窃取”帧更改的第一响应者状态。如果您响应 UIKeyboardNotifications，这可能会导致奇怪的响应周期。

Removing the text field from the Map View also ended up being a little better UI experience anyway. By animating the change, the user experienced the shift from "I am manipulating this map" to "I am editing this text field" much more definitely. Disabling the map during the editing also reinforces this. It took a little more work, but in the end proved to be valuable.

# url - 接受上下文根 Websphere 6.1 中的任何 URL

> ID：12115811
> 
> 赞同：0
> 
> 时间：2012-08-24T19:54:30.187
> 
> 标签：url, websphere-6.1, contextpath

我目前正在尝试为我的公司开发单点登录功能。我们有一堆应用程序，每个应用程序都驻留在自己的应用程序服务器和/或 EAR 中。我们甚至会跨平台，因为并非所有 Web 应用程序都使用 WebSphere。

Websphere 中是否有一种方法允许用户在上下文根中键入任何地址，并且如果该页面不存在，则执行一个公共页面？

例如：

```
http://myhost/MyApp/login.jsp 
```

这将存在并且转到该地址将带您到 login.jsp 页面

```
http://myhost/MyApp/foo.jsp 
```

这将不存在，但转到它或任何其他不存在的页面将转到 foobar.jsp。用户仍应看到

```
http://myhost/MyApp/foo.jsp 
```

在 URL 中，但执行 foobar.jsp 页面。

是否存在这种类型的功能，如果存在，您如何提供示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:45:33.827

mod_rewrite 是让用户看到一个 URL 但服务器以不同的内容响应的第一件事。您可能必须列出要忽略的重写模式的所有有效 URL。

仅使用 WebSphere，您可以使用自定义过滤器来检测所有已知的 URL，但我不知道您将如何（轻松有效地）发送不同 JSP 的结果。我很确定这不是一些内置的、简单的功能。这部分行为有多重要？没有它，过滤器加重定向将满足在人们访问未知页面时将他们发送到公共页面的基本要求。

另一个可能为您提供一些有用功能的框架是 Spring Security。

最后，从哲学上考虑您是否真的希望不存在的 URL 像它们确实存在一样响应。这不是一个正常的 HTTP 模式。

# maven - Maven 生成资源插件

> ID：12115821
> 
> 赞同：4
> 
> 时间：2012-08-24T19:55:28.780
> 
> 标签：maven, resources, installation, pom.xml

我希望能够添加一个 generate-resources 插件，例如它在我每次运行安装（在编译步骤）时执行，所以我不必输入：

```
generate-sources install 
```

如何在我的 POM 文件中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:10:37.277

您不需要“生成资源”位 - 此阶段在生命周期中的安装阶段之前，因此只需运行

```
mvn install 
```

应该包括生成资源阶段。有关详细信息，请参阅[http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)。

如果你有一个特定的插件要绑定到安装阶段，你可以在 pom.xml 的 plugin 部分中指定它。该链接也向您展示了如何做到这一点。

# ember.js - 这是一个 emberjs 错误吗，因为一个完全空的 jsfiddle 会引发把手错误

> ID：12115823
> 
> 赞同：1
> 
> 时间：2012-08-24T19:55:34.380
> 
> 标签：ember.js, handlebars.js

这是 emberjs 中的错误吗？这个完全空的小提琴： http: [//jsfiddle.net/s5md8/1/](http://jsfiddle.net/s5md8/1/)返回“Ember Handlebars 需要 Handlebars 1.0.beta.5 或更高版本”但在管理资源下它具有最新的车把 1.0.beta.6 和最新的 emberjs。从它们的顺序来看，handlebars.js 是第一位的，然后是 emberjs 。

**更新**

现在正在加载 Emberjs - [http://imgur.com/TKb7F](http://imgur.com/TKb7F)并且需要 Handlebars 的错误仍在发生[http://imgur.com/WxyBU](http://imgur.com/WxyBU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:15:41.347

经过多次头撞后，我发现早期的异常导致了由 chrome 开发人员工具自动设置的断点。一旦我删除了断点，它就会按预期工作。

# python - 仅计算 TIFF 的核心图像数据的哈希值

> ID：12115824
> 
> 赞同：1
> 
> 时间：2012-08-24T19:55:48.047
> 
> 标签：python, tiff

使用 Python，如何计算 TIFF 图像的 md5 哈希，不包括所有元数据？

使用 JPG，我会执行以下操作：

```
def jpeg(fh):
  hash = hashlib.md5()
  assert fh.read(2) == "\xff\xd8"
  while True:
      marker,length = struct.unpack(">2H", fh.read(4))
      assert marker & 0xff00 == 0xff00
      if marker == 0xFFDA: # Start of stream
          hash.update(fh.read())
          break
      else:
          fh.seek(length-2, os.SEEK_CUR)
  print "Hash: %r" % hash.hexdigest()

>> jpeg(file("test.jpg"))
>> Hash: 'debb4956941795d6ef48717e4c9cc433' 
```

不知道如何将其扩展到 TIFF 图像。

TIFF 似乎更棘手，因为图像中元数据的位置可以改变（它并不总是在开头或结尾）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:31:46.783

使用 Python 图像库中的[图像](http://www.pythonware.com/library/pil/handbook/image.htm)模块。该类的`tostring`方法`Image`将像素数据作为字符串返回。

```
import Image # Python Imaging Library
import hashlib

def hashtiff(fn):
    tf = Image.open(fn)
    return hashlib.md5(tf.tostring()).hexdigest() 
```

MD5作为散列算法具有[已知的弱点。](http://en.wikipedia.org/wiki/MD5)使用例如 SHA-256 或 SHA-512被[认为](http://csrc.nist.gov/groups/ST/toolkit/secure_hashing.html) [更好。](https://stackoverflow.com/questions/2549988/whats-the-recommended-hashing-algorithm-to-use-for-stored-passwords)

# javascript - 了解 Thrift Javascript 对象

> ID：12115827
> 
> 赞同：1
> 
> 时间：2012-08-24T19:56:18.157
> 
> 标签：javascript, thrift

我试图了解 Thrift 为 javascript 自动生成的 .read(input) 和 .write(output) 函数。

我找不到任何关于如何与这些作为 Javascript 对象的一部分的函数进行交互的文档。

链接或描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:50:59.547

因此，对于您在 .thrift 文件中定义的每个数据结构，Apache Thrift 将为您生成一个包含读取和写入方法的类，用于对该类型的对象进行序列化（写入）和反序列化（读取）。

现在 read 和 write 方法都将协议作为参数，并且在给定传输的情况下创建协议。您可以在以下链接中找到在 Thrift 上下文中协议和传输的含义：

[http://anomalizer.net/statistically-incorrect/2010/11/introduction-thrift-serialization/](http://anomalizer.net/statistically-incorrect/2010/11/introduction-thrift-serialization/)

维基百科上 Thrift 层的图片和描述可能有助于理解数据如何在不同层之间传递。

现在我还没有在 Javascript 中尝试过这个，但是 thrift 支持的不同语言的库看起来非常相似。所以在 Python 中，这就是读写方法的使用方式：

```
//SERIALIZATION:
transportOut = TTransport.TMemoryBuffer()
protocolOut = TBinaryProtocol.TBinaryProtocol(transportOut)
work.write(protocolOut)
bytes = transportOut.getvalue() # the string 'bytes' can be written out to disk 
                            #  to be read in at a different time

// DESERIALIZATION
transportIn = TTransport.TMemoryBuffer(bytes)
protocolIn = TBinaryProtocol.TBinaryProtocol(transportIn)
moreWork = Work()
moreWork.read(protocolIn) 
```

高温高压

# c++ - 使 XML 数据显示在来自 C++ 的 Blackberry 10 Cascades QML 的 listItemComponents 中

> ID：12115828
> 
> 赞同：0
> 
> 时间：2012-08-24T19:56:20.830
> 
> 标签：c++, xml, qt, qml, blackberry-10

我正在使用 Blackberry 10 Cascades、QML 和 C++ QT，我正在尝试从我编写的一个小型 php web 服务中获取一些 XML 数据，以加载到我正在使用的 Blackberry 10 Dev Alpha Simulator 的列表中 - 但它是不工作。

那就是xml数据没有加载到QML文档的ListView中，显示在黑莓模拟器的屏幕上。我需要帮助才能完成这项工作。

我从一个涉及常规 http 请求的示例开始，并对其进行了修改以使其适合我的目的（这是一个 http post 请求）。（此代码在文本字段中获取世代编号 (1-5)）并打印出该世代的口袋妖怪游戏颜色列表）。

这是我开始使用的 QML 文件：

```
import bb.cascades 1.0

TabbedPane {
    activePane: Page {
        actions: [
            // An action item that calls the C++ function that retrieves
            // the contact list
            ActionItem {
                title: "Refresh"
                onTriggered: app.initiateRequest()
            }
        ]       
        content: Container {
            layout: DockLayout {}

            // A list that has two list item components, one for a header
            // and one for contact names. The list has an object name so
            // that we can set the data model from C++.
            ListView {
                objectName: "list"
                layout: FlowListLayout {
                    topPadding: 6
                    rightPadding: 6
                    bottomPadding: 6
                    leftPadding: 6
                }
                // A simple data model is loaded with just a header.
                // This will be replaced when we load the real one
                // from C++.
                dataModel: XmlDataModel {
                    source: "model.xml"
                }

                listItemComponents: [
                    // The header list item displays a title along with a counter
                    // that displays the number of children
                    ListItemComponent {
                        type: "header"
                        HeaderListItem {
                            topMargin: 8
                            title: ListItemData.title
                            subtitle: (ListItem.initialized ?
                                ListItem.view.dataModel
                                    .childCount(ListItem.indexPath) : 0);
                        }
                    },
                    // The contact list item displays the name of the contact
                    ListItemComponent {
                        type: "contacts"
                        StandardListItem {
                            title: ListItemData.title
                        }
                    }
                ]
            }
            // The activity indicator has an object name set so that
            // we can start and stop it from C++
            ActivityIndicator {
                objectName: "indicator"
                layoutProperties: DockLayoutProperties {
                    verticalAlignment: VerticalAlignment.Fill
                    horizontalAlignment: HorizontalAlignment.Fill
                }
            }
        } // Ends the root Container
    } // Ends the Page
} // Ends the TabbedPane 
```

这是我的 QML 文件：

```
import bb.cascades 1.0

TabbedPane {
    activePane: Page {
        actions: [
            // An action item that calls the C++ function that retrieves
            // the contact list
            ActionItem {
                title: "Refresh"
                onTriggered: app.initiateRequest(txtGen.text)
            }
        ]       
        content: Container {
            layout: StackLayout {}

            Button {
                text: "Get Games"
                onClicked: app.initiateRequest(txtGen.text)
            }

            Label {
                text: "Enter Generation (1-5)"
            }

            TextField {
                id: txtGen
            }

            // A list that has two list item components, one for a header
            // and one for contact names. The list has an object name so
            // that we can set the data model from C++.
            ListView {
                objectName: "list"
                layout: FlowListLayout {
                    topPadding: 6
                    rightPadding: 6
                    bottomPadding: 6
                    leftPadding: 6
                }
                // A simple data model is loaded with just a header.
                // This will be replaced when we load the real one
                // from C++.
                dataModel: XmlDataModel {
                    source: "model.xml"
                }

                listItemComponents: [
                    // The header list item displays a title along with a counter
                    // that displays the number of children
                    ListItemComponent {
                        type: "games"
                        HeaderListItem {
                            topMargin: 8
                            title: ListItemData.generation
                            subtitle: (ListItem.initialized ?
                                ListItem.view.dataModel
                                    .childCount(ListItem.indexPath) : 0);
                        }
                    },
                    // The contact list item displays the name of the contact
                    ListItemComponent {
                        type: "game"
                        StandardListItem {
                            title: ListItemData.title
                        }
                    }
                ]
            }
            // The activity indicator has an object name set so that
            // we can start and stop it from C++
            ActivityIndicator {
                objectName: "indicator"
                layoutProperties: DockLayoutProperties {
                    verticalAlignment: VerticalAlignment.Fill
                    horizontalAlignment: HorizontalAlignment.Fill
                }
            }
        } // Ends the root Container
    } // Ends the Page
} // Ends the TabbedPane 
```

我的项目目录的 assets/model.xml 下还有一个 xml 文件夹，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games>
  </games>
</xml> 
```

另外，这是我编写的 App.cpp 代码：

```
#include "app.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <bb/cascades/Button>
#include <bb/cascades/TextField>
#include <QDir>

using namespace bb::cascades;

App::App()
{
    // Load the QML document and retrieve the root node
    QmlDocument *qml = QmlDocument::create("main.qml");
    mRoot = qml->createRootNode<AbstractPane>();

    // Retrieve the activity indicator from QML so that we can start
    // and stop it from C++
    mActivityIndicator = mRoot->findChild<ActivityIndicator*>("indicator");

    // Retrieve the list so we can set the data model on it once
    // we retrieve it
    mListView = mRoot->findChild<ListView*>("list");

    //mTextField = mRoot->findChild<TextField*>("textField");

    //qDebug() << "Generation: " << mTextField->text();

    // Expose this class to QML so that we can call its functions from there
    qml->setContextProperty("app", this);

    // Create a network access manager and connect a custom slot to its
    // finished signal
    mNetworkAccessManager = new QNetworkAccessManager(this);

    Q_ASSERT(connect(mNetworkAccessManager, SIGNAL(finished(QNetworkReply*)), this, SLOT(requestFinished(QNetworkReply*))));

    // Displays a warning message if there's an issue connecting the signal
    // and slot. This is a good practice with signals and slots as it can
    // be easier to mistype a slot or signal definition
    //Q_ASSERT(result);
    //Q_UNUSED(result);

    // Create a file in the application's data directory
    mFile = new QFile("data/model.xml");

    // Set the scene using the root node
    Application::setScene(mRoot);
}

void App::initiateRequest(QString text)
{
        // Start the activity indicator
    mActivityIndicator->start();

    // Create and send the network request
    QNetworkRequest request = QNetworkRequest();
    request.setUrl(QUrl("http://192.168.1.109/TESTWEBSERVICE/MAKEXML.php")); //https://developer.blackberry.com/cascades/files/documentation/device_platform/networking/model.xml"));
    request.setHeader(QNetworkRequest::ContentTypeHeader, "application/x-www-form-urlencoded");

    QByteArray bytes;
    QUrl params;

    params.addQueryItem(QString::fromStdString("generation"), text);

    bytes = params.encodedQuery();
    mNetworkAccessManager->post(request, bytes);
}

void App::requestFinished(QNetworkReply* reply)
{
    // Check the network reply for errors
    if (reply->error() == QNetworkReply::NoError) {

        // Open the file and print an error if the file cannot be opened

        if (!mFile->open(QIODevice::ReadWrite))
        {
            qDebug() << "\n Failed to open file";
            return;
        }

        mFile->resize(0);

        // Write to the file using the reply data and close the file
        QByteArray xml = reply->readAll();
        mFile->write(xml);
        qDebug() << xml;

        mFile->flush();
        mFile->close();

        // Create the data model using the contents of the file. The
        // location of the file is relative to the assets directory.
        XmlDataModel *dataModel = new XmlDataModel();

        dataModel->setSource(QUrl("../../../data/model.xml"));

        // Set the new data model on the list and stop the activity indicator
        mListView->setDataModel(dataModel);
        mActivityIndicator->stop();
    }
    else
    {
        qDebug() << "\n Problem with the network";
        qDebug() << "\n" << reply->errorString();
    }
} 
```

这是我的 App.h 文件：

```
#ifndef APP_H
#define APP_H

#include <QObject>
#include <QFile>
#include <bb/cascades/ActivityIndicator>
#include <bb/cascades/ListView>
#include <bb/cascades/XMLDataModel>
#include <bb/cascades/AbstractPane>
#include <bb/cascades/TextField>

using namespace bb::cascades;

/*!
 * @brief Application GUI object
 */
class App : public QObject
{
    Q_OBJECT

public:
    /*!
     * Constructor.
     */
    App();
    /*!
     * Initiates the network request.
     */
    Q_INVOKABLE void initiateRequest(QString text);

private slots:
    /*!
     * Handles the network reply.
     */
    void requestFinished(QNetworkReply* reply);

private:
    AbstractPane *mRoot;
    ActivityIndicator *mActivityIndicator;
    ListView *mListView;
    TextField *mTextField;
    QNetworkAccessManager *mNetworkAccessManager;
    QFile *mFile;
    QString apiKey;
    QString apiString;
};

#endif // ifndef APP_H 
```

QDebug() 流打印出生成参数为 1 的以下内容：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="1">  
    <game title="green">green</game>
    <game title="red">red</game>
    <game title="blue">blue</game>
    <game title="yellow">yellow</game>  
  </games>
</xml>" 
```

对于生成参数为 2：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="2">  
    <game title="gold">gold</game>
    <game title="silver">silver</game>
    <game title="crystal">crystal</game>    
  </games>
</xml>" 
```

对于生成参数为 3：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="3">  
    <game title="ruby">ruby</game>
    <game title="sapphire">sapphire</game>
    <game title="emerald">emerald</game>    
  </games>
</xml>" 
```

对于 Generation 参数为 4：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="4">  
    <game title="perl">perl</game>
    <game title="diamond">diamond</game>
    <game title="platinum">platinum</game>  
  </games>
</xml>" 
```

对于 Generation 参数为 5：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="5">  
    <game title="black">black</game>
    <game title="white">white</game>
    <game title="black 2">black 2</game>
    <game title="white 2">white 2</game>    
  </games>
</xml>" 
```

对于其他任何事情，参数生成是 foo （foo 是占位符）：

```
"<?xml version="1.0" encoding="utf-8"?>
<xml>
  <games generation="foo">  
  </games>
</xml>" 
```

我不太确定，为什么这不起作用。我尝试四处寻找其他示例，看看是否可以使用它来弄清楚如何使我的代码正常工作，但这没有成功。

我知道这个问题很长，但我想提供尽可能多的关于我在做什么的细节，以获得最佳答案。话虽如此，我真的不认为我的 main.cpp 文件是相关的，所以我不会把它放在这里，除非有人要求查看它。

（我在我的 xml 代码中将 title 属性添加到我的游戏标签中，并在这些标签中放入与主要数据值相同的值，例如转动

```
<game>yellow</game> 
```

进入

```
<game title="yellow">yellow</game> 
```

在试图让它在没有 title 属性的情况下使用前者之后，因为我认为这可能会解决我的问题，即使它有点 hackish，但它没有。理想情况下，我想弄清楚如何让它以两种方式工作，在游戏标签中使用和不使用 title 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:52:08.820

我发现了问题。我不得不从我的 php webservice 中删除 xml 标头代码，

```
header('Content-type: text/xml');
"<?xml version="1.0" encoding="utf-8"?> 
```

我不得不从我的 data/model.xml 文件中删除它：

```
<?xml version="1.0" encoding="utf-8"?> 
```

并且在文件中只有以下代码：

```
<xml>
  <games>
  </games>
</xml> 
```

我仍然不确定如何获取 QML 文档中标签之间的数据。现在我在标签中使用带有“title”属性的 ListItemData.title，但我想要开始和结束游戏标签之间的内容。

# c - 使用 zlib 使用 zpipe.c 示例创建 gzip 文件

> ID：12115829
> 
> 赞同：4
> 
> 时间：2012-08-24T19:56:26.820
> 
> 标签：c, gzip, zlib

全部，

我只是试图让 zpipe 演示使用 dev-c++ 工作，其中我导入了所有 zlib 代码并使用 zpipe.c 作为示例。一切都编译并运行。如果我尝试使用注释掉的 deflateInit2 调用创建一个 gzip 文件，它会创建现在的错误，但在使用 7zip 解压缩时会损坏。如果我使用标准的 zlib 头文件来创建文件，当我使用相应的调用进行膨胀时，它会返回 -3/Z_DATA_ERROR，表明我的默认数据已损坏。一切都表明定义中有问题，但它几乎就是这个例子。

有任何想法吗？？提前非常感谢！

```
int main(int argc, char **argv)
{
     int ret;
     FILE *source;
     FILE *zip;
     FILE *zipped;
     FILE *back;

     source = fopen ("C:\\Users\\schmoudm\\Pictures\\caela.jpg", "r");
     zip = fopen ("C:\\Core\\RD\\test.gz", "w");

     printf ("calling def \n");
     ret = def(source, zip, Z_DEFAULT_COMPRESSION);
     printf("def return: %i \n", ret);
     fclose(source);
     fclose(zip);

     if (ret == 0) {
        printf ("setting up inf \n");
        zipped = fopen ("C:\\Core\\RD\\test.gz", "r"); 
        back = fopen ("C:\\Core\\RD\\zlibout.txt", "w"); 
        printf ("calling inf \n");
        ret = inf(zipped, back); 
        printf("inf return: %i \n", ret);  
        zerr(ret);
     }

    fclose(source);
    fclose(zip);

    printf("DONE!");
    system("PAUSE");
    return 0;
}

int def(FILE *source, FILE *dest, int level)
{
    int ret, flush;
    unsigned have;
    z_stream strm;
    unsigned char in[CHUNK];
    unsigned char out[CHUNK];

    /* allocate deflate state */
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;

    ret = deflateInit(&strm, Z_DEFAULT_COMPRESSION);
    //ret = deflateInit2(&strm, Z_DEFAULT_COMPRESSION, Z_DEFLATED, (15+16), 8,       Z_DEFAULT_STRATEGY);
    if (ret != Z_OK)
        return ret;

    /* compress until end of file */
    do {
        strm.avail_in = fread(in, 1, CHUNK, source);
        printf("available in: %u \n", strm.avail_in);  
        if (ferror(source)) {
            (void)deflateEnd(&strm);
            return Z_ERRNO;
        }
        flush = feof(source) ? Z_FINISH : Z_NO_FLUSH;
        strm.next_in = in;

        /* run deflate() on input until output buffer not full, finish
           compression if all of source has been read in */
        do {
            strm.avail_out = CHUNK;
            strm.next_out = out;
            ret = deflate(&strm, flush);    /* no bad return value */
            assert(ret != Z_STREAM_ERROR);  /* state not clobbered */
            have = CHUNK - strm.avail_out;
            if (fwrite(out, 1, have, dest) != have || ferror(dest)) {
                (void)deflateEnd(&strm);
                return Z_ERRNO;
            }
        } while (strm.avail_out == 0);
        assert(strm.avail_in == 0);     /* all input will be used */

        /* done when last data in file processed */
    } while (flush != Z_FINISH);
    assert(ret == Z_STREAM_END);        /* stream will be complete */

    /* clean up and return */
    (void)deflateEnd(&strm);
    return Z_OK;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T23:36:03.777

> 但它几乎就是这个例子。

唉，你从[`zpipe.c`](https://github.com/madler/zlib/blob/master/examples/zpipe.c).

```
#if defined(MSDOS) || defined(OS2) || defined(WIN32) || defined(__CYGWIN__)
#  include <fcntl.h>
#  include <io.h>
#  define SET_BINARY_MODE(file) setmode(fileno(file), O_BINARY)
#else
#  define SET_BINARY_MODE(file)
#endif 
```

和

```
/* avoid end-of-line conversions */
SET_BINARY_MODE(stdin);
SET_BINARY_MODE(stdout); 
```

So in your code you need to do `SET_BINARY_MODE(source)` and `SET_BINARY_MODE(zip)`.

Or you need to use the `"b"` option in both `fopen()`'s.

# matlab - Matlab：如何解决曲线拟合

> ID：12115831
> 
> 赞同：0
> 
> 时间：2012-08-24T19:56:35.260
> 
> 标签：matlab, curve-fitting

我尝试使用函数 lsqcurvefit 来查找[Bass Diffusion Model](http://faculty.washington.edu/jdods/pdf/MktgTool_Bass.pdf)的 p 和 q 参数。

一开始我是这样写 Bass 函数的：

```
function F = Bass(x, cummulativeAdoptersBefore)
m = 1500000;

F = x(1)*m + (x(2)-x(1))*cummulativeAdoptersBefore + x(2)/m*cummulativeAdoptersBefore.^2;
end 
```

*x(1) = p x(2) = q*

然后是 FitBass：

```
function [ x, resnorm ] = FitBass(priorCumulativeAdopters, currentAdoptersCount)

    xData = priorCumulativeAdopters;
yData = currentAdoptersCount;
x0 = [0.08; 0.41];
[x, resnorm] = lsqcurvefit(@Bass, x0, xData, yData);
end 
```

但是当比较结果 F = Bass(x, cummulativeAdoptersBefore) 时，其中 x 是匹配参数的向量，yData 是实际数据，我注意到 F（下曲线 - x ~ 1）甚至与 yData 不相似：

是否有人知道这里可能出了什么问题，或者在这种情况下（以及一般情况下）如何找到参数 x 以获得令人满意的拟合？

谢谢！

![在此处输入图像描述](../Images/81b17216747464ea5f0d32a115967ef2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:23:18.350

看在上帝的份上，为什么不使用简单的线性回归呢？:) 对此进行非线性拟合就像使用 Mack 卡车将豌豆带到波士顿。这是一个简单的二次多项式。

```
n(t) = pM + (q-p) N(t) -q/M (N(t))^2 
```

结合条款。

```
n(t) = p*(M - N(t)) + q*(N(t)-(N(t))^2/M) 
```

看到 p 和 q 是线性可估计系数。假设您的数据属于一对列向量，请像这样求解 p 和 q...

```
N = priorCumulativeAdopters;
m = 1500000;
pq = [M-N, N - N.^2/M]\currentAdoptersCount; 
```

pq 将是长度为 2 的列向量。

话虽如此，预计会看到潜在的数值问题，因为似乎存在缩放问题。

M 是 1.5e6，priorCumulativeAdopters 的向量似乎在 0 到 16 的区间内缩放。看看当你从 M 中减去 N 时会发生什么。所以如果有问题不要惊讶，你跑回来告诉我们有问题。我已经预料到你搞砸了。我猜这就是你之前身体不好的原因。

# javascript - 向引导下拉菜单添加幻灯片效果

> ID：12115833
> 
> 赞同：88
> 
> 时间：2012-08-24T19:56:53.867
> 
> 标签：javascript, drop-down-menu, twitter-bootstrap

我正在使用[bootstrap](http://twitter.github.com/bootstrap/index.html)，我想将动画添加到下拉列表中。我想为它添加一个动画，离开它时向下滑动并向后滑动。我怎么能这样做？

我尝试过的事情：

像这样更改 Js 下拉文件：

[如何让 Bootstrap 的导航下拉菜单平滑地上下滑动？](https://stackoverflow.com/questions/11112267/how-can-i-make-the-dropdown-on-boostrap-navigation-to-slide-down-and-up-smoothly)

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-10-12T21:01:34.100

如果您更新到 Bootstrap 3 (BS3)，他们会公开许多 Javascript 事件，这些事件可以很好地将您想要的功能绑定到其中。在 BS3 中，此代码将为您的所有下拉菜单提供您正在寻找的动画效果：

```
 // Add slideDown animation to Bootstrap dropdown when expanding.
  $('.dropdown').on('show.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
  });

  // Add slideUp animation to Bootstrap dropdown when collapsing.
  $('.dropdown').on('hide.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideUp();
  }); 
```

[您可以在此处](http://getbootstrap.com/javascript/#js-events)阅读有关 BS3 事件的信息，尤其是有关下拉事件的[信息](http://getbootstrap.com/javascript/#dropdowns)。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2015-08-26T17:31:42.923

也可以避免使用 JavaScript 来实现下拉效果，并使用 CSS3 过渡，通过将这段代码添加到您的样式中：

```
.dropdown .dropdown-menu {
    -webkit-transition: all 0.3s;
    -moz-transition: all 0.3s;
    -ms-transition: all 0.3s;
    -o-transition: all 0.3s;
    transition: all 0.3s;

    max-height: 0;
    display: block;
    overflow: hidden;
    opacity: 0;
}

.dropdown.open .dropdown-menu { /* For Bootstrap 4, use .dropdown.show instead of .dropdown.open */
    max-height: 300px;
    opacity: 1;
} 
```

这种方式的唯一问题是您应该手动指定最大高度。如果你设置一个很大的值，你的动画会很快。

如果您知道下拉菜单的大致高度，它就像一个魅力，否则您仍然可以使用 javascript 设置精确的最大高度值。

这是一个小例子：[DEMO](https://jsfiddle.net/pLrLLgoj/123/)

* * *

**！此解决方案中存在填充小错误，请查看 Jacob Stamm 的解决方案评论。**

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-03T02:36:10.213

我正在做类似的事情，但悬停而不是点击..这是我正在使用的代码，你可以稍微调整一下让它在点击时工作

```
$('.navbar .dropdown').hover(function() {
  $(this).find('.dropdown-menu').first().stop(true, true).delay(250).slideDown();
}, function() {
  $(this).find('.dropdown-menu').first().stop(true, true).delay(100).slideUp()
}); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-03-10T14:54:26.853

我不知道我是否可以碰到这个线程，但我想出了一个快速修复开放类删除太快时发生的视觉错误的方法。基本上，它只是在 slideUp 事件中添加一个 OnComplete 函数并重置所有活动的类和属性。是这样的：

结果如下：[Bootply 示例](http://www.bootply.com/ZFpB6GNtb6#)

Javascript/Jquery：

```
$(function(){
    // ADD SLIDEDOWN ANIMATION TO DROPDOWN //
    $('.dropdown').on('show.bs.dropdown', function(e){
        $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
    });

    // ADD SLIDEUP ANIMATION TO DROPDOWN //
    $('.dropdown').on('hide.bs.dropdown', function(e){
        e.preventDefault();
        $(this).find('.dropdown-menu').first().stop(true, true).slideUp(400, function(){
            //On Complete, we reset all active dropdown classes and attributes
            //This fixes the visual bug associated with the open class being removed too fast
            $('.dropdown').removeClass('show');
            $('.dropdown-menu').removeClass('show');
            $('.dropdown').find('.dropdown-toggle').attr('aria-expanded','false');
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-06-22T19:18:48.067

这是我的幻灯片和淡入淡出效果的解决方案：

```
 // Add slideup & fadein animation to dropdown
   $('.dropdown').on('show.bs.dropdown', function(e){
      var $dropdown = $(this).find('.dropdown-menu');
      var orig_margin_top = parseInt($dropdown.css('margin-top'));
      $dropdown.css({'margin-top': (orig_margin_top + 10) + 'px', opacity: 0}).animate({'margin-top': orig_margin_top + 'px', opacity: 1}, 300, function(){
         $(this).css({'margin-top':''});
      });
   });
   // Add slidedown & fadeout animation to dropdown
   $('.dropdown').on('hide.bs.dropdown', function(e){
      var $dropdown = $(this).find('.dropdown-menu');
      var orig_margin_top = parseInt($dropdown.css('margin-top'));
      $dropdown.css({'margin-top': orig_margin_top + 'px', opacity: 1, display: 'block'}).animate({'margin-top': (orig_margin_top + 10) + 'px', opacity: 0}, 300, function(){
         $(this).css({'margin-top':'', display:''});
      });
   }); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-05-04T19:25:24.370

点击它可以使用下面的代码完成

```
$('.dropdown-toggle').click(function() {
  $(this).next('.dropdown-menu').slideToggle(500);
}); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-08-25T16:00:07.117

**更新 2018 引导程序 4**

在 Boostrap 4 中，`.open`该类已被替换为`.show`. 我想只使用 CSS 转换来实现这一点，而不需要额外的 JS 或 jQuery ......

```
.show > .dropdown-menu {
  max-height: 900px;
  visibility: visible;
}

.dropdown-menu {
  display: block;
  max-height: 0;
  visibility: hidden;
  transition: all 0.5s ease-in-out;
  overflow: hidden;
} 
```

演示：[https ://www.codeply.com/go/3i8LzYVfMF](https://www.codeply.com/go/3i8LzYVfMF)

注意：`max-height`可以设置为足以容纳下拉内容的任何大值。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-05-10T23:16:41.197

我正在使用上面的代码，但我已经通过 slideToggle 更改了延迟效果。

它通过动画在悬停时滑动下拉菜单。

```
$('.navbar .dropdown').hover(function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideToggle(400);
    }, function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideToggle(400)
    }); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-01-04T10:07:33.813

扩展答案，是我的第一个答案，如果之前没有足够的细节，请原谅。

对于 Bootstrap 3.x，我个人更喜欢 CSS 动画，并且我一直在使用 animate.css 和 Bootstrap Dropdown Javascript Hooks。尽管它可能不会产生您所追求的确切效果，但它是一种非常灵活的方法。

**第 1 步：**使用 head 标签将 animate.css 添加到您的页面：

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.4.0/animate.min.css"> 
```

**第 2 步：**在触发器上使用标准 Bootstrap HTML：

```
<div class="dropdown">
  <button type="button" data-toggle="dropdown">Dropdown trigger</button>

  <ul class="dropdown-menu">
    ...
  </ul>
</div> 
```

**步骤 3：**然后在 dropdrop-menu 元素中添加 2 个自定义数据属性；data-dropdown-in 用于 in 动画和 data-dropdown-out 用于 out 动画。这些可以是任何 animate.css 效果，例如 fadeIn 或 fadeOut

```
<ul class="dropdown-menu" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
......
</ul> 
```

**第 4 步：**接下来添加以下 Javascript 以读取 data-dropdown-in/out 数据属性并对 Bootstrap Javascript API 挂钩/事件（[http://getbootstrap.com/javascript/#dropdowns-events](http://getbootstrap.com/javascript/#dropdowns-events)）做出反应：

```
var dropdownSelectors = $('.dropdown, .dropup');

// Custom function to read dropdown data
// =========================
function dropdownEffectData(target) {
  // @todo - page level global?
  var effectInDefault = null,
      effectOutDefault = null;
  var dropdown = $(target),
      dropdownMenu = $('.dropdown-menu', target);
  var parentUl = dropdown.parents('ul.nav'); 

  // If parent is ul.nav allow global effect settings
  if (parentUl.size() > 0) {
    effectInDefault = parentUl.data('dropdown-in') || null;
    effectOutDefault = parentUl.data('dropdown-out') || null;
  }

  return {
    target:       target,
    dropdown:     dropdown,
    dropdownMenu: dropdownMenu,
    effectIn:     dropdownMenu.data('dropdown-in') || effectInDefault,
    effectOut:    dropdownMenu.data('dropdown-out') || effectOutDefault,  
  };
}

// Custom function to start effect (in or out)
// =========================
function dropdownEffectStart(data, effectToStart) {
  if (effectToStart) {
    data.dropdown.addClass('dropdown-animating');
    data.dropdownMenu.addClass('animated');
    data.dropdownMenu.addClass(effectToStart);    
  }
}

// Custom function to read when animation is over
// =========================
function dropdownEffectEnd(data, callbackFunc) {
  var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
  data.dropdown.one(animationEnd, function() {
    data.dropdown.removeClass('dropdown-animating');
    data.dropdownMenu.removeClass('animated');
    data.dropdownMenu.removeClass(data.effectIn);
    data.dropdownMenu.removeClass(data.effectOut);

    // Custom callback option, used to remove open class in out effect
    if(typeof callbackFunc == 'function'){
      callbackFunc();
    }
  });
}

// Bootstrap API hooks
// =========================
dropdownSelectors.on({
  "show.bs.dropdown": function () {
    // On show, start in effect
    var dropdown = dropdownEffectData(this);
    dropdownEffectStart(dropdown, dropdown.effectIn);
  },
  "shown.bs.dropdown": function () {
    // On shown, remove in effect once complete
    var dropdown = dropdownEffectData(this);
    if (dropdown.effectIn && dropdown.effectOut) {
      dropdownEffectEnd(dropdown, function() {}); 
    }
  },  
  "hide.bs.dropdown":  function(e) {
    // On hide, start out effect
    var dropdown = dropdownEffectData(this);
    if (dropdown.effectOut) {
      e.preventDefault();   
      dropdownEffectStart(dropdown, dropdown.effectOut);   
      dropdownEffectEnd(dropdown, function() {
        dropdown.dropdown.removeClass('open');
      }); 
    }    
  }, 
}); 
```

**第 5 步（可选）：**如果您想加快或更改动画，您可以使用 CSS 执行此操作，如下所示：

```
.dropdown-menu.animated {
  /* Speed up animations */
  -webkit-animation-duration: 0.55s;
  animation-duration: 0.55s;
  -webkit-animation-timing-function: ease;
  animation-timing-function: ease;
} 
```

写了一篇更详细的文章，如果有人感兴趣，可以下载：文章：[http ://bootbites.com/tutorials/bootstrap-dropdown-effects-animatecss](http://bootbites.com/tutorials/bootstrap-dropdown-effects-animatecss)

希望这会有所帮助，并且第二篇文章具有所需的详细程度，汤姆

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-10-03T19:44:58.837

# 介绍

截至撰写本文时，原始答案现在已有 8 年历史。我仍然觉得原始问题还没有适当的解决方案。

**从那时起， Bootstrap**已经走了很长一段路，现在是**4.5.2**。这个答案解决了这个版本。

# 到目前为止所有其他解决方案的问题

所有其他答案的问题是，当它们挂接到`show.bs.dropdown`/`hide.bs.dropdown`时，后续事件`shown.bs.dropdown`/`hidden.bs.dropdown`要么过早触发（动画仍在进行中），要么根本不触发，因为它们被抑制了（`e.preventDefault()`）。

# 干净的解决方案

由于Bootstraps类中[`show()`](https://github.com/twbs/bootstrap/blob/v4.5.2/js/src/dropdown.js#L129-L194)和的实现有一些相似之处，因此我在模仿原始行为时将它们组合在一起，并在和中添加了少量 QoL 辅助函数。以与 Bootstrap 相同的方式创建/事件。*然后在动画完成后*触发此事件- 正如您所期望的那样。[`hide()`](https://github.com/twbs/bootstrap/blob/v4.5.2/js/src/dropdown.js#L196-L221)`Dropdown``toggleDropdownWithAnimation()``showDropdownWithAnimation()``hideDropdownWithAnimation()`
`toggleDropdownWithAnimation()``shown.bs.dropdown``hidden.bs.dropdown`

 *```
/**
 * Toggle visibility of a dropdown with slideDown / slideUp animation.
 * @param {JQuery} $containerElement The outer dropdown container. This is the element with the .dropdown class.
 * @param {boolean} show Show (true) or hide (false) the dropdown menu.
 * @param {number} duration Duration of the animation in milliseconds
 */
function toggleDropdownWithAnimation($containerElement, show, duration = 300): void {
    // get the element that triggered the initial event
    const $toggleElement = $containerElement.find('.dropdown-toggle');
    // get the associated menu
    const $dropdownMenu = $containerElement.find('.dropdown-menu');
    // build jquery event for when the element has been completely shown
    const eventArgs = {relatedTarget: $toggleElement};
    const eventType = show ? 'shown' : 'hidden';
    const eventName = `${eventType}.bs.dropdown`;
    const jQueryEvent = $.Event(eventName, eventArgs);

    if (show) {
        // mimic bootstraps element manipulation
        $containerElement.addClass('show');
        $dropdownMenu.addClass('show');
        $toggleElement.attr('aria-expanded', 'true');
        // put focus on initial trigger element
        $toggleElement.trigger('focus');
        // start intended animation
        $dropdownMenu
            .stop() // stop any ongoing animation
            .hide() // hide element to fix initial state of element for slide down animation
            .slideDown(duration, () => {
            // fire 'shown' event
            $($toggleElement).trigger(jQueryEvent);
        });
    }
    else {
        // mimic bootstraps element manipulation
        $containerElement.removeClass('show');
        $dropdownMenu.removeClass('show');
        $toggleElement.attr('aria-expanded', 'false');
        // start intended animation
        $dropdownMenu
            .stop() // stop any ongoing animation
            .show() // show element to fix initial state of element for slide up animation
            .slideUp(duration, () => {

            // fire 'hidden' event
            $($toggleElement).trigger(jQueryEvent);
        });
    }
}

/**
 * Show a dropdown with slideDown animation.
 * @param {JQuery} $containerElement The outer dropdown container. This is the element with the .dropdown class.
 * @param {number} duration Duration of the animation in milliseconds
 */
function showDropdownWithAnimation($containerElement, duration = 300) {
    toggleDropdownWithAnimation($containerElement, true, duration);
}

/**
 * Hide a dropdown with a slideUp animation.
 * @param {JQuery} $containerElement The outer dropdown container. This is the element with the .dropdown class.
 * @param {number} duration Duration of the animation in milliseconds
 */
function hideDropdownWithAnimation($containerElement, duration = 300) {
    toggleDropdownWithAnimation($containerElement, false, duration);
} 
```

# 绑定事件监听器

现在我们已经编写了适当的回调来显示/隐藏带有动画的下拉菜单，让我们实际将它们绑定到正确的事件。

我在其他答案中经常看到的一个常见错误是将事件侦听器直接绑定到元素。虽然这适用于注册事件侦听器时存在的 DOM 元素，但它不会绑定到稍后添加的元素。

这就是为什么你通常最好直接绑定到`document`：

```
$(function () {

    /* Hook into the show event of a bootstrap dropdown */
    $(document).on('show.bs.dropdown', '.dropdown', function (e) {
        // prevent bootstrap from executing their event listener
        e.preventDefault();

        showDropdownWithAnimation($(this));
    });

    /* Hook into the hide event of a bootstrap dropdown */
    $(document).on('hide.bs.dropdown', '.dropdown', function (e) {
        // prevent bootstrap from executing their event listener
        e.preventDefault();

        hideDropdownWithAnimation($(this));
    });

}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-04-23T20:05:27.563

```
$('.navbar .dropdown').hover(function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
}, function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideUp();
}); 
```

如果您想在悬停时显示下拉菜单，则此代码有效。

我只是将&更改`.slideToggle`为，并删除了时间`.slideDown``.slideUp``(400)`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-26T13:22:36.487

这是一个很好的简单解决方案，使用`jQuery`效果很好：

```
$('.dropdown-toggle').click(function () {
    $(this).next('.dropdown-menu').slideToggle(300);
});

$('.dropdown-toggle').focusout(function () {
    $(this).next('.dropdown-menu').slideUp(300);
}) 
```

滑动动画切换发生在单击时，它总是在失去焦点时向后滑动。

将值更改`300`为您想要的任何值，数字越小动画越快。

**编辑：**

此解决方案仅适用于桌面视图。它需要进一步修改才能很好地显示在移动设备上。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-09-08T04:20:00.450

**引导程序 3 参考**

添加是因为我一直被此线程中的解决方案所吸引，并且每次都让我感到厌烦。

基本上 BS 下拉菜单会立即`.open`从父级中删除该类，因此向上滑动不起作用。

使用与 slideDown() 的其他解决方案相同的位；

```
// ADD SLIDEUP ANIMATION TO DROPDOWN //
$('.dropdown').on('hide.bs.dropdown', function(e){
  e.preventDefault();
  $(this).find('.dropdown-menu').first().stop(true, true).slideUp(300, function(){
    $(this).parent().removeClass('open');
  });
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-03-12T22:58:05.210

对于 Bootstrap 3，上述答案的这种变化使移动`slideUp()`动画更流畅；上面的答案有断断续续的动画，因为 Bootstrap 会立即从切换的父级中删除`.open`该类，因此此代码会恢复该类，直到`slideUp()`动画完成。

```
// Add animations to topnav dropdowns
// based on https://stackoverflow.com/a/19339162
// and https://stackoverflow.com/a/52231970

$('.dropdown')
  .on('show.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideDown(300);
  })
  .on('hide.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, false).slideUp(300, function() {
      $(this).parent().removeClass('open');
    });
  })
  .on('hidden.bs.dropdown', function() {
    $(this).addClass('open');
  }); 
```

主要区别：

*   在`hide.bs.dropdown`事件处理程序中，我将`.stop()`' 的默认值 ( `false`) 用作其第二个参数 ( `jumpToEnd`)
*   `hidden.bs.dropdown`事件处理程序将类恢复到`.open`下拉切换的父级，并且在第一次删除类后几乎立即执行此操作。同时`slideUp()`动画仍在运行，就像上面的答案一样，它的“动画完成”回调负责最终`.open`从其父类中删除该类。
*   方法链接在一起，因为每个事件处理程序的选择器是相同的

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-07-13T20:39:08.183

我建议使用 transform 而不是 max-height，它更快，并且 GPU 加速。

对于**Bootstrap 5**，添加以下 CSS：

```
 .dropdown .dropdown-menu {
    -webkit-transition: all 0.32s;
    -moz-transition: all 0.32s;
    -ms-transition: all 0.32s;
    -o-transition: all 0.32s;
    transition: all 0.32s;

    display: block;
    overflow: hidden;
    opacity: 0;
    transform: translateX(-25%) scaleY(0);
    transform-origin: top;
  }

  .dropdown-menu.show {
    opacity: 1;
    transform: translateX(-25%) scaleY(1);
  }
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-11-14T16:07:04.653

对于**Bootstrap 5**来说，一个简单而漂亮的动画幻灯片可以通过一个简单的 keframe 动画来完成。

```
@keyframes slideIn {
    0% {
        transform: translateY(1rem);
        opacity: 0;
    }
    100% {
        transform: translateY(0rem);
        opacity: 1;
    }
}

.slideIn {
    -webkit-animation-name: slideIn;
    animation-name: slideIn;
    animation-duration: 0.4s;
    animation-fill-mode: both;
}
```

```
<li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle m-2" href="/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dropdown
          </a>
          <ul class="dropdown-menu slideIn rounded-2 p-3" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="/">Action</a></li>
            <li><a class="dropdown-item" href="/">Another action</a></li>
            <li><hr class="dropdown-divider"/></li>
            <li><a class="dropdown-item" href="/">Something else here</a></li>
          </ul>
        </li>
```*

# iis-7.5 - 从 iis 运行 nuget 库时出现 500.19 错误

> ID：12115835
> 
> 赞同：13
> 
> 时间：2012-08-24T19:57:16.993
> 
> 标签：iis-7.5, nuget-server

我正在尝试运行 Nuget Gallery 的本地安装，但收到与错误配置文件相关的 500 错误。但是，这只发生在从 IIS 运行时。如果我从 IIS Express 运行它工作正常。任何人都可以给我任何指示吗？

```
错误摘要
HTTP 错误 500.19 - 内部服务器错误
无法访问请求的页面，因为该页面的相关配置数据无效。

详细的错误信息
模块 IIS Web 核心
通知开始请求
处理程序尚未确定
错误代码 0x8007000d
配置错误    
配置文件 \\?\C:\inetpub\NuGetGallery\Website\web.config
请求的 URL http:\\[localhost]:80/Nuget
物理路径 C:\inetpub\NuGetGallery\Website
登录方式尚未确定
登录用户尚未确定
配置源
   -1：
    0：

```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T14:30:23.787

这一定是有史以来最糟糕的错误消息。未安装 URL 重写模块。现在工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T23:37:45.490

要运行 NuGet Gallery，您需要以下先决条件（其中包含 URL 重写模块）：

*   VS 2010 或更高版本
*   PowerShell 2.0
*   NuGet 包管理器
*   Windows Azure SDK

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T04:51:31.357

今天遇到了这个，URL Rewrite 也是阻止程序。所以我做的第一件事是转到 Windows 功能并尝试为 Internet 信息服务启用此功能，但注意到它不存在（对于 Windows 8.1 和 IIS 8.5）:(

因此，作为旁注，启用模块的最佳方法是使用[Web Platform Installer](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC0QFjAA&url=http://www.microsoft.com/web/downloads/platform.aspx&ei=_sHUUsLTCMmBkQW394DIAw&usg=AFQjCNEsZA1oRBlGov8IhlMVf6JyW0e1Wg&sig2=knBsU2TwUijc6BXARy9p-w&bvm=bv.59378465,d.dGI)，通过搜索“rewrite”找到模块并安装它。

Nuget Gallery 现在正在为我工​​作。我真的应该改变他们在 Git 上的文档并为此做出贡献..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T09:26:23.757

您可以尝试`<rewrite>`在您的`Web.config`. 这对我有用。

# sql-server - 使用 ESRI shapefile SQL Server 2008 查找边界县和州

> ID：12115839
> 
> 赞同：0
> 
> 时间：2012-08-24T19:57:42.523
> 
> 标签：sql-server, reporting-services, polygon

我使用了一个非常有用的程序来获取空间数据并将其放入 SQL Server 数据库中。我很好奇是否有可能使用`geometry`数据类型来找到彼此接壤的美国州？

编辑：我假设如果两个州彼此接壤，那么这些州的几何数据的相当一部分将是相同的（因为它们沿边界共享一个轮廓）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:32:32.570

我前段时间使用 SQL2005 做过这个，但我相信这个逻辑可能仍然适用。获得空间数据后，与您类似，我将其加载到 SQL 中。到达那里后，我决定分解并写出每个坐标（在我的情况下，纬度/经度存储在边界几何字段中）及其对应的状态到一个新表中。虽然不是完全必要的，但它帮助我查看了数据，并使处理逻辑不那么复杂。谈到这一点，我怀疑（但不确定）为不同州共享的边界列出的点将是为两个州列出的相同点（谢天谢地）。一旦我有了新的一对多（状态到坐标）表，下面的伪代码就解释了我做了什么。我的工作代码（在 .Net 中完成）具有此处未提及的复杂性，例如建立序列号、边界距离等。

大纲：

```
Loop through each State (StatePoints table)
    Get all coords/points of current State (coords in my case are lat/long combos)
    Loop through each coord of current State
        _lat = row["Latitude"]
        _long = row["Longitude"];

        //Using the above, locate other States in the same table with shared Coords. Something like the following.
        //the where condition state_id <> currState_id is simply to omit the current state's borders since you're only bordering Contiguous states. 

        strSQL = "SELECT state_id, Latitude, Longitude from ..." +
                 " WHERE (ROUND(Latitude, 6, 1) = " + _lat + ") AND (ROUND(Longitude, 6, 1) = " + _long + ") AND (state_id <> " + currState_id + ")" +

        dtStateSharedPoints = db.ExecuteDataSet(CommandType.Text, strSQL).Tables[0];

        //--------------------------------------------------
        //Loop through the shared lat/long matches. Note: typically there will only be one, 
        //however several States can meet at a single point
        //--------------------------------------------------
             Loop through the shared lat/long matches (dtStateSharedPoints).
                 borderState_id = Convert.ToInt32(row["state_id"]);
                 strSQL = "INSERT INTO ContigStates(state_id, borderState_id, Latitude, Longitude) ..."
                 db.ExecuteNonQuery(CommandType.Text, strSQL); 
```

一些县和州的边界位于水道边缘（不是中心）。根据您使用的数据，这些数据可能不会显示为连续的。您可能需要考虑这些。

当时我可能在这上面花了两天多的时间。除非您有其他原因，否则即使只需要一天的时间，当您将工时与美元进行比较时，从数据公司购买它可能更可行。你可以[在这里](http://greatdata.com/contiguous-counties)找到相邻的县，如果你问的话，我相信他们会做州。除此之外，还没有买，我不知道该推荐谁……它可能值得一试。

我希望这有帮助

# objective-c - 给出错误“setter”的方法

> ID：12115840
> 
> 赞同：1
> 
> 时间：2012-08-24T19:57:43.200
> 
> 标签：objective-c, methods, setter

我有类 Player

```
@interface Player : NSObject{...}
-(int) setAttack:(int)MonsterNumber;
Player.m
-(int) setAttack:(int)MonsterNumber{...
return damage;
} 
```

但是，当我运行此程序时，我收到错误“Player.h:28:1: error: type of setter must be void [3]”我收到此错误 3 次。

感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:49:28.927

Cocoa 模式是 setter 总是返回 (void)。你真的不想这样做。定义一个`damage`getter 或 @property。或者将该方法重命名为描述其功能的名称：

```
- (int) damageForAttack:(int)attack; 
```

我很惊讶编译器警告过它。我无法重现该警告。

# regex - Vimscript：如何在替换中将匹配文本的特定字符大写？

> ID：12115841
> 
> 赞同：2
> 
> 时间：2012-08-24T19:57:42.453
> 
> 标签：regex, vim

我无法让这个工作。我正在编写一个 Vim 片段，它将获取当前文件的名称并将其扩展为类名，例如

如果当前文件名是：`some_awesome_class.foo`...片段将扩展为`class SomeAwesomeClass`

到目前为止，我有：

`substitute(Filename(), '\(^.\|_\a\)', '\u&', 'g')`

.. 但这只大写第一个字母，即使它正确匹配所有下划线。我想我正在寻找的是一种使用下划线作为搜索的一部分的方法，但没有在＆符号中匹配它，即：它查找`_\a`但仅匹配`\a`。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:09:27.080

这是一个建议：

```
s/\v(^|_)(\a)/\u\2/g 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T20:14:09.267

您应该从匹配中排除*行*首和*下划线*`\zs`。

```
^.\|_\zs\a 
```

这行得通，在这里。

见`:help \zs`和`:help \ze`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:02:11.040

您需要使用 ( ) 将它们分成单词边界，然后使用驼峰式大小写每个单词。

```
:s/_\(.\)/\u\1/g 
```

试试那个。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T20:42:05.950

另一种方式：首先添加 _ 作为单词 delim

`:set iskeyword-=_`然后

```
:%s/(\<)(.\{1})/\u\2/g 
```

# php - Swift 邮件程序 Symfony2 错误

> ID：12115842
> 
> 赞同：0
> 
> 时间：2012-08-24T19:57:43.763
> 
> 标签：php, symfony, swiftmailer

使用 Symfony2，我无法正确配置邮件程序以发送电子邮件。

我的配置是这样的：

```
mailer_transport="gmail"
mailer_host="gmail"
mailer_user="********"
mailer_password="*******" 
```

我得到的错误是这样的：

```
Swift_TransportException: Failed to authenticate on SMTP server with username "pgbonino" using 1 possible authenticators 
```

有什么线索吗？

抱歉，我没说全。它适用于普通的 Gmail 帐户。它不适用于 Google Apps 电子邮件帐户。这种账户的配置有什么不同吗？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:06:04.270

我目前正在将此配置用于 gmail

```
parameters.ini

  mailer_transport:  smtp
  mailer_host:       smtp.gmail.com:465
  mailer_user:       usenrame
  mailer_password:   *** 
```

# asp.net - 身份验证模式为 Windows 时，表单身份验证相关任务是否有效？

> ID：12115844
> 
> 赞同：1
> 
> 时间：2012-08-24T19:57:46.987
> 
> 标签：asp.net

这只是一个查询。假设我没有在 web.config 文件中指定身份验证模式。因此，按照规则，默认身份验证模式将是 windows。现在，如果我想处理与表单身份验证相关的任务，是否允许？`FormsAuthentication.SignOut()`例如。

# ruby-on-rails - 未定义的局部变量或方法“用户”

> ID：12115847
> 
> 赞同：0
> 
> 时间：2012-08-24T19:57:50.510
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我在 rspec 中有以下测试块：

```
 describe "for signed-in users" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        FactoryGirl.create(:micropost, user: user, content: "Lorem ipsum")
        FactoryGirl.create(:micropost, user: user, content: "Dolor sit amet")
        sign_in user
        visit root_path
      end

      describe "sidebar" do
        it { should have_selector('div.pagination')}
        it "should render the user's feed" do
          user.feed.each do |item|
            page.should have_selector("li##{item.id}", text: item.content)
          end
        end

        describe "micropost delete links" do
          let(:other_user) { FactoryGirl.create(:user, email: "other@example.com") }
          let!(:m3) {  FactoryGirl.create(:micropost, user: other_user, content: "Other MP") }

          user.feed.each do |item|
            find("li##{item.id}").should have_link('delete')
          end
        end

        it "should show the correct number of microposts" do
          page.should have_selector('span', text: '2 microposts')
          user.microposts.first.destroy
          visit root_path
          page.should have_selector('span', text: '1 micropost')
          user.microposts.first.destroy
          visit root_path
          page.should have_selector('span', text: '0 microposts')
        end
      end
    end 
```

当我运行它时，我收到此错误：

```
/Users/8vius/Projects/RubyDev/sample_app/spec/requests/static_pages_spec.rb:49:in `block (5 levels) in <top (required)>': undefined local variable or method `user' for #<Class:0x007fd45c8c39c0> (NameError) 
```

这只发生在我添加了“**描述微帖子删除链接**”块之后，知道问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:11:26.667

您有一个在块外运行测试的描述`it`块。因此`user`未定义。

你的：

```
describe "micropost delete links" do
  let(:other_user) { FactoryGirl.create(:user, email: "other@example.com") }
  let!(:m3) {  FactoryGirl.create(:micropost, user: other_user, content: "Other MP") }

  user.feed.each do |item|
    find("li##{item.id}").should have_link('delete')
  end
end 
```

与：

```
describe "micropost delete links" do
  let(:other_user) { FactoryGirl.create(:user, email: "other@example.com") }
  let!(:m3) {  FactoryGirl.create(:micropost, user: other_user, content: "Other MP") }

  it "should have delete link" do
    user.feed.each do |item|
      find("li##{item.id}").should have_link('delete')
    end
  end
end 
```

# excel - 指向特定单元格的 Excel 超链接

> ID：12115848
> 
> 赞同：13
> 
> 时间：2012-08-24T19:57:55.353
> 
> 标签：excel

我需要将一个电子表格中的单元格超链接到另一个电子表格中的相应单元格。例如，工作表 1 中的 C7 有一个超链接，可将您带到工作表 2 中的 C7。我需要为相当大的电子表格执行此操作，并且每个超链接必须不同。有没有一种方法可以批量执行此操作，而无需前往每个单元格并独立设置每个单元格的超链接？（使用 MS Office 2010）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-24T20:27:38.983

您可以使用以下 excel 公式：（粘贴到单元格 C7）

```
=HYPERLINK("[Book1.xlsx]Sheet2!"&CELL("address",C7),"click") 
```

笔记：

*   `[Book1.xlsx]`必须是工作簿的名称
*   `Sheet2`必须是您要超链接到的工作表的名称名称

本质上，它使用上述两个作为链接的前缀，然后使用当前单元格的地址（在您的示例中为 c7）来完成链接。

上面的示例一旦粘贴到单元格 C7 中，可以向下拖动以根据公式单元格的地址生成链接。

**更新：（**每克里斯）

```
=HYPERLINK("#'Sheet2'!"&CELL("address"),"click") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-18T05:56:59.023

三年后，我会走得更远，使用 ADDRESS(row,column) 来构建单元格地址，而不是使用 CELL() 这是一个易失性函数。如果您正在构建一个大型电子表格并多次使用 volatile 函数，您会注意到性能下降。

ADDRESS() 不是易失的，所以它不会一直触发重新计算，使用起来也更灵活。

```
=HYPERLINK("#'Sheet2'!"&ADDRESS(ROW(),COLUMN()),"click") 
```

将 ROW() 和 COLUMN() 替换为您需要的任何数字。

例如，对于 Sheet2 中的特定单元格，请使用

```
=HYPERLINK("#'Sheet2'!"&ADDRESS(ROW(Sheet2!C7),COLUMN(Sheet2!C7)),"click") 
```

如果您想要 Sheet2、第三列和下面的 1 行（相对），请使用

```
=HYPERLINK("#'Sheet2'!"&ADDRESS(ROW()+1,3),"click") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-05T16:15:07.287

很抱歉吹毛求疵，它也可以是这样的：

```
" - starting quote
# - local book (spreadsheet)
'Sheet2' - name of sheet you are going to (has to be in single quotes)
!C7 - cell in the other sheet you are trying to go to
"- ending quote
, - separating comma used in the hyperlink syntax
"click" - link text to appear in cell 
```

最终函数语法：

```
=HYPERLINK("#'Sheet2'!C7","click") 
```

# java - 在运行时设置 log4j 日志文件

> ID：12115850
> 
> 赞同：0
> 
> 时间：2012-08-24T19:58:10.713
> 
> 标签：java, dynamic, log4j, filenames, slf4j

我正在开发一个使用 slf4j 的 java 程序。目前，该程序包含以下几行：

```
 class MyOwn{
    Logger logger; //org.slf4j.*;
    static {
    PropertyConfigurator.configure("somePathTo/log4j.properties");//log4j
    logger = LoggerFactory.getLogger(MyOwn.class);
}

     ... // rest of my code is here
 } 
```

我的问题是：我需要做哪些修改才能在运行时指定日志文件的名称。

背景：基本上，当程序运行时，它应该`x`按顺序执行一些作业。对于每项工作，我想要一个不同的文件名。

log4j.properties 文件不是 xml；它是文本，我必须保持这种状态。我找到了这个链接（[http://cognitivecache.blogspot.com/2008/08/log4j-writing-to-dynamic-log-file-for.html](http://cognitivecache.blogspot.com/2008/08/log4j-writing-to-dynamic-log-file-for.html)），但我不确定如何使用那里的信息。

编辑

下面是我当前的 log4j.properties 文件。我希望能够保留在 log4j.properties 文件中设置的文件目录（即`/opt/stuff/var/log/jmy/proj/`），并只替换`myown.log`为动态文件名。我该怎么做？同样，我想保留 log4j.properties。

```
 log4j.appender.CONSOLE=org.apache.     log4j.ConsoleAppender
 log4j.appender.CONSOLE.layout=org.apache.     log4j.PatternLayout
 log4j.appender.CONSOLE.layout.ConversionPattern=%d %-5p %c{1} - %m%n

 log4j.rootLogger=INFO, CONSOLE

 log4j.appender.MY_OWN_ERR_LOG=org.apache.     log4j.RollingFileAppender
 log4j.appender.MY_OWN_ERR_LOG.File=/opt/stuff/var/log/jmy/proj/myown.error.log
 log4j.appender.MY_OWN_ERR_LOG.MaxFileSize=4MB
 log4j.appender.MY_OWN_ERR_LOG.MaxBackupIndex=3
 log4j.appender.MY_OWN_ERR_LOG.layout=org.apache.     log4j.PatternLayout
 log4j.appender.MY_OWN_ERR_LOG.layout.ConversionPattern=%d %-5p %c{1} - %m%n
 log4j.appender.MY_OWN_ERR_LOG.Threshold = WARN

 log4j.appender.MY_OWN_LOG=org.apache.     log4j.RollingFileAppender
 log4j.appender.MY_OWN_LOG.File=/opt/stuff/var/log/jmy/proj/myown.log
 log4j.appender.MY_OWN_LOG.MaxFileSize=8MB
 log4j.appender.MY_OWN_LOG.MaxBackupIndex=3
 log4j.appender.MY_OWN_LOG.layout=org.apache.     log4j.PatternLayout
 log4j.appender.MY_OWN_LOG.layout.ConversionPattern=%d %-5p %c{1} - %m%n

 log4j.logger.my.own.things=DEBUG, MY_OWN_LOG, MY_OWN_ERR_LOG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:28:54.787

看看这篇文章[使用 log4j 以编程方式创建不同的日志文件](https://stackoverflow.com/questions/1666121/programmatically-creating-different-log-files-using-log4j)

您可以以编程方式指定可以放入 log4j.properties 文件的任何内容。您只需创建 appender 和 logger 对象并将它们链接在一起。

另请参阅此处以获取更完整的示例：[http ://configlog4jbyprogram.blogspot.co.uk/](http://configlog4jbyprogram.blogspot.co.uk/)

# java - 在 JAVA 的 FIFO 队列中计算 PeekMedian()

> ID：12115851
> 
> 赞同：0
> 
> 时间：2012-08-24T19:58:18.227
> 
> 标签：java

尽快需要帮助。我想实现一个 peekMedian 函数，它查看所有对象中具有中值的对象，而不将其从队列中删除。它应该返回值为**(size/2 + 1) th**最低的对象。

例如。假设一个队列具有以下值。{ 2, 1, 2, 2, 6, 4, 2, 5} 那么该方法应该返回 2 并且不会删除该对象。

我曾尝试使用**collection.sort()**但不应根据问题对队列进行排序。我还尝试复制数组中的队列元素并找到第 n 个最小值并返回该值。但问题是**“返回对象”。**..而且解决方案的复杂性应该更低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:43:13.393

尝试这个

```
 import java.util.ArrayDeque;
        import java.util.Iterator;

        public class ArrayDequeDemo {
           public static void main(String[] args) {

        ArrayDeque<Integer> que = new ArrayDeque<Integer>();
            // add elements in queue
              que.add(2);
             que.add(1);
              que.add(2);
              que.add(2);
              que.add(6);
              que.add(4);
              que.add(2);
              que.add(5);

    Integer median = peekMedian(que);

     System.out.println(median);
       }

  private static Integer peekMedian(ArrayDeque<Integer> que){

    Integer ele=0;      //required number
   int size=que.size();  

   //finding the index of ele.
   int elementFromlastIndex= (size/2)+1;

   Iterator descItr = que.descendingIterator();

    int counter=0;  

// iterate in reverse order  till the index of ele is not reached.The loop will break when  when index of ele is reached and thereby finding required element. 

    while(descItr.hasNext() && counter!=elementFromlastIndex) {
             ele =( Integer)descItr.next();
            ++counter;

         if(counter==elementFromlastIndex)
          break;
}//while  
      return ele;       

   }
   }  
        }//class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:05:22.087

我想我知道该怎么做了，昨天我被要求执行。

在 O(1) 时间内实现最大值或最小值很容易，不是吗？为什么不将队列分成两个队列，一个存储小于中位数的项目，一个存储大于中位数的项目，始终保持这种关系，并且当您插入项目时，依次插入到每个队列中，您可以获得中位数。

保持关系时可能会有一些操作，但我认为这将是 O(1) 时间，因为我们在 O(1) 中得到最大值或最小值，并且 inset 可以在 O(1) 中下降，所以它仍然是 O(1) ， 听起来不错。

我希望我是对的。如果有什么问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:14:48.960

这看起来像一个家庭作业，所以我会发布一个算法来解决这个问题：

1.  创建一个新队列，它将帮助您作为对象的辅助集合。
2.  开始从初始队列中将对象出列并在辅助队列中排队。
3.  如果您知道队列的原始大小，那么当您到达第**(size/2 + 1)n 个**元素时，使用辅助对象来保留其值的副本。
4.  继续步骤 2 中的过程。
5.  如果可以的话，用你的辅助队列替换你的队列，否则从辅助队列到原始队列重复第 2 步中的过程。
6.  返回具有中值的辅助对象。

顺便说一句，我认为您对[中位数](http://www.mathsisfun.com/median.html)有不同的概念。或者也许这就是问题的提出方式。

注意：如果您的任务是在不删除队列中的任何对象的情况下执行此操作，那么这是不可能的，至少您将队列威胁为 Array 或 LinkedList 并对其进行迭代。

* * *

我将向您展示使用 Java Queue 的代码实现。

```
public <T> T peekMedian(Queue<T> queue) {
    int medianIndex = queue.size() / 2 + 1; //based on your question.
    Queue<T> auxQueue = new LinkedList<T>();
    T result;
    int count = 1;
    while(queue.peek() != null) {
        auxQueue.add(queue.pop());
        if (count == medianIndex) {
            result = auxQueue.peek();
        }
        count++;
    }
    while(auxQueue.peek() != null) {
        queue.add(auxQueue.pop());
    }
    return result;
} 
```

# language-agnostic - 自动设计状态机

> ID：12115855
> 
> 赞同：3
> 
> 时间：2012-08-24T19:59:00.050
> 
> 标签：language-agnostic, graph, state-machine

在这些日子里，我正在设计一个非常复杂的软件，只有使用经过深思熟虑的状态机才能体面地设计它。我的问题是，超过一定程度的复杂性，在一张纸上绘制状态机变得一团糟！

有没有可以自动排版的软件？我正在寻找具有以下功能的东西：

*   语言不可知论；
*   基于一些状态定义语言；
*   某种程度上类似于*Graphviz Dot*（从布局的角度来看），但支持状态机语义，而不仅仅是通用图；
*   可能像言论一样自由，而不是啤酒；
*   可能允许结果图的矢量输出。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:40:28.943

虽然通常不被认为是状态机表示，但杰克逊结构化编程图可以这样使用。当应用程序涉及大量数据操作时，我更喜欢它们而不是状态转换图。它们可以显示整体情况，并为附在图表叶子上的数据操作提供大量空间。

我在搜索中发现了以下两个工具：

[杰克逊工作台](http://www.jacksonworkbench.co.uk/)这是由杰克逊方法的创始人生产的。我熟悉他们的旧工具。这些旧工具在语法上支持状态机的所有结构——循环；选项; 和状态序列。它们提供了一种内部语言，它是一种状态机语言。它们还支持从选择和迭代中回溯的 JSD 概念。较旧的工具不支持状态机的某些改进——至少完成一次的循环；前缀、中缀和后缀；和嵌套状态机。我不知道这些改进是否在当前工具中可用。这个工具可能很昂贵，尽管我手头没有任何成本。

[制作杰克逊图](http://mac.softpedia.com/get/Developer-Tools/Make-A-Jackson.shtml)。我没有关于这个工具的信息。它似乎只是一个图表制作者，并且仅基于 Mac。目前尚不清楚它是否支持状态图语义的任何方面，但它是免费的。

# mysql - 不能 UNION ALL 两个等效查询吗？

> ID：12115856
> 
> 赞同：3
> 
> 时间：2012-08-24T19:59:04.510
> 
> 标签：mysql, sql, union-all

我有一个需要重复几次的有效查询，但是我在 UNION ALL 上遇到语法错误：

**工作查询：**

```
set @num := 0, @group := '';

select person, `group`, age
from 
(
   select person, `group`, age,
      @num := if(@group = `group`, @num + 1, 1) as row_number,
      @group := `group` as dummy
  from mytable
  order by `Group`, Age desc
) as x where x.row_number <= 2; 
```

[SQL 小提琴](http://sqlfiddle.com/#!2/4c0a5/32)

**UNION ALL 失败（出现语法错误）：**

```
set @num := 0, @group := '';
(
select person, `group`, age
from 
(
   select person, `group`, age,
      @num := if(@group = `group`, @num + 1, 1) as row_number,
      @group := `group` as dummy
  from mytable
  order by `Group`, Age desc
) as x where x.row_number <= 2;
)
UNION ALL
(
select person, `group`, age
from 
(
   select person, `group`, age,
      @num := if(@group = `group`, @num + 1, 1) as row_number,
      @group := `group` as dummy
  from mytable
  order by `Group`, Age desc
) as x where x.row_number <= 2;
) 
```

[SQL 小提琴](http://sqlfiddle.com/#!2/4c0a5/40)

（出于测试目的，UNIONed 查询只是原始查询的副本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:00:49.450

你有一些额外的括号。

看到这个[SQL Fiddle](http://sqlfiddle.com/#!2/4c0a5/63/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:05:08.090

```
set @num := 0, @group := '';

select person, `group`, age
from 
(
   select person, `group`, age,
      @num := if(@group = `group`, @num + 1, 1) as row_number,
      @group := `group` as dummy
  from mytable
  order by `Group`, Age desc
) as x where x.row_number <= 2
UNION ALL

select person, `group`, age
from 
(
   select person, `group`, age,
      @num := if(@group = `group`, @num + 1, 1) as row_number,
      @group := `group` as dummy
  from mytable
  order by `Group`, Age desc
) as x where x.row_number <= 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:10:31.580

删除最外面的括号。SELECT 语句应该以 SELECT 关键字开头，而不是开放括号​​。

# regex - 以下正则表达式匹配什么？

> ID：12115858
> 
> 赞同：1
> 
> 时间：2012-08-24T19:59:11.883
> 
> 标签：regex

```
 ([^\s]+(?=\.(jpg|jpeg|png|gif))\.\2) 
```

和这个：

```
 ([^\s]+(?=\.(jpg|jpeg|png|gif))\.\1) 
```

它是如何匹配的？我很确定开始部分会去掉空格……还是这样？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:07:58.010

这两个是*可怕*的正则表达式。你在哪里找到他们？

首先，`[^\s]+`您可以简单地编写`\S+`(= 一个或多个非空白字符。)，而不是 。

第二部分`(?=\.(jpg|jpeg|png|gif))`在字符串中向前看，以确保字符串的以下部分是一个点，后跟列出的图形文件扩展名之一。

然后，`\.\2`匹配完全相同的文本，使之前的前瞻断言完全没有意义。`\2`指第二对捕获括号的内容（即 周围的括号`jpg|jpeg|png|gif`）。

所以第一个正则表达式可以重写为

```
\S+\.(jpe?g|png|gif) 
```

第二个永远不会匹配（并且会导致大多数（如果不是全部）编译器咳嗽和死亡），因为`\1`它指的是第一组括号的内容，它（完全无用）围绕整个正则表达式。当然，您不能将整个匹配作为其自身的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T20:06:15.313

*   `[^\s]+`- 匹配 1 个或多个非空白字符；
*   `(?=\.(jpg|jpeg|png|gif)`- 零宽度（意味着它不消耗输入）正向前瞻，它*断言*在上述表达式之后，您有一个点 ( `\.`)，然后是这四个图像扩展名之一；
*   `\.\2`- 匹配一个点，然后是第二个捕获的组，即`(jpg|jpeg|png|gif)`.

总之，`([^\s]+(?=\.(jpg|jpeg|png|gif))\.\2)`, 匹配 1 个一个或多个非空白字符（可能是文件名），后跟以下扩展名之一：`.jpg`、`.jpeg`、`.png`或`.gif`.

第二个基本相同，但由于`\1`是指整个捕获的文本，它永远不会匹配任何内容。

# android - Nexus 7" 的 dpi 值错误。平台中的错误，或者我们做错了什么？

> ID：12115860
> 
> 赞同：0
> 
> 时间：2012-08-24T19:59:13.647
> 
> 标签：android, android-4.2-jelly-bean

这段代码：

```
activity.getWindowManager().getDefaultDisplay().getMetrics(dm); 
```

正在报告新 Nexus 7 上的横向 xdpi = 195.38461。我的卷尺显示屏幕宽 1/16 英寸，比 6 英寸宽，1280 像素，计算结果为 215.57894。

是的，我们的 Android.xml 说：

```
<uses-sdk android:minSdkVersion="16"/> 
```

这只是一个错误，还是我们做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:03:25.170

来自[Dianne Hackborn 的回复](https://groups.google.com/d/msg/android-developers/g56jV0Hora0/9d8p8QJg1ksJ)：

> 抱歉，您不能使用它们。平台中没有任何东西使用它们。它们需要由制造商设置（平台无法知道它们是什么），并且截至今天，它们在设备之间的设置并不一致，并且因为平台中没有任何东西依赖它们，所以很容易设备使其设置不正确。

基本上，您根本不能依赖返回的内容。

# eclipse - Eclipse e4 和 org.eclipse.help.ui

> ID：12115862
> 
> 赞同：2
> 
> 时间：2012-08-24T19:59:26.133
> 
> 标签：eclipse, eclipse-rcp, eclipse-juno

我正在开发一个纯 Eclipse E4Application 并获得支持帮助系统（org.eclipse.help 插件）的任务。但是当我将它添加到 e4 应用程序时，它无法开始说明它必须添加到应用程序 ID。

```
!ENTRY org.eclipse.equinox.app 0 0 2012-08-24 22:56:44.744
!MESSAGE Product com.studio.product could not be found.

!ENTRY org.eclipse.osgi 2 0 2012-08-24 22:56:44.794
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-24 22:56:44.795
!MESSAGE Bundle initial@reference:file:workspace/com.studio/ was not resolved.
!SUBENTRY 2 com.studio 2 0 2012-08-24 22:56:44.795
!MESSAGE Missing required bundle org.eclipse.help.ui_3.5.200. 
```

这是因为 org.eclipse.help.ui 不是原生的 e4 插件。有哪些整合方式？我已经查看了不同的教程和文章，但无法完成这项工作。我发现的唯一方法是[https://github.com/fredrikattebrant/Simple-4x-RCP-app](https://github.com/fredrikattebrant/Simple-4x-RCP-app) 这个例子是 Lars Vogel 提到的，但似乎有点不同，UI 是由 WorkbenchAdvison、WindowAdvisor 等以旧方式定义的在。我确实需要一个带有帮助支持的纯 e4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T01:34:53.710

似乎目前纯 Eclipse 4 代码（如在 Eclipse juno 4.2 中）缺乏对帮助或偏好 GUI 的支持。

如果您想使用帮助或首选项，尤其是当您想通过插件扩展这些时，Eclipse 3 兼容层似乎是唯一的选择，但是没有办法将 Eclipse 4 插件添加到这样的兼容性层中——基于 E3 应用程序（[https://bugs.eclipse.org/bugs/show_bug.cgi?id=376486](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376486)）。

如果您想向纯 E4 应用程序添加帮助，您当然可以通过 E4 模型向您的应用程序添加“帮助”菜单，然后您的命令处理程序会打开一个基本上包含用于显示帮助的 SWT 浏览器小部件的部分。无法与索引、搜索等方面的可插拔 E3 帮助进行比较。

# c++ - OpenGL 和 GLSL 之间的通信

> ID：12115863
> 
> 赞同：2
> 
> 时间：2012-08-24T19:59:31.057
> 
> 标签：c++, opengl, glsl

我一直在阅读许多 OpenGL 和 GLSL 教程，但我仍然无法理解如何使用着色器。我了解到 gl_ModelViewProjectionMatrix 已被弃用，我应该“自己”计算矩阵 - 我该怎么做？维基百科使用统一变量（我不知道它的意义何在）来实现该计算。

我遇到了其他应该与着色器一起使用的函数，例如 glEnableVertexAttribArray 和 glVertexAttribPointer，但我不知道它们是如何连接到着色器的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:20:35.263

我目前正在自己​​学习openGL，但看起来我很幸运能够找到更好的资源。[本](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1%3a-The-Graphics-Pipeline.html)教程节奏很快，但涵盖了很多基础知识。我还要提到[OpenGL Superbible 第 5 版。](http://www.amzn.com/0321498828)，但就个人而言，它对我的​​帮助不大。就矩阵方面的问题而言，最好在学习 OpenGL 之前对线性代数和基本 3D 数学有一个基本的了解。为此，我推荐[这本书](http://www.amzn.com/1556229119)，或者上面的榴莲软件教程。

就着色器而言，我可能不是最好的来源，但简单的着色器构造通常是这样的：

1.  将着色器作为字符数组加载到内存中。
2.  使用 glCreateShader() 为您的顶点着色器、片段着色器和程序对象生成句柄
3.  使用 glShaderSource() 和 glCompileShader() 将源代码绑定到着色器对象
4.  使用 glLinkProgram() 链接您的顶点和片段着色器，然后使用 glUseProgram() 启用最终程序
5.  使用 glGenBuffer()（以创建句柄）、glBindBuffer() 和 glBufferData() 将顶点属性（如坐标、纹理坐标和法线）加载到缓冲区中。
6.  绑定您的顶点属性数组缓冲区（同样，只是您的坐标、法线和其他要处理的数据的集合），并使用 glVertexAttribPointer() 允许着色器正确读取它。
7.  Uniforms 和属性只是让 CPU 上的程序与 GPU 上的着色器通信的一种方式。
8.  画

恐怕我不够资格进一步解释，整个过程的基本代码示例会占用太多，但如果有必要我可以提供一些小部分。但是，我链接到的每个资源都带有完整的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:53:52.110

一开始我发现大致相同。许多在线阅读并没有像我希望的那样详细解释。结合不同版本的 OpenGL 和 GLSL，我有一些 wtf 时刻。

但是我最近购买的是[OpenGL ES 2.0 Programming Guide (ISBN-10: 0321502795, ISBN-13: 978-0321502797)](http://www.amazon.co.uk/dp/0321502795/)。它专注于 ES 2.0，我认为这是 GLSL 的一个很好的起点。我实际上还没有尝试过任何练习，因为我更喜欢先阅读，然后再回去进行实验。然而，到目前为止，我已经写了大约 100 页，所有内容都得到了精彩的解释，并且对于新人来说是合理的。

如果您将本书与[《游戏和交互式应用程序的基本数学：程序员指南》（ISBN-10：0123742978，ISBN-13：978-0123742971）结合起来，](http://www.amazon.co.uk/dp/0123742978/)那么这应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T23:15:57.470

这些教程非常简单 [http://www.lighthouse3d.com/tutorials/glsl-tutorial/](http://www.lighthouse3d.com/tutorials/glsl-tutorial/) 只需遵循它，不要对矩阵做任何时髦的事情。

要使用顶点属性，您需要在 GLSL 着色器中定义它：

```
attribute float attribute_name; //or another type

void main()
{

/// do it

} 
```

并在您的 cpp/c 中传递数组：

```
glUseProgram(program);
//get location of your attribute variable
GLuint loc = glGetAttribLocation(program, "attribute_name"); 
//enable it
glEnableVertexAttribArray( loc );
//and pass the value
glVertexAttribPointer(loc,1,GL_FLOAT,GL_TRUE,0,attr_array);

//pass other stuff as usual
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glTexCoordPointer(2, GL_FLOAT, 0, uvs );

glEnableClientState( GL_VERTEX_ARRAY );

glVertexPointer ( 3, GL_FLOAT, 0, ver );

glEnableClientState( GL_NORMAL_ARRAY );

glNormalPointer (    GL_FLOAT, 0, nor );

//do draw 
```

# xml - 如何从数据库中抓取视频并将其显示在网页上

> ID：12115864
> 
> 赞同：0
> 
> 时间：2012-08-24T19:59:34.613
> 
> 标签：xml, database, video, smil, web-development-server

我有一堆视频存储在 MySql 数据库中（如果其他数据库或编程语言更好，请告诉我）并使用 php 抓取它们并将它们显示在网页上。据我所知，存储视频的最佳和最有效的方法是在服务器上的文件中，然后将视频的位置放入数据库中。我知道如何查询数据库以获取位置，我只是想知道如何获取位置并使用它来格式化和显示网页上的视频。我正在考虑使用 XML 或 SMIL。

有人可以给我一些关于如何做到这一点或任何更好的方法的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:06:51.443

如果您不需要支持旧浏览器，您可以考虑使用[HTML5 video](http://www.w3schools.com/html5/html5_video.asp)。

基于[Browser share](http://en.wikipedia.org/wiki/Usage_share_of_web_browsers)和[IE version share](http://www.statowl.com/web_browser_usage_by_version.php?timeframe=last_6&interval=month&chart_id=4&limit%5B%5D=ie&fltr_os=&fltr_se=&fltr_cn=)这应该可以让大约 80% 的用户访问您的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:08:45.017

你是对的 - 你不应该将视频存储在数据库中。当您将文件位置存储在数据库中时，提取文件位置，并使用服务器端语言只需将该位置插入 html 标记或 Flash 视频播放器位置属性。

# mercurial - SmartGit 是否支持使用 Mercurial 存储库？

> ID：12115870
> 
> 赞同：6
> 
> 时间：2012-08-24T20:00:03.823
> 
> 标签：mercurial, smartgit

这个问题几乎在标题中。[SmartGit](http://www.syntevo.com/smartgit/index.html)是否支持使用 Mercurial 存储库？

我已经下载了评估版，但据我所知，它只支持打开 git repos，这与他们在首页上的主要声明之一相反：

*SmartGit 是一个易于使用的图形用户界面，用于**Git、Mercurial 和 Subversion**，具有优化的工作流程。SmartGit 支持软件开发项目中日常工作所需的所有 Git 和 Mercurial 功能......*

任何使用 SmartGit 或熟悉它的人都可以澄清这一点吗？我真的很喜欢这个客户。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T13:51:11.230

另请注意，在 SmartGitHg 4 中，如果您尚未在首选项中输入 Mercurial 可执行文件的路径，则*不会出现 Mercurial 选项（例如在克隆期间）：*`Edit -> Preferences -> Commands -> Executables -> Hg Executable`

粗略的版本列表（我可以在网络上的随机注释中找到）：
SmartGit 7.1*应该*支持 Hg 3.6.x。
SmartGit 7.2*应该*支持 Hg 3.7.x 和 3.8.x。（[官方更新日志](https://www.syntevo.com/smartgit/changelog.txt)）
SmartGit 8.1*应该*支持 Hg 3.9.x。（[EAP 发布说明为 2016 年 11 月](http://www.syntevo.com/smartgit/changelog-eap.txt)，URL 可能很快会更改）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T07:30:51.013

是的，SmartGit 支持 Mercurial 存储库：只需使用**Repository|Add 或 Create**并在此处输入本地 Mercurial 存储库的路径。**以同样的方式，您可以使用Repository|Clone**克隆远程 Mercurial 存储库。

# java - 获取和设置选定的索引 JSpinner

> ID：12115871
> 
> 赞同：2
> 
> 时间：2012-08-24T20:00:16.207
> 
> 标签：java, swing, jspinner

我正在用 JAVA 开发 i18n 应用程序。
我正在使用`JSpinner`as`String[]`模型以允许用户选择某些选项。
我的问题是文本`JSpinner`随着语言而变化。
所以我不想使用所选选项的索引而不是它的值。
如何在 a 中获取（和设置）选定的索引`JSpinner`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:15:52.000

您可以获得 JSpinner 的值，而不是遍历它的数据（无论您将其设置为什么 List），然后找到它的索引。要设置索引，只需在您想要的索引处获取对象，然后将对象设置为该索引。请参阅下面的示例。您也可以制作自己的 SpinnerModel

搜索示例：

```
public int getSelectedIndex(JSpinner spinner, List<?> values) {
    int index=0;
    for(Object o :values) {
        if(o.equals(spinner.getValue()))
            return index;
        index++;
    }
    return -1;
}
public void setSelectedIndex(JSpinner spinner, List<?> values, int index) {
    spinner.setValue(values.get(index));
} 
```

# python - pyopengl 游戏中的 fps 究竟是什么

> ID：12115872
> 
> 赞同：0
> 
> 时间：2012-08-24T20:00:35.520
> 
> 标签：python, performance, numpy, pypy, pyopengl

所以我一直在寻找制作一个3D游戏。它将基于体素并使用行进立方体。我会用 pyopengl 从头开始​​制作引擎。我知道那里已经有引擎和库，但我想要学习经验。我听很多人说你永远不应该将 python 用于 3D 游戏，因为性能很糟糕，你应该使用 c++。我想知道，与使用 c++ 的同一游戏相比，fps 会有多差？我的意思是使用 pypy 和 numpy 之类的东西，我敢打赌，你可以将其提高到与基于 ac 的游戏大致相同的速度。

感谢您的回答。我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:29:11.167

我没有任何使用 python 或 C++ 编写游戏的经验。[但是我已经使用 python 和CUDA](http://documen.tician.de/pycuda/)代码的组合编写了一个详细的开源光学模拟，它能够使用[pygame](http://www.pygame.org/news.html)显示实时光线追踪 3D 图像，以处理像素 blitting 并拦截键盘和鼠标事件。

除非有一些先决条件，否则我不会将自己限制在一种语言上。我经常发现自己用 python 编写大部分代码，然后重写性能关键瓶颈以加快速度。就我而言，我通常将计算卸载到 GPU。在您的情况下，由于您可能希望在各种机器上使用该游戏，您可以用 C 或 OpenCL 重写这些部分。

# asp.net - 从 SQL Server 2000 迁移到 SQL Server 2008 后，ASP.NET 1.1 应用程序连接失败

> ID：12115873
> 
> 赞同：0
> 
> 时间：2012-08-24T20:00:38.483
> 
> 标签：asp.net, sql-server-2008, odbc, sql-server-2000, dsn

我们在服务器 A 上安装了 ASP.NET 1.1 应用程序，在服务器 B 上安装了 SQL Server 2000。我们希望将数据库从 SQL Server 2000 迁移到 SQL Server 2008。

问题是我们没有 ASP 应用程序的代码，因为它是由一些不再存在的第三方开发公司开发的。所以我们唯一剩下的就是预编译的代码和DLL。我用 PE 资源管理器反汇编了 DLL 文件，以确定 ADODB 连接是使用 DSN 建立的。我们在服务器 B 上将 SQL Server 2000 升级到 SQL Server 2008，并在服务器 A 中安装了 SQL Server 本机客户端驱动程序，以便我们的应用程序可以使用该 ODBC 驱动程序连接到 SQL Server 2008。我使用新的 ODBC 驱动程序和 ASP 应用程序重新配置了 DSN还是不行。它无法连接到数据库。

附加信息：我们在 IIS 中有一个用于 ASP.NET 应用程序的应用程序池，我重新启动了 COM 组件但没有运气。我尝试使用来自服务器 A 的简单 test.asp 文件使用以下代码测试数据库连接，并且它连接。

```
dim ObjConn = Server.CreateObject("ADODB.Connection")

' DSN 
ObjConn.Open("dsn=xxx;uid=xxxx;pwd=xxxx")

Dim ObjRS = ObjConn.Execute(" xxx 'xxx','xxx','xxx',0,null,null ") 
```

我的问题是 ASP.NET 1.1 应用程序是否可以与 SQL Server 2008 一起使用，还是不可能。据我所知，应用程序是否使用 DSN 连接到数据库，以及我们是否使用正确的 ODBC 驱动程序重新配置它，这应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:06:34.503

是的，可以将 ASP.net 1.1 与 SQL Server 2008 一起使用。

您是否检查过原始服务器和新服务器之间的权限是否发生了变化？

# google-maps-api-3 - 如何在 Google API 中切换自定义 mapType？

> ID：12115879
> 
> 赞同：1
> 
> 时间：2012-08-24T20:01:04.427
> 
> 标签：google-maps-api-3, toggle

我们在 Google maps API v.3 中有一个自定义的 mapType，它可以与我们自己的图块一起正常工作。

但是，我们的自定义图块叠加仅适用于特定缩放的有限区域，但用户可以自由移动到该区域之外和其他缩放级别。当他们这样做时，我们想隐藏或删除我们在地图初始默认视图上拥有的自定义 mapType 选项。（这是为了避免地图试图拉入我们服务器上不存在的图块。）

我们已经在指定 mapTypes 的数组上尝试了一些操作，但没有效果。

这些不起作用（我们从数组索引 0 中的“自定义”开始）：

map.mapTypeControlOptions.mapTypeIds = [“路线图”、“卫星”、“混合”、“地形”]；

map.mapTypeControlOptions.mapTypeIds.shift();

此外，当用户点击我们地图附近的按钮时，我们想要设置地图中心和缩放，然后重新显示或重新添加我们自定义的 mapType 按钮到地图类型控制选项中，因此需要切换它。

我们的地图在这里： http: [//www.cornell.edu/maps2/](http://www.cornell.edu/maps2/)

-肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:31:47.473

在我看来，您不需要自定义地图类型，而是需要叠加层。像这样的东西： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-hideshow](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-hideshow)

# javascript - onload javascript将背景图像分配给div

> ID：12115883
> 
> 赞同：0
> 
> 时间：2012-08-24T20:01:42.773
> 
> 标签：javascript, jquery, css, background, onload

我有这段代码，它通过在其“src”中通过 javascript 打印其 url 将不同的图像加载到“img”。在 CSS 对“img”标签中的内容进行处理之后。

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3','img4','img5','img6','img7','img8','img9','img10','img11','img12','img13','img14','img15','img16','img17','img18','img19','img20','img21','img22','img23','img24','img25','img26','img27','img28','img29','img30'];
    var rndNum = Math.floor(Math.random() * randomImages.length);

     var $win = $(this);
     var iMac = $(window).width() > 1920 ? '_imac' : '';
     var $img = $('#background').attr('src', '_img/bg/index_rnd/' + randomImages[rndNum] + iMac + '.jpg').css({'position':'fixed','top':0,'left':0});
        function resize() {
            if (($win.width() / $win.height()) < ($img.width() / $img.height())) {
              $img.css({'height':'100%','width':'auto'});
            } else {
              $img.css({'width':'100%','height':'auto'});
            }
        }
        $win.resize(function() { resize(); }).trigger('resize');
    }); 
```

我正在创建一个新的网络，我想使用相同的系统选择一个数组的图片，但是将 foto 的 url 应用到 css 背景图像。

```
#home{
    background: url(INSERT URL OF JAVASCRIPT HERE) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    } 
```

我在下面的代码中进行了尝试，但我认为这种方式很笨拙。我不知道这是否可能，或者是否有比通过javascript的这种方法更简单的方法。如您所见，我不是专家。

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3'];
    var rndNum = Math.floor(Math.random() * randomImages.length);
    var url = 'url(_img/bg_array/' + randomImages[rndNum] + '.jpg)'

    $('#home').css({
        'background:' url 'no-repeat' 'center' 'center' 'fixed', 
        '-webkit-background-size': 'cover',
        '-moz-background-size': 'cover',
        '-o-background-size': 'cover',
        'background-size': 'cover'
        });
    } 
```

谢谢你！！！！

编辑：更多信息//////////////////////////

jfriend00 的答案似乎 100% 正确且合乎逻辑。我正在尝试使用第二个选项。我已经尝试了这两种选择，但似乎都不起作用。我还尝试通过javascript将一个简单的代码应用于#home，但它不起作用......所以我认为javascript文件和html之间的链接有问题，也许问题出在其他地方......

在这里，我将放置更多可能有用的信息。我在头部插入我的 html 和我对不同文件的连接，也许这有帮助。我正在创建一个水平布局的网络。它通过 jquery 完美运行...

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>DJ Femke</title>

        <!-- JAVASCRIPT CONNECTIONS -->

        <script type="text/javascript" src="_js/jquery-1.3.1.min.js"></script>
        <script type="text/javascript" src="_js/jquery.scrollTo.js"></script>
        <script type="text/javascript" src="_js/scroll_resize.js"></script>
        <script type="text/javascript" src="_js/onload.js"></script>

        <!-- CSS CONNECTIONS -->
        <link type="text/css" rel="stylesheet" href="_css/style.css" media="screen"/>
    </head>
    <body>
        <div id="wrapper">
            <div id="mask">

                <div id="booking" class="item">

                    <a name="item1"></a>
                    <div class="content">item1 
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>BOOKING</p>
                    </div>
                </div>

                <div id="about_me" class="item">
                    <a name="item2"></a>
                    <div class="content">about_me
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>ABOUT ME</p>
                    </div>
                </div>

                <div id="home" class="item" src="">
                    <a name="item3"></a>
                    <div class="content">item3
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>HOME</p>
                    </div>
                </div>

                <div id="music" class="item">
                    <a name="item4"></a>
                    <div class="content">item4
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>MUSIC</p>
                    </div>
                </div>

                <div id="photo_video" class="item">
                    <a name="item5"></a>
                    <div class="content">item5
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>PHOTO AND VIDEO</p>
                    </div>
                </div>

                <div id="contact" class="item">
                    <a name="item6"></a>
                    <div class="content">item6
                        <a href="#booking" class="panel">1</a> | 
                        <a href="#about_me" class="panel">2</a> | 
                        <a href="#home" class="panel">3</a> | 
                        <a href="#music" class="panel">4</a> | 
                        <a href="#photo_video" class="panel">5</a>
                        <a href="#contact" class="panel">6</a>
                        <p>CONTACT</p>
                    </div>
                </div>

            </div>
        </div>  
    </body>
</html> 
```

我的文件 onload.js 中的 javascript 如下：

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3'];
    var rndNum = Math.floor(Math.random() * randomImages.length);
    var url = 'url(_img/bg_array/' + randomImages[rndNum] + '.jpg)'

    $('#home').css({
        'background': url + 'no-repeat center center fixed', 
        '-webkit-background-size': 'cover',
        '-moz-background-size': 'cover',
        '-o-background-size': 'cover',
        'background-size': 'cover'
    });
} 
```

也许它很方便......我的文件结构： ![在此处输入图像描述](../Images/d90b2234961fcca67f2853428e446e9d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:20:06.763

您有两种选择通过 javascript 设置背景图像。您可以只设置`background-image`CSS 属性，也可以将字符串添加在一起以形成该`background`属性的整个字符串。

选项1：

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3'];
    var rndNum = Math.floor(Math.random() * randomImages.length);
    var url = 'url(_img/bg_array/' + randomImages[rndNum] + '.jpg)';

    $('#home').css('background-image', url);
}); 
```

选项 2：

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3'];
    var rndNum = Math.floor(Math.random() * randomImages.length);
    var url = 'url(_img/bg_array/' + randomImages[rndNum] + '.jpg)'

    $('#home').css({
        'background': url + ' no-repeat center center fixed', 
        '-webkit-background-size': 'cover',
        '-moz-background-size': 'cover',
        '-o-background-size': 'cover',
        'background-size': 'cover'
    });
 }); 
```

您还缺少完成语句`);`的代码末尾的关闭。`$(window).load()`

第二个选项的工作示例：http: [//jsfiddle.net/jfriend00/rGkww/](http://jsfiddle.net/jfriend00/rGkww/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:20:02.453

编辑：哦，是的，另一张海报是对的。我没有检查随机数生成......但其余的仍然适用。

我不使用jquery...

但在常规的 Javsacript 中，它更像是：** 警告，未经测试的代码 **

```
var imgs = ["foo1.jpg", "foo2.jpg"];
var idx = Math.floor(Math.random() * imgs.length)
var img = imgs[idx];

var el = document.getElementById('home');
el.style.backgroundImage="url('" + img + "')"; 
```

# scala - 如何使用单独的列表填充字符串列表

> ID：12115887
> 
> 赞同：1
> 
> 时间：2012-08-24T20:01:58.003
> 
> 标签：scala

我正在尝试填充包含页眉和页脚字符串的字符串列表，主要内容是本地读取的文件。下面的文本文件“textFile”包含一个字符串列表。

这是我正在尝试的：

```
 var fileList = List[String]()
     val bigFile = io.Source.fromFile("d:\\textFile.txt")
     val groupedLines = bigFile.getLines.grouped(20000).zipWithIndex
    groupedLines.foreach(group => {
        val (lines, index) = group
        fileList.addString(new StringBuilder("begin"))

        //How can I add the contents of the file here to the val fileList ???
        fileList.add(lines.)
        fileList.addString(new StringBuilder("end"))
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:20:47.163

由于 List 是不可变的，我认为您要么想要：

使用可变的 ListBuffer 并允许您附加数据：

```
val fileList = new ListBuffer[String]()
fileList += "begin" 
```

或者，您可以尝试在 groupedLines 上使用 foldLeft 来生成新结构：

```
groupedLines.foldLeft(List[String]()){ (newList, items) => 
    newList ::: "begin" :: items._1 ::: "end" :: Nil
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:38:22.007

使用折叠或递归可能是更好的风格，但要直接回答您的问题，您每次都会将 fileList 的引用更改为新的 List。`StringBuilder`如果您只想要一个字符串列表，不知道为什么要弄乱s 。

`List`不是附加东西的集合的好选择，虽然你可以在前面使用它，然后在最后反转所有内容。我会使用`Vector`，但这里是`List`：

```
fileList ::= "begin"
lines foreach {fileList ::= _}
fileList ::= "end" 
```

然后在`groupedLines foreach`块之后

```
fileList = fileList.reverse 
```

注意，`a ::= b`是 . 的语法糖`a = b :: a`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T23:24:11.953

以下方法在 Scala 中更为自然：

```
val bigFile = io.Source.fromFile("textFile.txt")
val groupedLines = bigFile.getLines.grouped(20000)
val fileList = groupedLines.flatMap("begin" +: _ :+ "end").toList 
```

不需要`var`s、可变集合或折叠。您可以将最后一行等效地写为：

```
val fileList = groupedLines.map("begin" +: _ :+ "end").flatten.toList 
```

这不像`flatMap`版本那样惯用，但它使我们正在做的事情更加清晰：我们正在为每个组预订，然后将它们全部粉碎。

# php - preg_replace_callback 匹配 HTML 段落中的 URL

> ID：12115895
> 
> 赞同：0
> 
> 时间：2012-08-24T20:02:31.300
> 
> 标签：php, regex, preg-replace-callback

我正在尝试获取单个 HTML 段落中的 URL，并使用 PHP 的`preg_replace_callback`. 现在，WordPress 通过以下方式做到这一点：

```
preg_replace_callback( '|^\s*(https?://[^\s"]+)\s*$|im', 'callback_function', $string ); 
```

但这与它自己的行上的 URL 匹配——它周围没有 HTML。我需要做的是匹配这样的 URL：

```
<p>http://youtube.com/</p> 
```

我不关心段落标记之前或之后的空格，我要做的就是提取该 URL 以将其替换为更详细的信息`preg_replace_callback`。

有什么帮助吗？

* * *

**更新：** 好的，我有一个帖子的文字，里面有很多这样的段落：

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis et nunc vel felis vulputate tincidunt. In dapibus tempus sollicitudin. Nullam quis ultricies tortor. Ut malesuada aliquet enim. Aliquam et lobortis urna. Sed commodo malesuada malesuada. Donec cursus nisi nec mauris venenatis pharetra. Curabitur ut leo purus.</p>

<p>http://youtube.com/</p>

<p>Etiam non odio tellus, vel imperdiet nunc. Praesent rutrum sagittis purus, quis pretium eros varius ut. http://google.com/ Ut id orci eu lacus aliquam luctus. Sed dolor quam, suscipit eu dapibus feugiat, lacinia vitae augue.</p> 
```

从该文本中，我只想提取段落中的[http://youtube.com/](http://youtube.com/)。我看到另一段中有一个 Google.com 链接，但我不希望这样。我想要的只是他们自己段落中的链接（或链接）。它会作为参数传递给我的回调“http://youtube.com/”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:09:15.203

你可以试试这个：[http ://regex101.com/r/rN4vB3](http://regex101.com/r/rN4vB3)

`/<p>\s*(https?:\/\/(?:(?!<\/?p>).)+)\s*<\/p>/`

逻辑是我们寻找一个`<p>`以 开头的标签，`http`然后将其他所有内容都放在那里，直到我们找到一个`</p>`。第一个反向引用将保存 URL。

这可能不是最佳解决方案，但应该按照您的要求进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:14:08.557

我可能误解了您的问题，但这里有一个 REGEXP（理想情况下）将匹配文本块中的任何 URL。

```
/<[A-Za-z0-9]+[^>]*>https?:\/\/([A-Za-z0-9-]\.)?[A-Za-z0-9][A-Za-z0-9-]+?\.[A-Za-z0-9]+[A-Za-z0-9-\._~:\/\?#\[\]@!$&'()\*+,;=]*<\/[A-Za-z0-9]+>/gi 
```

*请*记住，正则表达式非常复杂，几乎可以肯定有一些我在这里没有考虑过的边缘情况。如果你可以用一些在这里不起作用的例子来更新你的问题，或者留下评论，我会更新答案。

**更新 2**
这应该是相当有弹性的 - 考虑到 HTML 标签上的 cosideration 选项子域、https 和属性。

# java - JDBCTemplate INSERT INTO 语句：无法找出错误

> ID：12115896
> 
> 赞同：0
> 
> 时间：2012-08-24T20:02:45.707
> 
> 标签：java, sql, jdbctemplate

我一生都无法弄清楚为什么以下查询返回此错误消息：

```
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback;
 bad SQL grammar [INSERT INTO Survey (survey.PK1, survey.USERS_PK1, 
 survey.ACCREDITATION_PK1, survey.PRIVACY_TYPE_PK1, survey.EVAL_FORM_PK1,
 survey.TITLE, survey.DESCRIPTION, to_date(survey.START_DATE),
 survey.START_TIME, to_date(survey.END_DATE), survey.END_TIME,
 survey.HAS_GRADECENTER_COLUMN, survey.HAS_ANNOUNCEMENT )
VALUES(survey_SEQ.nextval,?,?,?,?,?,?,?,?,?,?,?,?)];
nested exception is java.sql.SQLSyntaxErrorException: ORA-00917: missing comma 
```

```
 String sql = "INSERT INTO UHCL_PR_survey " +
            "(" +
            "PK1, " +
            "USERS_PK1, " +
            "ACCREDITATION_PK1, " +
            "PRIVACY_TYPE_PK1, " +
            "EVAL_FORM_PK1, " +
            "TITLE, " +
            "DESCRIPTION, " +
            "to_date(START_DATE), " +
            "START_TIME, " +
            "to_date(END_DATE), " +
            "END_TIME, " +
            "HAS_GRADECENTER_COLUMN, " +
            "HAS_ANNOUNCEMENT " +
            ") " + 
            "VALUES (UHCL_PR_survey_SEQ.nextval,?,?,?,?,?,?,?,?,?,?,?,?) ";

    Object[] parameters = new Object[]{
            survey.getUsersPk1(),
            survey.getAccreditationPk1(),
            survey.getPrivacyTypePk1(),
            survey.getFormTypePk1(),
            survey.getTitle(),
            survey.getDescription(),
            new java.sql.Date(survey.getStartDate().toDate().getTime()),
            survey.getStartTimeAsUtilString(),
            new java.sql.Date(survey.getEndDate().toDate().getTime()),
            survey.getEndTimeAsUtilString(),
            survey.getGradeCenterColumn(),
            survey.getAnnouncement()
    };
this.jdbcTemplate.update(sql, parameters); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:27:20.020

不要在语句中的列名中`to_date`加上`START_DATE`and 。`END_DATE``INSERT`

一方面，该部分`INSERT`语句应该只列出列的名称。我怀疑您的列的名称是`START_DATE`and `END_DATE`，并且您的表中实际上没有名为`to_date(START_DATE)`and的列`to_date(END_DATE)`。

其次，你不需要`TO_DATE`在你的`INSERT`声明中的任何地方。JDBC 会自动为您将所有`Date`s 转换为相关的 DBMS 特定`DATE`类型。

# heroku - Heroku 检查蛞蝓并列出宝石

> ID：12115898
> 
> 赞同：0
> 
> 时间：2012-08-24T20:03:05.450
> 
> 标签：heroku

如何检查我的 Heroku 应用程序的 slug？我想看看它安装了哪些版本的 gem。我知道当 slug 编译时它会列出它安装的 gem，但我想看看我的应用程序*现在*正在使用哪些 gem （如果它重新编译的 gem 不同，我正在调查一个错误）

* * *

这是我能找到的关于我的应用程序的所有信息，宝石没有列出:(

```
$ heroku apps:info
=== placeboxy
Addons:        cron:daily
               pusher:sandbox
               shared-database:5mb

Database Size: 112k
Dynos:         1
Git URL:       
Owner Email:   
Repo Size:     1M
Slug Size:     6M
Stack:         bamboo-ree-1.8.7
Web URL:       
Workers:       0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:21:35.360

```
$ heroku run gem list
$ heroku run bundle exec gem list 
```

京东@Heroku 支持[https://help.heroku.com/tickets/60850](https://help.heroku.com/tickets/60850)

# sql-server-2008 - 在 SQL Server Management Studio 上使用解决方案/项目

> ID：12115899
> 
> 赞同：8
> 
> 时间：2012-08-24T20:03:06.137
> 
> 标签：sql-server-2008

[我在 dba.stackexchange 上发布了一个[相关问题](https://dba.stackexchange.com/questions/19141/alternatives-for-ssms-solutions-projects)，但没有得到什么回应，所以我想我会在这里发布。]

MSDN 文档是精神分裂的。在官方[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms173803%28v=sql.105%29.aspx)中，我们被告知不推荐使用“解决方案、项目和项目”。警告横幅上写着，

> “此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。”

但是，[在 MSDN 文档的其他地方](http://msdn.microsoft.com/en-us/library/ms167154(SQL.105).aspx)，使用 Projects & Solutions 仍然是存储脚本等的规定方法。

那么对于存储和打包构成数据库应用程序的各种脚本、查询和文件，您会推荐什么？我也很想知道你们中是否有人在当前工作中实际使用解决方案或项目框架，以及您使用它们的目的。

[注意：我意识到我可以将 VS2010 用于此功能，但我只对基于 SSMS 的方法感兴趣，因为我的团队的其他成员无法访问 VS（也出于[此问题](https://dba.stackexchange.com/questions/7599/why-should-i-use-visual-studio-2010-over-ssms-for-my-database-development)的答案中表达的原因） .]

我特别热衷于寻找在团队中共享 SQL 语句和查询的最佳实践——你会使用项目/解决方案（在源代码控制中备份）吗？或者自定义模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:55:06.760

虽然我现在倾向于使用 Visual Studio，但我都使用过，因为这似乎是 MS 的发展方向。我可以告诉你，在 SQL Server 2012 中，项目仍然受支持并且工作正常。

老实说，无论哪种方式，我都不会出汗——IMO SSMS 项目是一种存储脚本的轻量级方式，并且（个人偏好），如果我只使用数据库，我更喜欢使用 SSMS 而不是 Visual Studio，如果除了我喜欢我的键绑定的设置方式之外，没有其他原因，而且我已经习惯了，因为我是查询分析器时代的老前辈。

对我来说，我只使用 SSMS 项目，因为如果 MS 放弃此功能，我会受到惩罚，因为我只是创建一个简单的 VS 项目并在其中创建对我的文件的引用。

我会告诉您，您应该在 MS Connect 上发布一些内容，以提醒他们注意文档中的这种差异，但是已经多年了，我从来没有对我在 Connect 上所做的任何改进提出任何建议，除了采取任何行动之外“已关闭（不会修复）”或“已关闭（按设计）”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:25:56.693

我知道这是一个老问题，但我在尝试找到使用有组织的数据库脚本保持轻松团队合作的最佳方式时遇到了这个问题。我通过阅读 Scott Allen 的 5 篇关于如何将数据库置于源代码控制之下的系列文章找到了一个非常好的解决方案（N 种方法中的一种），并且在使用了一段时间后，我对它非常满意并且我想它会帮助你，所以让我们分享...

查看这篇文章： http: [//odetocode.com/blogs/scott/archive/2008/02/03/versioning-databases-branching-and-merging.aspx](http://odetocode.com/blogs/scott/archive/2008/02/03/versioning-databases-branching-and-merging.aspx)（这是第 5 篇也是最后一篇文章，请务必查看帖子 1 到 4 的“以前的条目”链接）

# cocos2d-iphone - 在 HelloWorld 项目的场景中添加另一个图层

> ID：12115901
> 
> 赞同：1
> 
> 时间：2012-08-24T20:03:13.663
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d-x HelloWorld 项目中，我试图在*场景*中添加另一个图层，并在数据成员中保留对该图层的引用。由于该函数`HelloWorld::scene()`是静态的，因此我无法在此函数中添加图层（因为我无法为图层设置数据成员）。

因此，我尝试按如下方式在函数中获取场景`init()`，但这会导致`scene = 0x00000000`.

我究竟做错了什么？

```
bool HelloWorld::init()
{
    bool bRet = false;
    do 
    {
        CC_BREAK_IF(! CCLayer::init());

        CCScene* scene = NULL;
        scene = CCDirector::sharedDirector()->getRunningScene();

        // add another layer
        HelloWorldHud* layerHud = HelloWorldHud::create();
        CC_BREAK_IF(! layerHud);
        // set data member
        this->layerHud = layerHud;

        // next line crashes (because scene  is 0x00000000)
        scene->addChild(layerHud);

    bRet = true;
    } while (0);
    return bRet;
} 
```

PS：我想将 hud 图层添加到场景而不是当前图层的原因是因为我正在移动当前图层并且不希望 hud 图层随之移动。

* * *

编辑：由于接受的答案允许多个选项，这就是我解决问题的方法：

1.) 从 init() 函数中移除了 HUD 层：

```
bool HelloWorld::init()
{
    bool bRet = false;
    do 
    {
        CC_BREAK_IF(! CCLayer::init());

    bRet = true;
    } while (0);
    return bRet;
} 
```

2.) 而是将 HUD 层添加到场景功能中（这也是 cocos2d-iphone 中的方式）：

```
CCScene* HelloWorld::scene()
{
    CCScene * scene = NULL;
    do 
    {
        // scene
        scene = CCScene::create();
        CC_BREAK_IF(! scene);

        // HelloWorld layer
        HelloWorld *layer = HelloWorld::create();
        CC_BREAK_IF(! layer);
        scene->addChild(layer);

        // HUD layer
        HelloWorldHud* layerHud = HelloWorldHud::create();
        CC_BREAK_IF(! layerHud);
        scene->addChild(layerHud);

        // set data member
        layer->layerHud = layerHud;

    } while (0);

    // return the scene
    return scene;
} 
```

本质上问题是我的假设，“因为函数`HelloWorld::scene()`是静态的，我不能在这个函数中添加层（因为我不能为层设置数据成员）。”，是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:04:59.427

该场景为 NULL，因为您甚至在构造第一个场景之前就调用了 getRunningScene()。

你的一个假设是错误的。HelloWorld::scene() 是静态的，但您仍然可以在此函数中添加图层（并且您可以设置图层的数据成员）

正确的方法是创建一个新的公共函数

```
setLeyerHud(HelloWorldHud* hud); 
```

在 HelloWorld 类和 CCScene* HelloWorld::scene() 函数中，添加以下行：

```
CCScene * scene = NULL;
do 
{
    // 'scene' is an autorelease object
    scene = CCScene::create();
    CC_BREAK_IF(! scene);

    // 'layer' is an autorelease object
    HelloWorld *layer = HelloWorld::create();
    CC_BREAK_IF(! layer);

    HelloWorldHud* layerHud = HelloWorldHud::create();
    CC_BREAK_IF(! layerHud);

    scene->addChild(layer);

    scene->addChild(layerHud);

    layer->setLayerHud(layerHud);

} while (0); 
```

这取决于您想要将 Hud 添加到 HelloWorld 层或您想要添加到场景中的天气。

I. 向场景中添加新图层：

删除代码

```
 CCScene* scene = NULL;
    scene = CCDirector::sharedDirector()->getRunningScene();

    // add another layer
    HelloWorldHud* layerHud = HelloWorldHud::create();
    CC_BREAK_IF(! layerHud);
    // set data member
    this->layerHud = layerHud;

    // next line crashes (because scene  is 0x00000000)
    scene->addChild(layerHud); 
```

从

```
HelloWorld::init() 
```

并更改代码

```
CCScene* HelloWorld::scene() 
```

到

```
CCScene * scene = NULL;
do 
{
    // 'scene' is an autorelease object
    scene = CCScene::create();
    CC_BREAK_IF(! scene);

    // 'layer' is an autorelease object
    HelloWorld *layer = HelloWorld::create();
    CC_BREAK_IF(! layer);

    HelloWorldHud* layerHud = HelloWorldHud::create();
    CC_BREAK_IF(! layerHud);

    scene->addChild(layer);

    scene->addChild(layerHud);
} while (0);

// return the scene
return scene; 
```

二、向 HelloWorld 层添加新层：

更改代码

```
 CCScene* scene = NULL;
    scene = CCDirector::sharedDirector()->getRunningScene();

    // add another layer
    HelloWorldHud* layerHud = HelloWorldHud::create();
    CC_BREAK_IF(! layerHud);
    // set data member
    this->layerHud = layerHud;

    // next line crashes (because scene  is 0x00000000)
    scene->addChild(layerHud); 
```

在

```
HelloWorld::init() 
```

到

```
 // add another layer
    HelloWorldHud* layerHud = HelloWorldHud::create();
    CC_BREAK_IF(! layerHud);

    // next line crashes (because scene  is 0x00000000)
    this->addChild(layerHud); 
```

# permissions - stackmob 模式和权限

> ID：12115905
> 
> 赞同：1
> 
> 时间：2012-08-24T20:03:36.067
> 
> 标签：permissions, schema, relationships, stackmob

我有一个我所追求的结构，但我无法确定如何使用 stackmob 权限和模式来设置它。

**-Users** (userID,username,password) 我希望用户能够有朋友，所以我为名为friends 的模式创建了一个“关系”。它是一种“一对多”关系，与其他用户相关联，并被索引。

好的，所以我们有了一个好的开始......

现在我想要一个新的架构

**-对象**

这就是它变得棘手的地方......

我希望登录用户能够创建对象。我希望对象的所有者和所有者朋友能够读取该对象。我希望所有者能够更新对象，并希望所有者能够删除。

**C -**所有者（简单，设置为所有者）

**R -**所有者和朋友（如何？）

**U -**所有者（简单，设置为所有者）

**D -**所有者（简单，设置为所有者）

如何设置阅读权限，让业主朋友可以阅读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:52:52.947

目前，您无法为所有者和关系设置权限。您只能选择其中之一。解决方法是将所有者添加到好友列表中，然后对好友关系设置读取权限。

有关允许关系权限的更多信息，请参见 StackMob 的文档：[https ://www.stackmob.com/devcenter/docs/Access-Controls:-Schema-Permissions#a-related_users_on_the_sm_owner_instance](https://www.stackmob.com/devcenter/docs/Access-Controls:-Schema-Permissions#a-related_users_on_the_sm_owner_instance)

# javascript - 用玉插入包含指令？

> ID：12115906
> 
> 赞同：3
> 
> 时间：2012-08-24T20:03:45.940
> 
> 标签：javascript, node.js, include, interpolation, pug

相当不言自明，但这是我想做的：

```
- foo = ['elements','here']
include includes/specifications/#{foo.length} 
```

似乎不支持插值，因为玉将其解释为包含路径的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:36:39.827

不幸的是，根据创建者的说法，在 Jade 的这个阶段无法做到这一点：

参考资料：[https ://github.com/visionmedia/jade/issues/569](https://github.com/visionmedia/jade/issues/569)

# maven - 我可以让 Maven 配置文件将 webResources 添加到战争中并仍然添加未配置文件的 webResources 吗？

> ID：12115908
> 
> 赞同：9
> 
> 时间：2012-08-24T20:03:57.030
> 
> 标签：maven, maven-war-plugin

例子：

我希望并期望以下 pom 在“配置文件”配置文件处于活动状态时部署 profileResources 和 commonResources，但它仅部署 profileResources。我该怎么做才能达到预期的效果？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>test</artifactId>
  <packaging>war</packaging>
  <version>0.0.0</version>
  <profiles>
    <profile>
      <id>profile</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
              <webResources>
                <resource>
                  <directory>src/main/profileResources</directory>
                </resource>
              </webResources>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
          <webResources>
            <resource>
              <directory>src/main/commonResources</directory>
            </resource>
          </webResources>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

**工作版本（供将来参考）**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>test</artifactId>
  <packaging>war</packaging>
  <version>0.0.0</version>
  <profiles>
    <profile>
      <id>profile</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
              <webResources>
                <resource>
                  <directory>src/main/profileResources</directory>
                </resource>
              </webResources>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
          <webResources combine.children="append">
            <resource>
              <directory>src/main/commonResources</directory>
            </resource>
          </webResources>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

**损坏版本和工作版本之间的 Git Word 差异**

```
diff --git a/tmp/broken-pom.xml b/tmp/working-pom.xml
index 2fd9bbf..b04683f 100644
--- a/tmp/broken-pom.xml
+++ b/tmp/working-pom.xml
@@ -31,5 +31,5 @@
        <version>2.1.1</version>
        <configuration>
          <webResources{+ combine.children="append"+}>
            <resource>
              <directory>src/main/commonResources</directory> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T12:25:16.230

尝试添加`combine.children="append"`到`resources`非配置文件插件中的元素 - 我认为它搞砸了，因为默认行为意味着配置文件设置将覆盖树上方具有相同名称的任何内容。有关合并/附加属性的详细信息，请参阅[http://maven.apache.org/pom.html#Plugins](http://maven.apache.org/pom.html#Plugins)。

# ios - openSessionWithAllowLoginUI 几乎总是返回 NO

> ID：12115909
> 
> 赞同：2
> 
> 时间：2012-08-24T20:04:00.717
> 
> 标签：ios, facebook

我最近完成了将最新的 FB iOS SDK (3.0) 集成到我的应用程序 (iOS 5) 中。我已经逐步完成了教程，根据 FB 提供的文档，一切似乎都已到位。我遇到的问题是，每当我检查是否需要通过以下方式进行身份验证时：

if(![self openSessionWithAllowLoginUI:NO]) { [self openSessionWithAllowLoginUI:YES]; }

...经常（并且几乎总是在 [FBSession.activeSession close] 之​​后）openSessionWithAllowLoginUI 返回 NO，我必须转换到身份验证对话框才能获得有效的会话。据我了解，[FBSession.activeSession close] 不应破坏 SDK 重用旧令牌的能力，并允许我重新创建会话而无需显示登录对话框。

请注意，在我的应用程序中，我不需要在应用程序生命周期内进行 Facebook 身份验证。因此，我倾向于按需建立会话，并在我完成时使用 [FBSession.activeSession close] 将它们关闭，而不是在 applicationWillTerminate 中仅使用 [FBSession.activeSession close]。

有人对我可能做错的事情或尝试的事情有任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:32:33.963

我有同样的问题，我不知道......选择器 openSessionWithAllowLoginUI: 无法为用户检索保存的会话，我总是必须向用户显示登录 UI。

希望尽快解决！

更新 - - - - - - -

我理解的事情：当用户登录 Facebook 时，FB SDK 对 sessionStateChanged 进行了 2 次调用：

第一个用于 FBSessionStateOpen，第二个用于 FBSessionStateClosed。因此，如果您检查 AppDelegate.m 文件，您会发现如下代码：

```
case FBSessionStateClosed:
case FBSessionStateClosedLoginFailed:
     [FBSession.activeSession closeAndClearTokenInformation];
     break; 
```

调用 closeAndClearTokenInformation: 清除所有令牌信息，因此每次运行应用程序时，都会向用户询问登录 UI。

现在的问题是：为什么 Facebook 首先发送 FBSessionStateOpen 并立即发送 FBSessionStateClosed ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T20:00:17.580

我永远无法让 openSessionWithAllowLoginUI 正常工作。相反，使用这个：

```
[FBSession openActiveSessionWithPermissions:[NSArray arrayWithObject:@"user_relationships"] allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    switch (status) {
        case FBSessionStateOpen:
            [self start];
            break;
        case FBSessionStateClosed:
            break;
        case FBSessionStateCreated:
            break;
        case FBSessionStateCreatedOpening:
            break;
        case FBSessionStateClosedLoginFailed:
            break;
        case FBSessionStateOpenTokenExtended:
            break;
        case FBSessionStateCreatedTokenLoaded:
            break;
    }

}]; 
```

添加一个 [self start] 方法并修改权限数组以满足您的需要。这始终有效。

# unicode - UnicodeWarning：Unicode 相等比较。如何替换 NavigableString 数据类型中的非标准字符？

> ID：12115910
> 
> 赞同：1
> 
> 时间：2012-08-24T20:04:00.100
> 
> 标签：unicode, python-2.7, beautifulsoup, urllib, scrape

我正在使用 BeautifulSoup 使用 Python 2.7 抓取网站。这是我的代码：

```
# -*- coding: utf-8 -*-

from BeautifulSoup import BeautifulSoup
import urllib
import json

url = 'http://www.website.com'
file_pointer = urllib.urlopen(url)
html_object = BeautifulSoup(file_pointer)

type_select = html_object('select',{'id':'which'})

for option in type_select:
    value = option('option')
    for type_value in value:
        type =  type_value.contents[0]
        param_1 = type_value['value']
        print 'Type:', type

        url2 = 'http://www/website.com/' + param_1
        file_pointer2 = urllib.urlopen(url2)
        html_object2 = BeautifulSoup(file_pointer2)
        result = json.loads(str(html_object2))

        for json1 in result['DATA']:
            category = json1[0].title()
            param_2 = json1[0]
            print '   Category:', category

            url3 = 'http://www/website.com/' + param_2 + '&which=' + param_1
            file_pointer3 = urllib.urlopen(url3)
            html_object3 = BeautifulSoup(file_pointer3)
            result2 = json.loads(str(html_object3))

            for json2 in result2['DATA']:
                sub_category = json2[0]
                param_3 = sub_category.replace(' ','+').replace('&','%26')
                print '       sub_category:', sub_category

                for i in param_3:
                    if i == 'â':
                        print i
  ... 
```

我需要替换`'â'`第四个 URL 请求的字符以继续我的抓取，但无论我尝试替换什么（`u'\u2019'`、`â`等），我都会得到一个`UnicodeEncodeError`.

我尝试转换`param_3`为字符串（因为它是 BeautifulSoup Navigable String 数据类型）并替换，但我得到了同样的错误，除了我的`str(param_3)`行。我终于尝试了这个for循环比较并得到警告：

```
UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
if i == 'â': 
```

我在这里不知所措。如何翻译此字符并将其替换为 中的其他字符`param_3`？

任何帮助表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:05:50.050

`BeautifulSoup`返回 Unicode 字符串，因此在对它们进行操作时使用 Unicode 字符串。也检查出来`urllib.quote_plus`。看起来它可以完成您想要的替换。在将`.encode`Unicode 字符串与`quote_plus`.

# c - Arduino草图不 起作用，引脚不输出任何东西

> ID：12115912
> 
> 赞同：4
> 
> 时间：2012-08-24T20:04:13.150
> 
> 标签：c, arduino, led, infrared, pins

我有一个 Arduino Uno，我正试图用它来控制我的 s107g 遥控直升机。可以下载此代码以及一些显示测试的 Youtube 视频。所以当我用 IR led 尝试它时，它不起作用。

我用普通的 LED 测试了它，我用万用表检查了引脚 8 和 13（正在使用的引脚），但引脚没有输出任何东西。我相信我使用的代码是正确的。我打开串行控制台，当我键入命令时，它会显示应有的信息，Arduino（TX 和 RX）上的灯闪烁并且灯 L 保持亮起。

代码将在下面。我很确定我使用它是正确的，所以如果你能帮助我，我将不胜感激。我是新手。此外，它说将红外灯连接到引脚 8。我不确定我是否做得对。（我将正极连接到引脚 8，负极连接到地）

链接到站点：[通过 Arduino 控制 S107G 直升机](http://abarry.org/s107g-helicopter-control-via-arduino/)

[代码](http://pastebin.com/QXWVPNh8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:48:36.650

代码似乎工作正常。在我的 arduino 而不是 IR 中，我尝试使用普通 LED 并将`delayMicroseconds()`函数中的延迟更改为更大的值（这样我的眼睛可以看到闪烁），我可以看到 LED 闪烁。我还可以在串行监视器上看到所需的输出。我不确定问题是什么。一些简单的代码，比如让 LED 闪烁就可以在你的 arduino 上正常工作吗？

# algorithm - 使用 Perlin Noise 生成瓦片地图的基本问题

> ID：12115913
> 
> 赞同：1
> 
> 时间：2012-08-24T20:04:19.777
> 
> 标签：algorithm, perlin-noise

我正在尝试为 2d tilemap 游戏制作地图生成器（类似于 Civilization 之类的游戏 - 我希望能够创建小岛屿或大大陆等）。我发现一篇文章几乎可以满足我的需求，但它是用 Flash 编写的。看起来有一个方便的函数可以从 perlin 噪声生成位图：

```
class BitmapData
function perlinNoise(
    baseX:Number, 
    baseY:Number, 
    numOctaves:uint, 
    randomSeed:int, 
    stitch:Boolean, 
    fractalNoise:Boolean, 
    channelOptions:uint = 7, 
    grayScale:Boolean = false, 
    offsets:Array = null): 
```

这在文章中使用（但我使用的是 java）。所以现在我一直在尝试自己实现 perlin 噪声（基本上是找到一个纯 java 实现并复制/粘贴它）。

我只是想了解使用柏林噪声背后的基本原理——我的基本理解：

1.  定义你想要的地图大小（在我的例子中大约是 100 x 50 瓦片）。
2.  初始化一个 perlin 噪声对象（设置参数，如频率等 - 不太确定这些参数如何影响岛屿大小等，但暂时搁置一旁）。
3.  遍历我的地图中的每个图块，并向 perlin 噪声对象询问一个值。返回的值可以解释为我猜测的高度值。
4.  现在根据高度值分配瓷砖类型。

迭代代码可能类似于：

```
for (int x = 0; x < 100; x++) {
    for (int y = 0; y < 50; y++) {
        int height = perlin.getValue(x, y);
        if (height < 5); // this tile is water
        else if (height < 20); // this tile is shore
        else if (height < 40); // this tile is hill
        else // this tile is mountain
    }
} 
```

这通常正确吗？这至少是一个起点。

我正在寻找的文章（用闪存写的）： [http ://www.nolithius.com/game-development/world-generation-breakdown](http://www.nolithius.com/game-development/world-generation-breakdown)

Flash BitmapData 类方便地内置了 perlin 噪声函数：http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#perlinNoise [(](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#perlinNoise) )

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:10:47.107

给定适当的初始化，就我所见，您的迭代代码应该可以工作。即：如果您想将 2D Perlin 噪声阈值设置为水、岸、山和山。

[此页面](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)对 Perlin 噪声和伪代码示例进行了一些有用的解释。本质上，该算法将频率增加和幅度减小的噪声函数加在一起。

# cuda - 根据另一个常量声明设备常量

> ID：12115914
> 
> 赞同：2
> 
> 时间：2012-08-24T20:04:28.643
> 
> 标签：cuda

当我尝试根据另一个常量定义一个常量时，它们都存储在设备常量内存中，如下所示：

```
__device__ __constant__ float x=0.1;
__device__ __constant__ float y=2*x; 
```

我得到错误：

> 错误：无法为设备上的非空构造函数或析构函数生成代码

有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T01:30:24.787

`__constant__`不一样`const`。特别是，`__constant__`可以从主机修改对象。所以编译器不能应用编译时评估。无法在`__constant__`运行时从设备代码中写入对象，因此也无法进行运行时初始化。此外，设备没有初始化例程可以在实际内核代码开始执行之前执行这种初始化。编译器产生的错误信息似乎暗示了最后一个事实。

您可以使用已定义的常量，例如：

```
#define MAGIC_NUMBER_1  (0.1f)
#define MAGIC_NUMBER_2  (2.0f * MAGIC_NUMBER_1)

__constant__ float x = MAGIC_NUMBER_1;
__constant__ float y = MAGIC_NUMBER_2; 
```

# objective-c - Core-Plot 如何格式化图例，见图

> ID：12115916
> 
> 赞同：1
> 
> 时间：2012-08-24T20:04:32.597
> 
> 标签：objective-c, ios, core-plot, legend-properties

我一直在尝试解决这个问题，但没能做到。我也无法在网上找到任何好的例子。

我试过 rowHeightsThatFit: 但没有让它工作。

我想在一行替代方案中布置底部图例，以确保它被看到。

![在此处输入图像描述](../Images/9226aace75fdab6f31cf4b265c3ef78f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:32:14.257

从`CPTLegend` [类参考](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_legend.html)：

您将需要`numberOfRows`从布局属性中修改属性：

> **numberOfRows**：图例条目的所需行数。如果为零 (0)（默认值），则将自动确定行数。如果 numberOfRows 和 numberOfColumns 都大于零，但它们的乘积小于图例条目的总数，则某些条目将不会显示。

还要小心你如何设置`numberOfColumns`属性：

> **numberOfColumns**：图例条目的所需列数。如果为零 (0)（默认值），则将自动确定列数。如果 numberOfRows 和 numberOfColumns 都大于零，但它们的乘积小于图例条目的总数，则某些条目将不会显示。

# windows-phone-7 - 无法转换字符串格式的加密数据，因为“由于其保护级别而无法访问”

> ID：12115917
> 
> 赞同：0
> 
> 时间：2012-08-24T20:04:34.877
> 
> 标签：windows-phone-7

我正在尝试使用 RSA 算法加密文本，并在加密后将其转换为字符串格式。现在，虽然存在字节格式的加密文本，但我无法将其转换为字符串，因为存在保护级别错误。我对加密系统很陌生，我不知道是否需要以某种方式处理数据以便复制/转换。你能澄清一下这个问题吗？

这是一段代码：

```
 RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
    UnicodeEncoding encode = new UnicodeEncoding();

    RSAParameters PublicKey;
    RSAParameters PrivateKey;
    byte[] encBytes;
    string encString;

     // ********************* ENCRYPT THE TEXT WITH PUBLIC KEY *********************
    private void buttonEncrypt_Click(object sender, RoutedEventArgs e)
    {            
        rsa.ImportParameters(PublicKey);

        encBytes = rsa.Encrypt(encode.GetBytes(textBoxIn.Text), false);
        encString = encode.GetString(encBytes);   <-- INACCESSIBLE DATA ERROR                  
        rsa.Dispose();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:22:08.553

你试过[这个方法](http://msdn.microsoft.com/en-us/library/05cts4c3%28v=vs.95%29)吗？

```
encString = encode.GetString(encBytes, 0, encBytes.Length); 
```

# cocos2d-iphone - Cocos2d - 基于触摸改变精灵动画（精灵表）

> ID：12115920
> 
> 赞同：1
> 
> 时间：2012-08-24T20:04:44.303
> 
> 标签：cocos2d-iphone

我想我主要是在对我使用 Player 类的方式以及如何改进它进行批评之后。

我的 spritesheet 包含我认为我需要的所有序列来执行我所追求的动作。但我最初想要的是，当我的“跳跃”按钮被按下时，角色正在经历的动画被停止，并且它使用的 spritesheet 中的“跳跃”序列。（步行 - 例如是第 7 帧到第 9 帧，跳跃是第 10 帧到第 13 帧）。

以下是我制作玩家精灵的方式：

播放器.m：

```
-(id)playerCharacter {
     if (self = [super init]) {

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Soldier.plist"];

    // Create a sprite sheet with the Player images
    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"Soldier.png"];
    [self addChild:spriteSheet z:15];

    NSMutableArray *walking = [NSMutableArray array];
    for(int i = 7; i <= 9; ++i) {
        [walking addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Soldier%d.png", i]]];
    }

    CCAnimation *walkingAnimation = [CCAnimation animationWithSpriteFrames:walking delay:0.2f];

    _walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkingAnimation]];

    walkAnim.restoreOriginalFrame = NO;

    [self runAction:_walkAction];

    self.velocity = ccp(0.0, 0.0);  
}
return self;
} 
```

GameLevelLayer.m

```
 player = [[Player alloc] playerCharacter];
      player.position = ccp(100,50);
      [map addChild:player z:15]; 
```

我想我的问题是..我是否应该将该方法的整个 CCAnimation 组件移出那里，进入一个新方法，该方法正在检查一系列定义 spritesheet / 动画序列的 BOOL？

我什至以最有效的方式使用上述代码吗？虽然我很欣赏它按原样工作.. 我宁愿了解我是否正确地做事，也不愿继续走一条增加我的项目效率低下的道路。

我非常感谢任何反馈和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T18:45:08.660

您没有正确使用 CCSpriteBatchNode。把它想象成一个层，它将保存来自单个精灵表的所有精灵。你的玩家应该被添加到batchnode，你的batchnode被添加到你的游戏层。因此，您的 Player 应按如下方式创建：

```
-(id)playerCharacterOnSheet:(CCSpriteBatchNode*)batchNode
{
     // this is assuming Player is a CCSprite subclass
     // set this to the "static"/default player sprite image
     if (self = [super initWithSpriteFrameName:@"Soldier1.png"])
     {
        // Load self to the batchnode
        [batchNode addChild:self];

        NSMutableArray *walking = [NSMutableArray array];
        for(int i = 7; i <= 9; ++i) {
            [walking addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Soldier%d.png", i]]];

        CCAnimation *walkingAnimation = [CCAnimation animationWithSpriteFrames:walking delay:0.2f];

        _walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkingAnimation]];

        walkAnim.restoreOriginalFrame = NO;

        [self runAction:_walkAction];

        self.velocity = ccp(0.0, 0.0);  
    }
    return self;
} 
```

然后在 GameLevelLayer 中，创建 batchNode 和 player：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Soldier.plist"];
CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"Soldier.png"];
[map addChild:spriteSheet];

player = [[Player alloc] playerCharacterOnSheet:spriteSheet];
player.position = ccp(100,50); 
```

要执行其他操作，只需将方法添加到您的 Player 类以执行它们（并停止任何其他正在运行的操作）。例如：

```
-(void)jumpAction
{
    [self stopAllActions];

    NSMutableArray *jumping = [NSMutableArray array];
    for(int i = 10; i <= 13; ++i) {
        [jumping addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Soldier%d.png", i]]];
        }

    CCAnimation *jumpingAnimation = [CCAnimation animationWithSpriteFrames:jumping delay:0.2f];

    CCAction *jumpAction = [CCAnimate actionWithAnimation:jumpingAnimation ];
    [self runAction:jumpAction];

} 
```

要执行，请调用：

```
[player jumpAction]; 
```

# c# - 错误无法加载文件或程序集“microsoft.visualbasic.powerpacks.vs”

> ID：12115923
> 
> 赞同：2
> 
> 时间：2012-08-24T20:05:01.240
> 
> 标签：c#, visual-studio-2010, sql-server-2008, installshield-2010

我在 Visual Studio 2010 中使用 c# 和 sql server 作为数据库创建了一个程序，并使用 installshield 安装包一切正常，可以完全安装

但是，当我打开程序时，它会出现此错误

```
could not load file or assembly 'microsoft.visualbasic.powerpacks.vs' version=10.0.0... 
```

我在 Visual Studio 中引用了 microsoft.visualbasic.powerpacks 并将 microsoft.visualbasic.powerpacks.dll 文件从开发人员 pc 复制到安装在其上的程序的 pc 上，但仍然给出相同的错误

请帮忙

# iphone - Core Data 保存时无法识别的选择器异常

> ID：12115927
> 
> 赞同：0
> 
> 时间：2012-08-24T20:05:15.023
> 
> 标签：iphone, objective-c, ios, core-data

这是一个很长的镜头，因为谷歌搜索绝对没有返回任何内容。有时，通常在值得进一步调查的地方，但在我可以追踪它何时或如何发生的地方不够频繁，当我调用`save:`a时，我得到以下异常`NSManagedObjectContext`：

```
-[_NSObjectID_48_0 _stateFlags]: unrecognized selector sent to instance 0x8675570 
```

上下文是类型为的子上下文`NSPrivateQueueConcurrencyType`，它是类型为主上下文的子上下文`NSMainQueueConcurrencyType`。

除了堆栈跟踪之外，我真的没有任何其他信息： ![在此处输入图像描述](../Images/1377f00c35beb9d8325b4ae7a722590f.png)

任何密码学家都可以从堆栈跟踪中做出任何事情来想出一些关于问题可能是什么的可能想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:14:36.127

我们遇到了同样的问题。它是由调用 NSManagedObjectContext::reset 引起的。重置使属于调用重置的上下文的所有 NSManagedObjects 无效。继续使用已失效的 NSManagedObject 实例可能会导致意外结果。这是那些意想不到的结果之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T01:48:54.640

日志消息表明，出于某种原因，我们正在寻找 上的属性/方法`_stateFlags`，`_NSObjectID_48_0`其中一个是私有 API，另一个是私有类。

快速运行

`class-dump /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData`

似乎表明（在其他地方）`_stateFlags`是`NSManagedObject`. 我找不到对`_NSObjectID_48_0`在我的 Mac 上命名的私有类的任何引用，但仅基于名称，它似乎与`NSManagedObjectID`.

这是一个很长的镜头，但我想知道你是否在某个时候通过了`NSManagedObjectID`一个`NSManagedObject`预期的地方？将代码 grep 显式强制转换为`NSManagedObject`.

另一个罪魁祸首可能是将 NSManagedObjectIDs 插入到弱类型数据结构（我正在查看的字典/数组/集合）中，这可能允许您在不明确说明的情况下“强制”到 NSManagedObject。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:56:43.967

我在今年的 WWDC 上与 Xcode 工程师讨论了同样的问题。当您在调试器中获得此异常时，您无法说出有关该对象的任何信息。但是，如果您查看控制台应用程序中的崩溃日志，他们确实有无法响应选择器的对象 [认为我做对了]。

您需要在不运行调试器时让应用程序崩溃 - 这样系统才能处理崩溃。

同步您的手机。

打开控制台~/Library/Logs/CrashReporter/MobileDevice/，找到崩溃报告，查看报告。我被告知要输入一个错误 - lldb 应该提供相同级别的详细信息 - 我做到了！

希望这对您有所帮助。

# xpath - xpath 帮助 -- 前面和后面的段落

> ID：12115928
> 
> 赞同：2
> 
> 时间：2012-08-24T20:05:24.097
> 
> 标签：xpath

我从给定段落的 xml:id 开始，我试图获取前一段的 xml:id。这是我到目前为止所拥有的。现在，我得到了前面段落的所有 xml:id。但我只想要前一段。

```
//p[following::p[@xml:id='d1l46adaacp']]/@xml:id 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:23:40.530

这是我在发帖后发现的答案。

基本上我是在向后考虑事情。我正在寻找任何与指定`p`的追随者。我无法将 [1] 添加到末尾，因为这给了我任何位于其父元素中的第一个元素。`p``xml:id``p`

我在下面的效果更好。现在，我没有尝试直接转到上一段，而是从`xml:id`我知道的那一段开始，然后转到上一段，在第一个 [1] 处停止，并询问 xml:id。

```
//p[@xml:id='d1l46adaacp']/preceding::p[1]/@xml:id 
```

# android - 通过 ADB 安装新的启动器应用程序时，家庭的默认应用程序不会被清除

> ID：12115933
> 
> 赞同：1
> 
> 时间：2012-08-24T20:05:41.430
> 
> 标签：android, android-intent, android-manifest, adb

当我下载一个新的启动器并安装它时，下次我回家时，我会看到一个对话框，让我选择从主页按钮启动哪个应用程序。

我正在开发自己的启动器应用程序，当我从 ADB 安装它时，它不会清除默认设置，并在我下次回家时给我提示。如果我手动清除默认设置，它会显示出来，但简单地安装它并不会像我从 Play 商店安装应用程序时那样清除默认设置。

因此，基本上，当您安装（甚至更新）应用程序时，清除默认应用程序的内容是什么，以及如何让我的应用程序做到这一点。我不是想强制它成为默认值，我只是希望我的安装重置默认值并允许我再次选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:28:42.867

通过安装应用程序`adb`很方便，但它确实绕过了一些事情。最明显的是，如果您的应用程序请求权限，它会绕过您通常会在安装时获得的整个权限确认屏幕。它也不会清除`<intent-filter>`您可能拥有的任何给定应用程序的首选应用程序，例如用于主屏幕启动器的应用程序。

为了测试这些东西，最简单的解决方案是从“teh interwebs”下载你的应用程序，也许最简单的方法是将你*的*应用程序扔到 DropBox 上并通过他们的客户端下载。不过，任何具有正确 MIME 类型的 APK 文件 ( `application/vnd.android.package-archive`) 的网站都可以。请注意，您需要选中“是的，是的，我希望能够从 Play 商店以外的地方获取应用程序，以便大声喊叫”复选框（在开发人员选项或设置中的应用程序中，具体取决于 Android操作系统版本）。

> 我发誓你永远是回答我任何安卓问题的人。=)

现在，现在，这应该是一个“适合家庭”的开发者资源。请不要发誓。

:-)

# c++ - 在构造函数中提升 enable_if

> ID：12115934
> 
> 赞同：0
> 
> 时间：2012-08-24T20:05:52.160
> 
> 标签：c++, boost, enable-if

我有一个模板类，我只想在类型为双精度时启用某个构造函数。这段代码有什么问题？

```
template<typename T>
class B: public A<T>
{
public:
    B(int arg1=0, typename boost::enable_if_c<boost::is_same<T, double>::value>=0);
}

int main(int argc,char *argv[])
{
B<double> B( 6, 6 );
} 
```

我收到错误消息：“'boost::enable_if_c' 类型参数的默认参数的类型为 'int'”，但我不确定这是什么意思。

非常感谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:28:40.250

好吧，你真的不能那样做。如果你提供了一些`T`not `double`，那么编译器会尝试 resolve `enable_if_c<false>::type`，这会失败，导致整个类实例化失败，而不仅仅是构造函数。

您可以使用 C++11 的默认函数模板参数来实现相同的目的。

`boost`下面的代码使用您在代码中使用的功能的 C++11 版本实现了该功能：

```
#include <type_traits>

template<typename T>
class B {
public:
    // T == double -> this ctor can be used
    template<typename U = T, class = typename std::enable_if<std::is_same<U, double>::value>::type>
    B(int arg1, double arg2) {}

    // Default ctor, available to every class.
    B() {}
};

int main(int argc,char *argv[])
{
    B<double> b_double( 6, 6 );
    B<int> b_int;

    // This line fails
    //B<int> b_fails(6, 6);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:45:46.387

在这种情况下您不能使用 SFIANE，因为它仅在*函数*模板参数的替换失败时才有效，而不是在*类*模板参数的替换失败时有效。

你需要的是*专业化*。

但据我了解，您应该在您的`double`案例中复制常见案例的实现，但只添加新的构造函数。

在这种情况下，我建议我使用一些连线技巧：您可以从您的专业领域的常见案例中得出。

那么你面临两个问题：

1.  您仍然应该有`double`专门的常见案例来推导
2.  你不应该调用普通情况下的默认构造函数，而应该调用一些专门的构造函数。

我们去：

```
template<typename T, bool = false>
class B
{
public:
    B() { std::cout << "B common\n"; }
    void yahoo() { std::cout << "yahoo!\n"; }

protected:
    struct internal_t;
    B(internal_t*){}

};

template <>
struct B<double, false>: public B<double, true>
{
    B(int, int):B<double, true>(0) { std::cout << "B double\n"; }
};

int main(int argc,char *argv[])
{
    B<int> ib;
    B<double> b(2,5);

    ib.yahoo();
    b.yahoo();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:25:20.113

```
B(int arg1=0, typename boost::enable_if_c<boost::is_same<T, double>::value>=0); 
```

您忘记了`boost::enable_if_c`指定类型的第二个参数，忘记了`::type`，并且忘记了参数名称。

如果您想要类似的东西`B(int arg1=0, int arg2=0)`，请使用

```
B(int arg1=0,
  typename boost::enable_if_c<boost::is_same<T, double>::value, int>::type arg2=0); 
```

更好的是，不要使用下划线 c 版本的 enable if。只需在以下情况下使用启用：

```
B(int arg1=0,
  typename boost::enable_if<boost::is_same<T, double>, int>::type arg2=0); 
```

# linux - 在 linux shell 脚本中使用 Postgres 事务

> ID：12115940
> 
> 赞同：0
> 
> 时间：2012-08-24T20:06:39.633
> 
> 标签：linux, postgresql, shell

我正在开发一个 shell 脚本，它遍历一系列 Postgres 数据库表名并转储表数据。例如：

```
# dump data

psql -h $SRC_IP_ADDRESS -p 5432 -U postgres -c "BEGIN;" AWARE

do
 :
 pg_dump -U postgres -h $IP_ADDRESS -p 5432 -t $i -a --inserts MYDB >> \
 out.sql
done

psql -h $IP_ADDRESS -p 5432 -U postgres -c "COMMIT;" MYDB 
```

但是，我担心对数据库的并发访问。由于 Postgres 没有数据库锁，我尝试在循环周围包裹一个 BEGIN 和 COMMIT（使用 psql，如上所示）。这导致来自 psql 命令的错误消息，说：

```
WARNING:  there is no transaction in progress 
```

有什么办法可以做到这一点？如果没有，有什么替代方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:19:08.503

您的脚本有两个主要问题。第一个问题是实际的：事务是特定会话的一部分，所以你的第一个`psql`命令，它只是启动一个事务然后退出，没有实际效果：事务在命令完成时结束，后面的命令不共享它。第二个问题是概念上的：在事务 X 提交之前，事务 X 中所做的更改不会被事务 Y 看到，但是一旦事务 X 提交，它们就会立即被事务 Y 看到，即使事务 Y 仍然在-进步。这意味着，即使您的脚本确实成功地将整个转储包装在一个事务中，这也不会产生任何影响，因为您的转储仍然可以看到从一个查询到下一个查询的不一致结果。（即：包装一系列的没有意义`SELECT`s 在事务中。`UPDATE`一个事务只有在它包含一个或多个 DML 语句（ s 或`INSERT`s 或s）时才有意义`DELETE`。）

但是，由于您实际上并不需要您的 shell 脚本来遍历您的表列表；相反，您可以通过传递多个标志`pg_dump`一次给出所有表名：`-t`

```
pg_dump -U postgres -h $IP_ADDRESS -p 5432 \
    -t table1 -t table2 -t table3 -a --inserts MYDB >> out.sql 
```

并且[根据文档](http://www.postgresql.org/docs/8.4/static/app-pgdump.html)，`pg_dump`“即使数据库正在同时使用，也会进行一致的备份”，因此即使有帮助，您也不必担心设置事务。

（顺便说一下，该`-t`标志还支持 glob 表示法；例如，`-t table*`将匹配名称以 . 开头的所有表`table`。）

# jquery - 使用 ajax 和 CSS3 动画动态加载 wordpress 内容

> ID：12115941
> 
> 赞同：1
> 
> 时间：2012-08-24T20:06:43.227
> 
> 标签：jquery, ajax, html, wordpress, css

是的，所以我决定给自己设定一个挑战，作为一种学习曲线。我以前从未使用过 ajax，但我觉得这是我必须学习的东西，所以有什么比在新的投资组合网站上更好的机会来做这件事了。

网站的主要概念涉及网站内容在 960 边缘的折叠后滑动，因此您单击一个链接，当前内容全部滑出到部分隐藏的折叠中，然后折叠会调整大小以匹配新内容块，并且新内容从折叠下方滑入。到目前为止，我只是使用 Wordpress 循环和一些基本的 jquery 以一种简单的方式完成了新闻。（仍然无法在新内容进入之前让折叠正确调整其高度）

我有这个（http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html）作为开始的基础，但它似乎并没有完全达到我的预期目标。

保存设置一些愚蠢的 jsfiddle，这里是网站[http://paradoxdevelopment.org/](http://paradoxdevelopment.org/)

编辑：抱歉，解释分心了，忘了问确切的问题：

我怎样才能做到这一点，以便当您单击内部链接时，它会导致以下事件链：

内容框滑出-> 内容更改-> 折叠增长-> 内容框滑入新内容

编辑2：我意识到我并没有真正让自己清楚。我设法让我的头脑围绕 ajax 加载内容，问题是内容以不同的方式加载到不同的页面。举些例子：

主页有 3 个最近的站点从顶部的垂直折叠处滑落，一条从左侧滑入的新闻帖子，以及从右侧滑入的新闻帖子列表。

工作/娱乐页面在顶部有一个垂直折叠，块从那里向下滑动。

联系人是一个简单的全宽，所以在填充 960 的任一侧折叠。现在关于页面也是如此，尽管将来可能会有一个侧边栏。

我怎样才能做到这一点，以便 AJAX 可以检测到当前加载的内容，以便它知道如何做出反应？

感谢您提前提供的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:13:25.563

好吧，您已经为自己概述了您需要做的事情，所以我将提供一个`untested`大纲，说明如何让类似的东西正常工作。

```
 function animateInDone () {
      // do something here
 }

 function foldReady () {
      // fold has been scaled for this content let's show it on screen
      $('#contentBox').animate(
           {'left':'100px'},
           400,
           'swing',
           complete: animateInDone
      );
 }

 function contentLoadDone (responseText, textStatus, XMLHTTPStatus) {
      // new content loaded and displayed on div since we used .load()
      if (textStatus == 'success') {
           // change the fold size
           $('#fold').animate(
                {height:'350px'}, // or the new height of the contentBox or something else
                // this can also be {height:'+50px'}
                400, 
                'swing', 
                foldReady
           );
      } else {
           // handle errors
      }
 }

 function animateOutDone () {
      // load the new content by using .load or .ajax
      $('#contentBox').load(
           'newcontent.html',
           complete:contentLoadDone
      );
 }

 function contentChange () {
      // animate the content box out
      $('#contentBox').animate(
           {'left':window.innerWidth},
           400,
           'swing',
           complete: animateOutDone
      );
 } 
```

我不确定`.animate`call 的确切语法，但您可以从相关文档中找到所有可能的选项

*   [http://api.jquery.com/animate/](http://api.jquery.com/animate/)
*   [http://api.jquery.com/load/](http://api.jquery.com/load/)
*   [http://api.jquery.com/ajax/](http://api.jquery.com/ajax/)

编辑 2 的补充：您需要将 UI 的状态存储在某个位置。这可以像拥有一个仅存储当前页面名称的变量一样简单，或者您可以拥有一个类层次结构，其中每个页面都有自己的类，具有不同的 UI 输入/输出动画。

```
var pageHome = function () {
    this.animIn = function () {
       // animate home page in
    }

    this.animOut = function (newpage) {
       // animate home page out and set newpage.animIn as the callback for when the animation in done
    }
}

var pageNow = pageHome;
pageNow.animIn(); 
```

我个人喜欢拥有函数对象。

# parsing - Win 8休眠文件格式？

> ID：12115943
> 
> 赞同：2
> 
> 时间：2012-08-24T20:06:51.933
> 
> 标签：parsing, windows-8, file-format, hibernation

我正在编写一个 C#/C++ 程序，它将解压缩 win8 休眠文件。但是，我还没有找到新操作系统的 hiberfil.sys 格式。

有没有Win8 hiberfil.sys文件格式的描述来解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:27:08.890

该文件对 Win 8 来说并不新鲜。但是，我不确定格式是否随着时间的推移而改变。无论如何，这里有一个[指向 2008 年的 PDF 的链接，](http://msuiche.net/con/bhusa2008/Windows_hibernation_file_for_fun_%27n%27_profit-0.6.pdf)其中描述了该文件和一些工具。

# ios - 文件大小限制 iOS (5.1+)

> ID：12115944
> 
> 赞同：1
> 
> 时间：2012-08-24T20:06:53.033
> 
> 标签：ios

我正在处理的 iOS 应用程序处理非常大的文件（最大为 2.7 gig）和一些 sqlite 表，在下载大文件后，我收到如下控制台消息：

```
Aug 24 14:50:28 unknown TheAppName[1407] <Warning>: Error opening database: 14 unable to open database file 
```

还有其他发生的问题，加载视图（已经加载并呈现）将导致崩溃，说“无法定位笔尖”。

该应用程序可以在没有大文件的情况下运行，但它非常有用。我的问题是：大文件是否会导致某种内存问题，还是 iOS 对文件设置了某种限制？我环顾了其他地方，但找不到任何具体的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:24:53.603

它在模拟器中有效还是您在那里也有同样的问题？

我建议您使用带有 ObjectAlloc 工具的 Instruments 来运行您的应用程序。您管理下载的方式可能存在一些漏洞。或者，设备上是否有用于此文件的可用空间？

只要闪存上有足够的空间，其他人就可以成功下载大文件。您可以对此进行测试 - 有一些函数可以告诉您如何确定可用磁盘空间。

另一个想法：将文件写入磁盘，并在文件描述符上设置“F_NOCACHE”（fcntl）标志。这将导致写入绕过用于缓存磁盘块和其他内存用途的“统一缓冲区队列”，并将大大减轻系统本身的压力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T20:20:16.967

iOS 应用程序的最大大小限制为 2GB，这是导致所有错误的限制，也是您的应用程序崩溃的原因。我建议您将大尺寸文件上传到文件托管站点，并在需要时将它们流式传输到应用程序中。

# ios - 我的 UITableView 中加载的 UITableViewCell 不能超过 40 个

> ID：12115945
> 
> 赞同：0
> 
> 时间：2012-08-24T20:06:53.393
> 
> 标签：ios, uitableview, pagination

我正在解析使用 PHP - LIMIT 和 GET 获取 MySQL 数据库中前 25 个项目的 XML。当我单击附加到表格视图底部的“加载更多”单元格时，它成功获取了接下来的 25 个项目，但只加载了前 40 个并保留了最后 10 个。每次我单击“加载更多” " 单元格将 25 添加到我的范围（即 0-25,25-50），但似乎我的范围上限为 65，显示上限为 40。

这是我的加载更多功能不起作用：

```
-(void) getNewRange{
    int currentRange = [allItems count];
    int newRange = currentRange + 25;

    if(newRange > [xmlParser total]){
        NSLog(@"evaluating as greater than the total, which is 837");
        newRange = [xmlParser total];
    }

    NSString *range = [[NSString alloc] initWithFormat:@"?range=%d&range2=%d",currentRange,newRange];
    NSString *newUrl =[[NSString alloc] initWithFormat:@"http://localhost/fetchAllTitles.php%@",range];

    XMLParser *tempParser = [[XMLParser alloc] loadXMLByURL:newUrl];
    [allItems addObjectsFromArray:[tempParser people]];
    NSMutableArray *newCells = [[NSMutableArray alloc] initWithCapacity:25];

    for(int i=currentRange;i<newRange;i++){
        NSLog(@"%d",i);
         NSIndexPath *indexpath=[NSIndexPath indexPathForRow:i inSection:0];
        [newCells addObject:indexpath];
    }

    NSLog(@"%@",newUrl);

    [self.tableView insertRowsAtIndexPaths:newCells withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

我越来越近了，但我收到了这个新错误：

```
*** Assertion failure in -[_UITableViewUpdateSupport _computeRowUpdates], /SourceCache/UIKit_Sim/UIKit-1912.3/UITableViewSupport.m:386 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:14:28.253

阅读如何**重用表格视图的单元格**。

您的数据不需要为单元“所有”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T20:49:11.867

UITableView 不是一个包含您的数据的类，您不应该尝试直接对它显示的单元格进行微观管理。正如另一张海报所说，请阅读如何使用它。你应该做的是：

```
-(void)loadNewData
{
    NSIndexPath *index;
    XMLParser *tempParser = [[XMLParser alloc] loadXMLByURL:newUrl];
    NSArray *people=[tempParser people];
    for(id *person in people)
    {
        [self.dataArray addObject:person];
        indexPath=[NSIndexPath indexPathForRow:[self.dataArray indexForObject:person] inSection:0];
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath withRowAnimation:UITableViewRowAnimationAutomatic];
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{ 
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [AnArray count];//use whatever array stores your data
}

//If you've subclassed the cell, adjust appropriately.
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }
    //Customize the cell
    return cell;
} 
```

如果您允许，表格视图将处理显示单元格所涉及的所有逻辑。这样，您在任何给定时间只有有限数量的单元格占用内存，并且您不必处理它 - 表格视图自动处理重用单元格，并知道需要多少作为缓冲区之前 /后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T20:20:18.637

你不应该在你的方法中设置 numberOfRowsInSection 。应该从 tableView 的数据源方法返回行数`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`。只要回到`[allItems count]`那里。

# performance - CUDA 中的性能优化 - 我应该使用哪些算法？

> ID：12115950
> 
> 赞同：0
> 
> 时间：2012-08-24T20:07:08.010
> 
> 标签：performance, cuda

我有一个包含两个主要任务的算法。这两个任务令人尴尬地并行。所以我可以通过以下方式之一将这个算法移植到 CUDA 上。

```
>Kernel<<<
Block,Threads>>>()  \\\For task1  
cudaThreadSynchronize();  
>Kerne2<<<
Block,Threads>>>()  \\\For task2 
```

或者我可以做以下事情。

```
>Kernel<<<
Block,Threads>>>()  
{  
    1.Threads work on task 1\.  
    2.syncronizes across device.  
    3.Start for task 2\.  
} 
```

可以注意到，在第一种方法中，我们必须回到 CPU，而在第二种趋势中，我们必须在 CUDA 中的所有块之间使用同步。[IPDPS 10](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5470477)中的论文说，第二种方法在适当的照顾下可以表现得更好。但总的来说应该遵循哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:09:09.240

目前，在 CUDA 编程模型中，没有任何官方支持的方法可以通过单个内核执行跨线程块进行同步。以我的经验，这样做的方法会导致脆弱的代码，在不断变化的情况下可能导致不正确的行为，例如在不同的硬件上运行、更改驱动程序和 CUDA 发布版本等。

仅仅因为某些东西发表在学术出版物中并不意味着它是生产代码的安全想法。

我建议你坚持你的方法 1，我问你这个问题：你确定将你的计算分成两个独立的内核真的会导致性能问题吗？第二次内核启动的成本肯定是瓶颈吗？

# grails - 防止 Grails Controller 中的方法暴露为操作

> ID：12115951
> 
> 赞同：13
> 
> 时间：2012-08-24T20:07:21.053
> 
> 标签：grails, groovy, grails-2.0

我目前正在阅读和处理[Scott Davis 和 Jason Rudolph 的 Grails 入门第二版](http://www.infoq.com/minibooks/grails-getting-started)中的示例。

本书是使用 Grails 1.2 编写的。

他们有一个代码示例，他们在其中创建了一个`debug()`被调用的方法，`beforeInterceptor`并解释说因为`debug()`它是一个方法，所以它不会通过 URL 向用户公开。他们解释说，闭包作为控制器动作暴露给最终用户，但方法不是。

我还在[Grails 1.3 文档](http://grails.org/doc/1.3.7/ref/Controllers/beforeInterceptor.html)中看到，它们提到了一个常规方法：

```
def auth() { ... } 
```

被视为私有的，因为它是一种方法，而不是闭包。从 Grails 1.3 开始就是这样。

然而，从 Grails 2.0.0 开始，[控制器动作可以实现为方法和闭包](http://grails.org/doc/2.0.0.RC1/guide/introduction.html#webFeatures)。

这让我想知道（并试图找出）一种方法来复制 Grails 2.0.0 之前的可用功能，即在控制器中创建一个不会暴露给最终用户的方法。

我想到了 2 种可能的方法，想知道哪种方式/实践更好，为什么？

1.  将访问器设置为私有，即`private def auth()`
2.  将方法的 allowedMethods 设置为空字符串：

    ```
    static allowedMethods = [save: "POST", update: "POST", delete: "POST", auth: ""] 
    ```

这两种方法似乎都达到了预期的效果。但是，第一种方法给出了 HTTP 错误代码 404，而第二种方法给出了 HTTP 错误代码 405。

有谁知道哪种方法更可取？此外，还有其他方法或“最佳实践技术”吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T21:38:45.970

在 Grails 2.0 中，任何标记为私有或受保护的方法都不会被视为操作。

出于维护原因，以这种方式标记方法会提供更多信息，因为在方法声明处可以看到该方法是否可操作，而不必回头查看`allowedMethods`变量。此外，如果一个不可访问的方法的声明被删除或未添加到`allowedMethods`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T20:19:59.393

最好将其标记为私有，因为 404 隐藏了任何可以使用 405 来知道有一个函数调用的地方。（并不是说它会有多大用处。）

将方法标记为私有也很好，因为它在方法上表明它不是一个动作。

# magento - 如何启用 magento xml-rpc？

> ID：12115954
> 
> 赞同：4
> 
> 时间：2012-08-24T20:07:24.983
> 
> 标签：magento, xml-rpc, magento-1.6

我正在 godatafeed.com 申请一个帐户，他们说我的网站没有启用 xml-rpc。我检查了所有设置，但找不到任何关于此的内容。

我检查了一些网站，他们说要尝试浏览此网址”

[http://www.theprinterdepo.com/index.php/api/xmlrpc/](http://www.theprinterdepo.com/index.php/api/xmlrpc/) http://www.theprinterdepo.com/index.php/api/?wsdl

第二个有效，第一个不显示任何内容。

如何启用此服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:16:31.447

第一个可能不起作用，因为有人（可能是您自己）已将解决方法修复应用于 xmlrpc 安全漏洞。

[您可以在此处](http://www.magentocommerce.com/blog/important-security-update-zend-platform-vulnerability/)找到有关该漏洞的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T11:18:56.583

以下是我为其工作所遵循的步骤：

1.  安装 Magento 1.1（最低）

2.  在 admin 中，在 System -> Web Services 下，添加一个用户，添加一个角色（指定角色的访问级别，或选中“全部”），然后将用户分配给角色

3.  使用 XML RPC 客户端（Mac OS X 的一个很好的客户端：http: [//ditchnet.org/xmlrpc/](http://ditchnet.org/xmlrpc/)），将端点 URL 设置为`http://yourstore/magento/api/xmlrpc/`

4.  首先调用方法“login”，带有 2 个参数：用户和密钥（您刚刚在步骤 2 中创建了它们）。参考附件中的截图。

5.  请求如下所示：

    `<methodCall> <methodName> login
    </methodName> <params> <param> <value> <string> test
    </string> </value> </param> <param> <value> <string> 123456
    </string> </value> </param> </params> </methodCall>`

6.  响应看起来像这样（它包含您的会话 ID）：

    `<methodResponse> <params> <param> <value> <string> a10915086ca235bcf71f66cfe70bd198
    </string> </value> </param> </params> </methodResponse>`

7.  使用会话 ID，您现在可以调用任何其他方法。例如catalog_category.tree。因此，您只需始终调用方法“call”并传递 2 个参数：会话 ID、方法名称（请参阅附件中的屏幕截图）。您可能需要传递其他参数，具体取决于目标方法。

![在此处输入图像描述](../Images/feffe6c2f284de4165a9f6b3188fd97c.png) ![在此处输入图像描述](../Images/28ac48cc4f64a9d0a4d3ef740f165655.png) ![在此处输入图像描述](../Images/cd740cd6b687ff50a3769b9ebe873844.png)

请参阅以下网址：-

[http://www.magentocommerce.com/boards/viewthread/11773/](http://www.magentocommerce.com/boards/viewthread/11773/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T20:29:50.193

前一阵子我玩过这个，最后因为需求的变化把它关掉了，但是......

要回答有关它在管理界面中的位置的问题，请转到**System->Web Services->Users**，然后按照 godatafeed.com 的要求添加一个用户，这将包括用户名、名字、姓氏、电子邮件、api 密钥, api key 确认，以及这个账号是否活跃。

您可能还需要为该用户创建一个特定角色... **System->Web Services->Roles**，这将根据需要/需要为分配给该角色的用户提供 Magento 子系统中的特定权限。

如果您需要更多信息，您可以查看 magentocommerce 论坛，我在之前实施它时发现了这个。该信息是旧的，但在您浏览线程时会更新且有用：http: [//www.magentocommerce.com/boards/viewthread/11773/](http://www.magentocommerce.com/boards/viewthread/11773/)

您拥有的 URL 似乎是正确的，但如果用户不存在，它不会让任何事情发生。仔细检查您的 URL 与论坛中的信息，他们有示例来测试 API。

从下面的评论中，API v1 和 v2 的解释以及两者的 php 示例：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/introduction](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/introduction)

虽然提供的所有信息都很有用，但我们无法解决发帖人的问题。

# autotools - 源包上 autoreconf 的行为

> ID：12115956
> 
> 赞同：0
> 
> 时间：2012-08-24T20:07:37.853
> 
> 标签：autotools, autoconf

我有一个项目，比如说 10 个目录（作为 tarball）。我编辑了顶层 Makefile.am 以便从构建中排除，比如 5 个目录。然后我跑了 autoreconf

（这真的是一个合法的步骤吗？毕竟，我没有 svn 存储库。我只是得到一个源 tarball）。

我现在可以配置和构建。为了分发这个略读的版本，我用`make dist`. 在客户端机器上，当我尝试配置（不运行 autoreconf）时，出现错误：

```
error: cannot find input file: <excluded directory>/Makefile.in 
```

我不明白客户端机器知道`<excluded directory>`. 如果我在使用略过的 Makefile.am 创建发行版之前运行 autoreconf，是否会更新顶级 Makefile.in 以反映这些更改？

谢谢，

艾伦。

PS：对于脱脂包，`make distcheck`修改源失败，错误'Tcl configuration files not found'（该项目有一些Tcl/Tk）。但是`make dist`创建了一个焦油球。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:42:40.890

您还需要在 中查找对`AC_CONFIG_FILES([ ... ])`（其中 ... 是文件列表）的调用`configure.ac`，然后`<excluded directory>/Makefile`从该列表中删除。如果您不这样做，那么`configure`将寻找`Makefile.in`in`<excluded directory>`并尝试将其转换为`Makefile`，正如您所发现的那样。

# java - 调用抛出异常的方法

> ID：12115958
> 
> 赞同：1
> 
> 时间：2012-08-24T20:07:52.370
> 
> 标签：java

我有这个抛出异常的方法

```
public String Pipeit() throws TransformerException,   
TransformerConfigurationException,SAXException, IOException 
```

我尝试从 GUI 调用此方法

```
Pipe P = new Pipe (fname,x1name,x2name,x3name,oname);
     view.setText(P.Pipeit()throws TransformerConfigurationException,SAXException, 
        IOException)) 
```

它一直给出这个错误

*   '）' 是期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:10:38.587

```
throws TransformerConfigurationException,SAXException, IOException 
```

只应在声明方法时指定，而不是在调用它时指定。

此外，按照惯例，变量名称应以小写字母开头，正如@ssloan 指出的那样，方法名称应采用小写驼峰式。
将您的代码更改为

```
Pipe p = new Pipe (fname,x1name,x2name,x3name,oname);
view.setText(p.pipeIt()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:11:10.257

这是使用正确语法编写此代码的一种方法：

```
Pipe P = new Pipe (fname,x1name,x2name,x3name,oname);
try {
    view.setText(P.Pipeit());
} catch (TransformerConfigurationException e) {
    //log/handle the exception
} catch (TransformerException e) {
    //log/handle the exception
} catch (SAXException e) {
    //log/handle the exception
} catch (IOException e) {
    //log/handle the exception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:08:46.293

在调用方法时，您不需要包含整个方法签名（在本例中为 throws 子句）。

```
view.setText(P.Pipeit()throws TransformerConfigurationException,SAXException, 
            IOException)) 
```

应该

```
 view.setText(new P().Pipeit()) 
```

# php - PHP / jQuery > 新表行输入不提交

> ID：12115961
> 
> 赞同：0
> 
> 时间：2012-08-24T20:08:10.617
> 
> 标签：php, jquery, forms

我有以下代码工作：http: [//jsfiddle.net/SzW7q/](http://jsfiddle.net/SzW7q/)

管理员将能够进入并创建新的操作指南文章并一遍又一遍地输入新步骤，直到特定任务有一篇关于如何执行所有内容的完整文章。每当管理员想要添加新行时，一切都很好，但我遇到的问题是，一旦提交表单，只有原始行被发布，而所有克隆都没有。例如，以下 tr 会发布，但之后的所有克隆都不会发布

原始行发布：

```
<tr><th>Step to complete</th><td><input type='hidden' name='stepnum1' /><input type='text' name='step_num_text1' style='width: 350px;'/></td></tr> 
```

未发布的克隆：

```
<tr><th>Step to complete</th><td><input type='hidden' name='stepnum2' /><input type='text' name='step_num_text2' style='width: 350px;'/></td></tr>
<tr><th>Step to complete</th><td><input type='hidden' name='stepnum3' /><input type='text' name='step_num_text3' style='width: 350px;'/></td></tr> 
```

有人可以告诉我为什么这些新行没有发布以及我能做些什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:32:55.957

将您的标记设为

```
<form method="post">
    <table width="60%" border='0' cellspacing='0' cellpadding='2' class='tform add_howto' id='add_howto'>
        <tr class='header'>
            <td colspan='2'>Add New HowTo Article</td>
        </tr>
        <tr>
            <td>Article Name</td>
            <td><input type='text' name='howto_name' /></td>
        </tr>
        <tr>
            <td>Step to complete</td>
            <td><input type='hidden' name='stepnum1' /><input type='text' name='step_num_text1' style='width: 350px;'/></td>
        </tr>
    </table>
  <input type='submit' value='Submit HowTo' name='add_howto' class='button' />&nbsp;
</form>

<button id='newRowButton' class='button' style='float: left; padding: 2px 6px; margin-top: 2px;'>Add new step</button> 
```

[http://jsfiddle.net/SzW7q/1/](http://jsfiddle.net/SzW7q/1/)

我破解了帖子消息：

```
add_howto   Submit HowTo
howto_name  asd
step_num_text1  sdf
step_num_text2  sdf
step_num_text3  sdf
stepnum1    
stepnum2    
stepnum3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:47:55.073

根据 jsfiddle，你的 HTML 代码很乱。代替

```
 <table>
       <form>
       ....
       </table>
    </form> 
```

你必须有

```
<form>
   <table>
   ...
   </table>
</form> 
```

所以它基本上只是无效的 HTML。

# mysql - MySQL如何查询某列的修改次数

> ID：12115962
> 
> 赞同：4
> 
> 时间：2012-08-24T20:08:21.363
> 
> 标签：mysql, sql

我有一个存储具有两个属性的项目的表。所以该表有三列：

```
 item_id  |  property_1  |  property_2  |  insert_time
  1       |   10         |  100         |  2012-08-24 00:00:01
  1       |   11         |  100         |  2012-08-24 00:00:02
  1       |   11         |  101         |  2012-08-24 00:00:03
  2       |   20         |  200         |  2012-08-24 00:00:04
  2       |   20         |  201         |  2012-08-24 00:00:05
  2       |   20         |  200         |  2012-08-24 00:00:06 
```

也就是说，每次任何项目的*任*一属性更改时，都会插入一个新行。还有一列存储插入时间。现在我想获得`property_2`. 对于上表，我应该得到

```
item_id  |  changes_in_property_2
 1       |    2
 2       |    3 
```

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:22:22.460

这是我能达到您想要的结果的最接近的结果。但是，我应该注意，您要求`property_2`基于`item_id`. `item_id`如果您正在严格分析这两列，那么1 和 2只有 1个更改`item_id`。您需要将结果扩展为聚合`property_1`。希望这个[小提琴](http://sqlfiddle.com/#!2/76853/1)会告诉你为什么。

```
SELECT a.item_id,  
  SUM(
    CASE 
      WHEN a.property_2 <> 
        (SELECT property_2 FROM tbl b 
          WHERE b.item_id = a.item_id AND b.insert_time > a.insert_time LIMIT 1) THEN 1
      ELSE 0
    END) AS changes_in_property_2
FROM tbl a
GROUP BY a.item_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T20:30:17.793

我会这样做，使用用户定义的变量来跟踪前一行的值。

```
SELECT item_id, MAX(c) AS changes_in_property_2
FROM (
    SELECT IF(@i = item_id, IF(@p = property_2, @c, @c:=@c+1), @c:=1) AS c, 
        (@i:=item_id) AS item_id,
        (@p:=property_2) 
    FROM `no_one_names_their_table_in_sql_questions` AS t,
    (SELECT @i:=0, @p:=0) AS _init
    ORDER BY insert_time
) AS sub
GROUP BY item_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:30:42.543

我的看法：

```
SELECT 
    i.item_id,
    SUM(CASE WHEN i.property_1 != p.property_1 THEN 1 ELSE 0 END) + 1
      AS changes_1,
    SUM(CASE WHEN i.property_2 != p.property_2 THEN 1 ELSE 0 END) + 1
      AS changes_2
FROM items i
LEFT JOIN items p
  ON p.time = 
    (SELECT MAX(q.insert_time) FROM items q 
        WHERE q.insert_time < i.insert_time AND i.item_id = q.item_id)
GROUP BY i.item_id; 
```

中未选择的每个项目都有一个条目，`i`即没有前任的条目。不过，它很重要，这就是总和增加的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T20:17:50.033

这将告诉您输入了多少不同的值。但是，如果将其更改回以前的值，则不会将其视为新更改。如果没有数据的年表，很难做更多的事情。

```
select item_id, count(distinct property_2)
from Table1
group by item_id 
```

# c++ - 存储模板函数稍后调用

> ID：12115964
> 
> 赞同：0
> 
> 时间：2012-08-24T20:08:26.513
> 
> 标签：c++, templates, visual-c++, c++11

我正在做一个项目，我必须根据某些条件确定是否必须调用用户提供的函数。问题是提供的函数可以有任何签名。是否有可能使用当前的 c++11 标准执行以下操作？（代码必须使用visual c++ 2010编译）：

```
template <what do I put here?>
void functioncall(std::function<and here> f)
{
   ReturnType returnval = f(arguments);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:11:34.990

这在 C++03 中甚至是可能的，只需使用不受限制的参数：

```
template<class F>
void call(F f) // accept any callable entity
{
  ReturnType retval = f(arguments);
} 
```

# android - 通过 MediaScannerConnectionClient 获取图像的内容方案 Uri

> ID：12115971
> 
> 赞同：1
> 
> 时间：2012-08-24T20:08:52.527
> 
> 标签：android, android-mediascanner

我有一些图片存储在外部 SD 卡中，我想在`GridView`. 我知道媒体扫描仪已经创建了缩略图，因为我可以使用标准图库应用程序浏览我的图片文件夹，但我不知道这些缩略图的位置，所以我不知道如何将它们添加到我的`GridView`.

我正在尝试通过以下方式获取缩略图：

```
MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), Long.parseLong(_imageUri.getLastPathSegment()), type, null) 
```

`_imageUri`必须是内容模式 Uri，所以我的问题是找到一种将图像的文件模式 Uris 转换为内容模式 Uri 的方法。不幸的是我不知道该怎么做。我已经看到很多推荐使用的 SO 线程，`Uri.parse()`但它只是不起作用，所以我正在寻找不同的解决方案。

我目前的方法是使用媒体扫描仪扫描单个文件并尝试`Uri`从`onScanCompleted`回调中检索内容。代码是：

```
public class SimpleMediaScanner implements MediaScannerConnectionClient {
    private MediaScannerConnection mMSC;
    private File mFile;
    private MyAdapter mAdapter;

    public SimpleMediaScanner(Context c, File f, MyAdapter a) {
        mAdapter = a;
        mFile = f;
        mMSC = new MediaScannerConnection(c, this);
        mMSC.connect();
    }

    @Override
    public void onMediaScannerConnected() {
        mMSC.scanFile(mFile.getAbsolutePath(), null);
    }

    @Override
    public void onScanCompleted(String path, Uri uri) {
        // Store the content scheme Uri of the scanned file
        // in a public field of the adapter
        mAdapter.mThumbUri = uri;
        mMSC.disconnect();
    }
} 
```

我从我的扩展实例化这个类`SimplecursorAdapter`：

```
SimpleMediaScanner sms = new SimpleMediaScanner(mContext, new File(filepath), this); 
```

不幸的是，返回的`mAdapter.mThumbUri`值总是`null`. 有人可以告诉我我做错了什么吗？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:33:48.087

您是否尝试过[MediaStorage.Images.Thumbnails](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html)类？它提供了两种静态`getThumbnail(...)`方法，可以满足您的需求。

# cakephp - CakePHP 更深层次的递归

> ID：12115973
> 
> 赞同：0
> 
> 时间：2012-08-24T20:08:57.160
> 
> 标签：cakephp, recursive-datastructures

我有以下问题。我有以下关系： A->B->C->D 与模型中的各自关系。我需要得到所有属于“A”的“D”

```
$this->A->B->C->D->find('all', array ('conditions' =>
    array('B.a_id' => $id)
)); 
```

但得到 b.a_id 的错误。

我试过递归 = 2;

但我一直遇到同样的问题。

我究竟做错了什么？PD：对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:36:37.340

也许更好的主意是将模型 A、B、C、D 连接到您的控制器。

在您的控制器中：

```
var $uses = array('A', 'B', 'C', 'D');
$this->D->recursive = 2;
$result = $this->D->find('all', array ('conditions' => array('B.a_id' => $id))); 
```

如果不是这样，请尝试查找所有 D，然后在调试 $result 变量时创建条件：

```
$result = $this->D->find('all');
debug($result);
die; 
```

# c++ - 错误 1 错误 C2665：'DoublyListIterator ::DoublyListIterator' : 2 个重载都不能转换所有参数类型

> ID：12115974
> 
> 赞同：1
> 
> 时间：2012-08-24T20:09:08.510
> 
> 标签：c++, doubly-linked-list

我正在制作一个双重链接列表。该错误与我的 getIterator 方法有关。我想不通。有人知道吗？

```
Here is where the error is?
    // ------------------------------------------------------------------------------
    //  Name:           GetIterator
    //  Description:    Generates an iterator pointing towards the current head node
    //  Arguments:      None.
    //  Return Value:   <Datatype> Iterator
    // ------------------------------------------------------------------------------
    DoublyListIterator<Datatype> getIterator()
    {
        return DoublyListIterator<Datatype>(this, m_head);
    }
};

#ifndef DOUBLYLINKEDLIST_H
#define DOUBLYLINKEDLIST_H

#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
using namespace std;

template<class Datatype> class DoublyListNode;
template<class Datatype> class DoublyLinkedList;
template<class Datatype> class DoublyListIterator;

// -------------------------------------------------------
// Name:        DListNode
// Description: This is the Doubly-linked list node class.
// -------------------------------------------------------
template<class Datatype>
class DListNode
{
public:
    Datatype m_data;
    DListNode<Datatype>* m_next;
    DListNode<Datatype>* m_prev;

    // ----------------------------------------------------------------
    //  Name:           InsertAfter
    //  Description:    This adds a node after the current node.
    //  Arguments:      p_data - The data to store in the new node.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void InsertAfter(Datatype p_data)
    {
        // create the new node.
        DListNode<Datatype>* newNode= new DListNode<Datatype>;
        newNode->m_data = p_data;
        // make the new node point to the next node.
        newNode->m_next = m_next;
        newNode->m_prev = this;

        // make the node before it, point to the new node
        if(m_next != 0)
            m_next->m_prev= newNode;

        m_next = newNode;
    }
    // ----------------------------------------------------------------
    //  Name:           InsertBefore
    //  Description:    This adds a node before the current node.
    //  Arguments:      p_data - The data to store in the new node.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void InsertBefore(Datatype p_data)
    {
        //Create new Node
        DListNode<Datatype>* newNode = new DListNode<Datatype>;
        newNode->m_data = p_data;
        //Set up new Node Pointers
        newNode->m_next = this;
        newNode->m_prev = m_prev;
        //if theres a node before it, make it point to new node
        if(m_prev != 0)
            m_prev->m_next = newNode;

        m_prev = newNode;
    }
};
// -------------------------------------------------------------
// Name:        DLinkedList
// Description: This is the Doubly-linked list container class.
// -------------------------------------------------------------
template<class Datatype>
class DoublyLinkedList
{
public:
    DListNode<Datatype>* m_head;
    DListNode<Datatype>* m_tail;
    int m_count;

    // -----------------------------------------------------------------------------------------
    //  Name:           DLinkedList
    //  Description:    Constructor, creates a head node, tail node & a count.
    //  Arguments:      m_head: the head node of the list.
    //                  m_tail: the tail node of the list.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    DoublyLinkedList()
    {
        m_head= 0;
        m_tail= 0;
        m_count= 0;
    }

    // -----------------------------------------------------------------------------------------
    //  Name:           ~DLinkedList
    //  Description:    Destructor, creates a pointer for the head node,
    //                  deletes the value in the list and iterates.
    //  Arguments:      m_head: the head node of the list.
    //                  itr:    moves through the list.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    ~DoublyLinkedList()
    {
        // temporary node pointers.
        DListNode<Datatype>* itr= m_head;
        DListNode<Datatype>* next;
        while(itr != 0)
        {
            // save the pointer to the next node.
            next = itr->m_next;
            // delete the current node.
            delete itr;
            // make the next node the current node.
            itr= next;
        }
    }
    // ----------------------------------------------------------------
    //  Name:           Length
    //  Description:    Gets the size of the list
    //  Arguments:      None.
    //  Return Value:   size of the list.
    // ----------------------------------------------------------------
    int Length()
    {
        return m_count;
    }
    // -------------------------------------------------------------------------------------
    //  Name:           Append
    //  Description:    This adds a node to the end of the list, then points to the newNode
    //  Arguments:      p_data - The data to store in the new node.
    //                  m_count is increased.
    //  Return Value:   None.
    // -------------------------------------------------------------------------------------
    void Append(Datatype p_data)
    {
        if(m_head == 0)
        {
            // create a new head node.
            m_head= m_tail= new DListNode<Datatype>;
            m_head->m_data= p_data;
            m_head->m_next= 0;
            m_head->m_prev= 0;
        }
        else
        {
            // insert a new node after the tail and reset the tail.
            m_tail->InsertAfter(p_data);
            m_tail= m_tail->m_next;
        }
        m_count++;
    }
    // -----------------------------------------------------------------------------------
    //  Name:           Prepend
    //  Description:    This adds a node before the head node, then points to the newNode
    //  Arguments:      p_data - The data to store in the new node.
    //                  m_count is increased.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------
    void Prepend(Datatype p_data)
    {
        // create the new node.
        DListNode<Datatype>* newNode= new DListNode<Datatype>;
        newNode->m_data= p_data;

        newNode->m_next= m_head;
        // set the head node and the tail node if needed.
        m_head= newNode;
        if(m_tail== 0)
            m_tail= m_head;
        m_count++;
    }
    // ----------------------------------------------------------------------------------------------------------------
    //  Name:           Insert
    //  Description:    Inserts data before the iterator, this works whether the iterator is backwards of forwards
    //                  through the list.Inserts at the end of the list if iterator is invalid.
    //  Arguments:      p_iterator: The iterator to insert before
    //                  p_data: the data to insert
    //  Return Value:   None.
    // ----------------------------------------------------------------------------------------------------------------
    void Insert(DoublyListIterator<Datatype>& p_itr, Datatype p_data)
    {
        if(p_itr.m_node != 0)
        {
            // insert the data before the iterator
            p_itr.m_node->InsertBefore(p_data);

            //if the iterator was at the head of the list,
            //reset the head pointer
            if(p_itr.m_node == m_head)
            {
                m_head = m_head->m_prev;
            }
            // increment the count
            m_count++;
        }
        else
        {
            Append(p_data);
        }
    }

    // -------------------------------------------------------------------------------------------------------
    //  Name:           Remove
    //  Description:    Removes the node that the iterator points to, moves iterator forward to the next node.
    //  Arguments:      p_iterator: The iterator to remove
    //                  isForward: Tells which direction the iterator was going through the list
    //  Return Value:   None.
    // -------------------------------------------------------------------------------------------------------
    void Remove(DoublyListIterator<Datatype>& p_itr, bool isForward)
    {
        // temporary node pointer.
        DListNode<Datatype>* newNode;

        // if node is invalid, do nothing.
        if(p_itr.m_node == 0)
            return;

        // save the pointer to the node we want to delete.
        newNode = p_itr.m_node;

        // if the node we want to remove is the head or the tail
        // nodes, then move the head or tail to the next or
        // previous node.
        if(newNode == m_head)
        {
            m_head = m_head->m_next;
        }
        else if(newNode == m_tail)
        {
            m_tail = m_tail->m_prev;
        }
        // if moving from head to tail, move the iterator forward 
        // to the next valid node
        if(isForward == true)
        {
            p_itr.Forth();

        }
        //else, we are moving from tail to head, so move the iterator
        // to the previous valid node
        else
        {
            p_itr.Back();
        }

        if(newNode->m_prev != 0)
            newNode->m_prev->m_next = newNode->m_next;
        else if(newNode->m_next != 0)
            newNode->m_next->m_prev = newNode->m_prev;
        // delink and delete the node.
        delete newNode;

        // if the head is 0, then set the tail to 0 as well.
        if(m_head == 0)
            m_tail = 0;

        m_count--;

    }
    // -----------------------------------------------------------------------------------
    //  Name:           RemoveHead
    //  Description:    Removes the Head of the List and points to the New Node
    //  Arguments:      None
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------
    void RemoveHead()
    {
        DListNode<Datatype>* newNode = 0;
        if(m_head!= 0)
        {
            // make node point to the next node.
            newNode = m_head->m_next;
            // then delete the head and make the pointer
            // point to node.
            delete m_head;
            m_head= newNode;
            // if the head is null, then you’ve just deleted the only node
            // in the list. set the tail to 0.
            if(m_head== 0)
                m_tail= 0;
            m_count--;
        }
    }

    // -----------------------------------------------------------------------------------------
    //  Name:           RemoveTail
    //  Description:    The tail node is removed - but at a much slower pace than the head node, 
    //  this is because the node has to search through the list to find the node before the tail
    //  node and set it to the new tail node then deleting the tail node
    //  Arguments:      None.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    void RemoveTail()
    {
        DListNode<Datatype>* newNode = m_head;
        // if the list isn’t empty, then remove a node.
        if(m_head!= 0)
        {
            // if the head is equal to the tail, then
            // the list has 1 node, and you are removing it.
            if(m_head == m_tail)
            {
                // delete the node and set both pointers
                // to 0.
                delete m_head;
                m_head= m_tail= 0;
            }
            else
            {
                // skip ahead until you find the node
                // right before the tail node
                while(newNode->m_next!= m_tail)
                    newNode = newNode->m_next;
                // make the tail point to the node before the
                // current tail and delete the old tail.
                m_tail= newNode;
                delete newNode->m_next;
                newNode->m_next= 0;
            }
            m_count--;
        }
    }

    // ------------------------------------------------------------------------------
    //  Name:           GetIterator
    //  Description:    Generates an iterator pointing towards the current head node
    //  Arguments:      None.
    //  Return Value:   <Datatype> Iterator
    // ------------------------------------------------------------------------------
    DoublyListIterator<Datatype> getIterator()
    {
        return DoublyListIterator<Datatype>(this, m_head);
    }
};
// ----------------------------------------------------------
// Name:        DoublyListIterator
// Description: This is the basic linked list iterator class.
// ----------------------------------------------------------
template<class Datatype>
class DoublyListIterator
{
public:
    // ----------------------------------------------------------------
    //  Name:           m_node
    //  Description:    pointer to the current node
    // ----------------------------------------------------------------
    DoublyListNode<Datatype>* m_node;

    // ----------------------------------------------------------------
    //  Name:           m_list
    //  Description:    pointer to the current list.
    // ----------------------------------------------------------------
    DoublyLinkedList<Datatype>* m_list;

    // -----------------------------------------------------------------------------------------
    //  Name:           DListIterator
    //  Description:    Constructor, creates an iterator that points to the given list and node.
    //  Arguments:      p_list: pointer to the list the iterator belongs to.
    //                  p_node: pointer to the current node.
    //  Return Value:   None.
    // -----------------------------------------------------------------------------------------
    DoublyListIterator(DoublyLinkedList<Datatype>* p_list= 0, DoublyListNode<Datatype>* p_node= 0)
    {
        m_list= p_list;
        m_node= p_node;
    }

    // ------------------------------------------------------------------
    //  Name:           Start
    //  Description:    Resets the iterator to the beginning of the list.
    //  Arguments:      None.
    //  Return Value:   None.
    // ------------------------------------------------------------------
    void Start()
    {
        if(m_list!= 0)
            m_node= m_list->m_head;
    }

    // ----------------------------------------------------------------
    //  Name:           End
    //  Description:    Resets the iterator to the end of the list
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void End()
    {
        if(m_list!= 0)
            m_node = m_list->m_tail;
    }

    // ----------------------------------------------------------------
    //  Name:           Forth
    //  Description:    Moves the iterator forward by one position
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void Forth()
    {
        if(m_node!= 0)
            m_node= m_node->m_next;
    }

    // ----------------------------------------------------------------
    //  Name:           Back
    //  Description:    Moves the iterator backward by one position.
    //  Arguments:      None.
    //  Return Value:   None.
    // ----------------------------------------------------------------
    void Back()
    {
        if(m_node!= 0)
            m_node = m_node->m_prev;
    }

    // ----------------------------------------------------------------
    //  Name:           Item
    //  Description:    Gets the item that the iterator is pointing to.
    //  Arguments:      None.
    //  Return Value:   Reference to the data in the node.
    // ----------------------------------------------------------------
    Datatype& Item()
    {
        return m_node->m_data;
    }

    // ----------------------------------------------------------------
    //  Name:           Valid
    //  Description:    Determines if the node is valid.
    //  Arguments:      None.
    //  Return Value:   true if valid
    // ----------------------------------------------------------------
    bool Valid()
    {
        return (m_node!= 0);
    }
    // ----------------------------------------------------------------
    //  Name:           operator==
    //  Description:    Determines if two iterators point to the same node.
    //  Arguments:      None.
    //  Return Value:   true if they point to the same node.
    // ----------------------------------------------------------------
    bool operator==( DoublyListIterator<Datatype>& p_rhs )
    {
        if( m_node == p_rhs.m_node && m_list == p_rhs.m_list )
        {
            return true;
        }
        return false;
    }
};
#endif 
```

如果需要更多代码，请询问。我不想在 Stack 溢出用户身上放很多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:20:42.037

你的意思是命名你的班级`DoublyListNode`而不是`DListNode`？

你转发声明

```
template<class Datatype> class DoublyListNode; 
```

但你定义

```
template<class Datatype>
class DListNode 
```

并使用成员

```
DListNode<Datatype>* m_head;
DListNode<Datatype>* m_tail; 
```

在列表中，但迭代器接受参数：

```
DoublyListIterator(DoublyLinkedList<Datatype>* p_list= 0, DoublyListNode<Datatype>* p_node= 0) 
```

回顾一下，成员 in`DoublyLinkedList`是 a `DListNode`，但 for 的构造函数`DoublyListIterator`需要 a `DoublyListNode`。

选择一个名字并坚持下去。

# mysql - Perl fetch 没有执行错误 - 在执行结束时

> ID：12115981
> 
> 赞同：1
> 
> 时间：2012-08-24T20:10:11.857
> 
> 标签：mysql, perl, cgi

我当前的 perl 代码正在运行数据库查询的所有行，然后抛出一个

```
DBD::mysql::st fetchrow_hashref failed: fetch() without execute() at ./recieveTxn.cgi 
line 168. 
```

在最后。几乎就像有些东西没有告诉循环在行尾停止，但我和其他人一样写了它。

例如：查询会拉起

shortcode1
shortcode2
shortcode3
然后在这里抛出错误

```
$sql = "
    SELECT
        aPI.folder AS aPIfolder, 
        aPI.rowNum AS aPIrowNum,
        hasInput,
        evalCode
    FROM
        aPersonalItems as aPI
    LEFT JOIN 
        pItems_special_inputs as SI 
    ON
        aPI.folder = SI.folder AND
        aPI.rowNum = SI.rowNum
    WHERE
        hasInput=1 AND
        aPI.folder='$FORM{'folder'}'
    ORDER BY
        aPI.rowNum
";

$sth = $dbh->prepare( $sql );
$sth->execute();

my ($shortcoderow, $row);
my $shortcodeSQL = "
    SELECT 
        * 
    FROM
        pItemsShortCodes 
    WHERE
        folder='$FORM{'folder'}' 
    ORDER BY
        rowNum
";
my $shortcodeSTH = $dbh->prepare( $shortcodeSQL );
$shortcodeSTH->execute();

while( my $ref = $sth->fetchrow_hashref() ) {

    my $shortCode;
    my $isblank = 1;
    my $rowNum  = $ref->{'aPIrowNum'};

    while(my $shortcodeRef = $shortcodeSTH->fetchrow_hashref())
    #&& $rowNum == $shortcodeRef->{'rowNum'}) #line 168 above
    {
        $shortCode=$shortcodeRef->{'shortcode'};
        print $shortCode."\n";
    }
    $shortcodeSTH->finish();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T20:15:34.460

问题是您正在处理不止一行来自`$sth`.

您的代码从 中获取一行`$sth`，然后您的代码从 中遍历每一行`$shortcodeSTH`，直到没有更多行为止。然后你的代码调用`finish()`on 上的方法`$shortcodeSTH`。（这是规范模式，因为您已经获取了所有行。）

然后，您的代码第二次通过外循环开始，从`$sth`. 当您的代码第二次尝试通过`$shortcodeSTH`循环开始时，您已经获取了所有行并关闭了语句句柄。没有更多行可检索。（如果您没有发出对该`finish()`方法的调用，则返回的错误会有所不同；错误消息将是关于获取超过游标末尾的内容，或者已经获取了最后一行，或者类似的内容。）

# iphone - 沿锚点旋转 CATransformLayer

> ID：12115987
> 
> 赞同：1
> 
> 时间：2012-08-24T20:10:45.210
> 
> 标签：iphone, ios, animation, calayer, caanimation

构建了一个由 6 个面组成的立方体：每一面都是一个 CALayer，然后每个都作为子视图添加到 (6) CATransformLayers（以启用 3d 转换）。这 6 个 CATransformLayer 作为子视图添加到单个 CATransformLayer。

当旋转这个单独的 CATransformLayer 将整个立方体作为一个包进行旋转时，一切正常，我将锚点设置为 0,0，将锚点 Z 设置为立方体的中间：立方体完美地围绕其中心旋转。

问题：我想“展开”当前边的 4 个相邻边，这意味着左侧、右侧、上方和下方的边向用户旋转 90*，但仍坚持面向用户的一侧。

为此，我例如将当前边上方的边的anchorpointZ设置为0，将锚点设置为（0.5,1），这样锚点基本上是公共边的中间。

设置立方体：

```
transformLayer = [CATransformLayer layer];
transformLayer.position = CGPointMake([UIScreen mainScreen].bounds.size.width/2,[UIScreen mainScreen].bounds.size.height/2);

CGRect layerRect = CGRectMake(0.0, 0.0, 150, 150); //frame rect for cube sides
CGPoint screenCenter = CGPointMake(self.transformLayer.bounds.size.width / 2, self.transformLayer.bounds.size.height / 2);

//side1
side1 = [CALayer layer];
side1.borderColor = [UIColor colorWithHue:0.6 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side1.backgroundColor = [UIColor colorWithHue:0.6 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side1.borderWidth = 2.0;
side1.cornerRadius = 30.0;
side1.frame = layerRect;
side1.position = screenCenter;

side1t = [CATransformLayer layer];
[side1t addSublayer:side1];

//side2
side2 = [CALayer layer];
side2.borderColor = [UIColor colorWithHue:0.25 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side2.backgroundColor = [UIColor colorWithHue:0.25 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side2.borderWidth = 2.0;
side2.cornerRadius = 30.0;    
side2.frame = layerRect;
side2.position = screenCenter;
//positioning
CATransform3D rotation = CATransform3DMakeRotation(M_PI/2, 0.0, 1.0, 0.0);
CATransform3D translation = CATransform3DMakeTranslation(150/2, 0.0, 150/-2 );
CATransform3D position = CATransform3DConcat(rotation, translation);
side2.transform = position;

side2t = [CATransformLayer layer];
[side2t addSublayer:side2];

//side3
side3 = [CALayer layer];
side3.borderColor = [UIColor colorWithHue:0.0 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side3.backgroundColor = [UIColor colorWithHue:0.0 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side3.borderWidth = 2.0;
side3.cornerRadius = 30.0;
side3.frame = layerRect;
side3.position = screenCenter;
//positioning
translation = CATransform3DMakeTranslation(0.0, 0.0, -150); //150
side3.transform = translation;

side3t = [CATransformLayer layer];
[side3t addSublayer:side3];

//side4
side4 = [CALayer layer];
side4.borderColor = [UIColor colorWithHue:0.2 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side4.backgroundColor = [UIColor colorWithHue:0.2 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side4.borderWidth = 2.0;
side4.cornerRadius = 30.0;
side4.frame = layerRect;
side4.position = screenCenter;
//positioning
rotation = CATransform3DMakeRotation(M_PI/2, 0.0, 1.0, 0.0);
translation = CATransform3DMakeTranslation(150/-2, 0.0, 150/-2);
side4.transform = CATransform3DConcat(rotation, translation);

side4t = [CATransformLayer layer];
[side4t addSublayer:side4];

//side5
side5 = [CALayer layer];
side5.borderColor = [UIColor colorWithHue:0.8 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side5.backgroundColor = [UIColor colorWithHue:0.8 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side5.borderWidth = 2.0;
side5.cornerRadius = 30.0;
side5.frame = layerRect;
side5.position = screenCenter;
//positioning
rotation = CATransform3DMakeRotation(M_PI/2, 1.0, .0, 0.0);
translation = CATransform3DMakeTranslation(0.0, 150/-2, 150/-2);
side5.transform = CATransform3DConcat(rotation, translation);

side5t = [CATransformLayer layer];
[side5t addSublayer:side5];

//side6
side6 = [CALayer layer];
side6.borderColor = [UIColor colorWithHue:0.0845 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
side6.backgroundColor = [UIColor colorWithHue:0.0845 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
side6.borderWidth = 2.0;
side6.cornerRadius = 30.0;
side6.frame = layerRect;
side6.position = screenCenter;
//positioning
rotation = CATransform3DMakeRotation(M_PI/2, 1.0, .0, 0.0);
translation = CATransform3DMakeTranslation(0.0, 150/2, 150/-2);
side6.transform = CATransform3DConcat(rotation, translation);

side6t = [CATransformLayer layer];
[side6t addSublayer:side6];

[self.transformLayer addSublayer:side1t];
[self.transformLayer addSublayer:side2t];
[self.transformLayer addSublayer:side3t];
[self.transformLayer addSublayer:side4t];
[self.transformLayer addSublayer:side5t];
[self.transformLayer addSublayer:side6t];

self.transformLayer.anchorPointZ = -150/2;
[self.layer addSublayer: transformLayer]; 
```

这部分不起作用。旋转（90°）是正确的，但侧面最终处于完全错误的位置，当前侧面前面的立方体大小的一半（z 坐标）并在 xy 空间中覆盖了正面的一半，见截图

```
-(void)unfoldUpperSide {
[CATransaction begin];
[CATransaction setAnimationDuration: 3.0];
side5t.anchorPoint = CGPointMake(0.5, 0);
side5t.anchorPointZ = 0;
side5t.transform = CATransform3DMakeRotation(-M_PI/2, 1, 0, 0);
[CATransaction commit];
} 
```

![旋转后](../Images/e2634258a3c47915e9cdb2a24d89970f.png)

我整天都被困在这个问题上，希望有人能帮助我..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T12:58:40.337

您不需要为每一层制作一个 CATransformLayer，一个单独的 CATransformLayer 来容纳所有层就足够了，您仍然可以进行 3d 变换，因为 CATransformLayer 变换适用于其中图层的所有锚点。

为什么你的个别边的旋转是关闭的，因为所有边的 anchorPoint 是 0.5,0.5（这是它们各自的中心，所以你围绕那个中心旋转）

您可以通过在两个所需方向上将层平移一半大小来解决此问题，同时旋转层，尽管最初有轻微的剪裁，这是下面的 osx 代码，只需将 NSColor 等更改为 UIKit 对应项。

![在此处输入图像描述](../Images/adfeeb4fa2ac0a6738700ce36ae4ab58.png)

```
-(void)cubeTest{

    float size = 100.0;

    CATransformLayer *transformLayer = [CATransformLayer layer];
    transformLayer.position = CGPointMake(cubeView.bounds.size.width/2,cubeView.bounds.size.height/2);

    CGRect layerRect = CGRectMake(0.0, 0.0, size, size); //frame rect for cube sides
    CGPoint screenCenter = CGPointMake(transformLayer.bounds.size.width / 2, transformLayer.bounds.size.height / 2);

    //side1
    CALayer *side1 = [CALayer layer];
    side1.borderColor = [NSColor colorWithHue:0.6 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side1.backgroundColor = [NSColor colorWithHue:0.6 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side1.borderWidth = 2.0;
    side1.cornerRadius = 30.0;
    side1.frame = layerRect;
    side1.position = screenCenter;
    [transformLayer addSublayer:side1];

    //side2
    CALayer *side2 = [CALayer layer];
    side2.borderColor = [NSColor colorWithHue:0.25 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side2.backgroundColor = [NSColor colorWithHue:0.25 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side2.borderWidth = 2.0;
    side2.cornerRadius = 30.0;
    side2.frame = layerRect;
    side2.position = screenCenter;
    //positioning
    CATransform3D rotation = CATransform3DMakeRotation(M_PI/2, 0.0, 1.0, 0.0);
    CATransform3D translation = CATransform3DMakeTranslation(size/2, 0.0, size/-2 );
    CATransform3D position = CATransform3DConcat(rotation, translation);
    side2.transform = position;
    [transformLayer addSublayer:side2];

    //side3
    CALayer *side3 = [CALayer layer];
    side3.borderColor = [NSColor colorWithHue:0.0 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side3.backgroundColor = [NSColor colorWithHue:0.0 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side3.borderWidth = 2.0;
    side3.cornerRadius = 30.0;
    side3.frame = layerRect;
    side3.position = screenCenter;
    //positioning
    translation = CATransform3DMakeTranslation(0.0, 0.0, -size); //size
    side3.transform = translation;
    [transformLayer addSublayer:side3];

    //side4
    CALayer *side4 = [CALayer layer];
    side4.borderColor = [NSColor colorWithHue:0.2 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side4.backgroundColor = [NSColor colorWithHue:0.2 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side4.borderWidth = 2.0;
    side4.cornerRadius = 30.0;
    side4.frame = layerRect;
    side4.position = screenCenter;
    //positioning
    rotation = CATransform3DMakeRotation(M_PI/2, 0.0, 1.0, 0.0);
    translation = CATransform3DMakeTranslation(size/-2, 0.0, size/-2);
    side4.transform = CATransform3DConcat(rotation, translation);
    [transformLayer addSublayer:side4];

    //side5
    CALayer *side5 = [CALayer layer];
    side5.borderColor = [NSColor colorWithHue:0.8 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side5.backgroundColor = [NSColor colorWithHue:0.8 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side5.borderWidth = 2.0;
    side5.cornerRadius = 30.0;
    side5.frame = layerRect;
    side5.position = screenCenter;
    //positioning
    rotation = CATransform3DMakeRotation(M_PI/2, 1.0, .0, 0.0);
    translation = CATransform3DMakeTranslation(0.0, size/-2, size/-2);
    side5.transform = CATransform3DConcat(rotation, translation);
    [transformLayer addSublayer:side5];

    //side6
    CALayer *side6 = [CALayer layer];
    side6.borderColor = [NSColor colorWithHue:0.0845 saturation:1.0 brightness:1.0 alpha:1.0].CGColor;
    side6.backgroundColor = [NSColor colorWithHue:0.0845 saturation:1.0 brightness:1.0 alpha:0.8].CGColor;
    side6.borderWidth = 2.0;
    side6.cornerRadius = 30.0;
    side6.frame = layerRect;
    side6.position = screenCenter;
    //positioning
    rotation = CATransform3DMakeRotation(M_PI/2, 1.0, .0, 0.0);
    translation = CATransform3DMakeTranslation(0.0, size/2, size/-2);
    side6.transform = CATransform3DConcat(rotation, translation);
    [transformLayer addSublayer:side6];

    transformLayer.anchorPointZ = -size/2;
    [cubeView setWantsLayer:YES];
    [cubeView.layer addSublayer:transformLayer];

    //animate

    CGFloat perspective = -1.0/10000.0;
    CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];

    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = perspective;
    transformAnimation.fromValue = [NSValue valueWithCATransform3D:transform];

    transform.m34 = perspective;
    transform = CATransform3DRotate(transform, DEGREES_TO_RADIANS(90) , 1, 0, 0);

    transformAnimation.toValue = [NSValue valueWithCATransform3D:transform];

    transformAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    transformAnimation.repeatCount = INFINITY;
    transformAnimation.duration = 10.0;
    [transformLayer addAnimation:transformAnimation forKey:@"RotateTheBox"];

    [self sideAnimation:side1 transform:CATransform3DTranslate(CATransform3DRotate(side1.transform, DEGREES_TO_RADIANS(90) , 1, 0, 0), 0, size/2, size/2)];
    [self sideAnimation:side3 transform:CATransform3DTranslate(CATransform3DRotate(side3.transform, DEGREES_TO_RADIANS(-90) , 1, 0, 0), 0, size/2, -size/2)];
    [self sideAnimation:side2 transform:CATransform3DTranslate(CATransform3DRotate(side2.transform, DEGREES_TO_RADIANS(90) , 1, 0, 0), 0, size/2, size/2)];
    [self sideAnimation:side4 transform:CATransform3DTranslate(CATransform3DRotate(side4.transform, DEGREES_TO_RADIANS(-90) , 1, 0, 0), 0, size/2, -size/2)];
    [self sideAnimation:side6 transform:CATransform3DTranslate(side6.transform, 0, 0, size)];//lower cap

}

-(void)sideAnimation:(CALayer*)side transform:(CATransform3D)transform
{
    CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
    transformAnimation.toValue = [NSValue valueWithCATransform3D:transform];
    transformAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    transformAnimation.repeatCount = INFINITY;
    transformAnimation.duration = 10.0;
    [side addAnimation:transformAnimation forKey:@"rotateSide"];
} 
```

# internet-explorer - IE10 破坏了在 Webkit 和 Firefox 中工作的 CSS3 3D 动画

> ID：12115988
> 
> 赞同：4
> 
> 时间：2012-08-24T20:10:45.047
> 
> 标签：internet-explorer, css, css-animations, internet-explorer-10

我在两个`div`s 上有一个简单的水平 CSS3 3D 翻转效果，在 Chrome、Safari 和 Firefox 中运行良好。但是 IE10 把它搞砸了，并且看起来像在所有轴上做了一些奇怪的附加动画。

![IE10动画](../Images/9b07e170bc7cfbe5726f42fd6ea57f71.png)

我已经追踪到附加`translateX`动画。如果我删除它并且只做`rotateY`IE10 的行为就像其他浏览器一样。但我不想放弃 x 轴动画。

请看一下这个 jsFiddle 中的问题（为了清楚起见，只有 IE 和 Webkit）：http: [//jsfiddle.net/uJnHE/5/](http://jsfiddle.net/uJnHE/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T20:39:15.770

删除您的 webkit 前缀并添加`translateX(0)`，因为 IE10 beta 不知道如何在未声明的转换属性和`translateX(-200px)`

```
@keyframes flipHotelInfoLeft {
  0% {
      animation-timing-function: ease-in;
      transform: rotateY(180deg) translateX(0);
  }
  50% {
      transform: rotateY(90deg) translateX(200px);
  }
  100% {
      animation-timing-function: ease-out;
      transform: rotateY(0) translateX(0);
  }
} 
```

# python - Numpy distutils 如何

> ID：12115990
> 
> 赞同：8
> 
> 时间：2012-08-24T20:10:57.853
> 
> 标签：python, numpy, distutils, f2py

我花了将近一个小时在谷歌上搜索解决方案，但 numpy.distutils 的文档非常稀少。

我有一个 f2py 包装的模块。它基本上由3个文件组成：

```
a.f90
a.pyf
lib.a <- this is a static library that contains most of the computational code 
```

该模块使用以下 shell-script 命令编译得很好。

```
f2py --build-dir temp -c a.pyf a.f90 lib.a --fcompiler=gnu95   
--fcompiler-flags="Zillions of compiler options" 
```

结果，我有了 python 模块 a.so（名称在 .pyf 文件中指定）。

我如何使用 numpy.distutils （或其他一些面向 python 的构建工具）来做到这一点？一个不太重要的问题是，我是否还可以包含对 lib.a 的依赖（并在必要时重建它？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T19:22:31.360

所以，这不是 1 小时的谷歌搜索，而是 2 天的谷歌搜索，但最终我找到了这样做的方法。希望对某人有所帮助。

```
 def configuration(parent_package='',top_path=None):
      from numpy.distutils.misc_util import Configuration, get_info
      config = Configuration('a', parent_package, top_path)
      lib = ['./libdir/lib.a']
      src = ['a.f90','a.pyf']
      inc_dir = ['libdir']              
      config.add_extension('mya',sources=src,depends=lib_tt,
                      include_dirs=inc_dir,extra_objects="lib.a")
      #The main trick was to use extra_objects keyword
      return config

  if __name__ == '__main__':
      from numpy.distutils.core import setup
      setup(**configuration(top_path='').todict()) 
```

# php - 变量不会在 foreach 循环中保存值

> ID：12115994
> 
> 赞同：0
> 
> 时间：2012-08-24T20:11:26.963
> 
> 标签：php, codeigniter

我对以下代码有一个非常奇怪的问题。出于某种原因，除非将其放在 if 和 else...if 语句之外，否则我无法让 $id1 或 $id2 保存值。变量根本不会注册。有人看到我做错了吗？我很茫然。。

```
public function addCommentToStartpageWall() {
        $userid = $this->session->userdata("userid");
        $postingUserId = $this->input->post("postinguserid");

        $query = $this->db->query("SELECT * FROM churchmembers");
        $row = $query->row();
        foreach ($query->result() as $row) {
            if ($postingUserId == $row->cMuserId) { // check to see what church the posting user is a member of
                $id1 = $row->cMchurchId; // if posting user is a member of a church set it to var id1
            } if ($userid == $row->cMuserId) { // check to see what church myuserid is a member of
                $id2 = $row->cMchurchId; // if myuserid is a member of a church set it to var2
            } if ($id1 == $id2) { // if posting user and myuserid are a member of the same church process the following
                echo json_encode(array('id1' => $id1, 'isMembershipSame' => true));
            } elseif ($id1 != $id2) { // if posting user and myuserid are not a member of the same user process the following
                echo json_encode(array('id1' => $id1, 'isMembershipSame' => false));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:17:16.903

看来我也错了，上面的答案是正确的。

但是，我建议在每个循环中重置 $id1 和 $id2 变量，以防止它们保留上一次迭代的值：

```
foreach ... 
{
    $id1 = "";
    $id2 = "";

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:15:49.417

您必须在循环之外声明/启动这些变量。我相信这是范围的问题——一旦循环结束，这些变量就会被丢弃。

编辑：我错了 - 我猜这是你的 if/else 没有正确评估。

# spring - 从同一个类中调用时忽略 Spring 缓存 @Cacheable 方法

> ID：12115996
> 
> 赞同：53
> 
> 时间：2012-08-24T20:11:40.437
> 
> 标签：spring, caching, spring-cache

我正在尝试`@Cacheable`从同一个类中调用一个方法：

```
@Cacheable(value = "defaultCache", key = "#id")
public Person findPerson(int id) {
   return getSession().getPerson(id);
} 

public List<Person> findPersons(int[] ids) {
   List<Person> list = new ArrayList<Person>();
   for (int id : ids) {
      list.add(findPerson(id));
   }
   return list;
} 
```

并希望结果`findPersons`也被缓存，但`@Cacheable`注释被忽略，并且`findPerson`每次都执行方法。

我在这里做错了什么，或者这是故意的？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-24T20:22:21.983

这是因为在 Spring 中为处理缓存、事务相关功能创建代理的方式。这是关于 Spring 如何处理它的一个很好的参考 -[事务、缓存和 AOP：理解 Spring 中的代理使用](http://spring.io/blog/2012/05/23/transactions-caching-and-aop-understanding-proxy-usage-in-spring)

简而言之，自调用绕过了动态代理，并且也绕过了作为动态代理逻辑一部分的缓存、事务等任何横切关注点。

解决方法是使用 AspectJ 编译时间或加载时间编织。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-12-04T14:42:45.120

这是我为在同一个类中仅少量使用方法调用的小型项目所做的。强烈建议使用代码内文档，因为它对同事来说可能看起来很奇怪。但它易于测试、简单、快速实现，并且为我省去了成熟的 AspectJ 工具。但是，对于更重的使用，我建议使用 AspectJ 解决方案。

```
@Service
@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS)
class PersonDao {

    private final PersonDao _personDao;

    @Autowired
    public PersonDao(PersonDao personDao) {
        _personDao = personDao;
    }

    @Cacheable(value = "defaultCache", key = "#id")
    public Person findPerson(int id) {
        return getSession().getPerson(id);
    }

    public List<Person> findPersons(int[] ids) {
        List<Person> list = new ArrayList<Person>();
        for (int id : ids) {
            list.add(_personDao.findPerson(id));
        }
        return list;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-31T19:13:39.547

对于使用**Grails Spring Cache**插件的任何人，[文档中描述了一种解决方法](http://gpc.github.io/grails-springcache/docs/guide/3.%20Caching%20Service%20Methods.html#3.2%20Calling%20Cached%20Methods%20Internally)。我在 grails 应用程序上遇到了这个问题，但不幸的是，接受的答案似乎对 Grails 不可用。恕我直言，解决方案很丑陋，但它有效。

示例代码很好地展示了这一点：

```
class ExampleService {
    def grailsApplication

    def nonCachedMethod() {
        grailsApplication.mainContext.exampleService.cachedMethod()
    }

    @Cacheable('cachedMethodCache')
    def cachedMethod() {
        // do some expensive stuff
    }
} 
```

只需将*exampleService.cachedMethod()*替换为您自己的服务和方法。

# php - Codeigniter：CLI 仅显示默认控制器

> ID：12115997
> 
> 赞同：0
> 
> 时间：2012-08-24T20:11:50.113
> 
> 标签：php, codeigniter, controller, command-line-interface

`Hello, world!`

我是第一次使用 CodeIgniter，但在通过 CLI 使用它时遇到了问题。我有一个控制器`application/controllers/datasource.php`，当我尝试运行时：

```
$ php index.php datasource 
```

它输出主页。在浏览器中打开其他控制器工作正常，但我似乎无法从 CLI 加载任何控制器。我尝试更改`$config['uri_protocol']`变量，但没有任何影响。问题可能是什么？

谢谢！

**注意：这是**[此处](https://stackoverflow.com/questions/7677314/running-codeigniter-via-cli-outputs-website-root-instead-of-expected-result)描述的确切问题，但接受的答案根本不是解决方案。

# metadata - 人脸标记信息和照片元数据

> ID：12115998
> 
> 赞同：7
> 
> 时间：2012-08-24T20:11:55.917
> 
> 标签：metadata, photo, xmp

是否有一种标准方法可以从照片元数据中读取/写入面部标签？

我可以用它从流行的照片组织者那里导入面部标记信息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T20:11:55.917

是的。

元数据工作组（即 Adob​​e、Microsoft、Sony、Nokia 等）已经开发了 XMP 的标准扩展来做到这一点，请参阅元[数据工作组规范](http://www.metadataworkinggroup.com/specs/)中的图像区域元数据第 5.9 节。

XMP 的另一个扩展已由 Microsoft 为 Windows Live Photo Gallery 完成，并受 .NET API 支持。请参阅[人员标记概述](http://msdn.microsoft.com/en-us/library/ee719905%28VS.85%29.aspx)。

似乎 Google Picasa 3.9 从两个 XMP 扩展读取面部标记，但只写入 MWG 之一。

看更多：

*   [存储人脸标签和标题的标准是什么？](http://productforums.google.com/forum/#!topic/picasa/UQGWyIUAIjE)

*   [Picasa 与 Windows Live 照片库 | Geoff Coupe 的博客](http://gcoupe.wordpress.com/2011/12/10/picasa-versus-windows-live-photo-gallery/)

*   [Picasa 3.9 错误和问题（照片订单上传、非 G+ 链接和帐户签名、照片中的姓名标签疼痛）](http://productforums.google.com/forum/#!msg/picasa/uJ3jYiuxSYw/KZM9k8H4LOs)

*   [阅读 Windows Live 照片库插入的“人物标签”](https://stackoverflow.com/questions/1475176/reading-people-tags-inserted-by-windows-live-photo-gallery?rq=1)