# StackOverflow 问答 11926000-11926999

# android - 可绘制资源文件最大尺寸

> ID：11926003
> 
> 赞同：0
> 
> 时间：2012-08-12T21:25:55.953
> 
> 标签：android, drawable

我为我的游戏应用程序创建了一个精灵表，每帧 100x100 像素。

一切都运行良好，直到我在 sprite 表中添加了几行之后，突然之间没有任何东西被绘制到屏幕上。我将精灵表恢复为早期版本，该版本具有较少的行，并且一切正常。

工作的精灵是 400w*900h 像素，而停止工作的精灵是 400w*1400h 像素......我想在某个地方有一个中间地带，我只是懒得去寻找它。

我的问题是资源图像文件有什么尺寸限制？除了将其拆分为不同的文件之外，还有其他方法可以解决我刚才描述的问题吗？

提前致谢

编辑：getMaximumBitmapHeight() 有点帮助：在我的测试设备（nexus 星系）上它只有 2000 东西......而在模拟器上是在 30k 范围内：S 有没有办法设置允许的大小？如果有人知道...从电话到电话有什么不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:55:27.950

Canvas 类有一个方法[getMaximumBitmapHeight()](http://developer.android.com/reference/android/graphics/Canvas.html#getMaximumBitmapHeight%28%29)（自然是 & 宽度）为您提供给定设备的此信息，您只需将其打印在日志消息中即可。

可能的解决方法是添加列。您的图像只有 400 像素宽，但高 1400 像素。可能是 1400 太宽，但我非常怀疑 400px 太宽。

# matlab - Matlab - 从值向量中删除不良数据

> ID：11926005
> 
> 赞同：1
> 
> 时间：2012-08-12T21:26:07.107
> 
> 标签：matlab

我有一个向量，stdclock，它保存遵循这种模式的值：

```
stdclock=[13 25 38 50 63 75 88 100 113 125 138 150 163 175 188 200 213 2517 2529 2542 2554 2567 2579 2592 2604 2617 2629 2642 2654 2667 2679 2692 2704 2717] 
```

该数据是通过对相隔 12 或 13 个数字的 17 个值进行编码生成的（例如 25-13=12、38-25 = 13 等）。您会看到前 17 个值遵循此模式。每组 17 个值编码一个对象，我们将其称为“项目”，并且独立于随后的 17 个值。然后，在值 17 和 18 之间，存在比 12 或 13 大得多的差异，但它可以是任何高于 15 的数字。这种差异表示数据中的分离定性分离，使得前 17 个值编码一个项目，接下来的 17 个值编码另一个项目，等等。第 17 个和第 18 个值之间的差异永远不会像 12 或 13 一样小。因此，我可以检查任何值 >= 15，并确保我可以将我的这样的数据。或者，

到现在为止还挺好。问题是这个向量是通过硬件生成的，有时可能会出现错误，以至于一个或多个值被简单地丢弃而不被记录。我想找出一种算法来检测“项目”中缺少值，然后从该项目中删除所有剩余值。

我无法完全理解如何以适用于所有错误模式的方式执行此操作（例如，如果一个项目可以在任何地方以任何模式缺少数字，并且相邻项目也可能在任何地方的任何地方都缺少数字模式，或无处）。

任何帮助，将不胜感激。“损坏”项目的示例如下

```
stdclock=[13 25 38 50 63 75 88 100 113 125 138 150 163 175 188 200 213 2529 2542 2554 2567 2579 2592 2604 2642 2654 2679 2692 2704] 
```

这个 stdclock 与上面的相同，但我在第二项中进行了检查并随机删除了数字，包括第一个和最后一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:47:03.047

如果您可以假设连续组之间的差异总是大于某个阈值，则可以使用以下方法：识别连续组，并丢弃所有长度小于 17 的组。结果是新组的阈值可以设置为低至 15，因为丢失的数据点会将一组 17 分成两个较短的组，然后将它们都删除。

```
stdclock=[13 25 38 50 63 75 88 100 113 125 138 150 163 175 188 200 213 2529 2542 2554 2567 2579 2592 2604 2642 2654 2679 2692 2704];

%# a difference of more than groupDelta indicates a new (pseudo-)group
groupDelta = 15; 
groupJump = [1 diff(stdclock) > groupDelta];

%# number the groups
groupNumber = cumsum(groupJump);

%# count, for each group, the numbers. 
groupCounts = hist(groupNumber,1:groupNumber(end));

%# if a group contains fewer than 17 entries, throw it out
badGroup = find(groupCounts < 17);
stdclock(ismember(groupNumber,badGroup)) = [];

stdclock =
    13    25    38    50    63    75    88   100   113   125   138   150   163   175   188   200   213 
```

# windows - 使用 Linq to XML 将 XElement 添加到 XML 文件

> ID：11926007
> 
> 赞同：3
> 
> 时间：2012-08-12T21:26:12.337
> 
> 标签：windows, silverlight, windows-phone-7, xelement

使用 Linq to XML，我正在尝试将 XElement 添加到现有的 XML 文件中。它必须在 Windows Phone .NET 框架中完成。目前我的 XML 文件如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
    <Kids>
      <Child>
        <Name>Kid1</Name>
        <FirstName>hisname</FirstName>
      </Child>
    </Kids>

and my code looks like this:

    using (IsolatedStorageFileStream stream = 
               new IsolatedStorageFileStream("YourKids.xml", fileMode, store))
    { 
        XDocument x = XDocument.Load(stream);
        XElement t =  new XElement("Child",
                                           new XElement("Name", pName),
                                           new XElement("FirstName", pFirstname));

       t.Add(from el in x.Elements()
             where el == el.Descendants("Child").Last()
             select el);

       x.Save(stream);
    }

this doesn't do what I want to achieve. I want to add a new "Child" element to the the exisiting XML file like this :

     <?xml version="1.0" encoding="utf-8"?>
    <Kids>
      <Child>
        <Name>Kid1</Name>
        <FirstName>hisname</FirstName>
      </Child>
    <Child>
        <Name>kid2</Name>
        <FirstName>SomeName</FirstName>
      </Child>
    </Kids>

Could use some help because I am stuck ;-)

After the tips from GSerjo, my code looks like this now:

 try
            {

                if (store.FileExists("YourKids.xml"))
                {

                    using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream("YourKids.xml",FileMode.Open, store))
                    {

                        var x = XElement.Load(stream);
                        var t =  new XElement("Child",
                                                        new XElement("Name", pName),
                                                        new XElement("FirstName", pFirstname)
                                                                  );

                        x.Add(t);

                        x.Save(stream);

                        stream.Close();
                        return;
                    }

                }
                else
                {

                    using (IsolatedStorageFileStream CreateIsf = new IsolatedStorageFileStream("YourKids.xml",FileMode.Create,store))
                    {

                        var xDoc = new XElement("Kids",
                                                     new XElement("Child",
                                                       new XElement("Name", pName),
                                                       new XElement("FirstName", pFirstname)
                                                                 )

                                                  );

                        xDoc.Save(CreateIsf);
                        CreateIsf.Close();

                        return;
                    }
                }
            }
            catch (Exception ex)
            {
              message = ex.Message;
            } 
```

这给了我一个这样的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Kids>
  <Child>
    <Name>test</Name>
    <FirstName>test</FirstName>
  </Child>
</Kids><?xml version="1.0" encoding="utf-8"?>
<Kids>
  <Child>
    <Name>test</Name>
    <FirstName>test</FirstName>
  </Child>
  <Child>
    <Name>testing</Name>
    <FirstName>testing</FirstName>
  </Child>
</Kids> 
```

哪个仍然不正确，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:46:11.770

初始 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<Kids>
  <Child>
    <Name>Kid1</Name>
    <FirstName>hisname</FirstName>
  </Child>
</Kids> 
```

以下代码将一个新的孩子添加到现有的 xml

```
 [Test]
    public void Test()
    {
        string filPath = @"YourKids.xml";
        var root = XElement.Load(filPath);
         var newChild =  new XElement("Child",
                                   new XElement("Name", "NewName"),
                                   new XElement("FirstName", "NewFirstName"));
         root.Add(newChild);
        root.Save(filPath);
    } 
```

结果xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<Kids>
  <Child>
    <Name>Kid1</Name>
    <FirstName>hisname</FirstName>
  </Child>
  <Child>
    <Name>NewName</Name>
    <FirstName>NewFirstName</FirstName>
  </Child>
</Kids> 
```

**更新**

保存错误，您应该将流长度设置为 0

解释

阅读器现有文件后，*流*不会删除任何数据

```
using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream("YourKids.xml",FileMode.Open, store))
                    {
                        var x = XElement.Load(stream); 
```

所以当你打电话时，数据已被附加

```
 x.Save(stream);
   stream.Close(); 
```

添加**stream.SetLength(0);** 在**x.Save（流）之前；**并且所有数据都将被覆盖。

这里是完整版

```
 if (store.FileExists("YourKids.xml"))
            {
                using (var stream = new IsolatedStorageFileStream("YourKids.xml", FileMode.Open,
                                                                                     store))
                {
                    var x = XElement.Load(stream);
                    var t = new XElement("Child",
                                         new XElement("Name", pName),
                                         new XElement("FirstName", pFirstname)
                        );
                    x.Add(t);
                    stream.SetLength(0);
                    x.Save(stream);
                    stream.Close();
                }
            }
            else
            {
                using (var CreateIsf = new IsolatedStorageFileStream("YourKids.xml", FileMode.Create, store))
                {
                    var xDoc = new XElement("Kids",
                                            new XElement("Child",
                                                         new XElement("Name", pName),
                                                         new XElement("FirstName", pFirstname)
                                                )
                        );
                    xDoc.Save(CreateIsf);
                    CreateIsf.Close();
                }
            } 
```

请注意：我已将*return*语句删除为无用。

PS看看resharper，它可以改进代码。

# ruby - Ruby：组合数组值

> ID：11926011
> 
> 赞同：1
> 
> 时间：2012-08-12T21:26:41.820
> 
> 标签：ruby, arrays, sum

我有一个指示坐标值的数组数组，如下所示：

```
cells = [ [0,0], [0,1] ] 
```

数组中的每个数组都是一个 X 和 Y 值。所以，如果我想向右移动，那就是`X+1`在每个单元格上。我可以像这样将其表示为一个单元格：

```
delta = [1,0] 
```

现在，我想做的是将该值合并到每个单元格中，以便每个单元格的 X 值与 delta 的值相加，所以在这种情况下，最终输出应该是：

```
new_cells = [ [1,0], [1,1] ] 
```

这是迄今为止我能想到的最好的，它似乎真的很重：

```
cells = [[0,0],[0,1]]
delta = [1,0]
cells.each do |cell|
  cell[0] = cell[0] + delta[0]
  cell[1] = cell[1] + delta[1]
end
# Now cells = [[1,0],[1,1]] 
```

是否有一种更简洁的单线方法可以将一个数组加到数组链中的每个数组上，或者上述方法是该问题的最佳解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:49:39.227

我认为您最好的解决方案是认识到单元格和增量是不同的数据类型，如果它不是数组，您可以更清楚地对其进行操作：

```
Cell = Struct.new(:x, :y) do 
  def + other
    Cell.new(self.x + other.x, self.y + other.y)
  end
end

# cells is some array of Cell objects
# delta is some Cell object

cells.map! {|cell| cell + delta} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T21:33:11.520

这里：

```
cells = cells.map {|c| [c[0] + delta[0], c[1] + delta[1]] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T21:41:33.960

```
cells.map! {|x, y| [x + delta[0], y + delta[1]] } 
```

请注意，如果其他人引用了单元格数组或数组中包含的单元格之一，Linuxios 的回答、我的回答和您的解决方案都会产生不同的效果。只有您的答案会修改原始单元格，因此使用我的解决方案或 Linuxios 的解决方案引用可能仍指向旧数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T21:45:45.770

```
cells.map {|cell| cell.zip(delta).map{|x, y| x + y }} 
```

我认为这并不比已提出的其他解决方案更清洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T22:10:21.797

以下是您不必担心将单元格键与 delta 匹配的方法：

```
cells = cells.map {|cell| [cell,delta].transpose.map {|value| value.reduce(:+)}} 
```

一步步：

```
cells = cells.map { |cell|         # => [0,0]

  combined = [cell, delta]         # => [[0,0], [1,0]]

  transposed = combined.transpose  # => [[0, 1], [0, 0]]

  new_c = transposed.map { |value| # => [0, 1]

    value.reduce(:+)               # => 1, => 0

  }

  new_c                            # => [1,0] As expected for first cell.
}

cells                              # => [[1,0],[1,1]] Final result 
```

使用另一个示例数据：

```
cells = [[0,0],[1,1],[2,2]]
delta = [1,1]
plug  = Proc.new {
  cells = cells.map { |cell| [cell, delta].transpose.map { |value| value.reduce(:+) } }
}

plug.call # => [[1, 1], [2, 2], [3, 3]]
plug.call # => [[2, 2], [3, 3], [4, 4]]
plug.call # => [[3, 3], [4, 4], [5, 5]]
plug.call # => [[4, 4], [5, 5], [6, 6]]
plug.call # => [[5, 5], [6, 6], [7, 7]] 
```

另一个：

```
cells = [[0,0,0],[0,1,2],[1,2,3],[2,3,4]]
delta = [3,2,1]

plug.call # => [[3, 2, 1],   [3, 3, 3],   [4, 4, 4],   [5, 5, 5]]
plug.call # => [[6, 4, 2],   [6, 5, 4],   [7, 6, 5],   [8, 7, 6]]
plug.call # => [[9, 6, 3],   [9, 7, 5],   [10, 8, 6],  [11, 9, 7]]
plug.call # => [[12, 8, 4],  [12, 9, 6],  [13, 10, 7], [14, 11, 8]]
plug.call # => [[15, 10, 5], [15, 11, 7], [16, 12, 8], [17, 13, 9]] 
```

希望这能更好地回答你的问题。

# android - Android 替换 HTML 中的数据

> ID：11926014
> 
> 赞同：0
> 
> 时间：2012-08-12T21:26:53.427
> 
> 标签：android, html, xml

我有一些从 XML 文件中解析的数据。`OnClick`在每个项目中，我想显示在 webview 中解析的数据，那么如何用标签替换 webview 中的数据，即 html 标签 %titlt% 被替换为标题等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:08:52.610

*   使用 String.format() 但它只是位置
*   [TextUtils replace()](http://developer.android.com/reference/android/text/TextUtils.html)也只是位置
*   使用模板库：[Java 中的开源模板引擎](http://java-source.net/open-source/template-engines)

对于 3-4 个字段，我建议使用 String.format

# macos - 两个 Xib 同时同步核心数据

> ID：11926015
> 
> 赞同：2
> 
> 时间：2012-08-12T21:26:53.550
> 
> 标签：macos, core-data, xib

我正在尝试创建一个核心数据应用程序，用户将大量信息组织成部分。我有一个主 xib，它有一个弹出菜单和一个无边框框。在该框中，将加载一个单独的 xib，其中包含从弹出按钮中选择的部分的视图。

我决定制作第二个窗口/面板，它是一种辅助窗口。这个想法是主窗口显示一个汇总表，而辅助视图通过在汇总表中获取当前选择并将其显示在文本字段、图形日期选择器中（而不是强制用户使用在表格中输入日期的正确格式）等。它还包含一些可选字段并显示统计信息，因此这些不会阻塞我的主视图。

我的主要 xib 的 Document.m 有：

```
- (id)init
{
    self = [super init];
    if (self) {
        viewControllers = [[NSMutableArray alloc] init];
        accessoryViewControllers = [[NSMutableArray alloc] init];

        ManagingViewController *vc;
        ManagingViewController *accessoryVC;
        vc = [[SummaryViewController alloc] init];
        accessoryVC = [[SummaryAccessoryViewController alloc] init];
        [vc setManagedObjectContext: [self managedObjectContext]];
        [accessoryVC setManagedObjectContext: [self managedObjectContext]];
        [viewControllers addObject: vc];
        [accessoryViewControllers addObject: accessoryVC];       
    }
    return self;
} 
```

对于将在弹出按钮中列出的其他 viewControllers/xib 文件，依此类推。在弹出窗口中进行选择会返回其发送者标记，然后调用另一个获取该标记的方法，并将 vc 数组中的 objectAtIndex 加载到主窗口框，并将 accessoryVC 数组加载到辅助窗口中。在实际的 SummaryViewController.m 中，我有：

```
- (id) init {
    self = [super initWithNibName: @"SummaryView" bundle:nil];
    if (self) {
        [self setTitle: @"Summary"];
    }

    return self;
} 
```

我构建了所有视图，然后开始绑定。主窗口表格中的一列可能会绑定到arrangedObjects.aaa，而辅助视图的文本字段将绑定到selection.aaa，但是当tableview 选择发生变化时，它的选择不会改变。我猜那是因为从技术上讲，他们使用的是两个独立的 NSArrayController。

我在书中看到了一些示例，其中辅助窗口将数据同步到主窗口，它之所以有效，是因为两个窗口都来自同一个 xib，因此它们使用了相同的 NSArrayController。我的问题是，我可以使用以下哪些选项：

1）有没有办法让 NSArrayControllers 在多个 xib 文件中保持同步？

2) 我可以将 SummaryAccessoryView.xib 中的自定义视图移动到 SummaryView.xib 中，以便一个 xib 包含主窗口和辅助窗口的视图。然后他们将共享 NSArrayControllers。但是，如何让我的弹出窗口将一个视图放在主窗口中，将另一个视图放在附件窗口中？我目前的方法依赖于`[super initWithNibName: SummaryView.xib]`所以我看不到任何方法来指定哪个视图。

3）我想我可以将整个东西转换为单窗口模型，废弃多余的字段并将额外的字段放在我的主视图的底部，但用户将无法隐藏或移动它它周围，我再次遇到这个问题，让用户将他们的日期格式化为表格视图......如果我知道如何在用户单击表格单元格时出现图形日期选择器，它可能会起作用。但如果可能的话，我更愿意保留双窗口模型。

关于如何执行选项 1 或 2 的任何想法？

编辑：我得到了选项 3 的工作：

您首先需要一些 ivars：日期选择器 (myDatePicker)、您的表 (myTable)、包含日期选择器的弹出框 (myPopover) 和 NSArrayController (myArray)。同样在我的示例中，日期列是第一列（第 0 列），我在 IB 中将其命名为“日期”。如果您有多个日期（如开始/结束日期或两个表格），您可以添加一个 NSString（“tableAndColumn”），它使用 #define 设置标志来确定您需要哪个日期，并将您的 if 语句转换为 if-否则有多种情况。

```
- (BOOL) tableView:(NSTableView *)tableView
shouldEditTableColumn:(NSTableColumn *)tableColumn
               row:(NSInteger)row {
    if (tableColumn == [myTable tableColumnWithIdentifier: @"date"]) {
        //tableAndColumn = myStartDate;
        [myDatePicker setDateValue: [myArray valueForKeyPath: @"selection.date"]]; //this will set your date picker to the value already in the table column
        NSRect rect = [myTable frameOfCellAtColumn: 0 row: [myTable selectedRow]];
        [myPopover showRelativeToRect: rect ofView: myTable preferredEdge:NSMaxYEdge];
        return NO;
 //   } else if (tableColumn == [myTable tableColumnWithIdentifier: @"endDate"]) {
 //      ...
    } else {
        return YES;
    }
}

- (void) popoverWillClose:(NSNotification *)notification {
//    if ([tableAndColumn isEqualToString: MyStartDate]) {
        [myArray setValue: [myDatePicker dateValue] forKeyPath: @"selection.date"];
//    } else if ([tableAndColumn isEqualToString: MyEndDate]) {
//       ...
//    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:31:52.397

You can bind to your array controllers across NIB files by using properties of your NIB file's owner that are key-value coding and key-value observing compliant. E.g. if one of your NIB files has your NSViewController subclass as the file's owner, you can bind controls to the file's owner using key paths that start with `representedObject`.

In your example, you could store your view controllers (which you initialized in `-[Document.m init]`) in dedicated properties, and set the NSViewController's `representedObject` to the document instance. Then, in your NIB file, you could bind your controls to the file's owner using a key path that starts with `representedObject.myViewControllerProperty.myArrayControllerProperty` etc.

In my own app, I initiate a custom window controller in `-[Document makeWindowControllers]` using `-initWithWindowNibName` and store it in a `mainWC` property. This main window controller creates subordinate view controllers (similar to how you've done it) and sets their `representedObject` property to itself (`[vc setRepresentedObject:self]`). All bindings in other NIB files are then routed thru this main window controller via bindings to file's owner using key paths that start with `representedObject`.

In a similar fashion, my `MainMenu.xib` file connects e.g. the "Enabled" property of some menu commands to appropriate array controller properties by binding to the Application object using key paths that start with `mainWindow.windowController.document.mainWC`.

# javascript - 如何在 extjs 或 javascript 中创建动态 CSS 类

> ID：11926021
> 
> 赞同：5
> 
> 时间：2012-08-12T21:27:59.500
> 
> 标签：javascript, css, extjs

是否可以在 extjs 中为 GridView 创建动态 css 类，而无需对样式表中的 css 类进行硬编码，例如

```
 DEFAULT_ROW_COLOR = '#E0E0E0';
 ...
 var gridview = new Ext.grid.GroupingView({
  forceFit : forceFit,
  hideGroupedColumn : true,
  showGroupName : false,
  groupTextTpl: '{text}',
  getRowClass : getRowClassFunc
 });

 var getRowClassFunc = function(record, rowIndex, rowParams, store) {
   if (rowIndex == 1 ) {
     // create a dynamic class based on DEFAULT_ROW_COLOR for background color
   }  
   if (rowIndex > 1)  {
     // create a dynamic class for darker color for the background.
   }
 }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T21:52:04.510

您可以使用[`Ext.util.CSS.createStyleSheet`](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.util.CSS-method-createStyleSheet)（在 ExtJS 3.4 和 ExtJS 4.1 中都可用）来实现该确切目的。

样本：

```
Ext.util.CSS.createStyleSheet(
    '.some-row-class {background-color:' + DEFAULT_ROW_COLOR + ';}'
); 
```

# python - 读取混合项目的文件并保留其数据类型

> ID：11926023
> 
> 赞同：0
> 
> 时间：2012-08-12T21:28:39.213
> 
> 标签：python

我有一个 TSV 文件，它由整数和一些错误数据组成，这些数据可能是浮点数或字符等。

这个想法是读取文件的内容并找出哪些是坏的（包含整数以外的数据）

一旦打开文件进行读取，就可以使用 readline 方法读取每一行。当然，readline() 方法将读取的每一行作为字符串返回，而不是它的组成数据类型。我的理解是，我可以`pickle`以某种方式使用该模块，通过将其表示为执行转储和加载方法的序列化版本来确保我保留原始数据类型。

问题是，我该怎么做？

通过读取每一行并对其进行腌制，这无济于事，因为 readline 默认情况下将其读取为字符串。因此，在酸洗时，它实际上只是将一个字符串酸洗成一个序列化的 python 对象表示，而 unpickling 只会将它作为一个字符串返回。因此，行中的实际数据（例如整数或字符）被表示为字符串，而不管。

所以我假设问题是，我如何以正确的方式腌制事物，或者如何处理文件的每一行以确保其数据类型得到维护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:52:03.040

就好像你从泡菜中获取字符串一样，只需使用 '\t' 拆分字符串，然后使用

```
a = "0343523"
a.isdigit()
True

b = "934sjsspam"
b.isdigit()
False 
```

还有另一种 unicodes 的方法也[unicodes numeric check](http://docs.python.org/library/stdtypes.html#unicode.isnumeric)，所以只需使用它们

并维护数据类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T21:48:48.503

首先，解决酸洗的使用，您不会通过将每一行单独酸洗到文件中来解决它。ascii 格式按原样使用换行符，它只会制作一个凌乱的文件。通过简单地将整个数据腌制为数据结构，您可以保留有关整个事物的信息......例如：

```
from cPickle import loads, dumps
from types import IntType

line1 = [1, 2, 3]
line2 = [1.0, 'foo', 'bar']
line3 = [4, 5, 6]
pickled = dumps((line1, line2, line3))
# ((lp1\nI1\naI2\naI3\na(lp2\nF1\naS'foo'\np3\naS'bar'\np4\na(lp5\nI4\naI5\naI6\nat.
unpickled = loads(pickled)
# ([1, 2, 3], [1.0, 'foo', 'bar'], [4, 5, 6])

print all(isinstance(i, IntType) for i in line1)
# True
print all(isinstance(i, IntType) for i in line2)
# False 
```

现在，当您将对象带回时，它们已被清晰地键入。

现在除了酸洗之外，如果您无法控制源文件的格式，您可以简单地测试每个制表符分隔的行：

```
line1 = '1\t2\t3'
line2 = '1.0\tfoo\tbar'
line3 = '4\t5\t6'

print all(map(str.isdigit, line1.split('\t')))
# True
print all(map(str.isdigit, line2.split('\t')))
# False
print all(map(str.isdigit, line3.split('\t')))
# True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:03:14.347

TSV 文件已经丢失了所有类型信息。

如果使用了 pickle 模块来写出文件，您将能够轻松地 unpickle 它，但是看起来您只是可以读取损坏的文件，所以 pickle 在这里对您没有用处

您可以做的最好的事情是尝试将每个字段转换为`int`并在失败时处理异常

# c++ - 成员函数与带有对象引用的静态函数

> ID：11926024
> 
> 赞同：0
> 
> 时间：2012-08-12T21:28:46.217
> 
> 标签：c++, function, static, member

当我可以将静态函数传递给对象的引用时，为什么还要使用成员函数？

例如：

```
#include <iostream>

class Widget{
private:
    int foo;
public:
    Widget(){
        foo = 0;
    }
    static void increment( Widget &w ){
        w.foo++;
        std::cout << w.foo << std::endl;
    }
};

class Gadget{
private:
    int foo;
public:
    Gadget(){
        foo = 0;
    }
    void increment(){
        foo++;
        std::cout << foo << std::endl;
    }
};

int main(int argc, const char * argv[]){

    Widget *w = new Widget();
    Widget::increment( *w );

    Gadget *g = new Gadget();
    g->increment();

    return 0;
} 
```

这不仅仅是风格上的事情吗？我的理解是，成员函数是为每个对象实例创建的，而静态函数不是——而且由于您可以像上面的示例一样使静态函数在每个实例的基础上运行，因此创建静态函数不应该更有效吗？成员函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:31:16.580

成员函数不是由实例创建的。它们有一个隐式的第一个参数，即`this`指针，因此它们实际上看起来与您的静态函数非常相似。

例如，

```
struct Foo {
  void foo(int i) {}
}

Foo f;
f.foo(42);
Foo::foo(f, 42); 
```

最后两行也是如此。但是，很难看出如何使用静态方法或函数来实现这一点：

```
struct IFoo {
  virtual foo() const {}
};

struct Foo1 : virtual public IFoo {
  virtual foo() const {}
};

IFoo* f = new Foo1;
f->foo(); 
```

因此，除了允许您使用运算符调用实例上的方法的语法糖之外`.`，您还需要它们来实现这种运行时多态性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T21:36:26.620

这很重要，因为它允许[多态性](https://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)；特别是因为[动态调度](https://en.wikipedia.org/wiki/Dynamic_dispatch)需要它，其中绑定调用的方法在运行时由调用它的对象的真实类型确定。无论对象本身的运行时类型如何，静态调用始终绑定到指定类型上的方法。

# entity-framework-4.1 - 实体框架、CTP5、SQLServerCompact、缺少 Database.SetInitializer

> ID：11926026
> 
> 赞同：0
> 
> 时间：2012-08-12T21:28:49.373
> 
> 标签：entity-framework-4.1, ef-code-first, sql-server-ce-4

我已经安装了 EFCodeFirst 0.8 (CTP5) 和 EFCodeFirst.SQLServerCompact 0.8.84821。我更新了对 EntityFramework 和 System.Data.SqlServerCe.Entity.dll 的引用。我的项目编译并运行，但有一个例外：我无法调用 Database.SetInitializer。

这是我的代码的外观：

```
using System.Data.Entity;

namespace Recipes.Models
{
    public class RecipesEntities : DbContext
    {
        public RecipesEntities()
        {

            System.Data.Entity.Database.SetInitializer<RecipesEntities>(new SampleData());
            //Database.SetInitializer<RecipesEntities>(new SampleData());
        }

        public DbSet<Category> Categories { get; set; }
        ...
    }
} 
```

我得到的错误是

> 命名空间“System.Data.Entity.Database”中不存在类型或命名空间“SetInitializer”

事实上，它并没有出现在 Intellisense 中。但是，正如我所说 - 如果我注释掉调用 SetInitializer 的行，项目就会编译并运行。我无法正确测试它，因为大多数操作都依赖于数据库中的一些种子数据。

这种行为的原因可能是什么？

# java - 可靠地区分有状态和无状态 EJB 2.0 bean

> ID：11926027
> 
> 赞同：0
> 
> 时间：2012-08-12T21:29:03.740
> 
> 标签：java, reverse-engineering, ejb-2.x

我正在尝试找出一个陈旧且相当陈旧的 EJB 2.0 应用程序，未来可能会迁移到 EJB 3.x。

EJB 3.x 足以保持其 bean 定义紧凑，并为重要的元数据使用注释。不幸的是，EJB 2.x 肯定更复杂，多个 XML 文件相互堆积。添加一些特定于 JBoss 的方法调用和相应的 XML 文件，结果是一团糟……

所以，从基础开始：

*如何可靠地区分有状态和无状态 EJB 2.0 bean？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:42:55.253

一个重要的信息是`ejb-jar.xml`文件的内容。它可能包含明确的元素 wrt bean 是否有状态。

对于有状态 bean：

```
<session>
   ...
   <ejb-name>TestBean</ejb-name>
   ...
   <ejb-class>com.example.TestBean</ejb-class>
   <session-type>Stateful</session-type>
   ...
</session> 
```

对于无状态 bean：

```
<session>
   ...
   <ejb-name>TestBean</ejb-name>
   ...
   <ejb-class>com.example.TestBean</ejb-class>
   <session-type>Stateless</session-type>
   ...
</session> 
```

其他重要的迹象可以在 bean 实现中找到。根据 EJB 2.0 规范，第 7.5.3 节：

> 无状态会话 bean**不得**实现 SessionSynchronization 接口。

从第 7.8 节开始，关于无状态 bean：

> 会话 bean 类**必须**定义一个不带参数的单一 ejbCreate 方法。

# jquery - 崩溃中的引导下拉菜单，

> ID：11926028
> 
> 赞同：15
> 
> 时间：2012-08-12T21:29:27.050
> 
> 标签：jquery, css, twitter-bootstrap, overflow, collapse

我正在使用 Bootstrap 2.0.3，在 div 中带有可折叠/可展开的下拉菜单。当下拉菜单溢出 div 时，它们会被切断（但不应该）。jsfiddle来说明：http: [//jsfiddle.net/t3wFK/1/](http://jsfiddle.net/t3wFK/1/)

在 Bootstrap 2.0.2 中，菜单不会被切断：http: [//jsfiddle.net/u3wkK/](http://jsfiddle.net/u3wkK/)

我通过使用 css 规则找到了一半的解决方法，如下所示：

```
#stuff.in {
  overflow: visible;
} 
```

每当标有“collapse”的 div 展开时，引导程序就会添加“in”css 类。

不幸的是，这种解决方法在 Firefox 中完全失效。

有任何想法吗？我正在考虑降级到 Bootstrap 2.0.2，但这会很痛苦。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T01:38:18.903

这里的问题似乎是在 2.0.3 中，Bootstrap 将`.collapse`类应用于`#stuff`元素。在引导 css 中，有一种样式：

```
.collapse {
    overflow: hidden;
} 
```

但是，当您展开`.collapse`目标时，该`overflow`属性仍然存在`hidden`。

不确定它是否是错误（必须更深入地研究它以查看这样做是否有任何缺点），但修改规则 for`.collapse.in`会起作用。

```
.collapse.in {
    height: auto;  /* this style already exists in bootstrap.css */
    overflow: visible;  /* this one doesn't. Add it! */
} 
```

如果您不想修改 Bootstrap 的 CSS（如注释中所述，可能会产生意想不到的副作用），您可以向元素添加`shown`事件`hide`处理程序`#stuff`以修改`overflow`属性：

```
$('#stuff').on({
    shown: function(){
        $(this).css('overflow','visible');
    },
    hide: function(){
        $(this).css('overflow','hidden');
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:58:06.280

我已经用 Bootstrap 2.1.1 尝试了你的解决方法，它在 Firefox 16 中中断，只是第一次工作，然后根本没有打开。

在我的例子中，问题只是访问者第一次打开可折叠元素并应用了内联固定高度。第二次高度设置为自动。

所以我发现问题依赖于 nav-collapse 元素的 html 代码，该元素最初没有声明状态：

首先是代码：

```
<div class="nav-collapse"> 
```

然后在扩展第一次引导程序分配固定高度后：

```
<div class="nav-collapse in collapse" style="height: 286px;"> 
```

并在关闭第一次高度回到 0 后：

```
<div class="nav-collapse collapse" style="height: 0px;"> 
```

第二次打开，它在自动高度下工作正常：

```
<div class="nav-collapse collapse" style="height: auto;"> 
```

因此 .collapse 类需要 javascript 来设置自动高度：

```
<div class="nav-collapse collapse"> 
```

我花了一段时间才弄清楚！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T21:49:07.563

尝试使用该`!important`标志，就像在 Firefox 中一样，由于某种原因，属性以不同的优先级读取。

[http://jsfiddle.net/t3wFK/2/](http://jsfiddle.net/t3wFK/2/)

```
.in {
    overflow: visible !important;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T05:27:22.923

我对此进行了大量研究，通过将这行代码添加到 css 中找到了解决问题的方法，我在[https://github.com/twitter/bootstrap/pull/2423#issuecomment-13132202找到了这个](https://github.com/twitter/bootstrap/pull/2423#issuecomment-13132202)

```
.collapse.in[style="height: auto;"] {overflow: visible;} 
```

这对我有用，希望这对你有用

# java - 从电子邮件收到的图像中获取 exif 数据

> ID：11926032
> 
> 赞同：0
> 
> 时间：2012-08-12T21:29:58.520
> 
> 标签：java, android, exif

我有一个处理图像文件的活动：

```
 if (Intent.ACTION_VIEW.equals(action) && type != null && type.startsWith("image/")) {
        Uri imageUri = i.getData();
        try {
            Bitmap image = MediaStore.Images.Media.getBitmap(getContentResolver(), imageUri);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

这让我得到了位图中的图像，但是我还需要从中获取 exif 数据。保存图像使用`image.compress`删除此数据。

例如，如果我单击`View`gmail，则没有可以使用的真实路径，因此我一直在尝试获取 exif 数据。有没有办法获取`byte[]`传递给我的活动的数据，或从对象获取 exif 数据`Bitmap`？

**笔记：**

这个：

```
ExifInterface exifData = new ExifInterface(imageUri.getPath()); 
```

不会导致异常，但是我得到所有标签的 null ，如果我尝试打印路径，我会得到：

```
/my.email@gmail.com/messages/248/attachments/0.1/BEST/false 
```

如果我先点击`save`然后`view`在 gmail 中，我可以使用上述方法成功检索 exif 数据，并将其传递`imageUri.getPath()`给 exif 构造函数。

如果没有办法使`view`工作，那么我怎样才能使它只有在将文件保存到磁盘后才提示用户使用我的应用程序？这就是我的意图过滤器现在的样子：

```
<activity android:name=".GameActivity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="image/*" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:44:56.283

应该可以通过以下方式提取exif数据：

[如何将 ExifInterface 与流或 URI 一起使用](https://stackoverflow.com/questions/8554264/how-to-use-exifinterface-with-a-stream-or-uri)

取自那里： [http ://android-er.blogspot.co.at/2011/04/read-exif-of-jpg-file.html](http://android-er.blogspot.co.at/2011/04/read-exif-of-jpg-file.html)

```
//Get Real URL
String[] proj = { MediaStore.Images.Media.DATA };
Cursor cursor = parentActivity.managedQuery(contentUri, proj, null, null, null);
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
String realURL = cursor.getString(column_index);

//Access Exif
ExifInterface exifInterface = new ExifInterface(realURL);
String focal_length = exifInterface.getAttribute(ExifInterface.TAG_FOCAL_LENGTH); 
```

# php - 如何将 MySQL DATEDIFF 查询的结果作为变量传递给 PHP 函数？

> ID：11926033
> 
> 赞同：0
> 
> 时间：2012-08-12T21:30:00.913
> 
> 标签：php, mysql, variables, datediff

我正在尝试获取表“用户”中“上次访问”列中的日期/时间与特定用户的当前日期/时间之间的秒数差异。我认为以下查询应该这样做：

```
$query ="SELECT unix_timestamp(NOW()) - unix_timestamp(last_visit) from users WHERE username='$user'";
$result=mysql_query($query) or die(mysql_error()); 
```

但是，我不确定如何从中获取结果作为变量，以便可以将其传递给 PHP 函数。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:33:03.070

```
$query ="SELECT unix_timestamp(NOW()) - unix_timestamp(last_visit) AS time_difference from users WHERE username='$user'";
                                                                   ^ 
```

我想如果它有一个正确的名称，使用这个变量会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T21:35:47.610

返回带有名称的结果：

```
$query ="SELECT unix_timestamp(NOW()) - unix_timestamp(last_visit) AS time_diff from users WHERE username='$user'";
$result=mysql_query($query) or die(mysql_error());

while($row=mysql_fetch_assoc($result)) 
{ 
 $diff= $row['time_diff']
} 
```

# javascript - Rails JavaScript 视图在生产环境中不起作用

> ID：11926034
> 
> 赞同：4
> 
> 时间：2012-08-12T21:30:28.890
> 
> 标签：javascript, ruby-on-rails, nginx, passenger, production

我的 Rails 应用程序出现无法解释的问题。我在应用程序的所有部分都使用了大量的 JavaScript。在开发中一切正常，但在生产中，我的 javascript*视图*中的代码似乎没有执行。

这特别奇怪，因为页面上的所有其他 JavaScript 都运行良好。使用 JavaScript 工作的自定义选项卡。甚至我的定制日历也能按预期工作。唯一不起作用的是触发以 .js.coffee 结尾的视图的远程链接。

单击远程链接时，我的 webkit 检查器会返回此信息：http: [//cl.ly/Ihyf](http://cl.ly/Ihyf)

但是，当查看该请求的响应选项卡时，它什么也没显示： http: [//cl.ly/Ihxs](http://cl.ly/Ihxs)

此外，控制台没有显示任何错误。就好像我的 new.js.coffee 只是空的一样。

被调用的视图包含一些简单的 JavaScript 来显示模式：

```
$('#modal_container').html("<%=j render 'form' %>")
$('#modal_container').modal() 
```

在开发模式下，所有视图都正确加载。我也多次运行 rake:assets:precompile ，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T05:42:47.243

您应该将`coffee-rails`gem 从`:assets`组移动到主组。

# ckeditor - Liferay 6.1 TextEditor 换行问题

> ID：11926043
> 
> 赞同：0
> 
> 时间：2012-08-12T21:32:13.343
> 
> 标签：ckeditor, liferay, line-breaks

我遇到了 Liferay6.1 TextEditor/CKEditor 换行符的问题。它在段落之间增加了太多的空间。有什么办法可以更改配置，以便换行符在段落之间增加更少的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:22:41.323

这不完全取决于您主题中的 css 吗？您可以更改主题中的行高、边距等，以反映您需要的尺寸。

首先，尝试使用 Firebug（或与您的浏览器等效的任何东西）操作 css 以更改行高，然后将更改带到您的主题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:53:35.923

通过呈现文章，您可以通过门户属性替换文章的输出流：

```
journal.transformer.regex.pattern.0=
journal.transformer.regex.replacement.0= 
```

搜索您需要的正则表达式并将其放入`portal-ext.properties`.

# objective-c - （！object）和（object == nil）之间有区别吗？

> ID：11926047
> 
> 赞同：2
> 
> 时间：2012-08-12T21:32:47.283
> 
> 标签：objective-c, ios

> **可能重复：**
> [ObjectiveC: if (obj) {…} AND if (obj != nil) {…}，哪个更好？](https://stackoverflow.com/questions/11821282/objectivec-if-obj-and-if-obj-nil-which-is-better)

这两种情况有区别吗：

```
if (!object) {
 // do something
} 
```

和 。. .

```
if (object == nil) {
 // do something
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T21:34:44.293

不，没有区别。这两个例子完全相同。从 C 规范**6.5.3.3 一元算术运算符**：

> 如果其操作数的值比较不等于 0，则逻辑否定运算符的结果**`!`**为 0，如果其操作数的值比较等于 0，则为 1。结果类型为**`int`**。表达式**`!E`**等价于**`(0==E)`**。

因为`nil`是 0，所以最后一句话完全适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T21:34:37.530

如果 object 是 type`id`或任何有效的 Objective-C 对象，那么只有一个区别：可读性。（即从编译器的角度来看，它们都是相同的。）

但是，在比较时可能会有一些例子`nil`不是很好。例如，如果出于某种邪恶的不合逻辑的原因， object 是 an `int`，则只有以下两个语句是有效的：

```
if (object == 0) 
```

和

```
if (!object) 
```

并且它们将再次等效，但是将 int 与指针（即`nil`）进行比较（除非整数是显式常量 0）是非法的，并且很可能会导致编译器警告（在大多数情况下，它仍然可以工作，但是...)

# objective-c - Objective-C 方法调用中的表达式错误

> ID：11926048
> 
> 赞同：0
> 
> 时间：2012-08-12T21:33:00.787
> 
> 标签：objective-c, nsobject

我已经深入学习了 Objective-C，并且在调用方法时遇到了一些问题。这是我的简单代码片段：

**Player.h 代码片段：**

```
@interface Player : NSObject{

}

-(void) performAction;
-(int) addNumber:(int) a toNumber:(int) b;

@end 
```

**Player.m 代码片段：**

```
@implementation Player

-(void)performAction{
    NSLog(@"Here it is!");
}

-(int)addNumber:(int)a toNumber:(int)b{
    return a+b;

}

@end 
```

从 main.m 调用方法：

```
int val = [playerOne addNumber:(int)3 toNumber:(int)3]; 
```

在上面的代码行中，我不断收到“预期表达式”错误。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:45:59.423

这段代码对我有用。

**播放器.h**

```
#import <Foundation/Foundation.h>

@interface Player : NSObject

- (void)performAction;
- (int)addNumber:(int)a toNumber:(int)b;

@end 
```

**播放器.m**

```
#import "Player.h"

@implementation Player

- (void)performAction {
    NSLog(@"Here it is!");
}

- (int)addNumber:(int)a toNumber:(int)b {
    return a+b;
}

@end 
```

**主文件**

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "Player.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        Player *playerOne = [Player new];
        int val = [playerOne addNumber:(int)3 toNumber:(int)3];

        NSLog(@"%d", val);

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

# c# - 通过作为参数传递的委托来操作对象的字段

> ID：11926052
> 
> 赞同：0
> 
> 时间：2012-08-12T21:33:19.057
> 
> 标签：c#, windows-phone-7

我正在创建一个自定义对话框类。它在构造函数中采用 OptionObject 对象的列表。在某些时候，它会显示出来，并根据用户单击的选项执行注入到 OptionObject 中的操作。

```
public class OptionObject
    {
        public object Id { get; set; }
        public string Text { get; set; }

        public Action Action { get; set; }

        public OptionObject(object id, string text, Action action)
        {
            this.Id = id;
            this.Text = text;
            this.Action = action;
        } 
} 
```

这是 DialogWindow 调用操作的方式：

```
this.Options.Tap += (sender, args) =>   // Options is a ListBox
                                    {
                                        var o = sender as ListBox;
                                        var x = o.SelectedItem as OptionObject;
                                        if(x!=null)
                                            x.Action();
                                        this.IsOpen = false;
                                    }; 
```

最后我试图在另一个页面上使用我的对话框：

```
foreach (var o in eventsOnDate)
                {
                    chooseEventDialogWindow.Data.OptionsList.Add(new OptionObject(o.Text, ()=> /*### don't know what to put in here ###*/ ));
                } 
```

问题是 OptionObject.Action 有时需要 OptionObject.Id 属性。我怎样才能在上面的狙击中访问它？

**编辑**

如果可能的话，我不想将任何参数传递给这个 lambda 表达式，因为有时不需要这个 ID。如果这是正确的方法，可选参数会很好。

附言

这对于这个问题并不重要，但为了避免不必要的讨论，这个对话框基于 Telerik 的 RadWindow。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:52:11.403

[Action](http://msdn.microsoft.com/en-us/library/system.action)是一种没有参数且不返回值的方法，因此您必须在创建**Action**委托时包含**OptionObject.ID**属性：

 **```
object id = new object();
Action act = () => DoSomethingWithIdAndReturnVoid(id);
OptionObject opt = new OptionObject(id, "some text", act);
opt.Action(); 
```

或者像**Henk**在他的评论中建议的那样做，即创建一个[具有输入参数的 Action](http://msdn.microsoft.com/en-us/library/018hxwa8)：

```
object id = new object();
Action<object> act = (x) => DoSomethingWithIdAndReturnVoid(x);
OptionObject opt = new OptionObject(id, "some text", act);
opt.Action(opt.ID); 
```

请注意，只有在处理[Reference Types](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)时，对封闭变量的更改才能正常工作。**

# google-app-engine - 从 Eclipse 本地服务器和 Google App Engine 读取文本文件的不同结果

> ID：11926053
> 
> 赞同：0
> 
> 时间：2012-08-12T21:33:37.010
> 
> 标签：google-app-engine, gwt, character-encoding, bufferedreader

我从 GWT 中读取了一个文本文件“myFile.txt”，如下所示。问题是我在“输入”字符串中得到不同的结果，具体取决于服务器：

*   如果我从 Eclipse Indigo 本地服务器运行（调试），“输入”在末尾包含字符“\r”和“\n”。
*   如果我从 Google App Engine 运行它，“输入”仅包含结尾字符“\n”，因此 input.length 中少了一个字符。

为什么会发生这种情况，我怎么会有同样的行为？

谢谢

```
String input=readFromFile("myFile.txt");

public String readFromFile(String fileName) {
  File file = new File(fileName);
  StringBuffer contents = new StringBuffer();
  BufferedReader reader = null;
  try {
    reader = new BufferedReader(new FileReader(file));
    String text = null;
    while ((text = reader.readLine()) != null) {
    contents.append(text).append(System.getProperty("line.separator"));
    }
  } catch (FileNotFoundException e) {
    e.printStackTrace();
  } catch (IOException e) {
    e.printStackTrace();
  } finally {
    try {
      if (reader != null) {
        reader.close();
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
  contents.deleteCharAt(contents.length()-2); // Remove to make it work in GAE
  contents.deleteCharAt(contents.length()-1);
  return contents.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:05:34.423

因为不同操作系统上的行分隔符不同。这就是这样[`System.getProperty("line.separator")`](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.htmlhttp://)做的。

在 Windows 上是`\r\n\`（两个字符），而在 Linux 上是`\n`（一个字符）。[看这里。](http://techcreeze.blogspot.com/2009/03/new-line-character-in-java-for-windows.html).

# php - 从日期数组中按天显示出现次数

> ID：11926054
> 
> 赞同：0
> 
> 时间：2012-08-12T21:33:46.953
> 
> 标签：php, date, multidimensional-array

我正在开发一个统计应用程序，我想输出一天中发生的交互量。

我有一个多维数组，可以从数据库中提取所有信息，这是一个示例：

```
 [0] => Array
            (
                [date] => 2012-07-26
                [location] => 709c6d241674ca22
                [action] => start_scan
            )

        [1] => Array
            (
                [date] => 2012-07-26
                [location] => 709c6d241674ca22
                [action] => scan_displayed
            )

        [2] => Array
            (
                [date] => 2012-07-27
                [location] => 709c6d241674ca22
                [action] => lower_device
            )

        [3] => Array
            (
                [date] => 2012-07-27
                [location] => 709c6d241674ca22
                [action] => how_to_use_displayed
            )

        [4] => Array
            (
                [date] => 2012-07-27
                [location] => 709c6d241674ca22
                [action] => raise_device
            )

        [5] => Array
            (
                [date] => 2012-07-28
                [location] => 709c6d241674ca22
                [action] => scan_displayed
            ) 
```

我可以通过格式化日期来计算每次交互发生的日期：

```
date('D', strtotime('2012-07-26')); 
```

我的问题是如何计算一周中的每一天发生了多少交互然后输出它，例如：

```
[Sunday] => 2
[Monday] => 3
[Tueday] => 1
[Wednesday] => 5
[Thursday] => 10
[Friday] => 4
[Saturday] => 9 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:40:42.257

```
$dates = array();
foreach($data as $item) {
    $day = date('l', $item['date']);
    $dates[$day]++;
}
var_dump($dates); 
```

您可能希望将数组声明为 $dates = array('Monday'=>0, 'Tuesday'=>0 .... ) 以获取包含没有交互的日期的数组。

# sql - 我应该在我的 Oracle Update 语句中使用 Too Many Rows Error 作为我的异常子句吗？

> ID：11926057
> 
> 赞同：9
> 
> 时间：2012-08-12T21:34:04.733
> 
> 标签：sql, oracle, exception, plsql

我有一系列需要在我的 Oracle 包中使用的更新语句。这种情况很少见，但可能偶尔会出现不可避免的用户错误，这会导致更新语句之一引发“单行子查询返回一行或多行”错误。

我一直在研究 oracle PL/SQl 的异常处理，但我对如何以及使用什么来捕获此异常以使包不会崩溃有点困惑。

我知道存在预先构建的“Too Many Rows”异常子句，但我读到的所有内容似乎都说它用于不正确的插入语句。

我可以将此作为我的例外吗？还是我需要建立自己的例外条款。我以前从来没有自己建造过，只有一个粗略的想法，知道在哪里放置所需的一切。

以下代码基本上是在此特定过程中设置更新的方式，但为了简洁起见，我仅使用其外观的简单示例。

```
INSERT INTO TempTable... --(Initial insert statement)

UPDATE TempTable t SET t.Row_one = (SELECT (Statement_One))
WHERE T.Row_One is NULL

UPDATE TempTable t SET t.Row_one = (SELECT (Statement_Two))
WHERE T.Row_One is NULL

UPDATE TempTable t SET t.Row_one = (SELECT (Statement_Three))
WHERE T.Row_One is NULL

-- Does the exception clause start here?
EXCEPTION
    WHEN TOO_MANY_ROWS THEN
(What do I tell the Procedure to do here, what am I able to tell it to do?)

--end of updates that need the exception handling

-- more insert statements into other tables based on data from the preceding Temp Table

END; 
```

这会起作用还是我需要构建一个自定义异常？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T23:55:31.300

首先，TOO_MANY_ROWS 异常不会捕获您的选择语句返回多行的情况。TOO_MANY_ROWS 异常适用于 ORA-01422，当您发出返回多行的 SELECT .. INTO 语句时。您将遇到的异常是 ORA-01427，单行子查询返回多行。

如果要在过程中处理此特定错误，请使用 EXCEPTION_INIT pragma 将异常名称与错误相关联：

```
too_many_values EXCEPTION;
PRAGMA EXCEPTION_INIT(too_many_values, -1427); 
```

然后您可以在异常处理程序中引用此名称：

```
EXCEPTION
    WHEN TOO_MANY_VALUES THEN
       {perform your handler here} 
```

您放入处理程序的内容取决于您的程序执行的操作。很多时候，您希望向调用者返回某种错误代码/消息：

```
PROCEDURE my_proc(p_one VARCHAR2, p_err OUT VARCHAR2) IS
    too_many_values EXCEPTION;
    PRAGMA EXCEPTION_INIT(too_many_values, -1427);
BEGIN
...
EXCEPTION
   WHEN TOO_MANY_VALUES THEN
      p_err := 'More than one value available to assign in the update';
      RAISE;  -- re-raise the exception for the caller

   WHEN OTHERS THEN
      p_err := SQLERRM;  -- return the oracle message for the unexpected error
      RAISE;
END; 
```

另一种方法是跳过特定的异常处理程序并在 WHEN OTHERS 处理程序中返回通用 oracle 消息：

```
EXCEPTION
  WHEN OTHERS THEN
    p_err := SQLERRM;
END; 
```

第一种方法的优点是，当流程的输出直接反馈给用户时，您可以自定义消息以使最终用户更加友好。后一种方法的优点是涉及的编码较少。错误处理是任何应用程序的一个重要方面并且经常被忽略。

Oracle 的文档在[这里](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/errors.htm#i3329)。

编辑：

如果这是一个包，并且您希望避免通过一系列过程调用传递一长串错误变量，您可以声明一个包范围的错误变量，在遇到错误时设置它，然后再次引发错误。

```
PACKAGE BODY my_pkg is
  g_err  VARCHAR2(256);

PROCEDURE procx(... , p_err OUT VARCHAR2) IS...
  ...
  proc_y(p1);
EXCEPTION
  WHEN OTHERS THEN
    p_err := NVL(g_err, SQLERRM);
END;

PROCEDURE proc_y(p1 VARCHAR2) IS
...
proc_z(p2);

END;

PROCEDURE proc_z(p2 VARCHAR2) IS
  too_many_values EXCEPTION;
  PRAGMA EXCEPTION_INIT(too_many_values, -1427);
BEGIN
  ....
EXCEPTION
   WHEN TOO_MANY_VALUES THEN
      g_err := 'More than one value available to assign in the update';
      RAISE;  -- re-raise the exception for the caller
END; 
```

当 proc_z 中引发异常时，会对其进行处理，然后再次引发。它通过 proc_y（那里没有处理程序）传播回来，然后在 proc_x 中返回给用户。未在全局 g_err 中设置的错误会得到一般的 Oracle 错误消息。这避免了必须在整个包中传递初始错误参数。

# ruby-on-rails-3 - PDF prawnto 不适用于 rails 3.2.8

> ID：11926058
> 
> 赞同：1
> 
> 时间：2012-08-12T21:34:08.860
> 
> 标签：ruby-on-rails-3, pdf-generation, prawn, prawnto

我们正在使用 prawn 在我们的 rails 3 应用程序中生成 pdf 文件。现在升级到rails 3.2.8后，rails plugin prawnto出现了问题。这是错误：

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them o
ut and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes
 for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at D:/rails_proj/
emclab-failed2/config/environment.rb:5)
DEPRECATION WARNING: ActiveSupport::Memoizable is deprecated and will be removed in future releases,simply use Ruby memoization pattern inst
ead. (called from extend at D:/rails_proj/emclab-failed2/vendor/plugins/prawnto/lib/prawnto/template_handler/compile_support.rb:5)
D:/rails_proj/emclab-failed2/vendor/plugins/prawnto/lib/prawnto/template_handlers/base.rb:3:in `<module:TemplateHandlers>': uninitialized co
nstant ActionView::TemplateHandler (NameError) 
```

连rails server都无法启动。有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:54:19.737

Prawn 是一颗红宝石，不依赖 prawnto 与 rails 一起工作。这是 aniket 的[帖子](http://www.idyllic-software.com/blog/creating-pdf-using-prawn-in-ruby-on-rails/)，可直接在 rails 3.2 中使用 prawn。我们按照说明进行操作，它也适用于 rails 3.2.8。如果您与 prawnto 有相同的兼容问题，请检查它。

# css - 淡出但不淡入

> ID：11926065
> 
> 赞同：6
> 
> 时间：2012-08-12T21:34:55.110
> 
> 标签：css, css-transitions

如何使用 CSS3 淡出但不淡入。 IE 当我将类应用于元素时，我希望背景立即更改颜色而没有延迟或过渡，当我删除它时，我希望背景根据过渡。我知道它应该很简单，但我还没有设法弄清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T21:40:35.160

指定有和没有类的元素的转换时间。

```
.el {
    background: red;
    -webkit-transition: background .5s;
}
.el.hover {
    background: blue;
    -webkit-transition: 0;
}​ 
```

# php - 什么可以一次从 session.save_path 文件夹中删除所有会话文件

> ID：11926066
> 
> 赞同：-2
> 
> 时间：2012-08-12T21:35:10.153
> 
> 标签：php, session, joomla

我遇到了奇怪的服务器（或 cms）行为。安装了 joomla 1.0.15。我注意到它会在一段时间后清除 session.save_path 文件夹（所有会话文件）。我试图在 htaccess 中将 session.save_path 文件夹更改为另一个文件夹，我想可能是一些 cron 脚本（目录已成功更改，会话文件已在该新文件夹中创建）但它一次又一次地发生。有人知道那可能是什么吗？

```
Joomla 1.0.15
System  Linux n11 3.2.6mtv10 #1 SMP Wed Apr 4 09:28:15 PDT 2012 x86_64 
Configure Command
'./configure''--prefix=/usr/local/php-5.3.13'
'--enable-cli''--enable-cgi'
'--enable-fastcgi''--disable-debug'
'--disable-rpath''--disable-static'
'--with-pic''--with-openssl=/usr'
'--enable-bcmath''--with-bz2'
'--enable-calendar''--enable-ctype'
'--with-curl''--with-db4'
'--with-zlib-dir=/usr''--with-xsl'
'--enable-exif''--enable-ftp'
'--with-gd''--with-ttf'
'--with-mime-magic=/usr/share/file/magic.mime'
'--enable-gd-native-ttf''--with-jpeg-dir=/usr'
'--with-png-dir=/usr''--with-freetype-dir=/usr'
'--with-gettext''--with-iconv'
'--with-imap''--with-kerberos=/usr'
'--with-imap-ssl=/usr''--enable-mbstring'
'--with-mhash''--with-mysql=/usr/bin/mysql_config'
'--with-mysqli=/usr/bin/mysql_config''--with-pcre-regex=/usr'
'--with-pgsql''--with-pspell=/usr'
'--enable-sockets''--enable-wddx'
'--with-xmlrpc''--with-zlib=/usr'
'--with-pear''--with-layout=GNU'
'--with-ldap''--with-sqlite'
'--enable-pdo''--with-pdo-mysql=/usr'
'--with-pdo-pgsql=/usr''--enable-soap'
'--with-mcrypt''--with-pcre-regex=/usr' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:14:46.800

那是服务器问题，刚刚转移到另一个主机

# android - Activity 泄漏了最初添加的窗口（未附加对话框）

> ID：11926071
> 
> 赞同：1
> 
> 时间：2012-08-12T21:36:02.837
> 
> 标签：android, android-activity

我收到以下错误消息：

```
"Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@417521e0 that was originally added here..." 
```

我检查了其他 stackoverflow 线程，但它们都处理附加了对话框的活动。我没有，我只使用 my`PreloadActivity`来显示一个静态（顺便说一下黑色）屏幕，同时启动另一个屏幕`Activity`（它从黑色淡入，所以这没关系）。我的代码如下：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.d("myapp", "PreloadActivity.onCreate");
    super.onCreate(savedInstanceState);

    // Set full screen mode and disable the keyguard (lockscreen)
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN  
                         | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD 
                         | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
                         | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    setContentView(R.layout.preload);
}

@Override
protected void onStart() {
    Log.d("myapp", "PreloadActivity.onStart");
    super.onStart();
}

@Override
protected void onResume() {
    Log.d("myapp", "PreloadActivity.onResume");
    super.onResume();

    Intent intent = new Intent(this, MyMainActivity.class);
    startActivity(intent);
    overridePendingTransition(0, 0); // no animation
    finish(); 
} 
```

这里“泄露”了什么？有关系吗？

**更新**：相关的 logcat 部分（包括堆栈跟踪）。该设备是 HTC One V。

```
08-11 19:31:37.438: D/myapp(11724): PreloadActivity.onCreate
08-11 19:31:37.488: D/myapp(11724): PreloadActivity.onStart
08-11 19:31:37.488: D/myapp(11724): PreloadActivity.onResume
08-11 19:31:37.508: D/myapp(11724): PreloadActivity.onPause
08-11 19:31:37.708: D/myapp(11724): MyMainActivity.onCreate started 
08-11 19:31:39.200: D/myapp(11724): MyMainActivity.onCreate finished, time: 1530 ms
08-11 19:31:39.200: D/myapp(11724): MyMainActivity.onStart started
08-11 19:31:39.320: D/myapp(11724): MyMainActivity.onStart finished
08-11 19:31:39.320: D/myapp(11724): MyMainActivity.onResume started
08-11 19:31:39.350: D/myapp(11724): MyMainActivity.onResume finished
08-11 19:31:39.430: D/dalvikvm(11724): GC_FOR_ALLOC freed 573K, 5% free 15070K/15779K, paused 20ms
08-11 19:31:42.153: D/myapp(11724): MyMainActivity.onPause started 
08-11 19:31:42.203: I/myapp(11724): GLSurfaceView has been paused
08-11 19:31:42.243: D/myapp(11724): MyMainActivity.onPause finished
08-11 19:31:42.733: D/myapp(11724): PreloadActivity.onStop
08-11 19:31:42.753: D/myapp(11724): PreloadActivity.onDestroy
08-11 19:31:43.194: E/WindowManager(11724): Activity mypackage.PreloadActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@417521e0 that was originally added here
08-11 19:31:43.194: E/WindowManager(11724): android.view.WindowLeaked: Activity mypackage.PreloadActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@417521e0 that was originally added here
08-11 19:31:43.194: E/WindowManager(11724):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:380)
08-11 19:31:43.194: E/WindowManager(11724):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:372)
08-11 19:31:43.194: E/WindowManager(11724):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:320)
08-11 19:31:43.194: E/WindowManager(11724):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
08-11 19:31:43.194: E/WindowManager(11724):     at android.view.Window$LocalWindowManager.addView(Window.java:557)
08-11 19:31:43.194: E/WindowManager(11724):     at android.app.Dialog.show(Dialog.java:301)
08-11 19:31:43.194: E/WindowManager(11724):     at com.android.internal.policy.impl.PhoneWindow.showNavigationBarTips(PhoneWindow.java:3936)
08-11 19:31:43.194: E/WindowManager(11724):     at com.android.internal.policy.impl.PhoneWindow.access$1600(PhoneWindow.java:123)
08-11 19:31:43.194: E/WindowManager(11724):     at com.android.internal.policy.impl.PhoneWindow$2.run(PhoneWindow.java:3099)
08-11 19:31:43.194: E/WindowManager(11724):     at android.os.Handler.handleCallback(Handler.java:608)
08-11 19:31:43.194: E/WindowManager(11724):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-11 19:31:43.194: E/WindowManager(11724):     at android.os.Looper.loop(Looper.java:156)
08-11 19:31:43.194: E/WindowManager(11724):     at android.app.ActivityThread.main(ActivityThread.java:4977)
08-11 19:31:43.194: E/WindowManager(11724):     at java.lang.reflect.Method.invokeNative(Native Method)
08-11 19:31:43.194: E/WindowManager(11724):     at java.lang.reflect.Method.invoke(Method.java:511)
08-11 19:31:43.194: E/WindowManager(11724):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-11 19:31:43.194: E/WindowManager(11724):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-11 19:31:43.194: E/WindowManager(11724):     at dalvik.system.NativeStart.main(Native Method)
08-11 19:31:43.274: D/myapp(11724): SaveTheAdventurersActivity.onStop() started
08-11 19:31:43.304: D/myapp(11724): SaveTheAdventurersActivity.onStop() finished 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:59:25.790

当您完成一个特定的活动实例并尝试启动一个新的活动、服务或使用该实例停止它时，就会发生这种错误，例如..

```
OldActivity instance;

oncreate()
{
   instance=this;
}

method() {
instance.finish();
instance.startActivity(new Intent(ACTION_MAIN).setClass(instance, NewActivity.class));
} 
```

# ruby-on-rails - validate => true 时嵌套的表单字段消失

> ID：11926073
> 
> 赞同：1
> 
> 时间：2012-08-12T21:36:28.770
> 
> 标签：ruby-on-rails, has-many, client-side-validation

我有两个具有 has_many :through 关系的模型。一段时间以来，表单一直运行良好。我决定进行客户端验证，此时属性访问权限开始出现。

以下是模型：

```
class User < ActiveRecord::Base
  has_many :missions, :through => :participations
  has_many :participations
  accepts_nested_attributes_for :participations
end

class Mission < ActiveRecord::Base  
  has_many :users, :through => :participations
  has_many :participations
end

class Participation < ActiveRecord::Base
  belongs_to :mission
  belongs_to :user
end 
```

`

这是表单（其中资源是用户）：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true) do |f| %>
  <%= f.fields_for :missions do |ff| %>
     ....
  <% end %>
<% end %> 
```

这导致 `client_side_validation_hash' for nil:NilClass)` 如果我删除 :validate => true，则表单显示正常。这让我相信资源查看任务属性存在问题。我对模型所做的任何修改都会导致表单中不显示任务字段。

我在这里查看了几个类似的问题和答案（这是我的一些想法），但没有一个对我有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:20:10.360

换行

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true) do |f| %> 
```

至

```
<%= form_for(@user, :url => registration_path(resource_name), :validate => true) do |f| %> 
```

# python - Django Haystack/Solr：显示在 SearchIndex 的 prepare 方法中添加的 Solr 字段

> ID：11926075
> 
> 赞同：3
> 
> 时间：2012-08-12T21:37:05.783
> 
> 标签：python, django, solr, django-haystack

我有一个`SearchIndex`子类，并且为 itd 定义了一个准备方法。

在所述准备方法中，我向`prepared_data`字典中添加了两个条目，这些条目将列表作为值。后来，当我得到一个 时`SearchResult`，我尝试使用 的`get_additional_data()`方法访问这些添加的条目列表`SearchResult`。

问题是我没有得到列表，我只得到一个项目。

我怎样才能找回整个列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:21:20.617

检查您的 solr 架构 xml 文件。

您添加的字段必须是架构中的多值字段

```
<field name="entry" type="string" indexed="true" stored="true" multiValued="true"/> 
```

当字段存在多个值时，多值字段很有用。一个简单的例子是标签，可能有多个标签需要被索引。

# java - RabbitMQ：消息保持“未确认”

> ID：11926077
> 
> 赞同：26
> 
> 时间：2012-08-12T21:37:20.227
> 
> 标签：java, message-queue, rabbitmq, amqp

我的 Java 应用程序将消息发送到 RabbitMQ 交换器，然后交换器将消息重定向到绑定队列。我将 Springframework AMQP java 插件与 RabbitMQ 一起使用。

问题：消息进入队列，但它停留在“未确认”状态，它永远不会变成“就绪”。

可能是什么原因？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T08:24:32.417

Unacknowledged 消息意味着它已被您的消费者读取，但消费者从未向 RabbitMQ 代理发送回 ACK 表示它已完成处理。

我对 Spring Framework 插件并不太熟悉，但是在某个地方（对于您的消费者）您将声明您的队列，它可能看起来像这样（取自[http://www.rabbitmq.com/tutorials/tutorial-two -java.html](http://www.rabbitmq.com/tutorials/tutorial-two-java.html) ):

```
channel.queueDeclare(queueName, ....) 
```

然后你将设置你的消费者

```
bool ackMode = false;
QueueingConsumer consumer = new QueueingConsumer(channel);
channel.basicConsume(queueName, ackMode, consumer); 
```

上面的 ackMode 是一个布尔值，通过将其设置为 false，我们明确地告诉 RabbitMQ，我的消费者将确认给定的每条消息。如果此标志设置为 true，那么您将不会在 RabbitMQ 中看到 Unacknowledged 计数，而是在消费者读取消息后（即，它已交付给消费者，它将从队列中删除）。

要确认消息，您将执行以下操作：

```
QueueingConsumer.Delivery delivery = consumer.nextDelivery();
//...do something with the message...
channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); //the false flag is to do with multiple message acknowledgement 
```

* * *

如果您可以发布一些消费者代码，那么我可能会提供进一步的帮助......但同时具体看一下[BlockingQueueConsumer](http://static.springsource.org/spring-amqp/docs/1.1.x/apidocs/org/springframework/amqp/rabbit/listener/BlockingQueueConsumer.html)：您将看到的构造函数可以设置[AcknowledgeMode](http://static.springsource.org/spring-amqp/docs/1.1.x/apidocs/org/springframework/amqp/core/AcknowledgeMode.html)并查看nextMessage() 这将返回一个 Message 对象，其中包含一个名为 getDeliveryTag() 的方法 这将返回一个 Long ，这是您将在 basicAck 上发回的 ID

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-03-26T08:44:34.897

只是为了让消息保持未确认状态的另一个可能原因加上我的 2 美分，即使消费者确保使用 basicAck 方法 -

有时，具有打开的 RabbitMQ 连接的进程的多个实例保持运行，其中一个可能导致消息卡在未确认状态，从而阻止消费者的另一个实例重新获取此消息。

您可以访问 RabbitMQ 管理控制台（对于本地计算机，这应该在 localhost:15672 可用），并检查是否有多个实例占用了通道，或者当前是否只有一个实例处于活动状态：

[![RabbitMQ 连接](../Images/b9a4e7d5b18d15936a871ab86f04722c.png)](https://i.stack.imgur.com/6j0zO.png)

找到多余的正在运行的任务（在本例中为 java）并终止它。移除恶意进程后，您应该会看到消息再次跳转到就绪状态。

# jsp - 将 JSP var 传递给 java 方法

> ID：11926080
> 
> 赞同：0
> 
> 时间：2012-08-12T21:37:47.773
> 
> 标签：jsp, parameters

在下面的代码片段中，我在另一个文件中调用 stringToValidURL() 方法，这是可行的，但是现在我想将字段 var 传递给该方法，并且我想将返回值存储在另一个可以在 c:out 中使用的 jsp var 中.

希望一些yoy可以帮助我！

```
<c:forEach items="${results}" var="result" varStatus="resultCounter">
                <tr>
                    <c:forEach items="${result}" var="field" varStatus="fieldCounter">
                        <!-- Skip useless columns -->
                        <c:if test="${(fieldCounter.count != 1) && (fieldCounter.count != 5)}" >
                            <c:if test="${fieldCounter.count == 2 }">
                                <jsp:useBean id="bolLink" class="nl.iwa.project.api.bol.BolAPI" />
                                    <%=bolLink.stringToValidURL("") %>
                            </c:if>
                            <td>
                                <c:out value="${field}" escapeXml="true" />
                            </td>
                        </c:if>
                    </c:forEach>
                </tr>
            </c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:57:35.417

`<jsp:setProperty/>`如果该类具有适当的 getter/setter，则使用操作。

```
<jsp:useBean id="bolLink" class="nl.iwa.project.api.bol.BolAPI" />
<jsp:setProperty name="bolLink" property="stringToValidURL" value="" />
<!-- Or -->
<jsp:setProperty name="bolLink" property="stringToValidURL" value="${expr}" /> 
```

# android - 返回时Android回收位图

> ID：11926084
> 
> 赞同：0
> 
> 时间：2012-08-12T21:38:03.187
> 
> 标签：android, button, bitmap, imageview, recycle

我的应用程序允许您选择一个图像，然后当您单击第一个活动的下一步时，它会将您带到活动编号。2，它显示了你在 imageview 中选择的图像，当你点击返回然后在第一个活动上重新点击下一步，它会将你带到活动 num.2 与你之前选择的图像

当您单击活动编号上的按钮时，如何使图像视图被回收。2 所以当你在第一个活动中选择一个新的位图时它会释放内存，这样我就可以避免 OutOfMemory 问题

```
 // the back button
    Back.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent back = new Intent(Second.this, StartActivity.class);
            startActivity(back);
        }
    }); 
```

这是图像视图

```
 iv = (ImageView) findViewById(R.id.choosen_iv);
    iv.setImageBitmap(choosenBitmap); 
```

我试过choosenBitmap.recycle(); 但它不起作用，当我在第一个活动上单击下一步时，位图仍然存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:42:20.903

而不是在返回按钮`StartActivity`的`onClick`方法中重新开始，只需调用`finish()`活动即可`Second`。这将带您回到第一个活动。然后，当您再次启动第二个活动时（通过选择另一个位图），它将像第一次那样初始化所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:00:21.847

为什么你需要一个带有 an 的后退按钮`Intent`才能返回上一个活动？硬件后退按钮可以自行处理。

您可以使用`onDestroy()`活动的生命周期方法来回收您的`choosenBitmap`Bitmap 类型变量。

# eclipse - 文件夹未与 Git 和 Bitbucket 同步

> ID：11926108
> 
> 赞同：0
> 
> 时间：2012-08-12T21:42:18.147
> 
> 标签：eclipse, git, git-cvs

我正在将 Eclipse 与 git 远程存储库一起使用。

出于某种原因，有一个文件夹（以及所有子文件夹）未与远程存储库同步。这些文件夹中的已修改文件不带有星号 (*)，因此，它们无法暂存或提交。

当我进入 www.bitbucket.org 查看我的项目时，我在该文件夹中得到的只是我的“无文件夹”名称旁边带有蓝色箭头的图标，而不是常规文件夹图标，这是一个出现在可以访问和同步良好的文件夹旁边。

![旁边的蓝色箭头图标](../Images/fc8b4243ca4357edd68596c91b31fc1a.png) ![已同步且运行良好的文件夹旁边的常规文件夹图标](../Images/e7451701c50d1cd99ab392f22b995815.png)

选项 --> 团队 --> 添加到索引不起作用。`git add <folder>`两者都不

我究竟做错了什么？任何想法？

非常感谢

佩德罗

这里有 git 状态转储：

```
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   .project
#   modified:   app/AppKernel.php
#   modified:   app/bootstrap.php.cache
#   deleted:    app/cache/dev/annotations/Acme-DemoBundle-Controller-DemoController    #contactAction.cache.php
#   deleted:    app/cache/dev/annotations/Acme-DemoBundle-Controller-DemoController    #helloAction.cache.php
#   deleted:    app/cache/dev/annotations/Acme-DemoBundle-Controller-DemoController    #indexAction.cache.php
#   deleted:    app/cache/dev/annotations/Acme-DemoBundle-Controller-DemoController.cache.php
#   deleted:    app/cache/dev/annotations/Xtremapp-DemoBundle-Controller-SecuredController    #loginAction.cache.php
#   deleted:    app/cache/dev/annotations/Xtremapp-DemoBundle-Controller-SecuredController    #logoutAction.cache.php
#   deleted:    app/cache/dev/annotations/Xtremapp-DemoBundle-Controller-SecuredController    #securityCheckAction.cache.php
#   deleted:    app/cache/dev/annotations/Xtremapp-DemoBundle-Controller-SecuredController.cache.php
#   deleted:    app/cache/dev/annotations/Xtremapp-DemoBundle-Controller-WelcomeController    #indexAction.cache.php
#   modified:   app/cache/dev/appDevDebugProjectContainer.php
#   modified:   app/cache/dev/appDevDebugProjectContainer.php.meta
#   modified:   app/cache/dev/appDevDebugProjectContainer.xml
#   modified:   app/cache/dev/appDevDebugProjectContainerCompiler.log
#   modified:   app/cache/dev/appdevUrlGenerator.php
#   modified:   app/cache/dev/appdevUrlGenerator.php.meta
#   modified:   app/cache/dev/appdevUrlMatcher.php
#   modified:   app/cache/dev/appdevUrlMatcher.php.meta
#   deleted:    app/cache/dev/assetic/config/0/064cba00a41b006ad8ca939936416158.php
#   modified:   app/config/config.yml
#   modified:   app/config/config_dev.yml
#   modified:   app/config/routing.yml
#   modified:   app/config/routing_dev.yml
#   modified:   app/config/security.yml
#   modified:   deps
#   modified:   src/Acme/StoreBundle/Controller/ConfigurationController.php
#   modified:   src/Acme/StoreBundle/Resources/translations/messages.es.yml
#   modified:   src/Acme/StoreBundle/Resources/views/layout.html.twig
#   modified:   vendor/bundles/FOS/UserBundle (modified content, untracked content)
#   modified:   vendor/doctrine (modified content, untracked content)
#   modified:   vendor/symfony (modified content)
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .gitignore
#   .settings/
#   app/AcmeStoreBundle.php
#   app/Common/
#   app/Resources/
#   app/cache/dev/annotations/Acme-StoreBundle-Controller-ConfigurationController    #confAction.cache.php
#   app/cache/dev/annotations/Acme-StoreBundle-Controller-ConfigurationController    #configurationAction.cache.php
#   app/cache/dev/annotations/Acme-StoreBundle-Controller-ConfigurationController    #saveConfigurationAction.cache.php
#   app/cache/dev/twig/98/
#   app/cache/dev/twig/99/
#   app/cache/dev/twig/9b/
#   app/cache/dev/twig/a0/
#   app/cache/dev/twig/a4/
#   app/cache/dev/twig/ac/
#   app/cache/dev/twig/ae/
#   app/cache/dev/twig/b0/
#   app/cache/dev/twig/b3/
#   app/cache/dev/twig/b9/
#   app/cache/dev/twig/bb/
#   app/cache/dev/twig/bc/
#   app/cache/dev/twig/bd/
#   app/cache/dev/twig/c0/3a/
#   app/cache/dev/twig/c0/89/
#   app/cache/dev/twig/c2/
#   app/cache/dev/twig/c5/
#   app/cache/dev/twig/c6/
#   app/cache/dev/twig/c8/
#   app/cache/dev/twig/c9/
#   app/cache/dev/twig/ca/
#   app/cache/dev/twig/ce/
#   app/cache/dev/twig/e4/
#   app/cache/dev/twig/ec/
#   app/cache/dev/twig/ee/
#   app/cache/dev/twig/ef/
#   app/cache/dev/twig/f0/
#   app/cache/dev/twig/f3/
#   app/cache/dev/twig/f4/
#   app/cache/dev/twig/f6/
#   app/logs/
#   src/Acme/StoreBundle/.DS_Store
#   src/Acme/StoreBundle/Resources/.DS_Store
#   src/Acme/StoreBundle/Resources/views/Configuration/
#   web/bundles/fosjsrouting 
```

使用我想要包含但不包含的文件夹之一的 .gitignorer 重新编辑。phpunit.xml Tests/autoload.php nbproject catalog.xml Propel/om/* Propel/map/*

```
!vendor/vendors.php
!vendor/* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:24:18.370

Did you added the folder/subfolders/files to your repository?

Right-Click on folder->Team->Add to Index

# ios - 从 NSLocalNotification 打开应用程序时转到视图控制器

> ID：11926110
> 
> 赞同：1
> 
> 时间：2012-08-12T21:42:32.173
> 
> 标签：ios, objective-c, ios5, uinavigationcontroller

当应用程序从`NSLocalNotification`.

我真的不知道从哪里开始，也找不到任何关于如何在线进行的示例。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:17:40.627

从哪儿开始：

你知道如何通过代码启动 segue 吗？如果没有，请参阅[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)文档并在此处搜索`prepareForSegue`并找到`performSegueWithIdentifier`很多点击。这也是一个很好的教程：[iOS 5 Storyboard: How To use Segues, Scenes and Static Content UITableViews](http://www.scott-sherwood.com/?p=219)但那里有很多。

你使用过[UILocalNotifications](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)吗？有关概述，请参阅[UILocalNotification 编程指南。](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1)

在处理事件方面，这是由[UIApplicationDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate)完成的，请参见事件方法：`application:didReceiveLocalNotification:`

> 本地通知类似于远程推送通知，但不同之处在于它们完全在同一设备上安排、显示和接收。应用程序可以创建和安排本地通知，然后操作系统在安排的日期和时间发送它。如果它在应用程序未在前台处于活动状态时提供它，它会显示警报、标记应用程序图标或播放声音——无论在 UILocalNotification 对象中指定什么。如果应用程序在前台运行，则没有警报、标记或声音；相反，如果委托实现它，则调用 application:didReceiveLocalNotification: 方法。

你如何处理 UILocalNotification 将取决于你的应用程序的状态：前台、后台、非活动。

# c++ - 内存中的静态成员和静态全局变量

> ID：11926115
> 
> 赞同：1
> 
> 时间：2012-08-12T21:44:14.197
> 
> 标签：c++, global-variables, static-variables

让我们考虑两种情况：

1.) 静态全局变量。当我生成地图文件时，我在 .bss 或 .data 部分中找不到静态全局变量。

2.) 静态成员

```
 #include <stdio.h>
    #include <iostream>
    #include <vector>
    #include <list>
    #include <algorithm>

    using namespace std;

    class Tree {
        struct Node {
            Node(int i, int d): id(i), dist(d) {}
            int id;
            int dist; // distance to the parent node
            list<Node*> children;
        };

        class FindNode {
            static Node* match;
            int id;
        public:
            FindNode(int i): id(i) {}
            Node* get_match()
            {
                return match;
            }

            bool operator()(Node* node)
            {
                if (node->id == id) {
                    match = node;
                    return true;
                }
                if (find_if(node->children.begin(), node->children.end(), FindNode(id)) != node->children.end()) {
                    return true;
                }
                return false;
            }
        };

        Node* root;

        void rebuild_hash();
        void build_hash(Node* node, Node* parent = 0);

        vector<int> plain;
        vector<int> plain_pos;
        vector<int> root_dist;
        bool hash_valid; // indicates that three vectors above are valid

        int ncount;
    public:
        Tree(): root(0), ncount(1) {}
        void add(int from, int to, int d);
        int get_dist(int n1, int n2);

    };

    Tree::Node* Tree::FindNode::match = 0;
... 
```

变量 Tree::FindNode::match 是 FindNode 类的静态成员。此变量显示在 bss 部分的映射文件中。为什么这样？？

```
 *(.bss)
 .bss           0x00408000       0x80 C:\Users\Администратор\Desktop\яндекс\runs\runs\\000093.obj
                0x00408000                _argc
                0x00408004                _argv
                0x00408020                Tree::FindNode::match 
```

我用的是MinGW，os windows 7。g++ ...cpp -o ...obj命令得到的所有object文件，ld ....obj -Map .....map命令得到的map文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T21:49:29.483

全局变量已经在静态内存中，因此 C 重新使用现有的关键字`static`来制作全局变量“文件范围”，C++ 遵循套件。关键字`static`从地图文件中隐藏您的全局。

Static members, on the other hand, are class-scoped, therefore they need to be available in the map file: other modules need to be able to access the static members of your class, both member functions and member variables, even if they are separately compiled.

# forms - 主干模型视图：在编辑（通过表单）和显示之间切换

> ID：11926116
> 
> 赞同：3
> 
> 时间：2012-08-12T21:44:21.857
> 
> 标签：forms, view, backbone.js

使用 Backbone，我为模型创建了一个视图。我想为用户提供以下工作流程：a）最初，模型内容仅通过模板显示，并且有一个编辑按钮 b）如果用户单击编辑按钮，模型内容将以表单和可以通过单击保存按钮将其保存回模型。c1) 如果保存成功，我们将通过模板重新呈现新的模型内容并再次显示 c2) 如果有任何验证错误，则使用错误更新表单。

我想出了以下关于如何实现这一点的选项。但我不确定最佳实践。任何建议都非常受欢迎。

**选项 1**：2 个子视图（一个用于显示内容，一个用于编辑内容）在显示和编辑之间的任何切换时动态创建（然后删除）。

**选项 2**：2 个子视图（一个用于显示内容，一个用于编辑内容）在任何开关（如切换）上隐藏/取消隐藏

**选项 3**：2 个子视图（一个用于显示内容，一个用于编辑内容）分配给任何开关上的父元素。

**选项 4**：1 个视图以管理模型内容和 2 个模板（一个用于显示，一个用于编辑），它们在显示和编辑之间的任何切换时呈现。

从我的直觉来看，我显然更喜欢选项 4，因为它只需要一个可以处理所有逻辑的视图。但也许我已经在性能、事件处理、DOM 访问等方面监督了一些事情。因此，任何关于 4 个选项的优缺点的激烈争论都受到高度赞赏。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:19:52.920

我一直在做类似的事情，除了编辑按钮不是附加到整个模型，而是附加到可以“就地”编辑的各个属性。为此，我一直在使用[主干表单](https://github.com/powmedia/backbone-forms)，将要编辑的元素替换为主干表单，然后在提交表单后重新渲染它。这工作得很好。

在您的情况下，由于您正在一次编辑整个模型，因此实际上会更容易。当用户单击编辑按钮时，将视图替换为主干表单，并在提交时重新渲染带有错误或成功消息的模型视图。主干表单使在表单上显示错误消息变得非常容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:25:06.360

我已经尝试过选项 3（2 个子视图）和选项 4（使用 2 个模板的 1 个视图）。

这是3的论据：

[在主干js中的只读视图和编辑视图之间切换](https://stackoverflow.com/questions/10863497/switching-between-readonly-view-and-edit-view-in-backbone-js)

这是一篇宣传 4 的文章，在“将联系人切换到编辑模式”下：

[http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-4/](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-4/)

* * *

我发现选项 3 更麻烦，因为现在您有 3 个视图使用相同的模型。它在 DOM 中提出了问题，因为现在嵌套在内部有一个用于父级的 el 和一个用于每个子级的 el。它也带来了封装问题，因为子视图应该真的从父视图继承，但是这对于 javascript 来说是困难的：

[使用javascript继承访问父类成员？](https://stackoverflow.com/questions/14528562/access-parent-class-member-with-javascript-inheritance)

我希望选项 3 更像是一个与 DOM 中的 el 相关联的抽象基类。然后查看和编辑可以继承它并在内部设置el，防止两个el的嵌套。但这打破了backbone.js 嵌套视图的方式：

[交换/切换/交换backbone.js视图到位？](https://stackoverflow.com/questions/14513754/swap-switch-exchange-backbone-js-views-in-place)

* * *

我第一次尝试时，选项 4“刚刚奏效”。如果 View.editing 为 true，则拥有一个可以渲染的 editTemplate 是微不足道的。在实践中，只读视图往往很小，根据定义，交互很少，它只会在编辑视图中增加几行。

4 的缺点是你用切换逻辑弄脏了你的视图。

4 的一个论点是它增加了重用代码和加强 DRY 的可能性。

4 的最后一个论点是，您可能在某个时刻有一个“丰富”的表单，它始终处于打开状态，并且您可能只想启用对特定表单元素的编辑。例如，一个联系人表单可能有一个内部的地址视图来处理它自己的更新。因此，查看/编辑在未来可能不会相互排斥。

* * *

我终于让自己选择了可行的方法（选项 4），因为这两个选项都在 html 文件中使用了两个模板。主干.js 的实现细节对最终用户来说并不重要。

我认为这一切都值得写一些冗长的文章来衡量每种方法的优缺点，并附上现实世界的例子。Backbone.js 还需要内置主干关系，可能还有 Backbone.ModelBinder，以及更好的 ._super 实现。如果其中一些概念更加充实，它将更容易实现选项 3 恕我直言。

但我很好奇其他人的想法，因为现在 3 或 4 都不是完美的，我想知道最佳实践是什么，因为表单处理是人们进入骨干网的主要原因之一.js 放在首位。

# javascript - 将类添加到元素后如何触发以类为目标的方法？

> ID：11926119
> 
> 赞同：0
> 
> 时间：2012-08-12T21:44:52.870
> 
> 标签：javascript, jquery

在下面的标记中，`#enable`按钮将向`#show`div 添加一个类。这个类附加了一个淡入/淡出`#hidden`跨度的方法。

但是，即使将类添加到`#show`div，也不会触发附加到类的方法。

**HTML**

```
<input type='button' id='enable' value='Enable' />

<div id='show'>
Testing.. <span id='hidden'>Testing, 1, 2, 3.</span>
</div>​ 
```

**JS**

```
$(function() {

    // Adds .testing class after the button is clicked. however..
    $('#enable').click(function() { 
        $('#show').addClass('testing')
    });

    // It will not trigger after .testing class has been added to DIV?            
    $('.testing').hover(function() { 
        $('#hidden').fadeIn(); 
    }, function() {
        $('#hidden').fadeOut(); 
    });
});​ 
```

使用小提琴：http: [//jsfiddle.net/jS3nM/](http://jsfiddle.net/jS3nM/)

看来我在概念上遗漏了一些东西。处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:50:40.840

jQuery 不像 CSS 那样工作。当您这样做时`$("selector")`，它会立即返回文档中与该选择器匹配的元素列表。

然后，您将使用 jQuery 方法对这些元素进行操作。没有像“以类为目标的方法”这样的魔法。

您可以找到将事件侦听器添加到`document`：

```
$(document).on({
    mouseenter: function() {
        $('#hidden').fadeIn();
    },
    mouseleave: function() {
        $('#hidden').fadeOut();
    }
}, ".testing"); 
```

`document`总是被找到并且总是存在，并且事件监听器被添加到其中。最后的选择器过滤掉哪些元素符合事件的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T21:47:23.133

因为当你绑定`hover`handler时，文档中没有class of`testing`的元素，你应该委托事件，你可以使用`on`方法，试试下面的“

```
$(document).on('mouseenter', '.testing', function(e) { 
        $('#hidden').fadeIn(); 
});

$(document).on('mouseleave', '.testing', function(e) { 
        $('#hidden').fadeOut(); 
}); 
```

# python - Python sys.argv TypeErrors 打印函数结果？

> ID：11926120
> 
> 赞同：1
> 
> 时间：2012-08-12T21:44:54.447
> 
> 标签：python, command-line, arguments

我一直在尝试学习如何正确使用 sys.argv，同时从命令行调用可执行文件。

在命令行上传递文件名和参数时，我希望将函数结果打印到命令行，但是，我得到了一个 TypeError。

到目前为止，我有：

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys

def dictionary(word):
    br = mechanize.Browser()
    response = br.open('http://www.dictionary.reference.com')
    br.select_form(nr=0)
    br.form['q'] = sys.argv
    br.submit()
    definition = BeautifulSoup(br.response().read())
    trans = definition.findAll('td',{'class':'td3n2'})
    fin = [i.text for i in trans]
    query = {}
    for i in fin:
        query[fin.index(i)] = i
    return query

print dictionary(sys.argv) 
```

当我这样称呼时：

```
./this_file.py 'pass' 
```

我留下了这个错误信息：

```
Traceback (most recent call last):
  File "./hot.py", line 20, in <module>
    print dictionary(sys.argv)    
  File "./hot.py", line 10, in dictionary
    br.form['q'] = sys.argv
  File "/usr/local/lib/python2.7/dist-packages/mechanize/_form.py", line 2782, in __setitem__
    control.value = value
  File "/usr/local/lib/python2.7/dist-packages/mechanize/_form.py", line 1217, in __setattr__
    raise TypeError("must assign a string")
TypeError: must assign a string 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T21:46:28.067

和

`br.form['q'] = sys.argv`

您在此处分配*字符串列表**而不是*字符串。

```
>>> type(sys.argv)
<type 'list'>
>>> type(sys.argv[0])
<type 'str'>
>>> 
```

您想通过索引识别要分配的特定字符串。

考虑到您在帖子中的内容，它很可能是索引 1（并且因为索引 0 是脚本的名称）。所以也许

`br.form['q'] = sys.argv[1]`

会为你做的。当然，它也可以是另一个索引，具体取决于您的特定应用程序/需求。

注意@Dougal 在下面的有用评论中观察到，函数`word`中的函数参数没有被使用。您正在调用`dictionary`发送它的函数`sys.argv`，然后应该`word`在函数内部进行引用。该类型不会仅更改您在函数内引用命令行参数的名称。的想法`word`很好，因为它避免了使用全局变量。如果您指的是使用全局变量（不是很鼓励），那么`word`建议删除，因为将它放在那里会令人困惑）。

所以你的陈述真的应该读

`br.form['q'] = word[1]`

# javascript - 如何在服务器端调整图像大小

> ID：11926124
> 
> 赞同：0
> 
> 时间：2012-08-12T21:46:01.440
> 
> 标签：javascript, html, css, image

我正在编写将显示数百张图片的网页。问题是图像大小（+-5MB）。此图像是 div 的背景图像。我使用 JS 来更改此背景图像。（有时每秒 1 个。）有什么方法可以缩小这些图像或如何加快加载速度？（我无法通过 Photoshop 或其他类似软件修改此图像。我必须使用原始图像。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T22:07:44.717

如果你想缩小图像，你的意思是你必须使用原件吗？在我看来，文件大小不适合 Web 应用程序，您必须减小这些文件的大小。如果您可以使用 PHP 或 ASP.NET 等服务器端技术，则可以在使用 ImageMagick (http://php.net/manual/en/book.imagick.php) 或 ASP.NET 等库显示图像之前对其进行修改Sprite 和图像优化库（请参阅[http://www.hanselman.com/blog/NuGetPackageOfTheWeek1ASPNETSpriteAndImageOptimization.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek1ASPNETSpriteAndImageOptimization.aspx)）但这些将使用资源进行处理，因此您的站点仍然会有性能开销。

我建议您使用工具修改图像，并且不要让服务器或浏览器修改这些图像。如果您无法使用 Photoshop 或 GIMP 之类的工具，您可以使用在线工具来创建原始文件的简化版本，例如 Yahoo 的 smush.it - [http://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)

不是最好的答案，但我希望它有所帮助。

# entity-framework - EF Code First 中的高级查询

> ID：11926133
> 
> 赞同：1
> 
> 时间：2012-08-12T21:47:39.183
> 
> 标签：entity-framework, tsql

我有一个用于收集房地产记录的主表。该表与其他参考数据表有关系，因此总的来说它包含以下 ID：

*   国家 ID
*   类型 ID
*   目的标识
*   货币编号
*   ETC...

还有其他表格，例如国家、类型、用途等...

在创建新的房地产记录时，根据“类型”，定义了一些“扩展属性”。因此，用户必须为那些直接链接到所选“类型”的“扩展属性”输入值。

扩展属性的示例如下：

*   卧室

此属性可能有 1 个或多个值，例如：

*   1
*   2
*   3

我正在存储一个扩展属性表和另一个用于扩展属性值的表，因为一个属性可能具有一个或多个值。

对于给定的类型，可能有一个或多个这样的属性，因此我必须定义一个新表来链接：

*   不动产编号
*   扩展属性 ID
*   扩展属性值 ID

现在，该网站提供了一个搜索引擎，用户可以输入以下字段的搜索条件：

*   国家
*   类型
*   目的
*   一个或多个扩展属性（基于所选类型及其相关属性）

我需要查询数据库并返回完整的数据记录，即当我返回房地产记录时，我需要返回 TypeID + TypeName 和 CountryID + CountryName 等......换句话说，我需要加入所有这些表和然后使用我从搜索条件收到的值进行查询，这样的条件可以是：

*   国家 ID = 1
*   类型 = 2
*   EP (1,5)（给我找一个房地产记录，它有一个 ID 为“1”的扩展属性，并且该属性的值等于扩展属性值 ID 为“5”。
*   ETC ...

我相信，所有其他表都是正常连接和检查某些参数的问题，但是当我必须查询扩展属性时，它变得更加困难。

非常感激。

# ios - iPad Retina 图片不显示？

> ID：11926134
> 
> 赞同：2
> 
> 时间：2012-08-12T21:47:55.703
> 
> 标签：ios, image, ipad, retina-display

在我的应用程序中，我无法显示 iPad Retina 图像。我知道我必须使用`@2x~ipad.png`扩展才能让它们正确显示，我这样做了。我的图像是根据命名的，因此除了每个设备的扩展名之外，它们的名称都相同。但是，在 iPad 3 上查看图像时，我的图像看起来很模糊。我知道图像的尺寸和 PPI 是正确的，但它看起来并不清晰。

我的图像也在我的“复制捆绑资源”中。我试图清理我的项目，然后重新启动 Xcode。没运气。

同样在我的 iPad XIB 的 Interace Builder 中，我将每个图像设置为 -72.png 图像（我猜如果它是 iPad 3，图像会自动切换到 @2x~ipad.png 对吗？）

有什么方法可以通过 NSLogs 确认它是否正在加载正确的图像？还有什么我应该仔细检查以确保加载正确的图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T22:17:57.853

呃，如果你真的这样做：

> [名称]-72.png 和 [名称]@2x~ipad.png

那是不对的。

如果这是一个通用应用程序，那么你有

*   Foo.png（或 Foo~iphone.png）和 Foo@2x.png（或 Foo@2x~iphone.png）[注意：iphone 不是 iPhone]；

*   Foo~ipad.png 和 Foo@2x~ipad.png

这一切都在我的通用应用程序中为我工作。

编辑：您可以阅读 Apple 的“资源编程指南”第 46 页中的命名约定：

> 当底层设备具有高分辨率屏幕时，捆绑包和图像加载例程会自动查找带有@2x 字符串的图像文件。如果将@2x 字符串与其他修饰符结合使用，则@2x 字符串应位于任何设备修饰符之前，但应位于所有其他修饰符之后，例如启动方向或 URL 方案修饰符。例如：
> 
> *   MyImage.png - 图像资源的默认版本。
>     
>     
> *   MyImage@2x.png - 具有 Retina 显示器的设备的高分辨率版本的图像资源。
>     
>     
> *   MyImage~iphone.png - iPhone 和 iPod touch 的图像版本。
>     
>     
> *   MyImage@2x~iphone.png - 适用于具有 Retina 显示屏的 iPhone 和 iPod touch 设备的高分辨率版本的图像。

EDIT2：所以我确实参考了“-72”（和-50）。这些用于 iOS 3.1.3 和更早版本。完整的解释可以在“iOS 应用程序编程指南”、“应用程序图标”部分找到（链接太脆弱而无法使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:13:43.660

我正在做的是将图像名称设置为：

1.  `[name]_ipad.png`, `[name]_ipad@2x.png`. [iPad]
2.  `[name]_ipod.png`, `[name]_ipod@2x.png`. [苹果手机]

而且，我在 上添加了一个类别`UIImage`，该类别基于当前设备`mc_imageNamed:`附加`_ipad`或。`_ipod`当然，我已经根据它们在 XIB 中的名称设置了图像。

根据我的经验，这种方法可以保证有效。如果有人能解决您的问题，那就太好了，但也可以使用此解决方案。

# java - Android 联系人 - 检索到的 Android 联系人，如何将它们放在一个简单的 ListView 中？

> ID：11926135
> 
> 赞同：2
> 
> 时间：2012-08-12T21:48:24.087
> 
> 标签：java, android, listview, cursor

对于我的应用程序的一部分，我需要在选择该选项时显示所有联系人（带有电话号码）的列表。

这是按下按钮时调用的活动：

```
package com.example.prototype01;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;

public class nominateContactsActivity extends Activity {
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nominatecontactslayout);
        Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        String contactName, contactTelNumber = "";
        String contactID;
        c.moveToFirst();
        for (int i = 0; i < c.getCount(); i++) {
            contactName = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            contactID = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));
            if (Integer.parseInt(c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                Cursor pCur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { contactID },null);
                while (pCur.moveToNext()) {
                    contactTelNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                } 
            }
            Log.i("name ", contactName + " ");
            Log.i("number ", contactTelNumber + " ");
            c.moveToNext();

        }
    }
    } 
```

如您所见，此代码返回存储在手机上的所有联系人的姓名和电话号码。目前，这些只是简单地回显到 logcat。我似乎无法弄清楚如何在列表视图中列出这些项目，而只显示名称和编号。我已经按照几个教程无济于事，所以我很不情愿地寻求你的帮助。我很不情愿地说，因为我确信这个问题已经被回答了很多次，我似乎无法将解决方案应用于我的代码！

先感谢您！！

亲切的问候，安特万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:16:59.960

这是我将联系人放在 listView 中的方法

在您的活动中：

```
private ListView mContactsListView;
private ListContactItemAdapter mContactsListAdapter;

this.mContactsListAdapter = new ListContactItemAdapter(this, R.layout.contact_row);

// after doing setContentView, assuming you have defined a listview in your layout file
this.mContactsListView= (ListView) this.findViewById(R.id.contactsListView);
// You may want to create a custom adapter, which I wrote below for showing you example
this.mContactsListView.setAdapter(this.mContactsListAdapter);

for (/* each contact */) {

    Contact contact = new Contact();
    contact.name = contactName;
    contact.number = contactNumber;

    this.mContactsListAdapter.add(contact);
}

// In order to refresh your list and make data appear
this.mContactsListAdapter.notifyDataSetChanged(); 
```

当然，在我的示例中，您需要一个包含联系人数据的模型对象：

```
public class Contact  {

public String name;
public String number;

} 
```

这可能是您使用上面的 Contact 类的自定义适配器：

```
public class ListContactItemAdapter extends ArrayAdapter<Contact> {

private int mLineLayout;
private LayoutInflater mInflater;

public ListContactItemAdapter(Context pContext, int pLineLayout) {
    super(pContext, pLineLayout);

    this.mLineLayout = pLineLayout;
    this.mInflater = (LayoutInflater) pContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

static class ViewHolder {

    TextView contactName;
    TextView contactNumber;
}

@Override
public View getView(int pPosition, View pView, ViewGroup pParent) {

    ViewHolder holder;
    if (pView == null) {

        pView = this.mInflater.inflate(this.mLineLayout, null);

        holder = new ViewHolder();
        holder.contactName = (TextView) pView.findViewById(R.id.contactName);
        holder.contactNumber = (TextView) pView.findViewById(R.id.contactNumber);

        pView.setTag(holder);

    } else {
        holder = (ViewHolder) pView.getTag();
    }

    Contact contact = getItem(pPosition);
    if (contact != null) {

        holder.contactName.setText(contact.name);
        holder.contactNumber.setText(contact.number);
    }

    return pView;
} 
```

}

对于该示例，您需要一个布局来定义列表视图的行。这可能是一个 contact_row.xml 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/contactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="6dp"
    android:text="Contact name"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/contactNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/contactName"
    android:paddingLeft="6dp"
    android:text="number"
    android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

我没有尝试，但这应该可以。无论如何，我希望它能让您了解列表视图的基本工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:02:04.780

这是调整已有内容的一种方法。我在更改所有内容之前添加了评论，以便一路解释：

```
public class nominateContactsActivity extends Activity {
    // Add a list to keep all the "name: number" strings
    private List<String> mNameNumber = new ArrayList<String>();

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nominatecontactslayout);
        Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        String contactName, contactTelNumber = "";
        String contactID;

        // You only need to find these indices once
        int idIndex = c.getColumnIndex(ContactsContract.Contacts._ID);
        int hasNumberIndex = c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER);
        int nameIndex = c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);

        // This is simpler than calling getCount() every iteration
        while(c.moveToNext()) {
            contactName = c.getString(nameIndex);
            contactID = c.getString(idIndex);

            // If this is an integer ask for an integer
            if (c.getInt(hasNumberIndex)) > 0) {
                Cursor pCur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { contactID },null);
                while (pCur.moveToNext()) {
                    contactTelNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    // Store the "name: number" string in our list
                    mNameNumber.add(contactName + ": " + contactTelNumber);
                } 
            }
        }

        // Find the ListView, create the adapter, and bind them
        ListView listView = (ListView) findViewById(R.id.listView);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, mNameNumber);
        listView.setAdapter(adapter);
    }
} 
```

# c++ - Boost::asio -- UnregisterWaitEx' 没有被声明

> ID：11926136
> 
> 赞同：0
> 
> 时间：2012-08-12T21:48:34.553
> 
> 标签：c++, boost, compiler-errors, serial-port

我正在尝试构建一个能够读取和写入串行端口的程序。目前我正在使用一个与 boost::asio 一起使用的包装类。( [http://gitorious.org/serial-port](http://gitorious.org/serial-port) )

我从 win_object_handle_service.ipp 收到一堆错误（来自 boost asio）
我收到的错误消息位于[http://pastebin.com/MtcC61cb](http://pastebin.com/MtcC61cb)

此外，在 SerialPort 库的 AsyncSerial.hpp 文件中，第 103 行出现错误：

```
thread t(boost::bind(&asio::io_service::run, &pimpl->io)) 
```

编译器错误日志中没有任何内容，但 eclipse 报告说：

1.  boost::bind 不明确
2.  'asio::io_service::run' 的无效重载

我不确定以上是否是有效的错误，或者它只是 eclipse 的索引器是愚蠢的

我的问题是：
谁能帮助弄清楚为什么我会收到此错误消息，以及如何让我的程序编译？

我也欢迎对不同的串行库提出建议。但是我需要它是跨平台的。

我正在运行使用 MinGW 4.7.1（32 位）编译的 Windows 7 x64。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:40:10.303

[我在从boost 示例](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/examples.html)中编译 chat_client 时遇到了这个问题

它是：

```
boost::thread t(boost::bind(&boost::asio::io_service::run, &io_service)); 
```

我将其更改为使用显式演员表：

```
boost::thread t(boost::bind((unsigned long int (boost::asio::io_service::*)())&boost::asio::io_service::run, &io_service)); 
```

编译错误消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T06:04:22.003

我发现要解决这些歧义，您需要关闭 Eclipse 添加的编译错误：

> 项目属性 -> C/C++ 常规 -> 代码分析。

打开`Use project settings`

然后禁用相关的 Eclipse 错误，例如。模棱两可。

# node.js - Node.js：高效读取一系列行

> ID：11926137
> 
> 赞同：3
> 
> 时间：2012-08-12T21:48:43.460
> 
> 标签：node.js

我目前正在使用 Node.js，并且想知道如何从大型文本文件中读取一系列行。一个明显的解决方案是这样的：

```
var fs = require('fs');
fs.readFile(file, function(err, data) {
  var lines = data.split('\n');
}); 
```

但是，这将涉及将整个文件加载到内存中，这对于大型文本文件（例如 100MB 以上的文件）是不切实际的。

在 Bash 中，我通常会使用`sed`这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T21:55:52.180

[懒惰](https://github.com/pkrumins/node-lazy/)：_

```
var fs   = require('fs'),
    lazy = require('lazy');

var x = 23;
var y = 42;
var lines = (
   lazy(fs.createReadStream('./large.txt'))
     .lines
     .skip(x - 1)
     .take(y - x + 1)
);
lines.forEach(function(line) {
    console.log(line.toString('utf-8'));
}); 
```

# iphone - 告诉哪个 ViewController 推送了 DetailViewController

> ID：11926142
> 
> 赞同：0
> 
> 时间：2012-08-12T21:50:20.920
> 
> 标签：iphone, objective-c, ios

I have a DetailViewController, which is pushed/entered from RootViewController1 OR RootViewController2 through storyboard segues when Cell is selected.

DetailViewController 有一个带有`IBAction`. 我可以像这样编写动作：

如果父 ViewController 是 RootViewController2，则返回。否则，执行操作。像这样的东西：

```
-(IBAction)actionButtonPressed:(id)sender
{
    if (parentViewController == RootViewController2) {
        return;
    }

    //Else this is done:
    textLabel.text = @"Test";
} 
```

但我不知道如何使它工作，这样的一个例子会很棒。如果您需要更多信息，请告诉我！

编辑：

代码现在看起来像这样：

```
#import "RootViewController2.h"

...

-(IBAction)actionButtonPressed:(id)sender
{
    if([self.parentViewController isKindOfClass:[RootViewController2 class]]) {
        return;
    }

    //Else this is done:
    textLabel.text = @"Test";
} 
```

但是仍然从两个视图执行操作。进一步的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:57:11.557

视图控制器被推入`UINavigationController`一个堆栈（线性序列）的形式。您可以将此堆栈作为`UINavigationController's` `viewControllers`数组获取。（您可以将其`UINavigationController`本身称为推送的视图控制器`navigationController`。）由于此详细控制器位于堆栈的顶部（堆栈的末尾），因此您想了解的是前一个 - 下一个 -数组的最后一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:35:17.730

正如@Matt 提到的，视图控制器存储在一个数组中。您可以像这样访问导航控制器数组：

```
[self.navigationController.viewControllers lastobject ]
[self.navigationController.viewControllers objectAtIndex:2];

You can also get a reference to the parent view controller like this:
self.parentViewController
self.presentingViewController 
```

无论您如何获得对父级的引用，您仍然需要有一种方法来比较该引用。如果 ([object isKindOfClass:MyClass class])，您可以像这样使用内省。但是以某种方式（使用视图控制器数组），您需要对每个父对象的对象引用。这是一个棘手的方法。

另一种可能更简单的方法是在视图控制器中设置一个属性值，然后再在 -(void)prepareForSegue .... 块中使用它。像这样的东西：

```
 MyClass *myClass = segue.destinationViewController;
 myClass.myLogicProperty = @"mommy"; 
```

在另一个视图控制器的另一个segue中

```
MyClass *myClass = segue.destinationViewController;
 myClass.myLogicProperty = @"daddy"; 
```

现在，当您按下按钮时，您可以只针对这些值，然后做正确的事情。

```
if ([self.myLogicProperty isEqualTo:@"daddy"]) {
   //take action
}
else if ([self.myLogicProperty isEqualTo:@"mommy"]) {
   //take action
}
else {
//do something if no match
} 
```

不知道您的具体需求，我会推荐后者，并建议不要尝试使用 viewcontrollers 数组。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:36:29.377

```
#import "RootViewController2.h"

...

-(IBAction)actionButtonPressed:(id)sender
{
#define CurrentParentViewController [[self.navigationController viewControllers] objectAtIndex:[[self.navigationController viewControllers] count] - 2]
if([CurrentParentViewController isKindOfClass:[RootViewController2 class]]) {
    return;
}

//Else this is done:
textLabel.text = @"Test";
} 
```

# prolog - 使用 read() 处理 prolog 中的输入

> ID：11926144
> 
> 赞同：2
> 
> 时间：2012-08-12T21:50:38.870
> 
> 标签：prolog, dcg

我正在使用 read() 来接受用户输入。我计划让我的程序接受以下形式的输入

```
a,b,c,d,e 
```

然后我会将其转换为元素列表。但是在prolog中做一个测试我得到了这个

```
26 ?- read(X).
|: abc,def,ghi,jkl.
X = (abc, def, ghi, jkl). 
```

我不确定，但这会返回一个结构吗？我该怎么做才能将其转换为列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T23:34:25.570

(abc, def, ghi, jkl) 是具有函子 ',' 和 arity 2 的术语。您可以使用诸如 (=..)/2、functor/3、arg/3 等术语检查谓词来分解它，或者尝试 write_canonical/1：

```
?- T = (abc, def, ghi, jkl), write_canonical(T).
','(abc,','(def,','(ghi,jkl)))
T = (abc, def, ghi, jkl). 
```

要将此类元组转换为列表，您可以使用 DCG：

```
tuple_list((A,B)) --> !, tuple_list(A), tuple_list(B).
tuple_list(A)     --> [A]. 
```

例子：

```
?- T = (abc, def, ghi, jkl), phrase(tuple_list(T), Ls).
T = (abc, def, ghi, jkl),
Ls = [abc, def, ghi, jkl]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:29:25.657

X = (abc, def, ghi, jkl)。

那是一组符号；prolog 无法识别非类型（int、long、double、...）。

列表由头部（第一个元素）和尾部（其余元素）表示。尝试运行以下示例：

```
 ?- [1,2,3,4,5,6]=[Head|Tail].
   ?- [1,2,3,4,5,6]=[First,Second|Tail]. 
```

现在你需要熟悉递归（它是序言的核心）。插入过程可能如下所示：

```
 insert(X, List, [X|List]). 
```

但是如果列表是空的呢？我们的程序认为列表不是，所以我们需要另一个程序来满足前面的要求：

```
 insert(X, [], [X|]). 
```

我们可以做更多：例如检查一个项目是否存在于列表中：

```
 present(Item,[Item|_]).
   present(Item,[_|Tail]) :-
     present(Item,Tail). 
```

注意我们最后一个过程中的递归：present(Item, Tail) - 这递归地检查列表的头部，变量 Item 可以从键盘读取：

```
 check_if_present :- read(X), present(X, List). 
```

其中 List 是在较早的时候创建的。

我们也可以很容易地连接列表：

```
 concatenating([],List,List).
     concatenating([Head|Tail],List,[Head|ResultedTail]) :-
      concatenating(Tail,List,ResultedTail). 
```

# css - 只居中 DIV 而不是侧边栏

> ID：11926148
> 
> 赞同：2
> 
> 时间：2012-08-12T21:51:21.950
> 
> 标签：css, html

我有一个标题、一个侧边栏和一个内容 div。

标头停靠在顶部并固定在那里。侧边栏固定在左侧。现在我在右侧有 3/4 的屏幕没有空间。我有一个我想放在那里的内容 div。它需要以 3/4 空间为中心。

这是我的侧边栏和内容 div 代码。

CSS：

```
html,body {
    height:100%;
}
#sidebar {
    float: left;
    width: 300px;
    background: #fff;
    background: rgba(225,225,225,0.2);
    height:100%;
}
#sidebarTop {
    height:100%;
    background-color: #eee;
    padding:20px 50px;
    border-bottom:0.15em solid rgb(229,229,229);
    background: rgba(225,225,225,0.25);
    box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
    -o-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0px 1px rgba(255,255,255,0.3), inset 0px 0px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset -10px 0px 0px rgba(0,0,0,0.3);
    -moz-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
}
#content {
    margin: 0 auto;
    display:block;
    width:400px;
    margin-top:100px;
    height:900px;
    background:#FFF;
    -webkit-box-shadow: 0px 0px 30px rgba(255, 255, 255, 1);
    -moz-box-shadow:    0px 0px 30px rgba(255, 255, 255, 1);
    box-shadow:         0px 0px 30px rgba(255, 255, 255, 1);
} 
```

这是我的侧边栏和内容 div 的 HTML 代码。

```
<div id="sidebar">
    <div id="sidebarTop">
        ....
    </div>
</div>
<div id="content">
    TEST
</div> 
```

问题来了。发生的情况是，它不会忽略侧边栏并将内容 div 向下推 100px (margin-top:100px)，而是将侧边栏也降低到相同的水平。

我的目标是在侧边栏和标题填充其余部分之后剩下的 3/4 屏幕空间中垂直和水平居中该 div。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:04:20.030

添加`float:left;`到`#content`.

```
#content {
    margin: 0 auto;
    width:400px;
    margin-top:100px;
    height:900px;
    background:#FFF;
    -webkit-box-shadow: 0px 0px 30px rgba(255, 255, 255, 1);
    -moz-box-shadow:    0px 0px 30px rgba(255, 255, 255, 1);
    box-shadow:         0px 0px 30px rgba(255, 255, 255, 1);
} 
```

应该：

```
#content
{
    margin:100px auto 0;
    width:400px;
    height:900px;
    background:#fff;
    -webkit-box-shadow:0 0 30px #fff;
    -moz-box-shadow:0 0 30px #fff;
    box-shadow:0 0 30px #fff;
    float:left;
} 
```

* * *

## 更新：

**CSS**

```
html,
body
{
    height:100%;
}
#sidebar
{
    position:fixed;
    top:0;
    left:0;
    width:300px;
    height:100%;
    background-color:#758;
}
#content
{
    margin-left:-50px;
    position:absolute;
    top:100px;
    left:50%;
    width:400px;
    height:900px;
    background:#758;
}​ 
```

**HTML**

```
<div id="sidebar">
    "fixed" sidebar
</div>
<div id="content">
    "horizontally centered" content
</div>​ 
```

**[演示](http://jsfiddle.net/X5N9m/)**

* * *

## 更新 2：

**CSS**

```
#wrapper
{
    position:absolute;
    top:100px;
    left:300px;
    right:0;
    height:900px;
}
#content
{
    margin:0 auto;
    width:400px;
    height:100%;
    background:#758;
} 
```

**HTML**

```
<div id="sidebar">
    "fixed" sidebar
</div>
<div id="wrapper">
    <div id="content">
        "horizontally centered" content
    </div>
</div>​​​​​​​​​​ 
```

**[演示 2](http://jsfiddle.net/X5N9m/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:18:09.033

你可以这样尝试：
CSS:

```
html,body {
    height:100%;
}
#sidebar {
    border: 2px solid yellow; /*Added to show the box-model*/

    float: left;
    width: 25%;
    background: #fff;
    background: rgba(225,225,225,0.2);
    height:100%;
}
#sidebarTop {
    border: 2px solid black; /*Added to show the box-model*/

    height:100%;
    background-color: #eee;
    padding:20px 50px;
    border-bottom:0.15em solid rgb(229,229,229);
    background: rgba(225,225,225,0.25);
    box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
    -o-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0px 1px rgba(255,255,255,0.3), inset 0px 0px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset -10px 0px 0px rgba(0,0,0,0.3);
    -moz-box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px rgba(255,255,255,0.3), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.25), inset 0 -15px 30px rgba(0,0,0,0.3);
}
#foo {
    border: 2px solid pink; /*Added to show the box-model*/

    margin-top: 100px;
    margin-left: 27%;
    width: 73%;
}
#content {
    border: 2px solid green; /*Added to show the box-model*/

    margin: 0 auto;
    display:block;
    width:400px;
    /*margin-top:100px;*/ /*this can be deleted*/
    height: 100%;
    background:#FFF;
    -webkit-box-shadow: 0px 0px 30px rgba(255, 255, 255, 1);
    -moz-box-shadow:    0px 0px 30px rgba(255, 255, 255, 1);
    box-shadow:         0px 0px 30px rgba(255, 255, 255, 1);
} 
```

和 HTML：

```
<div id="sidebar">
    <div id="sidebarTop">
        ....
    </div>
</div>

<div id="foo">
    <div id="content">
        TEST
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:21:32.877

```
#sidebarTop {
    margin: 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T03:10:34.843

您可以像这样简单地使用“中心”标签：

```
<div id="content">
<center>
    TEST
</center>
</div> 
```

# jquery - jquery - 如何在客户端验证发生无效数据后防止表单重定向

> ID：11926149
> 
> 赞同：0
> 
> 时间：2012-08-12T21:51:57.920
> 
> 标签：jquery, submit, postback, return, preventdefault

我在表单上有一个转发器，并使用 jquery 来验证转发器中的数据。我无法阻止页面使用 jquery 在客户端重定向。

这是我的jQuery：

```
function ValidateBid() 
{
    $(document).ready(function () {

        $(".btnSubmitBid").click(function (evt) {

            var msg = "";
            var bid = $(this).closest('td').find("input"); //this was the fun part

            if (isNaN(bid.val())) {
                msg = "Bid amount allowed in complete dollars only";
            }
            if (bid.val().indexOf('.') >= 0) {
                msg = "Bid amount may only contain numbers";
            }
            if (bid.val() > 999999) {
                msg = "If you want to place a bid for $" + bid.val() + " please contact customer service";
            }

            if (msg.length > 0) {

                $('#dialogText').text(msg);
                $('#dialog').dialog({
                    closeOnEscape: true, modal: true, width: 450, height: 200, title: 'Please correct the errors below:', close: function (event, ui) { $(this).dialog("destroy"); }
                });
                evt.preventDefault();
                return false;
            }
            else {
                return true;
            }

        });
    });

} //ends doc rdy 
```

我试过使用 return false 和 evt.preventDefault(); 没有运气。

如果用户尚未登录，它会在 repeater_ItemCommand 事件后面的代码中重定向。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:56:33.750

在函数内部调用 document.ready 并不是一个好主意。您正在绑定到提交按钮的单击事件，我要做的是删除函数包装器并绑定到表单本身的提交事件，这样当验证发现错误时您只需返回 false，否则它将继续提交后，如果您觉得需要，返回 true 绝不会造成任何伤害：

```
$(document).ready(function () {

        $("form").submit(function (evt) {
//obv you would need to put the form id or class if you have more than one form on the page

            var msg = "";
            var bid = $(this).closest('td').find("input"); //this was the fun part

            if (isNaN(bid.val())) {
                msg = "Bid amount allowed in complete dollars only";
            }
            if (bid.val().indexOf('.') >= 0) {
                msg = "Bid amount may only contain numbers";
            }
            if (bid.val() > 999999) {
                msg = "If you want to place a bid for $" + bid.val() + " please contact customer service";
            }

            if (msg.length > 0) {

                $('#dialogText').text(msg);
                $('#dialog').dialog({
                    closeOnEscape: true, modal: true, width: 450, height: 200, title: 'Please correct the errors below:', close: function (event, ui) { $(this).dialog("destroy"); }
                });

                return false;
            }
            else {
                return true;
            }

        });
    }); 
```

# javascript - socket.io 服务器，处理函数

> ID：11926154
> 
> 赞同：1
> 
> 时间：2012-08-12T21:52:31.570
> 
> 标签：javascript, html, node.js, socket.io

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8080);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {

    socket.on('sendchat', function (data) {

        io.sockets.emit('updatechat', data);

    });
}); 
```

这是我的 websocket 服务器（node.js + socket.io）。我了解除处理程序函数之外的所有内容。有人可以解释一下它的作用吗？index.html 是做什么的，它在哪里？在我的客户端我使用一个剃刀视图命名完全不同的东西，它无论如何都可以工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:54:06.390

当有新请求进入时调用您的`handler()`函数。它允许您从 Socket.IO 使用的同一 HTTP 服务器提供其他资源。

`index.html`只是一个示例文件，您可以使用它来测试您的页面。

# java - 协议缓冲区：使用 byte[] 从 Java 到 Objective-C

> ID：11926156
> 
> 赞同：0
> 
> 时间：2012-08-12T21:52:51.510
> 
> 标签：java, objective-c, encoding, protocol-buffers

我目前正在使用谷歌的协议缓冲区。它可以在 Java 和 C# 之间轻松运行，但是我在尝试使用 Obj-c 实现相同用途时遇到了问题。

Java WS 返回一个字节[]。使用协议缓冲区 API 的代码很简单：

```
productGroup.toByteArray(); 
```

我可以使用 Skeet 的 C# 端口重新创建对象，使用：

```
byte[] result = searchWebService.SearchProductsProtocolBuffer(search);
ProductProtoGroup products = ProductProtoGroup.ParseFrom(result); 
```

但是，在 obj-c 方面，我正在努力处理返回值。

我从同一个 Web 服务 RPC 收到的 NSString 是这样的：

```
CmYKEzgwMDAwMUFELTEzMjUyNzk5MTQySUZPT0QgJiBCRV... 
```

我不太确定该怎么做，因为我不知道它是什么，保存它是从字节数组生成的。我尝试使用将其直接解析为 NSData

```
NSData* data = [returnValue dataUsingEncoding:NSUTF8StringEncoding]; 
```

但是`[ProductProtoGroup parseFromData:data];`，我得到一个`InvalidProtocolBuffer`

我已经在 J​​ava 端检查了原始的字节字符串/十六进制表示形式`byte[]`，它与我从 ws 收到的字符串不匹配。

十六进制是 0-F。也许每个字节都被转换为一个字符？不，这不匹配。

任何帮助，将不胜感激。

丹麦人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:10:22.560

有了更新鲜的头脑和一些有用的评论，我终于明白了。

我想知道 Web 服务如何在 Java 中自动发送一个字节 []，然后在 C# 中重建它，以及稍后如何存储此消息。

原来是字符串，

`CmYKEzgwMDAwMUFELTEzMjUyNzk5MTQySUZPT0QgJiBCRV...`

确实是用肥皂信封寄来的东西。因此，在 Java 中创建 byte[] 和传输之间，发生了一些事情。查看 C# 中的消息处理程序，

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute("", 
    RequestNamespace="x", ResponseNamespace="x", 
    Use=System.Web.Services.Description.SoapBindingUse.Literal, 
   ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
[return: System.Xml.Serialization.XmlElementAttribute("return",
   Form=System.Xml.Schema.XmlSchemaForm.Unqualified, 
   DataType="base64Binary", IsNullable=true)]
public byte[] searchProductProtocolBuffer([System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)] string arg0)
{
   object[] results = this.Invoke("searchProductProtocolBuffer", new object[] {
                    arg0});
   return ((byte[])(results[0]));
} 
```

所以base64Binary！，我承认这是第一次见面。四处闲逛，Skeet 说这是最安全的方法：

[如何安全地将字节数组转换为字符串并返回？](https://stackoverflow.com/questions/1134671/c-how-can-i-safely-convert-a-byte-array-into-a-string-and-back)

因此，知道编码后，解决方案就变得直截了当。使用这个问题的答案中提出的算法：[How do I do base64 encoding on iphone-sdk?](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk) ，我的最终代码变为：

```
NSString* returnValue = [WebServiceUtil processStringReturnValue:value];
NSData* data = [Encoding base64DataFromString:returnValue];
ProductProtoGroup* products = [ProductProtoGroup parseFromData:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:23:38.360

I know very little about Objective C, but an NSString is no byte array. Have you tried converting the NSString to char* using [-[NSString UTF8String]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-CJBHCCED)?

# backbone.js - 处理 require.js

> ID：11926157
> 
> 赞同：2
> 
> 时间：2012-08-12T21:53:26.797
> 
> 标签：backbone.js, requirejs

我想我并不完全理解 require.js 的工作方式。这是我创建的一个简单模块：

```
requirejs.config({
  paths: {
    'underscore'    : 'libs/underscore-min',
    'backbone'      : 'libs/backbone-min'
  }
});

define([
  "underscore",
  "backbone"
  ], function(_, Backbone) {
    console.log(_);
    console.log(Backbone);
    var MyCollection = Backbone.Collection.extend({
        initialize: function() {
            this.on("all", function(event) {
                console.log(event);
            });
        }

    });

    return MyCollection;
}); 
```

我从我的 html 加载它：

```
<script data-main="js/mycollection.js" src="js/libs/require.min.js"></script> 
```

问题是它间歇性地工作。有时 Backbone 对象在我需要时存在于函数中，有时它没有（并给我[http://requirejs.org/docs/errors.html#notloaded](http://requirejs.org/docs/errors.html#notloaded)错误）。如果我只是在浏览器中点击重新加载，我会得到 50/50 的变化。

我必须在这里遗漏一些非常基本的东西，报告的错误对我没有任何意义，我认为 require.js 机制的整个想法是只有在加载所有依赖项时才会调用我的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:14:19.280

由于 Underscore 和 Backbone 没有被定义为 AMD 模块，因此 require.js 并不知道 Underscore 是 Backbone 的依赖项。所以我猜你 50% 的情况是当 Backbone 尝试使用下划线时没有加载它。

您可以使用 require.js shim 配置[http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)告诉 require.js 依赖结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T23:09:04.973

我的猜测是您没有使用 AMD 版本的下划线和 Backbone。如果是这种情况并且这两个包没有被包装为 AMD 模块 - 那么用于模块的定义函数将无法正常工作。

对于非模块 js 脚本，更合适的形式是使用该`require()`函数。

或者 - 您可以在此处找到 AMD 版本的下划线和 Backbone。在某些时候，Underscore 和 Backbone 对 AMD 的支持被取消了。

[AMD 下划线](https://github.com/amdjs/underscore)

[AMD 主干](https://github.com/amdjs/backbone)

# javascript - 动态创建子数组

> ID：11926169
> 
> 赞同：-1
> 
> 时间：2012-08-12T21:55:23.543
> 
> 标签：javascript

我在下面提到了数组。这些数组值来自数据库：

如果循环找到 APP 字符串，则应将剩余字段（包括 APP 值）添加到新数组中。怎么做..帮助PLZ

```
var applications=new Array("App", "sub", "child", "App1", "sub1", "sub0", "child1", "App2", "sub2", "child2"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:01:35.343

你的意思是这样吗？

```
var applicationArrays = [];
for (var i = 0; i < applications.length; i++) {
    if (applications[i].search("App") != -1)
        applicationArrays[applicationArrays.length] = [applications[i]];
    else
        applicationArrays[applicationArrays.length - 1].push(applications[i]);
}; 
```

您的数组将产生以下内容：

![chrome控制台日志](../Images/b2107c327de67262f71453fb3cbc1745.png)

# javascript - 我有 js 错误，说 Object [object Object] 没有方法“倒计时”

> ID：11926172
> 
> 赞同：1
> 
> 时间：2012-08-12T21:55:37.470
> 
> 标签：javascript

我有一个网站在除 IE 之外的所有浏览器中都能正常工作。当我查看控制台时，它说：

```
Object [object Object] has no method 'countdown' 
```

网站名称为：[http ://www.rivalhost.com/](http://www.rivalhost.com/)

问题出在菜单上。请帮我摆脱这些家伙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:58:14.097

`countdown`根据控制台，DOM 中没有 id 的元素。也许你拼错了？

```
document.getElementById("countdown");
null 
```

# apache-flex - 如何忽略不更改文本框内容的flex中的Ctrl-C事件？

> ID：11926177
> 
> 赞同：1
> 
> 时间：2012-08-12T21:57:03.660
> 
> 标签：apache-flex, textbox, copy-paste, textinput, flex-spark

目前，似乎每次在文本框中按下 Ctrl-C 以复制其内容时，文本框都会收到一个 Event.CHANGE，因此我们的应用程序决定在文本框中进行了更改并启用“应用更改”按钮，尽管没有进行任何更改，用户想要的只是复制文本框的内容。我们使用的文本框组件是 spark.components.TextInput

在视图初始化时我注册：

```
_view.hostNameTextBox.addEventListener(
    Event.CHANGE, onConnectionDat‌aChanged, false, 0, true
); 
```

事件监听函数是：

```
private function onConnectionDataChanged(e:Event):void {
    _view.applyButton.enabled = true;
} 
```

有任何想法吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:22:53.343

这是@Sunil D. 答案的一个细微变化：使用`operation`事件的属性来确定当前操作是复制操作还是另一个操作：

```
private function inputChangeHandler(event:TextOperationEvent):void {
    var operation:IOperation = event.operation;
    if (operation is CopyOperation) trace("Ctrl+C was pressed");
    if (operation is InsertTextOperation) trace("New text was inserted");
    if (operation is DeleteTextOperation) trace("Some text was deleted");
} 
```

这种方法还可以解决多个 TextInputs 的问题：只需要一个事件处理程序而不是多个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:26:49.180

Spark在您每次击键时`TextInput`调度一个[TextOperationEvent.CHANGE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/TextOperationEvent.html)事件。

但是，与 Flextras 所指的[KeyboardEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html)不同，此事件不会告诉您按下了哪些键。相反，该事件有一个[操作](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/TextOperationEvent.html#operation)属性，它是描述更改的[FlowOperation 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/operations/FlowOperation.html)

但不要为此烦恼。由于 change 事件将在每次击键时发送，因此将 的值`TextInput`与上一个 change 事件的值进行比较。

```
private var lastTextInputValue:String = "";

private function inputChangeHandler(event:Event):void
{
    if (textInput.text == lastTextInputValue)
    {

    }
    else
    {

    }
    lastTextInputValue = textInput.text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:44:11.697

你可以尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import spark.events.TextOperationEvent;

            protected function inPutText_changeHandler(event:TextOperationEvent):void
            {
                // TODO Auto-generated method stub
                if(ctrlCPressed)
                {
                    clickBtn.enabled = false;
                    ctrlCPressed = false;
                }
                else
                {
                    clickBtn.enabled = true;
                }
            }

            private var ctrlCPressed:Boolean = false;
            protected function inPutText_keyDownHandler(event:KeyboardEvent):void
            {
                // TODO Auto-generated method stub
                if(event.ctrlKey == true && event.keyCode == Keyboard.C)
                    ctrlCPressed = true;
            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>
    <s:TextInput id="inPutText" change="inPutText_changeHandler(event)" text="Mahesh Parate"
                 keyDown="inPutText_keyDownHandler(event)"/>
    <s:Button id="clickBtn" label="Click" enabled="false"/>
</s:Application> 
```

TextInput 组件包含两个侦听器，一个用于 TextInput.CHANGE 事件，一个用于 KeyboardEvent.KEY_DOWN。keyDown 监听器将检测是否 CTRL+C 并设置一个标志。处理 CHANGE 事件时，该侦听器将检查 CTRL+C 的标志是否为真，并采取适当的措施。如果按下 CTRL+C，代码将启用该按钮。如果没有，该按钮将被禁用并且标志重置为假。

# sqlite - Drop Table 不会导致删除 sqlite 文件中的数据

> ID：11926178
> 
> 赞同：1
> 
> 时间：2012-08-12T21:57:06.827
> 
> 标签：sqlite

我有一个`Sqlite`数据库文件，我通过删除一个包含数千条记录的巨大数据库表来修改它，但文件大小在删除表之前保持不变。似乎它断开了指向 data 的指针。任何想法如何删除表并在底层 sqlite 文件中对其进行深度删除.??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T22:10:26.570

要回收空间，请使用该`vacuum`语句。

从 sqlite 提示

```
sqlite> VACUUM; 
```

从 shell 提示符。

```
$ sqlite3 filename 'VACUUM;' 
```

# tomcat - server.xml 中的环境/系统变量

> ID：11926181
> 
> 赞同：19
> 
> 时间：2012-08-12T21:57:21.853
> 
> 标签：tomcat, environment-variables, system-variable

如何在 tomcat server.xml、context.xml 等配置文件中使用环境/系统变量？

我尝试使用`${ENV_VAR_NAME}`（用于环境和系统变量），`${env.ENV_VAR_NAME}`（用于环境变量）。似乎没有任何效果。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-05-30T15:10:10.990

它是如何在我的盒子里实现的。

用于启动的 Bash 脚本：

```
#!/bin/sh

SMEMORY=1G
XMEMORY=1G

if [ $ENV == DEV ]; then
  port_shutdown="8005"
  port_http="8080"
  port_https="8443"
elif
  [ $ENV == SIT ]; then
  port_shutdown="8006"
  port_http="8081"
  port_https="8444"
elif
  [ $ENV == UAT ]; then
  port_shutdown="8007"
  port_http="8082"
  port_https="8445"
else
  echo "Unknown ENV"
  exit 1
fi

export CATALINA_OPTS=" ${SYSTEM_PROPS} -d64 -server -Xms$SMEMORY -Xmx$XMEMORY \
 -XX:+UseCodeCacheFlushing -XX:ReservedCodeCacheSize=64M \
 -XX:+HeapDumpOnOutOfMemoryError -XX:MaxPermSize=1024M \
 -Dport.http=${port_http} -Dport.https=${port_https} -Dport.shutdown=${port_shutdown}"

exec $CATALINA_HOME/bin/startup.sh 
```

在`server.xml`：

```
<Connector
  port="${port.http}"
  protocol="HTTP/1.1"
  connectionTimeout="20000"
  redirectPort="${port.https}"
/> 
```

看一下流程：

```
$ ps ux | grep tomcat
... -Xms1G -Xmx1G ... -Denv=KIEV_DEV... -Dport.http=8084 -Dport.https=8446 -Dport.shutdown=8008... 
```

检查端口：

```
$ netstat -anp | grep java
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
tcp        0      0 :::8084                     :::*                        LISTEN      23343/java
tcp        0      0 :::8446                     :::*                        LISTEN      23343/java 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-10-01T13:05:46.313

`org.apache.tomcat.util.digester.PROPERTY_SOURCE`通过将系统属性设置为 value ，可以在 server.xml 等中引用环境变量`org.apache.tomcat.util.digester.Digester$EnvironmentPropertySource`。

该系统属性从 7.0 开始可用，但`EnvironmentPropertySource`直到 8.5 才在文档中提及。

[https://tomcat.apache.org/tomcat-9.0-doc/config/systemprops.html](https://tomcat.apache.org/tomcat-9.0-doc/config/systemprops.html)

更新（2020 年 4 月）：

最新的 tomcat 版本（9.0.34、8.5.54）现在支持大多数配置文件中的属性替换： [https://tomcat.apache.org/tomcat-9.0-doc/changelog.html#Tomcat_9.0.34_(markt)](https://tomcat.apache.org/tomcat-9.0-doc/changelog.html#Tomcat_9.0.34_(markt))

# bluetooth - 连接失败 [10048]

> ID：11926183
> 
> 赞同：0
> 
> 时间：2012-08-12T21:57:32.693
> 
> 标签：bluetooth, winsock, bluecove

我在一个按钮上有这个代码，当我按下它时，我得到了错误：

```
 Error: Exception connecting to NXT.
  Caused by lejos.pc.comm.NXTCommException: Open of NXT failed.
at lejos.pc.comm.NXTCommBluecove.open(NXTCommBluecove.java:136)
   Caused by javax.bluetooth.BluetoothConnectionException: Failed to connect; [10048]
 Only one usage of each socket address (protocol/network address/port) is normally permitted.
at com.intel.bluetooth.BluetoothStackMicrosoft.connect(Native Method)
Failed to connect to any NXT 
```

我发帖是因为它昨天工作正常，但今天似乎没有工作。

```
btnConnectBot.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            if (Cnt1){
                try {
                    conn.close();
                    Cnt1=!Cnt1;
                    txtConnState.setText("Off");
                    txtConnState.setForeground(Color.RED);
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
            else{   
                conn.addLogListener(new NXTCommLogListener() {
                public void logEvent(String message) {
                System.out.println(message);
                }

                public void logEvent(Throwable throwable) {
                System.err.println(throwable.getMessage());
                }
                });
                conn.setDebug(true);
                if (!conn.connectTo(txtBotName.getText(), NXTComm.LCP)) {
                System.err.println("Fallo de conexión");
                txtConnState.setText("Off");
                txtConnState.setForeground(Color.RED);
                System.exit(1);
                }
                Cnt1=!Cnt1;     
                txtConnState.setText("On");
                txtConnState.setForeground(Color.GREEN);

                if (chckbxLock_2.isSelected()){
                    btnConnectBot_2.doClick();
                }
                if (chckbxLock_1.isSelected()){
                    btnConnectBot_1.doClick();
                }
            }
        }
    }); 
```

根据我的研究，这是因为正在使用的蓝牙端口被多个实例访问。但我看不出这段代码是如何发生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:33:38.187

您是否为远程设备配置了蓝牙虚拟 COM 端口？也许它是由某些程序打开的......

或者，错误是否在您第一次运行程序时发生？您的程序是否有任何旧副本正在运行 - 检查 taskmgr.exe

# php - 如何以html形式使用php？

> ID：11926184
> 
> 赞同：-1
> 
> 时间：2012-08-12T21:57:45.643
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:03:37.370

You could try to `include` mailer.php after the `$msgCaptcha = "valid code";` line.

Any code inside mailer.php would be executed in that block of code, and any `$_POST` variables required by mailer.php would be available.

The bottom line is, when you call mailer.php, you must have captcha validation in front of that file, otherwise any bot/spammer can bypass your captcha protection just by submitting the form directly to mailer.php

Keep in mind, bots generally ignore javascript, so the validation has to be done server side.

You may want to set a variable prior to including mailer.php that it will check so even if someone did try to directly submit to mailer.php, it won't process the form unless the file was included.

If this doesn't help, post the code for mailer.php so we know what the contents of that file are.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T21:59:33.933

Use `header()`

```
if ($secCode == $_SESSION['securityCode']) {
     $msgCaptcha = "valid code";
     header("Location: http://www.website.com/ ... /mailer.php");
  } 
```

# java - 是否在 EDT 上调用

> ID：11926191
> 
> 赞同：3
> 
> 时间：2012-08-12T21:58:45.090
> 
> 标签：java, swing

我有一个扩展 JFrame 的类名 Foo。Foo 类有几个组件和一个对象 x 作为私有字段，**这些组件从不使用对象 x，反之亦然（意味着组件完全独立于 x）**。当然 Foo 类的实例化放置在 EDT 中，但情况是**我要从非 EDT 线程中更改对象 x 的值，**例如 (Foo.x.getValue() == .....)。它应该放在 EDT 内吗？如果它看起来像这样：

```
SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            foo.x.setValue(newValue);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:25:11.577

只有直接影响 GUI 的事情才需要在 EDT 上执行。即使变量是 GUI 对象的成员，也不一定需要从 EDT 以独占方式访问它。由于这是您自己添加的成员，并且您确定它不会与 GUI 交互，因此您可以在任何您喜欢的线程中随意更改它。

即使您的某个组件会读取`x`以决定其显示方式，您也可以`x`在您喜欢的任何线程中进行修改，只要 GUI 更新本身是在 EDT 上完成的 - 只要确保`x`它`volatile`是否被多个线程使用。

不过，听起来确实`x`可能属于其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:37:15.637

如果`x`是 UI 元素（JTextfield、JTable、javax.swing.*），那么您将需要使用 EDT，就像您在示例中所做的那样。

否则，我看不到任何适用于此的限制。

# php - 仅选择 user2_id 打印出 num 行

> ID：11926192
> 
> 赞同：0
> 
> 时间：2012-08-12T21:58:53.427
> 
> 标签：php, mysql, html

我试图只打印出我的 streamdata_feedback 表中包含 user2_ids 的行数，它似乎同时打印出 user2_id 和 user1_id。如何使用以下代码纠正此问题？

```
$user1_id=$_SESSION['id'];
$user2_id=$data['id'];

$likesqltwo = "SELECT *
    FROM streamdata_feedback
    WHERE feedback_rating = 1
        AND feedback_userid = " . $user2_id .
        "AND feedback_streamid = " . $streamid;

$likequerytwo = mysql_query($likesqltwo);
$num3 = mysql_num_rows($likequerytwo);
if ($num3 > 0)
{
    echo "And <a title = 'See who likes " .
        $poster_name['fullusersname'] .
        "s status' href='include/likes.php?streamitem_id=" .
        $streamitem_data['streamitem_id']."' />" . 
        $num3 . " ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:19:30.720

您有 MySQL 数据库的客户端吗？我建议选择[SqlYog Community Edition](http://code.google.com/p/sqlyog/)。然后，您可以对其执行查询，并查看在 PHP 代码之外返回了多少行。一旦你有一个满意的查询，然后将它合并到你的 PHP 项目中。

下一个提示：您可以将 PHP 中的变量直接包含在带双引号的字符串中。PHP 将解析变量，您无需连接。例如：

```
$likesqltwo =
    "SELECT *
    FROM streamdata_feedback
    WHERE feedback_rating = 1
    AND feedback_userid = $user2_id
    AND feedback_streamid = $streamid;"; 
```

但是这段代码仍然有一个潜在的缺陷，那就是[SQL 注入攻击](https://stackoverflow.com/q/60174/161052)。因此，请确保您包含的变量*不是*来自用户，或[点击链接](https://stackoverflow.com/q/60174/161052)了解有关防止此类事情的更多信息。这不是你寻求帮助的原因，但我认为值得一提。

要找出特定的`feedback_userid`等于多少次且仅等于1 的值，您可以尝试以下查询：`$user2_id``feedback_streamid``feedback_rating`

```
SELECT COUNT(id)
FROM streamdata_feedback
WHERE feedback_rating = 1
AND feedback_userid = 123
AND feedback_streamid = 456; 
```

将您的主键替换为`id`，并将正确的用户 ID 和流 ID 分别替换为 123 和 456。如果您得到意外数量的结果，我建议您删除`COUNT(id)`并选择感兴趣的列，这样您就可以检查并了解为什么您获得的行数比您想象的要多。

# php - 在 jquery 中使用 php mysql smarty 的动态图像列表

> ID：11926196
> 
> 赞同：1
> 
> 时间：2012-08-12T21:59:57.760
> 
> 标签：php, jquery, smarty

我想使用 php(adodb) 和 smarty 在 jquery 函数中打印图像地址列表。

我需要这个：

```
 $.lightbox(["/media/photos/tmb/4.jpg", "/media/photos/tmb/3.jpg", "/media/photos/tmb/6.jpg"]); 
```

我试试这个（只是简单的测试）：

```
 {/literal} {if $photos} $.lightbox(["{"\", \""|implode:$photos}"]); {/if}{literal} 
```

结果是：

```
 $.lightbox(["Array", "Array", "Array", "Array", "Array", "Array", "Array", "Array", "Array", "Array", "Array"]); 
```

实际上，我需要用图像地址替换数组。

图片地址（动态循环）：

```
{$relative}/media/photos/tmb/{$photos[i].PID}.jpg 
```

没有 jquery 功能，我用这种方法列出图像：

```
{if $photos}
{section name=i loop=$photos}
{$relative}/media/photos/tmb/{$photos[i].PID}.jpg
{/section}
{/if} 
```

php代码：

```
 $sql            = "SELECT PID, caption FROM photos WHERE AID = " .$aid. " AND status = '1' LIMIT " .$limit;
    $rs             = $conn->execute($sql);
    $photos         = $rs->getrows();
    $smarty->assign('photos', $photos); 
```

如何打印我需要的清单？我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:09:00.710

最简单的做法是将数组分配给您的模板，然后使用`json_encode()`. 我不经常使用 Smarty，但我相信你可以这样做：

```
{$yourImageArray | json_encode} 
```

* * *

**编辑：**现在您终于告诉我们您的数组包含什么：

> 数组 ( [0] => 数组 ( [0] => 13 [PID] => 13 [1] => [标题] => ) [1] => 数组 ( [0] => 14 [PID] => 14 [1] => [标题] => ) [2] => 数组 ( [0] => 15 [PID] => 15 [1] => [标题] => ) [3] => 数组 ( [ 0] => 30 [PID] => 30 [1] => 萨拉姆 [标题] => 萨拉姆) [4] => 数组 ([0] => 17 [PID] => 17 [1] => [标题] => ) [5] => 数组 ( [0] => 31 [PID] => 31 [1] => [标题] => ) [6] => 数组 ( [0] => 32 [PID] => 32 [1] => [标题] => ) [7] => 数组 ( [0] => 33 [PID] => 33 [1] => [标题] => ) [8] => 数组( [0] => 34 [PID] => 34 [1] => [标题] =>))

这是你需要做的。在您的控制器中：

```
$photoFileNames = array();
foreach ($photos as $photo) {
    $photoFileNames[] = $photo['PID'];
}

$smarty->assign('photoFileNamesJSON', json_encode($photoFileNames)); 
```

在您的模板中，您可以通过`$photoFileNamesJSON`. 下次您发布问题时，请从一开始就包含所有信息。如果您的问题具体，提供更具体的答案会容易得多。

# javascript - Javascript中的对象构造函数和返回

> ID：11926200
> 
> 赞同：1
> 
> 时间：2012-08-12T22:00:34.840
> 
> 标签：javascript, object, constructor, return

```
function makeHttpRequest(url, success) {
 $.ajax({
        url: url,
   dataType: "jsonp",
crossDomain: true,
   mimeType: 'application/javascript', 
      async: false,
    success: success
  });
} 

   var actions = {
       get_min_hit_list_bounty: function (user_id) {
          makeHttpRequest("get_min_hit_list_bounty?target_id=" + user_id + "&", function (data) {
             var data = data['body'],
                xml = convert(data);
             this.min_cost = $(xml).find('min_cost').text();

         this.cost = function () {
            return this.min_cost;
         }
      });
   }
};
var myBounty = new actions.get_min_hit_list_bounty(user);
alert(myBounty.cost()); 
```

我不能从这种类型的对象返回任何东西。我已经阅读了很多关于使用原型和使用“this”将其公开的内容，但我没有得到任何地方。有人可以解释为什么这不起作用吗？

> 类型错误：对象 [对象对象] 没有方法“成本”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:32:22.490

这与对象构造函数无关。

最重要的是，您对异步调用的工作方式感到困惑（AJAX 中的第一个 A！）。使用请求的结果调用in 中的匿名函数`makeHttpRequest`- 这可能是在其余代码执行之后的任何时间，或者根本不执行。

您需要使您的代码事件驱动 - 即您发出 AJAX 请求并在*返回响应时*运行代码。

例如：

```
var onSuccess = function(data) {
    var data = data['body'],
    xml = convert(data);
    // ... etc
}

makeHttpRequest(url, onSuccess); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:31:19.207

我相信它应该是这样的：

```
var actions = {
       get_min_hit_list_bounty: function (user_id) {
            this.userId = user_id;
            this.min_cost = 999999;

            this.cost = function () {
                return this.min_cost;
            };

            this.getMinCost = function(callback) {
                var me = this;

                var queryString = [
                "get_min_hit_list_bounty?target_id=",
                this.userId,
                "&"].join("");

                makeHttpRequest(queryString, function (data) {
                    var data = data['body'],
                    xml = convert(data);
                    me.min_cost = $(xml).find('min_cost').text();
                    callback.apply(me);
                });
            }
        }
};

var myBounty = new actions.get_min_hit_list_bounty(user);

myBounty.getMinCost(function() {
    alert(this.cost());
}); 
```

您必须了解异步代码的工作原理。它不仅仅是一组依次执行的指令。从事件和回调的角度来考虑它。谷歌应该提供帮助。

# cakephp - 如何在 hasMany 关联中使用 CakePHP 2 查找？

> ID：11926208
> 
> 赞同：0
> 
> 时间：2012-08-12T22:02:32.600
> 
> 标签：cakephp, search, find, relationship, has-many

我知道这是一个古老的问题，但我似乎无法让它发挥作用。

我有这些关系：
User hasMany Responsible
Responsible belongsTo User

我需要**通过我的 User 模型**执行这样的查找：

```
$users = $this->User->find('all', array('conditions' => array('Responsible.email' => $responsible_email)); 
```

但这不起作用，它会在哪里抛出一个“未知列'Responsible.email'”。

我的真实代码是这样的：

```
 $conditions = array();

    if (!empty($params['filter_by_name'])) {
        $conditions[] .= "LOWER(CONCAT(Profile.name, ' ', Profile.surname)) LIKE '%".$params['filter_by_name']."%'";
    }

    if (!empty($params['filter_by_email'])) {
        $conditions[] .= "LOWER(User.email) = '".$params['filter_by_email']."'";
    }

    if (!empty($params['filter_by_responsible_email'])) {
        $conditions[] .= "LOWER(Responsible.email) = '".$params['filter_by_responsible_email']."'";
    }

    $results = $this->User->find('all', array('conditions' => $conditions)); 
```

我已经搜索并尝试了很多方法，但我无法让它工作，我该怎么做？

编辑：

我能够用可包含的方式做到这一点，但它也返回带有空责任的用户......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:36:31.227

知道了：

```
 $options['joins'] = array(
            array(
                'table' => 'responsibles',
                'alias' => 'Responsible',
                'type' => 'INNER',
                'conditions' => array("User.id = Responsible.user_id")
            )
        );

        $conditions[] .= "Responsible.email = '".$params['filter_by_responsible_email']."'";

        $options['conditions'] = $conditions;

        $results = $this->User->find('all', $options); 
```

效果很好 ：）

# c# - 将 4 个字节（从字符串格式）转换为一个 u32。C 或 C#

> ID：11926209
> 
> 赞同：1
> 
> 时间：2012-08-12T22:02:45.247
> 
> 标签：c#, c

我正在尝试将一些文本从文本字段转换为 a(n) u32 值。例如，我以字符串格式输入（表示 32 位整数）“0x30323436”，字符串格式的输出为“0246”。我正在尝试在 C# 中执行此操作，但我也可以使用 C。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:12:46.357

这应该做你想要的：

```
string ParseWeirdFormat(string input)
{
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < input.Length; i += 2)
    {
        string hex = input.Substring(i, 2);
        int value = Convert.ToInt32(hex, 16);
        char c = (char)value;
        sb.Append(c);
    }
    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:48:18.370

这就是 C 比 C# 更酷的原因：

```
char in[] = "0x30323436";
char out[5] = {0};
sscanf( in, "0x%02x%02x%02x%02x", &out[0], &out[1], &out[2], &out[3] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:17:07.747

C语言（C99或以上）：

```
#include <ctype.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static bool cvt(const char* in, char* out)
{
    if (strlen(in) != 8)
        return false;

    char* end;
    long n = strtol(in, &end, 16);
    if (end == in || *end)
        return false;

    for(int i = 0; i < 4; i++)
    {
        unsigned char c = n >> ((3-i)*8);
        if(!isdigit(c))
            return false;
        out[i] = c;
    }
    return true;
}

int main(int argc, char** argv)
{
    char out[4];

    if ( argc <= 1 || !cvt(argv[1], out) )
    {
        fprintf(stderr, "usage: %s hex-ASCII-encoding-of-four-digit-string\n", argv[0]);
        return 1;
    }

    printf("%.4s\n", out);

    return 0;
} 
```

# c++ - 语音识别 - 线性预测编码

> ID：11926212
> 
> 赞同：0
> 
> 时间：2012-08-12T22:03:09.317
> 
> 标签：c++, algorithm, math, fft, speech

我正在为教育目的工作/研究一个项目构想，并想做一个关于语音识别的项目，没什么大不了的，只是一个让我开始进入该领域的介绍。基本上，项目和算法将输入一个 (.wav) 文件，然后识别说话的人是说“是”还是说“否”。我正在寻找使用线性预测编码。

基本上，在我的脑海中，我正在考虑以下算法：

1.  将 .wav（原始数据）读入向量
2.  将向量分成大小相等的块
3.  针对特定特征处理每个块
4.  找到其模型最有可能与产生的音素字符串匹配的单词。

然后我想使用相关性等相似性度量来找到正确的电话。

因此，基本上，在读入数据文件并拆分为块之后。它应该/将包含如下内容：

```
rawdata = 

[0] => 'Y',
[1] => 'E',
[2] => 'S' 
```

或者将包含频率结果，然后可以与电话进行比较。

我的问题是，这看起来像是解决问题的好算法吗？

我的下一个问题：

当我尝试将 .wav 文件读入内存时，我得到（某种）以下结果..

```
20 30 10 30 40 50 .. 20 20 .. 10 20 .. 60 40 
10 20 30 40 50 60 ... .. . . . . 
```

它们都是整数值，所以，一旦我获取了所有标题信息.. 剩下的数据就是我需要转换成正确的介质然后这就是数据..？我有点困惑。

希望有人可以帮助我，并且，我已经正确地写出了问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:56:02.500

如果你不同意我的意见，不，这不是一个好的算法。

首先，人们说话的速度不同，他们发音的速度也不同。您不能从随机切片输入数据开始。

其次，要获得一些好的结果，您需要大幅降低输入的噪声。您需要专注于人类语音主要使用的频率。然后你需要一些东西来识别元音，然后你尝试猜测这个词，你需要一些真实的数据。你可能不会得到任何可用的东西。

要回答您关于 waw 文件的问题，即标题 + 数据，我不知道标题，但由于 waw 是一种古老的格式，因此获取一些文档并不难。

数据部分是一个整数值数组，表示给定时刻的声音强度。对于 44 kHz waw 文件，强度每秒测量 44 000 次，并存储。它只是原始数字，根本没有压缩（有没有想过为什么 waw 文件这么大？）除了标题，它告诉你采样率和整数类型（通常是 16 位）等等。

您分析这些庞大的数据以获取有关所使用频率的一些信息，但您应该在开始之前真正研究声音和所有事物的数学。哎呀，即使我不确定我是否能写出一些东西，大约有一半的时间可以成功识别 3 个字母的单词。

# php - 数组中未定义的偏移量，但应设置

> ID：11926215
> 
> 赞同：0
> 
> 时间：2012-08-12T22:03:20.070
> 
> 标签：php, arrays

我有一个脚本可以解析游戏的日志文件（用于重播）。它包含游戏中的大部分动作，例如移动，杀戮，死亡等。

我使用这个脚本已经有一段时间了，但现在我正在使用 Codeigniter 在一个统计网站上工作，我收到了很多错误通知，我不知道为什么。

确切的错误是`Message: Undefined offset: 3`

它所指的行是团队案例中包含 $message[3] 的行。

这是脚本：

```
$f = fopen($full_path,"r");
    while ($line = fgets($f))
    {
        $line = str_replace("ööööö", " ",trim($line));  // these characters are found in win replay files
        $line = str_replace("ššššš", " ", $line);  // these characters are found in mac replay files
        $message = explode(" ",$line);
        $lasttimestamp = $message[sizeof($message)-1];
        if ($message[0]=="PLAYERSENT" || $message[0]=="TCPSENT")
        {
            array_shift($message);
            $swapfield = $message[0];
            $message[0] = $message[1];
            $message[1] = $swapfield;

        }
        switch ($message[0])
        {

        case "team":    // team (player id) (team)
            $name = $names[$message[1]];
            if ($message[2]>-1) $players[$name]['Played'] = true;

            $players[$name]['Sessions'][] = array("Team"=>$players[$name]['Team'],"TimeSpent"=>($message[3]-$players[$name]['LastTimeStamp']));
            if ($players[$name]['Team']>-1) $players[$name]['TotalTime'] += $message[3]-$players[$name]['LastTimeStamp'];
            $players[$name]['Team'] = $message[2];
            $players[$name]['LastTimeStamp'] = $message[3];
            break;
        default:
        }
    }
fclose($f); 
```

案例匹配如下所示的行：

```
team 4 -1ööööö57167168 
```

如脚本中所见，`ööööö`字符被替换为空格，因此应该变为`team 4 -1 57167168`，因此 $message[3] 应该向我显示时间戳`57167168`

我不明白为什么它会给我这个通知，有什么想法可以解决这个问题吗？

# matlab - 使用 loadlibrary 函数时的警告

> ID：11926221
> 
> 赞同：0
> 
> 时间：2012-08-12T22:04:20.937
> 
> 标签：matlab, loadlibrary

我正在尝试使用`loadlibrary`功能，但它向我显示了一个警告：

```
loadlibrary('test1.dll', 'testheader.h') 
```

> 警告：解析时产生了警告消息。检查您打算使用的功能是否正确。可以使用以下命令查看警告文本： [notfound,warnings]=loadlibrary(...) 在 374 处的 loadlibrary 中

我使用 Visual c++ 2008 和 matlab R2008a 32 位

关于什么是错的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:24:01.473

No idea what the *specific* problem is since you haven't actually provided the warnings.

However, I *can* tell you that, when a build system says something like `"do A to get more information"`, I generally find that it's a good idea to do `A`.

In other words, change the line as suggested:

```
[notfound, warnings] = loadlibrary('test1.dll', 'testheader.h') 
```

and then examine those two things to see what the actual problem was. See [here](http://www.mathworks.com.au/help/techdoc/ref/loadlibrary.html) for details, paraphrased below:

> The snippet
>      `[NotFound, Warnings] = loadlibrary ('SharedLib.dll', 'HeaderFile.h')`
> returns warning information from the `SharedLib.dll` library file.
> 
> `NotFound` is a cell array of the names of functions found in the header file `HeaderFile.h`, or any header added with the "addheader" option, but not found in the `SharedLib.dll` library.
> 
> `Warnings` contains a single character array of warnings produced while processing the header file `HeaderFile.h`.

# cuda - 如何在不使用 cuda 中的 uncached_global_load_transaction 选项的情况下分析全局内存事务的数量？

> ID：11926222
> 
> 赞同：0
> 
> 时间：2012-08-12T22:04:40.940
> 
> 标签：cuda, gpu

我想分析 GTX480 上全局内存事务的数量。但是， uncached_global_load_transaction 选项无济于事，因为该字段的输出始终为 0。还有其他方法吗？例如，我可以启用其他计数器并根据它们计算交易数量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:40:59.160

全局内存是一个虚拟地址空间。数据可以驻留在设备内存或固定系统内存中。对于 Compute Capability 2.x 设备，您可以按如下方式计算层次结构：

SM 到 L1C 全局负载事务

*   缓存事务为 128B
*   `sm2l1c_global_load_transactions = l1_global_load_hit + l1_global_load_miss`

SM 到 L2C 全局负载事务

*   SM 未缓存的全局事务或 L1 缓存未命中到 L2 在 32B 事务中。
*   `sm2l2c_global_load_transactions = (l1_global_load_miss * 4) + uncached_global_load_transaction`

CUDA Profiler 不公开 global_atomic、global_atomic_cas 和 global_red 操作的计数器。

CUDA Profiler 不公开计数器来显示从 L2 到系统内存或基于全局与本地的设备内存的数据。您可以使用以下计数器获取 L2 的带宽和系统内存（通过 PCIe）或设备内存（DRAM）的带宽：

L2 交易

*   L2 查询为 32B
*   根据 CUDA 分析器的版本，这包括从以下一个或多个源读取到 L2：SM L1（本地、全局、原子、表面）、TEX 缓存、常量缓存、指令缓存、MMU、复制引擎、.. .
*   `l2_read_transactions = sum(l2_subp{0,1}_read_sector_queries)`

设备内存（FB、DRAM）

*   DRAM 的读取带宽来自 L2 未命中和 ECC（如果启用）
*   FB查询为32B
*   `fb_read_transactions = sum(fb_supb{0,1}_read_sectors)`

全局存储、本地加载/存储和 L2 到系统内存的计算遵循类似的模式。

有关详细信息，请参阅[CUPTI 用户指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUPTI_Users_Guide.pdf)部分事件参考 - 计算能力 2.x。这些字符串名称应该适用于使用 CUDA Profiler、Visual Profiler、nvprof (5.0) 和 CUPTI API 的最新驱动程序。

如果您使用的是 CUDA 5.0，nvprof 命令`nvprof --query-events`将列出已安装设备上的所有可用事件。

# php - 如何确定函数实例是否正在执行？

> ID：11926223
> 
> 赞同：-1
> 
> 时间：2012-08-12T22:04:56.380
> 
> 标签：php, function, detection, execution

如何确定函数实例是否正在执行？

笔记：

-我知道在function_started和function_ended时记录到DB的解决方案，但我无法解决的问题是：如果函数在执行期间终止，日志将不正确。

- 我要解决的一般问题是：在多用户 Web 应用程序中 - 一个用户一次应该使用一个功能，因此在执行之前需要检查是否某个功能实例已经在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:15:51.647

可能是问题没有很好地表述，但我在这里找到了我正在寻找的答案：PHP 信号量[http://www.re-cycledair.com/php-dark-arts-semaphores](http://www.re-cycledair.com/php-dark-arts-semaphores)

# c++ - 以 NULL 作为参数的调用中的重载解决方案

> ID：11926225
> 
> 赞同：0
> 
> 时间：2012-08-12T22:05:36.883
> 
> 标签：c++, constructor, ambiguous

我有两个重载的构造函数：

```
Hello::Hello(std::string message)
{
}

Hello::Hello(int *number)
{
} 
```

这些构造函数中的任何一个都可以获取内存地址。如果我这样做了，`Hello hi(NULL);`那么哪个会被调用？

另外，如果您可以解释规则，因为它们涉及重载的对象。类似地，如果我有一个构造函数对参数 ( `Object::Object(long x)`) 使用了 long，而另一个重载 ( `Object::Object(SomeOtherObject o)`) 使用了一个对象，该对象本身对 long ( `SomeOtherObject::SomeOtherObject(long x)`) 进行了重载。然后我打电话`Object obj((long)5);`是否保证会打电话给另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:15:23.037

有一个构造函数与您的示例完全无关。它只是关于重载解决方案，您可以使用两个函数对其进行检查：

```
void foo(std::string s) {
}

void foo(int* n) {
} 
```

调用`foo(NULL)`将导致调用`foo(int*)`。`NULL`是空指针常量，可以隐式转换为每种指针类型，在这种情况下最好的转换是`int*`. 另一个过载将需要两次转换，这被评为更糟。

第二种情况很明显：完美匹配是首选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T22:11:01.847

调用`std::string`构造函数需要额外的隐式转换，因此`int*`是首选。

对于第二种情况，则首选初始构造函数。当编译器在那里完美匹配时，为什么编译器会寻找任何其他构造函数？再一次，它包括一个隐式转换，这比直接`long`构造函数提供的完美匹配更糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T22:32:11.910

Wrt 您在第二个问题中指出的问题，可以强制重载解决方案以预期的方式运行。

当你有一个带有单个对象的类构造函数时，比如你的`Object(SomeOtherObject o)`，风格上最好用单词标记那个构造函数`explicit`，这样编译器就不会尝试进行隐式转换。例如给定定义：

```
class A {
  A(int x);
};

class B {
  explicit B(A a);
}; 
```

试图创建一个像这样的对象`B b(100)`将是一个编译错误。

另请参阅有关此主题的[Google C++ 样式指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Explicit_Constructors)部分。

# mongodb - 为什么未设置的查询不会删除mongoDB中的指定字段？

> ID：11926226
> 
> 赞同：0
> 
> 时间：2012-08-12T22:05:37.120
> 
> 标签：mongodb

我在这里运行的查询在 mongo shell 界面中产生了一个空白（没有数字，基本上没有）：

```
> db.classrooms.update( { "c_type" : { $exists : true } }, { $unset : { "c_type" : 1 } }, false, true); 
```

此外，我检查了应该删除 c_type 的集合行，但它们仍然存在。

我基本上是在尝试使用 unset 命令删除我的集合中的列/字段。我的语法有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:08:03.043

除了我的评论，这是我测试的示例：

```
MongoDB shell version: 2.0.6
connecting to: test

> db.classrooms.insert({"example": "field", "c_type" : "Open"});
> db.classrooms.insert({"example": "array", "c_type" : ['Available']});
> db.classrooms.insert({"example": "obj",   "c_type" : {'Booked' : 'Yes'}});

> db.classrooms.find()
{
    "_id" : ObjectId("502abd4a332f362f58906683"),
    "example" : "field",
    "c_type" : "Open"
}
{
    "_id" : ObjectId("502abd4e332f362f58906684"),
    "example" : "array",
    "c_type" : [
        "Available"
    ]
}
{
    "_id" : ObjectId("502abd53332f362f58906685"),
    "example" : "obj",
    "c_type" : {
        "Booked" : "Yes"
    }
}

> db.classrooms.update(
   { "c_type" : { $exists : true } },
   { $unset : { "c_type" : 1 } }, 
   false,  // upsert
   true);  // update multiple records

> db.classrooms.find()
{ "_id" : ObjectId("502abd4a332f362f58906683"), "example" : "field" }
{ "_id" : ObjectId("502abd4e332f362f58906684"), "example" : "array" }
{ "_id" : ObjectId("502abd53332f362f58906685"), "example" : "obj" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:21:48.740

弄清楚了。基本上我不得不双引号`$exists`和`$unset`：

```
> db.classrooms.update( { "c_type" : { "$exists" : true } }, { "$unset" : { "c_type" : 1 } }, false, true); 
```

# javascript - javascript函数未执行

> ID：11926228
> 
> 赞同：0
> 
> 时间：2012-08-12T22:07:30.957
> 
> 标签：javascript, ajax, json

为什么 alert("Test1") 被执行，而 alert("Test2") 没有被执行？PS 目前我没有使用 json `data`。

```
<script>
$(document).ready(function() {
    var param = 10;
           $.getJSON(
                       'modules/mod_scheduler/updateList.php?param'+param,
                       function(data)
                       {
                           alert("Test1");
                           find_optimal_schedule();
                       }
           );
    });
</script>

<script language="javascript">
function find_optimal_schedule() {
    alert("Test2");
    //...
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:10:16.960

我不确定，但尝试改变这一点：

```
<script language="javascript"> 
```

进入：

```
<script type="text/javascript"> 
```

看看它是否运行。

# .net - 使用字典时 .NET 4 并发性能差

> ID：11926231
> 
> 赞同：3
> 
> 时间：2012-08-12T22:08:04.847
> 
> 标签：.net, c#-4.0, data-structures, concurrency

我正在尝试将一些带有字符串键的数据存储到字典中。数据非常大，例如数千万个字符串。因此，我决定开发一个并发版本以实现更快的执行。但是并发版本的性能非常糟糕。

我使用了两种策略：
1- 将输入分成两个块，并使用两个并发线程将每个块插入两个不同的字典中。
2- 使用 Parallel.ForEach 调用将整个数据插入 ConcurrentDictionary。

但不幸的是，这两种策略的表现都不乐观。第一种策略大约要好**20~30%**，这还不够，因为任务之间没有共享数据。而且，并发收集速度慢了大约**100%**！

现在我想知道这是什么**问题**？？？？？？这是否意味着在这个问题中没有机会并行加速？？？如果有人可以帮助我，我将不胜感激:)

我在下面附上了一个示例代码。
在我的双核 AMD Turion 系统上，示例结果为（以毫秒为单位）：
*初始化：542
串行：294
并行：234
并发 Dic：666*

```
 static void Main(string[] args)
    {
        System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();
        watch.Start();
        Random r = new Random();
        int count=1000000;
        string[] list = new string[count];
        for (int i = 0; i < count; i++)
        {
            list[i] = r.Next(10000).ToString();
        }

        watch.Stop();
        Console.WriteLine("Initialization: "+watch.ElapsedMilliseconds);
        watch.Reset();
        watch.Start();

        Dictionary<string, byte> dic1 = new Dictionary<string, byte>();
        Dictionary<string, byte> dic2 = new Dictionary<string, byte>();
        foreach (var s in list)
            dic1[s] = 0;

        watch.Stop();
        Console.WriteLine("Serial: " + watch.ElapsedMilliseconds);
        watch.Reset();
        watch.Start();

        dic1.Clear();

        Task t1 = new Task(
            () =>
            {
                for (int i = 0; i < list.Length / 2; i++)
                    dic1[list[i]] = 1;
            }
            );
        Task t2 = new Task(
            () =>
            {
                for (int i = list.Length / 2; i < list.Length; i++)
                    dic2[list[i]] = 1;
            }
            );

        t1.Start();
        t2.Start();
        Task.WaitAll(t1, t2);

        watch.Stop();
        Console.WriteLine("Parallel: " + watch.ElapsedMilliseconds);
        watch.Reset();
        watch.Start();

        ConcurrentDictionary<string, byte> dicp = new ConcurrentDictionary<string, byte>();
        Parallel.ForEach(list, s =>
            {
                dicp.AddOrUpdate(s, 1, (k, v) => v);
            }
        );

        watch.Stop();
        Console.WriteLine("Concurrent Dic: " + watch.ElapsedMilliseconds);
        watch.Reset();
        watch.Start();

        Console.ReadKey();

        return;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:59:03.643

`ConcurrentDictionary`慢很容易解释：访问任何条目都需要锁。它不是为重载而设计的。

很难解释为什么`Task`基于第一个基准的基准没有看到显着的加速。它应该有。您正确地对工作进行了分区，几乎没有同步。

也许任务的一次性启动成本约为 100 毫秒？尝试循环重复基准测试 10 次。上次运行的结果是否相同？

尝试创建新词典。重用旧的会继承旧测试的状态：预先确定大小的内部数组。

HansPassant 在评论中提到您可能受到内存带宽限制。我认为情况并非如此。Dictionary 在内部进行了一些不那么便宜的计算，而现代系统并没有那么大的带宽限制。它们可能受延迟限制，但不受带宽限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:47:03.753

您可以提出一些优化。1.因为您提到数据量非常大，请尝试将字典的初始大小指定为较大的数字（大约是您希望在其中存储的数量） 2.在这种情况下尽量避免多线程- 我认为这里没有任何好处，如果它只是关于插入的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:11:42.557

1) 说过。给字典构造函数一个初始大小。这迫使结构至少分配这么多条目/桶。

2）如果可能的话，看看你是否可以使用更短的字符串。

3) 毫无疑问，Dictionary 将在内部进行许多字符串比较。将您自己的字符串比较器传递给 Dictionary 构造函数。

```
new Dictionary<string, string>(StringComparer.Ordinal); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:08:00.393

您为您的问题建议了 3 种解决方案，即串行、并行和`ConcurrentDictionary`.

首先，您的第二个解决方案（并行解决方案）是针对与第一个和第三个完全不同的问题的解决方案。它的结果不是单个字典，而其他 2 个解决方案产生单个字典。看起来并行性能更好的原因是它还没有完成。您还有一步要合并`dic1`和`dic2`。

无论如何，如果您希望将并行解决方案添加到同一个字典中，则必须添加 a`lock`以避免竞争条件。加锁使您的并行解决方案就像第三种解决方案一样（由于 ConcurrentDictionary 可能有更好的使用锁实现，第三种可能会快一点）。

顺便说一句，当您有一个列表（或字典）要填充，并且所有输入数据都准备好时，瓶颈部分算法就是`Add`成本。即使你因为使用了多个线程进行添加`lock`，每个线程都应该等待其他线程完成他们的添加工作。因此，实际上您将有大量线程（任务）相互等待，使您的解决方案像顺序运行一样运行，加上上下文切换的开销。

最后，并行编程根本无法帮助您解决这种情况。要优化您的算法，您应该使添加部分更加优化。例如，您可以为字典设置一个初始大小（帮助 add 方法不运行列表扩展部分）。或者您可以定义一个更快的比较器（在您的字符串太大的情况下）。就个人而言，我认为设计一个优化的比较器会对这种情况下的性能产生很大影响。您可以在比较器算法中使用一些散列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T22:42:44.683

字典的设计目的并不是要像您似乎那样容纳大量条目（数千万）。事实上，[对 ASP.NET 的攻击](https://devcentral.f5.com/weblogs/david/archive/2012/01/20/hashdos-ndash-the-post-of-doom-explained.aspx)完全依赖于 asp.net 字典很早就开始出现哈希冲突这一事实。

这意味着必须依赖它的碰撞避免机制，该机制通常不是 O(1) 而是 O(n)（n 是发生碰撞的键的数量）。正如攻击所证明的那样，这会大大降低字典的速度。

将哈希冲突与锁定机制结合起来，您的速度就会明显下降。

另外，请记住，并行任务适用于需要一段时间且彼此之间不共享大量数据的例程，例如处理照片。即使发生冲突，在字典中添加条目也非常快，并且锁定和颚化功能要慢得多。再加上您需要创建一个字典（这是并行处理的瓶颈），并且您可以解释为什么并行初始化字典需要更长的时间。

我希望这是有道理的。

# ruby-on-rails - Ruby on Rails：在 Rails 视图中创建动态类名

> ID：11926233
> 
> 赞同：0
> 
> 时间：2012-08-12T22:08:21.670
> 
> 标签：ruby-on-rails, view, navigation

我想在 Rails 的导航窗格中实现一个动态类名。

为此，我在控制器中定义了一个属性，如下所示：

```
class StoresController < ApplicationController
    @nav = "store"

    def index
        ...
    end
end 
```

然后，我在我的文件中使用该`@nav`属性，如下所示：`application.html.erb`

```
<%= link_to "Store", stores_path, if @nav == 'store' { :class => 'selected' } %> 
```

但它不起作用。我尝试了其他组合，例如使用带有 () 的 link_to 或反转`if`语法，但没有任何效果。

我的问题：如何`class`在 Rails 中动态设置值？什么是最佳实践？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:30:05.800

@nav 是控制器类实例变量而不是控制器对象实例变量，它在您的操作和相应模板中不可见。我假设您想依赖当前控制器，因此您可以执行以下操作：

```
<%= link_to "Store", stores_path, { :class => params[:controller] == 'stores' ? 'selected' : '' } %> 
```

对我来说，最好的做法是创建一个帮助器，它根据您当前的路径和给定的路径返回适当的类名甚至整个链接（在这种情况下为 link_to 替换）。

# mysql - 存储动态内容 | 可变数量的元素

> ID：11926234
> 
> 赞同：0
> 
> 时间：2012-08-12T22:08:40.037
> 
> 标签：mysql

我需要存储这个关系：

```
domain -> tag1, tag2, tag3 .... tagN 
```

到一个 msql 表。

我想我只会有两个这样的字段

```
domain | tag_arary 
```

实际数据可能是：

```
facebook.com | [social, networking, web, foo1, foo2 ] 
```

或者另一种方式，将设置标签的最大数量，并为每个标签设置一个字段：

结构

```
domain | tag1 | tag2 | tag3 
```

实际数据

```
facebook.com | social | networking | web | foo1 | foo2 
```

实现这一点的最佳方法是什么。

请注意，我需要添加标签和删除标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:25:51.053

This is probably the most flexible way for the long run, as it's **much easier** to **query/update/delete** the tags. You might want to **give id** to the domains table though, as it would be much faster in terms of searching on integer field.

```
CREATE TABLE domains (
 domain VARCHAR(255) PRIMARY KEY
);

# table to store all your domain names
INSERT INTO domains (domain) VALUES ('www.facebook.com');

# table to store all the tags you want to have for your application
CREATE TABLE tags (
id INTEGER AUTO_INCREMENT PRIMARY KEY,
tag_name VARCHAR(255)
);

INSERT INTO tags (tag_name) VALUES ('social');
INSERT INTO tags (tag_name) VALUES ('networking');

# Then, you can store all the tags related to a domain in domain_tags table
# It provides one-to-many relationship between a domain and tags.
CREATE TABLE domain_tags (
    domain VARCHAR(255),
    tag_id INTEGER
);

INSERT INTO domain_tags (domain, tag_id) VALUES ('www.facebook.com', 1);
INSERT INTO domain_tags (domain, tag_id) VALUES ('www.facebook.com',2);

# Whenever you want to get the tags for a domain, simply join the tables together
# and query based on your domain name.
SELECT tag_name
FROM domains d
INNER JOIN domain_tags dt ON d.domain= dt.domain
INNER JOIN tags t ON t.id= dt.tag_id
WHERE d.domain='www.facebook.com'; 
```

# html - 将旧的.html页面重定向到没有html扩展页面的新页面？

> ID：11926237
> 
> 赞同：5
> 
> 时间：2012-08-12T22:09:14.030
> 
> 标签：html, wordpress, .htaccess, redirect

我刚刚更改了我的 wordpress 网站中的永久链接。

我的旧链接是这样的，

```
http://www.sitename.com/category/postname.html 
```

现在新的链接是

```
http://www.sitename.com/category/postname/ 
```

我在旧链接处收到 404 错误，如何将所有 .html 页面重定向到带有 .htaccess 的新非 .html 页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T22:17:15.187

在文档根目录的 htaccess 文件中，在您的 wordpress 规则*之前添加以下内容：*

```
RedirectMatch 301  ^/([^/]+)/([^/.]+)\.html$ /$1/$2/
RedirectMatch 301  ^/([^/]+)/([^/]+)/([^/.]+)\.html$ /$1/$2/$3/ 
```

如果你需要通过主机来限制它，你可以使用 mod_rewrite：

```
RewriteCond %{HTTP_HOST} sitename.com [NC]
RewriteRule ^([^/]+)/([^/.]+)\.html$ /$1/$2/ [R=301,L]

RewriteCond %{HTTP_HOST} sitename.com [NC]
RewriteRule ^([^/]+)/([^/]+)/([^/.]+)\.html$ /$1/$2/$3/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-21T06:09:35.807

在 htaccess 文件中，只需输入：

```
Redirect 301&nbsp; /postname.html&nbsp; http://www.sitename.com/category/postname/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T10:50:32.270

接受的答案（上图）`Jon Lin`给我带来了一些问题。这是我的结果，效果很好，而且更紧凑。

它适用于路径中的目录和目录。

**单线：**

```
RedirectMatch 301  ^/(.*)\.html$ /$1 
```

或者，如果您需要它受主机限制：

```
RewriteCond %{HTTP_HOST} myDomain.com [NC]
RewriteRule ^(.*)\.html$ /$1 [R=301,L] 
```

例子： [![在此处输入图像描述](../Images/096fcf057d56fc76698f1c4382a41f2e.png)](https://i.stack.imgur.com/7719B.png)

# javascript - 使用 D3 选择圆的子集

> ID：11926238
> 
> 赞同：3
> 
> 时间：2012-08-12T22:09:22.807
> 
> 标签：javascript, d3.js

使用 D3 创建圈子时，是否可以创建一个组以便以后可以选择它们？例如，如果使用以下方法创建圆圈：

```
var dataset = [   [ 30, 50, 20],
                  [ 100, 50, 20],
                  [ 150, 50, 30]];

//Create SVG element
var svg = d3.select("#chart")
            .append("svg")
            .attr("width",  200)
            .attr("height", 200);

// generate circles 
svg.selectAll("circle")
   .data(dataset)
   .enter()
   .append("circle")
   .attr("cx", function(d){
                return d[0];
                })
   .attr("cy", function(d){
                return d[1];
                })
   .attr("r",  function(d){
                return d[2];
                }); 
```

我可以将从第一个数组元素创建的圆标记为`circle1`，将后两个圆标记为`circle2`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:14:38.413

绝对 - 根据数据索引动态更新类属性：

```
.attr("class", function(d,i) {return i == 0 ? "circle1" : "circle2";}); 
```

然后使用分配的类来选择元素：

```
d3.select(".circle1"); //first circle
d3.selectAll(".circle2"); //second and third circles 
```

# java - javax.mail.search 有替代品吗？

> ID：11926239
> 
> 赞同：0
> 
> 时间：2012-08-12T22:09:42.470
> 
> 标签：java, gnu, jakarta-mail, nntp

我正在使用[GNU NNTP](http://www.gnu.org/software/classpathx/javamail/)连接到localhost 上的作为 NNTP 服务器的 leafnode [。](http://leafnode.sourceforge.net/)GNU API 使用`javax.mail.Message`，它带有以下警告：

从[消息 API](http://docs.oracle.com/javaee/6/api/javax/mail/Message.html#getMessageNumber%28%29)：

> ..如果文件夹中的其他邮件被删除和清除，特定邮件的邮件编号可能会在会话期间更改。

所以，目前，我正在使用`javax.mail.search`搜索已知消息。不幸的是，每次搜索都会搜索整个文件夹。我可以保持文件夹打开，这样可以加快搜索速度，但它看起来很笨拙。

使用的替代**方法**`javax.mail.search`是什么？这个：

```
 SearchTerm st = new MessageIDTerm(id);
    List<Message> messages = Arrays.asList(folder.search(st)); 
```

当`javax.mail.Folder`只有几个时工作正常`Message`。但是，对于非常大`Folder`的 '，必须有更好的方法。代替`Message-ID`标头字段，`Xref`可能更可取，但仍然存在搜索字符串的相同基本问题。

这是数据库，它只需要保存足够的信息来查找/获取/搜索`Folder`'s 以获取指定消息：

```
mysql> 
mysql> use usenet;show tables;
Database changed
+------------------+
| Tables_in_usenet |
+------------------+
| articles         |
| newsgroups       |
+------------------+
2 rows in set (0.00 sec)

mysql> 
mysql> describe articles;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| ID           | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| MESSAGEID    | varchar(255) | YES  |     | NULL    |                |
| NEWSGROUP_ID | bigint(20)   | YES  | MUL | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> 
mysql> describe newsgroups;
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| ID        | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| NEWSGROUP | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
```

虽然该模式目前非常简单，但我计划增加它的复杂性。

使用以下命令查询消息`getMessage()`：

```
package net.bounceme.dur.usenet.model;

import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.*;
import javax.mail.search.MessageIDTerm;
import javax.mail.search.SearchTerm;
import net.bounceme.dur.usenet.controller.Page;

public enum Usenet {

    INSTANCE;
    private final Logger LOG = Logger.getLogger(Usenet.class.getName());
    private Properties props = new Properties();
    private Folder root = null;
    private Store store = null;
    private List<Folder> folders = new ArrayList<>();
    private Folder folder = null;

    Usenet() {
        LOG.fine("controller..");
        props = PropertiesReader.getProps();
        try {
            connect();
        } catch (Exception ex) {
            Logger.getLogger(Usenet.class.getName()).log(Level.SEVERE, "FAILED TO LOAD MESSAGES", ex);
        }
    }

    public void connect() throws Exception {
        LOG.fine("Usenet.connect..");
        Session session = Session.getDefaultInstance(props);
        session.setDebug(true);
        store = session.getStore(new URLName(props.getProperty("nntp.host")));
        store.connect();
        root = store.getDefaultFolder();
        setFolders(Arrays.asList(root.listSubscribed()));
    }

    public List<Message> getMessages(Page page) throws Exception {
        Newsgroup newsgroup = new Newsgroup(page);
        LOG.fine("fetching.." + newsgroup);
        folder = root.getFolder(newsgroup.getNewsgroup());
        folder.open(Folder.READ_ONLY);
        List<Message> messages = Arrays.asList(folder.getMessages());
        LOG.fine("..fetched " + folder);
        return Collections.unmodifiableList(messages);
    }

    public List<Folder> getFolders() {
        LOG.fine("folders " + folders);
        return Collections.unmodifiableList(folders);
    }

    private void setFolders(List<Folder> folders) {
        this.folders = folders;
    }

    public Message getMessage(Newsgroup newsgroup, Article article) throws MessagingException {
        LOG.fine("\n\ntrying.." + newsgroup + article);
        String id = article.getMessageId();
        Message message = null;
        folder = root.getFolder(newsgroup.getNewsgroup());
        folder.open(Folder.READ_ONLY);
        SearchTerm st = new MessageIDTerm(id);
        List<Message> messages = Arrays.asList(folder.search(st));
        LOG.severe(messages.toString());
        if (!messages.isEmpty()) {
            message = messages.get(0);
        }
        LOG.info(message.getSubject());
        return message;
    }
} 
```

我现在才意识到的问题是：

```
...the message number for a particular Message can change during a session if other messages in the Folder are deleted and expunged. 
```

无论使用哪个特定的标头，它都类似于：

```
Message-ID: <x1-CZwog1NTZLd68+JJY35Zrl9OqXE@gwene.org> 
```

或者

```
Xref: dur.bounceme.net gwene.com.economist:541 
```

所以总有一个字符串需要解析和搜索，这很尴尬。

我确实注意到`MimeMessage`有一个非常方便的[getMessageID](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html#getMessageID%28%29)方法。不幸的是，GNU 使用`javax.mail.Message`而不是`MimeMessage`. 诚然，可以实例化一个文件夹 and `MimeMessage`，但我没有看到从一次运行到另一次运行的任何节省，不能保证`getMessageID`会返回正确的消息。

我看到的尴尬解决方案可能是创建一个`MimeMessage`'s 的持久文件夹，但这似乎有点矫枉过正。

因此，使用标头，或者`Xref`然后`Message-ID`解析和搜索字符串......

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:47:24.523

`javax.mail`是一个最小公分母 API，它的行为完全取决于后端是什么。所以，在不知道你在说什么的情况下，真的不可能对你的问题给出一个好的答案。但是，您可能需要直接与您正在交谈的任何人交谈并了解更多有关其行为的信息。

这可能是一个评论而不是一个答案，但我认为这个 API 只是一个薄层的信息可能足以证明这一点。

# arrays - 如何将数组转换为字符串？

> ID：11926240
> 
> 赞同：1
> 
> 时间：2012-08-12T22:09:48.383
> 
> 标签：arrays, string, actionscript-3

我正在做这个项目，我需要将一个完整的字符数组保存到一个字符串中。我想要`[]`字符串中的字符。

```
Example:
aArray = [
[0,0,0,0],
[0,0,0,0],
[0,0,0,0],
[0,0,0,0]
];

myString = aArray.toString();
trace(myString); 
```

在我的输出中，我得到：

```
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0... 
```

我想要`[]`括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:28:35.250

```
var aArray:Array = [
[0,0,0,0],
[0,0,0,0],
[0,0,0,0],
[0,0,0,0]
];

var string:String =  JSON.encode(aArray);

trace(string); 
```

输出 ：

```
"[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]" 
```

# sql - 在数据库中存储时变图

> ID：11926252
> 
> 赞同：0
> 
> 时间：2012-08-12T22:11:20.897
> 
> 标签：sql, sql-server, sql-server-2008, database-design, time-series

我有一个这样的图表：

```
Source | Sink | Timestamp
A        B      2012-08-01 03:02:00
B        C      2012-08-01 03:02:00
C        D      2012-08-01 03:02:00
... 
```

我正在从另一个表构建这个表。我想设计我的桌子，以便：

*   它使用最少的存储空间，而不包括能够获得最新的图表（我不关心以前的实时图表）
*   应该可以研究图形演变（事物变化的速度等）

目前，除了 storage和 a之外`Source`，没有其他优化。考虑到每个快照都包含 800K 链接，因此无法完整存储图形，因此我正在寻找可能的基于方法。关于如何解决这个问题的任何建议？`Sink``Timestamp``delta`

图本身是高度动态的，即可以在每个快照中添加或删除节点和链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:32:27.963

我想你正在看这样的东西：

![在此处输入图像描述](../Images/0983d616a45b005230d148ad0f613981.png)

SNAPSHOT_VER（“版本”）随着每个新快照单调递增。每个新快照都是一个增量，相对于前一个快照添加或删除节点和边：

*   添加新节点/边时，您只需创建一个新的 SNAPSHOT 并将其 SNAPSHOT_VER 用于 NODE.CREATED_VER 和 EDGE.CREATED_VER。暂时将 DELETED_VER 保留为 NULL。
*   删除节点/边时，只需根据删除它们的快照设置 DELETED_VER。

当查询给定快照中存在的图形时，您应该能够这样做：

```
SELECT *
FROM NODE
WHERE
    CREATED_VER <= @snapshot_ver
    AND (DELETED_VER IS NULL OR @snapshot_ver < DELETED_VER) 
```

*（可以为 EDGE 构造等效查询。）*

这将获取在给定快照或更早创建的所有节点，并且根本没有被删除或在给定快照之后被删除。

查询最新图表时，您可以简单地：

```
SELECT *
FROM NODE
WHERE DELETED_VER IS NULL 
```

您可能需要在 {DELETED_VER, CREATED_VER DESC} （在 NODE 和 EDGE 中）上的复合索引，以便在这两种情况下都具有良好的性能。

# android-ksoap2 - 如何下载 ksoap2-android 源代码，以附加到 eclipse

> ID：11926253
> 
> 赞同：0
> 
> 时间：2012-08-12T22:11:20.160
> 
> 标签：android-ksoap2

在[http://code.google.com/p/ksoap2-android/wiki/NeedHelp](http://code.google.com/p/ksoap2-android/wiki/NeedHelp)

它说基于 Android 开发工具包（Eclipse 插件）的环境，您必须从[程序集项目](http://code.google.com/p/ksoap2-android/source/browse/#svn/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/)中手动下载源代码和 javadoc jar 文件。

我已经准备好附加我的 javaSDK 的源代码（所以我相信我知道我在做什么），但是我什至找不到 ksoap2-android 的源代码在哪里给出了汇编项目的下载链接。

我错过了什么？有人能告诉我我应该下载什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T04:08:56.743

这是确切的链接，希望完全附加到 Eclipse 中同样简单。

[https://github.com/mosabua/ksoap2-android/downloads](https://github.com/mosabua/ksoap2-android)

# wpf - WPF 椭圆大小

> ID：11926255
> 
> 赞同：2
> 
> 时间：2012-08-12T22:11:42.203
> 
> 标签：wpf, stackpanel, ellipse

我在这里找到了这个问题：[How to populate a WPF grid based on a 2-dimensional array](https://stackoverflow.com/questions/276808/how-to-populate-a-wpf-grid-based-on-a-2-dimensional-array)，我想使用标记的解决方案。而且它似乎也很好用，但是有一个问题，那个问题是我使用省略号来显示我的数据。所以每一项都等于一个椭圆。

这就是问题所在：椭圆在 Measure 上仅请求 x = 0，y = 0 的大小。所以我的问题是没有显示任何内容。所以我尝试创建一个自定义 Stackpanel：

```
public class StretchStackPanel : StackPanel
{
    protected override Size MeasureOverride(Size constraint)
    {
        Size result = constraint;

        result.Width = result.Width == Double.PositiveInfinity ? Double.MaxValue : result.Width;
        result.Height = result.Height == Double.PositiveInfinity ? Double.MaxValue : result.Height;

        if (this.Orientation == System.Windows.Controls.Orientation.Horizontal)
            result.Height = result.Width / InternalChildren.Count;

        return result;
    }

    protected override Size ArrangeOverride(Size arrangeSize)
    {
        var size = base.ArrangeOverride(arrangeSize);

        double elementLength;
        if (Orientation == System.Windows.Controls.Orientation.Horizontal)
            elementLength = size.Width / InternalChildren.Count;
        else
            elementLength = size.Height / InternalChildren.Count;

        double current = 0;
        foreach (UIElement e in InternalChildren)
        {
            Rect result;
            if (Orientation == System.Windows.Controls.Orientation.Horizontal)
            {
                result = new Rect(current, 0, elementLength, size.Height);
                current += result.Width;
            }
            else
            {
                result = new Rect(0, current, size.Width, elementLength);
                current += result.Height;
            }

            e.Arrange(result);
        }

        return size;
    }
} 
```

但是有一个非常奇怪的行为。项目之间的边距非常小，而且似乎是随机的。如果我调整大小，您可以看到它们在移动。

这是两个屏幕截图：

![在此处输入图像描述](../Images/eb540948880a9aaad90db01f6066fbf4.png) ![在此处输入图像描述](../Images/c5dc0d9f28b3838c8effef2fdc271ee6.png)

我还尝试使用仅包含列的 Uniformgrid 而不是 Stackpanel，并使用 Itemscontrol 周围的 ViewBox 设置具有固定高度的 itemstyle。

# jquery - 清除焦点上的输入默认值并在模糊时填充该值

> ID：11926256
> 
> 赞同：0
> 
> 时间：2012-08-12T22:11:52.483
> 
> 标签：jquery

我需要它来清除焦点上的默认输入值，如果值在模糊时为空，则将值恢复。这是我当前的代码：

```
$(document).ready(function() {
    function toggleText(selector, value) {
        $(selector).focus(function() {
            if ($(this).val == value) {
                $(this).val('');
            }
        });
        $(selector).blur(function() {
            if ($(this).val == '') {
                $(this).val(value);
            }
        });
    }
    toggleText('input[name="first-name"]', 'First name...');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:22:14.307

# mysql - Why is the estimated rows count very different in phpmyadmin results?

> ID：11926259
> 
> 赞同：34
> 
> 时间：2012-08-12T22:13:16.073
> 
> 标签：mysql, phpmyadmin

Without any changes on database I got very different rows count on my tables.

What can cause this?

![enter image description here](../Images/9fee9c9d3ae65429bbdcb13d7872ba23.png)

![enter image description here](../Images/849d802db282c445f556172b50497acd.png)

```
Server version: 5.1.63-cll
Engine: InnoDB 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-12T22:21:03.210

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-08T10:55:06.243

phpMyAdmin 使用快速方法来获取行数，并且此方法仅在 InnoDB 表的情况下返回近似计数。

请参阅查看[`$cfg['MaxExactCount']`](https://dba.stackexchange.com/a/97427/9405)修改这些结果的方法，但这可能会对性能产生严重影响。

# c# - C# - Pass different types as one Parameter

> ID：11926260
> 
> 赞同：0
> 
> 时间：2012-08-12T22:13:37.310
> 
> 标签：c#, parameter-passing

I used Extract Method on this code because there were multiples of this code, and here is what it became:

```
private void InsertStatement(string table, string table2, TestURLGUI4.Form1 form, SQLiteConnection sql_con, ref int dbID, ref int dbID2, Chrome chrome, int max)
{
    try
    {
        List<int> dbIDs = new List<int>();
        using (SQLiteTransaction mytransaction = sql_con.BeginTransaction())
        {
            using (SQLiteCommand mycommand = new SQLiteCommand(sql_con))
            {
                mycommand.CommandText = "insert or ignore into " + table + " (id, url, title, visit_count, frecency, last_visit_date) values (@dbID,@url,@title,@visit,@frecency,@time)";

                for (var count2 = 0; count2 < chrome.URLs.Count; count2++)
                {
                    URL u = chrome.URLs[count2];
                    mycommand.Parameters.Add(new SQLiteParameter("@dbID", dbID));
                    mycommand.Parameters.Add(new SQLiteParameter("@url", u.url));
                    mycommand.Parameters.Add(new SQLiteParameter("@title", u.title));
                    mycommand.Parameters.Add(new SQLiteParameter("@visit", u.frequency));
                    mycommand.Parameters.Add(new SQLiteParameter("@time", ToPRTime(u.visited)));
                    mycommand.Parameters.Add(new SQLiteParameter("@frecency", ToFrecency(u.frequency)));
                    mycommand.ExecuteNonQuery();
                    dbIDs.Add(dbID);
                    dbID++;
                    form.label1.Text = count2 + "/" + max;
                    Application.DoEvents();
                }

            }
            mytransaction.Commit();
        }
        using (SQLiteTransaction mytransaction = sql_con.BeginTransaction())
        {
            using (SQLiteCommand mycommand = new SQLiteCommand(sql_con))
            {
                mycommand.CommandText = "insert or ignore into " + table2 + " (id, from_visit, place_id, visit_date, visit_type, session) values (@dbID2,2,@dbID,@time,1, 0)";

                for (var count2 = 0; count2 < chrome.URLs.Count; count2++)
                {
                    URL u = chrome.URLs[count2];
                    mycommand.Parameters.Add(new SQLiteParameter("@dbID2", dbID2));
                    mycommand.Parameters.Add(new SQLiteParameter("@dbID", dbIDs[count2]));
                    mycommand.Parameters.Add(new SQLiteParameter("@time", ToPRTime(u.visited)));
                    mycommand.ExecuteNonQuery();
                    dbID2++;
                    form.label1.Text = count2 + "/" + max;
                    Application.DoEvents();
                }

            }
            mytransaction.Commit();
        }
    }
    catch
    {
        throw;
    }
} 
```

The only problem is, instead of the Chrome type parameter, I have created multiple instances of different classes, and I need to pass each one, for example, I have

```
IE ie = new IE();
Firefox firefox = new Firefox(); 
```

etc. Now, how can I modify my parameter so that instead of Chrome, I can pass Chrome, Firefox, IE, etc. all in the same parameter, one at a time?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:18:22.887

让不同的浏览器从一个基`Browser`类继承（或实现一个通用接口）并将其传入。

```
public abstract class Browser
{
    public List<URL> URL { get; private set; }

    protected Browser
    {
        URL = new List<URL>();
    }

    public abstract void NavigateTo(URL url);
} 
```

然后根据需要实现浏览器及其特定功能：

```
public class InternetExplorer : Browser
{
    private Random rand = new Random();
    public override void NavigateTo(URL url)
    {
        if (rand.NextDouble() < 0.5)
            throw new InvalidOperationException();
        else
            url.Navigate();
    }   
}

public class Firefox : Browser
{
    public override void NavigateTo(URL url)
    {
        Thread.Sleep(250);
        url.Navigate();
    }
}

public class Chrome : Browser
{
    public override void NavigateTo(URL url)
    {
        url.Navigate();
        GoFaster();
    }
} 
```

重写您的方法以获取`Browser`并提升该基类所需的任何共享属性：

`private void InsertStatement(string table, string table2, TestURLGUI4.Form1 form, SQLiteConnection sql_con, ref int dbID, ref int dbID2, Browser browser, int max)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T22:18:54.497

最好的办法是创建一个浏览器类可以实现的通用接口类型（类似于`IBrowser`）。然后你的方法签名变成：

```
private void InsertStatement(string table, string table2, TestURLGUI4.Form1 form, SQLiteConnection sql_con, ref int dbID, ref int dbID2, IBrowser browser, int max) 
```

在该方法中，您必须添加一些条件逻辑来确定它是哪种类型：

```
if(browser is Firefox)
{
...
} 
```

当然，如果浏览器类型都做同样的事情，你可能应该只有一个`Browser`类，它有某种`UserAgent`字段来识别它。那么你真的不需要条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T22:20:43.893

您的所有类型都是浏览器，这意味着您可以（并且应该）重构您的代码，以便它们都派生自一个共享的 Browser 类，如果它还不是这样的话。一旦你这样做了，你可以多态地改变你的方法：

```
private void InsertStatement(string table, string table2, TestURLGUI4.Form1 form, SQLiteConnection sql_con, ref int dbID, ref int dbID2, Browser browser, int max) 
```

如果您不愿意这样做，那么我能想到的唯一其他解决方案就是重载该方法。

[本文](http://msdn.microsoft.com/en-us/library/ms173149.aspx)提供有关 C# 中的继承的信息。基本上，你要做的是：

```
class Browser
{
}

class IE : Browser
{
} 
```

然后你仍然可以像这样初始化 IE：

```
IE ie = new IE(); 
```

但是你也可以像这样多态地初始化它：

```
 Browser ie = new IE(); 
```

如果您从 Browser 派生更多类，例如 Firefox、Chrome 等，那么您可以在方法中将它们全部视为单一类型 Browser。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T22:19:16.930

让他们都实现一个接口：

```
interface Browser
{

}

class Firefox : Browser
{

}
class IE : Browser
{

}

Browser ie = new IE();
//...
public void someMethod(Browser b)
//... 
```

# javascript - 将参数传递给 jQuery .click WHILST 保留事件参数

> ID：11926261
> 
> 赞同：1
> 
> 时间：2012-08-12T22:13:37.810
> 
> 标签：javascript, jquery, scope, click, bind

我需要使用将`click`事件绑定到 DOM 中的元素，同时能够动态传递参数，包括事件对象。我当前的脚本使用以下内容：

```
var counter = 1;
$(".dynamo_user_info .dynamo_awards").each(function(){
    $(this).find("~ div a").each(function(){
        var id = $(this).attr("rel").split("aid-")[1];
        $(this).attr("id","dynamo_award-"+counter+"-"+id).bind('click',{c:counter,i:id},function(e){
            e.returnValue = e.preventDefault && e.preventDefault() ? false : false;
            dynamo.awards.tooltip.ini(c,i);
        });
    });
    counter++;
}); 
```

现在，如您所见，`counter`每次迭代都会增加并且`id`不保持静态值。每次迭代后，最终值为：`counter = 4`, `id = 2`. 现在，只要单击这些元素之一，它就会`preventDefaults`酌情运行`dynamo.awards.tooltip.ini(c,i);`。

但是，这不能按预期工作。而不是它运行：

`dynamo.awards.tooltip.ini(1,1);` `dynamo.awards.tooltip.ini(2,6);`

等（例如），它改为运行：

`dynamo.awards.tooltip.ini(4,2);` `dynamo.awards.tooltip.ini(4,2);`

即它使用最后存储的值`counter`和`id`。我的猜测是它这样做是因为它的工作原理，在单击元素**时**`bind`传递参数，而不是之前。我不确定如何解决这个问题，除非我能以某种方式欺骗函数的范围？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:20:10.657

可以通过 event.data 对象访问参数，例如

```
dynamo.awards.tooltip.ini(e.data.c, e.data.i); 
```

[http://api.jquery.com/bind/#passing-event-data](http://api.jquery.com/bind/#passing-event-data)**

# php - 数组PHP中值的最大大小

> ID：11926269
> 
> 赞同：0
> 
> 时间：2012-08-12T22:15:47.683
> 
> 标签：php, arrays, size, max, group-concat

php关联数组中的值字符串有限制吗？

`GROUP_CONCAT`我有一个查询，它为数组元素返回值为CSV 的值。当我直接运行查询时，我看到所有值都被返回。当我在 PHP 中打印数组时，字符串被截断。

不知道如何绕过它？有任何想法吗？

更多信息：我只是 var_dump 从查询中得到的结果。这里是。它显示 1024。看起来有一个限制。它是什么？

```
 array(5) {
   ["FIELD_ID"]=>
      string(3) "232"
   ["answers"]=>
      string(1024) "48,50,52,54,56,989,990,991,992,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,"
     ["ANSWER_TYPE"]=>
     string(2) "SS"
   ["FIELD_TYPE"]=>
     string(2) "DA"
   ["main_field_name"]=>
    string(0) ""
  } 
```

更多信息：即使将变量设置`group_concat_max_len`为 5000，问题仍然存在。还有其他想法吗？PDO有什么问题吗？

重新启动 MySQL 后，它可以工作了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:22:29.583

您可能需要在[此处](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len)阅读 max concat 的长度。

```
命令行格式 --group_concat_max_len=#
选项文件格式 group_concat_max_len
选项设置变量 Yes, group_concat_max_len
变量名 group_concat_max_len
变量范围全局，会话

动态变量 是
  -- 允许值
平台位大小 32
键入数字
默认 1024
范围 4 .. 4294967295

  -- 允许值
平台位大小 64
键入数字
默认 1024
范围 4 .. 18446744073709547520

```

编辑：我觉得返回给您的字符串长度为 1024 很有趣——这恰好是 mysql 中的默认最大长度。巧合？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T04:20:09.533

当您`GROUP_CONCAT`在 mysql 中使用默认长度限制为 1024 时，结果中超过该长度的任何内容都将被截断。这也发生在我身上。

要确定这是否是问题所在，请尝试以下操作：

```
// echo string length to determine what your variable value length is
echo strlen($variable_here); 
```

然后通过执行以下查询检查在 mysql 中设置的 concat 限制：

```
SHOW VARIABLES LIKE 'group_concat_max_len' 
```

我在 phpMyAdmin 中运行它。如果从查询中获得相同的值`strlen`，则`SHOW VARIABLES`需要更新 my.conf 文件或要求主机执行此操作。在 WHM/cPanel 中，它位于**/etc/my.conf**中，在该文件中，您需要具有以下内容：

```
[mysqld]  #<-- Under that
group_concat_max_len=5120  #<-- add this 
```

我选择 5x1024 将其设为 5120 只是为了不必再次处理它。将 conf 文件保存回服务器后，您需要重新启动 mysql 服务。如果您使用 WHM，您可以在**Home » Restart Services » SQL Server (MySQL)下执行此操作**

完成上述操作后，`strlen`实际上确实回显了 3519 并且该值不再被切断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:25:15.627

您的问题有点难以回答，因为：1.您提供的关于字符串实际大小的信息很少。2\. 你问了几个问题（数组大小和字符串大小）。

您应该查看这个[问题](https://stackoverflow.com/questions/3189040/what-is-the-maximum-length-of-a-string-in-php)，然后向我们提供额外的信息，例如您正在使用哪个版本的 php，并且正如 @FLuffeh 在他的评论中所说，请向我们展示一些代码。

# tbb - 用 TBB 测量线程空闲时间

> ID：11926270
> 
> 赞同：1
> 
> 时间：2012-08-12T22:16:22.847
> 
> 标签：tbb, benchmarking

*我有一个线程应用程序，在我认为*是性能密集型的所有代码部分周围都有计时块。这些部分足够长，即使在最终生产运行中，时序代码也可以保持活动状态。该应用程序有一堆工作线程从任务池中提取工作。

在我当前的自定义池实现中，我为每个工作线程计算了两个额外时间：(1) 在空池上等待作业到达的空闲时间量和 (2) 未考虑的“丢失”时间量通过空闲或计时块（表示我错过了一个性能密集型区域）。

我现在正在考虑将我的代码切换到英特尔线程构建模块。使用 TBB 任务时是否可以测量空闲时间？空闲时间和丢失时间的总和可以很容易地通过从总挂钟间隔中减去每个定时部分来计算，但是分别获取每个部分需要特殊支持（或者可能是一个具有低优先级的特殊空闲任务，它会旋转并试图抢占自己？） .

注意：我也在[http://software.intel.com/en-us/forums/showthread.php?t=107203](http://software.intel.com/en-us/forums/showthread.php?t=107203)上问过这个问题，并将同步任何答案。

# python - Mutagen 无法打开文件 - ID3BadUnsyncError

> ID：11926272
> 
> 赞同：1
> 
> 时间：2012-08-12T22:16:43.560
> 
> 标签：python, mutagen

我正在编写一个 python 脚本来重新格式化我的音乐文件夹中的文件名，使用 mutagen 库。这是脚本：

```
from mutagen.easyid3 import EasyID3
import os

print "input directory for processing: "
path = raw_input()
os.chdir(path)        

file_list = filter((lambda x: '.mp3' in x), os.listdir(path))

for i in file_list:
        current = EasyID3(i)
        newname = current["title"][0] + ".mp3"
        newname.replace(" ", "_")
        del current
        print "renaming "+i+" to "+newname
        os.rename(i, newname) 
```

这是我尝试运行它时发生的情况：

```
$ python rename_music.py
input directory for processing: 
/home/james/Music/inscrutable_numbers
Traceback (most recent call last):
  File "rename_music.py", line 11, in <module>
    current = EasyID3(i)
  File "/usr/local/lib/python2.7/dist-packages/mutagen/easyid3.py", line 167, in __init__
    self.load(filename)
  File "/usr/local/lib/python2.7/dist-packages/mutagen/id3.py", line 139, in load
    for frame in self.__read_frames(data, frames=frames):
  File "/usr/local/lib/python2.7/dist-packages/mutagen/id3.py", line 317, in __read_frames
    try: yield self.__load_framedata(tag, flags, framedata)
  File "/usr/local/lib/python2.7/dist-packages/mutagen/id3.py", line 340, in __load_framedata
    return tag.fromData(self, flags, framedata)
  File "/usr/local/lib/python2.7/dist-packages/mutagen/id3.py", line 1085, in fromData
    raise ID3BadUnsynchData, '%s: %r' % (err, data)
mutagen.id3.ID3BadUnsynchData: invalid sync-safe string: '\x00j\x01\x0c\x00\x12(...lots of unicode...)\x12\xff\xff\xff\x00' 
```

有谁知道这里有什么问题？

编辑：原来诱变剂不适用于某些文件。我添加了一个 try 子句并跳过了错误，它现在可以工作了

# visual-studio - Visual Studio 2012 的导航按钮的行为如何？

> ID：11926282
> 
> 赞同：2
> 
> 时间：2012-08-12T22:18:27.637
> 
> 标签：visual-studio

在 Visual Studio 2012 的 IDE 中，我注意到现在有前进和后退导航按钮，类似于 Web 浏览器。

在解决方案资源管理器中，这些按钮似乎允许您在搜索之间来回导航。有关更多详细信息，请参阅[本文](http://blogs.msdn.com/b/zainnab/archive/2012/06/21/visual-studio-2012-new-features-solution-explorer.aspx)。

但是，这些导航按钮也存在于 IDE 主菜单正下方的工具栏中。使用这些按钮似乎可以控制激活哪些文档窗口，但我找不到解释其确切行为的博客文章。

是否有博客文章或在线规范准确描述了这些导航按钮的作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T23:49:28.530

标准工具栏中的向前/向后导航按钮可让您导航到导航堆栈中的先前位置，无论它们是否在您提到的不同文档中。

例如，您可能正在查看某个方法“foo”，该方法调用了另一个方法“bar”，然后按 F12 以查看“bar”内部发生了什么。当您这样做时，您的光标所在的“foo”中的位置被推到导航堆栈上，当您按下 Navigate Backward 按钮时，您又回到了“foo”，正是您离开的地方。

添加导航堆栈的其他示例是（来自下面链接的博客文章）：

> *   增量搜索（包括反向）在搜索开始时留下一个返回标记，在结束时留下另一个标记。
> *   将光标从当前位置移动 10+ 行（因此 11 行甚至更多）的 GoToLine 或鼠标单击会在新位置放置一个返回标记。
> *   破坏性动作（将光标移动到新位置后）会丢弃返回标记
> *   执行查找 (Ctrl+F) 在找到的位置放置一个返回标记
> *   打开文件会在光标在旧文件上的任何位置放置一个返回标记，并在打开的文件上放置另一个标记。

此外，值得知道按钮具有键盘快捷键 (Ctrl + -) 和 (Ctrl + Shift + -)。

有关详细信息，请参阅此[博客文章](http://saraford.net/2007/09/17/did-you-know-how-to-navigate-forward-and-backwards-in-the-editor-all-because-of-go-back-markers-041/)。

# actionscript-3 - 没有用 AS3 和三角法，需要让球移动到球门

> ID：11926291
> 
> 赞同：0
> 
> 时间：2012-08-12T22:19:58.547
> 
> 标签：actionscript-3, physics, trigonometry

哦，上帝，伙计们，我很抱歉再次打扰，我从没想过开始编写 AS3 会这么难（一开始更容易，但现在我的思维被阻塞了），正如我在第一篇文章中解释的[那样三角学试图给球指明方向](https://stackoverflow.com/q/11897882/1567903)，我想让球在踢球后移动到鼠标位置，我的意思是把球以所需的速度和角度扔到光标所在的位置，我拿了杰特的示例，但可能我没有正确实施，这是代码：

```
import flash.geom.Point;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.display.MovieClip;
// here I added a custom cursor to my mouse (it’s an aim in png format)
var cursor:MovieClip;
function initializeGame():void
{
cursor = new Cursor();
addChild(cursor);
cursor.enabled = false;
Mouse.hide();
stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
}
function dragCursor(event:MouseEvent):void
{
cursor.x = this.mouseX;
cursor.y = this.mouseY;
}

initializeGame();
var mouse=this.Mouse;

// here I want to make the player  (called kicker) to kick the ball
stage.addEventListener(MouseEvent.CLICK, kick);

function kick(evt:Event){

kicker_mc.play(); // here I animate the kicker movieClip

this.addEventListener(Event.ADDED, moveBall);// this is the function that will move     the ball towards the goal

}

//And here unsuccessfully trying to make the ball start moving to the cursor position,     (currently when I kick the ball it appears at the right upper corner of the swf, exactly where the cursor appears when movie is tested

var speed:Number;
var angle:Number;
speed=200;
angle = Math.atan2(mouse.y-bola.y, mouse.x-bola.x);

function moveBall (event:Event){

ball.x += Math.cos (angle) * speed;
ball.y += Math.sin (angle) * speed;
} 
```

如果有人帮忙让球移动，我将永远欠债，稍后我将从物理开始，但现在我的大脑已经筋疲力尽了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:35:54.497

你是球不动吗？

`this.addEventListener(Event.ADDED, moveBall);`

转换成

`this.addEventListener(Event.ENTER_FRAME, moveBall);`

# mysql - phpMyAdmin 和 mysql 问题

> ID：11926292
> 
> 赞同：1
> 
> 时间：2012-08-12T22:20:07.533
> 
> 标签：mysql, wamp, wampserver

我正在运行 WAMP 最新版本

一切都很好......

我打开了 phpMyAdmin 并为用户添加了用户和密码

现在我无法进入 phpMyAdmin，除非我将身份验证类型设置为 cookie

然后我可以用我的用户名登录，没有密码……但是我有密码……

MySQL 控制台现在也可以在没有密码的情况下登录......

我到底做了什么？

PHP`config.ini`看起来像这样：

```
<?php

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'USERNAME';
$cfg['Servers'][$i]['password'] = 'PASSWORD';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/* End of servers configuration */

$cfg['DefaultLang'] = 'en-utf-8';
$cfg['ServerDefault'] = 1;
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

/* rajk - for blobstreaming */
$cfg['Servers'][$i]['bs_garbage_threshold'] = 50;
$cfg['Servers'][$i]['bs_repository_threshold'] = '32M';
$cfg['Servers'][$i]['bs_temp_blob_timeout'] = 600;
$cfg['Servers'][$i]['bs_temp_log_threshold'] = '32M';

?> 
```

下一个 MySQL ini 文件如下所示：

```
# Example MySQL config file for medium systems.
#
# This is for a system with little memory (32M - 64M) where MySQL plays
# an important part, or systems up to 128M where MySQL is used together with
# other programs (such as a web server)
#
# You can copy this file to
# /etc/my.cnf to set global options,
# mysql-data-dir/my.cnf to set server-specific options (in this
# installation this directory is C:\mysql\data) or
# ~/.my.cnf to set user-specific options.
#
# In this file, you can use all long options that a program supports.
# If you want to know which options a program supports, run the program
# with the "--help" option.

# The following options will be passed to all MySQL clients
[client]
#password   = MYPASSWORD 
port    = 3306
socket  = /tmp/mysql.sock

# Here follows entries for some specific programs

# The MySQL server
[wampmysqld]
port        = 3306
socket      = /tmp/mysql.sock
key_buffer = 16M
max_allowed_packet = 1M
table_cache = 64
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M
basedir=c:/wamp/bin/mysql/mysql5.5.24
log-error=c:/wamp/logs/mysql.log
datadir=c:/wamp/bin/mysql/mysql5.5.24/data 
```

从字面上看，我所做的只是打开 phpMyAdmin 并添加了一个新用户

我需要做的是从 phpMyAdmin 中删除两个用户

然后

添加具有完全权限和密码的用户，并使其与 phpMyAdmin config.ini 文件中的内容相匹配

我应该能够从 mysql 命令控制台完成所有这些操作，但我需要一些命令帮助。

如果我可以添加一个用户并将该信息放入 phpMyAdmin config.ini 文件中，我只需要进入它，我就可以修改我需要的内容。

* * *

我今天将 SQL 恢复到中午，这解决了我的问题，但是我遇到这个问题的原因是因为我试图将访问应用程序数据库加载到 sql 中，它一直告诉我我没有访问权限。但是，当我使用相同的凭据登录 phpMyAdmin 时，一切都很好。

# android - 获取互联网 IP 地址

> ID：11926294
> 
> 赞同：-1
> 
> 时间：2012-08-12T22:20:15.063
> 
> 标签：android, linux, ip

我需要获取互联网 IP 地址。现在我想使用 linux 终端来获取它，所以我输入“ifconfig”。我的 android 手机通过 thetering 连接，我注意到“ifconfig”的输出中没有我的互联网 IP 地址。

```
usb0      Link encap:Ethernet  HWaddr 6a:22:38:4d:92:36  
          indirizzo inet:192.168.42.79  Bcast:192.168.42.255  Maschera:255.255.255.0
          indirizzo inet6: fe80::6822:38ff:fe4d:9236/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:31359 errors:4 dropped:0 overruns:0 frame:4
          TX packets:27688 errors:0 dropped:0 overruns:0 carrier:0
          collisioni:0 txqueuelen:1000 
          Byte RX:30033107 (30.0 MB)  Byte TX:4855114 (4.8 MB) 
```

这是命令“ifconfig”的输出。有没有一种通用的方法来获取 IP 地址，通过脚本命令或“c”函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:23:25.770

Here's a Java snippet that might help:

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ipAddress = wifiInfo.getIpAddress(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:18:31.570

下面是通过 Java 代码获取 IP 地址的代码（无论是通过 3G 还是 WIFI 连接）

```
public String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (SocketException ex) {
        Log.e(LOG_TAG, ex.toString());
    }
    return null;
} 
```

参考：[获取你设备的ip地址](http://www.droidnova.com/get-the-ip-address-of-your-device,304.html)

如果你想在 C 中获取 IP 地址，这个线程可能会有所帮助：

[使用 C 代码获取与 ifconfig 相同的信息](https://stackoverflow.com/questions/4951257/using-c-code-to-get-same-info-as-ifconfig?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:07:11.453

你的问题有点含糊。您在寻找什么样的 IP 地址？如果您正在寻找您的 LAN IP，`ifconfig`或者`iwconfig`就足够了。如果您正在寻找 WAN IP 使用

```
wget -qO- http://cmyip.com | grep "我的 IP 地址是"
```

你应该能够看到你的IP。我不知道你使用的安卓终端是否支持`wget`，但值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T02:36:08.510

"inet:" 之后的 IP 地址，即 192.168.42.79 是您的 IP 地址。但是，话虽这么说，最短的python脚本是......

```
#!/usr/bin/python

import socket

s=socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect(('google.com',80))
return s.getsockname()[0] 
```

# c++ - 我们可以将全局静态变量视为全局变量吗

> ID：11926297
> 
> 赞同：2
> 
> 时间：2012-08-12T22:20:26.547
> 
> 标签：c++, global-variables, static-variables

问题是我们可以将变量称为“全局变量”吗？一方面，A 是静态全局变量，因此根据定义它是全局变量，另一方面，全局变量必须在程序的每个点都可用，而不仅仅是在当前翻译单元中。谢谢。

```
#include<stdio.h>

static int A;

void main()
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T22:22:31.870

不，a`static`不是全局的，因为它具有内部链接。定义它的每个 TU 都将存在一个副本。

> 一方面 A 是静态全局变量，所以它是全局定义的

为什么它是静态*全局*变量？是的`static`，是的，但仅此而已。

C++ 中的全局变量是`extern`只声明和定义一次的变量，或者作为`static`成员包含的变量（具有完全不同的含义）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T22:25:14.867

您的变量`A`具有静态存储并在文件范围内定义，并且具有内部链接。术语“全局变量”只是一种口语，不能完全准确地捕捉所有这些细微差别。这个变量肯定是全局的，因为它可以从每个范围访问，它的生命周期是从程序开始到程序结束，但是由于它的内部链接，它不能从声明它的翻译单元之外访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T22:26:11.040

我认为没有一个特定的、广泛使用的术语来表示那些“静态全局变量”。问题是该标准通常从不谈论“全局变量”，但它区分了两个正交概念：

*   变量的生命周期，对于全局变量、“静态全局变量”和`static`局部变量都是一样的；*该标准将它们全部称为“具有静态存储持续时间*的变量”；
*   这些变量的可见性，在所有情况下都是不同的；“全局变量”是在*全局命名空间范围内*定义的具有外部链接的变量；“静态全局变量”在同一范围内定义，但具有内部链接；最后，`static`局部变量具有局部作用域。

将“静态全局变量”称为“全局变量”是否正确？如前所述，该标准从未定义“全局变量”，因此这应该是一个品味问题：它们*是*在全局命名空间范围内定义的，但由于它们具有内部链接，因此在其他模块中无法访问它们。

不过，请记住，*通常*，当谈论 C++ 中的全局变量时，我们指的是在全局命名空间范围内定义的具有外部链接的变量。所以，总而言之，我不会称它们为全局变量，我看到的唯一明确的调用方式是“在具有内部链接的全局命名空间范围内定义的变量”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T22:29:53.283

将其视为一个模块变量，因为它对一个模块（此处意为“翻译单元”）可见，而不是对所有模块可见。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T23:11:20.060

正如其他人所说，这取决于您为什么关心它是“全球性的”。在大型源文件中，静态变量会在函数之间引入难以追踪的耦合，就像非静态函数一样。当然，不同之处在于静态变量仅限于单个源文件，但如果您在该源文件中有数百个函数，您必须费力地找出意外修改的来源从。

# php - 从 cakephp 的视图中访问 admin auth 组件

> ID：11926299
> 
> 赞同：0
> 
> 时间：2012-08-12T22:20:50.303
> 
> 标签：php, mysql, cakephp

我想在我的 default.ctp 页面上显示一个指向管理面板的链接，但前提是用户是管理员。

我正在尝试做这样的事情，但似乎什么都没有发生

```
//default.ctp
if (!empty($role) && ($role == 'admin')) { 
   link here
} 
```

在 appcontroller 的 beforeFilter 功能中，我有以下内容

```
$role = $this->Auth->user('role'); 
    if ($role == 'author' || $role == 'admin') { 
        $this->set('role', $role); 
    } 
```

当我尝试 print_r($admin) 时，会显示管理员角色，但无论出于何种原因，if 语句都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:50:23.497

尝试使用：

```
$this->Session->read('Auth.User.role'); 
```

而是在视图文件中。

您将直接从会话中读取值，而不是设置新变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:27:50.770

您可以尝试在 AppController 的 beforeFilter() 方法中使用以下代码片段：

```
function beforeFilter()
{
     $role = $this->Auth->user('role'); 
     if ($role == 'author' || $role == 'admin') { 
         $this->set('role', $role); 
     } 

     if($role == 'admin')
     {
         $this->set('is_admin', true);
     }
     else
     {
         $this->set('is_admin', false);
     }
    /***** your remaining code *******/ 
```

}

在您看来，只需使用以下内容：

```
 if($is_admin)
 {
      $this->Html->link('Admin Link', 'controllers/view');
 } 
```

# android - 什么会导致 AlarmManager 停止

> ID：11926302
> 
> 赞同：0
> 
> 时间：2012-08-12T22:21:27.847
> 
> 标签：android, alarmmanager

我的应用程序使用a以特定时间间隔`AlarmManager`运行 a 。`Service`有些东西导致`AlarmManager`停止运行，但我很难调试它可能是什么。我听说如果在`Service`this 中抛出异常可能会导致`AlarmManager`停止，但我在`LogCat`.

关于如何调试`AlarmManager`自动停止或可能导致它停止的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:28:40.180

> 我听说如果在服务中引发异常，这可能会导致 AlarmManager 停止，但我在 LogCat 中没有看到任何异常。

我不知道是这种情况。

> 关于如何调试自动停止的 AlarmManager 的任何建议

我会`adb shell dumpsys alarm`用来确认警报真的消失了。

> 或者什么可能导致它停止？

我所知道的唯一三件事会取消闹钟的安排：

*   如果你通过`cancel()`
*   如果设备重新启动
*   如果有人强制停止您的应用程序

当然，完全卸载也会取消安排您的警报。

# visual-studio - F#: Is the Condition attribute not supported in some (or all) tags in .fsproj files?

> ID：11926304
> 
> 赞同：1
> 
> 时间：2012-08-12T22:21:34.457
> 
> 标签：visual-studio, configuration, msbuild, f#, conditional-statements

For an F# project with dual platforms "Xbox 360" and "x86," I have the following in my project file:

```
<ItemGroup Condition="'$(Platform)' == 'Xbox 360'">
    <Reference Include="Arands.ContentTracker.Xbox">
     <HintPath>..\..\..\..\..\..\_Libs\XNA\ContentTracker\ContentTracker\bin\Xbox 360\Release\Arands.ContentTracker.Xbox.dll</HintPath>
    </Reference>
</ItemGroup>
<ItemGroup Condition="'$(Platform)' == 'x86'">
    <Reference Include="Arands.ContentTracker">
    <HintPath>..\..\..\..\..\..\_Libs\XNA\ContentTracker\ContentTracker\bin\x86\Release\Arands.ContentTracker.dll</HintPath>
    </Reference>
</ItemGroup> 
```

For some reason, neither Arands.ContentTracker.dll nor Arands.ContentTracker.Xbox.dll are added as references in my project, regardless of which platform I select (Xbox 360 or x86).

The result is the same with the following:

```
<Reference Condition="'$(Platform)' == 'Xbox 360'" Include="Arands.ContentTracker.Xbox">
    <HintPath>..\..\..\..\..\..\_Libs\XNA\ContentTracker\ContentTracker\bin\Xbox 360\Release\Arands.ContentTracker.Xbox.dll</HintPath>
</Reference>
<Reference Condition="'$(Platform)' == 'x86'" Include="Arands.ContentTracker">
    <HintPath>..\..\..\..\..\..\_Libs\XNA\ContentTracker\ContentTracker\bin\x86\Release\Arands.ContentTracker.dll</HintPath>
</Reference> 
```

Is the `Condition` attribute simply ignored in .fsproj files?

Splitting a project in two sucks. I want the current chosen platform to determine the current configuration and what goes on in a build, not (for example) which project tree I had expanded when I double-clicked a .fs code file in the Solution Explorer. Having multiple projects just to accommodate different platforms has caused me some fairly significant headaches, and even confuses Intellisense (e.g. not identifying `System.Collections.Generic.HashSet` as unavailable when my platform is set to Xbox 360).

UPDATE: I've managed to get it working. My mistake was expecting the Solution Explorer to reflect a change in configuration, e.g. for the References in the F# project to actually show the relevant references, as I'm used to seeing for C# projects with conditional tags. Apparently, F# projects simply display nothing in the References section when there are conditionals involved (unfortunately).

Once I got past the assumption that the Solution Explorer would accurately reflect the relevant assets after a platform change, I was able to focus on other areas of the solution (namely, the Configuration Manager and References to the F# project in the C# projects) that required more attention.

Thanks for your assistance, all! I'd prefer to award the points to Preet Sangha, since it was his question that provided the insight that allowed me to get past the aforementioned assumption.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:28:41.027

`msbuild -v:diag ...`这应该只是一个 MSBuild 的事情，并且应该可以工作......运行以诊断出了什么问题可能很有用；也许项目文件中的内容顺序错误？

# php - Hide non-existing image from page using echo function

> ID：11926305
> 
> 赞同：0
> 
> 时间：2012-08-12T22:21:49.360
> 
> 标签：php, mysql

I have the following line:

```
<td><img src="Photos/<? echo $rows['photo1']; ?>" height="200" /></td> 
```

I don't always have a photo. I would like to hide the image space. It looks like it is broken or if the url is wrong.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:27:52.180

```
<td><?php echo (!empty($rows['photo1']) ? '<img src="Photos/' . $rows['photo1'] . '" height="200" />' : '') ?></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:59:54.600

**要让空白值不`<img>`显示标签，我会使用如下内容：**

```
<?php if (($rows['photo1'] !== "") || ($row['photo1'])) 
      {
       echo "<td><img src='Photos/" . $rows['photo1'] . "' height='200' /></td>";
      }
?> 
```

*if (image is not blank, and it exists) { then, echo the img tag and the variables }*

* * *

**或者，如果您想为空白值显示不同的图像：**

```
<td>
     <img src="Photos/<?php if ($rows['photo1'] !== ""){echo $rows['photo1'];}
                     else {echo "defaultimg.jpg";}?>" height="200" />
</td> 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T22:39:50.010

也许这更符合您的喜好：

```
 <img src="Photos/<? echo $rows['photo1']; ?>" height="200" onerror="this.style.display='none'" /> 
```

它将图像设置为在出现问题（例如 URL 损坏）时不显示。

这样做的好处是避免了三元组，将 PHP 与 HTML 分开，并且无需过多的文档就可以保持清晰。希望能帮助到你。

# java - Log4j vs Logback: concurrent writing to same log?

> ID：11926306
> 
> 赞同：17
> 
> 时间：2012-08-12T22:22:03.073
> 
> 标签：java, web-applications, logging, log4j, logback

I have several web applications running on the same tomcat.

I have two questions:

1- By searching, I understood that when multiple applications are present, logging into the same file might make some problems. Is that the case for multiple applications running on the same web server? Is that also correct when default stdout output is used?

2- In Logback library there is a prudent mode:

> In prudent mode, FileAppender will safely write to the specified file, even in the presence of other FileAppender instances running in different JVMs, potentially running on different hosts. The default value for prudent mode is false.

I want to know if using Logback is only favorable on multiple JVMs or it is also advantageous for multiple we applications running on the same web server? If not, is it identical to log4j in this aspect?

Thanks

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T09:59:27.003

在 log4j 和 logback 中，如果多个`FileAppender`实例写入同一个日志文件，则所述日志文件损坏的风险*很高。*实例是在同一个JVM 上运行还是`FileAppender`在不同的JVM 上运行是无关紧要的，即损坏的风险是相同的。

如文档中所述，在[谨慎模式下](http://logback.qos.ch/manual/appenders.html#prudent)， logback`FileAppender`将避免损坏，即使存在`FileAppender`运行在相同或不同 JVM 中的其他实例，可能在不同主机上运行。默认情况下，谨慎模式被禁用。

控制台不能被破坏，所以这个问题没有实际意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T14:47:32.670

必须澄清一件事：当Log4j 的**不同实例同时****写入同一个文件**时，无论是否在同一个 JVM 中运行，都会出现问题。

使用服务器（和不同的类加载器）时，可以有一个服务器范围的实例或多个 Log4j 实例，具体取决于部署和配置。

1.  看上面。标准输出可能会遇到相同的混合输出问题，但在旋转文件时不会。
2.  Logback 的谨慎模式将解决不同实例（相同或不同 JVM）的并发写入。如果您的配置使用服务器范围的 Log4j 实例，则这方面没有优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T08:48:52.387

使用 Filelocks 从来都不是真正有效/安全的，因此在从不同的 appender/JVM 的工作中记录到同一个文件时，不建议这样做。查看我直接从[logback-appenders-faq](http://logback.qos.ch/manual/appenders.html)获取的配置。

```
<configuration>
  <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <!-- Support multiple-JVM writing to the same log file -->
    <prudent>true</prudent>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>
      <maxHistory>30</maxHistory> 
    </rollingPolicy>

    <encoder>
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
  </appender> 

  <root level="DEBUG">
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

多个 JVM 写入某个统一源的其他选项是**SocketAppenders**和**JDBCAppender**。

JDBCAppender**将来**会被完全替换，**也不推荐**。请参阅 logbacks[邮件列表](http://mailman.qos.ch/pipermail/logback-user/2011-October/002607.html)。

SocketAppenders 可能有点原始，因为您可能不打算为 logback 编写太多代码。

**还有一种选择。你可以使用类似[clusterlog](http://www.clusterlog.net)的东西，它已经被构建来解决你遇到的问题。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T22:51:21.633

1.  是的。一般来说，您的原则应该是为每个应用程序（Web 或非 Web）编写不同的日志文件。另一种方法是让服务器决定要写入的文件。JBoss 有办法一般注销，这将转到同一个文件。但是，我仍然更喜欢为每个应用程序设置一个单独的日志。
2.  据我所知，log4j 和 Logback 的目标都是尽量减少它们可能导致应用程序的开销，因此不太可能有一个更有利的。如果多个 JVM 对你来说是必不可少的，我相信 Logback 更擅长处理它，但在这之外使用它也不是一个坏主意。

# c++ - 超出范围时停止 std::vector 调用 d'tors

> ID：11926313
> 
> 赞同：0
> 
> 时间：2012-08-12T22:22:31.840
> 
> 标签：c++, stl

我正在将一些 Java 移植到 C++ 并且相当天真地开始使用`std::vector`.

这是我的问题。我有一个对象存储库，稍后我将需要该存储库中满足某些条件的对象列表。目前我正在将它们读入一个临时的`std::vector`. 事实证明，当这个临时对象超出范围时，`delete`它的内容就会消失，当然这会导致存储库中的指针悬空。

这是我目前的“解决方法”，我觉得特别恶心。

```
#define NULLIFY(aParam) \
{ \
    for (size_t i = 0; i < aParam.size(); i++) { \
        aParam[i] = NULL; \
    } \
}

typedef std::vector<Object*> TObjectVector;

int main(int argc, char* argv[])
{
    PopulateRepository(); // repository uses std::set

    TObjectVector subset;
    Repository.GetConditionSatisfyingObjects(subset);
    DoSomething(subset);

    NULLIFY(subset); // Stop destruction of the objects.
} 
```

我对其他想法持开放态度。我最初确实使用原始指针和动态分配来处理它，但我想看看使用 STL 是否可以加快速度，因为我需要传递的参数更少。该程序是多线程的，并且占用大量 CPU。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T22:23:58.383

如果您有一个指针向量，例如`std::vector<Object*>`，则*不会*调用`Object`析构函数。

 *如果您有一个对象向量，例如`std::vector<Object>`，那么您将存储“放入”向量中的任何内容的*副本。*所以我不确定悬空指针来自哪里。*

# mysql - mysql连接表，查询只返回匹配行的行

> ID：11926315
> 
> 赞同：2
> 
> 时间：2012-08-12T22:23:06.987
> 
> 标签：mysql, join

目前我有这个mysql：

```
$result = mysql_query("SELECT blog.id, blog_comments.cid, blog.name,
  blog.blogtext, blog.date, blog.like, blog.dislike, blog_comments.comment, blog_comments.date
FROM blog, blog_comments  
WHERE blog.id = blog_comments.cid   
ORDER BY blog.id DESC LIMIT 30") 
```

该查询返回行及其注释，问题是：它只返回带有注释的行，它不返回没有注释的行。我找到了一些主题，并发现我可能应该使用`FULL OUTER JOIN`. 现在我试图应用这个，没有成功。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:25:11.883

而不是一个隐式连接（逗号分隔的表列表产生一个[`INNER JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)），使用一个显式的[`LEFT JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)：

```
SELECT 
  blog.id,
  blog_comments.cid,
  blog.name,
  blog.blogtext,
  blog.date, 
  blog.like, 
  blog.dislike, 
  blog_comments.comment, 
  blog_comments.date
FROM 
 blog
 /* LEFT JOIN will return rows from blog (the "left" side of the join) even if no 
    related rows exist in blog_comments (the "right" side of the join) */
 LEFT JOIN blog_comments ON blog.id = blog_comments.cid   
ORDER BY blog.id DESC
LIMIT 30 
```

# primes - 计算素数时堆栈空间溢出

> ID：11926317
> 
> 赞同：4
> 
> 时间：2012-08-12T22:23:36.507
> 
> 标签：primes, haskell

我正在研究 Real World Haskell（我在第 4 章），为了练习一些书外知识，我创建了以下程序来计算第 n 个素数。

```
import System.Environment

isPrime primes test = loop primes test
    where
        loop (p:primes) test
            | test `mod` p == 0 = False
            | p * p > test = True
            | otherwise = loop primes test

primes = [2, 3] ++ loop [2, 3] 5
    where 
        loop primes test
            | isPrime primes test = test:(loop primes' test')
            | otherwise = test' `seq` (loop primes test')
            where
               test' = test + 2
               primes' = primes ++ [test]

main :: IO()
main = do
    args <- getArgs
    print(last  (take (read (head args) :: Int) primes)) 
```

显然，因为我保存了一个素数列表，所以这不是一个恒定的空间解决方案。问题是当我尝试获得一个非常大的素数时说`./primes 1000000`我收到错误：

```
 Stack space overflow: current size 8388608 bytes.
    Use `+RTS -Ksize -RTS' to increase 
```

我相当确定我的尾递归是正确的；阅读[http://www.haskell.org/haskellwiki/Stack_overflow](http://www.haskell.org/haskellwiki/Stack_overflow)和这里的各种回复让我相信这是懒惰评估的副产品，并且 thunk 正在积累直到它溢出，但到目前为止我一直没有成功修复它。我试过`seq`在各个地方使用强制评估，但没有效果。我在正确的轨道上吗？还有什么我没有得到的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T00:19:02.897

正如我在评论中所说，您不应该通过将单个元素列表附加到非常长的列表（您的行`primes' = primes ++ [test]`）的末尾来构建列表。最好只定义无限列表，`primes`然后让惰性求值来完成。类似于下面的代码：

```
primes = [2, 3] ++ loop 5
    where.
        loop test
            | isPrime primes test = test:(loop test')
            | otherwise = test' `seq` (loop test')
            where
                test' = test + 2 
```

显然，您不需要对`isPrime`函数进行参数化`primes`，但这只是一个小问题。此外，当您知道所有数字都是正数时，您应该使用`rem`而不是`mod`- 这会导致我的机器上的性能提高 30%（当找到第百万个素数时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:10:48.547

首先，这里没有尾递归，而是有*保护*的递归，也就是[尾递归模 cons](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)。

正如其他人所评论的那样，你得到堆栈溢出的原因是一个 thunk 堆积。但是哪里？一个建议的罪魁祸首是您使用`(++)`. 虽然不是最优的，但使用`(++)`不一定会导致 thunk 堆积和堆栈溢出。例如，调用

```
take 2 $ filter (isPrime primes) [15485860..] 
```

应该立即产生`[15485863,15485867]`，并且没有任何堆栈溢出。但它仍然是使用相同的代码`(++)`，对吧？

问题是，**你有*两个*你调用的列表`primes`**。一个（在顶层）是无限的，通过受保护（不是尾）递归共同递归产生的。另一个（ 的参数`loop`）是一个有限列表，通过将每个新发现的素数添加到其末尾来构建，用于测试。

但是当它用于测试时，它不会被强制完成。如果发生这种情况，就不会有 SO 问题。**它只是强制通过`sqrt`一个测试号**。所以`(++)`thunks 确实会超过那个点。

当`isPrime primes 15485863`被调用时，它会强制顶层`primes`达到`3935`，即 547 个素数。内部测试素数列表也包含 547 个素数，其中只有前 19 个是强制的。

但是，当您调用 时`primes !! 1000000`，在重复的内部列表中的 1,000,000 个素数中，只有 547 个是强制的。其余的都在 thunks 中。

如果您仅在候选中看到它们的*正方形*`testing-primes`时才将新素数添加到列表的末尾，则列表将始终被强制完全或接近其末尾，并且不会出现导致 SO 的 thunk 堆积。并且当下一次访问强制该列表到其末尾并且没有留下任何thunk时，将 with 附加到*强制列表的末尾并不是那么糟糕。*（它仍然会复制列表。）*`testing-primes``(++)`*

 **当然，可以直接使用顶级`primes`列表，正如 Thomas M. DuBuisson 在他的回答中所显示的那样。

但是内部列表有它的用途。正确实施时，仅当在候选中看到它们的正方形时才向其添加新素数，当使用优化编译时，它可能允许您的程序在**`O(sqrt(n))`空间中运行。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:28:49.870

您可能应该检查以下两个问题：

1.  [如何使用 runhaskell 增加堆栈大小？](https://stackoverflow.com/questions/275250/how-can-i-increase-the-stack-size-with-runhaskell)
2.  [如何避免堆栈空间溢出？](https://stackoverflow.com/questions/6455898/how-to-avoid-stack-space-overflows)**

# php - str_replace this character: ö

> ID：11926320
> 
> 赞同：1
> 
> 时间：2012-08-12T22:23:39.903
> 
> 标签：php, codeigniter, encoding, str-replace

I am trying to do a str_replace on the following line:

```
team 4 -1ööööö57167168 
```

I've been able to do it in the past just by doing this:

```
str_replace("ööööö", " ",trim($line)); 
```

The desired outcome should be `team 4 -1 57167168`

However, now that I'm trying to do it in a Codeigniter application, it fails to replace it and I'm not sure what to try.

Is this an encoding config issue with Codeigniter? How can I get it to replace correctly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:37:07.183

在此处查看多字节字符串函数[http://php.net/manual/en/ref.mbstring.php](http://php.net/manual/en/ref.mbstring.php)，特别是 mb_str_replace。

请注意，ö 可以用多个字符集表示，因此请确保匹配正确的字符集！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-12T22:33:12.383

使用 utf8_encode() 和 utf8_decode()，PHP 不是 UTF8 原生语言！

# objective-c - 不从 NSDate 中删除时间组件

> ID：11926322
> 
> 赞同：0
> 
> 时间：2012-08-12T22:23:40.607
> 
> 标签：objective-c, nsdate, nsdatecomponents

例如，我需要从 NSDate 中删除时间组件：我的值为 '2012-08-12 22:15:54 +00000' 但我得到的值为 '2012-08-12 03:00:00 +00000'

我正在使用的代码是：

```
NSDate* getNDateOfWeek(int week, int day) {

    NSDate *now = [NSDate date];
    NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    calendar.timeZone = [NSTimeZone systemTimeZone];
    unsigned unitFlags = NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit;
    NSDateComponents *comp = [calendar components:unitFlags fromDate:now];
    [comp setWeekday:day];
    [comp setWeek: week];
    [comp setHour:0];
    NSDate *resultDate = [calendar dateFromComponents:comp];
    return resultDate;

} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:54:44.723

您可能正在尝试获得不同的结果，但如果您只是在寻找“今天”日期，那么类似以下内容呢：

```
// Output -> 'Mon, Jan 16, 2012'
- (NSString *)todaysDate
{
   NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
   [dateFormat setDateFormat:@"EEE MMM d Y"];    
   return [dateFormat stringFromDate:[[NSDate alloc] init]];
} 
```

# mysql - 外键约束因“在 [table] 上创建外键时出错（检查数据类型）”而失败

> ID：11926324
> 
> 赞同：8
> 
> 时间：2012-08-12T22:23:43.077
> 
> 标签：mysql

以下查询失败并出现错误“在城市创建外键时出错（检查数据类型）”：

```
ALTER TABLE  `hotels` ADD FOREIGN KEY (  `city` )
REFERENCES  `mydatabase`.`cities` (`id`)
ON DELETE CASCADE ON UPDATE CASCADE ; 
```

基本上我想在 city.id 和hotels.city 之间建立一对多的关系。

这是两张表：

```
CREATE TABLE IF NOT EXISTS `cities` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `hotels` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `city` (`city`)
) ENGINE=InnoDB; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-12T22:26:44.957

数据类型需要匹配：

```
cities.id int(11)
hotels.city bigint(20) 
```

需要成为：

```
cities.id bigint(20)
hotels.city bigint(20) 
```

或者：

```
cities.id int(11)
hotels.city int(11) 
```

取决于您的应用程序需要什么。

另外值得一提的是，两者都需要签名或未签名。

`OPTIMIZE`在更改数据类型以匹配后，您可能需要对表进行匹配。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-06T05:53:00.630

我正在使用 phpMyAdmin，并尝试使用关系视图在不同的表上创建多个索引。但是，我得到了同样的错误，说数据类型不匹配。但是，原因确实是我为多个关系提供了相同的外键名称，并且由于名称重复，mysql 抛出了这个错误。所以重命名你的关系，它应该可以正常工作。

[![关系视图中的外键添加](../Images/cde52f445d7c849f903231c95e71b953.png)](https://i.stack.imgur.com/HJHmw.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-07-30T15:07:31.553

我知道这是一个相当古老的线程，但我也花了一些时间处理这个错误。

我遇到的情况如下：

`Table 1: administrations (Primary key: AdministrationId) Table 2: invoices (Foreign key to AdministrationId) Table 3: users (error pops up while creating foreign key)`

`AdministrationId`my`invoices`和table 中的 colomns都与 table 中的列`users`类型相同。`AdministrationId``administrations`

我这边的错误是我试图创建一个`administration_id`在我的`users`表中调用的外键。但在那之前一分钟，我已经在我的`invoices`表中创建了一个外键，也称为`administration_id`. 当我试图给外键起另一个名字时，效果很好。

因此，请记住正确命名您的外键（例如，在它们前面加上表名，例如：`invoices_administration_id`和`users_administration_id`）。**同名的多个外键可能不存在（在同一个数据库中）。**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-05T19:41:00.783

我知道这个问题已经得到解答，我知道这个问题很老了。但是，我刚刚遇到了同样的错误，但原因不同，并且由于这是此错误的最佳结果，我想我会将这些信息放在这里供我自己将来使用以及之后发生的任何其他人使用我。

我的专栏都是 bigint 和 unsigned。但是，在首先创建引用表之后，我接着更改了主键列的名称。它没有其他任何改变，但我无法创建外键关系。我最终删除了引用的表并使用我想要的列名重新创建它们，并且我能够创建外键关系。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-14T11:56:45.420

值得一提，但两个表之间的排序规则应该相同

我在两个表中都遇到了 varchar(64) 字段的相同问题，我花了一些时间来确定问题来自排序字段，这在两个表字段之间不一样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-23T07:56:20.763

更新`hotels.city`为`unsigned`我工作。因为`cities.id`是`unsigned`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-29T06:25:26.450

更新数据类型`cities.id` `bigint(20)`和`hotels.city` `bigint(20)` OR 更新数据类型`cities.id` `int(11)`和`hotels.city` `int(11)` AND 更新`hotels.city`到`unsigned`因为`cities.id`是`unsigned`。

# php - 我无法在 php 中设置这些 Cookie

> ID：11926329
> 
> 赞同：0
> 
> 时间：2012-08-12T22:24:20.523
> 
> 标签：php, cookies, session-variables

> **可能重复：**
> [PHP 无法读取 cookie？](https://stackoverflow.com/questions/6321928/php-cant-read-cookies)

我正在向我的网页添加登录并记住我功能。我正在使用 $_SESSION 变量和 $_COOKIE 变量，但我无法使用 setcookie() 设置 cookie。我通过 www.phpcodechecker.com 运行了代码，没有发现任何错误。我的浏览器（Chrome 和 IE）设置为接受 cookie。无论我做什么，这些 cookie 都不会设置。有人可以帮我吗？

```
<?php

$page_title = 'Log In';
$css_link = 'login.css';
require_once('includes/db_connection.php');
require_once('includes/header.php');
require_once('includes/navlinks.php');

// Start the session
  require_once('includes/startsession.php');

  // Clear the error message
  $error = '';

  // If the user isn't logged in, try to log them in
  if (!isset($_SESSION['beecharmer_user_id'])) {
    if (isset($_POST['submit'])) {
      // Connect to the database
      $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
  // Grab the user-entered log-in data
  $username = mysqli_real_escape_string($dbc, trim($_POST['username']));
  $password = mysqli_real_escape_string($dbc, trim($_POST['password']));

  if (!empty($username) && !empty($password)) {
    // Look up the username and password in the database
    $query = "SELECT salt FROM beecharmer_user WHERE username = '$username'";
    $data = mysqli_query($dbc, $query);
    $row = mysqli_fetch_array($data);
    $password_salt = hash("sha512", $password.$row['salt']);
    $query = "SELECT user_id, username, access_level FROM beecharmer_user WHERE username = '$username' AND password = '$password_salt'";
    $data = mysqli_query($dbc, $query);

    if (mysqli_num_rows($data) == 1) {
      // The log-in is OK so set the user ID and username session vars (and cookies), and redirect to the home page
      $row = mysqli_fetch_array($data);
      $_SESSION['beecharmer_user_id'] = $row['user_id'];
      $_SESSION['beecharmer_username'] = $row['username'];
      $_SESSION['beecharmer_access_level'] = $row['access_level'];
      setcookie('beecharmer_user_id', $row['user_id'], time() + 525960);    // expires in 365.25 days
      setcookie('beecharmer_username', $row['username'], time() + 525960);  // expires in 365.25 days
      setcookie('beecharmer_access_level', $row['access_level'], time() + 525960);  // expires in 365.25 days

      // The next 4 lins just show what vars are set and what vars are not set.
      // They serve no other purpose.
      echo ('These are cookies '.$_COOKIE['beecharmer_user_id'].' '.$_COOKIE['beecharmer_username'].' '.$_COOKIE['beecharmer_access_level'].'<br/>');
      echo ('these are session vars '.$_SESSION['beecharmer_user_id'].' '.$_SESSION['beecharmer_username'].' '.$_SESSION['beecharmer_access_level'].'<br/>');
      echo ('These are query vars '.$row['user_id'].' '.$row['username'].' '.$row['access_level']);
      echo ($row['user_id'].' '.$row['username'].' '.$row['access_level']);

      $home_url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/index.php';
      //header('Location: ' . $home_url);
    }
    else {
      // The username/password are incorrect so set an error message
      $error = 'Sorry, you must enter a valid username and password to log in.';
    }
  }
  else {
    // The username/password weren't entered so set an error message
    $error_msg = 'Sorry, you must enter your username and password to log in.';
  }
}

 }  
?>

<div class= "info">
<?php
    // If the session var is empty, show any error message and the log-in form; otherwise confirm the log-in
    if (empty($_SESSION['beecharmer_user_id'])) {
        echo '<p class="error">' . $error . '</p>';
    }else {
        // Confirm the successful log-in
        echo('<p class="login">You are logged in as ' . $_SESSION['beecharmer_username'] . '.</p>');
    }
?>
  <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <fieldset>
      <legend>Log In</legend>
      <label for="username">Username:</label>
      <input type="text" name="username" value="<?php if (!empty($username)) echo $username; ?>" /><br />
      <label for="password">Password:</label>
      <input type="password" name="password" />
    </fieldset>
    <input type="submit" value="Log In" name="submit" />
  </form>
  <?php //if (isset($_SESSION['beecharmer_user_id'])) echo $_COOKIE['beecharmer_username'].' '.$_COOKIE['beecharmer_access_level']; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:33:11.887

我不知道是不是你的情况，但`setcookie`必须在任何输出到浏览器之前出现（包括`echo`<?php ... ?> 之外的 HTML 代码）。确保你没有在他们之前输出任何东西。这是因为 HTTP 标头必须位于响应正文之前。您发布的页面似乎并不完整（它只是一个 div），所以我看不出是不是这种情况，但您可能在 PHP 代码之前发送了 HTML <head>。

此外，正如 Petra 所说，`$_COOKIE`在页面请求时加载，因此设置的新 cookie`setcookie`尚未存储在其中，但它们仅在下一页请求时到达那里。

# asp.net-mvc-3 - DropDownListFor doesn't display selected item

> ID：11926331
> 
> 赞同：0
> 
> 时间：2012-08-12T22:24:47.840
> 
> 标签：asp.net-mvc-3, razor, html.dropdownlistfor

I'm trying to get the drop down list to have my item selected when there is an item, but it never does. I've Googled this and tried many different methods, but they all seem to use a ViewModel containing the list instead of using ViewBag, but I would like to stick to the ViewBag if possible.

My controller:

```
 [HttpGet]
    public ActionResult Index(int? id)
    {
        ViewBag.SelectList = new SelectList(rep.GetItemList(), "id", "type");
        if (id.HasValue)
        {
            var model = rep.GetItemByID(id.Value);
            if ( model != null )
            {
                return View(model);
            }
        }
        return View();
    } 
```

My View:

```
 <div class="editor-field">
        @Html.DropDownListFor(model => model.itemID, (SelectList)ViewBag.SelectList)
        @Html.ValidationMessageFor(model => model.itemID)
    </div> 
```

This doesn't have my item selected in the DropDownList, and I've also tried having a list in the ViewBag and then constructing the SelectList in the View, which some posts say should solve the problem:

```
 <div class="editor-field">
        @Html.DropDownListFor(model => model.itemID, new SelectList(ViewBag.SelectList, "id", "type", Model.itemID))
        @Html.ValidationMessageFor(model => model.itemID)
    </div> 
```

But none of it seems to work. So I was wondering if there is anyone where that is able to spot what I'm doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:48:55.127

我会尝试从一开始就设置选定的值，因为 SelectList 是不可变的。

```
 [HttpGet]
        public ActionResult Index(int? id)
        {
            if (id.HasValue)
            {
                ViewBag.SelectList = new SelectList(rep.GetItemList(), "id", "type", id );
                var model = rep.GetItemByID(id.Value);
                if ( model != null )
                {
                    return View(model);
                }
            }
            else
            {
                ViewBag.SelectList = new SelectList(rep.GetItemList(), "id", "type");
            }
            return View();
        } 
```

在您的视图中像这样使用它：

```
@Html.DropDownListFor(model => model.itemID, (SelectList)ViewBag.SelectList, "Please select...") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:33:50.943

确保您的`itemID`属性设置在您传递给视图的模型中

```
if (id.HasValue)
        {
            var model = rep.GetItemByID(id.Value);
            model.itemID=id.Value;
            return View(model);
        } 
```

# javascript - Text edit toolbar solution (js), with low-level customization?

> ID：11926332
> 
> 赞同：0
> 
> 时间：2012-08-12T22:24:49.857
> 
> 标签：javascript, user-interface, textbox, toolbar

I'm looking for a js text edit toolbar, which allows for customization of base functions.

The best example is: Our platform employs a custom text parsing engine, and we use custom tags. Custom tags, even for basics like bold, etc. Therefore, I will need to change existing base formatting buttons to use our tags as opposed to html.

I have not been able to locate a solution, which allows the customization of these basic buttons. I can, of course use something mainstream, and rebuild all the base functionality in custom buttons. However, before doing that, I want to make sure there is not something already available.

Do you know of a solution which supports low level customization?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:33:31.980

你可以看看这个：[https ://github.com/bergie/hallo](https://github.com/bergie/hallo)

# java - How to organize source files of Java program?

> ID：11926334
> 
> 赞同：2
> 
> 时间：2012-08-12T22:25:10.210
> 
> 标签：java, resources, jar, exe, project-organization

I've created small program in `Java`. It uses Java classes, some images and generates some other resources (`.php` files, images, stylesheets etc).

I'm compiling sources as `.jar` and creating an `.exe` program, which should use my `.jar` and other resources.

What is the best practice to organize all sources of my Java program?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T22:29:38.243

即使您不使用 maven，我也会推荐以下 maven 结构作为[标准约定。](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

```
src/main/java   Application/Library sources
src/main/resources  Application/Library resources
src/main/filters    Resource filter files
src/main/assembly   Assembly descriptors
src/main/config Configuration files
src/main/scripts    Application/Library scripts
src/main/webapp Web application sources
src/test/java   Test sources
src/test/resources  Test resources
src/test/filters    Test resource filter files
src/site    Site
LICENSE.txt Project's license
NOTICE.txt  Notices and attributions required by libraries that the project depends on
README.txt  Project's readme 
```

# c++ - How to pass a C++ object to another C++ object with Boost.Python

> ID：11926340
> 
> 赞同：8
> 
> 时间：2012-08-12T22:25:42.403
> 
> 标签：c++, python, boost, boost-python

I have some C++ code that defines two classes, A and B. B takes an instance of A during construction. I have wrapped A with Boost.Python so that Python can create instances of A, as well as subclasses. I want to do the same with B.

```
class A {
    public:
        A(long n, long x, long y) : _n(n), _x(x), _y(y) {};
        long get_n() { return _n; }
        long get_x() { return _x; }
        long get_y() { return _y; }
    private:
        long _n, _x, _y;
};

class B {
    public:
        B(A a) : _a(a) {};
        doSomething() { ... };
    private:
        A _a;
}; 
```

While wrapping B, I needed to work out how to pass an instance of A to B's constructor. I did some digging and the [solution](http://misspent.wordpress.com/2009/09/27/how-to-write-boost-python-converters/) I found was to write a "converter" class:

```
struct A_from_python_A {
    static void * convertible(PyObject* obj_ptr) {
        // assume it is, for now...
        return obj_ptr;
    }

    // Convert obj_ptr into an A instance
    static void construct(PyObject* obj_ptr,
                      boost::python::converter::rvalue_from_python_stage1_data* data) {
        // extract 'n':
        PyObject * n_ptr = PyObject_CallMethod(obj_ptr, (char*)"get_n", (char*)"()");
        long n_val = 0;
        if (n_ptr == NULL) {
            cout << "... an exception occurred (get_n) ..." << endl;
        } else {
            n_val = PyInt_AsLong(n_ptr);
            Py_DECREF(n_ptr);
        }

        // [snip] - also do the same for x, y

        // Grab pointer to memory into which to construct the new A
        void* storage = (
            (boost::python::converter::rvalue_from_python_storage<A>*)
            data)->storage.bytes;

        // in-place construct the new A using the data
        // extracted from the python object
        new (storage) A(n_val, x_val, y_val);

        // Stash the memory chunk pointer for later use by boost.python
        data->convertible = storage;
    }

    // register converter functions
    A_from_python_A() {
        boost::python::converter::registry::push_back(
            &convertible,
            &construct,
            boost::python::type_id<A>());
    }
}; 
```

Then I register this with:

```
BOOST_PYTHON_MODULE(interpolation_ext)
{
    // register the from-python converter for A
    A_from_python_A();

    class_<A>("A", init<long, long, long>())
        ;

    class_<B>("B", init<object>())
        ;
} 
```

Convertible and construct are methods that answer the "is this convertible?" and "how to convert?" questions respectively. I have observed that the construct() method is non-trivial - it has to reach into A's PyObject*, extract all relevant fields, then rebuild a C++ instance that it then passes to B's constructor. Because A contains some private fields, it has to do this via public access mechanisms (whereas with a pure Python object it wouldn't have to, right?). This seems to work.

However, *is the field extraction in the 'construct' function really necessary?* It seems laborious. If A is a compound object, it could get very complicated, and possibly require one converter to invoke another. I perhaps understand the requirement if A is a Python class, but if the A instance originated from the C++ side, is there a way to determine that this is the case, and then simply get a handle (e.g. pointer) to this 'native' object, as a shortcut?

Here's the associated python code:

```
from my_ext import A, B
a = A(1,2,3)
b = B(a)
b.doSomething() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T20:43:28.920

简而言之，将`B`'s 包装器定义为：

```
class_<B>( "B", init< A >() ) 
```

代替

```
class_<B>( "B", init< object >() ) 
```

在 Boost.Python（至少在 1.50 中）为类定义包装器时，`class_`模板会生成转换和构造函数。这允许`A`转换为 a`A`的包装器并从其构造。这些`PyObject`转换具有严格的类型检查，并要求在 python 中满足以下条件：`isinstance( obj, A )`.

自定义转换器通常用于支持：

*   与现有 Python 类型的自动转换。例如，转换`std::pair< long, long >`为和从`PyTupleObject`.
*   鸭打字。例如，`B`接受`D`不是从 派生的类，`A`只要`D`提供兼容的接口即可。

* * *

### `B`从一个实例构造`A`

由于既不是现有的 Python 类型`A`，`B`也不需要鸭子类型，因此不需要自定义转换器。要`B`获取 的实例`A`，可以像指定`init`获取`A`.

这是 and 的简化示例`A`，`B`其中`B`可以从`A`.

```
class A
{
public:
  A( long n ) : n_( n ) {};
  long n() { return n_; }
private:
  long n_;
};

class B
{
public:
  B( A a ) : a_( a ) {};
  long doSomething() { return a_.n() * 2; }
private:
  A a_;
}; 
```

包装器将被定义为：

```
using namespace boost::python;
BOOST_PYTHON_MODULE(example)
{
  class_< A >( "A", init< long >() )
    ;

  class_<B>( "B", init< A >() )
    .def( "doSomething", &B::doSomething )
    ;
} 
```

`B`的包装器明确表明它将`A`通过`init< A >()`. 此外，`A`的接口没有完全暴露给 Python 对象，因为没有为`A::n()`函数定义包装器。

```
>>> from example import A, B
>>> a = A( 1 )
>>> b = B( a )
>>> b.doSomething()
2 
```

这也适用于派生自`A`. 例如：

```
>>> from example import A, B
>>> class C( A ):
...     def __init__( self, n ):
...         A.__init__( self, n )
... 
>>> c = C( 2 )
>>> b = B( c )
>>> b.doSomething()
4 
```

但是，未启用鸭子类型。

```
>>> from example import A, B
>>> class E: pass
... 
>>> e = E()
>>> b = B( e )
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Boost.Python.ArgumentError: Python argument types in
    B.__init__(B, instance)
did not match C++ signature:
    __init__(_object*, A) 
```

* * *

### `B`从可转换为 的对象构造`A`。

`B`为了支持可以从提供兼容接口的对象构造的情况，需要自定义转换器。`A::n()`尽管之前没有`A`为.`get_num()``int`

首先，编写一个`A_from_python`提供转换器和构造函数的结构。

```
struct A_from_python
{
  static void* convertible( PyObject* obj_ptr )
  {
    // assume it is, for now...
    return obj_ptr;
  }

  // Convert obj_ptr into an A instance
  static void construct(
    PyObject* obj_ptr,
    boost::python::converter::rvalue_from_python_stage1_data* data)
  {
    std::cout << "constructing A from ";
    PyObject_Print( obj_ptr, stdout, 0 );
    std::cout << std::endl;

    // Obtain a handle to the 'get_num' method on the python object.
    // If it does not exists, then throw.
    PyObject* n_ptr = 
      boost::python::expect_non_null( 
        PyObject_CallMethod( obj_ptr,
                             (char*)"get_num",
                             (char*)"()"  ));

    long n_val = 0;
    n_val = PyInt_AsLong( n_ptr );
    Py_DECREF( n_ptr );

    // Grab pointer to memory into which to construct the new A
    void* storage = (
      (boost::python::converter::rvalue_from_python_storage< A >*)
       data)->storage.bytes;

    // in-place construct the new A using the data
    // extracted from the python object
    new ( storage ) A( n_val );

    // Stash the memory chunk pointer for later use by boost.python
    data->convertible = storage;
  }

  A_from_python()
  {
    boost::python::converter::registry::push_back(
      &convertible,
      &construct,
      boost::python::type_id< A >() );
  }
}; 
```

`boost::python::expect_non_null`如果返回则用于抛出异常`NULL`。这有助于提供 python 对象必须提供方法的鸭式保证`get_num`。如果`PyObject`已知 是给定类型的实例，则可以使用[`boost::python::api::handle`](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/handle.html)并[`boost::python::api::object`](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/object.html)直接提取该类型，而不必通过`PyObject`接口进行一般性调用。

接下来，在模块中注册转换器。

```
using namespace boost::python;
BOOST_PYTHON_MODULE(example)
{
  // register the from-python converter for A
  A_from_python();

  class_< A >( "A", init< long >() )
    ;

  class_<B>( "B", init< A >() )
    .def( "doSomething", &B::doSomething )
    ;
} 
```

`A`、`B`或其关联的包装器定义未发生任何更改。创建了自动转换函数，然后在模块中定义/注册。

```
>>> from example import A, B
>>> a = A( 4 )
>>> b = B( a )
>>> b.doSomething()
8
>>> class D:
...     def __init__( self, n ):
...         self.n = n
...     def get_num( self ):
...         return self.n
... 
>>> d = D( 5 )
>>> b = B( d )
constructing A from <__main__.D instance at 0xb7f7340c>
>>> b.doSomething()
10
>>> class E: pass
...
>>> e = E()
>>> b = B( e )
constructing A from <__main__.E instance at 0xb7f7520c>
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: get_num 
```

`D::get_num()`存在，因此`A`是从`D`when`D`传递给构造函数的实例`B`构造的。但是，`E::get_num()`不存在，并且在尝试`A`从 的实例构造时引发异常`E`。

* * *

### 另一种转换解决方案。

对于较大的类型，通过 C-API 实现鸭子类型可能会变得非常复杂。另一种解决方案是在 python 中执行鸭子类型，并将 python 文件与库一起分发。

`example_ext.py`将导入`A`and`B`类型，以及 monkey patch`B`的构造函数：

```
from example import A, B

def monkey_patch_B():
    # Store handle to original init provided by Boost.
    original_init = B.__init__

    # Construct an A object via duck-typing.
    def construct_A( obj ):
        return A( obj.get_num() )

    # Create a new init that will delegate to the original init.
    def new_init( self, obj ):
        # If obj is an instance of A, use it.  Otherwise, construct
        # an instance of A from object.
        a = obj if isinstance( obj, A ) else construct_A ( obj )

        # Delegate to the original init.
        return original_init( self, a )

    # Rebind the new_init.
    B.__init__ = new_init

monkey_patch_B() 
```

最终用户所需的唯一更改是导入`example_ext`而不是`example`：

```
>>> from example_ext import A, B
>>> a = A( 6 )
>>> b = B( a )
>>> b.doSomething()
12
>>> class D:
...     def __init__( self, n ):
...         self.n = n
...     def get_num( self ):
...         return self.n
... 
>>> d = D( 7 )
>>> b = B( d )
>>> b.doSomething()
14
>>> class E: pass
... 
>>> e = E()
>>> b = B( e )
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "example_ext.py", line 15, in new_init
    a = obj if isinstance( obj, A ) else construct_A ( obj )
  File "example_ext.py", line 9, in construct_A
    return A( obj.get_num() )
AttributeError: E instance has no attribute 'get_num' 
```

由于修补的构造函数保证`A`将传递给的实例`B`，因此`A_from_python::construct`不会调用 。因此，输出中缺少打印语句。

虽然这种方法避免了 C-API，从而更容易执行鸭式打字，但它确实有一个主要的权衡，因为它需要专门为转换的部分 API 打补丁。另一方面，当自动类型转换功能可用时，不需要打补丁。

* * *

此外，无论如何，C++ 和 Python 中的访问控制都是为了防止意外误用。两者都不能防止故意获取对具有私人可见性的成员的访问权限。在 Python 中执行起来要容易得多，但在 C++ 标准中通过显式模板实例化特别允许这样做。

# apache - .htaccess "Allow from env" 禁用 SSLRequire

> ID：11926352
> 
> 赞同：0
> 
> 时间：2012-08-12T22:27:46.203
> 
> 标签：apache, .htaccess

使用 Apache，我在一个文件夹上强制使用 HTTPS：

```
SSLOptions +StrictRequire
SSLRequireSSL
SSLRequire %{HTTP_HOST} eq "www.example.com"
ErrorDocument 403 https://www.example.com/admin/ 
```

我使用 Apache AuthBasic 保护文件夹：

```
AuthType Basic
AuthName "Administration"
AuthUserFile /path/to/my/.htpasswd
Require valid-user
Satisfy all 
```

像这样，密码总是通过 HTTPS 发送。它运行良好，但后来我尝试禁用单个 URL 的身份验证：

```
SetEnvIf Request_URI "crm/index\.php$" removeme_uri
Order deny,allow
Deny from all
Allow from env=removeme_uri
Satisfy any 
```

此 URL 不要求进行身份验证，而其他 URL 则要求。所以一切都很好，但是不再需要 HTTPS，并且可以明文发送密码！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:07:36.563

感谢乔恩的回答，我可以尝试不同的解决方案。我发现[了这个问题](https://stackoverflow.com/questions/1431378/how-to-remove-htaccess-password-protection-from-a-subdirectory)并将答案应用于我的情况：

在主目录中， .htaccess 包含

```
SSLOptions +StrictRequire
SSLRequireSSL
SSLRequire %{HTTP_HOST} eq "www.example.com"
ErrorDocument 403 https://www.example.com/admin/

AuthType Basic
AuthName "Administration"
AuthUserFile /path/to/my/.htpasswd
Require valid-user
Satisfy all 
```

在`crm`子目录中， .htaccess 有：

```
<FilesMatch "index\.php">
    Allow from all
    Satisfy any
</FilesMatch> 
```

它在任何情况下都强制使用 SSL，并允许访问`crm/index.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:26:06.117

这有点奇怪，因为该`Satisfy`指令会影响访问限制，即使`SSLRequireSSL`and`SSLRequire`影响 SSL，它们也被视为访问限制的一部分。因此，当您`Satisfy Any`在不需要有效用户的情况下允许对 URI 的访问时使用时，它也会这样做，因此 SSL 访问要求是其中的一部分`Any`。并且由于选项`Satisfy`是`All`or 或`Any`，因此您不能说“总是这个，但其他 2 任意”。

您可能必须使用 mod_rewrite 之类的东西来强制在您的 htaccess 文件中使用 SSL：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

# objective-c - 滚动 UitableView 时，UITableViewCell 附件视图在不同部分中重复

> ID：11926354
> 
> 赞同：0
> 
> 时间：2012-08-12T22:28:14.763
> 
> 标签：objective-c, ios, xcode, uitableview

这个问题让我困扰了很久，我想在我的tableview的不同单元格上实现不同的附件视图。

而且我的表格视图有多个部分，但是当我向上和向下滚动`UITableView`. 我知道有人说“之前在方法`dequeueReusableCellWithIdentifier:`中为每个单元格分配时应该使用不同的标识符，`cellForRowAtIndexPath:`

但是我不知道如何以编程方式详细实现，任何人都可以详细写一个示例代码帮助我理解吗？

非常感谢！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:09:25.010

使用不同的附件视图一切都很好。但是您必须记住，如果您正在回收单元格，那么您首先尝试回收，如果没有可用的单元格，则创建一个单元格，然后您需要为要返回的特定单元格设置适当的附件视图。谁知道旧的用于回收电池的...

# javascript - 具有多个文件nodejs的路由

> ID：11926357
> 
> 赞同：2
> 
> 时间：2012-08-12T22:28:41.787
> 
> 标签：javascript, node.js, express

我想路由多个文件

```
var routes=require('./routes'); 
```

在路线/index.js

```
exports.inicio=require('./inicio')
exports.home=require('./home') 
```

在 inicio.js

```
exports.index=function(req,res){res.render('index/index',{title: 'Bienvenido a Inmoweb'});} 
```

在 home.js 中

```
exports.nosotros=function(req, res){res.render('index/nosotros',{title:'Nosotros'});} 
```

当我 console.log(routes)

```
{
inicio: {index:[function]}, 
home: {nosotros:[function]}
} 
```

所以我打电话给应用程序

```
app.get('/',routes.inicio.index); 
```

但我想这样打电话

```
app.get('/',routes.index);
app.get('/nosotros',routes.nosotros); 
```

和console.log 假设是????

```
{
  index:[function], 
  nosotros:[function]
} 
```

怎么做？？？全部

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T23:01:14.297

您`routes/index.js`可以执行以下操作：

```
exports.index = require('./inicio').index
exports.nosotros = require('./home').nosotros 
```

* * *

您可以通过直接分配给`module.exports`in来缩短它`inico.js`：

```
module.exports = function(req,res){res.render('index/index',{title: 'Bienvenido a Inmoweb'});} 
```

现在你可以这样做`routes/index.js`：

```
exports.index = require('./inicio') //See the difference? 
// require('./inicio') now directly exports your route
exports.nosotros = require('./home').nosotros 
```

明白了吗？:)

# c# - [有条件的（“银光”）]

> ID：11926358
> 
> 赞同：0
> 
> 时间：2012-08-12T22:28:47.793
> 
> 标签：c#, wcf, silverlight, conditional, system.diagnostics

服务合同中的 WCF 条件操作

```
#if SILVERLIGHT // <------------------------------ ( 1 )
// Silverlight Operations
#else // <------------------------------ ( 2 )
// NON Silverlight Operations
#endif 
```

**标记#1**可以转换为

```
[Conditional ( "SILVERLIGHT" )] 
```

**如何**转换**Mark #2** ( `ELSE`Condition [ **NON** Silverlight ] )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:33:43.047

[`ConditionalAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)有一些`#if`没有的限制。也就是说，该方法只能返回 void 并且您不能提供否定版本。

`#if`只是省略了代码，但`Conditional`告诉编译器 noop 调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T22:48:15.820

与[`ConditionalAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)a 不同[`C# Preprocessor Directives`](http://msdn.microsoft.com/en-us/library/ed8yd1ha(v=vs.71).aspx)。因此，试图用另一个替换一个是不合适的。

请参阅此相关答案：[https ://stackoverflow.com/a/3788719/347172](https://stackoverflow.com/a/3788719/347172)

# java - 在 JTextFields 中从法语切换到阿拉伯语

> ID：11926360
> 
> 赞同：1
> 
> 时间：2012-08-12T22:28:50.380
> 
> 标签：java, swing, jtextfield

我有一个包含 JTextFields 的表单，其中一些特定于法语，而另一些则特定于阿拉伯语。我想在不按 alt+shift 键的情况下从一种语言切换到另一种语言。对解决方案的任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:12:39.123

感谢 aymeric 的回答，但我找到了解决问题的方法，这是我解决问题的方法：

```
public void Arabe(JTextField txt) {
    txt.getInputContext().selectInputMethod(new Locale("ar", "SA"));
    txt.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);    
}

public void Français(JTextField txt) {
    txt.getInputContext().selectInputMethod(new Locale("fr","FR"));
    txt.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);    
}

private void txt1_FocusGained(java.awt.event.FocusEvent evt) {                                     
    Arabe(my_textfields1);
}                                    

private void txt2_FocusGained(java.awt.event.FocusEvent evt) {                                        
    Français(mytextfields2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:15:58.217

我理解这个问题的方式是，您希望一些特定的文本字段使用阿拉伯语（从右到左 + 带有阿拉伯字符），而其他一些文本字段使用法语。

如果您主要关心的是避免用户按 ALT+SHIT，只需让您的程序为他执行此操作 :)

这只是一个让您入门的示例（如果您还没有找到任何解决方案）：

```
public class Test {

    /** 
     * This method will change the keyboard layout so that if the user has 2 languages
     * installed on his computer, it will switch between the 2 
     * (tested with french and english) 
     */
    private static void changeLang() {
        Robot robot;
        try {
            robot = new Robot();
            robot.keyPress(KeyEvent.VK_SHIFT);
            robot.keyPress(KeyEvent.VK_ALT);

            robot.keyRelease(KeyEvent.VK_SHIFT);
            robot.keyRelease(KeyEvent.VK_ALT);
        } catch (AWTException e1) {
            e1.printStackTrace();
        }
    }

    public static void main(String[] args) throws Exception {

        JFrame f = new JFrame();

        JTextField arabicTextField = new JTextField();
        JTextField frenchTextField = new JTextField();

        f.add(frenchTextField, BorderLayout.NORTH);
        f.add(arabicTextField, BorderLayout.SOUTH);

        frenchTextField.addFocusListener(new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent e) {
                changeLang();
            }
        });

        arabicTextField.addFocusListener(new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent e) {
                changeLang();
            }
        });

        arabicTextField.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

        f.pack();
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

# c# - AJAX / 回发问题

> ID：11926369
> 
> 赞同：0
> 
> 时间：2012-08-12T22:31:02.103
> 
> 标签：c#, jquery, asp.net, ajax

整个周末我都在为不想要的回发而苦苦挣扎。

我正在处理的弹出窗口有一个按钮，它基本上会触发一些存储过程，然后关闭弹出窗口。我想要实现的是当人们点击右上角的 X 关闭按钮时获得相同的结果。所以，X 按钮 = myCloseButton。

为此，我已经这样做了。

阿贾克斯。

```
$(window).unload(function(){
var dataToSend = { MethodName: 'UpdateR' };
var options =
    {
        data: dataToSend,
        dataType: 'JSON',
        type: 'POST',
    };
$.ajax(options);
}); 
```

.ASPX.CS

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {   #region Ajax methods
              if (Request.Form["MethodName"] == "UpdateR")
              {
                  UpdateRegister();
                  return;
              }
        #endregion
    }
} 
```

然后`UpdateRegister()`在人们离开页面后执行我想要执行的代码。

因此，当人们在弹出页面中点击另一个（无论）控件时，问题就来了。页面进入`(!IsPostBack)`AJAX方法。这是可以理解的，因为我在说`.unload`做这个做那个。（我已经尝试过`$(window).bind('beforeunload', function()`，但它不能达到预期的目的）

关于“当它是像 X 按钮或我的控件以及页面上的任何其他控件这样的关闭事件时，我如何告诉页面有所不同？”的任何想法？将不胜感激。

谢谢。

**编辑**。这不是关于在离开之前对表单进行序列化和比较的事情。不，它是关于登录和东西的，所以即使人们打开弹出窗口并立即关闭它，我也需要得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:44:14.760

为什么不创建 WebMethod 并直接调用而不是通过 Page_Load() 页面事件调用。

```
[WebMethod]
public static string UpdateRegister()
{
   // your update register script here
} 
```

来自 jquery 的示例调用，当有人单击加载或卸载按钮时，您可以调用此 ajax。

您可以在单击 id 为“button1”的按钮时调用 ajax 脚本，例如

```
$(function(){
  $('#button1').click(function() {
    // close window
    window.close();
    // call ajax script to perform server side script

      $.ajax({
      type: "POST",
      url: "Sample.aspx/UpdateRegister",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (msg) {
      alert(msg.d);
    }
   });   
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:03:58.010

如果有人遇到类似这样的错误：

**答：** 在我的网络表单中开始出现混乱的只是一个按钮（一个 asp 按钮）。这是回发，所以我通过 javascript 禁用了回发，就是这样。我现在可以继续前进了。

# c# - 对话框结果上的自定义按钮

> ID：11926372
> 
> 赞同：0
> 
> 时间：2012-08-12T22:31:36.093
> 
> 标签：c#, button, dialogresult

是否可以自定义对话框上的按钮？

我会更好地解释：我不想自定义按钮的结果，而只想自定义按钮上显示的文本。例如，我想要三个按钮“YesNoCancel”并将结果捕获为“Yes”、“No”或“Cancel”，但它们应该显示为“Option1”、“Option2”和“Option3”。

这是否可能，而无需创建新的自定义对话框？

提前致谢

# php - 内存缓存连接与 addServer

> ID：11926376
> 
> 赞同：11
> 
> 时间：2012-08-12T22:32:23.410
> 
> 标签：php, memcached

我正在查看[memcache 上的 php 文档，](http://php.net/manual/en/book.memcache.php)并注意到
`$mem->connect('localhost', 11211)`我可以做而不是做
`$mem->addServer('localhost', 11211)`

这样，如果我最终不使用 memcache 连接，它就不会打扰连接。

这让我想知道，为什么有人会使用`connect()`over `addServer()`？

这似乎是一种可能的不必要的联系。我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T00:58:55.970

[`connect`](http://www.php.net/manual/en/memcache.connect.php)并且[`pconnect`](http://www.php.net/manual/en/memcache.pconnect.php)似乎是更底层的调用，它们执行单个任务而没有太多开销。[`addServer`](http://www.php.net/manual/en/memcache.addserver.php)OTOH 级别更高，管理多台服务器，当其中一个失败时重试等等。我的印象是后者依赖前者来完成任务。

从最终用户的角度来看，使用较低级别的功能几乎没有什么优势，除了可能作为一个小的性能改进（如果您**知道**您将立即使用连接，则只有一个 memcached 服务器并且不需要保持持久连接 - 或者实际上**想要**重置它以进行故障排除等 - 按需连接可能会更快）。只有当您需要对连接生命周期进行更多控制时（例如，如果您正在设计自己的缓存策略），这些功能才会有用。

换句话说，这些函数在 API 中公开的事实并不意味着它们会有一个共同的用例。尽管如此，提供更多与系统交互的工具通常比提供更少的工具更好，因为它鼓励平台构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T17:55:16.397

[实际上，在Memcache::addServer](http://www.php.net/manual/en/memcache.addserver.php)的文档页面上很好地解释了差异

connect() 直接连接到单个 memcached 实例。

addServer() 向 Memcache 扩展使用的服务器池添加一个条目，但在您执行需要连接的操作之前不会实际连接。

> 使用此方法时（与 Memcache::connect() 和 Memcache::pconnect() 不同），网络连接在实际需要时才会建立。因此，将大量服务器添加到池中没有任何开销，即使它们可能并未全部使用。

使用服务器池意味着如果一个 memcached 实例/连接引发低级错误，则 Memcache 扩展将自动连接到另一台服务器以发出请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T18:54:18.083

Memcache 是一种分布式缓存设计。当您使用服务器池时，对象通过密钥分配机制存储在所有服务器上，该机制根据服务器的权重和密钥本身的哈希选择服务器。

现在，在 2 个 memcache 服务器上的设置中，一个会像这样：

```
$memcache = new Memcache;
$memcache->addServer('memcache_host1', 11211);
$memcache->addServer('memcache_host2', 11211); 
```

发布这些调用后，php 进程将看到具有两台服务器的服务器池，并将对象平均分配给它们，因为在 Memcache::addServer 调用中选择了默认权重。因此，对 Memcache::get 或 Memcache::set 的调用将根据密钥保存对象或从服务器池中的正确主机检索密钥值。

然而，Memcache::connect 会重新初始化主机池并假设只有一个主机可用，并且所有对象都存储在该主机上。这也意味着，如果你这样做：

```
$memcache = new Memcache;
$memcache->addServer('memcache_host1', 11211);
$memcache->addServer('memcache_host2', 11211);

$memcache->connect('memcache_host1', 11211); 
```

最后一次调用将清除服务器池，并且在 Memcache::connect 调用之后的所有键都将保存在 memcache_host1 中。因此，Memcache::connect 理想地用于单个主机设置，而不是用于池，除非打算与池中的特定主机通信以获取统计信息、维护操作或特殊缓存方案。更多讨论[在这里](http://www.php.net/manual/en/memcache.connect.php)。

# java - 当盒子不够大时，面板相互重叠

> ID：11926378
> 
> 赞同：1
> 
> 时间：2012-08-12T22:32:38.790
> 
> 标签：java, swing, user-interface, layout, grid-layout

我有这个 gui；当高度不够大时，窗格将相互重叠。我必须至少设置200，这样我才能完全看到两行；但是当它设置为 200 时，最后我有一个大的空行，我不想要那个。我该如何解决这个问题？谢谢。

```
import java.awt.FlowLayout;
import javax.swing.*;
import java.awt.*;

public class MyFrame extends JFrame {

    JButton panicButton;
    JButton dontPanic;
    JButton blameButton;
    JButton newsButton;
    JButton mediaButton;
    JButton saveButton;
    JButton dontSave;

    public MyFrame() {
        super("Crazy App");
        setSize(400, 150);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel row1 = new JPanel();
        panicButton = new JButton("Panic");
        dontPanic = new JButton("No Panic");
        blameButton = new JButton("Blame");
        newsButton = new JButton("News");
        //adding first row
        GridLayout grid1 = new GridLayout(4, 2, 10, 10);
        setLayout(grid1);
        FlowLayout flow1 = new FlowLayout(FlowLayout.CENTER, 10, 10);
        row1.setLayout(flow1);
        row1.add(panicButton);
        row1.add(dontPanic);
        row1.add(blameButton);
        row1.add(newsButton);
        add(row1);
        //adding second row
        JPanel row2 = new JPanel();
        mediaButton = new JButton("Blame");
        saveButton = new JButton("Save");
        dontSave = new JButton("No Save");
        GridLayout grid2 = new GridLayout(3, 2, 10, 10);
        setLayout(grid2);
        FlowLayout flow2 = new FlowLayout(FlowLayout.CENTER, 10, 10);
        row2.setLayout(flow2);        
        row2.add(mediaButton);
        row2.add(saveButton);
        row2.add(dontSave);
        add(row2);       

        setVisible(true);       

    }

    public static void main(String[] args) {
        MyFrame frame = new MyFrame();
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:56:00.923

1.  原始代码在两个不同的场合为一个面板设置了布局。为清楚起见，在构造函数中设置一次。
2.  **第二个布局指定了 3 行**
3.  调用`pack()`顶级容器以使 GUI 缩小到组件所需的最小尺寸。

## 最终结果

![在此处输入图像描述](../Images/3481dc8002dcc75df3139236040fef67.png)

* * *

```
import java.awt.FlowLayout;
import javax.swing.*;
import java.awt.*;

public class MyFrame17 extends JFrame {

    JButton panicButton;
    JButton dontPanic;
    JButton blameButton;
    JButton newsButton;
    JButton mediaButton;
    JButton saveButton;
    JButton dontSave;

    public MyFrame17() {
        super("Crazy App");
        setLayout(new GridLayout(2, 2, 10, 10));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel row1 = new JPanel();
        panicButton = new JButton("Panic");
        dontPanic = new JButton("No Panic");
        blameButton = new JButton("Blame");
        newsButton = new JButton("News");
        FlowLayout flow1 = new FlowLayout(FlowLayout.CENTER, 10, 10);
        row1.setLayout(flow1);
        row1.add(panicButton);
        row1.add(dontPanic);
        row1.add(blameButton);
        row1.add(newsButton);
        add(row1);
        //adding second row
        JPanel row2 = new JPanel();
        mediaButton = new JButton("Blame");
        saveButton = new JButton("Save");
        dontSave = new JButton("No Save");
        FlowLayout flow2 = new FlowLayout(FlowLayout.CENTER, 10, 10);
        row2.setLayout(flow2);        
        row2.add(mediaButton);
        row2.add(saveButton);
        row2.add(dontSave);
        add(row2);       

        pack();
        setVisible(true);       
    }

    public static void main(String[] args) {
        MyFrame17 frame = new MyFrame17();
    }   
} 
```

## 更多提示

1.  不要扩展框架，只使用一个实例。
2.  在面板中构建整个 GUI，然后可以将其添加到框架、小程序、对话框中。
3.  在开发测试类时，给它们起一个比`MyFrame`. 一个很好的补充是`Test`，然后想想正在测试什么。这是关于按钮的布局，所以`ButtonLayoutTest`可能是一个好名字。
4.  GUI 应该在 EDT 上启动。

# php - 登录 Twitter 应用程序是否有任何限制？

> ID：11926387
> 
> 赞同：0
> 
> 时间：2012-08-12T22:34:04.907
> 
> 标签：php, twitter, login, oauth

我有一个基于 PHP 中 OAuth 的简单 Twitter 应用程序，有时会发生这种情况，如果我正在使用该应用程序并测试登录到应用程序和周围的东西，所以有时我可以登录到应用程序。

我可以每天/每小时登录构建应用程序的次数是否有限制，或者它是 Twitter 手/库中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:33:35.983

根据 API 文档[https://dev.twitter.com/docs/api#oauth](https://dev.twitter.com/docs/api#oauth)，对身份验证端点的请求不受速率限制。如果您在登录时看到错误，这可能是速率限制以外的原因。

# grep - 在 egrep 中提取模式并将它们放在输出文件的行首？

> ID：11926388
> 
> 赞同：0
> 
> 时间：2012-08-12T22:34:05.867
> 
> 标签：grep

grep/egrep 中是否有办法从该文本中提取棘手的模式，将它们插入行的开头及其剩余行，使其看起来如下所示？

从许多包含“非特定”一词的文件中提取的原始文本。现在我需要组织这些，使名称从行首开始，以便于阅读。在它们之间插入一个空行也会有所帮助，但这在 egrep 中可能是不可能的？

**输入：**

```
SofasCouchesChairs/Type1234567.xml:Nonspecific Couch-W ISSUESTablesDesks/Type123765.xml:Nonspecific Tables issues BedsDivans/Type4567345.xml:Nonspecific bed abnormalitiesBedBugs/Type2893993.xml:Nonspecific bugs in the spring boxes related to the mattressBed_Sofas/Type1317994.xml:Nonspecific WR abnormalities these are from Radios_TV/Type1274978.xml:radiation perhaps with nonspecific cell phones and cell towers Cabinets_TelephoneWires/Type1299691.xml:DATA:all kinds of nonspecific cell phone wave changes, with a 
```

**预期输出：**

```
SofasCouchesChairs/Type1234567.xml:Nonspecific Couch-W ISSUES

TablesDesks/Type123765.xml:Nonspecific Tables issues 

BedsDivans/Type4567345.xml:Nonspecific bed abnormalities

BedBugs/Type2893993.xml:Nonspecific bugs in the spring boxes related to the mattress

Bed_Sofas/Type1317994.xml:Nonspecific WR abnormalities these are from 

Radios_TV/Type1274978.xml:radiation perhaps with nonspecific cell phones and cell towers

Cabinets_TelephoneWires/Type1299691.xml:DATA:all kinds of nonspecific cell phone wave changes, with a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:35:26.897

看评论; 输入实际上是：

```
SofasCouchesChairs/Type1234567.xml:Nonspecific Couch-W ISSUES
TablesDesks/Type123765.xml:Nonspecific Tables issues 
BedsDivans/Type4567345.xml:Nonspecific bed abnormalities
BedBugs/Type2893993.xml:Nonspecific bugs in the spring boxes related to the mattress
Bed_Sofas/Type1317994.xml:Nonspecific WR abnormalities these are from 
Radios_TV/Type1274978.xml:radiation perhaps with nonspecific cell phones and cell towers
Cabinets_TelephoneWires/Type1299691.xml:DATA:all kinds of nonspecific cell phone wave changes, with a 
```

您可以将输出加倍以匹配预期输出：

```
sed G input.txt > output.txt 
```

顺便说一句，如果您想让事情更容易阅读，您可以尝试 G 的数量。例如，这将使您的文件空间增加三倍：

```
sed G;G input.txt > output.txt 
```

此外，要直接对您的文件进行更改，您可以使用该`-i`标志（这使我们不必不必要地创建`output.txt`）：

```
sed -i G input.txt 
```

# php - 通过多次提交以表单形式发送错误值

> ID：11926389
> 
> 赞同：0
> 
> 时间：2012-08-12T22:34:12.253
> 
> 标签：php, forms, form-submit

这是我的一些表格，带有 3 个提交按钮

```
<input type="image" name="submit" value="saveasset" class="submit" src="<?=BASE_URL . '/' . IMAGE_URL . '/buttons/btn_save_changes.gif'?>" />
<input type="image" name="submit" value="savetemplate" onclick="saveTemplate(); return false;" class="add_new_link" src="<?=BASE_URL . '/' . IMAGE_URL . '/buttons/btn_new_template.gif'?>"/>
<input type="image" name="submit" value="updatetemplate" onclick="saveTemplate(); return false;" class="add_new_link" src="<?=BASE_URL . '/' . IMAGE_URL . '/buttons/btn_update_template.gif'?>"/> 
```

当我单击第一个时，它会正确地将“saveasset”提交给操作函数。当我单击第二个时，即使单击的按钮是“保存模板”，它也会将“更新模板”提交给操作函数（通过 AJAX）。当我单击第三个时，它会正确地将“updatetemplate”提交给操作函数（通过 AJAX）。

这是 saveTemplate() 函数（使用原型）

```
function saveTemplate(){
    $('add_asset').request({
        onComplete: function (response) {
            $('message_inline').show();
            $('message_inline').update(response.responseText);
        }
    });
} 
```

如果我只有 2 个按钮，一切都会按我的预期工作，但我需要 3 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:38:44.373

您可以尝试将一个值传递给您的 saveTemplate() 函数，并告诉该函数根据传入的值采取不同的行为。

```
<input type="image" name="submit" value="savetemplate" onclick="saveTemplate('savetemplate'); return false;" class="add_new_link" src="<?=BASE_URL . '/' . IMAGE_URL . '/buttons/btn_new_template.gif'?>"/>
<input type="image" name="submit" value="updatetemplate" onclick="saveTemplate('updatetemplate'); return false;" class="add_new_link" src="<?=BASE_URL . '/' . IMAGE_URL . '/buttons/btn_update_template.gif'?>"/> 
```

# android - 什么时候可以安全地使用在新线程中创建的处理程序？

> ID：11926390
> 
> 赞同：2
> 
> 时间：2012-08-12T22:34:52.027
> 
> 标签：android, multithreading, thread-safety, handler

我有一些代码来创建一个新线程，然后在该线程中创建一个处理程序和循环器。然后调用线程可以发布到这个处理程序：

```
class MyClass {

    Handler mHandler = null;
    Thread mThread = null;

    MyClass() {
        mThread = new Thread() {
            public void run() {
                Looper.prepare();
                mHandler = new Handler();
                Looper.loop();
            }
        };

        mThread.start();

        /* ... */

        mHandler.post(...);
    }
} 
```

此代码几乎直接来自文档中的示例。但我不明白它怎么可能是正确的。因为 mHandler 是在子线程中初始化的，所以不能保证什么时候发生。是什么阻止了这段代码在最后一行发布到 null 处理程序？

如果此代码不正确，那么以同步方式在新创建的线程上创建处理程序的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:29:13.100

最简单的方法是使用 HandlerThread：

```
class MyClass {

    final Handler mHandler = null;
    final HandlerThread mThread = null;

    MyClass() {
        mThread = new HandlerThread("...");
        mThread.start();
        mHandler = new Handler(mThread.getLooper());

        /* ... */

        mHandler.post(...);
    }
} 
```

这缩短了同步问题，因为 looper 是在 Thread.start() 内部创建的，因此处理程序可以链接到父线程中的该 looper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:56:11.367

在您的示例中，什么是 Looper（它在哪里声明）？线程是轻量级进程，它们在进程中创建并共享其数据。一个线程又可以创建一个新线程（子线程），该线程又可以创建另一个线程，依此类推。你可能想看看[mutexes、locks 和 semaphores](http://www.codeproject.com/Articles/14746/Multithreading-Tutorial)。

您可以使用标志（一组线程可见）来确定它们的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:50:45.997

我会用这种方式来完成这项工作，我认为它不是最好的，只是想知道更多关于它的好主意，所以我把它扔掉了。

```
mThread = new Thread() {

    public void run() {
        Looper.prepare();
        mLooper = Looper.myLooper();
        mHandler = new Handler();
        Looper.loop();
        }
    };

mThread.start();

......
timeout = 0;
mHandler2 = new Handler ();
DetectHandlerIsReady detect = new DetectHandlerIsReady ();
detect.run ();

class DetectHandlerIsReady implements Runnable {
    public void run ()
    {
         if (mHandler != null) { 
              mHandler.post (....);
         } else if (timeout <= 30) {
              timeout++;
              mHandler2.postDelay (detect, 1000);
              return;
         } 

         // timeout, and mHandler is not ready yet
    }
} 
```

# c++ - API 中的“final”关键字能否以 C++11 为条件？

> ID：11926393
> 
> 赞同：2
> 
> 时间：2012-08-12T22:35:45.450
> 
> 标签：c++, c++11, binary-compatibility

`final`在头文件中对标准版本有条件地启用 C++11 关键字是个好主意吗？我在想类似的东西：

```
#if __cplusplus >= 201103L
#   define MY_FINAL final
#else
#   define MY_FINAL
#endif

// ...

class Derived : public Base
{
public:
    virtual int f() MY_FINAL;
}; 
```

我在这里有两个疑问：

1.  有和没有的方法是否与`final`ABI 兼容（对我来说假设是合理的，并且快速检查`g++`证实了这一点），
2.  当有人试图重写该方法时，C++98 编译器不会抱怨。但我相信将方法记录为*不覆盖它*应该可以处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:33:16.967

1)`final`不应该影响 ABI，它只影响从 C++ 源代码的翻译是成功还是失败，它对生成的代码没有*必要的影响。*

2) 如果您准备使用一些非标准扩展，即使在 C++98 模式下也可以让编译器报错。G++ 4.7 支持`__final`C++98 模式，含义相同：

```
#if __cplusplus >= 201103L
#   define MY_FINAL final
#elif (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 7)
#   define MY_FINAL __final
#else
#   define MY_FINAL
#endif 
```

我认为 clang++`final`在 C++98 模式下接受，但会发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:42:54.370

`#`2是相当给定的。不过，我不太确定`#1`。从逻辑上讲，C++11 编译器完全有权`f()`对 Derived 对象进行内联调用，例如，不发出虚拟调用，而 C++03 编译器则被迫发出虚拟调用。我不确定这是否真的会产生任何影响，但它可能会。

# php - Mod_Rewrite 给出 500 服务器错误 .htaccess

> ID：11926396
> 
> 赞同：1
> 
> 时间：2012-08-12T22:36:01.800
> 
> 标签：php, apache, mod-rewrite

我不知道为什么，但是当在我的 .htaccess 文件中使用以下 RewriteRule 时，我得到一个内部服务器错误 500。我启用了 mod_rewrite 我整天都在寻找解决方案。

```
# Enable Rewriting  
RewriteEngine on  
# Rewrite user URLs 
RewriteRule ^(.*)/?$ users\/$1\/index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:38:22.933

Apache 的错误日志（通常命名为`errors.log`）可能提供了有关它为什么不起作用的更多信息。很可能正则表达式由于某种原因无效，我将自己测试它然后编辑这篇文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:45:47.700

500 错误很可能是由于重定向循环造成的。

您重写*任何*请求以`users/$1/index.php`包含该 URL 本身，因此最终会出现重写循环。

尝试将您的重写规则更改为：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/users
RewriteRule ^(.*)/?$ users/$1/index.php 
```

通过检查 URI 是否不以您开头，`/users`您可以避免重写循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T22:45:23.250

您有一个内部重写循环。重写引擎获取一个 URI 并将其放入引擎并获得一个结果 URI。如果它们相同，则重写引擎停止，否则，它将获取它返回的 URI*并通过引擎将其放回*。这意味着您再次`/users/something/index.php`匹配并变成： ，然后等等等等。`^(.*)/?$``/users/users/something/index.php/index.php``/users/users/users/something/index.php/index.phpusers/something/index.php/index.php`

因此，您需要添加 a`RewriteCond`以防止 URI 在它们已经以 开头时被重写`users/`：

```
# Enable Rewriting  
RewriteEngine on  
# Don't rewrite if URI starts with "users"
RewriteCond %{REQUEST_URI} !users/
# Rewrite user URLs 
RewriteRule ^(.*)/?$ users\/$1\/index.php 
```

# haskell - GHCi 和编译后的代码似乎表现不同

> ID：11926398
> 
> 赞同：8
> 
> 时间：2012-08-12T22:36:18.490
> 
> 标签：haskell, io

我有一个非常奇怪的问题。与在 ghci 中运行相比，以下代码在编译时给出了不同的结果，

```
main = do
  putStr "Please enter your name: "
  name <- getLine
  putStr ("Hello, " ++ name ++ ", how are you?") 
```

当在 ghci 中运行它时，它会像预期的那样，

```
Please enter your name: dglmoore
Hello, dglmoore, how are you? 
```

但是，当我将代码编译为可执行文件时，它要求我在生成任何输出之前提供输入，所以我最终得到了这个，

```
dglmoore
Please enter your name: Hello, dglmoore, how are you? 
```

我以前见过类似的问题，但我似乎无法再次找到它。

我正在使用来自 Haskell 平台版本 2012.2.0.0 的 ghc 版本 7.4.1。

任何人都知道为什么他们会给出不同的结果以及我如何让两个版本都做“正确”的事情？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T22:39:30.250

这是一个缓冲问题。通常 IO 是行缓冲的（即在您打印新行或超出缓冲区大小之前，输出实际上不会显示在屏幕上），除非您明确刷新缓冲区。在 ghci 中它不是，所以问题没有出现。

在`hFlush stdout`调用`getLine`.

或者，您可以使用`hSetBuffering NoBuffering`完全禁用缓冲，无需`hFlush`. 不过，这可能会对 IO 性能产生负面影响。

# javascript - 单击 JS 选项卡会导致浏览器向上滚动

> ID：11926400
> 
> 赞同：0
> 
> 时间：2012-08-12T22:36:28.650
> 
> 标签：javascript

**编辑：我发现它为什么这样做，但现在出现了一个问题。向下滚动到我在底部说“编辑”的地方，以帮助我解决出现的新问题。**

该页面可以在这里看到：[http ://www.remodeling-buffalo.com/bathroom/swanstone-bath-and-alcove-walls.php](http://www.remodeling-buffalo.com/bathroom/swanstone-bath-and-alcove-walls.php)

如果您向下滚动到底部并单击“视频”部分下方的选项卡之一，它会跳到页面上。仅当您向下滚动以使视频位于浏览器底部上方时才会发生这种情况。

这是我为标签提供的页面代码：

```
 <ul id="tabs" class="filter-nav option-set">
          <li><a class="selected" href="#">Acetone Test</a></li>
          <li><a href="#">Impact Test</a></li>
          <li><a href="#">Heat Test</a></li>
        </ul>
        <div id="tab-items" class="margin_top_55 textcenter">
          <hr class="dashed margin_bottom_15">
          <section>
            <div>
              <p>
                <video id="sublime" class="sublime center" poster="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-chemical-test.jpg" width="640" height="320" data-name="Swanstone - Chemical (Acetone) Test" data-uid="56410b5b" preload="auto">
                <source src="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-chemical-test.mov" />
                </video>
              </p>
              <h3>Acetone Test</h3>
              <h5 class="grey">Impervious To Chemicals</h5>
            </div>
          </section>
          <section>
            <div>
              <p>
                <video id="sublime2" class="sublime center" poster="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-impact-test.jpg" width="640" height="320" data-name="Swanstone - Impact Test" data-uid="12be3c75" preload="auto">
                <source src="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-impact-test.mov" />
                </video>
              </p>
              <h3>Impact Test</h3>
              <h5 class="grey">Impact Resistant!</h5>
            </div>
          </section>
          <section>
            <div>
              <p>
                <video id="sublime3" class="sublime center" poster="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-heat-test.jpg" width="640" height="320" data-name="Swanstone - Heat Test" data-uid="403140c8" preload="auto">
                <source src="/resource/video/bathroom/tub-and-shower/modular/swanstone/swanstone-heat-test.mov" />
                </video>
              </p>
              <h3>Heat Test</h3>
              <h5 class="grey">Withstands Heat!</h5>
            </div>
          </section> 
```

这是我拥有的JS代码

```
$(function() { 
    $("#tabs").tabs("#tab-items section", { effect: 'fade', fadeOutSpeed: 0, fadeInSpeed: 400 }); 
    $(".option-set").on("click", "a", function(e) { 
    $(this).addClass('selected') .parent().siblings().find("a").removeClass('selected'); }); 
}); 
```

它调用 jquery.tools.min.js，它只是 jqueryUI 的“选项卡”。该文件可以在这里看到：[http ://www.remodeling-buffalo.com/resource/js/jquery.tools.min.js](http://www.remodeling-buffalo.com/resource/js/jquery.tools.min.js)

**编辑：我自己解决了问题，但现在有一个问题以获得最佳方法**

似乎是 div 立即隐藏而另一个淡入的问题，所以这里的代码如下：

```
{ effect: 'fade', fadeOutSpeed: 0, fadeInSpeed: 400 }); 
```

所以问题是，即使看不到，这两个部分都像 .0000 MS 一样不可见，但它被迫向上推页面，那里什么都没有（如果你知道我的意思）。

所以我可以通过将“fadeOutSpeed”从 0 更改为 1 来解决这个问题，它不再这样做，虽然它看起来有点傻。有没有更好的效果可以阻止这种情况的发生？看起来好像有一个淡入淡出会解决这个问题。

谢谢你们的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:02:04.823

这是您自己在 custom.js 中的代码：

```
$('.navbar a, .scroll a, .smoothscroll a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
Uncaught TypeError: Cannot read property 'top' of null (repeated 4 times)
        }, 850,'easeInOutExpo');
        /*
        if you don't want to use the easing effects:
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1000);
        */
        event.preventDefault();
    }); 
```

按钮是 $('.smoothscroll a')，所以你的 scrollTop 让它滚动到顶部！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:01:58.500

也许这个scrollfix可以修复它？

```
$(".option-set").on("click", "a", function(e) {
    var scrollTop = $(window).scrollTop();
    $(this).addClass('selected').parent().siblings().find("a").removeClass('selected');
    $(window).scrollTop(scrollTop);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:10:02.480

我建议你只使用 div 或 span 而不是标签。然后只需使用 css 将其设置为看起来像一个链接。

**例子：**

```
myclass {
    cursor: pointer;
} 
```

# clojure - 在运行时从 clojure 确定文件脚本目录

> ID：11926402
> 
> 赞同：0
> 
> 时间：2012-08-12T22:36:33.150
> 
> 标签：clojure, namespaces

我正在为 Clojure 创建一个第三方库。在这个库的核心中，我需要从操作系统运行脚本。在这种情况下，我不能像这样使用该文件的绝对路径`/Users/me/src/clojure-pymorphy/src/pymorphy/pymorphy.py`。

但是如果我使用相对路径`script/script.py`- 有时脚本的位置可能会被确定为错误。这取决于我运行/使用这个 clojure 库的目录。因为这个库将作为第三方分发，所以我需要`script.py`从 Clojure 源代码中确定路径的方式。

项目文件夹如下所示：

```
clojure-pymorphy/
    src/
        pymorphy/
            pymorphy.py
        pymorphy.clj 
```

脚本`pymorphy.py`从`pymorphy.clj`. 文件`pymorphy.clj`从此行开始：

```
(ns pymorphy
  (:import  (java.util ArrayList)
            (jep Jep))) 
```

我试图找出是否有一种方法可以`pymorphy`在运行时确定目录到命名空间，只需简单地添加`"pymorphy/pymorphy.py"`到它。但是经过几个小时的谷歌搜索后，我得出结论，这是不可能的。

那么有没有其他方法可以在运行时动态确定 clojure 命名空间的路径？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:16:24.160

在查看 stackoverflow 上的类似问题时，我找到了解决方案：

```
(.getFile (clojure.java.io/resource "pymorphy/pymorphy.py")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:36:01.173

如果你运行这个脚本，那么这将类似于 - 这会将脚本复制到临时文件并运行它。您需要创建文件，因为如果您将所有内容打包到 jar 中，那么解释器将无法读取文件..

```
(let [tmp (File/createTempFile "tmp" "py")
      script (clojure.java.io/resource "pymorphy/pymorphy.py")]
  (try
    (when (and script (.exists tmp))
      (with-open [os (.openStream script)]
        (clojure.java.io/copy os tmp))
      (run-script....))
    (finally
      (when (.exists tmp)
        (.delete tmp))))) 
```

# django - 让 django 在 Google 应用引擎上工作的最简单方法？

> ID：11926403
> 
> 赞同：1
> 
> 时间：2012-08-12T22:36:53.390
> 
> 标签：django, google-app-engine

我正在尝试将旧的 app-engine-patch 项目转换为在 Google 应用引擎中使用开箱即用的 Django（没有“Cloud SQL”部分，因为我试图设置它，这很痛苦，并且还需要“启用计费”才能试用）。

是否有关于如何在应用引擎上编写开箱即用的 Django 应用程序的好文档？可能性似乎是：

*   应用引擎补丁。自 2009 年以来旧且不受支持。
*   [谷歌应用引擎 django](http://code.google.com/p/google-app-engine-django/)。自 2010 年起已弃用。
*   [django-nonrel](https://github.com/django-nonrel/django-nonrel)。不再受到其[原作者](http://www.allbuttonspressed.com/goodbye)的支持，最后一次签到是几个月前。
*   [带有 Cloud SQL 的 Django](https://developers.google.com/appengine/docs/python/cloud-sql/django)。正如我所说，设置很痛苦，并且需要启用计费才能尝试。

你会认为[这个问题](https://stackoverflow.com/questions/1011599/django-on-google-app-engine)或者[这个](https://stackoverflow.com/questions/1988153/django-and-app-engine)问题或者[这个](https://stackoverflow.com/questions/9065371/do-we-still-need-django-nonrel-now-that-gae-allegedly-supports-django-out-of-t)问题是重复的，但是关于那里的讨论太老了以至于没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:08:42.157

我最近为 GAE 开发 Django 应用程序时遇到了同样的问题。据我所知，最简单的方法是使用 Django nonrel。[Google App Engine Django 教程](https://developers.google.com/appengine/articles/django)建议采用这种方法。

现在，您问题的第二部分似乎更倾向于长期支持 Django nonrel。您是正确的，不再支持 Django nonrel。看起来 Google 有一篇关于如何在[Django 中使用 Cloud SQL](https://developers.google.com/appengine/docs/python/cloud-sql/django)的文章，但他们警告说 Cloud SQL 是实验性的，可能会发生变化。

基于所有这些信息，您有几个选择。

1.  使用 Django nonrel 时要理解它将来可能不被支持。这是一种风险，但如果您想快速入门，这是最简单的解决方案。
2.  将 Google 的 Cloud SQL 与 Django 一起使用，并理解它是实验性的并且可能会发生变化。
3.  使用 Django，但不要使用 ORM 层。这意味着您无法利用 Django 的管理站点和许多第三方工具。如果您担心长期支持，这是风险最小的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T07:53:17.887

我遇到了和你一样的困难。无论如何，由于不再支持 django-nonrel，我选择使用 Google Cloud SQL，因为它的[免费试用期将持续到 2013 年 6 月 1 日](https://developers.google.com/cloud-sql/docs/billing#intro_trial)。

当前所有教程都是针对 Django-nonrel 的，因此缺少新教程，并且为 Cloud SQL 设置 Django 并不那么明显。这就是我决定自己编写[本教程](http://howto.pui.ch/post/39245389801/tutorial-django-1-4-on-appengine-using-google-cloud)的原因。

# jquery - 正文 ASP .NET MVC 4 之后的 JQuery

> ID：11926405
> 
> 赞同：18
> 
> 时间：2012-08-12T22:37:07.237
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我刚刚创建了一个 ASP .NET MVC 4 WebAPI 项目。

在查看默认的 _Layout.cshtml 时，我看到 jquery 脚本是在渲染主体之后插入的（而不是在头部）。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/themes/base/css", "~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

这会导致错误

```
$ is not defined 
```

当然，试着写

```
$(document).ready(function() {...}). 
```

移动

```
@Scripts.Render("~/bundles/jquery") 
```

进入 _Layout.cshtml 的 head 部分可以纠正问题，并且 jquery 可以按预期工作。

这是怎么回事？我是不是做错了什么，Script.Render 在 _Layout.cshtml 中的默认位置是有原因的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T22:45:42.657

脚本加载和执行会阻止页面的呈现。

您可以通过在页面的多个部分添加警报来查看这一点。这就是为什么建议将js文件放在页面后面的原因。

您还可以通过在页面末尾添加 jquery 的页面脚本部分来解决您的问题。

**编辑：**这是 Scott Guthrie 关于剃须刀部分的文章：[http ://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor .aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T16:26:01.593

`@Scripts.Render("~/bundles/jquery")`导致 MVC 4 和 VS 2010 出现问题。当您尝试创建 jQuery 对话框时，此问题变得更加明显。

正如 JeffN825 所说，唯一的出路是注释掉`@Scripts.Render("~/bundles/jquery")`.

现在未知的是：注释掉的后果是什么`@Scripts.Render("~/bundles/jquery")`？

我正在使用以下 jquery 库：

```
<script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.23.min.js" type="text/javascript"></script> 
```

注意：jquery-1.7.2.min.js 不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T02:32:40.667

尽管接受的答案链接到有关如何做到这一点的详细信息，但更直接的答案如下：

_Layout.cshtml 包含该行...

```
@RenderSection("scripts", required: false) 
```

...这将在视图中插入一个名为“脚本”的部分 - 例如 Index.cshtml：

```
<p>This is Index.cshtml</p>
@section scripts {
   <script>
      $(document).ready(function() {
         alert("This script is inserted by RenderSection after jQuery script is inserted.")
      })
   </script>
} 
```

# ruby - 使用 RestClient 上传 Ruby 多部分表单

> ID：11926406
> 
> 赞同：0
> 
> 时间：2012-08-12T22:37:37.353
> 
> 标签：ruby, curl, oauth, rest-client, box-api

我正在开发一个 ruby​​ 应用程序，并正在尝试将文件上传到 box.net。我让它与 curl 调用一起使用

```
curl https://www.box.com/api/2.0/files/data -H "Authorization: BoxAuth api_key=<API_KEY>&auth_token=<AUTH_TOKEN>" -F folder_id=0 -F filename=@test.txt --trace ~/Desktop/log.txt 
```

我试图把它翻译成红宝石，并尝试了以下

```
request = RestClient::Request.new(:method => :post,:url => "https://www.box.com/api/2.0/files/data",:authorization => "BoxAuth api_key=<API_KEY>&auth_token=<AUTH_TOKEN>",:filename => "test.txt", :payload => { :multipart => true, :file => File.new("test.txt"))
request.execute 
```

但我不断收到“401：未经授权”的回复。我也尝试过使用 box-api gem，但这似乎只适用于 API 的 1.0 版本，我正在尝试与 2.0 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:43:41.007

尝试`:headers => {:authorization => "BoxAuth api_key=<API_KEY>&auth_token=<AUTH_TOKEN>"}`在通话中使用。那应该可以修复缺少的授权标头。

完整的请求将是：

```
request = RestClient::Request.new(:method => :post,:url => "https://www.box.com/api/2.0/files/data",:headers => {:authorization => "BoxAuth api_key=<API_KEY>&auth_token=<AUTH_TOKEN>"},:filename => "test.txt", :payload => { :multipart => true, :file => File.new("test.txt")}) 
```

# c# - 解决 Linq To 实体中缺少“包含”的问题

> ID：11926407
> 
> 赞同：2
> 
> 时间：2012-08-12T22:37:47.557
> 
> 标签：c#, linq, .net-3.5, linq-to-entities

我有以下功能（如果重要，它托管在 WCF 服务中）：

```
 public List<IceVsRepositoryFile> GetRepositoryFilesByRepositoryId(int repId)
    {
        var entity = new IceVSEntities();
        var files = from p in entity.Files where p.RepositoryId == repId select p.FileId;
        List<long> iList = files.ToList();
        var repFiles = from p in entity.RepositoryFiles where iList.Contains(p.FileId) select p;

        if (!repFiles.Any())
            return null;

        var retFiles = repFiles.ToList().Select(z => new IceVsRepositoryFile
            {
                FileId = (int)z.FileId,
                RollbackFileId = (int)z.RollbackFileId,
                UserId = (int)z.UserId,
                FileContents = z.FileContents,
                ChangeDescription = z.ChangeDescription
            }).ToList();

        return retFiles;
    } 
```

当我运行此函数时，我收到以下错误消息：“LINQ to Entities 无法识别方法 'Boolean Contains(Int64)' 方法，并且此方法无法转换为存储表达式。

我明白为什么我会收到错误消息。我的问题是，如何重写我的查询以使其按预期工作？我的后端数据库，如果重要的话，如果是 SqlLite 3。我使用的是 .NET 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:40:48.933

您使用的 contains 是 for `List`，它不在 IEnumerable 中，因此无法转换为相应的 sql 查询。相反，您可以使用`Any`, ... 像：

```
iList.Any(x=>x == p.FileId) (or use related property) 
```

也不要这样做：

```
List<long> iList = files.ToList(); 
```

在您的查询中使用`files.Any...`以防止从数据库中获取过多。实际上使用 IEnumerable 函数而不是`List`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:28:50.383

我相信加入可以做到这一点：

```
public List<IceVsRepositoryFile> GetRepositoryFilesByRepositoryId(int repId)
{
  var entity = new IceVSEntities();    

  var repFiles = from file in entity.Files where file.RepositoryId == repId join repFile in entity.RepositoryFiles on repFile.FileId equals file.FileId select repFile;

  var retFiles = // as before

  return retFiles;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:19:39.090

Files 和 RepositoryFiles 之间有关系吗？如果是这样，做这样的事情会更容易：

```
var repFiles = from p in entity.RepositoryFiles where p.File.RepositoryId == repId select p; 
```

这将避免无法将查询转换为 SQL 的问题。

# asp.net - ASP简单的图片上传器

> ID：11926408
> 
> 赞同：0
> 
> 时间：2012-08-12T22:38:05.310
> 
> 标签：asp.net

ASP.Net 中是否有一种方法可以让我以最少的脚本文件上传图像或文件？

基本上我正在寻找一个脚本，它可以让我在我的服务器上批量上传文件或脚本，但我的服务器上几乎没有限制，比如我无法访问数据库我也无法访问 FTP 帐户和我的网络托管服务提供商刚刚为我提供了一个网络界面来逐个上传文件。

我希望我可以通过在他们的服务器上上传一些 ASP 文件并运行这些文件来拥有我自己的上传器来覆盖他们的系统，然后我可以使用它来批量上传我自己的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:47:47.077

我发现[这个站点](http://www.aspupload.com/manual_simple.html#2_3)包含一些关于在 ASP 下上传文件的内容。第 2.3 节有使用 ASP.Net 上传的细节。

# json - 将 Twitter 流 JSON 转换为 R 数据帧

> ID：11926410
> 
> 赞同：0
> 
> 时间：2012-08-12T22:38:27.403
> 
> 标签：json, r, rcurl

我有一个 JSON 格式的文本文件，我使用此[链接](https://stackoverflow.com/questions/8243681/connect-to-the-twitter-streaming-api-using-r)中的代码下载了该文件。它看起来像这样：

```
"{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"'ello miss...?\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954853199872\",\"favorited\":false,\"geo\":null,\"source\":\"\u003Ca href=\\"http:\/\/www.tweetdeck.com\\" rel=\\"nofollow\\"\u003ETweetDeck\u003C\/a\u003E\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":false,\"lang\":\"en\",\"friends_count\":145,\"profile_sidebar_border_color\":\"181A1E\",\"location\":\"Chile\",\"profile_background_image_url_https\":\"https:\/\/si0.twimg.com\/images\/themes\/theme9\/bg.gif\",\"id_str\":\"76862348\",\"listed_count\":5,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\/\/si0.twimg.com\/profile_images\/1547896482\/egotuiter_normal.png\",\"description\":\"Geek. Amante de la m\u00fasica. Ateo. Nortino. Estudio Derecho en la U. de Chile. Nadie lee mi blog. Cobreloino. Afortunadamente ya no uso lentes :D\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"666666\",\"default_profile\":false,\"profile_background_image_url\":\"http:\/\/a0.twimg.com\/images\/themes\/theme9\/bg.gif\",\"followers_count\":181,\"is_translator\":false,\"time_zone\":\"Buenos Aires\",\"profile_link_color\":\"2FC2EF\",\"protected\":false,\"created_at\":\"Thu Sep 24 05:11:20 +0000 2009\",\"profile_background_color\":\"1A1B1F\",\"name\":\"Camilo Rojas\",\"default_profile_image\":false,\"contributors_enabled\":false,\"statuses_count\":36450,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":false,\"url\":\"http:\/\/unnombreingenioso.blogspot.com\",\"profile_image_url\":\"http:\/\/a0.twimg.com\/profile_images\/1547896482\/egotuiter_normal.png\",\"screen_name\":\"rojas_altazor\",\"id\":76862348,\"verified\":false,\"utc_offset\":-10800,\"favourites_count\":42,\"profile_sidebar_fill_color\":\"252429\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954853199872}
"
"{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"VALENTINA CORTANTE!\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954861580288\",\"favorited\":false,\"geo\":null,\"source\":\"web\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":false,\"lang\":\"es\",\"friends_count\":251,\"profile_sidebar_border_color\":\"CC3366\",\"location\":\"\",\"profile_background_image_url_https\":\"https:\/\/si0.twimg.com\/images\/themes\/theme11\/bg.gif\",\"id_str\":\"292675295\",\"listed_count\":0,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\/\/si0.twimg.com\/profile_images\/2494400748\/7zd2z67iclw88rc0q8sr_normal.jpeg\",\"description\":\"Soy hermosaaaa y valen me ama\u2665\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"362720\",\"default_profile\":false,\"profile_background_image_url\":\"http:\/\/a0.twimg.com\/images\/themes\/theme11\/bg.gif\",\"followers_count\":399,\"is_translator\":false,\"time_zone\":\"Santiago\",\"profile_link_color\":\"B40B43\",\"protected\":false,\"created_at\":\"Wed May 04 01:35:06 +0000 2011\",\"profile_background_color\":\"FF6699\",\"name\":\"Valen me amodora\u2020\",\"default_profile_image\":false,\"contributors_enabled\":false,\"statuses_count\":2643,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":true,\"url\":null,\"profile_image_url\":\"http:\/\/a0.twimg.com\/profile_images\/2494400748\/7zd2z67iclw88rc0q8sr_normal.jpeg\",\"screen_name\":\"CamiCelie\",\"id\":292675295,\"verified\":false,\"utc_offset\":-14400,\"favourites_count\":2,\"profile_sidebar_fill_color\":\"E5507E\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954861580288}
" 
```

我很好奇如何将单个片段提取到 R 数据框中。例如，理想情况下，这将转到这样的数据框：

```
screen_name        text
rojas_altazor       'ello miss...?
CamiCelie           VALENTINA CORTANTE!
...                  ... 
```

这是我第一次尝试使用 JSON 文件，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:18:21.880

首先，使用 rjson 库，我们拉入流 - 在这种情况下，我使用的是一个用户的时间线。

```
library(rjson)
timeline=fromJSON(file="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=douglbutt&count=100") 
```

这给了我们一个列表——我总是很难将分层列表分解成整齐的表格，所以我要逐个字段地做。

```
timelist=unlist(timeline)

tweets=timelist[names(timelist)=="text"]
names=timelist[names(timelist)=="user.screen_name"]
times=timelist[names(timelist)=="created_at"]

tweet.frame=data.frame(tweets,names,times) 
```

所以我们应该把它们都放在**tweet.frame**中。如果您想查看未列出数据中的可用字段，请尝试：

```
unique(names(timelist)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:15:13.320

```
twit<-c("{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"'ello miss...?\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954853199872\",\"favorited\":false,\"geo\":null,\"source\":\"\\u003Ca href=\\\"http:\\/\\/www.tweetdeck.com\\\" rel=\\\"nofollow\\\"\\u003ETweetDeck\\u003C\\/a\\u003E\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":false,\"lang\":\"en\",\"friends_count\":145,\"profile_sidebar_border_color\":\"181A1E\",\"location\":\"Chile\",\"profile_background_image_url_https\":\"https:\\/\\/si0.twimg.com\\/images\\/themes\\/theme9\\/bg.gif\",\"id_str\":\"76862348\",\"listed_count\":5,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\\/\\/si0.twimg.com\\/profile_images\\/1547896482\\/egotuiter_normal.png\",\"description\":\"Geek. Amante de la m\\u00fasica. Ateo. Nortino. Estudio Derecho en la U. de Chile. Nadie lee mi blog. Cobreloino. Afortunadamente ya no uso lentes :D\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"666666\",\"default_profile\":false,\"profile_background_image_url\":\"http:\\/\\/a0.twimg.com\\/images\\/themes\\/theme9\\/bg.gif\",\"followers_count\":181,\"is_translator\":false,\"time_zone\":\"Buenos Aires\",\"profile_link_color\":\"2FC2EF\",\"protected\":false,\"created_at\":\"Thu Sep 24 05:11:20 +0000 2009\",\"profile_background_color\":\"1A1B1F\",\"name\":\"Camilo Rojas\",\"default_profile_image\":false,\"contributors_enabled\":false,\"statuses_count\":36450,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":false,\"url\":\"http:\\/\\/unnombreingenioso.blogspot.com\",\"profile_image_url\":\"http:\\/\\/a0.twimg.com\\/profile_images\\/1547896482\\/egotuiter_normal.png\",\"screen_name\":\"rojas_altazor\",\"id\":76862348,\"verified\":false,\"utc_offset\":-10800,\"favourites_count\":42,\"profile_sidebar_fill_color\":\"252429\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954853199872}", 
"", "{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"VALENTINA CORTANTE!\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954861580288\",\"favorited\":false,\"geo\":null,\"source\":\"web\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":false,\"lang\":\"es\",\"friends_count\":251,\"profile_sidebar_border_color\":\"CC3366\",\"location\":\"\",\"profile_background_image_url_https\":\"https:\\/\\/si0.twimg.com\\/images\\/themes\\/theme11\\/bg.gif\",\"id_str\":\"292675295\",\"listed_count\":0,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\\/\\/si0.twimg.com\\/profile_images\\/2494400748\\/7zd2z67iclw88rc0q8sr_normal.jpeg\",\"description\":\"Soy hermosaaaa y valen me ama\\u2665\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"362720\",\"default_profile\":false,\"profile_background_image_url\":\"http:\\/\\/a0.twimg.com\\/images\\/themes\\/theme11\\/bg.gif\",\"followers_count\":399,\"is_translator\":false,\"time_zone\":\"Santiago\",\"profile_link_color\":\"B40B43\",\"protected\":false,\"created_at\":\"Wed May 04 01:35:06 +0000 2011\",\"profile_background_color\":\"FF6699\",\"name\":\"Valen me amodora\\u2020\",\"default_profile_image\":false,\"contributors_enabled\":false,\"statuses_count\":2643,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":true,\"url\":null,\"profile_image_url\":\"http:\\/\\/a0.twimg.com\\/profile_images\\/2494400748\\/7zd2z67iclw88rc0q8sr_normal.jpeg\",\"screen_name\":\"CamiCelie\",\"id\":292675295,\"verified\":false,\"utc_offset\":-14400,\"favourites_count\":2,\"profile_sidebar_fill_color\":\"E5507E\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954861580288}", 
"")

library(RJSONIO)

twit1<-fromJSON(twit[1])

> twit1$user$screen_name
[1] "rojas_altazor"

> twit1$text
[1] "'ello miss...?"

> twit2<-fromJSON(twit[3])
> twit2$user$screen_name
[1] "CamiCelie"
> twit2$text
[1] "VALENTINA CORTANTE!" 
```

# web-services - 使用 MonoTouch 的动态 Web 服务 URL

> ID：11926411
> 
> 赞同：1
> 
> 时间：2012-08-12T22:38:41.190
> 
> 标签：web-services, xamarin.ios

我有一个使用 MonoTouch 编写的应用程序，它依赖于 Web 服务 URL 后端。我需要能够在运行时从应用程序内（或从它的设置内）动态设置此后端的 URL。

我在 CodeProject 上阅读了这篇文章，其中描述了动态设置 URL：http: [//www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic#_rating](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic#_rating)

但是我在 MonoDevelop 中找不到这个选项。

我已经尝试更改我的服务的 Url 属性，但似乎还有更多。（具体而言，Web 服务添加的“references.cs”文件似乎也将 URL 硬编码在各种属性中）。

非常感谢任何帮助。

谢谢！

--scotru

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:43:00.590

当 Mono 为您生成 SOAP Web 服务的 C# 包装器时，它会创建 2 个包装器的构造函数。第二个包含 URL 参数，您可以使用它来设置正确的 URL 并在 Web 服务之间切换。

正在生产中的项目示例（文件 Reference.cs）：

```
public partial class ServicesInfoImplService : System.Web.Services.Protocols.SoapHttpClientProtocol
...
        public ServicesInfoImplService() {
            this.Url = "<DEFAULT_URL>";
        }

        public ServicesInfoImplService(string url) {
            this.Url = url;
        }
... 
```

# java - 为什么 Java 对象必须是 8 的倍数？

> ID：11926415
> 
> 赞同：20
> 
> 时间：2012-08-12T22:39:04.237
> 
> 标签：java, object, padding

我知道 Java 使用填充；对象必须是 8 个字节的倍数。但是，我看不到它的目的。这有什么用途？它的主要目的究竟是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T22:43:49.290

它的目的是[对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)，它允许以一些空间为代价更快地访问内存。如果数据未对齐，则处理器需要在加载内存后进行一些移位才能访问它。

此外，最小分配单元的大小越大，垃圾收集就越简单（并加速）。

Java 不太可能要求 8 字节（64 位系统除外），但由于 32 位体系结构是创建 Java 时的标准，因此 Java 标准可能需要 4 字节对齐。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-08T20:29:16.900

公认的答案是推测（但部分正确）。这是真正的答案。

首先，感谢@U2EF1，8 字节边界的好处之一是 8 字节是大多数处理器上的最佳访问。然而，这个决定远不止这些。

如果您有 32 位引用，则最多可以寻址 2^32 或 4 GB 的内存（实际上您得到的内存更少，更像 3.5 GB）。如果您有 64 位引用，则可以寻址 2^64，即 TB 的内存。但是，使用 64 位引用时，一切都会变慢并占用更多空间。这是由于 32 位处理器处理 64 位的开销，并且在所有处理器上，由于更少的空间和更多的垃圾收集，更多的 GC 周期。

因此，创建者采取了中间立场并决定使用 35 位引用，它允许高达 2^35 或 32 GB 的内存并占用更少的空间，因此具有与 32 位引用相同的性能优势。这是通过获取 32 位引用并在读取时将其左移 3 位并在存储引用时将其右移 3 位来完成的。这意味着所有对象必须在 2^3 边界（8 个字节）上对齐。这些被称为*压缩普通对象指针*或压缩 oops。

为什么不使用 36 位引用来访问 64 GB 内存？嗯，这是一个权衡。16 字节对齐需要大量浪费空间，据我所知，与 8 字节对齐相比，绝大多数处理器不会从 16 字节对齐中获得速度优势。

请注意，除非最大内存设置为 4 GB 以上，否则 JVM 不会打扰使用压缩 oops，默认情况下它不会这样做。您实际上可以使用`-XX:+UsedCompressedOops`标志启用它们。

这可以追溯到 32 位 VM 的时代，用于在 64 位系统上提供额外的可用内存。据我所知，64 位虚拟机没有限制。

资料来源：Java 性能：权威指南，第 8 章

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-12T22:42:35.460

Java 中的数据类型大小是 8*位*（不是字节）的倍数，因为大多数现代处理器中的字大小是 8 位的倍数：16 位、32 位、64 位。通过这种方式，可以使对象中的字段适合（“对齐”）一个或多个单词并浪费尽可能少的空间，利用底层处理器的指令来操作字大小的数据。

# php - PHP 如何在某些字符处停止 cURL/FOpen

> ID：11926419
> 
> 赞同：0
> 
> 时间：2012-08-12T22:39:41.310
> 
> 标签：php, curl, fopen

PHP CURL 函数有没有办法获取网站的内容，但在我们刚刚询问的字符上停止了。我认为这种缓冲。

所以脚本没有调用整个页面

所以这样的方案：

```
: curl execution
<html>
->
->
->
-> Title Detected
: curl close
->
->
->
->
</ html> 
```

请这不是 DOM 问题。但是当它发现我们询问时，如何卷曲就停止了。这是我的代码：

```
function curl_download($Url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $Url);
    curl_setopt($ch, CURLOPT_REFERER, $Url);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
} 
```

如果 cURL 不能处理这个问题，那 fopen 呢？你有一个例子吗？谢谢之前。也请给我你的示例代码，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:52:44.343

这是一个*非常简单*的示例，使用[`fsockopen()`](http://php.net/fsockopen). 扩展它以满足您的需求。

```
$host = 'www.site.com';
$port = 80;

$sock = fsockopen($host, $port, $errno, $errstr, 30);
if (!$sock) {
    die("Failed to connect.  $errno: $errstr");
}

// write http request to socket:
$request = "GET /file.html HTTP/1.0\r\n"
          ."Host: $host\r\n"
          ."User-Agent: some-user-agent\r\n"
          ."Connection: close\r\n"
          ."\r\n";

fwrite($sock, $request);

$buffer = '';  // buffer for storing response

while (!feof($sock)) {
    $buffer .= fgets($sock, 1024); // read 1024 bytes from socket, append to buffer

    if (strpos($buffer, '</title>') !== false)) { // title was found
        fclose($sock);
        break;
    }
} 
```

因此，我们连接到远程主机上的 HTTP 服务器，发出一个简单的 HTTP/1.0 请求，并一次读取 1024 个字节的响应，直到检测到结束标题标签。一旦找到，连接就关闭了。

注意，即使我们没有从套接字读取整个响应，底层系统（PHP 和 OS 套接字层）可能已经读取了更多（或者可能全部取决于大小）的响应。无论哪种情况，您都确实阻止了 PHP 读取大部分响应。如果页面非常大，提前关闭套接字可能会阻止实际接收到大量数据。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:47:22.000

我不认为你可以用 CURL 解析 DOM

我建议你使用像strstr、strtok这样的字符串函数...

[http://www.php.net/manual/en/ref.strings.php](http://www.php.net/manual/en/ref.strings.php)

# java - 通过套接字发送多个图像

> ID：11926421
> 
> 赞同：1
> 
> 时间：2012-08-12T22:40:08.440
> 
> 标签：java, sockets

我想做什么：

```
client connects to server
server sends READY
client takes screenshot and sends it
server processes image

server sends READY
client takes screenshot and sends it
server processes image
... 
```

我有一个工作的客户端和服务器：

```
Client() {

    try {
        socket = new Socket(host, 4444);
        in = new DataInputStream(socket.getInputStream());
        out = new DataOutputStream(socket.getOutputStream());
        int ix = 0;
        while (true) {
            switch (in.readInt()) {
            case Var.READY:
                image = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
                ByteArrayOutputStream byteArrayO = new ByteArrayOutputStream();
                ImageIO.write(image,"PNG",byteArrayO);
                byte [] byteArray = byteArrayO.toByteArray();
                out.writeInt(byteArray.length);
                out.write(byteArray);
                System.out.println("send screen " + ix++);
                break;
            }
        }
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host");
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection " + e.getMessage());
        System.exit(1);
    } catch (Exception e) {
        e.printStackTrace();
        System.exit(1);
    }
} 
```

服务器：

```
 public class ServerWorker implements Runnable {

private Socket socket = null;

DataInputStream in = null;
DataOutputStream out = null;

ServerWorker() {

}

synchronized void setSocket(Socket socket) {
    this.socket = socket;
    try {
        in = new DataInputStream(socket.getInputStream());
        out = new DataOutputStream(socket.getOutputStream());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    notify();
}

public synchronized void run() {
    int ix = 0;
    try {
        while (true) {
            out.writeInt(Var.READY);
            int nbrToRead = in.readInt();
            byte[] byteArray = new byte[nbrToRead];
            int nbrRd = 0;
            int nbrLeftToRead = nbrToRead;
            while(nbrLeftToRead > 0){ 
                int rd =in.read(byteArray, nbrRd, nbrLeftToRead);
                if(rd < 0)
                    break;
                nbrRd += rd; // accumulate bytes read
                nbrLeftToRead -= rd;
            }
            //Converting the image
            ByteArrayInputStream byteArrayI = new ByteArrayInputStream(byteArray);
            BufferedImage image = ImageIO.read(byteArrayI);
            System.out.println("received screen " + ix++);
            //image.flush();
            File of = new File("RecvdImg" + ix + ".jpg");
            ImageIO.write(image, "PNG" ,of);
            System.out.println("Sleeping 1..");
            Thread.sleep(1000);
        }
    } catch (Exception e) {
        e.printStackTrace();
        Thread.currentThread().interrupt();
    }
}
} 
```

那么你可能会问什么问题？好吧，我做得对吗？活动监视器告诉我客户端不断占用大约 40% 的 cpu，这不是很好。

只是想知道是否有人能指出我正确的方向来提高代码的效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:54:46.383

在我看来，您应该避免使用无限循环，例如

```
while (true) 
```

循环喜欢

```
while(!connectionAborted) 
```

在这种情况下会更好。

你也应该看看
[Socket.setSoTimeout()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setSoTimeout%28int%29)

SoTimeout 会`in.readInt()`在特定时间后取消 ie 的读取过程，具体取决于您的参数。
结果是在这一行`SocketTimeoutException`抛出了 a，但您的代码不会停留在该代码行上，并且可以对不同的用户输入做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:46:37.380

客户端可以检测图像是否已更改，如果没有更改，则可以向服务器发送一个标志，指示重用接收到的先前图像。或者您可以“区分”图像并仅将更改的区域发送到服务器，服务器将重新组合图像。这减少了带宽使用，也许还减少了 CPU 使用。

此外，客户端应该在`switch`.

# c - 如何通过引用传递动态分配的二维数组中的子数组？

> ID：11926425
> 
> 赞同：1
> 
> 时间：2012-08-12T22:41:45.767
> 
> 标签：c, pointers, pass-by-reference

我需要通过引用子数组传递，这些子数组是动态分配的二维数组的一部分。我尝试了以下方法，这似乎不起作用。如果可能的话，有什么想法吗？

```
void set1(int *a){
    a = malloc(2*sizeof(int));
    a[0] = 5;
    a[1] = 6;
}

void set2(int *a){
    a = malloc(2*sizeof(int));
    a[0] = 7;
    a[1] = 8;
}

int main(){
    int **x = malloc(2*sizeof(int*));

    set1(x[0]);   
    set2(x[1]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T22:45:46.217

您需要传递子数组的*地址，如下例所示：*

```
void set(int ** a)
{
    *a = malloc(2 * sizeof(int));
    (*a)[0] = 4;
    (*a)[1] = 9;
}

int main(void)
{
    int ** x = malloc(2 * sizeof(int*));
    set(&x[0]);
    set(&x[1]);
} 
```

每当您有一个函数需要修改调用者范围内的某些内容时，您需要在函数中取消引用（如 our `*a`）和调用者中的地址（如`&x[0]`）。

（相比之下，您的代码将指向已分配内存的指针分配给局部变量（即`myArray`），该变量在函数返回时丢失。并且内存随之丢失。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:17:04.427

```
#include <stdlib.h>
#include <stdio.h>

void testFunc1(int** a){
    *a = malloc(2*sizeof(int));
    (*a)[0] = 5;
    (*a)[1] = 6;
}

void testFunc2(int** a){
    *a = malloc(2*sizeof(int));
    (*a)[0] = 7;
    (*a)[1] = 8;
}

int main(){
    int** x = malloc(2*sizeof(int*));

    set1(&x[0]);   
    set2(&x[1]);

    printf("value:%d\n", x[0][0]);
    printf("value:%d\n", x[0][1]);
    printf("value:%d\n", x[1][0]);
    printf("value:%d\n", x[1][1]);
    return 0;
} 
```

输出：

```
value:5
value:6
value:7
value:8 
```

可视化工作：

```
x   -->       x[0]   |   x[1]
              |            |
              \/           \/
               ?            ? 
```

您想更改 x[0] (x[1]) 指向的地址。对于能够真正改变它的函数，您必须传递 x[0] (x[1]) 作为参考。由于 x[0] (...) 是指向 int （即 int* ）的指针，因此函数的参数应该是指向指向 int 的指针（即 int** 类型）的指针以完成此操作（在 C 中） . 因此，我们用 x[0] 的地址调用 set1。在 set1 中，我们希望将 malloc 返回的地址存储在我们作为参数获得的地址中。所以我们取消引用它并做到这一点。

# objective-c - 在 CGSize sizeWithFont: 中使用的字体名称？

> ID：11926426
> 
> 赞同：0
> 
> 时间：2012-08-12T22:42:23.913
> 
> 标签：objective-c, ios, cocoa-touch

我只想使用 iPhone 系统字体，但我不知道该怎么称呼它。sizeWithFont:@"HelveticaNeue" 给了我一个错误的参数错误。sizeWithFont:System 给我一个未初始化的变量错误。看起来应该很明显，但我看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:45:41.493

根据文档：

```
- [NSString sizeWithFont:] 
```

以 an`UIFont`作为参数，而不是`NSString`. 你应该使用类似的东西

```
[string sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12.0]] 
```

反而。

# html - 使用 CSS 更改悬停时的图像？

> ID：11926433
> 
> 赞同：4
> 
> 时间：2012-08-12T22:43:13.280
> 
> 标签：html, css

我很困惑。我正在尝试做一些看似如此简单但惨遭失败的事情。我想让图像“b.png”更改为“c.png”。你能找到我哪里出错了吗？

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css" />
</head> 
<body>
    <div class="main">
        <img src="b.png" />
    </div>
</body>
</html> 
```

**样式.css**

```
.main:hover {
    background-image: url('c.png');
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T22:46:19.600

你`<div class="main">` *正在*成为它的背景——你只是在元素`c.png`后面看不到它。`<img src="b.png">`

尝试删除该`<img>`标签，并将其用于您的 CSS：

```
.main {
    background-image: url(b.png);
}

.main:hover {
    background-image: url(c.png);
} 
```

您可能还需要给出`.main`高度和宽度，因为它里面不再有任何东西来给它一个大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:46:40.593

你在做什么没有错，除了图像（b.png）当然在背景之上......所以你看不到背景图像。

# javascript - Linux C++ 服务器与 Javascript 通信

> ID：11926435
> 
> 赞同：0
> 
> 时间：2012-08-12T22:43:53.020
> 
> 标签：javascript, c++, linux, facebook

我在 linux 上有一个 Flash 客户端应用程序和一个 C++ 服务器应用程序。它们通过 TCP 套接字进行通信，服务器处理所有游戏逻辑和客户端之间的通信。

我现在正在将我的应用程序部署到网站上。嵌入 swf 很容易并且工作正常。

我希望能够保存有关用户的统计信息，并希望使用 Facebook 登录来唯一标识用户并将有关他们的信息存储在 mysql 数据库中。

我现在处于服务器应用程序的 javascript 部分（使用 apache 的 index.html）需要将 facebook 信息发送到服务器的 C++ 部分（包含所有游戏逻辑和数据库管理）的情况，以便我将知道数据库的用户唯一 ID。

是否可以将此信息从 Javascript 发送到 C++ 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:53:17.290

您可以让您的 C 服务器充当 Web 服务器，接受遵循[HTTP 协议](http://en.wikipedia.org/wiki/HTTP)的连接，然后您可以使用 Ajax 发送数据。请记住让您的服务器发送`Access-Control-Allow-Origin: yourdomain.com`响应标头，将*yourdomain.com*替换为您托管 HTML+JS 页面的域；这是为了允许跨站点请求，因为 C 服务器将侦听网络服务器之外的另一个端口，也可能是另一个地址。

# c# - 是否可以对称为 GPU 的东西进行多线程处理？

> ID：11926438
> 
> 赞同：0
> 
> 时间：2012-08-12T22:44:45.433
> 
> 标签：c#, multithreading, performance, xna, gpu

我的 xna 游戏中有一个照明系统，它循环遍历每个灯光，并将这些灯光添加到包含所有灯光的最终灯光贴图中。

创建这些灯光的过程涉及到许多与图形设备有关的功能，例如使用效果/着色器和绘图来渲染目标，以及使用 graphics.device.clear 清除渲染目标等

所以我的问题是，是否可以对每个灯进行多线程处理？或者这是不可能的，因为只有 1 个图形设备，并且一次只能使用 1 个线程？如果可能，它会提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:54:17.207

**基本上没有。**在`GraphicsDevice`XNA 中是单线程的渲染。您可以从多个线程向 GPU 发送资源（纹理、顶点缓冲区等）。但是你只能从你的主线程调用`Draw`（和其他渲染函数，如）。`Present`

我[听说有人](http://www.luminance.org/blog/gruedorf/2009/07/01/threaded-enddraw-in-xna)通过适当的锁定从多个线程成功地完成了渲染类型的事情。但这似乎是“坏巫术”。正如链接的帖子所说：“ *XNA 框架文档在这里没有做出任何承诺*”。更不用说：即使正确锁定也很棘手。

我不太确定要制作多个图形设备 - 我自己没有尝试过。我认为这是可能的，但你不能在设备之间共享资源——这使得它相当无用。可能不值得努力。

正如 jalf 在对您的问题的评论中提到的那样 - 一旦您使用 GPU，一切都已经并行处理。[因此，这仅在您因达到批处理限制](https://gamedev.stackexchange.com/a/9289/288)而受到 CPU 限制时才有用（因为几乎所有不是您的批处理的东西*都*可以移动到另一个线程）。在这种情况下，首先要考虑许多优化以减少批次数量 - 在尝试像这样的疯狂方案之前。（而且你已经衡量了你的表现，*对吧？*）

听起来您可能正在尝试将一个相当复杂的场景渲染到后台的渲染目标，并将负载分散到许多帧中。在这种情况下 -*如果性能要求要求它*- 您可能可以在主线程上跨多个帧进行渲染，手动调度它。不要忘记设置`RenderTargetUsage.PreserveContents`，以便每次将其放在图形设备上时它都不会被清除。

# python - 具有 Python 代码完成功能的 Emacs > 代码完成建议未弹出

> ID：11926439
> 
> 赞同：3
> 
> 时间：2012-08-12T22:44:59.583
> 
> 标签：python, emacs, code-completion

安装后：

```
[rope]
[ropemode]
[pymacs]
[ropemacs]
[autocomplete 1.3.1] 
```

并配置`.emacs`：

```
(add-to-list 'load-path "~/.emacs.d/autocomplete1.3.1")
(add-to-list 'load-path "~/share/emacs/lisp/")

(setq py-install-directory "~/share/emacs/lisp/")
(require 'python-mode)

(autoload 'pymacs-apply "pymacs")
(autoload 'pymacs-call "pymacs")
(autoload 'pymacs-eval "pymacs" nil t)
(autoload 'pymacs-exec "pymacs" nil t)
(autoload 'pymacs-load "pymacs" nil t)
(autoload 'pymacs-autoload "pymacs")

(require 'pymacs)
(pymacs-load "ropemacs" "rope-")
(setq ropemacs-enable-autoimport t)

(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/autocomplete1.3.1/ac-dict")
(ac-config-default)

(require 'auto-complete)
(global-auto-complete-mode t) 
```

我在 之后键入了一个句点`sys.`，并希望代码完成类似于 Komodo Edit。

不幸的是，我能做到的最好的事情就是按**M-/**来调出一个分屏代码完成缓冲区。

如何在类似于 Komodo-Edit 的 GNU Emacs 中实现代码补全？

这是一个让我失望的[pymacs 错误](https://github.com/pinard/Pymacs/pull/29)：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:15:58.010

这是`ac-config-default`配置 AC 的唯一定义：

```
(defun ac-config-default ()
  (setq-default ac-sources '(ac-source-abbrev ac-source-dictionary ac-source-words-in-same-mode-buffers))
  (add-hook 'emacs-lisp-mode-hook 'ac-emacs-lisp-mode-setup)
  (add-hook 'c-mode-common-hook 'ac-cc-mode-setup)
  (add-hook 'ruby-mode-hook 'ac-ruby-mode-setup)
  (add-hook 'css-mode-hook 'ac-css-mode-setup)
  (add-hook 'auto-complete-mode-hook 'ac-common-setup)
  (global-auto-complete-mode t)) 
```

没有 Python 配置，所以你不能指望 AC 为 Python 工作。

要设置它：

```
(add-hook 'python-mode-hook 'ac-ropemacs-setup) 
```

无耻的插件：这里是 AC 的备用ropemacs 源 - 因为包含的源不显示文档：[https ://github.com/cofi/dotfiles/blob/master/emacs.d/config/cofi-python.el#L75](https://github.com/cofi/dotfiles/blob/master/emacs.d/config/cofi-python.el#L75)

这里再次配置：

```
(add-hook 'python-mode-hook (lambda ()
                              (setq ac-source (append ac-source '(ac-source-nropemacs
                                                                  ac-source-nropemacs-dot))))) 
```

# asynchronous - Lua中的异步延迟？（如 JavaScript setTimeout）

> ID：11926440
> 
> 赞同：5
> 
> 时间：2012-08-12T22:45:03.230
> 
> 标签：asynchronous, lua

我需要将 Lua 中函数的执行异步延迟 X 毫秒。这可以做到吗？

给定一个简单的 JavaScript 示例：

```
setTimeout(function() {
    alert('Hello world!');
}, 5000); 
```

什么是 Lua 等价物？协程看起来可能会有所帮助，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:01:51.427

Lua 本身不包括异步事件支持。如果您将 Lua 嵌入到更大的东西中或将其与库一起使用，它们可能能够提供回调支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:25:54.340

试试我的[lalarm](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lalarm)库。它取决于，它可以在几秒钟内工作，但如果你有它`alarm`，可以很容易地更改为使用。`ualarm`

# wordpress - 如何在已注册的 WP 操作中获取帖子 ID 和猫 ID？

> ID：11926442
> 
> 赞同：0
> 
> 时间：2012-08-12T22:45:21.197
> 
> 标签：wordpress

在插件中，通过 add_action() 例程，我尝试运行检查。但是获取下面的帖子 ID 不起作用，但是为什么呢？获取帖子 ID 和相关猫 ID 的正确方法是什么？

```
add_action( 'wp', 'check_url', 10, 1 );

function check_url($wp){
    if( is_single() ){
        $cat_id = wp_get_post_categories( $post->ID );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:50:04.850

在使用之前先添加`global`到您的函数中`$post`，使其在您的函数中可见（这就是我们喜欢 PHP 的原因）：

```
function check_url($wp){
  global $post;
  ...
} 
```

# javascript - 我如何知道一个数字在 JS 中是奇数还是偶数？

> ID：11926459
> 
> 赞同：0
> 
> 时间：2012-08-12T22:46:48.020
> 
> 标签：javascript

> **可能重复：**
> [如何确定 JavaScript 中的数字是否为奇数](https://stackoverflow.com/questions/5016313/how-to-determine-if-a-number-is-odd-in-javascript)

我的程序要求我确定一个数字是否是偶数。但是我该怎么做呢？我是否必须制作一个包含很多偶数的非常大的数组，然后制作另一个包含很多奇数的数组，然后查找用户提供的数字是否在数组中？

# c++ - C ++正则表达式不匹配相邻组？

> ID：11926460
> 
> 赞同：0
> 
> 时间：2012-08-12T22:46:51.470
> 
> 标签：c++, regex

我在文件中有一行如下所示：

```
Location### Location### # 
```

其中 Location 是一个字符串，表示一个城市，其中空格是 +'s（如 "St.+Louis,+MO"），而 #'s 是数字。我正在尝试使用以下正则表达式模式捕获位置和数字（代表此网络拓扑文件中的唯一节点 ID）：

```
START "([A-Za-z,+.]+)([0-9]+)" SPACE "([A-Za-z,+.]+)([0-9]+)" SPACE "([0-9.]+)" MAYSPACE END 
```

使用 C++ 正则表达式库（在 Ubuntu Linux 上）。宏被正确定义为匹配但不捕获空格（MAYSPACE 匹配 0 个或更多空白字符）。

我遇到的问题是数字组完全是空的！如果我将此正则表达式放入 sed：

```
sed -rn 's/^([A-Za-z.+,]+)([0-9]+)/\1 \2/p' rocketfuel/weights/6461/latencies.intra 
```

它完全按预期工作，并捕获了城市名称和节点 ID！此外，如果我尝试以下匹配：

```
START "([A-Za-z,+.]+).([0-9]+)" SPACE "([A-Za-z,+.]+).([0-9]+)" SPACE "([0-9.]+)" MAYSPACE END 
```

节点 ID 将被捕获，但显然缺少第一位！我曾尝试将 \B 非单词边界锚放在那里，但没有运气......

有没有其他人遇到过不匹配的相邻组的这个问题？有人对如何修复它有任何建议吗？这似乎是实际 C++ 库的一个错误......

我试图避免使用 Boost 或其他外部库，所以现在我将使用 sed 在位置和节点 ID 之间添加一个空格，因为那时我可以很好地解析所有内容。

# javascript - RequireJS / r.js 'baseURL' 属性似乎被忽略了

> ID：11926461
> 
> 赞同：6
> 
> 时间：2012-08-12T22:46:55.920
> 
> 标签：javascript, build, requirejs, optimization

我正在尝试使用 r.js 优化器将我的所有依赖项构建到一个文件中。这是我的文件结构：

```
app
  bin
  src
    css
      main.css
    js
      libs
        raphael-2.1.0
          eve.js
          raphael.amd.js
          raphael.core.js
          raphael.svg.js
          raphael.vml.js
        jquery-1.8.0.js
        require-2.0.5.js
      main.js
    build.js
    index.html
  r.js 
```

下面是 build.js 的内容：

```
({
  baseURL: 'js',
  dir: '../bin',
  paths: {
    'jquery': 'libs/jquery-1.8.0',
    'raphael': 'libs/raphael-2.1.0/raphael.amd'
  },
  name: 'main',
  removeCombined: true
}) 
```

该`'libs/raphael-2.1.0/raphael.amd'`依赖项将所有其他内容加载到 raphael-2.1.0 目录中。如果我访问 app.local/src，该应用程序将按预期工作，它在运行时通过 require 在我的 index.html 文件中使用单个脚本标记加载模块，如下所示：

```
<script src="js/libs/require-2.0.5.js" data-main="js/main.js" type="text/javascript" charset="utf-8"></script> 
```

但是，如果我尝试`node r.js -o src/build.js`从应用程序运行命令，则会收到如下错误：

```
Error: ERROR: module path does not exist: /app/src/main.js for module named: main. Path is relative to: /app
at /app/r.js:14215:31 
```

...所有内容都“按原样”复制到 bin 中。如果我添加`'main': 'js/main'`到路径对象，那么 r.js 找不到 jquery 和 raphael，如果我添加`js/`到 jquery 和 raphael 路径，那么 libs/raphael-2.1.0/rapheal.amd 的依赖声明是错误的。如果我更新这些，那么一切都会按预期构建，但现在 app.local/src/index.html 上的应用程序已损坏。另外，我认为这就是在构建文件中具有 baseURL 属性的意义，不是吗？在我看来，baseURL 被忽略了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T08:02:53.360

与 JavaScript 中的大多数内容一样，[baseUrl](http://requirejs.org/docs/api.html#config-baseUrl)设置区分大小写。**将URL**更改为**Url**，看看是否有帮助。

# windows - VS2010 SP1 安装。“您尝试使用的功能位于不可用的网络资源上”

> ID：11926463
> 
> 赞同：2
> 
> 时间：2012-08-12T22:47:09.523
> 
> 标签：windows, visual-studio-2010, windows-phone-7

最终，我正在尝试安装 windows phone 应用程序 SDK，以便我可以将我制作的应用程序放在我的手机上。

为此，我被告知我需要安装 SP1。

当我尝试这样做时，我得到以下信息：

> “您尝试使用的功能位于 Visual Studio riaservices.msi 不可用的网络资源上”

我下载 riaservices.msi 并将对话框指向它，然后我收到消息：

> “该文件不是产品 WCF RIA Services V1.0 for VS 2010 的有效安装包。”

我已经下载了本网站上相关帖子中提到的 ISO，但我不知道现在它已经安装了我在做什么。

我尝试安装的一些功能要求我插入我没有的 CD，我从大学计划免费下载了它。

谁能帮我解决这个问题？真是令人难以置信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:25:06.537

有人在 SuperUser 上回答了这个问题，这得到了相当多的意见，所以这里有一个链接：

[https://superuser.com/questions/460773/vs2010-sp1-installation-the-feature-you-are-trying-to-use-is-on-a-network-reso](https://superuser.com/questions/460773/vs2010-sp1-installation-the-feature-you-are-trying-to-use-is-on-a-network-reso)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T08:53:34.053

这是卸载程序时发现的一种错误，我在尝试卸载 Java 时看到了这个错误。但它也是常见的 i-tones、黑莓软件和某些其他应用程序。

作为技术支持，我遇到了这个问题，并为运行 Windows XP 的客户端 PC 找到了解决方案。我在这里写的所有一步一步的过程

[[已解决] 您尝试使用的功能位于不可用 Java 的网络资源上](http://www.smartpctricks.com/2013/09/solved-the-feature-that-you-are-trying-to-use-is-on-a-network-resource-that-is-unavailable-java.html)

# css - 单独的移动 CSS 表与单独的移动页面？

> ID：11926470
> 
> 赞同：6
> 
> 时间：2012-08-12T22:48:18.980
> 
> 标签：css, mobile

我正在尝试找出是否可以更好地利用我的时间（现在和从长远来看）为我的移动网站制作单独的样式表（看起来会大不相同，但使用相同的数据库信息和元素），**或者**，创建一个全新的移动页面并从我的桌面站点*窃取*我需要的内容。

有没有人有建议或知道大多数开发人员在移动网站方面的做法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T22:54:20.550

您可以使用媒体查询。

```
<link rel="stylesheet" media="screen" href="style.css" type="text/css" />
<link rel="stylesheet" media="handheld" href="mobile.css" type="text/css" /> 
```

或者在css3中

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:59:57.713

如今，许多网站都首先专注于移动设备，然后移植到用于桌面的完整 Web 应用程序。越来越多的仙人掌正在使用他们的手机浏览网页，而为移动设备设计的网站通常会比桌面网站支持移动浏览器更好地支持桌面。

[我在这里阅读了关于HTML5](http://www.html5rocks.com/en/mobile/cross-device/)岩石的 device.is：http://www.html5rocks.com/en/mobile/cross-device/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T23:02:23.920

这里面有很多争议。我个人更喜欢媒体查询。而且它们并不太复杂，我将它们放在我的css文件中`@media FOO and ( max-size: ### ) { /*stuff*/ }`

通常像 m.domain.com 这样的“移动网站”通常是一个非常精简的版本。包含一些产品、信息和联系方式。

为什么仅仅因为某人使用较小的设备就隐藏其余有价值的站点信息？由于内容更多，加载时间可能会更长一些，只需确保您的超级重要内容在首屏即可。（或至少在抽签顺序中更高）

您还可以非常轻松地包括点击呼叫和点击使用媒体查询以特定大小出现的地图按钮。

# mysql - 如何组合来自两个 MySQL 表的数据以返回按一个表中的用户条目数排序的用户列表？

> ID：11926474
> 
> 赞同：2
> 
> 时间：2012-08-12T22:49:19.883
> 
> 标签：mysql, select, multiple-tables

我目前正在使用这个 MySQL 查询：

```
$query="SELECT user, COUNT(*) AS num FROM tracks GROUP BY user ORDER BY COUNT(*) DESC"; 
```

这为每个用户提供了一个唯一的行，其中计算了“tracks”表中每个用户的条目数。

不过，并非所有用户在“曲目”表中都有一个条目，我想选择/列出页面上的所有用户。然而，所有用户都包含在另一个名为“用户”的 MySQL 表中。

因为我想显示按“tracks”表中的条目计数排序的所有用户（底部的“tracks”表中没有条目的用户），所以我认为我需要使用一个 SELECT 查询来实现这一点，但我不知道如何做到这一点，并会很高兴得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:17:09.517

你需要做一个左连接。假设您有一个“users”表，其中的“user_id”列与“tracks”表中的“user”列匹配：

```
SELECT users.user_id, count(tracks.user) from users left join tracks on (users.user_id = tracks.user) group by tracks.user order by count(tracks.user) DESC; 
```

# java - 是否可以阻止共享首选项以避免被删除？

> ID：11926482
> 
> 赞同：0
> 
> 时间：2012-08-12T22:50:39.943
> 
> 标签：java, android

默认情况下，Android 上的共享首选项可以通过手机设置删除。有没有可能阻止这个？基本上，我想存储 Android 文档中定义的共享首选项，但不允许以任何理由删除它们。即电话设置、应用程序更新或应用程序卸载。如果这不可能，您建议使用哪种存储机制来执行此操作。我需要存储的主要是原始数据。

我正在制作一个应用程序，我需要从用户那里收集某些数据并确保他只有一次机会提供它，否则她会作弊。我同意，最好的选择是将提供的数据存储在我的服务器上，但如果用户关闭互联网，这种方法将不起作用。我知道这两个要求可能很难满足。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T22:54:19.550

可以删除手机上存储的任何数据。

卸载应用程序时，将删除未保存到 SD 卡的共享首选项和文件。

卸载后保存到 SD 卡的文件将保留，但用户可以随意读取、覆盖和删除这些文件。

如果您需要真正的永久存储，最好的方法是将数据远程存储在您控制的服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T22:54:08.107

你建议做的事情对我来说听起来很危险。

请记住，当您编程时，您是在特定环境中编程。操作系统将限制你能做什么和不能做什么，以保持应用程序的一致性，提供安全性等。

如果您想使用共享首选项作为为应用程序提供试用的一种方式，或者其他一些与注册相关的问题，我不知道 Android 上的框架是什么，但我相信有更安全的方法可以做到这一点。

# javascript - 确认使用 jQuery.ajaxSettings.xhr

> ID：11926484
> 
> 赞同：2
> 
> 时间：2012-08-12T22:50:58.410
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

```
var _orgAjax = jQuery.ajaxSettings.xhr;
jQuery.ajaxSettings.xhr = function () {
    var xhr = _orgAjax();
    DoSomeLogging();
    return xhr;
}; 
```

我继承了上面的代码。有人可以确认我的理解，这将覆盖`$.ajax(...)`页面上其他任何地方的任何调用并`DoSomeLogging()`每次执行吗？

我正在寻找一个不同的错误，但偶然发现了这一点，并想确保我了解这段遗留代码的作用？

无论如何，我不相信这是一个很好的实践/使用该`xhr`功能，但有兴趣听听您的意见。我们正在使用 Jquery 1.7.1。

最后，出于好奇，如果 ( ) 调用`_orgAjax()`未能返回，日志记录方法是否会被调用？`async: false`

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T23:08:41.113

> 有人可以确认我的理解，这将覆盖页面上任何其他位置的任何 $.ajax(...) 调用并每次执行 DoSomeLogging() 吗？

是的。这将定义全局默认行为，除非在本地 ajax 实现中被覆盖。

定义全局设置的更多记录方法是使用[**ajaxSetup()**](http://api.jquery.com/jQuery.ajaxSetup/)。

但是，您也可以使用设置默认全局行为`ajaxSettings`，尽管 jQuery 文档中没有直接记录这种特殊方式。

观看[**演示**](http://jsfiddle.net/FranWahl/Sffuf/)​​- 成功

> 最后，出于好奇，如果 _orgAjax() 在 (async: false) 调用时未能返回，那么日志记录方法会被调用吗？

设置正在配置，因此无论**Esailija**`beforeSend`正确指出的异步设置如何，都将始终调用日志记录方法。

 **参见[**DEMO**](http://jsfiddle.net/FranWahl/d3PzG/1/) - with `async: true`, 在 return 之前调用 logging
参见[**DEMO**](http://jsfiddle.net/FranWahl/d3PzG/) - with `async: false`, logging 也在 return 之前调用

但是请注意，根据[**ajax 文档**](http://api.jquery.com/jQuery.ajax/)：

> *从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false*
> *；您必须使用完成/成功/错误回调。*

我知道您使用的是 1.7.1，但如果某些东西被弃用，通常是有充分理由的，我认为为此做准备没有任何害处。

要在默认情况下配置 ajax 登录`complete`：

请参阅[**演示**](http://jsfiddle.net/FranWahl/aTpmX/)- 为文档配置默认日志记录`complete`。我知道这会使您的日志记录在发送之后而不是在发送之前执行，但这似乎是我认为 1.8 更喜欢它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:06:18.847

嗯，你可以：

```
$.ajaxSetup({
    beforeSend: function () {
        doSomeLogging();   
    }
}); 
```

这肯定比重新定义要简单`$.ajaxSettings.xhr`。**

# sass - 将像素转换为 em 的 Sass 函数

> ID：11926485
> 
> 赞同：4
> 
> 时间：2012-08-12T22:51:02.913
> 
> 标签：sass

在 Sass 中使用这个函数：

```
@function pem($pxval, $base: 16) {

         @return #{$pxval / $base}em ;
}

```

（来源：[https](https://gist.github.com/2237465) ://gist.github.com/2237465 ）

`pem(16)`返回`1em`，没关系，但是`pem(16px)`返回`1pxem`。

这个函数如何接受这两种类型的输入？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T02:53:16.833

这似乎是 SASS 的[unitless()](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#unitless-instance_method)函数的一个很好的用途。

```
@function pem($pxval, $base: 16) {
  @if (unitless($pxval)) {
    $pxval: $pxval * 1px;
  }

  @if (unitless($base)) {
    $base: $base * 1px;
  }

  @return $pxval / $base * 1em;
} 
```

# java - 如何使用 Hibernate 将数据流式传输到数据库 BLOB（没有内存中存储在字节 [] 中）

> ID：11926487
> 
> 赞同：12
> 
> 时间：2012-08-12T22:51:22.627
> 
> 标签：java, database, hibernate, stream, blob

我正在寻找一种将二进制数据流式传输到数据库的方法。如果可能的话，我希望用 Hibernate 来完成（以与数据库无关的方式）。我发现的所有解决方案都涉及将二进制数据作为字节 [] 显式或隐式加载到内存中。我需要避免它。假设我希望我的代码能够使用不超过 256Mb 的内存将来自数据库（存储在 BLOB 列中）的 2GB 视频写入本地文件，或者相反。这显然是可以实现的，并且不涉及巫术。但我找不到办法，现在我试图避免调试 Hibernate。

让我们看一下示例代码（记住 -Jmx=256Mb）。

实体类：

```
public class SimpleBean {
    private Long id;
    private Blob data;
    // ... skipping getters, setters and constructors.
} 
```

休眠映射片段：

```
<class name="SimpleBean" table="SIMPLE_BEANS">
    <id name="id" column="SIMPLE_BEAN_ID">
        <generator class="increment" />
    </id>
    <property name="data" type="blob" column="DATA" />
</class> 
```

测试代码片段：

```
Configuration cfg = new Configuration().configure("hibernate.cfg.xml");
ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
                                      .applySettings(cfg.getProperties())
                                      .buildServiceRegistry();

SessionFactory sessionFactory = cfg.buildSessionFactory(serviceRegistry);
Session session = sessionFactory.openSession();
session.beginTransaction();

File dataFile = new File("movie_1gb.avi");
long dataSize = dataFile.length();
InputStream dataStream = new FileInputStream(dataFile);

LobHelper lobHelper = session.getLobHelper();
Blob dataBlob = lobHelper.createBlob(dataStream, dataSize);

session.save( new SimpleBean(data) );
session.getTransaction().commit(); // Throws java.lang.OutOfMemoryError
session.close();

blobStream.close();
sessionFactory.close(); 
```

运行该片段时，我得到 OutOfMemory 异常。查看堆栈跟踪显示 Hibernate 尝试将流加载到内存中并获得 OutOfMemory（应该如此）。这是堆栈跟踪：

```
java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2271)
at java.io.ByteArrayOutputStream.grow(ByteArrayOutputStream.java:113)
at java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:93)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:140)
at org.hibernate.type.descriptor.java.DataHelper.extractBytes(DataHelper.java:183)
at org.hibernate.type.descriptor.java.BlobTypeDescriptor.unwrap(BlobTypeDescriptor.java:121)
at org.hibernate.type.descriptor.java.BlobTypeDescriptor.unwrap(BlobTypeDescriptor.java:45)
at org.hibernate.type.descriptor.sql.BlobTypeDescriptor$4$1.doBind(BlobTypeDescriptor.java:105)
at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92)
at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:305)
at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:300)
at org.hibernate.type.AbstractSingleColumnStandardBasicType.nullSafeSet(AbstractSingleColumnStandardBasicType.java:57)
at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2603)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2857)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3301)
at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)
at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275)
at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:403)
at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
at ru.swemel.msgcenter.domain.SimpleBeanTest.testBasicUsage(SimpleBeanTest.java:63)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 
```

使用休眠 4.1.5.SP1。确切的问题是：当使用 Hibernate 在数据库中存储 blob 时，如何避免将流加载到内存中，而不是使用直接流。我想避免关于为什么将视频存储在数据库列中而不是将其存储在某些内容存储库和链接中的话题。请考虑将其视为与问题无关的模型。

似乎在不同的方言上可能有某种功能，Hibernate 可能会尝试将所有内容加载到内存中，因为底层数据库不支持流 blob 或类似的东西。如果是这样的话 - 我想看看不同方言在处理 blob 方面的某种比较表。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:44:16.853

对于那些寻找相同事物的人。

我的错，对于 PostgreSQL（可能还有很多其他人），代码按预期工作（流而不试图复制到内存）。Hibernate 的内部工作取决于选择的方言。我首先使用的那个覆盖了直接使用流，支持由 byte[] 支持的 BinaryStream。

性能也没有问题，因为它在 PostgreSQL 的情况下只加载 OID（数字），而在其他方言的情况下可能会延迟加载数据（包括 byte[] 实现）。只是运行了一些肮脏的测试，在 10000 个实体负载中有和没有二进制数据字段的情况下没有明显的差异。

将数据存储在数据库中似乎比仅将其作为外部文件保存在磁盘上要慢。但它在备份、处理特定文件系统的限制或并发更新等时为您省去了很多麻烦。但这是一个题外话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-26T10:23:29.497

您使用 Hibernate 的 lobHelper 的解决方案应该可以工作，但您可能需要确保强制使用流。设置属性 hibernate.jdbc.use_streams_for_binary = true 这是系统级属性，所以必须在启动时设置（我在测试时在命令行中定义了它：

```
java -Dhibernate.jdbc.use_streams_for_binary=true blobTest 
```

您可以证明它在您的代码中已更改：

```
Object prop = props.get("hibernate.jdbc.use_streams_for_binary");
System.out.println("hibernate.jdbc.use_streams_for_binary" + "/" + prop); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T23:12:55.527

您将 存储`Blob`在您的 POJO`SimpleBean`中。这意味着如果 blob 大于您的堆空间，则无论何时使用此对象或访问该`data`字段，您都会得到 ，`OutOfMemoryError`因为整个事物已加载到内存中。

我认为没有办法在休眠中使用 Stream 设置或获取数据库字段，并且 HQL 仅插入到 SELECT 语句中。

您可能需要做的是`data`从对象中删除该字段，`SimpleBean`以便在加载或保存时它不会存储在内存中。但是当你需要保存一个blob时，你可以使用hibernate的`save()`创建行，然后使用[jdbc PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)和`setBinaryStream()`方法。当你需要访问流时，你可以使用hibernate的`load()`方法来获取一个`SimpleBean`对象并做一个jdbc select来获取一个`ResultSet`然后使用该`getBinaryStream()`方法来读取blob。文档`setBinaryStream()`说：

> 将根据需要从流中读取数据，直到到达文件结尾。

所以数据不会完全存储在内存中。

# android - ViewPager：膨胀视图的 SetText

> ID：11926489
> 
> 赞同：0
> 
> 时间：2012-08-12T22:52:19.933
> 
> 标签：android, android-viewpager, settext

我正在尝试使用 ViewPager 在布局中设置 TextView 的文本。这是我的代码：

```
 setContentView(R.layout.main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.Panel);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

    String text;

    if (Math.floor(hours) <= 12)
        text= hourFormat.format((Math.floor(hours)));

    else
        text= hourFormat.format((Math.floor(hours) - 12));

    Typeface FontType = Typeface.createFromAsset(this.getAssets(),"fonts/TIMES_SQ_0.TTF");

    View sResource = getLayoutInflater().inflate(R.layout.setup, null);
    Method = (TextView) sResource.findViewById(R.id.Method);
    Method.setTypeface(FontType);
    Method.setTextSize(20);
    Method.setText(text); 
```

ViewPager 工作正常，设置字体和大小不起作用。设置文本也不起作用。我不知道为什么 setText 不起作用。此外，该文本是动态的，因此我不能使用资源字符串来设置它。

澄清一下：小时是一天中的小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:57:39.503

好吧，在这段代码中，您初始化`text`但从不为其分配任何值。

```
String text;

...

Method.setText(text); 
```

执行以下操作：

```
String text;

...

text = "my text";    

Method.setText(text); 
```

或者，如果您将其分配到其他地方，只需删除`String text;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:58:50.607

如果你想分配一个值，你必须给你`String text`一个值。像这样的东西：

```
String text = "This is the text I want in my view"; 
```

添加后，它应该可以工作。

# c - 如何仅将 1000 个随机数 1-10 传递给 scanf 以便我可以输出每次出现的次数？

> ID：11926493
> 
> 赞同：0
> 
> 时间：2012-08-12T22:54:04.287
> 
> 标签：c

我的目标是生成一个程序，它可以从用户（srand）那里获取一个随机数，然后将它提供给一个随机数生成器（rand），然后在 1 到 10 之间选择一个随机数的 1000 次迭代。然后我想输出每个数字有多少被看到（即 7 出现 83 次，等等）。

在从用户那里获取初始数字后，我可以随机打印 1 到 10 之间的 1000 个数字，但无法弄清楚如何获取此输出并将其提供给一个数组，然后该数组可用于分解信息印刷。有人可以帮忙吗？

```
#include <stdio.h>
#include <stdlib.h>

int rand1(void);
void srand1(unsigned int seed);

int main()

{
    int rand_array[1000];
    int count;
    int start=1;
    int end=10;
    int number_var;
    int ones=0;
    int twos=0;
    int threes=0;
    int fours=0;
    int fives=0;
    int sixes=0;
    int sevens=0;
    int eights=0;
    int nines=0;
    int tens=0;
    int frequency[11];
    int i=0;

    unsigned seed;

    printf("Please enter your choice for seed.\n");
    printf("(between 1-10)");

    while (scanf("%u", &seed) == 1)

    {
        srand1(seed);

        for(i=0; i < 1000; i++)
        {
            rand_array[i]=rand1()%(end-start+1)+start;
            frequency[rand_array[i]]++;
        }

        for(i = 1; i < 11; i++)
        {
            printf("There are %d %d's\n", frequency[i], i);
        }

    }

    return 0;

}

int rand1(void)

{
    static unsigned long int next = 1;

    next = next * 1103515245 + 12345;
    return (unsigned int) (next/65536) % 32768;
}

void srand1(unsigned int seed)

{
    static unsigned long int next = 1;
    next = seed;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T23:00:04.400

您可以有一个大小为 10（或 11）的数组，类型为整数，其中每个插槽代表生成该数字的次数。例如，槽 3 表示生成 3 的次数。所以试试这个：

```
//declare array to hold frequencies
int frequency[11];

//reset all slots to 0
for(int i = 1; i < 11; i++)
{
  frequency[i] = 0;
}

//for each random number, increment the associated slot in the frequency array
for(int i = 0; i < 1000; i++)
{
  frequency[rand_array[i]]++;
}

//print the results
for(int i = 1; i < 11; i++)
{
  printf("There are %d %d's\n", frequency[i], i);
} 
```

注意：我并没有真正阅读您现有的大部分代码，所以我不确定您是否还有其他问题。

编辑：这是一个一般想法的例子。

假设你有一些随机数：

```
5, 2, 4, 9, 9, 2, 1, 10 
```

您的`frequency`数组从 0 开始：

```
[0,0,0,0,0,0,0,0,0,0] 
```

所以现在我们遍历你的随机数，并增加相关的插槽。

比如我们读取5，现在我们的频率数组是：

```
[0,0,0,0,1,0,0,0,0,0] 
```

然后2：

```
[0,1,0,0,1,0,0,0,0,0] 
```

然后是4：

```
[0,1,0,1,1,0,0,0,0,0] 
```

然后是 9：

```
[0,1,0,1,1,0,0,0,1,0] 
```

再次

```
[0,1,0,1,1,0,0,0,2,0] 
```

在末尾：

```
[1,2,0,1,1,0,0,0,2,1] 
```

现在我们知道每个数字有多少！假设我们想知道有多少个 9，我们只看第 9 个插槽，我们看到有 2 个。

这更有意义吗？这比为每个数字设置 10 个单独的变量，然后说“如果数字是 1，增加我的 1s 变量，如果是 2，增加 2s 变量”要好得多。另外，如果您有 1 到 100 而不是 1-10 之间的随机数，那么调整您的代码会容易得多。

# java - 数组索引超出范围但不应该

> ID：11926506
> 
> 赞同：1
> 
> 时间：2012-08-12T22:56:43.407
> 
> 标签：java, arrays, exception, indexoutofboundsexception

我正在制作一个非常简单的 java 程序，但出现以下错误（其中*n*是基于控制台先前输入的随机数）：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: n 
```

应该引起麻烦的行是这里的 if 语句：

```
for(int i = 0; 0 < x; i++){
    if(TalArray[i] < min){
         min = TalArray[i];
    }
} 
```

变量“min”先前已初始化为 TalArray[0] 并跟踪最低数字。提到的所有变量都是整型变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:59:52.887

正确的代码是...

```
for(int i = 0; i < x; i++){
    if(TalArray[i] < min){
        min = TalArray[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:00:15.990

目前尚不清楚`x`代码中的值是什么，但无论如何循环条件应该如下所示：

```
for (int i = 0; i < TalArray.length; i++) 
```

或者像这样，避免在每次迭代时访问长度：

```
for (int i = 0, x = TalArray.length; i < x; i++) 
```

比较是错误的`0 < x`：你没有修改`x`循环内部的值，所以循环要么进入无限循环，要么根本不进入循环，这取决于`x`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:00:36.987

问题是，你的变量`X`永远不会改变，所以你的条件`0 < x`总是`true`。

我想正确的条件是

```
for(int i = 0; i < x; i++) 
```

# iphone - 如何保护我的应用程序的一部分不受某些用户的影响（即，其中一个选项卡式视图只能由某些用户看到）

> ID：11926520
> 
> 赞同：1
> 
> 时间：2012-08-12T22:59:14.747
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我正在构建我的第一个 iOS 应用程序（不仅仅是示例等），我将尝试将其放在应用程序商店中。我将为 iPhone/ipad 和使用 iOS 5.0 制作这个。

我正在考虑让我的应用程序具有选项卡式视图。我将有一个基本用户和一个“会员”用户。成员用户将有权访问基本用户无法访问的功能/视图/数据。我正在寻找两件事。一，一些关于保护/隐藏基本用户的最佳方法的想法，二，一些技术代码也有助于如何做到这一点。我有一个想法，我可能有一个所有成员都知道的密码，甚至做一个 id/密码，我将这些信息保存在 plist 或其他东西中，然后我可以`viewdidload`（也许？）导致模态视图出现并在让他们看到视图/数据之前挑战他们。

寻找任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:10:29.203

我不推荐预设密码的方法。您几乎会立即在留言板上找到已烘焙的用户名和密码。您将希望使用 Web 服务进行身份验证或将其作为应用内购买。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:07:28.380

实现这个委托方法，然后使用逻辑来决定是返回 YES 还是返回 NO：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
Parameters
tabBarController
The tab bar controller containing viewController.
viewController
The view controller belonging to the tab that was tapped by the user.
Return Value
YES if the view controller’s tab should be selected or NO if the current tab should remain active.

Discussion
The tab bar controller calls this method in response to the user tapping a tab bar item. You can use this method to dynamically decide whether a given tab should be made the active tab. 
```

# java - 使用 SIP subscribe/notify 创建简单的 P2P 搜索方法

> ID：11926522
> 
> 赞同：1
> 
> 时间：2012-08-12T22:59:43.293
> 
> 标签：java, p2p, jain-sip

我目前正在为学校作业开发基于 P2P SIP 的媒体共享应用程序的原型。

我必须使用 SIP 订阅/通知实现一个简单的搜索功能。我正在尝试了解应该如何使用订阅/通知，以及我自己如何将其用于此搜索功能。

网络被设计成每个节点有 X 个邻居，所以为了方便起见，我计划使用查询泛洪，如果节点 A 想要搜索某个文件，他会向所有邻居发送查询，他们会检查他们是否拥有该文件，然后向所有邻居发送查询或回复节点 A 等。这里的问题是如何使用订阅/通知请求。如果这很重要，我正在为 java 使用 JAIN-SIP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:07:45.293

所以我最终设法做到了。我所做的是使用问题中提到的查询泛洪。我使用包含我的搜索字符串的 SIP 订阅向我的邻居发送了一个查询。然后所有邻居在本地搜索该文件，如果找不到该文件，则订阅他们的邻居，或者如果找到该文件则通知回来。这种情况一直持续到找到文件或搜索完整个网络为止。

# asp.net-mvc - Umbraco 4 + MVC + Ninject

> ID：11926531
> 
> 赞同：3
> 
> 时间：2012-08-12T23:01:00.327
> 
> 标签：asp.net-mvc, inversion-of-control, ninject, umbraco

我最近关注了 Aaron Powell 关于使用 Umbraco 4 支持 MVC 控制器的帖子： [http](http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4) ://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4和[http://www.aaron-powell.com/ umbraco/using-mvc-in-umbraco-4-revisited](http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4-revisited)

一切都按预期工作。我可以设置控制器，它们可以在 umbraco 的页面上无缝运行。问题是我正在尝试使用 Ninject 设置 IoC，但无法使其正常工作。

我在 App_Start 中设置了一个类，它使用网络激活器附加到 PreApplicationStartMethod 并定义了我过去一直使用的内核配置：

```
 private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();

        //Standard Modules
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
        kernel.Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();
        kernel.Bind<IConfigurationManager>().To<ConfigurationManagerWrapper>().InRequestScope();

        //Security
        kernel.Bind<ISecurity>().To<Security>().InSingletonScope();
        kernel.Bind<IMembershipAuthorization>().To<MembershipAuthorization>();
        kernel.Bind<IFormsAuthorization>().To<FormsAuthorization>();

        //Registering my services, repositories, and connections
        RegisterRepositories(kernel);
        RegisterServices(kernel);
        RegisterConnections(kernel);

        GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel);

        return kernel;
    } 
```

我已经调试了解决方案，并且该代码开始运行。但是每次我调用控制器时，都不会进行注入，并且会出现“未定义无参数构造函数”错误。

有谁知道如何让 IoC 在这种情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:53:29.527

我们从头开始。使用 Umbraco 编译的二进制文件/网站而不是源代码。从那时起，我们使用 nuGet 安装了 MVC4 和 Ninject，一切似乎都运行良好。

感谢那些无论如何帮助的人！

# c# - C#网络流分片数据

> ID：11926533
> 
> 赞同：0
> 
> 时间：2012-08-12T23:01:28.290
> 
> 标签：c#, fragment, networkstream, beginread

## 我的背景

我有一个 TCP 网络程序，它通过连接发送已序列化并编码为 base64 的大型对象。我编写了一个客户端库和一个服务器库，它们都使用`NetworkStream's` `Begin/EndRead`和`Begin/EndWrite`. 这是我正在使用的（非常简化的版本）代码：

对于服务器：

```
var Server = new TcpServer(/* network stuffs */);
Server.Connect();
Server.OnClientConnect += new ClientConnectEventHandler(Server_OnClientConnect);

void Server_OnClientConnect()
{
    LargeObject obj = CalculateLotsOfBoringStuff();
    Server.Write(obj.SerializeAndEncodeBase64());
} 
```

然后客户端：

```
var Client = new TcpClient(/* more network stuffs */);
Client.Connect();
Client.OnMessageFromServer += new MessageEventHandler(Client_OnMessageFromServer);

void Client_OnMessageFromServer(MessageEventArgs mea)
{
    DoSomethingWithLargeObject(mea.Data.DecodeBase64AndDeserialize());
} 
```

客户端库有一个回调方法，`NetworkStream.BeginRead`该方法触发将`OnMessageFromServer`数据作为字符串传递的事件`MessageEventArgs`。

## 我的问题

但是，当通过 接收大量数据`BeginRead/EndRead`时，它似乎被分散在多条消息中。EG 假装这是一条很长的信息：

```
"This is a really long message except not because it's for explanatory purposes." 
```

如果那真的是一条长消息，`Client_OnMessageFromServer`可能会被称为......说三遍“长消息”的碎片部分：

```
"This is a really long messa"

"ge except not because it's for explanatory purpos"

"es." 
```

呜呜呜……***深呼吸***

将所有内容通过一个发送到`Begin/EndWrite`一个电话即可接收的最佳方式是`Client_OnMessageFromServer`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T23:13:43.420

你不能。在 TCP 上，事物的到达方式不一定与它们的发送方式相同。**您的代码**的工作是了解什么构成完整的消息，并在必要时缓冲传入的数据，直到您***拥有***完整的消息（注意不要丢弃处理过程中*下*一条消息的开始）。

在文本协议中，这通常意味着“发现换行符/空字符”。对于二进制，它通常意味着“读取消息前导中的长度标头”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T23:17:59.403

TCP 是一种流协议，没有固定的消息边界。这意味着您可以接收到消息的一部分或一个消息的结尾和另一个消息的开头。

有两种方法可以解决这个问题：

1.  更改您的协议以添加消息结束标记。这样您就可以不断收到，直到找到特殊标记。但是，这可能会导致您有一个缓冲区，其中包含一条消息的结尾和另一条消息的开头，这就是我推荐下一种方式的原因。
2.  更改协议以首先发送消息的长度。然后您将确切知道该消息有多长，并且可以在接收时倒计时，这样您就不会阅读下一条消息的开头。

# c# - 如何更改 DataGridView 中的列宽？

> ID：11926534
> 
> 赞同：19
> 
> 时间：2012-08-12T23:01:35.893
> 
> 标签：c#, sql-server, winforms, sql-server-ce, compact-database

我使用 Visual Studio 的 SQL Server Compact 3.5 创建了一个数据库和表，并将数据集作为我的数据源。在我的 WinForm 上，我有一个包含 3 列的 DataGridView。但是，我一直无法弄清楚如何让列占据 DataGridView 的整个宽度，如下图所示。

![](../Images/cd000857e561e25ac3d8506c4a7110bc.png)

我想让缩写列更宽，然后让描述列一直延伸到表单的边缘。有什么建议么？

更新：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace QuickNote
{
public partial class hyperTextForm : Form
{
    private static hyperTextForm instance;

    public hyperTextForm()
    {
        InitializeComponent();
        this.WindowState = FormWindowState.Normal;
        this.MdiParent = Application.OpenForms.OfType<Form1>().First();            
    }

    public static hyperTextForm GetInstance()
    {
        if (instance == null || instance.IsDisposed)
        {
            instance = new hyperTextForm();
        }

        return instance;
    }

    private void abbreviationsBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        this.Validate();
        this.abbreviationsBindingSource.EndEdit();
        this.tableAdapterManager.UpdateAll(this.keywordDBDataSet);
    }

    private void hyperTextForm_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'keywordDBDataSet.abbreviations' table. You can move, or remove it, as needed.
        this.abbreviationsTableAdapter.Fill(this.keywordDBDataSet.abbreviations);
        abbreviationsDataGridView.Columns[1].Width = 60;
        abbreviationsDataGridView.Columns[2].Width = abbreviationsDataGridView.Width - abbreviationsDataGridView.Columns[0].Width - abbreviationsDataGridView.Columns[1].Width - 72;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T00:09:36.537

您可以将 abbrev 列的宽度设置为固定像素宽度，然后将 description 列的宽度设置为 DataGridView 的宽度，减去其他列的宽度和一些额外边距的总和（如果您想防止从出现在 DataGridView 上的水平滚动条）：

```
dataGridView1.Columns[1].Width = 108;  // or whatever width works well for abbrev
dataGridView1.Columns[2].Width = 
    dataGridView1.Width 
    - dataGridView1.Columns[0].Width 
    - dataGridView1.Columns[1].Width 
    - 72;  // this is an extra "margin" number of pixels 
```

如果您希望描述列始终占据 DataGridView 宽度的“剩余部分”，您可以将类似上述代码的`Resize`内容放在 DataGridView 的事件处理程序中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-14T05:05:45.767

将“AutoSizeColumnsMode”属性设置为“Fill”。默认情况下，它设置为“NONE”。现在将在 DatagridView 中填充列。然后您可以相应地设置其他列的宽度。

```
DataGridView1.Columns[0].Width=100;// The id column 
DataGridView1.Columns[1].Width=200;// The abbrevation columln
//Third Colulmns 'description' will automatically be resized to fill the remaining 
//space 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-04T07:19:24.393

在我的 Visual Studio 2019 中，它仅在我将`AutoSizeColumnsMode`属性设置为`None`.

# php - 长时间运行的 MySQL 查询在 Apache 下从 PHP 运行：浏览器不输出结果并保持“正在传输数据……”

> ID：11926542
> 
> 赞同：0
> 
> 时间：2012-08-12T23:03:20.993
> 
> 标签：php, mysql, session-state, connection-timeout, long-running-processes

我有 Apache 2.2 PHP 5.3 MySQL 5.5 应用程序。page1.php 上的表单接受用户输入。使用 GET 将值传递给 page2.php。page2.php 上的 PHP 脚本运行 MySQL 查询并显示结果。根据用户输入参数查询可能会运行 3 到 900 秒。

在我的测试中，运行 < 300 秒的任何查询的结果都显示正常。更长的运行查询在服务器上可以正常完成（我看到 CPU 负载在 500 秒后从 90% 变为 0%），但浏览器没有显示结果并继续显示在状态栏中“从 my.host.org 传输数据。 ..”

此时，当我尝试在同一浏览器（Firefox）的新实例中打开我的应用程序的任何页面时，它会在选项卡标题上显示“正在连接...”，并在“等待 my.host.org ...”中显示状态栏。此时在其他浏览器（IE）中打开我的应用程序的任何页面都可以。

以下是我迄今为止更改/设置的设置，但它们没有帮助。任何想法都会有所帮助。谢谢你。

```
apache2.conf:
Timeout 300  -> 1800

php.ini:
user_ini.cache_ttl = 300  -> 1800
max_execution_time = 30  -> 1800
default_socket_timeout = 60  -> 1800
mysql.connect_timeout = 60 -> 1800

page2.php: 
ignore_user_abort(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:17:18.590

考虑到这是一个长时间运行的查询，您真的需要在浏览器窗口中运行它吗？

您应该考虑使用 Cron 作业并将输出重定向到电子邮件地址，默认情况下，在 CLI 中运行的 PHP 进程具有无限的执行时间。

作为我的最后一条帮助，如果您将 PHP 作为 (F)CGI 运行，您可能必须更改 CGI 设置以等待 PHP 进程的输出更长一点。

# erlang - 如果 Pid 快要死了，我应该关闭套接字连接吗？

> ID：11926544
> 
> 赞同：5
> 
> 时间：2012-08-12T23:04:52.907
> 
> 标签：erlang

当 Pid 死亡时，它会释放与其关联的所有文件句柄/端口。如果进程即将终止，我是否应该打扰调用类似 gen_tcp:close 或 ssl:close 之类的东西，即使它是它所做的最后一件事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T00:06:42.133

“我应该打扰”是指“我会冒内存泄漏的风险吗？”或“它会导致数据丢失吗？”或“它会影响客户端查看和关闭连接的方式吗？”

话虽如此，为了客户的利益，发出关闭命令被认为是礼貌的。客户端可能会看到连接突然中断而不是关闭。例如，如果它是一个 Web 服务器，并且您*没有*发送关闭，那么某些浏览器会将其读取为管道中断（错误）并立即尝试重新连接。正确关闭连接只是礼貌，它将有助于保持代码的逻辑组织（您*确切地*知道如何处理所有资源）。

我不是 100% 确定 erlang 如何处理垃圾收集，但我可以说对于*大多数*编程语言（因此我也假设是 erlang），终止进程将处理与之相关的所有内存，所以让进程死掉应该没有内存泄漏。

但是，如果缓冲区中还有潜在的内容要发送到客户端，您可能希望退出过程，以便在关闭之前刷新缓冲区或连接，否则您可能会冒数据丢失的风险。

**编辑**：正如legoscia所提到的，任何打开的文件描述符*都应该*由erlang优雅地处理，但是在退出进程之前自己关闭它们永远不会受到伤害（我称之为“好习惯”）。

# python - 如何与 ManyToManyField('self') 建立片面关系

> ID：11926545
> 
> 赞同：1
> 
> 时间：2012-08-12T23:04:56.773
> 
> 标签：python, django

我正在尝试在 Django 中创建一个简单的“跟随”功能，就像这样（顺便说一下，我没有使用`django.contrib.auth`，如果这有区别的话）：

```
class User(models.Model):
     followers = models.ManyToManyField('self')
     # rest of code 
```

我已经在我的网站上使用两个用户（用户 X 和用户 Y）对此进行了测试……但是当用户 X 添加到用户 Y 的关注者时，用户 Y 也添加到用户 X 的关注者中，这不是预期的结果。我怎样才能使这成为一种片面的关系？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:09:00.357

您需要使关系[不对称](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.symmetrical)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:09:25.020

默认情况下，自引用`ManyToManyField`是对称的。请参阅[文档中的以下内容](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.symmetrical)：

> ...`ManyToManyField`假设是对称的——也就是说，如果我是你的朋友，那么你就是我的朋友。
> 
> 如果您不希望在与 self 的多对多关系中对称，请将对称设置为 False。这将强制 Django 为反向关系添加描述符，允许 ManyToManyField 关系是非对称的。

您可以通过添加来实现它：

`models.ManyToManyField("self", symmetrical=False)`

# dynamics-crm-2011 - 为 Dynamics CRM 配置 Outlook - 如何验证我的 onmicrosoft.com 电子邮件地址？

> ID：11926554
> 
> 赞同：0
> 
> 时间：2012-08-12T23:07:11.830
> 
> 标签：dynamics-crm-2011

我在使用 Dynamics CRM 的 Outlook 配置向导时遇到问题。当我单击测试连接时，我收到一条消息“无法连接到 Microsoft Dynamics CRM 服务器，因为我们无法验证您的凭据。请检查我们的连接或联系您的管理员以获得更多帮助。”

该问题记录在 [http://support.microsoft.com/kb/2666080](http://support.microsoft.com/kb/2666080)

此问题的原因是未验证您的 Windows Live ID。当您注册 Windows Live ID 并且未使用 @hotmail.com 或 @live.com 电子邮件地址时，您需要先验证电子邮件地址，然后才能将其用于配置 Microsoft Dynamics CRM 客户端对于 Outlook。

但是 KB 没有解释我如何验证 onmicrosoft.com 电子邮件地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:27:40.423

我自己没有遇到过这个问题，但听起来您创建了一个带有非 Microsoft 电子邮件地址的 Live Id，例如 kirsten@kirstenscompany.com。您需要登录该电子邮件地址 (kirsten@kirstenscompany.com) 并找到来自 Microsoft 的电子邮件并单击验证链接 - 这在许多注册过程中很常见。

*这实际上在您*在“解决方案”部分下链接的知识库文章中进行了描述。

> 创建 Windows Live ID 后，会向您创建为 Windows Live ID 的电子邮件地址发送一封电子邮件。您需要登录该电子邮件帐户并单击电子邮件中的链接以验证电子邮件地址。完成后，您将能够继续为 Outlook 配置 Microsoft Dynamics CRM 客户端。

链接很可能会在一段时间后超时，在这种情况下，我会登录 Microsoft 网站上的 Live Id 帐户，这可能会让您获得另一个验证链接。

# php - 是否可以使用 C++ 库来运行本地 PHP 以在应用内 Web 浏览器中使用？

> ID：11926558
> 
> 赞同：-3
> 
> 时间：2012-08-12T23:08:22.780
> 
> 标签：php, c++, user-interface, local

我想知道是否可以在本地运行 PHP 代码以在本机 C++ 桌面应用程序中使用。作为概述，我想使用一些 HTML5/JS/PHP 库/工具作为桌面应用程序内 GUI 的组件。

我打算使用 Awesomium 或 Berkelium 之类的东西作为应用内浏览器和 GUI。有没有办法以不涉及启动任何类型的 Web 服务器的方式在本地和跨平台（windows/linux）执行此操作？

如果需要一个 Web 服务器，是否有人对沙箱它只允许本地主机，同时与 Windows 和 Linux 兼容的好方法有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:22:28.833

这当然是可能的，但是除了最简单的情况（例如，只运行一个简单的脚本并显示它的输出）之外，您最终可能会自己实现部分 CGI 堆栈。

一个更简单的方法是只运行一个为您完成所有这些工作的 Web 服务器。您如何将其限制为仅本地主机取决于您选择的网络服务器，但通常不是一项艰巨的任务，至少在流行的服务器中是这样。

# ajax - 似乎无法从 node-foridable 获取进度事件以通过 socket.io 发送到正确的客户端

> ID：11926559
> 
> 赞同：1
> 
> 时间：2012-08-12T23:08:22.737
> 
> 标签：ajax, node.js, socket.io, multipartform-data, formidable

因此，我在 node.js 上通过 ajax 构建了一个多部分表单上传器，并通过 socket.io 将进度事件发送回客户端以显示其上传状态。一切正常，直到我有多个客户端尝试同时上传。最初会发生的是，当一个上传正在进行时，当第二个启动时，它开始接收来自正在解析的两个表单的进度事件。原始表单不会受到影响，它只会接收自己的进度更新。我尝试创建一个新的强大表单对象并将其与套接字的会话 ID 一起存储在一个数组中以尝试解决此问题，但现在第一个表单在处理第二个表单时停止接收事件。这是我的服务器代码：

```
var http        = require('http'),
formidable  = require('formidable'),
fs          = require('fs'), 
io          = require('socket.io'),
mime        = require('mime'),
forms       = {};

var server = http.createServer(function (req, res) {

if (req.url.split("?")[0] == "/upload") {
    console.log("hit upload");
    if (req.method.toLowerCase() === 'post') {
        socket_id = req.url.split("sid=")[1];
        forms[socket_id] = new formidable.IncomingForm();
        form = forms[socket_id];

        form.addListener('progress', function (bytesReceived, bytesExpected) {
            progress = (bytesReceived / bytesExpected * 100).toFixed(0);

            socket.sockets.socket(socket_id).send(progress);
        });

        form.parse(req, function (err, fields, files) {
            file_name = escape(files.upload.name);

            fs.writeFile(file_name, files.upload, 'utf8', function (err) {
                if (err) throw err;
                console.log(file_name);
            })
        });
    }
}
});

var socket = io.listen(server);
server.listen(8000); 
```

如果有人可以对此提供任何帮助，我将不胜感激。几天来，我一直把头撞在桌子上，试图解决这个问题，并且真的很想解决这个问题，以便我可以继续前进。非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:22:13.390

你能试着把`console.log(socket_id);`

1.  之后`form = forms[socket_id];`和
2.  之后`progress = (bytesReceived / bytesExpected * 100).toFixed(0);`，好吗？

我觉得您可能必须将该 socket_id 包装在一个闭包中，如下所示：

```
form.addListener(
  'progress', 
  (function(socket_id) {
    return function (bytesReceived, bytesExpected) {
        progress = (bytesReceived / bytesExpected * 100).toFixed(0);
        socket.sockets.socket(socket_id).send(progress);
    };
  })(socket_id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:20:35.363

问题是您没有声明`socket_id`and `form`，`var`因此它们实际上是`global.socket_id`and`global.form`而不是您的请求处理程序的局部变量。因此，由于回调是指全局而不是正确的闭包，因此单独的请求会相互交叉。

rdrey's solution works because it bypasses that problem (though only for `socket_id`; if you were to change the code in such a way that one of the callbacks referenced `form` you'd get in trouble). Normally you only need to use his technique if the variable in question is something that changes in the course of executing the outer function (e.g. if you're creating closures within a loop).

# jquery - jQuery Accordion Tab - 链接到网站，而不是页面内容

> ID：11926566
> 
> 赞同：2
> 
> 时间：2012-08-12T23:09:29.383
> 
> 标签：jquery, html

我的 jQuery Accordion 目前有 5 个选项卡。单击它们会使内容看起来像人们期望的那样。但是，我还想包含指向外部站点的链接。为了保持风格不变，我想让它们看起来也像手风琴一样。我可以让内容包含一个链接说点击这里，但我宁愿它只是一个外部链接。我能够使用 UI Widget 并从手风琴中添加样式以使其匹配，但是我遇到了两个问题。首先是 UI-Widget 选项卡不像手风琴选项卡那样具有鼠标悬停效果。第二个是 UI-Widget 选项卡中的文本不会与其他选项卡对齐（在浏览器中增加文本大小时也可以看到它是相同的。）

```
<a href="http://apple.com/">
<div class="ui-widget" style="margin: 0px 20px;">
    <div class="ui-state-default ui-corner-all" style="margin: 0px; padding: .5em;">
        <h3 class="ui-helper-reset" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1"><span class="ui-icon ui-icon-extlink" style="float: left;"></span><a href="#">Apple</a></h3></div>
</div>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:39:42.480

一种方法是将单独的`click`事件附加到链接元素：

```
$("#linkId").click(function() {
    window.location.href = "http://apple.com/";
}); 
```

这样，其余功能保持不变，您将获得一个外部链接。有关更多信息，请参见[jsFiddle](http://jsfiddle.net/p5aws/1/)。

**更新**

如果您不希望此链接的默认手风琴行为，您可以关闭所有其他`click`可能影响它的事件。就像是：

```
$("#linkId").parentsUntil("#accordion").off("click"); 
```

请参阅[jsFiddle](http://jsfiddle.net/p5aws/2/)。

# jquery - 通过 jQuery 自动添加表格行

> ID：11926569
> 
> 赞同：0
> 
> 时间：2012-08-12T23:10:19.857
> 
> 标签：jquery, html-table

我正在尝试通过 jQuery 动态添加表格行。一切正常，但该行不会将自身添加到最后一个 <tr>。相反，它将自身添加到 <table>...

我很困惑。谁能帮帮我？这是代码

**Javascript**

```
var counterx = 2;
var counter = 2;

$(document).ready(function(){
    $("#addMoreRcpt").click(function(){
        if (counterx>10){
            alert("Only 10 reciepients are allowed");
            return false;
        }

        var newTextBoxDiv = $(document.createElement('div')).attr("id", 'RcptEml_' + counter);
        newTextBoxDiv.append("<tr><td>New Data</td><td>New Data</td><td>New Data</td></tr>");

        newTextBoxDiv.appendTo("#RcptGroup");
        counter++;
        counterx++;
    });
});

function fncDelRcpt(id){
    $("#RcptEml_"+id).remove();
    counterx--;
} 
```

**HTML**

```
<table border=1>
<div id="RcptGroup">
<tr>
    <th>1</th>
    <th>2</th>
    <th>3</th>
</tr>
<div id="1">
<tr>
    <td>data</td>
    <td>Data</td>
    <td>data</td>
</tr>
</div>
</div>

</table>
<br /><a id="addMoreRcpt" href="#" >Add more reciepients</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:18:25.807

这是您应该工作的代码的更改部分：

**剧本：**

```
$(document).ready(function() {
    $("#addMoreRcpt").click(function() {
        if (counterx > 10) {
            alert("Only 10 reciepients are allowed");
            return false;
        }
        var newTextBoxRow = $(document.createElement('tr')).attr("id", 'RcptEml_' + counter);
        newTextBoxRow.append("<td>New Data</td><td>New Data</td><td>New Data</td>");
        newTextBoxRow.appendTo("#RcptGroup");
        counter++;
        counterx++;
    });
});​ 
```

**桌子：**

```
<table border="1" id="RcptGroup">
    <tr id="0">
        <th>1</th>
        <th>2</th>
        <th>3</th>
    </tr>
    <tr id="RcptEml_1">
        <td>data</td>
        <td>Data</td>
        <td>data</td>
    </tr>
</table>​​​​​​​​​​​​ 
```

* * *

工作小提琴：http: [//jsfiddle.net/pratik136/2au73/5/](http://jsfiddle.net/pratik136/2au73/5/)

* * *

正如对您问题的评论中所建议的那样，`<Div/>`s 不能嵌套在`<Table/>`s 中。这是 的指南`HTML 4.01`，但几乎所有内容都应该适用：[http ://www.cs.tut.fi/~jkorpela/html/nesting.html](http://www.cs.tut.fi/~jkorpela/html/nesting.html)

# javascript - 无法找出在 YouTube API 中转义 json 引号的方法

> ID：11926572
> 
> 赞同：5
> 
> 时间：2012-08-12T23:10:58.410
> 
> 标签：javascript, jquery, python, youtube, youtube-api

我正在使用 YouTube API，并且正在使用 Python urllib2.urlopen() 发送 GET 请求。然后我将结果传递给 Javascript。（我正在使用 Django）

所以，像这样：

```
result = urllib2.urlopen('https://gdata.youtube.com/feeds/api/videos?'+query+'&max-results=1&alt=json') 
```

我正在使用 jQuery 解析 JSON 格式的响应，但是一些 YouTube 视频/描述有双引号，这会破坏 parseJSON() 函数。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:48:46.160

错误出现在我的最后（显然）..错误始于我没有意识到 Django 出于安全原因自动转义 HTML 字符，并且我用自己的方式忽略了特殊的 HTML 字符，如 & quot; 最终导致 json 格式错误。

使用 {{ var|safe }} 转义特殊 HTML 字符的简单解决方法（如果有人使用 django 并遇到此问题）是使用 {{ var|safe }} ..

# c# - 在拉伸的窗口窗体图像上写普通文本

> ID：11926577
> 
> 赞同：1
> 
> 时间：2012-08-12T23:11:45.577
> 
> 标签：c#, winforms

我有一个图像以被拉伸到其原始大小的 3 倍的形式显示。
我想在图像上写文本，而不是拉伸文本。
这可能吗？如果可以，怎么做？

我试过（在刷新方法中）：

```
 //On Form            //my Bitmap
    ImageDisplay.Image = IntensityBMP;
    Graphics g = Graphics.FromImage(ImageDisplay.Image);
    g.DrawString("MyText", new Font("Tahoma", 8), Brushes.White, etc);

and

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawString("MyText", new Font("Tahoma", 8), etc);
        base.OnPaint(e);
    } 
```

两者都在预拉伸的图像上绘制文本，导致像素化、过大的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:37:03.447

您需要在 PictureBox 呈现它的图像后绘制文本。

任何一个：

```
myForm.pictureBox1.Paint += PictureBoxPaintEvent;
private void PictureBoxPaintEvent(object sender, PaintEventArgs e)
{
   e.Graphics.DrawString("MyText", myFont, ....);
} 
```

或者

创建一个`PictureBox`派生类并覆盖`Paint`

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    e.Graphics.DrawString("MyText", new Font("Tahoma", 8), etc);
} 
```

# java - 类型不匹配：无法从元素类型 Object 转换为 String

> ID：11926578
> 
> 赞同：0
> 
> 时间：2012-08-12T23:12:10.917
> 
> 标签：java, mysql, jdbc

有人可以看看这个并告诉我为什么我会收到这个错误。我正在尝试从 Mysql 数据库中提取表并将其打印到文本文件中。我给了我上面列出的错误。

```
package db;

import java.io.*;
import java.sql.*;
import java.util.*;

public class TableToTextFile {
    public static void main(String[] args) {
        List<int[]> data = new ArrayList();

        try {
            Connection con = null;
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/test", "root", "root");
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("Select * from employee");

            while (rs.next()) {
                String id = rs.getString("emp_id");
                String name = rs.getString("emp_name");
                String address = rs.getString("emp_address");
                String contactNo = rs.getString("contactNo");
                data.add(id + " " + name + " " + address + " " + contactNo);

            }
            writeToFile(data, "Employee.txt");
            rs.close();
            st.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    private static void writeToFile(java.util.List list, String path) {
        BufferedWriter out = null;
        try {
            File file = new File(path);
            out = new BufferedWriter(new FileWriter(file, true));
            for (String s : list) {
                out.write(s);
                out.newLine();

            }
            out.close();
        } catch (IOException e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T23:15:43.083

可能是因为您的列表已被声明为接受整数数组并且您正在传递一个字符串。

```
List<int[]> data = new ArrayList(); 
```

改为接受字符串。

```
List<String> data = new ArrayList<>(); 
```

一个更好、更面向对象的设计是创建一个名为`Employee`并使用它的类。

```
public class Employee {
    private String id;
    private String name;
    ...
}

List<Employee> data = new ArrayList<>(); 
```

# android - Android 位图另存为奇怪的线条

> ID：11926579
> 
> 赞同：0
> 
> 时间：2012-08-12T23:12:12.233
> 
> 标签：android, image, lines, htc-thunderbolt

当我保存在某些设备上拍摄的照片时，它会保存为一些奇怪的线条。我不知道如何描述这张图片的外观，所以这里是：

![在此处输入图像描述](../Images/8d32d17d910ccc253c461d83d9a1da0e.png)

我的代码在大多数设备上都能完美运行，但我们有两个用户使用以下设备发言。
1\. HTC Thunderbolt
2\. HTC Inspire
有人知道这是怎么回事吗？这是我的代码：

```
PictureCallback jpegCallback = new PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {
        mPreview.mCamera.startPreview();
        Log.e(TAG, "onPictureTaken - jpegCallback");

        try {
            // start camera saving system
            CameraPhoneStorageSystem camStorageSys = new CameraPhoneStorageSystem(
                    mContext);
            FileOutputStream out = null;

            String str = CameraPhoneStorageSystem
                    .returnImageNewNameForExternalMemory();
            galleryAddPic(str);

            out = new FileOutputStream(str);
            // mutableBitmap.compress(CompressFormat.JPEG, 85, out);
            out.write(data, 0, data.length);

            out.flush();
            out.close();
            out = null;
            Toast.makeText(mContext, "saved..", Toast.LENGTH_SHORT).show();

        } catch (IOException e) {
            Toast.makeText(
                    mContext,
                    "Error: Problem Saving Image.. Please check device memory",
                    Toast.LENGTH_SHORT).show();
            Log.e("saving", "problem saving images", e);

        } catch (Exception e) {
            // fail
            Log.d(TAG, "ERROR: " + e.getMessage());
        } finally {
            anyPicturesTaken = true;
            progressBar.setVisibility(View.GONE);
            snapButton.setVisibility(ImageButton.VISIBLE);
            Runtime.getRuntime().gc();

        }

    }

}; 
```

感谢您的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:41:42.873

这是因为您的设备不支持该图像，请检查此链接，在这里询问和回答

[Android byte[] 到 Camera.onPreviewFrame 中的图像](https://stackoverflow.com/questions/5212531/android-byte-to-image-in-camera-onpreviewframe)

希望它会有所帮助！

# c++ - 当我更改 g++ 参数的顺序时，为什么我的程序无法链接？

> ID：11926580
> 
> 赞同：7
> 
> 时间：2012-08-12T23:12:34.933
> 
> 标签：c++, boost, compilation, linker, g++

> **可能重复：**
> [为什么 gcc 中“-l”选项的顺序很重要？](https://stackoverflow.com/questions/11893996/why-does-the-order-of-l-option-in-gcc-matter)

我开始学习 Boost 单元测试框架。我有一个最小的测试套件：

```
#define BOOST_TEST_MAIN
#define BOOST_TEST_DYN_LINK 
#include <boost/test/unit_test.hpp>

BOOST_AUTO_TEST_CASE( test1 ) {
    BOOST_CHECK( 2 == 1 );
} 
```

首先我编译源代码：

```
g++ -c src/tests.cc -o src/tests.o 
```

这样就完成了，没有错误。然后我可以链接如下：

```
g++ -o tests src/tests.o -lboost_unit_test_framework 
```

这也没有错误地完成。生成的二进制文件以预期结果执行。`src/tests.o`但是，如果我交换and的顺序`-lboost_unit_test_framework`，我会得到链接器错误：

```
g++ -o tests -lboost_unit_test_framework src/tests.o 
```

```
src/tests.o：在函数“main”中：
tests.cc:(.text+0x29): undefined reference to `boost::unit_test::unit_test_main(bool (*)(), int, char**)'
src/tests.o：在函数“test1::test_method()”中：
tests.cc:(.text+0x9d): 未定义引用`boost::unit_test::unit_test_log_t::set_checkpoint(boost::unit_test::basic_cstring, unsigned int, boost::unit_test::basic_cstring)'
tests.cc:(.text+0x146): undefined reference to `boost::test_tools::tt_detail::check_impl(boost::test_tools::predicate_result const&, boost::unit_test::lazy_ostream const&, boost::unit_test:: basic_cstring, unsigned int, boost::test_tools::tt_detail::tool_level, boost::test_tools::tt_detail::check_type, unsigned int, ...)'
src/tests.o：在函数“__static_initialization_and_destruction_0(int, int)”中：
tests.cc:(.text+0x24d): undefined reference to `boost::unit_test::ut_detail::auto_test_unit_registrar::auto_test_unit_registrar(boost::unit_test::test_case*, unsigned long)'
src/tests.o：在函数`boost::unit_test::unit_test_log_t::unit_test_log_t()'中：
tests.cc:(.text._ZN5boost9unit_test15unit_test_log_tC2Ev[_ZN5boost9unit_test15unit_test_log_tC5Ev]+0x21): undefined reference to `vtable for boost::unit_test::unit_test_log_t'
src/tests.o: 在函数`boost::unit_test::make_test_case(boost::unit_test::callback0 const&, boost::unit_test::basic_cstring)'中：
tests.cc:(.text._ZN5boost9unit_test14make_test_caseERKNS0_9callback0INS0_9ut_detail6unusedEEENS0_13basic_cstringIKcEE[boost::unit_test::make_test_case(boost::unit_test::callback0 const&, boost::unit_test::basic_cstring)]+0x1d): 未定义引用`boost::unit_test ut_detail::normalize_test_case_name(boost::unit_test::basic_cstring)'
tests.cc:(.text._ZN5boost9unit_test14make_test_caseERKNS0_9callback0INS0_9ut_detail6unusedEEENS0_13basic_cstringIKcEE[boost::unit_test::make_test_case(boost::unit_test::callback0 const&, boost::unit_test::basic_cstring)]+0x5d): 未定义引用`boost::unit_test test_case::test_case(boost::unit_test::basic_cstring, boost::unit_test::callback0 const&)'
src/tests.o：在函数`boost::unit_test::unit_test_log_t::~unit_test_log_t()'中：
tests.cc:(.text._ZN5boost9unit_test15unit_test_log_tD2Ev[_ZN5boost9unit_test15unit_test_log_tD5Ev]+0xb): undefined reference to `vtable for boost::unit_test::unit_test_log_t'
collect2: ld 返回 1 个退出状态

```

为什么我的参数顺序会导致链接器错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T23:16:25.127

*当 GCC 执行链接时，库会被特殊处理：只有在命令行列表中位于库之前*的目标文件中缺少的符号才会从库中填充。如果在库之后还有其他对象文件*，*则不会在库中查找该对象中缺少的符号。

简而言之，首先列出您的目标文件，最后列出库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T23:15:36.453

> 链接器的传统行为是在命令行指定的库中从左到右搜索外部函数。这意味着包含函数定义的库应该出现在使用它的任何源文件或目标文件之后。这包括使用快捷方式 -l 选项指定的库，如以下命令所示：

[http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html)

# request - 烧瓶：wsgi 中间件与 before_ 和 after_request()

> ID：11926582
> 
> 赞同：11
> 
> 时间：2012-08-12T23:12:53.497
> 
> 标签：request, response, flask, wsgi, middleware

`before_request()`我发现使用 Flask和/或`after_request()`与使用 WSGI 中间件的区别到底是什么让我感到非常困惑。

假设我想做一些非常愚蠢的事情：

*   每个请求正文都应扫描“bacon”一词并替换为“eggs”。
*   现在请求命中flask-view（根据url-mapping），view-function创建响应
*   每个响应体都应该扫描“鸡蛋”并替换为“培根”

我会使用 WSGI 中间件还是 Flask 函数？来自 django 的一个非常强大的中间件套件，我不清楚区别。

提前致谢。伯尼

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T02:11:25.290

实际上，您在 Django 中拥有完全相同的选择。Django 在某些方面是基于 WSGI 构建的，所以理论上你也可以在 Django 中编写 WSGI 中间件或 Django 中间件。您没有混淆的原因是 Django 社区通常会引导开发人员远离 WSGI 中间件。一个原因是由于 Django 被设计为在[mod_python](http://modpython.org/)和 WSGI 上同样工作。通过使用 Django 中间件，您的中间件可以在两个系统上运行（参见[James Bennett 的这篇文章](http://www.b-list.org/weblog/2006/oct/21/django-and-nih/)）。

创建 WSGI 中间件的一个优点是它可以在多个框架中使用。例如，[Beaker](http://beaker.readthedocs.org/en/latest/index.html)是一个会话和缓存 WSGI 中间件，可以在任何 WSGI 框架中使用。如果它是专门用 Flask 编写的，那么 Pyramid 开发人员就无法使用它。该库的维护者特别确保该库可以在多个框架中工作，因此他将其编写为 WSGI 库。

基本上，这就是我做出决定的方式：

1.  如果您只是编写一个对您的应用程序执行特定操作的中间件，请使用框架的中间件。
2.  如果您认为您的中间件在您的一些应用程序中有用，并且可能对其他人有帮助，请仍然使用您框架的中间件（Flask 通常将其称为“扩展”）。以Flask [-SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/)为例。
3.  如果人们对您的中间件真正感兴趣并且愿意提供帮助，请考虑将其转换为 WSGI 中间件库，以便可以在其他框架中使用。

# sql - Microsoft Access - 将连续表单作为子表单加载到选项卡页中

> ID：11926586
> 
> 赞同：0
> 
> 时间：2012-08-12T23:14:28.497
> 
> 标签：sql, vba, ms-access, vbscript, ms-office

我想知道如何创建一个连续表单的子表单。我有一个包含选项卡控件的表单。在我的一个标签页上，我想托管 2 个连续表单（子表单），并根据从数据库返回的记录切换每个表单的显示。我现在拥有的是一个带有子表单的空白页面。我无法将连续表单控件拖到子表单上，也无法拖动它，它似乎也到了标签页。如何将连续表单添加到标签页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:35:09.040

一般的想法是您只需创建 continue 表单，然后保存它。现在只需打开带有选项卡控件的表单。说一个看起来像这样的表格：

![在此处输入图像描述](../Images/bf5d990f0f7b31eefbb0ea41575e0250.png)

在上面，我选择了名为定价的第二个选项卡。你可以看到我已经在这个选项卡上放置了一些控件，但我也准备好了，并将从左侧拖放到名为 tblBookOptions1 的继续表单中。

拖动时，请确保您看到整个选项卡变为“黑色”，否则这意味着您没有将表单拖动到选项卡控件上，但是当您将表单放入时可能会“丢失”它。所以突出显示必须去黑色，否则您将使用选项卡控件。

你看到这个：

![在此处输入图像描述](../Images/4c61042960bc2b42242a8dba9c13c2a1.png)

在您“放下”并放开鼠标后，在设计模式下生成的表单如下所示：

![在此处输入图像描述](../Images/cf8d847780f995f04392ebb1002444ef.png)

当然，Access 最神奇的功能是那些子表单，实际上我可以将上面的整个复杂表单拖放到另一个表单中，使用相同的拖放操作。

结果是令人难以置信的子表关系数据建模，并且无需编写一行代码即可维护此类相关结构。

由此产生的形式可以有几个连续的形式。在以下示例中，顶部有一个继续表单（不在选项卡后面）。您还可以看到在下半部分显示为网格的生成的继续表单 - 并注意它是如何根据在这种情况下选择的选项卡（定价）显示的。

![在此处输入图像描述](../Images/9aec8e19fd76c25684081780fa5a8f17.png)

# iis - 网站面板和/或 IIS：为用户创建全局 DNS/子域重定向以访问控制面板。即cp.whateverdomain.com

> ID：11926589
> 
> 赞同：1
> 
> 时间：2012-08-12T23:14:58.607
> 
> 标签：iis, iis-7, dns

根据我的主题，我需要有关创建 [cp].whateverdomain.com 的想法/帮助，并在遇到问题时加载控制面板。

我希望这是一个“全局”设置，影响所有域。我了解绑定到端口，但我不了解如何将控制面板“绑定”到所有域的 [cp] 子域。

所以基本上，用户将通过 cp.domain.com 登录，而不是 domain.com:9001

我将不胜感激了解这是如何发生的，即在其他服务器/设置上。Arvixe 使用 cp.domain 进行所有控制面板访问。我还在研究其他各种情况，我想将全局子域/指针用于不同的事情，因此我想“了解” DNS 、 IIS 和网站面板需要发生什么，以实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T07:03:34.757

简而言之，如果我没记错的话，您需要一个额外的 IP 来处理诸如此类的独特事物。您需要将子域“绑定”到该 ip，它应该解析其他 ip 上的所有域。我可能有点偏离轨道，这对我来说是不久前的事了。我不想为 cp 提供我的一个 ip，所以我只是坚持使用端口。

# php - 无法通过 ajax 将数组发送到 php 并返回

> ID：11926590
> 
> 赞同：-1
> 
> 时间：2012-08-12T23:15:01.930
> 
> 标签：php, javascript, jquery, ajax, json

我试图在我的页面上获得一个按钮，该按钮最终将成为一个可以工作的删除按钮。但是，因为它是一个`<li>`元素，而不是带有表单等的普通提交按钮......我必须使用 ajax 发送所有要处理的变量，目前我只希望它们处于可以处理它们的状态，但目前我的脚本似乎没有像我想要的那样返回任何值并输出它们。

希望从下面的代码中你会明白我的意思，我现在需要做的就是从选中的复选框中选择所有值并将其发送到 mail_trash.php，然后将其发送回并输出数组，所以我可以看到它正在选择正确的值等...实际的删除 php 代码已经编写并可以工作，这只是为了检查 Ajax。

这是javascript和ajax

```
 <script>
        $("document").ready(function (){ 

           $("li.trash").click(function(e){  
                 var db = $(':checkbox:checked').map(function(i,n) {
                    return $(n).val();
                 }).get(); //get converts it to an array

             if(db.length == 0) { 
             db = "none"; 
           }        

    $.ajax({
            type: "GET",
            url: "mail_trash.php",
            data: {'db[]':db  },
            dataType: "json",
            statusCode: {
                200: function (response) {
                                                                                           $("#mail_header_name").html(response.mess_id);

                                         }

            }
        });
    });

});

</script> 
```

这是 mail_trash.php 的脚本

```
 <?php

    include 'connect_to_mysql.php';

    $mess_id = $_GET["db"];
    echo json_encode($mess_id);

?> 
```

只是为了检查一下

*   按钮

    ```
    <li><a class="trash" href="">&nbsp;</a></li> 
    ```

    非常感谢您的帮助，这在过去的几个小时里一直困扰着我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:53:08.090

这不是垃圾。它是 a.trash 因为垃圾是 a 元素的一个类。因此，js的前三行应该是：

```
 <script>
    $("document").ready(function (){ 

       $("a.trash").click(function(e){ 
```

然后你剩下的代码以此类推。我没有必要检查你的其余代码，虽然我对 $(':checkbox:checked') 很不确定，因为我认为这不是正确的 jquery .... 首先，我建议修复我提到的第一个选择器，使用[jquery 文档](http://docs.jquery.com)检查第二个选择器，然后对您的代码进行 jshinting/jslinting。（仅限 JavaScript）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:20:15.917

我不知道这是问题本身的错字还是脚本的问题，但传递时参数的名称是“db”，但在服务器端，您期望的是“mess_id”

# cocos2d-iphone - Cocos2D 模板在 xcode 4.3.3 中不可见

> ID：11926594
> 
> 赞同：1
> 
> 时间：2012-08-12T23:15:17.217
> 
> 标签：cocos2d-iphone

我下载了

cocos2d-cocos2d-iphone-release-2.0-0-g02cebb5.tar.gz

执行：./install-templates.sh -f

命令但模板在 Xcode 4.3.3 中仍然不可见。

谁能帮我。

# mysql - mySQL：这是递归（或相互依赖）的一种形式吗？

> ID：11926595
> 
> 赞同：2
> 
> 时间：2012-08-12T23:15:23.950
> 
> 标签：mysql, sql, recursion, query-optimization, greatest-n-per-group

我对 SQLZoo 上的一个问题很感兴趣。这是一个“每组最大 n”的问题。我想了解发动机是如何工作的。

一个名为 bbc 的表包含每个国家的名称、世界地区和人口：

英国广播公司（名称，地区，人口）

给定的任务是选择每个地区人口最多的国家，显示其名称、地区和人口。

提供的解决方案是：

```
SELECT region, name, population FROM bbc x
  WHERE population >= ALL
    (SELECT population FROM bbc y
        WHERE y.region=x.region
          AND population>0) 
```

**1.主要问题。**我觉得这有点让人费解。我想了解引擎是如何处理这个的，因为乍一看似乎存在某种相互依赖（x 取决于 y，y 取决于 x）。引擎是否遵循某种递归来产生最终选择？还是我错过了什么，例如 x 或 y 实际上是固定的？

**2\. 次要问题。**奇怪的是，当我将“AND population>0”从括号中拉出并将其单独留在底部时，8 个结果中缺少一个区域（欧洲/俄罗斯）。为什么？我不明白。

事实上，当我尝试对*世界*数据库（可从与 Sakila 相同页面上的 mySQL 网站获得）进行查询时，行为是不同的：括号中的人口 > 0，我得到 6 个区域。6 在这个数据库中是正确的数字，因为“SELECTcontinent FROM country GROUP BY 大陆”显示了七个大陆，其中一个是南极洲，其中包括 5 个“国家”，所有国家的人口均为 0。

所以这似乎是对的。

```
SELECT continent, `name`, population FROM country X
WHERE population >= ALL 
(SELECT population FROM country Y
WHERE Y.`Continent` = X.`Continent`)
AND population>0 
```

另一方面，当我像在 SQLZoo 上一样将“人口 > 0”拉回括号时，我还得到了 5 个零的国家（“属于南极洲”的国家）。无论我指定 x.population 还是 y.population，我都会得到零。

```
continent      name                                          population  
-------------  --------------------------------------------  ------------
Antarctica     Antarctica                                               0
Antarctica     French Southern territories                              0
Oceania        Australia                                         18886000
South America  Brazil                                           170115000
Antarctica     Bouvet Island                                            0
Asia           China                                           1277558000
Antarctica     Heard Island and McDonald Islands                        0
Africa         Nigeria                                          111506000
Europe         Russian Federation                               146934000
Antarctica     South Georgia and the South Sandwich Islands             0
North America  United States                                    278357000 
```

非常期待这些问题的见解！

祝大家有个美好的一周。

:)

**笔记：**

1.  作为参考，问题是此页面上的第 3a 号：http: [//old.sqlzoo.net/1a.htm ?answer=1](http://old.sqlzoo.net/1a.htm?answer=1)

2.  一个线程提到同一查询的“greatest-n-per-group”问题： [MySQL world database Trying to Avoid subquery](https://stackoverflow.com/questions/1813580/mysql-world-database-trying-to-avoid-subquery)

3.  世界数据库可在此处获得： http: [//dev.mysql.com/doc/index-other.html](http://dev.mysql.com/doc/index-other.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:15:47.633

> 1.  主要问题。我觉得这有点让人费解。我想了解引擎是如何处理这个的，因为乍一看似乎存在某种相互依赖（x 取决于 y，y 取决于 x）。引擎是否遵循某种递归来产生最终选择？还是我错过了什么，例如 x 或 y 实际上是固定的？

这不是递归。[从 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/any-in-some-subqueries.html)中查看。他们对问题的解决方案相当于这个

```
SELECT region, name, population FROM bbc x
  WHERE population = 
    (SELECT max(population) FROM bbc y
        WHERE y.region=x.region
          ) 
```

> 1.  次要问题。奇怪的是，当我将“AND population>0”从括号中拉出并将其单独留在底部时，8 个结果中缺少一个区域（欧洲/俄罗斯）。为什么？我不明白。

微小的变化（如上面 ypercube 所建议的）工作

```
SELECT region, name, population FROM bbc x
  WHERE population >= ALL
    (SELECT population FROM bbc y
        WHERE y.region=x.region
          AND population IS NOT NULL) 
```

这个查询

```
SELECT region, name, population FROM bbc x
  WHERE population is null 
```

返回一行。不知道为什么人口应该可以为空，但没有仔细研究它的其余部分。否则，查询应该可以在没有`>0`

此外，这与每组最大 n 不同。在那个问题中，你试图找到前 N 个项目，而不仅仅是前一个项目。

# javascript - 如何将javascript提示值传递给视图

> ID：11926598
> 
> 赞同：0
> 
> 时间：2012-08-12T23:15:55.453
> 
> 标签：javascript, jquery, python

有没有办法将 js 弹出值直接传递给 python/django 视图，或者有必要使用 javascript 函数捕获该值，然后进行 ajax 调用？

例如：

```
<form>
    <input type="text" name="name"/>
    <input type="submit" id="submit"/>
</form>

<script type="text/javascript">
function myFunction() {

$('#submit').click(function() { 
    var name=prompt("Please enter your name","");
  });
}
</script> 
```

如果可以直接做，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:45:46.557

您将不得不按照以下方式做一些事情：

```
$('#submit').click(function() {
    var name = prompt("Please enter your name", "");
    $.post('/url/to/django/handler', {'name': name});
}); 
```

将用户在提示中填写的值返回到您的 django 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:24:08.730

如果要修改当前视图，可以使用Javascript修改DOM，如下：

```
$('#myDiv').html(name) 
```

这将用您在“名称”中捕获的值替换 id 为“myDiv”的 div 的内容。

如果您谈论的是完全不同的视图，那么您总是必须进行服务器调用（通过 AJAX 或表单提交）才能将值从客户端获取到服务器！

# perl - 使用 CGI 脚本的 Perl 表单验证

> ID：11926599
> 
> 赞同：3
> 
> 时间：2012-08-12T23:16:03.877
> 
> 标签：perl, validation, cgi

我正在尝试完成我的任务的最后一项任务**是**在将表单提交到另一个 CGI 程序之前对其进行验证。

发生的事情是我有一个简单的 CGI 程序会要求用户输入数据

```
#!/usr/bin/perl -w

use CGI qw/:standard/;

# Standard HTTP header
print header();

# Write information to data file and produce a form
&printForm();

# Finish HTML page
print end_html();

# This sub will create a form to access the print_fortune.cgi script
sub printForm
{
        print qq~

<html>
<head><title>My Search Engine</title>
</head>

<body>
  <form action="b1.cgi" method="GET">
        What is your e-msil address? <input type="text" name="passing" size=40>
        <input type="submit" value="send address">
        <input type="hidden" name="form" value="insert" />
        </form>

<form method="get" action="b1.cgi" enctype="application/x-www-form-urlencoded">

<input type="text" name="search" value="" size="30" /><br />

<label><input type="radio" name="option" value="name" checked="checked" />name</label>

<label><input type="radio" name="option" value="author" />author</label><label>

<input type="radio" name="option" value="url" />url</label>

<label><input type="radio" name="option" value="keyword" />keyword</label>

<input type="submit" name=".submit" value="Search" />
<input type="hidden" name="passing" value="http://default.com" />

<div><input type="hidden" name="form" value="search"  /></div></form>

</body> 
```

所以上面的程序包含两种形式。一种是向数据库中添加新数据，另一种是从数据库中搜索。

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";

use LWP::Simple;
use CGI;
use HTML::HeadParser;
use DBI;

my $serverName = "";
my $serverPort = "";

my $serverUser = "";
my $serverPass = "";
my $serverDb   = "";

my $serverTabl = "";

$cgi = CGI->new;

my $pass = $cgi->param('passing');

$URL = get ("$pass");

$head = HTML::HeadParser->new;

$head->parse("$URL");

my $methods = $cgi->param('form');

if ($methods eq "insert"){

insert_entry();

}

show_entries();

sub insert_entry {
    my ($dbh, $success, $name, $author, $url,$temp);

    $dbh = DBI->connect("DBI:mysql:database=$serverDb;host=$serverName;port=$serverPort",$serverUser,$serverPass);
    $name = $head->header('X-Meta-Name');
    $author = $head->header('X-Meta-Author');
    $url = $cgi->param('passing');
    $temp = $head->header('X-Meta-Keywords');
    @keyword = split(/,/,$temp);

    $success = $dbh->do("INSERT INTO $serverTabl(name,author,url,keyword1,keyword2,keyword3,keyword4,keyword5) VALUES(?,?,?,?,?,?,?,?)", undef,$name,$
author,$url,$keyword[0],$keyword[1],$keyword[2],$keyword[3],$keyword[4]);
    $dbh->disconnect;
    if($success != 1) {
       return "Sorry, the database was unable to add your entry.
                                Please try again later.";
    } else {
        return;
      }
}

sub show_entries {
    my ($dbh, $sth, @row);
    my $search = $cgi->param('search');
    my $option = $cgi->param('option');

    $dbh = DBI->connect("DBI:mysql:database=$serverDb;host=$serverName;port=$serverPort",$serverUser,$serverPass);

    $sth = $dbh->prepare("SELECT *
                          FROM $serverTabl
                          WHERE $option LIKE '%$search%'");
    $sth->execute;
    print "Existing Entries",HR;
    while(@row = $sth->fetchrow_array) {
          $row[5] = scalar(localtime($row[5]));
          print "<table border='2'><tr>";
          print "<td>" .  $row[0] . "</td>";
          print "<td>Name" . $row[1] . "</td>";
          print "<td>Author" . $row[2] . "</td>";
          print "<td>URL" . $row[3] . "</td>";
          print "<td>Keyword1" . $row[4] . "</td>";
          print "<td>Keyword2" . $row[5] . "</td>";
          print "<td>Keyword3" . $row[6] . "</td>";
          print "<td>Keyword4" . $row[7] . "</td>";
          print "<td>Keyword5" . $row[8] . "</td>";
          print "</tr></table>";
     }
     $sth->finish;
     $dbh->disconnect;
} 
```

所以现在的问题是如何在表单提交进入第二个程序之前为它做一个正则表达式？

我想做验证

**name** 允许空格但只允许字母字符 **author**允许空格但只允许字母字符 **keyword**不允许空格并且只允许字母字符 **url**只允许字母数字字符和以下 :/.~?=+& 两个句点不能连续存在。

我真的很抱歉，但我对 Perl 真的很陌生。我们只学过 PHP，但 Perl 几乎一无所获……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:34:14.137

perluniprops Perl 文档列出了所有[正](http://perldoc.perl.org/perluniprops.html)`\p`则表达式属性。

对于只包含字母的字符串，你想要

```
/^[\p{Alpha}]+$/ 
```

对于只包含您想要的字母和空格的字符串

```
/^[\p{Alpha}\x20]+$/ 
```

为了匹配 URL，[`URI`模块](https://metacpan.org/module/URI#PARSING-URIs-WITH-REGEXP)的文档将其作为*官方*模式来匹配 URL

```
m|^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$| 
```

一定要在你的工作中引用参考文献以获得额外的分数！

# excel - 如何避免电子邮件自动化的 Outlook 安全警告 - VBA

> ID：11926605
> 
> 赞同：3
> 
> 时间：2012-08-12T23:17:06.140
> 
> 标签：excel, vba, security, outlook, outlook-2010

我正在尝试通过 Outlook 2010 从 VBA 中的 Excel 2010 发送电子邮件。关于 SO 的大多数其他答案似乎没有任何使用 VBA 的方法，也没有用于 Outlook/Excel 2010。

有没有免费的方法？[Redemption](http://www.dimastr.com/redemption/home.htm)方法将不是一个可行的选择，除非它很容易安装在一家大公司内的 10 台机器上。

这是我目前发送电子邮件的方式：

```
Dim emailAddr As String
Dim OutApp As Object
Dim OutMail As Object

Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)
With OutMail
 .To = "xxxx@xxxx.edu"
 .Subject = "Demande"
 .HtmlBody = CombinedValueHtml
 .Send
End With

Set OutMail = Nothing
Set OutApp = Nothing

Exit Sub 
```

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:43:50.090

这是部分答案。我已将其作为社区 Wiki 答案，希望其他人可以解释我无法开始工作的最后部分。

此网页[http://msdn.microsoft.com/en-us/library/office/aa155754(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa155754(v=office.10).aspx)解释了该过程的前三个部分。它是在 1999 年编写的，因此不能完全遵循，因为它指的是旧版本的 Windows 和 Office。

第一步是将*VBA 项目的数字签名*添加到您的 Office 安装中，尽管我在共享工具而不是 Office 工具下找到了它。不要错误地将*VBA 项目的数字签名*添加到 Outlook，因为正如我发现的那样，这意味着您卸载 Word、Excel 等。

第二步是运行*Selfcert.exe*以您自己的名义创建数字证书。

第三步是打开 Outlook 的 VBA 编辑器，选择工具，然后选择数字证书，然后选择使用您的证书对项目进行签名。

通过这些步骤，您可以抑制 Outlook 包含宏的警告，但这不会抑制宏正在访问电子邮件的警告。要抑制该警告，您需要第四步，即将您的证书放在*Trusted Root Certificate Authorities Store*中。此网页[http://technet.microsoft.com/en-us/library/cc962065.aspx](http://technet.microsoft.com/en-us/library/cc962065.aspx)解释了证书颁发机构信任模型，但我无法成功使用*Microsoft 管理控制台*来实现第四步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-17T00:06:51.413

而是`.send`使用以下内容：

```
.Display 'displays outlook email
Application.SendKeys "%s" 'presses send as a send key 
```

注意：使用显示键时要小心，如果在程序运行时移动鼠标并单击它可以改变正在发生的事情。Outlook 也将显示在您的屏幕上并发送..如果您在做其他事情，这让您感到困扰，是的.. 不是最好的主意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T01:07:29.830

> Redemption 方法将不是一个可行的选择，除非它很容易安装在一家大公司内的 10 台机器上。

您可以使用[RedemptionLoader](http://www.dimastr.com/redemption/security.htm#redemptionloader) - 它直接加载 dll，不需要使用注册表安装 dll。

另请参阅[http://www.outlookcode.com/article.aspx?id=52](http://www.outlookcode.com/article.aspx?id=52)了解所有选项 - 简而言之，它是 C++ 中的扩展 MAPI 或 Delphi、Redemption（包装扩展 MAPI，可用于任何语言) 或 ClickYes 等实用程序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-04T11:47:25.947

如果您不立即发送消息而只是显示它并让用户进行修改（如果有的话）并让他们自己按下发送按钮，这将起作用：

即使用

```
.Display 
```

代替

```
.Send 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-03-26T19:29:50.050

[我在此答案](https://stackoverflow.com/questions/36211195/outlook-email-and-signature-from-excel-vba-body-vs-htmlbody/36211843#36211843)中解释了如何使用 vba 发送电子邮件您会发现我在日常工作中广泛使用的宏。

根据@Floern 的建议，以下是解释：

为了插入图像（签名为图像），您可以使用以下代码：

**步骤 1.** 将此代码复制并粘贴到类模块中，并将该类模块命名为“MailOptions”

```
Private Message As CDO.Message
Private Attachment, Expression, Matches, FilenameMatch, i

Public Sub PrepareMessageWithEmbeddedImages(ByVal FromAddress, ByVal ToAddress, ByVal Subject, ByVal HtmlContent)

    Set Expression = CreateObject("VBScript.RegExp")
    Expression.Pattern = "\<EMBEDDEDIMAGE\:(.+?)\>"
    Expression.IgnoreCase = True
    Expression.Global = False 'one match at a time

    Set Message = New CDO.Message
    Message.From = FromAddress
    Message.To = ToAddress
    Message.Subject = Subject

    'Find matches in email body, incrementally increasing the auto-assigned attachment identifiers
    i = 1
    While Expression.Test(HtmlContent)
        FilenameMatch = Expression.Execute(HtmlContent).Item(0).SubMatches(0)
        Set Attachment = Message.AddAttachment(FilenameMatch)
        Attachment.Fields.Item("urn:schemas:mailheader:Content-ID") = "<attachedimage" & i & ">" ' set an ID we can refer to in HTML
        Attachment.Fields.Item("urn:schemas:mailheader:Content-Disposition") = "inline" ' "hide" the attachment
        Attachment.Fields.Update
        HtmlContent = Expression.Replace(HtmlContent, "cid:attachedimage" & i) ' update the HTML to refer to the actual attachment
        i = i + 1
    Wend

    Message.HTMLBody = HtmlContent
End Sub

Public Sub SendMessageBySMTP(ByVal SmtpServer, ByVal SmtpUsername, ByVal SmtpPassword, ByVal UseSSL)
    Dim Configuration
    Set Configuration = CreateObject("CDO.Configuration")
    Configuration.Load -1 ' CDO Source Defaults
    Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
    Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = SmtpServer
    'Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = SmtpPort
    Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 30

    If SmtpUsername <> "" Then
        Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
        Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = SmtpUsername
        Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = SmtpPassword
    End If
    Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = UseSSL
    Configuration.Fields.Update
    Set Message.Configuration = Configuration
    Message.Send
End Sub 
```

**第 2 步。**在标准模块中，您将详细说明您的 .html 内容并从该类中实例化一个对象：

```
public sub send_mail()

Dim signature As String
dim mail_sender as new MailOptions 'here you are instantiating an object from the class module created previously
dim content as string

signature = "C:\Users\your_user\Documents\your_signature.png"

content = "<font face=""verdana"" color=""black"">This is some text!</font>"
content = content & "<img src=""<EMBEDDEDIMAGE:" & signature & " >"" />"

mail_sender.PrepareMessageWithEmbeddedImages _
                    FromAddress:="chrism_mail@blablabla.com", _
                    ToAddress:="addressee_mail@blablabla.com", _
                    Subject:="your_subject", _
                    HtmlContent:=content

'your_Smtp_Server, for example: RelayServer.Contoso.com
correos.SendMessageBySMTP "your_Smtp_Server", "your_network_user_account", "your_network_user_account_password", False

end sub 
```

# php - 将两个单独的mysql数据库表组合在一个数组中

> ID：11926611
> 
> 赞同：-1
> 
> 时间：2012-08-12T23:17:41.127
> 
> 标签：php, mysql

我有来自两个不同来源的两个独立数据库，但具有相同的数据类型和行，我可以将这两个数据都返回到一个数组中，以便将它们作为一个来源使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:48:04.040

如果两个数据库位于同一台服务器上，并且两个表的结构相同，则可以使用[UNION](http://dev.mysql.com/doc/refman/5.5/en/union.html)：

```
SELECT *
FROM `database1`.`table1`
WHERE `condition1`
UNION
SELECT *
FROM `database2`.`table2`
WHERE `condition2` 
```

用您的实际值替换 database1、database2、table1、table2、condition1 和 condition2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:57:47.700

（归功于上面 biziclop 和 bfavaretto 的评论 - 但作为答案发布以将其他人从半答案中拯救出来。）

摘要：使用联合表（http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html）和 UINION（或 JOIN）。

细节：

假设您有一个“主”（本地）MySQL 表和一个辅助“远程”数据库。在您的“主要” MySQL 二进制文件中，为“联合表”编译它 - 这允许您访问远程服务器上的表，就好像它们是本地的一样。默认情况下不启用联合表。

然后在主库中创建一个与远程数据库中的表结构完全相同的表，但在创建表指令的末尾添加“CONNECTION”字符串。这会将其设置为联合表，并且实际上将从远程服务器获取数据。

然后查询主服务器，在主表和联合表之间使用 UNION（或 JOINS，取决于您想要的），这将返回一组结果，就好像它仅来自主服务器一样，即使它也从远程获取数据。

请注意，它的效率不是很高，手册中有关于它如何进行多个查询的警告（例如，在每次调用之前都以“SHOW TABLES”开头，它可能会返回比预期更多的行，创建本地临时表等）。

# cloud-foundry - Cloud Foundry 无法使用 Mysql 自动创建表

> ID：11926614
> 
> 赞同：0
> 
> 时间：2012-08-12T23:18:20.003
> 
> 标签：cloud-foundry

解决了

发现了问题，我在我的 java 类中定义了一个模式

我有一个使用 mysql 数据服务的云代工应用程序。

它工作得很好，但我想添加另一个数据库表。

当我使用新实体类重新部署到 Cloud Foundry 时，它不会创建表并且日志有以下错误

2012-08-12 20:42:23,699 [main] 错误 org.hibernate.tool.hbm2ddl.SchemaUpdate - 用户 'ulPKtgaPXgdtl'@'172.30.49.146' 拒绝表 'acl_class' 的 CREATE 命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:43:11.293

Schema 是通过服务动态创建的。您需要做的就是将应用程序绑定到服务并使用云命名空间。如上所述，从配置文件中删除架构名称将解决问题。

# objective-c - 从 Xcode 项目中删除的文件，但仍可在游戏中使用

> ID：11926617
> 
> 赞同：1
> 
> 时间：2012-08-12T23:18:42.507
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我的 cocos2d-iphone 项目有平铺地图（.tmx 文件和 .png 纹理）。

最近，我删除了项目中的所有 .png 纹理（在 Xcode 中，您按下删除键，然后选择发送到垃圾箱）。

然后，我运行了这个项目，它试图加载`CCTMXTiledMap`. 我预计它会崩溃（无论如何，项目中不应该有任何纹理），但它没有。事实上，它运行得很好，并且地图确实加载了。不知道为什么 - Xcode 是否以某种方式保留了对此类文件的某种引用？

我检查了 .tmx 文件，这是定义源图像的行：

```
<image source="myMap-hd.png" width="973" height="1024"/> 
```

我的项目文件夹中肯定没有`myMap-hd.png`nor`myMap.png`文件。甚至 Xcode 的搜索工具栏都没有显示它！

哦，我还清理了项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T00:28:16.380

正如我在问题评论中所写。问题不在您的 Xcode 项目中。如果您之前使用这些资源运行应用程序，则删除的资源文件很可能在设备/模拟器上仍然可用。原因是 Xcode 不跟踪应用程序包中的文件，它们只是简单地复制。这就是他们在`Copy Bundle Resources`构建阶段登陆的原因。

您应该从设备/模拟器中删除应用程序并再次运行它。或者，如果您已经在应用程序中拥有宝贵的数据，您可以导航到应用程序包并手动删除文件。文件不会再次出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T00:07:10.457

在模拟器中，iOS 模拟器（菜单项）> 重置内容和设置。清理您的项目，然后再次运行。没有 cocos2D 也会发生同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T17:21:34.993

当 nib 文件被自动加载时，我发现这是一个问题，虽然不在引用的文件中似乎仍然被加载（或尝试）。可能会导致一些脑痛，因为文件没有出现在 Xcode IDE 中，尽管它们确实存在于文件系统中。

# node.js - 在加载 URL 之前重定向

> ID：11926618
> 
> 赞同：0
> 
> 时间：2012-08-12T23:18:45.970
> 
> 标签：node.js, express, passport.js

我正在开发一个 node.js 应用程序，我在其中使用护照来构建 OAuth 身份验证系统。配置后，我可以在每个资源加载中通过请求对象访问用户。但我的问题是：如何在每个 URL 加载之前检查 - 使用 app.get('/', function(..) {...}) 定义的资源 - 用户是否已登录，如果没有则重定向客户端登录。我可以在每种方法中添加一个测试，但这不是我想要的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:31:35.223

您需要一个检查用户是否登录的中间件。

```
isAuthenticated = function (req, res, next) {
  if (req.user)
    return next(); // All good, let the route handler process the request.
  else
    res.redirect('/login'); // Not logged in.
} 
```

并在需要登录的每条路线上使用它：

```
app.get('/something', isAuthenticated, function (req, res) {
  // Only in here if the user is authenticated.
}); 
```

您也可以通过 do 在每条路由上使用中间件`app.use(isAuthenticated)`，但是您需要在方法中添加额外的逻辑才能不创建到 的无限重定向循环`/login`等。

# extjs - 面板内的extjs gridpanel不会自动滚动或调整大小

> ID：11926619
> 
> 赞同：5
> 
> 时间：2012-08-12T23:19:13.957
> 
> 标签：extjs, extjs4

我有一个标签面板。在选项卡中，我有一个面板，其中包括一个工具栏和 3 个项目：[字段集、网格面板和另一个字段集（或一些按钮）]。我无法让网格面板显示滚动条。它仅在我设置网格面板的最大高度/最小高度时才有效。
我还尝试将网格面板包装在容器中。没运气。在示例中，我使用适合布局。我尝试了“锚”布局，并将锚：'100% 50%' 分配给网格面板，希望在我调整浏览器大小时它会调整大小。没运气。

或者，如果 gridpanel 是选项卡中的唯一项目，则自动滚动将起作用。所以它出现在另一个面板内时，自动滚动/调整大小不起作用。

我在这里错过了什么吗？

```
Ext.application({
    name: 'MyApp',
    launch: function () {

        // create the data store
        var d = ['company', 100];
        var myData = [];
        for (var i = 0; i < 50; i++) {
            myData[i] = d;
        }
        var store = Ext.create('Ext.data.ArrayStore', {
            fields: [{
                name: 'company'
            }, {
                name: 'price',
                type: 'float'
            }],
            data: myData
        });

        Ext.create("Ext.container.Viewport", {
            layout: {
                type: 'border'
            },
            items: [{
                xtype: 'toolbar',
                id: 'headerbar',
                region: 'north',
                height: 30
            }, {
                xtype: 'toolbar',
                id: 'menubar',
                region: 'north',
                height: 30
            }, {
                xtype: 'tabpanel',
                itemId: 'maintabpanel',
                activeTab: 0,
                region: 'center',
                plain: true,
                margins: '5 5 5 5',
                layout: 'fit',
                items: [{
                    closable: false,
                    title: 'Tab',
                    margins: '0 0 0 0',
                    items: [{
                        xtype: 'panel',
                        title: 'Panel',
                        layout: 'fit',
                        tools: [{
                            type: 'help',
                            tooltip: 'Help'
                        }, {
                            type: 'close',
                            tooltip: 'Close'
                        }],
                        items: [{
                            xtype: 'fieldset',
                            title: 'Field Set',
                            layout: 'hbox',
                            items: [{
                                xtype: 'textfield',
                                fieldLabel: 'Input'
                            }]
                        }, {
                            xtype: 'gridpanel',
                            autoScroll: true,
                            store: store,
                            columns: [{
                                text: 'Company',
                                flex: 1,
                                sortable: true,
                                dataIndex: 'company'
                            }, {
                                text: 'Price',
                                flex: 1,
                                sortable: true,
                                dataIndex: 'price'
                            }],
                            viewConfig: {
                                autoFit: true
                            }
                        }, {
                            xtype: 'fieldset',
                            title: 'Field Set 2',
                            layout: 'hbox',
                            items: [{
                                xtype: 'textfield',
                                fieldLabel: 'Output'
                            }]
                        }]

                    }]
                }]
            }, {
                xtype: 'box',
                id: 'footer',
                region: 'south',
                html: '<h1> Copyright 2012</h1>',
                height: 30
            }]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:48:31.010

请注意，网格面板的父面板具有`fit`布局，但它有多个项目（字段集、网格面板和另一个字段集）。一个`fit`布局只能有 1 个孩子。

此外，该面板的父`fit`面板（带有`closable : false`- 选项卡的面板）没有布局定义。

这是[您的代码的 JsFiddle 修改版本](http://jsfiddle.net/Izhaki/CTpTB/)。

# python - 声明一个带有数组参数的python函数并将一个数组参数传递给函数调用？

> ID：11926620
> 
> 赞同：30
> 
> 时间：2012-08-12T23:19:19.900
> 
> 标签：python, function, parameters, arguments

我是 python 的新手，并试图将数组作为参数传递给 python 函数，该函数将列表/数组声明为参数。

我确定我说错了，

开始：

```
def dosomething(listparam):
         #do something here
dosomething(listargument) 
```

显然这不起作用，我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-12T23:30:29.880

你所拥有的一切都在正确的轨道上。

```
def dosomething( thelist ):
    for element in thelist:
        print element

dosomething( ['1','2','3'] )
alist = ['red','green','blue']
dosomething( alist ) 
```

产生输出：

```
1
2
3
red
green
blue 
```

鉴于您的上述评论，有几点需要注意：与 C 系列语言不同，您通常不需要在迭代列表时费心跟踪索引，除非索引本身很重要。但是，如果您确实需要索引，则可以使用`enumerate(list)`来获得`index,element`对，而不是`x in range(len(thelist))`跳舞。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-12T23:40:37.357

也许你想解包数组的元素，我不知道我是否明白了，但下面是一个例子：

```
def my_func(*args):
    for a in args:
        print(a)

my_func(*[1,2,3,4])
my_list = ['a','b','c']
my_func(*my_list) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-05T14:10:54.690

我想我不清楚 OP 的真正要求是什么……你想传递整个数组/列表并在函数内部对其进行操作吗？或者您是否希望对数组/列表中的每个值/项执行相同的操作。如果后者是您希望的，我已经找到了一种行之有效的方法。

我更熟悉 Fortran 和 C 等编程语言，您可以在其中定义元素函数，这些函数对数组中的每个元素进行操作。我终于找到了与此等效的python，并认为我会在这里重新发布解决方案。关键是对函数进行“矢量化”。这是一个例子：

```
def myfunc(a,b):
    if (a>b): return a
    else: return b
vecfunc = np.vectorize(myfunc)
result=vecfunc([[1,2,3],[5,6,9]],[7,4,5])
print(result) 
```

输出：

```
[[7 4 5]
 [7 6 9]] 
```

# selenium - 水豚访问不起作用

> ID：11926622
> 
> 赞同：1
> 
> 时间：2012-08-12T23:19:59.810
> 
> 标签：selenium, capybara, bdd, rspec2

好的，我不确定在设置 capybara 时缺少什么，但在测试访问链接时似乎无法正常工作。所以我有一个 3.2 的应用程序，我的 specs_helper 设置如下：

```
require "spork"

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'factory_girl'
  require 'capybara/rspec'
  require 'capybara/rails'

  Capybara.javascript_driver = :selenium

  Capybara.default_wait_time = 5

  include Devise::TestHelpers # see spec/support/devise.rb
include CarrierWave::Test::Matchers
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
include New_spec_helpers

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  RSpec.configure do |config|

    config.mock_with :rspec

    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    config.use_transactional_fixtures = false

   config.before :each do

       Capybara.default_selector = :css
      if Capybara.current_driver == :rack_test
        DatabaseCleaner.strategy = :transaction
      else
        DatabaseCleaner.strategy = :truncation
      end
      DatabaseCleaner.start

    end

    config.after do
      DatabaseCleaner.clean
    end
  end

end

Spork.each_run do
  FactoryGirl.factories.clear
  FactoryGirl.define do
    sequence(:code) { |n| "code#{n}" }
    sequence(:title) { |n| "title#{n}" }
  end

  Dir[Rails.root.join("spec/factories/**/*.rb")].each{|f| load f}
  PortfolioNew::Application.reload_routes!
end 
```

然后我的测试设置如下：

```
 before(:each) do
    build_projects
    visit(projects_path)
  end

  it "test js" , :js=>true do
    current_path.should == projects_path
  end 
```

然而，我得到的回报是：

```
Failure/Error: current_path.should == projects_path
       expected: "/projects"
            got: nil (using ==) 
```

我检查了我的路线，项目路径绝对正确且有效。任何关于这个问题的想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:47:15.910

[好的，我在类似帖子Rails 3 rspec + capybara - current_path is nil](https://stackoverflow.com/questions/8382252/rails-3-rspec-capybara-current-path-is-nil)的评论中发现了这个问题？

原来 webrat 与旧测试中遗留下来的 Capybara 冲突。

因此，对于任何感兴趣的人，我只是从我的 gemfile 中评论出来，一切都很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:20:03.353

尝试将`visit`呼叫移动到`it`块中：

```
before(:each) do
  build_projects
end

it "test js" , :js=>true do
  visit(projects_path)
  current_path.should == projects_path
end 
```

# google-earth-plugin - 如何判断 kml 中的 GroundOverlays 何时完成加载？

> ID：11926623
> 
> 赞同：0
> 
> 时间：2012-08-12T23:20:06.997
> 
> 标签：google-earth-plugin

我正在这样做：

```
google.earth.fetchKml(ge, slopehref, function(kmlObject){
  if (kmlObject){
    ge.getFeatures().appendChild(kmlObject);
    // GroundOverlay's still not rendered
  }
}); 
```

所以我知道 kml 文件何时加载，但加载 GroundOverlays 需要几秒钟。我想在 GroundOverlays 渲染后得到回调。我一直在寻找可能在网络活动停止时触发的 google.earth.addEventListener eventid，但我找不到任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:33:11.773

不幸的是，这是不可能的，在当前的 Api 中没有办法做到这一点。您可以做的最好的事情是提出功能请求以添加此功能： [http ://code.google.com/p/earth-api-samples/issues/list](http://code.google.com/p/earth-api-samples/issues/list)

如果您想给它加星标，那里也已经有一个类似的请求： [http ://code.google.com/p/earth-api-samples/issues/detail?id=5](http://code.google.com/p/earth-api-samples/issues/detail?id=5)

# javascript - Javascript 滑动图片库 - 没有 jQuery

> ID：11926627
> 
> 赞同：0
> 
> 时间：2012-08-12T23:20:45.430
> 
> 标签：javascript

有没有人有关于制作纯 JS 图像滑块的任何提示？我希望在每张图片后暂停并在浏览完所有图片后重新启动。我能找到的只有 jQuery 插件，我希望只用 JS 来做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:33:19.110

我会去做这样的事情：

```
var sliderTool = {
    _totalItems : 0,
    _visibleItems : 6,
    _currentOffset : 0,
    _timeout : null,
    next : function(){
        ...
    },
    prev : function(){
        ...
    },
    play : function(){
        ...
    },
    pause : function(){
        ...
    }
}; 
```

作为基础。

每次设置超时时，将其保存到 _timeout 字段中，以便您可以随时清除Timeout(sliderTool._timeout)。next 和 prev 可以包含动画或只是简单的图像替换。您可以为动画和幻灯片之间的间隔添加单独的超时。

您可以向滑块工具添加“add()”方法，然后在 window.load 或“body onload”上添加所有图像，然后运行 ​​start() 方法。您还可以在页面加载后动态添加图像

也许还添加 init() 用于自动加载和基本设置。

同样，这是可能解决方案的基本草案。一旦你开始跑步，你可能会遇到更具体的问题。总的来说，作为一种方法，我建议在寻求一般建议之前先尝试提出一些解决方案；）

# animation - 我怎样才能避免这个css3后台循环跳转？

> ID：11926632
> 
> 赞同：3
> 
> 时间：2012-08-12T23:22:15.780
> 
> 标签：animation, css, css-transitions, keyframe

我最近一直在尝试一些css3。我想要做的是让背景图像向左滑动并无缝重复以产生无限背景动画的效果（有点像他们在旧卡通中做背景的方式，它只是一遍又一遍地循环......）。我在使用这个 css3 时面临的问题是，一旦动画完成，它就会重新回到它的起始位置。见这里：[我的博客](http://digitalbrent.com/blog/)。动画完成后，标题为“super sluggy”的条目的背景将恢复原位。我一直在寻找 w3schools 的答案，以及谷歌甚至相关的堆栈问题，但我无法在任何地方找到解决方案。这是我的代码：

```
@keyframes l_2_r
{
from {background-position: top left;}
to {background-position: top right;}
}

@-moz-keyframes l_2_r
{
from {background-position: top left;}
to {background-position: top right;}
}

@-webkit-keyframes l_2_r
{
from {background-position: top left;}
to {background-position: top right;}
}

@-o-keyframes l_2_r
{
from {background-position: top left;}
to {background-position: top right;}
}

#sluggy_div{
background: url('../imgs/sluggy-bg.jpg') repeat-x;
animation: l_2_r 7s linear infinite;
-moz-animation: l_2_r 7s linear infinite;
-webkit-animation: l_2_r 7s linear infinite;
-o-animation: l_2_r 7s linear infinite;
} 
```

如果沿 x 轴重复，背景本身是无缝的，但是当动画过渡时，过渡是一个快速的快照，我希望它是无缝的，或者我应该说它对用户来说是不明显的。

有谁知道如何解决这一问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:40:30.623

我想出的最简单的解决方案是简单地在 from 到一个位置`background-position`的`x`方向上设置动画，`0`该位置实际上是其宽度的负值（在这种情况下`-1000px`）：

```
@-webkit-keyframes l_2_r {
    from {background-position: 0 0;}
    to {background-position: -1000px 0;}
}

#sluggy {
    width: 560px;
    height: 374px;
    border: 1px solid #f90; /* just for visibility */
    background-image: url(http://digitalbrent.com/imgs/sluggy-bg.jpg);
    -webkit-animation: l_2_r 7s linear infinite;
}​ 
```

[JS Fiddle（仅限 Webkit-vendor-prefix）演示](http://jsfiddle.net/davidThomas/TCLGb/)。

在 Chromium 18 中，这*似乎可以正常工作。*希望您不介意我在演示中使用您的实际图像，但我没有任何合适的图像可供测试。

# android - Android 不按顺序调用方法

> ID：11926633
> 
> 赞同：1
> 
> 时间：2012-08-12T23:22:18.387
> 
> 标签：android, methods

这真的让我陷入困境，`Button`在我的 Android 应用程序中单击 a 时，似乎这些方法被调用不同步。当我点击`Button`下面我想打电话时：

```
loc = new Location(Options.this); 
```

完成后，我想打电话：

```
setLocationPref(); 
```

实际发生的情况是，当我的程序进入“displayLocations”下方的方法时，它会再次跳回按钮并调用：

```
setLocationPref(); 
```

**我相信错误在于两行代码：**

```
builder.setItems(cs, new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialog, int item){ 
```

如果有人有任何想法，请告诉我，非常感谢:)

```
/** Location selection */
bLocation = (Button) findViewById(R.id.bLocation);
bLocation.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

        loc = new Location(Options.this);

        loc.locationSelection();

        setLocationPref();
    }
}); 
```

代码跳回到我写的地方 /** FAILS HERE */

```
/** Display locations in a list */
public void displayLocations(){

Log.d("displayLocations", "displayLocations ");

LocationSQL getSetLocation = new LocationSQL(context);

final ArrayList<String> locations = locSQL.allLocations();
final CharSequence[] cs = locations.toArray(new CharSequence[locations.size()]);
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Pick your location.");
builder.setItems(cs, new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialog, int item){

        /** FAILS HERE */

        Toast.makeText(context, cs[item], Toast.LENGTH_SHORT).show();
        String selectedLocation = locations.get(item);
        updateLocationInfo(selectedLocation); 
    }
});
builder.create().show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:42:04.120

我认为您需要记住，在 Android 中，对话框不是以串行方式处理的。例如，当我在 PC 上编写我的 SWT 应用程序时，我可以等到对话框得到响应，然后再回去做接下来要做的任何事情。在 Android 中并非如此。您显示一个对话框，生活就会继续 - 立即。因此，可能发生的情况是：

您对 loc.locationSelection() 的调用调用了 displayLocations()。当 displayLocations() 开始工作时，按钮侦听器中的控件开始执行下一个任务，即 setLocationPref();

另一个重要的事情是，在 Android 中，您不应该真正尝试显示自己的对话框，因为这不会处理屏幕旋转时的状态更改或用户在您的应用程序和其他应用程序之间切换并且您的应用程序被挂起等事情（被杀）一段时间。您需要在 onCreateDialog() 中创建警报，然后在 onPrepareDialog() 中准备它并使用 showDialog() 显示对话框 - 至少直到最近 DialogFragment 出现之前它是这样的（见下文）。然后操作系统会处理剩下的事情——你需要信任它。

不要直接在对话框上调用 .show() ！系统会为你做的。

请注意，这种处理方式已被 DialogFragment 取代。但是，我认为任何人至少一次以旧方式做这件事是好的和有教育意义的。这是我在 DialogFragment 之前尝试理解状态变化以及如何以传统方式处理对话框时为自己写的评论。我希望它有所帮助。

```
//=============================================================================
// Note re. handling of application kill, screen rotation and other state
// change events:
//
// Android will re-execute the onCreate() method for such events.
// Actually, the whole object gets re-created even for a screen rotation!
// If you put a static counter in the constructor, you will see that the
// constructor gets re-executed and all the non-static variables get scrapped
// and re-created.  The saving grace is that the rotation or other such events
// do not immediately interrupt when you are in the middle of executing a
// method, but rather it gets queued to be handled when its turn comes (or so
// I hope, else there would have chaos).
// Thus data consistency is not threatened and we can plan to recover from
// such situations gracefully.
//
// The only data that is safe is static class data, or you can - or rather
// should
// - save data as Android advises, by means of
//      onRetainNonConfigurationInstance() and
//      getLastNonConfigurationInstance()
// (deprecated in API 13 and replaced by
//      setRetainInstance(boolean)).
// Note that to save data across complete application restart from a cold
// kill you would need to use:
//      onSaveInstanceState() and
//      onRestoreInstanceState().
// See
// http://developer.android.com/guide/topics/resources/runtime-changes.html ).
//
// Using statics is probably OK if you are feeling a bit lazy.
// It will probably take care of the state changes, but not of the complete
// kill, of course.
//
// If doing it the proper way, however, we use a clear and simple contract
// with the OS:
//
// 1\. We need to save/restore our data before/after a state change or being
//    suspended.  We do this using onRetainNonConfigurationInstance(),
//    getLastNonConfigurationInstance() for state changes - or equivalent
//    dialog fragment functionality - and using onSaveInstanceState() and
//    onRestoreInstanceState() for application being suspended.
//
// 2\. We also need to ensure that all onCreateDialog() and
//    onPrepareDialog() methods (or their equivalents, if using the dialog
//    fragment API) can be meaningfully executed on the application being
//    re-constituted after a state change or after being suspended and
//    re-activated.  The OS will execute onCreateDialog() always on
//    application re-activation, and will execute onPrepareDialog() if the
//    dialog was opened at the time the state change or application suspension
//    took place (or if it was opened at any time in the past - see below!)
//
// 3\. Therefore all data that is required for re-constituting dialogs
//    (for onCreateDialog() and onPrepareDialog() if this model is used in
//    preference to dialog fragment), must be available all the time and must
//    be saved in onRetainNonConfigurationInstance() and in
//    onSaveInstanceState().
//
// 4\. It also means that we cannot re-use or clean any variables whose
//    function Is to 'deliver' information to e.g. onPrepareDialog().  If
//    these variables are re-initialized or otherwise overwritten after the
//    dialog has been displayed, they will not be available when the OS
//    attempts to re-run these methods to re-constitute the dialog!
//
// WARNING:
// Remember not to try to prevent the re-creation of these dialogs or
// otherwise hand onto those dialog instances (e.g. by means of static
// variables), because they are likely to reference your screen GUI and if
// you use the old (eg. pre-rotation) instances, they will try to reference
// non-existing variables from the old instance of the application, and things
// might get funny and actually crash.
//
// IMPORTANT:
// Also note that during such re-creations of the screen, user input fields
// (fields that are user-writable) on the screen will NOT be overwritten, even
//  if we try to overwrite them.  This is good, because it means that if we
// preserve our read-only data over the rotation, the system will preserve
// whatever the user might have typed in.
//
// NOTE:
// Additional note re. onPrepareDialog()
// (This actually might be a bug in Android)
//
// It seems the Android will call onPrepareDialog() on screen rotation, even if
// the dialog is not currently displayed.  Perhaps it will also be called at
// other times.  It does not seem to be called on normal app startup or on app
// re-creation after it is suspended, but best to be safe and assume that the
// method will be generally called immediately after onCreateDialog() even if
// the dialog is not active (displayed).
//
// Therefore:
// - All data that the onPrepareDialog() needs must always be provided or
//   suitable dummy substitutes must be given or the method should quietly exit
//   early if such data is not found.
// - The dialog must not try to do any actions that affect the main
//   application data, unless the data we have for it is real and we are sure
//   that the  dialog is really going to be displayed: Such actions are perhaps
//   not common but one could conceivably put such actions in onPrepareDialog()
//   (in places other than listeners, where such actions are common place), but
//   if we use dummy data or exit early, such actions will obviously be
//   nonsensical.
//
//  However, the whole scheme of using onCreateDialog/onPrepareDialog has been
//  deprecated and therefore will not be fixed even if this thing here
//  is an error.
//============================================================================= 
```

# android - 在 Android 中编写 wi-fi 设备驱动程序

> ID：11926639
> 
> 赞同：0
> 
> 时间：2012-08-12T23:23:48.883
> 
> 标签：android, wifi, linux-device-driver, android-wifi

我想写一个wi-fi驱动程序。我的问题是，在运行时我想在原始 wi-fi 驱动程序和我的 wi-fi 驱动程序之间切换，反之亦然。可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:41:28.017

您可能会破解 wpa_supplicant，从 Android UI 传递一个新命令，让 wpa_supplicant 卸载旧内核模块并加载新模块。

只是我的五美分，心想。

# android - 睡眠时在 Android 上打开互联网

> ID：11926640
> 
> 赞同：7
> 
> 时间：2012-08-12T23:23:58.410
> 
> 标签：android, sleep-mode

我有一个需要同步到互联网的 Android 应用程序，但是一旦手机进入睡眠状态，我就无法访问互联网。仅当用户使用“电池模式”时才会发生这种情况，即在 15 分钟后关闭数据。我编写了一个测试应用程序并打开了数据，但它仍然连接到服务器。

**我尝试了什么：**

*   当我手动关闭数据时，应用程序正在打开它并且它可以工作
*   我也尝试了 WakeLock，但它没有帮助。
*   闹钟按预期工作，即使手机进入睡眠状态数小时

在摩托罗拉 Atrix Android 2.3.3 上测试。我不能依赖 Wifi。在现实生活中，它将每周同步。我们怎样才能使它成为可能？

**警报管理器：**

```
alarm_manager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, AlarmReceiver.class);
PendingIntent pending = PendingIntent.getBroadcast(this, 0, intent, 
                        PendingIntent.FLAG_UPDATE_CURRENT);
alarm_manager.setRepeating(AlarmManager.RTC_WAKEUP, 
                        System.currentTimeMillis(), 15000, pending); 
```

**报警接收器：**

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("MYTAG", "RECEIVED getMobileDataEnabled: " + getMobileDataEnabled(context));  
        if (!isOnline(context)) {
            Log.d("MYTAG", "NO INET");
            if (turnOnInet(context)) {
                Log.d("MYTAG", "INET IS ON");
            }
        }

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xxx.xxx.xxx.xxx/ping/pong/moto/");
            try {
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                nameValuePairs.add(new BasicNameValuePair("short_code", "ROFL"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                httpclient.execute(httppost);
                Log.d("MYTAG", "POST FINISHED");
            }
            catch (Exception e) {
                Log.e("MYTAG", "MYTAG", e);
            }
    }

    public boolean isOnline(Context context) {
        ConnectivityManager cm = (ConnectivityManager)context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null){
            Log.d("MYTAG", "isAvailable: "+netInfo.isAvailable());
        }
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }

    public boolean turnOnInet(Context context) {
        ConnectivityManager mgr = (ConnectivityManager)context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        if (mgr == null) {
            Log.d("MYTAG", "ConnectivityManager == NULL");
            return false;
        }
        try {
            Method setMobileDataEnabledMethod = mgr.getClass().getDeclaredMethod("setMobileDataEnabled", boolean.class);
            if (null == setMobileDataEnabledMethod) {
                Log.d("MYTAG", "setMobileDataEnabledMethod == null");
                return false;
            }    
            setMobileDataEnabledMethod.invoke(mgr, true);
        }
        catch(Exception e) {
            Log.e("MYTAG", "MYTAG", e);
            return false;
        }
        return true;
    }   

    private boolean getMobileDataEnabled(Context context) {
        ConnectivityManager mgr = (ConnectivityManager)context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        if (mgr == null) {
            Log.d("MYTAG", "getMobileDataEnabled ConnectivityManager == null");
            return false;
        }
        try {
            Method method = mgr.getClass().getMethod("getMobileDataEnabled");
            return (Boolean) method.invoke(mgr);
        } catch (Exception e) {
            Log.e("MYTAG", "MYTAG", e);
            return false;
        }
    }
} 
```

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-19T22:37:44.233

首先，您需要将该`HttpPost`代码`BroadcastReceiver`从`IntentService`. **永远**不要在主应用程序线程上进行网络 I/O，并在主应用程序线程`onReceive()`上调用。例如，如果您花费的时间过长，Android 将在您的 Internet 操作中途终止您的代码。

其次，鉴于`IntentService`，您需要使用`WakeLock`. 这可能会引导您使用[my`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)，它可以处理这两个问题。或者，使用[`WakefulBroadcastReceiver`](https://developer.android.com/reference/android/support/v4/content/WakefulBroadcastReceiver.html)，它具有相同的目的。

三、删除`turnOnInet()`和`getMobileDataEnabled()`。你不需要它们，它们不可靠，尤其`turnOnInet()`是对用户怀有敌意——如果用户想要打开移动数据，他们就会打开它。

现在，鉴于所有这些，在您`onHandleIntent()`的`IntentService()`（或您`doWakefulWork()`的`WakefulIntentService`）中，如果您没有立即连接 Internet，作为临时解决方法，`SystemClock.sleep()`请稍等片刻，然后再试一次，循环重复几次。如果您发现您在一段时间后可以访问 Internet，那么您可以考虑变得更复杂（例如，侦听连接更改广播而不是轮询，尽管这会使您远离`WakefulIntentService`并进入`Service`具有自己的后台线程和用于管理的状态机`WakeLock`）。或者，只要坚持`sleep()`——如果你把这个后台线程捆绑几秒钟，它不太可能是世界末日。但是，如果您在适当的时间后仍未获得连接，请不要无限期地尝试，因为您可能无法获得连接的原因有很多，包括 Android 4.0+ 上的用户驱动的带宽管理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T10:28:45.757

我建议稍微改变一下这种方法，这一点也不错，确保您始终保持同步甚至很好，唯一的问题是您没有给用户决定的机会，因为如果我，作为用户，决定关闭我的数据我只是不想让任何人打开它。这可能有几个原因，其中任何一个都应该足够了，但是说你离开了这个国家并且你没有国际数据计划，并且意外或默认你激活了数据漫游。如果我发现某些应用程序打开了我的数据并花费了敏感金额，我会非常生气，而且我会很个人化。

更合适的方法和直接的解决方案是，每当用户打开您的应用程序或可以访问某些 wifi 连接（[ConnectivityManager 是您的朋友](http://developer.android.com/reference/android/net/ConnectivityManager.html)）时，根据一些简单的条件（上次同步）不时进行硬/完全同步超过一周，保存的数据过时，不一致等）并在其余情况下进行软同步（在后台更新数据）。

此外，定期同步意味着在用户不使用应用程序的情况下浪费用户数据。最终，这会将您的应用程序变成不时被系统关闭的完美候选者。

希望能帮助到你。让我们了解您的最新进展。

相关阅读：[优化下载以实现高效的网络访问](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:29:08.377

不是一个确切的答案 - 但这种方法绝对会破坏电池寿命。睡眠的全部意义在于节省电池电量，无论功能多么有用，这个应用程序都只会让客户烦恼。

我的建议是，如果在不使用应用程序时绝对有必要连接到互联网 - 设置手机唤醒时的触发器。如果不是完全有必要，最好在每次打开应用程序时简单地重新连接到互联网。

# backbone.js - 监听器绑定到模型属性未触发

> ID：11926642
> 
> 赞同：2
> 
> 时间：2012-08-12T23:24:51.553
> 
> 标签：backbone.js, coffeescript

这是 CoffeeScript 中的代码：

```
class this.User extends Backbone.Model
  initialize: -> 
    @access_token
    @cur_video_id_playing
    @logged_in = 0
    @username
    this.bind "change:username", () -> alert this.get(username) 

this.user = new User; 
```

当我在开发者控制台中并调用

```
user.username = "newname" 
```

警报不会触发。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:55:37.127

你必须使用[`Model::set`](http://backbonejs.org/#Model-set)：

```
user.set 'username', 'newname' 
```

或者，使用对象文字：

```
user.set username: 'newname' 
```

用户名实际上将存储在`user.attributes.username`. 在您的更改侦听器中，您应该使用[`Model::get`](http://backbonejs.org/#Model-get);访问用户名 就像是：

```
@on 'change:username', -> alert @get 'username' 
```

# ios - 如何使用 iOS Google Analytics API 设置自定义用户代理？

> ID：11926643
> 
> 赞同：2
> 
> 时间：2012-08-12T23:25:20.777
> 
> 标签：ios, google-analytics

我已经在我的 iOS 应用程序中实现了 Google Analytics 跟踪并且它正在工作，但是在查看“浏览器”的统计信息时，该值似乎被硬编码为“GoogleAnalytics”。

有没有办法在使用 GANTracker 时覆盖用户代理字符串，以便我可以设置自定义值以包括我的应用程序版本和设备版本？

我目前正在为此使用自定义变量，但这样做感觉很笨拙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:55:49.427

我一直在看SDK。在**GANTracker**的公共接口中，没有允许您覆盖代理名称的方法或属性。

[然后，覆盖该值可能需要对静态库 (.a) 进行逆向工程，以查看是否可以覆盖或调用私有方法或变量来手动设置代理，但服务条款](http://www.google.com/analytics/tos.html)不允许这样做[开发工具包](http://www.google.com/analytics/tos.html)。

所以，长话短说，我相信你不能。

# jquery - 地名自动完成示例

> ID：11926645
> 
> 赞同：1
> 
> 时间：2012-08-12T23:25:51.830
> 
> 标签：jquery, jquery-ui, autocomplete, geonames

我正在构建我的第一个真实站点，除此之外，我正在尝试实现一个用户可以选择位置的字段（使用自动完成来确保它们是正确的）。我遇到了这个完美的选择[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)。我从未使用过 json 或 jquery，所以我尝试复制粘贴给定的代码以查看它是如何工作的，看看它是否对我有好处，或者我需要进行任何更改。但是当我尝试它时，自动完成不起作用。我想我在开始时引用 jquery 时错过了一些东西，但我不知道是什么。我想答案很简单，我误解了，但如果有人能帮忙我将不胜感激。这是我正在使用的代码：

```
 <!DOCTYPE html>
        <html lang="en">

        <head>
    <meta charset="utf-8">
    <title>jQuery UI Autocomplete - Remote JSONP datasource</title>
    <link rel="stylesheet" href="jqueryui.com/themes/base/jquery.ui.all.css">
    <script src="jqueryui.com/jquery-1.7.2.js"></script>
    <script src="jqueryui.com/ui/jquery.ui.core.js"></script>
    <script src="jqueryui.com/ui/jquery.ui.widget.js"></script>
    <script src="jqueryui.com/ui/jquery.ui.position.js"></script>
    <script src="jqueryui.com/ui/jquery.ui.autocomplete.js"></script>
    <link rel="stylesheet" href="jqueryui.com/demos/demos.css">

    <style>
    .ui-autocomplete-loading { background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat; }
    #city { width: 25em; }
    </style>

    <script>
    $(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#city" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "http://ws.geonames.org/searchJSON",
                    dataType: "jsonp",
                    data: {
                        featureClass: "P",
                        style: "full",
                        maxRows: 12,
                        name_startsWith: request.term
                    },
                    success: function( data ) {
                        response( $.map( data.geonames, function( item ) {
                            return {
                                label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                                value: item.name
                            }
                        }));
                    }
                });
            },
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        });
    });
    </script>
</head>
<body>

<div class="demo">

<div class="ui-widget">
    <label for="city">Your city: </label>
    <input id="city" />
    Powered by <a href="http://geonames.org">geonames.org</a>
</div>

<div class="ui-widget" style="margin-top:2em; font-family:Arial">
    Result:
    <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div>

</div><!-- End demo -->

<div class="demo-description">
<p>The Autocomplete widgets provides suggestions while you type into the field. Here the suggestions are cities, displayed when at least two characters are entered into the field.</p>
<p>In this case, the datasource is the <a href="http://geonames.org">geonames.org webservice</a>. While only the city name itself ends up in the input after selecting an element, more info is displayed in the suggestions to help find the right entry. That data is also available in callbacks, as illustrated by the Result area below the input.</p>
</div><!-- End demo-description -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:36:05.943

您将需要从本地域或 CDN 引用您的脚本文件（jQueryUI 不允许您从 HTML 页面下载它们的脚本引用）。为了让事情顺利进行，我建议使用 CDN 来加载 jQuery、jQueryUI 和主题。

因此，请尝试使用以下内容替换您的`script`标签（jQuery 和 jQueryUI 引用）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js" type="text/javascript"></script> 
```

并将您的 CSS 引用 ( `link rel='stylesheet'`) 替换为 CDN 上的主题：

```
<link rel='stylesheet' href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css' /> 
```

从那里您可以自定义要在下载页面上使用的 jQueryUI 部分，并引用从您的应用程序构建的 JS 文件。

# c# - XNA 设置等距相机视图或世界？

> ID：11926647
> 
> 赞同：1
> 
> 时间：2012-08-12T23:26:21.353
> 
> 标签：c#, 3d, xna, directx

我正在尝试使用相机创建等距（35 度）视图。

我正在绘制一个围绕 Z 轴旋转的三角形。

由于某种原因，三角形在旋转的某个点被切割，给出了这个结果

![http://img442.imageshack.us/img442/8987/imagezle.jpg](../Images/2eec8a00113d8c6707b742fe89fe7037.png)

我使用此站点通过角度和 z 距离计算相机位置：[http ://www.easycalculation.com/trigonometry/triangle-angles.php](http://www.easycalculation.com/trigonometry/triangle-angles.php)

这就是我定义相机的方式：

```
// isometric angle is 35.2º => for -14.1759f Y = 10 Z
Vector3 camPos = new Vector3(0, -14.1759f, 10f);
Vector3 lookAt = new Vector3(0, 0, 0);
viewMat = Matrix.CreateLookAt(camPos, lookAt, Vector3.Up);

//projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, Game.GraphicsDevice.Viewport.AspectRatio, 1, 100);
float width = GameInterface.vpMissionWindow.Width;
float height = GameInterface.vpMissionWindow.Height;
projMat = Matrix.CreateOrthographic(width, height, 1, 1000);

worldMat = Matrix.Identity; 
```

这就是我重新计算世界矩阵旋转的方式：

```
worldMat = Matrix.CreateRotationZ(3* visionAngle);

// keep triangle arround this Center point
worldMat *= Matrix.CreateTranslation(center);

effect.Parameters["xWorld"].SetValue(worldMat);

// updating rotation angle
visionAngle += 0.005f; 
```

知道我可能做错了什么吗？这是我第一次从事 3D 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:03:30.730

**你的三角形被远平面剪裁了。**

**当您的 GPU 渲染内容时，它只会渲染(-1, -1, 0)**到**(1, 1, 1)**范围内的像素。即：在视口的左下角和右上角之间。但也在 Z 轴上的一些“近”平面和一些“远”平面之间。（除了进行裁剪之外，这还决定了深度缓冲区所覆盖的值的范围。）

您的投影矩阵采用世界或视图空间中的顶点，并对其进行转换，以使其适合该栅格空间。您可能已经看到了透视投影矩阵的[视锥体](https://www.google.com.au/search?hl=en&q=view+frustum&tbm=isch)的标准图像，它显示了该光栅区域的边缘在转换回世界空间时的显示方式。正交投影也存在同样的情况，但视图区域的边缘是平行的。

简单的答案是增加与远平面的距离，以使所有几何图形都落在栅格区域内。它是 的第四个参数`Matrix.CreateOrthographic`。

增加近平面和远平面之间的距离会降低深度缓冲区的精度 - 因此请避免将其设置得比您需要的大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:58:08.157

我认为你的远平面正在裁剪它，所以你应该使投影矩阵远平面参数更大......

```
 projMat = Matrix.CreateOrthographic(width, height, 1, 10000); 
```

# objective-c - 在 iOS 上播放实时流中的视频，同时将流保存到磁盘

> ID：11926649
> 
> 赞同：6
> 
> 时间：2012-08-12T23:26:40.220
> 
> 标签：objective-c, ios, streaming, avfoundation, nsurlrequest

我一直在研究这个话题一段时间，但我真的不知道如何实现这一目标。假设我们有一个来自 HTTP 流的视频，我希望能够在我的应用程序中播放该视频，同时该视频也保存在磁盘上。我知道我可以使用`AVFoundation`或 MediaPlayer 框架播放视频，并且可以通过 `NSURLRequest`.

这是两个不同的过程，需要两次加载视频。我不知道是否以及如何将这两者结合起来。这可能/可行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T00:48:30.933

这是可能的。但是，出于您的 YouTube 视频的目的，如果您喜欢我不想推荐。因为遵循 Youtbe TOS。

出于以下原因：

> 22.4
> 
> 我们发现您的应用包含可能允许其用户下载 YouTube 内容的信息，这不符合 YouTube 服务条款。
> 
> “......您不得下载任何内容，除非您看到 YouTube 在服务上针对该内容显示的“下载”或类似链接。您不得复制、复制、分发、传输、广播、展示、出售、许可或未经 YouTube 或内容的相应许可方事先书面同意，将任何内容用于任何其他目的。YouTube 及其许可方保留未明确授予服务和内容的所有权利。

另请参阅以下站点问题。这很重要。你肯定需要阅读。

[http://www.iphonedevsdk.com/forum/business-legal-app-store/88260-youtube-downloader.html](http://www.iphonedevsdk.com/forum/business-legal-app-store/88260-youtube-downloader.html)

* * *

无论如何，现在我将告诉您如何实现它们。

> 一个。Streaming Service 实现起来并不难。根据苹果的示例代码可以很容易地实现。请注意以下事项。这使用 AVPlayer。在 3G 时，我测试了 Wifi。没关系。如何测试？上传到您的服务器的视频或获取视频链接。并复制并粘贴到源代码 xib textField 中。

[缝合流播放器](http://developer.apple.com/library/ios/#samplecode/StitchedStreamPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010092)

> 湾。同时提供视频下载。我会推荐AFNetworking。ARC 支持它。所以如果应用程序状态是后台，下载继续。

[AF网络](https://www.google.co.kr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CCIQFjAA&url=https%3A%2F%2Fgithub.com%2FAFNetworking%2FAFNetworking%2F&ei=J00oUNbCHMahiQfHzQE&usg=AFQjCNFbActq0_k7ELGSu7v92UXm1DH_VA&cad=rjt)

如何下载？

```
NSURLRequest *request = [NSURLRequest requestWithURL:"your_http_video_url" cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:20];

AFURLConnection *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:"your_save_video_name.mp4"];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setDownloadProgressBlock:^(NSInteger bytesRead, long long 
totalBytesRead, long long totalBytesExpectedToRead)
{
    //do stuff. about upadte progressbar...
}];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
{
  NSLog(@"downloadComplete"); // show alertView to user.
}];
[operation start]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T10:16:14.520

您应该查看这个出色的答案：

[https://stackoverflow.com/a/23754994/1509392](https://stackoverflow.com/a/23754994/1509392)

它解释了如何使用 AVURLAsset 完成此操作并向 resourceLoader 对象提供数据。这个想法是 resourceLoader 将向您的代理询问媒体数据，然后您可以从源下载并保存到磁盘。

# php - 在 Zend 框架中使用 fopen 和 fwrite？

> ID：11926650
> 
> 赞同：1
> 
> 时间：2012-08-12T23:26:40.863
> 
> 标签：php, zend-framework, fopen

我正在尝试使用 Zend Framework 检查文件是否存在，如果文件不存在，则创建它。这是正在使用的代码：

```
$filename = "/assessmentsFile/rubrics/$rubricID.php";
$somecontent = "test";

if (!$handle = fopen($filename, 'w+')) {
    echo "Cannot open file ($filename)";
    exit;
}

// Write $somecontent to our opened file.
if (fwrite($handle, $somecontent) === false) {
   echo "Cannot write to file ($filename)";
   exit;
} 
```

但是，我假设由于 Zend 处理文件结构的方式，如果文件不存在，它就会吐出：

> 警告：fopen（/assessmentsFile/rubrics/1.php）[function.fopen]：打开流失败：没有这样的文件或目录

因为 fopen 函数不起作用，所以 fwrite 无法写入文件。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:45:49.187

最有可能的问题在于`$filename`.

你有

```
$filename = "/assessmentsFile/rubrics/$rubricID.php"; 
```

它试图在服务器的根目录中创建一个名为`assessmentsFile`.

您很可能需要使用：

```
$filename = $_SERVER['DOCUMENT_ROOT'] . "/assessmentsFile/rubrics/$rubricID.php"; 
```

`$_SERVER['DOCUMENT_ROOT']`如果该`assessmentsFile`文件夹位于您的 Web 根目录中，则应该可以解决问题。否则，您可以使用其他变量来获得完全限定的路径，或者您可以简单地对路径进行硬编码：

```
$filename = "/home/yoursite/public_html/assessmentsFile/rubrics/$rubricID.php"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:29:53.773

有一个函数`file_exists`可以告诉您文件是否存在，并且`is_file`您可以检查它是一个文件（而不是一个目录）。

（另一种方法是通过在函数调用之前放置 @ 来抑制警告（例如`$handle=@fopen(...)`，但最好检查文件是否存在）

试试这个：

```
if(is_file($filename)){ // exists
  $handle=fopen($filename,"w+");
}else{
  $handle=fopen($filename,"w"); // create it
}
// ... 
```

# php - Magento 1.6.2 不能重新索引产品平面数据

> ID：11926651
> 
> 赞同：0
> 
> 时间：2012-08-12T23:26:47.443
> 
> 标签：php, mysql, magento

我们的 magento 1.6.2 不能重新索引产品平面数据。它有时还会显示“重新索引过程存在问题”。

我从其他用户的经验中尝试了许多解决方案。没有结果。我们进口了散装产品，但我们不确定这是重新索引问题的原因。

什么是理想的解决方案？

这是我在 shell 中使用的命令：

```
php /usr/local/lsws/fcgi-bin/lsphp5 /home/user/domains/my domain../public_html/shell/indexer.php 
```

这是来自 exception.log 的错误

```
2012-08-09T14:55:43+00:00 DEBUG (7): Exception message: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`galagearbox/#sql-1662_1fc419`, CONSTRAINT `FK_CAT_PRD_FLAT_4_ENTT_ID_CAT_PRD_ENTT_ENTT_ID` FOREIGN KEY (`entity_id`) REFERENCES `catalog_product_entity` (`entity_id`) ON DELETE CASCA)
Trace: #0 /home/corecolu/public_html/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /home/corecolu/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /home/corecolu/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /home/corecolu/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /home/corecolu/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('ALTER TABLE `ca...', Array)
#5 /home/corecolu/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('ALTER TABLE `ca...', Array)
#6 /home/corecolu/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(327): Varien_Db_Adapter_Pdo_Mysql->query('ALTER TABLE `ca...')
#7 /home/corecolu/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(2548): Varien_Db_Adapter_Pdo_Mysql->raw_query('ALTER TABLE `ca...')
#8 /home/corecolu/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(816): Varien_Db_Adapter_Pdo_Mysql->addForeignKey('FK_CAT_PRD_FLAT...', 'catalog_product...', 'entity_id', 'catalog_product...', 'entity_id', 'CASCADE', 'CASCADE')
#9 /home/corecolu/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(1390): Mage_Catalog_Model_Resource_Product_Flat_Indexer->prepareFlatTable(4)
#10 /home/corecolu/public_html/app/code/core/Mage/Catalog/Model/Product/Flat/Indexer.php(296): Mage_Catalog_Model_Resource_Product_Flat_Indexer->reindexAll()
#11 /home/corecolu/public_html/app/code/core/Mage/Catalog/Model/Product/Indexer/Flat.php(336): Mage_Catalog_Model_Product_Flat_Indexer->reindexAll()
#12 /home/corecolu/public_html/app/code/core/Mage/Index/Model/Process.php(207): Mage_Catalog_Model_Product_Indexer_Flat->reindexAll()
#13 /home/corecolu/public_html/app/code/core/Mage/Index/Model/Process.php(253): Mage_Index_Model_Process->reindexAll()
#14 /home/corecolu/public_html/app/code/core/Mage/Index/controllers/Adminhtml/ProcessController.php(124): Mage_Index_Model_Process->reindexEverything()
#15 /home/corecolu/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Index_Adminhtml_ProcessController->reindexProcessAction()
#16 /home/corecolu/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('reindexProcess')
#17 /home/corecolu/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#18 /home/corecolu/public_html/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#19 /home/corecolu/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#20 /home/corecolu/public_html/index.php(83): Mage::run('', 'store')
#21 {main} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T05:49:14.647

Magento 中的重新索引错误可能有很多原因，所以恐怕永远不会有一个“理想”的解决方案涵盖所有可能的错误。

由于您发布了非技术错误消息，我猜您已尝试使用管理后端重新索引产品平面数据并在那里看到错误消息。

我建议尝试再次重新索引，但使用`shell/indexer.php`这个时间：

```
/usr/bin/php -f /abs/path/to/shell/indexer.php -- --reindex catalog_product_flat 
```

这样，如果重新索引失败，您将获得更有意义的技术错误消息。

这是一个列表，显示了哪个参数用于哪个索引：

```
catalog_product_attribute     Product Attributes
catalog_product_price         Product Prices
catalog_url                   Catalog URL Rewrites
catalog_product_flat          Product Flat Data
catalog_category_flat         Category Flat Data
catalog_category_product      Category Products
catalogsearch_fulltext        Catalog Search Index
cataloginventory_stock        Stock Status
tag_summary                   Tag Aggregation Data 
```

### 更新

您添加到帖子中的异常告诉您，

```
catalog_product_flat_4.entity_id 
```

和

```
catalog_product_entity.entity_id 
```

被发现已损坏。

通常这意味着一些记录包含`null`在字段`catalog_product_entity.entity_id`中，它们应该包含现有`entity_id`的。

在尝试解决此问题之前，请先**备份您的数据库**。

现在，要查找损坏的记录，请使用以下命令查询您的数据库：

```
SELECT
    a.entity_id
FROM
    catalog_product_flat_4 AS a
LEFT JOIN
    catalog_product_entity AS b ON a.entity_id = b.entity_id
WHERE
    ISNULL(b.entity_id) 
```

本`entity_id`次查询找到的`entity_id`s是表中的s `catalog_product_flat_4`，已经损坏，需要删除。

删除 中的相应记录`catalog_product_flat_4`，然后再次尝试重新索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:47:59.677

```
create one file like reindex.php in your magento root directory with following code

<?php

    enter code here

// when you get status "Processing" instead of "Ready" in your index management run this script and it's working fine
// change the index order as per your requirement currently it's 7 for Catalog Search Index  you can set as per your requirement

require_once 'app/Mage.php';
umask( 0 );
Mage :: app( "default" );
Mage::log("Started Rebuilding Search Index At: " . date("d/m/y h:i:s"));
$sql = "truncate catalogsearch_fulltext;";
$mysqli = Mage::getSingleton('core/resource')->getConnection('core_write');
$mysqli->query($sql);
$process = Mage::getModel('index/process')->load(7);
$process->reindexAll();
Mage::log("Finished Rebuilding Search Index At: " . date("d/m/y h:i:s"));

now save it and run it using browser and it will solved your problem

I hope you will get your solution. I will help you if you still getting problem. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T08:24:14.590

magento 以编程方式重新索引 ID 代码

1 个目录产品属性

2 目录产品价格

3 目录_url

4 catalog_product_flat

5 目录_类别_平面

6 目录_类别_产品

7 目录search_stock

8 目录inventory_stock

9 tag_summary

对于 ($i = 1; $i <= 9; $i++) {

$process = Mage::getModel('index/process')->load($i);

$process->reindexAll();

}

# jquery - 调试 Jquery 冲突/错误

> ID：11926652
> 
> 赞同：1
> 
> 时间：2012-08-12T23:27:38.617
> 
> 标签：jquery

有没有一种简单的方法来调试 jquery 冲突/错误？我目前正在使用萤火虫，但它根本没有显示任何错误。我正在添加 jquery 库和 jquery 脚本以及头部所需的脚本，但它似乎不起作用，老实说，我似乎无法正常工作，并且 firebug 中没有出现错误，所以只是想知道是否有什么更好的方法可以用来检查错误等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:41:58.837

你应该使用：

[https://addons.mozilla.org/nl/firefox/addon/web-developer/?src=search](https://addons.mozilla.org/nl/firefox/addon/web-developer/?src=search)

它出色而快速，并且有一些不错的其他工具。jquery/js/css/html 错误显示在工具栏的右侧。

# javascript - IE8 显示重叠使用 insertBefore

> ID：11926653
> 
> 赞同：1
> 
> 时间：2012-08-12T23:27:38.673
> 
> 标签：javascript, internet-explorer-8

我正在尝试使用 node.insertBefore 将 div 元素从一个部分移动到另一个部分，并按字母顺序对插入进行排序。单击（在本例中单击`A`）重新排序后，我遇到了元素重叠的问题，如下图所示：

![元素重叠问题](../Images/14b64a202fecbc2b3ff413849c530528.png)

我用来产生这个的代码如下；对不起，它有点长，但是如果你将它完整地复制到一个 html 文件中，你会很容易看到我的问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
  <head>

    <script type="text/javascript">

      var moveUp, moveDown;

      var moveUp = function() {
        var e = window.event.srcElement;
        var firstBlock = document.getElementById('firstBlock');
        var moved = false;
        for (var i=0; i<firstBlock.childNodes.length; i++) {
          if (firstBlock.childNodes[i].innerText > e.innerText) {
            firstBlock.insertBefore(e, firstBlock.childNodes[i]);
            moved = true;
            break;
          }
          if (!moved) firstBlock.appendChild(e);
        }
        e.onclick = moveDown;
      };

      var moveDown = function() {
        var e = window.event.srcElement;
        var secondBlock = document.getElementById('secondBlock');
        var moved = false;
        for (var i=0; i<secondBlock.childNodes.length; i++) {
          if (secondBlock.childNodes[i].innerText > e.innerText) {
            secondBlock.insertBefore(e, secondBlock.childNodes[i]);
            moved = true;
            break;
          }
          if (!moved) secondBlock.appendChild(e);
        }
        e.onclick = moveUp;
      };

    </script>

    <title>Test</title>

  </head>

  <body>

    <div id="firstBlock" style="background-color:#dddddd;">
      <div onclick="moveDown()">A</div>
      <div onclick="moveDown()">B</div>
      <div onclick="moveDown()">C</div>
      <div onclick="moveDown()">D</div>
    </div>

    <div id="secondBlock">
      <div onclick="moveUp()">E</div>
      <div onclick="moveUp()">F</div>
      <div onclick="moveUp()">G</div>
      <div onclick="moveUp()">H</div>
    </div>

  </body>

</html> 
```

我做错了什么/奇怪吗？这可以修复/解决吗？在此先感谢您的帮助！

**编辑：**

*   我目前无法在任何其他浏览器中进行测试。
*   我注意到一旦一个部分填满，当项目在部分之间移动时，突出显示不再重新调整。

**编辑 2：Jared 发布的 jsfiddle 的结果** ![jsfiddle 示例](../Images/bc66a6f2cae5b3d9709807d7e9443bbb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T23:29:46.840

碰巧现在回到这个问题。万一其他人遇到这个问题，我最终不得不`div`用表格替换列表并重新排列表格行。另一种选择可能是使用列表。

# c# - 如何制作 WPF Kinect 应用程序的可执行版本？

> ID：11926654
> 
> 赞同：7
> 
> 时间：2012-08-12T23:28:29.600
> 
> 标签：c#, wpf, exe, kinect

我在 Microsoft Visual Studio 2010 中制作了一个 Kinect 应用程序。我需要制作一个可以在任何基于 Windows 的系统上运行的应用程序的 exe。如果我需要这样做，系统是否应该满足任何要求？如果是，那我该怎么做？

我尝试通过将其复制到另一个文件夹中来使用 application/bin/debug/application.exe 中的 exe，但它显示错误，但如果我从 bin/debug/application.exe 运行 exe，它可以工作。我在这里遗漏了什么还是唯一的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T23:47:03.557

“任何基于 Windows 的系统”都行不通。假设您使用的是 Kinect SDK，它只能在 Windows 7（并且应该是 Windows Server 2008）上运行。运行该应用程序的计算机将需要 Kinect Runtime，它仅适用于新的 Kinect for Windows 传感器，或者 Kinect SDK，它也适用于 Kinect for Xbox。微软希望销售更多用于 Windows 传感器的 Kinect，因此他们不允许运行时与旧的 Xbox Kinect 一起使用。在某种程度上是有道理的，但是当我第一次发现它时，这个人让我感到烦恼。有一篇[简短的文章](http://channel9.msdn.com/coding4fun/kinect/When-deploying-Kinect-apps-ensure-the-runtime-components-and-device-are-ready)展示了如何在应用程序加载时测试运行时是否存在，因此您可以显示适当的错误消息，而不仅仅是崩溃。

您需要将程序依赖的任何文件（例如 DLL 文件）与可执行文件一起复制。[这里](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)有关于如何将 DLL 文件嵌入到可执行文件中的说明；我没有尝试过，但它可能值得一试。

安装 Runtime 或 SDK 时应安装正确的 .NET 版本；你不应该担心这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T16:51:35.600

@Coeeffect 是对的，但是您也可以通过转到项目-> 属性-> 发布-> 发布向导来发布您的应用程序的 1.0.0.0 版本，以发布您的应用程序，然后在其他计算等上使用**。**希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T23:31:11.013

您需要复制程序使用的所有非标准 DLL。

目标计算机需要适当版本的 .Net。

# java - 什么会导致“IO error java.net.SocketException: select failed”？

> ID：11926655
> 
> 赞同：3
> 
> 时间：2012-08-12T23:28:33.587
> 
> 标签：java, sockets, io, socket.io, serversocket

我有一个服务器程序在我的笔记本电脑、相同的路由器和相同的代码上运行。它工作正常，客户端可以连接。但是，当我将工作区复制到我的 PC 并运行它时，我得到了这样的废话：

IO 错误 java.net.SocketException: 选择失败

这是代码...

```
public static void main(String[] args) {
    System.out.println("running server!");
        int nreq = 1;
        try{
            ServerSocket sock = new ServerSocket(7331);
        for(;;){
            Socket newsock = sock.accept();
            System.out.println("Creating thread...");
            //Thread t = new ThreadHandler(newsock, nreq);
            //t.start();
            nreq++;
        }
        }

        catch(Exception e)
        {

            System.out.println("IO error  " + e);

        } 
```

基本上是什么导致此错误（我在网上找不到有用的信息）发生在一台 PC 而不是另一台 PC 上？它必须与PC本身有关。我最困惑。基本上它不能打开一个套接字？

这是完整的堆栈跟踪：

```
java.net.SocketException: select failed
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(Unknown Source)
    at java.net.ServerSocket.implAccept(Unknown Source)
    at java.net.ServerSocket.accept(Unknown Source)
    at Server.main(Server.java:18) 
```

如果相关，我在 PC 上使用的是 Windows 7 64 位 Ultimate，这给我带来了问题。它可以正常工作的笔记本电脑是 Windows 7 32 位。所以我能看出的唯一明显区别是 32 位和 64 位。

这可能是相关的吗？我不明白。 [http://forums.codeguru.com/showthread.php?522257-Windows-Sockets-64-bit](http://forums.codeguru.com/showthread.php?522257-Windows-Sockets-64-bit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:31:49.197

由于权限，我遇到了这个问题。我更习惯于 Linux，我需要检查 IPTables 的设置（或禁用它），诸如绑定到端口 < 1024 的非 root 用户之类的权限。我相信在 Windows 上你会想要检查你的用户的管理权限和您的 Windows 防火墙。

# c++ - 带有命令行应用程序的 MacOSX C++ 工作目录

> ID：11926658
> 
> 赞同：1
> 
> 时间：2012-08-12T23:29:00.037
> 
> 标签：c++, macos, command-line, xcode4.1

我一直在试图弄清楚如何将工作目录设置为与我的程序相同的目录。由于我不熟悉 Objective-C 和 Cocoa，所以我将其编写为一个基本的命令行应用程序，即标准输入/输出。出于某种原因，工作目录设置为 $HOME 目录，而不是与文件本身相同的目录。我知道使用

```
system("PWD"); 
```

会回显路径，但格式不可用（至少对我而言）。

编辑：只是为了澄清一点，我需要能够在我的机器/用户上使用文件流的相对文件路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:46:29.543

您可以在方案编辑器中设置从 Xcode 运行时工具将启动的目录。在工具栏中，单击项目名称（> 左侧），然后单击“编辑方案...”，单击左侧列表中的“运行”，然后单击右侧的“选项”选项卡，您将看到使用自定义工作目录的选项。

请注意，不能保证您使用不区分大小写的文件系统，因此您应该使用小写字母`pwd`，否则您的`system(3)`调用将失败。iOS 从不使用不区分大小写的文件系统，OS X 可以安装在不区分大小写或区分大小写的文件系统上。 `getcwd(3)`在任何情况下都更有效/更合适。

此外，如果可以，您应该升级到当前版本的 Xcode。早期的 4.x 版本的边缘非常粗糙（有些人会说 4.4/4.5 仍然是，但它们至少更稳定）。

# jquery - 使用 jquery 将 facebook 页面提要作为 json 获取

> ID：11926659
> 
> 赞同：11
> 
> 时间：2012-08-12T23:29:12.657
> 
> 标签：jquery, facebook-graph-api, jsonp

我一直在尝试使用 jquery 从 json 数据中获取 facebook 页面提要。到目前为止，我已经能够使用我的方法获取页面详细信息，但是当我尝试获取页面的提要时，它给了我一个错误，并且在控制台中显示“语法错误：无效标签”。这是我的代码.....

```
 $.getJSON("https://www.facebook.com/feeds/page.php?id=237173582992285&format=json&callback=?", function(results){
    console.log(results);
}); 
```

我还用整个代码创建了一个 jsfiddle。如果需要，请查看 -> [http://jsfiddle.net/yZn7N/](http://jsfiddle.net/yZn7N/)。如果我转到指定的链接，我可以看到所有的 json 数据并且它们确实被获取，我不确定是什么导致了无效标签错误。任何帮助修复它或解释为什么会发生这种情况将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T23:50:36.120

为此，您需要使用 Facebook Graph API。

[https://developers.facebook.com/docs/reference/api/page/#feed](https://developers.facebook.com/docs/reference/api/page/#feed)

您的电话应更改为：

[https://graph.facebook.com/237173582992285/feed?access_token=YOUR-TOKEN-GOES-HERE](https://graph.facebook.com/237173582992285/feed?access_token=YOUR-TOKEN-GOES-HERE)

您可以尝试使用此测试页面并尝试熟悉图形 api。

[https://developers.facebook.com/tools/explorer/?method=GET&path=237173582992285%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=237173582992285%2Ffeed)

编辑：

您还可以从页面中以多种格式获取墙。

JSON [https://www.facebook.com/feeds/page.php?format=json&id=237173582992285](https://www.facebook.com/feeds/page.php?format=json&id=237173582992285)

ATOM [https://www.facebook.com/feeds/page.php?format=atom10&id=237173582992285](https://www.facebook.com/feeds/page.php?format=atom10&id=237173582992285)

RSS [https://www.facebook.com/feeds/page.php?format=rss20&id=237173582992285](https://www.facebook.com/feeds/page.php?format=rss20&id=237173582992285)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:48:44.943

摆脱`&callback=?`您的网址。作为函数的一部分，您有一个结果处理程序。你不需要回调。

这*应该*会给你你正在寻找的结果，但似乎 Facebook 正在通过 .htaccess 策略阻止 jsfiddle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T19:31:49.900

我只是想喜欢这个页面，在这样做之前，我已经打开了我的浏览器网络控制台。然后当我点击喜欢按钮时，我检查了网络调用，并且可以轻松找出页面 ID。

# jquery - 如何选择除特定 ID 下的所有输入？

> ID：11926660
> 
> 赞同：13
> 
> 时间：2012-08-12T23:29:13.703
> 
> 标签：jquery, html, selector, except

我想要做的是选择文档上的所有输入按钮，除了那些驻留在特定 ID 下的按钮。

例子：

```
<body>
<input type="button">

<div id="something">
     <input type="button">
</div>
<div id="something2">
     <input type="button">
</div>

<input type="button">
<input type="button">
<input type="button">
</body> 
```

例如，我想选择所有输入，除了那些位于“某物”下的`<div>`输入`id`。

我试过的：

```
1) $('input[type="button"]:not(:parent(#something))').addCSS();

2) $('input[type="button"] :not(#something input[type="button"])') 
```

和其他类似的方法

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-12T23:36:29.057

你可以这样做（相对有效）。

```
$("input[type=button]").filter(function() {
    return $(this).closest("#something").length == 0;
}); 
```

首先，您获取所有`input[type=button]`元素，然后将其`#something`作为父元素删除。

另一种可能性是：

```
$("input[type=button]").not("#something input[type=button]") 
```

您必须测试两者以查看哪个更有效，但任何一个都可以。

两者的工作演示：http: [//jsfiddle.net/jfriend00/fjxDb/](http://jsfiddle.net/jfriend00/fjxDb/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-28T10:51:54.853

您快到了，您需要做的就是删除 :not 之前的空格。

```
$('input[type="button"]:not(#something input[type="button"])') 
```

我知道这是一个老问题，但它首先出现在 Google 上，并且使用 jquery 的 .not() 如接受的答案所示并不总是一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T23:32:23.290

也许这有效：`$(":not(#something) input[type=button]")`

# css - 唯一 ID CSS | 为什么我的造型在别处被采纳？

> ID：11926661
> 
> 赞同：0
> 
> 时间：2012-08-12T23:29:28.240
> 
> 标签：css

这里是一个棘手的问题。

我在一个都包含锚的页面上有两个 UL 的样式。

每个 UL 都有自己的特定 ID 和特定样式，这些都是正确的。

这是令人困惑的部分-假设我有这个：

```
#nav {
    margin: 20px 0 0 0;
  }
    #nav li {
      float: left;

    }
      #nav li a {
        display: block;
        text-transform: uppercase;
        color: #555454;
        font-size: 14px;
        padding: 11px 17px;

      } 
```

然后这个：

```
#gt-list 
    {
        margin: 10px 0 0 0;
    }
        #gt-list li, a
        {
            color: #fff;
            margin: 0 0 10px 0;
        }
            #gt-list li a:hover 
            {
                color: #ff6b00;
            }
        #gt-list li img 
        {
            float: left;
            margin: 0 15px 0 0;
            width: 20px;
        }
        #gt-list li span
        {
            float: left;
            display: inline-block;
            margin: 2px 0 0 0;

        } 
```

这是要使用的 HTML：

```
<ul id="nav">
                    <li class="selected">
                        <a href="#">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            About us
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Ways to give
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Our Work
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            News
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Learn
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Contact Us
                        </a>
                    </li>
                </ul> 
```

以上是网站上使用的实际样式。

所以这是我的问题：#nav 正在从 #gt-list 中获取 LI 样式以及锚样式。

我已将所有父 div ID 插入到每个 UL 中，这没有影响。

这个我看不懂！？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:32:37.677

该规则中有一个逗号，这意味着它将应用于`li`具有该 id 的元素和所有锚元素下的所有元素，无论它们在哪里。

```
 #gt-list li, a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:32:22.747

罪魁祸首是：

```
#gt-list li, a
    {
        color: #fff;
        margin: 0 0 10px 0;
    } 
```

`li`和之间的逗号`a`导致指定的样式被`a`全局应用，因为它表示：*#gt-list AND all 中的*
*所有`li``a`*。
而您希望它阅读的是：*#gt-list 中的*
*所有`li`AND`a`*

将其更改为

```
#gt-list li a
    {
        color: #fff;
        margin: 0 0 10px 0;
    } 
```

# php - 在 Wordpress 中修剪 get_next_posts_link

> ID：11926664
> 
> 赞同：2
> 
> 时间：2012-08-12T23:30:21.407
> 
> 标签：php, wordpress

我正在使用`get_next_posts_link()`Wordpress 主题中的自定义分页控件。问题是，该函数返回 HTML 标记和一些描述文本：

```
<a href="http://localhost/awebsite/page/2/" >Next Page &raquo;</a>"><span>Next</span> 
```

我感兴趣的只是 URL。是否有仅获取 URL 的核心功能？还是我必须执行一堆字符串函数来减少我返回的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:53:59.687

`get_next_posts_link()`使用未记录的函数`get_next_posts_page_link()`来返回实际的 URL，因此假设存在下一页，您也许可以使用它而不是尝试从`get_next_posts_link()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T11:49:33.547

将以下函数用于下一个和上一个 URL，而不是 get_next_posts_link() 和 get_prev_posts_link

```
$next_link = get_permalink(get_adjacent_post(false,'',false));          
$prev_link = get_permalink(get_adjacent_post(false,'',true)); 
```

# html - 内联 HTML5 SVG 过滤器，不干扰布局

> ID：11926668
> 
> 赞同：4
> 
> 时间：2012-08-12T23:30:48.163
> 
> 标签：html, svg

我需要将以下内联 SVG 过滤器注入到我的 HTML5 文档中：

```
<svg>
    <defs>
        <filter id="grayscale">
            <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0">
        </filter>
    </defs>
</svg> 
```

我尝试将它放在`<html>`标签之外，但这不起作用。它会在显示页面的开头或结尾留下很大的空白区域，具体取决于我放置它的位置。

我尝试将它放在标签的`<head>`或开头，`<body>`但这也会在显示文档的开头留下一个很大的空白区域。

SVG 对象上的设置`display: none;`将阻止过滤器工作。

我也尝试将`<svg>`'s`width`和`height`properties 设置为零，但这仅在我将 svg 对象的 CSS 设置为`display: block;`.

例如：

```
<!DOCTYPE html>
<html>
    <head>
        ...
        <svg> ... </svg>
    </head>
    ...
</html> 
```

目前，我的临时解决方法是使用 css 尝试隐藏它：

```
svg {
    height: 0;
    position: absolute;
} 
```

如何防止 SVG 对象干扰我的 HTML 布局（不使用这个 css 技巧）？

[jsFiddle 示例](http://jsfiddle.net/EvFrX/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:45:20.500

我不肯定这行得通，但 SVG 元素允许宽度和高度属性（如`img`标签）。所以尝试：`svg width="0" height="0"`

# perl - 知道为什么 CPAN 被锁定在循环依赖中，尽管我只发出 get 吗？

> ID：11926684
> 
> 赞同：2
> 
> 时间：2012-08-12T23:34:48.800
> 
> 标签：perl, cpan

知道为什么 CPAN 被锁定在循环依赖中，尽管我只发出 get 吗？

这只发生在我从全新的 Perl 安装（或删除 CPAN/源目录）开始时：

```
cpan[1]> get Devel::Declare
CPAN: CPAN::SQLite loaded ok (v0.202)
CPAN: LWP::UserAgent loaded ok (v6.04)
CPAN: Time::HiRes loaded ok (v1.9725)
Fetching with LWP:
http://cpan.yimg.com/authors/01mailrc.txt.gz
CPAN: YAML::XS loaded ok (v0.38)
Fetching with LWP:
http://cpan.yimg.com/modules/02packages.details.txt.gz
Fetching with LWP:
http://cpan.yimg.com/modules/03modlist.data.gz
Database was generated on Sun, 12 Aug 2012 19:51:28 GMT
Running get for module 'Devel::Declare'
CPAN: CPAN::Kwalify loaded ok (v5.50)
Fetching with LWP:
http://cpan.yimg.com/authors/id/Z/ZE/ZEFRAM/Devel-Declare-0.006011.tar.gz
CPAN: Digest::SHA loaded ok (v5.71)
Fetching with LWP:
http://cpan.yimg.com/authors/id/Z/ZE/ZEFRAM/CHECKSUMS
CPAN: Compress::Zlib loaded ok (v2.049)
Checksum for C:\CPANTesters\cpan\sources\authors\id\Z\ZE\ZEFRAM\Devel-Declare-0.
006011.tar.gz ok
CPAN: Archive::Tar loaded ok (v1.88)
Devel-Declare-0.006011/
Devel-Declare-0.006011/META.yml
...
Devel-Declare-0.006011/t/statement.t
Devel-Declare-0.006011/t/early1_x.pm
Devel-Declare-0.006011/t/combi.t
CPAN: File::Temp loaded ok (v0.22)
CPAN: Parse::CPAN::Meta loaded ok (v1.4402)
CPAN: CPAN::Meta loaded ok (v2.120630)
CPAN: Module::CoreList loaded ok (v2.66)
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
Fetching with LWP:
http://cpan.yimg.com/authors/id/Z/ZE/ZEFRAM/B-Hooks-OP-Check-0.19.tar.gz
Checksum for C:\CPANTesters\cpan\sources\authors\id\Z\ZE\ZEFRAM\B-Hooks-OP-Check
-0.19.tar.gz ok
B-Hooks-OP-Check-0.19/
B-Hooks-OP-Check-0.19/META.yml
...
B-Hooks-OP-Check-0.19/t/
B-Hooks-OP-Check-0.19/t/use.t
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
---- Unsatisfied dependencies detected during ----
----   ZEFRAM/Devel-Declare-0.006011.tar.gz   ----
    B::Hooks::OP::Check [build_requires]
Running get for module 'B::Hooks::OP::Check'
Caught SIGINT, trying to continue 
```

该命令由 Ctrl-C 终止

Perl 是 Windows 7 64 位上的 ActiveState Perl v5.16.0

CPAN.pm 是 1.9800

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:47:46.780

我的猜测是，这是`Makefile.PL`. 建议你`B::Hooks::OP::Check`先安装试试。

您也可以尝试使用[`cpanm`](https://metacpan.org/module/App%3a%3acpanminus)which 不会尝试如此聪明，因此不那么挑剔

# iphone - UIImage 显示在具有指定字符串值的单元格中

> ID：11926685
> 
> 赞同：1
> 
> 时间：2012-08-12T23:34:58.277
> 
> 标签：iphone, objective-c, ios, xcode

这篇文章在我的 TableView 中给出了奇怪的结果。我希望`UIImage`为键“标记”=“是”的重复对象值的单元格显示。

什么是正确的代码？

```
if ([[[sortedObjects objectAtIndex: indexPath.row] valueForKey:@"Marked"] isEqual:@"Yes"])  
{
    cell.markedImageView.image = [UIImage imageNamed:@"markedItem.png"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:44:50.683

问题是每次重用单元格时都需要清除 imageView 图像。

```
- (void)configCell:(MyCustomCell *)cell atIndexPath:(NSIndexPath)indexPath
{
  cell.markedImageView.image = nil;

  // configure cell normally

  if ([[[sortedObjects objectAtIndex: indexPath.row] valueForKey:@"Marked"] isEqual:@"Yes"])  
  {
    cell.markedImageView.image = [UIImage imageNamed:@"markedItem.png"];
  }
} 
```

# c# - Windows 8 滑出式菜单

> ID：11926687
> 
> 赞同：1
> 
> 时间：2012-08-12T23:35:20.013
> 
> 标签：c#, xaml, windows-8

我需要什么控件来为我的应用程序创建自己的滑出菜单（即魅力菜单）？

我想在`XAML`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:36:55.243

您还可以使用 Tim Heuer 的 Callisto [https://github.com/timheuer/callisto](https://github.com/timheuer/callisto)我在我的@Win8RSSReader 应用程序中使用了相同的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:56:38.370

查看此博客文章中的库以创建魅力浮出控件：[http ://w8isms.blogspot.com.au/2012/07/charmflyout-another-charming.html](http://w8isms.blogspot.com.au/2012/07/charmflyout-another-charming.html)

# ios - 调用超级层的 -renderInContext: 时 CAEmitterLayer 不渲染

> ID：11926690
> 
> 赞同：6
> 
> 时间：2012-08-12T23:36:14.277
> 
> 标签：ios, core-animation, calayer, caemitterlayer

我有一个绘图应用程序，我希望我的用户能够使用粒子效果作为他们绘图的一部分。基本上，该应用程序的重点是执行自定义绘图并保存到相机胶卷或通过万维网共享。

我最近遇到了这`CAEmitterLayer`门课，我认为这将是一种添加粒子效果的简单有效的方法。

我已经能够使用该`CAEmitterLayer`实现在应用程序的屏幕上绘制粒子。所以在屏幕上渲染效果很好。

当我开始使用渲染绘图的内容时

```
CGContextRef context = UIGraphicsBeginImageContextWithSize(self.bounds.size);

// The instance drawingView has a CAEmitterLayer instance in its layer/view hierarchy
[drawingView.layer renderInContext:context];

//Note: I have also tried using the layer.presentationLayer and still nada

....
//Get the image from the current image context here for saving to Camera Roll or sharing

....the particles are never rendered in the image. 
```

我认为正在发生的事情

`CAEmitterLayer`处于“动画”粒子的恒定状态。这就是为什么当我尝试渲染图层时（我也尝试过渲染`layers.presentationLayer`模型图层），动画永远不会提交，因此屏幕外图像渲染不包含粒子。

问题 有没有人渲染过`CAEmitterLayer`屏幕外的内容？如果是这样，你是怎么做到的？

替代问题 有谁知道任何不使用 OpenGL 且不是 Cocos2D 的粒子效果系统库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T23:52:59.500

`-[CALayer renderInContext:]`在一些简单的情况下很有用，但在更复杂的情况下不会按预期工作。您将需要找到其他方法来进行绘图。

[的文档`-[CALayer renderInContext:]`](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004500-CH1-SW120)说：

> 此方法的 Mac OS X v10.5 实现不支持整个 Core Animation 合成模型。QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定 backgroundFilters、filters、compositingFilter 或掩码值的图层。Mac OS X 的未来版本可能会增加对渲染这些层和属性的支持。

（这些限制也适用于 iOS。）

标题`CALayer.h`还说：

```
 * WARNING: currently this method does not implement the full
 * CoreAnimation composition model, use with caution. */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T19:08:02.617

我能够让我的 CAEmitterLayer 在其当前动画状态下正确渲染为图像

```
Swift

func drawViewHierarchyInRect(_ rect: CGRect,
          afterScreenUpdates afterUpdates: Bool) -> Bool

Objective-C

- (BOOL)drawViewHierarchyInRect:(CGRect)rect
             afterScreenUpdates:(BOOL)afterUpdates 
```

在当前上下文中

```
UIGraphicsBeginImageContextWithOptions(size, false, 0) 
```

并将 afterScreenUpdates 设置为 true|YES

祝你好运：D

# java - 在 Android 中调用 REST Web 服务并在字符串数据中获取 null

> ID：11926694
> 
> 赞同：0
> 
> 时间：2012-08-12T23:37:31.623
> 
> 标签：java, android, web-services, rest

我正在尝试通过传递 lat 和 lon 以及 userID 来使用 sampleURL 调用 REST Web 服务。但我总是`null`输入字符串数据。有什么建议为什么会发生？我正在使用安卓系统。但是当我尝试在浏览器中打开该 url 时，它会被打开并且我可以看到响应。我猜我的代码有问题。

```
private class GPSLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            String data = findUsersInCurrentRadius(1,location.getLatitude(),location.getLongitude());
            System.out.println("Got Data" +data);
            textView.setText(data);

}

private String findUsersInCurrentRadius(int userid, double lat, double lon) {

        String sampleURL = SERVICE_URL + "/"+REMOTE_METHOD_NAME+"/"+userid+"/"+lat+"/"+lon;
        System.out.println(sampleURL);

        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet(sampleURL);
        String text = null;
        try {
            HttpResponse response = httpClient.execute(httpGet, localContext);
            System.out.println("Some Response" +response);
            HttpEntity entity = response.getEntity();
            text = getASCIIContentFromEntity(entity);
        } catch (Exception e1) {
            return e1.getLocalizedMessage();
        }
        return text;
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:12:51.633

您正在主 UI 线程上运行网络请求。使用 AsyncTask 执行网络请求。Android OS >= 3.0 不允许在主 UI 线程上运行网络请求。

你可以使用`AsyncTask`喜欢

```
 private class NetworkRequest extends AsyncTask<String, Void, String> {
    int userid;
    double lat, lon;
    String reponse;

    public NetworkRequest(int userID, double lat, double lon) {
        this.userid = userID;
        this.lon = lon;
        this.lat = lot;
    }

    @Override
    protected String doInBackground(String... params) {
        reponse = findUsersInCurrentRadius(userid, lat, lon);
        return "Executed";
    }

    @Override
    protected void onPostExecute(String result) {
        if (null != reponse) {
            System.out.println("Got Data" + reponse);
            textView.setText(reponse);
        }
        else{
            //Handle the Error
        }
    }

} 
```

然后在你的`onLocationChanged`电话中`Async Task`

```
new NetworkRequest(userid,lat,lon).execute(); 
```

# sql-server - 为 SSAS 中的演示/报告定义相关字段

> ID：11926697
> 
> 赞同：0
> 
> 时间：2012-08-12T23:37:36.600
> 
> 标签：sql-server, ssas

我可能在这里走错了路，但我所追求的是一些关于如何处理 SSAS 中的相关数据的指导。

我所追求的是，​​当我创建一个多维数据集时，我希望能够将它用于报告/最终用户，但我的维度可能有一个产品多维数据集，但是引入其他数据（如产品名称）的适当方法是什么，描述、创建日期等 - 您可能不想实际深入研究但与您正在查看的轴相关的信息。

如果我从中报道，我需要展示其中的一些信息，但我似乎看不到方法，而且大多数 youtube 视频等似乎都涵盖了 Adventureworks 的真正基础知识，仅此而已 - 所以我'不确定这在现实世界中是如何运作的。

所以，最后他们可以进入 Excel/whatever，看看：

```
Product code      Name      Total Profit 
```

而不仅仅是代码轴和利润。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:55:10.610

这取决于你想怎么看。我们通常将这些类型的字段称为“成员属性”。您可以通过将 AttributeHierarchyEnabled 属性设置为 False 来创建它们。您可以按照此处所述在 Excel 中使用它们（适用于 Excel 2007 和 Excel 2010）：

[http://blog.davyknuysen.be/2009/08/03/olap-reporting-with-excel-2007-use-member-properties/](http://blog.davyknuysen.be/2009/08/03/olap-reporting-with-excel-2007-use-member-properties/)

# c# - DuplexChannelFactory <反射接口>

> ID：11926699
> 
> 赞同：1
> 
> 时间：2012-08-12T23:38:04.507
> 
> 标签：c#, wcf, reflection, duplex-channel

使用**TypeGenerator**类

```
 public class TypeGenerator
    {
        /// <summary>
        /// internal cache for already generated types
        /// </summary>
        private static Dictionary<Type, Type> asyncTypeCache = new Dictionary<Type, Type>();      

        /// <summary>
        /// provides a cache for the modules
        /// </summary>
        private static Dictionary<string, ModuleBuilder> moduleBuilderCache = new Dictionary<string, ModuleBuilder>();

        /// <summary>
        /// Generates the Async version of the TSync type.
        /// the generate type repects the AsyncPattern and it is already decorated with attributes for WCF operations
        /// </summary>
        /// <typeparam name="TSync">The Sync version of type</typeparam>
        /// <returns>A type that is the Async version of the TSync type, that implements the AsyncPattern for WCF</returns>
        public Type GenerateAsyncInterfaceFor<TSync>() where TSync : class
        {
            Type syncType = typeof(TSync);

            if (asyncTypeCache.ContainsKey(syncType)) return asyncTypeCache[syncType];

            if (!syncType.IsInterface) throw new InvalidOperationException("Only interface type could be transformed");

            var asynchAssemblyName = string.Format("{0}.Async", syncType.Namespace);

            TypeBuilder typeBuilder =
                GetModuleBuilder(asynchAssemblyName)
                .DefineType(
                    string.Format("{0}.Async.{1}", syncType.Namespace, syncType.Name),
                    (syncType.IsPublic ? TypeAttributes.Public : 0) |
                    TypeAttributes.Abstract |
                    TypeAttributes.Interface);

            foreach (var method in syncType.GetAllInterfaceMethods())
            {
                AddBeginAsynchVersionForMethod(typeBuilder, method, @"http://tempuri.org");
                AddEndAsynchVersionForMethod(typeBuilder, method);
            }

            var serviceContractConstructor = typeof(ServiceContractAttribute).GetConstructor(new Type[0]);
            var attribuiteBuilder =
                new CustomAttributeBuilder(
                    serviceContractConstructor,
                    new object[0]);

            typeBuilder.SetCustomAttribute(attribuiteBuilder);

            Type asyncType = typeBuilder.CreateType();

            asyncTypeCache.Add(syncType, asyncType);
            return asyncType;
        }

        /// <summary>
        /// Creates a End verison of a sync method, that implements the AsyncPattern
        /// </summary>
        /// <param name="typeBuilder">the tipebuilder where the type is being building</param>
        /// <param name="method">information about the sync version of the method</param>
        private void AddEndAsynchVersionForMethod(TypeBuilder typeBuilder, MethodInfo method)
        {
            string endMethodName = string.Format("End{0}", method.Name);

            var parameters =
                method.GetParameters()
                .Select(x =>
                    new
                    {
                        Type = x.ParameterType,
                        Name = x.Name,
                        Attributes = x.Attributes,
                    })
                .ToList();

            parameters.Add(
                new
                {
                    Type = typeof(IAsyncResult),
                    Name = "asyncResult",
                    Attributes = ParameterAttributes.None,
                });

            var methodBuilder =
                typeBuilder
                .DefineMethod(
                    endMethodName,
                    method.Attributes,
                    method.CallingConvention,
                    method.ReturnType,
                    parameters.Select(x => x.Type).ToArray());

            for (int i = 0; i < parameters.Count(); i++)
            {
                var parameter = parameters[i];
                methodBuilder.DefineParameter(i + 1, parameter.Attributes, parameter.Name);             
            }
        }

        /// <summary>
        /// Creates a Begin verison of a sync method, that implements the AsyncPattern
        /// </summary>
        /// <param name="typeBuilder">the tipebuilder where the type is being building</param>
        /// <param name="method">information about the sync version of the method</param>
        private void AddBeginAsynchVersionForMethod(TypeBuilder typeBuilder, MethodInfo method, string nameSpace)
        {
            string beginMethodName = string.Format("Begin{0}", method.Name);

            var parametersTypeList = method.GetParameters().Select(x => x.ParameterType).ToList();
            var parametersNameList = method.GetParameters().Select(x => x.Name).ToList();
            var parametersAttributeList = method.GetParameters().Select(x => x.Attributes).ToList();

            parametersTypeList.Add(typeof(AsyncCallback));
            parametersAttributeList.Add(ParameterAttributes.None);
            parametersNameList.Add("callBack");

            parametersTypeList.Add(typeof(object));
            parametersAttributeList.Add(ParameterAttributes.None);
            parametersNameList.Add("statusObject");

            var methodBuilder = 
                typeBuilder
                .DefineMethod(
                    beginMethodName,
                    method.Attributes,
                    method.CallingConvention,
                    typeof(IAsyncResult),
                    parametersTypeList.ToArray());

            for (int i = 0; i < parametersTypeList.Count(); i++)
            {
                methodBuilder.DefineParameter(i + 1, parametersAttributeList[i], parametersNameList[i]);
            }

            var operationContractConstructor = typeof(OperationContractAttribute).GetConstructor(new Type[0]);
            var asynchPatternProperty = typeof(OperationContractAttribute).GetProperty("AsyncPattern");

            var actionProperty = typeof(OperationContractAttribute).GetProperty("Action");
            var actionValue = string.Format("{0}/{1}/{2}", nameSpace, method.DeclaringType.Name, method.Name);

            var replyActionProperty = typeof(OperationContractAttribute).GetProperty("ReplyAction");
            var replyActionValue = string.Format("{0}/{1}/{2}Response", nameSpace, method.DeclaringType.Name, method.Name);

            var attribuiteBuilder = 
                new CustomAttributeBuilder(
                    operationContractConstructor, 
                    new object[0],
                    new[] { asynchPatternProperty, actionProperty, replyActionProperty },
                    new object[] { true, actionValue, replyActionValue });

            methodBuilder.SetCustomAttribute(attribuiteBuilder);
        }

        /// <summary>
        /// provides a ModelBuilder with the required assembly name
        /// </summary>
        /// <param name="requiredAssemblyName">the assembly name for where the type will be generated in</param>
        /// <returns>a model builder</returns>
        /// <remarks>in this version the model builder is not cached, it could be interesting to generate all the types in the same assembly by caching the model builder</remarks>
        private ModuleBuilder GetModuleBuilder(string requiredAssemblyName)
        {
            if (moduleBuilderCache.ContainsKey(requiredAssemblyName))
            {
                return moduleBuilderCache[requiredAssemblyName];
            }

            AssemblyName assemblyName = new AssemblyName(requiredAssemblyName);
            AssemblyBuilder assemblyBuilder =
                AppDomain.CurrentDomain.DefineDynamicAssembly(
                    assemblyName,
                    AssemblyBuilderAccess.Run);

            ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(assemblyName.Name);

            moduleBuilderCache[requiredAssemblyName] = moduleBuilder;

            return moduleBuilder;
        }
    } 
```

和**TypeExtensions**类

```
public static class TypeExtensions
    {
        /// <summary>
        /// extracts all the methods fromthe given interface type and from all the inherited ones too
        /// </summary>
        /// <param name="type">the type fromwhich extracts all the methods</param>
        /// <returns>list of MemberInfo representing the methods</returns>
        public static IEnumerable<MethodInfo> GetAllInterfaceMethods(this Type type)
        {

            IEnumerable<MethodInfo> methods = type.GetMethods();
            foreach (var subType in type.GetInterfaces())
            {
                methods = methods.Union(GetAllInterfaceMethods(subType));
            }
            return methods;
        }
    } 
```

我能够将同步接口转换为异步接口。

**如何**将[DuplexChannelFactory](http://msdn.microsoft.com/en-us/library/ms576164.aspx)与预定义的反射异步接口一起使用？

```
var myInterface = new TypeGenerator ( ) . GenerateAsyncInterfaceFor<mySynchronousInterface> ( );

var Client = new DuplexChannelFactory<myInterface> ( new InstanceContext ( new myClass ( ) ) , "myConfiguration" ); 
```

我收到以下问题：

> 找不到类型或命名空间名称“myInterface”（您是否缺少 using 指令或程序集引用？）

我正在尝试编写中间层 WCF 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:18:20.957

您使用的语法用于编译时键入，当然您正在创建的类型是在运行时生成的，因此它不起作用。这是可能的。 [如何：使用反射检查和实例化泛型类型](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx "如何：使用反射检查和实例化泛型类型")

这是代码的外观（我假设 myClass 已经用源代码定义，如果不是，它只是另一个 Activator.CreateInstance 调用）

```
Type t = typeof(DuplexChannelFactory<>);
Type typedDuplexChannelFactory = t.MakeGenericType(new Type[]{myInterface});
var Client = Activator.CreateInstance(typedDuplexChannelFactory, new object[]{new InstanceContext ( new myClass ( ) ) , "myConfiguration"}); 
```

# sqlite - 无法将多行插入 SQLite 数据库

> ID：11926700
> 
> 赞同：0
> 
> 时间：2012-08-12T23:38:18.347
> 
> 标签：sqlite, syntax, insert

我正在尝试将 .sql 文件读入 SQLite，但出现语法错误，因为该文件是从 MySQL 转储的，它可以一次添加多个条目，但我使用的是 SQLite v3.7.7，它不能使用 VALUES 命令一次读取多个表项。

我的理解是我要么需要升级 SQLite，要么以某种方式修改文件以一次将一个条目读入表中。请注意，我正在处理数以万计的条目，因此插入 UNION SELECT 命令可能不会很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:30:26.510

您至少需要 SQLite 3.7.11 才能使用您感兴趣的 VALUES 语法。但`mysqldump`有大约 100 个[命令行选项](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)。其中之一`--skip-extended-insert`，可以禁用扩展插入。（因此每行有一个 INSERT 语句。）阅读 mysqldump 文档，并使用更适合您的目标的选项再次运行转储。

或者更好的是，查看[SQLite 转换器工具列表](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)。

# wcf - WCF REST 服务导致 404

> ID：11926702
> 
> 赞同：0
> 
> 时间：2012-08-12T23:38:33.510
> 
> 标签：wcf, rest

我已经阅读了大多数 WCF REST 404 帖子，但没有一个对我有帮助...

我已经成功构建了 WCF REST 服务。但是，现在它正在引起问题。我尝试只创建一个示例 WCF REST 服务，但如果不使用 .SVC，我无法让它工作。

这就是我的代码中的内容

```
 [ServiceContract]
    public interface IService1
    {
        [WebGet(UriTemplate="data")]
        [OperationContract]
        string GetData();
    }

 public class Service1 : IService1
    {
        public string GetData()
        {
            return "1";
        }
    } 
```

这就是我在 web.config 中的内容

```
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="Default" name="RESTService.Service1">
        <endpoint address="http://mydomain:8888/Service1.svc" 
                  binding="webHttpBinding" 
                  contract="RESTService.IService1" 
                  behaviorConfiguration="Web" />
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
      <behavior name="Web">
        <webHttp />
      </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>

</configuration> 
```

当我去的时候`http://mydomain:8888/data`是在 404 响应。任何想法为什么它没有命中 GetData() 函数？如果我删除端点地址，则以下 URL 有效

```
http://mydomain:8888/Service1.svc/data 
```

但是，我希望地址是`http://mydomain:8888/data`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:13:11.693

您可以尝试将您的 Web 配置保留在您正常工作的版本中（在路径中使用 svc），并在应用程序启动期间在全局 asax 文件中添加路由表条目

看看这个了解更多信息

[http://msdn.microsoft.com/en-us/library/cc668177.aspx](http://msdn.microsoft.com/en-us/library/cc668177.aspx)

# php - 如何将数据从 textarea 写入 excel 表？

> ID：11926704
> 
> 赞同：1
> 
> 时间：2012-08-12T23:39:41.873
> 
> 标签：php, excel

我是编码新手，遇到一些基本问题。我搜索了一个主题以找到我需要的答案，但我找不到。我一直在尝试编写和搜索用于写入 xls 文件的代码 3 天，但找不到合适的代码。问题是：

![在此处输入图像描述](../Images/777cc25e2c617d1114195cc30264e75a.png)

我创建了一个带有 textareas 和提交/重置按钮的页面，并且我在文档 classgrades.xls 中有一个 excel 表。该表的列名为 Name、Midterm1、Midterm2、Final、Attendance 和 Average。

现在，我正在尝试编写一个自动添加新行并将用户输入从 textares 写入 excel 表的代码。如果你能帮助我非常感激，如果你简单地编写代码，我可以更好地理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:59:59.553

我用来修改 Excel 文档的类是 PHPExcel。在[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)但我只是用谷歌搜索，它已移至 GitHib [https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)。

小警告：我发现它偶尔会出现错误（例如，在深入研究之前关闭“通知”和“警告”错误 - 或者至少你在我上次使用它时这样做了），但除此之外它很容易使用。

它有一些很好的类来导航工作簿和添加行。这里没有必要引用示例，因为“测试”部分中有很多示例。[https://github.com/PHPOffice/PHPExcel/tree/develop/Tests](https://github.com/PHPOffice/PHPExcel/tree/develop/Tests) 使用这些并拼凑你需要的东西。

# java - 使用默认程序在 Java 中打开文件的问题

> ID：11926705
> 
> 赞同：1
> 
> 时间：2012-08-12T23:39:43.703
> 
> 标签：java

您好我正在尝试使用 java 程序打开 word 文件。该程序给了我以下错误”

```
Cannot make a static reference to the non-static method open(File) from the type Desktop 
```

我不知道如何解决这个问题。你能帮我么。谢谢。下面是代码片段。

```
@Override
public void actionPerformed(ActionEvent e) {
    List<File> files;
    File startingDirectory = new File("C:/Hello/");
    try {
        files = getFileListing(startingDirectory);
        for (File file : files){
            Desktop.open(file);
        }

    } catch (FileNotFoundException ex) {
        System.out.println("File Not Found");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:42:29.593

尝试

```
Desktop.getDesktop().open(file); 
```

反而

您还应该进行检查`Desktop.isDekstopSupported`以确保您尝试执行的功能存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:42:59.857

您需要先实例化一个`Desktop`对象，如下所示：

```
Desktop d = Desktop.getDesktop(); 
```

*之后*，您可以在桌面对象上调用实例方法，如下所示：

```
d.open(file); 
```

在您的代码中，您试图在*class上调用**实例*方法，但这是行不通的。可以在类上调用的唯一方法是*静态*方法，所有其他方法都需要在相应类的实例上调用。`open()` *`Desktop`*

# backbone.js - 在信息栏中显示从侧边栏中选择的模型

> ID：11926707
> 
> 赞同：2
> 
> 时间：2012-08-12T23:40:13.963
> 
> 标签：backbone.js, backbone-events, backbone-views

我正在开发一个右侧有侧边栏的应用程序。显示集合。集合的每个模型都有`select`行为。

在页面的顶部中心，我有一个独立的主干视图，其作用类似于“信息栏”，当我在侧边栏中选择一个视图时，该视图应该更新它的信息

我该怎么做？我认为侧边栏中的每个视图都应该具有带有模型参数的“选定”事件，我的问题是如何在 Backbone.js 的信息栏视图中收听这种变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:03:21.890

这听起来像是事件聚合器模式可以很好地服务的东西。Derick Bailey 就此事发表了一篇非常好的文章，您可以在此处阅读。

[事件聚合器模式](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)

我扩展了我的 Backbone.View 以便所有视图都可以像这样使用事件聚合器对象。

```
Backbone.View.prototype.eventAggregator = _.extend({}, Backbone.Events); 
```

基本上，当您选择模型视图时，您的 view.eventAggregator 将触发一些自定义事件。

```
sidebarView.eventAggregator.trigger('selected', this.model); 
```

或类似的东西。使用 Backbone 事件，您可以通过触发函数将参数传递给事件侦听器。在上面的示例中，我通过特定事件传递了模型。

在您的主视图中，您将监听此事件。

```
mainView.eventAggregator.on('selected', myFunction, this);

myFunction: function(model) {
    // Some code to execute - model is available through param
} 
```

这是一个非常有用的模式。只是不要忘记在关闭 mainView 时取消绑定事件。:-)

# c# - C#：将ini文件的内容存储为字符串或字典而不是文件名？

> ID：11926708
> 
> 赞同：0
> 
> 时间：2012-08-12T23:40:14.777
> 
> 标签：c#, forms, dictionary, ini

有没有办法将文件的内容存储为字符串或字典，而不仅仅是文件路径/名称？

以下是我目前用于从 Windows 窗体获取文件路径的方法。有没有办法适应它或者我应该从头开始？我正在加载只有文本的 .ini 文件。[LINQ](https://stackoverflow.com/questions/2817578/reading-ini-file-in-c-sharp)似乎是一条路线，但我不熟悉它。

```
public void ShowSettingsGui()
{
    System.Windows.Forms.OpenFileDialog ofd = new System.Windows.Forms.OpenFileDialog();
    ofd.Multiselect = false;
    ofd.Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*";
    if (ofd.ShowDialog() == DialogResult.OK)
    {
        string[] filePath = ofd.FileNames;
    }
    m_settings = Path.GetDirectoryName(ofd.FileName);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:02:19.853

LINQ 确实是一个很好的方法：我们只需将路径转换为字典（它们成为键）。这些值是通过调用[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)每个文件路径来确定的。

```
var dialog = new OpenFileDialog() { Multiselect = true, 
    Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*" };
if (dialog.ShowDialog() != DialogResult.OK) return;
var paths = dialog.FileNames;
var fileContents = paths.ToDictionary(filePath => filePath, File.ReadAllText); 
```

为了帮助您了解这里发生了什么，请查看（大致等效的）非 LINQ 版本。在这里，我们显式地迭代 FileName 并将它们作为键添加到我们的字典中，同时再次调用`File.ReadAllText`它们中的每一个。

```
// same as first snippet without the last line
foreach (var filePath in paths)
{
    fileContents.Add(filePath, File.ReadAllText(filePath));
} 
```

在每个片段的最后一行设置一个断点，运行它们并查看字典的内容以确定结果。

编辑：问题不清楚，但似乎您只对单个文件名感兴趣。这意味着您根本不需要 LINQ（`m_settings`需要是 a `string`）。

```
var dialog = new OpenFileDialog{Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*"};
if (dialog.ShowDialog() != DialogResult.OK) return;
m_settings = File.ReadAllText(dialog.FileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:56:04.750

如果您可以添加对您要完成的工作的描述，那将有所帮助。

同样，我会使用设置类来存储/读取设置

这是如何使用它的链接： [编写用户设置](http://msdn.microsoft.com/en-us/library/bb397755.aspx)

我过去使用 xml 来解析设置文件，我发现它比以顺序方式读取 ini 容易得多。

希望能帮助到你

# c++ - Object::connect: 当obj作为shared_ptr返回时没有这样的信号

> ID：11926714
> 
> 赞同：0
> 
> 时间：2012-08-12T23:40:43.630
> 
> 标签：c++, qt4, shared-ptr, qt-signals

使用 Qt 的信号和插槽，我得到错误：

```
Object::connect: No such signal FvOverlayPolygon::mouseHoveredOnElemSig(rf::AbstractFvOverlay*) 
```

我`connect`的其他工作正常，我已经检查了我能想到的所有内容（也提到了[调试 Qt 信号和插槽的 20 种方法](http://samdutton.wordpress.com/2008/10/03/debugging-signals-and-slots-in-qt/)）。因为我个人是第一次使用`shared_ptr`for`Qt`这个示例，我怀疑我的使用方式可能有问题`shared_ptr`。我非常感谢您的意见。

* * *

具体FvOverlay.cpp

```
#include "rf_common/abstractFvOverlay.h"

void FvScene::mousePressEvent(QGraphicsSceneMouseEvent *mouseEvent)
{
  rf::AbstractFvOverlay::Ptr item_overlay;
  item_overlay = this->createOverlay(myItemMenu, &pixmap_overlay); // this inherits Class A

  bool con1 = connect(item_overlay.get(), SIGNAL(mouseHoveredOnElemSig(rf::AbstractFvOverlay*)), this, SLOT(mouseHoveredOnElem(rf::AbstractFvOverlay*)));
  }
} 
```

* * *

此覆盖在此实例化：abstractFvOverlay.cpp

```
boost::shared_ptr<rf::AbstractFvOverlay> FvPolygonScene::createOverlay(QMenu *menu, QPixmap *pixmap_overlay)
{
  return boost::shared_ptr<rf::AbstractFvOverlay>(new FvOverlayPolygon(menu, *pixmap_overlay));
} 
```

* * *

覆盖.h

```
#include <QGraphicsItem>
#include <boost/shared_ptr.hpp>

class AbstractFvOverlay : public QObject, public QGraphicsItem
{
Q_OBJECT

public:
  AbstractFvOverlay(QMenu *contextMenu, QGraphicsItem *parent, QGraphicsScene *scene);
  virtual ~AbstractFvOverlay();
  typedef boost::shared_ptr<AbstractFvOverlay> Ptr;

signals:
  void mouseHoveredOnElemSig(AbstractFvOverlay *i); 
```

为了您的兴趣，我`shared_ptr`在这里使用的原因是我想做基于接口的编程（不确定这是否是调用这种风格的官方方式，但我的意思是定义抽象类中的行为，并且只针对我描述它们的某些行为Java 允许的具体类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:49:17.920

即使您在同一范围内，也必须在信号声明中使用类型的完整范围名称。`void mouseHoveredOnElemSig(AbstractFvOverlay *i);`在连接中没有范围的情况下用AbstractFvOverlay替换信号`void mouseHoveredOnElemSig(rf::AbstractFvOverlay *i);`或使用 AbstractFvOverlay。

# android - OpenGl es 1.0 - 纹理的每个部分是否需要以 2 的幂为单位？

> ID：11926718
> 
> 赞同：0
> 
> 时间：2012-08-12T23:42:49.860
> 
> 标签：android, opengl-es, textures

我知道整个精灵表需要是二次方，但是当我只使用它的一部分时，该部分是否也需要二次方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:21:44.863

不，纹理坐标是从 0 到 1 的浮点数。

纹理坐标例如：

```
 final float texCoords[] = {
            0.0f, 0.0f,
            0.0f, 1.0f,
            1.0f, 1.0f,
            1.0f, 0.0f
    }; 
```

要获得某个位置，请获得“百分比”

前任：

```
quad.SetTexCoordinates( ((float) posX / texture.Width), //X
        ((float) posY / texture.Height),                //Y
        ((float) width / texture.Width),                //Width
        ((float) height / texture.Height));             //Height 
//All are between 0 and 1 as a 'percent' 
```

# php - 在 PHP 代码中出现多个错误

> ID：11926719
> 
> 赞同：-3
> 
> 时间：2012-08-12T23:42:54.603
> 
> 标签：php

我正在尝试使用这个名为[“Php Win2K 文件管理器”](http://www.planet-source-code.com/vb/scripts/showcode.asp?txtCodeId=1045&lngWid=8)的文件管理器 ，但我在下面收到这些错误

> 已弃用：第 166 行的 C:\xampp\htdocs\test\explorer.php 中
> 已弃用调用时传递引用已弃用：C:\xampp\htdocs\ 中已弃用调用时传递引用test\explorer.php on line 214
> Warning: opendir(c:/inetpub/wwwroot/,c:/inetpub/wwwroot/) [function.opendir]: 系统找不到指定的路径。（代码：3）在 C:\xampp\htdocs\test\explorer.php 第 91 行
> 警告：opendir(c:/inetpub/wwwroot/) [function.opendir]: failed to open dir: No such file or directory in C:\xampp\htdocs\test\explorer.php 第 91 行

为什么是这样？是因为我在 Linux 服务器而不是 Win2K 上运行它吗？

[我的页面](http://recksite.org/errors.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:54:52.597

调用时传递引用意味着一个变量正在使用`&`它前面的运算符传递给一个函数。例如 ( `someFunction(&$var);`)。

PHP 5.4 弃用了调用时传递引用，这意味着您不能在函数调用中通过引用传递变量，正确的方法是定义函数，使变量始终通过引用传递。上述调用的函数定义如下所示：

```
function someFunction(&$iAmByReference) {
    $iAmByReference = 42;
} 
```

当你调用它时，你不需要在变量前面加上`&`，调用看起来像：

```
$x = 32;
someFunction($x);
echo $x; // 42 
```

您必须修改代码，以便函数定义将变量声明为引用变量，并`&`从任何函数调用中删除。

您说您在 Linux 上运行，但鉴于 PHP 错误消息，您似乎仍在 Windows 上。PHP 说你的脚本是`C:\xampp\htdocs\test\explorer.php`一个 Windows 路径。

很可能`$_GET['dir']`是不正确的，或者脚本确定路径错误。不知道那里发生了什么，我必须看看你是如何访问脚本的。在第一种情况下，它看起来像是试图打开一个实际上是由逗号分隔的 2 条路径的路径。

# ruby-on-rails - Rails 中的测试数据库/表的名称？

> ID：11926723
> 
> 赞同：0
> 
> 时间：2012-08-12T23:43:52.883
> 
> 标签：ruby-on-rails, activerecord, cucumber

我正在尝试按照 coursera 中的 SAAS 课程学习 Rails。

我跑了

```
rake db:migrate
db:test:prepare 
```

创建一个测试数据库并对其运行一些黄瓜步骤。

我需要一种方法在 test 的相应电影表中插入一些电影。

我可以在 db 文件夹中看到一个 scehma.rb，在模型中，只有类 Movie < ActiveRecord::Base 创建的电影表，但没有为测试 dbs 创建这样的表？

在哪里可以找到 testDB 创建文件，如何在我的数据库中找到所有表名。我什至不知道要运行的数据库名称：

```
 SELECT * FROM dbname.sqlite_master WHERE type='table'; 
```

另外，如果有一些更好/更简单的方法可以做到这一点，请分享您的经验。我希望这些建议是我可以在 5 分钟内尝试的东西，而不是花费调试时间来安装新的 gem 等，尽管您可以将它们作为附加评论提及。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:51:07.707

`config -> database.yml`文件中定义的所有环境（测试、开发、产品）的数据库数据（名称和配置） 。像这样：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

# encryption - 根据文件请求在 2 个服务器之间进行数据加密

> ID：11926724
> 
> 赞同：0
> 
> 时间：2012-08-12T23:43:58.197
> 
> 标签：encryption, ssl, data-transfer

我有一个快速的问题：

我有 2 个网站，1 个有一些文件下载链接。这些文件托管在另一台服务器上。我需要加密两台服务器之间的请求数据。我可以只使用 SSL 证书吗？

还有其他/更好的主意吗？

这些文件是私有文档，所以我不希望服务器 2 或任何其他人能够跟踪服务器之间的文件请求。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:52:01.317

是的，如果您想实现传输级别的安全性，请使用 SSL（或实际上是 TLS）。如果这是您控制的两台服务器，您可以配置自己的自签名证书。如果要确保只有两个服务器可以相互通信，则需要客户端身份验证，其中服务器和客户端都使用证书/私钥对。

大多数时候，诀窍是实施合理的密钥管理程序。设置 Web 服务器以使用证书处理 TLS 应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:59:13.590

SSL 证书可以很好地确保传输是加密的。即使只是一个自签名证书也可以用于此目的（前提是您可以告诉客户您将用来接受自签名证书）

或者，如果它是两台 linux 机器，那么 scp（安全副本）是一个很好的工具，它可以通过 ssh 连接并获取文件。（可能有一个 windows scp 工具，但我不知道）

Rsync 也支持通过 ssh

至于跟踪请求......您无法阻止您的计算机和目标计算机之间的任何设备记录已建立连接的事实，但加密应该阻止任何人获取您发送的实际数据。

# objective-c - 创建一个 NSObject 类的数组

> ID：11926727
> 
> 赞同：-2
> 
> 时间：2012-08-12T23:44:49.390
> 
> 标签：objective-c, ios, cocoa-touch, nsarray

我有一个`NSObject`类，我也在其中发送一个`NSDictionary`对象，然后类对象将所有条目设置`NSDictionary`为它们的本机类型，这些本机类型是类中的变量`NSObject`。

然后我想将这个`NSObject`类传递给它自己的类，`NSMutableArray`但是当这种情况发生时我的应用程序崩溃了。

下面是调用`NSObject`Class 的代码，然后尝试将其设置为`NSMutableArray`.

```
NSArray *filteredArray = parsedDataArrayOfDictionaries; //dictionary entries are currently in nsstring format
SearchResultList *searchResultList = [[SearchResultList alloc]init];
NSMutableArray *testArray = [[NSMutableArray alloc] init];

int myCount = 0;

while (myCount <= [filteredArray count]) {
    //call class and pass current NSDictionary in array[myCount]
    [searchResultList assignSearchData:filteredArray[myCount]];
    searchResultList = (SearchResultList*)[testingDic objectForKey:@"myObject"];
    testArray[myCount] = searchResultList; //create array of nsobjectclassed, this is also where the app fails
    NSLog(@"%@", testArray[myCount]);
} 
```

希望这是有道理的，我在while语句的中间有点迷失了......我知道我需要取回`NSObject`Class然后将它分配给一个数组..但我只是不确定如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:36:38.147

您超出了数组的大小`filteredArray`

```
while (myCount <= [filteredArray count]) { 
```

应该读

```
while (myCount <[filteredArray count]) { 
```

因为数组的计数比最后一个对象的索引高一，因为索引从 0 开始。

老实说，我不确定您要达到的目标，但是您应该考虑使用[快速枚举](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocFastEnumeration.html)而不是 while 语句

```
for (id obj in filteredArray) { 
```

甚至更高级[的基于块的枚举](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

```
NSMutableArray *testArray = [[NSMutableArray alloc] init];
[filteredArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    //...
    [testArray addObject:obj];
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T23:53:42.567

尝试使用`NSMutableArray`addObject。没有 'C' 风格的 [] 运算符`NSMutableArray`。

# iphone - 在突出显示时更改 UIButton 边框颜色

> ID：11926729
> 
> 赞同：26
> 
> 时间：2012-08-12T23:45:00.980
> 
> 标签：iphone, objective-c, ios, uibutton, border-color

我有一个简单的自定义 UIButton，我添加了：

```
button.layer.bordercolor = [[UIColor blueColor]CGColor]; 
```

但是，我想在按钮突出显示时更改 .bordercolor 。我尝试向按钮的 touchDown 动作添加一个动作，将 .bordercolor 更改为红色，但是当用户抬起手指时，它会保持红色而不是返回蓝色。有任何想法吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-13T00:27:12.383

你走在正确的轨道上。检查下面的代码，它对此进行了详细说明，但是您要做的是将选择器链接到按钮上的不同控件事件。一个用于`touchDown`将阴影变为红色，另一个用于`touchUpInside`在您抬起手指时将阴影变回。

此外，我看到您在 Stack Overflow 上提出了几个问题，但尚未将任何问题标记为正确答案。要继续在本网站上获得帮助，您需要开始标记问题的正确答案。

```
[myButton addTarget:self action:@selector(highlightBorder) forControlEvents:UIControlEventTouchDown];
[myButton addTarget:self action:@selector(unhighlightBorder) forControlEvents:UIControlEventTouchUpInside];

- (void)highlightBorder
{
    myButton.layer.borderColor = [[UIColor redColor]CGColor];
}

- (void)unhighlightBorder
{
    myButton.layer.borderColor = [[UIColor blueColor]CGColor];
    //additional code for an action when the button is released can go here.
} 
```

**注意：** [其他选项](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlEvents)包括`UIControlEvents`：

```
enum {
   UIControlEventTouchDown           = 1 <<  0,
   UIControlEventTouchDownRepeat     = 1 <<  1,
   UIControlEventTouchDragInside     = 1 <<  2,
   UIControlEventTouchDragOutside    = 1 <<  3,
   UIControlEventTouchDragEnter      = 1 <<  4,
   UIControlEventTouchDragExit       = 1 <<  5,
   UIControlEventTouchUpInside       = 1 <<  6,
   UIControlEventTouchUpOutside      = 1 <<  7,
   UIControlEventTouchCancel         = 1 <<  8,

   UIControlEventValueChanged        = 1 << 12,

   UIControlEventEditingDidBegin     = 1 << 16,
   UIControlEventEditingChanged      = 1 << 17,
   UIControlEventEditingDidEnd       = 1 << 18,
   UIControlEventEditingDidEndOnExit = 1 << 19,

   UIControlEventAllTouchEvents      = 0x00000FFF,
   UIControlEventAllEditingEvents    = 0x000F0000,
   UIControlEventApplicationReserved = 0x0F000000,
   UIControlEventSystemReserved      = 0xF0000000,
   UIControlEventAllEvents           = 0xFFFFFFFF
}; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-05T16:28:39.263

**SWIFT 2.x**对您的问题的回答：

➜ 只需用“didSet”观察者覆盖突出显示的属性。

```
override var highlighted: Bool {
    didSet {

        switch highlighted {
        case true:
            layer.borderColor = UIColor.lightGrayColor().CGColor
        case false:
            layer.borderColor = UIColor.blackColor().CGColor
        }
    }
} 
```

**斯威夫特 3：**

```
override var isHighlighted: Bool {
    didSet {

        switch isHighlighted {
        case true:
            layer.borderColor = UIColor.lightGray.cgColor
        case false:
            layer.borderColor = UIColor.black.cgColor
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-14T14:04:08.307

您可以覆盖UIButton 子类中的`setHighlighted`和`setSelected`方法。从那里您只需调整边框颜色，如下所示：

```
- (void)setHighlighted:(BOOL)highlighted {

    [super setHighlighted:highlighted];

    [self tweakState:highlighted];
}

- (void)setSelected:(BOOL)selected {

    [super setSelected:selected];

    [self tweakState:selected];
}

- (void)tweakState:(BOOL)state {

    if (state) {
        self.layer.borderColor = [_highlightedBorderColor CGColor];
    }
    else {
        self.layer.borderColor = [_defaultBorderColor CGColor];
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-21T22:07:33.123

**斯威夫特 4**：

```
override var isHighlighted: Bool {
    didSet {
        layer.borderColor = isHighlighted ? UIColor.lightGray.cgColor : UIColor.black.cgColor
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-16T19:51:53.993

独立解决方案：

```
static UIColor *BorderColor()
{
  return [UIColor grayColor];
}

static UIColor *HighlightedBorderColor()
{
  return [UIColor lightGrayColor];
}

@interface BorderedButton : UIButton

@end

@implementation BorderedButton

- (instancetype)initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self) {
    self.layer.borderColor = BorderColor().CGColor;
    self.layer.cornerRadius = 4.0;
    self.layer.borderWidth = 1.0;
  }
  return self;
}

- (void)setHighlighted:(BOOL)highlighted
{
  [super setHighlighted:highlighted];
  self.layer.borderColor = (highlighted) ? HighlightedBorderColor().CGColor : BorderColor().CGColor;
}

@end 
```

感谢@josip-b！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-05T11:24:42.387

对于不涉及子类化的解决方案，您始终可以向 UIButton 添加扩展方法。例如

```
func setBackgroundColor(_ backgroundColor: UIColor,
                        borderColor: UIColor,
                        borderWidth: CGFloat,
                        cornerRadius: CGFloat,
                        forState state: UIControlState) {

    UIGraphicsBeginImageContext(bounds.size)
    guard let context = UIGraphicsGetCurrentContext() else { return }

    if borderWidth > 0 {
        layer.borderWidth = 0 // hide the layer's border if we're going to draw a border
    }

    context.addPath(UIBezierPath(roundedRect: bounds.insetBy(dx: borderWidth, dy: borderWidth), cornerRadius: cornerRadius).cgPath)
    context.setStrokeColor(borderColor.cgColor)
    context.setFillColor(backgroundColor.cgColor)
    context.setLineWidth(borderWidth)

    context.closePath()
    context.strokePath()
    context.fillPath()

    let buttonImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    setBackgroundImage(buttonImage, for: state)
} 
```

# jquery - JSON返回语法错误？（IMGUR API）

> ID：11926730
> 
> 赞同：0
> 
> 时间：2012-08-12T23:45:13.443
> 
> 标签：jquery, ajax, json, jsonp, imgur

**ETA：这里是 JSFiddle，检查你的控制台：http: [//jsfiddle.net/GZNwK/1/](http://jsfiddle.net/GZNwK/1/)**

所以我只是想从 IMGUR API 加载一个 subreddit：

```
$.getJSON('http://imgur.com/r/cats.json?callback=?',function(data){
    console.log(data)
}) 
```

但我最终得到了这个错误：

![在此处输入图像描述](../Images/81bea477d3b9f055ffa2d8b1c7ac1d85.png)

不完全确定这是为什么。我可以加载 .jsom 格式的 Flickr API 和 Instagram API，语法*似乎*完全相同。为什么 IMGUR API 给我一个错误？另外，如果我删除 ?callback=? 那么它不使用 JSONP 并且跨域请求失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:46:53.343

因为这不是支持 JSONP 请求的资源。我不太了解 IMGUR，但看起来他们确实有一个您可以使用的 API：http: [//api.imgur.com/](http://api.imgur.com/)

另一种解决方案是使用[YQL](http://developer.yahoo.com/yql/)：

```
$.ajax({
    url: 'http://query.yahooapis.com/v1/public/yql',
    data: {
        q: 'select * from json where url="http://imgur.com/r/cats.json"',
        format: 'json'
    },
    type: 'get',
    dataType: 'jsonp'
}).success(function (data) {
    /* results are in data.query.results.json.gallery */
    alert(data.query.results.json.gallery[0].title);
}); 
```

**示例：http:** [//jsfiddle.net/sNSEA/](http://jsfiddle.net/sNSEA/)

尽管我强烈建议尽可能通过 API 以“正确”的方式执行此操作（快速浏览并没有产生任何结果）。

# xcode - 选择推送通知横幅时调用的方法

> ID：11926736
> 
> 赞同：4
> 
> 时间：2012-08-12T23:46:25.037
> 
> 标签：xcode, ios5, apple-push-notifications

我有一个要发送给用户的推送通知，我希望能够在他们点击它时采取行动。我知道如果应用程序处于前台、后台，或者如果用户点击通知中心的警报，则在应用程序委托中调用以下方法：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

但是，如果应用程序没有启动并且用户在通知到达后立即点击通知横幅，则该方法似乎不会被调用。在这种情况下，我需要采用不同的方法吗？他们的其他情况是否也应该实施其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:09:32.773

如果单击通知横幅时您的应用程序未启动，那么您将在`application:didFinishLaunchingWithOptions:`.

然后你可以做这样的事情：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  NSDictionary *pushDict = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
  if(pushDict)
  {
    [self application:application didReceiveRemoteNotification:pushDict];
  }
} 
```

此外，在您的`application:didReceiveRemoteNtification:`方法中，您可以测试您的应用程序在收到通知时是否处于非活动状态，如下所示：

```
-(void)application:(UIApplication *)app didReceiveRemoteNotification:(NSDictionary *)userInfo
{
  if([app applicationState] == UIApplicationStateInactive)
  {
    NSLog(@"Received notifications while inactive.");
  }
  else
  {
    NSLog(@"Received notifications while active.");
  } 
```

# c++ - 如何设置和使用openGL？

> ID：11926743
> 
> 赞同：-1
> 
> 时间：2012-08-12T23:47:32.047
> 
> 标签：c++, opengl

我使用 mingW 编译 c++ 代码。我想使用openGL制作图形。我使用记事本++编写代码。那么如何使用openGL的库呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:44:25.413

在 MinGW 中，您不必设置 OpenGL。C:\~\MinGW\include\GL 目录中已经有 OpenGL 库。只需包含 GL/gl.h 和 GL/glu.h 并为您的 OpenGL 项目编写代码。但如果您正在寻找 GLUT、GLFW、 glew 或其他库，然后使用 IDE 是更好的解决方案，例如 code::blocks 或 Visual Studio，然后谷歌为您的 IDE 设置这些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:04:14.700

一旦你编译了你的 OpenGL 项目并且可能想知道下一步该做什么，NeHe 有一系列很棒的 OpenGL 教程： http: [//nehe.gamedev.net/](http://nehe.gamedev.net/)

从内存来看，它们都与立即模式（v3.0 之前）有关，但这是一个很好的起点——尤其是如果您出于许可原因不想使用 GLUT 等其他库时。

这里还有一个很好的教程列表：

[http://www.opengl.org/wiki/Getting_Started#Tutorials_and_How_To_Guides](http://www.opengl.org/wiki/Getting_Started#Tutorials_and_How_To_Guides)

顺便说一句，您可以免费下载 Visual C++ 的 Express 版本。以防万一您只是因为成本而避免使用 Microsoft 编译器：http: [//www.microsoft.com/visualstudio/en-us/products/2010-editions/express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)

它只是专业版的缩减版。基本上它没有 OpenMP、MFC 或 ATL，一些更高级的调试工具，也不会编译 64 位应用程序。但除此之外它很棒。我唯一会因为没有 64 位和 OpenMP 而感到不安。但它是免费的！功能比较在这里：http: [//msdn.microsoft.com/en-us/library/hs24szh9.aspx](http://msdn.microsoft.com/en-us/library/hs24szh9.aspx)

# android - android如何显示和删除alertdialog

> ID：11926748
> 
> 赞同：0
> 
> 时间：2012-08-12T23:48:40.410
> 
> 标签：android, email, android-alertdialog

在我的 android 中，我想显示一个无法退出的消息框，并且在显示时，需要运行另一个进程（在我的情况下是电子邮件发送功能）。然后在电子邮件发送完毕后，警报框需要关闭。

这是我到目前为止得到的，但它不起作用......

任何人都可以帮忙吗？

```
 AlertDialog.Builder alertDialog = new Builder(this); // create an alert box
    alertDialog.setTitle("Sending...");
    alertDialog.setMessage("Please wait while your details and image is being sent to x.");

    alertDialog.show(); // show the alert box
    Reusable_CodeActivity.send_email(gmailAC, gmpassword, get_all_details(), image_path, this);

    alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { // define the 'OK' button
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        } 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:08:28.280

这是您可能使用的[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的简单结构：

```
private class SendEmailTask extends AsyncTask<Void, Void, Void> {     
   protected void onPreExecute() {
      //Show the dialog first
   }
   protected void doInBackground(Void... params) {
      //Send Email Code
   }

   protected void onPostExecute(Void result) {
      //Dismiss the dialog 
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T00:17:18.607

我不确定电子邮件发送部分，但我可以帮助您制作您想要的消息框。

如果您删除以下代码：

```
alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { // define the 'OK' button
    public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
    } 
}); 
```

然后对话框将显示没有按钮，如果你添加`.setCancelable(false)`它不会被关闭，直到你告诉它，使用`alertDialog.cancel();`

这是一个示例（根据我的一个对话框修改）：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); // Create the dialog object
        builder.setMessage(R.string.dialog_disclaimer_text)  // I use a reference to a string resource - it's good practice instead of using hardcoded text
               .setIcon(android.R.drawable.ic_dialog_info)   // Here I specify an icon to be displayed in the top corner
               .setTitle(R.string.dialog_disclaimer_title)
               .setCancelable(false) // This one makes the dialog stay until the dismiss is called

               .create().show(); // Show the dialog 
```

此代码将显示一个带有文本的对话框，该对话框在活动调用之前不会消失`builder.dismiss();`- 然后您必须在某种侦听器中实现该对话框，或者在发送完成后进行回调。

# 更新

查看其他答案，这可能是您的代码应该是什么样子（感谢 iturki）

```
private class SendEmailTask extends AsyncTask<Void, Void, Void> {  
    AlertDialog.Builder alertDialog; // Define the AlertDialog builder object so it can be used/adressed across the entire class

    protected void onPreExecute() {
       //Show the dialog first
       alertDialog = new Builder(context);
       alertDialog.setTitle("Sending...")
                  .setMessage("Please wait while your details and image is being sent to x.");
                  .setCancelable(false)
                  .show();
    }
    protected void doInBackground(Void... params) {
       //Send Email Code
       Reusable_CodeActivity.send_email(gmailAC, gmpassword, get_all_details(), image_path, this);
    }

    protected void onPostExecute(Void result) {
       //Dismiss the dialog 
       alertDialog.dismiss();
    }
} 
```

# .net - 检索新插入的项目时的虚拟属性 null

> ID：11926750
> 
> 赞同：2
> 
> 时间：2012-08-12T23:48:47.983
> 
> 标签：.net, entity-framework, entity

我正在为 DI 使用 EF4.x、Code First 和 Castle Windsor。我的问题：某些虚拟属性在检索新插入的实体时返回 null。我是新手，所以请原谅我对一切如何运作的无知。一个非常简单的例子是这样的：

```
public class Address
{
    public int AddressID { get; set; }
    public string Street { get; set; }
    public int ProvinceID { get; set; }
    public virtual Province { get; set; }
    etc....
}

public class Province
{
    public int ProvinceID { get; set; }
    public string Name { get; set; }
    public string Abbreviation { get; set; }
    public int DisplayOrder { get; set; }
    etc...
} 
```

所以在 SaveChanges() 之后，我可以看到在 db 中正确创建的记录，但是在加载地址实体的后续页面请求中，ProvinceID 设置正确，但虚拟省为空。重建后，没有任何问题。我究竟做错了什么？TIA

更多信息：

我在存储库和工作单元模式中使用 DbContext。我有一个包含所有常见 CRUD 方法的抽象 EF RepositoryBase 类。以下是常见 GET 方法的示例：

```
 public T Get(params object[] keyValues)
  {
     return _dbSet.Find(keyValues);
  }

  public IQueryable<T> Get(Func<T, bool> filter)
  {
     return _dbSet.Where(filter).AsQueryable();
  }

  public IQueryable<T> GetAll()
  {
     return _dbSet.AsQueryable();
  } 
```

_dbSet 设置如下：

```
_dbSet = ((DbContext)_context).Set<T>(); // _context is of IDbContext 
```

也许这里的某些东西导致了奇怪的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:08:19.627

因此，在导航属性加载、延迟加载和显式加载方面，EF 实际上有 2 个选项。根据我的经验，显式加载要好得多，因为它更难导致主要的性能问题。

我写了一篇关于导航属性的文章，你可以[在这里](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)阅读。

要使用显式导航属性加载，您可以使用 .Include 语句来指定要在每个查询中加载的属性。

当您使用延迟加载时，我相信您需要在上下文中虚拟装饰**所有**导航属性，并且当您在属性上调用 get 时会查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T04:11:08.077

我使用下一个解决方法：分离实体并再次加载

```
public T Reload<T>(T entity) where T : class, IEntityId
{
    ((IObjectContextAdapter)_dbContext).ObjectContext.Detach(entity);
    return _dbContext.Set<T>().FirstOrDefault(x => x.Id == entity.Id);
} 
```

# android - RSS在android中加载时间太长

> ID：11926751
> 
> 赞同：0
> 
> 时间：2012-08-12T23:49:01.820
> 
> 标签：android, xml, rss, xml-parsing

我正在使用 AsyncTask 从 RSS 提要和 DOM 解析器和 ArrayAdapter 获取数据。

我注意到 RSS 提要在屏幕上加载和显示数据需要很长时间，起初我认为是因为文章数量很大，但是当我将 for 循环限制为仅阅读 3 篇文章时，显示文章仍然需要很长时间！！

下面是我用来解析数据和主要活动的完整代码

主要活动代码：

```
public class NewsMainActivity extends Activity implements OnItemClickListener {
    /** Called when the activity is first created. */

    ListView listview;
    List<NewsBean> arrayList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.main);

        initComponents();

        if (Utils.isNetworkAvailable(this)) {
            new MyRssReadTask()
                    .execute("feed_URL");

        } else {
            Toast.makeText(this, "Please check your internet connection", Toast.LENGTH_SHORT)
                    .show();
        }

    }

    private void initComponents() {
        listview = (ListView) findViewById(android.R.id.list);
        listview.setOnItemClickListener(this);

    }

    class MyRssReadTask extends AsyncTask<String, Void, Void> {
        ProgressDialog waitingDialog;

        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(NewsMainActivity.this);
            waitingDialog.setMessage("Loading articles, Please wait...");
            waitingDialog.show();
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(String... urls) {

            arrayList = new NewsParser().getData(urls[0]);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            waitingDialog.dismiss();
            setDataToListView();
            super.onPostExecute(result);
        }
    }

    protected void setDataToListView() {
        if (null != arrayList && arrayList.size() != 0) {
            NewsRowAdapter objNewsRowAdapter = new NewsRowAdapter(
                    NewsMainActivity.this, R.layout.row, arrayList);

            listview.setAdapter(objNewsRowAdapter);
        } else {
            showToast("There was an error to get data, please try again later.");
        }

    }

    void showToast(String msg) {
        Toast.makeText(NewsMainActivity.this, msg, Toast.LENGTH_SHORT).show();
    }

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        final NewsBean objBean = (NewsBean) arrayList.get(position);
        Intent intent = new Intent(NewsMainActivity.this,
                NewsDetail.class);

        intent.putExtra("title", objBean.getTitle());
        intent.putExtra("description", objBean.getDescription());
        //intent.putExtra("pubdate", objBean.getPubDate());
        //intent.putExtra("creator", objBean.getCreator());
        intent.putExtra("link", objBean.getLink());

        startActivity(intent);
    } 
```

新闻解析器

```
public class NewsParser {

    private List<NewsBean> arrayListPasre;

    public List<NewsBean> getData(String _url) {
        try {

            arrayListPasre = new ArrayList<NewsBean>();
            URL url = new URL(_url);
            URLConnection con = url.openConnection();

            System.out.println("Connection is : " + con);

            System.out.println("Connection InputStream is : "
                    + con.getInputStream());

            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    con.getInputStream()));
            System.out.println("Reader us now : " + reader);

            String inputLine;
            String fullStr = "";
            while ((inputLine = reader.readLine()) != null)
                fullStr = fullStr.concat(inputLine + "\n");

            InputStream istream = url.openStream();

            DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                    .newDocumentBuilder();

            System.out.println("Builder : " + builder);

            Document doc = builder.parse(istream);

            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("item");

            System.out.println("nlist " + nList);

            for (int temp = 0; temp < 3; temp++) {

                Node nNode = nList.item(temp);
                if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                    Element eElement = (Element) nNode;

                    NewsBean objBean = new NewsBean();

                    objBean.setTitle(getTagValue("title", eElement));
                    objBean.setDescription(getTagValue("description", eElement));
                    objBean.setLink(getTagValue("link", eElement));
                    arrayListPasre.add(objBean);
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return arrayListPasre;
    }

    private String getTagValue(String sTag, Element eElement) {
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0)
                .getChildNodes();

        Node nValue = (Node) nlList.item(0);

        return nValue.getNodeValue();

    }
} 
```

任何建议我将不胜感激！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:03:12.933

您无需一次解析整个 rss。您可以部分执行此操作。例如，解析文档并获取 rss 项目计数，然后只为 3 或 5 或 10 个项目调用异步任务。在 onPostExecute() 中将结果添加到您的适配器并调用 notifydatasetchanged()。

# javascript - 没有明显错误时的 Facebook appMobi 调试

> ID：11926752
> 
> 赞同：2
> 
> 时间：2012-08-12T23:49:04.020
> 
> 标签：javascript, jquery, html, facebook-graph-api, appmobi

我正在 appMobi 中开发一个项目，并且该项目最近到达了与 facebook 相关的部分。然而，似乎有太多的移动部件，几乎不可能知道发生了什么在哪里以及如何发生......更重要的是，当一切都在模拟器中运行但在没有控制台、没有错误日志的设备上运行时，没有什么可以尝试解决问题的。

下图是我在设备上遇到的唯一错误。尝试通过 appMobi 特定方法与 facebook 通信时。我已经复制并粘贴了代码试图使这项工作，因为我知道一旦我可以看到这个工作以及它是如何工作的，我就可以开始围绕我真正想做的事情构建逻辑。那是目前的一个静音点。无论如何，当我在模拟器中运行相同的代码时，它的工作原理完全符合预期。但是在设备本身的 Test Anywhere 中运行它似乎是引发冲突的地方。

Soo 我想知道，有没有人在堆栈之前遇到过这个问题？如果是这样，你做了什么来修复它？解决方法是什么？你如何调试它并得出结论的方法是什么，因为我确信我会遇到类似的问题，并且在设备上进行调试也是一个奖励。

![在此处输入图像描述](../Images/a033452f80155c3caa3597cfaba8bf80.png)

我的 javascript 目前：

```
document.addEventListener("appMobi.facebook.login",function(e){
        if (e.success == true) 
        { console.log("Facebook Log in Successful"); } 
        else 
        { console.log("Unsuccessful Login"); }
},false); 

function fbLoginCheckz()
{
 try{
      AppMobi.facebook.login('user_birthday,user_about_me,user_status,offline_access,publish_stream,publish_actions,email,read_friendlists,publish_checkins,create_event');
   }catch(e){
      alert("Error Caught [FB 1]: "+e.message);
   }
}

document.addEventListener("appMobi.facebook.logout",function(e){
        if (e.success == true) 
        { console.log("Logged out of Facebook"); } 
        else 
        { console.log("Unsuccessful Logout"); }
},false); 

var facebookUserID = "me";  //me = the user currently logged into Facebook 
document.addEventListener("appMobi.facebook.request.response",function(e) { 
    console.log("Facebook User Friends Data Returned"); 
    if (e.success == true) { 
        var data = e.data.data; 
        var outHTML = ""; 
        for (var r=0; r< data.length; r++) { 
            outHTML += "<img src='http://graph.facebook.com/" + data[r]["id"] 
            + "/picture' info='" + data[r]["name"] + "' />";        
        } 
    $("#blah").empty().html(outHTML); 
    document.removeEventListener("appMobi.facebook.request.response"); 
 }  
},false); 
```

我的html：

```
 <br><br>
    <div id="blah"></div>
    <a href="#" onclick="window.location.reload();">RELOAD</a><br>
    <a href="#" onclick="fbLoginCheckz();">LOGIN</a><br>
    <a href="#" onclick="AppMobi.facebook.logout();">LOGOUT</a><br>
    <a href="#" onclick="AppMobi.facebook.requestWithGraphAPI(facebookUserID + '/friends','GET',null);">FRIENDS</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:37:22.570

构建系统和测试容器存在问题。如果您构建软件的 adHoc 版本，它应该可以工作。但是，我所有的“随处测试”帮助应用程序也暂时仍然存在错误。

应该很快就会对测试容器进行更新，以解决该问题。一旦更新，我会尝试在这里发回。

# asp.net-mvc - 如何正确使用视图模型

> ID：11926762
> 
> 赞同：3
> 
> 时间：2012-08-12T23:52:22.400
> 
> 标签：asp.net-mvc, viewmodel

我是 ASP.net MVC 的新手。我正在尝试创建一个视图模型来显示数据的连接。这是一些示例代码：

```
 public class Person
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }

    public ICollection<Relative> Relatives { get; set; }

}

public class Relative
{
    [Key]
    public int ID {get; set; }
    public Person Person { get; set; }
    public RelationType RelationType { get; set; }
}

public class RelationType
{
    [Key]
    public int ID { get; set; }
    public string Description { get; set; }
}

public class PersonViewModel
{
    public string Name { get; set; }
    public ICollection<string> RelativeNames { get; set; }
    public ICollection<string> RelativeTypes { get; set; }
}

public class PersonContext : DbContext
{
    public DbSet<PersonViewModel> people { get; set; }
} 
```

当我尝试通过 Visual Studio 创建控制器时，出现以下错误：

无法检索 PersonViewModel 的元数据。在生成过程中检测到一个或多个验证错误：EntityType 'PersonViewModel' 没有定义键。定义此 EntityType 的键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:01:34.193

该错误是不言自明的。您需要向 PersonViewModel 添加一个 Id 字段，该字段必须用 [Key] 进行装饰，正如您在上面的类中所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:02:19.313

视图模型是用于在控制器和视图之间传递数据的便捷类。您收到此异常的原因是因为您将 PersonViewModel 类传递到您的 dbSet。除非 PersonViewModel 类有相应的表，否则您不能这样做。在这种情况下，PersonViewModel 不应该是一个视图模型，而应该是一个实体，一个模型类来代表你的表。

通过查看您的代码，我猜您的数据库中有 Person 和 Relative 表，因此您应该执行以下操作

```
public class PersonContext : DbContext
{
    public DbSet<Person> Person { get; set; }
    public DbSet<Relative> Relative { get; set; }

} 
```

并通过 DbContext 类的 Person 和 Relative 属性填充 PersonViewModel。这可以在控制器内部完成，如果有的话，可以在存储库类中完成。

# ruby-on-rails-3 - RoR：如何在我的 live heroku 应用程序上向我的数据库中添加列？

> ID：11926765
> 
> 赞同：0
> 
> 时间：2012-08-12T23:53:06.660
> 
> 标签：ruby-on-rails-3, heroku

我正在尝试将 :price、:location 和 :product 添加到我的 microposts 表的列中。我已经完成了许多其他迁移，并且听说回滚所有迁移并重做它们很容易出错。所以我猜另一个选择是模式文件？我听说架构文件只是用来读取而不是编辑。我一直在查看[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)但找不到正确的信息。他们简要讨论了我认为可能有用的 change_table ，但没​​有深入探讨。这就是我要找的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:51:32.320

只需创建一个新的独立迁移：

```
rails g migration add_price_location_and_product_to_microposts 
```

它将在`db/migrate`文件夹中创建一个文件，编辑它：

```
def change
    add_column :microposts, :price, :float # dont forget to change the type to the columns
    add_column :microposts, :location, :string
    add_column :microposts, :product, :integer
end 
```

（您可以定义`change`方法，而不是，`up`因为`down`是`add_column`可逆命令。）

然后，运行`rake db:migrate`

# mongodb - MongoDB：按值和运算符搜索数组

> ID：11926767
> 
> 赞同：1
> 
> 时间：2012-08-12T23:53:52.957
> 
> 标签：mongodb

假设我有这样的文件：

```
{
  tags: ['a', 'b']
} 
```

我想找到所有只有标签的文档`a`。我目前的查询条件是：

```
{
  tags: {
    $size: 1,
    $in: ['a']
  }
} 
```

有没有办法使用`equal`运算符进行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:23:05.180

尽管对数组字段的查询会隐式检查数组值，但您也可以匹配整个数组。`tags`考虑以下示例，该示例在字段中混合了字符串和字符串数组：

```
> db.foo.find()
{ "_id" : ObjectId("502943541f5b0d2bca9663a8"), "tags" : [ "a" ] }
{ "_id" : ObjectId("502943581f5b0d2bca9663a9"), "tags" : [ "a", "b" ] }
{ "_id" : ObjectId("5029435e1f5b0d2bca9663aa"), "tags" : [ [ "a" ] ] }
{ "_id" : ObjectId("502943641f5b0d2bca9663ab"), "tags" : [ [ "a" ], "b" ] }
{ "_id" : ObjectId("5029436c1f5b0d2bca9663ac"), "tags" : [ [ "a" ], [ "b" ] ] }
{ "_id" : ObjectId("502943a31f5b0d2bca9663ad"), "tags" : [ "a", [ "b" ] ] } 
```

查询`"a"`in将匹配任何单独或部分`tags`包含的数组：`"a"`

```
> db.foo.find({tags: "a"})
{ "_id" : ObjectId("502943541f5b0d2bca9663a8"), "tags" : [ "a" ] }
{ "_id" : ObjectId("502943581f5b0d2bca9663a9"), "tags" : [ "a", "b" ] }
{ "_id" : ObjectId("502943a31f5b0d2bca9663ad"), "tags" : [ "a", [ "b" ] ] } 
```

虽然没有显示，但如果我们有一个`tags`简单的字段`"a"`（不是数组，而是字符串值），它肯定也会被匹配。

查询`["a"]`in`tags`将匹配仅包含`"a"`在其`tags`字段中的文档以及`tags`包含该值的任何数组`["a"]`（即嵌套数组）：

```
> db.foo.find({tags: ["a"]})
{ "_id" : ObjectId("502943541f5b0d2bca9663a8"), "tags" : [ "a" ] }
{ "_id" : ObjectId("5029435e1f5b0d2bca9663aa"), "tags" : [ [ "a" ] ] }
{ "_id" : ObjectId("502943641f5b0d2bca9663ab"), "tags" : [ [ "a" ], "b" ] }
{ "_id" : ObjectId("5029436c1f5b0d2bca9663ac"), "tags" : [ [ "a" ], [ "b" ] ] } 
```

如果您可以安全地假设您的架构只会将字符串存储在其`tags`数组中，则此查询可能比将数组大小存储在单独的字段中并将其添加到您的查询条件中更可取（这也是一个可行的解决方案，如 Matt 所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T23:59:53.457

将数组的大小保存`tags`为单独的属性，并在修改`tags`数组时更新它：

```
// Document
{
  tags : ['a'],
  tags_size : 1
}

// Criteria
{ tags_size : 1, tags : 'a' } 
```

请注意，`$size`操作员无法使用索引。

# batch-file - 使用批处理计算文件夹中特定文件的数量

> ID：11926768
> 
> 赞同：2
> 
> 时间：2012-08-12T23:54:04.007
> 
> 标签：batch-file

我在一个文件夹中有一堆文件，它们的名称类似于 a1.txt、a6.txt、a8.txt、.. 我需要对它们进行计数对于所有数字并且不返回正确答案。

```
set /a count=0
for /F "tokens=* delims= " %%i in ('dir/s/b/a-d "C:\Users\xyz\desktop\Project\a.*"') do (set /a count=count+1) 
```

你能看到我做错了什么吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:43:07.703

您做错的是所有以 a 开头的文件的通配符。

您正在使用`dir a.*`并期望它找到类似的文件`a6.txt`

另外，要处理带空格的文件名，我建议您删除分隔符。

```
set /a count=0
for /F "delims=" %%i in ('dir/s/b/a-d "C:\Users\xyz\desktop\Project\a*"') do (set /a count=count+1) 
```

（在使您的代码更高效方面，还要听取其他答案。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-20T02:00:29.097

你可以在一行中做到这一点

```
dir /a-d "C:\Users\xyz\desktop\Project\a.*" | find /C "/" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T00:25:42.570

面对一个类似的问题，我更喜欢使用我从 Raymond Chen 那里学到的一个技巧，[用来`find`替代`wc -l`](http://blogs.msdn.com/b/oldnewthing/archive/2011/08/25/10200026.aspx).

因此，以下脚本将批处理变量设置为`count`匹配的文件数`patttern`。与您的原始脚本一样，目录不包括在内。

```
@echo off

setlocal

set count=0
set pattern=a?.txt

use dir /b %pattern% ^| find /c /v ""

for /f %%i in ('dir /b /a-d %pattern_you_are_looking_for% ^| find /c /v ""') do @call set count=%%i

echo %count%

endlocal 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T00:44:56.253

你有你的星号在错误的地方。我想你是故意`a*.txt`的。但这将匹配名称以“a”开头的任何文本文件。它不会将结果限制为以“a”开头、后跟数字的文本文件。

您可以将 DIR 命令的结果通过管道传输到 FINDSTR，并使用正则表达式更具体。FINDSTR 正则表达式支持是原始的，但它通常可以完成工作。

我将假设您想要匹配“a1.txt”、“a143.txt”等名称，但您不想匹配“a1b.txt”或“aba1.txt”等文件。如果我弄错了，那么您需要更改正则表达式以满足您的要求。

此正则表达式`\\a[0-9][0-9]*\.txt$`的工作方式如下：

*   `\\`是转义的反斜杠，匹配文件名前的最后一个反斜杠
*   `a`当然匹配自己
*   `[0-9]`匹配单个数字（必须至少有 1 个）
*   `[0-9]*`匹配 0 个或多个附加数字
*   `\.txt$`转义点并匹配“.txt”扩展名。$ 匹配字符串的结尾 - 如果后面有其他字符，它将不匹配。

最后要做的是将 FINDSTR 的结果通过管道传递给 FIND，让它为您计算文件数。`FIND /C /V ""`匹配任何行并且 /C 选项给出匹配行的计数。它比增加循环中的计数器更有效。

```
@echo off
setlocal
set /a count=0
for /F %%N in ('dir/s/b/a-d "C:\Users\xyz\desktop\Project\a*.txt"^|findstr /ric:"\\a[0-9][0-9]*\.txt$"^|find /c /v ""') do set count=%%N
echo count=%count% 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T15:41:13.077

这是一种偷偷摸摸的计算方法：

```
for /f "tokens=1 usebackq" %a in (`dir a* ^| find ^"File^(s^)^"`) do set count=%a 
```

这可以从命令行完成 - 将批处理文件更改为 double %

有很多转义（使用`^`）来阻止以下字符被解释为批处理文件的一部分，而不是传递给命令行

正在执行的命令是`dir a* | find "File(s)"`, 但是`|`, `(`,`)`并且`"`往往有特殊的含义

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-19T11:23:51.933

```
@SetLocal enabledelayedexpansion
@for /F "tokens=1" %%a IN ('Dir "..\*.txt" /-C/S/A:-D') Do @Set number_of_files=!n2! & Set n2=%%a
@echo %number_of_files% 
```

# java - 私有变量和继承的构造函数

> ID：11926769
> 
> 赞同：2
> 
> 时间：2012-08-12T23:54:05.083
> 
> 标签：java, inheritance, constructor, private, super

我是 Java 新手，所以我可能在这里遗漏了一些东西——我在其他线程中环顾四周，但没有发现任何与我的问题非常相似的东西。我知道子类不会继承私有变量。我遇到的问题，为什么 super(); 在我的子构造函数中识别我的基本构造函数中的字段？父类中的构造函数是公共的吗？即使它传递的变量是私有的，子构造函数也会识别它们并传递它们吗？任何澄清将不胜感激。

父类：

```
public abstract class BaseQuestion {

private String questions;
private float totalAttempts;
private float averageTime;
private float percentCorrect;

public BaseQuestion(String questions, float totalAttempts, float averageTime, float percentCorrect){
    this.questions = questions;
    this.totalAttempts = totalAttempts;
    this.averageTime = averageTime;
    this.percentCorrect = percentCorrect;
} 
```

子班：

```
public class TrueFalseQuestion extends BaseQuestion{
public static int questionsCreated;

public TrueFalseQuestion(String question, float totalAttempts, float averageTime, float percentCorrect){
    super(question, totalAttempts, averageTime, percentCorrect);

} 
```

编译器没有给我上面的错误，这让我有点困惑......

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:57:13.890

子类中的构造函数没有“识别”超类中的字段，它接收到的一些参数恰好与超类中的属性名称相同，但它们在原理上有所不同。它们被分配给超类的字段，因为您正在调用`super()`以访问超类的构造函数，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T23:57:04.757

```
super(question, totalAttempts, averageTime, percentCorrect); 
```

在这行代码中，所有变量名都引用了子类中的参数。它们的值被传递给基类构造函数，然后将它们分配给私有变量。混淆可能是因为参数和私有变量具有相同的名称。但是，您必须小心您指的是哪些。这是构造函数的常见做法。

# android - 从外部对话框接收点击事件

> ID：11926771
> 
> 赞同：0
> 
> 时间：2012-08-12T23:54:28.337
> 
> 标签：android

我想显示一个对话框，并且仍然能够接收来自主活动对话框外部的按钮单击事件，我该怎么做？

换句话说，如果有人单击对话框外的按钮并且该按钮位于主活动屏幕上，那么我想接收此事件。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:25:41.837

这不是 Dialogs 的内置功能，但是 PopUpWindow 确实能够接收窗口外的触摸。您可以使用 PopUpWindow 的[setOutsideTouchable()](http://developer.android.com/reference/android/widget/PopupWindow.html#setOutsideTouchable%28boolean%29)和[setTouchIntercepter()](http://developer.android.com/reference/android/widget/PopupWindow.html#setTouchInterceptor%28android.view.View.OnTouchListener%29)来实现您想要的。

# google-earth-plugin - 如何使用 javascript 重置谷歌地球插件？

> ID：11926785
> 
> 赞同：0
> 
> 时间：2012-08-12T23:57:45.810
> 
> 标签：google-earth-plugin

有时 ge 插件不会通过 fetchKml 函数加载 kml。发生这种情况时，我必须终止 ge 插件进程，然后它才能正常工作。

有没有办法在浏览器中做到这一点？setTimeout 将在未加载时捕获，我想重置插件以使其正常工作。

我想要类似 google.earth.reset();

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:23:39.790

没有重置功能，但是 GEPlugin 对象有一个未记录的 kill 方法。

```
// where ge is a reference to the plugin.
ge.kill_(); 
```

也就是说，kml 似乎没有加载可能是有原因的，正如 nuxy 所说，如果您发布您正在使用的实际代码的示例，那么提供帮助会更容易。

**编辑：**

此外，您可以重新加载将重置插件的数据库，而不是使用未记录的方法。类似以下设置的东西应该可以正常工作。

```
var ge = null;
google.earth.createInstance('map3d', initCallback, failureCallback);

var initCallback = function(object) {
  ge = object;
  ge.getWindow().setVisibility(true);
}

var failureCallback = function(error) {
  alert(error):
}

var reset = function() {
  document.getElementById('map3d').innerHTML = '';
  google.earth.createInstance('map3d', initCallback, failureCallback);
} 
```

要使用只需调用重置方法。

重置（）;

# ember.js - ember.js 模板上下文 w/connectOutlet

> ID：11926791
> 
> 赞同：4
> 
> 时间：2012-08-12T23:59:31.917
> 
> 标签：ember.js

当我做

```
var bob = App.MyModel.create().setProperties({ name: "bob marley" });
router.get('applicationController').connectOutlet('my', bob); 
```

的实例`MyModel`成为实例的`content`属性`MyController`。根据我在指南中阅读的内容，控制器实例成为由`MyView`.

这是否意味着我总是必须`content.`在模板中为模型的属性添加前缀？

```
<h1>{{content.name}}</h1> 
```

有什么我遗漏的或者这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:37:27.867

如果`App.MyController`extends `Ember.ObjectController`，那么你应该可以`{{name}}`直接使用。这是因为`Ember.ObjectController`extends [`Ember.ObjectProxy`](http://docs.emberjs.com/#doc=Ember.ObjectProxy)，使得`content`引用变得不必要。

但是，如果您使用的是 ，则必须像您所说的那样`Ember.Controller`为属性添加前缀。`content.`有关更多详细信息，请参阅最近提交的 @trek[控制器文档](https://github.com/emberjs/ember.js/tree/master/packages/ember-runtime/lib/controllers)。

# android - Android：未找到类运行时异常 - 仅发布版本

> ID：11926794
> 
> 赞同：1
> 
> 时间：2012-08-12T23:59:53.497
> 
> 标签：android, android-activity, runtime, release, classnotfoundexception

我们有一个应用程序在 Google Play 上有多个版本并且运行良好。最新更新导致我们的主要活动出现运行时错误“找不到类”。该活动称为“家”。

运行时错误不会发生在调试版本上，仅作为发布版本。

该活动在几次更新后都没有改变，但突然开始在启动时引发这些运行时错误。

干杯，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T21:29:05.187

尝试**对您的项目进行清理**并以这种方式导出**ECLIPSE** ：项目 > android 工具 > 导出为签名的应用程序包。

# android - 使用带有 android NDK 的 vanilla GCC（或 Clang）

> ID：11926797
> 
> 赞同：6
> 
> 时间：2012-08-13T00:00:03.160
> 
> 标签：android, c++, c, build, android-ndk

Android-NDK 提供了自己的编译器来构建本机代码。我当前的 android-NDK 安装附带的版本是`arm-linux-androideabi-g++ (GCC) 4.6.x-google 20120106 (prerelease)`，我猜它是 GCC 4.6 的一个分支。

它与常规（香草）GCC 4.6 有什么区别？它是否为 ARM 平台生成了更好的代码？

我想使用其他编译器来构建适用于 android 的软件，例如 vanilla GCC 4.7 或 Clang，因为它们对 C++11 有更好的支持并实现了一些我正在努力使用的功能（例如模板别名）。

1.  是否可以使用最新的 vanilla GCC 或 Clang 为 Android 构建本机代码？我应该使用哪些参数？

2.  使用与 android-SDK 附带的编译器不同的编译器有什么缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:25:19.753

Android GCC 是为 android 定制的，因为原生 Android 不支持 GCC 中的所有功能。我不认为有可能，您可以在 android ndk google 组中发布相同的内容，您的答案将由 Google Android 开发人员回复。

他们建议我们可以使用交叉编译器来编译 android 代码，而无需使用 android ndk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:02:04.057

提醒一下：谷歌在 Android NDK 的 8c 版中添加了 clang3.1。它现在处于“实验”阶段，但很容易尝试（并且可能会在不久的将来得到更好的支持，希望也有适当的 libc++ 端口）。

# joomla - ajax请求后如何从控制器返回单个值？Joomla 2.5

> ID：11926798
> 
> 赞同：1
> 
> 时间：2012-08-13T00:00:10.300
> 
> 标签：joomla, joomla2.5

我正在从这样的视图中对控制器进行 ajax 调用

```
jQuery.ajax({
              type: "POST",
              url: "index.php?option=com_virtuemart&amp;view=participate&amp;task=participate_request&amp;virtuemart_product_id=2&amp;virtuemart_category_id=5&amp;tmpl=component&amp;Itemid=101",
              data: { name: "John", location: "Boston" }
            }).done(function( msg ) {
              alert( "Data Saved: " + msg );
        }); 
```

在控制器中我有一个这样声明的任务方法

```
public function participate_request(){          
        echo 'test';
        return false;
    } 
```

我得到了这个回应

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="el-gr" lang="el-gr" >
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Joomla! - Open Source Content Management" />
  <title>offer_e_shop_1</title>
  <link rel="stylesheet" href="/offer_e_shop_1/components/com_virtuemart/assets//css/facebox.css" type="text/css" />
  <link rel="stylesheet" href="/offer_e_shop_1/components/com_virtuemart/assets//css/vmsite-ltr.css" type="text/css" />
  <script src="/offer_e_shop_1/components/com_virtuemart/assets/js/jquery.min.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/jquery.noConflict.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/jquery-ui-sliderAccess.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/vmsite.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/facebox.js" type="text/javascript"></script>
  <script src="/offer_e_shop_1/components/com_virtuemart/assets//js/vmprices.js" type="text/javascript"></script>
  <script type="text/javascript">
vmSiteurl = 'http://localhost/offer_e_shop_1/' ;
vmLang = ""
vmCartText = ' was added to your cart.' ;
vmCartError = 'There was an error while updating your cart.' ;
loadingImage = '/offer_e_shop_1/components/com_virtuemart/assets/images/facebox/loading.gif' ;
closeImage = '/offer_e_shop_1/components/com_virtuemart/assets/images/facebox/closelabel.png' ; 
Virtuemart.addtocart_popup = '0' ; 
faceboxHtml = '<div id="facebox" style="display:none;"><div class="popup"><div class="content"></div> <a href="#" class="close"></a></div></div>'  ;

  </script>

 <link rel="stylesheet" href="/offer_e_shop_1/templates/system/css/system.css" type="text/css" />
 <link rel="stylesheet" href="/offer_e_shop_1/templates/system/css/general.css" type="text/css" />
 <link rel="stylesheet" href="/offer_e_shop_1/templates/mov_jean_cc_offer_e_shop_2/css/print.css" type="text/css" />
</head>
<body class="contentpane">

<div id="system-message-container">
</div>
 test
</body>
</html> 
```

如何仅返回测试值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:51:48.550

回显所有输出文本并放置一个 die(); 之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:10:05.250

您只需在任务结束时添加 Jexit() 即可摆脱完整的 html。您也可以使用 die()，但如果有 Jexit()，为什么？function edit() { // 你的代码 Jexit(); }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:51:49.033

您可以使用 Jexit(),exit() 或在 url 字符串中添加 &format=raw 或在控制器函数中使用给定的代码：

```
$app = &JFactory::getApplication();
$app->close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T04:24:01.407

找到它.. 在 url 字符串的末尾.. 你需要附加 &format=raw 所以请求将是

```
jQuery.ajax({
              type: "POST",
              url: "index.php?option=com_virtuemart&amp;view=participate&amp;task=participate_request&amp;virtuemart_product_id=2&amp;virtuemart_category_id=5&amp;tmpl=component&amp;Itemid=101&format=raw",
              data: { name: "John", location: "Boston" }
            }).done(function( msg ) {
              alert( "Data Saved: " + msg );
        }); 
```

！毕竟这么容易。

# css - @font-face 不适用于 Mozilla Firefox？

> ID：11926800
> 
> 赞同：0
> 
> 时间：2012-08-13T00:00:41.740
> 
> 标签：css, font-face

所以，我已经尽一切努力让@font-face 在 Mozilla Firefox 3.6 中工作。问题是我很确定这是因为我想在我的 Tumblr 博客上使用@font-face，所以我在 Tumblr 上传器上上传了字体。

```
@font-face {
font-family: feel_scriptregular;
src: url(http://static.tumblr.com/3fk4soa/zKcm8o1y2/feel_script.otf);
src: url(http://static.tumblr.com/3fk4soa/IyZm8o1sa/feel_script-webfont.eot?#iefix) format(embedded-opentype),
     url(http://static.tumblr.com/3fk4soa/wgFm8o1tk/feel_script-webfont.woff) format(woff),
     url(http://static.tumblr.com/3fk4soa/wlLm8o1us/feel_script-webfont.ttf) format(truetype),
     url(http://static.tumblr.com/3fk4soa/tofm8o1vl/feel_script-webfont.svg#feel_scriptregular) format(svg);
} 
```

它不适用于双引号 (")、单引号 (') 或没有任何引号，我不知道该怎么办了.. :/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:15:12.250

那是跨域字体问题：它们必须在同一个域上，或者必须有 HTTP-header “Access-Control-Allow-Origin”

nginx 的解决方案 - [https://gist.github.com/1131897](https://gist.github.com/1131897) & [https://serverfault.com/questions/186965/how-can-i-make-nginx-support-font-face-formats-and-allow-访问控制允许-o](https://serverfault.com/questions/186965/how-can-i-make-nginx-support-font-face-formats-and-allow-access-control-allow-o)

因此，只需在您自己的主机上上传您的字体并将您的 apache/nginx 修复为 servre 正确的标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T15:38:15.193

这是一个跨域的东西，你不能从你自己的子域访问 static.tumblr.com。我之前通过在css中嵌入字体解决了这个问题。如果您转到[此生成器](http://www.fontsquirrel.com/fontface/generator)并选择专家选项，您可以勾选“Base64 编码”框，它将在 tumblr 上工作，因为 .woff 和 .tft 数据是 css 的一部分。

# sql - SQL：如何在两个不同的表中搜索，合并结果？

> ID：11926801
> 
> 赞同：0
> 
> 时间：2012-08-13T00:01:06.230
> 
> 标签：sql, database, wordpress, search

这是一个 wordpress 数据库，我有 2 个感兴趣的表：posts 和 postmeta。我想要做的是获取 $term(searched by users) 并在 SQL 搜索中使用这个变量。

如果匹配，我要搜索的表是 meta_value（如果 meta_key 是专辑年份）、post_content 和 post_title。

问题是 meta_value 与其他表位于不同的表中，但它的表 postmeta 具有 post_id，与 post.ID 相同。这使得知道某些元值属于某个帖子成为可能。

我尝试了以下代码，希望我能清楚地说明我需要什么，以便我可以从这里的人那里获得帮助。我真的需要帮助，我在谷歌或这里找不到答案。提前致谢。

```
$query_sql = "
    SELECT post_id, meta_key, meta_value FROM $wpdb->postmeta
    ,
     (SELECT *
     FROM $wpdb->posts
     WHERE NOT wpdb->posts.post_status = 'inherit'
     AND (wpdb->posts.post_type = 'page' OR wpdb->posts.post_type = 'post')
     AND (wpdb->posts.post_content LIKE '%".$term."%' OR wpdb->posts.post_name LIKE '%".$term."%' OR $wpdb->postmeta.meta_value LIKE '%".$term."%')
     ORDER BY wpdb->posts.post_title ASC) x
     WHERE $wpdb->postmeta.post_id = $wpdb->posts.ID AND $wpdb->postmeta.meta_key = 'albumYear'
";

$query_result = $wpdb->get_results($query_sql, OBJECT); 
```

SQL结构示例：

```
1.wp_posts
1.1 ID, post_type, post_content, post_status, post_name, post_title etc

2.wp_postmeta
2.1 post_id, meta_key, meta_value 
```

因此，我需要在 meta_value（当 meta_key 为 X 时）、post_content、post_name 等中搜索 $term 的匹配项。但我还需要识别 Post im 搜索并返回其所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:39:03.823

您所需要的只是两个表的连接。

抱歉，没有可用的 WP atm，所以无法检查，但应该像这样：

```
$query_sql = "
  SELECT 
    post_id, meta_key, meta_value,
    $wpdb->posts.*
  FROM $wpdb->posts
  LEFT JOIN $wpdb->postmeta ON $wpdb->posts.ID = $wpdb->postmeta.post_id
  WHERE NOT wpdb->posts.post_status = 'inherit'
    AND (wpdb->posts.post_type = 'page' OR wpdb->posts.post_type = 'post')
    AND (wpdb->posts.post_content LIKE '%".$term."%' OR 
         wpdb->posts.post_name LIKE '%".$term."%' OR 
         $wpdb->postmeta.meta_value LIKE '%".$term."%')
    AND $wpdb->postmeta.meta_key = 'albumYear'
  ORDER BY wpdb->posts.post_title ASC
"; 
```

如果需要，请添加您的检查和查询字段列表。

# php - 读取图像并上传，之后

> ID：11926803
> 
> 赞同：0
> 
> 时间：2012-08-13T00:01:36.303
> 
> 标签：php, html, image-uploading, image-upload

我想要完成的事情

[x] 1) 用户填写表格

[x] 2) 用户通过“拖放(html5)”或“单击选择图像”将图像添加到表单中，并在页面上显示预览。（完成）在这里很容易添加代码来触发将这些图像上传到服务器，但我现在还不想要。

[x] 3) 用户点击“添加我和我的办公桌”--> 如果不存在则创建用户帐户

![桌子](../Images/7095ef7133810d797685cf080fe863d1.png) [x] 4) 添加了办公桌，并添加了与正确用户的连接。

[x] 5) 创建`folder`一个`same name (id) as the desk_id.`

```
::::THE QUESTION:::: 
```

6）-->>`now`我想要`upload`那些拖放，或选择的图像`to that folder`。

```
::::::::::::::::::: 
```

我在这里找到的信息已经做到了这一点：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)（实际页面真的很震撼！9

我知道这个很棒的解决方案： http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/) 但这对于我正在尝试做的事情来说太过分了，而且我碰巧很自豪我已经完成了其他所有工作，而且我真的认为我是如此接近。

不断出现的单词和表达式：读取 blob、检查数组 blob、从沙箱读取、canvas.toDataURL()

我觉得答案就在这里：[http](http://www.html5rocks.com/en/tutorials/file/xhr2/) ://www.html5rocks.com/en/tutorials/file/xhr2/ AND / OR HERE [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)或 HERE / [http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)（在“复制用户选择的文件”下），或在这里[http://robertnyman.com/2010/12/16/utilizing-the- html5-file-api-to-choose-upload-preview-and-see-progress-for-multiple-files/](http://robertnyman.com/2010/12/16/utilizing-the-html5-file-api-to-choose-upload-preview-and-see-progress-for-multiple-files/)

您可以说我在此之后的下一步：[在上传之前预览图像，](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded) 但也许我可以朝着正确的方向前进？:)

当然我看过这些： [HTML5 Pre-resize images before uploading](https://stackoverflow.com/questions/10333971/html5-pre-resize-images-before-uploading) [facebook js api - HTML5 canvas upload as a photo](https://stackoverflow.com/questions/11739908/facebook-js-api-html5-canvas-upload-as-a-photo)

当前显示来自DND文件的预览，如下所示：

```
for (var i = 0, f; f = uppladdadeFiler[i]; i++) {

    // Only process image files.
    if (!f.type.match('image.*')) {
      continue;
    }

    var reader = new FileReader();

    // Closure to capture the file information.
    reader.onload = (function(theFile) {
      return function(e) {
        // Render thumbnail.
        var span = document.createElement('span');
        span.innerHTML = ['<img class="thumb preview" src="', e.target.result,
                          '" title="', escape(theFile.name), '"/>'].join('');
        document.getElementById('listImages').insertBefore(span, null);

        var span2 = document.createElement('span');
        span2.innerHTML = ['<img class="thumb inside" src="', e.target.result,
        '" title="', escape(theFile.name), '"/>'].join('');
        document.getElementById('huvudbilden').insertBefore(span2, null);
      };        
    })(f);
        $('#valdaBilder').show();

    // Read in the image file as a data URL.
    reader.readAsDataURL(f);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:30:22.047

我会给你一些意见，希望能引导你走向正确的方向。请注意，由于两个原因，我没有提供现成的工作答案 - 1\. 我太懒了:) 2\. 从我所见，你足够聪明，一旦你掌握了要点就可以弄清楚它......所以这里是：

首先要做的是有一个名为“上传文件”的按钮，并在其上附加一个 fn，如`uploadFiles()`. 现在这个函数将如下所示：

```
function uploadFiles()
{
    var file = files[0]; 
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    { 
        if (xhr.readyState==4 && xhr.status==200) 
        alert(xhr.responseText);
    };   
    xhr.open('POST', '/upload.php', true);
    xhr.setRequestHeader('X-FILE-NAME', file.name);
    xhr.send(file);
} 
```

好的，所以解释：

```
var file = files[0]; 
```

对象数组应该是您在拖放事件侦听器函数中创建的`files`东西，它将是代表您拖放到 dropzone 中的文件的文件对象。通常你是这样创建它们的：`files = event.dataTransfer.files;`它创建了一个`FileList object`命名`files`在示例中我只考虑 dropzone 中的第一个文件 - 因此`files[0]`

我想其余的代码是不言自明的。需要注意的一件事是：

```
 xhr.setRequestHeader('X-FILE-NAME', file.name);
 xhr.send(file); 
```

如您所见，我们正在向服务器发送原始二进制数据内容。因此，后期操作正在将文件包含的原始二进制数据写入服务器流。这一点很重要，因为这会影响服务器读取此发布数据的方式。

服务器端 upload.php：我将读取上传文件的前 1000 个字节并将其打印回客户端（根据上面的 javascript 代码，它将向浏览器发出警报）

```
<?php
$streamHandle = fopen("php://input","rb");
$streamContent = fread($streamHandle,1000);
echo $streamContent;
?> 
```

许多人对如何在服务器端读取内容感到困惑并考虑使用`$_POST`, 或`$_FILES`，但如果您使用 发送数据`X-FILE-NAME`，则必须通过打开一个句柄来读取它，该句柄`php://input`是正在运行的 php 进程的标准输入流。 .

一旦您阅读了流，只需将其`fwrite`-ing 到您想要的任何目录中的新文件中。

就像我说的，这不是一个交钥匙解决方案，您可以将其复制粘贴到您的特定代码中，但我希望这可以帮助您找到正确的方向，使用 HTML5 的拖放和文件 API 提供的文件上传Javascript 来支持它。

# android - acra logcat 缺少行

> ID：11926806
> 
> 赞同：0
> 
> 时间：2012-08-13T00:01:57.553
> 
> 标签：android, acra

我按照 ACrA for android 网站所说的将 logcat 信息发送到我的谷歌电子表格。我能够收到预期的日志，但是我只得到最后 10 行而不是我指定的 150 行。acra.supposed 向我发送 150 行还是应该查看 150 行并过滤掉我要求过滤的任何内容，然后将过滤后的版本发送给我？我希望第一个如此。感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:02:36.713

正如我在评论中解释的那样：

*   ACRA 将 logcat 参数设置直接转发到 LogCat 命令行，所以 logcat 负责过滤
*   我们可以修改 ACRA 来处理对整个可用 logcat 输出的过滤。这还没有实现。
*   从 ACRA 4.3.0 开始（测试阶段正在进行中，直到 2012 年 9 月 1 日），您可以将日志写入自己的文件中，并将其配置为在报告中发送其内容（行数可配置）
*   从 JellyBean 开始，READ_LOGS 权限不授予第三方应用程序。只有系统应用程序可以使用它。另一方面，应用程序可以调用 logcat 并在没有任何许可的情况下仅获取自己的跟踪。

# ios - appMobi iOS 构建失败“构建应用程序时发生错误。验证您的构建资产是否正确”

> ID：11926809
> 
> 赞同：0
> 
> 时间：2012-08-13T00:02:27.690
> 
> 标签：ios, html, appmobi, app-hub

因此，我正在尝试为 iOS 构建我的应用程序的 adHoc 版本以进行测试。但是在构建大约一分钟后，我得到了一个错误

“构建应用程序时发生错误。验证您的构建资产是否正确”

不知道这意味着什么，显然缺少什么资产。我已经浏览了 appMobi 提供的整个指南。据我所知，我已验证我的所有资产都已到位，但它失败了。更糟糕的是 appHub 表明 iOS 构建是绿色的。更糟糕的是我可以从同一个包中构建一个 Android apk 而不会失败。

![在此处输入图像描述](../Images/f54778fc3a078b915c8623261d1e8287.png) ![在此处输入图像描述](../Images/038a52fd3b82316bfd83dd4c8b59b9d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:25:20.067

我很久以前就发现了我的答案。我应该回答它以帮助其他人了解情况。问题最终是我使用了错误的证书，不幸的是没有明确的方法可以找到它。appMobi/phonegap 工作人员从后端对其进行了调查，发现证书类型错误。但最后我得到了正确的证书，并将其插入，它构建得很好

# java - 处理多个客户端的流？

> ID：11926810
> 
> 赞同：0
> 
> 时间：2012-08-13T00:02:50.877
> 
> 标签：java, sockets, stream

基本上我想做的是开发一个聊天程序（介于即时通讯程序和 IRC 之间）来提高我的 Java 技能。

但是到目前为止我遇到了一个大问题：如果有多个客户端，我不知道如何正确设置流。客户端和服务器之间的 1:1 聊天很容易，但我只是不知道要做什么，所以在同一个聊天中可以有超过 1 个客户端与服务器。

这就是我得到的，但我怀疑它是否会很有帮助，因为它只是往返于服务器的 1 个永久流。

```
private void connect() throws IOException {
        showMessage("Trying to connect \n");
        connection = new Socket(InetAddress.getByName(serverIP),27499);
        showMessage("connected to "+connection.getInetAddress().getHostName());

    }

    private void streams() throws IOException{
        output = new ObjectOutputStream(connection.getOutputStream());
        output.flush();
        input = new ObjectInputStream(connection.getInputStream());
        showMessage("\n streams working");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:24:33.410

`ServerSocket(int port)`我已经用and做过几次了`Socket ServerSocket.accept()`。这可以很简单，让它监听您希望聊天服务器客户端监听的一个端口。主线程将阻塞等待下一个客户端连接，然后将 Socket 对象返回给该特定客户端。通常您会希望将它们放在一个列表中，以便一般处理 n 个客户端。

而且，是的，您可能希望确保每个`Socket`线程都在不同的线程中，但这完全取决于您作为程序员。

请记住，无需重定向到服务器上的另一个端口，因为客户端使用不同的源端口，唯一的 5 元组（SrcIP、SrcPort、DstIP、DstPort、TCP/UDP/其他 IP 协议）将允许重新使用一个服务器端口。因此，为什么我们都使用 stackoverflow.com 端口 80。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:18:48.677

要在一个程序中读取多个流，您将不得不使用多线程。因为从流中读取是同步的，所以您需要为每个线程从一个流中读取。有关多线程的更多信息，请参阅[线程上的 java 教程。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:24:38.897

几个月前做了类似的事情。基本上我使用了一个单独的`ServerSocket`和`Thread`每个客户端服务器端。当客户端连接时，您将该端口的输入和输出流注册到固定池并阻塞，直到输入发送。然后将输入复制到其他每个客户端并发送。这是从命令行运行的基本程序： 服务器代码：

```
 import java.io.*;
    import java.net.ServerSocket;
    import java.net.Socket;
    import java.util.ArrayList;

    public class ChatServer {

        static int PORT_NUMBER = 2012;

        public static void main(String[] args) throws IOException {

            while (true) {
                try (ServerSocket ss = new ServerSocket(PORT_NUMBER)) {
                    System.out.println("Server waiting @" + ss.getInetAddress());
                    Socket s = ss.accept();
                    System.out.println("connection from:" + s.getInetAddress());

                    new Worker(s).start();
                }
            }

        }

        static class Worker extends Thread {

            final static  ArrayList<PrintStream> os = new ArrayList(10);
            Socket clientSocket;
            BufferedReader fromClient;

            public Worker(Socket clientSocket) throws IOException {
                this.clientSocket = clientSocket;
                PrintStream toClient=new PrintStream(new BufferedOutputStream(this.clientSocket.getOutputStream()));
                toClient.println("connected to server");
                os.add(toClient);
                fromClient = new BufferedReader(new InputStreamReader(this.clientSocket.getInputStream()));

            }
            @Override
            public void run() {

                while (true) {
                    try {
                        String message = fromClient.readLine();
                        synchronized (os) {

                            for (PrintStream toClient : os) {
                                toClient.println(message);
                                toClient.flush();
                            }
                        }

                    } catch (IOException ex) {
                        //user discnnected
                        try {
                            clientSocket.close();
                        } catch (IOException ex1) {

                        }
                    }

                }
            }
        }

} 
```

客户端代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.Socket;

public class Client {

    public static void main(String[] args) throws IOException {

        final BufferedReader fromUser = new BufferedReader(new InputStreamReader(System.in));
        PrintStream toUser = System.out;
        BufferedReader fromServer;
        final PrintStream toServer;
        Socket s = null;

        System.out.println("Server IP Address?");

        String host;
        String port = "";

        host = fromUser.readLine();

        System.out.println("Server Port Number?");

        port = fromUser.readLine();

        s = new Socket(host, Integer.valueOf(port));

        int read;
        char[] buffer = new char[1024];

        fromServer = new BufferedReader(new InputStreamReader(s.getInputStream()));
        toServer = new PrintStream(s.getOutputStream());
        new Thread() {

            @Override
            public void run() {
                while (true) {
                    try {
                        toServer.println(">>>" + fromUser.readLine());

                        toServer.flush();
                    } catch (IOException ex) {
                        System.err.println(ex);
                    }
                }
            }
        }.start();
        while (true) {
            while ((read = fromServer.read(buffer)) != -1) {
                toUser.print(String.valueOf(buffer, 0, read));
            }
            toUser.flush();

        }
    }
} 
```

# javascript - iframe 更改选择

> ID：11926813
> 
> 赞同：0
> 
> 时间：2012-08-13T00:03:23.543
> 
> 标签：javascript, iframe, rte, designmode

我正在创建一个非常简单的 rte，这是我的问题，我可以在 iframe(designmode=true) 中获取选定的文本，但是我无法更改它。

html

```
<a onclick="change();">change</a>
<iframe id="textEditor"></iframe> 
```

脚本文件

```
function $(Str1){return document.getElementById(Str1);}
rte()
{
    var texteditor=$('texteditor');
    textEditor.document.designMode="on";
    textEditor.document.body.contentEditable="True";
    textEditor.document.open();
    textEditor.document.close();
    textEditor.focus();

}
function change()
{
    var userSelection,range;
    if (window.frames['textEditor'].getSelection)
    {
        userSelection=window.frames['textEditor'].getSelection();
    }
    else if(document.frames['textEditor'].selection)
    {
        userSelection=document.frames['textEditor'].selection.createRange();
    }
    if(userSelection.getRangeAt)
    {
        range=userSelection.getRangeAt(0);
    }
    else
    {
        range=document.frames['textEditor'].createRange();
        range.setStart(userSelection.anchorNode,userSelection.anchorOffset);
        range.setEnd(userSelection.focusNode,userSelection.focusOffset);
    }
    range="<div style='color:#f00;'>" + range + "</div>";
}
window.onload = rte(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:38:57.520

我找到了一种解决方法，更改功能应该是这样的

```
function change()
    if(document.selection)
    {
        sText=textEditor.document.selection.createRange();
        sText.execCommand("createlink","","");
        temp=sText.parentElement().innerHTML;
        newNode=textEditor.document.createElement("h1");
        replacement=sText.parentElement().replaceNode(newNode);
        newNode.innerHTML=temp;
    }
    else if(document.getSelection)
    {
        sText=textEditor.window.getSelection();
        myTag=textEditor.document.createElement("div");
        myTag.setAttribute("class","bold");
        sText.getRangeAt(0).surroundContents(myTag);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:32:18.607

会不会是`rte()`函数的第一行引用了“texteditor”而不是“textEditor”？

# node.js - 无法使用 node.js 上的 express 框架执行 server.js 程序

> ID：11926814
> 
> 赞同：3
> 
> 时间：2012-08-13T00:03:31.473
> 
> 标签：node.js, express

在尝试执行 server.js 程序时，我收到以下错误：

```
var app = express();
Type error: object is not a function 
   at object.<anonymous> 
```

甚至尝试重新安装并将 express 的版本更改为

```
npm install
npm uninstall express
npm install express@2.5.9 
```

但它导致了新的`error`

```
fqdn = ~req.url.indexof(' ://') 
```

我使用 Windows，我正在使用 node.js 版本 0.8.4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:07:10.703

如果您使用的是 Express < 3.0，则返回值`require('express');`不是函数；您需要以旧方式创建服务器。

**快递 2.x**

```
var express = require('express');
var server = express.createServer(); 
```

**快递 3.x**

```
var http = require('http');
var express = require('express');
var app = express();
var server = http.createServer(app); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:09:19.527

做什么

```
> require('express').version;
'3.0.0rc2' 
```

返回？

如您所见，它确实返回了`3.0.0rc2`？你的真的回来了吗`2.5.9`。如果它确实像布兰登所说的那样使用 2.x 部分。如果它返回 3.x 你使用他的 3.x 部分。

# sift - SimpleCV 并排视图和筛选功能

> ID：11926816
> 
> 赞同：4
> 
> 时间：2012-08-13T00:03:59.920
> 
> 标签：sift, simplecv, keypoint

由于我是 SimpleCV 的初学者，请有人指导我使用以下应用程序：问题是我正在从事立体声项目。我有两个图像，来自左眼和右眼。

*   首先：我必须并排显示它们。（使用特征和关键点绘制后，它能够并排显示两个图像，但我如何手动执行此操作？）

*   第二：我将跟踪任何这些图像上的任何鼠标单击事件。然后提取点击事件点，并在筛选检测后将其位置标记在另一张图像上。（由于左视图和右视图有交叉点，因此单击的像素最有可能在另一个上有一点偏移/偏移）。我可以使用筛选功能或 SimpleCV 中提供的任何其他类似方法。但默认情况下，功能使用 SURF 算法进行检测。如何切换到筛选算法并使用它？我应该在某处创建一个特征对象吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:48:18.357

要并排显示两个图像，您可以使用

`img1.sideBySide(img2)`

有关它的更多信息，请启动 SimpleCV shell，

```
$ simplecv
SimpleCV:1> help(Image.sideBySide) 
```

这将向您展示 sideBySide 函数的完整文档。

**要点**：

您可以对关键点使用以下任何算法。

*   冲浪
*   星星
*   快速地
*   质谱仪
*   宝珠
*   筛

`img.findKeyPoints(flavour="SIFT")`

再次获取更多信息，只需`help(Image.findKeyPoints)`在 SimpleCV shell 中使用。

# jquery - jquery嵌套绑定

> ID：11926817
> 
> 赞同：1
> 
> 时间：2012-08-13T00:04:06.177
> 
> 标签：jquery, bind

我对 jquery 和 javascript 很陌生。我正在研究 Splunk 如何实现它的一些模块并感到困惑。

这是示例代码，其中遗漏了很多东西。

```
this.input.bind("focus",this.onInputFocus.bind(this)) 
```

this.input 指的是用于 SearchBar 的文本框。稍后，在文件中，声明了 onInputFocus

```
onInputFocus: function(evt) {
   ...
   ...
   return true
}, 
```

我知道“this.input.bind”语句告诉浏览器在有人单击文本框时执行 onInputFocus，但我不明白事件处理程序末尾的 .bind(this)。请向我解释这个符号，以便我了解正在发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:08:49.127

“外部”使用 jQuery[`bind`](http://api.jquery.com/bind)将事件处理程序绑定到事件。`focus`

“内部”`Function.bind`正在创建一个绑定到特定上下文`this`的函数（在调用函数时等于该上下文）。这不需要框架（但需要现代浏览器）。

因此，在这种情况下，调用`Function.bind`确保每次`input`都聚焦，`onInputFocus`方法的上下文设置为当前值`this`（可能是您正在使用的小部件/组件）。这是必要的，因为它通常是事件发生的元素。

[MDN 上的文章`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)对此有很好的解释。

* * *

为了更好地说明这是如何工作的，举一个简单的例子：

**HTML：**

```
​&lt;button id="test" type="button">Test</button>
<button id="test2" type="button">Test 2</button>
<div id="target"></div> 
```

**JavaScript**：

```
var fill = function() {
    $(this).css('background-color', 'yellow');
};
/* button#test will be colored yellow */
$("#test").bind("click", fill);

/* div#target will be colored yellow */
$("#test2").bind("click", fill.bind($("#target"))); 
```

在第一个事件绑定中，`fill`调用并`this`设置为`#test`（因为那是被点击的元素）。

在第二个中，`fill`再次调用，但由于调用事件绑定内部而`this`被设置为。`#target``Function.bind`

**示例：http:** [//jsfiddle.net/GK7L8/](http://jsfiddle.net/GK7L8/)

# ruby - 使用 Sinatra 更改 HTTP 状态消息

> ID：11926823
> 
> 赞同：4
> 
> 时间：2012-08-13T00:04:46.417
> 
> 标签：ruby, http, sinatra, rack, http-status

我正在编写一个简单的 Sinatra 应用程序，并且给定用户发布带有特定数据的请求，我想返回带有消息 CLIENT_ERROR 或类似内容的错误“453”（自定义错误代码）。

问题是：查看 Sinatra 文档并进行一些测试，我找不到设置响应错误消息的方法，只有响应状态。

所以，如果设置 Sinatra 响应

```
get '/' do
   response.status = 453
end 
```

我得到正确的错误代码：

```
curl -v localhost:4567

* About to connect() to localhost port 4567 (#0)
*   Trying 127.0.0.1... connected
> GET / HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4     libidn/1.23 librtmp/2.3
> Host: localhost:4567
> Accept: */*
> 
< HTTP/1.1 453 
< X-Frame-Options: sameorigin
< X-XSS-Protection: 1; mode=block
< Content-Type: text/html;charset=utf-8
< Content-Length: 0
< Connection: keep-alive
< Server: thin 1.3.1 codename Triple Espresso
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

但我想要的是：

```
< HTTP/1.1 453 CLIENT_ERROR 
```

和我一样

```
< HTTP/1.1 200 OK 
```

当一切按计划进行时。

无论如何使用 Sinatra/Rack 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:56:33.317

状态消息由您正在使用的服务器生成，例如在 Thin 中，消息在[`Thin::HTTP_STATUS_CODES`](https://github.com/macournoyer/thin/blob/v1.4.1/lib/thin/statuses.rb#L4)其中，响应行在 中生成[`Thin::Response`](https://github.com/macournoyer/thin/blob/v1.4.1/lib/thin/response.rb#L40)，而在 WEBrick 中，它们在中[`WEBrick::HHTPStatus::StatusMessage`](https://github.com/ruby/ruby/blob/trunk/lib/webrick/httpstatus.rb#L56)，响应在 中生成[`WEBrick::HTTPResponse`](https://github.com/ruby/ruby/blob/v1_9_3_194/lib/webrick/httpresponse.rb#L62)。

如果您知道您使用的是什么服务器，您可以将您的错误添加到适当的哈希中。

薄：

```
require 'thin'
Thin::HTTP_STATUS_CODES[453] = "Client Error" 
```

和输出：

```
$ curl -v localhost:4567
* About to connect() to localhost port 4567 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 4567 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3
> Host: localhost:4567
> Accept: */*
> 
< HTTP/1.1 453 Client Error
< X-Frame-Options: sameorigin
< X-XSS-Protection: 1; mode=block
< Content-Type: text/html;charset=utf-8
< Content-Length: 0
< Connection: keep-alive
< Server: thin 1.4.1 codename Chromeo
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

并使用 WEBrick：

```
require 'webrick'
WEBrick::HTTPStatus::StatusMessage[453] = "Client Error" 
```

这给出了输出：

```
$ curl -v localhost:4567
* About to connect() to localhost port 4567 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 4567 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3
> Host: localhost:4567
> Accept: */*
> 
localhost - - [13/Aug/2012:01:41:48 BST] "GET / HTTP/1.1" 453 0
- -> /
< HTTP/1.1 453 Client Error 
< X-Frame-Options: sameorigin
< X-Xss-Protection: 1; mode=block
< Content-Type: text/html;charset=utf-8
< Content-Length: 0
< Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
< Date: Mon, 13 Aug 2012 00:41:48 GMT
< Connection: Keep-Alive
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T08:03:09.577

我建议不要使用自定义 HTTP 状态代码。如果您认为您有一些通用的东西，请考虑编写 Internet 草案并通过 IETF 规范流程。

# javascript - 在 jQuery 中进行重定向

> ID：11926824
> 
> 赞同：-4
> 
> 时间：2012-08-13T00:04:57.220
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何从一个 URL 重定向到另一个 URL？](https://stackoverflow.com/questions/8824141/how-to-redirect-from-one-url-to-another-url)

我有以下 jQuery 函数，我试图在其中重定向到另一个页面——我该怎么做？

```
$.post('/ajax/change_qc_status/',  {
        'qc_note': qc_note,
        'user': user
    }, 
    function(request){
        $.get('/summary/90') // this does nothing
    }
); 
```

请注意，如果我转到该页面`/summary/90`，它是正确的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:06:39.530

你根本不需要 jQuery。

只需使用`window.location = "intended URL"`

# sql - 如何重建历史观？

> ID：11926825
> 
> 赞同：10
> 
> 时间：2012-08-13T00:05:14.283
> 
> 标签：sql, sql-server, sql-server-2008, cdc, change-data-capture

我目前正在探索将[变更数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)作为存储时态数据库的选项。这很棒，因为它只存储增量并且似乎可以解决我的问题。当我启用 CDC 时，一堆表格出现在`System Tables`.

查询时`cdc.dbo_MyTable`，我可以看到表上发生的所有更改。现在，我将如何构建历史观？例如，如果我想查看我的桌子在特定日期的状态，我该怎么做呢？这甚至可能吗？

看起来我需要获取日志并开始将它应用到我的原始表上，但我想知道是否有内置的方法可以做到这一点。有什么建议么？

我正在研究的一些用例：

*   了解图在特定时间点的状态
*   给定两个不同时间的图，知道不同的链接集（这可能可以在构建表后使用 EXCEPT 子句获得）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:44:54.313

这是可能的，但不是我害怕的内置方式。您将不得不手动重建时间线。

鉴于更改跟踪表提供 tran_end_time，即属性值应被视为持久的时间，您必须进行查询以获取表状态的所有不同时期，加入跟踪的属性更改然后旋转（以与表格相同的形式进行演示）。不要忘记与表状态本身联合以获取尚未更改/跟踪的值以确保完整性。

简化后的最终结果应如下所示

```
RN PK PropA   PropB   FromDate          ToDate
1  1  'Ver1'  'Ver1'  2012-01-01 09:00  2012-01-02 08:00
2  1  'Ver1'  'Ver2'  2012-01-02 08:00  2012-01-03 07:00
3  1  'Ver2'  'Ver2'  2012-01-03 07:00  *getdate()*
4  2  'Ver1'  'Ver1'  2012-01-01 05:00  2012-01-02 06:00
5  2  'Ver1'  'Ver2'  2012-01-02 06:00  2012-01-03 01:00
6  2  'Ver2'  'Ver2'  2012-01-03 01:00  *getdate()* 
```

请注意，如果未删除该行，则*getdate()*有效，在这种情况下，应将其替换为删除日期

编辑，用于 2 个用例。第一点很容易解决，它是构建时间对象图然后过滤的问题：

```
declare @pointInTime datetime = '20120102 10:00';
select * from Reconstructed_TG where FromDate <= @pointInTime and @pointInTime < ToDate 
```

正如您所指出的，第二点可以使用 EXCEPT 子句轻松生成。鉴于上述查询：

```
declare @pointInTimeA datetime = '20120102 10:00';
declare @pointInTimeB datetime = '20120103 01:00';
select * from Reconstructed_TG where FromDate <= @pointInTimeA and @pointInTimeA < ToDate
EXCEPT
select * from Reconstructed_TG where FromDate <= @pointInTimeB and @pointInTimeB < ToDate 
```

但是该`except`子句仅显示具有至少一个不同列值的行；我不知道这些信息对人眼是否真的有意义。根据您的需要，直接处理`cdc`数据的查询可能更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:01:42.417

我不确定这一点，从来没有做过类似的事情，但也许你可以在表中添加一个列“changeset”，它可以跟踪你在表上所做的更改，每次有事务时获取 max(changeset (如果我应该写这是作为答案或评论...我是新来的）

无论如何，希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:53:51.967

[您可能想查看](http://msdn.microsoft.com/en-us/library/ms175158.aspx)自 2005 年以来已内置到 SQL Server 中的 Snapshots。

如果您只需要几个时间点，这些对您最有用，但它们可以帮助您跟踪复杂数据库中的所有表。

这些是增量，所以`Compared to a full copy of a database, however, snapshots are highly space efficient. A snapshot requires only enough storage for the pages that change during its lifetime. Generally, snapshots are kept for a limited time, so their size is not a major concern.`

# java - 当我按下一个键时，我的 mainBall 类不会重新绘制

> ID：11926827
> 
> 赞同：0
> 
> 时间：2012-08-13T00:05:38.137
> 
> 标签：java, applet, awt, keypress, keydown

我创建了一个在屏幕上绘制球的类，我的目标是用键移动它，但球停留在一个位置。球的坐标根据按键而变化，但不是实际的球本身

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Component;
import java.awt.Event;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;
import java.util.ArrayList;
import java.util.concurrent.TimeUnit;

public class game extends Applet implements Runnable
{
    static final int WIDTH = 450;
    static final int HEIGHT =  450;
    private Image dbImage;
    private Graphics dbg;

    public static long NEW_DOT_FREQ = TimeUnit.SECONDS.toMillis(3);
    public long lastUpdateTime;
    public long timeSinceLastNewDot;

    public ArrayList<Ball> BALLS;

    Color[] color = {Color.red, Color.blue, Color.green, Color.yellow, Color.magenta, Color.black};
    int colorIndex;

    static final int NUM_OF_BALLS = 4;

    int i;
    int t;

    MainBall mainBall = new MainBall(100, 100, 10, 10, 100, 100, 0, 0);

    Thread updateTime = new updateTime();

    public void start()
    {
        lastUpdateTime = System.currentTimeMillis();

        Thread th = new Thread(this);
        th.start();//start main game

        updateTime.start();
    }

    public void updateGame()
    {
        //Get the current time
        long currentTime = System.currentTimeMillis();
        //Calculate how much time has passed since the last update
        long elapsedTime = currentTime - lastUpdateTime;
        //Store this as the most recent update time
        lastUpdateTime = currentTime;

        //Create a new dot if enough time has passed
        //Update the time since last new dot was drawn
        timeSinceLastNewDot += elapsedTime;

        if (timeSinceLastNewDot >= NEW_DOT_FREQ)
        {
            int newX = randomNumber();
            int newY = randomNumber();

            debugPrint("New dot created at x:" + newX + ", y:" + newY + ".");

            BALLS.add(new Ball(newX, newY, 20, 20));

            timeSinceLastNewDot = 0;
        }
    }

    private void debugPrint(String value)
    {
        System.out.println(value);
    }

    public class updateTime extends Thread implements Runnable
    {
        public void run()
        {
            for(t = 0; ; t++)
            {
                try
                {
                    Thread.sleep(1000);
                }
                catch(InterruptedException e){}
            }
        }
    }

    public int randomNumber()
    {
        return (int)(Math.random() * 400);
    }

    public int getRandomColor()
    {
        return (int)(Math.random() * 6);
    }

    public class MainBall
    {
        int x;
        int y;
        int width;
        int height;
        int xpos = 100;
        int ypos = 100;
        int xspeed = 0;
        int yspeed = 0;

        public MainBall(int x, int y, int width, int height, int xpos, int ypos, int xspeed, int yspeed)
        {
            this.x = 100;
            this.y = 100;
            this.width = 10;
            this.height = 10;
            this.xpos = 100;
            this.ypos = 100;
            this.xspeed = 0;
            this.yspeed = 0;
        }

        public void paintMainBall(Graphics g)
        {
            g.setColor(Color.black);
            g.fillOval(x, y, width, height);
            g.drawString(xpos + ", " + ypos, 20, 40);
        }
    }//mainBall

    class Ball
    {
        int x;
        int y;
        int width;
        int height;

        public Ball(int x, int y, int width, int height)
        {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
        }//end ball

        public void paint(Graphics g)
        {
            g.setColor(color[getRandomColor()]);
            g.fillOval(x, y, width, height);
        }//end paint

    }//ball class

    public void update(Graphics g)//double buffer don't touch!!
    {
        if(dbImage == null)
        {
            dbImage = createImage(this.getSize().width, this.getSize().height);
            dbg = dbImage.getGraphics();
        }

        dbg.setColor(getBackground());
        dbg.fillRect(0, 0, this.getSize().width, this.getSize().height);

        dbg.setColor(getForeground());
        paint(dbg);

        g.drawImage(dbImage, 0, 0, this);
    }

    public boolean keyDown (Event e, int key)
    {
        if(key == Event.LEFT)
        {
            mainBall.xspeed = -5;
            mainBall.yspeed = 0;
        }

        if(key == Event.RIGHT)
        {
            mainBall.xspeed = 5;
            mainBall.yspeed = 0;
        }

        if(key == Event.UP)
        {
            mainBall.yspeed = -5;
            mainBall.xspeed = 0;
        }

        if(key == Event.DOWN)
        {
            mainBall.yspeed = 5;
            mainBall.xspeed = 0;
        }
        return true;
    }

    public void run()
    {
        while(true)
        {
            repaint();

            if (mainBall.xpos < 1)
            {
                mainBall.xpos = 449;
            }

            if (mainBall.xpos > 449)
            {
                mainBall.xpos = 1;
            }
            if (mainBall.ypos < 1)
            {
                mainBall.ypos = 449;
            }

            if (mainBall.ypos > 449)
            {
                mainBall.ypos = 1;
            }
            mainBall.ypos += mainBall.yspeed;
            mainBall.xpos += mainBall.xspeed;
            try
            {
                Thread.sleep(20);
            }
            catch(InterruptedException ex){}
        }
      }

    public void init()
    {
        this.setSize(WIDTH, HEIGHT);

        BALLS = new ArrayList<Ball>();
    }

    public void paint(Graphics g)
    {

        g.drawString("time: " + t, 20, 20);

        mainBall.paintMainBall(g);

        for (Ball ball : BALLS)
        {
            ball.paint(g);
        }

        updateGame();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:24:46.300

您更新球的 xPos/yPos 值，但永远不会更新 x/y 值

```
public void paintMainBall(Graphics g) {
    System.out.println("PaintMainBall");
    g.setColor(Color.RED);
    g.fillOval(x, y, width, height);
    g.drawString(xpos + ", " + ypos, 20, 40);
} 
```

# php - mysql UPDATE多行但单列不同的值从数组中获取

> ID：11926834
> 
> 赞同：-2
> 
> 时间：2012-08-13T00:06:46.353
> 
> 标签：php, mysql

好的，所以我有一个看起来像的 php 数组

`array('somehash' => 'someotherhash', 'somehash2' => 'someotherhash2');`

这里 somehash = producthash 和 someotherhash = tohash

```
$db->query('UPDATE sometable SET status = '.self::STATUS_NOT_AVAILABLE.', towhere = '.self::TO_WHERE.', '.
                    .'tohash = WHEN or IF or ??? and how ?, '.
                    .'WHERE status = '.self::STATUS_AVAILABLE.'  AND '.
                    .'producthash IN (' . implode(',' , $prodarray) . ')') or $db->err(__FILE__,__LINE__); 
```

所以在上面的查询中，我希望通过mysql 字段`tohash`从 php 数组中获取值`producthash`

就像是`tohash = IF(producthash IN '.$prodarray.', $prodarray['producthash'] , whatever)`

当然，上述 IF 不起作用，因为我没有 producthash 值`$prodarray['producthash']`

任何人都知道解决这个问题的方法，因为我在数组中有超过 1000 个值并且不想运行数千个更新

在这种情况下，INSERT INTO ON DUPLICATE KEY 是不可能的，因为此表唯一键基于 3 个字段，并且在执行此更新时我没有所有三个字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:45:16.773

子查询？

```
UPDATE ...
WHERE ... producthash in (SELECT * FROM products) 
```

只要您不从要更新的同一个表中进行选择，这将起作用 - 如果没有变通方法，mysql 不允许这样做。

# c# - 如何创建列表 在我的数据模型 MVC4 C# 中并开始使用它？

> ID：11926843
> 
> 赞同：1
> 
> 时间：2012-08-13T00:08:39.640
> 
> 标签：c#, razor, asp.net-mvc-4

在我的 MVC4 项目中，我想在我的数据模型中使用 a`List<bool>`来处理多个复选框。所以我写道：

```
List<bool> multiple { get; set; } 
```

但显然这根本行不通，因为我没有使用关键字实例化具有特定大小的列表`new`。我怎么能做到这一点而不丢掉 getter 和 setter 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:17:19.093

在对象的[构造函数](http://msdn.microsoft.com/en-us/library/ms173115.aspx)中，将该属性实例化为一个新列表。至于设置大小，列表不需要：

```
public MyClass()
{
    this.multiple = new List<bool>();
} 
```

# apache - ec2 LAMP 实例问题

> ID：11926844
> 
> 赞同：1
> 
> 时间：2012-08-13T00:08:41.837
> 
> 标签：apache, amazon-ec2

我有一个微型实例`AWS`，表明它在亚马逊仪表板上运行良好
但是当我登录到实例`SSH`并尝试启动或停止 apache 时
`sudo service httpd stop`
`sudo service httpd start`
，我得到`[FAILED]`

`sudo apachectl start`
不返回任何东西

`sudo apachectl restart`给我`httpd not running, trying to start`

我错过了什么？它似乎是突然出现的，
有什么`command line`我可以测试的，看看问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:44:19.690

您是否更改了配置文件中的任何内容？

> /etc/init.d/httpd 配置测试

80端口上还有其他东西在监听吗？

> 定影器-n tcp 80

# php - Zend Framework 2 部分路由组装

> ID：11926853
> 
> 赞同：7
> 
> 时间：2012-08-13T00:10:19.853
> 
> 标签：php, zend-framework2

我的 Zend Framework 2 应用程序有一个路由定义，它试图模仿 Zend Framework 1 的默认路由。看起来像：

```
 'router' => array(
            'routes' => array(
                'default' => array(
                    'type'    => 'segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'defaults' => array(
                            '__NAMESPACE__' => 'Application\Controller',
                            'controller'    => 'Index',
                            'action'        => 'index',
                        ),
                    ),
                    'may_terminate' => true,
                    'child_routes'  => array(
                        'wildcard' => array(
                            'type' => 'wildcard',
                        ),
                    ),
                ),
            ),
        ), 
```

它与路由匹配得很好，但我不能使用`Url`视图助手来组装带有任意参数的路由。

例如，

```
$this->url('default', array('controller' => 'test', 'action' => 'test', 'id' => 5)); 
```

结果`/test/test`代替`/test/test/id/5`.

有谁知道如何组装这样的部分路线？或者有没有更好的方法来获得 ZF1 风格的路线？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T14:11:42.013

事实证明，您需要在`Url`视图助手中指定整个路由名称（包括子路由）。

使用我的问题中定义的路由器，正确的视图助手调用如下所示：

```
$this->url('default/wildcard', array('controller' => 'test', 'action' => 'test', 'id' => 5)); 
```

这将导致`/test/test/id/5`.

# git - Git：“错误：拒绝远程创建有趣的 ref 'HEAD'”用于初始推送

> ID：11926854
> 
> 赞同：18
> 
> 时间：2012-08-13T00:10:59.983
> 
> 标签：git, egit

我正在尝试将我的 Git 存储库从 Egit（Eclipse Git）初始推送到 GitHub。不幸的是，我收到以下错误：

```
error: refusing to create funny ref 'HEAD' remotely 
```

我将源引用和目标引用都设置为“HEAD”

这个错误信息是什么意思？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T00:29:00.703

我通过选择 master (refs/heads/master) 作为源 ref 来解决这个问题。然后，Egit 也会自动将目标 ref 设置为 master。我想这个命令告诉 git 创建主分支，而选择 HEAD 要么尝试创建一个名为 HEAD 的分支，要么尝试推送到当前（不存在的）远程 HEAD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-12T13:11:28.537

从 Source ref 列表中选择“master [branch]”项会将“refs/heads/master”插入到 Source ref 字段中。

前：

[![](../Images/771e48aaa14656fd0b11a5db4327160a.png)](https://i.stack.imgur.com/bpCQl.jpg)

后：

[![](../Images/6635579f4b800a6a26113c93a84b5b30.png)](https://i.stack.imgur.com/wjshS.jpg)

# python - 如何从 mkstemp() 获取文件对象？

> ID：11926855
> 
> 赞同：9
> 
> 时间：2012-08-13T00:11:30.217
> 
> 标签：python, file

我正在尝试将 mkstemp 与 Python 3 一起使用：

```
Python 3.2.3 (default, Jun 25 2012, 23:10:56) 
[GCC 4.7.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from tempfile import mkstemp
>>> mkstemp()
(3, '/tmp/tmp080316') 
```

根据[文档](http://docs.python.org/dev/library/tempfile.html?highlight=mkstemp#tempfile.mkstemp)，元组的第一个元素应该是文件句柄。事实上，它是一个int。如何获得正确的文件对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T00:14:53.663

在您的文档中，`mktemp`您可以看到一个如何使用`NamedTemporaryFile`您想要的方式的示例：[http ://docs.python.org/dev/library/tempfile.html?highlight=mkstemp#tempfile.mktemp](http://docs.python.org/dev/library/tempfile.html?highlight=mkstemp#tempfile.mktemp)

```
>>> f = NamedTemporaryFile(delete=False)
>>> f
<open file '<fdopen>', mode 'w+b' at 0x384698> 
```

这提供了与 mkstemp 相同的行为，但返回一个文件对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T00:43:14.323

`tempfile.NamedTemporaryFile`正如您在@tordek 的回答中看到的那样，我知道的最好的方法是使用。

但是如果你有一个来自底层操作系统的原始 FD，你可以这样做来把它变成一个文件对象：

```
f = open(fd, closefd=True) 
```

这适用于 Python 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:11:30.217

int 表示**操作系统级别的**文件句柄。我真正需要的是一个更高级的文件对象。要制作一个，请使用：

```
os_handle = mkstemp()
f = open(mkstemp()[0]) 
```

# asp-classic - 需要对象 - 尝试写入文件时

> ID：11926858
> 
> 赞同：0
> 
> 时间：2012-08-13T00:12:06.297
> 
> 标签：asp-classic

当以下代码运行时，我收到 Object Required 错误消息。可以帮忙吗，经典的 ASP 不是我的强项。

```
<%
Function WriteToFile(strFile, strContent)
    Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
    ' Second argument: 0 = reading, 1 = writing, 8 = appending
    ' Third argument: True = create file if it doesn't exist, false = dont
    Set objTextFile = objFSO.OpenTextFile(strFile, 8, True)
    objTextFile.Write strContent
    objTextFile.Close
    Set objTextFile = Nothing
    Set objFSO = Nothing
End Function

Call WriteDataToFile("test.txt", "test")
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:59:48.683

不确定您在哪一行收到错误，但请尝试使用 Server.MapPath()：

```
 Set objTextFile = objFSO.OpenTextFile(Server.MapPath(strFile), 8, True) 
```

以便应用程序知道在哪里创建/定位文件。

# regex - Perl 正则表达式/替换嵌套短语

> ID：11926860
> 
> 赞同：2
> 
> 时间：2012-08-13T00:12:19.297
> 
> 标签：regex, perl

我有一个 perl 脚本，它逐行处理文本文件并将这些行中的短语转换为链接（特别是在 mediawiki 标记中，但我怀疑任何标记都会有同样的问题）。当一个短语是另一个短语的子集时，我会陷入困境。在这些情况下，会创建太多链接。

例如，如果“General Committee”和“Annual General Committee Meeting”是短语中的两个：

> 总务委员会会议每月召开一次。

正确转换为：

> [[#GC|总务委员会]] 会议每月召开一次。

然而，

> 年度总务委员会会议将于 5 月举行。

被错误地转换为：

> [[#AGCM|年度[[#GC|总务委员会]]会议]]将于5月举行。

也就是说，我的脚本是在“年度总务委员会会议”中找到短语“总务委员会”，并在我不想要的地方插入一个链接。在这个例子中应该只有一个到 AGCM 的链接。

相关的perl代码是：

```
my($line) = $_;
foreach $phrase (keys(%phrases))  # the phrases to replace mapped to their links
{
    my($link) = $phrases{$phrase};
    if ($line =~ m/$phrase/)
    {
        $line =~ s/$phrase/[[#$link|$phrase]]/g;
    }
} 
```

当可以找到一个短语与另一个短语时如何避免匹配/替换的任何建议？

**更新：**基于一些问题的澄清：每个短语都是独立的；没有一个优先于另一个。以最长的时间超过最短的时间就足以得到我需要的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:44:05.147

您应该构建一个与一次比较中的任何哈希键匹配的正则表达式。

这个程序显示了这个想法。键按长度递减排序，以便首先找到最长的匹配项，然后与`|`替换字符连接作为分隔符。

然后只需找到所有出现的已构建模式并将其替换为相应的哈希元素值即可。这可以在一次替换中完成，而不需要循环。

请注意，您可能需要考虑插入 a`map`来`\s+`代替空格，并可能`\b`在字符串之前和之后放置以确保匹配的字符串不是较长单词的一部分。此外，`/i`正则表达式修饰符可能与允许与大小写无关的匹配有关。

```
use strict;
use warnings;

my %phrases = (
  'General Committee' => '[[#GC|General Committee]]',
  'Annual General Committee Meeting' => '[[#AGCM|Annual General Committee Meeting]]',
);

my $text = <<END;
The General Committee meeting shall meet once a month.
The Annual General Committee Meeting shall be held in May.
END

my $regex = join '|', sort { length $b <=> length $a } keys %phrases;

$text =~ s/($regex)/$phrases{$1}/g;

print $text, "\n"; 
```

**输出**

```
The [[#GC|General Committee]] meeting shall meet once a month.
The [[#AGCM|Annual General Committee Meeting]] shall be held in May. 
```

# objective-c - 为什么 initWithCoder 不能正确初始化项目？

> ID：11926862
> 
> 赞同：19
> 
> 时间：2012-08-13T00:13:01.353
> 
> 标签：objective-c, ios, xcode, uistoryboard, initwithcoder

我有一个`UITableViewCell`. 我的子类包含几个`UILabel`s。我希望我的子类将这些标签初始化为适用于我的每个表格视图单元格的一些默认设置。

我读到我应该`initWithCoder`为此使用。我的`initWithCoder`函数正在被调用，我可以单步执行函数中的每一行，它似乎正在执行动作。但是，当我运行我的应用程序时，我看不到任何正在应用的属性。最明显的是，字体没有改变。我只是认为我在`UILabel`s 上修改的任何属性实际上都没有被保存或显示。

我将此子类与`Storyboard`. 我知道我的更改不会反映在 上`Storyboard`，但是当应用程序运行时它们也不会反映 - 尽管我的代码正在执行。

编辑：我想提一下，在尝试覆盖之前`initWithCoder`，我在这些子类中有一个实例方法，我将在其中运行此逻辑。我只需在`cellForRowAtIndexPath`. 这个方法是有效的，但我认为让这个子类中的这个逻辑自动发生会很方便。

有任何想法吗？我的代码如下：

```
#import "ThreadListCell.h"

@implementation ThreadListCell

- (id)initWithCoder:(NSCoder *)aDecoder {

    if ((self = [super initWithCoder:aDecoder])) {

        // adjust the font settings of the title
        self.title.font = [UIFont fontWithName:@"SourceSansPro-Black" size:16];
        self.title.textColor = [UIColor colorWithWhite:0.267f alpha:1.0f];

        // adjust the font settings of the subtitle
        self.text.font = [UIFont fontWithName:@"SourceSansPro-Light" size:14];
        self.text.textColor = [UIColor colorWithWhite:0.267f alpha:0.9f];
        self.text.textColor = [UIColor colorWithRed:1 green:0 blue:0 alpha:1];

        // adjust the font settings of the location
        self.location.font = [UIFont fontWithName:@"SourceSansPro-Light" size:8];
        self.location.textColor = [UIColor colorWithWhite:0.267f alpha:0.9f];

        // adjust the UILabel settings of the title
        self.title.numberOfLines = 0;
        self.title.lineBreakMode = UILineBreakModeTailTruncation;

        // adjust the UILabel settings of the subtitle
        self.text.numberOfLines = 0;
        self.text.lineBreakMode = UILineBreakModeTailTruncation;

        // adjust the UILabel settings of the location
        self.location.numberOfLines = 0;
        self.location.lineBreakMode = UILineBreakModeTailTruncation;
        self.location.textAlignment = UITextAlignmentRight;

    }

    return self;

}

@end 
```

和标题：

```
#import <UIKit/UIKit.h>

@interface ThreadListCell : UITableViewCell

@property (nonatomic, weak) IBOutlet UILabel *text;
@property (nonatomic, weak) IBOutlet UILabel *title;
@property (nonatomic, weak) IBOutlet UILabel *location;

@end 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-13T00:20:12.663

当您收到消息时，您的任何 IBOutlets 都没有设置 - 您需要使用“awakeFromNib”或“viewDidLoad” - 类似的东西 - 来访问您的网点。也就是说，您可以在 initWithCoder 中设置其他非出口的东西。

# android - PreferenceActivity 中的弹出窗口和搜索栏

> ID：11926864
> 
> 赞同：2
> 
> 时间：2012-08-13T00:13:19.153
> 
> 标签：android, android-preferences

我见过一些应用程序在某些应用程序的设置中有弹出窗口（如果您在 Google Play 的设置中单击“*开源许可证”）和搜索栏（通常用于音量和字体大小）。*

这些是如何实施的？在 res/xml/pref.xml 文件中，我只能添加以下组件：

1.  复选框首选项
2.  编辑框首选项
3.  列表首选项
4.  铃声偏好
5.  AppWidgetProvider
6.  可搜索

它们似乎都没有弹出窗口或搜索栏。

我正在构建一个基于 API 10 btw 的应用程序。我尝试阅读指南和 api，但它们基于 api 16 并使用大量片段，这在 Honeycomb 之前的 API 上不可用。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:27:01.203

弹出窗口可以通过扩展[DialogPreference](http://developer.android.com/reference/android/preference/DialogPreference.html)来编码。创建一个自定义首选项，它将扩展 DialogPreference 以显示对话框。

对于 Seekbar 偏好，请查看此[stackoverflow](https://stackoverflow.com/questions/5050272/android-seekbarpreference)问题。我还没有尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T10:21:58.960

我`SeekBarPreference`自己根据Android的`EditTextPreference`实现实现了一个，会弹出一个对话框，里面包含一个`SeekBar`. 随意使用它。

[https://github.com/DreaminginCodeZH/SeekBarPreference](https://github.com/DreaminginCodeZH/SeekBarPreference)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T00:29:28.117

1) 制作你`Activity`的`PreferenceActivity`. （[PreferenceActivity 教程](http://developer.android.com/reference/android/preference/PreferenceActivity.html)）

2) 默认情况下，EditTextPreference 将显示为弹出对话框。

3)`SeekBar`用作弹出窗口时，我使用了第 3 方库 - [Aniqroid](http://code.google.com/p/aniqroid/)

另请参阅：设计屏幕的UX[指南。](http://developer.android.com/design/patterns/settings.html)`Settings`

快乐编码！

# c# - 为什么 .AsTableServiceQuery() 在 Azure 表存储中有 $top 时遵循继续令牌

> ID：11926869
> 
> 赞同：1
> 
> 时间：2012-08-13T00:14:31.400
> 
> 标签：c#, azure, azure-table-storage

我`.AsTableServiceQuery()`在 Azure 调用中使用来获取数据。

我也`$top`用来获取有限的数据，比如说 100

问题是，查询返回 100 个结果，它也会给出`x-ms-continuation-NextPartitionKey`令牌。同时`.AsTableServiceQuery()`不关心已经有 100 个结果并遵循继续令牌直到到达表的末尾。稍后会发生哪些大量数据和大量 HTTP 调用，超时。

有没有其他方法来处理带有`$top`过滤器的继续令牌

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:31:55.830

延续标记是典型的混淆来源。每当您发出 $filter 或 $top 时，最好期待延续令牌。$top 是对表格进行分页的另一种方式。使用 Linq Take(n) 后跟 .AsTableQuery() 可以按照您期望的方式工作。[Neil Mackenzie](http://convective.wordpress.com/2010/02/06/queries-in-azure-tables/)在他非常描述性的博客文章中给出了一个很好的示例。

```
CloudTableQuery<Song> cloudTableQuery =
(from entity in tableServiceContext.CreateQuery<Song>(“Songs”)
 select entity).Take(10).AsTableServiceQuery<Song>(); 
```

# ruby-on-rails - 多对多带属性

> ID：11926873
> 
> 赞同：0
> 
> 时间：2012-08-13T00:15:01.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好吧，问题是这样的。我有这张桌子。

项目, 人, person_item

然后我在模型和人的控制器中进行多对多关系，我使用 person.items.build 并在视图中使用 fields_for 我有 ALL 但在关系表中 person_item 是这样的

```
create_table "person_items", :force => true do |t|
t.integer  "person_id"
t.integer  "item_id"
t.integer  "num"
t.datetime "created_at"
t.datetime "updated_at"
end 
```

我不知道当关系的字段 person_id 和 item_id 填充时如何添加字段 cant 我如何为此查看视图？

人的部分看法

```
<div class="field">
<%= f.label :nom %><br />
<%= f.text_field :nom %>
</div>
----Items-----
<% f.fields_for :items do |builder|%>
<div class="field">
<%= f.label :nomItem %><br />
<%= f.text_field :nomItem %>
</div> 
```

我认为是这样的，但这填充了 2 行，一行有 num，全为空白，另一行没有 num。

```
<% f.fields_for :person_items do |pi|%>
<div class="field">
<%= pi.label :num %><br />
<%= pi.text_field :num %>
</div>
<%end%> #end of person_items
<%end%> #end of items 
```

# javascript - HTML 页面中的无效字符

> ID：11926878
> 
> 赞同：0
> 
> 时间：2012-08-13T00:15:53.437
> 
> 标签：javascript, php, invalid-characters

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:21:22.257

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:22:03.827

Sometimes characters such as `' " , . / \ ; : & % $ # @ *` (basically all symbols) and others are formatted differently if they are copied from another location. Go though and replace all punctuation and other symbols with themselves and those weird characters should go away.

# bash - 如何从标准输入读取数据并读取用户对每一行数据的响应

> ID：11926879
> 
> 赞同：3
> 
> 时间：2012-08-13T00:16:21.540
> 
> 标签：bash, stdin, interaction

使用 bash 我想读取行列表并询问用户脚本是否应在读取每一行时对其进行处理。由于行和用户的响应都来自标准输入，如何协调文件句柄？经过大量搜索和反复试验，我想出了这个例子

```
exec 4<&0
seq 1 10 | while read number
do
    read -u 4 -p "$number?" confirmation
    echo "$number $confirmation"
done 
```

在这里，我们使用 exec 重新打开文件句柄 4 上的标准输入，从管道标准输入中读取数字序列，并获取用户对文件句柄 4 的响应。这似乎工作量太大。这是解决这个问题的正确方法吗？如果没有，有什么更好的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:17:44.640

您可以强制`read`从终端获取其输入，而不是更抽象的标准输入：

```
while read number
do
    < /dev/tty read -p "$number?" confirmation
    echo "$number $confirmation"
done 
```

缺点是您不能自动接受（`yes`例如，通过从连接到的管道读取）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:01:20.973

是的，使用附加文件描述符是解决此问题的正确方法。管道只能将一个命令的标准输出（文件描述符 1）连接到另一个命令的标准输入（文件描述符 1）。因此，当您解析命令的输出时，如果您需要从其他来源获取输入，则必须通过文件名或文件描述符来给定其他来源。

我会写这个有点不同，使重定向本地到循环，但这没什么大不了的：

```
seq 1 10 | while read number
do
    read -u 4 -p "$number?" confirmation
    echo "$number $confirmation"
done 4<&0 
```

对于 bash 以外的 shell，在没有`-u`to 选项的情况下`read`，您可以使用重定向：

```
printf "%s? " "$number"; read confirmation <&4 
```

您可能对[使用文件描述符重新分配的其他示例](https://unix.stackexchange.com/questions/18899/when-would-you-use-an-additional-file-descriptor)感兴趣。

[正如chepner 所指出的，](https://stackoverflow.com/a/11935042)另一种方法是从命名文件中读取，即`/dev/tty`程序运行的终端。这使得脚本更简单，但缺点是您无法轻松地将确认数据提供给手动编写脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T01:11:18.757

对于您的应用程序，[killmatching](http://calliopesounds.blogspot.com/2012/08/a-less-violent-killmatching.html)，两次通过是完全正确的方法。

*   在第一遍中，您可以将所有匹配过程读入一个数组。这个数字会很小（通常几十个，最多几万个），所以不存在效率问题。代码看起来像

    ```
    set -A candidates
    ps | grep | while read thing do candidates+=("$thing"); done 
    ```

    （句法细节可能有误；我的 bash 生锈了。）

*   第二遍将遍历`candidates`数组并进行交互。

此外，如果它在您的平台上可用，您可能需要查看`pgrep`. 这并不理想，但它可能会为您节省一些分叉，这比世界上所有的数组查找成本都要高。

# c - scanf动态分配

> ID：11926883
> 
> 赞同：10
> 
> 时间：2012-08-13T00:16:47.140
> 
> 标签：c, string, dynamic, input

无论出于何种原因，以下代码都会打印（null）：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char *foo; 
    scanf("%ms", &foo);
    printf("%s", foo);
    free(foo);
} 
```

我正在尝试为字符串动态分配内存，但正如我之前所说，我的程序只是输出（null）。我通过使用 getche 和 realloc 创建一个函数来解决这个问题，但这似乎几乎毫无意义，因为我还必须编写如果用户输入退格、制表符等会发生什么。但正如我所说，这只是一项工作周围，​​我宁愿知道为什么上面的代码不起作用......

附加信息：

我正在使用 Pelles C IDE v7.00 并使用 C11 标准进行编译

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T01:08:40.880

我在[C11 标准草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)`%m`的第 7.21.6.2节（关于 的部分）中没有看到。我建议你避免它并像在 C99 中那样调用它。`fscanf``malloc()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:06:31.177

%m 是一个 POSIX 扩展，这可能是它在 Pelles C 中不可用的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-14T22:23:36.377

在 scanf/sscanf 的手册页中有一个示例（第 3 页，第 270-290 行），说明如下：

> 例子
> 
> 要使用动态分配转换说明符，请将 m 指定为长度修饰符（因此为 %ms 或 %m[range]）。调用者必须释放（3）返回的字符串，如下例所示：
> 
> ```
> char *p;
> int n;
> 
> errno = 0;
> n = scanf("%m[a-z]", &p);
> if (n == 1) {
>    printf("read: %s\n", p);
>    free(p);
> } else if (errno != 0) {
>    perror("scanf");
> } else {
>    fprintf(stderr, "No matching characters\n");
> } 
> ```
> 
> 如上例所示，只有在 scanf() 调用成功读取字符串时，才需要调用 free(3)。

来源：SCANF(3) - Linux 程序员手册 - GNU - 2013-01-30

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T14:02:17.090

我正在使用 Linux 3.2.0 amd 64 和**gcc 4.7.2**。使用代码：

```
char *s; 
scanf("%ms", &s);
printf("%s", s);
free(s); 
```

工作正常，但它不会接受空格。

对于静态分配，您可以改为使用：

```
char s[100];
printf("Enter string (max 99 characters): ");
scanf("%100[^\n]s", &s);
printf("You entered: %s\n", s); 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-24T10:17:34.367

正如[Arun](https://stackoverflow.com/users/3616293/arun)所说，这个解决方案是正确的，而[Meninx](https://stackoverflow.com/users/4392605/meninx)的观点是错误的：

```
char *s;
scanf("%ms", &s);
printf("%s", s);
free(s); 
```

我读过'man scanf'，它说：

可选的“m”字符。这与字符串转换（%s、%c、%[）一起使用，
并且使调用者无需分配相应的缓冲区来保存输入：相反，scanf() 分配了一个足够大小的缓冲区，并分配了地址这个buffer对应的**指针** 参数，应该是**一个char*变量的指针**（这个变量在调用前不需要初始化）。当不再需要此缓冲区时，调用者应随后释放（3）此缓冲区。

# android - 如何通过加速度计确定方向？

> ID：11926884
> 
> 赞同：0
> 
> 时间：2012-08-13T00:17:11.943
> 
> 标签：android, accelerometer

我正在使用 Processing for Android，我的应用程序几乎完成了。但是，Processing for Android 不适应我想要实现的手机方向。它读取加速度计值，我已经能够通过这个简单的算法大致确定方向：

```
 if (y > 7)
  {
    o = UPRIGHT;
  }
  else if (y < -7)
  {
    o = UPSIDEDOWN;
  }      
  else if (x > 7)
  {
    o = TURNLEFT;
  }
  else
  {
    o = TURNRIGHT;
  } 
```

它并非完美无缺，所以我想知道是否有更好的解决方案。有没有办法轮询 Android 以了解当前的手机 UI 方向？是否有比 7 更稳定的值（我是随意选择的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:30:45.967

通过监视方向上的以下配置更改`AndroidManifest.xml`，例如，假设调用了活动`myActivity`，则以下内容就足够了：

```
<activity android:name=".myActivity" 
    android:configChanges="orientation" 
    android:label="MyActivity" /> 
```

从`myActivity`课堂上，用这个来处理它：

```
@Override
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);
    switch(newConfig.orientation){
    case Configuration.ORIENTATION_UNDEFINED:
        Log.v(TAG, "[onConfigurationChanged] - Undefined");
        break;
    case Configuration.ORIENTATION_SQUARE:
        Log.v(TAG, "[onConfigurationChanged] - Square");
        break;
    case Configuration.ORIENTATION_PORTRAIT:
        Log.v(TAG, "[onConfigurationChanged] - Portrait");
        break;
    case Configuration.ORIENTATION_LANDSCAPE:
        Log.v(TAG, "[onConfigurationChanged] - Landscape");
        break;
    }
} 
```

# mysql - MySQL IF 函数 - WHERE 'field1 > 0' ？'字段2 <字段1'：''

> ID：11926886
> 
> 赞同：0
> 
> 时间：2012-08-13T00:17:15.037
> 
> 标签：mysql

我需要帮助将其翻译成 MySQL 语句。我需要做类似的事情：

```
WHERE IF 'field1 > 0' THEN 'field2 < field1' 
```

现在，我有这个 MySQL 语句，但不起作用？：

```
SELECT * FROM `my_table` WHERE IF(field1>0, field2<field1, 1=1) AND field3='1'; 
```

请为此提供解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:25:24.643

你只想检查`field2 < field1`if `field1 > 0`，所以这样编码：

```
SELECT * FROM `my_table`
WHERE ((field1 > 0 AND field2 < field1) OR field1 <= 0)
AND field3 = '1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:25:26.767

您应该使用 case 语句：

```
SELECT * FROM `my_table` 
WHERE 
  field2< CASE WHEN (field1>0) THEN field1 ELSE field2+1 END 
  AND field3='1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:25:57.517

您可以通过使用逻辑 AND 和 OR 来实现这一点。

```
WHERE (field1 > 0 AND field2 < field1) OR (field1 <= 0 AND <else part of the statement>) 
```

The`<else part of the statement>`是您要检查 if `field1`is not的条件`> 0`，除非没有这样的子句，在这种情况下，删除 OR 及其后面的所有内容。

# vhdl - VHDL 错误 - 标识符类型不一致

> ID：11926887
> 
> 赞同：1
> 
> 时间：2012-08-13T00:17:15.580
> 
> 标签：vhdl

我是 VHDL 新手，当我尝试编译代码时出现此错误：

错误 (10476)：adder42.vhd(23) 处的 VHDL 错误：标识符“Cout”的类型与其作为 std_logic_vector 类型的用法不一致

我不太确定要在这里更改什么，反正我们已经得到了几乎所有的代码，所以我不确定我是否在按照说明操作时犯了错​​误，或者我们的代码有问题'已被给予。

这是来源：

```
LIBRARY ieee;
USE ieee.std_logic_1164.all;

LIBRARY work;
USE work.fulladd_package.all;

ENTITY adder42 IS
    PORT( SW    : IN    STD_LOGIC_VECTOR(8 DOWNTO 0);
          LEDG  : OUT   STD_LOGIC_VECTOR(3 DOWNTO 0);
          LEDR  : OUT   STD_LOGIC_VECTOR(1 DOWNTO 0));
END adder42;

ARCHITECTURE Structure OF adder42 IS
    SIGNAL c    : STD_LOGIC_VECTOR(1 TO 3);
    SIGNAL x, y : STD_LOGIC_VECTOR(3 DOWNTO 0);
    SIGNAL s    : STD_LOGIC_VECTOR(3 DOWNTO 0);
    SIGNAL Cin, Cout: STD_LOGIC;
BEGIN
    Cin <= SW(8);
    x <= SW(3 DOWNTO 0);
    y <= SW(7 DOWNTO 4);
    LEDG <= s;
    LEDR <= Cout;

    stage0: fulladd PORT MAP( Cin, x(0), y(0), s(0), c(1));
    stage1: fulladd PORT MAP( c(1), x(1), y(1), s(1), c(2));
    stage2: fulladd PORT MAP( c(2), x(2), y(2), s(2), c(3));
    stage3: fulladd PORT MAP( c(3), x(3), y(3), s(3), Cout);
END Structure; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:32:28.913

正如斯塔克在评论中所说，您将 a 分配`STD_LOGIC`给 a `STD_LOGIC_VECTOR`。

你可以这样做：

```
LEDR <= Cout & Cout 
```

但这一切都取决于你想要什么。

# opengl - 墙壁纹理的程序生成，划分一对三角形（递归？）

> ID：11926890
> 
> 赞同：1
> 
> 时间：2012-08-13T00:17:24.927
> 
> 标签：opengl, recursion

如果我制作一个非常简单的游戏，将玩家置于由两个三角形组成的方形墙壁的隧道中（我有），墙壁看起来有点无聊，甚至在某些角度会迷失方向。我正在考虑获取定义方形面板的数据，并通过在随机扰动 Z 值以获得墙壁深度之前进一步细分每个三角形来生成更有趣的纹理。

这两个三角形看起来像：

```
typedef struct {
    float Position[3];
    float Color[4];
    float TexCoord[2];
    float Normal[3];
} Vertex;

const Vertex Vertices[] = {
    // Front
    {{0, 0, 0}, {1, 0, 0, 1}, {1, 0}, {0, 0, 1}},
    {{1, 0, 0}, {1, 0, 0, 1}, {1, 1}, {0, 0, 1}},
    {{1, 1, 0}, {1, 0, 0, 1}, {0, 1}, {0, 0, 1}},
    {{0, 1, 0}, {1, 0, 0, 1}, {0, 0}, {0, 0, 1}}
}; 
```

这个正方形被转换成任何必要的位置来制作墙壁、地板、天花板。

我可以在墙上贴上纹理，但是从侧面（扫射）看墙壁时，它显然是完全平坦的。现代硬件有三角形要燃烧，所以这就是我沿着这些思路思考的原因。

看起来像是递归算法的工作。但是有一个问题，当涉及到角落时，Z 值都必须回到零，否则面板将无法以 3D 平铺，玩家将看到不应出现的角落间隙。简单地将边缘 Z 值排除在随机过程之外可能看起来不太好 - 除非所有 Z 值仅由正值更改，可能会产生粗糙的石块效果？知道哪个面朝前显然很重要，因此这似乎是一种可行的解决方案。

你有没有做过这种程序生成，如果有的话，你是如何在墙壁上实现深度的，你是如何处理面板连接的？

# java - 用另一个字符串替换一个字符串的子字符串

> ID：11926892
> 
> 赞同：2
> 
> 时间：2012-08-13T00:18:00.413
> 
> 标签：java, string, tokenize

我有一个字符串

```
String str = (a AND b) OR (c AND d) 
```

我在下面的代码的帮助下进行标记

```
String delims = "AND|OR|NOT|[!&|()]+"; // Regular expression syntax
String newstr = str.replaceAll(delims, " ");
String[] tokens = newstr.trim().split("[ ]+"); 
```

并在下面获取 String[]

```
[a, b, c, d] 
```

对数组的每个元素我添加“=1”所以它变成

```
[a=1, b=1, c=1, d=1] 
```

现在我需要将这些值替换为初始字符串

```
(a=1 AND b=1) OR (c=1 AND d=1) 
```

有人可以帮助或指导我吗？初始 String str 是任意的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:36:19.207

鉴于：

```
String str = (a AND b) OR (c AND d);
String[] tokened = [a, b, c, d]
String[] edited = [a=1, b=1, c=1, d=1] 
```

简单地：

```
for (int i=0; i<tokened.length; i++)
    str.replaceAll(tokened[i], edited[i]); 
```

**编辑：**

```
String addstr = "=1";
String str = "(a AND b) OR (c AND d) ";
String delims = "AND|OR|NOT|[!&|() ]+"; // Regular expression syntax
String[] tokens = str.trim().split( delims );
String[] delimiters = str.trim().split( "[a-z]+"); //remove all lower case (these are the characters you wish to edit)

String newstr = "";
for (int i = 0; i < delimiters.length-1; i++)
    newstr += delimiters[i] + tokens[i] + addstr;
newstr += delimiters[delimiters.length-1]; 
```

好的，现在解释：

```
tokens = [a, b, c, d]
delimiters = [ "(" , " AND " , ") OR (" , " AND " , ") " ] 
```

当遍历分隔符时，我们采用“(”+“a”+“=1”。

从那里我们有**"(a=1"** += " AND " + "b" + "=1"。

然后：**“（a=1 AND b=1”** +=“）或（”+“c”+“=1”。

再次：**“(a=1 AND b=1) OR (c=1"** += " AND " + "d" + "=1"

最后（在`for`循环外）：**“(a=1 AND b=1) OR (c=1 AND d=1"** += ")"

我们有：**“(a=1 AND b=1) OR (c=1 AND d=1)”**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:20:37.783

这个答案基于[@Michael 的想法](https://stackoverflow.com/a/11926984/1393766)（对他来说是 BIG +1）搜索仅包含小写字符的单词并添加`=1`到它们:)

```
String addstr = "=1";
String str = "(a AND b) OR (c AND d) ";

StringBuffer sb = new StringBuffer();

Pattern pattern = Pattern.compile("[a-z]+");
Matcher m = pattern.matcher(str);
while (m.find()) {
    m.appendReplacement(sb, m.group() + addstr);
}
m.appendTail(sb);
System.out.println(sb); 
```

输出

> (a=1 AND b=1) 或 (c=1 AND d=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T00:29:06.303

str 允许多长时间？如果答案是“相对较短”，您可以简单地对数组中的每个元素执行“全部替换”。这显然不是对性能最友好的解决方案，因此如果性能是一个问题，则需要不同的解决方案。

# android - 解析 XML 时出错：字符串文件中的格式不正确

> ID：11926898
> 
> 赞同：0
> 
> 时间：2012-08-13T00:19:02.807
> 
> 标签：android, eclipse, string

```
?xml version="1.0" encoding="utf-8"?>
<resources>

<string name="hello">Hello World, AvanosActivity!</string>
<string name="app_name">Avanos</string>
<string name="textView1">Who would you like to call?</string>
<string name="password">Enter Password</string>
<string name="callButton2">Call</string>
<string name="phoneNumber">Phone Number</string>
<string name="EnterButton">Enter</string>
<string name="ChangePasswordButton">Change Password</string>
<string name="CurrentPassword">Enter Current Password:</string>
<string name="NewPassword">Enter New Password:</string>
<string name="settings">Settings</string>
<string name="EnterButton2">Enter</string>
<color name="Black">#000000</color>
<item format="string" name="root" type="id">1</item> 
```

在我的应用程序中，我添加了一个名为“ChangePasswordButton”的新按钮。根据 Eclipse，我在添加这个字符串元素时犯了一个错误。这是以前从未发生过的。一切似乎都井井有条，但由于某种原因它无法正常工作。是不是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:23:52.430

第一个字符应该是 '<'

```
<?xml version="1.0" encoding="utf-8"?> 
```

# javascript - Internet Explorer 忽略 JS 文件中的所有“0”字符

> ID：11926899
> 
> 赞同：2
> 
> 时间：2012-08-13T00:19:11.307
> 
> 标签：javascript, internet-explorer, gwt, character-encoding, iso-8859-1

这是我几个月来一直在处理的一个问题，我非常感谢任何帮助。

我正在编码一个字符串并使用下面的函数将输出写入 MyFile.js。在调试我的示例时，`char encodedCode[]`显示为整数具有`length 12`以下值：`97,0,108,101,114,116,40,34,80,114,0,105`.

正如我从 Notepad++ 中看到的那样，MyFile.js 是正确生成的，具有预期的大小和字符。

**MyFileServlet.java**

```
public void doPost(HttpServletRequest req, HttpServletResponse res)
throws ServletException, IOException
{
    res.setCharacterEncoding("iso-8859-1");
    res.setHeader("Content-Type", "text/javascript;charset=iso-8859-1");
    res.setHeader("Content-Disposition","attachment;filename=MyFile.js");
    PrintWriter printer=res.getWriter();
    char encodedCode[]=encode(req.getParameter("originalScript"));
    printer.write(encodedCode);
    printer.close();
} 
```

但是，当我尝试使用来自 MyFile.html 的一些调试代码（见下文）运行 MyFile.js 时，我会根据浏览器获得不同的行为：

*   **Chrome/Firefox：** `length 12`价值观`97,0,108,101,114,116,40,34,80,114,0,105`
*   **Internet Explorer 9：** `length 10`值`97,108,101,114,116,40,34,80,114,105`

所以**IE 忽略了所有的“0”字符**。为什么？非常感谢你

JSFIDDLE：http: [//jsfiddle.net/vnqL2/](http://jsfiddle.net/vnqL2/)

**编辑：**我尝试将这些字节写入外部二进制文件 MyFile.xxx 并从 Javascript/JQuery/Ajax/XMLHttpRequest 读取它们，但我仍然遇到与 IE 相同的问题。

**我的文件.html**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>My Page</title>
</head>
<body>
<script type="text/javascript" charset="iso-8859-1" src="MyFile.js">
</script>
</body>
</html> 
```

**我的文件.js**

```
function d(a)
{
  a=(a+"").split("");
  var l=a.length,x=[l];
  alert(l);
  for(i=0;i<l;i++){
    x[i]=a[i].charCodeAt(0);
    document.write(x[i]);
  }
};
d("HERE GO THOSE BYTES HARDCODED"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:15:48.603

我不知道你的目的是什么，但字符串中的 NULL 字节是不合法的。

另一方面，您可以通过将字节作为逗号分隔的整数列表传输来轻松地重建字节数组（整数）。或者另一种方法是 json 文件。示例代码：

```
function d(a)
{
  a=(a+"").split(",");
  var l=a.length,x=[l];
  alert(l);
  for(i=0;i<l;i++){
    x[i]=Number(a[i]);
    document.write(x[i]);
    document.write("<br>");
  }
  return x;
};
var ar = d("97,0,108,101,114,116,40,34,80,114,0,105"); // returns the byte array, length=12 
```

[在这里测试](http://jsfiddle.net/vnqL2/1/)

# c - C 中的模块化编程（嵌套头文件）

> ID：11926905
> 
> 赞同：1
> 
> 时间：2012-08-13T00:21:55.457
> 
> 标签：c, header

我正在创建一个应该模拟 MIPS 管道的大型程序。我正在尝试尽可能地模块化我的代码以使事情变得简单，但是我在编译时遇到了麻烦。

目前我的程序包含以下文件：

*   pipe.c --- 包含主要
*   IF.h
*   ID.h
*   EX.h
*   内存.h
*   WB.h

*   global.h --- 包含全局#define 函数

*   reg.h
*   算法
*   控制.h
*   dMem.h
*   fBuffer.h
*   解析器.h
*   二进制文件

我是 C 编程新手，但我已经在每个头文件中使用 #ifndef、#define、#endif 来保护自己免受多重包含的影响。我的问题是，当我编译时，我收到错误声明：“以前的隐式声明......”

许多头文件被多个文件使用，所以我不确定这是否是问题所在。有什么我想念的大事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:28:34.313

隐*式*声明意味着有一些东西*没有*在头文件中声明（相反，编译器只是找到了函数）。*先前*的隐式声明意味着它在假定“原始”函数的隐式声明*之后*（或者，我猜，正如 Doug 在评论中建议的另一个同名函数）之后遇到声明。

发生这种情况的方式有很多种：

*   也许您没有在关联文件中包含标题。所以`IF.c`不包括`IF.h`。编译器将读取`IF.c`并创建隐式定义。`IF.h`稍后，当它在其他地方读取时，它会给出这个错误。

*   也许您在不包含相关标题的文件中使用了一个函数。所以也许`IF.h`定义了`myfunction()`，但你使用`myfunction()`in`dMem.c`并且不包括`IF.h`在那里。所以编译器在看到 in when 包含在定义之前看到*使用*`myfunction()`in 。`dMem.c``IF.h``IF.c`

*   根本没有头文件，你可以用相互递归的函数来得到它。请参阅[如何在 C 中对函数进行排序？“函数的先前隐式声明在这里”错误](https://stackoverflow.com/questions/4387845/how-to-sort-functions-in-c-previous-implicit-declaration-of-a-function-was-her)

*   正如 Doug 建议的那样，您定义了两个具有相同名称的函数（并且在标题中没有定义）。

基本上，在某个地方，不知何故，编译器在到达带有相关声明的标头之前到达了一个函数。当它确实找到标题时，它意识到事情搞砸了并产生了错误。

（标题错误的一个经典来源是将“ifdefs”从一个文件剪切+粘贴到另一个文件并忘记更改名称......）

[再次阅读您的问题，我假设您只列出了头文件。但现在我看到这就是你拥有的*所有*文件。为什么你的头文件比源文件多得多？通常每个源文件都与一个或两个包含它定义的函数的声明的头文件相关联（尽管它可能会导入它需要支持的其他函数）。这与您的编译器错误无关，但听起来您可能需要拆分源代码。它还表明要么我误解了你，要么你误解了标题通常是如何使用的。]

# php - 使用 php 获取所选选项的文本

> ID：11926906
> 
> 赞同：5
> 
> 时间：2012-08-13T00:22:01.590
> 
> 标签：php, javascript, html

在下面的：

```
<form  action="test.php"  method="POST">  
    <select id="test" name="test">
     <option value="1">Test One</option>
     <option value="2">Test Two</option>
    </select>
</form> 
```

在 test.php 中，我可以得到 1 或 2，如下所示：

```
$result=$_POST['test']; 
```

如何使用 php 获取所选选项的文本（即“测试一”或“测试二”）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-13T00:23:02.443

这不是仅通过 PHP 就可以完成的。PHP 脚本只能“看到”发布的信息（`value`针对发布的`selected`选项）。`input`您可以使用 javascript 使用selected 的文本内容更改隐藏字段`option`，这将包含在`$_POST`数组中：

```
<form  action="test.php"  method="POST">  
    <select id="test" onchange="document.getElementById('text_content').value=this.options[this.selectedIndex].text">
     <option value="1">Test One</option>
     <option value="2">Test Two</option>
    </select>

<input type="hidden" name="test_text" id="text_content" value="" />
</form> 
```

这将使`$_POST['test_text']`所选索引可用（但您还应该`onchange()`在页面加载时强制使用该功能，以便即使用户将选择字段保留为默认值，它也会被填充。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-13T00:32:51.707

只有`value`表单控件的 才会发送到服务器。发送两者的简单方法是将两者都*包含*在`value`：

```
<select name="test">
    <option value="1|Test one">Test one</option>
    <option value="2|Test two">Test two</option>
</select> 
```

进而：

```
$test = explode('|', $_POST['test']); 
```

然后你最终会`$test[0]`成为“1”和`$test[1]`“Test one”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T00:23:14.160

你不能；该信息不会发送回服务器。您首先需要查看如何生成 HTML 并从那里获取文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T00:23:11.117

它没有被发送，因此获取它的唯一方法是在 PHP 代码中将值映射到标题的数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-14T20:47:46.050

这是我可以使用的解决方案，除非我已经有 onChange 调用函数来根据语句中选择的建筑类型显示隐藏块。

我有需要用户选择的建筑类型。几种建筑类型有一组独特的问题，例如银行分行、数据中心、法庭等。但也有许多具有相同的一组问题，我称之为“其他类型”。每个选项都有其关联的值，例如银行分行的值为“Bank_Branch”，数据中心的值为“Data_Center”，但其他类型的值为“Other_Type”。“Other_Type”的文本因建筑类型而异，例如会议中心、博物馆、表演艺术等。所以我需要值“Other_Type”来“显示”“Other_Type”DIV 块中的问题，同时使用文本在电子邮件中发送标识建筑物类型的价值，例如会议中心、博物馆、表演艺术等。

有什么方法可以使用 PHP 来获取所选项目的文本值？我已经在 HTML 中使用了以下内容

```
 var sele = document.getElementById('building_type');
   var seleVal = sele.options[sele.selectedIndex].value;
   var seleTxt = sele.options[sele.selectedIndex].text;
   document.getElementById("other_text").innerHTML = seleTxt; 
```

我没有看到这样做的方法。

已解决：我可以简单地创建隐藏的 div，并在检查其他类型时为隐藏的 div 设置 innerHTML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T00:24:04.877

所选选项的文本未通过 HTML 表单传递。如果您想要文本，则必须将其存储在页面上的隐藏 HTML 输入中，或者您需要在 PHP 代码中添加一些业务逻辑以将值`ìd`转换为文本（通过 switch 语句，或通过查询数据库等）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T00:25:28.083

不幸的是，当您提交表单和变量时，它只需要一个参数，即它的值。你需要创造价值。测试一个值，以便将其传递给 PHP 脚本。value="1" 的目的是什么，因为您可能可以在不同的属性中使用它？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-01T15:57:47.800

我不是经验丰富的 php 程序员，但你可以使用 php 检查 SELECT 标记中选择的值。我不知道为什么人们说你不能。

```
if ( $_POST['test'] == 1) 
{ do something } 
else 
{ option value 2 is selected, do something else } 
```

我相信这会奏效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-01T16:03:55.357

如果不需要 1、2，请尝试一下。您将获得所需的文本作为值

```
<form  action="test.php"  method="POST">  
    <select id="test" name="test">
     <option value="Test One">Test One</option>
     <option value="Test Two">Test Two</option>
    </select>
</form> 
```

# http - 如何响应 HTTP OPTIONS 请求？

> ID：11926908
> 
> 赞同：94
> 
> 时间：2012-08-13T00:22:17.613
> 
> 标签：http

HTTP`OPTIONS`方法据说用于确定服务器在给定资源上支持哪些其他方法。鉴于此，我有两个问题：

*   这个反应是什么样子的？我已经在`Public`、`Allow`甚至`Access-Control-Allow-Methods`标题中看到了带有 CSV 列表的示例。他们都需要吗？有什么不同？ [RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-9.2)在这里似乎不是很有帮助。

*   使用它来列出资源在非 REST-API 环境中支持的操作是否合适？例如，如果我`ConversionController`支持 action `convert`，那么这样的响应是否有意义：

要求：

```
OPTIONS /conversion HTTP/1.1 
```

回复：

```
HTTP/1.1 200 OK
...
Allow: CONVERT
... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-13T07:59:49.267

RFC 2616 定义了“允许”（[http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.14.7](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.14.7)）。“公共”不再使用。“Access-Control-Allow-Methods”在 CORS 规范中定义（参见[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-05-04T05:37:00.410

## 什么是 HTTP OPTIONS 请求？

客户端请求知道服务器将允许哪些 HTTP 方法，例如`GET`,`POST`等。

**要求**

当询问特定资源的选项时，请求可能如下所示：

```
OPTIONS /index.html HTTP/1.1 
```

或者在询问一般服务器时这样：

```
OPTIONS * HTTP/1.1 
```

**回复**

响应将包含`Allow`带有允许方法的标头：

```
Allow: OPTIONS, GET, HEAD, POST 
```

## 为什么服务器会收到 HTTP OPTIONS 请求？

*   一些 REST API 需要它（但如果您正在定义 API，您就会知道）
*   浏览器将其作为“预检”请求发送到服务器，以查看服务器是否理解[CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)
*   攻击者发送它以获取有关 API 的更多信息

## 如何响应 HTTP OPTIONS 请求？

*   您可以使用标题进行响应，`Allowed`甚至可以在正文中[记录您的 API](http://zacstewart.com/2012/04/14/http-options-method.html)。
*   您可以使用额外的 CORS 定义的`Access-Control-Request-*`标头进行响应。
*   `405 Method Not Allowed`你可以用或回应`501 Not Implemented`。

## 如何停止接收 HTTP OPTIONS 请求？

*   如果它来自浏览器，则更新您的 API，使其不会做任何“危险”的事情（例如`PUT`or `DELETE`，或`POST`with `application/json`）。只执行[简单的请求](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Simple_requests)。

## 也可以看看

*   [RFC 2616 第 9 节：方法定义](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)
*   [MDN 网络文档：选项](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS)
*   [MDN Web 文档：跨域资源共享 (CORS)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)
*   [CORS - 引入预检请求的动机是什么？](https://stackoverflow.com/questions/15381105/cors-what-is-the-motivation-behind-introducing-preflight-requests)
*   [如何利用 HTTP 方法](https://security.stackexchange.com/questions/21413/how-to-exploit-http-methods)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-21T06:08:31.540

回应标题：“如何响应 HTTP OPTIONS 请求？” 要回答这个问题，我想知道您为什么要响应 OPTIONS 请求？谁/什么向您发送了 OPTIONS 请求，为什么？ [许多公共服务器以某种形式的“错误”或“不允许”](http://zacstewart.com/2012/04/14/http-options-method.html)（500、501、405）响应。因此，除非您在特定情况下，您的客户将合理地发送 OPTIONS 请求并期望返回有用/有意义的信息（例如，WebDAV、CORS），否则您可能希望回复：“不要那样做”。

关于您关于“OPTIONS /conversion HTTP/1.1”请求的问题：除非您知道您的服务器有某个客户端，否则客户端会将 OPTIONS 请求发送到“/conversion”并期望得到“允许：转换”的响应” 答案是否定的：这样回应是没有意义的。我认为大多数支持 OPTIONS 并以“允许”响应的实现*都*以标准 HTTP 方法响应。

[这是一篇关于该主题的精彩文章](https://www.mnot.net/blog/2012/10/29/NO_OPTIONS)。

摘要： OPTIONS 会立即出现问题，因为它不支持缓存。替代方案：服务器范围的元数据：尝试[众所周知的 URI 的](https://www.rfc-editor.org/rfc/rfc5785). 特定于资源：尝试在其响应中使用[Link 标头](https://www.rfc-editor.org/rfc/rfc5988)，或该资源的表示格式的链接。

最后，如果您要的是服务描述，请查看[WADL](http://en.wikipedia.org/wiki/Web_Application_Description_Language)或[RSDL](http://en.wikipedia.org/wiki/RSDL)。

编辑：

dotnetguy 在下面的评论中提出了一个很好的观点： OPTIONS 在某些情况下无疑是有价值的（例如，CORS）；我当然不是有意提出其他建议。

# php - 从 HTML 内容中提取 MEDIA 标签

> ID：11926909
> 
> 赞同：-3
> 
> 时间：2012-08-13T00:22:28.517
> 
> 标签：php, html, curl

我`CURL`用来从一些网页中获取内容。我需要从内容中提取媒体标签。

有没有可用的图书馆？或者任何关于制作它的想法都会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:25:35.733

这会有帮助吗？

```
function file_get_contents_curl($url)
{
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

$html = file_get_contents_curl("http://example.com/");

//parsing begins here:
$doc = new DOMDocument();
@$doc->loadHTML($html);
$nodes = $doc->getElementsByTagName('title');

//get and display what you need:
$title = $nodes->item(0)->nodeValue;

$metas = $doc->getElementsByTagName('meta');

for ($i = 0; $i < $metas->length; $i++)
{
    $meta = $metas->item($i);
    if($meta->getAttribute('name') == 'description')
        $description = $meta->getAttribute('content');
    if($meta->getAttribute('name') == 'keywords')
        $keywords = $meta->getAttribute('content');
}

echo "Title: $title". '<br/><br/>';
echo "Description: $description". '<br/><br/>';
echo "Keywords: $keywords"; 
```

或者，如果您需要保存图像..

```
$remote_img = 'http://www.example.com/images/image.jpg ';
$img = imagecreatefromjpeg($remote_img);
$path = 'images/';
imagejpeg($img, $path);

function save_image($img,$fullpath){
    $ch = curl_init ($img);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $rawdata=curl_exec($ch);
    curl_close ($ch);
    if(file_exists($fullpath)){
        unlink($fullpath);
    }
    $fp = fopen($fullpath,'x');
    fwrite($fp, $rawdata);
    fclose($fp); 
} 
```

# hibernate - JPA/Hibernate - 如何从没有引用要级联到的实体中级联删除？

> ID：11926912
> 
> 赞同：0
> 
> 时间：2012-08-13T00:22:57.077
> 
> 标签：hibernate, jpa

我将 JPA 与 Hibernate 一起使用。

我有一个用户类和一个标志类：

```
class User
{
    // ...
}

class Flag
{
    @OneToOne(optional=false)
    private User user;

} 
```

我不想/不需要引用 User 类中的 Flag 对象（这是重点）。但是当我删除一个用户时，*我希望关联的标志（如果有的话）也被删除*，没有任何***外键约束失败***异常！

我知道我可以在用户内部添加对标志的引用，例如：

```
class User
{
    @OneToOne(optional=true, cascade=CascadeType.ALL, mappedBy="user")
    @org.hibernate.annotations.Cascade(value=org.hibernate.annotations.CascadeType.DELETE_ORPHAN)
    private Flag flag;
} 
```

然后，当我删除用户时，Flag 对象将被删除。

但是是否可以级联删除标志*而不*在用户中引用它？

如果没有，如果删除这样一个对象的正确方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:24:36.650

在这种情况下，您不能自动级联删除，您需要实现自己的删除。

删除用户时，首先运行如下查询：

```
delete from Flag F where F.userId = :userId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:39:35.777

你没有说你使用的是哪个数据库，所以我假设它是 MySQL。

这些是我们的桌子。*请注意user_id*和*user_flag_id*之间的一对一映射以及*on delete cascade on update cascade*子句。

```
CREATE TABLE `user` (
  `user_id` int(11) NOT NULL DEFAULT '0',
  `user_name` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB;

CREATE TABLE `user_flag` (
  `user_flag_id` int(11) NOT NULL DEFAULT '0',
  `user_flag_name` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`user_flag_id`),
  CONSTRAINT `fk_user_id` FOREIGN KEY (`user_flag_id`) REFERENCES `user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

鉴于这些，您可以创建如下映射。

```
@Entity(name = "user")
@Table(schema = "test", name = "user")
public final class User {

  @Id
  @Column(name = "user_id")
  public int id;

  @Basic
  @Column(name = "user_name")
  public String name;
}

@Entity(name = "user_flag")
@Table(schema = "test", name = "user_flag")
public final class UserFlag {

  @Id
  @Column(name = "user_flag_id")
  public int id;

  @Basic
  @Column(name = "user_flag_name")
  public String name;

  @OneToOne
  @JoinColumn(name = "user_flag_id", referencedColumnName = "user_id")
  public User user;
} 
```

假设我们有以下数据。

```
+---------+-----------+
| user_id | user_name |
+---------+-----------+
|       1 | Joe       |
|       2 | Jane      |
|       3 | Jacob     |
+---------+-----------+

+--------------+----------------+
| user_flag_id | user_flag_name |
+--------------+----------------+
|            1 | Joe's flag     |
|            3 | Jacob's flag   |
+--------------+----------------+ 
```

下面的代码将证明，如果你删除一个用户，它的关联标志将被删除（但不是相反）。

```
@Test
public void test() {
  EntityManagerFactory emf = Persistence.createEntityManagerFactory("test");
  EntityManager em = emf.createEntityManager();
  EntityTransaction et = em.getTransaction();

  // prints out our three users, Joe, Jane and Jacob
  for (User u : em.createQuery(String.format("select u from %s u", User.class.getName()), User.class)
      .getResultList())
    System.out.format("User{id=%s, name=%s}\n", u.id, u.name);

  // prints out Joe's and Jacob's flags
  for (UserFlag uf : em.createQuery(String.format("select uf from %s uf", UserFlag.class.getName()), UserFlag.class)
      .getResultList())
    System.out.format("UserFlag{id=%s, name=%s}\n", uf.id, uf.name);

  et.begin();
  User jacob = em.find(User.class, 3);
  em.remove(jacob);
  et.commit();

  // prints out our remaining users, Joe and Jane
  for (User u : em.createQuery(String.format("select u from %s u", User.class.getName()), User.class)
      .getResultList())
    System.out.format("User{id=%s, name=%s}\n", u.id, u.name);

  // prints out Joe's flag
  for (UserFlag uf : em.createQuery(String.format("select uf from %s uf", UserFlag.class.getName()), UserFlag.class)
      .getResultList())
    System.out.format("UserFlag{id=%s, name=%s}\n", uf.id, uf.name);

  em.close();
  emf.close();
} 
```

此示例假设您选择的引擎是 InnoDB。但是，如果您想使用 MyISAM，您可以使用 triggers[模拟*on update cascade on delete cascade*子句](http://dev.mysql.com/tech-resources/articles/mysql-enforcing-foreign-keys.html)。

# c - 在 Windows 中临时捕获控制台应用程序的标准输出

> ID：11926917
> 
> 赞同：1
> 
> 时间：2012-08-13T00:23:38.747
> 
> 标签：c, winapi

是否可以（如果可以，如何？`stdout`）临时重定向（以及可选的 stderr）到文件，然后恢复原始文件`stdout`？

在 POSIX 环境中，我使用`dup`and`dup2`来存储和替换`STDOUT_FILENO`. `freopen`不是一个好的解决方案，因为`stdout`无法以这种方式恢复。

是否可以使用 Windows API 执行此操作？我相信可以使用类似 POSIX 的函数`_DUP`和`_DUP2`. 有没有不涉及他们的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:54:26.780

看看[SetStdHandle](http://msdn.microsoft.com/en-us/library/ms686244%28VS.85%29.aspx) Win32 API。此外，[_dup 和 _dup2](http://msdn.microsoft.com/en-us/library/8syseb29.aspx)可用。

**编辑**

请参阅以下 StackOverflow 帖子。

[将标准输出重定向到编辑控件 (Win32)](https://stackoverflow.com/questions/1692987/redirect-stdout-to-an-edit-control-win32)

[实际示例使用 dup 或 dup2](https://stackoverflow.com/questions/1720535/practical-examples-use-dup-or-dup2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:43:56.943

在 Windows 上，保留文件名“CON”表示控制台输出流。要在 Windows 上恢复正常的 STDOUT 行为，您需要做的就是调用

```
freopen("CON","w",stdout); 
```

# java - 如何使用java在空单元格上写入？

> ID：11926920
> 
> 赞同：2
> 
> 时间：2012-08-13T00:24:09.327
> 
> 标签：java, excel, report, apache-poi

我目前正在用 Java 编写一个程序，该程序将在 excel 中运行多个测试并立即生成报告。我能够通过 excel 进行读写，**通过**或**失败**的结果显示在结果列中。我能够在 excel 中编写这些，但是通过在单元格上提供**默认**值（例如默认值），因此代码只会覆盖它。我想在评论栏写评论，但我不知道如何在**空**单元格中写。这是我正在生成的报告的屏幕截图（可用图像的链接）以及用于在 excel 中读取和写入的代码。

```
FileInputStream fileInputStream = new FileInputStream("ReportExcel.xls");
HSSFWorkbook workbook = new HSSFWorkbook(fileInputStream);
HSSFSheet worksheet = workbook.getSheetAt(0);   

fileInput csvInputFile = new fileInput();
String[] sReturnValue = csvInputFile.arrayReturnSingleValue("fileInput.csv");
if (prodnameresult.equals(prodname) ){
    Pass++;
    totalResult++;
    System.out.println ("Testcase1: Branding-Customised Product Name is PASSED");
    //Harold's Input    
        HSSFRow row = worksheet.getRow(1);
        HSSFCell cell = row.getCell((short) 4);
        cell.setCellValue("Passed");
    } 
else{
    Fail++;
    totalResult++;
    System.out.println("Testcase1: Branding-Customised Product Name is FAILED");
    //assertEquals(prodnameresult.equals(prodname), true);
    //Harold's Input
         HSSFRow row = worksheet.getRow(1);
         HSSFCell cell = row.getCell((short) 4);
         cell.setCellValue("Failed");
    }

//Harold's Input
    FileOutputStream os = new FileOutputStream("ReportExcel.xls");
    workbook.write(os);
    os.close();
} 
```

报告：

[http://i47.tinypic.com/2s1lsfc.png](http://i47.tinypic.com/2s1lsfc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:28:12.060

我无权访问该报告，但要回答您的问题，如果您的单元格为**空**，您应该创建它而不是按以下方式获取它：

```
HSSFCell cell = row.getCell((short) 4);
if(cell == null)
   cell = row.createCell((short) 4);
cell.setCellValue("Passed"); 
```

如果样式与行不同，您可能应该将样式重新应用于单元格。

# php - 如何将传递的文本区域分成数组？

> ID：11926923
> 
> 赞同：0
> 
> 时间：2012-08-13T00:25:19.457
> 
> 标签：php, html, arrays

我有一个单词的文本区域，由传递给我的 PHP 页面的行分隔，我想将单词分隔成一个数组，然后在新行上打印每个单词。

我该怎么做呢？下面的代码对吗？它似乎不起作用！

```
<?php
    $words = $_POST["words"];
    $arr = explode("\n",$words);
?> 
```

# meteor - 其他人可以覆盖我的 myapp.meteor.com 部署吗？

> ID：11926933
> 
> 赞同：5
> 
> 时间：2012-08-13T00:26:46.923
> 
> 标签：meteor

将 meteorjs 应用程序部署到他们的服务器时，例如 james.meteor.com，其他人可以将他们的应用程序部署到同一个地址并覆盖我的项目吗？还是会提示他们输入密码？

如果确实提示他们输入密码，我可以在哪里为我自己的应用程序设置密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T02:13:41.590

你要

```
meteor deploy --password james.meteor.com 
```

# sql - 删除重复最简单的方法/解释

> ID：11926935
> 
> 赞同：0
> 
> 时间：2012-08-13T00:27:09.903
> 
> 标签：sql, sql-server-2008

首先，我想说的是，我（作为新手）确实搜索了几个关于表格中重复项的问答，但不幸的是，我无法操纵用作答案的代码。

我的表是由在 SQL Server 2008 中排序的报表组成的。

我想知道如何删除重复记录并附上解释。

```
"MyTable":

Column1   (PK-auto incremental table's record ID) 
Column2   (some TXT) 
Column3   (Some TXT)
Column4   (SmallDateTime)
Column5   is empty 
```

Column5 将保存的值`SUM(count of deleted duplicates including this survived row)`

在可能的情况下，解决方案的关键是如果`[column2 and column3]`有多个具有相同内容的记录（因此重复），但它们并不总是共享相同的日期（`column4`）。

由此：

```
col1  col2   col3  col4         col5
----  -----  ----  -----------  ----
1     [abc]  [4]   [10/1/2012]  null
2     [abc]  [1]   [12/1/2012]  null
3     [ghi]  [6]   [4/1/2012]   null
4     [def]  [5]   [8/1/2012]   null
5     [abc]  [4]   [10/1/2012]  null
6     [def]  [5]   [12/1/2012]  null
7     [ghi]  [6]   [15/1/2012]  null
8     [abc]  [4]   [17/1/2012]  null
9     [ghi]  [6]   [6/1/2012]   null
10    [abc]  [1]   [13/1/2012]  null 
```

进入这个：

```
col1  col2   col3  col4         col5
----  -----  ----  -----------  ----
8     [abc]  [4]   [17/1/2012]  2
10    [abc]  [1]   [13/1/2012]  3
6     [def]  [5]   [12/1/2012]  2
7     [ghi]  [6]   [15/1/2012]  3 
```

意思是保留最新的 (1) 作为每个重复记录的表示。

++重新编辑++

Aaron Bertrand shawnt00 e2nburner... 和你们其他人我不能说我多么感谢你的回复，尽管我还没有理解那大量的代码。我现在要检查这些代码，但不是 b4，谢谢你们！

当我第一次开始编程并需要 sql 查询时，使用后

```
Select * From MyTable 
```

...我的第一个 SQL 语句 ...

我说嘿，我知道 SQL ！！！....现在...看看你们对你们的深入了解...非常感谢我知道 StackOverFlow 中的这篇文章对其他初学者也将进一步有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:52:20.740

此答案使用[通用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.100%29.aspx)将[row_number()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)和 count() 应用于数据的每个“切片”（意思是按 col2 + col3 分组）。count() 用于识别每个这样的组有多少行，row_number() 用于应用由 col4 desc 排序的“排名”（1 = 每组最新，2 = 第二个最新等）。这也使用 col1 （看起来像一个独特的列）来打破任何关系。CTE 后面可以跟一个查询，例如选择、更新、删除等。因此您可以运行第一个选择来验证这些是您想要保留的行，并且计数是否正确。如果是，那么您可以继续进行更新和删除。您会注意到，在所有情况下，row_number() 输出都用于标识您保留的行或丢弃的行。

要确定要保留的行：

```
;WITH n AS 
(
  SELECT col1, col2, col3, col4, 
    c = COUNT(*) OVER (PARTITION BY col2, col3),
    rn = ROW_NUMBER() OVER 
    (
      PARTITION BY col2, col3 ORDER BY col4 DESC, col1 DESC
    )
  FROM dbo.table_name
)
SELECT col1, col2, col3, col4, c
  FROM n WHERE rn = 1; 
```

一旦你确认这些是你想要保留的行，你可以像这样更新它们：

```
;WITH n AS 
(
  SELECT col1, col2, col3, col4, col5, 
    c = COUNT(*) OVER (PARTITION BY col2, col3),
    rn = ROW_NUMBER() OVER 
    (
      PARTITION BY col2, col3 ORDER BY col4 DESC, col1 DESC
    )
  FROM dbo.table_name
)
UPDATE n SET col5 = c
  WHERE rn = 1; 
```

然后以这种方式删除剩余部分：

```
;WITH n AS 
(
  SELECT col1, col2, col3, col4, 
    rn = ROW_NUMBER() OVER 
    (
      PARTITION BY col2, col3 ORDER BY col4 DESC, col1 DESC
    )
  FROM dbo.table_name
)
DELETE n WHERE rn > 1; 
```

或者更简单（假设 col5 在更新之前完全为空）：

```
DELETE dbo.table_name WHERE col5 IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:45:26.720

这是一种简单化的方法。你可能会发现`merge`更好。这些版本保留最高 col1 值并修改 maxdate 列。Aaron's 保留具有 maxdate 的行。我怀疑这是一个重要但应该注意的区别。

```
update MyTable
set col4 = (
    select max(col4)
    from MyTable as m2
    where m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
),  col5 = (
    select count(*)
    from MyTable as m2
    where m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
)
where not exists (
    select *
    from MyTable as m2
    where
        m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
        and m2.col1 > MyTable.col1
        and m2.col4 > MyTable.col4 or m2.col4 = MyTable.col4 and m2.col1 > MyTable.col1
);

delete from MyTable
where exists (
    select *
    from MyTable as m2
    where
        m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
        and m2.col1 > MyTable.col1
); 
```

**编辑 2**这是我的`merge`查询

```
merge MyTable as target
using (
    select max(col1), col2, col3, max(col4), count(*)
    from Mytable
    group by col2, col3
) as source(id, col2, col3, maxdate, rowcount)
on (
        target.col1 = source.col1
    and target.col2 = target.col2
    and target.col3 = target.col3
)
when matched then
    update set col4 = maxdate, col5 = rowcount
when not matched then delete 
```

**编辑 3**保留原始 maxdate 的行，打破 col1 的关系

```
-- option #1
update MyTable
set col5 = (
    select count(*)
    from MyTable as m2
    where m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
)
where not exists (
    select *
    from MyTable as m2
    where
        m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
        and m2.col4 > MyTable.col4 or m2.col4 = MyTable.col4 and m2.col1 > MyTable.col1
);

delete from MyTable
where exists (
    select *
    from MyTable as m2
    where
        m2.col2 = MyTable.col2 and m2.col3 = MyTable.col3
        and m2.col4 > MyTable.col4 or m2.col4 = MyTable.col4 and m2.col1 > MyTable.col1
);

-- option #2
merge MyTable as target
using (
    select max(col1), col2, col3, max(col4), count(*)
    from Mytable
    group by col2, col3
) as source(maxid, col2, col3, maxdate, rowcount)
on (
        target.col2 = target.col2
    and target.col3 = target.col3
    and target.col1 = maxid
    and target.col4 = maxdate
)
when matched then
    update set col5 = rowcount
when not matched then delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:53:16.683

```
WITH a AS (
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY colum2 ORDER BY colum3 desc) RowNum
    FROM    mytable
)
-- deleted rows will be:

delete from mytable
where [yourID] in

(SELECT [yourID]

FROM    a
WHERE   a.RowNum <> 1 ) 
```

# javascript - 如何在 JavaScript 中为自定义对象创建属性？

> ID：11926939
> 
> 赞同：1
> 
> 时间：2012-08-13T00:27:27.123
> 
> 标签：javascript

我知道我可以为自定义对象创建函数，例如

```
var newObj = {
    myFunc1: function () {
        alert('hello');
    },
 myFunc2: function () {
        alert('hello');
    }
} 
```

现在如何创建一个新属性，以便我可以在 myFunc1 或 myFunc2 中设置该属性，然后通过 newObj.myProperty 使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:32:35.090

```
var newObj = {
    myFunc1: function () {
        this.greeting = "hello";
    },
    myFunc2: function () {
        alert(this.greeting);
    }
};

newObj.myFunc1(); // set the property on newObj
newObj.myFunc2(); // alert the property on newObj

alert(newObj.greeting); // access it directly from the object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:35:56.243

您不必为对象显式定义新属性。只需`this.yourNewProperty = "blabla"`在您的函数内部使用。但是，在对象描述的开头显式定义它是一种很好的做法，例如`yourNewProperty: "",`（使用您需要插入“”的任何虚拟值），因为它确实提高了代码的可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T00:37:56.663

对象上的函数可以通过`this`关键字访问其其他属性。

```
var newObj = {
                foo : 'Hello There',
                displayValue: function() { alert(this.foo); },
                changeValue: function() { this.foo = 'Goodbye world'; }
             }

newObj.displayValue();
newObj.changeValue();
newObj.displayValue(); 
```

这将显示“Hello There”，然后显示“Goodbye world”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T00:33:58.320

如果我对这篇文章的理解正确，那么您可以这样做：

```
var newObj = {
    propertyHere: "Here's a property.", // custom property
    myFunc1: function () {
        newObj.propertyHere = "Here's a changed property."; // set property
    },
    myFunc2: function () {
        alert(newObj.propertyHere); // get property
    }
} 
```

# objective-c - iOS App 在退出时崩溃

> ID：11926942
> 
> 赞同：3
> 
> 时间：2012-08-13T00:28:24.727
> 
> 标签：objective-c, memory-management, exc-bad-access, destructor, objective-c++

我遇到了一个问题，即我的 iOS 应用程序在退出时崩溃，我已将其范围缩小到：

```
// File.h

struct Name {
    NSString *name;
}

// File.mm

Name names[] = {
    @"foo",
    @"bar",
}; 
```

当应用程序退出（按下 iPad 上的主页按钮）时，我遇到了`objc_msgSend`一个`EXC_BAD_ACCESS (SIGSEGV)`. 它正在发生析构函数`Name::~Name()`。

```
0   libobjc.A.dylib         0x37586e3a objc_release + 10
1   MyApp                   0x0014abfc Name::~Name() (NameManager.h:21)
2   MyApp                   0x0014ab42 Name::~Name() (NameManager.h:21)
3   MyApp                   0x0014ad94 __cxx_global_array_dtor + 120
4  libsystem_c.dylib        0x36bba1cc __cxa_finalize + 216
5  libsystem_c.dylib        0x36b854f6 exit + 6 
```

请记住，这是在一个 .mm 文件中，因此它被编译为 obj-c++。

这已经好几个月了。我不知道它是什么时候开始发生的，但我怀疑是我更新到 xcode 4.4 的时候。

`NSString`文字应该受到保护（或一直受到保护）免受多个版本的影响，但我认为无论如何这里都不会发生这种情况。

有谁知道 xcode 4.4 中是否发生了一些变化？

我可以通过执行以下操作来修复崩溃：

```
struct Name {
    __unsafe_unretained NSString *name;
} 
```

但我讨厌在不理解为什么以前有效的方法不再有效的情况下这样做。或者也许它永远不应该奏效。我也担心内存被覆盖，所以这可能只是一个症状。

这发生在 DEBUG 和 RELEASE 中。

更新：我在 ~Name() 中放置了一个断点并验证内存没有损坏。LLDB 能够转储 NSString OK。但是当我踩到它时它崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T16:34:41.240

当您在 Objective-C++ 中声明一个包含启用了 ARC 的 Objective-C 对象的“普通旧数据”`struct`时，编译器有义务提供一个析构函数来正确释放结构的 ObjC 成员，即使您自己没有编写它们.

> 此限制不适用于 Objective-C++。但是，非平凡的所有权限定类型被认为是非 POD：在 C++11 术语中，它们不是平凡的默认可构造、可复制构造、可移动构造、可复制分配、可移动分配或可破坏的。使用 ARC 之外的类违反 C++ 的单一定义规则，在 ARC 下，该类将具有非平凡的所有权限定成员。

当您声明 Name 结构时，编译器会为您编写一个包含隐式强持有的 Objective-C 对象的析构函数。在执行时，这意味着 C++ 析构函数会擦除它所期望的 C++ 结构，而是结束指向字符串的指针。在没有有效指针的情况下，`-release`ARC 在尝试取消引用不存在的接收器时会尝试发送段错误。

当您声明一个 Objective-C 成员`__unsafe_unretained`时，它告诉 ARC 将其从必须编写的析构函数中排除，因此该结构只是被销毁，并且`-release`永远不会发送。建议您将结构或类中的所有 Objective-C 对象标记为`__unsafe_unretained`并自己提供适当的内存管理，因为 ARC 会使跨语言的对象生命周期显着复杂化。

# sql - 需要帮助使用 IF 语句过滤 PL/SQL 中的用户输入

> ID：11926943
> 
> 赞同：0
> 
> 时间：2012-08-13T00:28:31.233
> 
> 标签：sql, oracle, plsql

我正在做一个 PL/SQL 脚本，它会从用户那里获取输入，然后它会通过 if 语句找出它是否必须将数据添加到 1 个或 2 个表中。我正在使用 IF 语句和 WHILE 循环来完成此任务，但它无法正常工作。此脚本也是[主菜单](https://stackoverflow.com/questions/11869559/how-to-make-a-menu-in-sqlplus-or-pl-sql)的一部分。任何输入表示赞赏。

```
-- q3.sql
-- Question name goes here!!

VARIABLE g_options VARCHAR2(1000);

PROMPT 'Vehicle Inventory Record'
ACCEPT p_Options PROMPT 'Does this car has any Optional Equipment or Accessories?(YES    or NO)';
-- Option table
ACCEPT p_OCode PROMPT 'Enter the code for the option picked (Ex. CD2):'
ACCEPT p_ODescription PROMPT 'Enter the description for the option picked:'
ACCEPT p_OPrice PROMPT 'Enter the price for the option picked:'
-- Car table
ACCEPT p_SerialNo PROMPT 'What is the serial number of the car?'
ACCEPT p_Make PROMPT 'What is the make of the car?'
ACCEPT p_Model PROMPT 'What is the model of the car?'
ACCEPT p_Year PROMPT 'What is the color of the car?'
ACCEPT p_Trim PROMPT 'What is the trim of the car?'
ACCEPT p_PurchFrom PROMPT 'Where was the car purchased from?'
ACCEPT p_PurchInvNo PROMPT 'What was the invoice number of the purcahse?'
ACCEPT p_PurchDate PROMPT 'When was the car purcahsed?(ex. 13-FEB-06)'
ACCEPT p_PurchCost PROMPT 'How much did he car cost?'
ACCEPT p_ListPrice PROMPT 'What was the list price of the car?'

DECLARE
  n_numb number := 1;

BEGIN
  --WHILE  n_numb < 2 LOOP

  IF '&p_Options' = 'YES' THEN
  :g_options := 'Input will be added into the option table AND car table';
  -- Insert statement goes here
  n_numb := 2;

  ELSIF '&p_Options' = 'NO' THEN
  :g_options := 'Input will only be added to the car table';
  -- Insert statement goes here
  n_numb := 2;

  ELSE 
  :g_options := ' The correct input for the first prompt was "YES" or "NO", you entered something else'
  --:g_options :=  :g_options || ' The script will now end, please run it again'
  n_numb := 0;

  END IF;
  --END LOOP;
END;
/ 
```

我注释掉了循环和 n_numb 变量，我得到了这个错误：

```
END IF;
  *
ERROR at line 22:
ORA-06550: line 22, column 7:
PLS-00103: Encountered the symbol "END" when expecting one of the following:
. ( * @ % & = - + ; < / > at in is mod remainder not rem
<an exponent (**)> <> or != or ~= >= <= <> and or like
between || multiset member SUBMULTISET_
The symbol ";" was substituted for "END" to continue. 
```

**更新 1：**我在语句末尾添加了分号，但随后出现错误，提示必须声明 p_Options。我只是将 p_Options 更改为“&p_Options”，它说脚本运行成功，但我没有看不到任何输出。比如：**'脚本现在结束，请再次运行'**。

**这就是我所看到的！**

```
old   7:       IF '&p_Options' = 'YES' THEN
new   7:       IF '' = 'YES' THEN
old  12:       ELSIF '&p_Options' = 'NO' THEN
new  12:       ELSIF '' = 'NO' THEN

PL/SQL procedure successfully completed. 
```

**更新 2：**我让 if 语句起作用。但是，如果我输入 YES 或 NO 以外的其他内容作为输入，则循环将不起作用。我基本上没有回报，我可以一直按回车。:S

**------------在不同的音符上----------**

如何提取用户输入的信息并使用 INSERT 语句将其添加到表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:20:50.650

稍微修改了您的脚本并添加了一些调试。它似乎按原样工作：

```
SET VERIFY OFF
SET FEED OFF
SET SERVEROUTPUT ON
SET SERVEROUTPUT ON
VARIABLE g_options VARCHAR2(1000);
PROMPT 'Vehicle Inventory Record'
ACCEPT p_Options PROMPT 'Does this car has any Optional Equipment or Accessories?(YES or NO): ';
/*
-- Option table
ACCEPT p_OCode PROMPT 'Enter the code for the option picked (Ex. CD2):'
ACCEPT p_ODescription PROMPT 'Enter the description for the option picked:'
ACCEPT p_OPrice PROMPT 'Enter the price for the option picked:'
-- Car table
ACCEPT p_SerialNo PROMPT 'What is the serial number of the car?'
ACCEPT p_Make PROMPT 'What is the make of the car?'
ACCEPT p_Model PROMPT 'What is the model of the car?'
ACCEPT p_Year PROMPT 'What is the color of the car?'
ACCEPT p_Trim PROMPT 'What is the trim of the car?'
ACCEPT p_PurchFrom PROMPT 'Where was the car purchased from?'
ACCEPT p_PurchInvNo PROMPT 'What was the invoice number of the purcahse?'
ACCEPT p_PurchDate PROMPT 'When was the car purcahsed?(ex. 13-FEB-06)'
ACCEPT p_PurchCost PROMPT 'How much did he car cost?'
ACCEPT p_ListPrice PROMPT 'What was the list price of the car?'
*/

DECLARE
  n_numb number := 1;

BEGIN
  --WHILE  n_numb < 2 LOOP
  IF '&p_Options' = 'YES' THEN
  :g_options := 'Input will be added into the option table AND car table';
  -- Insert statement goes here
  dbms_output.put_line('insert with YES');
  n_numb := 2;

  ELSIF '&p_Options' = 'NO' THEN
  :g_options := 'Input will only be added to the car table';
  -- Insert statement goes here
  dbms_output.put_line('insert with NO');
  n_numb := 2;

  ELSE
  :g_options := ' The correct input for the first prompt was "YES" or "NO", you entered something else';
  --:g_options :=  :g_options || ' The script will now end, please run it again'
  dbms_output.put_line('ELSE');
  n_numb := 0;

  END IF;
  --END LOOP;
END; 
```

如果您还有其他问题，请使用更多详细信息更新您的问题。

# c# - 自定义 Treeview 用户控件 MVVM 双击冒泡事件 WPF

> ID：11926954
> 
> 赞同：2
> 
> 时间：2012-08-13T00:29:32.497
> 
> 标签：c#, .net, wpf, wpf-controls

我正在尝试制作自定义 TreeView 并使其成为用户控件。当我将用户控件包装在另一个窗口中时，我试图在主窗口中获取 TreeView 项目双击事件。

```
<Window xmlns:avalondock="http://avalondock.codeplex.com"     x:Class="WellsVisualizationWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:well="clr-namespace:VisualizationWPF.ViewModel.ViewUserControl"
    Title="e-IFD" Height="408" Width="558" WindowState="Maximized"
    >
 <Grid MinWidth="100" **TreeViewItem.MouseLeftButtonClick=<EventHandler>**>   <-- Trying to override but failed :p                                        
     <local:CustomTreeView />
 </Grid> 
```

我试图从 CustomTreeView 项中双击冒泡鼠标并在用户控件外部的网格包装器中拦截事件。我试图添加 TreeViewItem。TreeViewItem.MouseLeftButtonDown="Grid_MouseLeftButtonDown 并且失败了。有什么想法可以解决我的问题吗？

这是我的树视图自定义用户控件代码

```
<UserControl x:Class="WellsVisualizationWPF.ViewModel.ViewUserControl.WellsTreeView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"           
         xmlns:local="clr-namespace:VisualizationWPF.ViewModel"           
         >
<Grid MinWidth="100">
    <Grid.RowDefinitions>
        <RowDefinition MaxHeight="500" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="1">
        <TextBlock TextWrapping="Wrap" FontSize="12">
        Text1
        </TextBlock>
        <Button Height="24" Content="Add New" Name="btn_add" Click="btn_add_Click" />
    </StackPanel>
    <ScrollViewer>
        <DockPanel>
            <TreeView  Grid.Row="0" ItemsSource="{Binding Data}">
                <TreeView.Resources>
                    <HierarchicalDataTemplate
                    DataType="{x:Type local:MainViewModel}"
                    ItemsSource="{Binding Children}"
                    >
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Name}" />
                        </StackPanel>
                    </HierarchicalDataTemplate>
                    <DataTemplate DataType="{x:Type local:ParamsViewModel}">
                        <TextBlock Text="{Binding Name}" />                            
                    </DataTemplate>
                </TreeView.Resources>                       
            </TreeView>
        </DockPanel>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:13:00.707

您根本不需要在用户控件之外发布双击事件。您需要将一些[`InputBinding`](http://msdn.microsoft.com/en-us/library/system.windows.input.inputbinding.aspx)（[`MouseBinding`](http://msdn.microsoft.com/en-us/library/system.windows.input.mousebinding.aspx)在这种特殊情况下）添加[`InputBindings`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.inputbindings.aspx)到[`TreeView.SelectedItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview.selecteditem.aspx).

问题是您不能以正常、明显的方式执行此操作 - 设置`InputBindings`via `TreeView.ItemContainerStyle`，因为`InputBindings`collection 是只读的。悲伤，但真实。

好消息是您可以使用附加属性来完成此操作。样品：

查看模型。
a) 这将在树视图中显示为项目：

```
public class Node : ViewModelBase
{
    public String Text
    {
        get { return text; }
        set
        {
            if (text != value)
            {
                text = value;
                OnPropertyChanged("Text");
            }
        }
    }
    private String text;

    public ObservableCollection<Node> Nodes { get; set; }
} 
```

b）这是“主”视图模型：

```
public class ViewModel : ViewModelBase
{
    public ViewModel()
    {
        this.selectedNodeDoubleClickedCommand = new RelayCommand<Node>(node => 
        {
            Debug.WriteLine(String.Format("{0} clicked!", node.Text));
        });
    }

    public ObservableCollection<Node> Nodes { get; set; }

    public RelayCommand<Node> SelectedNodeDoubleClickedCommand
    {
        get { return selectedNodeDoubleClickedCommand; }
    }
    private readonly RelayCommand<Node> selectedNodeDoubleClickedCommand;
} 
```

用户控制代码隐藏。基本思想 - 我们添加一个附加属性来设置输入绑定，尽管它在 XAML 中，另一个 - 允许外部世界绑定命令，当输入绑定触发时：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public ICommand SelectedItemDoubleClickedCommand
    {
        get { return (ICommand)GetValue(SelectedItemDoubleClickedCommandProperty); }
        set { SetValue(SelectedItemDoubleClickedCommandProperty, value); }
    }

    public static readonly DependencyProperty SelectedItemDoubleClickedCommandProperty = DependencyProperty.Register(
        "SelectedItemDoubleClickedCommand", typeof(ICommand), 
        typeof(UserControl1), 
        new UIPropertyMetadata(null));

    public static ICommand GetSelectedItemDoubleClickedCommandAttached(DependencyObject obj)
    {
        return (ICommand)obj.GetValue(SelectedItemDoubleClickedCommandAttachedProperty);
    }

    public static void SetSelectedItemDoubleClickedCommandAttached(DependencyObject obj, ICommand value)
    {
        obj.SetValue(SelectedItemDoubleClickedCommandAttachedProperty, value);
    }

    public static readonly DependencyProperty SelectedItemDoubleClickedCommandAttachedProperty = DependencyProperty.RegisterAttached(
        "SelectedItemDoubleClickedCommandAttached", 
        typeof(ICommand), typeof(UserControl1), 
        new UIPropertyMetadata(null, SelectedItemDoubleClickedCommandAttachedChanged));

    private static void SelectedItemDoubleClickedCommandAttachedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var item = d as TreeViewItem;
        if (item != null)
        {
            if (e.NewValue != null)
            {
                var binding = new MouseBinding((ICommand)e.NewValue, new MouseGesture(MouseAction.LeftDoubleClick));

                BindingOperations.SetBinding(binding, InputBinding.CommandParameterProperty, new Binding("SelectedItem")
                {
                    RelativeSource = new RelativeSource(RelativeSourceMode.FindAncestor, typeof(TreeView), 1)
                });

                item.InputBindings.Add(binding);
            }
        }
    }
} 
```

用户控制 XAML：

```
<Grid>
    <TreeView ItemsSource="{Binding Nodes}">
        <TreeView.Resources>
            <HierarchicalDataTemplate ItemsSource="{Binding Nodes}" DataType="{x:Type local:Node}">
                <TextBlock Text="{Binding Text}"/>
            </HierarchicalDataTemplate>
        </TreeView.Resources>
        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="local:UserControl1.SelectedItemDoubleClickedCommandAttached" 
                        Value="{Binding SelectedItemDoubleClickedCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" />
            </Style>
        </TreeView.ItemContainerStyle>

    </TreeView>
</Grid> 
```

主窗口 XAML：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication2"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <local:UserControl1 SelectedItemDoubleClickedCommand="{Binding SelectedNodeDoubleClickedCommand}"/>
    </Grid>
</Window> 
```

主窗口代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel
        {
            Nodes = new ObservableCollection<Node>
            {
                new Node
                {
                    Text = "Parent 1",
                    Nodes = new ObservableCollection<Node>
                    {
                        new Node { Text = "Child 1.1"},
                        new Node { Text = "Child 1.2"},
                    }
                },
                new Node
                {
                    Text = "Parent 2",
                    Nodes = new ObservableCollection<Node>
                    {
                        new Node { Text = "Child 2.1"},
                        new Node { Text = "Child 2.2"},
                    }
                },
            }
        };
    }
} 
```

# zend-framework - Zend Framework：删除验证器消息

> ID：11926961
> 
> 赞同：0
> 
> 时间：2012-08-13T00:31:23.953
> 
> 标签：zend-framework

> **可能重复：**
> [Zend 表单验证](https://stackoverflow.com/questions/1707002/zend-form-validation)

那是我的文件格式：

```
$file = new Zend_Form_Element_File('file', array(
                'required' => true,
                'MaxFileSize' => 4194304,
                'validators' => array(
                    array('Count', false, 1),
                    array('Size', false, 4194304),
                    array('Extension', false, 'gif,jpg,png'),
                    array('ImageSize', false, array('minwidth' => 40,
                            'minheight' => 40,
                            'maxwidth' => 90,
                            'maxheight' => 90))))); 
```

如何删除验证器消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:03:35.087

每个验证器的最后一个参数可以是一个数组。可以传递的参数之一是“消息”，它是一个表示每个错误的验证器特定常量数组，以及错误消息的字符串。您可以通过查看验证器类（例如 Zend/Validate/File/ImageSize.php）来获取错误代码列表。在您的情况下，这些将是：

```
$file = new Zend_Form_Element_File('file', array(
                'required' => false, //we will add this as a custom validator so we can over-ride the error message
                'MaxFileSize' => 4194304,
                'validators' => array(
                    array('NotEmpty', true, array('messages' => array('isEmpty' => "Your error message here")))
                    array('Count', false, array(count => 1, 'messages' => array('fileCountTooFew' => "Too few files, minimum '%min%' are expected but '%count%' are given", 'fileCountTooMany' => "Too many files, maximum '%max%' are allowed but '%count%' are given"))),
                    array('Size', false, array('size' => 4194304, 'messages'=> array('fileSizeTooBig' => "", 'fileSizeTooSmall' => "", 'fileSizeNotFound' => ""))),
                    array('Extension', false, array('extension' => 'gif,jpg,png', 'messages' => array('fileExtensionFalse' => "", 'fileExtensionNotFound' => ""))),
                    array('ImageSize', false, array('minwidth' => 40,
                            'minheight' => 40,
                            'maxwidth' => 90,
                            'maxheight' => 90,
                            'messages' => array(
                                'fileImageSizeWidthTooBig'   => "Maximum allowed width for image '%value%' should be '%maxwidth%' but '%width%' detected",
                                'fileImageSizeWidthTooSmall'  => "Minimum expected width for image '%value%' should be '%minwidth%' but '%width%' detected",
                                'fileImageSizeHeightTooBig'   => "Maximum allowed height for image '%value%' should be '%maxheight%' but '%height%' detected",
                                'fileImageSizeHeightTooSmall' => "Minimum expected height for image '%value%' should be '%minheight%' but '%height%' detected",
                                'fileImageSizeNotDetected'     => "The size of image '%value%' could not be detected",
                                'fileImageSizeNotReadable'     => "File '%value%' can not be read",
                            )
                        )
                    )
                )
            )
        ); 
```

# c# - 有效区分文件路径和 URI / URL

> ID：11926962
> 
> 赞同：1
> 
> 时间：2012-08-13T00:31:28.413
> 
> 标签：c#, url, path

我有一个非常简单的文件传输应用程序 (C# .NET)，它允许用户将文件从一个文件位置移动到本地文件系统上的另一个位置，或者将文件移动到 SFTP 位置。

文件操作由一个简单的 XML 文件定义，该文件标识每个复制活动的源和目标，有效字符串可以是本地文件路径`C:\SomePath\SomeFile.txt`，也可以是 SFTP URL `sftp://somesite.com/somepath/somefile.txt`。

程序执行的实际操作因源和目标类型而有很大差异。（类似于 Windows 资源管理器如何获取路径或 URL）。

我的问题是，除了一般的字符串解析或正则表达式匹配之外，是否有一种有效或内置的方法将给定的字符串分类为文件路径类型（驱动器号、冒号、反斜杠）和 URL（协议、冒号，双斜线等）？

这个问题类似于[Distinguish a filename from an URL](https://stackoverflow.com/questions/11687916/distinguish-a-filename-from-an-url)，但我正在寻找 .NET 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:35:24.050

```
if (new Uri(someString).IsFile) 
```

如果字符串不是有效的路径或 URI，则会出现异常。

您还可以检查`Uri.Scheme`属性，它将返回`file`,`http`等。

# java - 垃圾多久收集一次？我认为我的对象没有被删除

> ID：11926966
> 
> 赞同：2
> 
> 时间：2012-08-13T00:32:22.923
> 
> 标签：java, methods, garbage-collection, android-view, execution

如果我有一个类自己删除，它的内部方法是否应该停止执行？我有一个 B 类，它告诉 A 类从 A 的 ArrayList 中删除 B。我相当肯定 B 只存在于 A 的 ArrayList 中，所以当我删除它时，它应该被删除，对吗？（注意：我已经包含了一个 Serializable 实现，以防万一这与 VM 如何处理我的类有关，但我没有在此处编写 read- 和 writeObject 方法。我怀疑它与不过这个问题。）

```
public class A implements Serializable, B_Listener {
    ArrayList<B> bArray;

    public A() {
        bArray = new ArrayList<SomeObject>();
        bArray.add(new B(bArray.size(), this));
    }

    @Override
    public void deleteAtIndex(int index) {
        bArray.remove(index);
    }
}

public class B implements Serializable {
    B_Listener listener;
    int index;

    public B(B_Listener listener, int index) {
        this.listener = listener;
        this.index = index;
    }

    //This is called at some point in a B's lifetime.
    private void selfDestruct() {
        listener.deleteAtIndex(index);
        Log.w("B.class", "Should this not output? It does.");
    }
}

public interface B_Listener {
    public void deleteAtIndex(int index);
} 
```

所以当我不相信它应该执行 Log.w 消息时。因此，恐怕我正在创建 java 的内存泄漏。我查看并查看了整个代码，试图找到 B 可能被指针保存的位置，但除了我想要的之外，我什么也没想到。

那么我问垃圾收集的时间是否与我最终删除 B 的时间不同。如果是这种情况，那么暂时可以肯定地说我实际上并没有持有我不打算持有的物体吗？

额外的（注意：这可能很难理解，上面的所有内容都应该足以解决问题）：我也用 Android-Views 标记了这个，因为我正在 Android 上开发：我的 B 类包含指向 B 的 View 对象听众。我相信当我删除视图时，视图管理器或任何 Android 都不应再指向视图，当我删除 B 时，它的所有内部视图也应该被删除，这意味着它们不能再通过自己的侦听器来保持 B 的存在指针。我只是说出来看看我的理解是否正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T00:37:32.537

当然不是。

一个方法只会“停止执行”，如果它`return`是，如果抛出异常，或者如果线程被中止。

垃圾收集的全部意义在于它对您是不可见的。除非有特殊技巧（例如 WeakReferences，或检查空闲内存），否则无法判断一个对象是否已被垃圾回收 - 如果您可以检查它是否存在，则意味着您有对它的引用，因此*无法*收集它.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:46:54.057

1.  通常会有两种 GC：minor（每隔一秒左右）和 major（每隔一小时左右，但如果你给你的 VM 足够的内存，它也可能是一周）。

2.  对象以异步方式释放（批量执行此操作更有效，并且有助于保持内存不碎片化）。它们不会在它们不可访问的毫秒内被删除。

3.  *垃圾收集只有在没有活动线程*能够访问对象时才有意义，而不是在没有*对象*持有对它的引用时才有意义。在您的代码中，只要 selfDestruct 运行，线程就拥有一个隐式的“this”引用。这实际上导致对象被线程引用 - 并且不受 GC 影响。

# api - Magento 的优秀 Twitter 扩展模块

> ID：11926971
> 
> 赞同：1
> 
> 时间：2012-08-13T00:33:07.697
> 
> 标签：api, magento, rest, twitter, module

我想知道 Magento 是否有现有的 Twitter 扩展。我对这个模块的需求可能与 Twitter 扩展通常在 Magento 站点中所做的不同。具体来说，我真正关心的唯一事情是与 Twitter 的 REST API 交互的模型。

如果它支持以下内容会很棒：

*   原生 Magento 集合获取器、加载器、过滤器
*   能够过滤标签上的用户 Twitter 流
*   不错的分页支持
*   最好的将是整个 Twitter 应用程序身份验证部分。

通过快速搜索“magento twitter 扩展”，我找到了[Lazymonks](http://www.magentocommerce.com/magento-connect/lazzymonks-twitter.html)一个，它与 1.3 兼容（不令人鼓舞），以及[Aheadwords](http://ecommerce.aheadworks.com/magento-extensions/sociable.html)一个，我确信它是可靠的，但不是开源的。

我很想找到一个我也可以分叉和贡献的开源扩展。

# excel - 如何找到包含数据的最后一列？

> ID：11926972
> 
> 赞同：50
> 
> 时间：2012-08-13T00:33:45.560
> 
> 标签：excel, vba

我找到了这种方法来查找工作表中包含行的最后一个数据：

```
ws.Range("A65536").End(xlUp).row 
```

是否有类似的方法来查找工作表中包含最后一个数据的列？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-13T02:00:54.597

很多方法可以做到这一点。最可靠的是找到。

```
Dim rLastCell As Range

Set rLastCell = ws.Cells.Find(What:="*", After:=ws.Cells(1, 1), LookIn:=xlFormulas, LookAt:= _
xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious, MatchCase:=False)

MsgBox ("The last used column is: " & rLastCell.Column) 
```

如果要查找特定行中使用的最后一列，可以使用：

```
Dim lColumn As Long

lColumn = ws.Cells(1, Columns.Count).End(xlToLeft).Column 
```

使用已用范围（不太可靠）：

```
Dim lColumn As Long

lColumn = ws.UsedRange.Columns.Count 
```

如果 A 列中没有数据，则使用已用范围将不起作用。有关已用范围的另一个问题，请参见此处：

有关重置使用范围的信息，请参见[此处。](https://stackoverflow.com/questions/7423022/excel-getting-the-actual-usedrange/7423252#7423252)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-19T11:52:00.023

我知道这是旧的，但我已经在很多方面进行了测试，它还没有让我失望，除非有人可以告诉我。

行号

```
Row = ws.Cells.Find(What:="*", After:=[A1] , SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row 
```

专栏信

```
ColumnLetter = Split(ws.Cells.Find(What:="*", After:=[A1], SearchOrder:=xlByColumns, SearchDirection:=xlPrevious).Cells.Address(1, 0), "$")(0) 
```

列号

```
ColumnNumber = ws.Cells.Find(What:="*", After:=[A1], SearchOrder:=xlByColumns, SearchDirection:=xlPrevious).Column 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T06:55:31.443

激活工作表后尝试使用代码：

```
Dim J as integer
J = ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Row 
```

如果您`Cells.SpecialCells(xlCellTypeLastCell).Row`只使用，问题将是`xlCellTypeLastCell`信息不会被更新，除非您执行“保存文件”操作。但是使用`UsedRange`总是会实时更新信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-11T16:36:35.857

我认为我们可以修改上面[@Readify](https://stackoverflow.com/users/795231/reafidy)`UsedRange`答案中的代码以获取最后使用的列，即使起始列是否为空白也是如此。

所以这`lColumn = ws.UsedRange.Columns.Count`修改为

这`lColumn = ws.UsedRange.Column + ws.UsedRange.Columns.Count - 1`将始终给出可靠的结果

[![在此处输入图像描述](../Images/d4280cc7340378fdb3d1c8885b0582fb.png)](https://i.stack.imgur.com/R5DO4.jpg)

```
?Sheet1.UsedRange.Column + Sheet1.UsedRange.Columns.Count - 1 
```

`9`即时窗口中的收益率线上方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T09:09:47.500

这里有一些可能有用的东西。根据包含数据的行选择整个列，在这种情况下，我使用的是第 5 行：

```
Dim lColumn As Long

lColumn = ActiveSheet.Cells(5, Columns.Count).End(xlToLeft).Column
MsgBox ("The last used column is: " & lColumn) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T19:41:22.760

我一直在使用[@Reafidy 方法/答案](https://stackoverflow.com/a/11927387/5079799)很长一段时间，但今天我遇到了一个问题，第一行从 A1->N1 合并单元格，我的函数将“最后一列”返回为 1 而不是 14。

这是我修改后的函数，现在考虑可能合并的单元格：

```
Public Function Get_lRow(WS As Worksheet) As Integer
 On Error Resume Next
 If Not IsWorksheetEmpty(WS) Then
  Get_lRow = WS.Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
  Dim Cell As Range
  For Each Cell In WS.UsedRange
   If Cell.MergeCells Then
    With Cell.MergeArea
     If .Cells(.Cells.Count).Row > Get_lRow Then Get_lRow = .Cells(.Cells.Count).Row
    End With
   End If
  Next Cell
 Else
  Get_lRow = 1
 End If
End Function 
```

* * *

```
Public Function Get_lCol(WS As Worksheet) As Integer
 On Error Resume Next
 If Not IsWorksheetEmpty(WS) Then
  Get_lCol = WS.Cells.Find(What:="*", after:=[A1], SearchOrder:=xlByColumns, SearchDirection:=xlPrevious).Column
  Dim Cell As Range
  For Each Cell In WS.UsedRange
   If Cell.MergeCells Then
    With Cell.MergeArea
     If .Cells(.Cells.Count).Column > Get_lCol Then Get_lCol = .Cells(.Cells.Count).Column
    End With
   End If
  Next Cell
 Else
  Get_lCol = 1
 End If
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-03T19:32:18.280

如果您的数据从第一行开始，这是一个简单的选项。

```
MsgBox "Last Row: " + CStr(Application.WorksheetFunction.CountA(ActiveSheet.Cells(1).EntireRow)) 
```

它仅用于`CountA`计算整行中包含数据的列数。

这在各种情况下**都**不起作用，例如，如果您有多个表共享顶行，但对于一些快速简单的事情，它可以完美运行。

# html - 如何将多个项目放在一列中？

> ID：11926973
> 
> 赞同：1
> 
> 时间：2012-08-13T00:33:50.917
> 
> 标签：html, css, video

我是设计网站的新手，我有一个问题。我正在将网页设计为有 3 列（流体布局），我想知道如何制作它，以便我可以在每列中有多个项目？我试图用这个网页完成的是在这个网页上嵌入 9 个 youtube 视频，我想要 3 行，所以我需要能够在每列中将 3 个相互堆叠。而且我试图弄清楚如何在不使用已弃用的中心标签的情况下将每个视频在列中居中。谢谢

这是编码：

[http://jsfiddle.net/5Ajt8/](http://jsfiddle.net/5Ajt8/)

它在该网站的预览中看起来很乱，所以如果你复制并粘贴它并在浏览器中查看它应该看起来很正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:44:06.120

像这样的东西？

[http://jsfiddle.net/marvo/NBgKZ/](http://jsfiddle.net/marvo/NBgKZ/)

结构：

```
<div class="page">
<div class="column">
    <div class="item">Item #1</div>
    <div class="item">Item #2</div>
    <div class="item">Item #3</div>
</div>
<div class="column">
    <div class="item">Item #1</div>
    <div class="item">Item #2</div>
    <div class="item">Item #3</div>
</div>
<div class="column">
    <div class="item">Item #1</div>
    <div class="item">Item #2</div>
    <div class="item">Item #3</div>
</div>
</div> 
```

款式：

```
.page {
    width : 640px;
}

.column {
    background-color : #e0e0e0;
    width : 200px;
    float : left;
    border : 1px solid black;
}

.item {
    background-color : yellow;
    width : 100px;
    border : 1px dashed red;
    margin : 5px auto 5px auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:35:23.797

在其中一列内放一张桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:38:10.773

您可以`text-align:center;`在每列的容器上尝试任何一种。

您还可以将每个视频单独包装起来，`div`然后给它`div`一个`margin:0 auto`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T00:39:14.047

通过将 margin-left 和 margin-right 声明为 auto，你可以在它的容器中居中一个块元素。

[http://jsfiddle.net/L74yt/](http://jsfiddle.net/L74yt/)

# php - 使用mysql处理多个用户

> ID：11926976
> 
> 赞同：0
> 
> 时间：2012-08-13T00:34:23.270
> 
> 标签：php, mysql

我对 mysql 还是很陌生，我很好奇在数据库中保存多用户信息的最佳方法是什么。对于这个问题，我很抱歉，因为它一无所知，但我无法找到任何关于这个主题的示例或教程。

例如，如果有多个用户并且他们想记录他们跑过的距离，然后以后能够访问这些信息，我可以将他们的信息存储在某种与他们的用户名相关联的多维数组中吗？有没有办法使用 cookie 来做到这一点？cookie 是否可以存储在服务器上，然后在用户登录时在另一台计算机上检索？还是像为用户创建一个新表然后将所有信息存储在那里一样简单？

您可以提供给我的任何方向将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:39:06.337

您需要多个表：

用户表：

*   ID（自动递增）
*   名称（varchar）
*   ...更多信息...
*   ...更多信息...
*   ETC...

距离表：

*   ID（自动递增）
*   用户 ID（整数）
*   距离 Ran (varchar)
*   ...有关旅行的更多信息...

现在，您可以执行以下操作来获取某个用户的所有运行：

```
SELECT * FROM users LEFT JOIN distance ON users.id = distance.user_id WHERE users.id = $user_id 
```

其中 $user_id 是此人的 ID。这将为您提供用户所做的所有运行以及他们的用户信息

祝你好运！请询问您是否有更多问题。

PS 如果您计划将数据保存几个小时以上，您不想使用 COOKIES 或`_$SESSION`vars，因为它们很容易过期，并且对于从多个端点登录的用户不可用。

# python - 正则表达式和一个特殊字符本身

> ID：11926982
> 
> 赞同：3
> 
> 时间：2012-08-13T00:35:57.453
> 
> 标签：python, regex

我想用 替换字符`&`，`and`但只有 when`&`本身。**我在Python 2.7.3**中尝试以下操作：

```
import re
re.sub('&', 'and', '& r&b') 
```

我明白`and randb`了，但我想要的是`and r&b`。

```
re.sub('\b&\b', 'and', '& r&b') 
```

也不行。有什么建议么？另外，如果我只想要普通字符和特殊字符的独特组合，就像我想要的那样`a&b`，但不是`a&bc`？

在类似问题中找不到答案，所以提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:11:22.547

不知道“自己”是什么意思。顺便说一句，没有人知道这在正则表达式中意味着什么。

Ror你的具体例子，

搜索`(^| )&( |$)`
替换`$1and$2`

虽然不知道 Python。

编辑：在 Python 中

```
import re
re.sub('(^| )&( |$)', r'\1and\2', '& r&b') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:56:24.283

& 被视为非单词字符。所以只需使用这个简单的替换。

注意：这适用于普通文本中的大多数常见情况。

```
>>> re.sub(r" & ", " and ", " & r&b")
' and r&b' 
```

# css - 是否可以删除打印对话框页眉/页脚？

> ID：11926988
> 
> 赞同：0
> 
> 时间：2012-08-13T00:36:31.063
> 
> 标签：css, printing, media

我有一个用户需要打印的在线应用程序。但是，我不希望打印对话框中包含默认页眉/页脚：

![](../Images/d6f44f27d4ca30b647fc3ddba7019d4d.png)

我可以以编程方式更改它吗？我知道有一个选项，但我不想依赖用户取消选中该框。

![在此处输入图像描述](../Images/86952f5dd86e6e11ad4b28acd897b45b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:42:17.087

不，据我所知，你不能这样做。

# android - 果冻豆中的 NetworkOnMainThreadException 错误

> ID：11926990
> 
> 赞同：9
> 
> 时间：2012-08-13T00:36:38.503
> 
> 标签：android, android-asynctask, httpurlconnection, onstart, networkonmainthread

过去一周左右我一直在努力让它工作，但仍然不知道问题是什么。它适用于android 2.1，但不适用于4.1。我在检查我的应用程序更新的服务中得到了这个字符串。

```
latestVersion = Integer.parseInt(getHttpString(urlLatestVersion)); 
```

它在 checkForUpdate() 中调用；在 onStart(Intent intent, int startId); 中调用。

```
private String getHttpString(String urlString) throws IOException {
            InputStream in = null;
            int response = -1;

            URL url = new URL(urlString);
            URLConnection conn = url.openConnection();

            if (!(conn instanceof HttpURLConnection))
                    throw new IOException("Not an HTTP connection");

            try {
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();
                    if (response == HttpURLConnection.HTTP_OK) {
                            in = httpConn.getInputStream();
                    }
            } catch (Exception ex) {
                    ex.printStackTrace();
                    //
                    //main error currently lies here
                    // TODO fix errors that accures on android 4.0 and above.
                    //
            }
            if (in != null) {
                    StringBuilder sb = new StringBuilder();
                    String line;

                    try {
                            BufferedReader reader = new BufferedReader(
                                            new InputStreamReader(in, "UTF-8"));
                            while ((line = reader.readLine()) != null) {
                                    sb.append(line); // .append("\n");
                            }
                    } finally {
                            in.close();
                    }
                    return sb.toString();
            } else
                    return "";

    } 
```

这是来自 logcat 的错误

```
W/System.err( 7077): android.os.NetworkOnMainThreadException
W/System.err( 7077):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
W/System.err( 7077):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
W/System.err( 7077):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
W/System.err( 7077):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
W/System.err( 7077):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
W/System.err( 7077):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
W/System.err( 7077):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
W/System.err( 7077):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
W/System.err( 7077):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
W/System.err( 7077):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
W/System.err( 7077):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
W/System.err( 7077):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
W/System.err( 7077):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
W/System.err( 7077):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
W/System.err( 7077):    at com.lukemovement.roottoolbox.pro.Update.getHttpString(Update.java:166)
W/System.err( 7077):    at com.lukemovement.roottoolbox.pro.Update.checkForUpdate(Update.java:98)
W/System.err( 7077):    at com.lukemovement.roottoolbox.pro.Update.onStart(Update.java:75)
W/System.err( 7077):    at android.app.Service.onStartCommand(Service.java:450)
W/System.err( 7077):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2620)
W/System.err( 7077):    at android.app.ActivityThread.access$1900(ActivityThread.java:143)
W/System.err( 7077):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1306)
W/System.err( 7077):    at android.os.Handler.dispatchMessage(Handler.java:99)
W/System.err( 7077):    at android.os.Looper.loop(Looper.java:137)
W/System.err( 7077):    at android.app.ActivityThread.main(ActivityThread.java:4935)
W/System.err( 7077):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 7077):    at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err( 7077):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
W/System.err( 7077):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
W/System.err( 7077):    at dalvik.system.NativeStart.main(Native Method)
I/Example update( 7077): Invalid int: "" 
```

那么android是否已经放弃了向后兼容或者只是忘记添加这个位？

我读到我需要使用 AsyncTask。但我似乎无法让它为我工作，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T02:14:24.433

从 Android API v15 开始，它不需要在主线程上工作的繁重进程。所以你应该将你的逻辑移动到另一个线程，比如下面的源代码：

```
new Thread(new Runnable() {
   public void run() {
        // your logic
   }                        
}).start(); 
```

更多信息请参考：[响应性](http://developer.android.com/guide/practices/responsiveness.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:01:57.120

只需将此代码添加到您调用 Asynck 的活动的 oncreate 中。

代码：-

```
StrictMode.ThreadPolicy policy =
    new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# c# - 没有事件时 TumblingWindow 会触发吗？

> ID：11926991
> 
> 赞同：0
> 
> 时间：2012-08-13T00:37:03.247
> 
> 标签：c#, streaminsight

如果没有事件，StreamInsight TumblingWindow 会触发吗？

我在这里看到的所有示例，每个窗口内总是有一个事件：http: [//sqlblog.com/blogs/stream_insight/archive/2010/12/15/windows-in-streaminsight-hopping-vs-snapshot。 aspx](http://sqlblog.com/blogs/stream_insight/archive/2010/12/15/windows-in-streaminsight-hopping-vs-snapshot.aspx)

但问题是当特定窗口中没有事件时，它会触发吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:51:17.943

如果窗口内没有触发事件，则 StreamInsight 不知道窗口已经过去。StreamInsight 没有内部“时间”，因此如果没有“滴答”的东西，它永远不会知道窗口是否已经过去

您可以构建一个每 1 小时触发一次的可观察集合并创建 10 分钟的跳跃窗口。您不会看到 6 个结果。

```
void Main(){

var startTime = DateTime.UtcNow;

//Create an arbitrary number of events.
var source = Application.DefineEnumerable(() => Enumerable.Range(0, 60).Select(i => PointEvent.CreateInsert(startTime.AddHours(i * 1 ), (double)1)));
var input = source.ToStreamable(AdvanceTimeSettings.StrictlyIncreasingStartTime);

//Create a tumbling window that is 10 seconds wide
var query = from i in input.TumblingWindow(TimeSpan.FromSeconds(10))
    select i.Count();

query.Dump(); 
```

}

快照窗口略有不同，因为它们是由于事件而不是固定时间窗口而触发的。

这有帮助吗。

# python - Python参数计数

> ID：11926995
> 
> 赞同：3
> 
> 时间：2012-08-13T00:38:05.447
> 
> 标签：python, command-line-arguments

我刚接触 Python 中的参数，我发现参数系统在 Python 中的工作方式很奇怪（我不确定其他语言）。例如：

```
from sys import argv

arg1, arg2, arg3 = argv

print "First argument: ", arg1
print "Second argument: ", arg2
print "Third argument: ", arg3 
```

当我在命令行中使用以下参数运行它时：

```
python example.py First Second 
```

它给出了输出：

```
First argument: example.py
Second argument: First
Third argument: Second 
```

这是否意味着python从零开始计数？或者是否有一些不同或更多的原因。这很奇怪，但很有趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T00:39:25.417

是的，正如您所猜测的那样，Python 使用从零开始的索引（和许多其他编程语言一样）。

`sys.argv`是一个字符串列表。

`sys.argv[0]`将包含脚本的名称，并且此字符串列表中的后续条目将包含提供给脚本的命令行参数。

我打算提供一个例子，但你在你的帖子中的内容是我能想到的。

最后，正如@GregHewgill 在下面的有用评论中指出的那样，[Python 文档](http://docs.python.org/library/sys.html)也提供了更多相关信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T00:40:21.687

自 C 以来，参数从 0 开始计数`argv`，并且可能在此之前。参数 0 是可执行文件/脚本名称，它后面的所有其他参数都从 1 开始。

# android - 按百分比在线调整 GUI 元素的大小

> ID：11926999
> 
> 赞同：0
> 
> 时间：2012-08-13T00:38:47.023
> 
> 标签：android, layout, view, scaling

我在这里查看了很多线程，试图理解为什么会发生这种情况，但我就是无法理解它。

在我的 RelativeLayout 中，我有 4 个 Horizo​​ntalScrollViews (HSV)，它们位于菜单（它是对齐的ParentBottom）上方。

我想在此菜单上方均匀分布 4 个 HSV。

根据我的计算，我应该能够获取设备高度，减去菜单高度，然后除以 4，得到单独的 HSV 高度。

但是，当我设置每个 HSV 的高度时，它们都比它们应该的大。

（注意：display.getHeight() 返回正确的尺寸。我在 480x800 设备上，如果我打印 deviceHeight 它返回 800）

这是我的代码：

```
 RelativeLayout menuLayout = (RelativeLayout)findViewById(R.id.menuLayout);
    HorizontalScrollView row1 = (HorizontalScrollView)findViewById(R.id.row1);
    HorizontalScrollView row2 = (HorizontalScrollView)findViewById(R.id.row2);
    HorizontalScrollView row3 = (HorizontalScrollView)findViewById(R.id.row3);
    HorizontalScrollView row4 = (HorizontalScrollView)findViewById(R.id.row4);

    //get current device dimensions
    Display display = getWindowManager().getDefaultDisplay();
    deviceWidth = display.getWidth(); //returns 480
    deviceHeight = display.getHeight(); //returns 800

    int menuHeight = deviceWidth/5; // 480/5 = 96
    int remainingSpace = deviceHeight - menuHeight; // 800 - 96 = 704
    int rowHeight = (int) (remainingSpace/4); // 704/4 = 176

    menuLayout.getLayoutParams().height = menuHeight;

    row1.getLayoutParams().height = rowHeight;
    row2.getLayoutParams().height = rowHeight;
    row3.getLayoutParams().height = rowHeight;
    row4.getLayoutParams().height = rowHeight; 
```

当我运行这段代码时，每一行都太大了，并被推到底部的菜单下。如果我运行 getHeight()。在一行上，它说它是正确的高度（176），但显然不是（因为 4 行太大而无法放入菜单上方的空间）。

任何人都可以对此有所了解吗？太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:44:14.233

你真的应该在`LinearLayout`这里使用 a 。您可以使用该`android:layout_weight`属性来使用百分比。如果事情是偶数，只需使用 1，否则，您可以设置`android:weightSum="100"`然后在权重中使用整数（以百分比表示）。

例如`android:layout_weight="25"`25%，当父母有`android:weightSum="100"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:04:21.643

**ViewGroup.LayoutParams**嵌套子类 LayoutParams 的“常量字段值” **public static final int FILL_PARENT 常量值：-1 (0xffffffff)**

它说视图应该与父级减去填充一样大，但是您可能需要在父级内放置另一个“父级”来限制整个集合以包含您调整大小的单独集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:32:42.187

我没有考虑顶部有菜单栏，它占据了设备屏幕的一部分。我的解决方案是让主布局高度为fill_parent，然后得到主布局的高度。我使用这个值，而不是 display.getHeight() 值。