# StackOverflow 问答 11906000-11906999

# c# - 如何从文本文件 c#/.net 获取代理？

> ID：11906005
> 
> 赞同：0
> 
> 时间：2012-08-10T16:50:05.997
> 
> 标签：c#, url, proxy, webbrowser-control, host

我已经在一个文本（link.txt）文件中保存了一些 url，在另一个文本文件中保存了一些代理（proxy.txt）。

现在我想为每个 url 使用不同的代理。

喜欢：

*   www.google.com 202.56.232.117:8080
*   www.facebook.com 506.78.781.987:9001
*   www.twitter.com 749.961.73.459:8008

这是我的代码，但我不知道如何为每个 url 使用不同的代理（proxy.txt）。

请告诉我如何使这项工作。

```
try
{

    foreach (string sr in File.ReadAllLines("link.txt"))
    {
        webBrowser1.Navigate(sr);
    }
    webBrowser1.ScriptErrorsSuppressed = true;
    while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
    {
        Application.DoEvents();
    }
}
catch(Exception)
{
     MessageBox.Show("Internet Connection not found","Error",MessageBoxButtons.OK,MessageBoxIcon.Error);
     this.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:14:58.637

尝试这个：

```
Public Sub SetProxy(ByVal ServerName As String, ByVal port As Integer)
Try            
Dim regkey1 As RegistryKey
regkey1 = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", True)
regkey1.SetValue("ProxyServer", ServerName + ":" + port.ToString(), RegistryValueKind.Unknown)
regkey1.SetValue("ProxyEnable", True, RegistryValueKind.DWord)   
regkey1.Close()
Catch ex As Exception
End Try
End Sub 
```

# asp.net - 动态创建包含 AJAX Extender 的 ASP.NET Web 用户控件引发错误“PreRender 后可能未注册扩展器控件”

> ID：11906009
> 
> 赞同：0
> 
> 时间：2012-08-10T16:50:27.710
> 
> 标签：asp.net, web-applications, asp.net-ajax

我正在尝试动态添加一个 Web 用户控件，该控件包含一个 AJAX 可折叠面板，当用户单击一个按钮时，面板内有一个 Gridview。我可以添加用户控件的单个实例，但是当我添加其他用户控件时，它会引发以下错误：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：扩展器控件可能未在 PreRender 之后注册。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

我是 ASP.NET 开发的新手，我用来处理回发的方法是将用户控件存储在列表中，然后在 prerender 方法调用中再次添加它们。我不确定该怎么做，或者我是否正确处理用户控件的创建。任何建议表示赞赏。

这是后端代码：

```
public partial class Test : System.Web.UI.Page
{
    private IList<Control> _persistedControls;
    private const string PersistedControlsSessionKey = "thispage_persistedcontrols";

static int count = 1;
private IList<Control> PersistedControls()
{
    if (_persistedControls == null)
    {
        if (Session[PersistedControlsSessionKey] == null)
            Session[PersistedControlsSessionKey] = new List<Control>();
        _persistedControls = Session[PersistedControlsSessionKey] as IList<Control>;
    }
    return _persistedControls;
}

protected void Page_Load(object sender, EventArgs e)
{
    PersistedControls();
}

protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    IList<Control> controlsToGenerate = PersistedControls();

    // regenerate dynamically created controls
    foreach (var control in controlsToGenerate)
    {
        MasterPanel.Controls.Add(control);
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    Control control = LoadControl("~/WebUserControl/UseCaseSetupUserControl.ascx");
    control.ID = "uc" + count++.ToString();
    MasterPanel.Controls.Add(control);
    _persistedControls.Add(control);
    MasterPanel.Controls.Add(new LiteralControl("<br />"));
    _persistedControls.Add(new LiteralControl("<br />"));  
} 
```

}

这是 ASPX 代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
        <div>    
            <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
            <br />
            <asp:Panel ID="MasterPanel" runat="server">
            </asp:Panel>    
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:23:31.840

在页面生命周期中尽早创建控件。

由于您有`PersistedControls`负载，因此您应该将它们添加到控件集合中。添加控件的最佳位置`Init`。

如果你真的不能这样做，那么使用`Load`.

如果这必须在事件上完成，那么您可以第一次在那里添加控件，但将其保留并记住从下一次回发开始将其重新添加到**Init 或 Load上。**

如果您在控件`PreRender`无法将任何数据添加到`ViewState`. SaveViewState 发生在`PreRender`. 许多控件严重依赖于`ViewState`正常运行。例外只是告诉您应该在页面生命周期的早期添加控件。

# spring - 两个同名但参数不同的方法的两个切入点

> ID：11906011
> 
> 赞同：0
> 
> 时间：2012-08-10T16:50:38.373
> 
> 标签：spring, aop, pointcut

嘿。

我正在写一个@Aspect 来记录我的持久层。

首先是一些可能向有经验的开发人员显示错误的代码；）

```
/** Interface of the class to observe. */
public interface PersistenceService {

    public Serializable save(Serializable serializable);

    public List<Serializable> save(List<Serializable> list)
}

/** Actual class to observe. */
@Service
public class PersistenceService {

    @Autowired
    private SomeJpaRepository rep;

    public Serializable save(Serializable serializable) {
        return rep.save(serializable);
    }

    public List<Serializable> save(List<Serializable> list) {
        return rep.save(list);
    }
} 
```

这里的方面：

```
/** The Aspect. */
@Aspect
@Component
public class PersistenceService {

    /** A org.slf4j.Logger (using logback). */
    private final Logger logger = LoggerFactory.getLogger(getClass());

    /** Pointcut to define the classes to observe. */
    @Pointcut("within(de.mypckg.myproject.persistence.*.*)")
    public void inPersistanceLayer() {}

    /** Pointcut for the first save-method. */
    @Pointcut("execution(public * save(..)) && args(serializable)")
    public void saveOperation(Serializable serializable) {}

    /** Pointcut for the first save-method. */
    @Pointcut("execution(public * save(..)) && args(list)")
    public void saveOperation(List<Serializable> list) {}

    /** Method for the first save-method. */
    @Around("inPersistanceLayer() && saveOperation(serializable)")
    public List<Serializable> logSave(ProceedingJoinPoint joinPoint, Serializable serializable) throws Throwable {

        // log some stuff
        Object saved = joinPoint.proceed();
        // log somemore stuff
    }

    /** Method for the second save-method. */
    @Around("inPersistanceLayer() && saveOperation(list)")
    public List<Serializable> logSave(ProceedingJoinPoint joinPoint, List<Serializable> list) throws Throwable {

        // log some stuff
        Object saved = joinPoint.proceed();
        // log somemore stuff
    }
} 
```

如果我只有一个切入点（及其方法）它可以工作，但如果我添加第二个，我会得到以下异常：

```
java.lang.IllegalArgumentException: warning no match for this type name: list [Xlint:invalidAbsoluteTypeName] 
```

我改变了切入点的顺序，它总是排在第二个。关于如何解决这个问题的任何想法？

**更新**
一旦我发布了问题，我就有了一个想法。我改变了这样的切入点：

```
/** The Aspect. */
@Aspect
@Component
public class PersistenceService {

    /** A org.slf4j.Logger (using logback). */
    private final Logger logger = LoggerFactory.getLogger(getClass());

    /** Pointcut to define the classes to observe. */
    @Pointcut("within(de.mypckg.myproject.persistence.*.*)")
    public void inPersistanceLayer() {}

    /** Pointcut for the save-method. */
    @Pointcut("execution(public * save(..))")
    public void saveOperation() {}

    /** Pointcut for the serializable argument. */
    @Pointcut("args(serializable)")
    public void serializableArgument(Serializable serializable) {}

    /** Pointcut for the list argument. */
    @Pointcut("args(list)")
    public void listArgument(List<Serializable> list) {}

    /** Method for the first save-method. */
    @Around("inPersistanceLayer() && saveOperation() && serializableArgument(serializable)")
    public Object logSave(ProceedingJoinPoint joinPoint, Serializable serializable) throws Throwable {

        // log some stuff
        Object saved = joinPoint.proceed();
        // log somemore stuff
        return saved;
    }

    /** Method for the second save-method. */
    @Around("inPersistanceLayer() && saveOperation(list) && listArgument(list)")
    public Object logSave(ProceedingJoinPoint joinPoint, List<Serializable> list) throws Throwable {

        // log some stuff
        Object saved = joinPoint.proceed();
        // log somemore stuff
        return saved;
    }
} 
```

现在异常消失了，但还有一个小问题（我猜这更容易解决）：由于 ArrayList 实现了 Serializable 两个切入点都被执行，至少在我使用 ArrayList 的测试用例中。
我将对此进行调查并发布我的发现，但也很感谢您的帮助；）

**更新 2**

更正了 kriegaex 声明的复制粘贴错误。谢谢！

logSave(..) 方法的返回类型是 Object。

**更新 3**

我将代码更改为仅使用一个切入点和一种方法，并使用 kriegaex 提议的 instanceof 进行检查。

```
/** The Aspect. */
@Aspect
@Component
public class PersistenceService {

    /** A org.slf4j.Logger (using logback). */
    private final Logger logger = LoggerFactory.getLogger(getClass());

    /** Pointcut to define the classes to observe. */
    @Pointcut("within(de.mypckg.myproject.persistence.*.*)")
    public void inPersistanceLayer() {}

    /** Pointcut for the save-method. */
    @Pointcut("execution(public * save(*)) && args(serializable)")
    public void saveOperation(Serializable serializable) {}

    /** Method for the first save-method. */
    @Around("inPersistanceLayer() && saveOperation() && serializableArgument(serializable)")
    public Serializable logSave(ProceedingJoinPoint joinPoint, Serializable serializable) throws Throwable {

        // log some stuff
        Serializable saved = (Serializable) joinPoint.proceed();

        if (saved instanceof List<?>) {
            List<?> savedList = (List<?>) saved;
            // log somemore stuff with a List
        } else {
            // log somemore stuff
        }
        return saved;
    }
} 
```

我仍然想知道为什么它不能以另一种方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:29:40.843

这里有两个选择：

**应用类**

```
package de.scrum_master.aspectj.sample;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;

public class TestApp {
    public static void main(String[] args) {
        save(new HashSet<String>());
        List<Serializable> arg = new ArrayList<Serializable>();
        save(arg);
    }
    static Serializable save(Serializable arg) { return arg; }
    static List<Serializable> save(List<Serializable> arg) { return arg; }
} 
```

**方面**

```
package de.scrum_master.aspectj.sample;

import java.io.Serializable;
import java.util.List;

public aspect TestAspect {
    pointcut saveOperation(Object arg) : execution(* save(*)) && args(arg);
    pointcut serializableArgument(Serializable serializable) : execution(* save(Serializable)) && args(serializable);
    pointcut listArgument(List<Serializable> list) : execution(* save(List<Serializable>)) && args(list);

    Object around(Object arg) : saveOperation(arg) {
        if (arg instanceof List)
            System.out.println("Global advice   [List]:         " + thisJoinPointStaticPart.getSignature());
        else
            System.out.println("Global advice   [Serializable]: " + thisJoinPointStaticPart.getSignature());
        return proceed(arg);
    }

    List<Serializable> around(List<Serializable> list) : listArgument(list) {
        System.out.println("Specific advice [List]:         " + thisJoinPointStaticPart.getSignature());
        return proceed(list);
    }

    Serializable around(Serializable serializable) : serializableArgument(serializable) {
        System.out.println("Specific advice [Serializable]: " + thisJoinPointStaticPart.getSignature());
        return proceed(serializable);
    }
} 
```

如您所见，第一个带有返回类型`Object`并使用简单切入点的建议`saveOperation(Object arg)`是通用的一站式购物解决方案。另外两个建议是特定于参数类型的，每个都使用单独的切入点。如果您编织并运行应用程序类，它会产生以下输出：

```
Global advice   [Serializable]: Serializable de.scrum_master.aspectj.sample.TestApp.save(Serializable)
Specific advice [Serializable]: Serializable de.scrum_master.aspectj.sample.TestApp.save(Serializable)
Global advice   [List]:         List de.scrum_master.aspectj.sample.TestApp.save(List)
Specific advice [List]:         List de.scrum_master.aspectj.sample.TestApp.save(List) 
```

使用切入点的建议`serializableArgument(Serializable serializable)`只会触发一次，就像您喜欢的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:36:40.723

如果您将切入点编写为

```
args(java.io.Serializable) 
```

或者

```
execution(* *(java.io.Serializable)) 
```

如果参数`Serializable`在*运行时*，前者匹配，后者仅匹配声明单个参数类型的*方法签名*`Serializable`。在您的示例中，您使用`..`了 as 参数，`execution`这意味着将匹配任意数量的方法参数。

查看 Spring 参考文档中的[切入点示例](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-pointcut-examples)。特别是，我认为您会发现`args`讨论很有趣。

* * *

编辑：

请注意，您不能使用`execution`变体进行*绑定*，但您可以`&&`像尝试过的那样轻松地使用将两者结合起来，例如

```
@Pointcut("execution(public * save(java.io.Serializable)) && args(serializable)")
public void saveOperation(Serializable serializable) {} 
```

和

```
@Pointcut("execution(public * save(java.util.List)) && args(list)")
public void saveOperation(List<Serializable> list) {} 
```

# gwt - GWT：在 JSNI 中触发的 Window.onResize() 仅调用一次

> ID：11906013
> 
> 赞同：1
> 
> 时间：2012-08-10T16:50:46.310
> 
> 标签：gwt, jsni

在我的 GWT 应用程序中，我有一个按钮，我通过 JSNI 和 jQuery 附加了一个单击处理程序。JSNI 看起来像这样：

```
private native void attachClickActions() /*-{
    $wnd.jQuery("#theButton").click(function() {
        // ...
        $wnd.jQuery(this).animate({
            // ...
        }, 500, function() {
            @com.google.gwt.user.client.Window::onResize()();
        });
    });
}-*; 
```

（不，我们不能通过 Java 代码中的 ClickHandler 来执行此操作，原因有很多，我们无法讨论。）

本质上，当用户单击按钮时，`animate()`会调用一个 jQuery，当它完成时，回调函数会调用`Window.onResize()`. 很简单。

它第一次起作用。当用户点击按钮时，动画发生，并且 onResize 被调用。但即使`animate()`函数成功完成，所有后续点击都不会触发 onResize 操作。我在回调中放入的任何其他代码，例如`alert()`，每次动画完成时都会发生，因此回调不是问题。我知道`onResize()`随后不会调用 ，因为动画操作对元素的大小应用了一堆更改，并且当`onResize()`触发时，您可以看到更改发生。

为什么`Window.onResize()`唯一的第一次被调用，随后的调用被忽略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:25:23.223

发生这种情况的原因是 GWT 团队在课堂上编写`onResize()`事件的方式。`Window`显然，某些浏览器引擎，如 Trident (IE) 和 Webkit (Chrome、Safari)，在某些情况下，`onResize`事件会被多次触发，而它应该只发生一次。为了处理这种情况，该`onResize()`方法的实现包括检查浏览器窗口的当前大小：如果自上次调用以来大小没有改变`onResize()`，则不会再次触发。

由于我实际上是在尝试在`onResize()`实际上没有调整大小的窗口上多次调用该事件，因此这个 IE/Webkit “修复”正在阻止事件触发。

`onResize()`如果有人好奇，这是该方法的实际代码：

```
static void onResize() {
    if (resizeHandlersInitialized) {
        // On webkit and IE we sometimes get duplicate window resize events.
        // Here, we manually filter them.
        int width = getClientWidth();
        int height = getClientHeight();
        if (lastResizeWidth != width || lastResizeHeight != height) {
            lastResizeWidth = width;
            lastResizeHeight = height;
            ResizeEvent.fire(getHandlers(), width, height);
        }
    }
} 
```

# javascript - 如何为javascript函数变量添加默认值？

> ID：11906015
> 
> 赞同：0
> 
> 时间：2012-08-10T16:50:59.023
> 
> 标签：javascript, function

> **可能重复：**
> [有没有更好的方法在 Javascript 中执行可选函数参数？](https://stackoverflow.com/questions/148901/is-there-a-better-way-to-do-optional-function-parameters-in-javascript)
> [函数参数的默认值？](https://stackoverflow.com/questions/3672084/default-value-for-function-parameter)

我可以在 javascript (jQuery) 函数上执行此操作

```
function somename(variableone = "content"){
 return variableone;
} 
```

现在访问该功能：

```
alert(somename()) //this should alert "content"
alert(somename("hello world"); //this should return "hello world" 
```

但我得到这个错误`Uncaught SyntaxError: Unexpected token =`

如果这是不可能的，有没有办法达到相同的结果？或者最重要的是这是一个好的（正确的）做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:52:04.013

```
function somename(variableone){
    if(typeof variableone === "undefined")
        variableone = "content"
    return variableone;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T16:52:49.917

```
function somename(variableone) {
    variableone = arguments.length < 1 ? "content" : variableone;
    return variableone;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:52:51.207

您需要使用一个条件：

```
function somename(variableone){
    if (typeof(variableone) === "undefined") {
        variableone = "content";
    }
    return variableone;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T16:56:08.120

```
function someName(somevar){

  somevar = somevar || "content";

  console.log(somevar);

}

someName(); 
```

如果它不是未定义的，或者（|| 是或）“内容”，这将设置 somevar 为自身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T17:01:44.217

```
function somename(variableone){
    return variableone = variableone ? variableone  : 'content'
} 
```

# php - 优化多表搜索

> ID：11906018
> 
> 赞同：0
> 
> 时间：2012-08-10T16:51:27.120
> 
> 标签：php, mysql

有没有办法优化下面的查询？它需要查看多个表。提前感谢您的帮助，非常感谢。相关架构：

```
CREATE TABLE `variant_bikes` (
  `variant_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `bike_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`variant_id`,`bike_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `product_bikes` (
  `product_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `bike_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_id`,`bike_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `cart_products` (
  `product_id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`product_id`),
) ENGINE=MyISAM AUTO_INCREMENT=95 DEFAULT CHARSET=utf8;

CREATE TABLE `cart_product_options` (
  `option_id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `product_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`option_id`),
) ENGINE=MyISAM AUTO_INCREMENT=9040 DEFAULT CHARSET=utf8;

CREATE TABLE `cart_product_option_variants` (
  `variant_id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `option_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`variant_id`),
) ENGINE=MyISAM AUTO_INCREMENT=9040 DEFAULT CHARSET=utf8; 
```

SQL是：

```
select distinct p.product_id 
from cart_products p 
     left join product_bikes b on p.product_id = b.product_id where bike_id = $bike_id
or
p.product_id in (
    select product_id from cart_product_options where option_id in (
        select option_id from cart_product_option_variants where variant_id in (
            select variant_id from variant_bikes where bike_id=$bike_id
        )
    )
) 
```

编辑：短是客户选择一辆自行车，这会选择适合的产品，无论是产品本身还是产品选项变体。请注意此代码有效，我只想知道是否有优化它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:20:32.610

试试这个：

```
select * from product_bikes PB
         join cart_product_options CPO on PB.PRODUCT_ID = CPO.PRODUCT_ID
         join cart_product_option_variants CPOV on CPO.OPTION_ID = CPOV.OPTION_ID
where PB.product_id = $product[product_id]
and CPOV.variant_id  in    ( $valid_variants_list ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:58:48.027

虽然我的问题的性质发生了一些变化，加入策略有效，但它是最好的答案吗？即，它是否解决了我原来的问题，即它被优化为两种工作：

```
select distinct p.product_id from cscart_products p 
    left join product_bikes pb on p.product_id = pb.product_id and pb.bike_id = 111
    left join cscart_product_options po on po.product_id = p.product_id
    left join cscart_product_option_variants pov on pov.option_id = po.option_id
    left join variant_bikes vb on vb.variant_id = pov.variant_id and vb.bike_id = 111
    where pb.bike_id = 111 or vb.bike_id = 111 
```

然而，这导致没有明显的速度提升。（有时它会更快返回，有时可能由于当时的服务器负载而变慢）。

# iis-7 - IIS 7 以 HTML 形式返回经典 ASP

> ID：11906019
> 
> 赞同：0
> 
> 时间：2012-08-10T16:51:30.977
> 
> 标签：iis-7, asp-classic

我需要 IIS 7 将经典 ASP 请求作为基本文本/html 返回。这适用于将通过 ajax 请求页面的内部应用程序。ASP 代码包含超出此项目范围的错误，并阻止了请求。我只是想返回 ASP 页面的内容，就像它是普通的 html 一样，以便我可以在我的应用程序中处理信息。

一种想法是在所有页面旁边应用错误简历，但这需要太长时间。我已经尝试删除处理程序映射，或者尝试通过它的属性故意限制映射，但收到 IIS 7 安全错误消息。

如果这也可以针对 IIS 6 完成，那就太好了，但不是必需的。

**更新**为了提供一个更好的例子来说明我正在尝试实现的目标：我设法通过从控制面板中的 Windows 程序和功能中完全卸载 ASP，然后为 .asp 创建一个 MIME 作为“text/html”来推进项目. 这行得通，但它占用了整个服务器的 ASP，所以我不得不为其他开发其他项目的开发人员重新启用它。有没有办法为一个站点而不是整个服务器的角色和职责做到这一点？

**可能的答案** 仅针对该站点，我更新了 ASP 处理程序映射，以便 asp DLL 响应“.aspdont”。然后我为 .asp 添加了我自己的 MIME 类型作为“text/html”。似乎有点草率，但考虑到我必须使用的东西，这可能是我唯一的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:11:47.987

您不能为一个站点禁用 Classic ASP；您只能在服务器级别拒绝或卸载它。有两种可能的解决方法：将其移至未安装 Classic ASP 的新服务器，或者在站点级别，将 .asp 的处理程序重新映射到未使用的扩展名，如 .aspdont。然后，对于任一解决方案，在站点级别为 .asp 创建 MIME 类型为 text/html。现在页面将返回未经处理的 ASP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:27:04.880

我想这个 ASP 的结果是动态的？因此基于数据库查询等？那么除了修复错误或跳过产生错误的部分之外，您别无选择。即使你有大量的 ASP 页面（我想你在这里有点夸张），如果你从第一页开始（你的 ajax 要求的那个），只需注释掉对其他页面的所有引用，然后保留您真正需要的那些，以产生您的 ajax 调用所需的结果。

请发布您调用的 ASP 和您将对其进行的 ajax 调用，以便我们提供更好的建议。

# html - 如何将编辑器标签与css中的编辑器字段对齐

> ID：11906023
> 
> 赞同：0
> 
> 时间：2012-08-10T16:51:52.190
> 
> 标签：html, css, asp.net-mvc

我认为这是一个典型的问题。我有以下 html

```
<div class="editor-label">Group Name:       </div>
<div class="editor-field"><input type="text"></input></div> 
```

和CSS

```
.editor-label {
float: left;
width: 200px;
margin-bottom: 4px;
margin-right: 10px;
text-align: right;
}

.editor-field {
float: left;
width: 300px;
} 
```

我认为编辑器字段的高度在浏览器和控件之间是不同的。但问题是 editor-label 中的文本总是在顶部对齐。使文本垂直居中的最佳方法是什么？

在我使用 css 的下降经验中，我认为最好的方法是将编辑器字段和编辑器标签的高度设置为相同并使用垂直对齐标签。但在这种情况下，我不确定是否要这样做，因为编辑器字段的高度会有所不同。任何想法将不胜感激。

更新：

我不想更改现有的 html，所以我只是使用 jquery 来设置 line-height 并完成它。

```
$(document).ready(function () {
    $(".editor-label").css("line-height", $(".editor-field").css("height"));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:58:59.243

.editor-label 的 line-height 与 .editor-field 输入的高度匹配，将为您提供始终居中的标签。

虽然我不确定这是否是您的具体情况，但这是标签元素的重点。你可以做：

```
<label>Group Name: <input type='text'/></label> 
```

并且无论输入的高度如何，标签都将始终居中。（您可以在输入上添加一个margin-left作为间距）

# php - 我可以在显示之前从 jquery 获取图像高度吗？

> ID：11906030
> 
> 赞同：1
> 
> 时间：2012-08-10T16:52:27.260
> 
> 标签：php, jquery

我正在从 PHP 返回的 json 数据中加载大约 50 张图像。为了避免额外调用 PHP 获取图像大小，我想在客户端执行此操作。这可能吗？

这是我当前用于构建图像列表的 jquery 调用：

```
// Create HTML for the images.
var html = '';

$.each(data.profiles, function() {

    // Can I determine the img height or do I need to wait until the image is loaded?

    html += '<a href="/view_profile.php?id='+this.user_id+'">';
    html += '<img src="'+this.file_name+'" width="200" height="" style="border:0;">';
    html += '</a><br>';

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:54:46.273

您可以绑定图像的加载事件并在客户端加载图像时获取它，如下所示：

```
$.each(data.profiles, function() {

    // Can I determine the img height or do I need to wait until the image is loaded?

    html += '<a href="/view_profile.php?id='+this.user_id+'">';

    var image = new Image();  
    image.src = this.file_name;
    image.onload = function() {
        var height = image.height;
    };

    var img = $("<img/>").css('border', 0).prop('src', image.src);
    html += img.wrap('<div></div>').html();
    html += '</a><br>';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:03:12.897

试试这个：-

```
<img alt="photo-current" src="images/galleries/1/photo_1.jpg" id="photo-current"/>

<script type="text/javascript"> 
jQuery(document).ready(function($) {
      $("#photo-current").load(function() {
            var imageHeight = $(this).height();
            alert("image height " + imageHeight );
      });
});
</script> 
```

# javascript - 为什么我不能用 Meteor 渲染这个简单的列表？

> ID：11906034
> 
> 赞同：1
> 
> 时间：2012-08-10T16:52:33.880
> 
> 标签：javascript, coffeescript, meteor

这个非常简单的应用程序不起作用。我的列表没有显示。为什么？我一定错过了有关 Meteor 工作原理的重要信息。

**食谱.html**

```
<body>
    <h3>Recipes</h3>
    {{> recipes}}
</body>

<template name="recipes">
    <ul>
        {{#each recipes}}
            <li>{{name}}</li>
        {{/each}}
    </ul>
</template> 
```

**食谱.咖啡**

```
Recipes = new Meteor.Collection("recipes")

if Meteor.is_client
    Meteor.startup ->
        Meteor.autosubscribe(->
            Meteor.subscribe('recipes')
        )

        # THIS IS NOT WORKING
        Template.recipes.recipes ->
            return Recipes.find()

if Meteor.is_server
    Meteor.startup ->
        if Recipes.find().count() == 0
            data = [
               name: "Chocolate Chip Cookies"
            ,
               name: "Spring Rolls"
           ]

        for item in data
            Recipes.insert(item)

    Meteor.publish('recipes', ->
        return Recipes.find()
    ) 
```

**错误**

```
Uncaught TypeError: Object function (data) {
      var getHtml = function() {
        return raw_func(data, {
          helpers: partial,
          partials: Meteor._partials
        });
      };

      var react_data = { events: (name ? Template[name].events : {}),
                         event_data: data,
                         template_name: name };

      return Meteor.ui.chunk(getHtml, react_data);
    } has no method 'recipes' 
```

我已经尝试过使用自动发布和不使用此功能。我在这里不明白什么？

**编辑：**

正如 Jasd 指出的那样，我之前发布了错误的代码。现在的代码就是有问题的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:00:08.920

不应该是：

```
Template.recipes.recipes = ->
    return Recipes.find() 
```

因为 1.) 您*将*函数分配给`Template.recipes.recipes`2.) 您遍历`recipes`模板列表`recipes`。`recipes`我猜你不需要用键返回另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:22:46.490

应该是这个——

```
Recipes = new Meteor.Collection("recipes")

if Meteor.is_client
    Meteor.startup ->
        Meteor.autosubscribe(->
            Meteor.subscribe('recipes')
        )

    # OUTINDENT
    # ASSIGNMEMT, NOT FUNCTION CALL
    Template.recipes.recipes = ->
        return Recipes.find()

if Meteor.is_server
    Meteor.startup ->
        if Recipes.find().count() == 0
            data = [
               name: "Chocolate Chip Cookies"
            ,
               name: "Spring Rolls"
            ]

            # INDENT
            for item in data
                Recipes.insert(item)

    Meteor.publish('recipes', ->
        return Recipes.find()
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:22:59.483

1.  您需要确保分配给`Template.recipe.recipes`（可能是您的 qn 中的错字）

    ```
    Template.recipes.recipes = ->
      return Recipes.find() 
    ```

2.  您不想在 中执行此操作，在`Meteor.startup`评估模板之后运行（因此它会认为`Template.recipe.recipes`是`null`） - 将其移动到块的顶层`is_client`，我认为它会很好。

# php - XAMPP 没有在 XP 上启动 Apache

> ID：11906037
> 
> 赞同：2
> 
> 时间：2012-08-10T16:52:38.993
> 
> 标签：php, windows, apache, xampp

我安装了一台新的 XP 机器，除了驱动程序和 VNC 之外没有任何软件。

我从他们的网站下载了**XAMPP 1.8 。**

Apache 不会启动。我查看了`EventViewer`详细信息并看到了

```
httpd.exe: Syntax error on line 456 of C:/xampp/apache/conf/httpd.conf: Syntax e
rror on line 17 of C:/xampp/apache/conf/extra/httpd-xampp.conf: Cannot load /xam
pp/php/php5ts.dll into server: The application has failed to start because its s
ide-by-side configuration is incorrect. Please see the application event log for
more detail. 
```

我一直在高低搜索网络，无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:30:46.523

我发现我需要安装 VC++ 可再发行软件。XAMPP 应该让它更加引人注目，所以没有安装它的人不要惊慌！

# oracle11g - oracle11g 两个版本中sql查询的行为差异

> ID：11906043
> 
> 赞同：0
> 
> 时间：2012-08-10T16:52:52.673
> 
> 标签：oracle11g

我们有两个数据库，一个是 11.2.0.1.0 版本，另一个是 11.2.0.3.0

询问

```
SELECT * 
  from chn_chr 
 where Chn_CRTN_DT < '08-Aug-2012 02.20.30.000000 PM' 
```

不适用于版本 11.2.0.3.0，但相同的查询适用于版本 11.2.0.1.0。

我已经验证了所有 NLS 参数（会话、实例、数据库），并且两个版本的参数都相同。

这是发布的问题还是我需要检查的其他问题？

# java - 如何将来自互联网的图片放入 ImageView 中？

> ID：11906051
> 
> 赞同：-1
> 
> 时间：2012-08-10T16:53:15.297
> 
> 标签：java, android, imageview

> **可能重复：**
> [加载远程图像](https://stackoverflow.com/questions/3075637/loading-remote-images)

如何将来自互联网的图片放入 ImageView 中？

```
ImageView image = (ImageView) findViewById(R.id.main_layout_image_cover); 
```

图片。（？！）;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:56:48.003

在这里使用这个：

```
URL imageURL = new URL("http://....");
Bitmap image = BitmapFactory.decodeStream(imageUrl.openConnection().getInputStream());
ImageView imageView = (ImageView) findViewById(R.id.main_layout_image_cover);
imageView.setImageBitmap(image); 
```

当然，这会在下载时阻塞当前线程，因此您应该使用 AsyncTask

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:00:00.787

假设你有图片 url，这里有一个代码示例，可以下载图片并将其分配给`ImageView`

```
Drawable drawable = LoadImageFromWebOperations(enclosure.getUrl());
if (drawable!=null)
img.setImageDrawable(drawable);
img.setScaleType(ScaleType.CENTER_CROP); // Used to crop the picture in case it is too big

public Drawable LoadImageFromWebOperations(String url) {
    try{
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    }catch (Exception e) {
        return null;
    } 
```

我建议您将此代码插入到 ASyncTask 中，因为它将下载图片，并且此类操作不打算在主线程上完成。如果您不添加 ASyncTask，UI 将冻结。

# titanium - Titanium KitchenSink 示例 - 表拉刷新

> ID：11906052
> 
> 赞同：0
> 
> 时间：2012-08-10T16:53:17.420
> 
> 标签：titanium

可能会询问原始“table_view_pull_to_refresh.js”示例中的以下代码，哪个部分导致标题停止并向上滚动回原始位置？我一直在尝试深入研究下面的代码，但是一旦加载了新行，就无法找到哪一行导致标题停止。

谢谢

```
var win = Ti.UI.currentWindow;

function formatDate()
{
    var date = new Date();
    var datestr = date.getMonth()+'/'+date.getDate()+'/'+date.getFullYear();
    if (date.getHours()>=12)
    {
        datestr+=' '+(date.getHours()==12 ? date.getHours() : date.getHours()-12)+':'+date.getMinutes()+' PM';
    }
    else
    {
        datestr+=' '+date.getHours()+':'+date.getMinutes()+' AM';
    }
    return datestr;
}

var data = [
    {title:"Row 1"},
    {title:"Row 2"},
    {title:"Row 3"}
];

var lastRow = 4;

var tableView = Ti.UI.createTableView({
    data: data
});

win.add(tableView);

var border = Ti.UI.createView({
    backgroundColor:"#576c89",
    height:2,
    bottom:0
});

var tableHeader = Ti.UI.createView({
    backgroundColor:"#e2e7ed",
    width:320,
    height:60
});

// fake it til ya make it..  create a 2 pixel
// bottom border
tableHeader.add(border);

var arrow = Ti.UI.createView({
    backgroundImage:"../images/whiteArrow.png",
    width:23,
    height:60,
    bottom:10,
    left:20
});

var statusLabel = Ti.UI.createLabel({
    text:"Pull to reload",
    left:55,
    width:200,
    bottom:30,
    height:"auto",
    color:"#576c89",
    textAlign:"center",
    font:{fontSize:13,fontWeight:"bold"},
    shadowColor:"#999",
    shadowOffset:{x:0,y:1}
});

var lastUpdatedLabel = Ti.UI.createLabel({
    text:"Last Updated: "+formatDate(),
    left:55,
    width:200,
    bottom:15,
    height:"auto",
    color:"#576c89",
    textAlign:"center",
    font:{fontSize:12},
    shadowColor:"#999",
    shadowOffset:{x:0,y:1}
});

var actInd = Titanium.UI.createActivityIndicator({
    left:20,
    bottom:13,
    width:30,
    height:30
});

tableHeader.add(arrow);
tableHeader.add(statusLabel);
tableHeader.add(lastUpdatedLabel);
tableHeader.add(actInd);

tableView.headerPullView = tableHeader;

var pulling = false;
var reloading = false;

function beginReloading()
{
    // just mock out the reload
    setTimeout(endReloading,2000);
}

function endReloading()
{
    // simulate loading
    for (var c=lastRow;c<lastRow+10;c++)
    {
        tableView.appendRow({title:"Row "+c});
    }
    lastRow += 10;

    // when you're done, just reset
    tableView.setContentInsets({top:0},{animated:true});
    reloading = false;
    lastUpdatedLabel.text = "Last Updated: "+formatDate();
    statusLabel.text = "Pull down to refresh...";
    actInd.hide();
    arrow.show();
}

tableView.addEventListener('scroll',function(e)
{
    var offset = e.contentOffset.y;
    if (offset <= -65.0 && !pulling)
    {
        var t = Ti.UI.create2DMatrix();
        t = t.rotate(-180);
        pulling = true;
        arrow.animate({transform:t,duration:180});
        statusLabel.text = "Release to refresh...";
    }
    else if (pulling && offset > -65.0 && offset < 0)
    {
        pulling = false;
        var t = Ti.UI.create2DMatrix();
        arrow.animate({transform:t,duration:180});
        statusLabel.text = "Pull down to refresh...";
    }
});

tableView.addEventListener('scrollEnd',function(e)
{
    if (pulling && !reloading && e.contentOffset.y <= -65.0)
    {
        reloading = true;
        pulling = false;
        arrow.hide();
        actInd.show();
        statusLabel.text = "Reloading...";
        tableView.setContentInsets({top:60},{animated:true});
        arrow.transform=Ti.UI.create2DMatrix();
        beginReloading();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:35:10.247

本文实际上详细介绍了它是如何构建的。

[http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html](http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html)

“还要注意一个有趣的方法，我们正在使用 setContentInsets。这个方法将改变 tableview 的内容位置 inset。在这段代码中，我们只是将它从顶部降低了 60 像素。这确保了 60 像素的标题视图在我们重新加载时保持可见。最后，Reloading 将使用以下代码将其提升 tableView.setContentInsets({top:0},{animated:true});。"

这些是相关的代码行

```
tableView.addEventListener('scrollEnd',function(e)
{
    if (pulling && !reloading && e.contentOffset.y <= -65.0)
    {
        reloading = true;
        pulling = false;
        arrow.hide();
        actInd.show();
        statusLabel.text = "Reloading...";
        tableView.setContentInsets({top:60},{animated:true}); // *******THIS IS IT
        arrow.transform=Ti.UI.create2DMatrix();
        beginReloading();
    }
});
var pulling = false;
var reloading = false;

function beginReloading()
{
    // just mock out the reload
    setTimeout(endReloading,2000);
}

function endReloading()
{
    // simulate loading 
    for (var c=lastRow;c<lastRow+10;c++)
    {
        tableView.appendRow({title:"Row "+c});
    }
    lastRow += 10;

    // when you're done, just reset
    tableView.setContentInsets({top:0},{animated:true}); // *********THIS TOO
    reloading = false;
    lastUpdatedLabel.text = "Last Updated: "+formatDate();
    statusLabel.text = "Pull down to refresh...";
    actInd.hide();
    arrow.show();
} 
```

# c# - 使用“goto”语句不好吗？

> ID：11906056
> 
> 赞同：61
> 
> 时间：2012-08-10T16:53:33.623
> 
> 标签：c#, loops, break, goto

在对如何突破二级循环进行了一些研究之后

```
while (true) { // Main Loop
   for (int I = 0; I < 15; I++) { // Secondary loop
       // Do Something
       break; // Break main loop?
   }
} 
```

大多数人建议调用“goto”函数
，如下例所示：

```
while (true) { // Main Loop
   for (int I = 0; I < 15; I++) { // Secondary Loop
       // Do Something
       goto ContinueOn; // Breaks the main loop
   }
}
ContinueOn: 
```

然而; 我经常听说“goto”语句是不好的做法。下图完美地说明了我的观点： [![找到系列](../Images/34042dafb6639775748db64997f94819.png)](https://xkcd.com/292/)

## 所以

*   **goto 语句到底有多糟糕，为什么？**
*   **有没有比使用“goto”语句更有效的方法来打破主循环？**

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-10T16:56:04.643

编辑：

> goto 语句到底有多糟糕，为什么？

这取决于具体情况。我不记得我发现它使代码比重构更具可读性的任何时候。这还取决于您对可读性的个人看法 - 有些人比其他人更不喜欢它，从其他答案中可以清楚地看出。（作为一个兴趣点，它广泛用于*生成*的代码 - C# 5 中的所有 async/await 代码实际上都基于大量的 goto）。

问题在于，`goto`倾向于使用的情况*往往*是那种无论如何都需要重构的情况——而`goto`坚持使用随着代码变得更加复杂而变得更难遵循的解决方案。

> 有没有比使用“goto”语句更有效的方法来打破主循环？

绝对地。将您的方法提取到一个单独的函数中：

```
while (ProcessValues(...))
{
    // Body left deliberately empty
}

...

private bool ProcessValues()
{
   for (int i = 0; i < 15; i++)
   {
       // Do something
       return false;
   }
   return true;
} 
```

我通常更喜欢这样做而不是引入一个额外的局部变量来跟踪“我完成了吗”——当然这也可以。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-10T18:10:44.483

我将强烈反对这里的所有其他答案。您使用的代码`goto`没有任何问题。C# 有一个声明是有*原因*`goto`的，它正是针对您描述的这些类型的场景。

`goto`只是有一个负面的污名，因为在 1970 年代和之前的人们会编写可怕的、完全不可维护的代码，其中控制流会因为`goto`. C#`goto`甚至不允许在方法之间转换！然而，这种非理性的污名仍然存在。

`goto`在我看来，使用“现代”来打破内部循环绝对没有错。人们提供的“替代方案”最终总是变得**更复杂、更难阅读**。

方法通常应该是*可重用*的。为循环的内部部分创建一个完全独立的方法，该方法只会从那个位置调用，并且方法实现可能最终位于源代码中某个遥远的位置，这并不是一种改进。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-08-11T10:00:40.267

> goto 语句到底有多糟糕，为什么？

由于给出的所有正常原因，这真的很糟糕。在不支持它们的语言中模拟标记循环时，它非常好。

在许多情况下，用函数替换它会分散真正应该作为同一个单元读取的逻辑。这使得阅读变得更加困难。没有人喜欢跟踪那些直到旅程结束时才真正做任何事情的函数，当你有点忘记你从哪里开始的时候。

用布尔值和一堆额外的 if 和 break 替换它真的很笨拙，并且更难遵循真正的意图，就像任何噪音一样。

在[java](https://stackoverflow.com/a/1548160/995876)（和 javascript）中，这是完全可以接受的（标记循环）：

```
outer: while( true ) {
    for( int i = 0; i < 15; ++i ) {
        break outer;
    }
} 
```

在 C# 中，看起来非常接近的等价物不是：

```
while( true ) {
   for (int I = 0; I < 15; I++) { 
       goto outer;
   }
}
outer:; 
```

因为这个词`goto`，有一种心理作用，让人放弃所有的常识，让他们不顾上下文地链接xkcd。

> 有没有比使用“goto”语句更有效的方法来打破主循环？

在某些情况下没有，这就是其他语言提供标记循环而 C# 提供`goto`. 请注意，您的示例太简单了，它使变通方法看起来不太糟糕，因为它们是针对示例量身定制的。事实上，我也可以这样建议：

```
 for (int I = 0; I < 15; I++) {
       break;
   } 
```

这个怎么样：

```
int len = 256;
int val = 65536;

for (int i = 0; i < len; i++)
{
    for (int j = 0; j < len; j++)
    {
        if (i + j >= 2 * val)
        {
            goto outer;
        }
        val = val / 2;
    }
}
outer:; 
```

这对你来说还不错吗：

```
int len = 256;
int val = 65536;

for (int i = 0; i < len; i++)
{
    if (!Inner(i, ref val, len))
    {
        break;
    }
}

private bool Inner(int i, ref int val, int len)
{
    for (int j = 0; j < len; j++)
    {
        if (i + j >= 2 * val)
        {
            return false;
        }

        val = val / 2;
    }

    return true;
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-01T10:08:03.480

我有时使用“goto”，我发现它看起来不错，就像上面的例子；

```
bool AskRetry(Exception ex)
{
  return MessageBox.Show(you know here...) == DialogResult.Retry;
}

void SomeFuncOrEventInGui()
{
  re:try{ SomeThing(); }
  catch (Exception ex)
  {
    if (AskRetry(ex)) goto re;
    else Mange(ex); // or throw or log.., whatever...
  }
} 
```

我知道你可以递归地做同样的事情，但谁在乎它只是工作，我使用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-16T09:08:36.030

我的一位同事（在固件编程方面有 15 年以上的经验）和我一直使用 goto。但是，我们只用它来处理异常！！例如：

```
if (setsockopt(sd,...)<0){
goto setsockopt_failed;
}
...

setsockopt_failed:
close(sd); 
```

据我所知，这是在 C 中处理异常的最佳方式。我相信，我也为 C# 工作。另外，我不是唯一一个这样认为的人：[C 或 C++ 中好的 goto 示例](https://stackoverflow.com/questions/245742/examples-of-good-gotos-in-c-or-c)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-08-03T17:25:13.680

为了在这里添加其他答案，除了打破嵌套循环之外，goto 的一个巧妙用途是简单而干净的状态机：

```
goto EntryState;

EntryState:
//do stuff
if (condition) goto State1;
if (otherCondition) goto State2;
goto EntryState;

State1:
//do stuff
if (condition) goto State2;
goto State1;

State2:
//do stuff
if (condition) goto State1;
goto State2; 
```

这是一种非常干净易读的状态机方法，最重要的是它的性能是免费的！虽然您可以在没有 goto 的情况下执行此操作，但实际上只会降低您的代码的可读性。不要避免 goto，在使用它之前请考虑一下。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-10T22:32:56.950

就我个人而言，我喜欢将 goto 视为“goto 导致地狱”......在许多方面这是正确的，因为它可能导致高度不可维护的代码和非常糟糕的做法。

话虽如此，它仍然被实施是有原因的，并且在使用时，如果没有其他解决方案可用，则应谨慎使用。OO 语言本身并不真正需要它（很多）。

这些天我看到它使用的唯一一次是混淆......一个使用 goto 从地狱创建代码的好例子，所以人们会被阻止试图理解它！

一些语言依赖于等效的关键字。例如，在 x86 汇编中，您有 JMP（跳转）、JE（如果相等则跳转）和 JZ（如果为零则跳转）等关键字。这些在汇编语言中经常需要，因为在此级别没有 OO，并且在应用程序中移动的其他方法很少。

AFAIK...远离它，除非绝对必要。

# apache - 有没有办法在 Apache htaccess 中重写 if/else？

> ID：11906060
> 
> 赞同：10
> 
> 时间：2012-08-10T16:54:00.977
> 
> 标签：apache, .htaccess, webserver

我想在我的 .htaccess 文件中创建以下结构：

```
If (SITE A DOMAIN or SITE A SUBDOMAIN) {  
   Rewrite this specific way ->  /index.php/$1 
} else {
   Rewrite this specific way ->  /directory/www/index.php/$1
} 
```

我在下面有我当前的代码，但是我的 Apache 错误日志抱怨它抛出了 500 秒：

**[错误] [客户端 ::1] mod_rewrite：达到内部重定向的最大数量。假设配置错误。如有必要，请使用“RewriteOptions MaxRedirects”来增加限制。，referer：**

我究竟做错了什么？谢谢！

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|blog)

RewriteCond %{HTTP_HOST} ^subdomain\.example\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^ example\.com$
RewriteRule .? - [S=1]
RewriteRule ^(.*)$ /directory/www/index.php/$1 [L]
RewriteRule .? - [S=1]
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T18:32:52.453

仅包含/排除使用条件可能比跳过标志更简洁（这可能会让人感到困惑）。但看起来有一个重定向循环导致 500。试试这个：

```
# If (SITE A DOMAIN or SITE A SUBDOMAIN) 
RewriteCond %{HTTP_HOST} ^subdomain\.example\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
# make sure we haven't already rewritten this URI
RewriteCond %{REQUEST_URI} !/directory/www/index.php
# don't rewrite if the resource already exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# rewrite
RewriteRule ^(.*)$ /directory/www/index.php/$1 [L]

# IF !(SITE A DOMAIN or SITE A SUBDOMAIN) 
RewriteCond %{HTTP_HOST} !^subdomain\.example\.com$ [NC]
RewriteCond %{HTTP_HOST} !^example\.com$ [NC]
# make sure we haven't already rewritten this URI
RewriteCond %{REQUEST_URI} !/index.php
# don't rewrite if the resource already exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# rewrite
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# postgresql - 如何在 PostgreSQL 数据库中处理多种人类语言？

> ID：11906063
> 
> 赞同：3
> 
> 时间：2012-08-10T16:54:07.683
> 
> 标签：postgresql, utf-8, character-encoding

如果数据库使用 UTF-8 编码，是否可以正确存储和检索所有人类语言的文本？

在 PostgreSQL 数据库中处理非英语语言时是否有任何“陷阱”？

使用 Ruby on Rails 和 PostgreSQL 9.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T07:13:00.150

除了 Spidey 和 Kevin 的观点（在客户端和`ENCODING 'utf-8'`数据库中使用 utf-8，请注意不同的排序规则），我强烈建议尽可能用它所在的语言标记每个文本字段。

如果您想使用全文搜索或任何类型的语言分析，了解每个字段使用哪种语言真的很有帮助。全文搜索不能进行词根分析等，除非它有字典和后缀列表被索引的文本 - 为此它需要了解语言。

存储[ISO 639 语言代码](http://www.loc.gov/standards/iso639-2/php/code_list.php)可能是一个合理的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:40:23.570

不同的语言倾向于以不同的方式对相同的字符串进行排序，因此`COLLATION`在排序时要小心。

[http://www.postgresql.org/docs/current/static/collat​​ion.html](http://www.postgresql.org/docs/current/static/collation.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T16:59:15.687

UTF-8 可以编码所有 Unicode 代码点，所以是的，你根本不会有任何问题。不过，您需要使用 UTF-8 连接，并确保您的应用程序也将输出读取为 UTF-8 编码文本。

# c# - 命名参数是方法签名的一部分吗？如何以及为什么？

> ID：11906067
> 
> 赞同：0
> 
> 时间：2012-08-10T16:54:37.303
> 
> 标签：c#, function, syntax, parameters, arguments

我的意思是，命名参数在某种程度上似乎是一个签名：您不能使用任何名称调用命名方法，而只能尊重参数的位置。但是，我们不能创建具有相同签名和名称但使用不同参数名称的两个方法。

接口可以强制类的方法使用给定参数的名称吗？

使用命名参数：

> int i = Function(NamedArgument: x);

不使用命名参数：

> int i = 函数（x）；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T16:58:55.700

就唯一性约束而言，参数名称不是签名的一部分，不。

从 C# 4 规范的第 3.6 节：

> 方法的签名由方法的名称、类型参数的数量以及每个形式参数的类型和种类（值、引用或输出）组成，按从左到右的顺序考虑。出于这些目的，出现在形式参数类型中的方法的任何类型参数都不是通过其名称来标识的，而是通过其在方法的类型参数列表中的序号位置来标识的。方法的签名特别不包括返回类型、可以为最右边的参数指定的 params 修饰符，也不包括可选的类型参数约束。

但是，参数名称*是*编译器“知道”该方法的一部分；它是必须在元数据中传播的信息，因为*它*用于命名参数。

> 接口可以强制类的方法使用给定参数的名称吗？

不，确实，您可能会导致一些非常混乱的代码：

```
interface IFoo
{
    public int M(int x, int y);
}

public class Foo : IFoo
{
    public int M(int y, int x)
    {
        return x - y;
    }
}

...

Foo foo = new Foo();
IFoo ifoo = foo;
Console.WriteLine(foo.M(x: 10, y: 3)); // Prints 7
Console.WriteLine(ifoo.M(x: 10, y: 3)); // Prints -7 
```

# .net - 如何禁用 FlipView 上的箭头？

> ID：11906073
> 
> 赞同：4
> 
> 时间：2012-08-10T16:54:51.567
> 
> 标签：.net, xaml, windows-8, windows-runtime, winrt-xaml

我有一个 FlipView，效果很好，但我想禁用滚动时淡入的 < 和 > 箭头。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T18:42:59.660

我认为这会破坏键盘/鼠标用户的情况，不是吗？

如果你真的需要，你可以从控制模板中删除按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-02T19:09:04.923

**这里有 2 个选项。**

**选项 1.**在`FlipView.Loaded`事件中动态删除箭头按钮。

```
private void flipView_Loaded(object sender, RoutedEventArgs e)
{
    Grid grid = (Grid)VisualTreeHelper.GetChild(flipView, 0);
    for (int i = grid.Children.Count - 1; i >= 0; i--)
        if (grid.Children[i] is Button)
            grid.Children.RemoveAt(i);
} 
```

**选项 2.**编辑`FlipView`控件的模板（正如 Filip Skakun 在他的回答中所说）。

# excel - 为什么我再次写入此文件后，excel文件中poi写入的数据丢失了？

> ID：11906074
> 
> 赞同：0
> 
> 时间：2012-08-10T16:54:53.643
> 
> 标签：excel, apache-poi

我编写了一个方法“writeData”，通过 apache poi 将现有 excel 文件中的列数据写入新的 excel 文件。它运作良好。但是当我再次尝试调用此方法时，之前的数据丢失了。为什么？有人可以帮助我吗？

```
public class ReadData {

    /**
     * @param args
     */
    Workbook wb, wb1;
    Sheet sheet, sheet1;
    Row row;
    Row row1;   
    static int cell;
    Cell cell1;

    static ArrayList<Cell> list1 = new ArrayList<Cell>();
    static ArrayList<Cell> list2 = new ArrayList<Cell>();

    public static ArrayList<Cell> readData(String filename, int cellNum, ArrayList array){

    try{        

        InputStream inp = new FileInputStream(filename);
        Workbook wb = WorkbookFactory.create(inp);
        Sheet sheet = wb.getSheetAt(0);

        for (int j=sheet.getLastRowNum(); j>0; j--) {

            Row row = sheet.getRow(j);
            Cell cell = row.getCell(cellNum);

            array.add(cell);

            System.out.println(cell);

        }

    }catch(Exception e){
        System.out.println("Wrong!" + e.getMessage());
        e.getStackTrace();
        System.out.println(e.getStackTrace());
        }
    return array;
    }

    public static void writeData(int cellNo, ArrayList<Cell> array){

        Workbook wb1 = new HSSFWorkbook();
        FileOutputStream fos = null;

            try{
                fos = new FileOutputStream("3.xls");
                Sheet sheet1 = wb1.createSheet("Data");

                for(int i = 0; i < array.size(); i++){
                Row row1 = sheet1.createRow(i);
                Cell cell1 = row1.createCell(cellNo);
                cell1.setCellValue(array.get(i).getNumericCellValue());
                }

                wb1.write(fos);
                fos.close();

                }catch (FileNotFoundException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    }

    public static void main(String[] args) {

    readData("1.xls",0,list1);  
    writeData(0,list1);
    readData("2.xls",0,list2);  
    writeData(1,list2);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:17:39.413

您的问题是您从头开始工作簿并`FileOuputStream`覆盖您的文件。

您需要打开将其链接到文件的工作簿。为此，请使用 InputStream 构建您的 Excel。

```
InputStream input = new FileInputStream("3.xls");
wb1 = new HSSFWorkbook(input); 
```

对于写作，我不确定您是否真的需要使用 a `FileOuputStream`，也许正确关闭工作簿就足够了（与 XSSFWorkbooks 一起使用）。

OutputStream 可以工作，但如果 Input 等于 Output，您可能会遇到一些错误。

# javascript - 带有缩放标尺的 jQuery UI 滑块作为高度选择器

> ID：11906088
> 
> 赞同：1
> 
> 时间：2012-08-10T16:56:21.263
> 
> 标签：javascript, jquery, jquery-ui, math, slider

我正在尝试对高度选择器的这种棘手输入进行数学计算。

基本上 - 我有一个 jQuery UI 滑块来选择一个高度。它以英寸为单位递增，最小值为 0，最大值为 120（10 英尺高）。

随着用户移动滑块，相应的标尺图形移动。

我已经建立了一个 jsfiddle 到目前为止我在这里：http: [//jsfiddle.net/x57Rw/](http://jsfiddle.net/x57Rw/)

你可以看到我的数学有点偏离那里。我知道我需要缩放标尺图形的偏移量，但不能完全围绕它。基本上是在寻找我需要调整的内容以使标尺与滑块输入（相当）正确匹配。它不必完全准确，但尽可能接近。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:14:32.947

您的滑块需要向下一点边距以与标尺的底部对齐，如下所示：

```
 #height-slider.ui-slider-vertical .ui-slider-handle {
            left: -.8em;
            margin-bottom: -16px;
            ...
        } 
```

您应该除以 144，而不是除以 120，因为您的标尺图像实际上包含 144 英寸，并且您的滑块也应设置为最大值 144：

```
function animateRulerOffset(sliderValue) {
    pixelOffset = 622-((sliderValue*622)/144);
    ...
} 
```

如果您真的只想要 120 英寸，那么您的标尺图像需要修改为在 10 英尺处结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:31:31.723

见[http://jsfiddle.net/x57Rw/14/](http://jsfiddle.net/x57Rw/14/)

标尺的高度是 744px，它有 12'。

最大值是 10'，所以我们必须删除 2'->744*2/12 px（好吧，我们添加它们，因为之后我们乘以 -1）。

然后，我们需要一个百分比。最大值为 120，因此 1-sliderValue/120（嗯，它是每一个，而不是百分比）。

这个百分比乘以标尺的高度减去标尺容器的高度。但是我们删除了 744*2/12px，所以我们也必须在这里添加它（嗯，它的减法，因为之后我们乘以 -1）：

```
pixelOffset = (744-112-744*2/12)*(1-sliderValue/120)+744*2/12; 
```

# javascript - 使用 URI 将 HTML 数据导出到 Mac 上的 Excel

> ID：11906092
> 
> 赞同：1
> 
> 时间：2012-08-10T16:56:39.097
> 
> 标签：javascript, excel, data-uri

所以我使用数据 URI 将 HTML 数据导出到 Excel，问题是，它在 IE（我正在修复）上不起作用，并且在 Mac 上不起作用。它将它导出为原始 HTML，这显然不是我想要的。这是我的 HTML（在 Windows 上完美导出到 Excel：

```
<html>

    <body>

        <table>

             <tr><td>Hello</td></tr><tr><td>Hi</td><td>Hola</td></tr>

        </table>

    </body>

</html> 
```

这是我的 JavaScript：

```
excelData = $(".excelData").html();

window.location.href = 'data:application/vnd.ms-excel,' + excelData; 
```

它与 Mac 上的不同 MIME 类型有关吗？我究竟做错了什么？

# android - 半屏活动

> ID：11906101
> 
> 赞同：2
> 
> 时间：2012-08-10T16:57:02.683
> 
> 标签：android, android-activity

我想创建一个只占用一半屏幕的活动，另一半显示背景（无论是主屏幕还是其他应用程序）。

另一件事是用户应该能够使用屏幕的其余部分。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:01:24.537

这并不完全符合您的要求 - 这意味着它肯定不是半屏，但它确实允许您构建显示在浮动窗口中的应用程序，以便用户可以与应用程序后面的内容进行交互。我没有使用它，但我认为它看起来很酷：

[突出链接](http://forum.xda-developers.com/showthread.php?t=1688531)

# c# - 将双 for 循环转换为 linq 查询

> ID：11906103
> 
> 赞同：3
> 
> 时间：2012-08-10T16:57:09.393
> 
> 标签：c#, linq, .net-4.0, dictionary

我有一个循环，一旦简化，它看起来像这样：

```
Dictionary<Tuple<A,G>,Decimal> results = new Dictionary<Tuple<A,G>,Decimal>();
foreach( A a in collectionA )
    foreach( B b in collectionB )
        results [Tuple.Create(a, (G)b.groupBy)] += (Decimal) Func(a, b); 
```

有没有办法可以使用 Linq 查询（例如`GroupBy`，使用`Sum`和）复制此结果？`ToDictionary`（正如对上一个问题的回答中所建议的[：](https://stackoverflow.com/a/11905618/529618)在[可能未初始化的 Dictionary 元素上执行加号等于操作的简洁方法](https://stackoverflow.com/questions/11905539/concise-way-to-do-a-plus-equals-operation-on-a-dictionary-element-that-might-not)）

* * *

**结果**

```
//Dictionary<EventGroupIDLayerTuple, Decimal> BcEventGroupLayerLosses 
```

使用以下 Yuxiu Li 的回答，我能够从链接的问题转换这 4 班轮：

```
BcEventGroupLayerLosses = new Dictionary<EventGroupIDLayerTuple, Decimal>();
foreach( UWBCEvent evt in this.BcEvents.IncludedEvents )
    foreach( Layer lyr in this.ProgramLayers )
        BcEventGroupLayerLosses.AddOrUpdate(
            new EventGroupIDLayerTuple(evt.EventGroupID, lyr),
            GetEL(evt.AsIfs, lyr.LimitInMillions, lyr.AttachmentInMillions), 
            (a, b) => a + b); 
```

进入这一个班轮：

```
BcEventGroupLayerLosses = this.BcEvents.IncludedEvents
    .SelectMany(evt => ProgramLayers, (evt, lyr) => new { evt, lyr })
    .GroupBy(g => new EventGroupIDLayerTuple(g.evt.EventGroupID, g.lyr), 
      g => GetEL(g.evt.AsIfs, g.lyr.LimitInMillions, g.lyr.AttachmentInMillions))
    .ToDictionary(g => g.Key, g => g.Sum()); 
```

两者都产生了相同的结果。

当然，两者都不是特别可读，这是一个很好的实验。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:20:02.070

```
Dictionary<Tuple<A, G>, decimal> dictionary =
            (from a in collectionA
             from b in collectionB
             group (decimal)Func(a, b) by Tuple.Create<A, G>(a, b.groupBy))
            .ToDictionary(g => g.Key, g => g.Sum()); 
```

在声明性语法中

```
var dictionary = collectionA
    .SelectMany(a => collectionB,
                (a, b) => new { a, b })
    .GroupBy(g => Tuple.Create(g.a, g.b.groupBy),
             g => Func(g.a, g.b))
    .ToDictionary(g => g.Key, g => g.Sum()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:09:06.990

我怀疑您想要以下内容：

```
 // Extract the key/value pair from the nested loop
var result = collectionA.SelectMany(a => collectionB, 
                                    (a, b) => new { 
                                        Key = Tuple.Create(a, (G)b.groupBy),
                                        Value = (decimal) Func(a, b)
                                    })
                        // Group by the key, and convert each group's values
                        // to its sum
                        .GroupBy(pair => pair.Key, 
                                 pair => pair.Value,
                                 (key, values) => new { Key = key,
                                                        Value = values.Sum() })
                        // Make a dictionary from the key/value pairs
                        .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

这不是我的想法，可能需要更多的括号:) 我还没有时间添加解释，但可以稍后再添加。

# c# - 如何从列表中删除第一项并保留索引

> ID：11906108
> 
> 赞同：4
> 
> 时间：2012-08-10T16:57:31.623
> 
> 标签：c#

我有一个列表，想删除第一项，同时保持下一项的索引相同。例如：

```
public List<string> Fruit
{
    get
    {
        List<string> fruits = dataSource.GetFruits();

        return messageStatuses ;
    }
} 
```

结果返回

```
[0] -- apple
[1] -- grape
[2] -- orange
[3] -- peach 
```

当第一项被删除时，结果应该是：

```
[1] -- grape
[2] -- orange
[3] -- peach 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T17:02:07.467

您可以为此使用字典

```
Dictionary<int,string> dic = new Dictionary<int,string>();

dic.Add(0,"Apple");
dic.Add(1,"Grape");
dic.Add(2,"Orange");
dic.Add(3,"Peach");

dic.Remove(0); 
```

现在 `dic[1]`会给你`"Grape"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:59:57.083

只需将索引 0 处的项目设置为`null`或其他值以指示它已被删除。显然，对于值类型（即`int`），这可能不是一个可行的选择。它还将导致`Count`包含所有空值，这可能是可取的，也可能不是可取的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:00:32.393

使用数组而不是列表。这将允许您删除某些索引处的项目，而不会弄乱索引本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T16:59:54.587

C# 中的列表不像 JavaScript 数组那样运行，您可以在其中删除一个项目并留`undefined`在原处。

您需要用可以忽略的占位符替换您的值。就像是

```
Fruit[0] = "ignore"; 
```

然后在你的循环中处理它。

# xquery - 使用序列中的参数调用函数？

> ID：11906109
> 
> 赞同：0
> 
> 时间：2012-08-10T16:57:36.980
> 
> 标签：xquery

有没有一种通用的方法来调用从序列中获得的参数的 xquery 函数？

例如，我可以这样做：

```
let $dateandtime := (xs:date('2006-08-15'),xs:time('12:30:45-05:00'))
return fn:dateTime($dateandtime[1], $dateandtime[2]) 
```

但是有没有一种方法可以在`fn:dateTime` *不*显式指定所有参数并*只*提供序列的情况下调用？（我意识到这具有有限的实用性，因为序列不能嵌套。）

以下是我将如何用其他语言实现此目的的示例：

*   Python：`functionname(*args)`
*   javascript:`functionname.apply(null, args)`
*   php:`call_user_func_array('functionname', $args)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:24:14.440

目前，在 XQuery 中没有办法做到这一点。与其他类型语言（如 Java）类似，函数签名的分配通常发生在编译时。由于在评估查询之前可能未知序列中的项目数，因此在许多情况下静态选择正确的*函数签名*会失败（一般注意：一个函数可能有多个函数签名，并且每个签名可能包含不同的数字论据）。

但是，Java 提供了反射包来在运行时动态访问和调用函数。XQuery 3.0 的新高阶特性可用于引入另一个`apply($f as function(*), $s as item()*)`功能。如果您认为这会有所帮助，[W3 问题跟踪器](https://www.w3.org/Bugs/Public/)可能是请求此类功能的最佳平台。

# android - 应用主题后，Android 按钮看起来很奇怪

> ID：11906112
> 
> 赞同：0
> 
> 时间：2012-08-10T16:57:47.993
> 
> 标签：android, android-layout, actionbarsherlock

我在将主题应用到按钮时遇到问题。不使用主题一切看起来都很好，正如您在此屏幕截图中看到的那样：http: [//i47.tinypic.com/2czyctv.jpg](http://i47.tinypic.com/2czyctv.jpg)

在我应用我的主题后，它看起来像这样：http: [//i48.tinypic.com/w03s6x.png](http://i48.tinypic.com/w03s6x.png)

颜色很好，但是按钮的高度不对，上按钮和水平线之间的空间也消失了。实际上，主题按钮的大小应该看起来像非主题按钮，因为我唯一想要改变的是颜色。

值/主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="Theme.KIT.Styled" parent="Theme.Sherlock.Light.DarkActionBar">

    <item name="actionBarStyle">@style/ActionBar</item>
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="android:buttonStyle">@style/Button</item>

</style>

<style name="ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/actionbar_background_shape</item>
    <item name="android:background">@drawable/actionbar_background_shape</item>
</style>

<style name="Button" parent="@android:style/Widget.Button">
    <item name="android:background">@drawable/kit_button</item>
</style>
</resources> 
```

可绘制/kit_button.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_enabled="false"
    android:drawable="@drawable/kit_button_background_shape" />
<item
    android:state_pressed="true"
    android:state_enabled="true"
    android:drawable="@drawable/kit_button_background_shape" />
<item
    android:state_focused="true"
    android:state_enabled="true"
    android:drawable="@drawable/kit_button_background_shape" />
<item
    android:state_enabled="true"
    android:drawable="@drawable/kit_button_background_shape" />
</selector> 
```

可绘制/kit_button_background_shape.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
<gradient 
    android:startColor="@color/KIT_GREEN"
    android:endColor="@color/KIT_GREEN_LIGHT"
    android:angle="90"
    android:centerX="0.5"
    android:centerY="0.5" />
</shape> 
```

我希望这样可以帮助我。对不起我的英语不好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:59:33.727

您的按钮填充曾经在 9-patch 背景中声明， GradientDrawable 不会为您执行此操作。您需要为您的主题添加一个 android:padding 属性或使用 9-patch。

# c# - 将 WPF DatagridComboBoxColumns 数据绑定到 MVVM 不起作用

> ID：11906115
> 
> 赞同：1
> 
> 时间：2012-08-10T16:57:53.363
> 
> 标签：c#, wpf, mvvm, caliburn.micro

按照这2个答案：

[将 WPF DataGridComboBoxColumn 与 MVVM 结合使用 - 绑定到 ViewModel 中的属性](https://stackoverflow.com/questions/3562934/using-wpf-datagridcomboboxcolumn-with-mvvm-binding-to-property-in-viewmodel)

[使用 MVVM 绑定 WPF DataGridComboBoxColumn](https://stackoverflow.com/questions/5517789/binding-a-wpf-datagridcomboboxcolumn-with-mvvm?lq=1)

**1) 在组合框中进行选择时，我无法设置 ObservableCollections 中的值。**

组合框正在使用 ViewModel 中的列表填充，但未设置值。

代码：

```
<DataGrid ItemsSource="{Binding SidValues1through5, Mode=TwoWay}"                                  
     AutoGenerateColumns="False"
     Grid.Row="1"   
     Margin="5"
     VerticalAlignment="Top"
     HorizontalAlignment="Center">
     <DataGrid.Columns>
           <DataGridComboBoxColumn Header="1"
                                   Width="100"
                                   SelectedValueBinding="{Binding Value1}"
                                   SelectedValuePath="Value1">
                                    <DataGridComboBoxColumn.ElementStyle>
                                        <Style TargetType="ComboBox">
                                            <Setter Property="ItemsSource"
                                                    Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AvailableSids}" />
                                        </Style>
                                    </DataGridComboBoxColumn.ElementStyle>
                                    <DataGridComboBoxColumn.EditingElementStyle>
                                        <Style TargetType="ComboBox">
                                            <Setter Property="ItemsSource"
                                                    Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AvailableSids}" />
                                        </Style>
                                    </DataGridComboBoxColumn.EditingElementStyle>
                                </DataGridComboBoxColumn> 
```

ViewModel 接口（我已经调试过，我已经连接到 ViewModel，视图上的其他控件绑定正确：

ETA：BindableCollection 继承自 ObservableCollection，它是一个 Caliburn.Micro 类型。

```
public interface ICustomSIDViewModel : IScreen
{
    BindableCollection<SidValues> SidValues1through5 { get; set; }
    BindableCollection<SidValues> SidValues6through10 { get; set; }

    IList<string> AvailableSids { get; }
}

public class SidValues
{
    public string Value1 { get; set; }
    public string Value2 { get; set; }
    public string Value3 { get; set; }
    public string Value4 { get; set; }
    public string Value5 { get; set; }
} 
```

**2) 一旦我解决了这个问题，有没有一种更简洁的方法让所有列都继承这一组 DataGridComboBoxColumn.ElementStyle 和 DataGridComboBoxColumn.EditingElementStyle？**

我问的原因是有 10 列都有相同的组合框列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:05:52.723

```
SelectedValueBinding="{Binding SelectedValue, Mode=TwoWay}"
                                       SelectedValuePath="Value1">

private string selectedValue;
    public string SelectedValue 
    {
        get
        {
            return selectedValue;
        }
        set
        {
            selectedValue = value;
            Notify("SelectedValue");
        } 
    }

    private void Notify(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    } 
```

您正在绑定 Collection 的属性之一，即您的 ComboBox 的 ItemsSource ，那是错误的。它应该像上面的 SelectedValue 一样具有单独的属性，并将此属性绑定到 ComboBox 的 SelectedValue。在此属性中，您可以获取并设置ComboBox 的选定值。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:07:05.453

对于第一个问题 - 它是 WPF，因此您不需要在绑定上使用 Mode=TwoWay，但为了以防万一，请尝试对初学者使用。

WPF afaik 的默认值是 TwoWay，但不是 SL。还是试试吧。

对于第二个问题，只需在资源字典中声明一个嵌套样式。嵌套样式适用于目标控件的子元素

例如

```
<Style x:Key="DataGridComboBoxStyle" TargetType="DataGrid">
    <!-- Nested -->
    <Style.Resources>
            <Style TargetType="ComboBox">
                <Setter Property="ItemsSource" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AvailableSids}" />
            </Style>
    </Style.Resources>
</Style> 
```

您还可以将样式应用于整个控件并将此样式嵌套在该样式中:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:44:10.000

我最终不得不去工作和继续这个项目的是一个 ListView，里面有一个 GridView。不完全一样，但看起来很相似。

我仍然对如何让 DataGrid 真正与 MVVM 和 Caliburn.Micro 一起工作感到好奇，我尝试了我找到的每个示例，但无法获得组合框选择来更新 VM 上的任何内容。

这是我的解决方案：

```
<ListView.View>
    <GridView>                                    
        <GridViewColumn Header="1"
                       Width="100">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{Binding Path=DataContext.AvailableSids,
                                        RelativeSource={RelativeSource FindAncestor, 
                                        AncestorType={x:Type UserControl}}}"
                              SelectedItem="{Binding Path=Value1, Mode=TwoWay, 
                                              UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </GridView>  
</ListView.View> 
```

# java - 使用 javax.xml.parsers.DocumentBuilder 解析网页时出现致命错误

> ID：11906117
> 
> 赞同：3
> 
> 时间：2012-08-10T16:58:01.543
> 
> 标签：java, html, html-parsing, sax, saxparser

我正在编写一个解析网页的程序（我无权访问，所以我无法修改它）。

首先，我连接并使用 getContent() 来获取页面的 InputStream。那里没有问题。

但是在解析时：

```
 public static int[] parseMoveGameList(InputStream is) throws ParserConfigurationException, IOException, SAXException {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = dbf.newDocumentBuilder();
        Document doc = builder.parse(is);
        /*...*/
    } 
```

这里 builder.parse 抛出：

```
org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 64; The system identifier must begin with either a single or double quote character.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:253)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)
    at cs.ualberta.lgadapter.LGAdapter.parseMoveGameList(LGAdapter.java:78)
    ... 
```

我正在解析（但无法更改）的页面看起来像

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" >

<html>
<head>
<META http-equiv="Expires" content="0" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<!-- ...  -->
</head>
<body>
<!-- ...  -->
</body>
</html> 
```

我怎样才能克服这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:07:34.750

Html 不是有效的 xml。使用 xml 解析器来解析 html 可能会导致很多错误（正如您已经发现的那样）。

您的 html 失败的原因是您的 Doctype 声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" > 
```

xml 解析器期望“PUBLIC”文档类型声明如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "FALLBACK PATH TO DTD" > 
```

如果您无法更改 html 页面，我不确定您可以做些什么。也许您可以修改/包装您的输入流以添加一些虚拟数据以使其符合预期，或者删除 doctype 声明。

您应该改用 HTML 解析库。我不知道有什么想法，但是这个（较旧的）帖子似乎列出了几个。[http://www.benmccann.com/blog/java-html-parsing-library-comparison/](http://www.benmccann.com/blog/java-html-parsing-library-comparison/)。搜索 Google 也会返回 [http://jsoup.org/](http://jsoup.org/)

# c# - LC.exe 无法运行

> ID：11906118
> 
> 赞同：20
> 
> 时间：2012-08-10T16:58:06.170
> 
> 标签：c#, .net, visual-studio-2010

在编译时，我收到[LC.EXE的错误](http://msdn.microsoft.com/en-us/library/ha0k3c9f(v=vs.80).aspx)

`The specified task executable "LC.exe" could not be run. The filename or extension is too long`

当我编译我的单元测试项目时会发生此错误。在我见过的谷歌技巧中，没有任何效果。

*   我设置为 Target framework = ".NET Framework 4" 而不是客户端配置文件。

这从今天开始。源代码控制历史中几乎没有任何内容。这些更改都与`AssemblyInfo.cs`第 3 方实用程序增加我们的版本号有关。

**更新**
查看我的输出窗口，对 LC.EXE 的命令行调用是**巨大的**

编译Licx文件：
`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\LC.exe /target:BuildAll.Tests.dll /complist:Properties\licenses.licx /outdir:obj\Debug\ /i:C:\`

有100个`/i`参数...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-23T11:33:12.560

有 MS Support 解决方法：

> 构建项目时，每次遇到此错误时，请从项目中删除许可证文件，只需删除许可证文件即可

[https://connect.microsoft.com/VisualStudio/feedback/details/779433/lc-exe-task-command-line-too-long](https://connect.microsoft.com/VisualStudio/feedback/details/779433/lc-exe-task-command-line-too-long)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-12T13:55:42.880

我将文件上的属性值`Build Action`从`EmbeddedResource`更改为。它解决了这个问题。`None``licenses.licx`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T13:52:04.583

有同样的问题。对于 Lc.exe，会生成一个命令行，最多限制为大约 32k 个字符。在此命令中，通常所有引用都使用完整路径写入。

因此，如果您有很多参考资料，您可能会遇到麻烦。

您可以做一些事情： - 删除未使用的引用 - 确保您不引用间接依赖。请改用您可以为程序集定义的提示路径。- 缩短放置参考的路径 - 您可以创建一个虚拟驱动器将参考放在那里以获得缩短的可能参考路径（例如 Z:\my.dll）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:34:12.640

我今天遇到了一个问题，当我将引用的路径更改为更长的路径时，它得到了解决。例如，我最初把它放在`mydocuments\user\...\...\..`. 但是当我将路径更改为 时`c:\dlls\`，它就像一个魅力。希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T16:03:17.690

我对文件 LC.exe 有一个严重的问题，一切都是因为我使用的组件位于网络驱动器 (G :) 中，并且从那个位置我永远无法编译可执行文件。我终于通过在互联网选项中添加可靠的站点 Intranet 之间的网络驱动器的 IP 地址来解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-07T01:59:19.613

我使用此博客[文章](https://blogs.msdn.microsoft.com/visualstudio/2010/02/15/if-your-build-fails-with-msb6002-the-command-line-for-the-resgen-task-is-too-long/)中提到的命令行实用程序“Subst”来解决我的 LC.exe 问题。

1.  为您的构建打开正常或更高的详细程度。
2.  在“输出”窗口中，检查正在执行 LC 任务的行。请注意，将有许多带有其他二进制文件路径的 /i 参数。
3.  找到一个或多个路径，您可以使用“Subst”来帮助缩短路径，以帮助减少传递给“LC.exe”的所有参数的总长度。
4.  接下来，在 Visual Studio 中打开问题项目的属性窗口并选择“引用”选项卡，然后添加您使用 Subst 定义的新驱动器。

构建项目。

请记住，Subst 不会在重新启动后持续存在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-14T07:43:44.420

我有同样的问题，我将此代码添加到我的项目中并且它有效。

```
<Target Name="WorkaroundMSBuild2836" BeforeTargets="CompileLicxFiles">
   <!-- Work around https://github.com/Microsoft/msbuild/issues/2836 by
        temporarily setting TargetFrameworkVersion to a version high
        high enough to cause the LC task to use a response file. -->
   <PropertyGroup>
      <_OriginalTargetFrameworkVersion>$(TargetFrameworkVersion) 
      </_OriginalTargetFrameworkVersion>
      <TargetFrameworkVersion>v4.6.1</TargetFrameworkVersion>
   </PropertyGroup>
</Target>
<Target Name="UndoWorkaroundMSBuild2836" AfterTargets="CompileLicxFiles">
   <PropertyGroup>
   <TargetFrameworkVersion>$(_OriginalTargetFrameworkVersion) 
   </TargetFrameworkVersion>
   </PropertyGroup>
 </Target> 
```

欲了解更多信息，请阅读[这篇文章](https://developercommunity.visualstudio.com/content/problem/291229/lcexe-the-filename-or-extension-is-too-long-1.html)

# vb.net - VB 初学者环境

> ID：11906119
> 
> 赞同：-3
> 
> 时间：2012-08-10T16:58:26.333
> 
> 标签：vb.net

我对编程很陌生，我想开始编程。听说visual basic不错，想知道一个好的环境入手。关于从哪里开始的任何想法？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:00:08.377

欢迎！

我认为您将能够在 Microsoft 网站上找到所需的内容，因为他们创建了 VB。我也相信它是免费下载的。我从 Java 开始，但 VB 可能会更好。

这是链接

[http://msdn.microsoft.com/en-us/vstudio/ms788232.aspx](http://msdn.microsoft.com/en-us/vstudio/ms788232.aspx)

编辑：

我没有意识到你在你的问题中标记了 VB.net，下面是链接：

[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:02:26.730

如果您想在 VB.Net 中开始编程，您可能需要查看 Visual Studio ...

这是快速版本的链接：http: [//www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express)

# python - python负面看后面

> ID：11906122
> 
> 赞同：0
> 
> 时间：2012-08-10T16:58:45.943
> 
> 标签：python

有没有办法扫描整个文本文档并说找到所有说“lol”的内容并将其替换为第一个前一章标签的 id 值？也许是这样的。

Python

```
x=open('source.txt')
lines = x.readlines()
for line in lines:
  if line.startswith('<text'):
    line.replace('lol', first previous chapter id value)
x.write(lines)
x.close() 
```

源文本

```
<chapter id="1">
<text class="lol">
<text class="lol">
<chapter id="2">
<text class="lol">
<text class="lol">
<chapter id="3">
<text class="lol">
<text class="lol">
<chapter id="4">
<text class="lol">
<text class="lol"> 
```

结果文本

```
<chapter id="1">
<text class="1">
<text class="1">
<chapter id="2">
<text class="2">
<text class="2">
<chapter id="3">
<text class="3">
<text class="3">
<chapter id="4">
<text class="4">
<text class="4"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:08:52.803

试试看。基本上，您需要做的额外工作就是找到该章节 ID。另外我假设您知道要写入文件，因此我只打印每一行。

```
import re
with open('source.txt') as x:
    for line in x:
        if line.startswith('<chapter'):
                id = re.findall('"([^"]*)"', line) #Grabs string between matching quotations
        if line.startswith('<text'):
                line = line.replace('lol',id[0])
        print line[:-1] 
```

输出：

```
<chapter id="1">
<text class="1">
<text class="1">
<chapter id="2">
<text class="2">
<text class="2">
<chapter id="3">
<text class="3">
<text class="3">
<chapter id="4">
<text class="4">
<text class="4"> 
```

# java - 部分 CSS 代码在 Chrome 中不起作用

> ID：11906126
> 
> 赞同：1
> 
> 时间：2012-08-10T16:58:52.403
> 
> 标签：java, css, google-chrome, stylesheet

你好参考我之前的问题，我想要一个水平列表：

[从 CSS 内联元素中删除多余的空格](https://stackoverflow.com/questions/11797696/remove-extra-spaces-from-css-inline-element)

CSS：

```
display: inline;
list-style-type: none;
padding-right: 7px;
white-space: nowrap; 
```

它在 IE 中运行良好，但在 Chrome 中却不行。所以在chrome中，列表显示：内联；列表样式类型：无；不起作用，我有一个垂直列表，每个项目前都有点，而不是简单的水平列表。

谢谢，萨拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:05:14.987

我有这个设置，它应该可以工作：

```
 #navBar ul {
        list-style: none;
    }
    #navBar li {
        display: inline;
        margin-right: 15px;
        padding-top: 10px;
        padding-left: 20px;
        padding-right: 20px;
        padding-bottom: 12px;
    } 
```

这假定列表位于 id 为“navBar”的 div/span 内

# python - python最低共同祖先

> ID：11906132
> 
> 赞同：3
> 
> 时间：2012-08-10T16:59:17.567
> 
> 标签：python, algorithm, tree

在 Python 中实现最低共同祖先的最简单方法是什么？我有一棵树，它由每个节点表示，每个节点都有一个指向其父节点的指针，我希望能够找到给定两个节点的第一个共同祖先。我提出了几个想法，但没有一个特别吸引人

1.  让每个节点包含其基数列表，并执行连接，找到最长的公共前缀，然后取最后一个元素。不幸的是，我不知道有任何内置方法可以做最长的公共前缀，所以这需要手动循环。

2.  让每个节点包含一组它的基并执行一组交集，并取最大元素。但这需要定义自定义比较运算符，我什至不确定它是否会起作用。

我该怎么办？我正在寻找有利于简单而不是性能的东西，因此需要复杂处理的解决方案已经出现。

编辑：我发现虽然没有内置方式，但您可以使用 zip 在一行中执行最长的公共前缀，所以它仍然相当简单。

```
common = [x for x in zip(*baselists) if len(set(x)) == 1][-1] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T17:22:32.757

在您无法修改树以包含深度的假设下，您可以执行以下操作：

对于每个节点，递归地向上遍历树，直到找到根。在每个父节点处，将该节点插入到`list`. 这应该给你`list_a`和`list_b`。遍历最短列表，比较每个列表中的元素。当您找到一个不匹配的条目时，前一个条目是您最大的父元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T17:03:33.410

取每个节点的深度（到根的距离）。如果一个比另一个低，则从较低的节点向上走，直到深度相等。然后检查身份，每次检查失败时在每一侧向上移动。

您可以使用单个 while 循环来执行此操作。一旦您选择了具有相同深度的祖先：

```
while (ancestorA !== ancestorB) {
    ancestorA = ancestorA.parent();
    ancestorB = ancestorB.parent();
} 
```

当 while 循环终止时，`ancestorA`每个`ancestorB`人都将成为您的共同祖先。

这不仅应该非常简单，而且应该相当快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-10T21:35:22.380

Python 有内置的集合。为什么不使用类似（伪代码）的东西：

```
a_ancestors = set()
while a:
  a_ancestors.add(a)
  a = a.parent

while b:
  if b in a_ancestors:
    return b
  b = b.parent

return None # <- can't reach that for a *tree* !!! 
```

这将构建节点*a*的所有祖先（包括*a*本身）的（无序）集合。

然后，第二次，我们遍历*b*的所有祖先。根据定义，作为 a 的祖先的*b的第**一个*祖先将是第一个共同的祖先。这在*O(n)*中有效（在空间和时间上）

* * *

*您可以通过同时收集a*和*b*的祖先集来潜在地加速该过程（最终以空间占用为代价）——一旦找到公共节点就停止 a。代码有点做作，因为您必须处理其中一个分支在另一个之前到达根：

```
visited = set()
while a or b:
  if a:
    if a in visited:
      return a
    visited.add(a)
    a = a.parent

  if b:
    if b in visited:
      return b
    visited.add(b)
    b = b.parent

return None # <- can't reach that for a *tree* !!! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:47:10.693

我想这取决于你的树，以及它将包含多少对象。如果这个数字在内存方面是合理的（可能少于几百万个节点，但这只是我的一个疯狂猜测），我会使用你的建议 #2。在集合中只保留每个碱基的字符串表示，因此内置比较将起作用。应该很快，我想你可以用几行代码来实现它。如果字符串表示不实用，或者如果您需要对象本身并且无法实现所有对象的主 dict，只需在节点对象中定义比较方法（如果我记得，则为**eq**和**neq ）。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T22:02:48.683

想它来维护父母集合，最好使用带有 = 的哈希映射，因为在这种情况下，您不会花费登录来搜索父母列表。因此，在每次迭代中检查此映射，如果当前节点的父节点已存在于映射中，则此父节点就是您的结果。在最坏的情况下，它会给出 O(n)，但如果您在某些情况下同时开始对两个节点进行分析，您将能够更快地找到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T07:33:47.183

既然在这两种情况下你已经有一个指向父节点的指针，为什么不这样做：（类似于奇怪的加拿大所说的，但是......）

创建每个节点的父节点的列表，在每个阶段按顺序构建列表。所以随着你走得更高`list_a`而增长。`list_b`将每个列表中添加的最后一项与其他项进行比较。只要 list_a 中的某个项目与 list_b 中的某个项目匹配，您就有了最低的共同祖先。

```
while (parent_a not in list_b) or (parent_b not in list_a):
    ... 
```

您不需要一直重建链直到根。在任何情况下，您都必须按顺序（向前或向后）检查每个父级。

# macos - Applescript 使用登录 shell 运行 shellscript

> ID：11906133
> 
> 赞同：2
> 
> 时间：2012-08-10T16:59:18.497
> 
> 标签：macos, rake, applescript, rvm

我有一个我希望由 OS X 的文件夹操作触发的 shell 脚本。使用 applescript 和命令似乎很容易做到这一点`do shell script`，但是脚本不是在**login shell**中执行的。我的环境具有对该脚本很重要的系统变量。

这是我实际运行的 rake 命令，并且重要的 rake 和 ruby​​ 版本由 rvm 管理。

是否有任何简单的方法可以在登录 shell 中生成和执行 applescript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:09:08.597

这可能不是正确的方法，但您可以将 bash 或 zsh 作为登录 shell 使用`-l`.

```
do shell script "bash -lc " & quoted form of "env" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T23:07:33.087

试试这个苹果脚本：

```
 tell application "Terminal"
    activate
    tell window 1
        do script "./myscript.sh; exit"
        repeat while busy
            delay 1
        end repeat
        close
    end tell
    end tell 
```

它将使用已经存在的终端窗口（如果存在）。

# c# - 新表达式在类型后需要 ()、[] 或 {}

> ID：11906134
> 
> 赞同：-2
> 
> 时间：2012-08-10T16:59:18.857
> 
> 标签：c#, asp.net

任何人都可以看到下面的代码发生了什么。我正在尝试使用数据库中的动态文本和 ID 值动态创建链接按钮。

```
 rptHeadline.DataSource = ds;

        LinkButton lb = new LinkButton

        if (ds.Tables[0].Rows.Count <= 0) {

        lb.Text = ds.Tables[0].Rows[0]["URL"].ToString();
        lb.ID = ds.Tables[0].Rows[0]["URL"].ToString();

        }

        rptHeadline.DataBind(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T17:00:41.427

声明`LinkButton lb = new LinkButton`不完整。您需要添加`();`调用默认构造函数。

```
LinkButton lb = new LinkButton(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:01:36.700

我假设以下内容：

```
LinkButton lb = new LinkButton 
```

应该：

```
LinkButton lb = new LinkButton(); 
```

不确定 LinkBut​​ton 是否需要参数！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:00:27.357

此处缺少分号和括号：

```
LinkButton lb = new LinkButton 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:01:46.910

```
 LinkButton lb = new LinkButton(); 
```

# java - Java - 以有序的方式保持外部集合

> ID：11906135
> 
> 赞同：0
> 
> 时间：2012-08-10T16:59:25.897
> 
> 标签：java, collections

假设一个外部集合有以下两种方法：`add(BusiessObject)`to end 和`remove(BusinessObject)`. 现在，我知道我想要的对象的顺序，并且我想确保外部集合保持该顺序。所以，如果我从 BO1、BO2、BO3 开始，然后如果我删除 BO2 并再次添加它，我想确保顺序相同。

我正在考虑按照我想要的顺序保留我的当前项目列表，并且在每次插入时，我都会清除外部列表，然后从我的排序列表中添加所有元素。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:07:52.577

如果您无法控制外部集合，我认为您提出的解决方案就是方法。要使 Java 端集合保持有序，您无需继续调用 sort 方法，而只需使用有序集合（如[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)或[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)）或任何实现[SortedSet](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)或[SortedMap](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)的集合来存储数据。正如@AdelBoutros 所说，您仍然需要实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)或[Comparator 。](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

顺便说一句，我很好奇你的外部收藏。你能说它是什么吗？如果我们知道它是什么，也许我们可以用另一种方法思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:04:31.493

java内置的[集合排序](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)有什么问题？

您只需让您的对象实现`Comparable`接口和VOILA :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:30:18.447

也许在这里使用适配器模式会很合适。在您的情况下，创建一个实现 List 的类（或另一个更适合您的订购目的的集合）并拥有一个外部集合。在适配器的方法中，您可以按照自己的方式操作外部集合的元素。即使您使用的是您在问题中提到的想法，适配器也是一个很好的设计。

另一种方法是相反的。扩展外部集合并拥有一个 List/Queue/Set。因此，您的客户端代码将使用这个新的扩展类作为包装器。然后在您的列表中，您显然会使用排序和可比/比较器技术。

# android - 在 android 上看不到使用 phonegap 保存的联系人

> ID：11906136
> 
> 赞同：2
> 
> 时间：2012-08-10T16:59:28.297
> 
> 标签：android, cordova, contacts

我在使用 phonegap(1.9) api 保存联系人时遇到问题。

当我尝试在 android 模拟器上保存联系人时，一切正常，联系人被保存，我可以从通讯录中看到它。

我的问题是在使用设备时保存联系人。当我按下按钮保存联系人时，会触发 onSuccessFunction 并收到 OK 消息，但是当我访问通讯录时找不到该联系人。

奇怪的是，当我拨打我要保存的号码时，会显示联系人的姓名。

我尝试将它部署在 2 个不同的设备上（LG Optimus 一个，android 2.2.1 和 Samsug Galaxy 2，android 2.3.5），结果是一样的。

请帮忙解决这个问题...

```
function addContact(emp){

    // create a new contact object
    var contact = navigator.contacts.create();
    //contact.displayName = "Stam";       

    // save First and Last name
    var name = new ContactName();
    name.givenName = emp.firstName;
    name.familyName = emp.lastName;
    contact.name = name;

    // save cell-phone and office-phone
    var phoneNumbers = [];
    phoneNumbers[0] = new ContactField('work', emp.officePhone, false);
    phoneNumbers[1] = new ContactField('mobile', emp.cellPhone, true);
    contact.phoneNumbers = phoneNumbers;

    var emails = [];
    emails[0] = new ContactField('email', emp.email, false); 
    contact.emails = emails;

    var organizations = [];
    organizations[0] = new ContactField('department', emp.department, false);
    organizations[1] = new ContactField('title', emp.title, false);
    contact.organizations = organizations;

        // save contact
        contact.save(onSaveSuccess,onSaveError);
}

// onSaveSuccess: Get a snapshot of the current contacts
function onSaveSuccess(contact) {
    alert("Save Success");
}

// onSaveError: Failed to get the contacts
//
function onSaveError(contactError) {
    alert("Error = " + contactError.code);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:31:29.427

进入通讯录应用程序。单击菜单按钮并选择显示选项。然后您需要选择您添加的帐户并单击复选框以显示所有联系人。通常我将其设置为显示来自所有帐户的联系人。然后，一旦您单击完成按钮，您将被带回联系人应用程序，您最终将看到您保存的联系人。

# java - JPQL 将 Concat 解析为 NULL

> ID：11906137
> 
> 赞同：4
> 
> 时间：2012-08-10T16:59:31.967
> 
> 标签：java, jpa, eclipselink, jpql

我需要帮助，我正在使用 Eclipse-Link 2.4（较新的），我有一些带有 CONCAT 字符串函数的 JPQL 函数，我正在使用 Instruccion

```
SELECT NEW test.Routing(r.idOperacion, CONCAT(r.reference, 'Test') ) FROM Routing r; 
```

它更复杂，但我让 JPQL 有点短，这就是问题所在

解决`CONCAT(r.reference, 'Test')`为 a`Boolean`并说没有像这样的构造函数，`Routing(Strnig, Boolean)`因为没有，只取 2 个字符串，这是因为我已经从 glassfish 升级了我的 eclipselink。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:44:15.167

您在 EclipseLink 2.4 中发现了错误。查询在语法上是正确的 JQPL 查询，例如在 EclipseLink 2.3.3 中有效。

解决方法是使用[FUNC](http://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements#FUNC)调用 CONCAT 数据库函数：

```
SELECT NEW test.Routing(r.idOperacion, FUNC('CONCAT', r.reference, 'Test') ) 
FROM Routing r; 
```

如果不需要 2.4 中引入的功能，您可以做的其他事情是提交错误并回滚到 2.3.3 版本。

# qt - 如何在另一个 UI 文件中继承 Qt UI 文件

> ID：11906139
> 
> 赞同：0
> 
> 时间：2012-08-10T16:59:33.300
> 
> 标签：qt

我在 QT 设计器中创建了“base.ui”文件，我想在另一个“UI”文件中继承这个“base.ui”文件。有什么办法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:00:20.080

我不知道 - 我认为您正在尝试做的是在另一个内部使用自定义小部件？

您可以通过插件扩展设计器，我更熟悉 PyQt 的语法，或者我会给您一个编码示例，但请阅读以下内容：

[http://doc.qt.nokia.com/qtcreator-2.0-snapshot/adding-plugins.html](http://doc.qt.nokia.com/qtcreator-2.0-snapshot/adding-plugins.html)

和：

[http://doc.qt.nokia.com/4.7-snapshot/designer-using-custom-widgets.html](http://doc.qt.nokia.com/4.7-snapshot/designer-using-custom-widgets.html)

一般的想法是您的一个 UI 文件正在为 QWidget 的子类定义接口。然后，您将使用新的 QWidget 子类作为另一个 QWidget 子类的一部分，并通过插件在设计器中显示其 UI 内容。

# c++ - 公共头文件中的外部类以及类的头文件中的外部类

> ID：11906142
> 
> 赞同：0
> 
> 时间：2012-08-10T16:59:38.890
> 
> 标签：c++

嗨，我不知道如何问这个问题我已经做了相当多的查找，但结果却是空的；所以如果这已经过去了，我必须道歉。我正在做我的第一个 c++ 项目，这很有趣。编译代码时出现重新定义错误。该项目由 3 个主文件组成，每个文件都有自己的头文件和一个它们都使用的通用头文件。我希望我的其他文件能够访问这个类，所以我在公共头文件中声明了它。我在警卫中写道，所以我认为这可以避免这个错误，但事实并非如此，我不明白为什么。

这是有问题的两个头文件。

菜单.h

* * *

```
#ifndef MENU_H
#define MENU_H
#include "common.h"
class menu
{
   int x, y, iterations, time;
   void title(int maxX, int maxY);
   void titleSplash();
   void fall(bool, int&, int, int);

public:
menu();
void init();
int score;
void gameOver(int how);
void mainMenu();

};

#endif 
```

常见的.h

* * *

```
#ifndef COMMON_H
#define COMMON_H
   //things that all files need
        #include <curses.h>
        #include <string.h>
        #include <cstring>
        #include <cstdlib> //for debugging
        #include <unistd.h>
        #include <iostream>

        //using namespace std;

        #ifdef _WIN32//are we running windows?

        #define _WIN32_WINNT 0x0600
        #define CLOCK 2//only used for the opening animaitons repalaces clock
        #define SLEEP(a) sleep(a);//in 1000s of a second
        #include "WIN32.h"
        #endif

        #ifndef _WIN32

        #define CLOCK 8
        #define SLEEP(a) usleep( a * 1000);//in 1 000 000s of a second// replaces CLOCK

        #endif

        #define TIMER 17 //for about 60 times a second rounding up form 16.666666

     #ifndef MAIN_H
        #ifndef NON_MAIN_COMMON
        #define NON_MAIN_COMMON

        //common things that i dont want to put in each header file

    #endif

#endif
//everything else if after here including everything common.cpp
//------------------------------------------------------------------------------------------

//anything in myLib MUST be externed to avoid multiple definitions error
#ifndef MYLIB_H
extern void getStdScr();
extern int stdx, stdy, score;
extern WINDOW * win;
extern void ncursesInit();
extern void wrapper();
extern void newGame();
extern std::string keyPress();
extern void bclear(WINDOW * window);
#endif

#ifndef MENU_H
class menu
{
public:
menu();
void init();
int score;
void gameOver(int how);
void mainMenu();
};
#endif

//end of myLib

#endif
//EOCOMMON 
```

我认为 menu.h 和 common.h 中的守卫会阻止重新定义我的菜单类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:11:42.750

您从发布的代码中收到多个定义错误的原因并不明显。但答案很简单。不要定义类菜单两次。我不明白你为什么这样做。你觉得它有什么好处？只需将它放在 common.h 或 menu.h 中一次，就可以了。

当您说“该项目由 3 个主文件组成，每个主文件都有自己的头文件和一个共同使用的头文件”时，您似乎误解了头文件的作用。但是头文件中的所有内容都是通用代码。这就是头文件的用途。所以我的选择是将类菜单放在 menu.h 中，然后在需要的地方包含 menu.h。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:02:38.317

如果你多次定义一个类，你会从你的 common.h 中丢失`#define MENU_H`（以及），你每次都需要整个警卫，而不仅仅是部分。`#define MYLIB_H``#ifndef MENU_H`

此外，您应该使用`#include "menu.h"`, 和，而不是再次定义菜单类`#include "mylib.h"`。如果 2 标头都包含另一个标头，则这不是错误，前提是两者都需要先定义另一个标头，但显然情况并非如此。

PS：有一个`#else`，所以代替

```
#ifdef _WIN32
  // for windows
#endif
#ifndef _WIN32
  // for anything else
#endif 
```

你可以写：

```
#ifdef _WIN32
  // for windows
#else
  // for anything else
#endif 
```

# mysql - 获取 GROUP BY 语句的最新文本条目

> ID：11906143
> 
> 赞同：2
> 
> 时间：2012-08-10T16:59:41.383
> 
> 标签：mysql

我有一个用于保存邮件对话的数据库

```
table "conversations"
ID    SUBJECT
1     meeting on Friday

table "conversations_mails"
ID    CONVERSATION_ID    TEXT                               CREATED_ON
1     1                  "What about a meeting on Friday?"  2012-08-05 10:00:00
2     1                  "that's a good idea!"              2012-08-10 15:00:00 
```

现在，我想显示一个对话概述页面，显示最新回复的截断文本版本。例如

```
"Meeting on Friday"
That's a good ... 
```

我尝试通过 GROUP BY 来实现这一目标。但我得到的是表格中的第一个回复（“星期五开会怎么样”），而不是最后一个“这是个好主意”。

这是我的 SQL 语句：

```
SELECT *, MAX(conversations_mails.created_on) As conversation_last_reply,
  MAX(conversations_mails.id) AS maxId
FROM conversations 
LEFT JOIN conversations_mails ON conversations_mails.conversation_id = conversations.id 
GROUP BY conversations.id 
ORDER BY conversation_last_reply DESC 
```

我知道如何通过 MAX() 获取最高 ID，但是对应的 TEXT 条目呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:12:46.757

试试这个-

```
SELECT *, MAX(conversations_mails.created_on) As conversation_last_reply,
  MAX(conversations_mails.id) AS maxId
FROM conversations 
LEFT JOIN conversations_mails ON conversations_mails.conversation_id = conversations.id 
WHERE conversations_mails.id = (select max(conversations_mails.id) from conversations_mails where conversations_mails.conversation_id = conversations.id)
GROUP BY conversations.id 
ORDER BY conversation_last_reply DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:33:59.330

有两种选择：使用子查询（如 geeky_bat 建议的那样），或添加另一个`JOIN`以过滤掉较旧的行。以下是如何使用另一个`JOIN`：

```
SELECT 
  cm.created_on AS conversation_last_reply,
  cm.id AS maxId, 
  cm.conversation_text
FROM conversations c
  LEFT OUTER JOIN conversations_mails cm
  ON cm.conversation_id = c.id 
  LEFT OUTER JOIN conversations_mails cm_newer
  ON cm_newer.conversation_id = c.id
  AND cm_newer.created_on > cm.created_on
WHERE cm_newer.created_on IS NULL
GROUP BY c.id 
ORDER BY cm.created_on DESC 
```

[http://sqlfiddle.com/#!2/5dfea/18](http://sqlfiddle.com/#!2/5dfea/18)

# node.js - 使用 Nodejs 和 Socket IO 的多人游戏

> ID：11906145
> 
> 赞同：4
> 
> 时间：2012-08-10T16:59:52.293
> 
> 标签：node.js, socket.io, multiplayer

我正在尝试使用 Node 和 Socket IO、express 的多人赛车游戏。所以我尝试了一个简单的例子来查看节点服务器和客户端之间的延迟。我在客户端有一个可拖动的图像。当我将图像输入代码移动到一个客户端时，它必须移动到所有客户端。所以基本上当我移动图像时，我会以 json 格式将图像位置发送到节点服务器，然后从那里向所有客户端广播。从那时起大约有 300 毫秒的延迟。以下是结果。

客户端 1 向服务器发送数据：286136（时间戳）服务器接收：286271

Client2 在：286470 收到数据 Client3 在：286479 Client4 收到数据在：286487 Client5 在：286520 收到数据

从 client1 移动到 client5 之间的延迟为 384 毫秒。它对于赛车游戏来说太高了..这是我的服务器代码。

```
var app = require('express').createServer();  
var io = require('socket.io');  
var http = require('http');  
var http_server = http.createServer();  
var server = http.createServer(app);  
server.listen(3000);  

var socket = io.listen(server,{ log: false });

socket.sockets.on('connection', function (client) {    
  client.on('message', function (data){  
        console.log("data arrived to server",new Date().getTime());  
// Below  both statements are giving same latency between the client 1 and client 5  
        client.broadcast.emit('message',data);    
        //socket.sockets.emit('message',data);  
  });  
}); 
```

1）有没有办法优化服务器代码以减少延迟？
2) 这是使用节点和 websockets 的预期延迟吗？
3）socket io不能异步广播数据吗（我的意思是同时）？

谢谢 Kishorevarma

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:58:34.720

我已经创建了几个这样的实时游戏。一个是多人小行星（每个人都在向小行星射击，合作游戏）。我有很好的响应时间——但是，我并没有向所有客户“发送垃圾邮件”过多的数据——这可能是个问题。我让游戏在客户端以 60 fps 的速度运行，而服务器以 30 fps 的速度处理物理。它仅在所有客户端都是 Chrome 时才有效（因此他们有网络套接字）。今天的大多数浏览器都支持 Web 套接字。我会先检查以确保您有插座。其次，我不会向所有客户端发送太多数据：一种方法是以已知速率（如每秒 30 帧）处理服务器上的物理。另外，在客户端处理物理。将最终用户更改发送到 30 fps 边界上的所有客户端（不是在您获取数据时）。对于小行星，这意味着：

1.  每艘玩家飞船所在的位置，以及关于该飞船的所有内容（面向方向、浮动方向、是否开启或关闭加速）
2.  每颗子弹的位置（位置、方向、速度、是谁发射的）
3.  每颗小行星所在的位置（位置、方向、速度）
4.  每秒 30 次，运行物理，重绘屏幕

现在 ...

1.  当客户端向您发出请求时（例如，将我的船向右旋转）- 客户端将该数据发送到服务器（并且不在本地处理）
2.  当服务器收到用户请求时，它将请求排队等待下一个“tick”处理
3.  服务器滴答声（每秒 30 次）：处理所有排队的事件：
4.  在请求旋转船舶时：实际旋转船舶。向所有人广播船舶数据（位置、朝向、速度……）
5.  当客户端从服务器获得更新事件时，它会将来自服务器的新“正确”数据填充到其本地空间中。注意：如果客户端无法以 30 fps 处理所有内容，则在发送数据时，飞船将“跳”到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:19:42.633

您可以查看我使用 Node 和 Socket.io 编写的在线多人游戏 - [https://github.com/ecdeveloper/wallattack](https://github.com/ecdeveloper/wallattack)。代码非常简单。

[在http://wallattack.ecdeveloper.com/](http://wallattack.ecdeveloper.com/)上还有一个演示可用

# jquery - jQuery 按钮单击自定义对话框标题

> ID：11906152
> 
> 赞同：0
> 
> 时间：2012-08-10T17:00:13.750
> 
> 标签：jquery, events, button, dialog, click

我正在创建一个全屏 jQuery 对话框。

我正在创建一个自定义`<div>`作为对话框的标题。

里面`<div>`是一个`<table>`。`<table>`包含 1 ，其中`<tr>`包含 5 `<td>`s。每个内部`<div>`都是要在对话框标题中显示的实际内容。

我正在尝试显示一些 jQuery 按钮对象，以允许用户编辑标题中的任何信息。我已将单击事件附加到按钮，并将另一个单击事件附加到标题。点击按钮，调用标题的点击事件，但按钮的点击事件永远不会被调用。

这是对话框标题点击代码：

```
$(dialog)
    .parent()
    .find('.ui-dialog-titlebar').click(
        function () {
            $(dialog).dialog('close').remove();
        }
    ); 
```

这是按钮创建代码：

```
var editBtn = $('<button>');
editBtn
    .css('height', '2.2em')
    .css('float', 'right')
    .button(
        {
            text: false,
            icons:
                {
                    primary: 'ui-icon-pencil'
                }
        }
    )
    .on(
        'click',
        function () {
            alert('Edit clicked');
            EditClicked(this);
            return false;
        }
    ); 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:19:35.897

`.on`可能**不是**你想要的。它的目的是将通用事件处理程序附加到与给定元素内的给定选择器匹配的任何元素上，无论它们是何时创建的。

相反，您需要`.bind()`将事件处理程序附加到特定对象。

所以，这段代码应该可以完成这项工作：

```
var editBtn = $('<button>');
editBtn
    .css({
        'height': '2.2em',
        'float': 'right'
    })
    .button(
        {
            text: false,
            icons:
                {
                    primary: 'ui-icon-pencil'
                }
        }
    )
    .bind(
        'click',
        function () {
            alert('Edit clicked');
            EditClicked(this);
            return false;
        }
    ); 
```

（作为一个优点：您可以`.css()`通过传递一个对象来避免链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:52:43.237

使用 jQuery 时，您可能会选择 a`<button>`而不是`button`. 我从来没有尝试过选择带有标签的 html 对象。您的样式是否已添加到按钮中？此外，对 css 使用哈希：

```
.css({'height':'2.2em','float':'right'}) 
```

如果您调用 css 两次，高度可能会被覆盖。

另一个技巧是使用`.closest('.ui-dialog-titlebar')`而不是执行两个方法调用`.parent().find()`.

干杯!

# cuda - 可以在 CUDA 上启动的最大线程数

> ID：11906153
> 
> 赞同：1
> 
> 时间：2012-08-10T17:00:17.480
> 
> 标签：cuda

当我运行 deviceQuery SDK 示例时，它显示以下统计信息：

> 每个块的最大线程数：1024 块
> 的每个维度的最大大小：1024 x 1024 x 64
> 网格的每个维度的最大大小：65535 x 65535 x 65535

那么这是否意味着我最多可以启动 1024*65535*65535*65535 的线程总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:47:41.470

正如 talonmies 指出的那样，这是理论上的最大值。但是，您可以启动的线程数也取决于每个线程使用的资源量。这是因为特定块在设备的一个流式多处理器中执行。流式多处理器具有有限的资源（尤其是寄存器和本地内存），并且可以将每个块的线程数限制为小于问题中列出的理论最大值。因此，您还必须注意每个线程使用的资源量。如果每个线程使用的资源量很高，您可能无法达到该值。

# c# - Region/EndRegion 预处理器

> ID：11906162
> 
> 赞同：1
> 
> 时间：2012-08-10T17:01:05.070
> 
> 标签：c#, visual-studio-2010

有时我在 Visual Studio 的源文件中运行（在我的情况下是 2010 年），我看到很多区域，我必须单击 + 符号才能一一打开它们！

是否有任何快捷方式或菜单选项可以让我更轻松地完成所有操作？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:03:10.840

CTRL + M,O 折叠所有区域，CTRL + M,L 展开所有区域。

如果您在要展开/折叠的确切行上，则为 CTRL + M,M

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:03:04.237

您可以右键单击 -> 大纲 -> 切换所有大纲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:03:05.723

折叠 => ctrl+M, ctrl+O

打开 => ctrl+M, ctrl+P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:04:07.580

啵啵！！

[Visual Studio - 折叠所有代码部分的命令？](https://stackoverflow.com/questions/982677/visual-studio-command-to-collapse-all-sections-of-code)

`CTRL`++将`M`全部`O`崩溃。

`CTRL`++将全部展开`M`。`L`

`CTRL`++`M`将`P`展开所有并禁用大纲。

`CTRL`++将`M`折叠`M`/展开当前部分。

这些选项也在大纲下的上下文菜单中。

# java - 在 Lucene 中搜索“UTTD_Equip_City_TE”之类的词

> ID：11906165
> 
> 赞同：1
> 
> 时间：2012-08-10T17:01:11.323
> 
> 标签：java, lucene, rtf

谢谢阅读 ：）

我正在尝试使用 Lucene 在 RTF 文档中搜索“UTTD_Equip_City_TE”之类的词。这个词以两种不同的形式出现：

*   «UTTD_Equip_City_TE»,
*   «UTTD_Equip_City_TE»

我首先尝试使用 StandardAnalyzer，但它似乎将这个词分解为“UTTD”、“Equip”、“City”和“TE”。

然后我再次尝试使用 WhiteSpaceAnalyzer，但它似乎没有工作......（我不知道为什么）。

你能帮我解决这个问题吗？顺便说一句，编辑 Lucene 源代码并用 Ant 重新编译它不是一种选择:(

谢谢。

编辑：本文档中还有其他文本。例如：

```
SHIP TO LESSEE (EQUIPMENT location address): «UTTD_Equip_StreetAddress_TE», «UTTD_Equip_City_TE», «UTTD_Equip_State_MC» 
```

基本上，我正在尝试索引 RTF 文件，并且每个 RTF 文件内部都是带有变量的表。变量用`«`和包裹`»`。我正在尝试在文档中搜索这些变量。我已经尝试过搜索`"«" + string + "»"`，但它没有奏效......

这个例子可以提供更好的图片：http: [//i.imgur.com/SwlO1.png](http://i.imgur.com/SwlO1.png)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:13:05.897

KeywordAnalyzer 将整个字段标记为单个字符串。如果子字符串位于文档中的不同字段中，这听起来可能就是您要查找的内容。

请参阅：[关键字分析器](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/KeywordAnalyzer.html)

相反，如果您在单个字段中添加文档的全部内容，并且想要搜索其中嵌入了“_”字符的子字符串，那么我认为 WhitespaceAnalyzer 会起作用。不过，你说它不起作用。你能告诉我们你尝试使用 WhitespaceAnalyzer 的结果是什么吗？您是否将它用于索引和查询？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:33:25.940

我在这里看到两个选项。在这两种情况下，您都必须构建自定义分析器。

**选项1**

从 StandardTokenizer 的语法文件开始并对其进行自定义，以便它发出由 '_' 分隔的文本作为单个标记。（请参阅[使用 JFlex/Java CC 为新的 TokenStream API 生成自定义标记器](https://stackoverflow.com/questions/7846305/generating-a-custom-tokenizer-for-new-tokenstream-api-using-jflex-java-cc)）。使用这个新的 Tokenizer 和 LowerCaseFilter 构建您的分析器。

**选项 2**

编写一个由 WhiteSpaceTokenizer 和自定义 TokenFilters 组成的自定义分析器。在这些 TokenFilters 中，您决定如何处理 WhiteSpaceTokenizer 返回的令牌。

有关分析的更多详细信息，请参阅[http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/package-summary.html](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/package-summary.html)

# iphone - Flurry用户ID是邪恶的吗？

> ID：11906169
> 
> 赞同：3
> 
> 时间：2012-08-10T17:01:19.123
> 
> 标签：iphone, ios, flurry

所以我最近在我的应用中添加了 Flurry 分析，并添加了与我的应用内用户名等效的用户 ID。当我检查flurry时，数据对我来说是不可见的。最终，我只想查看最常使用该应用程序的用户，但我似乎无法查看这些数据。

现在，当我说 Evil 时，我夸大了，但我真的不想给 Flurry 用户名，以便他们可以存储它。提供这些数据对我有什么好处吗？你怎么看？显然我想尊重我的用户隐私，这是否违反了这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T09:17:53.233

Flurry 上设置的用户 ID 可在事件日志部分下找到。Flurry userId 可用于将用户绑定到您的内部系统。此用户 ID 将与 Flurry 开发门户提供的任何事件报告一起传播。强烈建议在收集任何数据进行分析之前寻求用户许可。（免责声明：我在 Flurry 工作）

# amazon-web-services - 将压缩（lzo）数据从 s3 导入 hive

> ID：11906170
> 
> 赞同：2
> 
> 时间：2012-08-10T17:01:18.487
> 
> 标签：amazon-web-services, hive, elastic-map-reduce, emr, lzo

我将 DynamoDB 表导出到 s3 作为备份方式（通过 EMR）。导出时，我将数据存储为 lzo 压缩文件。[我的配置单元查询如下，但基本上我遵循了http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMR_Hive_Commands.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMR_Hive_Commands.html)上的“使用数据压缩将 Amazon DynamoDB 表导出到 Amazon S3 存储桶”

我现在想做相反的事情 - 拿我的 LZO 文件并将它们放回蜂巢表中。你怎么做到这一点？我期待看到一些用于输入的[配置单元配置属性](https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties "配置属性")，但没有。我用谷歌搜索并找到了一些提示，但没有确定的，也没有任何有效的。

s3 中的文件格式为：s3://[mybucket]/backup/year=2012/month=08/day=01/000000.lzo

这是我进行导出的 HQL：

```
SET dynamodb.throughput.read.percent=1.0;
SET hive.exec.compress.output=true;
SET io.seqfile.compression.type=BLOCK;
SET mapred.output.compression.codec = com.hadoop.compression.lzo.LzopCodec;      

CREATE EXTERNAL TABLE hiveSBackup (id bigint, periodStart string, allotted bigint, remaining bigint, created string, seconds bigint, served bigint, modified string)
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler' 
TBLPROPERTIES ("dynamodb.table.name" = "${DYNAMOTABLENAME}", 
"dynamodb.column.mapping" = "id:id,periodStart:periodStart,allotted:allotted,remaining:remaining,created:created,seconds:seconds,served:served,modified:modified");

CREATE EXTERNAL TABLE s3_export (id bigint, periodStart string, allotted bigint, remaining bigint, created string, seconds bigint, served bigint, modified string)
 PARTITIONED BY (year string, month string, day string)
 ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
 LOCATION 's3://<mybucket>/backup';

INSERT OVERWRITE TABLE s3_export
 PARTITION (year="${PARTITIONYEAR}", month="${PARTITIONMONTH}", day="${PARTITIONDAY}")
 SELECT * from hiveSBackup; 
```

任何想法如何从 s3 中获取它，解压缩并进入配置单元表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T18:13:50.997

EMR 上的 Hive 可以直接从 S3 本地读取数据，您无需导入任何内容。您只需要创建一个外部表并告诉它数据在哪里。它还具有 lzo 支持设置。如果文件以 .lzo 扩展名结尾，Hive 将使用 lzo 自动解压缩。

因此，要将 s3 中的 lzo 数据“导入”到 hive 中，您只需创建一个指向 lzo 压缩数据 s3 的外部表，并且 hive 将在对其运行查询时对其进行解压缩。与“导出”数据时所做的几乎完全相同。那个 s3_export 表，你也可以从中读取。

如果要将其导入非外部表，只需将覆盖插入新表并从外部表中选择即可。

除非我误解了您的问题，并且您的意思是要询问有关导入发电机的问题，而不仅仅是蜂巢表？

```
This is what I've been doing
SET hive.exec.compress.output=true; 
SET io.seqfile.compression.type=BLOCK;
SET mapred.output.compression.codec = com.hadoop.compression.lzo.LzopCodec;

CREATE EXTERNAL TABLE users
(id int, username string, firstname string, surname string, email string, birth_date string)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' LINES TERMINATED BY '\n'
STORED AS TEXTFILE
LOCATION 's3://bucket/someusers';

INSERT OVERWRITE TABLE users
SELECT * FROM someothertable; 
```

我最终在 s3://bucket/someusers 下得到了一堆文件，这些文件具有 .lzo 扩展名，这些文件可由 hive 读取。

您只需在尝试写入压缩数据时设置编解码器，读取它会自动检测到压缩。

# android - 同步 Android 客户端和 REST 服务器

> ID：11906172
> 
> 赞同：6
> 
> 时间：2012-08-10T17:01:29.063
> 
> 标签：android, ruby-on-rails, rest, android-syncadapter

# REST 服务器

我创建了一个包含`:users`并关联`:comments`. 它用作 Android 客户端的后端 API。在服务器上加载和存储数据的交换格式是 JSON。这是相关的迁移。

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.timestamps
    end
  end
end 
```

...

```
class CreateComments < ActiveRecord::Migration
  def change
    create_table :comments do |t|
      t.references :users
      t.string :subject
      t.text :message
      t.timestamps
    end
  end
end 
```

所有用户均已导入。因此，只为`:users`资源配置了读取访问权限。因此，`:comments`应该可以添加新条目。这是可用的路线。

```
 user_comments GET   /users/:user_id/comments(.:format)      comments#index
                 POST  /users/:user_id/comments(.:format)      comments#create
new_user_comment GET   /users/:user_id/comments/new(.:format)  comments#new
    user_comment GET   /users/:user_id/comments/:id(.:format)  comments#show
           users GET   /users(.:format)                        users#index
            user GET   /users/:id(.:format)                    users#show 
```

# 安卓客户端

在客户端，我使用`Service`with`AsyncTasks`来下载、解析用户并将其存储到本地 SQLite 数据库中。A`ContentProvider`将缓存的用户传递到 UI。从服务器下载的用户对象包含`users`表的唯一 id。当在客户端上创建新评论时，这应该很有用。

# 场景一：阅读评论

*   用户显示在 Android 客户端的列表视图中。
*   用户项目被选中。
*   列表活动创建一个`Intent`包含用户特定 URI，例如`content://com.example.myapp.provider/users/23`.
*   用户活动显示有关用户和相关评论的详细信息。
*   缓存的评论通过`CursorLoader`. (1)
*   同步过程从远程服务器加载评论。(2)

# 场景 2：写评论

*   可以从用户活动创建评论。
*   评论被存储到本地数据库中。(3)
*   存储的评论与远程服务器同步。(2)

# 头痛问题

我标记了与以下问题相关的场景步骤。

1.  如何为`CursorLoader`用户活动中与 a 一起使用的评论创建内容 URI？请注意，此时我只知道用户 URI。
2.  有人可以描述我如何创建同步过程吗？我不确定[SyncAdapter](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)是否在这里工作（从未使用过）。同步过程是否只是`Service`一方面启动任务以在客户端下载、解析和存储评论，另一方面加载、编码并将评论发送到服务器？
3.  新评论的内容 URI 是什么样的？`ContentProvider`评论和用户一样吗？申请中只有一个`SQLiteOpenHelper`吗？

我正在努力解决的主要问题是如何设计应用程序？如果您知道我应该如何同步用户及其相关评论的更好解决方案，非常欢迎您。

## 答案

**问题 1 和 3 的答案。**
我将 REST 模型扩展如下：为*评论*返回的 JSON 哈希现在包括关联*用户的**id*。相同的*id*也包含在*user*的 JSON 哈希中。这两个对象都存储在 Android 设备上的本地数据库中。这允许我为特定*用户请求**评论*。我只是将*服务器用户 ID*作为子句传递。正如我在问题中暗示的那样，*评论*的内容 URI没有级联。它类似于*用户*内容 URI：******`WHERE`******

 ***`content://com.example.myapp.provider.commentsprovider/comments`

请注意，我更改了字符串的*权限*部分。我决定为*用户*和*评论创建*[单独的内容提供者](https://stackoverflow.com/questions/11975215/how-to-address-multiple-content-providers)。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-22T20:51:44.080

一种简单的架构是始终首先更新服务器中的内容，立即将发布的评论发送到服务器，然后通过[GCM](https://apiminer.org/doc/google/gcm/gcm.html)将通知推送给应该请求更新评论列表的用户。流程看起来像：

*   当应用程序打开时，将 GCM 注册 ID 发送到您的推送通知服务器（例如[uniqush-push](https://github.com/uniqush/uniqush-push)或您自己的服务器使用[gem 来处理 GCM 逻辑](https://rubygems.org/search?query=gcm)），这样您就可以使用它向用户发送推送通知，告诉应用程序从服务器更新评论
*   根据需要构建初始缓存
*   每当用户发表评论时，将其发送到服务器并让服务器响应所创建评论的数据，因此应用程序可以使用该评论并在需要时使用返回的 id 和其他任何内容缓存它
*   在服务器上，当发表评论时，遍历所有相关用户并使用 GCM 注册 ID 向其发送推送通知，这可能就像刚刚`"update_comments": "1"`
*   在应用程序上，当用户点击推送通知时，通过对服务器的请求更新评论缓存*****

# .net - 从 Facebook 实时流中检索数据

> ID：11906183
> 
> 赞同：1
> 
> 时间：2012-08-10T17:02:06.097
> 
> 标签：.net, facebook, facebook-graph-api

我正在尝试使用实时订阅 API（https://graph.facebook.com/[AppID]/subscriptions）为 Facebook 创建一个实时处理器。除了我完全不知道如何从实时流返回的数据中检索有关实际事件的信息之外，我一切正常！我得到的数据如下，没有关于对象ID的信息（Like，Status Update，Photo等），唯一返回的信息是“id”字段和“uid”中的用户ID “ 场地。有人对如何检索操作信息有任何建议吗？

```
{"object":"user","entry":[{"uid":"100002214799362","id":"100002214799362","time":1344618016,"changed_fields":["feed"]}]} 
```

# c# - 光标选择移到结尾后文本框失去焦点

> ID：11906185
> 
> 赞同：0
> 
> 时间：2012-08-10T17:02:11.820
> 
> 标签：c#, textbox

我有一个加载的表单，点击一个按钮（将文本添加到文本框），将光标移动到文本框文本的末尾，然后将活动控件设置为文本框，因此用户可以立即开始输入。文本框填充得很好，但表单失去了焦点。这只是那里的选择线，如果我把它拿出来，它工作正常。用户必须单击表单以使其处于活动状态。有任何想法吗？

```
private void createNewFolder_Load(object sender, EventArgs e)
{
     addDate.PerformClick();
     folderNameTextBox.Select(folderNameTextBox.Text.Length, 0);
     this.ActiveControl = folderNameTextBox;
     this.Focus();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:10:22.673

焦点无法在 Load 事件中工作，表单尚不可见。到目前为止，最简单的方法是只为控件提供最低的 TabIndex。或者使用 Select() 方法：

```
private void createNewFolder_Load(object sender, EventArgs e)
{
    addDate.PerformClick();
    folderNameTextBox.Select(folderNameTextBox.Text.Length, 0);
    folderNameTextBox.Select();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:05:05.190

代替：

```
this.ActiveControl = folderNameTextBox; 
```

尝试：

```
folderNameTextBox.Focus(); 
```

如果文本框仍然失焦，请尝试使用以下方法选择它：

```
folderNameTextBox.Select(); 
```

# wcf - Web 服务和 WCF 有什么区别？他们不是同一个东西吗？

> ID：11906189
> 
> 赞同：0
> 
> 时间：2012-08-10T17:02:23.973
> 
> 标签：wcf, web-services

我想知道 Web 服务和 WCF 有什么不同？他们不是一样的吗？

提前致谢！

我听说过两种类型的网络服务。

1.  XML 网络服务
2.  WCF 网络服务

真正的区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:09:18.863

可以使用任意数量的技术构建 Web 服务，而[Windows Communication Foundation](https://en.wikipedia.org/wiki/Windows_Communication_Foundation)是特定于 .NET 的。WCF 并不特定于通过 HTTP 进行通信。它也可以直接通过 HTTP 工作。

查看链接的 Wikipedia 页面了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:12:33.257

不，它们不是一回事。虽然您当然可以在 WCF 中复制 ASP.net Web 服务的行为，但 WCF 是一个功能更全面（也更复杂）的 SOA 开发平台。它使您能够更好地控制客户端和服务器之间交换的消息，并为您提供更多关于端点协议和绑定的选项。

查看[这篇文章](http://www.codeproject.com/Articles/139787/What-s-the-Difference-between-WCF-and-Web-Services)，了解一些差异的概述。

# javascript - node.js 将 http 响应写入流

> ID：11906198
> 
> 赞同：20
> 
> 时间：2012-08-10T17:02:58.527
> 
> 标签：javascript, http, node.js, stream, request

我正在通过 http 获取一些二进制数据。我的代码如下所示：

```
var writeStream = fs.createWriteStream(fileName);
request(url, function(err, res) {
    res.socket.pipe(writeStream);
}); 
```

现在输出文件已创建，但文件大小为 0。不过，url 是正确的，我用 wget 验证了这一点。

提前致谢并致以最诚挚的问候

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-10T17:18:55.910

回调[`http.request`](http://nodejs.org/api/http.html#http_http_request_options_callback)只提供一个参数，它是对请求[响应](http://nodejs.org/api/http.html#http_http_clientresponse)的引用。尝试

```
http.request(url, function(res) {
    res.pipe(writeStream);
}); 
```

还要注意`ClientResponse`工具[`ReadableStream`](http://nodejs.org/api/stream.html#stream_readable_stream)，所以你应该使用`.pipe`而不是`.socket.pipe`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T18:27:48.380

我假设这里`request`来自 mikeal 的请求库，而不是`http.request`. 在这种情况下，你可以简单地做`request(url).pipe(writeStream);`

请记住，出于调试目的，您始终可以通过管道传输到`process.stdout`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-10T06:37:27.870

```
var readStream = fs.createReadStream(fileName);
request(url, function(err, res) {
  readStream.pipe(res);
  readStream.on('end', function() {
    //res.end({"status":"Completed"});
  });
});
```

# c# - 我应该关闭 Assembly.GetManifestResourceStream 返回的流吗？

> ID：11906209
> 
> 赞同：8
> 
> 时间：2012-08-10T17:03:46.900
> 
> 标签：c#, stream

我认为这是一种很好的做法，当使用该`Assembly.GetManifestResourceStream`方法访问嵌入式程序集资源时，在完成后关闭返回`Stream`。但是，我刚刚在以下文章中发现了一些内容：

[http://msdn.microsoft.com/en-us/library/ms950960.aspx](http://msdn.microsoft.com/en-us/library/ms950960.aspx)

```
// Get the stream that holds the resource
// NOTE1: Make sure not to close this stream!
// NOTE2: Also be very careful to match the case
//        on the resource name itself
Stream stream =
  assem.GetManifestResourceStream("Azul.jpg");

// Load the bitmap from the stream
this.BackgroundImage = new Bitmap(stream); 
```

这里的评论说不应该关闭流*，*尽管文章没有提到原因。谷歌搜索没有提供任何结论；有些人似乎关闭了这个流，而另一些人则没有，并说垃圾收集器会处理它。

我应该关闭返回的流`Assembly.GetManifestResourceStream`吗？我不应该有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:05:30.700

该评论不希望您关闭它，因为它会继续从中创建一个`Bitmap`对象。通常，您应该在使用完流后关闭它们，否则您的应用程序将受到内存泄漏的影响。

# vb.net - 使用 4 个线程更新 2 800 000 条记录

> ID：11906210
> 
> 赞同：0
> 
> 时间：2012-08-10T17:03:46.937
> 
> 标签：vb.net, multithreading

我有一个带有 Access 数据库的 VB.net 应用程序，其中一个表包含大约 2,800,000 条记录，每个原始数据每天都会更新新数据。该机器具有 64GB 的内存和 i7 3960x，并且其超频至 4.9GHz。

注意：数据源是本地的。

我想知道如果我使用 ~10 个线程，它会更快地将数据更新到行。

如果可能的话，将这个大循环分成多个线程的机制是什么？

更新：有时循环必须根据结果重复某些行的计算，循环也有 63 个条件及其 242 行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:11:50.207

与其他数据库平台相比，Microsoft Access 并不是特别擅长处理许多并发更新。

您的任务需要进行的计算越多，您通常会从并发/线程中受益越多。如果您启动 10 个线程，这些线程只向 Access 发送更新命令，它不太可能比仅使用一个线程快得多。

如果您必须在读取和写入数据之间进行任何重要的计算，线程可能会显示出性能改进。

我建议尝试以下方法并测量结果：

*   一个线程从 Access 读取数据
*   一个线程对您读取的数据执行所需的任何计算
*   一个线程更新Access

[您可以使用生产者/消费者模式来实现这一点，使用BlockingCollection](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)很容易做到这一点。

生产者/消费者模式的好处是您可以添加更多的生产者和/或消费者线程，只需最少的代码更改即可找到最佳位置。

**补充思想**

IO 可能是您的应用程序的瓶颈。如果可以，请考虑将 Access 文件放在更快的存储设备上（SSD、RAID 甚至 RAM 磁盘）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:07:15.400

好吧，如果您使用 2,800,000 个查询更新 2,800,000 条记录，那肯定会很慢。

通常，最好避免打开多个连接来更新数据。

您可能想向我们展示一些您当前如何操作的代码，以便我们可以告诉您要更改的内容。

所以我不认为（根据您提供的信息）为此使用多线程会更快。现在，如果您正在考虑使用多线程，因为更新冻结了您的 GUI，现在这是另一回事了。

如果处理速度很慢，我个人认为这不是由于您的服务器规格造成的。我猜这更多的是关于你用来更新数据的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:11:02.547

不要怀疑，测试。编写它以便您可以分派尽可能多的线程来完成工作并使用不同数量的线程对其进行测试。你所说的循环是什么样的？

有诸如“如果我添加更多线程，它会更快地工作”之类的问题吗？尽管有经验法则，但最好进行测试。如果数据库是本地的，那么 Oded 很可能是正确的。

# mysql - 使用连接 mysql 对带有 id 的行进行分组？

> ID：11906212
> 
> 赞同：0
> 
> 时间：2012-08-10T17:04:12.553
> 
> 标签：mysql, codeigniter, model

例如，我有一个名为 table1 和 table2 的表；

```
table1{q_id,q_text,date},
table2{a_id,q_id,a_text} 
```

我在两个表上运行一个连接查询，如下所示：

```
SELECT *
FROM table1
INNER JOIN table2 ON table1.q_id = table2.q_id 
```

我会得到这样的数据

```
q_id     q_text    date   a_id   q_id   a_text
 1      sometext    ..     13      1    someanswer  
 1      sometext2   ..     67      1    someanswet2 
```

因为它们将是两个表之间的一对多关系，所以一个 q_id 可能有很多 a_ids 我想进行查询以将所有具有相同 q_id 的 a_ids 放入同一行。如果你明白我的意思。所以上面的两行都有相同的 q_id 所以我希望它们在同一行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:09:45.847

```
SELECT table1.q_id,table1.q_text,table1.date,table2.a_id,table2.a_text
    -> FROM table1
    -> LEFT JOIN table2
    -> ON table1.q_id = table2.q_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:32:17.863

```
 SELECT table1.q_id,table1.q_text,table1.date,table2.a_id,table2.a_text, group_concat(table2.a_id SEPARATOR ',') as a_ids
-> FROM table1
-> LEFT JOIN table2
-> ON table1.q_id = table2.q_id
-> GROUP BY table1.q_id 
```

使用 group_concat 和分隔符 ','

# java - -Xmx 属性与可用系统内存相关

> ID：11906219
> 
> 赞同：2
> 
> 时间：2012-08-10T17:04:34.263
> 
> 标签：java, memory, memory-management, memory-leaks, garbage-collection

我有一个问题。假设我有两个参数传递给 JVM： -Xms256mb -Xmx1024mb 在程序开始时分配了 256MB。接下来，创建一些对象，JVM 进程尝试分配更多内存。假设 JVM 需要分配 800MB。Xmx 属性允许这样做，但系统上当前可用的内存（比如说 Linux/Windows）是 600MB。是否有可能抛出 OutOfMemoryError ？或者也许交换机制会起作用？

我的第二个问题与 GC 算法的质量有关。假设我有 jdk1.5u7 和 jdk1.5u22。是否有可能在后一个 JVM 中内存泄漏消失并且 OutOfMemoryError 不会发生？最新版本的GC质量能更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:29:21.983

GC 的质量（除非有错误的 GC）不会影响内存泄漏，因为内存泄漏是应用程序的产物—— GC 无法收集不是实际垃圾的东西。

如果 JVM 需要更多内存，它将从系统中获取。如果系统可以交换，它将交换（与任何其他进程一样）。如果系统无法交换，您的 JVM 将失败并出现系统错误，而不是 OOM 异常，因为系统无法满足请求，这一点实际上是致命的。

作为一项规则，您永远不想让活动的 JVM 部分换出。当系统在虚拟内存系统中循环页面时，GC 事件会让你崩溃。将空闲的后台 JVM 作为一个整体换出是一回事，但是如果您的机器是 1G 的 RAM，而您的主进程需要 1.5GB，那么您就有一个大问题。

JVM 喜欢呼吸的空间。我已经看到 JVM 在没有足够内存时陷入 GC 死亡螺旋，即使它们没有内存泄漏。他们根本没有足够的工作集。添加另一块堆将 JVM 从糟糕的锯齿状 GC 图转变为快乐的锯齿状 GC 图。

给JVM它需要的内存，你会更快乐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:29:47.790

“内存”和“RAM”不是一回事。内存包括虚拟内存（交换），因此您可以在出现 OutOfMemoryError 之前分配总共可用的 RAM + 可用交换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:27:17.973

分配取决于使用的操作系统。如果您分配了太多内存，也许您最终可能会将部分加载到交换中，这很慢。如果你的程序运行得更慢，取决于 VM 如何处理内存。

我不会指定一个不太大的堆来确保它不会占用所有内存，从而防止 VM 变慢。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T17:16:47.857

关于您的第一个问题：
实际上，如果机器无法将`1024`您要求的 MB 分配为最大堆大小，它甚至不会启动 JVM。
我知道这一点是因为我注意到它经常试图打开具有大堆大小的 Eclipse，并且操作系统无法分配 JVM 无法加载的更大堆空间。您也可以自己尝试确认。所以其余的细节与你无关。当然，如果您的程序使用太多交换（与所有语言相同），那么性能将非常糟糕。

关于你的第二个问题：

> 内存泄漏消失了

不可能，因为它们是*您*必须修复的错误

> 并且 OutOfMemoryError 不会发生？最新版本的GC质量能更好吗？

这可能会发生，例如，如果在 GC 中使用了一些不同的算法，并且它设法在您看到异常之前启动。但是，如果您有内存泄漏，那么它可能会掩盖它，或者您会看到它断断续续。
各种 JVM 也有不同的 GC，您可以配置

**更新：**
我不得不承认（在看到@Orochi 注释之后）我注意到 Windows 上最大堆的行为。我不能肯定地说这也适用于 linux。不过你可以自己试试。

**更新 2：作为对来自**[IBM](http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=/com.ibm.java.doc.igaa/_1vg00014884d287-11c3fb28dae-7ff6_1001.html) 的@DennisCheung 评论的回答（我的重点）：

> > 该表显示了可能的最大 Java 堆和最大 Java 堆大小设置的**建议**限制......重要的是拥有比机器上所有进程组合所需的更多物理内存，以防止分页或交换。分页会降低系统的性能并影响 Java 内存管理系统的性能。

# python - CGI/1.1 的 GATEWAY_INTERFACE 是否表示 WSGI 配置错误？

> ID：11906220
> 
> 赞同：0
> 
> 时间：2012-08-10T17:04:35.690
> 
> 标签：python, apache, cgi, wsgi

我的 Apache 虚拟主机的配置文件中有以下几行：

```
DocumentRoot /home/jordan/webprojects/wsgihello/web
WSGIDaemonProcess wsgihello processes=4 threads=15 display-name=%{GROUP}
WSGIProcessGroup wsgihello

WSGIScriptAlias /api /home/jordan/webprojects/wsgihello/api/front.py 
```

front.py 只返回一个文本文档，其中包含环境字典的键和值。我注意到了`environ['GATEWAY_INTERFACE'] == 'CGI/1.1'`。

CGI/1.1 到底是什么意思？Apache 是通过 CGI 为每个请求启动一个新的解释器，还是只是通过该接口标识符识别 mod_wsgi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:14:56.230

这是 mod_wsgi 调用 Apache C 例程来为 environ 字典生成 CGI 键/值这一事实的产物。Apache 恰好添加了这一点。它没有调用单独的过程。

读：

[http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)

有关 mod_wsgi 中的进程/线程模型的更多信息。

# javascript - 按钮不执行 .click 与 Asyncpostbacktrigger

> ID：11906227
> 
> 赞同：1
> 
> 时间：2012-08-10T17:05:20.837
> 
> 标签：javascript, asp.net, html, asynchronous

我现在有一个通过 javascript 运行的删除功能。您选择网格上的行，点击删除按钮 1，它会弹出一个包含删除按钮 2 的弹出窗口。单击删除按钮 2 会在连接到我的 c# 代码的不可见按钮上触发 .click 事件以进行删除。

在我将不可见按钮设置为 asyncpostbacktrigger 之前，这一切都可以正常工作。现在删除按钮 2 运行隐藏弹出命令，但不会触发 .click 事件。任何想法为什么？

资源

```
<script type="text/javascript">
    //execute popup
    function popup() {
        $("#popupbg").animate({ opacity: ".8" });
        $("#delete, #update").click(
            function() {
                var id = $(this).attr("id")
                {
                    if (id == "delete") {
                        $("#popupbg, #lidelete, #butdelete, #butcancel").show('fast');
                    }
                    else if (id == "update") {
                        $("#popupbg, #liupdate, #butupdate, #butcancel").show('fast');
                    }
                }
            });

    }
    //execute popup cancel
    function popupcancel() {
        $("#popupbg, #liupdate, #butupdate, #butcancel, #lidelete, #butdelete").hide('medium');
    }
    //execute popup delete
    function popupdel() {
            var button = document.getElementById("execdelete");
            button.click();
            $("#popupbg, #lidelete, #butdelete, #butcancel").hide('medium');
        }
    //execute popup update
    function popupupdate() {
        var button = document.getElementById("execupdate");
        button.click();
        $("#popupbg, #liupdate, #butupdate, #butcancel").hide('medium');
    }
</script>

<div id="popupbg"> 
</div> 

<div id="popupbgitembg">
<ul class="popupbgitems">
        <li id="lidelete">
            Are you sure you want to delete?
        </li> 
        <li id="liupdate">
            Are you sure you want to update?
        </li>
        <li></li> 
        <li>
            <input type="submit" name="execdelete" value="" id="execdelete" class="invisible" />
            <input type="submit" name="execupdate" value="" id="execupdate" class="invisible" />
            <input type="submit" name="butupdate" value="Yes" onclick="javascript:scroll;popupupdate();" id="butupdate" style="font-size:11px;width:70px;" />
            <input type="submit" name="butdelete" value="Yes" onclick="javascript:scroll;popupdel();" id="butdelete" style="font-size:11px;width:70px;" />
            <input type="submit" name="butcancel" value="No" onclick="javascript:popupcancel();" id="butcancel" style="font-size:11px;width:70px;" />

        </li>
    </ul>
</div>    

<li class="lblinfo"><span id="lblGLDeptData"></span></li>
                    <li><input type="submit" name="update" value="Update" onclick="javascript:popup(); ;" id="update" style="width:70px;font-size:11px" />
                        <input type="submit" name="delete" value="Delete" onclick="javascript:popup();" id="delete" style="width:70px;font-size:11px" />

                   </li>
                </ul>
            </div>            
</div>

    <div id="gvMappingupdate">

            <div id="headerdiv">
            </div>
            <div id="topcontentcover"></div>
            <div class="topcontent">
                <div>
</div>
                <input type="submit" name="btnGetGLDept" value="" id="btnGetGLDept" class="invisible" />
                <div id="gvMappingprogress" style="display:none;">

                        <div class="load"><img src="Images/loading.gif" alt="Loading" /></div>

</div> 
```

javascript

```
function popup() {
    $("#popupbg").animate({ opacity: ".8" });
    $("#delete").click(function() {
        $("#popupbg, #popupbgitembg").show('fast')
    });
}

function popupcancel() {
    $("#popupbg, #popupbgitembg").hide('medium');
}

function popupdel() {
    var button = document.getElementById("<%= execdelete.ClientID %>");
    button.click();

    $("#popupbg, #popupbgitembg").hide('medium');
} 
```

html

```
<div id="popupbg"> 
</div> 
<div id="popupbgitembg">
<ul class="popupbgitems">
        <li>
            Are you sure you want to delete?
        </li> 
        <li></li> 
        <li>
            <asp:Button ID="execdelete" runat="server" CssClass="invisible" OnClick="delSysGLDepts" />
            <asp:Button ID="butdelete" runat="server" Text="Delete" OnClientClick="javascript:scroll;popupdel();" Font-Size="11px"/>
            <asp:Button ID="butcancel" runat="server" Text="Cancel" OnClientClick="javascript:popupcancel();" Font-Size="11px"/>

        </li>
    </ul>
</div> 
```

我的异步回帖的一部分

```
</asp:UpdatePanel>
    <%--Mapping Top Content --%>
    <asp:UpdatePanel ID="gvMappingupdate" runat="server">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="mapsearch" EventName="Click"  />
            <asp:AsyncPostBackTrigger ControlID="execdelete" EventName="Click" />
        </Triggers>
        <ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:37:23.393

尝试这个：

```
function popupdel() {
    $('#execdelete').click();
    $("#popupbg, #popupbgitembg").hide('medium');
} 
```

# iphone - 检索当前运行的子进程列表

> ID：11906231
> 
> 赞同：0
> 
> 时间：2012-08-10T17:05:39.167
> 
> 标签：iphone, objective-c, subprocess

我的应用程序调用了几个在后台执行期间同时运行的小程序。我想获得一个列表或数组，其中包含这些子进程的进程 ID。我该怎么办？

# iis-7 - IIS 7.0 - 偶尔出现 404 错误

> ID：11906232
> 
> 赞同：1
> 
> 时间：2012-08-10T17:05:51.440
> 
> 标签：iis-7, http-status-code-404

所以看起来我们遇到了一个奇怪的问题，我们在存在的页面上看到 404 错误。我们有一些 Web 服务和常规 MVC 3.0 页面会被点击，通常会按预期返回 200，但有时它们会返回 404 错误。

我们还没有真正能够在博客中找到它，并且在事件查看器中没有什么令人兴奋的。任何人都知道我还应该去哪里尝试追踪这个问题。

编辑：我们发现了问题所在。我们最终在 IIS 中进行了一些错误跟踪，发现子状态为 13，这意味着上传的文件太大，IIS 无法使用我们当前的配置处理。最终成为我们代码中的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:52:29.033

调查行动：

1.  在 Web 客户端之前缓存
2.  IIS 7.0 配置（特别是过期选项）
3.  查看母版页中的代码

# javascript - 如何动画排序？

> ID：11906238
> 
> 赞同：-2
> 
> 时间：2012-08-10T17:06:18.653
> 
> 标签：javascript, jquery, sorting

我正在使用此脚本进行排序：

[http://james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)

我的代码看起来像这样：http: [//jsfiddle.net/jeZDB/](http://jsfiddle.net/jeZDB/)

您对如何在排序过程中实现动画有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:11:27.523

不确定您是否使用 jQuery，但您可能需要检查此插件：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:24:50.337

因为算法内部使用`node.insertBefore(...)`排序不能以这种方式动画。
如果你想自己解决这个问题，我的第一次尝试是 1.) 在排序时预先计算每个元素的位置，然后 2.) 将每个元素动画到该位置。
但是建议的插件看起来也不错。

# wpf - 堆栈面板内的图像未显示

> ID：11906248
> 
> 赞同：5
> 
> 时间：2012-08-10T17:07:14.207
> 
> 标签：wpf, c#-4.0, stackpanel

我在gridview单元格内动态创建stackpanel，并在stackpanel内放置一个图像控件，但在窗口上只有空白区域，而不是
这里的图像是我正在做的

```
StackPanel Stkpnl = new StackPanel();

Image BgImg = new Image();
BitmapImage Img = new BitmapImage(new Uri(
    "Images/cellbg.png", UriKind.Relative));
BgImg.Source = Img ;

Stkpnl.Children.Add(BgImg ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:25:08.950

您需要使用 Pack URI。见[https://stackoverflow.com/a/1651397/486660](https://stackoverflow.com/a/1651397/486660)

如果您对 Pack URI 的外观有疑问，*请*暂时将`Image`控件添加到您的 WPF 页面，然后转到`Source`属性并单击“...”按钮并导航到您的图像。该属性的文本框中将包含 Pack URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:25:03.630

您的代码似乎是正确的，您是否检查了文件夹中是否存在图像或相对路径是否正确，如果您稍后将此图像添加到图像文件夹中，而不是将图像的“构建操作”设置为“资源” ”。右键单击解决方案资源管理器中的图像而不是设置此属性。

你也应该检查这个问题

[在代码中设置 WPF 图像源](https://stackoverflow.com/questions/350027/setting-wpf-image-source-in-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T06:04:37.203

```
StackPanel Stkpnl = new StackPanel();
Image BgImg = new Image();    
String packuri = "pack://application:,,,/yourassemblyname;component/cellbg.png";
BgImg.Source = new ImageSourceConverter().ConvertFromString(packuri) as ImageSource;

Stkpnl.Children.Add(BgImg ); 
```

PS：要在 Visual Studio 2012 中找到程序集名称，请转到菜单栏中的“项目”->“设置属性”->应用程序。

# android - 无法创建 WebView

> ID：11906253
> 
> 赞同：0
> 
> 时间：2012-08-10T17:07:29.933
> 
> 标签：android, layout, webview

嘿伙计们，我遇到了一个小问题，我想通过代码创建一个 WebView。这是我想使用的代码。

```
WebView WVakten = new WebView(MainActivity.this);
                WVakten.setLayoutParams(new LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));
                WVakten.setVisibility(View.VISIBLE);
                WVakten.getSettings().setJavaScriptEnabled(true);
                WVakten.getSettings().setBuiltInZoomControls(true);
                WVakten.getSettings().setDefaultZoom(WebSettings.ZoomDensity.CLOSE);
                WVakten.loadUrl("http://www.google.de");
                WVakten.setWebViewClient(new WebViewClient(){
                    public boolean shouldOverrideUrlLoading(WebView view, String url) {
                        if (url != null && url.startsWith("http://")) {
                            view.getContext().startActivity(
                                new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
                            return true;
                        } else {
                            return false;
                        }}}); 
```

但是当我尝试启动应用程序时，我只收到以下错误：

08-10 19:03:10.560: W/webcore(7134): 第一次布局后无法获取 viewWidth

但我根本不明白为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:11:28.727

我认为您要么没有设置内容视图，要么没有将您的`WebV`输入代码添加`iew`到主布局中。如果 Webview 没有周围的布局，那么在 onCreate() 的代码末尾添加：

```
setContentView(WVakten); 
```

在这种情况下，不需要 LayoutParams

如果您已经将内容视图设置为布局，那么您需要获取对该布局的引用并添加您的视图：

```
LinearLayout yourLayout = findViewById(R.id.something);
yourLayout.addView(WVakten); 
```

在这种情况下，LayoutParams 将是必需的，并且必须是父布局的类型。因此，如果您`WebView`被 LinearLayout 包围，则必须使用

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:19:56.363

解决这个问题的最简单方法是在 xml 文件中创建一个布局，并将 webview 添加到 onCreate 中的布局中。

例子：

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:weightSum ="1.0"
android:layout_width="match_parent" android:layout_height="match_parent">    

<fragment
    android:id="@+id/article"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="0.90"
    class="nieuws.com.ArticleFragment" />
</LinearLayout> 
```

在创建 ArticleFragment 时，您只需添加以下代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    m_webview = new WebView(getActivity());
    m_webview.getSettings().setJavaScriptEnabled(true);

    m_webview.setWebViewClient(new jWebViewClient());
    return m_webview;
 } 
```

希望这可以帮助

碧玉

# c++ - 在 Visual Studio 中调试本机 c++ 转储文件时如何查看源代码

> ID：11906256
> 
> 赞同：1
> 
> 时间：2012-08-10T17:07:46.360
> 
> 标签：c++, visual-studio, minidump

我从运行我的本地 c++ 应用程序的服务器获得了一个小型转储。我也有 exe 和 pdb 文件。我可以使用 Visual Studio 2005 Pro 打开 minidump 并正确加载 pdb 文件中的符号。

我运行调试器 (F5)，它告诉我它崩溃了。当我单击堆栈跟踪查看位置时，它告诉我找不到源代码“当前位置没有可用的源代码。”。

如何告诉 Visual Studio 源代码在哪里？

我的 exe 是一个优化的发布版本，我使用 pdb 文件构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T10:01:10.787

从这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/3sehk0fb%28v=vs.80%29.aspx)：

> 在**解决方案属性页**中，您可以更改调试器查找源文件的目录，并告诉调试器忽略选定的源文件。请参阅**调试源文件**、**通用属性**、**解决方案属性页**对话框。

确保为 VS 提供与二进制文件和 PDB 文件对应的源。

通常，VS 应该在第一次双击堆栈帧时询问源在哪里。我遇到了一个问题，VS 会弹出*当前位置没有可用的源代码。*仅单击*某些*堆栈帧时的对话框，但显示其他堆栈的源。原来这是因为`/Zi`没有为某些项目设置标志，导致返回源文件的链接丢失。可以在**Project Propery Pages > C/C++ > General > Debug Information Format**中设置此标志。

# workflow-foundation-4 - WF4 活动中的动态对象参数

> ID：11906260
> 
> 赞同：0
> 
> 时间：2012-08-10T17:08:00.697
> 
> 标签：workflow-foundation-4, workflow-foundation

是否可以在 WF4 Activity 中使用可用于表达式的动态对象（扩展 DynamicObject）？

运行单元测试调用具有动态对象作为参数的活动时，我收到以下错误消息。

使用 DynamicObject 作为参数类型

> System.Activities.InvalidWorkflowException ：处理工作流树时遇到以下错误：'Literal'：Literal 仅支持值类型和不可变类型 System.String。System.Dynamic.DynamicObject 类型不能用作文字。“合法”：活动“1：合法”的私有实现具有以下验证错误：编译器错误遇到处理表达式“deal.Region = “EMEA””。“区域”不是“System.Dynamic.DynamicObject”的成员。

使用实际类型作为参数类型

> System.Activities.InvalidWorkflowException ：处理工作流树时遇到以下错误：'Literal'：Literal 仅支持值类型和不可变类型 System.String。WorkflowTest.DealValueHelper 类型不能用作文字。“合法”：活动“1：合法”的私有实现具有以下验证错误：编译器错误遇到处理表达式“deal.Region = “EMEA””。“区域”不是“WorkflowTest.DealValueHelper”的成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:46:44.643

是的，这绝对有效。我在`Microsoft.Activities.Extensions.WorkflowArguments`.

尝试直接分配给活动时，您遇到的可能是错误`InArgument`。我写了一篇关于[向工作流活动传递参数的博客文章（再次）](http://blogs.msdn.com/b/rjacobs/archive/2011/05/26/passing-arguments-to-workflow-activities-again.aspx)

# android - public void sendMessage(查看视图)

> ID：11906261
> 
> 赞同：1
> 
> 时间：2012-08-10T17:08:05.423
> 
> 标签：android, view

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

我收到此错误：“视图无法解析类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:02:34.223

如果您使用 Eclipse 来完成 Android Developers Kit 教程，则可能会出现此特定问题，并且可以通过执行“全部保存”来强制对您的项目进行某种“重建”来解决。至少，这对我有用。您还可以在清理项目后调用重建。菜单栏：`Project -> Clean...`选择您的项目并单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-29T03:54:09.840

确保您的括号{}在正确的位置。这只是发生在我身上，因为它实际上是在另一个方法声明中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T17:25:22.073

在导入部分试试这个

导入android.view.View；

# java - 如何同步两个 Listview 位置

> ID：11906263
> 
> 赞同：3
> 
> 时间：2012-08-10T17:08:10.423
> 
> 标签：java, android, listview, xamarin.android

我有两个`ListViews`。`ListViews`当我滚动任何一个列表时，有什么方法可以同步位置。我正在实施一个`AbsListView.OnScrollListener`，注册到`ListView`. 当`ListView`滚动时，将触发的`onScroll()`方法`OnScrollListener`，然后我调用'smoothScrollToPosition()'。但它不能正常工作。有人可以为此提供任何代码示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:56:25.073

这是 nininho 建议的工作代码示例

主要活动

```
public class MainActivity extends Activity {

public static String[] Cheeses = new String[] { "Abbaye de Belloc", "Abbaye du Mont des Cats",
        "Abertam", "Abondance", "Ackawi", "Acorn", "Adelost", "Affidelice au Chablis",
        "Afuega'l Pitu", "Airag", "Airedale", "Aisy Cendre", "Allgauer Emmentaler", "Alverca",
        "Ambert", "American Cheese", };

ListView list1;
ListView list2;

boolean isLeftListEnabled = true;
boolean isRightListEnabled = true;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListAdapter adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
            Cheeses);

    list1 = (ListView) findViewById(R.id.list1);
    list1.setAdapter(adapter);

    list2 = (ListView) findViewById(R.id.list2);
    list2.setAdapter(adapter);

    // IF YOU DO NOT OVERRIDE THIS
    // ONLY THE ONE THAT IS TOUCHED WILL SCROLL OVER
    list1.setOverScrollMode(ListView.OVER_SCROLL_NEVER);
    list2.setOverScrollMode(ListView.OVER_SCROLL_NEVER);

    list1.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // onScroll will be called and there will be an infinite loop.
            // That's why i set a boolean value
            if (scrollState == SCROLL_STATE_TOUCH_SCROLL) {
                isRightListEnabled = false;
            } else if (scrollState == SCROLL_STATE_IDLE) {
                isRightListEnabled = true;
            }
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount,
                int totalItemCount) {
            View c = view.getChildAt(0);
            if (c != null && isLeftListEnabled) {
                list2.setSelectionFromTop(firstVisibleItem, c.getTop());
            }
        }
    });

    list2.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState == SCROLL_STATE_TOUCH_SCROLL) {
                isLeftListEnabled = false;
            } else if (scrollState == SCROLL_STATE_IDLE) {
                isLeftListEnabled = true;
            }
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount,
                int totalItemCount) {
            View c = view.getChildAt(0);
            if (c != null && isRightListEnabled) {
                list1.setSelectionFromTop(firstVisibleItem, c.getTop());
            }
        }
    });
}
} 
```

XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:splitMotionEvents="true">
    <ListView android:id="@+id/list1"
              android:layout_width="0dip"
              android:layout_height="match_parent"
              android:layout_weight="1" />
    <ListView android:id="@+id/list2"
              android:layout_width="0dip"
              android:layout_height="match_parent"
              android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:57:07.070

如果位置可见，smoothScrollToPosition() 将不会滚动。您可以考虑在当前未滚动的另一个列表上使用 scrollTo 或 scrollBy，但请注意不要输入递归，每个列表都调用另一个列表来滚动。

# java - 程序代码和领域驱动设计风格代码有什么区别？

> ID：11906266
> 
> 赞同：0
> 
> 时间：2012-08-10T17:08:42.007
> 
> 标签：java, oop, domain-driven-design, ooad

我正在学习领域驱动设计（DDD）技术，我觉得我还没有很好地理解它。

DDD 建议将业务逻辑（不是基础设施，如持久性、安全性等）放入域对象、持久性存储库、为客户端（演示）组装域对象的聚合器、域对象和存储库之上的薄层服务、聚合器并充当事务边界。

让我这样说：

在 DDD 中，ViewController --> SomeService --> {Domain Objects, Repositories, Aggregators}

在我当前的（程序风格）方法中：ViewController --> SomeService --> DAO/Repository

在这里，ViewController 与一个或多个服务对话，以使用 DAO 从/向数据库拉取/推送数据。如果仅对域对象的属性进行操作的任何业务逻辑将在该域对象本身的方法中。最后，从服务获得的数据被聚合到 DTO 中，以呈现在视图层中。

所以对我来说，这两种方法看起来都差不多。

有人可以解释一下我错过了什么吗？

**PS：**我正在添加更多信息以更好地解释我的问题。理论上每个人都在说 DDD 建议“逻辑应该在域对象中”。好的。让我们来看一个真实的场景。

在 ShoppingCart 应用程序中，一些用户下了订单。要处理订单，我需要执行以下所有子任务：

1.  获取每个项目的详细信息并计算总订单价格。

2.  获取收货地址并使用一些地址验证服务对其进行验证

3.  验证/验证信用卡详细信息

4.  将所有订单相关信息保存到数据库中

因此，通过遵循 DDD，我将提出逻辑，

1.  Order 对象中的 Order Total 计算，该对象循环遍历其 List 对象。

2.  在地址对象中，我将拥有调用一些 BING 地址验证的 validate() 方法。

3.  在 CreditCard 类中，我将拥有 authorize() 方法，该方法调用一些 CCAuthorizationService 来授权使用一些第三方服务。

4.  使用一些存储库将所有订单内容保存到数据库中。

所有这些步骤都将通过调用 Order.process() 来触发

如果这是正确的 DDD 方法？如果是这样，我们的域对象直接与存储库交互，这似乎违反了关注点分离。

如果这不是正确的 DDD 方法，有人可以告诉我您如何为上述用例设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:33:13.237

它归结为逻辑所在的地方。在 DDD 中，逻辑主要进入模型层，因此它靠近数据。在过程代码中，逻辑进入事务层，因此它与数据分离。Fowler 有一个很好的描述，你可以在[这里](http://www.thedeveloperday.com/domain-model-logic-patterns/)阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:02:57.813

DDD 是独立于语言的，它是关于通过专家理解领域并构建一种通用语言，您可以使用它来讨论该领域。因此它不能直接与函数式、过程式或面向对象的编程语言进行比较，因为它们没有可比性。

视图控制器是特定于 MVC 框架的，而不是特定于 DDD。

在 MVC 中，为视图准备数据的 DTO 是视图模型。

希望有些帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:22:19.920

它们*是*相似的。

希望您实际上是在将“OOP”与“DDD”进行比较。DDD 是 OOP (IMO) 的子集，或者至少应该在 OOPL 中。DDD 是一种分解职责的特定思维方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:39:20.990

这与技术或 OOP 或类似的东西无关。它是关于关注手头的领域、领域专家使用的语言、理解领域并对该领域进行建模，以便在代码中出现重要的概念。

它最初是使用 OOP 完成的，许多人声称它只能使用 OOP 完成。然而，最近像 Greg Young 这样的人已经展示了如何在函数式语言中进行 DDD，并且仍然专注于该领域。

程序代码倾向于忽略所有这些，只关注如何从任何数据源读取/写入数据。例如，与像 Movex 这样的系统集成时，将有十亿个表和列的名称完全滞后，例如 TAXEM.YAROOD FOOB.AAR，这对任何阅读该代码的人来说都毫无意义......

# linq - 在 LINQ 中使用参数

> ID：11906269
> 
> 赞同：-3
> 
> 时间：2012-08-10T17:09:04.597
> 
> 标签：linq, c#-4.0

网。我有个疑问。我们如何在 LINQ 查询的 where 子句中引入用户定义的变量作为参数。我正在查询一个 XML 文件。这是我的代码

```
 XElement books = XElement.Load(@"Friends.xml");

var titles =
   from book in books.Elements("Friend")
   where (string)book.Element("Date") == "27" && (string)book.Element("Month") == "05"
   select book.Element("Name");

foreach (var title in titles)
   Console.WriteLine(title.Value); 
```

我想使用变量而不是对值`27`和进行编码。如何使用它们？`05`

抱歉这个愚蠢的问题，我误解了这个问题。实际上，我正在阻止日历中的某些日期。现在使用

```
private void calendar1_SelectedDatesChanged(object sender, SelectionChangedEventArgs e)
        {....} 
```

仅适用于非阻塞日期。由于我尝试使用该变量的某一天被阻止，因此它不起作用。现在请向我建议一个解决方案。我只需要点击一个日期（被阻止或未被阻止），我必须运行一个事件。我应该使用哪个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:11:58.887

使用一个简单的变量：

```
 XElement books = XElement.Load(@"Friends.xml");
string yourDate = "27";
string yourMonth = "05";

var titles =
   from book in books.Elements("Friend")
   where (string)book.Element("Date") == yourDate  && (string)book.Element("Month") == yourMonth
   select book.Element("Name");

foreach (var title in titles)
   Console.WriteLine(title.Value); 
```

等等。当然，根据您的代码和系统使用可读的好名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:17:30.997

此外，我认为您可以将具有适当属性的书籍类定义为 XML 标记。例如 ：

```
class Book {
  string Date {...} //
} 
```

读取 XML 文件可能非常容易。此外，如果您构建自己的树形数据结构来执行 XML 文件，那就太好了。

# objective-c - 从不同线程访问属性

> ID：11906278
> 
> 赞同：1
> 
> 时间：2012-08-10T17:09:39.027
> 
> 标签：objective-c, multithreading

我有两个线程访问同一组属性，但一个只读取属性，另一个只写入属性。

以下哪些属性需要同步以进行读操作，哪些必须同步以进行写操作？

```
@property (nonatomic) int myInt;
@property (nonatomic) NSInteger myInteger;
@property (nonatomic) CGImageRef cgImage;
@property (nonatomic, strong) UIImage *image;
@property (nonatomic, strong) NSMutableArray *array;
@property (nonatomic, strong) UIViewController *controller; 
```

我的第一直觉是，所有的读写操作都需要一直同步。然而，由于一个线程总是在写，一个线程总是在读，我不确定自己。当然，总是同步是“安全的”，因为我不确定，但我想知道什么是真正正确的？

出于某种原因，我有这种感觉，也许 myInt 和 myInteger 不需要同步读取和写入，因为它们是按值传递的......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:01:40.727

嗯，这就是原子属性擅长的。如果它们都是原子的，那么你可以读写而不会得到部分写入的结果。

但是，我从未发现原子 objc 属性在并发程序中真正有用。我总是导致定期锁定、不变性等。

尽管您可以使用原子，但在实际情况下它并不能帮助您。它们以执行成本使您的程序更具线程*抗性*（不安全）（两者都很糟糕，顺便说一句）。

顺便说一句，按值传递在这里真的不是问题。

改变一个可变值或对象（例如，从两个线程读取和写入该 NSMutableArray），以及维护相互依赖的 ivars 的完整性是主要问题。

维护两个相互依赖的 ivars 完整性的示例：

假设您有两个 int 类型（日、月）的原子属性，并且它们具有访问器。如果读取和写入是从不同的线程发生的，那么您将需要更多的原子来避免读取无效的日期（例如 2 月 31 日）。真正确保您的对象不在部分更新中的唯一方法是使用同步原语或不可变数据——这是基础原子属性无法拯救您的。

所以简短的回答是“原子”，但并发上下文中的对象很少如此简单，以至于原子的中间立场是真正的线程*安全*。

# ios - ModalViewController 框架移动

> ID：11906281
> 
> 赞同：0
> 
> 时间：2012-08-10T17:09:54.957
> 
> 标签：ios, view, modalviewcontroller

我不确定我是否可以通过这种方式做到这一点，但让我们尝试一下比我更聪明的人。

我希望能够通过拖动来移动呈现控制器的框架。我期待看到我在其中调用了 [self presentModalViewController:anotherVC animated:YES]; 的控制器。下面介绍的一个。我看到你是白色背景。

为了在不显示模态视图控制器的情况下实现此功能，我可以添加子视图，即：

```
[self.view addSubview:anotherVC.view]; 
```

但是有没有办法移动模态呈现的视图控制器并能够看到这个模态控制器所在的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:15:12.260

如果您需要在模态视图后面显示父视图，那么您可以使用以下代码：

设置`anotherVC.view.frame`小于父视图。

```
anotherVC.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:anotherVC animated:YES]; 
```

但是父视图的可见部分将变暗以防止交互。

> UIModalPresentationFormSheet
> 
> ```
> The width and height of the presented view are smaller than those of the screen and the view is centered onscreen. If the device is in a 
> ```
> 
> 横向和键盘可见，视图的位置向上调整，使视图保持可见。所有未覆盖的区域都变暗，以防止用户与其交互。

[模态表示样式](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalPresentationStyle)

# sql - T-SQL：计算列的第 N 个百分位值

> ID：11906283
> 
> 赞同：6
> 
> 时间：2012-08-10T17:10:04.743
> 
> 标签：sql, tsql

我有一列数据，其中一些是 NULL 值，我希望从中提取单个 90% 的*值*：

```
ColA
-----
NULL
100
200
300
NULL
400
500
600
700
800
900
1000 
```

对于上述内容，我正在寻找一种技术，它在搜索第 90 个百分位时返回值 900，在第 80 个百分位处返回 800，等等。类似的函数是 AVG(ColA)，它为上述数据返回 550，或 MIN( ColA) 返回 100 等。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T17:31:05.213

如果您想准确获得第 90 个百分位值，不包括 NULL，我建议直接进行计算。以下版本计算行数和行数，并选择合适的值：

```
select max(case when rownum*1.0/numrows <= 0.9 then colA end) as percentile_90th
from (select colA,
             row_number() over (order by colA) as rownum,
             count(*) over (partition by NULL) as numrows
      from t
      where colA is not null
     ) t 
```

我将条件放在 SELECT 子句而不是 WHERE 子句中，因此您可以轻松获得第 50 个百分位、第 17 个或任何您想要的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T17:12:14.027

```
WITH
  percentiles AS
(
  SELECT
    NTILE(100) OVER (ORDER BY ColA) AS percentile,
    *
  FROM
    data
)
SELECT
  *
FROM
  percentiles
WHERE
  percentile = 90 
```

注意：如果数据的观测值少于 100 个，则并非所有百分位数都有值。同样，如果您有超过 100 个观察值，则某些百分位数将包含更多值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-25T15:25:30.393

从 SQL Server 2012 开始，有现在[`PERCENTILE_DISC`](https://docs.microsoft.com/en-us/sql/t-sql/functions/percentile-disc-transact-sql?view=sql-server-2017)和[`PERCENTILE_CONT`](https://docs.microsoft.com/en-us/sql/t-sql/functions/percentile-cont-transact-sql?view=sql-server-2017)逆分布函数。这些（到目前为止）仅可用作窗口函数，而不是聚合函数，因此由于缺少分组，您必须删除冗余结果，例如使用`DISTINCT`or `TOP 1`：

```
WITH t AS (
  SELECT *
  FROM (
    VALUES(NULL),(100),(200),(300),
      (NULL),(400),(500),(600),(700),
      (800),(900),(1000)
  ) t(ColA)
)
SELECT DISTINCT percentile_disc(0.9) WITHIN GROUP (ORDER BY ColA) OVER()
FROM t
; 
```

[我在这里更详细地写了关于百分位数的博客](https://blog.jooq.org/2019/01/22/calculate-percentiles-to-learn-about-data-set-skew-in-sql/)。

# c# - MySQL 字符串问题。如何转换为 utf8？

> ID：11906284
> 
> 赞同：0
> 
> 时间：2012-08-10T17:10:05.690
> 
> 标签：c#, mysql, sql, utf-8, latin

我遇到以下问题。我正在创建一个 C# windows Forms 应用程序，我想使用它将数据从 SQL Server 传输到 MySQL。问题是 SQL 中的数据是拉丁文的，当我在 MySQL 数据库中传输它时，它显示为“？”。请给我一些建议。我试图说服它，但它不起作用！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:11:02.900

您如何选择数据 - 使用 sproc 或 sql 命令？

您可以在查询中放置一个排序规则（请参阅：[MySql Manual Ref](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)）并强制将正确的排序规则返回到您的应用程序（如果从 MySql 或 MS SQL 读取都支持它）。这比尝试转换（由于字符集的大小不同，这并不总是有效）或更改 db 字符集/排序规则更容易。

# java - Java复制不同的唯一数组值

> ID：11906287
> 
> 赞同：0
> 
> 时间：2012-08-10T17:10:13.670
> 
> 标签：java

我正在尝试解决这个问题，但我不知道如何...

```
Values[10] = {1,1,4,4,2,3,3,2,1,3} 
```

打印：

```
{1,2,3,4} or {1,4,2,3} (not sorted, any order, but distinct) 
```

我还需要计算每个数字出现的次数，无论是没有排序，新数组或布尔方法或其他数据结构，请在我卡住时告知。

有没有一种简单的方法可以用来打印唯一值/不同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:22:24.160

另一种解决方案，无需创建其他对象：

```
Arrays.sort(values);
for(int i = 0; i < values.length; i++) {
    if (i == 0 || value[i] != value[i-1]) {
        System.out.println(values[i]);
    }
} 
```

我能想到的最短解决方案：

```
Integer[] values = {1,1,4,4,2,3,3,2,1,3};
Set<Integer> set = new HashSet<Integer>();
set.addAll(Arrays.asList(values));
System.out.println(set); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:29:57.197

如果您愿意破坏您当前的阵列，它可以完成。并且您假设该数组是 Integer 类型（因此可以为空），或者如果没有，则存在一些界限，例如所有 int 都是正数，因此您可以使用`-1`.

```
for(int i = 0;  i < values.length; i++){               //for entire array             

    Integer currVal = values[i];                       // select current value
    int count = 1;                                     // and set count to 1

    if(currVal != null){                               // if value not seen

        for( int j = i + 1; j < values.length; j++){   // for rest of array
            if(values[j] == currVal){                  // if same as current Value 
                values[j] = null;                      // mark as seen
                count++;                               // and count it 
            } 
        }
        System.out.print("Number : "  + currVal + "  Count : " + count + "\n");
                                                       //print information
    }
                                                       // if seen skip.
} 
```

用简单的英语，在 2 个循环中遍历数组，大约 O(n^2) 时间。转到索引 i。如果尚未看到索引（不为空），则遍历数组的其余部分，将任何索引标记为与所见相同的值（使其为空）并增加计数变量。在循环结束时打印值和计数。如果已经看到索引（为空），则跳过并转到下一个索引。在两个循环结束时，所有值都将保留为空。

```
Input : Values[] = {1,1,4,4,2,3,3,2,1,3}

Output : Values[] = {1,null,4,null,2,3,null,null,null,null}
          Number : 1 Count : 3
          Number : 4 Count : 2
          Number : 2 Count : 2
          Number : 3 Count : 3 
```

编辑：纠正了我在输出中的错误，评论者指出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:08:56.837

假设这些值保证是整数，您也可以通过增加一个检查值，扫描数组，将数组中该检查值的数量相加，将其添加到累加器并在累加器 < array.length 时循环.

像这样的东西（未经测试）：

```
public void checkArray(int[] toCheck) {
    int currentNum = 0;
    int currentCount = 0;
    int totalSeen = 0;

    StringBuilder sb = new StringBuilder();

    int min = Integer.MAX_VALUE;
    int max = Integer.MIN_VALUE;
    for(int i=0; i<toCheck.length; i++) {
        min = Math.min(toCheck[i], min);
        max = Math.max(toCheck[i], max);
    }

    System.out.print("{ ");
    for(currentNum = min; currentNum < max; currentNum++) {
        for(int i=0; i<toCheck.length; i++) {
            if(toCheck[i] == currentNum) currentCount++;
        } 

        if(currentCount != 0) {
            if(currentNum == min) System.out.print(currentCount + "(" +currentCount+ ")");
            else System.out.print(", " + currentCount + " (" +currentCount+ ")");
        }
        totalSeen += currentCount;
        currentCount = 0;
    }
    System.out.println(" }");
} 
```

应该注意的是，虽然这在技术上满足了您的所有要求，但它的效率*远*低于 gbtimmon 的方法。

例如，如果您的 int 是`{1,2,3,150000}`，它将不必要地旋转 4 到 149999 之间的所有值。

编辑：从 tbitof 的建议中添加了更好的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:18:00.030

你的问题对我来说不是很清楚，因为听起来你想要做这些事情而不创建任何额外的对象。但如果只是不创建另一个数组，您可以使用 a `Map<Integer, Integer>`，其中键是原始数组中的数字，值是您看到它的次数。然后最后你可以查找所有数字的计数，并使用打印出所有键`Map.keyset()`

编辑：例如：

```
Map<Integer,Integer> counts = new HashMap<Integer, Integer>();
for( int i : values ) {
    if( counts.containsKey(i) ) {
        counts.put(i, counts.get(i) + 1);
    } else {
        counts.put(i, 1);
    }
}

// get the set of unique keys
Set uniqueInts = counts.keyset(); 
```

# android - 如何遍历所有 Bundle 对象

> ID：11906291
> 
> 赞同：40
> 
> 时间：2012-08-10T17:10:22.880
> 
> 标签：android, bundle, sharedpreferences

我正在尝试创建以[通用方式遍历所有](https://stackoverflow.com/a/9310697)[Bundle](http://developer.android.com/reference/android/os/Bundle.html)对象的辅助方法。

“通用”是指：

1.  不需要知道 Bundle 中作为参数传递的对象的名称（键）。
2.  如果将来将另一个成员（密钥）添加到 Bundle 中，则不需要更改。

到目前为止，我想出了以下大纲来实现这一点：

```
 private void bundleToSharedPreferences(Bundle bundle) {
    Set<String> keys = bundle.keySet();
    for (String key : keys) {
        Object o = bundle.get(key);
        if (o.getClass().getName().contentEquals("int")) {
            // save ints
        }
        else if (o.getClass().getName().contentEquals("boolean")) {
            // save booleans
        }
        else if (o.getClass().getName().contentEquals("String")) {
            // save Strings
        }
        else {
            // etc.
        }
    } 
  } 
```

这种方法是否有意义？

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-06-11T15:29:09.747

您可以使用 toString() 方法将所有内容保存为字符串吗？不知道原始类型是否映射到它们的 Object 等价物（例如 int 到类 Integer），但如果是，那么您也许可以做这样的事情，而不是费力地检查每个可能的类。

```
 for (String key : bundle.keySet()) {
        saveKeyValueInPrefs(key, bundle.get(key).toString()); //To Implement
 } 
```

不确定这是否适合您的需求，但我现在正在尝试做类似的事情来将包转换为 JSON 字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:26:08.053

如果我真的要这样做，我会通过反思来做到这一点。存储一个静态映射，以便 String.class 映射到 SharedPreference.putString() 等。然后，当您循环遍历这些项目时，对照映射检查它们的类。如果它不存在，请检查超类等。这将为您提供正确的调用方法，或者让您知道所请求对象的类型不是可以放入首选项的东西。

所以基本算法是：

1.  从包中获取对象
2.  获取它的类
3.  查看课程是否在地图中
4.  如果是，则调用指定的方法将其放入 SharedPreferences
5.  如果不是，则获取它的超类并返回第 3 步。
6.  如果您一直到 java.lang.Object，那么您就有一个无法立即存储在 SharedPreferences 中的捆绑对象。根据您在此过程中遇到的类，您可能也想尝试处理这个问题，或者您可能只想记录错误并继续前进。在不知道*为什么*要这样做的情况下，无法猜测当方法失败时应该如何反应。除非您完全控制捆绑包和首选项，否则它总是会的，但是如果您拥有如此多的控制权，则无需跳过所有这些障碍，因为您可以更直接，只需定义自己的键。

注意：反射并不快，也不是最容易编码和维护的东西。如果可能的话，我建议找到适合您用例的不太通用的方法。

# facebook - 如何在不获取帖子内容的情况下获取帖子数量？

> ID：11906294
> 
> 赞同：0
> 
> 时间：2012-08-10T17:10:31.123
> 
> 标签：facebook, facebook-graph-api, count

有没有办法从用户那里获取帖子的数量？我知道您可以从用户那里获取帖子，但是它是分页的，并且通过页面计数将是无稽之谈。我不一定需要帖子的内容，但我很想知道用户发布了多少。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:10:18.960

您必须计算记录数。如果使用 FQL 做

```
 SELECT ' ' FROM... WHERE... 
```

FB 将返回空行。

# python - 与 cookie 和登录相关的 JSESSIONID 和 PSESSIONID 是什么？

> ID：11906296
> 
> 赞同：1
> 
> 时间：2012-08-10T17:10:38.863
> 
> 标签：python, session

我试图在连续运行程序时保持登录到网站。会话最终会超时。

这是我的测试程序：

```
import urllib
import urllib2
import cookielib
import re

url = 'https://www.locationary.com/'

data = urllib.urlencode({"inUserName":"EMAIL", "inUserPass":"PASSWORD"})
jar = cookielib.FileCookieJar("cookies")
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
opener.addheaders.append(('User-agent', 'Mozilla/5.0 (Windows NT 6.1; rv:13.0) Gecko/20100101 Firefox/13.0.1'))
opener.addheaders.append(('Referer', 'http://www.locationary.com/'))
opener.addheaders.append(('Cookie','site_version=REGULAR; JSESSIONID=781FD0C497FB596954BB78B1323215F6'))
request = urllib2.Request("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction", data)
response = opener.open(request)
page = opener.open(url).read()
print re.findall(r'<title>(.*)</title>', page)
h = response.info().headers
print h 
```

输出是：

```
['Home Page']
['Server: nginx/1.0.8\r\n', 'Date: Fri, 10 Aug 2012 17:07:47 GMT\r\n', 'Content-Type: text/html;charset=UTF-8\r\n', 'Transfer-Encoding: chunked\r\n', 'Connection: close\r\n', 'Set-Cookie: PSESSIONID=533e2fb9fda008d5d16bfbdc9b9a6afed0e5ac54; Path=/\r\n', 'P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"\r\n', 'Set-Cookie: PSESSIONID=533e2fb9fda008d5d16bfbdc9b9a6afed0e5ac54; Path=/\r\n'] 
```

我进行了实验......如果我取出 cookie 的 JSESSIONID 部分，我的输出将是网站的主页，就好像我没有登录一样......所以它会说“Locationary.com”而不是“主页。” 当我将 JSESSIONID 放入时，一切正常，但服务器还设置了一个名为 PSESSIONID 的 cookie……这一切意味着什么……我怎样才能使它不会超时？我必须每隔半小时找到另一个 JSESSIONID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:24:53.560

Cookies 是一种用于通过无会话协议（例如http）创建会话假象的机制。您可以阅读所有相关信息，只需 google 即可（周围有很多很好的解释）。

如果您只是希望它正常工作，那么每当您获得`set-cookie`标头时，请保留该值（用相同的名称替换任何旧值），并在您发送的每个请求中发送它。为了稳健，我建议使用字典。

关于超时 - 让网站来处理，你只需按照他的命令（即设置 cookie :) 。

# qooxdoo - Qooxdoo - 使用的主题不可用

> ID：11906297
> 
> 赞同：0
> 
> 时间：2012-08-10T17:10:48.960
> 
> 标签：qooxdoo

我有一个 qx v2.0.1 应用程序在本地文件系统上工作，它在 Firefox v14 中运行良好，但在 Chrome v18 中它给了我这个错误：

```
Uncaught Error: The theme to use is not available: edd.theme.Theme
qx.Class.define.members.initializeMeta.js:108
qx.Class.define.members.mainAbstractGui.js:82
qx.Class.define.members.baseObject.js:141
qx.Class.define.members.mainApplication.js:38
qx.Class.define.statics.readyBaseInit.js:77
qx.Class.define.members.dispatchEventDirect.js:134
wrappedFunctionInterface.js:451
qx.Class.define.members.dispatchEventManager.js:873
qx.Class.define.statics.fireEventRegistration.js:310
qx.Class.define.members.__fireReadyApplication.js:188
qx.Class.define.statics.onScriptLoadedApplication.js:106
qx.$$loader.signalStartupedd.js:159
qx.$$loader.initUrisedd.js:195 
```

我以为我以前遇到过这个问题，并且 ./generate.py distclean 修复了它，但这次没有。其他人也有类似的错误已修复： [http ://bugzilla.qooxdoo.org/show_bug.cgi?id=1463](http://bugzilla.qooxdoo.org/show_bug.cgi?id=1463)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:39:23.533

这个问题太棘手了，可能涉及查看详细的生成器输出和您的工作配置等内容，因此它并不适合问答网站。我建议你在 qooxdoo 项目中为它打开一个[错误。](http://bugzilla.qooxdoo.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:41:44.173

有趣的是，在计算机重新启动后，它又开始在 chrome 中工作了。因此，从一开始就清除浏览器缓存/历史记录的所有内容一定不能捕获所有内容。所以现在它又开始工作了……奇怪。

# wso2 - ESB servicemix 与 WSO2/突触

> ID：11906299
> 
> 赞同：0
> 
> 时间：2012-08-10T17:11:07.483
> 
> 标签：wso2, esb, wso2carbon, apache-servicemix, synapse

我正在寻找满足以下要求的最佳 100% 开源 ESB，搜索后我在 Servicemix 和 WSO2/synapse 之间感到困惑
1- 请求者是移动应用程序，需要通过 REST（JSON 对象）公开所有服务
2-许多后端提供程序（JMS、SOAP、SMTP、LDAP...）
3- 提供简单的方法和灵活性来转换和执行复杂的业务逻辑
4- 安全性和缓存
5- 最重要的是易于学习、使用和扩展，只需少量学习曲线和良好的教程和社区支持
谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T22:38:09.147

我认为你可以通过这两种方式实现你想要的。您甚至可能想看看同样开源的类似 Mule ESB CE。

但是，考虑到您想要一个易于学习但不受限制的灵活解决方案，那么我会选择 Service Mix 并为其部署各种 Camel 路由。恕我直言，Camel 可能是最简单且记录最完整的开源集成引擎，我真的推荐它。

最后，这是一个品味问题。WSO2/synapse 以 Web 服务为基础，如果您对 XML 标准（包括 SOAP、BPEL..）比 Java 编程（在 SMX/camel 中需要）更熟悉，您可能会感觉更好。

# java - Appengine blobstore 访问控制 (java)

> ID：11906307
> 
> 赞同：0
> 
> 时间：2012-08-10T17:11:46.790
> 
> 标签：java, google-app-engine, acl, blobstore

我正在尝试使用 appengine 的 blobstore 安全地存储和访问文件。该文件只能由该文件所属组的成员访问。我正在通过查找成员的组来在数据存储中按组实现访问控制，如果实体是组的一部分，则允许访问实体，该组仅作为字段存储在实体中。这如何在 blobstore 中实现？除了使用 File Api 时的文件名之外，似乎没有任何元数据与 blob 一起存储。

我将通过 servlet 为 blob 提供服务，并希望在提供 blob 之前检查成员帐户。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:15:23.627

Blobstore 访问[始终通过您的 servlet](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)。您可以在调用之前实施访问控制`blobstoreService.serve(..)`。

# html - 带有两个密码字段的表单自动完成

> ID：11906313
> 
> 赞同：1
> 
> 时间：2012-08-10T17:12:18.210
> 
> 标签：html, forms, autocomplete

我在使用带有两个密码字段的表单时遇到问题。我有一个包含三个输入字段的表单：名称（文本）、id（密码）和 PIN（密码）。我的浏览器存储来自 PIN 的密码，并在我下次访问该页面时将其自动填充回 id 字段。PIN 字段初始化为空。

有没有办法将 ID 号存储为保存的密码和 PIN 留空？我尝试在 PIN 输入字段中添加“autocomplete=off”属性，但没有任何效果。

FWIW，我正在使用 Firefox 并尝试不使用 javascript。

任何建议（或有关自动完成/密码保存如何在任何浏览器中实际工作的文档）将不胜感激。

肯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T14:44:03.683

如果 autocomplete="off" 不起作用，您应该`<input type="password" style="display: none;"/>`在输入任何密码之前添加。它将保存完整的密码，并且不会干扰任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:19:14.593

`<input name="password" type="password" autocomplete="off">`应该在Firefox中做到这一点。

请参阅此答案：[autocomplete="off" 是否与所有现代浏览器兼容？](https://stackoverflow.com/questions/3868299/is-autocomplete-off-compatible-with-all-modern-browsers?rq=1)

你把*引号*放在引号里了吗？

# git - git 工作流挑战，用于 2 向合并永久分支，其中存在一些不应合并的差异

> ID：11906314
> 
> 赞同：1
> 
> 时间：2012-08-10T17:12:18.723
> 
> 标签：git

我们使用 git & github 作为我们的代码存储库。我的一位合同开发人员在 Windows 上，其余的则不在。windows 开发人员不得不对各种文件进行一些更改，以使项目在 windows 上运行。这些更改永远不应合并回主分支。除了这些更改之外，他还进行了我们希望合并回我们的主分支（经过我的审查）的提交（包括对他之前可能已经做出特定于 Windows 的提交的文件的一些提交）。

我最初解决这个问题的尝试失败了。我们为他创建了一个特殊的分支“windev”并将其添加到 origin。他将他最初的特定于 Windows 的提交提交到跟踪远程分支的本地 windev 分支，然后继续在这个分支中专门工作，向它推送。最初，我想，好吧，我只是挑选他的相关提交，因为我不想将他的特定于 Windows 的提交合并到我们的主分支。这可以很好地将好的提交提交到我们的主分支。问题是他还需要定期从 master 更新他的 windev 分支以获得最新的代码库。我们从尝试 rebase 开始，但它似乎造成了混乱，根本没有很好地处理樱桃选择或特定于 Windows 的提交。所以我' 每次他想更新他的代码时，他一直让他从主分支合并，但问题是他的分支中有重复的提交，因为我选择了他的每一个提交。我还怀疑这些重复提交会导致不必要的冲突和潜在的代码丢失。

我正准备和他重新开始，因为这似乎有点混乱，而且我担心它会产生错误或不必要的、容易出错的冲突。但我正在尝试找出适合这种情况的最佳工作流程，但我有点困惑。有任何想法吗？（PS 他是 git 的新手，对它感到困惑，所以我试图为他保持简单。我更愿意自己处理工作流程的任何复杂部分。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:55:05.220

只需为使其在 Windows 上工作所需的更改构建一个永久分支，并`windev`使用他编写的每个功能进行重建（即每次他需要`master`在本地更新时）。

这听起来比实际更复杂，我已经成功地使用它来管理 Tomcat 应用程序中一组长时间运行的并发、互斥的配置更改（即，`META-INF/context.xml`用于不同生产环境的多个版本）。

```
git checkout -B permanent master ;# check out a "permanent" branch
< make required windows changes and commit >
git checkout -B windev master ;# this is the branch he uses for new work
git merge permanent ;# merge 'permanent' into 'windev' 
```

所以现在他暂时离开了。您使用`cherry-pick`，这对您来说很好。当他需要重新合并`master`到`windev`时，这大概发生在他完成了某种功能或项目并且您已经挑选了他的新工作时，他只会发出：

```
git rebase --onto master master permanent ;# rebase permanent onto newest master
git checkout -B windev master ;# reset 'windev' to 'master'
git merge permanent ;# and merge in the required changes 
```

在实践中，只是每隔几天/几周发出最后三个命令。如果他非常混乱，并且在本地保留了很多 WIP，或者严重依赖其他团队成员的工作，那可能还不够。如果他相当孤立并且只需要`master`在合乎逻辑的工作点合并，这应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:21:57.250

您可能对[smudge clean](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)感兴趣，这是他可以用来在修改他的工作目录之前应用他的更改并在提交之前删除的钩子。理想情况下，它只是一个告诉 windows 或 linux 的标志，您的应用程序会在需要它的地方查看这个标志。

我能看到的所有其他可能性似乎都非常复杂：他有一个从不推送的*windev*分支，该分支永久基于*/remotes/origin/master ，并且他在**master*分支上提交，但始终必须在运行包含更改的软件之前检查*windev*他做成了*windev*，所以不是那么好。

我认为其他[钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)可能是值得的，比如每次他提交master 时都会在*master上 rebase* *windev 。*

# css - 为什么我的 CSS 水平菜单中的子导航项会截断文本而不是换行？

> ID：11906317
> 
> 赞同：0
> 
> 时间：2012-08-10T17:12:33.147
> 
> 标签：css, drop-down-menu, submenu

我正在努力将网站从主要是 Flash 转换为主要是 CSS / HTML。除了一件事，它正在顺利进行。

这是网站：

[http://cohen.digitaldemo.net](http://cohen.digitaldemo.net)

如果您将鼠标悬停在 PRACTICE AREAS 顶部菜单选项上，您将看到子菜单中的第一项内容为：

```
ARBITRATION CV for STEVEN 
```

它*应该*读的是：

```
ARBITRATION CV for STEVEN COHEN 
```

换行的地方是这样的：

```
ARBITRATION CV for STEVEN
COHEN 
```

为什么不包起来？

对此的任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:15:19.170

第 130 行：

```
.sub-menu li { display:none ;
width:220px ;
    height: 23px; 
```

去掉这个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:19:22.587

在CSS中：

```
.sub-menu li {
    background: none repeat scroll 0 0 #FC940F;
    display: none;
    height: 23px;
    margin: 0;
    padding: 0;
    width: 220px;
} 
```

你限制了宽度和高度，所以基本上它是包裹的，但你看不到包裹的部分。您可以删除高度以便看到包裹，或增加宽度使其不包裹。

# c# - 更改新组件的工具箱

> ID：11906323
> 
> 赞同：0
> 
> 时间：2012-08-10T17:13:16.047
> 
> 标签：c#, components

全部，我在我正在处理我的应用程序的解决方案中的 Visual Studio 中创建了一个新组件。现在我希望该组件出现在 Visual Studio 的工具箱中。

我怎样才能做到这一点？

我试图关闭并重新打开解决方案，但它不存在。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:24:22.643

创建控件后重新构建解决方案时，Visual Studio 会通过创建以应用程序命名的新类别来自动添加控件。如果出于某种原因，VS 没有添加它，您可以通过右键单击工具箱并选择自定义来手动添加它。将出现一个对话框，列出要添加到工具箱的程序集。由于您有一个自定义控件，因此您需要浏览控件的 DLL（您在应用程序的 Bin 文件夹下拥有它）。这会将控件添加到工具箱中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:17:09.077

您右键单击工具箱并选择“自定义”，您将有一个对话框，让您浏览到您的控件的程序集。

# c++ - 将模型绑定到 Qt TableView

> ID：11906324
> 
> 赞同：16
> 
> 时间：2012-08-10T17:13:17.093
> 
> 标签：c++, qt, qtgui

我是 Qt 编程的新手，我想使用从 XML 文件中获取的 Qt TableView 显示数据。

我找不到任何有关如何创建自定义模型然后将其绑定到 TableView 的有用教程。

请提供一些帮助，或者如果有人有一些好的例子，请分享。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-10T18:12:48.423

Qt 中的模型视图方法非常通用。所有模型都继承自[QAbstractItemModel](http://doc.qt.io/qt-5/qabstractitemmodel.html)。使用这个类，您可以创建相当复杂的数据布局（列表、树、表格等），但相比之下，实现的工作量也相当大。

一个随时可用的类将是`QStandardItemModel`. 您可以轻松创建表模型并添加项目，这些项目是`QStandardItem`. 您可以使用以下代码开始：

```
#include <QtGui>

QStandardItemModel* createModel(QObject* parent)
{
    const int numRows = 10;
    const int numColumns = 10;

    QStandardItemModel* model = new QStandardItemModel(numRows, numColumns);
    for (int row = 0; row < numRows; ++row)
    {
        for (int column = 0; column < numColumns; ++column)
        {
            QString text = QString('A' + row) + QString::number(column + 1);
            QStandardItem* item = new QStandardItem(text);
            model->setItem(row, column, item);
        }
     }

    return model;
}

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QMainWindow window;
    QTableView* view = new QTableView;
    view->setModel(createModel(view));
    window.setCentralWidget(view);
    window.show();

    return app.exec();
} 
```

你看，它真的很容易使用。但是，缺点是您必须通过 a 提供数据`QStandardItem`，这可能会浪费内存。例如，假设您有几个 100MB 的数据，您希望在视图中显示这些数据。由于您已经将数据存储在某处，因此最好对其进行调整，以便可以在视图中使用它，而不是`QStandardItem`为每个单元格创建一个。

这就是`QAbstractTableModel`发挥作用的地方。以下示例创建一个包含 250.000 个条目的矩阵。我们不是为每个矩阵元素创建一个`QStandardItem`，而是子类化`QAbstractTableModel`并实现三个纯虚方法 和`numRows()`，它们返回行数、列数和要显示的数据。`numColumns()``data()`

```
#include <QtGui>

class MatrixModel : public QAbstractTableModel
{
public:
    MatrixModel(int numRows, int numColumns, double* data)
        : m_numRows(numRows),
          m_numColumns(numColumns),
          m_data(data)
    {
    }

    int rowCount(const QModelIndex& parent = QModelIndex()) const
    {
        return m_numRows;
    }

    int columnCount(const QModelIndex& parent = QModelIndex()) const
    {
        return m_numColumns;
    }

    QVariant data(const QModelIndex& index, int role = Qt::DisplayRole) const
    {
        if (!index.isValid() || role != Qt::DisplayRole)
            return QVariant();

        // Return the data to which index points.
        return m_data[index.row() * m_numColumns + index.column()];
    }

private:
    int m_numRows;
    int m_numColumns;
    double* m_data;
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    // Create a matrix.
    const int numRows = 500;
    const int numColumns = 500;
    double matrix[numRows][numColumns];
    for (int i = 0; i < numRows; ++i)
        for (int j = 0; j < numColumns; ++j)
            matrix[i][j] = i + j;

    // Create a model which adapts the data (the matrix) to the view.
    MatrixModel model(numRows, numColumns, (double*)matrix);

    QMainWindow window;
    QTableView* view = new QTableView;
    view->setModel(&model);
    window.setCentralWidget(view);
    window.show();

    return app.exec();
} 
```

如您所见，该模型不复制任何数据，而只是充当适配器。如果您需要更大的灵活性，您可以去`QAbstractItemModel`实现模型索引的创建，Qt 使用它来指定要读取或写入的模型数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:00:42.580

这可能会让你开始，[http://doc.qt.io/qt-5/modelview.html](http://doc.qt.io/qt-5/modelview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:04:44.843

您是否想要一个自定义模型，因为您希望它能够从不断变化的 XML 源中主动读取和更新？

如果没有，您可以简单地使用任何普通的 QTableView 教程和[QStandardItemModel](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html)。自己解析 XML 文件并创建[QStandardItem](http://qt-project.org/doc/qt-4.8/qstandarditem.html)对象，将它们添加到您的模型中。

定制模型是一种将 XML 文件的读取直接集成到模型本身的方法，这与在外部填充它的基于项的方法相反。

# joomla - Joomla 内容区域中的显示模块包装器链接

> ID：11906332
> 
> 赞同：0
> 
> 时间：2012-08-10T17:13:49.807
> 
> 标签：joomla, joomla2.5

我添加了一个显示图像的模块（包装器）。该图像链接到另一个网页。

它位于侧边栏位置，单击它时，页面加载到与图像相同的位置（应该如此）。

但是，是否可以将链接页面加载到 Joomla 的主页或内容区域而不是模块位置？

(Joomla 2.5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:22:04.237

你有2个选择。

1.  您可以使用您拥有的当前模块并将其嵌入到文章中`{loadposition xxx}`
2.  创建一个菜单项并将类型设置为“包装器”。

# wpf - 尝试为 SolidColorBrush 静态资源设置动画

> ID：11906335
> 
> 赞同：3
> 
> 时间：2012-08-10T17:14:01.010
> 
> 标签：wpf, animation, resourcedictionary, brush, staticresource

### 我想要什么

我想在多种`UserControl`类型中重用一些样式。

我希望某些`Border`控件的背景闪烁，并且我希望它们都使用相同的样式、静态资源和动画，以便它们都同步闪烁。

* * *

### 我是如何做到的

为此，我在资源字典中定义了一些常用颜色，如下所示：

```
<SolidColorBrush x:Key="StatusErrorBackground" Color="#440000" /> 
```

...而且我还在这本词典中定义了一个 StoryBoard，如下所示：

```
<Storyboard x:Key="BackgroundAnimation">
    <ColorAnimation
        Storyboard.Target="{StaticResource StatusErrorBackground}"
        Storyboard.TargetProperty="Color"
        From="#440000"
        To="#ff0000"
        Duration="0:0:1"
        RepeatBehavior="Forever"
        AutoReverse="True"/>
</Storyboard> 
```

然后，我将以下内容添加到顶级`UserControl`：

```
<FrameworkElement.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="CommonResources.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</FrameworkElement.Resources>

<FrameworkElement.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource BackgroundAnimation}"/>
    </EventTrigger>
</FrameworkElement.Triggers> 
```

...然后在其他各种`UserControl`作为其子级的 s 中，我重新导入`ResourceDictionary`上述内容并使用`{StaticResource StatusErrorBackground}`for a `Background`。

有问题的元素是红色的（如`SolidColorBrush`声明中所示），*但它们没有闪烁*.

* * *

### 到目前为止的模糊理解

也许这样做不会针对相关元素引发适当的 PropertyChanged 通知，因此它们不会被重绘？或类似的东西。`Color`on 属性`SolidColorBrush`不是依赖属性，而是`SolidColorBrush`implements ，所以我不明白这里`IAnimatable`显然在幕后发生了魔法。

还是因为我在两个不同的地方（一次在我的顶层`UserControl`加上一次在我的孩子）导入了相同的资源字典，所以我最终得到了两个独立的`StaticResource`引用？如果`ResourceDictionary`在两个不同的控件中导入同一个文件，是否会为每个控件创建独立的资源？在这种情况下，我想我可以通过在应用程序级别将其拉入来解决此问题...

谁能告诉我我做错了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-05T12:38:28.433

我知道我在这里迟到了，但是当我尝试在实心画笔中保存的颜色进行动画处理时，我发现了这个问题。画笔是其他人正在使用的资源字典的一部分，我不想更改。我刚做了这个，很快就尝试了，它似乎奏效了。

```
public class SolidColorAnimation : ColorAnimation
{
    public SolidColorBrush ToBrush
    {
        get { return To == null ? null : new SolidColorBrush(To.Value); }
        set { To = value?.Color; }
    }
} 
```

并像这样在 xaml 中使用它：

```
 <Trigger Property="IsMouseOver" Value="True">
            <Trigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard >
                        <ui:SolidColorAnimation Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)" ToBrush="{StaticResource NavButtonRolloverBrush}" Duration="0:0:0.75"/>
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.EnterActions>
            <Trigger.ExitActions>
                <BeginStoryboard>
                    <Storyboard >
                        <ui:SolidColorAnimation Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)" ToBrush="{StaticResource NavButtonBrush}" Duration="0:0:0.25"/>
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.ExitActions>
        </Trigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:06:06.060

我真的不能说为什么，但如果你添加一个虚拟对象，例如一个使用 SolidColorBrush 作为其`Fill`属性的 Rectangle，然后为它设置动画，它就会起作用`Fill`。现在 SolidColorBrush 的颜色被动画化了。

```
<SolidColorBrush x:Key="StatusErrorBackground" Color="#440000" />
<Rectangle x:Key="StatusErrorBackgroundRectangle" Fill="{StaticResource StatusErrorBackground}"/>

<Storyboard x:Key="BackgroundAnimation">
    <ColorAnimation 
        Storyboard.Target="{DynamicResource StatusErrorBackgroundRectangle}" 
        Storyboard.TargetProperty="Fill.(SolidColorBrush.Color)" 
        ... />
</Storyboard> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-13T18:52:22.727

只需使用

`<Color x:Key="name" A="0" R="255" G="255" B="255"/>`

而不是

`<SolidColorBrush x:Key="name" Color="#0fff"/>`

这对我行得通

# spring-mvc - 主干.js 或 Spring MVC 之间的设计决策

> ID：11906336
> 
> 赞同：0
> 
> 时间：2012-08-10T17:14:07.083
> 
> 标签：spring-mvc, backbone.js, spring-data

我必须开发一个应用程序，它将存储在文件系统中的 XML 报告解析并将其放入数据库并通过以各种 MIME 类型（XML、JSON、RSS 和 HTML）查询数据库来显示报告。所以到目前为止我所做的是解析文件系统中的 XML 报告，在 MongoDB 中为数据库设置模式，使用 Spring-data 将数据放入数据库中，并设法拥有一个 Web 服务，以 XML、JSON 格式显示报告的粗略草稿和 RSS 提要。现在我也想以 HTML 格式显示报告，我的主管建议我使用 Backbone.js 通过调用 Web 服务以 HTML 格式显示它。请建议我选择 b/w Backbone.js 或编写另一个以 HTML 格式生成报告的 Spring MVC Web 服务。

提前感谢斯瓦拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:03:24.213

您要问的是两种不同的事物，并在它们之间进行选择。你必须知道你对 webapp 的总体目标是什么，以及什么框架最适合它。

简短的回答，Spring MVC 直接与 Dojo.js 集成，这可能会做你需要做的事情，但由于你的主管建议你的选择是：

*   使用 Spring MVC 使用您选择的任何渲染来构建和显示 HTML 中的数据。

或者

*   构建您的 Spring MVC wepapp API，以便您可以使用 JavaScript MVC 框架，例如 Backbone.js 或许多其他框架之一（有关示例，请参阅[TODOMVC](http://todomvc.com)），与您的 spring 控制器进行交互。

选项 1 可能很简单，与 JavaScript 或 jQuery 和插件一起使用

如果您的 web 应用程序很复杂并且主要是一个使用大量 JavaScript 的 SPA（单页应用程序）并且您想要一种更好地组织您的 js 代码的方法，那么选项 2 会很好。有关其工作原理的示例，请参阅[JavaScript MVC 图。](http://blog.javascriptmvc.com/?p=68)

# mysql - 如何连接 SQL 查询的两个表，其中第二个表用于对第一个表进行排序？

> ID：11906340
> 
> 赞同：0
> 
> 时间：2012-08-10T17:14:27.620
> 
> 标签：mysql

我正在努力理解 php/mysql 应用程序的自定义模式可以组合在 SELECT 查询中，但我不熟悉这种关系。我是一个新手程序员，缺乏描述这种关系的能力，以便在网上找到具体信息。我正在寻找一些伪代码或技术术语来设计这个模式。

它很简单，如下所示。我还尝试了将 SQL 命令作为伪代码通知的逻辑，这就是我解码的地方，我不得不寻求帮助 (9_9)

这是一个使用两个表的分类模式。第一个表包含术语和基于权重的顺序（从最低到最高）值。第二个表指定了第一个表的父子关系。有趣的是，第一个表中的子权重就像多维数组的第二个值，父权重*m*索引子权重*n*。类似于 taxonomy_term_weight [ *m* ][ *n* ]

```
table_a                table_b on table_a.ID 
+-----+------+-----+...+-----+ 
| ID  | TRM  | WT  |...| P   | 
+-----+------+-----+...+-----+ 
|1    |  3   | [9] |...| [0] | 
|2    |  1.1 | [0] |...| [9] | 
|3    |  2   | [8] |...| [0] | 
|4    |  2.1 | [0] |...| [3] | 
|5    |  2.2 | [1] |...| [3] | 
|9    |  1   | [5] |...| [0] | 
+-----+------+-----+...+-----+ 
table_a = term table,
table_b = hierarchy table
TRM= TERM, WT= WEIGHT, P=PARENT 
```

我对伪代码的尝试。从逻辑上讲，要获得第一项，我们需要找到 P=0 的记录（意味着它没有父项，并且在这个方案中本身就是父项）并且它的权重值应该是最低的（意味着它的第一项）。类似这样的伪代码，

`table_a.ID=table_b.P=0 AND table_a.WT=[lowest value] //e.g. P=0, WT=5, Therefore ID=9;`

然后，生成的 ID 是查找子记录的父 ID，

`table_a.ID=table_b.P AND table_a.WT[lowest value] //e.g. P=9, WT=0, Therefore ID=2;`

其次是，

`table_a.ID=table_b.P AND table_a.WT=[lowest value] //e.g. P=2, WT=0, Therefore ID=none;`

但我想要的是同一个父母，体重增加，

`P=9, WT=1, Therefore ID=none;`

我理解将表格串在一起，但这似乎是曲折或振荡的。我很快意识到存在我不理解的深度复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:44:22.880

不知道最后的“重量增加”位是什么意思（从什么/哪里增加？） - 但这可能很容易添加到下面......所以，从我的头顶和假设在没有任何函数/存储过程或专用视图的情况下需要单个查询，则如下所示：

**[注意：这是在我的脑海中手写的，可能需要一些剪裁、拼写检查和非常可能的优化——它也在 asni sql 中使其独立于数据库（在某种程度上）]**

```
select ID3 from
( 
  select id as id1, min(wt) as w1 from table_a A1 Inner join table_b B1 on A1.id = B1.p
  where p=0
) Q1
inner join
( 
  select id as id2, min(wt) as w2 from table_a A2 Inner join table_b B2 on A2.id = B2.p
) Q2
on Q1.id1 = Q2.id2
inner join
( 
  select id as id3, min(wt) as w3 from table_a A3 Inner join table_b B3 on A3.id = B3.p
) Q3
on Q3.id3 = Q1.id1 
```

编辑：为清楚起见添加...我对问题的理解是这样的。在示例中，我们将 P 值设为零（这可能是最终解决方案中的一个变量）。此查询 (block1) 连接 2 个表 a 和 b 并返回一个 ID (2)。这需要传递回相同的查询（将 P=0 替换为 P=2 以再次匹配表 a 中的 ID）。

此时，该示例给出了当前返回的 ID (5)，但确实想使用来自块 1 (p=9) 的 ID，因此此处的第三个块与 P 上的第一个查询连接（输出为 id1）。

这意味着第二个块（Q2）的输出根本没有使用，因此我在上面对此发表了评论。

顺便说一句，所有这些都是使用表 a 和表 b 之间的连接作为 itslef 中的虚拟表。这可以通过使查询更简单（至少更易于阅读）的观点来实现。

如果这不是实际需要的，那么我需要更好地解释在给定示例中需要如何交互步骤（需要什么，而不是解决方案中的当前内容）。我在这里没有预见到问题，这一切似乎都可以在单个查询中的数据库级别上实现。如果这些表非常大，则可能需要一些索引（这也是视图可以提供帮助的地方 - 查看索引 - 或使用 SPROC 和临时表，然后可以对其进行索引）。

# jquery - 如何在单击时打开 JQuery UI 弹出窗口

> ID：11906342
> 
> 赞同：8
> 
> 时间：2012-08-10T17:14:29.360
> 
> 标签：jquery, jquery-ui, popup

我有简单的html页面：

```
<html>
<head>
<title></title>
</head>
<body>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#OpenDialog").click(function () {
                $("#dialog").dialog({modal: true, height: 590, width: 1005 });
            });
        });
    </script>
    <a id="#OpenDialog" href="#">Click here to open dialog</a>
    <div id="dialog" title="Dialog Title">
        <p>test</p>
    </div>

</body>
</html> 
```

我需要隐藏弹出内容，然后单击链接打开一个对话框。

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-10T17:15:48.063

`id``#`如果你想使用你`jQuery selector`在`$("#OpenDialog").click(`

改变

```
<a id="#OpenDialog" href="#">Click here to open dialog</a> 
```

到

```
 <a id="OpenDialog" href="#">Click here to open dialog</a> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T17:18:56.830

`id`将链接的从更改`#OpenDialog`为`OpenDialog`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-17T17:47:47.783

css 链接和脚本需要放在头部，而不是正文中。

正如其他人所提到的，还将链接 ID 从 更改`#OpenDialog`为`OpenDialog`。

# fuelphp - Fuelphp html电子邮件问题

> ID：11906344
> 
> 赞同：0
> 
> 时间：2012-08-10T17:14:36.940
> 
> 标签：fuelphp

我遇到了一个我无法解决的问题。

我查看了fuelphp文档，是这样做的，但是我得到了一个错误，传递了walue

代码

```
$email_data = array();
//echo Config::get('base_url'). "user/activate/". $user['hash'];
$email = Email::forge();
$email->from('my@email.me', Config::get('site_name'));
$email->to(Input::post('email'), Input::post('first_name') . " " . Input::post('last_name'));
$email->subject('Regisztráció');

$email_data['name'] = "Kedves " . Input::post('first_name'). " " .Input::post('last_name') ."<br><br>" ;
$email_data['title'] = "Üdvözöllek a ".Config::get('site_name')." oldalán" ."<br>";
$email_data['link'] = '<a href="'.Config::get('site_url'). "user/activate/". $user['hash'].'">Fiókod mherősítéséhez kérlek kattints ide</a>';

$email->html_body(\View::forge('email/activation', $email_data));
$email->send();

$response->body(json_encode(array(
'status' => 'ok',
))); 
```

电子邮件模板文件

```
<?php 

print_r($email_data);
 ?> 
```

电子邮件把这个发给我

```
Notice!

ErrorException [ Notice ]: Undefined variable: email_data

APPPATH/views/email/activation.php @ line 3:

2:3:print_r($email_data);4:?> 
```

请有人给我一个提示我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:43:15.897

```
$email->html_body(\View::forge('email/activation', $email_data)); 
```

应该

```
$email->html_body(\View::forge('email/activation', array('email_data' => $email_data))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T22:57:16.873

你的控制器是正确的。这是您不正确的模板。

将数据传递给视图（模板）时，您将其作为数组传递。所以你认为应该是：

```
...
You Name is : <?php echo $name ?>
You title is : <?php echo $title ?>
... 
```

这是它应该做的方式。不将数组转换为其他数组的元素以执行 print_r...

# ios - heightForRowatIndexPath 不设置单元格高度

> ID：11906346
> 
> 赞同：1
> 
> 时间：2012-08-10T17:14:42.737
> 
> 标签：ios, uitableview, heightforrowatindexpath

我正在尝试创建一个包含 3 个组的分组表视图，每个组都有不同高度的单元格。我在我的 Storyboard 中设置了 3 个具有适当高度的原型单元，并设置了我的 UITableViewController 以返回每行的适当高度。但是由于某种原因，我的所有单元格出现在屏幕上时都只有 1 个像素高。

我已经逐步完成了代码，并为每一行返回了正确的高度和单元格。我还验证了每个单元格的框架在返回之前是正确的。然而，调用`rectForRowAtIndexPath`显示`rect`每行只有 1 个像素高。

当使用恒定的像元高度时，这个问题就完全消失了。在这种情况下，单元格显示完美，其中一些太短/太高，因为它们应该是可变高度。

有什么想法吗？我想了解在使用`heightForRowAtIndexPath`.

heightForRowAtIndexPath 的代码：

```
- (NSInteger)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    switch (indexPath.section) {
        case 0:
            return 80.0;
            break;

        case 1:
            return 260.0;
            break;

        case 2:
            return 110.0;
            break;

        case 3:
            return 114.0;
           break;

        default:
            break;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:04:07.043

您已宣布`tableView:heightForRowAtIndexPath:`返回`NSInteger`。

那应该是`CGFloat`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:37:26.857

只是为了增加行的高度。只需在 indexpath 处编写行的高度方法简单地编写

```
if (indexpath.section== 0)

  return 50; 
```

# haskell - 应用重写（Haskell）

> ID：11906347
> 
> 赞同：2
> 
> 时间：2012-08-10T17:15:13.323
> 
> 标签：haskell, applicative, pointfree

当我不了解 Haskell 中的表达式如何工作时，我经常发现将其分解为更基本的形式会有所帮助。

使用以下定义

```
sequenceA :: (Applicative f) => [f a] -> f [a]
sequenceA [] = pure []
sequenceA (x:xs) = (:) <$> x <*> sequenceA xs

instance Applicative ((->) r) where
    pure x = (\_ -> x)
    f <*> g = \x -> f x (g x) 
```

我改写`sequenceA [(+3),(+2)] 3`为

```
(\_ -> (:)) <*> (+3) <*> ((\_ -> (:)) <*> (+2) <*> (\_-> [])) $ 3 
```

然后把它变成（请原谅格式；我不确定分割线的约定是什么）

`(\d ->(\c->(\b -> (\a -> (\_ -> (:)) a (+3) a) b (\_ -> (:)) b) c (+2) c) d (\_ -> []) d) 3`

当我手动完成它时，这似乎是正确的，但我无法让 GHCi 接受它。我在这里做错了什么？我的第二个问题是如何从这种形式转换为功能组合。我试过用各种组合替换点，但 GHCi 拒绝所有这些....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:05:01.813

作为一个无所事事的闲人，我想我会做一台电脑来为我做扩展。所以进入 GHCi，我输入

```
let pu x = "(\\_ -> " ++ x ++ ")"
let f >*< a = "(\\g -> " ++ f ++ " g (" ++ a ++ " g))" 
```

所以现在我有了有趣的版本，`pure`哪些`<*>`将看起来像表达式的字符串映射到看起来像更复杂的表达式的字符串。然后，我类似地定义了`sequenceA`用字符串替换函数的类似物。

```
let sqa [] = pu "[]" ; sqa (f : fs) = (pu "(:)" >*< f) >*< sqa fs 
```

然后我能够生成示例的扩展形式，如下所示

```
putStrLn $ sqa ["(+3)","(+2)"] ++ " 3" 
```

正式印刷

```
(\g -> (\g -> (\_ -> (:)) g ((+3) g)) g ((\g -> (\g -> (\_ -> (:)) g ((+2) g)) g  ((\_ -> []) g)) g)) 3 
```

最后，复制到提示符，产生

```
[6,5] 
```

将我的“元程序”的输出与问题中的尝试进行比较，发现 lambda 的初始前缀较短，这是由于`<*>`操作嵌套较浅而引起的。记住，是

```
(pure (:) <*> (+3)) <*> ((pure (:) <*> (+2)) <*> pure []) 
```

所以外部`(:)`应该只有三个 lambdas 深。我怀疑提议的扩展可能对应于上述不同括号中的版本，也许

```
pure (:) <*> (+3) <*> pure (:) <*> (+2) <*> pure [] 
```

确实，当我评估

```
putStrLn $ pu "(:)" >*< "(+3)" >*< pu "(:)" >*< "(+2)" >*< pu "[]" ++ " 3 " 
```

我明白了

```
(\g -> (\g -> (\g -> (\g -> (\_ -> (:)) g ((+3) g)) g ((\_ -> (:)) g)) g ((+2) g)) g ((\_ -> []) g)) 3 
```

看起来它与（更新）匹配

```
(\d -> (\c -> (\b -> (\a -> (\_ -> (:)) a ((+3) a)) b ((\_ -> (:)) b)) c ((+2) c)) d ((\_ -> []) d)) 3 
```

我希望这种机器辅助调查有助于澄清发生了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T17:25:57.200

您重写`(\_ -> (:)) <*> (+3)`为`\a -> (\_ -> (:)) a (+3) a`，这是重写`f <*> g`为`f x g x`而不是`f x (g x)`。我想你每个人都犯了这个错误`<*>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T19:51:31.417

可能更容易使用组合符，例如`_S`and `_K`，象征性地，而不是它们作为 lambda 表达式的定义，

```
_S f g x = f x (g x)
_K x y   = x 
```

正如其他人已经提到的，对于函数，`fmap`is`(.)`和`<*>`is 。`_S`所以，

```
sequenceA [(+3),(+2)] 3 ==
    ( ((:) <$> (+3)) <*> sequenceA [(+2)]        ) 3  ==
    _S ((:).(+3))   ( ((:) <$> (+2)) <*> pure [] ) 3  ==
    _S ((:).(+3))   ( _S ((:).(+2))   (_K [])    ) 3  ==
       ((:).(+3)) 3 ( _S ((:).(+2))   (_K [])  3 )    ==
       ((:).(+3)) 3 (    ((:).(+2)) 3 (_K [] 3)  )    ==
    (6:) ( (5:) [] ) ==
    [6,5] 
```

因此，将表达式分解为基本函数和组合子并停在那里（即*不将**它们*分解为它们的 lambda 表达式）可能会更容易，使用它们的*“重写规则”*来操纵表达式以找到其更易于理解的形式。

如果你愿意，你现在可以为自己写下一个更抽象、更非正式的重写`sequenceA`规则

```
sequenceA [f,g,..., z] ==
    _S ((:).f) . _S ((:).g) . _S ..... . _S ((:).z) . _K [] 
```

所以

```
sequenceA [f,g,..., z] a ==
    ((:).f) a $ ((:).g) a $  ..... $ ((:).z) a $ _K [] a ==
    (f a:)    $ (g a:)    $  ..... $ (z a:)    $ []      ==
    [f a, g a, ..., z a] 
```

因此

```
sequenceA fs a == map ($ a) fs == flip (map . flip ($)) fs a 
```

以机智，

```
Prelude Control.Applicative> flip (map . flip ($)) [(+3),(+2)] 3
[6,5] 
```

# c# - 验证定制的 SMTP 服务器

> ID：11906348
> 
> 赞同：2
> 
> 时间：2012-08-10T17:15:14.947
> 
> 标签：c#, smtp

我已经用 C# 制作了自己的 SMTP 服务器，并且我想提供使其需要身份验证的选项。我在 Google 上找不到任何地方显示 SMTP 应发送/接收哪些响应和请求以向客户端进行身份验证。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:23:54.377

阅读[RFC 2554（用于身份验证的 SMTP 服务扩展）](http://tools.ietf.org/rfc/rfc2554.txt)。

有一个完整的教程在

[http://www.fehcom.de/qmail/smtpauth.html](http://www.fehcom.de/qmail/smtpauth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:24:15.907

您可以尝试使用这些行 - SmtpClient.Credentials 属性

```
SmtpClient client = new SmtpClient();
NetworkCredential networkCredential = 
    new NetworkCredential("username", "password"); 

client.Credentials = networkCredential ; 
```

你有文章在这里

[http://msdn.microsoft.com/fr-fr/library/system.net.mail.smtpclient.credentials.aspx](http://msdn.microsoft.com/fr-fr/library/system.net.mail.smtpclient.credentials.aspx)

# .net - 我如何使用 ObjectSet 作为参数？

> ID：11906349
> 
> 赞同：0
> 
> 时间：2012-08-10T17:15:17.567
> 
> 标签：.net, entity-framework

```
using (var context = new JasminEntities())
{
    var expType = (from o in context.tblExpTypes where o.Id == lvExpType.FocusedItem.Text select o).Single();
        context.tblExpTypes.DeleteObject(expType);
        context.SaveChanges();
} 
```

我有上面的代码，我只需要将 context.tblExpTypes 作为参数传递，因为在我的项目中有许多表单需要删除任务，我如何作为参数传递，然后在函数中检查要删除的对象集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:16:29.463

通用方法呢：

```
public void Delete<T>(int someKey) where T : class, IEntity {
    var expType = context.CreateObjectSet<T>().SingleOrDefault(x => x.Id == someKey);
    if (expType != null) {
       context.DeleteObject(expType);
       context.SaveChanges();
    } 
} 
```

您还必须确保每个实体都有`Id`属性并且它实现了接口`IEntity`：

```
public interface IEntity {
    int Id { get; }
} 
```

# textmate - TextMate 中的 HTML 格式（自动“凹痕”）

> ID：11906352
> 
> 赞同：1
> 
> 时间：2012-08-10T17:15:25.703
> 
> 标签：textmate, indentation, html-editor, auto-indent

我正在使用 TextMate 并且缩进没有像我预期的那样工作 - 更具体地说，它不会为我“突出”结束标签。

我创建了一个新的 HTML 文件，将光标向下移动到正文部分...然后键入

```
<ul>(newline) 
```

它为我适当缩进了下一行，因此我构建了以下内容

```
<ul>
    <li>hello
        </li>
        </ul> 
```

显然，结束标签“可以”被缩进以与它们的开始标签对齐。我很惊讶 TextMate 不会自动执行此操作。我错过了什么吗？有时我喜欢输入我的开始和结束标签，然后填写空白......但我一直得到这个：

```
<div>
    </div> 
```

它正确缩进 - 但它不明白这是一个结束标签 - 这意味着我必须将光标移到结束标签后面并自己缩进。

# windows-phone-7 - 动态添加UI元素到scrollviewer，win phone

> ID：11906358
> 
> 赞同：1
> 
> 时间：2012-08-10T17:15:49.650
> 
> 标签：windows-phone-7, windows-phone-7.1

我知道如何将孩子添加到面板中。就像这样 stackpanel.children.add(uielement);

但是我在stackpanel中有一个scrollviewer。我想在滚动查看器中添加文本块和其他元素，但没有向滚动查看器添加子项的功能。我试图在滚动视图中添加另一个堆栈面板并向其中添加元素......但是如果我将元素动态添加到滚动视图中定义的堆栈面板，则元素显示正确但没有滚动。如果我也这样做：

```
 <ScrollViewer>
        <StackPanel x:Name="StckPanel">
              <TextBlock Text="etc" />
         </StackPanel>
     </ScrollViewer> 
```

这样做启用了滚动。但是如果我使用 StckPanel.Children.Add(Textblock Object); 将元素添加到堆栈面板；它确实添加了元素，但现在禁用了滚动。这是我所做的： XAML 代码是

```
 <ScrollViewer>
        <StackPanel x:Name="Hello"></StackPanel>
    </ScrollViewer> 
```

在我的 c# 文件中，我这样做了：

```
 TextBlock x= new TextBlock();
        x.Text="Here it goes";
        StckPanel.Children.Add(x); 
```

但是当我这样做时，滚动被禁用。我无法滚动。

所以我需要知道为什么滚动在这里不起作用。我应该如何在 ScrollViewer 中添加子元素。与在 XAML 中一样，我们可以在 ScrollViewer 的标签内添加 UIElements。为什么我们不能使用 c# 做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:13:05.520

好吧，我发现了问题。我没有正确指定高度宽度和边距。结果，这以某种方式弄乱了滚动。

# javascript - 如何修复 jQuery 1.8 “语法错误，无法识别的表达式”错误？

> ID：11906363
> 
> 赞同：-1
> 
> 时间：2012-08-10T17:16:24.593
> 
> 标签：javascript, jquery, dependencies

```
<script type="text/javascript">
$(function(){
    $(".user_ava").click(function() {
        $("div:.userMenu",this ).animate({
            height: ["toggle", "swing"],
            opacity: "toggle"
        }, 200, "linear");
    });
});
</script> 
```

错误：消息（未捕获的错误：语法错误，无法识别的表达式：:.userMenu）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:18:46.597

中的冒号`"div:.userMenu"`不正确，jquery 无法识别。如果你想`<div>`用`userMenu`类全选，语法是

```
$("div.userMenu",this ); 
```

完整脚本：

```
<script type="text/javascript">
$(function(){
    $(".user_ava").click(function() {
        $("div.userMenu",this ).animate({ // you had a colon here for some reason
            height: ["toggle", "swing"],
            opacity: "toggle"
        }, 200, "linear");
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:19:47.813

删除“div:.userMenu”中的“:”

```
<script type="text/javascript">
$(function(){
    $(".user_ava").click(function() {
        $("div.userMenu",this ).animate({
            height: ["toggle", "swing"],
            opacity: "toggle"
        }, 200, "linear");
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T17:20:20.270

更改`div:.userMenu`为`div.userMenu`

# ios - NSFetchedResultsController 的部分按两个标准排序

> ID：11906367
> 
> 赞同：1
> 
> 时间：2012-08-10T17:16:39.470
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我有一个显示音乐家专辑的表格视图。每个部分是一个专辑，每一行是一个曲目。我需要按发行日期排序的专辑/部分，然后按标题。我正在从 Core Data 中提取曲目，如下所示：

```
fetchRequest = [[NSFetchRequest alloc] init];
...
fetchRequest.sortDescriptors = [NSArray arrayWithObjects:
                                [NSSortDescriptor sortDescriptorWithKey:@"album.releaseDate" ascending:YES],
                                [NSSortDescriptor sortDescriptorWithKey:@"album.title" ascending:YES],
                                [NSSortDescriptor sortDescriptorWithKey:@"trackNumber" ascending:YES],
                                nil];
frc = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                          managedObjectContext:context
                                            sectionNameKeyPath:@"album.releaseDate" // <-- PROBLEM HERE
                                                     cacheName:nil]; 
```

这不起作用，因为发行日期相同的两张专辑将出现在同一部分。

如果我使用album.title 作为sectionNameKeyPath，地狱就会崩溃，因为这些部分是按字母顺序排序的，然后强加在曲目上（按日期、标题、曲目编号排序）。

如何按日期对部分进行排序，然后按标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:16:39.470

根据我的阅读，这种单一属性排序只是我们在 iOS 上必须使用的东西。所以我在 Album 中添加了一个临时属性，作为两个属性的排序键：

```
- (NSString *)sortKeyDateTitle
{
    [self willAccessValueForKey:@"sortKeyDateTitle"];
    NSString *sortKey = [NSString stringWithFormat:@"%@%@", self.releaseDate, self.title];
    [self didAccessValueForKey:@"sortKeyDateTitle"];
    return sortKey;
} 
```

它产生这样的字符串：

```
1954-04-01 06:00:00 +0000A Night At Birdland, Vol. 1
1954-04-01 06:00:00 +0000A Night At Birdland, Vol. 2 
```

它有效，但从日期转换为字符串**进行排序**似乎很愚蠢。我在等待更好的东西。

# php - 使用 PHP 防止图像内的 XSS 攻击

> ID：11906372
> 
> 赞同：6
> 
> 时间：2012-08-10T17:16:55.100
> 
> 标签：php, codeigniter, security, xss

阅读[http://dsecrg.com/files/pub/pdf/XSS_in_images_evasion_bypass_(eng).pdf](http://dsecrg.com/files/pub/pdf/XSS_in_images_evasion_bypass_(eng).pdf)后，很明显，允许用户上传图像会使您面临 XSS 攻击。

我找不到任何关于如何筛选上传的图像以防 XSS 攻击的 PHP 示例。

我为我正在使用的**CodeIgniter**找到了一个。该功能是`xss_clean($file, IS_IMAGE)`，但它只有 1 句话的文档，所以我不知道它是如何工作的，他们论坛中的评论说它的误报率高得不合理，所以它在生产中不可用。

你有什么建议来防止上传图像中的 XSS 攻击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:23:58.200

只要您保持扩展正确（并且您的用户努力更新他们的浏览器）图像注入应该是不可能的。

例如，如果有人`alert('xss');`作为图像上传并且您有`<img src='that-image.png'>`，它将作为 png 发出并且 JavaScript 不会执行（至少回到 IE7）。重要的是您适当地重命名图像。

如果你有 php > 5.3 和`finfo`PECL 扩展，你可以使用它来获取文件的 mime 类型，并有一个你将允许的类型的白名单（我想是 png、jpg、gif）。如果您在 Linux 机器上，`file`也可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:11:01.013

在 CodeIgniter 中有很多方法可以防止 XSS。您可以在获取 ->post('data', true) 之类的值时启用它。第二个参数是 XSS 布尔值。

另外，不要使用 HTML IMG 标签。使用 CodeIgniter 可以清理、查看并使显示图像更容易。

只是我的两分钱！

# sharepoint - 学习sharepoint最有效方法的指导

> ID：11906376
> 
> 赞同：0
> 
> 时间：2012-08-10T17:17:05.707
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我是一名 .NET 开发人员，在 Winforms、WPF 和一些使用 C# 的 ASP.NET 方面有几年的经验。作为开发人员，对我来说学习 Sharepoint 的最佳方式是什么？我会在业余时间学习，我的工作目前与sharepoint无关，但我看到了sharepoint可以做什么，我觉得这是一项值得我投入时间的技术。

我对书籍、视频、可能的培训、网络广播、视频、博客、论坛、社区以及您可能有的任何建议感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:04:24.020

我在这里做了一个非常详细的列表，这是我在过去 5 年中积累的尝试学习 SharePoint - 我希望它有所帮助： [学习 SharePoint 的最佳方式](http://www.matthewjbailey.com/best-way-to-learn-sharepoint/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:59:02.943

开始学习 SharePoint 的方法之一是使用 Sharepoint Hands Labs。您可以在此处阅读[SharePoint 2010 动手实验室](http://blogs.msdn.com/b/pstubbs/archive/2010/01/30/sharepoint-2010-hands-on-labs.aspx)。有趣的教程还有Codeplex 上的[Sharepoint Labs和](http://splabs.codeplex.com/)[SharePoint Server Virtual Labs](http://msdn.microsoft.com/en-us/cc707678.aspx)。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:17:39.583

我总是收到有关 SharePoint 培训的电子邮件。但它需要支付100美元以上。这是一个。

[http://elearning.left-brain.com/event/preparing-for-sharepoint-v15?code=EP3328D1](http://elearning.left-brain.com/event/preparing-for-sharepoint-v15?code=EP3328D1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:46:00.643

这里有一些资源可以帮助您入门。

[http://msdn.microsoft.com/en-us/sp2010devtrainingcourse.aspx](http://msdn.microsoft.com/en-us/sp2010devtrainingcourse.aspx)

[http://msdn.microsoft.com/en-us/library/ee557253.aspx](http://msdn.microsoft.com/en-us/library/ee557253.aspx)（示例下载位于顶部附近）

我可能会从自定义事件接收器或可视 Web 部件开始，然后只处理访问列表中的数据。

[http://msdn.microsoft.com/en-us/library/ff728093.aspx](http://msdn.microsoft.com/en-us/library/ff728093.aspx)（防止删除列表的自定义事件接收器）。

对于我喜欢的书

Microsoft SharePoint 2010 内部

专业 SharePoint 2010 开发

真实世界 SharePoint 2010：22 位 MVP 不可或缺的经验

同样作为第一步，您应该安装 SharePoint 并感受一下，一旦您这样做了，请查看 SharePoint 设计器，因为它可以完成用户通常想要的许多任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T00:39:12.703

我参加了官方的 Microsoft SharePoint 2010 开发人员课程，这非常有用。几家不同的公司提供它，但它并不便宜。[使用 Visual Studio 2010 进行 SharePoint 2010 开发](https://rads.stackoverflow.com/amzn/click/com/0321718313)也有很大帮助。还要了解您的城市中是否有 SharePoint 用户组。我的确实如此，它是与其他 SharePoint 用户和开发人员建立联系的好方法。

# .htaccess - 强制斜杠，并删除 index.php 并将 htaccess 放置在子文件夹中

> ID：11906380
> 
> 赞同：2
> 
> 时间：2012-08-10T17:17:17.497
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我有一个 CodeIgniter 项目放置在域的子文件夹中。对于涉及 CodeIgniter 目录的任何 url，我想让我的 .htaccess（放在 CodeIgniter 子文件夹中）执行以下操作：

1.  从任何网址中删除“index.php”。
2.  始终在任何 url 添加尾部斜杠。

目前我的 .htaccess 看起来像这样：

```
 RewriteEngine on
    RewriteBase /ci_folder/        #This is the CI Subfolder

    # Get rid of index.php
    RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ ./index.php/$1 [L,QSA]

    # Add trailing slash
    RewriteCond %{REQUEST_URI} !(.*)/$
    RewriteRule ^(.*[^/])$ $1/ [L,R=301] 
```

问题是，它只能部分工作；index.php 可以很好地删除，但是在添加尾部斜杠时，它不会重定向到“固定”url，而是重定向到本地路径 fx。

domain.com/ci_folder/method

被重定向到：

domain.com/home/sites/domain.com/public_html/ci_folder/index.php/method/

应该是：domain.com/ci_folder/method/！（也不包括任何 index.php）

- - 编辑 - -

这为我做到了：

```
 RewriteEngine on
    RewriteBase /ci_folder/

    RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [L]

    RewriteCond %{REQUEST_URI} !(.*)/$
    # dont rewrite if there was posted here!
    RewriteCond %{REQUEST_METHOD} !POST 
    RewriteRule ^(.*[^/])$ $1/ [L,R=301]

    RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:43:16.483

```
RewriteEngine on
RewriteBase /ci_folder/

RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]

RewriteCond %{REQUEST_URI} !(.*)/$
# dont rewrite if there was posted here!
RewriteCond %{REQUEST_METHOD} !POST 
RewriteRule ^(.*[^/])$ $1/ [L,R=301]

RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

# sql-server - 实体框架是否支持对自定义 getter 使用存储过程？

> ID：11906381
> 
> 赞同：0
> 
> 时间：2012-08-10T17:17:21.247
> 
> 标签：sql-server, entity-framework, stored-procedures

我的组织目前正在使用一个代码生成框架 (.nEtTiers)，它自动将遵循特定约定的[自定义存储过程映射到域模型中与过程具有相同签名的“get”方法。](http://nettiers.com/Database.ashx#Custom_Stored_Procedures_6)因此，例如，如果我有一个 Customer 表，并且我有一个存储过程 sp_custom_Customer_GetBySalesAmount(@salesAmount)，那么框架将在为 Customer 生成的 .NET 提供程序中创建一个 GetBySalesAmount(salesAmount)。

我知道 EF 支持对实体进行 CRUD 操作的存储过程。但是它是否支持映射到 getter 的自定义存储过程？我的组织希望开始朝着使用 EF 的方向发展，并且能够支持这一点将使过渡更加顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:10:05.960

带有 EDMX 的 EF 支持存储过程映射 - 这称为函数导入。函数导入被添加到上下文类（而不是实体类），因为现代 EF（4.x 或更高版本）采用了一些不同的方法，其中实体不应依赖于持久层 - 这些实体称为 POCO。

如果您的过程包含一些复杂性，则存储过程映射可能会有点棘手，因为 EF 并非支持所有内容。例如，不支持 TVP，只有 .NET 4.5 的 EF 支持从过程返回的多个结果集。

# python - 在 Three.js 和 VTK 中平移

> ID：11906383
> 
> 赞同：3
> 
> 时间：2012-08-10T17:17:26.433
> 
> 标签：python, web-applications, three.js, vtk

当我使用平移时，three.js 透视相机除了位置之外还有哪些变化？或者我如何将它与 VTK 同步。旋转和缩放我同步只是给 VTK three.js 透视相机参数。这是python中Pan的一些代码：

```
 def pan(self, start_x, start_y, dx, dy):
        '''
        Moving the model.
        '''
        end_x = start_x + dx
        end_y = start_y + dy
        dx = dx * self.world_coords_to_pixel_ratio
        dy = dy * self.world_coords_to_pixel_ratio
        matrix = self.renderer.GetActiveCamera().GetViewTransformMatrix()
        inverted_matrix = vtkMatrix4x4()
        dz = 0
        matrix.Invert(matrix, inverted_matrix)
        x, y, z = self.src_actor.GetPosition()
        dx, dy, dz = self._multiply_vtkMatrix4x4_by_vector(inverted_matrix,
            [dx, -dy, 0])
        camera = self.renderer.GetActiveCamera()
        self.src_actor.SetPosition(x + dx, y + dy, z + dz)
        self.selection_actor.SetPosition(x + dx, y + dy, z + dz)
        self.axes_and_bounding_box_actor.SetBounds(self.src_actor.GetBounds())
        self.renderer.ResetCameraClippingRange() 
```

在 three.js 我使用 TrackballControls

# r - PLM 对象到 LaTeX 表

> ID：11906385
> 
> 赞同：0
> 
> 时间：2012-08-10T17:17:33.050
> 
> 标签：r, plm

如何使用 plm 对象制作 LaTeX 表格？

我一直在使用 apsrtable 为 lm 对象的输出摘要制作 LaTeX 表，但似乎找不到使用 plm 做同样事情的简单方法。我正在使用 plm 和 VcovBK() 计算面板校正的标准误差，但随后必须进入乳胶并手动更改标准误差。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:04:41.993

从 2.0 版开始，[stargazer](http://cran.r-project.org/web/packages/stargazer/index.html)包支持 PLM 对象。它还制作了一些非常漂亮的桌子，因此值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:11:37.610

应该工作的一般方法是将结果放入 a`data.frame`并用于`xtable`创建 LaTex 表。这可能比使用预制模板需要更多的工作，但它非常灵活。

# php - SphinxApi 和查询似乎挂起

> ID：11906390
> 
> 赞同：0
> 
> 时间：2012-08-10T17:18:07.893
> 
> 标签：php, windows-7, apache2, sphinx

当使用 SphinxAPI 从 PHP 以编程方式访问 Sphinx 时，查询命令会导致我的 Web 浏览器思考大约 30 秒，然后在没有任何日志消息的情况下失败（或者可能是超时？）。所以这是我的代码：

```
$cl = new SphinxClient();
$cl->SetServer("localhost", 9312);
$res = $cl->query($query, "isp"); 
```

此时执行停止，好像发生了一些错误，但没有登录`log`或`query_log`我的 sphinx.conf 文件的位置。

对于我的 sphinx.conf 文件，缩写部分是：

```
searchd {
    listen = 9312
    listen = 9306:mysql41
    log = {$MY_BASE}\ISP_Sphinx\log\searchd.log
    query_log = {$MY_BASE}\ISP_Sphinx\log\query.log
    read_timeout = 5
    client_timeout = 300
    max_children = 30
    pid_file = {$MY_BASE}\ISP_Sphinx\log\searchd.pid
    {$ETC, ETC, ETC}
} 
```

在 DOS 提示符下，搜索工具按预期工作。

我已经 searchd 作为 Windows 服务运行，如[SphinxSearch 站点](http://sphinxsearch.com/docs/1.10/installing-windows.html)中所述。如果有人关心，我可以发布更多 sphinx.conf。这种情况似乎与我在 Google 上看到的任何其他情况都不匹配。有时这是一个端口问题，可以在其他问题中看到，但我认为这里不是这样。

那么是什么导致查询命令思考并失败，或者至少在其他地方可能会转储错误？我还检查了 Apache2 日志，但没有关于这个问题的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:29:18.027

在 Sphinx for Windows 中使用`localhost`是一个已知问题。请替换`localhost`为`127.0.0.1`。

如[SphinxSearch/Troubleshooting](http://www.mediawiki.org/wiki/Extension%3aSphinxSearch/Troubleshooting#localhost_vs._127.0.0.1)中所述：

> Windows Vista 和 Windows 7 在 $wgSphinxSearch_host 维护为 localhost 时出现问题，因此建议使用 127.0.0.1 而不是 localhost

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:29:59.453

尝试

`listen = 127.0.0.1:9312`

并更新 sphinx 版本，旧版本错误（src/sphinxstd.h，第 1389 行）

# javascript - Javascript，重复对象键 N 次，其值为 N

> ID：11906401
> 
> 赞同：2
> 
> 时间：2012-08-10T17:19:04.330
> 
> 标签：javascript, arrays

我想知道如何以更清洁和最佳的方式做到这一点：

我有一个具有以下结构的对象：

```
{
   "125": 2,
   "439": 3,
   "560": 1,
   "999": 2,
   ...
} 
```

我想创建一个重复每个键的平面数组，其值指示的次数。以及将键（字符串）转换为整数的奖励积分。在此示例中，结果数组应为：

```
[ 125, 125, 439, 439, 439, 560, 999, 999 ] 
```

我尝试了几种方法，但它们看起来都过度设计了。肯定有更简单的方法。这就是我用下划线得到的（它返回一个字符串数组，也不是整数）：

```
_.compact(_.flatten(_.map(files, function(num, id) { 
     return new Array(num+1).join('$'+id).split('$') 
}))) 
```

我知道有很多方法可以做到这一点。我只想要一个干净快捷的方法。作为一名**Ruby**开发人员，它可能很简单：

```
> files = {"125" => 2, "439" => 3, "560" => 1, "999" => 2}
 => {"125"=>2, "439"=>3, "560"=>1, "999"=>2} 
> files.map {|key, value| [key.to_i] * value}.flatten
 => [125, 125, 439, 439, 439, 560, 999, 999] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:25:25.627

尝试这个：

```
var obj = {
  "125": 2,
  "439": 3,
  "560": 1,
  "999": 2
}

var arr = [];

for (prop in obj) {
  for (var i = 0; i < obj[prop]; i++)
    arr.push(parseInt(prop));
}

console.log(arr)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:26:44.390

我知道这是纯 JavaScript，但对我来说似乎比您发布的代码更干净：

```
var dict = {
   "125": 2,
   "439": 3,
   "560": 1,
   "999": 2
}
var result = [];

for(key in dict)
    for(i = 0; i < dict[key]; i++)
        result.push(key * 1);

alert(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:43:46.980

辅助函数：

```
function flatten(obj){
 //static Array method: create array (a elements, value b) 
 Array.aXb = Array.aXb || function(a,b){
    b = b || 0;
    return String(this(a)).split(',').map(function(){return b;});
 }
 //obj2array 
 var arr = [];
 for (var k in obj)
    if (+obj[k]) arr = arr.concat(Array.aXb(+obj[k],k));
 return arr;
}
var obj= {"125": 2,"439": 3,
          "560": 1,"999": 2 },
flatten(obj); //=> [125,125,439,439,439,560,999,999] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:26:45.590

嗯......不知道我是否明白了，但也许是这样的：

```
var myObj = {
   "125": 2,
   "439": 3,
   "560": 1,
   "999": 2
},
myArray = [];

for(k in myObj){
    for(i = 0; i < myObj[k]; i++){
        myArray.push(k);
    }
}
console.log(myArray) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T17:26:54.447

这些方法中的任何一种是否更清洁都是非常主观的：

```
// some helper function for creating an array with repeated values
function repeat(val, times) {
    var arr = [];
    for(var i = 0; i < times; i = arr.push(val));
    return arr;
}

function convert(obj) {
    var result = [], key;
    for(key in obj) {
        result = result.concat(repeat(+key, obj[key]));
    }
    return result;
} 
```

或者更实用的方法：

```
Object.keys(obj).reduce(function(result, key) {
    return result.concat(repeat(+key, obj[key]));
}, []);

// with underscore.js
_.reduce(_.keys(obj), function(result, key) {
    return result.concat(repeat(+key, obj[key]));
}, []); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T17:34:48.843

上面其他答案的问题是javascript中的for..in语言结构将涉及对象原型链中的所有键。在这种情况下，我们应该只检查并添加正确的键。

```
var obj= {
   "125": 2,
   "439": 3,
   "560": 1,
   "999": 2
}

var arr=[];

for (var item in map) {
  //important check!
  if (map.hasOwnProperty(item)) {
    arr.push(item);
  }
} 
```

另见：[http ://www.yuiblog.com/blog/2006/09/26/for-in-intrigue/](http://www.yuiblog.com/blog/2006/09/26/for-in-intrigue/)

# orbeon - Orbeon 4.0.0.7m：表单运行器货币控制拒绝使用小数分隔符“，”（逗号）的输入无效

> ID：11906411
> 
> 赞同：1
> 
> 时间：2012-08-10T17:20:31.560
> 
> 标签：orbeon

我已经定义了一个带有货币控制的表单，并且需要使用逗号“，”作为小数分隔符。我已在 properties-local.xml 中相应地设置了小数分隔符 (,) 和分组分隔符 (.)（请参阅下面的详细信息）。

当我输入一个不带逗号的数字时，Orbeon 会接受它并按预期格式化。

例如，“15”变为“€ 15,00”。

但是，该表单不接受带有“，”的输入。

例如，“15,00”会导致验证错误。

输入“15.00”被接受，但货币控制的格式不正确，即

“15.00”变为“€ 1.500,00”

Orbeon 在输入到货币控件时似乎无法将“，”识别为小数分隔符。

我是否错过了设置一些额外的属性或类似的东西？如何用十进制逗号编写货币值？任何建议或想法如何使这项工作？

摘自properties-local.xml：

```
<property as="xs:string" name="oxf.xforms.xbl.fr.currency.prefix" value="&#x20AC;"/>
<property as="xs:string" name="oxf.xforms.xbl.fr.currency.digits-after-decimal" value="2"/>
<property as="xs:string" name="oxf.xforms.xbl.fr.currency.decimal-separator" value=","/>
<property as="xs:string" name="oxf.xforms.xbl.fr.currency.grouping-separator" value="."/>

<property as="xs:string" name="oxf.xforms.xbl.fr.number.prefix" value=""/>
<property as="xs:string" name="oxf.xforms.xbl.fr.number.digits-after-decimal" value="2"/>
<property as="xs:string" name="oxf.xforms.xbl.fr.number.decimal-separator" value=","/>
<property as="xs:string" name="oxf.xforms.xbl.fr.number.grouping-separator" value="."/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:49:34.193

So, finally I modified `number.xbl`, and two small modifications in `number.xbl` do the job for me.

1.  Find the modified `number.xbl` here - git://gist.github.com/3636583.git
2.  Put this `number.xbl` into folder `resources/xbl/orbeon/number`

# php - 如何停止出现两个回声（php）

> ID：11906419
> 
> 赞同：1
> 
> 时间：2012-08-10T17:21:09.323
> 
> 标签：php

```
while ($stmt->fetch()) {
    if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
        if ($dbActive == 1) {
            $loggedIn = true;
        } else if ($dbActive == 0) {
            $loggedIn = false;
            echo "You Must Activate Your Account from Email to Login";
        }
    }
}

if ($loggedIn == false && $_POST) {
    echo "The Username or Password that you Entered is not Valid. Try Entering it Again";
} 
```

在上面的代码中，我在显示一条消息时遇到了问题，我似乎无法弄清楚我做错了什么。如果用户输入错误的密码或用户名，则会显示消息

`"The Username or Password that you Entered is not Valid. Try Entering it Again"`.

这很好，但如果`$dbActive`= 0，它应该只显示消息

`You Must Activate Your Account from Email to Login`.

但相反，当发生这种情况时它会显示两条消息，因此它会显示

`You Must Activate Your Account from Email to LoginThe Username or Password that you Entered is not Valid. Try Entering it Again`.

我知道为什么会这样，但我似乎无法弄清楚。`$dbActive`如果= 0 ，如何阻止它显示两条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:28:40.753

你似乎以一种非常奇怪的方式这样做。

```
while($stmt->fetch()) { 
```

因此，您正在遍历数据库中的整个结果列表，检查每个结果是否与用户的详细信息匹配。为什么不在查询本身中包含详细信息？这样，您只需要检查数据库的返回 - 如果您得到返回的结果，您就知道这是一个有效的登录；如果什么都没有，您可以显示“无效登录”消息。

一旦你知道你得到了一个有效的结果，你就可以检查帐户是否需要激活。

在伪代码中：

```
if ($stmt->fetch()) {
    if ($row->$dbActive) {
        # valid login
    } else {
        # needs activation
    }
} else {
    # invalid login
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:26:06.390

这个逻辑可以更简单

从：

```
if ($dbActive == 1){
    $loggedIn = true;
} else if ($dbActive == 0) {
    $loggedIn = false;
    echo "You Must Activate Your Account from Email to Login";
} 
```

到：

```
if ($dbActive == 1){
    $loggedIn = true;
} else{
    $loggedIn = false;
    echo "You Must Activate Your Account from Email to Login";
} 
```

和你的最后一个条件

```
if ($loggedIn == false && isset($_POST['somefield']) {
    echo "The Username or Passwor...";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:27:10.610

```
if ($loggedIn == false && !empty($_POST) && $dbActive != 0) {
    echo "The Username or Password that you Entered is not Valid. Try Entering it Again";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:28:16.853

您的代码非常清楚地解释了一切：

```
while($stmt->fetch()) {
    if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
        if ($dbActive == 1){
            $loggedIn = true;
        } else if ($dbActive == 0) {

            $loggedIn = false;  

/****************************
 *
 * at this point, $loggedIn == false.
 *
 ****************************/

            echo "You Must Activate Your Account from Email to Login";
        }
    }
}

/****************************
 *
 * at this point, $loggedIn == false.
 *
 * since $loggedIn == false and $_POST is truthy, your if statement will get entered.
 *
 ****************************/

if ($loggedIn == false && $_POST) {
    echo "The Username or Password that you Entered is not Valid. Try Entering it Again";
} 
```

那么我们如何解决这个问题呢？简单的！我们添加另一个变量来声明用户是否处于活动状态。

```
$active = true;

.
.
.

if ($dbActive == 0) {
    $loggedIn = false;
    $active = false;
    echo "You Must Activate Your Account from Email to Login";
}

.
.
.

if (!$loggedIn && $active && isset($_POST['formInputName']) {
    echo "The Username or Password that you Entered is not Valid. Try Entering it Again";
} 
```

# c# - 从后面的代码显示 asp.net 中的警报框（并不总是有效）

> ID：11906422
> 
> 赞同：0
> 
> 时间：2012-08-10T17:21:35.313
> 
> 标签：c#, asp.net, registerstartupscript

我有一个通用的 Alert 函数，它在我的 asp.net 应用程序中显示一个消息框：

```
public void Alert(string sTitle, string sMessage)
{
  StringBuilder sbScript = new StringBuilder();
  sbScript.Append("<script language='Javascript'>");
  sbScript.Append("var varDateNow = new Date();");
  sbScript.Append("var varTimeNow = varDateNow.getTime();");
  //sbScript.Append("var varAlertTime = document.getElementById('Master_cphAlertTime').value;");        
  sbScript.Append("var varAlertTime = document.getElementById('cphAlertTime').value;");
  sbScript.Append("if(varTimeNow - varAlertTime < 1500)");
  sbScript.Append("{alert('");
  sbScript.Append(strMessage);
  sbScript.Append("');}");
  sbScript.Append("</script>");
  ClientScript.RegisterStartupScript(this.GetType(), strTitle, sbScript.ToString());
} 
```

警告框并非每次都出现。令我困惑的是为什么它有时会出现而在其他时间不出现？它不出现的时间是页面即将被重定向（或 server.transfer）到另一个页面的时候。

任何想法为什么随机功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:40:09.027

你可以在你的应用程序中实现这个静态类

```
public class MessageBox
{

        private static Hashtable m_executingPages = new Hashtable();
        private MessageBox()
        { }
        public static void Show(string sMessage)
        {
            // If this is the first time a page has called this method then
            if (!m_executingPages.Contains(HttpContext.Current.Handler))
            {
                // Attempt to cast HttpHandler as a Page.
                Page executingPage = HttpContext.Current.Handler as Page;
                if (executingPage != null)
                {
                    // Create a Queue to hold one or more messages.
                    Queue messageQueue = new Queue();
                    // Add our message to the Queue
                    messageQueue.Enqueue(sMessage);
                    // Add our message queue to the hash table. Use our page reference
                    // (IHttpHandler) as the key.
                    m_executingPages.Add(HttpContext.Current.Handler, messageQueue);
                    // Wire up Unload event so that we can inject 
                    // some JavaScript for the alerts.
                    executingPage.Unload += new EventHandler(ExecutingPage_Unload);
                }
            }
            else
            {
                // If were here then the method has allready been 
                // called from the executing Page.
                // We have allready created a message queue and stored a
                // reference to it in our hastable. 
                Queue queue = (Queue)m_executingPages[HttpContext.Current.Handler];
                // Add our message to the Queue
                queue.Enqueue(sMessage);
            }
        }

        // Our page has finished rendering so lets output the
        // JavaScript to produce the alert's
        private static void ExecutingPage_Unload(object sender, EventArgs e)
        {
            // Get our message queue from the hashtable
            Queue queue = (Queue)m_executingPages[HttpContext.Current.Handler];
            if (queue != null)
            {
                StringBuilder sb = new StringBuilder();
                // How many messages have been registered?
                int iMsgCount = queue.Count;
                // Use StringBuilder to build up our client slide JavaScript.
                sb.Append("<script language='javascript'>");
                // Loop round registered messages
                string sMsg;
                while (iMsgCount-- > 0)
                {
                    sMsg = (string)queue.Dequeue();
                    sMsg = sMsg.Replace("\n", "\\n");
                    sMsg = sMsg.Replace("\"", "'");
                    sb.Append(@"alert( """ + sMsg + @""" );");
                }
                // Close our JS
                sb.Append(@"</script>");
                // Were done, so remove our page reference from the hashtable
                m_executingPages.Remove(HttpContext.Current.Handler);
                // Write the JavaScript to the end of the response stream.
                HttpContext.Current.Response.Write(sb.ToString());
            }
        } 
```

并通过像这样的简单调用调用警报/消息框`MessageBox.Show("hello");`

# c# - 为什么依赖属性中的 get/set 没有做任何事情？

> ID：11906423
> 
> 赞同：7
> 
> 时间：2012-08-10T17:21:39.527
> 
> 标签：c#, wpf, dependency-properties

我创建了一个这样的依赖属性：

```
public partial class MyControl: UserControl
{
   //...

   public static DependencyProperty XyzProperty = DependencyProperty.Register("Xyz",typeof (string),typeof (MyControl),new PropertyMetadata(default(string)));

   public string Xyz
   {
       get { return (string) GetValue(XyzProperty ); }
       set { SetValue(XyzProperty , value); }            
   }

   //...
} 
```

然后将它绑定到我的 wpf 窗口，一切正常。

当我尝试向 setter 添加一些*逻辑*时，我注意到它没有被调用。我修改了get；设置到现在它们看起来像这样：

```
 get{return null;}
 set{} 
```

它仍然有效！怎么会？GetValue/SetValue 调用有什么用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T17:26:04.900

WPF 数据绑定基础结构直接使用 DependencyProperty，Xyz 属性是程序员的便利接口。

查看对 DependencyProperty.Register 的调用中的[PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata.aspx)，您可以提供一个回调，该回调将在属性值更改时运行，这是您可以应用业务逻辑的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:29:56.447

DependencyProperty 是 XyzProperty 的后备存储。如果您通过 DependencyProperty 接口访问属性，它将完全绕过属性的 Get/Set 访问器。

这样想：

```
private int _myValue = 0;

public int MyValue
{
    get { return _myValue; }
    set { _myValue = value; }
} 
```

在这种情况下，如果我手动分配`_myValue = 12`，显然不会调用 MyValue 属性的“Set”访问器；我完全绕过它！DependencyProperties 也是如此。WPF 的绑定系统直接使用 DependencyProperty 接口。

# php - Symfony2：在通用 PHP 类中获取 Doctrine

> ID：11906426
> 
> 赞同：4
> 
> 时间：2012-08-10T17:21:50.763
> 
> 标签：php, symfony, doctrine

在 Symfony2 项目中，当您使用*Controller*时，您可以通过调用on访问**Doctrine**，即：`getDoctrine()``this`

```
$this->getDoctrine(); 
```

通过这种方式，我可以访问这样一个 Doctrine Entity 的存储库。

假设在 Symfony2 项目中有一个通用的 PHP 类。我怎样才能找回*教义*？我想有这样的服务可以得到它，但我不知道是哪一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T17:29:54.807

您可以将此类注册为[服务](http://symfony.com/doc/current/book/service_container.html)并将任何其他服务注入其中。假设你有 GenericClass.php 如下：

```
class GenericClass
{
    public function __construct()
    {
        // some cool stuff
    }
} 
```

您可以将其注册为服务（`Resources/config/service.yml|xml`通常在您的包中）并将 Doctrine 的实体管理器注入其中：

```
services:
    my_mailer:
        class: Path/To/GenericClass
        arguments: [doctrine.orm.entity_manager] 
```

它会尝试将实体管理器注入（默认情况下）的构造函数`GenericClass`。所以你只需要为它添加参数：

```
public function __construct($entityManager)
{
     // do something awesome with entity manager
} 
```

如果您不确定应用程序的 DI 容器中有哪些服务可用，您可以使用命令行工具查找：`php app/console container:debug`它会列出所有可用服务及其别名和类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T01:07:33.217

检查 symfony2 文档后，我想出了如何以自定义方法传递您的服务以打破默认行为。

像这样重写你的配置：

```
services:
my_mailer:
    class: Path/To/GenericClass
    calls:
         - [anotherMethodName, [doctrine.orm.entity_manager]] 
```

因此，该服务现在可以通过您的其他方法使用。

```
public function anotherMethodName($entityManager)
{
    // your magic
} 
```

Ondrej 的回答是绝对正确的，我只是想把这块拼图添加到这个线程中。

# asp.net-mvc-3 - 迷失在如何使用 ASP.NET MVC 3.0 / Razor 验证表单帖子

> ID：11906430
> 
> 赞同：0
> 
> 时间：2012-08-10T17:22:10.523
> 
> 标签：asp.net-mvc-3

一个非常简单的场景，我有一个带有表单的页面，我想将它提交到服务器，如果数据成功验证显示不同的东西/数据/页面（我不在乎 URL 是否更改或保持不变）。最好的方法是什么？

更多数据 - 我需要一个向导类型的 UI，它需要在禁用 JavaScript 的情况下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:12:17.663

您想检查 ModelState.isvalid 属性。如果所有数据都通过验证，则返回 true，否则返回 false。
在您的控制器中

```
[HttpPost]
 public ActionResult SomeAction (SomeModel viewModel)
 {
  if (ModelState.IsValid)
  {
   //display different stuff/data/page
  }
  else
  {
   return View(viewModel);
  }
 } 
```

# javascript - 使用 jQuery 动画窗口

> ID：11906434
> 
> 赞同：0
> 
> 时间：2012-08-10T17:22:26.360
> 
> 标签：javascript, jquery

嗨，我正在尝试创建一个单页网站，其中包含多个与窗口大小相同的 div。该网站将有一个菜单来引用页面上的每个 div。我想要做的是在用户为窗口设置动画时单击指向其对应 div 的菜单链接之一。

[http://www.nistoralexandru.comule.com/div.jpg](http://www.nistoralexandru.comule.com/div.jpg)

当用户单击链接时，我需要将窗口设置为类似于该站点的 div 动画：

[http://shahkaarshah.com/](http://shahkaarshah.com/)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:33:46.693

你可能是指手风琴之类的东西？ [http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

jquery 有许多易于使用的手风琴插件，因此它们可能比从头开始编码更容易用于复杂的动画。

根据您添加的信息，也许像这样的网格手风琴？ [http://css-tricks.com/examples/InfoGrid/](http://css-tricks.com/examples/InfoGrid/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:00:34.110

您要链接到的站点是用 Flash 构建的，使用 javascript 复制不同页面元素的动画应该不难，但确实没有快速的“一刀切”功能来做到这一点。

这是一个通常如何完成的快速示例：

构建某种 HTML 结构：

```
​&lt;div id="site">
    <div id="main" class="page">
        <ul>
            <li><a href="#page1">Page 1</a></li>
            <li><a href="#page2">Page 2</a></li>
            <li><a href="#page3">Page 3</a></li>            
            <li><a href="#page4">Page 4</a></li>
            <li><a href="#page5">Page 5</a></li>
        </ul>
    </div>
    <div id="page1" class="page"><a href="#main">Back</a></div>
    <div id="page2" class="page"><a href="#main">Back</a></div>
    <div id="page3" class="page"><a href="#main">Back</a></div>
    <div id="page4" class="page"><a href="#main">Back</a></div>
    <div id="page5" class="page"><a href="#main">Back</a></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

并使用一点 javascript 在视口周围对其进行动画处理：

```
$('.page a').on('click', function(e) {
    e.preventDefault();
    var href = $(this).attr('href'),
        top = $(href).css('top'),
        left = $(href).css('left');
    $("#site").animate({top: '-'+top, left: '-'+left}, 1000);
}); 
```

这是一个[**小提琴**](http://jsfiddle.net/3UWSM/)

# php - 提交了我的 php 表单，但没有发送任何值

> ID：11906436
> 
> 赞同：0
> 
> 时间：2012-08-10T17:22:35.593
> 
> 标签：php, forms, email

出于某种原因，这些选项没有出现在我的电子邮件中。我可以让电子邮件发送就好了。我可以看到正文及其所有评论，但看不到用户所做的任何条目。我知道我做错了什么，但我无法确定它是什么。

另外，如果它看起来很糟糕，请随意嘲笑我。:)

```
$ToEmail = 'dmandrade1978@gmail.com'; 
$EmailSubject = 'Message from web page!!'; 

$name = $_POST['name'];
$email = $_POST['email'];
$comment = $_POST['comment'];
$urphone = $_POST['urphone'];
$event = $_POST['event'];
$date = $_POST['date'];
$mail = $_POST['mail'];
$phone = $_POST['phone'];
$comment = $_POST['comment'];
$hearaboutus = $_POST['hearaboutus'];

$body = <<<EMAIL
Email: $email <br />
Name: $name <br />
Comment: $comment <br />
Phone: $urphone <br />
Date: $urdate <br />
Comment: $comment <br />
How did you hear?: $hearaboutus <br />
Mail optiom: $mail <br />
EMAIL;

$header = "Content-type: text/html\r\n";
mail("$ToEmail", "$EmailSubject", "$body", "$header");
echo ("Message Sent!");

?>

<td class = "form">
<form action="?" method="get" enctype="text/plain">
<p class = "form">Name:<br />
<input type="text" name="name" id="name" /></p>
<p class = "form">E-mail:<br />
<input type="text" name="email" id="email" /></p>
<p class = "form">Phone #:<br />
<input type="text" name="urphone" id="urphone" /></p>
<p class = "form">Event type:<br />
<input type="text" name="event" id="event" /></p>
<p class = "form">Date of event:<br />
<input type="text" name="date" id="date" /></p>
<p class = "form" >Prefered method of contact:<br />
<span class = "contact">
<input type="radio" name="phone" id="phone" /> Phone<br />
<input type="radio" name="mail" id="mail" /> E-mail<br />
</span></p>
<p class = "form">How did you hear about us?:<br />
<select name="hearaboutus" id="hearaboutus" />
<option value="internet">Internet</option>
<option value="word of mouth">Friend/Family</option>
<option value="magazine">Magazine</option>
<option value="other">Other</option>
</select></p>
<p class = "form">Message, questions, or availability:<br />
<textarea rows="10" cols="30" name="comment" id="comment">
</textarea></p>
<input type="submit" value="Send email to us" id="submit">
<input type="reset" value="Reset and start over">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:36:48.520

改变`method="get"`

到

`method="post"`

并删除`enctype`. 在这种情况下不需要。

`?`另外，为什么你的行动中有一个？您可以将操作保留为空白，因为它正在发布到同一页面。

为了让事情变得更简单，复制粘贴下面的代码并再次运行文件

```
if(isset($_POST['submit']))
{
$ToEmail = 'dmandrade1978@gmail.com'; 
$EmailSubject = 'Message from web page!!'; 

$name = $_POST['name'];
$email = $_POST['email'];
$comment = $_POST['comment'];
$urphone = $_POST['urphone'];
$event = $_POST['event'];
$date = $_POST['date'];
$mail = $_POST['mail'];
$phone = $_POST['phone'];
$comment = $_POST['comment'];
$hearaboutus = $_POST['hearaboutus'];

$body = <<<EMAIL
Email: $email <br />
Name: $name <br />
Comment: $comment <br />
Phone: $urphone <br />
Date: $urdate <br />
Comment: $comment <br />
How did you hear?: $hearaboutus <br />
Mail optiom: $mail <br />
EMAIL;

$header = "Content-type: text/html\r\n";
mail("$ToEmail", "$EmailSubject", "$body", "$header");
echo ("Message Sent!");
}
?>

<td class = "form">
<form action="" method="post">
<p class = "form">Name:<br />
<input type="text" name="name" id="name" /></p>
<p class = "form">E-mail:<br />
<input type="text" name="email" id="email" /></p>
<p class = "form">Phone #:<br />
<input type="text" name="urphone" id="urphone" /></p>
<p class = "form">Event type:<br />
<input type="text" name="event" id="event" /></p>
<p class = "form">Date of event:<br />
<input type="text" name="date" id="date" /></p>
<p class = "form" >Prefered method of contact:<br />
<span class = "contact">
<input type="radio" name="phone" id="phone" /> Phone<br />
<input type="radio" name="mail" id="mail" /> E-mail<br />
</span></p>
<p class = "form">How did you hear about us?:<br />
<select name="hearaboutus" id="hearaboutus" />
<option value="internet">Internet</option>
<option value="word of mouth">Friend/Family</option>
<option value="magazine">Magazine</option>
<option value="other">Other</option>
</select></p>
<p class = "form">Message, questions, or availability:<br />
<textarea rows="10" cols="30" name="comment" id="comment">
</textarea></p>
<input type="submit" name="submit" value="Send email to us" id="submit">
<input type="reset" value="Reset and start over">
</form> 
```

# android - 如何将图像从硬盘复制到 Android 模拟器的 sd 卡？

> ID：11906437
> 
> 赞同：5
> 
> 时间：2012-08-10T17:22:38.967
> 
> 标签：android, android-emulator

我必须实现一个 Android 2.2 应用程序，它应该能够上传从它的图库中选择的图像，但是我没有安装 Android 2.2 的设备，所以我必须在模拟器上进行测试，但我不知道如何将图像复制到模拟器的 sd卡从我的电脑硬盘。我发现了很多类似类型的帖子，但没有一个对我有用。所以我希望你的帮助

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T17:31:04.360

如果您使用的是 DDMS 工具（无论是否在 Eclipse 下），您只需将图像拖放到所选文件夹即可。SDCard 文件夹位于 mnt 文件夹下。

![在此处输入图像描述](../Images/91d55ef5b2be55f4bc69a727f04547d0.png)

**已编辑**

DDMS 可以在 ...\android-sdk\tools 下找到。在 Eclipse 中，您可以通过单击*Window > Open Perspective > Other... > DDMS*添加一个透视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T13:01:33.317

adb push foo.jpg /sdcard/foo.jpg

按照这里的文档：http: [//developer.android.com/tools/help/adb.html#copyfiles](http://developer.android.com/tools/help/adb.html#copyfiles)

# workflow - 有没有办法将我的窗口设置为某个配置，然后使用快捷方式在配置之间切换？

> ID：11906439
> 
> 赞同：1
> 
> 时间：2012-08-10T17:22:55.733
> 
> 标签：workflow, development-environment

在进行 Web 开发时，我有几种工作模式，每种模式都有我的窗口的最佳排列。例如，在编码时，我喜欢让我的窗口以一种方式排列（Visual Studio 全屏等），而在浏览器中进行测试时，我喜欢让我的窗口完全不同（浏览器、检查窗口、源代码窗口等）。我不能简单地在窗口之间进行`Alt`+ `Tab`，因为我在每种模式下都使用多个窗口。

是否有某种方法可以让键盘快捷键将我的所有窗口安排到配置 A 中，然后另一个键盘快捷键将我的所有窗口安排回配置 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-12T14:50:30.803

答案是不。我得到的最佳解决方案是自己优化浏览器窗口并将它们保存在本地存储中以备后用。我为此[https://chrome.google.com/webstore/detail/multi-layout-manager/ijpiffheldgmdkbaohoilabdnmeinand?hl=en](https://chrome.google.com/webstore/detail/multi-layout-manager/ijpiffheldgmdkbaohoilabdnmeinand?hl=en)使用了 Google Chrome 扩展程序， 我必须使用网络套接字在浏览器窗口和选项卡之间进行通信。

# jquery - 新克隆行上的 Jquery 事件绑定

> ID：11906441
> 
> 赞同：0
> 
> 时间：2012-08-10T17:23:02.430
> 
> 标签：jquery, delegates, clone

我一直在研究一个功能，我需要在表格的每个单元格上实现自动保存，并且如果该单元格是最后一行的最后一个单元格，则添加一个新行。新克隆的行也应该具有相同的绑定模糊事件。我可以添加新行，但没有触发事件。这是代码..请帮助卡住很长时间..

```
$("#myTable1").live("blur", function(){
         var elementValue = document.getElementById("<%=count%>").value.toString();
         var value = $("#<%=count%>_hidden").attr('value').toString();
         var qualValue = "<%=qualValue %>";
    var sequenceNumber = "<%=sequenceNumber %>";
    var parentAttrbtInstId = "<%=parentAttrbtInstId %>";
    var parentId = "<%=parentId %>";
    var attrbtId = "<%=attrbtId %>";
    var attrbtInstId =  $("#<%=count%>_hidden").attr('attrbtInstId').toString();
    var rootId = "<%=rootId %>";
    var itemId = "<%=item.getItemId()%>";
    var currentCount = "<%=count%>";
    var cellCount = "<%=cellLimit%>";
    var rowId = "row_<%=rowCounter%>";
    var rowCount = <%=rowCounter%>;

      if(elementValue.toLowerCase() != value.toLowerCase()){
         $.ajax({
           url: "<portlet:resourceURL id='autoSaveAction' />",
             type: 'POST',
             dataType: 'json',
             data: { elementValue:elementValue,qualValue:qualValue,sequenceNumber:sequenceNumber,parentAttrbtInstId:parentAttrbtInstId,parentId:parentId,attrbtId:attrbtId,
              attrbtInstId:attrbtInstId,rootId:rootId,itemId:itemId},
             success : function(response) {
                 if (response.status == "SUCCESS") {
                    jsonstr=JSON.stringify(response.result);
 var temp=JSON.parse(jsonstr);
 $("#<%=count%>_hidden").attr('attrbtInstId',temp.attrInstId);
 document.getElementById("<%=count%>_hidden").value = temp.attrValue;
 if(currentCount == cellCount){
 cloneRow = $("#myTable1 tr:last").clone(true);

     cloneRow.attr({
       'id': function(_, id) { 
 return "row_"+(rowCount+1);
       }            
     }).end().appendTo("#myTable1");

 cloneRow.find("input").each(function() {
     $(this).attr({
       'id': function(_, id) { 
 if (id.indexOf("hidden")!= -1){
 return currentCount + "_hidden";
 }else{
        return ++currentCount;
 }
       }             
     });
   }).end().appendTo("#myTable1");
 cloneRow.find("select").each(function() {
     $(this).attr({
       'id': function(_, id) {
       if (id.indexOf("hidden")!= -1){
 return currentCount + "_hidden";
 }else{
        return ++currentCount;
 }
 }              
     });
   }).end().appendTo("#myTable1");
 cloneRow.find("textarea").each(function() {
     $(this).attr({
       'id': function(_, id) {
        if (id.indexOf("hidden")!= -1){
 return currentCount + "_hidden";
 }else{
        return ++currentCount;
 } 
       }              
     });
   }).end().appendTo("#myTable1");
 }

 } else {
      }
      },
     error:function (xhr, ajaxOptions, thrownError){ 

     }
         });
          }
     });
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:41:13.817

如果你想让表中的所有元素都有监听器，你首先需要给它们一个类，（比如“table-elem”），然后像这样附加一个监听器：

```
 $("#myTable1").on("blur", ".table-elem", function() {

        //your function you want to run
   }); 
```

# php - 有没有办法使用 Doctrine2 导出/恢复数据库？

> ID：11906443
> 
> 赞同：4
> 
> 时间：2012-08-10T17:23:29.323
> 
> 标签：php, database, symfony, doctrine-orm, backup

基本上，我希望网站管理员能够进行数据库备份并能够恢复它们，而不会让他弄乱 SQL 命令。我不介意输出格式，但 SQL 会很好。我只需要备份数据，而不是模式。

我在 MySQL 中使用 Symfony2 和 Doctrine。

我想知道是否有任何（简单的）方法可以做到这一点，例如：

```
$doctrine->dumpToFile('filename.sql');
...
$doctrine->restoreFromFile('filename.sql'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:05:49.560

没有办法使用 Doctrine 转储固定装置。

你应该使用[Propel ORM——](http://www.propelorm.org/)在 Symfony-1.4 中就是这样，并且有可能转储固定装置，在带有 Propel 1.6 的 Symfony-2.0 中也是如此。

它在 Symfony-2.0中有[很好的文档](http://www.propelorm.org/documentation/)，[易于安装](https://github.com/propelorm/PropelBundle)和[自然使用](http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html)

# swt - Tabris：有计划支持CTabFolder吗？

> ID：11906446
> 
> 赞同：0
> 
> 时间：2012-08-10T17:23:41.927
> 
> 标签：swt, eclipse-rap

Tabris-专家，

目前我想使用 CTabFolder 来关闭 CTabItems。到目前为止，Tabris 不支持 CTabFolder 是否正确？

使用以下代码...

```
public class TabFolderExample extends Shell {

public TabFolderExample(Display display) {
    super(display, SWT.NO_TRIM);
    createContents();
}

private void createContents() {
    setMaximized(true);
    setLayout(new FillLayout(SWT.VERTICAL));
    createTabFolder();
    createCTabFolder();
}

private void createTabFolder() {
    final TabFolder tabFolder = new TabFolder(this, SWT.NONE);

    final TabItem tab0 = new TabItem(tabFolder, SWT.NONE);
    tab0.setText("Tab0");
    Text text0 = new Text(tabFolder, SWT.SINGLE | SWT.LEAD | SWT.BORDER);
    text0.setText("Content Tab0");
    tab0.setControl(text0);

    final TabItem tab1 = new TabItem(tabFolder, SWT.NONE);
    tab1.setText("Tab1");
    Text text1 = new Text(tabFolder, SWT.SINGLE | SWT.LEAD | SWT.BORDER);
    text1.setText("Content Tab1");
    tab1.setControl(text1);
}

private void createCTabFolder() {
    final CTabFolder tabFolder = new CTabFolder(this, SWT.NONE);

    final CTabItem tab0 = new CTabItem(tabFolder, SWT.NONE);
    tab0.setText("Tab0");
    Text text0 = new Text(tabFolder, SWT.SINGLE | SWT.LEAD | SWT.BORDER);
    text0.setText("Content Tab0");
    tab0.setControl(text0);

    final CTabItem tab1 = new CTabItem(tabFolder, SWT.NONE);
    tab1.setText("Tab1");
    Text text1 = new Text(tabFolder, SWT.SINGLE | SWT.LEAD | SWT.BORDER);
    text1.setText("Content Tab1");
    tab1.setControl(text1);
}

@Override
protected void checkSubclass() {
    // Disable the check that prevents subclassing of SWT components
} 
```

}

我[在 iPad 上得到了这个结果](http://dl.dropbox.com/u/962415/TabFolder%20and%20CTabFolder.PNG)。底部的 CTabFolder 为空。

您目前建议如何解决此问题？我在考虑 StackLayout 和标签？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:13:44.990

在 iOS 的 Tabris 客户端上，CTabFolder 和 TabFolder（当前）是相同的。CTabFolder 的“扩展功能”并不真正适用于 iOS 默认 Tab/TabFolder UI。因此，要关闭选项卡，您现在可能需要重新考虑您的用户工作流程。

我们将再次查看 CTabFolder，看看我们是否可以像在 iPad 版 Safari 上实现 Tabs 一样实现它。但这肯定会沿着路线图走得更远。

# php - 当用户关闭浏览器选项卡时，如何使用 PHP 或 javascript 从我的站点注销用户？

> ID：11906455
> 
> 赞同：-6
> 
> 时间：2012-08-10T17:24:27.950
> 
> 标签：php, javascript, logout

我注意到我的用户即使关闭浏览器选项卡也会保持登录状态。

如果他们关闭浏览器选项卡，我如何自动注销他们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T17:27:56.450

如果您使用[会话 cookie](http://php.net/manual/en/features.sessions.php)，当浏览器会话存在时，cookie 将被删除。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-10T17:30:36.233

使用 PHP，您可以将其信息存储在会话 ( `$_SESSION`) 中，会话用于在您的 PHP 脚本之间传递信息，只要会话仍然可用，默认情况下，当用户关闭网页时会话会关闭，因此您可以执行类似的操作这：

```
<?php
// you must first start your session on every page that would need it
session_start();

//login.php
login($usr,$password);

function login($usr,$password){
    $_SESSION['usr'] = $usr;
    $_SESSION['password'] = $password;
}

// and when you decide to logout
function logout(){
    session_destroy();
} 
```

在其他所有部分中，您可能需要访问您从中获取的信息`$_SESSION['usr']`。在此处查看有关会话的更多信息：[`session_start()`](http://php.net/manual/en/features.sessions.php)和[`session_destroy()`](http://php.net/manual/en/function.session-destroy.php)

# jquery - 立即开始使用 jQuery 无限滚动加载

> ID：11906460
> 
> 赞同：0
> 
> 时间：2012-08-10T17:25:03.987
> 
> 标签：jquery, jquery-masonry, infinite-scroll

我正在使用带有 Masonry 的 Infinite Scroll jQuery 插件。每个页面都有大约一百个小图像，这足以填满 iPad 的屏幕，但对于像 iMac 的屏幕这样大的东西来说还不够。

无论我在调用无限滚动时将 bufferPx 选项设置多高，都不会加载其他内容，直到查看器开始滚动。有没有办法可以修改这种行为，以便在查看器滚动*之前*无限滚动加载其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:55:56.360

更多信息会有所帮助，但我可以提供一个简单的设置来缓解您的疑虑。

您可以在启动时将无限滚动对象设置为变量（为方便起见），然后在回调函数中定位该变量以获得容器高度，将其与当前窗口的高度进行比较，如果它更小，您可以触发“检索”方法以使其开始加载更多图像。填满屏幕后，它会像往常一样礼貌地等待滚动事件。

```
$infinite = $('#infinitebox');
$infinite.infinitescroll({options}, function() {
    if ( $infinite.height() < $(window).height() ) {
        $infinite.infinitescroll('retrieve');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:11:42.083

好吧，这就是无限滚动器的全部意义：查看器滚动，新内容加载。您有一个沙箱或小提琴来显示您尝试过的代码吗？如果您在[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)上阅读，您可能会找到您需要的内容：“在 1.4 中，您可以随意触发下一页内容的加载”。

# actionscript-3 - 在 as3 中计算舞台上特定类的实例数

> ID：11906466
> 
> 赞同：1
> 
> 时间：2012-08-10T17:25:41.363
> 
> 标签：actionscript-3, class, instance

有人知道如何获取当前舞台上特定类（在我的情况下为 Ball.as）的实例数。

注意：我想要一个不包括使用 numChildren 然后循环遍历所有子项的解决方案，因为我想要每个 enterFrame 的 Balls 数量，并且像这样循环可能只会使我的代码更重。

那么有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:49:50.960

## a) 数一数

```
var balls:uint = 0;
for(var i:uint=0,l:uint = numChildren; i<l;i++)
  if(getChildAt(i) is Ball) balls++; 
```

## b) 跟踪他们

```
var balls:uint = 0;

function addBall():DisplayObject {
   balls++;
   return addChild(new Ball());
}

function removeBall(ball:Ball):DisplayObject {
   balls--;
   return removeChild(ball);
} 
```

## c) 隔离它们

```
var ballContainer:Sprite = new Sprite();
addChild(ballContainer);

...

ballContainer.addChild(new Ball());

var balls:uint = ballContainer.numChildren; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:51:31.687

您可以在类中使用静态变量来跟踪，但这意味着您必须始终正确跟踪该变量，否则最终可能会出现错误的计数。

```
public static var count:int = 0;

public Ball() {
   addEventListener(Event.ADDED, onAdded);   
   addEventListener(Event.REMOVED, onRemoved);
}

private function onAdded(event:Event):void {
   removeEventListener(Event.ADDED, onAddeed);
   Ball.count++;
}

private function onRemoved(event:Event):void{
   removeEventListener(Event.REMOVED, onRemoved);
   Ball.count--;
} 
```

然后每当你想计算它们时：

```
trace(Ball.count); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:32:25.867

我认为没有办法绕过循环。

当我有一个任意大小的 Actionscript 项目时，我将创建一个静态管理器类来处理所有应用程序范围的变量。您可以在其中创建一个数组，并在创建新的球实例时从该数组中添加/删除。

# sql - 获取以前的值+新值作为列？

> ID：11906473
> 
> 赞同：0
> 
> 时间：2012-08-10T17:26:32.270
> 
> 标签：sql, sql-server

说我有这个：

```
select money from somewhere 
```

我现在想要另一列，称为累积金钱，它将是 = 上一行的累积金钱 + 当前行的金钱 例如：

```
m = 2, am = 2
m = 3, am = 5
m = 3, am = 8

... 
```

我能做些什么来实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:41:46.233

在任何数据库中，您都可以使用相关子查询来执行此操作：

```
select t.am, t.m,
       (select sum(tprev.m) from t tprev where tprev.am <= t.am) as cumsum
from t 
```

在任何数据库中，您还可以通过以下方式作为联接和分组来执行此操作：

```
select t.am, t.m, sum(tprev.m) as cumsum
from t join
     t tprev
     on tprev.am <= t.am
group by t.am, t.m 
```

在支持累积和的数据库中，您可以这样做：

```
select t.am, t.m,
       sum(t.m) over (order by t.am) as cumsum
from t 
```

（SQL Server 2012 和 Oracle 支持这一点。）

# hadoop - 从包中提取有序元组值

> ID：11906474
> 
> 赞同：3
> 
> 时间：2012-08-10T17:26:32.713
> 
> 标签：hadoop, apache-pig

在猪中，我将我的数据按摩成如下内容：

```
(a,{(b,c),(d,e),(f,g)})
(h,{(i,j),(k,l)}) 
```

其中第一项是组，袋子是与组相关的其他值。我想把它变成以下格式：

```
(a,b,c,d,e,f,g)
(h,i,j,k,l) 
```

我到了现在的位置

```
grunt> j = foreach G {            
>>     o = order myvar by second;
>>     generate group, o.(first,second);
>> }; 
```

所以包中的元组当前是有序的。如果我做类似的事情，`mystuff = foreach j generate group, flatten($1);`我会把它全部展平和不分组。

这在猪中是否可行，如果可以，我应该查看什么命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T23:50:03.287

我无法做到开箱即用。您确实需要为此使用[用户定义的函数](http://pig.apache.org/docs/r0.10.0/udf.html)。我知道这很糟糕，因为您必须编写 Java 或 Python 代码，但是您会发现 Pig 还远远不够的几种情况。Pig 可以被认为是一种数据流语言，而不是一种编程语言，这就是 UDF 发挥如此重要作用的原因：它们弥合了差距。

我的建议是你写一个UDF，它接受`group`和值包作为参数。在 UDF 中进行排序/排序以及展平。

* * *

The other thing you want to be careful about is that now your rows will have different numbers of columns and Pig doesn't really like this. If you are just immediately outputting it, you can probably get away with this. You might want to consider having your UDF write out the list in a tab-delimited string or something that is preformatted. This isn't that big of a deal... feel free to ignore my advice here.

# java - Spring MVC htmlspecialchars() 替代

> ID：11906475
> 
> 赞同：1
> 
> 时间：2012-08-10T17:26:38.353
> 
> 标签：java, spring, jsp

我正在寻找 PHP 的 htmlspecialchars() 的替代方案，或者甚至更好的使用 Spring MVC 的全局解决方案。例如，如果使用 ModelAndView 或 ModelMap 从 Controller 传递到 View 的数据被自动处理，那就太好了，这样我就可以确定我正在使用 jsp View 中的安全字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:43:50.913

如果您使用 JSP 来显示您的数据，您需要做的就是使用 JSTL 的`<c:out>`标签或`fn:escapeXml()`函数来转义 HTML 特殊字符：

```
Last Name : <c:out value="${someBean.lastName}"/>
First Name : ${fn:escapeXml(someBean.firstName)} 
```

我绝对不会在控制器中这样做。这是视图的工作之一。

# c# - asp.net中的加密

> ID：11906483
> 
> 赞同：1
> 
> 时间：2012-08-10T17:27:16.147
> 
> 标签：c#, asp.net, encryption

我正在使用 AES 和内置的 RijndaelManaged 在我的 asp.net 网络表单中创建一些加密。我想知道我应该使用什么样的密钥系统。我希望 SSN 在数据库中加密，并且只能由 ssn 的所有者或授权管理员解密。

我想知道的是，如果在应用程序期间创建了加密密钥，那么一旦应用程序关闭，我就不能再使用它了吗？我必须将密钥存储在数据库中吗？这似乎破坏了加密的意义。有没有办法根据种子号每次都获得相同的密钥？可能不会，这似乎很容易破解。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:41:22.780

最后，Web 应用程序必须能够读取数据并将其呈现给授权用户。如果您希望多个用户访问数据，那么您需要某种方法来使用特定用户不唯一的方法来获取数据。这意味着必须信任该应用程序才能将其提供给合适的人。

这意味着您可能应该只使用数据库级加密来加密数据库中的值，假设您使用的是提供此功能的数据库。然后，您的应用程序可以根据您拥有的任何授权机制来确定是否向某人显示数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T17:44:04.873

好吧，使用加密，您总是会遇到这个问题 - 如何处理密钥？密钥存储和管理是它自己的领域。

一些供您评估的方法：

*   使用[DPAPI](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)进行加密。使用 DPAPI，Windows 在您的 ASP.NET 应用程序运行的用户凭据下处理密钥存储。
*   如果您使用一些秘密（密码）自己验证用户，则可以从密码和盐中派生密钥。如果用户更改密码，请记住重新加密数据！盐可以与用户信息一起以明文形式存储。您可以执行以下操作从密码中派生加密密钥：

    ```
     public static KeyIV GetKeyBytesFromPassword(string password, byte[] salt) {
        using (var aes = new AesCryptoServiceProvider()) {
            using (var deriveBytes = new Rfc2898DeriveBytes(password, salt)) {
                var res = new KeyIV {
                    Key = deriveBytes.GetBytes(aes.KeySize / 8),
                    IV = deriveBytes.GetBytes(aes.BlockSize / 8)
                };

                return res;
            }
        }
    } 
    ```

*   如果您确实需要一流的安全性，您可以使用硬件安全模块 (HSM)，它可以是独立的硬件（参见[Thales](http://www.thales-esecurity.com/Products/Hardware%20Security%20Modules.aspx)示例）或计算机板（参见 IBM 4764 PCI-X Cryptographic协处理器或类似的）。在这种情况下，您使用的是专门的防篡改硬件，它将为您处理密钥存储和管理。
*   一些数据库产品具有所谓的透明数据加密，它基本上会透明地为您加密整个数据库表。虽然它非常昂贵。Oracle 和 SQL Server 都有它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:44:41.740

这里讨论了很多：[在 SQL Server 2008 中加密 SSN 的最佳方法是什么？](https://stackoverflow.com/questions/2275244/what-is-the-best-way-to-encrypt-ssns-in-sql-server-2008).. 我使用 RinadaelManaged 加密了密码，并存储了密钥和 IV 以及加密密码以进行描述。每条记录的密钥和 IV 都不同。

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)

# django - Django 模型中的重复字段

> ID：11906485
> 
> 赞同：3
> 
> 时间：2012-08-10T17:27:29.010
> 
> 标签：django, model, field

我需要制作一个具有 15 个相似字段的模型（我们称它们`field_01`为 、`field_02`、`field_03`等）。我还需要这些字段易于使用（例如，能够执行类似的操作`obj.field_01`）。因为我想快速完成一些事情，所以我只是用愚蠢的方式创建了它们：

```
class M (models.Model):
    ....
    field_01 = models.NullBooleanField()
    field_02 = models.NullBooleanField()
    .... 
```

我在网上搜索了一个更好的方法来做到这一点。有人说 use **`setattr`**，但据我阅读和尝试一些东西可以看出，这会将属性添加到类的实例，而不是类本身，这意味着当我尝试将模型表单附加到该模型时，它不会看到用 . 添加的字段`setattr`。然后我尝试重写该**`__new__`**函数，这将允许我在创建该类的实例之前向该类添加属性。但我无法弄清楚如何准确地做到这一点。

那么，有什么方法可以在不破坏 South 和模型形式且不复制粘贴的情况下生成这些字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:00:39.597

如果没有一个具体的例子来说明你在做什么，很难明确地说出来，但一般来说，如果你发现自己重复了一个领域，那么这是一对多或多对多关系的明确标志，而不是：

**一对多**

```
class Field(models.Model):
    m = models.ForeignKey(M, related_name='fields')
    field = models.NullBooleanField() 
```

**多对多**

```
class Field(models.Model):
    field = models.NullBooleanField()

class M(models.Model):
    fields = models.ManyToManyField(Field) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:25:36.803

Django 模型有一种`add_to_class`方法，您可以按照您想要的方式（ab）使用猴子修补模型。

```
for i in range(1, 10):
    M.add_to_class('field_%s' % s, NullBooleanField()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:17:32.760

听起来您正在寻找一个 EAV 风格的数据库。你应该尝试一个库而不是自己滚动。为此，Django EAV 看起来非常棒。[https://github.com/mvpdev/django-eav](https://github.com/mvpdev/django-eav)

要阅读有关完成此检查的一堆库的优缺点的更多信息：[https ://stackoverflow.com/a/7934577/884453](https://stackoverflow.com/a/7934577/884453)

# c - 包含双字段的结构的大小

> ID：11906486
> 
> 赞同：4
> 
> 时间：2012-08-10T17:27:33.840
> 
> 标签：c, struct, sizeof

首先，我了解结构中的字节填充。但是我仍然有一个小测试在结构中包含一个双字段，我不知道如何解释：

```
typedef struct {
    char a;
    double b;
}data;

typedef struct{
    char a;
    int b;
}single;

int main(){
    printf("%d\n",sizeof(double));
    printf("%d\n",sizeof(single));
    printf("%d\n",sizeof(data));
} 
```

通过这个测试，答案是：`8` `8`和`16`。

为什么这个结果让我思考？

通过第二次测试，我们可以看到我机器上的字大小是 4 个字节。

通过第一次测试，我们可以看到 double 的大小是 8 个字节。

因此，在 struct 处`data`：结果应该是 12 个字节：char 为 4 个字节，double 为 8 个字节。

但是，我不知道为什么结果是 16 个字节。（对我来说很奇怪）

请帮我解释一下，谢谢:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T17:31:35.077

它有 16 个字节，因此如果您有一个`data`s 数组，则这些`double`值都可以在 8 字节边界上对齐。在内存中正确对齐数据可以对性能产生很大影响。未对齐的数据可能操作起来更慢，获取和存储也更慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T18:01:25.183

通常用于在结构中布置数据的过程基本上是这样的：

*   设置偏移量 = 0。
*   对于结构中的每个成员： 令 A 为其对齐要求（例如，1、2、4 或 8 个字节，可能更多）。将使其成为 A 的倍数所需的字节数添加到`Offset += -Offset & A-1`Offset这个成员的。将成员的大小添加到 Offset。
*   处理完所有成员后：设A为任何成员的最大对齐要求。将需要的字节数添加到偏移量，使其成为 A 的倍数。偏移量的最终值是结构的大小。

正如 Earnest Friedman-Hill 所说，最后一步将填充添加到结构的末尾，以便在它们的数组中，每个结构都以所需的对齐方式开始。

因此，对于诸如 的结构`struct { char c; double d; int32_t i; }`，在典型实现中，您有：

*   将偏移设置为 0。
*   char 需要对齐 1，因此 Offset 已经是 1 的倍数（0•1 为 0）。将 c 放在此偏移量 0 处。将 c 的大小 1 加到 Offset 中，使其为 1。
*   double 需要对齐 8，因此将 7 添加到 Offset，使其成为 8。将 d 放在此偏移处，8。将 d 的大小，8，添加到 Offset，使其成为 16。
*   int 需要对齐 4，因此 Offset 已经是 4 的倍数（4•4 是 16）。将 i 放在这个偏移量 16 处。将 i 的大小 4 添加到 Offset 中，使其变为 20。
*   最后，所需的最大对齐为 8，因此将 Offset 加 4，使其为 24。此结构的大小为 24 字节。

请注意，以上内容与机器的任何字长无关。它只使用每个成员的对齐要求。每种类型的对齐要求可以不同，并且可以与类型的大小不同，上述方法仍然有效。

（如果对齐要求不是 2 的幂，则算法会中断。这可以通过使最后一步将偏移量增加到所有对齐的最小公倍数的倍数来解决。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T17:32:14.447

你有什么奇怪的（或者我错过了什么）？

逻辑是一样的（填充是根据（我的意思是-int，double，char等）中的“最大”**原始**字段）`struct`

如`single`，你有

```
1 (sizeof(char)) + 3 (padding) + 4 (sizeof(int)) 
```

相同`data`：

```
1 (sizeof(char)) + 
7 (padding, it's sizeof(double) - sizeof(char)) + 
8 (sizeof(double)) 
```

这是16。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T17:32:02.373

编译器可能会将所有结构大小对齐为 8 的倍数

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T17:32:47.613

对齐取决于编译器，除非您使用编译器特定指令明确指定它。

变量不一定是字对齐的。有时它们是双字对齐以提高效率。在浮点的特定情况下，它们可以对齐到更高的值，以便 SSE 可以工作。

# mysql - 如何从序列化数据n mysql中搜索值？

> ID：11906488
> 
> 赞同：0
> 
> 时间：2012-08-10T17:27:39.633
> 
> 标签：mysql, sql

我想在此表中搜索以序列化形式存储的数据。

表结构

![在此处输入图像描述](../Images/54fdfdc5e09b652ac16979c86ba3f4e8.png)

为了

meta_key - mgm_member_options

元值 -

a:31:{s:2:"id";s:1:"1";s:13:"custom_fields";a:6:{s:10:"first_name";s:5:"Admin"; s:9:"姓氏";s:5:"Basil";s:7:"地址";s:0:"";s:4:"城市";s:0:"";s:5: "状态";s:0:"";s:3:"zip";s:0:"";}s:22:"other_membership_types";a:0:{}s:12:"payment_info";a :0:{}s:6:"优惠券";a:0:{}s:7:"升级";a:0:{}s:6:"扩展";a:0:{}s:4 :"code";s:10:"mgm_member";s:4:"name";s:10:"会员库";s:11:"描述";s:10:"会员库";s:7 :"setting";a:0:{}s:6:"saving";s:1:"1";s:8:"trial_on";s:1:"0";s:10:"trial_cost" ;s:1:"0";s:14:"trial_duration";s:1:"0";s:19:"trial_duration_type";s:1:"d";s:16:"trial_num_cycles";s:1:"0";s:8:"duration";s:1:"0" ;s:13:"duration_type";s:1:"m";s:6:"amount";s:1:"0";s:8:"currency";s:3:"USD";s :9:"加入日期";s:0:"";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0:"";s:15:"membership_type ";s:5:"客人";s:6:"状态";s:8:"非活动";s:​​12:"payment_type";s:0:"";s:13:"自动回复";s :0:"";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:" m9ROVxRwfxWwJzti";}s:1:"d";s:16:"trial_num_cycles";s:1:"0";s:8:"duration";s:1:"0";s:13:"duration_type";s: 1：“m”；s：6：“金额”；s：1：“0”；s：8：“货币”；s：3：“USD”；s：9：“join_date”；s：0： "";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0:"";s:15:"membership_type";s:5:"guest";s :6:"状态";s:8:"不活动";s:​​12:"payment_type";s:0:"";s:13:"自动回复";s:0:"";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}s:1:"d";s:16:"trial_num_cycles";s:1:"0";s:8:"duration";s:1:"0";s:13:"duration_type";s: 1：“m”；s：6：“金额”；s：1：“0”；s：8：“货币”；s：3：“USD”；s：9：“join_date”；s：0： "";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0:"";s:15:"membership_type";s:5:"guest";s :6:"状态";s:8:"不活动";s:​​12:"payment_type";s:0:"";s:13:"自动回复";s:0:"";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}持续时间";s:1:"0";s:13:"duration_type";s:1:"m";s:6:"数量";s:1:"0";s:8:"货币" ;s:3:"USD";s:9:"join_date";s:0:"";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0 :"";s:15:"membership_type";s:5:"guest";s:6:"status";s:8:"Inactive";s:12:"payment_type";s:0:"" ;s:13:"自动回复";s:0:"";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13 :"user_password";s:16:"m9ROVxRwfxWwJzti";}持续时间";s:1:"0";s:13:"duration_type";s:1:"m";s:6:"数量";s:1:"0";s:8:"货币" ;s:3:"USD";s:9:"join_date";s:0:"";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0 :"";s:15:"membership_type";s:5:"guest";s:6:"status";s:8:"Inactive";s:12:"payment_type";s:0:"" ;s:13:"自动回复";s:0:"";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13 :"user_password";s:16:"m9ROVxRwfxWwJzti";}join_date";s:0:"";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0:"";s:15:"membership_type";s: 5:"客人";s:6:"状态";s:8:"非活动";s:​​12:"payment_type";s:0:"";s:13:"自动回复";s:0:" ";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}join_date";s:0:"";s:13:"last_pay_date";s:0:"";s:11:"expire_date";s:0:"";s:15:"membership_type";s: 5:"客人";s:6:"状态";s:8:"非活动";s:​​12:"payment_type";s:0:"";s:13:"自动回复";s:0:" ";s:10:"已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}已订阅";s:0:"";s:9:"rss_token";s:32:"af8214c978dedcaa066bd8c223b7d22d";s:13:"user_password";s:16:"m9ROVxRwfxWwJzti";}

我想查找邮政编码。如何使用 sql 查询来做到这一点？

我正在使用的查询

> if(isset($_GET['as_zip']) && !empty($_GET['as_zip'])){ $as_zip = $_GET['as_zip'];
> array_push($meta_query_array, array('key' => 'mgm_member_options', 'value' => $as_zip, 'compare' => '=')); } // 准备参数 $args = array( 'role' => $role, 'number' => '10', 'orderby' => 'display_name', 'fields' => 'all_with_meta', 'meta_query' => $meta_query_array );

# android - 找不到 android 的密钥库文件所在的位置

> ID：11906489
> 
> 赞同：-1
> 
> 时间：2012-08-10T17:27:43.907
> 
> 标签：android, ant, cmd, keystore

有人可以帮我解决我在从命令行构建我的android项目时遇到的这个问题。

我想使用 ant 在签名模式下构建项目。为此我需要 key.store=path/to/my.keystore key.alias=mykeystore

有人可以告诉我在哪里可以找到这些“我的密钥库路径”和“我的密钥库”信息！！！这真的让我抓狂！！我因此而陷入困境。

因此，如果有人知道答案，请您分享... :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T17:36:49.240

请参阅[签署发布模式](http://developer.android.com/tools/publishing/app-signing.html#releasemode)。

私钥及其信息由您创建，并非由 Google 提供。具体步骤在上面的链接中有详细说明。Google 工具仅负责调试密钥库。

# android - 移动 JPG 文件后如何更新 Android MediaStore

> ID：11906490
> 
> 赞同：4
> 
> 时间：2012-08-10T17:27:43.480
> 
> 标签：android, image, move, mediastore

我的应用程序将 .jpg 文件移动到其他文件夹并在图库中查看我有 sendBroadcast ACTION_MEDIA_MOUNTED

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + 
            Environment.getExternalStorageDirectory() ))); 
```

但这需要很多时间..我明白（也许）我必须直接在 mediaStore 中使用 cursor/contentResolver 手动更新才能更快地获得这个。谁可以帮我这个事？谢谢..我的代码实际上是：

```
 Uri uri = (Uri) list.get(cont); 
 Cursor cursor = managedQuery(uri, proj, null, null, null);
 int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
 cursor.moveToFirst();
 String app = cursor.getString(column_index);
 File orig =  new File( app.toString());
 File dest = new File( destination_path +"/"+ orig.getName().toString());
 orig.renameTo(dest); 
```

有了这个，我将一个文件从一个路径移动到另一个。

在此之后，要在图库中获取图像，我必须发送广播 ACTION_MEDIA_MOUNTED

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-08T09:18:55.917

我只需要做同样的事情，使用以下更新`MediaStore`：

```
ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, newPath);
boolean successMediaStore = context.getContentResolver().update(
    MediaStore.<TYPE>.Media.EXTERNAL_CONTENT_URI, values,
    MediaStore.MediaColumns.DATA + "='" + oldPath + "'", null) == 1; 
```

替换`<TYPE>`为正确的媒体存储... ( `Images`, `Video`, `Audio`...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:34:11.620

使用 MediaScannerConnection 更新操作系统：

```
MediaScannerConnection.scanFile(this,
          new String[] { file.toString() }, null,
          new MediaScannerConnection.OnScanCompletedListener() {
      public void onScanCompleted(String path, Uri uri) {
          // code to execute when scanning is complete
      }
 }); 
```

# javascript - javascript 在 IE 中不起作用

> ID：11906498
> 
> 赞同：-1
> 
> 时间：2012-08-10T17:28:08.193
> 
> 标签：javascript, jquery, internet-explorer

我在 IE 中调试此页面时遇到问题：

```
jQuery(document).ready(function() {
jQuery('#mycarousel').jcarousel({
    vertical: false,
    scroll: 1,
});
}); 
```

它在 chrome 和 firefox 中运行良好。IE 100% 坏了。有任何想法吗？（我使用的是 IE9）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:30:30.580

似乎有一个额外的昏迷在 IE 中表现不佳：

```
jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        vertical: false,
        scroll: 1,
    });
}); 
```

在 和`scroll: 1,`。

# java - 从php获取的json数据并将它们存储在java中的数组中

> ID：11906499
> 
> 赞同：0
> 
> 时间：2012-08-10T17:28:10.597
> 
> 标签：java, php, arrays, json

我的 JSON 数组是这样的：

```
{"Name_1":1,"Name_2":0,"Name_3":0} 
```

我在java中获取值并将它们存储在单独的数组中的代码如下：

```
int[] operations= new int[3];
             String result = "";
             InputStream is = null;
             StringBuilder sb=null;
                try{
                    HttpClient httpclient = new DefaultHttpClient();

                    HttpPost httppost = new HttpPost("http://testteamgr.netau.net/parsing/test.php");
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();
            }catch(Exception e){
                    Log.e("log_tag", "Error in http connection "+e.toString());
            }
            //convert response to string
            try{
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                    }
                    is.close();

                    result=sb.toString();
            }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
            }
            try{

                JSONObject json_data = new JSONObject(result);
                System.out.println("Length of json is"+jArray.length());
                for(int i=0;i<jArray.length();i++){

                       if (i==0) operations[0]=json_data.getInt("Name_1");
                       else if (i==1) operations[1]=json_data.getInt("Name_2");
                       else if (i==2) operations[2]=json_data.getInt("Name_3"); } 
```

我收到了这些错误：

> java.lang.string 类型的值 br 无法转换为 jsonobject

如果我打印出结果，我看不到 JSONobject，而是看到 html 代码。

所以我想要的是将这 3 个值放入一个单独的数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:20:54.947

你有一个对象，而不是一个数组。要处理结果，您可以使用以下代码：

```
 String json = "{\"Name_1\":1,\"Name_2\":0,\"Name_3\":0}";
    JSONObject object = new JSONObject(json);
    String[] propertyNames = JSONObject.getNames(object);
    String[] values = new String[propertyNames.length];
    for (int i = 0; i < propertyNames.length; i++) {
        values[i] = String.valueOf(object.get(propertyNames[i]));
    } 
```

# javascript - 使用 Chrome 进行浏览器检测

> ID：11906502
> 
> 赞同：0
> 
> 时间：2012-08-10T17:28:18.387
> 
> 标签：javascript, google-chrome, browser-detection

我有这个代码：

```
<body onload="detect(navigator.appName)">
<h2 id=alert>This tutorial is for Google Chrome users,
why would you want to read it?</h2>
</body>
<script>
function detect(x){
    alert(x)
    if (x != "Chrome"){
        document.getElementById("alert").style.display = '';
    }
}
</script> 
```

**问题是，每当我使用Google Chrome**打开页面时，它都会返回“ *Netscape* ”。有解决方法吗？

[网页](http://dl.dropbox.com/u/38516275/MyWebPage/FPP/Chrome_and_flash.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:30:26.140

在 chrome 上，这`navigator.appName`将为您提供：

> 网景

如果你解析用户代理会容易得多

```
if ( ! /(Chrome)/i.test(navigator.userAgent)) {
    document.getElementById("alert").style.display = '';
} 
```

但我不得不说，如果你只向那些使用 Chrome 的人展示你的教程，你就错过了互联网的意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:30:27.193

试试 jQuery 的浏览器功能[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)。它经过测试并且是真实的。

# c# - 快速视频显示 WPF

> ID：11906503
> 
> 赞同：2
> 
> 时间：2012-08-10T17:28:32.483
> 
> 标签：c#, wpf, performance, video, frame-rate

我正在开发一个 WPF 应用程序，该应用程序需要以快速帧速率（我们希望 30 fps）显示多个视频流。视频流是 1920x1080 原始 (RGB24) 帧（它们存储在 System.Drawing.Bitmap 中）。有没有人对如何实现这一目标有任何想法？

更多细节：

*   我们之前的尝试使用了标准的 WPF Image 控件，为每一帧更改了它的源。这对于单个流效果很好，但现在我们必须渲染多个流，它的速度变慢了。
*   我们还尝试使用 Direct2D 来处理绘图，使用 D3D9 共享表面作为 Image 控件的源。虽然这更快，但我们仍然无法从中获得稳定的 30fps（随着事情的备份，它会在 24-32 fps 之间跳跃）。
*   视频流进入后台线程，然后被编组（使用窗口的 Dispatcher）到适当的 UI 线程进行绘制。然后所有的绘图都在 UI 线程上完成。我们还尝试为每个窗口提供自己的线程。

如果有人想看，我可以提供我们尝试过的代码示例。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T22:21:43.630

任何寻找解决方案的人，我们使用 DirectX 11 编写了一个自定义 winforms 控件，并将高度优化的副本复制到图形内存中，然后将控件托管在一个`WinformsHost`.，我可以向任何有兴趣的人提供一些代码。

**优化复制到gpu内存**

```
 // Using native memcpy for the fastest possible copy
    [DllImport("msvcrt.dll", EntryPoint = "memcpy", CallingConvention = CallingConvention.Cdecl, SetLastError = false)]
    private static extern IntPtr memcpy(IntPtr dest, IntPtr src, UIntPtr count);

    /// <summary>
    /// Copies a bitmap to gpu memory
    /// </summary>
    /// <param name="frame">The image to copy to the gpu</param>
    /// <returns>A texture in gpu memory for the bitmap</returns>
    public Texture2D CopyFrameToGpuMemory(Bitmap frame)
    {
        SampleDescription sampleDesc = new SampleDescription();
        sampleDesc.Count = 1;
        sampleDesc.Quality = 0;

        Texture2DDescription texDesc = new Texture2DDescription()
        {
            ArraySize = 1,
            MipLevels = 1,
            SampleDescription = sampleDesc,
            Format = Format.B8G8R8A8_UNorm,
            CpuAccessFlags = CpuAccessFlags.Write,
            BindFlags = BindFlags.ShaderResource,
            Usage = ResourceUsage.Dynamic,
            Height = frame.Height,
            Width = frame.Width
        };

        Texture2D tex = new Texture2D(Device, texDesc);

        Surface surface = tex.AsSurface();
        DataRectangle mappedRect = surface.Map(SlimDX.DXGI.MapFlags.Write | SlimDX.DXGI.MapFlags.Discard);

        BitmapData pixelData = frame.LockBits(new Rectangle(0, 0, frame.Width, frame.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppRgb);

        unsafe //!!!
        {
            byte* pixelDataStart = (byte*)pixelData.Scan0.ToPointer();
            byte* mappedRectDataStart = (byte*)mappedRect.Data.DataPointer.ToPointer();

            for (int y = 0; y < texDesc.Height; y++)
            {
                byte* lineLocationDest = mappedRectDataStart + (y * mappedRect.Pitch);
                byte* lineLocationSrc = pixelDataStart + (y * pixelData.Stride);

                // Copy line by line for best performance
                memcpy((IntPtr)lineLocationDest, (IntPtr)lineLocationSrc, (UIntPtr)(texDesc.Width * 4));
            }
        } //!!!

        frame.UnlockBits(pixelData);

        mappedRect.Data.Dispose();

        surface.Unmap();
        surface.Dispose();

        return tex;
    } 
```

# python - 在 tkinter 应用程序中节省空间

> ID：11906505
> 
> 赞同：0
> 
> 时间：2012-08-10T17:28:41.147
> 
> 标签：python, tkinter, py2app

我正在为 MacOSX *（在这种情况下为 10.6，尽管我认为这并不重要）*制作一些 Python 应用程序，使用**Tkinter**对接口进行编码，并**使用 py2app**来创建包。

你们很多人都知道，这些独立的应用程序往往相当大，大约 70-80 MB，主要是因为我使用的是**numpy**。正如预期的那样，其中 23 MB 来自 numpy *（必须保持未压缩才能运行）*，但我发现 30 MB 来自 Contents/Frameworks/Tcl.framework 的**Tcl**框架，5 MB 来自**Tk**框架。为了它，我尝试压缩这两个文件夹，分别将它们降低到 9 MB 和 1 MB。现在该应用程序几乎是其原始大小的一半，据我所知，一切运行良好。

我的问题是 Tkinter/应用程序专家：这很糟糕吗？有什么理由我不应该压缩这些框架吗？这会以任何方式影响分布吗？如果没有，为什么**py2app**不本地执行此操作？

### 编辑：

我实际上尝试从我的应用程序包中删除 Tcl 和 Tk 框架，但一切仍然正常。如果它们不与 tkinter 一起使用，为什么会出现在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:35:02.823

它可能会继续工作，因为它使用您的框架来加载 Tkinter 而不是捆绑的框架。如果您将它移到没有 Tkinter 的另一台计算机上，它可能无法启动或立即崩溃。

# sql - SQL Server 2008 - 如果不存在则插入其他更新

> ID：11906506
> 
> 赞同：76
> 
> 时间：2012-08-10T17:29:03.807
> 
> 标签：sql, sql-server-2008

我很抱歉，但这是一个由两部分组成的问题。

我对 SQL 非常陌生，正在尝试为我工作的小型办公室开发一个时钟应用程序。我现在正在使用 SQL 后端，并且有一个关于复合语句的问题。

我陷入困境的地方是，如果用户尝试打卡休息但从未在轮班开始时打卡，SQL 需要创建一个新行而不是更新现有行。

这是我尝试过的：

```
 IF NOT EXISTS(SELECT * FROM Clock WHERE clockDate = '08/10/2012') AND userName = 'test')
    BEGIN
        INSERT INTO Clock(clockDate, userName, breakOut)
        VALUES({ fn NOW() }, 'test', { fn NOW() })
    END
    ELSE
    BEGIN
        UPDATE Clock
        SET breakOut = { fn NOW() }
        WHERE (clockDate = '08/10/2012') AND (userName = 'test')
    END 
```

我正在使用 Visual Studio 2010 连接到本地计算机上的 SQL Server Express 2008 来执行此操作。我收到一条错误消息，提示“不支持复合语句 SQL 构造或语句”。但是，紧随其后的是 1 行受到影响的消息，当我查看我的时钟表时，它看起来就像我期望的那样。完成这个的最好方法是什么？

这个问题的第二部分是在我的 WHERE 语句中。是否有一个函数可以在 clockDate 列中获取今天的日期，而不必填充今天的日期？只是想提前考虑构建前端应用程序。

```
 IF NOT EXISTS(SELECT * FROM Clock WHERE clockDate = { fn CURRENT_DATE() }) AND userName = 'test') 
```

同样，这给了我想要的结果，但直到收到错误“'CURRENT_DATE'附近的 WHERE 子句出错。无法解析查询文本。”

我希望我已经正确解释了这一点，并感谢您的帮助！

编辑：

@RThomas @w00te

好的，所以将clockDate 作为日期字段并将breakOut 作为时间（0）字段，这应该有效吗？因为我仍然收到“不支持复合语句 SQL 构造或语句”。语法错误，即使它似乎正在工作。

```
 IF NOT EXISTS (SELECT * FROM Clock WHERE (clockDate = GETDATE()) AND (userName = 'test'))
    BEGIN
        INSERT INTO Clock(clockDate, userName, breakOut)
        Values(GETDATE(), 'test', GETDATE())
    END
    ELSE
    BEGIN
        UPDATE Clock
        SET breakOut = GETDATE()
        WHERE (clockDate = GETDATE()) AND (userName = 'test')
    END 
```

我的表格结果是：

```
clockDate  userName  clockIn  breakOut  breakIn  clockOut

08/10/2012  test      NULL    11:24:38   NULL     NULL 
```

这是我想要的结果，但这个错误让我感到困惑。这是 Visual Studio 错误还是 SQL 错误？我会阅读合并声明，谢谢你们的链接。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-10T17:36:28.663

乍一看，您最初的尝试似乎非常接近。我假设 clockDate 是一个 DateTime 字段，所以试试这个：

```
IF (NOT EXISTS(SELECT * FROM Clock WHERE cast(clockDate as date) = '08/10/2012') 
    AND userName = 'test') 
BEGIN 
    INSERT INTO Clock(clockDate, userName, breakOut) 
    VALUES(GetDate(), 'test', GetDate()) 
END 
ELSE 
BEGIN 
    UPDATE Clock 
    SET breakOut = GetDate()
    WHERE Cast(clockDate AS Date) = '08/10/2012' AND userName = 'test'
END 
```

请注意，getdate 为您提供当前日期。如果您尝试与日期（没有时间）进行比较，则需要强制转换，否则时间元素将导致比较失败。

* * *

如果clockDate 不是日期时间字段（只是日期），那么 SQL 引擎会为您完成 - 无需强制执行 set/insert 语句。

```
IF (NOT EXISTS(SELECT * FROM Clock WHERE clockDate = '08/10/2012') 
    AND userName = 'test') 
BEGIN 
    INSERT INTO Clock(clockDate, userName, breakOut) 
    VALUES(GetDate(), 'test', GetDate()) 
END 
ELSE 
BEGIN 
    UPDATE Clock 
    SET breakOut = GetDate()
    WHERE clockDate = '08/10/2012' AND userName = 'test'
END 
```

正如其他人所指出的，合并语句是处理相同逻辑的另一种方法。但是，在某些情况下，尤其是对于大型数据集，merge 语句可能会非常缓慢，从而导致大量 tran log 活动。因此，如上所示知道如何将其逻辑化仍然是一种有效的技术。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-28T10:39:31.943

> *正如其他人建议您应该查看 MERGE 语句，但没有人提供使用它的解决方案，我正在使用这个特定的 TSQL 构造添加我自己的答案。我打赌你会喜欢的。*

### 重要的提示

`if`您的代码部分在您的语句中有错字`not exists(select...)`。内部`select`语句只有一个条件，而 UserName 条件由于无效的大括号完成`where`而被排除在外。`not exists`在任何情况下，你都会有太多的右括号。

我假设这是基于您稍后在代码中的语句中使用两个`where`条件的事实。`update`

让我们继续我的回答...

## SQL Server 2008+ 支持 MERGE 语句

[MERGE 语句](http://technet.microsoft.com/en-us/library/bb510625.aspx)是一个漂亮的 TSQL gem，非常适合*“插入或更新”*情况。在您的情况下，它看起来类似于以下代码。考虑到我正在声明可能是存储过程参数的变量（我怀疑）。

```
declare @clockDate date = '08/10/2012';
declare @userName = 'test';

merge Clock as target
using (select @clockDate, @userName) as source (ClockDate, UserName)
on (target.ClockDate = source.ClockDate and target.UserName = source.UserName)
when matched then
    update
    set BreakOut = getdate()
when not matched then
    insert (ClockDate, UserName, BreakOut)
    values (getdate(), source.UserName, getdate()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-10T17:31:43.167

```
IF NOT EXISTS(SELECT * FROM Clock
WHERE clockDate = '08/10/2012') AND userName = 'test') 
```

有一个额外的括号。我认为如果你删除它很好：

```
IF NOT EXISTS(SELECT * FROM Clock WHERE
clockDate = '08/10/2012' AND userName = 'test') 
```

此外， GETDATE() 会将当前日期放在列中，但如果您不想要时间，您将不得不玩一点。我认为 CONVERT(varchar(8), GETDATE(), 112) 只会给你日期（而不是时间）部分。

```
IF NOT EXISTS(SELECT * FROM Clock WHERE
clockDate = CONVERT(varchar(8), GETDATE(), 112)
AND userName = 'test') 
```

可能应该这样做。

PS：使用[合并](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF4QFjAA&url=http://www.bidn.com/blogs/bretupdegraff/bidn-blog/239/using-the-new-tsql-merge-statement-with-sql-server-2008&ei=g0YlUIctgsjrAcLZgYAP&usg=AFQjCNGYNGMEgAsIKfVS924nVYhqw38ySw&sig2=xkgEdg-HKsG0tXvFSQCN5A)语句:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T17:35:54.943

您需要将其替换为`WHERE clockDate = { fn CURRENT_DATE() } AND userName = 'test'`. 请 `")"`从`{ fn CURRENT_DATE() })`

# objective-c - 通过异步回调触发

> ID：11906508
> 
> 赞同：0
> 
> 时间：2012-08-10T17:29:20.877
> 
> 标签：objective-c, ios, multithreading, asynchronous

如果应用程序异步执行代码块并在回调中通知完成状态，这些是否都在主线程（回调）上执行？

在此回调中处理 Core Graphics 绘图和文件操作的正确方法是什么？

我目前在回调中运行这些指令，但想触发一个线程来处理这些指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:43:55.687

如果你正在做任何 UI 绘图，那必须在主线程上。如果您现在让这些异步块在工作（表面上在并发调度队列中），为什么不在那里完成所有工作，当您有一个完成的产品要展示时，才在主块上返回消息。如果你的回调调用你类中的其他方法，处理并发最安全的方法是定义辅助对象——接受一些输入并产生输出的小对象。

创建助手，附加它需要的任何数据，在队列中的一个块中启动它，当它完成后，它在提取成品的主线程上返回消息，渲染它，然后删除助手对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:45:05.170

我在 Core Graphics 方面没有太多经验，但我在积木方面做了很多工作。

在我看来，如果您的应用程序异步执行代码块（在新线程上），那么在主线程上进行回调或通知是一个好习惯。

# jquery - 将 colorbox 与 hoverIntent 结合

> ID：11906512
> 
> 赞同：0
> 
> 时间：2012-08-10T17:29:37.467
> 
> 标签：jquery, colorbox, hoverintent

我的客户希望弹出窗口出现在悬停时，但不是立即出现。HoverIntent 似乎很理想，但我不知道如何将它与我的弹出功能 colorbox 一起使用。

到目前为止，这是我的 jQuery 代码：

```
$(document).ready(function(){   
$(".popup").colorbox({
    inline:true,
    scrolling:false
});
}); 
```

我如何带上 hoverintent - 它的语法如下： `$("#demo2 li").hoverIntent( makeTall, makeShort )`

谢谢 - 乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:07:12.293

**示例 1：**

要使用 hoverIntent 打开颜色框，请使用“open”属性并在 hoverIntent 的打开回调（“makeTall”函数）中定义颜色框对象。只要颜色框打开（并强制鼠标移出），out 回调就会触发，因此您可能不需要 hoverIntent 的 out 回调（“makeShort”函数）。即使这样 hoverIntent 需要一个函数作为第二个参数，所以只需发送一个空函数。

```
$(function() {

    $(".popup").hoverIntent(function() {
        $(this).colorbox({
            inline: true,
            scrolling:false,
            open:true
        })
    }, function(){});

}); 
```

[请参阅此处](http://jsfiddle.net/DonamiteIsTNT/gcW6m/5/embedded/result/)的完整示例。

**示例 2 - 分离声明：**

或者，如果您希望将所有颜色框声明保留在其他地方，则可以将声明与 hoverIntent() 分开，如下所示：

```
$(function() {
    //colorbox definitions
    $(".popup").colorbox({
        inline: true,
        scrolling:false
    });

    //gallery code
    $(".popup").hoverIntent(function() {
        $(this).colorbox({ open:true })
    }, function(){});
}); 
```

**示例 3** - 更改“结束”延迟：

默认情况下，hoverIntent 使用 100ms 的延迟来运行“over”回调。发送一个键值对象而不是 2 个函数，以便使用不同的延迟。

```
$(function() {
    $(".popup").hoverIntent({
        over: function() {
            $(this).colorbox({
                inline: true,
                scrolling:false,
                open:true
            })
        },
        out: function(){},
        //the interval option defines the over-callback delay
        interval: 1000
    });
}); 
```

仅供参考，正如您提到的，有一个`timeout`选项，但这将定义出回调延迟。然而，当与 colorbox 一起使用时，“out”回调的计时器将在 colorbox 打开后立即启动（由于弹出窗口强制鼠标移出）。如果您需要在打开颜色框窗口 3 秒后发生某些事情，那么请记住这一点，但在与完整窗口弹出窗口一起使用时则无用。

# android - 有没有安卓手机可以同时使用后置和前置摄像头？

> ID：11906522
> 
> 赞同：1
> 
> 时间：2012-08-10T17:29:59.663
> 
> 标签：android, camera

我正在android手机上做一个项目，我希望同时使用两个摄像头。根据[是否有任何 API 可以同时获取后置和前置摄像头视图？](https://stackoverflow.com/questions/8410876/is-there-any-api-to-fetch-both-rear-and-front-camera-view-at-the-same-time) ，或许可以实现。但是，当我在 HTC One S 上尝试时，它无法工作——第二个摄像头无法打开。那么有没有人曾经这样做过？如果有，请告诉我你在哪部手机上工作。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:42:32.450

虽然理论上可行，但实际上 Android 在固件级别不允许这样做。我不确定到底会发生什么，但我的猜测是，一台摄像机阻止了第二台摄像机的 API 的某些部分，从而同时阻止了两台摄像机的工作。

因此，对于任何设备来说，制造商都必须在操作系统级别对其进行更改，而我认为这从未做过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T14:54:28.953

目前有两款手机可以做到这一点：[三星 Galaxy S4](http://connect.dpreview.com/post/0586582857/samsung-galaxy-s4-camera-review?page=4)和[LG Optimus G Pro](http://androidcommunity.com/lg-demos-dual-recording-feature-on-the-optimus-g-pro-20130221)。两者都没有为第三方定义 API 以在他们的应用程序中使用此功能。

# objective-c - iOS：使用 UIWebView 弹出 UIViewController 时出现异常

> ID：11906525
> 
> 赞同：0
> 
> 时间：2012-08-10T17:30:15.540
> 
> 标签：objective-c, ios, exception, uiwebview, automatic-ref-counting

我有一个带有故事板的小型 iOS 应用程序。初始视图控制器是一个带有 RootViewController 的 UINavigationController，它有一个 UIButton。我有一个从按钮到另一个带有 UIWebView 的视图控制器的 segue。我使用自动断点测试抛出的异常，当我推送 WebViewController 时，等到加载 pdf 然后按下“返回”按钮以弹出视图控制器我得到一个没有任何控制台输出的异常。这个应用程序使用 ARC。我正在使用 Xcode 4.4.1，在 Xcode 4.5 中我没有遇到异常。

```
ViewController.m
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"pdf"]){
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://tonyromas.de/fileadmin/user_upload/Tonyromas_Drinks.pdf"]];
        [(WebViewController*)segue.destinationViewController setRequest:request];
    }
}
WebViewController.m
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.wView loadRequest:self.request];
    // Do any additional setup after loading the view.
}

libobjc.A.dylib`objc_exception_throw:
0xeb2caa:  pushl  %ebp
0xeb2cab:  movl   %esp, %ebp
0xeb2cad:  pushl  %ebx
0xeb2cae:  pushl  %edi
0xeb2caf:  pushl  %esi
0xeb2cb0:  subl   $2028, %esp
0xeb2cb6:  calll  0xeb2cbb                  ; objc_exception_throw + 17
0xeb2cbb:  popl   %edi
0xeb2cbc:  movl   $16, (%esp)
0xeb2cc3:  calll  0xec7830                  ; symbol stub for: __cxa_allocate_exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:47:14.610

这包括一个解决方法..但我相信他们的原始代码仍然是正确的（一目了然）。

[使用 UIWebView 显示 PDF 不工作](https://stackoverflow.com/questions/9606646/displaying-a-pdf-with-uiwebview-not-working)

# cocoa - Cocoa 或 Bash：测试文件是否为可执行二进制文件

> ID：11906541
> 
> 赞同：0
> 
> 时间：2012-08-10T17:31:15.907
> 
> 标签：cocoa, bash, testing, executable

在 Cocoa 中，我将如何测试文件是否是可执行二进制文件？不幸的是，[NSFileManager isExecutableFileAtPath:] 也将为脚本和目录返回 true，几乎所有设置了可执行位的文件都不是我想要的。

虽然直接使用 Cocoa 是我的首选方法，但我可以轻松地将其包装在 NSTask 中的 Bash 解决方案就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:50:58.177

我不知道 Cocoa，但这是一个 bash 解决方案：

```
find ../ -type f -perm +111 | \
  xargs -n 1 -I {} file "{}" | grep -v text | cut -d: -f1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:52:05.717

您可以在代码中轻松过滤掉目录，但是知道什么是二进制文件和什么不是二进制文件有点困难，因为实际上，唯一的方法是打开文件并读取它，这是您需要自己做的事情。

然而，主要问题是什么应该被视为二进制文件。

我见过开头有十几个文本行的可执行文件（因此，实际上它们是脚本），但其余的都是二进制文件。你会如何对它们进行分类？

如果您可以根据加载方式对它们进行分类，您可以尝试`file`尝试尽可能准确地告诉您文件是什么的命令。

# sql-server - 带有通配符的 LIKE 的 Cfqueryparam 比不使用 cfqueryparam 慢

> ID：11906542
> 
> 赞同：4
> 
> 时间：2012-08-10T17:31:20.240
> 
> 标签：sql-server, coldfusion, coldfusion-8

[编辑：根据 Leigh 的建议编辑

我一直对使用位置有疑问

```
 column like <cfqueryparam cfsqltype="cf_sql_varchar" value="abc%" /> 
```

比大约 30ms 慢。

```
column like 'abc%' 
```

在计划被缓存之前，两个查询大约同时运行约 60 毫秒。对于没有 cfqueryparam 的查询，后续命中会导致 1 毫秒，而使用 cfqueryparam 的查询会导致 30 毫秒。DSN 正在发送 unicode，列类型为 nvarchar。我没有注意到“=”的这种行为，只是 LIKE 运算符。此特定列未编入索引。

有谁知道为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:41:00.100

在使用非参数化参数进行查询时，我已经看到 sql server 的类似行为。据我所知查询

```
select x from y where x.a like 'dog' 
```

只要表`y`数据没有被修改，就永远不会改变计划、统计数据或输出。SQL Server 可以而且确实可以检测到这一点，并将计划/统计信息/输出与此查询相比存储更长的时间：

```
select x from y where x.a like @p1 
```

任何可能的参数值之间没有共同点。您实际上说，在计划被缓存后，您会看到性能差异，这是因为不仅计划被缓存。

我还看到了查询优化器从未对参数化查询使用有效索引的情况——对于非参数化查询，它使用它——并且必须使用索引查询提示。

# joomla - joomla 模块显示在每个页面中

> ID：11906543
> 
> 赞同：1
> 
> 时间：2012-08-10T17:31:28.893
> 
> 标签：joomla, module, publish, virtuemart

我是 Joomla 和 Virtuemart 的新手。我正在使用 Joomla 1.5 和 Virtuemart 1.1.9 并开发一个在线图书销售网站。对于我的网站，我创建了自己的模板。在我网站的首页上，我显示了一个“类别”模块，一切正常。

但我的问题是我想在我网站的每个页面上显示这个“类别”模块，但我不知道该怎么做。在后端，我尝试了以下步骤：

`Module Manger->Categories->Menu Assignment->Menu Items`，但在菜单项列表中，我看不到与我的模板相关的页面。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:51:36.700

您不需要查看与模板相关的页面列表，您需要做的就是选择模块`All`下的选项`Menu Assignment`。这将使模块显示在每个页面上。

# php - php选择和json编码问题

> ID：11906545
> 
> 赞同：4
> 
> 时间：2012-08-10T17:31:33.420
> 
> 标签：php, mysql

我正在建立一个网站来学习 PHP，并正在从 Jquery Ui 进行自动建议。

这是我的代码（我很久以前从 SO 上的一篇文章中获取了这段代码，而且我不是 100% 它的作用，所以如果有人能解释一下，这将是有帮助的！）这段代码来自Suggest.php，它我从我的 jquery 代码中调用（我认为它正在工作，所以我没有发布它，但如果你需要它可以！）

```
<?
include("config.php");

$queryString = strtolower($_GET["q"]);

$return = array();
$query = mysql_query("SELECT name FROM company WHERE name LIKE '$queryString%' UNION SELECT cat FROM cat WHERE cat LIKE '$queryString%' UNION SELECT subcat FROM subcat WHERE subcat LIKE '$queryString%' LIMIT 10");
while ($row = mysql_fetch_array($query)) {
     array_push($return,array('label'=>$row['name'],'value'=>$row['name']));
}
echo(json_encode($return));

?> 
```

现在这正在使自动建议工作，但只有相同的结果（例如，如果我输入“Johns”它会提出“Johns Hot Dogs”作为建议，但如果我输入“fjfjdjf669959”那么它会出现“约翰热狗”也是如此。

我正在做一个 Mysql Union，因为我试图用**company**表中的**name**行、 **cat表中的****cat**行和**subcat表中的****subcat**行填充我的 autosuggest 。

 ******为什么这不起作用？

感谢您的任何帮助！

我的 JQUERy 代码如下所示：

```
<script>
    $(function() {
        $( "#search" ).autocomplete({
            source: "suggest.php"
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T21:06:56.460

首先，您的 php 代码容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。此外，[不推荐使用 mysql_* 函数](http://www.php.net/manual/en/function.mysql-connect.php)。相反，使用[PDO](http://php.net/manual/en/book.pdo.php)。

您的代码失败，因为您正在读取错误的查询变量。`$_GET['q']`为空，因为[jQuery UI 自动完成插件](http://jqueryui.com/demos/autocomplete/)使用参数`term`进行搜索查询。使用空的`$queryString`，执行 SQL 查询

```
SELECT name FROM company WHERE name LIKE '%'   -- UNION ... 
```

这当然只是返回一切。你要：

```
<?php
include("config.php");
$db = new PDO('mysql:host=localhost;dbname=database', 'user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

if (!isset($_GET['term'])) {
    header('HTTP/1.0 400 Bad Request');
    echo 'Missing term parameter in request';
    exit();
}
$queryString = strtolower($_GET["term"]);
$query = $db->prepare("SELECT name FROM company WHERE name LIKE :qs" .
  " UNION SELECT cat AS name FROM cat WHERE cat LIKE :qs" .
  " UNION SELECT subcat AS name FROM subcat WHERE subcat LIKE :qs " .
  " LIMIT 10");
$query->execute(array(':qs' => $queryString . '%'));
$query->setFetchMode(PDO::FETCH_NAMED);
$result = array_map(function($row) {
    return array('label'=>$row['name'],'value'=>$row['name']);
}, $query->fetchAll());

header('Content-Type: application/json');
echo(json_encode($result)); 
```

[**这是一个实时的、可下载的（包括数据库）演示**](http://phihag.de/2012/so/so-autocomplete/)。******

# visual-studio-2010 - 视觉工作室 2010 智能感知，无需创建项目/解决方案

> ID：11906548
> 
> 赞同：3
> 
> 时间：2012-08-10T17:31:52.363
> 
> 标签：visual-studio-2010, intellisense

我想在不创建项目（项目太大）的情况下使用 Visual Studio intellisense。

我的追问：有可能吗？如果是这样，怎么做？

为了更好地理解我想要的，这里有一些额外的信息：

功能应该类似于 linux 中的 ctags。我没有太多使用 ctags，但是在某个时间点，当我在 vim 中编码时，我知道我必须运行 ctags 以在我正在工作的文件夹中生成函数头信息，然后，当我打开一个在包含 ctags 生成文件的文件夹中使用 vim 文件，自动完成工作。

为什么我需要这个：

我正在从事的项目非常大，并且没有为 Visual Studio 2010 提供 .sln 文件，但是，当我从项目文件夹中打开一个文件时，我希望能够以某种方式（如果可能的话）使用自动完成。如果我能够在不创建项目的情况下使用自动完成功能，我也愿意使用其他编辑器/IDE，但是我更喜欢使用 Visual Studio，因为调试是附加到进程功能的简单原因。

PS：使用的语言：C 和 C++

# php - 无法通过 HTML 表单上传 mdb 文件

> ID：11906553
> 
> 赞同：2
> 
> 时间：2012-08-10T17:32:14.860
> 
> 标签：php, file, ms-access, upload, forms

不知道为什么它不能完全适用于 mdb 文件，它甚至不返回任何数据。

我有以下 HTML 表单：

```
if(!isset($_GET['action'])) {
    ?>
    <form action="<?php echo $_SERVER['PHP_SELF']; ?>?page=mypage&action=upload" method="POST" enctype="multipart/form-data">
        <input name="MAX_FILE_SIZE" value="64000" type="hidden" />
        <label for="data-file">Please select file to upload:</label>
        <input id="data-file" type="file" size="20" name="data-file" />
        <input type="submit" value="Upload" name="submit" />
    </form>
    <?php
} else {
    switch($_GET['action']) {
        case 'upload':
            var_dump($_POST);
            var_dump($_FILES);
            break;
        default:
            break;
    }
} 
```

当我选择一个 mdb 文件并单击提交时，它会返回两个空数组：

```
'array(0) { } array(0) { }' 
```

但是，如果我选择其他文件，如 excel 文件或图像文件，我会得到：

```
array(1) { ["submit"]=> string(6) "Upload" }
array(1) { ["data-file"]=> array(5) { ["name"]=> string(18) "testing.png" ["type"]=> string(9) "image/png" ["tmp_name"]=> string(26) "C:\WINDOWS\Temp\php951.tmp" ["error"]=> int(0) ["size"]=> int(110533) } } 
```

有谁知道为什么会发生上述情况？

此外，我尝试删除我试图上传的 mdb 文件中的大部分数据，以将文件大小减小到小于 1MB 并再次上传，它工作正常。所以我在服务器上检查了我的 php.ini，但 upload_max_filesize 设置为 64M，而我的原始 mdb 文件大小为 14MB。

我不明白为什么它不上传也不返回任何数据，甚至没有错误。这令人沮丧。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:26:11.800

也许是`MAX_FILE_SIZE`。

> MAX_FILE_SIZE 隐藏字段（以字节为单位）必须在文件输入字段之前，其值是 PHP 接受的最大文件大小。

[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)

所以，`64000Byte / 1024 = 62,5 KB`

尝试删除该`MAX_FILE_SIZE`字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:02:07.453

这是服务器设置，

我不得不更改设置`php.ini`

确保

```
memory_limit >= post_max_size >= upload_max_filesize 
```

在你的`php.ini`

# vim - Vim 中没有功能的键和组合键

> ID：11906555
> 
> 赞同：1
> 
> 时间：2012-08-10T17:32:19.267
> 
> 标签：vim, keyboard-shortcuts

在 Vim 中，我（当然）使用键映射让我的生活更轻松，但是当我自己制作键映射时，我真的会在我可能重新映射它之前知道那个键（或组合键）是否有某种用途。

所以我的问题是：Vim 中的哪些键/组合键没有功能？有没有办法让 Vim 列出哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:33:46.207

一般可以`:help <key>`用来查看是否在正常模式下拍摄，`:help i_<key>`是否在插入模式下使用。此外，您可以使用`:map <key>`检查 vimrc 或插件是否映射了任何内容。这也适用于`imap`,`nmap`等。

例如：

```
:help j
:help i_CTRL-N
:imap <Tab> 
```

就列表而言，所有来自 AZ 的大写和小写字母都具有一定的含义。大多数`CTRL+<key>`键在所有模式下都有意义，但有些则没有。默认`<leader>`键是`\`，但很多人将其设置为`,`; 但是，`,`在正常模式下具有特殊含义（与 相反`;`）。我怀疑大多数人将自定义键映射到`<leader><key>`或`<F#>`. 通常，具有默认含义的键并不是您真正想要的，因此查找`:help`是一种很好的做法，因为它不仅可以增加您对 vim 的理解，还可以让您判断是否需要该功能。

# mysql - Mysql 在给定的日期时间范围内插入随机日期时间

> ID：11906572
> 
> 赞同：44
> 
> 时间：2012-08-10T17:33:36.333
> 
> 标签：mysql, sql

使用 SQL ，我可以在给出范围的列中插入随机日期时间值吗？

例如，给定一个`2010-04-30 14:53:27`范围`2012-04-30 14:53:27`

我对范围部分感到困惑。因为我会这样做

```
INSERT INTO `sometable` VALUES (RND (DATETIME())) 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-10T17:44:27.343

这是一个应该有帮助的例子：

```
INSERT INTO `sometable` VALUES(
    FROM_UNIXTIME(
        UNIX_TIMESTAMP('2010-04-30 14:53:27') + FLOOR(0 + (RAND() * 63072000))
    )
) 
```

它使用日期`2010-04-30 14:53:27`作为基准，将其转换为 Unix 时间戳，并将从 0 到 +2 年的随机秒数添加到基准日期并将其转换回 DATETIME。

它应该非常接近，但在更长的时间段内闰年和其他调整将把它扔掉。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-10T17:56:46.700

这应该很好地工作：

```
SET @MIN = '2010-04-30 14:53:27';
SET @MAX = '2012-04-30 14:53:27';
SELECT TIMESTAMPADD(SECOND, FLOOR(RAND() * TIMESTAMPDIFF(SECOND, @MIN, @MAX)), @MIN); 
```

`TIMESTAMPDIFF`用于确定日期范围内的秒数。将此乘以 0-1 之间的随机数会得到一个介于 0 和范围内秒数之间的随机数。将此随机秒数添加到范围的下限会导致数据范围范围之间的随机日期。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-09T14:14:38.483

**即使闰年也能**完美运行：

```
select from_unixtime(
    unix_timestamp('2000-1-1') + floor(
        rand() * (
            unix_timestamp('2010-12-31') - unix_timestamp('2000-1-1') + 1
        )
    )
) 
```

这个想法很简单：只需在两个时间戳之间取一个随机时间戳，然后将其转换为[`datetime`](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)using [`from_unixtime`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)。这样，您可以确保每个选项具有相等的概率。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-20T13:36:47.683

最简单的出路：

```
INSERT INTO `sometable` VALUES (SELECT timestamp('2010-04-30 14:53:27') - INTERVAL FLOOR( RAND( ) * 366) DAY); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-01T17:25:38.863

你试一试 ：

```
SELECT TIMESTAMP('2012-04-30 14:53:27')-INTERVAL RAND()*365*2 DAY INTO tbl_name; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-01T09:45:54.460

这对我有用，但我的问题有点不同。我必须将列中的某些值分配给随机日期时间。

```
 UPDATE Tablename
    SET columnName = addtime(concat_ws(' ','2018-07-25' + interval rand()*2 day 
    ,'00:00:00'),sec_to_time(floor(0 + (rand() * 86401))))
    WHERE columnName = condition; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-27T10:20:13.000

```
SET @MIN = '2019-06-29 00:53:27';
SET @MAX = '2019-06-29 13:53:27';

UPDATE tablename
SET columnname = TIMESTAMPADD(SECOND, FLOOR(RAND() * TIMESTAMPDIFF(SECOND, @MIN, @MAX)), @MIN)
WHERE `columnname` = condition 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-22T06:25:50.313

这是一个旧线程，但仍然......在我的情况下，我需要以如下格式生成随机日期：2017-01-01。如果有人需要，我使用了@drew010 解决方案并使用 DATE_FORMAT 格式化日期。

这是我的代码：

```
SELECT DATE_FORMAT(FROM_UNIXTIME(UNIX_TIMESTAMP('2015-01-01') + FLOOR(0 + (RAND() * 63072000))), '%Y-%m-%d'); 
```

# c++ - 是否可以通过最少的代码更改来修改函数调用？

> ID：11906573
> 
> 赞同：1
> 
> 时间：2012-08-10T17:33:37.253
> 
> 标签：c++

我想我想要做的是这样的事情（像马可一样表达）。

```
 #define x->send(str)  x->send(my(x, str)) 
```

内部函数“我的”

```
 char *my(X x, char *d)
    {
        strcat(d, x->name);  // assuming no memory problem
    } 
```

基本上，需要附加有关 x 的更多信息。当然，还有其他方法。但是我想保持对代码的最小更改，并且没有办法修改 X 类。谢谢！

下面列出的示例代码。

```
 #include <stdio.h>
    #include <string.h>

    #define x->send(y)    (x->send(my(x,y)))

    class H
    {
    public:

      char name[16];

      void send(char *str)
      {
        printf("%s", str);
      }

      H()
      {
        strcpy(name, "adam");
      }
    };

    char *my(H x, char *y)
    {
      strcat (y, "from ");
      return strcat(y, x->name);
    }

    int main()
    {
      H *h = new H;

      char str[32];
      strcpy(str, "hello ");

      h->send(str);

      return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:36:22.057

如果你不能修改 X，我认为下一个最好的选择是在你的源代码上做一个正则表达式替换来调用你的包装函数。即使可以定义这样的宏，也会导致无法维护的噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:46:49.760

使用包装类。

```
class DiagnosticH : public H {
public: void send(char *str) { H::send(my(this, str)); }
};
#define H DiagnosticH // optional 
```

# javascript - 如何使用“this”关键字调用

> ID：11906574
> 
> 赞同：0
> 
> 时间：2012-08-10T17:33:37.083
> 
> 标签：javascript, arrays, function, this

如何在 JavaScript 中编写一个接收数组和函数（convertFunc）的函数。该函数为数组的每个元素调用 convertFunc。该元素应通过*this*关键字访问。该函数应该返回一个由 convertFunc 调用的返回值组成的数组吗？例如

```
function(array, convertFunc() {  // array=[1,2,3]
    return this+10;
} 
```

应该返回 [11,12,13]

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:40:54.893

1.  创建函数，例如`function map(arr, convertFunc) {`
2.  遍历数组的所有元素`arr`。
3.  提示：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)
4.  返回一个包含函数调用的所有结果的数组。
5.  `}`

自己弄清楚确切的细节，祝你好运:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:42:21.117

`array.map(callback[, thisObject]);`可能适合你。

例子：

```
var nums = [1,2,3];

function FuncName(x)
{
    return x+10;
}

var result = nums.map(FuncName); //[11,12,13] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:42:41.910

如果您正在寻找扩展 Array 对象，请尝试此操作

```
Array.prototype.convertFunc = function() {

var arr = this, i; // As you want array is access using the this keyword.

for(i = 0; i<arr.length; i++)
{
    arr[i] = arr[i] + 10;
}

return arr;
}

var myArray = [1,2,3];

 // Call like this
 myArray.convertFunc(); 
```

在这里[摆弄 http://jsfiddle.net/PYxzj/](http://jsfiddle.net/PYxzj/)

**更新**

并回答你的问题试试这个

```
 // Pass your array and a function as parameter
function arrayModify(array, convertFunc)
{
  return array.convertFunc();
}

// This function iterates your array and adds 10 to each element.
var arrayAddFunction = function() {

   var arr = this, i;
   for(i = 0; i<arr.length; i++)
   {
      arr[i] = arr[i] + 10;
   }

return arr;
}

// Extending the array object
Array.prototype.convertFunc = arrayAddFunction;

var aa = [1,2,3];

// As you want send your array and a function as parameters to another function 
alert(arrayModify(aa,arrayAddFunction)); // -> [11, 12, 13] 
```

在这里[摆弄 http://jsfiddle.net/qzB4e/](http://jsfiddle.net/qzB4e/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T17:45:30.757

```
var myFunc = function(fn) {  // array=[1,2,3]
    return fn(this);
};

myFunc.call(arr,function convertFunc(){
    return this+10;
}); 
```

但是，要解决您的确切问题：

```
var arr = [1,2,3], addTen = function(){
    for (var l=this.length;l--;) this[l] += 10;
};

addTen.call(arr); 
```

# python - 如何在 Python shell 中导入 NumPy

> ID：11906575
> 
> 赞同：18
> 
> 时间：2012-08-10T17:33:37.427
> 
> 标签：python, numpy

我曾尝试在 Python 中导入 NumPy，但没有成功：

```
>>> import numpy as np
    x=np.array([[7,8,5],[3,5,7]],np.int32)

   Traceback (most recent call last):
   File "<pyshell#3>", line 1, in <module>
   import numpy as np
   File "C:\Python27\lib\numpy\__init__.py", line 127, in <module>
   raise ImportError(msg)
   ImportError: Error importing numpy: you should not try to import numpy from
   its source directory; please exit the numpy source tree, and relaunch
   your Python interpreter from there. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T17:36:11.090

该消息是不言自明的；调用 Python 时，工作目录不应是 NumPy 源目录；应该安装 NumPy，并且您的工作目录应该是它所在的目录以外的任何目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T21:55:50.553

在[Debian](http://en.wikipedia.org/wiki/Debian) /Ubuntu 上：

```
aptitude install python-numpy 
```

在 Windows 上，下载安装程序：

```
http://sourceforge.net/projects/numpy/files/NumPy/ 
```

在其他系统上，下载 tar.gz 并运行以下命令：

```
$ tar xfz numpy-n.m.tar.gz
$ cd numpy-n.m
$ python setup.py install 
```

# matlab - 如何在同一个图形上绘制三个图形？

> ID：11906580
> 
> 赞同：2
> 
> 时间：2012-08-10T17:33:51.000
> 
> 标签：matlab, plot

这就是我绘制两个图形的方式（感谢帮助我这样做的人）：

```
clear
logsFolder = 'C:\logs\';
stocks = {'log'};

for stock = stocks
    filename = [logsFolder stock{1} '.log'];
    fLog = fopen(filename);
    data = textscan(fLog, '%f:%f:%f:%f %f %f %f');
    fclose(fLog);

    % hh:min:sec:millisec
    secvec = [60*60 60 1 1e-3];
    x = [data{1:4}] * secvec';

    y = data{5};
    yPrice = data{6};

    xindays = x / (24*60*60);

    figure;
    [AX,H1,H2] = plotyy(xindays,y,xindays,yPrice);
    set(AX(1),'xtick',[]);

    lo1 = min(y);
    hi1 = max(y);
    lo2 = min(yPrice);
    hi2 = max(yPrice);

    if (hi2/lo2 > hi1/lo1)
      ylim(AX(1),[lo1 hi2/lo2 * lo1]);
      ylim(AX(2),[lo2 hi2]);
    else
      ylim(AX(1),[lo1 hi1]);
      ylim(AX(2),[lo2 hi1/lo1 * lo2]);
    end

    ticklabelformat(AX(2),'y','%g')
    ticklabelformat(AX(2),'x',{@tick2datestr,'x','HH:MM:SS'})
    title(stock);

    % iNeedToDrawThat = data{7}
end 
```

[此处](https://dl.dropbox.com/u/49126809/stackoverflow/log.log)提供输入文件示例如您所见，我的文件包含我还想显示的最后一列。范围应该是从 0（在图的底部）到最大值（在图的顶部）。所以我需要以某种方式绘制三个图形。可以省略第三个图的带有标签的轴，因为我已经有两个轴并且我没有地方添加第三个。但是，如果可能的话，可以“重叠”两个轴。

我不知道该怎么做，所以我正在寻求你的帮助。

我已经尝试过了，但它不起作用：

```
figure;
[AX,H1,H2] = plotyy(xindays,y,xindays,yPrice);

hold on;
volume = data{7};
plot(xindays, volume);
hold off; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:37:34.673

我已经在评论中提到了一个[类似的问题](https://stackoverflow.com/q/1719048/97160)，它应该会给你很多想法......

无论如何，我已经制定了一个解决方案来绘制多个 y 轴。现在代码有点复杂，但应该可以重构一个可重用的函数（比如[`addaxis`](http://www.mathworks.com/matlabcentral/fileexchange/9016-addaxis)文件交换上的函数）。

这个想法是首先在单独的轴上绘制每条曲线（全部叠加），并使它们透明（底部除外）。接下来，我们创建这组轴的副本并沿 x 方向移动它们。我们还使这些副本透明，但现在我们可以沿每个的 y 轴显示刻度线。最后，我们给它们正确的 z 顺序，并链接 x 和 y 限制，以便我们可以使用平移和缩放功能。

```
%# read and parse data from file
fid = fopen('log.log','rt');
C = textscan(fid, '%s %f %f %f', 'CollectOutput',true);
fclose(fid);
dt = datenum(C{1}, 'HH:MM:SS:FFF');
data = C{2};
NUM = size(data,2);

%# create a wider figure
hFig = figure('Position',get(0,'DefaultFigurePosition').*[1 1 1.7 1]);

%# some properties
clr = lines(NUM);
bgClr = get(0,'DefaultFigureColor');
pos = get(0,'DefaultAxesPosition');
pp = 0.1;   % shift in normalized units: pos(1)

%# create plot axes (make axis invisible)
hAx = zeros(NUM,1);
for i=1:NUM
    hAx(i) = axes('Parent',hFig, 'Color','none', ...
        'XColor',bgClr, 'YColor',bgClr, ...
        'Units','normalized', 'Position',pos+[(NUM-1)*pp 0 -(NUM-1)*pp 0]);
    line(dt, data(:,i), 'Color',clr(i,:), 'Parent',hAx(i))
end
axis(hAx, 'tight')  %# tight x/y limits

%# create shifted copies of axes to show y-ticks
hAxx = zeros(size(hAx));
for i=1:NUM
    hAxx(i) = copyobj(hAx(i), hFig);
    delete(get(hAxx(i),'Children'));    %# keep only axis
    set(hAxx(i), 'YColor',clr(i,:), ...
        'Units','normalized', 'Position',pos+[(NUM-i)*pp 0 -(NUM-i)*pp 0]);
    ylabel(hAxx(i), sprintf('Axis %d',i))
end
xlabel(hAxx(1), 'datetime')
title(hAxx(1), 'Log')
datetick(hAxx(1), 'x', 'HH:MM', 'keeplimits')

%# set 1st axis copy as current axis
set(hFig, 'CurrentAxes',hAxx(1))

%# adjust ticks of axes
set(hAx(1), 'Color','w')    %# give white bg to 1st axis
set(hAxx(1), 'XColor','k')  %# show xticks of 1st axis copy
set(hAxx(2:end), 'XTick',[], 'XTickLabel',[])
set(hAx, 'XTick',[], 'XTickLabel',[], 'YTick',[], 'YTickLabel',[])

%# fix z-order
for i=3:-1:1, uistack(hAxx(i),'top'), end
uistack(hAx(1), 'bottom')

%# link x/y limits so that panning/zooming works
lh = cell(NUM+1,1);
for i=1:NUM
    lh{i} = linkprop([hAxx(i);hAx(i)], 'YLim');
end
lh{end} = linkprop([hAxx;hAx], 'XLim'); 
```

[结果](https://i.stack.imgur.com/jVdr8.png)：_

![截屏](../Images/3264f8ae48a173e7ae13267d59781866.png)

平移/缩放有点有趣，您必须通过从侧面开始拖动（移动的彩色轴）来启动它们。这是因为第一个（对应于蓝线）是顶部的那个，因此会捕获所有鼠标点击。

注意：我看到您使用的是自定义函数[`ticklabelformat`](http://www.mathworks.com/matlabcentral/fileexchange/36254-ticklabelformat-set-a-dynamic-format-of-axes-tick-labels)，我没有结合上面的代码进行测试。我会把那部分留给你..

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:40:38.227

示例使用 hold on

```
figure;
plot(x1,y1);
hold on
plot(x2,y2);
plot(x3,y3);
hold off 
```

只在循环外做一次“图”和“坚持”。然后绘制你需要的所有图表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:09:23.127

```
figure;
[AX,H1,H2] = plotyy(xindays,y,xindays,yPrice);

hold on;
volume = data{7};
plot(xindays, volume);
hold off; 
```

如果你按照你建议的方式使用 hold on，即首先使用 plotyy() 那么轴不会调整，所以如果你的第 3 个系列超出了你的第一组轴的范围，那么它就不会出现。尝试翻转它们，看看是否会产生结果？

```
volume = data{7};
plot(xindays, volume);

hold on;

[AX,H1,H2] = plotyy(xindays,y,xindays,yPrice); 
```

这样轴应该调整

例如：

```
t = 1:10;
x = t*2;
y = t*-2;
z = x + 1000; 
```

现在比较

```
plot(t,z, 'r')
hold on
plotyy(t,x, t,y) 
```

到

```
plotyy(t,x, t,y)
hold on
plot(t,z, 'r') 
```

# javascript - 此 javascript 代码的后果

> ID：11906584
> 
> 赞同：1
> 
> 时间：2012-08-10T17:34:36.353
> 
> 标签：javascript

我正在阅读 John Resig 的《JavaScript Ninja 的秘密》一书，他在其中解释了如何通过使用以下代码扩展对象的原型来尝试预测该语言的未来功能：

```
if(!Array.prototype.forEach){
   Array.prototype.forEach = function(fn, callback){
      for(var i = 0; i < this.length; i++){
         fn.call(callback || null, this[i], i, this);
      }
   };
} 
```

现在，我了解到“回调 || null”语句会阻止将可能的未定义值传递给“调用”函数。我不明白将 null 作为“fn”参数的上下文传递的后果是什么。这不会使代码崩溃吗？

感谢您提供的任何解释和/或启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:39:12.443

这没有“真正的”问题，上下文“this”就等于null。如果您没有合适的上下文值，这是使用 .call() 或 .apply() 时的常用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:39:15.963

`Function.call`的第一个参数是运行函数的范围。如果该参数是 falsey（`null`是 falsey 的一种形式），那么它将在全局范围内运行该函数。在浏览器中，这意味着该函数将在`this`设置为的情况下运行`window`。

`callback || null`不需要，如果您作为范围传入，`undefined`它将使用`window`. 尽管可能存在一些晦涩难懂的浏览器或没有的情况，但这可以解释 Resig 这样做的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:39:07.787

不，它不会导致崩溃。根据[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

> […] 如果方法是非严格模式代码中的函数，`null`将`undefined`被替换为全局对象，原始值将被装箱。

（在网页的情况下，“全局对象”是`window`。）

# css - 使用变换组合 CSS 动画

> ID：11906586
> 
> 赞同：1
> 
> 时间：2012-08-10T17:34:41.673
> 
> 标签：css, css-transforms, css-animations

我想编写两个单独的 CSS 关键帧动画来使图像振动和旋转（请参阅[http://jsfiddle.net/3zAeZ/](http://jsfiddle.net/3zAeZ/)）。我相信我遇到的问题是：我在两个关键帧规则中都设置了变换属性，因此一个规则正在破坏另一个规则。

我知道这可以使用 top & left 而不是 translate，但是如果我进行转换（例如，如果我需要以不同方式定位图像），关键帧规则将来会更容易重用。

我难住了。我可以这样做吗？有没有更好的方法我应该这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:37:26.423

您可以使用多种转换，例如

```
transform: rotate(1337deg) scale(1.5) translate(6em, 300px); 
```

现在我意识到你也需要两个不同的动画持续时间。所以我能想到的最好的方法是使用两个元素[http://jsfiddle.net/3zAeZ/1/](http://jsfiddle.net/3zAeZ/1/)

# objective-c - 如何将具有浮点值的数组保存到 Mac 可读的文本文件中？

> ID：11906588
> 
> 赞同：1
> 
> 时间：2012-08-10T17:34:48.440
> 
> 标签：objective-c, arrays, cocoa, save

我想将存储在数组中的浮点值保存到文本文件中，并直接在 Mac 上读取该文件。这就是我创建数组的方式：

```
dataArray = [[NSMutableArray alloc] init];
NSNumber *numObj = [NSNumber numberWithFloat:3.14];
[dataArray insertObject:numObj atIndex:0];
NSNumber *numObj = [NSNumber numberWithFloat:2.3];
[dataArray insertObject:numObj atIndex:1];
... 
```

这就是我保存数组的方式：

```
NSData *savedData = [NSKeyedArchiver archivedDataWithRootObject:dataArray];
NSString *filePath = @"/Users/smith/Desktop/dataArray.txt";
[savedData writeToFile:filePath options:NSDataWritingAtomic error:nil]; 
```

当我打开文件时，内容只是乱码。相反，我想让它变成这样：

```
3.14
2.3
1.4
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:48:31.653

您编写的程序将对象表示保存为 NSNumbers 数组，而您想要/期望的结果是由换行符分隔的文本文件。

要将这些浮点值保存到该格式的文本文件中，您可以这样做：

```
...
NSMutableString * string = [NSMutableString new];
[string appendFormat:@"%f\n", 3.14];
[string appendFormat:@"%f\n", 2.3];

NSError * error = nil;
BOOL written = [string writeToURL:url atomically:YES encoding:someEncoding error:&error];
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:48:39.050

您可以使用`componentsJoinedByString:`先创建内存表示，然后将该表示写入文件，如下所示：

```
NSString *fileRep = [dataArray componentsJoinedByString:@"\n"];
NSString *filePath = @"/Users/smith/Desktop/dataArray.txt";
[fileRep writeToFile:filePath options:NSDataWritingAtomic error:nil]; 
```

这假设项目的数量相对较少，因为字符串表示完全是在内存中创建的。

但是，回读不如写出好：您首先读回一个字符串，然后使用 将其拆分为组件`[fileRep componentsSeparatedByString:@"\n"]`，然后在循环或块中遍历组件，`[NSNumber numberWithDouble:[element doubleValue]]`为拆分的每个元素添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:37:21.870

您可能希望从中创建一个 XML plist 以使其易于阅读：

```
[dataArray writeToFile:filePath atomically:YES]; 
```

这将创建一个属性列表，它是人类可读的 XML（除非文件已经存在并且它是二进制 plist，在这种情况下，新 plist 也将是二进制的）。

# c# - PayPal Adaptive Payment Api 预填充用户数据

> ID：11906599
> 
> 赞同：5
> 
> 时间：2012-08-10T17:36:07.197
> 
> 标签：c#, asp.net, paypal, paypal-adaptive-payments

我正在制作一个网站，我们将在其中举办活动，并希望用户“USER A”能够开始活动 - 输入他们的贝宝帐户信息并设置价格。然后其他用户可以注册他们的活动并直接向用户 A 付款，而无需我们处理他们的信用卡。我们希望没有贝宝账户的用户能够使用信用卡支付。

看起来 Paypal 的自适应支付是我们用来完成此任务的最佳 API。我让它在沙盒环境中工作。我的问题是 - 用户点击注册用户 A 的活动，然后他们输入所有信息（姓名、地址、公司等），我们需要将此信息保存在我们的数据库中，因此需要先完成此操作。然后他们会点击一个按钮，上面写着“Paypal 支付”。这将创建一个支付密钥并将用户重定向到用户有 2 个选项的 Paypal 登录页面（a. 登录 paypal 或 b. 再次输入个人信息和信用卡信息）

我想知道如何在 Paypal 页面中填写所有字段，这样用户就不必再次输入他们的所有信息。如果帐单地址恰好不同，他们将能够删除文本框中的数据。但是我见过的所有网站，如果它们相同，则不会让用户输入此信息两次。现在我知道这是可能的，因为我已经看到其他网站这样做了。我已经研究过 SetPaymentOptions API，但不是很清楚它是如何工作的，我需要传递用户信息，即使 Paypal 还不知道它们。

我尝试按照这样的 Paypal 教程中的建议添加值

```
<INPUT TYPE="hidden" NAME="first_name" VALUE="John">
<INPUT TYPE="hidden" NAME="last_name" VALUE="Doe">
<INPUT TYPE="hidden" NAME="address1" VALUE="9 Elm Street"> 
```

但这不起作用，这是来自请求的 Fiddler 的原始数据：

```
POST https://svcs.sandbox.paypal.com/AdaptivePayments/Pay HTTP/1.1
Content-Type: text/xml;charset=utf-8
X-PAYPAL-SECURITY-USERID: scotts_XXXXXXXXX_biz_api1.live.com
X-PAYPAL-SECURITY-PASSWORD: 1344XXXXX
X-PAYPAL-SECURITY-SIGNATURE: AOLbPDojAEUdeQJ3wXagJXkxYeJDARg4IXXXXXXXXXXXXXXXXXXX
X-PAYPAL-SERVICE-VERSION: 1.1.0
X-PAYPAL-APPLICATION-ID: APP-80W2844XXXXXXXXX
X-PAYPAL-REQUEST-DATA-FORMAT: XML
X-PAYPAL-RESPONSE-DATA-FORMAT: XML
Host: svcs.sandbox.paypal.com
Content-Length: 810
Expect: 100-continue
Connection: Keep-Alive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:35:47.770

来自 PayPal 的官方回应：

“ Adaptive Payments 在文档中没有执行此操作的任何功能。对于由此可能造成的不便，我深表歉意。”

我会留下这个问题，但万一有人有更好的路线让我去完成我在问题中解释的内容。

编辑：

万一其他人遇到这种情况，这实际上是 100% 不可能的——我最终使用了 Express Payment API，使用它很容易传递用户参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:33:25.950

我认为对您而言，问题实际上并不是在弹出窗口中登录贝宝，而是贝宝注册过程能够使用信用卡付款。自适应支付 API 中有一个 API 调用，允许您代表用户处理注册。

您可以使用自己的设计直接在页面上预先填写贝宝信息。提交时，您使用自适应支付 API 创建一个贝宝帐户，此过程的最后一步将需要您打开一个贝宝弹出窗口，要求用户通过添加密码和信用卡信息来完成注册。

在此之后，您会发现使用简单的贝宝登录时的相同支付行为。

* * *

请注意，要通过贝宝进一步整合您的所有网站，您可以添加预先批准，然后用户只会看到贝宝网站一次：当他接受预先批准时（轻贝宝弹出窗口中的两个步骤：登录>接受）。

**当用户第一次结帐时：**

1.  在创建帐户（使用我上面解释的方式）或使用贝宝付款之间进行选择
2.  创建一个preapproval key（见api上的doc，不需要知道用户paypal登录），作为returnUrl，指定一个带有本地user_id的url
3.  使用上一步返回的 url 打开一个 paypal 弹出客户端。用户将需要使用他的paypal帐户登录，然后接受您预先批准的特征（时间限制，资金限制）
4.  paypal会重定向到step2的returnUrl，可以是一个页面，当你说“这个窗口将自动关闭”用js关闭页面
5.  您现在可以使用预批准密钥代表用户进行付款

**当用户第一次结帐后：**

1.  要求确认“$XX 将被记入您关联的贝宝账户”
2.  使用预批准密钥付款，大功告成！

希望它会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T15:23:45.680

不要使用自适应支付 API

自适应支付已于 2017 年 1 月 12 日停止，PayPal Marketplace 等同于自适应支付。

您可以在 PayPal 开发者门户网站上了解有关 Marketplaces 产品的更多信息：[https ://developer.paypal.com/docs/marketplaces/pp4mp/?mark=marketplaces](https://developer.paypal.com/docs/marketplaces/pp4mp/?mark=marketplaces)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T08:26:40.983

您好，我认为以下链接会对您有所帮助

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

# ios - 横向模式下的增强现实应用程序

> ID：11906611
> 
> 赞同：1
> 
> 时间：2012-08-10T17:37:18.507
> 
> 标签：ios, matrix, augmented-reality, linear-algebra, core-motion

我正在尝试使用 CoreMotion 框架构建增强现实应用程序。我曾尝试退出 Apple 的 pARk 示例代码项目，但它仅适用于纵向模式。我需要它在景观中工作。当切换到横向模式时，覆盖视图中的子视图以相反的方向移动并且以错误的速率移动（它们在屏幕上移动太快或太慢）

我已阅读[其他提供两种解决方案的帖子](https://stackoverflow.com/questions/5063697/ios-4-core-motion-attitude-in-landscape-orientation)：

*   如 CoreMotion 茶壶示例中所建议的，创建一个参考姿态并将该姿态的倒数应用于当前姿态。

*   将姿态的四元数表示旋转 90 度

我不认为第一个会起作用，因为我的增强现实应用程序要求它被引用到真北。

我也不明白做第二个所需的数学。

我欢迎任何关于如何完成这个复杂问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:23:32.647

您现在的增强现实应用程序有多远？我认为首先看一下 Apple 的 PARk 是很苛刻的。你需要有一些高级的数学理解。但如果你这样做，为什么不呢！

你可以看看这个[存储库](https://github.com/nielswh/iPhone-AR-Toolkit)，这是一个在纵向和横向模式下工作的增强现实项目。以下是旋转的处理方式：

```
- (void)deviceOrientationDidChange:(NSNotification *)notification {

prevHeading = HEADING_NOT_SET; 

[self currentDeviceOrientation];

UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

// Later we may handle the Orientation of Faceup to show a Map.  For now let's ignore it.
if (orientation != UIDeviceOrientationUnknown && orientation != UIDeviceOrientationFaceUp && orientation != UIDeviceOrientationFaceDown) {

    CGAffineTransform transform = CGAffineTransformMakeRotation(degreesToRadian(0));
    CGRect bounds = [[UIScreen mainScreen] bounds];

    switch (orientation) {
        case UIDeviceOrientationLandscapeLeft:
            transform          = CGAffineTransformMakeRotation(degreesToRadian(90));
            bounds.size.width  = [[UIScreen mainScreen] bounds].size.height;
            bounds.size.height = [[UIScreen mainScreen] bounds].size.width;
            break;
        case UIDeviceOrientationLandscapeRight:
            transform          = CGAffineTransformMakeRotation(degreesToRadian(-90));
            bounds.size.width  = [[UIScreen mainScreen] bounds].size.height;
            bounds.size.height = [[UIScreen mainScreen] bounds].size.width;
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            transform = CGAffineTransformMakeRotation(degreesToRadian(180));
            break;
        default:
            break;
    }

    [displayView setTransform:CGAffineTransformIdentity];
    [displayView setTransform: transform];
    [displayView setBounds:bounds];  

    degreeRange = [self displayView].bounds.size.width / ADJUST_BY;

}
} 
```

您必须旋转所有注释，然后在设备旋转后旋转覆盖视图！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:35:03.613

如果您真的卡住了，并且愿意使用其他工具包，请尝试[iPhone-AR-Toolkit](https://github.com/a1phanumeric/iPhone-AR-Toolkit)。它适用于纵向和横向。

# c++ - A -> B, B -> A classes association

> ID：11906614
> 
> 赞同：1
> 
> 时间：2012-08-10T17:37:29.630
> 
> 标签：c++

This code doesn't do anything special. It's just a snippet to show the problem with forward declarations. Just a short question: why doesn't it work and how to force it to work?

```
class A;

class B {
    A obj;
public:
    int getB() const {
        return 0;
    }
    void doSmth() {
        int a = obj.getA();
    }
};

class A {
    B obj;
public:
    int getA() const {
        return 1;
    }
    void doSomething() {
        int b = obj.getB();
    }
}; 
```

This code gives me errors:

```
error C2079: 'B::obj' uses undefined class 'A'
error C2228: left of '.getA' must have class/struct/union 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T17:39:43.630

Forward declarations only let you use pointers and references to objects. You're trying to fully define one prior to the class definition being made available.

To make this work, you should change obj in A into a pointer (probably not the best solution) or use the PIMPL idiom (google it) and that should let you work around this.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T17:40:53.737

Your construction simply doesn't make sense. Neither `A` or `B` are well-defined structures, since they contain an infinitely recursing sequence of subobjects.

You just presented a slightly more obfuscated example of the same problem as this one:

```
struct Box { Box hubert; }; 
```

Again, this data structure makes no sense.

Everything in programming has to be finite and well-founded, if you will.

* * *

In practical terms, C++ forbids what you're trying to do by demanding that class definitions must only contain member objects that have *complete* types. But it just boils down to making logical sense. Just think about how you would *initialize* such a data structure. *Something* always has to come first.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T17:39:51.017

That type of circular dependency is not possible in C++. You can't have objects containing each other. You can however store pointers or references. You also can't really use a method of a class without the full definition.

So, there's two things you need to do:

1) Replace the objects with pointers.

2) Implement the method after the class definitions. If these are in a header, you'll need to mark them as `inline` to prevent multiple definitions.

```
class A;
class B {
    std::shared_ptr<A> obj;
public:
    int getB() const;
    void doSmth();
};

class A {
    std::shared_ptr<B> obj;
public:
    int getA() const;
    void doSomething();
};

inline int B::getB() const {
        return 0;
    }
inline void B::doSmth() {
        int a = obj->getA();
    }

inline int A::getA() const {
        return 1;
    }
inline void A::doSomething() {
        int b = obj->getB();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T17:47:58.080

I think you need to create header files for obj A and obj B to fix your issue. When B is defined it only knows A exists not what functions/methods A has.

Each header file needs to contain prototypes for each function/method. Example:

```
class A{
   int GetA() const;
   void DoSomething();
} 
```

The format may be off(I am used to Obj C headers) but that should help.

# c# - 检查时间顺序并返回乱序行

> ID：11906616
> 
> 赞同：0
> 
> 时间：2012-08-10T17:37:37.320
> 
> 标签：c#

这是一个小逻辑问题。我的数据网格具有按时间顺序排列的日期时间值。如果用户输入了乱序的日期时间，程序应该突出显示乱序的行。例如：这是初始订单。

```
10/5/2010 11:59:59  
10/6/2010 00:00:00  
10/6/2010 11:59:59 
```

假设用户输入

```
 10/5/2010 11:59:59   
    ***10/7/2010 00:00:00***    
    10/6/2010 11:59:59  
    10/7/2010 00:00:00 
```

这`10/7/2010 00:00:00`是乱序，程序运行正常。

假设用户输入

```
10/5/2010 11:59:59
10/6/2010 00:00:00
***10/5/2010 11:59:59***
10/7/2010 00:00:00 
```

这`10/5/2010 11:59:59`是出局或订单行。但节目亮点`10/6/2010 00:00:00`。

这是我检查上述内容的代码：

```
for (int nRow = 1; nRow < pSeries.Count; ++nRow)
{
    // validation1
   if (!check_range(nRow, i, pSeries[nRow].tim))
   {
       row = nRow;
       err = (short)err_typ.e_out_range;
       goto err_exit;
   }
}

public bool check_range(int np, int nCol, DateTime dt)
{
    DataArray pdata = GetDataArray(nCol);

    bool valid = (np <= 0 || pdata[np - 1].Datetim <= dt) &&
         (np >= (pdata.Count - 1) || dt <= pdata[np + 1].Datetim );
    return valid;
} 
```

`DataArray`是用户定义的日期时间值数组。`pSeries`,`pData`属于`DataArray`. 所以当我说它`pdata[np - 1].DateTime`指的是日期时间单元格时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:03:53.720

您需要更准确地定义构成乱序条目的内容。如果我输入日期 {A, C, B}，你会认为 C 不合适是因为它应该在 B 之后，还是 B 不合适因为它应该在 C 之前？

重新阅读您的问题后，听起来用户一次只能输入一个日期，并且您应该在每次新输入后检查有效订单。这简化了一些事情。您应该找到用户输入的日期，然后将其与列表中前后的日期进行比较。如果它不在该范围内，请突出显示新日期。现在您正在检查每个条目的范围是否正确，因此如果您将条目放入列表中的时间晚于应有的时间，则之前的条目将被 ping 为不正确。如果您早于应有的时间将条目放入列表中，则您的算法有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:29:37.193

您的代码说，对于序列（A、C、B、D），C 被认为是无序的，因为 C 不在 A 和 B 之间。

在序列 (5.0, 6.0, 5.1, 7.0) 的情况下，您当前的代码会发现 6.0 不适合 5.0 和 5.1 之间，因此 6.0 不合适。但是，您的问题描述表明您有另一个标准来确定一行是否不合适，这在您的代码中没有表示。

我猜测附加规则是这样的：如果 N+1 位于 N-1 和 N 之间，则 N+1 是不合适的行，而不是 N 行。

对于序列 (5.0, 6.0, 5.1, 7.0)，如果我们首先测试这个新规则，那么它会将 5.1 标记为不合适的行。如果新规则返回 false，那么我们将继续使用您现有的代码作为辅助测试。

也许更简单的测试方法是检查每个行日期是否大于或等于前一行日期。每行只有一个比较，而不是两个+。当您到达未通过此测试的行日期时，您需要“环顾四周”以确定“责任”是与前一行还是与当前行有关。这个“环顾四周”的代码有多快并不重要，因为它只会在错误情况下使用。

# coldfusion - 如何在 Coldfusion 中获取使用 CFHTTP 拉取的文件的临时路径？

> ID：11906617
> 
> 赞同：1
> 
> 时间：2012-08-10T17:37:37.400
> 
> 标签：coldfusion, get, cfhttp, temporary-directory

我正在使用`Coldfusion8`并且需要从远程服务器获取图像，我正在这样做：

```
 <cfhttp timeout="45" throwonerror="no" url="#variables.testFilePath#" method="get" useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" getasbinary="yes" result="variables.objGet">
 <cfset variables.objImage = ImageNew(variables.objGet.FileContent)> 
```

我现在需要将图像保存到 Amazon S3，但我想使用的功能：

```
 <cfset result = s3.putObject(url.b,file.serverFile,file.contentType,'300',form.cacheControl,'30',form.acl,form.storageClass,form.keyName,GetTempDirectory())> 
```

需要可以在其中找到我生成的图像的目录。

**问题：**
有没有办法获取一个图像文件的目录`cfhttp`并使用它转换为图像`imageNew`？还是我需要先将文件保存到磁盘？我还需要在存储之前调整大小，所以如果不先保存到磁盘，我可能无法通过。

感谢指点！

**编辑**：
我让它像这样工作：

```
<!--- getAsBinary --->
<cfhttp timeout="45" 
    throwonerror="no" 
    url="#variables.testFilePath#" 
    method="get" 
    useragent="..."         
    getasbinary="yes" 
    result="objGet">

<!--- validate --->
<cfif len(variables.testFilePath) EQ 0>
    <cfset variables.errorCount = variables.errorCount+1>
    <cfset variables.failedLoads = "FILE NOT FOUND" >
<cfelse>
    <cfif len(objGet.Filecontent) EQ 0>
        <cfset variables.errorCount = variables.errorCount+1>
        <cfset variables.failedLoads = "COULD NOT LOAD IMAGE">
    <cfelseif NOT listfindnocase(variables.allow, variables.fileExt) >
        <cfset variables.errorCount = variables.errorCount+1>
        <cfset variables.failedLoads = "WRONG FILE TYPE">
    <cfelse>
        <cftry>
            <cfscript>
                objImage = ImageNew(objGet.FileContent);
                ImageSetAntialiasing(objImage,"on");
                <!--- resize/crop --->
                variables.keyName = Session.loginid & "_S_";
            </cfscript>
            <!--- convert modified image back to binary --->
            <cfset variables.filekey = toBase64( objImage )>
            <!--- pass to s3.cfc --->
            <cfset result = s3.putObject(variables.bucketName, variables.filekey, variables.contentType, variables.httptimeout, variables.cacheControl, variables.cacheDays, variables.acl, variables.storageClass, variables.keyName, variables.imageSrc, "true" )>
            <cfcatch>
                <cfset variables.errorCount = variables.errorCount+1>
                <cfset variables.failedLoads = "NO IMAGE">
            </cfcatch>
        </cftry>
    </cfif> 
```

我需要将裁剪后的图像重新转换为二进制文件，`s3.putobject`否则`cffile action="readBinary"`将在此处执行另一个操作并在尝试构建图像文件路径时中断（图像仍处于临时状态）：

```
<cffile action="readBinary" file="#arguments.uploadDir##arguments.fileKey#" variable="binaryFileData"> 
```

虽然我可以使用这个[技巧](http://www.bennadel.com/blog/1890-Getting-The-Image-SRC-Of-ColdFusion-s-CFImage-WriteToBrowser-Temporary-Image-With-CFXML.htm)获取临时文件路径并设置`uploadDir`它并没有帮助，因为[CF 文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_08.html)说该路径必须是以驱动器号或斜杠开头的绝对路径，否则将采用 www-root 临时目录。

在我的情况下，临时 www-root 目录处于打开状态`C:/`，而临时文件 CFFile-Servlet 处于打开状态`E:/`，并且相对路径也不起作用（找不到文件）。因此，由于我找不到从 s3.cfc 重新读取图像的方法，我现在在调用 S3.cfc 之前转换回二进制文件。我传递了另一个参数 (1/0) 告诉 s3.cfc，我已经在发送二进制图像并且不需要重新读取它。

像这样：

```
<!--- if encoded is true, filekey already is the encoded image --->
<cfif arguments.encoded EQ "true">
    <!--- already sending binary image --->
    <cfset binaryFileData = arguments.fileKey>
<cfelse>
    <!--- Default --->
    <cffile action="readBinary" file="#arguments.uploadDir##arguments.fileKey#" variable="binaryFileData">
</cfif> 
```

我不确定这是否是性能方面最聪明的方式，但它似乎工作得非常顺利。欢迎评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:59:59.947

我猜你可以使用`path`and`file`属性而不是`result`. `GetTempDirectory()`使用+生成一些临时路径`CreateUUID()`，获取然后删除它。另外，它可能比将内容获取到变量然后写入中间文件更节省内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:06:32.050

cfhttp result 将数据存储在内存变量中。ImageNew 创建一个“ColdFusion”图像，这意味着它也仅驻留在内存中。您必须保存它以使其成为物理文件，以便在 cfhttp 或 imagewrite 等中发送。

如果不将其保存到物理文件，则必须使用 cffile action = "writetobrowser" 将其发送到浏览器，但最终会将其保存在临时位置以供浏览器访问，但在这里对您没有多大好处我不思考。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/functions_h-im_34.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/functions_h-im_34.html) http://livedocs.adobe.com/coldfusion/8/htmldocs/Images_19.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T17:43:36.303

AmazonS3Client 有一个接受 InputStream 的[putObject 方法](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html#putObject(java.lang.String,%20java.lang.String,%20java.io.InputStream,%20com.amazonaws.services.s3.model.ObjectMetadata))，因此您可以将二进制数据包装在 ByteArrayInputStream 中并将其传入，而无需担心支持文件。

像这样的东西：

```
<cfhttp method="get" url="#local.url#" result="local.httpResult" getAsBinary="true"/>
<cfif local.httpResult.statusCode eq "200 OK">
    <cfset var fileInputStream = createObject("java", "java.io.ByteArrayInputStream" ).init(local.httpResult.fileContent) />
    <cfset var objectMetadata = createObject("java", "com.amazonaws.services.s3.model.ObjectMetadata" ).init() />
    <cfset application.S3UTIL.s3Client.putObject("some.bucket", "folder/file.ext", local.fileInputStream, local.objectMetadata)/>
</cfif> 
```

# objective-c - 加载 xib 崩溃应用程序

> ID：11906618
> 
> 赞同：-1
> 
> 时间：2012-08-10T17:37:46.300
> 
> 标签：objective-c, xcode, addsubview

大家好，我在从主文件显示 xib 文件时遇到问题，不知道为什么某些 xib 文件会发生这种情况，而其他文件则不会。

```
if(segment == @"1"){
    Results1 *myView1 = [[Results1 alloc]initWithNibName:@"Results1" bundle:nil];
    [self.view addSubview:myView1.view];
}else if(segment == @"2"){
    Results2 *myView2 = [[Results2 alloc]initWithNibName:@"Results2" bundle:nil];
    [self.view addSubview:myView2.view];
}else if(segment ==@"3"){
    Results3 *myView3 = [[Results3 alloc]initWithNibName:@"Results3" bundle:nil];
    [self.view addSubview:myView3.view];
}else if(segment ==@"4"){
    Results4 *myView4 = [[Results4 alloc]initWithNibName:@"Results4" bundle:nil];
    [self.view addSubview:myView4.view];
} 
```

我的代码是第一个 xib 文件打开但不是其余的我不知道为什么，我添加了 .h 文件：

```
#import "Results1.h"
#import "Results2.h"
#import "Results3.h"
#import "Results4.h" 
```

调试时，应用程序最终出现在这一行：

```
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([TestTypingToolAppDelegate class]));
} 
```

然后它崩溃了，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:54:45.423

当应用程序将您带到`main.m`. 对我来说，这一直是我的错误，最常见的错误是 1) 文件不存在 ( `Results1.xib`) 或 2) 我忘记设置视图出口。正如我提到的控制台输出中异常的详细信息将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:00:39.260

蒂姆，这是来自*Interface Builder*的图片，也许它可以帮助你：

![在此处输入图像描述](../Images/6fe8ed325b8894e6c502c38dd753594d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:43:51.177

请记住，有时加载视图会在设备上崩溃，但不会在模拟器上崩溃。在这种情况下，请检查以确保在您调用时：

```
 initWithNibName:@"YourNibName"; 
```

您的 nib 名称字符串的大小写与 nib 文件完全相同。模拟器会忽略案例，但设备需要完全匹配（很烦人）

# c# - 将 CssClass 分配给 MasterPage 中的 LinkBut ton

> ID：11906621
> 
> 赞同：0
> 
> 时间：2012-08-10T17:37:59.153
> 
> 标签：c#, asp.net, html, css, master-pages

我有一些控制我的[asp:LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)超链接的 CSS，我想了解如何在加载 MasterPage 时为当前页面设置[WebControl 的 CssClass属性。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)

[MasterPage](http://msdn.microsoft.com/en-us/library/system.web.ui.masterpage.aspx)上的这些[asp:LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)超链接包含在一个列表中：

```
<ul id="menu">
  <li class="sprite">
    <asp:LinkButton ID="linkButton1" runat="server" PostBackUrl="~/linkButton1.aspx">
      <span>link 1</span>
    </asp:LinkButton>
  </li>
  <li class="sprite">
    <asp:LinkButton ID="linkButton2" runat="server" PostBackUrl="~/linkButton2.aspx">
      <span>link 2</span>
    </asp:LinkButton>
  </li>
  <li class="sprite">
    <asp:LinkButton ID="linkButton3" runat="server" PostBackUrl="~/linkButton3.aspx">
      <span>link 3</span>
    </asp:LinkButton>
  </li>
</ul> 
```

在[MasterPage](http://msdn.microsoft.com/en-us/library/system.web.ui.masterpage.aspx)中，我尝试使用 Page_Load 事件设置 CssClass：

```
protected void Page_Load(object sender, EventArgs e) {
  if (!IsPostBack) {
    linkButton1.CssClass = "";
    linkButton2.CssClass = "";
    linkButton3.CssClass = "";
    string linkButtonID = Request.RawUrl;
    if (-1 < linkButtonID.IndexOf("linkButton2")) {
      linkButton2.CssClass = "active";
    } else if (-1 < linkButtonID.IndexOf("linkButton3")) {
      linkButton3.CssClass = "active";
    } else {
      linkButton1.CssClass = "active"; // default
    }
  }
} 
```

My`CssClass="active"`似乎从未设置过，并且查看页面源代码可以快速验证我的所有 LinkBut​​ton 控件都没有设置 CssClass 属性。

由于这很难想象，我整理了一个 jsFiddle。该站点不支持 ASP，但它可以帮助您想象我想要完成的任务：

[http://jsfiddle.net/jp2code/kZQwC/](http://jsfiddle.net/jp2code/kZQwC/)

如何让我的活动页面设置 CssClass？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:56:05.283

您正在分配班级，`!IsPostBack`恐怕您当时的网址没有linkBut​​ton1、linkBut​​ton2 或linkBut​​ton3。

您接受`class assignment code out of the if condition`并检查您是否执行了这些条件并获得了课程。

改变

```
if (!IsPostBack) {
    linkButton1.CssClass = "";
    linkButton2.CssClass = "";
    linkButton3.CssClass = "";
    string linkButtonID = Request.RawUrl;
    if (-1 < linkButtonID.IndexOf("linkButton2")) {
      linkButton2.CssClass = "active";
    } else if (-1 < linkButtonID.IndexOf("linkButton3")) {
      linkButton3.CssClass = "active";
    } else {
      linkButton1.CssClass = "active"; // default
    }
} 
```

至

```
linkButton1.CssClass = "";
linkButton2.CssClass = "";
linkButton3.CssClass = "";
string linkButtonID = Request.RawUrl;
if (-1 < linkButtonID.IndexOf("linkButton2")) {
  linkButton2.CssClass = "active";
} else if (-1 < linkButtonID.IndexOf("linkButton3")) {
  linkButton3.CssClass = "active";
} else {
  linkButton1.CssClass = "active"; // default
} 
```

# ios - iOS 使用 UISegmentedControl 重新加载 UITableView

> ID：11906625
> 
> 赞同：2
> 
> 时间：2012-08-10T17:38:14.470
> 
> 标签：ios, uitableview, uisegmentedcontrol

您好我正在尝试基于两个不同的数组重新加载我的表格视图。应该加载哪个数组由导航栏中的段控件确定。目前它只会加载第一个数组，按下段控件时不会发生任何事情。以下是我的代码，非常感谢任何关于为什么这不起作用的帮助。我还检查了我的 IBAction 分段器是否连接在笔尖中。

**消息视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface MessageViewController : UIViewController<UITableViewDelegate> {
    IBOutlet UISegmentedControl *segmentControl;
    IBOutlet UINavigationBar *navBar;
    IBOutlet UITableView *tableView;
}

@property (retain, nonatomic) IBOutlet UISegmentedControl *segmentControl;
@property (retain, nonatomic) IBOutlet UITableView *tableView;
@property (nonatomic, retain) NSMutableArray *inbox;
@property (nonatomic, retain) NSMutableArray *sent;

@end 
```

**消息视图控制器.m**

```
#import "MessageViewController.h"

@interface MessageViewController () <UITableViewDelegate>

@end

@implementation MessageViewController
@synthesize segmentControl;
@synthesize inbox;
@synthesize sent;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.tabBarItem.title = NSLocalizedString(@"Messages", @"Messages");
        self.tabBarItem.image = [UIImage imageNamed:@"mail_2_icon&32"];
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.tableView.delegate = self;
    self.inbox = [NSMutableArray arrayWithObjects:@"testing", @"test", @"another", nil];
    self.sent = [NSMutableArray arrayWithObjects:@"test", @"another", @"testing", nil];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if(segmentControl.selectedSegmentIndex == 0){
        return [inbox count];
    }else if(segmentControl.selectedSegmentIndex == 1){
        return [sent count];
    }else{
        return [inbox count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    if(segmentControl.selectedSegmentIndex == 0){
        NSString *cellValue = [inbox objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
    }else if(segmentControl.selectedSegmentIndex == 1){
        NSString *cellValue = [sent objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
    }else{
        NSString *cellValue = [inbox objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
    }
    return cell;
}

-(IBAction)segmenter{
    [tableView reloadData];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

- (void)dealloc {
    [inbox release];
    [sent release];
    [segmentControl release];
    [segmentControl release];
    [super dealloc];
}

- (void)viewDidUnload {
    [self setSegmentControl:nil];
    [segmentControl release];
    segmentControl = nil;
    [super viewDidUnload];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:18:47.433

不知道为什么它最终没有工作，我所做的只是删除了三个类并用上面的代码重做所有事情，这一定是在路上有些无聊，但它现在可以工作了，我是一个快乐的露营者。也不需要委托的东西，因为这一切都在 nib 中完成，所以我的原始代码运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:48:34.587

我看到的唯一问题是您正在使用一个带有表格视图的视图控制器，但是您没有在您的 中为它设置委托`viewDidLoad`，并且您没有为您的视图控制器实现委托。

```
@interface MessageViewController () <UITableViewDelegate, UITableViewDataSource>

@end 
```

在`viewDidLoad`：

```
self.tableView.delegate = self;
self.tableView.dataSource = self; 
```

还要确保您在 IB 中正确连接了所有内容，包括分段控件和表格视图。

**编辑：**我根据您要执行的操作进行了自己的测试，[这是我自己的实现文件](https://gist.github.com/3316942)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:00:52.863

设置委托和数据源方法并使用断点检查数据。你的代码是正确的。

```
tableview.delegate=self;
 tableView.datasource=self; 
```

# excel - 将垂直数据链接到水平数据

> ID：11906627
> 
> 赞同：0
> 
> 时间：2012-08-10T17:38:22.993
> 
> 标签：excel

我在 Sheet2 中有大量数据在 C 列中垂直向下。在 Sheet1 上，我想水平放置。IE。

**表 2**

```
C1 = A 
C2 = B 
C3 = C 
```

**表 1**

```
E20 = A
F20 = B
G20 = C 
```

有谁知道我怎么能做到这一点？我试过 =TRANSPOSE(Overview!$C:$C) 但没有乐趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:57:10.223

破解它:)

=INDEX(**垂直数据范围**,COLUMNS($A:A)) =INDEX(Overview!$C3:$C1000,COLUMNS($E:E))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:50:23.573

您是否必须多次复制数据？

如果没有，那么您可以使用“选择性粘贴”功能并选中转置复选框。

[http://www.techonthenet.com/excel/formulas/transpose.php](http://www.techonthenet.com/excel/formulas/transpose.php)

转置的功能版本如何不起作用？

# html - Safari 中的跨域视频

> ID：11906628
> 
> 赞同：6
> 
> 时间：2012-08-10T17:38:30.217
> 
> 标签：html, safari, cross-browser, html5-video, cors

有谁知道 Safari 是否支持`crossorigin`HTML5`<video>`标签上的属性？我从响应所有需要的 CORS 标头的服务器提供视频，并使用下面的标记将视频嵌入到我的页面中。该页面是从不同的域提供的。

```
`<video controls crossorigin="anonymous" src="http://example.com/movie.mp4">` 
```

``toDataURL`然后我将视频绘制到画布上，并使用API 从画布中获取图像。这适用于 Chrome 和 Firefox，但 Safari 会抛出安全错误，就好像视频上没有`crossorigin`属性一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:58:51.850

看来 Safari 不支持 crossorgin 属性，但我找不到任何官方的。有这条推文[https://twitter.com/sonnypiers/status/187513545397776384](https://twitter.com/sonnypiers/status/187513545397776384)有图片的解决方法，但我认为它对视频没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T18:01:15.990

根据我们的测试，我们的 safari 不支持跨域。我们正在添加跨域属性以在音频请求中使用 COR（将报告情况如何）。

有趣的是，跨域在 http 下似乎可以正常工作，但在 https 下却不行。如果您阅读音频/视频标签（称为媒体标签）的 w3 规范，它确实说它们受到跨域限制。

在音频标签中支持 CORS： [https ://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes](https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes)

现在，另一个有趣的事实是 safari 根据文件扩展名选择 myme 类型（什么？）。带有 *.mp4 作为扩展名的文件可以正常播放。相同的文件重命名为其他没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T19:08:46.720

这是视频的解决方法：

```
 $.ajax({
                            type: 'get',
                            url : videoUrlFromAnotherDomain,
                            crossDomain: 'true',
                            success: function(data) {
                                // get a base64 version of the video!
                                var base64 = window.btoa(data);
                                // get a new url!
                                var newURL = 'data:video/mp4' + ';base64,' + base64;
                                // set the src on the video source element to the new url
                                video.find("source").attr("src", newURL);
                            } 
```

用 newURL 中的“video/mp4”替换任何类型的视频。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-12T06:49:23.790

一开始，你需要CORS吗？直接链接到它似乎在 safari 中有效。我尝试使用 htmlinstant.com

```
<video src="http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4" controls /> 
```

如果您需要 CORS，那么下面的页面会说对它的支持是在 2011 年 5 月添加的。虽然还没有测试过。 [https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes](https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes)

有关画布上视频的示例，请参阅此链接的第 5.4 节：http: [//www.html5rocks.com/en/tutorials/video/basics/](http://www.html5rocks.com/en/tutorials/video/basics/) 我测试过，它在我的 safari 中运行。`

# php - MySQL：获取一行和多个相关行 - 可能吗？

> ID：11906629
> 
> 赞同：0
> 
> 时间：2012-08-10T17:38:32.103
> 
> 标签：php, mysql, database, arrays, select

假设我有一张表：“**汽车**”，有 3 个字段：id、brand、cost。

还有第二个表：“ **models** ”，包含 3 个字段：id、brand、model_name。

每个“汽车”行可以有多个相关的“模型”行。

是否可以执行输出如下所示的 sql-select？

编辑：我使用 PHP 进行数据库查询

```
array(
  [0] => array(
     [id] => 1
     [brand] => mercedes
     [cost] => 1000
     [models] => array(
       [0] => array(
         [id] => 1
         [brand] => mercedes
         [model_name] => slk
       )
       [1] => array(
         [id] => 2
         [brand] => mercedes
         [model_name] => clk
       )
       [2] => array(
         [id] => 3
         [brand] => mercedes
         [model_name] => whatever
       )
     )
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:49:52.660

您需要在模型表中添加一个外键关系，例如`car_id`. 然后：

```
SELECT * FROM cars JOIN models ON car_id = models.id; 
```

这将输出类似于您正在寻找的内容。

假设您使用的是 PHP，使用输出：

```
$query= "SELECT * FROM cars JOIN models ON car_id = models.id";
$r= @mysqli_query($dbc, $query);
while ($row= mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    $carstuff['id']=$row[id];
    $carstuff['brand']=$row[brand];
    $carstuff['cost']=$row[cost];
    $carstuff[$row['models']][]=$row['model_name'];
}

var_dump($carstuff); 
```

请注意，id、brand 和 cost 会被反复覆盖，但这没关系，因为它们被相同的信息覆盖。我不太确定代码的清洁度，但这是基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T11:46:39.277

尝试这个：

**询问：**

```
SELECT c.ID, c.brand,c.cost, GROUP_CONCAT(model_name SEPARATOR '","')  as models
, GROUP_CONCAT(m.ID SEPARATOR ',')  as MID
, GROUP_CONCAT(m.brand SEPARATOR '","')  as mbrand
FROM cars c 
LEFT OUTER JOIN model m 
ON m.brand = c.brand
GROUP BY brand; 
```

**输出：**

```
ID  BRAND       COST    MODELS            MID   MBRAND
1   audi        1000    m11","m22     4,5   audi","audi
1   mercedes    1200    m1","m2","m3      1,2,3 mercedes","mercedes","mercedes 
```

现在在您的 php 代码中，您可以处理 MODEL、MID 和 Mbrand（通过使用[explode](http://us2.php.net/manual/en/function.explode.php)）

```
$modelArray = explode(" ,", $row["MODELS"); 
```

[SQLFIDDLE](http://sqlfiddle.com/#!2/c81ecd/6)

# php - 如何在 PHP 中从 JSON 中获取单个字段

> ID：11906632
> 
> 赞同：6
> 
> 时间：2012-08-10T17:38:38.103
> 
> 标签：php, json

我的 JSON 看起来像这样。如何获取特定字段，例如“title”或“url”？

```
{
 "status":1,
    "list":
        {
         "204216523":
            {"item_id":"204216523",
             "title":"title1",
             "url":"url1",
            },
        "203886655":
            {"item_id":"203886655",
             "title":"titl2",
             "url":"url2",
            }
        },"since":1344188496,
  "complete":1
 } 
```

我知道`$result = json_decode($input, true);`应该用来获取可解析的数据`$result`，但是如何获取单个字段`$result`呢？我需要遍历所有成员（在本例中为 2 个）并从中获得一个字段。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T17:46:44.343

`json_decode()`将 JSON 数据转换为关联数组。因此，要从您的数据中获取标题和网址，

```
foreach ($result['list'] as $key => $value) {
    echo $value['title'].','.$value['url'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:42:05.110

```
echo $result['list']['204216523']['item_id']; // prints 204216523 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:42:54.173

`json_decode()`将您的 JSON 数据转换为`array`. 将其视为关联数组，因为它就是这样。

# wordpress - 倍数 meta_key 并按特定 meta_value 排序

> ID：11906636
> 
> 赞同：0
> 
> 时间：2012-08-10T17:38:57.343
> 
> 标签：wordpress, wordpress-theming

我试图通过我放入可排序的帖子列表的 meta_value 来获取帖子顺序，我有一个额外的 meta_key 和 meta_value 来为查询提供额外的信息，但我不能让 WP_Query 返回帖子顺序，做你知道什么是磨损的吗？

这是我的 WP_QUery 代码：

```
$args = array(
    'meta_query' => array(
        array(
            'key' => 'portada',                                                  
            'value' => 'on'
        ), array(
            'key' => 'pos',
            'type' => 'numeric'
        )
    ),
'meta_key' => 'pos',
'orderby' => 'meta_value_num');
$loop = new WP_Query($args); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:56:03.210

我使用以下代码来解决我的问题：

```
$args = array(
   'meta_query' => array(
       array(
          'meta_key' =>'destacados',
          'meta_value' => 'on'
       )
    ),
    'orderby' => 'meta_value_num',
    'category__in' => $category->cat_ID,
    'meta_key' => 'pos'
);
$loop = new WP_Query($args); 
```

谢谢你们 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:52:22.203

注意

```
 'meta_query' => array(
       array(
          'key' =>'destacados',
          'value' => 'on'
       )
    ) 
```

代替

```
'meta_query' => array(
       array(
          'meta_key' =>'destacados',
          'meta_value' => 'on'
       )
    ) 
```

# java - Web 服务客户端：org.jboss.ws.core.jaxws.spi.ProviderImpl 无法转换为 javax.xml.ws.spi.Provider

> ID：11906643
> 
> 赞同：0
> 
> 时间：2012-08-10T17:39:37.780
> 
> 标签：java, spring, jboss, jax-ws

我们在这里遇到了一个非常令人费解的问题，我想知道是否有其他人可能知道解决方案。周三，一个包含 Web 服务客户端的 Spring 项目顺利部署到我们的 JBoss 应用程序服务器上，然后也被顺利调用。

今天早上，我们尝试部署同一项目的更新版本，并收到此错误：

org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义名称为“customerServicePort”的 bean 创建错误：调用 init 方法失败；嵌套异常是 javax.xml.ws.WebServiceException: Unable to create Provider: org.jboss.ws.core.jaxws.spi.ProviderImpl cannot be cast to javax.xml.ws.spi.Provider

我的第一个想法是服务器发生了某种变化，因为我以前见过这个错误，它与 jboss 的兼容性有关，或者我相信它与 java6 中的某些东西缺乏兼容性。但是当我们在 svn 中恢复到周三的修订版时，它再次部署并成功运行。但是当我们查看版本历史时，我们看不到任何可以做这样的事情的更改。只有两个引用客户端的类发生了变化，每个对客户端的引用都和以前一样。application-context.xml 和构建路径是相同的。有没有人见过这样的事情？

# .htaccess - htaccess 将工作重定向到移动设备，而不是桌面

> ID：11906645
> 
> 赞同：0
> 
> 时间：2012-08-10T17:39:47.233
> 
> 标签：.htaccess

移动设备重定向到 domain/m/request_uri，但如果您将该 URL 放入桌面，它应该重定向到 domain/request_uri。

有什么建议么？谢谢！

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/(fb/)?(takeaction|\d{1,3})/.*$
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ /m/$1 [L,R=302]

RewriteCond %{REQUEST_URI} ^/m/(takeaction|\d{1,3})/.*$
RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile)" [NC]
RewriteRule ^/m/(.*)$ /$1 [L,R=302]
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:40:54.527

> 它根本没有重定向。我已经设法让它重定向到根目录，所以 RewriteCond 行似乎有效，但我认为我的问题是 RewriteRule 没有将“domain.com/m/request”更改为“domain.com/request”

尝试从以下位置删除重写规则中的前导斜杠：

```
RewriteRule ^/m/(.*)$ /$1 [L,R=302] 
```

至：

```
RewriteRule ^m/(.*)$ /$1 [L,R=302] 
```

`RewriteRule`在 htaccess 文件中用于匹配指令时，从 URI 中删除前导斜杠。

# c# - 从 Windows 窗体连接到远程数据库

> ID：11906651
> 
> 赞同：1
> 
> 时间：2012-08-10T17:40:01.383
> 
> 标签：c#, sql-server, winforms

我有一个关于连接到外部托管数据库的 C# Windows 窗体的问题。

我有一个用于 Web 开发数据库目的的 GoDaddy SQLServer 2008 数据库。我正在创建一个 C# windows 窗体，我需要它来连接到数据库。我知道如何将 C# Windows 窗体连接到本地数据库，所以我认为唯一的区别是使用不同的连接字符串。

我使用的连接字符串如下：

```
Data Source=limeoatsdb.db.8996219.hostedresource.com; Initial Catalog=database; User ID=userid; Password=password; 
```

我用虚拟值替换了上面的值，但显然在我的代码中它们具有正确的值。

首先，是否可以将 C# windows 窗体连接到 GoDaddy 数据库？

其次，如果可能的话，关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:42:28.280

这是不可能的。GoDaddy阻止来自其不管理的系统[与其数据库的所有连接。](http://support.godaddy.com/groups/web-hosting/forum/topic/does-godaddy-allow-external-sql-server-database-connections/?pc_split_value=1)

这是许多托管公司的典型特征。出于安全原因，您只能从他们自己的系统中使用他们的数据库是很常见的。

如果您需要访问您的数据，您需要创建某种形式的中间步骤，例如在您的网站中构建一个可以通过您的表单访问的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:56:13.240

除了 GoDaddy 阻止端口之外，我应该指出，如果您打算分发该应用程序，这是一个坏主意。

如果您允许客户端直接连接到您的数据库，那么您实际上是在敞开大门。没有什么能阻止我使用 SQL Management Studio 连接到您的数据库服务器并摆弄您的数据。

可以这样想：在 Web 应用程序中，您永远不会让客户端 JavaScript 直接访问您的数据库。相反，它必须通过您的应用服务器。

我会创建某种服务器，它提供客户端 Win Form 可以调用的 API。服务器甚至可以是提供 REST/SOAP/任何 API 的常规 Web 服务器。一个好的起点可能是研究 WCF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T00:33:57.043

是的，您可以连接到 GoDaddy 服务器上的 SQL Server 数据库。

这是我用来通过 SQL Server Management Studio 访问数据库的功能。

检查这个：[https ://stackoverflow.com/questions/357147/go-daddy-sql-server-2005-remote-connection](https://stackoverflow.com/questions/357147/go-daddy-sql-server-2005-remote-connection)

基本上，在创建数据库时，请确保选中“直接访问”选项。

显然，这是您必须注意的安全问题。

# objective-c - 如何定位 MPVolumeView？

> ID：11906652
> 
> 赞同：1
> 
> 时间：2012-08-10T17:40:04.293
> 
> 标签：objective-c, xcode

我在定位 MPVolumeView 时遇到问题。在我的 viewController 的 viewDidLoad 方法中，我有以下代码：

```
[super viewDidLoad];
MPVolumeView *myVolumeView = [[MPVolumeView alloc] initWithFrame: self.volumeView.bounds];
[self.volumeView addSubview: myVolumeView]; 
```

在情节提要中，我添加了 volumeView 并将其连接到控制器。我包括两个屏幕截图：一个故事板和一个视图在我的手机上运行时的外观。

如何将 MPVolumeView 定位在 volumeView 中？ ![故事板](../Images/b3dec9e70e7b8f9ce462fadd053a0eef.png) ![它在我的设备上的外观](../Images/8d143ed365f6c06c3315bbaeecfeff5e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:43:09.773

最简单的方法是`MPVolumeView`在 Interface Builder 中而不是在代码中创建一个。您可以通过将自定义拖动`UIView`到 XIB 中，根据需要对其进行配置，然后将其类更改为`MPVolumeView`.

# r - 相对风险的标准误

> ID：11906658
> 
> 赞同：0
> 
> 时间：2012-08-10T17:40:27.000
> 
> 标签：r

我正在尝试对相对风险的标准错误进行编码。在许多情况下，我获得了 SE 的无穷大和 NaN 的置信限。我想知道是否需要为参数指定限制才能获得有限的标准误差。这是我的代码

```
 set.seed(111) 
    k<-63
    n<-60
    xt<-NULL
    xc<-NULL

    pt<-rbeta(k,3,3)   # treatment effect
    pc<-rbeta(k,1,3)   # control effect
    true_RR<-pt/pc   # True Relative Risk

    for(i in 1:k)
    {
    xt<-cbind(xt,rbinom(300,n,pt[i]))

    xc<-cbind(xc,rbinom(300,n,pc[i]))
     }
    a<-xt
    b<-n-a
    c<-xc
    d<-n-c

    RR<-xt/xc

    for (i in 1:300){

    for (j in 1:63) 
    {
    if (xc[i,j]==0)
    {
     RR[i,j]<-0
     }}}
     se_rate<-sqrt((b/(a*(a+b)))+(d/(c*(c+d))))

     l_cl<-RR*exp(-1.96*se_rate)
     u_cl<-RR*exp(1.96*se_rate) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:47:22.597

你得到的原因`Inf`是因为你除以0。特别是，你设置

```
xc = cbind(xc,rbinom(300,n,pc[i]))
c = xc 
```

稍后计算：

```
d/(c*(c+d)) 
```

所以有一个非零概率设置`c`为零。你应该做的是一个统计问题，我们没有足够的信息给你明智的建议。

# android - 安卓标签布局

> ID：11906660
> 
> 赞同：1
> 
> 时间：2012-08-10T17:40:29.433
> 
> 标签：android, tabs

我在 Android 选项卡布局中隐藏了一个选项卡。当我再次启动应用程序时，它永远不会加载，除非应用程序被强制关闭。我尝试了两种方法

1）清除和重置选项卡，然后将选项卡一一添加到tabhost。

```
tabHost.setCurrentTab(0);
tabHost.clearAllTabs();
tabHost.addTab(//Tab1 related)
tabHost.addTab(//Tab2 related)
tabHost.addTab(//Tab3 related) 
```

2) 将该特定视图的可见性设置为“消失”。

```
getTabWidget().getChildAt(2).setVisibility(View.GONE); 
```

这两种方法似乎都没有帮助。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:00:58.247

你把重置代码块放在哪里了？在 onCreate 或 onResume （其他地方）？如果在 onCreate 中，我认为您应该尝试将您的方法移至 onResume。检查重启后收到的事件。

# wcf - REST WCF 服务在 HEAD 中发送错误 500 而不是 404 未找到

> ID：11906662
> 
> 赞同：0
> 
> 时间：2012-08-10T17:40:29.980
> 
> 标签：wcf, rest, iis

这是我的问题，如果在这种情况下找不到图像请求的对象，我有一段 WCF REST 代码会按照建议返回 NULL。这是我的代码

```
if (imageStream == null) {
 WebOperationContext.Current.OutgoingResponse.SetStatusAsNotFound("Image not available for the requested size.");
 return null;
} 
```

这在 GET 中按预期发送 404 错误，但对于 HEAD 发送 500 Internal Server Error

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:57:19.280

尝试使用`throw new WebFaultException(HttpStatusCode.NotFound);`这里有更多关于[WebFaultException](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webfaultexception.aspx)

# excel - 使用 Excel 2007 的 VBA 中的 ArrayFormula

> ID：11906664
> 
> 赞同：1
> 
> 时间：2012-08-10T17:40:41.970
> 
> 标签：excel, excel-2007, vba

如果使用 ctrl sht enter 输入，则此数组公式可以正常工作：

```
={IF(ROWS(A$7:A7)>A$4,"",IF(SUMPRODUCT((consumers=$A$6)*(data=A$5)*(data=A$5<>""))>0,INDEX 
(employees,SMALL(IF(((consumers=$A$6)*(data=A$5)*(data=A$5<>"")),COLUMN(Data!$B$2:$AC$2)-COLUMN 
(Data!$B$2)+1),ROWS(A$7:A7)))))} 
```

我做了一些研究并读到，如果我想在 VBA 中使用这个公式，我必须使用 R1C1 表示法......所以这就是我迄今为止所拥有的：

```
Sub frmarry()
   Range("y28").Select
   Selection.FormulaArray = "=IF(ROWS(R28C25:R28C25)>R26C25,"",IF(SUMPRODUCT((consumers=R27C25)* 
   (data=R24C7)*(data=R24C7<>""))>0,INDEX(staff,SMALL(IF(((consumers=R27C25)*(data=R24C7)* 
   (data=R24C7<>"")),COLUMN(Data!$R2C2:$R2C29)-COLUMN(Data!R2C2)+1),ROWS(R28C25:R28C25)))))"
End Sub 
```

现在，当我运行例程时，我得到一个标志：

```
 'unable to set the FormaulaArray property of the Range class' 
```

如果我选择调试，它会突出显示上面的数组公式。

我只是使用 excel 设置将我的公式设置为 R1C1 表示法，所以在转换中可能会误入歧途。由于我不熟悉 R1C1 表示法，我希望更熟悉 R1C1 的人能帮助我解决此问题或为我指明方向，以便我可以解决此 VBA 问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:51:00.537

试试这个。这有效

```
Sub frmarry()
    Range("Y28").FormulaArray = _
    "=IF(ROWS(R28C25:R28C25)>R26C25,"""",IF(SUMPRODUCT((consumers=R27C25)*" & _
    "(data=R24C7)*(data=R24C7<>""""))>0,INDEX(staff,SMALL(IF(((consumers=R27C25)" & _
    "*(data=R24C7)*(data=R24C7<>"""")),COLUMN(Data!R2C2:R2C29)-COLUMN(Data!R2C2)" & _
    "+1),ROWS(R28C25:R28C25)))))"
End Sub 
```

# javascript - 试图在 jquery ajax post 中将变量设置为 URL 的一部分

> ID：11906670
> 
> 赞同：0
> 
> 时间：2012-08-10T17:41:00.943
> 
> 标签：javascript, jquery, ajax

所以我正在尝试使用 jQuery.ajax 而不是 html 表单来发帖。这是我的代码：

```
$.ajax({

type: 'POST', // GET is available if we prefer
url: '/groups/dissolve/$org_ID',
data: data,
success: function(data){
    $('#data_box').html(data);
    }
}); 
```

这是我的问题：

当这是一个 html 表单时，作为 URL 一部分的 $org_ID 实际上会提取变量并将其作为 URL 的一部分发送。现在这是在 jquery 中，它只是将 $org_ID 作为文本发送。我怎样才能弄清楚变量 $org_ID 是什么？我尝试在 javascript 中声明它，但我是 jquery/javascript 的新手，我真的不知道我在做什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:43:33.957

你是用 PHP 渲染这个吗？在这种情况下，您需要执行以下操作：

```
url: '/groups/dissolve/<?php print $org_ID; ?>' 
```

否则，您需要执行类似的操作

```
var org_id = 'foo'; 
// or
var org_id = '<?php print $org_id ?>';
$.ajax({

type: 'POST', // GET is available if we prefer
url: '/groups/dissolve/'+org_ID,
data: data,
success: function(data){
    $('#data_box').html(data);
    }
}); 
```

与 PHP 不同，您不能在 javascript 中插入变量，您必须将它们与字符串连接起来。

如果您尝试发布变量 ( `org_id`)，那么您应该将其放入数据中：

```
data['org_id'] = org_id;

$.ajax({

type: 'POST', // GET is available if we prefer
url: '/groups/dissolve/',
data: data,
success: function(data){
    $('#data_box').html(data);
    }
}); 
```

虽然您可以将参数连接到您的 url 以在 HTTP 请求中发送它们，但将它们放在数据对象中不仅可以让 jQuery 为您做更多的工作并转义 HTML 实体等（并保持您的代码更清洁），而且还可以让您轻松调试和玩弄`ajax()`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:44:52.283

您的数据来自何处的问题尚不清楚，但您可以使用以下内容：

```
url: '/groups/dissolve/'+orgId, 
```

或者：

```
url: '/groups/dissolve/?orgId='+orgId, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:47:21.080

简短的回答，连接

```
url: '/groups/dissolve/' + $org_ID 
```

# magento - Magento checkmaxlenght 用于文本属性

> ID：11906674
> 
> 赞同：1
> 
> 时间：2012-08-10T17:41:32.877
> 
> 标签：magento, attributes

我需要限制类似于 meta_description 的属性（“灵感”）的文本字段长度。我尝试在 Attributes.php (\app\code\core\Mage\Adminhtml\Block\Catalog\Product\Edit\Tab) 中复制代码块：

```
if ($form->getElement('meta_description')) {
            $form->getElement('meta_description')->setOnkeyup('checkMaxLength(this, 255);');
        } 
```

并将“meta_description”替换为“inspiration”，但它不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:32:51.967

寻找构建这部分代码并使用 jQuery 制作的 phtml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:32:40.693

很难说，因为您没有准确定义“不起作用”。

我的猜测是，`<form>`包含您的`inspiration`输入字段是一些*自定义*模板，不包含所需的 JavaScript 方法`checkMaxLength()`*.

```
function checkMaxLength(Object, MaxLen)
{
    if (Object.value.length > MaxLen-1) {
        Object.value = Object.value.substr(0, MaxLen);
    }
    return 1;
} 
```

* * *

[* 通常只定义在`app/design/adminhtml/default/default/template/catalog/product/edit.phtml`]

# balanced-payments - 将卡添加到帐户时出现“无法将卡与此市场上的帐户关联”错误。

> ID：11906676
> 
> 赞同：5
> 
> 时间：2012-08-10T17:41:37.450
> 
> 标签：balanced-payments

我使用 Balanced.js 标记了一张卡，并尝试使用买家电子邮件和标记卡 URI 创建一个买家。我看到这个错误：

```
Balanced::Conflict(409)::Conflict:: POST 
https://api.balancedpayments.com/v1/marketplaces/TEST-xxxxxx/accounts: cannot-associate-card: Cannot associate card with accounts on this marketplace. Your request id is xxxxxx 
```

关于错误来源以及如何解决的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:52:03.760

这通常表明您正在尝试将在一个市场上标记化的卡与另一个市场上存在的帐户相关联。在 Balanced 中标记化的卡只能是同一市场上的关联账户。

如果您在测试和生产环境之间移动，通常会发生这种情况。最明显的地方是`marketplace_uri`您传递给[balance.js](https://www.balancedpayments.com/docs/js)的参数。

你会在你的 javascript 中看到一些代码，看起来像

```
balanced.init(marketplaceUri); 
```

该 uri 必须与与您用于处理付款的 API 密钥关联的市场相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:16:19.387

您需要更改 api 密钥 require 'balanced' Balanced.configure('')

要找到它，请转到仪表板 > 设置 > api 密钥

# java - Java Play 2 - 编译错误 -> Heroku

> ID：11906682
> 
> 赞同：2
> 
> 时间：2012-08-10T17:42:07.433
> 
> 标签：java, deployment, heroku, playframework-2.0, sbt

我正在尝试将我的应用程序部署到 heroku ，但我总是收到相同的错误消息，我不知道如何修复它。

我做了一些谷歌搜索但没有成功。我还尝试更改 sbt 的版本。它也可以完美运行

```
play run 
```

我正在使用 Play 2.0.2。

有什么解决办法吗？

```
[info] Loading project definition from /tmp/build
     [warn]   module not found: play#sbt-plugin;2.0
     [warn] ==== typesafe-ivy-releases: tried
     [warn]   http://repo.typesafe.com/typesafe/ivy-re
    .9.1/sbt_0.11.3/2.0/ivys/ivy.xml
     [warn] ==== local: tried
     [warn]   /tmp/build_2gxtp2n2ct352/.sbt_home/.ivy2
    .9.1/sbt_0.11.3/2.0/ivys/ivy.xml
     [warn] ==== Typesafe repository: tried
     [warn]   http://repo.typesafe.com/typesafe/releas
    3/2.0/sbt-plugin-2.0.pom
     [warn] ==== heroku-sbt-typesafe: tried
     [warn] ==== heroku-central: tried
     [warn]   http://s3pository.heroku.com/maven-centr
    3/2.0/sbt-plugin-2.0.pom
     [warn] ==== typesafe: tried
     [warn]   http://repo.typesafe.com/typesafe/repo/p
    0/sbt-plugin-2.0.pom
     [warn] ==== heroku-sbt-typesafe: tried
     [warn] ==== heroku-central: tried
     [warn]   http://s3pository.heroku.com/maven-centr
    3/2.0/sbt-plugin-2.0.pom
     [warn] ==== typesafe: tried
     [warn]   http://repo.typesafe.com/typesafe/repo/p
    0/sbt-plugin-2.0.pom
     [warn]   ::::::::::::::::::::::::::::::::::::::::
     [warn]   ::          UNRESOLVED DEPENDENCIES
     [warn]   ::::::::::::::::::::::::::::::::::::::::
     [warn]   :: play#sbt-plugin;2.0: not found
     [warn]   ::::::::::::::::::::::::::::::::::::::::
     [warn]
     [warn]   Note: Some unresolved dependencies have
    these dependencies exist with the requested attrib
     [warn]           play:sbt-plugin:2.0 (sbtVersion=

     [warn]
     [error] {file:/tmp/build_2gxtp2n2ct352/project/}d
    solveException: unresolved dependency: play#sbt-pl
     Project loading failed: (r)etry, (q)uit, (l)ast,
    build app with sbt
     Heroku push rejected, failed to compile Play 2.0

    @heroku.com:pure-chamber-6292.git
    mote rejected] master -> master (pre-receive hook
     failed to push some refs to 'git@heroku.com:pure- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:08:02.823

好像是版本号`sbt-plugin`不对。确保您的`project/plugins.sbt`文件包含：

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.2") 
```

# build - Team City - 找不到文件错误 - 编译错误

> ID：11906685
> 
> 赞同：0
> 
> 时间：2012-08-10T17:42:20.337
> 
> 标签：build, continuous-integration, teamcity

我的团队城市建设因错误而失败

> " [Csc] CSC 错误 CS2001：找不到源文件 'Services\Entities\ModelNames.cs'

问题是这个 .cs 文件在签入时会从源代码控制 (TFS) 和本地计算机中删除。项目中的任何地方都没有使用此类的代码。但我仍然不断收到这个错误。我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:18:58.050

确保您的 TeamCity 结帐或脚本结帐正确。看起来您的建筑使用旧项目文件。也许子目录被签出而不是根目录？

# c# - FieldOptional FileHelpers 必须标记为可选，因为前一个字段标记为可选

> ID：11906689
> 
> 赞同：1
> 
> 时间：2012-08-10T17:42:33.987
> 
> 标签：c#, .net, filehelpers

我正在使用 filehelpers 2.9.9 并尝试使用 FiledOptional 但我不断收到此错误

> 字段：SystemUrl 必须标记为可选，因为前一个字段被标记为可选。（尝试将 [FieldOptional] 添加到 SystemUrl）

SystemUrl 是第一个字段，我将其标记为 FieldOptional。之后的所有其他字段是否也需要标记为可选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:44:22.710

> SystemUrl 是第一个字段，我将其标记为 FieldOptional。之后的所有其他字段是否也需要标记为可选？

是的。将字段标记为可选后，所有后续字段也必须是可选的。

如果你不想要这种行为，你需要移动`SystemUrl`到最后，而不是先拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:06:11.197

也许问题在于 FieldOptional 的作用：它必须用于文件中可能存在或不存在的字段，它们必须位于记录类的末尾，如果您有 3 个字段 Field1、Field2 和 Field3（所有字符串）和你有

```
stringA,stringB,stringC 
```

稍后您将 Field2 设置为可选，库可以解析：

```
stringA,stringB 
```

因为无法消除歧义。

你能提供一个样本记录吗？如果您不想处理该字段，也许您需要 FieldNotInFile 而不是可选的。

# visual-studio-2012 - Visual Studio 2012 csproj 和 sqlproj

> ID：11906691
> 
> 赞同：0
> 
> 时间：2012-08-10T17:42:42.863
> 
> 标签：visual-studio-2012, csproj

我有最新的 VS 2012 RC，当我尝试打开另一个程序员在 VS 2012 中编写的现有解决方案时，它说文件 csproj 和 sqlproj 与我正在运行的版本不兼容。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:23:57.180

为 VS安装[Sql Server 数据工具。](http://msdn.microsoft.com/en-us/library/hh500335%28v=VS.103%29.aspx)可从[Web 平台安装程序](http://www.microsoft.com/web/downloads/platform.aspx)或 SQL Server 安装程序获得。

# php - 特殊波兰语字符未正确显示

> ID：11906692
> 
> 赞同：0
> 
> 时间：2012-08-10T17:42:46.060
> 
> 标签：php, mysql, forms, encoding

当用户输入邮政编码时，我们会显示位置，不幸的是波兰语字符无法正确显示。

**例子：**

用户输入`50-001`，它应该显示**Wrocław, Dolnośląskie**，但它显示为**WrocÃ...â€šaw, DolnoÃ...â€ºlÃ„â€¦skie**

有谁知道如何让它工作或问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:45:42.817

在任何查询之前，您可以运行：

```
query("SET NAMES utf8"); 
```

或者将其设置在插入中，如果它只有一个字段：

```
some_chinese_column = _utf8 "鬼佬" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:55:32.827

您还必须告诉 PDO 或 MySQLi 使用 UTF8：

```
$pdo = new PDO('mysql:host=localhost;dbname=whatever;charset=utf8', $user, $pass); 
```

或者

```
$mysqli->set_charset("utf8") 
```

# java - 关于java类的junit测试用例的生成

> ID：11906693
> 
> 赞同：0
> 
> 时间：2012-08-10T17:42:52.537
> 
> 标签：java, junit

我是纯粹的开发人员，大部分时间都在编写java类，但是对于junit测试用例的情况，我变得有点懒惰了，有没有可以在eclipse中安装的插件，它会自动生成我的junit测试用例..！！请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:00:01.343

JUnit 插件为您存根方法，这就是您所需要的。由您决定测试什么以及如何测试。[Parasoft](http://www.parasoft.com/jsp/capabilities/unit_testing.jsp;jsessionid=aaaaisOI3nunZb?redname=unit-testing&referred=unit-testing)有这个工具，但我从未使用过它，所以不能说它是怎样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:14:01.443

[MoreUnit](http://moreunit.sourceforge.net/)是一个很棒的插件，可以生成测试类并允许在测试和被测类之间轻松导航。它还可以生成测试方法存根和模拟样板，但我不认为这些有用。

至于测试代码本身，编写它的唯一方法是让其他人编写它（即可执行规范）。

# windows-mobile - 清除 Windows Mobile 上由另一个应用程序创建的通知图标

> ID：11906698
> 
> 赞同：1
> 
> 时间：2012-08-10T17:43:11.627
> 
> 标签：windows-mobile, notifications

有很多关于如何使用 Microsoft.WindowsCE.Forms.Notification 创建通知的示例。

我需要做的是处理由另一个应用程序创建的通知。

我的应用程序启动了另一个应用程序，并且该应用程序正在发出我想以编程方式处理的通知。

有没有办法获得另一个应用程序通知图标的句柄并处理它。

# php - PHP 5.3.15 finfo_open() 加载魔法数据库失败

> ID：11906700
> 
> 赞同：1
> 
> 时间：2012-08-10T17:43:21.723
> 
> 标签：php, mime

我正在尝试上传图片，但收到以下消息：

> finfo_open() [function.finfo-open]：无法在 ...（我项目中的文件位置）加载魔法数据库

我在那个位置确实有**magic**、**magic.mgc**、**magic.mime**和**magic.mime.mgc**。

几天前我刚刚更新到 PHP 5.3.15。我在 PHP 手册中看到了这个注释：

> 自 PHP >= 5.3.11 和 >= 5.4.1 起，magic 数据库格式发生了变化。因此，升级了内部 mime 数据库。这尤其会影响读取外部魔法的代码。读取旧格式的魔法文件将不起作用。此外，mime 类型的一些文本表示也发生了变化，例如对于 PHP，将返回“PHP 脚本，ASCII 文本”而不​​是“PHP 脚本文本”。

该项目最初是使用 PHP 5.3.2 开发的。这是否意味着我的魔法数据库文件格式不正确？

如果格式错误，我在哪里可以找到更新版本的魔法数据库？或者还有什么其他解决方案？我正在使用带有 Macports 的 Mountain Lion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:55:23.227

我找到了解决方案。只是不要使用外部魔法数据库。finfo_open 将使用系统上的默认值。

# javascript - Ajax 元素的 jQuery 后期绑定不起作用

> ID：11906708
> 
> 赞同：0
> 
> 时间：2012-08-10T17:43:59.333
> 
> 标签：javascript, javascript-events, jquery

我真的被一个jQuery问题困住了，我希望有人能帮助我......

所以我在左边有一个选项列表，当你点击一个时，右边会通过 Ajax 生成一个表单。表单中有这个元素：

```
<input type="text" class="value" value="something"> 
```

我想做的是打电话

```
$(".value").tagsInput(); 
```

这是一个 jQuery 插件，当您提出问题时，它的工作方式与 SO 的“标签”输入字段非常相似。

所以我尝试了这个：

```
$(document).ready(function() {
  $(".value").on("load", function () {
    console.log("Tags Input");
    $(".value").tagsInput();
  });
}); 
```

什么都没有打印出来。我也试过这个：

```
$(document).on("change", ".value", function () {
  console.log("Tags Input");
  $(".value").tagsInput();
}); 
```

它也不起作用。我想知道我哪里做错了。谁能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:55:14.717

当输入元素失去焦点时会触发“change”事件。如果您希望在每个按键输入结束时调用 ajax，请尝试使用键盘事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:02:31.923

正如 Shabnam 所指出的，“更改”事件*不是*您想要的，因为它仅在字段模糊时才会触发。

无论如何，从插件文档看来，您不必每次按下键时都调用该函数，但它会自动附加自己的事件处理程序。

所以，也许你应该没问题：

```
$(document).ready(function() {
    $(".value").tagsInput();
}); 
```

您的`.on`处理程序将永远无法工作，因为该`load`事件仅`document`在页面准备好时才会触发。

如果您想稍微调试一下，请查看支持的回调，例如`onChange`.

**边注**

我不喜欢这个插件的编写方式，因为它`jQuery.fn`用很多函数阻塞了“全局”命名空间，而 jQuery 文档建议不要这样做（参见：[命名空间](http://docs.jquery.com/Plugins/Authoring#Namespacing)）。

**更新**

请参阅此处： http: [//jsfiddle.net/aFPHL/](http://jsfiddle.net/aFPHL/)一个此工作的示例（`.load()`为避免调用实际 URL，已对其进行了猴子补丁，但其行为与真实 URL 几乎相同）。

# apache - 用于干净 URL 的 mod_rewrite 不起作用

> ID：11906709
> 
> 赞同：0
> 
> 时间：2012-08-10T17:44:02.293
> 
> 标签：apache, .htaccess

我已经查看了 apache 服务器的每个问题和 reWriteRule 的每个示例......没有任何效果。

我只需 要将[http://beta.EXAMPLE.com/profile.php?profile_name=ntgCleaner](http://beta.EXAMPLE.com/profile.php?profile_name=ntgCleaner)更改 为 [http://beta.EXAMPLE.com/ntgCleaner](http://beta.EXAMPLE.com/ntgCleaner)

我必须查看[我的 .htaccess 文件是否正在被读取](http://jappler.com/blog/archive/2008/10/22/how-to-test-htaccess-files)并检查[是否启用了 mod_rewrite](http://lynnepope.net/check-if-mod_rewrite-enabled-on-server)并且它们都工作得很好。

出于某种原因，我遇到的例子对我不起作用。这里有一些例子。

```
RewriteEngine On
RewriteRule /(.*)$ /profile.php?username=$1 
```

,

```
RewriteEngine On 
RewriteBase /
RewriteRule ^profile\/(.*)$ ./profile.php?profileId=$1 [L,NC,QSA] 
```

和

```
Options +FollowSymlinks
RewriteEngine on
RewriteOptions MaxRedirects=10
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?profile_name=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ profile.php?profile_name=$1 
```

但这些都不起作用。这是因为我使用的是子域吗？当我完成网站时，我计划最终将子域从 BETA 切换到 www。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:20:27.897

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/?$ /profile.php?profile_name=$1 [L,QSA] 
```

您的示例中有很多不同的查询字符串，所以我不确定哪一个是您真正想要的。你有`?username=`, `?profileId=`, `?profile_name=`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:37:35.413

您必须使用条件（RewriteCond），当满足条件时，应用规则（RewriteRule）。因此，当您不使用条件时，不使用规则，因为引擎不知道要使用它。

RewriteCond 必须在 RewriteRule 之前使用，我以这种形式对 web-bots 使用它：

```
RewriteCond %{REMOTE_HOST} .googlebot.com$ [NC,OR]
RewriteCond %{REMOTE_HOST} .search.msn.com$ [NC,OR]
RewriteCond %{REMOTE_HOST} .kimsufi.com$ [NC]
RewriteRule ^.*$ /errors/404.html [F] 
```

# php - 每个用户如何在 symfony2 中拥有他的私人学说条目？

> ID：11906714
> 
> 赞同：1
> 
> 时间：2012-08-10T17:44:21.047
> 
> 标签：php, symfony, doctrine-orm

我正在 symfony2 中使用教义创建一个包含客人、场地、活动和客人类别的应用程序。仅与 symfony2 联系了 3 周，我已经完成为 sql 中的所有实体创建模式表，它们之间的依赖关系和每个实体的 crud。我的问题是理论多于实际。

我将创建一个安全包（来自书中的安全包或 FOSUserBundle）。然后我会设置三个角色：

*   行政人员
*   组织者
*   客人

每个客人都有自己的个人资料，每个组织者都将被“附加”到他的客人身上——简单地说，组织者 X 只会交流和查看客人 X-1、X-2 等 - 他将无法查看Y-1。对你来说，我问这样的问题可能看起来非常简单和有趣，但是......我是自学成才的:)

问题是：如何将活动附加到组织者及其客人？我能想象到的最简单的方法是：为每个客人、活动、类别、活动设置一个唯一的令牌（或任何自行生成的代码）并加入表格。

如果带有 token=vsfv2435r3frwf24t5grf 的客人 John 有任何事件/类别/场所，则在事件或类别或场所中找到相同的令牌并分配权限。

这听起来合乎逻辑还是愚蠢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:48:28.527

您需要查看学说关联映射（一对多，多对多等。）

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)

它们很容易设置（您可以在 Symfony 中使用注释或在您的 yml 模式文件中进行设置），并且可以让您轻松完成您所描述的事情，请查看 Symfony 数据库文档以获取更多信息

[http://symfony.com/doc/current/book/doctrine.html](http://symfony.com/doc/current/book/doctrine.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:01:08.380

您可以为他们创建交叉表`Organiser`并`Guest`指明他们参加/组织的活动。每个`Guest`人也会有交叉表`Organiser`。这样，您可以轻松地将组织者分配给客人并按其过滤（我假设客人可以参加多个活动等）。

在教义世界中，它看起来像这样：

**事件**

```
...

/**
 * @ORM\ManyToMany(targetEntity="Organiser", inversedBy="events")
 */
protected $organisers;

/**
 * @ORM\ManyToMany(targetEntity="Guest", inversedBy="events")
 */
protected $guests; 
```

**组织者**

```
...

/**
 * @ORM\ManyToMany(targetEntity="Event", mappedBy="organisers")
 */
protected $events;

/**
 * @ORM\ManyToMany(targetEntity="Guest", mappedBy="organisers")
 */
protected $guests; 
```

**客人**

```
...

/**
 * @ORM\ManyToMany(targetEntity="Event", mappedBy="guests")
 */
protected $events;

/**
 * @ORM\ManyToMany(targetEntity="Organiser", inversedBy="guests")
 */
protected $organisers; 
```

# spring - 如何避免将两个不同的 webapp 帐户与一个社交帐户连接

> ID：11906718
> 
> 赞同：0
> 
> 时间：2012-08-10T17:44:34.530
> 
> 标签：spring, spring-social

我正在使用 Spring Social 将用户应用程序帐户连接到社交帐户（Facebook 和/或 Twitter）。

事实证明，两个不同的用户帐户可能连接到同一个社交帐户。

例子：

*   我的 webapp 中的 User1 与 Facebook 帐户 #1 连接
*   我的 webapp 中的 User2 与 Facebook 帐户 #1 连接

现在这是可能的。看起来这发生在 Spring Social 内部。之后，两个帐户都无法使用社交帐户登录。

我想避免在 User2 尝试连接时将相同的社交帐户连接到不同的 webapp 用户。任何提示我该怎么做都值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:00:52.993

[此处](http://forum.springsource.org/showthread.php?129207-One-connection-to-multiple-users)提供了此问题的答案。代码示例[在这里](https://github.com/socialsignin/spring-social-security/blob/master/src/main/java/org/socialsignin/springsocial/security/signin/EnsureUniqueConnectInterceptor.java)。

简而言之，ConnectInterceptor 必须用于 ConnectController 来检查现有连接并删除当前正在创建的连接（如果它是重复的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:14:22.707

如果您使用的是 spring social 提供的默认连接控制器，则在获取用户令牌/秘密后，它将存储在数据库中。存储在数据库 spring-social 用途：

*   `org.springframework.social.connect.jdbc.JdbcConnectionRepository`
*   `org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository`

在存储到数据库之前，您可以验证项目并提供您自己的逻辑。

希望这可以帮助！

# sql - 从表格中每人获得一个值（“截止日期前的每组最新 n 组”）

> ID：11906720
> 
> 赞同：1
> 
> 时间：2012-08-10T17:44:42.503
> 
> 标签：sql, firebird, firebird1.5

在我的数据库中有一个名为“预算”的表，定义如下

```
 CREATE TABLE BUDGET (
  ID INTEGER NOT NULL,
  THERAPIST INTEGER,
  CURDATE DATE,
  ILLNESS SMALLINT,
  HOLIDAY SMALLINT);

  ALTER TABLE BUDGET ADD PRIMARY KEY (ID); 
```

该表的目的是存储治疗师每个月有权休病假和正常假期的小时数。

该表具有以下值

```
ID: 1, THERAPIST: 36, CURDATE: 01/01/2012, ILLNESS:8, HOLIDAY: 8
ID: 2, THERAPIST: 36, CURDATE: 01/07/2012, ILLNESS:8, HOLIDAY: 10
ID: 3, THERAPIST: 74, CURDATE: 01/01/2012, ILLNESS:8, HOLIDAY: 8
ID: 4, THERAPIST: 74, CURDATE: 01/03/2012, ILLNESS:8, HOLIDAY: 10 
```

我想编写一个查询，该查询返回每个治疗师一行，并带有最新数据（上述数据显示治疗师 36 在 2012 年 1 月至 6 月期间每月有权享受 8 小时假期，而从 2012 年 7 月开始，她是有权每月工作 10 小时）。换句话说，如果我对日期 31/01/2012 发出查询，我希望得到第 1 行和第 3 行；如果我针对日期 31/05/2012 发出查询，我希望返回第 1 行和第 4 行，如果我针对日期 31/08/2012 发出查询，我希望返回第 2 和第 4 行。

下面的查询给了我一个治疗师一行，但它给了我疾病和假期的最大值，这不一定是我想要的。

```
select therapist, max (illness), max (holiday)  
from budget
where curdate <= '2012-08-31'
group by therapist 
```

表格中是否应该有第五行

```
ID: 5, THERAPIST: 74, CURDATE: 01/07/2012, ILLNESS: 6, HOLIDAY: 6 
```

在 2012 年 8 月 31 日查询将返回疾病 = 8 和假期 = 10，即使它们都应该是 6。

我尝试了以下查询，但这仅返回一行

```
select therapist, illness, holiday
from budget
where curdate =
(select max (curdate) from budget b
 where b.therapist = budget.therapist
 and b.curdate <= '2012-08-31') 
```

SO上有类似的问题，但似乎都不适用于我的情况。当然，如果我可以在*没有*聚合函数的情况下使用“分组依据”，但 Firebird（和大多数 DBMS）不支持这一点，生活会更轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:27:19.597

如果我正确理解了您的问题，我认为您想要：

```
select
    b.*
from
    budget b
    join (
        select
            therapist,
            max(curdate) as maxdate
        from
            budget
        where 
            curdate <= '2012-08-31'
        group by
            therapist
    ) grouped on grouped.therapist = b.therapist and grouped.maxdate = b.curdate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:47:17.903

这本质上是一个重复数据删除问题，因为如果您尝试清理数据以使每个治疗师只有一行符合您描述的标准，您也会遇到同样的问题。这很少是简单的。

也就是说，您可以在当前情况下使用以下内容：

```
select b.id, b.therapist, t.[curdate], b.illness, b.holiday
from budget b
inner join
(
    select therapist, MAX([curdate]) as [curdate]
    from BUDGET
    where [CURDATE] <= '2012-08-31'
    group by THERAPIST
) t on b.therapist = t.therapist and b.[CURDATE] = t.[curdate] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T18:21:36.087

我认为它会是这样的：

```
select * from therapist t
join budget a
on t.therapist=a.therapist
where id in (
select first 1 ID from BUDGET b
where 
b.theraphist=t.therapist and
b.curdate <= '2012-08-31'
order by curdate desc) 
```

# c - 协调多个进程之间共享侦听套接字的接受

> ID：11906729
> 
> 赞同：1
> 
> 时间：2012-08-10T17:45:30.927
> 
> 标签：c, sockets

在多个进程之间协调侦听套接字的接受的最佳方法是什么？

我正在考虑以下两种方法之一：

*   有一个“主”进程，当轮到它开始接受连接时，它将向每个进程发送一条消息。

    所以顺序将是：

    Master 进程将令牌交给 Worker A。Worker A 接受连接，将令牌返回给 Master 进程。主进程向工人 B 提供令牌等。

*   每个进程都有一个接受线程，该线程将围绕共享互斥体旋转。锁定互斥锁，接受连接，释放锁。

有更好的想法吗？

*   当连接进入时，所有进程都会被唤醒。在接受连接之前，他们尝试锁定共享互斥锁。锁定互斥锁的人首先接受连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:38:01.253

我也认为主解决方案是不错的选择：

```
/* Process struct */
typedef struct _process_t {
    unsigned long process_id;
    struct _process_t *next;   /* next process */
    struct _process_t *prev;   /* previous process */
    struct _process_master *master_process;  /* Master process */
    int (*accepting_socket) (struct _process_t *); /* process accepet function */
    char *received_data_buffer;      /* the data received over the socket */
} process_t;

/* List of process */
typedef struct _process_list {
    process_t *head;
    process_t *tail;
    int count;
} process_list;

/* The master process */
typedef struct _process_master {
    process_list socket_listners;   /* All the process listening */
    process_list ready_listners;    /* Process ready to listen and receive*/

    ..... /* Complete this struct */
} process_master; 
```

如果您发现带有进程的解决方案很慢，您可以`threads`改用（它们共享相同的内存），但代码可能会增加复杂性并且很难跟踪错误。

由于获取互斥体的成本和所有进程之间的上下文切换，第二种解决方案并不比第一种快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:45:30.290

1）我不确定你为什么不想要多个“线程”而不是“进程”。

但是如果您需要一个工作进程池（与“工作线程”相比），那么我建议：

2）主进程绑定、监听……并接受所有传入的连接

3）使用“Unix套接字”将接受的连接从主进程传递到工作进程。

4）就“同步”而言 - 很容易。worker 只是阻止读取 Unix 套接字，直到有一个新的文件描述符可供它开始使用。

5）您可以为worker设置一个共享内存块，以将“忙/闲”状态传达给master。

这是使用“Unix域套接字”的讨论：

*   [通过 UNIX 域套接字发送文件描述符和 select()](https://stackoverflow.com/questions/4489433/sending-file-descriptor-over-unix-domain-socket-and-select)

*   [http://www.lst.de/~okir/blackhats/node121.html](http://www.lst.de/~okir/blackhats/node121.html)

史蒂文斯的“网络编程”也是一个极好的资源：

*   [http://www.amazon.com/Unix-Network-Programming-Volume-Networking/dp/0131411551/](https://rads.stackoverflow.com/amzn/click/com/0131411551)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T21:08:13.487

只是我最终使用的更新（3）：当连接进入时，所有进程都会被唤醒。在接受连接之前，他们尝试锁定共享互斥锁。锁定互斥锁的人首先接受连接。

它比来回传递令牌要快得多。

谢谢大家！

# sql - SQL 复杂更新查询

> ID：11906732
> 
> 赞同：0
> 
> 时间：2012-08-10T17:45:44.643
> 
> 标签：sql, sql-server, tsql

我需要将表列更新为该列中当前存在的相同数据，并从另一个表中的一列添加数据。有问题的表格是 3N。

我试图通过将主表中的一列中的数据合并到现有表中的列中来进行复杂的更新。

```
update Catelog.Component SET Name = p.Number 
          FROM Catelog.Part p                                JOIN 
               Catelog.ComponentPart cp ON p.ID = cp.PartID  JOIN 
               Catelog.Component c      ON cp.ComponentID = c.ID  
          where p.BrandID = 1003
          AND ct.Name='Door' + '|'+ Name; 
```

如果您注意到我正在设置的 Name 列，我正在重置该列中已经存在的数据并加上 PartNumber 前缀。

基本上，我需要在“名称”列中的现有数据前面加上零件表中的零件号。

现在 SQL 给了我一个模棱两可的错误。

另外，我认为不会按照我构建此更新的方式正确设置行。

像这样进行联合更新​​的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:51:31.100

```
UPDATE c
  SET c.Name = RTRIM(p.Number) + '|' + c.Name 
FROM Catelog.Part AS p              
INNER JOIN Catelog.ComponentPart AS cp     
  ON p.ID = cp.PartID  
INNER JOIN Catelog.Component AS c  
  ON cp.ComponentID = c.ID  
WHERE p.BrandID = 1003
  AND ct.Name = 'Door|'+ c.Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:52:12.860

```
Update  C
Set C.Name = CAST(p.Number as varchar(10)) + '|'+ C.Name
FROM Catelog.Component C
JOIN Catelog.ComponentPart cp     
    ON p.ID = cp.PartID  
JOIN Catelog.Component c  
    ON cp.ComponentID = c.ID  
where p.BrandID = 1003
AND ct.Name='Door' + '|'+ C.Name; 
```

我不确定姓氏属于哪里（来自哪个表，不清楚）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:50:00.877

你想这样做吗：

```
update Catelog.Component 
SET Name = p.Number + '|'+ Name
FROM Catelog.Part p              
JOIN Catelog.ComponentPart cp  ON p.ID = cp.PartID  
JOIN Catelog.Component c       ON cp.ComponentID = c.ID  
JOIN Catelog.Category ct       ON p.CategoryID = ct.ID
where p.BrandID = 1003
    AND ct.Name='Door'; 
```

# wxwidgets - wxLog Timestamp 过去 5 小时

> ID：11906733
> 
> 赞同：0
> 
> 时间：2012-08-10T17:45:45.670
> 
> 标签：wxwidgets

我刚刚将旧版应用程序从 wxWidgets 2.8.x 升级到 2.9.3

日志时间戳现在是过去 5 小时！

![在此处输入图像描述](../Images/e1fa748a5c02f130b9bda59c045f5c50.png)

此屏幕截图是在美国东部标准时间下午 1:40 拍摄的，如任务栏时钟显示中所示。

如果时间戳是 UTC，我不会那么介意，但它似乎在太平洋某处使用时区。

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:12:02.590

[http://trac.wxwidgets.org/ticket/14148](http://trac.wxwidgets.org/ticket/14148)似乎遇到了同样的问题。看看你是否能在这个问题上得到任何帮助。

正如仔细阅读有关该票证的讨论所建议的那样，这是 wxWidgets v2.9.3 中的一个错误，已在 v2.9.4 中修复。

# vb.net - 在 VB.NET 中保留端口的快速方法

> ID：11906734
> 
> 赞同：0
> 
> 时间：2012-08-10T17:45:50.397
> 
> 标签：vb.net, sockets, port, udpclient

我的应用程序需要保留某些端口号。我需要做的就是保留它们。我不必接收消息或任何东西。什么是最快和最简单的方法来做到这一点。我尝试了以下方法：

```
ClientNetwork.hack_port_reserver1 = New UdpClient("localhost", 2020)
ClientNetwork.hack_port_reserver2 = New UdpClient("localhost", 2220)
ClientNetwork.hack_port_reserver3 = New UdpClient("localhost", 2021)
ClientNetwork.hack_port_reserver4 = New UdpClient("localhost", 2221) 
```

但我认为这会保留一个随机端口来监听来自我指定的端口号的消息，因为当我查看端口时，我看到我的应用程序保留了端口 4702 - 4705，而我希望它保留列出的端口以上。

我知道我的应用程序不应该这样做，但我不会在一切都设计得当的蓬松编码器糖果领域工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:54:17.217

好吧，我比我想象的更接近我的答案。以下作品：

```
ClientNetwork.hack_port_reserver1 = New UdpClient(New Net.IPEndPoint(address, 2020))
ClientNetwork.hack_port_reserver2 = New UdpClient(New Net.IPEndPoint(address, 2220))
ClientNetwork.hack_port_reserver3 = New UdpClient(New Net.IPEndPoint(address, 2021))
ClientNetwork.hack_port_reserver4 = New UdpClient(New Net.IPEndPoint(address, 2221)) 
```

# ruby-on-rails - Rails 工厂女孩协会

> ID：11906735
> 
> 赞同：0
> 
> 时间：2012-08-10T17:45:52.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

我正在尝试使用 Factory Girl 与我的工厂创建关联，以便关联对象共享正确的数据以将它们匹配在一起。

当我希望它们都与对象 C 的同一个实例相关时，我遇到了对象 A 与对象 C 的一个实例相关而对象 B 与对象 C 的另一个实例相关的场景。

Factory Girl - [https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md) 使用最新版本

这是我在项目中尝试做的一个简化示例。

```
FactoryGirl.define do
        factory :neutral_position, class: FinancialAccounting::Update::Neutral::Position do
          created_at    { Time.now }
          updated_at    { Time.now }

          factory :valid_neutral_position do
            association :security, factory: :security

            factory :valid_neutral_position_with_production_record do
              association :position, factory: :position

              # This modifies the created production account record so the attributes match.
              FactoryGirl.modify do
                factory :position, class: FinancialAccounting::Position do
                  association :security, factory: :security
                end
              end
            end
          end

        end
      end 
```

请注意，我正在尝试修改关联的位置，以便它指向在 :valid_neutral_position 工厂中生成的相同安全性。此代码当前创建了两种独立的证券，因此中立头寸与一种证券相关联，而头寸工厂与另一种证券相关联。

我怎样才能做到这一点？我在整个应用程序中都看到了这个问题，因此解决这个问题将极大地改进我的应用程序测试套件并保持我的代码干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:41:10.107

实际上，在您的测试/规范中而不是工厂定义中更容易解决这个问题。

首先创建一个证券并将其分配给一个变量。

然后，在创建要依赖该安全性的对象时，将变量传递给工厂构造函数。

尽管您的示例有点复杂，但它可能如下所示：

```
specific_security = FactoryGirl.create(:security)
valid_natural_position = FactoryGirl.create(:valid_natural_position, security: specific_security)
position = FactoryGirl.create(:position, security: specific_security) 
```

通过这种方式，您可以确保在测试中以您需要的方式设置对象关系。它的另一个好处是减少了创建的对象数量，因为两个二级工厂将不再自动创建安全对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:16:18.550

我实际上采用了不同的方法。它包含在工厂中，从而导致更清洁的测试。但是，我确实看到了在您不一定需要时必须生成更多对象的不利之处。

```
FactoryGirl.define do
  factory :neutral_position, class: FinancialAccounting::Update::Neutral::Position do
    created_at    { Time.now }
    updated_at    { Time.now }

    factory :valid_neutral_position do
      has_production_position
    end

    trait :has_production_position do
      association :position, factory: :position
      security { position.security }
    end

  end
end 
```

# c# - 从静态方法访问类成员

> ID：11906737
> 
> 赞同：5
> 
> 时间：2012-08-10T17:46:00.397
> 
> 标签：c#, asp.net, static, non-static

我知道有很多线程在谈论这个，但到目前为止我还没有找到一个可以直接帮助我的情况。我有我需要从静态和非静态方法访问的类的成员。但如果成员是非静态的，我似乎无法从静态方法中找到它们。

```
public class SomeCoolClass
{
    public string Summary = "I'm telling you";

    public void DoSomeMethod()
    {
        string myInterval = Summary + " this is what happened!";
    }

    public static void DoSomeOtherMethod()
    {
        string myInterval = Summary + " it didn't happen!";
    }
}

public class MyMainClass
{
    SomeCoolClass myCool = new SomeCoolClass();
    myCool.DoSomeMethod();

    SomeCoolClass.DoSomeOtherMethod();
} 
```

您如何建议我从任何一种方法中获取摘要？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T17:48:30.507

> 您如何建议我从任何一种方法中获取摘要？

你需要传递`myCool`给`DoSomeOtherMethod`- 在这种情况下，您应该将其作为实例方法开始。

从根本上说，如果它需要该类型实例的状态，为什么要将它设为静态？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T17:48:04.640

您不能从静态方法访问实例成员。静态方法的全部意义在于它们与类实例无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T17:59:12.053

你根本不能那样做。静态方法不能访问非静态字段。

您可以使`Summary`静态

```
public class SomeCoolClass
{
    public static string Summary = "I'm telling you";

    public void DoSomeMethod()
    {
        string myInterval = SomeCoolClass.Summary + " this is what happened!";
    }

    public static void DoSomeOtherMethod()
    {
        string myInterval = SomeCoolClass.Summary + " it didn't happen!";
    }
} 
```

或者您可以将 SomeCoolClass 的实例传递给 DoSomeOtherMethod 并`Summary`从您刚刚传递的实例中调用：

```
public class SomeCoolClass
{
    public string Summary = "I'm telling you";

    public void DoSomeMethod()
    {
        string myInterval = this.Summary + " this is what happened!";
    }

    public static void DoSomeOtherMethod(SomeCoolClass instance)
    {
        string myInterval = instance.Summary + " it didn't happen!";
    }
} 
```

无论如何，我真的看不到你想要达到的目标。

# python - 简单的 Python 导入

> ID：11906740
> 
> 赞同：0
> 
> 时间：2012-08-10T17:46:30.937
> 
> 标签：python, import

我有一个简单的 Python 导入问题。我有一个正在导入模块**B的模块***（我们称之为**A**）*。模块 B 导入了许多其他模块 C、D、E、F 等。我希望模块 A 能够使用模块 C、D、E、F 等。有没有简单的方法可以做到这一点？我不想直接从 A 导入 C、D、E、F 等。

 **我想要完成的是为编写模块 A 的脚本开发人员提供一个 API。所以，我希望模块 A 只需要包含模块 B，它是 API 的主要入口点，并在API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:55:06.937

你可以做...

```
from B import * 
```

...在模块 A 内（尽管您需要确保模块 B 内没有其他任何东西与模块 A 内的任何东西同名，否则您将遇到命名空间冲突）。

一旦你这样做了，你可以做...

```
C.blah()
D.testing.meh() 
```

...像往常一样，在模块 A 内。

或者，更好的解决方案是在模块 A 中执行以下操作：

```
import B

B.C.blah()
B.D.testing.meh() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:58:21.977

您可以`from ... import *`在 B 中使用。此后，来自 C、D 的所有定义都将在 B 命名空间中可用。但是这种解决方案对于大量代码并不总是很方便，它会导致混乱。

一个.py：

```
import b
b.foo() 
```

b.py：

```
from c import *
from d import * 
```

c.py：

```
def foo():
    pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T06:28:40.060

您可以`from ... import *`在 A 和 B 文件中使用。在此之后，可以使用 B 或 C 或 D 中的所有定义而不会混淆。

一个.py：

```
from B import *
fun_c() 
```

B.py：

```
from C import * 
```

C.py：

```
def fun_c():
    pass 
```**

# performance - Boost.Variant 与虚拟接口性能

> ID：11906741
> 
> 赞同：10
> 
> 时间：2012-08-10T17:46:39.523
> 
> 标签：performance, boost, interface, virtual, variant

我正在尝试测量使用 Boost.Variant 和使用虚拟接口之间的性能差异。例如，假设我想统一增加不同类型的数字，使用 Boost.Variant 我将使用 boost::variant over int 和 float 以及一个增加每个数字的静态访问者。使用类接口，我将使用一个纯虚拟类 number 和 number_int 和 number_float 类，它们派生自它并实现“增量”方法。

根据我的测试，使用接口比使用 Boost.Variant 快得多。我在底部运行代码并收到以下结果：
Virtual: 00:00:00.001028
Variant: 00:00:00.012081

你认为为什么会有这种差异？我认为 Boost.Variant 会快很多。

** 注意：通常 Boost.Variant 使用堆分配来保证变体总是非空的。但是我在 Boost.Variant 文档上读到，如果 boost::has_nothrow_copy 为真，那么它不会使用堆分配，这应该会使事情变得更快。对于 int 和 float boost::has_nothrow_copy 为真。

这是我用于衡量这两种方法的代码。

```
#include <iostream>

#include <boost/variant/variant.hpp>
#include <boost/variant/static_visitor.hpp>
#include <boost/variant/apply_visitor.hpp>

#include <boost/date_time/posix_time/ptime.hpp>
#include <boost/date_time/posix_time/posix_time_types.hpp>
#include <boost/date_time/posix_time/posix_time_io.hpp>

#include <boost/format.hpp>

const int iterations_count = 100000;

// a visitor that increments a variant by N
template <int N>
struct add : boost::static_visitor<> {
    template <typename T>    
    void operator() (T& t) const {
        t += N;
    }
};

// a number interface
struct number {        
    virtual void increment() = 0;
};

// number interface implementation for all types
template <typename T>
struct number_ : number {
    number_(T t = 0) : t(t) {}
    virtual void increment() {
        t += 1;
    }
    T t;
};

void use_virtual() {
    number_<int> num_int;
    number* num = &num_int;

    for (int i = 0; i < iterations_count; i++) {
        num->increment();
    }
}

void use_variant() {
    typedef boost::variant<int, float, double> number;
    number num = 0;

    for (int i = 0; i < iterations_count; i++) {
        boost::apply_visitor(add<1>(), num);
    }
}

int main() {
    using namespace boost::posix_time;

    ptime start, end;
    time_duration d1, d2;

    // virtual
    start = microsec_clock::universal_time();
    use_virtual();
    end = microsec_clock::universal_time();

    // store result
    d1 = end - start;

    // variant
    start = microsec_clock::universal_time();
    use_variant();
    end = microsec_clock::universal_time();

    // store result
    d2 = end - start;

    // output
    std::cout << 
        boost::format(
            "Virtual: %1%\n"
            "Variant: %2%\n"
        ) % d1 % d2;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T17:59:29.900

对于那些感兴趣的人，在我有点沮丧之后，我将选项 -O2 传递给了编译器，并且 boost::variant 比虚拟调用要快得多。
谢谢

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-29T15:23:41.873

很明显，-O2 减少了变体时间，因为整个循环都被优化掉了。更改实现以将累积的结果返回给调用者，这样优化器就不会删除循环，您将得到真正的区别：

*输出：*
虚拟：00:00:00.000120 = 10000000
变体：00:00:00.013483 = 10000000

```
#include <iostream>

#include <boost/variant/variant.hpp>
#include <boost/variant/static_visitor.hpp>
#include <boost/variant/apply_visitor.hpp>

#include <boost/date_time/posix_time/ptime.hpp>
#include <boost/date_time/posix_time/posix_time_types.hpp>
#include <boost/date_time/posix_time/posix_time_io.hpp>

#include <boost/format.hpp>

const int iterations_count = 100000000;

// a visitor that increments a variant by N
template <int N>
struct add : boost::static_visitor<> {
    template <typename T>
    void operator() (T& t) const {
        t += N;
    }
};

// a visitor that increments a variant by N
template <typename T, typename V>
T get(const V& v) {
    struct getter : boost::static_visitor<T> {
        T operator() (T t) const { return t; }
    };
    return boost::apply_visitor(getter(), v);
}

// a number interface
struct number {
    virtual void increment() = 0;
};

// number interface implementation for all types
template <typename T>
struct number_ : number {
    number_(T t = 0) : t(t) {}
    virtual void increment() { t += 1; }
    T t;
};

int use_virtual() {
    number_<int> num_int;
    number* num = &num_int;

    for (int i = 0; i < iterations_count; i++) {
        num->increment();
    }

    return num_int.t;
}

int use_variant() {
    typedef boost::variant<int, float, double> number;
    number num = 0;

    for (int i = 0; i < iterations_count; i++) {
        boost::apply_visitor(add<1>(), num);
    }

    return get<int>(num);
}
int main() {
    using namespace boost::posix_time;

    ptime start, end;
    time_duration d1, d2;

    // virtual
    start = microsec_clock::universal_time();
    int i1 = use_virtual();
    end = microsec_clock::universal_time();

    // store result
    d1 = end - start;

    // variant
    start = microsec_clock::universal_time();
    int i2 = use_variant();
    end = microsec_clock::universal_time();

    // store result
    d2 = end - start;

    // output
    std::cout <<
        boost::format(
            "Virtual: %1% = %2%\n"
            "Variant: %3% = %4%\n"
        ) % d1 % i1 % d2 % i2;
} 
```

# http - Jboss AS7 会话超时配置

> ID：11906742
> 
> 赞同：1
> 
> 时间：2012-08-10T17:46:43.860
> 
> 标签：http, jboss7.x, session-timeout

我希望你能帮助我，我正在从 JBoss 5 迁移到 7，我需要配置 http 会话超时，因为我必须在客户端长时间上传期间保持会话。你知道怎么做吗？在 JBoss 5 中，我在 deployers/jbossweb.deployer/web.xml 中配置了它。但在 AS7 版本中似乎有所不同。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:32:56.037

简短的版本似乎是在 JBoss AS 7 中你不能全局配置会话超时，至少在 7.1.1.Final 和据我所知。

`web.xml`而是在您的个人部署中配置它。有关设置它的指导`web.xml`，请参见[http://www.mkyong.com/servlet/how-to-configure-the-session-timeout-in-servlet/](http://www.mkyong.com/servlet/how-to-configure-the-session-timeout-in-servlet/)

# qt - 如何在不使用绝对路径的情况下在 Qt Creator 中为影子构建指定构建目录？

> ID：11906744
> 
> 赞同：14
> 
> 时间：2012-08-10T17:46:48.213
> 
> 标签：qt, qt-creator, qmake

绝对路径是荒谬的。我们所需要的——顺便说一句，我们被允许的所有东西——是使用与包含 .pro 文件的文件夹在同一级别上的文件夹进行影子构建。否则有错误。

但是您不能只指定`../mingw_debug`例如。是的，它是相对路径，但相对于什么？原来它是相对于 Qt Creator 的当前目录的，这完全没有意义。

`%{sourceDir}`也无济于事。`%{sourceDir}/../mingw_debug`至少在 Windows 上不起作用。如果有办法从 sourceDir 中提取父文件夹！

有人知道解决问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-08T10:33:06.603

至少在 Qt Creator 3.6.1 中，这是固定的——相对路径工作得很好。解析的完整路径显示在工具提示中。不知道这几年什么时候修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:20:38.093

不完全是 qt-creator 定义的影子构建，但我使用以下内容来获得一个整洁的构建结构。

摘自我为多个目标以及测试模式构建的库的配置文件。

```
TARGET = ../lib/common
message("libcommon:")

contains(CONFIG,test){
  message("Building Test")
  DESTDIR = test
  TARGET = $$TARGET-test
}else{
  message("Building Program")
  DESTDIR = program
  TARGET = $$TARGET
}

contains(MEEGO_EDITION,harmattan){
  message("Maemo Harmattan")
  DESTDIR = $$DESTDIR-maemo6
  TARGET = $$TARGET-maemo6
  DEFINES += MAEMO MAEMO6
}
unix:!maemo5:!contains(MEEGO_EDITION,harmattan){#desktop
  message("Desktop")
  DESTDIR = $$DESTDIR-desktop
  TARGET = $$TARGET-desktop
}

contains(CONFIG,test){
  TEMPLATE = app
  SOURCES += $$files(src_test/main.cpp)
  HEADERS += $$files(src_test/*.h)
  INCLUDEPATH += src_test
}else{
  TEMPLATE = lib
  CONFIG += staticlib
}

CONFIG(debug, debug|release) {
  message("Debug")
  DESTDIR = $$DESTDIR-debug
  CONFIG += debug
  DEFINES += DEBUG
  TARGET = $$TARGET-debug
}else{
  message("Release")  
  //DEFINES += QT_NO_DEBUG_OUTPUT
  DESTDIR = $$DESTDIR-release
  TARGET = $$TARGET-release
}
MOC_DIR = build/$${DESTDIR}/moc
OBJECTS_DIR = build/$${DESTDIR}/obj
UI_DIR = build/$${DESTDIR}/ui 
```

因此，您可以将所有对象、moc、gui 文件放在不同的目录（例如 libcommon/build/program-desktop-debug/moc）中，并且将二进制文件放在同一个目录中，但名称不同。要触发一个构建或另一个构建，您只需在构建目标中设置一个 CONFIG+=。最好的是这个结构只依赖于 pro 文件，你可以把它的一部分放在一个 common.pri 中，并将它用于你的所有项目。不再需要影子构建配置。顺便说一下，pro 文件应该驻留在 libcommon/libcommon.pro 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T07:07:25.717

我在`*.pro`文件中使用此代码，它似乎工作正常。

```
CONFIG(debug, debug|release){
    DESTDIR=$$shadowed($$ROOT_PWD)/debug
}else{
    DESTDIR=$$shadowed($$ROOT_PWD)/release
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T11:07:15.027

有几件事可用于使其易于管理：

`$$_PRO_FILE_PWD_`(version >=4.5) 变量包含当前正在读取的 pro 文件的目录。

使用`.qmake.cache`项目根目录下的文件，并为该目录定义一个变量：

`PROJECT_DIR = $$PWD`

然后使用它从根目录开始导航。

# iphone - UITableView 滚动到最后一个单元格只显示一半的单元格

> ID：11906750
> 
> 赞同：3
> 
> 时间：2012-08-10T17:47:22.130
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想滚动到包含自定义单元格的表格视图的底部。

这是我用来滚动的代码：

```
NSIndexPath *lastMessage = [NSIndexPath indexPathForRow:[self.conversation.messages count]-1 inSection:0];
[self.messageTable scrollToRowAtIndexPath:lastMessage atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

这会滚动视图；但是只有最后一个单元格的最顶部是可见的，大约 3/4 的单元格仍然在我必须手动向下滚动到的折叠下方。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T19:25:19.280

原来是时间问题。当我从 viewdidload（contentsize 为 0）调用该方法时，tableview 尚未完全呈现。不过，在 viewDidAppear 中调用此方法效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:36:04.557

似乎 UITableView 对您的单元格有多大感到困惑。将`rowHeight`UITableView 上的属性设置为自定义单元格的高度。

# .htaccess - 重定向规则不起作用

> ID：11906752
> 
> 赞同：0
> 
> 时间：2012-08-10T17:47:26.977
> 
> 标签：.htaccess, rewrite, rule

我正在尝试将 wordpress 默认登录 (wp-logiin.php) url 重定向到登录，但不知何故它不起作用。我以前从未做过这个 .htaccess 重写规则，所以不知道它是如何工作的。

```
# BEGIN WordPress
RewriteRule ^signin$ http://localhost/newsite/wp-login.php [NC,L,R]
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /newsite/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /newsite/index.php [L]
</IfModule>

# END WordPress 
```

大大大大谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:33:19.190

尝试阅读手册 :) [http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

首先，如果要使用“重写”，必须先定义条件，然后是规则，如果条件满足则使用规则。例如：

```
RewriteCond %{HTTP_USER_AGENT} ^facebookexternalhit [OR,NC]
RewriteCond %{HTTP_USER_AGENT} ^Zeus [NC]
RewriteRule ^.* /errors/404.html [F] 
```

* * *

```
RewriteRule ^signin$ http://localhost/newsite/wp-login.php [NC,L,R]<br> 
```

在没有定义 RuleCondition 的情况下使用 RewriteRule，因此恕我直言，永远不会使用此规则。

* * *

```
RewriteCond %{REQUEST_FILENAME} !-f<br>
RewriteCond %{REQUEST_FILENAME} !-d<br>
RewriteRule . /newsite/index.php [L]<br> 
```

正如手册所说**的“模式是与 perl 兼容的正则表达式”。**，因此单个“。” 因为模式意味着一个字符。因此，如果请求文件名是“test.txt”，它将用“/newsite/index.php”替换每个字母（8 个字符 = 8 次重复）。
正确的版本是：RewriteRule ^.*$ /newsite/index.php [L]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:04:48.227

您将登录重定向到 localhost，因此除非您使用运行 wordpress 站点的同一台计算机上的浏览器，否则您可能会遇到连接错误。尝试从您的规则中删除 http:// 位：

```
RewriteRule ^signin$ /newsite/wp-login.php [NC,L,R] 
```

# http - 黑莓 http 请求不起作用

> ID：11906753
> 
> 赞同：1
> 
> 时间：2012-08-10T17:47:28.353
> 
> 标签：http, blackberry

> **可能重复：**
> [无法在黑莓设备中连接到互联网？](https://stackoverflow.com/questions/11770789/unable-to-connect-to-internet-in-blackberry-device)

我正在尝试发送一个 http 请求并通过黑莓获得响应。我使用了以下代码片段。

```
String url="http://www.google.lk/";
HttpConnection con = null;
InputStream is = null;

try {
    con = (HttpConnection) Connector.open(url);
    int responseCode = con.getResponseCode();    // LINE X
    Dialog.alert(String.valueOf(responseCode ));
}
catch(Exception e){
    Dialog.alert(e.getMessage());
} 
```

但代码永远不会通过`LINE X`。没有错误。它只是等待并最终超时。可能是什么问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:11:30.857

您需要告诉 Http Request 您的连接类型。

使用此代码访问连接类型

```
 public static String getConnectionString() {

    String connectionString = null;

    // Simulator behaviour is controlled by the USE_MDS_IN_SIMULATOR
    // variable.
    if (DeviceInfo.isSimulator()) {

        connectionString = ";deviceside=true";
    }

    // Wifi is the preferred transmission method
    else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {

        connectionString = ";interface=wifi";
    }

    // Is the carrier network the only way to connect?
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {

        String carrierUid = getCarrierBIBSUid();

        if (carrierUid == null) {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP
            // network

            connectionString = ";deviceside=true";
        } else {
            // otherwise, use the Uid to construct a valid carrier BIBS
            // request

            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }

    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {

        connectionString = ";deviceside=false";
    }

    // If there is no connection available abort to avoid hassling the user
    // unnecssarily.
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        connectionString = "none";

    }

    // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...
    else {

        connectionString = ";deviceside=true";
    }

    return connectionString;

    }

    /**
     * Looks through the phone's service book for a carrier provided BIBS
     * network
     * 
     * @return The uid used to connect to that network.
     */
     private synchronized static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase()
                    .indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }

    return null;
} 
```

利用

```
con = (HttpConnection) Connector.open(url + getConnectionString()); 
```

# iphone - 在objective-c iphone游戏中一个接一个地放置两个背景？

> ID：11906754
> 
> 赞同：2
> 
> 时间：2012-08-10T17:47:31.220
> 
> 标签：iphone, background, game-physics

嗨，我正在创建一个 iphone 游戏

在我的游戏层中，我有两个相同的背景图像，但我希望它们一个接一个。

一旦游戏动物（例如企鹅）穿过第一个背景，我希望第一个背景在第二个背景之后 - 成为一个连续的背景，直到游戏结束。

我已经尝试了一切——for循环、while循环等，但似乎没有任何效果

有谁知道我该怎么做？

感谢您为我提供的任何帮助。

经过多次不同的尝试，这就是我迄今为止所拥有的一切

```
- (id) init
{
    if((self = [super init]))
    {
        for ( int x = 0; x < 10000000; ++x)
        {
            CCSprite *bg = [CCSprite spriteWithFile:@"level1.png"];
            [bg setPosition:ccp(160,240)];
            ccTexParams params = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
            [bg.texture setTexParameters:&params];
            [self addChild:bg z:0];

            CCSprite *bg2 = [CCSprite spriteWithFile:@"level1.png"];
            [bg2 setPosition:ccp(320,480)];
            ccTexParams param = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
            [bg2.texture setTexParameters:&param];
            [self addChild:bg z:0];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:51:13.350

如果背景相同，您实际上不需要 2 张图像，您只需设置一张的纹理矩形位置，它就会不断移动。如果您在计时器或更新方法中调用 moveBackground，它将不断滚动。

```
-(void)init
{
    if((self=[super init]))
    {
        background = [CCSprite spriteWithFile:@"background.png"]; 
        ccTexParams params = {GL_LINEAR,GL_LINEAR,GL_REPEAT,GL_REPEAT};
        [background.texture setTexParameters:&params];
        [self addChild:background z:0];
    }
}

-(void)moveBackground
{
    // Scroll background 5 pixels to the left
    int speed = 5;
    background.textureRect = CGRectMake(background.textureRect.origin.x-speed, 
                                        background.textureRect.origin.y, 
                                        background.textureRect.size.width, 
                                        background.textureRect.size.height);
} 
```

# asp.net - IIS6 不受 powershell 支持，升级需要花钱。备择方案？

> ID：11906755
> 
> 赞同：0
> 
> 时间：2012-08-10T17:47:35.840
> 
> 标签：asp.net, deployment, iis-7, iis-6

作为 .NET 部署过程的一部分，我们希望在 IIS 上创建一个新网站。这个想法是能够在使网站上线之前运行另一组冒烟测试 - 加上如果出现问题能够立即回滚到以前的版本。我们希望将这一切与 Jenkins 联系起来。

虽然 IIS7 拥有一整套工具，可以让我们通过 PowerShell 组合并配置一个新网站，但 IIS6 却没有这样的奢侈。

虽然升级到 IIS7 显然可以解决我们的问题，但我们的服务器目前在 Windows 2003 上运行。

有没有办法在 IIS6 中做我们想做的事？我们是否以错误的方式处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:50:33.677

IIS6 配置存储在 2 个 xml 文件中，[MetaBase.xml 和 MSSchema.xml 位于 %SystemRoot%\System32\Inetsrv](http://support.microsoft.com/kb/324277)中。

检查有关用于管理 IIS 站点、应用程序池等的可用脚本的这些链接：

*   [Internet 信息服务 (IIS) 6.0 资源工具包工具](http://www.microsoft.com/en-us/download/details.aspx?id=17275)
*   [使用脚本管理 IIS 配置 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/1805162e-6ac5-4a98-9a08-919c4c10827d.mspx?mfr=true)
*   [在 IIS 6.0 (IIS 6.0) 中从命令行管理服务器](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/b3dd4a96-4b4d-4a49-926e-581f8bf081cd.mspx?mfr=true)
*   [如何在 IIS 6.0 中使用命令行脚本管理网站和 Web 虚拟目录](http://support.microsoft.com/kb/816568)

关于默认页面、.NET 版本等网站的配置，我在 Technet 上找不到任何脚本。但如果它在配置 xml 中，我认为您可以为此创建一些命令行工具。

# python - 如何在显示绘图/图形时继续执行 python 脚本？

> ID：11906756
> 
> 赞同：6
> 
> 时间：2012-08-10T17:47:53.873
> 
> 标签：python, matplotlib

> **可能重复：**
> [有没有办法分离 matplotlib 图以便计算可以继续？](https://stackoverflow.com/questions/458209/is-there-a-way-to-detach-matplotlib-plots-so-that-the-computation-can-continue)

我使用 python 和 matplotlib 进行科学编程。但每当我使用命令`show()`显示绘图时，脚本就会停在那里。我必须关闭图形窗口才能继续执行脚本。有没有办法在图形窗口打开时保持脚本运行，就像在 Matlab 中一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:53:18.023

听起来只有一个线程在运行，所以脚本的其余部分在 show 函数返回之前无法继续，直到图形关闭才会发生。在新创建的线程中调用该显示函数应该相对简单，这将允许脚本的其余部分继续运行。我会研究`threading`python 模块。

# google-bigquery - 允许 bq 工具连接到互联网的代理配置在哪里？

> ID：11906757
> 
> 赞同：1
> 
> 时间：2012-08-10T17:47:56.590
> 
> 标签：google-bigquery

尝试使用 bq 工具进行身份验证时失败。原因是它无法访问 googleapis.com 域。我需要通过代理，但我不确定需要在哪里设置。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:57:50.373

我认为 BigQuery 工具目前不支持代理服务器。底层的 httplib2 库确实有支持，但您需要修改 bq 客户端的代码才能使用它。

即，这里： [http ://code.google.com/p/google-bigquery-tools/source/browse/bq/bigquery_client.py#321](http://code.google.com/p/google-bigquery-tools/source/browse/bq/bigquery_client.py#321)

您应该能够像这样传递参数： `httplib2.Http(proxy_info = httplib2.ProxyInfo(socks.PROXY_TYPE_SOCKS5, 'localhost', 1080))`

更多信息在这里： [http ://code.google.com/p/httplib2/wiki/Examples](http://code.google.com/p/httplib2/wiki/Examples)

我正在研究我们（谷歌）是否可以在本地添加代理支持。理想情况下，httplib2 库也会寻找环境变量或类似的变量来确定代理设置。我已经联系了作者。

# maven - mvn 与依赖相反：get? 如何设置授权？

> ID：11906760
> 
> 赞同：0
> 
> 时间：2012-08-10T17:48:02.717
> 
> 标签：maven

我的任务是编写脚本以与 Nexus/Maven 交互。我在 Maven 中使用的文件是放置在那里的 XML 文件，其特定想法是它们将被 shell 脚本使用。本质上，这些文件是另一个应用程序的配置。

我已经完成了从存储库中提取文件的脚本，但是在将文件放入存储库时遇到了问题。要提取文件，我使用插件依赖项：get。

我需要的或多或少与该插件相反。将使用文件的新版本更新存储库的一种。我认为“mvn deploy:deploy-file”是我需要使用的。那会奏效吗？

如果是这样，那么我遇到的下一个问题是我似乎无法弄清楚如何设置授权。我有一个设置文件，其中定义了一个服务器，其中包含正确的授权信息，但是服务器和存储库（或 URL？）之间的链接丢失并且授权没有正确执行。

如何将存储库 URL 连接到 settings.xml 文件中的服务器信息，以便授权 mvn 执行正确的操作？（我不知道 Maven 的 .pom 文件在哪里，并且可能没有更改它的权限。）

谢谢，

肖恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:20:16.983

`deploy:deploy-file`是正确的。与`-Durl=http://repo:port/path`,一起使用`-DrepositoryId=server-whatever`。您`settings.xml`需要包含

```
 <servers>
    <server>
      <id>server-whatever</id>
      <username>demo</username>
      <password>demo</password>
    </server>
  </servers> 
```

服务器 ID`server-whatever`与`repositoryId`参数匹配的位置。

话虽如此，我会质疑 Maven 是否适合这一点。它是为二进制工件而不是配置而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:08:32.533

问题出在 -Durl 选项中。

使用dependency:get 插件时，URL 类似于：

```
-Durl=http://companymavenrepo 
```

这对于依赖插件来说效果很好。

但是，当尝试使用部署插件将内容放入存储库时，这还不够。URL 必须包含 maven 服务器和放置工件的确切存储库。（我的术语可能不正确。）我访问了我们的 Nexus/Sonatype 网页，查看了存储工件的确切存储库，然后使用了如下内容：

```
-Durl=http://companymavenrepo/nexus/content/repositories/this_maven_repo 
```

这解决了授权问题，我能够毫无问题地将文件添加到存储库中。

（如果我发布了我尝试使用的两个 mvn 命令行，这可能更容易让其他人看到。另一方面，当您在一个命令行中使用具有特定值的 -Durl 选项并且它似乎也是合理的工作，它将在另一个命令行中保持不变。）

肖恩。

# java - java restartApplication 方法只重启一次？

> ID：11906769
> 
> 赞同：0
> 
> 时间：2012-08-10T17:48:42.057
> 
> 标签：java, dynamic-data, application-restart

我试图使用在堆栈溢出时发现的 restartApplication 方法，但由于某种原因，它只会重新启动我的应用程序一次。例如，在下面这个简单的 JOptionPane 程序中，如果用户输入字母“a”，它将重新启动程序。一旦程序重新启动，如果用户再次输入“a”，它就会终止执行。我怎样才能让它不断地重新启动？

我添加了一些 println() 语句以查看是否可以获得更多信息，它只是确认程序在我第二次输入字母“a”后立即结束。

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;

import javax.swing.JOptionPane;

public class JOptionTest{
public static void restartApplication()
{
  final String javaBin = System.getProperty("java.home") + File.separator + "bin" + File.separator + "java";
  final File currentJar = new File("C:\\Documents and Settings\\My Documents\\hello3.jar");//UpdateReportElements.class.getProtectionDomain().getCodeSource().getLocation().toURI());

  /* is it a jar file? */
  if(!currentJar.getName().endsWith(".jar"))
    return;

  /* Build command: java -jar application.jar */
  final ArrayList<String> command = new ArrayList<String>();
  command.add(javaBin);
  command.add("-jar");
  command.add(currentJar.getPath());

  final ProcessBuilder builder = new ProcessBuilder(command);
  try {
    builder.start();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
  System.exit(0);
}

public static void main(String[] args){
    String str = JOptionPane.showInputDialog(null, "Enter some text",1);
    System.out.println(str);
    //String a= "a";
    if (str.equals("a")){
        System.out.println(str+ "right about to restart");
        restartApplication();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:57:16.120

看到这条线了吗？

> System.exit(0);

您正在调用 restartApplication 一次，当它结束时，您退出 java 进程。

如果您想连续重新启动，请删除此行并可能永远迭代：

```
 public static void restartApplication()
 {
  while(true){

       final String javaBin = System.getProperty("java.home") + File.separator + "bin" + File.separator + "java";
       final File currentJar = new File("C:\\Documents and Settings\\XBBKKYL\\My      Documents\\hello3.jar");//UpdateReportElements.class.getProtectionDomain().getCodeSource().get           Location().toURI());

      /* is it a jar file? */
     if(!currentJar.getName().endsWith(".jar"))
       return;

   /* Build command: java -jar application.jar */
    final ArrayList<String> command = new ArrayList<String>();
    command.add(javaBin);
    command.add("-jar");
    command.add(currentJar.getPath());

    final ProcessBuilder builder = new ProcessBuilder(command);
    try {
        builder.start();
    } catch (IOException e) {
       e.printStackTrace();
    }
  }
} 
```

我没有测试过，这只是一个想法

# html - KML 文件在 Google API 中无法正常工作

> ID：11906770
> 
> 赞同：0
> 
> 时间：2012-08-10T17:48:59.540
> 
> 标签：html, google-maps, kml

我正在将 KMZ 文件映射到谷歌地图。所以我有一个 KMZ 文件的两个副本。但是被复制的那个正在工作，而原来的没有工作。两个文件都是一样的

========== 复制的文件代码 ==============

```
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB-fWo4fKidjcdsWOEeCORH8adp8JMV-RE&sensor=true">
    </script>
    <script type="text/javascript">
        var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
        function initialize() {
            var mapOptions = {
                zoom: 11,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

            var kmlLayer = new google.maps.KmlLayer("http://www.udayan2k12.com/shape/mmn.kmz");
            kmlLayer.setMap(map);
        }
        function loadScript() {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
            'callback=initialize';
        document.body.appendChild(script);
        }

        window.onload = loadScript();
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:43%; height:49%"></div>
  </body>
</html> 
```

但如果我更换它

```
var kmlLayer = new google.maps.KmlLayer("http://www.udayan2k12.com/shape/BMC Boundary.kmz");
            kmlLayer.setMap(map); 
```

这没用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:32:55.747

你需要 URLEncode 因为你有一个空间 - 试试[http://www.udayan2k12.com/shape/BMC%20Boundary.kmz](http://www.udayan2k12.com/shape/BMC%20Boundary.kmz)

# java - QueryDSL 简单查询不会转换为对象

> ID：11906771
> 
> 赞同：3
> 
> 时间：2012-08-10T17:49:06.253
> 
> 标签：java, querydsl

我正在针对 MySql 中的 World 数据库测试 QueryDSL。我可以将数据作为列表检索，但无法将其作为列表返回。我正在通过 SQL 查询，仅此而已。这就是我所拥有的。

```
private void getSomething(Connection connection) {
  QCountry country = QCountry.country;
  SQLTemplates dialect = new HSQLDBTemplates(); 
  SQLQuery query = new SQLQueryImpl(connection, dialect);

  //List<Object[]> countries = query.from(country).list(country.all());
  List<QCountry> countries = query.from(country).list(country);

  System.out.println(countries);
  try {
    connection.close();
  } catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }
} 
```

我收到此错误： `java.lang.IllegalArgumentException: RelationalPath based projection can only be used with generated Bean types`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:41:03.220

**您需要按照Bean 类生成**下的[http://blog.mysema.com/2011/01/querying-in-sql-with-querydsl.html](http://blog.mysema.com/2011/01/querying-in-sql-with-querydsl.html)中的描述生成 bean 类型。

# ruby-on-rails-3 - 除非在 Rails 控制器中声明？

> ID：11906772
> 
> 赞同：1
> 
> 时间：2012-08-10T17:49:07.557
> 
> 标签：ruby-on-rails-3, controller, ip, limit, vote

我的 Rails 3 应用程序控制器中有以下代码：

```
 def like
    @suggestion = Suggestion.find(params[:id])
    @suggestion.voteip = request.env['REMOTE_ADDR']
    @suggestion.update_attribute(:votes, @suggestion.votes + 1)
    redirect_to suggestions_url
  end

  def dislike
    @suggestion = Suggestion.find(params[:id])
    @suggestion.voteip = request.env['REMOTE_ADDR']
    @suggestion.update_attribute(:votes, @suggestion.votes - 1)
    redirect_to suggestions_url
  end 
```

如您所见，代码将投票整数递增/递减 1，并将用户 IP 地址添加到名为`voteip`.

我想要实现的是一个简单的阻止来自同一 IP 的投票连续两次。因此，例如，如果我的 IP 是`123.123.123.123`并且我对某事进行了投票，那么我就不能从同一个 IP 地址再次对相同的建议（向上或向下）投票。

这是一种非常简单且远非万无一失的限速投票方法。虽然，在将要使用的环境中，它几乎是完美的！

一旦我完成了这项工作，我计划为投票时间戳添加另一列，然后我可以做一些事情，比如只允许在 5 分钟后从同一个 IP 投票。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:28:33.737

一种方法是找到具有REMOTE_ADDR ip 的最后一票。

将此添加到您的控制器中。

```
def like
  @suggestion = Suggestion.find(params[:id])
  remote_addr = request.env['REMOTE_ADDR']

  @last_vote = Suggestion.find_ip(remote_addr).last

  if @last_vote.created_at < 2.minutes.ago
    render :text => "get lost"
  else
    @suggestion.voteip = remote_addr
    @suggestion.update_attribute(:votes, @suggestion.votes + 1)
    redirect_to suggestions_url
  end
end 
```

并将其添加到您的建议模型中

```
def self.find_ip(ip)
  where('voteip = ?', "#{ip}")
end 
```

我创建了一个快速应用程序并对其进行了测试，因此它确实可以工作。当然，您可以将其更改为`2.minutes.ago`您想要的任何时间范围。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:19:04.287

投票实际上是一个单独的资源。特别是如果你想在未来实现一个更强大的系统，你会希望你的投票是一个单独的表，通过 has_many 关系。通过这种方式，可以非常容易地比较特定 ip 的最后一次投票发生的时间（用作索引，或者用户是否通过了 user_id 的身份验证）。这也允许您为 IP/用户创建投票历史。

用户/ip 有很多建议，有很多投票。只是我的两分钱。

# c# - 如何订阅 DependencyProperty 更改通知

> ID：11906774
> 
> 赞同：7
> 
> 时间：2012-08-10T17:49:09.257
> 
> 标签：c#, wpf

我有一个静态依赖属性，我需要知道它的值何时发生变化，以便我可以调用回调并在其他地方更新值。现在我不能这样做，因为回调不是静态的，而 Dependency change 事件是。

当 LostFocus 事件触发时，我目前正在使用它，但我更希望在发生更改时将其连接起来。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T17:52:07.480

依赖属性更改通知传入对象。您可以使用它映射到非静态变量：

```
static void OnThePropChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
     YourClass instance = (YourClass)obj;
     instance.ThePropChanged(args); // Call non-static

     // Alternatively, you can just call the callback directly:
     // instance.CallbackMethod(...)
}

// This is a non-static version of the dep. property changed event
void ThePropChanged(DependencyPropertyChangedEventArgs args)
{
      // Raise your callback here... 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:12:36.140

您可能还想在 DependencyProperty 和“其他地方”之间设置一个绑定，如果这只是为了在其他地方获取值。

# entity-framework - 实体框架、存储库和 Linq？只加载一个实体还是子节点？

> ID：11906784
> 
> 赞同：0
> 
> 时间：2012-08-10T17:50:35.363
> 
> 标签：entity-framework, architecture, repository, repository-pattern, poco

我是实体框架的新手，我想了解一些关于 EF、LINQ、POCO 和存储库的观点。

我们有一个使用 EF 和 POCO 访问数据库的存储库的工作解决方案。我们通过上下文在 LINQ 中进行所有查询。我们将映射添加到在应用程序启动时加载的映射类中，因为数据库/表已经存在。

如果我有一个商业案例，我需要为特定公司计算员工为孩子购买的玩具数量。

我将如何建立存储库/存储库？

A：用一个存储库调用公司的所有员工，然后在服务层再次为每个员工的孩子调用另一个存储库，等等？

B：调用一个存储库，它会将所有员工、孩子和玩具归还给我公司？

A 在我看来更干净，我可以更频繁地重用存储库。但是 B 接缝更有效，但不能重复使用。更少的存储库和查询将变得越来越大。

这只是一个小例子……但我们有更大的业务案例。在这种情况下，最好的架构方法是什么？

```
class Company
{
    List<Employee> employees;
}

class Employee
{
    List<Child> children;
}

class Child
{
    List<Toy> toys;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:07:08.317

您无需调用存储库即可获取公司、员工、儿童和玩具！

> 我需要为特定公司计算员工为那里的孩子购买的玩具数量

所以你的商业案例是有一个数字，或者每个玩具有一个数字，或者每个员工有一个数字。您不需要加载所有这些实体并在您的应用程序中计算它。您只需要编写一个聚合查询（在 Linq 或 SQL 中）。这整个计算应该在数据库中运行。

如果您需要将查询隐藏在存储库后面，只需选择此业务案例所属的查询，并将查询公开为存储库的新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:08:02.743

虽然从来没有硬性规定，但对我来说，为每个聚合根（在您的示例中，公司）使用单个工作单元似乎最一致地工作以保持事物井井有条，并防止并发错误，因为它将处理所有的布线和管理你的对象。关于什么是工作单元，有[一篇很棒的 MSDN帖子。](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)那篇文章的摘录：

> 在某种程度上，您可以将工作单元视为转储所有事务处理代码的地方。工作单位的职责是：
> 
> *   管理交易。
> *   对数据库的插入、删除和更新进行排序。
> *   防止重复更新。在 Unit of Work 对象的单一用法中，代码的不同部分可能会将同一个 Invoice
>     对象标记为已更改，但 Unit of Work 类只会
>     向数据库发出单个 UPDATE 命令。
> 
> 使用工作单元模式的价值在于将其余代码从这些问题中解放出来，这样您就可以专注于业务逻辑。

有几篇关于这个的博客文章，但我发现的最好的一篇关于如何实现它是[here](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。还有一些其他的已经从这个网站[here](http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/)和[here](http://elegantcode.com/2009/12/15/entity-framework-ef4-generic-repository-and-unit-of-work-prototype/)中提到过。

> A 在我看来更干净，我可以更频繁地重用存储库。但是 B 接缝更有效，但不能重复使用。更少的存储库和查询会变得越来越大。

通用存储库在这里处理您的问题，使您可以轻松地为每个数据对象创建一个存储库，同时使其可重用且易于测试。然后，您的业务逻辑可以在您的工作单元的服务层中处理，确保您没有并发问题。

# heroku - 在自定义 Heroku buildpack 中何时何地可以在环境中使用配置变量？

> ID：11906791
> 
> 赞同：2
> 
> 时间：2012-08-10T17:51:24.400
> 
> 标签：heroku, buildpack

我知道运行期望环境完全工作的 rake 任务需要实际上可以建立数据库连接。基本上，这就是 Heroku 需要在加载环境之前运行资产管道预编译的原因。

这就是为什么需要这条线来将 rails 3.X 应用程序部署到 Cedar：

```
 config.assets.initialize_on_precompile = false 
```

现在，我正在尝试构建一个自定义构建包，该构建包需要一个 rake 任务来执行其他资产编译，以使应用程序按预期工作。这是因为我已经国际化了 JS 资产文件并使用了[https://github.com/fnando/i18n-js](https://github.com/fnando/i18n-js)

我需要跑步`rake i18n:js:export`，这需要环境。* *buildpack 中是否有任何点可以添加此调用并确保与 Rails 应用程序的数据库的连接正常工作？**加载环境是此任务的要求，我不知道如何解决它，它给出了典型的错误：

```
rake aborted!
could not connect to server: Connection refused
    Is the server running on host "127.0.0.1" and accepting
    TCP/IP connections on port 5432? 
```

自然，我可以在本地编译然后部署。但是 buildpack 似乎是以自动化方式解决此问题的正确工具。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:09:48.173

查看用户环境 Heroku 实验室功能： [https ://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

# c - C：复制一些结构会导致奇怪的行为

> ID：11906799
> 
> 赞同：0
> 
> 时间：2012-08-10T17:51:46.530
> 
> 标签：c

我有一个烦人的错误

```
rq->tickets[rq->usedContracts] = toAdd; 
```

如果我这样做： `rq->tickets[0] = toAdd`程序崩溃

如果我这样做的 `rq->tickets[1] = toAdd;`话

瓦尔格林 说

> ==19501== 使用大小为 8 的未初始化值

和

> ==19501== 大小为 8 的无效写入

对于这条线。怎么了？

```
 struct TS_element {
    int travels;
    int originalTravels;
    int cost;
    char** dates;
    int moneyLeft;
} TicketSet;

struct RQ_element {
    int usedContracts;

    struct TS_element* tickets;
} RabQav;

TicketSetStatus tsCreate(TicketSet* t, int n, int c) {
    if (n <= 0)
    return TS_ILLEGAL_PARAMETER;
    TicketSet* myTicketSet = (TicketSet*) malloc(sizeof(TicketSet));
    if (myTicketSet == NULL) {
        return TS_CANNOT_CREATE;
    }
    myTicketSet->usedTravels = 0;
    myTicketSet->originalTravels = n;
    myTicketSet->cost = c;
    myTicketSet->moneyLeft = n * c;
    char**  dates =  malloc(sizeof(char**)* (n)); //todo maybe c99 allows dynamic arrays?
    for (int i = 0; i < n; i++) {
        dates[i] =  malloc(sizeof(char)*GOOD_LENGTH+1);
        if (dates[i] == NULL) {
            free(dates);  
            free(t);
            return TS_CANNOT_CREATE;
        }
    }

    myTicketSet->dates = dates;
    *t = *myTicketSet;

    return TS_SUCCESS;
}

static void copyTicketSets(TicketSet* dest, const TicketSet* source) {

    dest->usedTravels = source->usedTravels;
    dest->originalTravels = source->originalTravels;
    dest->cost = source->cost;
    dest->moneyLeft = source->moneyLeft;

    for (int i = 0; i < source->originalTravels; i++) {
        if (NULL != source->dates[i]) {
            free(dest->dates[i]);
            dest->dates[i] = malloc(sizeof(char) * GOOD_LENGTH + 1);
            if (dest->dates[i] == NULL) {
                free(dest->dates); //todo free dates 0...i-1
                free(dest);
                return;
            }
            strcpy(dest->dates[i], source->dates[i]);
        }

    }

}
RabQavStatus rqLoadTS(RabQav* rq, TicketSet t, DateTime dt) {

    TicketSet toAdd;
    TicketSetStatus res = tsCreate(&toAdd, t.originalTravels, t.cost);
    if (res != TS_SUCCESS) {
        return RQ_FAIL;
    }

    copyTicketSets(&toAdd, &t);  
    rq->tickets[rq->usedContracts] = toAdd;
    rq->usedContracts++;
    return RQ_SUCCESS;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:02:56.403

以下是一些问题：

```
TicketSetStatus tsCreate(TicketSet* t, int n, int c) { 
```

你怎么能通过`tsCreate`一个`TicketSet*`？它*创建*一个票集。因此，在进入时不知道指向票集的指针。

```
*t = *myTicketSet; 
```

这会将 的值设置`t`为 的值`myTicketSet`。但是您想返回一个指向新票证集的指针，而不是它的值。

```
TicketSet toAdd; 
```

当此函数返回时，`toAdd`超出范围并被销毁。那不是你想要的。

# mysql - (My)SQL 查询上的“可选”WHERE 子句

> ID：11906801
> 
> 赞同：3
> 
> 时间：2012-08-10T17:51:51.037
> 
> 标签：mysql, sql, left-join, where-clause

我在 MySQL 中的 SELECT 查询有点问题，我会感谢一些指针。请随时指出我现有的答案（如果有一个我错过了）。

目前查询如下：

```
SELECT e.*, ie.aaa, ue.bbb, ue.ccc
FROM ie
LEFT JOIN e ON ie.e_id = e.e_id
LEFT JOIN ue ON ie.e_id = ue.e_id
WHERE ie.other_id = ? AND ue.unrelated_id = ?
ORDER BY ... 
```

共有三个表：**ie**、**e**和**ue**。

表**ie**和**ue**是**e**的关系，因此包含它的外键 (e_id)。**?** 表示输入参数。

问题是**ue.unrelated_id = ?** 部分。我在这里*真正*想做的是：

*   当且仅当 unrelated_id = ? 存在 ue 关系时才返回 ue.ccc。如果它不存在，我希望该字段为空。
*   即使 unrelated_id 的 ue 关系 = ? 不存在，此查询应始终返回剩余字段（即保证存在 other_id = ？）。

不幸的是，如果我删除这个 where 子句，我会得到一个“随机”的 unrelated_id 的 ue.ccc。但是如果我保留它，如果这个 unrelated_id 不存在 ue，查询将根本不会返回任何结果！我还尝试添加 OR ue.unrelated_id IS NOT NULL，但是如果 ue 表为空，这会使查询不返回任何结果。

有任何想法吗？如果您需要进一步说明，请发表评论。我应该在接下来的几个小时内迅速回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T17:55:36.203

你可以做以下两件事之一：

```
SELECT e.*, ie.aaa, ue.bbb, ue.ccc
FROM ie
LEFT JOIN e ON ie.e_id = e.e_id
LEFT JOIN ue ON ie.e_id = ue.e_id AND ue.unrelated_id = ?
WHERE ie.other_id = ? 
ORDER BY ... 
```

或者

```
SELECT e.*, ie.aaa, ue.bbb, ue.ccc
FROM ie
LEFT JOIN e ON ie.e_id = e.e_id
LEFT JOIN ue ON ie.e_id = ue.e_id
WHERE ie.other_id = ? AND (ue.unrelated_id IS NULL OR ue.unrelated_id = ?)
ORDER BY ... 
```

但是，我会使用第一个查询。

编辑：请注意，第二个查询仅在`ue.unrelated_id`不是可为空的列时才适用。

# asp.net-mvc - 包装基于 REST 的 Web 服务

> ID：11906802
> 
> 赞同：3
> 
> 时间：2012-08-10T17:51:53.080
> 
> 标签：asp.net-mvc, web-services, rest, azure

我正在设计一个将在 Microsoft Windows Azure 下在线运行的系统。一个组件是基于 REST 的 Web 服务，它实际上是一个包装器（使用代理模式），它调用业务合作伙伴的 REST Web 服务，这与 BLOB 存储有关（注意：我们没有使用 azure 存储）。大部分功能将接受请求，调用我们的合作伙伴 Web 服务，接收请求，然后将其传递回客户端。

这样做的原因有很多，但其中一个重要的原因是我们将支持三个客户端：我们的桌面应用程序（win 和 mac）、移动应用程序 (iOS) 和 Web 前端。拥有一个 API，然后我们将其发送给我们的合作伙伴，以在合作伙伴发生变化时保护我们。

我希望我们的服务支持数据传输格式的 JSON 和 XML、Web 的 JSON 以及桌面和移动设备的可能 XML（我们已经在这些产品中提供了 XML 解析器）。我们的合作伙伴也支持这两种格式。

我计划将 ASP.NET MVC 4 与 Web API 一起使用。当我设计这个时，我关心的是 C# 的静态类型检查。如果合作伙伴从数据中添加或删除元素怎么办？我们可能可以为此进行防御性编码，但我仍然感到有些担忧。此外，我们必须进行大量繁琐的编码，设置我们的 API，然后转身调用我们合作伙伴的 API。不过，它可能没有太多选择。但是，在我的脑海里，我想知道是否更动态的语言会是一个更好的选择。

我想联系一下，看看以前是否有人必须这样做，他们曾经使用过哪些技术解决方案（我不喜欢这个，现在 Azure 可以托管其他技术），以及是否有人做过类似的事情可以指出出现的任何问题。谢谢！

研究这个问题似乎只能找到专注于通过代理服务器连接 SOAP Web 服务的解决方案，而不是我在这里指的。

# bash - 当变量有空格时，如何使用 sed 将字符串替换为变量的内容？

> ID：11906803
> 
> 赞同：0
> 
> 时间：2012-08-10T17:51:56.713
> 
> 标签：bash, sed

当变量有空格时，如何使用 sed 将字符串替换为变量的内容？

例如

```
sed 's_3_4 5_g'
234 
```

返回 24 54，但是

```
replace="4 5";  sed 's_3_'$replace'_g'
234 
```

给我错误

```
sed: 1: "s_3_4": unterminated substitute in regular expression 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:55:42.020

只需引用变量扩展：

```
sed 's_3_'"$replace"'_g' 
```

# ruby-on-rails - Ruby：从键盘读取信息

> ID：11906810
> 
> 赞同：0
> 
> 时间：2012-08-10T17:52:23.383
> 
> 标签：ruby-on-rails, user-input

我最近开始学习 Ruby on Rails，我正在尝试编写一个允许通过键盘进行一些用户交互的程序。

过去，我大多只使用 Java，所以我想知道 Ruby 的 readKeyboard 方法是什么，你将如何使用它？

我的程序只是一个简单的程序，它将包含学生、课程和模块的列表，并允许用户将学生注册到课程中，并让他们加入该课程运行的模块。

我有一个名为“模块”的类，目前看起来像这样：

```
class Module
  # To change this template use File | Settings | File Templates.
  @@moduleScheme = nil

  def initialize(v)
    @val = v
  end
  # Set and get the @val object value
  def set (v)
@val = v
  end
  def get
    return @val
  end

  def addModule
    moduleName = Module.new(30)
    moduleRefNo = ran(100)
    moduleYear(4)
  end

  def addModuleToScheme
    moduleName.moduleScheme = schemeName
  end
  def removeModuleFromScheme
    moduleName.moduleScheme = nil
  end

  def queryModule

  end

end 
```

使用“queryModule”功能，我希望用户能够通过输入模块的唯一标识符来指定他们想要查询的模块。据推测，我会使用“puts”来表示这是用户需要做的事情？但是我不知道如何将用户在键盘上键入的任何内容读入程序。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:45:30.987

Ruby（就 Rails 而言）是服务器端的，因此它往往不直接参与用户交互。您将开始在前端处理它（html、javascript 等）

就逻辑而言，发布人机交互后，您要么在前端也完成此操作（Javascript），要么如果您真的需要 Ruby on Rails 来利用您偶尔对 Rails 执行 AJAX 调用（或类似调用）发送相关信息。

但是：如果用户直接在控制台上，则使用 读取输入`gets`，而不是`puts`; `puts`将打印到命令行。

# sql-server - 将以下 0 添加到插入的整数

> ID：11906811
> 
> 赞同：0
> 
> 时间：2012-08-10T17:52:25.973
> 
> 标签：sql-server

我正在将一个 3 或 4 位整数插入需要该数字为 5 位长的表中。如何在转帐时在 4 位数字后添加 0，在 3 位数字后添加前导和后跟 0？

编辑 - 这是触发器的一部分，定义如下：

```
create trigger Trig on T2 
after insert, update, delete 
as  
  -- So that @@rowcount does not get affected by trigger code     
set NoCount on  
  -- If c3 column participated in update (it most certainly did in insert)
if update(C3)
begin
  -- Insert or update triggered this operation
 if exists (select * from Inserted)
  begin
         insert into P1 (C1, C2, C3)
         select T1.C2, T1.C3, T2.C3 --INFORMATION THAT NEEDS TO BE TRANSFERRED 
         from T1
         -- Inserted is a pseudotable holding inserted/updated data
         inner join inserted T2
         on T1.C1 = T2.C2
         where T2.C4 <> 9 --DETERMINES IF RECORD NEEDS TO BE TRANSFERRED
  end
     else
     -- Separate insert for deleted records
     -- To simplify inserting additional info for deleted records only
     begin
         insert into P1 (C1, C2, C3)
         select T1.C2, T1.C3, T2.C3 --INFORMATION THAT NEEDS TO BE TRANSFERRED
         from T1
      -- deleted is a pseudotable holding deleted/updated data
         inner join deleted T2
         on T1.C1 = T2.C2
         where T2.C4 <> 9 --DETERMINES IF RECORD NEEDS TO BE TRANSFERRED
     end
 end 
```

将 T2.C3 视为引脚号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:53:46.653

为什么需要存储这个？只需将其添加到查询中或创建一个视图即可：

```
SELECT RIGHT('0' + RTRIM(Number) + '0', 5) FROM dbo.TableName; 
```

您当然可以在将值放入表中时对它们执行相同的操作（通过修改插入语句或使用触发器，如果​​您对 DML 的控制较少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:31:46.553

这可以接受吗？

```
declare @PINs as Table ( PIN Int )
insert into @PINs ( PIN ) values ( 123 ), ( 4321 ), ( 12345 ), ( 5000 )
select Left( Right( '0' + Cast( PIN as VarChar(5) ), 5 ) + '0', 5 )
  from @PINs 
```

根据您的问题陈述，它要求 PIN 值大于 99。

# php - 用于识别 URL 的速记 Preg 匹配规则

> ID：11906812
> 
> 赞同：1
> 
> 时间：2012-08-10T17:52:26.910
> 
> 标签：php, regex, preg-match

假设我有数组：

```
[test1] = '/'
[test2] = '/foo'
[test3] = '/foo/*'
[test4] = '/bar/*'
[test5] = '/baz/*/bar' 
```

什么是有效的 grep 规则，需要将这些规则转换为满足对`preg_match`输入执行功能（以规则为模式），以便返回以下输入。比如，规则需要封装什么，`*`s需要替换成什么？

```
input          :   returned
/              :   test1
/foo           :   test2
/foo/bar       :   test3
/foobar        :   none
/bar           :   test4
/bar/foo       :   test4
/barfoo        :   none
/baz/foo/bar   :   test5
/baz//bar      :   none 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:15:40.667

用。。。来代替：

```
[^/]+ 
```

这表示*非斜线字符的非空字符串*。我正在根据您的上一个示例做出假设（`/baz//bar`返回“无”）。

当然，如果需要，请避开斜线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:25:10.517

我认为从字符串中提取`path`和`filename`可能会更好：

`^(\/(?:[^\\/:*?"<>|]+\/)*)([^\\/:*?"<>|]+)*$`

第 1`path`
组： 第 2 组：`filename`

使用这些信息进行查表（例如哈希数组）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:56:36.277

最后，我做到了：

```
<?php
$urlRule = str_replace('/', '\/', $urlRule);
$urlRule = '/^('.str_replace('*', ')(.*)(', $urlRule).')$/';

if (count(preg_grep($urlRule, array($url))) > 0) { ... 
```

对于每条规则，但我确实需要包括

```
[test4] = '/bar' 
```

为了要达到

```
input          :   returned
/bar           :   test4 
```

# wordpress - 每个帖子有多个例外，带有摘录类别

> ID：11906813
> 
> 赞同：2
> 
> 时间：2012-08-10T17:52:27.737
> 
> 标签：wordpress, custom-post-type

我正在寻找一种解决方案，该解决方案允许在自定义帖子类型中每个帖子有多个摘录框，并且有一种方法可以让这些摘录具有类别。我知道我可以添加元框来提供额外的文本区域并显示该文本，但我不太确定这就是我正在寻找的。

为了澄清，我有一个用于推荐的自定义帖子类型。该帖子类型具有根据选中的类别显示在页面上的类别。有些推荐信中会包含不止一个我想使用的引用，所以我不想为同一个完整的推荐信有多个帖子，我想在同一个帖子上有几个摘录框。我希望这是有道理的，我猜它有点难以描述。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:16:06.997

我认为是的，自定义元框是您应该寻找的。它可以以编程方式完成，但使用一个好的插件将有助于快速解决这个问题（以及许多其他问题）。

使用[自定义内容类型管理器](http://wordpress.org/extend/plugins/custom-content-type-manager/)将如下所示：

# 设置自定义字段

[![设置自定义字段](../Images/353fbf3190f52f66820035fcd9d787b7.png)](https://i.stack.imgur.com/Lwqwu.png)
^(*点击放大*)

**请注意“可*重复*”选项。**

在同一个屏幕中，还有这个：

[![设置帖子类型](../Images/77e3f10e2ddeae3f2fe19608edd6673a.png)](https://i.stack.imgur.com/RwSTQ.png)

*我使用插件创建了“推荐”CPT，但所有注册的 CPT（按主题或插件）应该已经出现在这里。*

# CPT 页面中生成的元框

[![cpt 页面中生成的元框](../Images/b6cbbbc51e691f7f0d36c94106617cf6.png)](https://i.stack.imgur.com/RmpnG.png)

# 选择

[高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)是另一个很棒的插件，但可重复选项是一个高级插件。

# c - 如何旋转 SSE/AVX 矢量

> ID：11906814
> 
> 赞同：19
> 
> 时间：2012-08-10T17:52:28.643
> 
> 标签：c, x86, sse, intrinsics, avx

我需要以尽可能少的时钟周期执行旋转操作。在第一种情况下，让我们假设`__m128i`源和目标类型：

```
来源：|| A0 || A1 || A2 || A3 ||
```

```
  目的地：|| A1 || A2 || A3 || A0 ||
```

```
dest = (__m128i)_mm_shuffle_epi32((__m128i)source, _MM_SHUFFLE(0,3,2,1)); 
```

现在我想对 AVX 内在函数做同样的事情。所以让我们假设这次`__m256i`是 source 和 dest 类型：

```
来源：|| A0 || A1 || A2 || A3 || A4 || A5 || A6 || A7 ||
```

```
  目的地：|| A1 || A2 || A3 || A4 || A5 || A6 || A7 || A0 ||
```

AVX 内在函数缺少大多数相应的 SSE 整数运算。也许有一些方法可以使用浮点版本获得所需的输出。

我试过：

```
dest = (__m256i)_mm256_shuffle_ps((__m256)source, (__m256)source, _MM_SHUFFLE(0,3,2,1)); 
```

但我得到的是：

```
|| A0 || A2 || A3 || A4 || A5 || A6 || A7 || A1 ||
```

关于如何以有效方式解决这个问题的任何想法？（没有混合 SSE 和 AVX 操作，也没有“手动”反转`A0`和`A1`

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T00:48:22.590

My solution:

```
__m256 tmp =  ( __m256 ) _mm256_permute_ps((__m256)_source, _MM_SHUFFLE ( 0,3,2,1 ));
* ( _dest ) =  ( __m256i) _mm256_blend_ps(tmp, _mm256_permute2f128_ps ( tmp,tmp,1 ), 136); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-05T07:32:35.127

我还没有检查过 AVX 的情况，但至少对于 SSE，你考虑过`_mm_align*`吗？

例如，这会将字节向量旋转 2 个字节：

```
__m128i v;
v = _mm_alignr_epi8 (v, v, 2) // v = v[2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1] 
```

这可以是一条指令。此类操作也是 lat 1 / tp 1，即快速。

AVX 使用这种方法可能有点麻烦，因此调整可能没有用。

# java - 在无限循环的Java应用程序中出现内存不足和stackoverflow异常

> ID：11906819
> 
> 赞同：0
> 
> 时间：2012-08-10T17:53:05.983
> 
> 标签：java, loops, jdbc, stack-overflow, out-of-memory

我有一个简单的应用程序来监听 UDP 消息。该应用程序需要无限期地运行。它通过实例化我创建的 MySQLConnect 对象来实例化单个 jdbc 数据库连接它看起来像这样：

```
 public MySQLConnect() {
    this.instantiateConnection();
}

//Open the database connection.  Done iniitally in 
//the main class and only called again if the connection 
//is closed due to an error in processing a message
public Connection instantiateConnection() {

    try {

        Class.forName("com.mysql.jdbc.Driver");

        connection = DriverManager
                .getConnection("jdbc:mysql://localhost:3306/mydb?"
                        + "user=user&password=pwd");
    } catch (Exception e) {
        e.printStackTrace();
    }

    return connection;
} 
```

一旦启动应用程序，就会从 UDPReceiver 类调用 MySQLConnect 类构造函数。然后只有在出现错误处理并且数据库连接关闭时才会再次调用它。这个类看起来像：

```
 public class UDPReceiver {

private static int port = 2140;
private static int byteSize = 1024;
private static int timeOut = 5000;
@SuppressWarnings("unused")
private static int count;
static MySQLConnect dbConnect;

   public static void main(String[] args) {

    recvUDPMessage();
}

public static String recvUDPMessage() {
    DataTransferService dts = new DataTransferServiceImp();
    dbConnect = new MySQLConnect();

    try {

        DatagramSocket dsocket = null;
        if (dsocket == null) {
            dsocket = new DatagramSocket(port);
            dsocket.setBroadcast(true);
            dsocket.setReuseAddress(false);
        }
        byte[] inbuf = new byte[byteSize];
        byte[] rcvMsg;
        InetAddress fromIP;

        DatagramPacket receivepacket = new DatagramPacket(inbuf,
                inbuf.length);
        dsocket.setSoTimeout(timeOut);

        //Infinitely loop and listen for UDP messages

        count = 0;
        boolean loopRecv = true;
        while (loopRecv) {
            try {
                count++;
                dsocket.receive(receivepacket);
                // temp = receivepacket.getAddress().toString();
                fromIP = receivepacket.getAddress();
                String fromIPString = fromIP.toString();
                rcvMsg = receivepacket.getData();
                String rcvString = new String(rcvMsg, 0, rcvMsg.length);
                String rcvMessage = "Message Received from:  "
                        + fromIPString + " Message:  " + rcvString + "\n";
                System.out.println(rcvMessage);

                ArrayList<String> al = getMessageElements(rcvString);

                //Send array of message elements to service layer
                dts.saveUDPMessage(dbConnect, al, Utils.getTimeStamp());

                loopRecv = true;
            } catch (IOException e) {
                System.out.println("Listening . . .");

                loopRecv = true;
            }
        }
    } catch (SocketException e) {
        System.err.println("Sockets Exception: " + e.getMessage());
    } catch (Exception e) {
        System.err.println(" Exception: " + e.getMessage());

    } finally {
        System.out.println(". . . Close DB");
        dts.closeDBConnection(dbConnect);

                    // I added the creation MySQLConnect object after I was getting an error that the database was closed when trying to insert.
        dbConnect = new MySQLConnect();
    }
    return "end of routine";
}

//Extract comma delimited message elements into an array
private static ArrayList<String> getMessageElements(String rcvString) {
    StringTokenizer st = new StringTokenizer(rcvString, ",");

    ArrayList<String> al = new ArrayList<String>();

    while (st.hasMoreElements()) {
        String messageElement = (String) st.nextElement();
        al.add(messageElement);

    }

    return al;
} 
```

}

这运行了大约 8 小时，然后我收到以下错误：

线程主 java.lang.stackoverflowerror 中的异常

异常：从线程主线程中的 uncaughtexceptionhandler 抛出 java.lang.outofmemoryerror

以前，我没有在数据库关闭后重新实例化 MySQLConnect 对象。问题是我收到数据库连接已关闭的错误，但我的程序仍在尝试执行 jdbc 插入。jdbc 插入首先检查是否有实例化的连接，如果没有实例化它。MySQLConnect 类中的这段代码如下所示：

```
 PreparedStatement prep = null;

    if (connection == null) {
        connection = this.instantiateConnection();
    }

    try {

        prep = connection
                .prepareStatement("insert into MyTable (UDPMessage)"
                        + "values (?);");

        prep.setString(1, udpMessage);

        prep.addBatch();

        prep.executeBatch(); 
```

即使发生错误，如何构建此过程以正确处理无限期传入的 UDP 消息并写入数据库？

另外，当我在处理数据时出现异常时重新实例化 MySQLConnect 类时，如何解决内存不足错误？

如果异常后实例化这个类不正确，如何重新实例化与数据库的连接以继续处理数据？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:57:27.117

您没有在代码中的任何地方设置布尔值`loopRecv`，`false`这会导致无限循环（while 条件总是解析为`true`）。无限/递归循环继续填充堆栈，但不删除任何堆栈帧并导致`StackOVerflowError`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:18:18.227

让循环终止

```
while (loopRecv) {
...
} 
```

你应该在`loopRecv=false;`某个不是案例的地方做标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:08:36.103

如果您不担心同步性，为什么不将循环的内容放在另一个线程中。执行一次该线程，然后将其处理掉。然后在无限循环中，创建另一个线程并执行它。这些线程将自行处理并从堆栈中删除。

# sql - 在现有表上添加派生列

> ID：11906822
> 
> 赞同：0
> 
> 时间：2012-08-10T17:53:17.030
> 
> 标签：sql, sql-server, tsql, calculated-columns

> **可能重复：**
> [现有表上的派生/计算列](https://stackoverflow.com/questions/11908456/derived-calculated-column-on-existing-table)

我有带有值的 SQL Server 表，如下所示：

```
Account - Date - Amount - Summary
10000 - 2010-1-1 - 50.00 - 0.00
10000 - 2010-2-1 - 50.00 - 0.00
10000 - 2010-3-1 - 50.00 - 0.00
10000 - 2010-4-1 - 50.00 - 0.00
10000 - 2010-5-1 - 50.00 - 0.00
10000 - 2010-6-1 - 50.00 - 0.00
10000 - 2010-7-1 - 50.00 - 0.00
10000 - 2010-8-1 - 50.00 - 0.00
10000 - 2010-9-1 - 50.00 - 0.00
10000 - 2010-10-1 - 50.00 - 0.00
10000 - 2010-11-1 - 50.00 - 0.00
10000 - 2010-12-1 - 50.00 - 600.00
10001 - 2010-1-1 - 50.00 - 0.00
10001 - 2010-2-1 - 60.00 - 0.00
10001 - 2010-12-1 - 60.00 - 170.00 
```

这是表的基本快照。“汇总”字段在日期列上提供年末金额的总计，但仅当 MONTH(Date) = '12' 时。数百个帐户都以这种方式进行，大约还有 4 年的时间。我想在这个现有表中添加一列，名为“SummaryPreviousYear”。SummaryPreviousYear 列应包含 MONTH(Date) = '12' 和上一年的金额之和。我想在帐号上加入此列，以便它位于摘要列旁边并提供一个值，就像摘要值一样。谁能帮我这个？我在这里拉头发。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:02:21.943

假设`[Account]`和`[Date]`是唯一的，只需`JOIN`像这样放在同一张桌子上：

```
SELECT
    a.* -- you should explicitly list the columns you want, though
    ,b.[Summary] SummaryPreviousYear
FROM
    myTable a
JOIN
    myTable b
        ON b.[Account] = a.[Account]
        AND DATEPART("yyyy" , b.[date] ) = DATEPART("yyyy" , a.[date] ) - 1
        AND DATEPART("mm" , b.[date] ) = 12
        -- AND whatever other conditions define unique rows 
```

对于任何数据点，第 1 年和第 12 个月的行不应超过一行。如果您想要`NULL`第一年行的值，请`LEFT OUTER JOIN`改为 a。

# c - 编写 Linux 应用程序以同时播放多种声音

> ID：11906824
> 
> 赞同：4
> 
> 时间：2012-08-10T17:53:19.490
> 
> 标签：c, linux, audio, alsa

我需要编写一个执行以下操作的 Linux 应用程序：

*   1-在后台连续播放`WAV`文件。因此，在应用程序运行的整个过程中都会播放此背景音乐。
*   2- 当背景音乐继续播放时发生某些事件时，能够播放短声。

当额外的事件声音与背景音乐一起发生时，需要什么来混合它们以便同时听到两者？

我从未编写过 Linux 声音代码，所以这对我来说是全新的。我假设我需要写入`ALSA`API？或者其他一些可以促进这一点的图书馆？

如果有人可以提供示例代码让我开始，我将不胜感激。几天后，我将创建一个赏金，并为满足需要的示例代码提供良好的声誉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:00:58.723

您通常不想直接使用 ALSA API。它很难使用，而且不是真正可移植的（因为 ALSA 是特定于 Linux 的）。

如果你在你的应用程序中使用了一些特定的库（比如 Qt 或类似的东西），可能已经有一个对应的声音库来播放声音。

如果您正在寻找一个好的、通用的声音库，我建议您看看[SDL](http://www.libsdl.org/)。它非常好，小巧便携；非常受欢迎的游戏。他们的网站上有一个很好的[示例代码](http://www.libsdl.org/intro.en/usingsound.html)可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:06:53.920

对于播放声音的部分，我使用的一个易于学习、使用并且在其文档中有很好示例的库是[fmod](http://www.fmod.org/fmod-downloads.html)。下载附带的文档有一个非常易于理解的示例，您可以对其进行修改并快速播放您的声音。

# perl - 如何在 Perl 中打印哈希名称？

> ID：11906829
> 
> 赞同：2
> 
> 时间：2012-08-10T17:53:38.050
> 
> 标签：perl

一个简单的问题，但它让我很难过，谷歌只是让我误入歧途。我要做的就是打印出哈希的名称。例如：

```
&my_sub(\%hash_named_bill);

&my_sub(\%hash_named_frank);

sub my_sub{

    my $passed_in_hash = shift;

    # do great stuff with the hash here

    print "You just did great stuff with: ". (insert hash name here);

} 
```

我不知道的部分是如何获取括号中的内容（插入...）。对于嵌套哈希，您可以使用“keys”标签来获取哈希名称（如果您想这样称呼它们）。我不知道如何获得整个哈希名称，它似乎真的只是另一个键。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T18:06:02.127

正如@hackattack 在评论中所说，您的问题的技术答案可以在[Get variable name as string in Perl的答案中找到](https://stackoverflow.com/questions/5199860/get-variable-name-as-string-in-perl)

但是，您应该考虑您是否在做正确的事情？

如果您以某种方式需要知道哈希的名称，那么如果您将这些多个哈希存储到一个以名称为键的哈希中，您**很可能**会更好地解决问题（正如您提到的那样，您应该熟悉在你的问题中的方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:14:34.043

您可以使用名称来引用散列，但散列本身没有名称。例如，考虑以下情况：

```
*foo = {};
*bar = \%foo;
$foo{x} = 3;
$bar{y} = 4; 
```

请记住哈希包含`(x=>3, y=>4)`：哈希是无名的吗？命名为“富”？命名为“酒吧”？上述所有的？以上都不是？

[您可以做的最好的事情是使用PadWalker](http://search.cpan.org/perldoc?PadWalker)来近似答案。我建议不要在生产中使用它或类似的东西（即任何能找到名字的东西）！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:04:41.160

```
$hash_named_bill{name} = "bill";
$hash_named_frank{name} = "frank";

&my_sub(\%hash_named_bill);
&my_sub(\%hash_named_frank);

sub my_sub{

    my $passed_in_hash = shift;

    # do great stuff with the hash here

    print "You just did great stuff with: ". $passed_in_hash->{name};

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:04:56.963

哈希只是一块内存，可以关联一个名称（或多个名称）。

如果你想打印变量的名称，那不是很简单（见 haccattack 评论），而且闻起来不太好（你确定你真的需要那个吗？）

您还可以（如果这适合您的场景）考虑“软（或符号）引用”：

```
%hash1 = ( x => 101, y => 501);
%hash2 = ( x => 102, y => 502);

my_sub("hash1");
#my_sub(\%hash1);  # won't work
my_sub("hash2");

sub my_sub {
        my $hashname = shift;
        print "hash name: $hashname\n";
        print $hashname->{x} . "\n";
} 
```

在这里，您将变量的名称传递给函数，而不是对它的（硬）引用。请注意，在 Perl 中，这在取消引用时感觉相同（尝试取消注释`my_sub(\%hash1);`），尽管这是完全不同的事情。

# objective-c - 实现预定义类的最常用方法。

> ID：11906836
> 
> 赞同：2
> 
> 时间：2012-08-10T17:53:55.543
> 
> 标签：objective-c, ios

我正在开发一款有一堆怪物的 iPhone 游戏。每个怪物都有一个名字，最多 4 种不同的攻击，以及一些代表其状态的精灵。我设置了一个怪物类，效果非常好。我已经设法让两个怪物战斗了，所有的爵士乐都奏效了。我的游戏中将有一组预定义的怪物，它们都有不同的统计数据，我有点努力想出最好的方法来实现这一点。到目前为止，我有两个想法。

**想法：**

*   创建一个类，其唯一目的是使用 Monster 类定义游戏中可用的所有怪物。
*   为我需要的每个怪物子类化怪物类。尽管它们都不会真正为怪物类添加任何东西。

第二种方法的好处是更容易在两个不同的怪物之间建立联系（如进化树）。

你们认为最好的方法是什么？我倾向于第二种方法。是我缺少的另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:12:30.543

此类问题的常见模式是创建一个[工厂类](http://en.wikipedia.org/wiki/Factory_pattern)，这与您的第一个想法很接近。您创建了一个类，可能称为 MonsterFactory，其工作是制造 Monster 类的实例以供其他地方使用。如果你正确地构建工厂，它甚至可以很好地处理进化树之类的事情。

工厂的另一个好处是它抽象出存储怪物信息的细节。例如，您可以将前五个或十个怪物的信息硬编码到程序中以对其进行测试，但稍后重新实现工厂以使用磁盘上的数据库或文件来处理更大数量的怪物。只要您的工厂 API 保持不变，您的 Monster 类就不必关心这些细节；这一切都在工厂里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T18:03:43.490

> 尽管它们都不会真正为怪物类添加任何东西。
> 
> 第二种方法的好处是更容易在两个不同的怪物之间建立联系（比如进化树）

回答了你自己的问题。

# php - 在codeigniter中，有什么好方法可以分离用于同一服务器下不同网站项目的会话变量

> ID：11906837
> 
> 赞同：1
> 
> 时间：2012-08-10T17:54:03.990
> 
> 标签：php, codeigniter, session, variables

在我的 Web 开发服务器上，我有几个**codeigniter**网站项目正在进行中。我遇到了我的一个 codeigniter 网站项目`session`变量与另一个 codeigniter 网站项目的`session`变量冲突的问题。这两个网站项目都在同一台服务器下。那么，有没有很好的方法来区分网站项目之间的变量呢？

同样，这两个网站都建立在 codeigniter 框架上。那么，使用codeigniter，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:58:44.223

如果您在服务器端使用分贝来跟踪会话信息，您可以为每个站点指定不同的分贝。在 config.php 中查找设置 $config['sess_table_name'] = 'ci_sessions';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:11:15.767

对于每个应用程序，您可以将会话配置为存储在数据库中：

```
sess_use_database = true; 
```

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:08:17.943

如果您的两个项目都在同一个域下，那么任何具有相同名称的会话变量都会发生冲突，因为用户的浏览器将其会话密钥存储在该域的 cookie 中。这里的最佳做法是命名您的会话变量；例如，如果你想在两个项目“foo”和“bar”中都有一个“username”变量，那么将这两个变量命名为“foo_username”和“bar_username”。如果您在每个项目的 config .php 文件中设置一个常量，并带有您想要用于变量的前缀，那么您可以在每次获得会话 var 时使用它。例如，如果您在 config.php 中设置了一个“APP_NAME”常量并将其设置为您的第一个项目的“foo”，那么您可以设置会话变量：

```
$this->session->set_userdata(APP_NAME.'_username', 'smg'); 
```

并检索

```
$this->session->userdata(APP_NAME.'_username'); 
```

# r - 如何选择工作日期间的时间范围和下一列的关联数据

> ID：11906838
> 
> 赞同：-1
> 
> 时间：2012-08-10T17:54:10.200
> 
> 标签：r, range

以下是 .csv 文件中的子集数据示例。有三列没有标题。第一列代表日期/时间，第二列是负载 [kw]，第三列是 1 = 工作日，0 = 周末/假期。

```
9/9/2010 3:00   153.94  1
9/9/2010 3:15   148.46  1 
```

我想在 R 中编程，以便它在 9 月的一个月内的所有工作日（当第三列为 1 时）的时间范围内从 10:00 到 20:00 选择第一列和第二列并且不知道是什么最好和最有效的编码方式。

```
code dt <- read.csv("file", header = F, sep=",") 

#Select a column with weekday designation = 1, weekend or holiday = 0 

y <- data.frame(dt[,3]) 

#Select a column with timestamps and loads 

x <- data.frame(dt[,1:2]) 
t <- data.frame(dt[,1]) 

#convert timestamps into readable format 

s <- strptime("9/1/2010 0:00", format="%m/%d/%Y %H:%M") 
e <- strptime("9/30/2010 23:45", format="%m/%d/%Y %H:%M") 
range <- seq(s,e, by = "min") 
df <- data.frame(range) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:02:21.280

OP 要求“最好和最有效的编码方式”而不显示“低效的代码”，所以@Justin 是对的。

看来 OP 对 R 来说是新的（它正式[是爱的夏天](https://blog.stackoverflow.com/2012/07/kicking-off-the-summer-of-love/)）所以我试一试，我有一个解决方案（不确定效率..）

```
index <- c("9/9/2010 19:00", "9/9/2010 21:15", "10/9/2010 11:00", "3/10/2010 10:30")
index <- as.POSIXct(index, format = "%d/%m/%Y %H:%M")

set.seed(1)
Data <- data.frame(Date = index, load = rnorm(4, mean = 120, sd = 10), weeks = c(0, 1, 1, 1))

## Data
##                  Date   load weeks
## 1 2010-09-09 19:00:00 113.74     0
## 2 2010-09-09 21:15:00 121.84     1
## 3 2010-09-10 11:00:00 111.64     1
## 4 2010-10-03 10:30:00 135.95     1

cond <- expression(format(Date, "%H:%M") < "20:00" & 
                   format(Date, "%H:%M") > "10:00" & 
                   weeks == 1 & 
                   format(Date, "%m") == "09")

subset(Data, eval(cond))
##                  Date   load weeks
## 3 2010-09-10 11:00:00 111.64     1 
```

# mysql - 显示百分比值 mysql

> ID：11906840
> 
> 赞同：6
> 
> 时间：2012-08-10T17:54:24.703
> 
> 标签：mysql

我有以下数据表和数据：

```
mysql> describe school_data_sets_numeric_data;
+--------------+----------------+------+-----+---------+----------------+
| Field        | Type           | Null | Key | Default | Extra          |
+--------------+----------------+------+-----+---------+----------------+
| id           | int(11)        | NO   | PRI | NULL    | auto_increment |
| data_set_nid | int(11)        | NO   |     | NULL    |                |
| school_nid   | int(11)        | NO   |     | NULL    |                |
| year         | int(11)        | NO   |     | NULL    |                |
| description  | varchar(255)   | NO   |     | NULL    |                |
| value        | decimal(18,12) | NO   |     | NULL    |                |
+--------------+----------------+------+-----+---------+----------------+
6 rows in set (0.00 sec)

+----+--------------+------------+------+-------------------+------------------+
| id | data_set_nid | school_nid | year | description       | value            |
+----+--------------+------------+------+-------------------+------------------+
| 54 |        19951 |      19944 | 2008 | Asian             |  75.000000000000 |
| 51 |        19951 |      19944 | 2008 | White             | 200.000000000000 |
| 52 |        19951 |      19944 | 2008 | African American  | 100.000000000000 |
| 53 |        19951 |      19944 | 2008 | Hispanic          |  50.000000000000 |
| 55 |        19951 |      19944 | 2008 | Native American   |   9.000000000000 | 
```

我想显示数据的平均值而不是原始数字。我想在原始 sql 中执行此操作。

例子：

```
+----+--------------+------------+------+-------------------+------------------+
| id | data_set_nid | school_nid | year | description       | average          |
+----+--------------+------------+------+-------------------+------------------+
| 54 |        19951 |      19944 | 2008 | Asian             |  17.28%          |
| 51 |        19951 |      19944 | 2008 | White             | 46.06%           |
| 52 |        19951 |      19944 | 2008 | African American  | 23.04%           |
| 53 |        19951 |      19944 | 2008 | Hispanic          |  11.52%          |
| 55 |        19951 |      19944 | 2008 | Native American   |  2.07%           | 
```

做这个的最好方式是什么？请记住，会有多个数据集和年份。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T18:15:20.243

一种方法是编写一个获取“总值”的查询，这将是您的平均值的分母。

```
SELECT SUM(value) AS total_value FROM school_data_sets_numeric_data 
```

将该查询的结果与表的每一行连接起来，这样您就有了可用的值和总计，用于计算平均值。

```
SELECT v.id
     , v.data_set_nid
     , v.school_nid
     , v.year
     , v.description
--   , v.value
--   , t.total_value
     , CONCAT(FORMAT(IF(t.total_value=0,0,(v.value*100.0)/t.total_value),2),'%')
       AS `average`
  FROM (SELECT SUM(value) AS total_value FROM school_data_sets_numeric_data) t
 CROSS
  JOIN school_data_sets_numeric_data v 
```

关键字`CROSS`是可选的，但它可以作为后续审阅者的文档，并让他们知道我们打算创建笛卡尔积，并且我们故意省略（并且不是意外省略）`ON`JOIN 的子句。

返回“平均值”的表达式会显示您显示的值...四舍五入到两位小数，尾随百分号。

计算“平均值”很简单 `value / total_value * 100`......

（如果分子和恶魔都是整数类型，请注意“整数”除法，这在您的情况下不是问题，但我们通过乘以十进制文字来确保分子是十进制，这确保我们有十进制类型值。）

表达式的其余部分处理避免可能的“除以零”异常，四舍五入到两位小数，格式化两位固定小数位，并附加“%”。

如果您希望这些 % 符号对齐，您可以在该字符串的左侧用空格填充特定长度，例如`LPAD(expr,7,' ')`. （实际上，我可能会在添加 %' 的 CONCAT 之前这样做，但这并不重要。）

* * *

如果您打算对子集（例如，特定年份和特定数据集）而不是整个回报集进行平均，那么我们将获得这些数据组中的每一个的“小计”。

在这里，我们从一个特定的`data_set_nid`and计算平均值`year`：

```
SELECT v.id
     , v.data_set_nid
     , v.school_nid
     , v.year
     , v.description
--   , v.value
--   , t.total_value
     , CONCAT(FORMAT(IF(t.total_value=0,0,(v.value*100.0)/t.total_value),2),'%')
       AS `average`
  FROM (SELECT u.data_set_nid
             , u.year
             , SUM(u.value) AS total_value 
          FROM school_data_sets_numeric_data u
         GROUP
            BY u.data_set_nid
             , u.year
       ) t
  JOIN school_data_sets_numeric_data v
    ON v.data_set_nid = t.data_set_nid
     , v.year = t.year 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:19:10.940

尝试这个。

```
select @total:=sum(value) from school_data_sets_numeric_data;

select  id, data_set_nid, school_nid, year, description,
concat(round((100*actor_id)/@total,2),"%") as percentage 
from school_data_sets_numeric_data; 
```

输入将是这样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:02:03.080

试试下面的。在[sqlfidlle](http://sqlfiddle.com/#!3/e2992/6)上测试。

```
select id, data_set_nid,school_nid, year, description, round(value/(select sum(value) from school_data_sets_numeric_data)*100,2) as average from school_data_sets_numeric_data 
```

# java - wsdl2java 在 java 代码中缺少包错误

> ID：11906847
> 
> 赞同：0
> 
> 时间：2012-08-10T17:55:20.497
> 
> 标签：java, wsdl, axis

我正在尝试测试axis2 eclipse插件，但是一旦我生成了一个wsdl-> java，它就会创建java代码但有很多错误（主要是缺少包）。

例如，以下 wsdl： [http ://www.webservicex.net/ConvertTemperature.asmx?WSDL](http://www.webservicex.net/ConvertTemperature.asmx?WSDL)

将生成 java 代码，但方法调用与包相关联，例如：

```
org.apache.axis2.databinding.ADBBean 
```

会产生一个错误，说它丢失了。我想知道如何解决这个问题，谢谢。

axis2 插件：v1.6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:02:25.123

我可以建议为此使用netbeans吗？据我所知，它对 Web 服务类生成有更好的支持。

你可以从这里开始：http: [//netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:02:39.740

听起来您在`axis2-adb-1.6.2.jar`类路径中丢失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:04:19.653

Eclipse 项目的类路径中可能缺少 Axis2 JAR。

要添加它们，请右键单击项目文件夹并从上下文菜单中选择“属性”。导航到“Java Build Path”，然后单击“Libraries”选项卡。通过单击“Add JARs...”按钮添加 Axis2 JARs。

# javascript - Javascript 默认选择一个选项

> ID：11906848
> 
> 赞同：0
> 
> 时间：2012-08-10T17:55:22.463
> 
> 标签：javascript, jquery

当用户单击一个项目时，我有以下选择下拉列表：

```
 $(this).html($("<select/>", {
          class: 'sel',
        }).append($("<option/>", { text: "WIP" }))
          .append($("<option/>", { text: "C" }))
          .append($("<option/>", { text: "A" }))
          .append($("<option/>", { text: "AR" }))
          .append($("<option/>", { text: "NS" }))
        ); 
```

此外，我有一个名为的变量`status`，它被定义为“WIP”、“C”、“A”、“AR”或“NS”。

```
status = trim(($(this).text())); 
```

我想让它在我单击`select`下拉列表`option == status`时被选中。例如：

```
status = "WIP"
<select class="sel">
     <option selected="selected">WIP</option>
     <option>C</option>
     ...
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:59:15.197

我理解这个问题的方式，你想设置一个默认值`option`，以便*在*用户点击之前会选择一个选项。

以下是你将如何做到这一点：

```
var status = "WIP";

$("<select/>", {
    class: 'sel',
})
.append( $("<option/>", { text: "WIP" }) )
.append( $("<option/>", { text: "C" }) )
.append( $("<option/>", { text: "A" }) )
.append( $("<option/>", { text: "AR" }) )
.append( $("<option/>", { text: "NS" }) )
.val( status )
.appendTo(this); 
```

请注意，整个`select`元素应该在将`append`其添加到 DOM 之前构建。这对性能来说*要*好得多，因为与 DOM 的任何交互都非常昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:03:43.247

如果将选项文本值放入数组中，还可以减少代码的重复：

```
var options = ['WIP','C','A','AR','NS'];
var menu = $('<select>',{class:'sel'});

$.each(options,function(i,text){
    menu.append($('<option>',{text:text}));
});

menu.val(status).appendTo(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:15:29.107

这是您可以执行的操作，以便在用户单击选择时选择要选择的存储值。

小提琴。

[http://jsfiddle.net/TRCWh/](http://jsfiddle.net/TRCWh/)

代码

```
<div id = "hello"></div>

var select = "A";
$('#hello').html($("<select/>", {
          class: 'sel',
        }).append($("<option/>", { text: "WIP" }))
          .append($("<option/>", { text: "C" }))
          .append($("<option/>", { text: "A" }))
          .append($("<option/>", { text: "AR" }))
          .append($("<option/>", { text: "NS" }))
                );

$(document).on("click",".sel",function(){
    $(this).val(select);
}) 
```

注意：我已经有一段时间忽略了公认的编码实践（有些人可能会说）。只是为了快速解决您的问题:)

# jquery - jQuery Validation 在本地服务器上不起作用，但在浏览器中起作用

> ID：11906850
> 
> 赞同：1
> 
> 时间：2012-08-10T17:55:23.923
> 
> 标签：jquery

每个人！我遇到了与 post [jQuery Validation not working in server 相同的情况！在本地工作。为什么？](https://stackoverflow.com/questions/6223065/jquery-validation-not-working-in-server-works-locally-why) 不同之处在于我不能让 jsfiddle 工作[http://jsfiddle.net/AlexInspired/uUmeV/](http://jsfiddle.net/AlexInspired/uUmeV/) 1）如何添加到我的 html 标头中的 jsfiddle 资源：

```
<link rel="stylesheet" type="text/css" media="screen" href="cs/screen.css" />

<script src="../lib/jquery-1.6.1.js" type="text/javascript"></script>
<script src="../jquery.validate.js" type="text/javascript"></script> 
```

? 2）我使用 Firebug 来观察在本地服务器上运行我的页面时出现的问题（因为通过文件系统在浏览器中打开页面时一切正常）。Firebug中有错误：

> 类型错误：$.validator 未定义 $.validator.setDefaults({

在第 13 行。似乎服务器锁定了网络资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:29:49.407

1）如何添加到我的 html 标头中的 jsfiddle 资源

如果要向 JFiddle 添加自定义文件，请使用包含 js 或 css 文件的 URL 的标头

```
<link rel="stylesheet" type="text/css" media="screen" href="http://mywebsite/cs/screen.css" />
<script src="http://mywebsite/lib/jquery-1.6.1.js" type="text/javascript"></script> 
```

为了解决本地/服务器问题，请尝试在 js 的源代码中删除 ..。所以试试：

```
<script src="/lib/jquery-1.6.1.js" type="text/javascript"></script>
<script src="/jquery.validate.js" type="text/javascript"></script> 
```

# facebook - 尝试通过everyauth 获得更多FB 权限时，req.session 松动

> ID：11906858
> 
> 赞同：0
> 
> 时间：2012-08-10T17:55:53.007
> 
> 标签：facebook, node.js, express, everyauth

我一直在使用everyauth 和 Facebook 进行用户身份验证，一切正常。现在，我想集成一个发布到 Facebook 的功能。由于我的应用仅在用户首次登录时要求提供电子邮件范围，因此我需要获得更大的 FB 范围，并尝试遵循 FB 指南，仅在需要时才要求提供此额外范围。

我根据文档将以下代码添加到我的everyauth 配置中：

```
everyauth
.facebook
    .appId(conf.fb.appId)
    .appSecret(conf.fb.appSecret)
    //TODO add custom redirect for when authentication is not approved
    .scope(function (req, res) {
        console.log('Setting FB scope');
        console.log('Session: ' + util.inspect(req.session));
        var session = req.session;
        switch (session.userPhase) {
            case 'share-media':
                return 'email,user_status';
            default:
                return 'email';
        }
     }) 
```

当未经身份验证的用户登录应用程序时，一切都很好。问题是，当我想在 FB 范围上“加大赌注”时，我通过将 req.session.userPhase 设置为“share-media”，然后提供指向 /auth/facebook 的链接以确认他们想要允许发布到 FB。发生这种情况时，我从上面的代码中得到一个错误，即 req.session 未定义（所有 req 都未定义）。

我认为这是因为以前登录的用户本质上是在重新进行身份验证，但这不是我如何从 Facebook 获得更多范围的方式吗？我会以错误的方式解决这个问题吗？

谢谢！！！

# mysql - MySQL合并两个查询一个与group by

> ID：11906859
> 
> 赞同：0
> 
> 时间：2012-08-10T17:55:54.753
> 
> 标签：mysql

我有两张表，一张保存用户信息（id、name 等），另一张保存用户票证和票证状态（ticket_id、user_id、ticket_status 等）。

我想生成所有用户的列表，例如：`( SELECT * FROM user_table )`

对于每个用户，我需要计算他们的票数，例如： `(SELECT t1.user_id, COUNT(*) FROM user_tickets t1 WHERE t1.ticket_status = 15 GROUP BY t1.ticket_status, t1.user_id )`

我可以执行此查询来实现我正在寻找的内容，但这需要 5 秒。在 50000 张票上运行查询，而单独运行的每个查询只需要几分之一秒。

```
SELECT t1.user_id, COUNT(*) 
FROM user_tickets t1 
LEFT JOIN user_table t2 ON t1.user_id = t2.id 
WHERE t2.group_id = 20 AND t1.status_id = 15 
GROUP BY t1.status_id, user_id 
```

知道如何编写查询以分别获得与每个查询相同的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:56:58.763

一个索引 where 子句解决了这个问题。

# html - 是否可以仅使用边框半径创建此形状？

> ID：11906864
> 
> 赞同：1
> 
> 时间：2012-08-10T17:56:19.027
> 
> 标签：html, css, css-shapes

考虑以下 HTML 选项卡式菜单：

```
<ul id="nav-tabs">
    <li class="active">Blah</li>
    <li>tab 2</li>
    <li>tab 3</li>
    <li>tab 4</li>
    <li>tab 5</li>
</ul> 
```

不确定这是否可行，但我想让标签的形状看起来像这样，带有边框半径。没有图像。顶部很容易，但底部，它是如何在线弯曲的部分我不知道是否可能：

![在此处输入图像描述](../Images/cb708bc873b677df2b84d21a3f2d4361.png)

这是[jsfiddle](http://jsfiddle.net/Nrmda/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:18:09.433

*发表评论作为答案...*

Chris Coyier 有一篇文章解决了这个问题：[**带有圆形边框的标签**](http://css-tricks.com/tabs-with-round-out-borders/)。

他的实现与您的略有不同，但是通过使用`border-radius`您应该能够使效果更接近您在图像中的效果，尽管我怀疑您能否使阴影正常工作（如果您证明我错了，在这里发布你的代码。会*很*有趣）。

# linux - 过滤 Bash 会话中的所有输出

> ID：11906876
> 
> 赞同：2
> 
> 时间：2012-08-10T17:57:40.707
> 
> 标签：linux, bash, shell, exec

刚拿到`filters`包裹，喜欢我可以跑步的事实，例如

```
ls | pirates 
```

并有一个有趣（如果不切实际）的输出。

对于[像海盗一样的国际谈话日](http://www.talklikeapirate.com/)，我希望我的所有输出都自动被海盗过滤！如果我运行`exec bash -i | pirate`，这可行，但会发生一些奇怪的事情，即并非每一行都以新行和新的 bash 输入字符完成`$`

我尝试过重定向标准输出和脚本，但我尝试过的一切似乎都失败了。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T06:56:03.603

尝试执行一个脚本，将 shell 的输出传递给海盗：

```
cat shell.sh
bash | pirates
chmod +x shell.sh
exec ./shell.sh 
```

# html - Addthis 代码的 div 内联标记

> ID：11906877
> 
> 赞同：2
> 
> 时间：2012-08-10T17:57:42.313
> 
> 标签：html, css, html-table, addthis

我有这样一张桌子：

```
<table>
    <tr>
        <td>
            My text which consists of three lines.
            Where I write some tips tricks and some news.
            Which is important.
            <div style="display: inline-block" class="addthis_toolbox addthis_default_style ">
                <a class="addthis_button_preferred_1"></a>
                <a class="addthis_button_preferred_2"></a>
            </div>
        <td>
    </tr>
</table>​ 
```

此代码将两个按钮放在单元格的末尾，但其中一个在上，另一个在下。

如果我改成这个，按钮在同一行，但按钮放在第三行的开头。但我需要它出现在第三行的末尾。我怎样才能解决这个问题？

```
<div style="display: inline" class="addthis_toolbox addthis_default_style "> 
```

**编辑**：这是 addthis 的脚本：[http](http://s7.addthis.com/js/250/addthis_widget.js)
://s7.addthis.com/js/250/addthis_widget.js 它包括这个 css：[http](http://s7.addthis.com/static/r07/counter002.css)
: //s7.addthis.com/static/r07/counter002.css Css 有以下代码里面：

```
.addthis_default_style .addthis_counter {
    display:block;
    float:left;
} 
```

**Edit2**：我更新为“显示：内联；浮动：右；”。结果是这样的： ![细胞结果](../Images/0ed5a53037905060edd9bc4b16c22a36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:05:40.690

尝试在类中添加`float:right;`样式。`addthis_toolbox`

这个[小提琴](http://jsfiddle.net/wWxFZ/9/)展示了应用这种风格所取得的成就。

* * *

**编辑**

由于您使用的是[AddThis](http://www.addthis.com/)小部件，因此我更新了[小提琴](http://jsfiddle.net/wWxFZ/9/)以使用相同的小部件并添加了以下 CSS 样式更改：

```
.addthis_toolbox {
    float: right;
    width: 50px;
} 
```

# java - JTable 中没有标题

> ID：11906878
> 
> 赞同：2
> 
> 时间：2012-08-10T17:58:02.070
> 
> 标签：java, swing, jtable, jtableheader

请看下面的代码

```
import java.awt.*;

import javax.swing.JTable;
import javax.swing.*;

public class Table extends JFrame
{
    private JTable table;

    public Table()
    {

        String[] columnNames = {"first name","last name","address"};
        Object[][]data = {{"John","Kane","NY"},{"Nayomi","Writz","NY"}};

        table = new JTable(data, columnNames);

        getContentPane().add(table);
        this.pack();
        this.setVisible(true);

    }

    public static void main(String[]args)
    {
        new Table();
    }
} 
```

我以前没有使用过 JTable，所以这是我的第一次尝试。在这里，它不显示列名，只显示数据。这是为什么？请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T18:02:10.583

你需要把它放在一个`JScrollPane`或类似的地方。

请参阅 API 文档顶部的`JTable`和`JScrollPane`。

# xml - 如何在没有 WebBrowser 控件的情况下解析 VB.net 中的 XML 文档？

> ID：11906880
> 
> 赞同：0
> 
> 时间：2012-08-10T17:58:16.360
> 
> 标签：xml, vb.net

例如，如何从按钮的单击事件打开 URL（这是一个 XML 页面）并读取 XML 文档的内容，而不使用 WebBrowser 控件来解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:04:42.120

要解析 XML，您可以使用**LINQtoXML**库（.Net Framework 3.5 以上）

例如，如果您有以下格式的 XML，

```
<rss>
  <report name="rpt1">
    <title>AAA</title>
    <image>some1</image>   
  </report>
  <report name="rpt2">
    <title>BBB</title>
    <image>some3333</image>   
</rss> 
```

此代码将解析它并获取每个项目的`title` & 。`url``report`

```
Dim path As String = "pathTosomexml.xml"
Dim elm As XElement = XElement.Load(path)
If elm IsNot Nothing Then

    For Each page As var In elm.Elements("report")
        Dim title = page.Element("title").Value
        Dim url = page.Element("image").Value

    Next
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T21:02:24.960

除了使用`XDocument`, 和 LINQ，正如其他人所建议的那样，还有其他两种常见的解决方案。一种是使用`XmlDocument`XPath，另一种是使用XML序列化。例如，如果您有以下 XML 文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<Books>
  <Book Title="Book 1">
    <Author>Author 1</Author>
    <Chapter>Chapter 1</Chapter>
    <Chapter>Chapter 2</Chapter>
  </Book>
  <Book Title="Book 2">
    <Author>Author 1</Author>
    <Chapter>Chapter 1</Chapter>
    <Chapter>Chapter 2</Chapter>
  </Book>
</Books> 
```

然后你可以像这样使用 XPath 解析`XmlDocument`和搜索它（其中`xml`是包含上述 XML 的字符串）：

```
Dim doc As New XmlDocument()
doc.LoadXml(xml)
Dim authorOfBook1 As String = doc.SelectSingleNode("/Books/Book[@Title = 'Book 1']/Author").InnerText
Dim booksByAuthor1 As XmlNodeList = doc.SelectNodes("/Books/Book[Author = 'Author 1']")
'etc. 
```

或者，您可以使用序列化来加载 XML 文档，首先，在某些类中定义文档结构：

```
Public Class Books
    <XmlElement("Book")> _
    Public Items As List(Of Book)
End Class

Public Class Book
    <XmlAttribute()> _
    Public Title As String

    <XmlElement("Author")> _
    Public Authors As List(Of String)

    <XmlElement("Chapter")> _
    Public Chapters As List(Of String)
End Class 
```

然后将 XML 反序列化为该类型的对象：

```
Dim serializer As XmlSerializer = New XmlSerializer(GetType(Books))
Using reader As StringReader = New StringReader(xml)
    Dim books As Books = CType(serializer.Deserialize(reader), Books)
    'Analyze contents in books object
End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:59:49.283

将其加载到[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)中，使用[`XDocument.Load`](http://msdn.microsoft.com/en-us/library/bb358684).

这将为您解析文档，以便您可以使用 LINQ to XML 查询它。

# spring - 在语言环境“ru_RU”的代码“avatar.path”下找不到消息。春天的错误

> ID：11906882
> 
> 赞同：0
> 
> 时间：2012-08-10T17:58:22.380
> 
> 标签：spring

我的代码：

```
 private ApplicationContext context;

    @Autowired
    public UserServiceImpl(ApplicationContext context) {
    this.context = context;
    }
     ...     
     Locale bundle = new Locale.Builder().setLanguage("ru").setRegion("RU").build(); 
     String av = context.getMessage("avatar.path", null, bundle); 
```

错误：

> 在语言环境“ru_RU”的代码“avatar.path”下找不到消息。

豆类.xml

```
<beans:bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <beans:property name="basename" value="messages"> </beans:property>
 </beans:bean> 
```

文件夹 src/main/resources/ 中的messages_ru_RU.properties

```
avatar.path = resources/image/avatar.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:14:09.800

文件不是应该在 WEB-INF 中吗？

您可以指定任何您喜欢的值，但我认为它必须与 WEB-INF 相关：下面的示例对我有用。

```
 <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
      <property name="basename" value="/WEB-INF/messagesT" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:28:19.757

您可以尝试使用文件名`messages_ru_RU.properties`

# microcontroller - PIC 18F1220 使几个 LED 闪烁但不能

> ID：11906883
> 
> 赞同：2
> 
> 时间：2012-08-10T17:58:24.533
> 
> 标签：microcontroller, pic

我正在尝试让 PIC 18F1200 闪烁几个 LED，这应该不难。两年多来，我一直在用汇编编程 PIC，16F 和 18F，但这是第一次使用 18F1220。一个 LED 在 PortA,7 上，另一个在 PortB,3 上。我想我要关闭 A/D 模块以及中断。我已经关闭了 MCLR，并且正在使用 8 MHz 的板载振荡器。数据表是我的圣经，我一直在看它，但我最终在 RB3 上得到一个闪烁的 LED，它不是每秒打开和关闭，而是不规则地闪烁。谁能指出我正确的方向。我肯定错过了什么。感谢您的任何回复，我很乐意测试任何建议。

这是我当前的代码：

```
;******************************************************************************
LIST P=18F1220      ;directive to define processor
#Include <P18F1220.INC> ;processor specific variable definitions
; Compiler Directives:
Radix Dec
;******************************************************************************
; Configuration Bits:
CONFIG  OSC = INTIO2    ; Internal RC, OSC1 as RA7, OSC2 as RA6
CONFIG  FSCM = OFF      ; Fail Safe Clock Monitor Disabled
CONFIG  IESO = OFF      ; Internal External Switch Over Mode Disabled
CONFIG  PWRT = OFF      ; Power-Up Timer Disabled
CONFIG  BOR = OFF       ; Brown-out Reset disabled in hardware and software
CONFIG  BORV = 27       ; Brown-out Voltage bits
CONFIG  WDT = OFF       ; HW Disabled - SW Controlled
CONFIG  WDTPS = 1       ; Watchdog Timer Postscale Select bits
CONFIG  MCLRE = OFF     ; MCLR Disabled
CONFIG  STVR = OFF      ; Stack full/underflow will not cause Reset
CONFIG  LVP = OFF       ; Single-Supply ICSP disabled
CONFIG  DEBUG = OFF     ; Background debugger disabled, RB6 and RB7 configured as general purpose I/O pins
CONFIG  CP0 = OFF       ; Block 0 (000800-001FFFh) not code-protected
CONFIG  CP1 = OFF       ; Block 1 (002000-003FFFh) not code-protected
CONFIG  CPB = OFF       ; Boot block (000000-0007FFh) not code-protected
CONFIG  CPD = OFF       ; Data EEPROM not code-protected
CONFIG  WRT0 = OFF      ; Block 0 (000800-001FFFh) not write-protected
CONFIG  WRT1 = OFF      ; Block 1 (002000-003FFFh) not write-protected
CONFIG  WRTB = OFF      ; Configuration registers (300000-3000FFh) not write-protected
CONFIG  WRTC = OFF      ; Boot block (000000-0007FFh) not write-protected
CONFIG  WRTD = OFF      ; Data EEPROM not write-protected
CONFIG  EBTR0 = OFF     ; Block 0 (000800-001FFFh) not protected from table reads executed in other blocks
CONFIG  EBTR1 = OFF     ; Block 1 (002000-003FFFh) not protected from table reads executed in other blocks
CONFIG  EBTRB = OFF     ; Boot block (000000-0007FFh) not protected from table reads executed in other blocks
;******************************************************************************
; Variable definitions
CBLOCK  0x080
Count1
CountA
CountB
ENDC
;******************************************************************************
; Reset vector
ORG     0x0000
GOTO    Main                ; Go to Start of Main Code
;******************************************************************************
; High priority interrupt vector
ORG     0x0008
BRA     HighInt             ; Go to High Priority Interrupt Routine
;******************************************************************************
; Low Priority Interrupt Vector and Routine
ORG     0x0018
BRA     LowInt
;******************************************************************************
; High Priority Interrupt Routine
HighInt:
MOVLW   0x00
MOVWF   EEADR
BCF     EECON1,EEPGD    ; Point to DATA memory
BCF     EECON1,CFGS     ; Access EEPROM
BSF     EECON1,RD       ; EEPROM Read
INCF    EEDATA,F
BCF     EECON1,EEPGD    ; Point to DATA memory
BCF     EECON1,CFGS     ; Access EEPROM
BSF     EECON1,WREN     ; Enable writes
MOVLW   55h             ; REQUIRED SEQUENCE
MOVWF   EECON2          ; | Write 55h
MOVLW   0AAh            ; |
MOVWF   EECON2          ; | Write 0AAh
BSF     EECON1,WR       ; ----- Set WR bit to begin write
BCF     EECON1,WREN     ; Disable writes on write complete (EEIF set)
BTFSS   PIR2,EEIF       ; Check to See if Interrupt Flag Has Been Set
GOTO    $-2             ; Not Set (Write In Progress), Go Back & Check Again
BCF     PIR2,EEIF       ; Clear EEIF Interrupt Flag
RETFIE  FAST
LowInt:
MOVLW   0x01
MOVWF   EEADR
BCF     EECON1,EEPGD    ; Point to DATA memory
BCF     EECON1,CFGS     ; Access EEPROM
BSF     EECON1,RD       ; EEPROM Read
INCF    EEDATA,F
BCF     EECON1,EEPGD    ; Point to DATA memory
BCF     EECON1,CFGS     ; Access EEPROM
BSF     EECON1,WREN     ; Enable writes
MOVLW   55h             ; REQUIRED SEQUENCE
MOVWF   EECON2          ; | Write 55h
MOVLW   0AAh            ; |
MOVWF   EECON2          ; | Write 0AAh
BSF     EECON1,WR       ; ----- Set WR bit to begin write
BCF     EECON1,WREN     ; Disable writes on write complete (EEIF set)
BTFSS   PIR2,EEIF       ; Check to See if Interrupt Flag Has Been Set
GOTO    $-2             ; Not Set (Write In Progress), Go Back & Check Again
BCF     PIR2,EEIF       ; Clear EEIF Interrupt Flag
RETIE
;******************************************************************************
; Start of Main Program
Main:
CALL        INITIALIZE
FlashLED:
BSF         LATB,3          ; Turn On LED
BCF         LATA,7  
CALL        Delay1S         ; Wait 1 Second
BCF         LATB,3          ; Turn Off LED
BSF         LATA,7
CALL        Delay1S         ; Wait 1 Second
GOTO        FlashLED
;******************************************************************************
INITIALIZE:
MOVLW       0x72        ; SET INTERNAL OSCILLATOR FREQUENCY
MOVWF       OSCCON      ; INITIALIZE
MOVLW       0x00        ;
MOVWF       INTCON      ; Disable Interrupts
MOVLW       0x80        ; |
MOVWF       INTCON2     ; |
MOVLW       0x00        ; |
MOVWF       INTCON3     ; |
MOVWF       PIE1        ; |
MOVWF       PIE2        ; |
MOVWF       RCON        ; Disables Interrupts
MOVLW       0X00        ; SET UP PORTB TO BE ALL OUTPUTS   
MOVWF       TRISB       ; INITIALIZE
CLRF        PORTB       ; CLEAR PORTB OUTPUTS
MOVLW       0X00        ; SET UP PORTA TO BE ALL OUTPUTS
MOVWF       TRISA       ; INITIALIZE
CLRF        PORTA       ; CLEAR PORTA
MOVLW       0X00        ; SET UP ADC
MOVWF       ADCON0      ; ENABLE ADC, BUT DO NOT START CONVERSION
MOVLW       0XFF        ; SET UP ADC
MOVWF       ADCON1      ; AN0/RA0=ANALOG INPUT
CALL        Delay50
RETURN
; ===== MilliSecond Delay Subroutines ===== (48 MHz Clock)
Delay255
MOVLW   0xFF            ; Delay 255 MilliSeconds
GOTO    D0
Delay100
MOVLW   0x64            ; Delay 100 MilliSeconds
GOTO    D0
Delay50
MOVLW   0x32            ; Delay 50 MilliSeconds
GOTO    D0
Delay20
MOVLW   0x14            ; Delay 20 Milliseconds
GOTO    D0
Delay5
MOVLW   0x05            ; Delay 5.000 MilliSeconds
D0  MOVWF   Count1
Delay1
MOVLW   0x5F            ; Delay 1.000 MilliSeconds
MOVWF   CountA
MOVLW   0x0A
MOVWF   CountB
MSDelay
DECFSZ  CountA,F
GOTO        SKP
DECFSZ  CountB,F
SKP GOTO        MSDelay
DECFSZ  Count1,F
GOTO        Delay1
RETURN
; ===== 1 Second Delay Subroutine =====
Delay1S                 ; 11,999,993 Cycles
MOVLW   0x6C
MOVWF   Count1
MOVLW   0x29
MOVWF   CountA
MOVLW   0x1B
MOVWF   CountB
Delay1S_Sub
DECFSZ  Count1,F
GOTO        SKP1
DECFSZ  CountA,F
SKP1    GOTO        SKP2
DECFSZ  CountB,F
SKP2    GOTO        Delay1S_Sub
NOP                 ; 3 Cycles
NOP
NOP
RETURN              ; 4 Cycles (Including Call)
; ===== 100 MicroSecond Delay Subroutine =====
Delay100uS                  ; 1,193 Cycles
MOVLW   0xEE
MOVWF   Count1
MOVLW   0x01
MOVWF   CountA
Delay_100uS_Sub
DECFSZ  Count1,F
GOTO        SKP3
DECFSZ  CountA,F
SKP3    GOTO        Delay_100uS_Sub
NOP                     ; 3 Cycles
NOP
NOP
RETURN                  ; 4 Cycles (Including Call)

;******************************************************************************
END                         ;End of Program 
```

添加了 EEPROM 读取和写入序列，以查看是否触发了其中一个中断。查看 EEPROM 内容表明这不是正在发生的事情。

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:27:51.110

你有一个错字！

您的`LowInt`中断没有以`RETFIE`指令结束，而是以标签结束`RETIE`。

# html - 工作位置：设置z-index中的静态

> ID：11906885
> 
> 赞同：0
> 
> 时间：2012-08-10T17:58:34.067
> 
> 标签：html, css, z-index

我试图让稍后在 HTML 中呈现的元素显示在具有显式 z-index 的元素前面 - 见下文：

这是我的情况：

（jsFiddle：http: [//jsfiddle.net/hephistocles/78Wpc/](http://jsfiddle.net/hephistocles/78Wpc/)）

**相关HTML：**

```
<div id="header">
    <div id="slider"></div>
</div>
<div id="content">
    ...
</div>
<div id="footer">
    <div id="navigation">
</div> 
```

**相关CSS：**

```
#slider {
    z-index:20;
}
#navigation {
    position:absolute;
    top:200px;
} 
```

我将导航放在页脚中，因为我希望在导航内容之前加载我的滑块和内容。然后我使用 CSS 将导航拉起，使其显示在滑块上方。

我希望将导航呈现在滑块上方（z-index 明智），以便下拉菜单可点击。我还希望滑块是可点击的（所以 z-index:-1 不是一个选项）。我需要 #footer 有 position:static 所以我不能在那里设置 z-index 。

我认为答案在于在某种程度上重组我的 HTML，但如果可能的话，我确实希望保留它的基本组织。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:30:20.473

两个元素仍然在同一个堆栈上下文中，所以只需将`z-index: 21`（高于`#slider`）添加到 中`#navigation`，它就会推到`#navigation`更高的位置。[见小提琴。](http://jsfiddle.net/78Wpc/1/)

假设你没有设置`z-index`on `#header`or `#footer`（你说你想保持静态），那么堆栈上下文*不会*因为它嵌套在 another 中而发生变化`div`。`z-index`设置*后*，子元素的堆栈上下文就会更改。

# c# - 递归算法找到第一个Leaf节点后停止运行

> ID：11906895
> 
> 赞同：1
> 
> 时间：2012-08-10T15:16:09.940
> 
> 标签：c#, algorithm, recursion

如果以下代码示例中有很多变量您不清楚它们的“类型”，我提前道歉，这是一个很大的库，我不能把所有的东西都放在这里，所以请考虑一下-level，变量的名称也很有帮助......

问题：一个“概念”可以有很多“关系”。这些关系中的每一个也可以有很多概念，例如像父亲和孩子一样，父亲有很多孩子，孩子本身可能是父亲并且有更多孩子等等......所以我想通过根父亲得到所有层次结构并将其写入文件...

我正在使用的高级代码是这样的，问题是当它获得没有更多孩子的孩子时，它会因 Null 异常而崩溃。所以它的对象在这一行是空的：

```
oUCMRConceptReltn = moTargetConceptList.ConceptReltns.get_ItemByIndex(i, false); 
```

所以我想好吧，让我们在它周围做一个非空检查，是的，在它看到第一片叶子之后修复了崩溃，它没有走得更远，算法停止了。所以我调用递归的方式有问题，但无法弄清楚。

```
private void MyLoadMethod(string sConceptCKI)
{
    UCMRConceptLib.UCMRConceptLoadQual oUCMRConceptLoadQual = new UCMRConceptLib.UCMRConceptLoadQual();

    //Fill out UCMRConceptLoadQual object to get new list of related concepts
    moTargetConceptList.Load(oUCMRConceptLoadQual;

    // WHEN IT IS ZERO, THERE ARE NO MORE CHILDREN.
    int numberofKids = moTargetConceptList.ConceptReltns.Count();
    if (numberofKids == 0)
        return ;
    for (int i = 1; i <= numberofKids; i++)
    {
        oUCMRConceptReltn = moTargetConceptList.ConceptReltns.get_ItemByIndex(i, false);

            //Get the concept linked to the relation concept
            if (oUCMRConceptReltn.SourceCKI == sConceptCKI)
            {
                oConcept = moTargetConceptList.ItemByKeyConceptCKI(oUCMRConceptReltn.TargetCKI, false);
            }
            else
            {
                oConcept = moTargetConceptList.ItemByKeyConceptCKI(oUCMRConceptReltn.SourceCKI, false);
            }

            //write its name to the file...now recursion: go and find its children.
            builder.AppendLine("\t" + oConcept.PrimaryCTerm.SourceString);
            MyLoadMethod(oConcept.ConceptCKI);
    }
    return ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:31:00.533

c 风格语言中的大多数索引都是基于 0 的。所以不要循环 1 到 numberofKids，循环 0 到 numberofKids-1。

```
for (int i = 0; i < numberofKids; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:53:12.803

顺便说一句，检查孩子数量为 0 是多余的，因为您永远不会进入循环。

该算法看起来适合您想要做的事情。在这种情况下，您不需要返回任何内容，因为您的算法使用副作用（appendLine）来提供输出。

我不知道 C#，但在我看来，你好像在使用一些不是函数本地的变量，比如`oUCMRConceptReltn`and `oConcept`。如果它们不是函数本地的，则不同的递归调用可能会以意想不到的方式更改这些值。递归函数几乎不应该写入其自身范围之外的变量。

# svn - SVN：管理作为现有项目分支的项目

> ID：11906898
> 
> 赞同：0
> 
> 时间：2012-08-10T17:59:28.363
> 
> 标签：svn, project-management

我开始从事一个项目，该项目是现有（目前正在开发）项目的一个分支。新项目基本上将尝试将现有解决方案应用于新问题，并在必要时对代码进行任何修改，甚至可能对现有项目可能正在修改的相同文件进行修改。但与此同时，我希望能够与其他团队对现有项目所做的任何重要更改保持同步。新应用程序的不同足以证明不同的项目名称或存储库是合理的。

用 SVN 组织/管理新项目的最佳方式是什么？我是否应该只创建现有主干的一个分支并将新项目作为一个永远不会合并回主干的分支来管理？或者我应该完全创建一个不同的存储库并每隔一段时间手动将现有项目的任何更改复制到新项目目录中？手动复制对我来说似乎是一种非常糟糕的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:41:59.420

> 我是否应该只创建现有主干的一个分支并将新项目作为一个永远不会合并回主干的分支来管理？

是的。Subversion 将链接到主干中的文件，而不是复制它们。当您进行更改时，只有更改将保留在您的分支中。

但是，链接指向分支时存在的文件和文件夹的版本。您仍然需要将主干更改复制到您的分支。

最好的解决方案是将通用代码分解出来，并将其放在自己的主干中。

# javascript - 是否有可以将套接字数量限制为 1 或 2 个的 javascript 加载器

> ID：11906900
> 
> 赞同：0
> 
> 时间：2012-08-10T17:59:47.170
> 
> 标签：javascript, connection, loader, limiting

我想创建一个带有 HTML5/JS 单页 AJAX 配置应用程序的联网嵌入式设备。

我的问题是：浏览器现在打开了太多的连接，在我的设备中，并发连接数最多为 4，硬件中有一个 TCP 堆栈（请记住，它是一个嵌入式设备）。

通过大于 4 的套接字的任何请求似乎都会丢失，必须按 F5 直到应用程序和缓存元素的组合位于浏览器中。

现在我最初的想法是使用 js 加载器（将 favicon 作为数据 URL）作为索引文档，然后依次加载应用程序的其余部分（也许还带有进度条，但这太奢侈了）。

理论上，这应该确保一次只打开一个连接。

我发现的所有 js 加载器都是关于在集群负载平衡网络服务器上的宽带环境中并行化和提高速度，但我需要在带有网络服务器的微型 8 位 MCU 上进行序列化和可靠性。

任何提示或方向表示赞赏！

编辑：我不得不为互换使用“套接字”和“连接”而道歉，我的意思是“连接”并相应地更改了原始帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:12:38.750

*可靠地*限制浏览器与您的服务器建立的连接数量的唯一方法是只需要一个连接来加载页面中的所有内容。换句话说，一切都必须是内联的。

```
<!DOCTYPE html>
<html><head><title>MCU app</title>
<link rel="shortcut icon" href="data:...">
<style>
    /* css here */
</style>
<script>
   // JS here
</script>
</head>
<body>

</body>
</html> 
```

当然，注意`<img>`标签。

我考虑的另一个选择是在常规 Web 服务器上托管您的 HTML/JS/CSS/等，并且只对嵌入式设备进行 API 调用。

例如，您将在浏览器中打开*mycoolembeddedapp.com 。*该应用程序可以请求嵌入式设备的 IP 地址，然后使用 CORS 对该 IP 进行 AJAX 调用。

# javascript - 如何强制 XMLHttpRequest 仅使用 ISO-8859-1 字符集？

> ID：11906904
> 
> 赞同：3
> 
> 时间：2012-08-10T18:00:27.483
> 
> 标签：javascript, ajax, encoding

我有 ISO-8859-1 数据库，所以我喜欢完全在这个代码页中交换请求。那么，如何正确设置 AJAX 请求的 content-type 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-19T18:24:54.380

尽管这样做很糟糕（上面的一堆评论），但这会起作用：

```
var xhr = new XMLHttpRequest(); 
xhr.open("GET", path, false);
xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=ISO-8859-1') 
```

如果您使用的是 jQuery：[https ://stackoverflow.com/a/553572/2527433](https://stackoverflow.com/a/553572/2527433)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T12:27:18.530

根据[XMLHttpRequest.send()](http://www.w3.org/TR/XMLHttpRequest/#the-send%28%29-method)的 W3C 规范，在几乎所有情况下，字符集最终都是 UTF-8，具体取决于*data*的值。即使您指定的任何字符集编码也可能会被 UTF-8 覆盖：

> 如果 Content-Type 标头在作者请求标头中，并且它的值是一个有效的 MIME 类型，该类型的 charset 参数的值不是不区分大小写的*encoding*匹配，并且*encoding*不为 null，则设置该 Content 的所有 charset 参数- 类型标头*编码*。

用户代理有一些回旋余地来确定编码：将包含 AJAX 的页面的编码设置为 ISO-8859-1。然后，UA 将为所有表单提交（除非表单另外指定不同的编码）和可能的 AJAX 提交假定 ISO，这取决于 W3C 算法的解释。

最终，唯一可靠的解决方案是将访问者看到的页面（上面带有 AJAX）设置为 ISO-8859-1，然后确保检查它并在后端转换为 ISO（您**需要进行清理在将其发送到数据库之前的所有用户输入**，因此只需将此转换添加到流程中）。在 PHP 或您给定的语言中有很多库函数可以做到这一点。否则无法保证符合规范，因此绝对检查/确保后端的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T14:38:29.727

我想我需要解释编码和字符集参数。这些涉及如何解码通过网络发送的原始字节。

例如，考虑内容类型`application/x-www-form-urlencoded`和以下数据：

```
0x61253344254345254232 
```

因为没有字符集（事实上，字符集是这种内容类型的非法参数......）必须假定 ISO-8859-1。因此，在 ISO-8859-1 结果中对上述内容进行解码：

```
"a%3D%CE%B2" 
```

现在有另一种格式要解码（格式 urlencoded），它有自己的规则。[目前的规范说这里的百分比编码必须是 UTF-8](http://www.w3.org/TR/html5/forms.html#application/x-www-form-urlencoded-encoding-algorithm)，所以在进行*string* -> *string*转换之后，你可以从上面得到：

```
"a=ß" 
```

如您所见，该格式从不使用 ASCII 以外的字符，因此字符集并不重要，也不支持。

* * *

您的实际问题与百分比编码使用的编码无关。即使您在 ISO-8859-1 中定义了百分比编码的自定义函数，服务器仍然必须在到达时对其进行解码并为数据库进行编码。你没有任何好处。

# web-applications - 一个主机名上不同端口上的两个应用程序的 SSL 代理

> ID：11906906
> 
> 赞同：0
> 
> 时间：2012-08-10T18:00:37.823
> 
> 标签：web-applications, ssl, nginx, port

我们使用 Nginx 作为 SSL 代理，并且在两个不同的端口上有一个主机名和两个应用程序。如果可能的话，在 nginx.conf 中进行设置的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:09:57.687

因为它都是内部的，所以我们这样做的简单方法是为同一主机上的另一个端口添加另一条监听线。

它不起作用的原因是因为我将 IPTABLES 锁定并忘记了。

解决了。抱歉，添麻烦了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:44:23.460

为您的应用程序设置命名位置，并参考 try_files 指令中的位置：

```
server {
  location @app1 {
    ... (proxy/fcgi/sgci directives depending on what kind of app you're directing to)
  }

  location @app2 {
    ... (proxy/fcgi/sgci directives depending on what kind of app you're directing to)
  }

  location /app-path1/ {try_files @app1;}
  location /app-path2/ {try_files @app2;}
} 
```

# ruby-on-rails - Ruby毫无例外地获得回溯

> ID：11906909
> 
> 赞同：8
> 
> 时间：2012-08-10T18:00:46.297
> 
> 标签：ruby-on-rails, ruby

我有一个 Ruby on Rails 应用程序，其中一个模型的验证失败。对于此验证可能失败的代码库有不同的入口点。我有兴趣弄清楚它来自哪里。由于它是一种简单的验证方法，因此不涉及任何异常，我只是从方法中返回 false 并且保存失败。

当前是否还可以记录回溯以找出此验证源自哪个服务/路由，以便我可以查看是什么导致该对象的状态更改以使其验证失败？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T19:15:08.320

你可以试试`caller()`：

```
def foo2
  puts caller
end
def foo
  foo2   #line5
end 
foo     #line 7 
```

结果：

```
test.rb:5:in `foo'
test.rb:7:in `<main>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:28:22.250

我不确定这样做的聪明方法，但这将完成工作。你甚至可以将它包装在一个不错的小函数中。我不确定抛出异常并拯救它们是否会影响性能，但你可能不想在生产中做这样的事情。

```
begin
  throw
rescue
  puts $!.backtrace
end 
```

# java - Java 静态与实例

> ID：11906913
> 
> 赞同：25
> 
> 时间：2012-08-10T18:01:06.950
> 
> 标签：java, static, instance

所以我的编码朋友讨厌使用`static`编码。然而，我的 Java 程序充满了类之间的链接，而且我有很多！

是否值得重写整个代码以删除静态方法？

使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-10T18:38:40.177

**1.**一个实例变量是*每个对象一个*，每个对象都有**自己的实例变量副本。**

**例如：**

```
public class Test{

   int x = 5;

 }

Test t1 = new Test();   
Test t2 = new Test(); 
```

两者都`t1`将`t2`拥有**自己的** `x`.

**2.***每个 Class*一个静态变量，**该类的每个对象共享同一个静态变量。**

**例如：**

```
public class Test{

   public static int x = 5;

 }

Test t1 = new Test();   
Test t2 = new Test(); 
```

两者都`t1`将`t2`有**一个 x 在它们之间共享。**

**3.** JVM 加载类时初始化一个静态变量。

**4.** A`static method` **不能**访问`Non-static`变量或方法。

**5.** as well as可以**模仿**a `Static methods`，但这*不是正确的*方式，因为当有很多类时，我们无法确定JVM的类加载顺序，这可能会产生问题。`Static variables`**`Singleton Pattern`**

 **** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T18:02:55.180

`static`适用于您不想为每个实例都有副本的情况

`instance`变量适用于您希望为每个对象实例单独复制的情况。

根据业务案例，使用哪一个可能会发生变化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-10T18:06:01.097

如果你有太多的静态函数和变量，它可能会导致更实用的方法而不是真正的 OO。此外，如果您有公共静态变量，那么您复制不好的全局变量。跟踪他们是一场噩梦。

一般来说，我的规则是如果可以使用实例变量，并且只有静态变量和函数确实是类而不是对象的泛型时才使用

这是对类似问题 Java 的一个很好的回答 [：何时使用静态方法](https://stackoverflow.com/questions/2671496/java-when-to-use-static-methods)

考虑使用新操作来创建新对象并以非静态方式从该对象访问方法，而不是仅仅链接到方法。

前

```
public void myMethod(){
    Time.setTime(Time.getTime() + 20);
    System.out.println(Time.getTime());
} 
```

后

```
public void myMethod(){
    Time t = new Time();
    t.setTime(t.getTime() + 20);
    System.out.println(t.getTime());
} 
```

这些方法中保存的任何状态现在都将成为您创建的时间实例。如果需要，您还可以在其他方法中共享变量 t。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T18:04:41.330

垃圾收集 - 静态字段的寿命比实例字段长得多。从逻辑的角度来看，静态字段仅假设在每个实例之间共享 - 如果确实是您的情况，那么当然没有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T18:10:51.653

您是在谈论静态方法还是静态属性？

就静态方法而言，只有一种方法可以滥用它们，那就是定义将对象实例作为参数的方法。你永远不需要这样做，在我看来，这样做是糟糕的编码实践。这是一个例子：

```
static int add(ThisClass a, ThisClass b) {
   return a.value + b.value;
} 
```

如果您在谈论类中的静态变量，那么您基本上进入了“单例”的主题，即只有一个特定类的实例。单身人士受到很多虐待。它们被许多类库（想想 JDNI 和日志记录类）使用，但如果应用程序大量使用它们，则可能表明程序结构不佳。这可能是你朋友在抱怨的地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-10T13:08:11.513

**实例和静态变量：**

回答您的问题：我会说值得使用静态变量来节省内存分配。

**内存分配：**

对于**静态变量**，无论是否创建对象，只分配一个内存位置，对于**实例变量**，每个对象分配一个内存位置

现在考虑这个例子，假设您正在处理公司内部项目，您必须为 Employee 类创建 1M 对象，并且**Employee**类的一些属性现在是**eid、ename、ecompany**重要的是所有员工都在**XYZ**公司工作，所以价值无论员工如何，财产**公司**都将是“XYZ”。

现在您知道情况了，该物业公司的价值**将**是**XYZ**代表 100 万个对象。

Now you decide you want to declare **ecomapny** property as static or instance considering memory allocation

if you declare it as a static then minimum memory allocated to **ecompany** will be only 48 bytes which very less compare to memory needed to store 1 Million instance variable. 100000 * 48 bytes = 48 Million bytes.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T18:06:33.027

当您使用静态对象时（除了单例），您实际上是在实现与全局变量相结合的函数式编程。如果您经常这样做 - 您应该重新考虑您的设计或使用 Java（也许您应该使用函数式编程语言，如列表、方案等）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-03T12:43:21.033

**专业静态**

一旦从类的内部或外部调用了一个静态成员，就会调用该类的静态构造函数。“静态对象”将贯穿整个会话，因此您将在性能上获胜。

**康静态**

静态成员不能有状态，因此它们不能与类的非静态成员对话。

**例子**

如果我们考虑[BigInteger 类](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)，如果将某些部分制成静态成员，则该类*会有所收获。*

该类的一个实例（如预期的那样）代表一个大整数。

但是，主要方法 add 和 multiply 不是静态的（它们应该在更好的世界中），这对性能不利。

因此，在实践中，不应该害怕静态和非静态之间的混合。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-20T06:49:55.930

我不喜欢使用静态变量或方法，因为它们没有真正的继承。这使得模拟测试变得更加困难。使用实例为您提供了完全多态的灵活性。另一方面，有时静态变量是必需的，例如使用全局缓存。如果静态方法为您无法访问或扩展的类/对象/基元提供辅助方法，则它们可能会带来好处。这些辅助方法非常简单，不需要继承。例如 java.util.Arrays 类或 java.util.Collections。***

# javascript - IE7中的window.onload

> ID：11906914
> 
> 赞同：-3
> 
> 时间：2012-08-10T18:01:08.693
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-7

我有这个 javascript 在 chrome 中完美运行，但在 IE7 上无法运行：

id icsave 的点击，不起作用。没有任何反应，icsave 正常保存页面

```
window.onload = function() {
    if ($('#MODE').val() != 'U') {
        $('#MOD_BY_JS').val( % 1);
        clik('#ICSave')
    }
};

function clik(element) {
    try {
        document.getElementById(element).click();
    }
    catch (e) {
        var evt = document.createEvent("MouseEvents");
        evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        var cb = document.getElementById(element);
        cb.dispatchEvent(evt);
    }
};​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:03:53.227

`window.onload`由于多种原因可能无法执行。

*   页面上的某些资源没有加载（图像），因为`window.onload`只有在所有资源都加载后才会触发。
*   有些东西正在覆盖`window.onload`
*   您在其他地方遇到了 javascript 错误

我对您的建议是，由于您使用的是 jQuery，请使用：

```
$(document).ready(function(){ /* initialize stuff */}); 
```

或者如果你真的需要`onload`

```
$(window).load(function(){ /* initialize stuff */}); 
```

对于您的示例，我建议使用该`$(document).ready(...)`方法，因为在我看来，您的脚本将在 dom 准备好后立即运行，即`ready`事件触发时。

# c# - 数组写成 name[x, y] 而不是 name[x][y]

> ID：11906917
> 
> 赞同：3
> 
> 时间：2012-08-10T18:01:30.693
> 
> 标签：c#, .net, arrays

这两种语法有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T18:05:18.723

第一个是多维数组，第二个是锯齿状数组。您可以查看[这个问题](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c)以了解两者之间的差异，但这里有一个重要的片段：

> 多维数组创建了一个很好的线性内存布局，而锯齿状数组意味着几个额外的间接级别。
> 
> 在锯齿状数组中查找值 jagged[3][6] var jagged = new int[10][5] 的工作方式如下：查找索引 3 处的元素（这是一个数组）并查找索引处的元素6 在该数组中（这是一个值）。在这种情况下，对于每个维度，都有一个额外的查找（这是一种昂贵的内存访问模式）。
> 
> 多维数组在内存中线性布局，实际值是通过将索引相乘来找到的。但是，给定数组 var mult = new int[10,30]，该多维数组的 Length 属性返回元素的总数，即 10 * 30 = 300。
> 
> 锯齿状数组的 Rank 属性始终为 1，但多维数组可以有任何秩。任何数组的GetLength方法都可以用来获取每个维度的长度。对于本例中的多维数组，mult.GetLength(1) 返回 30。
> 
> 索引多维数组更快，例如在本例中给定多维数组 mult[1,7] = 30 * 1 + 7 = 37，获取索引 37 处的元素。这是一种更好的内存访问模式，因为只有一个内存位置是涉及到，也就是数组的基地址。
> 
> 因此，多维数组分配一个连续的内存块，而锯齿状数组不必是方形的。例如 jagged [1](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c) .Length 不必等于 jagged[2].Length ，这对于任何多维数组都是正确的。

更新：

multi 和 jagged 数组之间的一个主要区别是 multi 必须始终是“正方形”，这意味着任何两个索引在其子数组中将具有相同数量的元素。锯齿状阵列没有这个要求。看看下面的代码：

```
var jagged = new int[3][]; //not defining the size of the child array...
var multi = new int[3,8]; //defining a 3x8 "square"
var multiBad = new int[3,]; //Syntax error!
var jaggedSquare= new int[3][8]; //another 3x8 "square" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:04:20.093

前者是一个二维数组。后者是一个数组，其元素也是数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:05:27.343

第一个是多维数组

第二个是数组数组

# android - 将 XMPP 数据包发送到 Android 上的 Openfire 插件

> ID：11906921
> 
> 赞同：2
> 
> 时间：2012-08-10T18:01:56.377
> 
> 标签：android, xmpp, send, packet, openfire

我正在尝试实现一个简单的 Android 应用程序，它可以在为 Openfire 服务器编写的插件之间发送和接收数据包。该插件旨在从客户端接收数据包以进行进一步处理。所以这不是聊天。以下代码片段显示了我向服务器发送数据包的方式：

```
ConnectionConfiguration configuration = new ConnectionConfiguration(
        HOST, PORT);
Connection connection = new XMPPConnection(configuration);
try {
    connection.connect();
} catch (XMPPException e) {
    e.printStackTrace();
}
if (connection.isConnected()) {
    Packet packet = new Message();
    packet.setFrom("123456789@localhost");
    packet.setTo("987654321@component.localhost");
    connection.sendPacket(packet);
    connection.disconnect();
} 
```

HOST 和 PORT 是预定义的常量。

我尝试在插件内的 if 子句中使用代码，它运行良好 - 组件接收数据包并与它们一起工作。但是，在我的 Android 应用程序中，此代码不起作用 - 数据包无法到达组件。

所以，伙计们，如果您有任何建议，我将非常感谢您的帮助。也许我在某处使用了错误的技术——我是 XMPP 和 Openfire 的新手。

* * *

## 更新

应用程序清单中有所有需要的权限。HOST 等于运行 Openfire 服务器的 PC 的静态 IP 地址。

```
private static final String HOST = "192.168.1.100";
private static final int PORT = 5222; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:17:41.310

为了将数据包发送到服务器，您应该使用`login()`或类`loginAnonymously()`方法登录到它`org.jivesoftware.smack.Connection`。

谢谢先生。流的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:33:39.730

连接和断开

 ````
// Create the configuration for this new connection
ConnectionConfiguration config = new ConnectionConfiguration("jabber.org", 5222);
config.setCompressionEnabled(true);
config.setSASLAuthenticationEnabled(true);

Connection connection = new XMPPConnection(config);
// Connect to the server
connection.connect();
// Log into the server
connection.login("username", "password", "SomeResource");
....
// Disconnect from the server
connection.disconnect();
</code> 
```

你应该先登录，这里是管理连接的指南[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/connections.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/connections.html)`

# python - Python模拟keydown

> ID：11906925
> 
> 赞同：38
> 
> 时间：2012-08-10T18:02:04.780
> 
> 标签：python, windows, keypress, keydown, simulate

在搜索了几个小时后，我想知道是否可以模拟键盘上的按键按下。例如，我希望我的程序按住`x`键五秒钟，所以当我在记事本中运行它时，它看起来像这样`xxxxxxxxxxxxx`：我在互联网上尝试了不同的代码，到目前为止我能找到的最好的东西是：

```
import ctypes
import time
user32 = ctypes.windll.user32
inputhex = raw_input("Please enter your desired key's code (HEX): ")
keycode = int(inputhex, 16)
time.sleep(1)
#VOID keybd_event(BYTE bVk, BYTE bScan, DWORD dwFlags, PTR dwExtraInfo);
user32.keybd_event(keycode,0,2,0) #is the code for KEYDOWN
time.sleep(5)
#user32.keybd_event(keycode,0,0,0) #is the code for KEYDUP[/code] 
```

Sendkey 模块也不能解决我的问题，因为它只允许您发送单个按键而不是按住按键事件。我知道 autoit，过去使用过它，但我真的很想知道这是否可以用 python 以及如何实现。PS我正在使用python for windows

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-10T23:34:29.877

此代码应该可以帮助您入门。`ctypes`被大量使用。在底部，您将看到示例代码。

```
import ctypes

LONG = ctypes.c_long
DWORD = ctypes.c_ulong
ULONG_PTR = ctypes.POINTER(DWORD)
WORD = ctypes.c_ushort

class MOUSEINPUT(ctypes.Structure):
    _fields_ = (('dx', LONG),
                ('dy', LONG),
                ('mouseData', DWORD),
                ('dwFlags', DWORD),
                ('time', DWORD),
                ('dwExtraInfo', ULONG_PTR))

class KEYBDINPUT(ctypes.Structure):
    _fields_ = (('wVk', WORD),
                ('wScan', WORD),
                ('dwFlags', DWORD),
                ('time', DWORD),
                ('dwExtraInfo', ULONG_PTR))

class HARDWAREINPUT(ctypes.Structure):
    _fields_ = (('uMsg', DWORD),
                ('wParamL', WORD),
                ('wParamH', WORD))

class _INPUTunion(ctypes.Union):
    _fields_ = (('mi', MOUSEINPUT),
                ('ki', KEYBDINPUT),
                ('hi', HARDWAREINPUT))

class INPUT(ctypes.Structure):
    _fields_ = (('type', DWORD),
                ('union', _INPUTunion))

def SendInput(*inputs):
    nInputs = len(inputs)
    LPINPUT = INPUT * nInputs
    pInputs = LPINPUT(*inputs)
    cbSize = ctypes.c_int(ctypes.sizeof(INPUT))
    return ctypes.windll.user32.SendInput(nInputs, pInputs, cbSize)

INPUT_MOUSE = 0
INPUT_KEYBOARD = 1
INPUT_HARDWARE = 2

def Input(structure):
    if isinstance(structure, MOUSEINPUT):
        return INPUT(INPUT_MOUSE, _INPUTunion(mi=structure))
    if isinstance(structure, KEYBDINPUT):
        return INPUT(INPUT_KEYBOARD, _INPUTunion(ki=structure))
    if isinstance(structure, HARDWAREINPUT):
        return INPUT(INPUT_HARDWARE, _INPUTunion(hi=structure))
    raise TypeError('Cannot create INPUT structure!')

WHEEL_DELTA = 120
XBUTTON1 = 0x0001
XBUTTON2 = 0x0002
MOUSEEVENTF_ABSOLUTE = 0x8000
MOUSEEVENTF_HWHEEL = 0x01000
MOUSEEVENTF_MOVE = 0x0001
MOUSEEVENTF_MOVE_NOCOALESCE = 0x2000
MOUSEEVENTF_LEFTDOWN = 0x0002
MOUSEEVENTF_LEFTUP = 0x0004
MOUSEEVENTF_RIGHTDOWN = 0x0008
MOUSEEVENTF_RIGHTUP = 0x0010
MOUSEEVENTF_MIDDLEDOWN = 0x0020
MOUSEEVENTF_MIDDLEUP = 0x0040
MOUSEEVENTF_VIRTUALDESK = 0x4000
MOUSEEVENTF_WHEEL = 0x0800
MOUSEEVENTF_XDOWN = 0x0080
MOUSEEVENTF_XUP = 0x0100

def MouseInput(flags, x, y, data):
    return MOUSEINPUT(x, y, data, flags, 0, None)

VK_LBUTTON = 0x01               # Left mouse button
VK_RBUTTON = 0x02               # Right mouse button
VK_CANCEL = 0x03                # Control-break processing
VK_MBUTTON = 0x04               # Middle mouse button (three-button mouse)
VK_XBUTTON1 = 0x05              # X1 mouse button
VK_XBUTTON2 = 0x06              # X2 mouse button
VK_BACK = 0x08                  # BACKSPACE key
VK_TAB = 0x09                   # TAB key
VK_CLEAR = 0x0C                 # CLEAR key
VK_RETURN = 0x0D                # ENTER key
VK_SHIFT = 0x10                 # SHIFT key
VK_CONTROL = 0x11               # CTRL key
VK_MENU = 0x12                  # ALT key
VK_PAUSE = 0x13                 # PAUSE key
VK_CAPITAL = 0x14               # CAPS LOCK key
VK_KANA = 0x15                  # IME Kana mode
VK_HANGUL = 0x15                # IME Hangul mode
VK_JUNJA = 0x17                 # IME Junja mode
VK_FINAL = 0x18                 # IME final mode
VK_HANJA = 0x19                 # IME Hanja mode
VK_KANJI = 0x19                 # IME Kanji mode
VK_ESCAPE = 0x1B                # ESC key
VK_CONVERT = 0x1C               # IME convert
VK_NONCONVERT = 0x1D            # IME nonconvert
VK_ACCEPT = 0x1E                # IME accept
VK_MODECHANGE = 0x1F            # IME mode change request
VK_SPACE = 0x20                 # SPACEBAR
VK_PRIOR = 0x21                 # PAGE UP key
VK_NEXT = 0x22                  # PAGE DOWN key
VK_END = 0x23                   # END key
VK_HOME = 0x24                  # HOME key
VK_LEFT = 0x25                  # LEFT ARROW key
VK_UP = 0x26                    # UP ARROW key
VK_RIGHT = 0x27                 # RIGHT ARROW key
VK_DOWN = 0x28                  # DOWN ARROW key
VK_SELECT = 0x29                # SELECT key
VK_PRINT = 0x2A                 # PRINT key
VK_EXECUTE = 0x2B               # EXECUTE key
VK_SNAPSHOT = 0x2C              # PRINT SCREEN key
VK_INSERT = 0x2D                # INS key
VK_DELETE = 0x2E                # DEL key
VK_HELP = 0x2F                  # HELP key
VK_LWIN = 0x5B                  # Left Windows key (Natural keyboard)
VK_RWIN = 0x5C                  # Right Windows key (Natural keyboard)
VK_APPS = 0x5D                  # Applications key (Natural keyboard)
VK_SLEEP = 0x5F                 # Computer Sleep key
VK_NUMPAD0 = 0x60               # Numeric keypad 0 key
VK_NUMPAD1 = 0x61               # Numeric keypad 1 key
VK_NUMPAD2 = 0x62               # Numeric keypad 2 key
VK_NUMPAD3 = 0x63               # Numeric keypad 3 key
VK_NUMPAD4 = 0x64               # Numeric keypad 4 key
VK_NUMPAD5 = 0x65               # Numeric keypad 5 key
VK_NUMPAD6 = 0x66               # Numeric keypad 6 key
VK_NUMPAD7 = 0x67               # Numeric keypad 7 key
VK_NUMPAD8 = 0x68               # Numeric keypad 8 key
VK_NUMPAD9 = 0x69               # Numeric keypad 9 key
VK_MULTIPLY = 0x6A              # Multiply key
VK_ADD = 0x6B                   # Add key
VK_SEPARATOR = 0x6C             # Separator key
VK_SUBTRACT = 0x6D              # Subtract key
VK_DECIMAL = 0x6E               # Decimal key
VK_DIVIDE = 0x6F                # Divide key
VK_F1 = 0x70                    # F1 key
VK_F2 = 0x71                    # F2 key
VK_F3 = 0x72                    # F3 key
VK_F4 = 0x73                    # F4 key
VK_F5 = 0x74                    # F5 key
VK_F6 = 0x75                    # F6 key
VK_F7 = 0x76                    # F7 key
VK_F8 = 0x77                    # F8 key
VK_F9 = 0x78                    # F9 key
VK_F10 = 0x79                   # F10 key
VK_F11 = 0x7A                   # F11 key
VK_F12 = 0x7B                   # F12 key
VK_F13 = 0x7C                   # F13 key
VK_F14 = 0x7D                   # F14 key
VK_F15 = 0x7E                   # F15 key
VK_F16 = 0x7F                   # F16 key
VK_F17 = 0x80                   # F17 key
VK_F18 = 0x81                   # F18 key
VK_F19 = 0x82                   # F19 key
VK_F20 = 0x83                   # F20 key
VK_F21 = 0x84                   # F21 key
VK_F22 = 0x85                   # F22 key
VK_F23 = 0x86                   # F23 key
VK_F24 = 0x87                   # F24 key
VK_NUMLOCK = 0x90               # NUM LOCK key
VK_SCROLL = 0x91                # SCROLL LOCK key
VK_LSHIFT = 0xA0                # Left SHIFT key
VK_RSHIFT = 0xA1                # Right SHIFT key
VK_LCONTROL = 0xA2              # Left CONTROL key
VK_RCONTROL = 0xA3              # Right CONTROL key
VK_LMENU = 0xA4                 # Left MENU key
VK_RMENU = 0xA5                 # Right MENU key
VK_BROWSER_BACK = 0xA6          # Browser Back key
VK_BROWSER_FORWARD = 0xA7       # Browser Forward key
VK_BROWSER_REFRESH = 0xA8       # Browser Refresh key
VK_BROWSER_STOP = 0xA9          # Browser Stop key
VK_BROWSER_SEARCH = 0xAA        # Browser Search key
VK_BROWSER_FAVORITES = 0xAB     # Browser Favorites key
VK_BROWSER_HOME = 0xAC          # Browser Start and Home key
VK_VOLUME_MUTE = 0xAD           # Volume Mute key
VK_VOLUME_DOWN = 0xAE           # Volume Down key
VK_VOLUME_UP = 0xAF             # Volume Up key
VK_MEDIA_NEXT_TRACK = 0xB0      # Next Track key
VK_MEDIA_PREV_TRACK = 0xB1      # Previous Track key
VK_MEDIA_STOP = 0xB2            # Stop Media key
VK_MEDIA_PLAY_PAUSE = 0xB3      # Play/Pause Media key
VK_LAUNCH_MAIL = 0xB4           # Start Mail key
VK_LAUNCH_MEDIA_SELECT = 0xB5   # Select Media key
VK_LAUNCH_APP1 = 0xB6           # Start Application 1 key
VK_LAUNCH_APP2 = 0xB7           # Start Application 2 key
VK_OEM_1 = 0xBA                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the ';:' key
VK_OEM_PLUS = 0xBB              # For any country/region, the '+' key
VK_OEM_COMMA = 0xBC             # For any country/region, the ',' key
VK_OEM_MINUS = 0xBD             # For any country/region, the '-' key
VK_OEM_PERIOD = 0xBE            # For any country/region, the '.' key
VK_OEM_2 = 0xBF                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the '/?' key
VK_OEM_3 = 0xC0                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the '`~' key
VK_OEM_4 = 0xDB                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the '[{' key
VK_OEM_5 = 0xDC                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the '\|' key
VK_OEM_6 = 0xDD                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the ']}' key
VK_OEM_7 = 0xDE                 # Used for miscellaneous characters; it can vary by keyboard.
                                # For the US standard keyboard, the 'single-quote/double-quote' key
VK_OEM_8 = 0xDF                 # Used for miscellaneous characters; it can vary by keyboard.
VK_OEM_102 = 0xE2               # Either the angle bracket key or the backslash key on the RT 102-key keyboard
VK_PROCESSKEY = 0xE5            # IME PROCESS key
VK_PACKET = 0xE7                # Used to pass Unicode characters as if they were keystrokes. The VK_PACKET key is the low word of a 32-bit Virtual Key value used for non-keyboard input methods. For more information, see Remark in KEYBDINPUT, SendInput, WM_KEYDOWN, and WM_KEYUP
VK_ATTN = 0xF6                  # Attn key
VK_CRSEL = 0xF7                 # CrSel key
VK_EXSEL = 0xF8                 # ExSel key
VK_EREOF = 0xF9                 # Erase EOF key
VK_PLAY = 0xFA                  # Play key
VK_ZOOM = 0xFB                  # Zoom key
VK_PA1 = 0xFD                   # PA1 key
VK_OEM_CLEAR = 0xFE             # Clear key

KEYEVENTF_EXTENDEDKEY = 0x0001
KEYEVENTF_KEYUP = 0x0002
KEYEVENTF_SCANCODE = 0x0008
KEYEVENTF_UNICODE = 0x0004

KEY_0 = 0x30
KEY_1 = 0x31
KEY_2 = 0x32
KEY_3 = 0x33
KEY_4 = 0x34
KEY_5 = 0x35
KEY_6 = 0x36
KEY_7 = 0x37
KEY_8 = 0x38
KEY_9 = 0x39
KEY_A = 0x41
KEY_B = 0x42
KEY_C = 0x43
KEY_D = 0x44
KEY_E = 0x45
KEY_F = 0x46
KEY_G = 0x47
KEY_H = 0x48
KEY_I = 0x49
KEY_J = 0x4A
KEY_K = 0x4B
KEY_L = 0x4C
KEY_M = 0x4D
KEY_N = 0x4E
KEY_O = 0x4F
KEY_P = 0x50
KEY_Q = 0x51
KEY_R = 0x52
KEY_S = 0x53
KEY_T = 0x54
KEY_U = 0x55
KEY_V = 0x56
KEY_W = 0x57
KEY_X = 0x58
KEY_Y = 0x59
KEY_Z = 0x5A

def KeybdInput(code, flags):
    return KEYBDINPUT(code, code, flags, 0, None)

def HardwareInput(message, parameter):
    return HARDWAREINPUT(message & 0xFFFFFFFF,
                         parameter & 0xFFFF,
                         parameter >> 16 & 0xFFFF)

def Mouse(flags, x=0, y=0, data=0):
    return Input(MouseInput(flags, x, y, data))

def Keyboard(code, flags=0):
    return Input(KeybdInput(code, flags))

def Hardware(message, parameter=0):
    return Input(HardwareInput(message, parameter))

################################################################################

import string

UPPER = frozenset('~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:"ZXCVBNM<>?')
LOWER = frozenset("`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./")
ORDER = string.ascii_letters + string.digits + ' \b\r\t'
ALTER = dict(zip('!@#$%^&*()', '1234567890'))
OTHER = {'`': VK_OEM_3,
         '~': VK_OEM_3,
         '-': VK_OEM_MINUS,
         '_': VK_OEM_MINUS,
         '=': VK_OEM_PLUS,
         '+': VK_OEM_PLUS,
         '[': VK_OEM_4,
         '{': VK_OEM_4,
         ']': VK_OEM_6,
         '}': VK_OEM_6,
         '\\': VK_OEM_5,
         '|': VK_OEM_5,
         ';': VK_OEM_1,
         ':': VK_OEM_1,
         "'": VK_OEM_7,
         '"': VK_OEM_7,
         ',': VK_OEM_COMMA,
         '<': VK_OEM_COMMA,
         '.': VK_OEM_PERIOD,
         '>': VK_OEM_PERIOD,
         '/': VK_OEM_2,
         '?': VK_OEM_2}

def keyboard_stream(string):
    mode = False
    for character in string.replace('\r\n', '\r').replace('\n', '\r'):
        if mode and character in LOWER or not mode and character in UPPER:
            yield Keyboard(VK_SHIFT, mode and KEYEVENTF_KEYUP)
            mode = not mode
        character = ALTER.get(character, character)
        if character in ORDER:
            code = ord(character.upper())
        elif character in OTHER:
            code = OTHER[character]
        else:
            continue
            #Or, to abort on unavailable character
            #raise ValueError('String is not understood!')
        yield Keyboard(code)
        yield Keyboard(code, KEYEVENTF_KEYUP)
    if mode:
        yield Keyboard(VK_SHIFT, KEYEVENTF_KEYUP)

################################################################################

import time, sys

def main():
    time.sleep(5)
    for event in keyboard_stream('o2E^uXh#:SHn&HQ+t]YF'):
        SendInput(event)
        time.sleep(0.1)

##if __name__ == '__main__':
##    main()

def switch_program():
    SendInput(Keyboard(VK_MENU), Keyboard(VK_TAB))
    time.sleep(0.2)
    SendInput(Keyboard(VK_TAB, KEYEVENTF_KEYUP),
              Keyboard(VK_MENU, KEYEVENTF_KEYUP))
    time.sleep(0.2)

def select_line():
    SendInput(Keyboard(VK_SHIFT, KEYEVENTF_EXTENDEDKEY),
              Keyboard(VK_END, KEYEVENTF_EXTENDEDKEY))
    time.sleep(0.2)
    SendInput(Keyboard(VK_SHIFT, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP),
              Keyboard(VK_END, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP))
    time.sleep(0.2)

def copy_line():
    SendInput(Keyboard(VK_CONTROL), Keyboard(KEY_C))
    time.sleep(0.2)
    SendInput(Keyboard(VK_CONTROL, KEYEVENTF_KEYUP),
              Keyboard(KEY_C, KEYEVENTF_KEYUP))
    time.sleep(0.2)

def next_line():
    SendInput(Keyboard(VK_HOME), Keyboard(VK_DOWN))
    time.sleep(0.2)
    SendInput(Keyboard(VK_HOME, KEYEVENTF_KEYUP),
              Keyboard(VK_DOWN, KEYEVENTF_KEYUP))
    time.sleep(0.2)

def prepare_text():
    # Open Text
    SendInput(Keyboard(KEY_M))
    time.sleep(0.2)
    SendInput(Keyboard(KEY_M, KEYEVENTF_KEYUP))
    time.sleep(0.2)
    # Goto Area
    SendInput(Keyboard(VK_TAB))
    time.sleep(0.2)
    SendInput(Keyboard(VK_TAB, KEYEVENTF_KEYUP))
    time.sleep(0.2)
    # Paste Message
    SendInput(Keyboard(VK_CONTROL), Keyboard(KEY_V))
    time.sleep(0.2)
    SendInput(Keyboard(VK_CONTROL, KEYEVENTF_KEYUP),
              Keyboard(KEY_V, KEYEVENTF_KEYUP))
    time.sleep(0.2)
    # Goto Button
    SendInput(Keyboard(VK_TAB))
    time.sleep(0.2)
    SendInput(Keyboard(VK_TAB, KEYEVENTF_KEYUP))
    time.sleep(0.2)

def send_one_message():
    select_line()
    copy_line()
    next_line()
    switch_program()
    prepare_text()
    # Send Message
    SendInput(Keyboard(VK_RETURN))
    time.sleep(0.2)
    SendInput(Keyboard(VK_RETURN, KEYEVENTF_KEYUP))
    time.sleep(10)
    switch_program()

def send_messages(total):
    time.sleep(10)
    for _ in range(total):
        send_one_message() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-10T18:17:54.247

如果您在 Windows 上使用 Python，那么您很有可能拥有该`win32api`模块，该模块会为您处理与 API 的挂钩...

```
import win32api
import win32con
win32api.keybd_event(win32con.SHIFT_PRESSED, 0,win32con.KEYEVENTF_EXTENDEDKEY, 0) 
```

这有帮助吗？（如果可能的话，你应该安装 IPython，它对实验有很大帮助）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-13T14:05:51.393

我知道这个问题真的很老了，但我找到了一个不错的库：`PyUserInput`. 我不知道如何在windows中下载它（我很久没有下载windows的库了）。在 Linux 中很简单，只需下载 pip（如果没有的话）：`sudo apt-get install pip`然后`sudo pip install pyuserinput`. 然后代码非常简单：

```
#imports the library
from pykeyboard import PyKeyboard
#import the sleep function
from time import sleep
#initialize the keyboard simulator
keyboard = PyKeyboard()
#presses the key
keyboard.press_key('x')
#waits five seconds before releasing the key
sleep(5)
#releases the key
keyboard.release_key('x') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-15T19:34:01.340

您可以使用`pynput`易于使用的库。

```
from pynput.keyboard import Key, Listener, Controller as keyboard_controller
keyboard = keyboard_controller()

keyboard.type("Please enter your desired key's code (HEX): ") 
```

即使使用此库，您也可以模拟鼠标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-01T02:34:46.700

我已经修改了 Noctis 答案以使用 Unicode 字符。

“Windows 的简单 unicode 键盘自动化” [https://gist.github.com/ubershmekel/4b414a66037feaea595b5f4e78220aad](https://gist.github.com/ubershmekel/4b414a66037feaea595b5f4e78220aad)

上面的链接有一个要点，这是今天该要点的代码：

```
# coding: utf-8
"""
Simple unicode keyboard automation for windows
Based off of http://stackoverflow.com/questions/11906925/python-simulate-keydown
"""

import ctypes
import time
import sys

LONG = ctypes.c_long
DWORD = ctypes.c_ulong
ULONG_PTR = ctypes.POINTER(DWORD)
WORD = ctypes.c_ushort

INPUT_MOUSE = 0
INPUT_KEYBOARD = 1
INPUT_HARDWARE = 2

KEYEVENTF_EXTENDEDKEY = 0x0001
KEYEVENTF_KEYUP = 0x0002
KEYEVENTF_SCANCODE = 0x0008
KEYEVENTF_UNICODE = 0x0004

class MOUSEINPUT(ctypes.Structure):
    _fields_ = (('dx', LONG),
                ('dy', LONG),
                ('mouseData', DWORD),
                ('dwFlags', DWORD),
                ('time', DWORD),
                ('dwExtraInfo', ULONG_PTR))

class KEYBDINPUT(ctypes.Structure):
    _fields_ = (('wVk', WORD),
                ('wScan', WORD),
                ('dwFlags', DWORD),
                ('time', DWORD),
                ('dwExtraInfo', ULONG_PTR))

class HARDWAREINPUT(ctypes.Structure):
    _fields_ = (('uMsg', DWORD),
                ('wParamL', WORD),
                ('wParamH', WORD))

class _INPUTunion(ctypes.Union):
    _fields_ = (('mi', MOUSEINPUT),
                ('ki', KEYBDINPUT),
                ('hi', HARDWAREINPUT))

class INPUT(ctypes.Structure):
    _fields_ = (('type', DWORD),
                ('union', _INPUTunion))

def send_input(*inputs):
    nInputs = len(inputs)
    LPINPUT = INPUT * nInputs
    pInputs = LPINPUT(*inputs)
    cbSize = ctypes.c_int(ctypes.sizeof(INPUT))
    return ctypes.windll.user32.SendInput(nInputs, pInputs, cbSize)

def input_structure(structure):
    if isinstance(structure, MOUSEINPUT):
        return INPUT(INPUT_MOUSE, _INPUTunion(mi=structure))
    if isinstance(structure, KEYBDINPUT):
        return INPUT(INPUT_KEYBOARD, _INPUTunion(ki=structure))
    if isinstance(structure, HARDWAREINPUT):
        return INPUT(INPUT_HARDWARE, _INPUTunion(hi=structure))
    raise TypeError('Cannot create INPUT structure!')

def keyboard_input(code, flags):
    return KEYBDINPUT(0, code, flags, 0, None)

def keyboard_event(code, flags=KEYEVENTF_UNICODE):
    return input_structure(keyboard_input(code, flags))

def press(character):
    code = ord(character)
    send_input(keyboard_event(code))
    send_input(keyboard_event(code, KEYEVENTF_KEYUP))

def main():
    time.sleep(3)
    for char in u'O\nשש2E6UXoשש2E^uXh#:SHn&HQ':
        press(char)
        time.sleep(0.5)

if __name__ == '__main__':
    main() 
```

# python - 通过传递 List 在 Python 中递归调用函数

> ID：11906929
> 
> 赞同：0
> 
> 时间：2012-08-10T18:02:25.123
> 
> 标签：python, function, recursion

我知道有更简单的方法可以创建一个函数，它可以为您提供数字列表中最大的数字，但我想使用递归。当我称该功能为最大时，我什么也没有。例如 best([1,3,2]) 没有给我。如果列表中只有两个元素，我会得到正确的答案，所以我知道问题一定出在调用自身的函数上。不知道为什么。

```
def compare(a,b):
    if a==b:
        return a
    if a > b:
        return a
    if a < b:
        return b

def greatest(x):
    if len(x)==0:
        return 0
    i=0
    new_list=[]
    while i< len(x):
        if len(x)-i>1:
            c=compare(x[i],x[i+1])
        else:
            c=x[i]
        new_list.append(c)
        i=i+2
    if len(new_list)>1:
        greatest(new_list)
    else:
        return new_list[0]

print greatest([1,3,2]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T18:07:21.237

这一行：

```
if len(new_list)>1:
    greatest(new_list) # <- this one here 
```

调用`greatest`但不对它返回的值做任何事情。你要

```
 return greatest(new_list) 
```

修复该问题后，您的函数似乎表现良好（尽管我没有仔细看）：

```
>>> import itertools
>>> for i in range(1, 6):
...     print i, all(max(g) == greatest(g) for g in itertools.product(range(-5, 5), repeat=i))
... 
1 True
2 True
3 True
4 True
5 True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:52:52.163

一个简单的递归可以是这样的：

```
from random import *
def greatest(x,maxx=float("-inf")):
    if len(x)>0:
        if x[0] > maxx:
            maxx=x[0]
        return greatest(x[1:],maxx)
    else:
        return maxx

lis=range(10,50)
shuffle(lis)
print greatest(lis) #prints 49 
```

# c# - SortedList 性能 - 排序列表如何自行排序？

> ID：11906930
> 
> 赞同：0
> 
> 时间：2012-08-10T18:02:29.587
> 
> 标签：c#, sorting, sortedlist

我试图找出有关排序列表的更多详细信息，以便我可以分析它是否会像我需要的那样在几种特定情况下执行。

有谁知道它用于对其元素进行排序的特定排序算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:06:09.173

`SortedList<T,U>`在内部使用一个数组作为其键，并通过`Add`以正确的顺序插入项目来执行“排序”。当您`Add`使用新项目调用时，它会`Array.BinarySearch`使用`Array.Insert`.

这就是它具有以下[特点](http://msdn.microsoft.com/en-us/library/ms132330.aspx)的原因：

> 此方法是对未排序数据的 O(n) 操作，其中 n 是 Count。如果将新元素添加到列表的末尾，则这是一个 O(log n) 操作。如果插入导致调整大小，则操作为 O(n)。

# c# - 根据内容调整 RichTextBox 的大小

> ID：11906932
> 
> 赞同：8
> 
> 时间：2012-08-10T18:02:32.393
> 
> 标签：c#, winforms

此代码根据内容自动调整 RichTextBox 的大小。我遇到了问题，尤其是桌子。 `\t`可能会被忽略。我尝试了托管解决方案，现在我正在尝试平台调用。电流输出：

![在此处输入图像描述](../Images/431aca90aff3a4eb4ffdbe32863b22e5.png)

```
 [DllImport("gdi32.dll")]
    static extern bool GetTextExtentPoint32(IntPtr hdc, string lpString, int cbString, out SIZE lpSize);

    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr GetDC(IntPtr hWnd);

    [StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential)]
    public struct SIZE
    {
        public int cx;
        public int cy;

        public SIZE(int cx, int cy)
        {
            this.cx = cx;
            this.cy = cy;
        }
    }

    public static void Main()
    {
        Form form = new Form();
        RichTextBox rtfBox = new RichTextBox();

        rtfBox.Rtf = @"{\rtf1\ansi\deff0{\fonttbl{\f0\fnil Arial;}}\viewkind4\uc1\trowd\trgaph100\cellx1000\cellx2000\pard\intbl\lang1033\f0\fs20  hi\cell  bye\cell\row\intbl  one\cell  two\cell\row\pard\par}";
        rtfBox.ScrollBars = RichTextBoxScrollBars.None;

        string sInput = "hi\t bye\t\n";// one\t two\t\n";
        SIZE CharSize;

        form.Controls.Add(rtfBox);

        IntPtr hdc = GetDC(IntPtr.Zero);//Context for entire screen
        GetTextExtentPoint32(hdc, sInput, sInput.Length, out CharSize);

        rtfBox.Width = CharSize.cx;
        rtfBox.Height = CharSize.cy;

        form.Visible = false;

        form.ShowDialog();
    } 
```

（注意，为简单起见，这是一个引用 System.Windows.Forms.dll 的控制台应用程序）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T22:03:35.260

你看过[`ContentsResized`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.contentsresized.aspx)活动吗？添加以下在事件触发时调用的方法：

```
private void richTextBox_ContentsResized(object sender, ContentsResizedEventArgs e)
{
    var richTextBox = (RichTextBox) sender;
    richTextBox.Width = e.NewRectangle.Width;
    richTextBox.Height = e.NewRectangle.Height;
} 
```

当 RTF 内容改变时（使用[`Rtf`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf)），`RichTextBox`应该调整大小以匹配其内容。确保您还将[`WordWrap`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.wordwrap)属性设置为`false`.

* * *

我已经用您的表格示例进行了尝试，它似乎确实可以工作（尽管有一点偏移，您可以通过在调整后的大小上添加几个像素的宽度来解决这个问题 - 不知道为什么会发生这种情况）：

![](../Images/76a0d1ff1edd9f4dfd298a8a33b40c86.png)

**P.Brian.Mackey 编辑**
这个答案对我有用。为了澄清，这是包括边框修复的最终代码：

```
 public static void Main()
    {
        string sInput = "hi\t bye\t\n";// one\t two\t\n";
        SIZE CharSize;
        Form form = new Form();
        RichTextBox rtfBox = new RichTextBox();
        rtfBox.ContentsResized += (object sender, ContentsResizedEventArgs e) =>
        {
            var richTextBox = (RichTextBox)sender;
            richTextBox.Width = e.NewRectangle.Width;
            richTextBox.Height = e.NewRectangle.Height;
            rtfBox.Width += rtfBox.Margin.Horizontal + SystemInformation.HorizontalResizeBorderThickness;
        };

        rtfBox.WordWrap = false;
        rtfBox.ScrollBars = RichTextBoxScrollBars.None;

        rtfBox.Rtf = @"{\rtf1\ansi\deff0{\fonttbl{\f0\fnil Arial;}}\viewkind4\uc1\trowd\trgaph100\cellx1000\cellx2000\pard\intbl\lang1033\f0\fs20  hi\cell  bye\cell\row\intbl  one\cell  two\cell\row\pard\par}";

        form.Controls.Add(rtfBox);
        form.ShowDialog();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T21:35:17.607

如本答案所述，使用[GetPreferredSize](https://stackoverflow.com/a/2365687/603828)更容易。然后你不需要等待 ContentsResized 事件，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T18:54:32.450

身高呢？
我添加了

```
richTextBox.Height += richTextBox.Margin.Vertical +  
SystemInformation.VerticalResizeBorderThickness; 
```

在末尾。

它看起来也很适合扩展方法：

```
static public class RichTextBoxResizer {  
    static public void ResizeToContents(this RichTextBox richTextBox, ContentsResizedEventArgs e) {  
        richTextBox.Width = e.NewRectangle.Width;  
        richTextBox.Height = e.NewRectangle.Height;  

        richTextBox.Width += richTextBox.Margin.Horizontal +  
            SystemInformation.HorizontalResizeBorderThickness +  
            SystemInformation.HorizontalScrollBarThumbWidth;  

        richTextBox.Height += richTextBox.Margin.Vertical +  
            SystemInformation.VerticalResizeBorderThickness;  
    }   

    static public void ResizeToContentsHorizontally(this RichTextBox richTextBox, ContentsResizedEventArgs e) {
        richTextBox.Width = e.NewRectangle.Width;

        richTextBox.Width += richTextBox.Margin.Horizontal +
            SystemInformation.HorizontalResizeBorderThickness +
            SystemInformation.HorizontalScrollBarThumbWidth;
    }

    static public void ResizeToContentsVertically(this RichTextBox richTextBox, ContentsResizedEventArgs e) {
        richTextBox.Height = e.NewRectangle.Height;

        richTextBox.Height += richTextBox.Margin.Vertical +
            SystemInformation.VerticalResizeBorderThickness;
    }
} 
```

所以事件接收器看起来像：

```
private void rtfBox_ContentsResized(object sender, ContentsResizedEventArgs e) {  
    RichTextBox rtb = (RichTextBox)sender;  
    rtb.ResizeToContents(e);  
} 
```

# entity-framework - 我们可以防止 EF 逆向工程师从表名中删除尾随 's'

> ID：11906934
> 
> 赞同：3
> 
> 时间：2012-08-10T18:02:36.590
> 
> 标签：entity-framework, ef-code-first, reverse-engineering

表名：TableStatus 该工具生成变量名为 TableStatus 的 TableStatu。对于其他人，TablePerson 它使用变量名称 TablePersons 创建 TablePerson。使用 Code First，您可以删除复数形式。我发现 Entity.tt 和 Context.tt 的一些片段可以在您进行逆向工程时删除/添加复数，但它们似乎对输出类和 DbContext DbSet 名称没有任何影响。这可能很简单，但我看不到。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T00:41:50.800

您可以使用 Table 属性来指定表名。

```
[Table("account", Schema = "dbo")]
public class Account
{
    [Key]
    public int id { get; set; }

    public string Email { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T18:05:22.727

当您执行数据库优先模型时，可以选择复数/单数实体名称。关闭它，它应该可以解决您的问题。

![在此处输入图像描述](../Images/60fe83803d9b4efc281c5d577ff8d0d4.png)

# java - ACTION_DOWN 或仅在 onTouch() 中的 ACTION_MOVE

> ID：11906939
> 
> 赞同：2
> 
> 时间：2012-08-10T18:02:56.013
> 
> 标签：java, android, android-canvas, touch-event

我的视图的 onTouch 方法：

```
public boolean onTouch(View view, MotionEvent event) {
        Log.d("Touch", "Touch");

        int mNewX = (int) Math.floor(event.getX());
        int mNewY = (int) Math.floor(event.getY());

        boolean isPositionFree = isPositionFree(mNewX, mNewY);

        if (!isPositionFree) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                int i = 0;
                for (Point point : points) { 
                    if (point.spotted) {
                        points.remove(i);
                        invalidate();
                        break;
                    }
                    i++;
                }
            } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
                int i = 0;
                for (Point point : points) { 
                    if (point.spotted) {
                        points.remove(i);
                        Point p = new Point(mNewX, mNewY, point.TYPE);
                        points.add(i, p);
                        invalidate();
                        break;
                    }
                    i++;
                }
            }
        }
} 
```

画布中有多个项目。他们的位置保存在“点”中。它们通过这些“点”的位置在 onDraw 方法中被绘制到画布上，即 Point point.x 和 point.y。

现在，当我单击一个项目（画布上的一个点）时，它应该会消失。然后，当 MotionEvent.ACTION_MOVE 为真时，我想移动点，具体取决于 event.getX() 和 event.getY()。

方法“isPositionFree(newX,newY)”检查 point.x 和 point.y 是否等于 newX 和 newY（我刚刚在屏幕上触摸的位置）。

如果该位置被占用（意味着我刚刚单击了一个项目），我将进入motionevent-IFs。

问题来了：我的代码在我实际移动它之前删除了该点。我没有找到任何方法可以解决这个问题几个小时。:/ 我觉得很难，因为 onTouch 总是从一开始就被调用，这意味着 ACTION_DOWN 和 ACTION_MOVE 永远不会同时发生。

你知道有什么解决办法吗？

在此先感谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:24:36.097

让它工作！

对于遇到相同问题的每个人，请随时将此示例代码作为帮助:)

我一开始声明的东西

```
Vector<Point> points = new Vector<Point>();

Bitmap[] monsterTypes = new Bitmap[3];

Vector<Integer> distanceMovedX = new Vector<Integer>();
Vector<Integer> distanceMovedY = new Vector<Integer>();

int mNewX = -1;
int mNewY = -1; 
```

OnTouch 方法

```
public boolean onTouch(View view, MotionEvent event) {

        mNewX = (int) FloatMath.floor(event.getX());
        mNewY = (int) FloatMath.floor(event.getY());

        boolean touchedPoint = touchedPoint(mNewX, mNewY);

        switch (event.getAction()) {
        case MotionEvent.ACTION_MOVE:

            distanceMovedX.add(mNewX);
            distanceMovedY.add(mNewY);
            break;
        case MotionEvent.ACTION_UP:

            isMoveEvent = isMoveEvent();
            if (isMoveEvent) {
                for (Point point : points) {

                    if (point.spotted) {

                        // Your code
                    } 
                    i++;
                }
            } else {
                if (touchedPoint) {
                    for (Point point : points) { 
                        if (point.spotted) {

// Your code
                        }
                    }
                }
            }
            distanceMovedX.clear();
            distanceMovedY.clear();
            return true;
        }
        return true;
    } 
```

接触点法

```
public boolean touchedPoint(int mNewX, int mNewY) {
        boolean touchedPoint = false;
        int height = 0;
        int width = 0;

        for (Point point : points) {
            height = monsterTypes[point.TYPE - 1].getHeight();
            width = monsterTypes[point.TYPE - 1].getWidth();

            if (point.x + width < mNewX || point.x > mNewX + width
                    || point.y + height < mNewY || point.y > mNewY + height) {
                touchedPoint = false;
                point.spotted = false;
            } else {
                touchedPoint = true;
                point.spotted = true;
                return touchedPoint;
            }
        }
        return touchedPoint;
    } 
```

isMoveEvent-方法

```
public boolean isMoveEvent() {
        boolean isMoveEvent = false;
        boolean isMoveEventX = false;
        boolean isMoveEventY = false;

        for (int i = 0; i <= (points.size() -1); i++) {
            Log.d("point", "for loop entered");

            if (!distanceMovedY.isEmpty()) {
                Log.d("point.x", "distanceMovedY is not empty");
                int dMY = distanceMovedY.get(distanceMovedY.size() - 1) - distanceMovedY.get(0);

                if ((dMY > 50 || dMY <= 0) && dMY != 0) {
                    Log.d("point.y", "is move event");
                    Log.d("point.y", "dMY: " + dMY);
                    isMoveEventY = true;
                } else {
                    Log.d("point.x", "is no move event");
                    Log.d("point.x", "dMY: " + dMY);
                    isMoveEvent = false;
                    return isMoveEvent;
                }
            }
            if (!distanceMovedX.isEmpty()) {
                Log.d("point.x", "distanceMovedX is not empty");
                int dMX = distanceMovedX.get(distanceMovedX.size() - 1) - distanceMovedX.get(0);

                if (dMX <= 50 && dMX >= -50 && dMX != 0) {
                    Log.d("point.x", "is move event");
                    Log.d("point.x", "dMX: " + dMX);
                    isMoveEventX = true;
                } else {
                    Log.d("point.x", "is no move event");
                    Log.d("point.x", "dMX: " + dMX);
                    isMoveEvent = false;
                    return isMoveEvent;
                }
            }
            if (isMoveEventX && isMoveEventY) {
                Log.d("point", "is move event");
                isMoveEvent = true;
                return isMoveEvent;
            }
        }
        Log.d("point", "is no move event");
        return isMoveEvent;
    } 
```

点类

类点 { int x, y; 整数类型；布尔值；boolean halfSpotted;

```
public Point() {
}

public Point(int x, int y, int t) {
    this.x = x;
    this.y = y;
    this.TYPE = t;
}

@Override
public String toString() {
    return x + ", " + y;
} 
```

}

解释：

点：我们得到了一个班级点。Vector 中声明的所有这些点都是画布上的 x 和 y 坐标。他们帮助我们检查我们点击的位置。

MonsterTypes：它是我使用的不同图形。如果您只使用在画布上绘制的一个图形，请将其更改为您的需要

distanceMovedX & Y：保存“ACTION_MOVE”的所有 X 和 Y 坐标。从 pos 0（第一个接触点）到 pos Z（最后一个接触点，ACTION_UP 发生的地方）。虽然它不是原来的 X 和 Y 位置。它是 posZ - pos0 的结果。使用这些值，您可以确定在经过多远的距离后要调用“onMove”，然后在以下距离应调用“onClick”。

mNewX & Y：onTouch-Method 的当前位置。每次您移动手指时，newX 和 Y 都会被覆盖。

方法：

onTouch()：首先，我们将 mNewX 和 Y 覆盖到当前触摸的位置。然后我们检查我们是否点击了一个现有的点（在我的例子中是一些 48px*48px 的区域）接下来我们在 ACTION_MOVE 中记录所拍摄的距离。之后，我们继续 ACTION_UP，检查我们是否刚刚执行了一些 moveEvent 或 clickEvent。

touchPoint()：计算我们是否触摸了画布上的某个现有点。返回真或假

isMoveEvent()：检查我们是否移动了一定距离。就我而言，我想向下移动 50 像素或更多。虽然我不允许向侧面移动 -50px 或 +50px。如果它不是移动事件，则最后触摸的点仍然必须在给定距离内（在我的情况下，在该点的 48px*48px 范围内）。

就是这样。我花了好几天才弄清楚那个选项；/为此感到羞耻......虽然我编码得很快，但是是什么让我再次感觉更好：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:25:39.520

我只是建议一些走动：

单击它时不要删除该点，而是在您当前删除该点的班级中创建一个私有点，只需将您的新变量点设置为您将删除的点...

然后，在 action 或 action move 中使用它后，最后一个使用它的地方，检查你的私有变量是否不为 null，如果是，则将其删除，然后将其设置为 null。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T18:53:31.693

尝试使用 switch case 语句：

切换手指动作：

```
case(ACTION_MOVE)
{
//move code
return false;
}
case(ACTION_TOUCH)
{
//dissappear code
return false;
} 
```

注意上面的代码是伪代码，但它会检查你是否在触摸它之前移动点。这样，点将首先尝试移动，而不是首先被移除。

谢谢，亚历克斯

# .net - 使用 C# 从网络中的给定 IP 地址获取所有打开的端口

> ID：11906944
> 
> 赞同：0
> 
> 时间：2012-08-10T18:03:19.193
> 
> 标签：.net, c#-3.0

我想列出特定系统的所有开放端口。我找到了一种解决方案，但它的工作非常缓慢。我正在使用 .net 框架 3.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:29:52.420

假设窗口：获取打开端口列表（或侦听/未侦听/过滤等）的唯一方法是端口扫描所有端口（所有 65,535 个端口，除非只对特定端口感兴趣）。这是一个明显的安全考虑 - 以及为什么有这么多端口扫描器而不是有人敲开一个小型 C# 实用程序来获取列表。因此，它会很慢。

如果它来自您的网络（因此您可以访问它） - 您可以构建一个安全的（ish）内部服务，允许同一子网上的其他机器请求端口列表。这将要求每台机器运行该服务，内置一些安全考虑，以及一种请求方式（很可能是一个小型 Windows 应用程序/cmd 行例程，它发送服务侦听的 UDP 或 TCP 请求，并且（在验证后）等）可能使用加密或安全套接字返回列表）。可能有现成的（甚至可能是免费的蜜蜂 - 尽管认为那里的安全性）产品或工具可用于可访问（本地）网络。或者（也许是[微软的 PortQry 工具](http://support.microsoft.com/?kbid=310099)）

但是，如果您正在尝试编写黑客工具 - 只需下载 NMap 即可。

# java - Object 类真的可以是一个下限吗？

> ID：11906955
> 
> 赞同：4
> 
> 时间：2012-08-10T18:03:58.297
> 
> 标签：java, generics

当 String 和 Integer 不是 Object 的超类时，为什么以下是合法的？

```
List<? super Object> mylist = new ArrayList<Object>();
mylist.add("Java"); // no compile error
mylist.add(2); 
```

我知道[通配符指南](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)使用下限通配符和 super 用于“输出”变量，但在这种情况下似乎 Object 不能用作“下限”。

这也是允许将任何类型添加到列表中的唯一方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:45:44.007

这真的很简单。请记住，在 Java 中，子类型的实例也是其超类型的实例。

看签名`add`

```
public boolean add(E e) 
```

这意味着无论您传递什么类型`E`或任何子类型的东西`E`。

你有一个`List<? super Object>`. 因此，您可以传递给`myList.add()`任何类型为`? super Object`（可能是其超类型的未知类型`Object`）或其任何子类型的东西。

Integer 是 所包含的所有类型的子类型`? super Object`吗？当然。`Integer`是 的子类型`Object`，它是 所包含的所有类型的子类型`? super Object`（当然，在这种情况下，只`Object`满足这个）。

您将类型参数与可以传递给方法的东西混淆了。的*类型参数*是`List<? super Object>`一个未知类型，它是 的超类型`Object`，因此`Integer`或`String`不能是实际的类型参数。事实上，在这种情况下，唯一有效的实际类型参数是`Object`. 但是，当您将某些东西传递给该方法时，您要问的是，我要传递的是子类型吗？答案是肯定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:06:36.450

这是因为 Object 是 Integer 和 String 的超类。您正在以相反的方式解释通用关系。

**编辑**

想想这种情况：

```
List<? extends myClass> listOfMyClass = new ArrayList<Object>(); 
```

在这种情况下，您将得到一个`Object`类型元素列表，但必须遵守`listOfMyClass`列表声明添加的限制。

您将能够将属于`myClass`层次结构的任何对象添加到列表中。`ArrayList`实现接口的将在请求时`List`保存（并返回）`Object`类型元素。

当然，你可以这样定义：

```
List<? extends myClass> listOfMyClass = new ArrayList<mySuperClass>(); 
```

正如您现在可能看到的，`ArrayList`必须包含具有相同类型或超类型的对象`myClass`，在这种情况下，就是`mySuperClass`. 此列表将返回`mySuperClass`请求的对象。

`ClassX`作为不属于 mySuperClass 层次结构的类，以下行将无法编译：

```
List<? extends myClass> listOfMyClass = new ArrayList<ClassX>(); 
```

那是因为`ClassX`不是 的超类`myClass`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T18:24:28.147

我同意这令人困惑，但这就是正在发生的事情。

在这行代码中：

```
List<? super Object> mylist... 
```

您说的`myList`是 a `List`，其中每个元素都可以是 is 的类型`Object`或 的超类`Object`。但是，您只是在`myList`此处声明类型。

通配符的作用是限制您对`myList`.

然后，你这样做：

```
List<? super Object> mylist = new ArrayList<Object>(); 
```

*现在*你正在做的是实例化一个`ArrayList<Object>`. 您的下限通配符用于检查这是否有效。它是有效的，因为`Object`匹配`? super Object`. 此时，您有一个`List<Object>`并且您随后的方法调用被允许。

# python - 将字节数组从串行端口转换为浮点数

> ID：11906956
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:01.333
> 
> 标签：python, parsing, serial-port, bytearray

我正在编写一个 python 脚本，它将通过 COM 端口与 Fluke 仪表通信。我能够接收数据，但想将其解析为可用的浮点数。代码如下所示：

```
import serial

ser = serial.Serial('COM3', 115200, timeout=1)

#Decalring some variables
FlukeID = b'ID\r'
FlukeQM = b'QM\r'

#Requesting the meters ID to verify connection on terminal
ser.writelines(FlukeID)
line = ser.readline()
print(line)

#Declaring variables for my while loop
thermdata = 0
t=1

ser.writelines(FlukeQM)
thermdata = ser.readline()

while(t < 5):
    ser.writelines(FlukeQM)
    #thermdata = (thermdata + ser.readline()) /2
    thermdata = ser.readline()
    print(thermdata)
    t+=1 
```

设备返回的数据在控制台上是这样的：

***8.597E3，欧姆，正常，*** ***无错误***

***编辑：***数据实际上在终端上显示如下： ***b'0\r8.597E3,OHM,NORMAL,NONE\r'***

我只是希望能够在开始时使用数值，这样我就可以随着时间的推移进行一些计算。我还需要能够在我的号码中使用科学概念部分，因为我不会事先知道我的测量范围。我知道必须有一种简单的方法来做到这一点，并且非常感谢任何帮助。

附带说明一下，我还希望能够绘制这些值或将它们放入某种 .csv 文件中。如果您对在哪里学习如何做到这一点有任何意见，那也很好，但我最关心的是字节数组的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:20:44.200

用于`split()`将字符串分成逗号分隔的部分。然后第一部分是字符串“8.597E3”，您可以使用该`float()`函数对其进行转换。

```
s = '8.597E3,OHM,NORMAL,NONE'.split(',')
value = float(s[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:39:35.347

怎么样：

```
def atof(text):
    try:
        return float(text)
    except ValueError:
        return text

thermdata = b'0\r8.597E3,OHM,NORMAL,NONE\r'
for line in thermdata.strip().split(b'\r'):
    print(list(map(atof, line.split(b','))))

# [0.0]
# [8597.0, b'OHM', b'NORMAL', b'NONE'] 
```

# iphone - 在 UITextView 中显示 ASCII 图稿

> ID：11906958
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:09.863
> 
> 标签：iphone, objective-c, ascii

我想将 ascii 艺术作品功能添加到我现有的 Emoji 应用程序中。我在 appstore 上看到了一些显示 ASCII 艺术品的应用程序。我不知道我应该从哪里开始。请帮助我添加此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:15:38.473

您需要选择[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)，以便正确显示 ascii 艺术。您可以查看[iOSFonts.com](http://iosfonts.com/)以了解您的目标设备支持哪些字体。要显示 ascii 艺术，您可以使用多行`UILabel`（[设置`numberOfLines`为 0](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/numberOfLines)）。A`UITextView`也可以，但请记住它们默认是可编辑的，除非您设置`editable`为`NO`.

# delphi - Delphi 7 到 Delphi XE2 .res 文件问题

> ID：11906963
> 
> 赞同：6
> 
> 时间：2012-08-10T18:04:21.470
> 
> 标签：delphi, delphi-xe2

当我在 Delphi XE2 中打开 Delphi 7 项目并打开项目选项时，出现错误：

```
"Unable to set Icon: Cannot open file "........\AppName_Icon.ico".
The system cannot find the file specified". 
```

我还注意到项目的版本信息丢失了。Delphi 7 项目具有 .Res 文件，其中包含 MAINICON 以及存储的版本信息。为什么 Delphi XE2 不能使用这个 .Res 文件来检索 MAINICON 和版本信息。

此外，如果我尝试在 XE2 中编译应用程序，我会收到错误消息 -

```
[BRCC32 Error] MtxReq.vrc(2): file not found: MtxReq_Icon.ico 
```

创建 MTXReq.vrc 文件（一个新文件）并删除 MtxReq.res 文件。

为什么会这样？我不想从 .res 文件中丢失我的项目图标和版本设置。

有没有办法强制 XE2 使用 .res 文件而不是删除它？

任何帮助将不胜感激。

* * *

抱歉，我还不能发表评论（需要更多转发点）...

**沃伦**- 这里是对您问题的回应（不只是删除您的 .dproj 文件并仅保留 .dpr ，更快吗？）

我删除了 .dproj，.dproj.local 在 XE2 中打开了 .dpr 并重新创建了 .dproj 文件。它从 .res 中带回了图标，但我丢失了项目版本信息。只有文件版本和产品版本信息被迁移，但丢失了所有其他版本信息。（这是因为默认清单文件）。然后我尝试了我在解决方案的第 1 步中解释的内容。我在记事本中打开 .dproj 文件，删除了下面的标签条目，然后重新打开了 .dproj 文件，现在我的所有版本信息都已恢复。这里的问题是 $(BDS)\bin\default_app.manifest。我还注意到版本信息存储在 .dproj 文件中标签下的标签中，一旦您删除默认清单条目，IDE 就会正确地从 .dproj 文件中获取版本密钥信息。

所以基本上通过删除 .dpr 文件，我跳过了提取 .ico 文件并将其添加到项目的步骤，但必须编辑新创建的 .proj 文件并删除默认清单的条目以检索版本信息。（另一种解决方案是手动添加版本信息并保存项目。我没有尝试过）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T19:17:31.987

**2015 年更新**：*Remy 手动重新创建 .DPROJ 文件的想法是极好的建议，应该首先考虑，即使我的回答被标记为已接受。*

XE2 之前的 Delphi 版本在编译过程中使用资源文件作为 INPUT 和 OUTPUT。例如，您的 delphi 7 项目图标嵌入在该 .res 文件中，您“希望 delphi xe2 使用”，但是，这在 delphi 7 中是有问题的，现在在 XE2 中完全不可能。相反，您现在将 .res 文件视为纯输出工件，与可执行文件相同。不要再费心将 .res 文件检查到版本控制中，也不要试图假装 .res 文件是您永久存储图标的地方。它是一个由编译器自动生成的输出文件，它本来应该是这样的。

如果您是现代开发人员，Delphi 7 的旧工作方式可能会惹恼您（它肯定惹恼了我），因为您有一个有趣且无法解决的问题，即如何进行版本控制：您是签入 .RES 文件，还是不签入？不是吗？这两种方法都有缺点，而且 .RES 文件现在仅在 XE2 中是输出工件这一事实是最好的。所以学会忍受它。

既然 XE2 不仅支持 PC 的图标，也支持 Mac 的图标，它必须以不同的方式处理事情，他们已经清理了这一点。这是您在 .ICO 文件中看到的问题的根源。我看到了完全相同的错误，我忽略了它，只是在转换后将图标添加回项目中。

将 delphi 7 项目（.dpr 和 .cfg）转换为 Delphi XE2 并不像在不同级别的 .dproj 文件之间的转换那样大问题——从 Delphi 2005、2007、2009、2010 开始的每个版本都已实现dproj 格式的变化。当转换这些项目出现问题时，我不会按照 Remy 的建议去做，因为这是在浪费时间。我所做的是删除 DPROJ 并让它仅从 .dpr 文件转换。
但是 Remy 的建议从头开始有很多好处，包括您可以简化项目布局。

无论如何，这就是你要做的：

1.  忽略错误。
2.  添加图标以投射自己。
3.  继续愉快地前进，不要担心 .res 文件的删除，这是故意的，并且有充分的理由。将在需要时创建一个新的。磁盘上 .ico 文件的文件名将使用 XE2 .dproj 文件的内容读取并编译到 .res 文件中，应该是这样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T20:17:04.937

与往常一样，您永远不应该让 IDE 将项目从旧版本转换为新版本。转换很少能正常工作。您应该始终在较新的 IDE 中创建一个新项目，然后根据需要将现有的源文件添加到其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:35:18.760

感谢大家的意见和建议。

提交帖子后，我尝试了以下步骤来解决 .ico 问题和缺少的版本问题/版本信息遗留问题：

**步骤 1**。编辑 .dProj 文件并删除标签下对 default_app.manifest 相关条目的引用（我的项目平台是 32 位）我删除了此下的所有标签，除了与命名空间 System.Win;Data.Win;Datasnap.Win;Web 相关的标签。赢;Soap.Win;Xml.Win;Bde;$(DCC_Namespace)

如果没有这个，我的应用程序总是将版本信息显示为 1.0.0.0 并忽略我指定的所有其他内容。

（我不确定这是否是正确的步骤，但它解决了我的版本信息问题。可能有一个更简单/另一种解决方案......）

**步骤 2.**从旧的 .res 文件中提取 ico，将其命名并从项目选项中将该 .ico 文件添加到项目中。物理 .ico 文件是项目文件夹，将在源代码控制（在我的情况下为 VSS）中检查。

这两个步骤让我得到了我需要的东西，然后我可以修改版本号并编译项目。从这一点开始，没有任何问题。

这些比我为我的应用程序从 D7 到 XE2 所做的总转换/迁移要简单得多 - Unicode 转换、将定制的 Raize 5 组件迁移到 Raize 6、Turbo Power、Virtual Tree View、Hypergrid 等等等等……幸运的是，我找到了所有这些组件的 XE2 版本。

# php - Codeigniter/PHP 在构造函数中为变量赋值

> ID：11906964
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:25.130
> 
> 标签：php, codeigniter, constructor, global-variables

我想定义一个全局对象变量，我可以在控制器中的几个函数中使用它，`Items`.

这是我的代码不起作用：

```
class Items extends CI_Controller {

 private $varname;

 function Items(){
  parent::__construct();
    $this->load->model('items_model');
    $folder_id=416;
    $this->varname=$this->items_model->getFilesById($folder_id);
 }

 function index(){
   var_dump($this->varname);    
 }

} 
```

因此`$this->varname`，当我转到 url 时，它不起作用：`localhost/items/index`打印的输出是这样的：

```
array(0) { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:08:22.730

根据您的 PHP 版本，可能不会调用构造函数。尝试改变

```
function Items(){ 
```

到

```
function __construct(){ 
```

看看是否能解决问题。

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)从 PHP 5.3.3 开始，与命名空间类名的最后一个元素同名的方法将不再被视为构造函数。此更改不会影响非命名空间类。

这可能是导致您的问题的原因。

# xpages - 在一个控件中的寻呼机，在不同的控件中查看？

> ID：11906965
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:26.463
> 
> 标签：xpages

我有一种情况，我需要将寻呼机放置在一个控件中，并将该寻呼机的视图放置在不同的控件中。我关闭了视图的本机寻呼机。

如果我将页面放在与查看器相同的控件中，那么它可以正常工作，但是如果我将寻呼机放在一个控件中，将视图放在另一个控件中并将它们都放在同一页面上，我会收到错误*Pager is not associated with any数据控制。* 知道如何做到这一点吗？也许我需要指定具有视图的控件 ID 以及与寻呼机关联的视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T07:58:58.397

您可以使用寻呼机上的“附加到”属性手动将寻呼机与视图面板相关联（或者只需将标签“for”添加/更改到代表属性“附加到”的源中。

```
<xp:pager layout="Previous Group Next" xp:key="footerPager"
id="pager2" for="viewPanel1" > 
```

# ruby-on-rails - 需要允许重新提交表单 Rails AJAX

> ID：11906966
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:28.023
> 
> 标签：ruby-on-rails, ajax, forms, jquery

我正在编写一个应用程序，我希望能够通过 AJAX 将人员添加到部门，但是虽然我可以多次删除，但我不能添加多次。好像不能多次提交表单。我正在使用部分（包含两种类型的表单）。唯一的区别是只有一个“添加表单”和许多“删除表单”（因为您可以同时在多个部门）。

```
<td><%= form_tag remove_department_person_path(:id => @person.id, :department => department), :method => :post, :class => "remove_form", :remote => true  do %>
<% submit_tag "Remove", :class => "btn"%><% end %></td> 
```

多次生成

```
<%= form_tag add_department_person_path(:id => @person.id), :method => :post, :remote => true, :class => "add_form" do %>
  <td>
    <%= select_tag 'department', options_for_select(@unassigned)%>
  </td>
  <td>
    <%= text_field_tag :title %>
  </td>
  <td>
    <%= submit_tag "Add", :class => "btn add-btn"%>
  </td>
<% end %> 
```

生成一次。我的 javascript 是

```
$('.remove_form').on('ajax:success', function(event,data) {
  d = jQuery.parseJSON(data)
  $('#departments').html(d.html)
  return false
})
$('.add_form').live('ajax:success', function(event,data) {
  d = jQuery.parseJSON(data)
  $('#departments').html(d.html)
  return false
}) 
```

每次重新加载部分时都会重新运行，所以这不应该是问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:01:24.787

发现问题（至少部分）是由于 rails 处理 AJAX 的方式 - 事件处理程序只发生一次。

```
function updateForms(data) {
  $('#departments').html($("<div>"+data+"</div>").find("#departments").html())
  setAjax()
  return false
}

function setAjax() {
  $('#deplist').on('submit', '.remove_form', function(e) {
    $.rails.handleRemote( $(this) );
    e.preventDefault();
  });
  $('.add_form').on('submit', function(e) {
    $.rails.handleRemote( $(this) );
    e.preventDefault();
  });
  $('.remove_form').on('ajax:success', function(event,data) {
    updateForms(data)
  })
  $('.add_form').on('ajax:success', function(event,data) {
    updateForms(data)
  })
} 
```

我从另一个堆栈溢出问题中获得了此代码的基础，如果我能再次找到它，我将链接到它

# php - 我的日历中的所有这些 n 是从哪里来的？

> ID：11906971
> 
> 赞同：1
> 
> 时间：2012-08-10T18:04:45.497
> 
> 标签：php, date, calendar

所以最近我发现了一个使用 PHP 和 HTML 制作日历的漂亮小教程。我使用了教程中的很多代码，因为它使我免于自己做所有的数学运算。日期确实很糟糕。无论如何，压光机的工作方式正是我想要的，除了一个小细节。

在用于导航到上个月和下个月的按钮与当前月份名称之间是一行 n。导航按钮和月份名称都在各自的表格中，它们之间没有代码。在**Google Chrome**中，n 排成一排，如下所示：

`nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn`

而在**Internet Explorer**中，n 在一列中，每行一个 n。我已经检查了一段时间的代码，但仍然无法弄清楚这些代码来自哪里或为什么。我是在 PHP 中使用 date 函数的新手，所以我想知道这是否与此有关。

这是有问题的代码；

```
<?php
include'../../includes/head.inc';
include'../../includes/secure.inc';

$monthNames = Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

if (!isset($_REQUEST["month"])) $_REQUEST["month"] = date("n");
if (!isset($_REQUEST["year"])) $_REQUEST["year"] = date("Y");

$cMonth = $_REQUEST["month"];
$cYear = $_REQUEST["year"];

$prev_year = $cYear;
$next_year = $cYear;
$prev_month = $cMonth-1;
$next_month = $cMonth+1;

if ($prev_month == 0 ) {
$prev_month = 12;
$prev_year = $cYear - 1;
}
if ($next_month == 13 ) {
$next_month = 1;
$next_year = $cYear + 1;
}
?>

<div class="calendar">
<table width="200">
<tr align="center">
<td bgcolor="#999999" style="color:#FFFFFF">
<table width="100%" border="0" cellspacing="5" cellpadding="5">
<tr>
<td width="50%" align="left">  <a href="<?php echo $_SERVER["PHP_SELF"] . "?month=". $prev_month . "&year=" . $prev_year; ?>" style="color:#FFFFFF">Previous</a></td>
<td width="50%" align="right"><a href="<?php echo $_SERVER["PHP_SELF"] . "?month=". $next_month . "&year=" . $next_year; ?>" style="color:#FFFFFF">Next</a>  </td>
</tr>
</table>
</td>
</tr>
<tr>
<td align="center">
<table width="100%" border="0" cellpadding="5" cellspacing="5">
<tr align="center">
<td colspan="7" bgcolor="#999999" style="color:#FFFFFF"><strong><?php echo $monthNames[$cMonth-1].' '.$cYear; ?></strong></td>
</tr>
<tr>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>M</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>W</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>F</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
</tr>

<?php 
$timestamp = mktime(0,0,0,$cMonth,1,$cYear);
$maxday = date("t",$timestamp);
$thismonth = getdate ($timestamp);
$startday = $thismonth['wday'];
for ($i=0; $i<($maxday+$startday); $i++) {
if(($i % 7) == 0 ) echo "<tr>n";
if($i < $startday) echo "<td></td>n";
else echo "<td align='center' valign='middle' height='20px'>". ($i - $startday + 1) . "</td>n";
if(($i % 7) == 6 ) echo "</tr>n";
}
?>

</table>
</td>
</tr>
</table>
</div>

<?php
include'../../includes/footer.inc';
?> 
```

代码有点草率，因为我现在只是想让它工作，并计划稍后进行所有格式化。不过，我需要先摆脱这些 n。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T18:06:58.693

接近代码的结尾：

```
if(($i % 7) == 0 ) echo "<tr>n";
if($i < $startday) echo "<td></td>n";
else echo "<td align='center' valign='middle' height='20px'>". ($i - $startday + 1) . "</td>n";
if(($i % 7) == 6 ) echo "</tr>n"; 
```

我会说有人`\n`在每行的末尾看到并删除了`\`但不是`n`部分。

# jquery - 防止下拉菜单调整其上方 div 的大小

> ID：11906972
> 
> 赞同：0
> 
> 时间：2012-08-10T18:04:47.323
> 
> 标签：jquery, css, xhtml

这是我一段时间以来一直遇到的问题。

在第一张图片中，您可以在单击展开之前看到我的布局部分：

[http://i.imgur.com/USnSS.png](http://i.imgur.com/USnSS.png)

点击后看看上面的文字会发生什么：

[http://i.imgur.com/F5K3W.png](http://i.imgur.com/F5K3W.png)

我不完全确定为什么会发生这种情况。

这是我的代码：

```
<html>
<head>
    <title>Program Status Page</title>
    <link type="text/css" rel="stylesheet" href="style.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery("#Hidden").hide();
            //toggle the componenet with class msg_body
            jQuery("#Even").click(function()
            {
                jQuery(this).next("#Hidden").slideToggle(500);
            });
            jQuery("#Odd").click(function()
            {
                jQuery(this).next("#Hidden").slideToggle(500);
            });
            $("#Test").on("click", function(){
                if ( +$(".weight", this).text() < 50 )
                    $(this).appendTo("#unlikelyToBeCalled");
            });
        });

    </script>
</head>

<body class="body">

    <img class="Top" src="Top-Bar.png" />
    <h1> Likely to be called</h1><br />

    <div id="Likely">
        <div id="Even">
            <div class="ProgramName">Blah11332131231231231</div>
            <div class="ProgramGraph">Blah23412312313</div>
            <div class="Status">Blah</div>
        </div>
        <div id="Hidden">
            <div class="Weight"> 1234</div>
            <div class="Values">Value1: Blah</div>
            <div class="Overrides">Overrides</div>
        </div>
    </div>

    <img class="Bottom" src="Bottom-Bar.png" />
</body> 
```

CSS 非常基础。

```
body.body {
background-color: #d0c9c9;
min-width: 1600px;
height: 100%
overflow-x: hidden;
}
#Likely{
position:relative;
margin-left:auto;
margin-right:auto;
display: table;
font-size:24px;
width: 80%;
}
#Unlikely{
position:relative;
margin-left:auto;
margin-right:auto;
display: table;
font-size:24px;
width: 80%;
}
#Unable{
position:relative;
margin-left:auto;
margin-right:auto;
display: table;
font-size:24px;
width: 80%;
}
#Even{
display: table-row;
position:relative;
margin-left:auto;
margin-right:auto;
width: 80%;
font-size:24px;
width: 80%;
float: right;
}
#Odd{
display: table-row;
position:relative;
margin-left:auto;
margin-right:auto;
font-size:24px;
width: 80%;
float:right;
}
#Hidden{
 position:relative;
 display: table-row;
 height:40px;
 margin-left:auto;
 margin-right:auto;
 background-color: #336699;
 width: 80%;
}
.ProgramName{
display: table-cell;
width: 10%;
position:relative;
top:0;
left:0;
}
.ProgramGraph{
display: table-cell;
width: 60%;
position:relative;
top:0;
left:0;
}
.Status{
display: table-cell;
width: 10%;
position:relative;
top:0;
left:0;
}

.Weight{
display: table-cell;
width: 10%;
position:relative;
top:0;
left:0;
}
.Values{
display: table-cell;
width: 60%;
position:relative;
top:0;
left:0;
}
.Overrides{
display: table-cell;
width: 10%;
position:relative;
top:0;
left:0;
}
.Top{
position:relative; top: 0;
opacity: 0.95;
filter:alpha(opacity=95);
background-color:#131313;
width: 100%;
}
.Bottom{
position:absolute; bottom: 0;
opacity: 0.95;
filter:alpha(opacity=95);
background-color:#131313;
width: 100%;
} 
```

我希望有人可以使上层 div (id="Even") 完全不受从它上掉下来的子面板的影响。万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:58:56.980

问题`display: table-row;`在于你对他们两个都有。浏览器试图将它们显示为同一个表中的行，因此当隐藏的 div 出现时，它会将它们对齐在一起，因此它将强制`#Even`div 移动。

至于修复它，我找不到`display: table-row`默认使用它的理由，如果没有它，它看起来会找到。之后，您只需要进行一些调整以使 div 正确显示。

```
#Even{
    position:relative;
    margin-left:auto;
    margin-right:auto;
    width: 80%;
    font-size:24px;
    width: 80%;
    float: right;
}

#Hidden{
    position:relative;
    height:40px;
    margin-left:auto;
    margin-right:auto;
    margin-top:28px;
    background-color: #336699;
    width: 80%;
} 
```

是我使用的，它似乎工作。您可能需要对`margin-top:28px`on进行一些修改，`#Hidden`因为它会根据您的`#Even`div 的大小而有所不同。（这样当 div 出现时它不会覆盖你的`#Even`div）

# javascript - yui get checkbox 返回数组而不是布尔值

> ID：11906975
> 
> 赞同：1
> 
> 时间：2012-08-10T18:05:00.223
> 
> 标签：javascript, arrays, boolean, yui

当使用 yui 获取复选框的选中状态时，`ischecked = this.get('checked');`变量`checked`返回 [true] 或 [false]。

预期的行为将是一个布尔值 true 或 false，而不是必须检查数组中的第一个（也是唯一一个）值是 true/false。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:12:33.623

其实只是想通了这一点。

我们使用`Y.all()`而不是获取此元素`Y.one()`（为空安全）。`Y.all()`即使只找到一个元素，它也总是返回一个数组。因此，`get()`它返回一个值数组。

# c# - 如何即时创建文本图像并将其嵌入到电子邮件中

> ID：11906976
> 
> 赞同：-6
> 
> 时间：2012-08-10T18:04:59.873
> 
> 标签：c#, asp.net, email, bitmap, jpeg

我认为我们可以通过执行类似这样的代码创建一个文本图像并将其转换为 jpeg 文件，但是如何将此图像嵌入到邮件和发送中。感谢任何帮助

```
string Text = HttpContext.Current.Request.QueryString["Text"]; 
Color FontColor = Color.Blue; 
Color BackColor = Color.White; 
String FontName = "Times New Roman"; 
int FontSize = 10; 
int Height = 150; 
int Width = 150;

Bitmap bitmap = new Bitmap(Width, Height); 
Graphics graphics = Graphics.FromImage(bitmap); 
Color color = Color.Gray; 
System.Drawing.Font font = new System.Drawing.Font(FontName, FontSize);
PointF point = new PointF(5.0F, 5.0F); 

SolidBrush BrushForeColor = new SolidBrush(FontColor);
SolidBrush BrushBackColor = new SolidBrush(BackColor);
Pen BorderPen = new Pen(color); 

System.Drawing.Rectangle displayRectangle = new System.Drawing.Rectangle(new Point(0, 0), new Size(Width - 1, Height - 1));
graphics.FillRectangle(BrushBackColor, displayRectangle);
graphics.DrawRectangle(BorderPen, displayRectangle);
StringFormat format1 = new StringFormat(StringFormatFlags.NoClip);
StringFormat format2 = new StringFormat(format1);
graphics.DrawString(Text, font, Brushes.Red, (RectangleF)displayRectangle, format2);

HttpContext.Current.Response.ContentType = "image/jpeg";
bitmap.Save(HttpContext.Current.Response.OutputStream, ImageFormat.Jpeg); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:28:07.567

下面的代码示例跳过了创建消息并添加主题、正文和地址。它显示了用于嵌入最初存储在字节数组中的图像的代码。关键是将您的图像放入内存流中。

```
//... other System.Net.Mail.MailMessage creation code
// CustomerSignature is a byte array containing the image
System.IO.MemoryStream ms = new System.IO.MemoryStream(CustomerSignature);
System.Net.Mime.ContentType contentType = new System.Net.Mime.ContentType();
contentType.MediaType = System.Net.Mime.MediaTypeNames.Image.Jpeg;
contentType.Name = "signature.jpg";
System.Net.Mail.Attachment imageAttachment = new System.Net.Mail.Attachment(ms, contentType);
mailMessage.Attachments.Add(imageAttachment);
System.Net.Mail.LinkedResource signature = new System.Net.Mail.LinkedResource(ms, "image/jpeg");
signature.ContentId = "CustomerSignature";
System.Net.Mail.AlternateView aView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(mailMessage.Body, new System.Net.Mime.ContentType("text/html"));
aView.LinkedResources.Add(signature);
mailMessage.AlternateViews.Add(aView); 
```

我遇到了嵌入图像在某些电子邮件程序中显示的问题，而在其他程序中则没有。我修改了创建链接资源的行，以及创建新 AlternativeView 和图像的行，现在可以在更广泛的程序中查看。

# sharepoint - sharepoint 计算公式上的一个非常小的 Q

> ID：11906982
> 
> 赞同：1
> 
> 时间：2012-08-10T18:05:31.987
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-designer

我有一个名为“名称”的列，我想创建一个新列来分组。如果文件名包含“MDSN”，将返回“MDSN”文件，如果没有，将返回“non-MDSN”

我找到了一种方法`starts-with(@FileLeafRef,"MDKB"),`，但我也想控制返回值，我该怎么办？

对我来说是一个棘手的问题，但任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:42:30.797

假设您的意思是要显示一个字符串何时以另一个字符串开头，那么这将起作用

```
=IF(LEFT([Name],4)="MSDN","MSDN",non-MSDN") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:30:09.100

对于开头为：=IF(LEFT([Name],4)="MSDN","MSDN",non-MSDN")

对于包含：=IF(ISNUMBER(FIND("MSDN",[Name])), "MSDN", "non-MSDN")

有关公式的更多帮助：http: [//msdn.microsoft.com/en-us/library/bb862071.aspx](http://msdn.microsoft.com/en-us/library/bb862071.aspx)

# c# - C# 垃圾收集器恢复 NullRefException

> ID：11906984
> 
> 赞同：4
> 
> 时间：2012-08-10T18:05:59.483
> 
> 标签：c#, garbage-collection

我有这个代码（用于一个非常好的和友好的网站）

```
public class B
{
    static public A IntA;
}

public class A
{
    private int x;

    public A(int num)
    {
        x = num;
    }

    public void Print()
    {
        Console.WriteLine("Value : {0}", x);
    }

    ~A()
    {
        B.IntA = this;
    }
}

class RessurectionExample
{
    // Ressurection
    static void Main()
    {
        // Create A instance and print its value
        A a = new A(50);
        a.Print();

        // Strand the A object (have nothing point to it)
        a = null;

        // Activate the garbage collector
        GC.Collect();

        // Print A's value again
        B.IntA.Print();
    }
} 
```

它创建一个值为 50 的 A 实例，打印它，通过将他的唯一引用设置为 null 来将创建的对象串起来，激活他的 Dtor 并在保存在 B 之后 - 再次打印它。

现在，奇怪的是，调试时，当光标指向最后一行（B.IntA.Print()）时，静态A成员的值为null，按F10后，我得到一个NullReferenceException但值为静态 A 成员更改为应有的状态。

谁能解释这种现象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:10:06.720

您需要调用[GC.WaitForPendingFinalizers](http://msdn.microsoft.com/en-us/library/system.gc.waitforpendingfinalizers.aspx)。没有这个，你的析构函数实际上不会被按顺序调用。

```
static void Main()
{
    // Create A instance and print its value
    A a = new A(50);
    a.Print();

    // Strand the A object (have nothing point to it)
    a = null;

    // Activate the garbage collector
    GC.Collect();

    // Add this to wait for the destructor to finish
    GC.WaitForPendingFinalizers();

    // Print A's value again
    B.IntA.Print();
} 
```

# javascript - 自动隐藏地址栏问题

> ID：11906987
> 
> 赞同：1
> 
> 时间：2012-08-10T18:06:01.393
> 
> 标签：javascript, iphone, safari, hide, address-bar

我正在使用此脚本在 iPhone 上的 Safari 中隐藏我的地址栏：

```
window.addEventListener("load",function() {
setTimeout(function(){
window.scrollTo(0, 1);
}, 0);
}); 
```

问题是如果页面没有完全加载并且用户向下滚动，当它完成加载时它会再次弹回。我想让这更具防御性，所以当用户移动手机并自己清除地址栏时，它不会再这样做了。

这是我的尝试，但没有奏效：

```
window.addEventListener("load",function() {
setTimeout(function(){
  if(window > 1){

  }
  else
  {
window.scrollTo(0, 1);
}}, 0);
}); 
```

以防万一有人说我要执行 if(!window ... 并取出 else 但出于测试目的想保持这样的状态，请指出我写错的可能性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:09:09.827

使用`document.body.scrollTop`而不是简单地使用`window`：

```
window.addEventListener("load",function() {
    setTimeout(function() {
        if (document.body.scrollTop > 1) {
            // Do your testing here...
        } else {
            window.scrollTo(0, 1);
        }
    }, 0);
}); 
```

* * *

完成测试后，您可以将其全部折叠成 1 行：

```
window.addEventListener("load",function() {
    setTimeout(function() {
        document.body.scrollTop || window.scrollTo(0, 1);
    }, 0);
}); 
```