# StackOverflow 问答 11222000-11222999

# c# - C#：初始化要通过属性公开的成员变量

> ID：11222001
> 
> 赞同：2
> 
> 时间：2012-06-27T08:15:58.117
> 
> 标签：c#

我刚刚编写了一小段代码，令我震惊的是，在初始化将通过属性公开和使用的成员变量时，我不确定哪种初始化方法是最佳实践。从下面的两个示例中初始化我的成员变量的最佳方法是什么，更重要的**是为什么**？

**示例 1：**

```
 private string m_connectionString = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ConnectionString;
    private string m_providerName = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ProviderName;

    public string ConnectionString
    {
        get { return m_connectionString; }
        set { m_connectionString = value; }
    }

    public string ProviderName
    {
        get { return m_providerName; }
        set { m_providerName = value; }
    }

    public EntityClusterRefreshServiceDatabaseWorker()
    {
    } 
```

**示例 2：**

```
 private string m_connectionString;
    private string m_providerName;

    public string ConnectionString
    {
        get { return m_connectionString; }
        set { m_connectionString = value; }
    }

    public string ProviderName
    {
        get { return m_providerName; }
        set { m_providerName = value; }
    }

    public EntityClusterRefreshServiceDatabaseWorker()
    {
        ConnectionString = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ConnectionString;
        ProviderName = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ProviderName;
    } 
```

注意：假设我没有在静态上下文中使用这些变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:18:34.523

使用哪个实际上并不重要，除非在基类构造函数调用重写成员的非常奇怪的情况下，在这种情况下时间会改变：实例变量初始化程序在基类构造函数调用*之前*运行，而显然构造函数主体在之后执行。

[在后一种情况下，您可以使用自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)使您的代码更简单：

```
public string ConnectionString { get; set; }
public string ProviderName { get; set; }

public EntityClusterRefreshServiceDatabaseWorker()
{
    // Code as before
    ConnectionString = ...;
    ProviderName = ...;
} 
```

您不能使用第一种形式执行此操作，因为自动实现的属性无法指定初始值。

（您可能*还想*考虑将设置器设为私有，但这是一个单独的问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:19:51.000

您本质上是在做同样的事情，但以不同的形式编写它。

我总是更喜欢（并使用）第二种方法，因为我不喜欢在不知名的地方执行方法。最好把东西分开。属性在类主体上声明并在类构造函数上初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:22:02.150

只要不应该更改连接字符串，您就可以将它们初始化为`static readonly`：

```
private readonly static string m_connectionString = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ConnectionString;
private readonly static string m_providerName = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ProviderName; 
```

只读变量只允许在类声明/构造函数中初始化，并且比常规私有变量更好地优化性能。

回到这个问题 - 你将在哪里初始化这些并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:20:06.007

删除字段并使用自动属性并将您的设置器设为私有。

```
public string ConnectionString {get; private set;}

public string ProviderName {get; private set;} 
```

抢

# jquery - 如何使用 jQuery 获取页面加载时下拉列表的值

> ID：11222007
> 
> 赞同：5
> 
> 时间：2012-06-27T08:16:20.520
> 
> 标签：jquery, drop-down-menu, onload

使用 jQuery，如何在页面加载时在选择中获取所选项目的值？我可以做到 onChange 等，但无法弄清楚页面加载的方式。

这是我的代码：

```
<select name="symb" id="symb">
  <option value="1#10#6">Basic Personal</option>
  <option selected="selected" value="2#20#6">Basic Family</option>
  <option value="7#90#12">Advanced Personal</option>
  <option value="8#120#12">Advanced Family</option>
  <option value="9#130#12">Optimum Personal</option>
  <option value="10#170#12">Optimum Family</option>
</select> 
```

这是我用于获取选项值 onchange 的脚本：

```
$(document).ready(function() {
    $("#symb").change(function() {
          var val = $(this).symbCost(0);
    })

   $.fn.symbCost = function(pos) {
        var total = parseInt($("option:selected").val().split('#')[pos]);
        return total;
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T08:19:12.760

```
$(document).ready(function() {
    alert($("#symb").val());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:21:11.530

**工作演示** [http://jsfiddle.net/YXbDd/3/](http://jsfiddle.net/YXbDd/3/) **或** [http://jsfiddle.net/YXbDd/4/](http://jsfiddle.net/YXbDd/4/)

API：[http](http://api.jquery.com/ready/) `> Specify a function to execute when the DOM is fully` ://api.jquery.com/ready/已加载。

我不确定`pos`您的情况是什么，但这应该可以做到。

`$("#symb").val().split('#')[0]`

休息为演示和代码，希望对您有所帮助，

**代码**

```
$(document).ready(function() {
    alert("when the page load ==> " + $("#symb").val().split('#')[0]);
    $("#symb").change(function() {
          var val = $(this).symbCost(0);
    })

   $.fn.symbCost = function(pos) {
        var total = parseInt($("option:selected").val().split('#')[pos]);
        alert(total);
        return total;
    }
});​ 
```

**或者**

```
$(document).ready(function() {
    alert("when the page load ==> " + $("#symb option:selected").val().split('#')[0]);
    $("#symb").change(function() {
          var val = $(this).symbCost(0);
    })

   $.fn.symbCost = function(pos) {
        var total = parseInt($("option:selected").val().split('#')[pos]);
        alert(total);
        return total;
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T12:38:47.250

```
$(document).ready(function() {
    alert($("#dropdownid").val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:45:57.810

最好的解决方案和简单：

```
$(document).ready(function() {
$.fn.symbCost = function(pos) {
var total = parseInt($(this).val().split('#')[pos]);
    return total;
}   
$("#symb").change(function() {
    var val = $(this).symbCost(0);
}).triggerHandler('change'); 
```

});

或这个

```
$(document).ready(function() {
$.fn.symbCost = function(pos) {
    var total = parseInt($(this).val().split('#')[pos]);
    return total;
}
$("#symb").change(function() {
    var val = $(this).symbCost(0);
}).symbCost(0); 
```

});

# regex - PL/SQL REGEXP_LIKE 测试字符串的允许字符

> ID：11222010
> 
> 赞同：0
> 
> 时间：2012-06-27T08:16:32.627
> 
> 标签：regex, oracle, plsql

我需要验证提供的字符串是否只允许使用 Oracle 正则表达式 (REGEXP_LIKE) 的字符。允许的字符是：abcdefghijklmnopqrstuvwxyz0123456789_-。试图执行

```
SELECT CASE 
         WHEN REGEXP_LIKE('abcdefghijklmnopqrstuvwxyz0123456789_-.'
                        , '^[a-z0-9_\-\.]+$') 
         THEN 'true' 
         ELSE 'false' 
END tmp 
FROM dual; 
```

结果为“假”。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:36:05.300

怎么样：

```
SELECT CASE
          WHEN REGEXP_LIKE ('abcdefghijklmnopqrstuvwxyz0123456789_-.',
                            '^([a-z]|[0-9]|_|\-|\.)+$')
          THEN
             'true'
          ELSE
             'false'
       END AS tmp
  FROM DUAL; 
```

这能为你解决吗？（恐怕我不在电脑前测试这个）

编辑：

如果您需要查看导致字符串验证失败的原因，下面的 FWIW 应该删除所有有效字符，只留下那些无效的字符：

```
SELECT REGEXP_REPLACE ('abcdefghijklmnopqrstuvwxyz0123456789_-.',
                       '([a-z]|[0-9]|_|\-|\.)+',
                       '') AS tmp
  FROM DUAL; 
```

您可以测试返回`NULL`有效且不为空的情况，您可以在验证错误消息中返回无效字符。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:56:19.103

```
 SELECT CASE
         WHEN COUNT(REPLACE((TRANSLATE('abcdefghijklmnopqrstuvwxyz0123456789_-.',
                                       'abcdefghijklmnopqrstuvwxyz0123456789_-.',
                                       ' ')),
                            ' ',
                            '')) = 0 THEN
          'TRUE'
         ELSE
          'FALSE'
       END AS CHECK_RESULT
  FROM DUAL 
```

如果预定义列表中不存在任何字符，则此查询将返回 false。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:19:53.557

破折号“-”必须是右括号[]之间的第一个元素，反斜杠在[]之间没有特殊含义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T05:46:27.990

在字符类`'-'`中，中间的任何符号都被视为*元字符（表示从左到右的符号范围）*，因此该类`[a-z0-9_\-\.]`不允许`'-'`出现在 source_string 中。正确放入`'-'`字符类作为符号的方法是将其放置在字符类的第一个或最后一个位置。

当它在字符类中时，也不需要`'.'`用斜杠转义，但你的变体不违反语法。

以下任何正则表达式都可以满足您的期望：

```
variant_1 => '^[-a-z0-9_.]+$'
variant_2 => '^[a-z0-9_.-]+$'
variant_3 => '^[a-z0-9_\.-]+$' 
```

# java - Java Trace 及其用法的示例？

> ID：11222015
> 
> 赞同：0
> 
> 时间：2012-06-27T08:17:07.550
> 
> 标签：java, trace

[http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/trace.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/trace.html)

谁能给我提供几个如何使用 Java 跟踪的例子并解释一下它的用法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:29:09.093

JPDA 用于远程调试任何 Java 应用程序。

通常用于调试部署在远程位置的应用程序，主要堆栈是 Web 应用程序..

您可以在这里获得出色的操作方法

[http://blogs.mulesoft.org/debugging-your-tomcat-webapp-with-eclipse/](http://blogs.mulesoft.org/debugging-your-tomcat-webapp-with-eclipse/)

# python - Python中的Euler 81项目

> ID：11222019
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:17:14.260
> 
> 标签：python

在下面的 5 x 5 矩阵中，从左上角到右下角的最小路径和，仅向右和向下移动，用粗体红色表示，等于 2427。

**131** 673 234 103 18

**201** **96** **342** 965 150

630 803 **746** **422** **111**

537 699 497 121 **956**

805 732 524 37 **331**

在 matrix.txt（右键单击并“将链接/目标另存为...”）中找到最小路径总和，这是一个 31K 的文本文件，其中包含一个 80 x 80 矩阵，从左上角到右下角只需向右移动和下。

备注：我认为他们做错了，当他们标记方式时[http://projecteuler.net/problem=81](http://projecteuler.net/problem=81)

```
import numpy as np

matrix0 = [ map(int, row.split()) for row in open('matrix.txt')]

matrix=np.arange(6400).reshape(80,80)

for i in range(80):
    for j in range(80):
        matrix[i, j]=0

for i in range(80):
    for j in range(80):
        matrix[i, j]=matrix0[i][j]

sum=matrix[0,0]

k=0
n=0
while (k+n)<158:
    for i in range(k, k+1):
        for j in range(n, n+1):
            if i!=79 and j!=79:
                if matrix[i+1, j]<=matrix[i, j+1]:
                    sum=sum+matrix[i+1, j]
                    k=i+1
                    n=j
                else:
                    sum+=matrix[i, j+1]
                    k=i
                    n=j+1
            elif i==79:
                sum+=matrix[i, j+1]
                k=i
                n=j+1
            elif j==79:
                sum+=matrix[i+1, j]
                k=i+1
                n=j                 

print sum 
```

当我将此代码用于矩阵 5x5 时，它给了我正确的答案。我不明白为什么它不适用于更大的矩阵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:21:45.870

因为您没有正确执行搜索。问题是要求总体成本最低的路径，因此您需要 A* 搜索或 Dijkstra 算法。对每个节点的最低分支进行简单的一次通过检查不会削减它。

# sql - 查找本周过生日的人列表

> ID：11222023
> 
> 赞同：3
> 
> 时间：2012-06-27T08:17:21.157
> 
> 标签：sql, sql-server-2008

我正在尝试使用以下代码列出本周过生日的人：

```
declare @START_DATE date;
set @START_DATE  = DATEADD(dd, 1 - DATEPART(dw, getdate()), getdate())
declare @END_DATE date;
set @END_DATE = DATEADD(dd,6, @START_DATE)
set DATEFIRST 1

SELECT  @START_DATE as StartDate, Personel.DogumTarihi , @END_DATE as EndDate
      ,[Adi]
      ,[Soyadi]
      ,[BirimAdi]
      ,[DogumTarihi]
      ,[MudurlukAdi]
      ,[Gorevi]
      ,[CepTelefonu]
      ,[EvTelefonu]
from Personel 
where (
      DATEPART(m, Personel.DogumTarihi) = DATEPART(m, @START_DATE) 
  and DATEPART(DAY, Personel.DogumTarihi) >= DATEPART(DAY, @START_DATE) 
  and DATEPART(DAY, Personel.DogumTarihi) <= DATEPART(DAY, @END_DATE)
  ) 
  OR (
      DATEPART(m, Personel.DogumTarihi) = (DATEPART(m, @START_DATE)+ 1) 
  and DATEPART(DAY, Personel.DogumTarihi) <= DATEPART(DAY, @END_DATE)
  ) 
```

首先我设置开始日期并根据开始日期计算结束日期。然后我将星期一设置为一周的第一天。但是每次我运行它时，我都会收到一个不同的开始日期。我对 Ms Sql Scripting 很陌生，我可能在声明中做错了什么，但我找不到它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:23:57.093

好的，再尝试一次：

```
where

case when year(@START_DATE) = year(@END_DATE) THEN '1' ELSE CASE WHEN month(@birthdate) = 12 THEN '0' WHEN month(@birthdate) = 1 THEN '1' ELSE '9' END END
+ RIGHT('0' + CONVERT(varchar(2), MONTH(@birthdate)),2)
+ RIGHT('0' + CONVERT(varchar(2), DAY(@birthdate)),2)

between

case when year(@START_DATE) = year(@END_DATE) THEN '1' ELSE '0' END
+ RIGHT('0' + CONVERT(varchar(2), MONTH(@START_DATE)),2)
+ RIGHT('0' + CONVERT(varchar(2), DAY(@START_DATE)),2)

and

'1'
+ RIGHT('0' + CONVERT(varchar(2), MONTH(@END_DATE)),2)
+ RIGHT('0' + CONVERT(varchar(2), DAY(@END_DATE)),2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:34:07.860

试试这个：

```
SELECT  DATEADD(WEEK, DATEDIFF(DAY, 0, GETDATE())/7, 0) FirstDayOfCurrentWeek, 
        DATEADD(YEAR, DATEDIFF(YEAR, DogumTarihi, GETDATE()), [DogumTarihi]) BirthdayThisYear,
        DATEADD(WEEK, 1, DATEADD(WEEK, DATEDIFF(DAY, 0, GETDATE())/7, 0)) FirstDayOfNextWeek           
          ,[Adi]
          ,[Soyadi]
          ,[DogumTarihi]
          ,[BirimAdi]
          ,[MudurlukAdi]
          ,[Gorevi]
          ,[CepTelefonu]
          ,[EvTelefonu]         
FROM    Personel
WHERE   DATEADD(YEAR, DATEDIFF(YEAR, [DogumTarihi], GETDATE()), [DogumTarihi]) >= DATEADD(WEEK, DATEDIFF(DAY, 0, GETDATE())/7, 0)
        AND
        DATEADD(YEAR, DATEDIFF(YEAR, [DogumTarihi], GETDATE()), [DogumTarihi]) < DATEADD(WEEK, 1, DATEADD(WEEK, DATEDIFF(DAY, 0, GETDATE())/7, 0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:00:35.130

sql应该让你直接指定星期

```
DATEPART(ww,GETDATE()) 
```

或在甲骨文中： `to_char( mydate, 'ww' )`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T11:43:35.237

为了解决我的问题，我根据答案修改了上面的代码：

```
set DATEFIRST 1
declare @START_DATE date;
set @START_DATE  = DATEADD(dd, 1 - DATEPART(dw, getdate()), getdate())
declare @END_DATE date;
set @END_DATE = DATEADD(dd,6, @START_DATE)

SELECT  @START_DATE as StartDate, 

(case when 
(DATEPART(m, @START_DATE) = DATEPART(m, @END_DATE))
then 
(case when (DATEPART(DAY, Personel.DogumTarihi) >= DATEPART(DAY, @START_DATE) and DATEPART(DAY, Personel.DogumTarihi) <= DATEPART(DAY, @END_DATE)) then Personel.DogumTarihi else 0 end)
else 
    (case when DATEPART(m, Personel.DogumTarihi) = DATEPART(m, @START_DATE)
        then
            (case when (DATEPART(DAY, Personel.DogumTarihi) >= DATEPART(DAY, @START_DATE)) then Personel.DogumTarihi else 0 end)
        else
            (case when (DATEPART(DAY, Personel.DogumTarihi) <= DATEPART(DAY, @END_DATE)) then Personel.DogumTarihi else 0 end)
        end
    )
end), 
@END_DATE as EndDate, [TCKN]
      ,[Adi]
      ,[Soyadi]
      ,[BirimAdi]
      ,[DogumTarihi]
      ,[MudurlukAdi]
      ,[Gorevi]
      ,[CepTelefonu]
      ,[EvTelefonu]
      ,[VakifTelefonu]
from Personel where 
DATEPART(m, @START_DATE) = DATEPART(m, @END_DATE)
OR DATEPART(m, Personel.DogumTarihi) = DATEPART(m, @START_DATE)
OR DATEPART(m, Personel.DogumTarihi) = DATEPART(m, @END_DATE) 
```

现在考虑“一个月的开始和结束日期在同一周（如本周）”的情况。看起来它带来了正确的结果..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:13:30.470

让我们试一试：

```
declare @today datetime

set @today = getdate()
-- erase the hours
set @today = dateadd(hh, -datepart(hh, @today), @today)
-- erase the minutes
set @today = dateadd(mi, -datepart(mi, @today), @today)
-- erase the seconds    
set @today = dateadd(ss, -datepart(ss, @today), @today)
-- erase the milliseconds    
set @today = dateadd(ms, -datepart(ms, @today), @today)

-- go to start of current week (sunday!)    
set @today = dateadd(dd, 1-datepart(dw, @today), @today)

select * from MYTABLE
where DATECOL between 
  dateadd(yy, datepart(yy, DATECOL) - datepart(yy, @today), @today) and 
  dateadd(d, 7, dateadd(yy, datepart(yy, DATECOL) - datepart(yy, @today), @today)) 
```

显然 SqlServer 2012 有一个 DATEFROMPARTS 函数，在 2005 年我们将不得不使用这种迂回的方式来修剪日期。

为了选择生日，我将“今天的年份”替换为记录的年份。对于范围的结束日期，我增加了 7 天。请注意，您要从星期日 0:00 到星期六 23:59 进行搜索。

如果新的一年开始的一周中途并且您想要的生日在新的一年，这可能仍然会失败。

# excel - 将 R 中的矩阵导出到 Excel 工作簿

> ID：11222027
> 
> 赞同：0
> 
> 时间：2012-06-27T08:17:29.347
> 
> 标签：excel, r

我在 R 中有几个矩阵，并希望将它们作为单独的工作表导出到现有工作簿。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:27:55.390

看看[XLConnect](http://cran.r-project.org/web/packages/XLConnect/index.html)库：

```
d <- matrix( rnorm(1000), ncol = 10 )

require(XLConnect)
wb <- loadWorkbook( "wb.xlsx", create=FALSE )
createSheet(wb, name="sheet1")
writeWorksheet( wb, as.data.frame(d), sheet="sheet1" )
saveWorkbook(wb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:05:42.847

```
require(XLConnect)
wb <- loadWorkbook( "wb.xls", create=TRUE )
createSheet(wb, name="sheet1")
writeWorksheet( wb,as.data.frame(A), sheet="sheet1" )
Error: IllegalArgumentException (Java): Sheet index (0) is out of range (0..-1)
saveWorkbook(wb) 
```

# java - 使用 javax.media.jai 进行图像转换时 JVM 崩溃

> ID：11222028
> 
> 赞同：0
> 
> 时间：2012-06-27T08:17:35.167
> 
> 标签：java, jakarta-ee, jai, jvm-crash

在我们的应用程序中，我们使用 javax.media.JAI 库来缩放和改进图像

但有时（10 次中有 1 次）会导致 VM 崩溃

```
 #
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fdb6f49140b, pid=2153, tid=140580255180544
#
# JRE version: 6.0_22-b22
# Java VM: OpenJDK 64-Bit Server VM (20.0-b11 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea6 1.10.4
# Distribution: Fedora release 16 (Verne), package fedora-61.1.10.4.fc16-x86_64
# Problematic frame:
# C  [libgs.so+0x16940b]  s_DCT_set_defaults+0x8b
#
# An error report file with more information is saved as:
# /usr/share/tomcat/hs_err_pid2153.log
#
# If you would like to submit a bug report, please include
# instructions how to reproduce the bug and visit:
#   http://icedtea.classpath.org/bugzilla
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

在代码中添加日志确实有助于确定确切的行

```
 DebugHelper.errorLog("Start transformImage2");
        List modImages = new ArrayList();
        PageImage page = new PageImage();

        // generate rendered image.
        RenderedOp im = JAI.create("fileload", image.getFile()
                .getAbsolutePath());

        // get the width and height of original image.
        float width = im.getWidth();
        float height = im.getHeight();

        // improve the quality of image.
        DebugHelper.errorLog("Improving quality of image");
        RenderingHints qualityHints = new RenderingHints(
                RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
        qualityHints.put(RenderingHints.KEY_ANTIALIASING, 
```

“Start transformImage2”被打印，但“Improving quality of image”没有。所以我们知道它在这 3-4 行中。此外，从 hs_err* 文件中，它指向 float width = im.getWidth();

```
 Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.sun.imageio.plugins.jpeg.JPEGImageReader.initJPEGImageReader()J+0
j  com.sun.imageio.plugins.jpeg.JPEGImageReader.(Ljavax/imageio/spi/ImageReaderSpi;)V+174
j  com.sun.imageio.plugins.jpeg.JPEGImageReaderSpi.createReaderInstance(Ljava/lang/Object;)Ljavax/imageio/ImageReader;+5
j  javax.imageio.spi.ImageReaderSpi.createReaderInstance()Ljavax/imageio/ImageReader;+2
j  javax.imageio.ImageIO$ImageReaderIterator.next()Ljavax/imageio/ImageReader;+16
j  javax.imageio.ImageIO$ImageReaderIterator.next()Ljava/lang/Object;+1
j  com.sun.image.codec.jpeg.JPEGCodec$ImageIOJPEGImageDecoder.(Ljava/io/InputStream;)V+26
j  com.sun.image.codec.jpeg.JPEGCodec$ImageIOJPEGImageDecoder.(Ljava/io/InputStream;Lcom/sun/image/codec/jpeg/JPEGCodec$1;)V+2
j  com.sun.image.codec.jpeg.JPEGCodec.createJPEGDecoder(Ljava/io/InputStream;)Lcom/sun/image/codec/jpeg/JPEGImageDecoder;+6
j  com.sun.media.jai.codecimpl.JPEGImage.(Ljava/io/InputStream;Lcom/sun/media/jai/codec/ImageDecodeParam;)V+35
j  com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(I)Ljava/awt/image/RenderedImage;+29
j  com.sun.media.jai.opimage.CodecRIFUtil.create(Ljava/lang/String;Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+184
j  com.sun.media.jai.opimage.JPEGRIF.create(Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+4
j  sun.reflect.GeneratedMethodAccessor740.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+48
J  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  javax.media.jai.FactoryCache.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  javax.media.jai.OperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+57
j  javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+12
j  javax.media.jai.registry.RIFRegistry.create(Ljavax/media/jai/OperationRegistry;Ljava/lang/String;Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+35
j  com.sun.media.jai.opimage.StreamRIF.create(Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+191
j  sun.reflect.GeneratedMethodAccessor740.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+48
J  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  javax.media.jai.FactoryCache.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  javax.media.jai.OperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+57
j  javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+12
j  javax.media.jai.registry.RIFRegistry.create(Ljavax/media/jai/OperationRegistry;Ljava/lang/String;Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+35
j  com.sun.media.jai.opimage.FileLoadRIF.create(Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+158
j  sun.reflect.GeneratedMethodAccessor740.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+48
J  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  javax.media.jai.FactoryCache.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  javax.media.jai.OperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+57
j  javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;+12
j  javax.media.jai.registry.RIFRegistry.create(Ljavax/media/jai/OperationRegistry;Ljava/lang/String;Ljava/awt/image/renderable/ParameterBlock;Ljava/awt/RenderingHints;)Ljava/awt/image/RenderedImage;+35
j  javax.media.jai.RenderedOp.createInstance(Z)Ljavax/media/jai/PlanarImage;+171
J  javax.media.jai.RenderedOp.createRendering()V
j  javax.media.jai.RenderedOp.getWidth()I+1
j  com.myapp.helpers.conversion.DocumentConverter.transformImage(Lcom/myapp/helpers/conversion/PageImage;Ljava/lang/String;Lcom/myapp/helpers/conversion/ImageSetting;)Ljava/util/List;+39
j  com.myapp.helpers.conversion.DocumentConverter.convertDocuments(Ljava/util/List;Ljava/lang/String;Lcom/myapp/helpers/conversion/ImageSetting;)Ljava/util/Map;+597
J  com.myapp.helpers.conversion.ConversionTask.run()V 
```

所以我有几个问题

1.  问题的确切原因是什么（可能是）？

2.  为什么错误不是一直发生，相同的图像有时会成功转换而有时会失败？

3.  如何解决（当然:)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:20:13.277

我建议检查[随后的 JVM 版本](http://www.oracle.com/technetwork/java/javase/downloads/index.html)。

```
JRE version: 6.0_22-b22 
```

相对较旧，并且有连续的 JRE 6 版本，以及（当然）Java 7。我怀疑更高版本是缓解此问题的一种简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:53:22.203

好的，我觉得向您解释如何解决问题很愚蠢，但这就是我要做的：

1.  停止在代码中查找错误，它不存在
2.  找出你的程序在哪一行崩溃。开始禁用线路，看看它是否仍然崩溃。
3.  升级涉及的组件。首先是ghostview库，然后是jdk，然后是操作系统。
4.  开始切换组件。我一直在使用开源 jdk 时遇到问题，也许尝试切换到专有的 oracle 一个。然后尝试不同的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:19:03.870

我认为您需要设置堆大小

参考 [http://viralpatel.net/blogs/jvm-java-increase-heap-size-setting-heap-size-jvm-heap/](http://viralpatel.net/blogs/jvm-java-increase-heap-size-setting-heap-size-jvm-heap/)

# scala - 如何使 akka 承诺失败？

> ID：11222029
> 
> 赞同：2
> 
> 时间：2012-06-27T08:17:39.537
> 
> 标签：scala, akka, future

假设我有这样的功能（我使用 akka 2.0.2）：

```
def foo(message: String): Future[SomeClass] =
  for {
    result <- actor ? message
  } yield SomeClass(result) 
```

函数的调用者设置`onSuccess`和`onFailure`挂钩未来，所以如果我想让一个演员违背承诺，我让它发`akka.actor.Status.Failure`回给发送者。这工作得很好。现在，如果我想检查某些条件`foo`并在条件失败/成功的情况下返回失败的未来怎么办？

```
def foo(message: String): Future[SomeClass] =
  if(...) {
    ...//return failed future
  } else {
    for {
      result <- actor ? message
    } yield SomeClass(result)
  } 
```

“返回失败的未来”块应该是什么样的？我需要一个执行上下文来实现它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:47:26.927

只需返回一个表达式：`Promise.failed(new Exception)`，其中的例外是您希望让未来失败的那个。[如果您从 2.10 开始使用 Scala 标准库](http://www.scala-lang.org/api/milestone/scala/concurrent/Promise%24.html)中的 Scala 期货和承诺，则不需要执行上下文。

[Akka 期货和承诺](http://doc.akka.io/api/akka/2.0/akka/dispatch/Promise%24.html)需要`failed`承诺方法的隐式执行上下文。[执行上下文伴随对象](http://doc.akka.io/api/akka/2.0/akka/dispatch/ExecutionContext%24.html)中应该有一个可用的默认执行上下文，如果您有一个`ActorSystem`可用的实例，您可以使用它。

# php - 计算服务器和用户时间之间的差异

> ID：11222032
> 
> 赞同：3
> 
> 时间：2012-06-27T08:17:45.883
> 
> 标签：php, javascript, date, time

我正在编写一个简单的 javascript 来计算服务器时间和用户时间之间的时间差。但是出了点问题。

如果我赶上 javascript 和 php 日期，我有：

```
date("M d Y h:i:s A")
php date : Wed Jun 27 2012 04:10:41 AM  

new Date()
J S date : Wed Jun 27 2012 10:10:40 GMT+0200 (CEST) 
```

这是对的！我有两个不同的本地时间和服务器时间。

现在，如果我花几秒钟的时间……出了点问题：

```
(php: date("U"))
sec PHP: 1340784640    

(js new Date().getTime()/1000 )
sec J S: 1340784640 
```

我也有同样的时间！

你能帮我修一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:24:40.747

`date("U")`并`new Date().getTime()`返回定义为自 1970 年 1 月 1 日*UTC*以来经过的秒数的[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_timestamp)。不考虑当前语言环境的时区。

 *用于`date('Z')`获取 PHP（以秒为单位）和[`new Date().getTimezoneOffset()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)JavaScript（以分钟为单位）的时区偏移量。*

# neo4j - 如何从 Neo4j 中的节点创建重复节点？

> ID：11222035
> 
> 赞同：6
> 
> 时间：2012-06-27T08:17:48.860
> 
> 标签：neo4j

我正在将我的主要 Neo4j 图形（mainDB）的一部分复制到另一个图形（dupDB）中，同时如何在 dupDB 中创建一个与 mainDB 中具有相似属性的节点。

我会做

```
Node main = mainDB.getNodeByID(477);
Node dup = dupDB.createNode(); 
```

现在我必须手动将 main 中的每个属性复制到 dup 中，是否有任何单行方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-28T00:12:21.640

您可以在 Neo4j 2.1 中创建带有地图的副本（之前不确定）

```
MATCH (n:Node {name: 'abc'}) 
WITH n AS map 
CREATE (copy:Node) 
SET copy=map
RETURN copy 
```

如果您对任何属性有唯一性约束，它会失败，但会显示消息......

> *节点已经存在，标签为 XX，属性“property”=[value]*

您可以通过为具有唯一性约束的属性提供新值、创建新节点并从原始节点复制其他非唯一属性值来避免这种情况。

```
MATCH (n:Node {name: 'abc'}) 
WITH n as map 
CREATE (copy:Node {name: 'def'}) 
SET copy.property1 = map.property1
, copy.property2 = map.property2
RETURN copy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T17:39:50.287

我不认为这存在于一年前。但是，这可能会解决今天的问题。

Neo4j shell 有一个转储命令：[http ://docs.neo4j.org/chunked/preview/shell-commands.html#_dumping_the_database_or_a_cypher_result_to_cypher_statements](http://docs.neo4j.org/chunked/preview/shell-commands.html#_dumping_the_database_or_a_cypher_result_to_cypher_statements)

```
dump START n=node({self}) MATCH (n)-[r]-(m) return n,r,m; 
```

然后，您可以获取此输出并将其发送到另一个数据库以创建这些节点、属性和所有内容。

# objective-c - xCode 在动态创建的 ViewController 之间传递数据

> ID：11222038
> 
> 赞同：0
> 
> 时间：2012-06-27T08:18:04.243
> 
> 标签：objective-c, xcode

我正在尝试建立一个基于 JSON 文件动态创建 ViewControllers 的项目。前几天我问了一个关于如何在这里创建这个的问题

[xCode 动态创建 ViewControllers](https://stackoverflow.com/questions/11191056/xcode-dynamically-create-viewcontrollers)

所以我已经能够动态地创建 ViewControllers，并且在玩了更多之后，我已经很容易设置它，所以当应用程序加载时，它会生成多少个 ViewControllers 在 JSON 中指定。我还可以轻松地在它们之间导航，并且还可以从 JSON 中设置每个屏幕的按钮、视图等。我只是这样做

```
NSDictionary *MainJSON = [sJson JSONValue];
NSArray *theArray = [MainJSON valueForKey:@"viewControllers"]; 
```

然后遍历 theArray 创建一个 ViewController 实例。

我的问题是，我希望能够在 ViewControllers 之间传递数据。比如说我在 JSON 中设置它，所以第一个 ViewController 有一个文本字段。用户将输入一些数据，我希望能够对其进行设置，以便当他们导航到下一个屏幕时，该数据将被带到下一个屏幕。我目前像这样切换屏幕

```
-(void)nextScreen
{
    for(int i = 0; i < [vcArray count]; i++)
    {
        int iID = i+1;
        if([self.navigationController.viewControllers count] == iID)
        {
            ViewController *theVC = [vcArray objectAtIndex:i];

            [self.navigationController pushViewController:theVC animated:YES];
            break;
        }
    }
} 
```

现在通常每个 ViewController 都会有一个类，所以在我推动的 ViewController 中，我可以在该类中做属性并合成一个 NSString，所以当将数据传递给下一个 ViewController 时，我会这样做。

```
vc.theString = textField.text 
```

但是当我动态生成这些 ViewControllers 时，我不能这样做，因为我只使用一个 .h 和 .m 文件，并且我生成的每个 ViewController 都使用相同的 XIB 文件。有没有人知道我如何在这个设置中传递数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:58:37.153

如果您的问题是同一视图控制器需要不同的 xib，您可以在主 iOS 应用程序中提供所有这些，稍后通过在 JSON 中传递 xib 名称，您可以实例化该 xib 并分配给控制器。

如果您还需要调用您不知道名称的 UIView 对象，您也可以始终使用存储在 JSON 中的 tag 属性。也许您还可以存储 UIView 类型，例如 'UILabel'、'UITextView'、ecc... 并调用适当的设置器获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:25:18.263

弄清楚了。如果我给每个视图一个来自 JSON 的标签，就可以轻松地连接我需要的对象。

# ios - 应用因违反 iCloud 存储指南而被拒绝

> ID：11222039
> 
> 赞同：3
> 
> 时间：2012-06-27T08:18:06.193
> 
> 标签：ios, core-data

我的应用程序最近被拒绝，因为它在将备份到 iCloud 的目录中安装了一个数据库。由于数据库带有大量预先填充的数据，并且应用程序将用户生成的数据存储到同一个文件中。因此，将用户生成的内容与预先填充的数据混合起来并不是 Apple 想要我们做的。到目前为止，一切都很好。

将我的数据库分成两部分，并使用 NSURLIsExcludedFromBackupKey = YES 使用预先填充的数据标记存储文件。

但是如果用户想要修改该存储中的数据会发生什么，因为他发现了一个失败并希望修改它。或者我自己提供了一个在线更新，它修改了该商店的值。我该如何应对。

我是否必须删除存储文件，创建一个新文件（现在使用 NSURLIsExcludedFromBackupKey = NO）或从一开始就将数据库存储在 /tmp 或 /Library/caches 下并将其移动到 /Application Support（自动备份）但是由于某种原因我的数据库被系统删除的威胁是 /Library/caches 的情况是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:33:53.757

如果您的应用程序属于您可以实际更改应用程序中预填充数据的类型，Apple 将不允许您备份预填充数据，这有点烦人。如果预填充的数据库很大，我可以理解他们不希望您的应用程序将用户的 iCloud 空间浪费在 AppStore 中已有的信息上。

Woody 对这种方法有一个好主意，但我不确定 Apple 是否会忽略这样一个事实，即如果您在应用启动时将预填充的数据复制到用户备份的数据库，您实际上会浪费同样多的空间。

像这样的东西怎么样：

*   **A：**带有预填充数据的数据库，未备份
*   **B：**带有用户添加数据的数据库，已备份
*   当用户对 A 中的对象进行更改时，在 B 中创建一个“覆盖”A 中的行的新行，例如通过使用相同的 ID 或在 DB 中有一个列来告诉应用程序应该替换 A 中的哪个对象通过 B 中的新行。

每当您需要更新您的应用程序时，您将用新内容替换 DB A，仅此而已。这可能会导致与用户更改的数据发生冲突。您必须决定用户数据是否比更新的数据更重要，以及如何处理这些冲突（例如，尝试同时保留它们）。

如果您需要在更新中更改 DB B 的结构，例如，如果您需要添加一列，则必须在您的应用程序中包含一个更新例程，该例程检测用户拥有旧的 DB 版本并编写代码更新后首次启动时将用户数据迁移到新数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:26:21.747

当您启动时，如果用户数据库未填充，您可以从预先填充的数据表中复制数据，并可能给用户一个选项来重置默认值，这又会如何？

# java - 关于谷歌市场上的旧安卓版本

> ID：11222040
> 
> 赞同：0
> 
> 时间：2012-06-27T08:18:07.243
> 
> 标签：java, android

我在 android 2.2 中开发了我的应用程序，并将其放在谷歌市场 (munspel-appen) 上。我可以在统计数据中看到 4% 正在使用 android 版本 2.1 我无法访问此类设备，所以我想知道如果我的应用程序也从市场上下载，是否仍然可以在旧版本设备上运行，还是只能从 2.2 及更高版本运行? 怎么能说出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:32:30.877

您的应用程序 (https://play.google.com/store/apps/details?id=com.munspel.munspelappen) 的配置似乎将应用程序限制为 2.2 及更高版本的设备。

操作系统版本低于 2.2 的用户。无法从谷歌市场下载您的应用程序。

我会在 Android 2.1 模拟器中测试您的应用程序，如果它在那里工作，请将您的应用程序的 minSDK 更改为 2.1 并将更新上传到市场。这样，您的应用程序将可供尽可能多的用户使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:19:46.243

例如，您可以在 eclipse 中的 android 模拟器中尝试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:29:36.230

如果您的应用程序与`API Level 7`. 你可以`android:minSdkVersion=8`在 AndroidManifest 中指定，（来自文档）如果系统的 API Level 低于该属性中指定的值，Android 系统将阻止用户安装应用程序，你可以尝试在运行 2.1 版本的 Emulator 上运行你的应用程序。阅读更多[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#uses](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#uses)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:21:39.253

如果您愿意付费，有几家公司专门在物理设备上测试 Android 应用程序。例子：

*   [http://duarlander.ning.com](http://duarlander.ning.com)
*   [http://www.perfectomobile.com](http://www.perfectomobile.com)

我认为谷歌还有很多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T08:40:53.627

首先，市场应该`minSdkVersion`在您的清单中使用 搜索时过滤应用程序。

要测试，你可以使用 2.1 版本的模拟器，看看它是否有效。

除了 2.2 中的新代码之外，很可能大多数代码都可以使用。

# ios - 如何旋转 UITableViewCellAccessoryDisclosureIndicator？

> ID：11222042
> 
> 赞同：6
> 
> 时间：2012-06-27T08:18:09.053
> 
> 标签：ios, uitableview

我正在`UITableView`为 ios 应用程序制作一个可扩展/可折叠的单元格。我`UITableViewCellAccessoryDisclosureIndicator`在这些单元格上放了一个，但是当单元格展开/折叠时，我想让箭头向上/向下。

我发现可以使用自定义图像制作一个按钮并根据单元格的状态更改按钮，但这对我来说似乎很脏，因为我不需要按钮，我必须向项目添加 2 个图像（好的，它不是那么大，但无论如何）。

那么简单地旋转现有的不是更好 `UITableViewCellAccessoryDisclosureIndicator`吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:56:01.077

这不完全是你想要的，但这是我想到的第一件事。首先，实例化一个 UIButtonTypeDetailDisclosure 类型的按钮：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

接下来，将按钮旋转 90 度：

```
CGAffineTransform rotationTransform = CGAffineTransformIdentity;
rotationTransform = CGAffineTransformRotate(rotationTransform, DegreesToRadians(90));
button.transform = rotationTransform; 
```

最后，使用按钮作为附件视图：

```
cell.accessoryView = button; 
```

希望有帮助。

# sql - 表值函数 - 输出中忽略排序依据

> ID：11222043
> 
> 赞同：24
> 
> 时间：2012-06-27T08:18:10.703
> 
> 标签：sql, sql-server, sql-server-2012, sql-order-by

我们正在从 SQL Server 2008 迁移到 SQL Server 2012，并立即注意到我们所有的表值函数不再以正确排序的顺序传递它们的临时表内容。

代码：

```
INSERT INTO @Customer
        SELECT Customer_ID, Name,
        CASE 
            WHEN Expiry_Date < GETDATE() then 1 
            WHEN Expired = 1 then 1 
            ELSE 0
            END
        from Customer **order by Name** 
```

在 SQL Server 2008 中，此函数返回按名称排序的客户。在 SQL Server 2012 中，它返回未排序的表。SQL 2012 中忽略了“ **order by” 。**

我们是否必须重新编写所有函数以包含 a`sort_id`然后在主应用程序中调用它们时对其进行排序，还是有一个简单的修复？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-27T17:34:45.697

你原来的方法有两个问题。

1.  在插入表时，永远不能保证`ORDER BY`on`INSERT ... SELECT ... ORDER BY`将是实际插入行的顺序。
2.  在从中选择时，SQL Server 不保证`SELECT`没有 an`ORDER BY`将返回任何特定顺序的行，例如插入顺序。

在 2012 年，第 1 项的行为似乎发生了变化。现在它通常`ORDER BY`忽略`SELECT`作为`INSERT`

```
DECLARE @T TABLE(number int)

INSERT INTO @T 
SELECT number
FROM master..spt_values
ORDER BY name 
```

### 2008年计划

![2008年计划](../Images/4aa2da90ede50233ee50030c05f937bc.png)

### 2012年计划

![2012年计划](../Images/dfcc7c9077614f83cd7e49cfb437a47e.png)

行为改变的原因是，在以前的版本中，SQL Server 生成了一个计划，该计划在`SET ROWCOUNT 0`(off) 和`SET ROWCOUNT N`. 排序运算符只是为了确保正确的语义，以防计划由具有非零`ROWCOUNT`集的会话运行。它左边的`TOP`运算符是 a [`ROWCOUNT TOP`](http://blogs.msdn.com/b/craigfr/archive/2007/07/25/rowcount-top.aspx)。

SQL Server 2012 现在为这两种情况生成单独的计划，因此无需将这些添加到`ROWCOUNT 0`计划的版本中。

如果 2012 年的计划中仍会出现一个排序，如果`SELECT`有一个明确`TOP`定义（除了`TOP 100 PERCENT`），但这仍然不能保证行的实际插入顺序，那么在`TOP N`建立之后计划可能会有另一个排序以使行进入集群以索引顺序为例。

对于您问题中的示例，我只需调整调用代码以指定`ORDER BY name`它是否需要。

关于您[在 SQL Server 中](http://blogs.msdn.com/b/sqltips/archive/2005/07/20/441053.aspx)`sort_id`的订购保证中的想法，可以保证在插入表时，这些表的分配顺序将按照，因此您也可以这样做`IDENTITY``ORDER BY`

```
DECLARE @Customer TABLE (
  Sort_Id     INT IDENTITY PRIMARY KEY,
  Customer_ID INT,
  Name        INT,
  Expired     BIT )

INSERT INTO @Customer
SELECT Customer_ID,
       Name,
       CASE
         WHEN Expiry_Date < Getdate() THEN 1
         WHEN Expired = 1 THEN 1
         ELSE 0
       END
FROM   Customer
ORDER  BY Name 
```

但是您仍然需要`sort_id`在您的选择查询中进行排序，因为没有它就无法保证排序（也许这种`sort_id`方法在用于排序的原始列没有被复制到表变量中的情况下可能很有用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T08:29:18.363

将名为 rowno 的列添加到 @Customer 表

```
INSERT INTO @Customer

SELECT ROW_NUMBER()over(order by Name)rowno,Customer_ID, Name,
        CASE 
            WHEN Expiry_Date < GETDATE() then 1 
            WHEN Expired = 1 then 1 
            ELSE 0
            END
from Customer 
```

# sql-server - 如何对行进行分组并将它们移动到同一张表中的新列中？

> ID：11222044
> 
> 赞同：0
> 
> 时间：2012-06-27T08:18:11.063
> 
> 标签：sql-server

我想对行进行分组并将它们移动到同一张表中的新列中。这是我的例证： ![表格插图](../Images/df3b3a96c72be5b3629b448d06799aa2.png)

这是我到目前为止所做的查询：

```
SELECT 
    month([date]) as bulan, 
    [type] as tipe,
    SUM([net qty]) total_karton, 
    CAST(SUM([cm1 (rp)]) as decimal) as total_uang
FROM 
    tbl_weeklyflash_ID
WHERE
    DATEDIFF(month,[date],CURRENT_TIMESTAMP) between 0 and 2
GROUP BY 
    month([date]),
    [type]
ORDER BY 
    month([date]), [type] 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:57:59.157

你想要一个- 在[http://www.mssqltips.com/sqlservertip/1019/crosstab-queries-using-pivot-in-sql-server-2005/](http://www.mssqltips.com/sqlservertip/1019/crosstab-queries-using-pivot-in-sql-server-2005/)`PIVOT`上有一个很好的例子

# javascript - 当光标在div的边缘时如何滚动？

> ID：11222047
> 
> 赞同：1
> 
> 时间：2012-06-27T08:18:23.137
> 
> 标签：javascript, jquery, html, css

我有一个 div(menubar) 有很多链接，这些链接不在视图中。当光标位于菜单 div 的边缘时，我必须使 div 向右或向左滚动，以便将这些菜单项带入视图。 ![在此处输入图像描述](../Images/284626c80c84203b691dde19d093a4c3.png)

我是 Jquery 的初学者，因此非常感谢任何帮助。

[标记在 Jsfiddle](http://jsfiddle.net/ftaran/y9a64/10/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:34:45.917

**短的：**

即用型解决方案：

*   [滚动轮播](http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/)
*   [Jmycarousel](http://www.khazar.com/academics/portal/canada/2011spring/mart369/javascript/jmycarousel.htm)（[演示](http://www.enova-tech.net/lab/jMyCarousel/)）
*   [平滑的 div 滚动](http://www.smoothdivscroll.com/#quickdemo)

**您可以阅读相关问题的完整**答案：

*   [jQuery插件在鼠标悬停时不断水平滚动](https://stackoverflow.com/questions/4400053/jquery-plugin-to-continually-horizontally-scroll-on-mouseover)
*   [寻找 jQuery 插件（或代码）以在鼠标悬停上自动滚动 Carousel 项目](https://stackoverflow.com/questions/464187/looking-for-jquery-plugin-or-code-to-automatically-scroll-carousel-items-on-mo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:31:57.603

看看这个例子，在这个例子中你可以看到当鼠标在 div 的右边缘时它们是如何滚动 div 的。你可以做同样的事情。

[如何在鼠标移动到边距时自动滚动 div？](http://jqfaq.com/how-to-auto-scroll-a-div-on-mouse-move-over-the-margins/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-27T08:30:29.157

这里回答

```
<div onmouseover="this.className='addscrool'"    onmouseout="this.className='removescrool';" style="width:100px;height:100px;border:1px  solid Blue">
 </div>
 <style>
.addscrool
{
overflow-y: scroll;
}   .removescrool
{
overflow-y:hidden ;
 } 
```

# c++ - 如何检测是否在 Windows Metro 应用程序进程中运行？

> ID：11222051
> 
> 赞同：4
> 
> 时间：2012-06-27T08:18:28.457
> 
> 标签：c++, windows-8, microsoft-metro

我正在开发一个库，我希望能够检测它是否在 Metro 风格应用程序中运行，以选择性地禁用/启用某些功能。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:23:58.707

您可以使用该[`IMetroMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404160%28v=vs.85%29.aspx)界面检查您的库是否已加载到 Metro 风格的应用程序中。调用该[`GetMonitorMode()`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404165%28v=vs.85%29.aspx)方法，如果`pMode`保持不变，`MMM_METRO`那么您将确定您在 Metro 应用程序中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:21:47.743

这是一个简单的测试：

```
if (WinJS) {
    // WinJS exists in global if in WinRT app
} 
```

# iphone - sectionName TableView - 我做错了什么？

> ID：11222060
> 
> 赞同：1
> 
> 时间：2012-06-27T08:19:43.900
> 
> 标签：iphone, xcode, uitableview, ios5, grouped-table

我在更改 TableView 上的颜色和字体时遇到了一些麻烦，我已将其分成 4 个部分，并带有名称等，我似乎无法让它工作我不确定我做错了什么？

```
- (NSString *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section     {

NSString *sectionName = nil;

switch(section)
{
    case 0:
        sectionName = [NSString stringWithString:@"Date"];
        break;
    case 1:
        sectionName = [NSString stringWithString:@"Gig"];
        break;
    case 2:
        sectionName = [NSString stringWithString:@"City"];
        break;
    case 3:
        sectionName = [NSString stringWithString:@"Country"];
        break;
}

UILabel *sectionHeader = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)]   autorelease];
sectionHeader.backgroundColor = [UIColor clearColor];
sectionHeader.font = [UIFont boldSystemFontOfSize:18];
sectionHeader.textColor = [UIColor whiteColor];
sectionHeader.text = sectionName;

return sectionName;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:23:20.890

您应该返回视图而不是字符串...

这就是你要返回的

```
return sectionName; 
```

这就是你应该返回的..

```
return sectionHeader; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:23:42.027

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

是在 UITableView 的标题中呈现视图的正确方法。在这里你可以返回你的 UILabel 对象。

您试图返回一个 NSString 对象而不是 UILabel。方法的返回类型也是错误的。它应该是 UIView 类型。

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:22:41.310

```
-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section{

NSString *sectionName = nil;
switch(section)
{
    case 0:
    sectionName = [NSString stringWithString:@"Date"];
    break;
case 1:
    sectionName = [NSString stringWithString:@"Gig"];
    break;
case 2:
    sectionName = [NSString stringWithString:@"City"];
    break;
case 3:
    sectionName = [NSString stringWithString:@"Country"];
    break;
}

UILabel *sectionHeader = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)]   autorelease];
sectionHeader.backgroundColor = [UIColor clearColor];
sectionHeader.font = [UIFont boldSystemFontOfSize:18];
sectionHeader.textColor = [UIColor whiteColor];
sectionHeader.text = sectionName;
return sectionHeader; 
```

}

该代码向您展示了如何实现 TableViewCOntroller 的 viewForHeaderInSection 委托方法，您需要实现该方法来完成您需要的工作。您的代码返回 NSString，它应该返回 UIView。

# eclipse - Eclipse 上安装的软件/插件已停止工作

> ID：11222064
> 
> 赞同：0
> 
> 时间：2012-06-27T08:19:56.723
> 
> 标签：eclipse, eclipse-plugin

我有 Java Developers (Indigo) 的 Eclipse IDE，并且已经使用了几个月。我安装了很多插件，包括一个 SVN 和 e-git。

然后有一天，他们都停止了工作。例如，我曾经能够从资源管理器提交（使用 SVN 插件），但该选项已经消失，好像它没有安装一样。

我检查了已安装的软件列表，它们都存在。

有没有我可能想念的地方？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:41:07.113

请检查workspace/.metadata/.log 中的错误日志，看看是否有任何警告或错误。

另外，您是否尝试过其他视角，例如插件开发或SVN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:11:17.183

打开 Eclipse 转到窗口 -> 显示视图 -> 其他 -> SVN

选择新工作区并检查您所做的项目

# php - 访问数组中的类实例

> ID：11222069
> 
> 赞同：2
> 
> 时间：2012-06-27T08:20:16.613
> 
> 标签：php, json

我正在做一个项目，我遇到了一个让我难过的问题。下面的代码是一个类文件和一个测试页面，以确保它正常工作。它适用于正在对该站点进行编程的其他人，否则我会以不同的方式对 JSON 输出进行编码。基本上，实现它的人只需从数据库中提取一堆数据（如下所示），然后循环遍历，为每个结果实例化一个类对象，并将每个实例插入一个数组，然后将数组传递给 printJson 函数，它将打印 JSON 字符串。这是我所拥有的：

结果.php

```
 <?php

    class Result
    {
        public $Category = NULL;
        public $Title = NULL;
        public $Price = NULL;

        public function __construct($category, $title, $price)
        {
            $this->Category = $category;
            $this->Title = $title;
            $this->Price = $price;
        }

        public static function printJson($arrayOfResults)
        {
            $output = '{"results": [';

            foreach ($arrayOfResults as $result)
            {
                $output += '{"category": "' . $result->Category . '",';
                $output += '"title": "' . $result->Title . '",';
                $output += '"price": "' . $result->Price . '",';
                $output += '},';
            }

            $output = substr($output, 0, -1);
            $output += ']}';

            return $output;
        }
    }

    ?> 
```

获取结果.php

```
 <?php

    require_once('Result.php');

    $res1 = new Result('food', 'Chicken Fingers', 5.95);
    $res2 = new Result('food', 'Hamburger', 5.95);
    $res3 = new Result('drink', 'Coke', 1);
    $res4 = new Result('drink', 'Coffee', 2);
    $res5 = new Result('food', 'Cheeseburger', 6.95);

    $x = $_GET['x'];

    if ($x == 1)
    {
        $array = array($res1);
        echo Result::printJson($array);
    }
    if ($x == 2)
    {
        $array = array($res1, $res2);
        echo Result::printJson($array);
    }
    if ($x == 3)
    {
        $array = array($res1, $res2, $res3);
        echo Result::printJson($array);
    }
    if ($x == 5)
    {
        $array = array($res1, $res2, $res3, $res4, $res5);
        echo Result::printJson($array);
    }

    ?> 
```

最终结果是，如果我访问 getResults.php?x=5，它将返回 $res1 到 $res5（同样，这只是为了测试，我永远不会在生产中做这样的事情）格式为 JSON。现在，我得到了“0”的输出，我一辈子都无法弄清楚为什么。难道我的 foreach 循环写得不正确吗？拜托，你能提供的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:29:05.537

这是因为您使用`+`的是连接而不是`.`：

```
$output .= '{"category": "' . $result->Category . '",';
$output .= '"title": "' . $result->Title . '",';
$output .= '"price": "' . $result->Price . '",';
$output .= '},'; 
```

但是你真的不应该自己构建 JSON，因为它会导致一些错误导致无效的 JSON（尾随逗号等）。改用这样的东西：

```
public static function printJson(array $arrayOfResults)
{
    $results['results'] = array_map('get_object_vars', $arrayOfResults);

    return json_encode($results);
} 
```

# iphone - NSMutableArray 中的 NSUserDefaults

> ID：11222073
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:20:39.253
> 
> 标签：iphone, ios, xcode

如何将其设置/制作成 NSMutableArray？

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger:1 forKey:@"KeyI1"];
[prefs setInteger:1 forKey:@"KeyJ1"];
[prefs setInteger:1 forKey:@"KeyI2"];
[prefs setInteger:1 forKey:@"KeyJ2"]; 
```

我可以将其用于这样的 if 语句：

```
NSInteger I1=[prefs integerForKey:@"KeyI1"];
NSInteger I2=[prefs integerForKey:@"KeyI2"]
NSInteger J1=[prefs integerForKey:@"KeyJ1"]
NSInteger J2=[prefs integerForKey:@"KeyJ2"]

if ( I1 == index1 && K1 == index2){

}
if ( I2 == index1 && K2 == index2){

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:32:28.247

您不能直接使用`setInteger:`for `NSUserDefaults`（使用`NSMutableDictionary`结构）。您应该在对象中使用`setObject:forKey:`和`objectForKey:`添加整数，`NSNumber`或者编写一个可以处理和的`NSMutableDictionary` [类别](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)。`setInteger:forKey:``integerForKey:`

# iphone - 如何为 2 nstimer 使用循环？

> ID：11222075
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:20:42.107
> 
> 标签：iphone, ios5, xcode4.3

有人想教我如何使用循环过程`NSTimer`吗？我有 2 个进程计时器要做，timer1 和 timer2 重复到由按钮触发的 n 循环（timer1 -> timer2 -> timer1 -> timer2 等等，直到 n 循环）。我是 xcode 的新手。请教我。两个计时器都有用户输入。如果可能的话，请给我一个例子。

我的代码应该是这样的。如果我错了，请纠正我

```
- (void) timer2Elapsed:(NSTimer *) timer;
{
    ...

    displayCountDown.text = [NSString stringWithFormat:@"%d : %d : %d", hour , minute, second];
}

- (void)timer1Elapsed: (NSTimer *) timer;
{
    ...

    displayCountDown.text = [NSString stringWithFormat:@"%d : %d : %d", hour , minute, second];
} 
```

我触发倒计时的按钮：

```
- (IBAction)startBtn:(id)sender {
        endSetTime = [NSDate timeIntervalSinceReferenceDate] + totalSecondTime;
        endSetRest = [NSDate timeIntervalSinceReferenceDate] + totalSecondRest;
        countdownTimer = [NSTimer scheduledTimerWithTimeInterval: 0.99 target: self selector: @selector(timer1Elapsed:) userInfo: nil repeats: YES];

} 
```

这里有人告诉我使用这段代码，但我不知道我应该在里面写什么以及放在哪里？他说循环？我不知道？以及如何在我的按钮内连接该代码？

```
+ (void) startTimer:(id)timer
{
    static int numberOfTimes = 0;
    if(numberOfTimes >= 5)
    {
        numberOfTimes = 0;
        return;
    }
    numberOfTimes ++;

    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(timer1Elapsed:) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:36:10.500

忘记计时器。使用 performSelector:withObject:afterDelay: 选择器。

```
@interface CECountdown : NSObject {
    NSDate *_startDate;
    NSTimeInterval _countdownInterval;
}

@end

@implementation CECountdown

- (id)initWithCountdownInterval:(NSTimeInterval)interval {
    self = [super init];

    if(self) {
        _countdownInterval = interval;
        _startDate = [[NSDate date] retain];
    }

    return self;
}

- (void)dealloc {
    [_startDate release];

    [super dealloc];
}

- (void)method0 {
    // Do something
    [self performSelector:@selector(method1) withObject:nil afterDelay:0.3];
    [self checkTimeout];
}

- (void)method1 {
    // Do something
    [self performSelector:@selector(method0) withObject:nil afterDelay:0.3];    
    [self checkTimeout];
}

- (void)invalidate {
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(method1) object:nil];
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(method2) object:nil];
}

- (void)checkTimeout {
    if([NSDate timeIntervalSinceReferenceDate] - [_startDate timeIntervalSinceReferenceDate] > _countdownInterval) {
        [self invalidate];
    }
}

- (void)didTapStartButton:(id)sender {
    [self performSelector:@selector(method1) withObject:nil afterDelay:0.3];
}

@end 
```

# c++ - 为什么调用复制构造函数而不是转换构造函数？

> ID：11222076
> 
> 赞同：22
> 
> 时间：2012-06-27T08:20:45.370
> 
> 标签：c++, copy-constructor

所以基本上这段代码：

```
class A {
};
class B { 
   B (const B& b) {}
public: 
   B (){}
   B (const A& a) {} 
};

int main()
{
   A a;
   B b1(a);  //OK
   B b2 = a; //Error
} 
```

只会产生错误`B b2 = a`。这个错误是

> 错误：'B::B(const B&)' 是私有的

为什么除了直接转换构造函数之外还尝试调用复制构造函数？

从错误消息中可以清楚地看出，创建了一个临时`B`文件，然后将其用于复制构造，但为什么呢？这在标准中的什么地方？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T08:22:58.953

```
B b2 = a; 
```

这称为**[复制初始化](http://www.gotw.ca/gotw/036.htm)**。

它执行以下操作：

1.  通过使用创建一个类型的`B`对象。`a``B (const A& a)`
2.  `b2`使用将创建的临时对象复制到`B (const B& b)`。
3.  使用 销毁临时对象`~B()`。

您得到的错误不在第 1 步，而是在第 2 步。

> **这在标准中的什么地方？**

**C++03 8.5 初始化器**
**第 14 段：**

> ....
> — 如果目标类型是（可能是 cv 限定的）类类型：
> ...
> ...
> — 否则（即，对于剩余的复制初始化情况），可以从源类型转换到目标类型或（当使用转换函数时）到其派生类的用户定义转换序列被枚举，如 13.3 中所述.1.4，并且通过重载决议（13.3）选择最好的一个。如果转换无法完成或不明确，则初始化格式错误。以初始化表达式作为参数调用所选函数；如果函数是构造函数，则调用初始化目标类型的临时值。然后根据上述规则，调用的结果（对于构造函数的情况是临时的）用于直接初始化作为复制初始化目标的对象。在某些情况下，允许实现通过将中间结果直接构造到正在初始化的对象中来消除这种直接初始化中固有的复制；见 12.2、12.8。

# php - 百万Listing映射，100gb数据流畅展示，忠告

> ID：11222077
> 
> 赞同：2
> 
> 时间：2012-06-27T08:20:45.633
> 
> 标签：php, javascript, database, google-maps

一个大客户给了我一个大项目，我已经做了两个月了。我越来越接近解决方案，但它非常复杂，以至于我无法做到，所以我需要想法。

该项目非常简单：有一个 100 万以上的 lat/lng 坐标数据库，每条记录都有大量附加数据。用户将访问一个页面并输入一些搜索词，这将过滤掉相当多的记录。与过滤器匹配的所有记录都显示在 Google 地图上（通常是聚集的）。

这样做的问题是客户要求它快速、精简和低带宽。因此，我被困住了。我目前正在做的是：呈现第一个集群，当它们悬停在集群上时，开始加载该集群子级的数据。

但是，我已经将它提高到数百万列表中的 30,000 并且它开始有点拖累。我做了尽可能多的优化。当过滤器更改时，我向数据库 AJAX 查询并返回匹配项的所有 ID，然后更新地图以反映这一点。

因此，优化不是一种选择。为此，我需要一个全新的概念模型。任何意见都将受到高度赞赏，因为这是一个非常复杂的项目，我在历史上找不到任何与之相近的东西——我什至看过有很多类似问题的 MMORPG，我做了一个很少，但在一个房间里拥有一百万玩家的概念仍然是 MMORPG 制造商所畏惧的。人们认为可能存在瓶颈越来越普遍，但让我说，这不是以这种方式优化的情况。我需要一个新模型，其中一个巨大的数据库保留在服务器上，但可以流畅地显示给用户。

一旦它可用于解决此问题的任何东西，我将立即奖励 500 个代表。

谢谢-丹尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:36:33.807

我认为你的问题有很多可能的答案，具体取决于它在哪里减速，所以这里有一些想法。

更宽的表会影响返回查询的速度。更长的记录意味着要访问更多磁盘以获取正确的数据，因此您可能需要考虑限制初始表以仅保存可以过滤掉的信息。话虽如此，它还取决于您使用的数据库引擎，有些人比其他人更受苦。

确保您的表被正确索引会对性能产生巨大影响。您需要确保查询正在使用索引来快速获取所需的记录。

一位朋友正在使用 Google 地图，他说如果地图上显示太多，API 真的会受到影响。这可能完全超出您的控制。

过去曾为 Epic Games 工作过，“一个房间里有数百万玩家”令人畏惧的原因通常是硬件驱动的。在游戏中，拥有这么多玩家会使显卡在尝试渲染模型的所有多边形时停止运行。其次（可能更重要的是）问题是您必须向每个客户发送有关每个项目/玩家正在做什么的信息。这意味着您的带宽使用将大幅飙升。您的服务器可能会处理负载，但玩家的互联网连接可能不会。

我确实认为你需要编辑你的问题，尽管有一些关于什么正在放缓的额外信息。你的数据库？您的查询？谷歌API？服务器和客户端机器之间的数据传输？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:37:49.840

让我们在这里说实话；一个有 100 万条记录的数据库可能被大量用户访问，除非你在它后面放置一些非常强大的硬件，否则它不会运行得很好。

在这种情况下，我建议使用几个不同的数据库服务器，并设置一些合适的负载平衡机制，以使它们尽可能平稳地运行。首先，您需要在数据库服务器开始滞后之前找出可以放置在数据库服务器上的“平均”负载；例如，这是 50,000 条记录。为每台服务器设置较低的 MaxClients 可以帮助您提高服务器性能并防止崩溃，但是当您的用户由于高负载而无法执行任何查询时，这可能会加重您的用户的负担。但如果您的预算没有，请记住这一点在硬件方面留有很大的回旋余地。

然而，关于硬件的话题，这是你真正需要看看的东西。数据库通常不会使用大量的 CPU/RAM，但它们会对您的 HDD 造成相当大的负担。我建议在查看设置中的其他组件之前先选择 SAS 或 SSD；这些将使您的世界变得不同。

就负载平衡而言，大多数内容提供商使用的一种非常常用的技术是，当一个查询/特定内容项（例如 youtube 上的热门视频等）吸引了高于平均水平的流量时，您可以缓存其结果. 一种快速而肮脏的方法是在搜索栏中使用 if 语句，然后它将获取静态 html 页面而不是实际运行查询。

另一种方法是在独立上拥有一个单独的数据库服务器，仅用于运行占用过多流量的查询。

有了这个，永远不要低估你的代码优化。虽然这些差异对您来说似乎很微妙，但当成千上万的用户在数百万个查询中运行时，这些微小的差异确实会加起来。

祝你好运 - 如果您需要任何进一步的帮助，请告诉我。

*   伊根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:37:57.683

Google 有一项名为“Big Query”的服务。它是云中的 sql Server。它使用它的快速服务器来处理 sql，它可以快速搜索数百万行数据。不幸的是它不是免费的..但也许它会帮助你：

[https://developers.google.com/bigquery/](https://developers.google.com/bigquery/)

# c++ - 什么 vb6 类型与 std::vector ABI 兼容？

> ID：11222087
> 
> 赞同：2
> 
> 时间：2012-06-27T08:21:33.013
> 
> 标签：c++, dll, vb6, stdvector

我一直在用 C++ 编写一个 DLL，现在我必须从 VB6 应用程序中调用这个 DLL。

这是来自此 DLL 的代码示例：

```
#include <vector>
#include <string>

using namespace std;    

void __stdcall DLLFunction (vector<Object>*)
{
 // performs a few operations on the Objects contained in the vector.
}

struct Object
{
    long CoordX;
    long CoordY;
    long Width;
    long Height;
    LPSTR Id;
}; 
```

我还在 VB6 中定义了“对象结构”

```
Private Type Object
    CoordX As Integer 
    CoordY As Integer 
    Width As Integer
    Height As Integer
    Id As String 
End Type 
```

问题是我不知道什么 vb6 类型可以代表 std::vector 以调用 DLL 的函数。

注意：
- 我使用 DLL 的向量来添加对象。
- 我使用指针以尽可能少地使用内存。
- 对不起我的英语，它根本不是我的母语。
- 感谢您阅读并尝试帮助我。

**编辑：**
- 我修复了打字问题（ID 肯定由 NullChar 结束，所以 LPSTR 应该可以解决问题）。- 我读了你们的答案，我要感谢你们两个，你们的答案很接近，还有一个主要问题。我的 DLL 肯定需要向容器中添加元素。因此，我想知道我怎么能做到这一点。也许我可以向我的函数添加一个返回类型，然后使该函数能够返回它创建的项目（而不是将其直接放入容器中），以便 vb6 应用程序获取这些项目并能够处理它们，但是我不知道该怎么做

**编辑之二：**

**@Rook：**我觉得我可以通过使用新结构来实现这一点。
结构 ObjectArrayPointer
{
对象* 指针；
size_t 计数器；
}

然后以这种方式调用我的函数：

```
void __stdcall DLLFunction (ObjectArrayPointer*); 
```

然后我就可以为我的 VB6 应用程序添加对象并编辑大小参数以找到这些新对象。那是你的意思吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:52:37.880

无论如何，您都不应该尝试从 DLL 导出模板容器。当面对更新的编译器和库时，它们可能会崩溃（例如，在 C++03 下构建的库无法与使用 C++11 构建的代码很好地配合）。

最不痛苦的事情是接受一个指向缓冲区的指针和一个长度参数，

```
void __stdcall DLLFunction (Object* buffer, size_t nObjects); 
```

如果容器的大小在执行期间不会改变。这个接口非常简单，任何理解 C 调用约定的语言都可以轻松访问（例如，几乎每一个。）

您已经放弃了 a 的大部分使用，`std::vector`因为您已经将它专门用于`Object`; 您可以考虑一路创建自己的`ObjectCollection`类，该类在`std::vector`内部使用但呈现非模板化接口。这是一个简单的例子：

```
// In your public API header file:
typedef struct object_collection_t *object_collection;

object_collection CreateObjectCollection();
void DestroyObjectCollect(object_collection collection);
void AddObjectToCollection(object_collection collection, Object* object);
// etc 
```

标头中不以任何形式公开模板类型。这很好。

```
// And the corresponding code file:

struct object_collection_t
{
    std::vector<Object*> objects;
};

object_collection CreateObjectCollection() { return new object_collection_t; }
void DestroyObjectCollect(object_collection collection) { delete collection; }
void AddObjectToCollection(object_collection collection, Object* object)
{
    collection->objects.push_back(object);
}
// etc 
```

所有的模板代码都被隐藏起来，给你留下了一个相当干净和简单的界面，它提供了一个不透明的指针类型，可以由外部代码传递，但只能由你自己的查询和修改等。

编辑：顺便说一句，我在`Object*`整个上述代码中都使用过。`Object`只使用普通的旧代码并避免所有与内存管理和客户端代码操作指针相关的问题可能会更安全、更简单。如果`Object`足够小且简单，则按值传递可能是更好的方法。

（注意：未检查可编译性或功能。E&OE。警告实施者！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:39:51.663

你不能这样做，因为它是一个 C++ 类/模板。在内部，它是一个数组，但不是可以从 VB6 创建的。

最好的办法是更改函数以接受指向带有计数参数的数组的指针。

您还需要非常小心类型的结构。

1.  C++ s在 VB6`int`中是s。`Long`
2.  此外，`Id`字符串将不兼容。VB6 将有一个指向 unicode BString 的指针（除非您将其设为固定长度），其中 C++ 将具有 std::string ，它是一个 ANSI 字符数组。如果传递对象数组（而不是指针），VB6 可能会编组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:40:43.937

VB6 ABI 是 COM 自动化 ABI。

因此，如果您需要一个兼容 VB6 ABI 的阵列，您可能应该使用 SAFEARRAY。我建议您还应该使用 Compiler COM Support 类：

[http://msdn.microsoft.com/en-US/library/5yb2sfxk(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/5yb2sfxk(v=vs.80).aspx)

这个问题似乎完全符合您的要求，使用 ATL 的 CComSafeArray 类：

*   [std::vector 和 _variant_t 之间的转换](https://stackoverflow.com/questions/7261258/conversion-between-stdvector-and-variant-t)

您可能还想看看这些：

*   [https://stackoverflow.com/search?q=safearray+_variant_t](https://stackoverflow.com/search?q=safearray+_variant_t)

**SAFEARRAY 的替代品**

SAFEARRAY 的替代方法是提供一个 COM 集合对象。这只是一个带有 Dispinterface 或 Dual 接口的 COM 对象，带有方法`Count`和`Item`. 项目应该有 dispid=0 作为默认方法。您可能还希望提供`_NewEnum`with`DISPID_NEWENUM`以支持 For Each 语法。

# php - 在数字前面显示 0

> ID：11222091
> 
> 赞同：0
> 
> 时间：2012-06-27T08:21:43.960
> 
> 标签：php, mysql, number-formatting

我正在通过 PHP 脚本生成自动增量代码。顺序是这样的，**L001**，**L002** .... **L039**，**L040**。下面是我编写的 PHP 代码。注释显示每个语句的输出。

```
<?php

require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

$query = "SELECT LID FROM locations ORDER BY LID DESC LIMIT 1";
$result = mysql_query($query, $conn);
$row = mysql_fetch_array($result);
$last_id = $row['LID'];   //L040

$id_letter = substr($last_id, 0, 1);  //L
$id_num = substr($last_id, 1) + 1;   //040 + 1
$new_id = $id_letter . $id_num;

mysql_close($conn);

?> 
```

我`$new_id`在 HTML 文本框中显示。尽管到目前为止一切正常，但新生成的代码显示为**L41**，切断了前导零。

我怎样才能阻止这种情况发生？我需要在前面放那个零。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:27:27.970

使用其中一个`str_pad`或`sprintf`函数：

```
$id_num = str_pad($id_num, 3, "0", STR_PAD_LEFT); 
```

或者

```
$id_num = sprintf("%03d", $id_num); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:25:39.190

```
$id_num = substr($last_id, 1) + 1;   //40 + 1

$id_num = str_pad($id_num, 3, "0", STR_PAD_LEFT); //return 041

$new_id = $id_letter . $id_num; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:26:21.913

看看 sprintf[1]。提示：%03d

[1] [http://br2.php.net/sprintf](http://br2.php.net/sprintf)

# ios - UIScrollViewDelegate 不触发方法

> ID：11222093
> 
> 赞同：1
> 
> 时间：2012-06-27T08:21:45.307
> 
> 标签：ios, uiscrollviewdelegate

我有一个带有 UIScrollView 的视图，带有一些文本（通过 JSON 加载）。我需要检测用户何时到达滚动的末尾（我在这里看到了其他有关它的问题）但问题是，我已经完成了 .h 实现 UIScrollViewDelegate，我有

```
@property (retain, nonatomic) IBOutlet UIScrollView *scroll; 
```

在我的 .h 文件中，并在 .m 文件中合成它。我的 viewDidLoad 中有这个：

```
self.scroll=[[UIScrollView alloc]init];
self.scroll.delegate=self; 
```

在 Interface Builder 中进行连接（IBOutlet“滚动”与 UIScrollView 等）。

之后，我通过调用 JSON 来完成 UITextView，并执行与 scrollView 无关的其他事情。然后，我实现了方法 scrollViewDidScroll。但是，它永远不会被调用。滚动效果很好，让我上下查看整个文本。但是，知道为什么不调用协议的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:26:51.030

您不需要分配和初始化新`UIScrollView`实例。当您从 IB 链接它时，它已经完成。这样你就打破了链接。

顺便说一句，您的`scroll`财产被定义为`retain`，所以

`self.scroll = [[UIScrollView alloc]init];`

是内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:26:30.297

你的`UIViewController`符合`UISrollViewDelegate`吗？[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)的协议。

请记住以下几点：

> UIScrollViewDelegate 协议声明的方法允许采用委托响应来自 UIScrollView 类的消息，从而响应并在一定程度上影响滚动、缩放、滚动内容减速和滚动动画等操作。

没有强制方法，但您需要采用协议才能使用这些方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:04:51.220

那就是...如果您希望调用方法 scrollViewDidScroll ，我必须以编程方式设置 contentSize （尽管滚动做得很好）。

太棒了... x(

# wpf - mvvm 导航树视图

> ID：11222099
> 
> 赞同：0
> 
> 时间：2012-06-27T08:22:26.553
> 
> 标签：wpf, mvvm, treeview

我正在尝试使用树视图实现导航菜单。在左侧面板上有一个树视图，在右侧面板上有匹配的视图。因为它是 MVVM，所以我很难在正确的视图之间切换。

![在此处输入图像描述](../Images/0e29eb783e05879fa7835515ab574f2a.png)

单击 Menu1 - 应显示 View1.xaml 视图 单击 Menu2 - 应显示 View2.xaml 视图

我的代码如下所示：MainView.xaml

```
<Window x:Class="Menu.View.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Views="clr-namespace:Menu.View"
        Title="MainView" Height="300" Width="300">
    <Window.Resources>
        <DataTemplate DataType="{x:Type Views:Page1}">
            <Views:Page1 />
        </DataTemplate>
        <DataTemplate DataType="{x:Type Views:Page2}">
            <Views:Page2 />
        </DataTemplate>
    </Window.Resources>
    <DockPanel>
        <Grid DockPanel.Dock="Left">
            <TreeView>
                <TreeViewItem Header="Menu 1" />
                <TreeViewItem Header="Menu 2" />
                <TreeViewItem Header="Menu 3" />
            </TreeView>
        </Grid>

        <Grid DockPanel.Dock="Right">
                <Views:Page1 />
                <Views:Page2 />
        </Grid>
    </DockPanel>
</Window> 
```

Page1.xaml（单击“菜单 1”时应该可见的视图）

```
<Grid>
    <Label FontSize="24" FontWeight="Bold">1</Label>
</Grid> 
```

Page2.xaml（单击“菜单 2”时应该可见的视图）

```
<Grid>
    <Label FontSize="24" FontWeight="Bold">2</Label>
</Grid> 
```

对于每个页面，我都有自己的 ViewModel，并且我有一个名为 MainViewModel 的主要页面。我应该如何在 MVVM 模式下实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:55:25.410

我认为这是错误的。您应该将 ViewModel 放入 DataType 中。因此，当您填充 DataContext 时，DataTemplate 会完成他的工作。就像是 ：

```
 <DataTemplate DataType="{x:Type ViewModels:Page1ViewModel}">
                <Views:Page1 />
            </DataTemplate>
            <DataTemplate DataType="{x:Type ViewModels:Page2ViewModel}">
                <Views:Page2 />
            </DataTemplate> 
```

代替 ：

```
<Views:Page1 />
<Views:Page2 /> 
```

添加一个 ContentControl 并对其内容进行绑定，如下所示：

```
<ContentControl Content="{Binding MyViewModel}"></ContentControl> 
```

myView 是 MainViewViewModel 中的属性（[必须实现 INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms743695.aspx)）可以是这样的：

```
 object _MyView;
        public object MyViewModel
        {
            get
            {
                return _MyView;
            }
            set
            {
                _MyView = value;
                OnPropertyChanged("MyViewModel");
            }
        } 
```

现在，在每个 TreeViewItem 添加一个[命令](https://stackoverflow.com/questions/2266890/wpf-treeviewitem-bound-to-an-icommand)来更新它的内容为 ex ：

在您的 MainViewViewModel 添加 CallView1Command 属性并实现它[（查看如何处理命令）](http://www.codeproject.com/Articles/274982/Commands-in-MVVM)

因此在 Command 的执行方法中，您可以根据要显示的 View 更新 MyViewModel。

我建议使用**[Unity](http://unity.codeplex.com/)**来实例化 ViewModel。

不是很好解释，但是，无论如何希望它有所帮助

# wcf - WCF 中的 Https 绑定引发错误

> ID：11222101
> 
> 赞同：0
> 
> 时间：2012-06-27T08:22:44.977
> 
> 标签：wcf, wcf-security

我有一个 WCF 服务，需要使用使用 SSL 的 basicHttpBinding 进行托管。因此，我的团队安装了启用匿名身份验证的 SSL 证书，并在 IIS 中提供了硬编码的用户名和密码。我试着给这个绑定

```
 <binding name="SecurityByTransport">
               <security mode="Transport">
                 <transport clientCredentialType="Windows" />
                </security>
            </binding> 
```

但它仍然不起作用。我收到此错误“找不到与绑定 BasicHttpBinding 的端点的方案 http 匹配的基地址。注册的基地址方案是 [https]。”

服务模型部分：

```
 <system.serviceModel>
<diagnostics>
  <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtTransportLevel="true" />
</diagnostics>
<bindings>
  <customBinding>
    <binding name="netTcp">
      <binaryMessageEncoding>
        <readerQuotas maxArrayLength="2147483647" maxStringContentLength="2147483647" maxDepth="64" />
      </binaryMessageEncoding>
      <security authenticationMode="UserNameOverTransport" />
      <windowsStreamSecurity />
      <tcpTransport portSharingEnabled="true" maxBufferPoolSize="52428800" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
    </binding>
  </customBinding>

  <basicHttpBinding>
    <binding name="Https">
      <security mode="Transport">

      </security>
    </binding>
  </basicHttpBinding>

</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name ="Https">

      <serviceMetadata httpsGetEnabled="true"/>

      <serviceDebug includeExceptionDetailInFaults="false"/>
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="Asi.Soa.ServiceModelEx.NullUserNamePasswordValidator, Asi.Soa.ServiceModelEx" />
        <clientCertificate>
          <authentication certificateValidationMode="None" />
        </clientCertificate>
      </serviceCredentials>
      <serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
          <add policyType="Asi.Soa.ServiceModelEx.ClaimsAuthorizationPolicy, Asi.Soa.ServiceModelEx" />
        </authorizationPolicies>
      </serviceAuthorization>
      <exceptionShielding/>
    </behavior>

  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="SoapBehavior">

    </behavior>
    <behavior name="RestBehavior">

    </behavior>
    <behavior name="AjaxBehavior">
      <enableWebScript />
    </behavior>
  </endpointBehaviors>
</behaviors>
<services>

  <service name="Asi.Soa.Core.Services.EntityService" >
    <endpoint address="https://10.42.150.122/imis15/EntityService.svc" binding="basicHttpBinding" contract="Asi.Soa.Core.ServiceContracts.IEntityService"
       bindingConfiguration="Https" />
  </service>

</services> 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:00:01.167

尝试添加到服务行为设置

```
 <serviceMetadata httpsGetEnabled="true"/> 
```

您还应该检查端点是否有设置

```
 bindingConfiguration="SecurityByTransport" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:36:27.007

如果您在 IIS 中托管您的服务，请尝试从站点绑定中删除 http 绑定。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:52:03.357

由于您在 IIS 上使用 Web 服务，因此考虑到您使用的是 SSL 证书，请使用 HTTPS 绑定。

# spring - Spring 中的声明式或程序化事务

> ID：11222103
> 
> 赞同：13
> 
> 时间：2012-06-27T08:22:50.893
> 
> 标签：spring

我们应该在 Spring 中使用哪种类型的事务管理策略？声明式还是程序式？哪个更好，在什么情况下应该使用它？你能给出任何适当的例子或教程吗？

还想知道春季写数据库代码时我们应该使用的最新的东西是什么？HibernateTemplate 的替代方案是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-03-24T04:54:52.843

**程序化事务管理**

1.  允许我们通过在源代码中编程来管理事务。
2.  这意味着在我们的业务逻辑之间*硬编码事务逻辑。*
3.  我们使用编程来管理交易
4.  灵活，但难以维护，业务逻辑量大。在业务逻辑之间引入样板。
5.  当要引入相对较少的事务逻辑时首选。

**声明式事务管理**

1.  允许我们通过配置管理事务。
2.  这意味着*将*事务逻辑与业务逻辑分开。
3.  我们使用注释（或 XML 文件）来管理事务。
4.  易于维护。样板文件远离业务逻辑。
5.  处理大量事务逻辑时首选。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T09:16:00.203

它们不是相互排斥的。

`@Transactional`在大多数情况下，您可以使用声明式[事务](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#tx-decl-explained)管理`TransactionTemplate`（方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-15T14:27:54.923

Spring 提供程序化和声明式事务。

程序化意味着您拥有围绕业务代码的事务管理代码。这提供了极大的灵活性，但很难维护，而且是样板文件。

声明式意味着您将事务管理与业务代码分开。您可以使用注释或基于 XML 的配置。

```
programmatic management is more flexible during development time but less flexible during application life
declarative management is less flexible during development time but more flexible during application life 
```

[http://docs.spring.io/spring/docs/3.0.x/reference/transaction.html](http://docs.spring.io/spring/docs/3.0.x/reference/transaction.html)

声明式事务管理允许从 Java 代码中消除对事务框架的任何依赖。提供事务支持的四个参与者是事务管理器、代理工厂、事务拦截器和一组事务属性。

建议使用声明式事务管理，HibernateTemplate 的替代方案 NamedJDBCTemplate 或 simpleJDBCTemplate

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T08:31:11.573

> [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#tx-decl-vs-prog](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#tx-decl-vs-prog)

和

> [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

一般来说。

例子：

> [http://www.springbyexample.org/examples/hibernate-transaction-annotation-config.html](http://www.springbyexample.org/examples/hibernate-transaction-annotation-config.html)

新特性：我建议将 DI 与 SessionFactory 一起使用。还可以看看 3.1 的新特性：Hibernate 4 support。见[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#d0e1385](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#d0e1385)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-10T06:52:24.303

**仅当您有少量事务操作时，**程序化事务管理通常是一个好主意。例如，如果您的 Web 应用程序只需要某些更新操作的事务，您可能不想使用 Spring 或任何其他技术设置事务代理。在这种情况下，使用 TransactionTemplate 可能是一个好方法。能够显式地设置事务名称也是只能使用编程方法进行事务管理才能完成的事情。

另一方面，如果您的应用程序有大量事务操作，则声明式事务管理通常是值得的。它将事务管理排除在业务逻辑之外，并且不难配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-07T07:33:50.190

Spring 支持两种类型的事务管理：

**1\. 程序化事务管理：**事务是借助编程来管理的，提供了极大的灵活性，但很难维护。

**2\. 声明式事务管理**：事务管理与业务代码分离，仅使用注释或基于 XML 的配置来管理事务。

# jquery - 将参数传递给jQuery移动简单对话框的点击功能

> ID：11222104
> 
> 赞同：0
> 
> 时间：2012-06-27T08:22:56.757
> 
> 标签：jquery, jquery-plugins, jquery-mobile, modal-dialog

我有以下 jquery 代码

```
function deleteAppointment(confirmationNumber)
{
//        alert(confirmationNumber);
     $('#left').simpledialog({
        'mode' : 'bool',
        'prompt' : 'Confirm Delete',
        'useModal': true,
        'buttons' : {
          'OK': {
            click:function () {
//                    alert(confirmationNumber);
                var link;       
                link = ROOT_URL+'Queue/cancelreservation/confirmnumber/'+confirmationNumber;        
                $.ajax({
                    url: link,
                    type: 'GET',
                    async: true,
                    success: function(data){
                        renderAgain();
                        addRightPane();
                        $(APPOINTMENT_LIST_CLASS).animate({
                            scrollTop: 0
                        });

                    },
                    error: function(){
                        /*@TODO : What if the ajax request fails */
                    }
                });
            }

          },
          'Cancel': {
            click: function () {
              $('#dialogoutput').text('Cancel');
            },
            icon: "delete",
            theme: "c"
          }
        }

    });             
} 
```

问题是我传递给删除约会功能的确认号只是第一次传递，下次不会更新。它保存旧确认号的值，所以我发现我必须将确认号传递给 click 函数。任何人都可以帮助我如何做到这一点？或者我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:24:54.483

在 jquerymobile 获得更多经验后，我找到了更优雅和正确的方法来解决这个问题

只需使用简单对话框的属性

```
'cleanOnClose' : true 
```

这将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:45:26.410

想做和你一样的事情，一个可以重新填充一个简单对话框的函数，但问题是 onclick 必须解除绑定并再次绑定，但我不知道怎么做。我只是做了一个解决方法并使用了一个全局变量传递一个参数

这应该可以解决问题...如果有人知道如何重新绑定事件，请告诉我们

```
var selected;

 function deleteAppointment(confirmationNumber)
{
selected = confirmationNumber;
//        alert(confirmationNumber);
     $('#left').simpledialog({
        'mode' : 'bool',
        'prompt' : 'Confirm Delete',
        'useModal': true,
        'buttons' : {
          'OK': {
            click:function () {
//                    alert(selected );
                var link;       
                link = ROOT_URL+'Queue/cancelreservation/confirmnumber/'+selected ;        
                $.ajax({
                    url: link,
                    type: 'GET',
                    async: true,
                    success: function(data){
                        renderAgain();
                        addRightPane();
                        $(APPOINTMENT_LIST_CLASS).animate({
                            scrollTop: 0
                        });

                    },
                    error: function(){
                        /*@TODO : What if the ajax request fails */
                    }
                });
            }

          },
          'Cancel': {
            click: function () {
              $('#dialogoutput').text('Cancel');
            },
            icon: "delete",
            theme: "c"
          }
        }

    });             
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:36:00.533

我相信你的删除按钮是这样的

```
<a class="deleteappoinment" href="javascript:void(0);" id="12">Delete</a> //here 12 is an example of conformation id, change it accordingly

$(document).ready(function(){
    $('.deleteappoinment').click(function(){

            deleteAppointment($(this).attr('id'));

      });
    });

function deleteAppointment(confirmationNumber){
 //code
} 
```

# c# - 以编程方式将子控件添加到 asp.net 复合控件

> ID：11222108
> 
> 赞同：2
> 
> 时间：2012-06-27T08:23:08.317
> 
> 标签：c#, asp.net, webforms, custom-server-controls

没有找到任何直接回答我的问题的东西，所以希望有人能对此有所了解。

我有两个复合控件，我们称它们为 BudgetTable 和 BudgetTableItem，其中 BudgetTable 包含 BudgetTableItem 的列表。

到目前为止，只要我在 HTML 视图中添加新的 RowItems，一切正常 - 当我以编程方式添加一个时，它会出现，但不会在回发中存活。

我只能假设我正在用 ViewState 做一些愚蠢的事情，并且会感谢任何指针！

提前致谢。

的HTML：

```
 <hea:BudgetTable runat="server" ID="btTest" MaximumFundingAvailable="7000" CssClass="bob">
            <Items>
                    <hea:BudgetTableItem runat="server" Description="Test1" />
                    <hea:BudgetTableItem runat="server" Description="Test2" />
                    <hea:BudgetTableItem runat="server" Description="Test3" />
            </Items>        
    </hea:BudgetTable> 
```

后面的代码：

```
 [PersistenceMode(PersistenceMode.InnerProperty)]
[ParseChildren(true)]
public class BudgetTableItem : CompositeControl {

    private TextBox _description = new TextBox();

    private TextBox _cost = new TextBox();

    private CheckBox _heaFunded = new CheckBox();

    /*public delegate void AddRow();
    public delegate void RemoveRow(BudgetTableItem item);

    public event AddRow AddNewRow;
    public event RemoveRow RemoveNewRow;*/

    public string ItemName {
        get {
            var viewstate = ViewState["ItemName"];
            return (viewstate is string) ? (string)viewstate : "default";
        }
        set {
            ViewState["ItemName"] = value;
        }
    }

    public bool ShowRemoveRow {
        get {
            var viewstate = ViewState["ShowRemoveRow"];
            return (viewstate != null && viewstate is bool) ? (bool)viewstate : false;
        }
        set {
            ViewState["ShowRemoveRow"] = value;
        }
    }

    public bool ShowAddRow {
        get {
            var viewstate = ViewState["ShowAddRow"];
            return (viewstate != null && viewstate is bool) ? (bool)viewstate : false;
        }
        set {
            ViewState["ShowAddRow"] = value;
        }
    }

    public string Description {
        get {
            return _description.Text;
        }
        set {
            _description.Text = value;
        }
    }

    public decimal Cost {
        get {
            decimal cost =0;
            decimal.TryParse(_cost.Text, out cost);
            return cost;
        }
        set {
            _cost.Text = value.ToString();
        }
    }

    public bool HeaFunded {
        get {
            return _heaFunded.Checked;
        }
        set {
            _heaFunded.Checked = value;
        }
    }

    protected override void CreateChildControls() {

        Controls.Clear();

        HtmlTableCell tableCell1 = new HtmlTableCell();
        HtmlTableCell tableCell2 = new HtmlTableCell();
        HtmlTableCell tableCell3 = new HtmlTableCell();
        HtmlTableCell tableCell4 = new HtmlTableCell();

        tableCell1.Attributes.Add("class", "col1");
        tableCell2.Attributes.Add("class", "col2");
        tableCell3.Attributes.Add("class", "col3");
        tableCell4.Attributes.Add("class", "col4");

        tableCell1.Controls.Add(_description);
        tableCell2.Controls.Add(_cost);
        tableCell3.Controls.Add(_heaFunded);

        /*if (ShowAddRow || ShowRemoveRow) {

            Button addNewButton = new Button();

            addNewButton.Text = (ShowAddRow) ? "Add Row" : "Remove";

            if (ShowAddRow) {                   
                addNewButton.Click += new EventHandler(addNewButton_Click);
            }

            if (ShowRemoveRow) {
                addNewButton.Click += new EventHandler(removeButton_Click);
            }

            tableCell4.Controls.Add(addNewButton);
        }
        else{*/
            tableCell4.InnerHtml = "&nbsp;";
        //}

        Controls.Add(tableCell1);
        Controls.Add(tableCell2);
        Controls.Add(tableCell3);
        Controls.Add(tableCell4);
    }

    /*void addNewButton_Click(object sender, EventArgs e) {
        if (AddNewRow != null) {
            AddNewRow();
        }
    }*/

    /*void removeButton_Click(object sender, EventArgs e) {
        if (RemoveNewRow != null) {
            RemoveNewRow(this);
        }
    }*/

    protected override void RecreateChildControls() {
        EnsureChildControls();
    }

    public override void RenderBeginTag(HtmlTextWriter writer) {
        writer.Write("<tr>");
    }

    public override void RenderEndTag(HtmlTextWriter writer) {
        writer.Write("</tr>");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:32:26.287

需要`ViewState`并希望接收事件的控件、自定义控件或其他控件应在`Init`.

Http 是无状态的。您的整个页面及其所有控件都会在每次回发时重新创建。您在设计视图中添加的控件将添加到您的 Designer.cs 文件并为您创建。当您自己添加控件时，您必须编写代码以在以后发生的每个 PostBack 上重新创建控件。

您可以使用会话来记住哪些控件是由代码添加的，并在以后的 PostBacks 中添加它们。

# wcf - 找不到与具有绑定 WebHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]

> ID：11222112
> 
> 赞同：0
> 
> 时间：2012-06-27T08:23:32.180
> 
> 标签：wcf

我知道他们中的许多人都遇到了同样的错误。我尝试了这里给出的所有可能的答案，但我仍然收到此错误。

我的 Web.config 服务。

```
 <serviceBehaviors>
        <behavior name="AjaxServiceHttpsBehavior">
          <serviceMetadata httpsGetEnabled ="true"/>
        </behavior>
      </serviceBehaviors>
    <endpointBehaviors>
        <behavior name="AjaxServiceAspNetAjaxBehavior">
        <enableWebScript />
        </behavior>
    </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
      <service name="AjaxService"  behaviorConfiguration="AjaxServiceHttpsBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="https://servername/websitefolder" />
          </baseAddresses>
        </host>
    <endpoint address="" behaviorConfiguration="AjaxServiceAspNetAjaxBehavior"  binding="webHttpBinding" bindingConfiguration="webHttpsBinding" contract="AjaxService" />
        </service>
    </services>
        <bindings>
   <webHttpBinding>
      <binding name="webHttpsBinding">
        <security mode="Transport"></security>
      </binding>
    </webHttpBinding>
   <basicHttpBinding> 
```

该服务位于“https://servername/websitefolder/AjaxService.svc”，并且 ssl 配置正确。

我的基本地址是错误的吗？我只有这个服务的一个端点。我尝试了所有可能的组合，但仍然收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:27:46.273

I ran into the same issue with wsHttpBinding, and found it wasn't a problem with my base address at all but what I had defined in my element

```
 <wsHttpBinding><binding name="wsHttpBinding_Administration">
      <security mode="Message"> <!-- changed this to "message" -->
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </wsHttpBinding> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:19:22.503

检查您的网站在 IIS 内的绑定。应该在那里添加 https 绑定。

# azure - 在地理上分布基于 Azure 的服务

> ID：11222115
> 
> 赞同：4
> 
> 时间：2012-06-27T08:23:42.747
> 
> 标签：azure, load-balancing, distributed-computing

我有一个基于 Azure 的 Web 服务。该服务包含一个基于 Web 的前端，该前端通过 JSON 和 Ajax 与运行在同一 Web 角色中的 WCF 服务进行通信。这反过来又与另一个 WCF 服务通信，该服务作为我们在一个单独的 Web 角色中的中间层。这与由两个 SQL Azure 数据库和一些 blob 存储组成的后端进行通信。部署时，所有这些都放置在西欧地区（我在英国）。Web 服务的一部分涉及上传多张可能较大的照片。如果我们在美国的用户使用托管在美国的前端和中间层将数据上传到美国的数据存储和数据库，那将是有意义的。Azure 是否提供了一种解决方案，使我可以跨大陆复制我的基础架构并让 Azure 处理所需的重定向？如果是这样，我该如何设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:49:04.220

是的，您可以在 Windows Azure 中使用[流量管理器](http://msdn.microsoft.com/en-us/library/windowsazure/hh744833.aspx)执行此操作，您可以在 3 种不同的模式下对其进行设置：

*   性能（名称说明，将尝试将您重定向到最近的托管服务）
*   故障转移（发生错误时重定向）
*   循环赛（平均分配）

以下是性能负载平衡方法如何工作的概述：

![在此处输入图像描述](../Images/3e48b7e0d0dda802bd30f9ea9b241980.png)

请注意，这仅适用于托管服务（不适用于存储、SQL Azure 等）

# java - 做内部作业不好吗？

> ID：11222121
> 
> 赞同：10
> 
> 时间：2012-06-27T08:24:10.747
> 
> 标签：java, coding-style

我们正在与我的同事讨论内部任务，例如：

```
return result = myObject.doSomething(); 
```

或者

```
if ( null == (point = field.getPoint()) ) 
```

这些是可以接受的还是应该用以下内容代替，为什么？

```
int result = myObject.doSomething();
return result; 
```

或者

```
Point point = field.getPoint();
if ( null == point) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T08:26:18.717

内部作业更难阅读，也更容易错过。在复杂的情况下，它甚至可能被遗漏，并可能导致错误。

例如。如果条件评估阻止为变量赋值，这将是一个很难发现的错误：

```
if (i == 2 && null == (point = field.getPoint())) ... 
```

如果`i == 2`为 false，则点变量稍后将没有值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T08:34:25.867

`if ( null == (point = field.getPoint()) )`

优点：

*   少一行代码

缺点：

*   可读性较差。
*   不将`point`' 的范围限制在语句及其代码块中。
*   据我所知，没有提供任何性能改进
*   可能并不总是被执行（当它前面有一个评估为假的条件时。

缺点超过优点 4 / 1，所以我会避免它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T08:26:37.583

这主要与代码的可读性有关。避免内部分配以使您的代码可读，因为内部分配不会有任何改进

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-27T08:27:14.267

**功能** `Not Necessarily.` **上的可读性** `Definitely Yes`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-27T08:37:07.117

应该避免它们。减少每行标识符/操作的数量将增加可读性并提高内部代码质量。这是关于该主题的有趣研究：[http ://dl.acm.org/citation.cfm?id=1390647](http://dl.acm.org/citation.cfm?id=1390647)

所以底线，分手

```
return result = myObject.doSomething(); 
```

进入

```
result = myObject.doSomething();
return result; 
```

将使其他人更容易理解和使用您的代码。同时，如果在您的代码库中散布一些内部分配，只要它们在它们的上下文中易于理解，它就不会是世界末日。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-27T08:27:28.317

好吧，第一个不完全是内部分配，但在第二种情况下......它降低了可读性......但在某些情况下，如下所示，

```
while ( null == (point = field.getPoint()) ); 
```

这样写很好

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-27T08:28:14.790

在这两种情况下，第一种形式都更难阅读，并且每当您想在调试器中检查值时都会让您想要更改它。我不知道在逐步调试时我诅咒“简洁”代码的频率。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-27T08:44:57.957

在极少数情况下，内部赋值会降低程序复杂性，例如在`if (x != null && y != null && ((c = f(x, y)) > 0) {...}`复杂条件下执行的情况下，您真的只需要赋值。

但在大多数情况下，内部分配会降低可读性，并且很容易被遗漏。

我认为内部赋值是 70 年代 C 编程语言的第一个版本的遗留物，当时编译器没有做任何优化，优化代码的工作留给了程序员。在那个时候内部赋值更快，因为没有必要再次从变量中读取值，但是今天有了快速的计算机和优化的编译器，这一点不再重要了。然而，一些 C 程序员已经习惯了它们。我认为 Sun 将内部赋值引入 Java 只是因为他们希望与 C 类似，并使 C 程序员更容易转换为 Java。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-27T08:27:48.613

始终以代码**可读性**而不是**可写性**为目标。类似这样的东西也是如此，`a > b ? x : y;` 可能有很多开发人员在阅读您的第一个代码片段时没有问题，但他们中的大多数人已经习惯了第二个片段。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-27T08:32:12.493

更详细的形式也使得在 Eclipse 等调试器中更容易理解。我经常拆分单行分配，以便更容易看到中间值。

尽管 OP 没有直接要求，但类似的情况是函数调用，因为方法参数可以节省行数，但更难调试：

```
myFunction(funcA(), funcB()); 
```

不显示返回类型，并且更难单步执行。如果两个值属于同一类型，也更容易出错。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-27T08:27:25.243

我发现使用内部分配没有任何害处。它节省了几行代码（尽管我确信它不会改善编译或执行时间或内存）。唯一的缺点是对其他人来说可能看起来很麻烦。

# c# - 查找所有现有的 wpf 控件

> ID：11222127
> 
> 赞同：0
> 
> 时间：2012-06-27T08:24:31.263
> 
> 标签：c#, wpf, visual-studio-2010, controls

是否有可能从我正在运行的（调试模式）wpf 应用程序中找出每个现有控件？

我需要这个来检查第三方库是否添加了新控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:34:18.937

我认为您正在寻找 WPF Tree Visualizer。[这是一篇文章解释了如何使用](http://blogs.msdn.com/b/jgoldb/archive/2010/05/25/wpf-visualizer-in-visual-studio-2010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:40:56.173

当我想可视化 wpf 控件的各个组件时，我使用[Snoop 。](http://snoopwpf.codeplex.com/)

# javascript - Hightcharts max 19 四舍五入为 20

> ID：11222128
> 
> 赞同：2
> 
> 时间：2012-06-27T08:24:35.757
> 
> 标签：javascript, highcharts, max, boundary

我在 Highcharts 中创建了一个折线图，我希望最大值为 19。所以我找到了选项 max

```
yAxis: {
   max: 19;
} 
```

但是 Highcharts 将最大值舍入到 20，我真的不想要这个，因为 19 是这个变量可能的最大值。我已经用 21 对其进行了测试，结果最多为 30。

我怎样才能让 Highcharts 尊重我的最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:56:31.247

这可能是由于`endOnTick`设置。默认值是`true`表示 y 轴刻度将以刻度结束。如果您的数据介于 0 和 19 之间，则会在 0、5、10、15 和 20 处出现刻度。

测试 endOnTick 设置为：http `false`: [//jsfiddle.net/mVvGj/](http://jsfiddle.net/mVvGj/)

# javascript - 如果从上下文菜单调用 Chrome getSelection 不起作用

> ID：11222130
> 
> 赞同：1
> 
> 时间：2012-06-27T08:24:43.757
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我正在开发一个 Chrome 扩展程序，但我似乎无法超越前几行。问题是当我单击上下文菜单时，它无法从文档中获取选择。当我将它用作 HTML 页面中包含的简单脚本时，它显然可以正常工作。

这是代码：

```
var id = chrome.contextMenus.create({
    "title" : "Search",
    "contexts" : ["selection"],
    "onclick" : openUrl
});

function openUrl() {
    var sel = window.getSelection().toString().trim()
    alert(sel)
} 
```

此代码返回一个空警报框。

我有一个脚本，可以在 mouseup 上抓取用户选择的单词并在字典中搜索该单词。该脚本运行良好，我只需要在用户单击上下文菜单中的“搜索”时执行它。所以我正在寻找的是：1）用户从文档中选择一个词 2）右键单击它并单击上下文菜单 3）包含要在该单击时执行的所有指令的脚本。

在问这个问题之前我环顾四周，但我找不到任何东西，可能是因为我对这个很棒的网站还很陌生。如果我错过了任何问题，请随时将我重定向到其他类似的问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:04:00.543

```
function openUrl(info, tab) {
     alert(info.selectionText);
} 
```

# javascript - 页面在 Django 中重定向时显示加载

> ID：11222131
> 
> 赞同：0
> 
> 时间：2012-06-27T08:24:44.477
> 
> 标签：javascript, django

我不是想要求搭便车，但我似乎根本不知道如何做到这一点。

我最近的帖子是关于在后台运行作业，但我没有这样做。所以...

1.  用户在表单内单击`run`并触发作业。
2.  完成工作、返回并告诉 Django 视图函数大约需要 30 秒`return HttpResponseRedirect(....)`。

因此，当页面被重定向时（发出“GO AHEAD”信号需要 30 秒）......我想向用户展示 Ajax 加载 gif 图片。

我没有实现 Ajax，而且系统太复杂而无法破解。

我们真的可以用 javascript 做到这一点吗？问题是它还没有加载任何页面，因为它需要`heavy_work`完成。

```
result = heavy_work(....)
 .... more code ....
return HttpResponseRedirect(go to this page...) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:32:12.313

为什么不使用常规的 ajax 调用？

**javascript**

```
function do_heavy_lifting(argument) {
    $.ajax({
        type: 'GET',
        data: { argument: argument }, // if necesarry
        url: '/heavy_lifting_django_view_url/',
        beforeSend: function() {
            $('#loading').show();
        },
        success: function(data) {
            ...redirect...
        },
        cache: false
    });
} 
```

**html**

```
<div id="loading" style="display:none">
<button onclick="do_heavy_lifting('argument');"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:33:46.120

使用 AJAX 很简单：只需在实际 ajax 调用*之前*显示一个“加载器”动画 gif ，并在“on_success”响应回调中隐藏加载器 gif。

没有 AJAX 的 Bu - 到目前为止唯一的解决方案是使用迭代器 - 看看这个：[How to stream an HttpResponse with Django](https://stackoverflow.com/questions/2922874/how-to-stream-an-httpresponse-with-django)

# delphi - 是什么导致此错误“无法写入应用程序 file.ini”

> ID：11222132
> 
> 赞同：2
> 
> 时间：2012-06-27T08:24:51.700
> 
> 标签：delphi, delphi-xe2

我的应用程序是在 delphi 中构建的，它可以在除 Windows 7 64 位机器之外的其他平台上完美运行。每次尝试关闭应用程序都会给我这个错误“无法写入应用程序 file.ini”

这是我的关闭代码

```
procedure TfrmMain.FormClose(Sender: TObject; var Action: TCloseAction);
begin
      frmMain.close;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T13:12:34.187

此错误通常是由于尝试写入应用程序自己的文件夹而导致的`Program Files`，这对于 Vista 及更高版本（以及 XP，如果您不是以管理员或高级用户身份运行）下的非管理员是不允许的。

以下是为您的 .INI 文件获取正确文件夹的一些代码：

```
uses
  Windows,
  ShlObj;   // For SHGetSpecialFolderPath

function GetFolderLocation(Handle: HWnd; Folder: Integer): string;
begin
  Result := '';
  SetLength(Result, MAX_PATH);
  if not SHGetSpecialFolderPath(Handle, PChar(Result), Folder, False) then
    RaiseLastOSError;
end; 
```

我在我的应用程序中使用这些来检索非漫游配置文件文件夹，并使用在该文件夹下创建的子文件夹来存储我的应用程序数据。它是在创建 a 期间设置的`TDataModule`：

```
procedure TAppData.Create(Sender.TObject);
begin
  // DataPath is a property of the datamodule, declared as a string
  // CSIDL_LOCAL_APPDATA is the local non-roaming profile folder.
  // CSIDL_APPDATA is for the local roaming profile folder, and is more typically used
  DataPath := GetFolderLocation(Application.Handle, CSIDL_LOCAL_APPDATA);
  DataPath := IncludeTrailingPathDelimiter(DataPath) + 'MyApp\';
end; 
```

有关各种或值的含义，请参阅[MSDN 的文档页面。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)这些值相似，但仅适用于 Vista 及更高版本并与[SHGetKnownFolderIDList](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)一起使用。`CSIDL_``FOLDERID_``FOLDERID_`

对于那些**不愿意**`SHGetSpecialFolderPath`无视 MS 关于不受支持的警告的人，这里是`GetFolderLocation`using的替代版本`SHGetFolderPath`，这是首选：

```
uses
  ShlObj, SHFolder, ActiveX, Windows;

function GetFolderLocation(Handle: HWnd; Folder: Integer): string;
begin
  Result := '';
  SetLength(Result, MAX_PATH);
  if not Succeeded(SHGetFolderPath(Handle, Folder, 0, 0, PChar(Result))) then
      RaiseLastOSError();
end; 
```

最后，对于那些只使用 Vista 和更高版本的人，这里有一个使用[SHGetKnownFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)的示例- 请注意，这在 Delphi 的 XE 之前版本中不可用（AFAIK-可能在 2009 或 2010 中），您需要使用[KNOWNFOLDERID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457%28v=vs.85%29.aspx)值而不是`CSIDL_`，例如`FOLDERID_LocalAppData`：

```
uses
  ShlObj, ActiveX, KnownFolders;

// Tested on XE2, VCL forms application, Win32 target, on Win7 64-bit Pro
function GetFolderLocation(const Folder: TGuid): string;
var
  Buf: PWideChar;
begin
  Result := '';
  if Succeeded(SHGetKnownFolderPath(Folder, 0, 0, Buf)) then
  begin
    Result := Buf;
    CoTaskMemFree(Buf);
  end
  else
    RaiseLastOSError();
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T11:37:56.313

您不应该将 ini 文件写入程序目录。尽管它*在*过去有效，但从来都不是一个好的做法。

您应该`%APPDATA%`用于用户特定的应用程序数据。

您可能想阅读[存储应用程序数据的最佳实践](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/77aaf6e1-8de5-4529-9b26-fa89b55fcc49)

# android - Android上的jWebSocket客户端未连接到本地服务器

> ID：11222133
> 
> 赞同：2
> 
> 时间：2012-06-27T08:24:56.407
> 
> 标签：android, client, websocket

我正在尝试在 Android 上启动一个非常简单的 jWebSocket 客户端并将其连接到我的本地服务器。我正在使用演示中的 JWC 类以及 jWebSocket 1.0 beta 8 和 Android 4.0.3，我的代码如下所示：

```
import org.jwebsocket.api.WebSocketClientEvent;
import org.jwebsocket.api.WebSocketClientTokenListener;
import org.jwebsocket.api.WebSocketPacket;
import org.jwebsocket.client.token.BaseTokenClient;
import org.jwebsocket.kit.WebSocketException;
import org.jwebsocket.token.Token;

import android.app.Activity;
import android.content.Context;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import cased.smids.communication.JWC;

public class TasksActivity extends Activity implements WebSocketClientTokenListener {
   Spinner spinner;
   Button btn_Start;

    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main);

        JWC.init();

        spinner = (Spinner)findViewById(R.id.sp_Task);
        btn_Start = (Button)findViewById(R.id.btn_Start);

        ArrayAdapter<CharSequence> adapter = 
                ArrayAdapter.createFromResource(
                        this,
                        R.array.Tasks,
                        android.R.layout.simple_spinner_item
                );
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        btn_Start.setOnClickListener(new View.OnClickListener() {
            public void onClick(View src) {
                switch (src.getId()) {
                    case R.id.btn_Start:
                        if (spinner.getSelectedItem().toString().equals("Connect")) {
                            try {
                                System.out.println("connecting manually...");
                                JWC.open();
                            } catch (WebSocketException e) {
                                e.printStackTrace();
                            }
                        }
                    default:
                        break;
                }
            }
        });
    }

    @Override
    protected void onResume() {
        super.onResume();
        System.out.println("* opening... ");
        try {
            JWC.addListener(this);
            JWC.open();
        } catch (WebSocketException ex) {
            System.out.println("* exception: " + ex.getMessage());
        }
    }

    @Override
    protected void onPause() {
        System.out.println("* closing... ");
        try {
            JWC.close();
            JWC.removeListener(this);
        } catch (WebSocketException ex) {
            System.out.println("* exception: " + ex.getMessage());
        }
        super.onPause();
    }

    public void processClosed(WebSocketClientEvent arg0) {
        System.out.println("closed");
    }

    public void processOpened(WebSocketClientEvent arg0) {
        System.out.println("opened");
    }

    public void processOpening(WebSocketClientEvent arg0) {
        System.out.println("opening");
    }

    public void processPacket(WebSocketClientEvent arg0, WebSocketPacket arg1) {
        System.out.println("packet");
    }

    public void processReconnecting(WebSocketClientEvent arg0) {
        System.out.println("reconnecting");
    }

    public void processToken(WebSocketClientEvent arg0, Token arg1) {
        System.out.println("token");
    }
} 
```

所以基本上它只是一个微调器和一个按钮。现在，我要做的就是连接到我的本地 jWebSocketServer。演示应用程序（来自网站的 .apk 包，如果我导入代码 eclipse 告诉我在编译代码之前删除许多“@Overwrite” - 在发生相同的“错误”之后）适用于我的服务器，所以它必须成为代码。现在我得到的只是“连接......”，大约 0.1 秒后“关闭”。每次。

顺便提一句。该应用程序具有正确的 INTERNET 和 ACCESS_NETWORK_STATE 所以这应该不是问题。

我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:19:09.800

事实证明， BaseTokenClient.open() 正在捕获所有异常并且什么都不做（静默失败）。在我的情况下 - NetworkOnMainThreadException。谜团已揭开。

# inner-join - JayData 的内部连接

> ID：11222134
> 
> 赞同：1
> 
> 时间：2012-06-27T08:24:59.987
> 
> 标签：inner-join, jaydata

我使用 JayData 库，我想知道是否可以在 JayData 中模拟内部连接，例如：

```
Customers inner join Orders on
Customers.CustomerID = Orders.CustomerID 
```

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:02:54.517

JayData 在当前版本中通常不支持 AdHoc 连接。虽然它在路线图上。

但是，根据您的需求和底层数据提供者，可以通过多种方式实现类似的行为。我假设您正在使用 OData 提供程序。

在这种情况下，您可以使用导航属性来表示关系，从而实现对查询的隐式连接。

实体和上下文定义：

```
$data.Entity.extend("Customer", {
 Id: { key: true, computed: true, type: 'int' },
 Name: { type:string },
 Orders: { type: $data.EntitySet, elementType: 'Order', inverseProperty: 'Customer' }
});

$data.Entity.extend("Order" {
 Id: { key: true, computed: true, type: 'int' },
 Customer: { type: Customer, inverseProperty: 'Orders' }
});

$data.EntityCotnext.extend("CustomerOrders", {
  Customers: { type: $data.EntitySet, elementType: Customer },
  Orders: { type: $Data.EntitySet, elementType: Order }
}); 
```

1）按客户查询订单：

```
context.Orders.filter( function(order) {
  return order.Customer.Name.startsWith('John');
}).toArray(...) 
```

2）按订单查询客户：这是JayData 1.1中发布的新功能（确保更新您的文件）

```
ordersQuery = context.Orders.filter( function(order) { return order.Value > 200 });

context.Customers.filter( function(customer) {
 return custom.Orders.some(ordersQuery);
}).toArray(...); 
```

# ios - UIWebView loadRequest 重用给出闪烁效果

> ID：11222137
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:11.010
> 
> 标签：ios, ipad, uiview, uiwebview, uiwebviewdelegate

我有多个 pdf 文件。根据用户输入，我正在使用 UIWebView 加载 pdf。在第一次 loadRequest 时，它会正确加载 pdf。从第二次调用 LoadRequest 开始，它在加载新的 pdf 时显示出一些闪烁效果。这意味着开始模糊显示内容并在几秒钟内慢慢正确显示内容。

下面的代码片段：

```
- (void) loadDocument: (NSString *) documentName
{
    NSString * path = [[NSBundle mainBundle] pathForResource: documentName ofType: self.docType];
    NSURL * url = [NSURL fileURLWithPath: path];
    request = [NSURLRequest requestWithURL: url];
    [PdfWebView loadRequest: request];    
}

- (void) loadNewDoc:(int)segIndex
{
    switch (mPageIndex) 
    {
                case 0:
                    [self loadDocument:@"PDF_0"];
                    break;

                case 1:
                    [self loadDocument:@"PDF_1"];
                    break;

                case 2:
                    [self loadDocument:@"PDF_2"];
                    break;

                default:
                    break;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:24:41.030

您可以在开始新请求之前清除 Web 视图，方法是使用

```
[yourwebview loadHTMLString:@"<html><head></head><body></body></html>" baseURL:nil]; 
```

甚至

```
[yourwebview stringByEvaluatingJavaScriptFromString:@"document.open();document.close();"]; 
```

这可能会消除闪烁效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T20:04:07.340

对我来说，这有帮助（它的 robovm java 代码）：

```
UIView.transition(_wv, 0.5, UIViewAnimationOptions.TransitionCrossDissolve, new Runnable() {
@Override
public void run() {
    _wv.loadData(new NSData(pdf), "application/pdf", "utf-8", null);
}
}, null); 
```

# php - SQL查询中的while循环

> ID：11222139
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:16.827
> 
> 标签：php, mysql, sql, while-loop

我不确定为什么这个 SQL 查询不起作用。

我是 SQL/PHP 新手，请见谅。

```
mysql_query("
    SELECT * FROM table WHERE name = " . "'Bob'" . 
    while($i < $size)
    {
        $i++; 
        echo "OR name = '"; 
        echo $array[$i] . "'";
    } . 
    " ORDER BY id DESC "
); 
```

Dreamweaver 给我一个错误，说它不正确，但没有告诉我哪里出了问题。

是否可以将while循环放入sql命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:27:18.550

你不能在字符串中使用一段时间

```
$where = "";
if ($size > 0) 
{
$where .= " WHERE ";
}
while($i < $size)
{
$i++;
$where .= "OR name = '".$array[$i]."' ";
}

$query = "SELECT * FROM table WHERE name = '".Bob."'".$where." ORDER BY id DESC";
mysql_query($query); 
```

（此代码未经测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:28:29.483

呜！

你不能写这个：D

在编写查询之前建立你的`OR`条件，它会很好：

```
$myCondition = " ";
while($i < $size) {
    $i++;
    $myCondition .= "OR name = '" . $array[$i] . "'";
}
mysql_query(
    "SELECT * FROM table WHERE name = " . "'Bob'" . $myCondition . " ORDER BY id DESC "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:28:05.303

`echo`是输出字符串，不会返回字符串。

之类的东西是`$str = "aaa" . echo "bbb";`行不通的。

对于你的情况，使用`IN`会更好。

```
foreach ($array as &$name) {
  $name = "'".mysql_real_escape_string($name)."'";
}
mysql_query("SELECT * FROM table WHERE name IN (".implode(',', $array).")"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:34:19.377

或使用

```
"SELECT * FROM table WHERE name IN(".implode( ',', $array).")"; 
```

# c# - 是否可以忽略“输出”参数？

> ID：11222140
> 
> 赞同：3
> 
> 时间：2012-06-27T08:25:20.513
> 
> 标签：c#, methods, out-parameters

我有这样的方法...

```
public List<String> TestMethod(Int32 parameter, out Boolean theOutParameter)
{
} 
```

当我调用该方法时，如果我对该方法`theOutParameter`的调用不感兴趣，会是什么样子？实例化一个 new 似乎有点过分，`bool`以便在我对该值不感兴趣的情况下处理方法的 out 参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:27:08.900

不，但您可以添加重载：

```
public List<string> TestMethod(int parameter)
{
    bool tmp;
    return TestMethod(parameter, out tmp);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T08:27:14.463

> 是否可以忽略“输出”参数？

不，你不能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T08:36:00.313

您可以选择返回您自己的列表，该列表具有说明是否有更多结果的属性，例如

```
public class QueryResult:List<string>
{
    public bool HasMoreResults{get;set;}
}

public QueryResult TestMethod(Int32 parameter)
{
    QueryResult res;
    //create list, filling, etc.
    //instead of setting the out, set the parameter
    res.HasMoreResults = ....
} 
```

# loops - 在cmd中循环curl

> ID：11222141
> 
> 赞同：4
> 
> 时间：2012-06-27T08:25:20.577
> 
> 标签：loops, curl, cmd

通过 cmd，我初始化`curl http://path-to-my-domain`以测试我网站中的某些内容。但是，我想至少初始化 20 次。有没有办法为此创建一个 .exe 文件，以便我可以单击它然后它会像循环一样执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:24:23.573

Why an exe? A simple batch file will work. (A text file with a .BAT extension containing commands to be executed)

Not sure what the purpose would be, but to call it 20 times with the same URL you could use:

```
for /l %%N in (1 1 20) do curl http://path-to-my-domain 
```

If run from the command line then %%N must change to %N

If you want to call it with multiple URLs, then

```
curl http://path1
curl http://path2
curl http://path3
...
curl http://path20 
```

# sql - 在 sql 查询中使用减号返回别名失败

> ID：11222142
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:27.630
> 
> 标签：sql, alias

如果我尝试使用别名（scount、samount），我的 sql 查询将出现问题。该查询在没有别名的情况下运行正常，并且仅使用第一个（scount）也可以正常工作，但是一旦我添加第二个（samount），查询就无法执行。我认为这与我出于某种原因进行减号查询有关。

谁能帮我解决这个问题，以便我可以使用别名返回值。

```
select count(t.invoiceID) scount, sum(amount) samount  -
IFNULL(
(
select sum(p.amount) as pamount  
    from invoice t,  invoiceFactoring ift, InvoiceType it, Payment p                    
    where t.issuerID = 38
    AND ift.invoiceID = t.invoiceID
    AND t.invoiceID = p.invoiceID
    AND it.invoiceTypeID = t.invoiceTypeID
    AND now() > date_add(t.invoiceExpiryDate, INTERVAL 45 DAY) 
)
,0)
  from invoice t,  invoiceFactoring ift, InvoiceType it
  where issuerID = 38
  AND ift.invoiceID = t.invoiceID
  AND it.invoiceTypeID = t.invoiceTypeID
  AND now() > date_add(t.invoiceExpiryDate, INTERVAL 45 DAY)
  AND t.disabled = 0 
  AND it.typeCategory = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:34:33.213

别名**在**计算之后进行。

```
SELECT 1 blah - 2 <--- wrong
SELECT 1 - 2 blah <--- correct 
```

PS澄清

您的查询本质上是这样的：

```
SELECT ... scount, ... samount - IFNULL(...)
FROM ... 
```

只需将其替换为

```
SELECT ...scount, ... - IFNULL(...) samount
FROM ... 
```

如果它对您有帮助，请接受答案，因为在您开始接受之前您几乎不会得到另一个答案。

# sql - 在这个例子中可以合并 UPDATE 语句吗？

> ID：11222145
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:39.127
> 
> 标签：sql, tsql, sql-server-2008-r2

我经常有如下代码行：

```
 UPDATE my_table SET name = 'x'  WHERE Original =  'a'
    UPDATE my_table SET name = 'y' WHERE Original =  'b' 
    UPDATE my_table SET name = 'z' WHERE Original = 'c'  
    UPDATE my_table SET name = 'k' WHERE Original = 'd' 
    UPDATE my_table SET name = 'm' WHERE Original = 'e'  
    UPDATE my_table SET name = 'n' WHERE Original = 'f' 
```

我可以将此代码合并/缩短到一个 UpDate 语句中吗？还是最好将它们保持原样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:27:35.937

```
UPDATE my_table 
SET name = 
    CASE 
        WHEN Original = 'a' THEN 'x' 
        WHEN Original = 'b' THEN 'y' 
        ... 
    END 
```

这将更新每一行。因此，如果您没有指定原始值，它将被设置为 NULL。因此，您可能希望使用 WHERE 子句将更新限制为仅要更新的内容，如下所示：

```
WHERE Original IN ('a', 'b', ...) 
```

或者，作为替代方案，您可以使用 ELSE 语句，如果在 WHEN 语句中没有匹配项，则保留 name 值不变，如下所示：

```
 CASE 
        WHEN Original = 'a' THEN 'x' 
        WHEN Original = 'b' THEN 'y' 
        ... 
        ELSE name
    END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T08:28:43.930

您可以使用以下`case`语句：

```
UPDATE  my_table 
SET     name = 
        case Original
        when 'a' then 'x'
        when 'b' then 'y'
        ...
        else name -- Preserve original
        end 
```

该`else`子句确保您不会修改 a`name`如果它在`case`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:38:25.460

如果这些值尚未在表中，则可以使用[表值构造函数和 from 子句：](http://msdn.microsoft.com/en-us/library/dd776382%28v=sql.105%29)

```
update mt set name = t.name
from
    my_table mt
        inner join
    (values
        ('a','x'),
        ('b','y'),
        ('c','z'),
        ('d','k'),
        ('e','m'),
        ('f','n')
    ) t(original,name)
        on
            mt.Original = t.original 
```

# ruby-on-rails - 设计显示用户页面

> ID：11222147
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:39.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我将如何创建一个允许用户查看其个人资料的页面。

有人解决/看到/知道这个问题的答案吗？我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:18:04.190

这与其说是一个设计问题，不如说是一个简单的路由问题：

只需创建一个`ProfileController`和一个动作`Show`，然后在您的中执行以下操作`routes.rb`：

```
match '/profile', :to => "profile#show" 
```

在您的个人资料#show 操作中：

```
def show
  @profile = current_user
end 
```

并在视图中显示存储在@profile 中的有关用户的信息。

# iphone - 无法在 PopOverController 中填充 TableView - 目标 C

> ID：11222148
> 
> 赞同：0
> 
> 时间：2012-06-27T08:25:43.837
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个`UIButton`叫做 as 的`UploadButton`。我正在使用以下代码行来处理单击它时应该发生的操作::

```
-(IBAction)UploadButtonPressed:(id)sender{  

self.Upload = [[UploadSpaceTableViewController alloc] 
                         initWithStyle:UITableViewStylePlain];
self.UploadTableViewPopover = [[UIPopoverController alloc] 
                                initWithContentViewController:Upload];               

[self.UploadTableViewPopover presentPopoverFromBarButtonItem:sender 
                                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

这`UploadSpaceTableViewController`是我制作的一个单独的课程。它具有以下功能::

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.clearsSelectionOnViewWillAppear = NO;
self.contentSizeForViewInPopover = CGSizeMake(150.0, 140.0);
self.keys1 = [NSMutableArray array];
[keys1 addObject:@"Red"];
[keys1 addObject:@"Green"];
[keys1 addObject:@"Blue"];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [keys1 count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

NSString *key1 = [keys1 objectAtIndex:indexPath.row];
cell.textLabel.text = key1;

return cell;
} 
```

基本上，我想要的只是在单击 my时显示 a `UItableView`inside a 。`UIPopOverController``UploadButton`

但是，在运行上述代码行时，我在 gdb 中得到以下错误::

```
splitView[4486:f803] *** Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
2012-06-27 14:05:05.531 splitView[4486:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath: 
```

这是我第一次尝试`UITableView`在`UIPopoverController`. 我在代码中尝试了很多变体，但是我无法对其进行排序。有人可以帮我吗 ？？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:33:32.793

问题是以下行：

```
self.keys1 = [NSMutableArray array]; 
```

您`UploadSpaceTableViewController`没有方法 setKeys / 没有属性键。

**编辑第二条错误消息：**

> UITableView dataSource 必须从 tableView:cellForRowAtIndexPath 返回一个单元格：

这意味着您应该实现该`UITableViewDataSource`方法`tableView:cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //configure your cell here

    return myCongiuredTableViewCell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:34:39.690

该错误意味着您在为 keys1, 赋值时传递了一个无效参数`self.keys1 = ...`。例如，如果您将 NSMutableArray 传递给 NSDictionary 属性，您将收到该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:59:43.600

你有没有分配你的单元格，我认为你的代码会返回 nill

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *CellIdentifier = @"Cell";
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

 if(cell == nill){
      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];  
}     
 // Configure the cell...

 NSString *key1 = [keys1 objectAtIndex:indexPath.row];
 cell.textLabel.text = key1;

 return cell;
} 
```

这可能会帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:01:01.153

在 cellForRowAtIndexPath 中使用以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    if( cell == nil )
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *key1 = [keys1 objectAtIndex:indexPath.row];
    cell.textLabel.text = key1;

    return cell;

} 
```

我认为这可能对你有帮助。

# php - 为什么它不显示 POST 值？

> ID：11222150
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:25:58.233
> 
> 标签：php

为什么它不显示 POST 值？

错误：注意：未定义的索引：q[abc] 在行： `echo $_POST['q[abc]'];`

谢谢！

```
<form method="POST" action="post.php" name="tq">

    <input type="hidden" name="q[id]" value="1035">

    <input type="radio" name="q[abc]" value="3001"></div>
    <div>A</div>

    <input type="radio" name="q[abc]" value="3002"></div>
    <div>B</div>

    <input type="radio" name="q[abc]" value="3003"></div>
    <div>C</div>

    <input type="submit" name="add" value="Next">

</form>

<?php
if (isset($_POST['add'])) {
    echo $_POST['q[abc]']; //error line
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:28:12.183

而不是`echo $_POST['q[abc]'];`你应该尝试`echo $_POST['q']['abc'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:28:24.603

`name="q[abc]"`是使 PHP 创建一个数组的特定语法，然后您可以像这样访问它：

```
echo $_POST['q']['abc']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:28:26.817

你应该做：

```
echo $_POST['q']['abc']; 
```

如果您将来有其他类似的问题，请使用：

```
var_dump($_POST); 
```

查看变量包含的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T08:29:01.310

当您将`name="q[abc]"`q 设为数组时，要查看您必须的值：

```
echo $_POST['q']['abc']; 
```

# css - 在 CSS3 中，逗号在过渡和变换之间是什么意思？

> ID：11222168
> 
> 赞同：1
> 
> 时间：2012-06-27T08:27:02.930
> 
> 标签：css, less, css-transitions, css-transforms

请提两个问题，因为我是 CSS3 的新手：

**1)**我知道`-XXX-transtion: opacity .4s`下面对 Webkit 和 Firefox 浏览器说：*在 400 毫秒的过程中将不透明度更改为零。*但是后面的逗号是什么意思？

```
opacity: 0;
-webkit-transition: opacity .4s, -webkit-transform .4s;
-moz-transition: opacity .4s, -moz-transform .4s; 
```

**2）**给定`mixins.less`下面的文件，如何重写上面的语句？

```
.transform(@transform) {
    -webkit-transform: @transform;
    -moz-transform: @transform;
    -ms-transform: @transform;
    -o-transform: @transform;
    transform: @transform;
}

.transition(@transition) {
    -webkit-transition: @transition;
    -moz-transition: @transition;
    -ms-transition: @transition;
    -o-transition: @transition;
    transition: @transition;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:54:08.870

你的第一个问题的答案：

您可以在过渡中使用逗号来指定必须应用过渡的多种样式。例如：在`-webkit-transition: opacity .4s, -webkit-transform .4s` 更改不透明度和完成变换时（可以是形状更改、位置更改），该行会告诉应用过渡或大小根据变换类型而变化）

# javascript - 当我不知道密钥的名称时如何读取 json 对象

> ID：11222169
> 
> 赞同：2
> 
> 时间：2012-06-27T08:27:08.060
> 
> 标签：javascript, json

在运行时我将有一个动态字典对象返回给我

> 例如 var objectFromApi = {"A":"我是 A","B":"我是 B","C":"我是 C"}

我无法通过 objectFromApi ["A"] 来获取值，因为我无法知道密钥。

有没有办法打印所有的关键和它的价值？

有没有类似的东西

```
for(j=0;j<objectFromApi.length;j++)
{
    console.debug(objectFromApi[j].Key +"  " + objectFromApi[j].Value);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:28:39.623

```
for(var name in objectFromApi )
{
    if (objectFromApi.hasOwnProperty(name))
    {

    }
} 
```

[http://jsfiddle.net/V6t6Y/](http://jsfiddle.net/V6t6Y/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T08:32:56.520

在 ECMA 5 中，您还可以使用

```
var keys = Object.keys(objectFromAPi) 
```

这将返回

```
 ["A ", "B", "C"] 
```

然后你可以像往常一样遍历数组

```
for(var i = 0; i < keys.length; i++){
     // do something with the value
     // objectFromApi[keys[i]] 
} 
```

# string - 如果字符串为空，则使用 AWK 打印指定的文本

> ID：11222190
> 
> 赞同：3
> 
> 时间：2012-06-27T08:27:59.017
> 
> 标签：string, awk

我正在尝试使用`awk`如果字符串为空来打印特定文本。在以下情况下工作正常

```
noob@noob:~$ echo "" | awk '{if ($0=="") print "not playing"}'
not playing 
```

但是当我尝试在以下情况下采取类似的方法时，它不起作用

```
noob@noob:~$ mpc current | awk '{if ($0=="") print "not playing"}'
noob@noob:~$ 
```

我相信`mpc current`如果没有歌曲正在播放的输出是一个空字符串。

```
noob@noob:~$ mpc current
noob@noob:~$              #empty string 
```

那么，我的假设是`empty string` 错误的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T08:46:12.143

显然它根本不打印任何内容，甚至没有换行符。试试这个。

```
mpc current | awk '{ print } END { if (!NR) print "not playing" }' 
```

这将打印任何输出。如果你不想这样，请取出`{ print }`.

awk 依次处理每一行，然后在 EOF 处执行任何 END 块。如果没有输入行，则在开头会有一个 EOF，变量`NR`将为零，因此 END 块将打印占位符文本。（我最初为此有一个专用变量，但是 Bob Vale 的答案中使用的内置行号变量`NR`显然更优雅。它随着`awk`读取的每个输入行递增。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T08:46:52.953

尝试

```
mpc current | awk 'END { if (NR==0) print "not playing"}' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T09:07:36.043

这真的是一份工作`awk`吗？在我看来，就像行数的简单问题：

```
mpc current | if [[ $(wc -L) -eq 0 ]]; then echo "not playing"; fi 
```

上面的代码计算了输出的最长行的长度，如果是则`mpc current`打印“ ” 。`not playing``0`

以下是它的行为方式：

```
$ echo ""       | if [[ $(wc -L) -eq 0 ]]; then echo "not playing"; fi
not playing
$

$ echo -n ""    | if [[ $(wc -L) -eq 0 ]]; then echo "not playing"; fi
not playing
$

$ echo "foo"    | if [[ $(wc -L) -eq 0 ]]; then echo "not playing"; fi
$

$ echo -n "foo" | if [[ $(wc -L) -eq 0 ]]; then echo "not playing"; fi
$ 
```

**或者**

正如 William Pursell 在他们的评论中所说，你也可以这样做：

```
mpc current | grep -q . || echo "not playing" 
```

这也不需要`bash`。

# apache - Apache QPID 队列大小和计数

> ID：11222197
> 
> 赞同：2
> 
> 时间：2012-06-27T08:28:15.767
> 
> 标签：apache, jms, qpid

我有一个带有以下参数的 qpid 队列： **bus-sync-queue --durable --file-size=48 --file-count=64**

我想将**1 000 000**条消息放入此队列。每条消息只是一个**12 个**字符的字符串。（002000333222、002000342678 等）。我必须为 config --file-size= **X** --file-count= **Y**设置什么值才能将所有消息放入队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:32:10.680

单个持久消息有相当大的开销，在您的情况下，一条消息将需要至少 128 字节的存储空间。您应该重新考虑您的设计，要么减少预期的未确认消息数量，要么使用不同的方法。

# c# - 从中提取文本 ... 标记或直接来自 HTML 文件

> ID：11222198
> 
> 赞同：0
> 
> 时间：2012-06-27T08:28:18.360
> 
> 标签：c#, asp.net, html, regex, html-agility-pack

我有一个 HTML 页面，其中包含一些我想从网络服务器下载的文件名。我需要阅读这些文件名以创建一个列表，该列表将传递给从服务器下载文件的 Web 应用程序。这些文件名有一些扩展名。

我已经深入研究了这个话题，但除了 -

1.  正则表达式不能用于解析 HTML。
2.  使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

有没有其他方法可以让我从 HTML 文件中搜索具有类似 filename.ext 模式的文本？

包含文件名的示例 HTML -

```
 <p class=3DMsoNormal style=3D'margin-top:0in;margin-right:0in;margin-bottom=:0in; margin-left:1.5in;margin-bottom:.0001pt;text-indent:-.25in;line-height:normal;mso-list:l1 level3 lfo8;tab-stops:list 1.5in'><![if !supportLists]> <span style=3D'font-family:"Times New Roman","serif";mso-fareast-font-family:"Times New Roman"'><span style=3D'mso-list:Ignore'>1.<span style=3D'font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </span></span></span><![endif]><span style=3D'font-family:"Times New Roman","serif"; mso-fareast-font-family:"Times New Roman"'>**13572_PostAccountingReport_2009-06-03.acc**<o:p></o:p></span></p> 
```

我不能使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，因为我不允许下载和使用任何应用程序或工具。

这不能通过任何其他逻辑来实现吗？

这是我到目前为止所做的

```
string pageSource = "";
            string geturl = @"C:\Documents and Settings\NASD_Download.mht";
            WebRequest getRequest = WebRequest.Create(geturl);
            WebResponse getResponse = getRequest.GetResponse();
            using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
            {
                pageSource = sr.ReadToEnd();
                pageSource.Replace("=", "");
            }
           var fileNames = from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+.+[a-z]")
                          select m.Value;
            foreach (var s in fileNames)
                Response.Write(s); 
```

由于每个文件名中出现一些“=”，我无法获取文件名。如何删除“=”的出现`pageSource string`

提前致谢

阿基勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:42:12.477

好吧，知道`regex`在 HTML 中查找值并不理想：

```
var files = [];
var p = document.getElementsByTagName('p');

for (var i = 0; i < p.length; i++){
    var match = p[i].innerHTML.match(/\s(\S+\.ext)\s/)

    if (match)
        files.push(match[1]);
} 
```

[**现场演示**](http://jsfiddle.net/BNEwG/)

注意：阅读问题的评论。

如果扩展可以是任何东西，你可以使用这个：

```
var files = [];
var p = document.getElementsByTagName('p');

for (var i = 0; i < p.length; i++){
    var match = p[i].innerHTML.match(/\b(\S+\.\S+)\b/)
    console.log(match)
    if (match)
        files.push(match[1]);
}
document.getElementById('result').innerHTML = files + ""; 
```

​ 但这真的真的不靠谱。

[**现场演示**](http://jsfiddle.net/BNEwG/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:53:59.847

好吧，您*可以*使用正则表达式来提取*看起来像*文件名的内容。因为，正如您正确指出的那样，正则表达式不*解析*HTML，您可能会得到误报，即，您可能会得到*看起来像*文件名但不是的结果。

举个例子：

```
string html = @"<p class=3DMsoNormal ...etc...";

var fileNames = from Match m in Regex.Matches(html, @"\b[A-Za-z0-9_-]+\.[A-Za-z0-9_-]{3}\b") 
                select m.Value;

foreach (var s in fileNames)
    Console.WriteLine(s);
Console.ReadLine(); 
```

这将返回

```
1.5in
1.5in
7.0pt
13572_PostAccountingReport_2009-06-03.acc 
```

你看，*看起来像*文件名的 HTML 内容将被返回。当然，您可以改进正则表达式（例如，替换`+`为`{3,}`，以便点之前的部分至少需要三个字符），以便过滤掉此示例中的误报。尽管如此，它总是会是一个*近似的结果*，而不是一个精确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:55:38.470

使用通用模式获取文件名可能是不可能的，因为`1.5in` `-.25in` `7.0pt`和喜欢，尝试更具体（如果可能），喜欢
`/[a-z0-9_-]+\.[a-z]+/gi`或
`/>[a-z0-9_-]+\.[a-z]+</gi`（包括标记）甚至
`/>\d+_PostAccountingReport_\d+-\d+-\d+\.[a-z]+</gi`

# python - 从 URL 显示图片到 wxPython

> ID：11222207
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:28:33.040
> 
> 标签：python, wxpython

谁能告诉我如何从 URL 下载图片并将其显示在我的 wxPython 上？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:10:27.627

使用[wx.Image并使用诸如](http://wxpython.org/docs/api/wx.Image-class.html)[LoadStream](http://wxpython.org/docs/api/wx.Image-class.html#LoadStream)或[LoadMimeStream 之](http://wxpython.org/docs/api/wx.Image-class.html#LoadMimeStream)类的方法从输入流或类似文件的对象加载图像数据。

要获取图像数据本身，请使用[urllib2](http://docs.python.org/library/urllib2.html)或[requests](http://docs.python-requests.org/)。

# apache - 多个动态文件夹级别的 Apache URL 重写

> ID：11222210
> 
> 赞同：1
> 
> 时间：2012-06-27T08:28:40.117
> 
> 标签：apache, mod-rewrite, url-rewriting

想知道是否有人可以帮助我为我的网站编写一些 RewriteRule。

看看下面的 URL，看看我需要如何重写它们。

```
http://www.example.com/essays-and-reports/ 
does not need to be re-written, it is a physical folder on the web server.

http://www.example.com/essays-and-reports/business/ 
needs to rewrite to (root)/first_level_template.php

http://www.example.com/essays-and-reports/dynamic_name2
needs to rewrite to (root)/first_level_template.php

http://www.example.com/essays-and-reports/business/financial-reports/ 
needs to rewrite to (root)/second_level_template.php

http://www.example.com/essays-and-reports/blah/financial-reports/C_B_2413_Report_on_savings.php 
needs to rewrite to (root)/final_level_template.php 
```

请注意，无论尾部斜杠如何，规则都必须有效。总而言之，我需要将三个级别重新写入他们的相关模板。上述内容均不存在于服务器上，包括最终级别的 PHP 文件。唯一存在的是essays-and-reports 文件夹，它是网站的主文件夹。

我尝试了类似的方法，但在日志中出现编译错误。

```
RewriteRule ^([^/]+)/([^/]+)/?$ /second-level-template\.php [L] 
```

如果你能帮我写出我需要的规则——我非常感激。

**编辑：** 这种代码有效，但它也重写了我不想要的essays-and-reports文件夹......

```
Options +FollowSymLinks
RewriteEngine On

RewriteBase /essays-and-dissertations/
RewriteRule ^[^/]+/[^/]+/[^/]+/?$ /final_level_template.php [L]
RewriteRule ^[^/]+/[^/]+/?$ /second_level_template.php [L]
RewriteRule ^[^/]+/?$ /first_level_template.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:40:39.963

您可以使用 3 条规则来做到这一点：

```
RewriteRule ^essays-and-reports/[^/]+/?$ /first_level_template.php [L]
RewriteRule ^essays-and-reports/[^/]+/[^/]+/?$ /second_level_template.php [L]
RewriteRule ^essays-and-reports/[^/]+/[^/]+/[^/]+/?$ /final_level_template.php [L] 
```

您不需要转义重定向目标中的点，因为这不是正则表达式。

# html - 如何创建一个 HTML5 单行 contentEditable 选项卡来监听 Enter 和 Esc

> ID：11222213
> 
> 赞同：3
> 
> 时间：2012-06-27T08:28:43.853
> 
> 标签：html, contenteditable

我在工作中有一个仪表板，我希望人们能够更改选项卡上的文本，以便创建最适合他们的类别。

我想要单行文本，它会忽略`Esc`或提交更改`Enter`或`Blur`。

我找到了答案，但我想我会发布以帮助他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:28:44.447

这是 HTML 标记：

```
<span contenteditable="false"></span> 
```

这是 jQuery/javascript：

```
$(document).ready(function() {
    $('[contenteditable]').dblclick(function() {
        $(this).attr('contenteditable', 'true');
        clearSelection();
        $(this).trigger('focus');
    });

    $('[contenteditable]').live('focus', function() {
        before = $(this).text();
        if($(this).attr('contenteditable') == "true") { $(this).css('border', '1px solid #ffd646'); }
    //}).live('blur paste', function() {
    }).live('blur', function() {
        $(this).attr('contenteditable', 'false');
        $(this).css('border', '1px solid #fafafa');
        $(this).text($(this).text().replace(/(\r\n|\n|\r)/gm,""));

        if (before != $(this).text()) { $(this).trigger('change'); }
    }).live('keyup', function(event) {
        // ESC=27, Enter=13
        if (event.which == 27) {
            $(this).text(before);
            $(this).trigger('blur');
        } else if (event.which == 13) {
            $(this).trigger('blur');
        }
    });

    $('[contenteditable]').live('change', function() {
        var $thisText = $(this).text();
        //Do something with the new value.
    });
});

function clearSelection() {
    if ( document.selection ) {
        document.selection.empty();
    } else if ( window.getSelection ) {
        window.getSelection().removeAllRanges();
    }
} 
```

希望这对某人有帮助！！！

# apache - 在我的服务器上运行的未知服务 zeus-admin

> ID：11222222
> 
> 赞同：4
> 
> 时间：2012-06-27T08:29:23.850
> 
> 标签：apache, tomcat, zeus

我曾经`nmap`检查它显示的服务器上打开了哪些端口

```
PORT     STATE    SERVICE
9090/tcp open     zeus-admin 
```

现在端口 9090 应该监听 `apache tomcat`. 这是什么宙斯管理员？我如何开始我的`apache tomcat server`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T02:47:35.260

在映射它时，它也是默认列出的名称。侦听该端口的实际服务不一定是，它通常是在该端口上运行的默认服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T08:38:37.030

Zeus Web Server 是用于 Unix 和类 Unix 平台的专有 Web 服务器。

ZWS 似乎已经死了，因为它自 2010 年 1 月以来就没有更新过，而且该公司不再提供类似的服务器解决方案。

杀死它并从操作中删除它可能很好，因为它现在主要只是一个安全风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T21:51:59.570

Zeus 有时用作管理控制台之类的嵌入式 Web 服务器。如果您安装了 OpenFire XMPP 服务器，您会发现配置 UI 工具在端口 9090 ( [http://localhost:9090](http://localhost:9090) ) 上运行。

# python - 使用 connection.execute() 的 sqlalchemy 原始 sql 查询限制

> ID：11222223
> 
> 赞同：8
> 
> 时间：2012-06-27T08:29:25.550
> 
> 标签：python, postgresql, sqlalchemy

此 python 代码应该在数据库上运行语句，但不执行 sql 语句：

```
from sqlalchemy import *
sql_file = open("test.sql","r")
sql_query = sql_file.read()
sql_file.close()
engine = create_engine(
    'postgresql+psycopg2://user:password@localhost/test', echo=False)

conn = engine.connect()
print sql_query
result = conn.execute(sql_query)
conn.close() 
```

该`test.sql`文件包含创建 89 个表的 SQL 语句。

如果我指定 89 个表，则不会创建表，但如果我将表数减少到 2 个，则它可以工作。

conn.execute 中可以执行的查询数量是否有限制？如何运行任意数量的这样的原始查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:30:32.647

也许，强制自动提交：

```
conn.execute(RAW_SQL).execution_options(autocommit=True)) 
```

其他方法是使用事务并进行提交：

```
t = conn.begin()
try:
    conn.execute(RAW_SQL)
    t.commit()
except:
    t.rollback() 
```

PD：您也可以将 execution_options 放在 create_engine 参数中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T10:18:17.713

为什么将原始 SQL 与 SQLAlchemy 一起使用？如果你没有充分的理由，你应该使用其他方法：

[http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)

[http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-describing](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-describing)

# sql - 如何在另一个表中引用的表上应用截断命令？

> ID：11222224
> 
> 赞同：0
> 
> 时间：2012-06-27T08:29:27.720
> 
> 标签：sql, sql-server, sql-server-2008

我有两个表 masterTbl 和 detailTbl，其结构如下所示......

```
--PRIMARY TABLE
CREATE TABLE masterTbl (
id INT IDENTITY(1,1) CONSTRAINT pk_id PRIMARY KEY, 
name VARCHAR(100) NOT NULL, 
description VARCHAR(max))

--FORIGN TABLE
CREATE TABLE detailTbl (
id INT IDENTITY(1,1) PRIMARY KEY,
m_id INT NOT NULL CONSTRAINT fk_mid FOREIGN KEY REFERENCES masterTbl(id) ON DELETE CASCADE,
details VARCHAR(MAX)) 
```

我要表演

```
TRUNCATE TABLE masterTbl 
```

但它遇到错误“无法截断表'testDB.dbo.masterTbl'，因为它被外键约束引用。”

如何在**masterTbl上使用****TRUNCATE**命令？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:31:14.350

您必须删除 FK 约束`fk_mid`。但是如果不遵守 FK 约束，您将无法将其放回原处，因为`CASCADE REMOVE`不会发生（孤儿风险）

或使用`DELETE`代替`TRUNCATE`. 这将保留`DELETE CASCADE`行为。

**编辑**

```
DELETE FROM dbo.masterTbl;
DBCC CHECKIDENT ('dbo.masterTbl', RESEED, 0) -- will set IDENTITY count back to 0 
```**

# xml - 更改标签名称并删除某个值的元素

> ID：11222226
> 
> 赞同：0
> 
> 时间：2012-06-27T08:29:34.890
> 
> 标签：xml, xslt

我无法遍历子元素。在下面的输入 XML 中，我必须只取元素`<e>`并将其替换为，如果值等于“DB1” ，则`<se>`需要删除一个元素。`<e>`有人可以帮忙吗？我是 XSLT 的新手。

输入 XML：

```
<a xmlns="http://examle.com/test/2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" >
  <b>
     <c name="RES" type="KSD">
     <d>
        <e>DB1</e>
        <e>DB2</e>
        <e>DB3</e>      
     </d>
    </c>
  </b>
  <error count="0" success="OK">
  </error>
</a> 
```

所需的输出 XML 是：

```
<?xml version="1.0" encoding="utf-8" ?>
<Payload xmlns="http://example.com/test/2.0"xmlns:xs="http://www.w3.org/2001/XMLSchema" >
    <response>
        <allot>8</allot>            
        <size>200</size>
        <ses>
            <se>DB2</se>
            <se>DB3</se>
        </ses>          
    </response>
</Payload> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:35:44.197

我写过这样的XSLT转换..

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@*|comment()|processing-instruction()|text()">
    <xsl:copy-of select="."/>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="d" >
    <Payload xmlns="http://example.com/test/2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" >
      <response>
        <allot>8</allot>
        <size>200</size>
        <ses>
          <xsl:for-each select="e">
            <xsl:variable name="e_name" select="."></xsl:variable>
            <xsl:if test="$e_name != 'DB1'">
              <se>
                <xsl:value-of select="." />
              </se>
            </xsl:if>
          </xsl:for-each>
        </ses>
      </response>
    </Payload>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:13:14.793

在我看来最接近您的需求的解决方案（相当模糊）是

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" />

    <!-- identity template -->
    <xsl:template match="@*|node()">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:template>

    <!-- rename -->
    <xsl:template match="a">
      <Payload>
        <xsl:apply-templates select="@*|node()"/>
      </Payload>
    </xsl:template>

    <!-- rename and add some new elements -->
    <xsl:template match="b">
      <response>
        <allot>8</allot>            
        <size>200</size>
        <xsl:apply-templates select="@*|node()"/>
      </response>
    </xsl:template>

    <!-- don't output this node but only its children -->
    <xsl:template match="c">
        <xsl:apply-templates select="@*|node()"/>
    </xsl:template>

    <!-- rename -->
    <xsl:template match="d">
      <ses>
        <xsl:apply-templates select="@*|node()"/>
      </ses>
    </xsl:template>

    <!-- rename -->
    <xsl:template match="e">
      <se>
        <xsl:apply-templates select="@*|node()"/>
      </se>
    </xsl:template>

    <!-- discard -->
    <xsl:template match="e[.='DB1']|error"/>

</xsl:stylesheet> 
```

我无法处理命名空间，所以我`xmlns`从输入中删除了命名空间并且它起作用了。

# windows-phone-7 - 插入一条记录时“无法修改列[列名= id]”

> ID：11222227
> 
> 赞同：1
> 
> 时间：2012-06-27T08:29:35.180
> 
> 标签：windows-phone-7, sql-server-ce, datacontext

我已经在 windows phone 7 平台上创建了一个数据库。表之一定义如下。

```
[Table]
public class Playlist : BaseTable
{
    // Define ID: private field, public property, and database column.
    private int _id;

    [Column(DbType = "INT NOT NULL IDENTITY", IsDbGenerated = false, CanBeNull=false, IsPrimaryKey = true)]
    public int Id
    {
        get { return _id; }
        set
        {
            NotifyPropertyChanging("PlaylistId");
            _id = value;
            NotifyPropertyChanged("PlaylistId");
        }
    }
    // some other field
    //....... 
```

}

我不希望字段“id”由db生成，因此“IsDbGenerated = false”，但插入一条记录时出现异常：db.Playlists.InsertOnSubmit(new Playlist { Id = (int)DefalutPlaylist.Default , Name = "默认播放列表", Group = 0, Type = 0 });

它说“无法修改列[列名= id]”

谁能帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:48:25.790

在 DbType 中删除“INDENTITY”值，如下所示：

```
[Column(DbType = "INT NOT NULL", IsDbGenerated = false, CanBeNull=false, IsPrimaryKey = true)] 
```

干杯

# c# - CultureInfo.Region 在即时窗口中工作，而不是在代码中

> ID：11222230
> 
> 赞同：2
> 
> 时间：2012-06-27T08:29:49.767
> 
> 标签：c#, cultureinfo

我在 .Net 4.0 和 .Net 4.0 CP 上对此进行了测试，结果相同。

这一行： `global::System.Globalization.CultureInfo.GetCultureInfo("en-us").Region`

如果我在 Visual Studio (C#) 中键入它，那么 Visual Studio 会告诉我“区域”无效。如果我在断点期间在立即窗口中键入同一行，则它完全有效并按预期返回数据。从我可以看到“区域”不在[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)中。

由于某种原因，显然是两个不同的对象。
为什么？这里发生了什么事？为什么现实不一致？我害怕！
（更严重的是，我看到我不理解的行为，所以我想理解它。）

立即窗口返回：

```
global::System.Globalization.CultureInfo.GetCultureInfo("en-us").Region
{我们}
    货币英文名称：“US Dollar”
    CurrencyNativeName：“美元”
    货币符号：“$”
    显示名称：“美国”
    英文名称：“美国”
    GeoId：244
    IsMetric: 假
    ISOCurrencySymbol：“美元”
    名称：“美国”
    NativeName：“美国”
    三字母ISORegionName：“美国”
    ThreeLetterWindowsRegionName：“美国”
    TwoLetterISORegionName：“美国”

```

当 Visual Studio 对我全红时： ![Visual Studio 无法识别 CutlureInfo.Region](../Images/8dcfa91115eca95d45beb717a42d5fd9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:48:37.820

Region 是 CultureInfo 类的非公共属性。似乎即时窗口可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T17:12:31.627

当前 RegionInfo 可使用

```
RegionInfo.CurrentRegion 
```

# android - FileInputStream 中的 OutOfMemoryError

> ID：11222232
> 
> 赞同：0
> 
> 时间：2012-06-27T08:30:02.170
> 
> 标签：android, out-of-memory, fileinputstream

首先在应用程序中下载文件，并保留名称为try.pdf

这里的代码：

```
try {

URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();

    int lenghtOfFile = conexion.getContentLength();
    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

    InputStream input = new BufferedInputStream(url.openStream());
    FileOutputStream fos = openFileOutput("try.pdf", Context.MODE_PRIVATE);

    byte data[] = new byte[1024];

    long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            fos.write(data, 0, count);
        }

        fos.flush();
        fos.close();
        input.close();
} catch (Exception e) {}
return null;

} 
```

现在，当我想使用以下代码打开它时，问题就来了：

```
 try {
    FileInputStream in = openFileInput("try.pdf"); 
    InputStreamReader inputStreamReader = new InputStreamReader(in); 
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader); 
    StringBuilder sb = new StringBuilder(); 
    String line; 
    try {
        while ((line = bufferedReader.readLine()) != null){ 
            sb.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

当尝试使用 FileInputStream 读取文件“try.pdf”的文件时，我有错误 outOfMemory，有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:50:40.333

我怀疑的问题在于你的编码风格，C'ish DOS 单线程。

```
while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        fos.write(data, 0, count);
    } 
```

再次使用相同的 C'ish DOC 单线程样式

```
while ((line = bufferedReader.readLine()) != null){ 
        sb.append(line); 
```

您需要在 2 个不同的线程（显然非 UI）上阅读和发布进度（readLine 和追加）。当一个线程添加到等待数据队列中时，另一个线程从中提取。通过这种方式，您可以让 CPU 时间稍微放松一下。

确保在 2 个线程共享队列之间为此使用 LinkedList 和 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:40:34.733

似乎最可能的原因是文件太大而无法保存在内存中（并且您似乎正在尝试将整个文件加载到内存中） - 尽管在分配失败发生时看到错误本身会确定.

此外，如果它真的是一个 pdf 文件而不是纯文本文件，我认为 BufferedReader 将无法正确读取它（并且可能不会正确换行，因为这需要可能不在的 CRLF pdf二进制文件）。

如果它太大，那么您需要（取决于您正在使用它做什么）控制显示在屏幕上的内容并仅加载该数据，或者如果您正在处理，则以较小的块而不是一个块来处理它而不是显示它。

# java - Java中的公共静态非内部类？

> ID：11222233
> 
> 赞同：1
> 
> 时间：2012-06-27T08:30:03.367
> 
> 标签：java, android, class, static

据我研究，Java 中的静态类只有在它是内部类时才有意义。

但是我刚刚遇到了这个例子，我想了解作者的意思，它的作用以及它是如何工作的：

来自：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

```
 public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
        // a normal class with public constructor and TabListener methods
        ...
    } 
```

静态在这里意味着什么，为什么它应该起作用？他为什么要扩展 Fragment `<T >`？而不是正常的方式。

谢谢！

**编辑：** 哇，很快就有很多答案。感谢所有在这里分享知识的人。

我会将@npe 答案标记为正确答案，因为他正确指出示例周围的文本表明该类是成员。

还有一些关于堆栈溢出的奇怪格式，我刚刚解决了我原来的问题并在这里重复：为什么他要扩展 Fragment `<T >`？

@Ahmad 回答了那个，但我无法标记两个正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:34:32.880

无法将成员类声明为`static`- 它会发出编译器错误。你的例子**是**关于一个成员类 - 引用[你链接到的页面](http://developer.android.com/guide/topics/ui/actionbar.html)：

> 例如，以下是您可能如何实现[ActionBar.TabListener](http://developer.android.com/reference/android/app/ActionBar.TabListener.html)以便每个选项卡使用其自己的侦听器实例：

所以页面声明，这`TabListener` *是一个成员类*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:35:12.633

根据[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1)，在类的上下文中：

> 修饰符 static 仅适用于成员类（第 8.5.1 节），不适用于顶级或本地或匿名类。

所以你展示的代码只能是嵌套类，不能是顶级类。

另请注意，内部类是非静态嵌套类，因此静态类不能是内部类，只能是嵌套类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:31:49.793

```
what static means here and why should it work? 
```

**如果您不将内部类设为静态，则需要一个封闭类的实例。**.

好吧，听众通常对某些课程是特别的……所以为了凝聚力，最好让他们在课程本身中。

```
why is him extending Fragment with 
```

tablistener 必须在其自身中期待一个对象，该对象必须是 Fragment 的子类型。阅读**泛型**以探索更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T08:34:46.143

这个类肯定是内部的。问号呢，它只是一个通用类型。这意味着这个类使用了一些扩展 Fragment 类型的类型。使用此类时，您只需说`new TabListener<SomeTypeExtendingFragment>()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T08:37:32.457

通常当我们实现一个监听器时，我们使用`this`. 但是，在这种情况下，他们为特定于特定的侦听器创建了一个*内部*`Tab`类。静态类意味着直接访问和创建它，而不是通过创建父类的实例，因此您可以看到它们`TabListener`直接实例化。它也是一个独立的实体，所以它看起来好像是一个独立的类。（事实上​​，你可以不用`static`在另一个文件中定义它。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T08:34:35.353

类是内部的。该关键字`static`只允许用于内部类。

# c++ - 是否可以控制源文件中的 cl.exe 选项？

> ID：11222235
> 
> 赞同：2
> 
> 时间：2012-06-27T08:30:08.217
> 
> 标签：c++, visual-studio

我需要使用 /EHsc 选项编译单元，如何在源文件中为 msvc 设置此选项？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:33:04.600

你不能在你正在编译的同一个源文件中设置编译器选项——在一般情况下，编译器需要在开始处理它*之前进行配置。*

您可以通过使用[命令文件](http://msdn.microsoft.com/en-us/library/x2khzsa1%28v=vs.100%29.aspx)来设置编译器选项，并使用解决方案的项目文件为每个文件设置编译器选项。

# c# - 更改 DropdownList 的选择会触发 CheckBoxList 的 OnSelectedIndexChanged 事件

> ID：11222236
> 
> 赞同：0
> 
> 时间：2012-06-27T08:30:09.043
> 
> 标签：c#, asp.net, drop-down-menu, checkboxlist

基本上我想为网格视图实现一个过滤选项，我有一个包含列名的下拉列表和一个包含该列可用过滤值的复选框列表。每次我选择不同的列时，我都必须将该列的过滤值加载到复选框列表中。我遇到的问题是，当我更改下拉列表中的列时，会触发清单事件并且应用程序崩溃。

我的控件定义如下：

```
<div class="LeftAligned">  
     <asp:Label ID="FilterLabel" runat="server" Text="Filter by:" />  
     <asp:DropDownList runat="server" ID="FilterReviewsDropDownList" AutoPostBack="true" OnSelectedIndexChanged="FilterReviewsDropDownList_SelectedIndexChanged" />  
     <asp:ImageButton ID="FilterReviewsButton" runat="server" ImageUrl="~/images/filter.png" AlternateText="VALUE" CssClass="filter_button" OnClick="FilterReviewsButton_Click" />  
     <div onmouseout="javascript:bMouseOver=false;" onmouseover="javascript:bMouseOver=true;" class="filter_div">  
           <asp:CheckBoxList AutoPostBack="true" ID="FilterReviewsCheckBoxList" ClientIDMode="Static" runat="server" CssClass="filter_checklist collapsed"   
            OnSelectedIndexChanged="FilterReviewsCheckBoxList_Selected">  
           </asp:CheckBoxList>  
     </div>  
     <%--asp:Button runat="server" ID="ApplyFilterButton" Text="Apply Filter" OnClick="ApplyFilterButton_Click"/>  
     <asp:Button runat="server" ID="ClearFilterButton" Text="Clear Filter" OnClick="ClearFilterButton_Click"/--%>  
</div> 
```

在 CodeBehind 文件中，我有以下代码：

```
protected void FilterReviewsButton_Click(object sender, EventArgs e)
{
    FilterReviewsCheckBoxList.CssClass = "filter_checklist";
}

protected void FilterReviewsDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    LoadFilterCheckboxes(FilterReviewsDropDownList.SelectedIndex);
}

private void LoadFilterCheckboxes(int iColumn)
{
    SortedSet<string> oItems = new SortedSet<string>();

    for (int i = 0; i < ReviewsGridView.Rows.Count; i++)
    {
        IEnumerable<Label> oLabels = ReviewsGridView.Rows[i].Cells[iColumn].Controls.OfType<Label>();
        string sValue = "";
        if (oLabels != null && oLabels.Count() > 0)
        {
            sValue = oLabels.First().Text;
        }
        else
        {
            sValue = ReviewsGridView.Rows[i].Cells[iColumn].Text;
        }
        if (!oItems.Contains(sValue))
            oItems.Add(sValue);
    }

    FilterReviewsCheckBoxList.Items.Clear();
    FilterReviewsCheckBoxList.Items.Add("All");
    FilterReviewsCheckBoxList.Items[0].Selected = true;
    foreach (string sItem in oItems)
    {
        FilterReviewsCheckBoxList.Items.Add(sItem);
        FilterReviewsCheckBoxList.Items[FilterReviewsCheckBoxList.Items.Count - 1].Selected = true;
    }
}

protected void FilterReviewsCheckBoxList_Selected(object sender, EventArgs e)
{
    string sResult = Request.Form["__EVENTTARGET"];
    if (string.IsNullOrEmpty(sResult))
    {
        FilterReviewsCheckBoxList.Items[0].Selected = true; //weird bug fix...
        return;
    }

    string[] sCheckedBox = sResult.Split('$');
    //get the index of the item that was checked/unchecked
     int i = int.Parse(sCheckedBox[sCheckedBox.Length - 1].Split('_')[1]);
     if (i == 0)
     {
         if (FilterReviewsCheckBoxList.Items[i].Selected == true)
         {
             for (int j = 1; j < FilterReviewsCheckBoxList.Items.Count; j++)
                 FilterReviewsCheckBoxList.Items[j].Selected = true;
         }
         else
         {
            for (int j = 1; j < FilterReviewsCheckBoxList.Items.Count; j++)
                FilterReviewsCheckBoxList.Items[j].Selected = false;
         }
     }
     else
     {
        if (FilterReviewsCheckBoxList.Items[i].Selected == false)
        {
            FilterReviewsCheckBoxList.Items[0].Selected = false;
        }
        else
        {
            //if (oFirstTable != null)
            //{
            //    oTable = oFirstTable;
            //    oView = oTable.DefaultView;
            //}
            bool bAllChecked = true;
            for (int j = 1; j < FilterReviewsCheckBoxList.Items.Count; j++)
            {
                 if (FilterReviewsCheckBoxList.Items[j].Selected == false)
                 {
                     bAllChecked = false;
                     break;
                 }
            }
            if (bAllChecked)
                 FilterReviewsCheckBoxList.Items[0].Selected = true;
        }
    }
} 
```

知道为什么在更改下拉列表时调用*FilterReviewsCheckBoxList_Selected*（将下拉列表作为发件人参数）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:29:38.097

对于可能遇到相同问题的任何人，解决方法是避免将网格视图静态绑定到实体数据源。相反，在页面加载事件中动态绑定网格。

# objective-c - 在Objective C中模拟抽象类和抽象方法？

> ID：11222237
> 
> 赞同：4
> 
> 时间：2012-06-27T08:30:13.493
> 
> 标签：objective-c, class, methods, virtual, abstract

> **可能重复：**
> [在 Objective C 中创建抽象类](https://stackoverflow.com/questions/1034373/creating-an-abstract-class-in-objective-c)

在 Java 中，我喜欢使用抽象类来确保一堆类具有相同的基本行为，例如：

```
public abstract class A
{
// this method is seen from outside and will be called by the user
final public void doSomething()
{
// ... here do some logic which is obligatory, e.g. clean up something so that
// the inheriting classes did not have to bother with it

reallyDoIt();
}
// here the actual work is done
protected abstract void reallyDoIt();

} 
```

现在如果类 B 继承自类 A，它只需要实现`reallyDoIt()`.

如何在Objective C中做到这一点？有可能吗？在Objective C中可行吗？我的意思是整个范式在Objective C中似乎有所不同，例如，据我所知，没有办法禁止覆盖方法（比如在Java中使用'final'）？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T08:39:02.950

在目标 c 中不覆盖方法没有实际限制。您可以使用 Dan Lister 在他的回答中建议的协议，但这仅有助于强制您的符合类实现该协议中声明的特定行为。

目标 c 中抽象类的解决方案可能是：

```
interface MyClass {

}

- (id) init;

- (id) init {
   [NSException raise:@"Invoked abstract method" format:@"Invoked abstract method"]; 
   return nil;
} 
```

这样，您可以防止调用抽象类中的方法（但仅在运行时，不像 java 这样的语言可以在编译时检测到这一点）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T08:32:25.397

你会想要使用[`Protocols`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)我认为的东西。

# java - 如何将 JPanel 类添加到 netbeans 中的 JFrame 表单类中？

> ID：11222245
> 
> 赞同：-5
> 
> 时间：2012-06-27T08:30:46.370
> 
> 标签：java, swing, jframe, jpanel

我在netbeans中创建了两个类；一个是JPanel形式，另一个是JFrame形式；如何将 JPanel 类添加到 JFrame 表单类中？我在 JFrame 表单类的构造函数中编写了这段代码，但是它没有用。

```
public JFrameClass() {
        initComponents();
        this.getContentPane().add(jpc = new JPanelClass());
        jpc.setVisible(true);
        this.pack();
        this.setVisible(true);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:43:00.500

您需要确保`JPanelClass`从您所在的位置可以看到`JFrameClass`。然后执行以下操作：

```
JPanelClass jpc = new JPanelClass()
this.getContentPane().add(jpc); 
```

此外，无需致电`jpc.setVisible(true);`

结果代码应该是：

```
public JFrameClass() {
        initComponents();
        JPanelClass jpc = new JPanelClass()
        getContentPane().add(jpc);
        pack();
        setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:37:27.130

> 如何将 JPanel 类添加到 netbeans 中的 JFrame 表单类中？

在您的`JFrame`班级中，只需设置您的`JPanel`并将其添加到`Container`.

```
JPanel panel = new JPanelClass();
controls.add(panel); 
```

注意：您应该有一些名为 example 的私有 void 方法`createAndAddCompontents()`并在构造函数中调用它。

```
public JFrameClass() {
   ...
   createAndAddCompontents();
} 
```

然后当你想在 main() 方法中执行你的应用程序时，你应该像这样调用它：

```
SwingUtilities.invokeLater(new Runnable() {
   @Override
   public void run() {
      YouJFrameClass initAndShowComponents = new YouJFrameClass();
      initAndShowComponents.setVisible(true);
}
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:45:45.030

设置 JPanel 的边界，以便容器知道在哪里绘制它

```
 public void run() {
            NewJFrame frame = new NewJFrame();
            NewJPanel panel = new NewJPanel();

            panel.setBounds(0, 0, 200, 200);
            frame.add(panel);
            frame.setVisible(true);
        } 
```

# python - 根据外部列表中的值对列表进行排序（Python）

> ID：11222251
> 
> 赞同：3
> 
> 时间：2012-06-27T08:31:22.713
> 
> 标签：python, list, sorting

这个查询与前面关于[排序的查询有点相关](https://stackoverflow.com/questions/11219770/how-to-sort-the-outer-and-inner-sublist-of-a-nested-list-in-python "排序")

其中，需要对以下列表进行排序，

`data = [[1, .45, 0], [2, .49, 2], [3, .98, 0], [4, .82, 1], [5, .77, 1], [6, .98, 2] ]`

首先像这样通过内部列表的最后一个成员的值，

`[[1, .45, 0], [3, .98, 0],[4, .82, 1], [5, .77, 1], [2, .49, 2], [6, .98, 2]]`

然后在子列表中排序，即首先将列表及其最后一个成员排序为`'0'`使用中间成员作为键，按降序排列，然后是最后一个成员的子列表，`'1'`依此类推。

现在，我不想首先按最后一个成员的值进行排序，而是想根据外部列表中这些元素的顺序进行排序。即如果外部列表是 List_1

```
`List_1 = [2, 0, 1]` 
```

排序应该产生

```
[[2, .49, 2], [6, .98, 2] [1, .45, 0], [3, .98, 0], [4, .82, 1], [5, .77, 1]] 
```

最后，根据中间元素按降序对子列表进行排序应该产生：

```
[ [6, .98, 2],[2, .49, 2],   [3, .98, 0], [1, .45, 0], [4, .82, 1], [5, .77, 1]] 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:37:58.673

[`list.index`](http://docs.python.org/tutorial/datastructures.html#more-on-lists)在密钥中使用：

```
>>> data = [[1, .45, 0], [2, .49, 2], [3, .98, 0], [4, .82, 1],
            [5, .77, 1], [6, .98, 2]]
>>> List_1 = [2, 0, 1]
>>> sorted(data, key=lambda e: (List_1.index(e[2]), -e[1]))
[[6, 0.98, 2], [2, 0.49, 2], [3, 0.98, 0], [1, 0.45, 0],
 [4, 0.82, 1], [5, 0.77, 1]] 
```

# android - Android OpenGL 中的透明纹理

> ID：11222252
> 
> 赞同：0
> 
> 时间：2012-06-27T08:31:35.067
> 
> 标签：android, opengl-es, transparency, textures

我正在尝试在Android中制作一个应用程序，您可以在其中将不同的衣服贴在不同的角色上。为此，我制作了一个正方形，在其上放置了具有透明度的纹理（角色）（这样您就可以看到背景） ，围绕他）然后我添加了另一个方块，其中纹理是一件衣服。问题是两个具有特定纹理的方块都显示了背景，但第二个方块没有显示他身后的方块。

我想我的问题是如何让第二个正方形显示第一个正方形和透明部分的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:04:43.150

使用 Alpha 组件。这增加了像素的透明度。看看这个[链接](http://graphics.wikia.com/wiki/Alpha_blending)，它可以更好地帮助你

# android - NDK 将一个库链接到另一个库“无法加载库：link_image [1966]：1765 无法加载所需的库...”

> ID：11222253
> 
> 赞同：4
> 
> 时间：2012-06-27T08:31:38.030
> 
> 标签：android, android-ndk

首先我想告诉你我想做什么。我有一个 .h 文件和一个 .c 文件，其中包含常用的 C 代码，我用它创建了一个与 Android NDK 的共享库。所以现在我有一个名为 libtry.so 的 .so 文件。此外，我想在我的 Android Eclipse 项目中使用本机代码。所以我用“Counter”类和内容创建了.java文件

```
public native static int Number(int n); 
```

和

```
static
{
   System.loadLibrary("test");
} 
```

然后我使用 javah 工具从 .java 文件创建一个 C 头文件。

之后，我为实现本机代码的 C-Headerfile 创建了一个 C-sourcefile。

然后我用这两个文件创建一个共享库`LOCAL_MODULE := test`，以便将文件命名为`libtest.so`. 但关键是，我想将我一开始创建的共享库 libtry.so 链接到这个共享库。

所以在 libtest.so 的 Android.mk 文件中，我把`LOCAL_LDLIBS := -L/root/Android/Samples/Test/libs/ -ltry`.

实际上这是可行的，因为我可以使用 ndk-build 编译这个 Android.mk 文件。

但是现在在我的 Eclipse 项目中，如果我想使用库 libtest.so 它不起作用。我的意思是如果我创建一个加载库 libtest.so 的“计数器”类的对象，

我得到`error: "Cannot load library: link_image[1966]: 1752 could not load needed library 'libtry.so' for 'libtest.so'"`.

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:36:48.613

您正在将库链接到库。在 Java 代码中，它们必须以相反的顺序显式加载，例如

```
static
    {
        System.loadLibrary("dependencylib"); // try 
        System.loadLibrary("mainlib");       // test
    } 
```

答案取自[这里](https://stackoverflow.com/questions/11058898/loading-shared-libs-that-depend-on-other-shared-libs)

# javascript - jquery倒计时检测何时单位费用

> ID：11222254
> 
> 赞同：1
> 
> 时间：2012-06-27T08:31:41.470
> 
> 标签：javascript, jquery, countdown

我使用来自[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)的倒计时插件，我已经让倒计时功能显示，几个月，几周，几天，几分钟，直到某个日期。我想要做的是尝试在其中一个单位发生变化时添加一个rollodex效果。

但是，我正在努力检测其中一个单位何时发生变化，我需要这样做，以便触发我的动画以获得 rolodex 效果。

下面是我的代码，

```
 $('.clock').countdown({until:new Date(2012, 11, 31), format: 'odHM', onTick: everyMinute, tickInterval: 60, layout:
    '<div id="timer">' +
        '<div id="timer_labels">'+
            '<div id="timer_months_label" class="timer_labels">Months</div>'+
            '<div id="timer_weeks_label" class="timer_labels">Days</div>'+
            '<div id="timer_days_label" class="timer_labels">Hours</div>'+
            '<div id="timer_minutes_label" class="timer_labels">Minutes</div>'+
        '</div>'+
        '<div id="timer_months" class="timer_numbers"><span>{onn}</span></div>'+
        '<div id="timer_days" class="timer_numbers"><span>{dnn}</span></div>'+
        '<div id="timer_hours" class="timer_numbers"><span>{hnn}</span></div>'+
        '<div id="timer_minutes" class="timer_numbers"><span>{mnn}</span></div>'+
    '</div>'
}); 
```

目前我`everyMinute`在 onTick 回调中调用的函数如下所示，

`function everyMinute() {
alert("changing")
}`

我已将刻度间隔设置为 60，这意味着我的 everyMinute 函数每 60 秒调用一次，但是，它似乎每秒被调用一次，我做错了什么？

我已遵循以下文档，

[http://keith-wood.name/countdownRef.html#tickInterval](http://keith-wood.name/countdownRef.html#tickInterval)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:36:24.960

不知道这是否是文档中的错字，但它具有以下语法：

```
onTick: updateEvery10Secs: tickInterval: 10}); 
```

你有：

```
$('.clock').countdown({until:new Date(2012, 11, 31), format: 'odHM', onTick: everyMinute, tickInterval: 60, layout: [...] 
```

这意味着您应该将其更改为：

```
$('.clock').countdown({until:new Date(2012, 11, 31), format: 'odHM', onTick: everyMinute: tickInterval: 60, layout: [...] 
```

# jquery - 旋转木马停止工作

> ID：11222255
> 
> 赞同：2
> 
> 时间：2012-06-27T08:31:41.463
> 
> 标签：jquery, twitter-bootstrap

我不明白为什么，但我的 Bootstrap Carousel 突然停止工作。我希望它开始加载。

来自 Chrome 控制台的错误：

```
 Uncaught TypeError: Object [object Object] has no method 'carousel' :3000/assets/application.js?body=1:18
          (anonymous function) :3000/assets/application.js?body=1:18
         jQuery.Callbacks.fire jquery-1.7.2.js:1076
        jQuery.Callbacks.self.fireWith jquery-1.7.2.js:1194
        jQuery.extend.ready jquery-1.7.2.js:436
        DOMContentLoaded jquery-1.7.2.js:950 
```

在我的 application.js 中：

```
 $('.carousel').carousel({
        interval: 2000
       }) 
```

在我的布局中：

```
 <%= javascript_include_tag 'jquery-1.7.2', 'jquery.validate.min','application' %> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:12:43.053

确保：

*   只有一个 jQuery 只包含一次。

*   包含 bootstrap-carousel.js 或 bootstrap.js（不是两者都包含在 jQuery 之后）。

*   在这里查看评论[https://stackoverflow.com/a/11233713/1416911](https://stackoverflow.com/a/11233713/1416911)（与您的问题相同）

# c# - “string[]”不包含“Cast”的定义

> ID：11222256
> 
> 赞同：9
> 
> 时间：2012-06-27T08:31:41.960
> 
> 标签：c#

我收到错误消息：

> “string[]”不包含“Cast”的定义，并且找不到接受“string[]”类型的第一个参数的扩展方法“Cast”（您是否缺少 using 指令或程序集引用？）

在下面的一段代码上：

```
return mNames.Cast().ToArray(); 
```

我需要什么 using 指令或程序集引用？我怎样才能发现这样的事情？

我是 C# 和 .NET 的菜鸟，我只是复制代码来完成工作，所以不要对我太技术化。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T08:34:17.330

(1) 确保您正在使用 C# 3.0+

(2) 确保您的代码包含：

```
using System.Linq; 
```

(3)`.Cast`是泛型方法，需要指定类型参数，像这样：

```
return mNames.Cast<AnotherType>().ToArray(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T08:34:48.863

当您在`using System.Linq;`文件顶部丢失时，通常会发生这种情况。

您还需要使用 .NET 3.5 或更高版本才能正常工作。`System.Linq`位于程序集 System.Core.dll 中，默认情况下包含在使用 .NET 3.5 或更高版本的项目中。

**编辑**

仔细检查后，该代码将永远不会像编写的那样工作，因为该`Enumerable.Cast()`方法是通用的，并且需要您传入要转换为的类型：例如`mNames.Cast<object>().ToArray();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T08:39:03.197

通常，您`Cast<T>()`使用类型参数调用扩展方法，例如`mNames.Cast<SomeType>()`.

无论如何，`mNames`似乎已经是 a `string[]`，所以你想将它转换成什么？`object`不需要强制转换为，因为可以`object[]`从`string[]`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T07:01:53.667

即使您没有明确使用“Cast”，如果您使用 Linq 表达式并忘记“使用 System.Linq;”，也会出现此编译错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-08T22:27:03.610

利用`primary.AddRange(secondary);`

# hibernate - 在调用负载侦听器时未触发休眠查询

> ID：11222258
> 
> 赞同：1
> 
> 时间：2012-06-27T08:32:00.967
> 
> 标签：hibernate, onload, event-listener

我使用休眠创建了一个简单的 hello-wordish 代码

```
sf = new Configuration().configure().buildSessionFactory();
System.out.println("sessionFactory is built.Get session object");
s = sf.openSession();
Kk emp = (Kk) s.get(Kk.class, 1);
if (null != emp) {
    System.out.println(emp.getId() + " " + emp.getNm());
} else {
   System.out.println("Emp doesn't exist..");
} 
```

这段代码运行良好，并给了我 1 条记录，如下面的控制台所示：-

```
sessionFactory is built.Get session object
Hibernate: select kk0_.id as id0_0_, kk0_.name as name0_0_ from kaushik1 kk0_ where kk0_.id=?
1 kaushik 
```

但是当我通过 hibernate 配置引入一个 Load 事件监听器类时，并没有获取到记录。而是查询本身不会被触发。

我的听众课是：-

```
import org.hibernate.HibernateException;
import org.hibernate.event.LoadEvent;
import org.hibernate.event.LoadEventListener;

public class MyLoadListener implements LoadEventListener {

    public void onLoad(LoadEvent arg0, LoadType arg1) throws HibernateException {
        System.out.println("inside my own onLoad listener");
    }

} 
```

在我的 hibernate.cfg.xml 中，我添加了一行：-

```
<listener type="load" class="com.cts.eventlistener.MyLoadListener"/> 
```

现在，当调用相同的代码时，我可以在控制台上看到：-

```
sessionFactory is built.Get session object
inside my own onLoad listener
Emp doesn't exist.. 
```

为什么调用事件侦听器的 onLoad 时没有调用查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:58:46.900

配置 DefaultLoadEventListener 的需要是位计数器直观的。

在这种情况下，我为那个听众找到了更好的方法。我们应该“扩展” DefaultLoadEventListener，而不是实现 LoadEventListener 接口。我们将覆盖它的 onLoad() 并在其中调用 super.onLoad()。这工作得很好。

```
import org.hibernate.event.LoadEvent;
import org.hibernate.event.LoadEventListener;
import org.hibernate.event.PreLoadEventListener;
import org.hibernate.event.def.DefaultLoadEventListener;

import com.cts.closr.Kk;

public class MyLoadListener extends DefaultLoadEventListener  {

    public void onLoad(LoadEvent arg0, LoadType arg1) throws HibernateException {
        System.out.println("inside my own onLoad listener");
        super.onLoad(arg0, arg1);
    }

} 
```

并且在配置中只配置自定义监听器。

```
<event type="load">
       <listener class="com.cts.eventlistener.MyLoadListener"/>
</event> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:56:26.037

您的自定义侦听器会覆盖实际加载对象的默认侦听器。你需要同时声明它们，见[14.2。事件系统](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/events.html#objectstate-events)。

# asp.net-mvc - Asp.net WebService 函数不返回 JSON

> ID：11222264
> 
> 赞同：1
> 
> 时间：2012-06-27T08:32:07.517
> 
> 标签：asp.net-mvc, json, web-services

我已经阅读了有关此问题的所有帖子，但没有解决问题。如果有人可以帮助我，我会很高兴。

我添加了一个带有 Web 服务的 MVC3 项目。我只有一个名为 Test 的函数，当我通过 HTTP GET 方法（常规 url）调用它时，它以 XML 格式而不是 JSON 返回数据。我怎样才能让它返回 JSON？

网络服务：

```
namespace TestServer
{
    [WebService]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService]
    public class TestWebservice : System.Web.Services.WebService
    {  
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        [WebMethod]
        public List<string> Test()
        {    
            return new List<string>
                {
                    {"Test1"},
                    {"Test2"}
                };                    
        }
    }
} 
```

web.config（仅相关部分）：

```
<configuration>
  <location path="TestWebservice.asmx">
    <system.web>
      <webServices>
        <protocols>
          <add name="HttpGet"/>
        </protocols>
      </webServices>
    </system.web>
  </location>  
  <system.web>
    <webServices>
      <protocols>
        <clear/>
      </protocols>
    </webServices>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx"
        type="System.Web.Script.Services.ScriptHandlerFactory"
        validate="false"/>
    </httpHandlers>
  </system.web>
</configuration> 
```

网址：

```
http://localhost:49740/testwebservice.asmx/Test 
```

结果（这不是我想要的）：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <string>Test1</string>
  <string>Test2</string>
</ArrayOfString> 
```

如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:41:12.757

`application/json`发送请求时需要指定内容类型 HTTP 标头。例如，如果您使用的是 jQuery AJAX，您可以执行以下操作：

```
$.ajax({
    url: '/testwebservice.asmx/Test',
    type: 'GET',
    contentType: 'application/json',
    success: function(result) {
        alert(result.d[0]);
    }
}); 
```

您还需要在`[ScriptMethod]`属性上启用 GET 动词：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
[WebMethod]
public List<string> Test()
{
    return new List<string>
    {
        {"Test1"},
        {"Test2"}
    };
} 
```

您还可以摆脱您在`web.config`此服务中添加的所有内容。这不是必需的。

哦，顺便说一句，经典的 ASMX Web 服务是一种过时的技术。您应该使用更新的技术，例如返回 JSON、WCF 的 ASP.NET MVC 控制器操作，甚至是最前沿的 ASP.NET MVC 4 Web API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:11:42.177

REST 服务根据客户端发送的[Accept](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)标头以特定格式（XML、JSON）序列化数据。它是`Accept`向服务说明客户端可以接受的格式的标头。

当您尝试直接从浏览器 URL 访问服务时，`Accept`标头的值设置为以下默认值（在 firefox 中）

```
text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

上面的标头明确表示我可以接受 html、xhtml 或 xml。由于`application/xml`格式已明确指定，但`application/json`REST 服务未以 xml 格式返回数据。（虽然我不明白有什么用`ResponseFormat = ResponseFormat.Json`）。

因此，如果您想让服务返回 JSON 数据，您必须指定接受标头的相应格式。如果您使用的是 jQuery，您可以使用`$.getJSON()`将接受标头设置为 as`"application/json"`或者您甚至可以`$.ajax`使用`dataType`as `json`。

[http://prideparrot.com/blog/archive/2011/9/returning_json_from_wcfwebapi](http://prideparrot.com/blog/archive/2011/9/returning_json_from_wcfwebapi)

# javascript - ExtJS 商店 reader.read 未找到

> ID：11222265
> 
> 赞同：3
> 
> 时间：2012-06-27T08:32:08.850
> 
> 标签：javascript, extjs, jsonp, extjs4.1

我有这家店：

```
Ext.define("App.store.units.MyStore", {

    extend:'Ext.data.Store',
    requires: "App.model.units.MyModel",

    model: "App.model.units.MyModel",
    id:'myStore',
    pageSize:10,
    proxy: {
        type: 'jsonp',
        url: urls.MyUrl+"/search",
        limitParam: 'undefined',
        startParam: 'offSet',
        pageParam: 'undefined',
        extraParams: {
            searchString: 'a'
        },
        reader: {
            root: 'results.results',
            totalProperty: 'numFound',
            type: 'json'
        }
    }
}); 
```

该请求有效，我得到了预期的响应。

出于某种原因，现在我在浏览器中得到了这个：

```
reader.read is not a function 
```

我不明白问题出在哪里，因为昨天一切正常（我知道这听起来如何，但我真的不知道有什么不同）。

任何可能有帮助的建议？

**编辑**这里也是模型的（动态）定义：

```
function(config){
    try{
        console.log("INIT MODEL");
    Ext.define("App.model.units.MyModel", {
        extend: 'Ext.data.Model',
        fields: config
    });
    } catch(err){
        console.log("Error");
    }
} 
```

此函数在创建商店*之前*`config`运行，并且对象是一个`array`项目`{name: 'value'}`。

我不知道出了什么问题。现在一切似乎在 Firefox 中运行良好，但 IE8 仍然存在该错误（`type:'json'`阅读器中的事件）。我认为阅读器在 IE8 中没有正确安装，但我无法检查它，因为对象没有正确显示在其控制台中（或者我不知道这样做）。为什么没有按应有的方式运行相同的 javascript 代码？

**稍后编辑**由于某种原因，我得到了`reader`唯一有时创建的。这就是问题。有时它只是一个对象，而不是需要的`reader`. 这也发生在 Firefox 中。似乎没有任何模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:12:59.787

我有非常相似的问题。这是有帮助的：

```
Ext.require('App.model.units.MyModel');
//or any other model you use in your store 
```

在创建商店**之前**把它放在某个地方，它就可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T23:28:38.593

需要的配置是一个数组，如 ExtJS 文档中所述：

[http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.Class-cfg-requires](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.Class-cfg-requires)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T12:09:15.150

删除商店字段时出现此错误。我有这个用于网格...

**网格**

```
 columns: [
                {header: "Status", width: 75, sortable: true, dataIndex: 'partystatus'},
                {header: "Name", width: 160, sortable: true, dataIndex: 'partyname'},
                {header: "Fathersname", width: 75, sortable: true, dataIndex: 'fathersname'},
                {header: "Grandfather", width: 75, sortable: true, dataIndex: 'grandfather'},
                {header: "Type", width: 75, sortable: true, dataIndex: 'partytype'}
            ], 
```

以及以下商店：

**店铺**

```
 fields: [
        {name: 'firstName', type: 'string'},
        {name: 'name', type: 'string'},
        {name: 'age', type: 'int'},
        {name: 'eyeColor', type: 'string'}
    ], 
```

我只是删除了商店字段，认为它们是多余的，但我得到了那个错误。

# asp.net - 使用验证控件验证日期？在 Asp.net 中？

> ID：11222266
> 
> 赞同：0
> 
> 时间：2012-06-27T08:32:09.480
> 
> 标签：asp.net

在 Asp.net Web 应用程序中，我试图验证日期不应该是未来日期，仅限今天和过去的日期，使用验证控件，你能帮我吗，我尝试了 javascript，它工作正常，但我想使用验证控制。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:37:38.887

如果我会执行以下操作，我会使用[`CustomValidator`](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.71%29.aspx)then ：[`ServerValidate`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.servervalidate%28v=vs.71%29.aspx)

```
protected void vldCustStartDate_ServerValidate(object source, ServerValidateEventArgs args)
{
   DateTime startDate;

   if (DateTime.TryParse(txtStartDate.Text, out startDate))
   {
       args.IsValid = startDate <= DateTime.Now;
   }
   else
   {
       args.IsValid = false;
   }
} 
```

# iphone - 如何用长按手势开始移动单元格？

> ID：11222275
> 
> 赞同：1
> 
> 时间：2012-06-27T08:32:29.520
> 
> 标签：iphone

我有一个 UITableView，里面有几个 UITableViewCells。我想长按一个单元格以开始移动它并按住它并拖动以移动它。但我不知道怎么做。

我在表格视图上添加了一个长按手势，当用户长按时，将表格视图的编辑设置为是：

```
UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] 
                                                     initWithTarget:self
                                                     action:@selector(handleTableViewLongPress:)];
[_tableView addGestureRecognizer:longPressRecognizer];

- (void)handleTableViewLongPress:(UILongPressGestureRecognizer *)gesture
{
    if (gesture.state != UIGestureRecognizerStateBegan)
        return;
    [_tableView setEditing:YES];
} 
```

并且 tableview 可以使用两种方法移动单元格：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    //update datasource
} 
```

但是使用这些代码，用户必须使用两次触摸来移动单元格：一个是将 tableview 设置为编辑状态，另一个是移动单元格。我想要的是允许用户使用一键来做到这一点。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:41:50.620

我找到了这个 UITableView 子类：[移动表格视图](http://cocoacontrols.com/platforms/ios/controls/fmmovetableview)

# freebase - Freebase：使用 MQL 查找相关主题

> ID：11222283
> 
> 赞同：2
> 
> 时间：2012-06-27T08:33:01.480
> 
> 标签：freebase, mql

在 Freebase 网站的主题页面上，他们有一个名为“相关主题”的部分。例如，在[玩具总动员](http://www.freebase.com/view/en/toy_story)的情况下，它有：玩具总动员 2、汽车、海底总动员和怪物公司

我已经阅读了查询编辑器、手册、Stack Overflow 和 Google 中的示例，但我找不到在 MQL 中复制这些示例的方法。有谁知道如何在 MQL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:08:18.670

这是一个仅限 Freebase 的内部功能，不向公众提供（此外，当网站“很快”重新启动时，它就会消失）。

Freebase 工作人员之前曾说过，如果您希望公开提供此功能，您应该在[Freebase JIRA上提交请求，但他们似乎更多地将错误跟踪器用作比特桶而不是其他任何东西。](http://bugs.freebase.com/secure/Dashboard.jspa)

# php - PHP mySQL 类似函数而不是 LIKE

> ID：11222287
> 
> 赞同：0
> 
> 时间：2012-06-27T08:33:17.077
> 
> 标签：php, mysql, sql-like

我正在寻找可以得到 20 个最相似结果的 SQL 函数。如果结果完全不同，我仍然希望它从最相似的开始获取 20 个结果。

LIKE 参数似乎正在寻找对当前变量过于严格的匹配项，目前在此示例查询中仅获取 2 个结果。

```
$sims = mysql_query("SELECT * FROM electors 
                     WHERE constituency = '$constituency' AND ward = '$ward' 
                     AND surname LIKE '$surname'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:38:23.767

您可以使用不那么严格的`LIKE`with which。`%`例如`surname LIKE '%apple%'`，将返回中间有苹果词的字段，如 pineapple、apple123 或 pineapple123。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:37:01.810

要获得 mysql 中的“相似”，您可以进行全文查询（[http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)）

# java - Java：在双重检查习语中使用局部变量

> ID：11222291
> 
> 赞同：3
> 
> 时间：2012-06-27T08:33:42.353
> 
> 标签：java

Josh Bloch 提到在双重检查习语中使用局部变量可能会提高性能（EJ，第 2 版 p284），并说示例代码在他的机器上运行速度比没有局部变量的速度快 25%。所以问题是，为什么它更快？在局部变量版本的情况下，它访问实例变量 3 次，在正常情况下它访问实例变量 4 次。这是“25%”增长背后的原因还是还有其他原因？

编辑：只有在第一次创建实例时才能访问 3 或 4 次。此后，它是1或2次。

EDIT2：检查此问题的已接受答案以查看示例代码。我认为这是针对 Java 6 的。[如何解决 Java 中的“双重检查锁定已损坏”声明？](https://stackoverflow.com/questions/3578604/how-to-solve-the-double-checked-locking-is-broken-declaration-in-java)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:44:01.783

基本的事情是访问`volatile`变量比访问本地变量要慢。当你声明一个局部变量时，你基本上是在方法中*缓存*一个 volatile 变量的值。

在正常（没有局部变量）情况下，您正在访问 volatile 变量：

1.  在第一个子句`if`之前`synchronized`
2.  在第二个子句`if`里面`synchronized`
3.  `if`在您为其分配值的第二个内部
4.  在`return`声明中

现在，如果你引入一个局部变量，你只能访问该`volatile`变量 3 次：

1.  为子句`if`之前的第一个分配局部变量时`synchronized`
2.  为子句`if`内的第二个分配局部变量时`synchronized`
3.  `if`在您为其分配值的第二个内部

您不会`return`通过返回局部变量在语句中访问它，从而提高速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:57:00.640

在正常情况下（已经初始化），只有*一次*读取 volatile 变量（相对昂贵）。我猜在这台机器上，这相当于他看到的减少。使用正常方法（即不使用局部变量），有两个读取（一个用于 the `if`，一个用于`return`.）

# gridview - 使用 ExtJS 完全加载网格后的过程

> ID：11222295
> 
> 赞同：11
> 
> 时间：2012-06-27T08:34:03.320
> 
> 标签：gridview, extjs, event-handling, extjs4

我正在使用 ExtJS 将数据加载到网格中，并且我想在数据完全放入网格后添加一些额外的过程。

我的上下文是，在将数据放入网格后，我将检查所有行，并根据指定的条件将其中一些标记为禁用，并将工具提示放在行中（解释为什么它被禁用）。我尝试使用 2 个事件：Grid 的“afterrender”和 grid 的 store 的“load”，但它们不起作用。

因为`grid's 'afterrender'`在第一次网格初始化时被触发，不关心数据加载。`store's 'load'`当数据被预取以存储（不在屏幕上呈现）时被触发，因此我无法将行`<div>`设置为禁用。

那么，检测数据何时加载并完全呈现在网格上的事件是什么？我该如何实现这个要求？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:21:30.307

你试过[`viewready`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-event-viewready)吗？

```
Ext.create('Ext.grid.Panel', {
    // ...
    viewConfig: {
        listeners: {
            viewready: function(view) {
                // ...
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T20:58:53.153

您可以直接点击商店的`load`活动，或通过网格转发活动。

在网格类内部，可能在`initComponent`函数中，放入以下内容，

```
this.relayEvents(this.getStore(), [ 'load' ]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T18:44:07.020

我认为对于您的任务，您不需要等到加载网格，而是使用`viewConfig`网格面板的选项来配置如何准确地显示您的行：

```
viewConfig: {
   getRowClass: function(r) {
      if (r.get('disabled'))
         return 'disabled-class';
      else 
         return '';
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T11:45:48.787

如果您使用该`setTimeout`函数，它将强制在渲染完成后进行调用，它在与您的情况类似的情况下工作。

```
listeners: {
     'afterrender': function(grid) {
          setTimeout(function(){
          // ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-02T11:28:44.160

我意识到这是一个老问题，但我最近不得不修复一个旧的 ExtJS (4.0.2) 应用程序中的滚动问题，我需要一个触发器/事件来处理 html（例如 <table> 标签）实际上被更新/插入到网格视图。

以下脚本将新的“更新”事件添加到 Ext.grid.View。将 html 插入视图后会触发 update 事件。

```
(function(){
    var _setNewTemplate = Ext.grid.View.prototype.setNewTemplate; 
    Ext.override(Ext.grid.View, {
        setNewTemplate: function(){

            _setNewTemplate.apply(this, arguments);

            var view = this;
            var template = this.tpl;
            template.overwrite = function(el, values, returnElement){ 
                el = Ext.getDom(el);
                el.innerHTML = template.applyTemplate(values);
                view.fireEvent("update", view, el); //<--New Event!
                return returnElement ? Ext.get(el.firstChild, true) : el.firstChild;
            };

            template.doInsert = function(where, el, values, returnEl) {
                el = Ext.getDom(el);
                var newNode = Ext.core.DomHelper.insertHtml(where, el, template.applyTemplate(values));
                view.fireEvent("update", view, el); //<--New Event!
                return returnEl ? Ext.get(newNode, true) : newNode;
            }

        }
    });
})(); 
```

要使用新事件，您只需将新事件侦听器添加到网格视图。例子：

```
paymentGrid.view.on("update", function(view, el){ //vs paymentGrid.store.on("load", ...

    //do something...
    console.log(el);

}, this); 
```

请注意，这是使用 ExtJS 4.0.2 实现的。您可能需要为您的 ExtJS 版本更新脚本。

**更新**

我发现当视图呈现空商店时，新的“更新”事件没有触发。作为一种解决方法，我扩展了视图的刷新方法。

```
(function(){
    var _refresh = Ext.grid.View.prototype.refresh;
    Ext.override(Ext.grid.View, {
        refresh: function() {
            _refresh.apply(this, arguments);                

            var view = this;
            var el = view.getTargetEl();
            var records = view.store.getRange();

            if (records.length < 1) {                    
                view.fireEvent("update", view, el); //<--New Event!
            }
        }
    });
})(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T09:28:26.563

使用 getForm().load() 上的 success: 属性调用函数来处理加载后处理

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T06:23:40.093

`viewready`为我工作！

在控制器中配置如下：

```
Ext.define('App.controller.Dashboard', {
  extend: 'Ext.app.Controller',
  init: function() {
    this.control({
        '#summary-bottom-grid': {
            viewready: function(cmp){
                var link = Ext.DomQuery.selectNode('span.summary-status',cmp.body.dom);
            }
          }
     });    
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-10T21:40:01.230

我使用 extjs 4.2.3，这很有效。

我用这个：

```
this.grid = Ext.create('Ext.grid.Panel',{
     store: this.ds,
     margins: '0 0 0 10', // top right button left
     title: lng.menu.caption.mailHeaderGrid,
     selType: 'checkboxmodel',
     columns:[...],
     selModel: {
         renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
             var baseCSSPrefix = Ext.baseCSSPrefix;
             metaData.tdCls = baseCSSPrefix + 'grid-cell-special ' + baseCSSPrefix + 'grid-cell-row-checker';
             return (record.get('status') =='lng.label.surveyFinalized') ? '' : '<div class="' + baseCSSPrefix + 'grid-row-checker"> </div>';
         },
     }, 
```

对我来说，在 chrome 上工作！

[https://www.sencha.com/forum/showthread.php?237641-How-to-hide-certain-checkbox-in-a-CheckboxSelectionModel](https://www.sencha.com/forum/showthread.php?237641-How-to-hide-certain-checkbox-in-a-CheckboxSelectionModel)

# jboss - 如何在 JBoss AS 6.1 上升级 Netty？

> ID：11222296
> 
> 赞同：0
> 
> 时间：2012-06-27T08:34:06.080
> 
> 标签：jboss, netty, jboss6.x

如何在 JBoss AS 6.1 上升级 Netty？

你只是更换netty jar吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:35:19.627

我们真的努力保持向后兼容性。所以是的，只需更换罐子就可以了

# string - Ocaml中最长的公共子序列

> ID：11222299
> 
> 赞同：-3
> 
> 时间：2012-06-27T08:34:15.853
> 
> 标签：string, ocaml, lcs

有人知道如何在 Ocaml 语言中找到一组字符串的最长公共子序列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:45:27.120

查看标记为“lcs”的其他问题，例如[Longest common subsequence of 3+ strings](https://stackoverflow.com/questions/5057243/longest-common-subsequence-of-3-strings)。然后你应该能够在 OCaml 中编写代码。

# c# - 仅在一台机器上打开对话框时，应用程序有时会崩溃

> ID：11222305
> 
> 赞同：1
> 
> 时间：2012-06-27T08:34:22.930
> 
> 标签：c#, .net, windows-xp

所以这是一个奇怪的错误。在我们的一位客户 (Windows XP SP3) 的一台机器上，我们的程序在尝试通过 ShowDialog() 打开过滤器对话框时崩溃。

会发生什么：用户按预期工作，他/她没有做任何不正常或错误的事情，并且他/她所做的一切都在几台机器上进行了测试（范围从 Win XP 32 位到 Win 7 64 位）。

现在，过了一段时间，他/她想要使用过滤器对话框（他/她当时做了十几次）并且应用程序崩溃了。您会从 Windows XP 中收到精彩的“$applicationname 导致问题并必须终止”消息，在它下方您可以看到过滤器对话框，部分构建（意思是：您可以看到窗口、滚动条和透明的“洞”，其中文本控件/标签应该是。

在 Windows 事件查看器中，您可以看到这样的条目

> 事件 ID：1000 源：.NET 运行时 4.0 错误重新*（也许这背后有什么东西，它说“报告”？！）*
> 
> 错误应用程序 $applicationname.exe，版本 $versionnumber，标记 $someRandomNumbers，错误模块 ntdll.dll，版本 5.1.2600.6055，标记 4d00f27b，调试？0，错误地址 0x00446da

现在，让我感到奇怪的是：通过 ShowDialog 打开对话框的位置嵌入在 2(!) try...catch 块中。应用程序如何崩溃？甚至没有关于这次崩溃的日志文件条目（我们在该程序中的每个 catch 块中都完成了一些事情，并且它始终是我们做的第一件事）。

我已经从那台机器上卸载了应用程序和 .NET 4，再次重新启动安装了所有内容，安装了 Windows 更新并再次重新启动。结果相同。

*edit 刚刚注意到一些事情：当我关闭来自 microsoft 的消息时，会在 eventviewer 中创建一个附加条目：

> 由于未处理的异常，该过程被终止*我猜这就是英语的意思，因为原始消息是我必须翻译的另一种语言*
> 
> 异常代码：c015000f，地址 7c9546DA*地址始终相同*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T07:24:02.093

As @Hans said, it's caused by incorrect use of the De/ActivateActCtx winapi functions.

I met the same problem when I write a VB App. using my ActiveX Contrl(MFC). I place a dialog variant in the control class definition. Like below:

```
CMyDlg dlg; 
```

So when does the dialog initilized is not in my control. And that made the same issue as you. When the control should be displayed, the error appears.

# php - memcached 满时如何替换数据，memcache 性能如何？

> ID：11222309
> 
> 赞同：9
> 
> 时间：2012-06-27T08:34:31.897
> 
> 标签：php, performance, memcached

从 memcached 维基：

> 当表已满时，后续插入会导致按最近最少使用 (LRU) 顺序清除较旧的数据。

我有以下问题：

1.  哪些数据将被清除？插入较旧的那个，还是最近最少使用的那个？我的意思是，如果最近访问的数据是`d1`最旧的插入数据，并且缓存已满，同时替换数据会被替换`d1`吗？

2.  我正在使用 PHP 与 memcached 交互。我可以控制如何在 memcached 中替换数据吗？就像我不希望我的一些数据在过期之前被替换，即使缓存已满。不应替换此数据，而是可以删除其他数据以进行插入。

3.  数据过期后是否立即删除？

4.  存储的键数量对 memcached 性能有什么影响？

5.  `-k`option in的意义是什么`memcached.conf`？我无法理解“锁定所有分页内存”是什么意思。此外，README 中的描述是不够的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T10:15:33.217

当 memcached 需要在内存中存储新数据，而内存已经满时，会发生这样的情况：

*   memcached 搜索一个合适的*过期条目，如果找到，它将替换该条目中的数据。哪个回答了第 3 点）数据不会立即删除，但是当应该设置新数据时，会重新分配空间
*   如果没有找到过期的条目，则替换最近最少使用的条目

*请记住 memcached 是如何处理内存的：它分配不同大小的块，因此您要在缓存中设置的数据大小在决定删除哪个条目时发挥作用。条目为 2K、4K、8K、16K 等，最大尺寸为 1M。

所有这些信息都可以[在文档](http://code.google.com/p/memcached/wiki/NewUserInternals)中找到，因此请仔细阅读。正如@deceze 所说，memcached 不保证数据将在内存中可用，您必须为缓存未命中风暴做好准备。避免错过风暴的一种有趣方法是使用一些随机偏移设置过期时间，例如 10 + [0..10] 分钟，这意味着一些项目将存储 10 分钟，而其他项目将存储 20 分钟（目标是并非所有项目同时过期）。

如果你想在缓存中保留一些东西，你必须做两件事：

*   一个预热脚本，它要求缓存加载数据。所以它总是最近使用
*   物品的 2 个过期时间：一个真实的过期时间，比如说 30 分钟；另一个 - 与项目一起缓存 - 逻辑到期时间，比方说 10 分钟。当您从缓存中检索数据时，您会检查逻辑过期时间以及是否过期 - 重新加载数据并将其在缓存中再设置 30 分钟。这样你就永远不会碰到真正的缓存过期时间，并且数据会定期刷新。

> 5）“memcached.conf”中的-k选项有什么意义。我无法理解“锁定所有分页内存”是什么意思。README 中的描述也是不够的。

无论您为 memcached 分配多少内存，它都只会使用它需要的数量，例如，它只分配实际使用的内存。但是，使用该`-k`选项，在启动 memcached 时会保留整个内存，因此无论是否需要，它总是分配全部内存

# c# - 这是否可以创建一个可由 TrueCrypt 和 C# 访问但不可见的分区？

> ID：11222315
> 
> 赞同：1
> 
> 时间：2012-06-27T08:34:41.200
> 
> 标签：c#, hidden, truecrypt, disk-partitioning

我在 CD/DVD 中有一个文件夹，并希望使其内容不可见、可访问和加密。所以我决定使用 TrueCrypt 将该文件夹作为加密的隐藏卷。但是使用这种方法，用户可以在安装后看到新卷的内容。所以我想知道这是否可以使安装的卷可访问但不可见？并且有没有其他解决方案可以通过 C# 编程来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:05:18.430

是的你可以。只需要编写一些代码来生成隐藏 truecrypt 驱动器的注册表文件。例如，我将隐藏 truecrypt 驱动器称为`Z:`. 首先，打开记事本并输入此代码。

```
Windows 注册表编辑器版本 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]
“无驱动器”=十六进制：00,00,00,02

```

然后将此文件名另存为`hideZ.reg`. 然后你双击这个文件并重新启动你的电脑。完成重启后，驱动`Z:`（truecrypt驱动在我的电脑中是不可见的）。重要的是你的 truecrypt 驱动器号是`Z:`.

# java - 如何将 Joda 库的 DateTime 舍入到最接近的 X 分钟？

> ID：11222316
> 
> 赞同：29
> 
> 时间：2012-06-27T08:34:41.243
> 
> 标签：java, datetime, jodatime

如何将图书馆轮到最近的`DateTime`分钟？ 例如：`Joda``X`

```
X = 10 分钟
6 月 27 日 11:32 -> 6 月 27 日 11:30
6 月 27 日 11:33 -> 6 月 27 日 11:30
6 月 27 日 11:34 -> 6 月 27 日 11:30
6 月 27 日 11:35 -> 6 月 27 日 11:40
6 月 27 日 11:36 -> 6 月 27 日 11:40
6 月 27 日 11:37 -> 6 月 27 日 11:40

```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-09T13:11:08.167

接受的答案不能正确处理设置了秒或毫秒的日期时间。为了完整起见，这里有一个可以正确处理的版本：

```
private DateTime roundDate(final DateTime dateTime, final int minutes) {
    if (minutes < 1 || 60 % minutes != 0) {
        throw new IllegalArgumentException("minutes must be a factor of 60");
    }

    final DateTime hour = dateTime.hourOfDay().roundFloorCopy();
    final long millisSinceHour = new Duration(hour, dateTime).getMillis();
    final int roundedMinutes = ((int)Math.round(
        millisSinceHour / 60000.0 / minutes)) * minutes;
    return hour.plusMinutes(roundedMinutes);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-27T18:52:43.203

使用纯 DateTime (Joda) Java 库：

```
DateTime dt = new DateTime(1385577373517L, DateTimeZone.UTC);
// Prints 2013-11-27T18:36:13.517Z
System.out.println(dt);

// Prints 2013-11-27T18:36:00.000Z (Floor rounded to a minute)
System.out.println(dt.minuteOfDay().roundFloorCopy());

// Prints 2013-11-27T18:30:00.000Z (Rounded to custom minute Window)
int windowMinutes = 10;
System.out.println(
    dt.withMinuteOfHour((dt.getMinuteOfHour() / windowMinutes) * windowMinutes)
        .minuteOfDay().roundFloorCopy()
    ); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-27T08:56:50.140

我曾经破解过这个方法来做类似的事情。它没有以任何方式进行优化，但它做了我当时想要的。从来没有在任何生产环境中做到过，我不能告诉你任何关于性能的事情。

```
@Test
     public void test() {
         System.out.println(roundDate(new DateTime().withMinuteOfHour(13)));
         System.out.println(roundDate(new DateTime().withMinuteOfHour(48)));
         System.out.println(roundDate(new DateTime().withMinuteOfHour(0)));
         System.out.println(roundDate(new DateTime().withMinuteOfHour(59)));
         System.out.println(roundDate(new DateTime().withMinuteOfHour(22)));
         System.out.println(roundDate(new DateTime().withMinuteOfHour(37)));
     }

    private DateTime roundDate(final DateTime dateTime) {
        final double minuteOfHour = dateTime.getMinuteOfHour();
        final double tenth = minuteOfHour / 10;
        final long round = Math.round(tenth);
        final int i = (int) (round * 10);

        if (i == 60) {
            return dateTime.plusHours(1).withMinuteOfHour(0);
        } else {
            return dateTime.withMinuteOfHour(i);
        }

    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-09-06T16:04:09.117

这是另一种在 Unix 时间上使用算术来保证完整性的方法：

（为了清楚起见，在 Scala 中实现。）

```
import org.joda.time.{DateTime, Duration}

def roundDateTime(t: DateTime, d: Duration) = {
  t minus (t.getMillis - (t.getMillis.toDouble / d.getMillis).round * d.getMillis)
} 
```

示例用法：

```
roundDateTime(new DateTime("2013-06-27T11:32:00"), Duration.standardMinutes(10))
// => 2013-06-27T11:30:00.000+02:00

roundDateTime(new DateTime("2013-06-27T11:37:00"), Duration.standardMinutes(10))
// => 2013-06-27T11:40:00.000+02:00 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-06T11:07:34.690

当您想对[Joda DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)进行舍入时，恕我直言，最好的解决方案是使用内置`roundHalfCeilingCopy`和`roundHalfFloorCopy`方法：

```
DateTime dateTime = DateTime.now();
DateTime newDateTime = dateTime.minuteOfHour().roundHalfCeilingCopy(); 
```

请注意，`roundHalfCeilingCopy`如果半途而废，这将有利于天花板。你可以用`roundHalfFloorCopy`它来保护地板，以防它在中途。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-11T19:38:42.530

我有一个 LocalTime 类的功能，但我认为很容易为您的案例采用我的示例：

（科特林语言）

```
fun LocalTime.round(roundValue: Int): LocalTime {
    val timeInMillis = this.millisOfDay
    val remainder = timeInMillis % roundValue
    return when {
        remainder < (roundValue / 2) -> LocalTime.fromMillisOfDay((timeInMillis - remainder).toLong())
        else -> LocalTime.fromMillisOfDay((timeInMillis + (roundValue - remainder)).toLong())
    }
} 
```

和用法：

```
var userWakeTime = LocalTime(6, 42)
userWakeTime = userWakeTime.round(15 * 60 * 1000) // userWakeTime = 6:45 
```

# iphone - 令人困惑的数组

> ID：11222324
> 
> 赞同：-2
> 
> 时间：2012-06-27T08:35:38.583
> 
> 标签：iphone, ios, xcode

对iOS有点新，我也在学习Android。对数组有点困惑。

如何将其转换为 iOS：

`result`作为索引

`nextresult[x]`索引数组

```
for(x = 0; x < array.size; x++)
{
   if(result < nextresult[x])
         nextresult[x] -= 1; 
} 
```

如果需要调整，它将检查数组的所有内容，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:42:08.477

可能关注会给你一些想法 - 正如你提到的，我已经考虑关注 - `result' is value and`nextresult`是数组。

```
for(x = 0; x < [array count]; x++)
{
   if(result < [nextresult objectAtIndex:x]) {
       [nextresult objectAtIndex:x] -= 1; 
    }
} 
```

编辑 - 如果你想在数组中添加整数 -

```
[yourArray addObject:[NSNumber numberWithInt:1]]; // Objective C array store objects. so we need to convert primitive data type into object. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:52:39.300

阅读 Apple 优秀的开发人员文档。

[您可以在此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)或在您的 Xcode 管理器中找到有关 NSArray 类的文档。

我对您的问题投了反对票，因为只需查看文档就可以很容易地解决它。

# gwt - GWT Maven 托管模式

> ID：11222331
> 
> 赞同：1
> 
> 时间：2012-06-27T08:36:07.280
> 
> 标签：gwt, maven

经过一些尝试，我无法使托管模式与 maven 一起使用。我的 pom.xml 如下，我使用的是标准的 maven 结构：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.4.0</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>i18n</goal>
                        <goal>generateAsync</goal>
                    </goals>
                </execution>
            </executions>

            <configuration>
                <draftCompile>true</draftCompile>
                <strict>true</strict>
                <inplace>false</inplace>
                <runTarget>project.html</runTarget>
                <style>${gwt.style}</style>
                <i18nMessagesBundle>com.domain.client.i18n.Messages</i18nMessagesBundle>
                <i18nConstantsBundle>comdomain.client.properties.ClientProperties</i18nConstantsBundle>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>exploded</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:40:51.950

**`<outputDirectory>`**我注意到build 和 **`<module>`**gwt-maven-plugin 配置下缺少两个标签。

另请参考 - [http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/dynatablerf/pom.xml](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/dynatablerf/pom.xml)

```
 <build>
    <!-- Generate compiled stuff in the folder used for development mode -->
    <outputDirectory>${project.build.directory}/${project.build.finalName}/WEB-INF/classes</outputDirectory>

    <plugins>

      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
        <dependencies>
          <!-- Need to run the RF Validation tool. This works on both the command-line
               and in Eclipse, provided that m2e-apt is installed. -->
          <dependency>
            <groupId>com.google.web.bindery</groupId>
            <artifactId>requestfactory-apt</artifactId>
            <version>${gwtVersion}</version>
          </dependency>
        </dependencies>
      </plugin>

      <!-- GWT Maven Plugin-->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>        
        <version>2.5.0</version>
        <dependencies>
          <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwtVersion}</version>
          </dependency>
          <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-dev</artifactId>
            <version>${gwtVersion}</version>
          </dependency>
        </dependencies>
        <!-- JS is only needed in the package phase, this speeds up testing -->
        <executions>
          <execution>
            <phase>prepare-package</phase>
            <goals>
              <goal>compile</goal>
              <goal>i18n</goal>
              <goal>generateAsync</goal>
             </goals>
          </execution>
        </executions>

        <!-- Plugin configuration. There are many available options,
             see gwt-maven-plugin documentation at codehaus.org -->
        <configuration>
          <draftCompile>true</draftCompile>
          <strict>true</strict>
          <inplace>false</inplace>
          <!-- URL that should be automatically opened in the GWT shell (gwt:run). -->
          <runTarget>project.html</runTarget>
          <style>${gwt.style}</style>
          <i18nMessagesBundle>com.domain.client.i18n.Messages</i18nMessagesBundle>
          <i18nConstantsBundle>comdomain.client.properties.ClientProperties</i18nConstantsBundle>         
          <!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) -->
          <compileReport>true</compileReport>
          <module>youR.gwt.ModuleName</module>
          <logLevel>INFO</logLevel>
          <copyWebapp>true</copyWebapp>
        </configuration>
      </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T01:07:41.243

这是我今天在演示文稿中使用的 POM，如果您想比较它们，它可以工作：[https](https://github.com/checketts/gwt-spring-demo/blob/master/pom.xml) ://github.com/checketts/gwt-spring-demo/blob/master/pom.xml 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:55:18.253

尝试添加这些配置条目：

```
<warSourceDirectory>${basedir}/src/main/webapp</warSourceDirectory>                          
<webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
<hostedWebapp>${basedir}/src/main/webapp</hostedWebapp> 
```

最后一个可能是真正需要的

# css - 如何在 Visual Studio 2012 的运行时反映对 CSS 的更新？

> ID：11222333
> 
> 赞同：1
> 
> 时间：2012-06-27T08:36:16.347
> 
> 标签：css, sass, microsoft-metro, compass-sass, visual-studio-2012

我正在开发适用于 Windows 8 的 Metro 应用程序并使用 MS Visual Studio 2012。目前我正在使用 SASS 和 Compass 在保存 SCSS 文件时自动将 SCSS 转换为 CSS。

我想要的是能够在运行时更改 CSS。那是; 我想在我的右侧屏幕上打开 SCSS 文件，当我对其进行更改时，左侧屏幕上正在运行的应用程序会显示更改。目前我必须在 Visual Studio 中刷新应用程序，但这不会保留状态。

所以总结一下：

*   我已经成功安装了 Compass 和 SASS。当我更改 SCSS 文件时，会正确重新生成 CSS 文件（包含在项目中）
*   我正在运行的应用程序未反映 CSS 文件中所做的更改。我需要重新加载应用程序才能显示更改。
*   我希望能够在运行时看到更改。

非常感谢任何建议或帮助！如果需要，我愿意转换为 LESS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:44:17.753

[Mindscape 的Web Workbench](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)是另一个根据您的 SCSS 自动生成 CSS 的工具。我不确定它是否能解决您在运行时反映更改的问题，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:59:07.777

Microsoft Visual Studio 11 附带了一个名为 Blend（以前的 Expression Blend）的应用程序。在 Visual Studio 中，您可以通过在解决方案资源管理器中右键单击项目并选择“在 Blend 中打开”来打开项目。

在 Blend 中，可以使用所谓的“[交互模式](http://msdn.microsoft.com/en-us/library/windows/apps/jj129413%28v=vs.110%29.aspx)”来切换应用程序中的状态，然后冻结它们以进行 CSS 更改。即使状态被冻结，在 Blend 中所做的 CSS 更改也会自动显示。

可能还希望激活在更改时混合重新加载文件而不提示的选项。这样就可以在 Blend 中实时查看使用 SASS 所做的更改。一个缺点是 Blend 需要获得焦点才能重新加载 CSS 文件。好处是它不会重置状态信息，因此可以轻松地设置弹出窗口和对话框的样式。

也可以选择使用内置的 GUI 轻松更改 CSS。这样做的问题是 Blend 不支持 SCSS，因此您必须将使用 Blend 生成的修改后的 CSS 复制到适当的 SCSS 文件中。

更多关于 Blend 和 VS11[的信息](http://blendinsider.com/news/visual-authoring-for-the-windows-8-consumer-preview-with-blend-and-visual-studio-2012-02-29/)。

# html - 如何将所有“LF”字符转换为“ ”标签并在 HTML 页面上显示

> ID：11222334
> 
> 赞同：2
> 
> 时间：2012-06-27T08:36:17.600
> 
> 标签：html, xml, xslt, xpath, xslt-2.0

如何将所有`LF`字符转换为`<br />`标签并在 HTML 页面上显示？

我有以下示例 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="data.xslt"?>
<data>
<lines>
Line 1
Line 2
Line 3
Line 4
Line 5
Line 6
</lines>
</data> 
```

我想在 HTML 页面上显示所有行。为此，我使用以下 XSLT 转换：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="1.0" encoding="utf-8" indent="yes"/>
    <xsl:template match="/">
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
            </head>
            <body>
                <xsl:variable name="filtered">
                    <xsl:call-template name="replace">
                        <xsl:with-param name="string" select="./data/lines"/>
                        <xsl:with-param name="search" select="'&#xA;'"/>
                        <xsl:with-param name="new"><br /></xsl:with-param>
                    </xsl:call-template>
                </xsl:variable>
                <td align="left">
                    <xsl:value-of select="$filtered" disable-output-escaping="yes"/>
                </td>
            </body>
        </html>
    </xsl:template>
    <xsl:template name="replace">
        <xsl:param name="string"/>
        <xsl:param name="search"/>
        <xsl:param name="new"/>
        <xsl:choose>
            <xsl:when test="contains($string, $search)">
                <xsl:value-of select="substring-before($string, $search)"/>
                <xsl:value-of select="$new"/>
                <xsl:call-template name="replace">
                    <xsl:with-param name="string" select="substring-after($string, $search)"/>
                    <xsl:with-param name="search" select="$search"/>
                    <xsl:with-param name="new" select="$new"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$string"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

当我在 Firefox 中打开该 XML 文件时（我使用浏览器显示 XSLT 转换），我将看到该结果：

```
Line 1Line 2Line 3Line 4Line 5Line 6 
```

如您所见，`LF`字符没有被`<br />`标签替换。

但是当我使用其他字符串时，例如`EOL`：

```
<xsl:with-param name="new">EOL</xsl:with-param> 
```

我会看到预期的结果：

```
EOLLine 1EOLLine 2EOLLine 3EOLLine 4EOLLine 5EOLLine 6EOL 
```

问题在于转换/显示`<br />`标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:50:45.160

您可以像使用 一样将节点片段作为参数值传递`<xsl:with-param name="new"><br /></xsl:with-param>`，但是要将其作为模板中的元素输出，`br`您需要使用`<xsl:copy-of select="$new"/>`，而不是`xsl:value-of`。

[编辑] 这是一个例子：[http](http://home.arcor.de/martin.honnen/xslt/test2012062801.xml) ://home.arcor.de/martin.honnen/xslt/test2012062801.xml 。样式表位于[http://home.arcor.de/martin.honnen/xslt/test2012062801.xsl](http://home.arcor.de/martin.honnen/xslt/test2012062801.xsl)，我还将在下面包含它：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="4.01" encoding="utf-8" indent="yes"/>
    <xsl:template match="/">
        <html>
            <head>
              <title>Example</title>
            </head>
            <body>
                <xsl:variable name="filtered">
                    <xsl:call-template name="replace">
                        <xsl:with-param name="string" select="data/lines"/>
                        <xsl:with-param name="search" select="'&#xA;'"/>
                        <xsl:with-param name="new"><br /></xsl:with-param>
                    </xsl:call-template>
                </xsl:variable>
                <div>
                    <xsl:copy-of select="$filtered"/>
                </div>
            </body>
        </html>
    </xsl:template>
    <xsl:template name="replace">
        <xsl:param name="string"/>
        <xsl:param name="search"/>
        <xsl:param name="new"/>
        <xsl:choose>
            <xsl:when test="contains($string, $search)">
                <xsl:value-of select="substring-before($string, $search)"/>
                <xsl:copy-of select="$new"/>
                <xsl:call-template name="replace">
                    <xsl:with-param name="string" select="substring-after($string, $search)"/>
                    <xsl:with-param name="search" select="$search"/>
                    <xsl:with-param name="new" select="$new"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$string"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:05:49.850

~~您的参数值中有额外的引号。换线试试...~~

 ~~```
<xsl:with-param name="search" select="'&#xA;'"/> 
```~~ 

到...

```
<xsl:with-param name="search" select="&#xA;"/> 
```

 ~~**更新**

正如 OP 所指出的，上述内容不正确，将导致 XSLT 转换错误。
我相信@banana 的答案是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:05:44.663

恕我直言，xsl:anaylze-string 非常适合这个问题。这个 XSLT 2.0 样式表在 Saxon 下运行...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:so="http://stackoverflow.com/questions/11222334"
  xmlns:x="http://www.w3.org/1999/xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  exclude-result-prefixes="xsl fn xs so x">

<xsl:output method="xhtml" encoding="utf-8" indent="yes"
            doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            omit-xml-declaration="yes" />

<xsl:template match="/">
 <html>
  <head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head>
  <body>
   <xsl:apply-templates select="data/lines"/>
  </body>
 </html> 
</xsl:template>

<xsl:template match="lines">
    <xsl:analyze-string select="." regex="\n">
        <xsl:matching-substring>
          <br />
          <xsl:value-of select="'&#x0A;'" />
        </xsl:matching-substring>
        <xsl:non-matching-substring>
          <xsl:value-of select="."/>
        </xsl:non-matching-substring>
      </xsl:analyze-string>
</xsl:template>

</xsl:stylesheet> 
```

...应用于此输入文档时...

```
<?xml version="1.0" encoding="utf-8"?>
<data>
<lines>
Line 1
Line 2
Line 3
Line 4
Line 5
Line 6
</lines>
</data> 
```

...将产生这个html页面...

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   </head>
   <body><br />
      Line 1<br />
      Line 2<br />
      Line 3<br />
      Line 4<br />
      Line 5<br />
      Line 6<br />

   </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:11:30.357

尝试替换：

```
<xsl:with-param name="new"><br /></xsl:with-param> 
```

和：

```
<xsl:with-param name="new">&lt;br /&gt;</xsl:with-param> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T09:14:34.430

这将写入当前节点值替换 \n 与 <br/>

```
<xsl:value-of select="replace(., '\n', '&lt;br/&gt;')"/> 
```~~

# jquery - jquery validate plugin with jquery ajax post in codeigniter

> ID：11222337
> 
> 赞同：0
> 
> 时间：2012-06-27T08:36:31.170
> 
> 标签：jquery, ajax, codeigniter, post

我正在尝试提交表单。在提交表单之前，我使用 jquery validate 插件来验证输入。验证后，我将在 jquery 中向控制器中的控制器函数发送一个 ajax 请求。输入的插入是成功的，因为我可以看到在我的数据库中插入和显示的值。但是回调返回错误。我尝试将其中一个字段留空，它实际上返回了一个成功回调。

我的验证脚本如下

```
 $("#registerHere").validate({
    rules:{
        user_name:"required",
        user_email:{
            required:true,
            email: true
        },
        pwd:{
            required:true,
            minlength: 6
        },
        cpwd:{
            required:true,
            equalTo: "#pwd"
        },
        role:"required"
    },
    messages:{
        user_name:"Enter your first and last name",
        user_email:{
            required:"Enter your email address",
            email:"Enter valid email address"
        },
        pwd:{
            required:"Enter your password",
            minlength:"Password must be minimum 6 characters"
        },
        cpwd:{
            required:"Enter confirm password",
            equalTo:"Password and Confirm Password must match"
        },
        role:"Select Role"
    },
    errorClass: "help-inline",
    errorElement: "span",
    highlight:function(element, errorClass, validClass) {
        $(element).parents('.control-group').addClass('error');
    },
    unhighlight: function(element, errorClass, validClass) {
        $(element).parents('.control-group').removeClass('error');
        $(element).parents('.control-group').addClass('success');
    },
}); 
```

我的jquery ajax post方法如下

```
 $('#register').click(function(){ 
    //alert('register k');

    var user_name = $('#registerHere').find('#user_name').val();

    var user_password = $('#registerHere').find('#pwd').val();

    var user_email = $('#registerHere').find('#user_email').val();

    var user_role = $('#registerHere').find('#role option:selected').val();

    //if(user_name =="" || user_password==""||user_email==""||user_role=="")
        //return;

    var post_data = 
    {
        username:user_name,
        password:user_password,
        email:user_email,
        role:user_role
    };  

    $.ajax({
        type: "POST",
        dataType:"json",
        url:"login_register/register_controller_function",
        data: post_data,
        success: function(data) {
                alert(data);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown)
        {
            alert(textStatus);

        }
    });

}); 
```

我的控制器脚本

```
 public function register_controller_function()
{
    $this->load->database();
    $this->load->model('login_model');

    $user_name=$this->input->post('username');
    $user_password=$this->input->post('password');
    $user_email=$this->input->post('email');
    $user_role=$this->input->post('role');

    $result = $this->login_model->register_model_function($user_name,$user_password,$user_email,$user_role);
    echo json_encode($result);
} 
```

其中 register_model_function 将值插入数据库。

当我使用调试器查看请求时，它略有不同。

如果我将一个有成功回调的字段留空，则请求标头如下所示

```
Request    URL:http://127.0.0.1/mathplication_v2/login_register/register_controller_function
Request Method:POST
Status Code:200 OK

POST /mathplication_v2/login_register HTTP/1.1

Host: 127.0.0.1

Connection: keep-alive

Content-Length: 72

Cache-Control: max-age=0

Origin: http://127.0.0.1

User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5

Content-Type: application/x-www-form-urlencoded

Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

Referer: http://127.0.0.1/mathplication_v2/login_register

Accept-Encoding: gzip,deflate,sdch

Accept-Language: en-US,en;q=0.8

Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

如果我填写会有错误回调的字段，请求头看起来像这样

```
Request URL:http://127.0.0.1/mathplication_v2/login_register
Request Method:POST
Status Code:200 OK

POST /mathplication_v2/login_register HTTP/1.1

Host: 127.0.0.1

Connection: keep-alive

Content-Length: 72

Cache-Control: max-age=0

Origin: http://127.0.0.1

User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5

Content-Type: application/x-www-form-urlencoded

Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

Referer: http://127.0.0.1/mathplication_v2/login_register

Accept-Encoding: gzip,deflate,sdch

Accept-Language: en-US,en;q=0.8

Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

请求 url 不同，但在我的 jquery 的 ajax 请求中，我已经指定了控制器 url。

知道有什么问题吗？

# visual-studio - 搜索工作项历史记录

> ID：11222338
> 
> 赞同：1
> 
> 时间：2012-06-27T08:36:32.150
> 
> 标签：visual-studio, tfs, bug-reporting

Team Foundation Server 中是否有一种方法可以在工作项历史记录中进行搜索？例如，使用查询编辑器，您可以添加表达式“AssignedTo=PersonName”，它获取分配给该人的所有票证。但是，您将如何设置查询以获取所有已分配给该人的票证，即使当前受让人是其他人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:49:22.113

您需要`Was Ever`在查询中使用运算符：

![曾经](../Images/e00b696c099c02d8e6e5862b034c213f.png)

# asp.net - 在 DataReader.Read 之后，日期时间列中的时间值转换为 12 小时格式

> ID：11222342
> 
> 赞同：0
> 
> 时间：2012-06-27T08:36:47.327
> 
> 标签：asp.net, sql-server-2008, datetime, calendar

我的应用程序允许用户进行会议预约。在约会被保存到数据库之前，用户从日历控件中选择一个日期。一旦选择了日期，该页面应该从数据库中获取当天的约会列表，并检查每个记录约会的时间。任何已经预订的时间段都将从 DropDownList 中删除，用户将从中选择方便的时间。

问题在于我的时间比较。下面的大部分代码都是为了剥离日期/时间值以获得我可以比较的东西。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not IsPostBack Then

        PopulateTime()
    End If
End Sub

Protected Sub PopulateTime()

    Dim db As New Database

    Dim sql As String = "select apptinterval from centres where centreid = @id"

    Dim args As New List(Of SqlParameter)
    args.Add(New SqlParameter("@id", Session("CentreID")))

    Dim dr As SqlDataReader = db.GetReader(sql, args.ToArray)

    Dim interval As Integer = 0
    If dr.Read Then
        interval = dr("apptinterval")
    End If

    Dim time = TimeSpan.FromHours(8)
    While time < TimeSpan.FromHours(17)
        time += TimeSpan.FromMinutes(interval)

        ddlAppointmentTime.Items.Add(New ListItem(time.ToString, time.ToString))
    End While
End Sub

Protected Sub calAppointmentDate_SelectionChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles calAppointmentDate.SelectionChanged

    Dim seldate As String = Left(calAppointmentDate.SelectedDate, 10)
    Dim dateargs() As String = seldate.ToString.Split("/")
    Dim newdate As String = dateargs(0) & "-" & dateargs(1) & "-" & dateargs(2)

    GetTimes(newdate)
End Sub

Protected Sub GetTimes(ByVal TargetDate As String)

    Dim db As New Database

    Dim args As New List(Of SqlParameter)
    Dim sql As String = "select apptdate from appointments where apptdate between @date1 and @date2 order by apptdate"

    args.Add(New SqlParameter("@date1", TargetDate & " 12:00:00"))
    args.Add(New SqlParameter("@date2", TargetDate & " 23:59:59"))

    Dim dr As SqlDataReader = db.GetReader(sql, args.ToArray)

    If dr.HasRows Then
        dr.Read()
        For i As Integer = 0 To ddlAppointmentTime.Items.Count - 1

            If Left(ddlAppointmentTime.Items(i).Value, 5) = Mid(dr("apptdate"), 12, 5) Then
                ddlAppointmentTime.Items.RemoveAt(i)
            End If

        Next
    End If
    dr.Close()

End Sub 
```

如果在此处循环，则 for 的值`Mid(dr("apptdate"), 12, 5)`将作为`01:00`. 数据库中的实际值表示`13:00`。

谁能建议为什么会发生这种转换？它导致比较失败，因此该时间段没有从 DropDownList 中删除。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:29:13.393

似乎是它`Mid`做到了。这里涉及到的字符串转换改变了值。

我通过删除`Mid`并更改 sql 语句来解决此问题，如下所示：

```
Dim sql As String = "select left(CONVERT(time, apptdate, 14), 5) as apptdate from appointments"

Dim dr As SqlDataReader = db.GetReader(sql, args.ToArray)

If dr.HasRows Then
    While dr.Read

        For i As Integer = 0 To ddlAppointmentTime.Items.Count - 1

            If Left(ddlAppointmentTime.Items(i).Value, 5) = dr("apptdate") Then
                ddlAppointmentTime.Items.RemoveAt(i)
            End If

        Next
    End While

End If
dr.Close() 
```

# apache - htaccess：条件认证

> ID：11222343
> 
> 赞同：2
> 
> 时间：2012-06-27T08:36:47.590
> 
> 标签：apache, .htaccess, mod-rewrite, mod-auth

我如何在我的 apache/htaccess 配置中配置它：

我想要对所有文件进行 HTTP 身份验证，但有一个例外。`click.php`无需任何身份`js/clickheat.js`验证即可从 1.2.3.4 访问这些文件。

我尝试了 FilesMatch，但我无法反转它。所以我不能放在`require valid-user`那里。我想使用`SetEnv`，但我以后如何检查它？

```
<FilesMatch "(click\.php|clickheat\.js)">
    # what here?
</FilesMatch> 
```

我的另一个想法是使用 mod_rewrite。好吧，我可以允许从给定主机访问这两个文件并从其他任何地方拒绝它。但是我如何将它与 HTTP-Authentication 链接起来？

```
# allows access to two files from the given IP
RewriteCond %{REMOTE_ADDR} 1\.2\.3\.4
RewriteCond %{REQUEST_URI} ^/click.php [OR]
RewriteCond %{REQUEST_URI} ^/js/clickheat\.js
RewriteRule (.*) - [L]

# denies everything else
RewriteRule (.*) - [F,L] 
```

所以我最喜欢的解决方案是通过 RewriteCond/RewriteRule 启用 HTTP-Auth。

背景（或我为什么要这样做）：我正在尝试确保 clickheat (http://www.labsmedia.com/clickheat/index.html) 安装。1.2.3.4 是远程运行 mod_proxy 并将对这些文件的访问重定向到我们的 clickheat 主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:16:21.247

好的，我找到了解决方案：

```
Order Deny,Allow
Deny from All

Satisfy Any

AuthType Basic
AuthName "clickheat"
AuthUserFile /var/www/clickheat/.htpasswd
Require valid-user

<FilesMatch "(click\.php|clickheat\.js)">
        Deny from All
        Allow from 1.2.3.4
</FilesMatch> 
```

关键是`Satisfy Any`允许基于 IP 或 Auth 的访问。

# objective-c - 使用子/父 NSManagedObjectContext 时的奇怪行为

> ID：11222348
> 
> 赞同：4
> 
> 时间：2012-06-27T08:37:08.623
> 
> 标签：objective-c, core-data, ios5, nsmanagedobjectcontext

我正在开发一个应用程序，我需要在后台线程上计算事物（多秒操作）和编写事物（与服务器同步数据）。

因此，我使用两个 NSManagedObjectContexts (MOC)，一个孩子和一个父母，它们必须始终保持同步。为了确保它们同步，我总是将数据编辑/添加到子 MOC，以便使用以下模式将其推送到主 MOC：

```
[childMOC performBlock:^{

    MyObject *myObject = *create new object in childMOC*

    [childMOC save:&error];

    [mainMOC performBlock:^{
        [mainMOC save:&error];
        // Is this mandatory to make it work correctly?
        // [childMOC performBlock:^{
        //     [childMOC refreshObject:myObject mergeChanges:NO];
        // }];
    }];
}]; 
```

过了一会儿，我似乎在后台上下文中有同一个对象的两个版本，一个带有临时 ID，一个带有永久 ID。例如，如果我将子对象添加到“真实”对象（通过将新的永久 ID 从主 MOC 传递给子 MOC），当我在后台 MOC 中检索我的对象时，我没有看到这些对象，因为它是缓存的旧临时对象.

我已经看到上面的模式被大量使用了，但是没有人提到这个临时/永久 ID 问题似乎很奇怪。

1.  在一个上下文中它可以是同一个对象的两个版本感觉不对。如果我将 NSManagedObjectID 传递给子 MOC 并检索它，子 MOC 是否应该更新我现有的对象而不是创建一个新对象并将我的旧临时对象保留为缓存默认值？

2.  我是否需要在创建对象的每个地方使用注释行？

3.  或者它可能与 mergeChangesFromContextDidSaveNotification 一起使用，会产生相同的效果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T20:27:52.800

我的解决方案是：

1）使用背景MOC作为父MOC，主MOC作为子MOC。作为奖励，我不需要保存主 MOC 来获得永久 ID。

```
[DC.backgroundMOC performBlock:^{
    // Add, save and update managed objects
    [DC saveContext]; // The changes is being pushed to the main context
}]; 
```

2) 使用 NSManagedObjectContextDidSaveNotification 使主 MOC 保持最新（主 MOC 正在更新 UI）

```
- (void) backgroundMOCSaved:(NSNotification*)notification {
    [mainMOC performBlock:^{
        [mainMOC mergeChangesFromContextDidSaveNotification:notification];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:05:58.710

I had this problem and the solution was making sure all operations on the parent MOC are done with performBlock:, even the initial setup:

```
 parentManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [parentManagedObjectContext performBlock:^{
        [parentManagedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
        [parentManagedObjectContext setPersistentStoreCoordinator:coordinator];
    }]; 
```

Once I did this, my child MOCs started picking up changes.

# php - 如何使用 PHP 设置 cron 文件的时间间隔

> ID：11222349
> 
> 赞同：0
> 
> 时间：2012-06-27T08:37:15.457
> 
> 标签：php, cron

我是新手。我有一个`cron`名为的文件`xml.php`，我想以特定的时间间隔运行此文件。此时间间隔由管理员在管理面板页面上设置。此时间间隔将存储在数据库中，我想从数据库中获取该数据.根据`xml.php`应该运行。如果有人知道如何做到这一点，请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:42:03.307

您需要做的是将它保存在数据库中...使用已保存/要保存的详细信息，您可以构建一个适当的 crontab 条目 - 有关更多详细信息，请参见：[使用 PHP 来创建、编辑和删除 crontab 作业？](https://stackoverflow.com/questions/4421020/use-php-to-create-edit-and-delete-crontab-jobs)

它还取决于托管公司是否允许您从 PHP 中执行 shell 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:43:15.890

创建一个脚本，检查数据库中文件的最后一次运行和当前时间差。如果间隔正确，则运行 xml 脚本，否则退出。使用 cron 每分钟运行一次新脚本（因此每分钟它都会检查脚本是否需要运行并仅在时间到时运行它）。

# c# - 打开文件夹中的文件并在每个文件中查找值“错误”和“警告”

> ID：11222353
> 
> 赞同：-3
> 
> 时间：2012-06-27T08:37:30.450
> 
> 标签：c#, vb.net, tsql

我有一个文件夹保存在这里：`C:\MyFiles`

在那个*文件夹*中，我有一些`.txt`文件。

我正在寻找打开该文件夹中每个 .txt 文件并搜索该值的最佳方法，`Error`或者`Warning`当它搜索时它必须告诉我`files`包含这些单词的内容。

我最好的选择是什么？要使用 t-sql 创建存储过程来做到这一点？或使用 C# 或 VB.net 代码创建 .exe。

任何人有一个例子让我看看开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:43:26.500

C# 控制台应用程序是要走的路！

1.  [从目录中获取文件](http://www.csharp-examples.net/get-files-from-directory/)
2.  [从文件中读取文本](http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:35:39.883

我最终使用这个命令创建了一个 BAT 文件。

```
find /c "error" C:\MyFiles\*.txt
find /c "warning" C:\MyFiles\*.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:59:25.473

这是一个示例项目，不使用高级功能以保持简单和可理解

```
using System;
using System.IO;
using System.Text;

namespace CheckErrorWarning
{
    class Program
    {
        // Pass on the command line the full path to the directory with the txt files
        static void Main(string[] args)
        {
            if (args.Length < 1)
            {
                Console.WriteLine("Usage: CheckErrorWarning <directoryname>");
                return;
            }
            if (Directory.Exists(args[0]) == false)
            {
                Console.WriteLine("Directory : " + args[0] +" not found or not accessible");
                return;
            }
            string[] textFiles = Directory.GetFiles(args[0], "*.txt");
            foreach (string fileName in textFiles)
            {
                string[] lines = File.ReadAllLines(fileName);
                for (int x = 0; x < lines.Length; x++)
                {
                    int warnPos = lines[x].IndexOf("warning",
                                  StringComparison.CurrentCultureIgnoreCase);
                    if (warnPos > 0) Console.WriteLine("File:" + fileName + 
                                     ", warning at line " + x + 
                                     ", position " + warnPos);
                    int errPos = lines[x].IndexOf("error", 
                                 StringComparison.CurrentCultureIgnoreCase);
                    if (errPos > 0) Console.WriteLine("File:" + fileName + 
                                    ", error at line " + x + 
                                    ", position " + errPos);
                }
            }
        }
    }
} 
```

# c# - Rijndael 类加密然后解密数据引发“Rijndael 类加密然后解密数据”错误

> ID：11222355
> 
> 赞同：2
> 
> 时间：2012-06-27T08:37:37.207
> 
> 标签：c#

我使用该函数`EncryptStringToBytes`将纯文本加密为字节数组，最后将字节数组转换为字符串并返回。

我使用另一个函数将加密文本解密为纯文本。

我尝试使用 RC2 打乱文本，但它会引发此错误：

> Rijndael 类加密然后解密数据

这是代码：

```
using System;
using System.IO;
using System.Text;
using System.Security.Cryptography;

namespace RC2CryptoServiceProvider_Examples
{
    class MyMainClass
    {
        static string EncryptStringToBytes(string plainText, byte[] Key, byte[] IV)
        {
            // Check arguments.
            if (plainText == null || plainText.Length <= 0)
                throw new ArgumentNullException("plainText");
            if (Key == null || Key.Length <= 0)
                throw new ArgumentNullException("Key");
            if (IV == null || IV.Length <= 0)
                throw new ArgumentNullException("Key");
            byte[] encrypted;
            // Create an Rijndael object
            // with the specified key and IV.
            using (Rijndael rijAlg = Rijndael.Create())
            {
                rijAlg.Key = Key;
                rijAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform encryptor = rijAlg.CreateEncryptor(rijAlg.Key, rijAlg.IV);

                // Create the streams used for encryption.
                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {

                            //Write all data to the stream.
                            swEncrypt.Write(plainText);
                        }
                        encrypted = msEncrypt.ToArray();
                    }
                }
            }

            **// Return the encrypted bytes from the memory stream.
            return System.Text.Encoding.UTF8.GetString(encrypted);**

        }
        static string DecryptStringFromBytes(string Codedtext, byte[] Key, byte[] IV)
        {
            byte[] cipherText = System.Text.Encoding.UTF8.GetBytes(Codedtext);
            // Check arguments.
            if (cipherText == null || cipherText.Length <= 0)
                throw new ArgumentNullException("cipherText");
            if (Key == null || Key.Length <= 0)
                throw new ArgumentNullException("Key");
            if (IV == null || IV.Length <= 0)
                throw new ArgumentNullException("Key");

            // Declare the string used to hold
            // the decrypted text.
            string plaintext = null;

            // Create an Rijndael object
            // with the specified key and IV.
            using (Rijndael rijAlg = Rijndael.Create())
            {
                rijAlg.Key = Key;
                rijAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform decryptor = rijAlg.CreateDecryptor(rijAlg.Key, rijAlg.IV);

                // Create the streams used for decryption.
                using (MemoryStream msDecrypt = new MemoryStream(cipherText))
                {
                    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                    {
                        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                        {

                            // Read the decrypted bytes from the decrypting stream
                            // and place them in a string.
                            plaintext = srDecrypt.ReadToEnd();
                        }
                    }
                }

            }

            return plaintext;

        }

        public static void Main()
        {

            try
            {
                System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();

                string original = "Here is some data to encrypt!";

                // Create a new instance of the Rijndael
                // class.  This generates a new key and initialization 
                // vector (IV).
                using (Rijndael myRijndael = Rijndael.Create())
                {
                    // Encrypt the string to an array of bytes.
                    string encrypted = EncryptStringToBytes(original, myRijndael.Key, myRijndael.IV);

                    // Decrypt the bytes to a string.
                    string roundtrip = DecryptStringFromBytes(encrypted, myRijndael.Key, myRijndael.IV);

                    //Display the original data and the decrypted data.
                    Console.WriteLine("Original:   {0}", original);
                    Console.WriteLine("Round Trip: {0}", roundtrip);
                }

            }
            catch (Exception e)
            {
                Console.WriteLine("Error: {0}", e.Message);
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:40:16.510

这是问题（或至少*是*问题）：

```
return System.Text.Encoding.UTF8.GetString(encrypted); 
```

加密数据*不是*UTF-8 文本。它是任意二进制数据。*不要*将其视为编码文本。

如果您*确实*需要将任意二进制数据作为字符串传递，请使用 Base64：

```
return Convert.ToBase64String(encrypted); 
```

然后在 中`DecryptStringFromBytes`，您将使用：

```
byte[] cipherText = Convert.FromBase64String(codedText); 
```

（参数名称已更改以符合约定。）

# c# - C# D3（动态数据显示）图表项目

> ID：11222357
> 
> 赞同：1
> 
> 时间：2012-06-27T08:37:40.763
> 
> 标签：c#, charts, dynamic-data-display

有人知道为什么不再维护[动态数据显示吗？](http://dynamicdatadisplay.codeplex.com/)
D3 是用于 c# 图表的很棒的开源作品，具有强大的功能（处理非常大的数据集和智能数据映射等），并且它是高度可定制的。
不幸的是，论坛似乎已经死了，尽管用户社区相对庞大，但团队不再做出回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:05:43.593

似乎 D3 已被 Microsoft Research 选中并正在那里开发。Codeplex 上有一些 D3 的“分支”。

*   [动态数据显示](http://dynamicdatadisplay.codeplex.com/)
*   [D3未来](http://d3future.codeplex.com/)
*   [D3 社区发展](http://d3commdev.codeplex.com/)

如果您在 D3 主网站上找不到您要查找的内容，绝对建议您查看其他两个。它们没有那么广泛，但每个都包含自己独立的项目，这些项目可能会给你你需要的东西，或者至少是朝着正确的方向前进。

此外，我最近一直在讨论 D3，它们仍然受到监管，尽管不像过去几年那么频繁。

# android - BitmapFactory 返回 null Android

> ID：11222362
> 
> 赞同：0
> 
> 时间：2012-06-27T08:38:05.087
> 
> 标签：android, scale, bitmapfactory

好的，所以我下载图像并将输入流发送到此方法，女巫必须对其进行一次解码以找到图像大小，然后计算比例值，然后从流中创建位图的迷你版本....但我在logcat bitmapFactory 正在返回 null，任何人都知道可能出了什么问题？

```
public static Bitmap getSampleBitmapFromStream(InputStream is,
        int reqWidth, int reqHeight) {

    BitmapFactory.Options options = new BitmapFactory.Options();

    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FlushedInputStream(is), null, options);

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = options.outWidth, height_tmp = options.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < reqWidth || height_tmp / 2 < reqHeight)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    // decode with inSampleSize
    options.inJustDecodeBounds = false;
            options.inSampleSize = scale;
    return BitmapFactory.decodeStream(new FlushedInputStream(is), null, options);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:45:45.297

原因是：你使用了两次的流

```
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream(new FlushedInputStream(is), null, options); 
```

然后再次：

```
 options.inJustDecodeBounds = false;
        options.inSampleSize = scale;
return BitmapFactory.decodeStream(new FlushedInputStream(is), null, options); 
```

所以如果你想避免这种情况，你需要关闭流并再次重新打开流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:40:56.590

直接提供 InputStream 怎么样？

```
return BitmapFactory.decodeStream(is, null, options); 
```

# linux - linux上的视频会议服务器

> ID：11222363
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:38:10.990
> 
> 标签：linux, flash, video-conferencing

我需要实现一个基于服务器的一对一视频会议解决方案，可通过浏览器运行，免费（或不昂贵），支持 ssl 以及高质量的视频和音频。你会给我什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:33:24.150

请参阅[WebRTC](http://webrtc.org/)。Chrome 和 Firefox 将支持它（早期支持现在在 Chrome 中，很快将在 Firefox 中）。微软似乎也会支持它——他们正在招聘专门从事 WebRTC 工作的工程师。

# java - CATALINA_OPTS 与 JAVA_OPTS - 有什么区别？

> ID：11222365
> 
> 赞同：115
> 
> 时间：2012-06-27T08:38:18.763
> 
> 标签：java, tomcat, jvm, tomcat6

我试图找出 Apache Tomcat 变量`CATALINA_OPTS`和[SO](http://stackoverflow.com "堆栈溢出")`JAVA_OPTS`之间的区别，并且惊讶地发现这里还没有发布任何问题/答案。所以我想在发现差异后在这里分享它（有答案）。检查下面的答案/差异。

**注意：**在发布这篇文章时，我们在 CentOS5 64 位架构上运行带有 JDK 6u32 的 Apache Tomcat v6.0.10。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-06-27T08:38:19.463

有两个环境变量 -`CATALINA_OPTS`和`JAVA_OPTS`- 都用于 Tomcat 的*catalina.sh*启动和关闭脚本。它们在该文件的注释中描述为：

> [JAVA_OPTS]：（可选）执行“start”、“stop”或“run”命令时使用的 Java 运行时选项

和

> [CATALINA_OPTS]：（可选）执行“start”或“run”命令时使用的 Java 运行时选项

**那么为什么会有两个不同的变量呢？有什么区别？**

首先，在 EITHER 变量中指定的任何内容都被传递给启动 Tomcat 的命令——“start”或“run”命令——但只有 JAVA_OPTS 中设置的值被传递给“stop”命令。这可能对 Tomcat 在实践中的运行方式没有任何影响，因为它只影响运行的结束，而不是开始。

第二个区别更微妙。其他应用程序也可能使用 JAVA_OPTS，但只有 Tomcat 会使用 CATALINA_OPTS。因此，如果您设置的环境变量仅供 Tomcat 使用，您最好使用 CATALINA_OPTS，而如果您设置的环境变量也可供其他 java 应用程序使用，例如 JBoss，您应该将您在 JAVA_OPTS 中的设置。

**资料来源：** [CATALINA_OPTS v JAVA_OPTS - 有什么区别？](http://www.wellho.net/mouth/2163_CATALINA-OPTS-v-JAVA-OPTS-What-is-the-difference-.html "CATALINA_OPTS v JAVA_OPTS - 有什么区别？")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T17:52:05.287

在关机期间，tomcat 启动多个 vm，正如 @joao 的评论中所解释的那样。如果您在 tomcat 关闭期间记录一些数据，请使用 CATALINA_OPTS 而不是 JAVA_OPTS。一个很好的例子是当我想在 jacoco.exec 期间保存数据时，我应该使用 CATALINA_OPTS 而不是 JAVA_OPTS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T09:02:21.740

我想补充一点`JAVA_OPTS`，`CATALINA_OPTS`它们是**相辅相成**的：如果你定义了两个环境变量，两者的**内容将被连接**起来并传递给`start`and`run`命令——正如上面 Gnanam 所解释的那样。

也可以参考[catalina.sh的原始出处](https://github.com/apache/tomcat/blob/6666b63bc4d4b41a23b211196a7be9b98449e93c/bin/catalina.bat#L344)

# iphone - 如何修复应用内购买错误“交易错误：无法连接到 iTunes Store 代码 0”？

> ID：11222366
> 
> 赞同：2
> 
> 时间：2012-06-27T08:38:19.093
> 
> 标签：iphone, in-app-purchase, app-store-connect

> **可能重复：**
> [iPhone Store Kit“无法连接到 iTunes Store”](https://stackoverflow.com/questions/2359739/iphone-store-kit-cannot-connect-to-itunes-store)

我买东西时发现错误。它不显示登录提示并返回错误“交易错误：无法连接到 iTunes Store 代码 0”。但是我尝试创建新项目并使用相同的代码进行应用内购买，它成功了！！. 我尝试重新安装、删除应用程序并从商店注销，我确保 productIdentifier 是正确的。任何人有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:20:29.770

我认为这是服务器端问题，似乎与产品“卡住”的测试帐户有关。

我的解决方法是重置测试帐户的密码，因为这似乎会“重新启动”该帐户。

# macos - 如何响应_one_单击可可窗口中不是键的控件？

> ID：11222368
> 
> 赞同：0
> 
> 时间：2012-06-27T08:38:22.853
> 
> 标签：macos, cocoa, nstableview

我在子窗口中有一个按钮。

如果我在父窗口中工作（它是键），并且我在子窗口中单击*一次*按钮，则此单击使子窗口成为键。*然后我必须再次*单击以使控件（在本例中为按钮）响应。

如何立即响应在非键窗口中单击该按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:55:40.577

对于默认`-[NSView acceptsFirstMouse:]`返回的每个视图类，这是单独控制的。`NO`子类必须返回`YES`以允许第一次单击工作。

但是，`NSButton`实现已经返回`YES`，因此它应该按原样工作，除非您的按钮不是按`NSButton`实例绘制的。

# resharper - Resharper 创建具有支持字段的属性

> ID：11222379
> 
> 赞同：5
> 
> 时间：2012-06-27T08:39:05.157
> 
> 标签：resharper

如何在 Resharper 中创建具有支持字段的属性？

这是您想要在课堂上做的第一件事，但我找不到如何去做。

它是如此简单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T09:07:28.870

身体之内`class`，打字`prop`并击中`Tab`。提供属性的类型和名称。这将创建一个自动属性（如今，它通常是您想要创建的其中之一）。

然后，将光标放在属性名称上，点击`Alt`+`Enter`并选择`To property with backing field`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T08:41:54.850

我发现最快的方法是键入您的属性，就好像它已经存在一样：

```
this.MyProperty = "hello"; 
```

然后在属性名称上按 Alt-Return，然后选择创建属性“MyProperty”，然后点击选项卡在自动属性、托管支持字段或默认成员主体之间进行选择。

我相信这比使用`prop`快捷方式、点击选项卡、指定属性类型、点击两次选项卡、指定名称、然后在属性名称上按 Alt-Return 并选择“带有支持字段的 to 属性”选择要快。

您还可以创建一个实时模板，以便稍微减少工作量，例如：

```
/// <summary>
/// Private backing field for $Property$ property
/// </summary>
private $Type$ $BackingField$;

public $Type$ $Property$
{
    get
    {
        return this.$BackingField$;
    }

    set
    {
        this.$BackingField$ = value;     
    }
} 
```

参数 $BackingField$ 可以通过模板编辑器的“第一个小写字符”宏从 $Property$ 自动生成，并将其设置为“不可编辑”。

但我相信第一种方法是最快和最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T19:01:49.907

如果您已经有一个带有 getter 和 setter 的属性，有时您会发现您使用的支持字段不再可用，因为您更改了当前类的基类或进行了其他更改。例如，在下面的`LinesMax`属性中，支持字段`Height`可从继承的类中获得：

```
public int LinesMax
{
   get { return ConvertValGet(AdjustMetricEnum.Height, Height); }
   set { Height = ConvertValSet(AdjustMetricEnum.Height, value); }
} 
```

如果上面的代码有效，但我后来决定不再继承公开 Height 属性的类，则两个 Height 变量名称将在 IDE 中变为红色，表明它们不再可用于代码。

那时，我可能想创建一个私有支持字段。为了轻松创建它，我可以先将高度名称修改为 _height，然后将光标放在任一 _height 名称上，按 Alt-Enter 然后选择创建字段“_height”。将创建一个支持字段。

# c++ - C++/Boost MPL：结构代码同样是 Haskell 的 let，其中，

> ID：11222380
> 
> 赞同：9
> 
> 时间：2012-06-27T08:39:12.477
> 
> 标签：c++, haskell, boost, metaprogramming, boost-mpl

由于 C++ 元编程是函数式的：是否有任何方法可以与任何函数式编程语言（例如 Haskell 的） let 或 where 构造相媲美？

我正在使用 Boost::MPL 但希望为更长的元函数提供更多结构。拆分成几个函数很好，但在某些情况下我更喜欢 let/where 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:07:42.633

MPL 本身不支持`let`子句，但一些建立在它之上的库支持。一个例子是[metamonad](http://abel.web.elte.hu/mpllibs/metamonad/manual.html)。顾名思义，它还支持一些其他更高级别的功能概念（monad）。一个很大的缺点是，这`metamonad`不是 Boost 发行版的官方部分。

就 MPL 的解决方法而言，将事物拆分为函数并使用更多命名空间对它们进行分组，然后将重要符号导入顶级命名空间可能是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:19:35.840

Boost.Phoenix 有一个名为[let](http://boost-sandbox.sourceforge.net/libs/phoenix/doc/html/phoenix/modules/scope/let.html)的构造，它允许您在高阶函数上下文中声明局部变量。不过，我认为这是最高级别的。它仍然是运行时，而不是编译时。

从链接页面：

```
let(_x = 1, _y = ", World")
[
    // _x here is an int: 1

    let(_x = "Hello") // hides the outer _x
    [
        cout << _x << _y // prints "Hello, World"
    ]
] 
```

# c# - 什么是 VerticalPanningRoot（C# Metro ScrollBar 模板）

> ID：11222383
> 
> 赞同：1
> 
> 时间：2012-06-27T08:39:33.667
> 
> 标签：c#, scrollbar, microsoft-metro, controltemplate

我目前正在查看滚动条的 C# Metro 默认控制模板。在滚动条模板中，有一个叫做verticalpanningroot的部分。你知道它负责渲染滚动条 UI 的哪一部分吗？

```
<Grid x:Name="VerticalPanningRoot" VerticalAlignment="Top" MinHeight="66">
    <Border x:Name="VerticalPanningThumb" 
            Background="{StaticResource ScrollBarPanningBackgroundThemeBrush}"
            BorderBrush="{StaticResource ScrollBarPanningBorderThemeBrush}"
            BorderThickness="{StaticResource ScrollBarPanningBorderThemeThickness}" 
           Width="4" MinHeight="17"/>
</Grid> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:44:24.937

如果您`x:Name="VerticalPanningRoot"`的意思`Grid`是`VerticalPanningRoot`.

例子：

```
VerticalPanningRoot.HorizontalAlignement = // something 
```

**编辑：**

您`Grid`实际上是握着“拇指”（`Border`元素）的`ScrollBar`（拇指是您可以拖放以更快地上下移动的部分）。

你可以[在这里](http://www.codeproject.com/KB/Blogs/37366/scroll.png)看到所有的`ScrollBar`部分，这张图片来自这个[tuto](http://www.codeproject.com/Articles/37366/Styling-A-ScrollViewer-Scrollbar-In-WPF)。

# javascript - 将类设置为活动并在选择另一个菜单项时将其删除错误

> ID：11222386
> 
> 赞同：1
> 
> 时间：2012-06-27T08:39:57.533
> 
> 标签：javascript, jquery, html, css

我在 jsfiddle 中测试了下面的脚本，它工作正常，有人可以指导我如何修复它吗？这是我需要它工作的 url，右上角的向导样式菜单应该在单击时将每个项目设置为活动状态，然后在单击另一个菜单项时将其删除：http: [//morxmedia.com/clients/temp /45p/index_vertical.html](http://morxmedia.com/clients/temp/45p/index_vertical.html)

这是我为此使用的代码：

```
 <script type="text/javascript">
      $('.wizard-steps div').click(function(e) {
            e.preventDefault();
            $('a').removeClass('active');
            $(this).addClass('active');
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:42:21.267

`div`当您应该将click 事件绑定到元素时，您正在将它们绑定到这样的`a`元素

```
$(document).ready(function(){
    $('.wizard-steps > div > a').click(function(e) {
        e.preventDefault();
        $('a').removeClass('active');
        $(this).addClass('active');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:47:34.157

尝试这个。

```
$(function() {
    $('.wizard-steps div').click(function(e) {
       e.preventDefault();
       $(this).addClass('active').siblings().removeClass('active');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:44:33.307

据我所知（在你的 CSS 中）。该类`active`应该放在-tag下的 div`wizard-steps`和父级上。`a`

尝试这个：

```
<script type="text/javascript">
$('.wizard-steps div a').click(function(e) {
    if (e.preventDefault)
        e.preventDefault();
    else
        e.stop();

    $('.wizard-steps div').removeClass('active');
    $(this).parent().addClass('active');
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T08:42:52.400

最好将其包含在准备好的

```
$(document).ready(function() {
  $('.wizard-steps div').click(function(e) {
        e.preventDefault();
        $('a').removeClass('active');
        $(this).addClass('active');
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T09:09:20.790

可以使用 jquery 以另一种方式完成`.not()`

**jQuery代码：**

```
$('.wizard-steps div').click(function() {
          $('.wizard-steps div').not(this).removeClass('active');
          $(this).addClass('active');
}); 
```

**演示：http:** [//jsfiddle.net/surendraVsingh/PLbbr/](http://jsfiddle.net/surendraVsingh/PLbbr/)

# google-app-engine - 如何使用应用引擎数据存储查询的复合过滤器？

> ID：11222388
> 
> 赞同：0
> 
> 时间：2012-06-27T08:40:05.097
> 
> 标签：google-app-engine, google-cloud-datastore

我有这个功能：

```
@Override
  public List<Expense> getExpensesBetween(Date firstDate, Date secondDate) {

    Query query = new Query(expenseEntityKind);

    query.addFilter("date", Query.FilterOperator.GREATER_THAN_OR_EQUAL, secondDate);

    query.addFilter("date", Query.FilterOperator.GREATER_THAN_OR_EQUAL, firstDate);

    Iterable<Entity> entities = service.prepare(query).asIterable();

    return getReturnedExpenses(entities);
  } 
```

我想退回两个日期之间的所有费用，即大于或等于 2012-05-01 并且小于或等于 2012-06-01。我查看了 Google app-engine 的[文档](https://developers.google.com/appengine/docs/java/datastore/queries#Overview)。它说我们必须使用复合过滤器。谷歌文档：“但是，如果你想在一个查询中设置多个过滤器，你必须使用`CompositeFilter`。你必须至少有两个过滤器可以使用`CompositeFilter`。但是，这个文档似乎很旧，我没有找到任何调用的函数`setFilter();`.任何建议如何创建复合过滤器？我使用 App-engine sdk 1.6.6。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T08:45:33.807

以下内容取自[https://cloud.google.com/appengine/docs/java/datastore/queries](https://cloud.google.com/appengine/docs/java/datastore/queries)在这里可能会有所帮助

```
Filter heightMinFilter =
  new FilterPredicate("height",
                      FilterOperator.GREATER_THAN_OR_EQUAL,
                      minHeight);

Filter heightMaxFilter =
  new FilterPredicate("height",
                      FilterOperator.LESS_THAN_OR_EQUAL,
                      maxHeight);

//Use CompositeFilter to combine multiple filters
Filter heightRangeFilter =
  CompositeFilterOperator.and(heightMinFilter, heightMaxFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:48:25.150

您正在查找的文档适用于最新版本 (1.7.0)。刚刚介绍了这些功能。[这里](https://developers.google.com/appengine/docs/java/javadoc/)有一个如何使用 CompositeFilter 的例子（1.7.0 也是）。

# sharepoint - 通过共享点设计器将 Web 部件页面从一个站点复制到另一个站点

> ID：11222393
> 
> 赞同：0
> 
> 时间：2012-06-27T08:40:25.920
> 
> 标签：sharepoint

我正在尝试通过共享点设计器将包含内容编辑器 Web 部件的 Web 部件页面从一个站点移动到另一个站点，但是该页面在没有其内容的情况下被移动，因此如何移动页面及其内容，任何人都可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:15:59.340

有很多方法可以做到这一点。如果您在开发场中执行此操作，您可以尝试 [SPContentDeploymentWizard](http://spdeploymentwizard.codeplex.com/)。您需要导出页面及其所有引用，然后将其导入目标。

# android - 我需要有关 android 应用程序生命周期的帮助

> ID：11222399
> 
> 赞同：0
> 
> 时间：2012-06-27T08:40:41.747
> 
> 标签：android, android-layout, android-lifecycle

我创建了这个简单的例子来说明我想要完成的事情。

这是我的第一个布局：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.*;
import android.widget.RadioGroup.OnCheckedChangeListener;

public class LifeCycleActivity extends Activity implements OnCheckedChangeListener {
/** Called when the activity is first created. */

private RadioButton rbR, rbG, rbB;
private RadioGroup rg;
private Button next;
int color=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    rbR = (RadioButton) findViewById(R.id.radio0);
    rbB = (RadioButton) findViewById(R.id.radio1);
    rbG = (RadioButton) findViewById(R.id.radio2);
    rg = (RadioGroup) findViewById(R.id.radioGroup1);
    next = (Button) findViewById(R.id.button1);

    final Intent it = new Intent(this, next.class);
    final Bundle b = new Bundle();

    rg.setOnCheckedChangeListener(this);
    next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            b.putInt("color", color);
            it.putExtras(b);
            startActivity(it);
        }
    });
}

public void onCheckedChanged(RadioGroup group, int checkedId) {
    // TODO Auto-generated method stub
    if (checkedId==rbR.getId()) color=1;
    if (checkedId==rbB.getId()) color=2;
    if (checkedId==rbG.getId()) color=3;
} 
```

}

这是第二种布局：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.widget.*;

public class next extends Activity {

private LinearLayout ll;
private ImageView im;
private TextView tv;
private Button save;
private Bundle extras;
private int color=0;
private String selColor="";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.next);

    ll = (LinearLayout) findViewById(R.id.mainll);
    ll.setOrientation(LinearLayout.VERTICAL);
    im = new ImageView(this);
    tv = new TextView(this);
    save = new Button(this);
    save.setText("save");

    extras = getIntent().getExtras();
    color = extras.getInt("color");

    im.setImageResource(R.drawable.ic_launcher);
    ll.addView(im);

    if (color == 1) selColor = "RED";
    if (color == 2) selColor = "BLUE";
    if (color == 3) selColor = "GREEN";
    tv.setText(selColor);
    tv.setGravity(Gravity.CENTER);
    ll.addView(tv);
    ll.addView(save);

    save.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            // here i want to save and exit
            // so i can call onPause(), then finish()
            // do not know how exactly since i have to follow some goals 
            // that i need for this example
        }
    });
} 
```

}

我也有 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="red" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="blue" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="green" />
</RadioGroup>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="next" />

</LinearLayout> 
```

和 next.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

如您所见，基于第一个布局中的颜色选择，我动态构建了第二个布局。

这就是我想做的，请帮助我（如果可能，添加代码）：

1.  在第二个布局上，如果我按保存，我想保存应用程序状态（无论我在该页面上构建什么）并退出。
2.  如果我在该布局上添加一个按钮来创建其他动态对象（带有名称的EditText，或具有不同对象的另一个布局），而不是用户保存，他/她还将保存新对象（这部分可以稍后完成）
3.  如果用户保存该页面一次，那么我希望他能够在退出之前获得与他/她相同的应用程序状态（当然，如果他/她选择相同的单选按钮）。
4.  如果他/她选择另一个按钮，我不需要显示以前的状态，因为选择不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T17:10:17.357

诀窍**`sharedpreferences`**对我有用。我终于能够相同并检索我的数据`onPause`和`onStart`. 尽管这很好用，但我很欣赏 Kevin_Dingo 的回答，这无疑是更专业的方式。

# javascript - 如何从Javascript中的字符串获取占位符？

> ID：11222406
> 
> 赞同：1
> 
> 时间：2012-06-27T08:41:06.413
> 
> 标签：javascript, regex

我有一个包含一个或多个占位符的字符串，格式如下：**$( *[name]* )**

[ ***name]***可以是任何单词（包含字母数字字符）并且区分大小写。

```
 Example1: 'The $(Quick) Brown fox jumps over the lazy dog'
 Example2: '$(the) $(Quick) Brown fox jumps over $(the) lazy dog'
 Example3: '$(the) $(Quick) Brown $(fox) jumps over $(the) lazy $(dog)' 
```

javascript中检索所有占位符的最佳方法是什么，以便我们得到以下结果：

```
 Example1: ['Quick']
 Example2: ['the', 'Quick', 'the']
 Example3: ['the', 'Quick', 'fox', 'the', 'dog'] 
```

我还需要检索占位符的唯一列表，因此：

```
 Example1: ['Quick']
 Example2: ['the', 'Quick']
 Example3: ['the', 'Quick', 'fox', 'dog'] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:57:50.373

正如其他答案所提到的，您最好的方法是将正则表达式~~与 JavaScript`string.match()`函数~~一起使用。我的正则表达式可能不是最好的 [ *who is* ]，但这应该可以解决问题：

## [jsFiddle 演示](http://jsfiddle.net/GeekyEggo/SdHMr/)

```
function getPlaceholders(str)
{
    var regex = /\$\((\w+)\)/g;
    var result = [];

    while (match = regex.exec(str))
    {
        result.push(match[1]);    
    }

    return result;
} 
```

*谢谢[怪胎](http://jsfiddle.net/GeekyEggo/SdHMr/)* _

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:50:22.207

使用带有 [字符串匹配函数的](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:51:11.450

读这个

### [http://net.tutsplus.com/tutorials/php/advanced-regular-expression-tips-and-techniques/](http://net.tutsplus.com/tutorials/php/advanced-regular-expression-tips-and-techniques/)

### [http://swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/%7Ersc/regexp/regexp1.html)

你可以看到更多[`Bookmark`](http://www.delicious.com/tag/regex)

# python - 等待一段时间再执行python3.2中的下一段代码

> ID：11222407
> 
> 赞同：8
> 
> 时间：2012-06-27T08:41:06.533
> 
> 标签：python, winapi, user-interface, python-3.x, pywin32

我正在编写一个代码来运行一个 gui 应用程序（winmerge），然后向它发送一些击键。我需要在程序中等待一段时间，直到 GUI 完成运行，然后向它发送一些击键以保存报告。我该如何实施？`wait()`调用它后不起作用，我无法将密钥发送到同一个窗口。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T08:56:28.583

```
from time import sleep
print "hi,"
sleep(5)
print "this is printed 5 seconds later" 
```

# php - EZPDF - 文档、教程、任何东西？

> ID：11222413
> 
> 赞同：6
> 
> 时间：2012-06-27T08:41:46.153
> 
> 标签：php, ezpublish, ezpdf

我收到了一个利用 ezpdf 类生成 PDF 文件的项目。问题是，我似乎无法在网上找到任何文档。

通过查看代码本身，我已经弄清楚了我的老板想要实现的大部分更改。我想不通的是如何更改表格标题的背景颜色。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:42:24.930

[从 4.x ( doc.ez.no](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Libraries/ezpdf/%28language%29/eng-GB) ) 开始，eZ PDF 库似乎已被弃用。但是，如果您访问[pubsvn.ez.no](http://pubsvn.ez.no/doxygen/4.0/html/classeZPDF.html)，您会发现一些从代码生成的文档。如果您是从模板中完成这一切，那么使用 eZPDF 库的模板 pdf 函数应该仍然有效，请[在此处查找文档](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Template-PDF-functions)。

# hudson - 如何处理 Jenkins 对核心和插件的大量更新？

> ID：11222414
> 
> 赞同：4
> 
> 时间：2012-06-27T08:41:47.793
> 
> 标签：hudson, jenkins

我喜欢 Jenkins，并感谢它是一个活跃的项目。不过，我不知道维护 Jenkins 安装的正确方法是什么，因为我确实看到 Jenkins+plugins 每天都在更新，这需要太多时间来更新它们。

有没有办法自动化这个或我可以使用的 LTS 版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:48:03.877

Jenkins 团队确实有 LTS 版本的概念，因此请查看此 Wiki：[https ://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line](https://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line)

至于自动更新，如果您在操作系统级别使用包管理器安装了 Jenkins，则可以这样做。例如，在 ubuntu 上，你可以有一个在午夜调用`apt-get update`的cron。`apt-get install jenkins`如果您手动安装它，我不确定是否会自动化。

然而，自动更新也有不好的一面，因为必要的插件可能会停止使用新的更新，或者从网络上漏掉的错误可能会导致问题。

话虽如此，詹金斯的质量似乎一直很好，所以对你来说可能值得冒险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:20:45.187

据我所知，没有办法自动更新。

但是，鉴于更新可能（理论上，根据我的经验，Jenkins 已经完全稳定）会破坏您的构建过程中的某些内容，我认为自动化不是一个合适的解决方案。

对我来说似乎很有效的是定期手动进行更新，然后重新运行所有构建作业以验证没有任何损坏。当我们在 CI 环境中进行 VM 备份和操作系统更新时，我会将此作为我们定期维护的一部分。（更新是在备份之后完成的，因此如果出现问题，我们有一个最新的回退点..）

# api - Magento API V2 - 向 API 响应添加附加属性

> ID：11222415
> 
> 赞同：7
> 
> 时间：2012-06-27T08:41:48.783
> 
> 标签：api, magento, soap

我正在使用 Magento API V2。

当我调用**salesOrderCreditmemoInfo**时，我会收到包含贷项通知单详细信息以及与订单相关联的产品列表的响应。

但是在产品项目列表中没有**product_type**属性。

我想手动编辑响应以添加此属性。

我尝试编辑： **app\code\core\Mage\Sales\Model\Order\Creditmemo\Api.php**

并替换：

```
public function info($creditmemoIncrementId)
{
    ...
    $result['items'] = array();
    foreach ($creditmemo->getAllItems() as $item) {
        $result['items'][] = $this->_getAttributes($item, 'creditmemo_item');
    } 
```

使用以下 - （基本上是在数组中附加一个额外的属性）：

```
 public function info($creditmemoIncrementId)
    {
      ...
    $result['items'] = array();
    foreach ($creditmemo->getAllItems() as $item) {
            $product_type = '1'; //test value to check if works
            $attribs = $this->_getAttributes($item, 'creditmemo_item');
            $attribs['product_type'] = $product_type;

            $result['items'][] = $attribs;
        } 
```

当我执行 mage::log($result) 时，额外的属性似乎已正确添加到数组中。（也表明这个函数是被调用的）但它对实际的API响应没有影响。

我是完全看错地方了，还是有其他需要更新的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:39:09.070

由于您使用的是 SOAP V2，因此您应该*更新* `wsdl.xml` *以获取输出*。

对于您的情况，它是**product_type**并*刷新 server 上的缓存*。**/tmp**加载`wsdl.xml`已更新的新内容。不要忘记去**系统-> 缓存管理**清除所有缓存。

# css - 如何在透明 div 上设置 html 输入字段透明？

> ID：11222416
> 
> 赞同：7
> 
> 时间：2012-06-27T08:41:49.637
> 
> 标签：css, opacity, rgba, html-input

我有一个使用 rgba 设置透明的 div，并希望在该 div 上有一个也具有透明背景的输入字段。问题是输入字段背景未呈现透明。如果我`opacity:0.8;`在 div 上使用它，但文本也是透明的，所以我需要`rgba`. 对于透明 div 之外的第二个输入字段`rgba`有效。

这是我的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Insert title here</title>

<style type="text/css">

.term {
background-color: rgba(0,0,0,0.8);
color: #5fba3d;
width: 200px;
height: 100px;
}

input {
background-color: rgba(0,0,0,0.8);
color: #FFF;
border: none;
}

</style>

</head>

<body>

<div style="background-color:yellow; width:300px;">

   <div class="term">
      Input 1 <input type="text" value="Test" />
   </div>

   <br />

   <input type="text" value="Input 2" />

</div>

</body>
</html> 
```

有任何想法吗？

谢谢！

拿但内尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T08:53:00.627

嘿 Nathaneal 如果我更改 rgba 值，它的工作正常，所以文本不会透明

```
input {
background-color: rgba(0,0,0,0.1);
color: red;
border: none;
} 
```

我希望这会对你有所帮助......你可以看到演示：- [http://jsbin.com/avupaw/16/edit#html,live](http://jsbin.com/avupaw/16/edit#html,live)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T14:09:27.750

要不就

```
input {
    background: none;
    color: red;
    border: none;
} 
```

# c# - 如何使 2 个继承类共享相同的基类属性？

> ID：11222421
> 
> 赞同：0
> 
> 时间：2012-06-27T08:41:58.030
> 
> 标签：c#, oop, design-patterns

我有一个基类和两个继承类，我需要在每个继承类中以不同的方式使用基类属性。实现它的优雅方式是什么？

我有一门基础课，它保持了两个不同的平均值。并且继承类具有相同的方法getAction()，并且它们中的每一个都进行不同的计算并根据计算返回一个动作。我想要两个继承类的平均值的一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:33:09.323

如果可以，请避免继承。下面的解决方案是策略模式的实现，它应该完全适合您的需求。

```
class Params
{
    public int First {get;set;}
    public int Second {get;set;}
}

interface IAverageCounter
{
    double Calculate(Params parameters);
}

class SomeAverage : IAverageCounter
{
    public double Calculate(Params parameters)
    {
        return (parameters.First + parameters.Second) / 2;
    }
}

class OtherAverage : IAverageCounter
{
    public double Calculate(Params parameters)
    {
        return (parameters.Second - parameters.First) / 2
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:45:03.267

我会覆盖你需要的方法：

**[MSDN](http://msdn.microsoft.com/en-us/library/ebca9ah3%28v=vs.71%29.aspx)**

> 使用 override 修饰符来修改方法、属性、索引器或事件。覆盖方法提供了从基类继承的成员的新实现。被覆盖声明覆盖的方法称为被覆盖的基方法。被覆盖的基方法必须与覆盖方法具有相同的签名。

```
 public class BaseClass
   {
      public double x;

      // Constructor:
      public Square(double x) 
      {
         this.x = x;
      }

      public virtual double Area() 
      {
         return x*x; 
      }
   }

   class InhertingClass1: BaseClass
   {
      // Constructor:
      public Cube(double x): base(x) 
      {
      }

      // Calling the Area base method:
      public override double Area() 
      {
         return (6*(base.Area())); 
      }
   }

   class InhertingClass2: BaseClass
   {
      // Constructor:
      public Cube(double x): base(x) 
      {
      }

      // Calling the Area base method:
      public override double Area() 
      {
         return (15*(base.Area())); 
      }
   } 
```

# c# - 将日期从波斯语转换为公历

> ID：11222427
> 
> 赞同：54
> 
> 时间：2012-06-27T08:42:13.130
> 
> 标签：c#, .net, datetime, calendar

如何使用 System.globalization.PersianCalendar 将波斯日期转换为公历日期？请注意，我想转换我的波斯日期（例如今天是 1391/04/07）并获得公历日期结果，在这种情况下将是 06/27/2012。我正在数秒来回答...

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-06-27T08:44:15.730

其实很简单：

```
// I'm assuming that 1391 is the year, 4 is the month and 7 is the day
DateTime dt = new DateTime(1391, 4, 7, persianCalendar);
// Now use DateTime, which is always in the Gregorian calendar 
```

当您调用`DateTime`构造函数并传入 a`Calendar`时，它会为您转换它 -`dt.Year`在这种情况下是 2012 年。如果你想走另一条路，你需要构造适当的`DateTime`然后使用`Calendar.GetYear(DateTime)`等。

简短而完整的程序：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        PersianCalendar pc = new PersianCalendar();
        DateTime dt = new DateTime(1391, 4, 7, pc);
        Console.WriteLine(dt.ToString(CultureInfo.InvariantCulture));
    }
} 
```

打印 06/27/2012 00:00:00。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-01-31T07:39:34.943

您可以使用此代码将波斯日期转换为公历。

```
// Persian Date
var value = "1396/11/27";
// Convert to Miladi
DateTime dt = DateTime.Parse(value, new CultureInfo("fa-IR"));
// Get Utc Date
var dt_utc = dt.ToUniversalTime(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-03T15:29:21.397

你可以使用这个代码

```
return new DateTime(DT.Year,DT.Month,DT.Day,new System.Globolization.PersianCalendar()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-26T20:48:55.717

我有一个扩展方法：

```
 public static DateTime PersianDateStringToDateTime(this string persianDate)
 {
        PersianCalendar pc = new PersianCalendar();

        var persianDateSplitedParts = persianDate.Split('/');
        DateTime dateTime = new DateTime(int.Parse(persianDateSplitedParts[0]), int.Parse(persianDateSplitedParts[1]), int.Parse(persianDateSplitedParts[2]), pc);
        return DateTime.Parse(dateTime.ToString(CultureInfo.CreateSpecificCulture("en-US")));
 } 
```

[更多格式和文化特定格式](https://docs.microsoft.com/en-us/dotnet/api/system.datetime.tostring?view=netframework-4.8)

示例：转换`1391/04/07`为`06/27/2012`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-04T13:02:41.973

我在 Windows 7 和 10 上测试了这段代码，运行良好，没有任何问题

```
 /// <summary>
    /// Converts a Shamsi Date To Milady Date
    /// </summary>
    /// <param name="shamsiDate">string value in format "yyyy/mm/dd" or "yyyy-mm-dd"                     
     ///as shamsi date </param>
    /// <returns>return a DateTime in standard date format </returns>
public static DateTime? ShamsiToMilady(string shamsiDate)
    {
        if (string.IsNullOrEmpty(shamsiDate))
            return null;

        string[] datepart = shamsiDate.Split(new char[] { '/', '-' });
        if (datepart.Length != 3)
            return null;
        // 139p/k/b validation
        int year = 0, month = 0, day = 0;
        DateTime miladyDate;
        try
        {
            year = datepart[0].Length == 4 ? int.Parse(datepart[0]) : 
                                    int.Parse(datepart[2]);
            month = int.Parse(datepart[1]);
            day = datepart[0].Length == 4 ? int.Parse(datepart[2]) : 
                               int.Parse(datepart[0]);
            var currentCulture = Thread.CurrentThread.CurrentCulture;
            Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;
            miladyDate = new DateTime(year, month, day, new PersianCalendar());
            Thread.CurrentThread.CurrentCulture = currentCulture;
        }
        catch
        {
            return null;
        }

        return miladyDate;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-07T06:39:54.190

使用标签生成器 c# 创建波斯日历作为 html 助手，并将选定的波斯日期转换为公历日期

访问[https://github.com/tarqawwad/Persian-Calendar](https://github.com/tarqawwad/Persian-Calendar)

[单击此处显示示例](https://i.stack.imgur.com/6b0Xk.png)

# python - 增加django视图执行时间

> ID：11222430
> 
> 赞同：-2
> 
> 时间：2012-06-27T08:42:37.917
> 
> 标签：python, django

如何增加视图的 django 执行时间。我的应用程序的某些视图会执行很长的超时任务。所以我想增加我的 django 应用程序的执行时间

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:15:47.097

您正在尝试解决一个不存在的问题。Django 不限制您的响应时间，因此没有超时。如果您遇到超时错误，那可能是因为您的用户的浏览器 - 甚至可能是您的用户自己 - 感到无聊并放弃了。

在任何情况下，您都不应该尝试在在线视图中进行长时间运行的计算。通过 cron 任务或 Celery 之类的东西离线执行它们。

# python - 不同的帧，相同大小的 Tkinter

> ID：11222432
> 
> 赞同：0
> 
> 时间：2012-06-27T08:42:41.900
> 
> 标签：python, tkinter, frame

我已经为我的框架尝试了重量选项等，但似乎没有任何效果。我有以下表格，在单独的框架中，因为我希望根据 OptionMenu 选择删除第二个表格。

![桌子](../Images/be206a0d703eb67f4da7d9adc757e8c7.png)

我将如何使用以下代码执行此操作？

```
# Not complete code, just taken areas where I've created frames and added maybe a widget
choice_frame = Frame(win1, bg='black')
choice_frame.grid(row=2, column=1, sticky="ew", padx=1, pady=1)

choice_title = Label(choice_frame, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=0)
choice_title.grid(row=0, column=column+i, sticky="nsew", padx=1, pady=1)            
box=Entry(choice_frame, bg='white', borderwidth=0, width=0, textvariable=svar)
box.grid(row=1, column=column+i, sticky="ew", padx=1, pady=1) 

frame_table = Frame(win1, bg='black')
frame_table.grid(row=2, column=0, padx=1, pady=1)
text_table1 = Label(frame_table, text='Bearing Number', bg='white', borderwidth=0, width=0)
text_table1.grid(row=1, column=0, sticky="nsew", padx=1, pady=1)
empty1 = Label(frame_table, bg='white', borderwidth=0, width=0)
empty1.grid(row=2, column=0, sticky="nsew", padx=1, pady=1) 
```

如果需要更多代码，请告诉我。choice_frame 是在一个单独的定义中，如果这也能有所作为的话。尽管我在定义之外创建了框架并在内部创建了框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:16:51.820

如果您只想让第二帧与第一帧*高度*相同，请使用“nsew”的粘性值——您省略了“n”和“s”，这意味着它不会扩展以填充容器。

如果您真的希望它具有相同的*大小*（宽度和高度，加上列宽），它将需要更多的工作。

# lua - 什么时候应该在 corona sdk 中使用局部和全局函数和变量？

> ID：11222433
> 
> 赞同：1
> 
> 时间：2012-06-27T08:42:47.883
> 
> 标签：lua, coronasdk

如果有多个文件（main.lua）包含代码，我会声明一些全局变量和函数。这些变量和函数是否在所有文件中都是全局的，或者我可以通过任何文件访问它们吗？如果我只使用全局变量和函数，还有什么问题吗？我正在使用导演课程

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:03:45.033

根据定义，全局变量并不坏，但一般来说，您应该只在真正需要共享数据时才使用它们。

否则，您最终会得到不应交互的代码片段，但会以意想不到的方式共享变量（想想临时变量等）。

最好的方法是将所有内容声明为本地，除非您绝对必须共享该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T08:54:26.840

阅读本文（Corona Labs 官方推荐）：

[http://www.coronalabs.com/blog/2013/05/28/tutorial-goodbye-globals/](http://www.coronalabs.com/blog/2013/05/28/tutorial-goodbye-globals/)

基本上，他们建议：

*   不要使用全局变量

*   如果要访问模块之间的变量，请执行以下操作

创建一个新模块来存储“跨模块”变量。

**我的数据.lua**

```
--my global space
local M = {}
return M 
```

在其他模块中使用该模块：

在**main.lua**

```
local myData = require( "mydata" )
myData.myVariable = 10
director:changeScene("other") 
```

在**其他.lua**

```
local myData = require( "mydata" )
print(myData.myVariable) 
```

结果：10

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T23:14:40.433

使用 Director，我认为如果你在 main.lua 文件中声明全局变量，你可以在任何地方访问它们，但如果你在模块/场景中声明它们是全局的，它们在其他任何地方都无法访问。尽可能尝试使用局部变量，仅在必要时使用全局变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T13:43:52.533

如果您有多个 lua 文件，并且它们需要能够使用彼此的信息 - 您应该使用 lua 的模块系统。这就是它的设计目的。

你可以在这里阅读文档： [http ://www.lua.org/manual/5.1/manual.html#5.3](http://www.lua.org/manual/5.1/manual.html#5.3)

# python - 如何在python中创建对变量的引用？

> ID：11222440
> 
> 赞同：55
> 
> 时间：2012-06-27T08:43:03.303
> 
> 标签：python, reference

在代码中：

```
y = 7
x = y
x = 8 
```

现在，`y`将是 7，x 将是 8。但实际上我想改变`y`. 我可以分配参考`y`并这样做吗？

例如，在 C++ 中，同样的事情可以实现为：

```
int y = 8;
int &x = y;
x = 9; 
```

现在两者`y`&`x`将是 9

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-27T09:07:00.150

你不能。正如其他答案指出的那样，您可以（ab？）使用可变对象的别名来实现类似的效果。但是，这与 C++ 引用不同，我想解释一下实际发生的情况以避免任何误解。

你看，在 C++（和其他语言）中，一个变量（和对象字段，以及集合中的条目等）是一个存储位置，你写一个值（例如，一个整数、一个对象或一个指针）到那个位置。在此模型中，引用是存储位置（任何类型）的别名 - 当您分配给非引用变量时，您将一个值（即使它只是一个指针，它仍然是一个值）复制到存储位置；当您分配给参考时，您将复制到其他地方的存储位置。请注意，您不能更改引用本身 - 一旦它被绑定（并且它必须在您创建一个时立即更改）对它的所有分配都不会改变引用，而是改变所引用的任何内容。

在 Python（和其他语言）中，变量（和对象字段，以及集合中的条目等）只是一个名称。价值观在*某处*否则（例如撒在整个堆上），并且一个变量引用（不是在 C++ 引用的意义上，更像是一个指针减去指针算术）指向一个值。多个名称可以引用同一个值（这通常是一件好事）。Python（和其他语言）将引用值所需的任何内容称为引用，尽管与 C++ 引用和传递引用之类的东西完全无关。分配给变量（或对象字段，或...）只是使其引用另一个值。存储位置的整个模型不适用于 Python，程序员从不处理值的存储位置。他存储和洗牌的只是 Python 引用，这些不是 Python 中的值，因此它们不能成为其他 Python 引用的目标。

所有这一切都与值的可变性无关——例如，对于整数和列表来说都是一样的。您不能获取引用其中任何一个的变量，并覆盖它指向的对象。您只能告诉对象修改自身的某些部分 - 例如，更改它包含的一些引用。

这是一个更严格的模型吗？也许吧，但大多数时候它已经足够强大了。如果不是，您可以使用如下所示的自定义类或（等效但不太明显）单元素集合来解决它。

```
class Reference:
    def __init__(self, val):
        self._value = val # just refers to val, no copy

    def get(self):
        return self._value

    def set(self, val):
        self._value = val 
```

这仍然不允许您为“常规”变量或对象字段起别名，但您可以有多个变量引用同一个`Reference`对象（对于 mutable-singleton-collection 替代方案也是如此）。您只需要小心始终使用`.get()`/ `.set()`（或`[0]`）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-27T08:45:27.857

不，Python 没有这个功能。

如果你有一个列表（或任何其他可变对象），你可以通过改变 x 和 y 都绑定到的对象来做你想做的事情：

```
>>> x = [7]
>>> y = x
>>> y[0] = 8
>>> print x
[8] 
```

在线查看它：[ideone](http://ideone.com/YmzHL)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T09:05:56.437

或者，您可以使用自制的容器。

```
class Value(object):
    def __init__(self, value): self.value = value

y = Value(7)
x = y
x.value = 8
print y.value 
```

[ideone](http://ideone.com/qnorU)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-27T08:46:15.577

您应该为此使用可变对象。

在 python中`x`&`y`只是对对象的引用，所以`y = 7`意味着 y 指向 object `7`。 `x=y`表示`x`也指向`7`，但由于`7`是不可变的，因此更改 x 的值只会更改对象`7`并`y`仍然指向`7`。

```
>>> y = [7]
>>> x = y
>>> x[0] = 8 # here you're changing [7] not x or y, x & y are just references to [7]
>>> y
[8] 
```

# php - Mantis Bugtracker：下载 4Kb 后文件下载停止

> ID：11222441
> 
> 赞同：1
> 
> 时间：2012-06-27T08:43:04.800
> 
> 标签：php, iis-7, download, mantis, bug-tracker

我遇到了 Mantis Bugtracker（版本 1.1.8）的问题，其中文件下载仅达到 4 Kb，然后停止。我不知道这是产品本身的问题，还是服务器上的PHP安装问题。我尝试禁用输出缓冲（这是唯一接近 4Kb 的值），但这没有帮助。

文件存储在数据库中。应用程序运行在Windows Server 2008和Sql Server 2005上的IIS7上，安装的PHP版本为5.2.11。

有没有人有可能帮助解决这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:03:58.637

好吧，我想我将不得不面对我是个白痴的事实。我已经为 MSSQL 更改了 php.ini 中的 textsize 和 textlimit 属性，但是我错过了行首的分号。我只是取消了这两行的注释，现在它就像一个魅力。

```
; Valid range 0 - 2147483647\.  Default = 4096.
mssql.textlimit = 2147483647 

; Valid range 0 - 2147483647\.  Default = 4096.
mssql.textsize = 2147483647 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:00:00.467

好的...第一个想法是奇怪的超时？

您可以尝试设置最大超时...

另外，敲出一段独立的代码来获取和下载文件-排除/排除Mantis中的任何错误...我使用Mantis，但托管在Linux上，一切正常-相同的版本，但Linux和mysql ...

好的螳螂论坛上的快速搜索给了我：[http](http://www.mantisbt.org/forums/viewtopic.php?f=3&t=4712) ://www.mantisbt.org/forums/viewtopic.php?f=3&t=4712它准确地描述了你正在发生的事情，它确实是一个特定的 Windows/ISI/SQL Server事物 ;）

# asp.net-mvc - Asp.Net Mvc url 路由到登录页面？

> ID：11222443
> 
> 赞同：0
> 
> 时间：2012-06-27T08:43:16.717
> 
> 标签：asp.net-mvc, url-routing

控制器：

```
public class HomeController : Controller
{
    Models.MakaleSitesiDBEntities entity = new Models.MakaleSitesiDBEntities();

    public ActionResult ArticlesByCategory(int CategoryId)
    {
        IEnumerable<Models.TableArticles> articles = entity.TableArticles.Where(a => a.CategoryId == CategoryId && a.IsActive == true).OrderBy(a => a.PublishedOn);

        return View(articles.Reverse());
    }

    public ActionResult ArticleDetails(Guid ArticleId)
    {
        if (Session["IsUserRead"] == null || (Guid)Session["IsUserRead"] != ArticleId)
        {
            Session["IsUserRead"] = ArticleId;
            Models.TableArticles article = entity.TableArticles.Where(a => a.ArticleId == ArticleId).SingleOrDefault();
            article.ViewCount++;
            entity.SaveChanges();
        }

        return View(entity.TableArticles.Where(a => a.ArticleId == ArticleId).SingleOrDefault());
    }
} 
```

ArticlesByCategory 允许匿名用户，但 ArticleDetails 不允许。它将页面路由到登录页面？

全球.asax

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace MakaleSitesi
{
// Note: For instructions on enabling IIS6 or IIS7 classic mode, 
// visit http://go.microsoft.com/?LinkId=9394801

public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        // Use LocalDB for Entity Framework by default
        Database.DefaultConnectionFactory = new SqlConnectionFactory("Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True");

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        BundleTable.Bundles.RegisterTemplateBundles();
    }
}
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:52:08.007

对此行为的一种可能解释是，请求正在命中其他一些用`[Authorize]`属性修饰的控制器操作，而不是`ArticleDetails`操作。这可能是因为您可能已经完成的一些自定义路由设置无法按预期工作。

另一种可能的解释是，您在 IIS 或您使用的任何 Web 服务器中进行了一些配置，这些配置拒绝匿名访问给定的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:52:46.133

很可能是 Web.config 中身份验证或授权部分中的设置，以下将产生此行为：

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="~/Login/Index" defaultUrl="/Home" timeout="60" />
  </authentication>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web>

<location path="home/ArticlesByCategory">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

# android - 如何在 Gridview 中滚动 textview 的文本

> ID：11222447
> 
> 赞同：0
> 
> 时间：2012-06-27T08:43:27.463
> 
> 标签：android, gridview

我有一个 Gridveiew。在我通过的 GridView 的 getView 中，一个 RelativeLayout（包含图像视图和文本视图作为其子项）。我希望 textview 的文本水平滚动，因为它太长了。这是我的xml。但 textview 不滚动

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:clickable="false">
    <ImageView 
        android:id="@+id/theme_preview"
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:scaleType="fitXY" />
    <TextView 
        android:id="@+id/theme_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/theme_preview"
        android:layout_centerHorizontal="true"
        android:lines="1"
        android:ellipsize="marquee"
        android:scrollHorizontally="true"
        android:marqueeRepeatLimit="marquee_forever"
        />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:45:28.320

[将此属性](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ascrollHorizontally)添加到您的[TextView](http://developer.android.com/reference/android/widget/TextView.html)：

```
android:scrollHorizontally="true" 
```

或者，如果您想在代码中执行此操作：

```
textView.setHorizontallyScrolling(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T06:30:53.623

尝试使用这个，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="70dp"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/item_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:gravity="center_vertical|center_horizontal"
            android:layout_marginTop="14dp"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/item_text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/item_image"
            android:layout_below="@+id/item_image"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:freezesText="false"
            android:selectAllOnFocus="false"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever"
            android:gravity="center_vertical|center_horizontal"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </RelativeLayout> 
```

在您的 GridView 适配器类中设置您的 textview.setSelected(true)

```
 holder.txtTitle = (TextView) row.findViewById(R.id.item_text); 
 holder.txtTitle.setSelected(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:06:26.687

```
Try Using this,   

    <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:clickable="false">

                <ImageView 
                    android:id="@+id/theme_preview"
                    android:layout_width="match_parent" 
                    android:layout_height="wrap_content"
                    android:scaleType="fitXY" />
     <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
                <TextView 
                    android:id="@+id/theme_name"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/theme_preview"
                    android:layout_centerHorizontal="true"
                    android:lines="1"
                    android:ellipsize="marquee"
                    android:scrollHorizontally="true"
                    android:marqueeRepeatLimit="marquee_forever"
                    />
    </HorizontalScrollView>
            </RelativeLayout> 
```

# visual-studio-2010 - Internet Explorer 9 崩溃

> ID：11222449
> 
> 赞同：0
> 
> 时间：2012-06-27T08:43:35.077
> 
> 标签：visual-studio-2010, internet-explorer-9, coded-ui-tests

我打开 Internet Explorer 9：我输入浏览到谷歌页面加载，当它完成加载（选项卡）挂起时，我无法单击任何链接或做任何事情，但是我可以打开新选项卡并在另一个站点输入另一个选项卡时挂起，但一旦我在新标签中键入任何网站，它也会挂起，依此类推！

Internet Explorer 9 64bit 工作正常。！

这是我试图做的：

1.  从控制面板的“打开/关闭功能”中关闭 Internet Explorer 9 功能，然后将其打开，并没有解决问题。
2.  降级到 Internet Explorer 8，同样的问题也发生在 IE8 中！！！。所以我升级回 IE9（问题仍然存在）。
3.  切换到软件渲染，（没有解决问题）。
4.  将我的显卡更新为最新的驱动程序。
5.  打开没有添加的IE9。
6.  禁用所有插件

这一切都没有解决问题！

我需要让它工作，因为我需要通过 Visual Studio 2010 进行 UI 测试自动化，我无法让它在 Fire-Fox v13 上工作，我猜它不受支持。

任何人以前遇到过这个问题并且知道如何解决它？

我使用的是 Windows 7 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:29:50.993

如果您可以访问并安装 VS2010 Feature Pack 2，我相信它支持在 Firefox 中运行编码的 ui 测试。[但是，在 MSDN](http://msdn.microsoft.com/en-us/library/gg269468.aspx)上有相关信息，该页面推荐使用 Firefox 3.5 或 3.6。

# excel - SSIS 2012 OLE DB vs EXCEL动态工作表创建

> ID：11222461
> 
> 赞同：0
> 
> 时间：2012-06-27T08:44:15.597
> 
> 标签：excel, ssis, oledb

我有一个 Web 服务调用，它使用 Linq-To-Entity（强类型类列表）返回报告数据。我将此任务连接到带有执行 SQL 任务的 foreach 循环容器。我已经走到了一个十字路口，我应该采取什么方法来连接 OLE DB 还是使用 EXCEL。服务器 [W2k8 R2] 没有安装 Excel（我们希望尽可能避免这种情况）。

15 个工作表将具有相同的架构信息（每个工作表都是基于每个客户的），而最后一个工作表是摘要并且具有不同的架构。摘要也有自己的强类型类。

最终目标是将报告数据传递到 xlsx 文件，然后作为电子邮件附件传递给 SMTP 任务。

使用 OLE DB 或使用 EXCEL 连接在脚本任务中创建 Excel 表会更好吗？

将 SSIS 与 SQL Server 2012 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:24:35.680

您可能想看看 SQL Server Reporting Services 的报表订阅和交付。可能是实现您的要求[(msdn)](http://msdn.microsoft.com/en-us/library/ms159762)的一种更简单、更易于维护的方式。

不确定 EXCEL 连接是什么意思，但如果它是 SSIS 中的连接管理器，那么 EXCEL 和 OLEDB 连接实际上是一回事。EXCEL 连接管理器使用 Microsoft OLE DB Provider for Jet 4.0 [(msdn)](http://msdn.microsoft.com/en-us/library/ms139836%28v=sql.105%29.aspx)。

# c++ - 如何访问 boost lambda 表达式中的成员变量？

> ID：11222469
> 
> 赞同：1
> 
> 时间：2012-06-27T08:44:35.153
> 
> 标签：c++, boost, lambda

```
#include <functional>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <string>

#include <boost/lambda/lambda.hpp>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/lexical_cast.hpp>

using namespace std;
using namespace boost::lambda;
using namespace boost::multi_index;
using boost::multi_index_container;
using boost::lexical_cast;

struct student {
    int no;
    string name;
    student(int _no, string _name) : no(_no), name(_name)  { }
};

struct no {};
struct name {};

struct change_name {
    change_name(const string& new_namex) : new_name(new_namex) {}
    void operator()(student& stu) {
        stu.name = new_name;
    }
    private:
    string new_name;
};

int main()
{
    typedef multi_index_container< 
        student,
        indexed_by<
            ordered_non_unique<tag<no>, member<student, int, &student::no>>,
            ordered_non_unique<tag<name>, member<student, string, &student::name>>
        >> student_set;

    typedef student_set::index<no>::type student_set_no;

    student_set students;
    for (int i = 0; i < 10; ++i) 
        students.insert( student(i, "love student " + lexical_cast<string>(i)) );
    student_set_no& no_index = students.get<no>();
    student_set_no::iterator iter = no_index.find(3);

    //suppose i want to change the name to "you",
    no_index.modify(iter, change_name("you"));
    //how could i do this with lambda expression ?
    no_index.modify(iter, _1.name = "you");

    cout << iter->name << endl;
    return 0;
} 
```

如果没有定义函数运算符类，我怎么能更改名称？

谢谢。

# asp.net - 提交按钮错误

> ID：11222476
> 
> 赞同：1
> 
> 时间：2012-06-27T08:45:00.587
> 
> 标签：asp.net, ms-access, vb6

我在执行代码时出错。它说**“INSERT INTO 语句中的语法错误”**。这是我的代码：

```
Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click GridView1.Visible = True

Dim myConn As OleDbConnection      
Dim sqlString, takenby, dest, client, car As String     
Dim recordno As Integer     
Dim dte, exptime As String      
recordno = TextBox4.Text     
dte = TextBox1.Text     
car = ComboBox1.SelectedValue.ToString()     
takenby = ComboBox2.SelectedValue.ToString     
dest = ComboBox3.SelectedValue.ToString     
client = TextBox2.Text     
exptime = TextBox3.Text      
myConn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\student\WebSite3\App_Data\Database.mdb;Persist Security Info=False;")      
myConn.Open()     
sqlString = "INSERT INTO DETAILED GISTEC CARS(Record No, Date, Car, Taken By, Destination, Client, Expected Time to Return)VALUES(?recordno, ?dte, ?car, ?takenby, ?dest, ?client, ?exptime);"      
Dim cmd = New OleDbCommand(sqlString, myConn)      
cmd.ExecuteNonQuery()     
myConn.Close() 

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:35:44.673

You should change your query to use question mark placeholders and then add paramters to prevent (amongst other things) [sql injection](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i) issues.

You also need to add square brackets to your column names if they have spaces in them:

```
sqlString = "INSERT INTO [DETAILED GISTEC CARS] ([Record No], [Date], [Car], [Taken By], [Destination], [Client], [Expected Time to Return]) VALUES (?, ?, ?, ?, ?, ?, ?);"

Dim cmd = New OleDbCommand(sqlString, myConn)
cmd.Parameters.Add(New OleDbParameter("Record No", recordno))
cmd.Parameters.Add(New OleDbParameter("Date", dte))
'etc
'etc
cmd.ExecuteNonQuery() 
```

See [this page about OleDbParameters](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx) for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:17:36.823

cad 连接方法的替代方法是使用花括号数组占位符。这样的事情应该这样做：

```
sqlString = String.Format("INSERT INTO [DETAILED GISTEC CARS] ([Record No], [Date], [Car], [Taken By], [Destination], [Client], [Expected Time to Return]) VALUES ({0}, {1}, {2}, {3}, {4}, {5}, {6});", recordno, dte, car, takenby, dest, client, exptime) 
```

您还应该在非数字值周围加上单引号，转义任何用户输入的单引号，并为日期/时间列调用 Access CDATE 函数。因此，假设`dte`是用户输入的数据并且`exptime`是 Date\Time 列，那么这两个变量可能设置如下：

```
dte = "'" + TextBox1.Text.Replace("'", "''") + "'"
exptime = "CDATE('" + TextBox3.Text + "')" 
```

等等等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:00:22.393

尝试直接在 Access 中执行查询，直到它工作。

从这里看起来

*   VALUES 周围没有空格
*   您的表名包含空格，因此最好使用 [] 将表名括起来
*   与某些列名相同。
*   不确定 vb 中的 ?recordno 语法，所以最好使用 + 运算符

`sqlString = "INSERT INTO [DETAILED GISTEC CARS]([Record No], [Date], [Car], [Taken By], [Destination], [Client], [Expected Time to Return]) VALUES (" + recordno + ", " + dte + ", " + car +", " + takenby, " + dest + ", " + client + ", " + exptime + ");"`

# wordpress - 如何在 wordpress 中获取每月存档帖子？

> ID：11222478
> 
> 赞同：0
> 
> 时间：2012-06-27T08:45:05.623
> 
> 标签：wordpress

在我的 wordpress 博客中，我可以在月视图中获取所有存档列表。但是点击月份链接后，它不会显示该月份的博客文章。它只是刷新页面。有没有要添加或运行的 php 文件？那么如何获取单击存档列表中月份链接的特定月份的所有帖子？

EX：当我点击存档列表中的“六月”链接时，它不会显示六月的帖子。它只是刷新页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:03:28.843

默认情况下，wordpress 中安装了存档小部件，您只需将该小部件放在侧边栏中您想要显示存档帖子的任何位置。

```
register_sidebar( array(
        'name' => __( 'Primary Widget Area', 'twentyten' ),
        'id' => 'primary-widget-area',
        'description' => __( 'The primary widget area', 'twentyten' ),
        'before_widget' => '<li id="%1$s" class="widget-container %2$s">',
        'after_widget' => '</li>',
        'before_title' => '<h3 class="widget-title">',
        'after_title' => '</h3>',
    ) ); 
```

在您的主题 function.php 中注册一个侧边栏，然后在该侧边栏中分配该小部件。

这是主题下archive.php文件的代码

```
 <?php
/**
 * The template for displaying Archive pages.
 *
 * Used to display archive-type pages if nothing more specific matches a query.
 * For example, puts together date-based pages if no date.php file exists.
 *
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */

get_header(); ?>

        <div id="container">
            <div id="content" role="main">

<?php
    /* Queue the first post, that way we know
     * what date we're dealing with (if that is the case).
     *
     * We reset this later so we can run the loop
     * properly with a call to rewind_posts().
     */
    if ( have_posts() )
        the_post();
?>

            <h1 class="page-title">
<?php if ( is_day() ) : ?>
                <?php printf( __( 'Daily Archives: <span>%s</span>', 'twentyten' ), get_the_date() ); ?>
<?php elseif ( is_month() ) : ?>
                <?php printf( __( 'Monthly Archives: <span>%s</span>', 'twentyten' ), get_the_date( 'F Y' ) ); ?>
<?php elseif ( is_year() ) : ?>
                <?php printf( __( 'Yearly Archives: <span>%s</span>', 'twentyten' ), get_the_date( 'Y' ) ); ?>
<?php else : ?>
                <?php _e( 'Blog Archives', 'twentyten' ); ?>
<?php endif; ?>
            </h1>

<?php
    /* Since we called the_post() above, we need to
     * rewind the loop back to the beginning that way
     * we can run the loop properly, in full.
     */
    rewind_posts();

    /* Run the loop for the archives page to output the posts.
     * If you want to overload this in a child theme then include a file
     * called loop-archive.php and that will be used instead.
     */
     get_template_part( 'loop', 'archive' );
?>

            </div><!-- #content -->
        </div><!-- #container -->

<?php get_sidebar(); ?>
<?php get_footer(); ?>

archive.php 
```

# javascript - 匹配带有一堆斜线的东西的正确方法

> ID：11222479
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:45:07.493
> 
> 标签：javascript, regex

所以我调用一个页面，页面返回这个

```
onload":["goURI(\"\\\/goto\\\/3318250268968\\\/?context=edited\"); 
```

之间的号码可以非常随叫随到。我基本上想做

```
onload":["goURI(\"\\\/goto\\\/<get this>\\\/?context=edited\"); 
```

与我想要抓住的东西，仅此而已。最好的方法是什么？我对正则表达式很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:07:13.970

您提供的字符串可以使用以下模式进行匹配。

```
onload":\["goURI\(\\"\\\\\\/goto\\\\\\/(.+?)\\\\\\/\?context=edited\\"\); 
```

# c# - 如何在一个 linq 查询中从 2 个表中返回值

> ID：11222484
> 
> 赞同：0
> 
> 时间：2012-06-27T08:45:28.290
> 
> 标签：c#, linq, entity-framework, linq-to-sql, c#-4.0

请考虑这张表：

```
PK_Id          Number            Year            Month             Value
-------------------------------------------------------------------------
 1              1                2000              5                 100000
 410            4                2000              6                 10000
 8888           1                2001              5                 100 
```

我 `Id=8888`现在想**先**选择记录，`Id=8888`然后再**选择**该记录的上一年*（我的意思是 Id=1）*。我如何使用 linq 和一个查询来做到这一点。

基本上我们有一些查询，首先它应该从一个表中找到一个值（可能不是 PK）并在另一个表中找到**相应的记录。**我如何使用 linq 和一个对数据库的引用来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:06:03.267

```
from a in Record
where a.PK_Id == 8888
from b in Record
where b.Number == a.Number && b.Year == a.Year - 1
select new { Current = a, Previous = b } 
```

或者

```
Record
.Where(a => a.PK_Id == 888)
.SelectMany(a =>
    Record
    .Where(b => b.Number == a.Number && b.Year == a.Year - 1)
    .Select(b => new { Current = a, Previous = b }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:15:36.160

如果我理解你的问题是正确的，那么你需要过滤一个表的数据并连接两个表。

您可以加入表格并过滤数据

```
var query = from c in Table1
            join o in Table2 on c.Col1 equals o.Col2
            where o.Col3 == "x"
            select c; 
```

或者你可以从一个表中过滤你的数据，然后加入这些表（结果是一样的）

```
var query = from c in Table1.Where(item => item.Col3 == "x")
            join o in Table2 on c.Col1 equals o.Col2
            select c; 
```

# asp.net - 使用嵌入在请求标头中的 SSL 客户端证书

> ID：11222488
> 
> 赞同：5
> 
> 时间：2012-06-27T08:45:47.497
> 
> 标签：asp.net, security, http-headers, ssl-certificate

为了解决 SSL 终止负载平衡器的问题（它不会将客户端证书转发到应用程序服务器），我们的 ISP 已配置我们的环境，以便客户端证书在 HTTP 标头中转发到真实服务器（如 X-客户证书）。

我将使用映射到已颁发证书的序列号的 PIN 对客户进行身份验证。但是如何从自定义标头中获取证书？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:06:30.460

我假设您知道您可以使用以下方式获取证书数据

```
String s = Request.Headers["X-Client-Cert"]; 
```

现在的问题是证书以哪种格式添加到标题中。我会假设它是用 Base64 编码的。

```
byte[] certdata = Convert.FromBase64String(s); 
```

然后您可以从中创建证书对象：

```
X509Certificate cert = new X509Certificate(certdata); 
```

根据负载均衡器是否检查客户端证书的有效性（以及它是否已由正确的根 CA 签发），您必须自己检查证书的有效性。

之后，您可以通过读取序列号`cert.GetSerialNumber();`

# debugging - 断点移动到另一个类

> ID：11222490
> 
> 赞同：0
> 
> 时间：2012-06-27T08:45:53.070
> 
> 标签：debugging, visual-studio-2008, breakpoints

我的断点有一个奇怪的行为。当我在我的软件运行时在对话框函数中设置一个时，断点直接移动到相同的函数但在另一个对话框类中。

例如 ：

```
void MyDialog1::MyFunction()
{
   // some code where I set my break-point
}

void MyDialog2::MyFunction()
{
   // some code where the break-point moves by "itself"
} 
```

所有优化功能均已关闭。我不明白这个魔法是怎么做到的……我的 PDB 文件有可能在某种程度上被损坏了吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:56:04.770

当项目文件和用户特定的 VS 文件（如 .user .suo）不同步时，通常会发生这种情况。您可能会看到并向不属于项目构建的文件添加断点，但作为构建的一部分的文件在工作区中不可见但已设置断点。当您调试实际编译代码的断点时，就会出现。

我已经看到这种情况发生了几次，并且您应该做一些事情

删除所有 .suo 和 .user 文件 - 这应该删除所有保存的断点。检查 .vcproj 文件和源文件，看看是否有任何异常。

# c# - 如何将带宽分配给我的应用程序运行的端口？

> ID：11222491
> 
> 赞同：0
> 
> 时间：2012-06-27T08:45:55.240
> 
> 标签：c#

我的应用程序（WIN app C#.net）在端口“1001”上运行，端口分配的带宽为 10MB。我的要求是如何获得以编程方式运行我的应用程序的端口 1001 的带宽？

获得带宽后，我想将 70% 的带宽分配给我的应用程序，其余的我想分配给其他应用程序吗？我怎样才能？

# ruby-on-rails - 无法使用 Rails 3.2.6 启动 WEBrick

> ID：11222494
> 
> 赞同：0
> 
> 时间：2012-06-27T08:46:02.033
> 
> 标签：ruby-on-rails

我将我的 Rails 版本 3.2.3 更新到 3.2.6。运行服务器后出现以下错误：

```
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `instance' for #<Class:0x9844050> (NoMethodError)
    from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.6/lib/active_model/observing.rb:86:in `instantiate_observer'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in `block in instantiate_observers'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in `each'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in `instantiate_observers'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/railtie.rb:117:in `block (2 levels) in <class:Railtie>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:25:in `each'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/railtie.rb:116:in `block in <class:Railtie>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/prasanna/Projects/Petcare/config/environment.rb:5:in `<top (required)>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /home/prasanna/Projects/Petcare/config.ru:4:in `block in <main>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /home/prasanna/Projects/Petcare/config.ru:1:in `new'
    from /home/prasanna/Projects/Petcare/config.ru:1:in `<main>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

环境.rb

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Petcare::Application.initialize! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:50:01.283

这是因为 Rails 3.x 与 Ruby 1.9.1 存在问题。尝试将您的 Ruby 更新到 1.9.3。

来源： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:09:58.810

你有观察员吗？如果是这样，请确保它们继承自`ActiveModel::Observer`. 如果它们是自定义类，请确保它们包含`Singleton`模块。

# php - 我们什么时候应该在 PHP 中使用流包装器和套接字？

> ID：11222498
> 
> 赞同：3
> 
> 时间：2012-06-27T08:46:19.187
> 
> 标签：php

我不明白我们什么时候应该使用流包装器和套接字。谁能告诉我什么时候应该在 PHP 中使用流包装器和套接字？

请给我一些同样的例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:49:40.097

### 流包装器

*[在Streams](http://php.net/manual/intro.stream.php)引用 PHP 手册：简介：*

> 包装器是告诉流如何处理特定协议/编码的附加代码。例如，http 包装器知道如何将 URL 转换为对远程服务器上文件的 HTTP/1.0 请求。默认情况下，PHP 内置了许多包装器（请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器）

每当您使用类似`fopen`or的函数打开 URL、FTP 连接等时，您都会使用 Stream 包装器`file_get_contents`。流包装器的好处是您不需要对协议了解太多（除非您编写自己的自定义包装器）。

由于您通过常规[文件功能^(*Docs 汇集所有访问权限，*)](http://php.net/manual/en/function.fopen.php)因此您无需学习另一个 API，这是一个好处。您可能已经使用过 Stream Wrappers 而没有注意到它，例如，当您这样做时

```
$pageContent = file_get_contents('http://example.com'); 
```

在您的代码中的某处。Stream Wrapper 的另一个好处是您可以将过滤器放在前面并以最小的努力修改流，例如

```
$unzipped = file_get_contents('compress.zlib://http://example.com'); 
```

将通过 gzip 解压缩从该网页运行内容。

### 插座

*[在Sockets](http://php.net/manual/intro.sockets.php)引用 PHP 手册：简介：*

> 套接字扩展实现了基于流行的 BSD 套接字的套接字通信功能的低级接口，提供了充当套接字服务器和客户端的可能性。

由于 PHP 提供了许多开箱即用的 Stream Wrapper，并且几乎所有东西都有一个 API，因此很少有使用 Sockets 的用例。

当您需要在协议级别实现以实现某个协议的客户端或服务器时，您可以使用套接字。这通常需要对实现的协议有深入的了解，例如，与`file_get_contents`上面示例中的调用相同，您需要做（[示例引用自手册](http://php.net/manual/en/function.fsockopen.php)，您甚至需要做更多实际操作）

```
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: www.example.com\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

正如您所看到的，您需要知道如何构造 HTTP 请求以及如何解析 HTTP 响应，而不是仅仅调用 URL 并让 Stream Wrapper 处理所有细节。

您可能还会发现本关于 Socket 编程的教程很有帮助：

*   [http://christophh.net/2012/07/24/php-socket-programming/](http://christophh.net/2012/07/24/php-socket-programming/)

# android - sharedpreference 和内部文件存储之间的主要区别

> ID：11222499
> 
> 赞同：9
> 
> 时间：2012-06-27T08:46:20.037
> 
> 标签：android, sharedpreferences

我想知道哪个更适合存储目的：共享首选项或内部文件存储。哪个更快？他们中的任何人有任何记忆问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T08:52:31.360

*   **SharedPreference：**将私有原始数据存储在键值对中。（存储小条目/数据）
*   **内部存储：**将私人数据存储在设备内存中。（存储大型数据集）

更多关于存储选项的信息：[​​存储选项](http://developer.android.com/guide/topics/data/data-storage.html)

我看到了一个关于共享偏好的问题。

问题：当您在使用 SharedPreference 时遇到强制关闭/应用程序崩溃时，SharedPreference 将为空。在这里您可以阅读更多相关信息：[当应用程序被强制关闭或崩溃时，共享首选项会重置](https://stackoverflow.com/questions/4801074/shared-preferences-reset-when-the-app-is-force-closed-or-crashes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:04:09.493

嗯，最后`Shared preferences`也得救了`internal file storage`。

同`Share preferences`对`key-value`，将数据保存在内存中，最后由系统保存到内部文件存储中。

> 如果您想经常访问该值，您可以使用`Shared preferences`.
> 
> 如果你的数据结构小而不复杂，可以直接使用`Share preferences`
> 
> 如果你只是想保存数据，而且数据会占用很多内存空间，你可以直接使用文件来保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:49:26.603

请阅读有关数据存储的[Android 文档。](http://developer.android.com/guide/topics/data/data-storage.html)

如果您想存储非常小的值，那么您可以选择 SharedPrefrence。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:51:36.040

这完全取决于您喜欢做什么：如果您有相当少量的键值对，请使用共享首选项。如果您有大量数据，请使用文件，因为共享首选项将在首次使用后保存在内存中。因此，在其中存储大量数据是一个坏主意；-)。

# osx-lion - 在查找器问题中查找文件选择它

> ID：11222501
> 
> 赞同：1
> 
> 时间：2012-06-27T08:46:33.517
> 
> 标签：osx-lion, applescript, osx-snow-leopard

我有这个脚本来查找文件并选择它

```
set filePath to ("filePath.ext" as POSIX file)
tell application "Finder"
    if (exists filePath) then
            select filePath
            activate
    else
        display alert "File " & filePath & " does not exist"
    end if
end tell 
```

它在 Mac os x 10.6.x (LION) 上运行良好，但是当我尝试在 Mac os x 10.5.x (snow-leopard) 上运行此脚本时，它正在选择文件但花费了太多时间。任何建议如何使此代码在两个版本的 Mac 上都能正常工作。提前致谢 ：）

**编辑：**

我正在从网络驱动器中选择文件，并且宿舍系统具有 Windows 操作系统。所有系统都位于同一网络中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:14:11.900

该`reveal`命令可能对您有所帮助。它只是在查找器中找到一个文件，必要时打开一个新窗口，然后选择该文件——所有这一切只使用一行代码：

```
tell application "Finder" to reveal path:to:some:file 
```

当然，该文件必须实际存在才能正常工作。当一个特定的文件/目录以别名形式（即）呈现时，您就知道它存在`Macintosh HD:Users:billybob:Desktop:howToHack.pdf`。尝试将不存在的文件强制转换为别名将导致错误。如果您 100% 确定该文件存在并且确切地知道它的位置，那么恭喜！你少担心一件事。如果您的确定性水平低于 100%，请使用`try-catch`块。他们多次救了我的命。这样，如果您像我一样通过 Internet 分发您的应用程序，您的客户就不会收到无法解读的错误消息。

这方面的一个例子如下所示：

```
set theFile to "/Users/billybob/Desktop/folder/subfolder/subfolder2/subfolder3/fineByMe.mp3"
try
    set theFile to (theFile) as alias
    tell application "Finder" to reveal theFile
on error
    display alert "The file " & quoted form of theFile & "does not exist."
    -- The variable 'theFile' couldn't be coerced into an alias.
    -- Therefore, 'theFile' still has a string value and it can be used in dialogs/alerts among other things.
end try 
```

这比你写的更有效还是更省时？老实说，我不是特别确定。但是，我编写了许多脚本，其中包括`reveal`Mac OS X 10.5.8 (Leopard)、Mac OS X 10.6.8 (Snow-Leopard) 和 Mac OS X 10.7.3 (Lion) 上的命令，结果一直令人满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:29:13.310

您的代码中有错误。

1.  您忘记了显示警报行中“存在”之后的句点。
2.  您无法显示 posix 文件。它必须转换为字符串。苹果没有这个优化。
3.  exists 命令将始终按照您使用它的方式返回 false，因为您没有提供完整的文件路径。尽管 java 和 c++ 允许缩写文件路径，但苹果不允许。

我无法发表评论，所以我被迫将其作为答案。

# ios - RestKit Oauth 2 谷歌 API

> ID：11222502
> 
> 赞同：0
> 
> 时间：2012-06-27T08:46:44.713
> 
> 标签：ios, oauth, oauth-2.0, restkit, google-drive-api

我正在尝试在 iOS 上使用 RestKit 访问 Google Drive API，但我遇到了 Oauth 身份验证问题。

我一直在关注他们在此主题上的 Wiki 页面： [Oauth Support On RestKit](https://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit)

基本上我们这样创建客户端：

```
oauthClient = [RKClientOAuth clientWithClientID:[Client Id] secret:[Client Secret] delegate:[Your Delegate]];
[oauthClient setAuthorizationCode:[User Authorization Code]];
[oauthClient setAuthorizationURL:[Authorization Endpoint]];
[oauthClient setCallbackURL:[Your application callbackurl]];
[oauthClient validateAuthorizationCode]; 
```

我们在方法中的委托上收到一个访问令牌

```
- (void)OAuthClient:(RKOAuthClient *)client didAcquireAccessToken:(NSString *)token 
```

在这里，我们可以创建一个 ObjectManager 来发出请求和所有其他操作

```
RKObjectManager* objectManager = [RKObjectManager sharedManager];
objectManager.client.baseURL = @"YOUR API URL";
objectManager.client.OAuth2AccessToken = @"YOUR ACCESS TOKEN";
objectManager.client.authenticationType = RKRequestAuthenticationTypeOAuth2; 
```

有了这一切，我遇到了一些问题。

*   首先是我们如何获取这里需要的授权码：

    ```
    [oauthClient setAuthorizationCode:[User Authorization Code]]; 
    ```

    我没有遇到客户端 ID、客户端密码、授权端点、回调 URL 和 API URL 的问题，因为它们主要在谷歌控制台 API 中提供，但我不知道如何获取。

*   其次，访问令牌将是临时访问令牌还是刷新令牌，因为它们在谷歌 API 中被命名？如果是第一个，我们如何获得Refresh Token？

我一直在尝试用 RestKit 做到这一点，但可能有更好的方法，所以我对其他想法持开放态度。我在 Restkit 中找不到太多关于 Oauth 支持的信息。

预先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:35:12.693

您必须使用 Google ObjectiveC 库才能访问 Google Drive APi。 [https://developers.google.com/drive/quickstart-ios](https://developers.google.com/drive/quickstart-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:47:01.393

您可以将 Google 的 Objective-C 客户端库用于 Drive API，包括 OAuth 2 登录。

[http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T22:23:37.077

您从您的客户端 ID 和客户端密码开始，将用户定向到资源所有者的授权服务器。授权服务器和用户相互验证，您的应用程序将返回一个授权码。您返回授权服务器并将授权代码交换为访问令牌。

如果访问令牌有时间限制，那么当您发现访问令牌已超时时，您将使用刷新令牌来请求新的访问令牌。

# asp.net - IIS 6.0 正确呈现 HTML 页面，但在提供 .aspx 页面时出错

> ID：11222504
> 
> 赞同：0
> 
> 时间：2012-06-27T08:47:02.563
> 
> 标签：asp.net, iis-6

我有一个内置的应用程序`ASP.NET/C#`。

我已经为应用程序创建了一个 WebSetUp。安装程序安装成功。它还创建了`Cwiz`我在安装过程中提到的虚拟目录。

我也启用`ASP.NET`了`IIS 6.0`. 现在，当我尝试访问 localhost/Cwiz/Login.aspx 之类的页面时，它给了我一个错误

```
Server Error in '/' Application.

The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /HomeLogin.aspx 
```

当我尝试访问一个 html 页面时，`localhost/Cwiz/test.html`它可以正常工作。

我正在使用`Forms Authentication`.

我已经搜索了足够多的解决方案，但似乎无法猜测出什么问题。我`ASP.NET`在`IIS`.

谁能帮我解决这个问题。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:50:52.453

错误很明显，`/HomeLogin.aspx`不存在，确保在 web.config 文件中添加适当的 url：

```
<authentication mode="Forms">
  <forms loginUrl="~/HomeLogin.aspx" timeout="2880" />
</authentication> 
```

您被重定向到此文件，因为您尚未通过服务器的身份验证

顺便说一句，您评论道：

> 现在，当我尝试访问 localhost/Cwiz/Login.aspx 之类的页面时，它给了我一个错误

但是您的错误包含：

> 请求的 URL：/HomeLogin.aspx

登录页面不同，也许这就是问题所在

# javascript - 一个 Javascript 回调模式示例——它真的更高效吗？

> ID：11222505
> 
> 赞同：2
> 
> 时间：2012-06-27T08:47:03.953
> 
> 标签：javascript, performance, design-patterns, callback

我读了一本在线[书](http://my.safaribooksonline.com/book/programming/javascript/9781449399115/functions/callback_pattern#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODE0NDkzOTkxMTUvYmFja2dyb3VuZA==)。它给出了一个回调模式示例，如下所示。

```
var findNodes = function () {
    var i = 100000, // big, heavy loop
        nodes = [], // stores the result
        found; // the next node found
    while (i) {
        i -= 1;
        // complex logic here...
        nodes.push(found);
    }
    return nodes;
};
var hide = function (nodes) {
    var i = 0, max = nodes.length;
    for (; i < max; i += 1) {
        nodes[i].style.display = "none";
    }
};

// executing the functions
hide(findNodes()); 
```

它说这效率不高，因为它循环两次找到的节点，下面的代码效率更高。

```
// refactored findNodes() to accept a callback
var findNodes = function (callback) {
    var i = 100000,
        nodes = [],
        found;

    // check if callback is callable
    if (typeof callback !== "function") {
        callback = false;
    }

    while (i) {
        i -= 1;

        // complex logic here...

        // now callback:
        if (callback) {
            callback(found);
        }

        nodes.push(found);
    }
    return nodes;
};
// a callback function
var hide = function (node) {
    node.style.display = "none";
};

// find the nodes and hide them as you go
findNodes(hide); 
```

但是，两者都是O(n)，调用函数的开销可能很大，导致findNodes()（带回调）的每次迭代都需要更多的时间。所以我想知道这个修改是否真的像作者所说的那样与众不同。我应该如何衡量这两种工具的成本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:51:26.137

根据数组的大小，仅循环一次的示例*可能*更有效。

但是，您的担忧是正确的。尤其是在较旧的 JS 引擎中，函数调用的开销很大。

与所有性能优化一样，这是您应该衡量的。使用分析器测试代码以发现瓶颈，然后进行优化，然后重新运行分析以确定它是否有积极的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:55:22.807

我将这两个示例放在一个 HTML 文件中的两个函数中，并使用 Chrome 控制台对它们进行计时，如下所示：

```
console.time('slow'); slow(); console.timeEnd('slow');
console.time('fast'); fast(); console.timeEnd('fast'); 
```

这表明第一个示例，“低效”的示例，运行速度是第二个实现的两倍。

# c++ - 为什么不允许全局的结构/联合子作为模板引用参数 - 但全局本身？

> ID：11222519
> 
> 赞同：2
> 
> 时间：2012-06-27T08:48:07.823
> 
> 标签：c++, templates, globals

我尝试通过使用模板参数来引用全局变量的子元素 - 它确实适用于全局变量，但不适用于全局变量的子元素 - 为什么在编译时无法解析子元素的位置？

```
typedef unsigned char byte_t;
typedef unsigned short word_t;

struct byte_reg_t
{
     byte_t low;
     byte_t high;
};

union word_reg_t
{
     word_t value;
     byte_reg_t part;
};

word_t rax;
byte_t rah;
word_reg_t r16;
byte_reg_t r8;

template<typename ValueType, ValueType& Ref>
ValueType ret_ref()
{
     return Ref;
}

int main()
{
    word_t x = ret_ref<word_t,rax>();
    byte_t h = ret_ref<byte_t,rah>();
    //word_t sx = ret_ref<word_t,r16.value>(); // compile error
    //byte_t sh = ret_ref<byte_t,r16.part.low>(); // compile error
    //byte_t sh2 = ret_ref<byte_t,r8.low>(); // compile error

    return 0;
} 
```

VS2010 和 clang 3.1 编译器不允许 // 编译错误行

感谢您提供任何清晰的描述，因为我没有看到编译器这种行为的任何技术原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:05:22.370

答案在于 C++ 标准。抱歉过时了，但我的版本（ISO/IEC 14882，2003 年第 2 版）说（第 246 页）：

> §14.3.2 模板非类型参数
> 
> ```
>  [..] 
> ```
> 
> 3 [注意：数组元素的地址和非静态类成员的名称或地址是不可接受的模板参数。[..]]

# c++ - g++和c++有什么区别？

> ID：11222521
> 
> 赞同：0
> 
> 时间：2012-06-27T08:48:33.160
> 
> 标签：c++, gcc, g++

> **可能重复：**
> [“g++”和“c++”编译器](https://stackoverflow.com/questions/1712756/g-and-c-compiler)

`g++`和`c++`编译器有什么区别？我必须使用其中的哪一个？

我的意思是我可以写`с++ test.cpp`或者`g++ test.cpp`我收到相同的可执行文件。
我检查了`md5sum`它们，它们也像这个文件的大小一样。
所以我想了解有什么区别。

# c# - 在构建时自动将 C++ 库复制到 C# 项目？（视觉工作室 2010）

> ID：11222522
> 
> 赞同：2
> 
> 时间：2012-06-27T08:48:33.520
> 
> 标签：c#, c++, visual-studio-2010

我有一个用 C++ 编写的库，以及一个用 C# 编写的库的包装器。

这两个项目都在开发中，现在我必须在每次构建后手动将 .dll 从 C++ 项目复制到 C# 项目。

所以我想知道是否有任何方法可以让 Visual Studio 在重新构建时自动从 C++ 项目中复制 .dll？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:52:37.817

您可以在visual studio中使用Build events并放置dos命令将dll复制到当前项目

在 Visual Studio 的解决方案资源管理器中右键单击项目，选择属性。在 Build events 中，您可以键入：

```
copy c:\Cplusproject\yourproject.dll $(TargetDir) 
```

您可以根据您的要求使用 Post Build 或 Pre Build 事件

见这篇文章： http: [//geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx](http://geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:08:19.793

有几种方法可以实现您的要求。

这里我假设您使用的是 Microsoft Visual C++，但在其他平台上也会有类似的功能。

*   右键单击解决方案资源管理器中代表 vc++ 项目的图标
*   单击属性
*   选择 Configuration Properties/Build Events/Post Build Event 节点
*   编写复制 dll 所需的命令行

请记住，您必须为项目支持的每个配置和每个平台执行此操作。

或者，您可以要求链接器直接在您的 C# 项目引用的位置上输出：

*   右键单击解决方案资源管理器中代表 vc++ 项目的图标
*   单击属性
*   选择配置属性/链接器/常规事件节点
*   将输出文件属性设置为 C# 项目引用的位置

也就是说，您也可以从 c# 项目中获取 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:57:14.180

为此使用构建后事件。就像`xcopy <yourDllFilePath> <destinationPath>`它会将你的dll文件复制到你想要的任何地方

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:01:52.590

如果您使用该 c++ dll 作为参考，那么您可以将 c++ 项目添加为项目参考，并且所有内容都将自动复制，并且在调试时也有帮助。

单击 yr c# 项目中的引用，然后打开一个对话框窗口并选择 Projects 并选择 yr c++ 项目

# user-interface - 用于桌面应用程序的免费且快速的 GUI 构建器

> ID：11222525
> 
> 赞同：0
> 
> 时间：2012-06-27T08:48:41.550
> 
> 标签：user-interface, desktop-application

我正在开发用于商业目的的桌面应用程序，它是在 Swing/Java 中实现的，但是速度太慢了，所以我的经理要求我在不同的 GUI 框架中重新实现它，而且免费且足够快，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:58:24.723

由于您没有指定语言/技术，我建议在 Flash 中使用 flex 框架。flex 中有很多与 java 集成得很好的技术。它的开发环境也很相似。以下是一些受 java 启发的库/框架（例如）：

*   弹性魔力
*   火焰-ds/花岗岩-ds
*   弹簧动作脚本
*   弹性单元
*   flexmonkey（硒）

虽然闪存在消费者（近年来）方面的表现普遍不佳，但我相信它在工具的商业方面非常强大。然而，当谈到 UI 时，很少有东西能打败它。我知道很多公司仍然使用 flex 前端 + java 后端。

# mysql - #1054 - 'where 子句'中的未知列 'Received'

> ID：11222528
> 
> 赞同：-6
> 
> 时间：2012-06-27T08:48:49.820
> 
> 标签：mysql

```
SELECT 
  tblorder.fld_userid, tblorder.fld_first_name, 
  tblorder.fld_status, tblordereditems.fld_order_id
FROM tblorder
INNER JOIN tblordereditems ON tblorder.fld_id = tblordereditems.fld_order_id
WHERE tblorder.fld_status = Received 
```

你能告诉我错误吗。请！好的，我对不完整的问题感到抱歉。请不要禁止提问。这是从其他人那里获得帮助的唯一方式。今天我也有很多问题，但我不能在 stackoverflow 中问任何一个。所以请让我问我问题。我会小心的。警告不要只是禁止我。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:49:19.917

```
SELECT tblorder.fld_userid, tblorder.fld_first_name, 
       tblorder.fld_status, tblordereditems.fld_order_id 
FROM tblorder 
INNER JOIN tblordereditems ON tblorder.fld_id = tblordereditems.fld_order_id
WHERE tblorder.fld_status = 'Received' 
```

# c++ - 我怎样才能制作自己的惰性迭代器？

> ID：11222529
> 
> 赞同：11
> 
> 时间：2012-06-27T08:48:50.263
> 
> 标签：c++, c++11, iterator, lazy-evaluation

我正在制作一个产生大量数据的 C++11 类。该数据当前来自数据库，无法完全放入内存。我想为用户提供一个行为类似于常规 STL 迭代器的迭代器，但这会很懒惰。更准确地说，我可以做这样的事情：

```
for (auto& item : big_bunch_of_data) {
    do_stuff_with(item);
} 
```

仅在每次迭代时从数据库中检索项目。如果我是对的，这种新语法就是糖

```
for (stuff::iterator it = big_bunch_of_data.begin();it != big_bunch_of_data.end();it++) {
    do_stuff_with(*it);
} 
```

这是否意味着通过提供和`begin`，我可以获得所需的行为？而且，这些方法应该做什么？我的意思是，我可以在不破坏东西的情况下让他们变得懒惰吗？`end``operator++`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T08:56:21.393

几乎; 如果找不到容器类上的方法，`begin`编译器将在其他几个地方查找开始和结束迭代器；`end`这就是基于范围的 for 循环在没有`begin`and`end`成员的数组上的工作方式。它还将通过 ADL寻找免费的函数`begin`和，并最终寻找和，因此有很多机会来改进现有容器的基于范围的 for 循环支持。 [第 6.5.4 节](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4659.pdf)涵盖了细节。`end``std::begin``std::end`

对于您的其他问题，迭代器绝对可以是懒惰的！一个很好的例子是`std::istream_iterator`它*在*从控制台读取输入时必须是惰性的。

在循环中使用迭代器的要求`for`是它应该满足*输入迭代器*类别，这在[第 24.2.3 节](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4659.pdf)中有描述；该类别所需的操作是`!=`、 一元`*`、 前后增量`++`。

为了让语言知道你已经创建了一个输入迭代器，你应该从`std::iterator<std::input_iterator_tag, T, void, T *, T &>`哪里继承`T`你的迭代器处理的类型（[第 24.4.3 节](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4659.pdf)）。

# leaflet - 传单 js：如何为 L.CircleMarker 创建工具提示？

> ID：11222538
> 
> 赞同：4
> 
> 时间：2012-06-27T08:49:20.627
> 
> 标签：leaflet

我想知道是否有办法为 L.CircleMarker 设置工具提示？

```
var geojsonLayerVessel = new L.GeoJSON(null, {
    pointToLayer: function (latlng){
    return new L.CircleMarker(latlng, {
        radius: 5,
        fillColor: "#ff7800",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8,
        title: "test"
    });
}
}); 
```

尝试了上面的代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:18:17.650

这不适用于`CircleMarkers`. 但是你可以创建一点`DivIcon`并用圆角设计它。 `DivIcon`s 确实支持该`'title'`选项。

[http://jsfiddle.net/63teycsq/1/](http://jsfiddle.net/63teycsq/1/)

作为 pointToLayer 提供的函数：

```
function (latlng){
    return L.marker(latlng, 
                    { icon : L.divIcon({ className : 'circle',
                                         iconSize : [ 5, 5 ]}),
                      title: 'test'});
} 
```

以及 div 的样式：

```
div.circle {
    background-color: #ff7800;
    border-color: black;
    border-radius: 3px;
    border-style: solid;
    border-width: 1px;
    width:5px;
    height:5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:49:40.573

对于 GeoJSON 图层，您可以根据[此示例](http://leaflet.cloudmade.com/examples/geojson.html)侦听 'featureparse' 事件以绑定弹出窗口。这些方面的东西：

```
var geoJsonLayer = new L.GeoJSON(null,{
pointToLayer: function (latlng){
return new L.CircleMarker(latlng, {
    radius: 5,
    fillColor: "#ff7800",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8,
});

geoJsonLayer.on('featureparse', function(e){
//Now you can bind popups to features in the layer, and you have access to
//attributes on the GeoJSON object through e.properties:
e.layer.bindPopup('Hello! ' + e.properties.someProperty);
});

//now you add some some data to your layer and add it to the map....
geoJsonLayer.addGeoJSON(someGeoJson);
map.addLayer(geoJsonLayer); 
```

希望这可以帮助！

# android - Android - 让相机 LED 与处理程序一起频闪？

> ID：11222542
> 
> 赞同：0
> 
> 时间：2012-06-27T08:49:39.090
> 
> 标签：android, camera, switch-statement, led, alternate

我正在使用定时警报（工作正常）来尝试运行代码，该代码将在关闭和打开位置之间快速切换相机闪光灯 LED。

我正在尝试使用处理程序在两种模式之间切换，但似乎无法让它运行。我想知道是否有人可以建议另一种方式来频闪相机 LED，或者他们是否可以尝试找出我的代码有问题。

非常感谢您的帮助，我对android编程真的很陌生。

这是代码：

```
import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.os.Bundle;
import android.os.Handler;

public class MyAlert extends Activity {
private Handler mHander = new Handler();

private boolean mActive = false;
    private boolean mSwap = true;   
    private Camera camera;
    final Parameters p = camera.getParameters();

        private final Runnable mRunnable = new Runnable() {

        public void run() {         
            if (mActive) {
                if (mSwap) {                    
                    p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                    camera = Camera.open();
                    camera.setParameters(p);
                    camera.startPreview();
                    mSwap = false;
                    mHander.postDelayed(mRunnable, 20);
                } else {
                    p.setFlashMode(Parameters.FLASH_MODE_OFF);
                    camera = Camera.open();
                    camera.setParameters(p);
                    camera.stopPreview();
                    mSwap = true;
                    mHander.postDelayed(mRunnable, 100);
                }
            }           
        }
    };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startStrobe();
    }

    private void startStrobe() {        
        mActive = true;
        mHander.post(mRunnable);

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:53:31.453

AFAIR，停止预览并释放相机就足以关闭闪光灯。但真正的问题是设备的行为不同，并不总是像宣传的那样。

# wpf - UpdateSourceTrigger 被忽略

> ID：11222544
> 
> 赞同：0
> 
> 时间：2012-06-27T08:49:40.897
> 
> 标签：wpf, silverlight, xaml, .net-3.5

我在 DataGrid 中使用 CheckBoxColumn。通常绑定工作正常，但 UpdateSourceTrigger（设置为 PropertyChanged）被忽略，并且 LostFocus 上的属性更新。我的错误是什么或如何更改此行为以立即更新属性？据我所知，设置 UpdateSourceTrigger 应该可以工作。

```
<sdk:DataGrid Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
              ItemsSource="{Binding List}"
              AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>
        <sdk:DataGridCheckBoxColumn Header="Enable"
                                    Binding="{Binding Enable, UpdateSourceTrigger=PropertyChanged}" />
        <sdk:DataGridTextColumn Header="Message"
                                Binding="{Binding Text}"
                                IsReadOnly="True" />
        <!-- [...] -->
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

我在使用 Silverlight 工具包的 Silverlight 页面中遇到了这个问题。我在具有相同行为的 WPF 应用程序中尝试了这个简化的示例。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:54:07.240

我建议使用 DataGridTemplateColumn 而不是内部带有 CheckBox。

```
<sdk:DataGridTemplateColumn Header="Bool">
    <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Enable}"></CheckBox>
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellTemplate>
</sdk:DataGridTemplateColumn> 
```

# javascript - Knockout，映射后从 View Model 中获取 JSON

> ID：11222545
> 
> 赞同：2
> 
> 时间：2012-06-27T08:49:57.080
> 
> 标签：javascript, knockout.js

我从空视图模型开始，然后对数据库中的数据执行 ajax 请求。收集的数据我使用 Knockout.Mapping 插件映射到视图模型。像这样：

```
var myName = new function(){
this.viewModel = {};
var getData = function () {    
    var mapping = {
        'Members': {
        create: function (options) {
            return new UserMode(options.data);
        }
        }
    }
    $.ajax({
        url: 'api/board',
        data: $.param({"BoardId": 1}),
        dataType: 'json',
        success: function (data, textStatus, jqXHR) {
            this.viewModel = ko.mapping.fromJS(data, mapping);
            ko.applyBindings(this.viewModel);
        },
    });
}
}; 
```

然后我在 Chrome 中打开一个 JavaScript 控制台并输入：

```
ko.toJSON(myName.viewModel); 
```

结果是

```
"{}" 
```

我希望看到带有来自服务器的数据的 viewModel，而不是空对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:07:19.743

您有点困惑，我认为您应该在进行 AJAX 加载之前调用 applybindings 。

我更新了我的一个老小提琴来复制你的问题，检查一下，希望它对你有帮助！

[http://jsfiddle.net/ingro/Buscp/](http://jsfiddle.net/ingro/Buscp/)

# ruby - 两个数组中奇怪的乘数运算符行为散列组合

> ID：11222548
> 
> 赞同：2
> 
> 时间：2012-06-27T08:50:02.767
> 
> 标签：ruby

我正在寻找一种将两个数组转换为单个哈希的方法。我发现了这样的东西：

```
a1 = [1,2,3]
a2 = [?A, ?B, ?C]
Hash[*a1.zip(a2).flatten] 
```

我认为这种语法有点奇怪，因为`Hash[a1.zip a2]`会完全一样。但更重要的是，我不明白`*`运营商的需求。

我知道它将对象变成数组或类似的东西（但`[]`显然不一样）。

当我执行：

```
a = a1.zip(a2).flatten
 => [1, "A", 2, "B", 3, "C"]
a = *a1.zip(a).flatten
 => [1, "A", 2, "B", 3, "C"] 
```

什么都没有发生，据我对`*`操作员的了解，这似乎是正常行为。

那么，为什么

```
Hash[*a1.zip(a2).flatten]
 => {1=>"A", 2=>"B", 3=>"C"}
Hash[a1.zip(a).flatten]
 => {} 
```

鉴于参数看起来相同，返回不同的值？

我想我一定错过了关于`*`运营商的一些东西。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:39:45.377

当`*`运算符与类似的数组一起使用时，它称为**splat 运算符**。

将其视为**删除数组周围第一级括号的运算符**。这非常有用，因为您可以将数组转换为参数列表：

```
def stuff(x, y, z)
end

a = [1, 2, 3]
stuff(*a) # x,y,z gets assigned 1,2,3 
```

同样的事情适用于`Hash[]`. `[]`运算符 on`Hash`接受作为参数：

1.  键值对的参数列表：
    `Hash["a", 1, "b", 2] #=> { "a" => 1, "b" => 2 }`
2.  表示键值的数组或数组对：
    `Hash[ [["a", 1], ["b", 2]] ] #=> { "a" => 1, "b" => 2 }`

`Hash[]`not 不接受普通的平面数组作为参数：

```
Hash[ ["a", 1, "b", 2] ] #=> {} 
```

因此，考虑到这一点，再加上我们对 splat 运算符的理解，您现在可以看到正在发生的事情：

```
paired_array = a1.zip(a2)
=> [[1, "A"], [2, "B"], [3, "C"]]

plain_array = a1.zip(a2).flatten
=> [1, "A", 2, "B", 3, "C"]

# Per rule 2 above we know this works
Hash[paired_array]
=> {1=>"A", 2=>"B", 3=>"C"} 

# This won't work
Hash[plain_array]
=> {}

# But if we turn the plain_array into an argument list, 
# then we know per rule 1 above that this will work
Hash[*plain_array]
=> {1=>"A", 2=>"B", 3=>"C"} 
```

现在你可能想知道当你这样做时发生了什么：

```
a = *plain_array
=> [1, "A", 2, "B", 3, "C"] 
```

因为我们知道 splat 运算符有效地去除了括号，所以我们得到：

```
a = 1, "A", 2, "B", 3, "C" 
```

...有趣的是，这是有效的 Ruby 代码，只是再次创建了一个数组。

[您可以在 splat 运算符的ruby​​spec 测试用例](https://github.com/rubyspec/rubyspec/blob/master/language/splat_spec.rb)中阅读有关 splat 运算符的更多有趣内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:33:26.873

我认为您的示例中有一个错误，应该是这样的：

```
Hash[a1.zip(a2).flatten] #=> {}
Hash[*a1.zip(a2).flatten] #=> {1=>"A", 2=>"B", 3=>"C"} 
```

分配模式中的 splat 运算符将数组转换为多个参数：

```
duck, cow, pig = *["quack","mooh","oing"] #=> ["quack","mooh","oing"] 
```

实际上它与

```
duck, cow, pig = ["quack","mooh","oing"] #=> ["quack","mooh","oing"] 
```

但是从[文档](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)中您可以看到 Hash[...] 接收多个参数，因此 splat 运算符有助于分配这些多个参数中的每一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:04:02.697

这并不神秘：

```
a1 = [1,2,3]
a2 = [?A, ?B, ?C]

p Hash[*a1.zip(a2).flatten] #{1=>"A", 2=>"B", 3=>"C"} 
```

将`*`数组转换为（参数）列表。

但是为什么不使用这种语法呢？

```
p Hash[a1.zip(a2)]# {1=>"A", 2=>"B", 3=>"C"} 
```

嗯，它是自 Ruby 1.9.2 以来的新功能。您的示例可能较旧。

# android - 将图像从资源设置为可绘制对象的区别？

> ID：11222549
> 
> 赞同：4
> 
> 时间：2012-06-27T08:50:03.703
> 
> 标签：android

这方面的例子是 setImageResource 与 setImageDrawable 同样适用于背景？

那什么是首选呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T08:58:28.923

根据[文档](https://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29) `setImageResource`，在 UI 线程上进行位图读取和解码，这可能会导致延迟打嗝。因此，如果您在`setImageResource`上面询问在哪种情况下是更好的选择，您的问题会更好`setImageDrawable`。

我的猜测`setImageResource`是用于延迟加载图像，并且`setImageDrawable`在视图启动期间已经通过 Drawable 加载图像时使用。哪一个最适合您可能取决于您是否有更严重的内存限制；根据我的经验，`setImageResource`几乎不需要。

并回答为什么您的代码不起作用；这是因为你不能`getDrawable()`从 resourceId 0 做，[这会引发异常，因为它找不到资源](https://developer.android.com/reference/android/content/res/Resources.html#getDrawable%28int%29)。由于`setImageResource`是延迟加载，[它会在创建 Drawable 之前检查资源是否为 0](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/ImageView.java#ImageView.setImageResource%28int%29)，因此不会引发异常。您可能可以将其重构为`if(checked) setImageDrawable(..) else setImageDrawable(null);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T08:58:20.550

实际上，这两种方法都有一些区别。

第一个，`setImageResource`当您的**res**文件夹中有所需的图像时使用。但是，`setImageDrawable`当您创建 Drawable 类型的 Object 时，可能会使用第二种方法。

另外需要注意的是，**资源**文件可以转换为 Drawable 类型，但不能将 Drawable 转换为 Resource。

当您的 res 文件夹中有图像时，如果您使用第一种方法而不是将其转换为 Drawable 然后使用第二种方法，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:58:52.463

可绘制对象将在内存中 setImageResource 是指向存储在 gen 文件中的 id

# visual-studio-2010 - Votive 是否支持 Visual Studio 2010 Ultimate？

> ID：11222552
> 
> 赞同：0
> 
> 时间：2012-06-27T08:50:19.710
> 
> 标签：visual-studio-2010, wix, windows-installer, wix3.5, votive

我想将 Votive 与 Visual Studio 2010 Ultimate 一起使用我想知道它是否受支持。我有 Wix 3.5 和 Windows Installer 5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:19:04.837

我已经检查并为从 VS 2005、VS 2008、VS11 Beta、VS2010、VS2012 RC 开始的所有版本提供了集成。

# http - Jersey - Pojo 通信有效，getEtntity 无效

> ID：11222554
> 
> 赞同：0
> 
> 时间：2012-06-27T08:50:21.637
> 
> 标签：http, rest, jersey, pojo

我使用[4.3](http://jersey.java.net/nonav/documentation/latest/user-guide.html#client-api)章在我的 rest 服务中与 pojos 通信。目前我可以发布并获取pojo。它工作正常。但是，当我尝试获取响应的实体时，我得到了这个异常：

```
 27.06.2012 10:44:44 com.sun.jersey.api.client.ClientResponse getEntity
 SCHWERWIEGEND: A message body reader for Java class javax.xml.bind.JAXBElement, and  Java type class javax.xml.bind.JAXBElement, and MIME media type application/xml was not found
 27.06.2012 10:44:44 com.sun.jersey.api.client.ClientResponse getEntity
 SCHWERWIEGEND: The registered message body readers compatible with the MIME media type are:
 application/xml -> 
```

在服务器端，我像这样包装实体：

```
 res = Response.created(UriBuilder.fromUri(uriInfo.getAbsolutePath() + "/" + object.getObjectId()).build()).entity(new JAXBElement<ObjectPOJO>(new QName("objectpojo"), ObjectPOJO.class, object)).build(); 
```

我也试过了，只是在没有 JAXBElement 的情况下包装 pojo。

在客户端，我尝试了不同的方法：

```
 GenericType<JAXBElement<ObjectPOJO>> objectType = new GenericType<JAXBElement<ObjectPOJO>>() {};
 objectType = (GenericType<JAXBElement<ObjectPOJO>>) res.getEntity(JAXBElement.class).getValue();

 object = res.getEntity(ObjectPOJO.class); 
```

等等。有谁知道什么是正确的方法？就像我说的，get 和 post 通信工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:21:54.660

它应该是：

```
ObjectPOJO object = res.getEntity(new GenericType<JAXBElement<ObjectPOJO>>() {}).getValue(); 
```

# c# - 通过读取文件的行来确定文件的大小

> ID：11222557
> 
> 赞同：0
> 
> 时间：2012-06-27T08:50:29.723
> 
> 标签：c#, .net, file, file-io

我有一个应用程序可以逐行读取一个巨大的文本文件（大约超过 100MB）。

由于应用程序读取文件需要很长时间，我想在其底部添加一个 StatusStripProgressBar，指示距离加载结束还剩多少时间。

我试图将文件长度与正在读取的字符串的长度进行比较，但没有得到相同的结果。我也尝试将字符串转换为字节，但它仍然不同，例如：

```
while (!sr.EndOfStream) 
{
   s = sr.ReadLine;
   TotalStringSize += s.Length;
   UTF8ToASCII += UTF8Encoding.ASCII.GetByteCount(s);
   UTF8ToBigEndianUnicode += UTF8Encoding.BigEndianUnicode.GetByteCount(s);
   UTF8ToDefault += UTF8Encoding.Default.GetByteCount(s);
   UTF8ToUnicode += UTF8Encoding.Unicode.GetByteCount(s);
   UTF8ToUTF32 += UTF8Encoding.UTF32.GetByteCount(s);
   UTF8ToUTF7 += UTF8Encoding.UTF7.GetByteCount(s);
   UTF7ToASCII  = UTF7Encoding.ASCII.GetByteCount(s);
   //
   // ...
   //
} 
```

我得到的结果要么高于或低于`System.IO.FileStream.Length`. 任何想法？

**编辑：使用的框架是 .NET 2.0**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:26:30.790

返回的字符串中的`sr.ReadLine`条带回车/换行符几个字符。
您需要计算返回的字符串中缺少但存在于整个文件长度中的这些字符。

# iphone - 如何从 ios 的 childbrowser 中加载的远程 html 页面触发相机？

> ID：11222559
> 
> 赞同：0
> 
> 时间：2012-06-27T08:50:38.960
> 
> 标签：iphone

我需要从远程 html 页面访问相机。我通过子浏览器加载这个 html 页面。需要在按钮上打开相机或任何本机视图点击 html 文件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:59:24.547

不确定这是否是最好/最优雅的可能性，但它应该可以工作：

通过单击按钮加载特定的 URL。当`UIWebView`页面完成加载时，它具有通知您的委托方法。

在`– webViewDidFinishLoad:`方法中检查加载的 URL 是否是您的特定按钮 URL，如果`YES`显示相机/任何其他本机视图。

# eclipse - 右键单击更新 Eclipse 上下文菜单贡献

> ID：11222563
> 
> 赞同：1
> 
> 时间：2012-06-27T08:50:45.183
> 
> 标签：eclipse, swt, eclipse-rcp, jface

在我的 Eclipse RCP 应用程序中，我在树查看器中创建了一个上下文菜单，其中添加了一些贡献，这些贡献取决于各种属性测试器的结果。这些属性测试器评估模型对象的属性，该模型对象在打开上下文菜单时通过右键单击选择。

调试时，我注意到属性测试器仅在树查看器中的选择更改时执行，而不是在打开上下文菜单时右键单击时执行。右键单击时如何调用属性测试器？

我需要在右键单击时执行属性测试程序，因为某些操作会更改底层模型对象，因此应该会导致不同的上下文菜单。并且用户可能会执行这样的操作并在不更改选择的情况下立即打开上下文菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:55:42.847

看看`IEvaluationService.requestEvaluation(String propertyName)`......它正是你所需要的。您可以像所有其他服务一样从该站点获得评估服务：

```
IEvaluationService es = (IEvaluationService)getSite().getService(IEvaluationService.class); 
```

# android - 如何在平板电脑的gridview中获得更大的图标

> ID：11222564
> 
> 赞同：0
> 
> 时间：2012-06-27T08:50:47.037
> 
> 标签：android

我为小屏幕（2.7 英寸）制作了一个带有网格视图的布局。我的图标是 48 x 48 像素。现在我想要平板电脑上的gridview，所以我创建了一个新布局并将设置更改为大和横向。我想为平板电脑使用更大的图标：72 x 72 像素。问题是大图标没有显示，但小图标显示。我的小图标在文件夹 drawable-mdpi 中，大图标在文件夹 drawable-hdpi 中。我已经尝试将大图标移动到 drawable-xhdpi 文件夹，但没有成功。我还尝试更改 imageadapter 的 scaletype 和 layoutparams 但也没有成功 有人可以帮我在平板电脑上获得更大的图标吗？

这是我的大布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/back" >

<GridView
    android:id="@+id/Menu"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageView1"
    android:columnWidth="80dp"
    android:gravity="center_horizontal|top"
    android:horizontalSpacing="130dp"
    android:numColumns="auto_fit"
    android:paddingTop="10dp"
    android:scrollbars="none"
    android:stretchMode="columnWidth"
    android:verticalSpacing="50dp" android:layout_marginTop="50dip">

</GridView>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/title" />

</RelativeLayout> 
```

我的 gridview 图像适配器的 java 代码是：

```
public class ImageAdapter extends BaseAdapter 
{
    private Context context;

    public ImageAdapter(Context c) 
    {
        context = c;
    }

    //---returns the number of images---
    public int getCount() {
        return menu_icon.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(context);
            imageView.setLayoutParams(new GridView.LayoutParams(150, 150));                 imageView.setScaleType(ImageView.ScaleType.CENTER);
            imageView.setPadding(5, 5, 5, 5);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(menu_icon[position]);
        return imageView;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:08:58.840

尝试这个，

```
imageView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT); 
```

这可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T13:47:08.490

这可能会解决您的问题：

```
imageView.setScaleType(ImageView.ScaleType.FIT_XY); 
```

[http://developer.android.com/reference/android/widget/ImageView.html#setScaleType(android.widget.ImageView.ScaleType)](http://developer.android.com/reference/android/widget/ImageView.html#setScaleType(android.widget.ImageView.ScaleType))

[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# vb6 - 在 Visual Basic 6.0 中创建重复表单

> ID：11222569
> 
> 赞同：6
> 
> 时间：2012-06-27T08:51:14.230
> 
> 标签：vb6

我有一个表格（例如，`abc.frm`）。我想要 的重复形式（例如`xyz.frm`）`abc.frm`。我不想再次创建它。所以我使用了**另存为**选项。但它没有出现在**Project Explorer**中。

为了解决这个问题，我做了如下。

*   我在源文件夹中找到了**xyz.frm**
*   用*记事本打开*
*   将表单名称从**abc**更改为**xyz**

**但现在我在Project Explorer**中找不到该`abc.frm`文件。

 **如果**另存为**是创建重复表单的正确选项，那么***保留这两个文件的解决方案是什么？***. 如果没有，那么***如何创建重复表单***？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T08:55:52.830

“另存为”会将表单另存为新名称，并将项目中的引用更改为新的表单文件。

您可以：

1.  创建表格 ABC
2.  另存为 ABC.frm
3.  将名称更改为 XYZ
4.  另存为 XYZ.frm
5.  将 ABC.frm 重新添加到项目中

或者：

1.  创建表格 ABC
2.  另存为 ABC.frm
3.  将 ABC.frm 复制到 XYZ.frm
4.  编辑 XYZ.frm 以使用新名称
5.  将 XYZ.frm 添加到项目中**

# jquery - 无法为 jquery ui 手风琴排列图标

> ID：11222570
> 
> 赞同：0
> 
> 时间：2012-06-27T08:51:20.440
> 
> 标签：jquery, accordion

我无法让图标与文本对齐这里是小提琴：[jquery 手风琴](http://jsfiddle.net/AJBweb1986/kZkTV/1/)

我对其余的代码感到满意，只需要将图标排列起来，我已经尝试定位使用 jquery 中的图标创建的跨度标签，但无济于事，我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:55:36.037

在此处更改`display: block`为`display: inline-block`：

```
#helpmenu h3 a {  padding-right: 5px; color: #666; display: inline-block;  padding-top: 8px; padding-bottom: 8px; text-decoration: none; padding-left: 18px;} 
```

并且还删除`padding-left`. 此外，将其用于 IE 7 兼容性：

```
*display: inline; *zoom: 1; /* Display Inline Block in IE 7 */ 
```

更新小提琴：http: [//jsfiddle.net/kZkTV/3/](http://jsfiddle.net/kZkTV/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:57:08.430

[http://jsfiddle.net/kZkTV/2/](http://jsfiddle.net/kZkTV/2/)

我改为`#helpmenu h3 a`改为`display: inline-block`并添加了`vertical-align: middle`. 除非您需要支持非常旧的 IE 版本，否则这应该可以工作。

您可能还想对这里或那里的填充做一些小的更新，尤其是`:first-child`（一个 CSS2 伪类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:57:39.997

您应该向左浮动图标。这样他们就不会影响 a. [http://jsfiddle.net/kZkTV/4/](http://jsfiddle.net/kZkTV/4/)

```
.closedacc { background: url(http://www.somesite.com/dataimages/static/faq/menuarrow-blue.jpg) no-repeat 0 9px; padding-top: 2px; padding-botttom: 2px;  padding-left: 18px; float: left; width: 16px; height: 16px;} 
```

# android - 具有选择器背景的 Android 按钮不加载横向可绘制对象

> ID：11222572
> 
> 赞同：1
> 
> 时间：2012-06-27T08:51:25.997
> 
> 标签：android, xml, button, selector, drawable

我已经设置了一个带有 xml 选择器背景的按钮。可绘制对象位于 drawable-xhdpi 和 drawable-land-xhdpi 的不同版本中。问题是旋转更改为横向按钮未分配土地版本。

按钮如下所示：

```
<Button android:id="@+id/home_button"
                            android:layout_height="wrap_content"
                            android:layout_width="wrap_content"
                            android:layout_alignParentBottom="true"
                            android:layout_marginBottom="0dp"
                            android:background="@drawable/xml_selector_home"
                            android:layout_toRightOf="@+id/fwd_button"
                            android:layout_weight="1">
                    </Button> 
```

可绘制的按钮如下所示：

```
<item android:state_pressed="true" android:drawable="@drawable/homeon"/>
<item android:drawable="@drawable/homeoff"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:57:27.440

将 ladscape 文件夹更改为

```
drawable-xhdpi-land 
```

# android - Android - Maven Build - Proguard - 找不到引用的类

> ID：11222577
> 
> 赞同：4
> 
> 时间：2012-06-27T08:51:46.480
> 
> 标签：android, maven, maven-3, proguard, android-maven-plugin

目前我正在尝试为我现有的 Android 应用程序设置一个 Maven 构建。（以前是用 Ant 构建的）在运行 proguard 混淆时，我收到很多警告，告诉我以下内容：

```
...
can't find referenced class org.apache.http.params.BasicHttpParams
can't find referenced class org.apache.http.params.BasicHttpParams
can't find referenced class org.apache.http.params.HttpConnectionParams
can't find referenced class org.apache.http.params.HttpConnectionParams
can't find referenced class org.apache.http.impl.client.DefaultHttpClient
can't find referenced class org.apache.http.impl.client.DefaultHttpClient
can't find referenced class org.apache.http.impl.client.DefaultHttpClient
can't find referenced class org.apache.http.auth.AuthScope
can't find referenced class org.apache.http.auth.AuthScope
can't find referenced class org.apache.http.auth.UsernamePasswordCredentials
... 
```

缺少的参考来自*org.apache.http*包。我认为它们应该包含在 android.jar 中。我正在使用*android-maven-plugin*版本*3.2.0*。在 pom.xml 中定义了以下 android 依赖项。

```
<dependency>
 <groupId>android</groupId>
 <artifactId>android</artifactId>
 <version>4.0.3_r3</version>
 <scope>provided</scope>
</dependency> 
```

*我已经使用maven-android-sdk-deployer*安装了 Android 依赖项。

这种错误的正确解决方案是什么？没有混淆，构建成功，生成的 APK 运行良好。我没有更改 proguard 配置文件。（它与蚂蚁结合使用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:49:09.190

当我试图混淆实现 com.sun.mail 包的应用程序时，我曾经遇到过与 Proguard 混淆相同的问题。我收到了几个警告说 Proguard 无法从这个库（包）中找到引用的类。

作为一种解决方案，我只是用以下行来压制警告： `-dontwarn com.sun.**`. 一切顺利，com.mail.sun 库的所有类和函数在部署的应用程序中都像一个魅力一样工作，Proguard 不再抱怨它了；）

因此，在您的情况下，您将添加以下行： `-dontwarn org.apache.**`

# javascript - 在 HTML 页面中使用 JavaScript 的最佳方式

> ID：11222578
> 
> 赞同：2
> 
> 时间：2012-06-27T08:51:49.223
> 
> 标签：javascript, html

在 HTML 页面中导入和使用 JavaScript 代码的最佳方式是什么？我正在考虑两种选择：

*   具有导入到 HTML 文件的文件的单个`<script>`标记，该文件使用选定的 JavaScript 方法。`all.js`
*   在每个 HTML 文件中分别定义单独`<script>`的标签。

这里最好的设计选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:54:35.253

Lukasz，这个天真的问题是个大话题。要在一个不错的地方开始使用 JavaScript 的性能和可维护性，请遵循[Steve Souders 的](http://stevesouders.com/)相关文章。

并使用[JSHint](http://www.jshint.com/)。如果您的代码位于仅 JavaScript 的文件中，这会容易得多。要了解其他良好实践，请阅读[idiomatic.js](https://github.com/rwldrn/idiomatic.js/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:58:31.153

单个缩小文件是性能最高的 - 更少的请求和更小的下载。但不是一个全局 js 无处不在，调试/开发会很痛苦。

对可能缓存在浏览器中的库使用 cdn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:40:09.410

Minify js 是一个很好的并且可以接受的方式。它还有助于在运行时在服务器端构建 js 文件。这是一个很大的话题。这里有一些来自雅虎的好建议。我用这些作为我的指导方针。另请阅读主题 js minify [http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:06:56.217

IMO 我将为单独的 javascript 片段/插件设置单独的标签，这将使我的 javascript 代码更易于维护。我可以删除插件/添加插件，而不会干扰其他 javascript 片段。

但出于性能问题，现代浏览器将运行 6 个连续线程来下载资源，因此最好配置站点/Web 应用程序的加载时间。您可以使用 Firebug/yslow 之类的工具来分析从 html 页面发送的 http 请求。

我个人使用[Sitemesh](http://wiki.sitemesh.org/display/sitemesh/Home)之类的模板引擎，并为应用程序的不同部分创建 jsps 模板。

对于 javascript，我主要使用 JQuery 和很多插件。

# android - 对 android 调试模式和在 logcat 中读取输出感到非常沮丧

> ID：11222583
> 
> 赞同：0
> 
> 时间：2012-06-27T08:52:00.360
> 
> 标签：android, debugging, emulation, adb, mode

这是我第一次在 stackoverflow 上提问。我正在开发一个安卓上的小应用程序，只是为了在学校放假期间玩得开心。我的应用程序运行良好，并且当我在模拟器上运行它时显示 logcat 也很好。但是当我每次尝试通过调试桥在手机上运行应用程序时，logcat 根本不会显示。我已经尝试了可以​​在谷歌上找到的所有方法，包括：

1.  进入 ddms 并选择我的设备
2.  使用 adb logcat -d foo:D *:S 仅显示 --------- /dev/log/system 的开头 --------- /dev/log/main 的开头
3.  ETC

我记得很久以前它工作得很好，但自从我换了我的全新电脑后，它就不再工作了。请帮助:(我现在在这里停留了大约 3 个小时

谢谢你们=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:58:13.173

试试下面的一些技巧

有时司机无法识别电话。跑

*   sudo ./adb kill-server
*   sudo ./adb 启动服务器

更新ddms，最新的还不错，很多问题都有修复

从命令行运行ddms，eclipse中的那个不如命令行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:06:30.413

我们无法准确预测可能是什么问题，但尝试这些可能会在某个时候锻炼的方法。

*使用命令 adb remount

*选择设备，在其中选择您的申请流程

*为您的日志使用标签并使用该日志名称创建新过滤器。

*在您的过滤器和 Log cat 中的所有消息之间单击。

*尝试重新连接设备。

如果仍然有问题，请分享更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:43:35.683

我刚刚通过使用 Log.e 而不是其他日志级别解决了这个问题。这花了我很长时间才弄清楚，我重新安装了我的 eclipse 和 adb 但它根本没有帮助。我不知道这是否只适合我，但我希望这对你们中的一些和我有同样问题的人有所帮助

使用 Log.e ！！

# c# - 如何使用 ContentTemplate 避免“指定元素已经是另一个元素的逻辑子元素。先断开它”错误

> ID：11222591
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:52:37.273
> 
> 标签：c#, .net, wpf, devexpress

我知道这个问题已经被问过无数次了，但我不明白他们的问题是什么或如何效仿他们的例子。我确实找到了她的名字雷切尔，发布了一篇关于它的博客，但她的解释太简短了..

[http://rachel53461.wordpress.com/2011/07/17/wpf-error-specified-element-is-already-the-logical-child-of-another-element-disconnect-it-first/](http://rachel53461.wordpress.com/2011/07/17/wpf-error-specified-element-is-already-the-logical-child-of-another-element-disconnect-it-first/)

这是我在尝试遵循此处示例之前所拥有的：

```
<Window x:Class="Graph.View.MainView.Main"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:lc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
    Title="Main" Height="350" Width="525" 

    xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking">

<DockPanel LastChildFill="True">
       <DockPanel>
        <Label  Content="{Binding ScreenContent}" Grid.Row="1" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch"/>
        </DockPanel>
    </DockPanel> 
```

因为`ScreenContent`有一个合乎逻辑的父母我不能重用它。在尝试遵循 Rachel 的示例之后：

```
<Window x:Class="Graph.View.MainView.Main"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
        Title="Main" Height="350" Width="525" 
       >
    <Window.Resources>
        <Style     TargetType="{x:Type ContentControl}">
            <Setter Property="ContentTemplate"> 
                <Setter.Value>
                    <DataTemplate>
                        <DockPanel>
                            <Label   Content="{Binding ScreenContent}" Grid.Row="1" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch"/>
                        </DockPanel>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel LastChildFill="True">            
        <Label Style="{StaticResource MyCustomContentControl}"/>
    </DockPanel>
</Window> 
```

我该如何解决？它根本没有显示任何东西......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:23:25.647

请回答我什么是`ScreenContent`财产……是字符串吗？还是一些 GUI 元素？

**如果它是一个字符串，那么按照下面的解决方案...**

还有一些概念你必须了解...

1.  `Label`里面`Label`是一个糟糕的UI设计。
2.  `ContentControls`例如`Label`，`Button`等当我们想要设置它们时遵循特定的 XAML 模式`ControlTemplate`和`DataTemplate`。
3.  在您的情况下，您想要分配一个基于数据上下文的属性`ScreenContent`。所以`DataTemplate`方法是对的。

但是，这不会流向`Label`您的内部`DataTemplate`，因为外部`Label`（您已应用`Style`到的）未设置在其自己的`Content`属性上。

***所以基本上 a`ContentControl.ContentTemplate`只有在它和里面`Content`设置了一个 not null 的情况下( )作品作为所有项目的作品！`ContentControl``DataTemplate``ContentTemplate``Content``DataContext`***

注意`{Binding}`下面的表达式......这是不言自明的！

```
 <DockPanel LastChildFill="True">
        <DockPanel.Resources>
            <Style x:Key="MyCustomContentControl"
                   TargetType="{x:Type ContentControl}">
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <DockPanel>
                                    <ContentPresenter
                                             Content="{Binding}"
                                             HorizontalAlignment="Stretch"
                                             VerticalAlignment="Stretch"/>
                                </DockPanel>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </DockPanel.Resources>
        <Label Style="{StaticResource MyCustomContentControl}"
               Content="{Binding ScreenContent}" 
               HorizontalContentAlignment="Stretch"
               VerticalContentAlignment="Stretch">
        </Label>
    </DockPanel> 
```

**如果它是 UserControl，请按照以下解决方案...**

您是否只分配一次（给给定的`Label`）？还是您试图将其分配为各种元素的内容？

如果它只分配一次，那么上面的解决方案应该可以工作。

但是，如果您打算将其分配为`Content`多个目标元素中的一个，那么您需要遵循`Model`/`ViewModel`方法。

1.  您的所有 GUI 元素都应托管在 XAML 中。
2.  Code Behind 不应处理 GUI 元素。
3.  Code behind 仅适用于 GUI 元素的**软**拷贝，即特定于 GUI (UserControl) 表示的字段的数据。

例如

**示例 1...**

假设您有一个`TitleControl`类似于粗斜体的 WPF，`Label`显示标题的文本。您持有`DataContext`这样`TitleControl`的对象，其中设置了一些标题文本。

然后在该`ViewModel`方法中，您应该创建一个实例`TitleControlViewModel` 作为...的一部分`DataContext`...类似这样...

`YourDataContext.MyTitleControlViewModel = new TitleControlViewModel();`

在`TitleControlViewModel`类内部，我们应该有一个称为`MyTitle`字符串类型的公共属性。

`YourDataContext.MyTitleControlViewModel.MyTitle = "My Title";`

现在您的模板特定 XAML 应该如下所示...

```
 <DataTemplate x:Key="MyTitleControlDataTemplate">
         <local:TitleControl Title="{Binding MyTitle}"/>
    </DataTemplate> 
```

你的主机面板应该是这样的......

```
 <ContentControl ToolTip="Title is shown here..." 
                    Content="{Binding MyTitleControlViewModel}"
                    Contenttemplate="{StatiocResource MyTitleControlDataTemplate}"/>

    <ContentControl ToolTip="Same title control is shown here also !!!"
                    Content="{Binding MyTitleControlViewModel}"
                    Contenttemplate="{StatiocResource MyTitleControlDataTemplate}"/> 
```

因此，这样相同的标题控件似乎托管在上面的两个内容控件上。但是，如果您真的认为，有两个不同的实例`TitleControl`仅代表相同 的对象，`MyTitleControlViewModel`因此看起来像相同的控件！

谷歌了解数据模板和 MVVM 是如何结合在一起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:04:42.260

`UserControls`（或任何其他类型的 UI 控件）不属于`ViewModel`

最好有一个要绑定的对象，并使用 a`DataTemplate`告诉 WPF 如何使用您的`UserControl`

例如，如果你有

```
ScreenModel ScreenContent { get; set; } 
```

`ScreenModel`看起来像这样的自定义类在哪里

```
public class ScreenModel
{
    public string Name { get; set; }
    ...
} 
```

然后你会使用这样的东西绑定到它：

```
<DockPanel LastChildFill="True">
    <DockPanel>
        <ContentControl Content="{Binding ScreenContent}" Grid.Row="1" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch"/>
    </DockPanel>
</DockPanel> 
```

并使用 a`DataTemplate`告诉 WPF 如何绘制`ScreenModel`类

```
<DataTemplate DataType="{x:Type models:ScreenModel}">
    <views:ScreenContentUserControl />
</DataTemplate> 
```

或者

```
<DataTemplate DataType="{x:Type models:ScreenModel}">
    <Label Content="{Binding Name}" />
</DataTemplate> 
```

因为您使用的是`Template`，所以 WPF 将在需要时创建 的新副本`UserControl`，并且不会尝试`UserControl`在多个位置使用相同的副本。

您的错误正在发生，因为您通过绑定多次添加相同的`UserControl`( `ScreenContent`) 。`VisualTree``Content="{Binding ScreenContent}"`

即使执行诸如切换选项卡之类的操作也可能会导致此错误，因为您将通过从选项卡切换来卸载所有 UI 对象，然后通过切换回来加载新的 UI 对象，但是您的`ScreenContent`用户控件已经将其父对象设置为旧对象不复存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:45:35.617

如果您想重用`ScreenContent`（尽管它已经是其他元素的子元素），那么您必须首先克隆它并使用克隆的控件。

您可以通过首先使用序列化控件来克隆控件`XamlWriter`，然后通过使用反序列化它来创建新控件`XamlReader`，如下[所示](https://stackoverflow.com/questions/32541/how-can-you-clone-a-wpf-object)-

```
string screenContentXml = XamlWriter.Save(ScreenContent );

//Load it into a new object:
StringReader stringReader = new StringReader(screenContentXml );
XmlReader xmlReader = XmlReader.Create(stringReader);
UIElement screenContentClone = (UIElement)XamlReader.Load(xmlReader); 
```

`screenContentClone` 在你的窗口中使用它。

但是，您可能会发现自己应用了变通方法来使其正常工作，因为使用时存在一些限制`XamlWriter.Save`（例如使用绑定） - [XamlWriter.Save 的序列化限制](http://msdn.microsoft.com/en-us/library/ms754193.aspx)

以下是一些其他的序列化方法 -

[保留绑定的 XAML 序列化程序](http://www.codeproject.com/Articles/21139/An-XAML-Serializer-Preserving-Bindings)

[XamlWriter 和绑定序列化](http://www.codeproject.com/Articles/27158/XamlWriter-and-Bindings-Serialization)

*虽然您的设计看起来不像 AngelWPF 提到的那样正确，但您应该尝试重新设计您的窗口，您可能不需要做所有这些。*

# c# - 数据表选择：无法过滤双精度值

> ID：11222595
> 
> 赞同：0
> 
> 时间：2012-06-27T08:52:43.307
> 
> 标签：c#, string, datatable

我正在尝试选择一个数据表对象。当我的表达式值为 82.5 (double) 时，代码会抛出异常。

```
_dataSet.Tables[2].Select("ProfitShareRatio = " + Convert.ToDouble(_listrow[m]["ProfitShareRatio"])); 
```

Ps：`ProfitShareRatio`价值是双倍的`_dataSet.Tables[2]`

错误：

> 表达式中的语法错误。
> 
> 在 System.Data.ExpressionParser.Parse() 在 System.Data.DataExpression..ctor(DataTable 表，字符串表达式，类型类型) 在 System.Data.Select..ctor(DataTable 表，字符串 filterExpression，字符串排序，DataViewRowState 记录状态) 在 System.Data.DataTable.Select(String filterExpression)

编辑 2：当我使用十进制时发生了同样的错误。

```
 _dataSet.Tables[2].Select("ProfitShareRatio = " + Convert.ToDecimal(_listrow[m]["ProfitShareRatio"])); 
```

Ps 2：问题是 `Convert.ToDecimal(_listrow[m]["ProfitShareRatio"])`用逗号返回值，如 82,50 我需要用点返回值，如 82.50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:52:29.473

```
String.Format(new System.Globalization.CultureInfo("en-US"),"ProfitShareRatio =  {0}",Convert.ToDecimal(_listrow[m]["ProfitShareRatio"])) 
```

谢谢大家。通过将文化更改为 en-US 解决了问题。字符串格式结果为“ProfitShareRatio = 82.5”

# datatable - 将鼠标悬停在数据表中的行上时，丰富的工具提示不会更新

> ID：11222598
> 
> 赞同：0
> 
> 时间：2012-06-27T08:52:59.483
> 
> 标签：datatable, richfaces

我有一个数据表，我想在将鼠标悬停在表中的列上时显示丰富的工具提示。

```
<t:column id="nameColumn">

                <a4j:outputPanel layout="block">
                        <rich:toolTip direction="bottom-right" showDelay="300"
                                    layout="block">
                                <a4j:actionparam name="index" value="#{child.index}"
                                        assignTo="#{tableBean.currentTableRowIndex}" />
                                <h:outputText value="#{tableBean.currentTableRowIndex}"/>
                        </rich:toolTip>
                        <h:outputText value="#{child.name}" id="childName"
                                        styleClass="gridCell" >
                        </h:outputText>
                </a4j:outputPanel>
            </t:column> 
```

如果我使用 mode="ajax"，则工具提示中不会出现任何内容。实际上它应该显示行号。如果你能帮助我，那就太好了。此问题在 v3.3.3 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:06:46.490

请确保您的代码在表单标签内

# iphone - 如何在 ipad 中绘制血压图？

> ID：11222601
> 
> 赞同：1
> 
> 时间：2012-06-27T08:53:15.957
> 
> 标签：iphone, objective-c, xcode, ipad, graph

我正在为 iPad 设备开发 Graph 应用程序。我使用了 core plot 1.0 库，但是使用 core plot 如何绘制这种图表？我可以使用其他库而不是核心图吗？哪个库更适合绘制这样的图表？我试图创建 MultiLine Graph 并且效果很好，但我想开发这样的图表。 ![图形图像](../Images/daa38dded406c3ee53a3fe0e3eb8a12e.png)

我是这样开发的图表。![我开发的图表](../Images/52aaf0d662405c78bf3b7fd800857bb6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:55:48.333

GitHub 上有许多图表库。我认为其中一个叫做 XYChart 什么的。他们可以生成这些类型的折线图

# mysql - 在查询中使用 UNION、COUNT 和 GROUP BY

> ID：11222603
> 
> 赞同：1
> 
> 时间：2012-06-27T08:53:20.580
> 
> 标签：mysql, sqlalchemy

我有一个名为的表`iphdr`，它有两个字段`ip_src`，并`ip_dst`以数字（inet_aton）形式存储 IP。我需要为我的 webapp 获取最常出现的源、目标和（源+目标）IP。我正在使用带有金字塔的 SQLalchemy。

**频繁出现的源/目的IP**

这是简单的部分。我只是按组计数并得到结果

```
mysql> select inet_ntoa(ip_dst) as ip,count(*) as count1 from iphdr group by ip;
+--------------+--------+
| ip           | count1 |
+--------------+--------+
| 192.168.1.22 |     13 |
| 192.168.2.8  |      1 |
| 31.1.1.22    |      1 |
| 31.21.18.100 |    905 |
| 31.21.18.221 |      4 |
+--------------+--------+
5 rows in set (0.00 sec) 
```

SQLAlchemy 中对应的语句是

```
>>>top_srcs = session.query(func.inet_ntoa(IpHdr.ip_dst).label('ip'),func.count('*').label('ip_count')).group_by('ip').order_by(desc('ip_count'))
>>>print top_srcs.all()
[('31.21.18.100', 905L), ('192.168.1.22', 13L), ('31.21.18.221', 4L), ('192.168.2.8', 1L), ('31.1.1.22', 1L)] 
```

**频繁出现的Src+Dest按count排序**

在 MySQL 中，我可以通过使用 union all 来组合各个 src/dest 查询轻松地做到这一点

```
mysql> select 
m.ip,sum(m.count1) as c 
from 
(
select 
inet_ntoa(ip_dst) as ip,count(*) as count1 
from iphdr group by ip 
union all 
select 
inet_ntoa(ip_src) as ip,count(*) as count1 
from iphdr group by ip
) 
as m  group by m.ip order by c desc;
+---------------+------+
| ip            | c    |
+---------------+------+
| 31.21.18.100  |  924 |
| 192.168.2.10  |  186 |
| 31.21.18.101  |  171 |
| 192.168.2.9   |  165 |
| 192.168.2.8   |   96 |
| 192.168.2.4   |   84 |
| 192.168.2.5   |   78 |
| 192.168.2.6   |   38 |
| 192.168.1.22  |   31 |
| 31.1.1.9      |   25 |
| 31.11.100.101 |   17 |
| 192.168.2.7   |   17 |
| 31.21.18.221  |    6 |
| 192.168.33.10 |    6 |
| 31.1.1.22     |    4 |
+---------------+------+
15 rows in set (0.01 sec) 
```

但是在 SQLALchemy 中，尝试以相同的方式组合这两个语句会给我带来各种错误

```
top_srcs = session.query(func.inet_ntoa(IpHdr.ip_src).label('ip'),func.count('*').label('ip_count')).group_by('ip').order_by(desc('ip_count'))
    top_dsts = session.query(func.inet_ntoa(IpHdr.ip_dst).label('ip'),func.count('*').label('ip_count')).group_by('ip').order_by(desc('ip_count'))

mod_top_srcs = top_srcs.subquery().select()
mod_top_dsts = top_dsts.subquery().select()
x = union_all(mod_top_srcs,mod_top_dsts).select()
top_total = session.query(x).group_by('ip').order_by(desc('total'))

OperationalError: (OperationalError) (1248, 'Every derived table must have its own alias 
```

我查看了[此](http://groups.google.com/group/sqlalchemy/browse_thread/thread/eea0caa8cf6df1e1?pli=1)线程，但该解决方案对我不起作用

**编辑**

我用别名鬼混（因为那是最初的错误）并设法编写了以下语句

```
>>>ts = top_srcs.subquery().select()
>>>td = top_dsts.subquery().select()
>>>session.query('ip','ip_count').select_from(union_all(ts,td).alias('mno').select().alias('abc')).all()
[('192.168.2.10', 186L), ('31.21.18.101', 171L), ('192.168.2.9', 165L), ('192.168.2.8', 95L), ('192.168.2.4', 84L), ('192.168.2.5', 78L), ('192.168.2.6', 38L), ('31.1.1.9', 25L), ('31.21.18.100', 19L), ('192.168.1.22', 18L), ('31.11.100.101', 17L), ('192.168.2.7', 17L), ('192.168.33.10', 6L), ('31.1.1.22', 3L), ('31.21.18.221', 2L), ('31.21.18.100', 905L), ('192.168.1.22', 13L), ('31.21.18.221', 4L), ('192.168.2.8', 1L), ('31.1.1.22', 1L)] 
```

但试图得到总和打破了它

```
>>> session.query('ip',sum('ip_count')).select_from(union_all(ts,td).alias('mno').select().alias('abc')).group_by('abc.ip').all()
[('192.168.1.22', 0.0), ('192.168.2.10', 0.0), ('192.168.2.4', 0.0), ('192.168.2.5', 0.0), ('192.168.2.6', 0.0), ('192.168.2.7', 0.0), ('192.168.2.8', 0.0), ('192.168.2.9', 0.0), ('192.168.33.10', 0.0), ('31.1.1.22', 0.0), ('31.1.1.9', 0.0), ('31.11.100.101', 0.0), ('31.21.18.100', 0.0), ('31.21.18.101', 0.0), ('31.21.18.221', 0.0)] 
```

我认为我需要在查询部分中添加其他*内容*才能使其正常工作

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:42:49.963

终于设法做到了。

诀窍是在子查询中使用 union_all 以便它得到别名。然后最后一条语句仅适用于该子查询

```
>>>top_srcs = session.query(func.inet_ntoa(IpHdr.ip_src).label('ip'),func.count('*').label('ip_count')).group_by('ip').order_by(desc('ip_count'))
>>>top_dsts = session.query(func.inet_ntoa(IpHdr.ip_dst).label('ip'),func.count('*').label('ip_count')).group_by('ip').order_by(desc('ip_count'))
>>>ts = top_srcs.subquery().select()
>>>td = top_dsts.subquery().select()
>>>q1 = session.query('ip','ip_count').select_from(union_all(ts,td).alias('mno').select()).subquery()
>>>top_total = session.query(q1.c.ip.label('ip'),func.sum(q1.c.ip_count).label('count1')).select_from(q1).group_by('ip').order_by('count1')

>>>top_total.all()
[('31.21.18.100', Decimal('924')), ('192.168.2.10', Decimal('186')), ('31.21.18.101', Decimal('171')), ('192.168.2.9', Decimal('165')), ('192.168.2.8', Decimal('96')), ('192.168.2.4', Decimal('84')), ('192.168.2.5', Decimal('78')), ('192.168.2.6', Decimal('38')), ('192.168.1.22', Decimal('31')), ('31.1.1.9', Decimal('25')), ('31.11.100.101', Decimal('17')), ('192.168.2.7', Decimal('17')), ('31.21.18.221', Decimal('6')), ('192.168.33.10', Decimal('6')), ('31.1.1.22', Decimal('4'))] 
```

# php - PHP echo 相当于记事本的 CR LF

> ID：11222604
> 
> 赞同：16
> 
> 时间：2012-06-27T08:53:23.810
> 
> 标签：php, encoding

我需要使用 PHP 导出一些数据，并为每一行添加一个`\r\n`. 当我打开我下载的导出数据文件时，我看到`\r\n`在记事本中被解释为 [LF]。

但是我打开文件的应用程序不会将 [LF] 作为新行读取。

现在，如果我在记事本中执行 [CR][LF]，应用程序可以将 [CR][LF] 作为新行读取。

如何使用 PHP 回显 [CR][LF] 的等价物？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-27T08:57:40.827

就像这样做一样简单：

```
echo "\r\n"; 
```

**（注意双引号）**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T22:42:12.910

做`echo PHP_EOL;`

这样，它将始终显示对您所在的系统有效的正确换行符/回车符组合，因为并非所有操作系统都使用相同的[换行符约定](http://en.wikipedia.org/wiki/Newline)。（更多信息：[PHP 全局常量](http://php.net/manual/en/reserved.constants.php)。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T11:01:10.840

问题已解决：字符串在 POST 参数中传递。删除 \r。

你只需要做一个`str_replace("\n", "\r\n", $...);`.

# qt - 如何调用需要来自 QtGui 的标准输入的应用程序？

> ID：11222607
> 
> 赞同：0
> 
> 时间：2012-06-27T08:53:31.950
> 
> 标签：qt, executable, qprocess

我正在使用 Ubuntu 和 Qt Creator 4

我有一个可执行形式的 .cpp 程序（比如`abc.out`），我希望在按下按钮时运行它。它包含许多 cin 和 cout，所以我希望它在“终端”（在 Ubuntu 上）上运行，以便我能够向它输入和输出值。我怎样才能做到这一点？

**我试过 system() 和 QProcess p1; p1.start(./abc.out);**

使用 QProcess，我的可执行文件运行但在第一个 cout 处停止。它在 Qt Creator 的应用程序输出屏幕上运行，而不是在终端上。

例如：我在应用程序输出中看到：

**输入名字：**

当我在此处键入值并按 Enter 键时，它不接受该值，而是移至下一行并允许我进一步键入。我想`abc.out`在终端上运行这个文件。任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:03:04.653

你是说 Qt Creator 2.4 吗？无论如何，在“项目”选项卡上，您应该找到“运行设置”部分，然后您可以从那里找到“在终端中运行”复选框。您还可以使用自定义可执行选项并在此处键入：`gnome-terminal --command ./abc.out`由于我使用的是 Qt Creator 2.5，因此确切的详细信息可能会有所不同。

这在从 Qt Creator 启动时应该可以工作，但是当您在 IDE 之外使用您的应用程序时，您需要从终端启动它，而不是通过双击可执行文件来启动它。为了解决这个问题，我可以想到两种方法：

1.  从 QtGui 启动一个终端窗口（类似于`QProcess::execute("gnome-terminal --command ./abc.out");`），但问题是不同的系统有不同的终端名称。
2.  自己提供一个 Qt 输入/文本框作为 GUI 的一部分，然后将用户输入转发到可执行文件（类似于`myqprocess.write(input_asked_from_user_by_QtGui);`）。在这里，您可能需要事先知道要向用户询问哪些信息。如果要显示启动进程的cout输出，可以使用`read`QProcess的方法和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:26:15.233

From your question I assume that you are writing an application that launches other applications using QProcess. Thats fine, but if your subprocess is waiting for data from the standard input it will wait forever since you did not provide any data. The stdin of your parent application cannot be automatically guided to the subprocess. Imagine you are starting two processes from your main app. To which child process should the input go?

If you want to communicate with child processes, you must use the QIODevice methods of QProcess and send/read data from/to that application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:42:20.170

The only sensible solution is to launch the target application in a terminal. Whether your own code provides the terminal window or you reuse an existing terminal application is up to you.

# c++ - 是否可以访问 c++ 模板模板常量参数？

> ID：11222609
> 
> 赞同：4
> 
> 时间：2012-06-27T08:53:38.203
> 
> 标签：c++, class, templates, constants

我想做这样的事情：

```
template<template<int d, class>
         class container,
         int dim = d, typename content_data_type>
class MyClass {
}; 
```

我的编译器告诉我这是不可能的，因为“d”没有在以下范围内定义：

```
template<int d, class> class container 
```

是否有另一种方法可以做到这一点？

在此先感谢您对此主题的任何帮助。

**更新：**

@ Rook：我想稍后在专业化中访问“dim”和“content_data_type”参数

例如

普通班：

```
template<template<int d, class>
         class container>
class MyClass {
}; 
```

规格。班级：

```
template<>
class MyClass<vec> {
    vec c; // Error: vec needs template parameters
}; 
```

这给了我一个错误，因为我使用了我的模板类“vec”而没有模板参数，我希望编译器能够推断出模板参数，例如当我使用

```
MyClass<vec<3, float> > 
```

那么变量“c”应该有类型

```
vec<3, float> 
```

因为这不起作用，我想我可以创建两个显式模板参数“dim”和“content_data_type”，我可以像这样在专业化类中访问它们：

```
template<template<int d, class t>
     class container,
     int dim = d, typename content_data_type = t>
class MyClass<vec> {
    vec<dim, content_data_type> c;
}; 
```

...再次抱歉，对于最初的问题不够具体:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:02:12.750

我不认为你在做什么有意义，所以答案是“不”。

模板参数`container`是*类模板*，而不是类。当`MyClass`被实例化时，它的参数是整个模板，而不仅仅是它的一个实例。所以不可能将 的维度默认`MyClass`为“的维度`container`”，因为`container`它自己的模板参数没有值。您的类可以创建和使用具有不同值的 的`MyClass`一个或多个实例化，但没有特别给出其中任何一个，而是给出了模板。`container``d`

以此类推，假设您将指向函数的指针`f`作为参数传递给函数`g`。然后，您不能`f`在`g`. 该函数`g`可以使用不同的参数调用`f`一次或多次，但没有特别给出任何一次调用，而是给出了函数。

从您的更新：

> 例如当我使用`MyClass<vec<3, float> >`

你不使用`MyClass<vec<3, float> >`，没有这样的东西。正如我所说，`MyClass`需要一个*模板*而不是一个*类*。`vec`是模板，`vec<3, float>`是类。听起来您可能根本不需要模板作为模板参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:04:26.390

通常容器会暴露暗淡的成员，所以这会起作用：

```
template< template< int, class> class container, int dim, class content_data_type >
class MyClass 
{
public:
  typedef typename container< dim, content_data_type > container_type;

  static const int dim = container_type::dim;
};

template< int d, class >
class acontainer
{
public:
  static const int dim = d;
};

MyClass< acontainer, 2, sometype > x;
std::cout << "container size " << x.dim << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:20:35.423

下面是一种解决方法，您必须将两个参数定义为容器类公开的*类型*和*静态*`boost::array`（参见示例）

```
#include <iostream>

template <int d, class T>
struct container
{
  typedef T value_type;
  static const int static_size = d;
};

template<typename cont, int d = cont::static_size, class T = typename cont::value_type>
struct A
{
  static const int dimension = d;
};

int main(void)
{
  A<container<10, int> > a;
  std::cout << a.dimension << std::endl;
} 
```

# jquery - 如何使用新的 ajax 内容进行无限滚动重置

> ID：11222612
> 
> 赞同：6
> 
> 时间：2012-06-27T08:53:47.457
> 
> 标签：jquery, loops, infinite-scroll

在我的主页上，我有一个使用无限滚动的帖子循环。用户可以使用 ajax （如 ajax 搜索等）将该循环替换为其他循环。我的问题是无限滚动只在第一次使用时才有效，所以如果它是为主循环触发的，那么当新循环替换主循环时它将不再工作。每次新循环替换旧循环时，都会重新加载以下函数。那么，每次调用新循环时，如何使无限滚动重置和工作？

```
var href = 'first';
$(document).ready(function() {
    $('#boxes').infinitescroll({
        navSelector: '.infinitescroll',
        nextSelector: '.infinitescroll a',
        itemSelector: '#boxes .box',
        loadingImg: '<?php echo get_bloginfo('stylesheet_directory') ?>/images/loading.gif',
        loadingText: 'Loading...',
        donetext: 'No more pages to load.',
        debug: false
    }, function(arrayOfNewElems) {
        $('#boxes').masonry('appended', $(arrayOfNewElems));
        if(href != $('.infinitescroll a').attr('href')) {
            href = $('.infinitescroll a').attr('href');
        }
    });
}); 
```

我在wordpress 网站上使用[Pual Irish 无限滚动插件的最新版本 2.0b2.120519。](http://www.infinite-scroll.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T04:12:01.773

我不能 100% 确定您使用的是哪个版本的插件，但我检查了最新的发行版，您需要执行两种方法才能使其正常工作。

首先，在您的 ajax 函数中，您需要`destroy the session on success`.

```
$.ajax({
  url: 'path/to/something.ext',
  success: function(data){
    //call the method to destroy the current infinitescroll session.
    $('#boxes').infinitescroll('destroy');

    //insert the new data into the container from the_loop() call
    $('#boxes').html(data);

    //reinstantiate the container
    $('#boxes').infinitescroll({                      
      state: {                                              
        isDestroyed: false,
        isDone: false                           
      }
    });

    //call the methods you need on the container again.
    $('#boxes').infinitescroll({
      navSelector: '.infinitescroll',
      nextSelector: '.infinitescroll a',
      itemSelector: '#boxes .box',
      loadingImg: '<?php echo get_bloginfo('stylesheet_directory') ?>/images/loading.gif',
      loadingText: 'Loading...',
      donetext: 'No more pages to load.',
      debug: false
    }, function(arrayOfNewElems) {
      $('#boxes').masonry('appended', $(arrayOfNewElems));
      if(href != $('.infinitescroll a').attr('href')) {
        href = $('.infinitescroll a').attr('href');
      }
    });
  }
}); 
```

你也可以把它变成一个函数，绑定到它，然后解除绑定/重新绑定而不是重复很多代码，但是我概述的代码应该是一个复制+粘贴解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:41:14.210

我认为可以做到这一点。在我的页面中，我点击不同的元素来加载不同的页面。这些页面也是无限滚动的。所以我修改了下面的源代码：

```
 // creation 
        case 'object':

            this.each(function () {

                var instance = $.data(this, 'infinitescroll');

            /*   if (instance) {

                    // update options of current instance
                    instance.update(options);

                } else {
             */
                $(this).removeData("infinitescroll");

                // initialize new instance
                 $.data(this, 'infinitescroll', new $.infinitescroll(options, callback, this));

         //    }

            }); 
```

每次我删除日期并创建一个新的无限滚动。所以每一次每一个元素都是好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T03:52:28.807

适用于 v2.0b.120520

```
$('#boxes').infinitescroll('binding','unbind');
$('#boxes').data('infinitescroll', null); 
```

信用：[http ://www.powerhour.at/devblog/reset-jquery-infinitescroll-after-ajax-call/](http://www.powerhour.at/devblog/reset-jquery-infinitescroll-after-ajax-call/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T12:19:20.630

称呼

```
$('#boxes').infinitescroll({                      
                state: {                                              
                  isDuringAjax: false,
                    isInvalidPage: false,
            isDestroyed: false,
            isDone: false, // For when it goes all the way through the archive.
            isPaused: false,
            currPage: 1

                }
            });
then 
$('#boxes').infinitescroll({
      navSelector: '.infinitescroll',
      nextSelector: '.infinitescroll a',
      itemSelector: '#boxes .box',
      loadingImg: '<?php echo get_bloginfo('stylesheet_directory') ?>/images/loading.gif',
      loadingText: 'Loading...',
      donetext: 'No more pages to load.',
      debug: false
    }, function(arrayOfNewElems) {
      $('#boxes').masonry('appended', $(arrayOfNewElems));
      if(href != $('.infinitescroll a').attr('href')) {
        href = $('.infinitescroll a').attr('href');
      }
    }); 
```

希望它有效

# c++ - strlen 返回不合理的数字

> ID：11222613
> 
> 赞同：1
> 
> 时间：2012-06-27T08:53:52.373
> 
> 标签：c++, strlen

如果我写：

```
char  lili [3];
cout<<strlen(lili)<<endl; 
```

然后打印的是：11

但如果我写：

```
char  lili [3];
lili [3]='\0';
cout<<strlen(lili)<<endl; 
```

然后我得到3。

我不明白为什么它在第一部分返回 11？
strlen 不应该返回 3，因为我为 分配了 3 个字符`lili`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:55:52.900

这是因为`strlen`适用于“C 风格”以空字符结尾的字符串。如果您像在第一个示例中那样给它一个普通指针或未初始化的缓冲区，它将继续在内存中前进，直到它 a) 找到 a `\0`，此时它将返回该“字符串”的长度，或 b) 直到它到达受保护的内存位置并产生错误。

鉴于您已标记此 C++，也许您应该考虑使用`std::array`或更好，`std::string`. `size()`两者都提供长度返回函数（

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T08:55:24.100

该`strlen`函数搜索设置为 的字节`\0`。如果在未初始化的数组上运行它，则行为未定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T08:54:54.133

你必须先初始化你的数组。否则里面有随机数据。

`strlen`正在寻找一个字符串终止符号并将计数直到找到它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T09:04:44.610

strlen 计算字符数，直到达到 '\0'（表示“字符串结尾”）。在 C 和 C++ 中，char[] 等价于 char *，strlen`lili`用作指向 char 的指针并迭代它所指向的内存，直到它到达终止的 '\0'。碰巧内存中有 0 个字节，而为您的数组分配的内存中有 11 个字节。你可能会得到更奇怪的结果。

实际上，当您编写 lili[3] = '\0' 时，您会访问数组之外​​的内存。C/C++ 中 3 元素数组的有效索引为 0-2。

# java - 在 Windows 2008 上从 JNI 加载 dll 时出错

> ID：11222616
> 
> 赞同：1
> 
> 时间：2012-06-27T08:54:02.250
> 
> 标签：java, c++, java-native-interface

我们有一个通过 JNI 依赖于 C++ 代码的 java 程序。我们有用于 solaris 和 windows 的 C++ 代码的 .so 和 .dll 放置在 java 程序的类路径中。同样在 Windows 上，我们生成了 java.exe.manifest 以强制 Windows 使用 MSVC RTL。这在 solaris 和 windows 2003 中运行良好，但在 windows 2008 上我收到错误消息“并排组装配置错误”

这是 java.exe.manifest

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50727.762' processorArchitecture='amd64' publicKeyToken='1fc8b3b9a1e18e3b' />
    </dependentAssembly>
  </dependency>
</assembly> 
```

我也尝试通过 sxstrace 调试问题，这是它的日志

```
=================
Begin Activation Context Generation.
Input Parameter:
    Flags = 0
    ProcessorArchitecture = AMD64
    CultureFallBacks = en-US;en
    ManifestPath = D:\JDA\TRO\bin\OptCoreBodies.dll
    AssemblyDirectory = D:\JDA\TRO\bin\
    Application Config File = 
-----------------
INFO: Parsing Manifest File D:\JDA\TRO\bin\OptCoreBodies.dll.
    INFO: Manifest Definition Identity is (null).
    INFO: Reference: Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50608.0"
    INFO: Reference: Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053"
INFO: Resolving reference Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50608.0".
    INFO: Resolving reference for ProcessorArchitecture amd64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: Find publisher policy at C:\Windows\WinSxS\manifests\amd64_policy.8.0.microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.3053_none_09c0f5a3facc9779.manifest
                INFO: Publisher Policy redirected assembly version.
                INFO: Post policy assembly identity is Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.3053".
            INFO: Begin assembly probing.
                INFO: Attempt to probe manifest at C:\Windows\WinSxS\manifests\amd64_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.3053_none_88e044e32fae7230.manifest.
                INFO: Manifest found at C:\Windows\WinSxS\manifests\amd64_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.3053_none_88e044e32fae7230.manifest.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.CRT.mui,language="&#x2a;",processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.3053".
    INFO: Resolving reference for ProcessorArchitecture amd64.
        INFO: Resolving reference for culture en-US.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_64\Microsoft.VC80.CRT.mui\8.0.50727.3053_en-US_1fc8b3b9a1e18e3b\Microsoft.VC80.CRT.mui.DLL.
                INFO: Did not find manifest for culture en-US.
            INFO: End assembly probing.
        INFO: Resolving reference for culture en.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_64\Microsoft.VC80.CRT.mui\8.0.50727.3053_en_1fc8b3b9a1e18e3b\Microsoft.VC80.CRT.mui.DLL.
                INFO: Did not find manifest for culture en.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053".
    INFO: Resolving reference for ProcessorArchitecture amd64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_64\Microsoft.VC80.CRT\8.0.50727.4053__1fc8b3b9a1e18e3b\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at D:\JDA\TRO\bin\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at D:\JDA\TRO\bin\Microsoft.VC80.CRT.MANIFEST.
                INFO: Attempt to probe manifest at D:\JDA\TRO\bin\Microsoft.VC80.CRT\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at D:\JDA\TRO\bin\Microsoft.VC80.CRT\Microsoft.VC80.CRT.MANIFEST.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    ERROR: Cannot resolve reference Microsoft.VC80.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053".
ERROR: Activation Context generation failed.
End Activation Context Generation. 
```

谁能帮我解决这个问题。我尝试安装 MS VS 2005 Redistributable 但没有用。

提前致谢 Niraj Rathi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:52:35.570

我终于解决了这个问题。我重新安装了操作系统，然后安装了 Visual C++ 2005 Redistributables (x64) 和 SP1。然后安装 Java 64 位。然后添加 HKEY_LOCAL_MACHINE\COMPONENTS\PreferExternalManifest 注册表并将其设置为 1。

在那个问题得到解决之后。

谢谢尼拉吉·拉蒂

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:28:31.980

您使用 version='8.0.50727.762' 编译的 CRT 版本以及您正在执行的系统没有此 CRT 版本。所以@panickal 提到安装`MS VS 2005 Redistributable Package`应该可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:35:15.577

尝试`x64`安装`MS VS 2005 Redistributable Package`.

MS VS 2005 Redistributable Package 有四种变体

*   [Microsoft Visual C++ 2005 可再发行包 (x64)](http://www.microsoft.com/en-us/download/details.aspx?id=21254)
*   [Microsoft Visual C++ 2005 SP1 可再发行包 (x64)](http://www.microsoft.com/en-us/download/details.aspx?id=18471)
*   [Microsoft Visual C++ 2005 可再发行包 (x86)](http://www.microsoft.com/en-gb/download/details.aspx?id=3387)
*   [Microsoft Visual C++ 2005 SP1 可再发行包 (x86)](http://www.microsoft.com/en-gb/download/details.aspx?id=5638)

# javascript - 将代码附加到现有函数的末尾

> ID：11222618
> 
> 赞同：19
> 
> 时间：2012-06-27T08:54:10.453
> 
> 标签：javascript, eval

每当函数 foo() 触发时，我都需要触发函数 bar()。我无法控制函数 foo 或它是否会在未来发生变化。我经常遇到这种情况（我讨厌它）。

我编写了这个函数来将我的代码添加到函数 foo 的末尾：

```
function appendToFunction(fn,code){ 
if(typeof fn == 'function'){
    var fnCode = fn.toString() ;
    fnCode = fnCode.replace(/\}$/,code+"\n}") ;
    window.eval(fnCode);                    // Global scope
    return true ;
}
else{
    return false ;
}
} 
```

例如：

```
appendToFunction(foo,"bar();"); 
```

这让我觉得这是一个可怕的想法——但它确实有效。请有人指出我更好（更安全）的方向。

编辑：`foo`不是一个特定的功能，而是我最终处理的许多功能。它们不会在页面中动态更改。但它们可能会不时更改（例如表单验证要求）。

**解决方案**：我选择了亚当答案的修改版本。它并不完美，但比我拥有的要好：

```
var oldFoo = foo ;
foo = function(){
        var result = oldFoo.apply(this, arguments);
        bar();
        return result ;
} 
```

注意。注意 IE6/7 中一些没有`.apply()`方法的本机函数。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-27T09:09:10.357

您可以`foo`使用调用原始函数的自定义函数进行覆盖。

例如

```
var old_foo = foo;
foo = function() {
  old_foo();
  bar();
} 
```

您还应该`foo`通过替换函数将任何参数传递给它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T09:05:56.433

```
function extend(fn,code){
  return function(){
    fn.apply(fn,arguments)
    code.apply(fn,argumnets)
  }
} 
```

并像这样使用它：

```
function appendToFunction(fn,code){ 
    if(typeof fn == 'function'){
        var fnCode = fn.toString() ;
        fnCode = fnCode.replace(/\}$/,code+"\n}") ;
        window.eval(fnCode);                    // Global scope
        return true ;
    }
    else{
        return false ;
    }
}

appendToFunction = extend(appendToFunction,function(){/*some code*/}); 
```

这将在两个函数中为您提供相同的“this”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T09:09:40.653

你可以做这样的事情：**[THE DEMO](http://jsfiddle.net/3USk6/)**。

```
function foo() {
 console.log('foo');
}

function appendToFunction(fn, callback) {
  window[fn] = (function(fn){
    return function() {
      fn();
      callback();
    }
 }(window[fn]));
}

appendToFunction('foo', function(){console.log('appended!')});

foo(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T09:05:18.210

嗯，这也与我有关，你提到过

> 我经常遇到这种情况（我讨厌它）。

你介意我问这种情况在什么情况下不断发生吗？它是在公司范围内，还是在个人项目范围内？你显然有一个冷静的头脑，并且知道你所做的事情与众不同，所以我想知道是否有替代解决方案。

我问的原因是；这种方法可能会引发一系列问题。`foo`例如，如果失败，或者如果`foo`返回一个中间评估值怎么办？通过简单地附加`bar`到实际函数并不能保证它会执行。另一方面，预先挂起它意味着它*更有*可能被执行，但在我看来仍然不是一个好方法。

您是否考虑过修改功能`foo`？我知道这似乎是一个愚蠢的问题，但如果您在整个过程中遇到类似问题，这可能是值得的。如果您想保持抽象，您可以采用“事件处理程序”方法，从而`foo`触发 上的事件`window`，然后触发`bar`，这是否适用于您的情况。

或者，如果你知道`foo`它是什么以及它做了什么，你可以钩入它的原型（如果它是一个对象），然后适当地修改那里的代码。但是，您确实提到此功能可以更改，这可能会使此选项变得多余，但它仍然是一种可能的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-15T12:50:03.287

您可以将一些新代码附加或添加到现有函数中，例如使用以下方法**合并它们：**

```
function mergeFunctions(function1, function2, instance1, instance2, numberOfArgumentsToPassToFunc1) {
    return function() {
        var _arguments  = Array.prototype.slice.apply(arguments);
        var _arguments1 = _arguments.slice(0, numberOfArgumentsToPassToFunc1);
        var _arguments2 = _arguments.slice(numberOfArgumentsToPassToFunc1);
        var that = this;
        (function(function1, function2) {
            if (typeof function1 == "function") {
                if (typeof instance1 != "undefined") {
                    function1.apply(instance1, _arguments1);
                }
                else if (that == window) {
                    function1.apply(function1, _arguments1);
                }
                else {
                    var compare = mergeFunctions(function(){}, function(){});
                    if (that.toString() == compare.toString()) {
                        function1.apply(function1, _arguments1);
                    }
                    else {
                        function1.apply(that, _arguments1);
                    }
                }
            }
            if (typeof function2 == "function") {
                if (typeof instance2 != "undefined") {
                    function2.apply(instance2, _arguments2);
                }
                else if (that == window) {
                    function2.apply(function2, _arguments2);
                }
                else {
                    var compare = mergeFunctions(function(){}, function(){});
                    if (that.toString() == compare.toString()) {
                        function2.apply(function2, _arguments2);
                    }
                    else {
                        function2.apply(that, _arguments2);
                    }
                }
            }
        })(function1, function2);
    }
} 
```

一个**基本**的例子如下：

```
// Original function:
var someFunction = function(){
    console.log("original content");
};

// Prepend new code:
// --------------------------------------------------------
someFunction = mergeFunctions(function() {
    console.log("--- prepended code");
}, someFunction);

// Testing:
someFunction();

// Outout:
// [Log] --- prepended code
// [Log] original content

// Append new code:
// --------------------------------------------------------
someFunction = mergeFunctions(someFunction, function() {
    console.log("appended code");
});

// Testing:
someFunction();

// Output:
// [Log] --- prepended code
// [Log] original content
// [Log] appended code 
```

**请注意**，合并函数会尝试将预期的“this”应用于合并的部分，否则您只需将所需的“this”传递给它们，也可以处理相关参数。
一个**更一般的例子**可能如下：

```
function firstPart(a, b) {
    console.log("--- first part");
    console.log("'this' here is:");
    console.log(this.name);
    console.log("a: "+a);
    console.log("b: "+b);
}

function MyObject() {
    this.x = "x property of MyObject";
}

MyObject.prototype.secondPart = function (y) {
    console.log("");
    console.log("--- second part");
    console.log("'this' here is:");
    console.log(this.name);
    this.x = y;
    console.log("x: "+this.x);
}

MyObject.prototype.merged = mergeFunctions(firstPart, MyObject.prototype.secondPart, firstPart, MyObject, 2);

// Testing
var test = new MyObject();
test.merged("a parameter", "b parameter", "x parameter overrides x property of MyObject");

// Console output:
// [Log] --- first part
// [Log] 'this' here is:
// [Log] firstPart
// [Log] a: a parameter
// [Log] b: b parameter
// [Log] 
// [Log] --- second part
// [Log] 'this' here is:
// [Log] MyObject
// [Log] x: x parameter overrides x property of MyObject 
```

# eclipse - Eclipse 插件在部署时不工作

> ID：11222620
> 
> 赞同：0
> 
> 时间：2012-06-27T08:54:19.273
> 
> 标签：eclipse, plugins, eclipse-plugin

我编写了一个 Eclipse 插件，当它在开发运行时运行时运行良好，但是在创建更新站点并安装后，行为发生了变化。

在大多数情况下，该功能确实有效，只是似乎无法显示 2 个对话框。第一个是从 org.eclipse.jface.dialogs.PopupDialog 子类化的弹出对话框。第二个是 org.eclipse.jface.dialogs.Dialog 的子类。

这些对话框周围的其余代码似乎根本不存在，所以我认为这两个环境（开发运行时和安装的运行时）之间存在差异，这会阻止插件找到正确的类/正确显示它们。

我尝试将 org.eclipse.jface.dialogs 包添加到插件清单中，但是我找不到导入到代码中的确切包。我可以导入org.eclipse.jface.databinding.dialog，但显然不是同一个包。但是，我可以将 org.eclipse.jface 添加为插件的 feature.xml 的依赖项。这显然对我的问题没有影响。

由于它在开发中按预期工作并且我找不到任何错误消息，我不知道下一步该做什么。任何人都可以建议我可能会出错的地方吗？

亚当

***** 根据要求提供更多信息***** 在开发时，我将插件作为 Eclipse 应用程序运行。然后我构建了我的更新站点并将其安装到我的 RTC 版本的 Eclipse 中。正是在这一点上，它停止了工作。**

 **当插件安装到 Eclipse 中时，它肯定会启动。我已经从 OSGi 控制台和运行它确认了这一点。对话框周围的代码执行正常。在上下文中，我有一个类进行一些 XML 处理，显示一个对话框，允许用户更改一些变量，然后继续处理。在插件的安装版本中，代码使用默认值运行start-finish，即不显示我的对话框。

在我的插件的 Manifest.MF 中，我尝试将 org.eclipse.jface 插件添加到依赖项选项卡，但它似乎没有解决问题。

我不确定 Eclipse 错误日志。我不确定在哪里可以找到这个。

我的插件的清单：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: RTC Scripter
Bundle-SymbolicName: RTC_Scripter;singleton:=true
Bundle-Version: 2.0.0.qualifier
Bundle-Activator: com.ibm.cics.dev.rtcscripter.Activator
Require-Bundle: org.eclipse.core.resources;bundle-version="3.6.2";visibility:=reexport,
 org.eclipse.ui,
 org.eclipse.core.runtime,
 com.ibm.team.concert;bundle-version="3.0.0",
 com.ibm.team.log4j.ui;bundle-version="1.1.0",
 com.ibm.team.process.client;bundle-version="1.2.0",
 com.ibm.team.process.common;bundle-version="1.2.0",
 com.ibm.team.repository.client;bundle-version="1.1.0",
 com.ibm.team.repository.common;bundle-version="1.1.0",
 com.ibm.team.repository.common.json;bundle-version="1.1.0",
 com.ibm.team.repository.common.remoteaccess;bundle-version="1.1.0",
 com.ibm.team.repository.common.remoteaccess.auth;bundle-version="1.1.0",
 com.ibm.team.repository.common.serialize;bundle-version="1.1.0",
 com.ibm.team.repository.common.transport;bundle-version="1.1.0",
 com.ibm.team.rtc.common;bundle-version="3.0.0",
 com.ibm.team.rtc.common.scriptengine;bundle-version="2.1.0",
 com.ibm.team.workitem.client;bundle-version="2.2.0",
 com.ibm.team.workitem.common;bundle-version="2.3.0",
 org.eclipse.ui.console;bundle-version="3.5.0",
 com.ibm.team.foundation.client;bundle-version="1.1.0",
 RTC_Scripter_EMF.editor;bundle-version="2.0.0";visibility:=reexport
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy
Export-Package: com.ibm.cics.dev.rtcscripter.util.export
Import-Package: org.eclipse.core.resources 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:10:50.933

首先检查链接或插件安装程序，了解版本和您使用的 Eclipse。因为有很多日食所以它必须是合适的。**

# css - 交替着色表格行

> ID：11222624
> 
> 赞同：1
> 
> 时间：2012-06-27T08:54:38.810
> 
> 标签：css

我使用催化剂、CSS 和 html 设计了一个网页。它在所有浏览器中都运行良好。我在网页中有表格，这些表格的列可以排序（升序或降序）。我交替地为表格的行着色。所有表格看起来都很好，行的颜色交替显示，但其中一个表格确实显示了这种颜色，直到启用排序或单击/选择任何表格单元格。

我不明白为什么会发生这种情况。我恳请有人在这方面帮助我，并告诉我为什么会发生这种情况以及如何解决这个问题。

提前致谢和问候

我试过这个，但它不工作。如果您能以简单的方式解释它，我会很有帮助，因为我是使用教程编程和创建 Web 应用程序的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:00:01.650

只需使用此（将颜色更改为您需要的颜色）应用于您的表格的 CSS：

```
table tr:nth-child(even)
{
    background-color: #F7F7FF;
} 
```

它在几乎所有浏览器中都得到了很好的支持，但 IE 仅在版本 9 中添加了支持。如果对 IE6-8 的支持是强制性的，您可以使用[selectivizr](http://selectivizr.com/)。您使用所需的所有标准选择器编写 CSS，它会为您解决问题，当您放弃 IE8 支持时，您只需删除包含，周围没有 JavaScript 技巧和一个标准 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:03:02.600

有一个 CSS 选择器，实际上是一个伪选择器，称为 nth-child。在纯 CSS 中，您可以执行以下操作：

```
tr:nth-child(even) {
    background-color: #000000;
} 
```

**注意：**不支持 IE，甚至 IE 8。

或者，如果你有 jQuery：

```
$(document).ready(function()
{
  $("tr:even").css("background-color", "#000000");
}); 
```

# xslt - XSLT - 将列表转换为嵌套元素

> ID：11222628
> 
> 赞同：1
> 
> 时间：2012-06-27T08:55:02.623
> 
> 标签：xslt

我们如何将同一层次结构级别的重复相关项转换为嵌套良好的元素？

我有类似这样的 XML 作为来自表单引擎的复杂 SQL 查询的输出，收集信息，如简历，其中一些字段（如以前的工作）可以重复。但是，它们不会以友好的方式输出：

```
<People>
  <Person>
    <Field1>Fred</Field1>
    <Field2>Head Chef</Field2>
    <Field3>The Ritz Hotel</Field3>
    <Field2>Bottle Washer</Field2>
    <Field3>Dog and Duck</Field3>
  </Person>
  <Person>
    <Field1>Mary</Field1>
    <Field2>Chief Executive</Field2>
    <Field3>BigCorp</Field3>
    <Field2>Manager</Field2>
    <Field3>LargeCorp</Field3>
    <Field2>Mail Clerk</Field2>
    <Field3>SmallCorp</Field3>
  </Person>
</People> 
```

我需要做的是将其转换为其他 XML，将重复的 Field2 和 Field3 集分离为单独的父元素，就像这样......

```
<People>
  <Person>
    <Name>Fred</Name>
    <Jobs>
      <Job>
        <JobTitle>Head Chef</JobTitle>
        <Employer>Ritz Hotel</Employer>
      </Job>
      <Job>
        <JobTitle>Bottle Washer</JobTitle>
        <Employer>Dog and Duck</Employer>
      </Job>
    </Jobs>
  </Person>

  <Person>
    <Name>Mary</Name>
    <Jobs>
      <Job>
        <JobTitle>Chief Executive</JobTitle>
        <Employer>BigCorp</Employer>
      </Job>
      <Job>
        <JobTitle>Manager</JobTitle>
        <Employer>LargeCorp</Employer>
      </Job>
      <Job>
        <JobTitle>Mail Clerk</JobTitle>
        <Employer>SmallCorp</Employer>
      </Job>
    </Jobs>
  </Person>
</People> 
```

字段将始终按顺序排列 - 即 Field1 然后是 Field2，然后是可选的另一个 Field1 和 Field2，可选地重复 ad nauseum。我有代码可以为单次出现的字段（当然有很多）做简单的事情，但是我可能需要像这样的几个重复字段集（教育历史、就业历史等）整理。不要担心从哪里获得翻译的名称（例如从“Field3”到“Employer”），我想我可以解决这个问题。如果它有助于解析，我可以调整输入元素的名称 - 例如，附加一个序列序号来对相关元素进行分组，例如：

```
...
    <Field2_Seq1>Head Chef</Field2_Seq1>
    <Field3_Seq1>The Ritz Hotel</Field3_Seq1>
    <Field2_Seq2>Bottle Washer</Field2_Seq2>
    <Field3_Seq2>Dog and Duck</Field3_Seq2>
.... 
```

我为此苦苦挣扎——我是 XSL 的新手，并且承受着让它工作的压力（我们什么时候不工作？），所以非常感谢任何帮助。
谢谢，基思。

编辑：实际上，重复集中有更多字段（例如 Field4、Field5...FieldN）并且它们是可选的，因此我们可能在序列中省略了项目：那些存在的项目将按升序排列，但不一定按顺序排列. 新 Job 元素的触发器是数字倒退（例如从 Field6 到 Field3）。所以我们需要应对，例如

```
...
<Field1>John</Field1>
<Field4>Something</Field4>
<Field6>Missed some more</Field6>
<Field2>New Job</Field2>
... 
```

产生类似（部分）的东西

```
...
<Person>
  <Name>John</Name>
  <Job>
    <SomeElement>Something</SomeElement>
    <YetAnother>Missed some more</YetAnother>
  </Job>
  <Job>
    <JobTitle>New Job</JobTitle>
... 
```

为不充分的原始问题示例道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:02:43.647

如果您知道顺序，则可以在序列中的第一个进行匹配，然后使用 following-sibling 获取后续元素（如果不确定是否存在，请检查以下元素的名称） .

下面的 XSLT 会将您的第一个 XML 转换为您的第一个输出 XML。尝试将 following-sibling::*[1] 更改为 [2] 等以获得更多兄弟姐妹：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="Person">
        <Person>
            <Name><xsl:value-of select="Field1"/></Name>
            <Jobs>
                <xsl:apply-templates select="Field2"/>
            </Jobs>
        </Person>
    </xsl:template>
    <xsl:template match="Field2">
        <Job>
            <JobTitle><xsl:value-of select="."/></JobTitle>
            <xsl:if test="./following-sibling::*[1][name() = 'Field3']">
                <Employer><xsl:value-of select="./following-sibling::*[1]"/></Employer>
            </xsl:if>
        </Job>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:37:58.887

这个 XSLT 1.0 样式表应该可以解决问题...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <People>
   <xsl:apply-templates select="People/Person"/>
 </People>
</xsl:template>

<xsl:template match="Person">
 <xsl:copy>
  <Name><xsl:value-of select="Field1"/></Name>
  <jobs>
   <xsl:for-each select="*[not( substring( local-name( preceding-sibling::*
                     [substring( local-name(), 6) &gt; 1][1]),6) &lt;
                    substring( local-name(), 6))
                    and substring( local-name(), 6) &gt; 1]">
    <job>
      <xsl:variable name="id-of-head" select="generate-id()" />
      <xsl:apply-templates select="
       .|(following-sibling::*[
         $id-of-head = generate-id(
      preceding-sibling::*[not( substring( local-name( preceding-sibling::*
                     [substring( local-name(), 6) &gt; 1][1]),6) &lt;
                    substring( local-name(), 6))][1])]
      [substring( local-name( preceding-sibling::*
                     [substring( local-name(), 6) &gt; 1][1]),6) &lt;
                    substring( local-name(), 6)])" />
    </job>  
   </xsl:for-each> 
  </jobs>
 </xsl:copy>
</xsl:template>

<xsl:template match="Field2" priority="1">
  <JobTitle><xsl:value-of select="." /></JobTitle> 
</xsl:template>

<xsl:template match="Field3" priority="1">
  <Employer><xsl:value-of select="." /></Employer> 
</xsl:template>

<xsl:template match="*[substring( local-name(), 6) &gt; 1]">
  <xsl:copy>
    <xsl:value-of select="." />
    <xsl:comment>You haven't defined a translation for this field yet.
To do so, just add another template.
See templates for Fields 2 and 3 for example.</xsl:comment>
  </xsl:copy> 
</xsl:template>

</xsl:stylesheet> 
```

应该有聪明的方法来做等效的键。让我们知道您是否可以使用 XSLT 2.0，因为这将使解决方案变得**更小更简单**。

# 更新

我将此样式表转换为使用键的表单，它可能更具可读性。我不确定它是否符合 muenchian 或准 muenchian 的条件？这是...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:key name="job"
  match="
  Person/*
    [starts-with(local-name(),'Field')]
    [substring( local-name(), 6) &gt; 1]"
  use="
  generate-id( (.|preceding-sibling::*)
    [starts-with(local-name(),'Field')]
    [substring( local-name(), 6) &gt; 1]
    [
     (position() = 1)
      or
     ( substring( local-name(), 6)
        &lt;
     substring(
       local-name( preceding-sibling::*
       [starts-with(local-name(),'Field')]
       [1]
           ), 6
          )
     )
    ]
    [last()])"
  />

<xsl:template match="/">
 <People>
   <xsl:apply-templates select="People/Person"/>
 </People>
</xsl:template>

<xsl:template match="Person">
 <xsl:copy>
  <Name><xsl:value-of select="Field1"/></Name>
  <jobs>
   <xsl:for-each select="
    *
    [starts-with(local-name(),'Field')]
    [substring( local-name(), 6) &gt; 1]
    [
     (position() = 1)
        or
     ( substring( local-name(), 6)
        &lt;
       substring(
       local-name( preceding-sibling::*
         [starts-with(local-name(),'Field')]
         [1]
             ), 6
          )
      )
     ]">
    <job>
    <xsl:apply-templates select="key('job',generate-id(.))" />
  </job>
   </xsl:for-each>
  </jobs>
 </xsl:copy>
</xsl:template>

<xsl:template match="Field2" priority="1">
  <JobTitle><xsl:value-of select="." /></JobTitle>
</xsl:template>

<xsl:template match="Field3" priority="1">
  <Employer><xsl:value-of select="." /></Employer>
</xsl:template>

<xsl:template match="*[substring( local-name(), 6) &gt; 1]">
  <xsl:copy>
    <xsl:value-of select="." />
    <xsl:comment>You haven't defined a translation for this field yet.
To do so, just add another template.
See templates for Fields 2 and 3 for example.</xsl:comment>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# php - 映射常量值组

> ID：11222633
> 
> 赞同：1
> 
> 时间：2012-06-27T08:55:17.880
> 
> 标签：php, constants

我有字符串与值对应的列表。例如，在公司列表中，我可以让 Microsoft 与字母 MS 相对应。

显然，这可以转换为 MySQL 中的表以使列表可扩展，但出于好奇，您将如何在 PHP 中以常量形式表达它？

PS：有使用常量的类方法（请参阅此处接受的答案：[PHP 和 Enumerations](https://stackoverflow.com/questions/254514/php-and-enums)）充当枚举，但是看到枚举映射到整数值真的有用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:00:35.007

如何使用定义

```
define("MS","Microsoft");
echo MS; 
```

这将呼应微软。

[http://php.net/manual/en/function.define.php](http://php.net/manual/en/function.define.php)

此外，您提供的可能解决方案的链接也可以很容易地与字符串一起使用。它充当其他语言的枚举的唯一原因是因为您定义了从 0 到 n 的值，而不是只使用字符串来代替。

```
class Companies {
    const MS  = 'Microsoft';
    const IBM = 'International Business Machines';
}

echo Companies::MS; 
```

我认为这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:04:06.057

如果一家公司可以有许多相应的字母，我可能会从查看[多维](http://webcheatsheet.com/php/multidimensional_arrays.php)数组开始，但是缺点是它们可能难以管理，您的另一个选择是定义[常量](http://php.net/manual/en/function.define.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:07:14.890

如果您有键值对，则可以将它们放入对象中，因此使用起来更实用。

检查此链接：[arrayToObject() 函数](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)

# ssis - SSIS 2008 解析平面文件

> ID：11222634
> 
> 赞同：0
> 
> 时间：2012-06-27T08:55:18.317
> 
> 标签：ssis, flat-file

我正在尝试使用 SSIS 2008 导入以下 txt 文件。

```
:BEGIN
"2011-12-19 10:30:56"
"Alignement pos.10-74"  -0.0010
"Côté Rouage"
"X_pos.réf.10"  -8.8340 -8.8340 0.0020  0.0020  -0.0000 
"Y_pos.réf.10"  1.0330  1.0330  0.0020  0.0020  -0.0000 
```

我将 ff 连接定义为：代码页：1252 ANSI；格式：分隔；文本限定符：" ; 标题行分隔 {CR}{LF}

然后当我预览时，只定义了 1 列并包含整行。如果我再添加 5 列，并跳过前 4 行，则导入按预期工作，但如果我不跳过行，第一列将如下所示： : **BEGIN"2011-12-19 10:30:56" “对齐 pos.10-74”**

知道如何从该 FF 中获取正确的数据吗？

非常感谢

# google-maps - 谷歌地图灰色地带

> ID：11222635
> 
> 赞同：1
> 
> 时间：2012-06-27T08:55:19.237
> 
> 标签：google-maps

上周我遇到了谷歌地图的问题。地图已部分加载，因此我对此进行了搜索，但找不到解决方案。正如一些人建议的那样，我将此代码放在调整大小事件上，但仍然会出现同样的问题。

```
$(window).resize(function () { 
    google.maps.event.trigger(map, 'resize');   
}); 
```

map 是我存储地图对象的变量。

有人可以给我小费吗？

先感谢您。

# eclipse - Eclipse 中的活动工作集

> ID：11222637
> 
> 赞同：0
> 
> 时间：2012-06-27T08:55:22.133
> 
> 标签：eclipse, working-set

我熟悉 Eclipse 和工作集。但是有一点我不明白：为什么在“选择工作集...”、“取消选择工作集”、“编辑活动工作集..”选项下有新的菜单选项（带有一些工作集名称）？

单击其中一个工作集名称，左侧会出现一个点，并且项目浏览器视图仅包含该工作集。

看来这是活跃的工作集。那正确吗？

但是，我不明白如何强制工作集出现在菜单选项中，以便我可以选择它处于活动状态。在我的工作区中，我有 10 个工作集，但其中只有 2 个在菜单选项中，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:30:24.730

您在选项下方看到的工作集列表是`"Select Working Set...", "Deselect Working Set", "Edit Active Working Set.."`最近选择的。

> 单击其中一个工作集名称时，左侧会出现一个点，并且项目浏览器视图仅包含此工作集。看来这是活跃的工作集。那正确吗 ？

是的，带有点的那个是活动工作集。

> 但是，我不明白如何强制工作集出现在菜单选项中，以便我可以选择它处于活动状态。在我的工作区中，我有 10 个工作集，但其中只有 2 个在菜单选项中，我不知道为什么。

如果您想在此菜单中显示特定的工作集（例如 working set `Last`），然后单击`Select Working Set...`并在出现的对话框中，只需选择该特定工作集并单击 OK。如图所示：

![在此处输入图像描述](../Images/04a4b44d437235a159a11938b54bb8b5.png)

# android - 单击菜单时将屏幕向右移动；喜欢脸书

> ID：11222652
> 
> 赞同：3
> 
> 时间：2012-06-27T08:55:59.383
> 
> 标签：android, facebook, android-layout, android-side-navigation

在我的应用程序中，我希望有类似 facebook 应用程序的行为，其中单击图标我想将整个屏幕向右移动并在左侧显示一些菜单，如下所示：

单击菜单按钮之前

![点击菜单之前](../Images/ef7f36452c3bbb497d3cd0e1e27ba7b5.png)

单击菜单按钮后

![单击菜单按钮后](../Images/c0f7fd9c105cc8c5665e3bb39e33a314.png)

一种方法是将这些菜单的布局设置为黑色，并将其可见性设置为`gone`

但在这种情况下，移动动画将不会像在 facebook 中那样存在。那么我们有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:04:22.103

此 UI 模式目前被称为侧边导航，并在此处进行了详细讨论：

[http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)

这篇文章还链接到几个已经实现了这个导航的项目：

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

[https://bitbucket.org/jfeinstein10/slidingmenu/overview](https://bitbucket.org/jfeinstein10/slidingmenu/overview)

[https://github.com/Gregadeaux/android-fly-in-app-navigation](https://github.com/Gregadeaux/android-fly-in-app-navigation)

不过，这篇文章也值得一读，因为它讨论了这种导航的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:03:49.827

我还没有实现它，但给你一个确切的想法，你必须为此使用片段。通过这个[链接](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T11:06:25.867

这是我找到的最好的[https://github.com/DWorkS/ActionBarToggle](https://github.com/DWorkS/ActionBarToggle)，因为它的实现类似于谷歌使用 ActionBarToggle 的 DrawerLayout。虽然，它的开放方法有问题，但我写信给它的主人，他说他会解决的。

# python - 为什么这个 Python 脚本会创建一个无限循环？（递归）

> ID：11222661
> 
> 赞同：6
> 
> 时间：2012-06-27T08:56:34.340
> 
> 标签：python, recursion, stack-overflow

为什么/如何创建一个看似无限的循环？错误地，我认为这会导致某种形式的堆栈溢出类型错误。

```
i = 0

def foo () :
    global i

    i += 1
    try :
        foo()
    except RuntimeError :
        # This call recursively goes off toward infinity, apparently.
        foo()

foo()

print i 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:09:42.290

`RuntimeError`如果超出递归限制，将引发异常。

由于您正在捕获此异常，因此您的机器将继续运行，但您只是添加到单个全局 int 值，它不会使用太多内存。

您可以使用 设置递归限制`sys.setrecursionlimit()`。电流限制可以通过 找到`sys.getrecursionlimit()`。

```
>>> import sys
>>> sys.setrecursionlimit(100)
>>>
>>> def foo(i):
...     i += 1
...     foo(i)
...
>>> foo(1)
Traceback (most recent call last):
  ...
  File "<stdin>", line 3, in foo
RuntimeError: maximum recursion depth exceeded
>>> 
```

如果您想用完内存，请尝试消耗更多内存。

```
>>> def foo(l):
...     l = l * 100
...     foo(l)
...
>>> foo(["hello"])
Traceback (most recent call last):
  ...
  File "<stdin>", line 2, in foo
MemoryError
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:19:35.703

如果您将代码更改为

```
i = 0
def foo ():
    global i
    i += 1
    print i
    try :
        foo()
    except RuntimeError :
        # This call recursively goes off toward infinity, apparently.
        foo()
    finally:
        i -= 1
        print i

foo() 
```

您将观察到输出在 999 以下振荡（1000 是 Python 的默认递归限制）。`RuntimeError`这意味着`foo()`，当达到限制时（

如果您提出 a `KeyboardInterrupt`，您将观察到整个跟踪是如何立即终止的。

* * *

**更新**

有趣的是，第二个调用`foo()`不再受`try ... except`-block 保护。因此，应用程序实际上最终会终止。如果您将递归限制设置为较小的数字，这将变得很明显，例如`sys.setrecursionlimit(3)`：

```
$ python test.py
1
2
1
2
1
0
Traceback (most recent call last):
  File "test.py", line 19, in <module>
    foo()
  File "test.py", line 14, in foo
    foo()
  File "test.py", line 14, in foo
    foo()
RuntimeError 
```

# javascript - JavaScript 在 MVC Web 应用程序中不起作用

> ID：11222665
> 
> 赞同：0
> 
> 时间：2012-06-27T08:56:50.933
> 
> 标签：javascript, asp.net-mvc

我有一个 ASP.NET MVC 应用程序，页面上有一些用户可以更改的条目，然后单击保存，然后我会保存这些条目。我的问题：它适用于某些条目，而对于其他条目，它只是没有进入控制器保存功能来进行保存。我的代码：

```
 function DoSave() {
         $("#pisave").attr("disabled", true);
         var pid = $("#personid").val();alert(pid);
         var firstname = $("#fname").val();alert(firstname);
         var lastname = $("#lastname").val();alert(lastname);
         var plz = $("#zip").val();alert(plz);
         var ort = $("#city").val();alert(ort);
         var bday = $("#birthdate").val();alert(bday);
         var strasse = $("#street1").val(); alert(strasse);
         var emailtext = $("#email").val();alert(emailtext);
         var url = "@(Url.Action("SavePersonInfo", "Info"))";alert("URL");
        $.ajax({
            url: url,
            data: { personid: pid,fn: firstname, ln: lastname, email: emailtext, zip: plz, city:ort, birthday: bday, street:strasse },
            success: function () {                    
            alert("Update Successful");
            $("#pisave").removeAttr("disabled");
            },
           error: function () {                    
              alert("Update Failed! Check entries.");
             $("#pisave").removeAttr("disabled");
            }
        });
    } 
```

在所有情况下都会显示所有警报。仅对某些人进入 SavePersonInfo，而对另一些人则不进入。任何想法可能有什么问题？这可能是条目的验证问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:24:53.063

模型绑定器无法解析您的日期，更改为发布：

```
$.ajax({
    type: "POST",
    url: url,
    data: { personid: pid,fn: firstname, ln: lastname, email: emailtext, zip: plz, city:ort, birthday: bday, street:strasse },
    success: function() {
        alert("Update Successful");
        $("#pisave").removeAttr("disabled");
    },
    error: function() {
        alert("Update Failed! Check entries.");
        $("#pisave").removeAttr("disabled");
    }
});​ 
```

[阅读更多关于 asp.net-MVC 中日期问题的信息](https://stackoverflow.com/a/8035636/601179)

请注意，您可以将所有元素添加到一个类并使用该`serialize`函数：

```
$.ajax({
    type: "POST",
    url: url,
    data: $('.theClass').serialize(), // <=============
    success: function() {
        alert("Update Successful");
        $("#pisave").removeAttr("disabled");
    },
    error: function() {
        alert("Update Failed! Check entries.");
        $("#pisave").removeAttr("disabled");
    }
});​ 
```

# iphone - 当应用程序进入前台时 iPodMusicPlayer 停止

> ID：11222668
> 
> 赞同：1
> 
> 时间：2012-06-27T08:57:00.700
> 
> 标签：iphone, ios, multitasking, mpmusicplayercontroller

我有一个播放 iPhone 库音乐的 aiPhone 应用程序。我目前正在使用 iPodMusicPlayer。当应用程序进入后台时，一切仍然正常。但是当谈到前台时，iPodMusicPlayer 停止了。这个问题有什么解决方案吗？或者我应该使用 AVPlayer。谢谢

# drupal - Drupal 6 在设置表单中创建 CRUD 网格

> ID：11222672
> 
> 赞同：0
> 
> 时间：2012-06-27T08:57:10.037
> 
> 标签：drupal, drupal-6, themes

我对 Drupal 很陌生，我想创建一个自定义网格，其中包含一些可编辑的列、一些其他列和复选框等。

我正在使用该`theme()`函数来创建表并在设置中呈现它。由于我找不到任何访问表单/设置变量的方法，因此在主题函数中，我在 drupal 数据库中创建了一个包含 gid 值的自定义表，然后渲染这些行。出于测试目的，我获取“变量”表行。这是到目前为止的代码：

```
 $form['module_settings']['profile_grid'] = array(
        '#type' => 'item',
        '#title' => t('Profile Mapping'),
        '#theme' => 'profile_mapping_grid'
    );

function theme_profile_mapping_grid($sender) {
    $header = array('', t('name'), t('value'));
    $result = db_query('SELECT v.name, v.value from {variable} v');
    while ($pair = db_fetch_object($result)) { 
        $format = array(
            '#type' => 'textfield',
            '#size' => 30,
            '#value' => $pair->name
        );
        $hhfield = array(
            '#type' => 'textfield',
            '#size' => 30,
            '#value' => $pair->value
        );
        $row = array('');
        $row[] = drupal_render($format);
        $row[] = drupal_render($hhfield);
        $rows[] = array('data' => $row);    
    }

    $output = theme('table', $header, $rows, array('id' => 'gridErrors'));
    return $output;
} 
```

网格生成正确，但我有一个问题。我无法将“名称”属性设置为文本字段，以便稍后在提交操作中收集它的值。此外，我不确定这是否是创建设置网格的最佳方式。

任何想法，意见等都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:29:33.627

您正在主题函数中生成字段，但它不起作用，因为提交函数只会作用于您的表单函数生成的字段。

正确的方法是在表单函数中生成所有字段（基本上是你现在在主题函数中所做的）并使用drupal_render在主题中渲染它们。

> 由于我找不到任何方法来访问表单/设置变量，因此在主题函数中

表单作为参数传递给主题函数，在您的情况下为 $sender，这就是您访问它们的方式。

这是一些未经测试的代码，但您明白了。请记住，该调用`$output .= drupal_render($form);`非常重要，因为它呈现了 Form API 所需的隐藏字段，例如 form_id 和 CSRF 保护。没有这个调用提交将无法工作。

```
function mymodule_grid_form($form_state) {
    $form = array();
    $form['variables'] = array();

    $result = db_query('SELECT v.name, v.value from {variable} v');
    while ($pair = db_fetch_object($result)) { 
        $form['variables'][$pair->name][$pair->name . '_name'] = array(
            '#type' => 'textfield',
            '#size' => 30,
            '#value' => $pair->name
        );
        $form['variables'][$pair->name][$pair->name . '_value'] = array(
            '#type' => 'textfield',
            '#size' => 30,
            '#value' => $pair->value
        );
    }

    return $form;
}

function theme_mymodule_grid_form($form) {
    $header = array('', t('name'), t('value'));

    foreach ($form['variables'] as $variable => $values) {
        $row = array('');
        $row[] = drupal_render($values[$variable . '_name']);
        $row[] = drupal_render($values[$variable . '_value']);
        $rows[] = array('data' => $row); 
    }

    $output = theme('table', $header, $rows, array('id' => 'gridErrors'));
    $output .= drupal_render($form);
    return $output;
}

function mymodule_theme() {
  return array(
    'mymodule_grid_form' => array(
      'arguments' => array('form' => NULL),
    ),
  );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T14:47:09.813

根据[Drupal 6 Form API 快速入门指南](https://www.drupal.org/node/751826)：

> 5.  不要对任何可由用户更改的表单元素使用“#value”属性。请改用“#default_value”属性。不要将来自 $form_state['values'] （或 $_POST）的值放在这里！FormsAPI 将为您处理；仅将字段的原始值放在这里。

你必须使用`'#default_value' => $pair->name`not `'#value' => $pair->value`。

这是带有设置表的示例模块。

安装文件：

```
<?php
// $Id$

/**
 * @file
 * The your_module module install file, which handles the install/uninstall tasks.
 *
 */

function your_module_install() {
  // Create tables.
  drupal_install_schema('your_module');
}

/**
 * Implementation of hook_schema().
 */
function your_module_schema() {

/* Settings table */
$schema['your_module_settings'] = array(
    'description' => 'Stores module settings.',
    'fields' => array(
        'record_id' => array(
            'description' => 'The primary identifier for a record.',
            'type' => 'serial', 
            'unsigned' => TRUE, 
            'not null' => TRUE),
        'item_code' => array(
            'type' => 'varchar', 
            'length' => '255', 
            'not null' => TRUE),
        'setting_one' => array(
            'type' => 'varchar', 
            'length' => '255', 
            'not null' => TRUE),
        'setting_two' => array(
            'type' => 'varchar', 
            'length' => '255')),
    'unique keys' => array(
        'record_id' => array('record_id')),
    'primary key' => array('record_id')
);

  return $schema;
}

/**
 * Implementation of hook_uninstall().
 */
function your_module_uninstall() {
  // Remove tables.
  drupal_uninstall_schema('your_module');
} 
```

模块文件：

```
<?php

/**
 * Implementation of hook_help()
 */
function your_module_help($path, $arg) 
{
  switch ($path) 
  {
    case 'admin/help#your_module':
      return '<p>'. t('Module description.') .'</p>';
  }
}

/**
 * Implementation of hook_menu()
 */
function your_module_menu()
{
  $items = array();

  /* module settings page */
  $items['admin/settings/your_module'] = array(
    'description' => 'Administer your_module module settings.',
    'title' => 'Some title',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('your_module_admin_settings'),
    'access arguments' => array('access administration pages'),
    'type' => MENU_NORMAL_ITEM,
    );

  return $items;
}

/**
 * Implementation of hook_theme().
 */
function your_module_theme() {
  return array(
    'your_module_products_settings' => array(
      'arguments' => array('form' => NULL),
    ),
  );
}

/**
 * Settings form
 */
function your_module_admin_settings(&$form_state)
{
  $form['your_module'] = array(
      '#type' => 'fieldset',
      '#title' => t('Settings'),
      '#description' => t('Settings description.'),
    );

  $form['your_module']['products_settings_table'] = array(
      '#theme' => 'your_module_products_settings',
      '#tree' => TRUE,
    );

  $form['your_module']['products_settings_table']['products_settings'] = array();

  $result = db_query('SELECT record_id, item_code, setting_one, setting_two  FROM {your_module_settings} ORDER BY item_code');

  while ($product_setting = db_fetch_object($result)) {
    $form['your_module']['products_settings_table']['products_settings'][$product_setting->record_id] = array();

    $form['your_module']['products_settings_table']['products_settings'][$product_setting->record_id]['item_code'] = array(
      '#type' => 'textfield',
      '#default_value' => $product_setting->item_code,
      '#size' => 8,
      '#maxlength' => 16,
    );

    $form['your_module']['products_settings_table']['products_settings'][$product_setting->record_id]['setting_one'] = array(
      '#type' => 'textfield',
      '#default_value' => $product_setting->setting_one,
      '#size' => 16,
      '#maxlength' => 16,
    );

    $form['your_module']['products_settings_table']['products_settings'][$product_setting->record_id]['setting_two'] = array(
      '#type' => 'textfield',
      '#default_value' => $product_setting->setting_two,
      '#size' => 40,
      '#maxlength' => 255,
    );
  }

  /* "add new row" fields */
  $form['your_module']['products_settings_table']['products_settings_new'] = array();

  /* new item_code */
  $form['your_module']['products_settings_table']['products_settings_new']['item_code'] = array(
    '#type' => 'textfield',
    '#size' => 8,
    '#maxlength' => 16,
    '#description' => t('description'),
  );

  /* new setting_one */
  $form['your_module']['products_settings_table']['products_settings_new']['setting_one'] = array(
    '#type' => 'textfield',
    '#size' => 16,
    '#maxlength' => 16,
    '#description' => t('description'),
  );

  /* setting_two */
  $form['your_module']['products_settings_table']['products_settings_new']['setting_two'] = array(
    '#type' => 'textfield',
    '#size' => 40,
    '#maxlength' => 255,
    '#description' => t('description'),
  );

  /* Submit button */
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Save Settings'),
    '#name' => 'SubmitButton',
  );

  return $form;
}

/**
 * Custom theme function for a table of products settings
 */
function theme_your_module_products_settings($form) {
  $header = array(t('Item Code'), t('Setting One'), t('Setting Two'));
  $rows = array();

  /* saved rows */
  foreach (element_children($form['products_settings']) as $key) {
    $row = array();
    $row[] = drupal_render($form['products_settings'][$key]['item_code']);
    $row[] = drupal_render($form['products_settings'][$key]['setting_one']);
    $row[] = drupal_render($form['products_settings'][$key]['setting_two']);
    $rows[] = $row;
  }

  /* new row to add */
  $row = array();
  $row[] = drupal_render($form['products_settings_new']['item_code']);
  $row[] = drupal_render($form['products_settings_new']['setting_one']);
  $row[] = drupal_render($form['products_settings_new']['setting_two']);
  $rows[] = $row;

  $output = theme('table', $header, $rows);
  return $output;
}

/**
 * Submission function for your_module_admin_settings form.
 */
function your_module_admin_settings_submit($form, &$form_state) {

  /* processing changes */
  if (isset($form_state['values']['products_settings_table']['products_settings'])) {
    foreach ($form_state['values']['products_settings_table']['products_settings'] as $record_id => $data) {
      if (empty($data['item_code']) && empty($data['setting_one']) && empty($data['setting_two'])) {
        /* delete saved row if all fields are empty */
        db_query("DELETE FROM {your_module_settings} WHERE record_id=%d", $record_id);

        drupal_set_message(t('Deleted.'), 'status');
      }
      else {
        /* update */
        db_query("UPDATE {your_module_settings} SET item_code='%s', setting_one='%s', setting_two='%s' WHERE record_id=%d",
          $data['item_code'], $data['setting_one'], $data['setting_two'], $record_id);
      }
    }
  }

  /* adding new row */
  $item_code = $form_state['values']['products_settings_table']['products_settings_new']['item_code'];
  $setting_one = $form_state['values']['products_settings_table']['products_settings_new']['setting_one'];
  $setting_two = $form_state['values']['products_settings_table']['products_settings_new']['setting_two'];

  if (!empty($item_code) && !empty($setting_one) && !empty($setting_two)) {

    db_query("INSERT INTO {your_module_settings} (item_code, setting_one, setting_two) VALUES ('%s', '%s', '%s')",
        $item_code, $setting_one, $setting_two);

    drupal_set_message(t('Added new setting.'), 'status');
  }

  drupal_set_message(t('Settings updated.'), 'status');
} 
```

# python - 对 Django 应用程序进行单元测试的好方法/设计

> ID：11222675
> 
> 赞同：1
> 
> 时间：2012-06-27T08:57:35.563
> 
> 标签：python, django, unit-testing, django-unittest

我的 django 应用程序为每个功能都有一个处理程序（例如，用于创建/保存/检索带有验证的发票模型的 Salesinvoice 处理程序）。这些处理程序在视图中用于执行用户想要的操作（例如创建发票）。

1.  为了确保应用程序的可靠性，**仅对处理程序进行单元测试就足够了吗？** 我在上述设计中的想法是，如果需要，我可以使用处理程序而不是 web 界面创建命令行界面。 **应用程序的这种设计是否可以确保可靠地单元测试 django 应用程序？** 用户请求 --> 视图 --> 处理程序（仅对处理程序进行单元测试） --> 模型

2.  **是否有任何 python/django 库来自动测试视图？**我的目标是通过尽可能多地进行自动化测试来确保应用程序的可靠性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:01:09.950

我不太明白你所说的“处理程序”是什么意思。是景色吗？还是接受请求的单独函数？

关于测试工具，您可以简单地使用请求之类的库[来](http://docs.python-requests.org/)创建请求并验证结果。使用 Django 的内部测试框架时，还有一个内置的测试客户端。

如果您想在浏览器中实际测试视图，您可以使用[Selenium](http://seleniumhq.org/)或[webdriver plus](https://github.com/tomchristie/webdriverplus)，这是 Selenium 的包装器，使其更易于使用。

可能有用的链接：

*   [http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/](http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/)
*   [http://harry.pythonanywhere.com/tutorial/1/](http://harry.pythonanywhere.com/tutorial/1/)

# asp.net - 编写 Web 处理程序以返回个人资料图像？

> ID：11222676
> 
> 赞同：1
> 
> 时间：2012-06-27T08:57:35.693
> 
> 标签：asp.net, security

主网站有一个个人资料页面。我将个人资料图像保存在“图像”文件夹中，我想这是个坏主意。所以现在我将图像文件夹移动到 App_Data 以便现在不允许远程访问该文件夹（更多安全性和隐私性）。因此，我的代码现在调用一个名为 ServiceImages 的服务，该服务具有一个名为 getimages 的方法，该方法传递了一个用户名。所以它的作用是，它返回名为“用户名”+扩展名的图像（我用用户名的名称保存图像）。但是，然后可以使用远程工具通过使用字母和数字的排列作为用户名来破解和获取所有图像，以获取图像并保存它。这当然不是我想要的。至少，不要让获取所有个人资料图像变得那么容易。那么如何限制对此类自动化工具的访问呢？使用 IP 检查是一个好主意，如何做到这一点？我不希望将图像保存在数据库中。难道没有其他优雅的方式可以阻止这种自动黑客工具或脚本吗？我不希望我的网站成为被黑客入侵的新闻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:07:55.057

恕我直言：我认为在您当前的设置中没有任何方法可以限制 IP 地址，因为您仍然必须根据授权用户的客户端请求提供个人资料图像。

App_Data 文件夹旨在存储数据库、xml 数据。我认为将用户图像存储在 App_Data 中并不是一个好主意。您始终可以拥有图像文件夹并通过禁用该文件夹上的目录浏览来保护文件夹位置。

我认为您需要一种更好的方法来命名您的个人资料图像，以避免图像名称的暴力/排列组合。我更喜欢 GUID 的某种唯一键或映射到用户名的字符/数字的随机组合并将该键存储在数据库中。这将要求您将图像名称执行 1 次转换为该唯一键并将这些键存储到数据库。

但是，您提供个人资料图像（直接使用 http 路径或动态使用处理程序），您需要一个强文件名，使用蛮力方法很难猜到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:50:24.523

将图像放在 app_data 或其子文件夹中只会停止直接浏览器。你所拥有的是一种“不安全的直接对象引用”。因此，您需要做的是交换到间接对象引用，例如使用 GUID 作为个人资料图片的文件名而不是 username.jpg，然后当您想要为用户请求文件时查找用户-> 映射表中的 guid。

当然，这并不能阻止任何人浏览每一个 GUID，但是，这将需要相当长的时间。你可能会偷偷摸摸，如果一个 IP 地址在 y 分钟内有 x 次失败的查找，则在 z 时间内停止来自它们的所有请求，这在你的处理程序中很容易做到。

但真的，值得吗？获取个人资料图片几乎不是一个黑客，除非您只希望个人资料图片仅限于登录的用户 - 在这种情况下，只需将它们放在不允许匿名访问的目录中。

# python - Pyglet：火球射手，每当我按下指定的键时，火球都会保持加速而不是保持恒定速度

> ID：11222677
> 
> 赞同：2
> 
> 时间：2012-06-27T08:57:36.113
> 
> 标签：python, pyglet

你如何使这段代码工作？只需`pyglet`安装并更改`"fireball.png"`存储在将此代码保存到文件的目录中的图像名称即可。

```
import pyglet

class Fireball(pyglet.sprite.Sprite):
    def __init__(self, batch):
        pyglet.sprite.Sprite.__init__(self, pyglet.resource.image("fireball.png"))
        # replace "fireball.png" with your own image stored in dir of fireball.py
        self.x =  10 # Initial x coordinate of the fireball
        self.y =  10 # Initial y coordinate of the fireball

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.fps_display = pyglet.clock.ClockDisplay()
        self.fireball = []

    def on_draw(self):
        self.clear()
        self.fps_display.draw()
        self.batch_draw.draw()
        if len(self.fireball) != 0:             # Allow drawing of multiple
            for i in range(len(self.fireball)): # fireballs on screen
                self.fireball[i].draw()         # at the same time

    def on_key_press(self, symbol, modifiers):
        if symbol == pyglet.window.key.A:
            self.fireball.append(Fireball(batch = self.batch_draw))
            pyglet.clock.schedule_interval(func = self.update, interval = 1/60.)
            print "The 'A' key was pressed"

    def update(self, interval):
        for i in range(len(self.fireball)):
            self.fireball[i].x += 1 # why do fireballs get faster and faster?

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

此代码创建一个黑色背景屏幕，其中显示 fps 并在您按下键时从位置 (10, 10) 沿 x 方向发射一个火球`A`。

您会注意到，您射出的火球越多，所有火球的发射速度就越快。

## 问题：

1.  为什么每次按 A 时火球飞得越来越快？

2.  每次按 A 时，我应该如何阻止火球加速？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:04:57.543

火球跑得越来越快，因为每次按下 时，都会向调度程序`A`添加另一个调用。`self.update`所以`self.update`每次调用的次数越来越多，从而导致位置的更多更新。要解决此问题，请将下面的行移至`__init__()`.

```
pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 
```

# c# - SCSF 配方框架错误

> ID：11222683
> 
> 赞同：2
> 
> 时间：2012-06-27T08:57:42.043
> 
> 标签：c#, cab, scsf

当我尝试在我的 VS2010 项目中添加 View with Presenter 时，我遇到了 SCSF 2010 指导包的随机问题。当我尝试添加业务模块时也会发生这种情况。

这个问题似乎是随机发生的，因为在两个不同的位置打开了相同的确切解决方案，一个可以让我添加视图，另一个会抛出异常。真是令人难以置信。有时它会让我添加视图没问题，有时它只是崩溃。

我必须从源代码中检查我的解决方案的早期版本（我知道这会让我添加视图）并创建所有内容并将其导入最新版本。

它似乎与这个 WCSF 问题有关，但我对这里提出的解决方案没有运气。

[http://webclientguidance.codeplex.com/discussions/263101](http://webclientguidance.codeplex.com/discussions/263101)

删除 gpState 并重新启用 SCSF 并没有帮助。

这是错误：

Microsoft.Practices.WizardFramework.WizardExecutionException：向导执行失败。错误是：无法将类型为“Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSyntheticConfigSettings”的对象转换为类型“Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ContainerModel.ITypeRegistrationsProvider”。---> System.InvalidCastException：无法将类型为“Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSyntheticConfigSettings”的对象转换为类型“Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ContainerModel.ITypeRegistrationsProvider”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:38:29.913

> ## [添加带有演示者的页面时出现配方框架错误。](http://webclientguidance.codeplex.com/discussions/263101)
> 
> ...一些用户还建议删除**`.gpState`**解决方案的文件，重新打开视觉工作室和解决方案并重新启用 WCSF 指导似乎可以*暂时*解决此问题。`.gpState`请在尝试此方法之前创建文件的备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:47:53.167

我相信这是您问题的答案。

> 可以通过删除页面流项目和 web.config 中的页面流设置（包括连接字符串和 http 模块）来解决该问题。

你可以在[这里](http://webclientguidance.codeplex.com/discussions/3494)找到。

# opends - OpenDS：哪个属性告诉帐户由于密码过期而被锁定

> ID：11222684
> 
> 赞同：0
> 
> 时间：2012-06-27T08:57:43.150
> 
> 标签：opends

我需要在 OpenDS 2.2 中显示所有帐户的状态（锁定或解锁）。我知道如果帐户由于太多不成功的尝试而被锁定，则存在 pwdAccountLockedTime。所以通过检查这个属性，我可以选择由于这个原因被锁定的帐户。现在我需要识别由于密码过期而被锁定的帐户。是否有任何属性可以说明这一点？

我需要在我的 java 客户端应用程序中检索此属性。

在这方面的任何帮助将不胜感激。

PS - 我检查了其他线程和论坛，但给出的解决方案似乎都没有工作 - 比如检查 pwdLockedTime （我找不到这个属性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:11:36.773

您可以使用管理帐户实用程序检查帐户状态并获取锁定帐户的详细信息。

当密码过期时，没有任何标记表明它已被锁定。服务器使用 pwdChangedTime 和 currentTime 来查看差异是否超过了过期时间。

亲切的问候，

卢多维奇。

# ios - 是否可以使用 AVAudioPlayer 和 initWithData:error: 播放生成的声音？

> ID：11222686
> 
> 赞同：0
> 
> 时间：2012-06-27T08:57:48.063
> 
> 标签：ios, core-audio

是否可以`AVAudioPlayer`用来播放自定义声音（例如，我将生成正弦波然后播放）？文档说`AVAudioPlayer`可以用来：

> 从文件或内存缓冲区播放声音

但我找不到播放自定义生成声音的例子，只有从文件或互联网加载的内存缓冲区。有可能吗？我在哪里可以找到更多信息？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:56:31.170

经过广泛的搜索（搜索文档和谷歌搜索），我得出结论：

> 从文件或内存缓冲区播放声音

指包含格式化音频数据的内存缓冲区。如果您的磁盘或 Internet 上的某个地方有 MP3，您可以将其加载到内存缓冲区中然后播放。这就是他们的意思。如果要播放生成的声音，可以使用 OpenAL 或 AudioUnits。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:23:32.597

你可以用 OpenAL 做到这一点：

```
void* bufferData; // your generated sound
int bufferDataLength; // length

alGenBuffers(1, &bufferID);
alBufferData(bufferID, AL_FORMAT_MONO8, bufferData, bufferDataLength, 44100); 
```

# android - android布局，按钮相互重叠

> ID：11222692
> 
> 赞同：2
> 
> 时间：2012-06-27T08:58:00.967
> 
> 标签：android, android-layout, breadcrumbs

![面包屑应该是什么样子](../Images/f6a2c32da5707a8f176b73866bdce1f7.png)

如何设置按钮，如上图所示。在 ios 中，它被称为面包屑样式。

我尝试将按钮放置在相对布局中，一个按钮在中间，另外两个在两侧，但所有按钮之间仍然存在间隙，并且在不同的设备中它看起来非常可怕。

以下是我的 xml 文件：

```
<RelativeLayout 
            android:id="@+id/TBtnLayout"      
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"   
            android:background="@drawable/title_bar">
                <ImageButton
                    android:contentDescription="@string/btn_desc"
                    android:id="@+id/left_btn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_toLeftOf="@+id/center_btn"
                    android:background="@drawable/s_unsel_btn">
                </ImageButton>

                <ImageButton 
                    android:contentDescription="@string/btn_desc"
                    android:id="@+id/center_btn"   
                    android:layout_height="wrap_content" 
                    android:layout_width="wrap_content"              
                    android:layout_centerVertical="true" 
                    android:layout_centerInParent="true"
                    android:background="@drawable/c_unsel_btn">
                </ImageButton>

                <ImageButton
                    android:contentDescription="@string/btn_desc"
                    android:id="@+id/right_btn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_toRightOf="@+id/center_btn"
                    android:background="@drawable/t_sel_btn">
                </ImageButton>
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:00:03.500

您是否尝试过使用负边距？就像是：

```
<RelativeLayout 
    android:id="@+id/TBtnLayout"      
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"   
    android:background="@drawable/title_bar">
        <ImageButton
            android:contentDescription="@string/btn_desc"
            android:id="@+id/left_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="-10dip"
            android:layout_toLeftOf="@+id/center_btn"
            android:background="@drawable/s_unsel_btn">
        </ImageButton>

        <ImageButton 
            android:contentDescription="@string/btn_desc"
            android:id="@+id/center_btn"   
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content"              
            android:layout_centerVertical="true" 
            android:layout_centerInParent="true"
            android:background="@drawable/c_unsel_btn">
        </ImageButton>

        <ImageButton
            android:contentDescription="@string/btn_desc"
            android:id="@+id/right_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="-10dip"
            android:layout_toRightOf="@+id/center_btn"
            android:background="@drawable/t_sel_btn">
        </ImageButton>
</RelativeLayout> 
```

您可以使用这些值，直到它适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:44:12.817

您使用的是哪个 API 级别？

[http://developer.android.com/reference/android/app/FragmentBreadCrumbs.html](http://developer.android.com/reference/android/app/FragmentBreadCrumbs.html)

如果您的按钮仍然有差距，请尝试在 xml 中使用 android:paddingLeft="0dp" 或 android:paddingRight="0dp"

# mysql - MySql：将每行的值设置为 MAX() + 1

> ID：11222693
> 
> 赞同：0
> 
> 时间：2012-06-27T08:58:02.173
> 
> 标签：mysql, max

**更新：**

我有一些带有sync_numbers的表，如下所示：

```
---------------------
id    | sync_number  
---------------------
   1  |     1
   2  |     1
   3  |     1
   4  |     1 
```

现在我想将 sync_number 设置为其最大值 + 1，但对每一行执行此操作，如下所示：

```
---------------------
id    | sync_number  
---------------------
   1  |     2
   2  |     3
   3  |     4
   4  |     5 
```

我怎样才能做到这一点？

我试图做这样的事情：

```
UPDATE u_shop SET sync_number = ((SELECT selected_value FROM (SELECT MAX(sync_number) AS selected_value FROM u_shop) AS sub_selected_value) + 1); 
```

但这会为所有行放置相同的值，这不是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:01:47.657

这应该有效：

```
UPDATE u_shop
inner join (SELECT @row := MAX(sync_number) FROM u_shop) r
SET sync_number = @row := @row + 1 
```

# exception - 仅 LINQ to Entities 中的排序输入支持“跳过”方法。方法 'OrderBy' 必须在方法 'Skip' 之前调用

> ID：11222694
> 
> 赞同：9
> 
> 时间：2012-06-27T08:58:02.500
> 
> 标签：exception, entity-framework-4, linq-to-entities, dynamic-data

我正在处理动态数据。

创建动态模型并在 global.asax 中注册后，例如

```
DefaultModel.RegisterContext(typeof(masterEntities1),new ContextConfiguration() { ScaffoldAllTables = true }); 
```

当我运行应用程序时，它会显示一个表列表，但是当我单击任何表时，它会引发异常：

***仅 LINQ to Entities 中的排序输入支持“跳过”方法。必须在方法“Skip”之前调用方法“OrderBy”。***

但我没有在我的应用程序中声明任何查询。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-15T19:08:39.073

`.OrderBy'`如果您使用该`.Skip`方法，则必须调用您的查询。例如，如果您使用类似于以下内容的内容：

`results = results.Skip(pageNumber * size).Take(size);`

在上述情况下，`.OrderBy`如果您计划使用分页方法或类似方法，您之前必须使用 来订购查询。如果您有一个`Id`字段，将其添加到您的原始查询表达式中应该可以消除错误：

`.OrderBy(x => x.Id);`

# java - HTTP 状态 405 - 此 URL 不支持 HTTP 方法 POST

> ID：11222695
> 
> 赞同：2
> 
> 时间：2012-06-27T08:58:03.993
> 
> 标签：java, http, servlets, web.xml

我在运行我的项目时收到“此 URL 不支持 HTTP 方法 POST”错误。有趣的是，两天前它运行得非常好。在我对我的代码进行了一些更改但随后恢复了我的原始代码并且它给了我这个错误之后。请你帮助我好吗？

这是我的 index.html：

```
<form method="post" action="login.do">
<div>
<table>
            <tr><td>Username: </td><td><input type="text" name="e_name"/>
            </td>  </tr>
            <tr><td> Password: </td><td><input type="password" name="e_pass"/>
            </td>  </tr>
            <tr><td></td><td><input type="submit" name ="e_submit" value="Submit"/> 
```

这是我的登录 servlet：

```
public class Login extends HttpServlet {

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException, SQLException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        /*
         * TODO output your page here. You may use following sample code.
         */
        int status;
        String submit = request.getParameter("e_submit");
        String submit2 = request.getParameter("a_submit");
        out.println("Here1");
        String e_name = request.getParameter("e_name");
        String e_password = request.getParameter("e_pass");
        String a_name = request.getParameter("a_name");
        String a_password = request.getParameter("a_pass");
        out.println(e_name+e_password+a_name+a_password);
        Author author = new Author(a_name,a_password);  
        Editor editor = new Editor(e_name,e_password);

      // If it is an AUTHOR login:

       if(submit==null){
       status = author.login(author);
       out.println("Author Login");
       //Incorrect login details
       if(status==0) {
           out.println("Incorrect");

       RequestDispatcher view = request.getRequestDispatcher("index_F.html");
       view.forward(request, response);

       }
       //Correct login details --- AUTHOR

       else {

              out.println("Correct login details");
              HttpSession session = request.getSession();    
              session.setAttribute(a_name, "a_name");

              RequestDispatcher view = request.getRequestDispatcher("index_S.jsp"); 
              view.forward(request, response);
            }

       }

       //If it is an EDITOR login

       else if (submit2==null){

           status = editor.login(editor);

           //Incorrect login details

           if(status==0) {

       RequestDispatcher view = request.getRequestDispatcher("index_F.html");
       view.forward(request, response);
            }

           //Correct login details --- EDITOR

           else {
               out.println("correct");
               HttpSession session = request.getSession();    
       session.setAttribute(e_name, "e_name");
       session.setAttribute(e_password, "e_pass");
               RequestDispatcher view   = request.getRequestDispatcher("index_S_1.html"); 
               view.forward(request, response);

            }           }

        out.println("</body>");
        out.println("</html>");

    } finally {            
        out.close();
    }
}

@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    super.doPost(req, resp);
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    super.doGet(req, resp);
}} 
```

我的 web.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
        <param-name>debug</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param>
        <param-name>detail</param-name>
        <param-value>2</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet>
    <servlet-name>Login</servlet-name>
    <servlet-class>controller.Login</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Login</servlet-name>

    <url-pattern>/login.do</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

我使用 Glassfish v3 服务器 - 让我知道您需要知道的其他任何信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T09:04:49.817

那是因为在你的`doGet()`and`doPost()`方法上，你正在调用它的`super`方法。而是调用`processRequest()`上面提到的各个方法。

`super.doGet()`and`super.doPost()`方法默认返回 HTTP 405，因此您无需调用超类`doGet()`和`doPost()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:30:26.757

为什么你的代码中有一个`processRequest`方法？谁会调用那个方法？

您无法通过调用来达到该方法，`super.doGet()`或者`super.doPost()` 您需要显式调用该方法。

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    processRequest(req,resp)
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    processRequest(req,resp)
} 
```

**编辑**

做这个

```
response.sendRedirect("index_F.html");
return; 
```

代替

```
RequestDispatcher view = request.getRequestDispatcher("index_F.html");
view.forward(request, response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:00:45.707

你必须在里面`doPost()`打电话`processRequest()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:13:25.420

您在没有实际实现（使用）的情况下调用`doGet()`和方法。`doPost()``super`

HttpServlet 基本上遵循模板方法模式，其中所有未覆盖的 HTTP 方法都返回`HTTP 405`错误“方法不支持”。当你重写这样的方法时，你不应该调用`super`方法，否则你仍然会得到`HTTP 405`错误。您的 doPost() 方法也会发生同样的情况。

调用`processRequest(req,resp)`上面提到的各个方法里面。

编辑：

第二，

不要使用调度程序将请求转发到 HTML。如果您只想显示 html，请使用重定向。

```
response.sendRedirect("index_F.html");
return; 
```

`redirect`此外，在您注销或发回无效凭据时使用它是一种很好的做法。

# c# - 如何解析 HTML 标签？

> ID：11222708
> 
> 赞同：0
> 
> 时间：2012-06-27T08:58:56.207
> 
> 标签：c#, asp.net, .net, wpf

我正在尝试使用 HTML 敏捷包解析 HTML 页面。我的问题是，我必须使用 HAP 解析和显示每个页面中的页面查看次数。假设我有 3 页。每个页面包含随机位置的 div 或 span 或 table 中的页面视图数。坦率地说，它没有任何固定的位置，很难找到包含页面浏览量的标签。

例如，

```
In Page 1
<!--Some content-->
<div>12 Page views</div>
<!--Some content-->

In Page 2
<!--Some content-->
<span>11 Page views</span>
<!--Some content-->

In Page 3
<!--Some content-->
<table><tr><td><!--Some content--></td></tr>
<tr><td>3 Page views only</td></tr></table>
<!--Some content--> 
```

我需要从上面的标签中找到计数。格式可以是任何东西，

```
<no> Page views
<no> Page views Only
<no> Page view till now
etc... 
```

有人可以建议一种解析内容的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:56:25.323

我得到了解决这个问题的办法。它不是一个全球性的解决方案，但它现在对我有用。希望它可以帮助其他人。

```
int result = -1;
            var matches = Regex.Matches(
                HTMLText,
                @"(?:\S+\s)?\S*page views\S*(?:\s\S+)?",
                RegexOptions.IgnoreCase
            );

            foreach (Match m in matches)
            {
                string val = m.Value;
                int res=-1;
                if (Int32.TryParse(val, out res))
                {
                    result = res;
                    break;
                }
            } 
```

# c++ - 在 C++ 中将数据和时间分配给 FILETIME 结构

> ID：11222709
> 
> 赞同：0
> 
> 时间：2012-06-27T08:58:58.717
> 
> 标签：c++

在 Windows 和 C++ 中。我有以下代码。

```
typedef struct _FILETIME {
    DWORD dwLowDateTime;
    DWORD dwHighDateTime;
} FILETIME, *PFILETIME, *LPFILETIME;

struct DateTime
{
    unsigned int dwLowDateTime;
    unsigned int dwHighDateTime;
};

FILETIME ftTime;
GetSystemTimeAsFileTime(&ftTime);

DateTime myTime;
myTime.dwHighDateTime = (unsigned int)ftTime.dwHighDateTime;
myTime.dwLowDateTime  = (unsigned int)ftTime.dwLowDateTime; 
```

现在我需要分配值，例如

```
2012-06-25 12:00:10.123 
```

到“myTime”或 ftTime。

我怎样才能做到这一点？

另一个问题是如何获得日期“2012-06-25 12:00:10.123”的 64 位整数等经过的秒数？如何将其转换为 __int64 以便分配给 FILETIME？

我在另一个问题帖子中看到

```
__int64 t;
FILETIME ft;
ft.dwLowDateTime = (DWORD)t;
ft.dwHighDateTime = (DWORD)(t >> 32); 
```

我不应该在我的项目中使用 Boost。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:42:44.250

将值“2012-06-25 12:00:10.123”分配给 SystemTime 结构，并使用函数 SystemTimeToFileTime 将其转换为 FileTime。

```
SYSTEMTIME st,st1;
st.wDay = 25;
st.wMonth = 06;
st.wYear = 2012;
st.wHour = 12;
st.wMinute = 10;
st.wSecond = 10;
st.wMilliseconds = 10;

FILETIME ft;
SystemTimeToFileTime(&st,&ft);
FileTimeToSystemTime(&ft,&st1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:45:45.603

使用[SystemTimeToFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)。

将日期时间数据分配给`SYSTEMTIME`结构。

```
typedef struct _SYSTEMTIME {
  WORD wYear;
  WORD wMonth;
  WORD wDayOfWeek;
  WORD wDay;
  WORD wHour;
  WORD wMinute;
  WORD wSecond;
  WORD wMilliseconds;
} SYSTEMTIME, *PSYSTEMTIME; 
```

并使用

```
BOOL WINAPI SystemTimeToFileTime(
  __in   const SYSTEMTIME *lpSystemTime,
  __out  LPFILETIME lpFileTime
); 
```

为转换。

更新：对于从字符串转换为日期、时间组件，您可以使用`DateTime::Parse Method(String)`方法。然后将值分配给`SYSTEMTIME`结构，然后将其转换为`FileTime`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:48:54.033

有多种方法和功能可以帮助您实现目标。

您可以使用[`DosDateTimeToFileTime()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724247%28v=vs.85%29.aspx)将年/月/日 h:m:s 转换为`FILETIME`. 您需要额外注意奇数秒和秒小数。

自 1970 年以来，您还拥有 C(++)[`mktime()`](http://www.cplusplus.com/reference/clibrary/ctime/mktime/)以秒为单位首次获取时间。然后您需要通过向其添加 11644473600 将其转换为自 1601 年 1 月 1 日以来的秒，将其缩放为 100 纳秒并添加秒分数.

但这[`SystemTimeToFileTime()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)是一个更好的选择，因为它也可以处理毫秒。

不清楚你的意思是什么`how can I get number of seconds elapsed like 64-bit integer for date "2012-06-25 12:00:10.123"?`

从那时到现在已经过了几秒钟？如果是这样，您将获得以秒为单位的当前时间，并将给定的日期/时间转换为秒（如上所述）并从另一个中减去一个。

从更早的时间到那时已经过去了几秒钟？做同样的事情，获取日期/时间对的秒数并减去。

# email - 僵尸如何发送邮件？

> ID：11222711
> 
> 赞同：5
> 
> 时间：2012-06-27T08:59:17.893
> 
> 标签：email, smtp, botnet

我一直想知道以下问题：受感染的计算机如何发送电子邮件？我阅读了大型僵尸网络每天发送 1-20 亿封电子邮件的所有故事。当我使用我的 ISP 的 SMTP 服务器并尝试将我的时事通讯发送给少于 100 人时，我的 ISP SMTP 服务器会阻止。我尝试由多个朋友（使用所有不同的 ISP）来做这件事，结果都是一样的。但是，当我什至无法发送 100 封电子邮件时，这些引擎盖怎么会产生如此大量的电子邮件呢？

在此先感谢，乔里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:10:35.490

他们并没有试图滥用系统，他们只发送了少量的邮件。但是，如果您（只是一个不切实际的例子）有 10k 台计算机被感染，每台计算机每小时发送 25 封邮件。您最终会收到 10k * 25 * 24 = 6 000 000 封邮件/天。

在那之后，你只需要缩放这 3 个数字，你就可以拥有一个巨大的垃圾邮件机器人。您可以查看维基百科中的[这篇文章](http://en.wikipedia.org/wiki/Botnet)，例如尺寸和容量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:25:33.127

我不确定，但我可以想象僵尸不会（仅）使用您的 ISP 提供的 SMTP 服务器，而是直接连接到收件人的 SMTP 服务器或其他一些（开放的）SMTP 中继。因此同时连接到 100 台服务器，每台发送 10 封邮件，导致发送 1000 封邮件（来自一个僵尸）。

即使此类邮件经常被阻止（例如，通过灰名单、阻止动态 IP 或其他一些技术），也可能不会。僵尸网络运营商只需尝试一下就不会花费任何费用：如果邮件已送达（对于僵尸网络运营商而言），那很好，如果不是，那也没问题。

# java - Java 简单行解析器

> ID：11222719
> 
> 赞同：-2
> 
> 时间：2012-06-27T08:59:36.877
> 
> 标签：java, parsing, text-parsing, parser-generator, opencsv

我可以看到一堆 Java 解析器，如 OpenCSV、antlr、jsapar 等，但我没有看到任何能够同时指定自定义行分隔符和列分隔符的解析器？我们有任何这样易于使用的库吗？我现在不想用 Scanner 或 Stringtokenizer 写一个！

例如。一个 | 乙 || C | D || E | F

想把上面的字符串分解成 {{A,B},{C,D},{E,F}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:13:32.000

你可以自己解析，实现起来很简单。我没有实际测试过这段代码，你可以自己试试。

```
line_delimiter = "||";
column_delimiter = "|";

String rows[];
rows = str.split(line_delimiter);
for (int i = 0; i < rows.length; i++) {
    String columns[];
    columns = rows[i].split(column_delimiter);
    for (int j = 0; j < columns.length; j++) {
        // Do something to your data here;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T12:21:36.643

实际上，使用[JSaPar](https://github.com/org-tigris-jsapar/jsapar) ，您可以为行分隔符和单元格分隔符设置任何字符序列。您指定要在架构中使用的分隔符，它可以是任意数量的字符。

在两者中使用相同字符将面临的问题是解析器将不知道您是否有换行符或者它是否只是一个空单元格。

# c# - 具有行为和 ORM 的丰富领域模型

> ID：11222720
> 
> 赞同：18
> 
> 时间：2012-06-27T08:59:37.347
> 
> 标签：c#, .net, architecture, orm, domain-driven-design

[在观看了 Jimmy Bogard ( http://ndcoslo.oktaset.com/Agenda](http://ndcoslo.oktaset.com/Agenda) )的 NDC12 演示文稿“Crafting Wicked Domain Models”之后，我一直在思考如何坚持这种领域模型。
这是演示文稿中的示例类：

```
public class Member
{
    List<Offer> _offers;

    public Member(string firstName, string lastName)
    {
        FirstName = firstName;
        LastName = lastName;
        _offers = new List<Offer>();
    }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public IEnumerable<Offer> AssignedOffers { 
        get { return _offers; }
    }

    public int NumberOfOffers { get; private set; }

    public Offer AssignOffer(OfferType offerType, IOfferValueCalc valueCalc)
    {
        var value = valueCalc.CalculateValue(this, offerType);
        var expiration = offerType.CalculateExpiration();
        var offer = new Offer(this, offerType, expiration, value);
        _offers.Add(offer);
        NumberOfOffers++;
        return offer;
    }
} 
```

所以这个域模型中包含一些规则：
- 会员必须有名字和姓氏
- 报价数量不能在外部更改
- 会员负责创建新报价，计算其价值和分配

如果尝试将其映射到某些 ORM，如 Entity Framework 或 NHibernate，它将无法正常工作。那么，使用 ORM 将这种模型映射到数据库的最佳方法是什么？
例如，如果没有 setter，我如何从 DB 加载 AssignedOffers？

唯一对我有意义的是使用命令/查询架构：查询总是使用 DTO 作为结果，而不是域实体，并且命令是在域模型上完成的。此外，事件溯源非常适合域模型上的行为。但这种 CQS 架构可能并不适合每个项目，尤其是棕地。或不？

我在这里知道类似的问题，但找不到具体的示例和解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T11:02:21.103

这实际上是一个非常好的问题，也是我考虑过的。创建完全封装的正确域对象（即没有属性设置器）并使用 ORM 直接构建域对象可能很困难。

根据我的经验，有 3 种方法可以解决此问题：

*   正如 Luka 已经提到的，NHibernate 支持映射到私有字段，而不是属性设置器。
*   如果使用 EF（我认为不支持上述内容），您可以使用[memento 模式](http://en.wikipedia.org/wiki/Memento_pattern)将状态恢复到您的域对象。例如，您使用实体框架来填充您的域实体接受以设置其私有字段的“纪念品”对象。
*   正如您所指出的，将 CQRS 与事件溯源一起使用可以消除此问题。这是我制作完美封装的域对象的首选方法，它还具有事件溯源的所有附加好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T13:00:08.033

旧线程。但是Vaughn Vernon[最近发表](https://vaughnvernon.co/?p=879)了一篇文章（2014 年末），专门针对这种情况，特别提到了实体框架。鉴于我不知何故难以找到此类信息，也许在这里发布它也会有所帮助。

基本上，该帖子提倡使用`Product`域（聚合）对象来包装`ProductState`EF POCO 数据对象，以解决与*“数据包”*相关的问题。当然，域对象仍然会通过特定于域的方法/访问器添加其所有丰富的域行为，但是当它必须获取/设置其属性时，它会求助于内部数据对象。

直接从帖子复制片段：

```
public class Product
{
  public Product(
    TenantId tenantId,
    ProductId productId,
    ProductOwnerId productOwnerId,
    string name,
    string description)
  {
    State = new ProductState();
    State.ProductKey = tenantId.Id + ":" + productId.Id;
    State.ProductOwnerId = productOwnerId;
    State.Name = name;
    State.Description = description;
    State.BacklogItems = new List<ProductBacklogItem>();
  }

  internal Product(ProductState state)
  {
    State = state;
  }

  //...

  private readonly ProductState State;
}

public class ProductState
{
  [Key]
  public string ProductKey { get; set; }

  public ProductOwnerId ProductOwnerId { get; set; }

  public string Name { get; set; }

  public string Description { get; set; }

  public List<ProductBacklogItemState> BacklogItems { get; set; }
  ...
} 
```

存储库将使用内部构造函数从其 DB 持久版本实例化（加载）实体实例。

我可以自己补充一点，可能`Product`域对象应该被另一个访问器*弄脏*，只是为了通过 EF 进行持久性：与`new Product(productState)`允许从数据库加载域实体一样，应该允许相反的方式通过类似的东西：

```
public class Product
{
   // ...
   internal ProductState State
   {
     get
     {
       // return this.State as is, if you trust the caller (repository),
       // or deep clone it and return it
     }
   }
}

// inside repository.Add(Product product):

dbContext.Add(product.State); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:09:53.960

对于 AssignedOffers ：如果您查看代码，您会看到 AssignedOffers 从字段返回值。NHibernate 可以像这样填充该字段：Map(x => x.AssignedOffers).Access.Field()。

同意使用 CQS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:57:57.333

在做 DDD 第一件事时，您忽略了持久性问题。ORM 与 RDBMS 紧密耦合，因此这是一个持久性问题。

ORM 模型持久性结构而不是域。基本上，存储库必须将接收到的聚合根“转换”为一个或多个持久性实体。有界上下文很重要，因为聚合根也会根据您要完成的任务而变化。

假设您想在分配的新报价的上下文中保存成员。然后你会有这样的事情（当然这只是一种可能的情况）

```
public interface IAssignOffer
{
    int OwnerId {get;}
    Offer AssignOffer(OfferType offerType, IOfferValueCalc valueCalc);
    IEnumerable<Offer> NewOffers {get; }
}

public class Member:IAssignOffer
{
    /* implementation */ 
 }

 public interface IDomainRepository
 {
    void Save(IAssignOffer member);    
 } 
```

接下来，repo 将仅获取更改 NH 实体所需的数据，仅此而已。

关于 EVent Sourcing，我认为您必须查看它是否适合您的域，并且我认为仅使用 Event Sourcing 来存储域聚合根没有任何问题，而其余的（主要是基础架构）可以以普通方式存储（关系表）。我认为 CQRS 在这个问题上给你很大的灵活性。

# symfony - sahi 和 symfony2

> ID：11222722
> 
> 赞同：0
> 
> 时间：2012-06-27T08:59:42.430
> 
> 标签：symfony, behat, sahi, mink

我想用 symfony2 测试 behat、mink 和 sahi

所以，在我的 config_test.yml 我有

```
 mink:
   base_url:  http://localhost/Symfony_Standard_2.0.15_2/symfony/web/app_test.php    
   default_session: symfony
   sahi: ~ 
```

并在 test.feature

```
 @mink:sahi
    Scenario: Open page with products list and check it
    Given I am on "/hello"
    Then the response should contain "hello" 
```

当我执行时我有这个

PHP 致命错误：在第 26 行调用 C:\wamp\ www\Symfony_Standard_2.0.15_2\Symfony\vendor\buzz\lib\Buzz\Client\AbstractCurl.p 中未定义的函数 Buzz\Client\curl_init()

请帮帮我，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:19:42.167

您的 WAMP 安装中似乎没有启用[cURL 。](http://us2.php.net/curl)实际上，在 WAMP 中默认情况下不启用 cURL。启用它的步骤如下：

1.  关闭 WAMP（如果正在运行）
2.  导航到 WAMP\bin\php（您的 php 版本）\
3.  编辑 php.ini
4.  搜索 curl，取消注释 extension=php_curl.dll
5.  导航到 WAMP\bin\Apache（你的 apache 版本）\bin\
6.  编辑 php.ini
7.  搜索 curl，取消注释 extension=php_curl.dll
8.  保存两者
9.  重启 WAMP

# android - 处理来自不同 JSON API 响应的不同 POJO

> ID：11222725
> 
> 赞同：0
> 
> 时间：2012-06-27T08:59:48.563
> 
> 标签：android, json, rest, gson

我有一个 REST API，它将 JSON 返回到它的调用中。但是，根据我执行的呼叫，答案会有所不同。使用[Gson](http://code.google.com/p/google-gson/)将为每个 API 响应生成不同的 POJO 对象。

考虑到我有一个`IntentService`谁来处理我所有的 GET 请求，并且我只在意图中传递了一个 URL，那么在 ? 中处理不同响应的最佳方法是`IntentService`什么？

我已经在 Android 中搞砸了一段时间的 JSON，但我似乎无法为这个问题找到一个优雅/智能的解决方案。我一直在创建一个`enum`来区分可能的 API 请求，并`enum`在意图中传递选定的值，以便 IntentService 使用`switch`语句选择要执行的操作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:19:24.063

如果你得到的所有不同的 POJO 都有一个共同的业务逻辑，那么尝试使用相同的类会很好，为此，尝试自定义 GSON 映射策略。

如果您真的没有共同的逻辑，那么您可以将您的 GSON 对象视为 DTO，然后您到业务类的“映射”在较低层完成（并且您有很多方法可以做到这一点，包括推土机）。

对于更具体的答案，您的项目的更多详细信息或示例会有所帮助。

# java - java中socket api的问题

> ID：11222727
> 
> 赞同：2
> 
> 时间：2012-06-27T08:59:49.380
> 
> 标签：java, sockets, networking

我正在设计一个端口扫描器来检测哪些端口正在使用中。问题是它显示所有端口都未使用，即使我知道其中一些正在使用。需要帮助确定问题。这是我的代码。

* * *

```
package portscanner;

import java.net.Socket;
import java.util.Scanner;

/**
 *
 * @author DeLL
 */
public class Main {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    System.out.println("Enter the range of ports to be scanned:");
    Scanner ob=new Scanner(System.in);
    int start=ob.nextInt();
    int stop=ob.nextInt();
    if(start<0||stop<0||start>65535||stop>65535){
        System.out.println("Invalid Range!!!");
    }
    for(int i=start;i<=stop;i++){
        try{
            Socket sock = new Socket("127.0.0.1",i);
            System.out.println("Port in use :"+i);
            sock.close();
        }
        catch(Exception e){
            System.out.println("Port not in use: "+i);
        }
    }
}

} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:06:50.380

看那里：[http ://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#Socket%28java.lang.String,%20int%29](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#Socket%28java.lang.String,%20int%29)

Socket 构造函数抛出三个异常：
UnknownHostException - 如果无法确定主机的 IP 地址。
IOException - 如果创建套接字时发生 I/O 错误。
SecurityException - 如果存在安全管理器并且其 checkConnect 方法不允许该操作。

当端口已经在使用时，它们都不会被抛出。您可以尝试使用 bind() 方法，如果套接字已绑定，则会引发 IOException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:55:42.937

你对异常处理太不加选择了。只有 ConnectException 真正告诉您该端口未在使用中。所有其他例外都表明存在不同的问题。分别捕获和处理 ConnectException。

# node.js - nodejs 从 0.6.19 到 0.8.0：应用程序在启动时崩溃

> ID：11222728
> 
> 赞同：0
> 
> 时间：2012-06-27T08:59:53.867
> 
> 标签：node.js

我正在开发一个应用程序（nodejs+mongodb+backbone）并且我的系统运行archlinux。直到今天早上，我还在使用 nodejs v 0.6.19-1，我的代码运行平稳。

然后我更新了我的系统并安装了 nodejs v 0.8.0。

更新后不久，我在启动我的应用程序时收到以下错误：

**节点：/usr/include/node/node_object_wrap.h:62: void node::ObjectWrap::Wrap(v8::Handle): 断言 `handle->InternalFieldCount() > 0' 失败。**

尝试调试并看到加载模块时抛出错误。该模块有以下要求：

```
var fs = require('fs')
    ,User = mongoose.model('User')
    ,Connection = require('tedious').Connection
    ,TYPES = require('tedious').TYPES
    ,Request = require('tedious').Request; 
```

不幸的是，我不够熟练，无法深入挖掘（这是我第一个使用整个堆栈和 javascript 的项目）。

现在我可以回滚到 0.6.19-1 但是，我想，迟早我需要更新，所以......

尝试在谷歌上搜索该特定错误，但我无法提出任何提示。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:57:38.267

该错误可能是由于模块的某些过时编译引起的。

```
cd app
rm -rf node_modules
npm install 
```

# php - PHP mySQL 搜索功能加入各种领域

> ID：11222735
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:00:22.963
> 
> 标签：php, mysql

以下代码用于从数据库中的表中搜索姓氏。用于获取搜索的字段是 'q' 这是查询

```
 $sims = mysql_query("SELECT * FROM electors 
WHERE constituency = '$constituency'
 AND ward = '$ward' AND (surname RLIKE '$q') LIMIT 18"); 
```

但是，如果用户输入以下任何一项或其中任何一项的任何组合以任何顺序放在一起，则该查询将不起作用，因为它仅搜索姓氏

> 标题，名字，首字母，姓氏，后缀，卷号，电子邮件，电话

我希望它在不重复结果的情况下从这些字段中的任何一个搜索匹配结果。

这意味着，例如，如果我输入 KNIGHT，它会找到姓 KNIGHT 的每个人，如果我输入 ROBIN KNIGHT，它会找到名字 ROBIN 和姓 KNIGHT 的任何人，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:10:45.847

只需将它们拆分为一个`OR`语句：

```
$sims = mysql_query("SELECT * 
                     FROM `electors` 
                     WHERE `constituency` = '$constituency' 
                     AND `ward` = '$ward' 
                     AND (`title` RLIKE '$q' 
                         OR `first_name` RLIKE '$q' 
                         OR `initial` RLIKE '$q' 
                         OR `surname` RLIKE '$q' 
                         OR `suffix` RLIKE '$q' 
                         OR `roll_no` RLIKE '$q' 
                         OR `email` RLIKE '$q' 
                         OR `telephone` RLIKE '$q') 
                     LIMIT 18"); 
```

不是最有效的查询，但它会完成工作。

此外，请确保`$q`在执行该查询之前进行清理。SQL注入是一个主要问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:24:43.580

```
$q = str_replace(" ", "|", $q);

$sims = mysql_query("SELECT DISTINCT * FROM electors 
                     WHERE constituency = '$constituency'
                     AND ward = '$ward' 
                     AND (title RLIKE '$q'
                     OR first_name RLIKE '$q'
                     OR initial RLIKE '$q'
                     OR surname RLIKE '$q'
                     OR suffix RLIKE '$q'
                     OR roll_no RLIKE '$q'
                     OR email RLIKE '$q'
                     OR telephone RLIKE '$q')
                     LIMIT 18"); 
```

但实际上你应该使用 mysqli 和准备好的语句。

```
$stmt = $mysqli->prepare("SELECT DISTINCT * FROM electors 
                         WHERE constituency = ?
                         AND ward = ?
                         AND (title RLIKE ?
                         OR first_name RLIKE ?
                         OR initial RLIKE ?
                         OR surname RLIKE ?
                         OR suffix RLIKE ?
                         OR roll_no RLIKE ?
                         OR email RLIKE ?
                         OR telephone RLIKE ?)
                         LIMIT 18");
$stmt->bind_param('ssssssssss', $constituency, $ward, 
                  $q, $q, $q, $q, $q, $q, $q, $q, $q);
$stmt->execute(); 
```

# jquery - jQuery 序列化不会在嵌套 div 中选取选择标记

> ID：11222741
> 
> 赞同：25
> 
> 时间：2012-06-27T09:00:37.937
> 
> 标签：jquery, serialization

所以我有这个表格

```
<form>
    <div>
        <span class="form_t">I Want To Trade In  
            <span id="trade_target"></span> 
        </span>
        <span class="form_t">With</span>

        <div class="selecting">
            <select>
                <option>A Mac</option>
                <option>An Iphone</option>  
            </select>
        </div>
    </div>

    <table id="tradein_table">
        <tr>
            <td class="textside">My contact Info</td>
        </tr>
        <tr>
            <td class="textside">Mobile Number</td>
            <td class="inputside"><input type="text" name="Mobile" id="t_mobile"/></td>
        </tr>
        <tr>
            <td class="textside">First Name</td>
            <td class="inputside"><input type="text" id="t_first" name="Fname"/></td>
        </tr>
        <tr>    
            <td class="textside">Last Name</td>
            <td class="inputside"><input type="text" id="t_last" name="Lname"/></td>
        </tr>   
        <tr>    
            <td class="textside">Email</td>
            <td class="inputside"><input type="text" id="t_email" name="Email"/></td>
        </tr>
        <tr>    
            <td class="textside">Company</td>
            <td class="inputside"><input id="t_company" type="text" name="Company"/>
        </td>               </tr>
    </table>

    <div class="submit_div">
        <input class="submit_form" type="submit" name="Submit" value="Submit" />
    </div>  
</form> 
```

当我通过 jQuery 运行它时，`serialize()`它会拾取除 div 中的 select 标记之外的所有标记。
任何想法如何得到它？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-27T09:02:48.357

`serialize`仅“拾取”具有`name`属性的元素。

```
<select name="foo">
    <option>A Mac</option>
    <option>An Iphone</option>  
</select> 
```

你的：

```
<select>
    <option>A Mac</option>
    <option>An Iphone</option>  
</select> 
```

不会工作。

> 对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。

[文档](http://api.jquery.com/serialize/)

# iphone - 如何设置高分，只有超过它才会改变

> ID：11222751
> 
> 赞同：0
> 
> 时间：2012-06-27T09:01:09.123
> 
> 标签：iphone, xcode4, cocos2d-iphone

像游戏直升机或像 Left 4 dead 生存模式一样，我希望分数保持不变，只有在超过分数时才会改变。这是我到目前为止的代码。./m 文件

```
 _score = 0;
                         _oldScore = -1;
     self.scoreLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(100, 50) alignment:UITextAlignmentRight fontName:@"Marker Felt" fontSize:32];
     _scoreLabel.position = ccp(winSize.width - _scoreLabel.contentSize.width, _scoreLabel.contentSize.height);
     _scoreLabel.color = ccc3(255,0,0);
     [self addChild:_scoreLabel z:1];     

if (_score != _oldScore) {
    _oldScore = _score;
    [_scoreLabel setString:[NSString stringWithFormat:@"score%d", _score]];

} 
```

和 .h 文件

```
 int _score;
int _oldScore;
CCLabelTTF *_scoreLabel; 
```

我试着把

```
 _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];

        [[NSUserDefaults standardUserDefaults] setInteger:_oldScore forKey:@"score"];
           [[NSUserDefaults standardUserDefaults] synchronize]; 
```

但是当我这样做时，它只保存了数据并继续上升而不是重新开始，只有在超过分数时才会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:55:07.090

您需要比较您的分数是否超过旧分数，然后保存。

例如，

```
if (_score > _oldscore) {
  // Save out new score as it is more than the old score

  // Then reset ready for next time
  _oldscore = _score;
  _score = 0;
} 
```

但是，如果您正在为这样的事情苦苦挣扎，我建议您将面临很多问题，除非您在进一步开发之前停下来学习编程的基础知识。

# c# - 在 Linq c# 中安全地取消引用 FirstOrDefault 调用

> ID：11222757
> 
> 赞同：17
> 
> 时间：2012-06-27T09:01:30.667
> 
> 标签：c#, linq, syntax

为了在我的代码中简洁起见，我希望能够执行以下操作：拥有一个集合，找到与 lambda 表达式匹配的第一个元素；如果存在，则返回属性或函数的值。如果不存在，则返回 null。

**更新示例 w。班级**

让我们收集一些东西

```
class Stuff
{
    public int Id { get; set; }
    public string Value { get; set; }
    public DateTime? ExecutionTime { get; set; }
} 
```

我的目标是在调用它时很好地返回

```
var list = new Stuff[] { new Stuff() { Id = 1, Value = "label", ExecutionTime = DateTime.Now } };

// would return the value of ExecutionTime for the element in the list
var ExistingTime = list.FirstOrDefault(s => s.Value.Contains("ab")).ExecutionTime;

// would return null
var NotExistingTime = list.FirstOrDefault(s => s.Value.Contains("zzz")).ExecutionTime; 
```

是否有可能使用一些 linq-syntax-fu 或者我是否必须在继续之前明确检查返回值？

**原始示例 w。字符串**

```
var stuff = {"I", "am", "many", "strings", "obviously"};

// would return "OBVIOUSLY"
var UpperValueOfAString = stuff.FirstOrDefault(s => s.contains("bvi")).ToUpper();

// would return null
var UpperValueOfAStringWannabe = stuff.FirstOrDefault(s => s.contains("unknown token")).ToUpper(); 
```

评论：我不应该在我的原始示例中使用字符串，因为它通过将问题集中在 ToUpper 方法和字符串类上而略微歪曲了问题。请考虑更新的示例

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-27T09:18:55.720

为什么不这样做：

```
stuff.Where(s => s.contains("bvi"))
     .Select(s => s.ToUpper())
     .FirstOrDefault() 
```

如果您有“非默认默认值”，您可以执行以下操作：

```
stuff.Where(s => s.contains("bvi"))
     .Select(s => s.ToUpper())
     .DefaultIfEmpty("Something Else")
     .First() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T09:17:56.550

我喜欢这个作为扩展方法：

```
public static U SelectMaybe<T, U>(this T input, Func<T,U> func)
{
    if (input != null) return func(input);
    else return default(U);
} 
```

和用法：

```
var UpperValueOfAString = stuff.FirstOrDefault(s => s.Contains("bvi")).SelectMaybe(x => x.ToUpper());
var UpperValueOfAStringWannabe = stuff.FirstOrDefault(s => s.Contains("unknown token")).SelectMaybe(x => x.ToUpper()); 
```

这将链接返回默认值（`null`在这种情况下，但对于该类型是正确的），或者调用相关函数并返回它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T09:05:42.820

**更新：**

根据问题说明，您不需要任何额外的代码来实现您想要的。只需使用 where 子句和 select 投影子句：

```
var theString = stuff
    .Where(s => s.contains("unknown token"))
    .Select(s => s.ToUpper())
    .FirstOrDefault(); 
```

* * *

**旧答案**

正如评论中所建议的（[并在另一个答案中通用](https://stackoverflow.com/a/11222996/358221)），将调用包装`ToUpper`在扩展方法中。扩展方法归结为围绕静态方法调用的语法糖，因此它们可以很好地处理空值。

```
static class StringExtensions
{
    public static string PossiblyToUpper(this string s)
    {
        if (s != null)
            return s.ToUpper();

        return null;
    }
} 
```

你的电话会变成：

```
var upperValueOfAStringWannabe = stuff
    .FirstOrDefault(s => s.contains("unknown token"))
    .PossiblyToUpper(); 
```

现在只是讨论简单支持单行样式代码的扩展方法是否比多行更具表现力 - 归根结底，表达代码的意图比代码的外观更重要。

[就我个人而言，我认为处理空值的扩展方法乍一看令人困惑，因为它们看起来像常规方法。]

# c# - 错误：C# 底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系

> ID：11222759
> 
> 赞同：37
> 
> 时间：2012-06-27T09:01:44.763
> 
> 标签：c#, ssl, httpwebrequest, certificate, put

我正在尝试通过 SSL 发出请求。证书已经安装在机器上，它可以通过浏览器工作。

我正在使用这个请求：

```
System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
byte[] data = encoding.GetBytes(request.Content.OuterXml.ToString());
string password = "XXXX";
X509Certificate2 cert = new X509Certificate2("c:\\zzzz.p12", password);
string key = cert.GetPublicKeyString();
string certData = Encoding.ASCII.GetString(cert.Export(X509ContentType.Cert));

Uri uri = new Uri(request.Url);
HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(uri);
myRequest.Credentials = new NetworkCredential(request.User, request.Password.ToString());
myRequest.Method = "PUT";
myRequest.ContentType = request.ContentType;
myRequest.ContentLength = data.Length;
myRequest.ClientCertificates.Add(cert);

Stream newStream = myRequest.GetRequestStream();
newStream.Write(data, 0, data.Length);
newStream.Close();

System.IO.StreamReader st = new StreamReader(((HttpWebResponse)myRequest.GetResponse()).GetResponseStream()); 
```

使用此代码我收到此错误：

> 基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。---> System.Security.Authentication.AuthenticationException：根据验证程序，远程证书无效。

问题是什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-28T08:57:51.343

我解决了这个问题：

```
ServicePointManager.ServerCertificateValidationCallback = new        
RemoteCertificateValidationCallback
(
   delegate { return true; }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-01T11:07:30.540

确保您的证书受到适当信任。是否已将根证书添加到正确的证书存储区（本地计算机上的受信任根 CA）？

当（自签名）证书的（自己制作的）根证书已添加到当前用户的受信任根 CA 时，我遇到了此错误。将根证书移动到本地机器上的根 CA 存储解决了我的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T09:10:39.300

这是客户端代码，对吧？而且您正在访问 HTTPS 网址，不是吗？我认为问题出在服务器证书上，客户端 TLS 堆栈无法验证该证书。当您通过浏览器连接到该 URL 时，它是否运行顺利，或者您是否看到证书不匹配的警告？

# optimization - 设计一个高度优化的数据结构来执行三个操作insert、delete和getRandom

> ID：11222760
> 
> 赞同：1
> 
> 时间：2012-06-27T09:01:45.500
> 
> 标签：optimization, data-structures

我刚刚接受了软件面试。其中一个问题是以高度优化的方式设计具有三种方法 insert、delete 和 getRandom 的任何数据结构。面试官让我想出一种数据结构的组合来设计一个新的。无论如何都可以设计插入，但对于随机和删除，我需要获取特定元素的位置。他给了我一个提示，让我考虑一下排序所需时间最短的数据结构。

欢迎任何回答或讨论......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:26:46.580

让`t`成为您要存储在数据结构中的元素的类型。有一个包含所有元素的可扩展数组`elements`，没有特定的顺序。有一个哈希表`indices`，将类型元素映射`t`到它们在`elements`.

*   插入`e`装置
    *   `e`在末尾添加`elements`（即push_back），得到它的位置`i`
    *   将映射`(e,i)`插入到 `indices
*   删除`e`手段
    *   找到感谢`i`的位置`e``elements``indices`
    *   用最后一个`e`元素覆盖`f``elements`
    *   更新`indices`：删除映射`(f,indices.size())`并插入`(f,i)`
*   随机绘制一个元素（将其留在数据结构中，即它是`peek`，不是`pop`）只是`i`在其中绘制一个整数`[0,elements.size()[`并返回`elements[i]`.

假设哈希表非常适合您的 type 元素`t`，那么所有三个操作都是 O(1)。

请注意数据结构中有 0 个或 1 个元素的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:07:16.183

一棵树可能在这里工作得很好。命令 log(n) 插入和删除，并选择 random 也可以是 log(n)：从根节点开始，在每个连接处随机选择一个子节点（由每个子节点的叶子节点总数加权），直到达到叶子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:19:20.720

排序所需时间最少的数据结构是有序数组。

get_random() 是二分查找，所以 O(log n)。

insert() 和 delete() 涉及添加/删除有问题的元素，然后重新使用，这是 O(n log n)，例如可怕的。

我认为他的暗示很糟糕。你的面试可能很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:16:17.470

可能是[堆（数据结构）](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T10:02:15.867

我觉得你可以使用一些平衡版本的树，比如红黑树。这将给出 O(log n) 的插入和删除时间。为了获取随机元素，您可能可以有一个额外的哈希表来跟踪树结构中的元素。

# r - 写入 CSV 时，从 csv 值中删除“”并更改列名

> ID：11222773
> 
> 赞同：27
> 
> 时间：2012-06-27T09:02:54.660
> 
> 标签：r, csv

我正在尝试从 R 表中创建 csv 文件。但是我不明白为什么当我使用 write.csv() 函数时所有的值都用 "" 检查。我的数据如下所示：

```
 Sample  Sample_Name Sample_Group    Pool_ID Sample_Plate    NorTum  Sentrix_ID    Sentrix_Position  HybNR
    1   00_11242    00_24200N2  MUTYH   GS0005703-OPA   GS0010004-DNA   N     1280307   R007_C005   1
    2   00_11242    00_24200N2  MUTYH   GS0005704-OPA   GS0010004-DNA   N   1280307 R007_C011   1
    3   00_11242    00_24200N2  MUTYH   GS0005702-OPA   GS0010004-DNA   N   1416198 R007_C011   2
    4   00_11242    00_24200N2  MUTYH   GS0005701-OPA   GS0010004-DNA   N   1416198 R007_C005   2
    5   00_7    00_7T   MUTYH   GS0005701-OPA   GS0010004-DNA   T   1416198 R006_C005   2
    6   00_7    00_7T   MUTYH   GS0005702-OPA   GS0010004-DNA   T   1416198 R006_C011   2
    7   00_7    00_7T   MUTYH   GS0005704-OPA   GS0010004-DNA   T   1280307 R006_C011   1
    8   00_7    00_7T   MUTYH   GS0005703-OPA   GS0010004-DNA   T   1280307 R006_C005   1
    9   01_677  01_677N HNPCC_UV    GS0005701-OPA   GS0010004-DNA   N   1416198 R002_C006   2
    10  01_677  01_677N HNPCC_UV    GS0005704-OPA   GS0010004-DNA   N   1280307 
```

在 CSV 输出文件中，每个值都如下所示：

```
"100" "R05_80611" "R05_80611N" "NA_FAM" "GS0005701-OPA" "GS0010004-DNA" "N" 1416198 "R003_C006" 2 
```

为什么函数会在我的值周围加上引号，有没有办法快速做到这一点。

我也想知道如何在写入 CSV 文件时更改列名，但由于我是初学者，我不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-27T09:05:27.010

请参阅手册[write.table {utils}](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/write.table.html)。

```
help(write.csv)

write.csv(X, quote = FALSE) 
```

默认情况下引用字段的理由是包含逗号的未引用字段将被误解。

# mysql - SQL在单列上连接多个表

> ID：11222777
> 
> 赞同：3
> 
> 时间：2012-06-27T09:03:04.003
> 
> 标签：mysql, sql, join

我可以使用该`USING`子句加入 2 个以上的表吗？即我可以这样做吗

```
SELECT * FROM (a, b, c) USING(date) 
```

或类似的东西而不是

```
SELECT * FROM a, b USING(date), c USING(date) 
```

?

我正在使用 MySQL。

**编辑**
我从我被误解的答案中看到。第二个示例工作正常，但对于许多表来说变得非常冗长和冗长。我正在寻找一种更简洁的语法，而不是更复杂的方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:13:14.477

不，很遗憾，您不能在示例中使用该语法。它不是有效的 SQL。

相反，您可以使用以下任何一种：

您可以使用显式`JOIN`语法来实现您想要的。

```
SELECT *
    FROM x
    LEFT JOIN y USING(date)
    LEFT JOIN z USING(date); 
```

通常为了更好地控制你会使用该`ON`子句。

```
SELECT *
    FROM x
    LEFT JOIN y ON x.date = y.date
    LEFT JOIN z ON y.date = z.date; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:25:23.373

没有这样的语法来实现你想要的，但是有一件事很接近：

它有点被看不起，但您可以考虑使用 is`NATURAL JOIN`语法，其中用于连接的条件是隐含的，因为您不需要指定要连接的列。隐式条件发生在您要加入的表中具有相同名称的列上。

如果`date`是所有表中唯一具有相同名称的列，那么您可以执行以下操作：

```
SELECT *
FROM a
NATURAL JOIN b
NATURAL JOIN c 
```

这将隐式连接列上的表，`date`因为表中的字段名称相同。

这种方法的缺点当然是您不能在另一个表中拥有任何其他具有相同名称的列，否则您的连接将中断，因为这些列也会*无意中*被考虑到连接条件中。

更多关于[`NATURAL JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Natural_join)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:23:33.253

使用 UNION ALL

```
SELECT * FROM a WHERE myDate = 'yourDate'
UNION ALL
SELECT * FROM b WHERE myDate = 'yourDate'
UNION ALL
SELECT * FROM c WHERE myDate = 'yourDate' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T09:15:47.920

可以使用 JOIN 子句连接两个表，但是两个表必须用外键连接，例如：

```
SELECT Persons.Name
FROM Persons
INNER JOIN Orders
ON Persons.Id = Orders.Id; 
```

# macos - 全屏 Cocoa 应用程序视网膜支持

> ID：11222781
> 
> 赞同：1
> 
> 时间：2012-06-27T09:03:15.283
> 
> 标签：macos, cocoa, fullscreen, retina-display

我正在开发一个在全屏模式下工作的屏幕截图应用程序。我有一个关于 MBP Retina 问题的错误报告，但我不知道如何测试和修复它们。看起来 QuartzDebug 可以将显示更改为 HiDPI 模式，但我不确定这是否能解决问题。在 Apple 文档中找不到任何“Retina Emultaion”相关主题。

所以我的问题是如何在不购买的情况下测试应用程序（不仅仅是图标，而是整个全屏应用程序）与视网膜显示器兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:57:21.610

它实际上都在 Apple 文档中，虽然有点难找：[Testing High Resolution Content](http://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Testing/Testing.html#//apple_ref/doc/uid/TP40012302-CH6-SW1)。

我会为您总结一下：您应该始终在真实设备上进行测试（或者去 Apple Store 并将您的应用程序放在他们的演示视网膜上）。但作为中间步骤，模拟视网膜也可以。

Quartz Debug 的 HiDPI 模式适用于此，并且是 Apple 描述的一种用于测试的方法。您还可以使用命令（在终端中）为高分辨率图像着色

```
defaults write -g CGContextHighlight2xScaledImages YES 
```

# android - EditText 中的 Android 文本光标

> ID：11222784
> 
> 赞同：5
> 
> 时间：2012-06-27T09:03:41.573
> 
> 标签：android, android-layout, android-edittext

我正在为**android 2.1+**编写应用程序。在我的一项活动中，我有带有**自定义键盘的****EditText**（KeyboardView 与keyboard.xml 中的键映射）。**一切都在android 2.1**上完美运行（一切都正确显示 - 文本光标正在闪烁），问题从**android 2.3.3**开始，其中**edittext 中的 textcursor**是可见的，但是在**android 3.0+**上文本光标只是- 在这两种情况下键盘都正常工作. 几天以来我一直在努力解决这个问题......任何想法都会非常有帮助。********`not blinking`**`invisible`**********

 ******我应该在前面提到一件事。这个activity被分成两个片段（android支持库），EditText在其中一个片段上，键盘是从父activity调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:06:59.287

当我之前遇到这个问题时，解决方案是通过像这样修改清单来禁用包含编辑文本的活动的硬件加速：

```
<activity android:name="activity name" android:hardwareAccelerated="false"/> 
```******

# cordova - 我无法在 Iphone Phonegap 的第二页中获取 device.uuid

> ID：11222792
> 
> 赞同：0
> 
> 时间：2012-06-27T09:04:41.930
> 
> 标签：cordova, device, uuid

我在 xcode 中创建了一个 phonegap 项目。

在第一页 index.html 中，我在 onDeviceReady() 中添加了获取 device.uuid 的代码，并将其作为警报打印出来。然后我添加一个表单并将其提交/传递到项目的下一页。第二页我还是保留了device.uuid code打印代码，但是alert code没有出现。

然后我尝试删除 device.uuid，只打印出一条警报消息，消息正确显示。

所以我想问，为什么第二页不起作用？看起来只有设备功能不起作用。基本上我只是把第一页的内容转储到第二页，第一页可以正常工作，但是第二页没有……

# sql - 在 t-sql 函数中验证日期时间

> ID：11222796
> 
> 赞同：1
> 
> 时间：2012-06-27T09:04:49.730
> 
> 标签：sql, sql-server

我需要验证社会安全号码检查功能中的日期。它应该接受的日期格式是`ddmmyyyy`，例如 01012000（2000 年 1 月 1 日）。

我曾尝试将此字符串转换为`yyyy-mm-dd`, 并使用`IsDate()`函数，但问题是有时 SqlServer 的 datetimeformat 可能与 dmy 类似，并且我不能在函数内使用“set DateFormat ymd”，因为它会给出此错误：

`Invalid use of a side-effecting operator 'SET COMMAND' within a function.`

还尝试了一个`try .. catch`块，但结果相同。

`datetime`因此，无论 SqlServer 日期格式如何，我都需要一种在用户函数中进行验证的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:16:53.713

这段代码将尝试转换输入。`dd.mm.yyyy`它首先使用[convert format 104 将](http://msdn.microsoft.com/en-us/library/ms187928.aspx)字符串更改为德国时间格式。它用于`begin try`抑制转换过程中的任何错误。

如果成功，日期在`@output_dt`. 如果失败，`@output_dt`将会`null`。

```
declare @input_str varchar(25)
declare @output_dt date
set @input_str = '31122011'

if len(@input_str) >= 8
    begin
    declare @german_str varchar(25)
    select  @german_str = substring(@input_str, 1, 2) + '.' + 
                          substring(@input_str, 3, 2) + '.' + 
                          substring(@input_str, 5, 4)

    begin try
        select  @output_dt = convert(date, @german_str, 104)
    end try
    begin catch
    end catch
    end

select  @output_dt 
```

如果您不能使用`begin catch`，您可以创建一个包含有效日期的表格。此示例创建一个名称`ValidDates`为 1900 到 2100 的表：

```
if object_id('ValidDates') is not null
    drop table ValidDates
create table ValidDates (date_str varchar(8), dt date)
go
truncate table ValidDates

declare @start_dt date
declare @end_dt date
set @start_dt = '1900-01-01'
set @end_dt = '2100-01-01'

; with  cte as
        (
        select  @start_dt as dt
        union all
        select  dateadd(day, 1, dt)
        from    cte
        where   dt < @end_dt
        )
insert  ValidDates
        (date_str, dt)
select  replace(convert(varchar(10), dt, 104),'.','')
,       dt
from    cte
option  (maxrecursion 0); 
```

然后，您可以检查有效日期，例如：

```
select @output_dt = dt from ValidDates where date_str = @input_dt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:43:27.273

似乎

`SELECT ISDATE('2005-05-22')`受影响`SET DATEFORMAT dmy`并返回零

但

`SELECT ISDATE('20050522')`即使 dateformat 是 也不会受到影响`dmy`，因此可以独立于数据库默认使用的任何 dateformat 使用此格式。

# python - 使用 SQLAlchemy 实现“相关项目”功能

> ID：11222798
> 
> 赞同：0
> 
> 时间：2012-06-27T09:04:54.590
> 
> 标签：python, sqlalchemy

我需要实现一个“相关项目”功能，即允许同一个表中的项目以多对多的方式任意链接。类似于新闻网站显示相关文章的方式。

另外，我需要这种关系是双向的，如下所示：

```
a = Item()
b = Item()
a.related.append(b)
assert a in b.related # True 
```

现在，在 SQL 级别上，我想这可以通过修改“标准”多对多关系来解决，因此每次进行关联时都会将 2 条记录插入关联表中，因此 (a -> b) 和 (b - > a) 是两个独立的记录。

或者，多对多表的连接条件可以以某种方式检查关联的双方，所以粗略地而不是`... JOIN assoc ON a.id = assoc.left_id ...`SQLAlchemy 会产生类似的东西`... JOIN assoc ON a.id = assoc.left_id OR a.id = assoc.right_id ...`

有没有办法用 SQLAlchemy 配置它，所以关系的工作方式类似于“正常”的多对多关系？

很可能我只是不知道正确的术语——我想出的所有东西——“自我引用”、“双向”、“关联”——都被用来描述 SQLAlchemy 中的其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:53:04.403

使用[属性事件](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#attribute-events)应该可以完成这项工作。请参阅下面的示例代码，其中一小段丑陋的代码仅用于避免无休止的递归：

```
class Item(Base):
    __tablename__ =  "item"

    id = Column(Integer, primary_key=True)
    name = Column(String(255), nullable=False)

    # relationships
    related = relationship('Item', 
            secondary = t_links,
            primaryjoin = (id == t_links.c.from_id),
            secondaryjoin = (id == t_links.c.to_id),
    )

_OTHER_SIDE = set()
from sqlalchemy import event
def Item_related_append_listener(target, value, initiator):
    global _OTHER_SIDE
    if not((target, value) in _OTHER_SIDE):
        _OTHER_SIDE.add((value, target))
        if not target in value.related:
            value.related.append(target)
    else:
        _OTHER_SIDE.remove((target, value))

event.listen(Item.related, 'append', Item_related_append_listener)

# ...
a = Item()
b = Item()
a.related.append(b)
assert a in b.related # True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:41:37.280

为了完整起见，这是我最终得到的代码；侦听器方法略有不同，以避免使用全局变量，并且还有一个`remove`事件侦听器。

```
import sqlalchemy as sa

related_items = sa.Table(
    "related_items",
    Base.metadata,
    sa.Column("id", sa.Integer, primary_key=True),
    sa.Column("from_id", sa.ForeignKey("items.id")),
    sa.Column("to_id", sa.ForeignKey("items.id")),
)

class Item(Base):

    __tablename__ = 'items'
    ...
    related = sa.orm.relationship('Item',
            secondary = related_items,
            primaryjoin = (id == related_items.c.from_id),
            secondaryjoin = (id == related_items.c.to_id),
        )

def item_related_append_listener(target, value, initiator):

    if not hasattr(target, "__related_to__"):
        target.__related_to__ = set()

    target.__related_to__.add(value)

    if target not in getattr(value, "__related_to__", set()):
        value.related.append(target)

sa.event.listen(Item.related, 'append', item_related_append_listener)

def item_related_remove_listener(target, value, initiator):
    if target in value.related:
        value.related.remove(target)

sa.event.listen(Item.related, 'remove', item_related_remove_listener) 
```

# c# - 验证文本框值的必填字段验证器问题

> ID：11222800
> 
> 赞同：0
> 
> 时间：2012-06-27T09:04:57.860
> 
> 标签：c#, asp.net, hyperlink, uri, requiredfieldvalidator

我有一个`TextBox`用于存储应用`<asp:HyperLink>`控件的 url。`RequiredFieldValidator`我想要做的是在`TextBox.Text`值为空并且用户单击*保存*时触发。据我所知，我的逻辑没问题，但验证器没有启动？

这是标记：

```
<div class="frmRow">
        <div class="frmControls">  
            <asp:Label ID="lblLink" AssociatedControlID="txtImgUrl" runat="server" Text="Image URL"></asp:Label>
            <asp:RequiredFieldValidator ID="imgUrlValidator" runat="server" ControlToValidate="txtImgUrl" ErrorMessage="Enter a Valid URL"  />
            <asp:TextBox ID="txtImgUrl" runat="server" />  
        </div>
        <div class="clearBoth"></div>
    </div> 
```

这是检查我的`btnSave`事件中有效绝对 URL 的代码：

```
Uri url;
if (!string.IsNullOrEmpty(txtImgUrl.Text))
{
    txtImgUrl.Text = Uri.TryCreate(txtImgUrl.Text, UriKind.Absolute, out url) ? url.AbsoluteUri : string.Empty;
} 
```

保存按钮标记：

```
<br class="clearBoth" />
<asp:Button ID="btnSave" Text="Save Case study" ImageUrl="~/Assets/Design/buttons/btn-update.gif" CssClass="btn fltr" runat="server" OnClick="btnSave_OnClick" />
<div class="clearBoth"></div> 
```

当一个狡猾的 URL 失败时不应该`RequiredFieldValidator`被解雇吗？`TryCreate``txtImgUrl.Text = ""`

我在这里遗漏了什么明显的东西吗？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:20:12.373

你应该检查按钮点击

```
 if (Page.IsValid) 
         {
            lblOutput.Text = "Required field is filled!";
         }
         else 
         {
            lblOutput.Text = "Required field is empty!";
         } 
```

在 ASPX 中的按钮添加

```
CausesValidation="true" 
```

# javascript - 无法附加到第二个容器

> ID：11222801
> 
> 赞同：1
> 
> 时间：2012-06-27T09:05:03.037
> 
> 标签：javascript, jquery, css

我有以下脚本：

```
(function($) {

    $.fn.easyPaginate = function(options){

        var defaults = {                
            step: 4,
            delay: 100,
            numeric: true,
            nextprev: true,
            controls: 'pagination',
            current: 'current' 
        }; 

        var options = $.extend(defaults, options); 
        var step = options.step;
        var lower, upper;
        var children = $(this).children();
        var count = children.length;
        var obj, next, prev;        
        var page = 1;
        var timeout;
        var clicked = false;

        function show(){
            clearTimeout(timeout);
            lower = ((page-1) * step);
            upper = lower+step;
            $(children).each(function(i){
                var child = $(this);
                child.hide();
                if(i>=lower && i<upper){ setTimeout(function(){ child.fadeIn('fast') }, ( i-( Math.floor(i/step) * step) )*options.delay ); }

                if(options.nextprev){
                    if(upper >= count) { next.addClass('stop'); } else { next.removeClass('stop'); };
                    if(lower >= 1) { prev.removeClass('stop'); } else { prev.addClass('stop'); };
                };
            });    
            $('li','#'+ options.controls).removeClass(options.current);
            $('li[data-index="'+page+'"]','#'+ options.controls).addClass(options.current);

            if(options.auto){
                if(options.clickstop && clicked){}else{ timeout = setTimeout(auto,options.pause); };
            };
        };

        function auto(){
            if(upper <= count){ page++; show(); }       
            else { page--; show(); }          
        };

        this.each(function(){ 

            obj = this;

            if(count>step){

                var pages = Math.floor(count/step);
                if((count/step) > pages) pages++;
                var ol = $('<ol id="'+ options.controls +'" class="pagin"></ol>').insertAfter(obj);

      if(options.nextprev){
            prev = $('<li class="prev">prev</li>')
                .appendTo(ol)
                .bind('click', function() {

                    //check to see if there are any more pages in the negative direction
                    if (page > 1) {
                        clicked = true;
                        page--;
                        show();
                    }
                });
        }

                if(options.numeric){
                    for(var i=1;i<=pages;i++){
                    $('<li data-index="'+ i +'">'+ i +'</li>')
                        .appendTo(ol)
                        .click(function(){    
                            clicked = true;
                            page = $(this).attr('data-index');
                            show();
                        });                    
                    };                
                };

        if(options.nextprev){
            next = $('<li class="next">next</li>')
                .appendTo(ol)
                .bind('click', function() {

                    //check to see if there are any pages in the positive direction
                    if (page < (count / 4)) {
                        clicked = true;         
                        page++;
                        show();
                    }
                });
        }

                show();
            };
        });    
    };    

})(jQuery);

    jQuery(function($){
    $('ul.news').easyPaginate({step:4});
    }); 
```

这是一个类似轮播的插件，可以为导航生成这个 html 结构：

```
<ol id="pagination" class="pagin"><li class="prev">prev</li><li data-index="1" class="">1</li><li data-index="2" class="">2</li><li data-index="3" class="current">3</li><li class="next stop">next</li></ol> 
```

我想要的只是将此列表包含在一个 div 中。看起来很简单，但 appendTo 不想与我合作，或者我做错了什么（如果你能帮助我理解那是什么，我将不胜感激..）

所以我这样修改：

```
var ol = $('<ol id="'+ options.controls +'" class="pagin"></ol>');
var tiv = $('<div id="lala"></div>');
ol.appendTo('#lala');
tiv.insertAfter(obj); 
```

我知道如何链接，但我处于“调试”模式，试图理解为什么我没有得到我想得到的结果：

```
<div id="lala>
<ol id="pagination><li>...... </li></ol>
</div> 
```

我尝试放置一些console.log 来查看我的变量的状态，但找不到有用的东西。我想DOM 插入有些东西我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:12:48.267

在将元素添加到文档之前，您要附加`<ol>`元素。`#lala`这没有什么问题，但是由于您使用的是 id 选择器，并且目标元素还不是文档的一部分，因此选择器将不会匹配任何内容。

要解决此问题，您可以编写：

```
var ol = $('<ol id="'+ options.controls +'" class="pagin"></ol>');
var tiv = $('<div id="lala"></div>');
ol.appendTo(tiv);
tiv.insertAfter(obj); 
```

或者：

```
var ol = $('<ol id="'+ options.controls +'" class="pagin"></ol>');
var tiv = $('<div id="lala"></div>');
tiv.insertAfter(obj);
ol.appendTo('#lala'); 
```

# c# - 我的 C# Reg-ex 正确吗？

> ID：11222806
> 
> 赞同：2
> 
> 时间：2012-06-27T09:05:18.990
> 
> 标签：c#, regex

如果我必须匹配一个长度至少为 7 个字符、不超过 20 个字符、至少有 1 个数字和至少 1 个字母的字符串，这个正则表达式是否正确？它没有其他限制。

```
[0-9]+[A-Za-z]+{7,20} 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T09:07:15.437

不，这不对。量词`{7,20}`不适用于标记（正则表达式中的重复是使用*量词*完成的，例如`*`,或更一般的- 您不能在单个标记上使用多个量词[在这种情况下]；它本身就是一个量词并且因此不遵守上述规则）。您将需要以下内容：`+``?``{n,m}``[a-zA-Z]``*?`

```
^(?=.*\d)(?=.*[a-zA-Z]).{7,20}$ 
```

这有两个前瞻确保至少一个数字和至少一个字母：

```
(?=.*\d)
(?=.*[a-zA-Z]) 
```

Lookarounds 是零宽度的断言；它们不消耗字符串中的字符，因此它们只是匹配一个位置。但他们确保其中的表达式在*当前*点匹配。在这种情况下，此表达式将匹配任意多个字符，然后分别*需要*一个数字或一个字母。

实际比赛本身，

```
.{7,20} 
```

只是确保长度匹配。使用什么字符无关紧要，因为我们已经确定了上面的限制。

最后，整个表达式被*锚定*在*字符串*的开头和*结尾*锚点插入到开头和结尾：

```
^...$ 
```

这可以确保匹配真正包含整个字符串。虽然在这种情况下不是绝对必要的（在所有有效情况下它都会匹配整个字符串），但包含通常是一个好主意，因为通常正则表达式只匹配子字符串，这可能会导致验证正则表达式匹配的微妙问题，即使它们应该失败。例如，`\d+`用于确保字符串仅包含数字将匹配`a4b`经常困扰初学者的字符串。

我还更改了字母和数字的顺序无关紧要。您的正则表达式看起来像是试图强加一个明确的顺序，其中所有数字都需要在所有字母之前，这通常不是这里想要的。

# php - 在 PHP 中扩展父类是否需要包含该类的文件？

> ID：11222809
> 
> 赞同：7
> 
> 时间：2012-06-27T09:05:38.070
> 
> 标签：php, oop, inheritance, require

我应该包含/require_once 我在 PHP 中扩展的父类吗？

例如，我有一个名为 Shapes 的类

```
class Shapes {

} 
```

然后我创建了一个名为的子类

```
require_once('shapes.php');

class Circle extends Shapes {

} 
```

扩展时是否需要父类？还是应该只使用将子类扩展到其父类，即使它们在同一个文件夹中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T09:09:37.413

你需要做*一些事情*让 PHP 在处理子类之前看到你的基类定义，否则会发生致命错误。

这可以是`require_once`基类文件的手册，也可以是[自动加载](http://www.php.net/manual/en/function.spl-autoload-register.php)（自动加载还有其他选项，但[`spl_autoload_register`](http://www.php.net/manual/en/function.spl-autoload-register.php)您应该使用该选项）。

使用哪种方法取决于范围：在编写小型测试项目时，设置自动加载可能是多余的。但是随着代码库变得越来越大，自动加载变得更有吸引力，因为：

*   它可以隐藏复杂的源文件解析逻辑（例如，如果您有基类的可配置目录；还有更高级的场景）
*   它可以增量配置：您可以使用多个作为链运行的自动加载器，并且应用程序的每个独立模块都可以注册其独立的自动加载器，与所有其他模块和平共存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:10:08.247

是的，如果该类未在同一文件中声明，则必须包含它。

还有一个名为[Autoloading Classes](http://prototype.php.net/manual/en/function.autoload.php)的功能，您可以使用它创建一个像这样的函数：

```
function __autoload($class){
    require_once('classes/' . $class . '.php');
} 
```

它将自动包含在现有范围内找不到的类

您也可以阅读有关此功能的信息：[autoload_register](http://www.php.net/manual/en/function.spl-autoload-register.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-11T14:18:09.123

您还可以使用 composer 来简化该过程。

`composer.json`像这样制作

```
{
...
    "autoload": {
        "psr-4": {
            "": "src/"
        }
    },
...
} 
```

[从https://getcomposer.org/](https://getcomposer.org/)获取 composer并运行`composer install`。你应该像这样加载作曲家的自动加载脚本

```
require_once __DIR__ . '/vendor/autoload.php'; 
```

如果您的 PHP 低于 5.3.0，则替换`__DIR__`为`dirname(__FILE__)`.

并将您的文件放入文件`src`夹。例如，如果您有课程`Acme\Utils\FooBar`，那么它应该在`src/Acme/Utils/FooBar.php`.

# opencv - 2个USB摄像头不适用于opencv

> ID：11222813
> 
> 赞同：4
> 
> 时间：2012-06-27T09:05:50.130
> 
> 标签：opencv, video-capture

我正在做一个计算机视觉项目，我需要使用两个使用 opencv 库的相机。我尝试了这段代码，但是如果我使用一个 USB 摄像头和我的电脑的摄像头，则使用 USB 端口的两个网络摄像头它不起作用，而它工作。

```
CvCapture* capture[2];                      

capture[0] = cvCreateCameraCapture(0);
capture[1] = cvCreateCameraCapture(1);

if(!capture[0] && !capture[1])
    printf("Webcam error\n"); 
```

我正在 acer aspire 5742g 上使用 Windows 7。是我电脑总线的问题吗？相机是 2 个飞利浦 SPZ2000。我还尝试处理其中一个和我电脑上的相机拍摄的照片，当我使用 Bradsky 的“Learning opencv”一书中的校准和纠正代码时，我得到了一个糟糕的结果。有人可以帮助我吗？先感谢您，

萨拉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T13:44:13.027

The typical reason for 2+ USB cameras to not work together (still they might be working fine separately) is that USB bandwidth is insufficient for them both to run simultaneously. There is a bandwidth limit, which is rather low: [The maximum throughput of an isochronous pipe (which is usually used for video) is 24MB/s](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/b4c0703a-ac2a-4c70-91d0-7e3897eb4a88/).

More on this issue:

*   [Implications of using many USB web cameras](https://stackoverflow.com/questions/2519057/implications-of-using-many-usb-web-cameras)
*   [How many USB cameras can be accessed by one PC](https://stackoverflow.com/questions/10239843/how-many-usb-cameras-can-be-accessed-by-one-pc)
*   [Not able to capture video using 2 webcamera simulteneously](https://stackoverflow.com/questions/8264846/not-able-to-capture-video-using-2-webcamera-simulteneously)
*   [Two webcams on one usb hub - bandwidth issues](https://stackoverflow.com/questions/6664605/two-webcams-on-one-usb-hub-bandwidth-issues)

# c# - Watin DialogHandler 关闭 SaveFileDialog

> ID：11222820
> 
> 赞同：5
> 
> 时间：2012-06-27T09:06:20.287
> 
> 标签：c#, watin, savefiledialog

基于[这个答案](https://stackoverflow.com/questions/3454422/c-sharp-watin-add-an-alertdialoghandler-to-click-ok-button-on-every-alert-dial "这个")，我创建了一个自定义`DialogHandler`来处理从 WebBrowser 控件中弹出的 Javascript 警报框。

`Handler`附加到继承的 WatiN浏览`IE`器，称为`ExtendedIeBrowser`.

由于未知原因，watin 的 DialogHandler 干扰了 Winforms SaveFiledialogs。通过`SaveFileDialog`返回 DialogResult.Cancel 会自动关闭。奇怪的是，`Handle()`自定义 Handler 的 永远不会被调用。Only`CanHandle()`被调用（两次）并返回false，因此根本不应该处理对话框，因此它应该保持打开状态。

我能做些什么来改变克服这种奇怪的行为吗？

这是`ExtendedIeBrowser`来源：

```
public class ExtendedIeBrowser : IE
{
    private IntPtr hwnd;
    public ExtendedIeBrowser(WebBrowser webBrowserControl) : base(webBrowserControl.ActiveXInstance, false)
    {
    }

    public void Initialize(WebBrowser webBrowserControl)
    {
        hwnd = webBrowserControl.FindForm().Handle;
        StartDialogWatcher();
    }

    public override IntPtr hWnd { get { return hwnd; } }

    protected override void Dispose(bool disposing)
    {
        hwnd = IntPtr.Zero;
        base.Dispose(disposing);
    }
} 
```

遵循`CustomPopupDialogHandler`来源：

```
class CustomPopupDialogHandler : ReturnDialogHandler
{
    protected static Logger _logger = LogManager.GetCurrentClassLogger();

    public override bool HandleDialog(Window window)
    {
        bool handled = false;
        try
        {
            var button = GetWantedButton(window);
        if (button != null)
        {
            button.Click();
        }
            handled = true;
        }
        catch (Exception ex)
        {
            _logger.ErrorException("HandleDialog", ex);
        }
        return handled;
    }

    public override bool CanHandleDialog(Window window)
    {
        bool canHandle = false;
        try
        {
        canHandle = GetWantedButton(window) != null;
        }
        catch (Exception ex)
        {
            _logger.ErrorException("CanHandleDialog", ex);
        }
        return canHandle;
    }

    private WinButton GetWantedButton(Window window)
    {
        WinButton button = null;
        try
        {
            if (window.Title.Contains("Windows Internet Explorer") || window.Title.Contains("Message from webpage"))
            {
                var windowButton = new WindowsEnumerator().GetChildWindows(window.Hwnd, w => w.ClassName == "Button" && (new WinButton(w.Hwnd).Title.Contains("Leave") || new WinButton(w.Hwnd).Title.Contains("OK")).FirstOrDefault();
                if (windowButton != null)
                {
                    string s = windowButton.Title;
                    button = new WinButton(windowButton.Hwnd);
                }
            }
        }
        catch (Exception ex)
        {
            _logger.ErrorException("GetWantedButton", ex);
        }
        return button;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:17:15.393

尝试这个：

```
WatiN.Core.Settings.AutoCloseDialogs = false; 
```

默认情况下设置为`true`。

# c# - 如何在asp.net中将数据从网页传输到另一个网页？

> ID：11222821
> 
> 赞同：-4
> 
> 时间：2012-06-27T09:06:23.687
> 
> 标签：c#, asp.net, query-string

> **可能重复：**
> [如何在 Asp.net 中将值从一种形式传递到另一种形式](https://stackoverflow.com/questions/6746860/how-can-i-pass-values-from-one-form-to-another-in-asp-net)

你好。

我想在 asp.net 将一些**数据****从**一个**页面传递到另一个页面，**如何在**asp.net**中执行此操作？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:06:58.777

您可以使用`QueryString`、`Session`或`Cookies`

笔记。在所有情况下，从相应集合中读取值时，都需要在使用对象之前验证对象是否存在。（检查是否为空）

## 使用查询字符串

### 第 1 页

```
<a href="mysecondPage.aspx?customerID=43" >My Link</a> 
```

### 第2页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var c = this.Request.QueryString["customerID"];
    } 
```

## 使用会话对象

### 第 1 页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.Session["customerID"] = 44;
    } 
```

### 第2页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var c = (int)this.Session["customerID"];
    } 
```

## 使用 cookie

### 第 1 页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.Response.Cookies["customerID"].Value = "43";
    } 
```

### 第2页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var c = int.Parse(this.Request.Cookies["customerID"].Value);
    } 
```**

# ios - 使用 Core 图像过滤时的内存泄漏

> ID：11222825
> 
> 赞同：3
> 
> 时间：2012-06-27T09:06:32.207
> 
> 标签：ios, xcode, core-image

所以我一直在使用核心图像对图像应用过滤器，一切都很好，除了当我尝试一遍又一遍地应用相同的过滤器时，应用程序就退出了，我猜它是内存泄漏。

这是代码：

```
-(UIImage *) applyFilter: (UIImage*) picture
{

    UIImageOrientation originalOrientation = picture.imageOrientation;
    CGFloat originalScale = picture.scale;   

    CIImage *beginImage = [CIImage imageWithCGImage:picture.CGImage];  

    CIContext *context = [CIContext contextWithOptions:nil];

    CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone" 
                                  keysAndValues: kCIInputImageKey, beginImage, 
                        @"inputIntensity", [NSNumber numberWithFloat:0.8], nil];

    CIImage *outputImage = [filter outputImage];

    CGImageRef cgimg = 
    [context createCGImage:outputImage fromRect:[outputImage extent]];
    UIImage *newImg = [UIImage imageWithCGImage:cgimg scale:originalScale orientation:originalOrientation];

    beginImage = nil;
    context = nil;
    filter = nil;
    outputImage = nil;
    cgimg = nil;
    [beginImage release];
    [context release];
    [filter release];
    [outputImage release];
    //CGImageRelease(CGImageRef) method.
    CGImageRelease(cgimg);

    return newImg;
} 
```

而过滤我只是做

```
UIImage *ima = [self.filter applyFilter:self.imageView.image];
imageView.image = ima ; 
```

applyFilter 是我创建的 Filter 类的一个方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:34:46.730

您在调用之前将变量设置为 nil `release`，因此`release`没有效果。但是无论如何，您不应该发布大部分内容。你只需要释放你**创建**的对象（我希望下面的列表是完整的）：

*   `alloc`以, `init`, `copy`,开头的方法返回的 Objective-C 对象`new`
*   由以 开头的 Objective-C 方法`create`或由包含`Create`或的函数返回的基础对象`Copy`。

删除这些行应该没问题：

```
beginImage = nil;
context = nil;
filter = nil;
outputImage = nil;
cgimg = nil;
[beginImage release];
[context release];
[filter release];
[outputImage release]; 
```

你需要保留这条线`CGImageRelease(cgimg);`，因为用于获取的方法`cgimg`包含`create`- 你创建它，你释放它。

# c# - 一个 azure worker 角色的多个实例有多少队列？

> ID：11222828
> 
> 赞同：2
> 
> 时间：2012-06-27T09:06:42.173
> 
> 标签：c#, .net, architecture, azure, azure-queues

我有个问题。

我认为 Microsoft 的 Azure 队列旨在支持[本文](https://stackoverflow.com/questions/7219798/does-multiple-azure-worker-role-polling-same-queue-causes-dead-lock-or-poison-me)所建议的大量消息，并且我读到您能够存储 100TB 的消息（帐户的最大容量）。因此，您只能将一个队列用于所有工作人员角色。

但我发现一篇[文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx)只向我们展示了一个按工作角色实例排列的队列。

我认为文章的其余部分是严肃的，所以我不知道对此有何看法。

在某些情况下，多个队列更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:36:35.817

如果您正在查看存储，则无论您有 1 个队列还是 100 个队列，限制都是相同的。但是您必须了解性能影响。在存储帐户中，性能基于分区（例如，Fabric Controller 能够将更多资源分配给热分区）。

当您使用 Windows Azure 存储队列时，1 个队列就是 1 个分区。这带有一些可扩展性**目标**。对于队列，这意味着 1 个队列**应该**能够处理 500 条消息/秒。在此处阅读有关它的更多信息：[Windows Azure 存储抽象及其可扩展性目标](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)

现在，这是您定义架构时的一个重要因素，它取决于您将使用队列的目的。如果您从未期望达到每秒 500 条消息，那么您应该为所有工作人员使用一个队列。但是，如果您认为超出此限制（即使不会立即发生），您将需要建立一个良好的架构来处理这个问题。这不仅仅意味着 1 个工作人员的 1 个队列。考虑不同进程的不同队列，在子进程中拆分进程并为每个子进程使用队列，让您的工作人员轮询不同的队列，考虑循环系统，......

还可以考虑查看类似这样的现有实现： [Partitioned CloudQueue - Azure Storage Queue without scaling limits](http://partitioncloudqueue.codeplex.com/)。我还建议您查看[客户咨询团队](http://windowsazurecat.com)的网站，他们有许多关于队列可扩展性的有趣文章（您引用的第一篇文章来自 CAT 网站）。

# php - 如何像 StackOverflow 一样进行一步人工验证？

> ID：11222831
> 
> 赞同：-3
> 
> 时间：2012-06-27T09:06:56.093
> 
> 标签：php

> **可能重复：**
> [没有会话的 PHP Captcha](https://stackoverflow.com/questions/1465704/php-captcha-without-session)

在我发送表单后，我会进入验证码页面 - 而不是返回表单？怎么做？我应该使用会话吗？

我知道如何在表单页面上实现验证码，但我想知道它是如何完成的：我被重定向到验证页面 ex。[https://stackoverflow.com/captcha?s=f689274e-e760-482d-a008-31d4bd469f80](https://stackoverflow.com/captcha?s=f689274e-e760-482d-a008-31d4bd469f80)

我不需要任何具体的解释——我想知道一个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:11:34.133

[Recaptcha](http://www.google.com/recaptcha/whyrecaptcha)具有易于安装的插件，您所要做的就是获取它并按照说明进行操作。

# javascript - 将逗号分隔的字符串分成 40 个块

> ID：11222837
> 
> 赞同：3
> 
> 时间：2012-06-27T09:07:11.850
> 
> 标签：javascript

所以我有一个看起来像这样的字符串：

123,532,0302,1234 等（它会一直持续下去，有时超过 500）。但是，我想将逗号分隔列表拆分为 40 个数组，仅此而已。类似于PHP 中的[array_chunk](http://nl.php.net/manual/function.array-chunk.php)（但带有数组）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:11:03.250

```
String.prototype.chunk = function(n) {
if (typeof n=='undefined') n=2;
return this.match(RegExp('.{1,'+n+'}','g'));
}; 
```

示例用法：

```
var s = 'abcdefghijklmnopqrstuvwxyz1234';
var a = s.chunk(6); 
```

产量：

```
var a = ['abcdef','ghijkl','mnopqr','stuvwx','yz1234']; 
```

取自[http://javascript.about.com/library/blchunk.htm](http://javascript.about.com/library/blchunk.htm)

**编辑：我意识到我的第一个答案没有回答这个问题，所以请看这里：**

```
String.prototype.chunkArr = function (length) {
    var data = this.split(",");
    var result = Array();
    while(data.length > 0) {
        result.push(
            data.splice(0,length)
            .join(",") // comment this or remove line out if you don't want it to re-join into a CSV list of 40 items
        );
    }
    return result;
} 
```

示例用法：

```
myData = "1,2,3,2,4,5,1,5,1,23,1,23,12,3,12,3,12,3,12,3,12,3,12";
console.log(myData.chunkArr(2)); // Change 2 to 40 if you have longer data 
```

产量：

```
myData = ["1,2", "3,2", "4,5", "1,5", "1,23", "1,23", "12,3", "12,3", "12,3", "12,3", "12,3", "12"] 
```

如果您注释掉或删除`.join(",")`上述函数中的部分（第 7 行附近）`chunkArr`，该函数将产生：

```
myData = [
    ["1", "2"], 
    ["3", "2"], 
    ["4", "5"], 
    ["1", "5"], 
    ["1", "23"], 
    ["1", "23"], 
    //... and so on
] 
```

是的，我知道我本可以添加第二个参数来更改“模式”.. 但随之而来的是懒惰:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:21:36.207

如果我正确理解了所需的输出，您可以拆分所有逗号，然后将生成的长数组分成几个不超过 40 个的数组。

```
function splitChunkIntoArrays(data, chunkLength) {
    var temp = data.split(",");
    var output = [];
    var item = [];
    for (var i = 0; i < temp.length; i++) {
        // if item is now full, put it into the result and start a new chunk
        if (item.length == chunkLength) {
            output.push(item);
            item = [];
        }
        item.push(temp[i]);
    }
    // if anything in the last chunk, put it in the result
    if (item.length != 0) {
        output.push(item);
    }
    return(output);
}

// sample output from splitChunkIntoArrays:
[
    [1,2,3,4,..40],
    [41,42,43,...80],
    [81,82,83,...120],
    [121,123,124]
] 
```

这将为您提供一个数组数组，其中每个内部数组的长度不超过 chunkLength 个项目。

如果您希望生成的 40 项长片段仍然是字符串（在您的问题中并不完全清楚），那么您可以再次加入内部数组：

```
function splitChunkIntoStrings(data, chunkLength) {
    var splitData = splitChunkIntoArrays(data, chunkLength);
    var results = [];
    for (var i = 0; i < splitData.length i++) {
        results.push(splitData[i].join(","));
    }
    return(results);
}

// sample output from splitChunkIntoStrings:
[
    "1,2,3,4,..40",
    "41,42,43,...80",
    "81,82,83,...120",
    "121,123,124"
] 
```

这将产生一个字符串数组，其中每个字符串有 40 个或更少的逗号分隔值。

* * *

而且，这里是使用 array 的第一个函数的更精简版本`splice()`：

```
function splitChunkIntoArrays(data, chunkLength) {
    var temp = data.split(","), result = [];
    while (temp.length > 0) {
        result.push(temp.splice(0, chunkLength));
    }
    return(result);
} 
```

或者如果您希望结果仍然是字符串，您可以这样做：

```
function splitChunkIntoStrings(data, chunkLength) {
    var temp = data.split(","), result = [];
    while (temp.length > 0) {
        result.push(temp.splice(0, chunkLength).join(","));
    }
    return(result);
} 
```

# java - 从 glassfish 收到系统错误时查看请求源

> ID：11222842
> 
> 赞同：1
> 
> 时间：2012-06-27T09:07:20.667
> 
> 标签：java, servlets, glassfish, glassfish-3

`Request header is too large`我时不时地从 glassfish得到一个 IllegalArgumentException: 。我知道如何解决这个问题 - 需要切换到`POST`请求。关于这方面的好文章已经够多了。

但我的问题是我不知道是谁向我发送了这个请求。有没有办法在此错误消息中添加更多详细信息？IP地址就足够了。我猜这个错误发生在我的 servlet 代码被处理之前。因此，我无法自行将 IP 地址添加到错误消息中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:25:02.140

一种方法是使用 a[`ThreadLocal`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)并将其实例`HttpServletRequest`放入请求处理的开始（可能是一个[servlet`Filter`](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)）。

这样，在错误处理程序中，您可以`HttpServletRequest` 从线程局部变量中获取的实例，并且 - 例如 - 检查发送者的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:29:41.053

在执行 post 或 put 请求时，假设通过线路发送的数据大小没有限制。

大多数 Web 服务器都有这些值的默认配置。默认情况下，max-post-size in `glassfish 3`is`8192 bytes`和`glassfish 2.1`is `4096 bytes`

将以下属性添加到下的 http-listener 元素`domain.xml`：

```
<property name="maxPostSize" value=""> 
```

如果已经存在，则增加该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:42:46.617

我将从启用访问日志记录开始：

> `asadmin set configs.config.server-config.http-service.access-logging-enabled=false`

你还应该设置你的日志格式

> `asadmin configs.config.server-config.http-service.access-log.format=XXXX`

希望这有助于追踪问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:28:39.053

绝对在这种情况下，控件甚至不会让应用程序应用一些逻辑来知道远程地址。只有您使用的服务器在日志中提供这些信息。

您使用的任何服务器都会在**Web 访问日志**中记录请求。

默认情况下，这些日志条目还将具有发出请求的客户端的远程地址。如果不存在，请咨询服务器团队如何配置在 Web 访问日志中记录远程地址。

**参考：**

*   [如何在 Glassfish 中启用访问日志记录](http://bhapca.blogspot.in/2009/05/how-to-enable-access-logging-in.html)
*   [在 Glassfish 中启用 Http 访问日志](http://pe-kay.blogspot.in/2011/08/enabling-http-access-log-in-glassfish.html)

# insert - 将 powerpoint 幻灯片插入正在运行的演示文稿中

> ID：11222846
> 
> 赞同：0
> 
> 时间：2012-06-27T09:07:39.967
> 
> 标签：insert, real-time, powerpoint, slideshow

主要思想：用户创建一个带有 1 张幻灯片的 powerpoint 文件，并将这张幻灯片插入到已经循环播放的幻灯片中。我的第一个想法是将 .ppt 文件转换为图像（例如使用[http://www.artofsolving.com/opensource/jodconverter/](http://www.artofsolving.com/opensource/jodconverter/)或 .NET API），然后创建一个扫描目录的 Flash 应用程序要显示的图像（/转换后的幻灯片）。

但这似乎有点像一个复杂的解决方案，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:37:32.460

您可以使用 PowerPoint 中的插入对象功能来实现此目的。

1.  选择从文件插入
2.  选择PowerPoint文件
3.  检查链接复选框

它完成了。链接文件中的任何更改都会反映在已经循环播放的节目中。如果你不明白，请告诉我。

# c++ - 为什么需要重新声明接口？

> ID：11222847
> 
> 赞同：5
> 
> 时间：2012-06-27T09:07:42.757
> 
> 标签：c++, inheritance

我有一个抽象基类，想在派生类中实现一个函数。为什么我必须在派生类中再次声明函数？

```
class base {
public:
    virtual int foo(int) const = 0;
};

class derived : public base {
public:
    int foo(int) const; // Why is this required?
};

int derived::foo(int val) const { return 2*val; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T09:10:22.320

考虑派生类定义可能位于标头中，而其实现可能位于源文件中。标头通常包含在多个位置（“翻译单元”）中，每个位置都将独立编译。如果您没有声明覆盖，那么编译器将不会在任何其他翻译单元中知道它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:08:55.973

在基类中制作纯函数的目的`virtual`是派生类***必须覆盖***它并提供自己的实现。
请注意，类中存在纯虚函数使该类成为***[抽象类](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr142.htm)***。简单来说，类充当创建更具体类的接口。不能创建抽象类的对象。

如果你不重写派生类中的纯虚函数，那么派生类只包含继承的基类纯虚函数，它本身也充当抽象类。一旦你的派生类是抽象的，它就不能被实例化。
因此，为了实例化您的派生类，它需要重写并因此声明纯虚函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T09:11:43.737

您可能认为编译器可以推断出您将必须提供 的实现`derived::foo()`，但`derived`也可能是一个抽象类（事实上，如果您不声明`foo()`in ，您将得到这样的结果`derived`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T09:11:34.477

`It is to override the abstraction of the base class`.

如果你不重新声明它，那么你的派生类也是一个抽象类。如果你这样做了，那么你现在有一个非抽象类型的基础。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T09:30:14.907

因为层次结构可以有更多层。

```
struct Base {
    virtual void foo() const = 0;
    virtual void bar() const = 0;
};

struct SuperBase: Base {
     virtual void bar() const override;
};

struct Concrete: SuperBase {
     virtual void foo() const override;
}; 
```

在这里，`SuperBase`不提供实现`foo`，这需要以某种方式指示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T09:33:26.813

虽然你不能用纯虚函数实例化一个类，你仍然可以像这样创建一个类：

```
class base {
public:
    virtual int foo(int) const = 0;
};

class derived : public base {
public:
};

class very_derived : public derived {
public:
    virtual int foo(int) const { return 2; }
}; 
```

派生类仍然是一个抽象类，它不能被实例化，因为它没有覆盖`foo`。在实例化类之前，您需要声明 foo 的非纯虚拟版本，即使您没有立即定义 foo。

# c# - 如何初始化接受 DropDownList 数组的构造函数？

> ID：11222850
> 
> 赞同：1
> 
> 时间：2012-06-27T09:08:08.060
> 
> 标签：c#, asp.net, .net

我没有关注如何初始化一个在数组中接受 DropDowns 名称的类构造函数，如下所示：

```
public FillDropDowns(DropDownList[] DropDownNameArray)
{
    PopulateDropDown(DropDownNameArray);
} 
```

我有一个名为 FillDropDowns 的类，其方法是 PopulateDropDown。

从我的 Web 窗体中，我想创建此类的一个实例并传递 DropDowns 的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:11:45.987

```
DropDownList[] parameter = new DropDownList[1]; // create an array of DropDownList 

parameter[0] = DropDownList1; // add DropDownList1 to the array (the reference to the drop down list you want include)

var yourClass = new FillDropDowns(parameter); // make a new instance of the class by passing the array via the constructor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:21:44.740

更改您的功能以获取下拉列表。根据您的评论，这就是您想要的。

```
public FillDropDowns(DropDownList DropDownID)
{
    PopulateDropDown(DropDownID);
} 
```

# c# - asp.net 将表格转换为excel文件

> ID：11222853
> 
> 赞同：0
> 
> 时间：2012-06-27T09:08:14.587
> 
> 标签：c#, asp.net, html-table, postback, export-to-excel

我有一个在 Page_Load 中动态创建的表，基本上在每个 PostBack 上。

我正在使用此示例代码尝试将其转换为 excel：

```
<table id="table1" runat="server"> 
            <tr> 
                <td>tes1</td> 
                <td>tes2</td> 
            </tr> 
            <tr> 
                <td>tete1</td> 
                <td>tete2</td> 
            </tr> 
 </table> 
```

后面的代码：

```
 private DataSet GetTableCellsToDataSet()
        {
          HtmlTable tb =  table1;   //table1 is the id of HTML Table
          int rowscount = table1.Rows.Count;
          int columncount = 2;

           DataTable dt=new DataTable();
          dt.Columns.Add("a1", Type.GetType("System.String"));
          dt.Columns.Add("a2", Type.GetType("System.String"));

          for (int i = 0; i < rowscount; i++)
          {
              HtmlTableCellCollection tcs = tb.Rows[i].Cells;

              DataRow dr = dt.NewRow();
              dr["a1"] = tcs[0].InnerText;
              dr["a2"] = tcs[1].InnerText;
              dt.Rows.Add(dr);
          }
          DataSet ds = new DataSet();
          ds.Tables.Add(dt);

return ds;
    } 
```

和

```
private void convertToExcel(DataSet dsBook) 
    { 
        try 
        { 

            int rows = dsBook.Tables[0].Rows.Count + 1; 
            int cols = dsBook.Tables[0].Columns.Count; 

            string ExcelFileName = Path.Combine(Request.PhysicalApplicationPath, "abcd.xls"); 
            if (File.Exists(ExcelFileName)) 
            { 
                File.Delete(ExcelFileName); 
            } 
            StreamWriter writer = new StreamWriter(ExcelFileName, false); 
            writer.WriteLine("<?xml version=\"1.0\"?>"); 
            writer.WriteLine("<?mso-application progid=\"Excel.Sheet\"?>"); 
            writer.WriteLine("<Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\""); 
            writer.WriteLine(" xmlns:o=\"urn:schemas-microsoft-com:office:office\""); 
            writer.WriteLine(" xmlns:x=\"urn:schemas-microsoft-com:office:excel\""); 
            writer.WriteLine(" xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\""); 
            writer.WriteLine(" xmlns:html=\"http://www.w3.org/TR/REC-html40/\">"); 
            writer.WriteLine(" <DocumentProperties xmlns=\"urn:schemas-microsoft-com:office:office\">"); 
            writer.WriteLine("  <Author>Automated Report Generator Example</Author>"); 
            writer.WriteLine(string.Format("  <Created>{0}T{1}Z</Created>", DateTime.Now.ToString("yyyy-mm-dd"), DateTime.Now.ToString("HH:MM:SS"))); 
            writer.WriteLine("  <Company>51aspx.com</Company>"); 
            writer.WriteLine("  <Version>11.6408</Version>"); 
            writer.WriteLine(" </DocumentProperties>"); 
            writer.WriteLine(" <ExcelWorkbook xmlns=\"urn:schemas-microsoft-com:office:excel\">"); 
            writer.WriteLine("  <WindowHeight>8955</WindowHeight>"); 
            writer.WriteLine("  <WindowWidth>11355</WindowWidth>"); 
            writer.WriteLine("  <WindowTopX>480</WindowTopX>"); 
            writer.WriteLine("  <WindowTopY>15</WindowTopY>"); 
            writer.WriteLine("  <ProtectStructure>False</ProtectStructure>"); 
            writer.WriteLine("  <ProtectWindows>False</ProtectWindows>"); 
            writer.WriteLine(" </ExcelWorkbook>"); 
            writer.WriteLine(" <Styles>"); 
            writer.WriteLine("  <Style ss:ID=\"Default\" ss:Name=\"Normal\">"); 
            writer.WriteLine("   <Alignment ss:Vertical=\"Bottom\"/>"); 
            writer.WriteLine("   <Borders/>"); 
            writer.WriteLine("   <Font/>"); 
            writer.WriteLine("   <Interior/>"); 
            writer.WriteLine("   <Protection/>"); 
            writer.WriteLine("  </Style>"); 
            writer.WriteLine("  <Style ss:ID=\"s21\">"); 
            writer.WriteLine("   <Alignment ss:Vertical=\"Bottom\" ss:WrapText=\"1\"/>"); 
            writer.WriteLine("  </Style>"); 
            writer.WriteLine(" </Styles>"); 
            writer.WriteLine(" <Worksheet ss:Name=\"MyReport\">"); 
            writer.WriteLine(string.Format("  <Table ss:ExpandedColumnCount=\"{0}\" ss:ExpandedRowCount=\"{1}\" x:FullColumns=\"1\"", cols.ToString(), rows.ToString())); 
            writer.WriteLine("   x:FullRows=\"1\">"); 

            //generate title 
            writer.WriteLine("<Row>"); 
            foreach (DataColumn eachCloumn in dsBook.Tables[0].Columns) 
            { 
                writer.Write("<Cell ss:StyleID=\"s21\"><Data ss:Type=\"String\">"); 
                writer.Write(eachCloumn.ColumnName.ToString()); 
                writer.WriteLine("</Data></Cell>"); 
            } 
            writer.WriteLine("</Row>"); 

            //generate data 
            foreach (DataRow eachRow in dsBook.Tables[0].Rows) 
            { 
                writer.WriteLine("<Row>"); 
                for (int currentRow = 0; currentRow != cols; currentRow++) 
                { 
                    writer.Write("<Cell ss:StyleID=\"s21\"><Data ss:Type=\"String\">"); 
                    writer.Write(eachRow[currentRow].ToString()); 
                    writer.WriteLine("</Data></Cell>"); 
                } 
                writer.WriteLine("</Row>"); 
            } 
            writer.WriteLine("  </Table>"); 
            writer.WriteLine("  <WorksheetOptions xmlns=\"urn:schemas-microsoft-com:office:excel\">"); 
            writer.WriteLine("   <Selected/>"); 
            writer.WriteLine("   <Panes>"); 
            writer.WriteLine("    <Pane>"); 
            writer.WriteLine("     <Number>3</Number>"); 
            writer.WriteLine("     <ActiveRow>1</ActiveRow>"); 
            writer.WriteLine("    </Pane>"); 
            writer.WriteLine("   </Panes>"); 
            writer.WriteLine("   <ProtectObjects>False</ProtectObjects>"); 
            writer.WriteLine("   <ProtectScenarios>False</ProtectScenarios>"); 
            writer.WriteLine("  </WorksheetOptions>"); 
            writer.WriteLine(" </Worksheet>"); 
            writer.WriteLine(" <Worksheet ss:Name=\"Sheet2\">"); 
            writer.WriteLine("  <WorksheetOptions xmlns=\"urn:schemas-microsoft-com:office:excel\">"); 
            writer.WriteLine("   <ProtectObjects>False</ProtectObjects>"); 
            writer.WriteLine("   <ProtectScenarios>False</ProtectScenarios>"); 
            writer.WriteLine("  </WorksheetOptions>"); 
            writer.WriteLine(" </Worksheet>"); 
            writer.WriteLine(" <Worksheet ss:Name=\"Sheet3\">"); 
            writer.WriteLine("  <WorksheetOptions xmlns=\"urn:schemas-microsoft-com:office:excel\">"); 
            writer.WriteLine("   <ProtectObjects>False</ProtectObjects>"); 
            writer.WriteLine("   <ProtectScenarios>False</ProtectScenarios>"); 
            writer.WriteLine("  </WorksheetOptions>"); 
            writer.WriteLine(" </Worksheet>"); 
            writer.WriteLine("</Workbook>"); 
            writer.Close(); 
            Response.Write("<script language=\"javascript\">" + "alert('" + "convert completed!')" + "</script>"); 
        } 
        catch (Exception ex) 
        { 
            Response.Write("<script language=\"javascript\">" + "alert('" + "error! " + ex.Message + "')" + "</script>"); 
        } 

    } 
```

当我在 aspx 页面中创建预定义表但不适用于我的动态表时，上述方法确实有效。

```
convertToExcel(GetTableCellsToDataSet()); creates the file so if I call that onClick of an asp:button it actually only displays the headers of the table (because the table gets recreated on postback). 
```

如何解决以上问题？

# struts - 以下动作映射的动作中的路径是什么意思

> ID：11222859
> 
> 赞同：2
> 
> 时间：2012-06-27T09:08:53.967
> 
> 标签：struts

以下动作映射的动作中的路径是什么意思。它是否指定了请求来自的jsp页面（search.jsp）？

```
<action-mappings>
<action path="/search"
        type="SearchAction"
        name="searchForm"
        scope="request"
        validate="true"
        input="/search.jsp">
</action>
</action-mappings> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:28:54.957

路径是指您从 HTML 或 jsp 文件中调用的操作的名称。

例如 -

```
<html:form action="Name" name="nameForm" type="example.NameForm"> 
```

相应的动作映射将类似于 -

```
<action path="/Name" type="example.NameAction" name="nameForm" input="/index.jsp">
<forward name="success" path="/displayname.jsp"/> 
```

查看此[链接](http://www.allapplabs.com/struts/struts_example.htm)以获取完整示例。

# jquery - 如何根据 Colorbox 本身加载的内容设置 Colorbox 标题？

> ID：11222866
> 
> 赞同：3
> 
> 时间：2012-06-27T09:09:22.363
> 
> 标签：jquery, colorbox, title

让我解释。我使用 Colorbox 加载 HTML 文件并将其显示在 iframe 中。HTML 文件包含`<title>`标签。是否可以使用该`<title>`标签作为 Colorbox 弹出窗口的标题？我可以使用`onComplete`事件，但如何？

**编辑：**我应该澄清代码：

父 HTML：

```
<!doctype html>
<html>
    <head>
        <title>This is parent</title>
        <script src="jquery.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('a.cb').colorbox({
                    iframe : true,
                    title  : function() { /* here goes the code */ },
                });
            });
        </script>
    </head>
    <body>
        <a class="cb" href="popup.html">Popup</a>
    </body>
</html> 
```

子 HTML：

```
<!doctype html>
<html>
    <head>
        <title>The title</title>
    </head>
<body>
    ...
</body>
</html> 
```

基本上我希望 Colorbox 显示子 HTML 代码的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:09:06.970

根据文档，可能无法实现。如果 iframed 文档与您的父文档在同一个域中，您应该能够执行以下操作：

```
$(document).ready(function(){
    $('a.cb').colorbox({
        iframe : true,
        fastIframe: false,
        onComplete: function(){
            var title = $('.cboxIframe')[0].contentWindow.document.title;
            $('#cboxTitle').text(title);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:21:41.377

很难说，但我的猜测是

```
var titleText = $(fetchedHTML).find('title').text(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T09:35:20.257

我不确定我是否很好地理解了你的问题，如果我离主题很远，请告诉我删除我的帖子:)

您可以通过函数设置颜色框标题，在该函数中您可以获得 iframe 标题并将其设置为颜色框标题

```
$("mycolorbox").colorbox({rel: 'gal', title: function(){
    var title = $( "#frame_id").contents( ).find( "title").html( );
    return 'title';
}}); 
```

我不确定代码是否完全正确，但它可能会有所帮助:)

# php - 缓存对象可以嵌套php吗？

> ID：11222867
> 
> 赞同：0
> 
> 时间：2012-06-27T09:09:22.657
> 
> 标签：php, html, caching

我有代码，我想运行它，这需要几分钟，所以我有一个加载窗口，加载完成后会显示结果并隐藏窗口。我想将所有结果缓存在一个单独的文件中，然后重定向到该文件。我使用 ob_start，但是我不想缓存加载窗口的代码。那么我可以在加载页面代码之前打开另一个ob start，然后使用ob_end_clean将其删除，然后仍然在脚本末尾获取其余内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:16:35.853

是的：关于 php 中 ob 缓冲的文档清楚地说明了缓冲区可以堆叠。

# ruby - 如何使用 Ruby 通过循环更改 URL 参数？

> ID：11222871
> 
> 赞同：0
> 
> 时间：2012-06-27T09:09:38.710
> 
> 标签：ruby, loops, hash, parameters, uri

我正在尝试通过循环更改此[http://www.exampleofurl.com/search?q=4&e=25;i=8&b=2](http://www.exampleofurl.com/search?q=4&e=25;i=8&b=2)的每个参数，但我得到了这个输出。

```
http://www.exampleofurl.com/search?q=changed&e=25;i=8&b=2
http://www.exampleofurl.com/search?q=4&e=changed;i=8&b=2
http://www.exampleofurl.com/search?q=4&e=25;i=changed&b=2
http://www.exampleofurl.com/search?q=4&e=changed5;i=8&b=changed 
```

当我的参数为空时，我得到这个奇怪的输出。

```
search?changedqchanged=changed4changed&changedechanged=changed2changed5changed;changedichanged=changed8changed&changedbchangedochangedochanged=changed 
```

这是我的代码。

```
require 'uri'
url = "http://www.exampleofurl.com/search?q=4&e=25;i=8&b=2"
uri = URI.parse(url)

params = {}
t = "changed"

q = uri.query
p = q.split(/[&;]/) if q != nil

p.each do |part|
   k,v = part.split('=', 2)
   params[k] = v

   t.each do |tr|
       uri.query = q.gsub(params[k], tr)
   end
end 
```

有人可以告诉我哪里出了问题，最有效的方法是什么？

我想要这样的输出。

```
q=changed&e=25;i=8&b=2
q=4&e=changed;i=8&b=2
q=4&e=25;i=changed&b=2
q=4&e=25;i=8&b=changed 
```

提前致谢。

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:30:41.513

对于查询部分的工作，我认为您可以执行以下操作：

```
CGI::parse(uri.query).inject({}) { |hash, (key, value)| hash[key] = "changed"; hash} 
```

这应该导致像这样的哈希

```
{"q"=>"changed", "e"=>"changed", "i"=>"changed", "b"=>"changed"} 
```

如果你把它加入到你解析的 URI 中，你应该完成。

# jquery - jquery next with ol

> ID：11222878
> 
> 赞同：2
> 
> 时间：2012-06-27T09:10:02.773
> 
> 标签：jquery, jquery-ui

我想在单击链接时切换订单列表

```
<li id="1" style="display: list-item;">
    <div class='group'>
        <div style='float:left;'>
            <span>&nbsp;</span>
            **<a class='expand' href='#'>Group 1</a>**
        </div>
        <div style='float:right;'>
            <a href='#'>Edit</a>
            <a href='#'>Delete</a>
        </div>
        <div style='clear:both;'></div>
    </div>
    **<ol style='display:none;'>**
        <li id="2" style="display: list-item;">
            <div class='patent'>
                <div style='float:left;'>
                    <span>&nbsp;</span>
                    <a href='#'>Patent 1</a>
                    <em>The description of patent 1</em>
                </div>
                <div style='float:right;'>
                    <a href='#'>Edit</a>
                    <a href='#'>Delete</a>
                </div>
                <div style='clear:both;'></div>
            </div>
        </li>
        <li id="3" style="display: list-item;">
            <div class='patent'>
                <div style='float:left;'>
                    <span>&nbsp;</span>
                    <a href='#'>Patent 2</a>
                    <em>The description of patent 2</em>
                </div>
                <div style='float:right;'>
                    <a href='#'>Edit</a>
                    <a href='#'>Delete</a>
                </div>
                <div style='clear:both;'></div>
            </div>
        </li>
    **</ol>**
</li> 
```

当我在粗体链接上单击时，我希望切换 ol。同一个类可以有很多 ols 和很多链接。

我的尝试是

```
<script>
$(document).ready(function(){
    $('.expand').click(function() {
        $(this).closest('ol').slideToggle('slow');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:11:39.597

你应该做

```
$(document).ready(function(){
    $('.expand').click(function() {
        $(this).closest('li').find('ol').slideToggle('slow');
    });
}); 
```

附注：如果我没记错的话，数字不是有效的身份证件

# java - 提交后刷新 JFrame

> ID：11222880
> 
> 赞同：0
> 
> 时间：2012-06-27T09:10:15.380
> 
> 标签：java, swing, netbeans

我有一个 JForm/`JFrame`我想在用户提交表单后刷新或重新加载。但窗口不关闭。只有刷新 JForm 才是`repaint()`正确的解决方案或其他任何解决方案。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:45:34.730

不，不。使用 repaint() 是一种不好的做事方式。您可以使用对话框或打开另一个 JFrame（在关闭/使用当前的 setVisible(false) 之后）等。扩展您的问题，我可以为您提供更好的帮助。

**编辑**

您可以在按下提交按钮后调用更新表单的方法。如果需要，您可以在最后使用 repaint()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:55:00.100

如果您在提交后添加新组件或从 Jframe 中删除组件

您可以使用“重新验证（）；” 与组件示例

```
actionPerformed(ActionListener a)
{
JButton b=new JButton("xyz");
frame.add(b);
b.revalidate();

} 
```

# android - 在没有 onCreate {} 的情况下启动意图

> ID：11222882
> 
> 赞同：0
> 
> 时间：2012-06-27T09:10:18.377
> 
> 标签：android, android-intent, oncreate

我创建了一个扩展 Gallery 的类。超类中没有 onCreate() 方法，我无法运行我的意图。这是我的示例代码：

```
 this.setOnItemClickListener(new AdapterView.OnItemClickListener() {

 @Override
 public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
 Intent intent = new Intent(v.getContext(), ClassName.class);
 startActivity(intent);
}} 
```

以下尝试也失败了：

```
Intent intent = new Intent(ThisClassName.this, ClassName.class);
startActivity(intent); 
```

任何建议将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:11:58.833

实际上，`startActivity();`是**Activity**类的方法，要运行此方法，您必须`Context of Activity`或`Reference of Activity`，如果没有 Activity 引用，您不能在 Activity 范围之外的其他类中运行此方法。

尝试，

```
<Activity_Name>.this.startActivity(intent); 
```

或者

```
mContext.startActivity(intent); 
```

这里**mContext**是您的 Activity 类的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:13:01.497

正如您所写，您想启动一个`Activity`，如果您的类不继承自`Activity`（我猜，因为否则您将不得不实现`onCreate()`），您将根本无法用 Intent 启动它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:18:51.557

如果您的类是主要活动的扩展，并且您想从类的主体中调用其他活动，只需在其他类中创建一个方法，然后通过创建该类的实例来调用该方法并调用方法。

由于它们具有相同的性质，这将起作用，但请记住在 try 和 catch 方法中调用方法，否则您可能会遇到一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:33:52.070

`Gallery`是一种`View`类型，如果你会看到它`Hirerchy`，你会看到它的`super`类是`View`并且视图没有任何 onCreate 方法

使用你的`CustomGallery`

您可以从 xml 或代码中使用它

```
<com.mypackage.CustomGallery >
android:id...

 </com.mypackage.CustomGallery> 
```

# web-traffic - 衡量我网站的流量

> ID：11222883
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:10:21.220
> 
> 标签：web-traffic

我有一个简单的网站。现在我需要测量我网站的流量。我需要采取一些策略来改善交通。谁能建议我如何衡量流量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:17:05.377

谷歌分析相当出色。

[http://www.google.com/analytics/](http://www.google.com/analytics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:12:34.247

一个简单的解决方案是添加一个计数器。它甚至不一定需要可见，但您可以看到有多少人访问了您的页面。根据您网站的内容，您可以自己编写，否则，只需搜索“命中计数器”。

# c# - Regex.Match C#中的双辅音

> ID：11222891
> 
> 赞同：6
> 
> 时间：2012-06-27T09:10:37.653
> 
> 标签：c#, regex

我有很多单词的列表。我需要的是找到所有以“ing”、“ed”、“ied”结尾的单词，并且之前只有一个元音和双辅音：应该匹配单词：begged、slamming、zagging。不匹配帮助（“lp”-不是双辅音）

```
\w*[^aoyie][aoyie]([^aoyie])\1(ed|ing|ied) 
```

它在 RegexPal.com 上运行，但在 C# 中不起作用（不匹配任何单词，在列表中返回 0 个单词）

我的代码：

```
List<Book_to_Word> allWords = (from f in db2.Book_to_Words.AsEnumerable() select f).ToList();

List<Book_to_Word> wordsNOTExist = (from f in allWords
                        where Regex.IsMatch(f.WordStr, @"^(\w*[^aoyie]+[aoyie]([^aoyie])(ed|ing|ied))$")
                                    select f).ToList(); 
```

当我不使用 \1 时工作。但返回带有单个辅音的单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:21:42.103

尝试放松一下条件：

```
@"^[a-z]*[aoyie]([^aoyie])\1(ed|ing|ied)$" 
```

您当前的正则表达式将要求单词在双辅音和后缀之前至少有 3 个字符。所以“begged”和“zagging”是不匹配的。

但是，在组中看到“y”而缺少“u”（例如“mugged”）有点奇怪。你可能想仔细检查一下。而且我对“ied”之前的双辅音有点怀疑，但我会把它留在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:54:40.923

感谢 nhahtdh。问题出在括号外。当我删除它们时，它起作用了：

```
Regex.IsMatch(f.WordStr, @"^\w*[^aoyieu]+[aoyieu]([^aoyieu])\1(ed|ing|ied)$") 
```

# asp.net - 将 Culture.DateTimeFormat 转换为 HighChart 的 xDateFormat 字符串

> ID：11222896
> 
> 赞同：4
> 
> 时间：2012-06-27T09:10:55.687
> 
> 标签：asp.net, highcharts

我已经在我们的 asp.net 应用程序中实现了 highcharts，并按照下面的带有 dateformat 属性的设置工具提示。

```
tooltip: {
             xDateFormat: '%d/%m/%Y %H:%M:%S' 
             //xDateFormat: '<% = _DateFormat %>'                    
          } 
```

现在我想根据最终用户的文化设置显示它，并为此制作一个功能和属性，并按照下面的方式在页面加载中设置它

```
 _dateFormat = "%d/%m/%Y %H:%M:%S";// 
  //_dateFormat = General.GetUserCulture().DateTimeFormat ; how to convert to above format 
```

在上述情况下，我如何将文化的 datetimeformat 转换为 highchart 的 datetimeformat 字符串？

**更新**

对于 HighChart 以下是格式模式列表

*   %a：工作日很短，比如“周一”。
*   %A：工作日长，例如“星期一”。
*   %d：两位数的月份日期，01 到 31。
*   %e：一个月中的第几天，从 1 到 31。
*   %b：短月，如“Jan”。
*   %B：长月，例如“一月”。
*   %m：两位数的月份编号，01 到 12。
*   %y：两位数年份，如 09 表示 2009 年。
*   %Y：四位数年份，如 2009 年。
*   %H：两位数小时，24 小时格式，00 到 23。
*   %I：两位数小时，12h 格式，00 到 11。
*   %l（小写 L）：12h 格式的小时，从 1 到 11。
*   %M：两位数分钟，00 到 59。
*   %p：大写 AM 或 PM。
*   %P：小写 AM 或 PM。
*   %S：两位数秒，00 到 59

因此，如果我将使用替换（根据@Ruchit 此处的答案），那么在我无法达到我的预期之后，因为如果您考虑下面的代码，那么一种格式是正确的，而另一种格式是错误的

```
_dateFormat = format.ShortDatePattern + " " + format.LongTimePattern;
                _dateFormat = _dateFormat.Replace("yyyy", "%Y")
                                         .Replace("yy", "%y")
                                         .Replace("MMMM", "%B")
                                         .Replace("MMM", "%b")
                                         .Replace("MM", "%m")
                                         .Replace("M", "%m")
                                         .Replace("dddd", "%A")
                                         .Replace("ddd", "%a")
                                         .Replace("dd", "%d")
                                         .Replace("HH", "%H")
                                         .Replace("mm", "%M")
                                         .Replace("ss", "%S"); 
```

所以我想为此找到适用于所有格式的通用解决方案。如果有人发现有用的东西，请帮助我！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:43:05.113

您可以使用以下代码获取当前线程文化的字符串格式。

```
 System.Globalization.DateTimeFormatInfo format =
         System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat;
string strFormat = format.ShortDatePattern + " " + 
         format.ShortTimePattern; 
```

完成此操作后，您将拥有日期时间格式字符串，例如`M/d/yyyy h:mm tt`. 一旦你得到这个，你可以使用字符串的替换功能。你可以使用`strFormat.Replace("M","%m").Replace("d","%d")`等等。
您可以在设计页面上将此变量与内联代码一起使用。

# java - 使用谷歌 API 在 jsp 页面上显示流程图的最佳方式

> ID：11222897
> 
> 赞同：1
> 
> 时间：2012-06-27T09:10:57.180
> 
> 标签：java, jsp, servlets

我有一个关于 google api 流程图的问题。我想在一个 jsp 页面上添加几个流程图。在我的流程图控制器中，我遍历了从数据库中获取的列表，并且我想为 foreach 制作一个流程图。

将其添加到模型并在 jsp 页面上显示的最佳方法是什么？

流程图代码是这样的：

```
 <script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Company Performance'
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

该代码但在for循环中填充了我的值，但我不知道如何将其提供给模型？（由于字符串不起作用，我只是尝试过：D）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:17:31.610

用于在一页中显示 2 个图表的代码。您可以调整逻辑并满足您的要求。 [文档](https://developers.google.com/chart/interactive/docs/quick_start)

```
 // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart1);
      google.setOnLoadCallback(drawChart2);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart1() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
      }
       function drawChart2() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div2'));
        chart.draw(data, options);
      }

    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div1"></div>
    <div id="chart_div2"></div>
  </body>
</html> 
```

# ios - iOS 本机应用程序查找故事链接到的内容：状态、照片等

> ID：11222914
> 
> 赞同：1
> 
> 时间：2012-06-27T09:11:47.287
> 
> 标签：ios, facebook-graph-api

故事类型的新闻提要中的条目似乎除了在文本中之外没有识别出它们是关于什么的，所以除了查看消息中的作品之外，我无法以编程方式判断它是否与他们自己的状态、照片等有关。

有没有办法识别故事所指的内容（这样我就可以发表有意义的帖子，比如“简评论了她自己的状态——“我的新 iPad 非常适合阅读杂志”）

我被卡住了，因为我知道我是否应该获取帖子、照片或其他任何东西。

提前致谢

Ian sundialSoft 在相当潮湿的苏格兰。

# android - 在Android中左右对齐两个按钮布局

> ID：11222916
> 
> 赞同：52
> 
> 时间：2012-06-27T09:12:03.857
> 
> 标签：android

我想将两个按钮与线性布局对齐，一个在左侧，一个在右侧，就像图像库上的下一个和上一个按钮一样。我试图对齐它们，但它不起作用。

XML 布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@android:color/white"
    android:gravity="bottom" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="prev"
            android:layout_alignParentRight="true" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="next" />

    </LinearLayout>

</LinearLayout> 
```

实际输出：

[![](../Images/c8db324d728e49d1e0a0c7ad4c3fc775.png)](https://i.stack.imgur.com/DvFrV.png)

预期输出：

[![](../Images/88e442773e93a39497c5476227627433.png)](https://i.stack.imgur.com/aLKpf.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-27T09:15:43.990

使用`RelativeLayout`. 在那里你可以设置`android:layout_alignParentLeft`和`android:layout_alignParentRight`。这应该适合你：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@android:color/white"
    android:gravity="bottom" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="prev"
            android:layout_alignParentLeft="true" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="next"
            android:layout_alignParentRight="true"/>

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-17T07:36:00.880

使用线性布局

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1">

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Prev"/>
        </LinearLayout>

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Next"/>

</LinearLayout> 
```

使用相对布局

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Prev"
            android:layout_alignParentLeft="true"/>

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Next"
            android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T09:20:51.743

`LinearLayout`在您的;中使用相对布局

也添加 `android:layout_alignParentLeft="true"`到“上一个”`Button`

和`android:layout_alignParentRight="true"`“下一步”`Button`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:gravity="bottom"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"    <---- ADD this prop
            android:text="prev" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"    <----- ADD this prop
            android:text="next" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T09:17:33.883

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="right" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Button" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/button1"
            android:orientation="vertical" >

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </LinearLayout>
    </RelativeLayout>

</LinearLayout> 
```

这个想法是，创建一个 RelativeLayout 作为容器并放置第一个 Button 然后将其粘贴到父视图的右侧。之后，**在**LinearLayout 中添加另一个按钮，并将此 LinearLayout 设置在第一个 Button 的左侧。

这是结果。

![在此处输入图像描述](../Images/ca99006ae8c36b28434e3640067bc7d3.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-27T09:26:31.993

您的布局 xml 应如下所示

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:background="#fff">

 <RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000"
    android:layout_gravity="bottom" >
    <Button      
       android:id="@+id/button1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentLeft="true"
       android:text="Pre" />

   <Button
      android:id="@+id/button2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:text="Next" />
</RelativeLayout>
  </RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-21T13:38:42.593

我想，最简单的解决方案是在你的内部 LinearLayout 中使用 View。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="prev"/>

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="next"/>

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-27T09:16:09.630

使用 a`RelativeLayout`而不是 a您可以在每个按钮上`LinearLayout`添加标签`android:layout_alignParentRight="true"`和。`android:layout_alignParentLeft="true"`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-27T09:29:56.310

您可以像这样使用RelativeLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="prev" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="next" />
    </RelativeLayout>

</LinearLayout> 
```

（我在屏幕截图中使用了灰色而不是白色） ![布局](../Images/28203c44c6d5ce1fe4d59d7fef24db75.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-25T05:52:23.587

使用 FrameLayout 并在每个按钮中添加 layout_gravity 属性

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-19T05:25:41.173

做这样的事情肯定会帮助你

```
<?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                      android:orientation="vertical"
                      android:layout_width="match_parent"
                      android:layout_height="match_parent"
        >
            <TextView android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:text="@string/Linear"

                      android:textSize="35dp"
                      android:layout_margin="90dp"

            />

            <LinearLayout
                    android:id="@+id/linearLayout1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/black">

                <Button
                        android:id="@+id/button1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Relative"
                        />

                <Button
                        android:id="@+id/button2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="200dp"
                        android:text="Constraint" />

            </LinearLayout>

        </LinearLayout> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-19T06:19:26.370

## **使用 margin_Start 和 End 分隔布局中的按钮**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:tools="http://schemas.android.com/tools" android:orientation="vertical"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
    >

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="-:Linear Layout:-"
              android:textSize="35sp"
              android:layout_gravity="center"
              android:layout_marginTop="250dp"
              tools:ignore="HardcodedText"/>

        <LinearLayout
                android:id="@+id/linear2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginTop="90dp">

        <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Relative"
                tools:ignore="ButtonStyle,HardcodedText"/>

        <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginStart="200dp"
                android:text="Constraint"
                tools:ignore="ButtonStyle"
        />
        </LinearLayout>
    </LinearLayout>
    [enter image description here][1]

      [1]: https://i.stack.imgur.com/NMYj2.png 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-06-06T11:39:42.017

> 为了获得更好的性能：

最好在线性布局中放置左右两个视图和一个视图，而不是相对布局。使用下面的代码，它还将删除视图的嵌套....从性能角度来看它会很好：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="prev" />

        <TextView android:text="Hi its working"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="next" />

    </LinearLayout> 
```

[![在此处输入图像描述](../Images/8f7da2c9dd55b28f9ac70d26d7fb8faf.png)](https://i.stack.imgur.com/fiXMk.png)

# java - Java 的显着性能提升

> ID：11222918
> 
> 赞同：0
> 
> 时间：2012-06-27T09:12:12.817
> 
> 标签：java

我试图在网上找到一些关于 Java 自 2002 年以来改进方面的重大改进的论文，但我找不到任何东西。有人可以指出我到正确的地方，但请不要说去太阳网站。我去过那里，我真的找不到任何材料可以讨论与早期版本相关的这些改进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T09:17:54.237

[Java SE 6 性能白皮书](http://java.sun.com/performance/reference/whitepapers/6_performance.html)有一个非常详细的Java 6 中引入的性能改进列表，包括基准测试。

对于 Java 7，有一个[更短的文档](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html)，它没有任何基准。

如果这些不是您想要的，您应该更好地描述您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:21:01.307

维基百科页面[Java 版本历史记录](http://en.wikipedia.org/wiki/Java_version_history)提到了性能改进，是一个很好的起点

# svn - SVN：如何在不更新的情况下查看最新修订更新（显示日志）？

> ID：11222919
> 
> 赞同：1
> 
> 时间：2012-06-27T09:12:13.170
> 
> 标签：svn, tortoisesvn

要将项目更新到 TortoiseSVN 中的最后一次审查，我会：“SVN 更新”。
有没有办法在不必真正更新我的本地项目的情况下查看有关新修订的注释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:19:37.657

*Show log...*显示最新的提交。不仅仅是您上次更新之前的最新提交。默认情况下，它会执行您想要的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:43:10.657

您可以`show log`在表单上下文菜单中使用，然后您可以`compare with working copy`使用日志窗口的右侧上下文菜单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T14:06:41.987

**TortoiseSVN：**

**右键单击**工作副本文件夹/文件->“**检查修改**”->“**检查存储库**”

您将看到每边更改的所有文件（工作副本或存储库当前修订号和 svn 状态）

通过双击每个条目，您甚至可以预览 svn 更新的结果

**命令行客户端：**

利用

```
svn log <SERVERURL> 
```

为您提供服务器上的版本历史记录

```
svn log <PATH_TO_WORKINGCOPY> 
```

为您提供直到您签出或提交的最新版本的日志消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:18:11.420

您可以在 Tortoise SVN 中使用 Revision Graph。有关详细信息，请参阅此网址。 [http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-revgraph.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-revgraph.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T07:33:36.133

右键单击工作副本中的特定文件夹/文件，转到 Tortoise svn--->SVn Showlog。你可以在那里看到。

# json - Json.Net 自定义序列化

> ID：11222920
> 
> 赞同：0
> 
> 时间：2012-06-27T09:12:19.890
> 
> 标签：json, serialization, json.net

我正在序列化一个对象集合，其中包含一个名为动态属性的字典。

发出的默认 Json 如下所示：

```
[{"dynamicProperties":{"WatchId":7771,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5580"}},
{"dynamicProperties":{"WatchId":7769,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5574"}},
{"dynamicProperties":{"WatchId":7767,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5572"}},
{"dynamicProperties":{"WatchId":7765,"Issues":0,"WatchType":"y","Location":"Equinix Source","Name":"highlight_SM"}},
{"dynamicProperties":{"WatchId":8432,"Issues":0,"WatchType":"y","Location":"Test Devices","Name":"Cisco1700PI"}}] 
```

我想生成如下所示的 Json：

```
[{"WatchId":7771,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5580"},
{"WatchId":7769,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5574"},
{"WatchId":7767,"Issues":0,"WatchType":"x","Location":"Equinix Source","Name":"PI_5570_5572"},
{"WatchId":7765,"Issues":0,"WatchType":"y","Location":"Equinix Source","Name":"highlight_SM"},
{"WatchId":8432,"Issues":0,"WatchType":"y","Location":"Test Devices","Name":"Cisco1700PI"}] 
```

从阅读 Json.Net 文档看来，我可以为我的班级构建一个 CustomContractResolver，但我找不到有关如何进行此操作的任何详细信息……任何人都可以阐明我应该研究的方向吗？

我要序列化的类如下。

我需要一个允许动态样式行为并且还可以通过 WCF 序列化和反序列化的类。

```
 [DataContract]
public class SerializableDynamicObject : IDynamicMetaObjectProvider
{
    [DataMember]
    private IDictionary<string, object> dynamicProperties = new Dictionary<string, object>();

    #region IDynamicMetaObjectProvider implementation
    public DynamicMetaObject GetMetaObject(Expression expression)
    {
        return new SerializableDynamicMetaObject(expression,
            BindingRestrictions.GetInstanceRestriction(expression, this), this);
    }
    #endregion

    #region Helper methods for dynamic meta object support
    internal object setValue(string name, object value)
    {
        dynamicProperties.Add(name, value);
        return value;
    }

    internal object getValue(string name)
    {
        object value;
        if (!dynamicProperties.TryGetValue(name, out value))
        {
            value = null;
        }
        return value;
    }

    internal IEnumerable<string> getDynamicMemberNames()
    {
        return dynamicProperties.Keys;
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T21:04:38.830

实现 ISerializable

```
[DataContract]
public class SerializableDynamicObject : IDynamicMetaObjectProvider, ISerializable
{
    [DataMember]
    private IDictionary<string, object> dynamicProperties = new Dictionary<string, object>();

    #region IDynamicMetaObjectProvider implementation
    public DynamicMetaObject GetMetaObject(Expression expression)
    {
        return new SerializableDynamicMetaObject(expression,
            BindingRestrictions.GetInstanceRestriction(expression, this), this);
    }
    #endregion

    #region Helper methods for dynamic meta object support
    internal object setValue(string name, object value)
    {
        dynamicProperties.Add(name, value);
        return value;
    }

    internal object getValue(string name)
    {
        object value;
        if (!dynamicProperties.TryGetValue(name, out value))
        {
            value = null;
        }
        return value;
    }

    internal IEnumerable<string> getDynamicMemberNames()
    {
        return dynamicProperties.Keys;
    }
    #endregion

    #region ISerializable Members

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        foreach (var key in dynamicProperties.Keys)
        {
            info.AddValue(key.ToString(), dynamicProperties[key]);
        }
    }

    #endregion
} 
```

现在在一个小控制台应用程序中测试这段代码......

```
 static void Main(string[] args)
    {
        SerializableDynamicObject obj1 = new SerializableDynamicObject();
        obj1.setValue("WatchId", 7771);
        obj1.setValue("Issues", 0);
        obj1.setValue("Location", "sample location1");
        obj1.setValue("Name", "sample name 1");

        SerializableDynamicObject obj2 = new SerializableDynamicObject();
        obj2.setValue("WatchId", 7771);
        obj2.setValue("Issues", 0);
        obj2.setValue("Location", "sample location1");
        obj2.setValue("Name", "sample name 1");

        SerializableDynamicObject obj3 = new SerializableDynamicObject();
        obj3.setValue("WatchId", 7771);
        obj3.setValue("Issues", 0);
        obj3.setValue("Location", "sample location1");
        obj3.setValue("Name", "sample name 1");

        SerializableDynamicObject[] dictArray = new
        SerializableDynamicObject[] { 
            obj1, obj2, obj3
        };

        Newtonsoft.Json.JsonSerializer ser = new Newtonsoft.Json.JsonSerializer();
        ser.Serialize(Console.Out, dictArray);
} 
```

这是程序的输出：

[{"WatchId":7771,"Issues":0,"Location":"sample location1","Name":"sample name 1"},{"WatchId":7771,"Issues":0,"Location" :"sample location2","Name":"sample name 2"},{"WatchId":7771,"Issues":0,"Location":"sample location3","Name":"sample name3"}]

# c# - 从模态框重定向到非模态页面

> ID：11222921
> 
> 赞同：0
> 
> 时间：2012-06-27T09:12:26.080
> 
> 标签：c#, sharepoint, modal-dialog

我有一个通过单击超链接打开的模态框。

在模态框中，我填写了用于创建新站点的信息。当我单击“创建项目”按钮时，我希望模式框关闭并将页面重定向到新站点。

我试过 Response.Redirect(url); 但这将在模态框中打开新站点。

我该如何解决这个问题？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:15:09.147

父页面可以检索“回调”参数，因此我们可以接收此令牌并重定向。

也许这个解决方案将帮助您：

[http://www.chakkaradeep.com/post/Using-the-SharePoint-2010-Modal-Dialog.aspx](http://www.chakkaradeep.com/post/Using-the-SharePoint-2010-Modal-Dialog.aspx)

# localhost - 如何在本地主机上测试 openshift 应用程序

> ID：11222924
> 
> 赞同：19
> 
> 时间：2012-06-27T09:12:39.270
> 
> 标签：localhost, openshift

我最近开始使用 Openshift，我想知道在将应用程序上传到 openshift 之前，是否有办法在本地主机上部署（测试）应用程序。问题是每次我对代码进行更改时，都需要一些时间将其推送到 openshift 并检查它是否有效。

例如，Google 应用程序引擎 SDK（用于 Eclipse）包括一个 Web 服务器应用程序（应用程序引擎模拟器），它允许您在部署到 google 之前在本地测试您的应用程序。

thnx Fotis

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T18:35:50.560

实际上有几个选项（假设您正在创建 java 项目）：

1) 将其部署在本地 jboss as7 上：这是完全有效的，因为 OpenShift 上提供的运行时与您可以在本地/在托管环境中运行的运行时没有任何不同。OpenShift 特有的是部署过程。它基本上是一个 git push，它在 PaaS 上触发一个 maven 构建。

2) 使用 rpms/liveCD：OpenShift 也可用作 linux rpm 包和虚拟机设备（您可以使用 virtualbox、vm player 等运行）。您可以在此处找到更多详细信息：http: [//blog.jebpages.com/archives/run-openshift-origin-from-livecd-and-make-it-stick/](http://blog.jebpages.com/archives/run-openshift-origin-from-livecd-and-make-it-stick/)和此处：[https ://openshift.redhat.com /community/wiki/build-your-own-paas-from-the-openshift-origin-livecd-using-liveinst](https://openshift.redhat.com/community/wiki/build-your-own-paas-from-the-openshift-origin-livecd-using-liveinst)

3) 远程调试在 OpenShift 上运行的应用程序：您可以在此处找到详细信息： [https ://community.jboss.org/en/tools/blog/2012/06/27/deploy-from-eclipse-to-轻而易举地打开换档](https://community.jboss.org/en/tools/blog/2012/06/27/deploy-from-eclipse-to-openshift-in-a-breeze)

# javascript - x.lastChild.nodeValue

> ID：11222930
> 
> 赞同：0
> 
> 时间：2012-06-27T09:13:07.230
> 
> 标签：javascript, html

```
<html>
   <head>
      <script type="text/javascript" src="jQuery.js">
      <script type="text/javascript">
          x=document.getElementByTagName("p");
          document.write(x.lastChild.nodeValue);
      </script>
   </head>
   <body>
      <p id="intro">Hello World 1!</p>
      <p id="intro">Hello World 2!</p>
      <p id="intro">Hello World 3!</p>
   </body>
</html> 
```

为什么上面的代码不起作用。我想显示 [Hello World 3!] 通过使用语句 documetn.write(x.lastChild.nodeValue()); 提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:23:12.327

您的代码中有几个错误：

*   在 HTML 完成加载之前执行 JavaScript。结果，`<p>`在您要查询它们时不存在。

简单的解决方案是将您的`<script>`标签移动到 HTML 页面的底部。

*   该命令是`document.getElementsByTagName()`（而不是`document.getElementById()`- 注意添加的“s”）并返回一个数组。

所以这里正确的语法是这样的：

```
x = document.getElementsByTagName("p");
x = x[ x.length - 1 ]; 
```

*   为什么要使用`document.write()`？这会在脚本标签的位置插入文本。

因此，对于调试，最好使用`console.log()`or `alert()`。例如，在生产环境中，您会得到一个结果`<div>`。

所以最后你的代码可能看起来像这样才能工作：

```
<html>
   <head>
      <script type="text/javascript" src="jQuery.js">
   </head>
   <body>
      <p id="intro">Hello World 1!</p>
      <p id="intro">Hello World 2!</p>
      <p id="intro">Hello World 3!</p>
      <hr>
      <div id="result"></div>
      <script type="text/javascript">
          x=document.getElementsByTagName("p");
          x = x[ x.length - 1 ];

          document.getElementById( 'result' ).innerHTML = x.nodeValue;
      </script>
   </body>
</html> 
```

# osgi - 涉及 OSGI 的开销

> ID：11222933
> 
> 赞同：0
> 
> 时间：2012-06-27T09:13:15.393
> 
> 标签：osgi, overhead

OSGI 是当今的流行语。它具有松耦合、可重用性等许多优点。但我想知道我必须在我的项目中使用的 OSGI 是否涉及任何开销。它是否会影响速度或任何其他类型的开销。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:59:13.017

没有真正的开销。OSGi 被设计为在内存非常有限的环境中工作，它实际上可以提高执行速度，因为搜索每个加载请求的类空间更小。

天真的开发人员总是有可能通过做一些愚蠢的事情来搞砸性能，但任何环境都是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:41:14.397

使用 OSGi 的最大负面生产影响是由于使用不同的类加载器加载多个版本的类而需要的 PermGen 空间的增加。除非使用 JRockit（根据需要从 OS 分配），最大 PermGen 大小在 JVM 启动时是固定的，如果有类加载器泄漏（很容易收集），则很难清除，这可能使其成为一种有限的资源。

没有实质性的性能影响。知道在极端情况下会发生什么可能会有一些认知负担——例如，通过不同类加载器加载的“相同类”的实例将导致它们具有不同的类型（`instanceof`在比较返回 true 的情况下`obj.getClass().getName()`返回 false）——但是性能不会受到影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:38:54.330

在典型的 OSGi 环境中，您将拥有捆绑类加载器和 OSGi 服务，您可能会怀疑它们会影响性能。捆绑类加载器只会看到较小的类空间，因此它不应该比普通的类加载器慢。在某些情况下，它可能会像 Neil 写的那样更快。OSGi 服务也不应该影响性能。基本上，它们只是为接口查找 Impl 类的一种方式。因此，一旦您解决了 Impl，它只是一个没有开销的方法调用。没有序列化，也没有涉及代理。

# html - html中的视频屏蔽

> ID：11222935
> 
> 赞同：0
> 
> 时间：2012-06-27T09:13:28.453
> 
> 标签：html, video, svg

我们如何用可用的 SVG 屏蔽 html 中的视频？

我尝试使用以下代码，但它不会在 chrome 中显示？

```
<video id="video_target" src="oceans-clip.ogg" type="video/ogg" autoplay></video>
<svg>
   <mask id="video_mask" maskUnits="userSpaceOnUse">
       <text x="300" y="190">VIDEO</text>
   </mask>
</svg> 
```

谁能回答如何在 chrome 中显示 SVG 蒙版视频？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:18:47.267

抱歉，目前只有 webkit 浏览器支持 HTML5 视频屏蔽。您可以使用一些 javascript 来解决此问题，例如这里描述的这种色度键效果：[https ://developer.mozilla.org/En/Manipulating_video_using_canvas](https://developer.mozilla.org/En/Manipulating_video_using_canvas)

但是对于 HTmL5 画布，你就不走运了！

# ruby-on-rails - 如何在 Rails 中测试数据库调用的次数

> ID：11222942
> 
> 赞同：3
> 
> 时间：2012-06-27T09:13:43.727
> 
> 标签：ruby-on-rails, database, performance, unit-testing, rspec

我正在 Rails 中创建一个 REST API。我正在使用 RSpec。我想尽量减少数据库调用的数量，所以我想添加一个自动测试来验证作为某个操作的一部分执行的数据库调用的数量。有没有一种简单的方法可以将它添加到我的测试中？我正在寻找的是某种方法来监视/记录由于单个 API 调用而对数据库进行的调用。如果这不能用 RSpec 完成，但可以用其他一些测试工具完成，那也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:05:54.910

Rails 3 中最简单的事情可能是挂钩到通知 API。

此订阅者

```
class SqlCounter< ActiveSupport::LogSubscriber

  def self.count= value
    Thread.current['query_count'] = value
  end

  def self.count
    Thread.current['query_count'] || 0
  end

  def self.reset_count
    result, self.count = self.count, 0
    result
  end

  def sql(event)
    self.class.count += 1
    puts "logged #{event.payload[:sql]}"
  end
end

SqlCounter.attach_to :active_record 
```

将每个执行的 sql 语句打印到控制台并计算它们。然后，您可以编写规范，例如

```
expect do
  # do stuff
end.to change(SqlCounter, :count).by(2) 
```

您可能希望过滤掉一些语句，例如启动/提交事务的语句或活动记录发出的语句以确定表的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:38:54.640

您可能对使用*explain*感兴趣。但这不会是自动的。您将需要手动分析每个操作。但也许这是一件好事，因为重要的不是数据库调用的数量，而是它们的性质。例如：他们是否使用索引？

检查这个：

[http://weblog.rubyonrails.org/2011/12/6/what-s-new-in-edge-rails-explain/](http://weblog.rubyonrails.org/2011/12/6/what-s-new-in-edge-rails-explain/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-21T11:01:00.610

使用[db-query-matchers](https://github.com/brigade/db-query-matchers) gem。

```
expect { subject.make_one_query }.to make_database_queries(count: 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-06T23:49:51.667

Fredrick 的回答对我很有用，但就我而言，我还想知道每个 ActiveRecord 类的调用次数。我做了一些修改并最终完成了这个，以防它对其他人有用。

```
class SqlCounter< ActiveSupport::LogSubscriber

  # Returns the number of database "Loads" for a given ActiveRecord class.
  def self.count(clazz)
    name = clazz.name + ' Load'
    Thread.current['log'] ||= {}
    Thread.current['log'][name] || 0
  end

  # Returns a list of ActiveRecord classes that were counted.
  def self.counted_classes
    log = Thread.current['log']
    loads = log.keys.select {|key| key =~ /Load$/ }
    loads.map { |key| Object.const_get(key.split.first) }
  end

  def self.reset_count
    Thread.current['log'] = {}
  end

  def sql(event)
    name = event.payload[:name]
    Thread.current['log'] ||= {}
    Thread.current['log'][name] ||= 0
    Thread.current['log'][name] += 1
  end
end

SqlCounter.attach_to :active_record

expect do
  # do stuff
end.to change(SqlCounter, :count).by(2) 
```

# javascript - 如何在 Knockout JS 中强制 applyBindings

> ID：11222943
> 
> 赞同：1
> 
> 时间：2012-06-27T09:13:44.707
> 
> 标签：javascript, knockout.js

我想为我的页面刷新模型绑定。正如文档所说，我使用 applyBindings 方法。我还需要在页面上使用一些视图模型。为此，我在绑定时使用对象包装器 +“with”关键字：

```
ko.applyBindings({ model1: {...}, model2: {...} });

<div data-bind="with: $root.model1"> ... </div>
<div data-bind="with: $root.model2"> ... </div> 
```

在我不使用动态绑定更新之前它工作正常。如果我尝试在页面上添加其他视图模型，它不起作用:(

几段代码：

**1）工作正常：**

```
$("#b1").click(function () {
ko.applyBindings({
    myModel1: {
        MyText: ko.observable("Some text")
    },
    myModel2: {
        MyText: ko.observable("Some text")
    }
}); 
```

});

```
$("#b2").click(function () {
    ko.applyBindings({
        myModel1: {
            MyText: ko.observable("Some other text")
        },
        myModel2: {
            MyText: ko.observable("Some other text 2")
        }
    });
}); 
```

**2）不起作用：**

```
$("#b1").click(function () {
ko.applyBindings({
    myModel1: {
        MyText: ko.observable("Some text")
    }
}); 
```

});

```
$("#b2").click(function () {
    ko.applyBindings({
        myModel1: {
            MyText: ko.observable("Some other text")
        },
        myModel2: {
            MyText: ko.observable("Some other text 2")
        }
    });
}); 
```

据我了解，我们无法以这种方式绑定其他视图模型。我也尝试使用“ko.cleanNode()”方法，但它也不起作用。[存储在http://jsfiddle.net/eN8dq/2/](http://jsfiddle.net/eN8dq/2/)的完整代码示例

你能建议我如何在页面上添加额外的视图模型吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:56:02.673

尽量不要强制绑定，而是更改已绑定模型的值：

```
var viewModel = function () {
    var self = this;

    self.myModel1 = ko.observable( {
        MyText: ko.observable("Some other text")
    });

    self.myModel2 = ko.observable({
        MyText: ko.observable("Some other text 2")
    });

    self.clickAction = function() {
        //do the trick of assigning value
        self.myModel1 ({
            MyText: ko.observable("Some another text")
        });
    };
};

ko.applyBindings(new viewModel()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:56:25.453

我对这种情况的解决方案：[https ://github.com/sergun/Knockout-MultiModels](https://github.com/sergun/Knockout-MultiModels)

任何意见？

# apache - 自动附加 www 时文件夹到子域

> ID：11222948
> 
> 赞同：0
> 
> 时间：2012-06-27T09:14:30.293
> 
> 标签：apache, .htaccess, mod-rewrite

我们有一个`.htaccess`这样的文件：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\.mysite\.no [NC]
RewriteRule (.*) http://www.mysite.no/$1 [R=301,L] 
```

如果它丢失，它会自动附加`www`在 URL 前面。此外，我们必须将我们的网站扩展到我们想要调用的移动版本`m.mysite.no`。

你如何做到这一点并使 mod_rewrite 忽略`www`-rule？不幸的是，这个网站是实时的，所以我们不能做太多的测试，而且我们在现场的经验也很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:25:49.440

改变：

```
RewriteCond %{HTTP_HOST} !^www\.mysite\.no [NC] 
```

到：

```
RewriteCond %{HTTP_HOST} !^(www|m)\.mysite\.no [NC] 
```

# java - Eclipse 表单部分工具栏中的切换按钮

> ID：11222951
> 
> 赞同：2
> 
> 时间：2012-06-27T09:14:40.297
> 
> 标签：java, swt, eclipse-rcp

如何在 Eclipse UI Forms 的部分工具栏中实现如下图所示的切换按钮？我只找到向部分工具栏添加操作的示例。

![在此处输入图像描述](../Images/d552e6e9a903eb13b49336bc231c5e8b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:17:24.237

我认为关键是：`IAction.AS_CHECK_BOX`

```
 toggleBotton = new Action(Messages.toolTipMessage, IAction.AS_CHECK_BOX) {
        @Override
        public void run() {

        }
    };

    toggleBotton.setImageDescriptor(...);
    toggleBotton.setEnabled(...);
    getManagedForm().getForm().getToolBarManager().add(toggleBotton); 
```

# java - 集成 Java Webapp + drools + Guvnor 如何以及是否值得？

> ID：11222954
> 
> 赞同：15
> 
> 时间：2012-06-27T09:15:10.893
> 
> 标签：java, drools, drools-guvnor, guvnor

我计划引入 Java 规则，目前正在评估 Drools 以从应用程序中外部化（物理上和逻辑上）业务规则。

由于这些业务规则通常由业务部门负责，因此我希望业务部门通过 GUI 对规则进行必要的更改。

我在谷歌上搜索了集成 java web 应用程序 + Drools + Guvnor，但我没有得到任何结果。

我的问题：

1.  Drools 是否支持用于编辑规则的轻量级 GUI？
2.  Drools Guvnor 是一个轻量级的 GUI，还是有办法让它降级？
3.  将应用程序集成到 Guvnor 以读取规则有多容易？

关于集成 Java 应用程序 + Drools + Guvnor 的简单实现的任何其他建议都会很棒。

任何指向教程的指针也可以为我做。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-28T20:49:32.483

我正在做一些类似于你想做的事情。

> **由于这些业务规则通常由业务部门负责，因此我希望业务部门通过 GUI 对规则进行必要的更改。**

*警告警告警告！！！*一个常见的误解是，只要有 GUI，非程序员就可以使用它。那是……不是我得出的结论。它有帮助，但编程的难点不是编写代码，而是为正确的问题提出好的解决方案。我敢肯定，一些更聪明、更有技术倾向的商业人士可以与 Guvnor 一起做事，但不要指望它会成为通往神奇极乐之地的某种黄砖路。您仍然必须为业务人员提供健全的数据模型和 API，让他们可以做他们需要做的事情，但可以防止他们意外做他们不想做的事情。

> **1\. Drools 是否支持轻量级的 GUI 来编辑规则？**
> 
> **2\. Drools Guvnor 是轻量级的 GUI，还是有办法将其降级？**

好吧，“轻量级”是讨论的主题，但 Guvnor 工作得相当好，只需要一个浏览器，所以我认为没关系。

> **3\. 将应用程序集成到 Guvnor 以读取规则有多容易？**

好吧，一旦您启动并运行了 Guvnor，连接您的应用程序以使用 a`KnowledgeAgent`连接到 Guvnor 并侦听新规则更新并不是特别难。

不幸的是，一般的 Drools，特别是 Guvnor 有很多你可能必须解决的怪癖（例如，你必须分解 Guvnor WAR 文件并编辑 WEB-INF/beans.xml 中的文件来设置一个非默认配置...）。但是一旦你把它理顺了，我认为它工作得很好。

至于文档，Javadocs 有时可能有点稀疏，但该[网站](http://www.jboss.org/drools/documentation)有一些相当不错的东西，包括几本书。

总而言之，Drools 和 Guvnor 是强大的工具，但让它们发挥作用并非易事。如果你真的*需要*他们提供的东西，他们是值得的，但如果一个更简单的脚本解决方案就足够了，也值得考虑。

* * *

现在，如果您发现自己确实需要 Drools，这是我的首要建议 -*为您的数据库和规则保留单独的数据模型*。这确实意味着要编写很多无聊的转换代码，但这是值得的。

我正在开发的应用程序使用 JPA 处理数据库事务，在我们的规则中使用该数据模型并不是很愉快。几个原因：

**适合您的数据层的不一定适合 Drools，反之亦然。**

我们有一个树结构，在 JPA 中自然是`@OneToMany`与父节点列表中的子节点的关系。在 Drools 中使用列表相当痛苦，因此我们将其扁平化为一个结构，在其中插入一个`ParentNode`对象和一堆`ChildNode`对象，这样操作起来要容易得多。

**敢于重构。**

规则的数据模型也需要存在于 Guvnor 内部 - 这意味着如果您重命名实体类或类似的东西，您可能会破坏所有规则。用于规则的单独数据模型意味着您可以毫无顾虑地重构您的数据库内容。

**向他们展示他们需要看到的东西。**

数据库可以变得相当复杂，但规则通常不需要关心其中的许多复杂性。将这些复杂性暴露给人员编辑规则可能会导致很多不必要的混乱。例如，我们发现对于我们的场景，绝对没有必要将规则编写者暴露给多对多关系（事实证明这在 Drools 中处理起来非常复杂）——所以我们让它们看起来像一对多，一切都变得更加自然。

**保护。**

我们设计的大部分规则都像这个伪代码一样工作：

```
rule "Say hello to user"
when 
  user : User
then
  insert(new ShowMessageCommand("Hello " + user.getName() + "!"))
end 
```

...因此，对于每个规则包，它都明确定义了您可以插入哪些响应命令以及它们的作用。在我们的应用程序中运行规则之后，我们会根据规则挑选出插入到会话中的对象并对其进行操作（访问者[模式](https://secure.wikimedia.org/wikipedia/en/wiki/Visitor_pattern#Java_example)已被证明对于避免长链非常有用）`if instanceof`。`else if instanceof``else`

我很高兴我们这样做了，而不是让规则编写者做他们*认为*他们想对我们的 JPA 对象做的任何事情。

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T09:04:01.297

上面的答案很好解释。但是关于如何集成 Java & Drools-Guvnor 如下...

```
private static KnowledgeBase readKnowledgeBase() throws Exception {
KnowledgeAgent kagent = KnowledgeAgentFactory
        .newKnowledgeAgent( "MortgageAgent" );
kagent.applyChangeSet( ResourceFactory
        .newClassPathResource( "changeset.xml" ) );
KnowledgeBase kbase = kagent.getKnowledgeBase();
kagent.dispose();
return kbase;
}

<?xml version="1.0" encoding="UTF-8"?>
<change-set xmlns='http://drools.org/drools-5.0/change-set'
    xmlns:xs='http://www.w3.org/2001/XMLSchema-instance'
    xs:schemaLocation='http://drools.org/drools-5.0/change-set drools-change-set-5.0.xsd'>
  <add>
    <resource
  source='http://localhost:8080/guvnor-webapp/org.drools.guvnor.Guvnor/package/mortgages/LATEST'
  type='PKG' basicAuthentication='enabled' username='admin' password='admin' />

  </add>
</change-set> 
```

希望它也有帮助。

# powershell - 如何指示 PowerShell 对 XmlSchemaSet 等 .NET 对象进行垃圾收集？

> ID：11222961
> 
> 赞同：11
> 
> 时间：2012-06-27T09:15:50.513
> 
> 标签：powershell, memory-leaks, garbage-collection, xsd, xmlschemaset

我创建了一个 PowerShell 脚本，它遍历大量 XML Schema (.xsd) 文件，并为每个文件创建一个 .NET[`XmlSchemaSet`](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)对象，调用[`Add()`](http://msdn.microsoft.com/en-us/library/ecy9csyh.aspx)并向[`Compile()`](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.compile.aspx)其添加架构，并打印出所有验证错误。

该脚本可以正常工作，但是某处存在内存泄漏，如果在 100 多个文件上运行，它会消耗千兆字节的内存。

我基本上在一个循环中做的是以下内容：

```
$schemaSet = new-object -typename System.Xml.Schema.XmlSchemaSet
register-objectevent $schemaSet ValidationEventHandler -Action {
    ...write-host the event details...
}
$reader = [System.Xml.XmlReader]::Create($schemaFileName)
[void] $schemaSet.Add($null_for_dotnet_string, $reader)
$reader.Close()
$schemaSet.Compile() 
```

（可以在此要点中找到重现此问题的完整脚本：[https](https://gist.github.com/3002649) ://gist.github.com/3002649 。只需运行它，然后在任务管理器或进程资源管理器中观察内存使用量的增加。）

受一些博客文章的启发，我尝试添加

```
remove-variable reader, schemaSet 
```

我也试着拿起`$schema`从`Add()`做

```
[void] $schemaSet.RemoveRecursive($schema) 
```

这些似乎有一些效果，但仍然存在泄漏。我假设较旧的实例`XmlSchemaSet`仍在使用内存而没有被垃圾收集。

**问题：**我如何正确地教垃圾收集器它可以回收上面代码中使用的所有内存？或者更笼统地说：我怎样才能用有限的内存来实现我的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T15:38:33.537

Microsoft 已确认这是 PowerShell 2.0 中的一个错误，并且他们声明这已在 PowerShell 3.0 中得到解决。

问题是使用 Register-ObjectEvent 注册的事件处理程序没有被垃圾收集。在回复支持电话时，微软表示

> “我们正在处理 PowerShell v.2 中的一个错误。这个问题实际上是由 .NET 对象实例由于事件处理程序本身没有被释放而不再被释放的事实引起的。这个问题不再可以通过 PowerShell 重现v.3"。

据我所知，最好的解决方案是在不同级别的 PowerShell 和 .NET 之间进行接口：完全在 C# 代码中进行验证（嵌入在 PowerShell 脚本中），然后只传回`ValidationEventArgs`对象列表。[请参阅https://gist.github.com/3697081](https://gist.github.com/3697081)上的固定复制脚本：该脚本在功能上是正确的并且不会泄漏任何内存。

（感谢 Microsoft 支持帮助我找到此解决方案。）

* * *

最初，Microsoft 提供了另一种解决方法，即使用`$xyzzy = Register-ObjectEvent -SourceIdentifier XYZZY`，然后在最后执行以下操作：

```
Unregister-Event XYZZY
Remove-Job $xyzzy -Force 
```

**但是**，此解决方法在功能上不正确。在执行这两个附加语句时，任何仍在“进行中”的事件都会丢失。就我而言，这意味着我错过了验证错误，因此我的脚本输出不完整。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:24:14.883

之后`remove-variable`你可以尝试强制 GC 收集：

```
[GC]::Collect() 
```

# android - 阿尔萨港到安卓

> ID：11222963
> 
> 赞同：1
> 
> 时间：2012-06-27T09:15:57.957
> 
> 标签：android, audio, usb, alsa

我正在尝试为我的安卓手机添加 USB 音频功能。是否有可能只要我可以将所有 alsa 驱动程序添加到我的 android 系统中，然后我就可以获得我想要的？谁能给我一些关于 android 如何使用 alsa 以及如何将 alsa 内核模块添加到现有系统的提示？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:03:39.487

@James，android平台已经将alsa作为其音频子系统作为标准，您不需要自己添加。如果您有根电话或品牌电话，您可以将您的手机连接到您的网络并使用 ip 地址将其连接到您的开发系统： adb connect IP-address:5555 ，最简单的检查方法是使用 adb 连接到你的手机

你可以通过进入 /proc 目录来验证 alsa 的存在。您将找到一个名为 devices.txt 的文件。如果您 cat 设备文件，您应该在字符设备 alsa 下看到设备 ID 为 116

同样在 /proc 目录中，您应该找到另一个名为 asound 的目录。进入该目录并列出 ls -l。您会注意到所有的声音设备 - 声卡，包括您的 Android 设备使用的 SPDIF、HDMI 和声音代码。所有这些设备都由 alsa 控制。

如果您拔下 USB 设备，您会注意到 asound 目录中的列表发生了变化。Alsa 管理所有音频功能，包括在您的 android 设备上播放和录制音频。

我希望这个非技术概述能有所帮助。无论如何，如果您有更多问题，请随时提出

# wordpress - Wordpress 自定义字段值通过脚本更新

> ID：11222965
> 
> 赞同：2
> 
> 时间：2012-06-27T09:15:58.607
> 
> 标签：wordpress, custom-fields

有什么方法可以通过 php 脚本更改自定义字段（wordpress）的值？我不想通过管理面板更改值。我尝试在数据库中搜索 wp_postmeta 表，但我没有找到任何。

PS：我用的是wordpress 3.4版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:40:15.133

您可以使用`update_post_meta($post_id, $meta_key, $meta_value, $prev_value)`函数从您的 php 脚本中更新自定义字段。

[http://codex.wordpress.org/Function_Reference/update_post_meta](http://codex.wordpress.org/Function_Reference/update_post_meta)

# sql-server - SQL Server 2008 中 ID 列的最佳类型

> ID：11222968
> 
> 赞同：18
> 
> 时间：2012-06-27T09:16:05.833
> 
> 标签：sql-server, sql-server-2008

我是 SQL Server 2008 的初学者。表中有一个列，例如`StudentID`. `StudentID`将是表的 pk，它只能是整数，而且会是一个巨大的数字。

我的问题是 SQL Server 2008 中 StudentID 列的最佳类型是什么？

`bigint`? `numeric(18,0)`? 还是其他人？

多谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-27T09:19:12.980

您使用以下属性定义类型`INT`（或`SMALLINT, TINYINT, BIGINT`）的列：`IDENTITY`

```
CREATE TABLE dbo.YourTable( ID INT IDENTITY(1,1) ...... 
```

使用此设置，当将行插入表中时，SQL Server 将自动为您的表生成连续的 ID。

使用 type `INT`，从 1 开始，您可以获得**超过 20 亿**行可能的行——这对于绝大多数情况来说应该绰绰有余。有了`BIGINT`，你得到大约**922 万亿**（922 有 15 个零 - 922'0000 亿） - 对你来说足够了吗？

如果您使用`INT IDENTITY`从 1 开始，并且每秒插入一行，则需要 66.5**年**才能达到 20 亿的限制……（所以在我看来，这对于绝大多数情况*来说已经绰绰有余了！）*

如果您使用`BIGINT IDENTITY`从 1 开始的 a，并且每秒插入 1000 行，那么在达到 922 万亿极限之前，您需要令人难以置信的**2.92 亿年**......

`INT`使用 4 个字节的存储空间，而`BIGINT`使用 8 个字节。尤其是如果您处理大量行和许多非聚集索引，您希望将其保持*尽可能小*- 这是我通常选择作为我的“ID”类型的另一个原因`INT`（除非我有一个非常强大的表明这`INT`还不够……）

[在MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms186775.aspx)中阅读有关它的更多信息（包括所有选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T14:55:58.917

**`Int`**是 SQL Server 表中 Id 列的最佳类型

如果表最终有太多记录，我们可以更改为`BigInt`

我们还可以将 Id 创建为表的 Identity 和/或 PK。

```
CREATE TABLE [dbo].[TableName](
    [TableNameId] [int] IDENTITY(1,1) NOT NULL
) ON [PRIMARY] 
```

身份和主键示例

```
CREATE TABLE [dbo].[TableName3](
    [TableName3Id] [int] IDENTITY(1,1) NOT NULL,
 CONSTRAINT [PK_TableName3] PRIMARY KEY CLUSTERED 
 (
    [TableName3Id] ASC
 )
) 
```

希望这有助于您的问题对我有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-31T00:29:02.053

是的，int 或 int 的任何变体都是不错的选择，但我能想到它有一个缺点。当行被删除时，ID 字段会显示缺失的数字，例如 (1,3,4,5)。Guid 可能是 ID 字段的第二选择

# android - Android - 在片段中更新 ListView 的性能问题

> ID：11222970
> 
> 赞同：1
> 
> 时间：2012-06-27T09:16:15.583
> 
> 标签：android, performance, fragment

我的布局如下：

> * * *
> 
> ```
> |       Header                            |
> ___________________________________________
> |               |                          |    
> |               |                          |
> | List of user  | Fragment with Details    |
> |               | [Contains ListView]      |
> |               |                          |
> |               |                          |
> ___________________________________________
>      Footer
> ___________________________________________ 
> ```

用户的 Header、Footer 和 ListView 处于主要活动中。右侧包含一个片段，其中包含左侧列表视图中选择的用户的列表视图。

我在更新片段内的列表视图时面临性能问题。单击用户后，我需要等待将近 7-8 秒才能看到右侧的列表正在更新。

但是，如果我将所有内容都放在同一个活动中，甚至是活动中的细节 ListView 而不是片段（从而删除片段的使用），那么同样的响应速度很快。它下降到1-1.5秒。我需要使用片段，因为在详细信息部分中，我想根据某些用户模式显示不同类型的信息。并且每个对应的细节可以在各自的片段中。

使用片段，我试图找出需要时间的地方。当我执行 detaillistview.setAdapter 或相应的 adapter.notifyDatasetChanged 时，所花费的时间。没有时间准备数据，因为我在内存中有相应的数据，只需要用输入数据刷新列表。

我尝试通过代码在 xml 中动态添加片段。当通过代码动态执行时，xml 没有片段，但有一个占位符布局区域，我在通过代码添加片段时将其用作父级。性能本身就是类似的响应。

我想知道我能做些什么来提高性能。

谢谢 pradeep

# jsf - 仅在特定提交按钮上限制 f:validator

> ID：11222972
> 
> 赞同：0
> 
> 时间：2012-06-27T09:16:27.367
> 
> 标签：jsf, jsf-2, ajax4jsf

我有一个 JSF 表单，其中有一个 textarea 和多个按钮。对于文本区域，我正在使用 f:validator 进行验证

```
<f:validator validatorId="myValidator" />
<a4j:support event="onsubmit" ajaxSingle="true" process="textarea1" /> 
```

验证器按预期工作。现在我在页面上有多个提交按钮，我希望验证只发生在特定按钮上，其余按钮上的验证器应该被忽略。

无论如何，是否仅将验证器限制在特定的提交按钮上。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:48:46.500

您可以使用该`disabled`属性。

```
<f:validator validatorId="myValidator" disabled="#{empty param['formId:buttonId']}" /> 
```

`formId`您的 ID在哪里，`<h:form>`并且`buttonId`是按钮的 ID，它应该是触发验证的唯一按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:25:02.670

我假设您也想`textarea`在单击其他按钮时将值提交给服务器（因此没有必要使用该`process`属性）

添加`immediate="true"`到其他按钮怎么样？

这样他们将跳过验证，而没有提交按钮`immediate="true"`将按预期进行验证

或者

在这篇文章[JSF 2 - Conditionally Skip Validation中似乎有另一种解决方法](http://javalabor.blogspot.co.il/2012/02/jsf-2-conditional-validation.html)

就像是

```
<h:commandButton action="#{bean.someMethod"} value="Submit2">
   <f:param name="skipValidation" value="true"/>
</h:commandButton> 
```

并在`validate`验证器的方法中检查`skipValidation`属性（在文章中寻找进一步的解释......）

# javascript - 在Javascript中将任意字符串转换为0到1之间的数字

> ID：11222978
> 
> 赞同：3
> 
> 时间：2012-06-27T09:16:52.670
> 
> 标签：javascript

我正在处理具有 8DnKOc6FISU、rNsrl86inpo、5qcmCUsw4EQ 之类 id 的 Youtube 视频（即集合中的 11 个字符 A-Za-z0-9_-）

目标是将每个 id 转换为颜色（由范围 0-1 表示），以便可以可靠地绘制它们。

根据[这个问题](https://stackoverflow.com/questions/6180138/whats-the-youtube-video-id-maximum-length)，这些是 64 位数字。鉴于：

*   我想充分利用任何给定视频集的色彩空间
*   无论如何，颜色感知并不是那么准确

...以 id 的最后 2-3 个字符为基础似乎是明智的。

我的主要方法是我从[这里](http://blog.sarathonline.com/2009/02/javascript-convert-strings-to-binary.html)借来的一个函数，它将每个字符转换为二进制数，如下所示：

```
 function toBin(str){
     var st,i,j,d;
     var arr = [];
     var len = str.length;
     for (i = 1; i<=len; i++){
      d = str.charCodeAt(len-i);
      for (j = 0; j < 8; j++) {
       st = d%2 == '0' ? "class='zero'" : "" 
       arr.push(d%2);
       d = Math.floor(d/2);
      }
     }
    } 
```

但这留下了如何将其转换回浮点数的问题。

任何关于优雅解决方案的想法？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:53:59.130

知道系统是基数 64 (26+26+10+2)，只需读取每个符号，将其添加到总和中，然后在每次迭代中将结果乘以 64。最后你会得到一个整数。将其除以最大值以将其标准化为 0-1 范围。

但是，当您的 ID 接近 2 ^(53)时，您将开始失去精度，因为这是 JS 可以精确地以整数表示的最大值。

或者，您可以通过为行中的每个位置添加 (letter_index / 64 ^(letter_position) ) 从一开始就计算浮点数，但在处理过程中您会失去更多的精度。

# objective-c - CoreData 和 NSManagedObject 内存状态

> ID：11222980
> 
> 赞同：1
> 
> 时间：2012-06-27T09:16:53.920
> 
> 标签：objective-c, core-data, ios5

这是我一直想问的问题。当我在 Profiler 中运行 iOS 应用程序寻找分配问题时，我发现 NSManagedObject 在使用和显示后很长时间仍留在内存中，并且召回的 UIViewController 已被释放。当然当再次分配UIViewController时，数量并没有增加，说明没有泄漏，CoreData有某种对象重用。

如果我有一个名为“mobjc”的 MyManagedObject 类，那么在分析器中我可以看到越来越多的：

> MyManagedObject_mobjc_

数量可能会有所不同，对于少量数据，例如 sqllite 中的 100 个对象，它会增长到该限制并保持在那里。

但似乎有时在应用程序生命周期中对象会被释放，所以我认为 CoreData 本身正在做某种内存优化。似乎没有保留整个对象，而是保留了它的“错误”（请原谅我的英语:-)），因为活动字节大小很小。即使是棘手的很多故障对象也会占用内存。

但在这一点上，我想要一些确认：

*   CoreData 真的在内存中管理和优化对象吗？
*   我能做些什么来帮助我的应用程序保留尽可能少的对象吗？
*   与上述有关，我真的需要处理这个问题吗？
*   您是否有一些链接，可能来自 Apple，其中解释了这个特定主题？

也许是相关的，我用于测试的应用程序依赖于 ARC 和 iOS 5.1。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:05:29.727

在这个 SO 主题[Core Data Memory Management](https://stackoverflow.com/questions/1734554/core-data-memory-management)中，您可以找到您正在寻找的信息。

相反，这是指向 Apple 文档的[Core Data Memory Managament](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMemory.html)的链接。

这里有一些提示。

首先，当你处理 Core Data 时，你处理的是一个对象图。为了减少内存消耗（*修剪你的图*），你可以`reset`在你正在使用的上下文上做一个或者把对象变成 fauts 传递`NO`给`refreshObject:(NSManagedObject *)object mergeChanges:(BOOL)flag`方法。如果您传递`NO`给该方法，您可能会丢失未保存的更改，因此请注意它。

此外，如果不需要，请不要使用撤消管理。它增加了内存使用（默认情况下，在 iOS 中，不创建撤消管理器）。

希望有帮助。

# tomcat - Tomcat 二进制分发 zip 作为 maven 工件

> ID：11222982
> 
> 赞同：14
> 
> 时间：2012-06-27T09:17:02.863
> 
> 标签：tomcat, maven

是否有一个公开可用的 maven 存储库将 Apache Tomcat 二进制分发 ZIP 作为 maven 工件托管（我的意思是可以通过[http://tomcat.apache.org](http://tomcat.apache.org)下载的文件，例如[http://mirror.serversupportforum.de/apache /tomcat/tomcat-7/v7.0.28/bin/apache-tomcat-7.0.28.zip](http://mirror.serversupportforum.de/apache/tomcat/tomcat-7/v7.0.28/bin/apache-tomcat-7.0.28.zip)）？

目前，我手动下载这些分发 zip 并将它们放入我的 Nexus 存储库中，但如果有这样一个我可以添加到我的 POM 中的存储库，我会发现它更优雅。其他人是否需要在他们的 maven 构建中使用 Tomcat 分发 ZIP，你如何处理这个问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-08-30T07:28:42.960

Tomcat 7.0.35 及更高版本的发行版位于 Maven Central 中`org.apache.tomcat:tomcat`，类型为`zip`或`tar.gz`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:21:36.713

不，没有这样的存储库或工件。

不久前我正在研究这个问题，因为我们有一个标准的 Tomcat，我们预先配置并与我们的产品一起发布。

我们最终从官方网站（通过 Maven）下载了 Tomcat zip，然后应用所需的更改，然后将它们推送到我们的 Nexus。

这或多或少是我们如何做到的：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat</artifactId>
    <version>7.0.28-ourbranding-1-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>Pre-Configured Tomcat</name>

    <properties>
        <version.tomcat>7.0.28</version.tomcat>
        <tomcat.archive.file>${project.build.directory}/apache-tomcat-${version.tomcat}.zip</tomcat.archive.file>
    </properties>

    <build>    
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.3</version>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.6</version>

                <executions>
                    <execution>
                        <id>repackage-tomcat</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>

                        <configuration>
                            <target>
                                <echo message="Re-packaging ${tomcat.archive.file}..." />

                                <unzip src="${basedir}/src/main/lib/apache-tomcat-${version.tomcat}.zip" dest="${project.build.directory}" />

                                <move file="${project.build.directory}/apache-tomcat-${version.tomcat}" tofile="${project.build.directory}/tomcat" />

                                <!-- Remove the default webapps -->
                                <delete dir="${project.build.directory}/tomcat/webapps/docs" />
                                <delete dir="${project.build.directory}/tomcat/webapps/manager" />
                                <delete dir="${project.build.directory}/tomcat/webapps/host-manager" />
                                <delete dir="${project.build.directory}/tomcat/webapps/examples" />

                                <!-- Patch the bin/catalina* scripts to include some of our jars in the classpath -->

                                <!-- ... Some more magic goes on here ... -->
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.6</version>
                <executions>
                    <execution>
                        <id>attach-artifacts</id>
                        <phase>package</phase>
                        <goals>
                            <goal>attach-artifact</goal>
                        </goals>
                        <configuration>
                            <artifacts>
                                <artifact>
                                    <file>${tomcat.archive.file}</file>
                                    <type>zip</type>
                                </artifact>
                            </artifacts>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

</project> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T09:32:34.160

我唯一确定的位置是：

[http://archive.apache.org/dist/tomcat/](http://archive.apache.org/dist/tomcat/)

可以通过 Maven 下载使用...

# android - Android - 谷歌地图 - 投影 - toPixels() - 它是与设备无关的像素吗？

> ID：11222984
> 
> 赞同：0
> 
> 时间：2012-06-27T09:17:10.887
> 
> 标签：android, google-maps, projection

我正在使用地图视图投影来获取屏幕像素，例如

```
currentPixelLocation =  businessMapMv.getProjection().toPixels(tappedLocation, null); 
```

然后我用它在屏幕上做一些操作，比如使气球尖端居中。

所以我要做的是

```
currentPixelLocation.y = currentPixelLocation.y - 100 
```

这工作正常。toPixels 方法返回的像素位置是否与设备无关？

我的上述代码之类的操作是否适用于所有屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:48:35.430

我认为您网站上的设备独立像素存在误解。如果您在设备独立像素 (dip) 中声明您的布局，则框架本身会根据设备显示密度为运行时运行的设备计算正确的 Veiw 大小。在框架计算出 View 尺寸后，View 的尺寸以像素为单位设置。

因此，getProjection().toPixels() 为您提供相对于底层 MapView 的位置（以像素为单位）。这些像素与设备无关。

在我看来有什么问题是你计算`currentPixelLocation.y = currentPixelLocation.y - 100`100 代表什么？这 100 个绝对取决于设备。如果要减去 100 个像素，只需使用此计算即可`currentPixelLocation.y = currentPixelLocation.y - 100 * getResources().getDisplayMetrics().density + 0.5f`。它确保 100 个像素是计算设备 **中** 依赖的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:49:36.647

它们与设备无关，但取决于为切片图层定义的切片大小。在常规地图上，默认平铺大小为 256 x 256 像素。

# loadrunner - LoadRunner reg 保存参数

> ID：11222987
> 
> 赞同：0
> 
> 时间：2012-06-27T09:17:24.193
> 
> 标签：loadrunner

我有这样的字符串：

```
<a class="edit" name="Company2"` `onclick="javascript:editCompanyName(70,this.getAttribute('name') 
```

我必须使用数字 70。所以如果我使用：

```
web_reg_save_param("com","LB=onclick=\"javascript:editCompanyName(",
      "RB=,", "Ord=ALL", "NotFound=WARNING","Search=body", "RelFrameId=1", LAST); 
```

它工作正常，并给了我现有号码的列表。

但是当我想拿70号时，在哪里`name="Company2"`，

```
web_reg_save_param("com","LB=name=\"Company2\" onclick=\"javascript:editCompanyName(",
      "RB=,", "Ord=ALL", "NotFound=WARNING","Search=body", "RelFrameId=1", LAST); 
```

它什么也没给我。

我在第二个表达中做错了吗？

请帮我找出一个问题，这对我来说很重要。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:01:15.500

您的 LB 表达式中似乎缺少两个单引号。

你有

> LB=name=\"Company2\" onclick=\"javascript:editCompanyName("

你需要

> LB=name=\"Company2\"``onclick=\"javascript:editCompanyName("

# sql - sql半连接优化

> ID：11222988
> 
> 赞同：1
> 
> 时间：2012-06-27T09:17:27.220
> 
> 标签：sql, oracle, optimization, semi-join

有两张桌子

```
t1 { id, name, ...}

t2 { t1_id , date_time, parameter, value, ...} 
```

t1 和 t2 是 oracle 分区表。t2 很大。

我想获取与 t2 的时间范围匹配的 t1 ：

```
select id, name, ... from t1 partition(t1_partition_name) 
where t1.id in( select distinct t1_id from t2 partition(t2_partition_name) 
             where date_time > to_date('20120627 00','YYYYMMDD HH24') 
                   and date_time <to_date('20120627 12','YYYYMMDD HH24')
          ) 
```

子查询将返回大约 10K t1_id。它真的很慢，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:23:59.387

你可以试试：

```
SELECT id, name, ... 
  FROM t1 partition(t1_partition_name) aa
 WHERE EXISTS (
     SELECT * 
       FROM t2 partition(t2_partition_name) ex
      WHERE ex.t1_id = aa.id
        AND ex.date_time > to_date('20120627 00','YYYYMMDD HH24') 
        AND ex.date_time <to_date('20120627 12','YYYYMMDD HH24' )
     )
  ; 
```

顺便说一句，我对 Oracle 的分区子语法一无所知。我希望可以完全删除分区（tx_partition_name），因为 DBMS 应该已经知道这一点。它还与“PARTITION BY”短语相冲突。

# asp.net - ASP.Net VB - 将更新的更新面板值传递回另一个回调函数

> ID：11222989
> 
> 赞同：2
> 
> 时间：2012-06-27T09:17:30.370
> 
> 标签：asp.net, ajax, callback, linkbutton

我是 ASP.NET 和 AJAX 的新手，所以我可能会以完全错误的方式处理事情，

目前这一切都只是测试，我有一个带有 onclick 功能的更新面板来访问数据库和更新值。我正在尝试通过按链接按钮来更新页面上的客户端 ID。这适用于第一次点击，但随后的点击显然仍在读取服务器端数据而不是更新的客户端数据，我现在需要能够将客户端 ID 的更新值返回给我的链接按钮点击功能。

ASPX 代码

```
 <form id="form1" runat="server">
     <asp:toolkitscriptmanager ID="ToolkitScriptManager1" runat="server">
</asp:toolkitscriptmanager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <Triggers> 
        <asp:AsyncPostBackTrigger ControlID="LinkButton1" EventName="click" /> 
    </Triggers> 

     <ContentTemplate>

<div class="topbox">
   <h3>Client</h3> 

<div style="float:left">

<p>
    <asp:Label ID="Label1" runat="server" Text="ClientID" Width="150px"></asp:Label>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

</p>
      <asp:LinkButton ID="LinkButton1" runat="server">next --></asp:LinkButton>
      </ContentTemplate> 
 </asp:UpdatePanel>
</form> 
```

ASPX.VB 代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Open_database(1)
End Sub

Public Sub Open_database(e)
    Dim SQLConn As New SqlConnection()
    'The SQL Connection
    Dim SQLCmd As New SqlCommand()
    'The SQL Command
    Dim SQLdr As SqlDataReader
    'The Local Data Store
    SQLConn.ConnectionString = xxxx
    'Set the Connection String
    SQLConn.Open()
    'Open the connection
    SQLCmd.Connection = SQLConn
    'Sets the Connection to use with the SQL Command
    SQLCmd.CommandText = "Select * from Client where clientid='" & e & "'"
    'Sets the SQL String
    SQLdr = SQLCmd.ExecuteReader
    'Gets Data
    While SQLdr.Read()
        TextBox1.Text = (SQLdr("ClientID"))
    End While
    ' Do While SQLdr.NextResult()
    'Move to the Next Record
    SQLdr.Close()
    'Close the SQLDataReader        
    SQLConn.Close()
    'Close the connection
End Sub

Protected Sub LinkButton1_Click(sender As Object, e As EventArgs) Handles LinkButton1.Click
    Dim x = TextBox1.Text + 1
    Open_database(x)
End Sub 
```

任何帮助将不胜感激，

吐温

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:26:48.330

“避免使用共享变量”为了更好的编程......

只需`Page_Load()`将代码更改为

```
 If Not IsPostBack Then
                            Open_database(1)
                     End If 
```

使用上面的代码`Page_Load()`只会调用 Open_database(1) 函数一次并且`LinkButton`会给出想要的结果......

# haskell - 如何在 Haskell 中模拟指针？

> ID：11222991
> 
> 赞同：9
> 
> 时间：2012-06-27T09:17:35.267
> 
> 标签：haskell, heap, dijkstra

我正在尝试在 Haskell 中实现 Dijkstra 的算法。我已经使用树实现了一个二叉堆。在算法中，当前顶点的邻居键应该在堆中更新。如何在 Haskell 中模拟指向堆中值的指针？如何在每次操作后堆都发生变化时快速访问堆中的元素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T09:33:03.427

查看[Data.IORef](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-IORef.html)和[Data.STRef](http://hackage.haskell.org/packages/archive/base/4.2.0.1/doc/html/Data-STRef.html)包，它们使您可以访问可变引用。如果您还需要执行 IO，请使用 IORefs，如果不需要，请使用 STRefs。

但是，我怀疑您可能做错了。完全可以在没有可变状态的情况下实现 Dijkstra 算法（尽管您需要小心一点，因为如果您不断地重新计算可以缓存的函数评估，您很容易导致渐近运行时间爆炸）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:01:57.070

您可能正在从[矢量](http://hackage.haskell.org/package/vector)包中寻找[Data.Vector.Mutable](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Mutable.html)，您可能希望将其与[ST](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Monad-ST-Safe.html)或 IO monad 结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:12:15.797

您可以使用支持[调整操作的](http://hackage.haskell.org/packages/archive/fingertree-psqueue/0.3/doc/html/Data-FingerTree-PSQueue.html#v%3aadjust)[Data.FingerTree.PSQueue](http://hackage.haskell.org/packages/archive/fingertree-psqueue/0.3/doc/html/Data-FingerTree-PSQueue.html)来更新堆。在这种情况下，您不需要指向堆中值的指针，因为您通过它们的键更新它们。

# c# - 将 int 转换为价格/货币/货币 (C#)

> ID：11222992
> 
> 赞同：0
> 
> 时间：2012-06-27T09:17:40.780
> 
> 标签：c#, .net

我的数据库中有一些价格存储为数据类型`money`并具有以下代码：

```
result.RangeMinimum = (decimal)ad.RangeMinimum;
result.RangeMaximum = (decimal)ad.RangeMaximum; 
```

输出是：

`38000` 和 `42000`

理想情况下，我想要的是这样的东西： `38, 000.00` 和 `42, 000.00`

我怎样才能做到这一点？我的意思是，是否已经有一个现有的类内置到 .NET 框架或其他东西中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:19:00.667

你想达到的可以通过自定义的数字格式来完成，即对于 `ToString()`方法或者`String.Format()`方法

[MDSN 自定义数字格式](http://msdn.microsoft.com/en-us/library/6f74fd32-6c6b-48ed-8241-3c2b86dea5f4%28v=vs.90%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T09:32:15.503

正如您“完全”指定并且在昏迷后有一个空格，标准数字格式似乎不起作用。您可以使用 轻松自定义自己的格式`String.Format`。

```
Decimal number = 38000.01m;
string formatted = string.Format(CultureInfo.GetCultureInfo("en-US"), "{0:#, ###.00}", number);
// formatted now contains "38, 000.01"
```

输出是：`38, 000.01`

请始终记住文化信息，以便我们非美国公民可以享受应用程序。:)

可以在[MSDN](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)上找到有关使用自定义数字格式进行格式化的信息。

请注意末尾的 00，它们强制使用两位数。根据您的使用情况，您可能想要也可能不想要这种行为。如果需要，替换为##。此外，如果您在循环中使用它，请不要在每次调用 string.Format 时进行文化查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T09:22:15.243

你可以像这样格式化它

```
string.Format("{0:#,#.##}", decimalValue) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T09:22:24.527

```
string currencyString = result.RangeMinimum.ToString("C", CultureInfo.CurrentCulture); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T09:24:15.350

试试这个

```
result.ToString("N"); 
```

使用`CultureInfo.InvariantCulture`你可以定义你自己的格式

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T09:27:32.227

尝试十进制 ad.RangeMinimum = Decimal.Parse(result.RangeMinimum.ToString("#0.00"));

# iphone - 如何从动画中排除子视图？

> ID：11222994
> 
> 赞同：0
> 
> 时间：2012-06-27T09:17:52.340
> 
> 标签：iphone, subview

![在此处输入图像描述](../Images/222949dbb8b8acf748d4fac0b00b4457.png)我正在开发一个应用程序，我在同一个视图中创建小的子视图。

我想要的是当我更改视图的 alpha 值时，子视图的 alpha 值也发生了我不想要的更改。

如何实现更改视图值的代码，而不是创建的小子视图。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:21:01.907

你不能那样做，alpha是继承的，所以你要做的就是改变视图结构

YourMainView -> 你的子视图

至

ContainerView ->YourMainView -> 你的子视图

所以现在 YourMain View 是你想要应用动画的那个，不是你当前 subView 的 paret 视图，两个视图都是兄弟，ContainerView 也将有一个清晰的背景，所以它不会影响它只会包含两个视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:33:15.330

正如已经建议的那样，您不应将 YourSubVew 添加为 YourMainView 的子视图。使您的两个视图成为一个空且透明的公共子视图 (ContainerView) 的子视图，该子视图与 YourMainView 当前具有相同的大小和位置。

```
ContainerView -> YourMainView 
              -> YourSubView 
```

确保先将 YourMainView 添加为 ContainerView 的子视图，然后再将 YourSubView 添加为 ContainerView 的子视图。否则 YourMainView 可能会重叠/隐藏 YourSubView。

这样做你可以设置两个视图的 alpha 相互独立。

（奥马尔的回答非常正确，但他的“图形可视化”具有误导性，它错过了子视图序列的要点。）

编辑：你今天拥有的是这样的：

```
yourMainView.alpha = 1.0;
...
[yourMainView addSubView:yourSubView];
yourMainView.alpha = 0.1; //probably with animations etc. 
```

发生的事情是，yourSubView 将“继承”其父视图的 alphaValue。还有更多。假设您的 subView 的 alpha 为 0.5，当其父视图的 alpha 设置为 0.1 时，它实际上会变为 0.05。

将该代码更改为：

```
containerView = [[UIView alloc] init]; //you may choose a different init method
//If you use initWithFrame then use the frame of yourMainView. 
//However, make sure that ContainterView is of the same size as yourMainView and has the same position. 
[containerView addSubView:yourMainView];
yourMainView.alpha = 1.0; 
```

... [containerView addSubView:yourSubView]; //也将它添加到容器中！yourMainView.alpha = 0.1; //这现在只会影响 MainView。

这基本上就是所有技巧。视图可以很好地相互重叠而不是子视图。只有当它们真的是子视图时，才让它们成为子视图，当它们一起移动，一起出现和消失等时。