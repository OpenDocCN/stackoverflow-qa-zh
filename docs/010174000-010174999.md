# StackOverflow 问答 10174000-10174999

# android - 如何为每个应用程序使用一个 HttpClient？

> ID：10174004
> 
> 赞同：5
> 
> 时间：2012-04-16T12:23:57.817
> 
> 标签：android, apache, http, httpclient

我正在寻找一种有效的方式来使用`HttpClient`我的 android 应用程序。我在不同的活动中使用 HttpClients，我只想为应用程序使用一个客户端并在活动中传递它。即使我浏览了一些答案，我也无法找到一种方法来只使用一个客户来完成我的多项活动。

您能否用示例代码向我解释一下如何实现这种模式？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:33:08.750

在实现这样的 HttpClient 之前，您需要记住以下几点。

1.  客户端的单个实例可以通过使用单例模式来实现。
2.  确保您使用线程在后台完成所有下载，并且不要使用 UI 线程。
3.  为所有下载请求维护一个队列。在填充之前，单个 Activity 可能有多个请求来下载各种组件，例如数据、图像等。所有这些请求都需要排队并一个接一个地运行。
4.  如果您在 HttpClient 队列清除之前切换 Activity，则应清除该队列，以免停止加载新 Activity 的组件。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:29:02.953

依赖注入框架通常用于这种场景

[https://www.raywenderlich.com/171327/dependency-injection-android-dagger-2](https://www.raywenderlich.com/171327/dependency-injection-android-dagger-2)

# javascript - Jquery/JavaScript 时间计算

> ID：10174010
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:24:45.550
> 
> 标签：javascript, jquery

> **可能重复：**
> [用于人类友好的相对日期格式的 Javascript 库](https://stackoverflow.com/questions/7641791/javascript-library-for-human-friendly-relative-date-formatting)

如何在 Jquery 中显示 2 天前、3 个月前而不是时间和日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:26:19.513

您需要使用插件以人类可读的方式格式化日期。

一个这样的插件是[http://timeago.yarp.com/](http://timeago.yarp.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:29:19.810

[Pretty Date](http://ejohn.org/blog/javascript-pretty-date/) Plugin 是我所知道的最简单的插件之一。对于本机解决方案，Alex 的这个[答案](https://stackoverflow.com/a/7641812/295264)非常好。

# xml - 指定 XPath 来计算一组子节点的值？

> ID：10174016
> 
> 赞同：2
> 
> 时间：2012-04-16T12:24:57.980
> 
> 标签：xml, xpath

是否可以指定一个 XPath 查询，以便它可以计算一组子项的文本值处的数字：

这最好用一个例子来解释，例如：

```
 <badge_counts>
        <gold>2</gold>
        <silver>15</silver>
        <bronze>32</bronze>
    </badge_counts> 
```

因此，是否可以指定 Xpath 来获取`total_badges = 49`. （来自：2+15+32）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:58:10.880

**使用**：

```
sum(/*/*) 
```

这将生成 XML 文档中作为文档顶部元素的子元素的所有元素的字符串值转换为数字的总和。

**作为一项规则**：尽可能避免使用`//`伪运算符，因为这可能会导致不必要的低效评估——在这种情况下，许多 XPath 引擎会完全遍历以上下文节点为根的整个树。

**基于 XSLT 的验证**：

**这种转变**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:value-of select="sum(/*/*)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<badge_counts>
    <gold>2</gold>
    <silver>15</silver>
    <bronze>32</bronze>
</badge_counts> 
```

**计算 XPath 表达式并输出结果**：

```
49 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:43:34.523

怎么样：

```
sum(//badge_counts/*/text()) 
```

Python 示例：

```
>>> from lxml import etree
>>> doc = etree.XML("""<badge_counts><gold>2</gold><silver>15</silver><bronze>32</bronze></badge_counts>""")
>>> doc.xpath('//badge_counts/*/text()')
['2', '15', '32']
>>> doc.xpath('sum(//badge_counts/*/text())')
49.0 
```

# c++ - 将 /MD 库与 /MDd 应用程序一起使用

> ID：10174023
> 
> 赞同：1
> 
> 时间：2012-04-16T12:25:33.610
> 
> 标签：c++, visual-studio-2008

我有一个需要在发布模式下使用的库，因为它的性能在没有优化的情况下会显着降低。当我在 /MDd 中将它与 /MD 一起使用时，它会发出 crt 警告，我认为这很糟糕。（可能导致堆损坏？）

所以我所做的是，保留所有发布优化，但使用 /MDd 链接库。警告消失了。但是，这会导致任何问题或性能损失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:50:08.230

使用 /MDd 而不是 /MD 可能会导致性能损失，但这绝对取决于您的操作。如果您无论如何都不在性能关键代码中使用运行时，您将不会看到任何减速。或者，您可以通过其他方式解决您的问题：使用 /MD 构建应用程序和库，但该应用程序仍然具有调试信息且没有优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:17:18.870

我很难学到这一点。花了 3 天时间调试一个堆损坏错误，以为我正在释放一些已经被释放的东西，但最后我认为这就是它。我还没有尝试过。这甚至不完全是我的代码。基本上，我正在处理的应用程序是使用代码生成/MDd 构建的，用于调试构建，而使用我的应用程序库的客户端应用程序是使用代码生成/MD 构建的，用于调试构建。这突然开始导致堆损坏错误。如果解决此问题，将跟进。谢谢。

# sql-server - 在 SQL Server 中更改表时更新 VB.Net 中的数据集

> ID：10174026
> 
> 赞同：0
> 
> 时间：2012-04-16T12:25:44.757
> 
> 标签：sql-server, vb.net

我的场景是我从一个 SQL Server 表中获取数据到 vb.net DataTable 中。

现在，如果任何记录被更改或新记录被保存到 SQL Server 表中，我只想将该记录获取或更新到我的数据表中。可能吗。

这是因为我的 SQL 表有超过 100 万条记录，每次获取所有记录几乎是不可能的。

实际上我打算从销售发票表中构建一个条形图，它会在每 1 分钟或固定时间间隔后刷新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:02:21.993

您可以将时间戳字段添加到表中。将其设置为插入和更新时的当前时间，然后查询时间戳大于上次查询的最大时间戳的所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T17:40:28.977

您可以将 SqlDependency 用于数据更改事件。这将确保发生对数据库中特定表的任何更改，将自动触发事件以反映程序中的更改。

1.  在您的数据库中启用代理

    ALTER DATABASE [yourdbName] SET ENABLE_BROKER

2.  通过 SqlCommand 在应用程序和数据库之间创建依赖关系。在建立之前，必须为此会话启动 SqlDependency。

    SqlDependency.Start(m_ConnectionString);

3.  如前所述，依赖项是基于 SqlCommand 创建的。

    SqlDependency 依赖 = new SqlDependency(cmd);

    当然，对于此命令中可以包含的内容有一些限制。该命令必须使用两个部分名称，并且不能使用 *. 它显然也不能是 UPDATE 或 INSERT 语句。

以下将不起作用：

```
SELECT * FROM Message 
```

这将起作用：

```
SELECT ID, Message FROM dbo.Message 
```

4.  如果查询不正确，将立即发送一个事件：

    SqlNotificationEventArgs.Info = 查询

    SqlNotificationEventArgs.Source = 声明

    SqlNotificationEventArgs.Type = 订阅

有关详细示例和演示应用程序，请参阅[使用 SqlDependency 处理数据更改事件](http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events)

# macos - 在 Mac OS X 中 memcpy() 不安全吗？

> ID：10174030
> 
> 赞同：0
> 
> 时间：2012-04-16T12:25:57.367
> 
> 标签：macos, security, memcpy

我知道有很多关于 memcpy() 在 Windows/Microsoft 世界中如何不安全的讨论，但这是否也适用于 Mac OS X 代码（Cocoa）？如果是这样，在 Cocoa 中应该使用什么函数来获得最大的安全性？memcpy_s() 似乎不存在于平台上。

谢谢。

更新：我意识到即使在 Windows 中谈论 memcpy() 也是一个灰色区域（请参阅[安全编程中的 Memcpy()？](https://stackoverflow.com/questions/870019/memcpy-in-secure-programming)），但我试图发现同样的确切讨论是否适用于 Mac OS X。Mac OS X 不包含 memcpy() 的“安全”版本这一事实似乎暗示 Apple 认为事情并没有那么糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:59:31.390

当内存区域可以重叠时，您应该使用[memmove](http://www.manpagez.com/man/3/memmove/)而不是[memcpy 。](http://www.manpagez.com/man/3/memcpy/)

如果您进行防御性编程并且知道它们实际在做什么，它们本质上并不是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:53:48.463

这是相当新的 AFAIK，并不完美，但 GCC 提供了一个名为的包装器`__memcpy_chk`，它在可能的情况下检查目标的大小，看看[这里](https://developer.apple.com/library/mac/#documentation/DeveloperTools/gcc-4.2.1/gcc/Object-Size-Checking.html)。它的用法（来自同一资源）：

```
 #undef memcpy
 #define bos0(dest) __builtin_object_size (dest, 0)
 #define memcpy(dest, src, n) \
   __builtin___memcpy_chk (dest, src, n, bos0 (dest))

 char *volatile p;
 char buf[10];
 /* It is unknown what object p points to, so this is optimized
    into plain memcpy - no checking is possible.  */
 memcpy (p, "abcde", n);
 /* Destination is known and length too.  It is known at compile
    time there will be no overflow.  */
 memcpy (&buf[5], "abcde", 5);
 /* Destination is known, but the length is not known at compile time.
    This will result in __memcpy_chk call that can check for overflow
    at runtime.  */
 memcpy (&buf[5], "abcde", n);
 /* Destination is known and it is known at compile time there will
    be overflow.  There will be a warning and __memcpy_chk call that
    will abort the program at runtime.  */
 memcpy (&buf[6], "abcde", 5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T13:01:34.193

缓冲区溢出（这是 memcpy、strcpy 等人的安全问题）与操作系统无关；本质上，它们是 C 语言固有的问题，因为它不提供自动边界检查。

谨慎使用，memcpy 是安全的；例如，如果您自己验证参数，或者在编译时知道大小。但是每个人都会犯错。

MS 禁止 memcpy 和使用自己的 memcpy_s 的方法是通过强制程序员在任何地方进行额外的安全检查来减少错误。如果需要，您可以编写自己的 memcpy_s；这并不难，只需实现[其 MSDN 页面](http://msdn.microsoft.com/en-us/library/wes2t00f%28v=vs.80%29.aspx)上描述的行为即可。

> ...似乎暗示 Apple 认为事情并没有那么糟糕。

推论是微软觉得事情很糟糕。但是，公司对问题的看法并不影响所述问题的存在，即不验证您对 memcpy 的输入会导致一类漏洞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:23:02.537

我对微软的印象不深，`memcpy_s()`因为它仍然取决于调用者来提供目标缓冲区大小。由于可能出错的主要问题`memcpy()`（源缓冲区和目标缓冲区重叠除外）是由于不知道目标缓冲区的实际大小引起的，所以调用者不太可能将错误的目标大小放入其中吗？

我想有一类错误可以帮助解决，例如：

```
 char anArray[10]
  char* foo = anArray;
  memcpy_s(foo, sizeof foo, somewhereElse, 10);
  // or
  memcpy_s(foo, sizeof *foo, somewhereElse, 10); 
```

然而，这两者都表明了对 C 指针的根本误解，并且可能不是代码的唯一问题。

如果目的地太小，你会怎么做？您是否继续处理截断的数据？您是否发出一条错误消息说“警告：程序员是个白痴”？不，最好在开始复制之前知道您的目标缓冲区足够大。

此外，问题中的链接谈到`memcpy_s()`了空指针检查。再说一次，你要做什么？让程序崩溃几乎是您可以做的一切，因为如果您希望不为 null 的指针为 null，则您不能信任程序运行环境的任何部分。在现代 PC 操作系统上，一旦`memcpy()`尝试取消引用空指针，程序就会崩溃。

# objective-c - NSString 到 UIImage

> ID：10174031
> 
> 赞同：0
> 
> 时间：2012-04-16T12:26:00.780
> 
> 标签：objective-c, nsstring, uiimage

我在将 NSString 转换为 UIImage 时遇到问题。EDIT1：我正在从 gtalk 服务器下载照片作为字符串并解析 xml 5896efb83a92deaee41a30648cc9dbf7e9942b0e 以用作图像。

```
    NSString *myPicture = [存在照片];
    NSData *pic = nil;

    if (![myPicture isEqualToString:@""]) {
        pic = [myPicture dataUsingEncoding:NSUTF8StringEncoding];
    }

    UIImage *图片；

    NSLog(@"照片%@", pic);

    如果（图片==零）{
        图片 = [UIImage imageWithData:[Utils getAvatar]];
    }

    别的 {
        图片 = [UIImage imageWithData:pic];
    }
    NSLog(@"图片%@", 图片);

```

日志

```
照片 35383936 65666238 33613932 64656165 65343161 33303634 38636339 64626637 65393934 32623065
图片（空）

```

有的部分

```
图片 = [UIImage imageWithData:[Utils getAvatar]]
```

工作正常

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:33:35.620

从问题中不清楚您要做什么。

将图片存储为字符串没有标准约定，因此您需要解释 [presence photo] 返回的格式。

例如，如果字符串包含图像的文件名，这是完全错误的方法，您应该使用 initWithContentsOfFile 加载图像。如果它包含 base-64 编码的 URL，则需要使用 Base64 解码算法等将其解码为数据。

如果字符串只是原始二进制图像数据，那么这是一件非常奇怪的事情，因为 NSString 不是用于存储原始二进制数据并且可能不能以这种方式使用，但如果这是你正在做的，那么数据最可能需要使用 UTF16 而不是 UTF8 进行转换，因为这是 NSStrings 的自然内部编码。

编辑：从您的后续编辑中，看起来您的字符串是十六进制编码的，因此您需要使用十六进制解码器将其转换为数据。这里有一个关于如何做到这一点的答案：

[在Objective C（可可）中将十六进制数据字符串转换为NSData](https://stackoverflow.com/questions/2338975/convert-hex-data-string-to-nsdata-in-objective-c-cocoa)

之后，您可能仍需要进行进一步处理，具体取决于数据的格式（例如 PNG 与 JPEG），但请尝试将解码后的数据传递给 intWithData 并查看您的进展情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:23:14.127

希望对你有所帮助。

```
picture = [[UIImage alloc] initWithData:pic]; 
```

# android - android中的自动完成（限制结果或禁用滚动）

> ID：10174042
> 
> 赞同：2
> 
> 时间：2012-04-16T12:26:47.873
> 
> 标签：android, autocomplete

我需要限制自动完成的结果，或禁用下拉菜单中的滚动。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:07:05.517

这是 ArrayAdapter 的一个子类，它将结果限制在您的选择范围内。

```
public class LimitArrayAdapter<T> extends ArrayAdapter<T> {

    final int LIMIT = 5;
    //overload other constructors you're using
    public LimitArrayAdapter(Context context, int textViewResourceId,
                             List<T> objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public int getCount() {
        return Math.min(LIMIT, super.getCount());
    }

} 
```

当然，这就是你将如何使用它

```
autoCompleteTextView.setAdapter(new LimitArrayAdapter<String>(this,
                                                              android.R.layout.simple_dropdown_item_1line,
                                                              list)); 
```

# android - 开发 Android 2.3.3 应用程序，在模拟器中工作，APK 声称它已安装在手机上，没有安装任何东西

> ID：10174043
> 
> 赞同：1
> 
> 时间：2012-04-16T12:26:50.420
> 
> 标签：android, eclipse, icons, emulation, apk

开发 Android 2.3.3 应用程序，在模拟器中工作，APK 声称它已安装在手机上，没有安装任何东西

这是一个简单的应用程序，它在 Eclipse Android 应用程序中运行良好。当我导出未签名的 .apk 文件时，它声称该应用程序已“成功安装”。我无法在任何列表（如 google play 或“AppInstaller”）中看到该应用程序正在安装。

这是我的清单代码：

```
<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>  
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:debuggable="true"
    android:theme="@android:style/Theme.Light">
    <activity

        android:name=".IS303AndroidSPLSActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TabSubmenyTest"
        android:label="@string/app_name" >
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:40:42.567

您在 Google Play 列表中看不到该应用程序是正常的，因为它不是通过 Google Play 安装的。

您是否尝试过使用手机 USB 调试模式并像这样启动您的应用程序？

# ios - 如何显示多个具有相同纬度/经度的 MKPinAnnotation？

> ID：10174044
> 
> 赞同：2
> 
> 时间：2012-04-16T12:26:51.540
> 
> 标签：ios, ipad, mkmapview, mkannotation

我的 iPad 应用程序正在从数据库中检索地理对象。在这个数据库中，一些对象具有相同的经度/纬度。因此，在 MkMapView 中，我添加了几个具有相同纬度/经度的 MKPinAnnotation。不幸的是，只显示了一个，我想它是我添加的最后一个。

我怎样才能只有一个 MKPinAnnotation 对象（对于给定的坐标），当用户单击它时，我将为共享相同坐标的每个对象显示 MKPinAnnotation？类似于谷歌地图/谷歌地球所做的事情，你点击主图钉，然后显示几个图钉。

任何帮助将不胜感激。

塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:08:47.513

您是否认为当多个图钉位于完全相同的坐标时，它们会彼此重叠显示？或者苹果是否有可能在同一坐标处剔除额外的引脚？

无论哪种方式，我都建议更改坐标，以便可以看到它们明显分开。您可以做的是使用 CLLocation 的 distanceFromLocation: 方法找到所有彼此非常接近的引脚。一旦你发现有一些引脚之间的距离很小（比如 < 0.01），那么你可以在将它们添加到地图之前修改它们的坐标。您可以使它们围绕实际的精确坐标形成一个小圆圈，圆圈周围的角度取决于该簇中有多少个（例如，对于 4 个引脚，将它们放置在 0、90、180、270 度）。或者你可以只改变纬度，改变很小的量，使针看起来在一条垂直线上相互堆叠。

当用户点击单个引脚时，您也可以进行这种分离。即对于该引脚，检查是否有任何其他非常接近的引脚。如果有，请移除此图钉（或移除所有这些图钉），计算圆形或垂直线上所有图钉的新位置，然后将图钉重新添加到地图（并在需要时打开任何标注视图）。

一旦以这种方式分离了引脚，用户就很容易轻敲各个引脚。

我不确定谷歌地图/谷歌地球如何处理这个问题——你能描述一下或提供截图吗？或者提到一些会导致它发生的搜索词。但希望上面的想法能给你一些尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:12:26.673

您可以简单地将它们组合成一个`annotationView`，当用户触摸它时，会在其中制作一些精美`annotationView`的动画来呈现内容。

我已经建立了一个有用的控件来聚集附近的引脚（也适用于具有相同坐标的引脚），`MKMapView`因为我有几次同样的问题。它被称为[OCMapView](https://github.com/yinkou/OCMapView)。它可以为您组合注释，但您必须自己实现用户触摸的动画内容。

# asp.net-mvc - 可以重用asp.net mvc 4.0 AjaxLogin.js 对话框吗

> ID：10174046
> 
> 赞同：1
> 
> 时间：2012-04-16T12:26:58.933
> 
> 标签：asp.net-mvc

AjaxLogin.js 文件承载了一个对话框表单，该表单在 asp.net mvc 4.0 Internet 示例中用于显示注册/登录屏幕。

可以/应该？此 AjaxLogin.js 脚本可重用于显示 cretae 客户/员工等对话框吗？

我试过了，它可以工作，但该文件被称为 Ajax“Login”而不是 Ajax“Customer”。

我应该注意文件名中的“登录”名称吗？

# java - android中布局的自定义主题

> ID：10174048
> 
> 赞同：0
> 
> 时间：2012-04-16T12:27:08.237
> 
> 标签：java, android

我正在尝试这样做，如图所示。我希望我的相对布局看起来像这样。我怎样才能做到这一点。主题、风格等。只要给我提示和想法

最好的祝福

![在此处输入图像描述](../Images/1ab97284bcdce983add717f7115c0d36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:53:37.603

你可以试试这个：

在 res 中创建文件夹：（drawable），然后在其中创建名为（row_shape.xml）的 XML 作为形状，然后在其上写下：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle">
  <stroke android:width="2dp" android:height="2dp" android:color="your color" /> 
  <solid android:color="your color" /> 
  <padding android:left="2dp" android:top="2dp" android:right="2dp"
       android:bottom="2dp" /> 
  <corners android:radius="10dp" android:bottomRightRadius="10dp" 
     android:bottomLeftRadius="10dp" android:topLeftRadius="10dp" 
    android:topRightRadius="10dp" /> 
</shape> 
```

然后在布局 XML 中将形状称为：android:background="@drawable/row_shape"

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:52:34.390

因为这个问题很模糊，我不太确定你在代码方面的立场。但这里有一个链接，可以带您进入与主题以及如何实现主题相关的[Android 开发人员指南。](http://developer.android.com/guide/topics/ui/themes.html)

# java - 无法在java中为“final”变量赋值

> ID：10174050
> 
> 赞同：13
> 
> 时间：2012-04-16T12:27:14.927
> 
> 标签：java, swing, final

```
 private void pushButtonActionPerformed(java.awt.event.ActionEvent evt)
{
    final int c=0;
    final JDialog d=new JDialog();
    JLabel l=new JLabel("Enter the Element :");
    JButton but1=new JButton("OK");
    JButton but2=new JButton("Cancel");
    final JTextField f=new JTextField(10);
    JPanel panel = new JPanel();
    but1.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            c=Integer.parseInt(f.getText());
            d.setVisible(false);
            d.dispose( );
        }
     });
but2.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        d.setVisible(false);
        d.dispose( );
    }
});
} 
```

我正在使用 netbeans 7.1.1。这是我的代码，我已将“c”声明为“final int”，但行“c=Integer.parseInt(f.getText());” 我收到一个错误“无法为最终变量赋值”。如果我从声明中删除单词 final 并将其设置为“int c”，那么在同一行中我会收到错误“局部变量 c 无法从类中访问；需要声明为 final”。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-16T12:35:51.147

您已经在函数中声明了*c*，然后在该函数中创建了一个匿名内部类。这个内部类 ActionListener 在您的函数终止之后仍然存在 - 因此它不能为 c 赋值，因为 c 是函数的本地类。

关于“final”的警告具有误导性——这只是编译器告诉你不能从匿名类访问瞬态局部变量。您不能仅通过将 c 设为 final 来解决问题，因为这将完全阻止对其进行任何分配，但您可以将 c设为 pushButtonActionPerformed 所在类的*实例成员。*像这样的东西：

```
class Something
{
    int c;

    private void pushButtonActionPerformed(java.awt.event.ActionEvent evt)
    {
        JButton but1=new JButton("OK");
        but1.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                c=Integer.parseInt(f.getText());
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-16T12:33:24.967

我将跳过原因并切入解决方案：使用

```
final int[] c = {0};
...
c[0] = Integer.parseInt(f.getText()); 
```

有关完整的故事，请参阅[这篇文章](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T12:28:52.937

> 但是“c=Integer.parseInt(f.getText());”这一行 我收到一个错误“无法为最终变量赋值

对。变量的全部意义`final`在于您只能分配给它们一次，但是您尝试分配给它两次（一次在初始化时将其设置为`0`，一次在引用的行中）。从[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 可以声明一个变量`final`。一个`final`变量只能分配一次。声明一个变量`final`可以作为有用的文档，它的值不会改变，并且可以帮助避免编程错误。
> 
> **如果一个`final`变量被赋值，这是一个编译时错误，除非它在赋值之前被明确地未赋值（第 16 节）。**
> 
> 空白`final`是`final`其声明缺少初始化程序的变量。
> 
> `final`分配变量后，它始终包含相同的值。如果`final`变量持有对对象的引用，则对象的状态可能会通过对对象的操作而改变，但变量将始终引用同一个对象。

*（他们的重点，不是我的。）*

与其尝试在方法中的变量中跟踪您存储的状态，不如在您正在创建`c`的匿名实例中的数据成员中跟踪它。`ActionListener`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T12:28:51.237

这就是`final`java中存在关键字的原因。变量是最终的，即它的值不能改变。如果您必须更改值，请不要将变量标记为最终值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:28:32.143

使用**final**关键字声明变量意味着它的值不能更改。final 变量就像**常量**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:29:48.140

`final`使“变量”成为常数-您无法更改它。至于为什么在您删除 final 关键字后编译器会给您警告，我们需要查看整个代码...

编辑：

```
 but1.addActionListener(new ActionListener()
 {
     public void actionPerformed(ActionEvent e)
     {
         c=Integer.parseInt(f.getText());
         d.setVisible(false);
         d.dispose( );
     }
  }); 
```

我相信这是导致编译器发出警告的代码段。你不能`c`在这堂课中使用...

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-04-16T12:30:20.563

只需`final`从声明中删除关键字并继续您的程序。作为`final`关键字意味着值不变。

# dotnetnuke - DotNetNuke 中的分页控制

> ID：10174054
> 
> 赞同：4
> 
> 时间：2012-04-16T12:27:32.243
> 
> 标签：dotnetnuke, paging

在 DotNetNuke 中，当我在页面中添加两个反馈模块实例时，它们的 PagingControls 相互冲突。

当我更改其中一个的页码时，此问题出现在反馈评论定义中，另一个没有加载任何项目。我认为这个问题是 DNN Paging Control 问题。

有什么解决方案可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:01:32.527

DNN 分页控件总是查看`currentpage`查询字符串上的参数来确定其页面，因此在同一页面的两个模块中使用它没有好方法。

# c# - 在 DataGridView 中完成添加行

> ID：10174055
> 
> 赞同：2
> 
> 时间：2012-04-16T12:27:33.700
> 
> 标签：c#, winforms, datagridview

我确信对此有一个简单的答案，但对于我的生活，我看不到它：

我有一个绑定到 DataTable 的 DataGridView。其中一个单元格可以包含相当长的字符串，所以我创建了一个编辑器对话框窗口（它也进行一些验证等），它在 DataGridView 的 CellDoubleClick 上打开。当用户在编辑器对话框上单击确定时，值将被放入单元格中。

只要它是一个已添加到 DataGridView 的单元格，它就可以正常工作，但是如果我在“添加新行”（其中 DataGridViewRow.IsNewRow 为真）上执行此操作，那么当对话框关闭时，我会遇到双重问题除非该行处于编辑模式并且随后无法添加新行，否则不会显示已编辑的字符串。

我可以看到的一个潜在解决方案是确保在打开对话框窗口之前将新行添加到基础源中，但我看不到这样做的优雅方法（DataGridView.EndEdit() 不会这样做）。那么有没有一种巧妙的方法来做到这一点（或者是否有更好的解决方案）？

代码是这样的：

```
void DataGridViewCellCoubleClick(object sender, DataGridViewCellEventArgs e){
    DataGridView gridview = (DataGridView)sender;
    gridview.EndEdit();
    EditForm editForm = new EditForm(gridview.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());

    if(editForm.ShowDialog() == DialogResult.OK){
        gridview.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = editForm.StringResult;
    }

} 
```

**编辑：**

我找到了一个可以满足我要求的解决方案：

打电话之前：

```
DataGridView.EndEdit() 
```

我还检查当前行是否为“IsNewRow”，如果是我使用

```
DataGridView.NotifyCurrentCellDirty(true) 
```

在我打开编辑窗口之前添加它。希望对某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:58:03.467

我认为问题在于您将数据表绑定到数据 GridView 的方式。

我将创建一个绑定源并将其数据源设置为 DataTable。然后，我会将您的 Datagrid 视图的数据源设置为绑定源。

在 Datagrid 视图中添加新行时，请在数据表中创建新行，然后刷新数据表。

这些更改应该反映在 Datagrid 视图中，因为它们都由 Binding 源绑定。

# java - Android中的Sqlite替换和外键

> ID：10174060
> 
> 赞同：1
> 
> 时间：2012-04-16T12:27:42.573
> 
> 标签：java, android, sql, sqlite

我有以下表结构：

```
Table Days:          [_id,date,name]
                       ^
                       |
Table Events: [_id, day_id ,description] 
```

外键 day_id 设置为 ON DELETE CASCADE

我想在第 2 天“插入或更新”。所以我做了：

```
ContentValues values= new ContentValues();
values.put("_id",2);
values.put("date,"...");
values.put("name","welcome");
mDb.replace("days",null,values); 
```

问题是，如果 day_id=2 已经存在（在我的情况下是最可能的选项），DBengine 会删除表并插入新行，因此与当天相关的所有事件也会被删除。

该解决方案有效，但它不是最理想的，对吗？

```
 try {
        mDb.insertOrThrow("days", null, values);
    } catch (Exception e) {
        mDb.update("days", values, "_id=2", null);
    } 
```

什么是该问题的正确解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:35:47.633

您应该如下添加您的引用，以允许 SQLite 自动删除或更新引用的列。

> FOREIGN KEY [_id] REFERENCES [days] **ON DELETE CASCADE ON UPDATE CASCADE**

# iphone - `[UIImage imageNamed:]` 从哪里加载图像，我如何在运行时将图像插入到那里？

> ID：10174063
> 
> 赞同：4
> 
> 时间：2012-04-16T12:27:52.923
> 
> 标签：iphone, objective-c, ios, uiimage, nsdata

我有一堆已经编写的代码，目前依赖于与我的应用程序一起分发的图像。我想改变这一点，以便可以从网站上即时下载图像，以防止不断上传/获得批准/发布新版本。

代码到处都有`[UIImage imageNamed:@"MyImageName.jpg"]`类型引用。我已经确定了一段可以愉快地下载这些图像的代码，这样如果我能把它们放在正确的位置，我的应用程序就可以正常工作，只要有网络连接，就可以即时下载图像。但是我不知道将下载的图像数据写入哪里，以使我预先存在的代码保持不变。

我有将相关图像数据获取到 NSData 对象的代码 - 所以只需要知道将这些数据写入哪里？

```
 NSLog(@"ERROR - MISSING IMAGE: %@", imageName);
    NSData* theImage = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://f6c.yourmapp.mobi/Images/%@", imageName]]];
    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];
    NSString* localFilePath = [documentsDirectory stringByAppendingPathComponent:imageName];
    [theImage writeToFile:localFilePath atomically:YES];
    tempImage = [UIImage imageNamed:imageName];
    if (tempImage != nil)
    {
        [images addObject:tempImage];
        haveAddedImages = YES;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:33:21.387

它从应用程序包中加载图像。您不能在运行时写入此文件夹。而是将您的图像写入 Documents 文件夹（您可以使用 获取路径`NSDocumentDirectory`）并用于`[UIImage imageWithContentsOfFile:]`加载此类图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:33:43.600

您只能将图像写入应用程序的文档文件夹。

```
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

但是代码 [UIImage imageNamed:@"MyImageName.jpg"] 从您的应用程序包中加载图像，您无法向其中写入数据。

因此，您可以将图像下载并保存到上述文档文件夹中，并在需要时使用图像名称并重新创建路径。

使用 + (UIImage *)imageWithContentsOfFile:(NSString *)path 代替从路径加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:34:36.037

您可以将图像下载到文档目录中。然后从文档目录加载图像

这里有一些链接可以帮助您实现这一目标。

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/79393-how-download-files-server.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/79393-how-download-files-server.html)

[http://www.cocos2d-iphone.org/forum/topic/16121](http://www.cocos2d-iphone.org/forum/topic/16121)

[Iphone：如何在图像视图中显示文档目录图像？](https://stackoverflow.com/questions/6663511/iphone-how-to-display-document-directory-images-in-image-view)

# visual-studio-2010 - 在工作项查询上解决 AssignedTo 中的用户组成员身份

> ID：10174068
> 
> 赞同：0
> 
> 时间：2012-04-16T12:28:34.887
> 
> 标签：visual-studio-2010, tfs

我将工作项分配给 TFS 中的用户组。可以说，我有一项任务分配给 [开发人员] 组。现在我想设置团队查询“我的任务”，以便 [Developers] 的每个成员都能看到该任务。

我在查询编辑器中尝试了以下运算符/值组合（方括号是出于视觉原因添加的）：

*   [分配给] [在组中] [@Me]
*   [分配给] [包含] [@Me]
*   [分配给] [=] [@Me]
*   [分配给] [在] [@Me]

我真正需要的是@MyGroups 而不是@Me。怎么能做到这一点？

如果这不可能，那么 TFS 中的 Assign-To-Group 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:37:51.553

您不能将“Assigned To”字段设置为组，TFS 仅支持设置有效用户。

您可以更改工作项类型定义以删除约束“validuser”并在字段内保存任何类型的文本，但不要期望以这种方式获取组。

这是多年来许多人向微软提出的“抱怨”，但它始终如一：没有群体。

您必须更改 WIQ（工作项查询）以使用其他字段来获得您想要的结果。查看您提供的示例，我强烈建议您使用状态、区域和迭代来确定此查询的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:31:01.550

我一直想做完全相同的事情，并找到了以下“解决方法”，它可以根据需要启用某些功能。

为此，您必须：

1.  创建多个仪表板
2.  创建多个列表，并且只为该人所在的相应组显示正确的列表

![多个仪表板 - 每个团队一个](../Images/5393b80682cc6ca2901c1fe3ded1b1c3.png)

![过滤器选项](../Images/75a25244ee2629e4421198f7f40b5077.png)

请记住，这是在您更改工作项以启用分配给组之后。然后，您将为每个组创建一个查询，因为您需要指定组名称。

我所做的是为每个团队创建一个仪表板，仪表板上有任何“待办事项”项目/更改请求/任务/错误/等。

不幸的是，不可能有“在我的组中”过滤器。

# fortran - 算术常数表达式中的求幂

> ID：10174073
> 
> 赞同：0
> 
> 时间：2012-04-16T12:28:50.340
> 
> 标签：fortran, fortran77

事实证明，以下内容在 fortran 77 中是非法的：

```
c
      program main
      real a
      parameter(a=(10.)**(.5))
c
... 
```

原因是参数语句采用常量算术表达式，除指数为整数时，取幂是非法的。（第 6.1.3 和 8.6 节[http://www.fortran.com/F77_std/rjcnf0001-sh-8.html#sh-8.6](http://www.fortran.com/F77_std/rjcnf0001-sh-8.html#sh-8.6)）。有人知道在标准的新修订版中是否放宽了此限制？为什么这首先是非法的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:54:19.787

是的，这已经放松了。在 Fortran 2003 中，您甚至可以使用内部函数，如`sin`or `exp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:35:21.183

我的猜测是整数指数有一个简单的实现，编译器可以调用它来替换值作为预编译步骤。但是，非整数指数（和负指数）可能具有无法评估为实数的值；关键不是这个例子是不可计算的，只是编译器需要是可预测的，并且让这些表达式失败比编写一个可以确定给定表达式是否会计算为合理数字的例程更简单。请记住，这是在编译之前完成的，而不是通过编译表达式、运行它并使用值来完成，因此范围没有一般的 fortran 宽。

如果这对您来说是个问题，那么请考虑宏和 F90/F77 而不是 f90/f77 文件，以便编译器知道运行预处理器。

或者只是将计算器上的值计算为 16dp 并使用它。

或者让它成为一个普通变量而不是一个参数。成本将是最小的。

# powershell - 阻止关机的 PowerShell 窗口

> ID：10174075
> 
> 赞同：2
> 
> 时间：2012-04-16T12:28:52.617
> 
> 标签：powershell, windows-server-2003, shutdown

如果我有一个 PowerShell 窗口（在 PowerShell 命令提示符处）显示，它会阻止计算机关闭。

即，如果我打开一个 PowerShell 窗口然后尝试关闭服务器，我会收到 End Program 弹出窗口，说 Windows 无法结束该程序。

如果我从开始菜单、cmd 提示符和指定了 -NoExit 的快捷方式启动 PowerShell，我会得到相同的结果。

如何以与 CMD 窗口相同的方式关闭 PowerShell 窗口（如果它在 PowerShell 提示符下）？

或者，PowerShell 是否可以检测到何时启动关闭并因此自行关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:55:48.057

这个问题在[Server Fault](https://serverfault.com/questions/379830/powershell-window-preventing-shutdown)上得到了回答，所以这是我的解决方案测试代码：

```
Write-Host "PowerShellBlockingShutdown.ps1 Started"

$global:shuttingDown = $false
$sysevent = [microsoft.win32.systemevents]
Register-ObjectEvent -InputObject $sysevent -EventName "SessionEnding" -Action {$global:shuttingDown = $true; Write-Host "  SessionEnding"}
Register-ObjectEvent -InputObject $sysevent -EventName "SessionEnded"  -Action {$global:shuttingDown = $true; Write-Host "  SessionEnded"}

do {
    Start-Sleep -Seconds 3
    if ($global:shuttingDown) {break}
    Write-Host "  Waiting for Shutdown"
} while ($true)

Write-Host "PowerShellBlockingShutdown.ps1 Finished" 
```

这似乎有效。

# javascript - 这段代码的 jQuery 版本是什么？

> ID：10174081
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:29:06.650
> 
> 标签：javascript, jquery

我正在使用 jQuery 我想知道下面 JavaScript 代码的 jQuery 版本是什么：

```
document
      .getElementById('cars')
      .addEventListener('change', handleFileSelect, false); 
```

这是因为 jQuery 不喜欢`addEventListener()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:30:21.577

那将是...

```
$('#cars').change(handleFileSelect); 
```

jQuery**确实**喜欢`addEventListener()`. 事实上，我确信它是其事件的首选实现（作为标准）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T12:30:55.837

```
$("#cars").bind("change",handleFileSelect) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T12:30:46.947

```
$('.#cars').change(handleFileSelect); 
```

分解：

```
// document.getElementById('cars')
$('#cars');                        // #<name> is id reference,
                                   // .<name> is class reference
                                   // <name> is an HTML tag reference

// addEventListener
.bind('change', handleFileSelect)  // "broad" binding
.change(handleFileSelect)          // jQuery short-hand of above 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:30:48.477

基本上你的答案是这样的：

```
$("#files").bind("change",handleFileSelect); 
```

但是，该`change`事件被其他一些内置事件处理程序使用，因此您可能希望避免使用该特定字符串作为您的事件 - 除非您当然希望捕获**该**事件。:P

> 当元素的值改变时，change 事件被发送到元素。此事件仅限于`<input>`元素、`<textarea>`框和`<select>` 元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。

* * *

[jQuery 文档](http://api.jquery.com/bind/)是这样描述`bind`函数的：

> 将处理程序附加到元素的事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T12:32:21.790

你可以试试：

```
$('#cars').bind('change', function() { //your code goes here }); 
```

根据 jQuery 文档：

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)（绑定）

[http://api.jquery.com/live/](http://api.jquery.com/live/)（直播）

鉴于选择的数量众多，您必须选择更清晰且易于理解的那个。

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:33:09.347

```
$("#cars").on('change', handleFileSelect); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-16T12:35:36.757

```
$("#cars").live("change",handleFileSelect) 
```

如果您的输入元素是由 javascript 动态创建的，这将很有帮助。

# asp.net - 在没有母版页控件的 asp.net 中打印页面

> ID：10174088
> 
> 赞同：4
> 
> 时间：2012-04-16T12:29:38.967
> 
> 标签：asp.net, printing

我想打印我的页面接受 masterpage 的元素。母版页中有一个用户控件，这对我很重要。我的打印按钮也在母版页上。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:33:27.780

您需要创建新样式表 print.css 并设置 CSS media=print

例如 ：

```
<style media="screen">
  .noPrint{ display: block; }
  .yesPrint{ display: block !important; }
</style>

<style media="print">
  .noPrint{ display: none; }
  .yesPrint{ display: block !important; }
</style> 
```

并将类添加到“yesPrint”到您要打印的部分

```
 <asp:ContentPlaceHolder class="yesPrint" id="MainContent" runat="server">
  </asp:ContentPlaceHolder> 
```

更多细节：http: [//www.codeproject.com/KB/HTML/Printing_with_CSS.aspx](http://www.codeproject.com/KB/HTML/Printing_with_CSS.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:31:39.053

你可以设置一个打印样式表来格式化打印/你可以隐藏你不想打印的东西。

您可以在此处阅读有关它们的更多信息[http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml)

# iphone - 添加自定义单元格的方法

> ID：10174090
> 
> 赞同：1
> 
> 时间：2012-04-16T12:29:46.217
> 
> 标签：iphone, objective-c, class, customization

我想向我的 customCell.m 添加一个方法，它允许我在一行中添加有关单元格的信息，所以我添加了：

```
 -(void) addInfo:(NSString*) pTitre:(NSString*) pDescritption:(NSString*) pDate: (NSString*)pImage
{
    [[self titre] setText:pTitre];
    [[self description] setText:pDescritption];
    [[self date] setText:pDate];
    [[self couverture] setImage:[UIImage imageNamed:pImage]];
} 
```

但是当我在 mytableview.m 中调用该方法时，如下所示：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 3 ;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *MyIdentifier = @"firstviewcustomcellCell";

firstviewcustomcellCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

if (cell == nil)
{
    NSArray *topLevelObject=[[NSBundle mainBundle] loadNibNamed:@"firestViewCell" owner:nil options:nil];

            for(id currentObject in topLevelObject)
            {
                if([currentObject isKindOfClass:[firstviewcustomcellCell class]])
                {
                    cell=(firstviewcustomcellCell*) currentObject;
                    break;
                }
            }    
}
    [cell addInfo:
     @"journal 1":
     @"description 1":
     @"01/02/2012":
        @"second.png"];

    [cell addInfo:
     @"journal 2":
     @"description 2":
     @"01/02/2012":
     @"second.png"];

    return cell;

} 
```

这就是它所显示的：

[http://img213.imageshack.us/img213/2346/capturdcran20120416142.png](http://img213.imageshack.us/img213/2346/capturedcran20120416142.png)

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:40:52.223

您不能一次添加所有单元格信息...您必须一次添加一个单元格信息...如果您想添加所有单元格信息一次添加而不是放置条件...就像..

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 return 3 ;
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
 {
  static NSString *MyIdentifier = @"firstviewcustomcellCell";

   firstviewcustomcellCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

   if (cell == nil)
 {    
  NSArray *topLevelObject=[[NSBundle mainBundle] loadNibNamed:@"firestViewCell" owner:nil options:nil];

        for(id currentObject in topLevelObject)
        {
            if([currentObject isKindOfClass:[firstviewcustomcellCell class]])
            {
                cell=(firstviewcustomcellCell*) currentObject;
                break;
            }
        }    
   }

if(indexPath.row == 1)
 {
  [cell addInfo:
 [NSString stringWithFormat:@"journal 1"]:
 [NSString stringWithFormat:@"description 1"]:
 [NSString stringWithFormat:@"01/02/2012"]:
    @"second.png"];
}
  else if(indexPath.row == 2)
 {

  [cell addInfo:
  [NSString stringWithFormat:@"journal 2"]:
 [NSString stringWithFormat:@"description 2"]:
 [NSString stringWithFormat:@"01/02/2012"]:
 @"second.png"];
 }

return cell;

 } 
```

希望，它会帮助你......冷静

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:36:01.143

```
[cell addInfo:
 [NSString stringWithFormat:@"journal 1"]:
 [NSString stringWithFormat:@"description 1"]:
 [NSString stringWithFormat:@"01/02/2012"]:
    @"second.png"];

[cell addInfo:
 [NSString stringWithFormat:@"journal 2"]:
 [NSString stringWithFormat:@"description 2"]:
 [NSString stringWithFormat:@"01/02/2012"]:
 @"second.png"]; 
```

请注意这部分代码。那里没有条件。

而是这样做

```
[cell addInfo:
 [NSString stringWithFormat:@"journal %i", indexpath.row]:
 [NSString stringWithFormat:@"description %i", indexpath.row]:
 [NSString stringWithFormat:@"01/02/2012"]:
    @"second.png"]; 
```

# c# - Fortran 函数说明

> ID：10174092
> 
> 赞同：3
> 
> 时间：2012-04-16T12:29:48.350
> 
> 标签：c#, function, fortran

我在 Fortran 中有这个函数，我正在尝试用 C# 重新编码它

```
C **************************************************************** 
C    FUNCTION   POLY 
C***************************************************************** 
      FUNCTION POLY(N,A,X) 
      DIMENSION A(N) 
C
      POLY    = 0\. 
      L       = N 
      DO 1 K  = 1,N 
      POLY    = POLY*X + A(L) 
1     L       = L-1 
      RETURN 
      END 
C***************************************************************** 
```

我发现它`DIMENSION A(N)`创建了一个`N`值向量，但是我们已经`A`从函数参数中获得了一个变量，这是否意味着数组值都等于`A`？如果是这样，那有什么用`A(N)`。顺便说一句，任何人都可以解释这个函数是做什么的，所以我可以在 C# 中重新实现它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:54:37.180

```
 FUNCTION POLY(N,A,X)      ! implicitly real (float) function poly(int n,int a,real x)
      DIMENSION A(N)            ! shape A as 1d array of n values in this scope
C                               ! say nothing (blank comment)
      POLY    = 0\.              ! initialise return variable to float value 0
      L       = N               ! set L (implicitly integer) to n
      DO 1 K  = 1,N             ! for(int k=1; k<=n; ++k)
      POLY    = POLY*X + A(L)   !    update return variable
1     L       = L-1             !    decrement L
      RETURN                    ! return current value for poly
      END 
```

所以在类似c的语法中：

```
float poly(int n, int a, float x) {
    // redim a(n)
    float result = 0;
    int l = n;
    for(int k=1; k <= n; ++k) {
        result = result*x + a(l);
        --l;
    }
    return result;
} 
```

不翻译的位是将 A 重新定义为数组。在 C 中，您将传递一个指针并将其用作数组，而在 C++/C# 中，您可能会传递一个具有自己的长度属性的类似向量的结构。

在 C# 中，使用列表：

```
float poly(List<float> coeffs, float x) {
    float result = 0;
    for(int i=coeffs.Count-1; i >= 0; --i) {
        result = result*x + coeff[i];
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T12:32:34.147

它计算以下形式的多项式`x`：

```
a[1] + a[2]x + a[3]x^2 + ... a[N]x^(N-1) 
```

请记住，Fortran 使用基于 1 的数组索引，并且我在此等式中遵循了该约定。

* * *

你可以像这样用 C# 编写它：

```
double EvaluatePolynomial(double[] a, double x)
{
    double result = 0.0;
    int i = a.Length;
    while (i>0)
    {
        i--;
        result = result*x + a[i];
    }
    return result;
} 
```

在这里，我们使用适合 C# 的基于 0 的数组索引。因此，此函数计算`x`以下形式的多项式：

```
a[0] + a[1]x + a[2]x^2 + ... a[N-1]x^(N-1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T12:38:27.253

*稍微猜测*一下，我认为这是指定参数`A`本身是一个`N`元素数组。

因此，对于 C# 等效项，您不需要单独的`N`参数；您只需要作为 .NET 数组传递`A`，`double[]`因为 .NET 数组可以告诉您它们的`.Length`.

[该函数使用霍纳方法](http://en.wikipedia.org/wiki/Horner%27s_method)计算多项式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T12:51:16.950

该行`DIMENSION A(N)`仅声明了 A 虚拟参数的详细信息（`PARAMETERs`在 Fortran 中非常不同），即它说它是一个从 1 到 N 的数组。其他的没有以这种方式声明，因为该函数使用隐式类型。

# c# - c#linq查询的vb.net等效查询

> ID：10174094
> 
> 赞同：1
> 
> 时间：2012-04-16T12:29:56.237
> 
> 标签：c#, vb.net, linq

任何人都可以为以下 C# linq 查询提供 vb.net 等效查询吗

```
var res= from volunteer in dtavailableVolunteers 
    group volunteer by volunteer.Id into g
    let volunteerDates = g.Select(groupedElement=>groupedElement.date)
    where arr.All(date=>volunteerDates.Contains(date))
    select g.Key 
```

我写了下面的查询，但它抛出“重载解析失败，因为无法使用这些参数调用可访问的“选择””异常

```
 Dim dr As DataRow() = From item In dtavailableVolunteers.AsEnumerable() _ 
 Group item By item.VolunteerId Into g = Group
                          Let volunteerDates = g.[Select](Function(groupedElement) groupedElement.Field("SelectedDate")) _
                          Where SelectedDatesArray.All(Function([SelectedDate]) volunteerDates.Contains([SelectedDate])) Select g 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:51:53.187

我只是从[在线转换工具](http://converter.telerik.com/)转换它.. 我不知道它是否正确。请测试它是否有效...

```
Dim res = _
    Let volunteerDates = g.[Select](Function(groupedElement) groupedElement.[date]) _
    Where arr.All(Function([date]) volunteerDates.Contains([date])) 
```

# php - 当与 MongoDB 的连接未关闭时会发生什么？

> ID：10174096
> 
> 赞同：5
> 
> 时间：2012-04-16T12:30:03.740
> 
> 标签：php, mongodb, mongodb-php

我有以下 PHP 脚本，它基本上连接到 MongoDB，写入一个文档，然后关闭连接 19000 次：

```
<?php
for($i=0; $i < 19000; $i++) {
    $con = new Mongo("mongodb://localhost:27017");
    $db = $con->selectDB('test');

    $col = $db->selectCollection('close_wait_test');
    $col->insert(array('Test' => 'Value1'));

    $con->close();
}
?> 
```

运行此脚本一次可以正常工作，但如果我在几秒钟后运行脚本，我会收到“无法分配请求的地址”异常，这是可以理解的，因为服务器系统可能会用完端口。

但是，如果我删除 $con->close(); 我可以一遍又一遍地运行该脚本，而不会对数据库造成任何明显的压力。我假设这是因为与数据库的连接是持久的，并且在脚本上重用了相同的初始连接。

我想知道的是，如果 20k+ 个不同的用户同时运行 1 个该脚本循环，数据库会发生什么情况？例如，是否会因为每个用户需要创建一个到数据库的连接而简单地用完可用连接？还是所有这些用户都使用第一个用户创建的相同初始连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:50:59.373

您不应该在每次迭代时调用 ->close() 。如果您调用 close，则告诉驱动程序不要重用持久连接。如果你在一个紧密的循环中运行它，那么操作系统会用完端口来使用，因为它们都处于 TIME_WAIT 状态。

PHP 驱动程序使用持久连接，如果（不调用 ->close）您像示例中那样在紧密循环中运行“new Mongo”，驱动程序将*不会*建立新连接并重用已经存在的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:42:51.170

你会得到一个致命的错误：

`PHP Fatal error: Uncaught exception 'MongoConnectionException' with message 'Cannot assign requested address' in /home/pierre/test.php:3 Stack trace: #0 /root/test.php(3): Mongo->__construct('mongodb://local...') #1 {main} thrown in /home/pierre/test.php on line 3`

`c=0; while [ $c -le 20000 ]; do php test.php; c=$[c+1]; done`

带有 mongodb 和默认配置的 Testet。MongoDB 继续运行，其他脚本继续工作。也许您应该考虑使用诸如作业服务器之类的东西，例如 gearman。

# javascript - 从另一个文件加载js函数

> ID：10174099
> 
> 赞同：-2
> 
> 时间：2012-04-16T12:30:15.533
> 
> 标签：javascript, jquery

我有一个这样的 javascript

```
$.fn.hasBorder = function() {   
  if ((this.outerWidth() - this.innerWidth() > 0) ||  (this.outerHeight() - this.innerHeight() > 0)){
        return true;
    }
    else{
        return false;
    }
};

function removeImage(){
$(document).ready(function() {
  var selectedImgsArr = [];
   $("img").click(function() {

      if($(this).hasBorder()) {
          $(this).css("border", "");
          //you can remove the id from array if you need to
      }
      else {
         $(this).css("border", "1 px solid red");
         selectedImgsArr.push($(this).attr("id")); //something like this 
         alert(selectedImgsArr);
 }
   }); 
```

我将此脚本加载到我的页面。为了使用这个脚本

我写了这个

```
div load="removeImage"> 
```

什么不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:34:19.480

您正在考虑“onload”事件。但这只能用于“body”元素。即使这样有效，您也必须像这样“... =“removeImage()”来编写它。

SO上有类似的问题，[这个](https://stackoverflow.com/questions/4057236/how-to-add-onload-event-in-div)解释了如何在“div”上放置“onload”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:37:07.067

如果你使用`load`你的，`div`你就不能`document.ready`在脚本上使用。因为如果您这样做，您所说的是：“在 div 加载事件上注册一个侦听器，该侦听器将在页面准备好时执行”。但是......该事件在注册监听器之前被触发。

你也不能`onload`在 a 上使用`div`，只是在`body`.

简而言之，这样做：

```
$(document).ready(function() {
  var selectedImgsArr = [];
   $("img").click(function() {
      if($(this).hasBorder()) {
          $(this).css("border", "");
          //you can remove the id from array if you need to
      } else {
         $(this).css("border", "1 px solid red");
         selectedImgsArr.push($(this).attr("id")); //something like this 
         alert(selectedImgsArr);
      }
  });
}); 
```

并`load="removeImage"`从您的 HTML 中删除。

# java - 用一个大的正数加载一个 BigInteger

> ID：10174106
> 
> 赞同：0
> 
> 时间：2012-04-16T12:30:30.253
> 
> 标签：java, android, biginteger, uint, uint64

我正在尝试从 .NET 移植一个在任何地方都使用 UInt64 的代码，我已经成功地使用了 BigInteger，但不幸的是，我遇到了一些非常简单的事情，比如使用十六进制值表中的值加载 BigInteger。

在某些时候，我想加载一个带有**正数**0x990951BA 的 BigInteger，我看到的唯一方法是使用 BigInteger b = BigInteger.valueOf(0x990951BA)，这当然不起作用，因为 Java 将参数视为 long，使其消极的。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:32:13.723

`long`在 Java 中是 64 位的，因此您应该能够将其用作`UInt64`. 要指定`long`文字，请将 an 附加`l`到常量以使其识别为`long`而不是`int`.

```
BigInteger b = BigInteger.valueOf(0x990951BAl); 
```

对于即使长时间过大的值的后备方式是将其解析为文本。

```
BigInteger b = new BigInteger("990951BA", 16); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:52:13.623

由于您要移植使用无符号长整数的代码，因此您可能还想查看来自[Google Guava的](http://code.google.com/p/guava-libraries/)[UnsignedLong](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/UnsignedLong.html)。（以及同一包中的 UnsignedLongs 助手类）。

# memory - Intel 8086 和 8088 中的内存库

> ID：10174109
> 
> 赞同：2
> 
> 时间：2012-04-16T12:30:45.020
> 
> 标签：memory, x86-16

为什么我们在 8086 中需要两个内存条，而在 8088 中只需要一个内存条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:12:47.037

8086 是具有 16 位内存总线的 16 位处理器。这需要一个可以一次提供 16 位的内存子系统，可能使用两组 8 位内存芯片构建。

8088 使用 8 位内存总线，使其更便宜。它旨在节省构建系统所需的最少芯片数量。

# sql-server - 如何从 2 列的 UNION 通过计数和名称 desc 获得 TOP 1 出现值

> ID：10174115
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:30:57.517
> 
> 标签：sql-server

我需要 2 列中的 TOP 1 字符串，该值应按出现次数和名称降序返回。这是在 SQL-Server 中。

这是一个示例表：

```
------------------------------
|   Column1    |   Column2   |
------------------------------
|     John     |   Michael   |
------------------------------
|    Thomas    |    John     |
------------------------------
|    Martin    |    Rick     |
------------------------------
|    David     |   Thomas    |
------------------------------
|     John     |   Martin    |
------------------------------ 
```

生成的订单应该是什么样子：

```
----------------------------
|   Column1    |   COUNT   |
----------------------------
|     John     |     3     |
----------------------------
|    Martin    |     2     |
----------------------------
|    Thomas    |     2     |
----------------------------
|     David    |     1     |
----------------------------
|    Michael   |     1     |
----------------------------
|     Rick     |     1     |
---------------------------- 
```

结果应该是什么样子：

```
----------------------------
|   Column1    |   COUNT   |
----------------------------
|     John     |     3     |
---------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:35:17.553

```
select top 1 c, count(*) [Count]
from
(
   select column1 c
     from ATable
   union all
   select column2
     from ATable
) a
group by c
order by count(*) desc 
```

要获得最常用的名称并按字母顺序选择其中的第一个：

```
select top 1 c, count(*) [Count]
from
(
   select column1 c
     from ATable
   union all
   select column2
     from ATable
) a
group by c
order by count(*) desc, c 
```

如果您想做同样的事情但只使用一列：

```
select top 1 column1, count(*) [Count]
  from ATable
group by column1
order by count(*) desc, column1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:39:25.370

从 SQL 2005 开始，您可以使用[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)：

```
-- Example Data
DECLARE @Data TABLE (Column1 VARCHAR(10), Column2 VARCHAR(10))
INSERT @Data VALUES ('A', 'B'), ('B', 'A'), ('C', 'A'), ('D', 'E'), ('A', 'D')

SELECT TOP 1 Name, COUNT(*)
FROM @Data d
    UNPIVOT (Name FOR Col IN (Column1, Column2)) AS unpvt
GROUP BY Name
ORDER BY COUNT(*) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:35:26.443

```
CREATE TABLE #t (Column1 nvarchar(50), Column2 nvarchar(50))
INSERT INTO #t (Column1, Column2)
VALUES ('John', 'Michael')
,('Thomas', 'John')
,('Martin', 'Rick')
,('David', 'Thomas')
,('John', 'Martin')

;WITH cte (Column1)
AS
(
    SELECT Column1
    FROM #t

    UNION ALL

    SELECT Column2
    FROM #t
)

SELECT TOP 1
        Column1
        ,COUNT(*) as [COUNT]
FROM cte
GROUP BY Column1
ORDER BY [COUNT] DESC 
```

# asp.net-mvc-3 - 通过 Ajax 在 ASP.NET MVC3 中上传文件不起作用

> ID：10174116
> 
> 赞同：2
> 
> 时间：2012-04-16T12:31:07.320
> 
> 标签：asp.net-mvc-3, forms, jquery

我已经在 mvc3 中正常提交了一个文件。现在我需要对 Ajax 做同样的事情。所以我使用了这个 jquery 插件：http: [//jquery.malsup.com/form/#ajaxSubmit](http://jquery.malsup.com/form/#ajaxSubmit)

查看代码：

```
$(document).ready(function () {
        var options = {
            url: "/Home/TakeFile",
            dataType: "json",
            success: showResponse
        };

        $("#File").submit(function () {
            alert("submit");
            $(this).ajaxSubmit(options);
            return false;
        });
    });

    function showResponse(responseText, statusText, xhr, $form) {
        alert("showResponse");
        alert(responseText.fileName);
    }
</script>

@using (Html.BeginForm("TakeFile", "Home", FormMethod.Post, new { @id = "File", enctype = "multipart/form-data" }))
{
    <input type="file" id="file" />
    <input type="submit" value="Click to submit" id="button" />
} 
```

控制器代码：

```
[HttpPost]
        public ActionResult TakeFile(HttpPostedFileBase file)
        {
            return Json(new { fileName=file.FileName});
        } 
```

我的“TakeFile”方法中的文件参数始终为空。似乎无法使其正常工作。另外，我们可以使用“Ajax.BeginForm()”帮助器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:52:29.913

AFAIK，您不允许通过 ajax 上传文件...发布文件需要完整的回发。

你需要一个闪存解决方案或类似的东西才能让它发生。例如使用[上传...](http://www.uploadify.com/)

[请参阅此博客文章以使其正常工作](http://midnightprogrammer.net/post/Upload-Files-In-RAZOR-With-jQuery-Uploadify-Plugin.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:15:14.367

a 中的html 元素的**name**属性用于在提交表单后引用表单数据。`<input>``<form>`

注意：只有具有 name 属性的表单元素才会在提交表单时传递其值。

由于action方法 `public ActionResult TakeFile(HttpPostedFileBase file){..}`有一个参数名称'file'，在视图中，file输入元素应该有一个`name='file'`属性。更新代码：

```
@using (Html.BeginForm("TakeFile", "Home", FormMethod.Post, new { @id = "File", enctype = "multipart/form-data" }))
{
    <input type="file" id="file" name="file" />
    <input type="submit" value="Click to submit" id="button" />
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:35:47.693

尝试使用以下

```
<input type="file" id="file" name = "attachment"/> 
```

在您的控制器中添加以下代码以获取文件对象

```
var file = Request.Files["attachment"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:01:36.630

上传文件时选项中的`dataType:json`选项似乎很奇怪，您是否尝试将其删除？

也尝试使用`Name`输入类型的属性

```
<input type="file" id="file" name="file" /> 
```

# nhibernate - 在 Mapping By Convention NHibernate 3.3 中映射组件

> ID：10174118
> 
> 赞同：0
> 
> 时间：2012-04-16T12:31:11.690
> 
> 标签：nhibernate, components, nhibernate-mapping

我正在尝试将类型的组件：FormFieldType 映射到类型的属性：FormField。

我在 db 中有两个表：FormField 和 FormFieldType。

```
mapper.Class<FormField>(map=>map.Component<FormFieldType>(p=>p.FormFieldType, 
   cm=>
      {
       cm.Property(x => x.FormFieldTypeName, m => m.Column("FORM_FIELD_TYPE_NAME"));
       cm.Property(x => x.FieldType, m => m.Column("FIELD_TYPE"));
       cm.Property(x => x.Regex, m => m.Column("REGEX"));
      })); 
```

当我尝试查询 FormField 表时，它说列：FORM_FIELD_TYPE_NAME、FIELD_TYPE、REGEX 不存在。这是因为 nhibernate 认为它们是 FormField 表的一部分。但它们在 FormFieldType 表中。如何正确映射这个？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:21:34.617

根据我在 nhusers 板上的回答。您希望对 2 个实体使用 ManyToOne，而不是将其映射为组件。组件用于将多个域对象映射到单个表。

# java - 斯坦福 NER：提取单独的实体列表？

> ID：10174122
> 
> 赞同：4
> 
> 时间：2012-04-16T12:31:37.513
> 
> 标签：java, stanford-nlp, named-entity-recognition

我可以使用以下代码获取带有命名实体注释的字符串。

```
String NEString =  classifier.classifyWithInlineXML(fileContents) 
```

我想知道是否有任何方法可以调用，以便我可以在文件中获取单独的实体（PERSON、ORGANIZATION、LOCATIOIN）列表，这样我就不必使用上述方法解析检索到的字符串来获取实体清单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T00:13:34.210

在我看来，运行分类的清理方法是：

```
List<Triple<String,Integer,Integer>> out = classifier.classifyToCharacterOffsets(text);
triple.first(): entity type
triple.second(): start position
triple.third(): end position 
```

它将后续实体分组并返回实体的开始和结束位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:58:08.823

据我所知，有 3 种方法可以获取带注释的字符串：

1)`classifier.classifyToString(" ")`

2)`classifier.classifyWithInlineXML(" ")`

3)`classifier.classifyToString(" ", "xml", true)`

第一个是最容易分开的。不幸的是，没有您希望的任何方法。

# python - ImportError：无法导入名称 saxexts

> ID：10174125
> 
> 赞同：0
> 
> 时间：2012-04-16T12:32:00.690
> 
> 标签：python, xml, ubuntu, sax

我想在我的 Ubuntu 10.04 64 位上使用 python 脚本，但由于以下错误，我找不到让它工作的方法：

```
Traceback (most recent call last):
  File "test.py", line 24, in <module>
    from xml.sax import saxexts
ImportError: cannot import name saxexts 
```

我知道这在某种程度上与 SAX python 库有关，但我找不到这个包在 ubuntu 下的位置。我在突触下搜索过，但没有与 python-sax 相关的包或类似的包。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:44:50.247

@Stony 是对的，默认情况下 saxexts 不包含在 Python xml 包中。要修复它，您必须将模块添加到 sax 包中，即复制`saxexts.py`（您可以从@Stony 提供的 Koders[页面](http://www.koders.com/python/fid77F4A703EEFA623DC8F155A8C7D712395274F961.aspx?s=SAX#L2)`/usr/local/lib/python2.7/xml/sax/saxexts.py`获取它）到某个地方（取决于您或 Ubuntu 安装 Python 的位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:44:01.747

我认为你必须安装python xml，

[http://sourceforge.net/projects/pyxml/](http://sourceforge.net/projects/pyxml/)

也许这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:41:07.520

**“saxexts”**不是普通 sax 库的一部分。你可以看[这里](http://www.koders.com/python/fidFFE4CF2E5110E306F73EF5994A49E1F40E7DE11D.aspx?s=SAX#L2)。它是一个实验性扩展。

# bash - 用换行符替换 bash 参数

> ID：10174126
> 
> 赞同：2
> 
> 时间：2012-04-16T12:32:04.023
> 
> 标签：bash, arraylist, newline, substitution

我的 shell 脚本似乎有点生疏了。我的愿望是在 bash 中循环一个 arraylist 配置变量，并使用在此循环中获得的必要参数调用一个函数，所有这些都无需分叉。

基本上，我创建了一个内部脚本人类可解析的逗号分隔配置变量，如下所示：

```
CONFIG="
     0, 0x00, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' %
     1, 0x01, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' %
    51, 0x10, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' %
    63, 0xd4, 'Power up and unmute DAC' %
    64, 0x00, 'Power up and unmute DAC' %
" 
```

然后我想像这样循环它的参数：

```
while read reg val expl; do
    printf "%s %s\n" "Calling i2c_write() with reg=${reg//,/}" \
          "val=${val//,/} expl=$expl __EOL__";
    # i2c_write() call
done <<< "${CONFIG//\%/$'\n'}" 
```

当前输出为：

```
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg=0 val=0x00 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg=1 val=0x01 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg=51 val=0x10 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg=63 val=0xd4 expl='Power up and unmute DAC' __EOL__
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg=64 val=0x00 expl='Power up and unmute DAC' __EOL__
Calling i2c_write() with reg= val= expl= __EOL__
Calling i2c_write() with reg= val= expl= __EOL__ 
```

所需的输出将是：

```
Calling i2c_write() with reg=0 val=0x00 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg=1 val=0x01 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg=51 val=0x10 expl='Reset the chip, enable PLL with P=4, R=1, J=9, D=6338' __EOL__
Calling i2c_write() with reg=63 val=0xd4 expl='Power up and unmute DAC' __EOL__
Calling i2c_write() with reg=64 val=0x00 expl='Power up and unmute DAC' __EOL__ 
```

我很乐意用更合适的结构替换 CONFIG 变量，只要：

*   a) 不需要分叉来遍历变量的条目，并且
*   b) 人工解析和编辑所述变量的条目相当容易，并且
*   c) 它适用于 bash 3.2.x 以上版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:44:39.980

这将运行，`sh`所以我认为它会在`bash 3.1`. 它不喜欢`reg`and`var`参数替换 ( `//,/`) 所以我只是将它们更改为截断逗号。并将输入法更改为`here-doc`vs 你的`here-string`

我不知道你为什么`%`在每个输入行的末尾都有。只是在那里放一个换行符吗？（但那里已经有一个换行符，`%`替换只是添加空行）......

这是修改后的脚本

```
while read -r reg val expl; do
    printf "%s %s %s\n" \
      "Calling i2c_write() with reg=${reg%,}" \
                               "val=${val%,}" \
                               "expl=$expl __EOL__";
done <<EOF
     0, 0x00, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
     1, 0x01, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    51, 0x10, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    63, 0xd4, 'Power up and unmute DAC'
    64, 0x00, 'Power up and unmute DAC'
EOF 
```

* * *

这是一个`awk`版本（只是为了比较）。它读取相同的数据。

```
awk -vFS=\' '{split($1,f," ")
              split(f[1]f[2],f,",")
              print "Calling i2c_write() with" \
                     " reg=" f[1] \
                     " val=" f[2] \
                     " expl="FS $2 FS" __EOL__"
}' <<EOF
:: data ::
END 
```

并且`sed`为了很好的衡量......

```
sed -nr "s/^ +([0-9]+), +([0-9a-fx]+), +('.*')$/\
Calling i2c_write() with reg=\1 val=\2 expl=\3 __EOL__/p
" <<EOF
:: data ::
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:56:11.957

是否有必要保留这种复杂的 CONFIG 格式？

这应该有效：

```
#!/bin/bash
CONFIG="
     0, 0x00, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
     1, 0x01, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    51, 0x10, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    63, 0xd4, 'Power up and unmute DAC'
    64, 0x00, 'Power up and unmute DAC'
"

while IFS=,$'\n ' read -r reg val expl; do
    [ -z "$reg" ] && continue
    printf "%s %s\n" "Calling i2c_write() with reg=${reg}" \
          "val=${val} expl=$expl __EOL__";
    # i2c_write() call
done <<< "${CONFIG}" 
```

我只是`%`用文字换行符替换，因为无论如何你后来都这样做了，并且`,`还做了一个分隔符。我还进行了测试以跳过前导和尾随的空行。

如果必须，您可以保留`%`到换行符的翻译，其余部分保持不变。

编辑：

如果您对保持复杂的 CONFIG 格式的约束更少，我可以提出以下替代方案吗？

```
#!/bin/bash

config+=(0 0x00 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338')
config+=(1 0x01 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338')
config+=(51 0x10 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338')
config+=(63 0xd4 'Power up and unmute DAC')
config+=(64 0x00 'Power up and unmute DAC')

for((i=0;i<${#config[@]};i+=3)) ; do
    reg=${config[$i]}
    val=${config[$i+1]}
    expl="${config[$i+2]}"
    printf "Calling i2c_write() with reg=%d val=%s expl='%s' __EOL__\n" \
            $reg $val "$expl"
    # i2c_write() call
done 
```

这假定您总是有 3 个参数集，这看起来是正确的，并且避免了混乱的解析逻辑。它应该稍微更有效率。我也将其更改`printf`为更简单。

编辑 2：与 Peter.O 竞争，这是一个运行于`sh`：

```
#!/bin/sh
CONFIG="
     0, 0x00, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
     1, 0x01, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    51, 0x10, 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
    63, 0xd4, 'Power up and unmute DAC'
    64, 0x00, 'Power up and unmute DAC'
"

echo "$CONFIG" | while IFS=' ', read -r reg val expl; do
    [ -z "$reg" ] && continue
    printf "Calling i2c_write() with reg=%d val=%s expl=%s __EOL__\n" \
            $reg $val "$expl"
    # i2c_write() call
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T19:21:20.537

```
main() {
    local a n
    while read -r a; do
        local -a 'args=('"$a"')'
        printf "%s reg=%s val=%s expl='%s' __EOL__\n" 'Calling i2c_write() with' "${args[@]}"
        # i2c_write {reg,val,expl}"=${args[n++%3]}"
    done <<"EOF"
0 0x00 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
1 0x01 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
51 0x10 'Reset the chip, enable PLL with P=4, R=1, J=9, D=6338'
63 0xd4 'Power up and unmute DAC'
64 0x00 'Power up and unmute DAC'
EOF
}

main 
```

我假设您正在尝试在此处存储 3 个字段的“结构”并将它们作为 3 个单独的参数传递。注释行是我希望您可能会调用该命令的方式。由于您的 printf 仅通过了一个参数，因此问题不是很清楚应该传递的参数是什么。如果是这样的话，那么这个问题就简单多了。

假设您正在使用带有数组的外壳，那么您绝对需要一个数组。不幸的是，Bash 缺少多维数组，而 bash <4.0 缺少关联数组，这基本上在间接和字符串中解析命令之间留下了选择——两者都很丑陋。就我个人而言，无论如何我都会尝试使用数组。

上述未记录的、不可移植的、不保证未来安全的 hack 在当前版本之前应该在 Bash 3 上“安全”并满足您的要求。bash 3 的限制非常痛苦，因为我们不能使用`printf -v`，并且没有分叉意味着没有命令替换，这意味着没有`printf '%q'`。基本上，heredoc 的每一行必须是通常是复合赋值的有效内容（正确引用和转义）。

[http://mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)

# javascript - 有什么好的方法可以限制向用户显示的评论数量，直到他们选择查看全部？

> ID：10174127
> 
> 赞同：2
> 
> 时间：2012-04-16T12:32:08.640
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

目前，我在模板中有一个 each 循环，用于显示评论。假设用户对他们发布的微博有 50 条评论。将显示一个包含 50 条评论的长列表。

为了节省页面空间，我决定将每个微博显示的评论限制为 2-3 条。如果用户希望查看更多，他们可以单击“查看更多”或“查看全部”。我想知道如果有 10,000 条评论并且用户单击“查看全部”，服务器将如何应对，这就是为什么我可以选择实施“查看更多”然后再显示 50 条评论”

**无论如何，我想知道一种限制向用户显示的评论数量的好方法，直到他们选择查看全部？**

如果我走 jquery/js 路线并使其仅显示 2-3 条最新消息，其他消息仍将被加载到后端，难道不是更好的选择是在 ruby​​ on rails 中控制它不知何故？

我真的很想要一些关于最佳方式的不错的解决方案/信息。

我很乐意提供您需要的任何进一步信息。

谢谢亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:36:07.960

你可以像 Facebook 一样：

*   仅显示 2/3 评论。仅从后端加载 2/3 评论。
*   当用户点击“显示更多”时，它会显示 50 多个。它通过 AJAX 加载它们。因此，在后端，您只会收到“获得 50 条评论，除了三个第一”之类的请求。
*   显示另一个“显示更多”链接。它将加载除 53 个第一之外的 50 个其他评论。

在 Facebook 上，您一次不能加载超过 50 条评论。我认为你也应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:02:42.393

我想在 and 之间有一个简单的`belongs_to`and`has_many`关系。我通常会这样做：`Post``Comment`

路线：

```
resources :posts do
  resources :comments
end 
```

模型：设置默认页面大小：

```
class Comments < ActiveRecord::Base
  belongs_to :post

  DEFAULT_PAGE_SIZE = 25
end 
```

控制器：

```
class CommentsController
  def index
    post = Post.find(params[:post_id])
    offset = params[:offset] || 0
    limit = params[:limit] || Comment::DEFAULT_PAGE_SIZE
    @comments = post.comments.offset(offset).limit(limit)

    respond_to do |format|
      #respond as you like
    end
  end

  # more actions...
end 
```

查看，加载更多链接之类的，以通过 ajax 加载评论：

```
<%= link_to "load more comments", post_comments_path(@post, :format => 'js'), :method => :get, :remote=>true id='load-more-comments' %> 
```

并且您还想将偏移量绑定到 ajax 帖子：

```
$ ->
  $('#load-more-comments').on 'ajax:before', (event) ->
    el = $(this)
    offset = #count your offset, I often do by counting the <li>s already in the <ul>
    el.data 'params', "offset=#{offset}"
    # you could also pass the limit: el.data 'params', "offset=#{offset}&limit=#{some limit}"
  .on 'ajax:complete', (event, xhr, status) ->
    el = $(this)
    el.removeData 'params' # remember to remove this. 
```

我也对这样做的更好方法感兴趣。期待答案和批评。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:55:03.533

干净的方法是实现评论分页。

# c# - 为什么使用 Func<> 比在通用序列创建器上使用 new() 约束要快得多

> ID：10174135
> 
> 赞同：13
> 
> 时间：2012-04-16T12:32:26.897
> 
> 标签：c#, optimization

考虑以下代码...

在我对 Windows 7 x64 PC（Intel i7 3GHz）上的 RELEASE（不是调试！）x86 构建的测试中，我获得了以下结果：

```
CreateSequence() with new() took 00:00:00.9158071
CreateSequence() with creator() took 00:00:00.1383482

CreateSequence() with new() took 00:00:00.9198317
CreateSequence() with creator() took 00:00:00.1372920

CreateSequence() with new() took 00:00:00.9340462
CreateSequence() with creator() took 00:00:00.1447375

CreateSequence() with new() took 00:00:00.9344077
CreateSequence() with creator() took 00:00:00.1365162 
```

似乎使用 Func<> 定义委托来创建新对象比直接调用“new T()”快 6 倍以上。

我觉得这有点出乎意料......我猜这是因为 Jitter 做了一些内联，但我原以为它也能够优化“new T()”。

有人对此有解释吗？

也许我犯了一些错误。（我已经考虑过垃圾收集器可能产生的影响，但是重新排列代码并添加 GC.Collect() 等并不会显着改变结果）。

无论如何，这是代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch sw = new Stopwatch();

            int repeats =    100;
            int count   = 100000;

            for (int outer = 0; outer < 4; ++outer)
            {
                sw.Restart();

                for (int inner = 0; inner < repeats; ++inner)
                {
                    CreateSequence<object>(count).Count();
                }

                Console.WriteLine("CreateSequence() with new() took " + sw.Elapsed);
                sw.Restart();

                for (int inner = 0; inner < repeats; ++inner)
                {
                    CreateSequence(count, () => new object()).Count();
                }

                Console.WriteLine("CreateSequence() with creator() took " + sw.Elapsed);
                Console.WriteLine();
            }
        }

        public static IEnumerable<T> CreateSequence<T>(int n) where T: new()
        {
            for (int i = 0; i < n; ++i)
            {
                yield return new T();
            }
        }

        public static IEnumerable<T> CreateSequence<T>(int n, Func<T> creator)
        {
            for (int i = 0; i < n; ++i)
            {
                yield return creator();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T12:34:14.750

`new()`约束只确保传入的类型具有无参数构造函数。如果您实际调用`new T()`（或无论您的类型参数的名称是什么），它实际上会这样做：

```
Activator.CreateInstance<T>(); 
```

其核心是使用反射。

# android - Android onTouch 事件仅在第一次被调用

> ID：10174142
> 
> 赞同：0
> 
> 时间：2012-04-16T12:32:56.100
> 
> 标签：android, android-layout, android-gallery, ontouchlistener

我有一个用于 Android 应用程序的图库查看器。

我需要先展示一张大图，然后在它下面展示其他图片的缩略图。5 秒后，缩略图消失，当用户触摸屏幕时，缩略图应该会再次出现。

这里的问题是，如果缩略图再次出现，它们将不再消失，因此这只适用于第一次。

我该如何解决这个问题？

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/GalleryImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" >
    </ImageView>

    <Gallery
        android:id="@+id/GalleryThumbnails"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/GalleryImage" />
</RelativeLayout> 
```

这是我的实现：

```
public class GalleryView extends Activity {
    Integer[] pics = { R.drawable.antartica1, R.drawable.antartica2, R.drawable.antartica3, R.drawable.antartica4, R.drawable.antartica5, R.drawable.antartica6, R.drawable.antartica7,
            R.drawable.antartica8, R.drawable.antartica9, R.drawable.antartica10 };
    ImageView imageView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery_view_layout);

        final Gallery ga = (Gallery) findViewById(R.id.GalleryThumbnails);
        ga.setAdapter(new ImageAdapter(this));

        imageView = (ImageView) findViewById(R.id.GalleryImage);

        // We show the first image when creating the view gallery

        imageView.setScaleType(ImageView.ScaleType.CENTER);
        imageView.setImageResource(pics[0]);

        // Hiding the thumbnails after 5 seconds

        final View v = new View(this);
        v.postDelayed(new Runnable() {
            public void run() {
                ga.setVisibility(View.GONE);
            }
        }, (long) 5000);

        // Showing the thumbnails again when touching the screen
        // TODO: Not working yet

        imageView.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    ga.setVisibility(View.VISIBLE);
                }
                return false;
            }
        });

        ga.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                imageView.setScaleType(ImageView.ScaleType.CENTER);
                imageView.setImageResource(pics[arg2]);
            }
        });
    }

    public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        public int getCount() {

            return pics.length;
        }

        public Object getItem(int arg0) {
            return arg0;
        }

        public long getItemId(int arg0) {
            return arg0;
        }

        // Thumbnails gallery

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv = new ImageView(ctx);
            iv.setImageResource(pics[arg0]);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            iv.setLayoutParams(new Gallery.LayoutParams(200, 120));
            iv.setBackgroundResource(imageBackground);
            return iv;
        }
    }
} 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:48:37.630

这是奇怪的代码

```
 final View v = new View(this);
    v.postDelayed(new Runnable() {
        public void run() {
            ga.setVisibility(View.GONE);
        }
    }, (long) 5000); 
```

您正在创建一个悬空视图以安排对 ga 的延迟调用。

我猜你的意思是

```
private Gallery ga; // make ga to a member

private void scheduleHide ()
{
    ga.postDelayed(new Runnable() {
        public void run() {
            ga.setVisibility(View.GONE);
        }
    }, (long) 5000);
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery_view_layout);

    ga = (Gallery) findViewById(R.id.GalleryThumbnails);
...
  scheduleHide ();
...
    imageView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                ga.setVisibility(View.VISIBLE);
                scheduleHide ();
            }
            return false;
        }
    });
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:43:16.237

让我自己：只需在以下内容中包含对计时器的另一个调用`setOnItemClickListener`：

```
ga.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                final View v = new View(getApplicationContext());
                v.postDelayed(new Runnable() {
                    public void run() {
                        ga.setVisibility(View.GONE);
                    }
                }, (long) 5000);
                imageView.setScaleType(ImageView.ScaleType.CENTER);
                imageView.setImageResource(pics[arg2]);
            }
        }); 
```

这就是所有人:)

# c# - 使用关联的应用程序打开文件

> ID：10174156
> 
> 赞同：84
> 
> 时间：2012-04-16T12:33:43.647
> 
> 标签：c#, process, file-association

我想寻求有关从 c# 应用程序和关联应用程序打开文件的帮助。我试过这个：

```
 ProcessStartInfo pi = new ProcessStartInfo(file);
      pi.Arguments = Path.GetFileName(file);
      pi.UseShellExecute = true;
      pi.WorkingDirectory = Path.GetDirectoryName(file);
      pi.FileName = file;
      pi.Verb = "OPEN";
      Process.Start(pi); 
```

或这个：

```
 Process.Start(file); 
```

其中两个示例中的字符串`file`都表示尝试打开的文件的完整路径。现在，一切都运行良好，除了**带有 ACDSee 应用程序的 (jpg) 图像**。Irfanview 协会运作良好，MS 办公文件也很好。在尝试打开与 acdsee 关联的 jpg 图像后，它只会在通知区域中运行 acdsee 而不会打开文件。

我发现，在 *.jpg 图像的注册表**CLASSES_ROOT**中，有一个 ACDSee.JPG 值作为关联的应用程序，并且在这个键下，在 shell- **>Open->Command**中有一个路径：

```
"C:\Program Files\ACD Systems\ACDSee\ACDSee.exe" /dde 
```

我觉得这很奇怪，这`/dde`就是为什么我无法打开文件的原因。我意识到在同一个 reg key **shell->Open**中有一些`DDEExec`带有值的键条目`[open("%1")]`

对于 Irfan 视图或其他检查的应用程序，没有 ddeexec，只有普通命令，如

```
"C:\Program Files (x86)\IrfanView\i_view32.exe" "%1" 
```

可以在将 %1 交换为文件名后从命令行~~运行，但我无法从命令行中的 acdsee 条目运行命令:(~~

所以我的问题是，我如何设置`ProcessStartInfo`对象以**确保它**通过双击运行所有文件，就像它在资源管理器中一样，标准和这个`DDEExec`？还有其他类似`DDEExec`的事情我应该注意吗？谢谢和对不起我的英文

**更新**：因为这个问题仍然得到赞成，我想澄清接受的答案是有效的。我只对旧版本的 ACDSee 有问题，而对`Process.Start`命令或`jpg`扩展名没有问题。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-04-16T12:38:28.740

写吧

```
System.Diagnostics.Process.Start(@"file path"); 
```

例子

```
System.Diagnostics.Process.Start(@"C:\foo.jpg");
System.Diagnostics.Process.Start(@"C:\foo.doc");
System.Diagnostics.Process.Start(@"C:\foo.dxf");
... 
```

shell 将运行从注册表中读取它的相关程序，就像通​​常的双击一样。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2019-02-19T10:25:55.737

在**.Net Core**（从 v2.2 开始）中，它应该是：

```
new Process
{
    StartInfo = new ProcessStartInfo(@"file path")
    {
        UseShellExecute = true
    }
}.Start(); 
```

相关的github问题可以在[这里找到](https://github.com/dotnet/corefx/issues/10361)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-07-23T09:59:17.153

这是一个旧线程，但以防万一有人像我一样遇到它。pi.FileName 需要设置为要用于打开文件的可执行文件的文件名（可能还有 file 的完整路径）。下面的代码适用于我用 VLC 打开视频文件。

```
var path = files[currentIndex].fileName;
var pi = new ProcessStartInfo(path)
{
    Arguments = Path.GetFileName(path),
    UseShellExecute = true,
    WorkingDirectory = Path.GetDirectoryName(path),
    FileName = "C:\\Program Files (x86)\\VideoLAN\\VLC\\vlc.exe",
    Verb = "OPEN"
};
Process.Start(pi) 
```

Tigran 的答案有效，但将使用 Windows 的默认应用程序打开您的文件，因此如果您想使用非默认应用程序打开文件，使用 ProcessStartInfo 可能会很有用。

# javascript - 如何在Jquery / Javascript中的orientationchange事件上获取Android上的页面宽度？

> ID：10174160
> 
> 赞同：2
> 
> 时间：2012-04-16T12:34:05.450
> 
> 标签：javascript, jquery, android, width, orientation-changes

我需要在orientationchange 上计算屏幕宽度。

我这样做是这样的：

```
$(window).on('orientationchange', function(event){
   $(this).panelWidth("orientationchange")
   });

panelWidth: function (fromWhere) {
   window.setTimeout(function () {
      var $wrapWidth = $('div:jqmData(wrapper="true").ui-page-active').innerWidth();
      console.log( $wrapWidth );
      },10);
   }); 
```

我已经在使用 10ms 延迟来计算屏幕宽度，但在 Android 上它仍然无法正常工作......

我的屏幕是 320x480。如果我从纵向开始并更改为横向，我会得到 320 像素。当我改回纵向时，我控制台 480px，所以宽度似乎总是在方向实际改变之前计算。

如果可能的话，我不想增加超时。还有哪些其他方法可以确保仅在 Android 完成“转动”屏幕时才计算 $wrapWidth？

感谢帮助！

**编辑**：
来自 Jquery Mobile sourceode 的一些信息：

```
...as the actual screen resize takes place before or after the orientation 
change event has been fired depending on implementation (eg android 2.3 is 
before, iphone after). More testing is required to determine if a more reliable 
method of determining the new screensize is possible when orientationchange 
is fired. (eg, use media queries + element + opacity) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:14:15.903

这是框架 Android 设备中的错误。你可以做两件事。

1.  据此，[将](http://forum.jquery.com/topic/orientationchange-event-returns-wrong-values-on-android)超时更改为 100 毫秒。显然它会解决问题。
2.  由于在源发生更改之前触发的事件，请使用相反的宽度和高度值。像：

    $(window).bind('orientationchange', function(event){ if(event.orientation == 'portrait') { // 将页面更改为横向 } else if (event.orientation == 'landscape') { / / 改变你的肖像页面 }
    });

# eclipse - Ecore 文件的方言

> ID：10174162
> 
> 赞同：2
> 
> 时间：2012-04-16T12:34:12.017
> 
> 标签：eclipse, eclipse-emf

我有一个可以导出 Ecore 文件的工具（Enterprise Architect）。

我想在 Eclipse 建模框架中导入生成的 Ecore。但是 EMF 表明生成的 Ecore 文件有很多错误。

我想我需要重构生成的 Ecore 文件，我现在的问题是：

Ecore是什么方言/语言？！它是 XMI、XML 方案还是它是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:58:32.093

Best you visit [this site](http://www.eclipse.org/modeling/emf/) for some background information. A `*.ecore` file is an `XMI serialization` of the Ecore model.

# php - Jquery将错误的值传递给页面

> ID：10174167
> 
> 赞同：1
> 
> 时间：2012-04-16T12:34:32.767
> 
> 标签：php, jquery

这几天我一直在为此苦苦挣扎。这可行，但不会将正确的变量传递给页面（ testMap.php ）。我使用数据库中的数据并将鼠标悬停在链接上确实会在 URL 中显示正确的变量，但无论出于何种原因，jquery 总是抓取循环中的第一个变量。有什么建议么？

```
<?php
    $myname = $_SESSION['username'];
    global $database;
    $stmt = $database->connection->query("SELECT * FROM ".TBL_FLIGHTS." WHERE username='$myname'");

        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)){
            $date       = $row['date'];
                    $starting   = $row['starting'];
                    $ending     = $row['ending'];
                    $route      = $row['route'];
                  echo "<a class=\"route\" href=\"start=$starting&end=$ending\"><p class=\"pBlue\">$date - $starting - $ending - $route</p></a>";
                  ?>
        <div id="start" style="visibility:hidden"><?php echo $starting; ?></div>
        <div id="end" style="visibility:hidden"><?php echo $ending; ?></div>
        <?
    }

    ?>

<script type="text/javascript">
$(document).ready(function() {
    var start = $('#start').text();
    var end = $('#end').text();

    $(function() {
      $(".route").click(function(evt) {
         $("#mymap_canvas").load("testMap.php?start="+start+"&end="+end )
         evt.preventDefault();
      })
    })

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:55:17.490

的确; 您需要在点击事件中捕获开始和结束值，并选择靠近被点击路线的开始和结束值。

可能是你想要的：

```
$(".route").click(function(evt) {
    var start = $(this).siblings(".start").text();
    var end = $(this).siblings(".end").text();
    $("#mymap_canvas").load("testMap.php?start="+start+"&end="+end )
    evt.preventDefault();
}); // I believe you are missing a semicolon here and at the end, too 
```

但是，除非我遗漏了一些东西，否则你真的可以通过 php 构建那个 href（就像你已经用完整路径和查询字符串完成它一样），然后像这样执行它：

```
$(".route").click(function(evt) {
    // Load the href of the route anchor into 'mymap_canvas'
    $("#mymap_canvas").load($(this).attr("href"));
    event.preventDefault();
    return false; // Prevent the normal click behavior
}); 
```

没有更多隐藏的开始和结束！但请务必将您的原始锚标记更新为如下所示：

```
<a class=\"route\" href=\"testMap.php?start={$starting}&end={$ending}\">...</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:38:36.393

```
<?php
    $myname = $_SESSION['username'];
    global $database;
    $stmt = $database->connection->query("SELECT * FROM ".TBL_FLIGHTS." WHERE username='$myname'");
$i=1;
        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)){
            $date       = $row['date'];
                    $starting   = $row['starting'];
                    $ending     = $row['ending'];
                    $route      = $row['route'];
                  echo "<a class=\"route\" href=\"start=$starting&end=$ending\"><p class=\"pBlue\">$date - $starting - $ending - $route</p></a>";
                  ?>
        <div class="start<?php echo $i; ?>" style="visibility:hidden"><?php echo $starting; ?></div>
        <div class="end<?php echo $i ?>" style="visibility:hidden"><?php echo $ending; ?></div>
        <?
   $i++; }

    ?>

<script type="text/javascript">
$(document).ready(function() {
    var start = $('.start1').text();
    var end = $('.end<?php echo $i; ?>').text();

    $(function() {
      $(".route").click(function(evt) {
         $("#mymap_canvas").load("testMap.php?start="+start+"&end="+end )
         evt.preventDefault();
      })
    })

});
</script> 
```

# string - 用于查看搜索字符串来自哪个函数的指示器

> ID：10174171
> 
> 赞同：1
> 
> 时间：2012-04-16T12:34:47.700
> 
> 标签：string, function, search, vim, indicator

我有许多创建搜索字符串的函数@/

我想知道搜索字符串来自哪些函数。

是否可以向搜索字符串添加一个不影响搜索字符串但允许我检查它来自哪个函数的指示符？

体育`/[indicator]search string`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:56:40.447

您可以添加一个从不匹配的正则表达式*分支*，例如`/\%$indicator\|search string`

`\%$`是一个特殊的 Vim atom 匹配文件的结尾。由于后面跟着指示符文本时永远不会匹配，所以第一个分支（直到`\|`）永远不会匹配，因此可以代表您的指示符。

请注意，您不能只使用`$`原子，因为它仅在正则表达式中的某些位置匹配行尾，否则为文字 $。（这同样适用于其他原子，比如`^`and `[]`，所以只有一些特殊的 Vim 原子（`\%c`是另一个原子）可以安全使用。感谢 ib 指出这一点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:19:53.453

我把这个想法变成了一个 Vim 插件：[TaggedSearchPattern](http://www.vim.org/scripts/script.php?script_id=4123)：将名称附加到搜索模式以便于回忆。

此插件允许您使用名称“标记”单个搜索，以便记录这些搜索，从而更容易识别和调用。您还可以使用经常需要的搜索预先设置搜索历史记录。

# html - 退出全屏模式后Flash恢复正常大小？

> ID：10174173
> 
> 赞同：2
> 
> 时间：2012-04-16T12:34:54.387
> 
> 标签：html, actionscript-3, flash, actionscript

我使用 actionscript 3 制作了一个 flash 应用程序，我希望这个应用程序大小是动态的，

能够以任何尺寸嵌入它并让它相应地自我调整。

我设法做到了这一点，但是有一个问题：

应用程序的原始宽度为 700 像素。我以较小的尺寸嵌入闪存（例如 400）进入全屏模式，当我退出时，应用程序将自身设置回 700 像素宽，并且不会将自身调整为实际的 400 像素宽度嵌入区..

我希望我足够清楚，任何帮助将不胜感激，在此先感谢！

编辑：这是在我的应用程序中切换全屏模式的代码：

```
function fullScreenToggle(e:MouseEvent):void {
    if(stage.displayState == "fullScreen"){
        stage.displayState=StageDisplayState.NORMAL;
    } else {
        stage.scaleMode = StageScaleMode.NO_SCALE;
        stage.align = StageAlign.TOP_LEFT;
        stage.displayState=StageDisplayState.FULL_SCREEN;
    }
}
stage.addEventListener(Event.RESIZE, onResizeDo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:42:38.237

好吧，我自己想通了，我所做的只是把这行代码，在用户退出全屏模式后运行。stage.scaleMode = StageScaleMode.SHOW_ALL;

# php - 使用 PHP 变量创建 mysql 表

> ID：10174174
> 
> 赞同：0
> 
> 时间：2012-04-16T12:35:15.537
> 
> 标签：php, mysql, sql, variables

我无法使用 PHP 变量创建 SQL 表。

假设 $tbl_date = "data";

```
mysql_query('CREATE TABLE '.$tbl_date.'
(
Test varchar(15),
Yes varchar(15),
Very int
)'); 
```

它不会创建表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:38:34.230

看起来它不起作用，因为您的表名不在引号中。尝试这个：

```
mysql_query('CREATE TABLE `'.$tbl_date.'`
(
`Test` varchar(15),
`Yes` varchar(15),
`Very` int
)'); 
```

这同样适用于字段名称。
也试试这个，人类更容易阅读：

```
mysql_query("CREATE TABLE `{$tbl_date}`
(
`Test` varchar(15),
`Yes` varchar(15),
`Very` int
)"); 
```

请注意不同类型的引号：
- 用于在 PHP 中构建一些字符串（例如 SQL 查询）的单引号和双引号
- 专门用作 SQL 查询表名和列名的一部分的反引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:37:51.647

这是我的工作：

```
$cars = "CREATE TABLE $tbl_date (
Test varchar(15), 
Yes varchar(15), 
Very int
)";
$results = mysql_query($cars) or die (mysql_error()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:41:35.380

我认为您缺少格式（单引号或双引号等）试试这个

```
$sql = "CREATE TABLE `user` (`id` INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` VARCHAR(255) NOT NULL, `address` TEXT NOT NULL) ENGINE = MyISAM;"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:37:31.830

是的，但您必须小心用户不会注入代码。查看 mySQL 注入以确保您的代码是安全的，否则用户可能会创建或删除您不希望他们访问的表。另外，我不明白您为什么要这样做，当然最好在数据库中创建一个表，然后添加带有以后可以添加的行的字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:38:46.160

是的你可以。

`mysql_query`接受一个字符串，因此您基本上可以附加任何动态字符串。

正如建议的那样，您需要在表名称之前和之后使用反引号（并检查您的连接用户是否有权创建表）。

这种用法的主要问题是您容易受到 SQL 注入的影响（只要您不转义`$tbl_date`），因此我建议您为使用的变量添加更多控件。

此外，将动态表添加到数据库（不包括 noSQL 数据库）通常是一种**不好**的用法（检查您是否真的需要这个）。

# wpf - WPF 绑定和资源查找复杂性

> ID：10174180
> 
> 赞同：1
> 
> 时间：2012-04-16T12:35:31.720
> 
> 标签：wpf, xaml, data-binding, mvvm

我有一个内容控件如下：

```
<ContentControl x:Name="grid1ContentControl" Content="{Binding MainGridViewModel}" /> 
```

MainGridViewModel 是 MainGridViewModelType 类型的属性。

我也有一个 DataTemplate 如下：

```
<DataTemplate DataType="{x:Type App:MainGridViewModelType}">... 
```

我初始化（即设置） MainGridViewModel 属性并引发 NotifyPropertyChanged 事件。

我的期望是，此时应该通知框架我设置了 MainGridViewModel，并且由于 ContentControl 上的绑定，将与 MainGridViewModel 属性类型（即 MainGridViewModelType）匹配的 DataTemplate 内容添加到该位置的可视化树中ContentControl 所在的位置。

事实上，我可以看到我的 RaisePropertyChanged() 方法在 MainGridViewModel 属性的设置器上运行。但是，当使用可视化树检查器检查可视化树时，ContentControl 的 ContentPresenter 在 MainGridViewModel 初始化后不显示我的 DataTemplate 的内容。为什么？

请注意，在再次设置 MainGridViewModel 以响应用户交互后，我得到了我期望的可视化树的更新。

我想出的唯一解决方法是给 DataTemplate ax:Key，并显式设置 ContentControl 的 Content 值，而*不是*依赖将类型与其 DataTemplate 匹配的框架，并为我应用它：

```
ContentControl grid1ContentControl = VisualElementFinder.FindDescendantByName(mwin, "grid1ContentControl") as ContentControl;
grid1ContentControl.SetValue(ContentControl.ContentTemplateProperty, mwin.FindResource("MainGridViewModelKey") as DataTemplate); 
```

* * *

我一直遇到同样的问题。我对框架在视觉对象初始化后如何对绑定属性的后续分配做出反应的理解存在差距。我采纳了 Will 的建议并开发了一个原型，如下所述。我很感激任何进一步的想法。

这是我关于该主题[的博客条目的链接。](http://blog.synctank.com/2012/04/17/wpf-binding-how-to-display-changes-to-variables-assigned-in-code-after-having-set-the-binding-in-xaml/)这是[原型项目的直接链接](http://blog.synctank.com/wp-content/uploads/2012/04/DynamicTabControlViewModelTest_snapshot17apr2012.zip)。

这是 MainWindow 代码，为进一步讨论提供上下文。在原型项目中，NewTabControlViaContentControlCommand 有效，而 NewTabControlCommand 无效。

MainWindow.xaml：

```
 <Window x:Class="DynamicTabControlSimpleProto.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:DynamicTabControlSimpleProto.ViewModel"
        xmlns:vw="clr-namespace:DynamicTabControlSimpleProto.View"
        xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
        mc:Ignorable="d"
        Height="300"
        Width="500"
        Title="Dynamic TabControl Prototype"
        DataContext="{Binding Main, Source={StaticResource Locator}}">

    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:TabControlViewModel}">
            <vw:TabControlUserControl />
        </DataTemplate>

        <DataTemplate x:Key="tabControlDataTemplate">
            <vw:TabControlUserControl />
        </DataTemplate>

    </Window.Resources>

    <Grid x:Name="LayoutRoot">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="4" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <StackPanel Name="stackPanel" Grid.Column="0">
            <Button
                Content="NewTabControl" 
                Command="{Binding NewTabControlCommand}"
                CommandParameter="{Binding Path=DataContext}" />

            <Button
                Content="NewTabControlViaContentControl" 
                Command="{Binding NewTabControlViaContentControlCommand}"
                CommandParameter="{Binding ElementName=tabControlContentControl}" />
        </StackPanel>

        <DockPanel
            Name="dockPanel"
            Grid.Column="2">
            <Border 
                BorderBrush="Blue"
                BorderThickness="5">
                <ContentControl x:Name="tabControlContentControl" DataContext="{Binding TabControlViewModel, diag:PresentationTraceSources.TraceLevel=High}" />
            </Border>
        </DockPanel>
    </Grid>
</Window> 
```

MainWindowViewModel.cs

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using System.Windows.Controls;
using DynamicTabControlSimpleProto.View;
using System.Windows;

namespace DynamicTabControlSimpleProto.ViewModel
{

    public class MainViewModel : ViewModelBase
    {
        public string Welcome
        {
            get
            {
                return "Welcome to MVVM Light";
            }
        }

        /// <summary>
        /// Initializes a new instance of the MainViewModel class.
        /// </summary>
        public MainViewModel()
        {
            NewTabControlCommand = new RelayCommand<object>(obj =>
                {
                    this.NewTabControl(obj);
                });

            NewTabControlViaContentControlCommand = 
                new RelayCommand<ContentControl>(tabControlContentControl =>
                {
                    this.NewTabControlViaContentControl(tabControlContentControl);
                });

        }

        public TabControlViewModel TabControlViewModel
        {
            get
            {
                return _tabControlViewModel;
            }
            private set
            {
                _tabControlViewModel = value;
                RaisePropertyChanged("TabControlViewModel");
            }
        }

        public RelayCommand<object> NewTabControlCommand
        {
            get;
            private set;
        }

        private TabControlViewModel _tabControlViewModel = null;

        void NewTabControl(object obj)
        {
            TabControlViewModel = new TabControlViewModel();
        }

        public RelayCommand<ContentControl> NewTabControlViaContentControlCommand
        {
            get;
            set;
        }

        void NewTabControlViaContentControl(ContentControl tabContentControl)
        {
            TabControlViewModel = new TabControlViewModel();
            MainWindow mwin = Application.Current.MainWindow as MainWindow;
            tabContentControl.SetValue(ContentControl.ContentTemplateProperty, mwin.FindResource("tabControlDataTemplate") as DataTemplate);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:06:53.153

我相信我发现了上面不起作用的技术中的错误。我通过尝试直接在 XAML 中设置 DataContext 找到它，就像我在代码中所做的那样 - 即直接设置到 ViewModel。当我尝试这个时，它也没有工作。

例如，将我的 MainWindow 的 DataContext 设置为 ViewModel 不起作用：

```
<Window DataContext="vm:MainViewModel" ...> 
```

但是，将我的 Window 的 DataContext 设置为在更高级别组件的资源中声明的 ViewModel - 在我的例子中，App.xaml 允许一切正常工作：

在 App.xaml 中：

```
<Application.Resources>
    <vm:MainViewModel x:Key="MainViewModel" />
</Application.Resources> 
```

然后，在 MainWindow.xaml 中：

```
<Window DataContext="{Binding Source={StaticResource MainViewModel}}" ...> 
```

我认为我在上面示例中的原始代码中所做的类似于将 DataContext 直接设置为 ViewModel，因为即使我的 ContentControl 正在创建一个绑定，我认为必要的元素必须是 ViewModel，一种方式或其他，需要添加为资源。只有这样才能将 ContentControl 上的 DataContext Binding 设置为资源，然后框架将提供 ViewModel 类型到 DataTemplate 可视树元素的预期映射。

以上所有信息对 ContentControls 都很有用。特别是，我最初的问题中的代码解决方案可能是实现所描述内容的最佳且唯一的方法。但是，对于 ItemsControl，情况就不同了。冒着这篇文章分歧太大的风险，我[在我的博客上的一篇文章中包含了这些额外的见解。](http://blog.synctank.com/2012/04/17/wpf-binding-how-to-display-changes-to-variables-assigned-in-code-after-having-set-the-binding-in-xaml/)

# ruby - Rails 模块问题 - 用户：类的未定义方法“validates_email”

> ID：10174197
> 
> 赞同：0
> 
> 时间：2012-04-16T12:36:28.300
> 
> 标签：ruby, module, ruby-1.9.3

我有一个名为 User 的类，它需要包含一个模块。该类如下所示：

```
require 'sequel'
require 'modules/validations'

class User < Sequel(..)
  many_to_one :country
  includes ::Validations

  validates_email(:email)
end 
```

该模块定义在名为 modules 的子文件夹中。它已被添加到 $LOAD_PATH 并且 Ruby 不会抱怨加载。该模块如下所示：

```
module Validations
   def validates_email(attr, options = {})
       email = super.email
   end
end 
```

我得到的错误是： **用户：类的未定义方法'validates_email'**

为了使这项工作正常工作，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:41:58.563

如果你想使用模块来定义类方法，你应该使用该`extends`方法。

```
class User < Sequel(..)
  extend ::Validations
  validates_email(:email)
  ...
end 
```

我建议阅读这篇文章：[http ://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)

# javascript - Chrome 失败的图像背景卡住问题

> ID：10174199
> 
> 赞同：0
> 
> 时间：2012-04-16T12:36:30.367
> 
> 标签：javascript, jquery, google-chrome, css, background

我对 Chrome 有一个奇怪的问题。如果我使用 -webkit-transform 翻转图像，在其顶部显示另一个 div，然后隐藏 div，则图像的一部分在背景中显示为某种幽灵图像。

这是小提琴 [http://jsfiddle.net/fahadnabbasi/d4erm/](http://jsfiddle.net/fahadnabbasi/d4erm/)

问题仅在chrome中。

我正在使用 Mac OS X 和最新版本的 chrome for mac。

请抱住我，因为我在这里没有选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:40:09.483

如果您删除 `-webkit-transform: matrix(1, 0, 0, -1, 0, 0);`问题不再出现，请
尝试改为

```
-webkit-transform: rotateX(180deg); 
-webkit-transform-origin: 50% 28%; 
```

小提琴示例：http: [//jsfiddle.net/JHFQV/](http://jsfiddle.net/JHFQV/)

# php-5.3 - PHP - 用数组元素替换字符串？

> ID：10174200
> 
> 赞同：0
> 
> 时间：2012-04-16T12:36:33.097
> 
> 标签：php-5.3, str-replace, printf

我有这个功能：

```
protected function runQuery($encodedQuery, $params) {
    $query = sprintf($encodedQuery, mysql_real_escape_string($user), mysql_real_escape_string($password));
    return mysql_query($query);
} 
```

现在如您所见，我想在给定的所有参数上使用 *mysql_real_escape_string* （$params 是一个数组）。第一个参数如下所示：**SELECT * FROM users WHERE user='%s' AND password='%s'**。现在我想用 params 数组中的元素替换所有 %s 。有什么好方法吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:38:41.013

你可以这样做...

```
protected function runQuery($encodedQuery, $params) {
    $query = vsprintf($encodedQuery, 
                      array_map('mysql_real_escape_string', $params));
    return mysql_query($query);
} 
```

`$params`这将在through中运行每个值`mysql_real_escape_string()`。

作为更好的选择，使用[PDO](http://php.net/manual/en/book.pdo.php)。

# c - C中结构变量的动态名称

> ID：10174205
> 
> 赞同：0
> 
> 时间：2012-04-16T12:36:58.510
> 
> 标签：c, structure

我有一个数组'y'，x 没有。它里面的元素（数字'x'由用户给出），我需要创建一个结构数组，其元素的类型与数组'y'中的元素完全相同，即结构数组将具有'x'元素.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:49:12.750

```
/* new array */
MYSTRUCT *abc = (MYSTRUCT *)calloc(x, sizeof(MYSTRUCT));
/* copy contents of 'y' into new array */
for (int i = 0; i < x; i++)
    abc[i] = y[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:44:49.527

您可能需要这样的结构。数组的类型显示为`ArrayType`；你可以写`int`或`double`其他任何适合你的东西。

```
typedef struct array
{
    size_t     num_elements;  // stores the 'x' value
    ArrayType *arr_elements;
} array; 
```

然后，您可以分配该类型的数组：

```
array *list = calloc(sizeof(array), number);
for (int i = 0; i < number; i++)
{
    list[i].arr_elements = malloc(sizeof(*list[i].arr_elements) * array_size);
    list[i].num_elements = array_size;
} 
```

您应该错误检查内存分配：

```
if (list == 0)
   ...error...

   if (list[i].arr_elements == 0)
   {
       ...release already allocated space...
       ...error...
   } 
```

请注意，数组中的每个数组`list`（可能不是名称的最佳选择）可能有不同数量的元素；告诉您该`num_elements`特定数组有多大。

请注意，C99*灵活数组成员*在这里并不是真正的帮助。您不能拥有包含灵活数组成员的结构数组，尽管您可以拥有指向它们的指针数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:43:30.370

如果我理解正确，您有某种类型的“数组”，元素的数量由用户决定。我猜你是`malloc`这样分配的：

```
type_of_y *y = malloc(x * sizeof(type_of_y)); 
```

现在你想从一个结构中创建一个类似的“数组”，具有相同数量的元素。为什么你不能像你那样做`y`呢？IE：

```
struct my_structure *new_array = malloc(x * sizeof(struct my_structure)); 
```

# iphone - RootController 和多个 ViewController 的设计模式

> ID：10174207
> 
> 赞同：1
> 
> 时间：2012-04-16T12:37:01.110
> 
> 标签：iphone, xcode, design-patterns, uiviewcontroller, uinavigationcontroller

我想让一个类管理多个视图，如下所示：

```
AppDelegate
  RootController
    ViewController1 + View1.xib
    ViewController2 + View2.xib 
```

我的应用程序的逻辑将在 RootController 中。

为此目的最好的设计模式是什么？我的 RootController 应该扩展`UINavigationController`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:54:07.993

看起来您将使用 View Controller Containment（请参阅 WWDC 2011 Session 102 ADC 视频）。因此，您的根控制器很可能是 UIViewController 的子类，顺便说一句，UINavigationController 不打算被子类化（根据 Apple 文档）。

# python - 如何制作“始终相对于当前模块”的文件路径？

> ID：10174211
> 
> 赞同：85
> 
> 时间：2012-04-16T12:37:11.797
> 
> 标签：python, module, relative-path

假设您有一个模块，其中包含

```
myfile = open('test.txt', 'r') 
```

并且“test.txt”文件在同一个文件夹中。如果您将运行该模块，则该文件将成功打开。

现在，假设您从另一个文件夹中的另一个模块导入该模块。不会在与该代码所在的模块相同的文件夹中搜索该文件。

**那么如何让模块在同一个文件夹中先搜索具有相对路径的文件呢？**

`__file__`使用“ ”或“ ”有多种解决方案`os.getcwd()`，但我希望有一种更简洁的方法，例如传递给 open() 或 file() 的字符串中的相同特殊字符。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-16T13:04:00.200

解决方案是使用`__file__`，它非常干净：

```
import os

TEST_FILENAME = os.path.join(os.path.dirname(__file__), 'test.txt') 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-09-10T23:07:55.643

`.py`对于从文件加载的普通模块，[`__file__`](https://docs.python.org/3/reference/import.html#__file__)应该存在且可用。要将信息从`__file__`您的相对路径加入，有一个比`os.path`2014 年以来可用的接口更新的选项：

```
from pathlib import Path

here = Path(__file__).parent
fname = here / "test.txt"
with fname.open() as f:
    ... 
```

[`pathlib`](https://docs.python.org/3/library/pathlib.html)在 3.4 中添加到 Python - 请参阅[PEP428](https://www.python.org/dev/peps/pep-0428/)。对于仍使用 Python 2.7 并希望使用相同 API 的用户，可以使用[反向移植](https://pypi.org/project/pathlib2/)。

请注意，当您使用 Python 包时，有更好的方法可用于读取资源 - 您可以考虑迁移到[importlib-resources](https://importlib-resources.readthedocs.io/en/latest/)。这需要 Python 3.7+，对于旧版本，您可以使用[`pkgutil`](https://docs.python.org/3/library/pkgutil.html). 正确打包资源而不是加入相对于源树的数据文件的一个优点是，代码在没有提取到文件系统（例如 zip 文件中的包）的情况下仍然可以工作。请参阅[*如何从 Python 包中读取（静态）文件？*](https://stackoverflow.com/a/58941536/674039)有关在包中读取/写入数据文件的更多详细信息。

# php - 关于 PHP 会话

> ID：10174212
> 
> 赞同：0
> 
> 时间：2012-04-16T12:37:13.497
> 
> 标签：php, session

我有一个文件，其中有这段代码

```
 session_start();
 session_register("name");
 $name = "test"; 
```

当我在 chrome 中看到 cookie 时，它​​说这是在根文件夹中。

我的问题是这个会话保存在我的本地主机 xampp 的哪里以及我的会话保存在 go daddy 共享主机的哪里。

如果我有 session_start(); $_SESSION['id'] ="一些价值"; ，我可以在所有页面中使用这个值，这是我从阅读有关会话时所理解的，如果我错了，请纠正我。

我在共享主机中使用了它，但是当我在另一个页面中调用会话变量时，它是空的，我不知道我的主机是否具有会话保存写入权限或者它可能为空的原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:50:19.200

会话保存有 2 种设置：

1.  在共享内存中。
2.  在文件中。

在文件的情况下，您可以访问会话数据，而在内存的情况下，您不能。

访问会话数据使用此函数获取文件夹路径`session_save_path();`

**注意**：- 主机保护这些类型的文件夹，使其无法直接访问

检查会话设置是否在文件夹或内存中的另一件事`phpinfo();`

如果选择了文件您可以通过相同的功能显式更改路径`session_save_path();`请检查： [检查这里](http://www.google.co.in/url?sa=t&rct=j&q=session_save_path&source=web&cd=1&ved=0CC8QFjAA&url=http://php.net/manual/en/function.session-save-path.php&ei=_xWMT-PSKon3rQeFu9nHCw&usg=AFQjCNHrRX7kadPd1gr68qNWKgLA8ESZ5Q&cad=rja)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:47:39.127

要使用会话，您需要执行以下操作：

```
session_start(); 
```

然后你可以这样做：

```
$_SESSION['id'] ="some value"; 
```

并使用它：

```
$id = $_SESSION['id']; 
```

[`session_register`](http://php.net/manual/es/function.session-register.php)是一个不推荐使用的功能，你不应该使用它。无论如何，您以错误的顺序使用它（您应该对值做的最后一件事是注册它，您正在注册一个空值`$name`变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:45:17.470

会话在服务器中保存为名为例如 1234 的文件。这是一个文本文件。它保存在 php.ini 可配置的路径中。

客户端保存 cookie。cookie 的内容等于 sessione 文件的名称 1234。每个请求的浏览器都发送 cookie 内容，因此服务器读取 cookie 的内容并检查是否存在相应的会话。对于使用会话的问题...为我们提供了更多代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:50:14.133

默认情况下，使用 Go Daddy 4GH 托管会话将保存到与您的 /html 目录处于同一级别的 /tmp 目录。您可以使用这些步骤找到完整路径。

找到您的绝对托管路径

```
1\. Log in to your Account Manager.
2\. Click Web Hosting.
3\. Next to the hosting account you want to use, click Launch. 
```

在服务器部分，您的主机帐户的绝对主机路径将显示。

如果这不是您要保存会话的位置，您可以在 php.ini 文件中更改它或在脚本中使用 session_save_path() 函数。

有关您的 XAMPP 堆栈的信息，您可以[在此处查看](http://us.php.net/session_save_path)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:41:30.220

会话存储在服务器上，但会话 ID 作为长随机 ID 存储在用户计算机上。用户无法编辑会话，但是他们可以窃取会话 ID 并将其用于未经授权的帐户。

您可能在 php.ini 中将 register_globals 设置为 1。强烈建议您关闭它，因为它可能会被恶意使用，但这可以解释为什么设置 $name 也可以设置 $_SESSION['name']。它基本上允许从那一点设置所有变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:41:39.127

您需要将新值另存为

```
$_SESSION['name'] = "test"; 
```

`$_SESSION['name']`不等于`$name`

因此保存价值`$name = "test";`不会被保存在`$_SESSION['name']`

您必须调用 session_start(); 在每个页面上检索保存的会话，从一个页面传播到所需页面。或在 php.ini 文件中设置为 on/1（不推荐）

变量存储的位置`$_SESSION`由 PHP 的 " `session.save-path`" 配置决定。通常这`/tmp`在 Linux/Unix 系统上是“”。如果不是 100% 确定，请使用 phpinfo() 函数查看您的特定设置，方法是在您的域的 DocumentRoot 中创建一个包含此内容的文件：

```
<? phpinfo() ?> 
```

查看以下链接了解更多详情

[session.save_path](http://us.php.net/manual/en/session.configuration.php#ini.session.save-path)

# iphone - 被拒绝的应用程序、看门狗计时器或缺少权利

> ID：10174213
> 
> 赞同：6
> 
> 时间：2012-04-16T12:37:13.857
> 
> 标签：iphone, ios, xcode

所以我有一个应用程序两次被应用商店拒绝，我真的需要一些帮助！

它已被拒绝，因为看门狗定时器在第一次打开时强制它退出。但是，我无法在我的任何设备上重现这一点。使用 xcode 构建设备确实需要很长时间（我知道从 xcode 构建时看门狗会断开连接）。但我有几个问题可能会帮助我解决这个问题。

1.  看门狗是否只考虑`didFinishLaunchingWithOptions:`它调用的其他方法？

2.  程序使用的框架数量与它有关系吗？如果是这样，11 个框架是否太多了？

3.  将应用程序安装到设备后，我拔下所述设备是否重新启用了看门狗计时器？

4.  还有哪些其他可以添加到看门狗定时器的东西？

苹果说另一种可能性可能是`Another possibility could be a missing entitlement.`有人可以解释一下这是什么意思吗，我以前在我的其他应用程序中没有看到过这种情况，但我认为这可能是新的东西？它是否必须安装在应用商店的所有应用上？

**第一秒的时间配置文件**

![在此处输入图像描述](../Images/07fca38d5f329ab0d0d1a4abdda48420.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:49:07.270

您阻塞 UI 线程的时间过长。要解决这个问题，首先你需要弄清楚什么代码花了这么长时间。分析您的应用程序可能是值得的。请注意，模拟器不模拟设备，它只模拟 API。它的运行速度可能比实际设备快得多，因为您的计算机比 iPhone 更强大。尝试单击并按住`Run`Xcode 的左上角，然后选择`Profile`. 选择`Time Profiler`并运行几秒钟。停止分析器以分析函数调用中的时间。请注意，您可能需要更深入地挖掘，找到一些教程或书籍才能真正理解分析。

当您知道哪些部件运行缓慢时。你可以把它们放到一个线程中。简单的方法是使用[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。要开始使用，请访问[本教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)。您可以跳过前半部分并专注于实际的线程块。API是`dispatch_queue_create`和。`dispatch_async``dispatch_release`

这将解锁您的 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:24:05.923

你做了很多处理吗

```
application:didFinishLaunchingWithOptions,
applicationDidBecomeActive,
applicationDidEnterBackground,
applicationWillResignActive or 
applicationWillTerminate? 
```

多文件访问、加载/保存数据、同步网络访问等事情可能会导致您的应用程序在启动或用户退出时冻结，并可能导致看门狗杀死您的应用程序。

这个 Apple Technical note 建议看门狗只查看启动、暂停、恢复和终止用户界面事件，所以我想说你应该先查看这些，然后发回一些关于你的应用程序在方法中所做的更多细节以上所列。 [http://developer.apple.com/library/ios/#qa/qa1693/_index.html](http://developer.apple.com/library/ios/#qa/qa1693/_index.html)

11个框架很好。我在应用程序中使用了 11 没问题。

如果您通过点击主屏幕上的图标启动应用程序，那么看门狗计时器将处于活动状态并监控您的应用程序。如果您通过在 Xcode 中点击运行或调试来启动应用程序，那么看门狗将不会监控您的应用程序。

# c - 地址空间溢出

> ID：10174214
> 
> 赞同：2
> 
> 时间：2012-04-16T12:37:15.103
> 
> 标签：c, embedded, 8051, keil

我的代码遇到问题。当我编译代码时，我得到错误地址空间溢出。我该如何帮助解决这个问题。我正在使用 keil 编译器和 AT89C51RD2 MCU，这是迄今为止使用的空间 -

**程序大小： data=149.0 xdata=594 const=1136 code=8467**。

我可能已经用完了整个内存。

错误声明是这样的：

**错误 L107：地址空间溢出**

**空间：内存空间**（DATA）

**段：段名**（Function_name）

**长度：000004H**

**说明：指定的段不能位于指定的地址空间。** **该段被忽略。**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:45:16.160

请注意参考资料位于： [http ://www.keil.com/support/docs/1481.htm](http://www.keil.com/support/docs/1481.htm)

# android - DRM客户端在windows上测试openipmp服务器

> ID：10174218
> 
> 赞同：0
> 
> 时间：2012-04-16T12:37:33.643
> 
> 标签：android, windows, drm

我已经在我的 Windows 上安装了 openipmp 服务器。他们提供了一些仅适用于 Visual Studio 的客户端解决方案。

我想知道是否有任何其他客户端可用于测试 openipmp 服务器。

我开始了解Cloakware 的Android OMA DRM 1.0 客户端。

是免费的吗？有没有可以下载的链接。

请帮我。谢谢

玛尼莎·哈雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:18:06.873

[http://en.wikipedia.org/wiki/OMA_DRM](http://en.wikipedia.org/wiki/OMA_DRM)

至于下载链接，您可以查看上述 URL 中的许多链接，通常是专有解决方案。

对于 ann 开源，也许是这样的：

[http://sourceforge.net/apps/mediawiki/drm/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/drm/index.php?title=Main_Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:18:11.173

所有诺基亚 S60 手机都支持 OMA DRM v1 并且大多数还支持 v2，因此如果您正确设置服务器，您应该能够通过简单地将手机指向内容文件的下载位置来测试至少基本功能。不过，更高级的功能（例如将正确的对象推到空中）可能会更难，这取决于服务器。

# php - 为什么我收到错误消息“不能将 stdClass 类型的对象用作数组”？

> ID：10174221
> 
> 赞同：0
> 
> 时间：2012-04-16T12:37:36.133
> 
> 标签：php, arrays, object

我有一个`$images`看起来像这样的对象：

```
stdClass Object
(
    [0] => stdClass Object
        (
            [id] => 125
            [title] => 131301
            [file_name] => 131301
            [file_ext] => jpg
            [dir] => Adventure/
            [fk_gallery_id] => 1
        )

    [1] => stdClass Object
        (
            [id] => 126
            [title] => 181301
            [file_name] => 181301
            [file_ext] => jpg
            [dir] => Adventure/
            [fk_gallery_id] => 1
        )
); 
```

现在我想获取对象中的第一个元素：

$obj = $images[0]。

这给了我错误：

```
Fatal error: Cannot use object of type stdClass as array 
```

谁能告诉我为什么这不起作用？

我也试过`$images[0]->id`了，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:40:21.263

它们是类成员，因此您需要像这样访问它们：

```
$obj = $images->{0}; 
```

请参阅：[变量变量](http://php.net/manual/en/language.variables.variable.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:46:52.813

$images 不是数组，它是 StdClass 类型的对象（标准类实际上是一个虚拟类）。要访问班级成员，您必须使用格式

```
$object->membername 
```

不幸的是，0 不是有效的成员名称。因此你不能使用 $images->0。解决方法是使用格式

```
$images->{"0"} 
```

以下也将起作用（取决于您的 PHP 版本）

```
$a = 0;
$images->$a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T12:43:12.980

尝试 $image->0->id 这可能适用于您的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:40:16.473

尝试

```
$obj = $images["0"]; 
```

或者

```
$key = 0;
$obj = $images[ $key ]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:43:30.297

使用它，因为图像也是一个对象，内部也是对象

```
$images->{0}->id; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:42:11.790

尝试这个：

```
$a = $image->0;
$id = $a->id 
```

# objective-c - 应用程序关闭时将 int 值保存到数组

> ID：10174223
> 
> 赞同：0
> 
> 时间：2012-04-16T12:37:47.840
> 
> 标签：objective-c, xcode

我有一个 Iphone 应用程序，它使用大量的 int 值，这些值将在 IBActions 上递增，我想在应用程序关闭时将 int 值保存到一个数组中，以便在重新打开应用程序时存储和使用这些值。我不确定如何将 int 值写入数组。从功能上讲，我让这个与文本字段一起使用，但不是整数，即

整数计数；

使用的代码：

```
NSArray *values = [[NSArray alloc] initWithObjects:fieldOne.text,fieldTwo.text,count, nil]; 
```

这给出了“赋值使指针从没有强制转换的整数”消息。

无论如何要将已经存储的 int 值写入数组吗？我使用的代码如下：

我认为它可以，直到将数据调用到数组中。我评论了一些失败的努力

```
-(NSString *) saveFilePath{

    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    return [[path objectAtIndex:0] stringByAppendingPathComponent:@"savefile.plist"];
}

-(void) applicationDidEnterBackground: (UIApplication *) application{
    //NSNumber *num = [[NSNumber alloc]initWithInt:count];
    NSArray *values = [[NSArray alloc] initWithObjects:fieldOne.text,fieldTwo.text,[NSNumber numberWithInt:count],nil];
    [values writeToFile:[self saveFilePath] atomically:YES];
    [values release];

}

- (void)viewDidLoad {

    //NSNumber *num = [[NSNumber alloc]initWithInt:count];
    NSString *myPath = [self saveFilePath];

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];
    if (fileExists) {
        NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
        fieldOne.text = [values objectAtIndex:0];
        fieldTwo.text = [values objectAtIndex:1];
        //[NSNumber count intValue] = [values objectAtIndex:2];
        [values release]; 
    }

    UIApplication *myApp = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector (applicationDidEnterBackground:)name:UIApplicationDidEnterBackgroundNotification object:myApp];

     [super viewDidLoad];
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:46:02.390

您应该使用 NSNumber ，例如：

```
NSNumber *num = [NSNumber numberWithInt:int]; 
```

这会给你一个包含你的 int 的对象。要从中读取，请使用`[num intValue]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:44:35.887

容器类使用对象而不是基本类型。您必须将基本类型包装在 NSNumber (numbers) 、 NSData 等中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:41:33.963

创建一个以您的计数为值的 NSNumber 对象，并将该对象放入您的数组中。NSArrays 需要是对象数组。

# jquery-ui - jquery UI：日期选择器不出现

> ID：10174225
> 
> 赞同：2
> 
> 时间：2012-04-16T12:38:17.973
> 
> 标签：jquery-ui, datepicker

由于某些未知原因，数据选择器未出现在浏览器上。我通过 Ajax 调用 HTML 文件，该文件本身具有 document.ready() 函数。单击日期字段时，它会生成必要的 HTML，但不会在屏幕上显示任何内容。当我单击日期字段（通过 Chrome 检查器获取）时，正在生成以下代码：

```
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style="left: 55px; top: 225px; position: absolute; display: block; "><div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all"><a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate('#datepicker', -1, 'M');" title="Prev"><span class="ui-icon ui-icon-circle-triangle-w">Prev</span></a><a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate('#datepicker', +1, 'M');" title="Next"><span class="ui-icon ui-icon-circle-triangle-e">Next</span></a><div class="ui-datepicker-title"><span class="ui-datepicker-month">April</span> <span class="ui-datepicker-year">2012</span></div></div><table class="ui-datepicker-calendar"><thead><tr><th class="ui-datepicker-week-end"><span title="Sunday">Su</span></th><th><span title="Monday">Mo</span></th><th><span title="Tuesday">Tu</span></th><th><span title="Wednesday">We</span></th><th><span title="Thursday">Th</span></th><th><span title="Friday">Fr</span></th><th class="ui-datepicker-week-end"><span title="Saturday">Sa</span></th></tr></thead><tbody><tr><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">1</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">2</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">3</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">4</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">5</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">6</a></td><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">7</a></td></tr><tr><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">8</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">9</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">10</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">11</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">12</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">13</a></td><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">14</a></td></tr><tr><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">15</a></td><td class=" ui-datepicker-days-cell-over  ui-datepicker-today" onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default ui-state-highlight ui-state-hover" href="#">16</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">17</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">18</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">19</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">20</a></td><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">21</a></td></tr><tr><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">22</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">23</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">24</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">25</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">26</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">27</a></td><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">28</a></td></tr><tr><td class=" ui-datepicker-week-end " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">29</a></td><td class=" " onclick="DP_jQuery.datepicker._selectDay('#datepicker',3,2012, this);return false;"><a class="ui-state-default" href="#">30</a></td><td class=" ui-datepicker-other-month ui-datepicker-unselectable ui-state-disabled">&nbsp;</td><td class=" ui-datepicker-other-month ui-datepicker-unselectable ui-state-disabled">&nbsp;</td><td class=" ui-datepicker-other-month ui-datepicker-unselectable ui-state-disabled">&nbsp;</td><td class=" ui-datepicker-other-month ui-datepicker-unselectable ui-state-disabled">&nbsp;</td><td class=" ui-datepicker-week-end ui-datepicker-other-month ui-datepicker-unselectable ui-state-disabled">&nbsp;</td></tr></tbody></table></div> 
```

更新：

我把代码放在 JsFiddle

[http://jsfiddle.net/YvQE9/](http://jsfiddle.net/YvQE9/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:07:45.900

你可能有错误的网址。试试这些。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title></title>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css" type="text/css" media="screen">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

  </head>
  <body>
      <input type="text" id="datepicker" />

      <script>
            $( "input" ).datepicker();
      </script>      
  </body>
</html>
​​​​ 
```

这里是 jsFiddle：http: [//jsfiddle.net/YvQE9/1/](http://jsfiddle.net/YvQE9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:46:34.443

在使用 AJAX 请求加载`<input>`字段后，您必须调用`datepicker()`它。您可以通过以下方式订阅 AJAX 成功事件`.ajaxSuccess`：[jQuery .ajaxSuccess() 函数](http://api.jquery.com/ajaxSuccess/)

PS：不要将脚本与 HTML 混合使用。这不是你想要遵循的方式。您想将所有 Javascript 保存在`.js`文件中。当文档加载时，您将功能添加到元素中。当您通过 AJAX 调用加载新内容时，您会将事件或小部件附加到新元素。

# asp.net - MonoTouch 和 .NET 上的 TimeZoneInfo 不匹配

> ID：10174238
> 
> 赞同：2
> 
> 时间：2012-04-16T12:38:53.743
> 
> 标签：asp.net, .net, ios, xamarin.ios, timezone

`TimeZoneInfo.Local.Id`在 MonoTouch 上使用时，我得到`CET`（中欧时间）。在 ASP.NET 上，我得到`Central Europe Standard Time`.

我需要将时区从 iOS 设备 (MonoTouch) 传输到我的 ASP.NET Web 服务。仅传输时区差异 (UTC +1) 是不够的，因为这不符合特定国家/地区的夏令时设置。

将 iPhone 的时区获取到我的网络服务的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:59:46.930

MonoTouch 中的时区数据源不止一个。

一个来自 .NET 基类库 (BCL)，`System.TimeZoneInfo`它旨在与 Microsoft .NET 实现兼容（它是结构，而不是数据）。它有两个缺点。

*   它与 MS 数据不是 100% 兼容（使用了不同的数据源）；

*   如果不使用更新的 MonoTouch 重新构建您的应用程序，它就无法更新；

另一个是`MonoTouch.Foundation.NSTimeZone`与 iOS API 的绑定。API 有点不同，但它返回的数据与其他 iOS 应用程序将使用的数据相匹配，并且会更新（使用 iOS 更新）。

> 将 iPhone 的时区获取到我的网络服务的最佳方式是什么？

由于上述原因， IMO`MonoTouch.Foundation.NSTimeZone`更适合。

> 仅传输时区差异 (UTC +1) 是不够的，因为这不符合特定国家/地区的夏令时设置。

至于您与 UTC 的偏移量，您可以通过以下方式获得日光特定偏移量（以秒为单位）：

```
var dlo = NSTimeZone.LocalTimeZone.DaylightSavingTimeOffset (NSDate.Now); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:42:12.513

由于设备不同 - 我会考虑推导两者之间的映射。

可能您的 Monotouch 应用程序应该这样做 - 对于可用时区中列出的每个 TimeZoneInfo Id，将映射存储到服务器上相同 TimeZoneInfo 的 Id。

另外，请注意，服务器上的时区是由 Windows 更新驱动的，并且可能不一定在每个 Web 服务器上都相同（如果你有一个农场）——正如我前几天在我的一个 Web 应用程序中发现的那样让我很烦恼。欲了解更多信息：http: [//support.microsoft.com/gp/cp_dst](http://support.microsoft.com/gp/cp_dst)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:43:39.593

`TimeZoneInfo`在 Windows 上使用 Windows 时区 ID——而在 MonoTouch 上，它可能会使用任何 iOS ID（尽管我有点惊讶你得到的是 CET 而不是 zoneinfo 名称）。

即使您在两者之间进行映射，我也不总是期望得到相同的结果。Windows 将在不同时间将时区信息更新到 iOS。您应该在单个系统上执行所有时区计算，*或者**在*两个地方使用您自己的“嵌入式”时区实现以确保一致性。我的[Noda Time](http://noda-time.googlecode.com)项目*可能*在这里工作，但我从未尝试在 MonoTouch 中使用它。

# delphi - 从 Delphi 的子单元访问主窗体

> ID：10174239
> 
> 赞同：4
> 
> 时间：2012-04-16T12:38:54.337
> 
> 标签：delphi, circular-dependency, delphi-units

我想从一个从主调用的类中访问一个主表单变量。像这样的东西：

**单元1：**

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs,Unit2, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
  public
  end;
var
  Form1: TForm1;
  Chiled:TChiled;
const
 Variable = 'dsadas';
implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
  Chiled.ShowMainFormVariable;
end;

end. 
```

**单元2：**

```
unit Unit2;

interface
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

  type
  TChiled = class
  private
  public
    procedure ShowMainFormVariable;
  end;
var
  Form1: TForm1;
implementation

procedure TChiled.ShowMainFormVariable;
begin
  ShowMessage(Form1.Variable);
end;
end. 
```

如果在 Unit2 我添加到使用 Unit1 会弹出一个循环错误。

如何使 Unit1 成为 GLOBAL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:01:43.553

正如其他答案所说，您应该使用实现部分中的一个单元。

假设您在“unit2”中选择了在实现中使用“unit1”。那么您需要设计一种机制来告诉“TChiled”如何访问“Form1”。那是因为你没有在'unit2'的接口部分使用'unit1'，你不能在接口部分声明'Form1:TForm1'变量。以下只是一种可能的解决方案：

```
unit2

type
  TChiled = class
  private
    FForm1: TForm;
  public
    procedure ShowMainFormVariable;
    property Form1: TForm write FForm1;
  end;

implementation

uses
  unit1;

procedure TChild.ShowMainFormVariable;
begin
  ShowMessage((FForm1 as TForm1).Variable);
end; 
```

那么在unit1中你可以在调用TChiled的方法之前设置TChiled的Form1属性：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Chiled.Form1 := Self;
  Chiled.ShowMainFormVariable;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T12:42:08.783

好吧，简单天真的答案是您应该添加`Unit1`到**实施**部分的`uses`子句中：**`Unit2`**

 **```
unit Unit2;
......
implementation

uses
  Unit1;
..... 
```

您不能将其添加到`uses`interface 部分的子句中，`Unit2`因为这会在 interface 部分创建循环引用。换句话说，`Unit1`将使用的接口和将使用`Unit2`的接口。语言不允许这样做。常见的解决方案是实现级别的单元之一。`Unit2``Unit1``use`

* * *

话虽如此，您的代码相当混乱，并且在许多其他方面都失败了。您的问题比循环引用更深。例如，你的意思是`Form1.Variable`什么？该常数`Variable`不是 的成员`TForm1`。您声明了两个名为`Form1`type 的全局变量`TForm1`。你为什么这样做？

另外，你拼错了child。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T12:42:45.820

最简单的解决方案是将 Unit1 添加到 Unit2 的 implementation 部分内的 uses 子句，因为这绕过了循环引用。

但是我建议这种设计是有缺陷的。通过示例代码很难看出您想要实现什么，因此很难提供任何真正的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:48:08.473

我通常创建一个数据模块（或任何类型的非可视容器）来共享全局变量。这样，两个单元都可以在没有循环引用的情况下使用变量。**

# sharepoint - 如何将 SPList 中相同的复选框列添加到 SPGridView

> ID：10174242
> 
> 赞同：1
> 
> 时间：2012-04-16T12:39:15.323
> 
> 标签：sharepoint, checkbox, spgridview, splist

我想在 Sharepoint 2010 中使用 C# 和 ASP.NET 在由 SPList 绑定的 SPGridView 中创建具有 SPList 的同一个复选框。这些复选框选择拆分项并显示功能区。

所以，我在我的 aspx 中写了类似的东西：

```
<Sharepoint:SPGridView id="mySpGridVew" runat="server" AutogenerateColumns="false" OnRowCreated="GridViewRowEventHandler">
   <Columns>
      <asp:BoundField/>
      <asp:BoundField/>
   </Columns>
</Sharepoint:SPGridView> 
```

我在 sharepoint 中手动创建了我的自定义列表，所以每个项目都有标题、编辑按钮和隐藏的复选框来选择所有或每个项目。我已将 SPGridView 与 SPList 绑定，并创建了其他字段，例如：

```
void MyGridView_RowCreated(Object sender, GridViewRowEventArgs e)
{
   SPList myList = SPContext.Current.web.Lists["MyList"];
   e.row.cells[1] = myList.Items.["title"];
} 
```

我在论坛和 Internet 中进行了搜索，但找不到在我的 SPGridView 中创建一个单元格的方法，并在我的 SPList 中使用相同的复选框来显示功能区并选择项目。我怎样才能做到这一点？

谢谢你。

# iphone - 为什么像 NSString 这样的属性在没有内存分配的情况下工作，而 UITextField 的属性不起作用，除非我为其分配空间......？

> ID：10174248
> 
> 赞同：0
> 
> 时间：2012-04-16T12:39:37.410
> 
> 标签：iphone, objective-c, ios, properties

如果我创建 NSString 类型的属性而不为其分配空间并为其分配一些值，则它可以工作。当我为 UITextField 做同样的事情时，它不会......？我正在以编程方式创建一个文本字段....任何帮助表示赞赏。

编辑：

我在 SecondViewController 的 .h 中创建了两个属性...

```
@property (nonatomic,retain) NSString *text;
@property (nonatomic, retain) UITextField *textField; 
```

现在，如果我创建一个新对象 secondViewController 并说这样做...

```
 secondViewController.text=@"Second View Controller"; 
```

即使我没有为它分配内存，这个值也会被保留......

如果我尝试对文本字段对象做同样的事情，除非我为它分配内存，否则不会发生这种情况。

这是我的 SecondViewController ...

```
//
//  SecondViewController.m
//  Tester
//
//  Created by Ankit on 4/16/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SecondViewController.h"

@implementation SecondViewController
@synthesize  text,textField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"The text is %@",text);

//   textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 200, 300, 40)]; (if I `uncomment this than only this textField is visible)`
    textField.frame=CGRectMake(10, 200, 300, 40);
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font = [UIFont systemFontOfSize:15];
    textField.placeholder = @"enter text";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    [self.view addSubview:textField];

//    textfield=[[UITextField alloc] init];
//    textfield.frame=CGRectMake(10,10,60, 30);
//    [self.view addSubview:textfield];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.text=nil;
    self.textField=nil;
    NSLog(@"viewDidUnLoad");
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}
-(void)dealloc{
    NSLog(@"dealloc");
    [text release];
    [textField release];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:47:13.650

属性只是对对象的引用，“空间”必须来自其他地方。与 NSString 唯一真正的区别是空间通常是文字的形式，因此您不会直接看到分配。@"Hello" 是一个可以引用的真实对象，但在其他情况下，您使用与 [[UITextField alloc] init...] 结构相同的 [[NSString alloc] init...] 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:56:09.943

`NSString`是一个特殊的对象。不像`UITextField`它是建立在许多其他东西上的，`@`你看到的字符是对编译器的一个特殊提示，它是一个`NSString`. 换句话说，编译器正在为您执行 alloc 和 init。它所做的差不多`[[NSString alloc] initWithCString:"your string"]`。该代码更像是一种简写方式，可以节省您的时间。

`String`实际上不是像`int`. 编译器将其视为数组或内存缓冲区。但人们往往有将其用作原始数据类型的习惯。因此，在许多编程语言中都发生了类似的特殊处理。

`UITextField`与数据类型没有任何相似之处。它是一个物体，它是重量级的。除了它是一个对象之外，编译器对其性质知之甚少。以这种方式优化语法并没有多大意义（我的意思是他们可以）。所以它以你看到的行为结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:50:41.640

NSString 有一个内置的便利宏来做`NSString *bob = @"bob";`

目前，没有其他类有这个确切的符号（数组字典和集合很快就会得到它）

要使用 UITextField 你必须正确地做

```
UITextField *tf = [[UITextField alloc]init] 
```

然后打电话`tf.text = @"";`

编辑：这`=@""`只是使用 alloc 和 init 创建新字符串的包装器。它只是隐藏它:)

# windows-phone-7 - HttpWebRequest xml 解析不显示任何内容

> ID：10174251
> 
> 赞同：0
> 
> 时间：2012-04-16T12:39:54.787
> 
> 标签：windows-phone-7, httpwebrequest

我正在尝试显示比今天要放映的电影的电影日期。我一整天都在阅读不同的主题，购买我无法让 webRequest 工作。

基本上我有使用 webClient 的代码，但我希望 UI 能够响应，所以我决定使用 httpWebRequest 来保持 xml 解析脱离 UI 线程。

```
public partial class MainPage : PhoneApplicationPage {

public MainPage() {
  InitializeComponent();
}

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e) {
  DoHttpWebRequest();
}

private void DoHttpWebRequest() {
  string url = "http://www.cinamon.ee/rss/schedule/1001.xml";
  var request = HttpWebRequest.Create(url);
  var result = (IAsyncResult)request.BeginGetResponse(ResponseCallback, request);
}

private void ResponseCallback(IAsyncResult result) {
  var request = (HttpWebRequest)result.AsyncState;
  var response = request.EndGetResponse(result);

  using (var stream = response.GetResponseStream()) {

    XDocument scheduleXml = XDocument.Load(stream);
    var todayMovies = from query in scheduleXml.Descendants("schedule").Descendants("shows").Descendants("show")
                      where DateTime.Parse(query.Element("showDateTime").Value).Date.Equals(DateTime.Now.Date) &&
                      DateTime.Parse(query.Element("showDateTime").Value).TimeOfDay.CompareTo(DateTime.Now.TimeOfDay) > 0
                      select new Movie() {
                        MoviePicture = new BitmapImage(new Uri((string)query.Element("images").Element("imageType2").Value, UriKind.RelativeOrAbsolute)),
                        MovieName = (string)query.Element("title"),
                        MovieId = (string)query.Element("movieId"),
                        MovieSoonest = DateTime.Parse(query.Element("showDateTime").Value).ToString("H:mm")
                      };

    // Removing duplicate movies from list.
    List<Movie> todayList = todayMovies.ToList();
    IEnumerable<Movie> noDuplicates3 = todayList.Distinct(new MovieComparer());

    // Adding to the UI
    Dispatcher.BeginInvoke(() => {
      todayBox.ItemsSource = noDuplicates.ToList();
    });
  }

}
} 
```

有没有人通过查看这段代码知道出了什么问题？

提前谢谢你编辑。这是我基于我的解决方案的链接 - [http://social.msdn.microsoft.com/Forums/en-US/windowsphone7series/thread/594e1422-3b69-4cd2-a09b-fb500d5eb1d8](http://social.msdn.microsoft.com/Forums/en-US/windowsphone7series/thread/594e1422-3b69-4cd2-a09b-fb500d5eb1d8)

编辑2。我的主页.xaml

```
<StackPanel x:Name="TodayPanel" Grid.Row="1" Margin="10,5,10,10" Orientation="Horizontal" Height="580" Background="#90000000" >
      <ListBox x:Name="todayBox">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <HyperlinkButton x:Name="hyperLinkButton" Style="{StaticResource HyperlinkButtonStyle1}" CommandParameter="{Binding MovieId}" Tap="hyperLinkButton_Tap">
              <HyperlinkButton.Content>
                <StackPanel Margin="10" Grid.Row="1" Orientation="Horizontal">
                  <Image Source="{Binding MoviePicture}" />
                  <StackPanel Margin="10" Grid.Row="1" Orientation="Vertical">
                    <TextBlock TextWrapping="Wrap" Margin="10, 5, 10, 5"  Width="200" FontFamily="Trebuchet MS" Foreground="Orange" VerticalAlignment="Top">
                                        <Run Text="{Binding MovieName}"/>
                                        <LineBreak></LineBreak>
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" Width="200" FontFamily="Trebuchet MS" Foreground="White" VerticalAlignment="Bottom">
                                        <Run Text="Järgmine seanss: "/>
                                        <LineBreak></LineBreak>
                                        <Run Text="{Binding MovieSoonest}"/>
                    </TextBlock>
                  </StackPanel>
                </StackPanel>
              </HyperlinkButton.Content>
            </HyperlinkButton>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
    </StackPanel> 
```

而我编辑的代码在后面。

```
private void DoHttpWebRequest() {
  string url = "http://www.cinamon.ee/rss/schedule/1001.xml";
  var request = HttpWebRequest.Create(url);
  var result = (IAsyncResult)request.BeginGetResponse(ResponseCallback, request);
}

private void ResponseCallback(IAsyncResult result) {
  var request = (HttpWebRequest)result.AsyncState;
  var response = request.EndGetResponse(result);

  // Adding to the UI
  Dispatcher.BeginInvoke(() => {
    IEnumerable<Movie> todayMovies;
    using (var stream = response.GetResponseStream()) {

      XDocument scheduleXml = XDocument.Load(stream);
      todayMovies = from query in scheduleXml.Descendants("schedule").Descendants("shows").Descendants("show")
                    where DateTime.Parse(query.Element("showDateTime").Value).Date.Equals(DateTime.Now.Date) &&
                    DateTime.Parse(query.Element("showDateTime").Value).TimeOfDay.CompareTo(DateTime.Now.TimeOfDay) > 0
                    select new Movie() {
                      MoviePicture = new BitmapImage(new Uri((string)query.Element("images").Element("imageType2").Value, UriKind.RelativeOrAbsolute)),
                      MovieName = (string)query.Element("title"),
                      MovieId = (string)query.Element("movieId"),
                      MovieSoonest = DateTime.Parse(query.Element("showDateTime").Value).ToString("H:mm")
                    };
    }

      var todayList = todayMovies.ToList();
      //IEnumerable<Movie> noDuplicates = movieList.Distinct(new MovieComparer());

      todayBox.ItemsSource = todayList.ToList();

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:29:02.567

我尝试了您的代码并获得了 UnauthorizedAccessException。通过更改 Dispactcher.Begininvoke 委托的范围，它的工作方式如下：

```
private void ResponseCallback(IAsyncResult result){
var request = (HttpWebRequest) result.AsyncState;
var response = request.EndGetResponse(result);
// Adding to the UI
Dispatcher.BeginInvoke(() =>
{
IEnumerable<Movie> todayMovies;
using (var stream = response.GetResponseStream())
{

    XDocument scheduleXml = XDocument.Load(stream);
    todayMovies =
        from query in scheduleXml.Descendants("schedule").Descendants("shows").Descendants("show")
        where DateTime.Parse(query.Element("showDateTime").Value).Date.Equals(DateTime.Now.Date) &&
                DateTime.Parse(query.Element("showDateTime").Value).TimeOfDay.CompareTo(DateTime.Now.TimeOfDay) >
                0
        select new Movie()
                    {
                        MoviePicture =
                            new BitmapImage(
                            new Uri((string) query.Element("images").Element("imageType2").Value,
                                    UriKind.RelativeOrAbsolute)),
                        MovieName = (string) query.Element("title"),
                        MovieId = (string) query.Element("movieId"),
                        MovieSoonest = DateTime.Parse(query.Element("showDateTime").Value).ToString("H:mm")
                    };

}
// Removing duplicate movies from list.
var todayList = todayMovies.ToList();
    //IEnumerable<Movie> noDuplicates3 = todayList.Distinct(new MovieComparer());

                                    todayBox.ItemsSource = todayList.ToList();
                                }); 
```

}

但是，您可以使用 RestSharp 库（您可以在 Nuget 中找到它）以使其更容易。检查以下代码：

```
public void RestSample(){
var client = new RestClient
{
    BaseUrl = "http://www.cinamon.ee/"
};

var request = new RestRequest
{
    Resource = "rss/schedule/1001.xml"
};

client.ExecuteAsync(request, (a) =>
{
    if (a.StatusCode == HttpStatusCode.OK)
    {
        var scheduleXml = XDocument.Parse(a.Content);

        var todayMovies = from query in scheduleXml.Descendants("schedule").Descendants("shows").Descendants("show")
                            where DateTime.Parse(query.Element("showDateTime").Value).Date.Equals(DateTime.Now.Date) &&
                            DateTime.Parse(query.Element("showDateTime").Value).TimeOfDay.CompareTo(DateTime.Now.TimeOfDay) > 0
                            select new Movie()
                            {
                                MoviePicture = new BitmapImage(new Uri((string)query.Element("images").Element("imageType2").Value, UriKind.RelativeOrAbsolute)),
                                MovieName = (string)query.Element("title"),
                                MovieId = (string)query.Element("movieId"),
                                MovieSoonest = DateTime.Parse(query.Element("showDateTime").Value).ToString("H:mm")
                            };

        // Removing duplicate movies from list.
        List<Movie> todayList = todayMovies.ToList();
        //IEnumerable<Movie> noDuplicates = todayList.Distinct(new MovieComparer());

        // Adding to the UI
        Dispatcher.BeginInvoke(() =>
        {
            todayBox.ItemsSource = todayList.ToList();
        });
    }
    else
    {
        //error
    }
}); 
```

}

试试看，让我们知道...

编辑：xaml.cs 数据模板：

```
 <StackPanel x:Name="TodayPanel" Grid.Row="1" Margin="10,5,0,10" Orientation="Horizontal" Height="580" Background="#90000000" >
        <ListBox x:Name="todayBox" Width="468">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="10" Orientation="Horizontal">
                                <Image Source="{Binding MoviePicture, FallbackValue=http://www.cinamon.ee/visinternetticketing/images/movies/NowShowingComingSoon/HungerGames.jpg}" />
                                <StackPanel Margin="10" Grid.Row="1" Orientation="Vertical">
                                    <TextBlock TextWrapping="Wrap" Margin="10, 5, 10, 5" FontFamily="Trebuchet MS" Foreground="Orange" VerticalAlignment="Top" Text="{Binding MovieName}"/>
                                    <TextBlock TextWrapping="Wrap" FontFamily="Trebuchet MS" Foreground="White" VerticalAlignment="Bottom" Text="{Binding MovieSoonest}"/>
                                </StackPanel>
                                <HyperlinkButton x:Name="hyperLinkButton" CommandParameter="{Binding MovieId}" />
                            </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel> 
```

RECALL**将 MovePicture 属性从 BitmapImage 更改为 string**。

![这是我使用上面的 DataTemplate 的结果](../Images/5e0e54d1dcc8f9bc809801e09ab6edae.png)

# file - 如何在 Mule ESB CE 中聚合文件

> ID：10174252
> 
> 赞同：0
> 
> 时间：2012-04-16T12:39:57.583
> 
> 标签：file, esb, mule, correlation, aggregator

我需要在 Mule ESB CE 3.2.1 上聚合内存中的许多 csv 入站文件，如有必要对它们进行重新排序。

我怎么能实现这种逻辑？

我尝试使用 message-chunking-aggregator-router，但它在启动时失败，因为 xsd 架构不接受这样的配置：

```
<message-chunking-aggregator-router timeout="20000" failOnTimeout="false" >
            <expression-message-info-mapping correlationIdExpression="#[header:correlation]"/>
</message-chunking-aggregator-router> 
```

我还尝试将我的相关 ID 附加到入站消息，然后通过自定义聚合器处理它们，但我发现 Mule 内部使用由以下各项组成的密钥：

```
Serializable key=event.getId()+event.getMessage().getCorrelationSequence();//EventGroup:264 
```

内部 id 每次都不同（如果相关序列是正确的）：这样，Mule 不会像我预期的那样只使用相关序列，并且多次处理相同的消息。

最后，我可以重新编写自定义聚合器，但我想使用更统一的技术。

提前致谢，

加布里埃尔

* * *

更新

我试过使用 message-chunk-aggregator 但它不符合我的要求，因为它承认重复。

我尝试详细说明我需要涵盖的场景：

1.  Mule 投票（在 SFTP 位置上）
2.  检测到文件 1“FIXEDPREFIX_1_of_2.zip”并将其保存在内存中的某处（作为打开的 SFTPStream，没关系）。为分组保留一些相关信息：组、序列、组大小。
3.  再次检测到文件 1“FIXEDPREFIX_1_of_2.zip”，但无法插入，因为会重复
4.  检测到文件 2“FIXEDPREFIX_2_of_2.zip”，并正确添加
5.  表示已达到组大小，Mule 使用正确的消息集路由 MessageCollection

关于第 2 点，我很幸运能够从文件名中获取信息并将它们放入 MuleMessage::correlation* 属性中，以便后续组件可以使用它们。

我做到了，但重复的处理方式相同。

再次感谢

加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:14:28.810

这是与 Mule 3 一起使用的正确路由器：http: [//www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-MessageChunkAggregator](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-MessageChunkAggregator)

# asp.net - 全局 asax 和 application_endrequest asp.net

> ID：10174253
> 
> 赞同：0
> 
> 时间：2012-04-16T12:40:00.830
> 
> 标签：asp.net, nhibernate, session, global-asax, asp.net-session

当我在其中运行我的方法时，`global.asax`它不会运行，而当我使用`IHttp`模块时它正在运行。请给任何建议。可能是因为：

```
 context.PostRequestHandlerExecute += new EventHandler(Application_EndRequest); 
```

是否可以在没有模块的情况下调用它？

代码示例：

**我运行的方法：**

```
 public static void EndSession()
    {
        HttpContext context = HttpContext.Current;
        if (context.Session != null)
        {
            ISession session = context.Session["Session"] as ISession;
            if (context.Session["Session"] != null)
            {
                if (!session.Transaction.IsActive)
                    OpenTransaction(session);
                session.Flush();
                CommitTransaction(session);
                session.Close();
                context.Session["Session"] = null;
            }
        }
    } 
```

**全球的：**

```
 private void Application_EndRequest(object sender, EventArgs e)
    {
       NhSessionHelper.EndSession();
    } 
```

**IHTTP模块：**

```
namespace MME.DAL.SesionManager
       {
    internal class SessionRequest : IHttpModule
    {
        #region Public Methods

        public void Dispose()
        {
        }

        public void Init(HttpApplication context)
        {
            context.PostRequestHandlerExecute += new EventHandler(Application_EndRequest);
        }

        #endregion

        #region Private Methods

        private void Application_EndRequest(object sender, EventArgs e)
        {
           NhSessionHelper.EndSession();
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:35:54.540

好的，我现在明白 PostRequestHandlerExecute 触发页面完成执行所以名称

> private void Application_EndRequest(对象发送者，EventArgs e)

有点令人困惑，这就是出现问题的原因。

# c - C、读取文件并拆分

> ID：10174255
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:40:06.270
> 
> 标签：c, split, fopen

我有一个输入文件（txt），正好有两行，用`\n`.

例如：

```
FOO
BAR 
```

现在我必须将第一行（在我的示例中为 FOO）放入 a 中`char **a`，将第二行（BAR）放入`char **b`.

我不知道如何使这项工作；你可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:51:35.520

如果要使用动态分配，则必须使用 char 指针分配 char 向量`(char *, not char **)`：

```
#define MAX_CHAR 100
char *buffer = (char*) malloc (MAX_CHAR * sizeof(char)); 
```

然后你使用[fgets](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)函数从流中读取字符并将它们作为 C 字符串存储到缓冲区中：

```
FILE * pFile;
pFile = fopen ("myfile.txt" , "r");
if (pFile == NULL) 
   perror ("Error opening file");
else {
  if(fgets (buffer, MAX_CHAR, pFile) != NULL)
    puts (buffer);
}

fclose (pFile); 
```

通过这种方式，您将第一行存储到缓冲区中，使用两次 fgets 将第一行和第二行保存在您想要的位置，您也可以使用非动态向量。

不要忘记：

```
free(buffer); 
```

在我看来，您不需要 char**，因为在 char *buffer 中包含所有文本，您可以使用[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)来拆分它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:18:59.070

我不知道为什么那里有两个双指针，我认为这是没有必要的。

要从中读取文件`.txt`，您需要一个名为`FILE`. 用它来打开`.txt`文件，例如： `FILE *open = fopen("a.txt", "r");`; `*open`是将通过代码使用的名称（作为打开的文件），而`a.txt`这里表示`.txt`您要打开的文件，并且`r`是模式，在这种情况下，是`read`，这意味着您只想从文件中读取数据。

打开文件后，您在循环的帮助下读取数据（当然是），直到文件结束。在这里，我们得到了写成如下的条件：`while(!feof(open))`.

你得到了循环，现在你必须读取数据。要从文件中读取数据，您需要一个名为 的函数`fscanf`，该函数将从文件中读取数据。你像这样使用它：`fscanf(open,"%s\n", temp[i]);`; while`open`是您之前打开的文件的名称，`"%s\n"`表示您要读取一个字符串直到它到达`\n`，并且`temp[i]`是您存储数据的变量。

现在你已经有了数据，你不再需要`FILE`了。只需使用`fclose(open)`.

好吧，我想我已经向你解释了如何做到这一点，现在轮到你找出如何编码了（这是一个家庭作业，对吧？如果你不自己尝试它就不是一个家庭作业； ))

如果您仍然对此感到困惑，请尝试搜索它。我相信有很多参考资料供你学习。

CMIIW :)

# c++ - 类型定义问题

> ID：10174258
> 
> 赞同：0
> 
> 时间：2012-04-16T12:40:12.830
> 
> 标签：c++, types, struct

我有一个结构：

```
template <class T> struct Array{
int days;
T * M;
Array( int size ) : days(size), M(new T[size])
{
}
~Array()
{
   delete[] M;
}
};

void currentDay();
void add(int,int,Array &); 
```

和一个班级：

```
class Expe {
private:
    int hk;     //HouseKeeping
    int fo;     //Food
    int tr;     //Transport
    int cl;     //Clothing
    int tn;     //TelNet
    int ot;     //Others

 } 
```

类构造函数是：

```
Expe::Expe() {
this->hk = hk;
this->fo = fo;
this->tr = tr;
this->cl = cl;
this->tn = tn;
this->ot = ot;
} 
```

问题：在主函数中，我可以使用对象操作结构...例如使用 setObj() 函数，但是当我尝试在 Controller 或 Controller.hi 中定义我的函数时，会出现以下错误：

```
..\ListStruc.cpp:28:28: error: 'Array' is not a type
..\ListStruc.cpp: In function 'void add(int, int, int)':
..\ListStruc.cpp:31:4: error: request for member 'M' in 'A', which is of non-class type 'int' 
```

编辑：

```
void add(int cant, int tip,Array A){
//Adds to current day the amount to a specific type

A.M[currentDay]; // i try to use this object.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:47:11.987

此声明不正确：

```
void add(int,int,Array &); 
```

因为`Array`是类模板，所以`add`函数也需要是模板：

```
template <class T>
void add(int,int,Array<T> &); 
```

此外，您的`add`函数定义通过值获取参数，而声明通过引用获取参数。

# java - 在android中加载数据库需要一些澄清

> ID：10174261
> 
> 赞同：0
> 
> 时间：2012-04-16T12:40:28.110
> 
> 标签：java, android, database

我需要你的一些意见和建议。我有一个非常庞大的数据库，其中包含大约 2000 条记录，其中包含一些信息。让另一个数据库具有指向那个巨大数据库或 XML 文件的键值对就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:19:55.850

拥有 2000 条记录并不是很大。并且最好使用 SQLite 进行数据操作而不是使用 xml 文件，因为 2000 对的 xml 文件会导致处理速度变慢并且浪费资源。更好地使用 SQLite 来满足此类要求。

# c++ - C++ 多类型对象思想

> ID：10174262
> 
> 赞同：0
> 
> 时间：2012-04-16T12:40:31.740
> 
> 标签：c++, char, wchar-t

我的程序需要大量的 ANSI<=>UNICODE 对话，所以我想到了创建多类型对象，它比附加功能和大量新/删除更容易转换所有东西。伪代码：

```
class CWchar // char based
{
public:
    public static implicit operator wchar_t*(CWchar cw)
    {
        // converting cw.data to wchar_t
        // up to U+FFFF conversion needed
    }
    public static implicit operator char*(CWchar cw)
    {
        return cw.data;
    }
    CWchar& CWchar::operator=(const char* c)
    {
        data = *c; 
        return *this;
    }
    CWchar& CWchar::operator=(const wchar_t* c)
    {
        //conversion to char* ...
        return *this;
    }

    // add some smart pointers, garbage collector, and leave delete

private:
    char* data;
} 
```

这真的值得编码还是我应该考虑另一种解决方案？也许已经完成了项目？或者也许我错了，这个想法很糟糕？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:57:50.137

这听起来很像[codecvt](http://en.cppreference.com/w/cpp/locale/codecvt)。这允许您在 Char* 和多字节 wchar_t* 流之间进行转换。这是标准库的一部分。Stroustrup 的 The C++ Programming Language 第三版对此有一个很好的附录。

# iphone - 默认启动画面无法使用区域格式

> ID：10174264
> 
> 赞同：3
> 
> 时间：2012-04-16T12:40:32.380
> 
> 标签：iphone, objective-c, ios, localization

这里的问题是：

我创建了具有相同名称的不同 Default.png 图像的“en.lproj”和“en-AU.lproj”。我已将“英语”设置为一种语言，对于语言环境，我已设置“澳大利亚”。

但是在启动时，我得到了引用“en.lproj”文件夹的启动画面。

我需要将启动画面引用到“en-AU.lproj”文件夹。

PS：我检查了我的代码，关于设置或获取 UserDefaults 的一切都是正确的。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:36:18.097

我在这里找到的东西：

**iOS**中的重要提示：bundle 接口在查找本地化资源时不考虑方言或脚本信息；仅考虑语言指示符代码。因此，如果您的项目包含具有语言和区域指示符的特定于语言的项目目录，则这些目录将被忽略。Mac OS X 中的包接口确实支持特定语言项目目录中的区域指示符。

参考：http: [//developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html)

我必须以某种方式破解我的代码，使启动画面外观针对具有区域指示符（例如：en-AU）的不同本地化文件夹进行自定义。

谢谢。:)

# javascript - document.getElementById 返回一个已知元素的 null - 为什么？

> ID：10174265
> 
> 赞同：4
> 
> 时间：2012-04-16T12:40:32.883
> 
> 标签：javascript, firefox, google-chrome, gmail

我正在使用 Google Chrome JavaScript 控制台，我只是在查看 Gmail 页面并练习操作 DOM。但是，当我执行以下操作时，它只是返回为空：

```
document.getElementById('gbx3'); 
```

页面中有`div`一个 id 为“gbx3”的元素 - 那么它为什么返回 null 呢？什么会/可能导致这种情况？使用 Firefox Web 控制台也会发生同样的事情。

如果您尝试访问`'gb'`同一 Gmail 页面中的 id（这是主顶部工具栏），它会返回 null，但如果您在 google.com 访问此元素，它将返回该元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T12:43:53.293

GMail 由框架组成。这个有效：

```
frames[3].document.getElementById('gbx3'); 
```

一般来说，如果你知道iframe元素的ID，`contentDocument`就可以使用该属性（前提是你没有同源问题，并且加载了文档）：

```
document.getElementById('hist_frame').contentDocument.getElementById('gbx3'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:46:27.470

根据我的评论：

> 我最好的选择是 gbx 在包含搜索结果的 iframe 中，并且 document.getElementById 与您的控制台在同一范围内工作

您可以搜索所有框架以找到所需的内容：

```
for(var i = 0; i < frames.length; i++) {
   var curDoc = frames[i].document;
   if(curDoc.getElementById('gbx')) console.log(curDoc.getElementById('gbx'));
} 
```

# iphone - 从 iphone 照片库中获取照片并在表格视图中显示

> ID：10174272
> 
> 赞同：4
> 
> 时间：2012-04-16T12:40:55.477
> 
> 标签：iphone, xcode, alassetslibrary

我想在表格视图中显示照片库中的所有图像。我可以通过 assetsLibrary 访问所有图像，但无法在表格中显示它们。我没有收到任何错误，但仍然不知道发生了什么。

```
NSMutableArray *assets = [[NSMutableArray alloc]init];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc]init];

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup   *group,  BOOL *stop){

         if(group != NULL){

        [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop){

                if(result != NULL){
                [assets addObject:result];
                }else NSLog(@"NO photo");;
          }];
     }
}

failureBlock:^(NSError *error){NSLog(@"Error");}]; 
```

表格视图的数据源方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

NSString *identifier = @"id";

UITableViewCell *cell = (UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:identifier];  

if(cell == NULL){

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
}

[cell.imageView setImage:[UIImage imageWithCGImage:[[assets objectAtIndex:indexPath.row]thumbnail]]];

[cell textLabel].text = @"Photo";

return cell; 
```

}

请帮助我做错了什么......

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:25:51.797

您可以参考以下链接来解决您的问题

[http://agilewarrior.wordpress.com/tag/alassetslibrary/](http://agilewarrior.wordpress.com/tag/alassetslibrary/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:59:47.373

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc]init]; 
```

从库实例返回的对象的生命周期与库实例的生命周期相关联。我添加了一个静态方法来检索该类的共享实例。

```
+ (ALAssetsLibrary *)defaultAssetsLibrary {

    static dispatch_once_t pred = 0;

    static ALAssetsLibrary *library = nil;

    dispatch_once(&pred, ^{

    library = [[ALAssetsLibrary alloc] init];

    });

   return library; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:49:14.600

```
 NSMutableArray *assets = [[NSMutableArray alloc]init]; 
```

在上面的代码中添加`__block`如下：

```
__block NSMutableArray *assets = [[NSMutableArray alloc]init]; 
```

# iphone - 如何使用 ALAssets 库获取视频的绝对路径？

> ID：10174274
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:08.067
> 
> 标签：iphone, ios, alassetslibrary

它很简单，我怎样才能获得使用 ALAssets 库检索到的视频的绝对路径？我想使用 ASI 框架将此视频作为文件附件上传。

如果我使用 UIImagePickerViewController，它就可以工作。但这不再是一个选择。我也不想使用 NSData 或将视频复制粘贴到临时文件。需要智能解决方案？有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:33:12.620

您无法获取使用 AssetsLibrary-Framework 检索的视频的绝对路径（文件系统路径）。原因很简单，因为这些文件在您应用的沙箱之外，您无法直接访问它们。需要使用 ALAssetsRepresentation 的 getBytes-Method 来获取视频文件的字节数据。您很可能必须将此数据保存到临时文件中，然后才能将其附加到电子邮件中。

干杯，

亨德里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T02:23:38.863

您可以使用`ALAssetPropertyAssetURL`. 从[文档](https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAsset_Class/index.html#//apple_ref/doc/constant_group/Property_Keys)：

*   检索资产的 URL 标识符的键。

*   对应的值是一个 NSURL 对象。

*   库更改通知使用此 URL 来识别资产和资产组。只有 ALAssetRepresentation 和 ALAssetsGroup 类支持此属性。

所以，一旦你得到`ALAsset`对象，你就可以得到这样的 url：

```
 asset.defaultRepresentation.url 
```

# java - 我可以执行类似于语言命令的字符串吗？

> ID：10174275
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:18.330
> 
> 标签：java, android

示例--- 就像 SQL 一样，我们将 SQL 语句写为字符串，然后执行

```
strsql = "Select * from international_table "; 
```

现在我们做什么我们类似地执行这个语句

我想要在 java 或 c#

像这样

```
strjavacode = "String str = \" Masdfksdja \";System.out.Println(str); " 
```

然后是一些如何执行这个

我渴望做这样的事情，我不必多次声明变量和赋值或声明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:50:45.360

是的，有些语言可以做到这一点，例如 Javascript 和 PHP，它们具有`eval()`允许您将任意字符串作为代码运行的功能。

但是，您的示例在几乎任何语言中都将被视为对该功能的不必要滥用，因为您应该使用数组来表示可通过索引访问的一堆值`String s1`，而不是使用单独的变量。`String s10`这就是数组的用途。

Java（如 C#、C++ 和许多其他语言）没有此功能。您可以即时编译代码，但它必须是类的一部分，这是一个非常复杂的过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T12:58:49.540

你认为你可能需要 eval 但在 Java 中你也可以实现命令模式。不过，这不会让您执行任意代码。

```
interface Command {
   void execute();
}

class StringOutputCommand implements Command {

   private final int value;

   public StringOutpuCommand(final int newValue) {
       this.value = newValue;
   }

   void execute() {
     // do something with value 
      System.out.println(value);
   }

}

// then elsewhere you could have a bunch of these command objects
 List<Command> commands = new ArrayList<Command>();    

 for (int i = 0; i < 10; i++) {
     commands.add(new StringOutputCommand(i));
 }

 // which you could execute like this ...
 for (Command command : commands) {
    command.execute();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:07:43.240

取决于你想要什么。如果在执行后您希望 s1 和 s100 可供进一步使用，那么这根本不可能。也不可能编写可以访问任何非全局变量的任意代码。

您可以做的是编写一个实现接口的类并在运行时编译该类。然后，您可以使用反射实例化这个新类的实例。如果接口提供了适当的方法，您可以在执行之前、期间和之后查询此对象。您也可以使用反射来访问对象的字段。

不过，这一切都非常 hacky，并且试图以 Java 不适合的方式完成任务。如果您只想创建 100 个任意字符串，那么使用数组并创建自己的小型 DSL 来完成简单的任务可能会更好。

您可能希望尝试的最后一种方法是使用在 JVM 上运行的脚本语言，例如 Jython 或 Groovy。Groovy 非常适合这个。由于 Groovy 是 Java 的超集，您不必担心有效的 Java 无法编译。尽管可能会担心无效的 Java 可能会编译。eg`String s = 'some string'`是有效的 Groovy，但不是有效的 Java。

使用 Groovy，您可以执行以下操作：

```
import groovy.lang.GroovyShell;

public class SomeClass {

    public static void main(String[] args) {
        GroovyShell shell = new GroovyShell();

        for (String arg : args) {
            Object result = shell.evaluate(arg);

            System.out.println("result is: "+result);
        }
    }

} 
```

为此，您可以输入 say`String s1 = "hello";`和`String s2 = "world";`的参数`String combined = s1 + " " + s2;`。

# eclipse - apk 文件在模拟器中工作但在 android 设备中不工作

> ID：10174276
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:41:19.423
> 
> 标签：eclipse, android-emulator, android

我在我的电脑上运行 Android 模拟器中的应用程序，它工作正常。

但，

当我将我的Android设备与PC连接时，然后通过eclipse，我运行应用程序，eclipse提示无论您是要在android模拟器还是Android设备中安装您的应用程序，我选择Android设备，设备提示强制关闭错误！ ！！！

即使在我的笔记本电脑中，应用程序也已正确安装，但无法正常工作...

可能是什么原因 ？？？？

我当前的 Android 设备版本是 2.3.6

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:37:41.753

很难说问题是什么，因为你描述的并不具体。您是否曾经能够在设备上安装任何应用程序？只是这个应用程序没有安装吗？

我要检查的第一件事：

1.  您是否安装了正确的 Windows USB 驱动程序？

    Android 开发者网站有一个专门的页面 ( [http://developer.android.com/sdk/oem-usb.html](http://developer.android.com/sdk/oem-usb.html) )，但您应该查看制造商的网站以获取最新的软件。

2.  您是否在设备上启用了开发人员设置？

    设置 > 应用程序 > 启用未知来源

    设置 > 应用程序 > 开发 > 启用 USB 调试

# android - 在android中创建帧动画

> ID：10174277
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:20.420
> 
> 标签：android, animation, frame, android-animation

嗨，我正在尝试为我在 android 应用程序中的启动页面设置一个带有一系列图像的帧动画作为背景，如果可能的话，我希望代码在启动时运行。我一直在编写代码，但收到一条错误消息，提示“无法解析帧动画”。

我在主要活动中实现的java代码如下：

```
@Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView frameanimation = (ImageView) findViewById(R.id.frame_animation);
        AnimationDrawable frame_animation = (AnimationDrawable) frameanimation.getBackground();

        frame_animation.setVisible(true, true);
        frame_animation.start();
    } 
```

然后，我让这段代码在我的 XML 布局文件中实现图像视图：

```
<ImageView
        android:id="@+id/frame_animation"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/frame_animation" /> 
```

最后我将我的动画drawable保存为我的drawable文件夹中的'frame_animation.xml'。

```
<?xml version="1.0" encoding="utf-8"?>

<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
    <item android:drawable="@drawable/homebckgrnda1" android:duration="200" />
    <item android:drawable="@drawable/homebckgrnda2" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda3" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda4" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda5" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda6" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda7" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda8" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda9" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda10" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda11" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda12" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda13" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda14" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda15" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda16" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda17" android:duration="50" />
</animation-list> 
```

非常感谢任何帮助，我只是无法弄清楚出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:10:23.683

ImageView ( ) 的来源和 ImageView ( `android:src`) 的背景`android:background`是不同的东西。您在 XML 中设置**源**，但试图在代码 ( )中获取**背景**图像。`frameanimation.getBackground()`

# .htaccess - https 和 http 结合 .htaccess

> ID：10174278
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:26.537
> 
> 标签：.htaccess, http, https

我有以下问题。

我有一个网站，对于目录 /members 和 /admin 我有一个 .htaccess，它强制这些 URL 转到 https:// 所有其他 URL 都被迫转到正常 https://

现在，对于 /members 是 https:// 我在页面中有一个对 /js/script.js 的引用，它被导入到页面中，但是当然这个目录 /js 在页面被强制为正常 http:// 时显示在 https://

如果 Internet Explorer 用户想要在安全页面中查看非安全内容，则会显示一个弹出窗口，如果他们单击是，就可以了。如果他们单击否，则 javascript 不起作用。

/js 用于普通的 http:// 网站和 /members 安全网站。/images 目录也是这种情况

所以我不确定如何解决这个问题。除了说 /js 和 /images 可以是 https 或 http。但我不知道如何在 htaccess 文件中配置它。

任何帮助将非常感激！

这是我现在使用的 htaccess 文件：

```
 #Turn SSL on everything, except members and admin
  RewriteCond %{HTTPS} =off
  RewriteCond %{REQUEST_URI}  ^(/members|/admin)
  RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # Turn SSL off everything, except members and admin
  RewriteCond %{HTTPS} =on
  RewriteCond %{REQUEST_URI} !^(/members|/admin)
  RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:50:34.207

有很多方法。这里仅仅是少数。

**1号。**在你的规则**之前**添加这个：

```
# do not do anything for js/css/image files
# (will affect ALL such files in ALL folders)
RewriteRule \.(css|js|jpe?g|gif|png|ico)$ - [L] 
```

上面的规则将保留所有 css/js/image 文件（站点上的任何位置）的协议

**2号。**在你的规则**之前**添加这个：

```
# do not do anything to any files in css/js/images folders
RewriteRule ^(css|js|images)/ - [L] 
```

对于 css/js/image 文件夹中的所有文件（例如`example.com/js/main.js`，`example.com/images/logo.png`甚至`example.com/js/compress.php`

**如果你愿意**——你可以将它们组合成一个规则（更具体地说）——但这是不必要的（从我的角度来看）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:47:58.567

在您的图像和 js 目录中创建自己的 .htacess 文件，其中包含以下内容：-

```
RewriteEngine off 
```

这将关闭对该文件夹中所有文件的写入。

在您的 html 中，不要在链接上指定域，而是这样做，`/js/myscript.js`而不是`http://mydomain.com/js/myscript.js`这样，它只会继承与他们正在查看的页面相同的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:55:40.693

一年前我遇到了同样的问题。终于可以自己得出结论了。

查看我的问题并回答[htaccess（https 到 http）](https://stackoverflow.com/questions/1818869/htaccess-https-to-http)

# c# - 与基础设施的超图交叉轴？

> ID：10174285
> 
> 赞同：-4
> 
> 时间：2012-04-16T12:41:40.053
> 
> 标签：c#, infragistics, axes

我想在我的超图（基础设施产品，wpf）上有交叉轴。我正在编写 c# 代码，有什么想法吗？

我搜索了“crossingaxis”，但似乎这只适用于极坐标图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:51:03.590

我不确定这是您要查找的内容，但据我了解文档，包括 UltraChart 在内的所有图表都有一个[Axis 类](http://help.infragistics.com/Help/NetAdvantage/WPF/2010.1/CLR3.5/html/Infragistics3.Wpf.Chart.v10.1~Infragistics.Windows.Chart.Axis_members.html)，该类具有[Crossing](http://help.infragistics.com/Help/NetAdvantage/WPF/2010.1/CLR3.5/html/Infragistics3.Wpf.Chart.v10.1~Infragistics.Windows.Chart.Axis~Crossing.html)属性。

# java - 在 JAIN SIP 上启用调试日志（NIST 实施）

> ID：10174286
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:42.153
> 
> 标签：java, debugging, sip, jain-sip

我正在开发一个基于 JAIN SIP 和 NIST 实现的 Java 应用程序，并希望启用/查看 SIP 堆栈调试。

我找不到实现这一目标的工作方式 - 任何帮助将不胜感激。

谢谢！乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:47:18.083

初始化堆栈时尝试传递以下属性

```
gov.nist.javax.sip.LOG_MESSAGE_CONTENT=true
gov.nist.javax.sip.TRACE_LEVEL=32
gov.nist.javax.sip.DEBUG_LOG=logs/mss-jsip-debuglog.txt
gov.nist.javax.sip.SERVER_LOG=logs/mss-jsip-messages.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:45:38.797

尝试这个

```
 Properties properties = new Properties();
    properties.setProperty("com.g5.javax.sip.STACK_NAME",Profile.getUserName());
    properties.setProperty("com.g5.javax.sip.IP_ADDRESS", Profile.getProxyIp());

    // DEBUGGING: Information will go to files

    properties.setProperty("gov.nist.javax.sip.TRACE_LEVEL", "32");
    properties.setProperty("gov.nist.javax.sip.SERVER_LOG",
            "textclient.txt");
    properties.setProperty("gov.nist.javax.sip.DEBUG_LOG",
            "textclientdebug.log");
    try{
        sipStack = sipFactory.createSipStack(properties);

    }catch(Exception e){
        System.out.println(e.getMessage());
    } 
```

# cakephp - 一次控制器的 URL 重写 - cake 2.0

> ID：10174287
> 
> 赞同：1
> 
> 时间：2012-04-16T12:41:50.593
> 
> 标签：cakephp, url-rewriting, routes, cakephp-2.0

我正在用 CakePHP 开发一个简单的 CMS，现在它有 4 个控制器（菜单、站点、角色、用户），我想重写一个控制器，但我遇到了问题。

我仅将所有操作用作管理员，用于管理目的，例如 admin_view、admin_add...... 除了 siteController（此控制器仅用于前端目的）

我需要我的 www.example.com/site/view/something_here 必须替换为 www.example.com/something_here - 这将显示在前端所以。

我在路由文件中添加了一行：

```
Router::connect('/*', array('controller' => 'site', 'action' => 'view')); 
```

但添加后我无法使用其他控制器。

我在上述行之前再次添加了一些行：

```
Router::connect('/admin/Menus/*', array('controller' => 'menus', 'prefix' => 'admin')); 
```

所有其他控制器都一样，但是如果我在 url 中发送任何操作或 id，它就不起作用。像 - http://www.exmple.com/admin/menus/[view/1] - 方括号里面的那个不起作用。

关于重写这个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:41:45.240

[我刚刚在另一个线程](https://stackoverflow.com/questions/10213814/cakephp-route-with-regex/10217203#10217203)上回答了类似的问题。

将管理控制器路由放在“/*”路由之前是正确的想法，但是您这样做的方式路由器无法分配操作。您可以为每个控制器使用以下内容：

```
Router::connect('/admin/Menus/:action/*', array('controller' => 'menus', 'prefix' => 'admin')); 
```

或者您可以使用[默认的前缀路由路由](http://book.cakephp.org/1.3/view/950/Prefix-Routing)，因此您不必为每个新控制器添加路由。

```
// prefix routing default routes with admin prefix
Router::connect("/admin/:controller", array('action' => 'index', 'prefix' => 'admin', 'admin' => true));
Router::connect("/admin/:controller/:action/*", array('prefix' => 'admin', 'admin' => true)); 
```

# google-maps - 地理编码器失败，原因是：谷歌地图反向地理编码示例中的 ZERO_RESULTS 错误

> ID：10174295
> 
> 赞同：1
> 
> 时间：2012-04-16T12:42:18.390
> 
> 标签：google-maps, google-maps-api-3

我正在测试[网站上给出的反向地理编码示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

我正在测试德里、孟买等印度城市的各种值。它运行良好。

但是当我经过查谟和克什米尔的纬度和经度时`32.491249204776416, 74.92896563110344`。表明`Geocoder failed due to: ZERO_RESULTS`

我无法理解这种奇怪行为的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:42:29.963

尽管谷歌地图地理编码支持美国以外的地区，但谷歌地图不支持的位置很少。

正如您在问题中提到的那样，查谟和克什米尔的少数地区以及以色列的少数地区不受支持。（有时对于包含特殊字符的位置，也会引发此错误）。

你无能为力。您所能做的就是处理代码中的错误:)

# java - Eclipse 可以像多个源文件夹一样有多个输出文件夹吗

> ID：10174296
> 
> 赞同：9
> 
> 时间：2012-04-16T12:42:18.830
> 
> 标签：java, eclipse

我有一个 Eclipse 项目，它有两个源文件夹——“src”和“test”。我希望这两个文件夹的构建进入单独的输出文件夹。

原因是，这两个文件夹都有一个名为 ServiceProviders.properties 的属性文件，该文件对于代码的生产和测试运行具有不同的值。

问题是，由于只有一个输出文件夹可以复制所有已编译的类，因此不会复制“test”中的属性文件，因此我的测试代码会获得属性文件的生产版本。我想我正在尝试模拟我们可以在 Maven 中拥有不同类路径的方式（以及它们的查找顺序）。

如果这不起作用，我将使用 JVM 属性来指定可以在测试用例中使用的某些值。但是，这似乎不是一个优雅的解决方案。

使用 Maven 可以让它工作，但我不能在这个项目中使用 Maven。

**更新1：**

感谢您的两个答案。由于它们是相同的，我接受了之前发布的那个。

**更新2：**

尽管我可以为相应的源文件夹获取多个输出文件夹，但它并没有解决我原来的问题，即在我运行测试用例时从测试加载 ServiceProviders.properties，当我在服务器上运行应用程序时从 src 加载一个日食。我让它工作的方法是使用来自测试文件夹的 ServiceProviders.properties 文件创建一个单独的 jar 文件。在我的测试用例的运行配置中，我添加了这个 jar 文件并更改了顺序，因此它显示为查找的第一个依赖项。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T12:48:13.630

是的，它可以，我刚刚检查过。如果您进入项目的属性，然后进入 Java 构建路径，您可以在其中选择不同的源文件夹，还有一个名为“允许源文件夹的输出文件夹”的选项，如果选中，则会添加一个可编辑的输出文件夹对于您的每个源文件夹。只需选择它并单击编辑按钮就可以了

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T12:47:10.107

简单：单击 Java 构建路径上的“允许源文件夹的输出文件夹”| 源选项卡。然后，当您展开每个文件夹的设置时，您会得到“输出文件夹”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T13:48:39.813

在 PackageExplorer 视图中单击源文件夹并选择“配置输出文件夹...” 您现在可以为每个源文件夹单独配置输出文件夹。

# drupal - Drupal 7 - 在图像悬停时显示文本

> ID：10174300
> 
> 赞同：1
> 
> 时间：2012-04-16T12:42:48.423
> 
> 标签：drupal

嗨朋友们，我在这里使用了视图。每当我将鼠标悬停在图像上时，我都有 3 张图像，必须在该图像上显示一些文本，而且图像必须看起来模糊。任何可用的模块或关于如何做到这一点的任何想法？

# msbuild - 如何使用 MSBuild.ExtensionPack

> ID：10174302
> 
> 赞同：0
> 
> 时间：2012-04-16T12:42:59.580
> 
> 标签：msbuild, msbuild-task, msbuild-4.0, msbuildextensionpack

我必须使用 OpenCover 并行运行两个目标来配置 iisexpress.exe。下面的链接与我遇到的问题有关的信息。

[https://github.com/sawilde/opencover/issues/92#issuecomment-5143204](https://github.com/sawilde/opencover/issues/92#issuecomment-5143204)

这建议我使用 CodePlex 的 Msbuild.ExtensionPack。

我已经下载了 MSBuild Extensions 的源代码。

我编译它。我将 MSBuild.ExtensionPack.tasks 任务文件复制到了 BuildBinaries 文件夹中。

我在我的项目文件中添加了以下几行。

我试图运行 ExecMultipleTasks 目标。但得到以下错误。

错误 MSB4036：未找到“MSBuild.ExtensionPack.Framework.Parallel”任务。检查以下内容： 1.) 项目文件中的任务名称与任务类的名称相同。2.) 任务类是“公共的”并且实现了 Microsoft.Build.Framework.ITask 接口。3.) 在项目文件或位于“C:\Windows\Microsoft.NET\Framework\v4.0.30319”目录的 *.tasks 文件中正确声明了任务。

你能告诉我如何解决这个问题吗？

谢谢，

文卡特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-24T22:28:37.093

您的应用程序使用的是哪个版本的 Visual Studio？，如果它是 32 位的 VS，则安装 32 位[扩展包](https://github.com/mikefourie/MSBuildExtensionPack/releases)（MSBuild.Extension.Pack.4.0.12.0.zip\4.0.12.0\x86），否则选择 64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:56:33.317

如果您打开文件 C:\Program Files (x86)\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks 会认为您发现任务 MSBuild.ExtensionPack.Framework.Parallel 的 dll 路径不正确。

```
<UsingTask AssemblyFile="$(ExtensionTasksPath)MSBuild.ExtensionPack.dll" TaskName="MSBuild.ExtensionPack.Framework.Parallel"/> 
```

我想变量 $(ExtensionTasksPath) 没有找到您的版本的构建路径。将文件复制到该路径或更改/硬编码新路径。

# vb.net - 属性定义中括号的含义是什么？

> ID：10174304
> 
> 赞同：10
> 
> 时间：2012-04-16T12:43:09.560
> 
> 标签：vb.net

定义中属性名称周围的方括号是什么意思？

例子 ：

```
Public Property [Date] As String 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T12:46:48.297

要使用保留关键字作为标识符，必须使用方括号来区分标识符和关键字：

```
dim [String] As String

public sub [Stop]
end sub 
```

在 msdn 上它说：

> 任何程序元素（例如变量、类或成员）都可以与受限关键字同名。例如，您可以创建一个名为 Loop 的变量。但是，要引用它的版本——它与受限制的 Loop 关键字同名——你必须在它前面加上完整的命名空间来限定它，或者将它括在方括号 ([ ]) 中，如下例所示：

参考[这里](http://msdn.microsoft.com/en-us/library/hwx24eb6%28vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T12:45:14.000

此语法允许您使用保留字作为成员或变量的名称。从代码可维护性的角度来看，虽然恕我直言，但不推荐（尽管请参阅下面的评论以获取关于这一特定点的另一种观点）！

如果您要将名为“Date”的属性声明为字符串，则特别不推荐，但这是一个单独的问题......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T12:47:00.980

Date 是 VB.NET 中的保留关键字，但如果括在方括号中，则可以用作属性或变量名称：

[http://msdn.microsoft.com/en-us/library/ksh7h19t(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ksh7h19t(v=vs.90).aspx)

# html - 将 excel 文件保存为 html 格式会生成许多 sheetXXX.htm

> ID：10174315
> 
> 赞同：1
> 
> 时间：2012-04-16T12:43:59.407
> 
> 标签：html, excel

我想将复杂的 Excel 文件保存为 html 格式。使用“另存为”对话框可以轻松完成，但它会生成具有相同名称 + .files 的 htm 文件和文件夹，其中 filelist.xml、sheet001.htm、sheet002.htm、...

如何仅将第一张工作表保存为 htm 格式？所以所有信息都在单个 htm 文件中？（就像 MS Word 一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:47:16.160

导出前删除其他工作表。

（右键单击工作表选项卡，然后单击删除）

保存时将选择更改为网页并选择`selection:sheet`按钮按发布并酌情继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:53:03.363

您可以做的是将要另存为 HTML 的工作表复制到新工作簿，然后将该新工作簿另存为 HTML。例如：

```
Public Sub doIt()

    hardCopyToNewBook
    saveFile "C:\temp\fileName.html"

End Sub

Private Sub hardCopyToNewBook()

  Dim tabs As Variant
  Dim s As Worksheet

  tabs = Array("Sheet1", "Sheet2")

  Sheets(tabs).Copy
  For Each s In ActiveWorkbook.Sheets
    With s
      .Cells.Copy
      .Cells.PasteSpecial Paste:=xlPasteValues
    End With
  Next s

  Application.CutCopyMode = False

End Sub

Private Sub saveFile(htmlFileName As String)

  Application.DisplayAlerts = False
  Application.DefaultWebOptions.SaveHiddenData = False

  On Error Resume Next
  Call ActiveWorkbook.SaveAs(fileName:=htmlFileName, FileFormat:=xlHtml)
  ActiveWorkbook.Close
  Application.DisplayAlerts = True

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:49:50.033

找到解决方案 - 有单选按钮仅保存选定的工作表

# jquery - JQuery Onchange 事件不起作用

> ID：10174318
> 
> 赞同：0
> 
> 时间：2012-04-16T12:44:06.863
> 
> 标签：jquery, select, onchange

我相当卡住了。尝试学习和练习一些基本的 JQuery 并惨遭失败。onchange 事件是行不通的。任何想法为什么这个看似简单的事情不会触发？当我查看 chrome 开发工具时，Jquery 参考就在那里。感谢帮助。

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type='javascript'>
        $(document).ready(function(){
            $("#groups").change(function(){
                alert("hi");
            });
        });
    </script>
</head>

<body>

   <form id="select_form">
        Select Group to Review:<br />
        <select id="groups" class ="groups">
            <option value="0">Select Group</option><option value="1">GoTeam</option>            </select>
        <br /><br />
            <input type="submit" value="confirm" />
        </form>
    <div id="result"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:49:02.030

它不喜欢你的脚本类型。请改用以下内容：

```
<script type='text/javascript'> 
```

或者将其放在一个单独的文件中。

在这里看到它失败了：http: [//jsfiddle.net/uajDB/1/](http://jsfiddle.net/uajDB/1/)

然后在这里工作 [http://jsfiddle.net/uajDB/](http://jsfiddle.net/uajDB/)

# ruby-on-rails - 如何在 Factory Girl Rails 中使用 Pry？

> ID：10174320
> 
> 赞同：10
> 
> 时间：2012-04-16T12:44:15.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot, pry

为了调试我`rescue binding.pry`在有问题的行末尾插入的工厂：

```
after_create do |my_object, proxy|
  my_object.foreign_key_id = proxy.generated_attribute rescue binding.pry 
```

不幸的是，在生成的`FactoryGirl::Declaration::Implicit`上下文中，我似乎无法像在“正常”代码（`NameError: undefined local variable or method `proxy' for #<FactoryGirl::Declaration::Implicit:0x0...>`）中那样访问上下文。**如何在 Pry 会话中检查`my_object`和操作？`proxy`**

该代码被称为 Cucumber 功能背景的一部分：

```
Given the following my_objects exist:
| property |
| value    | 
```

`factory_girl_rails`并且`factory_girl/step_definitions.rb`是支持脚本所必需的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T17:45:18.833

为了允许属性名称在没有块参数的情况下定义属性， factory_girl 使用`instance_eval`并取消定义 上的大多数私有方法`Object`，包括`binding`. 这意味着当您`binding.pry`在上面调用时，您不会调用`pry`该块的绑定；相反，您正在定义一个名为“绑定”的新属性并调用`pry`创建的属性定义。

你可以通过使用`Kernel.binding.pry`来解决这个问题。

# matrix - 即使输入相同，CUDA 内核也会给出不同的结果

> ID：10174321
> 
> 赞同：0
> 
> 时间：2012-04-16T12:44:22.627
> 
> 标签：matrix, cuda

我想编写一个 CUDA 内核，它将乘以 2 个矩阵 NxN 大小。我确实设法做到了，但是没有线程合作......现在我想用线程合作来做，我按照SDK中提供的代码进行操作。但由于某种原因，内核返回不同的结果。所以这里是 .cu 文件：

```
#include<stdio.h>
#include<cuda.h>
#include<cuda_runtime.h>
#include<cuda_runtime_api.h>
#include<device_functions.h>

static void HandleError(cudaError_t err, const char *file, int line)
{
    if(err!=cudaSuccess){
    printf("%s in %s file at line %s\n", cudaGetErrorString(err), file, line);
    exit(EXIT_FAILURE);
    }
}

#define HANDLE_ERROR(err) (HandleError(err, __FILE__, __LINE__))

#ifndef _MATRIXMUL_KERNEL_H_
#define _MATRIXMUL_KERNEL_H_

#define ORDER 4

__global__ void matrixMul( int* A, int* B, int* C, int wA, int wB)
{
    int bx = blockIdx.x;
        int by = blockIdx.y;

    int tx = threadIdx.x;
    int ty = threadIdx.y;

    int aBegin = wA * ORDER * by;

    int aEnd   = aBegin + wA - 1;

    int aStep  = ORDER;

    int bBegin = ORDER * bx;

    int bStep  = ORDER * wB;

    int Csub=0;

    for (int a = aBegin, b = bBegin; a <= aEnd; a += aStep, b += bStep) 
    {
        __shared__ int As[ORDER][ORDER];

        __shared__ int Bs[ORDER][ORDER];

        As[ty][tx] = A[a + wA * ty + tx];
        Bs[ty][tx] = B[b + wB * ty + tx];

        __syncthreads();

        #pragma unroll

        for (int k = 0; k < ORDER; ++k)
            Csub += As[ty][k] * Bs[k][tx];

        __syncthreads();
    }

    int c = wB * ORDER * by + ORDER * bx;
    C[c + wB * ty + tx] = Csub;
}

#endif

int main()
{
    int *a=(int*)malloc(ORDER*ORDER*sizeof(int));
    int *b=(int*)malloc(ORDER*ORDER*sizeof(int));
    int *c=(int*)malloc(ORDER*ORDER*sizeof(int));

    int *dev_a, *dev_b, *dev_c;

    HANDLE_ERROR(cudaMalloc((void**)&dev_a, ORDER*ORDER*sizeof(int*)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_b, ORDER*ORDER*sizeof(int*)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_c, ORDER*ORDER*sizeof(int*)));

    for(int i=0; i<ORDER*ORDER; i++)
    {
        a[i]=1;
        b[i]=2;
    }

    HANDLE_ERROR(cudaMemcpy(dev_a, a, ORDER*ORDER*sizeof(int), cudaMemcpyHostToDevice));
    HANDLE_ERROR(cudaMemcpy(dev_b, b, ORDER*ORDER*sizeof(int), cudaMemcpyHostToDevice));

    matrixMul<<<ORDER, ORDER>>>(dev_a, dev_b, dev_c, ORDER, ORDER);

    HANDLE_ERROR(cudaMemcpy(c, dev_c, ORDER*ORDER*sizeof(int), cudaMemcpyDeviceToHost));

    for(int i=0; i<ORDER*ORDER; i++)
    {
        if((i%ORDER)==0)
            printf("\n\n");
        printf("%d\t", a[i]);
    }

    for(int i=0; i<ORDER*ORDER; i++)
    {
        if((i%ORDER)==0)
            printf("\n\n");
        printf("%d\t", b[i]);
    }

    for(int i=0; i<ORDER*ORDER; i++)
    {
        if((i%ORDER)==0)
            printf("\n\n");
        printf("%d\t", c[i]);
    }

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    return 0;
} 
```

是的，我知道没有“真正的”问题......但如果有人能指出我正确的方向，我将不胜感激。谢谢！

如果您需要更多代码示例，请告诉我，我将编辑问题。

编辑#1：我忘了提...我无法在 Visual Studi 2010 中实现 nvcc，所以我无法使用调试器。对此有何建议？

**编辑#2**：更新了问题，因此它同时显示了 CUDA 内核和 main。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:39:20.057

*如果*您的线程几何是`BLOCKSIZE x BLOCKSIZE`. 是这样吗？

如果这不是你的问题：

既然您说您可以在没有线程同步的情况下工作，那么您可能正确地分配了内存。

尝试使用 4x4 的线程几何和以下两个矩阵进行测试：

```
1 1 1 1    1 0 0 0
2 2 2 2    0 1 0 0
3 3 3 3    0 0 1 0
5 5 5 5    0 0 0 1 
```

输出应该会提示您可能出了什么问题。

# objective-c - XCode/Cocoa Mac 改变视图

> ID：10174322
> 
> 赞同：0
> 
> 时间：2012-04-16T12:44:28.063
> 
> 标签：objective-c, xcode, cocoa, views

我无法弄清楚如何在我的 XCode 项目中的不同自定义视图之间进行更改。

我有我的主 nib 文件，由 1 个主窗口和 5 个自定义视图组成。主窗口由 5 个按钮组成，所有这些按钮都需要连接到不同的视图。因此，例如，我单击按钮 1，它会关闭当前菜单并加载自定义视图 1。

我很难弄清楚如何做到这一点。

我想我会为 5 个不同的按钮和 5 个自定义视图创建 IBOutlets，并将它们连接到不同的方法，例如 openView1、openView2，每个方法都会关闭当前菜单并加载自定义视图？

谁能帮助我在代码方面如何实现这一目标？

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:04:01.287

所以本质上你想要一个标签视图？

您可以`NSTabView`在 Interface Builder 中创建一个。将选项卡的数量设置为 5。然后在其中布置您想要的视图的内容。

如果您对使用标准系统为标签提供的视觉外观感到满意，那么您就完成了。但是，如果您想要切换选项卡的自定义按钮，请继续阅读。

选择标签视图后，将其样式设置为 Tabless：

![在此处输入图像描述](../Images/07f82e694b4026a837b6aa4ebb79babe.png)

这会使选项卡按钮消失。这意味着视图之间的切换需要通过代码来完成。首先，您需要一个代表您的选项卡视图本身的 IBOutlet：将其连接起来。然后为 编写一个 IBAction 方法`openView1:`，它可能看起来像这样：

```
- (IBAction)openView1:(id)sender
{
    [tabView selectTabViewItemAtIndex:0];
} 
```

为自己制作一个按钮（位于窗口中选项卡视图之外的某个位置，否则您只能从一个选项卡访问它！）并将其连接到此操作。

这可能是使用这样的界面的最简单方法。根据您希望如何构建代码，有很多方法可以改进它。例如，听起来您来自 iOS 开发，您`UIViewController`将为每个选项卡制作一个。好吧，在 Mac 上存在`NSViewController`，因此您可以使用类似的模式：但如果您这样做，您需要编写一些代码来处理将视图控制器的视图放入选项卡视图中。它不会像在 iOS 上那样通过 Interface Builder 自动发生。如果您选择走这条路，[本教程应该可以帮助您入门。](http://devcry.heiho.net/2012/01/nstabview-tutorial.html)

# jar - 让 JNotify 进入 Maven/Archiva

> ID：10174327
> 
> 赞同：3
> 
> 时间：2012-04-16T12:45:12.820
> 
> 标签：jar, java-native-interface, maven-3, archiva, jnotify

我目前正在开发一个项目，该项目包括使用 JNotify 来监控何时创建、重命名/修改和删除目录/文件。该项目是在 Java 6 中构建的，而不是 Java 7。JNotify 使用 JNI 连接到本机操作系统以监视目录/文件。我的问题是我需要将 JNotify 放入我们的存储库中，但我希望构建它以便 java.library.path (DLL) 与 JNI JAR 一起打包。我将如何在 Maven 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:07:56.083

我能够使用以下 maven 插件找到所需的解决方案：[http ://code.google.com/p/mavennatives/](http://code.google.com/p/mavennatives/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:07:38.670

您可能必须手动将 jar 上传到您的档案实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:59:46.027

存储库格式是固定的，因此您需要在检索工件后执行重命名。这取决于您在检索后打算如何使用它。

这是一个常见的模式是这样的：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <configuration>
    <stripVersion>true</stripVersion>
  </configuration>
  <executions>
    <execution>
      <id>copy-jnotify</id>
      <configuration>
        <includeArtifactIds>JNotify</includeArtifactIds>
        <outputDirectory>${project.build.directory}/my-app</outputDirectory>
      </configuration>
      <goals>
        <goal>copy-dependencies</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

您可以将其与适当的工件列表一起使用，这些工​​件将全部复制到`target/my-app`目录中

# c++ - omp for with collapse 子句未编译

> ID：10174329
> 
> 赞同：6
> 
> 时间：2012-04-16T12:45:14.737
> 
> 标签：c++, multithreading, openmp

我正在使用`for`OpenMP 中的并行构造进行并行化。

在 OpenMP 规范中，我可以看到：

```
void sub(float *a)
{
int i, j, k;
#pragma omp for collapse(2) private(i, k, j)
for (k=kl; k<=ku; k+=ks)
    for (j=jl; j<=ju; j+=js)
        for (i=il; i<=iu; i+=is)
            bar(a,i,j,k);
} 
```

我编写了我觉得非常相似的代码，但它不能编译：

> 崩溃子句后的意外标记

```
#pragma omp for collapse(2)  
for(int i=0;i<N-m;i++)
    for(int k=0;k<m_ndim;k++)
        points_[i][k]=TRandom::randD(lower[k],upper[k]); 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T12:53:08.853

`collapse`是一个 OpenMP 3.0 编译指示。您收到的错误消息通常是由仅实现 OpenMP 2.x 的编译器引起的。

# c++ - 如何在 C++ (Mongo) 中将 BSONObj 插入另一个 BSONObj

> ID：10174335
> 
> 赞同：2
> 
> 时间：2012-04-16T12:45:57.327
> 
> 标签：c++, mongodb, bson

我需要这样的东西：

```
{
    "Field1" : "Value1",
    "Field2" : "Value2",
    "Fields3": [
              { "Field311" : Value311, "Field312" : Value312},
              { "Field321" : Value321, "Field322" : Value322},
              { "Field331" : Value323, "Field333" : [
                              ... some more fields here
              ]}
     ]
} 
```

我从 json 字符串中获取 Fields1-2 并将它们转换为 mongo::BSONObj。然后我像这样将 Field3 添加到根目录：

```
mongo::BSONArray arr;
root["Field3"].Obj=arr; 
```

之后我想循环填充 Field3，但我不明白如何正确地将 BSONObj 添加到数组中。[我在C# 驱动程序](http://api.mongodb.org/csharp/1.3/html/f0360c8e-1672-316c-d92e-d80cb7bf9de6.htm)中找到了“添加”方法，但 C++ 没有这样的东西。谷歌建议我使用 ArrayBuilder，但我不明白怎么做。请告诉我，我该怎么办？一些例子会非常有用。

另外，一个问题：为什么有 BSONObj 和 BSONElement，一些建设者等等......？在超级简单的 JsonCpp 之后，一切似乎都非常复杂（一切都通过简单地使用 [] 和 = 运算符和 append() 方法完成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:29:01.983

可以在这里找到使用 BSONArrayBuilder 的简单示例： [http ://www.mongodb.org/pages/viewpage.action?pageId=19562815](http://www.mongodb.org/pages/viewpage.action?pageId=19562815)

相应的文档可以在这里找到：http: [//api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_array_builder.html](http://api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_array_builder.html)

JsonCpp 是一个独立开发的库，因此它的工作方式与 MongoDB 的 BSON 实现方式之间存在许多差异——无论好坏。BSON 库在整个 MongoDB 中广泛使用，因此它的要求与 JsonCpp 要求完全不同。

希望这可以帮助！

# mysql - GROUP BY 用法不正确

> ID：10174338
> 
> 赞同：0
> 
> 时间：2012-04-16T12:46:11.420
> 
> 标签：mysql

为什么这被认为是不正确的 GROUP BY 用法？

```
SELECT Empno, Deptno,
SUM(Sal) "Total"
FROM Emp
GROUP BY Deptno; 
```

我的笔记中给出的结果是：

> ```
> Empno   Deptno Total
> ------- ------ --------
> ?       10     8750
> ?       20     10875
> ?       30     9400 
> ```

原因是：

**SELECT 列表中的所有列必须要么出现在 GROUP BY 中，要么被聚合！**

但我不太清楚这意味着什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:49:07.563

您正在`Empno`从结果中进行选择 - 这不是多行的聚合函数，也不是分组的一部分，因此它在查询中没有意义。您希望同一部门中不同员工的两行结果是什么？例如，考虑以下数据：

```
Empno    Deptno    Sal
    1         1    100
    2         2    200
    3         2    200 
```

结果应该是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:50:39.620

由于同时选择了 Empno 和 Deptno，因此您需要按两个字段进行分组：

```
SELECT Empno, Deptno, SUM(Sal) "Total"
FROM Emp
GROUP BY Empno, Deptno; 
```

或者如果没有使用 Empno，则只选择 Deptno：

```
SELECT Deptno, SUM(Sal) "Total"
FROM Emp
GROUP BY Deptno; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:50:36.000

试试这个-

```
SELECT group_concat(Empno), Deptno,
SUM(Sal) "Total"
FROM Emp
GROUP BY Deptno; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:53:57.063

错误消息非常清楚：错误是因为您在选择列表中有一个“裸”员工编号，但您没有按它分组（这是有道理的，假设员工编号是唯一的：它会使您`group by`无用）。

如果您正在查找按部门支付给所有员工的总工资，您需要做的就是删除员工编号：

```
SELECT Deptno, SUM(Sal) "Total"
FROM Emp
GROUP BY Deptno 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T12:57:14.187

我认为您正在寻找的是：

```
SELECT Empno, Deptno,
SUM(Sal) "Total"
FROM Emp
GROUP BY Empno, Deptno; 
```

您假设 Empno 对于每个 Deptno 都是相同的，因此不需要按此字段分组，但从语法上讲这是不正确的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T13:00:41.083

当您要求分组结果时，要返回的字段应该是 group by 子句的一部分，或者是聚合函数的一部分。

这是为什么？

想象一下您的表 Emp 中的这些数据：

```
Empno   Deptno
1       1
2       1
3       2
4       2 
```

当您执行您的选择时，将有两个组（Deptno 1 和 2）。在这些情况下，应该为 Empno 显示哪些数据？引擎无法判断。

因此，您的选择可以通过不同的方式修复：

```
SELECT Empno, Deptno,
SUM(Sal) "Total"
FROM Emp
GROUP BY Empno, Deptno; 
```

Empno 和 Deptno 的分组，或者可能：

```
SELECT Max(Empno), Deptno,
SUM(Sal) "Total"
FROM Emp
GROUP BY Deptno; 
```

按 Deptno 分组，并且只给出一个 Empno（该组的最大值）。

# javascript - 带有框架的浏览器中的按钮返回（历史转发不起作用）

> ID：10174339
> 
> 赞同：0
> 
> 时间：2012-04-16T12:46:12.683
> 
> 标签：javascript, jsp, browser

我有jsp应用程序。我想要，那个按钮后退不起作用。history.forward - 不适合，转换发生在帧中。在谷歌浏览器中，当我进入我的 jsp 应用程序时，在框架中创建历史转换，并且按钮后退变为活动状态。我需要禁用按钮返回或按下按钮返回时 - 没有发生任何事情。打开没有工具栏的新窗口 - 不合适。history.forward - 如果是简单的互联网页面，那就太好了。在带有框架的 jsp 项目中，hi 的行为无法预测。我需要，而不是在谷歌浏览器和 IE 中运行（可能可以单独写给每个他自己的）

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:51:45.953

您不能禁用浏览器的后退按钮。你能做的最好的事情就是编写你的应用程序，这样使用 back burron 就不会破坏任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:30:13.200

试试这个代码

```
<body onload="onLoad();" onpageshow="if (event.persisted) onLoad();"> 
```

因为 Firefox 1.5 为单个浏览器会话使用整个网页的内存缓存，包括它们的 JavaScript 状态。在访问的页面之间来回移动不需要加载页面，并且保留 JavaScript 状态。

[单击此处供您参考](https://developer.mozilla.org/en/Using_Firefox_1.5_caching)

# android - 如何设置传入消息的消息 ID 和时间戳

> ID：10174340
> 
> 赞同：0
> 
> 时间：2012-04-16T12:46:15.767
> 
> 标签：android, sms

我正在开发一个接收短信的应用程序，我想知道如何为传入消息设置消息 ID 和时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:51:44.963

您确定要“设置”消息 ID 和时间戳，您的意思是要在电话收到它们时阅读它们吗？我怀疑您是否能够手动设置这些值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:59:51.613

我猜你正在使用[SmsMessage](http://developer.android.com/reference/android/telephony/SmsMessage.html)对象。该对象不允许您设置任何 ID 或时间戳，但您可以使用[getTimeStampMillis()](http://developer.android.com/reference/android/telephony/SmsMessage.html#getTimestampMillis%28%29)检索时间戳，并且此类中似乎没有任何 ID。如果您希望能够拥有和操作这些值，您可能需要编写自己的 Sms 类。

# modelica - 成员没有按预期更换，为什么？

> ID：10174345
> 
> 赞同：0
> 
> 时间：2012-04-16T12:46:34.020
> 
> 标签：modelica

目标：所有派生类都应从其基类继承一些默认方程。当默认方程对派生类无效时，它应该重新声明它。

这是一个有点愚蠢的简约示例。

```
package Pkg

  class Equations
    Real x;
  end Equations;

  class DefaultEquations
    extends Equations;
    equation
      x = 0.0;
  end DefaultEquations;

  class Base
    replaceable DefaultEquations equations extends Equations;
  end Base;

end Pkg;

model DuplicateEquations

    import Pkg.*;

    class CustomizedClass
      extends Base;
      redeclare Equations equations;
      equation
        equations.x = 3;
    end CustomizedClass;

    CustomizedClass customized;

end DuplicateEquations; 
```

出于某种神秘的原因，默认方程没有被覆盖：

```
omc Test.mo Package.mo
class DuplicateEquations
  Real customized.equations.x;
equation
  customized.equations.x = 0.0;
  customized.equations.x = 3.0;
end DuplicateEquations; 
```

**为什么会这样？为什么两者都** `x=0` **生成** `x=3` **？**

如果我注释掉`package`声明，我只会得到预期的`x=3`等式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:25:37.680

正如 Adrian Pop 所指出[的，必须重新声明 type ，而不是 component 。](http://www.openmodelica.org/index.php/forum/topic?id=594)

# ios - 在 Mobile Safari 中清除 SSL 异常

> ID：10174347
> 
> 赞同：3
> 
> 时间：2012-04-16T12:46:35.907
> 
> 标签：ios, mobile-safari, ssl-certificate

一些 iPhone 用户在使用移动 Safari 访问我的网站时遇到 SSL 证书警告。在他们第一次解除警告后，警告不再发生。如何清除这些 SSL 解除以重新触发警告以进行测试？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-12T20:46:37.417

好几年过去了，但网络上仍然没有一个好的答案。我确定它与 OP 无关，但可能与其他人有关。

从 13.7 开始，这是我设法做到这一点的方法：

0.  在 Safari 中关闭网站的任何实例并关闭 Safari [可能不是必需的，但只是为了安全起见]
1.  重置网络设置 [设置 > 常规 > 重置 > 重置网络设置]
2.  如果您访问该站点，它将间歇性地显示/不显示警告[如果您在新选项卡中键入网站，则不显示，刷新时显示]
3.  转到网站数据 [常规 > Safari > 高级 > 网站数据]
4.  等待列表加载
5.  搜索网站并在有问题的网站上向左滚动

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T12:59:39.390

不太确定这是否可以回答您的问题，但我隐约记得 SSL 证书和普通 Safari 也存在类似问题。您必须做的是，在将证书导入您的密钥库时，省略（省略）该`-trustcacerts`标志。也许这有帮助。

# java - 服务和电信要求

> ID：10174359
> 
> 赞同：0
> 
> 时间：2012-04-16T12:47:15.840
> 
> 标签：java, web-services, testing, rest, telecommunication

我有一个关于应用程序测试与外部接口（REST - Representational State Transfer）相结合的问题。

好吧，假设我想开发一项使用 Telco 2.0（电信接口）平台的服务，例如。位置 API 和 SMS API。

现在请告知我哪些参数/属性应该具有这项完整的服务，哪些参数/属性对电信运营商来说是有价值的/可取的（考虑电信的特殊性）？

我想，我应该检查该服务（尽管有些人认为它没有达到目标，但它必须与运营商和提供 SMS/Location API 接口的 Telco 2.0 平台建立更大的联系），例如。按服务、性能、可扩展性（让我们假设该服务可以访问几百万移动用户）进行“交换”和查询处理，也许这项服务的安全性？

我应该进行什么测试：

*   Telco 2.0 平台提供商的理论性能应该是多少（理论上，因为无法执行 Telco 2.0 平台（SMS/Location API）的压力测试）才能处理 REST（Representational State Transfer）请求？
*   描述测试功能 - 延迟服务、在 SMS/Location API 上生成的流量与使用该应用程序的用户数量的函数。
*   其他？

我会寻求您的帮助；）如果有与此案例相关的文献/参考书目，请告诉我电信行业申请的方法/测试方案；）

附加问题 - 使用参数 TUPS 和 CAPS 测试服务意味着什么？（不幸的是，我找不到任何关于此的信息）

**编辑**

我不是要测试传输层（SS7），而是如何开发或使用现有的服务层测试服务的概念。显然，我需要考虑电信网络的特殊性，我不确定是否可以使用 IT 部门的常用测试技术。

谁能建议在这个主题中做什么？

卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:17:53.253

电话用户部分 ( **TUP** ) 和骆驼应用部分 ( **CAP** ) 是电信世界中使用的协议，两者都存在于**SS7 堆栈**中。

请参考 Telco 2.0 的手册了解该平台的性能，我确信已经在此进行了基准测试。

# asp.net - 使用 ASP.Net Web 应用程序在服务器端更新 SVN

> ID：10174362
> 
> 赞同：0
> 
> 时间：2012-04-16T12:47:20.000
> 
> 标签：asp.net, svn, tortoisesvn

我创建了一个批处理文件来通过 ASP.Net Web 应用程序运行 SVN 更新。它在我的电脑上运行良好，它更新了所有文件夹。但是当我通过页面部署它并在服务器端运行相同的批处理时，它没有被更新。

需要注意的是，我可以在服务器端手动执行相同的批处理。

这是我的批处理文件内容..

```
/----------------------------

@echo off

set SOURCE=my source path to update
set SVN=C:\Program Files\TortoiseSVN\bin\

"%SVN%\svn.exe" cleanup %SOURCE%

"%SVN%\TortoiseProc.exe" /command:update /path:"%SOURCE%" /closeonend:1

set SOURCE=
set SVN=

/---------------------------- 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:56:58.447

检查运行 IIS 进程 (W3P.exe) 的用户是否具有与手动运行时相同的权限。

# facebook - 来自 facebook 的访问令牌没有被检索以进行注册？access_token（试图获取非对象的属性）

> ID：10174363
> 
> 赞同：0
> 
> 时间：2012-04-16T12:47:23.520
> 
> 标签：facebook, codeigniter, token

```
 private $_api_key;
    private $_api_secret;
    private $_token_url     = 'oauth/access_token';
    private $_user_url      = 'me';
    private $_data          = array();

    function __construct()
    {
        $this->_obj =$CI =& get_instance();

        $fb_api_id     = $CI->db->get_where('settings', array('code' => 'SITE_FB_API_ID'))->row()->string_value;
        $fb_api_secret = $CI->db->get_where('settings', array('code' => 'SITE_FB_API_SECRET'))->row()->string_value;

        $this->_api_key     = $fb_api_id;
        $this->_api_secret  = $fb_api_secret;

        $this->_token_url   = $this->_obj->config->item('facebook_api_url').$this->_token_url;
        $this->_user_url    = $this->_obj->config->item('facebook_api_url').$this->_user_url;

        $this->_set('scope', $this->_obj->config->item('facebook_default_scope'));

        $this->connection = new facebookConnection();

        if ( !$this->logged_in() )
        {
             // Initializes the callback to this page URL.
            $this->set_callback();
        }

    }

    public function logged_in()
    {
        return ( $this->get() === NULL ) ? FALSE : TRUE;
    }

    public function logout()
    {
        $this->_unset('token');
        $this->_unset('user');
    }

    public function login_url($scope = NULL)
    {
        $url = "http://www.facebook.com/dialog/oauth?client_id=".$this->_api_key.'&redirect_uri='.urlencode($this->_get('callback'));

        if ( empty($scope) )
        {
            $scope = $this->_get('scope');
        }
        else
        {
            $this->_set('scope', $scope);
        }

        if ( !empty($scope) )
        {
            $url .= '&scope='.$scope;
        }

        return $url;
    }

    public function login($scope = NULL)
    {
        $this->logout();

        if ( !$this->_get('callback') ) $this->_set('callback', current_url());

        $url = $this->login_url($scope);

        return redirect($url);
    }

    public function get()
    {
        $token = $this->_find_token();
        if ( empty($token) ) return NULL;

        // $user = $this->_get('user');
        // if ( !empty($user) ) return $user;

        try 
        {
            $user = $this->connection->get($this->_user_url.'?'.$this->_token_string());
        }
        catch ( facebookException $e )
        {
            $this->logout();
            return NULL;
        }

        // $this->_set('user', $user);
        return $user;
    }

    private function _find_token()
    {
        $token = $this->_get('token');

        if ( !empty($token) )
        {
            if ( !empty($token->expires) && intval($token->expires) >= time() )
            {
                // Problem, token is expired!
                return $this->logout();
            }

            $this->_set('token', $token);
            return $this->_token_string();
        }

        if ( !isset($_GET['code']) )
        {
            return $this->logout();
        }

        if ( !$this->_get('callback') ) $this->_set('callback', current_url());

        $token_url = $this->_token_url.'?client_id='.$this->_api_key."&client_secret=".$this->_api_secret."&code=".$_GET['code'].'&redirect_uri='.urlencode($this->_get('callback'));
        try 
        {
            $token = $this->connection->get($token_url);
        }
        catch ( facebookException $e )
        {
            $this->logout();
            redirect($this->_strip_query());
            return NULL;
        }

        $this->_unset('callback');
        if ( $token->access_token )
        {
            if ( !empty($token->expires) )
            {
                $token->expires = strval(time() + intval($token->expires));
            }

            $this->_set('token', $token);
            redirect($this->_strip_query());
        }

        return $this->_token_string();
    }

    private function _get($key)
    {
        $key = '_facebook_'.$key;
        return $this->_obj->session->userdata($key);
    }

    private function _set($key, $data)
    {
        $key = '_facebook_'.$key;
        $this->_obj->session->set_userdata($key, $data);
    }

    private function _unset($key)
    {
        $key = '_facebook_'.$key;
        $this->_obj->session->unset_userdata($key);
    }

    public function set_callback($url = NULL)
    {
        $this->_set('callback', $this->_strip_query($url));
    }

    private function _token_string()
    {
        return 'access_token='.$this->_get('token')->access_token;
    }

    public function append_token($url)
    {
        if ( $this->_get('token') ) $url .= '?'.$this->_token_string();

        return $url;
    }

    private function _strip_query($url = NULL)
    {
        if ( $url === NULL )
        {
            $url = ( empty($_SERVER['HTTPS']) ) ? 'http' : 'https';
            $url .= '://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
        }

        $parts = explode('?', $url);
        return $parts[0];
    } 
```

请告诉我当用户尝试在站点中使用 fb 帐户登录时，从 facebook 检索到的所有内容作为令牌。

我在此代码中收到以下错误：

消息：试图获取非对象的属性

文件名：库/Facebook_Lib.php

行号：454

遇到 PHP 错误

严重性：通知

消息：试图获取非对象的属性

文件名：库/Facebook_Lib.php

行号：493

严重性：通知

消息：试图获取非对象的属性

文件名：库/Facebook_Lib.ph

行号：493

有关 access_token 的所有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T22:22:19.823

由于 facebook 应用程序未上线，因此未创建会话，这是一个数据库错误。

# html - 强制空格 betweek 两个链接？

> ID：10174365
> 
> 赞同：1
> 
> 时间：2012-04-16T12:47:31.123
> 
> 标签：html, css

我注意到如果我有两个链接：

```
<a href="#">Text</a>
<a href="#">Text</a> 
```

[它们](http://jsfiddle.net/eAteH/)没有在浏览器中加入，看起来它们之间有一个空格。

但是，如果我将它们[写](http://jsfiddle.net/eAteH/1/)在一行中：

```
<a href="#">Text</a><a href="#">Text</a> 
```

没有空间。有没有办法删除那个空间？或者我需要在一行中写下所有链接（或者更好的是，所有内联元素）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:52:59.393

您可以像这样使用**字间距**编写：

```
a
{
    display:inline;
    background-color:red;
    word-spacing:1em
}
body{word-spacing:-1em} 
```

检查这个[http://jsfiddle.net/eAteH/2/](http://jsfiddle.net/eAteH/2/)

还有其他方法，比如**font-size:0**[在 `display:inline-block`-elements](https://stackoverflow.com/questions/9664321/strange-margin-on-displayinline-block-elements)检查这个奇怪的边距

# java - Android 2.2 上 Apache MINA 中的 NullPointerException

> ID：10174377
> 
> 赞同：1
> 
> 时间：2012-04-16T12:48:09.997
> 
> 标签：java, serialization, android-2.2-froyo, apache-mina

我正在使用 Apache MINA 2.0.4 为 android 开发应用程序。它在我测试过的所有版本上都运行良好，但在 HTC Desire 上是 2.2.2。

客户端设法连接到服务器，但是一旦服务器发送消息，我就会收到 NullPointerException：

```
04-16 13:45:25.992: E/EXCEPTION(18456): NETWORK
04-16 13:45:25.992: E/EXCEPTION(18456): org.apache.mina.filter.codec.ProtocolDecoderException: java.lang.NullPointerException (Hexdump: 00 00 00 32 AC ED 00 05 73 72 01 00 25 63 6F 6D 2E 62 6F 6C 6C 73 2E 73 68 61 72 65 64 2E 77 77 77 2E 48 69 67 68 4C 65 76 65 6C 4D 65 73 73 61 67 65 78 70 28 70)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.filter.codec.ProtocolCodecFilter.messageReceived(ProtocolCodecFilter.java:251)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:46)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:796)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.IoFilterAdapter.messageReceived(IoFilterAdapter.java:119)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.filterchain.DefaultIoFilterChain.fireMessageReceived(DefaultIoFilterChain.java:426)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.polling.AbstractPollingIoProcessor.read(AbstractPollingIoProcessor.java:715)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:668)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:657)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.polling.AbstractPollingIoProcessor.access$600(AbstractPollingIoProcessor.java:68)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.run(AbstractPollingIoProcessor.java:1141)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.lang.Thread.run(Thread.java:1102)
04-16 13:45:25.992: E/EXCEPTION(18456): Caused by: java.lang.NullPointerException
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectStreamField.resolve(ObjectStreamField.java:351)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1863)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:826)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2066)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:929)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2285)
04-16 13:45:25.992: E/EXCEPTION(18456):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2240)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.core.buffer.AbstractIoBuffer.getObject(AbstractIoBuffer.java:2215)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.filter.codec.serialization.ObjectSerializationDecoder.doDecode(ObjectSerializationDecoder.java:92)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.filter.codec.CumulativeProtocolDecoder.decode(CumulativeProtocolDecoder.java:178)
04-16 13:45:25.992: E/EXCEPTION(18456):     at org.apache.mina.filter.codec.ProtocolCodecFilter.messageReceived(ProtocolCodecFilter.java:241)
04-16 13:45:25.992: E/EXCEPTION(18456):     ... 15 more 
```

我正在使用 ObjectSerializationCodecFactory 并且无法弄清楚出了什么问题。我曾尝试在 Android 2.2 上使用“常规”Java 序列化并且效果很好。

这是连接的代码：

```
 NioSocketConnector tConnector = new NioSocketConnector();

    tConnector.setConnectTimeoutMillis(CONNECT_TIMEOUT);
    tConnector.getFilterChain().addLast("codec", new ProtocolCodecFilter(new ObjectSerializationCodecFactory()));
    tConnector.setHandler(new ClientHandler());

    try{
        ConnectFuture future = tConnector.connect(new InetSocketAddress(HOSTNAME, PORT));
        future.awaitUninterruptibly();
        mSession = future.getSession();
        Globals.hideDialog();
    }catch (RuntimeIoException e){
        Globals.hideDialog();
        Globals.showConnectionErrorDialog("Failed to connect to server");
    }

    // wait until the summation is done
    if(mSession != null)
        mSession.getCloseFuture().awaitUninterruptibly();
    tConnector.dispose(); 
```

在调用 messageReceived 之前，异常在处理程序中被捕获。

感谢您提供有关此异常的任何信息！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:52:12.957

我认为 ClientHandler() 是接口。您需要尝试 BasicClientHandler()。

# c# - 在 LAN 上以最大速度传输文件

> ID：10174379
> 
> 赞同：0
> 
> 时间：2012-04-16T12:48:14.433
> 
> 标签：c#, sockets, file-transfer

**几乎所有的文件传输软件，如 [NetSupport, Radmin, PcAnyWhere..] 以及我在我的应用程序中使用的不同代码，当您发送大量小于 1kb**的小文件时，它会减慢传输速度，例如游戏文件**夹**很多文件。

例如在 LAN（以太网 CAT5 电缆）上，我发送一个文件，比如说一个视频，传输速率在 2MB 到 9MB 之间，
但是当我发送一个包含大量文件的游戏文件夹时，传输速率约为 300kb- 800kb

我猜这是因为发送文件的方式：

*   发送文件信息 [file_path,file_Size]。*   发送文件字节[循环到文件末尾]。*   结束传输 [确保已完全接收]。

    但是当您在网络上的共享文件夹上使用常规窗口**[复制粘贴]**时，发送文件夹的传输速度总是像发送单个文件一样快。
    所以我尝试使用 [WCF service c# 4.0] 开发一个文件传输应用程序，该应用程序将使用 LAN 上可用的最大速度，我正在考虑这种方式：

    ```
    Get all files from the folder.
    if(FileSize<1 MB)
    {
        Create additional thread to send;
        SendFile(FilePath);
    }
    else
    {
        Wait for the large file to be sent. // fileSize>1MB
    }

    void SendFile(string path)  // a regular single file send.
    {
        SendFileInfo;
        Open Socket and wait for server application to connect;
        SendFileBytes;
        Dispose;
    } 
    ```

    但我对使用多个套接字进行文件传输感到困惑，因为这将使用更多端口和更多时间（侦听和接受延迟）。

    那么这样做是个好主意吗？
    需要解释是否可以做，如何做，比 tcp 更好的协议，这意味着。
    提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:21:40.933

应该注意的是，您永远不会达到 100% 的 LAN 速度使用率——我希望你不希望这样——那里有太多因素。

作为对您的评论的回应，您无法达到操作系统用于传输文件的相同级别，因为您距离裸机比 Windows 更远。我相信 Windows 中的文件复制仅比驱动程序本身高一两层（甚至可能*在*文件系统驱动程序中）——在 WCF 服务中，你离得更远了！

您要做的最简单的事情是将多个文件打包成档案并以这种方式传输，然后在接收端将完整的包解压缩到目标文件夹中。当然，其中一些文件可能已经被压缩，因此不会受益 - 但总的来说，您应该会看到很大的改进。对于可以保留目录结构的坚如磐石的压缩，我会考虑使用[SharpZipLib](http://nuget.org/packages/SharpZipLib)

智能使用压缩的系统（可能是中等级别、低 CPU 使用率，但可以很好地处理“可压缩”文件）可能会匹配或*可能*优于操作系统复制。Windows 不使用这种方法，因为它对容错毫无希望。在操作系统中，文件传输中途停止的传输仍会保留任何成功的文件。如果传输本身被压缩和中断，一切都会丢失，必须重新开始。

除此之外，您还可以考虑以下几点：

在尝试任何增强功能之前，首先使用默认压缩使其工作。在某些情况下（取决于大小/文件数量），您可能可以简单地压缩整个文件夹，然后一次性传输。然而，超过一定尺寸，这可能需要很长时间，所以你需要创建一系列较小的拉链。

在接收压缩文件时将其写入磁盘上的临时位置，不要在内存中缓冲整个文件。将文件解压缩到目标文件夹后，请删除该文件。

考虑添加将某些文件类型标记为能够“裸”发送的功能 - 即未压缩。这样您就可以从压缩过程中排除 .zips、avis 等文件。也就是说，一个包含一百万个 1kb zip 文件的文件夹显然会从打包到一个存档中受益 - 所以也许让自己能够设置一个最小大小，超过该文件仍将被打包到一个压缩文件夹（或者可能是一个文件文件夹本身的磁盘比率的计数/大小 - 包括子文件夹）。

除了这个建议之外，您还需要尝试获得最佳结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:57:26.790

也许，一个简单的解决方案是将所有文件收集到一个大流中（比如压缩它们，但只需附加以使其快速）并发送这个流。这将提供更快的速度，但会占用两个设备上的一些 cpu 以及如何分离流中的所有文件的好主意。

但是据我所知，使用更多端口只会是一个缺点，因为会有更多不同的流发生冲突，因此速度会下降。

# javascript - 显示网页时使用了两种或多种 CSS 样式

> ID：10174381
> 
> 赞同：0
> 
> 时间：2012-04-16T12:48:38.910
> 
> 标签：javascript, html, css

我正在使用 JavaScript 为不同类型的可访问选项选择不同的 CSS 样式，例如。白色文本上的黑色，更大的文本。我遇到的问题是，当您更改 CSS 工作表时，它使用先前选择的工作表中的元素。您可以通过查看[此处](http://jamesblanksby.webspace.virginmedia.com/)的网站更清楚地了解我的意思（在 IE 中无法正确显示）。如果您单击不同的 [Aa] 选项，您可以更改样式。我正在使用此代码（JavaScript）执行此操作：

```
if ($.cookie("css")) {
    $("link").attr("href", $.cookie("css"));
}
$(document).ready(function() {
    $("#accessibility a").click(function() {
        $("link").attr("href", $(this).attr('rel'));
        $.cookie("css", $(this).attr('rel'), {
            expires: 365,
            path: '/'
        });
        return false;
    });
});​ 
```

和 HTML：

```
<a href="#" rel="index.css"><img src="images/bonw.png"></a>
<a href="#" rel="index_wonb.css"><img src="images/wonb.png"></a>
<a href="#" rel="index_+.css"><img src="images/+.png"></a> 
```

我不知道它为什么这样做，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:08:31.273

查看 jQuery toggleClass() [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/) 它可以减少代码数量并使其更清晰。

```
 $body.toggleClass('red');
  $body.toggleClass('blue'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:55:19.887

您可以在一个页面上使用多个 css 工作表，您添加一个 css 页面而不是选择一个新页面。尝试使用新的 CSS 重新加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:29:47.277

你可以做“body ids”

您将一个类或一个 id 附加到正文以告诉页面您想要什么类型的样式。然后在你的css中，为该表中的每个选择器添加body.[class]或body#[id]，以对应于它的样式。

[在此示例](http://jsfiddle.net/n8uDX/)中，我只需通过更改正文中的类即可在两种样式之间切换文本。

### HTML

```
<!--initial style red-->
<body class="red">
    <div>click anywhere to toggle styles</div>​
</body> 
```

### CSS

```
/*on one sheet, you can define the page's CSS when the body is red*/
body.red div{
    color:red;
}

/*on another sheet, different when the body is blue*/
body.blue div{
    color:blue;
}​ 
```

### JS

```
$(function() {

    var $body = $('body');

    $body.on('click', function() {

        //we toggle the body class, effectively toggling between sheets
        if ($body.hasClass('red')) {
            $body.removeClass('red');
            $body.addClass('blue');
        } else {
            $body.addClass('red');
            $body.removeClass('blue');
        }

    });

});​ 
```

# ruby - Ruby Rails - 保存与更新 where 方法

> ID：10174387
> 
> 赞同：1
> 
> 时间：2012-04-16T12:48:57.740
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试创建一个库存系统，我的表默认将索引“id”作为主键。我的库存编号应该是唯一值以在表中创建新条目，如果库存已经存在，那么它将更新属性。如何做到这一点？通过将库存编号作为主键？或者有什么方法可以检查和更新已经存在的库存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:55:14.960

您可以拥有唯一字段`number`（例如）。比你可以使用`find_or_create_by_<field_name>`脏方法。

```
@ticket = Ticket.find_or_create_by_number(503) 
```

**更新：**

```
@ticket.attrib = 'new attribute value'
@ticket.save 
```

或者

```
@ticket.update_attribute :attrib, 'new attribute value' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:24:02.730

这有效：[rails 中的 create_or_update 方法](https://stackoverflow.com/questions/3024010/create-or-update-method-in-rails)

```
my_class = ClassName.find_or_initialize_by_name(name)

my_class.update_attributes({:street_address => self.street_address,.....}) 
```

# algorithm - 寻找算法：通过“相似性”进行聚类

> ID：10174388
> 
> 赞同：1
> 
> 时间：2012-04-16T12:48:58.547
> 
> 标签：algorithm, cluster-analysis

我有一组“向量”，我需要根据它们的“相似性”对它们进行排序。

像这样：向量 {1,0,0} {1,1,0} {0,1,0} {1,0,1} 非常相似，最终应该彼此接近，但是向量 {1 , 0, 0} {8, 0, 0} {0, 5, 0} - 不是。

A 和 B 之间的度量是 max(abs(A[i]-B[i]))，但是什么样的算法可以根据相对比较对事物进行排序？

upd：输入：N 个向量的
数组 输出：N 个向量的数组，其中最近的索引向量（例如 arr[i] arr[i+1]）是“相似”= arr[i] 和 arr[i+ 之间的度量1] 对于任何 i, j 都尽可能低。
公制 - 向量分量的最大差异

upd2：现在看来，@jogojapan 是对的-我需要对向量进行聚类，然后以某种线性顺序逐组打印它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:53:20.663

[这是由最大范数（又名 sup norm 或 l-infinity norm）](http://en.wikipedia.org/wiki/Lp_space)引起的距离。如果通过排序意味着按顺序排序，则距离不足以创建线性排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:56:33.250

排序本质上是一个一维问题。您在此处描述的内容听起来更像是加权图，但尚不清楚您的目标是什么。如果您尝试识别与已知向量“最接近”的向量，您可能还会发现信息论中的一些概念（例如[汉明距离）很有用。](http://en.wikipedia.org/wiki/Hamming_distance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:31:43.777

Well, the obvious approach would be the (IMHO badly named) "hierarchical clustering", which always merges those clusters with the smallest distance. You can plug in your metric there. Most implementations are in O(n^3) and thus not useful for large datasets. Plus, you get a huge dendrogram that is hard to read.

You might want to give OPTICS a try. Look it up on Wikipedia. It might satisfy your needs quite well, since it in fact *sorts* the points. It will walk from one cluster to another, and can in fact produce a hierarchical (as in "nested") clustering. A good implementation should run in O(n^2) without index structures and in O(n log n) with index acceleration.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T12:54:13.363

任何排序算法都可以给你想要的结果。

问题是你将如何比较你的向量。您只想按数量级比较它们吗？或者是其他东西？

# vps - 预装软件和 GUI 的远程服务器

> ID：10174393
> 
> 赞同：1
> 
> 时间：2012-04-16T12:49:13.030
> 
> 标签：vps

我正在教授 Django 和 MySQL 课程，问题是：是否有任何服务允许使用预安装的软件连接到远程服务器。

这是我想要的功能：
1/ 拥有带有 Linux/Windows 和 GUI 的远程服务器
2/ 安装我想要的软件（例如，Django、python、mysql）或预先安装它
3/ 启用多个登录名和用户：我没有我不希望我的学生将软件安装在他们的桌面上，而是连接到服务器并在那里练习。
每个学生都应该有自己的课程和工作空间。
我猜它有点像 VPS（虚拟专用服务器）。但是VPS是相当昂贵的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:39:37.017

buy a server with WHM + cPanel + Softaculous. If a VPS is expensive, try to found a WHM reseller package with Softaculous. With WHM you can create hosting accounts for your students each one with a cPanel access. With Softaculous your students can install software on the server in 1 click. Regards.

# cakephp - Cake php 2.1 表单错误

> ID：10174394
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:49:17.470
> 
> 标签：cakephp, views

当我在控制器中创建添加函数并查看 add.ctp 时，我使用的是 cakephp 2.1

我收到此错误：

**解析错误：语法错误，意外的 T_OBJECT_OPERATOR，期待 ',' 或 ';' 在第 5 行的 C:\wamp\www\rohitchoudhary\caketoodoo\app\View\tasks\add.ctp**

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:00:52.550

这不是一个蛋糕，而是一个 php 问题。甚至没有。

只要确保你使用了一个不错的 PHP IDE，它会产生解析错误。然后你会发现你可能在某处放置了一个无效的字符。无论哪种方式，您都应该能够自己调试这样的解析错误。

此类错误消息的描述性总是足以让您自己完成。

# sql - 如何比较具有“（”字符的varchar字段

> ID：10174395
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:49:18.747
> 
> 标签：sql, sql-server

如果 SQL Server 表中的字段值类似于**A(B)**并且如果我要编写查询

`SELECT * FROM MyTable WHERE MyField = 'A(B)'`

它没有返回任何结果。如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:51:50.247

您的查询应该可以正常工作，如果您想指定不同的转义参数，您可以使用[`ESCAPE`](http://msdn.microsoft.com/en-us/library/ms179859.aspx).

```
WHERE column LIKE '%A#(B#)%' ESCAPE '#' 
```

此外，如果您想匹配任何包含“A(B)”的内容，请不要忘记用百分比符号将其包围。

# android - 如何将 Drawable 资源写入文件？

> ID：10174399
> 
> 赞同：28
> 
> 时间：2012-04-16T12:49:37.887
> 
> 标签：android, export, drawable

我需要将一些`Drawable`资源导出到文件中。

例如，我有一个函数返回给我一个`Drawable`对象。我想把它写到`/sdcard/drawable/newfile.png`. 我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-12-01T17:35:55.923

虽然这里的最佳答案有一个很好的方法。它只是链接。以下是如何执行这些步骤：

## 将 Drawable 转换为位图

您可以通过至少两种不同的方式做到这一点，具体取决于您从哪里获得`Drawable`。

1.  **Drawable 在`res/drawable`文件夹上。**

假设您想使用`Drawable`可绘制文件夹上的 a 。您可以使用该[`BitmapFactory#decodeResource`](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource(android.content.res.Resources,%20int))方法。下面的例子。

```
Bitmap bm = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.your_drawable); 
```

2.  **你有一个[`PictureDrawable`](http://developer.android.com/reference/android/graphics/drawable/PictureDrawable.html)对象。**

如果您[`PictureDrawable`](http://developer.android.com/reference/android/graphics/drawable/PictureDrawable.html)“在运行时”从其他地方获取 a，您可以使用该[`Bitmap#createBitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap(android.util.DisplayMetrics,%20int%5B%5D,%20int,%20int,%20android.graphics.Bitmap.Config))方法来创建您的`Bitmap`. 就像下面的例子。

```
public Bitmap drawableToBitmap(PictureDrawable pd) {
    Bitmap bm = Bitmap.createBitmap(pd.getIntrinsicWidth(), pd.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bm);
    canvas.drawPicture(pd.getPicture());
    return bm;
} 
```

## 将位图保存到磁盘

拥有`Bitmap`对象后，您可以将其保存到永久存储中。您只需选择文件格式（JPEG、PNG 或 WEBP）。

```
/**
 * @param dir you can get from many places like Environment.getExternalStorageDirectory() or mContext.getFilesDir() depending on where you want to save the image.
 * @param fileName The file name.
 * @param bm The Bitmap you want to save.
 * @param format Bitmap.CompressFormat can be PNG,JPEG or WEBP.
 * @param quality quality goes from 1 to 100\. (Percentage).
 * @return true if the Bitmap was saved successfully, false otherwise.
 */
boolean saveBitmapToFile(File dir, String fileName, Bitmap bm, 
    Bitmap.CompressFormat format, int quality) {

    File imageFile = new File(dir,fileName);

    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(imageFile);

        bm.compress(format,quality,fos);

        fos.close();

        return true;
    }
    catch (IOException e) {
        Log.e("app",e.getMessage());
        if (fos != null) {
            try {
                fos.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    }
    return false;
} 
```

要获取目标目录，请尝试以下操作：

```
File dir = new File(Environment.getExternalStorageDirectory() + File.separator + "drawable");

boolean doSave = true;
if (!dir.exists()) {
    doSave = dir.mkdirs();
}

if (doSave) {
    saveBitmapToFile(dir,"theNameYouWant.png",bm,Bitmap.CompressFormat.PNG,100);
}
else {
    Log.e("app","Couldn't create target directory.");
} 
```

**Obs：**如果您正在处理大图像或许多图像，请记住在后台线程上执行此类工作，因为它可能需要一些时间才能完成并且可能会阻塞您的 UI，使您的应用程序无响应。

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2012-04-16T12:56:28.913

获取存储在sdcard中的图像..

```
File imgFile = new  File(“/sdcard/Images/test_image.jpg”);
if(imgFile.exists()){

    Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

    ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
    myImage.setImageBitmap(myBitmap);

} 
```

## 更新：

```
String path = Environment.getExternalStorageDirectory()+ "/Images/test.jpg"; 
File imgFile = new File(path); 
```

# php - 什么是英格拉姆微 API 服务集成，有英格拉姆微 API 服务的文档吗？

> ID：10174401
> 
> 赞同：2
> 
> 时间：2012-04-16T12:49:47.860
> 
> 标签：php, mysql

我需要为 Ingram Micro api 服务生成一个 interspire 模块，但我不知道 Ingram Micro 提供哪些服务。

如何管理从 Ingram 服务到最终用户站点的产品关系，以及如何生成和管理订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:24:06.893

Ingram 仅向 IT 经销商销售，从不向最终客户销售，但在某些情况下，代表经销商存储和运送给最终客户（与 Shipwire 相同的服务 + 它还可以提供额外的库存）。

一般来说，互联网模型是：

1.  Ingram 向经销商提供包含其所有产品范围的文件

2.  经销商在他的网站中加载此产品列表（和库存）

3.  最终用户在经销商网站（interspire 的网站，如果我理解您的想法）上下订单，并且合法地从经销商处购买。

4.  经销商将产品订购给 Ingram，Ingram 将代表经销商将产品直接运送给最终用户（装箱单上的名称是经销商的名称，而不是 Ingram Micro 的名称）

在某些变体中，经销商在英格拉姆的仓库中也有库存。

所有这些步骤都可以主要通过 Web 服务实现自动化。对于欧洲，您应该联系欧洲的“电子商务团队”。他们的总部设在英国（城市是米尔顿凯恩斯，但我没有电子邮件，抱歉）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T23:41:01.037

Ingram micro 主要通过平面文件的 Web 服务公开了很多服务。： - 价格 - 库存水平 - 订单状态 - 订单创建 - 发票...您能否更具体地说明您尝试实现的目标以及在哪个国家/地区（Ingram Micro在 35 个国家/地区开展业务） ?

# c# - 如何使用 C# 比较不同表示形式的人的名称

> ID：10174404
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:49:57.163
> 
> 标签：c#

我有一个场景，需要验证两个同名表示的比较。例如，假设人**1**的名称表示为

> Person1Name= Venkata Phani Kumar Parimi

假设同一个人的名字**2**表示为

> Person2Name= Kumar Parimi Venkata Phani

还有一种情况是

> 约翰·F·肯尼迪 = 约翰·菲茨杰拉德·肯尼迪

与以下情况相比，上述情况具有更高的优先级。

> 约翰·肯尼迪 = 约翰·肯尼迪

即使在两个不同的上下文中，上述两个人也指同一个人。

请让我知道是否有办法使用 C# 来比较和确认姓名属于同一个人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:01:13.837

这是一个非常具体的问题，所以我认为你需要这样解决它。首先，究竟是什么*让*两个名字相等？它是否包含相同的名称，以任何顺序？那么这就是你需要检测的。可以有缩写吗？可以有“夫人”之类的称谓吗？如果有连字符的双重名称，会发生什么？我认为您的示例没有足够详细地描述您遇到的问题。您需要提供更多名称相等和不相等的示例，以及*为什么*这些名称相等，然后任何人才能为您提供算法。

IE

> 约翰·F·肯尼迪 = 约翰·菲茨杰拉德·肯尼迪？
> 
> 约翰·肯尼迪先生 = 约翰·肯尼迪？

如果您查看不同的拼写，情况会变得更糟。

> 亚亚图雷 = 图雷亚亚？

有了这些问题，问题很快就会变得非常复杂。如果您只需要比较两个集合的相等性并且您可以忽略拼写、缩写、标题等，那么只需检查集合交集。在类似 c# 的伪代码中

```
string[] names1 = name1.ToLowerInvariant().Split(' ');
string[] names2 = name2.ToLowerInvariant().Split(' ');

if (names1.Length != names2.Length)
   return false; // unequal, different number of names

foreach(name in names1)
   if (!names2.Contains(name))
       return false; // unequal, missing name

return true; // equal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:16:01.570

或者，如果您喜欢简洁：

```
 var person1name = "Venkata Phani Kumar Parimi";
        var person2name = "Kumar Parimi Venkata Phani";

        var match = person1name.Split().All(p => person2name.Split().Contains(p)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:05:13.267

尝试使用`SequenceEqual`这正是它的工作：

```
 string s = "Subba Cargos";
  string s2 = "Cargos Subba";

  var isSame=  s.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries).
               OrderBy(o => o).SequenceEqual(s2.Split(new[] {' '}, 
                   StringSplitOptions.RemoveEmptyEntries).
               OrderBy(o => o)); 
```

# javascript - 它一直显示未定义的文件名

> ID：10174406
> 
> 赞同：0
> 
> 时间：2012-04-16T12:49:57.577
> 
> 标签：javascript, jquery

我试图在用户上传文件后显示文件名。文件上传成功，但在 javascript 中它一直显示以下消息：

> 文件（未定义）上传成功！

当它应该显示文件名时，它一直显示未定义。为什么是这样？目前发生的情况是，当用户上传文件时，文件被上传到“ImageFiles”文件夹中，上传完成后，下面的 javascript 函数会显示消息，说明已成功上传的文件的名称。

以下是上传后显示文件名和消息的代码：

```
function stopImageUpload(success){

    function handleFileSelect(evt) {
    var files = evt.target.files;
    localStorage["fname"] = files[0].name; //save the name for future use
}

$('.fileImage').bind('change', handleFileSelect, false);

      var result = '';
      if (success == 1){
  result = '<span class="msg">The file ('+localStorage["fname"]+') was uploaded successfully!</span><br/><br/>';
    localStorage["fname"] = undefined; //remove the temporary variable

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      return true;   
} 
```

下面是表格：

```
 <form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
    <p>Image File: <input name='fileImage' type='file' class='fileImage' />
    <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' />
    </p> 
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:56:59.360

尝试这个：

```
var fileName;
function stopImageUpload(success){

    function handleFileSelect(evt) {
    var files = evt.target.files;
    fileName = files[0].name; //save the name for future use
}

$('.fileImage').bind('change', handleFileSelect, false);

      var result = '';
      if (success == 1){
  result = '<span class="msg">The file ('+fileName+') was uploaded successfully!</span><br/><br/>';
    fileName = ""; //remove the temporary variable

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      return true;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:57:16.170

未经测试，但尝试使用 getItem/setItem 看看是否有任何改变！

```
function stopImageUpload(success){

    function handleFileSelect(evt) {
       var files = evt.target.files;
       console.log(files[0].name); //see if a name really exists, or if something is wrong outside this function?
       localStorage.setItem("fname", files[0].name); //save the name for future use
    }

    $('.fileImage').on('change', handleFileSelect);

    var result = '';
    if (success == 1){
        result = '<span class="msg">The file ('+localStorage.getItem("fname")+') was uploaded successfully!</span><br/><br/>';
        localStorage.setItem("fname", ""); //remove the temporary variable
    } else {
        result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
    }
    return true;   
} 
```

# jquery - 如何使用 jquery 验证多个下拉列表？

> ID：10174407
> 
> 赞同：1
> 
> 时间：2012-04-16T12:49:58.683
> 
> 标签：jquery

我正在尝试验证我的用户控件中的两个复选框列表。经过一些谷歌搜索后，我能够验证我的第一个复选框列表。代码如下

```
<script language="javascript" type="text/javascript">

function ValidateChkList(source, arguments) {

    arguments.IsValid = IsCheckBoxChecked() ? true : false;
}
function IsCheckBoxChecked() {
    var isChecked = false;
    var list = document.getElementById('<%= cblJobType.ClientID %>');

    if (list != null) {
        for (var i = 0; i < list.rows.length; i++) {
            for (var j = 0; j < list.rows[i].cells.length; j++) {
                var listControl = list.rows[i].cells[j].childNodes[0];
                if (listControl.checked) {
                    isChecked = true;
                }
            }
        }
    }
    return isChecked;
} 
```

```
<asp:CustomValidator ID="cvJobType" ClientValidationFunction="ValidateChkList" CssClass="error"
                                        SetFocusOnError="True" ValidationGroup="step1" runat="server"></asp:CustomValidator> 
```

但是当我在第二个上尝试相同时，两者都不起作用。任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:52:33.457

尝试：

```
function ValidateChkList(source, arguments) {

    arguments.IsValid = IsCheckBoxChecked() ? true : false;
}
function IsCheckBoxChecked(id) {
    var isChecked = false;
    var list = document.getElementById(id);

    if (list != null) {
        for (var i = 0; i < list.rows.length; i++) {
            for (var j = 0; j < list.rows[i].cells.length; j++) {
                var listControl = list.rows[i].cells[j].childNodes[0];
                if (listControl.checked) {
                    isChecked = true;
                }
            }
        }
    }
    return isChecked;
}

IsCheckBoxChecked('<%= cblJobType.ClientID %>');
IsCheckBoxChecked('<%= second_list.ClientID %>');
IsCheckBoxChecked('<%= third_list.ClientID %>'); 
```

# ruby-on-rails - Ruby on Rails 中的下拉菜单

> ID：10174408
> 
> 赞同：1
> 
> 时间：2012-04-16T12:50:07.730
> 
> 标签：ruby-on-rails, ruby

```
%p{style: "float: right;"}
= link_to "Report", blog_post, method: :Report, confirm: 'Why do you want to report?' 
```

如果我想弹出一个包含“你为什么要报告？”的弹出窗口，如何使用下拉菜单 和一个包含问题原因的下拉菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:07:38.883

您应该添加 jquery-rails：[https](https://github.com/indirect/jquery-rails) ://github.com/indirect/jquery-rails 您也可以按照本教程进行操作：http: [//joshhuckabee.com/jquery-rails-3](http://joshhuckabee.com/jquery-rails-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:16:51.750

您可以使用 twitter 引导下拉菜单。 [http://twitter.github.com/bootstrap/javascript.html](http://twitter.github.com/bootstrap/javascript.html)

下载 bootstrap-dropdown.js 文件并将其放入您的资产文件中。通过 $('.dropdown-toggle').dropdown() 调用下拉菜单

还有一个关于如何使用它的演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:48:45.233

在 Rails 视图模板中，您只需在菜单元素上编写迭代：

```
<ul class="dropdown-menu">
  <% @menu_items.each do |item| %>
    <li><a href="#"><%= item.title %></a></li>
  <% end %>
</ul> 
```

然后你需要添加一点 css/javascript 魔法来使这个列表看起来像下拉菜单。有很多关于该主题的教程，但是如上所述，更简单的方法就是使用 twitter-bootstrap。[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)。（您可以检查[此 gem](https://github.com/seyhunak/twitter-bootstrap-rails)以将 twitter-bootstrap 包含到您的 Rails 应用程序中）

# php - 通过打印机打印带有打印功能的 php 表

> ID：10174412
> 
> 赞同：2
> 
> 时间：2012-04-16T12:50:33.503
> 
> 标签：php, mysql, printing

我有以下 php 表，如何将打印功能添加到 php 表中？还有一个按钮，当单击时，下表通过打印机打印，我尝试了“CTRL+P”，我只得到了页面示例的 html 部分页眉、页脚、导航栏，而不是结果 php 结果

```
<?php
echo "<table border='1' id= results>
<tr>
<th>FILEID</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Issue Date</th>
<th>Interest Rate</th>
<th>Terms</th>
<th>Balance Outstanding</th>
<th>Balance Outstanding</th>
<th>New Loan</th>
<th>Principal Repayment for $l_month</th>
<th>Principal Repaid</th>
<th>Balance Outstanding</th>
<th>Interest Payment for $l_month </th>
<th>INTEREST ACCUMULATED DURING FINNANCIAL YEAR</th>
</tr>";

while($row = mysql_fetch_array($result))
  {

  echo "<tr>"; 

    echo "<td>" . $row['app_file_id'] . "</td>";
    echo"<td>". $row['app_fname']."</td>";
    echo"<td>". $row['app_lname']."</td>";
    echo"<td>". $row['commit_date'] ."</td>";
    echo"<td>". $row['computer_interest'] ."</td>";
    echo"<td>". $row['loan_life'] ."</td>";
    echo"<td>". $row['avg(app_ln_amnt)'] ."</td>";
    echo"<td>". $row['Balance Outstanding'] ."</td>";
    echo"<td>". $row['New Loan'] ."</td>";
    echo"<td>". $row['SUM(r.receipt_on_principal)'] ."</td>";
    echo"<td>". $row['Principal Repaid'] ."</td>";
    echo"<td>". $row['avg(app_amnt_owed)'] ."</td>";    
    echo"<td>". $row['SUM(r.receipt_on_interest)'] ."</td>";
    echo"<td>". $row['Interest Accumilated'] ."</td>";
  echo "</tr>";
  }
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:01:30.140

PHP 不会向浏览器发送事件。你可以用 Javascript 做到这一点。

`<input type="button" onclick="window.print()" value="Print Table" />`

要隐藏您不想打印的所有其他东西，请将其添加到您的 html 中：

```
<style media="printer">
      .noprint * {
          display:none;
      } 
```

并将 css 类 noprint 分配给您不想打印的父元素。

未经测试，但这也可以工作：

```
body {
    visibility: hidden;
}
.printthis {
    visibility: visible;
} 
```

并为您的表格提供 printthis 类，因此仅打印表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:57:40.847

我是 php 新手，但我知道执行这些功能的唯一方法是通过 javascript。

下面是一些将显示打印按钮并将其发送到打印机的代码，如果使用谷歌浏览器，您将首先出现打印预览屏幕，使用其他浏览器它只会打开小打印窗口。

```
<SCRIPT LANGUAGE="JavaScript"> 
if (window.print) {
document.write('<form><input type=button name=print value="Print Page"onClick="window.print()"></form>');
}
</script> 
```

对于网站，您必须非常小心格式，http 讨厌打印，因此页面上最好有最少的脚本，否则页面的一半将是间距。特别是如果在打印所有 <ul> 和 <li> 语句时使用下拉菜单之类的内容，则该语句将转换为页面下方的项目符号。否则，我可能会建议您将页面显示为 pdf，这样您就可以更好地控制页面布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:59:04.577

```
<?php
echo "<table border='1' id= results>
<tr>
<th>FILEID</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Issue Date</th>
<th>Interest Rate</th>
<th>Terms</th>
<th>Balance Outstanding</th>
<th>Balance Outstanding</th>
<th>New Loan</th>
<th>Principal Repayment for $l_month</th>
<th>Principal Repaid</th>
<th>Balance Outstanding</th>
<th>Interest Payment for $l_month </th>
<th>INTEREST ACCUMULATED DURING FINNANCIAL YEAR</th>
</tr>";

while($row = mysql_fetch_array($result))
  {

  echo "<tr>"; 

    echo "<td>" . $row['app_file_id'] . "</td>";
    echo"<td>". $row['app_fname']."</td>";
    echo"<td>". $row['app_lname']."</td>";
    echo"<td>". $row['commit_date'] ."</td>";
    echo"<td>". $row['computer_interest'] ."</td>";
    echo"<td>". $row['loan_life'] ."</td>";
    echo"<td>". $row['avg(app_ln_amnt)'] ."</td>";
    echo"<td>". $row['Balance Outstanding'] ."</td>";
    echo"<td>". $row['New Loan'] ."</td>";
    echo"<td>". $row['SUM(r.receipt_on_principal)'] ."</td>";
    echo"<td>". $row['Principal Repaid'] ."</td>";
    echo"<td>". $row['avg(app_amnt_owed)'] ."</td>";    
    echo"<td>". $row['SUM(r.receipt_on_interest)'] ."</td>";
    echo"<td>". $row['Interest Accumilated'] ."</td>";
  echo "</tr>";
  }
echo "</table>";
?>
<button onclick="javascript:window.print();"></button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:59:55.523

我会在最后添加这个 JavaScript：

```
<script type="text/javascript">
function printpage()
  {
  window.print()
  }
</script>
<?php
echo "<table border='1' id= results>
<tr>
<th>FILEID</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Issue Date</th>
<th>Interest Rate</th>
<th>Terms</th>
<th>Balance Outstanding</th>
<th>Balance Outstanding</th>
<th>New Loan</th>
<th>Principal Repayment for $l_month</th>
<th>Principal Repaid</th>
<th>Balance Outstanding</th>
<th>Interest Payment for $l_month </th>
<th>INTEREST ACCUMULATED DURING FINNANCIAL YEAR</th>
</tr>";

while($row = mysql_fetch_array($result))
  {

  echo "<tr>"; 

    echo "<td>" . $row['app_file_id'] . "</td>";
    echo"<td>". $row['app_fname']."</td>";
    echo"<td>". $row['app_lname']."</td>";
    echo"<td>". $row['commit_date'] ."</td>";
    echo"<td>". $row['computer_interest'] ."</td>";
    echo"<td>". $row['loan_life'] ."</td>";
    echo"<td>". $row['avg(app_ln_amnt)'] ."</td>";
    echo"<td>". $row['Balance Outstanding'] ."</td>";
    echo"<td>". $row['New Loan'] ."</td>";
    echo"<td>". $row['SUM(r.receipt_on_principal)'] ."</td>";
    echo"<td>". $row['Principal Repaid'] ."</td>";
    echo"<td>". $row['avg(app_amnt_owed)'] ."</td>";    
    echo"<td>". $row['SUM(r.receipt_on_interest)'] ."</td>";
    echo"<td>". $row['Interest Accumilated'] ."</td>";
  echo "</tr>";
  }
echo "</table>";
echo "<input type=\"button\" value=\"Print this page\" onclick=\"printpage()\" />";
?> 
```

如果您希望在用户打开此文档时打印机将打开，您可以在正文的 onload 事件中使用该功能：

```
<body onload="printpage()"> 
```

祝你好运 ： ）

# android - IfElse 或正则表达式

> ID：10174419
> 
> 赞同：2
> 
> 时间：2012-04-16T12:50:51.157
> 
> 标签：android, regex, if-statement

当您有很长的 IfElse 时，其中哪一种是最好的方法？

```
 if (text.contains("text"))
        {
            // do the thing
        }
        else if (text.contains("foo"))
        {
            // do the thing
        }
        else if (text.contains("bar"))
        {
            // do the thing
        }else ... 
```

或者

```
 if (text.contains("text") || text.contains("foo") || ...)
        {
            // do the thing
        } 
```

或许

```
 Pattern pattern = Pattern.compile("(text)|(foo)|(bar)|...");
        Matcher matcher = pattern.matcher(text);
        if(matcher.find())
        {
            // do the thing
        } 
```

我的意思是只有当你必须检查很多这些时。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:57:09.553

我个人会使用一个集合，因为我认为它更容易阅读并且`contains`在 O(1) 中会很有效：

```
Set<String> keywords = new HashSet<String>();
keywords.add("text");
keywords.add("foo");
keywords.add("bar");

if(keywords.contains(text)) {
    //do your thing
} 
```

如果你喜欢它紧凑，你也可以写：

```
Set<String> keywords = new HashSet<String>(Arrays.asList("text", "foo", "bar"));

if(keywords.contains(text)) {
    //do your thing
} 
```

最后，如果您总是使用相同的列表，您可以创建关键字`private static final`而不是每次运行该方法时都重新创建它。

**编辑**
在评论之后，上面的内容确实等同于使用条件 with `text.equals("xxx")`， not `text.contains("xxx")`。如果您真的打算使用包含，那么您将不得不遍历集合并测试每个字符串，但它变成了 O(n) 操作：

```
for (String key : keywords) {
    if (text.contains(key)) {
        //do your stuff
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:56:30.083

```
String[] storage = {
    "text",
    "foo",
    "bar",
    "more text"
};

for(int i=0; i < storage.length(); i++){
    //Do Something
} 
```

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:58:35.653

通常长`If` `else`语句被语句替换`case`，但这并不总是可能的。如果我在哪里推荐，我会选择第二个选项，选项 1 会给你一堆`If else if else`做同样事情的语句，而对于第三种情况，正则表达式往往会很快增长得相当大。

再次取决于有多少`alot`，最好将所有字符串放入数据结构中并对其进行迭代以查看元素是否在其中。

# c# - 为什么我不能引用 System.ComponentModel.DataAnnotations？

> ID：10174420
> 
> 赞同：116
> 
> 时间：2012-04-16T12:50:56.783
> 
> 标签：c#, wpf, data-annotations

我正在尝试在我的 WPF 项目中使用 DataAnnotations 来指定字符串的最大长度，如下所示：

```
using System.ComponentModel.DataAnnotations; 
```

但是，我得到了错误

> 命名空间“System.ComponentModel”中不存在类型或命名空间名称“DataAnnotations”（您是否缺少程序集引用？）

我已经看到了这个命名空间中`DataAnnotations` *确实*存在的其他示例。我正在使用 C#4。我有什么理由不能使用它吗？我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-04-16T12:53:37.603

您必须引用定义此命名空间的程序集（默认情况下在 Visual Studio 模板中不引用它）。打开您的引用管理器并添加对 System.ComponentModel.DataAnnotations 程序集的引用（解决方案资源管理器 -> 添加引用 -> 选择 .Net 选项卡 -> 从列表中选择 System.ComponentModel.DataAnnotations）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-09-20T22:48:29.863

如果使用**.NET Core**或**.NET Standard**

采用：

> 管理 NuGet 包..

[![使用管理 NuGet 包](../Images/72c2572dba4af0a970f8b1ba58d02cd9.png)](https://i.stack.imgur.com/h0Fnr.png)

代替：

> 添加参考...

[![不要使用添加引用](../Images/ae7980434d823f79aed897e02068a2df.png)](https://i.stack.imgur.com/yJjql.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-01T18:02:27.703

**引用 System.ComponentModel.DataAnnotations**

在代码文件中有 Using System.ComponentModel.DataAnnotations; 在文件的顶部，例如：

```
using System.ComponentModel.DataAnnotations; 
```

通过右键单击解决方案资源管理器中的项目，为您的项目添加 .NET 引用：

![在此处输入图像描述](../Images/b862d83e69a1889a07b19ae20788aa45.png)

希望这可以帮助！这个问题帮助了我。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-02-17T18:40:57.383

如果您在引用中没有它（就像我没有），您还可以添加 NuGet System.ComponentModel.Annotations 以获取程序集并解决错误。（在这里添加它，因为这个答案仍然是谷歌的错误）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-15T11:04:58.377

我也遇到了同样的问题，我通过在我的一个项目中添加引用来解决，该项目没有提到的引用。如果您的解决方案中有 2-3 个项目，请通过将此引用添加到其他项目来进行检查。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-02T08:02:27.730

我发现我无法在 (1) 处使用以下版本从 Silverlight 5 引用 System.ComponentModel.DataAnnotations。我发现 Silverlight 5 程序集不能使用 .NET 程序集，它给出了错误“您无法添加对 System.ComponentModel.DataAnnotations 的引用，因为它不是针对 Silverlight 运行时构建的。...”我计​​划通过以下方式解决这个问题希望安装下面 (2) 中的 Silverlight 5 软件包。如果失败，我会更新这篇文章。

[更新：失败了。我安装了与 Silverlight 5 相关的所有内容，但没有 .dll 程序集 System.ComponentModel.DataAnnotations 的 Silverlight 版本。太糟糕了。更新二：我从以前安装的用于 Visual Studio 2008 或 2010 的 Silverlight 开发人员工具包中找到了一个具有此名称的旧 .dll。我添加了这个文件，它似乎“工作”，因为 IntelliSense 现在正在识别类成员的属性，例如这 `[Display(Name = "My Property Name")].` 是否适用于这个 .dll 中的其他所有内容，我不知道。]

(1)

```
Microsoft Visual Studio Professional 2013
Version 12.0.21005.1 REL
Microsoft .NET Framework
Version 4.5.51641 
```

安装版本：专业

(2) [http://go.microsoft.com/fwlink/?LinkId=229318](http://go.microsoft.com/fwlink/?LinkId=229318)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-23T10:20:45.180

当我遇到同样的问题时，我搜索了有关此主题的帮助。

尽管以下可能不是 2012 年最初提出的问题的答案，但对于遇到此线程的人来说，它可能是一个解决方案。

**解决此问题的一种方法**是检查您的项目在解决方案中的位置。事实证明，对于我的实例（我试图安装 NuGet 包但它不会并且出现列出的错误）我的项目文件未包含在解决方案目录中，尽管显示在解决方案资源管理器中。我从超出范围的目录中删除了项目并重新添加了项目，但这次是在正确的位置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-03T14:59:33.650

为您的项目使用 4.5 及更高版本的 FrameWork 即可解决问题。因为此命名空间低于 4.5 及更高版本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-17T08:31:41.467

System.ComponentModel.DataAnnotations 包含在其自己的程序集中，因此您需要确保已引用它。简单地说：

1）。右键单击解决方案并选择添加。

2）。从列表中选择参考。

3）。搜索“ System.ComponentModel.DataAnnotation ”并勾选其左侧的复选框，然后按确定。

工作完成，不应该有任何参考错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-26T20:05:25.777

如果您尝试将 Visual Studio 从 vs2008 更新到 vs2010。而且您的应用程序使用框架 3.5（并且您不想升级它），并且还使用了 WCF RIA Services BETA...我有个坏消息...您必须升级到 WCF RIA Services v1（BETA 在 vs2010 上不起作用)...因此...您还必须安装 Silverlight 4 + 升级到框架 4.0

看到这个： http: [//blog.nappisite.com/2010/05/updating-visual-studio-2008net-35-ria.html](http://blog.nappisite.com/2010/05/updating-visual-studio-2008net-35-ria.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-19T09:04:39.960

```
This error occurs when the reference to the "System.dll" got removed.Solution to the problem is very simple add the reference to "System.dll".The dll is normally available in the following location
"C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727" .Add the reference your problem will get solved . 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-13T15:51:39.493

我从 Silverlight 4 升级到 Silverlight 5，然后我遇到了这个问题。尽管我在项目的“参考”下有对“System.ComponentModel.DataAnnotations”的参考，但它有一个黄色的让步标志，表明无法找到先前引用的程序集。事实证明，“System.ComponentModel.DataAnnotations”引用的属性指示“特定版本 = True”，当我将其更改为“特定版本 = False”时，它解决了这个问题。右键单击“References”下的“System.ComponentModel.DataAnnotations”程序集，然后从上下文菜单中选择“Properties”。检查“特定版本 = False”的属性值。

它一定是引用了升级到 Silverlight 5 后不再可用的旧 Silverlight 4 程序集。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-25T02:10:34.920

我也有这个问题。当我添加与 System.xml 相同的命名空间时，这是非常愚蠢的。我尝试删除所有引用，但没有解决。我使用“global::System.ComponentModel”，它也可以正常工作。当我删除我的命名空间时，这个问题已经解决。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-22T11:51:03.117

对于 Visual Studio 2019 中的 .Net Core，试试这个。 [见 VS 建议](https://i.stack.imgur.com/LPZDE.png)

它对我有用，希望它也对你有用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-03T00:50:24.450

在 net40 中使用 System.ComponentModel.DataAnnotation 时出现问题，所以我这样做了：

```
#if !NET40
    using System.ComponentModel.DataAnnotations;
#endif

#if !NET40
        [StringLength(256)]
#endif 
```

NET40 必须是 .Net Framework 4.0 的预定义宏定义

* * *

## 回答 #16

> 赞同：-6
> 
> 时间：2014-03-25T19:46:07.273

我有同样的问题，我通过以下方式解决了这个问题。

右键单击页面，选择属性。在构建操作中选择内容。

希望这个解决方案可以帮助你。

# python - 使用 lxml 解析 iframe

> ID：10174425
> 
> 赞同：0
> 
> 时间：2012-04-16T12:51:22.363
> 
> 标签：python, iframe, lxml

我正在从 <iframe> 中获取数据。然后我想使用 <iframe> 获取数据`lxml`。

我没有找到任何可以从中获取 <iframe> 的资源`lxml`。

谁能帮助我让我知道如何实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:54:20.400

您可以从中提取`src`属性`iframe`，然后从 url 获取数据`urllib`，最后使用`lxml`.

示例代码（未测试）：

```
from lxml.etree import fromstring
data = urllib.urlopen(url) # fetching url with iframe
tree = fromstring(data.read()) # parsing tree to get src attribute
src_url = tree.cssselect("iframe").attrib['src']
data = urllib.urlopen(src_url) # open iframe src url
tree = fromstring(data.read()) # parsing iframe tree 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-24T06:48:27.217

我们`src`从 中找到属性，然后通过请求库`iframe`从 url 获取数据。`src`

```
import lxml.html as lh
import requests

rq= requests.get(url)

content = rq.content

doc = lh.fromstring(content)

for i, elt in enumerate(doc.xpath('//[@id="page_content"]/div[2]/div/div/iframe')):

     url_data = elt.attrib.get('src')
     data = requests.get(url_data).content) 
```

# php - 分组并获取表中最受欢迎的项目

> ID：10174428
> 
> 赞同：0
> 
> 时间：2012-04-16T12:51:38.653
> 
> 标签：php, mysql

我想显示所有项目，首先显示项目最多的特殊项目，并且它们必须按特殊分组。

```
[id] [specials_id] [item]
1         1        bread
2         2        bread
3         2        eggs
4         1        peanut
5         2        macaroni
6         3        peanut
7         2        juice 
```

结果应该是这样的：

```
 2 bread
    2 eggs
    2 macaroni
    2 juice
    1 bread
    1 peanut
    3 peanut 
```

我试过这个，但它只返回其中一个：

```
 SELECT COUNT(*) AS `Rows`, item, special_id 
   FROM my_table 
   GROUP BY special_id 
   ORDER BY   `Rows` DESC 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:56:10.603

使用此查询：

```
SELECT COUNT( * ) AS Rows1, spl_id, name
FROM `new`
GROUP BY `spl_id` , `name`
ORDER BY   `Rows1` DESC 
```

# android - Android 3.2 奇怪的视图问题

> ID：10174429
> 
> 赞同：1
> 
> 时间：2012-04-16T12:51:40.103
> 
> 标签：android, eclipse, listview, android-3.0-honeycomb, tabbar

我是 Android 开发的新手，正在 3.2 模拟器中测试我的应用程序，以确保所有内容都能在平板电脑上正确扩展。该视图由 TabBar 中的 ListView 组成，我遇到了 UI 未对齐的奇怪问题（请参阅链接）。这在任何手机屏幕尺寸的任何其他操作系统版本（2.1 - 4.0）上都不存在。

这些`ListView`项目由一个自定义布局组成，该布局使用一个`LinearLayout`带有背景的可绘制对象，两个`textviews`用于标题和副标题。

![在此处输入图像描述](../Images/2d9a6523b41b6bab73fb5906fac3bbe0.png)

XML 渲染（10.1in WXGA 选项卡）：

![在此处输入图像描述](../Images/153af2c47507b324f612ffc7fdafb096.png)

有人有什么想法吗？

编辑：

修复了问题。我在清单中的 TabBar 视图上禁用了旋转，方法是删除列表根据需要呈现的 XML 中的这行代码。感谢所有做出贡献的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:59:31.980

您可以选择根据设备加载不同的布局、值和其他资源，区域设置只需通过添加特定值来更改文件夹名称，在您的情况下使用类似 layout-hdpi ，layout-xhdpi

# excel - Excel - 是否可以为特定单词声明变量？

> ID：10174437
> 
> 赞同：2
> 
> 时间：2012-04-16T12:51:53.643
> 
> 标签：excel, excel-2007, vba

我正在使用 Excel 中的测试用例电子表格工作，上周我遇到了一个问题，开发团队决定更改大量被测应用程序的“字段”标签。我必须做的是转到我的 Excel 电子表格并一一修改标签的名称。

我现在要做的是将标签的名称定义为变量，然后直接从变量中进行更改，而不是通过出现来进行更改。

例如，我写道：“用户在**'名称'**字段中输入用户名”。

我希望从变量中提取**“名称”**，因此下次他们决定更改标签名称时，例如：从“名称”更改为“用户名称”，我只需将变量名称从“名称”更改为“用户” -Name' 而不是在每次出现时手动执行此操作。

关于如何在 Excel 中执行此操作的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:39:53.840

命名范围可能对您有益。您可以通过名称引用单元格范围，如果您添加列或行，命名范围将自动增加对该范围的引用。在“公式”菜单下查看，然后单击“名称管理器”。从那里您可以为您想要的任何单元格范围定义名称，例如：
`MyRange = A1:C1`
并在 VBA 中引用它，例如：
`Range("MyRange")`
在 WorkSheet 上，您可以像这样简单地引用它
`=MyRange`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:10:01.093

> 例如，我写道：“用户在'名称'字段中输入用户名”。

如果这是在 Excel 工作表中，您可以将单元格引用连接到您的文本中。例如，如果字段标题“用户名”位于 Sheet1 的 A1 中，您将使用如下公式：

```
="The user inputs the username in '" & Sheet1!$A$1 & "' field." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:14:07.037

当然。只需在单独的工作表中创建一个 2 列列表，其中 A 列是变量名称，B 列是相应的值。在任何你想引用特定变量名的地方，都`VLOOKUP()`对那个 2 列的列表执行一次。

```
="The user inputs the username in '"&VLOOKUP("Name",Sheet1!$A$1:$B$30,2,FALSE)&"' field." 
```

`VLOOKUP`或者，如果您选择使用没有字段标签的单列列表，您甚至不需要这样做。您可以通过串联直接引用您想要的单元格，即：

```
="The user inputs the username in '"&Sheet1!$A$1&"' field." 
```

更简单的是，不需要任何特殊条目，只需进行全局查找/替换，这更方便，因为您的字段用单引号括起来。即，没有什么可以阻止您将*所有*出现的`'Name'`替换为`'User-name'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T03:18:48.937

如果您尝试在 VBA 代码中执行此操作，则始终可以声明常量字符串变量。

```
Const strName as String = "Name" 
```

然后在代码中使用它，例如：

```
MsgBox "The user inputs the username in " & strName & " field" 
```

希望有帮助:)

# curl - CentOS 中 Curl 的替代方案

> ID：10174438
> 
> 赞同：0
> 
> 时间：2012-04-16T12:52:06.070
> 
> 标签：curl, client, webserver, put

在 Centos 中是否有任何其他有效的 CURL 替代客户端，我可以通过它发送 PUT 请求以将文件上传到安装在主机中的网络服务器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:08:33.190

Curl 是事实上的命令行工具，用于 http 上的那种恶意软件

要传输文件，您还可以使用：

ftp sftp scp smbclient

我可以继续，你需要更具体

# c# - 如何在 Javascript 中读取从 C# 传递的 params object[] 项目？

> ID：10174441
> 
> 赞同：1
> 
> 时间：2012-04-16T12:52:22.740
> 
> 标签：c#, javascript, silverlight

我正在 Silverlight 中做一个简单的程序来在 silverlight 中添加 javascript 函数。

silverlight 功能如下

```
void InvokeJS(params object[] items)
{
object result = System.Windows.Browser.HtmlPage.Window.Invoke("JSFunction", items);
} 
```

将值传递给此函数正在发生如下

```
 InvokeJS((object)new object[]{ (object)"10", (object)"20"}) 
```

JS函数如下

```
function JSFunction(params) {
            alert(params);
        } 
```

现在如何读取 javascript 中的参数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:56:53.690

对于被调用的函数，params 数组就是一个数组。

在这种情况下，您将拥有一个如下所示的数组：

```
[ [ "10", "20" ] ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:59:56.013

该`params`变量只是传入的许多参数中的第一个。您可以使用以下语法访问其他参数：

```
alert(this.arguments[0]);
alert(this.arguments[1]);
alert(this.arguments[2]); 
```

如果您在单个变量中传递所有参数，它将是一个数组，因此请使用：

```
alert(params[0]);
alert(params[1]);
alert(params[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T01:42:12.537

我得到了它

```
alert(params[0]); alert(params[1]); 
```

# iphone - NSSet 只取我的 for 集合中的最后一个值

> ID：10174442
> 
> 赞同：0
> 
> 时间：2012-04-16T12:52:32.520
> 
> 标签：iphone, ios, xcode, core-data, nsset

我尝试从实体“Teilnehmer”中获取成员，然后我想将其保存到另一个与“buchung”有关系的实体“Buchungsteilnehmer”。

问题是，nsset 函数只保存姓氏并将其与我的实体“buchung”建立关系。但我想将 for 语句中的所有成员存储为与“buchung”的关系。

你能帮我吗

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Teilnehmer" inManagedObjectContext:context];

        [request setEntity:entity];

        NSArray *events = [context executeFetchRequest:request error:nil];

        for (Teilnehmer *teil in events) {
         teilnehmer = [NSEntityDescription insertNewObjectForEntityForName:@"Buchungsteilnehmer" inManagedObjectContext:context];
            teilnehmer.name=teil.name;
            NSLog(@"Name der Teilnehmer lautet: %@",teil.name);
            NSError *error;
            if (![context save:&error]) 
            {
                NSLog(@"Fehler beim hinzufügen : %@", [error localizedDescription]);
            }

        }

        NSSet *set = [NSSet setWithObject:teilnehmer];    
        NSLog(@"SET: %@",set);
        buchung.buchungsteilnehmer=set;

        NSError *error;
        if (![context save:&error]) 
        {
            NSLog(@"Fehler beim hinzufügen : %@", [error localizedDescription]);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:59:55.687

在你的 for 循环开始之前创建一个 NSMutableSet。每次插入新实体时调用集合上的 addObject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:01:02.017

你只用一个对象创建你的集合，那么你怎么期望它有多个对象呢？

更改您的代码如下：

```
 NSMutableSet *set = [[NSMutableSet alloc] init];                

  for (Teilnehmer *teil in events) {
         teilnehmer = [NSEntityDescription insertNewObjectForEntityForName:@"Buchungsteilnehmer" inManagedObjectContext:context];
            teilnehmer.name=teil.name;
            NSLog(@"Name der Teilnehmer lautet: %@",teil.name);
            NSError *error;
            if (![context save:&error]) 
            {
                NSLog(@"Fehler beim hinzufügen : %@", [error localizedDescription]);
            } else {
                [set addObject:teilnehmer];
            }

        }

   buchung.buchungsteilnehmer=set; // I assume you synthesized this member so it retains set
   [set release]; 
```

# grails - 带有 Grails 弹簧安全性的 Tivoli Access Manager

> ID：10174445
> 
> 赞同：1
> 
> 时间：2012-04-16T12:52:39.300
> 
> 标签：grails, spring-security, tivoli

这里有没有人有将 TAM 与 Grails spring security 集成以进行单点登录的经验。如果是这样，您能否帮助我快速入门或指向任何教程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:04:28.673

您可能希望使用 Spring Security 的预身份验证功能并检查从 TAM 发送的标头。为此，您将编写自己的身份验证提供程序，这非常简单，只需查找标头。有关更多信息，请参阅[此](https://stackoverflow.com/questions/6412591/hooking-into-pre-authentication-with-spring-security-core)

# apache - 服务器或脚本问题

> ID：10174448
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:53:01.520
> 
> 标签：apache, tomcat, cas

我在 https 中收到错误

```
 HTTP Status 404 - /cas/login

    type Status report

     message /cas/login

    description The requested resource (/cas/login) is not available.
     Apache Tomcat/7.0.23 
```

当我在 http 中打开相同的链接时，它会给出一个输出（未知语言）

```
 <html>
     <head></head>
     <body>
    <pre>???�?? </pre>
    </body>
    </html> 
```

为什么会这样……？这是服务器问题还是脚本问题？我觉得是服务器问题？？如果是这样，请分享解决方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:50:29.940

“请求的资源 (/cas/login) 不可用。” 通常表示 cas 没有正确部署或 Tomcat 无法正确加载。您能否检查一下 catalina 或 cas.log 文件的内容并报告回来？

# javascript - 检查一个元素是否是给定元素的父元素

> ID：10174450
> 
> 赞同：1
> 
> 时间：2012-04-16T12:53:05.493
> 
> 标签：javascript, jquery, parent

如果单击的元素不是某些特定 DIV 元素的子元素，我该如何检查？

```
$("body").click(function(e) {
    if(e NOT child of $('#someDiv')) alert(1);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:55:28.600

```
if ($(e.target).parent('#someDiv').length == 0) {
    ...
} 
```

或者，您的意思是（“不是 e 的祖先”）：

```
if ($(e.target).closest('#someDiv').length == 0) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:55:38.527

如果父元素匹配该选择器，您可以使用该`parent`方法和选择器返回父元素。然后，您可以检查`length`属性以查看是否返回了父元素：

```
$("body").click(function(e) {
    if(!$(this).parent("#someDiv").length) {
        alert("Not a child");
    }
}); 
```

如果要检查点击的元素是否不是*祖先*，可以使用`parents`代替`parent`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:56:14.453

```
$('yourElement').on('click',function(){
      if(!$(this).parents('theDiv').length){
          //not a child
      }
}); 
```

# java - 使用选择性@Entity

> ID：10174461
> 
> 赞同：2
> 
> 时间：2012-04-16T12:53:54.333
> 
> 标签：java, jpa, entity

我已经搜索 StackOverflow 一段时间了，但到目前为止还没有成功。因此创建了这个问题......

我目前正在使用 JPA，但我遇到了一个问题（至少对我来说是这样）。情况如下：我创建了一个系统，其中一个用户可以被删除，但不能从数据库中删除（为了保持这个特定用户的订单）。为此，我只是向实体用户添加了一个布尔值。到目前为止一切都很好，但棘手的部分来了。由于系统的使用不需要任何“已删除”的用户，我不想从数据库中检索它们。

有没有办法向@Entity 注释添加某种声明？或者在这种情况下，我根本不应该使用 @Entity 吗？

在此先感谢您的帮助！

PS。我不是在寻找必须创建某种 User_OLD 表的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:12:00.813

首先，我建议将列“removed”重命名为“inactive”，因为您不会删除用户。

对于检索实体，这里有两种选择：

*   根据 inactive == false 在数据库中创建 USER_ACTIVE VIEW 并更改您的 @Entity 以使用 USER_ACTIVE 视图。
*   在从 USER 表中检索时添加 WHERE inactive == false 子句。

如果您有拥有用户集合的实体，并使用@FetchType.LAZY 进行注释：

*   在需要时使用与上面定义的相同的 where 子句获取用户。

# wpf - 实例化 WPF 对象并使其可用

> ID：10174464
> 
> 赞同：0
> 
> 时间：2012-04-16T12:54:06.650
> 
> 标签：wpf, resourcedictionary

下面是一些为 WPF 应用程序实例化 ResourceManager 的启动代码。如果我想通过 xaml 提供它，我会把它放在资源字典中吗？使用对象提供者？还有什么？

是否有理由在 WPF 应用程序中更喜欢一种对象实例化方法而不是另一种方法？

干杯，
贝里尔

```
var asm = Assembly.Load("SampleApp.Common");
var resourceMan = new ResourceManager("SampleApp.Common.Resources.SupportedCultures", asm);
DataContext = new MainWindowVm(resourceMan); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:10:03.027

在我看来，如果您在应用程序生命周期内不需要替换字典，那么静态类是最好的解决方案：

```
public static class SampleAppCommonResources
{
    private static ResourceManager _Manager;

    public static ResourceManager Manager
    {
        get
        {
            if (_Manager == null)
            {
                var asm = Assembly.Load("SampleApp.Common");
                _Manager = new ResourceManager("SampleApp.Common.Resources.SupportedCultures", asm);
            }

            return _Manager;
        }
    }
} 
```

XAML 用法：

```
<Menu Tag="{x:Static local:SampleAppCommonResources.Manager}"> 
```

如果有多线程环境，`_Manager`应该分配使用`Interlocked.CompareExchange`例如。

# tinyxml - 如何在 TinyXML 中发送和读取二进制数据？

> ID：10174468
> 
> 赞同：3
> 
> 时间：2012-04-16T12:54:17.510
> 
> 标签：tinyxml

我需要在 xml 中发送文件数据（图片、文本、word、excel 等）。我需要将文件数据作为二进制数据发送。我阅读了一些关于此的文章，但无法在 TinyXml 中实现。请阅读以下帖子： [http ://www.techrepublic.com/article/send-binary-data-in-xml/1050529](http://www.techrepublic.com/article/send-binary-data-in-xml/1050529)

上面的帖子提到了三种方法。现在让我知道在 tinyXML 中可以使用什么方法。如果可能，请给我发送一些示例代码以发送和读取 tinyXML 中的二进制数据。我进行了很多搜索，但找不到任何方法。

如果无法使用示例代码，请列出我需要使用的 API，以便我尝试并在此处更新我的状态。

# microsoft-metro - Win8 Metro 上的 getaddrinfo 是否存在语义相同的替代方案？

> ID：10174471
> 
> 赞同：2
> 
> 时间：2012-04-16T12:54:20.000
> 
> 标签：microsoft-metro

我正在尝试将现有的大型多平台库移植到 Win8 Metro，但被一些已删除的 API 阻止。浏览文档并查看一些代码示例并没有帮助，我仍然找不到一个简单、可靠的替代方法来替代缺少的 GetAddrInfoW 和 getaddrinfo 函数。任何人都可以告诉，对于这些已删除的功能，建议的替代方案是什么？我只是忽略了文档中的某些内容吗？谢谢你，捷尔吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:05:50.780

您确定这些功能真的不存在了吗？[winsock 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738519%28v=vs.85%29.aspx)特别提到 GetAddrInfoW 实际上是在 Windows 8 Consumer Preview 中扩展的，而不是被删除。

引用：“在 Windows 8 Consumer Preview 和 Windows Server 8 Beta 上，GetAddrInfoW 函数支持 IRI 或国际化域名 (IDN) 解析应用于 pNodeName 参数中传递的名称。Winsock 执行 Punycode/IDN 编码和转换。此行为可以使用下面讨论的 AI_DISABLE_IDN_ENCODING 标志禁用。”

编辑：再次查看它在文档顶部说它仅适用于桌面应用程序。对于 Metro Apps，winsock2 似乎不可用，并且没有这两个功能的等效替代方案。至少我找不到一个。

# validation - CakePHP：为什么不显示验证错误？

> ID：10174474
> 
> 赞同：2
> 
> 时间：2012-04-16T12:54:32.350
> 
> 标签：validation, cakephp

因此，验证错误会出现在我的添加操作中，但不会出现在我的编辑操作中。以下是我的控制器的片段：

在这里，我按预期收到验证错误消息：

```
 public function add() {
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved.'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please try again.'));
            }
        }
        $this->set('clients', $this->User->Client->find('list'));
    } 
```

但不是在这里：

```
 public function edit($id = null) {
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid user'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved.'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->User->read(null, $id);
            unset($this->request->data['User']['password']);
        }
        $this->set('user', $this->User->read());
        $this->set('clients', $this->User->Client->find('list'));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:51:26.957

如果我没记错的话，在保存失败后使用 read() 调用将清除验证错误。

那里..我发现它[http://book.cakephp.org/1.3/view/1017/Retrieving-Your-Data#read-1029](http://book.cakephp.org/1.3/view/1017/Retrieving-Your-Data#read-1029)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:22:40.043

是否触发了 setFlash('user could not be saved') 消息？

debug($this->User->validationErrors) 的输出是什么 - 在 setFlash 失败消息之后添加它

您的帖子数组是否包含需要保存的所有字段？您的 $validate 中是否有您的 post 数组中没有的必填字段？（Cake 会记录错误，但除非您的表单中有该字段，否则无法显示它）。或者另一个失败的验证规则，但您没有在表单中显示该字段？

# ruby - Routes - 如何在 url ID 和文章名称中显示？

> ID：10174479
> 
> 赞同：0
> 
> 时间：2012-04-16T12:55:00.973
> 
> 标签：ruby, ruby-on-rails-3, routes, rails-routing

我有**Articles**控制器，并且为了显示相应的文章，我使用基本路线 - **example.com/articles/4**。

我想将此 URL 格式更改为**example.com/4-article-name**或**example.com/article-name-4**。

谁能给我一个提示，如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:09:04.643

Ryan Bates(Railscast.com) 似乎做了一集解决了你的问题：

```
/app/models/article.rb 
class Article < ActiveRecord::Base
  def to_param
    "#{id} #{name}".parameterize
  end
end 
```

请参阅：[http ://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:14:10.307

一般来说，数字开头是最优雅的方式，因为在 ruby​​ 中它可以很容易地转换为整数，例如`'123-foo-bar'.to_i`将 return `123`。请参阅[http://apidock.com/rails/ActiveRecord/Base/to_param](http://apidock.com/rails/ActiveRecord/Base/to_param)你会发现如何改变这个机制。

# android - GLES2，AndEngine中的AutoParallaxBackground垂直

> ID：10174482
> 
> 赞同：0
> 
> 时间：2012-04-16T12:55:07.233
> 
> 标签：android, andengine

如何在 andengine 中垂直移动 AutoParallaxBackground？这是一个如此简单的问题，但我找不到解决方案！

我使用 GLES2，并使用 AndEngine [http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AutoParallaxBackgroundExample.java](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AutoParallaxBackgroundExample.java)附带的示例中的代码。

问题是您无法在任何地方更改或添加垂直速度，因为没有为 AutoParallaxBackground 创建类 - 您只能更改主类中的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:15:47.417

我相信没有简单的方法可以做到这一点。您必须对其进行修改以满足您的需要，这应该很容易。

编辑：出于某种原因，这个问题再次出现在我的提要中，所以我对此事进行了更多调查。我相信使这项工作的关键是改变`onDraw`. `ParallaxEntity`有一个对 OpenGL`glTranslatef`方法的调用，它只填充了三个参数 (x, y, z) 中的一个，因此显而易见的解决方案是也提供第二个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T12:12:35.520

您可以将游戏设置为横向模式并以一种感觉背景垂直滚动的方式旋转图像。否则使用图像并设置物理处理程序以将其设置为垂直方向的速度并将其重置为初始位置。

# gcc - g++ 整数到字符串赋值，没有错误/警告

> ID：10174483
> 
> 赞同：1
> 
> 时间：2012-04-16T12:55:09.627
> 
> 标签：gcc, g++, gcc-warning

以下代码在 G++ (GCC) 4.1.2 上编译时没有任何警告或错误。

是否有理由不发出错误/警告？

是否有一个标志可以导致它发出警告或错误？

```
#include <iostream>

using namespace std;

void func(string &s)
{
    unsigned long u = 123;
   s = u;
}

int main()
{
   string s;

   func (s);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:57:22.037

没有警告或错误的原因是因为这是有效的 C++。 `std::string`重载赋值运算符 ( `operator=`) 以采用`char`. `long`可以隐式转换为 a `char`，因此代码是有意义的。

# java - java堆内存问题

> ID：10174487
> 
> 赞同：4
> 
> 时间：2012-04-16T12:55:16.210
> 
> 标签：java, caching, bufferedimage

我的应用程序基本上是一个[照片浏览器](http://i39.tinypic.com/2lddls4.png)。我的方法（不要评判我，我是java新手）是`ArrayList`填充`BufferedImages`然后将图像添加到`JList`（左侧）。

这就是我获得图像的方式：

```
private void getFullImage() {

        BufferedImage im = null;        

        ImageReader imageReader = null;
            try {
                System.out.println("Loading "+original+"...");
                String suffix = Utils.getFileExt(original.getName(), "jpg");
                @SuppressWarnings("rawtypes")
                Iterator readers = ImageIO.getImageReadersBySuffix(suffix);
                imageReader = (ImageReader)readers.next();
                imageReader.setInput(new FileImageInputStream(original));
                im = imageReader.read(0);
                imageReader.dispose();
            } catch (Exception e)
            {
                e.printStackTrace();
            }

        this.img = im;
    } 
```

然后，在我获取所有数据后，我会将图像添加到我的`JList`：

```
 Vector vector = new Vector();
   JPanel container = null;
   PhotoPanel pp = null;
   Photo p = null;
   for(int i=0;i<files.length;i++)
   {
        p = new Photo(files[i]);
        pp = new PhotoPanel(p);
        container = new JPanel(new BorderLayout());
        container.add(pp,BorderLayout.CENTER);
                                       container.setBorder(BorderFactory.createTitledBorder(p.getTitle()));
                                vector.addElement(container);
  }
   plist.setListData(vector); 
```

例如，如果我有 10 个文件，则该应用程序运行良好。问题是当我有更多图像要显示时。然后我会得到一个例外：`Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space`。所以，我知道我的方法很糟糕，我想知道我应该如何拍摄和存储所有图像并将它们显示在`JList`. 也许使用缓存？我读了一些关于`SoftReference`但我真的不知道如何使用它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:20:19.887

问题的主要可能原因有两个：

* * *

第一个，在你的情况下，我发布的更多是警告而不是实际原因，是在控制台上打印了过多的数据，带有`System.out.println()`.

我不确定它是否只发生在 NetBeans 或所有开发工具中。但无论哪种方式，它都需要大量的打印才能触发它，我怀疑你加载了那么多文件。

无论如何，如果您使用该行的意图`System.out.println("Loading "+original+"...");`是用于永久/生产日志记录，而不是出于开发/调试目的而暂时放入代码中，那么您最好使用适当的`Logger`. [您可以在此 SO 答案](https://stackoverflow.com/a/16448421/1253136)中阅读 TL;DR 版本的说明，您可以通过此处提供的链接进一步阅读，包括官方文档。

* * *

另一个原因，当然是你的，是你同时加载了太多的数据。解决方案是：

1.  缩小图像（制作缩略图），并仅显示所选图像的全尺寸版本。请注意强硬，这是一种快速的解决方法，**不推荐！**因为系统可能仍然无法承受。
2.  仅加载显示在界面可见部分的图像（或所述图像的缩略图，以获得组合的最佳解决方案），并在导航界面时加载新图像（并卸载其他图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:45:57.320

我在处理大图像时遇到了很多困难（尽管在 SWT 中），而那些 OutOfMemory 和 NoMoreHandles（即使没有足够的内存也可能发生）是一场噩梦。我认为没有办法保留大图像或在内存中有很多图像。我同意 Andrew 的评论，但只是想补充一点，根据您的要求，您可以尝试扩展画布（或 Swing 中的任何内容）并直接在其上绘制图像，而不将它们保存在内存中（类似于 PaperClips#打印预览）。当然，您需要进行一些计算才能正确布局图像，但我认为，在这种情况下，您可能会克服内存问题（但会遇到一些其他问题:)）

# c++ - 客户端 Torrent 中的 DLNA 协议

> ID：10174492
> 
> 赞同：0
> 
> 时间：2012-04-16T12:55:34.010
> 
> 标签：c++, streaming, bittorrent, dlna

下午好，我正在为 KTorrent 的一个项目工作，以参加我的大学 C++ 考试。我必须在 KTorrent 中添加一个 DLNA 插件，但我不知道这有多复杂。我想知道如何实现这个协议以及是否有人知道这个协议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:12:50.190

你可能想看看[libdlna](http://libdlna.geexbox.org/)

# ruby - 使用 ruby 管理脚本：bunder / gem / rvm 混淆

> ID：10174497
> 
> 赞同：1
> 
> 时间：2012-04-16T12:55:42.513
> 
> 标签：ruby, gem, rvm, bundler, sudo

我有一个 git-repo，我将它克隆到我的服务器上来做一些管理工作。大多数脚本都是红宝石，我需要一些宝石。到目前为止，我只是使用 sudo 安装了 gem，但这似乎不是一个好主意。

我尝试了 rvm 和 bundler，但我仍然不确定如何正确执行。

通常我将存储库克隆到 /root 并将脚本符号链接到 /usr/local/bin。我想我想要的是将 gem 安装到存储库本身中，这样其他人就可以使用我的脚本，而无需 fu*king 安装他们的 ruby​​gems。

关于如何进行的任何想法？我也不知道如何以 /usr/local/bin 中的脚本仍然可以找到它们的方式指定 gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:45:52.067

使用 RVM，您可以为 gem 选择单独的 gemset 并创建一个包装器，使二进制文件始终在 PATH 中可用。

这是示例`haml`：

```
rvm use 1.9.3@tools --install --create
gem install haml
rvm wrapper 1.9.3@tools --no-prefix haml 
```

# html - 图像的一部分

> ID：10174498
> 
> 赞同：1
> 
> 时间：2012-04-16T12:55:43.697
> 
> 标签：html, canvas, html5-canvas

使用HTML5中的canvas标签，可以加载大图的一小块区域？并且加载时间非常短？我为什么要玩，有几块瓷砖但相当大，所以你有几个循环（for）。例如，当您为角色设置动画时，我只想重绘特定区域，以最大限度地减少时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:13:19.097

context.drawImage（图像，sx，sy，sWidth，sHeight，dx，dy，dWidth，dHeight）

**s** = 源，**d** = 目的地。

![在此处输入图像描述](../Images/3d84efd1605789d23c5b2fe5ce438efa.png)

来源[https://developer.mozilla.org/en/Canvas_tutorial/Using_images#drawImage_example_3](https://developer.mozilla.org/en/Canvas_tutorial/Using_images#drawImage_example_3)

但是您无法改善加载时间，您必须先加载它才能裁剪它！

祝你好运

# html - Google 是否将 HTML 自定义数据属性编入索引？

> ID：10174505
> 
> 赞同：5
> 
> 时间：2012-04-16T12:56:13.950
> 
> 标签：html, custom-data-attribute

我正在使用 pushState / hash bangs 构建一个基于 AJAX 的投资组合模块，因为我正在排除没有 JavaScript 的浏览器，我唯一担心的是 HTML 自定义数据属性在 SEO 方面的限制。

例如，使用下面的代码：

```
<ul class="gallery" data-anchor="/photography/example/" data-title="Example"></ul> 
```

数据标题是否会被索引，即文本内容是否会被 Google 收集？或者我是否需要在列表中或列表周围包含一个标题标签作为描述性补充？一旦用户单击该特定图库，数据标题将用作新窗口标题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:43:08.020

不，它不会被索引。属性本身将与页面一起缓存，但谷歌没有属性或值的含义的上下文，因此对搜索引擎没有意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T13:00:43.887

您应该假设所有 HTML 内容都可以在某种程度上被搜索引擎使用。

但是，我几乎总是会说，可见内容的权重要比不可见内容的权重大得多。即使 Google*确实*在其加权算法中使用了数据属性，您也应该让内容对用户可见

# c# - Wininet InternetGetCookie 获取空 cookie 数据

> ID：10174508
> 
> 赞同：10
> 
> 时间：2012-04-16T12:56:29.163
> 
> 标签：c#, cookies, wininet, dll-reference

我目前正在使用 Csharp 获取 cookie 数据。我正在使用 DLLImport 在 wininet.dll 中调用 InternetGetCookie，但是当我尝试它时，函数返回一个 ERROR_INSUFFICIENT_BUFFER（错误代码 122）。

谁能帮我这个 ？

这是 Dll 参考的代码：

```
[DllImport("wininet.dll", SetLastError = true, CharSet = CharSet.Auto, EntryPoint="InternetGetCookie")]
        public static extern bool InternetGetCookie(string lpszUrl, string lpszCookieName,
            ref StringBuilder lpszCookieData, ref int lpdwSize); 
```

这就是我调用函数的方式：

```
InternetGetCookie("http://example.com", null, ref lpszCookieData, ref size) 
```

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T14:21:47.493

返回值告诉你你提供给函数的缓冲区不够大，无法包含它想要返回的数据。您需要调用`InternetGetCookie`两次：一次传入大小为 0，以找出缓冲区应该有多大；第二次，使用大小合适的缓冲区。

另外，P/Invoke 签名错误；`StringBuilder`不应该是`ref`参数（并且`EntryPoint`参数是错误的，因为它没有指定正确的入口点名称）。

像这样声明函数：

```
[DllImport("wininet.dll", SetLastError = true)]
public static extern bool InternetGetCookie(string lpszUrl, string lpszCookieName,
    StringBuilder lpszCookieData, ref int lpdwSize); 
```

然后像这样调用它：

```
// find out how big a buffer is needed
int size = 0;
InternetGetCookie("http://example.com", null, null, ref size);

// create buffer of correct size
StringBuilder lpszCookieData = new StringBuilder(size);
InternetGetCookie("http://example.com", null, lpszCookieData, ref size);

// get cookie
string cookie = lpszCookieData.ToString(); 
```

# java - 使用扩展类时未调用 JAXB afterUnmarshall

> ID：10174513
> 
> 赞同：4
> 
> 时间：2012-04-16T12:56:40.880
> 
> 标签：java, xml, jaxb, unmarshalling, moxy

我编写了一个`BaseBeanEx`扩展 JAXB 注释 bean () 的 bean ( `BaseBean`)。它`BaseBean`位于数据结构中某处的列表中，无法更改。该软件会在`BaseBeanEx`需要时进行显式转换。我还写了一个`ObjectFactory`to create`BaseBeanEx`而不是`BaseBean`. 这一切都很好，但现在我添加了一个永远不会被调用的`afterUnmarshal`方法。`BaseBeanEx`

这是一个错误还是根据规格？如果以后是这种情况，是否有一些优雅的解决方法？

我正在使用默认的 JAXB 引擎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:31:55.043

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

`afterUnmarshal`没有被调用的原因是`BaseBeanEx`元数据是建立在`BaseBean`类上的。要让您的用例正常工作，您需要让您的 JAXB 实现知道您确实想要映射到`BaseBeanEx`.

**选项 #1 - 使用注解的任何 JAXB 实现**

***根***

您可以使用`@XmlElement`注释来覆盖字段/属性的类型。在下面的示例中，方法的签名是`List<BaseBean>`，但`@XmlElement`注释通知 JAXB 实现该属性应解释为`List<BaseBeanEx>`。

```
package forum10174513;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    private List<BaseBean> baseBeans;

    @XmlElement(name="base-bean", type=BaseBeanEx.class)
    public List<BaseBean> getBaseBeans() {
        return baseBeans;
    }

    public void setBaseBeans(List<BaseBean> baseBeans) {
        this.baseBeans = baseBeans;
    }

} 
```

**选项 #2 - 使用 MOXy 的外部映射文档**

> BaseBean 位于数据结构中某处的 List 中，无法更改。

如果您无法修改您的域模型并且使用 MOXy 作为您的 JAXB 提供程序，那么您可以利用其外部映射文档来应用元数据，而无需修改您的域模型。

***绑定.xml***

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum10174513">
    <java-types>
        <java-type name="Root">
            <java-attributes>
                <xml-element 
                    java-attribute="baseBeans"
                    name="base-bean" 
                    type="forum10174513.BaseBeanEx"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

***演示***

下面是一些代码，演示了如何引导`JAXBContext`利用外部映射文档的 a。当前存在一个错误，其中仅通过外部映射文档引用的类不会注册事件方法 (http://bugs.eclipse.org/376876)。您可以通过在用于创建`JAXBContext`.

```
package forum10174513;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum10174513/bindings.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class, BaseBeanEx.class}, properties);

        File xml = new File("src/forum10174513/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Root root = (Root) unmarshaller.unmarshal(xml);
    }

} 
```

***基豆***

```
package forum10174513;

public class BaseBean {
} 
```

***BaseBeanEx***

```
package forum10174513;

import javax.xml.bind.Unmarshaller;

public class BaseBeanEx extends BaseBean {

    public void afterUnmarshal(Unmarshaller unmarshaller, Object parent) {
        System.out.println("AFTER UNMARSHAL WAS CALLED");
    }

} 
```

***输出***

下面是通过运行演示代码生成的输出。

```
AFTER UNMARSHAL WAS CALLED
AFTER UNMARSHAL WAS CALLED 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)
*   [http://blog.bdoughan.com/2011/05/jaxb-and-interface-fronted-models.html](http://blog.bdoughan.com/2011/05/jaxb-and-interface-fronted-models.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:16:19.713

你拼写对了吗？方法名称是“afterUnmarshal”（一个“L”）。 [眼镜](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshalEventCallback)

更新：

再想一想，jaxb 可能永远不会发现回调，因为它不知道您的自定义子类。我会假设 JAXB 在 JAXBContext 设置期间检查所有类。那时，JAXB 只知道基 bean 类，而不知道您的自定义子类，因此永远找不到回调方法。

2个想法。您可以使用“外部回调”机制（使用单独的事件处理程序来执行您的自定义类所需的操作）。或者，您可以尝试使用回调方法生成（或稍后添加）基 bean 类。那么 JAXB 可能会识别并调用这些方法，然后您可以在自定义子类中覆盖这些方法。

# xcode - xcode 4.2 (build 4D199) 在使用 Cocos2D 构建时崩溃

> ID：10174514
> 
> 赞同：0
> 
> 时间：2012-04-16T12:56:42.787
> 
> 标签：xcode, cocos2d-iphone

当我尝试运行（而不是构建）我的 Cocos2d iphone 应用程序时，xcode 突然崩溃。想法？

（我被迫解释得更清楚，所以我会在这里写一些文字。还有一些文字。还有一些文字和一些文字。还有一些文字和一些文字对不起）

```
UNCAUGHT EXCEPTION (NSInvalidArgumentException): -[__NSCFString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x401acf220
UserInfo: (null)
Hints: 
  0: Replacement view is installing: <IDELogNavigator: 0x40318bd40 representing: <DVTExtension 0x40101c980: Log Navigator (Xcode.IDEKit.Navigator.Logs) v0.1>>
Backtrace:
  0  0x00007fff8ca56faa __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff88514d5e objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff8cae32ae -[NSObject doesNotRecognizeSelector:] (in CoreFoundation)
  3  0x00007fff8ca43e73 ___forwarding___ (in CoreFoundation)
  4  0x00007fff8ca43c88 _CF_forwarding_prep_0 (in CoreFoundation)
  5  0x000000010ec1e76f -[IDELogNavigator setStateSavingSelectedObjects:] (in IDELogNavigator)
  6  0x00007fff8d3e6c6a _NSSetObjectValueAndNotify (in Foundation)
  7  0x000000010ec1dd77 -[IDELogNavigator revertStateWithDictionary:] (in IDELogNavigator)
  8  0x00000001083e942b -[DVTStateToken _pullStateFromDictionary:] (in DVTFoundation)
  9  0x00000001083e91e2 -[DVTStateToken pullStateFromRepository] (in DVTFoundation)
 10  0x0000000108d0549d -[IDENavigatorArea replacementView:didInstallViewController:] (in IDEKit)
 11  0x00000001085e35f1 __42-[DVTReplacementView _setupViewController]_block_invoke_0 (in DVTKit)
 12  0x00000001083ea51e DVTInvokeWithFailureHint (in DVTFoundation)
 13  0x00000001085e3473 -[DVTReplacementView _setupViewController] (in DVTKit)
 14  0x00000001085e3345 -[DVTReplacementView installedViewController] (in DVTKit)
 15  0x0000000108d2f693 -[IDENavigatorArea currentNavigator] (in IDEKit)
 16  0x0000000108d4822d -[IDENavigatorArea delegateFirstResponder] (in IDEKit)
 17  0x0000000108d91946 -[IDEWorkspaceTabController _changeToNavigatorWithIdentifier:sender:] (in IDEKit)
 18  0x0000000108d3f10d -[IDEShowNavigatorAlert runForEvent:inWorkspace:context:completionBlock:] (in IDEKit)
 19  0x0000000108a75849 -[IDEAlertEvent runInWorkspace:context:completionBlock:] (in IDEFoundation)
 20  0x0000000108d416a1 -[IDERunAlertMonitor executionStart] (in IDEKit)
 21  0x00007fff8d3c3fca -[__NSObserver _doit:] (in Foundation)
 22  0x00007fff8d3c3e9d __-[NSNotificationCenter addObserverForName:object:queue:usingBlock:]_block_invoke_1 (in Foundation)
 23  0x00007fff8c9ffaaa _CFXNotificationPost (in CoreFoundation)
 24  0x00007fff8d37ffe7 -[NSNotificationCenter postNotificationName:object:userInfo:] (in Foundation)
 25  0x0000000108995240 -[IDEExecutionEnvironment setCurrentLaunchSession:] (in IDEFoundation)
 26  0x0000000108994de9 -[IDEExecutionEnvironment _handleLaunchSession:stateChange:] (in IDEFoundation)
 27  0x000000010898b94d -[IDEExecutionEnvironment observeValueForKeyPath:ofObject:change:context:] (in IDEFoundation)
 28  0x00007fff8d3c67b2 NSKeyValueNotifyObserver (in Foundation)
 29  0x00007fff8d3e78eb NSKeyValueDidChange (in Foundation)
 30  0x00007fff8d39404b -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] (in Foundation)
 31  0x00007fff8322a8ba _dispatch_call_block_and_release (in libdispatch.dylib)
 32  0x00007fff8322bbeb _dispatch_barrier_sync_f_slow_invoke (in libdispatch.dylib)
 33  0x00007fff8322c72a _dispatch_main_queue_callback_4CF (in libdispatch.dylib)
 34  0x00007fff8c9ec06c __CFRunLoopRun (in CoreFoundation)
 35  0x00007fff8c9eb676 CFRunLoopRunSpecific (in CoreFoundation)
 36  0x00007fff8774c31f RunCurrentEventLoopInMode (in HIToolbox)
 37  0x00007fff877535c9 ReceiveNextEventCommon (in HIToolbox)
 38  0x00007fff87753456 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 39  0x00007fff89561f5d _DPSNextEvent (in AppKit)
 40  0x00007fff89561861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 41  0x00007fff8955e19d -[NSApplication run] (in AppKit)
 42  0x00007fff897dcb88 NSApplicationMain (in AppKit)
 43  0x00000001083b9eec (in Xcode) 
```

解决方案：我复制了包含项目的文件夹，然后打开 xcode-project 文件，一切正常。

# css - 如何让我的文本在页面上呈现得更高？

> ID：10174515
> 
> 赞同：0
> 
> 时间：2012-04-16T12:56:43.883
> 
> 标签：css, layout, html

![在此处输入图像描述](../Images/78c61f3a8849978ba58513527ff71228.png)

现在我希望文本“(även uppfinnare)”显示在第一行。现在执行它的 HTML 是

```
<div class="data-box">   
            <div class="personName"><strong>    
                3\. Kee Marcello&nbsp;
             </strong></div> 
        <div class="otherDetails">(även uppfinnare)</div> 

        <table border="0"><tr><td></td><td>Telefon</td><td>123</td></tr>
        <tr><td></td><td>Fax</td><td>123</td></tr>
        <tr><td></td><td>E-post</td><td>123</td></tr>
        <tr><td>null</td><td>Referens</td><td></td></tr>
        </table> 

    </div> 
```

相关的CSS是

```
.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
.personName {     float:left;     width:300px;   }  
.otherDetails {     float:right;     width:450px;      } 
```

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:00:07.850

将 float left 应用于`.personName`and`.otherDetails`并确保`.data-box`宽度几乎是`750px`( `300px + 450px`) 或只是并排减小 2 的大小，`div`因此它们的宽度之和不超过 650px

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:00:50.877

它掉下来是因为它不适合容器。`.data-box`宽度为 650px，`.personName`并且`.otherDetails`宽度总和为 750px

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:03:34.763

你的两个元素都是浮动的（一个在右边，一个在左边），它们一起构成 750px。但容器元素只有 650px 宽。

当浮动元素空间不足时，它们会被洗牌到下一行。

要么使子元素更小（以适应 650 像素）或使父元素更大（750 像素）

# html - HTML5 视频 - 仅播放视频的一部分

> ID：10174516
> 
> 赞同：12
> 
> 时间：2012-04-16T12:56:48.210
> 
> 标签：html, video, partial

是否有一些简单的技术可以只播放 HTML5 视频的特定部分？例如，在一个 30 秒的剪辑中，我只想播放 5-20 秒的部分。此外，视频的其余部分根本不应该从 UI 访问（这意味着视频时间线应该只显示 5-20 秒的部分）。

我一直在浏览一些 HTML5 视频播放器，但它们似乎都不支持这种功能。如果有人知道实现此功能的（好）方法，请给我一个提示。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:25:06.677

尽管此问题已被标记为已回答，但您和任何其他偶然发现这里的人可能会感兴趣：[指定播放范围](https://developer.mozilla.org/de/docs/Web/HTML/Using_HTML5_audio_and_video#Specifying_playback_range)。

它是[Media Fragment API](http://www.w3.org/TR/media-frags/)的一部分，目前适用于最新版本的 Firefox、Chrome 和 Safari 6+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:04:57.843

您可以在播放器中有一个 Player.Play() 事件来实现它，只要调用 Play() 启动一个计时器并在您想要的特定时间调用 Player.stop() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:05:09.380

我遇到了同样的问题，我没有找到可以解决这个问题的东西，你可以做的是实现自己的控件并用画布显示视频......

如果您尝试在 IOS 中实现这一点，您将无法做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:06:58.987

我的想法是使用自定义控件，因为我不相信该功能是本机可用的。html5 控件的所有功能（播放、暂停、从时间戳开始等）都可以通过 javascript 调用。在这种情况下，您将要编辑 currentTime 变量。

因此，您可能需要考虑设置自己的滑块，其中滑块的起点代表您的起点，终点代表您的终点。将视频设置为在页面加载时不播放。然后在页面加载时有一个 javascript 函数将 currentTime 更改为您的起点。为了停止，您可以偶尔查询当前时间。我不会使用计时器，因为像慢速加载这样的延迟可能会导致它失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:15:58.513

我正在尝试在“预览模式”中实现类似的视频。我通过添加事件侦听器然后在 currentTime()=='x' 位置暂停视频来利用上述方法。为了防止用户再次点击播放，currentTime 监听器不允许播放超过时间轴中的“x”时间，因此每次用户点击播放时，它都会自动立即再次暂停。此外，在时间“x”，视频容器将通过 CSS 隐藏，从而阻止用户与视频进行交互。

# ruby-on-rails - has_many ：通过 url/view 中的关联？

> ID：10174517
> 
> 赞同：0
> 
> 时间：2012-04-16T12:56:48.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在我的房屋模型中添加了一个`has_many :through`关联（连接表），因此房屋可以有多个类别，例如“lastminute”、“house with pool”等。

我做了一个自定义查询，所以举个例子，我想要“最后一分钟”类别中的所有房子 (5)

```
@lastminutes = House.find(:all, :select=>"houses.*", :joins=>"JOIN category_join_tables ON houses.id = category_join_tables.house_id", :conditions=>["category_join_tables.house_id = houses.id AND category_join_tables.category_id = ?", 5]) 
```

这在控制台中工作正常。

在我的网站上实现此功能的最佳方法是什么。我想要这样的 url 结构：

```
domain.com/locale/holidayhouses/lastminutes (house in the lastminute category)
domain.com/locale/holidayhouses/holidayhouses_with_pool (houses in the pool category)

domain.com/locale/lastminutes (houses and appartments in the lastminute category) 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:04:42.330

这很容易：

配置/路由.rb：

```
match 'search/*categories' => "controller#action" 
```

在您的操作中，您现在将类别作为一个数组，只需将它们解析到查询中。我猜您需要“搜索”，因为否则 rails 会将每个正常请求作为类别并将您重定向到操作。

请参阅[如何在 Rails 路由中嵌入多个标签，例如 Stack Overflow](https://stackoverflow.com/questions/2539819/how-to-embed-multiple-tags-in-rails-routes-like-stack-overflow)

* * *

对于 l18n 部分，您可以这样做

```
scope "/:locale" do
  # move all the other routes in here to work with the locale
end 
```

查看I18N 上的[导轨指南](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-url-params)

# c# - 如何在部分类的另一半中定义的属性上使用属性？

> ID：10174519
> 
> 赞同：5
> 
> 时间：2012-04-16T12:56:51.890
> 
> 标签：c#, asp.net-mvc, attributes, partial-classes

我有一个通过导入包含类似这样（缩写）的 Web 服务的自动生成的类：

```
[System.Runtime.Serialization.DataMemberAttribute()]
public System.DateTime StartDate 
{
    get 
    {
        return this.StartDateField;
    }
    set { /* implementation prop changed */ }
} 
```

我想给这个成员添加一个 MVC 格式属性。所以在另一个包含相同`partial class`定义的文件中，我想做如下的事情（这是非法的）：

```
[DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}", ApplyFormatInEditMode = true)] 
public DateTime StartDate; 
```

部分方法在这里没有用，因为部分方法必须是私有的，具有 void 返回类型，必须是方法等。

我该如何装饰这个成员？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T13:07:21.710

你可以使用`MetadataType`这样的属性：

```
[MetadataType(typeof(MyClass_Validation))]     
public partial class MyClass
{} 

public class MyClass_Validation     
{     
   [DisplayFormat(...)] 
   public DateTime StartDate { get; set; } 
} 
```

# java - 生成约会（日期）

> ID：10174526
> 
> 赞同：0
> 
> 时间：2012-04-16T12:57:03.097
> 
> 标签：java, calendar

对于学校的作业，我需要能够“计算”某些日期。

我有一些联系时刻需要自动分配到某个日期（一周中的某一天）并打印出来……</p>

假设从 1 月 1 日开始，我需要为每个星期一分配一个联系时间，除非这个星期一是假期左右。我在我的数据库中有一个日期格式的有效日期列表来检查。

到目前为止我所拥有的：

那天我想从某一天开始，然后加上 7 天

我会设置日期：

```
set(int year, int month, int date) 
```

然后每周添加 7 ：

```
cal.add(Calendar.DAY_OF_MONTH, 7); 
```

然后我会检查这个日期是否等于我的 mysql 表中的一个日期。

```
compareDatesByCalendar(Date javaDate, Date mysqlDate) { 
    Calendar javaCal = Calendar.getInstance();
    Calendar mysqlCal = Calendar.getInstance(); 
    javaCal.setTime(javaDate);
   mysqlCal.setTime(mysqlDate); 
    if (javaCal.equals(mysqlCal)) {
        ……..
    } 
else{
….} 
```

如果这一天不在列表中，我会再添加 7 个并再次检查......

依此类推，直到我有所有的时间，将它们添加到要打印的数组中

这是正确的方法还是更好的方法？

假设我们要在每个星期四预约，有没有办法从起点（例如从一月一号开始）查看第一天是什么？

如果最多有几周（可用时刻）怎么办？我怎么能阻止这个？

任何建议都会更有帮助！谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:02:14.653

由于您将重点关注日期，我建议您查看[Joda](http://joda-time.sourceforge.net/) API。它提供了比标准 DateTime Java API 更多的功能。你可以看看[这里](http://joda-time.sourceforge.net/quickstart.html)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T17:59:05.950

我最近开发了[Lamma](http://lamma.io)，旨在解决这个用例。

```
 HolidayRule ukHoliday2015 = simpleHolidayRule(
            date(2015, 1, 1), date(2015, 4, 3), date(2015, 4, 6),
            date(2015, 5, 4), date(2015, 5, 25), date(2015, 8, 31),
            date(2015, 12, 25), date(2015, 12, 28)
    );

    List<Date> dates = Dates.from(2015, 12, 23).to(2015, 12, 30).byDays(2).except(weekends()).except(ukHoliday2015).build();

    for (Date date: dates) {
        System.out.println(date);
    } 
```

输出是：

```
Date(2015,12,23)
Date(2015,12,29) 
```

# windows-phone-7 - 一个适用于 7.1 和 7.0 的应用程序

> ID：10174528
> 
> 赞同：2
> 
> 时间：2012-04-16T12:57:07.077
> 
> 标签：windows-phone-7, windows-phone-7.1

是否有可能添加 Mango 功能（如辅助动态磁贴）并仍然在没有 Mango 功能的 7.0 手机上运行该应用程序？

Ebay App 看起来很像，但可能是它发布了 2 个版本，一个用于 7.0，一个用于 7.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:08:48.170

答案基本上是否定的。您需要同时发布 7.0 和 7.1 版本，但它们不必是单独的应用程序，因为您可以拥有同一应用程序的 7.0 和 7.1 已发布版本。[这是在Windows Phone 开发者博客](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2011/09/20/submit-windows-phone-7-5-apps-today-update-7-0-apps-in-october.aspx)上宣布的。

*[编辑明确声明我不提倡伪造功能]*

如果您仍想以 7.0 为目标，您有一些选择。

1.  有单独的 7.0 和 7.1 项目。

2.  [有一个使用文件链接](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2010/01/20/linking-files-in-visual-studio.aspx)在两个项目之间共享代码的解决方案，一个针对 7.0，另一个针对 7.1 您应该能够共享大量代码，并且也许可以将视觉效果提取到可以共享的用户控件中。

3.  如果您真的想要*一个*应用程序，**尽管我认为这不是一个好主意**，但有一种可能的解决方法是使用[这个问题的答案，](https://stackoverflow.com/a/8732821/269608)它可能让您使用辅助磁贴。

与选项 3 一起，您可能还可以通过仅在某些情况下使用类似以下的方式处理墓碑来伪造快速应用程序切换（即插即用，未经测试）：

```
bool isNewInstance = false;

public PageConstructor()
{
    isNewInstance = true;
}

override OnNavigatedTo()
{
    if (isNewInstance) 
    {
        // handle page set up as necessary
    }
    else
    {
        // handle tombstoning if necessary
    }

    isNewInstance = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:58:57.977

为什么要支持7.0？Mango 是强制更新，所有手机都应该运行它。

# tcp - TCP 慢启动窗口大小

> ID：10174529
> 
> 赞同：0
> 
> 时间：2012-04-16T12:57:07.323
> 
> 标签：tcp, network-protocols, congestion-control

我正在修改网络考试，但我不确定以下问题的答案：

```
Consider the effect of using slow-start on a link with a 10ms round-trip time
and no congestion. The receive window is 24KB and the maximum segment
size is 2KB. How long does it take before the ﬁrst full window can be sent
in one transmission round? 
```

在每个 ACK​​ 之后，最大段大小是增加 1 还是增加一倍？如果它翻倍，答案会是 50ms，因为 2KB^5 = 32KB 所以在 5 次行程后 MSS 将等于 32KB，并且由于 10ms 的往返时间，它将是 10x5 = 50ms？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:18:36.873

我在这里找到了您问题的解决方案（问题 4）：

[http://web.eecs.utk.edu/~qi/teaching/ece453f06/hw/hw7_sol.htm](http://web.eecs.utk.edu/~qi/teaching/ece453f06/hw/hw7_sol.htm)

您或多或少是正确的，只是您忽略了最后一个 RTT（因为窗口大小超过 24KB）。所以你的答案是：

4 x 10 = 40 毫秒。

# c# - Windows 驱动器 - 访问和操作条目

> ID：10174532
> 
> 赞同：-2
> 
> 时间：2012-04-16T12:57:11.367
> 
> 标签：c#, windows

这是一个屏幕截图。有一些驱动器，一个 DVDisk 驱动器，一个虚拟驱动器（酒精 120%），一个网络位置。

![在此处输入图像描述](../Images/00fd99c49723ddcb3c60e1d6d1b3d5bf.png)

我想知道**Windows**存储它们的位置和**方式**，比如说，列出这些驱动器。**以及我可以使用C#**更改此列表多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:04:52.540

这是你想要的？`DriveInfo.GetDrives();`

[http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)

# iphone - iPhone/OS X LION：如何从 CC_SHA256 加密数据中检索解码数据？

> ID：10174536
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:57:14.543
> 
> 标签：iphone, osx-lion

我正在使用以下代码（CC_SHA256）对 NSString 输入进行编码。有人可以帮助我使用相同的逻辑以解码格式检索吗？

```
 -(NSString*) encodeAndGetHashInfo :(NSString *) inStringToHashIt
{
    NSDate *currentDate = [NSDate date];
    NSLog(@"currentDate %@",currentDate);

    NSTimeInterval currTimeMillsecs = ([currentDate timeIntervalSince1970] * 1000);
    NSString *strCurrTimeMilliSecs = [NSString stringWithFormat:@"%.0f", currTimeMillsecs]; 
    NSLog(@"strCurrTimeMilliSecs: %@", strCurrTimeMilliSecs);  //here we are getting millsec in  this way 1328962624994.734131
    //double currentTime=[strCurrTimeMilliSecs doubleValue];

    //Do hashing    
    NSString *withSalt= [NSString stringWithFormat:@"%@%@%@", strCurrTimeMilliSecs, inStringToHashIt,STATIC_HASH];

    NSLog(@"withSalt.%@",withSalt);

    NSString *inputStr = withSalt;

    unsigned char hashedChars[32];
    CC_SHA256([inputStr UTF8String],
              [inputStr lengthOfBytesUsingEncoding:NSUTF8StringEncoding], 
              hashedChars);

    NSData * hashedData = [NSData dataWithBytes:hashedChars length:32];
    NSLog (@"hashedData:%@",hashedData );
    NSString* hashPasswordResponse = NULL;
    hashPasswordResponse = [NSString stringWithFormat:@"%@", hashedData];       

    hashPasswordResponse = [hashPasswordResponse stringByReplacingOccurrencesOfString:@" " withString:@""]; 
    NSLog(@"hashPasswordResponse.......%@",hashPasswordResponse);//this string is 

    return hashPasswordResponse;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:56:49.783

你不能 SHA 是一种散列算法，而不是要解码。

就像[Jonathan Grynspan](https://stackoverflow.com/users/265530/jonathan-grynspan)所说，如果你可以解码 sha（任何版本），就会违背这种算法的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:32:50.857

正如其他人所指出的，SHA-1 和 SHA-2 变体在设计上是单向哈希。如果您可以反转它们，则散列被破坏。哈希旨在检查数据完整性，而不是提供数据加密。

如果你想要加密/解密而不是散列，你想要使用 CommonCrypto 的`CCCryptor`例程之一。看：

[任何用于AES加密解密的可可源代码？](https://stackoverflow.com/questions/2039940/any-cocoa-source-code-for-aes-encryption-decryption)

# c# - 在 wpf 中快速生成 ViewModel 属性？

> ID：10174539
> 
> 赞同：8
> 
> 时间：2012-04-16T12:57:22.983
> 
> 标签：c#, wpf, mvvm

阅读[本文](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)后，我的`PersonViewModel`课堂上有以下代码：

```
public Jurisdiction CountryResidence
{
    get
    {
        return Model.CountryResidence;
    }
    set
    {
        if (Model.CountryResidence == value)
            return;
        else
        {
            Model.CountryResidence = value;
            base.OnPropertyChanged("CountryResidence");
        }
    }
}

public Jurisdiction CountryBirth
{
    get
    {
        return Model.CountryBirth;
    }
    set
    {
        if (Model.CountryBirth == value)
            return;
        else
        {
            Model.CountryBirth = value;
            base.OnPropertyChanged("CountryBirth");
        }
    }
} 
```

我也有`CountryDomiciled`,`CountryPassport`和`LegalJurisdiction`, 都具有相同的格式。同样，我有很多`String`属性，它们都共享它们的格式。

这会导致大量相同的代码！但是，我不知道如何使它更简洁。

有没有更好的方法来生成这些保持强类型的属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T13:22:55.877

我使用 Visual Studio 的片段，它为我生成带有支持存储和事件引发的属性。只需使用名称`propchanged`（或其他名称，如果您愿意）和以下内容创建 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>propchanged</Title>
      <Shortcut>propchanged</Shortcut>
      <Description>Code snippet for property (with call to OnPropertyChanged) and backing field</Description>
      <Author>lazyberezovsky</Author>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
    </Header>
    <Snippet>
      <Declarations>
        <Literal>
          <ID>type</ID>
          <ToolTip>Property type</ToolTip>
          <Default>string</Default>
        </Literal>
        <Literal>
          <ID>property</ID>
          <ToolTip>Property name</ToolTip>
          <Default>MyProperty</Default>
        </Literal>
        <Literal>
          <ID>field</ID>
          <ToolTip>The variable backing this property</ToolTip>
          <Default>myVar</Default>
        </Literal>
      </Declarations>
      <Code Language="csharp">
        <![CDATA[private $type$ $field$;

    public $type$ $property$
    {
        get { return $field$;}
        set 
    {
       if ($field$ == value)
          return;

       $field$ = value;
       OnPropertyChanged("$property$");
    }
    }
    $end$]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

并将其放入文件夹`C:\Users\YourName\Documents\Visual Studio 2010\Code Snippets\Visual C#\My Code Snippets\`。

接下来，我从一些基本 ViewModel 继承我的 ViewModel，它实现了接口并提供了用于生成“PropertyChanged”事件的`INotifyPropertyChanged`受保护方法。`OnPropertyChanged`

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName);
    }
} 
```

现在，当您`propchanged`在 Visual Studio 中键入时，它会询问您属性类型和名称，并为您生成代码。

```
public class PersonViewModel : ViewModel
{
    // type here 'propchanged' (or other shortcut assigned for snippet)
} 
```

更新：

[另一种选择是通过PostSharp](http://www.sharpcrafters.com/)等 AOP 框架生成代码。在这种情况下，代码将在编译期间生成和添加（因此您的类将保持干净）。[下面](http://www.sharpcrafters.com/solutions/notifypropertychanged)是实现通过 PostSharp 属性更改的 INotifyProperty 的示例：

```
[Notify]
public class PersonViewModel
{
    public Jurisdiction CountryResidence { get; set; }
    public Jurisdiction CountryBirth { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T13:32:30.607

**更新：** NotifyPropertyWeaver 已被弃用，并作为[PropertyChanged.Fody](https://github.com/Fody/PropertyChanged/blob/master/README.md)继续其生命。这是解决此问题的绝对超酷方法。这是一个仅编译时的解决方案。

这里有一些可以为您节省代码和麻烦的东西：[NotifyPropertyWeaver](http://github.com/SimonCropp/NotifyPropertyWeaver)

使用上述内容，您可以在没有任何`INotifyPropertyChanged`相关代码的情况下实现您的属性，并且构建步骤将为您处理接线。

这是一个简单的项目 include（也可通过 Nuget 获得），它将自动将`OnPropertyChanged`回调注入到任何实现`INotifyPropertyChanged`. 它在编译时执行（因此没有运行时命中），并且您的代码只能具有自动实现的属性（在您的情况下，您使用单独的支持对象除外）。

它甚至包括值相等检查，因此它涵盖了完整的逻辑。我没有使用手动实现的属性对其进行测试，但值得一试。

**编辑：**我现在已经对其进行了测试，它工作正常：手动实现的属性将“正常工作”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T13:14:47.420

不是您真正想要的，但顺便说一句，您可以通过反转逻辑测试来为每个属性节省两行：

```
public Jurisdiction CountryResidence
{
    get
    {
        return Model.CountryResidence;
    }
    set
    {
        if (Model.CountryResidence != value)
        {
            Model.CountryResidence = value;
            base.OnPropertyChanged("CountryResidence");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:14:44.557

我不知道任何内置方式，但您可以录制一个将为您生成代码的宏。我发现最简单的方法是开始录制宏，然后仅使用键盘创建您想要的任何内容（您可以[在此处](http://msdn.microsoft.com/en-us/library/aa259912%28v=vs.60%29.aspx)找到方便的键盘快捷键列表）

例如，我有一个生成公共版本的属性，所以我只需键入`private string _someValue;`并点击我的宏，它将生成公共属性以及属性更改通知。

也就是说，请记住，为了简单和方便，在 MVVM 中将整个模型暴露给视图是完全有效的。因此，您不必单独公开模型的每个属性，而只需为模型对象创建一个属性。

```
public Model SomeModel
{
    get
    {
        return Model;
    }
    set
    {
        if (Model == value)
            return;
        else
        {
            Model= value;
            base.OnPropertyChanged("SomeModel");
        }
    }
} 
```

并像这样绑定到模型的属性：

```
<TextBox Text="{Binding SomeModel.SomeProperty}" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T13:19:07.123

请尝试使用[XAML PowerToys](https://www.vsixgallery.com/extension/d01c1624-8838-4097-bf77-f52d73fc7a1f/)快速生成 ViewModel；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T14:50:38.333

要获得对属性名称的“强类型”引用（启用重构所需的），您可以使用表达式。将以下方法放在视图模型的基类中：

```
protected void RaisePropertyChanged<T>(Expression<Func<T>> property)
{
    var handler = PropertyChanged;
    if (handler == null) return;

    var propertyName = NotifyPropertyChangedHelper.GetPropertyNameFromExpression(property);
    handler(sender, new PropertyChangedEventArgs(propertyName));
} 
```

在您的视图模型中，您将能够执行以下操作：

```
public Jurisdiction CountryResidence
{
    get { return Model.CountryResidence; }
    set 
    {         
        if (Model.CountryResidence == value)
            return;

        Model.CountryResidence = value;
        OnPropertyChanged(() => CountryResidence);
    }
} 
```

现在，由于引用与实际属性相反，因此会自动选择重构属性名称。

这解决了硬编码属性名称的痛点，尽管它仍然需要 4-5 行样板代码。[notifypropertyweaver](http://code.google.com/p/notifypropertyweaver/)和[PostSharp](http://ruskin-dantra.blogspot.com/2009/03/inotifypropertychanged-made-easier.html)等面向方面的方法确实消除了视图模型中的*所有*手动编码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T13:11:36.147

您没有尝试过使用 Visual Studio 代码片段，例如`prop`或`propfull`吗？只需键入它并按两次 Tab 键。问题是`propfull`代码片段不会引发**PropertyChanged**事件。

但实际上应该有此类任务的第三方片段。这是我发现的：[带有 INPC 的属性片段](http://www.nichesoftware.co.nz/node/31)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-12T12:49:39.333

为此，我编写了一个小型 T4 模板。

[http://software.the-architect.info/2014/08/12/a-quick-way-to-generate-view-model-properties-in-wpf](http://software.the-architect.info/2014/08/12/a-quick-way-to-generate-view-model-properties-in-wpf)

# unit-testing - 解决测试、testhelper 和被测项目之间的 Maven 循环依赖关系

> ID：10174542
> 
> 赞同：6
> 
> 时间：2012-04-16T12:57:40.347
> 
> 标签：unit-testing, maven, maven-2, dependencies, circular-dependency

我的设置是这样的。我有一个项目`A`，一个测试项目取决于`A`：

```
A <- A_t 
```

我还有其他项目取决于`A`（及其测试）：

```
A <- B <- B_t 
```

为了简化一些测试，我引入了一个新的库来帮助测试基于以下内容的东西`A`：

```
A <- Atesthelper 
```

所以`A_t`(and `B_t`) 将依赖于这个测试助手，像这样：

```
A <- A_t
^    |
|    v
Atesthelper 
```

但是，当我创建 Maven 项目 (pom.xml) 时，通常的做法是将项目和该项目的测试捆绑在同一个 pom.xml 中。我为`Atesthelper`

所以现在变成了：

```
(A <- A_t)
  ^    |
  |    v
Atesthelper 
```

这是一个循环依赖。是否有可能在 pom.xml 中以某种方式指定它`Atesthelper`只是测试构建目标的依赖项，而不是`A`模块本身？

所以构建顺序应该是：A、Atesthelper、A_t。即在同一个 pom 中指定的 A 和 A_t 不应同时构建。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-15T07:31:41.213

如果我理解正确，您的主要目标是重用测试类。A_t 和 Atesthelper 不是 Maven 项目，它们是测试。

让 Maven 从你的 src/test/java 创建一个 jar。见[http://maven.apache.org/guides/mini/guide-attached-tests.html](http://maven.apache.org/guides/mini/guide-attached-tests.html)

构建 A 后，您将获得 A.jar 和 A-tests.jar。A-tests.jar 将包括 Atesthelper 和 A_t。

将 B 的依赖项设置为 A-tests.jar ( `<type>test-jar</type>)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:05:41.343

您需要解决的问题是从*Atesthelper*到*A*的依赖关系，那么其他一切都会正常工作：*A*依赖于*Atesthelper*，*B*依赖于*Atesthelper*并且*A*和*B*都将包含源代码和测试。*Atesthelper*将包含在*A*和*B中的范围**测试*中。那是你的目标状态。

 **你怎么到那的？您需要将*Atesthelper*所依赖的项目提取到单独的项目中。通常，这些是接口或其他通用功能，无论如何都应该放入一个单独的项目中——我们称之为*ACommon*。所以你的目标布局应该是这样的：

```
ACommon <- Atesthelper
       ^    ^
       |   /
         A (and also B) 
```

*Atesthelper*依赖于*A*中的哪种功能？你能把它移到一个单独的项目（*ACommon*）吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:36:51.950

您没有粘贴您的 POM，我不确定我是否正确理解您，但我会尽力帮助您了解它。这是很常见的情况，通常应该这样解决：

您的支持测试的`Atesthelper`工件（可能是`jar`包装）应该在`src/main`目录中包含所有与测试相关的东西（因此类 in `src/main/java`，资源 in`src/main/resources`等），而不是`src/test`！它的所有依赖项，所以`A`，还有像 JUnit、EasyMock （测试支持类需要的所有东西）你用`compile`范围声明的东西，当然这是默认的。不要`test`在这里使用范围！最后，在`A`和`B`工件中，声明`Atesthelper`为`test`范围的依赖关系。

多年来，该解决方案对我来说非常有用。它对依赖项干净而直接（`<type>test-jar</type>`如果您知道我的意思，它们与基于 - 的解决方案相比是可传递的）。无论如何，只是使用它。你会很高兴的；）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T22:00:30.440

解决此问题的最简洁方法是将项目分开。像 Maven 这样的框架鼓励您将类和测试类放在一个项目中。例如，Eclipse 插件项目有单独的测试项目。制作听起来像是最好的解决方案`A_t`的子项目`A`，因为您可以在该测试项目中重用您想要的任何依赖项，而不必担心对`A`.

这种情况会更频繁地出现，您可能不想因测试的依赖关系而打扰您的项目设计。这些测试应该是独立的，并且不会影响您的课程设计。**

# visual-studio-2010 - Microsoft (TFS) 构建服务器 - 名称空间“...”中不存在类型或名称空间名称“...”（您是否缺少程序集引用？）

> ID：10174545
> 
> 赞同：9
> 
> 时间：2012-04-16T12:57:59.977
> 
> 标签：visual-studio-2010, tfsbuild

我正在为我们的团队建立一个构建服务器。

**背景**
我们正在使用 Microsoft Visual Studio 2010 Ultimate。我们的产品包含 C# 代码（主要）、外部 DLL 和 C 代码。我们正在使用 .Net 4.0 并拥有 70 多个项目。

我们正在使用我们代码的 3 个分支：

*   生产分支（当前发布的内容）
*   测试分支（热修复、错误修复、最终用户测试）
*   开发分支（添加新功能）

所有分支都在 TF 源代码控制之下。

**目标**
我们想要的是有一个构建服务器来构建和运行所有分支的所有单元测试，每天一次，构建服务器应该使用源代码控制中的代码。我们的目标是进行一些快速的标准错误检测。我们宁愿少维护构建服务器。

我们不会使用 buildserver 生成的构建，我们只想使用构建服务器来持续构建和单元测试我们的分支。

**设置内容**
目前设置了两个构建定义，一个用于测试分支，一个用于开发分支，两个构建定义都从源代码管理中获取代码（这部分工作正常），但这里是有趣的地方开始。

**问题**
Test Branche 可以很好地构建和运行单元测试。

由于（或类似 5 个）错误，开发分支无法构建：

```
The type or namespace name 'XXX' does not exist in the namespace 'YYY' (are you missing an assembly reference?) 
```

错误是项目 X 引用项目 Y。项目 X 和 Y 都是 C# .Net 4.0 项目，我们可以完全控制它们，X 和 Y 都编译为 DLL。项目 Y 包含项目 X 中的类正在实现的接口。

烦人的细节是项目 X 或 Y 的测试分支和开发分支没有区别。这两个项目在过去 3 个月中完全相同。

所以问题是，为什么它在测试分支中起作用，而在开发分支中不起作用？

**我已经测试过：**
- 项目被正确地相互引用。- 在我自己/我的任何同事开发机器上构建所有 3 个分支都没有问题（我们已经在 5 台不同的机器上进行了测试）。- 我试图删除整个 X 项目并重新创建它，但没有成功。- 我试图删除整个 Y 项目并重新创建它，但没有成功。- 我试图更改项目 X 项目及其类的命名空间，但没有成功。- 我试图更改项目 Y 项目及其类的命名空间，但没有成功。- （我什至重新启动了我的开发机器） - 在构建服务器设置为构建之后，所有更改都始终检查到源代码管理中。

**额外信息**
我一直在日志文件中挖掘，发现了一些有趣的细节，这是在开发分支中构建项目 X 的​​细节

```
Task "AssignProjectConfiguration"
  Project reference "..\..\A" has been assigned the "Debug|x86" configuration.
  Project reference "..\..\Y" has been assigned the "Debug|x86" configuration. (can see there is a project Y)
  Project reference "..\..\B" has been assigned the "Debug|x86" configuration. 
```

但随后在任务“ResolveAssemblyReference”中

```
Task "ResolveAssemblyReference"
  TargetFrameworkMoniker:
      .NETFramework,Version=v4.0
  TargetFrameworkMonikerDisplayName:
      .NET Framework 4
  TargetedRuntimeVersion:
      v4.0.30319
  Assemblies:
      System
      System.Xml.Linq
      System.Data.DataSetExtensions
      Microsoft.CSharp
      System.Data
      System.Xml
      System.Core
  AssemblyFiles:
      C:\Builds\1\A
      C:\Builds\1\B
(----- Missing project Y -----)
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll 
```

在同一任务的测试分支中的哪个位置

```
Task "ResolveAssemblyReference"
  TargetFrameworkMoniker:
      .NETFramework,Version=v4.0
  TargetFrameworkMonikerDisplayName:
      .NET Framework 4
  TargetedRuntimeVersion:
      v4.0.30319
  Assemblies:
      System
      System.Data.Entity
      System.Xml.Linq
      System.Data.DataSetExtensions
      Microsoft.CSharp
      System.Data
      System.Xml
      System.Core
  AssemblyFiles:
      C:\Builds\1\A
      C:\Builds\1\B
      C:\Builds\1\Y (There it is)
     C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll 
```

所以感觉就像它出于某种原因只是“忘记”了从项目 X 到项目 Y 的引用。

帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T15:41:22.680

我有同样的问题。

我花了几个小时才发现在这种情况下问题不是我的错:-)

[http://support.microsoft.com/kb/2516078](http://support.microsoft.com/kb/2516078)：

> 出现此问题的原因是 .NET Framework 库中的 Path.GetFullPath 中的错误。这是 Visual Studio 2010 中的一个已知问题

**症状：**

> ...当您尝试使用多个项目构建解决方案时，它们之间存在依赖关系，在特定条件下构建失败并显示以下错误消息。
> 
> 错误消息：“C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets (1200, 9)：警告：引用的项目‘当前目录中引用的项目的相对路径’不存在。”</p>
> 
> 当满足以下条件时，构建将失败并显示上述错误消息。
> 
> 1.  您有一个包含多个项目的解决方案，这些项目之间存在依赖关系。
> 2.  以下两个路径长度之和正好相加到 259 个字符 (= MAX_PATH – 1)
> 
> 1) 引用项目目录的路径。2) 从当前目录到引用项目的相对路径（= 引用项目的目录）。
> 
> 注意：MAX_PATH 是 Windows API 定义的最大路径长度，设置为 260 个字符。

**解决方法：**

> 要解决此问题，您可以更改路径长度并确保以下两个路径长度的总和不超过 259 个字符。
> 
> 1.  引用项目目录的路径。
>     
>     
> 2.  从当前目录到引用项目的相对路径（= 引用项目的目录）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:56:05.063

我最近遇到了同样的错误。在 VS2010 本地构建的解决方案很好，但在构建服务器上始终失败。最后，MSBuild 定义设置为**Release x86**配置，但抱怨的项目引用了*bin\x86\Debug*中的程序集，而不是*bin\x86\Release*。

验证引用了程序集的*发布*版本而不是*调试*版本（并根据需要进行更正）似乎对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T21:26:35.573

不幸的是，我的问题完全不同。

我正在构建相同公共代码的两个不同版本，一个用于 .Net4，另一个用于 Silverlight 5，具有相同的文件名 (.Framework.dll)。

由于默认情况下构建服务器将所有内容输出到同一文件夹，因此程序集的 Silverlight 版本最终覆盖了 .Net4 版本，因为 msbuild 决定稍后构建它。一旦构建解决方案中的下一个项目，这就会导致一个问题，该项目依赖于 .Net4 版本的 dll 上可用的某些类，但不依赖于 Silverlight 版本。

我最终将项目拆分为多个解决方案，并在构建定义“流程”选项卡上将“解决方案特定构建输出”选项设置为 true。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-09T03:20:28.127

我有一个非常相似的问题。我发现在配置管理器中，在发布配置下，平台设置为任何 CPU 并且构建复选框没有选中。

将平台设置为 x86（因为我的所有其他项目出于遗留原因都设置为此）并确保在此配置下将项目设置为 Build 解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T19:24:51.370

我刚刚遇到了类似的问题，最后是最后一次处理代码的开发人员决定在 obj\debug 目录中添加对某些 dll 的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-18T09:20:54.470

这是一个有点老的问题，但我刚刚遇到了类似的问题，在我的情况下，它是失败的项目（项目 A）的 .cproj 文件中错误引用的项目 ID（我们称之为 B）。最初，我从另一个解决方案中复制了项目 A，并将其包含在我现在正在使用的解决方案中。引用的项目 B 也出现在两个解决方案中，因此 Visual Studio 自动解析引用，即使在 A 的 .cproj 引用的项目 B 仍然指向我复制它的解决方案中的 B：

```
<ProjectReference Include="..\B.csproj">
  <Project>{F3006530-D421-4A89-AA8B-376DBAA31E03}</Project> - wrong Id!
  <Name>ProjectB</Name>
</ProjectReference> 
```

奇怪的是，Visual Studio 会忽略不正确的 Id 并且可能只使用路径，因此没有构建错误并且正确的 dll 会出现在项目 A 的 bin 中。不过，我的构建服务器上的 MSBuild 不会那么自由。要修复它，您可以在文本编辑器中编辑 .cproj 文件，或者简单地删除引用并将它们添加回来，确保它们在您当前的解决方案中。

# c# - 使用 OleDbDataAdapter 更新 DataTable C#

> ID：10174549
> 
> 赞同：1
> 
> 时间：2012-04-16T12:58:20.893
> 
> 标签：c#, datatable, dataadapter, oledbdataadapter, updatecommand

我一直在尝试使用**OleDbDataAdapter**更新**DataTable**但对命令感到困惑。因为我有时会从不同的表中获取信息，所以我不能使用 CommandBuilder。所以我试图在我的 on 上创建命令，但发现参数很难。DataTable.GetChanges 返回需要使用 INSERT 或 UPDATE 命令的行 - 我想我无法区分它们。我需要你完成以下内容：

```
DataTable dt = new DataTable();
OleDbDataAdapter da = new OleDbDataAdapter();
// Here I create the SELECT command and pass the connection.
da.Fill(dt);
// Here I make changes (INSERT/UPDATE) to the DataTable (by a DataGridView).
da.UpdateCommand = new OleDbCommand("UPDATE TABLE_NAME SET (COL1, COL2, ...) VALUES (@newVal1, @newVal2, ...) WHERE id=@id"); // How can I use the values of the current row (that the da is updating) as the parameters (@newVal1, @newVal2, id....)? 
```

**非常感谢你！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:09:49.863

数据适配器可以与数据表一起工作。因此，我实际上已经将我的组合成一个类并且工作得很好。除了我的东西的复杂性之外，这里有一个片段可能会帮助你。添加参数时，您可以从 DataTable 中识别数据来自的列源。这样，当一条记录在内部被标识为“已添加”或“已更新”（或“已删除”）时，当您构建 SQL 插入/更新/删除命令时，它将从相应行的列中提取数据。

例如。假设我有一个 DataTable，主键是“MyID”并且有列“ColX, ColY, ColZ”。我创建了我的 DataAdapter 并构建了我的选择、更新、删除命令，例如......（？是参数的占位符）

```
DataAdapter myAdapter = new DataAdapter()

myAdapter.SelectCommand = new OleDbCommand();
myAdapter.InsertCommand = new OleDbCommand();
myAdapter.UpdateCommand = new OleDbCommand();
myAdapter.DeleteCommand = new OleDbCommand();

myAdapter.SelectCommand.CommandText = "select * from MyTable where MyID = ?";
myAdapter.InsertCommand.CommandText = "insert into MyTable ( ColX, ColY, ColZ ) values ( ?, ?, ? )";
myAdapter.UpdateCommand.CommandText = "update MyTable set ColX = ?, ColY = ?, ColZ = ? where MyID = ?";
myAdapter.DeleteCommand.CommandText = "delete from MyTable where MyID = ?"; 
```

现在，每个人都必须有各自的“参数”。参数必须以与其对应的“？”相同的顺序添加。占位符。

// 虽然我在准备参数时输入了虚假值，但它只是为了 // 数据类型的目的。应用更改时，它确实会通过数据适配器进行更改

```
OleDbParameter oParm = new OleDbParameter( "myID", -1 );
oParm.DbType = DbType.Int32;
oParm.SourceColumn = "myID";  // <- this is where it looks back to source table's column
oParm.ParameterName = "myID";  // just for consistency / readability reference

myAdapter.SelectCommand.Parameters.Add( oParm ); 
```

根据参数类型对其余参数执行类似操作... char、int、double 等

再一次，我喜欢一个包装类，它在每个表的基础上处理管理......简而言之

```
public myClassWrapper
{
    protected DataTable myTable;
    protected DataAdapter myAdapter;
    ... more ...

    protected void SaveChanges()
    {
    }
} 
```

它比这更复杂，但在“SaveChanges”期间，数据表和 dataAdapter 出于各自的目的而同步。现在，刷新数据。我检查表的状态，然后您可以将整个表传递给 dataAdapter 进行更新，它将循环遍历所有更改的记录并推送相应的更改。但是，您必须捕获任何可能的数据错误。

```
myAdapter.Update( this.MyTable ); 
```

当它找到每个“更改”的记录时，它从列源中提取值，这些值由在传递给适配器的表中找到的参数标识，以进行处理。

希望这使您对遇到的问题有了很大的了解。

**---- 每个反馈的评论 ----**

我会将您的更新放在 try/catch 中，然后进入程序以查看异常是什么。错误的消息和/或内部异常可能会提供更多信息。但是，请尝试简化您的 UPDATE 以仅包含带有 WHERE “Key”元素的几个字段。

此外，我从第一部分答案中错过了这一点。您可能必须识别数据表的“PrimaryKey”列。为此，它是 DataTable 的一个属性，它需要表示表的主键的列数组。我所做的是...

```
// set the primary key column of the table
DataColumn[] oCols = { myDataTbl.Columns["myID"] };
myDataTbl.PrimaryKey = oCols; 
```

我会为您的 UPDATE 注释掉您的完整更新字符串及其所有参数。然后，使用我的示例（仅设置 2-3 列和 where 子句）简单地构建它

```
myAdapter.UpdateCommand.CommandText = "update MyTable set ColX = ?, ColY = ? where MyID=?";
Add Parameter object for "X"
Add Parameter object for "Y"
Add Parameter object for "MyID" 
```

选择像 int 或 char 这样的字段，这样它们在数据类型转换时出现问题的可能性最小，然后，一旦可行，尝试添加所有“int”和“character”列......然后添加任何其他列。另外，您要针对哪个数据库。有些数据库不使用“？” 作为命令中的占位符，但使用“命名”参数，有些使用

```
"actualColumn = @namedCol"
or even
"actualColumn = :namedCol" 
```

希望这能让你度过难关...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:21:58.760

您可以使用[String.Format 方法](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)替换`@newVal1, @newVal2, ...`代码中的 ，如下所示`da.UpdateCommand = new OleDbCommand(String.Format("UPDATE TABLE_NAME SET (COL1, COL2, ...) VALUES ({0}, {1}, ...) WHERE id=@id",OBJECT_ARRAY_CONTAINING_VALUES_FROM_THEDG));`

[Eidt 每条评论]

要处理`row[0]`，`row[1]`您需要一个循环，例如：

`for(i=0; i<rows.Count; i++) {`

    `da.UpdateCommand = new OleDbCommand(String.Format("UPDATE`...`",row[i]);`

    `da.Update(dt);`

`}`

# c# - system.net.sockets 中的同步连接超时

> ID：10174550
> 
> 赞同：0
> 
> 时间：2012-04-16T12:58:22.330
> 
> 标签：c#, .net, sockets

我想在 socket.connect() 方法中提供一定的超时，我不想使用套接字的 beginConnection 方法，因为需要同步连接到套接字，并且只需要在连接时超时，而不是发送和接收。他们有什么办法吗？

# c++ - X11 合成器/图层管理器

> ID：10174551
> 
> 赞同：1
> 
> 时间：2012-04-16T12:58:26.867
> 
> 标签：c++, qt, opengl, x11, layer

我有 n 个使用不同技术制作的 GUI 应用程序。

这就是我想做的-

1.  使用合成器将所有应用程序窗口渲染到屏幕外（如果我正确使用了该术语）。
2.  然后在应用调整大小、更改不透明度、角度等多项操作后，将它们组合成一个单独的图层来显示。

实现语言：C++ 和 XLib

有人可以告诉我应该如何进行吗？

* * *

另外，我也尝试过这样做，并在 Stack Overflow 的帮助下取得了成功——

[ [X11图层管理器](https://stackoverflow.com/questions/10069450/x11-layer-manager)​​]

1.  创建 n 层，每个应用程序一个，应用程序在其上绘制。
2.  有一个层管理器，它可以对这些层中的每一个执行操作（如调整大小、更改不透明度等），然后将它们组合成一个层。

* * *

如果我使用第一种方法（自己渲染应用程序输出而不是让他们自己这样做），在性能方面是否有优势？以及如何才能做到这一点。

# sql - 减去两个日期

> ID：10174553
> 
> 赞同：0
> 
> 时间：2012-04-16T12:58:36.620
> 
> 标签：sql, tsql

我想列出在特定天数内添加到表格中的学生。

```
@NumberOfDays INT = 15 -- When I list them the added subtraction result must match this result

SELECT S.Name, S.Surname, S.DateAdded
FROM STUDENT S
WHERE (SELECT CAST(GETDATE()-S.DateAdded) = @NumberOfDays) 
```

但这只是行不通。谁能帮帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:04:11.260

`DATEADD`负*增量*将扣除;

```
where S.DateAdded >= dateadd(day, -@NumberOfDays, getdate()) 
```

对于过去 15 天内添加的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:05:21.103

您应该使用函数 DATEDIFF (Transact-SQL)，以下应该可以工作：

```
DECLARE @NumberOfDays INT = 15 -- When I list them the added subtraction result must match this result

SELECT S.Name, S.Surname, S.DateAdded
FROM STUDENT S
WHERE DATEDIFF(day, S.DateAdded, GETDATE()) = @NumberOfDays 
```

有关此功能的更多信息：

[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T13:05:52.640

您需要以[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)这种方式使用该功能：

```
declare @numberofdays int
set @numberofdays = 15

SELECT S.Name, S.Surname, S.DateAdded
FROM STUDENT S
WHERE S.DateAdded >= dateadd(day, -@NumberOfDays, getdate()) 
```

这是一个带有它的[sqlfiddle](http://sqlfiddle.com/#!3/5d8ca/1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:25:19.513

```
SELECT S.Name, S.Surname, S.DateAdded 
FROM STUDENT S 
WHERE (SELECT months_between(GETDATE(), S.DateAdded) = @NumberOfDays) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:07:55.150

这个怎么样。

您可以在 sql 中使用[datediff](http://msdn.microsoft.com/en-us/library/ms189794.aspx)函数来获取以天为单位的日期差异。

```
DECLARE @numberofdays as int
set @numberofdays = 15

SELECT S.Name, S.Surname, S.DateAdded
from STUDENT S
where datediff(dd,S.DateAdded,getdate())= @numberofdays; 
```

# javascript - IE9 中 Magento 上的灯箱 JS 错误 - 无法获取属性“0”的值：对象为空或未定义

> ID：10174562
> 
> 赞同：2
> 
> 时间：2012-04-16T12:59:16.323
> 
> 标签：javascript, magento, internet-explorer-9, lightbox

从 IE 调试

行：2 字符：580 代码：0 错误消息：无法获取属性“0”的值：对象为空或未定义 URL：http: [//100repupgrade.clubnetdev.com/fresh//media/js/skin/reprebate /js/lightbox_cp.js](http://100repupgrade.clubnetdev.com/fresh//media/js/skin/reprebate/js/lightbox_cp.js)

可以看到问题的 URL：http: [//100repupgrade.clubnetdev.com/fresh/featured/the-hundreds-mike-jacket-grey.html](http://100repupgrade.clubnetdev.com/fresh/featured/the-hundreds-mike-jacket-grey.html)

在上面的 URL 中，如果单击“大小”下拉框，则会弹出调试错误，如上所示。这来自一个显然与这个版本的 Magento (1.6.2.0) 兼容的 Magento 扩展。它似乎在 js 文件中引用的部分是：-

```
while(this.imageArray[imageNum][0]!=imageLink.href){imageNum++;}} 
```

这只是 IE9（以及可能的其他 IE 版本）中的问题，在 Firefox、Chrome 等中没有问题。

出现问题时，单击下拉框应该只显示产品尺寸选项，但它会加载与灯箱关联的深色叠加层。

请问有人能够确定问题可能是什么以及如何解决吗？这让我难倒了大约两个小时。

非常感谢任何帮助-谢谢。

编辑：更多信息。

顺便说一下，此站点和代码的精确副本在[http://www.reprebate.com/featured/the-hundreds-mike-jacket-grey.html](http://www.reprebate.com/featured/the-hundreds-mike-jacket-grey.html)上运行良好。自从将 Magento 从 1.4 升级到 1.6 后，这个问题才变得明显，但灯箱扩展开发人员肯定认为他的扩展适用于 1.6...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T01:20:07.160

据我所知，您看到的是 Lightbox 或 Prototype 的问题，而不是扩展程序的问题。

我的建议是确保您拥有 Lightbox 2.05 和最新版本的原型 - 如果您想继续使用原型版本。

如果您乐于改用 jQuery 版本，[Lightbox 2.5](http://lokeshdhakar.com/projects/lightbox2/#download)是您的最佳选择

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T23:46:17.807

这里同样的问题。通过从prototype.js 1.6 升级到1.7 解决。

# mysql - 同步两个 MySQL 表

> ID：10174563
> 
> 赞同：0
> 
> 时间：2012-04-16T12:59:17.103
> 
> 标签：mysql, database-replication

有两个独立的数据库。持有用户信息（用户名、密码、地址等）的主机。从数据库只有一张表，其中用户名和密码。然后我想在我创建的主数据库上创建一个新用户，该用户名和密码也被添加到从数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:04:24.100

您可以使用[TRIGGER](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)或[STORED PROCEDURE](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)来执行此操作。

在你的情况下，我想你可以使用这样的东西（未经测试）：

```
CREATE TRIGGER `user_update` AFTER INSERT ON `User` 
FOR EACH ROW 
BEGIN
    INSERT INTO `mydb`.`UserLogin` (`id`, `UserName`, `Pass`) 
    VALUES (new.UserId, new.UserName, new.Password);
END$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:54:20.133

我们面临着类似的情况。我们使用 Percona Toolkit 的[pt-table-sync](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html)工具。使用起来相当简单。

# mysql - 开发网站时的 MySQL 许可证？

> ID：10174564
> 
> 赞同：0
> 
> 时间：2012-04-16T12:59:28.813
> 
> 标签：mysql, database, jsp

我想在 JSP 中创建一个网站，数据库将是 MySQL。我将在互联网上托管该网站。是否需要获得任何许可证才能在我的机器上开发它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:02:08.763

不，如果您不打算销售包括 mysql 数据库软件的产品，它是免费的。[在这里](http://www.mysql.com/about/legal/licensing/index.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:04:33.833

如[http://mysql.com/products/](http://mysql.com/products/)所述，MySQL 数据库有 4 个版本。

对于开发来说，使用社区版就足够了，它是在 GPL 许可下分发的，它是开源许可。

你什么都不需要。

# java - 使用 UserDetailsS ervice 时对数据库进行事务调用

> ID：10174565
> 
> 赞同：1
> 
> 时间：2012-04-16T12:59:29.443
> 
> 标签：java, spring, hibernate

我有一个标记为实体的用户类，它也实现了 UserDetails。我希望能够获取某个用户的一些属性，并根据它们的值返回`getAuthorities`方法中的特定角色。然而，其中许多属性都是延迟加载的，并且需要 Hibernate 事务。

我尝试了从制作用户类`@Transactional`到制作我使用的`UserDetailsService`and的任何方法。这些都不起作用！`RememberMeService``@Transactional`

我的所有其他 DAO 和服务类都映射为事务性工作（它们只是简单的类 - 除了顶部的 @Transactional 之外没有其他注释）

更新：这是用户类中覆盖的 getUserDetails

```
@Override
    public Collection<? extends GrantedAuthority> getAuthorities() {

        GrantedAuthority auth = new GrantedAuthority() {

            @Override
            public String getAuthority() {
                // TODO Auto-generated method stub
                return "ROLE_USER";
            }
        };

        ArrayList<GrantedAuthority> result = new ArrayList<GrantedAuthority>();

        if (options.size() > 0) {
            for (Option o : options) {
                result.add(createAuthority(Option.getStringType(o.type)));
            }
        }

        result.add(auth);

        return result;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:36:17.997

不是 Spring bean，因此`UserDetails`Spring 不会`@Transactional`在它上面寻找。

我需要查看堆栈跟踪，但我假设 getAuthorities() 正在由另一种`UserDetailsService`方法直接调用，即不通过事务代理。

将 in注入`PlatformTransactionManager`您的`UserDetailsService`并使用`TransactionTemplate`in`getAuthorities()`将您的数据库访问代码包装在事务中。

# php - 使用 PHP 将 ExcelSheet 导入 MySql

> ID：10174569
> 
> 赞同：-3
> 
> 时间：2012-04-16T12:59:43.020
> 
> 标签：php, mysql, cakephp, phpmyadmin

我的项目有问题。我想将 Excel 表直接导入 PHP 语言的 mysql 数据库，而不需要将 Excel 表转换为另一种格式。从过去的两周开始，我对此感到非常满意。所以请帮助我如何做到这一点。任何专家请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:05:37.273

可以参考这个问题：[Reading an Excel file in PHP](https://stackoverflow.com/questions/563670/reading-an-excel-file-in-php)

使用[PHPExcel](http://phpexcel.codeplex.com/)或[PHPExcel Reader](http://sourceforge.net/projects/phpexcelreader/)（或任何其他首选的 php lib...）读取 excel 文件

在读取文件时，将读取的数据插入数据库。

# iphone - 如何从 Sqlite 数据库中获取整数值？

> ID：10174580
> 
> 赞同：1
> 
> 时间：2012-04-16T13:00:07.790
> 
> 标签：iphone, objective-c, cocoa-touch, ios4, sqlite

我正在使用 Sqlite 数据库。

在我的数据库中

我有一些归档喜欢，发票，姓名，日期

我的 Invoiceno 数据类型是 INTEGER，

在选择查询中得到了这样的输出。

```
 Query:(
    {
     InvoiceNo = 1;
     Name : ABC
     Date = "2012-04-16 00:00:00";

    }
  ) 
```

但是，当尝试获取该 Invoice no 字符串时，它会给出 Diff。价值。

从数组获取发票到字符串的代码：

```
 NSString *str = [NSString stringWithFormat:@"%i",[[Query objectAtIndex:indexPath.row] valueForKey:@"InvoiceNo"]];
    NSLog(@"str:%@",str); 
```

在这里，我的发票号是 1，它给了我一个值“2387056”

请帮帮我..我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:07:40.130

```
NSString *str = [NSString stringWithFormat:@"%i",[[Query objectAtIndex:indexPath.row] valueForKey:@"InvoiceNo"]];
    NSLog(@"str:%@",str);
you have to replace above lines with below lines

NSString *str = [NSString stringWithFormat:@"%i",[[[Query objectAtIndex:indexPath.row] valueForKey:@"InvoiceNo"] intValue]];
    NSLog(@"str:%@",str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:08:31.773

[将 NSString 转换为 int](http://www.google.co.in/search?q=convert%20NSString%20to%20int&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&safe=on)

```
NSString *values = @"1";

int yourValue = [values intValue];

NSLog(@"Int Value : %d",yourValue); 
```

# c# - 使用字符串和替换

> ID：10174584
> 
> 赞同：0
> 
> 时间：2012-04-16T13:00:13.737
> 
> 标签：c#

好的所以我有这样的事情：

```
String str = "Have.Fun.Something";
String str2 = "asd.sad.saw.sa.Something"; 
```

我想从最后一个字符中删除所有内容，直到第一个“。” 所以输出将永远是

> 某物

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:03:33.533

这个怎么样：

```
str.Split('.').Last(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:02:43.290

你可以用这个

```
str = str.Substring(str.LastIndexOf('.')+1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:03:08.937

字符串实例上有一大堆有用的方法。您查看的最佳位置是[MSDN](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)。

在您的特定情况下，您可以使用 substring 和 lastindexof。如果情况更复杂，我可能会建议 RegEx，尽管这涉及更多。

```
String str2 = str.SubString(str.LastIndexOf('.') + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:29:09.930

无错误的方法

```
public static string Substring(string input)
{
    if (!String.IsNullOrEmpty(input))
    {
        int lastIndex = input.LastIndexOf('.');
        if (lastIndex != -1)
            return input.Substring(lastIndex + 1);
    }

    return input;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:05:34.247

您可以像这样使用下面的拆分功能：

```
String str = "Have.Fun.Something";
String str2 = "asd.sad.saw.sa.Something";

string[] Words= str.Split('.');

MessageBox.Show(Words[Words.Length-1].tostring()); 
```

像这样在下面

某物

与 String str2 = "asd.sad.saw.sa.Something"; 相同 谢谢..！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T13:07:11.483

您可以使用正则表达式 (regex)：

```
(?:.*)\.(?<myGroup>.*) 
```

应用上述正则表达式，您将拥有一个名为“myGroup”的组，其值位于最后一个点之后

就个人而言，我喜欢这个选项，因为如果需要，它可以为您提供进一步的可扩展性

如果您需要正则表达式方面的进一步帮助，请这样说

# c# - 为包含许多文件的文件夹设置 ACE 慢

> ID：10174585
> 
> 赞同：1
> 
> 时间：2012-04-16T13:00:18.080
> 
> 标签：c#, security, active-directory, file-security

我们创建了一个应用程序，它提供了在某个 Active Directory 组的 Windows 文件夹上设置递归“拒绝”的能力。基本上与进入 Windows 资源管理器中的属性对话框并单击安全性和添加具有拒绝权限的 AD 组相同。我们正在使用这段代码：

```
public void DenyAccessInherited(string DomainAndSamAccountName)
    {
        SetPermissionAndInherit(this.FolderPath, 
            NTFSPermission.PropagationFlags.CONTAINER_AND_OBJECT_INHERIT_ACE,
            NTFSPermission.NTFSPermission_FULL_CONTROL, NTFSPermission.ACETypes.ADS_ACETYPE_ACCESS_DENIED,
            DomainAndSamAccountName);
    }

public static void SetPermissionAndInherit(string FolderPath, PropagationFlags Inheritance, int Permission, ACETypes ACETypeAccessAllowedDenied, string DomainAndUsername)
    {
        AccessControlList dacl = new AccessControlList();
        SecurityDescriptor sd = new SecurityDescriptor();
        AccessControlEntry newAce = new AccessControlEntry();
        ADsSecurityUtility sdUtil = new ADsSecurityUtility();

        OnProgress(DomainAndUsername, FolderPath);
        sd = sdUtil.GetSecurityDescriptor(FolderPath, ADS_PATH_FILE, ADS_SD_FORMAT_IID);
        dacl = sd.DiscretionaryAcl;

        RemoveTrusteeFromDACL(dacl, DomainAndUsername);

        newAce.Trustee = DomainAndUsername;
        newAce.AccessMask = Permission;

        newAce.AceFlags = (int)Inheritance;
        newAce.AceType = (int)ACETypeAccessAllowedDenied;
        dacl.AddAce(newAce);

        sdUtil.SetSecurityDescriptor(FolderPath, ADS_PATH_FILE, sd, ADS_SD_FORMAT_IID);

        foreach (string File in Directory.GetFiles(FolderPath))
        {
            SetACE(File, DomainAndUsername, Permission, PropagationFlags.INHERITED_ACE, ACETypeAccessAllowedDenied);
        }
        foreach (string SubFolderPath in Directory.GetDirectories(FolderPath))
        {
            SetInheritedPermission(SubFolderPath, DomainAndUsername, Permission, ACETypeAccessAllowedDenied);
        }
    }

private static void SetInheritedPermission(string FolderPath, string DomainAndUsername, int PermissionFlags, ACETypes AccessFlags)
    {
        AccessControlList dacl = new AccessControlList();
        SecurityDescriptor sd = new SecurityDescriptor();
        AccessControlEntry newAce = new AccessControlEntry();
        ADsSecurityUtility sdUtil = new ADsSecurityUtility();

        SetACE(FolderPath, DomainAndUsername, PermissionFlags, (PropagationFlags)(PropagationFlags.CONTAINER_AND_OBJECT_INHERIT_ACE | PropagationFlags.INHERITED_ACE), AccessFlags);
        foreach (string File in Directory.GetFiles(FolderPath))
        {
            SetACE(File, DomainAndUsername, PermissionFlags, PropagationFlags.INHERITED_ACE, AccessFlags);
        }
        foreach (string SubFolderPath in Directory.GetDirectories(FolderPath))
        {
            SetInheritedPermission(SubFolderPath, DomainAndUsername, PermissionFlags, AccessFlags);
        }
    }

private static void SetACE(string FileOrFolder, string DomainAndUsername, int PermissionFlags, PropagationFlags InheritanceFlags, ACETypes AccessFlags)
    {
        AccessControlList dacl = new AccessControlList();
        SecurityDescriptor sd = new SecurityDescriptor();
        AccessControlEntry newAce = new AccessControlEntry();
        ADsSecurityUtility sdUtil = new ADsSecurityUtility(); sd = sdUtil.GetSecurityDescriptor(FileOrFolder, ADS_PATH_FILE, ADS_SD_FORMAT_IID);
        sd.Control = sd.Control;
        OnProgress(DomainAndUsername, FileOrFolder);

        dacl = sd.DiscretionaryAcl;
        RemoveTrusteeFromDACL(dacl, DomainAndUsername);

        newAce.Trustee = DomainAndUsername;
        newAce.AccessMask = PermissionFlags;

        newAce.AceFlags = (int)InheritanceFlags;
        newAce.AceType = (int)AccessFlags;
        dacl.AddAce(newAce);

        sdUtil.SetSecurityDescriptor(FileOrFolder, ADS_PATH_FILE, sd, ADS_SD_FORMAT_IID);
    } 
```

现在我们遇到了一个大文件夹，里面有很多html文档，大约12000个文件，上面的方法很慢。处理文件安全性大约需要 7 分钟。但是，当通过 Windows 资源管理器/安全性管理安全性时，只需要大约 20 秒，因此必须有一些方法可以在 C# 中对此进行优化。

编辑：当我省略递归并仅在顶级文件夹上设置 SecurityDescriptor 时，它下面的所有文件都没有拒绝 AD 组，只有顶级文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:43:09.317

我解决了。我完全抛弃了上面的代码并采取了另一种方式：

```
public override void DenyAccessInherited(string FolderPath,string DomainAndSamAccountName)
    {
        using (Impersonator imp = new Impersonator(this.connection.GetSamAccountName(), this.connection.GetDomain(), this.connection.Password))
        {
            FileSystemAccessRule rule = new FileSystemAccessRule(DomainAndSamAccountName, FileSystemRights.FullControl, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, System.Security.AccessControl.PropagationFlags.InheritOnly, AccessControlType.Deny);
            DirectoryInfo di = new DirectoryInfo(FolderPath);
            DirectorySecurity security = di.GetAccessControl(AccessControlSections.All);
            bool modified;
            security.ModifyAccessRule(AccessControlModification.Add, rule, out modified);
            if (modified)
                di.SetAccessControl(security);

        }
    } 
```

这是非常苗条和非常快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:15:56.357

嵌套文件夹和文件应继承父级的安全设置，因此您无需为所有人​​递归设置。尝试仅将其设置为根文件夹。

# ios - 将十六进制字符串转换为base64？

> ID：10174588
> 
> 赞同：0
> 
> 时间：2012-04-16T13:00:28.767
> 
> 标签：ios, nsstring, base64, nsdata

我正在尝试在 iPhone 上将十六进制字符串转换为 base64。十六进制是：

```
5289be07c5c7edcc18f3a02c7b81c110b8637f8b2ddbc29cdabcbd7e394c1695 
```

但我似乎无法得到这个的 base64 版本，即：

```
Uom+B8XH7cwY86Ase4HBELhjf4st28Kc2ry9fjlMFpU= 
```

我将如何获得这个 base64 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:12:02.963

由于您使用的是 SHA256（我也使用它），因此我假设您在将其转换为十六进制字符串之前获得了 NSData 输出。[获取该数据，并使用此问题](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)中显示的类别方法（投票最多的方法，实际上已内联代码）

# c# - 安全导航算子的最佳实现是什么

> ID：10174589
> 
> 赞同：1
> 
> 时间：2012-04-16T13:00:31.110
> 
> 标签：c#, nullpointerexception

C# 中是否有一个操作符，其行为类似于 groovy 中的安全导航操作符？

例如，在 groovy 中，如果 SessionData.CurrentSeminar 为 null，则执行此类操作将阻止它获得 NullPointerException。

```
int respId = SessionData.CurrentSeminar?.SeminCbaRespId; 
```

这是如何用 C# 完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:02:01.997

该运算符在 C# 中不存在。你可以用 inline-if 来做到这一点

```
int respId = SessionData.CurrentSeminar != null ? 
   SessionData.CurrentSeminar.SeminCbaRespId : default(int); 
```

或作为扩展方法。

```
var respId = SessionData.CurrentSeminar.GetSeminCbaRespId();

public static int GetSeminCbaRespId(this typeofCurrentSeminar CurrentSeminar)
{
   return CurrentSeminar != null ? CurrentSeminar.SeminCbaRespId : default(int);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:04:49.393

也许像这样的解决方法？

```
int respId= ReferenceEquals(SessionData.CurrentSeminar,null)?-1:SessionData.CurrentSeminar.SeminCbaRespId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:05:00.457

没有运营商，但你可以接近。试试[这个答案](https://stackoverflow.com/a/9825511/33080)中的一个：

```
int respId = SessionData.CurrentSeminar.NullOr(s => s.SeminCbaRespId) ?? 0; 
```

如果您需要链接其中的几个，这将变得特别有用：

```
var elem = xml.Element("abc")
    .NullOr(x => x.Element("def"))
    .NullOr(x => x.Element("blah"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:05:08.270

最接近的运算符是`?:`，但它没有那么含糖。
所以，你可以这样做：

```
int respId = SessionData.CurrentSeminar != null ? SessionData.CurrentSeminar.SeminCbaRespId : 0; // if 0 is the "null" value 
```

# jquery - jquery 插件的可链接性与每个就绪

> ID：10174590
> 
> 赞同：0
> 
> 时间：2012-04-16T13:00:37.207
> 
> 标签：jquery, jquery-plugins, each, ready, chainability

我正在尝试处理 jquery 插件中的**可链接性，并且它适用于**`click` [下面](http://jsfiddle.net/3gjRc/)的 jquery ，

```
$(document).ready(function(){

        $('.call-parent').parent_child({
            target: '.element'
        });

        $('.call-child-1').click(function(){
            $(this).parent_child().child_1();
            return false;
        });

        $('.call-child-2').click(function(){
            $(this).parent_child().child_2();
            return false;
        });

    });

(function($) {

        $.fn.extend({ 

            parent_child: function(options) {

                var defaults = {
                    target:''
                }

                var options = $.extend(defaults, options);
                var o = options;

                var $this = this;

                var $cm = this.click(function(ei) {

                    alert('parent');
                    $this.child_1();

                    return false;

                });

                $this.child_1 = function() {

                    alert('child 1');

                };

                $this.child_2 = function() {

                    alert('child 2');

                };

                return $cm;

            }
        })
    })(jQuery);​ 
```

但是当我使用`each`或`ready`在插件中时出现错误，例如，

```
$(document).ready(function(){

        $('.call-parent').parent_child({
            target: '.element'
        });

        $('.call-child-1').click(function(){
            $(this).parent_child().child_1();
            return false;
        });

        $('.call-child-2').click(function(){
            $(this).parent_child().child_2();
            return false;
        });

    });

(function($) {

        $.fn.extend({ 

            parent_child: function(options) {

                var defaults = {
                    target:''
                }

                var options = $.extend(defaults, options);
                var o = options;

                var $this = this;

                var $cm = this.each(function(ei) {

                    alert('parent');
                    $this.child_1();

                    return false;

                });

                $this.child_1 = function() {

                    alert('child 1');

                };

                $this.child_2 = function() {

                    alert('child 2');

                };

                return $cm;

            }
        })
    })(jQuery);​ 
```

错误信息，

> $this.child_1 不是函数 [中断此错误]

为什么我不能用`each`or做到这一点`ready`？还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:20:53.310

我重申我的评论作为答案，以便您接受：

函数表达式不会像`var f = function() { ... }`命名函数声明那样被提升`function f() { ... }`。因此，在`each`示例中，设置在声明之前`$cm`调用。`$this.child_1`在您的第一个示例中，该函数是在单击时调用的，因此它在执行时已经被解析。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T13:04:43.823

不要`$`在你的插件上使用。它与 jQuery 对它的使用相冲突。使用别的东西，`a`也许。

# ruby-on-rails - 在 rails 中手动添加 new_foo_path

> ID：10174595
> 
> 赞同：0
> 
> 时间：2012-04-16T13:00:45.040
> 
> 标签：ruby-on-rails

在 Rails 中，当您使用脚手架创建模型时，如下所示：

rails 生成脚手架用户名：字符串电子邮件：字符串

它将生成：模型、控制器和视图

例如，在 index.html.erb 文件中的视图有一个列出所有用户注册的表格。每个用户都有链接：显示、编辑、销毁

在 index.html.erb 中，这些由以下几行表示：

```
 <td><%= link_to 'Show', student %></td>
 <td><%= link_to 'Edit', edit_student_path(student) %></td>
 <td><%= link_to 'Destroy', student, :confirm => 'Are you sure?', :method => :delete %></td> 
```

还有一个新用户链接，表示为：

```
<%= link_to 'New Student', new_student_path %> 
```

但是，如果我在没有脚手架的情况下手动创建模型、视图和控制器，则不会生成这些“路径”。“路径”是指：new_student_path、edit_student_path(student)、student

如何手动生成这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:02:55.020

当您将资源添加到 `config/routes.rb`路径时，将自动生成。

假设您添加了一个`StudentsController`手动命名的控制器。要获取 new_student_path、edit_student_path 等，您需要将此行添加到`config/routes.rb`

```
resources :students 
```

这增加了七种宁静动作的路径。您可以在此 url 上阅读有关 rails 路由的更多信息：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:03:44.387

编辑您的`config/routes.rb`. 您可以添加例如：

```
resources :students 
```

[您可以在http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)看到更多信息

您可以在命令行中键入 rake routes 以查看在执行此操作之前和之后哪些路由可用。
基本上你会得到以下路线：

```
HTTP VerbPath   action  used for 
GET     /photos         index   display a list of all photos 
GET     /photos/new     new     return an HTML form for creating a new photo 
POST    /photos         create  create a new photo 
GET     /photos/:id     show    display a specific photo 
GET     /photos/:id/edit edit   return an HTML form for editing a photo 
PUT     /photos/:id     update  update a specific photo 
DELETE  /photos/:id     destroy delete a specific photo 
```

# iphone - NSFetchedResultsController 直到 saveContext 保存后才显示正确的排序？

> ID：10174601
> 
> 赞同：2
> 
> 时间：2012-04-16T13:00:53.073
> 
> 标签：iphone, sorting, random, tableview, nsfetchedresultscontroller

诚然，我是新人。欢迎批评。

经过一个月的尝试各种调整，问题仍然存在。为简单起见：有三个视图控制器，分别称为 A、B 和 C。A 有 2 个圆形矩形按钮，每个按钮都对 B 进行推送
。B 是一个由所描述的麻烦的“NSFetchedResultsController”填充的表格视图。B 有一个导航栏按钮（添加）来连接到 C，它接受两个数据字段并保存新项目，然后弹出视图 C 并显示视图 B。

从视图 C 添加新项目并返回到视图 B 会生成正确排序的列表。但是，如果我从视图 B 返回视图 A，然后再次转到视图 B，则列表未正确排序。每次出现 View B 时，它都会创建一个新的 Fetched Results Controller。返回 A，返回 B 视图未正确排序。重复 - 同样的问题。但返回 A，*等待 3 秒*，然后转到 B 并 woohoo 列表排序正确。我已经尝试将缓存设置为 nil，并设置为视图消失时删除的值。

视图 B 的每个后续新显示都将显示正确排序的列表。错误的排序顺序仅发生在上述顺序中 - 添加 1 个项目后，返回一个视图，然后重新显示 FRC 提供的表视图。

欢迎提出问题和建议。提前致谢。原始问题的其余部分如下所示；

我有一个`NSFetchedResultsController`按字母顺序填充表格视图，并转到另一个视图以添加项目。当我返回主表时，排序是随机的。我可以从视图退出到层次结构上的先前视图并重新加载视图，它仍然会随机排序。我可以连续重复几次。但是，如果我等待几秒钟，并按照相同的步骤操作，视图将正确排序。从保存的文件中读取时似乎发生了正确的排序，我理解这是“稍后”自动发生的。缓存设置为零。

我有一个`saveContext`调用，然后`reloadData`在添加项目的方法中调用表视图，试图强制数据保存然后重新加载表。我已经`NSFetchedResultsControllerDelegate`设置了视图。

有什么建议么？

Fetched Results Controller 的代码如下：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Player"];
    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor * lastNameSort = [NSSortDescriptor sortDescriptorWithKey:@"lastName" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    NSSortDescriptor * firstNameSort = [NSSortDescriptor sortDescriptorWithKey:@"firstName" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];

    fetchRequest.sortDescriptors = [NSArray arrayWithObjects: lastNameSort, firstNameSort, nil];

    NSFetchedResultsController * frc = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    frc.delegate = self;

    NSError *error = nil;
    if (![frc performFetch:&error]) {
        //  Handle the error
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    _fetchedResultsController = frc;
    return _fetchedResultsController;
} 

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller 
  didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:  
  (NSFetchedResultsChangeType)type   {

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
     Player * player = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = player.fullName;
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:
     (id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:   
      (NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
            break; 
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

# c++ - 使用tesseract 3.01的页面布局分析的奇怪问题

> ID：10174604
> 
> 赞同：1
> 
> 时间：2012-04-16T13:01:03.640
> 
> 标签：c++, image-processing, orientation, ocr, tesseract

我正在使用 tesseract 3.01，我使用枚举 PageSegMode 进行页面分割和方向，当我使用属性 PSM_AUTO_OSD 时，它仅在向左旋转 90 度时检测页面的方向，否则它会失败，谁能告诉我是什么问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:31:50.177

根据[tesseractmain.cpp](http://code.google.com/p/tesseract-ocr/source/browse/trunk/api/tesseractmain.cpp?r=554)它应该是`PSM_AUTO`：

```
tesseract::PageSegMode pagesegmode = tesseract::PSM_AUTO;
// ...

tesseract::TessBaseAPI  api;
api.SetPageSegMode(pagesegmode);
// ... 
```

尝试使用 cmd-line 工具重现您的问题，并为其`-psm 0`提供指导。

# zend-framework - 无法访问帮助文件

> ID：10174605
> 
> 赞同：1
> 
> 时间：2012-04-16T13:01:10.467
> 
> 标签：zend-framework

我的帮助文件 Acl.php 位于 library/Helper 中，我已将其包含在引导文件中，如下所示：-

类引导扩展 Zend_Application_Bootstrap_Bootstrap {

```
protected function _initPlugins()
{

    $helper= new Helper_Acl();

    // $helper->setRoles();

    // $helper->setResources();

    // $helper->setPrivilages();

    // $helper->setAcl();

} 
```

}

但它给出错误，说 - >致命错误：在Bootstrap.php中找不到类'Helper_Acl'。

下面是我的帮助文件

类 Helper_Acl {

```
public $acl;

public function __construct()

{

    $this->acl = new Zend_Acl();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:21:54.647

在 bootstrap.php 中，如果您的类位于库中的 Helper 文件夹中，请尝试此操作：

```
 protected function _initHelpers() {
    Zend_Controller_Action_HelperBroker::addPrefix("Helper_");
  } 
```

如果它不起作用告诉我，还有其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:39:34.363

您需要添加`Helper_`到您的自动加载器命名空间。通常，这是在`application/configs/application.ini`：

`autoloadernamespaces[] = "Helper_"`

# java - 什么参数'=='决定相等？

> ID：10174609
> 
> 赞同：-4
> 
> 时间：2012-04-16T13:01:26.210
> 
> 标签：java, operator-keyword

当我们用Java编写以下代码时：

> > 对象1 ==对象2；

运算符'=='在什么基础上决定相等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T13:02:31.387

如果`object1`和`object2`是*引用类型*，则`==`检查`object1`和`object2`是否都是对同一对象的引用。

有关完整详细信息，请参阅Java 语言规范中的[15.21 等式运算符。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:02:22.673

**对象1 ==对象2；**如果两者都**引用同一个对象，**将返回 true 。不要假设如果两个对象具有相同的内容或两者都是同一类的对象等，它将返回 true。

**当两个引用同一个对象时为**真**，否则为**假。****

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T13:04:11.603

```
Object a = new Object();
Object b = new Object();
System.out.println(a==b); //not the same
Object c = new Object();
Object d = c; // d points to the same reference
System.out.prinlnt(c==d); // the same 
```**

# email - Bugzilla email_in.pl 无需用户帐户

> ID：10174612
> 
> 赞同：0
> 
> 时间：2012-04-16T13:01:35.700
> 
> 标签：email, bugzilla

我想使用 bugzilla 作为问题跟踪支持工具。用户应该只使用电子邮件进行交流，而开发人员则使用 bugzilla。

所以第一步是为邮件创建新的错误，但失败并出现以下错误：

> 没有名为“test@test.com”的用户。要么您输入错误的名称，要么该用户尚未注册 Bugzilla 帐户。

有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:10:54.170

一种方法是将消息中的“发件人”电子邮件更改为您设置的某个常用帐户，以专门处理通过电子邮件提交的错误。

您需要在调用 email_in.pl [http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html之前执行此操作](http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T17:39:30.490

如果您碰巧使用 LDAP 身份验证并且您的目录包含所有预期用户，您可以使用 bugzilla/contrib 中的 syncLDAP.pl 脚本为目录中的每个人创建 bugzilla 用户。

我会提到一些问题，以防它对其他人有所帮助。

*   您需要安装[Net::LDAP](http://ldap.perl.org/) perl 模块。我用的是cpan。
*   确保您的 BZ_ROOT_DIR 在 /contrib/Buzgilla.pm 中正确设置
*   如果您在参数中配置了多个 LDAP 服务器，则脚本将阻塞。我暂时删除了除一台服务器之外的所有服务器。
*   我发现没有定义邮件属性的条目也会导致脚本阻塞，所以我做了以下更改：

    `my @login_name = @{ $value->{Bugzilla->params->{"LDAPmailattribute"}} };`

    至

    `my @login_name = @{ $value->{Bugzilla->params->{"LDAPmailattribute"}} } if defined $value->{Bugzilla->params->{"LDAPmailattribute"}};`

运行不带参数的脚本以查看各种用法（例如，只读，在不提交更改的情况下进行测试）。此外，由于这是一次性同步，您需要设置一个计划任务以在合适的时间间隔运行它。

我很抱歉这并没有完全消除对用户帐户的要求，但至少对于任何需要 LDAP/AD 用户能够通过电子邮件发送 bugzilla 以创建票证而无需手动创建 bugzilla 帐户的人来说，这是一个可行的解决方案。

# android - MediaPlayer not stopped when using device back button

> ID：10174613
> 
> 赞同：0
> 
> 时间：2012-04-16T13:01:36.987
> 
> 标签：android

I develop a music player application.

In my application media player played a group of songs sequencely. I used a back button to stop the mediaplayer, but if the back button is used the mediaplayer does not stoped.
How to stop the mediaplayer, when I pressed a back button?

Here my code:

```
Intent i = new Intent(player.this, main.class);
                    mp.stop();
                    mp.release();
                    array1.clear();                     
                    startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:21:09.660

```
 public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) 
        {
            if(mp != null)
            {
                mp.stop();
                mp.release();
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    } 
```

Please write above code in your activity.

# java - 如何获取moviefone.com中列出的剧院的邮政编码/剧院ID列表

> ID：10174617
> 
> 赞同：0
> 
> 时间：2012-04-16T13:01:47.003
> 
> 标签：java, movie

嗨，我需要找到美国所有剧院的放映时间。我收集到我可以使用[http](http://gateway.moviefone.com/movies/pox/closesttheaters.xml?zip=zipcode) ://gateway.movi​​efone.com/movies/pox/closesttheaters.xml?zip=zipcode 获取特定剧院的信息 .. 但我没有邮政编码和剧院 ID 的列表，有人可以帮我接着就，随即

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:28:16.063

我不完全了解您在做什么，但我怀疑您正在使用未发布的 Web API 来从 moviefone 服务中获取内容。

谨防。

如果这就是您正在做的事情，它很可能会违反 AOL 服务条款。

* * *

> 我将把这些数据用于网站中的一个功能（很快就会发布。抱歉，我不能提供关于这个网站的太多信息，因为我的客户要求我对其保密）。

您为客户这样做的事实并不能免除您对自己行为的法律责任。而且，事实上，它也可能使您的客户面临法律风险。如果 AOL 决定就此起诉某人，你们俩都可能被列为被告。

另一个可能的结果是 AOL 可以使用技术手段来防止您的系统窃取数据。

> 您能否告诉我任何其他提供剧院放映时间 API 的网站或网站列表，或者我可以每周从哪里获取数据。

不，我不能。

关键是，您正在收集的这些数据需要花费*大量**资金*来创建/组装/管理。AOL 会以一种或另一种方式至少支付该账单的一部分，并且他们不会善待某人（如您的客户）免费卸载他们并（可能）夺走他们的业务。

# sql - VBA 在 Access 2010 中跳过 If 语句

> ID：10174622
> 
> 赞同：0
> 
> 时间：2012-04-16T13:02:13.347
> 
> 标签：sql, vba, if-statement, conditional-statements, ms-access-2010

我试图做到这一点，以便当用户从组合框中选择一个人时，他们的完整详细信息会显示出来，但是当条件应该返回 true 时，如果语句继续给出 false 一些错误处理

```
Private Sub ComboOwnerID_Change()
Dim SelID As Integer
Dim rs As DAO.Recordset
Dim db As Database
Dim strSQL As String
Dim result As String
SelID = 0
SelID = Me.ComboOwnerID.Text
If Not (SelID = 0) Then
    If Not (SelID = Null) Then
        Set db = CurrentDb
        strSQL = "SELECT * FROM Owners WHERE OwnerID = " + SelID
        Set rs = db.OpenRecordset(strSQL)
        Do While Not rs.EOF
            result = ""
            result = rs!Title + ". "
            result = result + rs!Forname + " "
            result = result + rs!Surname
            rs.MoveNext
        Loop
        Me.lblOwnerName.Caption = result
    Else
        Me.lblOwnerName.Caption = "error"
    End If
Else
    Me.lblOwnerName.Caption = "error"
End If
End Sub 
```

它甚至还没有达到 SQL 位，所以我不知道这是否有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:05:05.860

不要在 VBA 中使用 .text 属性，它仅在控件具有焦点时可用。VBA 中的连接符是 & 不是 +。当其中一个字符串为 null 时使用 + 可以返回 null。

```
If Not (SelID = Null) Then
    Set db = CurrentDb 
```

你的意思是：

```
If Not IsNull(SelID) Then
    Set db = CurrentDb 
```

# c# - 如何使用 Response.Transmit()

> ID：10174624
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:02:21.723
> 
> 标签：c#, asp.net, response

这是我的一段代码：

```
if (objTbl.Rows.Count > 0)
{
    string attachment = "attachment; filename=Call-Details-Report-" + startDate.SelectedDate.Value.ToString("MM-dd-yyyy") + ".csv";
    Response.Clear();
    Response.ClearHeaders();
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "text/csv";
    Response.AddHeader("Pragma", "public");

    bool commaRequired = false;
    if (this.chkNET_NETWORKID.Checked)
    {
        Response.Write("Network ID");
        commaRequired = true;
    }
    if (this.chkNET_NETWORKNAME.Checked)
    {
        if (commaRequired)
        {
            Response.Write(",");
        }
        Response.Write("Network");
        commaRequired = true;
    }
} 
```

在上面的代码中，*objTbl*是我的数据表。我从数据表中读取数据并将其写入响应并获取文件以供下载。但是当我尝试下载大文件时出现错误。

程序执行期间内存不足。我听说了`response.transmit`。可以解决这个问题但是怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:23:31.183

TransmitFile 将指定文件直接写入 HTTP 响应输出流，而不将其缓冲在内存中。

像这样 ：

```
 context.Response.Clear();
        context.Response.ContentType = "application/octet-stream";
        context.Response.AddHeader("content-disposition", "attachment; filename=ym.jpg");
        context.Response.TransmitFile(context.Server.MapPath(@"~/ym.jpg"));
        context.Response.End(); 
```

# javascript - 停止选择框更改选定的选项颜色

> ID：10174628
> 
> 赞同：0
> 
> 时间：2012-04-16T13:02:36.137
> 
> 标签：javascript, html, css

我有一个下拉菜单，我用它来设计样式和图像。当用户选择一个选项时，它会变成蓝色。蓝色显示在图像顶部，看起来非常难看。如何通过 css 阻止这种行为？我不希望所选状态改变颜色。

我想要类似的东西

```
select:active {
    background:transparent;
} 
```

我也对javascript解决方案持开放态度......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:14:31.637

没有一致同意的、跨浏览器的、符合标准的解决方案来设置从选择框中选择的选项的样式。

每个浏览器处理输入字段的方式都不同，这在处理选择字段时最为适用。

您最好的选择是查看这个问题/答案：[是否可以设置选择框的样式？](https://stackoverflow.com/questions/1072239/is-it-possible-to-style-a-select-box)

# android - 具有多个文本视图的 Android Eclipse 线性布局不换行

> ID：10174631
> 
> 赞同：4
> 
> 时间：2012-04-16T13:02:41.760
> 
> 标签：android, eclipse, textview, android-linearlayout

我有一个水平线性布局，其中包含多个文本视图。布局的宽度为 fill_parent，高度为 wrap_content。我的问题是，当文本视图比我的设备允许的屏幕宽度长时，它会将最后一个文本视图粉碎到右侧，而不是将其换行（这是我想要的结果）。我认为 wrap_content 的高度可以解决这个问题。

我该怎么做才能使具有多个文本视图的线性布局在超出父级宽度的情况下包裹文本视图？

这是我的布局中的一个片段：

```
<LinearLayout
                                android:id="@+id/linearLayout20"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:paddingTop="3dip" >

                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:text="Car Info:  " android:id="@+id/textView023" android:layout_width="wrap_content" android:textStyle="bold" android:textSize="@dimen/item_main_text_size"></TextView>
                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:text="2005" android:id="@+id/autorental_item_caryear" android:layout_width="wrap_content" android:textSize="@dimen/item_main_text_size"></TextView>
                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:paddingLeft="3dip" android:text="Chevy" android:id="@+id/autorental_item_carmake" android:layout_width="wrap_content" android:textSize="@dimen/item_main_text_size"></TextView>
                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:paddingLeft="3dip" android:text="Rio" android:id="@+id/autorental_item_carmodel" android:layout_width="wrap_content" android:textSize="@dimen/item_main_text_size"></TextView>
                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:paddingLeft="3dip" android:text="-" android:id="@+id/textView2" android:paddingRight="3dip" android:layout_width="wrap_content" android:textSize="@dimen/item_main_text_size"></TextView>
                                <TextView android:layout_height="wrap_content" android:textColor="@color/black" android:paddingLeft="3dip" android:text="Red" android:id="@+id/autorental_item_carcolor" android:layout_width="wrap_content" android:textSize="@dimen/item_main_text_size"></TextView>
                            </LinearLayout> 
```

对于长文本视图，它呈现如下内容：

```
Car Info:  2002 Chevrolet Silverado - Pu
                                     rp
                                     le 
```

我希望它是这样的：

```
Car Info:  2002 Chevrolet Silverado - 
Purple 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:34:40.970

使用包含多个 TextView（或其他内容，例如按钮等）的 LinearLayout 无法获得您想要的结果：

每个水平/垂直线性布局都为其子视图提供水平/垂直边界，每个子视图都可以在其中做自己的事情。所以每个视图只能在无界的方向上扩展，在你的情况下是垂直的。

这是一个说明问题的示例。外部虚线表示屏幕边框。

```
| First Text- | Short text | Long text will take all the space possible | T |
| View with   |            |                                            | e |
| additional  |            |                                            | x |
| given       |            |                                            | t |
| maximum     |            |                                            |   |
| width. Long |            |                                            |   |
| text makes  |            |                                            |   |
| it expand   |            |                                            |   | 
| down        |            |                                            |   | 
```

您可以通过将所有文本放入单个文本视图来解决它。然后，如果你想制作一个漂亮的列表，你需要格式化你放入的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:48:26.090

您无法使用`LinearLayout`. 我认为在这种情况下最好的解决方案是使用`TextView`具有多种样式的单个（如果您需要文本的动态值）。在这里查看见解： [TextView 中是否可以有多种样式？](https://stackoverflow.com/questions/1529068/is-it-possible-to-have-multiple-styles-inside-a-textview)

如果您有静态文本，则可以在您的 strings.xml 内的 CDATA 块中包含一个符合 html 的值，并直接在您的布局中使用它。

# javascript - 要检查文本框中的值是否仅从自动完成值输入。

> ID：10174634
> 
> 赞同：0
> 
> 时间：2012-04-16T13:02:42.803
> 
> 标签：javascript, jquery, json, autocomplete, dojo

我正在开发一个 Web 应用程序。对于输入值，我正在使用从数据库中获取数据的自动完成功能。

```
$(document).ready(function hello(){
    var myVar1 = <%=request.getAttribute("variable1")%>
      $("input#assignedbyid").autocomplete({
    source: myVar1
      });
}); 
```

上面给出的示例给了我一组使用`JDBC`和`json`代码从数据库中获取的值。在任何时间点，in 的值`myvar1`如下所示：

```
["Kapil","Mayur","Abhinav","Chandan"] 
```

这是自动完成值的来源。我`input tag onfocus`调用的html 代码`function hello().`

```
<div id="lets"><input dojoType="dijit.form.ValidationTextBox" id="assignedbyid" name="assignedbyname"  required="true" onfocus="hello();" onblur="hi();"></div> 
```

现在我想要进行验证检查，检查用户输入的值是否来自自动完成值`("Kapil","Mayur","Abhinav","Chandan")`，而不是任何其他值。我有这个代码，如果没有输入任何值，文本框会抖动`(onblur="hi();")`。在其他部分，我想进行检查。

```
<script type="text/javascript"> 
 function periodical() {
            $('#lets').effect('shake', { times: 5 }, 200);
        };
          $(document).ready(function() {
            $('#lets').hide().css('display','').fadeIn(600);
                }); 
        function hi(){
            var dude = dojo.byId("assignedbyid").value;

            if(dude==""){
                periodical();}
            else{

            if(dude)
                myVar1

                alert("value entered");}
                };
</script> 
```

我的else部分暂时不完整。如何才能做到这一点 ？。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:12:44.517

如果你使用 jQuery，你可以使用[$.inArray()](http://api.jquery.com/jQuery.inArray/)方法：

```
if($.inArray(enteredValue, myArray) == false) { ... } // If enteredValue is not in myArray 
```

如果你只是使用纯 Javascript，它也很简单：

```
if(myArray.indexOf(enteredValue) == -1) { ... } // If enteredValue is not in myArray 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:10:04.917

```
var V = $("#myInput").val();
if (V=="Kapil"||V=="Mayur"||V=="Abhinav"||V=="Chandan") {
    //do something
} 
```

或者

```
var V = $("#myInput").val();
var myArray = ["Kapil","Mayur","Abhinav","Chandan"];

if ($.inArray(V, myArray)!=-1) {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:29:21.867

使用此示例代码进行自动完成。

示例代码..

```
 var url1 = sitepath+'opportunity/contact_autocomplete/';
        var related= '';
        $(function() {
            $( "#txtcontactid" ).autocomplete(
            {
                source:url1,
                select: function( event, ui ) 
                {
                    log( 
                         ui.item.id 
                      );
                }
            });
        }); 
```

# c# - 使用 Castle 在自定义会员提供程序中进行属性注入

> ID：10174636
> 
> 赞同：2
> 
> 时间：2012-04-16T13:02:44.107
> 
> 标签：c#, dependency-injection, asp.net-membership, castle-windsor, custom-membershipprovider

到目前为止，在阅读有关向自定义会员提供程序注入的可能性时，我发现了两种可能的方法：

一个如下：[http ://bugsquash.blogspot.com/2010/11/windsor-managed-membershipproviders.html](http://bugsquash.blogspot.com/2010/11/windsor-managed-membershipproviders.html)

在这里，作者基本上建议注册您的自定义提供程序，然后为成员资格设置一个相当有问题的 Windsor 适配器（我真的不喜欢它使用它从中获取的容器来实例化您的提供程序的方式`HttpApplication`，它最终与 Windsor 适配器一起包装）。

这是另一个类似的选项：[http ://code.google.com/p/webdotnet/source/browse/trunk/Steeg.Framework/Web/Security/MemberShipProvider.cs?r=2](http://code.google.com/p/webdotnet/source/browse/trunk/Steeg.Framework/Web/Security/MemberShipProvider.cs?r=2)

您只需在其中覆盖`Initialize()`并手动实例化依赖项。至少在第一个中，您不需要手动实例化依赖项（除了提供者本身）。

然后有一些建议使用某种服务定位器（MVC 或其他）

然后我遇到了 ninject`Membership.Provider`使用类似`_kernel.Inject(Membership.Provider)`. 这更接近我想要的，保留了最初吸引我使用 DI 的组合根概念。

如何使用城堡获得类似的结果？

更新：显然这与生命周期管理有关。 [使用 Ninject 将存储库注入自定义成员提供程序](https://stackoverflow.com/questions/5596441/inject-repository-to-custom-membership-provider-with-ninject)

那我应该选择＃1吗？至少我自己实例化了提供者。所以生命周期管理不应该是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:23:00.573

我不会使用隐式属性注入，因为如果类型未（正确）注册，容器将跳过该属性，而不是快速失败（更多信息[here](https://stackoverflow.com/questions/9896344/ioc-container-check-for-errors-at-compile-time/9897097#9897097)）。相反，我将使用服务定位器，但编写一个不包含任何逻辑的包装成员提供程序，而只是从服务定位器请求一个成员提供程序并调用该实现。[Jonas Gauffin](http://blog.gauffin.org)[为 MVC](http://blog.gauffin.org/2011/09/a-more-structured-membershipprovider/)写了一个这样的东西（使用`DependencyResolver`服务定位器），这非常好（也[可以在 NuGet 上使用](http://nuget.org/packages/griffin.mvccontrib)），但自己很容易做到。

虽然使用服务定位器被认为是一种反模式，但请记住，会员模型必须通过 web.config 进行配置，并且这部分系统不使用它`DependencyResolver.Current`本身。编写这样的 a`DependencyResolverMembershipProvider`也只是一些技巧，可以被认为是组合根的一部分，而不是应用程序的一部分。在组合根目录中调用容器不是问题。

# c# - C#格式化字符串

> ID：10174643
> 
> 赞同：2
> 
> 时间：2012-04-16T13:03:02.690
> 
> 标签：c#, string, format

我有一个看起来像的字符串

```
4/2/2012 12:00 AM
12/30/1899 10:00 AM 
```

我想格式化字符串，所以第一个日期/时间戳看起来像

> 2012 年 4 月 2 日

第二个应该看起来像

> 10:00 AM

我应该使用空格来分割字符串吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T13:05:10.473

对于完整的字符串 -->

```
string s= DateTime.Parse("4/2/2012 12:00 AM").ToString("d/M/yyyy hh:mm tt"); 
```

对于分隔的字符串 -->

```
string date=DateTime.Parse("4/2/2012 12:00 AM").ToString("d/M/yyyy");
string time = DateTime.Parse("4/2/2012 12:00 AM").ToString("hh:mm tt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:10:41.723

```
DateTime dt;
if (DateTime.TryParse("4/2/2012 12:00 AM",dt))
{
  String Result = "";
  if (DateTime.Date > DateTime.MinValue)
    Result = dateTime.ToString("d/M/YYYY");
  if (DateTime.TimeOfDay > TimeSpan.MinValue)
    Result += dateTime.ToString("hh:mm tt");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:05:32.347

看看[这里](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)
只需添加`.Tostring("")`和之间`""`添加模式，如网站所示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:06:43.543

使用以下功能：

```
 string dstr = "4/2/2012 12:00";        
     DateTime dtime=Convert.ToDateTime(dstr )
     string dt1 = dtime.ToShortDateString();//to get the date
     string dt2 = dtime.ToShortTimeString();//to get the time 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:08:16.170

```
DateTime foo = DateTime.Parse("4/2/2012 12:00 AM");
string date = foo.ToShortDateString();
string time = foo.ToShortTimeString(); 
```

# android - 如何恢复 AutoCompleteTextView 中的字符串

> ID：10174644
> 
> 赞同：0
> 
> 时间：2012-04-16T13:03:08.743
> 
> 标签：android, autocompletetextview

这是我的代码。我希望我的 AutoCompleteTextView 包含在单击 go_button 之前输入的字符串。我的 actv.setText 没有按预期工作。

```
final AutoCompleteTextView actv = (AutoCompleteTextView) findViewById(R.id.searchAutoCompleteTextView_feed);

        Button go_button = (Button) findViewById(R.id.goButton_feed);

        go_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                search_string = actv.getText().toString();

                actv.setText(search_string);

                Intent intent = new Intent(FeedListViewActivity.this, SearchActivity.class);
                startActivity(intent);
                Log.d("onClick", search_string);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:32:28.360

我在 FeedListViewActivity 中设置文本，但我看到的是 SearchActivity。应该在 SearchActivity 中设置文本。

# xcode - performSelector:withObject:afterDelay: - 一种传递对象以外的东西的方法？

> ID：10174649
> 
> 赞同：1
> 
> 时间：2012-04-16T13:03:28.993
> 
> 标签：xcode

我正在尝试使用此方法在第一个模态被解除后显示第二个模态......该方法本身工作正常，除了它需要我将对象作为参数传递而我真正想要做的是传递一个UIImageControllerSourceType 代替。我应该使用另一种方法来执行此操作，还是有一种简单的方法可以使 UIImageControllerSourceType 成为对象？我觉得这不应该太难，但我已经挣扎了一段时间了......

```
- (void)showModalTwoImageSearchViewControllerWithSourceType:(UIImagePickerControllerSourceType *)sourceType {

if (self.modalViewController) {        
    [self performSelector:@selector(showModalTwoImageSearchViewControllerWithSourceType:)
               withObject:sourceType
               afterDelay:0.1f];
    return;
}
// present second modal view - remembering to deal with cases of camera or photo library
if (sourceType == UIImagePickerControllerSourceTypePhotoLibrary) {
    //do one thing
}
// lets assume it was UIImagePickerControllerSourceTypeCamera
else {
    // do something else
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:09:39.337

`UIImagePickerControllerSourceType`最终是一个`NSUInteger`并且您尝试执行的方法（performSelector 方法）仅在其`withObject`参数中采用 Objective C 对象，而不是 C 类型或指针。

您可以通过`NSUIntegers`创建一个`NSNumber`对象并将整数填充到其中来传递。

要创建一个`NSNumber`对象，您可以像`NSNumber`'s[`numberWithUnsignedInteger`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithUnsignedInteger%3a)方法一样轻松地创建一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:16:13.540

UIImagePickerControllerSourceType 是一个枚举。将其用作对象的最简单方法是将其设为 NSNumber：

```
NSNumber *n = [NSNumber numberWithInt:sourceType]; 
```

# javascript - Kongregate“加入收藏”按钮回调

> ID：10174650
> 
> 赞同：2
> 
> 时间：2012-04-16T13:03:32.377
> 
> 标签：javascript, api, kongregate

只是检查是否有人使用kongregate。如果是这样，我有一个问题。

没有关于如何处理或响应“添加到收藏夹”按钮的信息。是否有任何回调或通知可能有助于做到这一点？

谢谢。

# wso2 - IBM Power 系统上的 WSO2 支持

> ID：10174661
> 
> 赞同：1
> 
> 时间：2012-04-16T13:04:05.133
> 
> 标签：wso2, aix, wso2carbon

AIX 或 Power 系统上的其他操作系统是否支持 wso2 平台？这特别适用于对 IBM JDK 的支持。我遇到了不同的错误，这些错误似乎是针对 IBM JDK 的。是否支持 IBM JDK？

谢谢，

* * *

我仍然遇到错误。最新的一个在 BPS 2.1.2 中：

> [2012-05-01 10:14:27,521] 信息 - 数据库 - 使用 DAO 连接工厂类 org.apache.ode.dao.jpa.BPELDAOConnectionFactoryImpl。线程“附件 33002”中的异常 java.lang.UnsupportedOperationException：无法获得能力，在 com.ibm.tools.attach.javaSE.Attachment.loadAgentLibraryImpl(Native Method) 在 com.ibm.tools.attach 处执行重新转换环境的处置.javaSE.Attachment.loadAgentLibrary(Attachment.java:252) at com.ibm.tools.attach.javaSE.Attachment.parseLoadAgent(Attachment.java:230) at com.ibm.tools.attach.javaSE.Attachment.doCommand(Attachment .java:140) 在 com.ibm.tools.attach.javaSE.Attachment.run(Attachment.java:101)

另一篇关于 esb 与 thrift 连接的帖子也给出了有关 oracle/ibm 中安全实现差异的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:24:04.193

WSO2 平台在 AIX 上进行了测试。并且还支持 IBM jdk 并进行了测试。

# facebook - 如何使用自定义弹出窗口发送 Facebook 应用程序请求？

> ID：10174668
> 
> 赞同：0
> 
> 时间：2012-04-16T13:04:31.393
> 
> 标签：facebook

我想要一个自定义的弹出窗口，我想从中发送应用程序请求？

我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:11:50.180

您可以通过 http graph api 发送应用程序请求，这只是一个 http 帖子...因此您可以为此构建自己的界面，请参阅[https://developers.facebook.com/docs/channels/](https://developers.facebook.com/docs/channels/)

```
<?php 
```

$app_id = YOUR_APP_ID; $app_secret = YOUR_APP_SECRET;

$token_url = "https://graph.facebook.com/oauth/access_token?" . “client_id=”。$app_id 。“&client_secret=”。$app_secret 。"&grant_type=client_credentials";

$app_access_token = file_get_contents($token_url);

$user_id = THE_CURRENT_USER_ID;

$apprequest_url =“https://graph.facebook.com/”。$user_id 。“/apprequests?message='INSERT_UT8_STRING_MSG'”。“&data='INSERT_STRING_DATA'&”。
$app_access_token 。"&method=post";

$result = file_get_contents($apprequest_url); echo("应用请求发送了吗？", $result); ?>

# wordpress - 在 wordpress 网站中添加 jquery 幻灯片时出现 jquery 冲突

> ID：10174672
> 
> 赞同：0
> 
> 时间：2012-04-16T13:04:40.313
> 
> 标签：wordpress, jquery-slider

我正在尝试在我的 wordpress 网站中添加一个 jquery 幻灯片。但它没有正常工作我使用一个 js 文件来执行此操作

```
(function(a){a.fn.slides=function(b){return b=a.extend({},a.fn.slides.option,b),this.each(function(){function w(g,h,i){if(!p&&o){p=!0,b.animationStart(n+1);switch(g){case"next":l=n,k=n+1,k=e===k?0:k,r=f*2,g=-f*2,n=k;break;case"prev":l=n,k=n-1,k=k===-1?e-1:k,r=0,g=0,n=k;break;case"pagination":k=parseInt(i,10),l=a("."+b.paginationClass+" li."+b.currentClass+" a",c).attr("href").match("[^#/]+$"),k>l?(r=f*2,g=-f*2):(r=0,g=0),n=k}h==="fade"?b.crossfade?d.children(":eq("+k+")",c).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1)}):d.children(":eq("+l+")",c).fadeOut(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing)}):d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+k+")").css({left:r,display:"block"}),b.autoHeight?d.animate({left:g,height:d.children(":eq("+k+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1}):d.animate({left:g},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1})),b.pagination&&(a("."+b.paginationClass+" li."+b.currentClass,c).removeClass(b.currentClass),a("."+b.paginationClass+" li:eq("+k+")",c).addClass(b.currentClass))}}function x(){clearInterval(c.data("interval"))}function y(){b.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),u=setTimeout(function(){clearTimeout(c.data("pause")),v=setInterval(function(){w("next",i)},b.play),c.data("interval",v)},b.pause),c.data("pause",u)):x()}a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var c=a(this),d=a(".slides_control",c),e=d.children().size(),f=d.children().outerWidth(),g=d.children().outerHeight(),h=b.start-1,i=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],j=b.effect.indexOf(",")<0?i:b.effect.replace(" ","").split(",")[1],k=0,l=0,m=0,n=0,o,p,q,r,s,t,u,v;if(e<2)return a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()}),a("."+b.next+", ."+b.prev).fadeOut(0),!1;if(e<2)return;h<0&&(h=0),h>e&&(h=e-1),b.start&&(n=h),b.randomize&&d.randomize(),a("."+b.container,c).css({overflow:"hidden",position:"relative"}),d.children().css({position:"absolute",top:0,left:d.children().outerWidth(),zIndex:0,display:"none"}),d.css({position:"relative",width:f*3,height:g,left:-f}),a("."+b.container,c).css({display:"block"}),b.autoHeight&&(d.children().css({height:"auto"}),d.animate({height:d.children(":eq("+h+")").outerHeight()},b.autoHeightSpeed));if(b.preload&&d.find("img:eq("+h+")").length){a("."+b.container,c).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var z=d.find("img:eq("+h+")").attr("src")+"?"+(new Date).getTime();a("img",c).parent().attr("class")!="slides_control"?t=d.children(":eq(0)")[0].tagName.toLowerCase():t=d.find("img:eq("+h+")"),d.find("img:eq("+h+")").attr("src",z).load(function(){d.find(t+":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5}),a("."+b.container,c).css({background:""}),o=!0,b.slidesLoaded()})})}else d.children(":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()});b.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return w("next",i),!1})),b.hoverPause&&b.play&&(d.bind("mouseover",function(){x()}),d.bind("mouseleave",function(){y()})),b.generateNextPrev&&(a("."+b.container,c).after('<a href="#" class="'+b.prev+'">Prev</a>'),a("."+b.prev,c).after('<a href="#" class="'+b.next+'">Next</a>')),a("."+b.next,c).click(function(a){a.preventDefault(),b.play&&y(),w("next",i)}),a("."+b.prev,c).click(function(a){a.preventDefault(),b.play&&y(),w("prev",i)}),b.generatePagination?(b.prependPagination?c.prepend("<ul class="+b.paginationClass+"></ul>"):c.append("<ul class="+b.paginationClass+"></ul>"),d.children().each(function(){a("."+b.paginationClass,c).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>"),m++})):a("."+b.paginationClass+" li a",c).each(function(){a(this).attr("href","#"+m),m++}),a("."+b.paginationClass+" li:eq("+h+")",c).addClass(b.currentClass),a("."+b.paginationClass+" li a",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$"),n!=q&&w("pagination",j,q),!1}),a("a.link",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$")-1,n!=q&&w("pagination",j,q),!1}),b.play&&(v=setInterval(function(){w("next",i)},b.play),c.data("interval",v))})},a.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var d=a(this),e=d.children(),f=e.length;if(f>1){e.hide();var g=[];for(i=0;i<f;i++)g[g.length]=i;g=g.sort(c),a.each(g,function(a,c){var f=e.eq(c),g=f.clone(!0);g.show().appendTo(d),b!==undefined&&b(f,g),f.remove()})}})}})(jQuery) 
```

当我使用此代码时出现错误`$('#slides').slides is not a function`错误。我检查了指向 js 文件的链接及其正确性。如果有人知道此错误是如何发生的，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:56:59.617

Wordpress 使用*无冲突*模式的 jQuery，这意味着该`$`快捷方式不可用。

```
jQuery(document).ready(function($) {
    // $() will work as an alias for jQuery() inside of this function
}); 
```

[http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

# wcf - WCF LINQ 查询因 lambda 表达式中的空引用而间歇性失败

> ID：10174674
> 
> 赞同：1
> 
> 时间：2012-04-16T13:04:44.650
> 
> 标签：wcf, linq, linq-to-entities, wcf-data-services, odata

我有一个非常复杂的数据库的 WCF 层，我使用 LINQ to Entities 读取该数据库。不过，最近出现了一个奇怪的错误。执行查询时我得到空引用，但只是有时（数据库中的数据没有改变）。我在下面描述了两种一般情况，一种或另一种失败。如果我重新启动访问服务的站点以重新初始化连接，则角色会切换。现在另一个案例失败了，而第一个案例有效。所以..我很困惑。有人会想到什么吗？

情况1：

```
string code = "xxx";
int version = 1;
Language lang = Language.en;

var languages = this.uc.MainTable
  .Expand(a => a.Program.Area)
  .Expand(a => a.Plang)
  .Expand(a => a.Lang)
  .Where(a => 
    a.Program.Code.Equals(code, StringComparison.OrdinalIgnoreCase) 
    && a.Lang != null
    && a.Program.Version == version)
  .ToList();

var language = languages.Where(a => a.Lang.LangID == (int)lang).SingleOrDefault(); 
```

在上述情况下，枚举时`language`，`a.Lang`为空，方法失败。同样，这只是有时。使用完全相同的输入参数和数据库内容，重新初始化服务连接后查询再次工作。当第一个成功时，第二个案例似乎失败了，反之亦然。另一种情况是这样的：

案例二：

```
Language lang = Language.en;

var programs = this.uc.SomeTable
  .Expand(a => a.Program)
  .Expand(a => a.Plang)
  .Expand(a => a.Program.Level)
  .Where(a =>
    a.Program.Version == 1
    && a.LangID == (int)lang
    && a.Program.Occasion.Any(b => b.StatusID != 3));

programs = programs.Where(a => a.Program.Occasion.Any(b => b.Date == "2010-01-01")); 
```

`programs`枚举时，在`a.Program.Occasion`最后一行为空并导致空引用。同样，这是间歇性的，尽管数据库和参数相同。

我很感激即使是对可能导致这种情况的最轻微的想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:06:16.937

在这里回答：http: [//social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/9fb8648a-fb4f-4ebd-ad5a-c911cd00a812](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/9fb8648a-fb4f-4ebd-ad5a-c911cd00a812)。

这通常是由 DataServiceContext.MergeOption 引起的。默认设置意味着客户端在第一次查询后永远不会更新实体。这意味着即使在查询中展开其他查询，它们也不会填充导航属性。解决方法是将 MergeOption 设置为 OverwriteChanges。

# php - 使用 MySQL 和 PHP 的唯一条目验证

> ID：10174675
> 
> 赞同：0
> 
> 时间：2012-04-16T13:04:49.293
> 
> 标签：php, mysql, database, select

我需要验证注册网站的用户是否输入了一个唯一的 16 位数字，在他/她之前没有其他人输入过。

相关的数据库信息是16位数字存储在一个名为的列`card1`中，整个表的名称是`users`，用户输入的数字存储在`$card1`。

这是我到目前为止...

```
$query2 = "SELECT card1 FROM users WHERE card1='$card1' LIMIT 1";
$result2 = smart_mysql_query($query2);

if (mysql_num_rows($result2) != 0)
{               
    header ("Location: register.php?msg=exists");
    exit();
} 
```

这个想法是它会找到数据库中已经存在的任何示例，如果找到重复项，它将显示错误消息。

问题是它继续允许用户注册（将他们的注册表提交到数据库），即使有重复也是如此。在这段代码之后是对数据库的插入调用，其中包含从表单中收集的所有用户信息。

**注意：**我对处理 PHP 错误消息不是很熟悉，我使用的只是我在示例代码的另一个实例中找到的一个示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:08:19.527

像这样制作 if 语句：

```
$query2 = "SELECT * FROM users WHERE card1='$card1'";
$result2 = mysql_query($query2);

if ($result2 !== false)
{               
   header ("Location: register.php?msg=exists");
   exit();
} 
```

应该解决问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:10:27.443

执行此操作的正确方法是在包含用户输入的数字的字段上添加唯一索引 ( `card1`)。

然后，您将尝试`INSERT`新行而不先尝试`SELECT`它，如果此操作失败，您将用户重定向到`msg=exists`页面。这让数据库可以处理重复检测并消除您方法中固有的问题 - 如果两个用户同时提交相同的号码，则无法保证`SELECT`->`INSERT`会检测到它。唯一索引将检测并防止这种情况。

这也将具有减少数据库流量的优势，因为只需执行一个查询即可实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T07:30:10.410

try this one

```
$query2 = "SELECT card1 FROM users WHERE card1='".$card1."' LIMIT 1";
$result2 = mysql_query($query2);

if (mysql_num_rows($result2) > 0)
{               
    header ("Location: register.php?msg=exists");
    exit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:11:07.870

首先，在该列的数据库中创建唯一索引。这是最佳实践：

```
ALTER TABLE `users`
ADD UNIQUE INDEX `card1` (`card1`); 
```

我应该修改你的SQL如下：

```
$query2 = "SELECT COUNT(1) FROM users WHERE card1='$card1'";
$res = mysql_query($query2);

$data = mysql_fetch_array($res);

if ($data == 1)
{               
   header ("Location: register.php?msg=exists");
   exit();
} 
```

它将检查表中是否存在行并返回 0 或 1。

如果存在（1），那么它将重定向您。

# java - 想要打开日历日期做一些计算

> ID：10174689
> 
> 赞同：0
> 
> 时间：2012-04-16T13:05:28.167
> 
> 标签：java, android, calendar

我从函数中获取时间（以秒为单位），我必须将它进一步移动到几天，从日期 2/11/1970 00:00:00 到我得到的时间（以秒为单位）将被覆盖。请帮助我如何实现这一目标，或帮助我计算日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:08:10.303

不确定我是否完全明白你的问题，但如果我明白了，你是否尝试过[Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)对象？

这是一个示例，说明如何以毫秒为单位计算时间：

```
Calendar cal = Calendar.getInstance();
Date date = new Date();
cal.setTimeInMillis(date.getTime());
int dayOfYear = cal.get(Calendar.DAY_OF_YEAR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:10:53.760

查看[Joda](http://joda-time.sourceforge.net/)日期时间 API。IT 应该满足您的需求。[这](http://joda-time.sourceforge.net/quickstart.html)应该为您指明正确的方向。

# c# - 反转未填充的几何图形

> ID：10174697
> 
> 赞同：1
> 
> 时间：2012-04-16T13:05:46.923
> 
> 标签：c#, geometry, intersect

对于某种蒙版对话框，我希望能够在 C# 中反转几何。例如，我想反转一个矩形。我已经为填充的矩形工作，但对于未填充的矩形同样不起作用。

例如，如果我在画布上有这个矩形：

[![长方形](../Images/06e3ed19f996fa105fa79ef0f0b16b94.png)](https://i.stack.imgur.com/qT31R.png)

我用以下代码反转这个矩形：

```
RectangleGeometry line = new RectangleGeometry(_myRectangle);
RectangleGeometry geo = new RectangleGeometry(_myCanvasRectangle);                               
PathGeometry intersect = Geometry.Combine(line, geo, GeometryCombineMode.Xor, null);
drawingContext.DrawGeometry(
    new SolidColorBrush(Color.FromArgb(99, _myObjectColor.R, _myObjectColor.G, _myObjectColor.B)),
    new Pen(new SolidColorBrush(_myObjectColor), _myActualLineWidth),
    intersect
); 
```

我得到以下结果（灰色区域是填充区域）

[![填充矩形](../Images/601192fec6b3169a92121cd68177610e.png)](https://i.stack.imgur.com/K2Ax7.png)

有没有人可以实现只保留矩形（第一张图像中的黑线）并返回其余部分（填充灰色）的结果？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:40:44.370

所以我自己找到了解决方案：似乎 C# 下的几何图形总是填充“形状”。但是您可以使用该`GetWidenedPathGeometry`方法获得轮廓（即使具有所需的笔画粗细！）！我的示例如下所示：

```
 RectangleGeometry outerRect = new RectangleGeometry(_myRectangle);
            RectangleGeometry geo = new RectangleGeometry(_myCanvasRectangle);
            PathGeometry outerRectLine = outerRect.GetWidenedPathGeometry(new Pen(new SolidColorBrush(Colors.White), _myActualLineWidth));

            PathGeometry intersect = Geometry.Combine(geo, outerRectLine, GeometryCombineMode.Exclude, null);

            drawingContext.DrawGeometry(
                new SolidColorBrush(System.Windows.Media.Color.FromArgb(99, _myObjectColor.R, _myObjectColor.G, _myObjectColor.B)),
                new System.Windows.Media.Pen(new SolidColorBrush(Colors.White), ActualLineWidth),
                intersect
                ); 
```

希望这对其他人有帮助！

# orchardcms - 永久链接冲突

> ID：10174699
> 
> 赞同：0
> 
> 时间：2012-04-16T13:05:50.190
> 
> 标签：orchardcms

我正在尝试将 Bodypart 和 Autoroutpart 添加到我的小部件中。当我尝试在区域中添加此小部件时，出现以下异常。永久链接冲突。"" 已经为之前创建的 PushWidget 设置了，所以现在它有 slug "-2"。有人可以解释一下我做错了什么。非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:13:28.723

如果要在任何东西上使用 Autoroute，则需要配置用于生成新 URL 的模式，方法是转到内容类型编辑器并部署 Autoroute 的设置。您当前拥有的模式可能是空的，或者具有评估为空字符串的标记。将其更改为对此上下文有意义的模式。

# extjs - ExtJS4 - 每个面板实例存储？

> ID：10174703
> 
> 赞同：6
> 
> 时间：2012-04-16T13:05:54.090
> 
> 标签：extjs, extjs4, extjs-mvc

我对 Ext 中的 MVC 模式真的很陌生。我有一个标签面板，其中包含同一组件的多个实例（我们称之为产品），每个实例都应该在打开时调用服务器，并带有一个 id 参数。

现在，为了创建这些选项卡 - 我在 Product 控制器中使用它创建了一个新的视图实例，但我觉得它*真的*不正确。

```
createMainView: function (opts) {
    return Ext.widget("productDisplay", opts);
} 
```

我从我的“主”控制器中调用它，如下所示：

```
var tab = this.application.getController("Products")
    .createMainView({ productId : id, closable: true })

tabs.add(tab);
tabs.setActiveTab(tab); 
```

正确使用视图的多个实例的正确方法是什么，每个实例都有一个存储和行为的实例（通过控制器）。

我可以为他们使用一个命名商店（在 app/store/product.js 下有一个 js 文件）吗？

我应该`load`从控制器手动调用商店（以传递`productId`），还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:58:47.470

这是一个非常广泛和有趣的问题，需要大量而彻底的解释（您可以在 Sencha.com 的指南和手册中找到顺便说一句）。我想强调几点，以便您可以开始：

1.  存储通常是全局对象。通常，您不会保留一个商店的两个实例。如果您需要在几个不同的视图中显示来自该存储的信息，您可以使用过滤（本地或远程）。唯一需要克隆存储的情况是，如果您想同时在 2 个以上不同的视图中显示该存储的不同*信息*。

2.  控制器通常由主应用程序对象生成。您不必做任何特别的事情 - 只需在`controllers: []`属性中列出它们。然后在应用程序启动时生成（在创建和渲染视图之前）。记住这一点。

3.  如果您有模态视图 - 可以手动创建它并重新使用它或销毁并稍后重新创建。您可以向创建这些视图的控制器添加过滤和加载。如果需要，您可以为不同的选项卡重复使用相同的视图/控制器对象。

4.  如果您的视图呈现一个对象的一个​​实例（例如每个选项卡上显示一个产品） - 不要将商店附加到这些视图。只需将它们传递给单个模型（记录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:41:21.760

我建议在视图的 initComponent 方法中创建仅与该视图实例相关的存储。

您的控制器的`control`处理程序应该以一种可以区分哪个视图分派事件的方式进行编码。这应该不会太难，因为几乎所有视图事件都包含对触发事件的组件的引用。然后，您可以使用相对查询选择器，例如：`myEventFiringComponent.up('anotherComponent')`或`myEventFiringComponent.down('anotherComponent')`在需要时在同一视图中获取不同组件的句柄。

请参阅[此帖子](https://stackoverflow.com/a/10417006/1062992)以获取完整说明。

# linux - linux ftp mget 使用 ftp MULTI-FETCHING 或 cURL

> ID：10174706
> 
> 赞同：0
> 
> 时间：2012-04-16T13:06:03.293
> 
> 标签：linux, macos, curl, ftp

我需要允许新用户每天对许多具有相同文件名格式“*.zip”的文件进行 ftp mget。在 ftp 站点上，下载目录是 /data/autouploaded。

虽然有很多方法可以做到这一点，但我想尝试使用带有 mac/linux ftp 命令或 curl 命令的多获取功能的 shell 脚本。

我几乎可以让 ftp 命令工作：

```
ftp ftp://user:password@ftp.mycompany.com/%2fdata/autoupload 
```

但这说“没有这样的文件'自动上传”所以添加尾部斜杠：

```
ftp ftp://user:password@ftp.mycompany.com/%2fdata/autoupload/ 
```

这只是在 ftp 站点上打开一个交互式 shell。

那么，如何在 url 末尾添加文件名作为 glob 呢？没有。尝试进行上传（放置）。

那么，方法 1。我如何使用 ftp 命令说 mget？

或者，我可以使用 curl。只是，我找不到有关 curl 的 mget 的信息。文件名不是连续的，因此 curl 中的范围功能没有意义。

建议？帮助？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:11:03.827

一个快速的谷歌搜索给了我这个链接：[Scripting FTP access](http://www.stratigery.com/scripting.ftp.html)

快速总结是用于`<<`向 FTP 客户端注入命令。

# css - 浮动上不需要的边距

> ID：10174707
> 
> 赞同：0
> 
> 时间：2012-04-16T13:06:03.340
> 
> 标签：css

如何修复“正确” div 的不需要的边距。

右侧浮动 div 的边距就像您在此处看到的那样：JSFIDDLE：http: [//jsfiddle.net/s9Ssh/1/](http://jsfiddle.net/s9Ssh/1/)

我想要达到的效果是保持 .mid 层始终居中，无论侧 div 文本的长度如何。

HTML：

```
<div class="main">

<div class="left">left</div>

<div class="mid">

    <a href="#">Vpis podjetja</a>
    &nbsp;|&nbsp;
    <a href="#">Iskanje</a>

</div>

<div class="right">right</div> 
```

CSS：

```
 .main {

    text-align:center;
    width:100%;

}

.left {

    float:left;

}

.mid {

}

.right {

    float:right;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:11:25.867

也许这会有所帮助：http: [//jsfiddle.net/sbhomra/s9Ssh/4/](http://jsfiddle.net/sbhomra/s9Ssh/4/)

我基本上已经绝对定位了左右 div，并通过使用将中间 div 设置为居中`margin:0 auto`。

## 编辑

修复了左右 div 的填充，因此它们不会太靠近页面的一侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:11:14.647

尝试添加`display: inline-block;`到`.mid`元素

小提琴示例：http: [//jsfiddle.net/XSdJA/](http://jsfiddle.net/XSdJA/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:11:50.867

[http://jsfiddle.net/s9Ssh/3/](http://jsfiddle.net/s9Ssh/3/)

将右侧浮动元素移动到标记中的中间元素之前。它出现在新行上，因为中间元素没有浮动（并且是块级元素）。

或者，您也可以浮动中间元素或将其设置为内联/内联块。

编辑：虽然要澄清一下，如果你浮动中间元素，那么你必须稍微摆弄一下css，因为它会破坏你的文本对齐。:P

# javascript - HTML5 历史记录：如何查看弹出的 URL（即，我们点击后退按钮时所在的页面）

> ID：10174711
> 
> 赞同：0
> 
> 时间：2012-04-16T13:06:18.573
> 
> 标签：javascript, html, browser-history

我正在使用[HTML5 历史 API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

我注意到如果：

*   如果我在一个名为 /first 的页面上
*   我使用 pushState 到 /second
*   然后点击返回按钮

window.onpopstate() 的事件处理程序返回 /first 的状态，如文档所述。

为了从 /second 转换到 /first，**我想查看弹出的 URL - 即在这种情况下是 /second**。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:43:40.293

代替正确的答案，我实施了以下解决方法：

*   加载页面时在元素上使用`data-urlhack`属性`<body>`
*   在`onpopstate()`处理程序中，检查这个属性的值，这样我就可以从这个页面（点击后退按钮的地方）转换到后退按钮发送给我们的页面。

还要确保加载的页面`onpopstate()`不要尝试`pushState()`自行推送。

# javascript - jQuery价格滑块

> ID：10174712
> 
> 赞同：1
> 
> 时间：2012-04-16T13:06:28.903
> 
> 标签：javascript, jquery, slider

我的网站需要一个简单的 jQuery 价格滑块。从 0 英镑到 1000 英镑不等。

假设浏览器将滑块设置为 100 英镑（例如），然后我需要一个立即购买按钮，将滑块设置的金额转移到 Paypal！

我对javascript没有很多经验有什么想法吗？

提前致谢，

尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:09:38.923

使用 jQuery UI 滑块：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

在滑块的更改事件中，您可以更新包含金额的隐藏表单字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:10:01.583

我会考虑看看 HTML 5 滑块。应该在您正在寻找的线路上。

这是一个快速教程：

[http://webhole.net/2010/04/24/html-5-slider-input-tutorial/](http://webhole.net/2010/04/24/html-5-slider-input-tutorial/)

# android - Android图库：拉伸和重叠缩略图

> ID：10174714
> 
> 赞同：0
> 
> 时间：2012-04-16T13:06:35.320
> 
> 标签：android, android-layout, android-imageview, android-gallery

我正在做一个 Android 画廊，我需要`ImageView`让它全屏显示图片，并且在它之上 - 这意味着它必须与 ImageView 重叠 - `Gallery`。

问题是现在`ImageView`占据了未被占据的部分`Gallery`，但我不知道如何实现这一点。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/GalleryImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center_horizontal"
        android:scaleType="fitXY" />

    <Gallery
        android:id="@+id/GalleryThumbnails"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/GalleryImage" />

</RelativeLayout> 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:12:16.177

您可以使用 layout_alignTop=[Reference] 来实现该效果。

> 使该视图的上边缘与给定锚视图 ID 的上边缘匹配。

```
<ImageView
    android:id="@+id/GalleryImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center_horizontal"
    android:scaleType="fitXY" />

<Gallery
    android:id="@+id/GalleryThumbnails"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/GalleryImage" /> 
```

证明它有效

![在此处输入图像描述](../Images/52409b57687c4d1c9ad025c82c2690a0.png)

# css - 如何在浏览器中检查和调整 :before 和 :after 伪元素？

> ID：10174719
> 
> 赞同：97
> 
> 时间：2012-04-16T13:06:48.600
> 
> 标签：css, firefox, google-chrome, firebug, google-chrome-devtools

我用 :after 伪元素创建了一些相当精细的 DOM 元素，我希望能够在 Chrome Inspector 或 Firebug 或同等产品中检查和调整它们。

[尽管此WebKit/Safari 博客文章](http://www.webkit.org/blog/1091/more-web-inspector-updates/)（日期为 2010 年）中提到了此功能，但我在 Chrome 或 Safari 中都找不到此功能。Chrome 至少有检查 :hover、:visited 和 :active 状态的复选框，但 :before 和 :after 无处可见。

此外，[这篇博](http://meyerweb.com/eric/thoughts/2009/11/03/pseudo-phantoms/)文（日期为 2009 年！）提到 IE 开发工具中存在此功能，但我目前使用的是 Mac OS，所以这对我没有帮助。此外，IE 不是我主要针对的浏览器。

有没有办法检查这些伪元素？

编辑：除了关于 Firebug 无法检查这些元素的错误之外，我发现 Opera 非常擅长检查 :before 和 :after 元素开箱即用。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-16T13:26:07.690

在[Chrome 的开发工具](https://developers.google.com/chrome-developer-tools/docs/elements-styles)中，伪元素的样式在面板中是可见的：

![](../Images/90088b3e76638187d637c1cad1ae5373.png)

否则，您也可以在 JavaScript 控制台中输入以下行，并检查返回的[`CSSStyleDeclaration`](https://developer.mozilla.org/en/DOM/CSSStyleDeclaration)对象：

```
getComputedStyle(document.querySelector('html > body'), ':before'); 
```

*   [`window.getComputedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)
*   [`document.querySelector`](https://developer.mozilla.org/en/DOM/Document.querySelector)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-11-14T13:19:03.397

从 Chrome 31 开始，伪元素在元素面板中显示为其父元素的子元素，如下图所示：

![截屏](../Images/3e3fe3b21f98fa65ba1ea7877b9376a6.png)

您可以像选择普通元素一样选择它们，但如果删除`content`样式，则伪元素也将被删除，并且 devtools 焦点将更改为它的父元素。

继承的 CSS 样式似乎*不*可见，并且您无法从元素面板编辑 CSS 内容。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-02-17T13:17:04.760

Chrome 不会在 DOM 树中显示 :before 和 :after 伪元素，如果它们缺少“content”属性。它应该被设置，即使它被设置为空。

这不会出现：

```
:after {
  background-color: red;
} 
```

这将显示在检查器中：

```
:after {
  content: "";   
  background-color: red;    
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-25T08:16:27.573

在经历了很多挫折之后，我发现firefox根本没有在文档树**中**显示伪元素，但是如果你选择了定义了伪元素的**确切**元素，那么它的伪元素的样式) 显示在右侧的样式规则部分。对于萤火虫和内置检查（“Q”）都是如此，我很震惊之前没有人费心解释清楚这一点。

显然，chrome/chromium 对伪元素的处理非常出色，因为它们可以像常规元素一样被选择（在文档树中和直接在页面上）和检查，具有布局、属性和其他所有内容，独立于它们的“所有者” ”。

我目前使用的浏览器版本：Chromium 40.0.2214.91、Firefox 31.3.0。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-08-26T09:47:04.773

至少从 Chrome 62 开始，DevTools 中有一个设置为“显示用户代理影子 DOM”，它显示**额外的伪元素，如输入占位符**，否则不会出现在 DOM 树中。

更多信息：[https ://stackoverflow.com/a/26853319/3963594](https://stackoverflow.com/a/26853319/3963594)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-12T06:49:52.747

Firefox 有这个功能已经有一段时间了，只需右键单击“检查元素”，然后在检查器的右侧面板中查看之前和之后的元素。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-29T11:08:52.227

[![Select Element--> select hover checked ---> 可以看到 ::before 和 after 元素](../Images/0d55a8a4346230dccc805da51a61d300.png)](https://i.stack.imgur.com/0jVIY.png) Select Element--> select hover checked ---> 可以看到 ::before 和 after 元素

# android - 将 RadioGroup 添加到 Android 中的 AlertDialog

> ID：10174722
> 
> 赞同：0
> 
> 时间：2012-04-16T13:07:00.400
> 
> 标签：android, android-alertdialog, radio-group

我需要向 AlertDialog 添加一个无线电组，所以我编写了以下代码：

```
AlertDialog.Builder screenDialog = new AlertDialog.Builder(this);
screenDialog.setTitle("Captured Screen");

RadioGroup azione = (RadioGroup) findViewById(R.id.azione_stop);

LinearLayout dialogLayout = new LinearLayout(getApplicationContext());
dialogLayout.setOrientation(LinearLayout.VERTICAL);
dialogLayout.addView(azione);
screenDialog.setView(dialogLayout);
screenDialog.show(); 
```

这是包含 RadioGroup 的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/azione_stop"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <RadioButton
        android:id="@+id/ritornare"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:textColor="#000000"
        android:text="Ritornare" />
    <RadioButton
        android:id="@+id/chiudi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#
        android:text="Chiudi chiamata" />
    <RadioButton
        android:id="@+id/offerta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
    android:text="Segna offerta" /> 
```

当我打开 alertdialog 时，我收到一个错误 (java.lang.NullPointerException)，其中 RadioGroup 添加到了 LinearLayout。我能怎么做？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:09:57.980

```
RadioGroup azione = (RadioGroup) screenDialog.findViewById(R.id.azione_stop); 
```

和`screenDialog.setContentView(R.layout.YOURXML);`

```
AlertDialog screenDialog = new AlertDialog.Builder(this).create();
screenDialog.setTitle("Captured Screen");
screenDialog.setContentView(R.layout.YOURXMLLAYOUT);

RadioGroup azione = (RadioGroup) findViewById(R.id.azione_stop);

screenDialog.show(); 
```

# ftp - netbeans 7.1.1 mac 的 ftp 插件

> ID：10174723
> 
> 赞同：1
> 
> 时间：2012-04-16T13:07:01.080
> 
> 标签：ftp, netbeans-7

我正在尝试在 netbeans 上使用我的 ftp 服务器。有没有办法只输入主机和用户名+密码，然后只查看服务器上的所有文件夹？

我已经搜索过这个，但我似乎无法在任何地方找到它。我正在使用 mac 和 netBeans 7.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:10:53.480

首先，确保将 ant-commons-net.jar 复制到：C:\Program Files (x86)\NetBeans 6.7.1\java2\modules\ext

然后修改位于 nbproject 目录下的项目的 build-impl.xml 文件。

使用您的 ftpsite、用户名和密码添加一个新任务，例如这个。除非您每次都将其修改为提示，否则请确保该文件安全。要执行，通过从 NB 文件树选项卡展开 build.xml 来运行 ftp 任务。

代码：

```
 ==================== 
                    FTP SECTION 
                ==================== 

--> 
<target depends="jar" description="Build." name="ftp"> 
   <ftp server="FTPSITEURLHERE" userid="USERIDHERE" password="PASSWORDHERE"> 
    <fileset file="${dist.dir}/${application.title}.jar" /> 
  </ftp> 
</target> 
<!-- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:59:00.230

我不确定你的意思，你想从 FTP 服务器创建一些项目并且不想指定确切的路径？如果是这样，您可以只保留“/”和“初始目录”相同的上传目录，它应该可以工作

# c# - c# 通过使用其 ascii 代码检查字符串是否以 char 开头和结尾

> ID：10174730
> 
> 赞同：0
> 
> 时间：2012-04-16T13:07:26.577
> 
> 标签：c#, string, ascii

如何检查 c# 中的字符串是否以 char 的 ascii 代码开头？StartsWith 函数只接收字符串而不是字符。我想知道字符串是否以 86 的 ascii 开头并以 91 的 ascii 结尾。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:10:22.077

您可以通过访问字符串的 char 数组来检查开始和结束：

```
string s = "...";

if ((!String.IsNullOrEmpty(s)) && 
    (s[0] == (char)86) && (s[s.Length-1] == (char)91))
    // doSomething 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T13:11:18.557

你可以使用 string.Startswith like

```
bool success = yourString.StartsWith(Char.ConvertFromUtf32(86))
               && yourString.EndsWith(Char.ConvertFromUtf32(91)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:10:14.487

将其转换为 char，然后转换为字符串。

```
((char) 86).ToString() 
```

或者，直接检查字符串：

```
mystring[0] == (char) 86 
```

或者：

```
mystring[0] == '\x56' // in hex 
```

甚至：

```
mystring.StartsWith("\x56") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:10:46.710

您可以直接将字符与其 ASCII 代码进行比较，无需强制转换：

```
if (str.Length != 0 && str[0] == 86 && str[str.Length-1] == 91) ... 
```

当然，字符常量以其自然形式看起来更好：

```
if (str.Length != 0 && str[0] == 'V' && str[str.Length-1] == ']') ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:17:39.220

你可以使用这个`System.Convert.ToInt32("Yourstring"[0])`。将字符串的字符传递到它的长度，例如：

```
string Yourstring="test";
string asciivalue=""; 
```

执行以下操作直到长度

```
asciivalue=System.Convert.ToInt32("Yourstring"[i]); 
```

这将输出相应的 ASCII 值..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T13:11:31.803

```
var startChar = char(86).ToString();
var endChar = char(91).ToString();

if (myString.StartsWith(startCar) && myString.EndsWith(endChar))
{
    ....
} 
```

或者整理一下实现你自己的扩展方法`StartWith`/`EndWith`在类型字符串上，它需要字符：

```
public static string StartsWith(this string str, char ch)
{
     return str.StartsWith(ch.ToString());
} 
```

然后您的代码将如下所示：

```
myString.StartsWith(char(86)) && myString.EndsWith(char(91)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T13:14:13.947

通过字符串中的 ASCII 值检查字符在很大程度上与检查实际字符值相同。但是，为了启发您：

```
string s = "V4-42$TIh[";

if (s[0] == 86 && s[s.Length - 1] == 91) {
    // true
} 
```

不需要做任何特别的事情，甚至不需要使用函数调用。

# python - web.py：如何获取 POST 参数和 GET 参数？

> ID：10174738
> 
> 赞同：10
> 
> 时间：2012-04-16T13:07:57.833
> 
> 标签：python, web, web.py

我是新手`web.py`。我经常使用 PHP。在 PHP 中，POST 参数和 GET 参数存储在不同的全局变量中

例如：

`curl http://127.0.0.1/test?get_param1=1 -d 'post_param1=2'`

在 PHP 中，您可以得到`$_GET['get_param1']`is 1 和`$_POST['post_param1']`is 2。

但似乎不可能区分 GET/POST 参数`web.py`？

我只能用来`web.input()`在类 dict 对象中获取 GET/POST 参数，但我无法分辨其中哪些来自查询字符串，哪些来自 POST 数据

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T15:20:52.753

实际上有一个（未记录的？）`_method`参数可以是`get`，`post`或者`both`（默认）从不同的来源返回变量。[请参阅 web.input() 的源代码。](https://github.com/webpy/webpy/blob/master/web/webapi.py#L324)例如：

```
get_input = web.input(_method='get')
post_input = web.input(_method='post') 
```

但是，我使用 web.py 很多，从来不需要这个。为什么需要区分查询字符串中的输入参数和数据？

# android - 设备上的后退按钮需要的建议

> ID：10174739
> 
> 赞同：0
> 
> 时间：2012-04-16T13:08:04.173
> 
> 标签：android

我正在开发一个 android 应用程序，直截了当，应用程序中的一个活动有两个编辑文本字段，第一个字段被激活，在活动启动时启用，并且只有在第一个文本字段被填充之后，第二个字段变为活动状态。这部分工作正常。现在问题是当用户填写第二个文本字段并按下设备上的后退按钮时，第二个文本字段应该被保存并且应该变为非活动状态，当用户再次进入相同的活动时，第二个文本字段应该保持非活动状态，并且只有在用户双击第二个编辑文本字段后才可编辑。我知道保存在第二个字段中输入的数据需要数据库，但即使使用它我应该如何解决上述问题，我非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:23:59.800

超越这个功能 `onBackPressed()`。在此函数中，编写代码以“保存”文本框内容，然后`onResume()`，您可以使用保存的值重新加载文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:11:55.640

覆盖

```
 onPause() 
```

和

```
onResume() 
```

做你的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:14:16.577

你也可以试试`startActivityForResult()`

# jquery - jquery setInterval 和 setTimeout 不起作用

> ID：10174740
> 
> 赞同：0
> 
> 时间：2012-04-16T13:08:06.250
> 
> 标签：jquery

我被困在这里......我试图在每次点击后使按钮处于非活动状态 5 秒......我可以使按钮处于非活动状态但在将其恢复时遇到问题我尝试了 bith setIntervel 和 setTimeout

```
 function reverser(){
       $(this).css("background","url(images/btn_active.gif) no-repeat 0 0");
   }

      $(".vtbtn").click(function() {  
       var link =$(this).attr('id');
           $(this).css("background","url(images/btn_inactive.gif) no-repeat 0 0");  
          $.ajax({  
              type: "POST",  
              url: "sql.php",  
              data:"voted=" +link+"&user="+<?php echo $userId;?>,  
              success: function(data){  
              setInterval('reverser()',3000);
              } 
          }); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:12:36.723

`this`可能没有定义，试试：

```
function reverser(){
   $(".vtbtn").css("background","url(images/btn_active.gif) no-repeat 0 0");
} 
```

然后像这样调用函数：

```
setInterval(reverser, 3000); 
```

而且你真的需要每三秒运行一次那个函数吗，在Ajax调用完成后运行还不够吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:14:33.527

`this`在您的反向器函数中不引用被单击的元素。更改您的代码以传递该元素：

```
function reverser(ele){
   $(ele).css("background","url(images/btn_active.gif) no-repeat 0 0");
}

$(".vtbtn").click(function() {  
      var link =$(this).attr('id');
      var that = this; // save this
      $(that).css("background","url(images/btn_inactive.gif) no-repeat 0 0");  
      $.ajax({  
          type: "POST",  
          url: "sql.php",  
          data:"voted=" +link+"&user="+<?php echo $userId;?>,  
          success: function(data){  
              setTimeout(function() { 
                  reverser(that); 
              },3000);
          } 
      }); 
}); 
```

我对其进行了更改，以便将 setTimeout 传递给函数而不是字符串（这将导致调用`eval`，这是邪恶的），以便可以将`that`变量传递给`resverser`函数。

# php - 在 PHP 中将一周的开始日期从“星期一”更改为“星期二”

> ID：10174745
> 
> 赞同：6
> 
> 时间：2012-04-16T13:08:30.087
> 
> 标签：php, date, calendar

嗨，朋友们，我需要计算周数。

对于 ex 1,2,3 .... 52 基于当前年份。

在 php 中，星期默认从星期一或星期日开始

无论如何设置'星期二'有默认开始日期。

我的代码是...

```
echo "current week of 2012 this year is ..". $weekNumber = date("W"); 
```

示例 16 的输出。而正确的应该是 15 。

因为我需要从星期二而不是星期一开始的一周，谁能告诉我该怎么做。

因为如果找到答案，关于它的文档非常少，将来会帮助其他人:)

您的帮助和时间将不胜感激。或者请在评论中建议我一个方法:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T05:10:23.680

感谢 ramesh 的回答，我得到了解决方案。

要将星期二更改为一周的开始，我使用以下方法：

```
echo "Week count : ".date("W", strtotime("- 1 day")); 
```

# php - 需要多种输入法处理表单字段的建议

> ID：10174749
> 
> 赞同：0
> 
> 时间：2012-04-16T13:08:36.670
> 
> 标签：php, jquery, forms

我有一个名为`quantity`需要填写的表单字段。但在我的表格中，我有几种方法可以获取价值。我不确定是否使用 JavaScript 来解决这个问题，为每个条目选项创建单独的字段名称，或者完全不同的东西。提前感谢您对此提供的任何见解！

问题是：“你注册了多少人？”

选项 1：“仅限我自己”

选项 2：“我自己和 __ 其他人”

选项 3：“我正在代表他们注册 __ 个人”

我最初的想法是拥有以下 HTML（请原谅格式的粗糙）：

```
<input type="radio" name="quantity" value="1" /> Myself only<br />

Myself and <select name="quantity">
<option value="0"></option>
<option value="2">1 other</option>
<option value="3">2 others</option>
<option value="4">3 others</option>
<option value="5">4 others</option>
<option value="6">5 others</option>
<option value="7">6 others</option>
<option value="8">7 others</option>
<option value="9">8 others</option>
<option value="10">9 others</option>
</select><br />

I'm registering <input type="text" name="quantityplus" /> people on their behalf. 
```

表单的其余部分收集联系信息，然后在下一个屏幕上将根据`quantity`此步骤中的选择显示一组注册字段（姓名、电子邮件等）。在最后一个`quantityplus`（老板和其他 5 人参加研讨会，但她自己没有参加）。

这会是解决问题的最佳方法吗？还是应该`quantity`在提交表单之前使用 JavaScript 更新隐藏字段？如果是这样，我该如何解释这个`quantityplus`问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:34:10.453

我认为您通过为一个选项设置一个收音机，为另一个选项选择并为第三个选项选择文本，从而使表格非常混乱，我会选择更像：

```
<label for="myself">Myself only <input type="radio" name="type" id="myself" value="myself" /></label>

<label for="myselfAndOthers">Myself and others <input type="radio" name="type" id="myselfAndOthers" value="myselfAndOthers" /></label>
<label for="myselfAndOthersQuantity">Quantity:</label><input type="text" name="quantity" id="myselfAndOthersQuantity" />

<label for="others">Others <input type="radio" name="type" id="others" value="others" /></label>
<label for="othersQuantity">Quantity:</label><input type="text" name="quantity" id="othersQuantity" /> 
```

通过格式化这应该使选项清晰，然后您的 PHP 可以`type`为三种不同类型的处理打开 POST 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:12:12.950

```
No of person for registration: <input type="text" name="quantity_per" />

Include Me: <input type="checkbox" name="inc_me" value="1" /> 
```

使用此代码而不是这么多字段。

# javascript - 从嵌套对象中删除元素

> ID：10174750
> 
> 赞同：6
> 
> 时间：2012-04-16T13:08:45.343
> 
> 标签：javascript, object

我有以下对象：

```
{"2":{"cid":"2","uid":"2"},"1":{"cid":"1","uid":"3"}} 
```

在这个例子中，我想删除

```
"1":{"cid":"1","uid":"3"} 
```

从中。我已经尝试了我在 Stack Overflow 上找到的所有解决方案，但无法让它们中的任何一个起作用。我主要是 PHP 人，所以我可能会错过一些重要的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T13:12:50.737

只需`delete`与适当的属性一起使用。

```
var obj = {"2":{"cid":"2","uid":"2"},"1":{"cid":"1","uid":"3"}};

delete obj["1"]; 
```

注意`"`周围的 1 将其标记为标识符而不是数组索引！

**编辑** 正如评论中指出的那样，`obj`无论您如何处理该 `[1]`属性，它都是一个对象并且没有数组。我的最后一点是为了明确说明您使用的是对象而不是数组。

根据我的经验，大多数人将整数属性与数组关联，将字符串属性与对象关联。所以我认为以给定的方式突出显示属性可能更有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T13:11:40.040

```
 var myObj= {"2":{"cid":"2","uid":"2"},"1":{"cid":"1","uid":"3"}}

delete myObj['1'];

alert ( myObj['1']); 
```

请注意删除存在跨平台问题：

跨浏览器问题

> 尽管 ECMAScript 使对象的迭代顺序依赖于实现，但似乎所有主流浏览器都支持基于最早添加的属性的迭代顺序（至少对于不在原型上的属性）。但是，在 Internet Explorer 的情况下，当对属性使用 delete 时，会导致一些令人困惑的行为，从而阻止其他浏览器使用像对象字面量这样的简单对象作为有序关联数组。在资源管理器中，虽然属性值确实设置为未定义，但如果稍后添加一个具有相同名称的属性，则该属性将在其旧位置迭代——而不是在迭代序列的末尾，正如人们可能期望的那样删除该属性，然后将其添加回来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-03T06:59:48.680

```
var arr=[[10,20,30],[40,50,60],[70,80,90]];

for(var i=0;i<arr.length;i++){
    for(var j=0;j<arr[i].length;j++){
        if(arr[i][j]==50){
            arr[i].splice(j,1);
        }
    }
}

document.write(arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:11:51.797

JavaScript 没有多维数组，只有数组和对象。也就是说：`delete theObject['1'];`应该工作得很好

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T13:19:37.017

您可以在 javascript 中使用 delete 例如：

```
var x = {"2":{"cid":"2","uid":"2"},"1":{"cid":"1","uid":"3"}};

delete x['1']; 
```

另外，请检查：

> [在 JavaScript 中删除对象](https://stackoverflow.com/questions/742623/deleting-objects-in-javascript)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T13:15:31.217

通过这种方式将您的`Object`（不是`Array`）分配给变量：

```
var o = {"2":{"cid":"2","uid":"2"},"1":{"cid":"1","uid":"3"}}; 
```

然后做：

```
delete o['1']; 
```

就是这样！

# algorithm - 邻居数 KNN 算法

> ID：10174755
> 
> 赞同：2
> 
> 时间：2012-04-16T13:09:06.927
> 
> 标签：algorithm, matlab, knn

我在matlab中应用了KNN算法对手写数字进行分类。数字最初是 8*8 的矢量格式，然后拉伸形成一个 1*64 的矢量。因此，每次我将第一个数字与所有其余数据集（非常大）进行比较时，然后将第二个数字与其余数据集等等等等等等。现在我的问题是，不是 1 个邻居是最佳选择吗总是？由于我使用的是欧几里得距离，（我选择更接近的那个）为什么我还要选择 2 或 3 个以上的邻居，因为我得到了最接近的数字？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:29:15.063

你必须考虑噪音。假设您的某些分类示例可能被错误分类，或者其中一个奇怪地与其他示例非常接近 - 它们不同，但实际上只是一个“故障”。在这些情况下——根据这个偏离轨道的例子进行分类可能会导致错误。

根据个人经验，*通常*在 k=3/5/7 时获得最好的结果，但这取决于实例。

如果您想获得最佳性能 - 您应该使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)top`k`为您的特定实例选择最佳。

此外，对于 KNN，通常只使用奇数`k`，以避免“平局”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-27T03:10:13.993

**一个演示 ML Knn 算法的简单程序**

Knn 算法通过使用一组数据训练计算机并传递输入以获得预期输出来工作。例如：-考虑一个父母想要训练他的孩子识别“兔子”的照片，这里父母将展示 n 张兔子的照片，如果照片属于兔子，那么我们喊兔子，否则我们将继续前进，就像这样这种方法通过输入一组数据来对计算机进行监督以获得预期的输出

```
from sklearn.neigbors import KNeighborsClassifier
from sklearn.model_selection import train_test_split
import pandas as pd
import numpy as np
df=pd.read_csv("D:\\heart.csv")
new_data{"data":np.array(df[["age","gende","cp","trestbps","chol","fbs","restecg","thalach","exang","oldpeak","slope","ca","thal"]],ndmin=2),"target":np.array(df["target"]),"target_names":np.array(["No_problem","Problem"])}
X_train,X_test,Y_train,Y_test=train_test_split(new_data["data"],new_data["target"],random_state=0)
kn=KNeighborsClassifier(n_neighbors=3)
kn.fit(X_train,Y_train)
x_new=np.array([[71,0,0,112,149,0,1,125,0,1.6,1,0,2]])
res=kn.predict(x_new)
print("The predicted k value is : {}\n".format(res))
print("The predicted names is : {}\n".format(new_data["target_names"][res])
print("Score is : {:.2f}".format(kn.score(X_train,Y_train))) 
```

# python - 我在我的谷歌应用引擎中发现了以下一些错误。有人可以为此提出一些解决方案吗？

> ID：10174756
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:20.440
> 
> 标签：python, django, google-app-engine

处理完这个请求后，发现处理这个请求的进程占用了太多内存，被终止了。这可能会导致一个新进程被用于对您的应用程序的下一个请求。如果您经常看到此消息，则您的应用程序中可能存在内存泄漏。

完整的原型太大而无法保存，已清除帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:12:07.327

看起来您正在使用[appstats](https://developers.google.com/appengine/docs/python/tools/appstats)，它的记录模块由于太大而无法保存所有数据。只有部分数据可用。

# c# - 一对多关系在asp.net中将外键保存为NULL

> ID：10174757
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:26.513
> 
> 标签：c#, .net, entity-framework-4, foreign-keys

我正在尝试在 .net 3.5 的实体框架中定义我的两个表之间的一对多关系。

**城市表**

```
CityId
CityName 
```

**员工表**

```
 EmployeeId
 EmployeeName
 RegistrationDate
 FK_CityID 
```

我正在尝试在 Employee 中插入数据，所有数据都插入完美，但**FK_CityID 是 NULL**。

插入按钮单击代码 DateTime dt = new DateTime(2008, 12, 12);

```
 EmployeeService es = new EmployeeService();
    CityService cs = new CityService();
    Payroll.Entities.Employee e1 = new Payroll.Entities.Employee();

    Payroll.Entities.City city1 = cs.SelectCity(Convert.ToInt32(cmbCity.SelectedItem.Value));

    e1.FK_CityID = city1;
    e1 = Payroll.Entities.Employee.CreateEmployee(0, "Archana",dt);
    es.AddEmpoyee(e1); 
```

在**e1.City 中**，我正在传递整个对象，即**city1**（城市对象）并且它正在完美传递，但**在数据库中它将保存 NULL**

**我的服务类是**

```
public string AddEmpoyee(Payroll.Entities.Employee e1)
        {
            //DAO
            Payroll_DAO payrollDAO = new Payroll_DAO();
            payrollDAO.AddToEmployee(e1);
            payrollDAO.SaveChanges();
            return "SUCCESS";
        } 
```

我没有得到我错的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:03:07.667

嗨，我得到了解决方案..

```
Payroll.Entities.City city1 = new Payroll.Entities.City();
city1 = cs.SelectCity(Convert.ToInt64(cmbCity.SelectedItem.Value));

e1.EmployeeName = "Archana";
e1.RegistrationDate= dt;
e1.FK_CityID = city1;

es.AddEmpoyee(e1); 
```

# c - 简单的服务器/客户端 C 网络练习

> ID：10174760
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:38.710
> 
> 标签：c, sockets, network-programming

这些天我一直在研究网络编程，我写了两个简单的例程来检查我是否做对了。所以我在桌面上构建了服务器并启动它，然后我在笔记本电脑上构建了客户端并运行它，一切都按预期进行。当我第二次尝试运行它们时，服务器一直在循环，两秒钟后客户端给出“连接错误！”。如果我在十五分钟后再试一次，它会起作用，但我必须再次等待。我哪里错了？计算机都连接到我的 LAN，79.13.199.165 是我的调制解调器/路由器的 IP，它将端口 53124 上的每个传入连接转发到桌面。在同一台 PC 上同时运行服务器和客户端时不会出现此问题。

**服务器.c**

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

int main () {
    struct sockaddr_in sa;
    sa.sin_family = AF_INET;
    sa.sin_port = htons(53124);
    sa.sin_addr.s_addr = htonl(INADDR_ANY);
    memset(sa.sin_zero, '\0', sizeof(sa.sin_zero));

    int mysocket = socket(PF_INET, SOCK_STREAM, 0);
    bind(mysocket, (struct sockaddr*)&sa, sizeof(sa));
    listen(mysocket, 5);

    int inc;
    struct sockaddr_in inc_addr;
    socklen_t inc_addr_size = sizeof(inc_addr);
    inc = accept(mysocket, (struct sockaddr*)&inc_addr, &inc_addr_size);
    if (inc != -1) {
            printf("accepting client\n");
    }
    send(inc, "ciao", sizeof("ciao"), 0);
    close(inc);

    return 0;
} 
```

**客户端.c**

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

int main () {

    struct sockaddr_in sa;
    sa.sin_family = AF_INET;
    sa.sin_port = htons(53124);
    sa.sin_addr.s_addr = inet_addr("79.13.199.165");
    memset(sa.sin_zero, '\0', sizeof(sa.sin_zero));

   int mysocket = socket(PF_INET, SOCK_STREAM, 0);
   if (mysocket == -1) {
       printf("Could not create socket!\n");
    }
   if (connect(mysocket, (struct sockaddr*)&sa, sizeof(sa)) == -1) {
       printf("Error connecting!\n");
    }
   char message[5];
   memset(message, '\0', sizeof(message));
   recv(mysocket, message, 5, 0);
   printf("%s\n", message);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:41:39.987

当服务器关闭套接字时，几个 ACK​​ 数据包会通过连接来回发送。无法判断最后一个 ACK​​ 是否成功传递，因此连接会进入 TIME_WAIT 状态一段时间。这基本上让 TCP 堆栈有时间等待任何丢失的数据包并将它们丢弃。

通过使用[setsockopt()设置](http://linux.die.net/man/2/setsockopt)[SO_REUSEADDR](http://linux.die.net/man/7/socket)可以忽略这一点并立即重用套接字。后续连接可能会获得他们不应该获得的数据，但对于您的小型测试应用程序来说，这应该不是问题。

**编辑**

顺便说一句，您可能对此感到困惑的一个原因是您没有对 socket() bind() 或 listen() 进行任何错误检查。bind() 调用肯定会返回错误并在 Linux 上设置 errno, EINVAL。

# c - 函数调用的双括号？

> ID：10174764
> 
> 赞同：5
> 
> 时间：2012-04-16T13:09:48.887
> 
> 标签：c, gcc, syntax

考虑以下代码：

```
#include <stdio.h>

int aaa(char *f, ...)
{
    putchar(*f);    
    return 0;
}

int main(void)
{
    aaa("abc");
    aaa("%dabc", 3); 
    aaa(("abc"));
    aaa(("%dabc", 3));
    return 0;
} 
```

我想知道为什么以下几行：

```
 aaa("abc");
    aaa("%dabc", 3); 
    aaa(("abc")); 
```

运行没有错误，但第四行（见下文）：

```
 aaa(("%dabc", 3)); 
```

产生以下错误：

> main.c:15:2：警告：传递 'aaa' 的参数 1 使指针从整数而不进行强制转换
> 
> main.c:3:5：注意：预期为“char *”，但参数的类型为“int”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T13:12:44.023

该声明

```
aaa(("%dabc", 3)); 
```

使用返回值`aaa`的参数调用函数。`("%dabc", 3)``3`

查找[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:19:50.310

就像在数学中一样，函数调用中的括号被解释为分组：eg`(1) * (2)`与 相同`1 * 2`，但`(1 + 2) * 3`与 不同`1 + 2 * 3`。

在第一个示例`aaa(("abc"))`中：首先计算内括号，但`("abc")`与 相同`"abc"`，因此这等效于仅调用`aaa("abc");`。

在第二个例子`aaa(("abc",3))`中：内部表达式是`("abc", 3)`ie[逗号操作符](http://en.wikipedia.org/wiki/Comma_operator)开始起作用并被丢弃，作为 的参数`"abc"`离开。编译器抱怨因为没有类型所以你没有正确调用函数。`3``aaa``3``int``char*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:15:27.043

因为传递给函数的参数是`("%dabc", 3)`它本身调用逗号运算符并返回的值`3`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:13:59.127

左值（“xxx”，val）计算“xxx”，然后计算val并得出括号中的最后一个值，即val。aaa(...) 中的括号是参数。

# python - python中的盒须图

> ID：10174766
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:54.003
> 
> 标签：python, matplotlib

我有一个这样的箱线图： ![在此处输入图像描述](../Images/3a5cee2421236bdf06419e7899bedc1c.png)

我的数据集是这样的（下面的数字只是一个例子，不是我使用的真实数据）：

```
dataset = [[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]........] 
```

“数据集”列表由 12 个项目组成，每个项目中有十个浮点数。

现在我想改变 x 轴，例如，数据集中的第一个列表是在 prameter 时计算`a=50`的，第二个列表是在 a = 100 时计算的，等等。我想将`a`值作为 x 轴而不是 1 的框显示， 2,3,4,5,...就像现在

我有一个值列表：

```
a = [50, 100, 200, 350, 480.......] 
```

创建图表的代码：

```
dataset = [...] (the structure is showed above)
ax.boxplot(dataset) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:03:17.047

使用[`positions`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.boxplot)关键字参数：

```
ax.boxplot(dataset, positions=a) 
```

# ruby-on-rails - 导轨 css 类 =“当前”

> ID：10174767
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:55.483
> 
> 标签：ruby-on-rails

我正在尝试`class="current"`在第一个导航中添加一个到当前页面`<li>`。所以 html 应该看起来像 `<li id="nav-home" class="current">`但仅限于当前页面。

```
<% subjects.each do |subject| %>
  <li id="nav-<%= subject.name %>" >
    <a <%= link_to(subject.name, :action => 'show') %></a>
    <ul>
    <% subject.pages.visible.sorted.each do |page| %>
      <li ><%= link_to(page.name, :action => 'show', :id => page.permalink) %></li>
    </ul>   
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:32:50.547

您可以使用`current_page?`来检查您链接到的页面是否是当前页面。

```
<li id="nav-<%= subject.name %>" class="<%= current_page?( page_i_am_linking_to ) ? 'current' : '' %>" > 
```

这会将类设置为“当前”或将其留空。

我真的不明白你是如何建立你的链接/链接到什么的，这就是我使用“page_i_am_linking_to”的原因。您需要用有效的东西替换它。

另请参阅[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:36:04.260

您希望将一个实例变量`@current_page_id`设置为您呈现的页面，然后只需将该类添加到您想要拥有它的元素中，就像这样（我选择将它放在列表元素上）：

```
<% subjects.each do |subject| %>
<li id="nav-<%= subject.name %>" >
    <a <%= link_to(subject.name, :action => 'show') %> </a>
 <ul>
<% subject.pages.visible.sorted.each do |page| %>
 <li class="<%= @current_page_id == page.id ? 'current' : '' %>"><%= link_to(page.name, :action => 'show', :id => page.permalink) %></li>
 </ul>

<% end %> 
```

如果你想把它放在链接上：

```
<li ><%= link_to(page.name, :action => 'show', :id => page.permalink, :class => @current_page_id == page.id ? 'current' : '') %></li> 
```

# winapi - 使用 win32 gui 应用程序写入标准输出

> ID：10174768
> 
> 赞同：0
> 
> 时间：2012-04-16T13:09:56.633
> 
> 标签：winapi, user-interface, stdio

如果从命令行运行 win32 GUI 应用程序，例如 gfxexe.exe

首先，检测它是否已从命令行（cmd32.exe 和可能的其他第 3 部分命令行应用程序）运行的最简单方法是什么。

其次，也是最重要的，如果应用程序是从命令行启动的，我怎么能打印一些东西给它。例如，这个应用程序不能从命令行运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:47:27.583

我能想到的最简单的方法是。首先，创建一个控制台应用程序，然后让您的控制台应用程序生成您的 Window 应用程序，最后，使用映射内存或其他形式的进程间通信。

# liferay - 如何更改 Liferay Flag 下拉值？

> ID：10174771
> 
> 赞同：1
> 
> 时间：2012-04-16T13:10:04.673
> 
> 标签：liferay

在 liferay 留言板线程中，如果我们单击“标记”，则会弹出一个窗口，其中包含“暴力和排斥”、“垃圾邮件”等下拉值。

我想用我自己的话来改变这些文字。我在里面找到了代码`tomcat-6.0.18\webapps\ROOT\html\portlet\flags\edit_entry.jsp`：

```
<option value="<%= reason %>"><liferay-ui:message key="<%= reason %>" /></option> 
```

哪个显示下拉菜单，但我如何用自己的话编辑下拉菜单？

如果有人可以建议我如何在这里进行，将对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:01:29.580

一种方法（最简单）是覆盖 portal-ext.properties 中的以下属性：

```
flags.reasons=sexual-content,violent-or-repulsive-content,My own flag,My content,Your violent acts 
```

希望这可以帮助。

通过提供一个新的本地化键而不仅仅是一个文本来扩展它（使其成为多语言）。您可以使用挂钩将新的本地化密钥引入门户，然后在此处使用该密钥。如果找不到密钥（例如在此示例中，例如“我自己的标志”），它将显示为未翻译。

# objective-c - NSTask waitUntilExit 没有按预期工作

> ID：10174778
> 
> 赞同：0
> 
> 时间：2012-04-16T13:10:28.893
> 
> 标签：objective-c

我正在使用 FSEventStreamCreate 来监视 .Trash 目录。我的回调函数是一个静态函数，它在 .Trash 更改时执行。

在回调函数中，我需要通过 NSTask 和 NSPipe 运行一个脚本来获取一些状态。当第一次执行 [ls waitUntillExit] 时，函数又从头开始执行。当程序第二次到达时，程序通常会从 [ls waitUntillExit] 继续。我的代码有什么问题。[编号1到编号2的代码执行2次]

这是我的 FSEvent 的 myCallbackFunction 代码。

```
static void myCallbackFunction(
                           ConstFSEventStreamRef streamRef,
                           void *clientCallBackInfo,
                           size_t numEvents,
                           void *eventPaths,
                           const FSEventStreamEventFlags eventFlags[],
                           const FSEventStreamEventId eventIds[])
{

    ////////////////number 1////////////   
    int i;

    FILE *fp;

    char path[1035];

    /* Open the command for reading. */
    fp = popen("/bin/ls ~/.Trash/POC3.app", "r");

    if (fp == NULL) {
        printf("Failed to run command\n" );
        exit(0);
    }
    i=0;
    while (fgets(path, sizeof(path)-1, fp) != NULL) {
        i++;
    }///////if the file POC.app exists in trash execute this//////////////////
    if(i!=0){

        NSTask *ls=[[NSTask alloc]init] ;
        NSPipe *pipe1=[NSPipe pipe];
        NSData *data ;
        NSString *tmpString;

        [ls setStandardOutput:pipe1];
        NSString *execPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"script"];
        [ls setLaunchPath:execPath];
        [ls setArguments:[NSArray arrayWithObjects:@"hello",nil]];

        [ls launch];
        [ls waitUntilExit];
        ///////////////number 2/////////////////

        data = [[[ls standardOutput] fileHandleForReading] availableData];

        if ((data != nil) && [data length]) {

            tmpString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

         }

    //some other functionality follows here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:22:01.090

肯定有僵局。在脚本退出之前，您不会阅读脚本的输出。如果它因为管道缓冲区已满而阻塞，它将永远不会终止。

# algorithm - 如何找到连接两组点的最小成本

> ID：10174779
> 
> 赞同：5
> 
> 时间：2012-04-16T13:10:30.920
> 
> 标签：algorithm, math, geometry, mathematical-optimization

我得到了两组点 S 和 V，它们的大小都是 n。我想链接这两个集合，以便 S 中的每个点都链接到 V 中的一个且只有一个点。链接两个点的成本定义为两点之间的欧几里得距离。应该有n！可能的链接方式。那么如何找到最小成本的方式呢？（以有效的方式）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:13:29.177

这是一个分配问题。你可以用[匈牙利方法](http://en.wikipedia.org/wiki/Hungarian_algorithm)解决它。在[python](https://stackoverflow.com/questions/4075669/hungarian-algorithm-in-python)中有这个的实现。您还可以使用任何线性规划求解器来解决问题。LP 公式总是会给你一个整数解。

# asp.net - 以集成模式运行的 IIS 7 经典 ASP 应用程序

> ID：10174783
> 
> 赞同：2
> 
> 时间：2012-04-16T13:10:47.910
> 
> 标签：asp.net, iis-7, asp-classic, sitecore, sitecore6

我们在集成模式下托管在 IIS 7 上的 ASP .Net 应用程序。

我们在这个 ASP .Net 应用程序中有一些经典的 ASP 页面。当我尝试从经典 ASP 页面创建帖子并尝试使用 访问发布的数据`Request.Form("name")`时，它给了我未指定的错误。请求对象在表单发布时被删除。

如果我将包含经典 asp 页面的文件夹更改为应用程序并将其应用程序池更改为使用经典模式的新应用程序池，则一切正常。

我可以在集成模式下托管在 IIS 7 上的 ASP .Net 应用程序中运行经典 ASP 页面吗？

我们将 Sitecore 6.5 用于我们的 Web 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:18:00.560

是的，您可以使用集成管道在 IIS7 上运行 ASP Classic。

您可能必须添加自定义 HTTP 处理程序。看看金汉森的[回答](http://bit.ly/Jw75fT)。她使用以下代码：

```
<add name="ASPClassic" path="*.asp" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="File" requireAccess="Script" /> 
```

查看[此](http://blogs.iis.net/bills/archive/2007/05/21/tips-for-classic-asp-developers-on-iis7.aspx)资源，了解有关在 IIS7 上运行 ASP Classic 的一些一般提示。

其他一些需要研究的事情：

*   默认情况下禁用 32 位应用程序。某些 COM 对象需要启用此功能。可以按站点设置此选项
*   查看 web.config 中的`comPlus` [条目](http://www.iis.net/ConfigReference/system.webServer/asp/comPlus)。`executeInMta`在某些情况下，对于经典 ASP 尤其重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-27T07:31:58.087

我们有一个类似的问题。我们以集成模式运行应用程序池，并有一个自定义的 http 模块来检查 .net 端的请求。我们需要为 .asp 扩展跳过 .net 代码中的那部分，然后一切都恢复正常了。似乎每当.net首先运行并访问请求对象时，它都会以某种方式“锁定”以供以后的模块使用。

# java - 显示数组中的值

> ID：10174784
> 
> 赞同：0
> 
> 时间：2012-04-16T13:10:52.177
> 
> 标签：java, android

我一直在做这个测验一段时间，但是我正在努力将问题与答案相匹配。

以下行和其他应该显示答案的行实际上显示“[[ljava.lang.string;@40585b18”和细微的变化。

```
quesAns4.setText("4) " + answers[3]) ; 
```

我已经尝试将上面的行更改为：

```
quesAns4.setText("4) " + answers[0][3]); 
```

显然我希望答案与问题相匹配，上面的方法只显示数组中的 8

```
 {"3","5","8","9"} 
```

所以基本上是的，对于我希望他们匹配的每个问题的变化。如果问题是“以秒为单位，一辆 F1 赛车以 300 公里/小时的速度行驶需要多长时间才能停下来？” 可能显示的答案应该是 4,6,8,10 等。

任何帮助/指导将不胜感激。

完整代码如下！

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class MathsMultiplicationActivity extends Activity {

TextView quesnum;
TextView ques;
TextView anst;
TextView ans1;
TextView ans2;
TextView ans3;
TextView ans4;
ImageView cross;
ImageView tick;
Button nxt;

    int qno = 1;
    int right_answers = 0;
    int wrong_answers = 0;
    int rnd1;
    int rnd2;

    String [] questions = {"How much mph does the F-Duct add to the car?",
              "What car part is considered the biggest performance variable?",
              "What car part is designed to speed up air flow at the car rear?",
              "In seconds, how long does it take for a F1 car to stop when travelling at 300km/h?",
              "How many litres of air does an F1 car consume per second?",
              "What car part can heavily influence oversteer and understeer?",
              "A third of the cars downforce can come from what?",
              "Around how much race fuel would be consumed per 100km?","The first high nose cone was introduced when?",
              "An increase in what, has led to the length of exhaust pipes being shortened drastically?"};

    String [] [] answers = {{"3","5","8","9"},
    {"Tyres","Front Wing","F-Duct","Engine"},
    {"Diffuser","Suspension","Tyres","Exhaust"},
    {"4","6","8","10"},
    {"650","10","75","450"},
    {"Suspension","Tyres","Cockpit","Chassis"},
    {"Rear Wing","Nose Cone","Chassis","Engine"},
    {"75 Litres","100 Litres","50 Litres","25 Litres"},
    {"1990","1989","1993","1992"},
    {"Engine RPM","Nose Cone Lengths","Tyre Size","Number of Races"}};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.multiplechoice);

    // Importing all assets like buttons, text fields
   quesnum = (TextView) findViewById(R.id.questionNum);
   ques = (TextView) findViewById(R.id.question);
   anst = (TextView) findViewById(R.id.answertit);
   ans1 = (TextView) findViewById(R.id.answer1);
   ans2 = (TextView) findViewById(R.id.answer2);
   ans3 = (TextView) findViewById(R.id.answer3);
   ans4 = (TextView) findViewById(R.id.answer4);
   nxt = (Button) findViewById(R.id.btnNext);
   cross = (ImageView) findViewById(R.id.cross);
   tick = (ImageView) findViewById(R.id.tick);

   cross.setVisibility(View.GONE); 
   tick.setVisibility(View.GONE); 

    quesnum.setText("Question: " + qno + "/10");

    final Button buttonAbout = (Button) findViewById(R.id.btnNext);
    buttonAbout.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         next();
        }

        private void next() {
            qno++;
            change_question();
        }

        private void change_question() {
            if(tick.getVisibility() == View.VISIBLE){
                right_answers++;
            }

            if(cross.getVisibility() == View.VISIBLE){
                wrong_answers++;
            }
            if(qno==questions.length){

            }else{
                cross.setVisibility(View.GONE); 
                tick.setVisibility(View.GONE); 
                rnd1 = (int)Math.ceil(Math.random()*3);
                rnd2 = (int)Math.ceil(Math.random()*questions.length)-1;
                ques.setText(questions[rnd2]);
                if(questions[rnd2]=="x")
                {
                    change_question();
                }
            }
            questions[rnd2]="x";

            if(rnd1==1){
                TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
                quesAns1.setText("1) " + answers[0]) ;            

                TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
                quesAns2.setText("2) " + answers[1]) ;   

                TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
                quesAns3.setText("3) " + answers[2]) ;   

                TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
                quesAns4.setText("4) " + answers[3]) ;   
            }

            if(rnd1==2){
                TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
                quesAns1.setText("1) " + answers[2]) ;            

                TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
                quesAns2.setText("2) " + answers[0]) ;   

                TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
                quesAns3.setText("3) " + answers[1]) ;   

                TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
                quesAns4.setText("4) " + answers[3]) ;  
            }
            if(rnd1==3){
                TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
                quesAns1.setText("1) " + answers[1]) ;            

                TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
                quesAns2.setText("2) " + answers[2]) ;   

                TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
                quesAns3.setText("3) " + answers[0]) ;   

                TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
                quesAns4.setText("4) " + answers[3]) ;  
            }

        }

    });

    //Answer 1 click functions
    ans1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ans1Action();
        }

        private void ans1Action() {
            //enable_disable(0);
            if(rnd1==1){
                tick.setVisibility(View.VISIBLE); 
            }else{
                cross.setVisibility(View.VISIBLE); 
            }

        }

    });

    //Answer 2 click functions
    ans2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ans2Action();
        }

        private void ans2Action() {
            //enable_disable(0);
            if(rnd1==2){
                tick.setVisibility(View.VISIBLE); 
            }else{
                cross.setVisibility(View.VISIBLE); 
            }

        }

    });

    //Answer 3 click functions
    ans3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ans3Action();
        }

        private void ans3Action() {
            //enable_disable(0);
            if(rnd1==3){
                tick.setVisibility(View.VISIBLE); 
            }else{
                cross.setVisibility(View.VISIBLE); 
            }

        }

    });

    //Answer 4 click functions
    ans4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ans4Action();
        }

        private void ans4Action() {
            //enable_disable(0);
            if(rnd1==4){
                tick.setVisibility(View.VISIBLE); 
            }else{
                cross.setVisibility(View.VISIBLE); 
            }

        }

    });
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:12:55.913

要以用户友好的方式打印数组，您需要遍历数组项，或者您可以使用以下[`Arrays.deepToString`方法](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5b%5d%29)：

```
String yourPrinterFriendlyArray = Arrays.deepToString(answers[0]);
quesAns4.setText("4) " + yourPrinterFriendlyArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:23:27.563

这 ：

```
quesAns4.setText("4) " + answers[0][3]); 
```

如果这是第一个问题，则有效。

你应该做的是在`change_question`函数中有参数中问题的编号`change_question(int questionNumber)`

然后，当您设置文本时，您使用：

```
quesAns4.setText("4) " + answers[questionNumber][3]); 
```

如果您的问题从 0 开始。否则，您使用：

```
quesAns4.setText("1) " + answers[questionNumber-1][0]);
quesAns4.setText("2) " + answers[questionNumber-1][1]);
quesAns4.setText("3) " + answers[questionNumber-1][2]);
quesAns4.setText("4) " + answers[questionNumber-1][3]); 
```

# java - EJB 2.1 与 EJB 3.1

> ID：10174793
> 
> 赞同：2
> 
> 时间：2012-04-16T13:11:16.137
> 
> 标签：java, jakarta-ee, ejb, ejb-3.1, ejb-2.x

只是想知道我可以直接在应用程序服务器的 EJB 3.1 容器中运行 EJB 代码（遵循 2.1 规范）的代码吗？在应用程序服务器中，是否有不同版本的 EJB 容器，一种遵循 EJB 3.1 规范，另一种遵循 EJB 3.1 规范到2.1规格。？

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:27:48.240

EJB 3.1 容器应该支持开箱即用的 2.1 应用程序。这在 EJB 3.1 规范中有如下解释：

> 必须支持现有的 EJB 3.0 和更早的应用程序在 EJB 3.1 容器中原样运行。所有 EJB 3.1 实现都必须支持 EJB 1.1、EJB 2.0、EJB 2.1 和 EJB 3.0 部署描述符，用于编写到早期版本的 Enterprise JavaBeans 规范的应用程序。

当然，实现中总是存在一些差异（功能/错误/理解规范的不同方式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:49:46.860

我相信您应该能够在 EJB 3.1 容器中运行 EJB 2.1 代码。大多数容器都是向后兼容的。

# php - MYSQL字符串替换列PHP

> ID：10174795
> 
> 赞同：1
> 
> 时间：2012-04-16T13:11:22.823
> 
> 标签：php, mysql, string, replace

嗨，我想通过 mysql 在 php 中进行等效的字符串替换。我的专栏有字符串格式“发布日期：2012 年 5 月 20 日星期四”我想发布文本发布日期：。我试过这个但没有用

```
$query = ("UPDATE Films SET Film_Release = REPLACE(Film_Release, 'Release Date: ','"); 

$runquery = mysql_query($query); 
```

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:20:27.967

尝试额外`'`和关闭`)`

```
$query = "UPDATE Films SET Film_Release = REPLACE(Film_Release, 'Release Date: ','')"; 
```

# c# - 使用 linq where 在 foreach 中删除

> ID：10174803
> 
> 赞同：12
> 
> 时间：2012-04-16T13:11:38.223
> 
> 标签：c#, .net, linq, where

我可以看到为什么不允许这样做：

```
foreach (Thing t in myCollection) {
   if (shouldDelete(t) {
      myCollection.Delete(t);
   }
} 
```

但是这个怎么样？

```
foreach (Thing t in myCollection.Where(o=>shouldDelete(o)) {
   myCollection.Delete(t);
} 
```

我不明白为什么这会失败。“Where()”方法显然没有返回原始集合，因此当我尝试从中删除某些内容时，我没有枚举原始集合。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-16T13:49:45.583

> 我不明白为什么这会失败。

我假设您的问题是“为什么会失败？” （你忘了在你的问题中实际提出一个问题。）

> “Where()”方法显然没有返回原始集合

正确的。“Where”返回一个`IEnumerable<T>`代表集合的集合，上面有一个过滤器。

> 因此，当我尝试从中删除某些内容时，我不会枚举原始集合。

不正确。您*正在*枚举原始集合。您正在枚举原始集合*，并在其顶部放置一个过滤器*。

当您调用“Where”时，它不会急切地评估过滤器并生成应用了过滤器的原始集合的*全新副本*。相反，它为您提供了一个枚举原始集合的对象，但会跳过与过滤器不匹配的项目。

当你在商店里说“给我看一切”时，向你展示一切的人会告诉你一切。当你说“现在给我看看每公斤 1 到 5 美元的苹果”时，**你并不是在建造一个只有苹果的全新商店**。您正在查看与以前完全相同的内容集合，只是上面有一个过滤器。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-16T13:14:46.727

尝试使用此代码

```
myCollection.RemoveAll(x => x.shouldDelete(x)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-16T13:14:59.293

你可以做：

```
myCollection.RemoveAll(shouldDelete); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-16T13:14:36.567

第二条语句返回`IEnumerable<>`对您的列表进行的操作。这个应该没问题：

```
foreach (Thing t in myCollection.Where(o=>shouldDelete(o).ToList()) {
   myCollection.Delete(t);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T13:13:18.200

这是因为不应该使用 foreach 循环修改集合。它会在执行整个 foreach 循环之前尝试将其删除。因此它会失败。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T13:17:41.593

其中扩展方法根据传递的谓词过滤集合值并返回 IEnumerable。因此无法在迭代时修改集合。

您可以将 RemoveAll() 用于您的目的。

# android - 通过蓝牙接收文件时启动应用程序

> ID：10174805
> 
> 赞同：0
> 
> 时间：2012-04-16T13:11:41.763
> 
> 标签：android, android-intent, bluetooth, intentfilter

当通过蓝牙接收到任何文件时，我的应用程序应该启动。

请告诉我，通过蓝牙接收文件时会触发哪个意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:15:20.657

没有这样的特定意图动作告诉文件已下载。但是，您应该收听以下广播以检测电话已断开连接，然后以编程方式检查是否下载了文件。

```
<intent-filter>
    <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED"/>
</intent-filter> 
```

# visual-studio-2010 - 在模型优先方法上使用分页列表？

> ID：10174810
> 
> 赞同：0
> 
> 时间：2012-04-16T13:11:51.083
> 
> 标签：visual-studio-2010, asp.net-mvc-3, controller, paging, pagedlist

我想使用分页列表在我的视图中对数据进行分页，我之前使用网络网格进行过此操作，但发现使用模型优先方法很难做到这一点。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:54:08.883

在 github 上查看我的 PagedList nuget 包：

[https://github.com/troygoode/pagedlist](https://github.com/troygoode/pagedlist)

这将允许您编写如下代码：

*我的控制器.cs*

```
public class MyController : Controller{
  public object MyRoute(){
    var pagedProducts = ProductsRepo.All().ToPagedList();
    return View(pagedProducts);
  }
} 
```

*我的路由.cshtml*

```
<ul>
  @foreach(var product in ViewModel){
    <li>@product.Name</li>
  }
</ul>
@Html.PagedListPager(ViewModel, page=> Url.Action("MyRoute", {page = page})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:36:51.140

[Steve Sanderson 在他的书Pro ASP.NET MVC 3](http://www.amazon.co.uk/gp/product/1430234040/ref=s9_simh_gw_p14_d3_g14_i2?pf_rd_m=A3P5ROKL5A1OLE&pf_rd_s=center-2&pf_rd_r=1WRCGYDDA0J3Z2NRTV8V&pf_rd_t=101&pf_rd_p=467128533&pf_rd_i=468294)中描述了一个分页支持的例子，我强烈推荐这本书（尽管下一个[版本](http://www.amazon.co.uk/gp/product/1430242361/ref=s9_simh_gw_p14_d0_g14_i2?pf_rd_m=A3P5ROKL5A1OLE&pf_rd_s=center-2&pf_rd_r=03VRFB6QMV2ZZ8Q4TDC5&pf_rd_t=101&pf_rd_p=467128533&pf_rd_i=468294)发布应该不会太久）。

他将产品控制器（产品列表页面）描述为：

```
public class ProductController : Controller {
   public int PageSize = 4; //This could be retrieved from the database

   private IProductRepository repository;
   public ProductController(IProductRepository repoParam) {
      repository = repoParam;
   }

   public ViewResult List(int page = 1) {
      ProductsListViewModel viewModel = new ProductsListViewModel {
         Products = repository.Products
            .OrderBy(p => p.ProductID)
            .Skip((page - 1) * PageSize)
            .Take(PageSize),
         PagingInfo = new PagingInfo {
            CurrentPage = page,
            ItemsPerPage = PageSize,
            TotalItems = repository.Products.Count()
         }
      };
   return View(viewModel);
} 
```

然后，对该操作的查询可能采用以下形式：

```
http://localhost:23081/Product/List?page=2 
```

（或您需要的任何路由）。

这个视图模型将是：

```
public class ProductsListViewModel {
   public IEnumerable<Product> Products { get; set; }
   public PagingInfo PagingInfo { get; set; }
} 
```

PagingInfo 模型将是：

```
public class PagingInfo {
   public int TotalItems { get; set; }
   public int ItemsPerPage { get; set; }
   public int CurrentPage { get; set; }
   public int TotalPages {
      get { return (int)Math.Ceiling((decimal)TotalItems / ItemsPerPage); }
   }
} 
```

然后，您可以根据需要使用此分页信息在视图中显示信息。

# java - Jackson ResourceAccessException：I/O 错误：无法识别的字段

> ID：10174820
> 
> 赞同：1
> 
> 时间：2012-04-16T13:12:15.640
> 
> 标签：java, json, jackson

我有这个 json 文件

```
[
   {
      "foo":{
         "comment":null,
         "media_title":"How I Met Your Mother",
         "user_username":"nani"
      }
   },
   {
      "foo":{
         "comment":null,
         "media_title":"Family Guy",
         "user_username":"nani"
      }
   }
] 
```

所以它是一组 Foo 实体。

然后我得到了我的 Foo 对象：

```
 import org.codehaus.jackson.annotate.JsonProperty;
    import org.codehaus.jackson.map.annotate.JsonRootName;

    @JsonRootName("foo")
    public class Foo {

        @JsonProperty
        String comment;
        @JsonProperty("media_title")
        String mediaTitle;
        @JsonProperty("user_username")
        String userName;

/** setters and getters go here **/

    } 
```

然后我得到了我的 FooTemplate 如下：

```
public List<Foo> getFoos() {
    return java.util.Arrays.asList(restTemplate.getForObject(buildUri("/foos.json"),
            Foo[].class));
} 
```

但是当我运行我的简单测试时，我得到：

```
org.springframework.web.client.ResourceAccessException: I/O error: Unrecognized field "foo" (Class org.my.package.impl.Foo), not marked as ignorable at [Source: java.io.ByteArrayInputStream@554d7745; line: 3, column: 14] (through reference chain: org.my.package.impl.Foo["foo"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:57:25.797

这`Exception`表明它正在尝试将`JSONObject`'s （那些是顶级元素的元素`JSONArray`）反序列化为`Foo`对象。所以你没有`Foo`实体数组，你有一个有`Foo`成员的对象数组。

这是`ObjectMapper`正在尝试做的事情：

```
[
   {            <---- It thinks this is a Foo.
      "foo":{   <---- It thinks this is a member of a Foo.
         "comment":null,
         "media_title":"How I Met Your Mother",
         "user_username":"nani"
      }
   },
   {            <---- It thinks this is a Foo.
      "foo":{   <---- It thinks this is a member of a Foo.
         "comment":null,
         "media_title":"Family Guy",
         "user_username":"nani"
      }
   }
] 
```

正因为如此，`Exception`抱怨

> 无法识别的字段“foo”（类 org.my.package.impl.Foo）

也许您想取出第一个`JSONObject`，并摆脱`foo`标识符。

```
[
   {
      "comment":null,
      "media_title":"How I Met Your Mother",
      "user_username":"nani"
   },
   {
      "comment":null,
      "media_title":"Family Guy",
      "user_username":"nani"
   }
] 
```

***编辑***

您也可以创建一个`Bar`包含单个`Foo`实例的新对象，并尝试将其解组为一个数组。

```
class Bar {
    @JsonProperty
    private Foo foo;

    // setter/getter
}

public List<Bar> getBars() {
    return java.util.Arrays.asList(restTemplate.getForObject(buildUri("/foos.json"),
            Bar[].class));
} 
```

# wcf - Azure 端点 - 不同的部署

> ID：10174821
> 
> 赞同：2
> 
> 时间：2012-04-16T13:12:15.647
> 
> 标签：wcf, azure, wcf-rest

目前，我们在 Azure 上运行 UI Web 角色和 Web 服务 Web 角色 (WCF REST)。每个角色包含 2 个实例（用于负载平衡和满足 SLA 要求） **。UI Web 角色和 Web 服务 Web 角色在同一个订阅中，但在不同的部署中。** 我们不想合并代码库（可维护性等）。所以 UI 层在 xyz.cloudapp.net 上，Web 服务层在 abc.cloudapp.net 上。

目前，要求是使 Web 服务 Web 角色成为内部端点，即只能由 UI 层访问。关于配置内部端点并从不同的部署访问它的文献不是很清楚。

我假设这两个不同的角色需要成为单个部署的一部分才能正常工作。这可以在不影响部署的情况下完成吗？任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:59:48.200

内部端点只能在单个部署中访问，并且不会通过负载均衡器进行路由（因此，如果您有 2 个 wcf 服务实例可在内部端点上访问，则需要在实例之间分配调用）。当然，这需要您将 web 角色和 wcf web 角色放入同一个部署中。

您可能需要考虑使用服务总线作为从 Web 角色实例访问 wcf 服务的安全方式。或者...通过输入端点公开 wcf 服务，但保护服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:59:32.020

您是否考虑过使用 ACS（*[访问控制服务](http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx)*）来限制[使用基于声明的身份验证](http://msdn.microsoft.com/pt-pt/library/gg185907.aspx)对 WCF 端点的访问？

您可以[通过 WCF 绑定](http://msdn.microsoft.com/en-us/library/ms734736.aspx)提供多种保护方案。

[内部端点](http://msdn.microsoft.com/en-US/library/gg433033.aspx)只能与同一部署中的角色间通信。如果您有 2 个单独的部署（*`abc.cloudapp.net`并且`xyz.cloudapp.net`，内部端点对您没有帮助*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:06:19.520

我喜欢将一种方法称为虚拟 DMZ，它可以满足您的需求：[http ://brentdacodemonkey.wordpress.com/?s=virtual+dmz](http://brentdacodemonkey.wordpress.com/?s=virtual+dmz)

它利用 ACS 和 WCF 绑定来允许您创建对输入端点（然后进行负载平衡）的访问控制。当然，如果您不想要一些健壮的东西，您可以只使用标准的旧 WCF 相互身份验证方案。

也就是说，大卫提出了一个很好的观点。内部端点只能通过单个部署的服务访问。这是因为该服务代表一个隔离边界（想想虚拟局域网分支），并且唯一的输入端点可以从该边界之外寻址。

# blackberry - 黑莓标签栏控件

> ID：10174823
> 
> 赞同：1
> 
> 时间：2012-04-16T13:12:23.883
> 
> 标签：blackberry

我想在我的应用程序中有一个标签栏。我在黑莓中尝试了它的示例代码，但我希望它位于屏幕底部。我尝试了此代码，但它给了我未捕获的运行时异常。为什么会这样？这段代码有什么问题？

```
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.image.*;
import net.rim.device.api.ui.toolbar.*;
import net.rim.device.api.util.*;
import net.rim.device.api.system.*;
import net.rim.device.api.command.*;

public class ToolbarDemo extends UiApplication
{
    public static void main(String[] args)
    {

        ToolbarDemo theApp = new ToolbarDemo();       
        theApp.enterEventDispatcher();
    }

    public ToolbarDemo()
    {        
        // Push a screen onto the UI stack for rendering.
        pushScreen(new ToolbarDemoScreen());
    }

    private final static class ToolbarDemoScreen extends MainScreen
    {
        public ToolbarDemoScreen()
        {              
            if (ToolbarManager.isToolbarSupported()) 
            {
                setTitle("Toolbar Demo");

                ToolbarManager manager = new ToolbarManager();
                setToolbar(manager);

                try 
                {
                    Bitmap myBitmap = Bitmap.getBitmapResource("myImg.jpg");
                    Image myImage = ImageFactory.createImage(myBitmap);

                    /*
                     * To create more buttons, Repeat the following lines 
                     * up until manager.add() 
                     */
                    ToolbarButtonField button1 = new ToolbarButtonField(myImage, new StringProvider("butn1"));
                    button1.setCommandContext(new Object()
                    {
                        public String toString()
                        {
                            return "Button1"; 
                        }          
                    });

                    button1.setCommand(new Command(new CommandHandler()
                    {         
                        public void execute(ReadOnlyCommandMetadata metadata, Object context)
                        {
                            Dialog.alert("Executing command for " + context.toString());
                        }           
                    }));

                    manager.add(new ToolbarSpacer(0));
                    manager.add(button1);
                }
                catch (Exception e)
                {
                    System.out.println(e.getMessage());
                }
            } 
            else 
            {
                Dialog.alert("The Toolbar is not supported on this device.");
            }
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:47:16.777

如果您收到异常，`Uncaught Exception: pushModalScreen called by a non-event thread`那么您可以尝试以下代码片段来显示警报。

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
    public void run() {
        Dialog.alert("The Toolbar is not supported on this device.");
    }
}); 
```

请检查这个问题，[“非事件线程调用的pushModalScreen”在事件线程上抛出](https://stackoverflow.com/questions/2525210/pushmodalscreen-called-by-a-non-event-thread-thrown-on-event-thread)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:28:12.760

试试这个代码

```
EncodedImage e1 = EncodedImage.getEncodedImageResource("home.png");
EncodedImage e2 = EncodedImage.getEncodedImageResource("map.png");
EncodedImage e3 = EncodedImage.getEncodedImageResource("members.png");
EncodedImage e4 = EncodedImage.getEncodedImageResource("message.png");
EncodedImage e5 = EncodedImage.getEncodedImageResource("settings.png");
EncodedImage e6 = EncodedImage.getEncodedImageResource("logout.png");

HorizontalFieldManager buttonPanel = new HorizontalFieldManager(Field.FIELD_TOP | Field.USE_ALL_WIDTH);

  VerticalFieldManager vfm=new VerticalFieldManager();
  vfm.add(new LabelField("Map"));
  vfm.add(new BitmapField(e2.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("MAP");
        return true;
       }

  });
  buttonPanel.add(vfm);
  buttonPanel.add(new LabelField("  "));

  VerticalFieldManager vfm1=new VerticalFieldManager();
  vfm1.add(new LabelField("Members"));
  vfm1.add(new BitmapField(e3.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Members");
        return true;
       }

  });
  buttonPanel.add(vfm1);

  VerticalFieldManager vfm2=new VerticalFieldManager();
  vfm2.add(new LabelField("Message"));
  vfm2.add(new BitmapField(e4.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Message");
        return true;
       }

  });
  buttonPanel.add(vfm2);

  VerticalFieldManager vfm3=new VerticalFieldManager();
  vfm3.add(new LabelField("Settings"));
  vfm3.add(new BitmapField(e5.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Settings");
        return true;
       }

  });
  buttonPanel.add(vfm3);

  VerticalFieldManager vfm4=new VerticalFieldManager();
  vfm4.add(new LabelField("Logout"));
  vfm4.add(new BitmapField(e6.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Logout");
        return true;
       }

  });
  buttonPanel.add(vfm4);

  setStatus(buttonPanel); 
```

# asp.net - 如何将 SQL 日期时间转换为 DD/MM/YYYY 22:00

> ID：10174830
> 
> 赞同：2
> 
> 时间：2012-04-16T13:12:46.040
> 
> 标签：asp.net, sql-server, type-conversion

我目前正在使用`CONVERT(VARCHAR(24), GETDATE(), 113)`这给了我`dd/mon/yyyy hh:mm:ss:mmm`

我不想要秒、毫秒或基于字符的月份。

我怎样才能在 SQL 中做到这一点？

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:25:17.950

您可以选择格式 101（美国）的前 10 个字符和格式 108（时间）的前 5 个字符：

```
select CONVERT(VARCHAR(10), GETDATE(), 101) + ' ' + 
       CONVERT(VARCHAR(5), GETDATE(), 108) 
```

[这是 MSDN 上的转换格式列表。](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:15:32.713

您需要从[这里](http://msdn.microsoft.com/en-us/library/ms187928.aspx)选择不同的格式。如果这些格式都不起作用，请使用该`DATEPART()`函数自己构建字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:37:20.287

有人不得不说：考虑在客户端而不是使用 TSQL 进行格式化。如果您的用户规格发生变化，这使得更改显示变得更容易。

```
thisDate1.ToString("dd/MMM/yyyy HH:mm") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:17:28.290

采用：

```
CONVERT(varchar,[datefield],104)+ ' '+ SUBSTRING(CONVERT(varchar,[datefield],108),1,5) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T19:14:19.020

将代码更改为 106 CONVERT(VARCHAR(24), GETDATE(), 106)

# wordpress - urldecode wordpress 菜单

> ID：10174840
> 
> 赞同：0
> 
> 时间：2012-04-16T13:13:42.403
> 
> 标签：wordpress, friendly-url, urldecode

我使用 word press 菜单在我的 UTF-8 希伯来语网站上显示菜单。出于某种原因，word-press 不会自动对链接实施 URL 解码，因此我的链接非常难看。

%D7%9E%D7%AA%D7%9B%D7%95%D7%9F%20%D7%9E%D7%92%D7%A0%D7%99%D7%91

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:49:06.330

这不是问题，因为 URI 中不允许使用 Unicode 字符。

[URL 中的 Unicode 字符](https://stackoverflow.com/questions/2742852/unicode-characters-in-urls)

编辑：如果你真的想对你的链接进行 urldecode，你应该修改你的主题：而不是使用`wp_nav_menu`，你可以使用 url 轻松构建你的菜单[`wp_get_nav_menu_items`](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)并做你想做的事情。

# android - 带按钮的图片 - 位于 Google 地图上方

> ID：10174847
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:14:05.993
> 
> 标签：android, image, map, android-relativelayout

我想在“我的地图”上方添加一个带有 2 个按钮的图像。我怎样才能做到这一点？这就是我想在 Android 中实现的目标。![http://www.machinesthatgobing.com/images/skyhook-iphone-apple.jpg](../Images/57b31b228a87be07e9a61ba0c8077f77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:45:08.917

检查此链接：

[http://android-er.blogspot.in/2011/07/draw-on-custom-view-over-mapview.html](http://android-er.blogspot.in/2011/07/draw-on-custom-view-over-mapview.html)

或者

您可以通过添加类似这样的标题栏/视图来实现此目的，使用该图像作为标题视图的背景：

```
<RelativeLayout
    android:id="@+id/headerlayout" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:background="drawable_image/color(Whatever u want)"
    >

    <Button android:id="@+id/one" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true" android:text="one">
    </Button>

     <Button android:id="@+id/two" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentTop="true"
        android:layout_alignParentRight="true" android:text="two">
    </Button>
</RelativeLayout>

<MapViewActivity
    xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/mapview"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:clickable="true" android:apiKey="your map key"
    android:layout_below="@+id/headerlayout"

    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:23:15.127

试试这个代码。它将使用RelativeLayout在地图视图上放置按钮

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/mapview"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:clickable="true" android:apiKey="your_id" />
    <Button android:layout_below="@+id/mapview"
        android:text="@+id/Button03"
        android:id="@+id/Button01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"/>
    <Button android:layout_below="@+id/mapview"
        android:text="@+id/Button02"
        android:id="@+id/Button02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"/>
    <Button android:text="@+id/Button03"
        android:id="@+id/Button03"
        android:layout_width="wrap_content"
        android:layout_toLeftOf="@+id/mapview"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

# python - 使用筛子查找除数的数量，但仅限于 n^2

> ID：10174848
> 
> 赞同：0
> 
> 时间：2012-04-16T13:14:06.910
> 
> 标签：python

通常我使用以下代码来查找除数的数量，直到给定的 n（tau 函数）：

```
L=[0 for i in range(N+1)]
for i in range(1,N+1):
    for j in range(i, N+1,i):
        L[j]+=1
print L 
```

哪个输出

```
[0, 1, 2, 2, 3, 2, 4, 2, 4, 3, 4] 
```

但是如果我想输出 n^2 的除数呢？现在它正在查看 n=0,1,2,3,4,5,6,7,8,9,10，但我想更改它，所以它实际上正在查看 0,1,4,9,16， 25,36,49,64,81,100（无需与任何其他数字混淆）。

输出应如下所示：

```
[0, 1, 3, 3, 5, 3, 9, 3, 7, 5, 9] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:29:46.020

根据有多大`n`，Nolen 的答案可能就足够了（公平地说，您的原始代码一开始就没有优化）。然而，值得注意的是什么`n**2` *是*. 如果我们可以分解一个数字，比如说`10`，我们会得到：

```
10    = (2**1)*(5**1)
10**2 = (2**(1+1))*(5**(1+1)) = (2**2)*(5**2) 
```

即素数分解中的指数中的数字只是翻了一番。假设您已经可以找到一个数字的素数分解`n`（您的代码可以修改），除数的数量可以`n**2`通过（伪代码）找到

```
div  := (list of divisors of n)
div2 := (a list with two copies of div)
loop through all combinations div2:
      if combo <= sqrt(n): keep unique 
```

如果我们这样做，`10`我们会得到：

```
div  := (1,2,5,10)
div2 := (1,2,5,10,1,2,5,10)
keep := (1,2,5,10,2*2,2*5) 
unique_keep := (1,2,4,5,10) 
```

因此，每个数字都`unique_keep`分为`10**2=100`相应的因子，除了 10 的奇异情况是它自己的因子。这给出了九个除数：

```
1 -> 100
2 -> 50
4 -> 25
5 -> 20
10 -> 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:01:07.623

我相信你想要这样的东西？

```
>>> [sum(i**2 % j == 0 for j in range(1, i**2 + 1)) for i in range(11)]
[0, 1, 3, 3, 5, 3, 9, 3, 7, 5, 9] 
```

或更一般地说

```
>>> def divisors(start, end, trans=lambda x:x):
...     return [sum(i % j == 0 for j in range(1, i + 1)) for i in (trans(t) for t in range(start, end+1))]
... 
>>> divisors(0, 10, lambda x: x**2)
[0, 1, 3, 3, 5, 3, 9, 3, 7, 5, 9]
>>> divisors(0, 10)
[0, 1, 2, 2, 3, 2, 4, 2, 4, 3, 4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:00:50.967

如果你有一个数的质因数，那么计算它的因数的数量就像计算它的平方（或者，实际上是任何幂）的因数一样容易。

```
def factor_count(N,power):
    factor_count = list()
    for n in range(N+1):
        prime = 2
        prime_factors = list()
        exponents = list()
        while n > 1:
            while (n / prime) % 1 == 0:
                if prime not in prime_factors:
                    prime_factors.append(prime)
                    exponents.append(1)
                else:
                    exponent = exponents.pop()+1
                    exponents.append(exponent)
                n /= prime
            prime += 1
        factors = 1
        for x in exponents:
            factors *= power*x+1
        factor_count.append(factors)
    print(factor_count) 
```

另外，我会注意到我的程序与你的程序在零有多少因素方面有所不同。修改代码以解决此问题很简单，但由于除数通常是在自然数上定义的，因此完全忽略它同样容易。

为了让您了解与给出的其他答案相比的效率：

```
power_factors(1000,2000000000)                                        #evaluates almost instantly despite having an exponent of 2 billion
[sum(i**2 % j == 0 for j in range(1, i**2 + 1)) for i in range(1001)] #I got fed up of waiting before it managed to finish even with just an exponent of 2 
```

# java - java右键双击鼠标事件的行为与Mac OS X上的左键双击鼠标事件相同

> ID：10174853
> 
> 赞同：1
> 
> 时间：2012-04-16T13:14:23.343
> 
> 标签：java, swing, mouseevent

我有一个 java swing GUI，其中必须在双击和单击时执行特定操作。我有这个代码

```
 if (e.getClickCount() == 1)
    {
    // do something on single click
    }
    if (e.getClickCount() == 2)
    {
    // do something on double click
    } 
```

它工作正常。问题是此代码对于鼠标右键和左键单击的行为相同。我不想在双击右键时执行任何操作。只想在单击鼠标右键时显示​​弹出菜单。

任何机构请指导我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:28:57.597

您必须在 MouseEvent 对象（变量“e”）中检查哪个按钮导致了事件：

```
if(e.getClickCount() == 2){ // two clicks, ok
    if((e.getModifiers() & InputEvent.BUTTON1_MASK) == InputEvent.BUTTON1_MASK){
    // clicks are from BUTTON1, aka left click
    // double left click, insert code here      
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:31:17.087

你可以使用这个代码，`Double_Click`里面检查的地方`Swing Timer`，另一个选项是使用`Toolkit`（从未使用过），也许[更多信息在这里](https://stackoverflow.com/a/6290045/714968)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ClickListener extends MouseAdapter implements ActionListener {

    private final static int clickInterval = (Integer) Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");
    private MouseEvent lastEvent;
    private Timer timer;

    public ClickListener() {
        this(clickInterval);
    }

    public ClickListener(int delay) {
        timer = new Timer(delay, this);
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        /*if (e.getClickCount() > 2) {
            return;
        }
        lastEvent = e;
        if (timer.isRunning()) {
            timer.stop();
            doubleClick(lastEvent);
        } else {
            timer.restart();
        }*/

        if (timer.isRunning() && !e.isConsumed() && e.getClickCount() > 1) {
            System.out.println("double");
            timer.stop();
        } else {
            timer.restart();
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        timer.stop();
        singleClick(lastEvent);
    }

    public void singleClick(MouseEvent e) {
    }

    public void doubleClick(MouseEvent e) {
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Double Click Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addMouseListener(new ClickListener() {

            @Override
            public void singleClick(MouseEvent e) {
                System.out.println("single");
            }

            @Override
            public void doubleClick(MouseEvent e) {
                System.out.println("double");
            }
        });
        frame.setPreferredSize(new Dimension(200, 200));
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# sockets - 如果 read() 或 send() 返回 <0，则应该始终关闭套接字？

> ID：10174855
> 
> 赞同：1
> 
> 时间：2012-04-16T13:14:29.940
> 
> 标签：sockets, winsock

除非 read() 或 send() 使用 WSA_IO_PENDING 或 WSAEWORLDBLOCK 返回 <0，否则是否存在 read() 或 send() 返回 <0 但连接仍然存在的情况？

我编写了我的代码，如果 read() 或 send() 返回 <0（WSA_IO_PENDING 或 WSAEWORLDBLOCK 除外），则始终关闭连接，但我不确定我是否走在正确的轨道上。

请回复。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:35:30.577

好吧，在 Unix 上，至少还有一个其他[`errno(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)值并不意味着世界末日 - `EINTR`，例如，参见[`send(2)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)手册中的这个：

`**EINTR** A signal occurred before any data was transmitted; see [signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html).`

# mailman - 基于postfix(dropmail)的mailman配置问题

> ID：10174861
> 
> 赞同：1
> 
> 时间：2012-04-16T13:14:41.670
> 
> 标签：mailman

最近用postfix/mysql/dropmail等搭建了一个邮件系统，各个模块都运行的很流畅。但是，当我要安装mailman 进行邮件列表配置时，问题就出现了。

我已经建立了几个电子邮件地址的邮件列表（让它成为 maillist@mydomain.com），但是当我想在那里发送邮件时，它出现了：

```
Apr 16 20:06:26 mail postfix/smtpd[1107]: NOQUEUE: reject: RCPT from localhost[127.0.0.1]: 550 5.1.1 <maillist@mydomain.com>: Recipient address rejected: User unknown; from=<wangjingfei@mydomain.com> to=<maillist@mydomain.com> proto=ESMTP helo=<localhost.localdomain> 
```

我一整天都想不通。下面是mailman相关的配置：

后缀：/etc/postfix/mail.cf

```
alias_database = hash:/etc/postfix/aliases
alias_maps = hash:/etc/aliases, hash:/etc/postfix/aliases, hash:/etc/mailman/aliases

# Configuration for mailman
#virtual_alias_domain = mydomain.com
luser_relay =
recipient_delimiter = +
owner_request_special = no
virtual_maps = mysql:/etc/postfix/mysql_virtual_alias_maps.cf, hash:/etc/mailman/virtual-mailman
virtual_alias_maps = $virtual_maps
transport_maps = hash:/etc/postfix/transport
relay_domains = mail.mydomain.com
mailman_destination_recipient_limit = 1 
```

后缀：/etc/postfix/master.cf

```
mailman   unix  -       n       n       -       -       pipe
  flags=FR user=mailman:mailman argv=/usr/lib/mailman/bin/postfix-to-mailman.py
  ${nexthop} ${user} 
```

邮递员：/etc/mailman/aliases

```
## maillist mailing list
maillist:              "|/var/www/mailman/mail/mailman post maillist"
maillist-admin:        "|/var/www/mailman/mail/mailman admin maillist"
maillist-bounces:      "|/var/www/mailman/mail/mailman bounces maillist"
maillist-confirm:      "|/var/www/mailman/mail/mailman confirm maillist"
maillist-join:         "|/var/www/mailman/mail/mailman join maillist"
maillist-leave:        "|/var/www/mailman/mail/mailman leave maillist"
maillist-owner:        "|/var/www/mailman/mail/mailman owner maillist"
maillist-request:      "|/var/www/mailman/mail/mailman request maillist"
maillist-subscribe:    "|/var/www/mailman/mail/mailman subscribe maillist"
maillist-unsubscribe:  "|/var/www/mailman/mail/mailman unsubscribe maillist" 
```

邮递员：/var/www/mailman/Mailman/mm_cfg.py

```
from socket import *
try:
    fqdn = getfqdn()
except:
    fqdn = 'mm_cfg_has_unknown_host_domains'

DEFAULT_URL_HOST   = 'mail.software.ict.ac.cn'
DEFAULT_EMAIL_HOST = 'software.ict.ac.cn'
MAT = 'Postfix'

POSTFIX_STYLE_VIRTUAL_DOMAINS= ['software.ict.ac.cn', 'software.ict.ac.cn']

# Because we've overriden the virtual hosts above add_virtualhost
# MUST be called after they have been defined.

add_virtualhost(DEFAULT_URL_HOST, DEFAULT_EMAIL_HOST) 
```

如果有人可以提供帮助，我将不胜感激。谢谢！

# c++ - 使用 openMP 并行化 - 堆栈或堆变量

> ID：10174862
> 
> 赞同：1
> 
> 时间：2012-04-16T13:14:41.823
> 
> 标签：c++, multithreading, stack, openmp

我有一个可行的并行化解决方案。然而，并行化对执行时间的改善非常非常轻微。我认为这是因为我在循环中新建并删除了一些变量。我希望它是堆栈创建的，但是 Command 类是抽象的，并且必须保持抽象。我能做些什么来解决这个问题？如何改善花在这些非常长的循环上的时间？？？

```
#pragma omp parallel for  reduction(+:functionEvaluation)
for (int i=rowStart;i<rowEnd+1;i++)
{
    Model model_(varModel_);
    model_.addVariable("i", i);
    model_.addVariable("j", 1);
    Command* command_ = formulaCommand->duplicate(&model_);
    functionEvaluation += command_->execute().toDouble();
    delete command_;
} 
```

问题也可能出在其他地方！欢迎咨询！！

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:35:57.437

您可能想要使用[`private`or`firstprivate`子句](http://en.wikipedia.org/wiki/OpenMP#OpenMP_clauses)。

你`#pragma`会包含`...private(varModel, formulaCommand)...`或类似的，然后每个线程都会有自己的这些变量的副本。使用`firstprivate`将确保线程特定变量具有复制的初始值，而不是未初始化。这将消除对`new`and的需要`delete`，假设您可以只修改每次循环迭代的实例。

这可能会也可能不会按预期工作，因为您没有提供很多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:24:18.577

我认为您应该尝试使用一种机制来重用分配的内存。您可能不知道`Command`对象的大小或对齐方式，因此“足够大”的缓冲区是不够的。我会让你的`duplicate`方法接受两个参数，第二个是对 a 的引用`boost::pool`。如果池对象足够大，只需在其中构造新`Command`对象，如果它没有扩展它，则构造到其中。`boost::pool`将为您处理对齐问题，因此您不必考虑它。这样，您只需为每个线程执行几次动态内存分配。

顺便说一句，在 C++ 中返回原始指针通常不是一个好习惯。改用智能指针，没有任何但更好的方式...好吧，在这种情况下有一个但是:)，因为根据我的建议，您将在后台进行一些自定义内存管理。尽管如此，最好的做法是编写一个自定义智能指针，它可以优雅地处理您的特殊情况，而不会冒着用户搞砸的风险。你当然可以像其他人一样做，在这种情况下例外:)（我的建议在正常情况下仍然有效，在上面的问题中，你通常应该使用类似的东西`boost::scoped_ptr`）

# asp.net-mvc-3 - 我的视图需要一个 html 助手，但不太确定要使用哪个

> ID：10174871
> 
> 赞同：0
> 
> 时间：2012-04-16T13:15:12.303
> 
> 标签：asp.net-mvc-3, html, view, html-helper

我正在制作一个 MVC3 Web 应用程序。我有一个表格，里面装满了我的数据库中的数据，但我想知道如何让它只显示概要的前三行而不是全部 10 行。我认为这有关系使用 HTML Helpers 但想知道是否有人可以帮我找到正确的代码？？？？？？任何帮助都会很棒！

```
 @model IEnumerable<TheatreGroup.Models.Show>
@{
    ViewBag.Title = "Shows";
}
<h2>
    Shows</h2>

<p>Below is a list of shows which will be avalible in the next couple of weeks</p>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
@using (Html.BeginForm())
{ 
    <p>
        Find by name: @Html.TextBox("SearchString")
        <input type="submit" value="Search" /></p>
    }
<table>
    <tr>
        <th>
            @Html.ActionLink("name", "Index", new { sortOrder = ViewBag.nameSortParm,})
        </th>
        <th>
            @Html.ActionLink("writer", "Index", new { sortOrder = ViewBag.writerSortParm,})
        </th>
        <th>
            @Html.ActionLink("synopsis", "Index", new { sortOrder = ViewBag.synopsisSortParm,  })
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model){

        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.writer)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.synopsis)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.showid }) |
                @Html.ActionLink("Details", "Details", new { id = item.showid }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.showid })
            </td>
        </tr>
    }
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:20:40.533

我将我的答案分为两种状态：

1.  您需要页面流下方的其他 7 行（如“显示更多结果”链接）

2.  您不需要列表的其余部分。

解决方案1：

使用@Dangerous 所说的话。

```
@for (int i=0; i<3; i++)
{
    @Html.DisplayFor(m => m[i].name) // And the rest of the data
} 
```

**请注意**，如果您没有 3 个元素，则此代码将引发异常。您可以做的是检查计数是否小于 3，然后运行到该数字。

您可能还想在 foreach 循环上继续运行，只需提供某种将其隐藏的类 new { @class = 'hidden' } 然后当您按下某行时，只需使用 Javascript (jQuery) 来显示它们。

解决方案2：

如果您不需要其余元素，则在将模型发送到视图时只需使用 take。

```
public ActionResult Action()
{
    var model = GetListFromDatabase().Take(3); // LINQ
    return View(model);
} 
```

**您可能需要 ToList() 才能使其工作，这取决于**

这样您就可以保持代码不变，只需缩短发送到视图的元素数量。

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:44:25.370

您`@foreach (var item in Model)`用于显示每一行。

尝试使用`@for (int i=0; i<3; i++)`，以便循环仅显示前 3 个项目。

然后，您需要为`@Html.DisplayFor(m => m[i].name)`Display For 引用模型等。我相信这应该有效。

# python - 将文件内容读入数组

> ID：10174878
> 
> 赞同：1
> 
> 时间：2012-04-16T13:05:50.430
> 
> 标签：python

我对 Python 有点熟悉。我有一个文件，其中包含我需要以非常具体的方式阅读的信息。下面是一个例子...

```
1
6
0.714285714286
0    0    1.00000000000
0    1    0.61356352337
...
-1  -1    0.00000000000
0    0    5.13787636499
0    1    0.97147643932
...
-1  -1    0.00000000000
0    0    5.13787636499
0    1    0.97147643932
...
-1  -1    0.00000000000
0 0 0 0   5.13787636499
0 0 0 1   0.97147643932
.... 
```

所以每个文件都会有这种结构（制表符分隔）。

*   第一行必须作为变量读入，第二行和第三行也必须读入。
*   接下来，我们有四个由 . 分隔的代码块`-1 -1 0.0000000000`。每个代码块有 'n' 行长。前两个数字表示该行中的第三个数字要插入到数组中的位置/位置。仅列出唯一位置（因此，位置 0 1 将与 1 0 相同，但不会显示该信息）。
*   注意：第 4 块代码有一个 4 索引编号。

**我需要的**

*   前 3 行作为唯一变量读入
*   使用前 2 （或 4 ）列数字作为数组索引，将第 3 列作为插入数组的值，将每个数据块读入数组。
*   仅显示唯一的数组元素。我还需要用正确的值填充镜像位置（`0 1`值也应该出现在 中`1 0`）。
*   最后一个块需要插入到一个 4 维数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:38:44.610

我重写了代码。现在它几乎是你所需要的。你只需要微调。

我决定保留旧答案-也许它也会有所帮助。因为新的功能足够丰富，有时可能看不懂。

```
def the_function(filename):
    """
    returns tuple of list of independent values and list of sparsed arrays as dicts
    e.g. ( [1,2,0.5], [{(0.0):1,(0,1):2},...] )
    on fail prints the reason and returns None:
    e.g. 'failed on text.txt: invalid literal for int() with base 10: '0.0', line: 5'
    """

    # open file and read content
    try:
        with open(filename, "r") as f:
            data_txt = [line.split() for line in f]
    # no such file
    except IOError, e:
        print 'fail on open ' + str(e)

    # try to get the first 3 variables
    try:
        vars =[int(data_txt[0][0]), int(data_txt[1][0]), float(data_txt[2][0])]
    except ValueError,e:
        print 'failed on '+filename+': '+str(e)+', somewhere on lines 1-3'
        return

    # now get arrays
    arrays =[dict()]
    for lineidx, item in enumerate(data_txt[3:]):
        try:
            # for 2d array data
            if len(item) == 3:
                i, j = map(int, item[:2])
                val = float(item[-1])
                # check for 'block separator'
                if (i,j,val) == (-1,-1,0.0):
                    # make new array
                    arrays.append(dict())
                else:
                    # update last, existing
                    arrays[-1][(i,j)] = val
            # almost the same for 4d array data
            if len(item) == 5:
                i, j, k, m = map(int, item[:4])
                val = float(item[-1])
                arrays[-1][(i,j,k,m)] = val
        # if value is unparsable like '0.00' for int or 'text'
        except ValueError,e:
            print 'failed on '+filename+': '+str(e)+', line: '+str(lineidx+3)
            return
    return vars, arrays 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:25:13.677

正如我理解你的要求是什么..

```
# read data from file into list
parsed=[]
with open(filename, "r") as f:
    for line in f:
        # # you can exclude separator here with such code (uncomment) (1)
        # # be careful one zero more, one zero less and it wouldn work
        # if line == '-1  -1    0.00000000000':
        #     continue
        parsed.append(line.split())

# a simpler version
with open(filename, "r") as f:
    # # you can exclude separator here with such code (uncomment, replace) (2)
    # parsed = [line.split() for line in f if line != '-1  -1    0.00000000000']
    parsed = [line.split() for line in f]

# at this point 'parsed' is a list of lists of strings.
# [['1'],['6'],['0.714285714286'],['0', '0', '1.00000000000'],['0', '1', '0.61356352337'] .. ]

# ALT 1 -------------------------------
# we do know the len of each data block 

# get the first 3 lines:
head = parsed[:3]

# get the body:
body = parsed[3:-2]

# get the last 2 lines:
tail = parsed[-2:]

# now you can do anything you want with your data
# but remember to convert str to int or float

# first3 as unique:
unique0 = int(head[0][0])
unique1 = int(head[1][0])
unique2 = float(head[2][0])

# cast body:
# check each item of body has 3 inner items
is_correct = all(map(lambda item: len(item)==3, body))
# parse str and cast
if is_correct:
    for i, j, v in body:
        # # you can exclude separator here (uncomment) (3)
        # # * 1\. is the same as float(1)
        # if (i,j,v) == (0,0,1.):
        #     # here we skip iteration for line w/ '-1  -1    0.0...'
        #     # but you can place another code that will be executed 
        #     # at the point where block-termination lines appear
        #     continue 

        some_body_cast_function(int(i), int(j), float(v))
else:
    raise Exception('incorrect body')

# cast tail
# check each item of body has 5 inner items
is_correct = all(map(lambda item: len(item)==5, tail))
# parse str and cast
if is_correct:
    for i, j, k, m, v in body: # 'l' is bad index, because similar to 1.
        some_tail_cast_function(int(i), int(j), int(k), int(m), float(v))
else:
    raise Exception('incorrect tail')

# ALT 2 -----------------------------------
# we do NOT know the len of each data block 

# maybe we have some array?
array = dict() # your array may be other type

v1,v2,v2 = parsed[:3]
unique0 = int(v1[0])
unique1 = int(v2[0])
unique2 = float(v3[0])

for item in parsed[3:]:
    if len(item) == 3:
        i,j,v = item
        i = int(i)
        j = int(j)
        v = float(v)

        # # yo can exclude separator here (uncomment) (4)
        # # * 1\. is the same as float(1)
        # # logic is the same as in 3rd variant
        # if (i,j,v) == (0,0,1.):
        #     continue

        # do your stuff
        # for example,
        array[(i,j)]=v
        array[(j,i)]=v

    elif len(item) ==5:
        i, j, k, m, v = item
        i = int(i)
        j = int(j)
        k = int(k)
        m = int(m)
        v = float(v)

        # do your stuff

    else:
        raise Exception('unsupported') # or, maybe just 'pass' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:12:52.563

要迭代地从文件中读取行，您可以使用以下内容：

```
with open(filename, "r") as f:
  var1 = int(f.next())
  var2 = int(f.next())
  var3 = float(f.next())
  for line in f:
    do some stuff particular to the line we are on... 
```

只需在循环之外创建一些数据结构，并将它们填充到上面的循环中。要将字符串拆分为元素，您可以使用：

```
>>> "spam   ham".split()
['spam', 'ham'] 
```

我还认为您想查看`numpy`用于数组数据结构的库，以及可能`SciPy`用于分析的库。

# iphone - 如何访问电话联系人列表并在表格视图中显示？

> ID：10174889
> 
> 赞同：1
> 
> 时间：2012-04-16T13:16:02.553
> 
> 标签：iphone, objective-c, contacts, abaddressbook

例如表格单元格具有：

1.  联系人图片

2.  联系人姓名。

我发现我们必须使用框架：

1.  地址簿框架

2.  AddressBookUI.framework

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:52:59.637

```
ABAddressBookRef addressBook = ABAddressBookCreate(); // create address book reference object
NSArray *abContactArray = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); // get address book contact array

NSInteger totalContacts =[abContactArray count];

for(NSUInteger loop= 0 ; loop < totalContacts; loop++)
{
    ABRecordRef record = (ABRecordRef)[abContactArray objectAtIndex:loop]; // get address book record

   if(ABRecordGetRecordType(record) ==  kABPersonType) // this check execute if it is person group
    {
            ABRecordID recordId = ABRecordGetRecordID(record); // get record id from address book record

            NSString *recordIdString = [NSString stringWithFormat:@"%d",recordId]; // get record id string from record id

            NSString *firstNameString = (NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty); // fetch contact first name from address book  
            NSString *lastNameString = (NSString*)ABRecordCopyValue(record,kABPersonLastNameProperty); // fetch contact last name from address book
    }
} 
```

更多检查这些链接

[http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)

[http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)

# arrays - 如何在序列中添加因子？

> ID：10174890
> 
> 赞同：1
> 
> 时间：2012-04-16T13:16:08.610
> 
> 标签：arrays, r, matrix

我正在使用一些数据挖掘工具分析数据集。响应变量有十个级别，我正在尝试创建一个分类器。

问题来了。当使用nnet和bagging函数时，结果不是很好，第5层甚至不在预测中。

我想使用混淆矩阵来分析分类器。但由于预测中未显示第 5 级，我无法获得格式良好的矩阵。那么我怎样才能获得格式良好的矩阵？即我想要一个 10 *10 矩阵。

混淆矩阵：

```
library("mda")#This is where **confusion** comes from
> confusion(pre.bag$class,CLASS)#here confusion acts like table
         true
predicted   1   2  3  4   6   7  8  9  10  5
       1  338   9  6  0   5  12 10  1  15 46
       2    9 549  1 59  18   0  3  0   0  6
       3   18   1 44  0   0   0  2  0   0  4
       4    0   1  0 21   0   0  0  0   0  0
       6    2  13  0  1 299   2  9  0   0  0
       7    5   2  1  0  10 231  6  0   1  0
       8    0   0  0  0   0   5 76  0   0  0
       9    5   1  0  0   0   0  0 62   0  0
       10   7   3  1  0   0   2  1  6 181 16
attr(,"error")
[1] 0.1231743
attr(,"mismatch")
[1] 0.03386642 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:05:58.093

试试这个：

```
pred <- factor(pre.bag$class, levels=levels(CLASS) )
confusion(pre.bag$class, CLASS) 
```

（使用 fda 对象测试。）

# ios - 如何仅重绘呈现帧缓冲区的一部分？

> ID：10174891
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:16:10.853
> 
> 标签：ios, opengl-es, framebuffer

我想在 iOS 上实现一个简单的绘图功能。我连接了一些帧缓冲区/纹理以获得所需的最终组合。

重绘整个屏幕是一个巨大的开销。我可以确定一个已经改变的矩形。

那么只画那部分的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:24:57.430

glScissor(0, 0, 50, 50); glEnable(GL_SCISSOR_TEST);

# android-manifest - 扩展应用程序类 - 重启 Android 时强制关闭

> ID：10174892
> 
> 赞同：0
> 
> 时间：2012-04-16T13:16:11.540
> 
> 标签：android-manifest, android

我的`AppMain`班级 [My class Name]`Application`在我的应用程序中扩展了班级。那有一些全局变量。我在清单里面提到过。我的应用程序运行正常。我的应用程序中有退出按钮，可以使用`System.exit(0);`.

之后，当我使用“**最近的应用程序**”选项启动我的应用程序时，它就崩溃了。（仅供参考。按住 Home 键，将出现最近的应用程序）

从**应用列表**启动应用就可以了。

我怎样才能解决这个问题？

这是我清单的一部分：

```
<application
        android:name=".activity.MainApp"
        android:debuggable="false"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" > 
```

**编辑：**

崩溃日志：

```
04-16 19:04:59.416: E/AndroidRuntime(19649): FATAL EXCEPTION: main
04-16 19:04:59.416: E/AndroidRuntime(19649): java.lang.RuntimeException: Unable to resume activity {xxx.xxx.xxx..HomeActvity}: java.lang.NullPointerException
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.os.Looper.loop(Looper.java:123)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at java.lang.reflect.Method.invoke(Method.java:521)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at dalvik.system.NativeStart.main(Native Method)
04-16 19:04:59.416: E/AndroidRuntime(19649): Caused by: java.lang.NullPointerException
04-16 19:04:59.416: E/AndroidRuntime(19649):    at com.xxx.xxxx.xxx.DatabaseManager.selectFieldsFrom(DatabaseManager.java:161)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at com.xxx.xxxx.xxx.DBUtils.retrieveFromStore(DBUtils.java:75)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at com.xxx.xxxx.xxx.DBController.getAllWishList(DBController.java:407)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at xxx.xxxx.xxx.HomeActvity.retrieveFromListTable(HomeActvity.java:441)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at xxx.xxxx.xxx.HomeActvity.onResume(HomeActvity.java:642)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.Activity.performResume(Activity.java:3823)
04-16 19:04:59.416: E/AndroidRuntime(19649):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
04-16 19:04:59.416: E/AndroidRuntime(19649):    ... 12 more 
```

这是因为从最近的 apps.DB 启动时应用程序未从启动启动，`System.exit(0);`因此显示空指针异常。

**更新：**

应用程序强制关闭，因为我将启动屏幕和主屏幕活动属性设置为`Single Task`. 删除它后它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:50:20.660

如果应用程序不消耗处理器时间（运行服务或向`Activity`用户呈现），则该应用程序实际上并未运行。它可能在内存中，但 Android 的内存管理模型就是这样设计的，如果其他东西需要内存，应用程序将被终止。 `onPause`是一个很好的迹象，表明您可能很快就会退出，并且`onDestroy`应该释放退出按钮可以释放的任何资源。

如果您绝对必须退出，您可以`finish()`改用，和/或尝试在清单中使用`excludeFromRecents`or`noHistory`标志来避免崩溃。也应该有一些其他的你可以玩。

请参阅[此问题](https://stackoverflow.com/questions/4089496/android-app-exit-button)和开发人员文档的[流程生命周期部分](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)。

# android - 试图在android中旋转布局，画布似乎没有旋转

> ID：10174897
> 
> 赞同：0
> 
> 时间：2012-04-16T13:16:20.190
> 
> 标签：android, android-layout, touch, rotation, ondraw

我在[这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)学习了教程（它在触摸/滑动时动态旋转图像）并尝试用整个布局而不是一个图像来重构它，所以我从 TutorialActivity 更改了 rotateDialer() 方法，如下所示：

```
private void rotateDialer(float degrees) {
    //matrix.postRotate(degrees, dialerWidth / 2, dialerHeight / 2);
    //dialer.setImageMatrix(matrix);
    dialer.setNextRotation(degrees, dialerWidth / 2, dialerHeight  / 2);
    dialer.invalidate();
    info.setText("Current Quadrant Touched = "+currentQuadrantTouched
            +"\nAngle = "+degrees);
} 
```

其中 dialer 是我使用重写的 onDraw() 方法创建的自定义布局，该方法可以旋转画布，但是在 setNextRotation() 方法中设置了多少度，但画布似乎没有旋转！这是我的自定义布局：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.drawable.BitmapDrawable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class DialView extends FrameLayout {
public static final String LOG_TAG = "DialView";
RelativeLayout dialView;
float degrees;
float px;
float py;

public DialView(Context context) {
    super(context);
    init();
    // TODO Auto-generated constructor stub
}

public DialView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
    // TODO Auto-generated constructor stub
}
public DialView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
    init();
}

private void init()
{
    //initialise rotation
    this.degrees = 0;
    this.px = 0;
    this.py = 0;
    LayoutInflater inflator = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    dialView = (RelativeLayout) inflator.inflate(R.layout.dial_view, this,false);
    addView(dialView);
    Log.d(LOG_TAG, "DialView: init() "+ degrees+"degrees around ("+getWidth() / 2+","+getHeight() / 2+")");

}

public void setNextRotation(float degrees, float px, float py)
{
    this.degrees = degrees;
    this.px = px;
    this.py = py;
    Log.d(LOG_TAG, "Next Rotation = "+ degrees+"degrees around ("+px+","+py+")");
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.save();
    // canvas.rotate(45,<appropriate x pivot value>,<appropriate y pivot value>);
     canvas.rotate(degrees, px, py);
     Log.d(LOG_TAG, "onDraw: Rotation = "+ degrees+"degrees around ("+px+","+py+")");
     super.onDraw(canvas);
     canvas.restore();

}

} 
```

这是 dial_view.xml：

```
<ImageView
    android:id="@+id/topLeftImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="38dp"
    android:clickable="true"
    android:layout_marginTop="28dp"
    android:src="@drawable/icon" />

<ImageView
    android:id="@+id/topRightImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="50dp"
    android:src="@drawable/icon" />

<ImageView
    android:id="@+id/bottomLeftImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:clickable="true"
    android:layout_marginBottom="24dp"
    android:layout_marginLeft="22dp"
    android:src="@drawable/icon" />

<ImageView
    android:id="@+id/bottomRightImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:clickable="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="28dp"
    android:src="@drawable/icon" />

</RelativeLayout> 
```

为什么画布没有明显旋转？我在计算度数后使 onTouch() 中的拨号器无效，并且计算工作正常（我在日志中更改值）但视图似乎没有旋转，我在做什么错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:12:37.037

好的，原来从未调用过 onDraw() 方法，我只需要添加

```
setWillNotDraw(false) 
```

到我的 init() 函数，嘿，onDraw() 方法被调用了，我的视图正在旋转！！！！

# java - 如何检查给定字符串是否是Java中的有效JSON

> ID：10174898
> 
> 赞同：189
> 
> 时间：2012-04-16T13:16:20.347
> 
> 标签：java, json, validation

如何在 Java 中验证 JSON 字符串？或者我可以使用正则表达式解析它吗？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-04-16T13:19:39.590

一个疯狂的想法，尝试解析它并捕获异常：

```
import org.json.*;

public boolean isJSONValid(String test) {
    try {
        new JSONObject(test);
    } catch (JSONException ex) {
        // edited, to include @Arthur's comment
        // e.g. in case JSONArray is valid as well...
        try {
            new JSONArray(test);
        } catch (JSONException ex1) {
            return false;
        }
    }
    return true;
} 
```

此代码使用[org.json](https://www.json.org/) JSON API 实现，该实现可[在 github](https://github.com/stleary/JSON-java)、[maven](http://mvnrepository.com/artifact/org.json/json)和部分[Android 上获得](https://developer.android.com/reference/org/json/package-summary.html)。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2014-04-04T10:18:25.193

**杰克逊图书馆**

一种选择是使用[Jackson library](https://github.com/FasterXML/jackson)。首先导入最新版本（现在是）：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.7.0</version>
</dependency> 
```

然后，您可以按如下方式实现[正确答案：](https://stackoverflow.com/a/10174938/1339429)

```
import com.fasterxml.jackson.databind.ObjectMapper;

public final class JSONUtils {
  private JSONUtils(){}

  public static boolean isJSONValid(String jsonInString ) {
    try {
       final ObjectMapper mapper = new ObjectMapper();
       mapper.readTree(jsonInString);
       return true;
    } catch (IOException e) {
       return false;
    }
  }
} 
```

* * *

**谷歌 GSON 选项**

另一种选择是使用[Google Gson](https://code.google.com/p/google-gson/)。导入依赖：

```
<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.5</version>
</dependency> 
```

同样，您可以将建议的解决方案实施为：

```
import com.google.gson.Gson;

public final class JSONUtils {
  private static final Gson gson = new Gson();

  private JSONUtils(){}

  public static boolean isJSONValid(String jsonInString) {
      try {
          gson.fromJson(jsonInString, Object.class);
          return true;
      } catch(com.google.gson.JsonSyntaxException ex) { 
          return false;
      }
  }
} 
```

下面是一个简单的测试：

```
//A valid JSON String to parse.
String validJsonString = "{ \"developers\": [{ \"firstName\":\"Linus\" , \"lastName\":\"Torvalds\" }, " +
        "{ \"firstName\":\"John\" , \"lastName\":\"von Neumann\" } ]}";

// Invalid String with a missing parenthesis at the beginning.
String invalidJsonString = "\"developers\": [ \"firstName\":\"Linus\" , \"lastName\":\"Torvalds\" }, " +
        "{ \"firstName\":\"John\" , \"lastName\":\"von Neumann\" } ]}";

boolean firstStringValid = JSONUtils.isJSONValid(validJsonString); //true
boolean secondStringValid = JSONUtils.isJSONValid(invalidJsonString); //false 
```

请注意，由于尾随逗号可能会出现“次要”问题，这些问题将在 release 中修复`3.0.0`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-06-09T07:48:08.613

使用[Google Gson](https://github.com/google/gson)，您可以使用 JsonParser：

```
import com.google.gson.JsonParser;

JsonParser parser = new JsonParser();
parser.parse(json_string); // throws JsonSyntaxException 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-16T13:19:21.260

您可以使用[JSONUtils](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/util/JSONUtils.html)库中提供的[.mayBeJSON(String str)](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/util/JSONUtils.html#mayBeJSON%28java.lang.String%29)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-13T11:24:04.420

这取决于您要通过验证来证明什么。当然，按照其他人的建议解析 json 比使用正则表达式更好，因为 json 的语法比仅用正则表达式表示的要复杂。

如果 json 只会被你的 java 代码解析，那么使用相同的解析器来验证它。

但是仅仅解析并不一定会告诉你它是否会在其他环境中被接受。例如

*   许多解析器会忽略对象或数组中的尾随逗号，但旧版本的 IE 在遇到尾随逗号时可能会失败。
*   其他解析器可能接受尾随逗号，但在其后添加未定义/空条目。
*   一些解析器可能允许不带引号的属性名称。
*   一些解析器可能对字符串中的非 ASCII 字符做出不同的反应。

如果您的验证需要非常彻底，您可以：

*   尝试不同的解析器，直到找到一个在我上面提到的所有极端情况下都失败的解析器
*   或者您可以使用 javax.script.* 运行 jsonlint，
    *   [http://npmjs.org/package/jsonlint](http://npmjs.org/package/jsonlint)
*   或使用解析器结合使用 javax.script.* 运行 jshint。
    *   [https://www.npmjs.org/package/jshint](https://www.npmjs.org/package/jshint)
    *   [https://github.com/webjars/jshint](https://github.com/webjars/jshint)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-22T12:14:11.887

```
String jsonInput = "{\"mob no\":\"9846716175\"}";//Read input Here
JSONReader reader = new JSONValidatingReader();
Object result = reader.read(jsonInput);
System.out.println("Validation Success !!"); 
```

请下载**stringtree-json**库

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-05-31T14:58:35.320

**关于解析的一点：**

Json，实际上是所有语言，都使用一种**语法**，它是一组可以用作替换的规则。为了解析 json，您基本上需要反向计算这些替换

Json 是一种**上下文无关语法**，这意味着您可以拥有无​​限嵌套的对象/数组，并且 json 仍然有效。正则表达式仅处理**常规语法**（因此名称中的“reg”），它是不允许无限嵌套的上下文无关语法的子集，因此不可能仅使用正则表达式来解析所有有效的 json。您可以使用一组复杂的正则表达式和循环，假设没有人会嵌套超过 100 层，但这仍然非常困难。

**如果您准备编写自己的解析器**
，您可以在制定语法后制作递归下降解析器

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-07-05T10:36:42.950

[这是一个使用gson](https://github.com/google/gson)库进行严格 json 解析的工作示例：

```
public static JsonElement parseStrict(String json) {
    // throws on almost any non-valid json
    return new Gson().getAdapter(JsonElement.class).fromJson(json); 
} 
```

另请参阅[如何使用 GSON 检查 JSON 在 Java 中是否有效](https://stackoverflow.com/questions/43233898/how-to-check-if-json-is-valid-in-java-using-gson/47890960#47890960)以及更多信息和扩展测试用例以及各种无效示例中的其他详细答案。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-08-11T09:32:53.493

答案部分正确。我也面临同样的问题。解析 json 并检查异常似乎是常用的方法，但输入 json 的解决方案失败，例如

**{"outputValueSchemaFormat": "","sortByIndexInRecord": 0,"sortOrder":847874874387209"descending"}kajhfsadkjh**

如您所见，json 无效，因为有尾随垃圾字符。但是，如果您尝试使用 jackson 或 gson 解析上述 json，那么您将获得有效 json 的解析映射，并且垃圾尾随字符将被忽略。当您使用解析器检查 json 有效性时，这不是必需的解决方案。

有关此问题的解决方案，请参见[此处](https://stackoverflow.com/questions/38890526/trailing-characters-getting-parsed-in-json/38892378#38892378)。

PS：这个问题是我提出并回答的。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-03-27T12:25:54.973

检查给定字符串是否是**Kotlin**中的有效 JSON 。我将[MByD](https://stackoverflow.com/a/10174938/1136023) Java 的答案转换为 Kotlin

```
fun isJSONValid(test: String): Boolean {
    try {
        JSONObject(test);
    } catch (ex: JSONException) {
        try {
            JSONArray(test);
        } catch (ex1: JSONException) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-08-08T10:57:13.517

使用该`javax.json`库的解决方案：

```
import javax.json.*;

public boolean isTextJson(String text) {
    try {
        Json.createReader(new StringReader(text)).readObject();
    } catch (JsonException ex) {
        try {
            Json.createReader(new StringReader(text)).readArray();
        } catch (JsonException ex2) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-04-16T13:20:29.387

在这里您可以找到一个可以验证 JSON 文件的[工具](http://jsontools.berlios.de/)，或者您可以使用任何 JSON 库反序列化您的 JSON 文件，如果操作成功，那么它应该是有效的（例如[google-json](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)，如果输入将引发异常它解析的是无效的 JSON）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-04-04T09:31:44.917

使用 Playframework 2.6，java api 中的 Json 库也可以用来简单地解析字符串。该字符串可以是 json 数组的 json 元素。由于返回的值在这里并不重要，我们只需捕获解析错误以确定该字符串是否为正确的 json 字符串。

```
 import play.libs.Json;

    public static Boolean isValidJson(String value) {
        try{
            Json.parse(value);
            return true;
        } catch(final Exception e){
            return false;
        }
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-01T11:02:52.350

恕我直言，最优雅的方式是使用***Java API for JSON Processing*** (JSON-P)，这是符合**JSR 374**的 JavaEE 标准之一。

```
try(StringReader sr = new StringReader(jsonStrn)) {
    Json.createReader(sr).readObject();
} catch(JsonParsingException e) {
    System.out.println("The given string is not a valid json");
    e.printStackTrace();
} 
```

使用 Maven，添加对 JSON-P 的依赖：

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.json</artifactId>
    <version>1.1.4</version>
</dependency> 
```

访问[JSON-P 官方页面](https://javaee.github.io/jsonp/)了解更多信息。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-11-25T11:11:27.870

正如你所看到的，有很多解决方案，他们主要是解析 JSON 来检查它，最后你必须解析它才能确定。

但是，根据具体情况，您可以通过预先检查来提高性能。

我调用 API 时所做的只是检查第一个字符是否为“{”，最后一个字符是否为“}”。如果不是这样，我不会费心创建解析器。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-09T11:16:49.367

我找到了一个非常简单的解决方案。

请先`net.sf.json-lib`为它安装这个库。

```
 import net.sf.json.JSONException;

    import net.sf.json.JSONSerializer;

    private static boolean isValidJson(String jsonStr) {
        boolean isValid = false;
        try {
            JSONSerializer.toJSON(jsonStr);
            isValid = true;
        } catch (JSONException je) {
            isValid = false;
        }
        return isValid;
    }

    public static void testJson() {
        String vjson = "{\"employees\": [{ \"firstName\":\"John\" , \"lastName\":\"Doe\" },{ \"firstName\":\"Anna\" , \"lastName\":\"Smith\" },{ \"firstName\":\"Peter\" , \"lastName\":\"Jones\" }]}";
        String ivjson = "{\"employees\": [{ \"firstName\":\"John\" ,, \"lastName\":\"Doe\" },{ \"firstName\":\"Anna\" , \"lastName\":\"Smith\" },{ \"firstName\":\"Peter\" , \"lastName\":\"Jones\" }]}";
        System.out.println(""+isValidJson(vjson)); // true
        System.out.println(""+isValidJson(ivjson)); // false
    } 
```

完毕。享受

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-20T22:05:08.453

```
import static net.minidev.json.JSONValue.isValidJson; 
```

然后调用这个函数传入你的 JSON 字符串:)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-17T23:30:36.453

```
public static boolean isJSONValid(String test) {
    try {
        isValidJSON(test);
        JsonFactory factory = new JsonFactory();
        JsonParser parser = factory.createParser(test);
        while (!parser.isClosed()) {
            parser.nextToken();
        }
    } catch (Exception e) {
        LOGGER.error("exception: ", e);
        return false;
    }
    return true;
}

private static void isValidJSON(String test) {
    try {
        new JSONObject(test);
    } catch (JSONException ex) {
        try {
            LOGGER.error("exception: ", ex);
            new JSONArray(test);
        } catch (JSONException ex1) {
            LOGGER.error("exception: ", ex1);
            throw new Exception("Invalid JSON.");
        }
    }
} 
```

上述解决方案涵盖了两种情况：

*   重复键
*   不匹配的引号或缺少括号等。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-12T13:08:17.790

您可以尝试下面的代码，为我工作：

```
 import org.json.JSONObject;
 import org.json.JSONTokener;

 public static JSONObject parseJsonObject(String substring)
 {
  return new JSONObject(new JSONTokener(substring));
 } 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-11-12T12:57:55.857

您可以使用[Validol](http://validol.readthedocs.io)声明性验证库中的`WellFormedJson`类。

声明本身可能如下所示：

```
new WellFormedJson(
    new Unnamed<>(Either.right(new Present<>(jsonRequestString)))
) 
```

检查阶段如下所示：

```
 Result<JsonElement> result =
        (new WellFormedJson(
            new Named<>(
                "vasya",
                Either.right(
                    new Present<>(
                        "{\"guest\":{\"name\":\"Vadim Samokhin\",\"email\":\"samokhinvadim@gmail.com\"},\"source\":1,\"items\":[{\"id\":1900},{\"id\":777}]}"
                    )
                )
            )
        ))
            .result();

    assertTrue(result.isSuccessful());
    assertEquals(
        "{\"guest\":{\"name\":\"Vadim Samokhin\",\"email\":\"samokhinvadim@gmail.com\"},\"source\":1,\"items\":[{\"id\":1900},{\"id\":777}]}",
        result.value().raw().toString()
    );
    assertEquals(
        "{\"name\":\"Vadim Samokhin\",\"email\":\"samokhinvadim@gmail.com\"}",
        result.value().raw().getAsJsonObject().get("guest").toString()
    ); 
```

对于这样一个简单的任务来说，这似乎有点过头了，但是当您必须验证一个复杂的请求时，它就会大放异彩。查看validol 的[快速入门部分](https://validol.readthedocs.io/en/latest/quick_start.html)。

# objective-c - 在 NSTableView 中使用 NSAlerts 编辑重复行

> ID：10174899
> 
> 赞同：1
> 
> 时间：2012-04-16T13:16:22.803
> 
> 标签：objective-c, cocoa, nstableview, nstableviewcell, nsalert

我有一个`NSMutableArray`包含`NSMutableDictionaries`。我想在一个中显示这个字典中的一个`NSTableView`字符串。这个字符串在对象中是唯一的。默认情况下，它有一些已知的值。当插入一个对象并且找到任何重复的字符串时，尝试显示警报并使用以下 API 编辑相应的行。

`- (void)editColumn:(NSInteger)column row:(NSInteger)row withEvent:(NSEvent *)theEvent select:(BOOL)select;`

这工作正常。

如果用户按下选项卡或用户按下任何其他视图，（resign `FirstResponder`）而不重命名，旧名称仍然存在于 中`tableview`，我想将此行带回`edit mode`。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:56:14.360

```
I was able to solve the issue.Modified the alert using sheets.
Following code  worked for me.

- (void)controlTextDidEndEditing:(NSNotification *)aNotification
{
     if(duplicate)//duplicatefound
     {
        [self showAlertForDuplicates];
    }
} 

// Selector   

 - (void)duplicateAlertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo 
{
     if (returnCode == NSAlertFirstButtonReturn) 
     {
          [self.tableView editColumn:0 row:self.selectedRow withEvent:nil select:NO];
     }
}

-(void) showAlertForDuplicates
{
    NSAlert *alert = [[[NSAlert alloc] init] autorelease];
    [alert addButtonWithTitle:@"Ok"];
    [alert setMessageText: @"DuplicateName"];
    [alert setInformativeText: @"Rename the item")];
    [alert setAlertStyle:NSInformationalAlertStyle];
    [alert beginSheetModalForWindow:nil modalDelegate:self didEndSelector:@selector(duplicateAlertDidEnd:returnCode:contextInfo:) contextInfo:nil];
} 
```

# database - 在 Google App Engine 上按键 ID 过滤查询

> ID：10174901
> 
> 赞同：2
> 
> 时间：2012-04-16T13:16:29.283
> 
> 标签：database, google-app-engine

我知道有一种方法可以根据其键 ID 获取某个实体`get_by_id(someId)`，但是有没有办法让多个 ID 高于某个指定值的实体？使用常规过滤器，我们可以做到`query.filter("customId >", someId)`，但我怎样才能为内置密钥 ID 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:36:59.183

尽管 Key 看起来像一个无意义的大字符串，但它实际上是您的应用程序 ID、实体类型、然后是数字自动分配的 ID 或您生成的键名（父级和命名空间也在其中）的组合，但同样的基本原则适用）。

当您进行 < 或 > 比较，或在查询中使用“order by”时，它针对的是这些单独的部分，而不是您看到的字符串编码。因此，假设 app-ID 和 entity-type 相同，那么您将按 ID 或键名部分进行比较或排序。[文档在此处](https://developers.google.com/appengine/docs/python/datastore/queries#Queries_on_Keys)进行了解释。

[在过滤器方法中，您可以使用 '__key__' 作为属性名称，然后使用Key.from_path](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_from_path)构造一个 Key 对象（至少在 python 中）

# java - 在 GEF eclipse 中创建图形

> ID：10174909
> 
> 赞同：1
> 
> 时间：2012-04-16T13:17:19.527
> 
> 标签：java, eclipse, eclipse-gef

在 GEF 中，我想创建形状为菱形的图形，并且我想为图形的每个顶点添加标签，并为每个顶点添加一些文本。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:41:08.930

实现一个由 5 个元素组成的图形：四个标签和一个菱形图形。使用标准 draw2d 约束将每个图形放置在父图形内。`Shape`通过扩展类，菱形图形本身很容易实现。你可以看到我是如何为三角形[做到这一点的。](http://www.vainolo.com/2011/07/20/extending-org-eclipse-draw2d-shape-a-short-experience/)如果您需要更深入的 draw2d 知识，请查看[本教程](http://eclipse.org/articles/Article-GEF-Draw2d/GEF-Draw2d.html)。

# jquery - 编辑时的jqgrid背景颜色

> ID：10174910
> 
> 赞同：2
> 
> 时间：2012-04-16T13:17:26.657
> 
> 标签：jquery, jqgrid

我可以根据值更改单元格的背景颜色。当我编辑行时出现我的问题。背景颜色被“白色”编辑器覆盖（仅适用于可编辑单元格）。请在[http://i.stack.imgur.com/pJewM.png上查看图片](http://i.stack.imgur.com/pJewM.png)

如何使我的可编辑单元格看起来像“前端”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:37:45.747

您需要为`input`控件定义样式。例如，对于名为的列，`myColumn`您可以添加以下 CSS 规则：

```
input[name="myColumn"] {
    background-color:  green;
} 
```

我使用 jqGrid 演示页面上的示例成功测试了这一点：http: [//trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:14:03.040

如果我正确理解您的问题，您需要在输入字段的初始化期间以及可能在输入字段中的用户类型期间实现某种验证。

您可以使用`dataInit`初始化编辑字段的参数（例如背景颜色）和[keyup](http://api.jquery.com/keyup/)事件处理程序来监视更改。例如，您可以定义函数

```
validateElem = function (elem) {
    if (elem.value.length > 4) {
        $(elem).addClass("ui-state-error");
    } else {
        $(elem).removeClass("ui-state-error");
    }
} 
```

它在字段中设置了标准的 jQuery UI“ui-state-error”类，该类具有超过 4 个字符，并删除了短输入的类。您可以从和调用`validateElem`函数：`dataInit``keyup`

```
editoptions: {
    dataInit: function (elem) {
        validateElem(elem);
    },
    dataEvents: [
        {
            type: 'keyup',
            fn: function (e) {
                validateElem(e.target);
            }
        }
    ]
} 
```

在[演示中](http://www.ok-soft-gmbh.com/jqGrid/KeyupInEditing.htm)你会看到

![在此处输入图像描述](../Images/b5342f2edd830d5bc3db21bab87dafdc.png)

或者

![在此处输入图像描述](../Images/cc9e0c03649b90b1a71cd08d12fec07d.png)

以同样的方式，您可以设置任何其他自定义 CSS 类来定义单元格的其他属性并使用更复杂的验证规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:40:23.277

此代码有效：

```
 loadComplete: function(data){
                $.each(data.rows,function(i,item){
                    for (var j = 4; j <= 12; j++) {
                        testVal = data.rows[i].cell[j];
                        nTestVal = parseFloat(testVal);

                        if(nTestVal == 5){
                            sClassName = $("#" + data.rows[i].id).find("td").eq(j)[0].childNodes[0].className;
                            if (sClassName == "editable")
                                $("#" + data.rows[i].id).find("td input").eq(j-4).css("background", "#F76541");
                            else
                                $("#" + data.rows[i].id).find("td").eq(j).css("background", "#F76541");
                        }
                        else if(nTestVal > 0){
                            sClassName = $("#" + data.rows[i].id).find("td").eq(j)[0].childNodes[0].className;
                            if (sClassName == "editable")
                                $("#" + data.rows[i].id).find("td input").eq(j-4).css("background", "#54C571");
                            else
                                $("#" + data.rows[i].id).find("td").eq(j).css("background", "#54C571");
                        } 
                    }
                });
            } 
```

我知道这有点混乱和不清楚，所以如果有人想知道细节，只需添加评论。

# javascript - 单击导航菜单栏链接后，如何使此功能起作用？

> ID：10174912
> 
> 赞同：0
> 
> 时间：2012-04-16T13:17:33.147
> 
> 标签：javascript, jquery, ajax

在我的 function.js 文件中，我有两个函数：第一个函数使用 ajax 加载我的页面。另一个是用于在我的主页上缩小标签内容。最初，这两个功能都有效。但是，当我单击任一菜单栏链接，然后单击主页链接返回主页时，我的选项卡区域不再起作用。我有一种感觉，organictabs() 函数只有在 index.html 首次加载时才会被调用。如何更改此设置，以便在每次加载新页面时调用 organictabs()？

```
// remap jQuery to $
(function($){})(window.jQuery);

/* trigger when page is ready */
$(document).ready(function (){
    initialize();

});

function initialize() {
    //Click on nav to load external content through AJAX
    $('#topnav a, #bottomnav a').not('#bottomnav #fbcallus a').click(function(e){

        e.preventDefault();

        $('#pages').load( e.target.href + ' #loadcontent'); //pages finished loading
    }); //clicked on nav
    //handle AJAX for left nav
$(function() {
        $("#tabedarea").organicTabs();
    });

}

    //Click on nav to load external content through AJAX
    // $('#topnav a').click(function(e){
    //  e.preventDefault();
    //  $('#pages').load( e.target.href + ' #loadcontent'); //pages finished loading
    // }); //clicked on nav

(function($) {

    $.organicTabs = function(el, options) {

        var base = this;
        base.$el = $(el);
        base.$navtabs = base.$el.find(".navtabs");

        base.init = function() {

            base.options = $.extend({},$.organicTabs.defaultOptions, options);

            // Accessible hiding fix
            $(".hidetabs").css({
                "position": "relative",
                "top": 0,
                "left": 0,
                "display": "none"
            }); 

            base.$navtabs.delegate("li > a", "click", function() {

                // Figure out current list via CSS class
                var curList = base.$el.find("a.current").attr("href").substring(1),

                // List moving to
                    $newList = $(this),

                // Figure out ID of new list
                    listID = $newList.attr("href").substring(1),

                // Set outer wrapper height to (static) height of current inner list
                    $allListWrap = base.$el.find(".list-wrap"),
                    curListHeight = $allListWrap.height();
                $allListWrap.height(curListHeight);

                if ((listID != curList) && ( base.$el.find(":animated").length == 0)) {

                    // Fade out current list
                    base.$el.find("#"+curList).fadeOut(base.options.speed, function() {

                        // Fade in new list on callback
                        base.$el.find("#"+listID).fadeIn(base.options.speed);

                        // Adjust outer wrapper to fit new list snuggly
                        //var newHeight = base.$el.find("#"+listID).height();
                        //$allListWrap.animate({
                        //    height: newHeight
                        //});

                        // Remove highlighting - Add to just-clicked tab
                        base.$el.find(".navtabs li a").removeClass("current");
                        $newList.addClass("current");

                    });

                }   

                // Don't behave like a regular link
                // Stop propegation and bubbling
                return false;
            });

        };
        base.init();
    };

    $.organicTabs.defaultOptions = {
        "speed": 300
    };

    $.fn.organicTabs = function(options) {
        return this.each(function() {
            (new $.organicTabs(this, options));
        });
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:23:21.367

我相信在 jquery 加载上使用完整的功能将解决您的问题：

```
function initialize() {
//Click on nav to load external content through AJAX
$('#topnav a, #bottomnav a').not('#bottomnav #fbcallus a').click(function(e){

    e.preventDefault();

    $('#pages').load( e.target.href + ' #loadcontent', function() { $("#tabedarea").organicTabs(); }); //pages finished loading
});
} 
```

# notepad++ - 通过单击 Notepad++ 编辑器中的文件路径在 Firefox 中打开文件

> ID：10174913
> 
> 赞同：2
> 
> 时间：2012-04-16T13:17:38.077
> 
> 标签：notepad++

我们有一个日志文件，它输出一些文件名，例如 `C:\Users\user1\AppData\Local\Temp\Company1\HttpResponse-2012.04.16_14.33.51_499-Error.html`.

我们使用 Notepad++ v5.8.7 查看日志文件。

*在*_ _ *_* _火狐？

有插件支持吗？

到目前为止，我需要

1.  选择文件路径
2.  选择运行->打开文件
    ->文件在记事本++中打开
3.  选择运行->在 Firefox 中启动
    -> 文件由 Firefox 显示

有没有更短的方法在 Firefox 中显示文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:00:28.873

您需要在 Notepad++ 的运行（通过按 F5 或 ALT+R+R）窗口中输入以下行（命令）。

```
"C:\Program Files(x86)\Mozilla Firefox\firefox.exe" "$(CURRENT_WORD)" 
```

下图会一目了然。 ![](../Images/e299cff760062f713e72bbee655376eb.png)

您需要选择链接，然后它将在 Firefox 中打开。您可能需要根据 firefox.exe 所在的位置更改路径。您也可以相应地选择快捷方式。（我使用了 CTRL+INS，因为这是可用的）。

# php - 有没有办法使用 php 解压缩 .Z 文件？

> ID：10174917
> 
> 赞同：3
> 
> 时间：2012-04-16T13:17:56.660
> 
> 标签：php, compression

有没有办法使用 php 解压缩 .Z 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:33:26.617

在搜索了一些之后，我发现 .z 文件是使用该`compress`程序压缩的文件。如果您的 php 安装允许`shell_exec`并且您的网络服务器正在运行 unix/linux，您可以`uncompress`在您的服务器上运行该程序。这是（未经测试的）想法：

```
<?php
$file = '/tmp/archive.z';
shell_exec("uncompress $file"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:44:53.853

如今`uncompress`，只不过是一个单线援引`gzip`适当的选择。要使用`gzip`，您没有执行 shell。您可以改用[Zlib 扩展](http://www.php.net/manual/en/book.zlib.php)。我会尝试类似的东西：

```
<?php
$contents = zlib_decode(file_get_contents('/path/file.Z')); 
```

# python - 图像拼接 SimpleCV：翘曲后的色彩空间变化

> ID：10174918
> 
> 赞同：5
> 
> 时间：2012-04-16T13:17:58.187
> 
> 标签：python, image, opencv, colors, simplecv

我正在使用 SimpleCV 拼接图像。我对 SimpleCV 的 GitHub 代码进行了一些更改，最终正确转换了图像。但问题是，变换后的图像颜色发生了变化。

我使用了这些图片[http://imgur.com/a/lrGw4](http://imgur.com/a/lrGw4)。我的代码输出是：http: [//i.imgur.com/2J722h.jpg](http://i.imgur.com/2J722h.jpg)

这是我的代码：

```
from SimpleCV import *
import cv2
import cv

img1 = Image("s.jpg")
img2 = Image("t.jpg")

dst = Image((2000, 1600))

# Find the keypoints.
ofimg = img1.findKeypointMatch(img2)

# The homography matrix.
homo = ofimg[1]
eh = dst.getMatrix()

# transform the image.
x = Image(cv2.warpPerspective(np.array((img2.getMatrix())), homo,
  (eh.rows, eh.cols+300), np.array(eh), cv.INTER_CUBIC))

# blit the img1 now on coordinate (0, 0).
x = x.blit(img1, alpha=0.4)
x.save("rishi1.jpg") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:12:57.117

看来您使用的是 SimpleCV 的旧版本。在最新版本中，获得单应矩阵的方法是 [ [1](https://github.com/ingenuitas/SimpleCV/blob/master/SimpleCV/tests/tests.py) ]：

```
ofimg[0].getHomography() 
```

**编辑：**

您提到的颜色问题似乎是由于颜色空间的变化。因此，请将您扭曲图像的线更改为：

```
x = Image(cv2.warpPerspective(np.array((img2.getMatrix())), homo,
  (eh.rows, eh.cols+300), np.array(eh), cv.INTER_CUBIC), colorSpace=ColorSpace.RGB).toBGR() 
```

我怀疑发生的事情是变形后返回的图像在 BGR 颜色空间中，而 SimpleCV 默认使用 RGB 颜色空间。请让我知道情况如何。

# c++ - 指向静态成员函数的指针作为 g++ 的模板参数“无效”

> ID：10174920
> 
> 赞同：1
> 
> 时间：2012-04-16T13:18:05.897
> 
> 标签：c++, templates, c++11, g++, typetraits

这是我处理向 Lua 公开 C++ 类的一些实际代码，例如：

```
#include <lua5.1/lua.hpp>
#include <tuple>

//in actual code, lots of specializations of these C++<=>Lua's stack helper functions. Here it's just a sample.
template<typename T> T to(lua_State*, int);
template<> int to(lua_State* l, int i){
    return lua_tointeger(l, i);
}
template<typename T> void push(lua_State*, T);
template<> void push(lua_State* l, int val){
    lua_pushinteger(l, val);
}

//in actual code, placed in a header
template<typename T, T> class function_proxy{
    static_assert(sizeof(T)!=sizeof(T), "Error: function_proxy works with functions (duh)");
};

template<typename Return, typename... Args, Return(*func)(Args...)> class function_proxy<Return(*)(Args...), func>{
    static Return call(lua_State* l, Args... args){
        return func(args...);
    }
    template<typename... retrieved> static Return call(lua_State* l, retrieved... read){
        return call(l, read..., to<typename std::tuple_element<sizeof...(read), std::tuple<Args...> >::type >(l, 1+sizeof...(read)));
    }
public:
    static int wrapper(lua_State* l){
        push(l, call(l));
        return 1;
    }
};

//in actual code, inner class of a template class in another header
template<typename CT, CT> class member_helper{
    static_assert(sizeof(CT)!=sizeof(CT), "Error: member_helper works with members of T (duh)");
};
//Just one of the actual partial specializations, to combine constness and the return of void or non-void
template<typename Class, typename Return, typename... Args, Return(Class::*fun)(Args...)> struct member_helper<Return(Class::*)(Args...), fun>{
    static Return as_free(Class& obj, Args... args){
        return (obj.*fun)(args...);
    }
    static int worker(lua_State* l, Class& obj, bool is_const, bool write){
        if(write) throw "Cannot write a member function.";
        //ERROR HERE: template argument 2 is invalid. Not very helpful message.
        lua_pushcclosure(l, function_proxy<decltype(&as_free), &as_free>::wrapper, 0);
        return 1;
    }
};

struct Test{
    int test(int arg){ return arg*3; }
};

int test_as_free(int arg){ return arg*3; }

int main(){
    lua_State* l=luaL_newstate();
    Test t;
    //works fine
    lua_pushcclosure(l, function_proxy<decltype(&test_as_free), &test_as_free>::wrapper, 0);
    //does not work
    member_helper<decltype(&Test::test), &Test::test>::worker(l, t, false, false);
} 
```

获取指针时代码失败`function_proxy<decltype(&as_free), &as_free>::wrapper`，即使在`main`. 我认为获取自由函数的指针而不是静态成员函数的指针没有任何区别。[这是这个](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35167)g++ 错误的一个实例（请注意，我使用它进行编译，`-std=c++0x`并且该错误似乎已在 C++11 中修复）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:33:09.853

这是一个[g++ 错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53009)并已得到确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:57:15.570

我还没有完全理解，但是您确定要 Class 为 decltype(&Test::test) 并返回为 &Test::test 吗？对我来说，它看起来应该是：

```
member_helper<Test, int>::worker 
```

但是，如何通过在另一个之后添加一种类型的间接来从工作线变为非工作线呢？

# android - Android 上的 RDF 数据库

> ID：10174921
> 
> 赞同：6
> 
> 时间：2012-04-16T13:18:19.203
> 
> 标签：android, database, rdf, semantic-web, triplestore

我正在为 Android 开发一个关于移动 RDF 数据库的项目。因此，我正在寻找要包含在我的 Android 项目中的开源数据库。但是，我很难找到现有 RDF 数据库的移动版本。

到目前为止我发现了什么：

*   耶拿 TDB 数据库
*   [甲骨文伯克利数据库](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)

不幸的是，我还没有找到 Sesame、Virtuoso、AllegroGraph 等的移动版本。

有谁知道其他一些适用于 Android 的 RDF 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:36:31.183

我不是 Android 开发人员，所以也许我忽略了一些东西，但 Sesame 是[maven 模块的集合](https://repo.aduna-software.org/maven2/releases/org/openrdf/sesame/)，每个模块都是一个单独的 Java jar 文件。你可以挑选你需要的 jar 文件，据我所知，你应该可以直接在 Android 上使用它们。我认为不需要单独的“移动版本”，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T08:55:57.523

我正在看[Triple Place](https://github.com/white-gecko/TriplePlace)。

> 适用于 Android 的轻巧灵活的 Triple Store。它使用类似于 Hexstore 中的索引结构。TriplePlace 使用 TokyoCabinet 作为持久存储系统。

[您可以在此处](http://skill.informatik.uni-leipzig.de/blog/wp-content/uploads/2011/12/SKIL2011_Arndt.pdf)找到其功能的简要介绍。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T14:50:00.687

您可以使用 SQLite 存储 RDF 数据并对三元组进行查询，但无法使用 SPARQL。这是一个很好的参考：

[http://infolab.stanford.edu/~melnik/rdf/db.html](http://infolab.stanford.edu/~melnik/rdf/db.html)

我也会看看[4store](http://4store.org/)。

# image - Facebook like 按钮问题图片、标题、描述

> ID：10174925
> 
> 赞同：0
> 
> 时间：2012-04-16T13:18:42.963
> 
> 标签：image, facebook, facebook-like, title

6 个月前，我在我的网站上创建了一个 Facebook 点赞按钮，它工作正常，并在发布评论时显示图像、标题和描述。但是现在从 2 天开始，它在发布评论时没有显示任何显示共享 URL 的信息，而不是图像、标题和描述。这是我的网站链接。 [https://www.whatyourneighbourpaid.com](https://www.whatyourneighbourpaid.com) 请在页脚查看分享图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:12:05.610

您是否在[Facebook 调试器](http://developers.facebook.com/tools/debug/og/object?q=https://www.whatyourneighbourpaid.com/)（AKA linter）中检查过您的页面？

它说：

> **必须修复的错误**
> 
> 对象基域不允许：URL 'https://us.whatyourneighbourpaid.com/' 类型'website' 的对象无效，因为指定的应用程序ID '391421600878949' 不允许域'us.whatyourneighbourpaid.com'。[您可以在https://developers.facebook.com/apps/391421600878949](https://developers.facebook.com/apps/391421600878949)验证您配置的“应用程序域” 。

我的猜测是，在应用程序设置中，您使用的网址不是*us.whatyourneighbourpaid.com*，也许是*www.whatyourneighbourpaid.com*或只是简单*的 whatyourneighbourpaid.com*？如果是这种情况，那么只需将其添加到应用程序设置中的应用程序域中，一切就会正常。

# javascript - node.js / Express / Connect / Socket.io的关系

> ID：10174926
> 
> 赞同：3
> 
> 时间：2012-04-16T13:18:44.577
> 
> 标签：javascript, node.js, express, socket.io

我很困惑。我的主要问题是，何时使用纯 node.js，何时使用框架/MVC，如“express”或“connect”。

我知道“express”只是为“connect”添加了一堆功能，但它到底有什么用呢？可以说，我希望我的所有 HTTP 内容都针对“Apache”服务器，并且只使用 node.js 做一些部分内容（如 WebSocket 连接、CouchDB 等）。

在这种情况下出于某种原因使用“express”或“connect”是否有意义？

据我所知，Socket.IO 还处理 HTTP 请求作为后备，那么使用 Socket.IO 来满足这些需求就足够了吗？

使用 Express/Connect 的最大优势是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:40:39.830

Express（或 Connect）是 HTTP Web 应用程序的应用程序框架。它是您的应用程序的入口点。它提供了一些非常常见的功能，例如：

*   HTTP 服务器
*   网址路由
*   请求参数
*   会话

它还允许轻松使用其他功能（它们称为中间件），例如身份验证处理、模板。

如果你只是想通过 SocketIO 实现一个 pub/sub 服务，没有任何页面或其他 API，只需使用 Socket.io 库（S.io 主页示例）：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
    socket.emit('news', { hello: 'world' });
    socket.on('my other event', function (data) {
        console.log(data);
    });
}); 
```

如果您想在更复杂的应用程序、服务页面和 API 中使用 Socket.io，您可以（必须？）将其与 Express 集成（请参阅[如何使用](http://socket.io/#how-to-use)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:01:32.417

Hi I have been using Expressjs for some time now and find it particularly useful for the Jade templating engine it provides by default. Jade is a new templating language and though I admit it takes some time to get familiar with it, its pretty useful. You can write conditionals, mixins, pass variables to your pages, use partials etc. It just makes client side html really easy. Also expressjs sets up your view, javascript, stylesheets directory structure... If followed properly catching responses and rendering html pages are a matter of couple of line of codes. As discussed above, the http middlewear is a lot easier to implement..

# java - 来自超类的 Java 子类构造函数

> ID：10174929
> 
> 赞同：1
> 
> 时间：2012-04-16T13:19:08.773
> 
> 标签：java, android, subclass

我试图拦截`onDraw()`Android`android.view.View`类的方法，以了解视图何时完成绘制自身（并随后启动其他操作）。

但是，这使我遇到了一些 Java 问题（我对 Java 的经验有限）。

我的 Activity`onCreate()`方法包含以下代码：

```
LayoutInflater inflater = (LayoutInflater)   getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
View view = inflater.inflate(R.layout.nessiean, null);
setContentView(view);
doSomeOperations(); 
```

我定义了一个子类，其主要目的是定义一个内部状态并提供一个`wait()`方法：

```
class MyView extends View{
    int state=0;

    public MyView(Context context){
        super(context);
    }

    public MyView(Context context, AttributeSet attrs){
        super(context,attrs);
    }

    public MyView(Context context, AttributeSet attrs, int defStyle){
        super(context,attrs,defStyle);
    }

    protected void onDraw (Canvas canvas){
        super.onDraw(canvas);
        state=1;
    }

    public void waitforDraw(){
        while(state==0){};
    }
} 
```

问题是：

1.  如上所述，我是否需要重新定义我的子类中的所有公共构造函数？Java默认不调用它们？

2.  我无法在我的`onCreate()`方法中替换以下行：

`View view = inflater.inflate(R.layout.nessiean, null);`

和

`MyView view = inflater.inflate(R.layout.nessiean, null);`

错误是：`cannot convert from View to MyView`。

有什么提示吗？

===========================完整代码如下==================== =========

```
package com.example;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.os.Bundle;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;

public class SoundActivity extends Activity {

    private Thread mWorkerThread;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //START: ALTERNATIVE WAY FOR CREATING THE VIEW
        //*first variant:
        //setContentView(R.layout.nessiean);
        //*second variant:
        LayoutInflater inflater = (LayoutInflater)   getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        MyView view = (MyView) inflater.inflate(R.layout.nessiean, null);
        setContentView(view);
        //STOP: ALTERNATIVE WAY FOR CREATING THE VIEW
        System.loadLibrary("soundtest");
        mWorkerThread =  new Thread(new Runnable() {
            public void run() {
                execute();      
            }
        },"Worker Thread");
        try{
            mWorkerThread.start();
            mWorkerThread.join(); 
        }
        catch (Exception e) {
            System.exit(1); 
        }
    }   

    private native void execute();
}

class MyView extends View{
    int state=0;

    public MyView(Context context){
        super(context);
    }

    public MyView(Context context, AttributeSet attrs){
        super(context,attrs);
    }

    public MyView(Context context, AttributeSet attrs, int defStyle){
        super(context,attrs,defStyle);
    }

    @Override
    protected void onDraw (Canvas canvas){
        super.onDraw(canvas);
        state=1;
    }

    public void waitforDraw(){
        while(state==0){};
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:21:39.433

> 如上所述，我是否需要重新定义我的子类中的所有公共构造函数？

这取决于 - 你想拥有所有这些构造函数吗？只声明*你的*班级需要的那些。

> Java默认不调用它们？

不。如果您不声明*任何*构造函数，编译器将尝试为您创建一个形式为：

```
public ClassName() {
    super();
} 
```

对于任何声明的构造函数，如果您没有显式链接到另一个构造函数（在超类或此类中），它将隐式添加`super()`- 即对超类中无参数构造函数的调用。如果该构造函数不存在或不可访问，您将获得编译时失败。

> 我无法在我的 onCreate() 方法中替换以下行：
> 
> ```
> View view = inflater.inflate(R.layout.nessiean, null); 
> ```
> 
> 和
> 
> ```
> MyView view = inflater.inflate(R.layout.nessiean, null); 
> ```

如果调用*实际上*`inflate`会返回 的实例，那么您只需添加一个演员表：*`MyView`*

 *```
MyView view = (MyView) inflater.inflate(R.layout.nessiean, null); 
```

我对充气机的了解还不够，无法确定这是否会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:22:40.947

1.  是的，如果你想调用如图所示的超类构造函数。这是有必要的。
2.  尝试将`View`返回的从 inflate 转换为`MyView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:54:16.910

在您的 nessiean.xml 文件中`<View>...</View>`，您需要简单地将其更改为 < ，而不是声明`MyView>...</MyView>`。这样，当您调用 findViewById 时，您实际上是在返回一个 MyView 对象

此外，您的 onCreate 方法应该是：

```
setContentView(R.layout.nessiean);
MyView myView = (MyView) findViewById(R.id.<whatever tag you gave the view); 
```*

# mysql - MySQL 查询以执行模式匹配

> ID：10174931
> 
> 赞同：0
> 
> 时间：2012-04-16T13:19:09.717
> 
> 标签：mysql, ruby-on-rails, ruby

在 MySQL 中，如何在包含用逗号分隔的值的字段中搜索值？（我必须搜索 (5,6)，它应该返回包含所有可能性的字段 {5,6,(5,6)}

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:23:41.990

你可以试试这个

```
MyModel.where("field LIKE (?)", "%5,6%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:23:46.907

MySQL 中有许多用于模式匹配的方法，例如`like`, `RLIKE`, `MATCH-AGAINST`,`FIND_IN_SET`等。具体的方法取决于您的需要。解释您的样本数据和期望的结果；那么我可以说哪个功能最能帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:11:38.233

```
MyModel.where("filed REGEXP '5,6'") 
```

# css - Nivo Slider 上的自动播放功能（不是 wp 版本）

> ID：10174933
> 
> 赞同：2
> 
> 时间：2012-04-16T13:19:18.893
> 
> 标签：css, nivo-slider

有没有我可以添加到 nivo-slider.css 的脚本，允许自动播放、转换时间等控制功能？我希望幻灯片在页面加载时开始播放。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:59:25.820

您只能在 JavaScript 中将选项添加到滑块。不幸的是，您不能在 CSS 中添加选项。

请参阅 Nivo 使用文档：[这里](http://nivo.dev7studios.com/support/jquery-plugin-usage/)

要自动启动：

```
$(window).load(function() {
    $('#slider').nivoSlider({
    // Options go here
    }.start());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T11:43:45.450

这是旧贴的问题，但我在这里为自动播放 navoSlider 提供解决方案，因此它可能对其他人有所帮助。

```
$('#slider').nivoSlider({
    manualAdvance:false,
    pauseTime:5000,
    pauseOnHover: false,
    controlNav:true,
    directionNav:true,
    directionNavHide:true,
    effect:'sliceDown',
    captionOpacity: 0.9
}); 
```

# java - Java 'this' 关键字

> ID：10174935
> 
> 赞同：3
> 
> 时间：2012-04-16T13:19:23.427
> 
> 标签：java, this

我刚开始编程，我想从一本书中锻炼身体，但我做不到。那是我的问题：

```
public class increment {
    int increment() {
        return this + 1; // aka this++
    }

    public static void main(String[] args) {
        int a = 0;
        System.out.println(a.increment());
    }
} 
```

正如您肯定已经猜到的那样，它不起作用，我想问您如何使输出的整数 a 加一，但使用关键字“this”。

对愚蠢的问题表示问候和抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:26:01.790

像方法一样命名一个类是很奇怪的。我猜你想要这个：

```
public class Counter {

int val;

 public Counter (int start) {
   val = start;
 }
 public void increment() {
    val ++;
 }
 public String toString () {
   return Integer.toString (val);
 }

 public static void main(String[] args) {
    Counter counter = new Counter (0);
    counter.increment ();
    System.out.println(counter.toString ());
 }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T13:21:19.387

`this`是一个对象（当前对象）。你不能“增加”它。

一种方法是：

```
public class Increment {
    int a = 0;
    int increment() {
        return a + 1; 
        // or: return this.a + 1;
        // or: a++; return a; if you want a to be incremented from now on
    }

    public static void main(String[] args) {
        Increment inc = new Increment();
        System.out.println(inc.increment());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T13:26:38.153

Java 中的`this`关键字指的是当前作用域的对象实例。在这种情况下，我认为这不是您要寻找的。

在您的示例中，`a`它不是类的对象`increment`，而是原始的`int`。为了使用`.increment()`您定义的函数，它必须是 type 的对象`increment`。

可能是您正在寻找的一个选项如下。

```
public class Increment { //Java likes capitalized class names
    private int myInt;    

    public Increment(int a) { //constructor
        myInt = a;
    }

    public int increment() {
        return ++myInt;
    }    

    public static void main(String[] args) {
        Increment a = new Increment(0);
        System.out.println(a.increment());
    }

} 
```

在这个例子中，我们创建了一个新的 type 类`increment`，它内部包含一个整数。它的增量方法递增该内部整数，然后返回该数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:21:48.513

你不能像这样增加一个类。您必须使用可以递增的成员变量。

```
public class Test {
    private int var;

    public Test(int i) {
        this.var = i;
    }

    int increment() {
       this.var++;
    }
}

public static void main(String[] args) {
    Test t = new Test(0);
    System.out.println(t.increment());

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:22:20.057

您正在`+`为当前对象使用运算符 ( `this`)。Java 不支持运算符重载。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T13:27:54.550

像这样的东西会起作用：

```
class MyInteger {
    private int internal;

    public MyInteger( int value ){
        this.internal = value;
    }

    public int incerment(){
        return ++this.internal;
    }
}

public class Increment {

    public static void main(String[] args) {
        MyInteger a = new MyInteger(0);
        System.out.println(a.increment());
    }
} 
```

你看，你只能为你自己的类实现方法，不能为现有的类或像`int`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T13:35:24.323

我不认为你可以用它来返回值，除非你正在创建一个这样的新类：

```
class Increment1
{
    private int a;
    public int increment2(int a)
    {
        this.a=a;
        return this.a + 1;
    }
}

public class Increment
{

    static Increment1 b = new Increment1();

    public static void main(String[] args)
    {
        int a = 0;
        System.out.println(b.increment2(a));
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-16T13:23:14.350

这指的是类的当前实例，而不是特定的成员。

您想要增加一个属性（我猜是 long 或 int 类型），而不是您的增量类的实例（顺便说一下，应该是 Increment）。

像这样的东西会起作用：

```
public class increment {

private int innerValue = 0;

int increment() {
    innerValue+=1
    return innerValue; // aka this++
}

public static void main(String[] args) {
    increment a = new increment()
    System.out.println(a.increment());
}
} 
```

# android - 如何从自定义列表适配器获取列表视图的行索引？

> ID：10174936
> 
> 赞同：4
> 
> 时间：2012-04-16T13:19:23.867
> 
> 标签：android

我有两种布局

1.  `main.xml` ----- 使用单个 ListView（比如 listview_01）。
2.  `row.xml`----- 使用 ImageView（比如 imageView_01）和 TextView（比如 textView_01）

我正在使用我拥有的数组数据填充我`listview_01`的`row.xml`行。
我想对`onclick()`事件执行操作`imageView_01`，它的工作。
我已经`onClick()`在我`imageView_01`的.`getView()``CustomlistAdapter`

但是谁能告诉我如何在 CustomListAdapter 的行图像的 listview_01 的 onClick() 事件中获取行索引？

**这是我的代码**

道歉，但我无法上传我的整个活动和适配器代码

**一些活动代码**

```
listView_episodesList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

        mQuickAction.show(arg1);

    }
}); 
```

**一些适配器代码**

```
ImageView imageView_EpisodePic = (ImageView) convertView.findViewById(R.id.imageView_episode_pic);
drawableManager.fetchDrawableOnThread(episodeTemp.episodeImage, imageView_EpisodePic);

imageView_EpisodePic.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Toast.makeText(context, "Click on image", Toast.LENGTH_LONG).show();
    }
}); 
```

从我的活动中，我可以访问我单击的 listView 行索引。但从适配器我不能。我只想在点击时获得**行索引**`ListView(main.xml)``ImageView (row.xml)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:26:56.863

您可以尝试`mListView.getPositionForView(v);`在`onClick(View v)`其中将返回列表视图项的索引。（注意：我不知道适配器，我只是猜测你可以使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:33:02.080

您`onItemSelectedListeneter()`将拥有适配器视图和位置以及 id.. 在哪个位置是您需要的 ( `arg1`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T02:02:19.087

我遇到了同样的问题，很惊讶我无法从自定义适配器类中找到更好的方法来做到这一点。Nikola 的解决方案可以在 Activity 或 Fragment 类中工作，但据我所知，不能在自定义适配器中工作。

我在对象的 ImageView 属性上设置标签时遇到问题，其中第一个索引 [0] 无法正确返回，但设置对象的“名称”属性的标签完美无缺。我将继续寻找更好的方法来做到这一点，但现在这似乎工作正常。

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;

        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.row_project, null);

            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.name = (TextView)view.findViewById(R.id.textProjectName);
            viewHolder.desc = (TextView)view.findViewById(R.id.textProjDesc);
            viewHolder.image = (ImageView)view.findViewById(R.id.imgProj);           
            viewHolder.name.setTag(position);

            Log.d(TAG, "Position: " + position);

            viewHolder.image.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    Log.d(TAG, "Image Selected at Index: " + viewHolder.name.getTag());
                }

            });

            view.setTag(viewHolder);
        }
        else {
            view = convertView;
            ((ViewHolder) view.getTag()).name.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.name.setText(list.get(position).getName());
        holder.desc.setText(list.get(position).getDescription());

        return view;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T12:31:58.727

列表中项目的行 ID 被设置为“convertView”的 ID。

> convertView.setId(位置)

当按下/选择一个项目时，会在 OnClickListener 中获取该项目的行 ID。

> ```
>  convertView.setOnClickListener(new OnClickListener() {
>             @Override
>             public void onClick(View v) {
>                 // item position is fetched here. this is exactly the same position of the selected item in your list
>                 int selectedPosition = v.getId();
>             }
>         }); 
> ```

您可以为 convertView 的任何子级设置 id。例如，

> convertView.imageView.setId(位置);

然后获取id如下，

> ```
>  imageView.setOnClickListener(new OnClickListener() {
>         @Override
>         public void onClick(View v) {
>             int selectedPosition = v.getId();
>         }
>     }); 
> ```

全功能

```
public View getView(int position, View convertView, ViewGroup vg) {

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.row_book_item, null);
        viewHolder = new ViewHolder();

        // ...

        convertView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) convertView.getTag();
    }

    if (listItems.size() > 0) {
        // item position is set here. this is exactly the same position of your item in the list
        convertView.setId(position);
        convertView.imageView.setId(position);

        // ...

        convertView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // item position is fetched here. this is exactly the same position of the selected item in your list
                int selectedPosition = v.getId();
            }
        });

        imageView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // item position is fetched here. this is exactly the same position of the selected item in your list
                int selectedPosition = v.getId();
            }
        });

    }
    return convertView;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-12T18:48:02.130

在我的自定义适配器中，我有：

```
public View getView(final int position, View convertView, ViewGroup parent) { 
```

其中位置是单击的行的索引。这应该可以在您的`onClick()`方法中访问。

# java - Hibernate 自定义类型以避免'Caused by: java.sql.SQLException: Stream has already been closed'

> ID：10174951
> 
> 赞同：11
> 
> 时间：2012-04-16T13:20:30.697
> 
> 标签：java, oracle, hibernate, custom-type

如何编写自定义 Long 类来处理 Oracle 中的 long 值，以避免出现以下错误？

> 引起：java.sql.SQLException：流已经关闭。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T13:24:50.793

Oracle[建议不要使用](http://docs.oracle.com/cd/B19306_01/java.102/b14355/jstreams.htm#i1014085) `Long`and`Long Raw`列（从 Oracle 8i 开始）。它们仅出于遗留原因包含在 Oracle 中。如果您真的需要使用它们，您应该先处理这些列，然后再尝试触摸以下任何其他列`ResultSet`：

[文档](http://docs.oracle.com/cd/B19306_01/java.102/b14355/jstreams.htm#i1014085)：

> 当查询选择一个或多个 LONG 或 LONG RAW 列时，JDBC 驱动程序以流模式将这些列传输到客户端。在调用 executeQuery 或 next 之后，LONG 列的数据正在等待读取。
> 
> 不要创建具有 LONG 列的表。请改用大对象 (LOB) 列 CLOB、NCLOB 和 BLOB。支持 LONG 列仅是为了向后兼容。Oracle 建议您将现有的 LONG 列转换为 LOB 列。LOB 列受到的限制远少于 LONG 列。

至于休眠 - 看到这个[问题](https://stackoverflow.com/questions/6573023/hibernate-mapping-for-oracle-long-raw)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T13:40:21.197

以下内容没有回答原始问题“如何编写自定义 Long 类来处理 Oracle 中的长值”，但可能有助于避免在查询 Oracle 长原始列时出现“流已关闭”错误。

我们使用遗留数据库遇到了这个错误，没有机会更改列类型。我们将 Spring 与 hibernate3 会话工厂和事务管理器一起使用。当多个任务同时访问 DAO 时会出现此问题。我们正在使用 ojdbc14.jar 驱动程序并尝试了一个较新的驱动程序，但没有成功。

在 OJDBC 驱动程序的连接属性中设置 useFetchSizeWithLongColumn = true 解决了这个问题。请参阅[OracleDriver API](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html)

> 这是一个很薄的属性。它不应该与任何其他驱动程序一起使用。如果设置为“true”，则在“SELECT”中检索数据时的性能将得到改善，但处理 LONG 列的默认行为将更改为获取多行（预取大小）。这意味着将分配足够的内存来读取这些数据。因此，如果您想使用此属性，请确保您正在检索的 LONG 列不是太大，否则您可能会耗尽内存。此属性也可以设置为 java 属性：java -Doracle.jdbc.useFetchSizeWithLongColumn=true myApplication

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T16:03:52.297

我认为当您尝试从结果集中多次获取 Oracle LONG 值时会收到此消息。

我有这样的代码：

```
 rs.getString(i+1) ;
        if (rs.wasNull()) continue ;

        set(queryAttr[i], rs.getString(i+1)) ; 
```

我开始收到“流已经关闭”。错误。当我将代码更改为：

```
 String str = rs.getString(i+1) ;
        if (rs.wasNull()) continue ;

        set(queryAttr[i], str) ; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-15T23:14:17.960

这发生在系统表的查询中：

```
SELECT * FROM all_tab_columns
WHERE owner = 'D_OWNER' AND COLUMN_NAME LIKE 'XXX%'; 
```

# crystal-reports - 水晶报表导出到 excel 截断行

> ID：10174954
> 
> 赞同：0
> 
> 时间：2012-04-16T13:20:45.147
> 
> 标签：crystal-reports, crystal-reports-export

我在 ASP.NET 4.0 Web 表单应用程序中使用 Crystal Reports for Visual Studio 2010。我已将报告设置为在 ExcelDataOnly 中导出。构建器中的报表运行正常并返回数千行。当我将它导出到 Excel 时，我只得到 145 行！有谁知道为什么会这样？我在任何列中都没有空值，所以不是这样。我将我的内容类型设置为 application/vnd.ms-excel 我认为这是正确的，所以我很茫然！！！

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:06:26.037

原来问题是报告中保存的数据。无论我做什么，我只能得到完全相同的 145 行。最后，我重新创建了报告，现在它可以完美运行了。我不知道为什么数据会被困在那种状态，但由于重新创建修复了它，它就被修复了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:47:59.990

您可能已经检查/选择了将数据与报告一起保存的选项。您可以转到 File--> Save AS 下面是选择要与报告一起保存的数据的选项。请取消选中该选项，看看它是否有帮助。

高温高压

# c++ - 结构中的联合初始化

> ID：10174955
> 
> 赞同：2
> 
> 时间：2012-04-16T13:20:50.393
> 
> 标签：c++, struct, g++, unions

我一直在浏览有关在结构中初始化联合的问题的 stackoverflow，但我没能做到正确。

这是我的结构

```
typedef struct dc_netif_filter {
    unsigned char filter_type;  
    union {
        uint32_t itf_nb;
        char * buf; 
    } value;
} dc_netif_filter_t; 
```

在我的代码中，我尝试使用：

```
dc_netif_filter_t netif = {DC_NETIF_SELECT_NAME,{{0, "tun"}}}; 
```

这给出了错误：用于类型“uint32_t”的标量初始值设定项的大括号</p>

和

```
dc_netif_filter_t netif = {DC_NETIF_SELECT_NAME,{0, "tun"}}; 
```

这给出了错误：'dc_netif_filter::<匿名联合>'的初始化程序太多</p>

我如何声明这样的 dc_netif_filter_t ？

我在 ubuntu 上使用 g++。请注意，dc_netif_filter_t 不是我可以修改的结构，因为它来自第三方项目。

**编辑：正如我已经解释过的，我只能初始化一个字段。问题是，与

```
dc_netif_filter_t netif = {DC_NETIF_SELECT_NAME,"tun0"}; 
```

我收到一个转换错误：从 'const char*' 到 'uint32_t 的无效转换

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:24:12.850

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:34:40.537

It looks like you are trying to initialize your structure to indicate that the `buf` member is to be used, and that the value of that `buf` should be `"tun"`. Since C++ before C++11 lacks *designated initializers*, you cannot do it with an initializer: only the first field of the `union` can be initialized, so you need to do your assignment in code:

```
static get_dc_netif_filter_t() {
    static c_netif_filter_t netif = {DC_NETIF_SELECT_NAME, {0}};
    if (netif.value.itf_nb == 0) {
        netif.value.buf = "tun";
    }
    return netif;
} 
```

C++11 lets you do it like this:

```
dc_netif_filter_t netif = {DC_NETIF_SELECT_NAME, { .buf = "tun"}}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:34:24.420

This works under g++ 4.7.0:

```
dc_netif_filter_t netif = {DC_NETIF_SELECT_NAME, {.buf="tun"}}; 
```

Although *designated initializers* are supposed to be C only, not C++! Maybe it's a GNU extension?

I guess the best (most compatible) way is to assign the members after initialization:

```
dc_netif_filter_t netif;
netif.itf_nb = DC_NETIF_SELECT_NAME;
netif.value.buf = "TUN"; 
```

# iphone - 如何避免使用未清除的帧缓冲区（iOS）闪烁？

> ID：10174964
> 
> 赞同：0
> 
> 时间：2012-04-16T13:21:30.290
> 
> 标签：iphone, ios, opengl-es, framebuffer

当我不清除默认帧缓冲区，或者只绘制它的一部分时，我可以看到以前绘制的帧有些闪烁。

我可以看到这与 iOS EAGLLayer 渲染缓冲区策略有关，但我不明白发生了什么，所以我无法向前解决问题。

我已打开保留支持，但似乎重绘了错误的区域（如旧线程中的区域？），所以闪烁仍然存在。

如何克服这种闪烁？有人在这里有经验吗？

或者至少你能解释一下 iOS 渲染缓冲区呈现策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:00:13.083

先前绘制的帧之间的时间延迟。并且当前帧的时间不正确。

# git - 如何从远程源中提取分支

> ID：10174975
> 
> 赞同：1
> 
> 时间：2012-04-16T13:22:04.503
> 
> 标签：git, branch, remote-branch

如何取回我在 Git 上的存储库的所有分支？我尝试了以下方法：

```
git remote add origin git@github.com:anchetaWern/Zenoir-Online-Classroom.git
git pull git@github.com:anchetaWern/Zenoir-Online-Classroom.git 
```

我在那个存储库中有 3 个分支，但现在我只有主分支。我如何拉回其他2个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:25:06.423

添加 remote 后`origin`，您不必再次引用该 url。这就是添加遥控器的重点。

你本来可以做的`git pull origin`

现在，如果您这样做，`git branch -a`您将看到远程分支（“丢失”的 2 个）。默认情况下，只有 master 被签出为本地分支。

只需`git checkout branch_name`检查它们并设置一个本地分支（每个一次）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:27:25.920

当我使用分支时，这是我的典型工作流程：

1.  将分支推送到 github

    ```
    git push origin newbranch 
    ```

2.  将 github 上的分支拉到另一台计算机上

    ```
    git fetch origin 
    ```

3.  在从 github 拉出的分支上工作

    ```
    git checkout -b newbranch origin/newbranch 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:03:03.313

在你执行“git remote add origin the-repo”之后，只需执行一个“git fetch -a origin”，此时所有的分支都在那里并准备好被检出。这是一个典型的工作流程：

```
$ git init
Initialized empty Git repository in /Users/ebg/test/dev5/.git/
$ git remote add origin  /Users/ebg/test/dev1
$ git fetch -a origin
remote: Counting objects: 41, done.
remote: Compressing objects: 100% (30/30), done.
remote: Total 41 (delta 15), reused 0 (delta 0)
Unpacking objects: 100% (41/41), done.
From /Users/ebg/test/dev1
 * [new branch]      add-on     -> origin/add-on
 * [new branch]      master     -> origin/master
$ git checkout add-on
Branch add-on set up to track remote branch add-on from origin.
Switched to a new branch 'add-on' 
```

所以，对于这个例子，分支'add-on'现在在工作目录中，如果需要，'git checkout master'将从远程'origin'获取文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T05:12:18.580

要检查远程而不是本地存在的 myBranch - 这对我有用：

```
git fetch --all
git checkout <BranchName> 
```

另一种解决方案：

我使用了 fetch 和 checkout ...

```
git fetch <remote> <rbranch>:<lbranch> 
git checkout <lbranch> 
```

...远程分支或源引用在哪里，并且是您要跟踪的尚不存在的本地分支或目标引用，并且您可能希望将其命名为与远程分支或源引用相同的名称。

# sql - 访问数据库。桌子。创建或修改时间？

> ID：10174980
> 
> 赞同：0
> 
> 时间：2012-04-16T13:22:22.397
> 
> 标签：sql, ms-access-2007

我在 2008 SQL 服务器上创建存储过程。

我找不到如何使用 SQL（或 C#，因为它将在 SSIS 中运行）在 MS Access 中检索给定表的创建日期

除了创建数据之外，还需要上次修改的时间。

有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:28:44.193

可能取决于创建数据库的 Access 的确切版本，但此信息可在`MSysObjects`表中找到 (Access 97-2010)

# jsf - 分解 EAR 文件

> ID：10174981
> 
> 赞同：4
> 
> 时间：2012-04-16T13:22:25.260
> 
> 标签：jsf, jakarta-ee, war, ear

我的 JSF 项目被部署为一个 EAR 文件。它还包括一些战争文件。我需要 EAR 的分解版本（包括分解的内部 WAR）。

有什么工具可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:25:38.997

以编程方式还是手动？EAR 和 WAR 文件与 JAR 文件一样，实际上只是具有已知内部文件/文件夹结构的 ZIP 文件。这意味着您可以像任何其他 ZIP 文件一样使用代码或使用桌面应用程序来提取 EAR 和 WAR。

* * *

> windows的命令行工具会很棒。

*   您可以很容易地放入可执行 JAR 的 Java 实现：[https ://stackoverflow.com/a/7108813/139010](https://stackoverflow.com/a/7108813/139010)
*   一个 bash 脚本：[https ://unix.stackexchange.com/a/4372/4515](https://unix.stackexchange.com/a/4372/4515)
*   最后，如果您不介意使用 Windows 兼容脚本 7zip：[https ://superuser.com/a/248349/9232](https://superuser.com/a/248349/9232)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-05T13:48:11.557

马特的回答很有帮助，但有时很高兴为您写出来。

这是我为解决这个问题而编写的一个 shell 脚本，它实际上是在 Cygwin 中运行的，但也可能在 Linux 中工作。它将解压缩和战争、耳朵或罐子，并继续解压缩它们直到递归，直到没有留下任何东西。然后，您可能希望在结果目录上使用“diff -r ear1.ear-contents ear2.ear-contents”来比较两个ear 文件。

```
#!/bin/sh

rm -rf ${1}-contents
mkdir ${1}-contents

echo "Unpacking ${1} to ${1}-contents"
unzip -d ${1}-contents ${1}

cd ${1}-contents

FILES_TO_PROCESS=`find . -type f \( -name "*.ear" -or -name "*.war" -or -name "*.jar" \)`

until [ "$FILES_TO_PROCESS" == "" ] ; do

    for myFile in $FILES_TO_PROCESS ; do

        mkdir ${myFile}-contents
        echo "Unpacking ${myFile} to ${myFile}-contents"
        unzip -d ${myFile}-contents ${myFile}
        rm $myFile

    done

    FILES_TO_PROCESS=`find . -type f \( -name "*.ear" -or -name "*.war" -or -name "*.jar" \)`
    echo "recursing to process files: $FILES_TO_PROCESS"
done 
```

# javascript - 使用模态 true 打开 jquery 对话框后启用按钮

> ID：10174982
> 
> 赞同：2
> 
> 时间：2012-04-16T13:22:26.753
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-dialog

之后我想启用一个按钮，我打开了一个 jquery 对话框，其中选项模式设置为 true。按钮显然在对话框之外。我已经知道这似乎是一个奇怪的请求，但我需要这种行为，因为我在对话框中有一个表单，所以在单击按钮提交数据后，我必须在表单末尾附加对话框，然后单击 agin在现在位于对话框之外的按钮上。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:24:40.433

使用打开对话框时触发的 te open 事件

```
$( ".selector" ).dialog({
   open: function(event, ui) { 
        $('#yourhiddenbutton').show();
    }
}); 
```

编辑 - 你可以这样做

```
$(function() {            
    $("#dialogRifiuto").dialog({
        width: 'auto',
        autoOpen: true,
        closeOnEscape: true,
        modal: true,
        resizable: false,
        open: function(){
            //change the z-index and position the div where you want
            $('#a').css({'z-index':  1005, 'position': 'absolute', 'top': 0 });            
        },
        close: function(){
            //go back to normal
            $('#a').css({'z-index':  1, 'position': 'static' });        
        }

    })

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:01:29.543

您可以使用 $('#myButton').removeAttr('disabled'); 启用按钮

# android - 定制 AutoCompleteTextView 以满足我的需求？

> ID：10174983
> 
> 赞同：1
> 
> 时间：2012-04-16T13:22:32.117
> 
> 标签：android, android-layout, autocompletetextview

**我想要的是**

1.  一个简单的 EditText。用户应该能够在任何时间点输入文本。

2.  单击此 EditText，弹出窗口应锚定到 EditText。

3.  此 EditText 的 onClick，如果已显示弹出窗口，则关闭弹出窗口。

4.  此弹出窗口将包含一个项目列表（我决定并没有过滤）单击，EditText 将被单击的项目填充。

5.  当我开始输入时，弹出窗口应该消失。

6.  我应该能够设置下拉列表的动画。

**我的选择是什么**

显然，AutoCompleteTextView。自定义 AutoCompleteTextView 后效果很好。但是有两个问题？

我能够完成第 1、2、4 和 5 点。如何绕过第 3 和第 5 点？

**由于没有任何工作...**

我想我可以只放置一个编辑文本并显示一个弹出窗口。:)

**但这完全失败了……**

我只是尝试做简单的方法。我添加了一个 EditText。然后我创建了一个 PopupWindow 类并在其中添加了一个列表视图。然后我将它锚定到我的 EditText。现在问题又开始了——

1.  我单击 EditText。弹出窗口出现。占据所有焦点，键盘消失。绝对不是我想要的。所以我使弹出窗口无法聚焦。

2.  现在我单击 EditText，出现弹出窗口。不占重点。所以键盘保持输入。就像我想要的那样完美。但是当我单击 ListView 中的列表项时，它什么也不做。为什么？对焦不准！

那我现在该怎么办？我该走哪条路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:46:16.217

对于 3\. 你可以创建一个 onFocusChange 监听器，或者和 onClickListener 并显式调用`_autoCompleteView.dismissDropDown();`。您可以使用`isPopupShowing()`它来查看它是否已经显示并在这种情况下手动关闭它。

对于 5\. 你只是做同样的事情，但你做了`_autoCompleteView.registerDataSetObserver`并将该逻辑放在`onChanged()`事件中，或者可能`addTextChangedListener`放在你的 autoCompleteTextView 中。

我不完全确定这是否是您正在寻找的功能，但这个线程现在已经快一年了，所以它可能对将来的某人有所帮助。

# iphone - 页脚不会在页面底部居中

> ID：10174996
> 
> 赞同：1
> 
> 时间：2012-04-16T13:23:00.747
> 
> 标签：iphone, html, css, footer

我的页脚完美地定位在每个计算机屏幕上。但是，当我在 Iphone 上对其进行测试时，页脚卡在页面中间并且不会以水平方式重复。

我该怎么办，所以页脚也停留在 Iphone 屏幕和其他智能手机的底部？

这是我的页脚的 CSS：

```
#footer {
    position:absolute;
    bottom:0;
    width:100%;
    height:270px;
    background-image:url(images/footer.png);   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:40:21.270

把位置改成固定的，希望能解决这个问题。

```
#footer {
    position:fixed;
    bottom:0;
    width:100%;
    height:270px;
    background-image:url(images/footer.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:40:04.133

首先，我希望它是针对静态页面的，因为动态页面会给您带来更多麻烦。

无论如何，将页脚放在 0 到底部并不是一个好主意，如果我有更大的字体或较小的分辨率（比如使用笔记本或智能手机），内容将低于页脚，这可能会发生在你的页。网络上有很多代码回答了这个特定的问题。它被称为“[粘性页脚](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)”。

这是该页面的副本/粘贴。我希望没有人被冒犯，如果它已经存在，就没有必要重写它。如果您不满意，只需 google 'Sticky footer'：

## 如何在您的网站上使用 CSS 粘滞页脚

将以下几行 CSS 添加到您的样式表中。.wrapper 中边距的负值与 .footer 和 .push 的高度相同。负边距应始终等于页脚的整个高度（包括您可能添加的任何填充或边框）。

```
* {
    margin: 0;
    }
html, body {
    height: 100%;
    }
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -4em;
    }
.footer, .push {
    height: 4em;
    } 
```

遵循这个 HTML 结构。任何内容都不能位于 .wrapper 和 .footer div 标签之外，除非它是绝对使用 CSS 定位的。.push div 中也不应该有任何内容，因为它是一个隐藏元素，可以“下推”页脚，因此它不会与任何内容重叠。

```
<html>
    <head>
        <link rel="stylesheet" href="layout.css" ... />
    </head>
    <body>
        <div class="wrapper">
            <p>Your website content here.</p>
            <div class="push"></div>
        </div>
        <div class="footer">
            <p>Copyright (c) 2008</p>
        </div>
    </body>
</html> 
```

编辑：它完全符合我所说的行为。如果您缩放页面（Control + '+'），您将看到内容如何位于页脚下方。

# c# - Oracle 的 ODBC 驱动程序：语法错误或访问冲突

> ID：10174999
> 
> 赞同：0
> 
> 时间：2012-04-16T13:23:13.477
> 
> 标签：c#, oracle10g, odbc

我有一个非常简单的 Oracle SP

```
CREATE OR REPLACE procedure DEV.SL_CLOB_TEST(numId IN PLS_INTEGER,id IN PLS_INTEGER, strText IN CLOB)
as
begin
    insert into test_table values (numId,id, strText, sysdate, user);
end; 
```

我有一个客户端 .Net 4.0 代码来使用上面的 SP

```
 static void Main(string[] args)
    {
        string connectionString = "Driver={Microsoft ODBC for Oracle};Server=server;Uid=username;Pwd=password";
        var connection = new OdbcConnection(connectionString);
        connection.Open();

        IDbCommand command = connection.CreateCommand();

        command.CommandText = "{call SL_CLOB_TEST(?,?,?)}";
        command.CommandType = CommandType.StoredProcedure;

        OdbcParameter parameter1 = new OdbcParameter("NUMID", OdbcType.Int);
        parameter1.Value = 123;
        parameter1.Direction = ParameterDirection.Input;
        command.Parameters.Add(parameter1);

        OdbcParameter parameter2 = new OdbcParameter("ID", OdbcType.Int);
        parameter2.Value = 234;
        parameter2.Direction = ParameterDirection.Input;
        command.Parameters.Add(parameter2);

        OdbcParameter parameter3 = new OdbcParameter("STRTEXT", OdbcType.VarChar);
        parameter3.Value = getClob();
        parameter3.Direction = ParameterDirection.Input;
        command.Parameters.Add(parameter3);

        command.ExecuteNonQuery();
    }

    private static string getClob()
    {
        return new string('a', 10);
    }
} 
```

当我运行它时出现错误**ERROR [42000] [Microsoft][ODBC driver for Oracle]Syntax error or access violation**，整个调用堆栈是

> System.Data.Odbc.OdbcException 未处理 Message=ERROR [42000] [Microsoft][ODBC driver for Oracle]语法错误或访问冲突
> Source=msorcl32.dll ErrorCode=-2146232009 StackTrace：在 System.Data.Odbc.OdbcConnection.HandleError（OdbcHandle hrHandle，RetCode retcode）在 System.Data.Odbc.OdbcCommand.ExecuteReaderObject（CommandBehavior 行为，字符串方法，布尔需要阅读器，对象 [ ] methodArguments, SQL_API odbcApiMethod) 在 System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior 行为, 字符串方法, Boolean needReader) 在 System.Data.Odbc.OdbcCommand.ExecuteNonQuery() 在 ConsoleApplication1.Program.Main(String[] args)在 D:\Temp\ConsoleApplication1\ConsoleApplication1\Program.cs:第 32 行 System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args) at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity,String[] args) 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart() InnerException：在 System.Threading.ThreadHelper.ThreadStart() InnerException 处运行（ExecutionContext executionContext，ContextCallback 回调，对象状态）：在 System.Threading.ThreadHelper.ThreadStart() InnerException 处运行（ExecutionContext executionContext，ContextCallback 回调，对象状态）：

这里的错误信息很不清楚是什么问题。有人知道我应该调查什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:48:32.680

我做了一些其他测试，只是在 SP 中将数据类型从 CLOB 更改为 varchar2，并且代码的工作限制是我最多可以向 SP 发送 31.75K 字符串大小。