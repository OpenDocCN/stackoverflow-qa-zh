# StackOverflow 问答 11504000-11504999

# c# - GetExpectedParticles() 当兄弟有 'maxOccurs=unbounded' 进入循环

> ID：11504002
> 
> 赞同：1
> 
> 时间：2012-07-16T12:09:12.520
> 
> 标签：c#, xml, xsd

假设我有这个 XmlSchema 片段：

```
<xs:element name= "A">
 <xs:complexType>
  <xs:sequence>
   <xs:element ref="A1" maxOccurs="1"/>
   <xs:element ref="A2" maxOccurs="unbounded"/>
   <xs:element ref="A3" maxOccurs="1"/>
  </xs:sequence>
 </xs:complexType>
</xs:element> 
```

我使用 XmlSchemaValidator.GetExpectedParticles() 方法循环进入 A 的孩子。因为 complexType 是一个序列，所以要验证同级，我需要验证前一个，退出上下文，然后 GetExpectedPartciles() 才会返回下一个同级。

因此，当我在列表的 A1 项中时，我调用这些代码行：

```
validator.ValidateElement("A1", null, null); --> validate and enter in the Context of A1
validator.ValidateEndOfAttributes(null); --> End the validation of Attributes
validator.SkipToEndElement(null); --> Exit from the context; only when the ComplexType is a Sequence 
```

当我到达 A2 元素时，GetExpeectedParticles 会像循环一样返回相同的元素 A2，但我无法到达 A3 元素（或者我不知道该怎么做）。我想这是因为 maxoccurs 是无限的。

所以问题是我怎样才能跳到下一个兄弟A3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:26:08.120

GetExpectedParticles() 确实返回 A3 和 A2。因此，如果您想退出循环，只需继续验证数组中的下一项，如果当前 MaxOccursString = "unbounded"，则不要再次调用 GetExpectedParticles()。

# android - TranslateAnimation 如何在 Android 上运行？

> ID：11504005
> 
> 赞同：24
> 
> 时间：2012-07-16T12:09:20.053
> 
> 标签：android, android-animation

我经历了

```
TranslateAnimation (float fromXDelta, float toXDelta, float fromYDelta, float toYDelta) 
```

但我仍然对如何`Translate animation`工作感到困惑。

有人可以解释一下它是如何工作的吗？我读了文档说

```
fromXDelta  Change in X coordinate to apply at the start of the animation
toXDelta    Change in X coordinate to apply at the end of the animation
fromYDelta  Change in Y coordinate to apply at the start of the animation
toYDelta    Change in Y coordinate to apply at the end of the animation 
```

但我仍然不清楚它是如何工作的。

**编辑**：我有 a`Button`和 a`LinearLayout`没有任何孩子。当我单击时，`Button`我想动态生成一个`TextView`并动画`TextView`显示在`LinearLayout`. s 的数量`TextView`取决于按钮的点击次数。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T12:20:13.170

AFAIK，这之间会有相对的联系。

也就是说，如果您想将隐藏的文本视图从**屏幕右侧翻译到屏幕左侧**，单击按钮，您实际上需要将其从 X 方向（**屏幕右侧**）的 100% 翻译为 X 的 0% -方向（**屏幕左侧**）。

在这一点上，你根本不需要改变 Y 方向。所以这两个选项都是 0%。所以最后，你将拥有：

**来自XDelta** 100%

**toXDelta** 0%

**来自YDelta** 0%

**toYDelta** 0%

根据您的要求，您可以通过将此百分比设置在 0 到 100 之间来限制组件的视图。

同样，如果您还需要在 Y 方向上平移组件，则需要将 0% 更改为其他值。

希望，你现在清楚了。

**编辑 ：**

根据您的要求，您需要覆盖 button-1 的 onclick，然后您可以控制 button-2 的可见性以及翻译。

在您的 res 的 anim 文件夹中创建动画文件。

**翻译按钮.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- translating button from right to left -->
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">
    <translate
        android:fromXDelta="100%" android:toXDelta="0%"
        android:fromYDelta="0%" android:toYDelta="0%"
        android:duration="900"
    />
</set> 
```

现在，在您的活动文件中，

```
...

// ll  is linear layout containing button_2
//counter is used to manage visibility of button_2 on click of button_1,i.e.1st click-button_2 would be visible,on 2nd click on button_1,it would be invisible.

//you can change behavior as per your need

button_2.setVisibility(View.GONE);
button_1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        if(counter<1)
        {
            counter++;                  
            button_2.setVisibility(View.VISIBLE);
            Animation anim=AnimationUtils.loadAnimation(context, R.anim.translate_button);
            button_2.startAnimation(anim);
        }
        else
        {
            counter=0;
            button_2.setVisibility(View.GONE);
        }
    }
});
ll.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        if(counter==1)
        {
            counter=0;
            button_2.setVisibility(View.GONE);
        }
    }
});

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:20:40.197

使用 TranslateAnimation，您可以创建动画来控制对象。

使用 TranslateAnimation，您可以控制对象的位置。您传递这 4 个参数，它们代表 X 和 Y 坐标。

通过示例，您要将对象**向右**移动，您可以执行以下操作： TranslateAnimation(0.0f, 1.0f, 0.0f, 0.0f)

（或使用`Animation.ABSOLUTE`, `Animation.RELATIVE_TO_SELF`）

我们现在只使用 X 坐标，因为我们现在正在做一个简单的“从左到右”动画移动。

```
Change in X coordinate to apply at the start of the animation
toXDelta (0.0f)    

Change in X coordinate to apply at the end of the animation (1.0f) 
```

= **1 向右**

也许看看[http://en.wikipedia.org/wiki/Coordinate_system](http://en.wikipedia.org/wiki/Coordinate_system)

# php - 是否可以获得 SimpleXML 元素的 XPath？

> ID：11504006
> 
> 赞同：0
> 
> 时间：2012-07-16T12:09:22.857
> 
> 标签：php, xpath, simplexml

找到一个特殊元素后，我想获取它的 XPath。是否有可能获得 SimpleXML 元素的 XPath？就像是：

```
$xPathString = $element->getXpath(); 
```

我需要 XPath 才能将其传递给 Selenium 测试用例的“点击”方法。

# android - 如何在Android中检查照片是在横向还是纵向模式下拍摄的？

> ID：11504008
> 
> 赞同：2
> 
> 时间：2012-07-16T12:09:58.363
> 
> 标签：android, android-camera, android-camera-intent

我是安卓新手。我正在尝试制作一个带有照片捕捉功能的应用程序。问题是照片旋转不正确。如果我在横向模式下拍摄照片会很好，但在纵向模式下照片旋转会出错。我的问题是：我可以检查照片是否以横向/纵向模式拍摄吗？因为当我在 LogCat 上查看时，我可以看到名为“CameraEngine”的标签，上面写着旋转：0 或 90。如果我可以通过代码获取这种相机信息，那就太棒了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:14:11.247

您可以比较图像的宽度和高度：

```
Bitmap bmp = your photo;

if(bmp.getWidth() > bmp.getHeight())
{
   // landscape
}else
{
   // portrait
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T15:42:05.320

**如果照片是使用 PhoneGape 2.9 及更高版本专门拍摄的，**则无法在 Android 中签入。****

 ****因为您必须从存储在拍摄照片中的EXIF 属性**中提取此信息，而 android 甚至不会写出此属性的方向。

您可以参考以下问题的回复以获取更多信息： [画布 drawImage() 与在 iphone 上拍摄的横向照片被旋转](https://stackoverflow.com/questions/16221005/canvas-drawimage-with-photos-taken-on-iphone-in-landscape-are-rotated)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:17:26.057

这应该做你需要的。它以角度 (0/90/180/270) 的形式返回方向：

```
private int getOrientation(Uri aUri, ContentResolver aRslv) {
    Cursor _cursor = aRslv.query(aUri,
            new String[] { MediaStore.Images.ImageColumns.ORIENTATION },
            null, null, null);

    if (_cursor != null) {
        try {

            if (_cursor.moveToFirst()) {
                return _cursor.getInt(0);
            } else {
                return -1;
            }
        } finally {
            _cursor.close();
        }
    } else {
        return 0;
    }
} 
```**

# c# - WCF Rest上传文件大小问题

> ID：11504009
> 
> 赞同：0
> 
> 时间：2012-07-16T12:09:59.563
> 
> 标签：c#, wcf, rest

最初，我的上传限制为 64KB。

我在网上和本网站上浏览了多项建议，并进行了以下更改

```
 <bindings>
  <webHttpBinding>
    <binding name="StreamedRequestWebBinding"
             maxReceivedMessageSize="10485760"
maxBufferPoolSize="10485760" maxBufferSize="10485760" closeTimeout="00:03:00"
openTimeout="00:03:00" receiveTimeout="00:10:00" sendTimeout="00:03:00">
      <readerQuotas maxDepth="32" maxStringContentLength="10485760"
maxArrayLength="10485760" maxBytesPerRead="10485760" />
      <security mode="None" />
    </binding>
  </webHttpBinding>
</bindings>

<endpoint address="" bindingConfiguration="StreamedRequestWebBinding" behaviorConfiguration="web" binding="webHttpBinding"
      contract="DatingService.IRegisterService1" />

 <system.web>
<compilation debug="true" targetFramework="4.0" />
<httpRuntime executionTimeout="240" maxRequestLength="10240" />
<pages validateRequest="false" />

  </system.web> 
```

进行上述更改后，我最多可以上传 4MB，尽管我已将最大允许大小设置为 10MB。我们还没有将应用程序移植到 IIS，并且仅从 Visual Studio 进行测试。我哪里做错了？请建议

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T12:15:31.293

4mb 是应用程序服务器的默认最大帖子大小。你可以改变这个

[http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx)

# grammar - 如何用 EBNF 定义排列？

> ID：11504011
> 
> 赞同：3
> 
> 时间：2012-07-16T12:10:12.747
> 
> 标签：grammar, permutation, ebnf

我正在使用 EBNF 来定义语法。

但是我被卡住了，因为我需要定义一个排列：我有一组可以组合的值，但它们只能使用一次，而且我不关心顺序。

如何用 EBNF 做到这一点？

示例：值：a、b、c

可能的组合：abc、acb、bac、bca、cab、cba

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T18:33:49.973

除了手动定义每个排列之外，这样的事情不能用 (E)BNF 表示：

```
values = "abc" | "acb" | "bac" | "bca" | "cab" | "cba" ; 
```

# android - 如何从 ArrayList 填充 android 中的 listview？

> ID：11504012
> 
> 赞同：0
> 
> 时间：2012-07-16T12:10:18.557
> 
> 标签：android, arraylist, android-listview

> **可能重复：**
> [使用 ArrayList 填充 ListView？](https://stackoverflow.com/questions/5070830/populating-a-listview-using-arraylist)

我正在尝试在 android 中创建一个列表视图，并且我有一个包含所有列表数据的 ArrayList，但我在列表视图中显示数据时遇到了问题。任何人都可以向我解释这怎么可能。请参考一些例子。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:18:25.943

假设 listitems 是数组列表，那么您需要将您的数组列表附加到 listview 为

```
//Declaration part
ArrayAdapter<String> adapter;
ArrayList<String> listItems=new ArrayList<String>();
lv  =(ListView)findViewById(R.id.listView1);

//arraylist Append
adapter=new ArrayAdapter<String>(From.this,
            android.R.layout.simple_list_item_1,
            listItems);
lv.setAdapter(adapter); 
```

# c++ - 在 MFC 中显示 XML 的最佳方式？

> ID：11504014
> 
> 赞同：1
> 
> 时间：2012-07-16T12:10:24.447
> 
> 标签：c++, mfc

我正在尝试将我用 MSXML 读取的 XML 文件显示`Getxml()`为 CString 我试图在 CListBox 中显示字符串，但我的 CListBox 将显示如下：
![列表框](../Images/67a3ab8fac3cfafd2e0a2b7b6be7a6f2.png)

但我想要真正的换行符而不是这个方块！

但我阅读的 XML 使用 CR/LF 格式化得很好：
![XML](../Images/fc67fee0a098b8dbfce114c1a241f3cb.png)

可能 CListBox 不是显示 XML 的正确方法吗？
还是我必须更换 CR/LF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:35:59.667

有一个 Web 浏览器控件，如果您需要良好的 XML 格式，您可以使用它。请参考[这里](http://msdn.microsoft.com/en-us/library/aa752046%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:13:39.037

我认为最好使用多行[CEdit](http://msdn.microsoft.com/en-us/library/f7yhsd2b%28v=vs.80%29.aspx)或[RichEdit](http://msdn.microsoft.com/en-us/library/h2hkhzhe%28v=vs.80%29.aspx)。

# arrays - 将一列数字读入数组的最快方法

> ID：11504024
> 
> 赞同：16
> 
> 时间：2012-07-16T12:11:15.667
> 
> 标签：arrays, vba, excel

假设我有一列数字（其中有多少可以变化，但可能在 1000-10000 之间）并且我想将它们全部读入 VBA 中的数组，那么最快的方法是什么？

显然我可以创建一个大小为 10000 的数组并执行一个 for/while 循环，但是有没有比这更快的方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-16T12:48:10.953

像这样？

```
Dim Ar as Variant

Ar = Sheets("Sheet").Range("A1:A10000").Value 
```

如果您不知道最后一行，那么您可以使用它找到最后一行[，](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)然后使用上面的代码作为

```
Ar = Sheets("Sheet").Range("A1:A" & LRow).Value 
```

# mongodb - 了解 MongoDB 地理位分辨率

> ID：11504026
> 
> 赞同：1
> 
> 时间：2012-07-16T12:11:18.440
> 
> 标签：mongodb, geospatial

GeoSpatial[文档](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/)指出，默认的 26 位产生大约 1 英尺的空间分辨率。如果我们考虑 2 ^ 26 / 6371 公里，这几乎是正确的。

但是，6371 是地球的半径，而不是周长，即 40075 公里。26 位将产生 59.7 cm (1.96') 的分辨率。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:59:47.363

您是对的，我已将文档固定为“大约 2 英尺”。

# asp.net - ASP.NET 内存泄漏 - OracleCommand

> ID：11504028
> 
> 赞同：0
> 
> 时间：2012-07-16T12:11:20.707
> 
> 标签：asp.net, debugging, windbg

我继承了一些类似的代码：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            Try
                Dim Test As Integer
                Dim strCon As String = "Data Source=TestDatabase;User Id=TestUser;Password=TestPassword;"
            For Test = 0 To 100000
            Dim objDBCon As New OracleConnection(strCon)
            Dim objDBCmd As New OracleCommand
            Dim objDR As OracleDataReader
            Using objDBCon
                'Using objDBCmd
                objDBCmd.Connection = objDBCon
                objDBCmd.CommandText = "SELECT * FROM nominal_incident where rownum = 1 "
                objDBCon.Open()
                objDR = objDBCmd.ExecuteReader
                'End Using

            End Using
        Next   
            Catch ex As Exception
              'Handle the exception.  It is not absorbed.
            End Try
        End Sub 
```

这会导致内存泄漏吗？我希望看到如下 Using 语句：

```
Using objDBCmd

End Using 
```

ASP.NET 进程逐渐增长（超过 1 GB），WinDBG 显示堆上有 OracleCommand 对象（尽管没有我预期的那么多）。我想 OracleCommand 可以保留会导致进程大小增长的其他资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:29:22.957

`Using`用于在完成后释放对象，因此这不是问题。但是`using`确实关闭了`objDBCon`连接。保持该连接打开并在每次调用数据库时共享它会更有效。所以在这种情况下，我实际上会摆脱使用 for`objDBCon`并将其拉到`for`循环之外，只需确保在所有 db 调用之后将其关闭在循环之外。

另外，我不确定这是否是您的代码的直接副本，我无法判断您的代码在做什么，但是对 db 的 100k 调用可能是它的内存使用量如此之高并且会导致高负载的原因sql服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:29:52.133

我认为这不会导致内存泄漏，但是在循环中打开 10 万个连接的事实（即使它们是池化的）我认为看到如此大量的资源被消耗并不奇怪。

# eclipse-rcp - Eclipse RCP 网页版

> ID：11504037
> 
> 赞同：0
> 
> 时间：2012-07-16T12:11:44.637
> 
> 标签：eclipse-rcp, eclipse-rap

我的客户有很多 Eclipse RCP 应用程序，并希望以最少的努力将它们转换为 Web 应用程序。

Eclipse RAP 有什么替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:34:48.897

将 RCP 应用程序转换为 WEB 的工作量最少吗？绝对说唱。

# iphone - 从相机胶卷拍摄的图像需要很长时间才能在 uitableview 中显示

> ID：11504040
> 
> 赞同：1
> 
> 时间：2012-07-16T12:11:48.517
> 
> 标签：iphone, objective-c, ios, uitableview, uiimagepickercontroller

我正在使用这个类从 a 中获取图像`UIImagePickerController/Camera`，将它们存储在文档目录中并将它们显示给用户。本质上，这段代码可以工作，但是在用户选择图像后（至少 10 秒以上），实际在 UITableView 中显示数据需要很长时间。

这是我的课程（不是完整的课程，只是问题代码）：

```
#import "ReceiptImageViewController.h"
#import "ReceiptImageCell.h"

@interface ReceiptImageViewController ()

@end

@implementation ReceiptImageViewController

@synthesize fields;
@synthesize receiptNumber;
@synthesize delegate;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    images = [[NSMutableArray alloc] init];

    //Set UI Colors
    self.navigationController.navigationBar.tintColor = [UIColor blackColor];
    self.navigationController.toolbar.tintColor = [UIColor blackColor];
}

- (void) viewDidAppear:(BOOL)animated{
    NSLog(@"ViewDidAppear");
    [self.tableView reloadData];
    NSLog(@"Table Data Reloaded");
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    [images removeAllObjects];
    for (NSString *path in fields)
    {
        if (![path isEqualToString:@""])
        {
            UIImage *image = [UIImage imageWithContentsOfFile:path];
            [images addObject:image];
            NSLog(@"Adding Image");
        }
        NSLog(@"Loop");
    }
    return [images count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ReceiptImageCell";
    ReceiptImageCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    //Set info label text
    cell.infoLabel.text = [NSString stringWithFormat:@"Receipt Image: %d", indexPath.row];
    cell.receiptImage.image = [images objectAtIndex:indexPath.row];

    return cell;
}

#pragma mark - UIActionSheet Delegate

//Displays action sheet when the user presses
//'+' button next to image view
-(IBAction)showActionSheet:(id)sender{

    UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Receipt Image" 
                                                            delegate:self 
                                                   cancelButtonTitle:@"Cancel"
                                              destructiveButtonTitle:NULL 
                                                   otherButtonTitles:@"Take Picture", @"Choose From Library", nil];
    popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    popupQuery.tag = 0;
    [popupQuery showInView:self.view];

    //    //FOR TESTING ON SIMULATOR 
//    UIImage* image = [UIImage imageNamed:@"Receipt1.jpg"];
//    int i = [self.tableView numberOfRowsInSection:0] + 1;
//    NSString* imageName = [NSString stringWithFormat:@"Receipt%@Image%d", receiptNumber, i];
//    [self saveImage:image :imageName];
}

//Saves receipt image to documents directory
- (void)saveImage:(UIImage*)image:(NSString*)imageName 
{ 
    NSData *imageData = UIImagePNGRepresentation(image); //convert image into .png format.

    NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it

    NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]]; //add our image to the path 

    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; //finally save the path (image)

    [fields addObject:fullPath];

    [self.tableView reloadData];

    NSLog(@"image saved");
}

#pragma mark - UIImagePickerControllerDelegate

//Receive the image the user picks from the image picker controller
-(void)imagePickerController:(UIImagePickerController*)picker
didFinishPickingMediaWithInfo:(NSDictionary*)info {
    // Do stuff to image.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage* image = [info objectForKey: UIImagePickerControllerOriginalImage];
        int i = [self.tableView numberOfRowsInSection:0] + 1;
        NSString* imageName = [NSString stringWithFormat:@"Receipt%@Image%d", receiptNumber, i];
        [self saveImage:image :imageName];
    });

    [self dismissModalViewControllerAnimated:YES];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (actionSheet.tag == 0){
        if (buttonIndex == 0) {
            NSLog(@"Take Picture Button Clicked");
            // Create image picker controller
            UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

            // Set source to the camera
            imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

            // Delegate is self
            imagePicker.delegate = self;

            // Show image picker
            [self presentModalViewController:imagePicker animated:YES];
        } 
        else if (buttonIndex == 1) {
            NSLog(@"Choose From Library Button Clicked");
            // Create image picker controller
            UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

            // Set source to the camera
            imagePicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;

            // Delegate is self
            imagePicker.delegate = self;

            // Show image picker
            [self presentModalViewController:imagePicker animated:YES];
        } 
        else if (buttonIndex == 2) {
            NSLog(@"Cancel Button Clicked");
        } 
    }
} 
```

谁能解释为什么会这样？我在其他应用程序中遇到过这个问题，但从未设法找到解决方案..即使是涉及使用活动指示器或类似的解决方案？

非常感谢，

杰克

# visual-studio-2010 - 未更新 nuget 包时的选项

> ID：11504041
> 
> 赞同：0
> 
> 时间：2012-07-16T12:11:50.677
> 
> 标签：visual-studio-2010, jqgrid, nuget, nuget-package

我们在许多应用程序中都使用 jQgrid，nuget 将是确保我们与最新版本保持同步的完美方式，但如果 nuget 包的作者没有使其保持最新，那么它更有意义让我们手动保持最新。

JQGrid 在 v4.4.0 上，而唯一可用的 nuget 包在 v4.2.0 上（最后更新于 2011 年 11 月）。我想要升级的新版本中有一些特定的修复。

[http://www.trirand.com/blog/](http://www.trirand.com/blog/)

[http://nuget.org/packages/jquery.jqgrid](http://nuget.org/packages/jquery.jqgrid)

如果 nuget 包的作者停止更新它，我能做些什么吗？有没有办法建议包被接管、删除或从头开始创建一个新包？

**更新**

我试图联系所有者要求他更新它，但不幸的是没有得到答复。我会自己创建一个 nuget 包（有多个所有者），但是 jqGrid 的所有好名字也被采用了，所以不幸的是，我认为我将不得不避免为 jqGrid 使用 nuget 并返回手动更新它:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:27:43.727

如果您想接管维护，您可以联系所有者并要求成为“所有者”。我之前也遇到过类似的情况，但是现在的所有者必须更加经常地保持 NuGet 包的最新状态。在那种情况下，我从来没有时间请求许可。

在其他情况下，我在 NuGet 上有我想要的包，但不是我的，所以我只是把它们放在那里（当然，许可证允许）。在这种情况下，我会通过电子邮件向作者发送电子邮件，让他们知道如果他们愿意，我愿意转让所有权。他们通常会感谢我把它放在那里，然后*不*要求接管包裹。到目前为止，我还没有看到任何“嫉妒的主人”的案例。大多数人很高兴让其他人承担这项任务。

似乎没有任何标准方式建议驱逐 NuGet 所有者。至于从头开始，如果您使用不同的包 ID，这是完全可能的。但是，请记住，NuGet 包不能从 NuGet.org 中删除，只能是未列出的。因此，将您的“非官方”版本发布到像 MyGet.org 这样的备用主机上可能是一个更好的主意。

# php - 从 MySQL 编码 Json

> ID：11504042
> 
> 赞同：0
> 
> 时间：2012-07-16T12:11:54.227
> 
> 标签：php, javascript, json, forms, multi-step

所以我试图从 MySQL 编码为 JSON，我需要 [pagenumber][id,type,description][answerid,answerdescription] 格式。这样做的目的是读取 javascript 文件中的数据，该文件将为我生成多步投票。

我将尝试在此处绘制一个伪代码，说明我希望它的外观：

```
{"pages":
  [{1:
    [{"id":1,"text":"U mad?","options":
      [{"opt_id":1,"option":"yes","answer:''"},
       {"opt_id":2,"option":"no","answer:''"},
       {"opt_id":3,"option":"perhaps","answer:''"}]},
       {"id":2,"text":"Got it?","options":
    [{"opt_id":1,"option":"yes","answer:''"},
       {"opt_id":2,"option":"no","answer:''"}]
    }]
   },
   {2:
    [{"id":3,"text":"Help me?","options":
     [{"opt_id":1,"option":"yes","answer:''"},
       {"opt_id":2,"option":"no","answer:''"},
       {"opt_id":3,"option":"perhaps","answer:''"}]},
     {"id":4,"text":"Please?","options":
      [{"opt_id":1,"option":"yes","answer:''"},
       {"opt_id":2,"option":"no","answer:''"}]
    }]
  }]
} 
```

这是我到目前为止得到的，但我似乎想不出一种方法来添加第三个“维度”，我想要一个 [id => (int), description => (string)] 的数组对每个问题。每个问题都需要空间来容纳与其相关的多个答案。answers/options 数组中的最后一列是文本字符串（大多数答案由 ID 号回答，但有些是需要整个字符串的文本区域）。这可能不需要，因为我可以通过序列化将表单结果发回。

```
$rows = array();

while($r = mysql_fetch_assoc($sth)) 
{
    $Qid = $r['id']; 
    $page=$r['page']; 
    $type=$r['type']; 
    $Qdesc=$r['description'];

    $rows[$page][] = array(
                    'id' => $Qid,
                    'type' => $type,
                    'description' => $Qdesc);
} 
```

结果如下（前 3 页）。

```
{
"1":[
  {"id":"2","type":"1","description":"U mad?"},
  {"id":"3","type":"1","description":"Got it?"},
  {"id":"4","type":"1","description":"Help me?"}],
"2":[
  {"id":"5","type":"1","description":"Please?"},
  {"id":"6","type":"1","description":"Any clues?"}],
"3":[
  {"id":"7","type":"2","description":"Foobar?"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:32:37.540

这不是一个完整的答案，但为了帮助您开始，您可以：

```
json_encode(array("pages" => array(1 => $row1, 2=>$row2))); 
```

通常，您可以`array(..)`在另一个`array(..)`. 喜欢：

```
json_encode(
    array(
        $item1,
        $item2,
        array(
            "key1" => array(
                    1,
                    2,
                    array(
                        "inKey1" => array(4,5,6)
                    )
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:34:06.730

选项表怎么样？

```
id, option, answer
1, yes, ''
2, no, ''
3, perhaps, '' 
```

（您的答案数据始终为空，因此我将其包含在内以保持一致性）

然后对于每个问题，您将有一个带有“1,2,3”的选项字段，用于所有选项“1,2”，只是是/否等。

要实现这一点，您可以：-

```
$options=array();
if(!empty($r['options']))
{
    $sql="SELECT * FROM options_table WHERE id IN (".$r['options'].")";
    $result=mysql_query($sql);
    while($row=mysql_fetch_assoc($result){
       $options[]=$row;
    }
}

$rows[$page][] = array(
                'id' => $Qid,
                'type' => $type,
                'description' => $Qdesc,
                'options'=>$options); 
```

这样你就可以为你的心内容添加选项

# tcp - 为什么 p2p 的 nat 打孔需要服务器

> ID：11504044
> 
> 赞同：0
> 
> 时间：2012-07-16T12:11:55.293
> 
> 标签：tcp, network-programming, p2p

我需要实现一个 p2p 通信器并阅读有关 nat 打孔的信息。有几个问题我不太明白：

1.  如果我知道对等方的公共 IP 地址和目的地，我真的需要服务器吗？
2.  在现实生活中，它真的有效吗？有哪些网络策略可能导致它失败
3.  对于 Skype，如果理论上适用于任何端口，为什么它还可选地需要 443 和 80？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:15:21.387

服务器的主要目的是帮助检测如何将私有地址转换为公共地址，而这只能从 LAN 外部看到。

> 1.  如果我知道对等方的公共 IP 地址和目的地，我真的需要服务器吗？

不。

> 2.  在现实生活中，它真的有效吗？有哪些网络策略可能导致它失败

除非您尝试访问的端口被防火墙阻止，否则如果您知道对等方的公共地址，则应该没有问题。

> 3.  对于 Skype，如果理论上适用于任何端口，为什么它还可选地需要 443 和 80？

因为这些端口通常是开放的（即未被 NAT/防火墙阻止），而其他端口则不一定是开放的。

# java - 覆盖注入的对象

> ID：11504049
> 
> 赞同：0
> 
> 时间：2012-07-16T12:12:06.113
> 
> 标签：java, jboss, java-ee-6, cdi

关于更改注入对象的 CDI 行为，我有点困惑。

我有一个包含登录名和密码的简单用户类。我为 CDI 生成一个对象：

```
public class SessionService {

    @LoggedIn
    @Produces @SessionScoped
    public User loggedInUser() {
        return new User("login", "pass");
    }
} 
```

在下一步中，用户打开登录视图，登录控制器检查凭据。

```
@Named
@SessionScoped
public class LoginController extends Controller implements Serializable {

    private static final long serialVersionUID = 6047784887724513434L;

    @Inject
    UserService userService;

    @Inject
    Credentials credentials;

    @Inject
    @LoggedIn
    User currentUser;

    public void doLogin() {
        User check = userService.findUser(credentials.getLogin());
        if((check != null) && (check.getPasswort().equals(SHA256.hash(credentials.getPasswort())))) {
            currentUser = check;
            FacesRedirect.fromOutcome("login.success");
        } else {
            addErrorMessage("loginFailed");
        }
    }
} 
```

当我尝试用找到的“检查”用户覆盖最初生成的 currentUser-object 时，这不起作用 - 我没有收到错误，但其他类中的注入对象与以前相同。当我调用注入的 currentUser-object 的 setLogin() / setPassword() 方法时，所有其他类都可以使用这些更改。

```
currentUser.setId(check.getId());
currentUser.setLogin(check.getLogin());
currentUser.setPasswort(check.getPassword()); 
```

有没有另一种方法来覆盖整个对象而不是调用所有的设置器？

在第一次尝试中，我在 LoginController 中使用了 @Produces，但是当我将它注入过滤器时，启动失败。

感谢您的帮助，托拜厄斯

====================编辑====================

就像@atamanroman 建议的那样，我删除了 SessionService 并将其添加到 LoginController：

```
@Produces
@LoggedIn
public User getCurrentUser() {
    return currentUser;
} 
```

我`javax.enterprise.context.SessionScoped`用于控制器 SessionScope，LoginFilter 如下所示：

```
package de.mad_onion.thweb.util;

import java.io.IOException;

import javax.inject.Inject;
import javax.inject.Named;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import de.mad_onion.thweb.domain.User;

@Named("loginFilter")
@WebFilter(filterName = "LoginFilter", urlPatterns = {"/einsatz.xhtml"})
public class LoginFilter implements Filter {

    @Inject
    @LoggedIn
    User currentUser;

    @Override
    public void destroy() {
        // TODO Auto-generated method stub

    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain fc) throws IOException, ServletException {

        HttpServletResponse httpResponse = (HttpServletResponse)response;
        HttpServletRequest httpRequest = (HttpServletRequest)request;
        HttpSession httpSession = httpRequest.getSession();

        if(currentUser == null) {
            System.out.println("No user");
        } else {
            System.out.println("User:");
            System.out.println(currentUser.toString());
        }
        fc.doFilter(request, response);

    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        System.out.println("Filter initialized");
    }
} 
```

如果我尝试部署应用程序，我会得到这个堆栈跟踪：

```
18:03:47,025 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/thweb]] (MSC service thread 1-2) Exception starting filter LoginFilter: java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:163) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:85) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.deployment.component.WebComponentInstantiator$1.<init>(WebComponentInstantiator.java:57) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.deployment.component.WebComponentInstantiator.getReference(WebComponentInstantiator.java:55) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.deployment.WebInjectionContainer.instantiate(WebInjectionContainer.java:99) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:78) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:72) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:441) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
Caused by: org.jboss.weld.context.ContextNotActiveException: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
    at org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:598) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.AbstractReceiverBean.getReceiver(AbstractReceiverBean.java:73) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.ProducerMethod$1.produce(ProducerMethod.java:131) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.AbstractProducerBean.create(AbstractProducerBean.java:299) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.as.weld.injection.InjectableField.inject(InjectableField.java:56) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.weld.injection.WeldEEInjection.inject(WeldEEInjection.java:81) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.weld.injection.WeldInjectionInterceptor.processInvocation(WeldInjectionInterceptor.java:60) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:161) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    ... 15 more

18:03:47,095 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error filterStart
18:03:47,097 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/thweb] startup failed due to previous errors
18:03:47,100 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.web.deployment.default-host./thweb: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./thweb: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]

18:03:47,313 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "thweb.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./thweb" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./thweb: JBAS018040: Failed to start context"}}
18:03:47,319 WARN  [org.jboss.as.ee] (MSC service thread 1-3) JBAS011005: Failed to destroy component instance org.jboss.as.ejb3.component.singleton.SingletonComponentInstance@cafb6f: org.agoncal.application.petstore.exception.ValidationException: Category object is null
    at org.agoncal.application.petstore.service.CatalogService.removeCategory(CatalogService.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.weld.ejb.DelegatingInterceptorInvocationContext.proceed(DelegatingInterceptorInvocationContext.java:81)
    at org.agoncal.application.petstore.util.LoggingInterceptor.logMethod(LoggingInterceptor.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.interceptor.proxy.InterceptorInvocation$InterceptorMethodInvocation.invoke(InterceptorInvocation.java:72)
    at org.jboss.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:82)
    at org.jboss.weld.bean.InterceptorImpl.intercept(InterceptorImpl.java:90)
    at org.jboss.as.weld.ejb.DelegatingInterceptorInvocationContext.proceed(DelegatingInterceptorInvocationContext.java:71)
    at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.delegateInterception(Jsr299BindingsInterceptor.java:112)
    at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:125)
    at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:135)
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:82)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:202)
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:306)
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.agoncal.application.petstore.service.CatalogService$$$view127.removeCategory(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)
    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260)
    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:111)
    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
    at org.agoncal.application.petstore.service.CatalogService$Proxy$_$$_Weld$Proxy$.removeCategory(CatalogService$Proxy$_$$_Weld$Proxy$.java)
    at de.mad_onion.thweb.service.DBPopulator.clearDB(DBPopulator.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptorFactory$ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptorFactory.java:130) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ManagedReferenceReleaseInterceptorFactory$ManagedReferenceReleaseInterceptor.processInvocation(ManagedReferenceReleaseInterceptorFactory.java:90) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228)
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.requiresNew(CMTTxInterceptor.java:333)
    at org.jboss.as.ejb3.tx.SingletonLifecycleCMTTxInterceptor.processInvocation(SingletonLifecycleCMTTxInterceptor.java:56)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.BasicComponentInstance.destroy(BasicComponentInstance.java:119) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.component.singleton.SingletonComponent.destroySingletonInstance(SingletonComponent.java:179)
    at org.jboss.as.ejb3.component.singleton.SingletonComponent.stop(SingletonComponent.java:136)
    at org.jboss.as.ee.component.ComponentStartService.stop(ComponentStartService.java:49) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:1911) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:1874) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:10:14.307

我有几个“花哨”的方法来做到这一点，但老实说，使用 setter 是最干净的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:04:58.807

如果您将当前用户注入`@Inject @LoggedIn`到容器中的其他 bean 中，将始终调用带有 @Producer 注释的方法，然后创建一个新用户 ( `return new User("login", "pass");`)。正确的用户只会设置在您的 LoginController 中，这与您的 SessionService 完全无关。我猜想删除 SessionService 并创建一个标记为`currentUser`的getter将解决您的逻辑中的问题。`LoginController``@Produces @LoggedIn`

**真正的问题似乎是注入过滤器不起作用。**您能否验证您是否使用了正确的 @SessionScoped 注释（不是来自 jsf）并使用详细的错误消息显示您的过滤器实现？

[如此处](https://stackoverflow.com/questions/7815308/how-do-i-get-a-sessionscoped-cdi-bean-from-inside-a-filter)所述，您必须使用@WebFilter/@Named 而不是@ManagedBean 来注释您的Filter 类，否则@Inject 将不起作用。将两者混合可能会导致不必要的头痛。

# c# - 在 C# 中动态构建 SQL“OR”查询

> ID：11504052
> 
> 赞同：-2
> 
> 时间：2012-07-16T12:12:19.157
> 
> 标签：c#, asp.net, sql

我的 asp.net 应用程序有问题，我在其中动态构建 SQL 查询，其中我使用 WHERE 子句并根据输入的字段添加 OR。这是场景。

我有一个四个文本框，其中 2 个是 DateTime

我想在数据库中搜索任何一个文本框中是否有值并返回绑定到 GridView 的结果。现在，如果有多个文本框值，那么我也需要添加它并在 where 子句中构建 OR。如果任何一个文本框中没有值，则需要返回所有结果。但是我在构建查询时遇到问题，因为我必须通过 if else 循环来查看是否有任何值或空值。这是我的代码。

```
 StringBuilder selectQuery = new StringBuilder();
          disCode = SearchTextCouponCode.Text;
          disName = SearchTextCouponName.Text;

          if(StartDate.SelectedDate != null)
                 startDate = StartDate.SelectedDate.ToString("yyyy-MM-dd");

          if(EndDate.SelectedDate != null)     
                 endDate = EndDate.SelectedDate.ToString("yyyy-MM-dd");

          // here is the main thing where i am getting the error
          if (!string.IsNullOrEmpty(disCode))
          {
                 selectQuery.Append("DISCOUNTCode = '" + disCode + "'");

          }

          if (!string.IsNullOrEmpty(disName))
          {
                 selectQuery.Append(" OR DISCOUNTName = '" + disName + "'");

          }

          if (startDate != "0001-01-01")
          {
                 selectQuery.Append(" OR StartDate = '" + startDate + "'");

          }

          if(endDate != "0001-01-01")
                 selectQuery.Append(" OR EndDate = '" + endDate + "'");

          // I am using Object Data Source and the method i am passing is taking care of the SQL injection     
          DataSourceDis.SelectParameters["sqlCriteria"].DefaultValue = selectQuery.ToString();
          GridDis.DataBind(); 
```

现在，当我运行应用程序并将 disCode 文本框留空时，查询以 OR 开头，并给出错误，即 where ..附近的语法不正确

请帮忙。

///////////////////////////////////////// ///////

我在建立这个负责 SQL 注入的查询后调用另一个方法

///////////////////////////////////////// ///////

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:20:14.270

您可以做的最简单的事情是更改`WHERE`为：

```
WHERE 1=0 
```

然后确保您的所有`WHERE`条件都以`OR`

* * *

然而，正如 Richard 所指出的，这不是最佳实践，最好使用存储过程或 LINQ。使用存储过程，您可以将所有这些参数传递给过程，然后执行以下操作：

```
AND (@disName IS NULL OR DiscountName=@disName) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:21:51.820

您可以将所有行设置`" OR "`为末尾（而不是开头），例如...

```
selectQuery.Append("DISCOUNTCode = '" + disCode + "' OR "); 
```

然后在使用之前`.ToString()`...

```
if(selectQuery.Length > 0)
{
  selectQuery.Length -= 4;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:18:09.517

我通常会这样做；

```
var conds = new List<string> ();

     // here is the main thing where i am getting the error
      if (!string.IsNullOrEmpty(disCode))
      {
             conds.Add("DISCOUNTCode = '" + disCode + "'");
      }

      if (!string.IsNullOrEmpty(disName))
      {
             conds.Add("DISCOUNTName = '" + disName + "'");
      }

      if (startDate != "0001-01-01")
      {
             conds.Add("StartDate = '" + startDate + "'");
      }

      if(endDate != "0001-01-01")
             conds.Add("EndDate = '" + endDate + "'");

     selectQuery.Append(String.Join(" OR ",conds)); 
```

像这样构建查询有点可怕 - 最好使用准备好的语句或 LINQ 或您自己的查询构建类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T12:23:44.550

如果您使用该`WHERE 1=0 OR`解决方案，您可能会受到性能影响。

我建议创建一个变量来标记连接并在添加条件时更改它

```
string conjuction = " ";
if (!string.IsNullOrEmpty(disCode)) 
{ 
             selectQuery.Append(conjunction);
             selectQuery.Append("DISCOUNTCode = '" + disCode + "'"); 
             conjuction = " OR ";              
} 

if (!string.IsNullOrEmpty(disName)) 
{ 
             selectQuery.Append(conjunction);
             selectQuery.Append("DISCOUNTName = '" + disName + "'"); 
              conjuction = " OR ";
} 
```

等等

我不知道您的输入来自哪里，但请注意当前代码中可能存在 SQL 注入攻击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T12:17:50.480

有效的 Sql 查询`e.g. SELECT * FROM EMPLOYEE WHERE Name = 'Hat' OR SURNAME = 'SOFT'`

当查询以 OR 开头时，您的情况看起来像您的 StringBuilder 附加这样的查询 `SELECT * FROM EMPLOYEE WHERE OR SURNAME = 'SOFT'`及其无效，因为 OR KEYWORD 直接在 WHERE 之后

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T12:26:40.797

**当您的 disCode 文本框为空时，条件将为“OR DISCOUNTName”，这是错误的，您不能在 where 之后使用“OR”**

```
 if (!string.IsNullOrEmpty(disCode))
      {
             selectQuery.Append("DISCOUNTCode = '" + disCode + "'");

      }

      if (!string.IsNullOrEmpty(disName))
      {
             selectQuery.Append(" OR DISCOUNTName = '" + disName + "'");

      } 
```

# gwt - 使用 TableBuilder 识别子行 - GWT 2.5

> ID：11504053
> 
> 赞同：2
> 
> 时间：2012-07-16T12:12:21.050
> 
> 标签：gwt, css, gwt-celltable, gwt-2.5

使用 TableBuilder 构建单元表时，我遇到了为子行设置唯一类名的问题。(重量 2.5RC)

构建行的代码如下所示：

```
@Override
public void buildRowImpl(AdGroupProxy mainAdGroup, int absRowIndex) {

    super.buildRowImpl(mainAdGroup, absRowIndex);

    for (AdGroupProxy adGroup : mainAdGroup.getChildren()) {

        super.buildRowImpl(adGroup, ++absRowIndex);

    }
} 
```

每个`<tr>`在循环内生成的都是一个子行。

`<tr>`'s 是使用属性生成的`__gwt_subrow=1`，`__gwt_subrow=2`...

但是，由于[GWT 不支持 CSS3](http://code.google.com/p/google-web-toolkit/issues/detail?id=7274)的问题，我不能使用以下选择器来选择子行：

`.dataGridOddRow:not([__gwt_subrow="0"])`

我不想`buildRowImpl`自己实现该方法。

关于如何仅将类名设置为子行的任何建议？

# node.js - Cloud Foundry - node.js - MySQL

> ID：11504055
> 
> 赞同：1
> 
> 时间：2012-07-16T12:12:23.933
> 
> 标签：node.js, cloud-foundry, node-mysql

请帮助我了解如何使用 node.js 和 node-mysql 模块连接/绑定到 Cloud Foundry 的 mysql 服务？

在 Cloud Foundry 中，我们可以连接/绑定到 mysql 服务，并且 Cloud Foundry 支持 spring、node.js 等类型的应用程序，...

我已经成功开发了一个 spring 应用程序并托管在 cloudfoundry 中，并且能够连接/绑定到 cloudfoundry 的 mysql 服务。我也可以使用 node-mysql 模块连接到本地运行的 mysql。

但我想使用 node.js 和 node-mysql 模块连接/绑定到 Cloud Foundry 的 mysql 服务，并且没有与之相关的示例。是否有可能做到这一点？

非常感谢这方面的任何帮助。

谢谢你。问候， Kishan.G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:07:46.687

我认为首先要注意的是，CloudFoundry 将很快支持 Node.JS 应用程序的自动重新配置，就像我们目前对 Rails 所做的一样徒劳无功。这意味着能够在本地开发使用 MySQL 的 Node.JS 应用程序，并且在将其部署到 CloudFoundry 时，它将自动重新配置为使用绑定服务。

在该功能上线之前，正如我所说的不会很长时间，您将不得不使用 VCAP 环境变量在运行时配置连接。这里有一个很好的例子来说明这种方法与 Node.JS 一起使用 - [http://www.mihswat.com/2011/05/04/getting-started-with-cloud-foundry-using-a-node-js -and-mongodb-application/](http://www.mihswat.com/2011/05/04/getting-started-with-cloud-foundry-using-a-node-js-and-mongodb-application/)尽管对于 MongoDB，方法是完全一样的。

需要特别注意的部分是作者使用以下代码将环境读取到哈希中；

```
var boundServices = process.env.VCAP_SERVICES 
  ? JSON.parse(process.env.VCAP_SERVICES) : null; 
```

然后使用它们来初始化连接；

```
if (boundServices == null) {
  db = mongoose.connect('mongodb://localhost/analytics');
} else {
  credentials = boundServices['mongodb-1.8'][0]['credentials'];
  db = mongoose.createConnection("mongo://"
                         + credentials["username"]
                         + ":" + credentials["password"]
                         + "@" + credentials["hostname"]
                         + ":" + credentials["port"]
                         + "/" + credentials["db"]);
} 
```

如果您需要任何进一步的指示，请告诉我。

# android - Android - 开始播放视频时暂停音乐播放器

> ID：11504056
> 
> 赞同：0
> 
> 时间：2012-07-16T12:12:25.133
> 
> 标签：android, android-intent, android-emulator, android-widget

我有一个带有音频播放器和视频播放器的应用程序。我希望当音频播放器在后台播放并开始播放视频时，音频播放器自行停止。

我可以通过在打开视频时发送一个意图通过广播接收器轻松实现这一点，并在音频播放器中监听该意图并在 onReceive() 中停止它。

但是，我想将此功能不仅扩展到我的音频播放器，而且扩展到所有音频播放器。所以我想在视频播放器打开时是否有标准的发送意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:25:07.083

您应该为此使用**音频焦点**。Cf RandomMusicPlayer 示例 android 项目：

```
public class AudioFocusHelper {
    AudioManager mAM;
    MusicFocusable mFocusable;

    private final AudioManager.OnAudioFocusChangeListener listener = new AudioManager.OnAudioFocusChangeListener() {

        @Override
        /** 
         * Called by AudioManager on audio focus changes. We implement this by calling our
         * MusicFocusable appropriately to relay the message.
         */
        public void onAudioFocusChange(int focusChange) {
            if (mFocusable == null) return;
            switch (focusChange) {
                case AudioManager.AUDIOFOCUS_GAIN:
                    mFocusable.onGainedAudioFocus();
                    break;
                case AudioManager.AUDIOFOCUS_LOSS:
                case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
                    mFocusable.onLostAudioFocus(false);
                    break;
                case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
                    mFocusable.onLostAudioFocus(true);
                    break;
                 default:
            }
        }
    };;

    public AudioFocusHelper(Context ctx, MusicFocusable focusable) {
        mAM = (AudioManager) ctx.getSystemService(Context.AUDIO_SERVICE);
        mFocusable = focusable;
    }

    /** Requests audio focus. Returns whether request was successful or not. */
    public boolean requestFocus() {
        return AudioManager.AUDIOFOCUS_REQUEST_GRANTED ==
            mAM.requestAudioFocus(listener, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);
    }

    /** Abandons audio focus. Returns whether request was successful or not. */
    public boolean abandonFocus() {
        return AudioManager.AUDIOFOCUS_REQUEST_GRANTED == mAM.abandonAudioFocus(listener);
    }
} 
```

# php - 如果选中单选按钮，则提交到不同的页面

> ID：11504059
> 
> 赞同：1
> 
> 时间：2012-07-16T12:12:33.930
> 
> 标签：php, jquery, forms, session

我有这个：

```
<form method="post" id="kl" action="step2.php">

<input type="radio" name="rubrik" value="bussines"></input>
<input type="radio" name"rubrik" value="private"></input>

<input type="image" value="submit" src="/images/submit.png" alt="Submit" />

</form> 
```

我想要的是：当第二个单选按钮被选中时，将表单提交给 step2a.php，一个不同的文件。我怎样才能做到这一点？jQuery，Javascript，PHP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:16:29.640

您可以使用 JavaScript 执行此操作（绑定一个提交侦听器，该侦听器检查单选按钮的值，然后设置表单的 action 属性），但是按照以下方式执行某些操作（服务器端）会更简单、更可靠：

```
<form ... action="step-selector.php"> 
```

和

```
<?php
    if (isset($_POST['rubrik']) && $_POST['rubrik'] == 'bussines') {
        include('step2.php');
    } elseif (isset($_POST['rubrik']) && $_POST['rubrik'] == 'private') {
         include('step2a.php');
    } else {
         include('error-state.php');
    }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:21:05.180

您可以通过将表单修改为：

```
<form method="post" id="kl" action="step2.php">

<input type="radio" class="radio" rel="step2.php" name="rubrik" value="bussines"></input>
<input type="radio" class="radio" rel="step2a.php" name"rubrik" value="private"></input>

<input type="image" value="submit" src="/images/submit.png" alt="Submit" />

</form> 
```

我将 rel 属性添加到单选按钮。每个都有一个 url 的值。我还添加了一个类来使用 jQuery 获取元素。

现在，您将需要一些 Javascript，我将使用 jQuery 代码：

```
$('.radio').click(function (){
   rad = $(this);
   radRel = rad.attr('rel');
   $('form#kl').attr('action', radRel);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T12:17:04.107

有多种方法可以做到这一点，具体取决于您到底想要什么。

看看这个，它可能会帮助你到达那里；[打开页面的单选按钮](https://stackoverflow.com/questions/6741340/radio-button-to-open-pages)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T12:17:20.060

您可以使用 form.submit() 作为 onclick-handler（不是 onchange）并更改操作。

```
<input type="radio" name"rubrik" value="private" onclick="this.parentNode.action='yourOtherFile.php'; this.parentNode.submit()"></input> 
```

# coq - 记住表达式时如何命名假设？

> ID：11504064
> 
> 赞同：6
> 
> 时间：2012-07-16T12:12:44.913
> 
> 标签：coq

Coq 的文档一般告诫*不要*依赖内置的命名机制，而是选择自己的名称，以免命名机制的更改导致过去的证明无效。

在考虑表单的表达式时`remember Expr as v`，我们将变量设置`v`为表达式`Expr`。但是假设的名称是自动选择的，类似于`Heqv`，所以我们有：

`Heqv: v = Expr`

我怎样才能选择我自己的名字而不是`Heqv`？我总是可以使用该`rename`命令将其重命名为我喜欢的任何名称，但这并不能让我的证明独立于 Coq 中内置命名机制的假设未来变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T01:09:28.577

如果您可以摆脱单独的平等，请尝试`set (name := val)`. 使用`unfold`而不是`rewrite`使值恢复原状。

如果您需要的相等性超过`rewrite <-`，我知道没有内置的策略可以做到这一点。不过，您可以手动完成，也可以构建策略/符号。我只是把这个放在一起。（注意：我不是专家，这可能更容易完成。）

```
Tactic Notation "remember_as_eq" constr(expr) ident(vname) ident(eqname) :=
  let v     := fresh in
  let HHelp := fresh in
    set (v := expr);
    (assert (HHelp : sigT (fun x => x = v)) by ( apply (existT _ v); reflexivity));
    inversion HHelp as [vname eqname];
    unfold v in *; clear v HHelp;
    rewrite <- eqname in *. 
```

使用 as`remember_as_eq (2+2) four Heqfour`获得与使用 相同的结果`remember (2+2) as four`。

* * *

注意：更新以处理更多案例，旧版本在价值和目标类型的某些组合上失败。如果您发现另一种适用于`rewrite`但不适用于此的情况，请发表评论。

# java - SSL 证书绑定到实际的主机名。如果您有“qa.example.com”的 SSL 证书，它将无法在名为“dev.example.com”的机器上运行

> ID：11504065
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:12:52.883
> 
> 标签：java, ssl

我想了解以下行

“SSL 证书绑定到实际的主机名。如果您有“qa.example.com”的 SSL 证书，它将无法在名为“dev.example.com”的计算机上运行。

问题：

1.  如何创建绑定到主机名的证书？

2.  我有一个客户端和服务器模型。服务器在通信期间未验证客户端。到目前为止，我拥有一组安装在多台服务器上的密钥和证书，并且通信工作正常。

现在我们有了一组绑定到主机名的新证书。每个服务器都有一组证书。交换时通信不起作用。获得“握手失败”。

这里发生了什么事？谁验证主机名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:56:27.407

主机名在证书中，您需要生成具有不同主机名的新证书。证书名称由客户端在尝试建立安全连接时进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:15:54.663

客户端验证服务器返回的证书。在执行的各种验证中，客户端检查证书中嵌入的主机名是否与服务器的主机名匹配。如果主机名不匹配，则握手失败。

这意味着，如果您的证书是为 qa.example.com 颁发的，则它不适用于 dev.example.com。要使相同的证书适用于两个主机名，您需要一个通配符证书（为 *.example.com 颁发）。

# c++ - 奇怪的英特尔 C++ 编译器错误

> ID：11504067
> 
> 赞同：1
> 
> 时间：2012-07-16T12:13:00.720
> 
> 标签：c++, visual-studio-2010, compiler-construction, intel, heap-corruption

我正在研究这个 VST 卷积插件（Windows 7 64bit，VS2010），我决定尝试使用 Intel c++ 编译器。我正在优化算法，所以我有一个备份项目，以防万一出现任何问题，我正在做一个实验。这两个项目都可以毫无问题地编译和运行。安装英特尔编译器后，虽然我正在试验的项目会导致堆损坏错误，所以我开始调试以追踪问题，但我找不到导致它的代码行，因为堆损坏错误在期间未触发执行但在 DLL 终止之后（调试器也没有显示访问冲突）。

在这一点上，我开始剪切部分代码以查看是否可以隔离问题，并且我发现（显然）这是我正在尝试的类。现在出现了奇怪的部分：我可以更改方法中的代码，但是一旦我将一个变量添加到备份类（工作正常的那个），即使是一个 int，我也会收到堆损坏错误，只是一个 decleared 和从不引用变量就足够了。

这是 CRTConvolver 类：

```
class CRTConvolver
{
public:

    CRTConvolver();
    ~CRTConvolver();

    bool Init(float* Imp, unsigned ImpLen, unsigned DataLen);
    void doConv(float* input);

    Buff Output;

    int debug_test;

private:

    void ZeroVars();
    int Order(int sampleFrames);
    template <class T> void swap ( T& a, T& b );

    Buff *Ir_FFT,*Input_FFT,Output2,Tmp,Prev,Last;
    float *Tail;

    unsigned nBlocks,BlockLen,Bl_Indx;

    IppsFFTSpec_R_32f* spec;

}; 
```

那个“int debug_test;” 一个完美工作的 VST 模块和一个在从 Cubase 初始化时崩溃的程序之间的区别。

总是出于调试目的，这里是 destr 和 constr：

```
CRTConvolver::CRTConvolver()
{
        //IppStatus status=ippInit();
        //ZeroVars();
}

CRTConvolver::~CRTConvolver()
{
    //Init(NULL,NULL,NULL);
} 
```

这是 Buff 类的样子：

```
class Buff {
public: 
        Buff();
        Buff(unsigned len);
        ~Buff();

        float* buff;
        unsigned long length;

private:

        void Init(unsigned long len);
        void flush();

        friend class CRTConvolver; 
}

Buff::Buff()
{
        length=NULL;
        buff=NULL;
}

Buff::~Buff()
{
   // flush();
} 
```

基本上，如果创建和销毁此类，则绝对不会执行任何操作，它仅包含长度和 buff 变量。如果我也绕过这两个变量初始化，堆错误就会消失。

该软件在 CRTConvolver 类的简单构造和随后的破坏中崩溃，即使它所做的一切都没有，这对我来说真的没有意义......

作为旁注，我创建了我的 CRTConvolver 类，如下所示：

```
ConvEng = new CRTConvolver[NCHANNELS]; 
```

如果我这样声明：

```
CRTConvolver ConvEng[NCHANNELS]; 
```

我收到关于变量 ConvEng 的堆栈损坏错误。如果我切换回 Microsoft 编译器，即使编译和运行之前可以无错误运行的完全相同的版本，情况也会保持不变......

我怎么强调都不过分，在安装英特尔编译器之前，一切都运行良好，是否有可能出现问题或某处不兼容？

我真的在这里没有想法，我希望有人能够提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:19:05.087

猜测，因为问题很可能是未定义的行为，但在代码中的其他地方：

**遵守三法则。**您应该有一个复制构造函数和赋值运算符。如果您正在使用`std`容器，或者制作副本或分配，那么如果您在析构函数中删除内存，那么您会遇到麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:52:02.370

在我看来，`CRTConvolver`默认构造函数（用于创建数组）正在写入它不拥有的内存。如果 Intel 编译器有不同的类布局规则（或数据对齐规则），它可能会揭露一个在 Microsoft 编译器规则下是良性的错误。

该类是否`CRTConvolver`包含该类的任何实例`Buff`？

**更新**以响应代码更新：

该类`CRTConvolver`包含 的四个实例`Buff`，所以我怀疑这就是问题所在。这可能是版本不匹配——`CRTConvolver`班级认为它`Buff`比实际小。我建议您重新编译*所有内容*并与我们联系。

# symfony-2.1 - 为什么我的 Symfony2 表单中没有“格式化程序”属性？

> ID：11504070
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:02.560
> 
> 标签：symfony-2.1

我想知道，自从 Symfony2.1 的更新（虽然我不能针对提交）为什么我不再有`"formatter"`我的属性`jQueryDateType`

```
if ($form->getConfig()->hasAttribute('formatter')) 
```

返回`false`

全班都在这里：[https ://gist.github.com/d3c74c12d60e20df84c3](https://gist.github.com/d3c74c12d60e20df84c3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:48:33.790

getParent() 函数丢失并解决了一半的问题。

# zend-framework - Dojo 1.7 上的 dojo.xd.js

> ID：11504071
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:07.337
> 
> 标签：zend-framework, dojo, xampp

我的野心已经超出了我在 Zend Framework 项目中实现 Dojo 的能力，该项目使用 PHP 和 Mysql 的 XAMPP 发行版作为我在 Windows 7 机器上的开发/测试环境。老实说，我不知道这是 ID10T 问题（我）还是系统故障。如果这是我的失败，我提前道歉。

我正在尝试使用 V1.7 版本的 Dojo 来实现，同时保持在生产就绪环境中（因此避免跳转到 ZF 2 等）。我从文档中了解到 Dojo V1.7 中的 dojo.xd.js 已被 dojo.js 取代。我的问题在于尝试为 Dojo 使用 CDN 源。

我页面的 dojo 内容呈现良好，但 Firebug 显示错误“NetworkError: 404 Not Found - [http://ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.xd.js](http://ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.xd.js) ” & page 在页头中嵌入了以下内容：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.xd.js"></script> 
```

在我的页面上跟踪问题的根源表明它是'echo $this->dojo;' 介绍问题的陈述。将引导文件中的 'setCdnVersion(1.7)' 更改为 'setCdnVersion(1.6)' 可以解决问题，但我真的很想使用 V1.7+。

实际上，将嵌入的 URI 粘贴到地址栏中会返回一个 404 页面未找到。Dogpile 没有提到这个特定的错误，我可以看到。我在 dojotoolkit.org 上找不到任何出现的错误报告（据我所知）

看起来我拥有的 Dojo 配置没有认识到需要将 dojo.js 用于 V1.7（尽管我不确定问题实际出在哪里）。因此，我必须承认，除了让自己受制于集体 SO 专业知识的摆布之外，我不知道如何解决这个问题。

引导程序.php：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
...
protected function _initView ()
{
    // Initialize view
    $view = new Zend_View();
    $view->setEncoding('UTF-8');
    $view->headMeta()->appendName('Content-Type', 'text/html; charset=UTF-8');

    // add dojo helper path to view
    $view->addHelperPath('Zend/Dojo/View/Helper','Zend_Dojo_View_Helper');

    // configure Dojo view helper, disabled...
    $view->dojo()
                 ->disable()
                 ->setCdnVersion(1.7)
                 ->setCdnBase(Zend_Dojo::CDN_BASE_GOOGLE)
                 ->addStyleSheetModule('dijit.themes.tundra')
                 ->setDjConfigOption('parseOnLoad', TRUE)
                 ->setCdnDojoPath(Zend_Dojo::CDN_DOJO_PATH_GOOGLE)  
                 ->useCdn();

    // Add it to the ViewRenderer
    $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
    $viewRenderer->setView($view);

    // Return it, so that it can be stored by the bootstrap
    return $view;
} 
```

}

在 index.phtml 中：

```
<head>
<?php echo $this->headLink()->prependStylesheet($this->baseUrl() . '/assets/css/site.css'); ?>

<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/dojo/1.7/dijit/themes/tundra/tundra.css">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/dojo/1.7/dojox/grid/resources/Grid.css">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/dojo/1.7/dojox/grid/resources/tundraGrid.css">
<?php 
    // Dojo plug-in enablers ...
    echo $this->dojo(); 
    $this->dojo()->enable();
?> 
```

版本信息：Xampp dist - V1.7.7 (Apache/2.2.21, PHP/5.3.8) Zend Framework dist - V1.11.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:43:34.903

从[1.7 发行说明](http://dojotoolkit.org/blog/dojo-1-7-released)：

> 请注意，如果您是从 1.6 或更早版本升级，我们不再区分 dojo.js 和 dojo.xd.js（所有版本都使用新的加载程序跨域工作），因此请更新您的 URL 以引用 dojo。 js。

所以 Dojo 助手使用文件名 dojo.xd.js（跨域版本），但在 1.7 中它应该只是 dojo.js。Dojo 1.7 是在 Dojo 集成到 ZF 之后发布的，因此这可能是 ZF 本身的一个错误。

# jquery - MVC Grid 不刷新整个页面

> ID：11504074
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:10.280
> 
> 标签：jquery, asp.net-mvc, grid

我想通过分页在 MVC4 应用程序中的 Grid 中实现分页。在分页中，我可以将所有数据发送到客户端，然后让它对收到的所有数据进行分页和排序（为此，我看到了很多 jquery 网格，但我怀疑如果行数增加它会失败）或者更喜欢在服务器并将一页数据发送到客户端（我想要一些 jquery 或 ajax 类型的实现，我将在不刷新整个视图的情况下将 JSON 数据从服务器发送到客户端。是否有任何使用 Jquery 或 JSon 的开箱即用实现)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:30:08.597

我`HTML.Pager`在我的 Asp.net MVC 应用程序中使用分页。[只需在这里](http://stephenwalther.com/archive/2008/09/18/asp-net-mvc-tip-44-create-a-pager-html-helper.aspx)查看演示。它可能会帮助你

# python - 如何使用python脚本调用python文件

> ID：11504075
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:13:14.260
> 
> 标签：python

我有 python 文件 .py，我想通过 python 脚本运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:02:38.680

```
import subprocess
subprocess.call(['python', 'your_script.py']) 
```

# python - 哪个 Python 库用于文件访问来分析和操作？

> ID：11504076
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:18.020
> 
> 标签：python

对于初学者，我将编写一个程序来分析我的扑克手牌历史记录，这些历史记录会自动存储为文本文件。

那么，如果我要分析 .txt 文件，我需要探查哪个库？我的意思是我可以找到一些功能，但我想变得更加独立，而不是每次都在谷歌上搜索解决方案并实际自己学习......告诉我这是否是一个愚蠢的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:15:30.980

`open()`如果它非常简单，[`csv`](http://docs.python.org/library/csv.html)如果它更复杂一点，其他一切都是[熊猫。](http://pandas.pydata.org/)

# c# - 如何在无序列表中列出所有目录和子目录

> ID：11504077
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:21.230
> 
> 标签：c#, .net, directoryinfo

我有这个我似乎无法克服的问题。我正在尝试列出所有目录和子目录。这是我到目前为止的代码：

```
String[] Folders;
            String[] Files;
            path = Server.MapPath("/");

            DirectoryInfo dir = new DirectoryInfo(path);
            Folders = Directory.GetDirectories(path);

            try
            {
                FolderListing.Append("<ul id=\"FolderList\">");

                for (int x = 0; x < Folders.Length; x++ )
                {
                    DirectoryInfo folder = new DirectoryInfo(Folders[x]);

                    FolderListing.Append("<li>").Append(folder.Name).Append("</li>");
                    CheckSubdirectories(Folders[x]);
                }

                FolderListing.Append("</ul>");
                FolderList.Text = FolderListing.ToString();
            }
            catch (Exception exc) //Module failed to load
            {
                Exceptions.ProcessModuleLoadException(this, exc);
            }
        }
        private void CheckSubdirectories(string currentpath)
        {
           String[] subfolders = Directory.GetDirectories(currentpath);
           if (subfolders.Length != 0)
           {
               FolderListing.Append("<ul id=\"SubFolderList\">");
           }
            for (int x = 0; x < subfolders.Length; x++ )
            {
               DirectoryInfo sfolder = new DirectoryInfo(subfolders[x]);
               FolderListing.Append("<li>").Append(sfolder.Name).Append("</li>");
            }
            if (subfolders.Length != 0)
            {
                FolderListing.Append("</ul>");
            }
            path = currentpath.ToString();
        } 
```

我希望最终结果是：

```
<ul>
    <li>admin</li>
    <ul>
        <li>Containers</li>
        <li>ControlPanel</li>
        <li>Menus</li>
        <ul>
            <li>etc etc</li>
        </ul>
    </ul>
</ul> 
```

如果有人可以帮助我请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:32:46.737

这有效：

```
Func<DirectoryInfo, XElement[]> getDirectories = null;
getDirectories = di =>
    (new []
    {
        new XElement("li", di.Name),
        di.GetDirectories().Any()
            ? new XElement("ul",
                from cdi in di.GetDirectories()
                select getDirectories(cdi))
            : null,
    })
        .Where(x => x != null)
        .ToArray();

var xml = new XElement("ul",
    getDirectories(
        new DirectoryInfo(@"E:\Install\_.NET"))); 
```

从我的示例目录中，我得到了以下输出：

```
<ul>
  <li>_.NET</li>
  <ul>
    <li>3DCollaborator</li>
    <li>MercurialVSSProvider</li>
    <li>MongoDB</li>
    <li>sqlite</li>
    <ul>
      <li>sqlite-netFx35-binary-bundle-Win32-2008-1.0.74.0</li>
      <li>sqlite-netFx35-binary-Win32-2008-1.0.74.0</li>
      <li>sqlite-netFx40-binary-Win32-2010-1.0.74.0</li>
    </ul>
  </ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:34:42.673

希望这种递归方法有帮助：

```
void ListDirectories(string path, StringBuilder sb)
{
    var directories = Directory.GetDirectories(path);
    if (directories.Any())
    {
        sb.AppendLine("<ul>");
        foreach (var directory in directories)
        {
            var di = new DirectoryInfo(directory);
            sb.AppendFormat("<li>{0}</li>", di.Name);
            sb.AppendLine();
            ListDirectories(directory, sb);
        }
        sb.AppendLine("</ul>");
    }
} 
```

要调用它，只需创建一个实例`StringBuilder`并将其与方法的路径一起发送：

```
var sb = new StringBuilder();
ListDirectories(Server.MapPath("/"), sb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:24:33.110

您可以使用递归方法解决问题。您需要一个调用自身的方法，以便列出嵌套在任何深度的子目录。

```
public ListDirectory (DirectoryInfo dir)
{
     //TODO: Output the directory info here.
     foreach (DirectoryInfo subdir in dir.Directories) {
         ListDirectory(subdir);
     }
     foreach (FileInfo file in dir.Files) {
         //TODO: Output the file info here.
     }
} 
```

* * *

该列表在 HTML 中应如下所示。请注意，子目录`<li>`必须包含整个嵌套的`<ul>`.

```
<ul> 
    <li>subdirectory item 1
        <ul> 
            <li>file 1 in subdirectory</li> 
            <li>file 2 in subdirectory</li> 
        </ul> 
    </li> 
    <li>subdirectory item 2
        <ul> 
            <li>sub-subdirectory item
                <ul> 
                    <li>file 1 in sub-subdirectory</li> 
                    <li>file 2 in sub-subdirectory</li> 
                </ul> 
            </li> 
            <li>file 1 in subdirectory</li> 
            <li>file 2 in subdirectory</li> 
        </ul> 
    </li> 
    <li>file item 1</li> 
    <li>file item 2</li> 
</ul> 
```

这将产生以下输出：

*   子目录项 1
    *   子目录中的文件 1
    *   子目录中的文件 2
*   子目录项 2
    *   子目录项
        *   子目录中的文件 1
        *   子目录中的文件 2
    *   子目录中的文件 1
    *   子目录中的文件 2
*   文件项目 1
*   文件项目 2

## 

有了这些信息，我们可以改进上面的方法（在伪代码中）

```
public ListDirectory (DirectoryInfo dir)
{
     Output("<li>");    Output(dir.Name);
         if (dir.Directories.Count > 0 || dir.Files.Count > 0) {
             Output("<ul>");
             foreach (DirectoryInfo subdir in dir.Directories) {
                 ListDirectory(subdir);
             }
             foreach (FileInfo file in dir.Files) {
                 Output("<li>");  Output(file.Name);  Output("</li>");
             }
             Output("</ul>");
         }
     Output("</li>");
} 
```

您还必须将整个东西放在一`<ul> </ul>`对中。此外，您可以在第一级使用稍微不同的方案，以便列出文件和目录，而不是像我上面的代码那样仅列出一个根目录。

# asp.net - 会话 cookie 和 asp.net

> ID：11504082
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:36.240
> 
> 标签：asp.net, session, cookies

在我的 asp.net 应用程序中，我在 web.config 中使用了此类设置

```
<sessionState mode="InProc" 
              stateConnectionString="tcpip=127.0.0.1:42424" 
              stateNetworkTimeout="10" 
              sqlConnectionString="data source=127.0.0.1;Integrated Security=SSPI" 
              sqlCommandTimeout="30" customProvider="" cookieless="UseCookies" 
              cookieName="ASP.NET_SessionId" 
              timeout="120" 
              allowCustomSqlDatabase="false" 
              regenerateExpiredSessionId="true" 
              partitionResolverType="" 
              useHostingIdentity="true">
  <providers>
    <clear/>
  </providers>
</sessionState> 
```

和

```
<authentication mode="Forms">
  <forms loginUrl="~/login.aspx" 
         defaultUrl="Default.aspx" 
         cookieless="UseCookies"/>
</authentication> 
```

但有时会话行为很奇怪

用户获得一个用户`http://my.appl.com/S(DGsdgfg453dsgfsdgsdgsd)/mypage.html` 的`S(DGsdgfg453dsgfsdgsdgsd)`会话密钥，但让他获得所有用户。仿佛`UseCookies = false.`

我重新启动应用程序，有时它运行良好。然后再一次。

我的申请有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:22:26.447

估计是内存满了。我在 Session 中保留了一个大的序列化对象。

我在 Global.asax.cs 中添加

```
protected void Session_End(object sender, EventArgs e)
{
Session.Clear(); //?
Session.Abandon();
} 
```

问题消失了。

# python - 是否可以使用 python 注册 URI 方案？

> ID：11504088
> 
> 赞同：0
> 
> 时间：2012-07-16T12:13:50.217
> 
> 标签：python, uri, url-scheme

我正在尝试开发一个 Sublime Text 2 扩展来监听 URI 方案。API 是基于 python 的。我想知道是否可以为此扩展注册一个 URI 方案侦听器？它应该监听 subl://somfile?row=3&col=4

忘了提到该解决方案应该适用于 MAC OSX

# cmis - 文件网中的选择列表

> ID：11504090
> 
> 赞同：1
> 
> 时间：2012-07-16T12:13:55.317
> 
> 标签：cmis, filenet-p8, apache-chemistry

我正在学习 CMIS 和 Filenet P8 。为 CMIS 使用库 apache-chemistry。我在 ChoiceList 中有问题。

选择列表与 PropertyDefination 相关联。我试图显示与每个 PropertyDefinition 相关的选择列表。

```
ItemIterable<ObjectType> v = session.getTypeChildren("cmis:document", true);
Iterator<ObjectType> i = v.iterator();

while(i.hasNext()){
             ObjectType a = i.next();
             if(a!=null)
             {   

                 Map<String, PropertyDefinition<?>> d = a.getPropertyDefinitions();

                 Iterator<String> itr = d.keySet().iterator();
                     while(itr.hasNext()){

                         String key = itr.next().toString();

                         if ((Boolean.FALSE.equals(d.get(key).isInherited()))) {

                            PropertyDefinition<?> value = d.get(key);
// Choice List
                            List<?> ch = value.getChoices();
                            System.out.println("value " + value.getDisplayName()+ " " + " choice list " + ch.toString());
                            for (Object object : ch) {
                                System.out.println(object.toString());
                            }

                            Customproperties properties = new Customproperties(value.getDisplayName(),value.getPropertyType().toString(),value.getCardinality().name(),value.isRequired());
                            customPropertyList1.add(properties);
                        }
                     }

            }
} 
```

输出

```
value Document Title  choice list []
value From  choice list []
value To  choice list []
value Cc  choice list []
value Subject  choice list [[extensions=null], [extensions=null]]
[extensions=null]
[extensions=null]
value Sent On  choice list []
value Received On  choice list []
value Link IDs  choice list [] 
```

// 对于 propertyDefination 主题，有一个选择列表，但它显示为 null.. 我无法正确检索选择列表。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:08:34.350

```
 List<Choice> ch = value.getChoices();

    for (Choice Choice : ch) {
          System.out.println(choice.getDisplayName());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:33:26.003

您应该将 PropertyDefinition 转换为正确的子类。您可以在 Converter.java 中看到他们是如何做到的（参见 apache chemistry 的来源，他们是如何做到的）。

问候，魔术

# iphone - 适用于 CoverFlow iPhone 的库

> ID：11504093
> 
> 赞同：1
> 
> 时间：2012-07-16T12:13:59.640
> 
> 标签：iphone, ios, coverflow

我从过去两个小时开始搜索。并找到了许多 CoverFlow 的链接。但大多数都不适用于 iOS 5。并给出错误。使用许多代码，我更改了编译器设置，但这对我不起作用。

请提供与 iOS 5 或任何开源代码兼容的 Coverflow 的教程链接。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:06:02.267

[在tapkulibrary](https://github.com/nicklockwood/iCarousel)中有一个覆盖流实现，在[iCarousel](https://github.com/devinross/tapkulibrary)中有另一个（有许多变体），它也有许多示例项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:33:27.757

试试这个项目。它将帮助你实现你的动机。[http://www.chaosinmotion.com/flowcover.html](http://www.chaosinmotion.com/flowcover.html)我在 iOS 5 中通过不使用 ARC 也通过选择我最新的编译器和 SDK 来实现它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:16:54.247

你在用ARC吗？如果是这样，请将其关闭，并且大多数（如果不是所有）库都可以在 iOS5 上正常编译。

# php - 如何以最低的Linux服务器使用率（繁忙）在PHP中备份一个巨大的mysql数据库？

> ID：11504099
> 
> 赞同：-2
> 
> 时间：2012-07-16T12:14:15.150
> 
> 标签：php, mysql, linux, perl, mysqldump

我们正在使用 PHP 和 Mysql 开发一个基于 Web 的应用程序。如您所知，使用 Web 界面备份大型数据库存在限制，因此我需要一个解决方案来通过以下条件备份我们的大型数据库：

1.  该过程可以在没有 Web 界面的情况下完成，并且必须在命令行中运行（例如作为 Linux 服务）

2.  该进程应该使用最少的服务器资源（换句话说，当备份进程正在运行时，客户端可以使用服务器上的服务）

3.  某些功能至关重要（例如备份、恢复、压缩和拆分备份文件），而某些功能是可选的（例如邮件和 FTP ......）

4.  脚本必须用 PHP 或 Perl 编写。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:22:48.967

查看[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html "mysql转储")进行命令行备份

对于完整的数据库备份：

mysqldump -u USER_NAME -p DB_NAME > DB_NAME.sql

如果您的数据库很大并且您不想备份完整的数据库。您只能备份单个/多个表

mysqldump -u USER_NAME -p DB_NAME TABLE_NAME > TABLE_NAME.sql

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:31:26.973

您可能想考虑设置到第二台服务器的复制，并且您有一个实时备份，如果您想存储旧备份，您可以使用第二台服务器的资源来制作 thou

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:21:07.360

我完全避免编写脚本，只使用 MySQL 内置的工具。这是一个很好的关于 mysqldump 的教程：

[http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/](http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:20:59.947

使用 nice 运行 php 脚本，值为 19 会使进程的优先级很低

```
nice -n 19 php /path/to/backupscript.php 
```

# actionscript-3 - 如何避免对 xml 文件的完整 URL 进行硬编码？

> ID：11504103
> 
> 赞同：0
> 
> 时间：2012-07-16T12:14:22.743
> 
> 标签：actionscript-3

我必须提供一个完整的 URL：www.abc.com/folder1/folder2/my.xml 而不仅仅是提供相对 URL "./my.xml"。

我该如何解决这个问题？这迫使我对 .as 文件中的 URL 进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:27:48.013

我无法理解您真正需要什么：相对 URL 还是绝对 URL？

如果是相对的，请使用它。只需考虑它应该与 HTML 包装器相关，而不是 SWF 本身。

如果是绝对的并且您只是不想将其嵌入到代码中，请使用 FlashVars 从 HTML 包装器将其传递给您的 SWF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:30:09.710

您可以在 Flash 中使用相对 url，并且当您在本地测试时它正在工作这一事实表明嵌入存在问题。我的猜测是您已将 swf 放在 html 页面的子文件夹中，但在嵌入 swf 时未指定基本 url。swf 文件是否位于 www.abc.com/folder1/folder2/ 或除 html 本身之外的任何其他文件夹中？

如果是这样，您需要告诉 Flash 播放器 Flash 中的所有相关 url:s 应该使用哪个 url 作为起点。这是使用“base”参数完成的。如果使用 SWFObject 嵌入 swf，则使用具有基本属性的对象指定它：

```
var flashvars = {
};

var params = {
  base: "/folder1/folder2/"
};

var attributes = {
};

swfobject.embedSWF("myContent.swf", "myContent", "300", "120", "9.0.0","expressInstall.swf", flashvars, params, attributes); 
```

请注意，在上面的示例中，我假设 .swf 位于 folder2/ 中。

希望这能解决您的问题。

# python - 如何使用 openFile 在文件夹中创建 pytable？

> ID：11504104
> 
> 赞同：1
> 
> 时间：2012-07-16T12:14:25.270
> 
> 标签：python, pytables

我正在使用 Pytables，想知道如何在文件夹中创建 h5 数据库。

例如，创建这样的数据库文件很容易：

```
from tables import *
beta = openFile("test2.h5",mode = 'w') 
```

这会在 python 目录中创建一个文件。如果我想在子文件夹中创建文件 test2.h5 怎么办？如何更改创建文件的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:16:13.200

```
import os
import tables

path = '/path/to/your/h5_files'
beta = tables.openFile(os.path.join(path, "test2.h5"), mode='w') 
```

在中创建一个新文件`/path/to/your/h5_files/test2.h5`

# asp-classic - 经典 ASP 编码博客中显示的奇怪字符

> ID：11504105
> 
> 赞同：1
> 
> 时间：2012-07-16T12:14:28.927
> 
> 标签：asp-classic, vbscript

几个月来，我一直遇到有人发布博客后出现字符的问题。该博客使用 Classic ASP 编码。出现的示例字符是： â€Ž 或 â€™... 它似乎最常出现在外来字符中。

任何有助于避免此问题的帮助将不胜感激..

新杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:38:25.893

该页面正在发送 UTF-8 但无法设置`CharSet="UTF-8"`，因此接收浏览器只是认为它可能是 Windows-1252 的默认本地字符集。

或者，原始文章以 UTF-8 发布，但接收机制不知道这一点，并将传入的字符视为服务器本地字符集。

为了更正确保所有页面使用 CodePage=65001，保存为 UTF-8 并设置 CharSet="UTF-8"，任何其他问题都可能是早期提交中已损坏的错误数据的结果。您将需要为坏数据编写一些恢复代码。

# iphone - iAd 广告以横向模式显示，仅适用于纵向应用

> ID：11504106
> 
> 赞同：3
> 
> 时间：2012-07-16T12:14:34.370
> 
> 标签：iphone, ios, ipad

我已将 iAd 集成到我的 iPad 应用程序中。我的应用程序仅支持纵向。当用户点击 iAd 时，广告以与 iPad 相同的模式打开。这是一个问题，因为我只希望它们处于纵向模式（如我的应用程序）。如何将广告限制为纵向模式？

# label - y轴上的jqplot文本标签

> ID：11504107
> 
> 赞同：2
> 
> 时间：2012-07-16T12:14:37.087
> 
> 标签：label, jqplot, gantt-chart

我正在尝试在 jqplot 中制作类似甘特图的图表。我想在同一个情节中制作两条时间线。正如您从代码和 jsFiddel 中看到的那样，我大部分时间都在工作。

我已经手动添加了几个系列（并添加了一个系列配置）当然这将在稍后循环。

我现在遇到的问题是在 Y 轴上我不想要数字，而是系列的文本标签（“联系人”和“Locatie”）。如果这是动态完成的，那就太好了，但是“硬编码”它们不是问题，因为我现在只需要两个。

我找不到这样做的例子。有任何想法吗？这是 jsFiddle：http: [//jsfiddle.net/NVbjv/1/](http://jsfiddle.net/NVbjv/1/)

```
 var seriesCnf = Array();
    var loc = Array();

    // add location values
    loc.push([[1340877534000, 1, 'lagehaghorst'] , [1340877569000, 1, 'lagehaghorst' ]]);
    seriesCnf.push({color: "#941B80", label: "Locatie"});
    loc.push([[1340877779000, 1, 'weegnet'] , [1340877869000, 1, 'weegnet' ]]);
    seriesCnf.push({color: "#941B80"});
    loc.push([[1340877989000, 1, 'lagehaghorst'] , [1340878139000, 1, 'lagehaghorst' ]]);
    seriesCnf.push({color: "#941B80"});

    // add ignition values
    loc.push([[1340877534000, 2, 'uit'], [1340877561000, 2, null]]);
    seriesCnf.push({color: "#FF0000", showMarker:false, label: "Contact"});
    loc.push([[1340877561000, 2, 'aan'], [1340877779000, 2, null]]);
    seriesCnf.push({color: "#00FF00", showMarker:false, pointLabels: {location: 'n'}});
    loc.push([[1340877779000, 2, 'uit'], [1340877839000, 2, null]]);
    seriesCnf.push({color: "#FF0000", showMarker:false});
    loc.push([[1340877839000, 2, 'aan'], [1340878019000, 2, null]]);
    seriesCnf.push({color: "#00FF00", showMarker:false, pointLabels: {location: 'n'}});
    loc.push([[1340878019000, 2, 'uit'], [1340878139000, 2, null]]);
    seriesCnf.push({color: "#FF0000", showMarker:false});

    plot1 = $.jqplot('container', loc,{
        seriesColors: ["#941B80"],
        title: "Tijdlijn",
        axes: {
          xaxis: {
            renderer: $.jqplot.DateAxisRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions: {
                    formatString: '%R',
                    angle: 0
                },
          },
          yaxis: {
            min: 0,
            tickInterval: 1,
          }
        },
        seriesDefaults: {
            showMarker:true,
            pointLabels:{
                show:true,
                location:'s',
                labelsFromSeries: true,
                formatter: $.jqplot.DefaultTickFormatter,
            }
        },
        series: seriesCnf,

        grid: {
            background: '#ffffff'
        }
    }); 
```

# .net - 如何在与第三方引用的版本不同的项目中使用 .NET 程序集？

> ID：11504108
> 
> 赞同：1
> 
> 时间：2012-07-16T12:14:43.150
> 
> 标签：.net, deployment, .net-assembly

这是我的场景：

我有一个项目，它使用第三方程序集，而该程序集又引用了其他几个程序集。

```
Third party -+--> Assembly A 1.0.0.0
             +--> Assembly B 3.9.0.0 
```

但是，在我的项目中，我想使用更新版本的程序集 A (2.3.0.0) 问题是由于程序集 A 具有相同的名称，因此 bin\release 中只能存在一个

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:21:37.803

据我了解，将同一程序集的两个版本加载到一个进程中的唯一方法是将每个版本加载到不同的 AppDomain 中。

我在实践中没有这样做，所以你需要进行实验。

# c# - asp.net上的多线程下载

> ID：11504111
> 
> 赞同：0
> 
> 时间：2012-07-16T12:14:57.847
> 
> 标签：c#, asp.net, multithreading

我需要在我的网站上下载一个文件，这个文件太大了。所以需要通过多线程的方式下载。

我如何将它与 WebClient 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:16:52.803

使用后台工作者

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

在 msdn 页面和事件中设置后台工作人员

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            // Download your file here
        } 
```

# c# - 如何确定 SQL 服务器或数据库是否存在

> ID：11504119
> 
> 赞同：0
> 
> 时间：2012-07-16T12:15:47.597
> 
> 标签：c#, sql-server, database, database-connection

我的数据库所有者对主数据库没有任何权限，我正在寻找一种方法来确定 SQL Server 服务器是否存在，以及该服务器上是否存在数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:41:44.110

您可以使用[SMO](http://msdn.microsoft.com/en-us/library/ms162151)来管理 SQL Server 对象模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:01:45.530

首先让我们检查本地机器上是否有可用的 sqlserver 实例。

这可以通过 SMO（[SMO 的参考](http://msdn.microsoft.com/en-us/library/ms210334.aspx)和[另一个参考](http://www.sqldbatips.com/showarticle.asp?ID=34)）来完成，例如

```
using Microsoft.SqlServer.Management.Smo;

DataTable dataTable = SmoApplication.EnumAvailableSqlServers(true);//if true is passed it
//will enumerate local instance only.

foreach (DataRow dataRow in dataTable)
{
    if ((dataRow["Server"] as string) == "MyServerName")
        Console.WriteLine(dataRow["Instance"] as string);
} 
```

然后检查所需的数据库是否可用，请使用：

使用函数 db_​​id，如果存在则返回数据库的 ID，否则返回 null。下面的示例 T-SQL：

```
if (db_id('INVENTORY') is null)
begin
    return 0
end
else
begin
    return 1
end 
```

希望这可以帮助。

# c# - 将点击值传递给线程

> ID：11504125
> 
> 赞同：0
> 
> 时间：2012-07-16T12:16:18.163
> 
> 标签：c#, wpf, multithreading, forms, class

所以假设我有 3 个线程从一个类中运行一个实例。该类将执行多项任务。当类达到一个点时，它应该打开一个用户可以输入内容的窗口，然后单击按钮，表单将关闭，线程应该使用用户输入的值执行最后一个任务。

1.  启动 3 线程。（每个线程都有不同的值。）
2.  执行多项任务。
3.  打开窗口并等待输入。
4.  用户输入一些数据并单击“确定”。
5.  线程获取数据并执行一些附加任务。
6.  完成的。

那么，如何将输入的值传递给线程/类？

信息：这是 WPF，而不是 WinForms。

我期待一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:41:31.057

您需要将所需的数据置于某个共享状态，然后从另一个线程访问该状态。当表单打开时，让后台线程等待 WaitHandle 并让用户与表单交互。当用户单击 Okay 时，您首先填充共享状态，然后重置 WaitHandle。这将释放后台线程，然后从共享状态读取数据并继续执行。这是一个基本的序列图

```
 Thread 1            Thread2
T0 -> Hits waitHandle
T1 -> blocked             Launches Form
T2 ->                     User interacts with form
T3 ->                     Okay clicked
T4 ->                     Shared state is populated
T5 ->                     WaitHandle reset
T6 -> Continues
T7 -> Reads shared state 
```

共享状态将位于 Thread1 和表单的父类中，并且应该受到锁保护。有大量关于锁定和 WaitHandles 的信息，但[这里有来自 Joe Albahari 的精彩入门](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:23:15.063

看看这个：http: [//msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

这里有一些文字，所以我的回答不会自动转换为评论。

# android - 在 Android 中使用 Facebook SDK 一起共享文本和图像

> ID：11504129
> 
> 赞同：4
> 
> 时间：2012-07-16T12:16:27.927
> 
> 标签：android, facebook, share, facebook-android-sdk

我正在使用 facebook SDK 在 Android 中共享文本和图像。我使用了以下代码及其用于共享文本的工作，但如何一起共享图像。我对此感到非常困惑。如果有人知道，请建议我。

**代码：**

```
public class MainActivity extends Activity {

Facebook facebook = new Facebook("App ID");
EditText edittext;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    edittext = (EditText) findViewById(R.id.revieew);

    facebook.authorize(this, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onFacebookError(FacebookError error) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onCancel() {
        }
    });
}

public void share(View v) {
    //facebook.dialog(this, "feed", new PostDialogListener());

    Bundle parameters = new Bundle();
    // parameters.putString("message", category_item_name_desc.getText()
    // .toString());
    // parameters.putString("picture", categoryItemsModel.getImageUrl());
    parameters.putString("caption", edittext.getText().toString());
    try {
        facebook.request("/me/feed", parameters, "POST");
        System.out
                .println("**********************POST**********************************");
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

而且我不想显示共享图像和文本的对话框，我想使用 Edittext 和按钮...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:41:11.397

嘿，这段代码可能会有所帮助，

```
Bundle parameters = new Bundle();
                parameters.putString("message", category_item_name_desc.getText().toString());
                parameters.putString("picture", categoryItemsModel.getImageUrl());
                parameters.putString("caption", txtDescription_desc.getText().toString());
                facebook.request("/me/feed", parameters, "POST"); 
```

您可以通过将参数添加为“标题”来添加文本

# ios - 令人毛骨悚然和超级

> ID：11504133
> 
> 赞同：1
> 
> 时间：2012-07-16T12:16:34.073
> 
> 标签：ios, cocoa-touch, objective-c-runtime

我正在尝试为 UIResponder 及其所有覆盖此方法的子类调整 canPerformAction:withSender: 方法。

我通过将原始实现存储在由类名键入的字典中来做到这一点；并在调用原始实现之前在实现的混合版本中查找字典。

这在某些情况下似乎可以正常工作，但是当原始实现调用 super 时会失败。然后我的 swizzled 方法不断被调用，程序进入无限递归。

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:23:13.583

调酒后`-original`with `-custom`：

```
-(void)custom {
    [self custom]; // calls -original
}

-(void)original {
    [self original]; // calls -custom
} 
```

说过，如果您在超类中混合了方法， objc_msgSendSuper 也会这样做：为自定义调用 original ，反之亦然，为您提供递归。

* * *

```
-(void)custom {
    [self original]; // calls -custom, makes recursion
}

 -(void)original {
    [self custom]; // calls -original, makes recursion
} 
```

# mysql - 如果表 1 中没有 mysql，则从表 2 中获取

> ID：11504137
> 
> 赞同：3
> 
> 时间：2012-07-16T12:16:52.557
> 
> 标签：mysql

我的数据库中有两个表，其中 table1 是临时的，而 table2 是永久的。现在我需要编写查询，如果 table1 中匹配的行数等于 0，则从 table2 中获取结果。mysql中有没有可能做到这一点？如果是这样，该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:31:09.757

```
SELECT (CASE WHEN t1.field <> 0 THEN t1.field ELSE t2.field END) 
FROM table1 t1, table2 t2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:36:32.723

只需使用`UNION`

```
SELECT ID 
FROM table1 
WHERE somecondition
UNION
SELECT ID 
FROM table2 
WHERE somecondition 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:32:55.297

这会工作..

```
SELECT 
    CASE 
        WHEN count(column) > 0 THEN COUNT(column)
    END,

    CASE
        WHEN count(column) = 0 THEN (
                                      select COUNT(col2) from table2
                                    )
    END
FROM table1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:35:15.760

如果两个表中的数据相同，只需合并两个查询，您将自动从一个或另一个中获取。

# python - 使用 Python 从 Amazon SES 发送带有附件的电子邮件

> ID：11504140
> 
> 赞同：0
> 
> 时间：2012-07-16T12:16:53.840
> 
> 标签：python, google-app-engine, amazon-ec2, amazon-web-services, web2py

我们正在使用 python 来开发我们的应用程序并在 GAE 上进行部署。我们想通过 Amazon SES 发送带有附件的电子邮件。我见过的所有这些都没有附件支持。我需要使用 Amazon SES 发送电子邮件的原因是因为我必须从谷歌以外的域发送电子邮件。

有没有允许我这样做的库？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:24:56.000

您需要为每个附件创建 MIEMApplication() 实例并将其添加到 MIMEMultipart 实例。博客文章中提供了解决方案：http: [//codeadict.wordpress.com/2010/02/11/send-e-mails-with-attachment-in-python/](http://codeadict.wordpress.com/2010/02/11/send-e-mails-with-attachment-in-python/)

# java - 用于 HTML 解析的 JUnit 测试

> ID：11504143
> 
> 赞同：0
> 
> 时间：2012-07-16T12:17:02.390
> 
> 标签：java, eclipse, http, junit, html-parsing

我正在尝试在网络爬虫上设置单元测试，并且对如何测试它们感到困惑。（我只做过一次单元测试，它是在一个计算器程序上。）

以下是程序中的两个示例方法：

```
protected static void HttpURLConnection(String URL) throws IOException {

    try {
        URL pageURL = new URL(URL);

        HttpURLConnection connection = (HttpURLConnection) pageURL
                .openConnection();
        stCode = connection.getResponseCode();
        System.out.println("HTTP Status code: " + stCode);

        // append to CVS string
        CvsString.append(stCode);
        CvsString.append("\n");

        // retrieve URL
        siteURL = connection.getURL();
        System.out.println(siteURL + " = URL");

        CvsString.append(siteURL);
        CvsString.append(",");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
} 
```

和：

```
public static void HtmlParse(String line) throws IOException {

    // create new string reader object
    aReader = new StringReader(line);

    // create HTML parser object
    HTMLEditorKit.Parser parser = new ParserDelegator();

    // parse A anchor tags whilst handling start tag
    parser.parse(aReader, new HTMLEditorKit.ParserCallback() {
        // method to handle start tags
        public void handleStartTag(HTML.Tag t, MutableAttributeSet a,
                int pos) {
            // check if A tag
            if (t == HTML.Tag.A) {
                Object link = a.getAttribute(HTML.Attribute.HREF);
                if (link != null) {
                    links.add(String.valueOf(link));

                    // cast to string and pass to methods to get title,
                    // status
                    String pageURL = link.toString();
                    try {
                        parsePage(pageURL); // Title - To print URL, HTML
                        // page title, and HTTP status
                        HttpURLConnection(pageURL); // Status
                        // pause for half a second between pages
                        Thread.sleep(500);

                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (BadLocationException e) {
                        e.printStackTrace();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }
    }, true);
    aReader.close();
} 
```

我已经在 Eclipse 中设置了一个测试类，并按照以下方式概述了测试方法：

```
@Test
public void testHttpURLConnection() throws IOException {
    classToTest.HttpURLConnection( ? );
    assertEquals("Result", ? ? )
} 
```

我真的不知道从这里去哪里。我什至不确定我应该测试实时 URL 还是本地文件。我在这里找到了这个问题：[https](https://stackoverflow.com/questions/5555024/junit-testing-httpurlconnection) ://stackoverflow.com/questions/5555024/junit-testing-httpurlconnection 但我无法真正关注它，我不确定它是否已解决。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:29:30.227

您的问题没有一个确凿的答案，您测试的内容取决于您的代码做什么以及您想要测试它的深度。

因此，如果您有一个 parse 方法，它接受一个 HTML 并返回字符串：“this is a parsed html”（显然不是很有用，但只是说明一点），您将像这样测试它：

```
@Test
public void testHtmlParseSuccess() throws IOException {        
    assertEquals("this is a parsed html", classToTest.parse(html) ) //will return true, test will pass
}

@Test
    public void testHtmlParseSuccess() throws IOException {        
        assertEquals("this is a wrong answer", classToTest.parse(html) ) //will return false, test will fail
    } 
```

除此之外还有很多方法，`assertEquals()`所以你应该看看[这里](http://junit.sourceforge.net/doc/cookbook/cookbook.htm)。

最终由您决定要测试哪些部件以及如何测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:47:43.930

想想你的方法应该有什么效果。在第一种情况下，调用 HttpURLConnection(url) 时应该发生的预期事情似乎是将状态代码和 url 附加到名为 CvsString 的东西上。您将不得不在 CvsString 中实现一些东西，以便您可以检查您所期望的是否确实发生了。

但是：查看您的代码，我建议您查阅有关单元测试以及如何重构代码以使其变得可测试的书。在您的代码片段中，我看到了很多为什么对您的代码进行单元测试即使不是不可能也很困难的原因，例如静态方法的整体使用、具有副作用的方法、关注点分离很少等。因此，无法回答您的问题完全在这种情况下。

不要误会我的意思，这并不是冒犯的意思。学习这些东西是非常值得的，它将大大提高你的编码能力。

# c# - 将 Json 数组反序列化为 C# 列表

> ID：11504147
> 
> 赞同：0
> 
> 时间：2012-07-16T12:17:14.913
> 
> 标签：c#, json, deserialization

我是 Json 序列化和反序列化的新手，

我有

```
class TestClass
{

    public string Name{get;set;}
    public string Age{get;set;}
    public string Height{get;set;}

} 
```

并具有以下序列化功能

```
public void SerializeData()
{

    string jsonData = "{
           {"Name" : "Zeus","Age" : "1825","Height" : "900"},
           {"Name" : "Hera","Age" : "1805","Height" : "200"}
     }";

    var resultList = new List<TestClass>();
    var ser = new JavaScriptSerializer();

    resultList= serializer.Deserialize(jsonData , TestClass)

} 
```

但它不起作用！不断抛出“参数异常”

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:20:01.267

看起来您的 JSON 可能不正确。

A`List`更接近地映射到 JSON 数组 - 例如：

```
 [
       {"Name" : "Zeus","Age" : "1825","Height" : "900"},
       {"Name" : "Hera","Age" : "1805","Height" : "200"}
 ] 
```

如果你想使用外花括号`{}`，那么你可以序列化到/从一个`Dictionary<string, TestClass>`使用 JSON 像：

```
 {
       "Zeus" : {"Name" : "Zeus","Age" : "1825","Height" : "900"},
       "Hera" : {"Name" : "Hera","Age" : "1805","Height" : "200"}
 ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:22:02.083

这不代表一个数组：

```
string jsonData = "{
           {"Name" : "Zeus","Age" : "1825","Height" : "900"},
           {"Name" : "Hera","Age" : "1805","Height" : "200"}
     }"; 
```

为了有一个数组，你应该有：

```
string jsonData = "[
           {"Name" : "Zeus","Age" : "1825","Height" : "900"},
           {"Name" : "Hera","Age" : "1805","Height" : "200"}
     ]"; 
```

# javascript - 流星是否提供 Timepicker 功能？

> ID：11504152
> 
> 赞同：0
> 
> 时间：2012-07-16T12:17:27.140
> 
> 标签：javascript, jquery, meteor

我正在实现时间选择器功能。我已经尝试了 timepicker 的 jquery 插件，我得到的错误是“Jquery Undefined”。

所以我无法为 timepicker 实现 jquery 插件。

那么你能建议一些使用meteor.js实现时间选择器的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:21:21.423

如果您收到错误“Jquery undefined”，您可能缺少对 jquery 库的引用。您应该尝试在代码中添加对它的引用，看看是否有帮助。

# redis - 获取排序集中的所有成员

> ID：11504154
> 
> 赞同：78
> 
> 时间：2012-07-16T12:17:33.257
> 
> 标签：redis

我有一个排序集，想要获取集合的所有成员。如何确定命令的最大/最小分数：

```
zrange key min max 
```

?

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-16T13:23:16.397

你很幸运，因为[`zrange`](http://redis.io/commands/zrange)不需要分数，而是指数。`0`是第一个索引，`-1`将被解释为最后一个索引：

```
zrange key 0 -1 
```

要按分数获得范围，您可以[`zrangebyscore`](http://redis.io/commands/zrangebyscore)改为调用 -- where`-inf`和`+inf`可用于分别表示负无穷和正无穷，正如 Didier Spezia 在他的评论中指出的那样：

```
zrangebyscore key -inf +inf 
```

# android - javah jni 生成的标头有语法错误 - Android NDK - eclipse

> ID：11504155
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:17:34.667
> 
> 标签：android, java-native-interface, native, android-ndk

Android NDK，我使用以下命令生成 jni 标头，

```
C:\eclipse_workspace\C_Google_FaceDetect\bin>javah -jni -verbose -classpath C:\Android_SDK\platforms\android-10;C:\eclipse_workspace\C_Google_FaceDetect\src;. -d C:\eclipse_workspace\C_Google_FaceDetect\jni c.google.facedetect.FaceDetect 
```

问题是即使我将所有内容都设置好，我也会收到以下错误

> 没有找到原生 Lc/google/facedetect/FaceDetect 的实现；.decodeYUV([I[BII)V
> 
> threadid=1：线程以未捕获的异常退出（组=0x40018578）
> 
> 致命异常：主要 java.lang.UnsatisfiedLinkError：decodeYUV

我试图寻找有什么问题，我发现在 c_google_facedetect_FaceDetect.h jni 头文件中，我实际上有一个语法错误（即使它是生成的）

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h> /* Header for class c_google_facedetect_FaceDetect */

#ifndef _Included_c_google_facedetect_FaceDetect
#define _Included_c_google_facedetect_FaceDetect
#ifdef __cplusplus extern "C" {
#endif
#undef c_google_facedetect_FaceDetect_CAMERA_WIDTH
#define c_google_facedetect_FaceDetect_CAMERA_WIDTH 480L
#undef c_google_facedetect_FaceDetect_CAMERA_HEIGHT
#define c_google_facedetect_FaceDetect_CAMERA_HEIGHT 320L
/*
* Class:     c_google_facedetect_FaceDetect
* Method:    decodeYUV
* Signature: ([I[BII)V
*/

JNIEXPORT void JNICALL Java_c_google_facedetect_FaceDetect_decodeYUV(JNIEnv *, jobject, jintArray, jbyteArray, jint, jint);

#ifdef __cplusplus }
#endif
#endif 
```

“JNIEXPORT void JNICALL ....”行有语法错误，也许这就是导致所有错误的原因？

我的 Android.mk 文件如下：

> LOCAL_PATH := $(调用我的目录)
> 
> 包括 $(CLEAR_VARS)
> 
> LOCAL_MODULE := 人脸检测
> 
> LOCAL_SRC_FILES := face-detect.c
> 
> 包括 $(BUILD_SHARED_LIBRARY)

**更新** 我的唯一一个 java 文件名为 FaceDetect.java 并包含以下代码

```
public class FaceDetect extends Activity implements SurfaceHolder.Callback, Camera.PreviewCallback
{
static
    {
        Log.d("mytag", "before_lib");
        System.loadLibrary("face-detect");
        Log.d("mytag", "after_lib");
    }
public static native void decodeYUV(int[] out, byte[] fg, int width, int height);
} 
```

此外，Eclipse 没有说明语法错误是什么，它只在 JNIExport 行下划线并说语法错误

**另一个更新来回答** 我确实检查过库正在加载的问题，这里是 logcat

07-16 13:31:43.257: D/mytag(25188): before_lib
07-16 13:31:43.281: D/dalvikvm(25188): 试图加载 lib/data/data/c.google.facedetect/lib/ libface-detect.so 0x40517808
07-16 13:31:43.281：D/dalvikvm(25188)：添加共享库 /data/data/c.google.facedetect/lib/libface-detect.so 0x40517808
07-16 13:31 :43.281: D/dalvikvm(25188): 在 /data/data/c.google.facedetect/lib/libface-detect.so 0x40517808 中找不到 JNI_OnLoad，跳过初始化
07-16 13:31:43.281: D/mytag(25188 ): after_lib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:44:12.760

没有语法错误。检查您是否正在加载本机库并且已成功加载。

# sencha-charts - 如何在不使用 sencha touch 中的 Modal/hideonmasktap 属性的情况下隐藏 ItemInfo 交互

> ID：11504165
> 
> 赞同：1
> 
> 时间：2012-07-16T12:18:10.353
> 
> 标签：sencha-charts

我想在我的 sencha 触摸图表中使用 ItemInfo 交互，但不想使用 modal/hideonmasktap 属性概念。它不应该使整个背景变灰。当我点击图表时，应该会显示 ItemInfo 交互面板，如果我再次点击屏幕上的任何位置，那么它应该会消失，但不使用带有 modal/hideonmasktap 属性的灰色概念。

请帮忙。

谢谢！！

# php - 为什么浏览到 site.com/file.php/ 时页面显示内容

> ID：11504166
> 
> 赞同：0
> 
> 时间：2012-07-16T12:18:15.443
> 
> 标签：php, .htaccess, cpanel

我收到来自 Google 网站管理员工具的通知，提示我有重复的页面标题。浏览 mysite.com/file.php 是正确的，但我不知道为什么`mysite.com/file.php/`通过 file.php 显示一些内容。请告知如何删除/禁用浏览时显示的内容`mysite.com/file.php/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:21:15.123

第一：您可能有一个文件名`file.php` **和**目录`file.php`。检查那些。

第二：如果你确实检查了它的语法，你可能有`.htaccess`重写规则，这会把事情搞砸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:24:55.543

当您点击`/file.php`时，浏览器“看到”的*路径名*`/file.php/`会发生变化。在第一种情况下是，在第二种情况下是。*`/``/file.php`*

 *因此，当您使用相对路径（到图像、样式表等）时，在第二种情况下，浏览器会将请求发送到错误的 URI。

为避免这种情况，`<base url="http://example.com/path/to/site/root/">`请在您的 HTML中使用*

# c# - Bitboard Wrapper - 性能和内存分配

> ID：11504169
> 
> 赞同：0
> 
> 时间：2012-07-16T12:18:29.713
> 
> 标签：c#, performance, heap-memory, chess, stack-memory

我目前正在尝试用 C# 开发一个国际象棋引擎。感谢在我之前的帖子中给我的详细答案，我现在正在研究如何将位板系统应用于我的游戏结构。原则上，我再次尝试将一些面向对象的设计应用于这个新的引擎概念，但现在我有一些未解决的问题：

*   我想实现一个基于 UInt64 字段的位板结构来抽象该概念，可能提供 GetFirstBit() 或 Shift(..) 甚至 PopCount(..) 之类的方法，但我不知道这会如何影响性能和内存分配。由于引用副本，一个类会更好地提高性能，还是对于一个如此小的对象堆只会使事情复杂化？

*   我什至会实现一个索引器来像普通数组一样输入单个位，这会浪费资源还是一个好主意（对于国际象棋引擎）？

*   我试图尽量减少对我的项目的更改，但我意识到我的所有片段层次结构以及我的 Move 和 Square 类都将被搁置并且永远不会使用更多......我应该放弃那个设计，还是我可以重用这些类不知何故？

这是我想在我的引擎中实现的原型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Chess_Engine___NOGUI
{
    public struct BitBoard
    {
        public UInt64 bitBoard;

        public BitBoard(UInt64 board)
        {
            bitBoard = board;
        }

        public static implicit operator BitBoard(UInt64 board)
        {
            return new BitBoard(board);
        }
        public static implicit operator UInt64(BitBoard board)
        {
            return board.bitBoard;
        }

        public static BitBoard operator <<(BitBoard board, int shift)
        {
            return board.bitBoard << shift;
        }
        public static BitBoard operator >>(BitBoard board, int shift)
        {
            return board.bitBoard >> shift;
        }
        public static BitBoard operator &(BitBoard a, BitBoard b)
        {
            return a.bitBoard & b.bitBoard;
        }
        public static BitBoard operator |(BitBoard a, BitBoard b)
        {
            return a.bitBoard | b.bitBoard;
        }
        public static BitBoard operator ^(BitBoard a, BitBoard b)
        {
            return a.bitBoard ^ b.bitBoard;
        }
        public static BitBoard operator ~(BitBoard a)
        {
            return ~a.bitBoard;
        }
    }
} 
```

在这里，我想保存的课程......

这是我的移动课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Chess_Engine___NOGUI
{
    class NullMove : Move
    {
        public NullMove()
            : base(null, null, null)
        {

        }
    }

    class Move
    {
        public string Algebraic
        {
            get
            {
                return ToAlgebraic();
            }
        } // JUST FOR DEBUG
        public Square FromSquare { get; set; }
        public Square ToSquare { get; set; }
        public Piece PieceMoved { get; set; }
        public Piece PieceCaptured { get; set; }
        public PieceType PiecePromoted { get; set; }
        public bool HasPromoted
        {
            get
            {
                return PiecePromoted != PieceType.None;
            }
        }
        public bool IsEnpassant { get; set; }
        public bool HasCaptured
        {
            get
            {
                if (PieceCaptured != null)
                    return true;
                else
                    return false;
            }
        }
        public bool IsCastling
        {
            get
            {
                return IsLongCastling || IsShortCastling;
            }
        }
        public bool IsLongCastling
        {
            get
            {
                if (PieceMoved is King)
                {
                    if (FromSquare.X - ToSquare.X == 2)
                        return true;
                    else
                        return false;
                }
                else
                {
                    return false;
                }

            }
        }
        public bool IsShortCastling
        {
            get
            {
                if (PieceMoved is King)
                {
                    if (FromSquare.X - ToSquare.X == -2)
                           return true;
                    else
                        return false;
                }
                else
                {
                    return false;
                }
            }
        }
        public bool IsCheck { get; set; }
        public bool IsCheckMate { get; set; }
        public bool IsDoublePawnPush
        {
            get
            {
                if (PieceMoved.Type == PieceType.Pawn)
                    if (!HasCaptured)
                        if (ToSquare.X == FromSquare.X)
                            if (SideMove == PieceColor.White)
                            {
                                if (ToSquare.Y - FromSquare.Y == 2)
                                    return true;
                            }
                            else
                            {
                                if (ToSquare.Y - FromSquare.Y == -2)
                                    return true;
                            }
                return false;
            }
        }
        public PieceColor SideMove
        {
            get
            {
                return PieceMoved.Color;
            }
        }

        public Piece RookMoved { get; set; }
        public Square KingPosition { get; set; }
        public Square RookPosition { get; set; }
        public float Score { get; set; }

        public Move(Square fromSquare, Square toSquare, Piece pieceMoved, PieceType piecePromoted = PieceType.None)
        {
            this.FromSquare = fromSquare;
            this.ToSquare = toSquare;
            this.PieceMoved = pieceMoved;
            this.PiecePromoted = piecePromoted;
        }

        public static bool operator ==(Move a, Move b)
        {
            return a.Equals(b);
        }
        public static bool operator !=(Move a, Move b)
        {
            return !a.Equals(b);
        }
        public override bool Equals(object other)
        {
            if (other is Move)
            {
                Move compare = (Move)other;
                return (this.FromSquare == compare.FromSquare && this.ToSquare == compare.ToSquare);
            }
            else
            {
                return false;
            }
        }
        public override int GetHashCode()
        {
            return base.GetHashCode();
        }

        public string ToAlgebraic()
        {
           StringBuilder algebraic = new StringBuilder();

            if (IsCastling) // se e` una mossa di arrocco
            {
                if (IsShortCastling)
                    algebraic.Append("O-O"); // arrocco corto
                else
                    algebraic.Append("O-O-O"); // arrocco lungo
            }
            else
            {
                algebraic.Append(FromSquare.ToAlgebraic());

                if (HasCaptured)
                    algebraic.Append("x"); // cattura

                algebraic.Append(ToSquare.ToAlgebraic());
            }

            if (HasPromoted)
                algebraic.Append(PiecePromoted.GetInitial());

            if (IsCheck)
                if (IsCheckMate)
                    algebraic.Append("#"); // scacco matto
                else
                    algebraic.Append("+"); // scacco

            return algebraic.ToString();
        }
    }
} 
```

这是我的 Square 课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Chess_Engine___NOGUI
{
    sealed class Square
    {
        public int X { get; set; }
        public int Y { get; set; }

        public Square(int x, int y)
        {
            this.X = x;
            this.Y = y;
        }

        public static implicit operator Square(string str)
        {
            // converte la notazione algebrica (es. a1) in coordinate decimali
            str = str.ToLower(); // converte la stringa in minuscolo
            int x = (int)(str[0] - 'a');
            int y = (int)(str[1] - '1');

            return new Square(x, y);
        }

        public static bool operator ==(Square a, Square b)
        {
            if (System.Object.ReferenceEquals(a, b))
            {
                return true;
            }

            if (((object)a == null) || ((object)b == null))
            {
                return false;
            }

            if (a is Square)
            {
                Square compare = (Square)b;
                return (a.X == compare.X && a.Y == compare.Y);
            }
            else
            {
                return false;
            }
        }
        public static bool operator !=(Square a, Square b)
        {
            return !(a == b);
        }

        public override bool Equals(object obj)
        {
            return base.Equals(obj);
        }
        public override int GetHashCode()
        {
            return base.GetHashCode();
        }

        public string ToAlgebraic()
        {
            string str = "";
            str += (char)(this.X + 97);
            str += (this.Y + 1).ToString();

            return str;
        }
    }
} 
```

这是我的抽象 Piece 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Chess_Engine___NOGUI
{
    public enum PieceType { None, Pawn, Knight, Bishop, Rook, Queen, King }
    public enum PieceColor { None, White, Black }

    public static class Extensions
    {
        public static PieceColor GetOpposite(this PieceColor color)
        {
            if (color == PieceColor.White)
                return PieceColor.Black;
            if (color == PieceColor.Black)
                return PieceColor.White;
            else
                return PieceColor.None;
        }

        public static char GetInitial(this PieceType type)
        {
            switch (type)
            {
                case PieceType.Bishop:
                    return 'B';
                case PieceType.King:
                    return 'K';
                case PieceType.Knight:
                    return 'N';
                case PieceType.Pawn:
                    return 'P';
                case PieceType.Queen:
                    return 'Q';
                case PieceType.Rook:
                    return 'R';
                default:
                    return ' ';
            }
        }

    }

    abstract class Piece
    {
        public char Notation { get; set; }
        protected List<Move> movesList;
        public Square startingSquare { get; set; }
        public Square square { get; protected set; }
        public Square lastSquare { get; set; }
        public PieceType Type { get; set; }
        public PieceColor Color { get; set; }
        public virtual bool AlreadyBeenMoved
        {
            get
            {
                return square != startingSquare;
            }
        }

        public Piece(Square square, PieceColor color)
        {
            this.startingSquare = square;
            this.square = square;
            this.lastSquare = square;
            this.Color = color;
            this.movesList = new List<Move>();
        }

        public void Move(Square destination)
        {
            square = destination; // aggiorna la posizione attuale
        }
        public bool ShouldUpdateMoves()
        {
            if (lastSquare == square) // se il pezzo non si e` mosso
            {
                if (movesList.Count > 0)
                    return false;
            }
            else
            {
                lastSquare = square;
                movesList.Clear();
            }
            return true;
        }

        public abstract List<Move> GetMoves();
    }
} 
```

我想强调的是，这里获得正确答案的一些非常重要的因素是速度优化和面向对象的设计。

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:57:21.690

在问题的最后，您指定了两个从根本上相互冲突的因素。我的建议是你专注于其中一个。要么您重视良好的 OO 设计，要么您重视良好的性能。你真的不能两者兼得。

为了回答您第一个要点中的问题，我个人不使用任何 OO 来查找（例如）位板中的第一个有效位：

```
private const UInt64 DEBRUIJN64 = 0x07EDD5E59A4E28C2;
private static readonly Byte[] INDEX64 = {63,  0, 58,  1, 59, 47, 53,  2,
                                          60, 39, 48, 27, 54, 33, 42,  3,
                                          61, 51, 37, 40, 49, 18, 28, 20,
                                          55, 30, 34, 11, 43, 14, 22,  4,
                                          62, 57, 46, 52, 38, 26, 32, 41,
                                          50, 36, 17, 19, 29, 10, 13, 21,
                                          56, 45, 25, 31, 35, 16,  9, 12,
                                          44, 24, 15,  8, 23,  7,  6,  5};

// De Bruijn Multiplication, see http://chessprogramming.wikispaces.com/BitScan
// Don't use this if bitmap = 0!
internal static Byte BitScanForward(UInt64 bitmap)
{
    Debug.Assert(bitmap != 0);
    return INDEX64[((ulong)((long)bitmap & -(long)bitmap) * DEBRUIJN64) >> 58];
} 
```

我不使用 Piece 或 Square 类：

```
// Piece identifiers, 4 bits each.
// Useful bitwise properties of this numbering scheme:
// white = 0..., black = 1..., sliding = .1.., nonsliding = .0..
// rank/file sliding pieces = .11., diagonally sliding pieces = .1.1
// pawns and kings (without colour bits), are < 3
// major pieces (without colour bits), are > 5
// minor and major pieces (without colour bits set), are > 2.
internal const byte EMPTY = 0;                  //  00000000
internal const byte WHITE_PAWN = 1;             //  00000001
internal const byte WHITE_KING = 2;             //  00000010
internal const byte WHITE_KNIGHT = 3;           //  00000011
internal const byte WHITE_BISHOP = 5;           //  00000101
internal const byte WHITE_ROOK = 6;             //  00000110
internal const byte WHITE_QUEEN = 7;            //  00000111
internal const byte BLACK_PAWN = 9;             //  00001001
internal const byte BLACK_KING = 10;            //  00001010
internal const byte BLACK_KNIGHT = 11;          //  00001011
internal const byte BLACK_BISHOP = 13;          //  00001101
internal const byte BLACK_ROOK = 14;            //  00001110
internal const byte BLACK_QUEEN = 15;           //  00001111 
```

我确实使用了 Move 类，但它可能应该是一个结构。我的测试没有显示出显着差异：

```
internal sealed class Move
{
    internal Move()
    {
    }

    internal Move(byte squareFrom, byte squareTo, byte pieceMoved, byte pieceCaptured, byte piecePromoted)
    {
        this.SquareFrom = squareFrom;
        this.SquareTo = squareTo;
        this.PieceMoved = pieceMoved;
        this.PieceCaptured = pieceCaptured;
        this.PiecePromoted = piecePromoted;
    }

    // The FROM square.
    // Bits 1-3 are the board file, bits 4-6 are the board rank, bits 7-8 are unused.
    internal readonly byte SquareFrom;

    // The TO square.
    // Bits 1-3 are the board file, bits 4-6 are the board rank, bits 7-8 are unused.
    internal readonly byte SquareTo;

    // The MOVED piece.
    // Bits 1-3 are the piece type, bit 4 is the piece colour, bits 5-8 are unused.
    internal readonly byte PieceMoved;

    // The CAPTURED piece.
    // Bits 1-3 are the piece type, bit 4 is the piece colour, bits 5-8 are unused.
    internal readonly byte PieceCaptured;

    // The PROMOTED piece.
    // Bits 1-3 are the piece type, bit 4 is the piece colour, bits 5-8 are unused.
    // NB Overloaded to represent EN-PASSANT capture if promoted piece is a pawn.
    // NB Overloaded to represent CASTLING if promoted piece is a king.
    internal readonly byte PiecePromoted;
} 
```

# ruby-on-rails - 如何包含来自复杂模块的类（paypal_permissions gem）？

> ID：11504170
> 
> 赞同：2
> 
> 时间：2012-07-16T12:18:30.970
> 
> 标签：ruby-on-rails, module, paypal

**编辑**

**对不起，那没有发布所有**

**我的控制器：**

```
 def get_basic_personal_data merchant
     access_token = merchant.ppp_access_token
     verifier = merchant.ppp_access_token_verifier
     ::PAYPAL_PERMISSIONS_GATEWAY.get_basic_personal_data(access_token, verifier)
   end 
```

我有模块：

```
 module ActiveMerchant #:nodoc:
  module Billing #:nodoc:
   class PaypalPermissionsGateway < ActiveMerchant::Billing::Gateway # :nodoc
  ...
   def get_basic_personal_data
...
end 
```

我需要使用这种方法从PayPal获取数据，所以我需要将它包含到merchant_controller中，但我不知道如何。

我想在视图中使用类似：

```
 <%=  @merchant.get_basic_personal_data.email%> 
```

但我不断收到错误：

```
 undefined method `get_basic_personal_data' for #<Merchant:0x618ea78> 
```

**编辑**

来自完整跟踪的错误：

```
 activemodel (3.2.3) lib/active_model/attribute_methods.rb:407:in `method_missing'
 activerecord (3.2.3) lib/active_record/attribute_methods.rb:148:in `method_missing' 
```

我该做什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:52:17.173

您需要`PaypalPermissionGateway`在模块定义后尝试添加以下行来混合模块：

```
PaypalPermissionGateway.send(:include, ActiveMerchant) 
```

您可能需要更改类名，以包括其命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T21:19:48.287

在您的模型顶部加载模块，`include ActiveMerchant::Billing`然后您应该能够执行`@merchant.get_basic_personal_data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:26:34.950

在您的问题中，您已经`get_basic_personal_data`在控制器上定义了您的方法，但您正试图从您的`@merchant`实例中调用它。但是`get_basic_personal_data`没有在您的`Merchant`模型上定义，也不能这样称呼。你的所作所为相当于如下：

```
class A
end

class B
  def method_b
    ...
  end
end

a = new A()
a.method_b() 
```

即，它不会工作。

根据您对代码的布局方式，您应该执行以下操作：

```
get_basic_personal_data(@merchant) 
```

默认情况下，您将无法从视图中访问控制器的方法，直到您公开它们。一种方法是使用`helper_method`. 例如：

```
class MerchantsController < ApplicationController
  helper_method :get_basic_personal_data

  ...

  def get_basic_personal_data merchant
    ...
  end
end 
```

# ios - Xcode - 有没有办法将组件从一个视图拖到另一个视图而不丢失其框架？

> ID：11504172
> 
> 赞同：92
> 
> 时间：2012-07-16T12:18:36.647
> 
> 标签：ios, xcode, interface-builder

我想做的是在 Xcode 的界面构建器中将组件/视图从一个超级视图拖到另一个超级视图，而无需重置其框架/位置。

执行此操作时 Xcode 的默认行为似乎是将要在其新超级视图中垂直和水平移动的视图居中，同时保留其尺寸。这非常令人沮丧，因为这意味着视图需要在其新的超级视图中手动重新定位。但是我在移动它之前已经正确定位了它，所以我希望 Xcode 只记住它的框架的所有属性，而不仅仅是它的宽度/高度。这可能吗？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-06-06T02:40:34.873

另一种解决方案：

1.  在子视图中选择您想要的项目，然后
2.  （在工具栏中）编辑器>嵌入>要嵌入的视图类型。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-04T19:36:16.350

我发现了一些可以帮助你们的东西！

任务是将“子视图”重新组合为“父视图”，以便它们分层地成为父视图的子视图，并在显示时保留操作前的物理位置。

首先，调整父视图以物理覆盖子视图的区域。其次，确保所有孩子都在视图列表中低于它。

现在用鼠标选择所有的孩子并移动它们，例如向上一个像素和向下一个像素（只是说IB有一些变化）。之后释放孩子，他们将神奇地成为父母的孩子并保持他们的立场。

它适用于 OSX 10.8.2 和 Xcode 4.6。

祝你好运！

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-12T17:15:15.490

我设法节省了大量重新定位东西的时间，并做到了：

1.  在 Interface Builder 中将父视图添加到与可能的子视图相同的级别。
2.  在文本编辑器中打开故事板，然后将可能的子视图复制到父视图的子视图标签内。XCode 将在您保存后更新。

虽然不是很优雅，但不明白为什么 XCode 不支持 Shift 或其他东西。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-29T16:26:40.147

1.  选择要从一个 UIView 移动到另一个 UiView（可能是子项）或 ScrollView 的所有控件

2.  剪切/复制

3.  现在将新的 UIView/ScrollView 拖到现有的 UIView 后，不要单击一次以选择它，而是双击新的 UIView/ScrollView 并粘贴所有控件。

4.  所有控件之间的距离差异将保持不变，但您可能需要再次重新定位控件。因此，在重新定位之前不要单击任何地方，只需通过导航箭头重新定位所有控件，因为这些控件都已被选中，或者您可能需要再次选择这些控件。

注意：我在 XCode 4.2

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-19T08:38:33.633

我做了一些类似于 Stepan 的解决方案，但没有使用情节提要。在 IB 中，当 ViewController 的视图打开时：

1.  在VC的主视图之外再创建一个视图
2.  通过将所有子视图从一个视图拖动到另一个视图将所有子视图移动到第二个视图（从左侧列表中拖动重置它们的位置）如果您无法使用鼠标从 IB 中选择它们，则从左侧列表中选择全部然后使用“cmd”按钮从 IB 面板中选择一个最终子视图。
3.  将它们带回初始主视图上的最终视图。
4.  删除添加的视图，一切就绪。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-13T11:19:07.300

这是将子视图复制到另一个视图并保留位置的最佳解决方案：

1.  在子视图中选择您想要的项目，然后
2.  编辑器 -> 嵌入 -> 视图
3.  复制此视图 (Cmd+C)
4.  撤消（Cmd+Z）（因为你只想要子视图）
5.  转到您想要子视图的视图并将其粘贴（Cmd+V）
6.  选择您复制粘贴的嵌入视图和**编辑器-> 取消嵌入**

第 6 步将删除嵌入视图，您将只复制子视图。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-30T14:51:23.063

# 将父视图拖放到另一个视图（UIView、ScrollView、StackView）时，Xcode Interface Builder 会出现混乱

**问：**
将一个视图（其中包含许多其他子视图）嵌入到 ScrollView 或另一个顶级视图中并不像我目前所看到的那样直截了当。不久之后发生的事情是所有子视图似乎都放错了位置，因为它找不到它们的原始框架。

**A：**
按照以下步骤，您将能够尽可能轻松地解决它：

1.  在子视图中选择您想要的项目，然后
2.  转到菜单栏，编辑器 -> 嵌入 -> 视图
3.  复制这个带有子视图的新视图（Cmd+C）（对我来说，目前所有的约束都被保留了）
4.  转到您希望子视图所在的视图（无论是 ScrollView 还是 StackView）并粘贴（Cmd+V）复制的视图
5.  选择粘贴的嵌入视图（您之前新创建的）并转到 Xcode 的菜单栏，编辑器 -> 取消嵌入

**不，还没完！有时，您可能会遇到更多与 UI 约束相关的问题，您必须相应地解决它们。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-11T09:06:22.673

我发现了另一种方法。基本上是：移动 = 剪切 + 粘贴

**这样你就可以：**

*   让所有子视图成为新父视图 (P') 的子视图
*   将（几乎）所有约束保留在基于自动布局的故事板中
*   保持子视图的相对位置（帧）一个到另一个

**这样您就不会：**

*   在文本编辑器中编辑 Storyboard 文件

基础是，除了 Storyboard 中的一个（根）视图之外，每个视图**都有其父视图**。接下来，当您复制/移动多个子视图时，您**会丢失帧和约束**。

答案很简单。您通过将子视图 (SV) 的父视图 (P) 复制到新的父视图 (P') 来制作子视图 (SV) 的副本。这样，您可能只需要重新创建从该父新视图 (P') 到其新父视图的约束，而不是为您想要移动的每个子视图重新创建约束。

在您将父视图 (P) 复制到新视图 (P') 中后，从该新视图 (P') 中，您：

*   删除所有孩子，除了你想移动的孩子
*   重新创建新的父 (P') 约束
*   为（SV'）重新创建可能的 Interface Builder 出口

从原始父视图 (P) 你：

*   删除所有要移动的孩子

**前：**

> 视图1
> 
> 视图2
> 
> > 磷
> > 
> > > 想要移动的 SV
> > > 
> > > SVs-你不想移动
> 
> 视图3

**后：**

> 视图1
> 
> 视图2
> 
> > 磷
> > 
> > > SVs-你不想移动
> 
> 视图3
> 
> > P'
> > 
> > > SVs'-你想搬家

我应该强调的是，如果您将 UIScrollView 作为父视图，这并不能很好地概括。然后它的副本将再次成为 UIScrollView，这可能是不可取的。

另一件事是当您删除原始父视图 (P) 中的一些子视图 (SV) 时，如果其他（不可移动的子视图）引用它们，您可能需要重新创建一些约束。但无论如何你都应该这样做。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-27T05:30:00.320

帮助我解决这个问题的是——

1.  在根级别的 xib 中创建所需的父视图（滚动视图或 uiview）并相应地调整其大小
2.  复制您希望成为此父视图的子视图的所有视图，并将它们粘贴到您在步骤 1 中创建的新视图中
3.  此时，您将复制这些视图。新添加的视图将是未对齐的，但仍以相同的顺序和相同的距离相互对齐，在 xib 中对齐它们以匹配它们的边界与同一视图的旧副本（这假设新的父视图与旧的界限相同）
4.  新添加的视图会失去一些约束，参考旧视图修复
5.  从 xib 中删除旧视图

# java - SSLContext 初始化

> ID：11504173
> 
> 赞同：13
> 
> 时间：2012-07-16T12:18:37.347
> 
> 标签：java, security, ssl, jsse

我正在查看`JSSE`参考指南，我需要获取一个实例`SSLContext`才能创建一个`SSLEngine`，所以我可以使用它`Netty`来启用安全性。

要获得 的实例`SSLContext`，我使用`SSLContext.getInstance()`. 我看到该方法被多次覆盖，因此我可以选择要使用的协议和安全提供程序。

[在这里](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#SSLContext)，我可以看到可以使用的算法列表。我应该使用哪种算法来启用安全通信？

此外，由于可以指定要使用的安全提供程序，我应该使用哪个提供程序？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-16T14:02:37.730

正如您在[标准名称文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#SSLContext)中看到的那样，所有条目（SSLv3、TLSv1.0、TLSv1.1、...）都表示它们可能支持其他版本。

实际上，在 Oracle JDK（和 OpenJDK）中，它们都可以。如果查看[源代码](http://docjar.com/html/api/sun/security/ssl/SSLContextImpl.java.html)，`TLS10Context`该类用于 TLS、SSL、SSLv3 和 TLS10，`TLS11Context`用于 TLSv1.1 和`TLS12Context`TLSv1.2。都支持所有版本的 SSL/TLS，默认情况下启用的内容会有所不同。

这可能与其他提供商或 JRE 供应商不同。您当然应该选择一个至少要支持您要使用的协议版本的协议。

请注意，使用的协议是稍后使用[`SSLSocket.setEnabledProtocols(...)`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocket.html#setEnabledProtocols%28java.lang.String[]%29)或`SSLEngine`等效的。

作为一般规则，请使用您可以使用的最高版本号（SSLv3 < TLSv1.0 < TLSv1.1 ...），这可能取决于您要与之通信的各方支持什么。

* * *

默认启用哪些协议取决于 Oracle JRE 的确切版本。

在查看[OpenJDK 7u40-b43](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/sun/security/ssl/SunJSSE.java?av=f#208)[的源代码时`sun.security.ssl.SunJSSE`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/sun/security/ssl/SunJSSE.java?av=f#208)，就协议而言，`TLS`它只是一个别名`TLSv1`（and 也是`SSL`如此`SSLv3`）`SSLContext`。查看（它们本身的内部类）的各种[实现`SSLContextImpl`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/sun/security/ssl/SSLContextImpl.java)`SSLContextImpl`：

*   都支持所有协议。
*   服务器端默认启用所有协议。
*   默认启用的客户端协议有所不同：
    *   `TLS10Context`（用于协议`SSL`、、、、`SSLv3`）默认情况`TLS`下`TLSv1`在客户端启用 SSLv3 到 TLSv1.0。
    *   `TLS11Context`（用于协议`TLSv1.1`）默认情况下也启用 TLSv1.1。
    *   `TLS12Context`（用于协议`TLSv1.2`）也默认启用 TLSv1.2。
*   如果启用 FIPS，则不支持 SSL（因此默认情况下不启用）。

这在 Java 8 中与[新的`jdk.tls.client.protocols`](https://docs.oracle.com/javase/8/docs/technotes/guides/security/enhancements-8.html)系统属性一起发生了变化。

同样，在查看[OpenJDK 8u40-b25中](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/sun/security/ssl/SunJSSE.java?av=f#210)[的源代码`sun.security.ssl.SunJSSE`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/sun/security/ssl/SunJSSE.java?av=f#210)时，`SSLContext`protocols `TLSv1`,`TLSv1.1`和`TLSv1.2`还使用了`TLS10Context`, `TLS11Context`and `TLS12Context`，它们遵循与 Java 7 中相同的逻辑。

但是，协议`TLS`不再是其中任何一个的别名。相反，它使用[`TLSContext`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/sun/security/ssl/SSLContextImpl.java#SSLContextImpl.TLSContext)依赖于`jdk.tls.client.protocols`系统属性中的值。来自[JSSE 参考指南](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#InstallationAndCustomization)：

> 要在客户端上启用特定的 SunJSSE 协议，请在引号内以逗号分隔的列表中指定它们；然后在客户端上禁用所有其他支持的协议。例如，如果此属性的值为“TLSv1,TLSv1.1”，则在客户端上启用 TLSv1 和 TLSv1.1 的客户端默认协议设置，而在客户端上禁用 SSLv3、TLSv1.2 和 SSLv2Hello客户端。

如果此属性为空，则客户端和服务器端默认启用所有协议。

当然，在[Oracle JRE 8 的最新版本中，默认情况下也完全禁用 SSL](http://www.oracle.com/technetwork/java/javase/8u31-relnotes-2389094.html#newft)（因此从这些列表中删除）。

Note that in both cases (JRE 7 and 8), the `SSLContext` you get by default via `SSLContext.getDefault()` out of the box is more or less equivalent to an `SSLContext` obtained with protocol `TLS` and initialised with the default truststore parameters and so on.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:29:57.067

该协议没有默认值，因此我将使用您的 JDK 支持的最新协议，即 TLSv1、TLSv1.1 或 TLSv1.2：看看哪个有效，或者查看`getSupportedProtocols()`. 默认安全提供程序通过避免您指定它的所有 API 来使用，或者例如`KeyStore.getDefaultType()`.

当您获取 SSLEngines 时，请确保使用带有主机名和端口的方法。否则，您将无法获得 SSL 会话共享。

# javascript - 如何在javascript中设置事件顺序？

> ID：11504182
> 
> 赞同：2
> 
> 时间：2012-07-16T12:19:29.583
> 
> 标签：javascript, events, hyperlink, click

我有 html-link，我想将事件侦听器添加到`<a>`标签，所以调用 javascript 函数，然后 brouser 打开一个链接。我尝试使用`document.getElementById('link').addEventListener("click", myfunc);`，但它工作混乱，有时会调用 myfunc，打开链接后，有时会打开链接，所以不调用 myfunc。如何设置这些事件的顺序？

代码路径：

HTML：

```
<a href="<%= Url.Action("LogOut", "Account") %>" id="logoutlink">LogOut</a> 
```

Javascript：

```
function LogOutWithoutReload(e) {
VK.Auth.logout(function () { });} 
```

`document.getElementById('logoutlink').addEventListener("click", LogOutWithoutReload);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:25:48.570

你的函数在做什么？这是某种异步事件吗？如果是这样，那么您需要在异步任务的成功回调中执行默认操作。

`.load`jQuery函数就是一个例子。

如果您的`mufunc`函数要调用 jQuery`load`函数，它会立即返回，它不会等待它自己的数据被加载。您必须做的是使用`load`函数中的第二个参数作为数据加载完成时的回调。这是您对链接进行默认操作的地方。

这可能是您在使用其他一些异步任务时遇到的问题。

在你编辑你的代码后，你有这一行

```
VK.Auth.logout(function () { }); 
```

这看起来像注销函数确实是某种异步调用并且具有回调函数。我可能是错的，它可能正在做你需要检查文档的其他事情，但对我来说，你应该在回调函数中做任何你需要做的事情（例如重定向）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:26:56.577

事件处理程序*总是*在浏览器离开之前被调用。我的猜测是您的功能有时不起作用，导致异常并且不会停止默认操作。你试过调试它吗？您的（错误）控制台中应该有一些消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:38:22.957

执行脚本后设置链接的 href 属性。

链接

```
<a href='#'>LogOut</a> 
```

编码

```
document.getElementById("link").onclick = function(event) {
   //your script here, if there is an ajax request,
   // change location in your callback function
   location.href = '<%= Url.Action("LogOut", "Account") %>'
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-16T12:27:10.610

要防止打开链接，请尝试：

```
 document.getElementById("link").onclick = function(event) {
    event.preventDefault();
    myFunc();
 } 
```

# objective-c - 更改蓝牙传输的字节序

> ID：11504183
> 
> 赞同：1
> 
> 时间：2012-07-16T12:19:30.667
> 
> 标签：objective-c, ios, endianness, bluetooth-lowenergy

我正在使用蓝牙 4（低功耗），需要将 8 位滑块值传输到我的从设备。接收端应该得到这样的东西：`000000A3`但现在我被困住了`A3000000`

我尝试了不同的解决方案：

```
int value = ((int)slider.value >> 24) ;
NSData *dataToWrite = [NSData dataWithBytes:&value length:4]; //data to be sent has to be of type NSData 
```

和

```
int value[] = {0x00, 0x00, 0x00, slider.value}; 
```

和唯一的工作

```
char value[4] = {0x00, 0x00, 0x00, slider.value}; 
```

但我认为这看起来有点难看。关于如何做到这一点的任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:51:25.133

Core Foundation 具有处理字节顺序转换的函数：[Byte-Order Utilities Reference](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html)

# sql - 按客户和最大日期分组

> ID：11504186
> 
> 赞同：1
> 
> 时间：2012-07-16T12:19:44.633
> 
> 标签：sql, sql-server-2005, group-by, max, greatest-n-per-group

我想按日期降序列出我的客户订单的最后付款。

我写了一个sql查询

```
 SELECT CARHARTAR,
       CARHARREFNO,
       CARHARCARKOD,
       CARHARCARUNVAN,
       CARHARACIKLAMA,
       CARHARTUTAR
FROM   CARHAR
WHERE  ( CARHARTIPI IN ( 2, 4 ) )
       AND ( CARHARISTIPNO IN ( 2, 6 ) )
       AND ( CARHARCARKOD NOT LIKE 'W%' )
       AND ( CARHARCARKOD NOT LIKE 'Z%' )
       AND ( CARHARGCFLAG = 2 )
       AND ( CARHARIADEFLAG = 0 )
ORDER  BY CARHARTAR DESC 
```

此查询按日期降序列出所有付款顺序。但我只需要最后一次付款。我正在使用 carharcarkod 组，但我有一个聚合功能问题。我应该怎么办 ？

[这是查询结果的截图](http://i.stack.imgur.com/hG7tj.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:37:47.400

我认为该`ROW_NUMBER`功能会做你所追求的：

```
;WITH Payments AS
(   SELECT  CARHARTAR,
            CARHARREFNO,
            CARHARCARKOD,
            CARHARCARUNVAN,
            CARHARACIKLAMA,
            CARHARTUTAR,
            ROW_NUMBER() OVER(PARTITION BY CARHARCARKOD ORDER BY CARHARTAR DESC) [RowNumber]
    FROM    CARHAR
    WHERE   CARHARTIPI IN (2, 4)
    AND     CARHARISTIPNO IN (2, 6)
    AND     CARHARCARKOD NOT LIKE 'W%'
    AND     CARHARCARKOD NOT LIKE 'Z%'
    AND     CARHARGCFLAG = 2
    AND     CARHARIADEFLAG = 0
)
SELECT  CARHARTAR,
        CARHARREFNO,
        CARHARCARKOD,
        CARHARCARUNVAN,
        CARHARACIKLAMA,
        CARHARTUTAR
FROM    Payments
WHERE   RowNumber = 1
ORDER BY CARHARTAR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:49:09.920

如果您使用 group by 子句，那么您必须包含要选择的 group 中的所有字段。

```
SELECT CARHARTAR,
   CARHARCARKOD FROM   CARHAR WHERE  ( CARHARTIPI IN ( 2, 4 ) )
   AND ( CARHARISTIPNO IN ( 2, 6 ) )
   AND ( CARHARCARKOD NOT LIKE 'W%' )
   AND ( CARHARCARKOD NOT LIKE 'Z%' )
   AND ( CARHARGCFLAG = 2 )
   AND ( CARHARIADEFLAG = 0 ) GROUP BY CARHARTAR,carharcarkod DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:49:54.010

```
with cte as(
SELECT CARHARCARKOD,max(CARHARTAR) [CARHARTAR]
FROM   CARHAR
WHERE  ( CARHARTIPI IN ( 2, 4 ) )
       AND ( CARHARISTIPNO IN ( 2, 6 ) )
       AND ( CARHARCARKOD NOT LIKE 'W%' )
       AND ( CARHARCARKOD NOT LIKE 'Z%' )
       AND ( CARHARGCFLAG = 2 )
       AND ( CARHARIADEFLAG = 0 )
group by CARHARCARKOD    )   
select C.CARHARTAR,
       C.CARHARREFNO,
       C.CARHARCARKOD,
       C.CARHARCARUNVAN,
       C.CARHARACIKLAMA,
       C.CARHARTUTAR
FROM  cte join CARHAR C
on  CTE.CARHARCARKOD =C.CARHARCARKOD     
and cte.CARHARTAR= C.CARHARTAR 
```

# ruby - 使用 Datamapper “转推”

> ID：11504190
> 
> 赞同：0
> 
> 时间：2012-07-16T12:19:46.713
> 
> 标签：ruby, datamapper, carrierwave, recreate, repost

我想暗示一些类似于 Twitter Repost System 的东西，因此我将以此为例。所以假设我有一个推文模型，我想允许其他用户重新发布另一个用户的特定推文，我该如何实现这样的事情？我认为将转发类放入推文中以便在我用来接收存储在数据库中的所有推文时也能够访问转发是一个很酷的主意`Tweet.all`，但不知何故我没有按预期工作......以下代码只是一个示例，它应该显示即使它不工作也应该如何实现这一点......有什么想法可以建立一个工作的转发模型，它还允许我通过使用访问推文和转发`Tweet.all`？

```
class Tweet
  class Retweet
    include DataMapper::Resource

    belongs_to :user, key => true
    belongs_to :tweet, key => true
  end

  include DataMapper::Resource
  property :text, String
  property :timestamp, String

  belongs_to :user
end 
```

**重要提示：**我应该与载波兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:52:19.370

```
class Tweet
  include DataMapper::Resource
  property :id, Serial
  has n, :retweets, 'Tweet', :child_key => :parent_id
  belongs_to :parent, 'Tweet', :required => false
  belongs_to :user

  def is_retweet?
    self.parent_id ? true : false
  end
end

original = Tweet.create :user => user1
retweet = Tweet.create :parent => original, :user => user2
retweet.is_retweet? # => true 
```

# javascript - 折叠和展开标签 jquery / 简单的手风琴

> ID：11504193
> 
> 赞同：0
> 
> 时间：2012-07-16T12:19:57.047
> 
> 标签：javascript, jquery, html, css, accordion

我有关于手风琴标签的疑问..

我使用了**Accordion Menu**插件 下面的代码用于页面中的选项卡。

```
 [accordions]
  [accordion title ="about"]**Content 1** [/accordion ]
  [accordion title="Home"]**Content 2** [/accordion ]
  [/accordions] 
```

网页如下所示：

![在此处输入图像描述](../Images/0984c03a048ba5055f48fc33d9495dc1.png)

我希望首先将这两个选项卡折叠起来。单击“**关于**”时，它应该展开并显示内容。单击“**主页”**后，它应该折叠“**关于**”选项卡并展开主页

通过 jquery 我可以实现这一点，但我不知道要下载和使用哪个脚本..

有任何想法吗？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:27:04.000

如果您使用 jQuery UI Accordion，您可以向您的手风琴添加简单的事件。

或添加事件：

```
$( ".selector" ).bind( "accordioncreate", function(event, ui) {
  $( ".selector" ).accordion( "option", "active", -1 )
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:32:08.383

对于简单的手风琴，我有两种不同的方法；第一个带有关闭按钮，第二个带有悬停触发器。

**1）**这是带有[**关闭**](http://jsfiddle.net/gWcFD/66/)[按钮的](http://jsfiddle.net/gWcFD/66/)[JsFiddle 示例：](http://jsfiddle.net/gWcFD/66/)

 ****jQuery：**

```
$('.content').slideUp(400);//reset panels

$('.panel').click(function() {//open
   var takeID = $(this).attr('id');//takes id from clicked ele
   $('#'+takeID+'C').slideDown(400);
                             //show's clicked ele's id macthed div = 1second
});
$('span').click(function() {//close
   var takeID = $(this).attr('id').replace('Close','');
   //strip close from id = 1second
    $('#'+takeID+'C').slideUp(400);//hide clicked close button's panel
});​ 
```

**html:**

```
<div class="panel" id="panel1">panel1</div>
<div id="panel1C">content1
  <span id="panel1Close">X</span>
</div>
<div class="panel" id="panel2">panel2</div>
<div id="panel2C">content2
  <span id="panel2Close">X</span>
</div>
<div class="panel" id="panel3">panel3</div>
<div id="panel3C">content3
  <span id="panel3Close">X</span>
</div> 
```

## --------

​2 **）**这是带有[**悬停**](http://jsfiddle.net/gWcFD/68/)[触发器的](http://jsfiddle.net/gWcFD/68/)[JsFiddle示例：](http://jsfiddle.net/gWcFD/68/)

 **```
$('.panel').hover(function() {
   var takeID = $(this).attr('id');//takes id from clicked ele
   $('.content').stop(false,true).slideUp(400);//close
   //used stop for prevent conflict
   $('#'+takeID+'C').stop(false,true).slideDown(400);//open
   //show's clicked ele's id macthed div
});​ 
```****

# logging - Groovy - 根据环境配置日志记录属性

> ID：11504197
> 
> 赞同：2
> 
> 时间：2012-07-16T12:20:06.993
> 
> 标签：logging, groovy, log4j

我正在编写一个简单的 Groovy 应用程序，它需要进行一些日志记录。如何记录事物的实际属性将取决于特定的环境。例如，在开发时我只想登录到控制台，在测试和生产中我可能想写入文件，而在生产中我可能想为最严重的事件发送电子邮件。

现在我在做什么看起来像这样：

```
import org.apache.log4j.Logger
import org.apache.log4j.PropertyConfigurator

class BaseClass {
    protected config

    static Logger logger = Logger.getLogger(BaseClient.class)

    def BaseClass(env) {
        def configFilePath = // whatever

        config = new JsonSlurper().parseText(configFile.text)[options.env]

        def logConfigFilePath = ['somelogdir', config.log_file].join(File.separator)
        PropertyConfigurator.configure(logConfigFilePath)
    }
} 
```

然后我所有需要进行日志记录的类都继承自`BaseClass`.

通过这种方式，我可以为每个环境指定不同的文件名，然后我可以从那里读取日志配置。但它似乎有很多样板，并迫使我使用可能不理想的层次结构。

另一方面，[在这里](http://www.canoo.com/blog/2010/09/20/log-groovys-new-and-extensible-logging-conveniences/)我看到我可以获得一个带有简单注释的记录器。

> 有没有办法根据环境获取不同的记录器 - 可以在运行时设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T19:45:51.660

基于 tim_yates 的回答，使用 groovy 文件来配置 log4j。例如：

```
// log4j.groovy
log4j {
    rootLogger="DEBUG, A1"
    appender.A1 = "org.apache.log4j.ConsoleAppender"
    appender.'A1.layout' = "org.apache.log4j.PatternLayout"

    if (System.properties['env'] == 'prod') {
        appender.'A1.layout.ConversionPattern'="prod %-4r [%t] %-5p %c %x - %m%n"
   } else {
        appender.'A1.layout.ConversionPattern'="dev %-4r [%t] %-5p %c %x - %m%n"
   }
} 
```

然后让你的脚本使用它：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='log4j', module='log4j', version='1.2.17')

import groovy.util.logging.Log4j
import org.apache.log4j.PropertyConfigurator

@Log4j
class Test {
    def dosome() {
        log.info('Logging!')
    }

    static main( args ) {
        def config = new ConfigSlurper().parse(new File('log4j.groovy').toURL())
        PropertyConfigurator.configure(config.toProperties())

        new Test().dosome()
    }
} 
```

最后，使用系统属性中的环境启动您的程序：

```
groovy -Denv=prod Test.groovy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T14:09:02.500

您应该能够简单地将`log4j.properties`文件放在类路径中。

鉴于此测试脚本：

```
@groovy.util.logging.Log4j
class Test {
  def dosome() {
    log.info( 'Logging!' )
  }

  static main( args ) {
    new Test().dosome()
  }
} 
```

如果我从命令行运行它：

```
groovy -cp log4j-1.2.17.jar Test.groovy 
```

它不打印任何内容，因为默认情况下它没有设置为记录 INFO 消息。

但是，如果我编写一个 log4j.properties 文件（[取自 log4j 的文档](http://logging.apache.org/log4j/1.2/manual.html#Configuration)并更改为 log ）：

```
log4j.rootLogger=DEBUG, A1

log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout

# Print the date in ISO 8601 format
log4j.appender.A1.layout.ConversionPattern=%d [%t] %-5p %c - %m%n 
```

然后在类路径中使用此属性文件再次运行它：

```
groovy -cp log4j.properties:log4j-1.2.17.jar Test.groovy 
```

我们得到：

```
2012-07-16 16:08:47,524 [main] INFO  Test - Logging! 
```

# java - 在 bootstartup 时通过 Java 代码删除工作流

> ID：11504202
> 
> 赞同：0
> 
> 时间：2012-07-16T12:20:23.717
> 
> 标签：java, workflow, alfresco, bootstrapping

我需要在启动时通过 Java 代码删除工作流。我的代码在运行时正常工作，但如果我在启动时运行它会抛出异常。我应该怎么做才能通过 Java 代码在启动时删除工作流？

例如：

*我的示例上下文.xml：*

```
<bean id="my-example" class="MyExamle" init-method="init">
        <property name="workflowService">
            <ref bean="WorkflowService"/>
        </property>
</bean> 
```

*MyExamle.java：*

```
public class MyExamle {
    ...
    private WorkflowService workflowService;

    public void init() {
        PropertyCheck.mandatory(this, "workflowService", workflowService);

        AuthenticationUtil.runAs(new AuthenticationUtil.RunAsWork<Integer>() {
            @Override
            public Integer doWork() throws Exception {
                 Integer count = 0;
                 WorkflowDefinition reviewDef = workflowService.getDefinitionByName(
                            "activiti$activitiReview"
                 );
                 List<WorkflowInstance> workflowInstanceList = workflowService.getActiveWorkflows(
                            reviewDef.getId()
                 );
                 count = workflowInstanceList.size();
                 for (WorkflowInstance workflowInstance : workflowInstanceList) {
                          workflowService.deleteWorkflow(
                                workflowInstance.getId()
                          );
                 }
                 return count;
            }
        }, AuthenticationUtil.getSystemUserName());
    }
    ...
} 
```

此代码抛出异常：org.alfresco.service.namespace.NamespaceException：命名空间前缀 wf 未映射到命名空间 URI

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mrem-extention-bootstartup' defined in URL [jar:file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/lib/moldavia-rem.jar!/alfresco/extension/mrem-bootstartup-context.xml]: Invocation of init method failed; nested exception is org.alfresco.service.namespace.NamespaceException: Namespace prefix wf is not mapped to a namespace URI
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.alfresco.web.app.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:63)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:637)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.alfresco.service.namespace.NamespaceException: Namespace prefix wf is not mapped to a namespace URI
    at org.alfresco.service.namespace.QName.createQName(QName.java:99)
    at org.alfresco.service.namespace.QName.createQName(QName.java:121)
    at org.alfresco.repo.workflow.WorkflowQNameConverter.convertNameToQName(WorkflowQNameConverter.java:103)
    at org.alfresco.repo.workflow.WorkflowQNameConverter.convertNameToQName(WorkflowQNameConverter.java:85)
    at org.alfresco.repo.workflow.WorkflowQNameConverter.mapNameToQName(WorkflowQNameConverter.java:71)
    at org.alfresco.repo.workflow.WorkflowObjectFactory.getTaskTypeDefinition(WorkflowObjectFactory.java:409)
    at org.alfresco.repo.workflow.WorkflowObjectFactory.createTaskDefinition(WorkflowObjectFactory.java:209)
    at org.alfresco.repo.workflow.activiti.ActivitiTypeConverter.getTaskDefinition(ActivitiTypeConverter.java:155)
    at org.alfresco.repo.workflow.activiti.ActivitiTypeConverter.convert(ActivitiTypeConverter.java:144)
    at org.alfresco.repo.workflow.activiti.ActivitiWorkflowEngine.getDefinitionByName(ActivitiWorkflowEngine.java:487)
    at org.alfresco.repo.workflow.WorkflowServiceImpl.getDefinitionByName(WorkflowServiceImpl.java:342)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.alfresco.repo.security.permissions.impl.AlwaysProceedMethodInterceptor.invoke(AlwaysProceedMethodInterceptor.java:34)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:46)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:147)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy71.getDefinitionByName(Unknown Source)
    at ru.moldavia.alfresco.workflow.WorkflowFactory.removeAllActivitiReviewWorkflow(Unknown Source)
    at ru.moldavia.alfresco.workflow.WAO.removeAllNotificationWorkflows(Unknown Source)
    at ru.moldavia.alfresco.workflow.bootstartup.WorkflowBootstartupExtention.extend(Unknown Source)
    at ru.moldavia.alfresco.bootstartup.ExtentionBootstartup.runExtentions(Unknown Source)
    at ru.moldavia.alfresco.bootstartup.ExtentionBootstartup.init(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1544)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:44:32.403

我认为您提供的例外与您的问题无关。检查您的数据模型定义。

在所有情况下 - 回到你的问题 - 尝试使用 onBootstrap() 而不是 init()，只需扩展[AbstractLifecycleBean](http://www.springsurf.org/sites/1.0.0.CI-SNAPSHOT/apidocs/org/springframework/extensions/surf/util/AbstractLifecycleBean.html)类并覆盖 onBootstrap(ApplicationEvent event) 和 onShutdown(ApplicationEvent event)。调用 init() 时可能存在未初始化的 Alfresco 系统部分。

# iphone - 我在滚动视图上使用 UITextView ......我希望它在我写东西时自动扩展......

> ID：11504211
> 
> 赞同：2
> 
> 时间：2012-07-16T12:21:04.940
> 
> 标签：iphone

```
textViewBusiness = [[UITextView alloc] initWithFrame:CGRectMake(25,332,268,60)];
textViewBusiness.text=strMyBusiness;
textViewBusiness.editable=NO;
textViewBusiness.font = [UIFont fontWithName:@"Arial" size: 17.0];
textViewBusiness.layer.borderWidth = 2.0f;
textViewBusiness.layer.borderColor = [[UIColor grayColor] CGColor];
textViewBusiness.backgroundColor = [UIColor clearColor];
[textViewBusiness setTextColor:[UIColor blackColor]];
[self.scrollView addSubview: textViewBusiness];

CGRect frame = textViewBusiness.frame;
frame.size.height = textViewBusiness.contentSize.height;
textViewBusiness.frame = frame; 
```

随着内容的增加，我想增加文本字段的大小....

这段代码对我不起作用...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:03:57.893

您无需考虑`UITextView`显示不可编辑的文本。除此之外，您可以使用 UILabel 并且可以在运行时找出标签的高度。每次内容的大小不同，设置`UILabel`相应的框架。

使用它在运行时找出标签的高度

```
- (CGFloat) heightOfTextLabel:(NSString *) contentText
{
    CGSize constraint = CGSizeMake(268,4000);

    CGSize size = [contentText sizeWithFont:[UIFont fontWithName:@"Arial" size: 17.0] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

     return size.height;       
} 
```

此方法每次都会为您返回可变高度的内容。

现在将此高度设置为您的`UILabel`

```
CGFloat heightOfLabel = [self heightOfTextLabel:strMyBusiness];

UILabel* textToShowLabel = [[UILabel alloc] initWithFrame:CGRectMake(25,332,268,heightOfLabel)];

textToShowLabel.text=strMyBusiness;

textToShowLabel.font = [UIFont fontWithName:@"Arial" size: 17.0];

textToShowLabel.layer.borderWidth = 2.0f;

textToShowLabel.layer.borderColor = [[UIColor grayColor] CGColor];

textToShowLabel.backgroundColor = [UIColor clearColor];

[textToShowLabel setTextColor:[UIColor blackColor]];

[self.scrollView addSubview: textToShowLabel]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:27:59.040

`GrowingTextView`是一个可重复使用的 iOS 组件，可以满足您的需求，您可以在 GitHub 上找到[它](https://github.com/HansPinckaers/GrowingTextView "这里")。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:28:09.337

您需要将代码分成 2 个片段，然后将它们放在适当的位置，然后您的代码应该可以工作。

片段 1（在我的测试中，我将此片段放在 viewDidLoad 中）：

```
textViewBusiness = [[UITextView alloc] initWithFrame:CGRectMake(25,332,268,60)];
textViewBusiness.text=strMyBusiness;
textViewBusiness.editable=NO;
textViewBusiness.font = [UIFont fontWithName:@"Arial" size: 17.0];
textViewBusiness.layer.borderWidth = 2.0f;
textViewBusiness.layer.borderColor = [[UIColor grayColor] CGColor];
textViewBusiness.backgroundColor = [UIColor clearColor];
[textViewBusiness setTextColor:[UIColor blackColor]];
[self.scrollView addSubview: textViewBusiness]; 
```

确保上面的片段运行，并且您的文本视图显示在屏幕中，然后运行第二个片段。如果你的文本视图没有显示在屏幕上，那么 contentView 没有被初始化，并且高度是未定义的。

片段 2（在我的测试中，我将此片段放入`viewDidAppear`）：

```
CGRect frame = textViewBusiness.frame;
frame.size.height = textViewBusiness.contentSize.height;
textViewBusiness.frame = frame; 
```

祝你好运！

# c# - 如何在c#中将空间转换为非破坏空间实体

> ID：11504222
> 
> 赞同：2
> 
> 时间：2012-07-16T12:21:49.680
> 
> 标签：c#

我想通过 c#`spaces`将字符串中的更多内容转换为？`&nbsp;`

就像如果字符串是

```
 My name  is this. 
```

那么输出应该是

```
 My name &nbsp;is this. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-08-06T11:40:36.330

将“常规”空格替换为“不间断空格”UTF-8 实体：

```
string outputString = "Input text".Replace(" ", "\u00A0"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T12:25:24.717

如果您需要将**多个空格**转换为**单个不间断**空格，请尝试使用 RegEx ：

```
string convertedText =
    new Regex("[ ]{2,}").Replace(textToConvert, "&nbsp;"); 
```

例子：

```
我的名字是这个
  ^ ^^^ ^

```

将改为：

```
My Name &nbsp;is this 
```

**更新**
如果您需要保留额外的空格（并且只用 nbsp 替换多个空格），您可以使用[这个正则表达式](https://stackoverflow.com/questions/2372825/java-regex-that-only-replaces-multiple-whitepaces-with-non-breaking-spaces)：

```
string convertedText =
    new Regex(" (?= )|(?<= ) ").Replace(textToConvert, "&nbsp;"); 
```

例子：

```
我的名字是这个
  ^ ^^^ ^

```

将改为：

```
My Name&nbsp;&nbsp;&nbsp;is this 
```

对于第二种情况，作为替代方案，您甚至可能根本不使用正则表达式（只是循环），但如果您必须经常使用相同的正则表达式，它们应该会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:22:41.990

更正下面的行将不起作用

请使用 Server.HtmlEncode

您将不得不通过代码来完成

```
string s = " ";
if(s == " ")
{
 s = "&nbsp;"
}

Or use "My name  is this".Replace(" ", "&nbsp;"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T12:25:32.347

试试这个

```
string myString = "My name  is this".Replace("  ", " &nbsp;"); 
```

# java - Eclipse/Java/Android - 使用调试器查看位图

> ID：11504224
> 
> 赞同：1
> 
> 时间：2012-07-16T12:21:54.057
> 
> 标签：java, android, eclipse

在使用调试器时，是否可以查看位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:26:36.200

是的你可以。只需在运行时在本地硬盘上写入位图字节，您就可以预览它。

# java - 使用 PopUp 进行动态日期验证

> ID：11504228
> 
> 赞同：0
> 
> 时间：2012-07-16T12:22:06.393
> 
> 标签：java, javascript, validation, date

我有一个代码以格式的形式验证日期。这会`MMYY`在提交按钮之前显示动态弹出对话框。为此，代码如下：

```
<ext:text name="caseDetailForm" property="phaseData.phaseDateExpiration" styleId="_dateExp"
                    style="width:100px" maxlength="4" titleKey="prompt.exp.date" onkeyup="validateCardExpiry(this);" /> 
```

功能是：

```
function validateCardExpiry(field) {
    var cardExpRegEx1or2char = /^(0[1-9]?|1[0-2]?)$/;
    var cardExpRegEx3or4char = /^(0[1-9]?|1[0-2])[0-9]?[0-9]?$/;
    var cardExpDate = field.value;
    var msg = '<bean:message key="errors.bad.input.characters.detected"/> - '+cardExpDate;
        + '\n' + "<bean:message key="prompt.exp.date"/>";
    var failed = false;
    for (var x = cardExpDate.length; x >= 0; x--) {
        cardExpDate = cardExpDate.substring(0, x);
        if (cardExpDate.length > 0 && 
            ((cardExpDate.length <= 2 && !cardExpRegEx1or2char.test(cardExpDate)) 
            || (cardExpDate.length > 2 && !cardExpRegEx3or4char.test(cardExpDate)))) {
            failed = true;
        }
        else {
            field.value = cardExpDate;
            break;
        }
    }
    if (failed) {
        alert(msg);
    }
} 
```

验证`MMYY`在上面的代码中工作正常。但我需要`MM/DD/YYYY`验证。为此，我如何在同一场景中使用弹出窗口进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:28:07.277

您可以执行以下操作：

```
function validateDate(s) {
  var bits = s.split('/');
  var d = new Date(bits[2], ++bits[0], bits[1]);
  return d.getFullYear == bits[2] && d.getDate == bits[1];
} 
```

但是格式 mm/dd/yyyy 并没有被很多人使用，大多数人使用 dd/mm/yyyy 或 yyyy-mm-dd。

# java - 连接表的休眠条件

> ID：11504229
> 
> 赞同：0
> 
> 时间：2012-07-16T12:22:13.457
> 
> 标签：java, hibernate, many-to-many

帮我Hibernate Guru ..我有2个关系类，我们叫A类和B类

```
@Entity
@Table(name="A")
public class A extends Serializable{

      @Id
      @Column(name="a_id")
      private int id;
      @Column(name="a_name")
      private String name;

     /*
      *.....Setter and Getter
      */
}

@Entity
@Table(name="B")
public class B extends Serializable{

      @Id
      @Column(name="b_id")
      private int id;
      @ManyToMany(
          fetch= FetchType.EAGER,
          targetEntity=package.A.class,
          cascade={CascadeType.ALL}
      )
      @JoinTable(
          name="B_A",
          joinColumns=@JoinColumn(name="b_id"),
          inverseJoinColumns=@JoinColumn(name="a_id")
      )
      @Fetch(FetchMode.SUBSELECT)
      private List<A> list;

     /*
      *.....Setter and Getter
      */
} 
```

Hibernate 会生成 3 个表 A、B 和 B_A。与表 B_A 有 2 个外键，主键表 A 的一个外键和主键表 B 的另一个外键，

我想从表 A 中选择数据，例如查询：

```
select * from A a inner join B_A ba on ba.a_id = a.id inner join B b on b.b_id = ba.b_id where b.id in(?, ?, ?, ?) 
```

那么我必须如何创建标准代码？？？？对于预期的列表结果列表，我想使用 Transformer。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:31:49.017

尝试这个：

```
criteria.createCriteria(A.class)
.createCriteria("id", "join_between_a_b")
.add(Restrictions.eq("some_field_of_A", someValue)); 
```

请记住，A 和 B 必须具有`id`作为它们的标识符才能使它们加入。我的意思是你喜欢A类的任何东西，
例如。您可以对这些类的任何属性进行限制。`some_field_of_A``name`

# php - jQuery基于表单ID序列化表单更新MySQL？

> ID：11504230
> 
> 赞同：1
> 
> 时间：2012-07-16T12:22:17.570
> 
> 标签：php, jquery, forms, serialization

我填充了一个`<form>`使用 PHP while 循环的列表，并用来自 MySQL 的值填充字段。现在我希望能够一`submit`键更新所有表单。

表单在 HTML 中看起来像这样（注意，在我的实际页面上有多个这样的。唯一不同的是`<form id='X'>`：

```
<form id='34' name='customercontact' method='post' action='customerUpdate.php'>
    Förnamn: <br /><input type='text' name='contact_firstname' class='textbox' value='text....'>
    Efternamn: <br /><input type='text' name='contact_lastname' class='textbox' value='text....'>
    Telefonnummer: <br /><input type='text' name='contact_phone' class='textbox' value='text....'>
    Mobiltelefon: <br /><input type='text' name='contact_cellphone' class='textbox' value='text....'>
    E-mail: <br /><input type='text' name='contact_email' class='textbox' value='text....'>
        <select name='isActive'>
            <option value="0" selected>Inaktiv</option>
            <option value="1">Aktiv</option>
        </select>
</form> 
```

如何使用 jQuery 序列化将每个表单和所有值作为字符串发送？我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:25:38.943

您可以选择页面上的所有表单`$('form')`，然后通过 AJAX 遍历它们并“提交”值。

**更新：**

```
<script type="text/javascript">
$(document).ready(function() {
    $('#customer_contact_save').live('click', function(e){
        e.preventDefault(); // prevent form submit
        $.each($('form'), function(index) { 
            var sData = $(this).serialize(); // get data from form for submit
            $.ajax({
                type: "POST",// path to php script that saves data to db
                url: "some.php",
                data: sData,
                success: function(someMessageFromPhp) {
                    alert(someMessageFromPhp); // alert to user what some.php returned
                }
            });
        });
    });
});
</script> 
```

# c# - 使用 ajaxcontroltoolkit html 编辑器的 system.security.securityexception 请求失败

> ID：11504232
> 
> 赞同：0
> 
> 时间：2012-07-16T12:22:21.303
> 
> 标签：c#, ajaxcontroltoolkit, asp.net-4.0, html-editor

我在我的 asp.net 项目中使用 ajaxcontroltoolkit html 编辑器。它在我的本地计算机上运行，​​但是当我部署时，它返回 system.security.securityexception。

你有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:13:23.570

> 您可以使用 [assembly:attribute] 机制将属性放在程序集上。如果您有一个类项目，这通常在属性文件夹中的 AssemblyInfo.cs 文件中完成，如下所示。请注意，您可以在项目的任何文件中执行此操作。

这是我从 AJAX 控制工具包团队的 Scott Hunter 那里得到的回复。这有帮助吗？我已经走了很多年，但仍在处理这个问题。如果 AJAX 团队提供的解决方案更具描述性，将会有所帮助。不知道如何解决。

问题是由“ScriptsCombine”引起的——在中等信任环境中，工具包必须没有权限组合所有脚本并将它们写入文件系统。

也请关注这里：[http ://ajaxcontroltoolkit.codeplex.com/workitem/26772](http://ajaxcontroltoolkit.codeplex.com/workitem/26772)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:02:50.423

[我在这里找到了答案：](http://social.msdn.microsoft.com/Forums/en/clr/thread/b83773f5-dd97-4c7b-aebf-897ade8db684)

它是关于 ajaxcontroltoolkit.dll

# java - 在 Slick Graphics API 中更改默认字体

> ID：11504233
> 
> 赞同：0
> 
> 时间：2012-07-16T12:22:23.617
> 
> 标签：java, fonts, font-size, slick2d

我正在尝试更改 Slick Graphics API 的默认字体以简单地绘制我正在编写的游戏的标题，但我似乎无法让它工作（它不绘制任何东西，只是让屏幕保持空白）。我想使用一种标准的 Java 字体（Verdana）。

这是我用来设置字体的代码：

```
import java.awt.Font;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.UnicodeFont;

public class Controller extends BasicGame {
UnicodeFont uFont;

@Override
public void render(GameContainer container, Graphics g) throws SlickException {
    g.setFont(uFont);
    g.setColor(Color.white);
    g.drawString("Hello World!", 50, 50);
}

@Override
public void init(GameContainer container) throws SlickException {
    //Set font
    Font font = new Font("Serif", Font.PLAIN, 20);
    uFont = new UnicodeFont(font, font.getSize(), font.isBold(), font.isItalic());
}

/**
 * @param args
 * @throws SlickException 
 */
public static void main(String[] args) throws SlickException {
    //Set up application
    Controller c = new Controller("Tetris");
    AppGameContainer app = new AppGameContainer(c);
    app.setDisplayMode(500, 800, false);

    //Start application
    app.start();
}
} 
```

经过自己多次尝试，我正在使用本网站底部的代码：

[http://slick.javaunlimited.net/viewtopic.php?t=3508](http://slick.javaunlimited.net/viewtopic.php?t=3508)

我的问题是：如何更改 Slick 中的默认字体，并将该字体的文本绘制到我的游戏标题的屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:32:05.507

`Slick-Util`使用 Java 的内置字体支持来加载字体。您可以使用默认的内置 java 字体或加载外部 ttf 文件。

字体通过 slick's 存储和绘制`TrueTypeFont class`。

**请参阅忍者洞穴中的这段代码：**

```
TrueTypeFont font;
TrueTypeFont font2;

public void init() {
    // load a default java font
    Font awtFont = new Font("Times New Roman", Font.BOLD, 24);
    font = new TrueTypeFont(awtFont, false);

    // load font from a .ttf file
    try {
        InputStream inputStream = ResourceLoader.getResourceAsStream("myfont.ttf");

        Font awtFont2 = Font.createFont(Font.TRUETYPE_FONT, inputStream);
        awtFont2 = awtFont2.deriveFont(24f); // set font size
        font2 = new TrueTypeFont(awtFont2, false);

    } catch (Exception e) {
        e.printStackTrace();
    }   
} 
```

有关更多详细信息，请查看以下站点：

[http://ninjacave.com/slickutil1](http://ninjacave.com/slickutil1)

# clojure - 作为数据容器，vector和list的主要区别是什么

> ID：11504236
> 
> 赞同：26
> 
> 时间：2012-07-16T12:22:34.880
> 
> 标签：clojure

假设我们需要一个数字列表，有两个定义：

```
(def vector1 [1 2 3])
(def list2 '(1 2 3)) 
```

那么主要的区别是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-16T13:18:32.563

是`[1 2 3]`一个[向量](http://clojure.org/data_structures#Data%20Structures-Vectors%20%28IPersistentVector%29)，而是`'(1 2 3)`一个[列表](http://clojure.org/data_structures#Data%20Structures-Lists%20%28IPersistentList%29)。这两种数据结构有不同的性能特征。

向量提供对其元素的快速、索引随机访问，并在索引处及时`(v 34)`返回向量的元素。另一方面，修改向量通常更昂贵。`v``34``O(1)`

列表很容易在头部和/或尾部修改（取决于实现），但提供对元素的线性访问：`(nth (list 1 2 3 4 5) 3)`需要对列表进行顺序扫描。

有关性能权衡的更多信息，您可以谷歌“向量与列表性能”或类似的东西。

[跟进]

好的，让我们更详细地介绍一下。首先，*向量*和*列表*不是 Clojure 特有的概念。与*地图*、*队列*等一起，它们是数据集合的抽象类型。对数据进行操作的算法是根据这些抽象定义的。*向量*和*列表*是由我在上面简要描述的行为**定义**的（即，如果某个东西*有大小，那么它**就是*一个向量，您可以通过常数时间的索引来访问它的元素等）。

 *Clojure 与任何其他语言一样，希望在提供以这种方式调用的数据结构时满足这些期望。如果你看一下 in 的[基本](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentVector.java#L110)[实现`nth``vector`](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentVector.java#L110)，你会看到一个`arrayFor`复杂度为*O(log [32] N)*的方法调用和一个在 Java 数组中查找*O(1)*的方法。

为什么我们可以说这`(v 34)`实际上是*O(1)*？因为Java的*log [32]*最大值`int`约为**7**。这意味着对向量的随机访问*实际上*是常数时间。

`vectors`总而言之，和`lists`真的主要区别在于*性能*特征。此外，正如 Jeremy Heiler 所指出的，在 Clojure 中，行为存在逻辑上的差异，即关于使用[`conj`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/conj).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-16T15:04:44.980

列表和向量之间有两个主要区别。

1.  列表在逻辑上在头部增长，而向量在逻辑上在尾部增长。您可以在使用该`conj`功能时看到这一点。它将根据给它的集合类型来增长集合。虽然您可以在任一侧增加集合，但以这种方式这样做是高效的。

2.  为了检索列表中的第 n 个项目，需要从头开始遍历列表。另一方面，向量不会被遍历并返回 O(1) 中的第 n 个项目。（它确实是 O(log32n) 但这是由于集合是如何作为持久集合实现的。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-04T12:51:10.390

*   向量将所有数据项保存在内存的相邻区域中，与列表相比，使整个向量的传输变得容易，并且插入或删除项的成本很高。

*   列表保存项目是不相交的内存区域，使得整个列表的传输成本很高，但单个项目的插入和删除相对便宜。

*   经典向量的大小也是固定的，并且仅限于 N 个项目，而列表可以动态增长和收缩。

*   向量还提供对元素项的索引访问。列表没有。经典向量的前身是一个数组。
*   向量的现代实现通常旨在提供类似的特征，但底层数据结构实际上可能是列表或散列，并且这些向量通常支持动态调整大小。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-16T14:28:04.507

矢量评估时间不是 O(1) 它是 log32N

向量 (IPersistentVector) 向量是由连续整数索引的值的集合。向量支持按 log32N 跃点中的索引访问项目。计数为 O(1)。conj 将项目放在向量的末尾。向量还支持 rseq，它以相反的顺序返回项目。对于一个参数的invoke()，向量实现IFn，它们假定它是一个索引，并在自身中查找，就好像第n个一样，即向量是它们索引的函数。*

# c# - 在 UI 线程中进行计算时的进度窗口

> ID：11504243
> 
> 赞同：0
> 
> 时间：2012-07-16T12:22:57.827
> 
> 标签：c#, wpf, multithreading, ui-thread

我想实现这一点：

1.  创建一个新窗口，它只是一个旋转加载器和一些静态文本，并显示它。
2.  在 UI 线程上做一些计算（必须在那里完成）
3.  关闭加载程序窗口

目前，当我在加载程序窗口上调用 .Show() 时，它根本不加载，它只是作为一个空白窗口挂出（UI 线程被阻塞，我不想要）

我可以做些什么来使加载程序窗口在我的计算完成的同时显示其内容？

```
private void CopyToClipboard(object sender, RoutedEventArgs e)
    {
        var selected = mDataGrid.SelectedItem;
        var selectedIndex = mDataGrid.SelectedIndex;
        var progressWindow = mProgressDialog.Create(this,"Copying data to clipboard");
        progressWindow.Show();
        try
        {

            mDataGrid.ClipboardCopyMode = DataGridClipboardCopyMode.IncludeHeader;
            mDataGrid.SelectionMode = DataGridSelectionMode.Extended;
            mDataGrid.SelectAllCells();  // SLOW !!!!
            ApplicationCommands.Copy.Execute(null, mDataGrid); //SLOW !!!!
        }
        catch (Exception ex)
        {
            mLog.Error("Copying to clipboard", ex);
            MessageBox.Show("Error while copying to clipboard");
        }
        finally
        {
            mDataGrid.SelectionMode = DataGridSelectionMode.Single;
            mDataGrid.UnselectAllCells();
            this.Select(selectedIndex, selected);
            progressWindow.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:29:34.110

正如您所说，您的计算是在 UI 线程上完成的，这就是为什么您的窗口是空白的，由于 UI 线程很忙，它没有“重新绘制”。

因此，除非您在另一个线程上进行长时间运行的计算，否则您将陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:29:30.427

我唯一能做到的是：

```
progressWindow.Show();
this.DoEvents();

public static void DoEvents(this Window _)
    {
        Application.Current.Dispatcher.Invoke(DispatcherPriority.Background,
                                              new Action(delegate { }));
    } 
```

“加载器窗口”至少会显示出来，因此用户知道正在发生一些事情。它通常持续不到一秒钟，所以这个解决方案对我来说是可以接受的。

# sql - 如何执行 GROUP BY SUM()

> ID：11504247
> 
> 赞同：1
> 
> 时间：2012-07-16T12:23:04.097
> 
> 标签：sql, group-by

```
SELECT x,y,SUM(f)-SUM(g) 
FROM a,b 
WHERE a.x = b.x 
GROUP BY SUM(f)-SUM(g)
HAVING SUM(f)-SUM(g)>1 
```

尝试使用 GROUP BY x 时，它可以工作，但我怎样才能 GROUP BY SUM(f)-SUM(g) ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:27:32.940

您不需要按聚合列分组。你需要的是

```
SELECT x,y,SUM(f)-SUM(g)  
FROM a,b  
WHERE a.x = b.x  
GROUP BY x,y 
HAVING SUM(f)-SUM(g)>1 
```

# mondrian - 使用 olap4j Api 获取 Mdx 中维度的根级别

> ID：11504250
> 
> 赞同：0
> 
> 时间：2012-07-16T12:23:09.497
> 
> 标签：mondrian, olap4j

我有一个问题真的要死我了。顺便说一句，我是 Mdx 的新手，并且使用 olap4j Api 来构建 MDX 查询。我的问题是根元素，以下是代码片段：

```
 Query myQuery = new Query("Generated Query", sales); // where sales is an object of type cube.
QueryDimension productDimension = myQuery.getDimension("Product"); 
```

所以现在我有一个使用维度 Product 的对象。当我添加到轴时，我希望这样的东西`[Product].[All Products]`成为 MdxQuery 的一部分。`productDimension`我可以硬编码`[All Products]`，但如果传递的维度名称不是产品，比如商店，这将是一个问题。所以我想要的是，是否有可能获取一些名称，例如 [所有产品] 或 [所有商店] 或 [确定措施] 相当于 [所有措施] 动态使用 olap4j？

PS：这是一个方法，它接受维度名称并返回维度的第一个成员，如 [Product].[All Products] 如果产品通过或 [Measures].[AllMeasures/someMeasure] 如果通过措施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:03:23.057

我能够弄清楚如何获取根元素要获取诸如所有产品或基本上所有成员名称之类的东西，那么我需要做一些如下所示的事情：

说，我想要productDimension[产品维度类型的对象]的所有成员名称，然后，

```
 Member allMember = productDimension.getDimension().getDefaultHierarchy().getRootMembers().get(0);

   productDimension.include(Selection.Operator.MEMBER, allMember); 
```

这样 allMember 将成为 Mdx 查询的一部分。

# java - SpringData 扩展 JpaSpecificationExecutor 错误

> ID：11504253
> 
> 赞同：0
> 
> 时间：2012-07-16T12:23:18.353
> 
> 标签：java, spring-data, spring-data-jpa

我有一个很奇怪的问题。在我的存储库中，我需要扩展`JpaSpecificationExecutor<T>`接口以便能够`findAll(Specification<T>, Pageable)`用于自定义查询分页。

但是，当我使用 JpaSpecificationExecutor 时，

```
public interface DescriptionRepository extends ParentRepositoryCustom<Description, Long>,
        JpaSpecificationExecutor<Description> {

} 
```

应用程序不会构建，抛出`No property count found for type class Description`异常。

我的`Description`班级没有计数属性。当我`JpaSpecificationExecutor`从存储库中删除时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:56:43.447

我遇到了同样的例外。就我而言，原因是 ParentRepositoryImpl 没有正确扩展 SimpleJpaRepository，它是 JpaSpecificationExecutor 的实现。因此，当 Spring 尝试解析查询名称时，它会排除属于 Spring 调用的实现的 repositoryBaseClass 的方法名称。它在 org.springframework.data.repository.core.support.DefaultRepositoryInformation 类中

```
public boolean isBaseClassMethod(Method method) {
    return isTargetClassMethod(method, repositoryBaseClass);
} 
```

检查 repositoryBaseClass 是否符合您的期望。它应该定义“计数”方法。

如果您不扩展正确的超类，则该方法（在您的情况下为“count”）不会从解析中排除，并且 Spring 会尝试通过根据其名称结构创建查询来构建查询......在这种情况下是名称片段针对您的实体属性进行测试。

# java - 使用复合外键一对多休眠注释

> ID：11504254
> 
> 赞同：2
> 
> 时间：2012-07-16T12:23:21.010
> 
> 标签：java, hibernate, orm, annotations

我对休眠注释映射有很大的问题。这是我的图表：

[![图表](../Images/a9e91d56c4513f1407032e0a90b1bd23.png)](https://i.stack.imgur.com/TWHQu.jpg)

至于映射对象，很少有人简单，因为它的 1...N 为：
`TASK_DEF -> REPORT_DATA`
`REPORT_DATA -> REPORT_DATA_COLUMN`
`REPORT_DATA -> REPORT_DATA_VALUE`
对吗？

现在的问题是当我尝试将 Collection 映射`REPORT_DATA_VALUE`到`REPORT_DATA_COLUMN`. 我试过这样：

```
@OneToMany(fetch = FetchType.LAZY)
@ForeignKey(name = "FK_REPORT_DATA_VALUE_REPORT_DA", inverseName = "PK_REPORT_DATA_COLUMN")
@JoinTable(name = "REPORT_DATA_VALUE", joinColumns = {
        @JoinColumn(name = "REPORT_DATA_ID"),
        @JoinColumn(name = "COLUMN_NM")
}, inverseJoinColumns = {
        @JoinColumn(name = "REPORT_DATA_ID"),
        @JoinColumn(name = "COLUMN_NM")
})    
List<ReportDataValue> reportDataValueList; 
```

但是hibernate选择了错误的标识，因此无法执行查询。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:48:07.303

你的代码有问题。试试这个：

```
@OneToMany(fetch = FetchType.LAZY)
@JoinTable(name = "REPORT_DATA_VALUE", joinColumns = {
    @JoinColumn(name = "REPORT_DATA_ID"),
}, inverseJoinColumns = {
    @JoinColumn(name = "COLUMN_NM")
})    
List<ReportDataValue> reportDataValueList; 
```

顺便说一句，如果我是你，我不会为一对多创建表。我会这样做：

```
public class A{
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="B_ID")
    B b;
}

public class B{
    @OneToMany(mappedBy="b",fetch=FetchType.EAGER)
    Set<A> as;
} 
```

# rally - 团队接力

> ID：11504256
> 
> 赞同：0
> 
> 时间：2012-07-16T12:23:31.443
> 
> 标签：rally

我正在编写报告，显示速度 - 与使用拉力 app2.0 SDK 的 scrum 团队的容量百分比。

我一直在寻找一种方法来获得团队的能力，但没有找到！任何人都可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:44:57.567

对于用户的 sprint 容量，您需要在 UserIterationCapacity 上进行查询。虽然以下示例的代码与 AppSDK 1.0 相关，但查询语法将与本文中概述的非常相似：

[如何根据迭代在 Rally 开发人员中查询团队成员姓名和能力？](https://stackoverflow.com/questions/11436392/how-to-query-team-member-name-and-capacity-in-rally-developer-depending-upon-ite)

以下是查询与特定感兴趣项目中特定 Sprint 对应的 UserIterationCapacity 的示例。

```
 var queryConfig = null;
        var projectOID = "12345678910";
        var selectedIteration = "My Iteration";

        var capacityQueryString = '((Iteration.Name = ' + '"' + 
                selectedIteration + 
                '") AND (Project.ObjectID = "' + 
                projectOID +
                 '"))';
        console.log(capacityQueryString);

        queryConfig = {
            key: "usercapacities", 
            type: "UserIterationCapacity", 
            fetch: "Capacity,User,Role,EmailAddress,DisplayName,UserName",
            query: capacityQueryString
        };

        rallyDataSource.findAll(queryConfig, processResults); 
```

# android - 由于eclipse在jni中显示错误，如何从eclipse中的Android项目中删除本机支持？

> ID：11504258
> 
> 赞同：26
> 
> 时间：2012-07-16T12:23:32.647
> 
> 标签：android, eclipse, android-ndk, java-native-interface

我不小心点击了“Android 工具”中的“添加本机支持”……这弄乱了我项目的所有 jni 文件。我该如何撤消它？如何从我的 Android 项目中删除本机支持？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-05-22T10:53:35.750

我能找到可靠地从项目中删除 C 特性的唯一方法是手动编辑项目的 Eclipse`.project`文件。

1.  关闭 Eclipse 项目（例如通过退出 Eclipse）。

2.  `.project`在文本或 xml 编辑器中打开文件。至少有 2`<buildCommand>`个节点需要移除。删除`<buildCommand>`具有名称的节点`org.eclipse.cdt.managedbuilder.core.genmakebuilder`及其所有子节点，以及`<buildCommand>`具有名称的节点及其子节点`org.eclipse.cdt.managedbuilder.core.ScannerConfigBuilder`。最后，删除以下行：

    `<nature>org.eclipse.cdt.core.cnature</nature>` `<nature>org.eclipse.cdt.core.ccnature</nature>` `<nature>org.eclipse.cdt.managedbuilder.core.managedBuildNature</nature>` `<nature>org.eclipse.cdt.managedbuilder.core.ScannerConfigNature</nature>`

3.  完全删除`.cproject`文件。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-16T23:43:35.560

使用新的 ADT 20，如果项目有 jni 文件夹或/和 Android.mk 文件，则默认情况下插件会添加 c++ 性质，

一般来说，要删除 C++ 性质，您只需要删除项目树中的 .cproject 文件，在工作区中删除并重新导入项目就可以了（C++ 项目性质已删除）。

但我认为你应该只添加宏定义并构建导入，eclipse 就可以正常工作。如果你去

```
Project properties->C/C++ general->Paths and symbols 
```

并在那里为相应平台添加 NDK 的路径（类似）

```
{NDK_PATH}/platforms/android-9/arch-arm/usr/include 
```

并且您所有的构建脚本都添加了导入以及任何构建脚本声明的宏 eclipse 都可以很好地处理 jni 的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-23T13:39:48.130

在文本编辑器中打开您的`.project`文件，然后删除 CDT 和 C 性质的条目。它们很容易与 JDT 区分开来。我已经这样做了好几次了，这并没有什么危险，但为了安全起见，请制作一个备份副本。

编辑： Project Properties -> Builders -> Remove CDT Builder 也有可能，但从未尝试过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-04T03:43:59.433

执行以下步骤，希望对您有所帮助。

在 Android 工具之后 -> 添加原生支持。它将在 jni 文件夹中生成 cpp 文件。而eclipse也无法解决。这是一种固定方式。

1.  第1步

    右键单击 PJ -> 添加新文件夹 -> 在对话框中添加新文件夹，单击高级>> 选中链接文件夹 -> 借入 [{NDK_PATH}/platforms/android-21/arch-arm/usr/include ] （我使用 android -21，可以改）(1)-->OK

2.  第2步

    右键单击 PJ -> 属性 -> C/CC 常规 -> 路径和符号 -> 包含选项卡 -> 添加 -> 工作空间 -> 在项目中选择包含文件夹 (1) -> 确定。刷新和重建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-31T08:28:58.290

只需删除 jni 文件夹并在 c/c++ 界面中清除项目

# shell - Makefile 外壳 grep

> ID：11504259
> 
> 赞同：0
> 
> 时间：2012-07-16T12:23:35.253
> 
> 标签：shell, variables, makefile, grep

```
$(BUILDDIR)/%.check: $(SRCDIR)/%.c
        $(eval pragma := $(shell grep "pragma" $< ))
        @echo $<: $(pragma) 
```

$(pragma) 变量始终为空字符串，即使对于包含 #pragma 的文件也是如此

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:47:46.563

有几件事是错误的。

1）您将 Make 语法放入命令中，该命令应采用 shell 语法。

2）您试图在一个命令中设置一个变量并在另一个命令中使用它（这不起作用，因为每个命令都在其自己的子shell中运行）。

3) 你尝试了一个复杂的命令，但没有测试它的简单组件（这会告诉你有问题）。

如果您想要做的只是显示`#pragma`线条，这将做到：

```
$(BUILDDIR)/%.check: $(SRCDIR)/%.c
    @echo $<: `grep "pragma" $<` 
```

如果您想用线条做一些更复杂的事情，请告诉我们它是什么，我们会看看我们是否可以提供帮助。

# android - Flurry 等分析服务能否向我提供有关用户拥有的设备类型的信息

> ID：11504260
> 
> 赞同：0
> 
> 时间：2012-07-16T12:23:36.780
> 
> 标签：android, analytics

为了了解我的客户，我应该将手机型号保存在我的数据库中，还是应该依靠 Flurry？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:30:00.577

Flurry 在技术部分提供了这种信息：

![在此处输入图像描述](../Images/cb49c7bf0173a7e0c1551bd7d7780355.png)

# optimization - 优化重新标记代码

> ID：11504261
> 
> 赞同：1
> 
> 时间：2012-07-16T12:23:39.120
> 
> 标签：optimization, google-apps-script

我们公司最近从 Exchange 2007 迁移到 Google Apps for Business。我们有几个共享邮箱具有相当复杂和广泛的文件夹结构，并被要求在这些邮箱中完全实施标签技术（以优化搜索）。

例如说，迁移后，曾经在 MyCompany/Projects/2012/Q3/Approved Projects/StackOverflow（文件夹结构）中的对话现在具有标签 MyCompany/Projects/2012/Q3/Approved Projects/StackOverflow。这里的意图是该对话必须使用标签 MyCompany、Projects、2012、Q3、Approved Projects、StackOverflow 进行标记。

我已经编写了一个完全执行此操作的脚本（至少在我的测试环境中）。问题是，根据我所阅读的内容，您可以对 Google API 执行的调用次数存在某些限制。此外，脚本执行时间非常非常差。

我想知道是否有办法以某种方式在客户端执行操作并将它们批量发送到谷歌 API。我已阅读有关缓存服务的信息，并且想知道我是否在寻找正确的方向。

这是我的脚本：

```
function addLabels() {
  //Get all labels
  var allLabels = GmailApp.getUserLabels();

  for (var i = 0; i < allLabels.length; i++) {
    var label = allLabels[i];//label to get the threads from
    var threads = label.getThreads();  //threads assigned with label
    var labels = label.getName().split("/");//array of new label names

    //add the new labels to the specified threads only if there's a "/" in the label's name
    if(label.getName().indexOf("/") != null){
      for (var a = 0; a < labels.length; a++){
        trace("Adding label '" + labels[a] + "' to "+ threads.length +" threads in '"+ label.getName() + "'.");

        //create a new label with the specified name and add it to the threads
        //var newLabel = GmailApp.createLabel(labels[a]);//comment this line for test purposes
        //newLabel.addToThreads(threads);//comment this line for test purposes
      }
    }
  }
}
function trace(message){
  Logger.log(message);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:00:53.803

您可能希望分阶段运行此脚本。第一阶段是确定所有需要创建的新标签以及应该分配给它们的线程。第二阶段是创建这些标签。最后阶段是将这些标签分配给线程。如果您正在处理大量电子邮件，您可能需要对这项工作进行分片，保留待处理的工作队列，并使用触发器继续处理。

# java - 在 Eclipse 中，如何获取 Java 字符串中的 SQL 文本？

> ID：11504265
> 
> 赞同：1
> 
> 时间：2012-07-16T12:23:46.027
> 
> 标签：java, sql, eclipse, string

我在 Java 字符串中有一个很长的 SQL 语句。在eclipse中，如何在没有Java String语法的情况下轻松获取SQL语句的文本？我一直在手动删除它，但在 IntelliJ Idea 中，无需执行任何手动格式化工作来删除 Java 字符串语法（例如`"`和`+`字符）即可获取文本。Eclipse 有类似的功能吗？

作为一个额外的好处，我会问是否也可以在 IDE 中格式化后，即使`\n`字符串本身不存在任何字符，也可以获取带有换行符的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:49:30.277

根据您的 SQL 客户端，它可能具有此功能。我知道 TOAD 内置了这个功能。我还记得松鼠有它。

因此，当粘贴到 TOAD 的 SQL 编辑器中时，代码会自动从 Java 字符串语法中提取出来。我记得它也适用于像 StringBuffer/StringBuilder 这样的结构。

请参阅：[http ://dev.toadformysql.com/webhelp/Content/Editor/Convert_SQL_Embedded_SQL.htm](http://dev.toadformysql.com/webhelp/Content/Editor/Convert_SQL_Embedded_SQL.htm)

或者您可以为您的示例代码创建一个简单的正则表达式，例如[这个 jsfiddle](http://jsfiddle.net/uhbxR/2/)。它适用于 sql 的正则表达式，例如：

```
"select something \r\n" +
"  from dual " +
 "where 1 = 1\r\n"; 
```

jsfiddle 应该输出

```
select something
  from dual
 where 1=1 
```

它的格式仍然不是很漂亮（即使使用`<pre>`标签它应该保留空格），但是您的 SQL IDE 应该可以帮助您，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T06:22:59.390

（我们正在使用开普勒）

1.  这个**`StringUtils`插件**看起来不错：[http](http://marketplace.eclipse.org/content/stringutils-plugin) ://marketplace.eclipse.org/content/stringutils-plugin （点击截图）。

    *   在 Eclipse 市场对话框中找不到安装
    *   从他们的 GIT 存储库下载了主 ZIP，但没有继续支持解决方案 5。
2.  与**`Java Multi-Line String Editor`插件**一起，编写/读取/调试此类 SQL 语句将非常容易：[https ://marketplace.eclipse.org/content/java-multi-line-string-editor](https://marketplace.eclipse.org/content/java-multi-line-string-editor)

    *   在 Eclipse 市场对话框中找不到安装
3.  另一个不错的解决方案似乎是**`Multiline`注释**，可以在其中维护 javadoc 中的字符串（在编译时将转换为格式正确的字符串）：[https ://github.com/benelog/multiline](https://github.com/benelog/multiline)

4.  **`*.sql`如果合适的话，在单独的文件中外部化大型字符串/SQL**（并从类路径中读取它们）将是第二个最佳选择：

    *   [https://stackoverflow.com/a/878648/1915920](https://stackoverflow.com/a/878648/1915920)
    *   [https://stackoverflow.com/a/878776/1915920](https://stackoverflow.com/a/878776/1915920)
5.  对**我们来说最好的解决方案**是在我们的 Java 代码旁边使用**Groovy**（“Java 脚本扩展”）：

    *   你需要安装**Groovy 插件** [https://github.com/groovy/groovy-eclipse/wiki](https://github.com/groovy/groovy-eclipse/wiki)
    *   只是说`New -> Groovy Class`将*Groovy Nature*自动添加到我们的项目中，然后，您可以将 SQL 实现为类似于以下的常量或枚举：
        *   支持 Java（编辑器）支持的几乎所有东西（甚至在 Java-Groovy 屏障之间）：
            *   代码高亮
            *   重构（重命名），但只能从 Groovy 文件中
            *   自动完成/-`CTRL+rightclick`导航
            *   Javadoc 提示

`src/my/pkg/SQLs.groovy`：

```
package my.pkg

class SQLs {

  /** comment X */
  static final String SEL_X = ```
    select
      bla,
      foo
    from
      bar
    where
      x in (1,2,3)
  ```
} 
```

`src/my/pkg/SqlExec.java`：

```
// ...
stmt.executeQuery( SQLs.getSEL_X() ) ;  /* Groovy auto-created this getSEL_X() 
                                        interface method transparently/auto-
                                        suggested, but the "comment X" is not 
                                        hinted */ 
```

更适合我们的用例是将 SQL 用作枚举：

```
enum SQLs {

  /** comment X */
  SEL_X(```
    select
      ...
      x in (1,2,3)
  ```)

  String sql

  SQLs( String sql ) { this.sql = sql }
} 
```

可以这样访问`src/my/pkg/SqlExec.java`：

```
// the JavaDoc comment "comment X" works and the getSql() is transparently 
// auto-generated by Groovy
stmt.executeQuery( SQLs.SEL_X.getSql() ) ; 
```

# 使用 DTP 在 Eclipse 中调试它还有更多的糖 :-)

=> 所以**调试这些 SQL 将非常简单**：

1.  **`SQLs.groovy`文件 => 打开 ... => 其他 => SQL 编辑器**（来自非常好的`Eclipse Data Tools Platform (DTP) plugin`：[https](https://eclipse.org/datatools/) ://eclipse.org/datatools/ ）

    *   您可以随时在编辑器之间切换（Eclipse 会记住每个文件的最后一次使用）
2.  从自定义的预配置数据库连接中为该文件选择正确的连接（如果尚未完成，则必须打开/连接）

3.  标记待调试的SQL +**`ALT+X`**

4.  将查询结果调试为选项卡式或纯文本结果...

# matlab - Matlab/Simulink：确定当前系统级别

> ID：11504268
> 
> 赞同：2
> 
> 时间：2012-07-16T12:23:53.077
> 
> 标签：matlab, simulink

在 Matlab/Simulink 中，是否有一种方便的方法来确定当前系统的深度，即一个必须跨越的系统块边界的数量才能从那里到达根级别？我想您可以通过计算斜杠的数量来获取当前系统的路径名`gcb`，但这似乎不是一种非常自然的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:57:21.190

您可以循环请求父级，直到系统没有父级，

```
depth = 1;
parent = get_param(system, 'Parent');

while ~isempty(parent)
  depth = depth + 1;
  parent = get_param(parent, 'Parent');
end 
```

我没有尝试过，但我认为它应该可以工作。

# javascript - 如何删除draw2d.js中的连接？

> ID：11504269
> 
> 赞同：1
> 
> 时间：2012-07-16T12:23:57.890
> 
> 标签：javascript, draw2d-js

我想删除 draw2d.js 中两个对象之间的连接。我试图找到删除连接的直接方法，但我没有找到它。所以请告诉我是否有任何方法或是否有任何方法可以删除或断开连接。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:03:16.060

没有`CommandStack`支持：

```
canvas.remove(connection); 
```

支持`CommandStack`（撤消/重做）：

```
var cmd =  new draw2d.command.CommandDelete(connection);
canvas.getCommandStack().execute(cmd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:45:05.713

```
 draw2d.ContextmenuConnection.prototype.getContextMenu = function() {    
     var menu = new draw2d.Menu();
     menu.appendMenuItem(new draw2d.MenuItem("Disconnect", null, function() {
         //draw2d.Connection.workflow.removeFigure(draw2d.Connection.prototype);
         var cmd =  new draw2d.CommandDelete(**draw2d.Connection**);
         draw2d.Connection.prototype.workflow.getCommandStack().excute(cmd);
     }));

 }; 
```

您必须将对象移交给 CommandDelete 的构造函数，而不是**draw2d.Connection**

见下文：

```
 draw2d.ContextmenuConnection.prototype.getContextMenu = function() {    
     var menu = new draw2d.Menu();
     var oThis = this;
     menu.appendMenuItem(new draw2d.MenuItem("Disconnect", null, function() {
         //draw2d.Connection.workflow.removeFigure(draw2d.Connection.prototype);
         var cmd =  new draw2d.CommandDelete(oThis);
         draw2d.Connection.prototype.workflow.getCommandStack().excute(cmd);
     }));

 }; 
```

# android - 应用程序 android 混合

> ID：11504271
> 
> 赞同：1
> 
> 时间：2012-07-16T12:24:20.740
> 
> 标签：android, web-frameworks, ip-geolocation

我必须开发一个使用地理定位的 android 应用程序，我很困惑在 web 框架移动和原生 Android 应用程序之间进行选择，如果我必须选择一个 web frawework，你向我推荐哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:19:15.703

关于你问题的第一部分，我想说这取决于几个因素：

1.) 以前的经验：您是否已经拥有使用 HTML/CSS + JQuery 的经验，或者您是否拥有使用 Java 的经验？如果你对第一部分的回答是肯定的：去 Web 框架开发。如果您对第二部分（Java）的回答是肯定的：进行原生应用程序开发，相信我，如果您之前已经使用过 Java 并且具备关于继承和使用包等的基本知识，那么这真的很容易上手，也，从 developer.android.com 上的教程开始观点。如果您对问题的两个部分的回答都是肯定的（即您使用过 Java 和 HTML/CSS+JS），那么请查看第 2 点。

2.) 个人偏好：很明显，你现在没有，所以就选择感觉更容易的吧。

3.)**对于地理定位应用程序**，我会说原生应用程序开发更容易，我一直在开发基于地理定位的应用程序，我觉得使用 Google Maps API 非常简单，你也会发现重要的自从每个人和他们的母亲都试图制作一个基于地理位置的应用程序以来，stackoverflow 提供了大量帮助。我在 SO 上找到了大多数问题的答案。

如果您需要有关此问题的更多建议，请不要犹豫！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:27:09.460

其实框架有很多种：手机用的JQuery、Phonegap、Titan、Windev

# opencv - 计算 cvInRangeS 中的最小值和最大值

> ID：11504272
> 
> 赞同：0
> 
> 时间：2012-07-16T12:24:24.390
> 
> 标签：opencv

```
 cvCvtColor(frame, hsv_frame, CV_BGR2HSV);
 cvInRangeS(hsv_frame, hsv_min, hsv_max, thresholded); 
```

我试着跟随蓝球。为了确定最大值和最小值，我打开我用相机拍摄的照片，打开它 MS 油漆并在 H 中以 (180/240) 结果从我的结果中翻倍，然后在 S 和 L 的结果中加倍 (255/240) 然后我收到下一个值：

```
108 113 115 112 105 H
145 40  107 129 143 S
97  129 96  102 124 L 
```

所以我选择了下一个值：

```
CvScalar hsv_min = cvScalar( 105, 40, 96 );
CvScalar hsv_max = cvScalar( 115, 140, 130); 
```

但是当我试图跟随它时几乎看不到他我是不是计算错了？或者我能做些什么来改善结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:33:27.963

首先你为什么要把你的形象转换成`HSV`然后再谈`HSL`？如果我没记错的话，它们是不同的色彩空间。

要使用颜色空间确定蓝色，请`HSV`使用以下范围：

```
Min (H/S/V):  90,  50,  50
Max (H/S/V): 130, 255, 255 
```

[这个在线转换器](http://www.yafla.com/yaflaColor/ColorRGBHSL.aspx)也应该可以帮助你。

并且不要忘记使用代码`Hue`将图像转换为 HSV 后的值在**[0..180]**范围内，而 using将为您提供范围**[0..360]**。`CV_BGR2HSV`**`CV_BGR2HSV_FULL`**

# java - 层之间的java类型转换

> ID：11504273
> 
> 赞同：3
> 
> 时间：2012-07-16T12:24:24.410
> 
> 标签：java, type-conversion, layer

在 Java 应用程序中很常见：

*   一个 IHM 层
*   服务层
*   道层

每一层都有自己的对象并依赖转换器将对象从一层转换到另一层是很常见的。

在我的例子中，我使用 Sing MVC 作为 IHM 层，MyBatis 作为 doa 层。

由于 Spring MVC 和 MyBatis 只使用 bean，而没有对该 bean 进行任何注释：

是否有必要在 3 层上有不同​​的对象？在 3 层之间共享同一个对象是一种好习惯吗？或者为什么不建议这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:41:28.153

在大多数情况下，保持层之间的完全分离是一种很好的做法。

假设您有一个名为`UserDAO`保存用户数据的对象，并且在您决定更新`sureName`到`lastName`对象中的所有层上编写了大量代码之后，现在您必须遍历所有层并更改对该对象字段的每个引用.

另一方面，如果您将此对象保留在 DB 层并将其映射到上层的其他对象，则您需要更改的只是映射：

```
somObj.setUserLastName(dao.getSureName()); 
```

至：

```
somObj.setUserLastName(dao.getLastName()); 
```

当然这是一个愚蠢的例子，但这只是为了演示。

另一方面，在每一层上分离每个对象可能会导致大量冗余和重复，并且可能会导致维护上的恐惧，因此您需要考虑利弊，并决定在哪里最适合分离，哪里最不适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:20:07.000

我曾参与过每个层都有模型的项目和具有良好领域模型的项目。

我的偏好是开发人员和架构师花时间开发它并考虑每个领域的使用的领域模型。
这种领域模型更容易维护和更新。

我记得必须向 DAO 层添加一个字段，这意味着我必须更新 3 个模型和 4 个转换器。引入错误的风险很大。尤其是如果每一层都有，例如，另一个 Date 对象的实现。（道 --> java.sql.Timestamp，服务 --> java.util.Date）。

所以我建议在所有层之间共享一个好的域模型。

# ruby-on-rails - 是否可以在 Rails 应用程序外部的类中使用 Rails url 帮助程序？

> ID：11504274
> 
> 赞同：0
> 
> 时间：2012-07-16T12:24:30.523
> 
> 标签：ruby-on-rails, ruby, url-routing, jruby

我只是想知道是否可以在外部类中使用 url 助手？在不加载整个 rails 堆栈的情况下，我只想获取帮助程序而不是整个路由引擎。

我曾考虑在我的外部应用程序中包含 Rails 堆栈，但是由于性能原因我不想这样做。

任何建议将不胜感激。

干杯亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:47:01.277

我认为如果您包括以下内容就足够了：

```
include Rails.application.routes.url_helper 
```

# python - 比较python中的2个字典

> ID：11504277
> 
> 赞同：1
> 
> 时间：2012-07-16T12:24:42.303
> 
> 标签：python, dictionary

我有两个 Python 字典。一个是球队列表和他们在联赛表中的排名，每支球队都是关键，他们的排名是相关的价值。另一个是关于每个团队的数据，团队名称是键的值：

```
RankDict = {'Tigers':'1','Lions':'2', 'Pumas':'3', 'Wolves':'4'}

TeamDict = {'TeamRecords':[{'Team': 'Lions', 'Location':'Greenville', 
             'HomeGround':'Trec Park', 'Coach': 'K. Wilson'},
            {'Team':'Pumas', 'Location':'Fairlodge', 
             'HomeGround':'Fairlodge Fields', 'Coach':'G. Kennedy'}]} 
```

我想要做的是`TeamDict`根据与团队相关联的排名从字典中打印详细信息，`RankDict`但不能直接进行键比较，因为键不常见。谁能帮我吗？

我在文档中找不到有关此类字典比较的任何内容。也许这甚至不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:35:32.943

以下将打印团队、排名和团队详细信息（按排名排序）：

```
import operator

RecordsByTeam = {}
for r in TeamDict['TeamRecords']:
    RecordsByTeam[r['Team']] = r

for team, rank in sorted(RankDict.items(), key=operator.itemgetter(1)):
    print team
    print rank
    try:        
        print RecordsByTeam[team]
    except KeyError:
        print 'No details could be found for team', team 
```

请注意，我`try/except`在打印团队详细信息时会这样做，因为`TeamDict`不包含有关每个团队的信息。

另请注意，您应该对 中的排名使用整数`RankDict`，否则当有一个团队时，上面的代码将无法正确排序，例如，`'11'`作为排名（它将排序：`'11'`, `'2'`, `'3'`, `'4'`）。

# c# - 在带有分页的 ASP.NET Web 窗体中过滤 LINQ 结果

> ID：11504278
> 
> 赞同：0
> 
> 时间：2012-07-16T12:24:43.567
> 
> 标签：c#, asp.net, linq, linq-to-sql, webforms

我正在尝试过滤 GridView 的内容，但是在此过程中出现了一些异常行为：

asp 页面的内容如下所示：

```
<form id="form1" runat="server">

<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Button ID="button1" runat="server" onclick="button1_Click" Text="Submit" />
<asp:GridView ID="GridView1" AllowPaging="true" PageSize="8"
AutoGenerateColumns="false" runat="server"
OnPageIndexChanging="GridView1_PageIndexChanging">

<Columns>
  <asp:BoundField HeaderText="ID" DataField="ID" />
  <asp:BoundField HeaderText="Client Name" DataField="Client_Name" />
  <asp:BoundField HeaderText="Project" DataField="Project_Name" />
  <asp:BoundField HeaderText="Uploaded By" DataField="Uploaded_By" />
</Columns>

</asp:GridView>
</form> 
```

以及文件背后的代码：

```
public partial class Sample1 : System.Web.UI.Page
{
  protected void Page_Load(object sender, EventArgs e)
  {
    if (!this.Page.IsPostBack)
    {
        SourceDataContext db = new SourceDataContext();

        GridView1.DataSource = from q in db.Cust
                               orderby q.ID
                               select q;
        GridView1.DataBind();
    }
}

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
}

protected void button1_Click(object sender, EventArgs e)
{
    string client = TextBox1.Text;

    SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           where q.Client_Name == client
                           orderby q.ID
                           select q;
    GridView1.DataBind();

    //reset page index to 0
    GridView1.PageIndex = 0;
}
} 
```

过滤部分有效，但分页无效。此外，分页需要单击该页面两次才能被选中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:35:24.290

试试看。将此代码保存在一个函数中，将其命名为 BindGrid

```
private void BindGrid()
{
 SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           orderby q.ID
                           select q;
    GridView1.DataBind();
}
// Create this method in your code behind 
```

并在分配新索引后在 GridView1_PageIndexChanging 中调用它

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    BindGrid();
} 
```

# android - 无法将 twitter 集成到 Android 应用程序中

> ID：11504279
> 
> 赞同：1
> 
> 时间：2012-07-16T12:24:45.197
> 
> 标签：android, twitter, oauth

> **可能重复：**
> [Twitter API 不接受 Android 应用的回调 URL](https://stackoverflow.com/questions/6163111/twitter-api-not-accepting-callback-url-for-android-app)

当我尝试将 twitter 集成到我的 android 应用程序中时，它会显示此错误...

为什么会显示此错误？

这个错误有什么解决办法？？

任何人都可以帮助我吗？

```
07-16 17:44:05.875: W/System.err(395): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: http://twitter.com/oauth/request_token
07-16 17:44:05.905: W/System.err(395):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
07-16 17:44:05.905: W/System.err(395):  at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
07-16 17:44:05.905: W/System.err(395):  at net.londatiga.android.TwitterApp$2.run(TwitterApp.java:117)
07-16 17:44:05.905: W/System.err(395): Caused by: java.io.FileNotFoundException: http://twitter.com/oauth/request_token
07-16 17:44:05.905: W/System.err(395):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1061)
07-16 17:44:05.915: W/System.err(395):  at oauth.signpost.basic.HttpURLConnectionResponseAdapter.getContent(HttpURLConnectionResponseAdapter.java:18)
07-16 17:44:05.925: W/System.err(395):  at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:228)
07-16 17:44:05.925: W/System.err(395):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
5:44 PM 
```

代码....

```
public class TestConnect extends Activity {
    private TwitterApp mTwitter;
    private CheckBox mTwitterBtn;

    private static final String twitter_consumer_key = "xxxxxxxxxxxx";
    private static final String twitter_secret_key = "xxxxxxxxxxxxx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mTwitterBtn = (CheckBox) findViewById(R.id.twitterCheck);

        mTwitterBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                onTwitterClick();
            }
        });

        mTwitter    = new TwitterApp(this, twitter_consumer_key,twitter_secret_key);

        mTwitter.setListener(mTwLoginDialogListener);

        if (mTwitter.hasAccessToken()) {
            mTwitterBtn.setChecked(true);

            String username = mTwitter.getUsername();
            username        = (username.equals("")) ? "Unknown" : username;

            mTwitterBtn.setText("  Twitter (" + username + ")");
            mTwitterBtn.setTextColor(Color.WHITE);
        }

        Button goBtn = (Button) findViewById(R.id.button1);

        goBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                startActivity(new Intent(TestConnect.this, TestPost.class));
            }
        });
    }

    private void onTwitterClick() {
        if (mTwitter.hasAccessToken()) {
            final AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setMessage("Delete current Twitter connection?")
                   .setCancelable(false)
                   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           mTwitter.resetAccessToken();

                           mTwitterBtn.setChecked(false);
                           mTwitterBtn.setText("  Twitter (Not connected)");
                           mTwitterBtn.setTextColor(Color.GRAY);
                       }
                   })
                   .setNegativeButton("No", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();

                            mTwitterBtn.setChecked(true);
                       }
                   });
            final AlertDialog alert = builder.create();

            alert.show();
        } else {
            mTwitterBtn.setChecked(false);

            mTwitter.authorize();
        }
    }

    private final TwDialogListener mTwLoginDialogListener = new TwDialogListener() {
        @Override
        public void onComplete(String value) {
            String username = mTwitter.getUsername();
            username        = (username.equals("")) ? "No Name" : username;

            mTwitterBtn.setText("  Twitter  (" + username + ")");
            mTwitterBtn.setChecked(true);
            mTwitterBtn.setTextColor(Color.WHITE);

            Toast.makeText(TestConnect.this, "Connected to Twitter as " + username, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onError(String value) {
            mTwitterBtn.setChecked(false);

            Toast.makeText(TestConnect.this, "Twitter connection failed", Toast.LENGTH_LONG).show();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:23:26.627

检查这些条件 1\. 在 twitter 中注册应用程序以获取 twitter_consumer_key 和 twitter_secret_key。2.检查app是否有上网权限

# python - Numpy loadtxt 单行到 multidim-array

> ID：11504286
> 
> 赞同：0
> 
> 时间：2012-07-16T12:25:10.227
> 
> 标签：python, multidimensional-array, numpy

我有一个文本文件，`randomfile.txt`包含许多用空白步分隔的值，基本上是一长行不同的数字。

```
10 20 30 40 50 10 45 65....... 
```

我`numpy.loadtxt`用来将所有值读入python。我接下来要做的是将一长串数字分成一个四列的二维 numpy 数组。

我希望数组结构如下：

```
[10, 20, 30, 40]
[50, 10, 45, 65] 
```

我试图用它`numpy.reshape`来修改数组，但问题是这些值是作为单行代码读入的。

我会感谢有关如何解决此问题的建议，或者我可以深入研究的教程提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:37:08.963

以下行：

```
np.loadtxt("randomfile.txt", dtype=int).reshape((-1, 4)) 
```

得到以下输出：

```
array([[10, 20, 30, 40],
       [50, 10, 45, 65]]) 
```

与您的样本数据。

# r - 用于处理 r 中的单个值的循环

> ID：11504287
> 
> 赞同：2
> 
> 时间：2012-07-16T12:25:10.477
> 
> 标签：r, loops

这是我的小数据集。

```
Indvidual <- c("A", "B", "C", "D", "E", "F", "G", "H", "I", "J")
Parent1 <- c(NA, NA, "A", "A", "C", "C", "C", "E", "A", NA)
Parent2 <- c(NA, NA, "B", "C", "D", "D", "D", NA, "D", NA)
mydf <- data.frame (Indvidual, Parent1, Parent2)

  Indvidual Parent1 Parent2
1         A    <NA>    <NA>
2         B    <NA>    <NA>
3         C       A       B
4         D       A       C
5         E       C       D
6         F       C       D
7         G       C       D
8         H       E    <NA>
9         I       A       D
10        J      <NA>     <NA> 
```

想想那些有两个或一个已知父母的人。我需要通过计算他们父母的分数来比较和推导分数。

规则是父母（parent1 或 parent2 列中的名称）之一是已知的（不是 NA），将获得 1 一个额外的分数加上他们父母的分数。如果已知有两个父母，则将考虑最高得分者。

这是一个例子：

```
Individual "A", has both parents unknown so will get score 0
Indiviudal "C", has both parents known (i.e. A, B) 
will get 0 score (maximum of their parents) 
```

加 1（因为它的父母之一是已知的）

因此，上述数据帧的预期输出（带有解释）是：

```
Indvidual Parent1 Parent2   Scores     Explanation 
1         A    <NA>    <NA>    0       0 (Max of parent Scores NA) + 0 (neither parent knwon) 
2         B    <NA>    <NA>    0       0 (Max of parent Scores NA)  + 0 (neither parent knwon) 
3         C     A       B      1    0 (Max of parent Scores)  +  1 (either parent knwon)       
4         D     A        C      2       1 (Max of parent scores)  +  1 (either parent knwon) 
5         E       C      D      3       2 (Max of parent scores) + 1 (either parent knwon)
6         F       C      D      3       2 (Max of parent scores) + 1 (either parent knwon)
7         G       C      D      3       2 (Max of parent scores) + 1 (either parent knwon)
8         H       E    <NA>     4       3 (Max of parent scores) + 1 (either parent knwon) 
9         I       A       D     3       2 (Max of parent scores) + 1 (either parent knwon)
10        J      <NA>    <NA>   0       0 (Max of parent scores NA)  + 0 (neither parent knwon) 
```

解释：随着循环的进行，它会考虑已经计算的分数。父母分数的最大值

**编辑：基于追逐的问题**

例如：

```
Individual C has two parents A and B, each of which has Scores calculated as 0 and 0 
(in row 1 and 2 and column Scores),  means that max (c(0,0)) will be 0

Individual E has parents C and D, whose scores in Scores column is (in row 3 and 4),
 1 and 2, respectively.  So maximum of max(c(1,2)) will be 2. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:59:52.220

`plyr`使用和递归参数的示例

```
library(plyr)
Indvidual <- c("A", "B", "C", "D", "E", "F", "G", "H", "I", "J")
Parent1 <- c(NA, NA, "A", "A", "C", "C", "C", "E", "A", NA)
Parent2 <- c(NA, NA, "B", "C", "D", "D", "D", NA, "D", NA)
mydf <- data.frame (Indvidual, Parent1, Parent2)
scor.fun<-function(x,mydf){
    Explanation<-0
    P1<-as.character(x$Parent1)
    P2<-as.character(x$Parent2)
    score<-as.numeric(!(is.na(P1)||is.na(P1)))
    if(!(is.na(P1)||is.na(P2))){
        Explanation<-max(scor.fun(subset(mydf,Indvidual==P1),mydf)[1],scor.fun(subset(mydf,Indvidual==P2),mydf)[1])
        score<-score+Explanation
    }else{
        Explanation<-ifelse(is.na(P1),0,scor.fun(subset(mydf,Indvidual==P1),mydf)[1])
        Explanation<-max(Explanation,ifelse(is.na(P2),0,scor.fun(subset(mydf,Indvidual==P2),mydf)[1]))
        score<-score+Explanation
    }
    c(score,Explanation)
}

adply(mydf,1,scor.fun,mydf) 
```

在大数据帧上递归可能不是最好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:12:35.790

```
Individual <- c("A", "B", "C", "D", "E", "F", "G", "H", "I", "J")
Parent1 <- c(NA, NA, "A", "A", "C", "C", "C", "E", "A", NA)
Parent2 <- c(NA, NA, "B", "C", "D", "D", "D", NA, "D", NA)
mydf <- data.frame (Individual, Parent1, Parent2, stringsAsFactors = FALSE)

mydf$Scores <- NA
mydf$Scores[rowSums(is.na(mydf[, c("Parent1", "Parent2")])) == 2] <- 0
while(any(is.na(mydf$Scores))){
  KnownScores <- mydf[!is.na(mydf$Scores), c(1, 4)]
  ToCalculate <- mydf[
    mydf$Parent1 %in% c(KnownScores$Individual, NA) & 
    mydf$Parent2 %in% c(KnownScores$Individual, NA) & 
    is.na(mydf$Scores), 
    -4]
  ToCalculate$Score <- apply(
    merge(
      merge(
        ToCalculate, 
        KnownScores, 
        by.x = "Parent1", 
        by.y = "Individual", 
        all.x = TRUE
      ), 
      KnownScores, 
      by.x = "Parent2",
      by.y = "Individual",
      all.x = TRUE
    )[, 4:5], 
    1, 
    max, 
    na.rm = TRUE) + 1
  mydf <- merge(mydf, ToCalculate[, c(1, 4)], all.x = TRUE)
  mydf$Scores[!is.na(mydf$Score)] <- mydf$Score[!is.na(mydf$Score)]
  mydf$Score <- NULL
} 
```

# file-io - 关于 vb.net 中的文本文件

> ID：11504288
> 
> 赞同：0
> 
> 时间：2012-07-16T12:25:12.813
> 
> 标签：file-io, vb.net-2010

我创建了文本文件并想将一些内容写入该文件，但在流写入器语句中出现错误。

```
-------
 Dim fileLoc As String = "d:\sample1.txt"
    Dim fs As FileStream = Nothing
    If (Not File.Exists(fileLoc)) Then
        fs = File.Create(fileLoc)
    Else
        File.Delete(fileLoc)
        fs = File.Create(fileLoc)
    End If
    Using sw As StreamWriter = New StreamWriter(fileLoc)
   --------
   --------
   some thing

    ----------
    ----------
   sw.writeline(phone)

   ---------
   end using 
```

我得到的错误是：

> 该进程无法访问文件“d:\sample1.txt”，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:36:06.943

发生这种情况是因为您正在删除文件并很快创建它。删除过程正在进行中，因此您可以创建文件。

```
Dim fs As FileStream = New FileStream(Application.StartupPath & "\Log\log.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite)
Dim s As StreamWriter = New StreamWriter(fs)
s.Close()
fs.Close()$ 
```

希望这段代码对您有所帮助。

# javascript - jQuery UI Widget 没有方法 'uniqueId'

> ID：11504289
> 
> 赞同：1
> 
> 时间：2012-07-16T12:25:17.043
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-widgets

我正在尝试使 jQuery UI 小部件在我的 Web 应用程序中工作我
从原始[演示](http://view.jqueryui.com/menubar/demos/index.html#menubar)中获取了所有文件，并且基本上尽我所能，因此代码和文件与演示版本中的几乎相同。

并且一直得到这个错误：**Uncaught TypeError: Object [object Object] has no method 'uniqueId'**

这是js代码：

```
$(function () {
    var date = new Date();
    date.setDate(date.getDate() + 1);
    $(".calendar", ".add-item").datepicker({
        showAnim: "drop",
        dateFormat: "yy-dd-mm",
        minDate: date
    });

    $("#bar1").menubar({
        position: {
            within: $("#demo-frame").add(window).first()
        }
    });

    $(".menubar-icons").menubar({
        autoExpand: true,
        menuIcon: true,
        buttons: true,
        position: {
            within: $("#demo-frame").add(window).first()
        }
    });

    $("#bar3").menubar({
        position: {
            within: $("#demo-frame").add(window).first()
        },
        items: ".menubarItem",
        menuElement: ".menuElement"
    });
}); 
```

以下是包含的文件：

```
<script src="@Url.Content("~/content/js/jquery-1.7.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery-ui-1.8.21.custom.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.core.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.dataTables.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.widget.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.position.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.button.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.menu.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.menubar.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.ui.core.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/main.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/content/js/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/content/css/main-admin.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/css/jquery-ui/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/css/jquery-ui/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/css/jquery.dataTables.css")" rel="stylesheet" type="text/css" /> 
```

这是普通的html：

```
<div class="header">
            <div class="demo">
                <ul id="bar1" class="menubar">
                    <li><a href="#File">File</a>
                        <ul>
                            <li><a href="#Open...">Open...</a></li>
                            <li class="ui-state-disabled">Open recent...</li>
                            <li><a href="#Save">Save</a></li>
                            <li><a href="#Save%20as...">Save as...</a></li>
                            <li><a href="#Close">Close</a></li>
                            <li><a href="#Quit">Quit</a></li>
                        </ul>
                    </li>
                    <li><a href="#Edit">Edit</a>
                        <ul>
                            <li><a href="#Copy">Copy</a></li>
                            <li><a href="#Cut">Cut</a></li>
                            <li class="ui-state-disabled">Paste</li>
                        </ul>
                    </li>
                    <li><a href="#View">View</a>
                        <ul>
                            <li><a href="#Fullscreen">Fullscreen</a></li>
                            <li><a href="#Fit%20into%20view">Fit into view</a></li>
                            <li><a href="#Encoding">Encoding</a>
                                <ul>
                                    <li><a href="#Auto-detect">Auto-detect</a></li>
                                    <li><a href="#UTF-8">UTF-8</a></li>
                                    <li><a href="#UTF-16">UTF-16</a>
                                        <ul>
                                            <li><a href="#Option%201">Option 1</a></li>
                                            <li><a href="#Option%202">Option 2</a></li>
                                            <li><a href="#Option%203">Option 3</a></li>
                                            <li><a href="#Option%204">Option 4</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><a href="#Customize...">Customize...</a></li>
                        </ul>
                    </li>
                </ul>
                <ul id="bar2" class="menubar-icons">
                    <li><a href="#File">File</a>
                        <ul>
                            <li><a href="#Open...">Open...</a></li>
                            <li class="ui-state-disabled">Open recent...</li>
                            <li><a href="#Save">Save</a></li>
                            <li><a href="#Save%20as...">Save as...</a></li>
                            <li><a href="#Close">Close</a></li>
                            <li><a href="#Quit">Quit</a></li>
                        </ul>
                    </li>
                    <li><a href="#Edit">Edit</a>
                        <ul>
                            <li><a href="#Copy">Copy</a></li>
                            <li><a href="#Cut">Cut</a></li>
                            <li class="ui-state-disabled">Paste</li>
                        </ul>
                    </li>
                    <li><a href="#View">View</a>
                        <ul>
                            <li><a href="#Fullscreen">Fullscreen</a></li>
                            <li><a href="#Fit%20into%20view">Fit into view</a></li>
                            <li><a href="#Encoding">Encoding</a>
                                <ul>
                                    <li><a href="#Auto-detect">Auto-detect</a></li>
                                    <li><a href="#UTF-8">UTF-8</a></li>
                                    <li><a href="#UTF-16">UTF-16</a>
                                        <ul>
                                            <li><a href="#Option%201">Option 1</a></li>
                                            <li><a href="#Option%202">Option 2</a></li>
                                            <li><a href="#Option%203">Option 3</a></li>
                                            <li><a href="#Option%204">Option 4</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><a href="#Customize...">Customize...</a></li>
                        </ul>
                    </li>
                </ul>
                <div id="bar3" class="menubar">
                    <div class="menubarItem">
                        <a href="#File">File</a>
                        <div class="menuElement">
                            <div>
                                <a href="#Open...">Open...</a></div>
                            <div class="ui-state-disabled">
                                Open recent...</div>
                            <div>
                                <a href="#Save">Save</a></div>
                            <div>
                                <a href="#Save%20as...">Save as...</a></div>
                            <div>
                                <a href="#Close">Close</a></div>
                            <div>
                                <a href="#Quit">Quit</a></div>
                        </div>
                    </div>
                    <div class="menubarItem">
                        <a href="#Edit">Edit</a>
                        <div class="menuElement">
                            <div>
                                <a href="#Copy">Copy</a></div>
                            <div>
                                <a href="#Cut">Cut</a></div>
                            <div class="ui-state-disabled">
                                Paste</div>
                        </div>
                    </div>
                    <div class="menubarItem">
                        <a href="#View">View</a>
                        <div class="menuElement">
                            <div>
                                <a href="#Fullscreen">Fullscreen</a></div>
                            <div>
                                <a href="#Fit%20into%20view">Fit into view</a></div>
                            <div>
                                <a href="#Encoding">Encoding</a>
                                <div class="menuElement">
                                    <div class="ui-state-disabled">
                                        Auto-detect</div>
                                    <div>
                                        <a href="#UTF-8">UTF-8</a></div>
                                    <div>
                                        <a href="#UTF-16">UTF-16</a>
                                        <div class="menuElement">
                                            <div>
                                                <a href="#Option%201">Option 1</a></div>
                                            <div>
                                                <a href="#Option%202">Option 2</a></div>
                                            <div class="ui-state-disabled">
                                                Option 3</div>
                                            <div>
                                                <a href="#Option%204">Option 4</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <a href="#Customize...">Customize...</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:32:50.813

删除包含：

`<script src="/content/js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:36:22.343

uniqueId 是 jQuery 1.9.x 引入的一个新函数。我假设您正在使用带有 jQ​​uery 1.8.x 的 dev Widget（又名 GitHub 的 master 分支）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:31:58.087

在我看来，您没有包含所有必需的源 (.js) 文件。要么就是你的网址是错误的。

从这个页面只包含一个 UI 包可能更容易：http: [//jqueryui.com/download/](http://jqueryui.com/download/) 这样您就知道您拥有所有必需的源？

# .htaccess - Google 在搜索结果中添加正斜杠，后跟其他文件

> ID：11504295
> 
> 赞同：1
> 
> 时间：2012-07-16T12:25:34.093
> 
> 标签：.htaccess, search-engine, google-search

当我在 Google 上搜索我的网站时，它曾经在 URL 之后添加斜杠，我可以通过很棒的 stackoverflow 论坛解决这个问题，但我看到了一个新问题，它不仅在 url 之后添加了斜杠，而且还添加了文件名跟随它，看看下面它的样子。

> www.caeoutsourcingservices.com/aboutus.php/aboutus.php www.caeoutsourcingservices.com/contactus.php/aboutus.php

上面的当前网址是：

> www.caeoutsourcingservices.com/aboutus.php www.caeoutsourcingservices.com/contactus.php

我有一些结果，在同一站点的 URL 之后只添加了转发 Flash，如下所示

> www.caeoutsourcingservices.com/aboutus.php/

如何解决这两个问题：

1.  在 url 中添加斜杠和其他随机文件名
2.  在网址后添加斜杠。

我的`.htaccess`样子如下。

```
RewriteEngine on
Options +FollowSymlinks
RewriteCond %{HTTP_HOST} !^www\.caeoutsourcingservices.com [NC]
RewriteRule ^(.*) http://www.caeoutsourcingservices.com/$1 [L,R=301]
ErrorDocument 400 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 401 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 402 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 403 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 404 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 405 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 406 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 407 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 408 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 409 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 410 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 411 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 412 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 413 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 414 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 415 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 500 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 501 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 502 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 503 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 504 http://www.caeoutsourcingservices.com/sitemap.php
ErrorDocument 505 http://www.caeoutsourcingservices.com/sitemap.php 
```

谢谢马诺吉索尼

# asp.net-mvc - 服务器中的 JavaScript 不起作用？

> ID：11504296
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:25:36.450
> 
> 标签：asp.net-mvc, jquery

html

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#musteri_sno").change(function () {
            var strSayacID = "";
            strSayacID = $(this)[0].value; // get the selected state id

            var url = "/SayacOkumalari/MusteriSayaclariniGetir/" + strSayacID;
            // call controller's action
            $.getJSON(url, null, function (data) {
                // do something once the data is retrieved
                $("#sayac_no").empty();
                $.each(data, function (index, optionData) {
                    $("#sayac_no").append("<option value='"
                     + optionData.sno
                     + "'>" + optionData.sayac_seri_no
                     + "</option>");
                });
            });
        })
    .change(); // making sure the event runs on initialization for default value
    });
    </script>
    @using (Ajax.BeginForm("SayacSecimiPartial", "SayacOkumalari", new AjaxOptions { UpdateTargetId = "div_grafik" }, new { id="sayac_secimi_form"}))
    {
    <table>
        <tr>
            <td>
                @Html.DropDownList("musteri_sno", (SelectList)ViewBag.musteri_id, "--Müşteri Seçiniz--", new { id = "musteri_sno" })
            </td>
            <td>
                @Html.DropDownList("sayac_no", Enumerable.Empty<SelectListItem>(), "-- Sayaç Seçiniz --", new { id = "sayac_no" })
            </td>
            <td>
                <input type="submit" value="Uygula" />
            </td>
        </tr>
    </table> 
} 
```

此脚本适用于 localhost，但不适用于服务器。我的项目中有很多脚本，而且它们都在工作。只有这个脚本不起作用。我找不到，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:49:24.293

我怀疑问题线是这里的：

```
var url = "/SayacOkumalari/MusteriSayaclariniGetir/" + strSayacID; 
```

尝试将其更改为：

```
var url = '@Url.Action("MusteriSayaclariniGetir", "SayacOkumalari", new {Id = strSayacID })'; 
```

由于您没有显示控制器操作，因此我“假设”`MusteriSayaclariniGetir`有一个名为`Id`. 如果不是，则只需更改该`new {Id = strSayacID })`部分以匹配所需的参数名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:19:31.927

```
var url = "/SayacOkumalari/MusteriSayaclariniGetir/" + strSayacID; 
```

代替此尝试使用以下内容，因为我对您的解决方案中的文件夹结构有疑问。

```
var url = "../SayacOkumalari/MusteriSayaclariniGetir/" + strSayacID; 
```

如果它没有帮助，请告诉我，我会尝试另一件事。

# android - 相机应用程序和 MediaRecorder 干扰

> ID：11504298
> 
> 赞同：0
> 
> 时间：2012-07-16T12:25:41.943
> 
> 标签：android

我用`MediaRecorder`inside`Service`来录制音频。当录音正在进行时，当我尝试手动启动相机时，我得到了这个：

![在此处输入图像描述](../Images/48c5e083fde22674dbe0eadbff2feef5.png)

有时我的应用程序崩溃，并且日志只显示“进程死亡”。

我该如何处理这种情况，我的意思是，也许是为了检测到相机应用程序想要记录一些东西，这样我就可以释放`MediaRecorder`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:17:33.833

是的，您必须释放媒体记录器源，因为相机活动可能会使用所有这些相同的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:05:53.093

您应该在退出活动时尝试释放媒体记录器资源。也许这就是原因。如果你没有关闭它，即使你完成了你的活动，它仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:47:50.460

AFAIK 无法收听硬件相机的启动。

[相机](http://developer.android.com/reference/android/hardware/Camera.html)不会广播任何可以让您在错误发生之前释放 MediaRecorder 的操作。Camera 广播的动作是`ACTION_NEW_PICTURE, ACTION_NEW_VIDEO, CAMERA_ERROR_SERVER_DIED`, 和`CAMERA_ERROR_UNKNOWN`, 两者都不允许您在错误发生之前释放 MediaRecorder。

# asp.net - 我可以在 Session_End 中编写我的登录页面重定向代码吗？

> ID：11504301
> 
> 赞同：0
> 
> 时间：2012-07-16T12:26:13.720
> 
> 标签：asp.net

`Session_End`当我的会话超时并将用户重定向到登录页面时，我可以在方法中编写我的代码吗？

我正在使用**表单身份验证**方法。

目前我已经创建了一个“ `CheckSession()`”方法并在每个页面上调用......

请建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:30:21.317

我总是将会话检查代码放在 webform 项目的母版页中，或者最近创建了一个具有此方法的基本控制器。无论哪种方式，目标都不是出于明显的维护原因而在任何地方复制该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:37:01.140

我认为您可以通过`web.config`文件中的设置来管理它，而无需使用代码。只需确保表单身份验证 cookie 的持续时间和会话的长度相同。如果您的身份验证会话超时，ASP.NET 将自动将用户重定向到登录页面。

尝试：

```
<forms ... timeout="20" slidingExpiration="true" /> 
```

（默认`slidingExpiration`情况`true`下，但我在这里指定它，因为它必须`true`复制 ASP.NET 中会话的超时行为）

和：

```
<sessionState ... timeout="20" /> 
```

# eclipse - 在eclipse中访问路径变量

> ID：11504311
> 
> 赞同：2
> 
> 时间：2012-07-16T12:26:58.213
> 
> 标签：eclipse

我需要在 eclipse 中访问 Path 变量，尝试过的语句：

```
System.out.println("${env_var:ECLIPSE_HOME}");
System.out.println("${ECLIPSE_HOME}"); 
```

但不成功，谁能告诉我怎么做

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:34:23.263

这个怎么样：

```
System.out.println(System.getenv("PATH")); 
```

# c - 从何处获取最新的 ANSI C 标准文档

> ID：11504312
> 
> 赞同：19
> 
> 时间：2012-07-16T12:26:58.760
> 
> 标签：c, ansi

在哪里可以找到最新的 ANSI C 标准文档？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T12:28:08.457

您可以在这里购买 (ISO/IEC 9899:2011)：

[http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=57853](http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=57853)

价格约为 240 美元。

您还可以免费获得最新（2011 年 4 月 12 日）草稿版本：

[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

**更新（2016 年 6 月 16 日）：**

C11 也已获得 ANSI 的批准。ANSI 商店以更便宜的价格出售 C11 文件（与 ISO 文件基本相同）：60 美元（截至 2016 年 6 月 16 日）。

ISO 商店还将 C11 的价格从 238 瑞士法郎降至 198 瑞士法郎（截至 2016 年 6 月 16 日约为 205 美元）。

# c# - 部署 Outlook 2010 插件设置

> ID：11504317
> 
> 赞同：0
> 
> 时间：2012-07-16T12:27:20.877
> 
> 标签：c#, visual-studio-2010, ms-office, installation, add-in

我使用 Visual Studio 2010 开发了 Outlook 2010 插件。从 Visual Studio 调试/运行时，一切正常。但是，我正在尝试进行设置，以便其他用户可以简单地安装插件。但是，在其他计算机上运行安装程序时，一切似乎都运行良好，但插件并未添加到 Microsoft Outlook。

顺便说一句：即使在我的计算机上运行安装程序（在删除了由于 Visual Studio 运行而自动添加的插件之后），插件也不会添加到 MS Outlook。在我构建的安装项目中引用了插件项目。

什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:29:24.997

如果您的应用程序已注册和/或激活，您是否尝试进入 Outlook 文件 -> 选项 -> 加载项并检查列表？

# ios - My iOS App 的支持网站，有什么建议吗？

> ID：11504318
> 
> 赞同：7
> 
> 时间：2012-07-16T12:27:22.253
> 
> 标签：ios, url, app-store

在我提交到 App Store 之前，我正准备为我的应用程序支持 URL 设置一个网站。我在想我可能只是做一个 WordPress 网站。有什么想法或建议吗？我很想以便宜的价格获得一些好的主题的链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:57:59.983

You could set up a simple static page on github, if you're using that to host your source (or even if not): [http://pages.github.com/](http://pages.github.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T02:48:55.773

有很多适用于应用网站的 WordPress 主题。这是我不久前遇到的一个：http: [//www.appdesignvault.com/darstell-iphone-wordpress-theme/](http://www.appdesignvault.com/darstell-iphone-wordpress-theme/)。

如果您发布关于他们的推文，它是免费的！我正在考虑将其用于我的应用程序，或者将其用作我自己的 wordpress 主题的起点。

这是对一些付费主题的简要回顾。大多数都很便宜。（注意：网站似乎加载缓慢）

*   [http://www.devlounge.net/design/6-wordpress-themes-for-iphone-apps/](http://www.devlounge.net/design/6-wordpress-themes-for-iphone-apps/)

这是其他一些。不过，我并没有过多地研究它们。

*   [http://www.apptamin.com/app-websites/](http://www.apptamin.com/app-websites/)
*   [http://www.elegantthemes.com/gallery/myapp/](http://www.elegantthemes.com/gallery/myapp/)
*   [http://templatic.com/cms-themes/iphone-app/](http://templatic.com/cms-themes/iphone-app/)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T12:39:14.050

我在[Heroku](http://www.heroku.com/)上为[Railscasts for iOS](http://www.railscastsforios.info/)托管了一个静态站点。它是免费的，几乎不需要任何维护。

# webgl - 为什么重新初始化 webgl-context 会破坏我对 THREE.EffectComposer 的使用？

> ID：11504320
> 
> 赞同：2
> 
> 时间：2012-07-16T12:27:30.680
> 
> 标签：webgl, three.js

我正在处理的页面有 ajax-navigation，所以当用户导航离开我使用 WebGL 的部分时，我会停止我的 RequestAnimationFrame-loop，然后当用户重新访问该页面时，我会重新运行所有 WebGL设置代码来重新创建场景。这在我使用普通渲染器时效果很好，但使用 EffectComposer 时，它会中断。

这是代码。

初始化：

```
composerScene = new THREE.EffectComposer(renderer, new THREE.WebGLRenderTarget(width, height, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: true }));
renderModel = new THREE.RenderPass(scene, camera);
renderModel.renderToScreen = false;
renderModel.clear = true;
filmPass = new THREE.FilmPass(filmgrainOpacity, scanlineIntensity, scanlineCount, filmpassGrayscale);
filmPass.renderToScreen = true;

composerScene.addPass(renderModel);
composerScene.addPass(filmPass); 
```

渲染：

```
composerScene.render(deltaTime); 
```

当我离开然后回到页面时，错误控制台显示：

```
WebGL: INVALID_OPERATION: bindBuffer: object not from this context
GL_INVALID_OPERATION : glDrawXXX: attempt to access out of range vertices
WebGL: too many errors, no more errors will be reported to the console for this context. 
```

并且没有渲染发生。如果我注释掉`composerScene.addPass(filmPass);`错误不再发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:15:57.010

这是一个肮脏的技巧，但如果您在重新初始化上下文之前正确执行此操作，它应该有助于 EffectComposer 再次启动。

```
THREE.EffectComposer.camera = new THREE.OrthographicCamera( -1, 1, 1, -1, 0, 1 );
THREE.EffectComposer.quad = new THREE.Mesh( new THREE.PlaneGeometry( 2, 2 ), null );
THREE.EffectComposer.scene = new THREE.Scene();
THREE.EffectComposer.scene.add( THREE.EffectComposer.quad ); 
```

如果您查看 EffectComposer 代码的底部，您会看到它在加载时正在执行此操作，因此您所做的只是将它们设置回初始状态。我已经在我的代码中尝试过这个，我能够重新初始化我的 WebGL 上下文并再次使用 EffectComposer 而不会引发一堆错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:40:11.860

我相信这是 Three.js 中的一个错误，我打开了一个[问题](https://github.com/mrdoob/three.js/issues/2951)。

# database - Hive 查询 - 按日期的第一个和最后一个条目的数据透视表

> ID：11504322
> 
> 赞同：1
> 
> 时间：2012-07-16T12:27:32.280
> 
> 标签：database, hive

从这里开始是一些示例数据

样本输入

```
ID      Date                   Value
10      2012-06-01 00:01:45    20
10      2012-06-01 00:01:51    12
10      2012-06-01 00:01:56    21
10      2012-06-01 00:02:01    43
10      2012-06-01 00:02:06    12
17      2012-06-01 00:02:43    64
17      2012-06-01 00:02:47    53
17      2012-06-01 00:02:52    23
17      2012-06-01 00:02:58    45
17      2012-06-01 00:03:03    34 
```

期望的输出

```
ID      Date
10      2012-06-01 00:01:45    2012-06-01 00:02:06    20    12
17      2012-06-01 00:02:43    2012-06-01 00:03:03    64    34 
```

所以我希望将第一个和最后一个日期以及两者的值放在一行中。我表中的 ID 值在以后也会有其他条目，所以我只想获取第一个和最后一个条目链。每个条目相隔 5 秒。如果它们更大，那么它是一个新的链。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T21:42:59.410

我刚刚开始搜索这个过程，但它看起来`LATERAL VIEW`并`EXPLODE`加上一个或两个用户定义的函数是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T21:48:09.400

我最终创建了一个 MapReduce 作业来处理我的数据的 csv 文件，而不是使用 hive。

我根据 ID“映射”。然后设置一个参数，如果数据超过 2 小时，我将它们分开。

最后，很容易破解 MapReduce 代码，然后考虑 Hive 查询。

# c# - 在启动 ASP.NET 应用程序期间确保权限正确的最佳做法是什么

> ID：11504324
> 
> 赞同：0
> 
> 时间：2012-07-16T12:27:33.547
> 
> 标签：c#, asp.net, security, permissions

我有一个 ASP.NET 应用程序，它需要对 App_Data 子文件夹进行写访问。用于部署应用程序的 MSI 尝试正确设置权限，但尽管如此，有时权限似乎是错误的。没有此权限，大多数应用程序都可以正常工作。如果权限错误，我希望应用程序无法启动。

确保 IIS 用户上下文的必要权限正确的最佳做法是什么？理想情况下，我想显示一些简单的说明来修复错误。而且我希望消息出现在尽可能多的错误配置中。

以下描述了我到目前为止所尝试的方法，直到我意识到可能有更好或标准的方法。

我试着把它放进去`Application_Start()`

```
protected void Application_Start(Object sender, EventArgs e)
{
    // Assert permissions on writeable folders are correct
    var permissionsChecker = new AppDataPermissionsChecker();
    permissionsChecker.AssertFolderIsWriteable(
        HttpContext.Current.Server.MapPath("~/App_Data"));

    // remainder of Application_Start()...
} 
```

其中`AppDataPermissionsChecker`定义如下：

```
public class AppDataPermissionsChecker
{
    private bool CanWriteAccessToFolder(string folderPath)
    {
        try
        {
            // Attempt to get a list of security permissions from the folder. 
            // This will raise an exception if the path is read only or do not have access to view the permissions. 
            DirectorySecurity directorySecurity = Directory.GetAccessControl(folderPath);
            return true;
        }
        catch (UnauthorizedAccessException)
        {
            return false;
        }
    }

    public void AssertFolderIsWriteable(string folderPath)
    {
        if (!Directory.Exists(folderPath))
            throw new Exception(String.Format("The {0} folder does not exist.", folderPath));
        if (!CanWriteAccessToFolder(folderPath))
            throw new Exception(String.Format("The ASPNET user does not have " 
                + "access to the {0} folder. Please ensure the ASPNET user has "
                + "read/write/delete access on the folder.  See 'The App_Data folder' "
                + "here: http://msdn.microsoft.com/en-us/library/06t2w7da.aspx'",
         folderPath));
    }
} 
```

我认为如果权限不正确（这总比没有好），这会抛出一个丑陋的异常，但在某些情况下，我只会收到 HTTP 错误 503。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:27:28.267

我发现这个[诊断页面](http://www.codeproject.com/Articles/103625/Website-Diagnostics-Page-to-diagnose-your-ASP-NET)的实现正是我想要的（以及更多）。

# perl - 避免用户使用 Perl (CGI) 提交表单两次

> ID：11504325
> 
> 赞同：0
> 
> 时间：2012-07-16T12:27:38.583
> 
> 标签：perl, security, http-headers, cgi, double-submit-problem

我正在编写一个接收 POST 方法提交的小型 Perl 页面。我希望能够防止一个人/计算机多次提交表单（以避免重复提交泛滥）。但是我找不到任何关于如何在 Perl CGI 中执行此操作的示例或解释。你能建议或指导我举一些例子吗？我知道我可以使用 HTTP 标头中的一些数据（令牌？）和/或在第一次提交后植入 cookie，但我不确定如何。

任何帮助将不胜感激。最好的问候，-Arseny

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:54:39.293

避免用户多次单击按钮的最简单方法是在您的页面中添加一些 Javascript。这将不适用于脚本或按下`F5`.

```
<input type="submit" name="go" id="go" value="go" onclick="this.disabled='disabled'"/> 
```

* * *

您还可以在保存用户 IP 地址和时间戳的服务器上写入日志文件/数据库，并检查他是否已提交。除了设置和检查 cookie 之外，这样做可能是可行的方法。

对于 cookie，请参阅文档中的[cookie 。](http://search.cpan.org/dist/CGI/lib/CGI.pm#HTTP_COOKIES)`CGI`简单的例子：

```
use strict; use warnings;
use CGI;

my $q = new CGI;

my $submitted = 0;
if ($q->cookie('submitted ')) {
  $submitted = 1;
}
# Here you could place the file/db check to also set $voted
if ($submitted) {
  print $q->header('text/plain');
  print "You have already submitted!";
} else {
  # Do stuff with the form, like $q->param('foo')...
  # Once you're done, place the cookie
  print $q->header(
    -type   => 'text/plain', 
    -cookie => $q->cookie(
      -name    => 'submitted',
      -value   => 1,
      -expires => '+1y',
  ));
} 
```

# linux - 无法打开：HTTP 状态为“403 Forbidden” - 请求中指定的“sensor”参数必须设置为“true”或“false”

> ID：11504329
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:27:59.460
> 
> 标签：linux, r, google-maps, rgooglemaps

最初这个问题及其前身是在 R-Sig-Geo 上提出的：

[https://stat.ethz.ch/pipermail/r-sig-geo/2012-July/015648.html](https://stat.ethz.ch/pipermail/r-sig-geo/2012-July/015648.html)

“mow.R”包含：

```
library (RgoogleMaps)
png (filename="RgoogleMaps-package_%03d_med.png", width=480, height=480)

MyMap <- GetMap(markers =
'40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc',
sensor = "false", destfile = "MyTile1.png");

tmp <- PlotOnStaticMap(MyMap,lat = c(40.702147,40.711614,40.718217),
lon = c(-74.015794,-74.012318,-73.998284), cex=1.5,pch=20,col=c('red',
'blue', 'green'), add=F) 
```

从 R 执行此操作会导致：

```
> source('mow.R')
[1] "Note that when center and zoom are not specified, no meta
information on the map tile can be stored. This basically means that R
cannot compute proper coordinates. You can still download the map tile
and view it in R but overlays are not possible. Do you want to proceed
? (y/n)"
y
[1] "40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"
[1] "http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=false40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"
Error in download.file(url, destfile, mode = "wb", quiet = TRUE) :
  cannot open URL
'http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=false40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc'
In addition: Warning message:
In download.file(url, destfile, mode = "wb", quiet = TRUE) :
  cannot open: HTTP status was '403 Forbidden'
> 
```

我复制了它的网址并将其粘贴到浏览器中：

```
http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=false40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc 
```

它导致以下消息：

> Google Maps API 服务器拒绝了您的请求。请求中指定的“sensor”参数必须设置为“true”或“false”。

当我更改`&sensor=false`上述网址中“”的位置时，它可以正常工作：

```
http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png3240.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc&sensor=false 
```

***现在如何将此更改合并到“mow.R”文件中？*** 请帮忙;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:58:49.970

您不只是*更改*传感器参数的位置。在您的第二个 URL 中，您正确设置了它，在第一个 URL 上您根本没有设置它，因为您在 false 值之后缺少一个 & 符号。

```
http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=false40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc 
```

应该：

```
http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=false&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc 
```

# php - php中的$a和$$a有什么区别？

> ID：11504335
> 
> 赞同：12
> 
> 时间：2012-07-16T12:28:13.487
> 
> 标签：php

> **可能重复：**
> [PHP 中的 $$ 是什么意思？](https://stackoverflow.com/questions/2715654/what-does-mean-in-php)

我是 PHP 新手，我不知道`$a`和之间有什么区别`$$a`。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T12:31:43.873

`$a`代表一个变量

`$$a`表示一个变量，其内容为`$a`

例子：

```
$test = "hello world";
$a = "test";
echo $$a; 
```

输出将是`hello world`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-16T12:29:48.930

如果`$a = 'b'`那么`$$a`是`$b`.

这是一个变量变量。他们是邪恶的。改用数组（它做同样的事情，但更易于维护并且能够在它们上使用数组函数）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-16T12:32:00.477

$variable 是一个普通变量 $$variable 获取变量的值并将其视为变量的名称

例如：

```
$var = 'welcome';
echo $var //prints welcome

$$var = 'to stackoverflow';

echo "$var ${$var}"; //prints welcome to stackoverflow
echo "$var $welcome"; //prints welcome to stackoverflow 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-16T12:32:28.473

Double Dollar 是一种以编程方式创建变量并为其赋值的强大方法。

例如：

```
<?php

$a = “amount”;
$$a =1000;
echo $amount; //echo’s 1000 on screen

?> 
```

在上面的示例中，您可以看到变量 $a 存储值“金额”。当您使用双美元符号 ($$) 时，您间接引用了 $a 的值，即金额。

所以，像这样 $$a = 1000; 变量 $amount 被创建，我将值 1000 分配给 $amount。通过这种方式，您可以以编程方式创建变量并为其赋值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-16T12:29:50.673

`$a`是变量的内容`a`，`$$a`是*命名*的变量的内容`$a`。

不要在您自己的代码中使用此语法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-16T12:30:00.530

`$$a`是名称所在的变量`$a`

假设`$a = "foo";`,`$$a`将与`$foo`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-16T12:31:28.240

在 PHP 中，每个变量都以 $ 开头。

因此，例如，您有变量`$a = 'var'`;

所以`$$a == $var`

这个新变量将以另一个变量的“内容”作为名称。

# mysql - MySQL 连接保持打开状态（我认为......）

> ID：11504337
> 
> 赞同：1
> 
> 时间：2012-07-16T12:28:20.220
> 
> 标签：mysql

好的，所以今天早上我从我的 vbulletin 网站收到了大量的自动邮件垃圾邮件，其中 mysql 错误说明

> `无法连接到 '127.0.0.1' 上的 MySQL 服务器"
> 
> 太多联系
> 
> 用户用户名已经有超过“max_user_connections”个活动连接。

我以前从未在主机上遇到过这种情况，我的两个站点上没有那么多访问者。一个运行 vbulletin 的站点每天访问量在 300-700 之间，而我的第二个站点是我自己整理的，所以这可能是连接保持打开状态的原因，我昨天开始宣传它，但它也没有吸引到很多访问者，所以我没有不认为是连接的用户太多，我认为是连接保持打开或什么的......

有没有办法找出这个问题的来源，或者连接保持打开时间过长的位置，或者任何信息实际上都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:34:26.750

在 MySQL shell 中，您可以运行`show processlist;`它，它将显示当前正在运行的进程、登录的用户、他们选择的数据库以及他们来自哪个主机。这可能会为您提供一些关于过度连接的来源的线索。也许您可以看到运行了很长时间的查询（结合不耐烦的用户反复点击刷新）。

请记住，如果您的任何代码使用持久连接运行，那么该列表中将会有一堆空闲进程，在这种情况下这是完全正常的。

# android - android 布局中 3 x 3 的九个图像

> ID：11504338
> 
> 赞同：0
> 
> 时间：2012-07-16T12:28:44.407
> 
> 标签：android, layout

对于介绍页面，对于 Android 应用程序，我想按以下顺序制作 9 个按钮：

```
[img1][img2][img3]
[img4][img5][img6]
[img7][img8][img9] 
```

每个图像之间有一个空格（10dp）

问题是，当我使用 LinearLayouts 时，总是有一个空白。一张桌子也一样。我不能使用 GridLayout，因为应用程序需要支持 Android 2.2

我希望你能帮助我！

PS这里是代码示例

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/tl"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_tl" />

            <ImageView
                android:id="@+id/ImageView05"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:src="@drawable/home_tc" />

            <ImageView
                android:id="@+id/ImageView06"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_tr" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_ml" />

            <ImageView
                android:id="@+id/ImageView02"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:src="@drawable/home_mc" />

            <ImageView
                android:id="@+id/ImageView03"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_mr" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_bl" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:src="@drawable/home_bc" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="220dp"
                android:layout_height="220dp"
                android:src="@drawable/home_br" />
        </LinearLayout>
    </LinearLayout> 
```

问题是图像不适合屏幕。它必须适合各种尺寸（即使是平板电脑 10.1）

已解决：我为每个图像视图添加`android:adjustViewBounds="true"`并使用 `layout_weight="1"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:42:25.407

尝试使用具有水平方向的 LinearLayout，在其中，取 3 个 ImageButtons 并将每个的宽度保持为 fill_parent 和 weight = 1，这将使所有 3 个 imageButton 的宽度相等。

例如

```
<LinearLayout
android:orientaion="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>

   <LinearLayout
   android:orientaion="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   >
    <ImageButton
    android:layout_width="fill_parent"
    android:weight="1"
    android:layout_height="wrap_content"
    />
    <ImageButton
    android:layout_width="fill_parent"
    android:weight="1"
    android:layout_height="wrap_content"
    />
    <ImageButton
    android:layout_width="fill_parent"
    android:weight="1"
    android:layout_height="wrap_content"
    />
</LinearLayout>

<LinearLayout
  android:orientaion="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  >
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
   </LinearLayout>

   <LinearLayout
     android:orientaion="horizontal"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     >
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
      <ImageButton
      android:layout_width="fill_parent"
      android:weight="1"
      android:layout_height="wrap_content"
      />
  </LinearLayout>
<LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:32:07.557

我认为您需要将其添加到`ImageView`：

```
android:adjustViewBounds="true" 
```

# android - 尽管 Heap Size 小于 6MB，但 OutOfMemory

> ID：11504339
> 
> 赞同：1
> 
> 时间：2012-07-16T12:28:57.730
> 
> 标签：android, heap-memory

在我的 Android 开发者控制台中，我看到一些崩溃

```
Caused by: java.lang.OutOfMemoryError: (Heap Size=5795KB, Allocated=3859KB) 
```

尤其是小堆大小（小于 6MB）让我感到惊讶。

我该如何解释这个堆大小？这是 OOM 调用之前的堆大小吗？我可以假设最大堆至少为 16MB 吗？如果是这样，这是否意味着我尝试分配至少 10MB (16MB - 6MB) 的块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:32:30.997

您可以使用以下方法检查内存状态：

```
ActivityManager actMgr = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
ActivityManager.MemoryInfo minfo = new ActivityManager.MemoryInfo();
actMgr.getMemoryInfo(minfo);
if(minfo.lowMemory) { //do something
} 
```

# java - 添加操作后，Swing 的复选框组件上缺少文本

> ID：11504340
> 
> 赞同：3
> 
> 时间：2012-07-16T12:28:57.697
> 
> 标签：java, swing, jbutton, jcheckbox, windowbuilder

我正在编写一个简单的 Swing 应用程序。我尝试添加一个复选框，如下所示。一旦我添加了 actionHandler **loadPickers**，名称**Foo**就从它位于**chckbxNewCheckBox**右侧的位置消失了。我尝试添加对**setHideActionText()**的调用，但现在没有显示。

```
JCheckBox chckbxNewCheckBox = new JCheckBox("Foo");
chckbxNewCheckBox.setToolTipText("");
chckbxNewCheckBox.setName("");
chckbxNewCheckBox.setHideActionText(true);
chckbxNewCheckBox.setAction(loadPickers);
mainPanel.add(chckbxNewCheckBox, "flowy,cell 0 1"); 
```

如果我将其更改为此它可以正常工作。我看到文字“Foo”。

```
JCheckBox chckbxNewCheckBox = new JCheckBox("Foo");
chckbxNewCheckBox.setToolTipText("");
chckbxNewCheckBox.setName("");
chckbxNewCheckBox.setHideActionText(true);
chckbxNewCheckBox.setAction(loadPickers);
chckbxNewCheckBox.setText("Foo"); //THIS DOES NOT WORK IF IT COMES BEFORE SET ACTION
mainPanel.add(chckbxNewCheckBox, "flowy,cell 0 1"); 
```

为了完整起见，我在此处包含了该操作。为什么它会这样工作？我在这里错过了什么吗？目前，我正在使用带有 Mig 布局系统（我非常喜欢）的 Eclipse 的 WindowBuilder 插件。不幸的是，我还没有弄清楚是否有办法让 WindowBuilder 使用 .setText() 方法而不是使用构造函数。任何关于我做错了什么的帮助，任何关于为什么这种行为存在这样的见解，或者 WindowBuilder 的一个好的解决方法都会很棒。

```
private class LoadPickers extends AbstractAction {
    public LoadPickers() {
        //putValue(NAME, "SwingAction_2");
        putValue(SHORT_DESCRIPTION, "Some short description");
    }
    public void actionPerformed(ActionEvent e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:39:12.810

正如[AbstractButton.setAction](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setAction%28javax.swing.Action%29)的 JavaDoc 中所解释的：

> 设置 Action 会立即更改[Swing Components Supporting Action](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#buttonActions)中描述的所有属性。随后，按钮的属性会随着动作属性的变化而自动更新。

因此，设置操作会影响以下所有属性：

*   启用
*   工具提示文本
*   动作命令
*   助记符
*   文本
*   显示的助记符索引
*   图标（JCheckBox 不适用）
*   加速器（JCheckBox 不适用）
*   选择

# c# - c# Registry to XML 无效字符问题

> ID：11504342
> 
> 赞同：2
> 
> 时间：2012-07-16T12:29:02.153
> 
> 标签：c#, xml, registry, invalid-characters

尝试从注册表创建 XML 文件时遇到问题。在我的笔记本电脑（W7 64b）上它工作正常，生成了 xml 文件，但在另一台计算机（Xp 32b）上引发了异常：System.ArgumentException '.'，十六进制值 0x00，是无效字符。我已经阅读了一些有用的东西，但我不知道在这种情况下如何解决，这里是代码：

```
 try
        {

        string regPath = "SOFTWARE\\IPS";
        XElement xRegRoot = new XElement("Root", new XAttribute("Registry", regPath));

        ReadRegistry(regPath, xRegRoot);

        string xmlStringReg = xRegRoot.ToString();

        XmlDocument docR = new XmlDocument();
        docR.LoadXml(xmlStringReg);

            docR.Save(AppDomain.CurrentDomain.BaseDirectory + "\\_RegistryList.xml");
        }
        catch (System.Exception ex)
        {
            Console.WriteLine(ex.ToString());
            LogToFile(ex.ToString());
        }

    private static void ReadRegistry(string keyPath, XElement xRegRoot)
    {
        string[] subKeys=null;
        RegistryKey HKLM = Registry.LocalMachine;
        RegistryKey RegKey = HKLM.OpenSubKey(keyPath);

        try
        {
            subKeys = RegKey.GetSubKeyNames();
            foreach (string subKey in subKeys)
            {
                string fullPath = keyPath + "\\" + subKey;                    
                Console.WriteLine("\r\nKey Name  | " + fullPath);
                LogToFile("Key Name  | " + fullPath);

                XElement xregkey = new XElement("RegKeyName", new XAttribute("FullName", fullPath), new XAttribute("Name", subKey));
                xRegRoot.Add(xregkey);
                ReadRegistry(fullPath, xRegRoot);
            }

            string[] subVals = RegKey.GetValueNames();
            foreach (string val in subVals)
            {
                string keyName = val;
                string keyType = RegKey.GetValueKind(val).ToString();
                string keyValue = RegKey.GetValue(val).ToString();

                Console.WriteLine("Key Value | " + keyType + " | " + keyName + " | " + keyValue);
                LogToFile("Key " + keyType + " | " + keyName + " | " + keyValue);
                XElement xregvalue = new XElement("RegKeyValue", new XAttribute("keyType", keyType), new XAttribute("keyName", keyName), new XAttribute("keyValue", keyValue));
                xRegRoot.Add(xregvalue);
            }
        }
        catch (System.Exception ex)
        {
            Console.WriteLine(ex.ToString());
            LogToFile(ex.ToString());
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:47:42.117

我做了一些实验：

*   `new XElement("foo\x00bar")`投入建设。
*   `new XAttribute("foo\x00bar", "baz")`投入建设。
*   `new XText("foo\x00bar")`仅在调用时抛出`.ToString()`。

`new XAttribute("foo", "bar\x00baz")`等价于`new XAttribute("foo", new XText("bar\x00baz"))`，所以它不会抛出构造。

我没有设法让任何注册表方法返回带有空字符的字符串，但您应该能够自己找到返回的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T03:01:54.467

您可以在这里阅读更多相关信息：http: [//seattlesoftware.wordpress.com/2008/09/11/hexadecimal-value-0-is-an-invalid-character/](http://seattlesoftware.wordpress.com/2008/09/11/hexadecimal-value-0-is-an-invalid-character/)

更多关于它的信息：[XElement & UTF-8 Issue](https://stackoverflow.com/questions/5709831/xelement-utf-8-issue)

一个有效的 xml 字符列表在这里 [http://en.wikipedia.org/wiki/Valid_characters_in_XML](http://en.wikipedia.org/wiki/Valid_characters_in_XML)

但基本上你可以通过在序列化之前删除非法字符来修复它

```
/// <summary>
/// Remove illegal XML characters from a string.
/// </summary>
public string SanitizeXmlString(string xml)
{
    if (string.IsNullOrEmpty(value))
    {
        return value;
    }

    StringBuilder buffer = new StringBuilder(xml.Length);

    foreach (char c in xml)
    {
        if (IsLegalXmlChar(c))
        {
            buffer.Append(c);
        }
    }

    return buffer.ToString();
}

/// <summary>
/// Whether a given character is allowed by XML 1.0.
/// </summary>
public bool IsLegalXmlChar(int character)
{
    return
    (
         character == 0x9 /* == '\t' == 9   */          ||
         character == 0xA /* == '\n' == 10  */          ||
         character == 0xD /* == '\r' == 13  */          ||
        (character >= 0x20    && character <= 0xD7FF  ) ||
        (character >= 0xE000  && character <= 0xFFFD  ) ||
        (character >= 0x10000 && character <= 0x10FFFF)
    );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T21:10:57.793

以下是 a) 编译和 b) 处理代理对的一些小改进：

```
 /// <summary>
    /// Remove illegal XML characters from a string.
    /// </summary>
    public static string SanitizeString(string s)
    {
        if (string.IsNullOrEmpty(s))
        {
            return s;
        }

        StringBuilder buffer = new StringBuilder(s.Length);

        for (int i = 0; i < s.Length; i++)
        {
            int code;
            try
            {
                code = Char.ConvertToUtf32(s, i);
            }
            catch (ArgumentException)
            {
                continue;
            }
            if (IsLegalXmlChar(code))
                buffer.Append(Char.ConvertFromUtf32(code));
            if (Char.IsSurrogatePair(s, i))
                i++;
        }

        return buffer.ToString();
    }

    /// <summary>
    /// Whether a given character is allowed by XML 1.0.
    /// </summary>
    private static bool IsLegalXmlChar(int codePoint)
    {
        return (codePoint == 0x9 ||
            codePoint == 0xA ||
            codePoint == 0xD ||
            (codePoint >= 0x20 && codePoint <= 0xD7FF) ||
            (codePoint >= 0xE000 && codePoint <= 0xFFFD) ||
            (codePoint >= 0x10000/* && character <= 0x10FFFF*/) //it's impossible to get a code point bigger than 0x10FFFF because Char.ConvertToUtf32 would have thrown an exception
        );
    } 
```

# php - 如何在包含字符串的文件行中查找并在该行的末尾添加一些内容

> ID：11504343
> 
> 赞同：1
> 
> 时间：2012-07-16T12:29:01.810
> 
> 标签：php, find

我有要编辑的文件，其中包含：

```
Categories,
Diamond,10,11,
Coal,21,21, 
```

**如何在包含“钻石”的行尾添加字符串？**

我所拥有的是可以在文件末尾添加字符串但不知道如何使其在特定行中添加该字符串的代码：

```
$function_Result = mysql_fetch_row($function_Ask, 0);

$file_To_Edit = "item_Data.csv";
$opened_File = fopen($file_To_Edit, 'w') or die("Error. Code:2 - Can not open file $file_To_Edit");

$string_Data = $function_Result[0] . ",";
fwrite($opened_File, $string_Data);
fclose($opened_File); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:41:25.397

`preg_replace`如果文件内容不是太大， 我应该使用。

```
$content = file_get_contents('file.txt');
/* in case of unwanted \r */ $content = str_replace("\r", '', $content);
$content = preg_replace("#^(Diamond.*)$#m", '$1' . $append, $content);
file_put_contents('file.txt', $content); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:50:20.480

在处理大文件时，所有以前发布的解决方案都可能会失败。这是一种适用于任何大小文件的方法。（应该添加一些检查文件是否可读和可写等）

```
<?php
$file = "item_Data.csv"
$tmpFile = $file .".tmp";

$in = fopen($file, "r")
$out = fopen($tmpFile, "w")

while (($buffer = fgets($in)) !== false) {

    if (preg_match('/my search pattern/', $buffer )) {

        $buffer .= 'append this to the matched line';
    }

    fwrite($out, $buffer);
}

fclose($in);
fclose($out);
unlink($file);
rename($tmpFile, $file);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:47:18.827

```
<?php 

$string_Data = '444555';

$file_To_Edit = "./11.csv";

$opened_File = file($file_To_Edit) or die("Error. Code:2 - Can not open file $file_To_Edit"); // Reads entire file into array of file lines

$diamond_lines = preg_grep('#^Diamond#', $opened_File); // Finds array with line started with 'Diamonds'

foreach(array_keys($diamond_lines) as $key) { // Runs 'Diamonds' array

    $opened_File[$key] = substr($opened_File[$key], 0, -1) . $string_Data; // Removes the last character from 'Diamond' line (new line chracter) and adds $string_Data variable at the end

}

//var_dump($opened_File);

$f = fopen($file_To_Edit, 'w');

fwrite($f, implode("\n", $opened_File)); // Writes new .CSV file

fclose($f);

?> 
```

# c# - SOS 调试 C#.Net 中的对象大小

> ID：11504345
> 
> 赞同：3
> 
> 时间：2012-07-16T12:29:13.347
> 
> 标签：c#, debugging, sos

```
class Book
{
    public int ISBN { get; set; }      
}

void Method() 
{
  Book book = new Book(); 
  // Break and verify in SoS Debugging.
}

   !dumpheap -type Book
   PDB symbol for clr.dll not loaded
   Address       MT     **Size**
   00c6b76c 009b7f2c       **12**      
   total 0 objects
   Statistics:
   MT    Count    TotalSize Class Name
   009b7f2c        1           12 GCTest.Book
   Total 1 objects 
```

这里对象的大小是 12 字节。它只包含一个整数属性。sizeof(int) = 4 字节剩余 8 字节？（对象实例化）。任何人都可以阐明一些观点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:32:27.823

每个参考对象都附加了两个额外的字段：

`Object type ptr` : 4 个字节（*内存地址（特定于 AppDomain），其中包含一个结构，该结构保存引用类型的方法表，对象被实例化或指向*）

`Sync block adress`: 4 字节（*同步块地址并指向进程范围表中的位置，该表包含用于同步访问引用类型实例的结构*）

更多信息检查[本文中的内存布局](http://www.codeproject.com/Articles/20481/NET-Type-Internals-From-a-Microsoft-CLR-Perspecti#4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:37:44.570

您在对象结构之上有 8 个字节的信息：

4 个字节用于*对象引用*

*syncblk* 4 个字节：用于同步的特殊内存块。在*您的*特定情况下，它将设置为 0，因为您的对象不参与任何同步操作。

换句话说：

> <--SyncBlock(4bytes)--> <--ObjectReferece(4bytes)--> <--你的对象数据-->

有关更多信息，请查看：

[深入了解 .NET Framework 内部结构，了解 CLR 如何创建运行时对象](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)

# php - codeigniter 调整图像大小并创建缩略图

> ID：11504350
> 
> 赞同：4
> 
> 时间：2012-07-16T12:29:31.847
> 
> 标签：php, codeigniter, resize, gd

嗨，根据 ci 文档，您可以使用 image_lib 调整图像大小，并且有一些选项建议我们可以从该图像创建额外的缩略图

```
create_thumb    FALSE   TRUE/FALSE (boolean)    Tells the image processing function to create a thumb.  R
thumb_marker    _thumb  None    Specifies the thumbnail indicator. It will be inserted just before the file extension, so mypic.jpg would become mypic_thumb.jpg    R 
```

所以这是我的代码

```
 $config_manip = array(
            'image_library' => 'gd2',
            'source_image'  => "./uploads/avatar/tmp/{$this->input->post('new_val')}",
            'new_image'     => "./uploads/avatar/{$this->input->post('new_val')}",
            'maintain_ratio'=> TRUE ,
            'create_thumb'  => TRUE ,
            'thumb_marker'  => '_thumb' ,
            'width'         => 150,
            'height'        => 150 
        );

        $this->load->library('image_lib', $config_manip);
        $this->image_lib->resize(); 
```

我会假设这段代码调整了我的图像大小并创建了一个缩略图，但我只得到一个具有指定尺寸和 _tump 后缀的图像

我也尝试添加此代码以手动创建第二张图片，但仍然无法正常工作，我只得到一张图片

```
 $this->image_lib->clear();

$config_manip['new_image'] = 
"./uploads/avatar/thumbnail_{$this->input->post('new_val')}";

            $config_manip['width']     = 30 ;
            $config_manip['height']    = 30 ;
            $this->load->library('image_lib', $config_manip);
            $this->image_lib->resize(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-16T13:21:38.187

似乎路径是您代码中的问题。我自己修改并测试了它的工作原理。

```
public function do_resize()
{
    $filename = $this->input->post('new_val');
    $source_path = $_SERVER['DOCUMENT_ROOT'] . '/uploads/avatar/tmp/' . $filename;
    $target_path = $_SERVER['DOCUMENT_ROOT'] . '/uploads/avatar/';
    $config_manip = array(
        'image_library' => 'gd2',
        'source_image' => $source_path,
        'new_image' => $target_path,
        'maintain_ratio' => TRUE,
        'create_thumb' => TRUE,
        'thumb_marker' => '_thumb',
        'width' => 150,
        'height' => 150
    );
    $this->load->library('image_lib', $config_manip);
    if (!$this->image_lib->resize()) {
        echo $this->image_lib->display_errors();
    }
    // clear //
    $this->image_lib->clear();
} 
```

希望这对您有所帮助。谢谢！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-29T09:44:11.600

创建缩略图的简单方法。

```
function _create_thumbnail($fileName, $width, $height) 
{
    $this->load->library('image_lib');
    $config['image_library']  = 'gd2';
    $config['source_image']   = $_SERVER['DOCUMENT_ROOT']. $fileName;       
    $config['create_thumb']   = TRUE;
    $config['maintain_ratio'] = TRUE;
    $config['width']          = $width;
    $config['height']         = $height;
    $config['new_image']      = $_SERVER['DOCUMENT_ROOT']. $fileName;               
    $this->image_lib->initialize($config);
    if (! $this->image_lib->resize()) { 
        echo $this->image_lib->display_errors();
    }        
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-31T21:18:17.087

您的代码没问题，但您需要做一些小改动。

```
 $this->load->library('image_lib');
 $this->image_lib->initialize($config_manip); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T15:37:04.340

如果要使用方法创建多个图像，则每次尝试调整大小时都`resize()`需要调用。`$this->image_lib->initialize($config);`

本教程为我解决了[上传图像并在 CodeIgniter 中创建多个缩略图大小](http://www.codersmount.com/2012/11/upload-image-and-create-multiple-thumbnail-sizes-in-codeigniter/ "在 CodeIgniter 中上传图像并创建多个缩略图大小")

# silverlight-5.0 - Silverlight Application 5 工作和带宽

> ID：11504352
> 
> 赞同：0
> 
> 时间：2012-07-16T12:29:45.890
> 
> 标签：silverlight-5.0

我只是想确认，如果构建一个 silverlight 应用程序并且包括消耗的 dll 在内的整个包达到 50 mb，然后当用户在浏览器中使用此应用程序时，所有 50 mb 应用程序是否都会通过网络传输？如果是，那么是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:56:31.713

是的，必须下载整个 XAP 文件，包括您包含的 DLL。然而，可以使用[应用程序库缓存](http://msdn.microsoft.com/en-us/library/dd833069%28VS.95%29.aspx)技术来提高下载效率。

通过在项目*属性*窗口的*Silverlight选项卡中选中**使用应用程序库缓存来减少 XAP 大小*复选框，将只下载启动时所需的程序集。需要时下载剩余的组件（零件）。当用户重新访问 Silverlight 应用程序时，组件或部件也将缓存在文件系统中以供以后检索。

# iphone - 如何去除 iphone 图标光泽效果？（在 FLASH CS5.5 中）

> ID：11504357
> 
> 赞同：1
> 
> 时间：2012-07-16T12:29:56.570
> 
> 标签：iphone, flash, air, icons

我更改了代码`![CDATA[<key>UIDeviceFamily</key><array><string>2</string></array>]]` ，`![CDATA[ <key>UIPrerenderedIcon</key><true/><array><string>2</string></array>]]` 但没有用。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:19:27.993

为什么在标题中包含 FLASH CS5？

无论如何，问题已经在这里回答了：

[通过 UIPrerenderedIcon 移除 iPhone 上的 Shine/Gloss 效果在设备上不起作用](https://stackoverflow.com/questions/2958920/removing-shine-gloss-effect-on-the-iphone-through-uiprerenderedicon-not-working)

这显示了如何使其适用于模拟器和 iOS 5 硬件。

具体来说，

`

```
<key>CFBundlePrimaryIcon</key>
<dict>
    <key>CFBundleIconFiles</key>
    <array>
        <string>Icon.png</string>
        <string>Icon@2x.png</string>
    </array>
    <key>UIPrerenderedIcon</key>
    <true/>
</dict> 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:05:59.720

*如果您写下您在哪里*更改了该行，那将很有用。但是，它似乎是 Info.plist 的一个片段，因此，您更改的行的格式无效。尝试这样的事情：

```
<key>UIPrerenderedIcon</key>
<true/>
<key>UIDeviceFamily</key>
<array><string>2</string></array> 
```

还要检查您是否在“图标文件（iOS5）”字典中设置了预渲染图标值，如[通过 UIPrerenderedIcon 在 iPhone 上移除光泽/光泽效果中所述在设备上不起作用](https://stackoverflow.com/questions/2958920/removing-shine-gloss-effect-on-the-iphone-through-uiprerenderedicon-not-working/8410769#8410769)

# macos - 如何设置[NSString defaultCStringEncoding]？

> ID：11504366
> 
> 赞同：0
> 
> 时间：2012-07-16T12:30:23.357
> 
> 标签：macos, nsstring, osx-lion

如何更改`[NSString defaultCStringEncoding]`返回值的值？我需要更改什么样的环境变量或系统设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:38:00.080

我不相信你可以改变它，从[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/defaultCStringEncoding)：

> 一般来说，这种编码应该很少使用，如果有的话。

请改用此方法：

```
+ (id)stringWithCString:(const char *)cString encoding:(NSStringEncoding)enc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:18:46.590

终于找到了解决办法。如果你真的想要的话，你可以`~/.CFUserTextEncoding`用来弄乱系统。`defaultCStringEncoding`（就像 Adob​​e 所做的那样……）

有关更多信息，请参阅：[https ://superuser.com/questions/82123/mac-whats-cfusertextencoding-for](https://superuser.com/questions/82123/mac-whats-cfusertextencoding-for)

有趣的是，它*确实*改变了`[NSString getCString:maxLength:encoding:]`虽然的行为。同样，您可以`defaultCStringEncoding`通过`NSMacOSRomanStringEncoding`将上面的文件设置为`0:0`.

# ruby - 使用 Ruby 和 Sinatra，尝试在页面上填充区域而不重新加载整个页面

> ID：11504370
> 
> 赞同：2
> 
> 时间：2012-07-16T12:30:38.260
> 
> 标签：ruby, ajax, sinatra, haml

我正在使用 Ruby、Sinatra 和 HAML 开发一个小型 Web 应用程序。

我目前正在努力解决的场景是我曾经使用 Ajax 和 Javascript 在 PHP 中解决的问题，并且不知道如何最好地在 Ruby 中解决它（如果有更优化的最佳实践是什么）接近这个的方法）。

我有一个屏幕如下：

![小样](../Images/f9b4a1fcf50d84f278f4bac0f46ad432.png)

我希望发生的是，当用户单击其中一个按钮（例如**Show most popular**）时，系统会调用一个函数来查询数据库以获取相关记录并使用适当的重新填充“条目”框记录。我想在不重新加载页面的其余部分或其他任何影响的情况下执行此操作，只是“条目”框。奖励 - 如果我可以在获取数据时显示一点“加载”螺旋。

我的研究使我找到了被称为“typhoeus”的宝石，我发现它非常棒，但不确定它是否适用于这种情况（或者如果适用，如何实施）。

任何形式的帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:06:59.027

看起来 pjax 就是您要寻找的东西。

[https://github.com/defunkt/jquery-pjax/tree/heroku](https://github.com/defunkt/jquery-pjax/tree/heroku)

作者在他的示例应用程序中使用了 Sinatra。尽管他确实使用了erb，但我相信如果您将模板引擎切换到haml，它不会引起任何问题

# actionscript-3 - JavaScript Flex 通信

> ID：11504371
> 
> 赞同：0
> 
> 时间：2012-07-16T12:30:39.600
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

我们目前有一个 JavaScript 函数，它调用 Flex 函数作为回调反应。

```
 JavaScript-->

  var newwindow;
  var me = document.getElementById("myApp");

  function getAreas(){
    thisMovie("swfID");
    me.setAreas("....");   
  }

  Flex-->

  public function setAreas(areas:String):void{...}
  ....
  public function init(){
         ExternalInterface.call("getAreas()");
  } 
```

当我们尝试向另一个 JavaScript 方法添加另一个调用时，似乎失败了。为了绕过我们现在使用一种方法的问题，虽然一个接一个地触发两种方法有问题吗？

```
 For Example:

  Flex-->

  ExternalInterface.call("getAreas()");
  ExternalInterface.call("getUsers()");

  public function setUsers(areas:String):void{...} 

  JavaScript--> 

   function getUsers(){
    thisMovie("swfID");
    me.setUsers("....");   
  } 
```

# android - 在设备上找不到 sqlite

> ID：11504374
> 
> 赞同：0
> 
> 时间：2012-07-16T12:30:54.157
> 
> 标签：android, sqlite, device

我正在尝试连接到 Sqlite-DB。在设备上进行测试，我得到一个类未发现异常。我这样连接：

```
 Class.forName("org.sqlite.JDBC");
        connection = DriverManager.getConnection("jdbc:sqlite:" + applicationPath + "data/appdata.db"); 
```

应用程序路径来自上下文并指向数据文件夹。到现在为止还挺好。jar 位于构建路径和清单中，我具有以下权限：

```
 <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"  /> 
```

我错过了什么？任何指针表示赞赏！

最好的问候，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:17:50.450

一些制造商交付的设备没有安装 sqlite。如果设备具有 arm 处理器，您可以将 sqlite 程序从模拟器复制到您的设备。

启动模拟器并使用 android-sdk 中平台工具中的 adb 命令

adb 拉 /system/xbin/sqlite3

在本教程之后安装设备的系统分区读/写：

[http://android-tricks.blogspot.com/2009/01/mount-filesystem-read-write.html](http://android-tricks.blogspot.com/2009/01/mount-filesystem-read-write.html)

使用 adb 命令将 sqlite3 文件复制到您的设备

adb push sqlite3 /system/xbin/

重新启动设备后， sqlite3 命令应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:10:12.783

如果你想连接到设备上的本地 sqlite 数据库，那不是办法。

在这里阅读：http: [//developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T12:42:43.220

还要检查一下：[https](https://code.google.com/p/adb-sqlite-jdbc-driver/) ://code.google.com/p/adb-sqlite-jdbc-driver/ 但您应该已经安装了 sqlite3 命令。然后，您可以从桌面连接到设备中的 sqlite db

# macos - gdb 因“无法找到进程 ID 的 Mach 任务端口”错误而失败

> ID：11504377
> 
> 赞同：156
> 
> 时间：2012-07-16T12:31:05.437
> 
> 标签：macos, gdb

我的应用程序运行良好，但 gdb 无法调试它并出现以下错误

```
(gdb) run
Starting program: /path/to/app 
Unable to find Mach task port for process-id 83767: (os/kern) failure (0x5). 
```

我在 OS X Lion 上。GDB 版本是

```
$ gdb --version
GNU gdb 6.3.50-20050815 (Apple version gdb-1752) (Sat Jan 28 03:02:46 UTC 2012)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin". 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2014-01-12T21:50:35.687

当我更改为`sudo gdb executableFileName`! :)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-03-19T23:12:03.750

`gdb`在 Snow Leopard 和更高版本的 Mac OS 中，对可执行文件进行代码签名是不够的。

您必须按照本指南使其工作：[http ://www.opensource.apple.com/source/lldb/lldb-69/docs/code-signing.txt](http://www.opensource.apple.com/source/lldb/lldb-69/docs/code-signing.txt)

该指南解释了如何做到这一点`lldb`，但过程是完全相同的`gdb`。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-10-17T18:47:23.683

您需要创建证书并签署 gdb：

*   打开应用程序“钥匙串访问”（/Applications/Utilities/Keychain Access.app）
*   打开菜单/钥匙串访问/证书助手/创建证书...
*   选择一个名称（示例中为 gdb-cert），将“身份类型”设置为“自签名根”，将“证书类型”设置为“代码签名”并选择“让我覆盖默认值”。点击“继续”。您可能希望将预定义的 365 天期限延长至 3650 天。
*   单击“继续”几次，直到进入“为证书指定位置”屏幕，然后将“钥匙串设置为系统”。
*   如果您无法将证书存储在“系统”钥匙串中，请在“登录”钥匙串中创建它，然后将其导出。然后，您可以将其导入“系统”钥匙串。
*   在钥匙串中选择“系统”，您应该会找到您的新证书。使用证书的上下文菜单，选择“获取信息”，打开“信任”项，并将“代码签名”设置为“始终信任”。
*   您必须退出“Keychain Access”应用程序才能使用证书并通过终止当前正在运行的“taskgated”进程重新启动“taskgated”服务。或者，您可以重新启动计算机。
*   最后你可以签署 gdb：

    `sudo codesign -s gdb-cert /usr/local/bin/ggdb`

    `sudo ggdb ./myprog`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-12-30T21:18:59.090

问题是您没有以 root 用户身份登录（这是您不想要的）。您需要为 gdb 创建一个证书以允许访问。按照本教程，你应该很高兴......

[http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)

如果一切都失败了，只需使用：`sudo gdb executableFileName`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-01T15:21:34.647

[这个链接](http://wiki.lazarus.freepascal.org/GDB_on_OS_X_Mavericks_and_Xcode_5)有最清晰和最详细的一步一步让这个错误对我来说消失。

在我的情况下，我必须将密钥作为“系统”密钥，否则它不起作用（不是每个 url 都提到）。

杀死`taskgated`也是一种可行（且更快）的替代方法，而不必重新启动。

在开始此过程之前，我还[卸载了 MacPorts](https://www.macports.org/guide/chunked/installing.macports.uninstalling.html)`brew uninstall gdb` ，并使用.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-10T19:50:44.103

我需要这个命令来使它在 El Capitan 上工作：

```
sudo security add-trust -d -r trustRoot -p basic -p codeSign -k /Library/Keychains/System.keychain ~/Desktop/gdb-cert.cer 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-27T01:27:28.460

我按照[本](http://ntraft.com/installing-gdb-on-os-x-mavericks/)教程进行操作，一切正常。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-21T10:40:05.630

在 MacOSX 上，lldb 需要进行代码签名。调试和发布版本设置为使用名为 lldb_codesign 的代码签名证书进行代码签名。

```
If you don't have one yet you will need to:
- Launch /Applications/Utilities/Keychain Access.app

- In Keychain Access select the "login" keychain in the "Keychains"
  list in the upper left hand corner of the window.

- Select the following menu item:

    Keychain Access->Certificate Assistant->Create a Certificate...

- Set the following settings

    Name = lldb_codesign
    Identity Type = Self Signed Root
    Certificate Type = Code Signing

- Click Continue
- Click Continue
- Click Done
- Click on the "My Certificates"
- Double click on your new lldb_codesign certificate
- Turn down the "Trust" disclosure triangle

    Change:
        When using this certificate: Always Trust

- Enter your login password to confirm and make it trusted

The next steps are necessary on SnowLeopard, but are probably because of a bug
how Keychain Access makes certificates.

- Option-drag the new lldb_codesign certificate from the login keychain to
  the System keychain in the Keychains pane of the main Keychain Access window
  to make a copy of this certificate in the System keychain.  You'll have to
  authorize a few more times, set it to be "Always trusted" when asked.
- Switch to the System keychain, and drag the copy of lldb_codesign you just
  made there onto the desktop.
- Switch to Terminal, and run the following:

sudo security add-trust -d -r trustRoot -p basic -p codeSign -k /Library/Keychains/System.keychain ~/Desktop/lldb_codesign.cer

- Right click on the "lldb_codesign" certificate in the "System" keychain (NOT
  "login", but the one in "System"), and select "Delete" to delete it from
  the "System" keychain.
- Reboot
- Clean and rebuild lldb and you should be able to debug.

That should do it. 
```

**[注意：-lldb 在 mac 中用作 gdb。]**

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-10T21:10:15.950

这是一个非常有用的[指南](https://gist.github.com/hlissner/898b7dfc0a3b63824a70e15cd0180154)，它解决了我的问题（OSX 10.13.6）。

1.  打开钥匙串访问
2.  在菜单中，打开 Keychain Access > Certificate Assistant > Create a certificate
3.  给它一个名字（例如gdbc）
    *   身份类型：自签名根
    *   证书类型：代码签名
    *   检查：让我覆盖默认值
4.  继续，直到它提示您：“为...指定位置”
5.  将钥匙串位置设置为系统
6.  创建证书并关闭助手。
7.  在系统钥匙串中找到证书，右键单击它 > 获取信息（或直接双击它）
8.  展开信任，将代码签名设置为始终信任
9.  在终端中重新启动 taskgated：killall taskgated
10.  在终端中运行**`codesign -fs gdbc /usr/local/bin/gdb`**：这要求输入 root 密码

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-01-31T19:58:31.127

这些说明适用于 OSX High Sierra，并避免以 root 身份运行 gdb（糟糕！）。我最近从 OSX 10.13.2 更新到 10.3.3。我认为这是 gdb 8.0.1（使用自制软件安装）开始对我失败的时候。

我很难接受别人的指示。在不同的指示之后，一切都变得一团糟。于是我开始了新鲜。我或多或少地遵循了这些[指示](https://sourceware.org/gdb/wiki/BuildingOnDarwin)。

清理烂摊子：

1.  `brew uninstall --force gdb # This deletes _all_ versions of gdb on the machine`
2.  在`Applications`-> `Utilities`->`Keychain Access`中，我删除了所有以前的 gdb 证书和密钥（确保你知道你在这里做什么！）。目前还不清楚这是否有必要，但由于我一直在尝试使用其他指令创建这些证书和密钥，所以我还是将它们删除了。我在登录和系统中都有密钥和证书。

现在重新安装 gdb。

3.  `brew install gdb`
4.  内`Keychain Access`，进入菜单`Keychain Access`-> `Certificate Assistant`->`Create a Certificate`
5.  选中“让我覆盖默认值”并设置

> ```
> Name : gdb-cert
> Identity Type: Self Signed Root
> Certificate Type : Code Signing
> 
> [X] Let me override defaults 
> ```

6.  在第一个证书信息页面上：

> ```
> Serial Number : 1
> Validity Period (days): 3650 
> ```

7.  在第二个证书信息页面上，我将所有字段留空，除了已经填写的字段。

8.  在 Key Pair Information 页面上，我保留了默认值

> ```
> Key Size : 2048
> Algorithm : RSA 
> ```

9.  在 Key Usage Extension 页面上，我选中了默认值。

> ```
> [X] Include Key Usage Extension
> [X] This extension is critical
> Capabilities:
> [X] Signature 
> ```

10.  在扩展密钥使用扩展页面上，我选中了默认值。

> ```
> [X] Include Extended Key Usage Extension
> [X] This extension is critical
> Capabilities:
> [X] Code Signing 
> ```

11.  在基本约束扩展页面上，未检查任何内容（默认）。

12.  在主题备用名称扩展页面上，我将默认设置为选中状态，没有添加任何其他内容。

> ```
> [X] Include Subject Alternate Name Extension 
> ```

13.  在为证书页面指定位置上，我设置

> ```
> Keychain: System 
> ```

14.  我单击了创建并被提示输入我的密码。

15.  回到`Keychain Access`应用程序，我去`System`并右键单击`gdb-cert`并在下拉菜单下`Trust`，我将所有字段更改为`Always Trust`.

16.  重新启动计算机。

17.  在终端，我跑了`codesign -s gdb-cert /usr/local/bin/gdb`。我在提示时输入了密码。

18.  在终点站，我跑了`echo "set startup-with-shell off" >> ~/.gdbinit`

19.  我跑了`gdb myprogram`，然后`start`在 gdb 控制台中。在这里，我相信它提示我输入密码。之后，所有后续运行，它都没有提示我输入密码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-03-21T20:57:25.693

这是一种奇怪的方法，但它对我有用（MacOs HighSierra 10.13.3）。安装克莱恩。它带有 gdb。一旦使用终端运行 gdb。将 gdb 程序复制到您的 usr/local/bin/。登录，sudo等没有问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-29T15:50:29.923

对我来说，在 macOS High Sierra (10.13.3) 上按照此处的说明[在 macOS 上的 Codesign gdb](https://gist.github.com/gravitylow/fb595186ce6068537a6e9da6d8b5b96d)似乎解决了这个问题。

# iphone - 拍摄图像并在 UIImagePickerController 中点击“USE”后随机出现黑屏

> ID：11504380
> 
> 赞同：4
> 
> 时间：2012-07-16T12:31:16.043
> 
> 标签：iphone, ios, uiimage, uiimagepickercontroller, core-image

我有一个几乎完成的应用程序，现在它处于 QA 状态时，QA 工程师遇到了一个随机问题，在该问题中点击 USE 后出现黑屏`UIImagePickerController`。在图像中进一步`didFinishPickingMediaWithInfo`保存以供将来参考并显示在 中`UIImageView`，我还使用相机叠加层向 中添加按钮，`UIImagePickerView`并且应用程序的最大内存使用量不超过**13 MB**。从拍摄模式切换到相机胶卷模式时不会出现此问题。同样的观点`iADs`也正在呈现。下面是问题可能涉及的代码，还附加了图像以了解问题。任何帮助将不胜感激。

提前致谢。

![图像选择器控制器](../Images/696f4fb61cafda961874bafbcc49ad1a.png)

![这张图片是正确的，这就是应该如何呈现视图](../Images/10d8f58f2b37365082381d87defe9794.png)

![在点击使用后随机出现此屏幕，尽管在导航到其他选项卡时会出现正确的屏幕 [屏幕编号 2]。](../Images/96490b905b05d0667c484a65fd6034f3.png)

```
(void) launchCamera 
{
     // Set up the camera\
     CustomCameraView *cameraController   = [[CustomCameraView alloc] init];  
     cameraController.sourceType          = UIImagePickerControllerSourceTypeCamera;
     cameraController.delegate            = self; 
     cameraController.showsCameraControls = YES;
     cameraController.navigationBarHidden = YES;
     cameraController.toolbarHidden       = YES;

     // overlay on top of camera lens view

     UIButton *cameraRoll = [[UIButton alloc] initWithFrame:CGRectMake(15, 380, 40, 40)];
     [cameraRoll setAlpha:0.0f];
     [cameraRoll setBackgroundImage:[UIImage imageNamed:@"CamerRoll_New"] forState:UIControlStateNormal];
     [cameraRoll addTarget:self action:@selector(switchToCameraRoll) forControlEvents:UIControlEventTouchUpInside];
     cameraController.cameraOverlayView = cameraRoll;

     [UIView beginAnimations:nil context:NULL];
     [UIView setAnimationDelay:1.5f];
     cameraRoll.alpha = 1.0f;
     [UIView commitAnimations];

     [self presentModalViewController:cameraController animated:YES];

 }

-(void)switchToCameraRoll
{
    DLog(@"Camera Roll");  
    [self dismissViewControllerAnimated:NO completion:^(void){ [self photoSourcePhotoAlbum];}];
}

-(void) photoSourcePhotoAlbum
{
     UIImagePickerController * picker = [[UIImagePickerController alloc] init];
     picker.delegate = self;
     picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
     [self presentModalViewController:picker animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{    
    [self.view addSubview:progressView];
    timer = [NSTimer scheduledTimerWithTimeInterval:.017 target:self selector:@selector(progressChange) userInfo:nil repeats:YES];
    [picker dismissModalViewControllerAnimated:YES];
    [self performSelectorInBackground:@selector(saveImage:) withObject:info];
    [self performSelector:@selector(navigateToEditView) withObject:nil afterDelay:2.1];
}

-(void)navigateToEditView
{
    [self performSegueWithIdentifier:@"presentRDetailModalViewController" sender:self];   
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    if (picker.sourceType == UIImagePickerControllerSourceTypeSavedPhotosAlbum) 
    {
        [picker dismissViewControllerAnimated:NO completion:^(void){ [self photoSourceCamera];}];
    }
    else 
    {
        [picker dismissModalViewControllerAnimated:YES]; 
    }
}

-(void)saveImage:(NSDictionary *)info
{    
    NSString *imageName = [[[DataStaging dataStaging] getGUID] stringByAppendingString:@".jpg"];
    rImageName = imageName;
    UIImage *rImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    //Compress image

    [[FileOperations fileOperations] PersistData:UIImageJPEGRepresentation(rImage, 0.4) name:imageName];
    DLog(@"%@",[[FileOperations fileOperations] fetchPath:imageName]);

    //Actual image taken

    [[self rImageView] setImage:[info objectForKey:@"UIImagePickerControllerOriginalImage"]];

    if ([rImageName length] == 0) 
    {
        [[self rDetails] setHidden:YES];
        [[self trashRImage]   setHidden:YES];
    }
    else 
    {
        [[self rDetails] setHidden:NO];

        [[self trashRImage]   setHidden:NO];
    }

    [progressView removeFromSuperview];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T19:43:51.193

确保您没有调用 presentModalViewController:animated: 在 dismissModalViewControllerAnimated: 之前两次：它对我的情况有所帮助。

```
- (void)showImagePickerForSourceType:(UIImagePickerControllerSourceType)sourceType
{
    if (_imagePickerController!=nil || _imagePopoverController!=nil) {
        return;
    }
    _imagePickerController = [[[UIImagePickerController alloc] init] autorelease];
    _imagePickerController.modalPresentationStyle = UIModalPresentationCurrentContext;
    _imagePickerController.sourceType = sourceType;
    _imagePickerController.delegate = self;
    switch (sourceType) {
        case UIImagePickerControllerSourceTypeCamera:
            _imagePickerController.showsCameraControls = YES;
            [self presentViewController:_imagePickerController animated:YES completion:nil];
            break;
        default:
            _imagePopoverController = [[UIPopoverController alloc] initWithContentViewController:_imagePickerController];
            _imagePopoverController.delegate = self;
            CGRect rect = [[UIScreen mainScreen] bounds];
            rect.origin.y = rect.size.height - 70.0;
            rect.size.height -= rect.origin.y;
            [_imagePopoverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
            break;
    }
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController*)picker
{
    [_imagePopoverController dismissPopoverAnimated:YES];
    _imagePopoverController = nil;
    [_imagePickerController dismissViewControllerAnimated:YES completion:nil];
    _imagePickerController = nil;
}

- (void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    UIImageWriteToSavedPhotosAlbum([info objectForKey:UIImagePickerControllerOriginalImage],nil,nil,nil);
    _currentImage = [info objectForKey:UIImagePickerControllerOriginalImage];

    [_imagePopoverController dismissPopoverAnimated:YES];
    _imagePopoverController = nil;
    [_imagePickerController dismissViewControllerAnimated:YES completion:nil];
    _imagePickerController = nil;
} 
```

# twitter-bootstrap - twitter bootstrap——导航栏中的中心品牌

> ID：11504382
> 
> 赞同：9
> 
> 时间：2012-07-16T12:31:25.623
> 
> 标签：twitter-bootstrap

有没有办法可以在导航栏中将品牌名称居中

我当前的代码就像

```
<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
            <ul class="nav pull-left">
                <li>    <button  class="btn btn-primary"> < Back </button> </li>
            </ul>
                <p class="brand"> Report </p> 

                <ul class="nav pull-right">
                    <li>   <button class="btn btn-primary pull-right"> New Report </button>  </li>
                </ul>
        </div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T15:24:03.807

上述答案不适用于版本 2（响应式设计）：

而是将您的品牌包装在一个 div 中：

```
<div class="brand">
    <a href="/">YOUR BRAND</a>
</div> 
```

并在您的覆盖样式表中重新定义 .brand 样式：

```
.brand
{
    position: absolute;
    width: 100%;
    left: 0;
    text-align: center;
    margin: auto;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T13:05:38.850

几种居中的方法，您可能必须尝试每种方法：

设置自动边距：

```
.brand { margin-left: auto; margin-right: auto; } 
```

或者使用绝对定位元素的已知宽度（例如 200px）：

```
.brand { left: 50%; margin-left: -100px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T10:53:14.923

终于让它工作了（我完美地检查了）

HTML是：

```
<div class="navbar navbar-fixed-top center" >
<div class="navbar-inner">
    <ul class="nav">
        <li><a href="#">Doctors List</a></li>
    </ul>
</div> 
```

CSS是：

```
.center.navbar .nav,
.center.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}
.center .navbar-inner {
    text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-28T02:39:10.620

```
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <a class="navbar-brand" href="#"> <img src="img/logo.png"></a> <!-- move here your logo -->
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="#!"><i class="fa fa-pencil"></i> Crear Post</a></li>
        <li class="dropdown">
          <a href="#!" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#!">Action</a></li>
            <li><a href="#!">Another action</a></li>
            <li><a href="#!">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Nav header</li>
            <li><a href="#!">Separated link</a></li>
            <li><a href="#!">One more separated link</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#!">Iniciar Sesión</a></li>
        <li><a href="#!">Registrarse</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav> 
```

## CSS：

```
.navbar-brand {
    left: calc(50% - 65.5px); //65.5px It is half the width of my logo.jpg
    position: absolute;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T09:36:39.143

将 navbar-toggle 放在 html 中的品牌名称之后：

```
<div class="navbar-header">
 <a class="navbar-brand" href="#">Jjsukjcne</a>
 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
  <span class="sr-only">Toggle navigation</span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
 </button>
</div> 
```

CSS 代码：

```
.navbar-brand
{
    position: absolute;
    width: 100%;
    left: 0;
    text-align: center;
    margin: auto;
} 
```

# java - 以编程方式在 log4j 属性文件中设置值？

> ID：11504385
> 
> 赞同：0
> 
> 时间：2012-07-16T12:31:27.590
> 
> 标签：java, spring, hibernate, log4j

我有一个 log4j 属性文件。在应用程序启动时，我需要为其中一个属性设置值。是否可以？因为我只知道应用程序启动时属性的值。

```
log4j.properties
----------------

Environment = ${env} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:34:46.400

是的。您可以通过在应用程序启动中指定 JVM arg 来做到这一点，并在 log4j 文件中使用相同的值，如下例所示：其中 env 是 JVM arg。

log4j.appender.rollingFile=org.apache.log4j.RollingFileAppender log4j.appender.rollingFile.File=D:/bpd/${env}Userlog.log

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:39:55.350

```
java -DEnvironment=dev <YourMainProgram> 
```

然后在日志文件中，您可以将该变量称为

```
log4j.appender.logfile.File=appname-${Environment}.log 
```

**编辑：**

**Tomcat：** 如果应用程序在 Tomcat 中运行，您可以在 Catalina.bat 中定义环境。

打开“bin”目录下的“ **Catalina.bat ”文件。**

```
 set CATALINA_OPTS=" -DEnvironment=dev" 
```

然后通过 Catalina.bat 重新启动您的服务器。

# php - 未捕获的 TypeError：非法调用简单的 post 函数

> ID：11504399
> 
> 赞同：0
> 
> 时间：2012-07-16T12:32:22.173
> 
> 标签：php, jquery, post

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:05:39.627

使用“ajax”调用上传图像（一般是文件）数据并不是那么简单。查看此答案以获取更多信息[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)和[php 图片上传与 jquery post](https://stackoverflow.com/questions/8991471/php-image-upload-with-jquery-post)

# perl - 如何从 Perl 子例程返回标量值

> ID：11504400
> 
> 赞同：-4
> 
> 时间：2012-07-16T12:32:24.343
> 
> 标签：perl

我想返回 的正确值`$message_all`，但在给定场景中它返回空白。有什么建议么？

```
processing()

print "message_all = $message_all";

sub processing
{
    log ( " Some message");
}

sub log
{
    my $text = shift;
    my $message_all .= $text;
    return "$message_all";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T12:36:46.693

当然它是空白的——你已经在函数`$message_all`内部声明了`log()`，所以它在函数之外不可用。

*始终*在您的 Perl 代码中执行此操作：

```
use strict;
use warnings; 
```

它会告诉你这`$message_all`是未声明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T14:03:10.727

首先，您必须*始终* `use strict`以及`use warnings`在程序开始时，尤其是在您寻求帮助时。

请发布显示您遇到的问题的代码。当您的`log`子程序与核心功能发生冲突时，您的程序甚至无法编译，并且无法正常运行。它永远不会显示您描述的问题行为。

您需要从子例程*收集*返回值才能打印它。可能是这样的

```
use strict;
use warnings;

my $message = processing();

print "message = $message";

sub processing {
  mylog ( " Some message");
}

sub mylog {
  my $text = shift;
  my $message_all .= $text;
  return $message_all;
} 
```

# ios - 通过 sqlite 数据库使用搜索栏

> ID：11504410
> 
> 赞同：1
> 
> 时间：2012-07-16T12:32:59.383
> 
> 标签：ios, xcode, uitableview, sqlite, uisearchbar

我正在构建一个从 SQLite 数据库加载数据的 iPhone 应用程序。到目前为止，我已经设法处理了它，但是现在我需要在顶部添加一个搜索栏来动态搜索数据库内容并获得正确的搜索结果。

我正在使用 Xcode 4.3.3 ，我是 Xcoding 的新手。

我已经看过几乎所有在线发布的教程，我需要一些帮助。

有人有任何非常具体的教程或示例代码可以提供帮助吗？将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:56:38.277

每个人，这是有史以来最有用的链接

[http://code-ninja.org/blog/2012/01/08/ios-quick-tip-filtering-a-uitableview-with-a-search-bar/](http://code-ninja.org/blog/2012/01/08/ios-quick-tip-filtering-a-uitableview-with-a-search-bar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:02:11.300

您可以使用 NSPredicate。 [http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

```
[NSPredicate predicateWithFormat:@"whatYouAreSearching LIKE %@", searchBar.text]; 
```

如果您使用的是 NSFetchRequest，您可以使用它的 setPredicate 方法为其分配一个谓词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:34:16.150

你的控制器必须实现 UISearchBarDelegate 协议

然后在 init 方法中，添加这个或类似的

```
CGRect searchBarRect = CGRectMake(0, 0, self.view.bounds.size.width, 44);
_searchBar = [[UISearchBar alloc] initWithFrame:searchBarRect];
_searchBar.delegate = self; 
```

之后，实现这三个方法，我会发布一些看起来像我的实现的东西

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    [searchBar setShowsCancelButton:YES animated:YES];
    self.tableView.allowsSelection = NO;
    self.tableView.scrollEnabled = NO;
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    searchBar.text=@"";
    [searchBar setShowsCancelButton:NO animated:YES];
    [searchBar resignFirstResponder];
    self.tableView.allowsSelection = YES;
    self.tableView.scrollEnabled = YES;
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {

    [searchBar setShowsCancelButton:NO animated:YES];
    [searchBar resignFirstResponder];
    self.tableView.allowsSelection = YES;
    self.tableView.scrollEnabled = YES;

    /* fire method that does querying with searchBar.text as attribute */
    [self some method:searchBar.text];
} 
```

# awk - awk 中日期转换的奇怪行为

> ID：11504412
> 
> 赞同：0
> 
> 时间：2012-07-16T12:33:02.983
> 
> 标签：awk

我正在尝试计算 awk 中具有开始和结束日期的持续时间。这是我的功能

```
function computeDuration(start, end) {
    sub(/T/, " ", start);
    sub(/T/, " ", end);
    print start;
    print end;
    cmd="date --date=\"$start\" +%s";
    cmd | getline startDate;
    cmd="date --date=\"$end\" +%s";
    cmd | getline endDate;
    print startDate;
    print endDate;
    return endDate-startDate;
} 
```

我的输出是：

```
2012-7-16 13:20
2012-7-16 13:30
1342389600
1342389600 
```

谁能解释两个不同的日期如何导致相同的`+%s`结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:13:56.603

失败的是 cmd 变量。

```
awk 'function computeDuration(start, end) {
print start;
print end;
cmd="date --date=\"start\" +%s";print cmd;
cmd | getline startDate;
cmd="date --date=\"end\" +%s";print cmd;
cmd | getline endDate;
print startDate;
print endDate;
return endDate-startDate;
} BEGIN {computeDuration("2012-7-16 13:20","2012-7-16 13:30")}'

OUTPUT:
2012-7-16 13:20
2012-7-16 13:30
date --date="$start" +%s
date --date="$end" +%s
1342389600
1342389600 
```

$ 符号不应该在那里，您需要在变量周围加上额外的引号

```
awk 'function computeDuration(start, end) {
print start;
print end;
cmd="date --date=\""start"\" +%s";print cmd;
cmd | getline startDate;
cmd="date --date=\""end"\" +%s";print cmd;
cmd | getline endDate;
print startDate;
print endDate;
return endDate-startDate;
} BEGIN {print computeDuration("2012-7-16 13:20","2012-7-16 13:30")}'

OUTPUT:
2012-7-16 13:20
2012-7-16 13:30
date --date="2012-7-16 13:20" +%s
date --date="2012-7-16 13:30" +%s
1342437600
1342438200 
```

# java - 使用 Maven 构建企业应用程序

> ID：11504413
> 
> 赞同：3
> 
> 时间：2012-07-16T12:33:05.210
> 
> 标签：java, maven

我正在学习 Maven，我需要一些帮助来理解它是如何工作的。

我有一个应用程序。以前的建筑是使用 ANT 制作的。现在我将它迁移到 Maven。我想制作一个 .ear 文件。应用程序是 WSDL 优先的 Web 服务，因为我使用的是`cxf-codegen-plugin`Maven 插件。代码生成成功，除了如何制作生成源的 .jar 文件外，该部分一切正常。

是否可以仅使用一个 Maven 文件构建应用程序`pom.xml`？或者我需要单独的 Maven 文件来构建生成源的 .jar 文件，构建 .war 文件和其他`pom.xml`文件以最终构建 .ear 文件？

我的 Maven 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <artifactId>BizzBuzzWSEAR</artifactId>
    <version>1.0</version>

    <packaging>ear</packaging>

    <name>BizzBuzzWSEAR</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <!-- All needed dependencies -->
    </dependencies>

    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <includes>
                        <include>src/main/**</include>
                    </includes>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ear-plugin</artifactId>
                <version>2.6</version>
                <configuration>
                    <version>6</version>
                    <defaultLibBundleDir>lib</defaultLibBundleDir>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>2.5.2</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>${basedir}/src/main/webapp/WEB-INF/wsdl/BizzBuzz.wsdl</wsdl>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

</project> 
```

当我运行此脚本时，会创建 .ear 文件，但其中没有 .war 文件。创建工件的顺序应该是：generate-code-from-wsdl、compile-it、make-jar、build-war、build-ear。

如何使用 Maven 构建目标序列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:02:00.900

经过一些尝试和测试，我设法自己做到了。

我创建了一个名为 BizzBu​​zzWSEAR 的项目，然后`pom.xml`为它创建了文件。它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <artifactId>BizzBuzzWSEAR</artifactId>
    <version>1.0</version>
    <modules>
        <module>BizzBuzz-web</module>
        <module>BizzBuzz-ear</module>
        <module>BizzBuzz-cxf</module>
    </modules>
    <packaging>pom</packaging>
    <name>BizzBuzzWSEAR</name>
</project> 
```

然后我创建了其他三个模块：

BizzBu​​zz-web - 用于 Web 应用程序（Web 服务） BizzBu​​zz-ear - 用于企业应用程序 BizzBu​​zz-cxf - 用于 wsdl2java .jar 文件

BizzBu​​zz-web 模块`pom.xml`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>BizzBuzzWSEAR</artifactId>
        <groupId>com.groupgti.ws.bizzbuzz</groupId>
        <version>1.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>BizzBuzz-web</artifactId>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <version>1.0</version>
    <packaging>war</packaging>

    <name>BizzBuzz-web</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.groupgti.ws.bizzbuzz</groupId>
            <artifactId>BizzBuzz-cxf</artifactId>
            <version>1.0</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>

</project> 
```

BizzBu​​zz-ear 模块 pom.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>BizzBuzzWSEAR</artifactId>
        <groupId>com.groupgti.ws.bizzbuzz</groupId>
        <version>1.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>BizzBuzz-ear</artifactId>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <version>1.0</version>
    <packaging>ear</packaging>

    <name>BizzBuzz-ear</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <netbeans.hint.deploy.server>gfv3ee6</netbeans.hint.deploy.server>
    </properties>

    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ear-plugin</artifactId>
                <version>2.6</version>
                <configuration>
                    <version>6</version>
                    <defaultLibBundleDir>lib</defaultLibBundleDir>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>com.groupgti.ws.bizzbuzz</groupId>
            <artifactId>BizzBuzz-web</artifactId>
            <version>1.0</version>
            <type>war</type>
        </dependency>
    </dependencies>

</project> 
```

对于 BizzBu​​zz-cxf 模块`pom.xml`文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>BizzBuzzWSEAR</artifactId>
        <groupId>com.groupgti.ws.bizzbuzz</groupId>
        <version>1.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>BizzBuzz-cxf</artifactId>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <version>1.0</version>
    <packaging>jar</packaging>

    <name>BizzBuzz-cxf</name>

    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>2.5.2</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>${basedir}/src/main/resources/BizzBuzz.wsdl</wsdl>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

</project> 
```

然后，当我构建我的项目 BizzBu​​zzWSEAR`pom.xml`文件时，将所有内容和包构建到 .ear 文件中。希望这些信息对某人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:54:04.583

以下是有关您创建的 pom 的一些提示/建议/改进：

首先，您应该定义一个版本 1.0-SNAPSHOT 而不是 1.0，因为您的应用程序正在开发中，尚未发布。

在这种情况下，您有一个多模块构建，它在使用中具有一些优势。您在每个模块中定义版本号和组 ID，如下所示：

```
<parent>
    <artifactId>BizzBuzzWSEAR</artifactId>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <version>1.0</version>
</parent>
<artifactId>BizzBuzz-web</artifactId>
<groupId>com.groupgti.ws.bizzbuzz</groupId>
<version>1.0</version>
<packaging>war</packaging> 
```

在您的多模块构建中，您可以将其减少到以下（最佳实践，例如）：

```
<parent>
    <artifactId>BizzBuzzWSEAR</artifactId>
    <groupId>com.groupgti.ws.bizzbuzz</groupId>
    <version>1.0</version>
</parent>

<artifactId>BizzBuzz-web</artifactId>
<packaging>war</packaging> 
```

groupId 和版本将由父模块继承到使 pom 更小的模块。

此外，您应该放置全局配置，例如属性：

```
 <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties> 
```

进入父 pom。除此之外，您可以为父级中的插件定义默认版本等，如下所示（父级）：

```
 <build>
    <pluginManagement>
      <plugins>
       <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <version>2.3.2</version>
           <configuration>
              <source>1.6</source>
              <target>1.6</target>
           </configuration>
       </plugin>

       <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-ear-plugin</artifactId>
           <version>2.6</version>
           <configuration>
              <version>6</version>
              <defaultLibBundleDir>lib</defaultLibBundleDir>
           </configuration>
       </plugin>
     ... 
```

这将导致以下耳模块 pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>BizzBuzzWSEAR</artifactId>
        <groupId>com.groupgti.ws.bizzbuzz</groupId>
        <version>1.0</version>
    </parent>

    <artifactId>BizzBuzz-ear</artifactId>
    <packaging>ear</packaging>

    <name>BizzBuzz-ear</name>

    <dependencies>
        <dependency>
            <groupId>${project.goupId}</groupId>
            <artifactId>BizzBuzz-web</artifactId>
            <version>${project.version}</version>
            <type>war</type>
        </dependency>
    </dependencies>

</project> 
```

# arrays - Excel VBA按降序对数字数组进行排序的最快方法？

> ID：11504418
> 
> 赞同：15
> 
> 时间：2012-07-16T12:33:36.040
> 
> 标签：arrays, excel, vba, sorting

以降序对数字数组（1000-10000 个数字，但可能会有所不同）进行排序的最快方法（就计算时间而言）是什么？据我所知，Excel 内置函数效率不高，内存排序应该比 Excel 函数快很多。

请注意，我无法在电子表格上创建任何内容，所有内容都必须仅在内存中存储和排序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-12-03T22:13:00.907

你可以使用[`System.Collections.ArrayList`](https://msdn.microsoft.com/en-us/library/8k6e334t%28v=vs.110%29.aspx)：

```
Dim arr As Object
Dim cell As Range

Set arr = CreateObject("System.Collections.ArrayList")

' Initialise the ArrayList, for instance by taking values from a range:
For Each cell In Range("A1:F1")
    arr.Add cell.Value
Next

arr.Sort
' Optionally reverse the order
arr.Reverse 
```

这使用快速排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-21T11:41:56.023

只是为了让人们不必点击我刚刚做的链接，这里是 Siddharth 评论中的精彩示例之一。

```
Option Explicit
Option Compare Text

' Omit plngLeft & plngRight; they are used internally during recursion
Public Sub QuickSort(ByRef pvarArray As Variant, Optional ByVal plngLeft As Long, Optional ByVal plngRight As Long)
    Dim lngFirst As Long
    Dim lngLast As Long
    Dim varMid As Variant
    Dim varSwap As Variant

    If plngRight = 0 Then
        plngLeft = LBound(pvarArray)
        plngRight = UBound(pvarArray)
    End If
    lngFirst = plngLeft
    lngLast = plngRight
    varMid = pvarArray((plngLeft + plngRight) \ 2)
    Do
        Do While pvarArray(lngFirst) < varMid And lngFirst < plngRight
            lngFirst = lngFirst + 1
        Loop
        Do While varMid < pvarArray(lngLast) And lngLast > plngLeft
            lngLast = lngLast - 1
        Loop
        If lngFirst <= lngLast Then
            varSwap = pvarArray(lngFirst)
            pvarArray(lngFirst) = pvarArray(lngLast)
            pvarArray(lngLast) = varSwap
            lngFirst = lngFirst + 1
            lngLast = lngLast - 1
        End If
    Loop Until lngFirst > lngLast
    If plngLeft < lngLast Then QuickSort pvarArray, plngLeft, lngLast
    If lngFirst < plngRight Then QuickSort pvarArray, lngFirst, plngRight
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T08:21:34.420

如果您想要高效的算法，请查看[Timsort](http://en.wikipedia.org/wiki/Timsort)。它是对合并排序的改编，可以解决它的问题。

```
Case    Timsort     Introsort   Merge sort  Quicksort   Insertion sort  Selection sort
Best    Ɵ(n)        Ɵ(n log n)  Ɵ(n log n)  Ɵ(n)        Ɵ(n^2)          Ɵ(n)
Average Ɵ(n log n)  Ɵ(n log n)  Ɵ(n log n)  Ɵ(n log n)  Ɵ(n^2)          Ɵ(n^2)  
Worst   Ɵ(n log n)  Ɵ(n log n)  Ɵ(n log n)  Ɵ(n^2)      Ɵ(n^2)          Ɵ(n^2) 
```

但是，1k - 10k 数据条目的数据量太少，您无需担心内置搜索效率。

* * *

示例：如果您有从**A 列到 D**列的数据，并且**标题位于第 2 行**，并且您想按**B 列**排序。

```
Dim lastrow As Long
lastrow = Cells(Rows.Count, 2).End(xlUp).Row
Range("A3:D" & lastrow).Sort key1:=Range("B3:B" & lastrow), _
   order1:=xlAscending, Header:=xlNo 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-26T15:43:48.323

我已经成功使用了 Shell 排序算法。使用 VBA Rnd() 函数生成的数组测试 N=10000 时，眨眼间运行 - 不要忘记使用 Randomize 语句生成测试数组。对于我正在处理的元素数量来说，它很容易实现，并且足够短且高效。参考在代码注释中给出。

```
' Shell sort algorithm for sorting a double from largest to smallest.
' Adopted from "Numerical Recipes in C" aka NRC 2nd Edition p330ff.
' Speed is on the range of N^1.25 to N^1.5 (somewhere between bubble and quicksort)
' Refer to the NRC reference for more details on efficiency.
' 
Private Sub ShellSortDescending(ByRef a() As Double, N As Integer)

    ' requires a(1..N)

    Debug.Assert LBound(a) = 1

    ' setup

    Dim i, j, inc As Integer
    Dim v As Double
    inc = 1

    ' determine the starting incriment

    Do
        inc = inc * 3
        inc = inc + 1
    Loop While inc <= N

    ' loop over the partial sorts

    Do
        inc = inc / 3

        ' Outer loop of straigh insertion

        For i = inc + 1 To N
            v = a(i)
            j = i

            ' Inner loop of straight insertion
            ' switch to a(j - inc) > v for ascending

            Do While a(j - inc) < v
                a(j) = a(j - inc)
                j = j - inc
                If j <= inc Then Exit Do
            Loop
            a(j) = v
        Next i
    Loop While inc > 1
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T15:41:45.610

我知道 OP 指定不使用工作表，但值得注意的是，创建一个新的 WorkSheet，将其用作便笺簿以使用工作表功能进行排序，然后清理的时间长不到 2 倍。但你也有排序工作表函数的参数提供的所有灵活性。

在我的系统上，@tannman357 非常好的递归例程的差异是 55 毫秒，而下面的方法的差异是 96 毫秒。这些是几次运行的平均时间。

```
Sub rangeSort(ByRef a As Variant)
Const myName As String = "Module1.rangeSort"
Dim db As New cDebugReporter
    db.Report caller:=myName

Dim r As Range, va As Variant, ws As Worksheet

  quietMode qmON
  Set ws = ActiveWorkbook.Sheets.Add
  Set r = ws.Cells(1, 1).Resize(UBound(a), 1)
  r.Value2 = rangeVariant(a)
  r.Sort Key1:=r.Cells(1), Order1:=xlDescending
  va = r.Value2
  GetColumn va, a, 1
  ws.Delete
  quietMode qmOFF

End Sub

Function rangeVariant(a As Variant) As Variant
Dim va As Variant, i As Long

  ReDim va(LBound(a) To UBound(a), 0)

  For i = LBound(a) To UBound(a)
    va(i, 0) = a(i)
  Next i
  rangeVariant = va

End Function

Sub quietMode(state As qmState)
Static currentState As Boolean

  With Application

    Select Case state
    Case qmON
      currentState = .ScreenUpdating
      If currentState Then .ScreenUpdating = False
      .Calculation = xlCalculationManual
      .DisplayAlerts = False
    Case qmOFF
      If currentState Then .ScreenUpdating = True
      .Calculation = xlCalculationAutomatic
      .DisplayAlerts = True
    Case Else
    End Select

  End With
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-28T05:10:52.477

很久以前我自己回答了这个问题，这意味着我不得不回到我的第一个 VBA 存档文件。所以我找到了这个旧代码，它是从一本书中摘录的。首先，它将值（从与表列相交的选择中）保存到数组 ar(x) 中，然后将它们从小到大排序。排序有 2 个 bucles，第一个（Do Loop Until sw=0）和第二个（For x=1 To n Next）比较值 a(x) 和值 a(x+1)，保持在 a( x) 最大的数和 ar(x+1) 中的最小数。第一个 bucle 重复，直到从最小到最大排序。我实际上使用此代码在预算列中的每个选定单元格上方插入一行（TblPpto [描述]）。希望能帮助到你！

```
Sub Sorting()
Dim ar() As Integer, AX As Integer
Set rng = Intersect(Selection, Range("TblPpto[Descripcion]")) 'Cells selected in Table column
n = rng.Cells.Count 'Number of rows
ReDim ar(1 To n)
x = 1
For Each Cell In rng.Cells
    ar(x) = Cell.Row 'Save rows numbers to array ar()
    x = x + 1
Next
Do 'Sort array ar() values
    sw = 0  'Condition to finish bucle
    For x = 1 To n - 1
        If ar(x) > ar(x + 1) Then 'If ar(x) is bigger
            AX = ar(x)            'AX gets bigger number
            ar(x) = ar(x + 1)     'ar(x) changes to smaller number
            ar(x + 1) = AX        'ar(x+1) changes to bigger number
            sw = 1                'Not finished sorting
        End If
    Next
Loop Until sw = 0
'Insert rows in TblPpto
fila = Range("TblPpto[#Headers]").Row
For x = n To 1 Step -1
    [TblPpto].Rows(ar(x) - fila).EntireRow.Insert
Next x
End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-23T13:58:43.373

trincot 代码只是简单地扩展为一个函数。玩得开心！

```
Function sort1DimArray(thatArray As Variant, descending As Boolean) As Variant
Dim arr As Object, i As Long, j As Long`

Set arr = CreateObject("System.Collections.ArrayList")

For i = LBound(thatArray) To UBound(thatArray)
    arr.Add thatArray(i)
Next i

arr.Sort

If descending = True Then
    arr.Reverse
End If
'shortens empty spaces
For i = 0 To (arr.count - 1)
    If Not IsEmpty(arr.Item(i)) Then
        thatArray(j) = arr.Item(i)
        j = j + 1
    End If
Next i

ReDim Preserve thatArray(0 To (j - 1))
sort1DimArray = thatArray

End Function 
```

# php - 从 Joomla 文章表中检索内容时，额外的文件夹名称被添加到图像/链接中

> ID：11504423
> 
> 赞同：2
> 
> 时间：2012-07-16T12:34:11.380
> 
> 标签：php, joomla, joomla2.5

我正在创建一个从 Joomla 2.5 表中检索某些文章内容的外部应用程序。

我的外部应用程序位于名为 appln 的文件夹中。我有一个名为 article.php 的文件。在这个文件中，我从 Joomla 2.5 中检索了某些文章。我可以成功检索文章内容并显示在我的文件中。

但这个问题是包含任何 PDF 和图像链接的文章，单击此链接时页面显示为 404 页面未找到...

注意：PDF 和图像文件会退出。

原因是图像的路径如下：

> [http://www.websitename.com/appln/image1.jpg](http://www.websitename.com/appln/image1.jpg)

该页面应为：

> [http://www.websitename.com/image1.jpg](http://www.websitename.com/image1.jpg)

我无法弄清楚为什么它在图像或 pdf 文件的名称之前添加**/appln/ 。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:17:21.783

在插件代码中查看类似的内容： `$document->setBase(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:17:54.893

因为图像是这样相对插入的：

```
<img src="image1.jpg"> 
```

您可以通过将其添加到该`<head>`区域来修复它：

```
<base href="http://www.yoursite.com/" /> 
```

# c++ - 模板化的“查找并擦除”功能出错

> ID：11504426
> 
> 赞同：4
> 
> 时间：2012-07-16T12:34:30.033
> 
> 标签：c++, templates, stl, iterator

```
template <typename CONTAINER_TYPE, typename CONTAINER_VALUE_TYPE>
bool FindAndErase(CONTAINER_TYPE& cont, const CONTAINER_VALUE_TYPE& value)
{
    CONTAINER_TYPE::iterator it = eastl::find(cont.begin(), cont.end(), value);
    if (it != cont.end())
    {
        cont.erase(it);
        return true;
    }
    return false;
} 
```

此代码在 Visual C++ 2005 上编译良好，但使用 ARM 编译器（“ARM C/C++ 编译器，RVCT4.0”）和 iOS gcc（“arm-apple-darwin9-gcc (GCC) 4.2.1”）编译返回错误：

错误：#65：期望一个“;” 错误：#20：标识符“it”未定义

分别在第 4 行和第 5 行。

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T12:37:07.837

尝试

```
typename CONTAINER_TYPE::iterator it ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T12:37:26.077

用作`typename`：

```
typename CONTAINER_TYPE::iterator it = //... 
```

因为`iterator`是一个*依赖*名称，你需要告诉编译器后面是一个*类型*，而不是*静态值*。

在 C++11 中，你可以使用`auto`as：

```
auto it = eastl::find(cont.begin(), cont.end(), value); 
```

终于解脱了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T12:37:20.500

**从属名称**。MSVS 不会将此视为错误。你需要一个额外的`typename`：

```
typename CONTAINER_TYPE::iterator it = eastl::find(cont.begin(), cont.end(), value); 
```

# maven - Gradle：如何将自定义 JAR 文件上传到 Maven 存储库

> ID：11504430
> 
> 赞同：15
> 
> 时间：2012-07-16T12:34:42.583
> 
> 标签：maven, jar, gradle

我在不使用 Gradle Jar 任务的情况下构建了一个 jar 文件（我需要在我的任务中使用 Ant 任务）。如何配置 uploadArchives 以便能够在指定的存储库中安装 JAR。

我试图用

```
uploadArchives {
    repositories {
        mavenDeployer {
            // some Maven configuration
        }
    }
}

artifacts {
    archives file: file('bin/result.jar')
} 
```

但我收到一个错误，可能没有 2 个具有相同类型和分类器的工件，这意味着此配置添加而不是覆盖配置。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-16T13:33:57.230

没错，`artifacts`闭包只能将工件添加到给定的配置中（请参阅[ArtifactHandler API](http://gradle.org/docs/current/javadoc/org/gradle/api/artifacts/dsl/ArtifactHandler.html)）。

你有两个选择：

[1) 按此处](http://gradle.org/docs/current/userguide/maven_plugin.html#uploading_to_maven_repositories)所述添加工件过滤器（参见第 45.6.4.1 节“每个项目的多个工件”）。如果您使用它，请尝试声明您的`archives`配置，例如：

```
artifacts {
  archives file: file('bin/result.jar'), name: 'result', type: 'jar'
} 
```

这样，您在工件过滤器中就会出现这样的情况：

```
addFilter('result') {artifact, file ->
  artifact.name == 'result'
} 
```

2) 将其作为单独的 Maven 模块上传。如果`result.jar`是您要上传的唯一 jar，这可能是一个很好的解决方案。

```
configurations {
  resultArchives
}

uploadResultArchives {
  repositories {
    mavenDeployer {
      repository(url: "same/url/here")
    }
  }
}

artifacts{
  resultArchives file: file('bin/result.jar')
} 
```

希望这可以帮助。

# php - 如何验证 Digg Digg WordPress 插件

> ID：11504433
> 
> 赞同：1
> 
> 时间：2012-07-16T12:34:46.973
> 
> 标签：php, wordpress

我在我的博客上使用 Digg Digg WordPress 插件。它给了我 16 个 w3c 验证错误。

请帮助我消除这些错误。（Twitter、FaceBook 和 Google+ 整合插件）

错误示例：

```
Line 652, Column 168: there is no attribute "data-url"

…class="twitter-share-button" data-url="http://blog.mysite.com/" data-cou… 
```

第二个错误：

```
Error Line 652, Column 211: there is no attribute "data-count"

…://blog.mysite.com/" data-count="vertical" data-text="Email… 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:40:29.923

任何一个。

1.  将您的标记语言更改为支持`data-`属性的语言（即 HTML 5）*或*
2.  重写插件（包括它使用的 JavaScript）以将数据放在别处。（在类属性中它是有效的，尽管非常难看。另一种选择是将它移动到`<script>`元素中的对象文字中）。

# excel - MMULT / MINVERSE 最大数组大小

> ID：11504435
> 
> 赞同：1
> 
> 时间：2012-07-16T12:34:55.013
> 
> 标签：excel, math, matrix

我正在尝试解决这组方程：

```
696x +  405y +  61z    = 1385699
618x +  463y +  81z    = 1401476
573x +  476y +  113z   = 1407438
508x +  537y +  117z   = 1418256
473x +  566y +  123z   = 1427224 
```

x、y 和 z 在工作表中被删除。

使用以下公式：`E2:E5 {=MMULT(MINVERSE("A1:C5"),"D1:D5")}`

但我一直遇到价值错误。

MINVERSE 只能与 3x3 矩阵一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:12:55.183

由于您的方程组是超定的，您可能会寻找 *伪逆*或最小二乘估计。要计算此值，请选择一个 1 x 3 范围，例如 F1:H1，然后输入数组公式：

```
=LINEST(D1:D5,A1:C5,0) 
```

通过按住 CTRL+SHIFT+ENTER 输入。对于给定的示例，这将返回 {z,y,x} = {1191.8,1345.3,1103.7}。请注意，结果与方阵的 MINVERSE 一致。

# c# - 在 .NET 中使用 PerformanceCounter 测量 CPU 使用率的正确方法

> ID：11504438
> 
> 赞同：3
> 
> 时间：2012-07-16T12:35:13.640
> 
> 标签：c#, .net, performancecounter, performance-testing

我想衡量我的商务舱在 Web 服务中的性能。我怎样才能通过编码来做到这一点？

我想知道我的业务类消耗了多少 CPU 来执行其操作，以及如果 Web 服务同时获得多个服务调用，性能会如何变化。

我不想衡量我的网络服务的性能；我只想知道我的商务舱表现如何。

**我的想法：**

在阅读了一些博客之后，我决定编写一些代码来创建`PerformanceCounter`如下所示的。`for`从该代码中，我可以在一个循环中创建多个线程。每个线程都会调用我的类。在同一个`for`循环中，我将调用`NextValue()`计数器实例上的方法。

```
System.Diagnostics.PerformanceCounter CpuCounter = new System.Diagnostics.PerformanceCounter();
            CpuCounter.CategoryName = "Process";
            CpuCounter.CounterName = "% Processor Time";
            CpuCounter.InstanceName = Process.GetCurrentProcess().ProcessName; 
```

**问题：**

1.  这种方法正确吗？
2.  我应该使用“进程”类别还是“处理器”类别？
3.  如何获取性能数据以从中创建一些报告？例如，100 个并发线程时，CPU 使用率为 70%，200 个线程时 CPU 使用率高达 90%，依此类推。
4.  我的业务逻辑很快就结束了。另一方面，`NextValue()`方法在一秒钟的间隔后给出正确的值，如[本](http://blogs.msdn.com/b/bclteam/archive/2006/06/02/618156.aspx)博客所述。我该如何处理？
5.  有时，`NextValue()`方法给出的值超过 100。这是否意味着 CPU 使用率超过 100%？（我认为，这个计数器的值不应该被解释为 CPU 的使用百分比。我正确吗？）

注意：我使用的是 Windows 7 Premium 和 Intel Core i5 处理器。这是我第一次使用性能计数器。所以有些问题可能很愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:02:50.023

我已按以下顺序回答了您的问题：

1：如果您的商务舱是您的应用程序在分析期间唯一处于活动状态的部分，是的。但是，Perfmon 最适合对整个应用程序进行大规模分析，它并不是真正为特定方法设计的。要了解完成 BusinessClass.Work() 需要多少 CPU 周期，最好使用 JetBrains dotTrace 或 Redgate 的 ANTS 分析器之类的东西。这两种产品都提供免费试用。

2：进程是你正在做的事情的正确计数器

3：可以添加自己的计数器，也可以分时间进行测试。执行此操作的更简单方法是时间片方法，您基本上运行一系列测试，在每个测试之间仅更改单个变量。在测试之间等待 5-10 秒，没有任何活动，这让您的性能图有一个很好的休息时间。您还需要设置性能计数器日志，[此处对此进行了说明。](http://blogs.msdn.com/b/securitytools/archive/2009/11/04/how-to-use-perfmon-in-windows-7.aspx)

4：见答案 1，分析器对于方法级别的计时要好得多

5：这是意料之中的。您的最大 CPU % 实际上是 100 * Processor Count。因此，如果您的 i5 是双核，则最大值为 200%，如果是四核，则为 400%，等等...

请让我知道，如果你有任何问题。

# c# - 当本地服务帐户在服务中运行时，并非有关 Process.GetProcesses 中的所有进程信息

> ID：11504441
> 
> 赞同：2
> 
> 时间：2012-07-16T12:35:20.483
> 
> 标签：c#, .net, system.diagnostics

我有这个代码：

```
 [PermissionSet(SecurityAction.Assert, Name = "FullTrust")]
    public List<WinInfo> GetWindows()
    {
        try
        {
            var isFullTrust = Assembly.GetExecutingAssembly().IsFullyTrusted;
            if (isFullTrust)
            {
                return Process.GetProcesses().Where(z => !string.IsNullOrEmpty(z.MainWindowTitle))
                    .Select(z => new WinInfo
                        {
                            ProcessID = z.Id,
                            ProcessName = z.ProcessName,
                            WinID = z.MainWindowHandle,
                            WindowTitle = z.MainWindowTitle
                        }).ToList();
            }
            else
                return null;
        }
        catch (Exception ex)
        {
            Trace.Write(ex.Message);
            return null;
        }
    } 
```

当我在当前用户（具有管理员权限）下在本地计算机上进行测试时，它可以正常工作，显示所有具有窗口的进程。但是当我从 Windows 服务调用此代码时，在“本地服务”帐户下运行时，列表为空。我附加到该进程，并通过调试发现“Process.GetProcesses()”返回所有进程，但所有进程的 MainWindowHandle 为 0，MainWindowTitle 为空，即使它们确实有窗口。那么我的代码有什么问题？

**编辑**我编辑了代码，以便它检查程序集是否完全信任并具有 PemmissionSet 应该授予代码必要的权限。结果还是一样。当我调试时，我可以看到，“isFullTrust”是“True”并且代码执行时没有异常。列表仍然是空的，因为没有进程包含非空 MainWindowTitle

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:10:26.760

当然，您需要在用户帐户下运行它！为什么打开窗口的应用程序会在本地系统帐户下运行？那是用于Windows服务等

它也可能与您需要完全信任的流程有关

> 来自 MSDN： Process 类上有一个 LinkDemand 和一个 InheritenceDemand for FullTrust 。这意味着如果您的程序集不完全受信任，它将无法启动新进程或获取有关正在运行的进程的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:41:10.557

也许这是一个特权问题。根据[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684188%28v=vs.85%29.aspx)链接 LocalService**在本地计算机上具有最低权限。**

你应该使用[本地系统帐户](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684190%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:01:48.037

根据[这个](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/989405f4-ad8d-49cf-a0ef-6d92aa353e0d)线程：

> 您看到的问题是因为默认情况下服务无权访问任何交互式桌面。我不建议从服务与桌面交互（#1，可能没有任何桌面，#2 可能有多个桌面，#3 在 Vista 中从服务与桌面交互未实现）但是，您可以检查服务属性中的“与桌面交互”。

也许您可以尝试创建一个隐藏的表单？

# python - 光栅：如何使用 python 获得纬度/经度的海拔？

> ID：11504444
> 
> 赞同：3
> 
> 时间：2012-07-16T12:35:23.597
> 
> 标签：python, gdal, elevation

我还在 SO 的 GIS 部分发布了这个问题。因为我不确定这是否是一个“纯粹的”python 问题，所以我也在这里再次询问。

我想知道是否有人在**不使用 ArcGIS**的情况下从栅格获取高程数据方面有经验，而是以 python`list`或获取信息`dict`？

我将我的 XY 数据作为元组列表获取。

我想遍历列表或将其传递给函数或类方法以获取 xy 对的相应高度。

我对该主题进行了一些研究，**gdal** API 听起来很有希望。谁能建议我如何处理事情，陷阱，示例代码？其他选择？

谢谢你的努力，拉斯维加斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:52:14.210

我建议查看[Google Elevation API](https://developers.google.com/maps/documentation/elevation/)

使用起来非常简单：

[http://maps.googleapis.com/maps/api/elevation/json?locations=39.7391536,-104.9847034&sensor=true_or_false](http://maps.googleapis.com/maps/api/elevation/json?locations=39.7391536,-104.9847034&sensor=true_or_false)

```
{
   "results" : [
      {
         "elevation" : 1608.637939453125,
         "location" : {
            "lat" : 39.73915360,
            "lng" : -104.98470340
         },
         "resolution" : 4.771975994110107
      }
   ],
   "status" : "OK"
} 
```

请注意，免费版本每天限制为 2500 个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T18:44:56.087

我们使用此代码获取给定纬度/经度的海拔（注意：我们只要求打印海拔，以及四舍五入的纬度和经度值）。

```
import urllib.request
import json
lati = input("Enter the latitude:")
lngi = input("Enter the longitude:")

# url_params completes the base url with the given latitude and longitude values
ELEVATION_BASE_URL = 'http://maps.googleapis.com/maps/api/elevation/json?'
URL_PARAMS = "locations=%s,%s&sensor=%s" % (lati, lngi, "false")
url=ELEVATION_BASE_URL + URL_PARAMS
with urllib.request.urlopen(url) as f:
response = json.loads(f.read().decode())    
status = response["status"]
result = response["results"][0]
print(float(result["elevation"]))
print(float(result["location"]["lat"]))
print(float(result["location"]["lng"])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:02:00.837

看看[高度计](https://pypi.python.org/pypi/altimeter "高度表")是 Google Elevation API 的包装器

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-30T12:32:43.083

这是我构建的另一个不错的 API：[https ://algorithmia.com/algorithms/Gaploid/Elevation](https://algorithmia.com/algorithms/Gaploid/Elevation)

```
import Algorithmia

input = {
    "lat": "50.2111",
    "lon": "18.1233"
}
client = Algorithmia.client('YOUR_API_KEY')
algo = client.algo('Gaploid/Elevation/0.3.0')
print algo.pipe(input) 
```

# php - foreach 循环中的正则表达式 preg_replace

> ID：11504447
> 
> 赞同：0
> 
> 时间：2012-07-16T12:35:49.907
> 
> 标签：php, regex

我有以下简单的替换工作

```
<?php
$mydata= '15-2003';
$pattern = '/[-]/';
$replacement = ' ';
echo preg_replace($pattern, $replacement, $mydata);
?> 
```

输出 15 2003

但是，当我将它放在我的 foreach 循环中时，它似乎不起作用？

我有这个

```
<?php foreach ($tests as $test): ?>
<tr>
<?php
$mydata= htmlout($test['f']);
$pattern = '/[-]/';
$replacement = '';
echo preg_replace($pattern, $replacement, $mydata);
?>
<?php endforeach; ?> 
```

哪个输出 15-2003 我在哪里出错了？

htmlout 是下面的自定义函数。

```
<?php
function html($text)
{
return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
}
function htmlout($text)
{
echo html($text);
} 
```

当我做 var_dump($mydata); 我得到 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:00:17.907

这不能按预期工作，因为`htmlout()` `echo`es 值而不是`return`ing 它。

考虑更换

```
$mydata= htmlout($test['f']); 
```

和

```
$mydata= html($test['f']); 
```

您的代码中发生的事情是它只是打印出原始字符串，返回`NULL`到`$mydata`然后您回显一个`NULL`不显示任何内容的内容。

# asp.net - ASP.NET 活动目录身份验证 User.IsInRole

> ID：11504450
> 
> 赞同：1
> 
> 时间：2012-07-16T12:36:02.567
> 
> 标签：asp.net, active-directory, windows-authentication, roleprovider

我开发了一个 ASP.NET Intranet 应用程序。现在我被要求为应用程序添加身份验证 - 它应该基于 Active Directory。用户不应填写任何登录名或密码。

从 ASP.NET C# 代码中，我应该能够检查如下内容：

```
if (User.IsInRole("MyApplicationReaders"))
{
     doSomething();
}
else if (User.IsInRole("MyApplicationAdmins"))
{
     doSomethingElse();
} 
```

MyApplicationReaders 和 MyApplicationAdmins 是 Active Directory 组的名称。

你能指点我一些简单的分步教程如何实现这一点吗？我没有找到任何:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:56:34.180

尝试更加努力地搜索。

您必须添加到配置文件身份验证方法：

```
<authentication mode="Windows" /> 
```

并添加授权规则：

```
<authorization>
  <allow users="DomainName\Bob, DomainName\Mary" />
  <allow roles="BUILTIN\Administrators, DomainName\Manager" />
  <deny users="*" />
</authorization> 
```

此[页面](http://msdn.microsoft.com/en-us/library/ff647405.aspx)寻求帮助。

PS：在您将 Windows 身份验证添加到您的应用程序后，您将能够检查经过`User.IsInRole`身份验证的用户。但在某些浏览器中，您的用户会被提示输入他们的 Windows 凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:06:30.037

您可以将 IIS 设置为自动对用户进行身份验证，但通常您实现自己的授权方案。过去，我使用数据库将我的 AD 帐户映射到应用程序角色/权限。

为了使用 IsInRole()，您必须填充 User Principal 对象。最简单的方法是在[Global.asax 事件 BeginRequest](http://msdn.microsoft.com/en-us/library/ms178473.aspx)中。另请查看创建[自定义角色提供者](http://www.codeproject.com/Articles/27955/Developing-custom-ASP-NET-Membership-and-Role-prov)。

# iphone - 使用 AFNetworking 上传文件，服务器检测到空流

> ID：11504451
> 
> 赞同：3
> 
> 时间：2012-07-16T12:36:03.840
> 
> 标签：iphone, ios, afnetworking

我正在使用此代码将文件上传到服务器，在服务器上未检测到流，问题是我使用相同的代码但在不同的项目中，它完美地工作！我已经包含了适当的标题！到底是怎么回事 ？我花了最后几个小时来解决这个问题，请帮忙

```
-(void)upload
{

NSString *st = [[NSBundle mainBundle] pathForResource:@"R" ofType:@"caf"];
NSData *d = [NSData dataWithContentsOfFile:st];

AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://192.168.0.116:8084/RasaylServer/"]];

NSString *action = @"SendStreamMessage";

NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
[parameters setObject:@"209" forKey:@"param1"];
[parameters setObject:@"205" forKey:@"param2"];
[parameters setObject:@"01/12/2012 15:13" forKey:@"param3"];

NSMutableURLRequest *myRequest = [client multipartFormRequestWithMethod:@"POST" path:action parameters:parameters constructingBodyWithBlock: ^(id <AFMultipartFormData>formData)
                                  {

                                      [formData appendPartWithFileData:d name:@"a" fileName:@"Test2" mimeType:@"audio/x-caf"];

                                  }];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:myRequest]; 
[operation setCompletionBlock:^(){

} ];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation:operation]; 
[operation start];

operation.completionBlock = ^{   

    if ( operation.error == nil )
        NSLog(@"%@", operation.responseString); 
    else {
        NSLog(@"%@", operation.error);
    }

};

} 
```

# c++ - boost异步TCP服务器写入错误

> ID：11504458
> 
> 赞同：1
> 
> 时间：2012-07-16T12:36:36.657
> 
> 标签：c++, boost, asynchronous, boost-asio

我有一个问题，我在客户端和服务器之间有一个 TCP 连接，当客户端初始化时，他向服务器发送一条消息，并且服务器通过一条欢迎消息来回答。

所有这些在本地网络上都可以正常工作。

所以我的问题是我使用 async_write 和 async_read （因为我需要我的服务器是异步的） 我的客户端将消息发送到服务器，服务器看到它并回答但我的客户端从未收到欢迎消息。

否则，当我关闭服务器时，客户端会收到欢迎消息。

这是我的服务器代码：

主文件

```
int main()
{
  try
  {
  boost::asio::io_service io_service;

  tcp_server server(io_service, 7171);
  io_service.run();
}
 catch (std::exception& e)
{
  std::cerr << e.what() << std::endl;
}

return 0;
} 
```

tcp_server

```
class tcp_server
 {
  public:
 tcp_server(boost::asio::io_service& io_service, int port) // (1)                                                                                                                                                                            
   : m_acceptor(io_service, tcp::endpoint(tcp::v4(), port))
    {
      std::cout << "Port : " << port << std::endl;
      start_accept();
    }

 private:

  void start_accept()
  {
    tcp_connection::pointer new_connection = tcp_connection::create(m_acceptor.io_service());

    m_acceptor.async_accept(new_connection->socket(),
                            boost::bind(&tcp_server::handle_accept, this, new_connection,
                    boost::asio::placeholders::error));
  }

  void handle_accept(tcp_connection::pointer new_connection, const boost::system::error_code& error) // (4)                                                                                                                                  
  {
    if (!error)
      {
        std::cout << "Get one client!" << std::endl;
        new_connection->start();
        start_accept(); // (5)                                                                                                                                                                                                               
      }
  }

  tcp::acceptor m_acceptor;
}; 
```

tcp_connection

```
class tcp_connection : public boost::enable_shared_from_this<tcp_connection>
{
 public:
  typedef boost::shared_ptr<tcp_connection> pointer;

  static pointer create(boost::asio::io_service& ios)
  {
    pointer new_connection(new tcp_connection(ios) );
    return new_connection;
  }

  tcp::socket& socket()
    {
      return m_socket;
    }

  void do_read() // (1)                                                                                                                                                                                                                      
  {
    boost::asio::async_read(m_socket, boost::asio::buffer(m_buffer), // (3)                                                                                                                                                                  
                            boost::bind(&tcp_connection::handle_read, shared_from_this(),
                                        boost::asio::placeholders::error)
                            );
  }

  void start()
  {
    m_message = "Welcome on the server \n";

    boost::asio::async_write(m_socket, boost::asio::buffer(m_message),
                             boost::bind(&tcp_connection::handle_write, shared_from_this(),
                                         boost::asio::placeholders::error)
                             );
  }
private:
 tcp_connection(boost::asio::io_service& io_service)
   : m_socket(io_service)
      { }

  void handle_write(const boost::system::error_code& error)
  {
    std::cout << "handle_write : "<< m_message << std::endl;
    if (!error)
      do_read(); // (2)                                                                                                                                                                                                                      
    else
      std::cout << error.message() << std::endl;
  }

  void handle_read(const boost::system::error_code& error) // (6)                                                                                                                                                                            
  {
    std::cout << "handle read" << m_buffer.data() <<std::endl;
     if (!error)
        do_read();
    else
        close();
  }

 void close() // (7)                                                                                                                                                                                                                        
  {
    m_socket.close();
  }

  tcp::socket m_socket;
  std::string m_message;
  boost::array<char, 128> m_buffer;
}; 
```

我不明白为什么？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:11:52.150

请[阅读 async_read](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/async_read/overload1.html)的手册：

> 该函数用于从流中异步读取一定字节数的数据。函数调用总是立即返回。异步操作将继续进行，直到满足以下条件之一：
> 
> *   提供的缓冲区已满。也就是说，传输的字节数等于缓冲区大小的总和。
> *   发生错误。

在您的情况下，这两个条件都不满足 - 直到对等方关闭套接字。

您应该`async_read_some`改用（或`async_read_until`，但它可能会更复杂一些）。

# alfresco - Alfresco 策略绑定中的条件

> ID：11504462
> 
> 赞同：2
> 
> 时间：2012-07-16T12:36:50.660
> 
> 标签：alfresco

我有 OnCreateNodePolicy 实现，我正在考虑在绑定初始化中添加条件（一些速度优化），这可能吗？我是什么意思？让我们有类似这样的定义：

```
policyComponent.bindClassBehaviour(
    QName.createQName(NamespaceService.ALFRESCO_URI, "onCreateNode"),
    ContentModel.TYPE_CONTENT, onCreateNode); 
```

现在，当创建节点时，我的 onCreateNode() 被调用。我要做的第一件事是检查我的父母是否有某些方面。不能将此条件添加到绑定定义中吗？那么只有满足这个条件才调用onCreateNode()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T16:09:42.317

您不能向绑定定义添加条件，但在您的情况下，您可以考虑使用.`OnCreateChildAssociationPolicy`而不是`OnCreateNodePolicy`. 优点是您可以将其绑定到您的自定义方面。它看起来像这样：

```
policyComponent.bindAssociationBehaviour(
        NodeServicePolicies.OnCreateChildAssociationPolicy.QNAME,
        YourCustomModel.ASPECT_YOURASPECT, 
        ContentModel.ASSOC_CONTAINS, 
        new JavaBehaviour(this, "onCreateChildAssociation", NotificationFrequency.TRANSACTION_COMMIT)
); 
```

您必须记住，当您将节点移动到新文件夹时也会创建子关联，而不仅仅是在创建它时。此外，您现在必须检查`ContentModel.TYPE_CONTENT`Java 代码中子节点 ( ) 的类型。

# c - 在构建 libc（和其他库）时，GCC 的版本有多重要？

> ID：11504465
> 
> 赞同：0
> 
> 时间：2012-07-16T12:36:57.650
> 
> 标签：c, linux, gcc, embedded-linux, libc

我正在尝试在我的主机上创建一个与我的嵌入式设备上使用`chroot`. 主机和目标机器都是 x86，所以我不尝试交叉编译。我想在我的 chroot 中构建 GCC，然后使用构建 libc 和我的嵌入式设备上已经存在的任何其他库（以及我的可执行文件需要运行才能在设备上部署的任何其他库）。通过这种方式，我希望我的开发机器上的所有库都与适当版本的 libc 正确链接。

我的问题是——我知道嵌入式设备上的 libc 是 4.3.2，但我使用相同版本的 GCC 在我的开发机器上本地构建库有多重要？如果我真的使用更新的版本（即我的开发机器安装附带的 4.6.3 版本）来构建这些库，是否有任何潜在的并发症？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:42:23.100

只要 ABI 在编译器版本之间没有改变，你应该没问题。在我的脑海里，C ABI 多年来一直没有改变，而 C++ ABI 自 3.4 / 4.0 以来也没有改变。[检查官方文档](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)以确定。

# java - 如何在 Android 中使用 HTTPS 发布

> ID：11504467
> 
> 赞同：8
> 
> 时间：2012-07-16T12:36:59.567
> 
> 标签：java, android, https, http-post

我查看了以下链接，但似乎没有什么具体的。 [Android 中的安全 HTTP Post](https://stackoverflow.com/questions/2253061/secure-http-post-in-android) 这个不再起作用了，我已经测试过了，其他人的评论说它不起作用。

我还检查了这个：[DefaultHttpClient、证书、Https 和发布问题！](https://stackoverflow.com/questions/5629122/defaulthttpclient-certificates-https-and-posting-problem?rq=1)这似乎可行，但博主只是让你悬而未决。更多分步说明会有所帮助。我设法获得了我的证书，因为我无法完成他的第二步。

[http://www.makeurownrules.com/secure-rest-web-service-mobile-application-android.html](http://www.makeurownrules.com/secure-rest-web-service-mobile-application-android.html)这个看起来不错，但是我在最后一步又松了作者：“回到我们原来的rest客户端代码。” 他也到处都是，我不知道他在使用哪些图书馆。他没有解释他的代码

```
RestTemplate restTemplate = new RestTemplate(); 
```

这是另一个悬念。因为该课程尚未提供。因此，如果有人可以详细解释如何进行 HTTPS 发布请求，那就太好了。我确实需要接受自签名证书。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T12:58:58.067

我希望它会有所帮助。这是我使用的代码并且工作得很好。

```
private HttpClient createHttpClient()
{
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, HTTP.DEFAULT_CONTENT_CHARSET);
    HttpProtocolParams.setUseExpectContinue(params, true);

    SchemeRegistry schReg = new SchemeRegistry();
    schReg.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    schReg.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));
    ClientConnectionManager conMgr = new ThreadSafeClientConnManager(params, schReg);

    return new DefaultHttpClient(conMgr, params);
} 
```

然后像这样创建一个 HttpClient： -

```
HttpClient httpClient = createHttpClient(); 
```

并将其与 HttpPost 一起使用。

干杯！！

**编辑**

而且我没有在我的代码中使用 RestTemplate。我提出了一个简单的发布请求。如果您需要更多帮助，请告诉我。好像我最近做了一些类似于你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:42:28.307

这是我用于 HTTPS Post 的方法，在这里我使用了自定义证书，所以用你自己的更改 HttpClient 分配......

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb  = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = MySSLSocketFactory.getNewHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            1);
                    nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);

                    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now",sb+"");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } /*
                 * catch (ParserConfigurationException e) { // TODO
                 * Auto-generated catch block e.printStackTrace(); } catch
                 * (SAXException e) { // TODO Auto-generated catch block
                 * e.printStackTrace(); }
                 */
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sb.toString());

        return sb.toString();
    } 
```

# jquery - Jquery对话框：隐藏按钮

> ID：11504473
> 
> 赞同：15
> 
> 时间：2012-07-16T12:37:22.357
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 Jquery 的 dialog() 方法来创建对话框。我在创建对话框时在对话框上创建按钮，使用

```
 $("#divName").dialog({
            buttons:
            {
            "Cancel":{ 
```

我有一个事件需要隐藏按钮，但不知道要使用哪些属性。请告诉我隐藏按钮的属性。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T15:30:20.427

如果你想隐藏“取消”按钮，试试这个。 

```
$('.ui-dialog-buttonpane button:contains("cancel")').button().hide(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-10T07:22:28.197

创建对话框时，您描述了按钮和按钮的属性，因此向按钮添加“id”属性：

按钮：[ { text: "Save", id: "btnId", click: function() { ... } } ]

然后，您可以将 id 用作 hide() 和 show() 方法的 jquery 过滤器：

$("#btnId").hide()...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T12:40:40.827

利用：

```
$('#divName').siblings('.ui-dialog-buttonpane').find('button').eq(n).hide(); 
```

对话框中按钮的编号在哪里`n`（从零开始）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T12:40:59.637

这将隐藏第一个按钮：

```
$('#divName').siblings('.ui-dialog-buttonpane').find('button:first').hide(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T12:38:23.160

尝试这个。

```
$("#divName").css("display","none"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T13:16:19.127

尝试在下面处理所有按钮，然后遍历它们以隐藏。

```
var buttons = $("#divName").dialog('option', 'buttons'); 
```

# c# - 如何将字符串写入 xna 内容文件夹中的 txt

> ID：11504483
> 
> 赞同：1
> 
> 时间：2012-07-16T12:38:07.543
> 
> 标签：c#, xna

我的 XNA 游戏的内容文件夹中有一个 txt 文件。我已经能够使用流阅读器从该文件中读取数据；但是我无法使用 stream*writer* 向它写入字符串，因为它说我无法写入流。

我使用内容文件夹，以便我可以在外部存储高分，并可以使用高分 txt 发布游戏。我需要将字符串“OEB 3350”添加到该文件中。

我的文件的位置是“Content\leaderboard.txt”

如何写入此 txt 文件。

```
public void updateExternalLeaderboard() 
    {
        string[] leaderboardArray = new string[orderedScoreList.Count];

        System.IO.Stream stream = TitleContainer.OpenStream("Content\\leaderboard.txt");
        System.IO.StreamWriter swriter= new System.IO.StreamWriter(stream);

        for (int p = 0; p < orderedScoreList.Count; p++) 
        {
            leaderboardArray[p] = orderedScoreList[p].initials + " " + orderedScoreList[p].scoreString;
            swriter.WriteLine(leaderboardArray[p]);
        }
        swriter.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:52:09.497

查看将[数据保存到游戏文件](https://docs.microsoft.com/en-us/previous-versions/windows/xna/bb203924%28v%3dxnagamestudio.41%29)

您必须序列化并使用存储容器。本教程有一个完整的项目，所以它有很多方法可以做到这一点。

# php - 尝试在另一个类 var 的数组中使用静态 var 时出错

> ID：11504491
> 
> 赞同：3
> 
> 时间：2012-07-16T12:38:26.567
> 
> 标签：php

除了谈论很多没用的东西，还有我的代码：

```
1 public static $_INT = 'INTEGER';
2 protected $_name = 'projetos';
3 protected $_primary = 'id';
4 protected $_fields = Array (
    Array ('id', self::$_INT)
); 
```

我在第 4 行遇到错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:42:01.547

`self::$_INT`是表达式，不能在类的属性声明中使用表达式，只能使用静态值。

`$_fields`如果你想这样做，你必须在构造函数中初始化。

像

```
class MyClass {

  public static $_INT = 'INTEGER';
  protected $_name = 'projetos';
  protected $_primary = 'id';
  protected $_fields;

  public function __construct() {
    $this->fields = Array (
      Array ('id', self::$_INT)
    );
  }

} 
```

# android - 如何在android中的谷歌地图上获得两点之间的方向？

> ID：11504492
> 
> 赞同：0
> 
> 时间：2012-07-16T12:38:27.660
> 
> 标签：android, google-maps, google-maps-api-3

我搜索了两个小时，但只找到了画线，我想得到这个表格的方向点击[这里](http://macoymejia.files.wordpress.com/2011/11/wpid-cap201111170534-1.jpg?w=627%22)！我有十个点，当我单击该点时，我想显示从我所在位置到该点的方向。我的代码看起来：

```
package de.vogella.android.locationapi.maps;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

   import com.google.android.maps.GeoPoint;
   import com.google.android.maps.MapActivity;
   import com.google.android.maps.MapController;
   import com.google.android.maps.MapView;
   import com.google.android.maps.MyLocationOverlay;
   import com.google.android.maps.OverlayItem;
   import com.google.android.maps.Projection;

    public class ShowMapActivity extends MapActivity {

private MapController mapController;
private MapView mapView;
private LocationManager locationManager;
private MyOverlays itemizedoverlay,itemizedoverlay_central;
private MyLocationOverlay myLocationOverlay;
private String nameOfOffice_AZ[];
private String addressOfOffice_AZ[];
private String phoneOfOffice_AZ[];

public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.main); // bind the layout to the activity

    // Configure the Map
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Projection projection = mapView.getProjection();

    nameOfOffice_AZ= getResources().getStringArray(R.array.NamesOFObject_AZ);
    addressOfOffice_AZ = getResources().getStringArray(R.array.AddressOfOffice_AZ);
    phoneOfOffice_AZ = getResources().getStringArray(R.array.PhoneOfOffice_AZ);

    mapController = mapView.getController();
    mapController.setZoom(16); // Zoon 1 is world view
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            0, new GeoUpdateHandler());

    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);

    myLocationOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            mapView.getController().animateTo(myLocationOverlay.getMyLocation());
        }
    });

    Drawable drawable = this.getResources().getDrawable(R.drawable.office_icon);
    Drawable drawable_central = this.getResources().getDrawable(R.drawable.central_office);

    itemizedoverlay = new MyOverlays(this, drawable);
    itemizedoverlay_central = new MyOverlays(this, drawable_central);

    createMarker();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

public class GeoUpdateHandler implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);
        GeoPoint point = new GeoPoint(lat, lng);
        createMarker();
        mapController.animateTo(point); // mapController.setCenter(point);

    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}

private void createMarker() {
    //CENTRAL OFFICE
    GeoPoint p_central = new GeoPoint((int)(40.38292884084829 * 1e6),(int)(49.84223246574 * 1e6));
    OverlayItem overlayitem = new OverlayItem(p_central, nameOfOffice_AZ[0] ,addressOfOffice_AZ[0]+"\n"+phoneOfOffice_AZ[0] );
    itemizedoverlay_central.addOverlay(overlayitem);
    mapView.getOverlays().add(itemizedoverlay_central);
    //END CENTRALL OFFICE

    GeoPoint p = new GeoPoint((int)(40.376455916943236 * 1e6),(int)(49.84803676605224 * 1e6));
    overlayitem = new OverlayItem(p, nameOfOffice_AZ[0] ,addressOfOffice_AZ[0]+"\n"+phoneOfOffice_AZ[0] );
    itemizedoverlay.addOverlay(overlayitem);

        mapView.getOverlays().add(itemizedoverlay);

}

@Override
protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
}

@Override
protected void onPause() {
    super.onPause();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
} 
```

和 MyOverlays.java

```
package de.vogella.android.locationapi.maps;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
 import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

 public class MyOverlays extends ItemizedOverlay<OverlayItem> {

private static int maxNum = 5;
private OverlayItem overlays[] = new OverlayItem[maxNum];
private int index = 0;
private boolean full = false;
private Context mContext;
private OverlayItem previousoverlay;

public MyOverlays(Context context, Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    this.mContext = context;
}

private ArrayList< OverlayItem > mOverlays = new ArrayList< OverlayItem >();

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}
public void name()  {

}
@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int i) {
    //when you tap on the marker this will show the informations provided by you when    you create in the 
    //main class the OverlayItem
   OverlayItem item = mOverlays.get(i);

    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setInverseBackgroundForced(true);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());

    dialog.setCancelable(true);
    dialog.setPositiveButton("Go To", new OkOnClickListener());
   /// dialog.setNegativeButton("No, no", new CancelOnClickListener());
    dialog.show();
//  nese bax = new nese();
//  bax.oldu(mContext);
    return true;
}
private final class CancelOnClickListener implements
DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(mContext, "You clicked yes", Toast.LENGTH_LONG)
                .show();
    }
    }

    private final class OkOnClickListener implements
    DialogInterface.OnClickListener {
public void onClick(DialogInterface dialog, int which) {
    //Toast.makeText(mContext, "You clicked no", Toast.LENGTH_LONG).show();
}

}

    public class RoutePath extends MapActivity { 
/** Called when the activity is first created. */ 

MapView mapView; 

@Override 
public void onCreate(Bundle savedInstanceState) { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.main); 

MapView mapView = (MapView) findViewById(R.id.mapview); 
double src_lat = 25.04202; // the testing source 
double src_long = 121.534761; 
double dest_lat = 25.05202; // the testing destination 
double dest_long = 121.554761; 
GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6), 
(int) (src_long * 1E6)); 
GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6), 
(int) (dest_long * 1E6)); 

DrawPath(srcGeoPoint, destGeoPoint, Color.GREEN, mapView); 

mapView.getController().animateTo(srcGeoPoint); 
mapView.getController().setZoom(15); 

} 

@Override 
protected boolean isRouteDisplayed() { 
// TODO Auto-generated method stub 
return false; 
} 

private void DrawPath(GeoPoint src, GeoPoint dest, int color, 
MapView mMapView01) { 

// code in section 2.2 

} 

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:42:51.493

减少搜索的努力..

不管怎样，看看[谷歌行车路线 - 地图视图覆盖](http://www.anddev.org/google_driving_directions_-_mapview_overlayed-t826.html)了谷[歌方向 API](https://developers.google.com/maps/documentation/directions/)

并使用意图

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=xx.xx,xx.xx&daddr=xx.xx,xx.xx"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:42:28.113

这篇博文可以作为一个很好的起点：[Android 驾驶方向 Route-Path](http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html)

对我来说工作得很好。

# tcp - 防止 netcat 中的 TCP SYN 重试（用于端口敲击）

> ID：11504493
> 
> 赞同：4
> 
> 时间：2012-07-16T12:38:37.253
> 
> 标签：tcp, netcat

我正在尝试为简单的端口敲击设置编写 linux 客户端脚本。我的服务器将 iptables 配置为需要特定端口的 TCP SYN 序列才能打开访问权限。我能够使用 telnet 或手动调用 netcat（在运行命令后立即按 Ctrl-C）成功敲门，但无法构建自动敲门脚本。

我对自动端口敲门脚本的尝试仅包含“nc -w 1 xxxx 1234”命令，这些命令连接到 xxxx 端口 1234 并在一秒钟后超时。然而，问题似乎是内核（？）进行自动 SYN 重试。大多数情况下，在 nc 尝试连​​接的 1 秒内发送了多个 SYN。我已经用 tcpdump 进行了检查。

那么，有谁知道如何防止 SYN 重试并使 netcat 每次连接/敲门尝试只发送一个 SYN？也欢迎其他可以完成这项工作的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-19T18:29:02.750

是的，我检查过你也可以使用 nc！：

```
$ nc -z example.net 1000 2000 3000; ssh example.net 
```

魔法来自（-z：零I/O模式）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T18:18:46.307

您可以使用 nmap 进行端口敲击 (SYN)。只需执行：

```
for p in 1000 2000 3000; do 
  nmap -Pn --max-retries 0 -p $p example.net;     
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:22:35.597

您无法阻止 TCP/IP 堆栈执行其明确设计的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T13:55:06.983

试试这个（作为根）：

```
echo 1 >  /proc/sys/net/ipv4/tcp_syn_retries 
```

或这个：

```
int sc = 1;
setsockopt(sock, IPPROTO_TCP, TCP_SYNCNT, &sc, sizeof(sc)); 
```

# java - 远程运行 Hbase ImportTSV 作业

> ID：11504494
> 
> 赞同：1
> 
> 时间：2012-07-16T12:38:38.083
> 
> 标签：java, hadoop, hbase

我正在尝试运行 HBase importTSV hadoop 作业以将数据从 TSV 文件加载到 HBase 中。我正在使用以下代码。

```
 Configuration config = new Configuration();
    Iterator iter = config.iterator();
    while(iter.hasNext())
    {
        Object obj = iter.next();
        System.out.println(obj);
    }

    Job job = new Job(config);
    job.setJarByClass(ImportTsv.class);
    job.setJobName("ImportTsv");
    job.getConfiguration().set("user", "hadoop");
    job.waitForCompletion(true); 
```

我收到此错误

错误 security.UserGroupInformation：PriviledgedActionException as：E317376 原因：org.apache.hadoop.security.AccessControlException：org.apache.hadoop.security.AccessControlException：权限被拒绝：user=E317376，access=WRITE，inode="staging":hadoop：超群：rwxr-xr-x

我不知道如何设置用户名 E317376。这是我试图在远程集群中运行此作业的 Windows 机器用户。我在 linux 机器上的 haddop 用户帐户是“hadoop”

当我在 linux 机器上运行它时，它是 hadoop 用户帐户下的 Hadoop 集群的一部分，一切正常。但我想以编程方式在 java web 应用程序中运行这项工作。我做错什么了吗。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:13:50.023

您的 mapred-site.xml 文件中应该有如下属性

```
<property>
<name>mapreduce.jobtracker.staging.root.dir</name>
<value>/user</value>
<property> 
```

也许有必要将您的 dfs 文件系统的 /user 文件夹更改为 777

不要忘记停止/启动您的 jobtrackers 和 tasktrackers（sh stop-mapred.sh 和 sh start-mapred.sh）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T21:47:03.367

我还没有测试这些解决方案，但尝试在你的工作配置中添加这样的东西

```
conf.set("hadoop.job.ugi", "hadoop"); 
```

以上内容可能已过时，因此您也可以将用户设置为 hadoop （来自[http://hadoop.apache.org/common/docs/r1.0.3/Secure_Impersonation.html](http://hadoop.apache.org/common/docs/r1.0.3/Secure_Impersonation.html)的代码）尝试以下操作：

```
UserGroupInformation ugi = 
                     UserGroupInformation.createProxyUser(user, UserGroupInformation.getLoginUser());
             ugi.doAs(new PrivilegedExceptionAction<Void>() {
               public Void run() throws Exception {
                 //Submit a job
                 JobClient jc = new JobClient(conf);
                 jc.submitJob(conf);
                 //OR access hdfs
                 FileSystem fs = FileSystem.get(conf);
                 fs.mkdir(someFilePath); 
               }
             } 
```

# layout - nLog 布局：.cs 文件的名称和行号

> ID：11504495
> 
> 赞同：0
> 
> 时间：2012-07-16T12:38:44.573
> 
> 标签：layout, nlog

如何配置 NLog Layout 以获取源文件名和行号？

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:34:18.903

`${callsite}`LayoutRenderer 应该做你想做的事。

[http://nlog-project.org/wiki/Callsite_layout_renderer](http://nlog-project.org/wiki/Callsite_layout_renderer)

# c# - 将内部字典更新为外部字典中的值

> ID：11504496
> 
> 赞同：2
> 
> 时间：2012-07-16T12:38:46.873
> 
> 标签：c#, collections, .net-4.0, dictionary, foreach

在这样的构造中：

```
Dictionary<myObject, Dictionary<myEnum, secondObject>> myDict; 
```

我`foreach`用来搜索 external 中的所有项目`Dictionary`：

```
foreach (var elem in myDict)
{
//I need to make some modifications in inner Dictionary for chosen myEnum
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:41:45.200

a 上的`foreach`循环`Dictionary`枚举键值对。关键在`elem.Key`; 值（即您的目标内部字典）是`elem.Value`.

```
foreach (var elem in myDict)
{
    //I need to make some modifications in inner Dictionary for chosen myEnum
    Dictionary<myEnum, secondObject> inner = elem.Value;
    inner[myEnum.EnumVal1] = new secondObject(123);
    inner[myEnum.EnumVal2] = new secondObject(456);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:43:06.600

你很亲密，看来你只是对访问内部字典有些困惑？

```
foreach (var elem in myDict) // var is KeyValuePair<myObject, Dictionary<myEnum, secondObject>>
{
    var innerDict = elem.Value; // Value is Dictionary<myEnum, secondObject>

    if (innerDict != null)
    {
        if (innerDict.ContainsKey(enumVal)) // key is myEnum
        {
            var value = innerDict[enumVal]; // var is secondObject
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:45:54.083

由于没有提供有关 myObject 或 secondObject 的详细信息，因此以下内容可能过于笼统，但至少可以给您一个想法：

```
foreach (var elem in myDict)
{
    var temp = elem.Value.Single(p => p.Key == MyEnum.a);
    (temp.Value as MySecondObject).anyProperty = anyValue;
} 
```

# extjs - JSON DataStore 中的全局变量

> ID：11504503
> 
> 赞同：0
> 
> 时间：2012-07-16T12:39:24.213
> 
> 标签：extjs

我想声明一个从 DataStore 获取值的全局变量，并在警报窗口中显示它的值。

```
var params = 1;

var storeTeacher = new Ext.data.JsonStore({
       id: 'IDstoreTeacher',
       url: 'school.php',
       method: 'POST',
       baseParams:{task: "LABEL",
                   parametar: params},
       root: 'rows',
       fields: 
              [{name: 'NameT', type: 'string', mapping: 'Teacher_name'}],
       autoLoad: true   
    });

var TeacherName;

storeTeacher.load({ 
       scope: this, 
       callback: function (records, operation, success) { 
                   TeacherName = storeTeacher.getAt(0).get('NameT');
              }
});

alert(TeacherName); 
```

但是，我唯一得到的是警告窗口，上面写着：未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:44:23.463

`alert(TeacherName);`在执行回调的回调之前执行您的调用`storeTeacher.load`。

如果您将 放在`alert(TeacherName)`回调函数中，它将正确填充您的 TeacherName 并在警报中正确显示：

```
storeTeacher.load({
    scope: this,         
    callback: function (records, operation, success) {                     
        TeacherName = storeTeacher.getAt(0).get('NameT');
        alert(TeacherName);   
} }); 
```

这种行为是预期的。

# css - CSS 脊边框在 div 的顶部失败

> ID：11504507
> 
> 赞同：0
> 
> 时间：2012-07-16T12:39:48.550
> 
> 标签：css, border

一个由 CSS 形成的 div

```
#place01
{
border-top:medium ridge #FFF;
border-bottom:medium ridge #FFF;
} 
```

底部边框是脊状的，但顶部 - 不是。
这是一条简单的细线。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:48:07.753

问题是该 div 容器的背景颜色与边框颜色相同。并考虑到`ridge`完全正常行为的边框样式的逻辑。 [http://jsfiddle.net/4SNAZ/1/](http://jsfiddle.net/4SNAZ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:45:51.667

这里工作得很好：http: [//jsfiddle.net/WcsVH/](http://jsfiddle.net/WcsVH/)

# matlab - MATLAB 嵌套多个输入函数

> ID：11504512
> 
> 赞同：1
> 
> 时间：2012-07-16T12:40:11.827
> 
> 标签：matlab, colon

给定一个多输入 matlab 函数

```
out=f(in1, in2) 
```

我想编写第二个函数 g 生成 f 的输入，例如

```
[in1, in2]=g(in) 
```

这样我就可以调用类似的东西：

```
out=f(g(in)) 
```

我尝试将 g 编写为单个输出函数，它将 in1 和 in2 存储在一个单元格数组中，以便我可以使用冒号运算符将 g 的输出提供给 f：

```
in_c=g(in);
out=f(in_c{:}) 
```

但我正在寻找一种单行解决方案，当我读到时，这似乎不可能实现：

[是否可以在 MATLAB 中的表达式上应用冒号运算符？](https://stackoverflow.com/questions/9337713/is-it-possible-to-apply-colon-operator-on-an-expression-in-matlab)

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:06:31.800

[正如最近所讨论](https://stackoverflow.com/questions/11461963/matlab-splice-vector-into-arguments-for-function-call/11462984#11462984)的，这在 Matlab 中是不可能的。

但是，如果您不想重新编写函数`g(x,y)`以返回元胞数组，您仍然可以在两行中完成所有操作：

```
[in4f{1}, in4f{2}] = g(in);
out = f(in4f{:}); 
```

顺便说一句：除非您真的对记忆感到痛苦，否则通过避免临时变量来尝试在任何地方强制使用单行语句没有多大意义。当然，您可以使您的代码看起来像 CrazyPerl，但从长远来看，您会为增加的可读性而高兴。

# jquery - 如何使用 jGFeed 访问 RSS 条目的整篇文章？

> ID：11504514
> 
> 赞同：0
> 
> 时间：2012-07-16T12:40:24.353
> 
> 标签：jquery, html, mobile, jquery-mobile, rss

我试图从 RSS 提要中解析整篇文章，但找不到使用 jgfeed 执行此操作的标签。我可以使用以下方法为我的帖子列表视图获取各种数据：

```
for (var i = 0; i < feeds.entries.length; i++) {                    
    var entry = feeds.entries[i];
    var title = entry.title;
    var link = entry.link;
    var description = entry.content;
    var pubDate = entry.publishedDate;
    if(index == i) {    
        html = "<h1>" + title + "</h1>";
        html += "<p><small>" + pubDate + "</small><br>";
        html += description +"</p>";
        $(id).append(html);
    }               
}; 
```

但是，根据文档“entry.content”应该是包含在body标签中的整篇文章，但是当我使用它时它会显示一个简短的片段，如图所示：http: [//imgur.com/Kp3NR](http://imgur.com/Kp3NR)（我希望它显示整篇文章）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:19:26.077

好的，我可以访问的内容取决于 RSS 提要 istelf。我所做的（因为我无法更改 RSS 提要的内容）整个内容是将相关页面加载到 div 中并解析出我需要的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T21:46:41.240

JGfeed 似乎不再存在（至少在[jQuery 插件](http://plugins.jquery.com/)中不再存在）。在寻找用于获取 RSS 的替代 .js 后，我发现了[FeedEk](http://jquery-plugins.net/FeedEk/FeedEk.html)，它使将 RSS 添加到我的 phonegap 应用程序变得相当容易。

# python - Python/Django：是否有任何装饰器可以告诉输入不是无？

> ID：11504518
> 
> 赞同：4
> 
> 时间：2012-07-16T12:40:35.493
> 
> 标签：python, django

*   我是 Django 新手，来自 Java/Spring 背景。
*   我想知道是否有类似以下的装饰器可以在 Django 或 Python 中完成？

**想**

```
def addToList(@not_none a, @not_none b):
    # so that I do not check for nullity explicitly  
    do_things_with_a(a)
    do_things_with_b(b) 
```

*   因为这是在 Java 中很容易获得的东西，所以只要看看 Python/Django 是否有它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:58:54.813

在 Python 中通常不会限制数据类型。此外，装饰器只能应用于类和方法/函数。

虽然，你不应该真的这样做，但你会这样做。

（您可以修改它以接受参数名称以通过一些工作来强制执行约束）。

```
def not_none(f):
    def func(*args, **kwargs):
        if any(arg is None for arg in args):
            raise ValueError('function {}: does not take arguments of None'.format(f.__name__))
        return f(*args, **kwargs)
    return func

@not_none
def test(a, b):
    print a, b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:57:02.443

您可以编写`rejectNone`如下装饰器：

```
def rejectNone(f):
    def myF(*args, **kwargs):
        if None in args or None in kwargs.values():
            raise Exception('One of the arguments passed to {0} is None.'.format(f.__name__)
        return f(*args, **kwargs)
    return myF

@rejectNone
def f(a, b, k=3):
   print a * b 
```

`Exception`如果您尝试`f`使用参数调用，您现在将得到一个`None`。请注意，装饰器可以应用于函数或类方法，但不能将它们放在函数参数的前面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-05T19:34:17.067

我知道这已经晚了，但对那些可能会有所帮助的人。

我有一个基于 Jon 的回答的简单仓库，它[在此处](https://github.com/bigbob556677/python-not-none)接受可空字段的参数。

* * *

```
def not_none(nullable_parameters=None):

    def the_actual_test(f, args, filter_array):
        has_none = False
        bad_parameters = []

        if type(filter_array) is str:

            filter_array = [filter_array]

        if not filter_array:

            if any(arg[1] is None for arg in args):
                raise ValueError('function {}: Parameters cannot be None. '.format(f.__name__))

        elif type(filter_array) is list:
            for a in args:
                for ff in filter_array:
                    if a[0] != ff:
                        if a[1] is None:
                            has_none = True
                            bad_parameters.append(a[0])
                            break

        if has_none:
            raise ValueError('function {}: Parameters {} cannot be None. '.format(f.__name__, bad_parameters))

    def real_decorator(f):

        v_names = f.__code__.co_varnames

        def wrapper(*args, **kwargs):
            n_args = []

            for a in range(0, len(args)):
                n_args.append((v_names[a], args[a]))

            the_actual_test(f, n_args, nullable_parameters)
            result = f(*args, **kwargs)

            return result
        return wrapper

    return real_decorator 
```

**用法**

```
from not_none import not_none

@not_none()
def no_none(a,b):
    return (a,b)

@not_none(nullable_parameters=["b"])
def allow_b_as_none(a,b):
    return (a,b)

#passes
no_none(1,1)

#fails
no_none(None,1)

#passes
allow_b_as_none(1,None)

#fails
allow_b_as_none(None,1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-12T09:26:54.443

在我的第一个答案被删除后。这是一个更新的版本：

我尝试使用[Bigbob556677](https://stackoverflow.com/users/8521346/bigbob556677)的非常好的答案，但对我来说它不起作用`**kwargs`，所以我对其进行了编辑并将其放在 Gist 中，这里：[https](https://gist.github.com/devTechi/6e633ded72cc83637f34b1a3f4a96984) ://gist.github.com/devTechi/6e633ded72cc83637f34b1a3f4a96984 （代码也以下）

我没有用 just 测试它`*args`，但是（我或多或少只是发布了 gist-link）`**kwargs`它工作得很好。

```
def not_none(nullable_parameters=None):
  # values given by real_decorator (see below)
  def the_actual_test(f, expected_args_with_given, allowed_nullable_args):
    has_none = False
    bad_parameters = []

    for key, value in expected_args_with_given.items():
      if (value is None and nullable_parameters is None) or \
              (value is None and key not in nullable_parameters):
        bad_parameters.append(key)
        has_none = True

    if has_none:
      raise ValueError("[Function '{}' of '{}'] - IMPORTANT: Parameters '{}' cannot be None. ".format(f.__name__, f.__module__, bad_parameters))

  # here the code REALLY begins
  def not_null_decorator(original_func):
    import inspect
    has_self = False
    # f.__code__.co_varnames --> local variables (not only parameters), see: https://python-reference.readthedocs.io/en/latest/docs/code/varnames.html
    # get declared arguments from ogirinal function
    argspec = inspect.getargspec(original_func)
    if 'self' in argspec.args:
      argnames = argspec.args[1:]  # no self
      has_self = True
    else:
      argnames = argspec.args
    args_dict = dict.fromkeys(argnames)

    def get_args(*args, **kwargs):
      for arg in args:
        if arg in args_dict.keys():
          args_dict[arg] = arg
      for key, value in kwargs.items():
        if key in args_dict.keys():
          args_dict[key] = value

      return args_dict

    def wrapper_with_self(self, *args, **kwargs):
      the_actual_test(original_func, get_args(*args, **kwargs), nullable_parameters)
      return original_func(self, *args, **kwargs)

    def wrapper(*args, **kwargs):
      the_actual_test(original_func, get_args(*args, **kwargs), nullable_parameters)
      return original_func(*args, **kwargs)

    if has_self:
      return wrapper_with_self
    else:
      return wrapper

  return not_null_decorator 
```

用法：

```
from .nullable_decorator import not_none

@not_none(nullable_parameters=["nullable_arg1", "nullable_arg2"])
def some_function(self, nullable_arg1=None, nullable_arg2=None, non_nullable_arg1=None):
   pass

@not_none()
def some_other_function(self, non_nullable_arg1=None, non_nullable_arg2=None):
   pass 
```

# android - 如何获取MD5认证指纹

> ID：11504527
> 
> 赞同：0
> 
> 时间：2012-07-16T12:41:09.793
> 
> 标签：android

我已经创建了自己的`Keystore`并获得了`MD5 Certification Fingerprint Key`，我正在编写以下命令：

```
C:\Users\XX\.android>keytool -list -alias mykey -keystore mykey.keystore 
```

它返回

```
mykey, 16 Jul, 2012, PrivateKeyEntry,
Certificate fingerprint (SHA1): 40:6A:97:77:FE:25:55:25:03:D2:8E:93:FD:74:21:A7:52:XX:YY:ZZ 
```

而我一直在寻找 MD5 密钥，因为每当我尝试`GoogleMap Api`使用它获取密钥时，它都会说：

```
 The fingerprint that you entered is not valid. 
```

请帮我获取`MD5 key`. 另外，如果可能的话，简要描述这两种类型的键有什么区别

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:47:15.473

只需在 keytool 后添加 -v

```
C:\Program Files\Java\jdk1.7.0\bin>keytool -v -list -alias
androiddebugkey -keystore debug.keystore -storepass android -keypass android 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:47:04.890

```
Open the command prompt and follow the steps

D:\android-sdk-windows-1.6_r1\tools>keytool -genkey -v -keystore projectkey.keystore -alias aliasname -keyalg RSA -keysize 2048 -validity 15000
Enter keystore password: ------------
What is your first and last name?
[Unknown]: ------------
What is the name of your organizational unit?
[Unknown]: ------------
What is the name of your organization?
[Unknown]: ------------
What is the name of your City or Locality?
[Unknown]: ------------
What is the name of your State or Province?
[Unknown]: ------------
What is the two-letter country code for this unit?
[Unknown]: ------------

D:\android-sdk-windows-1.6_r1\tools>keytool -v -list -alias aliasname -keystore projectkey.keystore
Enter keystore password:
aliasname, Dec 7, 2010, PrivateKeyEntry,
Certificate fingerprint (MD5): CA:CF:AA:0E:5A:2B:88:C8:64:F1:FA:F7:29:21:50:FF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:33:48.170

```
I thinks the query is not correct ,

C:\Users\XX.android>keytool -list -alias mykey -keystore mykey.keystore

because for a md5 key you first go to jdk bin 

C:\Program Files\Java\jdk1.6.0_21\bin> 

then run the following command  
keytool -list -alias the_alias_name_of_keystore -keystore
keystore_with_full_path  like

C:\Program Files\Java\jdk1.6.0_21\bin>keytool -list -alias map -keystore
D:\SampleMap

and  it gives you output like

Enter keystore password:
SampleMap, Apr 6, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): 4F:63:53:33:33:5A:79:F6:53:C2:33:E6:E7:A6:8F:C9 
```

# javascript - jQuery克隆功能

> ID：11504528
> 
> 赞同：1
> 
> 时间：2012-07-16T12:41:10.453
> 
> 标签：javascript, jquery

有什么方法可以通过 JQUERY 克隆函数自定义 html 假设我有一个 div

```
<div id="my_Div" style="margin-right:14px;"> Name :
                <input type="text" name="file_name[]" id="file_name" class="validate[required]"/>
                &nbsp;&nbsp; Choose File :
                <input type="file" name="upload_file[]" id="upload_file" class="validate[required]" onChange="getFileExtension('upload_file');"/> 
              </div> 
```

没有克隆功能

```
$('#my_Div').clone().appendTo("body"); 
```

我可以制作，因为它是克隆 html，但我想自定义

```
<input type="text" name="file_name[]" id="file_name" class="validate[required]"/> 
```

IE

```
<input type="text" name="file_name[]" id="file_name1" class="validate[required]"/>
<input type="text" name="file_name[]" id="file_name2" class="validate[required]"/>
<input type="text" name="file_name[]" id="file_name3" class="validate[required]"/> 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:47:24.743

如果我正确理解您的问题，您想自定义您返回的克隆副本。尽管没有内置方式，但您可以将要更改的逻辑放在一个函数中，然后调用，如下所示：

```
clonedElement.attr('id', function () {
 // logic
}); 
```

更多细节可以在这里找到：[jQuery to clone a table with new id, how to write below code together](https://stackoverflow.com/questions/3752202/jquery-to-clone-a-table-with-new-id-how-to-write-below-code-collectively)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:44:48.947

```
var i = 1;
var tmp = $('#my_Div').clone();
var inp = tmp.find('#file_name');
inp.attr('id', inp.attr('id')+i);
i++;
tmp.appendTo('body');

I would add class to all inputs, for example class="changeable" and add:    
$('.changeable').on('change', function() {
 //do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:52:21.883

不，您不应该在克隆函数中或在克隆函数中执行此操作，尤其是不应该通过操作 html 字符串。最好做这样的事情：

```
var c = $('#my_Div').clone().appendTo('body');
var i = c.find("#file_name").attr('id', "file_name0");
for (var i=1; i<3; i++)
    i.clone().appendTo(c).attr('id', "file_name"+i); 
```

但是，我不认为同一类型的多个元素确实需要（编号的）ID。一个描述性的类名就足够了。

# php - 获取 PHP 文件中的注释

> ID：11504541
> 
> 赞同：8
> 
> 时间：2012-07-16T12:41:42.340
> 
> 标签：php, parsing, comments

我一直在尝试从服务器上的某个`.php`文件中获取注释，以解析其变量。我认为 Ii 找到了一种简单的方法来做到这一点，但是，我使用的函数不会返回任何内容，即使我在文件中清楚地有注释。

以下是我使用的评论：

```
/**
* @param  foo bar
* @return baz
*/ 
```

这是我的代码：

```
function GetComments($filename) {

    $expr = "/((?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:\/\/.*))/";

    $file = fopen($filename, "r");
    $length = filesize($filename);
    $comments = fread($file, $length);
    fclose($file);

    preg_match_all($expr, $comments, $matches);

    foreach($matches[0] as $id => $variable) {
        $comments = str_replace($variable, '', $comments);
    }

    return $comments;
} 
```

有什么我做错了吗？因为如果是这样，我显然是在看它。

任何帮助都会非常受欢迎。

* * *

我找到了答案：

首先，我可能应该在我的问题中指出我正在尝试编写一个用于读取插件的系统。这些插件文件应在顶部包含一个注释块，其中包含插件的作者、网站、电子邮件等变量。

所以这就是我所做的：

我以feeela 的示例来更改我的函数以获取评论及其变量。

然后我稍微改变了它的代码以满足我的需要：

```
public function GetComments($filename)
{

    $docComments = array_filter(token_get_all(file_get_contents($filename)), function($entry)
    {
        return $entry[0] == T_COMMENT;
    });
    $fileDocComment = array_shift($docComments);

    $regexp = "/\@.*\:\s.*\r/";
    preg_match_all($regexp, $fileDocComment[1], $matches);

    for($i = 0; $i < sizeof($matches[0]); $i++)
    {
        $params[$i] = split(": ", $matches[0][$i]);
    }

    return($params);
} 
```

我把feeela给我的代码结果通过一个正则表达式匹配，得到一个包含参数和它们的值组合的数组。

然后我使用 split 函数实际上给了我分离的参数和值，所以我可以将它们返回给调用该函数的变量。

为了让它正常工作，我需要更改我使用的评论样式

```
/**
* @param foo bar
* @return baz
*/ 
```

到

```
/*
@param: foo bar
@return: baz
*/ 
```

使其成为普通的注释块，而不是文档注释块。它还使我能够使用 ':' 作为拆分功能的模式。

在某些人看来，它可能“效率不高”。正如feeela 所说，“如果您的评论风格发生变化怎么办？”。我将是唯一一个在这个项目上工作并编写插件的人。因此，在每个插件脚本中保持相同的注释样式对我来说也不会太难。

这种方法对我来说非常有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T13:03:54.120

您可以使用[token_get_all()](http://php.net/token_get_all)，它“使用 Zend 引擎的词法扫描器将给定的 PHP 源字符串解析为语言标记”。

这是我曾经用来从当前文件中获取文件文档注释的示例函数：

```
/**
 * Return first doc comment found in this file.
 *
 * @return string
 */
function getFileDocBlock()
{
    $docComments = array_filter(
        token_get_all( file_get_contents(__FILE__)), function($entry) {
            return $entry[0] == T_DOC_COMMENT;
        }
    );
    $fileDocComment = array_shift($docComments);
    return $fileDocComment[1];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:44:40.750

尝试使用*[ReflectionClass 类](http://ca3.php.net/manual/en/class.reflectionclass.php)*和*[ReflectionFunction 类](http://ca3.php.net/manual/en/class.reflectionfunction.php)*。

这就是你需要获取的函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T07:24:05.960

看看[评论管理器](https://www.pakjiddat.pk/articles/view/254/comment-manager)。[它是一组用于解析DocBloc](https://en.wikipedia.org/wiki/Docblock#PHP)注释的 PHP 类。它还允许根据 DocBlock 注释中的信息验证函数参数值。

# java - Webservice 动态数据传输和验证

> ID：11504546
> 
> 赞同：0
> 
> 时间：2012-07-16T12:42:01.263
> 
> 标签：java, web-services, validation, endpoint

Web 服务应该验证输入数据并写入数据库。稍后，其他服务应该读取数据并从中创建一个 xml 文件。

所以服务只是进行数据传输和转换（WS-* Parameter => Database）。

“动态”webservice 还应该包含一组可变参数（“容器”），导致客户端变化很多且很快，这不应该以修改接口和底层实现而告终。

**如何做以及在哪里处理验证？**

初步想法：

*   只需发送一个文件作为附件，并在 web 服务中使用 .xsd 模式验证它，“固定”部分使用 .xsd 模式，“容器”部分使用 .xsd 模式。如果可变部分更改，则只有用于验证的“容器”.xsd 必须更改。容器可以是 base64 编码的 xml。如果发生验证错误，Web 服务会以错误响应。

*   使用所有标准项作为 WSD 参数并传递 base64 编码的容器。WS-* 对标准参数进行验证，并且仅针对另一个 .xsd 验证容器。

没有对值进行逻辑/语义评估，这应该在以后完成。仅需要字段类型验证。

容器应该是 xml，如：

```
 ... standard elements xml ...
 <embeddedContainer>
  <customItemsFromWSClientOne>
   <reallyCustomItemA>
    <substructure>
     <itemABC></itemABC>
   </substructure>
   <anotherStructure></anotherStructure>
   </reallyCustomItemA>
 </customItemsFromWSClientOne>
</embeddedContainer>
... standard elements xml ... 
```

另一个客户端可能会发送其他参数，例如具有完全不同结构的“customItemsFromWSClientTwo”。所以服务会变得非常通用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:54:28.017

有两种主要类型的验证：

1.  字段类型验证 - 确保发送的值具有正确的类型和格式（即检查字段 userName 是否包含字符串，或 id 是否包含数字等），这由 web 服务解析器/FW 负责。因此，如果用户发送了错误的类型，解析器就会抛出错误。
2.  逻辑验证 - 对实际值运行一些业务逻辑：

    if(value==null){//do something} else{//do something else}

我不确定您需要什么验证，但据我了解，“容器”应该是非常动态的，因此它可能包含以下内容：

```
<paramName>someParamName</paramName>
<paramValue>someValue</paramValue>
 ... 
```

在这种情况下，XSD 验证不会对您有多大好处，您可能需要编写一些逻辑来解决这个问题。

我可能对结构完全错误，如果是这样，请发布一些示例，以便我更好地理解它。

**编辑：**

为了使“容器”能够包含各种 XML 结构，您需要将其定义为[xsd:any](http://www.w3schools.com/schema/schema_complex_any.asp)。您可以定义`processContents`属性`strict`，如果定义了正确的命名空间，webservice 解析器应该能够验证它。[在这里](http://www.w3schools.com/schema/el_any.asp)查看更多信息。

另一种选择可能是使用组，看[这里](https://stackoverflow.com/questions/10528634/xsany-wrapper-xml-schema-validation)。

# ruby-on-rails - Rails has_man 通过 OR 查询

> ID：11504547
> 
> 赞同：0
> 
> 时间：2012-07-16T12:42:01.743
> 
> 标签：ruby-on-rails, activerecord, has-many-through

```
class Game < ActiveRecord::Base
  has_many :game_types, :dependent => :destroy
  has_many :types, :through => :game_types
end

class Type < ActiveRecord::Base
  has_many :game_types, :dependent => :destroy
  has_many :games, :through => :game_types
end 
```

游戏类型 1 == 单人游戏类型 2 == 多人

如何查询类型 ID 为 1 或 2 或两者兼有的游戏？

此外，我如何查询两者都没有的游戏？

这是通过 will_paginate 与分页一起使用的，因此最好使用单个查询。

提前感谢您挽救了我的理智。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:05:03.233

在 Rails 中，您总是可以使用简单的 SQL。OR 尚未在 Arel 中完全实现（我上次检查过），所以你想要的类似于：

```
Game.joins("game_types ON (game_types.game_id = games.id)").where("game_types.id IN (1,2)") 
```

这样，查询仍然具有合理的性能。您可以将其扩展为不包括对 Id 的直接引用，但这取决于您。

# .net - SQL Server 复制 - 自动解决冲突

> ID：11504548
> 
> 赞同：1
> 
> 时间：2012-07-16T12:42:10.783
> 
> 标签：.net, sql-server, replication

我在两个 SQL Server 实例之间设置了合并复制。因此，我有一个发布者和一个订阅者。

我阅读了一些关于如何解决冲突的文章，并且我已经使用了交互式解析器，它是 SQL Server Management Studio 的一部分。

但是，我有两个问题：

1.  是否可以在 Management Studio 之外（即从 .Net 应用程序）打开交互式解析器？
2.  我读到发布者和订阅者具有不同的可配置优先级，用于在同步期间确定赢家和输家。但是我是否必须配置其他东西才能根据这些优先级“自动解决”冲突？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:30:14.030

“获胜行应用在发布者和订阅者处，失败行中的数据写入冲突表。”

我在这篇文章中找到了解决方案：http: [//blogs.msdn.com/b/repltalk/archive/2011/04/19/clearing-resolved-merge-replication-conflicts.aspx](http://blogs.msdn.com/b/repltalk/archive/2011/04/19/clearing-resolved-merge-replication-conflicts.aspx)

**提示：：**为了完全消除交互式解析器中的冲突，必须在发布者**和**订阅者上执行“清除”脚本。

# asp.net - 第一次回发后不显示 viewState 值

> ID：11504549
> 
> 赞同：1
> 
> 时间：2012-07-16T12:42:20.790
> 
> 标签：asp.net, vb.net, viewstate

我是 asp.net 的新手（在经典 asp 编程多年后）。我正在尝试构建一个向字符串添加内容的页面。

我的代码如下：

**默认.aspx**

```
<body>
<form id="form1" runat="server">
<div>
<p><asp:textbox id="tb" runat="server"></asp:textbox></p>
<asp:Panel ID="tbPanel" runat="server"></asp:Panel>
</div>
</form>
</body> 
```

**后面的代码：**

```
Partial Class demo_Default
Inherits System.Web.UI.Page

Public Property gesStr As String

Set(value As String)

ViewState("gesStr") = value

End Set

Get

Dim o As Object = ViewState("gesStr")

If o Is Nothing Then

Return ""

Else

Return o

End If

End Get

End Property

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
Dim anzeigeStr As String = ""
If Page.IsPostBack Then
Else
gesStr = "1;"
End If
tb.Text = gesStr

Dim iButton As New Button
iButton.Text = "add"
iButton.CommandArgument = "1;"
AddHandler iButton.Click, AddressOf add
tbPanel.Controls.Add(iButton)

Me.anzeige()

End Sub

Private Sub add(ByVal sender As Object, ByVal e As EventArgs)
Dim myButton As Button = DirectCast(sender, Button)
Dim addString As String = myButton.CommandArgument
gesStr += addString
End Sub

Private Sub anzeige()
Dim gesArray As Array = Split(gesStr, ";")
For xLauf As Integer = 0 To UBound(gesArray) - 1
Dim anzLabel As New Label
anzLabel.Text = "<p>" & gesArray(xLauf) & "</p>"
tbPanel.Controls.Add(anzLabel)
Next

End Sub

End Class 
```

**问题：**

按下按钮将导致 a `postBack`，但直到第二次按下按钮后才会出现添加的结果。期望的结果是子在第一次按下按钮后在循环内显示正确的数组。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:33:51.560

每次单击按钮时，您都需要调用函数 anzeige() 并将 gesStr 值绑定到文本框控件。请看下面的代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Page.IsPostBack Then
        Else
            gesStr = "1;"
        End If
        tb.Text = gesStr
        Dim iButton As New Button
        iButton.Text = "add"
        iButton.CommandArgument = "1;"
        iButton.CommandName = "1;"
        AddHandler iButton.Click, AddressOf add
        tbPanel.Controls.Add(iButton)

    End Sub

    Private Sub add(ByVal sender As Object, ByVal e As EventArgs)

        Dim myButton As Button = DirectCast(sender, Button)
        Dim addString As String = myButton.CommandArgument
        gesStr += addString

        anzeige()
    End Sub

    Private Sub anzeige()
        Dim gesArray As Array = Split(gesStr, ";")
        For xLauf As Integer = 0 To UBound(gesArray) - 1
            Dim anzLabel As New Label
            anzLabel.Text = "<p>" & gesArray(xLauf) & "</p>"
            tbPanel.Controls.Add(anzLabel)
        Next

        'Bind gesStr value to the textbox control
        tb.Text = gesStr

    End Sub 
```

# php - php JSON 输出有斜线并且不会显示为 html

> ID：11504563
> 
> 赞同：2
> 
> 时间：2012-07-16T12:42:58.280
> 
> 标签：php, ajax, json

试图通过 JSON 为 ajax 网站输出 html php。

php:

```
$return = "<div id='content'><ul class='allitems'>";
while($row = mysql_fetch_array($result)){
    $return .= "<li class='items'>" . "<div class='itemheading'><div  class='controls'> <span class='votes'>" . $row['votes'] . "</span>";
    $return .= "<form class='actions' action='index.php' method='POST'><input type='hidden' name='id' value='{$row['id']}'/><input type='submit' class='button plus' value='+1' /></form>";
    $return .= "<form class='actions' action='index.php' method='POST'><input type='hidden' name='id-' value='{$row['id']}'/><input type='submit' class='button minus' value='-1' /></form>  ";
    $return .= "<form class='actions' action='index.php' method='POST'><input type='hidden' name='idDel' value='{$row['id']}'/><input type='submit' class='button delete' value='X' /></form>  ";
    $return .= "</div><span class='title'>" . $row['name'] . "</span></div><span class='infotext'>". $row['infotext'] ."</span></li>";
}
$return .= "</ul></div>";
echo json_encode($return); 
```

如果您访问此 php 页面，则输出中到处都有斜杠 ( `\/`)，例如。`<\/span><\/form> <\/div>Make the app look all nice<\/span>`并且不输出为常规 html。

这是将显示 putput 的 ajaxpage 的代码：

```
 <script id="source" language="javascript" type="text/javascript">

  $(function () {
    $.ajax({url: 'retrieve.php', dataType: 'json'}).done(function(data) {

            var html = data[3];

            $('#output')
                .append("<b>id: </b>"+html)

    });
});
  </script> 
```

问题在于它`<`何时输出等`var html = rows[0];` `d`。`[1]`一次只显示 1 个字符。

如何一次性查看所有 html 并作为实际的 html 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:44:04.160

JSON以类似数组的方式返回东西（我也是新的，所以我不确定）所以你必须让所有的html成为数组中的一个对象。下面我将它设置为在关联数组中使用“html”进行引用。

在 php 页面上将这个改成`echo json_encode($return);`这个 `echo json_encode(array('html' => $return));`

在 ajax 页面上，您只需要稍微更改它。

代替：

```
var html = data[3];

                $('#output')
                    .append("<b>id: </b>"+html) 
```

和：

```
var html = data['html'];

            $('#content')
                .append(html) 
```

或者为了让它更整洁，你甚至不必为 html 创建一个变量，你可以直接从 JSON 数组中获取它：

```
 $('#content')
            .append(data['html']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:05:14.307

您不必为此使用 JSON；只需在 jQuery 中使用 .load() 即可将 HTML 片段直接加载到元素中。

```
$("#output").load("retrieve.php"); 
```

# python - 可点击的 Tkinter 标签

> ID：11504571
> 
> 赞同：12
> 
> 时间：2012-07-16T12:43:35.727
> 
> 标签：python, tkinter

我将使用代表 URL 的标签列表填充一个框架。url 将从列表中输入，数量可以在 3 到 5 之间，由用户决定。使这些 url 可点击的最简单方法是什么，以便用户可以访问显示的网站？有没有比使用标签更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-16T13:06:44.663

我认为标签很好。您只需要将回调绑定到鼠标单击。

```
def open_url(url):
    pass #Open the url in a browser

for i,url in enumerate(url_list):
    label=tk.Label(frame,text=url)
    label.grid(row=i)
    label.bind("<Button-1>",lambda e,url=url:open_url(url)) 
```

# php - foreach 循环使用 $_POST 数据并创建电子邮件通知

> ID：11504573
> 
> 赞同：0
> 
> 时间：2012-07-16T12:43:55.350
> 
> 标签：php

我正在尝试根据 tablesorter 表中所做的更改来更新 db 表。我通过 JS 发送信息，每个项目都发布到将处理更新的 php 页面。这工作正常。我现在需要让它发送一封电子邮件，其中显示买家姓名和处理的新日期，以便我们可以从中计算佣金。当我添加我的 foreach 循环时，我收到了 45 封单独的电子邮件，而不仅仅是一封。
我需要添加另一个 foreach 循环还是需要做其他事情？
这是php页面的代码：

```
 <?php
require_once ('../db.php');
$conn = db_connect();
session_start();

$buyer = $_POST['buyer'];
$isbn = $_POST['isbn'];
$sku = $_POST['sku'];
$cost = $_POST['cost'];
$csmt = $_POST['csmt'];
$hold = $_POST['hold'];
$today = date("Y-m-d");
$n=1;

foreach($sku as $value){ 
// update inventory table
$conn->query("update inventory set cost = $cost, csmt = $csmt, hold = $hold, date_process = $today where sku = $sku");

$holdList[$n] = array('buyer' => $buyer,
            'process date' => $today,
                );
$n++;
}
//loop trough hold list and store in csv format
$csvLists = to_csv($holdList);

function to_csv( $array ) {
 $csv = "";

 if (count($array) == 0) return "No Information found";

 ## Grab the first element to build the header
 $arr = array_pop( $array );
 $temp = array();
 foreach( $arr as $key => $data ) {
   $temp[] = $key;
 }
 $csv = implode( ',', $temp ) . "\r\n";

 ## Add the data from the first element
 $csv .= to_csv_line( $arr );

 ## Add the data for the rest
 foreach( $array as $arr ) {
   $csv .= to_csv_line( $arr );
 }

 return $csv;
}

function to_csv_line( $array ) {
 $temp = array();
 foreach( $array as $elt ) {
   $temp[] = '"' . addslashes( $elt ) . '"';
 }

 $string = implode( ',', $temp ) . "\r\n";

 return $string;
}

$conn->close();

$pricingReport = "The Latest Hold List has been completed. \n";
$pricingReport .= $csvLists;

//send email when pricing specs are done
$to = "jimd@bookcellaronline.com";

$subject = "Hold List";
$body = $pricingReport;
mail($to, $subject, $body);

?> 
```

更新：这是JS：

```
 // to save the changes to the hold table
$("#holdSave").live('click', function() {
$('#holdTable tbody tr').each(function()
        {
$.ajax({
    type: "POST",
    url: "holdSave.php",
    dataType: "json",
    data: ({buyer: $(this).find('#tableBuyer').html(), sku: $(this).find('#tableSku').html(), isbn: $(this).find('#tableISBN').html(),
           cost: $(this).find('#tableCost').val(), csmt: $(this).find('#tableConsignment').val(),
           hold: $(this).find('#tableHold').val()}),
    success: function(data) {

        } // end of success function

}); // end of ajax call
                    }); // end of holdtable tbody function
}); // end of holdSave event 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:33:38.543

为每条记录单独调用 ajax 函数，因此您会收到每条记录的邮件。

您可以做的是使用整个数据集创建一个 JSON 对象，然后调用 ajax 调用：

```
var arr={};
var cnt=0;
$('#holdTable tbody tr').each(function()
{
    arr[cnt]={buyer: $(this).find('#tableBuyer').html(), sku: $(this).find('#tableSku').html(), isbn: $(this).find('#tableISBN').html(),
       cost: $(this).find('#tableCost').val(), csmt: $(this).find('#tableConsignment').val(),
       hold: $(this).find('#tableHold').val()};
    cnt++;
} 
```

然后，在 ajax 调用中传递这个对象：

```
 $.ajax({
    type: "POST",
    url: "holdSave.php",
    dataType: "json",
    data: {data:arr},
    success: function(data) {

    } // end of success function
    }); 
```

在 php 方面，您可以解析每条记录的 $_POST['data'] 。

```
$data=$_POST['data']; 
```

的各个元素`$data`是您必须插入的记录。它们可以在一个简单的 for 循环中解析为`$data[$i]['buyer']`, `$data[$i]['sku']`...

# wcf - WCF 安全通信与传输和消息安全

> ID：11504575
> 
> 赞同：2
> 
> 时间：2012-07-16T12:43:59.713
> 
> 标签：wcf, security, certificate

我正在尝试了解 WCF 及其所有（复杂）安全选项。我在 localhost 上开发了一个带有 wsHttpBinding 的 Wcf Web 服务。我正在创建一个控制台应用程序，我将分发给几个客户端。每个客户都有自己的用户名和密码，我将根据自己的数据库进行验证。为此，我遵循了 codebetter.com 上的以下教程：http: [//codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-他们不告诉你的事情/](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)

*   我获得了自签名证书，并授予了权限
*   我得到了服务器和客户端的所有设置并在 localhost 到 localhost 上完美运行。

**问题一：**

我使用 VS2010 添加服务对话框添加了 svc 服务，并将以下标记添加到我的 app.config 中：

```
<certificate encodedValue="AwA<...>" /> 
```

出于学习目的，我更改了几次该值，但没有任何效果。它一直在完美地工作。我使用 Fiddler 来查看加密的通信。

**问题 2：使用 SSL 部署在测试服务器上**

我已经在配置了 IIS7.5 和 SSL 的测试服务器上部署了托管 WCF 服务的 Web 应用程序。当我尝试客户端应用程序连接到测试服务器时，它抛出了一个通用错误。我发现当我从 https:// 更改为 http:// 时，它起作用了。Fiddler 展示了带有加密值的良好 http 通信。

但我也想使用 HTTPS，以及我的消息级加密。我认为这是不可能的。我得到了一切工作，只需将安全模式设置为“TransportWithMessageCredential”就可以了。但是当我这样做时，我可以删除客户端上的所有证书信息，它仍然有效。因此，我可以得出结论，传输安全（某种）高于消息安全。

所以我得出正确的结论：

*   没有 https 传输安全性？使用证书（服务器上的 pfx，客户端上的证书）
*   有 https 传输安全性吗？不要使用证书，SSL 就足够了。

我希望我说清楚:)。提前谢谢了。

下面是一些（匿名的）配置：

**服务器**

```
<bindings>
  <wsHttpBinding>
    <!--The maximum size, in bytes, for a message that is processed by the binding-->
    <binding name="Binding1" maxReceivedMessageSize="4194304">
      <readerQuotas maxDepth="32" maxStringContentLength="10485760" maxArrayLength="10485760"
        maxBytesPerRead="10485760" maxNameTableCharCount="10485760" />
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName" negotiateServiceCredential="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="ApiWcfCustomBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="CustomUserNameValidator, SupplierAPI"/>
        <serviceCertificate findValue="xxxxApiv3" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

*** 客户 ***

```
var endPoint = new EndpointAddress(new Uri(apiUrl), EndpointIdentity.CreateDnsIdentity(endpointDnsEntity));

var binding = new WSHttpBinding();
//binding.Security.Mode = SecurityMode.TransportWithMessageCredential;
binding.Security.Mode = SecurityMode.Message;
binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
binding.Security.Message.NegotiateServiceCredential = false;

using (var client = new SupplierServiceClient(binding, endPoint))
{
    client.ClientCredentials.UserName.UserName = supplierUID;
    client.ClientCredentials.UserName.Password = supplierPassword;

    client.ClientCredentials.ServiceCertificate.SetDefaultCertificate(
         System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine,
         System.Security.Cryptography.X509Certificates.StoreName.My,
         System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName,
         endpointDnsEntity);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:48:19.533

我现在正在尝试做类似的事情（SSL、消息加密、用户名/密码身份验证），而且我也开始认为这是不可能的，至少在没有一些我不知道的黑客攻击的情况下是不可能的。如果我对[这篇文章的](https://stackoverflow.com/questions/4679235/wcf-service-certificates-and-message-security-with-username-authentication/4679924#4679924)理解正确，当您的客户端机器通过 SSL 直接连接到您的服务机器时，您将拥有一个点对点连接，这意味着它通过 SSL 得到保护，并且身份验证（用户名/密码值）由 WS- 保护安全。

在那篇文章中使用的一个有趣的类比是基于 SSL 的在线银行业务。由于客户端和服务器具有点对点连接，因此您将拥有一个安全通道。

这正是我发现的，所以如果有人认为它不正确，请告诉我。

# node.js - 用于基准测试的非 Websocket Socket.io 客户端

> ID：11504579
> 
> 赞同：0
> 
> 时间：2012-07-16T12:44:08.347
> 
> 标签：node.js, socket.io, benchmarking

在 Java 中有一堆 Socket.io 客户端实现（请参阅[Java socket.io 客户端](https://stackoverflow.com/questions/5783086)），它们似乎专门支持该`Websocket`协议。

用于对其他协议的服务器性能进行基准测试 - 我特别感兴趣，`htmlfile`因为它将被 IE 浏览器使用 < 10，除非我启用 Flash，我不确定我是否会这样做，因为[socket.io transport 'flashsocket ' 在 IE 8 上启动需要 5 秒](https://stackoverflow.com/questions/11423797)- 是否有任何可用的 Socket.io 客户端允许对服务器进行基准测试？

我不太关心它是什么操作系统或编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:37:15.143

有 [https://github.com/Gottox/socket.io-java-client](https://github.com/Gottox/socket.io-java-client)

除了`WebSocket`，它只有`XHR`，并且该功能目前被认为处于测试阶段：

> 状态：与 Websocket 连接已准备好生产。XHR 处于测试阶段。

轻量级测试`xhr polling`似乎支持它尚未准备好生产的说法。我有一堆断开连接而没有随后的重新连接。这是在一个 JVM 中同时测试数百个客户端实例的时候。由于服务器日志中有错误，我猜是客户端。

另一个猜测：由于连接断开如此频繁，并且服务器上的负载与 WebSockets 相比要高得多，我想知道这个客户端的“xhr 轮询”是否不做 HTTP Keepalive，这可以解释很多......在时间允许的情况下尽快检查。

使用`WebSocket`，我可以为每台 JVM 处理 1000 个实例（可能更多）和每台机器 5000 个实例（5 个 JVM x 1000 个实例）（也可能更多）而不会出现问题。

显然

> 编写自己的传输很容易

会检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:33:51.730

创建自己的也应该很容易

*   嗅探浏览器 <-> socket.io 会话（在 Windows 上，即[Fiddler](http://www.fiddler2.com/fiddler2/)）
*   [从官方 socket.io 测试之一](https://github.com/LearnBoost/socket.io/blob/master/test/transports.htmlfile.test.js)复制代码

# jquery - 如何为 jQuery 小部件实例创建唯一 ID？

> ID：11504583
> 
> 赞同：5
> 
> 时间：2012-07-16T12:44:17.327
> 
> 标签：jquery, widget, unique, instance

我正在创建一个基于 jQuery 小部件的富文本编辑器，它可以在一个页面上有多个实例。第一个实例应该生成一个像这样的工具栏：

```
<input type="checkbox" id="bold-1"><label for="bold-1">..
<input type="checkbox" id="italic-1"><label for="italic-1">..
... 
```

第二个实例应生成：

```
<input type="checkbox" id="bold-2"><label for ="bold-2">..
<input type="checkbox" id="italic-2"><label for ="italic-2">.. 
```

标签“for”属性需要唯一地引用其相应的输入“id”属性。因此我需要为每个实例添加一个唯一的 id。

像这样的东西可以工作，但我不喜欢在全局命名空间中存储一个计数器：

```
var textEditorCount;
$.widget("myEditor.textEditor", {
   _create: function () {
      textEditorCount = textEditorCount ? textEditorCount + 1 : 1;
      this.instanceID = textEditorCount;
   },
   ...
}; 
```

也许问题归结为：（如何）我可以在小部件的命名空间中存储变量吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:57:22.880

您可以使用闭包：

```
(function () {
  var textEditorCount;
  $.widget("myEditor.textEditor", {
     _create: function () {
        textEditorCount = textEditorCount ? textEditorCount + 1 : 1;
        this.instanceID = textEditorCount;
     },
     ...
  };
})(); 
```

`textEditorCount`将不再是全球性的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T11:19:25.493

从 jQuery UI 1.9 开始，每个小部件实例都有唯一的字段`this.uuid`和`this.eventNamespace`：

```
this.uuid = uuid++;
this.eventNamespace = "." + this.widgetName + this.uuid; 
```

[https://github.com/jquery/jquery-ui/blob/1.9.0/ui/jquery.ui.widget.js#L215](https://github.com/jquery/jquery-ui/blob/1.9.0/ui/jquery.ui.widget.js#L215)

字段`this.eventNamespace`适用于分配/清除唯一事件处理程序（[http://api.jquery.com/on/](http://api.jquery.com/on/) - 阅读“事件名称和命名空间”一章）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:42:12.903

全局变量（或在 NS 中）在我所做的每个实例中增加一个

# image - 三次到等角投影算法

> ID：11504584
> 
> 赞同：6
> 
> 时间：2012-07-16T12:44:23.580
> 
> 标签：image, algorithm, image-processing, graphics, geometry

我有一个定义周围环境的立方体贴图纹理，但是我需要将它传递给仅适用于纬度/经度图的程序。我真的迷失了如何进行翻译。这里有什么帮助吗？

换句话说，我需要来自这里：

![在此处输入图像描述](../Images/a104f39fd487cbcd8f0b4bef99d780e2.png)

为此（我认为该图像在 x 轴上具有额外的 -90° 旋转）：

![在此处输入图像描述](../Images/3c89ebc66c48e22290242bc8e97852dd.png)

**更新：**我得到了投影的正式名称。顺便说一下，我在[这里找到了相反的投影](http://os.ivrpa.org/panosalado/downloads)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T03:54:32.030

像这样投影光栅图像的一般过程是：

```
for each pixel of the destination image:
    calculate the corresponding unit vector in 3-dimensional space
    calculate the x,y coordinate for that vector in the source image
    sample the source image at that coordinate and assign the value to the destination pixel 
```

最后一步是简单的插值。我们将专注于其他两个步骤。

给定纬度和经度的单位向量是（+z 朝向北极，+x 朝向本初子午线）：

```
x = cos(lat)*cos(lon)
y = cos(lat)*sin(lon)
z = sin(lat) 
```

假设立方体在原点周围是 +/- 1 个单位（即 2x2x2 整体大小）。一旦我们有了单位向量，我们就可以通过查看具有最大绝对值的元素来找到它所在的立方体的面。例如，如果我们的单位向量是 <0.2099, -0.7289, 0.6516>，那么 y 元素的绝对值最大。它是负数，因此该点将在立方体的 -y 面上找到。通过除以 y 幅度来归一化其他两个坐标以获得该面内的位置。因此，该点将位于 -y 面上的 x=0.2879，z=0.8939。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-15T08:52:06.460

我想分享我对这种转换的 MATLAB 实现。我还借鉴了 OpenGL 4.1 规范第 3.8.10 章（[在此处找到](http://www.opengl.org/registry/doc/glspec41.core.20100725.pdf)）以及 Paul Bourke 的网站（[在此处找到](http://paulbourke.net/geometry/transformationprojection/)）。确保您查看了副标题：*在 6 个立方体环境贴图和一个球形贴图之间进行转换*。

我还使用了上面 Sambatyon 的帖子作为灵感。它最初是从 Python 到 MATLAB 的一个端口，但我编写了代码，使其完全矢量化（即没有`for`循环）。我还将立方体图像拆分为 6 个单独的图像，因为我正在构建的应用程序具有这种格式的立方体图像。代码也没有错误检查，并且假设所有立方体图像的大小相同（`n x n`）。这也假设图像是 RGB 格式。如果您想为单色图像执行此操作，只需注释掉那些需要访问多个通道的代码行。开始了！

```
function [out] = cubic2equi(top, bottom, left, right, front, back)

% Height and width of equirectangular image
height = size(top, 1);
width = 2*height;

% Flags to denote what side of the cube we are facing
% Z-axis is coming out towards you
% X-axis is going out to the right
% Y-axis is going upwards
% Assuming that the front of the cube is towards the
% negative X-axis
FACE_Z_POS = 1; % Left
FACE_Z_NEG = 2; % Right
FACE_Y_POS = 3; % Top
FACE_Y_NEG = 4; % Bottom
FACE_X_NEG = 5; % Front 
FACE_X_POS = 6; % Back

% Place in a cell array
stackedImages{FACE_Z_POS} = left;
stackedImages{FACE_Z_NEG} = right;
stackedImages{FACE_Y_POS} = top;
stackedImages{FACE_Y_NEG} = bottom;
stackedImages{FACE_X_NEG} = front;
stackedImages{FACE_X_POS} = back;

% Place in 3 3D matrices - Each matrix corresponds to a colour channel
imagesRed = uint8(zeros(height, height, 6));
imagesGreen = uint8(zeros(height, height, 6));
imagesBlue = uint8(zeros(height, height, 6));

% Place each channel into their corresponding matrices
for i = 1 : 6
    im = stackedImages{i};
    imagesRed(:,:,i) = im(:,:,1);
    imagesGreen(:,:,i) = im(:,:,2);
    imagesBlue(:,:,i) = im(:,:,3);
end

% For each co-ordinate in the normalized image...
[X, Y] = meshgrid(1:width, 1:height);

% Obtain the spherical co-ordinates
Y = 2*Y/height - 1;
X = 2*X/width - 1;
sphereTheta = X*pi;
spherePhi = (pi/2)*Y;

texX = cos(spherePhi).*cos(sphereTheta);
texY = sin(spherePhi);
texZ = cos(spherePhi).*sin(sphereTheta);

% Figure out which face we are facing for each co-ordinate
% First figure out the greatest absolute magnitude for each point
comp = cat(3, texX, texY, texZ);
[~,ind] = max(abs(comp), [], 3);
maxVal = zeros(size(ind));
% Copy those values - signs and all
maxVal(ind == 1) = texX(ind == 1);
maxVal(ind == 2) = texY(ind == 2);
maxVal(ind == 3) = texZ(ind == 3);

% Set each location in our equirectangular image, figure out which
% side we are facing
getFace = -1*ones(size(maxVal));

% Back
ind = abs(maxVal - texX) < 0.00001 & texX < 0;
getFace(ind) = FACE_X_POS;

% Front
ind = abs(maxVal - texX) < 0.00001 & texX >= 0;
getFace(ind) = FACE_X_NEG;

% Top
ind = abs(maxVal - texY) < 0.00001 & texY < 0;
getFace(ind) = FACE_Y_POS;

% Bottom
ind = abs(maxVal - texY) < 0.00001 & texY >= 0;
getFace(ind) = FACE_Y_NEG;

% Left
ind = abs(maxVal - texZ) < 0.00001 & texZ < 0;
getFace(ind) = FACE_Z_POS;

% Right
ind = abs(maxVal - texZ) < 0.00001 & texZ >= 0;
getFace(ind) = FACE_Z_NEG;

% Determine the co-ordinates along which image to sample
% based on which side we are facing
rawX = -1*ones(size(maxVal));
rawY = rawX;
rawZ = rawX;

% Back
ind = getFace == FACE_X_POS;
rawX(ind) = -texZ(ind);
rawY(ind) = texY(ind);
rawZ(ind) = texX(ind);

% Front
ind = getFace == FACE_X_NEG;
rawX(ind) = texZ(ind);
rawY(ind) = texY(ind);
rawZ(ind) = texX(ind);

% Top
ind = getFace == FACE_Y_POS;
rawX(ind) = texZ(ind);
rawY(ind) = texX(ind);
rawZ(ind) = texY(ind);

% Bottom
ind = getFace == FACE_Y_NEG;
rawX(ind) = texZ(ind);
rawY(ind) = -texX(ind);
rawZ(ind) = texY(ind);

% Left
ind = getFace == FACE_Z_POS;
rawX(ind) = texX(ind);
rawY(ind) = texY(ind);
rawZ(ind) = texZ(ind);

% Right
ind = getFace == FACE_Z_NEG;
rawX(ind) = -texX(ind);
rawY(ind) = texY(ind);
rawZ(ind) = texZ(ind);

% Concatenate all for later
rawCoords = cat(3, rawX, rawY, rawZ);

% Finally determine co-ordinates (normalized)
cubeCoordsX = ((rawCoords(:,:,1) ./ abs(rawCoords(:,:,3))) + 1) / 2;
cubeCoordsY = ((rawCoords(:,:,2) ./ abs(rawCoords(:,:,3))) + 1) / 2;
cubeCoords = cat(3, cubeCoordsX, cubeCoordsY);

% Now obtain where we need to sample the image
normalizedX = round(cubeCoords(:,:,1) * height);
normalizedY = round(cubeCoords(:,:,2) * height);

% Just in case.... cap between [1, height] to ensure
% no out of bounds behaviour
normalizedX(normalizedX < 1) = 1;
normalizedX(normalizedX > height) = height;
normalizedY(normalizedY < 1) = 1;
normalizedY(normalizedY > height) = height;

% Place into a stacked matrix
normalizedCoords = cat(3, normalizedX, normalizedY);

% Output image allocation
out = uint8(zeros([size(maxVal) 3]));

% Obtain column-major indices on where to sample from the
% input images
% getFace will contain which image we need to sample from
% based on the co-ordinates within the equirectangular image
ind = sub2ind([height height 6], normalizedCoords(:,:,2), ...
    normalizedCoords(:,:,1), getFace);

% Do this for each channel
out(:,:,1) = imagesRed(ind);
out(:,:,2) = imagesGreen(ind);
out(:,:,3) = imagesBlue(ind); 
```

我还通过 github 公开了代码，[你可以去这里查看](https://github.com/rayryeng/cubic2equi)。包括主要的转换脚本、显示其使用的测试脚本和从 Paul Bourke 网站提取的 6 个立方图像的样本集。我希望这是有用的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-05T16:12:17.920

项目更名为[libcube2cyl](https://github.com/madwyn/libcube2cyl)。同样的优点，C 和 C++ 中更好的工作示例。

* * *

现在也可以在 C 中使用。

* * *

我碰巧解决了与您描述的完全相同的问题。

[我编写了这个名为“ Cube2Cyl](http://www.wenyanan.com/cube2cyl/) ”的小型 C++ 库，您可以在此处找到算法的详细说明：[Cube2Cyl](http://www.wenyanan.com/cube2cyl/)

请从 github 找到源代码：[Cube2Cyl](https://github.com/madwyn/libcube2cyl)

它是在 MIT 许可下发布的，免费使用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T07:02:20.107

因此，我找到了一个解决方案，将[这篇](http://en.wikipedia.org/wiki/Spherical_coordinates#Cartesian_coordinates)关于 wikipedia 球坐标的文章和 OpenGL 4.1 规范中的第 3.8.10 节（加上一些使其工作的技巧）混合在一起。因此，假设立方体图像具有高度`h_o`和宽度`w_o`，则等角矩形将具有高度`h = w_o / 3`和宽度`w = 2 * h`。现在对于等角投影中的每个像素`(x, y) 0 <= x <= w, 0 <= y <= h`，我们想在三次投影中找到对应的像素，我在python中使用以下代码解决了它（希望我从C翻译时没有出错）

```
import math

# from wikipedia
def spherical_coordinates(x, y):
    return (math.pi*((y/h) - 0.5), 2*math.pi*x/(2*h), 1.0)

# from wikipedia
def texture_coordinates(theta, phi, rho):
    return (rho * math.sin(theta) * math.cos(phi),
            rho * math.sin(theta) * math.sin(phi),
            rho * math.cos(theta))

FACE_X_POS = 0
FACE_X_NEG = 1
FACE_Y_POS = 2
FACE_Y_NEG = 3
FACE_Z_POS = 4
FACE_Z_NEG = 5

# from opengl specification
def get_face(x, y, z):
    largest_magnitude = max(x, y, z)
    if largest_magnitude - abs(x) < 0.00001:
        return FACE_X_POS if x < 0 else FACE_X_NEG
    elif largest_magnitude - abs(y) < 0.00001:
        return FACE_Y_POS if y < 0 else FACE_Y_NEG
    elif largest_magnitude - abs(z) < 0.00001:
        return FACE_Z_POS if z < 0 else FACE_Z_NEG

# from opengl specification
def raw_face_coordinates(face, x, y, z):
    if face == FACE_X_POS:
        return (-z, -y, x)
    elif face == FACE_X_NEG:
        return (-z, y, -x)
    elif face == FACE_Y_POS:
        return (-x, -z, -y)
    elif face == FACE_Y_NEG:
        return (-x, z, -y)
    elif face == FACE_Z_POS:
        return (-x, y, -z)
    elif face == FACE_Z_NEG:
        return (-x, -y, z)

# computes the topmost leftmost coordinate of the face in the cube map
def face_origin_coordinates(face):
    if face == FACE_X_POS:
        return (2*h, h)
    elif face == FACE_X_NEG:
        return (0, 2*h)
    elif face == FACE_Y_POS:
        return (h, h)
    elif face == FACE_Y_NEG:
        return (h, 3*h)
    elif face == FACE_Z_POS:
        return (h, 0)
    elif face == FACE_Z_NEG:
        return (h, 2*h)

# from opengl specification
def raw_coordinates(xc, yc, ma):
    return ((xc/abs(ma) + 1) / 2, (yc/abs(ma) + 1) / 2)

def normalized_coordinates(face, x, y):
    face_coords = face_origin_coordinates(face)
    normalized_x = int(math.floor(x * h + 0.5))
    normalized_y = int(math.floor(y * h + 0.5))
    # eliminates black pixels
    if normalized_x == h:
      --normalized_x
    if normalized_y == h:
      --normalized_y
    return (face_coords[0] + normalized_x, face_coords[1] + normalized_y)

def find_corresponding_pixel(x, y):
    spherical = spherical_coordinates(x, y)
    texture_coords = texture_coordinates(spherical[0], spherical[1], spherical[2])
    face = get_face(texture_coords[0], texture_coords[1], texture_coords[2])

    raw_face_coords = raw_face_coordinates(face, texture_coords[0], texture_coords[1], texture_coords[2])
    cube_coords = raw_coordinates(raw_face_coords[0], raw_face_coords[1], raw_face_coords[2])
    # this fixes some faces being rotated 90°
    if face in [FACE_X_NEG, FACE_X_POS]:
      cube_coords = (cube_coords[1], cube_coords[0])
    return normalized_coordinates(face, cube_coords[0], cube_coords[1]) 
```

最后，我们只调用`find_corresponding_pixel`equirectangular 投影中的每个像素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T02:46:03.373

我认为根据您在 Python 中的算法，您可能在计算 theta 和 phi 时反转了 x 和 y。

```
def spherical_coordinates(x, y):
    return (math.pi*((y/h) - 0.5), 2*math.pi*x/(2*h), 1.0) 
```

来自 Paul Bourke 的[网站](http://paulbourke.net/geometry/transformationprojection/)

> theta = x pi phi = y pi / 2

在您的代码中，您在 theta 计算中使用 y ，在 phi 计算中使用 x 。

如果我错了，请纠正我。

# php - 性能：file_get_contents()、相对和绝对 URL

> ID：11504588
> 
> 赞同：4
> 
> 时间：2012-07-16T12:44:32.680
> 
> 标签：php

如果我使用相对路径作为参数，是否有任何性能优势`file_get_contents()`？

`file_get_contents("../../mypage.php");`

**v/s**

`file_get_contents("http://.../mypage.php");`

内部如何`file_get_contents()`处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:53:49.843

使用本地文件和远程文件肯定会有明显的性能差异——即使“远程”文件在您的本地服务器上。

当您使用诸如 的本地/相对文件时`file_get_contents("../../mypage.php");`，它会直接加载到服务器上，无需使用网络流量。对于远程负载，例如`file_get_contents("http://localhost/mypage.php");`或`file_get_contents("http://example.org/mypage.php");`，建立到远程主机的连接（即使是“本地”）。此外，本地读取将导致函数准确返回文件中的内容；远程读取将导致远程主机在返回之前呈现内容（如果是 PHP）。

默认情况下，本地/相对文件的性能会比远程文件快。尝试从连接速度较慢的网络加载远程文件时，可以看到最大的显着性能优势。

的内部实现`file_get_contents()`类似于您编写`fopen()`一个循环 for `fread()`，然后用`fclose()`. 然后，它返回文件中所有内容的字符串。基本上，它提供了一个更友好的“从文件中读取”界面。

要阅读有关该方法的更多信息，您可以查看[php.net/manual/en/function.file-get-contents.php上的手册](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T12:51:14.753

如果有性能优势，它不依赖于php引擎。路径由您查询的 Web 服务器处理。

但是在这种情况下，在第一种情况下会有性能优势，因为您从本地 fs 获取文件，而在第二种情况下，您必须通过整个网络堆栈（http/tcp/ip）才能获得响应. 同样，第一种情况将返回 php 源代码，第二种情况 - 由 php 引擎处理的网页。

一个更清晰的例子：

```
file_get_contents('../../somefile.ext'); 
```

和

```
file_get_contents('/home/user/somefile.ext'); 
```

将同样快。

# ios - NSCondition - 多线程

> ID：11504591
> 
> 赞同：3
> 
> 时间：2012-07-16T12:44:45.070
> 
> 标签：ios, multithreading, thread-safety, semaphore, nscondition

我知道以下是您应该如何使用 NSCondition：

方法一：

```
[cocoaCondition lock];
while (someConditionIsTrue)
    [cocoaCondition wait];

// Do real work here.

[cocoaCondition unlock]; 
```

方法二：

```
[cocoaCondition lock];
timeToDoWork++;
someConditionIsTrue = NO;
[cocoaCondition signal];
[cocoaCondition unlock]; 
```

我想要的只是使用一个可以从不同线程锁定和解锁的简单锁，所以我知道我需要为此使用 NSCondition ，并且苹果文档说即使你不检查条件也需要格外小心不要在逻辑上使用它（来自苹果文档：“为了避免这些虚假信号引起的问题，您应该始终将谓词与条件锁结合使用”）。

方法之间存在依赖关系，但它是双向的，这意味着在另一个方法释放锁之前，没有人可以完成他们的工作（这可能会在从锁定它的方法）。

1.  是否可以等待两种方法的条件并在两种方法结束时发出信号？

2.  如果我有 3 个 method1 线程同时等待，它们将以什么顺序进入工作主体？我想这是他们进入等待的顺序，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-13T04:52:09.480

首先，您的代码在此处的另一篇文章之后运行良好[NSCondition 是如何工作的？](https://stackoverflow.com/questions/8611994/how-does-the-nscondition-work).

二、不要打电话

```
 //[cocoaCondition wait]; 
```

这可能是您想要的，或者只使用 NSXXLock。

# python - 从列表中仅获取所需的字符串

> ID：11504593
> 
> 赞同：3
> 
> 时间：2012-07-16T12:44:47.800
> 
> 标签：python, string, list

假设我有如下列表

```
list_fields = ['Full-Time',
 'Options:',
 'Express your interest',
 'Email this to a friend',
 'More information about this job:',
 'Overview:',
 'A',
 'Parasite',
 'position is cool',
 'Are you a LEADER?',
 'For sure there',
 'Hello doing?',
 'If so you will EXCEL.',
 'Bring your skills',
 'programs and procedures'] 
```

我想做的是收集所有字符串之后`overview`，我的意思是需要忽略字符串之前的`overview`字符串。之前和之后可能有很多字符串`overview`，但是只想在`overview`列表之后收集所有字符串，并希望通过使用类似对不起的东西将它们作为单个字符串，`''.join([list_fields])` 如果我一次又一次地使用单词，谁能告诉我如何做这个

```
Edited Code: 
```

1.  我们只能从“概述：”之后到“带上你的技能”之前获取吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:47:25.523

如果你知道字符串是乱写的`"Overview:"`，你可以这样做

```
''.join(list_fields[list_fields.index("Overview:") + 1:]) 
```

这用于`list.index()`确定`"Overview:"`列表中的索引，并使用切片来获取从 之后的索引开始的子列表`"Overview:"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:48:08.077

```
import itertools as it

list(it.dropwhile(lambda x: not x.lower().startswith('overview'), list_fields))[1:] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T12:47:53.117

```
a = [1,2,3,4,5,6,7,8]
a[a.index(4):]

>> [4, 5, 6, 7, 8] 
```

所以在你的情况下，你可以这样做：

```
"".join(list_fields[list_fields.index("Overview:"):]) 
```

要回答评论中的问题：

```
def my_slice(l,a,b):
    try:
        a_idx = l.index(a)
        b_idx = l.index(b)

    except ValueError:
        return []

    if a_idx > b_idx:
        a_idx, b_idx = b_idx, a_idx
    return l[a_idx:b_idx+1]

my_slice(list_fields,'Overview:','Bring your skills') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T12:49:15.380

切片应该与索引一起使用。如果未找到，这不会处理错误。

```
lstResults = list_fields[list_fields.index('overview'):] 
```

# c# - 时间：2019-05-10 标签：c#datagridview将前几行留空

> ID：11504594
> 
> 赞同：1
> 
> 时间：2012-07-16T12:44:53.597
> 
> 标签：c#, winforms, datagridview, rows, cells

我目前正在尝试将信息输入到数据网格视图中，但是当我尝试这样做时，如果用户选择了一个单元格，则该单元格之后将没有值，我使用 refreshedit(); 修复了这个问题。在循环结束时，但这意味着最后只有最后一行被写入

这是目前的代码

```
 foreach ( Contact c in currentBook.Contacts )
        {

            ContactsList.RowCount = i + 1;
            ContactsList.Rows[ i ].Cells[ 1 ].Value = c.FirstName;
            ContactsList.Rows[ i ].Cells[ 2 ].Value = c.Surname;
            ContactsList.Rows[ i ].Cells[ 3 ].Value = c.Address;
            ContactsList.Rows[ i ].Cells[ 4 ].Value = c.Town;
            ContactsList.Rows[ i ].Cells[ 5 ].Value = c.County;
            ContactsList.Rows[ i ].Cells[ 6 ].Value = c.Postcode;
            ContactsList.Rows[ i ].Cells[ 7 ].Value = c.PhoneNum;
            ContactsList.Rows[ i ].Cells[ 8 ].Value = c.Email;
            i++;

        } 
```

此代码出现异常：操作未成功，因为程序无法提交或退出单元格值更改。

所以我添加了一个

```
ContactsList.RefreshEdit(); 
```

在增加 i 之后，这意味着只显示最后一行

我会很感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:50:20.033

亚历克斯，您使用的是**未绑定的 DataGridView**，正如我从您的代码中看到的那样，我能够重现该问题并解决它：

![数据网格视图示例](../Images/391d81785b218a9fc001f6fe52e41183.png)

此示例中的 DataGridView 已经有三列，通过 Visual Studio 设计器添加（右键单击 DataGridView 的三角形，随后添加 3 列，如上面的屏幕截图所示）。这是下面示例的先决条件。

看一下这段代码（我去掉了一些地址字段以使其更短，并命名 DataGridView 以`dgvContactsList`将其与列表区分开来`contactsList`）：

> ```
>  private void RefreshDgvContacts()
>     {
>         if (contactsList.Count > dgvContactsList.Rows.Count)
>             dgvContactsList.Rows.Add(
>                 contactsList.Count - dgvContactsList.Rows.Count
>             );
>         int i = 0;
>         foreach (Contact c in contactsList)
>         {
>             dgvContactsList.Rows[i].Cells[0].Value = c.Firstname;
>             dgvContactsList.Rows[i].Cells[1].Value = c.Surname;
>             dgvContactsList.Rows[i].Cells[2].Value = c.Address;
>             i++;
>         }
>     } 
> ```

在以下事件中调用此方法：

> ```
>  private void btnRefresh_Click(object sender, EventArgs e)
>     {
>         RefreshDgvContacts();
>     } 
> ```

```
 private void Form1_Load(object sender, EventArgs e)
    {
        RefreshDgvContacts();
    } 
```

请注意，在我的示例中，contactList 定义如下（它在包含 DataGridView 的表单类中声明）：

> ```
>  public List<Contact> contactsList = new List<Contact>()
>     {   new Contact() {Firstname="Mark", Surname="Hamill", 
>                        Address="Hollywood"},
>         new Contact() {Firstname="Harrison", Surname="Ford", 
>                        Address="Hollywood"}
>     }; 
> ```

```
public class Contact
{
    [DataObjectField(false)]
    public string Firstname { get; set; }

    [DataObjectField(false)]
    public string Surname { get; set; }

    [DataObjectField(false)]
    public string Address { get; set; }
} 
```

该示例中重要的是在更改值**之前根据需要创建所有行。**请注意，您可以`RefreshDgvContact`多次调用该方法（例如，从刷新按钮）并且它仍然有效，因为只有在行不存在时才会添加行。

同样重要的是，如果您正在填充此处所示的 DataGridView，则它不能同时绑定到数据源。如果您打算绑定数据源，请查看 David 已经发布的另一个示例。

但是，我认为拥有这两个示例很重要，因为有时不绑定数据源很有用，有时绑定的数据源更方便。

* * *

对于那些**想要重现问题的**人，您可以通过以下方法替换工作方法`RefreshDgvContacts`（不要忘记更改事件）：`Form1_Load()``btnRefresh_Click()`

> ```
>  private void RefreshDgvContacts_WithIssue()
>     {   // this sample leaves the 1st row blank called in Form1_Load
>         // 2nd and subsequent calls, e.g. from the Refresh button don't show
>         // the issue.
>         int i = 0;
>         foreach (Contact c in contactsList)
>         {
>             if (i >= dgvContactsList.Rows.Count)
>                 dgvContactsList.Rows.Add();
>             dgvContactsList.Rows[i].Cells[0].Value = c.Firstname;
>             dgvContactsList.Rows[i].Cells[1].Value = c.Surname;
>             dgvContactsList.Rows[i].Cells[2].Value = c.Address;
>             i++;
>         }
>     } 
> ```

令人惊讶的是， 的位置`dgvContactsList.Rows.Add()`很重要，不是吗？使用此代码，表单加载如下：

![显示问题的示例](../Images/fc1d48498d3aa95953c31ae32c5c22e0.png)

**请注意**，即使使用方法单击**刷新按钮**`RefreshDgvContacts_WithIssue()`也可以正常工作。

但是现在我们知道我们最好使用第一个示例，即`RefreshDgvContacts()`加载DataGridView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:37:10.320

将数据放入 a 的最简单方法`DataGridView`是使用 DataSource，然后将数据添加到该 DataSource。

确切的细节很大程度上取决于您要做什么 - 有很多不同的方法，但下面是一个使用 a`BindingSource`作为网格数据源的简单示例。

```
BindingSource bs = new BindingSource();  

public Form1()
{
    InitializeComponent();

    dataGridView1.DataSource = bs; 
} 
```

然后，当您要添加新联系人时：

```
foreach (Contact c in currentBook.Contacts)
{
    bs.Add(c);
} 
```

您通常应该能够将 currentBook.Contacts 作为 DataSource 直接绑定到网格，但尚不清楚这是否适用于您的情况。

阅读数据绑定和 DataGridView 以获取更多信息。这篇 MSDN 文章是一个很好的起点：[DataGridView 控件概述](http://msdn.microsoft.com/en-us/library/k39d6s23.aspx)

# javascript - 什么是javascript中的正则表达式

> ID：11504597
> 
> 赞同：3
> 
> 时间：2012-07-16T12:45:04.320
> 
> 标签：javascript, regex

我有以下字符串

> sssHi 这是正则表达式的测试,sr,Hi 这是正则表达式的测试

我只想更换

> 嗨，这是正则表达式的测试

与其他字符串分段。

不应替换字符串“sss **Hi 这是正则表达式的测试**”中的第一段

我为相同的内容编写了以下正则表达式：

```
/([^.]Hi\sthis\sis\sthe\stest\sfor\sregular\sExpression)|(Hi\sthis\sis\sthe\stest\sfor\sregular\sExpression)$/ 
```

但它匹配两个部分。我只想匹配第二个，因为第一个段以“sss”为前缀。

```
[^.] 
```

除了换行符之外什么都不匹配吗？所以组

```
 "([^.]anystring)" 
```

应该只匹配除换行符之外没有任何字符前面的“anystring”。我对么？

有什么想法吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:40:02.627

匹配一个前面*没有另一个字符串的字符串是一种*[否定](http://www.regular-expressions.info/lookaround.html#lookbehind)的后向查找，并且 JavaScript 的正则表达式引擎不支持。但是，您可以使用回调来完成。

给定

```
str = "sssHi this is the test for regular Expression,sr,Hi this is the test for regular Expression" 
```

使用回调检查前面的字符`str`：

```
str.replace(/(.)Hi this is the test for regular Expression$/g, function($0,$1){ return $1 == "s" ? $0 : $1 + "replacement"; })
// => "sssHi this is the test for regular Expression,sr,replacement" 
```

正则表达式匹配两个字符串，因此回调函数被调用两次：

1.  和
    *   `$0 = "sHi this is the test for regular Expression"`
    *   `$1 = "s"`
2.  和
    *   `$0 = ",Hi this is the test for regular Expression"`
    *   `$1 = ","`

如果`$1 == "s"`匹配替换为`$0`，则保持不变，否则替换为`$1 + "replacement"`。

另一种方法是匹配第二个字符串，即要替换的字符串，包括分隔符。

`str`以逗号开头的匹配：

```
str.replace(/,Hi this is the test for regular Expression/g, ",replacement")
// => "sssHi this is the test for regular Expression,sr,replacement" 
```

要匹配`str`前面有任何非单词字符：

```
str.replace(/(\W)Hi this is the test for regular Expression/g, "$1replacement")
// => "sssHi this is the test for regular Expression,sr,replacement" 
```

`str`在行尾匹配：

```
str.replace(/Hi this is the test for regular Expression$/g, "replacement")
// => "sssHi this is the test for regular Expression,sr,replacement" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:35:12.543

采用

```
str.replace(/(.*)Hi this is the test for regular Expression/,"$1yourstring") 
```

. *****是贪心的，因此匹配最长的字符串，剩下的留给你想要匹配的显式字符串。

# selenium - 如何在重定向之前获取页面源？

> ID：11504598
> 
> 赞同：2
> 
> 时间：2012-07-16T12:45:11.107
> 
> 标签：selenium

如何在重定向之前获取页面源（或元素）？

```
self.browser.get(url)
element = self.browser.find_element_by_name(name) 
```

# java - 通用接口导致 javax.el.PropertyNotFoundException

> ID：11504603
> 
> 赞同：2
> 
> 时间：2012-07-16T12:45:27.673
> 
> 标签：java, tomcat, jsf-2, mojarra

我正在努力解决某些（环境）星座中发生的一些错误。
- 如果我在 WinXP 上的 Eclipse-Webtools 中的 Tomcat 上运行我的应用程序，它就可以工作。
- 在 WinXP 或 Linux 上的 Tomcat 中运行它会发生错误
- 在 HPUX 下运行它可以工作。
- 如果我删除通用部分，它也适用于任何地方。

**错误：**

```
Caused by: javax.el.PropertyNotFoundException: /some.xhtml @3,67 value="#{someBean.someDto.id}": Property 'id' not writable on type java.lang.Object 
```

**造成麻烦的对象：**

```
public class SomeDto implements SelectableItem<Long>, Serializable {

  private Long id;

  @Override
  public Long getId() {
    return id;
  }

  @Override
  public void setId(final Long id) {
    this.id = id;
  }
  ...
} 
```

**通用接口：**

```
public interface SelectableItem<T> {
  public T getId();

  public void setId(T id);
  ...
} 
```

任何提示我在这里缺少什么？

强尼

# wordpress - 如何仅在帖子中显示标题而在 WordPress 中根本不显示摘录？

> ID：11504607
> 
> 赞同：0
> 
> 时间：2012-07-16T12:45:50.833
> 
> 标签：wordpress

如何仅在帖子中显示标题而在 wordpress 中根本不显示摘录？我想完全删除所有帖子的摘录？有这个插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:56:35.193

从`<?php the_excerpt(); ?>`博客或存档页面的循环中删除。

# java - JFrame 调整为可见组件的大小

> ID：11504609
> 
> 赞同：3
> 
> 时间：2012-07-16T12:46:01.153
> 
> 标签：java, swing, jframe

我有一个应用程序，我希望用户能够在普通设置和高级设置之间进行选择。现在，如果用户检查 JCheckBox 并且高级设置应该消失，问题就开始了。我的想法是将所有不必要的摇摆组件（JScrollPane、JLabel ...）设置为不可见，然后找到一种 JFrame 方法，该方法使窗口适合 VISIBLE 组件。我的问题是是否有这样的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:56:10.780

> ...然后找到适合可见组件的窗口的 JFrame 方法。我的问题是是否有这样的方法？

是的，有这样一种方法，叫做`pack()`.

这将通过顶层窗口持有的所有容器的布局管理器级联，要求它们重新布局其可见组件，根据组件和布局管理器要求将组件调整为首选大小，并最终调整大小适合容器及其组件的顶级窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T12:56:31.617

**1.**您可以使用 `setVisible(boolean b)`, 使组件可见和不可见。

**2.**您可以检查该组件是否可见或未使用`isVisible()`

**3.**然后可以使用 pack() 方法，**pack() 方法根据需要设置帧大小**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T00:34:38.590

我认为您可以将高级内容包装在一个面板中（如果可能）并使用`this.remove(component)`然后使用从框架中删除该面板`this.pack()`
，您可以在显示它们时执行相反的操作，`this.add(...)`然后`this.pack()`再一次

# wpf - 是否可以对 DatePicker 的输入字段使用 MaxLength 之类的东西？

> ID：11504610
> 
> 赞同：0
> 
> 时间：2012-07-16T12:46:05.803
> 
> 标签：wpf, datepicker

是否可以对 WPF DatePicker 的输入字段使用 MaxLength 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:43:08.053

```
<DatePicker.Resources>
    <Style TargetType="{x:Type DatePickerTextBox}">
       <Setter Property="MaxLength" Value="10" />
    </Style>
</DatePicker.Resources> 
```

# asp.net-mvc - 为所有客户端创建相同的 SignalR Hub

> ID：11504611
> 
> 赞同：13
> 
> 时间：2012-07-16T12:46:14.973
> 
> 标签：asp.net-mvc, signalr, signalr-hub

我刚刚开始测试 SignalR 以监控应用程序。我有一个控件，它由客户端调用集线器。我注意到，每次客户端创建 Connection.Hub.Start() 它都会在服务器中创建一个新的 Hub 实例，我需要一直刷新我的控件，所以我不希望它为每个创建新的 Hub。

有没有办法为所有客户创建单个集线器，或者我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T15:56:53.603

为每个请求创建一个 Hub 实例，就像在 WebForms 中为每个请求创建一个 ASP.NET Page 实例一样，在 ASP.NET MVC 中为每个请求创建一个控制器，或者在使用时为每个服务请求创建一个 WCF 服务实例InstanceMode.PerCall。

如果您想在 Hub 请求/实例之间维护共享状态，您将需要使用静态字段或其他更高级的状态共享形式（例如依赖注入单例）。

# javascript - 删除所有与内联字体相关的标签，即使它在内联样式中

> ID：11504617
> 
> 赞同：2
> 
> 时间：2012-07-16T12:46:35.807
> 
> 标签：javascript, html, dom

我有一个 DOM，在这个 DOM 中，我加载了整个网页的 HTML。我想删除所有与字体相关的标签，即使它在样式标签内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:26:59.217

这是一个纯 Javascript 函数，它将任何一组指定的标记转换为`<span>`：

```
function stripFonts(el, tags) {
    if (el.tagName && el.tagName in tags) {

        // replace the element with a span
        var old = el, el = document.createElement('span');
        old.parentNode.replaceChild(el, old);

        // and move the children
        while (old.hasChildNodes()) {
            el.appendChild(old.firstChild);
        }
    }

    // recursive test all of this node's children
    var child = el.firstChild;
    while (child) {
        child.removeAttribute('style');  // NB: removes *all* style attributes
        stripFonts(child, tags);
        child = child.nextSibling;
    }
}

var tags = { 'B': 1, 'FONT': 1, 'STRIKE': 1 }; 
```

演示[http://jsfiddle.net/alnitak/4fBRQ/](http://jsfiddle.net/alnitak/4fBRQ/)

使用 a`<span>`简化了代码，因为它维护了原始的 DOM 树，并且避免了将相邻的文本节点折叠在一起的需要。

添加要剥离的额外标签是微不足道的。处理字体特定的内联样式标签需要*一些额外的工作，尽管删除**每个* `style`属性很容易，如此处所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:26:39.323

```
 $("font").attr("face", "");
    $("*").css("font", ""); 
```

您可以使用jQuery清除字体元素的事实属性并清除DOM中的所有css字体feom

# php - 没有重复字符的Mysql正则表达式搜索

> ID：11504621
> 
> 赞同：6
> 
> 时间：2012-07-16T12:47:06.520
> 
> 标签：php, mysql, regex

我有一个包含字典中单词的数据库表。

现在我想为字谜选择单词。例如，如果我给出字符串`SEPIAN`，它应该获取诸如`apes`, `pain`, `pains`, `pies`, `pines`, `sepia`, 等的值。

为此，我使用了查询

```
SELECT * FROM words WHERE word REGEXP '^[SEPIAN]{1,6}$' 
```

但是此查询返回的单词如`anna`，`essen`其重复字符不在提供的字符串中。例如。`anna`有两个，但搜索字符串`n`中只有一个。`n``SEPIAN`

我怎样才能编写我的正则表达式来实现这一点？此外，如果当时我的搜索字符串中有重复字符，则重复字符应反映在结果中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:20:25.847

由于 MySQL 不支持反向引用捕获组，典型的解决方案是`(\w).*\1`行不通的。这意味着给出的任何解决方案都需要枚举所有可能的双精度数。此外，据我所知，反向引用在前瞻或后视中无效，并且 MySQL 不支持前瞻和后视。

但是，您可以将其拆分为两个表达式，并使用以下查询：

```
SELECT * FROM words
WHERE word REGEXP '^[SEPIAN]{1,6}$'
AND NOT word REGEXP 'S.*?S|E.*?E|P.*?P|I.*?I|A.*?A|N.*?N' 
```

不是很漂亮，但它可以工作，而且应该也相当有效。

* * *

要支持一组重复字符的限制，请为您的辅助表达式使用以下模式：

```
A(.*?A){X,} 
```

`A`你的角色在哪里，`X`是允许的次数。

因此，如果您在`N`字符串中添加另一个`SEPIANN`（总共 2`N`秒），您的查询将变为：

```
SELECT * FROM words
WHERE word REGEXP '^[SEPIAN]{1,7}$'
AND NOT word REGEXP 'S.*?S|E.*?E|P.*?P|I.*?I|A.*?A|N(.*?N){2}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:02:51.820

我想这样的事情会帮助你。表`words`：

```
| id    | word      | alfagram  |
---------------------------------
| 1     | karabar   | aaabkrr   |
| 2     | malabar   | aaablmr   |
| 3     | trantantan| aaannnrttt| 
```

`alfagram`这是按字母顺序排列的单词的字母。

PHP代码：

```
$searchString = 'abrakadabra';
$searchStringAlfa = array();
for( $i=0,$c=strlen($searchString);$i<$c;$i++ ){
    if( isset($searchStringAlfa[$searchString[$i]]) ){
        $searchStringAlfa[$searchString[$i]]++;
    }else{
        $searchStringAlfa[$searchString[$i]] = 1;
    }
}
ksort($searchStringAlfa);
$regexp = '^';
foreach( $searchStringAlfa as $alfa=>$amount ){
    $regexp .= '['.$alfa.']{0,'.$amount.'}';
}
$regexp .= '$'; 
```

`$searchString`是您要搜索的字符串。那么你唯一应该做的就是执行查询：

```
$result = mysql_query('SELECT * FROM words WHERE alfagram REGEXP "'.$regexp.'"'); 
```

可能需要一些额外的检查和优化

# asp.net - 如何在弹出窗口显示之前验证锚标记？

> ID：11504624
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:21.653
> 
> 标签：asp.net, thickbox

我有一个带有一个图像标签的锚标签，我正在根据按钮单击动态更改锚标签内的图像。button1 设置 Red.png 图像， button2 设置 Green.png 图像。我想验证锚标记内的哪个图像，如果它是 Green.png，我需要显示厚框，如果它是 Red.png，则不应执行任何操作。我怎么能这样做？

//我的aspx代码-带有图像标签的锚标签

```
<a onclick="validate();" href="PopUpPage.aspx?KeepThis=true&TB_iframe=true&height=150&width=400"
      class="thickbox" id="AnchorImage" >
<img id="ColorImageButton" src="SiteImages/Red.png" runat="server" />
</a> 
```

//两个按钮-按钮1设置红色图像，按钮2设置绿色图像

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
<asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Button" />

    protected void Button1_Click(object sender, EventArgs e)
    {
        ColorImageButton.Src = "~/SiteImages/Red.png";
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        ColorImageButton.Src = "~/SiteImages/Green.png";
    } 
```

更新：根据答案，我添加了一个 JavaScript 来删除链接，但我仍然有厚框的黑屏背景

```
function validate() {

    if (document.getElementById('<%=ColorImageButton.ClientID%>').src.indexOf('Red.png') >= 0) {
                         document.getElementById('AnchorImage').removeAttribute('href');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:17:48.570

使用 Javascript，您可以执行以下操作：

1.  将 onclick 处理程序附加到锚点，如下所示：

    ```
    <a onclick="validate();" href="PopUpPage.aspx?KeepThis=true&TB_iframe=true&height=150&width=400"
      class="thickbox" id="AnchorImage"  >
    <img id="ColorImageButton" src="SiteImages/Red.png" runat="server" />
    </a> 
    ```

2.  定义`validate`函数：

    ```
    ​function validate()
    {
       //If image is red; change the href value to a hash sign
       //so it doesn't do anything
       if(document.getElementById('<%=ColorImageButton.ClientID%>').src.indexOf('Red.png')>=0)
       {
          document.getElementById('AnchorImage').href='#';
       }
    }​ 
    ```

# asp.net - 为什么 CssClass 不能正常上课？

> ID：11504626
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:24.273
> 
> 标签：asp.net, css

在我的 CSS 文件中，我有：

```
.Center
{
    position:relative;
    width:800px;
    margin-left: auto;
    margin-right: auto;
} 
```

然后，当我有以下一切时：

```
<div class="Center">
    <asp:ImageButton ID="ImageButton1" ImageUrl="..." runat="server" />
</div> 
```

但是如果我删除`div`并添加一个`CssClass`- 它会忽略该类：

```
<asp:ImageButton ID="ImageButton1" ImageUrl="..." runat="server" CssClass="Center" /> 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:55:41.293

因为 an`asp:ImageButton`呈现为`<input type="image" ... />`. 您的第一个示例有一个`<div>`包装图像按钮，并且样式应用于`<div>`. 您的第二个示例是尝试`<input type="image" ... />`直接设置样式（这不起作用，因为它不是块元素）。

您可以将 a `<asp:Panel>`（呈现为 a `<div>`）用于等效代码：

```
<asp:Panel runat="server" CssClass="Center">
     <asp:ImageButton ID="ImageButton1" ImageUrl="..." runat="server" />
</asp:Panel> 
```

或者，更改您的 CSS 以使用`<input type="image">`- 我认为这就像添加一样简单`display: block`，并且其他属性的工作方式与包含相同`<div>`。

# c - typeof() 表达式中的副作用

> ID：11504629
> 
> 赞同：8
> 
> 时间：2012-07-16T12:47:29.840
> 
> 标签：c, gcc

在 GNUC C 中，您可以使用`typeof(expression)`，并且在内部使用带有副作用的表达式是合法的。因此，例如，您可以使用以下 C 代码：

```
int x = 0;
typeof(x++) y; 
```

在这种情况下，副作用被忽略，之后 x 仍然为零（这是有道理的，因为类型是仅编译时的东西）。

但是，[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)说：

> 当且仅当 typeof 的操作数是可变修改类型的表达式或此类类型的名称时，才评估其副作用。

这句话是什么意思？真的有可能写`typeof`一个副作用并让副作用在运行时实际执行吗？对我来说，这句话似乎表明了这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T12:47:29.840

`typeof`是的，在某些情况下，可能会在内部评估副作用。正如文档所说，它需要在“可变修改类型”内。这是一种依赖于一些运行时值的类型，例如`int[x]`.

所以下面的代码是合法的，将 y 声明为 type `int[1]`，然后 x 的值为 1：

```
int x = 0;
typeof(int[++x]) y; 
```

当然，对于一般的可变修改类型，这仅对局部变量声明（函数内部）是合法的。

# jquery - 阿贾克斯成功响应

> ID：11504631
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:32.730
> 
> 标签：jquery, ajax

我有以下工作正常的代码：

```
success: function (upd_rsp){
  //if email is not register
  if(upd_rsp == "email_no"){
  exstInfo.text("This E-mail is not registered in our Database!");
  exstInfo.addClass("error");
  return false;
  }

  //if email & pass don't match
  if(upd_rsp == "email_pass_no"){
  matchInfo.text("Email and Password don't match!");
  matchInfo.addClass("error");
  return false;
  } 
```

现在，如果我在这两个“if”之间放置一个“else”语句（如下），则第二个“if”不会被执行。我哪里错了？

```
 else{
   exstInfo.text("");
   exstInfo.removeClass("error");
   return true;
   } 
```

解决方案工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:52:47.720

如果您`return`在第二个执行之前设置了一个值`if`，则脚本将在`return`发送后停止。

这是您可以做到的众多方法之一：

```
success: function (upd_rsp){
  //if email is not register
  var email_error = false;
  var pass_error = false;
  if(upd_rsp == "email_no"){
    exstInfo.text("This E-mail is not registered in our Database!");
    exstInfo.addClass("error");
    email_error = true;
  } else {
    exstInfo.text("");
    exstInfo.removeClass("error");
    email_error = false;
  }

  //if email & pass don't match
  if(upd_rsp == "email_pass_no"){
    matchInfo.text("Email and Password don't match!");
    matchInfo.addClass("error");
    pass_error = true;
  } else {
    ....
    pass_error = false;
  }

  if(email_error == true || pass_error == true){
    return false;
  } else {
    return true;
  } 
```

# java - 使用整数作为键和 ArrayList 对哈希图进行排序

> ID：11504632
> 
> 赞同：1
> 
> 时间：2012-07-16T12:47:33.370
> 
> 标签：java, collections, map

我有一个 HashMap 的情况

`Map<Integer,ArrayList> key = new HashMap<Integer,ArrayList>()`;

数组列表有 [rankOfCard,suitOfCard]

我想以这样的方式对这个 Map 进行排序，如果值是

```
(1,[3,1])
(2,[2,4])
(3,[1,3])
(4,[1,2])
(5,[2,3]) 
```

输出应该是：

```
(4,[1,2])
(3,[1,3])
(5,[2,3])
(2,[2,4])
(1,[3,1]) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:48:52.683

[遍历条目集](https://stackoverflow.com/questions/3995463/how-can-i-iterate-over-a-map-of-string-pojo)和`Collection.sort(entry.value())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:23:39.747

A`Map`未排序，因此它不是您的任务的正确数据结构。A `SortedMap`sorts on *keys*，所以它也不好，因为你希望你的地图按*value*排序。

您的问题没有说明 的关键`Map`是什么，但也许您可以在常规中使用自定义类`List`，并让该类实现`Comparable`接口，或实现外部`Comparator`，以对`List`.

# php - 亚马逊产品的 PHP XPath 问题

> ID：11504634
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:38.233
> 
> 标签：php, regex, xpath

我想从以下 URL 获取所有图像并使用以下 Xpath 查询，但每次查询都返回 null。

网址：

```
http://www.amazon.com/gp/browse.html?ie=UTF8&marketplaceID=ATVPDKIKX0DER&me=A219HML0CVO0HP 
```

Xpath 查询：

```
$products = $xpath->evaluate('//div[@class="productTitle"]//img'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:51:52.197

我相信您在 img 之前有太多正斜杠：

```
$xpath->evaluate('//div[@class="productTitle"]/img'); 
```

这应该与该链接中存在的以下 HTML 匹配：

```
<div id="srProductTitle_B0000CBIFG_0" class="productTitle">
    <a href="https://rads.stackoverflow.com/amzn/click/com/B0000CBIFG" rel="nofollow noreferrer">
    <img src="http://ecx.images-amazon.com/images/I/51BZs4Gf5pL._SL160_AA160_.jpg" class="" border="0" alt="Product Details"  width="160" height="160"/><br clear="all" />Weed Eater 952701594 0.065-Inch-by-200-Foot Bulk Round String Trimmer Line
    </a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:32:00.330

可能这会帮助你...

```
$subject = file_get_contents('http://www.amazon.com/gp/browse.html?ie=UTF8&marketplaceID=ATVPDKIKX0DER&me=A219HML0CVO0HP');
$string = preg_replace('/\s\s+/', '', $subject);

preg_match_all('/<a(.*?)href="(.*?)">(.*?)<img(.*?)src="(.*?)"(.*?)class=""(.*?)border="0"(.*?)alt="Product(.*?)Details/', $subject, $result, PREG_PATTERN_ORDER);

for ($i = 0; $i < count($result[0]); $i++) {
    echo "<pre>";
    echo $result[5][$i];
} 
```

**谢谢.....p2c**

# android - 以编程方式文本视图的布局边距

> ID：11504635
> 
> 赞同：9
> 
> 时间：2012-07-16T12:47:42.620
> 
> 标签：android

如果我使用 xml 文件，我有一个名为 layout_margin 的选项（例如 layout_margin ="1dp" 用于文本视图），但我想以编程方式设置，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T12:52:13.647

```
 LinearLayout.LayoutParams params = (LinearLayout.LayoutParams)textview.getLayoutParams();
     params.setMargins(20, 0, 0, 0); 
     textview.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T12:54:14.383

在将您的问题添加到 StackOverflow 之前，请先 Google 一下。

```
TextView tv = (TextView)findViewById(R.id.my_text_view);
LinearLayout.LayoutParams params = (LinearLayout.LayoutParams)tv.getLayoutParams();
params.setMargins(0, 0, 10, 0); //substitute parameters for left, top, right, bottom
tv.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T12:57:08.153

You can do by this:

```
TextView text = (TextView) findViewById(R.id.text);   
LinearLayout.LayoutParams params= new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.setMargins(left, top, right, bottom);//pass int values for left,top,right,bottom
text.setLayoutParams(params); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T12:51:58.577

```
TextView tv = (TextView) findViewById(R.id.tvId);   
LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
llp.setMargins(50, 0, 0, 0); // llp.setMargins(left, top, right, bottom);
tv.setLayoutParams(llp); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-09T11:34:52.040

请注意，并非所有 LayoutParams 都有方法 setMargins();

RelativeLayout、LinearLayout 等都有自己的内部类 LayoutParams，因此 setMargins 的可用性并不总是可用的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-18T10:09:17.067

试试这个：它有效....

```
LinearLayout.LayoutParams Params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WrapContent, LinearLayout.LayoutParams.WrapContent);

Params.SetMargins(0, 10, 0, 0);

FirstName.LayoutParameters = Params; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T12:52:40.123

您可以`setMargins()`在`LinearLayout.LayoutParams`. 有关更多信息，请参阅[此 StackOverflow 问题](https://stackoverflow.com/a/2481517/1482726)的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-06T13:08:24.137

```
 TextView tv = (TextView)findViewById(R.id.item_title));
        RelativeLayout.LayoutParams mRelativelp = (RelativeLayout.LayoutParams) tv
                    .getLayoutParams();
        mRelativelp.setMargins(DptoPxConvertion(15), 0, DptoPxConvertion (15), 0);
        tv.setLayoutParams(mRelativelp);

    private int DptoPxConvertion(int dpValue)
    {
       return (int)((dpValue * mContext.getResources().getDisplayMetrics().density) + 0.5);
    } 
```

textview 的 getLayoutParams() 应根据**xml 中 textview 的 Parent**转换为相应的 Params 。

```
<RelativeLayout>
   <TextView
    android:id="@+id/item_title">
</RelativeLayout> 
```

如果TextView的parent是RelativeLayout的意思，那么RelativeLayout.LayoutParams如上。如果 parent 是 LinearLayout 则意味着

```
LinearLayout.LayoutParams mLinearlp = (LinearLayout.LayoutParams) tv
                    .getLayoutParams(); 
```

要在不同设备上呈现相同的实际尺寸，请使用我在上面使用的 DptoPxConvertion() 方法。setMargin(left,top,right,bottom) 参数将采用**像素而不是 dp 中的值**。

# java-me - 如何在 j2me/LWUIT 中将事件添加到日历

> ID：11504638
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:45.103
> 
> 标签：java-me, calendar, lwuit

是否可以使用 LWUIT 以编程方式将事件添加到日历上的按钮单击 j2me for S60？我想必须有一个本机扩展，对吧？或者有没有其他方法。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:03:53.970

如果您指的是手机的日历，您可以使用 PIM API 执行此操作。[请在http://developers.sun.com/mobility/apis/pim/pim5/](http://developers.sun.com/mobility/apis/pim/pim5/)上查看 addEventInfo 方法及其使用方法

# javascript - 使用 Javascript 从 DOM 中提取所有图像

> ID：11504643
> 
> 赞同：-2
> 
> 时间：2012-07-16T12:47:57.893
> 
> 标签：javascript, html, dom

如何使用 Javascript 提取 HTML DOM`scr`中所有标签的值？`img`

```
<img src='this_value'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:50:03.993

以下应该适用于所有主要浏览器（例如，IE8+）。有关更多信息`querySelectorAll()`和兼容性表，请查看[MDN](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)。

```
var imgs = document.querySelectorAll( 'img' );
var src = [];
for( var i = imgs.length; i--; ) {
  src.push( img.src );
} 
```

**编辑**

@RobG 和 @KernelJames 在评论中建议的替代方案，具有更好的浏览器支持：

```
var imgs = document.images;
var src = [];
for( var i = imgs.length; i--; ) {
  src.push( img.src );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:50:15.770

使用jQuery：

```
var paths = []
$('img').each(function() {
  paths.push(this.src);
});
console.log(paths); 
```

# ssrs-2008 - ssrs 2008 隐藏 tablix 单列可见性 false

> ID：11504644
> 
> 赞同：0
> 
> 时间：2012-07-16T12:47:59.827
> 
> 标签：ssrs-2008

目前正在使用 sql ssrs2008，将 tablix 单列可见性设置为 false，

通常，当我单击名为“mrp”的 tablix 标题时，列可见性处于非活动模式，因此我无法单击它。

否则，我单击 tablix 列标题“MRP”并更改名为 `"hidden"`as的属性`"=Parameters!ShowSummary.Value=True"`，但是当我查看报告时，它显示没有数据的空白列，

我需要在屏幕上隐藏该列，或者当我将输出导出到 Excel 时，它不应该显示空白列（空白）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:22:53.283

由于 tablix 边框，您当前看到的是一个空白列，它们可能是黑色或某些非白色。您应该参考以下解决方案： [http ://social.msdn.microsoft.com/Forums/eu/sqlreportingservices/thread/3f76a2a6-053a-4da4-8995-5e39f9571c65](http://social.msdn.microsoft.com/Forums/eu/sqlreportingservices/thread/3f76a2a6-053a-4da4-8995-5e39f9571c65)

# manpage - 如何使用 groff 在 unix 手册页中添加空行？

> ID：11504652
> 
> 赞同：0
> 
> 时间：2012-07-16T12:48:25.057
> 
> 标签：manpage, groff

我尝试了以下方法，但它不起作用：

```
.SH ADD A NEW TEST
Everytime you invoke a command within the shell,
this is what actually happens: the shell search for a folder
named as your command inside the directory
.B path/to/framework/Tests
or any subfolder,
if it finds such a folder, it will search for a file called
main.pl and will launch it.
.br
.br
Adding a new test is easy as create a new folder, put a main.pl
file inside it and invoke the folder name. Of course, for a better
integration with the whole system you should follow
some guide lines. Invoke the command
.B skeleton
to find out where the skeleton file is installed in your
system. Have a look to that file. It's well commented and
cover all possibile case and scenarios. Use it as a model to write
your own test. 
```

第二个`.br`被简单地忽略了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:36:26.820

我能够通过使用`.PP`段落开始时来完成它。

```
.SH ADD A NEW TEST
.PP
Everytime you invoke a command within the shell,
this is what actually happens: the shell search for a folder
named as your command inside the directory
.B path/to/framework/Tests
or any subfolder,
if it finds such a folder, it will search for a file called
main.pl and will launch it.
.PP
Adding a new test is easy as create a new folder, put a main.pl
file inside it and invoke the folder name. Of course, for a better
integration with the whole system you should follow
some guide lines. Invoke the command
.B skeleton
to find out where the skeleton file is installed in your
system. Have a look to that file. It's well commented and
cover all possibile case and scenarios. Use it as a model to write
your own test. 
```

# html - 使用协调的图像构建网页

> ID：11504659
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:48:57.830
> 
> 标签：html, image

好吧，我被要求构建一个网页，其中包含一些要放置在协调位置的对象（实际上是图像）......这就是它的样子，单词 M、O、R、A 是可点击的图像（链接），我们不想制作完整的背景或其他东西......

![这是来自概念的图像](../Images/3ba7aaed9333370d6088898f982a4bdc.png)

你能告诉我怎么做吗？！

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:02:56.153

假设您的图像被命名为`imgM`、和`imgO`，您绝对可以将图像定位在特定位置以完成您想要的：`imgR``imgA`

```
#imgM
{
   position: absolute 
   left: 57px;
   top: 92px;
}
#imgO
{
   position: absolute 
   left: 365px;
   top: 366px;
}
#imgR
{
   position: absolute 
   left: 652px;
   top: 459px;
}
#imgA
{
   position: absolute 
   left: 810px;
   top: 182px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:52:33.193

如果物体（图像）的位置应该是固定的，你可以使用`position: absolute`css样式并给图像对应`left`和`top`坐标

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:56:17.247

采用

```
float:left; 
```

和

```
float:right; 
```

在您的 CSS 中，或者您也可以使用

```
margin:5 5 5 5; 
```

（左上右下）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T12:59:45.390

示例代码：

```
<div>
<img src="" style="float:left;">
<img src="" style="float:right;">
</div>

<div style="clear:both;">
<img src="" style="float:left;">
<img src="" style="float:right;">
</div> 
```

无需使用表格。您可以使用 div 获取它

# objective-c - 如何比较 NSArray 的 *ALL* 字符串是否相等？

> ID：11504660
> 
> 赞同：4
> 
> 时间：2012-07-16T12:48:57.347
> 
> 标签：objective-c

如何比较NSArray 的**所有**字符串是否相等？

我应该扫描每个字符串的数组吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:29:21.110

您可以通过从数组创建一个新集合来做到这一点。该集合将仅包含唯一条目，因此如果集合中的元素数为 1，则数组中的所有项目都相等。

```
NSSet *uniqueItems = [NSSet setWithArray:yourArray];
if ([uniqueItems count] < 2) {
    // All items in "yourArray" are the same (no matter how many they are)
} 
```

在上面的例子中，我认为一个空集（意味着一个空数组）也是唯一的。如果不这样做，则可以将 if 语句更改为`if ([uniqueItems count] == 1) { ... }`

* * *

这也适用于任何对象，而不仅仅是字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:51:22.413

该类`NSArray`是通用的，因此它不包含执行此操作的功能，所以是的，您必须自己检查每个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:03:27.330

特洛伊木马是对的。您可以使用类别增强 NSArray 并执行类似的操作...

```
 NSArray *array = @[ @"A", @"B", @"C" ];

  __block BOOL allObjectsAreEqual = YES;
  if ( array.count > 1 ) {
    NSString *firstObject = array[0];
    [array enumerateObjectsUsingBlock:^void(id obj, NSUInteger idx, BOOL *stop) {
      if ( idx == 0 ) {
        return;
      }

      if ( ( allObjectsAreEqual = [firstObject isEqualToString:obj] ) == NO ) {
        *stop = YES;
      }
    }];

  // And here check for allObjectsAreEqual ... 
```

...有很多方法可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:03:39.367

您是否要检查**所有字符串是否彼此相等**？

```
@interface NSArray (MyAdditions)

- (BOOL) isFilledWithEqualObjects {
    if (!self.count) return YES;
    id firstObject = [self objectAtIndex:0];
    for (id obj in self) {
        // Avoid comparing firstObject to itself (and any other pointers to
        // firstObject)
        if (firstObject == obj) continue;
        if (![firstObject isEqual:obj]) return NO;
    }
    return YES;
}

@end 
```

该示例使用`-isEqual:`, 来处理任何类型的对象。如果您知道内容是字符串，则可以`-isEqualToString:`改用：

```
 if (![firstObject isEqualToString:obj]) return NO; 
```

# c# - 可以一列来另一个sql查询吗

> ID：11504662
> 
> 赞同：0
> 
> 时间：2012-07-16T12:49:06.050
> 
> 标签：c#, mysql, sql, c#-4.0

> **可能重复：**
> [从 2 个表中选择简单 SQL（什么是联接？）](https://stackoverflow.com/questions/11040587/simple-sql-select-from-2-tables-what-is-a-join)

我可以将另一个 sql 数据源绑定到 gridview 中的一列吗？

很快，就有了一个包含 3 列的网格视图。

我想在使用另一个 sql 语句时再添加一列并显示不同的值。

是否可以？

为了方便解释，我写了一个例子..

```
Name     |  Gender   |  Year
-------------------------------
AAA      |     M     |  1990 
-------------------------------
BBB      |     F     |  1991 
```

这些值来自一个 sql 语句。

```
Name     |  Tasks  | Gender   |  Year
--------------------------------------
AAA      |    20   |   M      |  1990 
--------------------------------------
BBB      |    2    |   F     |  1991 
```

“任务”列将来自另一个 sql 语句。

我想计算一名员工的任务。所以我使用**count(*)**，但是当我使用它时，我无法获得其他列...

这个主题不同于join。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:02:32.720

试试这个：

```
SELECT a.Name,COUNT(*) as Tasks, a.Gender, a.Year 
FROM TableA a
JOIN TableB b ON a.Name = b.Name 
group by a.Name, a.Gender, a.Year 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:55:37.233

您可能希望使用这样的连接语句：

```
SELECT a.Name, a.Gender, a.Year, b.New
FROM TableA a
JOIN TableB b ON a.Name = b.Name 
```

（不过，我可能搞砸了 MySQL 语法，我来自不同的数据库世界......）

# mysql - MySQL语句的不同格式/效率

> ID：11504675
> 
> 赞同：0
> 
> 时间：2012-07-16T12:49:35.800
> 
> 标签：mysql, performance, join, subquery

这是运行此语句的不同方式或使其更有效的方式的问题。

该声明旨在列出最快将离开现场的所有员工，但他们的员工今天也必须在现场。

```
SELECT 
    e.EmpName,
    cs.SiteName
FROM
    Employee e
INNER JOIN
    EmployeeAssignment ea
ON
    e.EmpId = ea.EmpId
INNER JOIN
    CustomerSite cs
ON
    ea.CustId = cs.CustId
WHERE 
    e.EmpId IN
    (
    SELECT
        ea.EmpId
    FROM
        EmployeeAssignment ea
    WHERE
         ea.EndDate IN
            (
            SELECT 
                MIN(ea.EndDate)
            FROM 
                 EmployeeAssignment ea
             WHERE
                GETDATE() BETWEEN ea.StartDate AND ea.EndDate
             GROUP BY 
                CustId
             )); 
```

如果有人想出更好的方法来写这个，请回复谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:04:02.567

试试这个

```
SELECT  
    e.EmpName, 
    cs.SiteName 
FROM 
    Employee e 
INNER JOIN 

(
 SELECT  custid,empid from EmployeeAssignment ea1 where Enddate=( 
             select MIN(ea.EndDate) 
            FROM  
                 EmployeeAssignment ea 
             WHERE 
                GETDATE() BETWEEN ea.StartDate AND ea.EndDate 
                and ea.custid=ea1.custid
             )
) as ea
ON 
    e.EmpId = ea.EmpId 
INNER JOIN 
    CustomerSite cs 
ON 
    ea.CustId = cs.CustId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:07:12.730

这可能有效，也可能无效：

```
SELECT 
    e.EmpName,
    cs.SiteName
FROM
    Employee e
INNER JOIN
    EmployeeAssignment ea
ON
    e.EmpId = ea.EmpId
INNER JOIN
    CustomerSite cs
ON
    ea.CustId = cs.CustId
GROUP BY   
e.EmpName,
cs.SiteName
HAVING ea.EndDate = 
        (
        SELECT 
            MIN(ea.EndDate)
        FROM 
             EmployeeAssignment ea
         WHERE
            GETDATE() BETWEEN ea.StartDate AND ea.EndDate); 
```

# java - 尽管它实现了 SortedMap，但 TreeBasedTable 的 Guava TreeRow 未排序？

> ID：11504676
> 
> 赞同：0
> 
> 时间：2012-07-16T12:49:45.520
> 
> 标签：java, guava, treetable

这是设计使然吗？

```
Map<String, Map<String, String>> rowMap = treeTable.rowMap();
Map<String, String> notSortedTreeRow = rowMap.get(rowId); 
```

这样您就可以对 rowMap 进行排序（作为 SortedMap），但不能对 [column, value] 的 notSortedTreeRow (TreeRow) 进行排序？

编辑：这是我的错，我有一个整数的字符串表示，我的印象是数字字符串是根据数值进行比较的:-)

如果我过度简化它，就像这样：

```
TreeBasedTable<String, String, String> table = TreeBasedTable.create();

table.put("1", "8", "x");
table.put("1", "9", "x");
table.put("1", "10", "x");

Map<String,String> map = table.rowMap().get("1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:08:58.130

做就是了：

```
SortedMap<String, String> sortedRow = (SortedMap<String, String>) rowMap.get(rowId); 
```

因为它**是**TreeRow 对象实例，即 SortedMap。它由[`RowSortedTable`](http://docs.guava-libraries.googlecode.com/git-history/v10.0/javadoc/com/google/common/collect/RowSortedTable.html#rowMap%28%29)接口保证，并且它不会覆盖[Table 的 rowMap](http://docs.guava-libraries.googlecode.com/git-history/v13.0/javadoc/com/google/common/collect/Table.html#rowMap%28%29)参数，因为它在 Java 中是不可能的。

**编辑：**

在这里回答原始问题：

> 这是设计使然吗？

是的，这是 Java 的设计。

# sql - SQL Server 函数/过程中的游标

> ID：11504686
> 
> 赞同：1
> 
> 时间：2012-07-16T12:50:03.060
> 
> 标签：sql, sql-server-2008, cursor

我想知道在 SQL Server 中是否可以执行以下操作 - 它涉及**游标的使用**，我不确定**如何**将其放置在函数或存储过程中。

你会推荐什么？

`TABLEA`具有以下列：

```
Column1, Column2 
```

例子

```
Column1 Column2
------- -------
anna     a
anna     b
ben      b
john     c
john     b
john     a 
```

列 2 中的可能值是：a、b 和 c（列 1 上的某个值没有重复项）

创建`TABLEB`结构：`Column1 Column3 Column4 Column5.`

1.  有一个游标循环遍历所有行`TABLEA`
2.  `SELECT * FROM TABLEB WHERE Column1 = (cursor row).Column1`
3.  如果前一个选择没有返回任何行，则在 Columns3、4 和 5 上插入一行到`TABLEB`具有和 NULL 值的值。`Column1 = (cursor row).Column1`

    如果（从先前选择返回的行）> 0：

    { 如果 TABLEB.Column3 不为空，则使用（光标行）更新 TABLEB.Column2

    否则，如果 TABLEB.Column4 不为空，则使用（光标行）.Column2 更新 TABLEB

    否则，如果 TABLEB.Column5 不为空，则使用 (光标行).Column2 更新 TABLEB }

4.  结束光标循环

如您所见，我非常清楚自己想要做什么，但对语法或在这种情况下推荐的内容知之甚少。

输出应在以下步骤之后：

```
Column1 Column3 Column4 Column5
------  ------- ------- -------
anna    a        b       
ben     b            
john    c        b       a 
```

我最感兴趣的是是否可以使用游标，如果可以，您是否有任何学习语法的提示/教程，您是否建议我将示例集成到过程/函数中？

谢谢！

后期编辑：

podiluska，我尝试使用枢轴，如下所示：

```
CREATE VIEW VIEWB
AS SELECT [Column1], 
('Column2') AS [Source],
MAX( CASE Column2 WHEN 'a' THEN Column2 ELSE '' END ) Column3,         
MAX( CASE Column2 WHEN 'b' THEN Column2 ELSE '' END ) Column4,         
MAX( CASE Column2 WHEN 'c' THEN Column2 ELSE '' END ) Column5          
FROM TABLEA
GROUP BY [Column1];
GO 
```

这种方法的问题在于输出是：

```
Column1 Column3 Column4 Column5
------  ------- ------- -------
anna    a        b       
ben              b            
john    a        b       c 
```

您会注意到与第一个输出和所需输出的不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:51:58.453

您可以使用光标，但我建议使用 PIVOT 代替，即：

```
 select column1, 
      case a when 0 then null else 'a' end,
      case b when 0 then null else 'b' end,
      case c when 0 then null else 'c' end
 from
      TableA as p
 pivot
      (Count(column2) for column2 in ([a],[b],[c]))
 as pt 
```

如果你想移动列，试试这个......

```
 select column1,
      case when c3 is null then c4 else c3 end c3,
      case when c3 is null then c5 else c4 end c4,
      case when c3 is null then null else c5 end c5
 from
 (
 select column1,
    case when c3 is null then c4 else c3 end c3,
    case when c3 is null then c5 else case when c4 is null then c5 else c4 end end c4,
    case when c3 is null or c4 is null then null else c5 end c5
 from
 (
 select column1, 
    case a when 0 then null else 'a' end c3,
    case b when 0 then null else 'b' end c4,
    case c when 0 then null else 'c' end c5
 from
    #temp as p
 pivot
    (Count(column2) for column2 in ([a],[b],[c]))
 as pt
 ) v
 ) v2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:10:05.497

你根本不需要光标。这很简单

```
select 
    column1,
    max(case when column2='a' then column2  end) as column1,
    max(case when column2='b' then column2  end) as column2,
    max(case when column2='c' then column2  end) as column3
from
    table
group by
    column1 
```

# python - 如何将接收参数的方法作为Python中另一个函数的参数传递

> ID：11504693
> 
> 赞同：2
> 
> 时间：2012-07-16T12:50:26.597
> 
> 标签：python, parameter-passing

我知道这是有效的：

```
def printValue():
    print 'This is the printValue() method'

def callPrintValue(methodName):
    methodName()
    print 'This is the callPrintValue() method' 
```

但是有没有办法传递一个接收参数作为另一个函数的参数的方法？

这样做是不可能的：

```
def printValue(value):
    print 'This is the printValue() method. The value is %s'%(value)

def callPrintValue(methodName):
    methodName()
    print 'This is the callPrintValue() method' 
```

这是我得到的堆栈跟踪：

```
This is the printValue() method. The value is dsdsd
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in callPrintValue
TypeError: 'NoneType' object is not callable 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T12:59:26.330

有些人觉得`lambda`丑陋，但在这种情况下它是一个有用的工具。无需修改 的签名`callPrintValue()`，您可以使用它`lambda`来快速定义一个将参数绑定到 的新函数`printValue()`。您是否真的要这样做取决于许多因素，并且可能`*args`像其他人建议的那样添加参数是可取的。不过，这是一个值得考虑的选择。以下内容无需修改您当前的代码即可工作：

```
>>> callPrintValue(lambda: printValue('"Hello, I am a value"'))
This is the printValue() method. The value is "Hello, I am a value"
This is the callPrintValue() method 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T12:53:00.947

```
def printValue(value):
    print 'This is the printValue() method. The value is %s'%(value)

def callPrintValue(methodName, *args):
    methodName(*args)
    print 'This is the callPrintValue() method' 
```

然后你可以这样称呼它：

```
callPrintValue(printValue, "Value to pass to printValue") 
```

这允许您传入任意数量的参数，并且所有参数都传递给您调用的函数`callPrintValue`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T12:53:55.397

我想你可以做到这一点

```
 def callPrintValue(methodName, *args):
    methodName(*args)
    print 'This is the callPrintValue() method' 
```

打电话

```
 callPrintValue(printValue, "abc") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-16T12:54:46.927

你想使用元组解包：

```
def print_value(*values):
    print values

def call_print_value(func,args=None):
    func(*args)

call_print_value(print_value,args=('this','works')) #prints ('this', 'works') 
```

从 API 的角度来看，我更喜欢将传递的参数保留为单独的关键字。（然后更明确一点，哪些参数正在被使用`print_value`，哪些正在被使用`call_print_value`）。另请注意，在 python 中，习惯上将函数（和方法）名称命名为`name_with_underscores`. CamelCase 通常用于类名。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T13:02:34.023

作为已经提供的答案的后续，您可能需要在 stackoverflow 上查看以下问题，以便更好地理解 *args 和/或 **kwargs 以及`lambda`python。

1.  [*args 和 **kwargs 是什么意思？](https://stackoverflow.com/questions/287085/what-does-args-and-kwargs-mean)
2.  [**（双星）和*（星）对python参数有什么作用？](https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters)
3.  [Python Lambda - 为什么？](https://stackoverflow.com/questions/890128/python-lambda-why)

# macos - 获取 NSStatusItem 帧更改的通知？

> ID：11504696
> 
> 赞同：6
> 
> 时间：2012-07-16T12:50:38.453
> 
> 标签：macos, cocoa, notifications, nsnotificationcenter, nsstatusitem

在使用`NSStatusItem`带有自定义视图的应用程序中，如下所示：

![在此处输入图像描述](../Images/036b6ecac79218bb5d64d182f7d516b2.png)

...您如何在以下情况下收到通知：

1.  由于全屏应用，状态栏被隐藏
2.  状态项移动位置是因为添加/删除/调整了另一个项？

当项目改变位置时，两者都是将自定义视图移动到正确位置所必需的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T10:09:38.500

有一个方法`-[NSStatusItem setView:]`。当您为状态项设置自定义视图时，此视图会自动插入到特殊的状态栏窗口中。您可以使用一种方法访问该窗口`-[NSView window]`以观察其`NSWindowDidMoveNotification`：

```
- (void)applicationDidFinishLaunching:(NSNotification *)notification
{
    NSStatusItem *statusItem = [self newStatusItem];
    NSView *statusItemView = [self newStatusItemView];
    statusItem.view = statusItemView;

    NSNotificationCenter *dnc = [NSNotificationCenter defaultCenter];
    [dnc addObserver:self selector:@selector(statusBarDidMove:)
                name:NSWindowDidMoveNotification object:statusItemView.window];
}

- (void)statusBarDidMove:(NSNotification *)note
{
    NSWindow *window = note.object;
    NSLog(@"%@", NSStringFromRect(window.frame)); // i.e. {{1159, 900}, {24, 22}}
} 
```

每次状态栏变为可见或隐藏以及移动图标时，您都会收到通知。这是您更新弹出面板位置的机会。

# c# - 更改 xml 属性名称

> ID：11504697
> 
> 赞同：4
> 
> 时间：2012-07-16T12:50:39.780
> 
> 标签：c#, xml

如何更改 C# 中的 XElement 属性名称？

因此，如果

```
<text align="center"> d hhdohd  </text> 
```

将属性名称 align 更改为 text-align 后

```
<text text-align="center> d hhdohd  </text> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:56:58.313

使用`LINQ-XML`，您可以删除一个`existing`属性，然后添加一个新属性。

Xml 标记：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <text align="center" other="attribute">Something</text>
</root> 
```

代码：

```
 XDocument doc = XDocument.Load(file);
 var element = doc.Root.Element("text");
 var attList = element.Attributes().ToList();
 var oldAtt = attList.Where(p => p.Name == "align").SingleOrDefault();
 if (oldAtt != null)
  {
   XAttribute newAtt = new XAttribute("text-align", oldAtt.Value);
   attList.Add(newAtt);
   attList.Remove(oldAtt);
   element.ReplaceAttributes(attList);
   doc.Save(file);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T09:26:50.243

使用`XmlElement SetAttribute`和`RemoveAttribute`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:08:42.937

使用[linq-to-xml](/questions/tagged/linq-to-xml "显示标记为“linq-to-xml”的问题")，您可以使用[`XElement.ReplaceAttributes`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.replaceattributes.aspx)方法来更新 xml 属性，如下所示：

```
XElement data = XElement.Parse (@"<text align=""center""> d hhdohd  </text>");

data.ReplaceAttributes(
    new XAttribute("text-align", "center")
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:57:19.027

I think you would have to remove and re-add, not sure the syntax off the top of my head. but you should be able to xpath to the node. Capture the value of the existing attribute, remove the attribute, create a new attribute and assign it the old value.

# postgresql - postgresql 删除级联

> ID：11504699
> 
> 赞同：30
> 
> 时间：2012-07-16T12:50:51.030
> 
> 标签：postgresql

我有两张桌子：

```
TableY:
    id, name, description

TableX:
    id, name, y_id 
```

我在`TableX`( `y_id REFERENCING tableY id ON DELETE CASCADE`) 中添加了一个外键。当我从中删除时`TableX`，`TableY` `id`剩余部分（虽然理论上应该删除）。我想我误解了该`ON DELETE CASCADE`选项的工作原理。谁能告诉我做错了什么？

我在[DELETE CASCADE](https://stackoverflow.com/questions/5493227/on-delete-cascade)上也看到了这个，但对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-08-26T06:48:07.823

## 简短的回答

ON DELETE CASCADE 指定约束选项。在您的情况下（假设您有依赖于 table_x 的 table_x 和 table_y）当您删除 table_x 中的行并且从 table_y 引用该行时，table_x 中的行将被删除，并且在 table_y 中引用该行的所有行也将被删除。

当您要删除表并在此表上依赖一个或多个其他表时，请使用 DROP TABLE 和 CASCADE 关键字。

## 有关 DROP、DELETE 和 ON DELETE CASCADE 约束选项的更多信息

**删除与删除**

当您想从数据库中删除表时，请使用 word drop。当您使用单词 delete 时，表示您要从表中删除/删除内容（但希望表保持 = 继续存在于数据库中）。

**删除从其他表引用的行**

当您在表中有行（例如 table_x 和 id 为 1 的行）并且该行被其他表引用（在其他表中有与该条目链接的外键）时，您无法删除该行，如下所示。你会得到一个错误。

```
DELETE FROM table_x WHERE id = 1;

ERROR:  update or delete on table "table_x" violates foreign key constraint "constraint_name" on table "table_y"
DETAIL:  Key (id)=(1) is still referenced from table "table_y". 
```

原因在错误的详细部分中描述。其他表/表中的条目/条目引用此条目。例如，您可以想象表 account 和表 account_activity。当您从表帐户中删除条目（删除一个帐户）时，您应该从表 account_activity 中删除所有引用表帐户中此特定条目的条目。如果不是，您最终会得到不涉及任何帐户的帐户活动。

根据您想要实现的目标，有两种可能性：

1.  您要删除整个表 (table_x) 的内容和所有对该表有引用（外键）的表的内容。
2.  您想从一个表中删除 WHERE 子句中指定的一个或多个条目（行），并删除所有引用此条目的行（如上面提到的 account 和 account_activity 的示例）。

1) 使用带有 CASCADE 关键字的 TRUNCATE

```
TRUNCATE table_x CASCADE; 
```

2) 更改您在 table_y 中对列的约束，使其具有 ON DELETE CASCADE 选项。

```
ALTER TABLE table_y   
    DROP CONSTRAINT constraint_name,   
    ADD CONSTRAINT constraint_name FOREIGN KEY (column_in_table_y)
          REFERENCES table_x (referenced_column_in_table_x) ON DELETE CASCADE; 
```

**删除其他表所依赖的表**

当您有表（例如 table_x）并且其他表/表依赖于它时，您不能删除此表。依赖意味着其他表引用（具有外键）此表（table_x）。当您尝试删除此类表时，您会收到错误。

```
DROP TABLE table_x;

ERROR:  cannot drop table table_x because other objects depend on it
DETAIL:  constraint id_x_fk on table table_y depends on table table_x
HINT:  Use DROP ... CASCADE to drop the dependent objects too. 
```

该错误给出提示。当您想要删除这样的表时，您必须使用带有级联关键字的 drop。该表将被删除，并且所有引用该表的约束也将被删除。

```
DROP TABLE table_x CASCADE; 
```

**例子**

创建 table_x 和 table_y。

```
CREATE TABLE table_x
(
  id integer NOT NULL,
  text character varying(255) NOT NULL,
  CONSTRAINT table_x_pk PRIMARY KEY (id)
);

CREATE TABLE table_y
(
  id integer NOT NULL,
  text character varying(255) NOT NULL,
  id_x integer NOT NULL,
  CONSTRAINT table_y_pk PRIMARY KEY (id)
); 
```

在 table_y 的列 id_x 上创建名称为 id_x_fk 的约束。

```
ALTER TABLE table_y
  ADD CONSTRAINT id_x_fk FOREIGN KEY (id_x)
      REFERENCES table_x (id); 
```

将测试数据插入 table_x 和 table_y。

```
INSERT INTO table_x VALUES
    (1, 'super x'),
    (2, 'great x');

INSERT INTO table_y VALUES
    (1, 'y one', 2),
    (2, 'y two', 1),
    (3, 'y three', 1); 
```

从 table_x 中删除（错误）。

```
DELETE FROM table_x WHERE id = 1; 
```

删除和添加具有相同名称的约束。

```
ALTER TABLE table_y
  DROP CONSTRAINT id_x_fk,
  ADD CONSTRAINT id_x_fk FOREIGN KEY (id_x)
      REFERENCES table_x (id) ON DELETE CASCADE; 
```

从 table_x 和 table_y 中删除（正确）。

```
DELETE FROM table_x WHERE id = 1; 
```

删除 table_x 和 table_y 中的所有内容。

```
TRUNCATE table_x CASCADE; 
```

删除（删除）table_x 并删除 table_y 中的 id_x_fk 约束。

```
DROP TABLE table_x CASCADE; 
```

**注意**

如果您在 table_x 中有行（例如，id = 3）并且此条目（此 id）未从 table_y 引用，您可以删除该行，即使约束没有 ON DELETE CASCADE 选项（因为没有违反约束）。

该代码在“PostgreSQL 9.2.4，由 Visual C++ build 1600, 64-bit 编译”上进行了测试。

**资料来源：**

[http://www.postgresql.org/docs/current/static/sql-droptable.html](http://www.postgresql.org/docs/current/static/sql-droptable.html)

[http://www.postgresql.org/docs/current/static/sql-delete.html](http://www.postgresql.org/docs/current/static/sql-delete.html)

[http://www.postgresql.org/docs/current/static/ddl-constraints.html](http://www.postgresql.org/docs/current/static/ddl-constraints.html)

[http://www.postgresql.org/docs/current/static/sql-altertable.html](http://www.postgresql.org/docs/current/static/sql-altertable.html)

[PostgreSQL 删除所有内容](https://stackoverflow.com/questions/13223820/postgresql-delete-all-content/25183902#25183902)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-16T12:57:48.917

估计你误会了 尝试删除行`TableY`，相应的行将`TableX`被级联删除。当您有辅助相关表并希望通过从主表中删除父行来清除它们而不违反约束或留下垃圾时，此选项是必不可少的。

# google-docs - 恒定时间源

> ID：11504701
> 
> 赞同：2
> 
> 时间：2012-07-16T12:51:00.393
> 
> 标签：google-docs

我为大家准备了一个有趣的.. 是否可以从外部恒定时间源粘贴日期和时间？

这背后的原因如下。

我们有几个人在不同时区的 gdocs 上访问同一个电子表格。

使用的公式之一是“now()”，这也是问题所在。如果保罗在西雅图打开文档，他会根据他的 PC 时间（比如说上午 10 点）插入他的当地时间。现在玛丽在 1 秒后打开同一个文档，但她在伦敦，现在显示 01PM（时间可能不是对，我不在所有区域的顶部，但重点应该很清楚），阿卜杜勒同时打开它，在印度，他的显示器下午 4 点

所有这些人几乎在同一时间打开了文档，但每个人都插入了他们的当地时间。

是否有一个公式可以插入一个服务器时间或一个UTC时间或其他东西..我们可以使用的东西会向每个人显示相同的时间？谷歌时间.. 任何时间源是不变的，不会改变？

谢谢你。

# c# - DataContext 的不同实例是否共享相同的连接？

> ID：11504702
> 
> 赞同：1
> 
> 时间：2012-07-16T12:51:06.943
> 
> 标签：c#, linq-to-sql

这是一个代码片段：

```
private static ApplicationParameter TryGet(MyDataContext ctxt, string parameterName) {
  return ctxt.GetTable<ApplicationParameter>().Where(p => p.Name.ToLower() == parameterName.ToLower()).SingleOrDefault();
}

private static Dictionary<string, string> _cache = new Dictionary<string, string>();

public static string GetValue(string parameterName) {
  if (!_cache.ContainsKey(parameterName))
    using (var ctxt = new MyDataContext()) {
      var ap = TryGet(ctxt, parameterName);
      if (ap != null)
        _cache[parameterName] = ap.Value;
      else
        _cache[parameterName] = null;
    }
    return _cache[parameterName];
} 
```

这段代码大部分时间都可以正常工作。然而，在负载测试中，我们有时会在`TryGet()`方法中遇到臭名昭著的“Open DataReader”错误，调用堆栈显示它通过了`GetValue()`。

对于我的一生，我看不出这是怎么可能的。我显然`using`在调用周围使用了一个块`TryGet`，带有一个新实例`MyDataContext`，并且只有一个查询。那么那里怎么可能`DataReader`已经有一个开放空间呢？

`MyDataContext`除非...... （显然继承自）的所有实例之间存在一些共享连接`DataContext`，并且当两个线程同时尝试使用该`Connection`属性时，即使是两个不同的数据上下文，不知何故它们都在访问相同的`DataReader`？

这可能是真的吗？还能有什么其他解释？

**编辑：**我在`OnCreated`方法中放置了一个记录器，`MyDataContext`并记录了`GetHashCode`数据上下文及其`Connection`属性的值。那里没有重复，所以我猜他们没有共享同一个对象 - 至少，不是在正常使用中。自安装日志以来，没有看到“打开数据读取器”错误。但即使他们没有使用相同的连接对象，也许他们仍然以某种方式共享与数据库的相同连接？

# javascript - CSS3缩放鼠标光标

> ID：11504703
> 
> 赞同：18
> 
> 时间：2012-07-16T12:51:07.037
> 
> 标签：javascript, css, dom-events, zooming, coordinate-transformation

我的目标是创建一个插件，可以在页面区域上进行缩放和平移操作，就像谷歌地图目前的工作方式一样（意思是：用鼠标滚动=放大/缩小区域，单击并按住&移动&释放=平移）。

滚动时，我希望以鼠标光标为中心进行缩放操作。

为此，我使用即时 CSS3 矩阵转换。唯一但强制性的约束是我不能使用 CSS3 转换和缩放转换以外的任何东西，转换原点为 0px 0px。

平移超出了我的问题范围，因为我已经可以使用它了。当谈到缩放时，我正在努力找出我的 Javascript 代码中的故障所在。

问题一定出在`MouseZoom.prototype.zoom`函数的某个地方，在 x 轴和 y 轴上的平移计算中。

首先，这是我的 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, user-scalable = no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="jquery.mousewheel.min.js"></script>
    <script src="StackOverflow.js"></script>
    <style type="text/css" media="all">
        #drawing {
            position: absolute;
            top: 0px; 
            left: 0px; 
            right:0; 
            bottom:0;
            z-index: 0;
            background: url(http://catmacros.files.wordpress.com/2009/09/cats_banzai.jpg) no-repeat;
            background-position: 50% 50%;
        }
    </style>
    <title>Test</title>
</head>
<body>
    <div id="drawing"></div>
    <script>
        var renderer = new ZoomPanRenderer("drawing");
    </script>
</body>
</html> 
```

如您所见，我正在使用 Jquery 和 Brandon Aaron 的 jquery 鼠标滚轮插件，可以在这里找到： [https ://github.com/brandonaaron/jquery-mousewheel/](https://github.com/brandonaaron/jquery-mousewheel/)

这是 StackOverflow.js 文件的内容：

```
/***************************************************** 
 * Transformations
 ****************************************************/
function Transformations(translateX, translateY, scale){
    this.translateX = translateX;
    this.translateY = translateY;
    this.scale = scale;
}

/* Getters */
Transformations.prototype.getScale = function(){ return this.scale; }
Transformations.prototype.getTranslateX = function(){ return this.translateX; }
Transformations.prototype.getTranslateY = function(){ return this.translateY; }

/***************************************************** 
 * Zoom Pan Renderer
 ****************************************************/
function ZoomPanRenderer(elementId){
    this.zooming = undefined;
    this.elementId = elementId;
    this.current = new Transformations(0, 0, 1);
    this.last = new Transformations(0, 0, 1);
    new ZoomPanEventHandlers(this);
}

/* setters */
ZoomPanRenderer.prototype.setCurrentTransformations = function(t){ this.current = t; }
ZoomPanRenderer.prototype.setZooming = function(z){ this.zooming = z; }

/* getters */
ZoomPanRenderer.prototype.getCurrentTransformations = function(){ return this.current; }
ZoomPanRenderer.prototype.getZooming = function(){ return this.zooming; }
ZoomPanRenderer.prototype.getLastTransformations = function(){ return this.last; }
ZoomPanRenderer.prototype.getElementId = function(){ return this.elementId; }

/* Rendering */
ZoomPanRenderer.prototype.getTransform3d = function(t){
    var transform3d = "matrix3d(";
    transform3d+= t.getScale().toFixed(10) + ",0,0,0,";
    transform3d+= "0," + t.getScale().toFixed(10) + ",0,0,";
    transform3d+= "0,0,1,0,";
    transform3d+= t.getTranslateX().toFixed(10) + "," + t.getTranslateY().toFixed(10)  + ",0,1)";
    return transform3d;
}

ZoomPanRenderer.prototype.getTransform2d = function(t){
    var transform3d = "matrix(";
    transform3d+= t.getScale().toFixed(10) + ",0,0," + t.getScale().toFixed(10) + "," + t.getTranslateX().toFixed(10) + "," + t.getTranslateY().toFixed(10) + ")";
    return transform3d;
}

ZoomPanRenderer.prototype.applyTransformations = function(t){
    var elem = $("#" + this.getElementId());
    elem.css("transform-origin", "0px 0px");
    elem.css("-ms-transform-origin", "0px 0px");
    elem.css("-o-transform-origin", "0px 0px");
    elem.css("-moz-transform-origin", "0px 0px");
    elem.css("-webkit-transform-origin", "0px 0px");
    var transform2d = this.getTransform2d(t);
    elem.css("transform", transform2d);
    elem.css("-ms-transform", transform2d);
    elem.css("-o-transform", transform2d);
    elem.css("-moz-transform", transform2d);
    elem.css("-webkit-transform", this.getTransform3d(t));
}

/***************************************************** 
 * Event handler
 ****************************************************/
function ZoomPanEventHandlers(renderer){
    this.renderer = renderer;

    /* Disable scroll overflow - safari */
    document.addEventListener('touchmove', function(e) { e.preventDefault(); }, false);

    /* Disable default drag opeartions on the element (FF makes it ready for save)*/
    $("#" + renderer.getElementId()).bind('dragstart', function(e) { e.preventDefault(); });

    /* Add mouse wheel handler */
    $("#" + renderer.getElementId()).bind("mousewheel", function(event, delta) {
        if(renderer.getZooming()==undefined){
            var offsetLeft = $("#" + renderer.getElementId()).offset().left;
            var offsetTop = $("#" + renderer.getElementId()).offset().top;
            var zooming = new MouseZoom(renderer.getCurrentTransformations(), event.pageX, event.pageY, offsetLeft, offsetTop, delta);
            renderer.setZooming(zooming);

            var newTransformation = zooming.zoom();
            renderer.applyTransformations(newTransformation);
            renderer.setCurrentTransformations(newTransformation);
            renderer.setZooming(undefined);
        }
        return false;
    });
}

/***************************************************** 
 * Mouse zoom
 ****************************************************/
function MouseZoom(t, mouseX, mouseY, offsetLeft, offsetTop, delta){
    this.current = t;
    this.offsetLeft = offsetLeft;
    this.offsetTop = offsetTop;
    this.mouseX = mouseX;
    this.mouseY = mouseY;
    this.delta = delta;
}

MouseZoom.prototype.zoom = function(){
    var previousScale = this.current.getScale();
    var newScale = previousScale + this.delta/5;
    if(newScale<1){
        newScale = 1;
    }
    var ratio = newScale / previousScale;

    var imageX = this.mouseX - this.offsetLeft;
    var imageY = this.mouseY - this.offsetTop;

    var previousTx = - this.current.getTranslateX() * previousScale;
    var previousTy = - this.current.getTranslateY() * previousScale;
    var previousDx = imageX * previousScale;
    var previousDy = imageY * previousScale;

    var newTx = (previousTx * ratio + previousDx * (ratio - 1)) / newScale;
    var newTy = (previousTy * ratio + previousDy * (ratio - 1)) / newScale;

    return new Transformations(-newTx, -newTy, newScale);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-08T14:29:16.240

使用在一个**元素**`transform`上获得**谷歌地图的缩放**行为似乎是一个有趣的想法，所以我付了一点钱 =)**`div`**

我将使用`transform-origin`（及其用于浏览器兼容性的姊妹属性）将缩放调整到您正在缩放的​​ div 上的鼠标位置。我认为这可以做你想要的。我在小提琴上放了一些例子来说明：

*   示例 1：[放大和缩小变换原点](http://jsfiddle.net/mturjak/2R763/)
*   示例 2：[缩放变换原点和平移缩放帧](http://jsfiddle.net/mturjak/d2epQ/)
*   示例 3：[示例 2 + 缩小到原始框架边框](http://jsfiddle.net/mturjak/NthUz/)
*   示例 4：[示例 3 + 隐藏溢出的父框架](http://jsfiddle.net/mturjak/xM3P9/)

**调整`transform-origin`**

所以在`applyTransformations`你的函数中，如果我们从(mouse listener) 函数传递这个值，我们可以从and`transform-origin`动态调整。`imageX``imageY``MouseZoom`

```
 var orig = t.getTranslateX().toFixed() + "px " + t.getTranslateY().toFixed() + "px";
    elem.css("transform-origin", orig);
    elem.css("-ms-transform-origin", orig);
    elem.css("-o-transform-origin", orig);
    elem.css("-moz-transform-origin", orig);
    elem.css("-webkit-transform-origin", orig); 
```

（在[第一个小提琴示例](http://jsfiddle.net/mturjak/NthUz/)中，我只是使用您的`translateX`and `translateY`in`Transformations`来传递鼠标在 div 元素上的位置 - 在第二个示例中，我将其重命名为`originX`并`originY`与翻译变量区分开来。）

**计算变换原点**

在您的`MouseZoom`我们可以简单地计算原点位置`imageX/previousScale`。

```
 MouseZoom.prototype.zoom = function(){
        var previousScale = this.current.getScale();
        var newScale = previousScale + this.delta/10;
        if(newScale<1){
            newScale = 1;
        }
        var ratio = newScale / previousScale;

        var imageX = this.mouseX - this.offsetLeft;
        var imageY = this.mouseY - this.offsetTop;

        var newTx = imageX/previousScale;
        var newTy = imageY/previousScale;

        return new Transformations(newTx, newTy, newScale);
    } 
```

因此，如果您在放大不同位置之前完全缩小，这将非常有效。但是为了能够在任何缩放级别更改缩放原点，我们可以结合原点和平移功能。

**移动缩放框**（扩展我的原始答案）

图像上的变换原点仍然以相同的方式计算，但我们使用单独的 translateX 和 translateY 来移动缩放帧（这里我引入了两个新变量来帮助我们完成这个技巧 - 所以现在我们有了、`originX`和`originY`）。`translateX``translateY`

```
 MouseZoom.prototype.zoom = function(){
        // current scale
        var previousScale = this.current.getScale();
        // new scale
        var newScale = previousScale + this.delta/10;
        // scale limits
        var maxscale = 20;
        if(newScale<1){
            newScale = 1;
        }
        else if(newScale>maxscale){
            newScale = maxscale;
        }
        // current cursor position on image
        var imageX = (this.mouseX - this.offsetLeft).toFixed(2);
        var imageY = (this.mouseY - this.offsetTop).toFixed(2);
        // previous cursor position on image
        var prevOrigX = (this.current.getOriginX()*previousScale).toFixed(2);
        var prevOrigY = (this.current.getOriginY()*previousScale).toFixed(2);
        // previous zooming frame translate
        var translateX = this.current.getTranslateX();
        var translateY = this.current.getTranslateY();
        // set origin to current cursor position
        var newOrigX = imageX/previousScale;
        var newOrigY = imageY/previousScale;
        // move zooming frame to current cursor position
        if ((Math.abs(imageX-prevOrigX)>1 || Math.abs(imageY-prevOrigY)>1) && previousScale < maxscale) {
            translateX = translateX + (imageX-prevOrigX)*(1-1/previousScale);
            translateY = translateY + (imageY-prevOrigY)*(1-1/previousScale);
        }
        // stabilize position by zooming on previous cursor position
        else if(previousScale != 1 || imageX != prevOrigX && imageY != prevOrigY) {
            newOrigX = prevOrigX/previousScale;
            newOrigY = prevOrigY/previousScale;
        }
        return new Transformations(newOrigX, newOrigY, translateX, translateY, newScale);
    } 
```

对于这个例子，我稍微调整了你的原始脚本并添加了[第二个小提琴示例](http://jsfiddle.net/mturjak/d2epQ/)。

现在我们从任何缩放级别放大和缩小鼠标光标。但是由于帧偏移，我们最终会移动原始 div（“测量地球”）......如果您使用有限宽度和高度的对象（在一端放大，在一端缩小），这看起来很有趣另一端，我们像尺蠖一样向前走）。

**避免“尺蠖”效应**

为避免这种情况，您可以例如添加限制，使左图像边框不能移动到其原始 x 坐标的右侧，顶部图像边框不能移动到低于其原始 y 位置，以此类推其他两个边框。[但是在示例 3](http://jsfiddle.net/mturjak/NthUz/)中，缩放/缩小不会完全绑定到光标，还会绑定到图像的边缘（您会注意到图像滑入到位）。

```
 if(this.delta <= 0){
        var width = 500; // image width
        var height = 350; // image height
        if(translateX+newOrigX+(width - newOrigX)*newScale <= width){
            translateX = 0;
            newOrigX = width;
        }
        else if (translateX+newOrigX*(1-newScale) >= 0){
            translateX = 0;
            newOrigX = 0;        
        }
        if(translateY+newOrigY+(height - newOrigY)*newScale <= height){
            translateY = 0;
            newOrigY = height;
        }
        else if (translateY+newOrigY*(1-newScale) >= 0){
            translateY = 0;
            newOrigY = 0;
        }
    } 
```

另一个（有点糟糕）选项是在完全缩小时简单地重置帧转换（比例==1）。

但是，如果您要处理连续元素（左右边缘以及上下边缘绑定在一起）或仅处理非常大的元素，则不会遇到此问题。

为了以一个不错的方式完成所有事情 - 我们可以在缩放对象周围添加一个带有隐藏溢出的父框架。所以图像区域不会随着缩放而改变。请参阅[jsfiddle 示例 4](http://jsfiddle.net/mturjak/xM3P9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T00:44:51.587

我们为此制作了一个反应库： [https ://www.npmjs.com/package/react-map-interaction](https://www.npmjs.com/package/react-map-interaction)

它处理缩放和平移，适用于移动设备和桌面设备。

源代码相当短且易读，但为了更直接地回答您的问题，我们使用了这个 CSS 转换：

```
const transform = `translate(${translation.x}px, ${translation.y}px) scale(${scale})`;
const style = {
    transform: transform,
    transformOrigin: '0 0 '
};

// render the div with that style 
```

主要技巧之一是正确计算初始指针/鼠标按下状态与发生触摸/鼠标移动时的当前状态之间的差异。当鼠标按下时，捕获坐标。然后在每次鼠标移动时（直到鼠标向上）计算距离的差异。该差异是您需要抵消平移的差异，以确保光标下的初始点是缩放的焦点。

# android - 如何访问 TableLayout 中的视图

> ID：11504718
> 
> 赞同：7
> 
> 时间：2012-07-16T12:52:16.177
> 
> 标签：android, button, tablelayout

其中`TableLayout`有 9`Buttons`个 3x3 格式。如何使用 TableLayout 的 id（不是 Button Id）以编程方式访问这些按钮上的文本？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T12:54:49.500

使用类似的东西，

```
TableLayout tblLayout = (TableLayout)findViewById(R.id.tableLayout);
TableRow row = (TableRow)tblLayout.getChildAt(0); // Here get row id depending on number of row
Button button = (Button)row.getChildAt(XXX); // get child index on particular row
String buttonText = button.getText().toString(); 
```

**3x3 格式：（**理解实际的代码可能不同）

```
for(int i=0;i<3;i++)
{
 TableRow row = (TableRow)tblLayout.getChildAt(i);
  for(int j=0;j<3;j++){
    Button button = (Button)row.getChildAt(j); // get child index on particular row
    String buttonText = button.getText().toString();
    Log.i("Button index: "+(i+j), buttonText);
 }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T13:18:28.243

你可以做的是找到`TableLayout`使用的实例

```
TableLayout layout_tbl = (TableLayout) findViewById(R.id.layout_tbl); 
```

然后通过使用`getChildCount()`，您可以遍历 and 的每个孩子`TableLayout`，`TableRow`也更好地`View`通过使用进行检查，`instanceof`这样您就不会得到任何`NPE`.

```
for (int i = 0; i < layout_tbl.getChildCount(); i++) {
     View parentRow = layout_tbl.getChildAt(i);
     if(parentRow instanceof TableRow){
                for (int j = 0; j < parentRow.getChildCount(); j++){
                   Button button = (Button ) parentRow.getChildAt(j);
                   if(button instanceof Button){
                      String text = button.getText().toString();
                }
       }
   } 
```

# c# - C# Window Form Application: 有没有办法在不使用任何第三方库的情况下将 pdf 转换为位图？

> ID：11504721
> 
> 赞同：0
> 
> 时间：2012-07-16T12:52:32.633
> 
> 标签：c#, .net, pdf-generation

对不起，这里有另一个愚蠢的问题。在窗口窗体应用程序中：有没有办法在不使用任何第三方库的情况下将 pdf 图像转换为位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:32:57.383

我终于找到了这样做的方法：（再次回答我自己的问题，我希望将来分享和帮助他人）

```
static void Main(string[] args)
    {
        // Create an instance of Bytescout.PDFRenderer.RasterRenderer object and register it.
        RasterRenderer renderer = new RasterRenderer();
        renderer.RegistrationName = "demo";
        renderer.RegistrationKey = "demo";

        // Load PDF document.
        renderer.LoadDocumentFromFile("multipage.pdf");

        for (int i = 0; i < renderer.GetPageCount(); i++)
        {
            // Render first page of the document to BMP image file.
            renderer.RenderPageToFile(i, RasterOutputFormat.BMP, "image" + i + ".bmp");
        }

        // Open the first output file in default image viewer.
        System.Diagnostics.Process.Start("image0.bmp");
    } 
```

使用 RasterRenderer 和 Bytescout.PDFRenderer 会将 pdf 转换为 bmp 文件。它基本上在做的是“渲染”文件内容中的字节，以便用 PDF 进行分析，将其转换为 bmp。（归功于：bytescout）

# android - 如何在 Android 设备上打开/关闭 WIFI 和 3G - 从 Windows 操作系统（使用 CMD）

> ID：11504724
> 
> 赞同：2
> 
> 时间：2012-07-16T12:52:43.353
> 
> 标签：android, shell, command-line, android-intent, command

我有以下命令可以在 CMD 上运行

```
adb shell am start -a android.settings.WIFI_SETTINGS 
```

现在，我进入连接设备的*“无线和网络”*。谁能告诉我如何从**COMMAND-PROMPT**禁用和启用 WIFI ？

3G 也需要这样做。

从 CMD 执行此操作的原因：我正在尝试一些 android 自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:42:52.883

经过一番思考，我创建了 2-android 应用程序。

一个启用/禁用wifi；和其他用于 3G（或数据）。

现在每次我从 CMD 调用这个应用程序时，都可以控制 wifi 或 3G。;)

我仍在寻找更简单的方法......直接来自 CMD。

# android - 从 Android 中的 Intent 获取数组时出错

> ID：11504727
> 
> 赞同：1
> 
> 时间：2012-07-16T12:52:54.510
> 
> 标签：android, android-intent

我正在发送 Array`one activity`并将该数组放入`other activity`.

这是我的代码（接收方）

```
Bundle Extras = getIntent().getExtras();
if(Extras != null)
{
    reports = getIntent().getStringArrayExtra("reports");
    System.out.println("Size() "+reports.length);
} 
```

但我得到以下错误

```
 07-16 18:15:27.628: W/Bundle(718):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
  07-16 18:15:27.628: W/Bundle(718):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-16 18:15:27.628: W/Bundle(718):     at android.os.Looper.loop(Looper.java:130)
 07-16 18:15:27.628: W/Bundle(718):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 07-16 18:15:27.628: W/Bundle(718):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-16 18:15:27.628: W/Bundle(718):     at java.lang.reflect.Method.invoke(Method.java:507)
 07-16 18:15:27.628: W/Bundle(718):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 07-16 18:15:27.628: W/Bundle(718):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 07-16 18:15:27.628: W/Bundle(718):     at dalvik.system.NativeStart.main(Native Method)
 07-16 18:15:27.658: W/System.err(718): java.lang.NullPointerException
 07-16 18:15:27.658: W/System.err(718):     at com.mythrii.timeapp.EditReports.onCreate(EditReports.java:41)
 07-16 18:15:27.698: W/System.err(718):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 07-16 18:15:27.698: W/System.err(718):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
 07-16 18:15:27.698: W/System.err(718):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 07-16 18:15:27.698: W/System.err(718):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 07-16 18:15:27.698: W/System.err(718):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 07-16 18:15:27.698: W/System.err(718):     at android.os.Handler.dispatchMessage(Handler.java:99)
 07-16 18:15:27.698: W/System.err(718):     at android.os.Looper.loop(Looper.java:130)
 07-16 18:15:27.698: W/System.err(718):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 07-16 18:15:27.698: W/System.err(718):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-16 18:15:27.698: W/System.err(718):     at java.lang.reflect.Method.invoke(Method.java:507)
 07-16 18:15:27.698: W/System.err(718):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 07-16 18:15:27.698: W/System.err(718):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-16 18:15:27.729: W/System.err(718):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:00:48.730

也许您没有从 extra获得任何数组（带有关键*报告）。*您需要检查**报告**对象是否不是`null`太多。

```
Bundle Extras = getIntent().getExtras();
if(Extras != null)
{
    reports = getIntent().getStringArrayExtra("reports");

    if(reports != null)
        System.out.println("Size() "+reports.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:54:12.007

```
Bundle Extras = getIntent().getExtras();
if(Extras != null)
{
    reports = Extras.getStringArrayExtra("reports");
    System.out.println("Size() "+reports.length);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:04:54.483

1.  不要使用魔法文字 - 使用常量。Meybe 您在 ivoker 方面有错误类型的“报告”，或者忘记在此处添加额外内容。
2.  你确定 getStringArrayExtra 会返回一些东西吗？不！
3.  调试/添加日志并检查额外包含的内容。

# c++ - 如何在课堂上使用 out 运算符 = 进行深度复制

> ID：11504729
> 
> 赞同：0
> 
> 时间：2012-07-16T12:53:04.850
> 
> 标签：c++

```
struct Property 
{
    int objID;
    const char* objName;
};

struct Data
{
    Property propertyRef;
}

std::vector<Data> items; 
```

这里我分配数据的功能之一如下

```
Data d1;
d1.propertyRef.objID = 1;
d1.propertyRef.objName = "MyObj";

//... I am some logic in between and passing this d2 which is mentioned below to another thread in argument

Data d2 = d1; 
```

问题是当我打印`d2.propertyRef.objName`它时打印垃圾值？

这里的重点是我正在使用库，我无法更改库以在数据中添加 operator =。

为什么我面临这个问题以及如何解决它？（我用谷歌搜索了它，提到我必须进行深度复制，但我不知道如何为矢量制作它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:55:02.387

使用`std::string`：

```
std::string objName; 
```

现在它将完成深拷贝的工作。无需再担心了。

此外，总的来说，`std::string`它很棒，你会喜欢它的。在需要时使用它 `char*`或`const char*`（作为一般规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:20:17.923

首先，对于您展示的那段代码，浅拷贝应该可以工作。只要`objName`指向字符串文字，应该没有问题。

如果`objName`确实开始指向其他东西，那么您可能需要特殊的函数来管理它，不仅用于分配，还用于创建等。此时，您将需要一个包装类。但首先，我会确保您确实需要它：因为您说它`Data`在一个您无法更改的外部库中，所以它也可能对此有一些限制。（库是否在内部复制`Data` ？如果是这样，那么您必须以某种方式确保传递它的字符串的生命周期。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:55:56.110

如果您可以更改`Property`为使用 a`std::string`而不是 a`const char*`一切都会奏效。

如果你不能，包装`Data`在一个类中，你*可以*为它提供一个复制 ctor/assign 运算符并存储一个向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:57:48.667

You can create a new class DataRef which embeds Data and implement the rule-of-three in that on behalf of the Data/Property. Then use DataRef in the vector.

# java - 如何在测试中将 Spring HTTPInvoker 加载到码头？

> ID：11504730
> 
> 赞同：1
> 
> 时间：2012-07-16T12:53:11.400
> 
> 标签：java, spring, testing, junit, embedded-jetty

我已经用谷歌搜索了这个，但没有运气。我只想看看如何在 Embedded-jetty 中加载我需要的所有服务以便能够在 JUnit 中进行测试的示例。所以，我的目标是这样的。

```
 private String url = "SERVICE_URL";

@Before
public void before() {
   // start jetty with all the services I need
}

@Test
public void shouldDoSthIWant() {
   // invoke SERVICE_URL and test.
} 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:38:48.987

此处找到的示例应用程序展示了如何在一个简单的 Java 应用程序中使用嵌入式码头运行 HttpInvoker。您应该能够调整该代码以使其在 junit 中工作。
[http://code.google.com/p/jianwikis/wiki/SpringHttpRemotingWithEmbeddedJettyServer](http://code.google.com/p/jianwikis/wiki/SpringHttpRemotingWithEmbeddedJettyServer)

从此处复制代码/配置的相关部分

```
Server server = new Server();
SelectChannelConnector connector = new SelectChannelConnector();
connector.setPort(port);

Context context = new Context(server, "/", Context.SESSIONS);

DispatcherServlet dispatcherServlet = new DispatcherServlet();
dispatcherServlet.setContextConfigLocation("classpath:com/mycompany/config/DefaultServlet-servlet.xml");

ServletHolder servletHolder = new ServletHolder(dispatcherServlet);
context.addServlet(servletHolder, "/*") 
```

DefaultServlet-servlet.xml

```
<!-- This default handler takes care of each of the services enumerated below -->
<bean id="defaultHandlerMapping"
    class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />

<bean id="helloService" class="com.mycompany.service.impl.HelloServiceImpl"/>

<!-- SpringHTTP Service Exposure -->

<bean name="/HelloService"
    class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter"
    lazy-init="true">
    <property name="service" ref="helloService" />
    <property name="serviceInterface"
            value="com.mycompany.service.iface.HelloService" />
</bean> 
```

# sql - Informix 相当于 Oracle 的 UPDATE ... RETURNING INTO 语句

> ID：11504731
> 
> 赞同：1
> 
> 时间：2012-07-16T12:53:15.443
> 
> 标签：sql, oracle, informix

在 Oracle 中，我可以从 UPDATE 语句中返回信息，如下所示：

```
UPDATE SOME_TABLE
SET SOME_COL = SYSDATE
WHERE
    ...
RETURNING SOME_COL INTO :OutParameter 
```

结合受影响的行数，这允许在一个查询中检查一行是否存在，更新它，然后返回有关更新行的一些信息（如新更新的值或行 ID 或其他）。

这也可以在 SQL Server 中使用 OUTPUT 子句来完成。

**Informix 中有这样的东西吗？**我检查了 Informix 的[UPDATE 语法](http://publib.boulder.ibm.com/infocenter/idshelp/v10/topic/com.ibm.sqls.doc/sqls864.htm)，但它看起来没有任何等价的东西......还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:28:19.387

受影响的行数可从 SQLCA 记录中获得，该记录可通过普通 SQL 或 SPL 获得`DBINFO('sqlca.sqlerrd2')`

例如：

```
UPDATE table SET foo = 'bar' WHERE baz = 'quux';
INSERT INTO log_table (date_stamp, msg, row_count)
  VALUES (CURRENT, "Updated foo to bar", DBINFO('sqlca.sqlerrd2')); 
```

参见[精美手册](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=/com.ibm.sqls.doc/ids_sqs_1488.htm)。

没有与`RETURNING`Informix 中的子句等效的东西。这个概念对我来说似乎很奇怪——当多行被更新时，这将如何工作，具有动态内容，比如`SET foo = baz * bar`foo、baz 和 bar 都是列，并且所有受影响的元组都没有共享单个值？

# c++ - 如何将清单文件添加到 Visual Studio 2010 中的项目？

> ID：11504732
> 
> 赞同：10
> 
> 时间：2012-07-16T12:53:27.177
> 
> 标签：c++, visual-studio-2010, manifest

我正在尝试使用 Visual Studio 2010 将清单文件添加到项目中，以便将项目设置为与 Windows 7 兼容并禁用虚拟化。

问题是在我的 Visual Studio 2010 中，当我想添加新项目时，没有“应用程序清单文件”选项可供选择。

我可以在构建项目时生成清单文件，因为我在链接器中设置了属性来这样做。但是我可以修改该文件以添加兼容性属性吗？

有没有办法在项目中创建清单文件然后构建它？或者我可以从“属性”对话框（清单工具）本身设置兼容性属性吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-07T23:05:37.310

1.  创建所需的清单文件。
2.  `.manifest`使用扩展名将其保存在计算机上的某个位置。
3.  在 Visual Studio 中右键单击您的项目，然后选择`Add > Existing Item...`
4.  浏览到清单文件并打开它。
5.  构建您的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-10T00:33:24.647

我使用的一种方法是将项目属性/清单工具/输入和输出/嵌入清单”设置为“否”。然后，在我的 RC 文件中添加以下行：**CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST“MyProject.exe.manifest”**

# objective-c - 核心数据模型版本问题

> ID：11504733
> 
> 赞同：0
> 
> 时间：2012-07-16T12:53:28.983
> 
> 标签：objective-c, ios, core-data

我在我的 iPhone 应用程序中使用轻量级迁移进行核心数据版本控制，我将新模型版本添加到核心数据并将这个新版本设置为当前版本，然后我开始向新模型版本添加新属性，然后我发布应用程序为应用商店。

当用户更新应用程序时，它会崩溃并且永远不会运行。

我找到了崩溃的原因，即当我将属性添加到新版本模型时，这些属性也添加到以前的模型版本中，因此当用户更新应用程序时，轻量级迁移无法正常工作，因为用户应用程序中的版本确实与更新应用程序中的版本不匹配。

我的问题是：这个问题是怎么发生的？为什么 Xcode 将新属性添加到以前的模型和当前模型而不是仅将其添加到当前模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:37:17.510

Xcode 链接核心数据模型文件时可能会出现一些错误

# c# - 新值未添加到列表 (C#)

> ID：11504738
> 
> 赞同：-6
> 
> 时间：2012-07-16T12:53:53.243
> 
> 标签：c#, list

我正在尝试创建客户列表。当用户插入新客户端的名称时，该名称必须添加到列表中并显示在消息框中。预配置的客户端是 Jack、Sandra、Anna、Tom 和 Bob。当我运行以下脚本并输入新的客户端名称时，会弹出一个没有新名称的弹出窗口。为什么是这样？

```
 private void btnAddClient_Click(object sender, EventArgs e)
    {

        string msg = "";

        List<string> Clients = new List<string>();
        Clients.Add("Jack");
        Clients.Add("Sandra");
        Clients.Add("Anna");
        Clients.Add("Tom");
        Clients.Add("Bob");

        foreach (string val in Clients)
        {
            msg += "- " + val + "\n";
        }

        if (txtAddClient.Text == "")
        {
            MessageBox.Show("No client name has been entered!");
        }
        else
        {
            string newClient = txtAddClient.Text;
            Clients.Add(newClient);
            MessageBox.Show(msg);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:55:18.673

因为您没有将 msg 变量附加到文本框中的数据。

您遍历现有客户端并附加变量，但一旦您确定文本框不为空，您将内容添加到列表并显示 msg 变量。您需要使用输入的数据附加 msg 变量。

请参阅@Tisho 的代码示例如何实现它 - 不想将他的代码复制为我自己的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:56:51.700

```
 private void btnAddClient_Click(object sender, EventArgs e)
    {

        string msg = "";

        List<string> Clients = new List<string>();
        Clients.Add("Jack");
        Clients.Add("Sandra");
        Clients.Add("Anna");
        Clients.Add("Tom");
        Clients.Add("Bob");

        if (txtAddClient.Text == "")
        {
            MessageBox.Show("No client name has been entered!");
        }
        else
        {
            string newClient = txtAddClient.Text;
            Clients.Add(newClient);

            // this is where you want to join your string
            // AFTER you add the new client to the list
            foreach (string val in Clients)
            {
                msg += "- " + val + "\n";
            }

            MessageBox.Show(msg);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:55:25.717

```
public partial class Form1 : Form
{
    List<string> Clients = new List<string>();

    public Form1()
    {
        InitializeComponent();
        Clients.Add("Jack");
        Clients.Add("Sandra");
        Clients.Add("Anna");
        Clients.Add("Tom");
        Clients.Add("Bob");
    }

    private void btnAddClient_Click(object sender, EventArgs e)
    {
        if (txtAddClient.Text == "")
        {
            MessageBox.Show("No client name has been entered!");
        }
        else
        {
            string msg = "";
            string newClient = txtAddClient.Text;
            Clients.Add(newClient);
            foreach (string val in Clients)
            {
                msg += "- " + val + "\n";
            }
            MessageBox.Show(msg);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:56:12.053

更新：

```
private List<string> Clients = new List<string>(){ "Jack", "Sandra", "Anna", "Tom", "Bob"};

private void btnAddClient_Click(object sender, EventArgs e)
{
    string msg = "";

    if (txtAddClient.Text == "")
    {
        MessageBox.Show("No client name has been entered!");
    }
    else
    {
        string newClient = txtAddClient.Text;
        Clients.Add(newClient);
        foreach (string val in Clients)
        {
            msg += "- " + val + "\n";
        }
        MessageBox.Show(msg);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T12:57:01.990

you must do

```
msg += txtAddClient.Text; 
```

and then

```
MessageBox.Show(msg); 
```

# android - 在片段中实现按钮 - 如何创建接口以将片段与活动通信

> ID：11504740
> 
> 赞同：1
> 
> 时间：2012-07-16T12:53:56.397
> 
> 标签：android, android-fragments

[我在这里](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)找到了一个不错的带有片段的布局

我将按钮添加到 xml 片段，但我不知道如何实现按钮，我的意思是，我不知道如何为按钮工作。

问题是我需要在片段内创建一个回调接口并要求宿主活动实现它，然后活动通过接口接收回调：

[Android 中的片段](http://developer.android.com/guide/components/fragments.html)

不幸的是，目前尚不清楚如何使用按钮来做到这一点。

简而言之，我有我的按钮，但我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T17:53:00.043

我也有同样的问题。好吧，我可以单击按钮并做一个简单的 Toast，但片段仅此而已。这个模型真的让我在这里死了。

要添加按钮，请在您的 fragment.xml 文件上创建它们，然后在您的片段类中的 onCreate 方法中调用它们。我使用这样的简单代码：

```
Button btn = (Button)getActivity().findViewById(R.id.button1);
btn.setOnClickListener(new View.OnClickListener() {                       
    @Override
    public void onClick(View v) {
        Log.i("FragmentsTab1", "++ ON BUTTONCLICK 1 ++ ");
        showFrag();
    }
}); 
```

我通常也将它包装在 try/catch 中。该按钮有效，并将调用我的本地私有方法 (showFrag())，它可以是 Toast 或对话框，但做更多的事情对我不起作用。我无法访问 Fragment.xml 上的 TextView 或调用 Activity。真的很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:06:04.413

我认为这可能是相关的：http: [//developer.android.com/training/basics/fragments/communicating.html#DefineInterface](http://developer.android.com/training/basics/fragments/communicating.html#DefineInterface) for trivial case

我发现这篇文章对复杂的设计很有用：[在配置更改后恢复片段的对象引用](https://stackoverflow.com/questions/12115032/restoring-object-references-of-fragments-after-configuration-changes)

# vim - vim EasyGrep：打开拆分窗口并加载每个搜索到的文件

> ID：11504743
> 
> 赞同：0
> 
> 时间：2012-07-16T12:54:03.277
> 
> 标签：vim

我最近为 vim 安装了[EasyGrep 插件](http://www.vim.org/scripts/script.php?script_id=2438)。它工作得很好，除了一件让我烦恼的事情：当我使用`<leader>vv`(mapped to `EgMapGrepCurrentWord_v`) 搜索光标下的单词时，EasyGrep 打开一个拆分窗口并将它搜索的每个文件加载到拆分中。

这似乎很耗时，也很分散注意力。您知道禁用此功能的选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:24:17.963

这种特殊行为是由于 Vim 的内置`:vimgrep`命令是如何工作的。来自 Vim 的文档：

> 为了能够做到这一点，Vim 加载每个文件，就好像它正在被编辑一样。

这一定是导致闪烁窗口的副作用的原因。如果您觉得这让人分心，您可以考虑使用外部 grep 命令`:grep`而不是该`:vimgrep`命令。默认情况下，EasyGrep 配置为使用`:vimgrep`. `:grep`您可以通过使用以下设置设置您的 .vimrc来切换到。

```
 let g:EasyGrepCommand=1 
```

# php - MYSQL SELECT SUM() BY DATE IF NO MATCH RETURN 0

> ID：11504746
> 
> 赞同：3
> 
> 时间：2012-07-16T12:54:07.783
> 
> 标签：php, mysql, group-by, sum, where

我已经将三个表相互连接起来。我正在查询关键字+统计信息。

我需要按日期范围获取数据，如果没有该特定日期范围的数据，我希望它返回 0 个统计信息

假设我的查询是：
SELECT keyword,SUM(stat) FROM keywords WHERE date >='2012-07-10' GROUP BY keyword;

它将返回
|我的关键字 1|3|
|我的关键字 2|6|

示例表内容：
| 编号 | 关键词 | 统计 | 日期 | 关键词组 |
| 1 | 我的关键词 1 | 2 | 2012-07-11 | 1 |
| 2 | 我的关键词 1 | 1 | 2012-07-12 | 1 |
| 3 | 我的关键字 2 | 6 | 2012-07-11 | 1 |
| 4 | 我的关键字 3 | 10 | 2012-07-09 | 1 |

但是有一些关键字没有该日期范围的统计信息，
但我仍然希望这些关键字显示为 0 作为统计信息。

像这样：

|我的关键字 1|3|
|我的关键字 2|6|
|我的关键字 3|0|

问题是 where 子句会阻止未找到的值，是否有解决方法。
正如我所说，我有三个具有关系的表，我使用 LEFT JOIN 来查询数据，为简化起见，我将这部分排除在示例查询之外。

表：广告系列
ID
名称

表：关键字组
ID
名称
活动

表：KeywordData
id
关键字
stat
日期
keywordGroup

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:00:31.763

假设您使用左连接正确连接表，请使用：

```
select keyword, ifnull(sum(stat),0) ... group by keyword 
```

如果是 WHERE 子句在应用分组之前过滤掉一些统计信息，那么您需要将日期条件移动到 LEFT JOIN 条件中，即。

```
from KeywordGroup left join KeywordData on ... and date > '2012-07-10' 
```

但是如果没有看到实际的查询，我就无法提供进一步的帮助。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:14:45.993

尝试这个

```
select 
    t1.keyword,
    sum(t2.stat) as stat
from
(   
    select distinct keyword from keywords   
) as t1 left join
(
    SELECT keyword,SUM(stat) FROM keywords WHERE date >='2012-07-10' GROUP BY keyword
) as t2
on t1.keyword=t2.keyword; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:00:22.450

你看过左外连接吗？这是连接类型的一个很好的参考：

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
"To produce the set of records only in Table A, but not in Table B, 
we perform a left outer join, then exclude the records we don't want 
from the right side via a where clause." 
```

**ns**

# google-maps-api-3 - 如何使用谷歌地图 API 步行获取距离，仅用于显示

> ID：11504747
> 
> 赞同：-2
> 
> 时间：2012-07-16T12:54:10.467
> 
> 标签：google-maps-api-3

如何使用谷歌地图 API 步行获取距离

我正在使用这个 API

[http://maps.googleapis.com/maps/api/directions/xml?origin=mystartAdd&destination=mydestAdd&sensor=true](http://maps.googleapis.com/maps/api/directions/xml?origin=mystartAdd&destination=mydestAdd&sensor=true)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:17:47.170

我找到

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=startAdd&destinations=endAdd&mode=walking&language=en-EN&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=startAdd&destinations=endAdd&mode=walking&language=en-EN&sensor=false)

寻求此链接的帮助

[https://developers.google.com/maps/documentation/directions/#TravelModes](https://developers.google.com/maps/documentation/directions/#TravelModes)

# c# - XML按属性删除子节点

> ID：11504749
> 
> 赞同：1
> 
> 时间：2012-07-16T12:54:13.387
> 
> 标签：c#, xml, linq

我有一个用于播放器设置的 xml 文件。这是我的xml文件

```
<Player>
 <Volume Value="0,4044944" />
  <Playlist>
   <Song Path="E:\Music\Main\Chipmunk ft. Chris Brown - Champion (Explicit Version).mp3" />
    <Song Path="E:\Music\Main\Usher - More (RedOne Jimmy Joker Remix).mp3" />
 </Playlist>
  <LastPosition LastSong="" Position="" />
 </Player> 
```

我想制作一个按钮来删除具有所选路径的节点。我有变量“路径”来保存目录信息。当我输入代码时：

```
Doc.Descendants("Song").Where(p => p.Element("Path").Value == path).FirstOrDefault().Remove(); 
```

我得到一个 System.NullReferenceException 。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:56:09.620

应该是`p.Attribute`，不是`p.Element`。

# jquery - 将 div 动画到 100% 高度

> ID：11504755
> 
> 赞同：3
> 
> 时间：2012-07-16T12:54:44.150
> 
> 标签：jquery

我正在尝试将 div 设置为 100% 的内容，但它只是闪烁，而不是为 div 设置动画，背景在动画结束时消失。我很难过，因为当我输入高度数字而不是百分比时它会起作用。

```
$("#artbutton").click(function(event){
    event.preventDefault();
    var $self=$(this);
    $("#media").animate({height:0},"slow");
    $("#music").animate({height:0},"slow",function(){
        document.location = $self.attr('href');
        $("#art").animate({height:"100%"},"slow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:58:57.860

不确定是否可以使用百分比，如果高度不固定，为什么不先使用 JS 获取高度值。

```
$height = $('div').height(); 
```

然后用数字为高度设置动画。

```
$("#artbutton").click(function(event){
    event.preventDefault();
    var $self=$(this);
    $("#media").animate({height:0},"slow");
    $("#music").animate({height:0},"slow",function(){
        document.location = $self.attr('href');
        $("#art").animate({height: $height + 'px',},"slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:17:03.637

通常，在涉及高度时，您希望避免使用百分比。问题如下：

*div 的高度是 100%……什么？ **答：**父元素高度的100%。好，很好！父元素有多高？让我们检查其中包含的元素的高度。嗯，这个子 div 的高度设置为 100%……什么？*

于是循环继续……

对此有两个修复：

1.  确保父元素具有固定的高度（不是百分比，因为那样它会检查上面的父元素，等等......）。因此，只有当父标签具有固定高度时，您才能使用高度百分比。
2.  不要使用百分比，只给你的 div 一个固定的高度。

或者，相反，您可以将 div 包装在一个新的 div 中。将父级设置为固定高度，子级（旧 div）现在可以使用基于百分比的高度值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T15:00:50.097

设置具有定义高度的外部 div 的想法对我来说不是一个可能的解决方案。我的 php 代码是一个模板，我的 div 的内容总是在变化 - 使用数据库中的内容归档，这取决于用户单击的链接。这个 div 位于页面顶部，其他信息必须显示在它的正下方。

所以，我想出了这个非常适合我的解决方案。

首先，我从 CSS 中删除了设置的高度并添加了“display: none;” - 这允许 div 加载完全打开，但用户看不到它。

然后我使用 JavaScript（在本例中为 jQuery）来获取高度。接下来，同样使用 jQuery，我将显示设置为阻塞，并将高度设置为我需要的“关闭”设置。最后，我在 .animation 中使用获得的高度来滑动 div“打开”。

CSS 代码：

```
#main_description {
position: relative;
display: none;
/*height: 8.92855em; -> this was the original 'closed' height*/ 
border-bottom: 1px solid #a9a5a6;
overflow: hidden;
} 
```

JavaScript：

```
var state = true;
var descriptionHeight = $("#main_description").height();
// for testing -> alert("Description Height: " + descriptionHeight);

$("#main_description").css({"display" : "block", "height" : "8.92855em"});

$("#main_description_toggle").click(function()
{
    if (state)
    {
        $("#main_description").animate({
        height: descriptionHeight + "px"
        }, 1000);

        $("#main_description_toggle").html("<a>less &#9650;</a>");
    }
    else
    {
        $("#main_description").animate({
        height: "8.92855em"
        }, 1000);

        $("#main_description_toggle").html("<a>more &#9660;</a>");
    }
    state = !state;
}); 
```

（我知道，8.92855em 的高度看起来很奇怪，但那是行高的 5 倍，当 div '关闭'时，客户希望显示 5 行文本）。

# r - 生成给定域和发生率的密度图

> ID：11504762
> 
> 赞同：2
> 
> 时间：2012-07-16T12:55:03.277
> 
> 标签：r, ggplot2

ggplot`geom_histogram`并且`geom_density`两者都期望**x**美学，其中每个都将查看变量在其域中的发生率。

我有一个函数可以输出某些分布**的**域和发生率（即不以可数形式呈现事件，而是以已经计数的形式）。

实际值集来自外部库，因此将在此处设置一个示例。我想绘制这个分布：

```
data <- data.frame(depth=seq(0,20), incidence=seq(0,20)^1.5)
ggplot() + geom_density (aes(x=depth, y=incidence), data=data, fill='lightblue') 
```

以上不起作用。当然，我可以单独使用 x=depth 或 x=incidence 并生成一个图，但是，两者都不正确，因为 x 变量被认为是我们正在计算事件的变量。

我想到可以获取数据框并为每个深度生成行，其中行数对应于发生率#。这在部分发生率下变得更加复杂，但可以扩展。

问题：有没有办法在给定发生率而不是事件的情况下在 ggplot 中生成密度图？如果没有，我想可以使用类似的东西：

```
c (apply (data, 1, function(r) rep(r[1], r[2])), recursive=TRUE) 
```

生成事件的离散近似值。ggplot 中的直接方式会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:39:37.207

显而易见的事情是

```
qplot(depth, data = data, weight = incidence, geom = "histogram", binwidth = 1) 
```

如果你需要这样做，`geom_histogram`那么它会稍微长一点

```
ggplot(data , aes(x = depth)) + 
       geom_histogram(binwidth = 1, aes(weight = incidence)) 
```

生产

![在此处输入图像描述](../Images/21da101e4c8a03e53e2f05bf9ef27646.png)

# jquery - 获取元素偏移位置并做一些事情

> ID：11504763
> 
> 赞同：0
> 
> 时间：2012-07-16T12:55:09.297
> 
> 标签：jquery, css, function, offset

我需要在我的页面上显示覆盖/灯箱窗口取决于操作输入位置。以下是我的 JQuery 代码，有人可以帮助我吗？

```
$('input.proxy').click(function() {
    $('div.proxy').fadeIn('600', function() {
        var r = ('input.proxy').attr('offsetTop');
        $('div.proxy').css('margin-top', r + 'px' );
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:00:30.053

用于`$(".rightpage").offset().top`获取偏移位置。

# javascript - 画布中的图像 ID

> ID：11504766
> 
> 赞同：2
> 
> 时间：2012-07-16T12:55:12.397
> 
> 标签：javascript, jquery, html

动态加载图像：

`imageObj.src = "source";`

按钮点击代码：

```
$(document).ready(function ()
        {
            var value = 0;
            $('#left').click(function ()
            {
                alert("left click");
                value -= 90;
                $('#img').rotate({ animateTo: value });

            });
            $('#right').click(function ()
            {
                value += 90;
                $('#img').rotate({ animateTo: value });
            });
        }); 
```

我已经在画布按钮单击中动态加载了图像，但是我必须在画布中顺时针和逆时针旋转图像。

当我在 html 中采用硬编码的 img 标签时它可以工作，但是当图像动态加载时我的功能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:41:34.400

就像 Bergi 提到的那样，您实际上是在旋转，没有任何东西被画在画布上。这是我为您准备的一个工作示例：

[http://jsfiddle.net/gurkavcu/J9B3k/](http://jsfiddle.net/gurkavcu/J9B3k/)

您可以像这样旋转图像对象：

```
 $('#left').click(function() {

        context.clearRect(0, 0, canvas.width, canvas.height);
        context.translate((imageObj.width / 2), (imageObj.height /2));
        context.rotate(-90 * Math.PI / 180);
        context.translate(-(imageObj.width / 2), -(imageObj.height / 2));
        context.drawImage(imageObj, 0, 0, imageObj.width , imageObj.height);

    });
    $('#right').click(function() {
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.translate((imageObj.width / 2 ), (imageObj.height / 2));
        context.rotate(90 * Math.PI / 180);
        context.translate(-(imageObj.width / 2), -(imageObj.height / 2));
        context.drawImage(imageObj, 0, 0, imageObj.width , imageObj.height);
    }); 
```

# c++ - 如何在方块世界中使用四叉树/八叉树

> ID：11504771
> 
> 赞同：1
> 
> 时间：2012-07-16T12:55:32.090
> 
> 标签：c++, octree

在过去的几天里，我一直在搞乱八叉树和四叉树。我可以构建它们、迭代它们并吐出我需要的信息。我也知道它们在碰撞检测中非常有用，您可以将屏幕细分为更小的部分，以便能够检测屏幕上特定部分的移动，而不是一直遍历整个屏幕。但是，我无法理解如何使用八叉树或四叉树来生成立方体类型的世界。

以下是我一直在思考的一些想法：

1）您使用四边形/八角树细分一个集合立方体（10x10x10），并细分它直到至少有一个叶子是均匀的；然后，您删除所有其他不统一的叶子，从而为您提供不同大小的立方体。

2）你在空间（x，y，z）中细分一个点，直到你得到一个立方体，它至少有一个大小相同的叶子，或者达到节点的深度，并使用所有这些位置（x， y,z) 作为不同类型块的位置。

谁能解释在构建这样一个 3D 环境中使用八叉树或四叉树背后的逻辑？它是基于 x、y、z 还是基于恒定的立方体测量？我非常不确定如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T01:31:06.580

八叉树确实可以帮助您专注于将立方体世界块分成相等的部分。他们玩的技巧是，当您不断将立方体输入八叉树分支时，您会自动将这些细分为您以后可以在接近的基础上提取的部分（即 Chunk01(128,0,0) Chunk02(256,0,0 ） ETC..）

当您将多维数据集存储到八叉树中时，您还定义了它们的“类型”（材料或某种描述它们的枚举）。通过这样做，您还允许八叉树将这些立方体组合在一起，如果它们成为邻居（即草、石头、沙子等）。然后，这使八叉树算法能够为您处理一些关于如何将它们折叠/压缩成 1 倍大的正方形/矩形基元的智能，从而使您能够减少立方体数量。

归根结底，您有两种方法可以处理立方体世界，第一种是您希望最终用户相信您一次制作了 1x 个立方体，但实际上您实际上是在合并您的网格/顶点数以给出作为表面的一大块的错觉实际上只是 1 倍大的网格，而不是 100 个立方体。只有当用户与立方体交互（即删除/添加）时，您才重新计算您的网格并将多个立方体的幻觉变为现实......但随后您立即将其换回为一个巨大的合并网格。

一旦你让你的八叉树运行并且你将你的块合并成单个网格形式（通过将顶点数组输入到 GPU 缓冲区中），你还必须在八叉树之外围绕剔除做一些额外的工作。有很多方法可以做到这一点，体积剔除（光线追踪）通常是我最推荐的方法，但我认为这可以做得更好。

在我的示例中：[https](https://vimeo.com/71330826) ://vimeo.com/71330826我基本上以不同的方式处理它，因为我知道相机中心点在哪里，并且我还跟踪相机面向的方向，然后基本上将其用作接近焦点剔除，如果有问题的块在相机后面，我会销毁它们，减少我的 GPU 负载。

您还会注意到，每个“块”的外部仍然可见，因为我从创建的每个块的内部剔除，但鉴于每个块都在处理自己的工作量，我仍然渲染实际的块“墙”在相机下方......我后来通过跟踪用户的 Z 深度和相机边界来修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:02:08.260

四叉树是 2D 的，所以用它们来表示 3D 空间真的没有意义。

八叉树有多种使用方法。如果您使用固定数量的等长立方体，实现肯定会更简单。然而，这几乎肯定不一定是最*有效*的实现，四叉树/八叉树都是关于效率的。

# php - 简单一：php爆炸不输出预期结果

> ID：11504773
> 
> 赞同：0
> 
> 时间：2012-07-16T12:55:36.847
> 
> 标签：php, arrays, string, explode

好的，所以对于这个简单的 php 函数：

```
$FBIDs = "1,15,16,18,30";
$FBArr = explode(",", $FBIds); 
```

print_r($FBArr);

输出是：

```
Array ( [0] => ) 
```

难道我做错了什么？我瞎了吗？为什么这不给我一个以数字为元素的数组？这让我发疯了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:56:45.723

The variable you're trying to explode is `$FBIDs`, but you're exploding `$FBIds`; The final "d" needs to be capitalized and it should work.

# tfs - TFS 2012 - 创建一个登台，然后发布工作流

> ID：11504775
> 
> 赞同：2
> 
> 时间：2012-07-16T12:55:38.763
> 
> 标签：tfs, build-process, tfsbuild, visual-studio-2012

我最近在安装 IIS 7.5 的同一台服务器上安装了 TFS 2012。我的问题是，使用 VS 2012 我可以成功签入/签出并构建到 Staging (staging.domain.com) 站点......但是我如何以神圣的名义创建构建/发布到发布的能力(domain.com) 站点，一旦临时站点上的更改获得批准？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:20:29.690

您可以直接使用 MSDeploy 或发布配置文件来指定目标。我会选择前者，在您的 TFS 团队构建中创建 MSDeploy 包。您可以通过以下选项在 TFS 中构建包：

1.  添加`/p:DeployOnBuild=true`到您的构建定义 MSBuild 参数。这应该为放置位置中的每个配置创建一个包。
2.  调用`MSBuild /t:package`自定义的构建过程模板。这将导致项目在放置位置被构建和打包

无论哪种情况，您都可以为每个环境自定义包参数。我在[这里](http://cromwellhaus.com/2012/05/build-once-msdeploy-all-over-the-place/)有更详细的步骤，虽然它不包括 TFS 集成。

# php - PHP 错误消息类似于 Undefined index: RadioGroup1 in C:\wamp\www\TEMPLATE\fileDisposalResults.php 第 4 行

> ID：11504779
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:55:45.080
> 
> 标签：php

我从单选组中选择一个单选按钮..但是当我单击该按钮时，它会收到类似这样的错误 Undefined index: RadioGroup1 in C:\wamp\www\TEMPLATE\fileDisposalResults.php on line 3

```
if(isset($_POST['h1'])  &&  $_POST['h1']=='h1' )
{ //Posting from a hiddne field
    $selected_radio="";
    $selected_radio = $_POST['RadioGroup1'];    
    if ($selected_radio == 'radioDelete') 
    {
        if (isset($_POST['checkbox']))
        {
            $check_ids = $_POST['checkbox'];
            if (is_array($check_ids) && count($check_ids) > 0)
            {
                // $sql="DELETE FROM retained_file_mst  WHERE file_serial_id  IN(".implode(',', $check_ids).")";
                // mysql_query($sql,$conn);
                echo "yesssssssssssssssssssssssssssssss";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:01:22.137

调试表单时总是从以下内容开始：

```
echo "<pre>";
var_dump($_POST);
echo "</pre>";
exit; 
```

没有魔法。

$_POST 是一个超全局变量，包含浏览器发送的内容（假设您使用了 METHOD="POST"）。

只需检查其内容。在 90% 的情况下，您不需要我们。;-)

# c++ - C++ void* 到 int* - 获取 int* 指向的 int

> ID：11504785
> 
> 赞同：0
> 
> 时间：2012-07-16T12:55:57.420
> 
> 标签：c++, pointers, void-pointers

这个问题之前可能已经回答过，但是经过两天的搜索，我找不到解决方案。

我制作了一个堆栈类，其中存储`__data`：

```
class __data
{
private:
    void* __p;
    __datatype __type;

public:
    __data(void);
    __data(int i);
    __data(double d);
    __data(char* s);
    __data(void (*f)(Stack));

    bool IsFunction(void);
    bool IsInteger(void);
    bool IsNumber(void);
    bool IsString(void);

    void* Get(void);
}; 
```

我创建了这个类，因为堆栈将能够存储字符串、函数（指向函数的指针）、双精度数和整数。

问题是当我将整数或双精度压入堆栈然后弹出它并获取指向数据的指针（`void* Get(void)`）时，我通过打印出它的值来调试它，因此我基本上有这个：

```
void print(Stack s)
{
    __data d = s.Pop();

    if (d.IsNumber()) // BUG: never the number I pass to __data
        std::cout << "IsNumber - " << *((double*)d.Get()) << std::endl;
    else if (d.IsInteger()) // BUG: it always prints out 1
        std::cout << "IsInteger - " << *((int*)d.Get()) << std::endl; // 
    else if (d.IsString())
        std::cout << "IsString - " << (char*)d.Get() << std::endl;
    else if (d.IsFunction())
    {
        std::cout << "IsFunction - " << d.Get() << std::endl;
        ((void (*)(Stack))d.Get())(s); // calls the function
    }
} 
```

我不知道可能出了什么问题，也许是我分配的方式`__p`（返回的指针`Get()`），这些是`__data`整数和双精度的构造函数：

```
__data::__data(int i)
{
    __type = _dt_integer;
    __p = &i;
}
__data::__data(double d)
{
    __type = _dt_number;
    __p = &d;
} 
```

所以基本上我的问题是当我尝试获取返回的整数或双精度时，`void*`它要么给我一个`1`（整数）或`2.13171e-314`（双精度）值。

感谢您抽出宝贵的时间，如果已经有答案，我们很抱歉。

**编辑：**

我将重写 Stack 类并改用联合。这似乎是实现我的目标的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:59:36.577

```
__data::__data(int i)
{
    __type = _dt_integer;
    __p = &i; // this only stores the address of i on the stack
} 
```

你需要的是

```
__data::__data(int* i) // have the caller pass the address of their i
{
    __type = _dt_integer;
    __p = i; // this stores what you need
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:01:10.227

您的问题是您保存了临时对象的地址。例如：在本例中，您保存临时的地址`double d`。

```
__data::__data(double d)
{
    __type = _dt_number;
    __p = &d;
} 
```

该对象仅存在于当前范围（函数）中，之后该地址将无用，因为它很可能被堆栈中的其他内容覆盖。

我建议的解决方案是制作一个动态分配的副本：

```
__data::__data(double d)
{
    __type = _dt_number;
    __p = new double(d);
} 
```

这将创建一个对象，该对象将一直存在，直到您手动释放指针`delete`。您应该在以下析构函数中执行以下操作`__data`：

```
__data::~__data()
{
    delete __p;
} 
```

更新：我强烈建议您不要`char *`用作字符串类型，而是使用 C++ 等效的`std::string`. 您也可以查看 library [`boost::any`](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)，它基本上与您想要实现的功能相同，但使用模板代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:02:29.380

```
__data::__data(int i) 
{
    __type = _dt_integer;
    __p = &i; 
}
__data::__data(double d) 
{
    __type = _dt_number;
    __p = &d; 
} 
```

因为你得到一个指向局部变量的指针

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T13:04:29.327

```
__data::__data(int i)
{
    __type = _dt_integer;
    __p = &i;
} 
```

你不能那样做！函数返回后该变量`i`不存在，因此任何指向它的指针都将包含垃圾。您必须将*值*存储在`i`您的`__data`类中，而不是其地址。您（至少）有两种方法：使用多态性（`__data`为每种数据类型定义一个子类），或在内部声明一个联合`__data`，其中包含您支持的每种数据类型的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T13:08:58.693

变量 i 和 d 仅在函数 __data(int i)、__data(double d) 的生命周期内有效。我的意思是这些变量被创建到当前堆栈中并在退出函数时被删除，因此您存储一个指向变量的指针，该指针在程序运行的整个过程中都将无效。调用 Get 函数时，您会访问一个指向“死”变量的指针。

您应该将这些成员添加到您的班级。

```
class __data
{
private:
  int iInt;
  double dDouble;
} 
```

并修改您的函数...以存储值而不是地址...

```
__data::__data(int i)
{
    __type = _dt_integer;
    iInt = i;
}
__data::__data(double d)
{
    __type = _dt_number;
    dDouble = d;
} 
```

不要忘记修改 Get 函数。

```
void* __data::Get()
{
  switch( __type )
  {
    case _dt_integer:
      return (void*)iInt;
      break;
    case _dt_number:
      return (void*)dDouble;
      break;
  }

  return (void*)0;
} 
```

那么你可以如下使用它。

```
cout << "Int value " << (int)d.Get();
cout << "double value " << (double)d.Get(); 
```

这是一种做你想做的事但唯一的方法！您可以使用联合成员来存储值，以节省内存使用量。

# actionscript - 将其他 Haarcascade xml 与 Marilena 一起使用

> ID：11504786
> 
> 赞同：3
> 
> 时间：2012-07-16T12:55:58.543
> 
> 标签：actionscript, opencv, face-detection

我使用过 OpenCV，并且能够轻松使用人脸检测、上身检测等。

我还使用了将 Haarcascade XML 文件移植到 AS 的 Marilena 项目（Open CV port for Actionscript）。这也可以正常工作。

现在，我想做的是 - 使用 Actionscript 进行上身检测。所以，我想在 Marilena 中使用 OpenCV 的 XML - 为此，XML 应该被翻译成 Marilena 的格式。我能够使用我在[Stackoverflow](https://stackoverflow.com/questions/2957236/haars-cascade-for-actionscript-development)上找到的解决方案之一来实现这种翻译。

但是，当我复制这个生成的代码并运行我的程序时，检测并没有按预期发生。它导致在某个随机位置出现块，即误报。当我尝试将 OpenCV 的人脸检测 XML 转换为 Marilena 时，它再次失败了。当我使用 Marilena 的原始代码时，它又可以工作了。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:25:05.873

看起来 Marilena 使用的 .xml 文件与 OpenCV 一样。您是否尝试运行他们提供的示例，但用您自己的替换他们的 .xml 文件？我看不到他们要求您将 haar 文件移植到 actionscript 的任何地方。

# c# - 每页项目，asp.net 3.5，c#，GridView

> ID：11504790
> 
> 赞同：0
> 
> 时间：2012-07-16T12:56:10.967
> 
> 标签：c#, asp.net-3.5

我正在尝试扩展我们的 Gridview 的 Paging 属性，以允许用户通过单击相应的文本链接来选择他们希望每页看到多少项目；即 25 | 50 | 75 | 100\. page属性在后面的代码中设置如下：

```
 /// <summary>
    /// Gets or sets the number of items displayed on a result page.
    /// </summary>
    #region  PageSize;
    [Bindable(true),
    Category("Paging"),
    Description("Paging Size"),
    NotifyParentProperty(true)]
    public virtual int PageSize
    {
        get
        {
            return (ViewState["PageSize"] == null) ? 25 : (int)ViewState["PageSize"];
        }

        set
        {
            //return ((int)ViewState["LastPage"]);
            ViewState["PageSize"] = value;
        }
     } 
```

这些事件是：

```
 /// <exclude/>
    /// <summary>
    /// Click event on '25' paging text link
    /// </summary>
    /// <param name="sender">Sender</param>
    /// <param name="e">EventArgs</param>
    protected virtual void PageSize25_Click(object sender, EventArgs e)
    {
        // ToDo: Pass new page size 25 to click event
        // Bind data to new page size
        // ViewState["PageSize"] = 25;
    }

    /// <exclude/>
    /// <summary>
    /// Click event on '50' paging text link
    /// </summary>
    /// <param name="sender">Sender</param>
    /// <param name="e">EventArgs</param>
    protected virtual void PageSize50_Click(object sender, EventArgs e)
    {
        // ToDo: Pass new page size 50 to click event
        // Bind data to new page size 
        // ViewState["PageSize"] = 50;
    }

    /// <exclude/>
    /// <summary>
    /// Click event on '75' paging text link
    /// </summary>
    /// <param name="sender">Sender</param>
    /// <param name="e">EventArgs</param>
    protected virtual void PageSize75_Click(object sender, EventArgs e)
    {
        // ToDo: Pass new page size 75 to click event
        // Bind data to new page size            

    }

    /// <exclude/>
    /// <summary>
    /// Click event on '100' paging text link
    /// </summary>
    /// <param name="sender">Sender</param>
    /// <param name="e">EventArgs</param>
    protected virtual void PageSize100_Click(object sender, EventArgs e)
    {
        // ToDo: Pass new page size 100 to click event
        // Bind data to new page size     

    } 
```

我不知何故需要将每个文本链接的值 (25 | 50 | 75 | 100) 传递给 PageSize 属性。

谢谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:05:57.900

首先，由于您正在做同样的事情，您只是使用不同的参数（页面大小），我将创建一个事件来处理它，并让您的所有 LinkBut​​tons 使用 CommandArgument 集调用该事件：

html端：

```
<asp:LinkButton ID="lnkPageSize75" runat="server" CommandArgument="75" Text="75" OnClick="PageSize_Click" /> 
```

代码背后：

```
protected virtual void PageSize_Click(object sender, EventArgs e)
{
    LinkButton lnk = (LinkButton)sender;
    ViewState["PageSize"] = Convert.ToInt32(lnk.CommandArgument);

    BindGridView();        
}

private void BindGridView()
{
    // Treat as psuedo-code. May take some tweaking with casting.
    myGridView.PageSize = ViewState["PageSize"]; 
    MyDataType data = MyDataLayer.GetData();
    myGridView.DataBind();        
} 
```

# speech-recognition - Setting up Cairo Project

> ID：11504804
> 
> 赞同：-1
> 
> 时间：2012-07-16T12:56:41.630
> 
> 标签：speech-recognition, cairo

I am trying to set up the Cairo-0.3 project and my rserver.sh, receiver.sh and transmitter.sh are successfully running but when i try to run execute the demo-recog.sh (A demo program in cairo) i get :

```
Received an unhandled SIP response status code (ignoring it): 183 : Session progress

2012-07-16 18:01:31,931 INFO  {main} org.speechforge.cairo.demo.recog.RecognitionClient
 Received the SIP Response.  
2012-07-16 18:01:31,931 INFO  {main} org.speechforge.cairo.demo.recog.RecognitionClient  
  invite : org.speechforge.cairo.sip.SdpMessage@1e61363  
java.lang.NullPointerException  
2012-07-16 18:01:32,067 WARN  {Thread-7} org.speechforge.cairo.rtp.RTPPlayer  
 playSource(): encountered unexpected exception:    
javax.media.NoDataSourceException: Error instantiating class:   com.sun.media.protocol.dsound.DataSource : java.lang.NullPointerException  
    at javax.media.Manager.createDataSource(Manager.java:1012)  
    at org.speechforge.cairo.rtp.RTPPlayer.playSource(RTPPlayer.java:110)  
    at org.speechforge.cairo.rtp.NativeMediaClient$TransmitThread.run(NativeMediaClient.java:105)
 Exception in thread "Thread-7" java.lang.RuntimeException: playSource() encountered unexpected exception  
    at org.speechforge.cairo.rtp.RTPPlayer.playSource(RTPPlayer.java:153)  
    at org.speechforge.cairo.rtp.NativeMediaClient$TransmitThread.run(NativeMediaClient.java:105)
Caused by: javax.media.NoDataSourceException: Error instantiating class:   com.sun.media.protocol.dsound.DataSource : java.lang.NullPointerException  
    at javax.media.Manager.createDataSource(Manager.java:1012)  
    at org.speechforge.cairo.rtp.RTPPlayer.playSource(RTPPlayer.java:110)  
    ... 1 more  
2012-07-16 18:01:42,085 WARN  {main} org.speechforge.cairo.demo.recog.RecognitionClient
 org.mrcp4j.client.MrcpInvocationException: MRCP response contains an error code, the request invocation did not complete successfully.

org.mrcp4j.client.MrcpInvocationException: MRCP response contains an error code, the request invocation did not complete successfully.  
    at org.mrcp4j.client.MrcpChannel.sendRequest(MrcpChannel.java:143)
    at   org.speechforge.cairo.demo.recog.RecognitionClient.doRecognize(RecognitionClient.java:163)
    at   org.speechforge.cairo.demo.recog.RecognitionClient.main(RecognitionClient.java:346)

2012-07-16 18:01:42,091 INFO  {main} org.speechforge.cairo.sip.SimpleSipAgent
 Sent a SIP BYE. 
```

I am not able to understand what i am doing wrong here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:54:16.070

您需要安装和配置 Java Media Framework 才能运行此软件。请参阅 README 中的安装说明：

> ## 安装
> 
> 1.  解压 Cairo 要安装 Cairo，将二进制分发存档中的所有文件解压缩到您的 ch 目录
> 2.  下载并安装 JMF 2.1.1 Cairo 需要 Java Media Framework (JMF) 版本 2.1.1。可在此处下载：http:
>     [//java.sun.com/products/java-media/jmf/2.1.1/download.html](http://java.sun.com/products/java-media/jmf/2.1.1/download.html)
>     下载并运行与您的特定操作系统对应的 JMF 安装程序。这将

# objective-c - Objective C: AVFoundation Recording Issue..

> ID：11504807
> 
> 赞同：1
> 
> 时间：2012-07-16T12:56:55.300
> 
> 标签：objective-c, ios5, avfoundation

Sir, What do you think the error of my Code.. because i cant record a Audio. can you help me in my project? i want to make a simple Recording Project. with three Buttons (PLAY, STOP, RECORD)...by the way i didnt use the nib file. im newbie in Objective-C my approach is purely Programmatically..Thanks in advance more power..

and this is my code in viewDidLoad()

```
-(void)viewDidLoad
{
    [super viewDidLoad];{
        playButton.enabled = NO;
    stopButton.enabled = NO;

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];

    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *recordSettings = [NSDictionary 
                                    dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:AVAudioQualityMin],
                                    AVEncoderAudioQualityKey,
                                    [NSNumber numberWithInt:16], 
                                    AVEncoderBitRateKey,
                                    [NSNumber numberWithInt: 2], 
                                    AVNumberOfChannelsKey,
                                    [NSNumber numberWithFloat:44100.0], 
                                    AVSampleRateKey,
                                    nil];

    NSError *error = nil;

    audioRecorder = [[AVAudioRecorder alloc]initWithURL:soundFileURL settings:recordSettings error:&error];

    if (error)
    {
        NSLog(@"error: %@", [error localizedDescription]);

    }
    else 
    {
        [audioRecorder prepareToRecord];
    }

}

-(void) recordButton:(UIButton *)sender
{
        if (!audioRecorder.recording)
        {

            playButton.enabled = NO;
            stopButton.enabled = YES;
            [audioRecorder record];
             NSLog(@"Record");
        }
}

-(void)stop:(UIButton *)sender
{
        stopButton.enabled = NO;
        playButton.enabled = YES;
        recordButton.enabled = YES;

        if (audioRecorder.recording)
        {
            [audioRecorder stop];
            NSLog(@"Stop");
        } 
        else if (audioPlayer.playing) 
        {
            [audioPlayer stop];
        }
}

-(void) playAudio:(UIButton *)sender
{
    NSError *error;
        if (!audioRecorder.recording)
        {
            stopButton.enabled = YES;
            recordButton.enabled = NO;
             NSLog(@"Play");
            if (audioPlayer)
            {

            audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioRecorder.url error:&error];

            audioPlayer.delegate = self;
            }
            if (error)

            { NSLog(@"Error: %@", 
                      [error localizedDescription]);
            }
            else
                [audioPlayer play];
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:08:07.630

Apple 提供了一个名为的示例应用程序`SpeakHere`，它将极大地帮助您使用音频文件服务来创建、录制到`CAF`（核心音频格式）音频文件并从中读取。

您可以在 Apple 的开发者网站上找到[它](https://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007802)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:26:42.240

首先，将代码从 viewDidLoad 移到 viewDidAppear 或函数调用。接下来，阅读有关 AVAudioSession 的信息。简而言之，当您将分别录制或播放时，您希望将其类别更改为 AVAudioSessionCategoryRecord 或 AVAudioSessionCategoryPlay。

```
- (void)beginRecording {

  AVAudioSession *audioSession = [AVAudioSession sharedInstance];
  NSError *err = nil;
  [audioSession setCategory:AVAudioSessionCategoryRecord error:&err];
  if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
  }
  err = nil;
  [audioSession setActive:YES error:&err];
  if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
  }
  if (audioSession.inputIsAvailable) {
    if ([audioRecorder prepareToRecord]) {
      [audioRecorder record];
    }
    else {
      UIAlertView *alert =
      [[UIAlertView alloc] initWithTitle:@"Error!"
                                 message:@"Could not begin recording"
                                delegate:nil
                       cancelButtonTitle:@"OK"
                       otherButtonTitles:nil];
      [alert show];
      [alert release];
    }
  }
}

- (void)stopRecording {
  [audioRecorder stop];
} 
```

这些是您开始录制所需的最低参数（至少它们对我有用，但您可以将质量设置为您想要的任何值，因为 AppleLoseless 重量很大，但请注意，最低质量是最糟糕的东西已知的星系）：

```
 NSMutableDictionary *settings = [[[NSMutableDictionary alloc] init] autorelease];
  [settings setValue:[NSNumber numberWithInt:kAudioFormatAppleLossless] forKey:AVFormatIDKey];
  [settings setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
  [settings setValue:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
  [settings setValue:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
  [settings setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
  [settings setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    NSURL *url = [NSURL fileURLWithPath:filePath];
    NSError *err = nil;
    self.audioRecorder = [[AVAudioRecorder alloc] initWithURL:url
                                                        settings:settings
                                                           error:&err];
    if(err){
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle:@"Warning"
                                   message:[err localizedDescription]
                                  delegate:nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        [alert release];
      } 
```

请注意，我完全无视内存管理，这篇文章不是内存管理指南。

# push-notification - GCM/APNS How are registration IDs generated

> ID：11504808
> 
> 赞同：6
> 
> 时间：2012-07-16T12:56:56.440
> 
> 标签：push-notification, apple-push-notifications, google-cloud-messaging

I am currently implementing a push notification server based on php that can manage multiple apps.

How is the **registration_id** for GCM generated. Is the registration id generated per device or per installation.

Example: I got 2 apps A and B.

When the device registers for A and B, do the installations have the same registration ids or is one id generated per installation.

The same question for iOS, one id per installation or device?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T02:10:06.227

**接入点**：

1.  如果我正确理解他们的文档，那么 deviceToken 对设备来说是唯一的。
2.  当应用程序请求向 APNS 注册自身时，iOS（或 Mac OSX >10.7）会请求它。
3.  deviceToken 基本上是一个加密的 deviceID 和可能的一些其他信息（不是特定于应用程序）。
4.  由此，我们可以很容易地看出，所有应用程序在设备上共享 deviceToken，卸载后重新安装不应更改 deviceToken。

您可以查看[官方 APNS 文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW12)以获取更多信息。

**GCM**：

1.  它是为每个应用程序的每个设备生成的。
2.  GCM 可能会定期刷新注册 ID。
3.  卸载和重新安装几乎总是给出不同的注册 ID。
4.  应用程序更新可能会导致发布新的注册 ID。

如果有人认为这是不正确的，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T17:17:30.383

您是否在此处浏览过 Google GCM 架构概述：http: [//developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)？

registration_id 由 Google GCM 服务器生成并返回给您。它是每个应用程序的每个设备。因此，如果您正在管理 2 个应用程序，并且一台设备同时安装了这两个应用程序，则每个应用程序都会获得自己唯一的registration_id。

Google GCM 不能用于 iOS，您需要通过 Apple 的推送通知服务器。而且我想它们具有相同的架构，即每个设备每个应用程序一个唯一的ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:28:57.800

对于 IOS，每个应用程序的每个设备都有一个唯一的 id，此外，对于应用程序沙盒版本和生产版本，您将有不同的 id。从您的第 3 方服务器到 google/ios 推送通知服务器的身份验证过程也存在很大差异。对于 GCM，所有应用程序只需要一个凭据，而对于 IOS，每个应用程序和每个沙盒/生产版本需要不同的凭据。

更多关于 IOS 推送通知的信息在这里：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1)

# android - 如何使用带有 android 2.3.3 的 MediaPlayer 进行 ShoutCast Streaming

> ID：11504809
> 
> 赞同：2
> 
> 时间：2012-07-16T12:57:00.513
> 
> 标签：android, stream, media-player, shoutcast

大家好，提前感谢，

我整天都在寻找论坛和互联网，对此我并不清楚。我不确定是否可以直接和简单的方式。我一直在阅读，自 2.2 以来它是本机支持的，但我没有看到和示例它在哪里可以轻松工作

首先，我在网上用一些 .mp3 进行了一些测试，这段代码运行良好：

```
mp = new MediaPlayer();
mp.setDataSource(localContext, Uri.parse(SomeURL.mp3));     
mp.prepare();
mp.start() 
```

但是现在....我必须重现 Stream 音频，并且我只获得了来自广播服务器的 ip 和端口，我正在尝试各种事情，但我总是在媒体播放器中遇到错误，典型的 (0, -38) 错误，一般。

```
mp = new MediaPlayer();
mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
//mp.setDataSource("http://xxx.xxx.xxx.xxx:xxxx");          
mp.setDataSource("http://xxx.xxx.xxx.xxx");
mp.prepareAsync();
mp.start()  --> it crashs here 
```

我不知道我是否做对了……我第一次遇到流问题……

是否有可能使它成为一种简单的方法？如果不是......有什么解决方案？

谢谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:01:03.240

经过两天的谷歌搜索，没有太多结果，我发现一个页面有很多公共流 url[链接](http://www.htcmania.com/showthread.php?t=46872)，我用原始代码和 windows 媒体播放器尝试了一些。几乎所有这些都不能在 wmp 上工作，但有些是可以的……所以我尝试了其中的一些，而带有链接的那些没有用……但是带有 ip+port 的那些是的！看来问题出在我用于测试的 ip+port 上……所以我的代码最后真的很简单……而且它适用于西班牙语收音机。

```
if(!mp.isPlaying()){
  try{
    mp = new MediaPlayer();
    mp.setOnPreparedListener(this);
    mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
    url="http://91.121.92.186:8060";
    mp.setDataSource(url);
    mp.prepareAsync();
  }catch(IOException e){
    e.printStrackTrace();
  }
}

@Override
public void onPrepared(MediaPlayer mp) {
    mp.start();//Cuando acaba de cargar inicia la reproducción
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T03:14:23.860

您提供的代码会崩溃，因为如果您使用“mp.prepareAsync();” 那么你不能“mp.start”你必须在准备好的监听器上使用“mp.setOnPreparedListener（new OnPreparedListener（）{

```
 @Override
                public void onPrepared(MediaPlayer arg0) {
                    // TODO Auto-generated method stub
                    mp.start();
                    }});" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:10:36.233

你为什么不看看：

[适用于 Android 的在线广播流媒体应用](https://stackoverflow.com/questions/6283568/online-radio-streaming-app-for-android)

或者

[http://code.google.com/p/rxwen-blog-stuff/source/browse/trunk/android/streaming_audio/](http://code.google.com/p/rxwen-blog-stuff/source/browse/trunk/android/streaming_audio/)

或许

[http://erkutaras.blogspot.fr/2011/08/stream-audio-from-url-example-android.html](http://erkutaras.blogspot.fr/2011/08/stream-audio-from-url-example-android.html)

告诉我们它是否有效

;-)

# c# - 如何捕获另一个进程的未处理异常？

> ID：11504817
> 
> 赞同：4
> 
> 时间：2012-07-16T12:57:24.177
> 
> 标签：c#, .net, windows

我想修改或只是加载一个 .NET 可执行文件，然后处理其未处理的异常。我的目标是制作一个可以发送堆栈跟踪的智能处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:02:51.037

您能否将程序集加载到单独的应用程序域中，然后订阅该应用程序域的未处理异常？

即这样的东西

[是否可以防止子 AppDomain 中的未处理异常导致主进程崩溃？](https://stackoverflow.com/questions/6520850/can-unhandled-exceptions-in-child-appdomains-be-prevented-from-crashing-the-main)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T13:03:08.303

假设另一个可执行文件是一个 .NET 应用程序，将它加载到一个新的应用程序中[`AppDomain`](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)并在那里运行它。当目标可执行文件引发异常时，您将获得[`AppDomain.FirstChanceException Event`](http://msdn.microsoft.com/en-us/library/system.appdomain.firstchanceexception.aspx).

# c# - 如何扫描文件夹和子文件夹中的所有文件？

> ID：11504821
> 
> 赞同：1
> 
> 时间：2012-07-16T12:57:31.247
> 
> 标签：c#

> **可能重复：**
> [如何递归列出 C# 目录中的所有文件？](https://stackoverflow.com/questions/929276/how-to-recursively-list-all-the-files-in-a-directory-in-c)

如何扫描文件夹和子文件夹中的所有文件？

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    folderBrowserDialog1.ShowDialog();
    label2.Text = folderBrowserDialog1.SelectedPath;
    viruses = 0;
    progressBar1.Value = 0;
    label1.Text+= viruses.ToString();
    listBox1.Items.Clear();
}

private void btnScan_Click_1(object sender, EventArgs e)
{

    List<string> search = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*").ToList();
    progressBar1.Maximum = search.Count;
    //foreach (Directory.GetDirectories.search))

    foreach(string item in search)
    {
        try
        {
            StreamReader stream = new StreamReader(item);
            string read = stream.ReadToEnd();
            foreach(string st in viruslist)
            {
                if(Regex.IsMatch(read,st));
                {
                    viruses+=1;
                    label1.Text+= listBox1.Items.Count;
                    listBox1.Items.Add(item);
                }
                progressBar1.Increment(1);
            }
        }
        catch(Exception ex)
        {
        }
    }
} 
```

此代码仅扫描根文件夹中的所有文件，而不扫描子文件夹中的所有文件。如何更改此代码以便它也可以扫描文件夹和子文件夹中的所有文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:00:44.217

由于您使用的是 Directory 类，因此只需在调用 GetFiles 时使用 SearchOption 参数，如下所示：

```
Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*",SearchOption.AllDirectories).ToList(); 
```

[链接到 MSDN](http://msdn.microsoft.com/en-us/library/ms143316.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:00:04.297

传给. `SearchOption.AllDirectories`_`GetFiles()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:00:34.300

请看`SearchOption`这里[http://msdn.microsoft.com/en-us/library/ms143448.aspx](http://msdn.microsoft.com/en-us/library/ms143448.aspx)

这使您能够：`Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*",SearchOption.AllDirectories);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:02:20.780

In the method Directory.GetFiles(...) you can provide a enum-value as third-parameter. The default here is just the top-directory. You can say to search in all subdirectories

# javascript - How to set and lock the CKEditor window size?

> ID：11504826
> 
> 赞同：4
> 
> 时间：2012-07-16T12:57:49.937
> 
> 标签：javascript, html, ckeditor

CKEditor creates a resizable window of some default size. Is it possible to set the window to my desired size and prevent it from being resized?

Styles do not work, including explicit style or rows attribute in the textarea tag.

jQuery also does not work (with it's height function).

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T20:28:40.793

使用这些配置设置：

起始高度和宽度：

```
config.height = '111px'; 
config.width = 111; 
```

* * *

CkEditor 窗口是否可调整大小：

```
config.resize_enabled = false; //false says not resizable 
```

* * *

您可以让它调整大小，但控制方向（垂直或水平）以及最小值和最大值。

```
config.resize_dir = 'vertical'; //Can use (both, vertical, and horizontal) 
```

高度：

```
config.resize_maxHeight = 111;
config.resize_minHeight = 111; 
```

宽度：

```
config.resize_maxWidth = 111;
config.resize_minWidth = 111; 
```

用于配置设置的 CkEditor API 在这里：
[CKEDITOR.config API](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html)

它告诉您每个设置的允许值和格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T13:26:27.597

您可以在启动时（仅）设置编辑器的高度和宽度 - 有配置选项`height`和`width`.

请参阅：[CKEditor & JavaScript - 在 CKEditor 中调整高度和宽度](https://stackoverflow.com/questions/4410939/ckediotr-javascript-adjust-height-and-width-in-ckeditor)

如果您想将高度（也可能还有宽度）设置为百分比，那么这个[CKEditor 3.0 高度可能会很有趣。](https://stackoverflow.com/questions/1546408/ckeditor-3-0-height)

**更新：**

巧合的是，我今天发现了这个：

```
/**
 * Resizes the editor interface.
 * @param {Number|String} width The new width. It can be an pixels integer or a
 *      CSS size value.
 * @param {Number|String} height The new height. It can be an pixels integer or
 *      a CSS size value.
 * @param {Boolean} [isContentHeight] Indicates that the provided height is to
 *      be applied to the editor contents space, not to the entire editor
 *      interface. Defaults to false.
 * @param {Boolean} [resizeInner] Indicates that the first inner interface
 *      element must receive the size, not the outer element. The default theme
 *      defines the interface inside a pair of span elements
 *      (&lt;span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/span&gt;). By default the
 *      first span element receives the sizes. If this parameter is set to
 *      true, the second span is sized instead.
 * @example
 * editor.resize( 900, 300 );
 * @example
 * editor.resize( '100%', 450, true );
 */
CKEDITOR.editor.prototype.resize = function( width, height, isContentHeight, resizeInner ) 
```

这意味着我认为编辑器的大小只能在启动时设置是不对的，但是它也不会为问题添加任何内容:)。

# knockout.js - knockoutjs - Computed Observable returns error

> ID：11504827
> 
> 赞同：0
> 
> 时间：2012-07-16T12:57:54.377
> 
> 标签：knockout.js, knockout-mapping-plugin

I'm retuning a JSON object from a web service and using knockout 2.01 to display the results. I'm able to display my results without an issue but as soon as I try to add a computed observable into the view model I get the error below.

What am I missing with this code below?

Uncaught TypeError: Object # has no method 'dateCreated'

!--- JSON

```
{"jobTitle":"Digital designer","dateCreated":"7/7/2012","timeCreated":"2:27    PM","location":"Perth","jobSummary":"one\ntwo\nthree","Uri":"/candidates/view-all-jobs/digital-designer/","CreateDate":"\/Date(1341635236000)\/"} 
```

!-- html

```
<div data-bind="foreach: $data">
 <article>
    <header>
      <time datetime="2007-08-29T13:58Z"></time>
      <h3><a target="_self" data-bind="text: $data.location"> </a> </h3>
    </header>
    <span data-bind="text: $data.fullDate">  </span> </article>
 </div> 
```

!-- code

```
var viewModel = ko.observableArray();

$(document).ready(function () {
    if ($('#featured-jobs').length > 0) {
        $.ajax({

            type: 'POST',

            url: "handler/jobServer.ashx",

            data: { 'jobType': '1' },

            success: OnComplete,

            error: OnFail,

            dataType: 'json'
        });
    }
});

function OnComplete(result) {

    var self = this;
    ko.mapping.fromJS(result, {}, viewModel);

    self.fullDate = ko.computed(
  function () {
     return self.dateCreated() + " " + self.timeCreated();
  }, self); 

    ko.applyBindings(new viewModel());

}

function OnFail(result) {

    alert('Request Failed');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:36:21.393

这是因为 onComplete 创建了一个名为的新对象`self`，它没有`dateCreated`属性。我认为你真正想要的是将计算的 observable 添加到`viewModel`.

**编辑：**

Observables 很棒，但有时它们不是答案（特别是如果一个值不太可能改变，就像我怀疑“创建日期”和“创建时间”的情况一样）。这就是我的做法（没有可观察的）。*请注意，您仍然可以绑定到不可观察的属性*：

```
function OnComplete(result) {

    for (var i = 0; i < result.length; i++)
    {
        result[i].fullDate = result[i].dateCreated + " " + result[i].timeCreated;
    }

    viewModel(result);
    ko.applyBindings(viewModel);
} 
```

如果我错了，并且用户将操纵这些值，您可以这样做（使用 observables）：

```
function OnComplete(result) {

    ko.mapping.fromJS(result, {}, viewModel);

    for (var i = 0; i < viewModel.length; i++)
    {
        viewModel[i].fullDate = ko.computed(
            function () {
                return this.dateCreated() + " " + this.timeCreated();
            }, viewModel[i]); 
    }

    ko.applyBindings(viewModel);
} 
```

# eclipse - What do you use for profiling in Eclipse, now that TPTP is going to be archived?

> ID：11504829
> 
> 赞同：13
> 
> 时间：2012-07-16T12:58:10.343
> 
> 标签：eclipse, profiler, eclipse-tptp

Have you found a good alternative to TPTP, which is being [archived](http://www.eclipse.org/tptp/home/project_info/devplans/EclipseTPTPProjectPlan2010.htm), to profile Java applications in Eclipse?

I understand this is not exactly a programming question, so please just drop me a message if this is not appropriate for Stack Overflow.

EDIT: There's also a relevant question, from 2008 [here](https://stackoverflow.com/questions/14762/please-recommend-a-java-profiler) but I was looking for something a little more updated.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T17:38:55.920

VisualVm, that comes with the JDK itself is good for some CPU and memory profiling, though, it doesn't integrate well with eclipse.

[YourKit](http://www.yourkit.com/) is a great profiling tool that integrates quite well with eclipse but its not free. You will need to buy a license for it.

[Eclipse Memory Analyzer (MAT)](http://www.eclipse.org/mat/) is another great tool that helps a lot in analyzing java heap dumps. It is perfect for pointing out any un-intentional memory leaks in a java application.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:13:01.570

它不是 eclipse 生态系统的一部分，但我使用过 JConsole。当前版本似乎运行良好。我考虑过一些商业工具，但对我来说，一旦我阅读了它的手册，JConsole 就完成了我需要它做的所有事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T10:27:23.297

我已经使用 JProfiler 多年（超过 8 年），这也是一个很棒的工具，而且占用空间非常小。

[https://www.ej-technologies.com/products/jprofiler/overview.html](https://www.ej-technologies.com/products/jprofiler/overview.html)

对我来说，TPTP 在大项目上完全没用（它没有工作并崩溃）

# java - JSONException when parse a valid Json

> ID：11504830
> 
> 赞同：0
> 
> 时间：2012-07-16T12:58:11.100
> 
> 标签：java, android, json

I try to parse this valid JSON

I use `new JSONObject(resultString);` but i have JSONException

How can i parse his Json

Help me please!

Thanks

```
[{
    "id": "8637F7F78C8C1",
    "from_account_id": "1025630",
    "to_account_id": "1025635",
    "transaction_type_id": "15",
    "transaction_mode_id": "2",
    "transaction_status_id": "1",
    "amount": "1000.00",
    "real_amount": "1000.00",
    "promote_amount": "0.00",
    "from_fix_fee_amount": "0.00",
    "from_percent_fee_amount": "50.00",
    "to_fix_fee_amount": "0.00",
    "to_percent_fee_amount": "0.00",
    "description": "demo",
    "created_on": "2012-07-16 10:04:29",
    "activated_on": "0000-00-00 00:00:00",
    "executed_on": "0000-00-00 00:00:00",
    "verify_transaction_by": "o",
    "from_account_name": "xxxxxxxxxxxx",
    "from_account_email": "xxxxxxx@gmail.com",
    "from_account_phone_no": "xxcxxxxxx",
    "to_account_name": "yyyyyyy",
    "to_account_email": "yyyyy@gmail.com",
    "to_account_phone_no": "yyyyyyyy"
},
{
    "id": "A26BF7F75534B",
    "from_account_id": "1014635",
    "to_account_id": "1054630",
    "transaction_type_id": "5",
    "transaction_mode_id": "2",
    "transaction_status_id": "4",
    "amount": "1000.00",
    "real_amount": "1000.00",
    "promote_amount": "0.00",
    "from_fix_fee_amount": "0.00",
    "from_percent_fee_amount": "0.00",
    "to_fix_fee_amount": "0.00",
    "to_percent_fee_amount": "0.00",
    "description": "",
    "created_on": "2012-07-15 00:52:40",
    "activated_on": "2012-07-15 00:53:19",
    "executed_on": "2012-07-15 00:54:57",
    "verify_transaction_by": "o",
    "from_account_name": "yyyyyy",
    "from_account_email": "yyyyyy@gmail.com",
    "from_account_phone_no": "yyyyyyy",
    "to_account_name": "wwwwwww",
    "to_account_email": "yywywyyy@gmail.com",
    "to_account_phone_no": "yyyyyyyyy"
}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:00:08.227

它`JSONArray`不是一个`JSONObject`..
[Android/Java 中的 JSON 数组迭代](https://stackoverflow.com/questions/3408985/json-array-iteration-in-android-java)

```
JSONArray values = new JSONArray(resultString);
for(int i = 0 ; i < values.length(); i++){
    JSONObject object = (JSONObject) values.get(i); 
    String id = object.getString("id");
    //the same for the rest
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:00:39.853

这不是 JSON 对象——它是一个包含两个对象的 JSON 数组。

先使用`new JSONArray(resultString);`然后从中获取对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:05:17.387

Hi [] 表示 JSON 中的数组，因此在解析后尝试将其放入 JSONArray...`new JSONArray(resultString).getJSONObject(int index);`

通过这种方式，您可以获得 JSON 对象..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T13:06:37.893

为了解析 JSON，我使用[了 GSON](http://code.google.com/p/google-gson/)。

```
JsonElement jelement = new JsonParser().parse("json text"); 
```

> JsonArray 数组 = jobject.getAsJsonArray("myarray");
> for (JsonElement item : array) {...}

# lwuit - N8 touch scroll lwuit

> ID：11504831
> 
> 赞同：0
> 
> 时间：2012-07-16T12:58:12.290
> 
> 标签：lwuit

I develop with lwuit to Nokia and Blackberry.

I have a problem with touch scrolling in the device N8. The scroll is terrible. Its jump to the end of the list any time that i use in the scroll and also the focus on the cells don't active to the scroll.

In the device Nokia c3 i don't have this problem.

do anyone recognize this problem?

it is solution to this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:00:01.767

这个问题通常是由糟糕的性能触发的，S60 比 S40 慢得多，因此处理触摸行为的代码只是错误地计算了手势的速度。

[代号一](http://www.codenameone.com/developer-guide.html)的开发者指南包含不少适用于 S60 的性能提示。其中一些修复（例如 9 部分边框大小）已经内置到 Codename One 的设计器中。Codename One 还具有内置的 UI 速度测量工具，因此您最好移植到 Codename One，而不是继续使用 LWUIT。

# xaml - How can I use both image and color brush in xaml rectangle

> ID：11504837
> 
> 赞同：2
> 
> 时间：2012-07-16T12:58:34.580
> 
> 标签：xaml

```
`<Rectangle Uid="a8" Grid.Row="0" Grid.Column="1">
        <Rectangle.Fill>
            <ImageBrush ImageSource="/Chess;component/Images/blackRook.bmp"></ImageBrush>
            <SolidColorBrush></SolidColorBrush>
        </Rectangle.Fill>
    </Rectangle>` 
```

SolidColorBrush is having blue underline with message "Fill property is set more than once"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:57:41.343

不幸的是，Fill 属性一次只能填充一个画笔。请参阅此处的文档；[http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.fill%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.fill%28v=vs.95%29.aspx)

一个快速且相对简单的解决方法是将您的 Rectangle 嵌入到边框控件中以获得您想要的效果。所以像;

```
<Border Grid.Column="1">
  <Border.Background>
    <SolidorLinearGradientBrush/>
  </Border.Background>
   <Rectangle Uid="a8">
     <Rectangle.Fill>
        <ImageBrush ImageSource="/Chess;component/Images/blackRook.bmp"/>
     </Rectangle.Fill>
   </Rectangle>
</Border> 
```

希望这会有所帮助，干杯！

# c - Which is the fastest way to fill an array in C?

> ID：11504838
> 
> 赞同：0
> 
> 时间：2012-07-16T12:58:40.790
> 
> 标签：c, arrays, pointers

I have a function which will be called many times throughout my code. This function updates 2 values(passed as argument) in an array. Since it is called too many times, I want this function optimized.

Yes I do have a simplest code to do that,

```
int global_array[MAX];
int * ptr_to_my_global_array = &global_array[0];

main()
{
  int a=0,b=0;

  my_func(a,b);
  a++;b++;
  my_func(a,b);
  a++;b++;
  my_func(a,b);
  a++;b++;
  my_func(a,b);
  a++;b++;
  my_func(a,b);
  a++;b++;
  //and so on
}

void my_func(int c,int d)
{

   *ptr_to_my_global_array = c;
   ptr_to_my_global_array++;
   *ptr_to_my_global_array = d;
   ptr_to_my_global_array++;

} 
```

Please do not suggest any mem_copy,mem_set solutions. There may be no other solution, but was just curious if I could make this faster.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:06:54.913

使用宏而不是函数调用，这可能会减少调用函数的开销。但是，您可能会发现编译器优化已经这样做了。

基准测试和测试:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:25:58.733

如果您正在测试不同的东西，您可以将其与以下内容进行比较：

```
inline void my_func(int c,int d)
{
ptr_to_my_global_array[0] = c;
ptr_to_my_global_array[1] = d;
ptr_to_my_global_array += 2;
} 
```

优化器可能会将事情整理出来，以便两者之间没有区别，但您不妨看看它对发出的代码有什么区别（如果有的话）。

基本上，您的函数非常简单，以至于很难看出人类如何比优化器做得更好。因此，对您的程序的任何真正改进都需要在`main`而不是在`my_func`.

# wordpress - 基于自定义字段创建单独的导航

> ID：11504839
> 
> 赞同：0
> 
> 时间：2012-07-16T12:58:42.193
> 
> 标签：wordpress, wordpress-theming

我们有一组页面不会出现在主导航菜单中，但需要作为下拉跳转菜单呈现在单个页面上。我选择这种方法是为了让实习生“保持简单”，因为他只需要创建图库、添加页面、插入简码和自定义字段。我也在使用这种方法，以便下拉列表是动态的，并且可以即时容纳添加的页面。

在模板页面上，我添加了以下代码：

```
<div id="right_side_nav">
<?php  
    $media_artists = $wpdb->get_results("SELECT post_id, meta_value FROM wp_postmeta WHERE meta_key = 'Media_Room_Title' ORDER BY 'meta_value'");
    foreach( $media_artists as $arty ):         
        echo $arty->meta_value . " ( " . $arty->post_id . " )<br><br>";     
    endforeach; ?> 
</div> <!-- END right_side_nav --> 
```

到目前为止，一切都很好。我得到了列表，并且随着添加了具有正确自定义字段的另一个页面，列表会动态添加它。

我的问题...如何使用 post_id 创建锚标记？

我在 Codex 中查找基于 post_id 的页面/帖子的路径，但一切似乎都是关于在更改默认结构后重定向页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:44:39.090

知道了。

```
<div id="right_side_nav">
<?php 
    $media_artists = $wpdb->get_results("SELECT post_id, meta_value FROM wp_postmeta WHERE meta_key = 'Media_Room_Title' ORDER BY 'meta_value'");

    foreach( $media_artists as $arty ):
        echo "<a href='" . get_permalink($arty->post_id) . "'>";
        echo $arty->meta_value . " ( " . $arty->post_id . " )</a><br><br>";
    endforeach;
?>
</div> <!-- END right_side_nav --> 
```

# ios - 从 UTC-5 时区日期和时间 iPhone 应用程序获取当前 iPhone 设备时区日期和时间？

> ID：11504843
> 
> 赞同：34
> 
> 时间：2012-07-16T12:59:00.053
> 
> 标签：ios, objective-c, swift, nsdate, nsdateformatter

在我的 iPhone 应用程序中，我很难将 web 服务响应时间转换为当前设备时间。`webservice time in UTC-5 timezone`。_ 该应用程序是全球使用的应用程序。所以我必须将响应时间转换为当前设备时区。这是一个简单的消息应用程序。

当我发送了一个`message the time is "5:05 PM" (India Chennai timezone)`但当我**从`webservice is "2012-07-16 07:33:01"`**. 当我在应用程序中显示时间时，我应该将时间转换为设备的本地时间。我已经尝试过某种方式，但我还不能解决。代码是：

```
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init]; 
[dateFormatter1 setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
[dateFormatter1 setLocale:[NSLocale currentLocale]];
//[dateFormatter1 setTimeZone:[NSTimeZone timeZoneWithName:@"IST"]];
[dateFormatters setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *date = [dateFormatter1 dateFromString:dateStr];
NSLog(@"date : %@",date); 
```

但是输出日期和时间是`2012-07-16 02:03:01 +0000`我已经存储了这个日期/时间`Coredata`，当我从下面的代码中检索`CoreData`和隐藏时，`NSString`

```
NSDateFormatter *dateFormatters = [[NSDateFormatter alloc] init];
[dateFormatters setDateFormat:@"dd-MMM-yyyy hh:mm"];
[dateFormatters setDateStyle:NSDateFormatterShortStyle];
[dateFormatters setTimeStyle:NSDateFormatterShortStyle];
[dateFormatters setDoesRelativeDateFormatting:YES];
[dateFormatters setTimeZone:[NSTimeZone systemTimeZone]];  
dateStr = [dateFormatters stringFromDate:dateString];
NSLog(@"DateString : %@", dateStr); 
```

输出日期和时间为“ `Today 7:33 AM`”。它应该显示“ `Today 5:05 PM`”。谁能拯救我的一天？请帮助解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-17T12:38:12.620

我已经测试了您的场景并添加了一些代码供您参考。请测试以下内容，请让我知道它对您有用。

```
NSString *dateStr = @"2012-07-16 07:33:01";
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init]; 
[dateFormatter1 setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
NSDate *date = [dateFormatter1 dateFromString:dateStr];
NSLog(@"date : %@",date);

NSTimeZone *currentTimeZone = [NSTimeZone localTimeZone];
NSTimeZone *utcTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"UTC"];

NSInteger currentGMTOffset = [currentTimeZone secondsFromGMTForDate:date];
NSInteger gmtOffset = [utcTimeZone secondsFromGMTForDate:date];
NSTimeInterval gmtInterval = currentGMTOffset - gmtOffset;

NSDate *destinationDate = [[[NSDate alloc] initWithTimeInterval:gmtInterval sinceDate:date] autorelease];

NSDateFormatter *dateFormatters = [[NSDateFormatter alloc] init];
[dateFormatters setDateFormat:@"dd-MMM-yyyy hh:mm"];
[dateFormatters setDateStyle:NSDateFormatterShortStyle];
[dateFormatters setTimeStyle:NSDateFormatterShortStyle];
[dateFormatters setDoesRelativeDateFormatting:YES];
[dateFormatters setTimeZone:[NSTimeZone systemTimeZone]];  
dateStr = [dateFormatters stringFromDate: destinationDate];
NSLog(@"DateString : %@", dateStr); 
```

谢谢。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-29T11:20:12.190

```
NSDate* currentDate = [NSDate date];

NSTimeZone* CurrentTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* SystemTimeZone = [NSTimeZone systemTimeZone];

NSInteger currentGMTOffset = [CurrentTimeZone secondsFromGMTForDate:currentDate];
NSInteger SystemGMTOffset = [SystemTimeZone secondsFromGMTForDate:currentDate];
NSTimeInterval interval = SystemGMTOffset - currentGMTOffset;

NSDate* TodayDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:currentDate];
NSLog(@"Current time zone Today Date : %@", TodayDate); 
```

斯威夫特 4

```
var currentDate = Date()
var CurrentTimeZone = NSTimeZone(abbreviation: "GMT")
var SystemTimeZone = NSTimeZone.system as NSTimeZone
var currentGMTOffset: Int? = CurrentTimeZone?.secondsFromGMT(for: currentDate)
var SystemGMTOffset: Int = SystemTimeZone.secondsFromGMT(for: currentDate)
var interval = TimeInterval((SystemGMTOffset - currentGMTOffset!))
var TodayDate = Date(timeInterval: interval, since: currentDate)
print("Current time zone Today Date : \(TodayDate)") 
```

希望对其他开发者有所帮助！快乐编码！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-19T13:26:39.380

愿这个扩展会更容易。

**Swift 4**：UTC/GMT ⟺ 本地（当前/系统）

```
extension Date {

    // Convert local time to UTC (or GMT)
    func toGlobalTime() -> Date {
        let timezone = TimeZone.current
        let seconds = -TimeInterval(timezone.secondsFromGMT(for: self))
        return Date(timeInterval: seconds, since: self)
    }

    // Convert UTC (or GMT) to local time
    func toLocalTime() -> Date {
        let timezone = TimeZone.current
        let seconds = TimeInterval(timezone.secondsFromGMT(for: self))
        return Date(timeInterval: seconds, since: self)
    }

}

// Try it
let utcDate = Date().toGlobalTime()
let localDate = utcDate.toLocalTime()

print("utcDate - (utcDate)")
print("localDate - (localDate)") 
```

# c - c 前向声明（像 c++ 一样尝试过，但没有用）

> ID：11504845
> 
> 赞同：0
> 
> 时间：2012-07-16T12:59:12.143
> 
> 标签：c, forward-declaration

啊

```
#ifndef A
#define A

#include "B.h"

typedef struct {
    B* b;
} A;
void InitA(A* a) {
    a->b=malloc(sizeof(B));
}

#endif 
```

溴化氢

```
#ifndef B
#define B

#include "A.h"

typedef struct {
    A* a;
} B;
void InitB(B* b) {
    b->a=malloc(sizeof(A));
}

#endif 
```

我试过这样，比如 c++ 和 typedef。typedef 在类型之间产生冲突错误，并且之前的声明在这里等等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:49:46.380

这是修复它的一种方法：

啊：

```
#ifndef A_H_
#define A_H_

typedef struct A
{
  struct B* b;
} A;

#include "b.h"

void InitA(A* a)
{
  a->b = malloc(sizeof(B));
}

#endif 
```

:

```
#ifndef B_H_
#define B_H_

typedef struct B
{
  struct A* a;
} B;

#include "a.h"

void InitB(B* b)
{
  b->a = malloc(sizeof(A));
}

#endif 
```

主.c：

```
#include <stdlib.h>
#include "a.h"
#include "b.h"

int main(void)
{
  A a;
  B b;
  InitA(&a);
  InitB(&b);
  return 0;
} 
```

问题是，为了`sizeof()`工作，它的参数必须是已知类型。在您的代码中，并且在您执行and in `A`and`B`时还不完全清楚。重新排列类型定义、文件包含和函数定义的顺序可以解决这个问题。`sizeof(A)``sizeof(B)``InitA()``InitB()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:06:57.070

好的，让我们一步一步来。

让我们看看如果你想包含其中一个文件会发生什么，在这个例子中`A.h`：

*   `A.h`会包括`B.h`
*   `B.h`将包括`A.h`，由于标头保护而将被跳过。
*   `B.h`使用`A* a;`where A 是未知类型，此时会出现编译错误。

您必须像这样转发声明类型：（`struct A;`在`B.h`struct 定义之前）。

类似的推理适用于其他文件 ( `struct B;`)

# .net - 在不使用命令行安装 Visual Studio 的情况下执行 Visual Studio 单元测试时出错

> ID：11504849
> 
> 赞同：2
> 
> 时间：2012-07-16T12:59:28.027
> 
> 标签：.net, visual-studio-2010, coded-ui-tests

我想在不安装 Visual Studio 的情况下执行 Visual Studio 单元测试。为此，我进行了一些注册表更改，并将所需的 dll 复制到带有 MSTest.exe 文件的文件夹中。但是当我尝试使用命令行“mstest /noisolation /testcontainer:TestProject1.dll”执行测试时，它显示以下错误。

```
C:\Tools\mstest>mstest /noisolation /testcontainer:TestProject1.dll
Microsoft (R) Test Execution Command Line Tool Version 10.0.30319.1
Copyright (c) Microsoft Corporation. All rights reserved.

Failed to initialize the unit test extension 'CodedUITestAttribute': Failed to create an instance of the TestClassExtensionAttribute ('Microsoft.VisualStudio.TestTools.UITesting.CodedUITestAttribute, Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a') for the unit test extension 'CodedUITestAttribute': Could not load file or assembly 'Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.
bin\release\prjcco.dll
Unable to load the test container 'bin\release\prjcco.dll' or one of its dependencies. Error details: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.VisualStudio.TestTools.UITesting, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:01:53.830

您需要包含 Microsoft.VisualStudio.TestTools.UITesting.dll。

# windows-phone-7 - Windows phone 7 中的翻转动画

> ID：11504850
> 
> 赞同：1
> 
> 时间：2012-07-16T12:59:28.730
> 
> 标签：windows-phone-7, windows-phone-7.1

在我的应用程序中，我需要制作动画，即通过单击按钮，透明消息框或网格应该从包含按钮的底部翻转。任何人都可以提出一个想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:31:23.507

Create an animation in `Expression Blend` and call `animation_name.Begin()` in button's `Click` event handler

# sharepoint - 提取 SharePoint 安全组和列表 ID

> ID：11504851
> 
> 赞同：0
> 
> 时间：2012-07-16T12:59:32.637
> 
> 标签：sharepoint, sharepoint-2010

我需要提取 SharePoint 网站上的安全组以及列表 ID，以便我可以更新在查找字段中使用这些值的另一个列表。

Sharepoint Web 服务的新手并正在寻找一种简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:29:35.890

以下是您获取所有组及其名称和 ID 的代码

```
SPGroupCollection grpcolls = web.Groups;
foreach(SPGroup grp in grpcolls)
{
     string grpid = grp.ID.ToString();
     string grpLoginName = grp.LoginName;
     string grpName = grp.Name;
} 
```

# sql-server - 使用参数创建 SQL 视图

> ID：11504856
> 
> 赞同：7
> 
> 时间：2012-07-16T12:59:54.523
> 
> 标签：sql-server, sql-server-2008, view

我有一个接受参数的 SQL 查询。现在，当我尝试将该查询包含到视图中时，我遇到了一个错误，因为视图不能像 SP 或函数那样保存参数。

因此，如果我必须创建必须包含参数的视图，是否有可能？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:03:29.160

我不认为您可以在视图中创建参数。但是您可以创建一个函数，该函数采用如下输入参数。

```
CREATE FUNCTION dbo.Sample (@Parameter varchar(10))
RETURNS TABLE
AS
RETURN
(
 SELECT Field1, Field2,....
 FROM YourTable
 WHERE Field3 = @Parameter
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T13:03:31.643

不，[来自 MSDN](http://msdn.microsoft.com/en-us/library/ms187956.aspx)

> 创建一个虚拟表，其内容（列和行）由查询定义。使用此语句创建数据库中一个或多个表中数据的视图。例如，视图可用于以下目的：
> 
> 集中、简化和定制每个用户对数据库的看法。
> 
> 作为一种安全机制，允许用户通过视图访问数据，而不授予用户直接访问底层基表的权限。
> 
> 提供向后兼容的接口来模拟架构已更改的表。

因此，基本上，这就像一个表，并且您可以将“参数”添加到表的唯一方法是在访问视图时通过过滤器语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:27:00.477

当然不。将 View 视为包含一组已编译数据的表（尽管实际上视图与表不同），因此它永远不会有任何输入参数，如 sp 或函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-05T10:46:32.927

View 不能直接传递参数，但是可以使用[context_info](http://docs.microsoft.com/en-us/sql/t-sql/statements/set-context-info-transact-sql)，例如

```
declare @v varbinary(8)
set @v = cast(cast(floor( current_timestamp as float)) as bigint) as varbinary) --
set context_info @v -- save 
select * from my_viev

create my_view as
with CTE(date) as (
  select cast(cast(substring(context_info(),1,8) as bigint) as datetime) date  -- read
)
select * from filials p
 left join filials rea on rea.number = p.number 
 and (date between         rea.dateopen and '12.12.9999')
where date between p.datestart and p.datestop 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-06-30T16:47:24.440

你们从来没有这样做过，因为 VIEW 是由查询创建的另一个完整的表，您可以在该查询中包含参数....它也非常简单

像使用其他参数一样构建您的视图....

例子：

```
USE [iepa]
GO
/****** Object:  StoredProcedure [dbo].[get_Batch_Data]    Script Date: 06/30/2015 11:41:38 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[get_Batch_Data]
@inparm varchar(12)
AS
select *
from batch_data
where COM_Batch_ID=@inparm 
```

现在像这样调用该视图：

```
select from get_batch_data('61404')  <<<< 61404 is the parameter being passed.... 
```

非常简单且非常强大，因为您可以使用视图向表的子集或表的联合提供 UNALTERABLE 信息。
视图不是表格，因此有时您无法做一些事情。

但是，当您在查询中形成一个非常复杂的联接/联合时，这些是您不能做的事情......自 1999 年以来一直在使用上面的那个，所以我知道它有效......

# android - Android中选择、检查和激活的状态有什么区别？

> ID：11504860
> 
> 赞同：121
> 
> 时间：2012-07-16T13:00:07.270
> 
> 标签：android, android-view, selected, checked

我想知道这些州有什么不同。我没有找到任何网页来澄清这一点。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-01-10T15:59:38.710

Checked 和 Activated 的区别其实很有趣。甚至谷歌文档也很抱歉（在下面添加了重点）：

> ... 例如，在启用单选或多选的列表视图中，当前选择集中的视图被激活。*（嗯，是的，我们对这里的术语深表歉意。）*激活状态被传播到它所设置的视图的子视图。

所以这里有区别：

1.  激活是在 Honeycomb 中引入的，所以在此之前你不能使用它
2.  已激活现在是每个视图的属性。它有方法 setActivated() 和 isActivated()
3.  已激活传播到设置它的视图的子级
4.  Checked 围绕实现 Checkable 接口的 View 展开。方法 setChecked()、isChecked()、toggle()
5.  ListView（在 Honeycomb 之后）根据 Android 版本调用 setChecked() 或 setActivated()，如下所示（取自 Android 源代码）：

    ```
    if (mChoiceMode != CHOICE_MODE_NONE && mCheckStates != null) {
        if (child instanceof Checkable) {
            ((Checkable) child).setChecked(mCheckStates.get(position));
        } else if (getContext().getApplicationInfo().targetSdkVersion
                >= android.os.Build.VERSION_CODES.HONEYCOMB) {
            child.setActivated(mCheckStates.get(position));
        }
    } 
    ```

    Note the mCheckStates variable. It keeps track of which positions in your list are checked / activated. These are accessible via, for example, getCheckedItemPositions(). Note also that a call to ListView.setItemChecked() invokes the above. In other words, it could equally be called setItemActivated().

6.  Prior to Honeycomb we had to implement workarounds to reflect state_checked in our list items. This is because ListView calls setChecked() ONLY on the topmost View in the layout (and layouts do not implement checkable) ... and it does NOT propagate without help. These workarounds were of the following form: Extend the root layout to implement Checkable. In its constructor, recursively find all the children that implement Checkable. When setChecked() etc... are called, pass the call on to those Views. If those views implement state list drawables (eg a CheckBox) with a different drawable for state_checked then the checked state is reflected in the UI.

7.  To do a nice background to a list item after Honeycomb all you need do is have a state list drawable with a drawable for the state state_activated like this (and use setItemChecked() of course):

    ```
    <item android:state_pressed="true"
        android:drawable="@drawable/list_item_bg_pressed"/>
    <item android:state_activated="true"
        android:drawable="@drawable/list_item_bg_activated"/>
    <item android:drawable="@drawable/list_item_bg_normal"/> 
    ```

8.  To do a nice background to a list item prior to HoneyComb you would do something like the above for state_checked and you ALSO need to extend your topmost view to implement the Checkable interface. Within that you then need to tell Android whether the state you are implementing is true or false by implementing onCreateDrawableState() and calling refreshDrawableState() whenever the state changes.

    ```
    <item android:state_pressed="true"
        android:drawable="@drawable/list_item_bg_pressed"/>
    <item android:state_checked="true"
        android:drawable="@drawable/list_item_bg_checked"/>
    <item android:drawable="@drawable/list_item_bg_normal"/> 
    ```

... and the code to implement Checkable combined with state_checked in a RelativeLayout could be:

```
public class RelativeLayoutCheckable extends RelativeLayout implements Checkable {

    public RelativeLayoutCheckable(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public RelativeLayoutCheckable(Context context) {
        super(context);
    }

    private boolean mChecked = false;

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
    }
    @Override
    public boolean isChecked() {
        return mChecked;
    }

    @Override
    public void setChecked(boolean checked) {
        mChecked = checked;
        refreshDrawableState();
    }

    private static final int[] mCheckedStateSet = {
        android.R.attr.state_checked,
    };

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, mCheckedStateSet);
        }
        return drawableState;
    }    

    @Override
    public void toggle() {
        setChecked(!mChecked);
    }
} 
```

Thanks to the following:

[http://sriramramani.wordpress.com/2012/11/17/custom-states/](http://sriramramani.wordpress.com/2012/11/17/custom-states/)

Stackoverflow: [How to add a custom button state](https://stackoverflow.com/questions/4336060/android-how-to-add-a-custom-button-state)

Stackoverflow: [Custom Checkable View which responds to Selector](https://stackoverflow.com/questions/11293399/custom-checkable-view-which-responds-to-selector)

[http://www.charlesharley.com/2012/programming/custom-drawable-states-in-android/](http://www.charlesharley.com/2012/programming/custom-drawable-states-in-android/)

[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

[http://blog.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/](http://blog.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-16T13:23:32.427

根据[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)：

*   **android:state_selected** *布尔值*。" `true`" 如果在使用方向控件导航时（例如在使用 d-pad 导航列表时）对象是当前用户选择时应使用此项目；" `false`" 如果在未选择对象时应使用此项。当焦点 (android:state_focused) 不够时（例如当列表视图具有焦点并且使用 d-pad 选择其中的项目时）使用选定状态。

*   **android:state_checked** *布尔值*。" `true`" 如果在检查对象时应该使用此项；" `false`" 如果它应该在对象未选中时使用。

*   **android:state_activated** *布尔值*。" `true`" 如果在对象被激活为持久选择时应使用此项目（例如在持久导航视图中“突出显示”先前选择的列表项）；" `false`" 如果它应该在对象未激活时使用。**在API 级别 11**中引入。

我认为文档很清楚，所以有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T15:14:19.980

Here is other solution for this problem: [https://github.com/jiahaoliuliu/CustomizedListRow/blob/master/src/com/jiahaoliuliu/android/customizedlistview/MainActivity.java](https://github.com/jiahaoliuliu/CustomizedListRow/blob/master/src/com/jiahaoliuliu/android/customizedlistview/MainActivity.java)

I have overrided the method setOnItemClickListener and check differente cases in the code. But definitively the solution of Marvin is much better.

```
listView.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> adapterView, View view, int position,
        long id) {
    CheckedTextView checkedTextView =
            (CheckedTextView)view.findViewById(R.id.checkedTextView);
    // Save the actual selected row data
    boolean checked = checkedTextView.isChecked();
    int choiceMode = listView.getChoiceMode();
    switch (choiceMode) {
    // Not choosing anything
    case (ListView.CHOICE_MODE_NONE):
        // Clear all selected data
        clearSelection();
        //printCheckedElements();
        break;
    // Single choice
    case (ListView.CHOICE_MODE_SINGLE):
        // Clear all the selected data
        // Revert the actual row data
        clearSelection();
        toggle(checked, checkedTextView, position);
        //printCheckedElements();
        break;
    // Multiple choice
    case (ListView.CHOICE_MODE_MULTIPLE):
    case (ListView.CHOICE_MODE_MULTIPLE_MODAL):
        // Revert the actual selected row data
        toggle(checked, checkedTextView, position);
        //printCheckedElements();
        break;
    }
    }
}); 
```

# php - 使用 Graph API 从 Facebook 读取事件

> ID：11504867
> 
> 赞同：0
> 
> 时间：2012-07-16T13:00:20.280
> 
> 标签：php, facebook

我的服务器通过 graph.facebook.com 读取有关事件的信息这没问题，因为还不需要公共事件的访问令牌......不幸的是 Facebook 改变了这一点，所以我无法在没有访问权限的情况下阅读信息令牌。

我的服务器不支持 php 扩展 curl，所以我无法使用 facebook sdk :(

目前，我通过以下方式获取信息：graph.facebook.com/pageID/events（页面及其事件是公开的）

我有一个有效的访问令牌，但是否可以将其用作参数，例如：graph.facebook.com/pageID/events?AccesToken=XXXX

对于我的问题，这将是一个非常简单的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:02:56.003

是的 - 有可能 - 试试吧！

您可以`access_token`像显示的那样添加作为参数，并用于[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)从 Facebook API 检索数据...

[许多文档代码示例](https://developers.facebook.com/search?selection=file_get_contents)都使用这种方法`file_get_contents`与 Facebook 的服务器通信——如果它对他们来说足够好，它对我们来说就足够好了:)

# java - 适用于 Android 的内存/性能分析工具

> ID：11504874
> 
> 赞同：6
> 
> 时间：2012-07-16T13:00:41.053
> 
> 标签：java, android, performance, memory, profiling

我是安卓新手。标准的 Java 内存和性能分析工具可以与 Android 一起使用吗？

例如，我们可以创建一个 heapdump 文件并分析 Android 应用程序吗？或者使用 Eclipse TPTP 来分析内存/性能？

如果无法为此目的使用标准 Java 工具，那么是否有任何 Android 专用工具用于内存和性能分析？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:05:03.157

如果您使用 Eclipse，DDMS 应该可以帮助您完成大部分所需的工作。

[DDMS - 跟踪对象的内存分配](http://developer.android.com/tools/debugging/ddms.html#alloc)

> DDMS 提供了一个功能来跟踪正在分配给内存的对象并查看哪些类和线程正在分配这些对象。当您在应用程序中执行某些操作时，这允许您实时跟踪分配对象的位置。此信息对于评估可能影响应用程序性能的内存使用很有价值。
> 
> 跟踪对象的内存分配：
> 
> 在“设备”选项卡中，选择要为其启用分配跟踪的进程。在 Allocation Tracker 选项卡中，单击 Start Tracking 按钮开始分配跟踪。此时，您在应用程序中所做的任何事情都将被跟踪。单击获取分配以查看自单击开始跟踪按钮以来已分配的对象列表。您可以再次单击获取分配以将已分配的新对象附加到列表中。要停止跟踪或清除数据并重新开始，请单击停止跟踪按钮。单击列表中的特定行可查看更详细的信息，例如分配对象的代码的方法和行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:04:55.300

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)可以直接读取 Android 堆转储，无需将它们转换为 JSE 格式。

免责声明：我公司开发 JProfiler。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:14:13.833

市场上有现有的性能分析工具。

通用工具，例如 SystemPanel 应用程序 - [https://play.google.com/store/apps/details?id=nextapp.systempanel.r1&hl=en](https://play.google.com/store/apps/details?id=nextapp.systempanel.r1&hl=en)。它列出了CPU、内存和网络等性能。

专业工具，例如 TaskSpy - [https://play.google.com/store/apps/details?id=com.skstudio.tooldelux](https://play.google.com/store/apps/details?id=com.skstudio.tooldelux)。它列出了系统范围的性能，并使您能够分析一个特定的运行进程。真正有用的是它使您能够从远程 PC/mac/linux 计算机上查看性能，而目标测试应用程序仍然可以在您的手机/平板电脑上运行 - 它是无中断的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T05:26:50.963

无法直接使用标准 Java 工具。但是，如果我们从 Android 应用程序创建 Heapdump，并将其转换为 Java SE HPROF 格式后，我们可以使用 Eclipse 内存分析器来分析内存。

[http://android-developers.blogspot.fr/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.fr/2011/03/memory-analysis-for-android.html)

# java - 尝试设置复选框时出现空指针异常

> ID：11504879
> 
> 赞同：-1
> 
> 时间：2012-07-16T13:00:59.133
> 
> 标签：java, nullpointerexception, jcheckbox

如果在名为 saved_mat 的数组中的特定点找到单词“true”，我正在尝试将复选框设置为被选中。

```
System.out.println(saved_mat[0][15]);
    if(saved_mat[0][15].equals("true")){
        e1_10e.setSelected(true);
    } 
```

第一行按预期打印出“true”，但第三行出现空指针异常。数组的大小为 [30][24]，第一行确认数组的 [0][15] 元素中有内容。e1_10e 被定义为一个 JCheckbox。我不确定如何在第三行获得空指针异常。任何帮助，将不胜感激。

```
JCheckBox e1_10e = new JCheckBox("");
    e1_10e.setBounds(32, 152, 21, 23);
    jp1.add(e1_10e); 
```

这是由 GUI 编辑器生成的用于创建 JCheckbox 的代码。我对几个 JTextField 使用了相同的编辑器，并且能够在我的代码中毫无问题地引用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:09:51.230

当您需要调用任何方法时，`Object`您需要确保`Object`已实例化调用构造函数。此外，在使用变量之前检查变量的值是一个很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:05:14.573

声明没有创建对象，添加以下行：

```
JCheckBox e1_10e = new JCheckBox(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:16:44.120

我发现我的错误是行

```
JCheckbox e1_10e = new JCheckBox(""); 
```

由于复选框已在前面声明，因此只需要

```
 e1_10e = new JCheckBox(""); 
```

# objective-c - 如何使用objective-c在Dropbox API中的目录内创建目录？

> ID：11504881
> 
> 赞同：1
> 
> 时间：2012-07-16T13:01:01.180
> 
> 标签：objective-c, directory, dropbox

我知道如何创建一个目录，例如：

```
[[self restClient] createFolder: folderName]; 
```

但是如果我想在文件夹“A”中创建文件夹“B”，我该怎么做呢？

目录层次结构为：A > B > c.txt

我可以创建“A”，但不能在 A 中创建 B。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:03:36.890

你已经完成了一半，试试这个

```
[[self restClient] createFolder:@"A"]; 
```

然后

```
[[self restClient] createFolder:@"A/B"];

- (void)restClient:(DBRestClient*)client createdFolder:(DBMetadata*)folder{
    NSLog(@"Meta Data Path %@",[folder path]);
    NSLog(@"Meta Data Filename %@",[folder filename]);
    NSLog(@"Meta has directory %d",[folder isDirectory]);

}
// Folder is the metadata for the newly created folder
- (void)restClient:(DBRestClient*)client createFolderFailedWithError:(NSError*)error{
    NSLog(@"Fail Error %@",error);
}
// [error userInfo] contains the root and path 
```

[元数据](https://www.dropbox.com/developers/reference/api#metadata)和关于[创建文件夹](https://www.dropbox.com/developers/reference/api#fileops-create-folder)

# html - Html 表数据在 Chrome 中重叠

> ID：11504882
> 
> 赞同：1
> 
> 时间：2012-07-16T13:01:04.860
> 
> 标签：html, width, html-table

我有一个 5 列和多行的 html 表。第一列由标签和其他带有文本框的列组成。列数可能因数据而异。

每列的宽度均按百分比分配（100% 除以列数）。

在 IE 中，如果标签文本很长，第一列（标签）会自动扩展。但在 Chrome 中它没有扩展。

请建议我申请第一栏需要哪种风格？

**以下是 Table 的服务器端代码：**

```
 TableRow headerRow = new TableRow();
        foreach (string s in columns)
        {
            TableCell cell = new TableCell();
            cell.Width = Unit.Percentage(100.00 / colsCount);
            cell.BorderColor = Color.White;
            cell.BorderStyle = BorderStyle.None;
            System.Web.UI.WebControls.Label tb = new System.Web.UI.WebControls.Label();
            //tb.TextMode = TextBoxMode.MultiLine;
            //tb.Width = Unit.Percentage(100.00);
            //tb.Height = Unit.Pixel(45);

            tb.ID = "TextHeaderBoxRow" + s;
            tb.BackColor = Color.FromArgb(211, 230, 254);
            tb.BorderColor = Color.White;
            tb.BorderStyle = BorderStyle.Solid;
            tb.BorderWidth = Unit.Pixel(0);
            tb.Font.Bold = true;
            tb.Text = s;
            //tb.Attributes.Add("style", "overflow :hidden");
            tb.Font.Name = "Tahoma";
            tb.Font.Size = FontUnit.Point(9);
            //tb.ReadOnly = true;
            tb.TabIndex = -1;

            cell.Controls.Add(tb);
            headerRow.Cells.Add(cell);
        }
        Table1.Rows.Add(headerRow);

        // Now iterate through the table and add your controls 
        for (int i = 0; i < rowsCount; i++)
        {
            TableRow row = new TableRow();
            row.Style.Add(HtmlTextWriterStyle.PaddingRight, "5px");
            row.Width = Unit.Percentage(100.00);

            for (int j = 0; j < colsCount; j++)
            {
                TableCell cell = new TableCell();
                cell.BorderColor = Color.White;
                cell.Width = Unit.Percentage(100.00 / colsCount);
                TextBox tb = new TextBox();
                tb.Width = Unit.Percentage(100.00);
                tb.Font.Name = "Tahoma";
                tb.Font.Size = FontUnit.Point(9);
                tb.Attributes.Add("onchange", "javascript:Changeflag()");
                tb.Attributes.Add("onkeyup", "javascript:Changeflag()");

                // Set a unique ID for each TextBox added
                tb.ID = "TextBoxRow_" + i + "Col_" + j;

                // Add the control to the TableCell
                cell.Controls.Add(tb);
                // Add the TableCell to the TableRow
                row.Cells.Add(cell);
            }
            // Add the TableRow to the Table
            Table1.Rows.Add(row);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:26:40.433

Chrome 正在按照您的指示进行操作。您指定所有宽度都应该相等，因此它会包裹标签。IE 正在做你想做的事，而不是你告诉它做的事。

如果您无法将第一列的宽度指定为足够大而没有任何换行，您可以尝试添加`white-space=nowrap`标签的样式。

# dojo - 如何防止 Meteor 观看文件？

> ID：11504883
> 
> 赞同：16
> 
> 时间：2012-07-16T13:01:04.453
> 
> 标签：dojo, meteor

我想将[Dojo Toolkit](http://en.wikipedia.org/wiki/Dojo_Toolkit)与[Meteor](http://en.wikipedia.org/wiki/Meteor_%28platform%29)一起使用。

1.  我首先将整个 Dojo Toolkit 树复制到`/public`

2.  然后，我将它包含在客户端：

    ```
    <script src="/dojo/dojo.js" data-dojo-config="async: true"></script>` 
    ```

一切正常，除了 Meteor 实际上正在监视每个文件`/public`的更改，以便它可以重新启动服务器。这实际上是在第一次请求时造成了很长的延迟`localhost:3000`。

有没有办法阻止 Meteor 观看某个目录中的文件？

* * *

[Dojo Toolkit 是 10k+ 个文件，所以我得到了此处](https://stackoverflow.com/questions/11300969/error-watch-emfile-when-putting-node-modules-in-public)所述的 EMFILE 错误，更正为

```
sudo sh -c 'echo 16384 > /proc/sys/fs/inotify/max_user_watches' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-06T13:35:14.657

意识到这是重复的：[使用 Meteor 生成和提供静态文件](https://stackoverflow.com/questions/13201723/generating-and-serving-static-files-with-meteor/20358612#20358612)

见：[https ://github.com/meteor/meteor/issues/437](https://github.com/meteor/meteor/issues/437)

这对我来说是个大问题。我必须提供大约 12000 张静态图像，我最初将它们放入公共文件夹中。这导致节点不断地使用近 100% 的一个 CPU 内核。由于内存有限，应用程序崩溃。

我目前正在使用的解决方法

*   创建文件夹`public/.#static/`并将所有静态资产移入其中。流星不监视此文件夹
*   `/img/cat.png -> /static/img/cat.png`带有静态 ( )的 URL 前缀
*   安装 mime npm 包

    ```
    cd ~/.meteor/tools/latest/lib/node_modules/
    npm install mime 
    ```

*   创建一个 rawConnectionHandler 来服务资产（归功于：[https://stackoverflow.com/a/20358612](https://stackoverflow.com/a/20358612)） server/static_files_handler.coffee

    ```
    fs = Npm.require('fs')
    mime = Npm.require('mime')
    WebApp.rawConnectHandlers.use (req, res, next) ->
      re = /^\/static\/(.*)$/.exec(req.url)
      if re isnt null # Only handle URLs that start with /static/*
        filePath = process.env.PWD + "/public/.#static/" + re[1]
        type = mime.lookup(filePath)
        data = fs.readFileSync(filePath, data)
        res.writeHead 200,
          "Content-Type": type

        res.write data
        res.end()
      else # Other urls will have default behaviors
        next()
      return 
    ```

这种方法的局限性：

*   不适合提供带有查询参数的资产。正则表达式还将匹配 /static/html/image.html?src=/static/img/cat.png 试图提供文件名包括参数的文件。这很容易改变。
*   Meteor 完全不知道这些文件，因此它们不会包含在 appcache 清单中。如果您想让它们离线可用，请查看我添加到[https://github.com/buildhybrid/appcache-extra的 addPaths 选项](https://github.com/buildhybrid/appcache-extra)

如果您不想解决这些问题，请考虑从外部服务（例如 AWS S3）提供资产。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T05:40:29.223

对于在 Meteor 中构建的大型应用程序来说，这是一个大问题。我在 Meteor 与 Matt 进行了交谈，他说他们的团队正在为他们即将发布的版本之一解决这个问题。因此，获取他们的时事通讯，当它可用时，您会收到通知。

马修，您的评论：

> 我终于找到了解决方法。我把所有东西都放在 /public/lib/. 然后，/usr/lib/meteor/app/run.js 的第 286 行，我添加了我不希望 Meteor 观看的文件夹：self.exclude_paths = [ path.join(app_dir, '.meteor', ' local'), path.join(app_dir, 'public', 'lib') ]; 这样我就可以在 lib 中拥有尽可能多的文件，并且它们不会减慢所有速度。包含路径是“/lib/dojo/dojo.js”。

现在是一个很好的 hack，以下是其他相关问题，这些问题也将在即将发布的版本中介绍：

*   有些包有重叠的依赖关系，但不要像 PHP 的 require_once() 那样排除它们。

*   一个原生的 require/define 动态脚本加载器，所以并不是所有的文件都加载到一个可以计算依赖顺序而不必去级别、lib 或 main 的条目上。*

*   一种创建包并将包部署到存储库的官方方式。目前它正在使用[Meteorite](https://github.com/oortcloud/meteorite) (mrt) 和[Atmosphere](https://github.com/oortcloud/atmosphere)。

# javascript - 如何在three.js中获取地形的高度？

> ID：11504887
> 
> 赞同：1
> 
> 时间：2012-07-16T13:01:09.073
> 
> 标签：javascript, webgl, three.js

如何在给定的 x，z 点获得地形（平原）的高度和表面法线？我已经搜索了很多，但我没有找到任何关于此的内容。

据我所知，我应该使用光线，但我真的不知道如何使用它们。

# symfony - Symfony fetch/persist 面向实体的服务命名约定和最佳实践

> ID：11504891
> 
> 赞同：5
> 
> 时间：2012-07-16T13:01:34.347
> 
> 标签：symfony, naming-conventions, entitymanager

Symfony2 应用程序通常有一个实体集合。Doctrine`EntityManager`通常用于获取和持久化这些实体。

实体在整个应用程序的多个地方使用；对于许多实体和每个实体，将给定实体的处理加上获取/持久化服务包起来是有意义的。

例如，对于一个`User`实体，可能有一个`UserService`with`fetchUser($user_id)`和`persistUser(User $user)`方法（或者可能只是`fetch()`and `persist(`）方法，这只是一个示例）。

一个应用程序可以最终获得许多面向实体的服务，用于获取和持久化实体。此类服务的接口相似，处理的实体类型不同。

一个应用程序可以包含许多面向实体的服务似乎很常见。因此，命名和架构此类服务的问题是一个常见问题。

例如，对于一个需要创建 base`EntityService`和 child的新应用程序`UserService`，`WidgetService`类`ProductService`感觉是重复的，因为处理这些方面的方法应该是一个已解决的问题。

*   **是否有将此类实体管理相关服务引入 Symfony 应用程序的最佳实践？**

    这感觉它应该是一个已解决的问题，可能需要遵循一个成熟的设计模式。

*   **是否有建议遵循的命名约定？**

    我观察到，在不同的应用程序中，`UserManager` 和 `UserService` 都被选为服务名称。有通行的约定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:49:08.600

至于命名，我不知道这种情况的约定，但是有`Doctrine\ORM\EntityManager`管理实体的类，所以我会`Manager`使用`Service`.

现在，谈谈实体管理服务：你真的需要这么多服务吗？如果该`UserService::persistUser()`方法只是持久化用户，为什么要使用自定义服务而不是默认服务`EntityManager`？

此外，您不应该将存储库和持久化方法放在同一个类中。为实体使用自定义存储库不是更容易吗？

# jquery - jquery append 在带有 var 声明的 IE 中不起作用？

> ID：11504893
> 
> 赞同：1
> 
> 时间：2012-07-16T13:01:35.710
> 
> 标签：jquery

首先，这里有很多关于这个问题的stackoverflow讨论，但是这个是完全不同的。我有

html中的代码`<table id="taxonomyUpload"></table>`

```
var rowM = $("<tr id=" + fileRowName + ">");
rowM.append($("<td bgcolor='#578ABA' height='10%' align='center'><x class='ez'>" + fileName 
+ ":</x></td><td><input type='file' id='" + fileName + "' name='" + fileName 
+ "' size='40' onchange='checkFiles(this);'/></td><td><div id=" + fileMinusDivName + " style='display='none''><img src='images/minus.jpg' height='20' onclick='deleteRow(" 
+ fileRowName + "," + index + ")'/></div></td><td><div id=" + filePlusDivName + " style='display='inline''>" 
+ "<img src='images/plus.jpg' height='20' onclick='moreFiles()'/></div></td></tr>"));
$("#taxonomyUpload").append(rowM); 
```

这在 Firefox 中运行良好，但在 IE 中不行。经过多次尝试并从stackoverflow读取了几个线程后，我想到不声明任何变量而是直接附加字符串。我的最终代码是

```
$("#taxonomyUpload").append($("<tr id=" + fileRowName + "><td bgcolor='#578ABA' height='10%' align='center'><x class='ez'>" + fileName 
+ ":</x></td><td><input type='file' id='" + fileName + "' name='" + fileName 
+ "' size='40' onchange='checkFiles(this);'/></td><td><div id=" + fileMinusDivName + " style='display='none''><img src='images/minus.jpg' height='20' onclick='deleteRow(" 
+ fileRowName + "," + index + ")'/></div></td><td><div id=" + filePlusDivName + " style='display='inline''>" 
+ "<img src='images/plus.jpg' height='20' onclick='moreFiles()'/></div></td></tr>")); 
```

这样我就可以让附加代码也适用于 IE。但是我遇到了一个问题，为什么会发生这种情况？是不是IE不支持var？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:12:59.437

我在 IE 中附加到这个问题。我解决了更改`append()`为`appendTo()`. 所以代替`$(a).append(b);`, 写`$(b).appendTo(a)`;

希望这对你有用，就像对我一样:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:31:51.587

我可以通过将双引号替换`$("#taxonomyUpload")`为单引号来运行代码`$('#taxonomyUpload')`；因此工作代码是

`var rowM = $("<tr id=" + fileRowName + ">"); rowM.append($("<td bgcolor='#578ABA' height='10%' align='center'><x class='ez'>" + fileName + ":</x></td><td><input type='file' id='" + fileName + "' name='" + fileName + "' size='40' onchange='checkFiles(this);'/></td><td><div id=" + fileMinusDivName + " style='display='none''><img src='images/minus.jpg' height='20' onclick='deleteRow(" + fileRowName + "," + index + ")'/></div></td><td><div id=" + filePlusDivName + " style='display='inline''>" + "<img src='images/plus.jpg' height='20' onclick='moreFiles()'/></div></td></tr>")); $('#taxonomyUpload').append(rowM);`

这也是让我在 IE 中运行 append 的原因。

# java - 计算字符串出现次数并按它们排序的简单方法

> ID：11504902
> 
> 赞同：2
> 
> 时间：2012-07-16T13:02:06.677
> 
> 标签：java, sorting, counting

我正在查看一个冗余的字符串列表，例如

```
{ "One", "One", "One", "Two", "Three", "Three" } 
```

计算出现次数的最佳方法是什么，然后创建一个非冗余的字符串列表，**按**出现次数排序？

我想要的结果是这样的列表：

```
{ "One", "Three", "Two" } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:05:29.920

您可以在这个问题的投票最多的答案中使用技巧，了解[如何按值对地图进行排序](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)。

这是一个示例实现（我在比较器中添加了泛型）：

*   您将字符串/出现添加到哈希图中
*   将所有内容放在一个带有自定义比较器的 TreeMap 中，该比较器对值进行排序
*   把钥匙放回列表中

```
public static void main(String[] args) {
    String[] strings = {"One", "One", "One", "Two", "Three", "Three"};

    //Count occurences
    Map<String, Integer> map = new HashMap<String, Integer>();

    for (String s : strings) {
        if (map.containsKey(s)) {
            map.put(s, map.get(s) + 1);
        } else {
            map.put(s, 1);
        }
    }

    ValueComparator<String, Integer> comparator = new ValueComparator<String, Integer> (map);
    Map<String, Integer> sortedMap = new TreeMap<String, Integer> (comparator);
    sortedMap.putAll(map);

    List<String> sortedList = new ArrayList<String> (sortedMap.keySet());

    System.out.println(sortedMap);
    System.out.println(sortedList);

}

static class ValueComparator<K, V extends Comparable<V>> implements Comparator<K> {

    Map<K, V> map;

    public ValueComparator(Map<K, V> base) {
        this.map = base;
    }

    @Override
    public int compare(K o1, K o2) {
         return map.get(o2).compareTo(map.get(o1));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-28T15:57:08.173

它可以在**Java 8**中快速完成。

```
Map<String, Long> sortedByCountSet =  Stream.of("One", "One", "One", "Two", "Three", "Three")
            .collect(Collectors.groupingBy(str->str,TreeMap::new,Collectors.counting()));

System.out.println(sortedByCountSet); 
```

**在这里输出：-**

{一=3，三=2，二=1}

*或者*

```
Map<String, Long> sortedByCountSet = Stream.of("One", "One", "One", "Two", "Three", "Three","Five","Five")
            .collect(Collectors.groupingBy(str->str, Collectors.counting()))
            .entrySet().stream().sorted(Comparator.comparing(Map.Entry::getValue))
            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue,(e1, e2) -> e1,LinkedHashMap::new)); 
```

**输出：-**

{二=1，五=2，三=2，一=3}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:05:30.127

您可以创建一个地图，浏览您的列表，每次遇到新事件时将其放入列表中并将整数值设置为 1，每次遇到重复项时，只需将该特定键的值加一即可。

然后通过哈希图中的计数创建排序列表。

或者正如其他人所建议的那样，使用 TreeMap 将允许您进行排序而不是创建 sepearet 列表。

# spring-security - 自定义登录服务或数据库查询？

> ID：11504906
> 
> 赞同：0
> 
> 时间：2012-07-16T13:02:21.657
> 
> 标签：spring-security

我刚开始使用 Spring Security，我知道有两种方法可以从数据库中访问用户名和密码：创建自定义登录服务 bean 或在 xml 配置中创建 sql 或 hql 查询。是否存在这两种选择纯粹是为了便于多方使用，还是应该在不同情况下使用任何一种方法？只是好奇。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:13:01.367

两者几乎相同，但服务使您可以更好地控制登录过程，因为您可以使用 loadUserByUsername 方法编写某些逻辑。例如加载权限或构建未与休眠域对象映射的不同用户对象。我个人更喜欢服务。

# c# - .net 中的“new”关键字实际上是做什么的？

> ID：11504910
> 
> 赞同：10
> 
> 时间：2012-07-16T13:02:31.403
> 
> 标签：c#, .net, memory, allocation

我知道`new`关键字正在调用类构造函数，但我们在哪个阶段为类分配内存？

据我了解，它应该与`GCHandle.Alloc(Object)`方法相对应，但我找不到连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T13:33:31.943

*new*运算符在CLR 中实现。它从垃圾收集堆中分配内存并执行类构造函数。

GCHandle.Alloc()*不*一样。这利用了 GC 中的单独机制来创建对对象的引用，这些引用存储在单独的表中并被扫描，除了在垃圾回收期间通常发现的对象引用。您必须通过 Alloc() 一个现有的对象引用，它会添加另一个。用于创建弱引用和固定引用以及允许非托管代码存储对托管对象的引用并使其保持活动状态的机制。C++/CLI 中的[gcroot<> 模板类](http://msdn.microsoft.com/en-us/library/481fa11f.aspx)利用了它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-16T13:34:01.693

对象创建的一切都隐藏在`newobj`操作码（或`initobj`值类型）后面。因此，它**完全是一个实现细节**，如何分配内存以及在何处分配内存，以及它如何与其他内存管理结构联系起来。

# jsf - jsf - primefaces 我无法从数据库表中获取当前行

> ID：11504917
> 
> 赞同：1
> 
> 时间：2012-07-16T13:02:45.120
> 
> 标签：jsf, primefaces

我正在使用带有 Primefaces 的 Netbeans。我的问题是不能使用即时。一切正常，除了当我单击该行时 p:dialog 为空。

我不明白为什么该`getCurrent`方法在没有 Primefaces 而没有 Primefaces 的情况下有效！

代码如下。

您的帮助将不胜感激，

谢谢，

ArabaController.java 代码如下：

```
@ManagedBean(name = "arabaController")
@SessionScoped
public class ArabaController implements Serializable {

   private primeController mediumCarsModel;  
   private primeController arabaList;
   private primeController getprimeAraba;
   private List<Araba> carsSmall; 
   private ArabaController y;
    private Araba current;
    private Araba selectedCar;
    private DataModel items = null;
    private String Marka;
    private String Model;
    private String Renk;
    private int Yil;
    private DataModel sel;
    public static  int deneme;
    @EJB
    private session.ArabaFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public Araba getSelected() {
        if (current == null) {
            current = new Araba();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ArabaFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(20) {

                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {

        recreateModel();
        System.out.println("selim");
        return "List";
    }

    public String prepareView() {
        current = (Araba) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }
    public Araba getCurrent(){
         selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();  
       current = (Araba) getItems().getRowData();

        System.out.println(selectedItemIndex) ;
        System.out.println(current);
        System.out.println("current");
     return current;
    }

    //////////////////////////////////////////////////////////////////////
   public void onRowSelect(SelectEvent event) {  
        FacesMessage msg = new FacesMessage("Seçilen Araba", ((Araba) event.getObject()).getMarka());  

        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  
   public void getSelectedMarka(SelectEvent event)
   {
   Marka=((Araba) event.getObject()).getMarka();
    return;
   }

    public String getSelectedModel(SelectEvent event)
   {
   Model=((Araba) event.getObject()).getModel();
   return Model;
   } 
    public String getSelectedRenk(SelectEvent event)
   {
   Renk=((Araba) event.getObject()).getRenk();
   return Renk;
   }

    public int getSelectedYil(SelectEvent event)
   {
   Yil=((Araba) event.getObject()).getYil();
   return Yil;
   }  

/////////////////////////////////////////////////////////////////////////////////////
    public String prepareCreate() {
        current = new Araba();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArabaCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (Araba) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArabaUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (Araba) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArabaDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {

        return JsfUtil.getSelectItems(ejbFacade.findAll(),true);

    }

    public Object getRowDataTable()
    {
        return sel.getRowData();
    }

    @FacesConverter(forClass = Araba.class)
    public static class ArabaControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ArabaController controller = (ArabaController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "arabaController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Araba) {
                Araba o = (Araba) object;
                return getStringKey(o.getIdaraba());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " +                        object.getClass().getName() + "; expected type: " + ArabaController.class.getName());
            }
        }
    }
    ////////////////////////////////////////////////////////////////////////////////////
   public Araba getSelectedCar() { 

        return selectedCar;  
    }  
    public void setSelectedCar(Araba selectedCar) {  
        this.selectedCar = selectedCar;  
    }  

     public primeController getMediumCarsModel() {  
       mediumCarsModel = new primeController(ejbFacade.findAll()); 
        return mediumCarsModel;
      }  
      ///////////////////////////////////////////////////////////////////////////////////////

    } 
```

primecontroller.java 如下：

```
@ManagedBean(name = "primeController")
@SessionScoped
public  class primeController extends ListDataModel<Araba> implements SelectableDataModel<Araba> {

   private session.ArabaFacade x;
    private Araba current;
    private DataModel items = null;
    @EJB
    private session.ArabaFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public primeController() {
    }
public primeController(List<Araba> data) {  
        super(data);  
    }  
  public List<Araba> sendAraba()
  {
      List<Araba> cars = x.findAll(); 
      return cars;
  }

    @Override  
    public Araba getRowData(String rowKey) {  
        //In a real app, a more efficient way like a query by rowKey should be implemented to deal with huge data  

        List<Araba> cars = x.findAll(); 
        System.out.print("olmalı idi");

        for(Araba car : cars) {  
            if(car.getModel().equals(rowKey))  
                return car;  
        }  

        return null;  
    }  
    @Override  
    public Object getRowKey(Araba car) {  
        controller.ArabaController.deneme=3;
        return car.getModel();  
    }  

} 
```

araba.java（模型）代码如下

```
@Entity
@Table(name = "araba")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Araba.findAll", query = "SELECT a FROM Araba a"),
    @NamedQuery(name = "Araba.findByIdaraba", query = "SELECT a FROM Araba a WHERE a.idaraba = :idaraba"),
    @NamedQuery(name = "Araba.findByMarka", query = "SELECT a FROM Araba a WHERE a.marka = :marka"),
    @NamedQuery(name = "Araba.findByRenk", query = "SELECT a FROM Araba a WHERE a.renk = :renk"),
    @NamedQuery(name = "Araba.findByYil", query = "SELECT a FROM Araba a WHERE a.yil = :yil"),
    @NamedQuery(name = "Araba.findByModel", query = "SELECT a FROM Araba a WHERE a.model = :model")})
public class Araba implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @NotNull
    @Column(name = "idaraba")
    private Integer idaraba;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 15)
    @Column(name = "MARKA")
    private String marka;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 15)
    @Column(name = "RENK")
    private String renk;
    @Basic(optional = false)
    @NotNull
    @Column(name = "YIL")
    private int yil;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 15)
    @Column(name = "MODEL")
    private String model;

    public Araba() {
    }

    public Araba(Integer idaraba) {
        this.idaraba = idaraba;
    }

    public Araba(Integer idaraba, String marka, String renk, int yil, String model) {
        this.idaraba = idaraba;
        this.marka = marka;
        this.renk = renk;
        this.yil = yil;
        this.model = model;
    }

    public Integer getIdaraba() {
        return idaraba;
    }

    public void setIdaraba(Integer idaraba) {
        this.idaraba = idaraba;
    }

    public String getMarka() {
        return marka;
    }

    public void setMarka(String marka) {
        this.marka = marka;
    }

    public String getRenk() {
        return renk;
    }

    public void setRenk(String renk) {
        this.renk = renk;
    }

    public int getYil() {
        return yil;
    }

    public void setYil(int yil) {
        this.yil = yil;
    }

    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idaraba != null ? idaraba.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Araba)) {
            return false;
        }
        Araba other = (Araba) object;
        if ((this.idaraba == null && other.idaraba != null) || (this.idaraba != null && !this.idaraba.equals(other.idaraba))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "model.Araba[ idaraba=" + idaraba + " ]";
    }

} 
```

会话 abstractfacade.java ：

```
public abstract class AbstractFacade<T> {
    private Class<T> entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    public List<Araba> findAll() {
       // javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        //cq.select(cq.from(entityClass));
        //return getEntityManager().createQuery(cq).getResultList();
        CriteriaBuilder cb= getEntityManager().getCriteriaBuilder();
        CriteriaQuery<Araba> cq= cb.createQuery(Araba.class);
        Root<Araba> araba=cq.from(Araba.class);
        cq.select(araba);
        TypedQuery<Araba> q=getEntityManager().createQuery(cq);
        List<Araba> tumArabalar=q.getResultList();
         System.out.println("current");
        return tumArabalar;
    }

    public List<Araba> findRange(int[] range) {
       // javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
       // cq.select(cq.from(entityClass));
       // javax.persistence.Query q = getEntityManager().createQuery(cq);
        CriteriaBuilder cb= getEntityManager().getCriteriaBuilder();
        CriteriaQuery<Araba> cq= cb.createQuery(Araba.class);
        Root<Araba> araba=cq.from(Araba.class);
        cq.select(araba);
        TypedQuery<Araba> q=getEntityManager().createQuery(cq);
        q.setMaxResults(range[1] - range[0]);
        q.setFirstResult(range[0]);
        return q.getResultList();
    }

    public int count() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
        cq.select(getEntityManager().getCriteriaBuilder().count(rt));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        return ((Long) q.getSingleResult()).intValue();
    }
} 
```

arabafacade.java：

```
@Stateless
public class ArabaFacade extends AbstractFacade<Araba> {
    @PersistenceContext(unitName = "WebApplication1PU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public ArabaFacade() {
        super(Araba.class);
    }
} 
```

List.XHTML 文件：

```
 <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.ListArabaTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">

            <h:form id="form" styleClass="jsfcrud_list_form">
                <p:growl id="growl" showDetail="true"/>   
                <h:panelGroup id="messagePanel" layout="block">
                    <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
                </h:panelGroup>
                <h:outputText escape="false" value="#{bundle.ListArabaEmpty}" rendered="#{arabaController.items.rowCount == 0}"/>
                <h:panelGroup rendered="#{arabaController.items.rowCount > 0}">
                    <h:outputText value="#{arabaController.pagination.pageFirstItem + 1}..#{arabaController.pagination.pageLastItem + 1}/#{arabaController.pagination.itemsCount}"/>&nbsp;
                    <h:commandLink action="#{arabaController.previous}" value="#{bundle.Previous} #{arabaController.pagination.pageSize}" rendered="#{arabaController.pagination.hasPreviousPage}"/>&nbsp;
                    <h:commandLink action="#{arabaController.next}" value="#{bundle.Next} #{arabaController.pagination.pageSize}" rendered="#{arabaController.pagination.hasNextPage}"/>&nbsp;

                    <p:dataTable id="araba" var="item" value="#{arabaController.mediumCarsModel}"  rowKey="#{item.idaraba}" paginator="true" rows="20"  
                                 selection="#{arabaController.selected}" selectionMode="single" >

                        <p:ajax event="rowSelect" listener="#{arabaController.onRowSelect}"   
                     update=":form:display :form:growl" oncomplete="carDialog.show()"  />  

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListArabaTitle_idaraba}"/>
                            </f:facet>
                            <h:outputText value="#{item.idaraba}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListArabaTitle_marka}"/>
                            </f:facet>
                            <h:outputText value="#{item.marka}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListArabaTitle_renk}"/>
                            </f:facet>
                            <h:outputText value="#{item.renk}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListArabaTitle_yil}"/>
                            </f:facet>
                            <h:outputText value="#{item.yil}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListArabaTitle_model}"/>
                            </f:facet>
                            <h:outputText value="#{item.model}"/>
                        </p:column>

                    </p:dataTable>

                    <p:dialog id="dialog" header="Car Detail" widgetVar="carDialog" resizable="false"  
                showEffect="explode" hideEffect="explode">  

                     <h:panelGrid id="display" columns="2" cellpadding="4">  
                    <h:outputText value="#{bundle.ViewArabaLabel_idaraba}"/>
                    <h:outputText value="#{arabaController.current.idaraba}" title="#{bundle.ViewArabaTitle_idaraba}"/>
                    <h:outputText value="#{bundle.ViewArabaLabel_marka}"/>
                    <h:outputText value="#{arabaController.current.marka}" title="#{bundle.ViewArabaTitle_marka}"/>
                    <h:outputText value="#{bundle.ViewArabaLabel_renk}"/>
                    <h:outputText value="#{arabaController.current.renk}" title="#{bundle.ViewArabaTitle_renk}"/>
                    <h:outputText value="#{bundle.ViewArabaLabel_yil}"/>
                    <h:outputText value="#{arabaController.current.yil}" title="#{bundle.ViewArabaTitle_yil}"/>
                    <h:outputText value="#{bundle.ViewArabaLabel_model}"/>
                    <h:outputText value="#{arabaController.current.model}" title="#{bundle.ViewArabaTitle_model}"/>
                </h:panelGrid>

                 </p:dialog>     

                </h:panelGroup>
                <br />
                <h:commandLink action="#{arabaController.prepareCreate}" value="#{bundle.ListArabaCreateLink}"/>
                <br />
                <br />
                <h:commandLink value="#{bundle.ListArabaIndexLink}" action="/index" immediate="true" />
            </h:form>
        </ui:define>
    </ui:composition>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:34:27.813

检查服务器日志中是否引发异常。我怀疑抛出了 NullPointerException。

在您引用的以下代码中`bundle`，但是我无法弄清楚`bundle`指向的位置。

```
<h:outputText value="#{bundle.ViewArabaLabel_idaraba}"/> 
```

如果在 JSF 页面中抛出异常，则不会呈现页面的其余部分。这可以解释为什么您的对话框是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:21:00.943

我在 Primefaces 3.3.1 上看到了类似的问题。我有一个表单，其中包含一些用于执行搜索的输入字段，然后是带有搜索结果的数据表。我注意到的是 AJAX 请求得到了响应

```
<partial-response>
<error>
<error-name>class java.lang.StringIndexOutOfBoundsException</error-name>
<error-message>String index out of range: -1</error-message>
</error>
</partial-response> 
```

我绝对没有服务器端错误。然后我重新安排了我的 Facelet 页面，我将搜索输入字段放在他们自己的字段中`<h:form>`，并将数据表放在另一个`<h:form>`具有不同 ID 的字段中。这似乎让事情变得更好了。

# jquery - Phonegap+JqueryMobile+themeroller for iOS

> ID：11504922
> 
> 赞同：0
> 
> 时间：2012-07-16T13:02:57.727
> 
> 标签：jquery, ios, mobile, cordova

我目前正在使用 phonegap 构建一个 ios 应用程序，并且我正在使用 Jquery 移动库。我做了一个这样的清单：

```
<div data-role="content" data-theme="a">
            <ul data-role="listview" data-inset="true">
                <li>
                    <a href="#test" rel="external">
                        <h3>Nederland</h3>
                        <p>Zoek ... door heel Nederland</p>
                    </a>
                </li>
            </ul>
</div> 
```

我想要这个列表有一些渐变颜色，所以我用 jquery mobile（在线应用程序）的 themeroller 制作了一个主题样本。如果我插入主题我没有得到渐变颜色，有人有一些经验这个？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:09:44.520

我的结论：我认为 phonegap 没有 css 3 渐变的可能性..

# jquery - `window.XMLHttpRequest` 未定义

> ID：11504926
> 
> 赞同：1
> 
> 时间：2012-07-16T13:03:06.380
> 
> 标签：jquery, node.js, window, xmlhttprequest

我正在尝试修复 javascript`window`元素问题。我已经完成了经典：

*   `npm install jQuery`
*   `npm update`

然后，在第 1 行的“server.js”文件中

```
var $ = require('jQuery'); 
```

在我的 Ubuntu 上，这段代码运行良好，没有问题，应用程序继续运行。在 Windows 7 上，有一个我无法与之战斗的怪物。
在我的 cmd 上写`node server.js`（具有管理员权限），我看到这个消息：

![在此处输入图像描述](../Images/83b20f7d31d1ac8599880af579d48bfb.png)

我只是无法接受这个原因：`window.XMLHttpRequest is undefined`。我是一个好奇的人，所以我发现在哪里`window.XMLHttpRequest`初始化以及谁/什么为此工作：

在[http://github.com/coolaj86/node-jquery/blob/master/lib/node-jquery.js](http://github.com/coolaj86/node-jquery/blob/master/lib/node-jquery.js)的第 8 行。

```
window.XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest; 
```

为什么不做它的工作？
[https://github.com/driverdan/node-XMLHttpRequest/blob/master/lib/XMLHttpRequest.js](https://github.com/driverdan/node-XMLHttpRequest/blob/master/lib/XMLHttpRequest.js)这里是xmlhttprequest代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:23:49.830

解决方案：
- 安装 python 从 2.5.0 到 3.0.0 版本（免费）
- 安装 Visual Express 2010 或更高版本（免费）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:14:15.403

您需要使用 npm 安装 xmlhttprequest 模块：

```
 npm install xmlhttprequest 
```

但通常，它是仅浏览器的对象，您应该在服务器上使用它： [http ://nodejs.org/docs/latest/api/http.html](http://nodejs.org/docs/latest/api/http.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T16:09:40.017

您需要手动修补`node_module/jquery/lib/node-jquery.js`文件！

将这些行（在第 4 行和第 5 行附近）从：

```
if(window == null ) {
    window = require('jsdom').jsdom().createWindow();
    ... 
```

至：

```
if (!window || !window.document) {
    window = require('jsdom').createWindow();
    window.document = require('jsdom').jsdom();
    ... 
```

# c# - 在 C# 存储库中应用 DDD 原则

> ID：11504931
> 
> 赞同：4
> 
> 时间：2012-07-16T13:03:25.203
> 
> 标签：c#, domain-driven-design

我有一个相对简单的域模型，如图所示。我想在 DDD 定义的域对象中维护这个逻辑。

每个域对象都是一个抽象类，只包含其各自的成员和域逻辑。这些类的具体实现由存储库返回，提供给服务（使用 DI）。

我遇到的麻烦是了解如何处理创建新实体所需的情况。例如，域逻辑规定：

可以将帐户添加到`Group`（创建`Member`实体）。

*   将帐户添加到组时，新`Member`实体的`Value`属性必须设置为已在`Group`.

*   Group 的每个其他成员的值都必须增加 1。

我可以将其实现`Member AddMember(Account account)`为`Group`. 但是，此方法需要以某种方式实例化一个新`Member`的以添加到 Group 的 Members 集合中。

由于域对象没有对应用程序中更上层的层的引用，并且域对象本身是抽象的，我不确定如何构建 Member 的新实例。

我考虑过`abstract protected Member CreateMember()`在对象上定义一个具体实现可以实现的方法的可能性，`Group`但这对我来说似乎很混乱，并且让我担心我可能误解了更基本的东西。

在努力忠于 DDD 原则的同时，我将如何实施这个模型？

![领域实体图](../Images/f428c90f6c23547857ef26bb1ba466fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:16:12.637

您可能想要创建一个负责创建新成员对象的 MemberFactory（作为域服务）。请参阅此[答案](https://stackoverflow.com/a/571819/1210520)以获取一个很好的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:12:32.887

我认为这里的基本问题是您的域对象是抽象的。域对象应该几乎总是具体的类（尽管有一些例外），它们实现了所有必要的域逻辑。

存储库只是与外部数据源（例如数据库）的接口，不应影响您的域的工作方式。通过让存储库返回对象的实际实现，您将域逻辑与存储库耦合。

您应该重新考虑您的设计，以便您的实体是具体的类。一起，您的域对象应该实现所有域逻辑，而不考虑外部服务/存储库。

# binding - MVVM DataGrid SelectedItem 绑定未更新

> ID：11504934
> 
> 赞同：1
> 
> 时间：2012-07-16T13:03:29.103
> 
> 标签：binding, mvvm, .net-4.0, wpfdatagrid, selecteditem

我是 .Net 和 C# 的新手，对绑定有点困惑。我有实现 MVVM 并显示 DataGrid 的应用程序。我想要实现的是，当用户按下某个组合键时，当前选定单元格的内容会被复制到下面行中的单元格中。我尝试将 DataGrid 的 SelectedItem 绑定到 ViewModel 属性，但它永远不会更新。CommandParameter 也不起作用，项目计数始终为 0。所以我无法提取用户选择的单元格，也无法读取所选单元格的内容。有没有人建议如何解决这个问题或实现这个功能？提前致谢。代码：xml：

```
<DataGrid Grid.Row="1" 
          Grid.Column="0" 
          Grid.ColumnSpan="9" 
          AutoGenerateColumns="False" 
          Height="Auto" 
          HorizontalAlignment="Left" 
          Name="dataGrid" 
          VerticalAlignment="Top" 
          Width="{Binding ElementName=grid4,Path=Width}"
          ScrollViewer.CanContentScroll="False" 
          FrozenColumnCount="1" 
          SelectionUnit="Cell" 
          SelectionMode="Extended" 
          CanUserSortColumns = "False" 
          CanUserReorderColumns="False" 
          CanUserResizeRows="False" 
          RowHeight="25" 
          RowBackground="LightGray" 
          AlternatingRowBackground="White"
          ScrollViewer.VerticalScrollBarVisibility="Visible" 
          ScrollViewer.HorizontalScrollBarVisibility="Visible"
          ItemsSource="{Binding Layers, Mode=TwoWay}"  
          SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.Selection, Mode=TwoWay}">
    <DataGrid.InputBindings>
        <KeyBinding Gesture="Shift" 
                    Command="{Binding ItemHandler}" 
                    CommandParameter="{Binding ElementName=dataGrid, Path=SelectedItems}">
        </KeyBinding>
    </DataGrid.InputBindings>
</DataGrid> 
```

视图模型：

```
private float _selection = 0.0f;
    public float Selection
    {
        get
        {
            return _selection;
        }
        set
        {
            if (_selection != value)
            {
                _selection = value;
                NotifyPropertyChanged("Selection");
            }
        }
    } 
```

...

```
 public DelegateCommand<IList> SelectionChangedCommand = new DelegateCommand<IList>(
        items =>
        {
            if (items == null)
            {
                NumberOfItemsSelected = 0; 
                return;
            }
            NumberOfItemsSelected = items.Count;
        });
    public ICommand ItemHandler
    {
        get
        {
            return SelectionChangedCommand;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T13:24:43.350

编辑：**SelectionUnit=Cell 不适用于 SelectedItem**

这是正常的 mvvm 方式：

第一个要在每一行中显示的对象类型

```
 public class MyObject {} 
```

第二个包含集合和所选项目的视图模型

```
 public class MyViewmodel
 {
    public ObservableCollection<MyObject> MyItems {get;set;}
    public MyObject MySelectedItem {get;set;}

 } 
```

xml 数据网格

```
 <DataGrid ItemsSource="{Binding MyItems}" SelectedItem="{Binding MySelectedItem, Mode=TwoWay}"/> 
```

所以这就是你所拥有的。如果您现在想创建一个“复制”行的命令，您可以创建一个新对象 MyObject 并从您的 MySelectedItem 复制值，然后将新的 MyObject 添加到您的集合中。

但也许我不明白你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T02:46:54.197

我认为你可以添加一个依赖属性。这是属性答案：

```
public class UIElementMouseRightButtonDownCommandBehavior : CommandBehaviorBase<UIElement>
{
    public UIElementMouseRightButtonDownCommandBehavior(UIElement obj)
        : base(obj)
    {
        if (obj == null) throw new System.ArgumentNullException("obj");
        obj.MouseRightButtonDown += OnMouseRightButtonDown;
    }

    private void OnMouseRightButtonDown(object sender, MouseButtonEventArgs e)
    {
        ExecuteCommand();
    }       
} 
```

另一个类：

```
 public class MouseRightButtonDown
{
    private static readonly DependencyProperty MouseRightButtonDownCommandBehaviorProperty = DependencyProperty.RegisterAttached(
        "MouseRightButtonDownCommandBehavior",
        typeof(UIElementMouseRightButtonDownCommandBehavior),
        typeof(MouseRightButtonDown),
        null);

    public static readonly DependencyProperty CommandProperty = DependencyProperty.RegisterAttached(
        "Command",
        typeof(ICommand),
        typeof(MouseRightButtonDown),
        new PropertyMetadata(OnSetCommandCallback));

    public static void SetCommand(UIElement element, ICommand command)
    {
        element.SetValue(CommandProperty, command);
    }

    public static ICommand GetCommand(UIElement element)
    {
        return element.GetValue(CommandProperty) as ICommand;
    }

    private static void OnSetCommandCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        UIElement element = dependencyObject as UIElement;
        if (element != null)
        {
            UIElementMouseRightButtonDownCommandBehavior behavior = GetOrCreateBehavior(element);
            behavior.Command = e.NewValue as ICommand;
        }
    }

    private static UIElementMouseRightButtonDownCommandBehavior GetOrCreateBehavior(UIElement element)
    {
        UIElementMouseRightButtonDownCommandBehavior behavior = element.GetValue(MouseRightButtonDownCommandBehaviorProperty) as UIElementMouseRightButtonDownCommandBehavior;
        if (behavior == null)
        {
            behavior = new UIElementMouseRightButtonDownCommandBehavior(element);
            element.SetValue(MouseRightButtonDownCommandBehaviorProperty, behavior);
        }
        return behavior;
    }
} 
```

然后在您的视图模型文件中：

```
public ICommand SelectNameCommand
    {
        get { return new Command(P => SelectName()); }
    } 
```

我认为您的 XAML 是正确的。

# svn - 错误：SVN 提交后挂钩失败（退出代码 16），没有输出

> ID：11504937
> 
> 赞同：1
> 
> 时间：2012-07-16T13:03:31.843
> 
> 标签：svn, tortoisesvn, visualsvn-server, svn-hooks

执行 SVN 提交时出现以下错误。

> 错误：提交后挂钩失败（退出代码 16），没有输出。

我的 post-commit.bat 文件有以下代码。

```
svn checkout file:///D:/Repositories/site1/trunk D:\svncheckout\site1
robocopy D:\svncheckout\site1 \\dev-server\site1 
```

我在 Windows Server 2008 Standard 上将 VisualSVN 服务作为本地帐户运行。

但是 post-commit.bat 在命令提示符下运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:52:23.443

`robocopy`您在挂钩中运行的命令似乎存在问题。**错误代码 16**表示 robocopy 的使用错误或由于对源目录或目标目录的访问权限不足而导致的错误。我建议您检查所涉及的路径。

# semantic-markup - 查找与名词输入相关的形容词

> ID：11504940
> 
> 赞同：5
> 
> 时间：2012-07-16T13:03:43.683
> 
> 标签：semantic-markup, wordnet, semantic-analysis, part-of-speech

我想尝试根据用户在搜索框中输入的词来确定用户的个性特征。这是一个例子：

**搜索词**：“电脑”

**检测到的性格/描述符**：分析的、逻辑的、系统的、有条理的

* * *

我知道这项任务非常重要。我以前使用过 WordNet，但我不确定它是否包含每个名词节点的形容词云。词性标注本身就是一头野兽，所以我不确定建立自己的语料库并搜索与关键字共存的形容词词频是否是最好的主意，但我将在下面解释。

我目前正在使用维基百科转储，在删除停用词（and、or、of、to、a 等）后处理每篇文章的词频。我的想法是可能在整个语料库中搜索形容词（使用 WordNet 进行词性标注）和名词的共存（例如，形容词**逻辑**经常与名词**计算机**同时出现），并且基于相对的词干形容词频率，判断它是否与名词语义相关。潜在的应用是巨大的。

* * *

另一个想法是将名词词干，搜索以该词干开头的形容词，然后搜索该形容词的同义词。例子：

**搜索词**：“电脑”

**词干**：“计算-”

**带词干的形容词**：计算

**同义词**：？？？

* * *

问题是名词的形容词形式并不总是有形容词形式，一些名词词干会匹配到非常错误的形容词。**不好**例如：

**搜索词**：“running”（技术上是动名词，但仍然是名词）

**词干**：“跑——”

**带词干的形容词**：流鼻涕

**同义词**：不是我想要的词。想找到像“运动”、“有动力”、“有纪律”这样的词

* * *

这是以前做过的事情吗？你对我如何处理这个问题有什么建议吗？这几乎就像我正在为文档中的“重要”单词生成形容词云一样。

**编辑：我意识到这个问题没有“正确”的答案。我将奖励赏金给提出具有最佳理论潜力的方法的人。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:58:49.517

WordNet 没有您需要的东西 - 它（几乎）不包含有关非同义词或未分层链接的单词之间关系的信息（椅子->家具）等。

只需使用 OpenNLP (http://opennlp.apache.org) 并解析大量文本 - OpenNLP 解析器将检测句子中的动词-形容词/名词-形容词，从而允许您构建关系数据库。此时剩下的就是根据预定义的形容词列表过滤数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:42:03.670

假设您有大量的计算资源可以投入使用，我建议您使用诸如超空间语言模拟 (HAL) 之类的简单方法来为您的 Wikipedia 转储建立一个 Term X Term 矩阵。然后，您的算法可能类似于：

*   给定一个查询词/词，找到它的（HAL）向量。
*   对于向量，找到权重最高的形容词成分。
    *   为了有效地做到这一点，您可能希望使用字典（如 WordNet）来预处理您的术语列表（即由 HAL 提取的术语），以便您知道（在处理查询之前）哪些可以用作形容词。
*   对于每个形容词，在您的 HAL 空间中找到 N 个最相似的向量。
    *   可选：您可以通过查找在您的搜索词中同时出现的词来缩小此列表。

这种方法基本上在代码和数据结构方面为了简单而牺牲了内存和计算效率。然而，对于我认为你想要的东西，它应该做得很好。第一步将为您提供最常与查询词相关的形容词，而 HAL 空间中的向量相似性（第 3 步）将提供范式相关的词（大致可以相互替换，所以如果您开始使用某种形容词，就其与查询词的关系而言，您应该得到更多的形容词“喜欢它”），这应该是您正在寻找的“云”的一个相当好的代理。

# javascript - ExtJs - 调试方法

> ID：11504942
> 
> 赞同：1
> 
> 时间：2012-07-16T13:03:47.947
> 
> 标签：javascript, extjs

ExtJs/Sencha 新手在这里。试图调试在大型系统中不起作用的东西。有一个 URL，当点击时，应该做某事。我怎么知道它的点击事件绑定在哪里完成？我在 Firebug 中看不到任何线索。处理程序可能已被其类/ID/类型/名称/等绑定。哪些工具有用。试过 Dynatrace，不是很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:10:16.793

有一个插件可以将 ExtJS 智能添加到 Firebug：

[http://www.illuminations-for-developers.com/](http://www.illuminations-for-developers.com/)

您可以使用该附加组件来获取 ExtJS 组件的句柄。另一种方法是在 DOM 检查器中查找组件 ID（以“ext-”开头），然后使用 Ext.getCmp() 传入组件 ID 来获取组件的句柄。

一旦有了组件的句柄，就可以使用 ExtJS API 来查明组件上是否有点击监听器：[http ://docs.sencha.com/ext-js/4-0/#!/api /Ext.util.Observable-method-hasListener](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.Observable-method-hasListener)

# javascript - 是否有任何 JavaScript/jQuery 插件可以让我在播放歌曲达到特定播放时间时触发动作？

> ID：11504943
> 
> 赞同：1
> 
> 时间：2012-07-16T13:03:48.027
> 
> 标签：javascript, jquery, audio, media

我需要一个用于处理播放音频的 JavaScript/jQuery 插件，但我还需要能够让我的代码在达到特定持续时间时触发（例如，当歌曲到达 1:06 时，它会显示警报）。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:23:02.113

我不确定这是否是您想要的，但值得一看... [http://popcornjs.org/](http://popcornjs.org/)

# php - 将 Facebook 'share' 元标记添加到 drupal

> ID：11504949
> 
> 赞同：0
> 
> 时间：2012-07-16T13:04:07.487
> 
> 标签：php, facebook, drupal, drupal-7, drupal-modules

我对 drupal 很陌生，我需要知道是否可以使用元标记添加共享按钮。要求是显示链接列表和旁边的每个链接的共享按钮。这应该共享链接中给出的页面。这可能吗？如果是这样，怎么做？我目前可以使用`<fb:like></fb:like>`标签添加一个喜欢的按钮。谷歌搜索没有多大帮助。仅供参考，我使用drupal 7。

谢谢，阿南特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:03:02.323

如果您正在寻找将元标记添加到 drupal 7 页面，您应该使用[drupal_add_html_head](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_html_head/7) ()

这是添加描述元标记的示例。

```
drupal_add_html_head(array(
    '#tag'          => 'meta',
    '#attributes'   => array(
        'property'  => 'description',
        'content'   => 'this is my description tag',
    )), "YOU_KEY"); 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:42:30.110

我相信，这是非常可行的。如果您的链接是“http://www.google.com”并且您想在 FB 上分享此 URL，此链接将帮助您制作链接 [http://developers.facebook.com/docs/reference/plugins/喜欢/](http://developers.facebook.com/docs/reference/plugins/like/)

Google plus 也是如此 - [https://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/) Twitter 按钮 - twitter.com/about/resources/buttons

您需要为每个标签传递 URL，它将与您正在构建的链接相同。

# php - php 返回整个 html 文件而不是字符串（ajax）

> ID：11504955
> 
> 赞同：3
> 
> 时间：2012-07-16T13:04:37.043
> 
> 标签：php, javascript, html, ajax

我正在一个使用 AJAX 的网站上工作，但我遇到了死胡同。我的 javascript 有一个名为 validate 的函数，它从“名称”和“密码”字段中获取并将其发送到 php，等待响应。

```
function Validate() {
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {

        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            if (xmlhttp.responseText.value == 'Invalid'){

                $("#box").effect('shake',150);  

                document.getElementById("validationText").innerHTML = xmlhttp.responseText;
            }
            else if (xmlhttp.reponseText.value == 'Success!'){  
            console.log(xmlhttp.responseText.value)
                document.getElementById("validationText").innerHTML = xmlhttp.responseText;

            }
        }
    }

    var name = document.getElementById("name").value;
    var password = document.getElementById("password").value;

    var arg = "JqueryPhp.php?name=" + name + "&password=" + password;

    xmlhttp.open("GET", arg, true);
    xmlhttp.send();
} 
```

php 文件应返回“成功！” 或“无效”，视情况而定。

```
<?php

    $con = mysql_connect("localhost","root","root");

    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

      mysql_select_db("collegedatabase", $con);

      $getUserName = $_GET["name"];
      $getPassword = $_GET["password"];

      $result = mysql_query("SELECT * FROM `admin`");
      $Success = false;

      /*    if the user entered does not exist, run the function which shakes the screen and add a bit of text to say that the username is invalid  */

        while ($row = mysql_fetch_array($result)){
            if ($row['userName'] == $getUserName && $row['password'] == $getPassword){
                echo "Success!";
                $Success = true;
                break;
            }
        }
        if($Success === false) {
            echo ('Invalid');
        }

    ?> 
```

相反，它返回一个完整的 html 文件，字符串位于 body 标记内。我从萤火虫记录的响应如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Untitled Document</title>

</head>

<body>

Invalid</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:12:56.803

`exit;`在 PHP 代码的末尾加上一个。

您可能在最后运行了一些东西，导致呈现完整的 html 页面。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-16T13:14:03.217

我建议你使用 Jquery 函数 $.POST

```
$.post("URL.php",{
       //Params(post)
    },
     function(data){
         //Answer  (data)
    }) 
```

# c - 如何通过单击按钮在后端运行代码？在 gtk+ 中执行此操作的功能是什么？

> ID：11504958
> 
> 赞同：-1
> 
> 时间：2012-07-16T13:04:49.180
> 
> 标签：c, function, user-interface, callback, gtk

我在 gtk 中创建了一个显示信息的窗口。关于我的项目，它有一个下一步按钮。现在我希望点击这个“下一步”按钮，我的算法应该运行，即

g++ -o output maxflow.cpp 应该执行。

有人能告诉我 gtk 中的函数是做什么的吗？它可以与 call_back() 一起用餐吗

我想知道如何实现这个？我是 GTK+ 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:15:34.223

有一个[`popen`](http://linux.die.net/man/3/popen)可以使用的标准 C 函数调用。

# delphi - Intraweb TIWUserSession 成员失去价值

> ID：11504959
> 
> 赞同：1
> 
> 时间：2012-07-16T13:04:52.873
> 
> 标签：delphi, intraweb

将 Delphi 2007 与 Intraweb 的捆绑版本一起使用。利用内置的用户**会话**机制。在用户会话单元中，我向 TIWUserSession 添加了公共成员（整数），这些成员在登录屏幕中被初始化。

我发现有时这些公共成员的值正在丢失：一些调用它们是正确的，但其他调用它们是未分配的整数。有没有其他人经历过这个？

此时我的解决方案是不依赖用户会话，而是使用 cookie 并根据 cookie 重新计算这些成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:38:44.137

除了您的会话即将到期或您的代码正在修改这些公共成员之外，用户会话成员的值应该在会话处于活动状态时保持不变。

# asp.net - Silverlight WCF 托管

> ID：11504961
> 
> 赞同：1
> 
> 时间：2012-07-16T13:04:56.060
> 
> 标签：asp.net, wcf, silverlight

我有一个带有 WCF 的 silverlight 应用程序。我已经在服务器上部署了这个应用程序进行测试，该应用程序是使用公共 IP 访问的。在同一台服务器上，我还托管了 silverlight 应用程序使用的 WCF 服务。这些服务也可以使用相同的公共 IP 但具有不同的端口来访问。在 XAP 文件中，我更新了服务参考 URL（使用公共 IP）并且应用程序运行良好。**后来我想在应用程序引用中我应该只使用localhost**而不是为这些服务使用公共 IP，因为 silverlight 应用程序和服务都在同一个 IIS 上，它会提高应用程序的响应时间。

ServiceReference 文件中的旧网址

```
http://public_ip:8080/servicename.svc 
```

新的 Urls ServiceReference 文件

```
http://localhost:8080/servicename.svc 
```

但是在这样做之后，我的应用程序没有工作。谁能帮我理解为什么我不能使用 localhost 作为服务参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:29:31.750

XAP 文件包含在客户端机器上运行的代码。在这种情况下，LocalHost 指的是托管浏览器会话的机器，而不是托管网站的服务器。在客户端计算机上，您需要完全限定的 URL 来查找服务。

# java - 如何添加从生成的命令链接

> ID：11504966
> 
> 赞同：0
> 
> 时间：2012-07-16T13:05:12.080
> 
> 标签：java, jsf, jstl

我正在使用以下代码并尝试使每一行都可点击并设置一些最重要的事件。

```
<table width="100%" class="TableSpace">

<ui:repeat var="damageinfo"
                            value="#{DamageDetails2.damageInfoAll}" varStatus="status">
    <h:commandLink>
        <tr class="row1 lineBorder" onclick="alert('Hello')">
            <td height="40">
                <h:outputText
                        value="#{damageinfo.damageID}" styleClass="LabelClass">
                </h:outputText>
            </td>
            <td height="40">
                <h:outputText
                        value="#{damageinfo.damageName}" styleClass="valueClass">
                </h:outputText>
            </td>
        </tr>
        <f:setPropertyActionListener target="#{carDetails.rootImage}"
                                    value="#{carDetails.carUrl2}" />
        <f:setPropertyActionListener target="#{carDetails.view}"
                                    value="#{carDetails.viewDetails['carUrl2']}" />
        <f:ajax event="action" render="ViewId" />
    </h:commandLink>
</ui:repeat>

</table> 
```

但它不起作用。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:49:19.203

这会生成[无效](http://validator.w3.org)的 HTML。`<a>`在 .周围有一个元素是非法的`<tr>`。浏览器行为未指定。根据所使用的网络浏览器品牌/版本的宽松程度，它可能会起作用，也可能不起作用，或者可能不会按照您想要的方式起作用。由于 JSF 最终只生成 HTML，因此它确实无法发挥任何魔力来使其按您想要的方式工作。

要么将 JS`onclick`处理程序放入`<tr>`元素中，要么放入`<h:commandLink>`中`<td>`，或者使用允许行选择的 PrimeFaces 之类的 3rd 方组件库，另请参见此[展示示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionInstant.jsf)。

### 也可以看看：

*   [HTML初学者教程](http://htmldog.com/guides/htmlbeginner/)

# android - 手机进入睡眠模式时丢失数据 [3G / WIFI] 连接

> ID：11504967
> 
> 赞同：1
> 
> 时间：2012-07-16T13:05:13.133
> 
> 标签：android, wifi, sip, 3g

我正在使用带有 ICS 的三星 Galaxy。

我正在开发一个 SIP 客户端。一旦手机进入睡眠模式，客户端就会失去与服务器的连接。尝试过安卓市场的“WIFI Lock”应用，并尝试设置WIFI_SLEEP_POLICY_NEVER，但目前没有成功。过去是否有人以编程方式解决了这种连接问题？我需要打开互联网连接。赌移动数据/WIFI，因为我不能失去与服务器的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:23:21.930

确保在您的清单中您拥有以下权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

它将用于将 Wi-Fi 睡眠策略设置为在连接到受信任的网络时从不睡眠。

> [http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

然后你只需要这样做：

```
Settings.System.putInt(getContentResolver(),
                Settings.System.WIFI_SLEEP_POLICY, 
            Settings.System.WIFI_SLEEP_POLICY_NEVER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:18:16.497

尝试进入 Wifi 设置，按菜单按钮并选择高级。在那里你会找到一个管理 wifi 睡眠策略的项目。
此外，如果 WIFI_SLEEP_POLICY_NEVER 不起作用，请检查您是否有权访问[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)。我不知道你应该使用哪一个，也许`WRITE_SYNC_SETTINGS`是`ACCESS_WIFI_STATE`、、、或。`CHANGE_NETWORK_STATE``CHANGE_WIFI_MULTICAST_STATE``CHANGE_WIFI_STATE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T20:36:48.277

我发现[这篇 SO 帖子](https://stackoverflow.com/a/5422400/62921)显然在 Android Bug Tracker 上有很多关于该问题的错误，即使有锁和权限也可能发生。

* * *

就我而言，我设法使 Lock 与我可以测试的所有设备一起工作。不知道你是如何尝试实现它的，所以这是我在互联网上找到的一个版本（对不起，如果我找不到作者）。

*注意：由于我在 C# 中使用 Xamarin Android，因此我的版本可能与 Java 版本略有不同，但逻辑应该保持不变。*

首先，您必须添加锁定 Wifi 的权限

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

其次你必须得到 wifiManager

```
wifiManager = (WifiManager) GetSystemService(WifiService); 
```

然后您必须编写代码以在适当的时间获取和释放锁。

```
private void AquireWifiLock() 
{
    if (wifiLock == null) 
    {
        wifiLock = wifiManager.CreateWifiLock(WifiMode.Full, "aTagForYourLock");
        wifiLock .Acquire();
    }
}

private void ReleaseWifiLock() 
{
    if (wifiLock == null) 
    {
        return;
    }

    wifiLock .Release();
    wifiLock = null;
} 
```

# matlab - 有效地相乘向量

> ID：11504968
> 
> 赞同：3
> 
> 时间：2012-07-16T13:05:13.930
> 
> 标签：matlab, matrix-multiplication

我有两个列形式的向量，例如：

```
a = 1
    2
    3
    4
    5

b = 2
    1
    3
    5
    4 
```

我正在使用以下代码来检索每个产品：

```
for i = 1 : length(a)
    ab(i) = a(i) * b(i);       
end 
```

这给出了：

```
ab = 2
     2
     9
     20
     20 
```

这很好，它产生了正确的答案，但它似乎有点低效；我认为在没有“for”循环的情况下必须有一种语法方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T13:07:20.877

尝试

`a.*b`

注意`.`之前的`*`，它告诉 Matlab 逐个元素地进行乘法运算。

# javascript - 需要 JavaScript 函数才能在 textarea 更改时运行

> ID：11504975
> 
> 赞同：1
> 
> 时间：2012-07-16T13:05:27.740
> 
> 标签：javascript, textarea

一旦我点击一个按钮，我就有一个`<td>`我正在变成一个 textArea 的东西。这工作正常。我也有一个 characterCounterEdit 函数，它也可以工作。唯一的事情是字符计数器仅在我单击文本区域中的光标时才起作用。我想在进入editCommentToggle() 后立即触发字符计数器功能。

JavaScript：

```
function editCommentToggle( id )
{
    theRow = document.getElementById("id"+id);
    //user = theRow.cells[0].innerHTML;
    //date = theRow.cells[1].innerHTML;
    com = theRow.cells[2].innerText ;

    idx = 2;
    maxlength = 250;

        // Comment field
        cell = theRow.cells[idx];
        while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

        spanTag = document.createElement("span"); 
        spanTag.innerHTML = "You have <strong><span id='commentsCounter'>"+maxlength+"</span></strong> characters left.<br/>"; 
        cell.appendChild(spanTag);
        element = document.createElement("textarea");
        element.id="commentsTextArea-"+id;
        element.rows="3";
        element.value = com;
        element.style.width = "400px";
        element.maxLength = "250";
        element.onfocus = element.onkeydown = element.onkeyup = function(){return characterCounterEdit('commentsCounter', maxlength, this);}; 
        cell.appendChild(element);

        $(function()
                {
                    setTimeout("syncCommentTableSizes()",0);    <%-- Run after HTC code --%>
                });

    // Actions field
    cell = theRow.cells[++idx];
    while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

    link = document.createElement("a");
    link.href = 'javascript:saveComment('+id+')';

    element = document.createElement( "img" );
    element.className = "smallicon edit"; // check if we need this changed
    element.src="../images/icon_save.gif";
    element.border="0";
    element.alt = "Save";

    link.appendChild( element );

    cell.appendChild(link);
    cell.appendChild( document.createTextNode("  ") );

    link = document.createElement("a");
    link.href = 'javascript:cancelCommentEdit('+id+')';

    element = document.createElement( "img" );
    element.className = "smallicon delete"; // check if we need this changed
    element.src="../images/icon_cancel.gif";
    element.border="0";
    element.alt = "Cancel";

    link.appendChild(element);
    cell.appendChild(link);
}

function characterCounterEdit(id, maxLen, inputElement)
{
    spanId = document.getElementById(id);

    if (spanId)
    {
        // Update the counter the user sees.
        var whatIsLeft = maxLen - inputElement.value.length;

        if ( whatIsLeft < 0 ) whatIsLeft = 0;
        spanId.innerText = whatIsLeft;
    }

    // Restrict user from entering more than the maxlen.
    if ( inputElement.value.length > maxLen )
    {
        inputElement.value = inputElement.value.substring( 0, maxLen );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:10:56.150

为什么不直接在`editCommentToggle()`. 你似乎暗示这是你想做的，但我不确定你为什么没有这样做？

```
function editCommentToggle( id )
{
   //code to get the element here first as pointed out by a comment below.

   characterCounterEdit('commentsCounter', maxlength, element);

   .... rest of the function

} 
```

# ios - 核心数据迁移到 iCloud

> ID：11504980
> 
> 赞同：0
> 
> 时间：2012-07-16T13:05:41.253
> 
> 标签：ios, core-data, icloud, core-data-migration

我有一个核心数据应用程序，它使用 NSSQLiteStoreType 作为持久存储。此应用程序已在 AppStore 中。现在我必须为数据同步添加 iCloud 支持。

请给我一个关于这个主题的文档链接或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:37:42.050

看看 2011 年和 2012 年的 WWDC 视频，这些视频讨论了 iCloud 和 Core Data。他们对基础知识有一些很好的解释，应该能让你顺利上路。任何拥有付费开发者订阅的人都可以在苹果的开发网站上获得它们。

# windows - 使用 VB.net 读取和写入命令提示符控制台

> ID：11504981
> 
> 赞同：0
> 
> 时间：2012-07-16T13:05:43.860
> 
> 标签：windows, vb.net, timer, command-prompt

我在其他地方问过类似的问题，但也许我没有以正确的方式问它，或者我不够清楚，所以我再问一次。

这是我想要得到的地方：

1.  打开 Windows 命令提示符
2.  通过 dos 命令运行 DOS 应用程序
3.  阅读 dos 框中显示的返回文本，并将其显示在我的 windows 窗体中的文本框中。这需要定期（例如，每秒）重复一次，并且不应关闭 dos 框。

我一直在尝试使用 Process 和 StartInfo 命令，但它们只运行应用程序并立即关闭进程。我需要保持 dos 框打开并继续阅读由 dos 应用程序添加到其中的任何新文本。我也遇到了这个似乎回答了我的问题的线程，但它是在 C# 中，我无法转换它：

[阅读 Windows 命令提示符 STDOUT](https://stackoverflow.com/questions/8892445/read-windows-command-prompt-stdout?rq=1)

我确实到达了打开命令提示符并启动应用程序的部分，但我不知道如何读取它不时返回到 dos 框控制台的数据。我想经常检查更改，以便我可以对它们采取行动，也许使用计时器控件。

请帮忙。

谢谢！

我运行了 Stevedog 提供的代码，并像这样使用它：

```
 Private WithEvents _commandExecutor As New CommandExecutor()

  Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    _commandExecutor.Execute("c:\progra~2\zbar\bin\zbarcam.exe", "")
  End Sub

  Private Sub _commandExecutor_OutputRead(ByVal output As String) Handles _commandExecutor.OutputRead
    txtResult.Text = output
  End Sub 
```

但我得到的只是空白的dos框。zbarcam 应用程序运行正常，因为我可以看到摄像头预览，并且我还可以看到它检测到 QR 码，但是文本没有显示在 dos 框中，并且`_commandExecutor_OutputRead`sub 不会被触发，除非我关闭 DOS 框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:19:18.730

该 C# 示例很糟糕，因为它没有显示如何实际读取标准输出流。创建一个这样的方法：

```
Public Function ExecuteCommand(ByVal filePath As String, ByVal arguments As String) As String
    Dim p As Process
    p = New Process()
    p.StartInfo.FileName = filePath
    p.StartInfo.UseShellExecute = False
    p.StartInfo.RedirectStandardInput = True
    p.StartInfo.RedirectStandardOutput = True
    p.Start()
    p.WaitForExit()
    Return p.StandardOutput.ReadToEnd()
End Function 
```

然后你可以这样称呼它：

```
Dim output As String = ExecuteCommand("mycommand.exe", "") 
```

当然，这会进行同步调用。如果您希望它异步调用命令行并在完成时引发一个事件，这也是可能的，但需要更多的编码。

例如，如果您想异步执行此操作，并且只是在固定时间间隔内定期检查更多输出，那么这是一个简单的示例：

```
Public Class CommandExecutor
    Implements IDisposable

    Public Event OutputRead(ByVal output As String)

    Private WithEvents _process As Process

    Public Sub Execute(ByVal filePath As String, ByVal arguments As String)
        If _process IsNot Nothing Then
            Throw New Exception("Already watching process")
        End If
        _process = New Process()
        _process.StartInfo.FileName = filePath
        _process.StartInfo.UseShellExecute = False
        _process.StartInfo.RedirectStandardInput = True
        _process.StartInfo.RedirectStandardOutput = True
        _process.Start()
        _process.BeginOutputReadLine()
    End Sub

    Private Sub _process_OutputDataReceived(ByVal sender As Object, ByVal e As System.Diagnostics.DataReceivedEventArgs) Handles _process.OutputDataReceived
        If _process.HasExited Then
            _process.Dispose()
            _process = Nothing
        End If
        RaiseEvent OutputRead(e.Data)
    End Sub

    Private disposedValue As Boolean = False
    Protected Overridable Sub Dispose(ByVal disposing As Boolean)
        If Not Me.disposedValue Then
            If disposing Then
                If _process IsNot Nothing Then
                    _process.Kill()
                    _process.Dispose()
                    _process = Nothing
                End If
            End If
        End If
        Me.disposedValue = True
    End Sub

    Public Sub Dispose() Implements IDisposable.Dispose
        Dispose(True)
        GC.SuppressFinalize(Me)
    End Sub
End Class 
```

然后你可以像这样使用它：

```
Public Class Form1
    Private WithEvents _commandExecutor As New CommandExecutor()

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        _commandExecutor.Execute("D:\Sandbox\SandboxSolution\ConsoleCs\bin\Debug\ConsoleCs.exe", "")
    End Sub

    Private Sub _commandExecutor_OutputRead(ByVal output As String) Handles _commandExecutor.OutputRead
        Me.Invoke(New processCommandOutputDelegate(AddressOf processCommandOutput), output)
    End Sub

    Private Delegate Sub processCommandOutputDelegate(ByVal output As String)
    Private Sub processCommandOutput(ByVal output As String)
        TextBox1.Text = output
    End Sub

    Private Sub Form1_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
        _commandExecutor.Dispose()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:04:06.223

当涉及到事件时，这些转换器通常会失败。

* * *

[该代码](https://stackoverflow.com/questions/8892445/read-windows-command-prompt-stdout?rq=1)的直接翻译如下所示：

```
Dim proc as Process

Sub RunApp
    proc = new Process()
    proc.StartInfo.FileName = "your_app.exe"
    proc.StartInfo.Arguments = ""
    proc.StartInfo.UseShellExecute = false
    proc.StartInfo.RedirectStandardInput = true
    proc.StartInfo.RedirectStandardOutput = true
    AddHandler proc.OutputDataReceived, AddressOf InterProcOutputHandler
    proc.Start()
    proc.WaitForExit()
End Sub

Sub InterProcOutputHandler(sendingProcess as object, outLine as DataReceivedEventArgs)
    'Read data here

    'Send command if necessary
    proc.StandardInput.WriteLine("your_command")
End Sub 
```

* * *

`proc.OutputDataReceived`不是属性，而是[事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)。

要订阅事件，在`C#`你使用`event += handler`，而在`VB.NET`你使用`AddHandler event, AddressOf handler`。

# actionscript-3 - Flex TypeError：错误 #1034：类型强制 - 对于同一模块中的两个不相关事件，父/子 Sprite

> ID：11504983
> 
> 赞同：0
> 
> 时间：2012-07-16T13:05:52.170
> 
> 标签：actionscript-3, apache-flex, flex4.5, flexbuilder, coercion

此问题已停止开发，我无法弄清楚出了什么问题。我不清楚 flex 是如何连接这两个不相关的事件的。Some1 Sprite 在 MouseEvent.MOUSE_UP 上调度 Some1Event.MOUSE_UP 事件，同时停止 MouseEvent 的传播。Some1, Some2 的父级在 Some2 上停止 MouseEvent.MOUSE_UP 时类似地调度 Some2Event.MOUSE_UP。强制错误在 Some2Event 和 Some1Event 之间。有了这个错误，我尝试了其他 #1034 解决方案：

1.  在主应用程序中添加 Some1Event 和 Some2Event 的实例化。
2.  用“新事件”包装 - 我无法将事件作为事件类型分派，因为它具有自定义属性。

我还尝试了以下代码：

```
 import flash.utils.getQualifiedClassName;
    private var systemManager:SystemManager=new SystemManager;

    private function addEventTracer():void
    {
        systemManager.addEventListener(Some1Event.MOUSE_UP, eventTracer, true);
    }

    private function eventTracer(event:Event):void
    {
        trace("Got ", event.type, "from", event.target, "as",
            getQualifiedClassName(event));
    } 
```

但它没有报告任何内容。

在调度事件 Some2Event 时，我收到错误

```
TypeError: Error #1034: Type Coercion failed: cannot convert  ::Some2Event@117c6c831 to Some1Event.
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at ::Some2/mouseUpHandler()[Some2.as:154] 
```

代码结构为 Some2 (Sprite) 有许多 Some1 (Sprite) 的子代。在 Some2 中，我在 Some1 Sprite 上侦听 MouseEvent.MOUSE_UP 事件，在该侦听器中，停止传播并调度自定义 Some2Event：

```
 private function mouseUpHandler(event:MouseEvent):void{
        event.stopImmediatePropagation();
        var ev:Some2Event=new Some2Event(Some2Event.MOUSE_UP);
        ev.node2=this;
        dispatchEvent(ev); 
```

在 Some2 中，我有以下注册的事件侦听器：

```
 private function registerListeners():void
    {
        addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler); //detects mouse up on Some2 Sprite
        addEventListener(Some1Event.MOUSE_UP, some1MouseUpHandler); //detects mouse up on Some1 Sprite, custom event, Some1 mouse up stopped in Some1
        addEventListener(Event.ADDED, addedHandler); //detecting add of child Some1
    } 
```

Some1Event 和 Some2Event 几乎相同：

```
import flash.display.Sprite;
import flash.events.Event;

public class Some1Event extends Event
{

    public static const MOUSE_DOWN:String = "MOUSE_DOWN";
    public static const MOUSE_UP:String = "MOUSE_UP";

    public var node:Sprite;

    public function Some1Event(type:String, bubbles:Boolean=true, cancelable:Boolean=false)
    {
        super(type, bubbles, cancelable);
    }
    public override function clone():Event
    {
        return new Some1Event(type, bubbles, cancelable);
    }

} 
```

和 Some2Event：

```
import flash.display.Sprite;
import flash.events.Event;

public class Some2Event extends Event
{
    public static const MOUSE_DOWN:String = "MOUSE_DOWN";
    public static const MOUSE_UP:String = "MOUSE_UP";

    public var node2:Sprite;

    public function Some2Event(type:String, bubbles:Boolean=true, cancelable:Boolean=false)
    {
        super(type, bubbles, cancelable);
    }

    public override function clone():Event
    {
        return new Some2Event(type, bubbles, cancelable);
    }

} 
```

任何帮助绝对值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:54:23.523

Some1Event 中的常量：

```
public static const MOUSE_DOWN:String = "MOUSE_DOWN";
public static const MOUSE_UP:String = "MOUSE_UP"; 
```

Some2Event 中的常量：

```
public static const MOUSE_DOWN:String = "MOUSE_DOWN";
public static const MOUSE_UP:String = "MOUSE_UP"; 
```

在每种情况下，常数值都是相同的。'MOUSE_DOWN' 或 'MOUSE_UP' 。您希望 Flex 如何区分两者？不能！将常量值更改为唯一

在 Some1Event 中：

```
public static const MOUSE_DOWN:String = "MOUSE_DOWN_SOME1";
public static const MOUSE_UP:String = "MOUSE_UP_SOME1"; 
```

在 Some2Event 中：

```
public static const MOUSE_DOWN:String = "MOUSE_DOWN_SOME2";
public static const MOUSE_UP:String = "MOUSE_UP_SOME2"; 
```

现在，Flex 会将这两个事件视为不同/唯一的，并且在分派另一个事件时不会为一个事件调用侦听器。

# c - 格式化函数声明的 Emacs 规则

> ID：11504988
> 
> 赞同：0
> 
> 时间：2012-07-16T13:06:12.887
> 
> 标签：c, emacs, code-formatting

我正在尝试定义一个命令来自定义我在 emacs 中的 C/C++ 函数定义。

我想要获得的是自动重新格式化代码，如下所示：

```
type func(type arg1,
          type arg2,
          ...
          type argN) { 
```

从通用声明开始，例如：

```
type func(type arg1, type arg2, ..., type argN) { 
```

我的想法是搜索一个函数定义的具体模式，并在每个逗号后用新行替换它，然后调整缩进。

我用正则表达式等搞砸了一段时间，但我想不出任何东西。

我无法弄清楚如何在使用我的正则表达式获得的字符串中正确执行替换。

接下来是我到目前为止得到的一切，基本上什么都没有。

```
(defun fix-arg-definition ()
  (interactive)
  (goto-char (point-min))
  (replace-regexp "([^,()]+\\([,][^,()]+\\)+)[ ]*{" "WHAT TO PUT HERE?")
) 
```

我对在 emacs 中自定义编码风格的世界完全陌生，事实证明这比我想象的要困难。任何帮助表示赞赏。

**更新**

我设法得到了一些似乎有效的东西，尽管我仍然必须尝试彻底测试它。

```
(defun fix-args ()
  (interactive)
  (goto-char 1)
     (while (search-forward-regexp "\\(([^,()]+\\([,][^,()]+\\)+)[ ]*{\\)" nil t) 
     (replace-match (replace-commas) t nil)))

(defun replace-commas ()
   (let (matchedText newText)
       (setq matchedText
       (buffer-substring-no-properties
       (match-beginning 1) (match-end 1)))
   (setq newText
   (replace-regexp-in-string "," ",\n" matchedText) )
 newText)) 
```

我可以忍受这个，然后用另一个命令手动调整缩进，至少现在是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T00:29:57.940

您可以通过录制键盘宏轻松做到这一点：

这是我之前准备的一个`edit-named-kbd-macro`。

```
;; Keyboard Macro Editor.  Press C-c C-c to finish; press C-x k RET to cancel.
;; Original keys: M-C-a C-SPC M-C-n <<replace-regexp>> , RET , C-q LFD RET M-C-a C-SPC M-C-n TAB

Command: c-split-formal-params 
Key: none

Macro:

M-C-a           ;; c-beginning-of-defun
C-SPC           ;; set-mark-command
M-C-n           ;; forward-list
<<replace-regexp>>  ;; replace-regexp
,           ;; c-electric-semi&comma
RET         ;; newline
,           ;; c-electric-semi&comma
C-q         ;; quoted-insert
LFD         ;; newline-and-indent
RET         ;; newline
M-C-a           ;; c-beginning-of-defun
C-SPC           ;; set-mark-command
M-C-n           ;; forward-list
TAB         ;; c-indent-line-or-region 
```

更好地理解结构导航命令（例如 `beginning-of-defun`和）`forward-list`也会对您有所帮助。

有关键盘宏的更深入讨论，请参阅手册和我[以前](https://stackoverflow.com/questions/7681326/refiling-to-a-given-subtree-by-a-keybinding)的答案。

# android - 任何适用于 Android 设备的 Over the Air xml 示例？

> ID：11504989
> 
> 赞同：1
> 
> 时间：2012-07-16T13:06:17.193
> 
> 标签：android, xml, ota

我搜索了一个战利品，但找不到任何显示 Android 设备的 ota xml 示例的网站。我想知道是否有人可以发布示例 xml 或 android 姜饼和 android ics 的有用链接？谢谢

详细信息：许多设备通过将 XML 文件作为二进制消息发送来远程进行无线配置（因此得名 ota）。配置可以用于 gprs apn、mms apn、电子邮件等... XML 文件的示例是

```
<wap-provisioningdoc>
<characteristic type="BOOTSTRAP">
<parm name="NAME" value="YandexMobile"/>
</characteristic>
<characteristic type="NAPDEF">
 <parm name="NAME" value="YandexMobile"/>
  <parm name="NAPID" value="YandexMobile_NAPID"/>
  <parm name="BEARER" value="GSM-GPRS"/>
  <parm name="NAP-ADDRESS" value="m.yandex.ru"/>
  <parm name="NAP-ADDRTYPE" value="APN"/>
  <parm name="INTERNET"/>
 <characteristic type="NAPAUTHINFO">
 <parm name="AUTHTYPE" value="PAP"/>
 <parm name="AUTHNAME" value="test"/>
  <parm name="AUTHSECRET" value="test"/>  
  < /characteristic> 
 </characteristic>
 </wap-provisioningdoc> 
```

安卓设备有这样的样本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T14:25:13.200

查看 Kannel 1.5.0 用户指南，“使用 HTTP 接口发送 OTA 配置消息”，其中包含您开始所需的所有信息。您可以从使用移动加密狗设置系统开始，如果您需要发送更大的活动，请查看购买 SMPP 接口，以便 ESME 可以更直接地提交到网络。

[http://www.kannel.org/download/1.5.0/userguide-1.5.0/userguide.html#AEN4838](http://www.kannel.org/download/1.5.0/userguide-1.5.0/userguide.html#AEN4838)

# linux - “searchd”显示“致命：bind() 在 0.0.0.0 失败：地址已在使用中”

> ID：11504995
> 
> 赞同：3
> 
> 时间：2012-07-16T13:06:47.117
> 
> 标签：linux, port, bind, sphinx

当我尝试命令`searchd`时，它显示：

```
using config file '/usr/local/etc/sphinx.conf'...
WARNING: compat_sphinxql_magics=1 is deprecated; please update your application and config
listening on all interfaces, port=9312
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
bind() failed on 0.0.0.0, retrying...
FATAL: bind() failed on 0.0.0.0: Address already in use 
```

当我 时`netstat -nlp`，那个港口已经有`searchd`。

*   冲突？
*   我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:21:10.093

> 当我 ~# netstat -nlp 时，该端口已经有“searchd”。

因此，如果您已经运行了 searchd，为什么还要尝试启动另一个呢？

如果你真的想运行两个实例（为什么？），那么你应该安排它们在不同的端口上——每个实例都需要一个单独的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:00:29.197

可能是您没有特权或直接访问地址`0.0.0.0:9312`，或者它已被另一个进程使用。

尝试将 sphinx`searchd`配置`listen`选项更改为另一个地址或确保该地址可用。

# php - Symfony2 datetime 存储时间戳的最佳方式？

> ID：11504997
> 
> 赞同：12
> 
> 时间：2012-07-16T13:06:55.370
> 
> 标签：php, datetime, symfony, doctrine-orm, timestamp

我不知道哪种是在数据库中存储时间戳的最佳方式。我想用小时分钟和秒存储整个日期，但它只存储日期（例如 2012-07-14），我想存储 2012-07-14 HH:MM:SS。我正在使用 dateTime 对象。这是代码：

**在控制器中：**

```
$user->setCreated(new \DateTime()); 
```

**在实体中：**

```
/**
 * @var date $created
 *
 * @ORM\Column(name="created", type="date")
 */
private $created; 
```

将日期和时间分别存储在数据库中会更好吗？还是更好地像 YYYY-MM-DD HH:MM:SS 一样存储在一起？然后我将不得不比较日期并计算剩余时间，这对于简化以后的操作很重要。所以你怎么看 ？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:32:40.930

如果您的数据库支持该类型，那么在数据库中存储时间戳的最佳方式显然是使用时间戳列。而且由于您可以将该列设置为在创建时自动更新，因此您甚至不必为其提供设置器。

有一个[适用于 Doctrine 2 的 Timestampable 行为扩展，](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/timestampable.md)它也可以从用户端实现这一点：

> 时间戳行为将自动更新您的实体或文档上的日期字段。它通过注释工作，可以在创建、更新甚至特定属性值更改时更新字段。
> 
> **特征：**
> 
> *   在创建、更新甚至记录属性更改时自动更新预定义日期字段
> *   ORM 和 ODM 支持使用相同的侦听器
> *   属性的具体注解，无需接口
> *   可以对特定属性或对特定值的关系变化做出反应
> *   可以与其他行为嵌套
> *   对扩展的注解、Yaml 和 Xml 映射支持

有了这种行为，您需要做的就是将您的注释更改为

```
/**
 * @var datetime $created
 *
 * @Gedmo\Timestampable(on="create")
 * @ORM\Column(type="datetime")
 */
private $created; 
```

然后你不需要调用`setCreated`你的代码。首次创建实体时将自动设置该字段。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-24T13:36:58.997

为了在不使用 Timestampable 行为原则的情况下存储创建日期，您还可以使用[LifeCycle Callbacks](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html)`@ORM\HasLifecycleCallbacks` ，方法是在声明类时添加注释。这是在您的情况下将**YYYY-MM-DD HH:MM:SS**存储在数据库中的方法。

```
/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 * @ORM\Table(name="yourTable")
 */
class Nasy
{

    /**
    * @ORM\Column(name="created", type="string", length=255)
    */

    private $created;
    /**
     * @ORM\PrePersist
     */
    public function doStuffOnPrePersist()
    {
        $this->created = date('Y-m-d H:i:s');
    } 
```

最后，如果您遇到时区问题，您可以在登录时使用**事件侦听器在会话中设置时区。**Matt Drolette 在他的博客上做了很棒的[工作](https://matt.drollette.com/2012/07/user-specific-timezones-with-symfony2-and-twig-extensions/)。无论如何，您可能总是将时间存储在服务器所在的时区中。然后使用会话中设置的时区向用户显示正确的时间。祝你好运。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T14:05:09.283

基于@Pratt 的回答，我做到了这一点。我的实体中有 2 个字段，一个用于创建，一个用于修改。

```
/**
* @ORM\Column(type="datetime")
 */
protected $created_at;

/**
* @ORM\Column(type="datetime")
 */
protected $modified_at; 
```

然后使用注释我在 prePersist 和 preUpdate 上调用它

```
/**
 * @ORM\PrePersist
 * @ORM\PreUpdate
 */
public function updatedTimestamps()
{
    $this->setModifiedAt(new \DateTime(date('Y-m-d H:i:s')));

    if($this->getCreatedAt() == null)
    {
        $this->setCreatedAt(new \DateTime(date('Y-m-d H:i:s')));
    }
} 
```

该功能可以分为 2 个功能，一个用于创建一个用于更新，但这是有效的，所以当它正常工作时，我认为没有理由额外的代码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-18T17:29:51.503

您可以像这样使用@Version：

```
/**
 * @var date $created
 *
 * @ORM\Column(name="created", type="datetime")
 * @ORM\Version
 */
private $created; 
```

这仅适用于日期时间类型。

# red5 - org.red5.server.net.rtmp.RTMPConnection in red5

> ID：11504999
> 
> 赞同：1
> 
> 时间：2012-07-16T13:06:57.703
> 
> 标签：red5, openlaszlo

运行red5服务器一段时间后，出现以下错误，从而断开连接。我不知道为什么会这样。任何人都可以解决这个问题吗？

```
[WARN] [Red5_Scheduler_Worker-3] org.red5.server.net.rtmp.RTMPConnection - 
Closing RTMPMinaCOnnection from x.x.x.x : 3575 to x.x.x.x(in:3415 out 3217), 
with id 1 due to long handshake 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:11:14.790

你到底在使用哪个版本的 red5？不同版本之间存在重大变化。

不幸的是，您的问题可能是由很多不同的事情引起的。

例如，如果您在人们仍连接到旧实例时重新启动 red5 服务器，则可能会发生此错误。当他们尝试重新连接而不刷新浏览器时，您会看到大量此类日志（但实际上当时没有错误）。

red5.properties 中还有配置参数来修改超时，但在开始使用超时参数之前，您应该首先尝试通过调试应用程序逻辑来修复它。