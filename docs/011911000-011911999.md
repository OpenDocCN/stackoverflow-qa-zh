# StackOverflow 问答 11911000-11911999

# cakephp - CakePHP 2.x - 查询错误 - 如何查看详情

> ID：11911001
> 
> 赞同：-1
> 
> 时间：2012-08-11T01:01:17.513
> 
> 标签：cakephp, cakephp-2.1

我怎样才能看到[THIS](http://i47.tinypic.com/2a0hmbp.png)的详细信息：

查询很棒，但我不知道为什么它不会登录，我怎样才能看到 ERROR AFFECTED 为 1 的详细信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:06:28.690

“错误”和“受影响”是 2 个不同的列。在此屏幕截图中，您的查询不会产生任何错误，但有 1 行“受影响”：查询返回的行。

# c# - 如何将 Unity3d C# 等待指令（等待一些收益返回）包装到单独的函数或类中？

> ID：11911003
> 
> 赞同：0
> 
> 时间：2012-08-11T01:01:25.150
> 
> 标签：c#, .net, unity3d

所以我发现我的salfe在我班的3个函数中重复了3次类似的代码，比如

```
var obj = ...
while (!obj.isDone) {
      yield return obj;
} 
```

在 Unity3d 中，它与 AssetBundleRequest、WWW 和其他一些 asinc 类有关。我调用该代码的函数返回并且在此类调用之后`IEnumerator`仅具有很多 。我想知道如何将此类包装到一些模板函数中，该函数可从我的函数调用，其中包含一个日志或类似的东西，只有在什么时候结束？`yield returns``wait``wait``yeld return func<typeof(obj)>(obj)``obj.isDone`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:27:58.867

你就不能`yield return obj;`一次吗？[定义的 AsyncOperation](http://docs.unity3d.com/Documentation/ScriptReference/AsyncOperation.html)的文档`isDone`似乎是这样说的，其中：

> 您可以**让步**，直到异步操作继续......

如果没有，您可以编写如下代码：

```
public static IEnumerator UntilDone(AsyncOperation op)
{
  while (!op.isDone) {
    yield return op;
  }
}
//in a method:
yield return StartCoroutine(UntilDone(obj)); 
```

# c++ - C++ - 在 Windows 下的 MinGW 中将 LPSTR 转换为 const char*

> ID：11911004
> 
> 赞同：0
> 
> 时间：2012-08-11T01:01:27.337
> 
> 标签：c++, windows, char, mingw, lpstr

我在 Windows 下的 MinGW 中从 LPSTR 转换为 const char* 时遇到问题。

```
#include <dirent.h>
#include <cstdio>
#include <fstream>
#include <windows.h>

int main() {
  DIR *dir;
  struct dirent *ent;
  LPSTR buffer;
  GetCurrentDirectory(100, buffer);
  const char *str = *buffer;
  dir = opendir(*str);
  return 0;
} 
```

我要做的是获取目录中所有当前文件的列表并将其写入文件；我可以做后者，但前者给我带来了一些麻烦。一旦我可以转换不同的变量类型，我就可以弄清楚如何读取目录。

我知道 LPSTR 是什么，但我不知道如何将其应用于此代码。

不建议使用`atlbase.h`，因为 MinGW 不支持，除非绝对必要，否则我不愿意回到 Visual。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:07:19.610

您似乎对间接有点困惑。 `LPSTR`是一个`char*`。它是一个指向 a 的指针`char`（或者，就像这里的情况一样，一个指向 的数组的初始元素的指针`char`）。

当您调用 时`GetCurrentDirectory`，您需要将指针传递给数组的初始元素和该数组`char`的大小。因此，您需要做的是声明一个数组并将其传递给函数。例如，

```
char buffer[MAX_PATH];
GetCurrentDirectory(MAX_PATH, buffer); 
```

使用您当前的实现，您的程序肯定会因为`buffer`未初始化而崩溃，因此`GetCurrentDirectory`会尝试写入内存中的某个随机位置。

您还应该检查 的返回值`GetCurrentDirectory`以确保它成功完成并且缓冲区包含完整路径。 [它的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364934%28v=vs.85%29.aspx)解释了它可能返回的值。

一旦你有了路径，你可以将它直接传递给`opendir`：数组`buffer`可以隐式转换为指向其初始元素的指针——也就是说，`char[MAX_PATH]`可以转换为`char*`——并且`char*`可以隐式转换为`char const*`所需的`opendir`：

```
DIR* dir = opendir(buffer); 
```

请注意， 的签名`GetCurrentDirectory`取决于是否`UNICODE`定义了宏：如果您正在为 Unicode 编译程序，它实际上需要一个指向`wchar_t`. 如果您构建一个 Unicode 程序，您需要考虑到这一点（如果可以，您*应该*使用 Unicode）。

# android - 果酱 UIBuilder 不见了？

> ID：11911005
> 
> 赞同：1
> 
> 时间：2012-08-11T01:01:27.787
> 
> 标签：android, ios, marmalade, uibuilder

我正在阅读[Marmalade UIBuilder 教程](http://www.madewithmarmalade.com/devnet/documentation#/tools/uibuilder/uibuildertutorialapp.html)，它说要打开 UIBuilder。我的下载中没有看到这样的程序。我在哪里可以获得 UIBuilder？为什么它没有包含在我的下载中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:01:27.787

如果您使用的是 Marmalade 6.0，请参阅[UIBuilder 上的文档](https://www.madewithmarmalade.com/devnet/documentation#/tools/uibuilder.html)。它指出：

> 我们删除了 UI Builder，因为我们相信，在未来，Marmalade UI 运行时支持标准 UI 标记而不是我们的专有标记会更好。在 6.1 版本中，我们计划支持标准 UI 标记，这意味着开发人员可以利用支持该标记的多个 3rd 方工具（包括免费工具）。
> 
> 我们对 6.0.1 版本的计划是公开 UI Builder 源代码，以及如何构建它的完整说明。同时，开发者仍然可以通过安装最新的 5.2.x SDK 版本来使用 UI Builder 工具。

也就是他们没有包含 UIBuilder，因此可以使用更多标准的 UIBuilder。但他们也说你可以下载旧的[5.2.x SDK 版本](http://www.softpedia.com/get/Programming/SDK-DDK/Airplay-SDK.shtml)。希望这可以帮助！

# sql-server - 优化查询

> ID：11911009
> 
> 赞同：1
> 
> 时间：2012-08-11T01:01:45.057
> 
> 标签：sql-server, sql-server-2008, tsql, query-optimization

此视图查询需要 2 分钟才能加载 500 000 行。我正在使用 EF 4.0 并在 DataGrid 上线程加载此视图。我该如何优化它，以便它可以在更短的时间内加载？
**更新**：我将查询更新为此，现在需要 55 秒，但仍然太长！

```
SELECT  ROW_NUMBER() OVER ( ORDER BY ss.IDStore_CardStore DESC ) AS Id_PK ,
        SC.IDStockCardIndex ,
        SC.Designation ,
        ISNULL(P.PMP, 0) PMP ,
        ISNULL(SS.Quantity, 0) Quantity ,
        SS.UnitePrice * SS.Quantity AS SubTotalStockCard ,
        S.StoreName ,
        SS.IDPurchaseInvoice
FROM    dbo.Stores S
        INNER JOIN dbo.StockCardsStores ss ON S.IDStore = ss.IDStore
        RIGHT OUTER JOIN dbo.StockCard SC ON ss.IDStockCardIndex = SC.IDStockCardIndex
        LEFT OUTER JOIN ( SELECT    SUM(UnitePrice * Quantity) / SUM(Quantity) AS PMP ,
                                    IDStockCardIndex
                          FROM      dbo.StockCardsStores AS SCS
                          GROUP BY  IDStockCardIndex
                        ) AS P ON P.IDStockCardIndex = SC.IDStockCardIndex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:35:48.190

在 SSMS 中使用估计执行计划。如果您使用的是 2008 R2，SSMS 会建议“缺失索引”，这可能会改善整体时间。55 秒的 500,000 行表明正在进行一个或多个表扫描。估计的执行计划将识别这些。该计划还将显示查询的哪一部分“成本”最高，帮助您归零。

突出显示该内部子查询并首先查看该计划。然后向外工作。

# clojure - 在 deftemplate 中绑定本地 var 以进行激活

> ID：11911010
> 
> 赞同：4
> 
> 时间：2012-08-11T01:02:16.777
> 
> 标签：clojure, enlive

我是 clojure 和 Web 开发堆栈的新手。我正在尝试使用 enlive 在 HTML 模板中设置值：

```
(en/deftemplate project-main-page
  (en/xml-resource "project-main.html")
  [id]
  [:#project-name] (en/content (str "Name: " ((get-project id) :name)))
  [:#project-desc] (en/content (str "Desc: " ((get-project id) :desc)))) 
```

这可以很好地设置我的两个 HTML 元素，但它涉及对我的函数的重复调用`get-project`。目前这只是从本地地图读取，但最终会涉及一些外部存储访问，所以我宁愿只在这个函数中执行一次。

我正在考虑使用`let`：

```
(en/deftemplate project-main-page
  (en/xml-resource "project-main.html")
  [id]
  (let [project (get-project id)]
    [:#project-name] (en/content (str "Name: " (project :name)))
    [:#project-desc] (en/content (str "Desc: " (project :desc))))) 
```

但这只会影响描述元素并忽略名称形式。

绑定本地变量的最佳方法是什么`deftemplate`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:04:14.483

如果我了解您要达到的目标；您也可以尝试使用 enlive 提供的转换宏。

```
(defn main-page [{:keys [name desc] :as project}]
 (en/transformation
   [:#project-name] (en/content (str "Name: " name)
   [:#project-desc] (en/content (str "Desc: " desc))))

(en/deftemplate project-main-page
  (en/xml-resource "project-main.html")
  [id]
   (main-page (get-project id))) 
```

代码未经测试，但我希望它传达了一种不同的方式来做你需要的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:11:21.923

Enlive 的`deftemplate`宏在 args 向量之后需要一系列标签/内容对（`[id]`在您的示例中是 args 向量）。您不能只将 a 粘贴`let`在那里，因为宏不期望有一个`let`表单，因此当它进行拼接时，一切都会变得混乱并导致您在上面描述的行为。

解决此问题的一种方法是编写自己的`deftemplate`宏，该宏允许使用 args 向量中的标识符进行绑定定义。例子：

```
(alt/deftemplate project-main-page
  (en/xml-resource "project-main.html")
  [id]
  [project (get-project id)]
  [:#project-name] (en/content (str "Name: " (project :name)))
  [:#project-desc] (en/content (str "Desc: " (project :desc)))) 
```

`deftemplate`宏是一个简单的包装器，`template`它使用`snippet*`并且这可能是您需要插入更改的地方：

```
(defmacro snippet* [nodes args & forms]
  `(let [nodes# (map annotate ~nodes)]
     (fn ~args
       ; You could add let bindings here since args are in scope
       (doall (flatmap (transformation ~@forms) nodes#))))) 
```

另一种选择（可能更简单，因为您不必在库代码中乱七八糟）是为您的`get-project`函数添加一个间接级别以缓存结果。你可以试试[core.cache](https://github.com/clojure/core.cache/)库。

# android - Android：以编程方式设置 ImageView layout_height

> ID：11911011
> 
> 赞同：21
> 
> 时间：2012-08-11T01:02:30.303
> 
> 标签：android, android-imageview

我的 main.xml 文件中有一个 ImageView：

```
<ImageView
            android:id="@+id/pageImage"
            android:layout_width="270dp"
            android:layout_height="45dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="25dp"
            android:layout_marginTop="15dp"
            android:scaleType="fitXY"
            android:src="@drawable/pageimage" /> 
```

我只需要以`layout_height`编程方式将其设置为另一个值。

此外，我需要在**dp**中设置值。所以它目前是 45dp，我想在我的主要活动中将其更改为另一个值。

我试图弄清楚如何使用 LayoutParams 来做到这一点，但我无法成功。

谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-11T01:26:43.057

我想你想要这样的东西：

```
ImageView imgView = (ImageView) findViewById(R.id.pageImage);
imgView.getLayoutParams().height = 200; 
```

所以首先我们从 XML 中获取 ImageView。然后 getLayoutParams() 为您准确获取您可以编辑的参数。您可以直接在那里设置它们。宽度等也一样。

关于单位 (sp,dp...) 我在这里找到了一些东西。希望这可以帮助：

[以编程方式使用 DIP、SP 指标](http://androidactivity.wordpress.com/2011/10/04/use-dip-sp-metrics-programmatically/)

他们在那里提到，所有单位都是像素。在示例中，他设置了20sp的*最小宽度，如下所示：*

```
TextView tv0 = new TextView(this);
int px = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 20, getResources().getDisplayMetrics());
tv0.setMinimumWidth(px); 
```

PS 这是我使用的完整代码。希望这是你想要的：

```
package com.example.testproject2;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ImageView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ImageView imgView = (ImageView) findViewById(R.id.pageImage);
        imgView.getLayoutParams().height = 500;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-11T01:34:41.897

你可以这样做：

```
LinearLayout.LayoutParams layoutParams  = new LinearLayout.LayoutParams(width_physical_pixels, height_physical_pixels);
imageView.setLayoutParams(layoutParams); 
```

但是在参数中它需要一个像素，因此您必须使用公式将像素转换为 dp，例如您可以使用它来转换：

```
float scale = getBaseContext().getResources().getDisplayMetrics().density;    
px = dp_that_you_want * (scale / 160); 
```

把所有东西放在一起：

```
//Get screen density to use in the formula.
float scale = getBaseContext().getResources().getDisplayMetrics().density;    
px = dp_that_you_want * (scale / 160);

LinearLayout.LayoutParams layoutParams  = new LinearLayout.LayoutParams(px, px);
imageView.setLayoutParams(layoutParams); 
```

我不知道这是否是您正在寻找的东西，或者它是否会起作用，所以请告诉我是否有效。

# android - 在 Android 中调用 .NET Web 服务时没有任何反应

> ID：11911012
> 
> 赞同：1
> 
> 时间：2012-08-11T01:02:43.433
> 
> 标签：android

我在.net 中开发了一个网络服务，这里是

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class DataManipulationService : System.Web.Services.WebService
{
    [WebMethod]
    public void InsertData()
    {
        SQLConnectionManager conn = new SQLConnectionManager();

        string qry = "INSERT INTO TEST_TABLE(Id, Name) VALUES(3, 'Ibbi')";

        SQLOperationManager op = new SQLOperationManager(qry);
        int rowsAffected = op.ExecuteQuery();
    }
} 
```

我正在尝试从android调用这个web方法，就像这样

```
public class WebDataManipulator {

private final String NAMESPACE = "http://tempuri.org/";
private final String URL = "http://localhost/DataManipulationService.asmx?WSDL";
private final String METHOD = "InsertData";
private final String SOAP_ACTION = "http://localhost/DataManipulationService.asmx?op=InsertData";

public void insertData() {
    SoapObject request = new SoapObject(NAMESPACE, METHOD);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    System.out.println(request);
    HttpTransportSE androidHttp = new HttpTransportSE(URL);

    try {
        androidHttp.call(SOAP_ACTION, envelope);
    } catch(Exception ex) {
        ex.printStackTrace();
    }
} 
```

}

我已经在 .net 中测试了我的 Web 服务并且它工作正常，但是当我在 android 上运行它时，什么都没有发生.. 我没有得到任何异常，也没有它的功能。为什么？这是我的日志猫

```
08-11 11:09:12.269: I/AndroidRuntime(325): NOTE: attach of thread 'Binder Thread #3' failed
08-11 11:09:13.179: I/System.out(333): InsertData{}
08-11 11:09:13.229: W/System.err(333): java.net.SocketException: Permission denied
08-11 11:09:13.239: W/System.err(333):  at org.apache.harmony.luni.platform.OSNetworkSystem.socket(Native Method)
08-11 11:09:13.239: W/System.err(333):  at dalvik.system.BlockGuard$WrappedNetworkSystem.socket(BlockGuard.java:335)
08-11 11:09:13.239: W/System.err(333):  at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:216)
08-11 11:09:13.249: W/System.err(333):  at java.net.Socket.checkOpenAndCreate(Socket.java:802)
08-11 11:09:13.249: W/System.err(333):  at java.net.Socket.connect(Socket.java:948)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:75)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
08-11 11:09:13.249: W/System.err(333):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
08-11 11:09:13.249: W/System.err(333):  at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
08-11 11:09:13.249: W/System.err(333):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:146)
08-11 11:09:13.249: W/System.err(333):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
08-11 11:09:13.249: W/System.err(333):  at com.automated.research.WebDataManipulator.insertData(WebDataManipulator.java:27)
08-11 11:09:13.259: W/System.err(333):  at com.automated.research.DataSender$1.run(DataSender.java:47)
08-11 11:09:13.259: I/System.out(333): connected 
```

这就是我编写客户端代码的方式

```
if(isNetworkAvailable()) {
   WebDataManipulator webDM = new WebDataManipulator();
   webDM.insertData();
   System.out.println("connected");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:31:46.730

webserviceurl 以“localhost”开头，这是从 android 的角度来看 android 设备。将 localhost 替换为 androiddevice 可以看到的 ip 地址（即可以从 android web 浏览器调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:44:19.493

我会在这里回答我自己的问题，我正在写我为让它工作所做的步骤。

1.  确保您在 IIS 中正确托管了 Web 服务。你可以参考这个[链接](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-publish-web-service-in-iis.html)。

    托管服务后，如果您发现在您的计算机上无法访问该服务，请执行第 2 步。

2.  你需要在这里做两件事，

    1.  使 asp.net 出现在 IIS 管理器中。请参阅[此处的链接](https://stackoverflow.com/questions/9216158/the-requested-page-cannot-be-accessed-because-the-related-configuration-data-for)。
    2.  修改web.config文件，添加httpGet和httpPost。[这里的例子](http://www.geekzilla.co.uk/ViewD5D13AF7-0E86-46F2-A954-F789132A6B5F.htm)
3.  允许服务从远程机器调用它的 web 方法。请参阅[此处的链接](https://stackoverflow.com/questions/1028010/the-test-form-is-only-available-for-requests-from-the-local-machine)。

4.  确保防火墙没有阻止对您的计算机的访问。您可以定义新规则或禁用防火墙以查看是否有效。

按照上面的步骤，我现在可以在安卓设备上调用我的服务了。

# flash - 如何安装调试 Flash 播放器 11.3 版？

> ID：11911015
> 
> 赞同：1
> 
> 时间：2012-08-11T01:03:09.527
> 
> 标签：flash, debugging, adobe

既然版本检查拒绝了它，如何安装调试 Flash 播放器？Adobe 没有跟上调试构建次要版本的步伐。我在一台新机器上，坦率地说，一年之内都不需要调试 Flash。

我无法安装 Flash 调试播放器来调试我的应用程序。我下载了 Windows Flash Player 11.3 插件内容调试器（适用于与 Netscape 兼容的浏览器）（EXE，9.94MB）。当我运行调试播放器安装程序时，它说“这不是最新版本的安装程序”，天哪，唯一的选择是退出解包程序/安装程序。

有没有办法绕过这个版本检查，以便我可以调试我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:06:28.430

我有同样的问题。运行卸载程序后清理注册表对我有用。

只需销毁 HKEY_LOCAL_MACHINE\SOFTWARE\Macromedia

我什至可以安装旧的调试版本，比如 10.xxx

# requirejs - requirejs，多页，奇怪的执行顺序

> ID：11911016
> 
> 赞同：0
> 
> 时间：2012-08-11T01:03:26.350
> 
> 标签：requirejs

我正在将 requirejs 用于多页应用程序。我对主文件的执行顺序有一个奇怪的问题。这是我的设置。

在我所有的 html 页面中（这个 main 包含我所有页面所需的所有常见 js 文件）

然后在每个页面上（比如 page1.html）：

```
<script data-main="main" src="require.js" />
<script>
require(['require','main'],function(require) {
      require(['main-library']);
});
</script> 
```

我的 main.js 看起来像：

```
require.config({ 
    paths:{
        'lib':'../lib',
        'jquery': '../lib/jquery/jquery-1.7.1.min',
        'jquery.iframe-transport' : '../lib/jquery.iframe-transport.min.js'
    },
    deps:['jquery','jquery-ui'],
    shim: {
         <other shim files>
    },
});  

require([<list of all other dependencies>], function() {
}); 
```

main-library.js 看起来像：

```
define('main-library',
    ['main',
    'jquery.iframe-transport',
     <other dependencies>
    ], 
    function() {
    }
); 
```

我的期望：在“main”之前，“main-library”不会开始加载，并且在 main 中指定的所有依赖项都没有加载。我希望这是因为我在每个页面上的嵌套要求调用中都需要“主库”。看上面。

问题：当我的 page1.html 加载时，看起来 main-library.js 甚至在 main.js 完成加载之前就开始加载，并且 main-library 无法获取 require.config，因此依赖项的路径不是被它看到。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:39:47.437

回答我自己的问题。事实上，page1.html 中的另一个要求再次加载了“主库”。所以我有类似的东西：

```
<script data-main="main" src="require.js" />
<script>
require(['require','main'],function(require) {
   require(['main-library']);
});
</script>
... 
... Other html ...
...
<script>
require(['main-library'],function(require) {
   //do something. 
});
</script> 
```

对主库的第二个要求是找不到路径的要求。用 main 上的 require 包装它。

# c++ - 为 ARM 交叉编译 Qt 时出错

> ID：11911020
> 
> 赞同：0
> 
> 时间：2012-08-11T01:03:44.483
> 
> 标签：c++, linux, qt, arm, cross-compiling

我正在尝试在 Ubuntu Linux for ARM 上交叉编译 Qt。但我收到以下错误：

*bin/rcc: 文件不存在 'dialogs/qprintdialog.qrc'*

产生这个的构建命令是：

**bin/rcc -name qprintdialog 对话框/qprintdialog.qrc -o .rcc/release-shared/qrc_qprintdialog.cpp**

我尝试通过提供 dialogs/qprintdialog.qrc 的绝对路径来手动执行此命令，但尽管 dialogs/qprintdialog.qrc 确实存在，但仍然存在相同的错误。

我已将 Qt 配置为：

./configure -no-exceptions -no-accessibility -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-xrender -no-mitshm -no-xinput -no-xkb -no- nas-sound -arch arm -platform linux-g++ -xplatform qws/linux-arm-g++ -release -opensource -fast -I$ARM/usr/include -L$ARM/usr/lib -L$ARM/lib -lrt -lX11 -lxcb -lXau -lXdmcp -lXext -lz -prefix custom_path_to_install

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:03:36.110

解决此问题的一种简单方法是安装 Qt Creator。使用您的代码创建一个项目。然后，不要在 IDE 中编译和运行，而是在您的终端中，使用您的所有代码（以及新的 Qt Creator 文件 .pro）对您的项目文件夹执行操作，然后输入：

```
qmake -project
qmake
make 
```

不要更改-project，它实际上是命令，而不是您的项目名称。我相信它会做到的。Qt create 有一个 .pro 文件，然后通过 qmake 将其编译成 Makefile 并为您管理所有这些。

# ruby - 在 rake 任务中使用 hirb

> ID：11911022
> 
> 赞同：2
> 
> 时间：2012-08-11T01:03:53.067
> 
> 标签：ruby, ruby-on-rails-3, rake, hirb

我想通过`hirb`rake 任务获得漂亮的打印效果。但我不知道如何设置`hirb`打印`ActiveRecord`结果。

```
task :t2 => :environment do
  require 'hirb'
  Hirb.enable
  result = Task.select('project_id, COUNT(*) AS counter').group('project_id').order('counter DESC')
  puts Hirb::Helpers::Table.render(result)
  Hirb.disable
end 
```

我有错误“表必须是散列数组或数组数组”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:38:31.187

```
puts Hirb::Helpers::AutoTable.render(active_record_object) 
```

# java - 如何让 WordCount.java 在 Cloudera 4 上编译？

> ID：11911023
> 
> 赞同：4
> 
> 时间：2012-08-11T01:04:19.507
> 
> 标签：java, hadoop, javac, cloudera, word-count

我正在尝试在 Cloudera 4 的 linux (CentOS) 安装上编译一个简单的 WordCount.java map-reduce 示例。当我引用任何 hadoop 类时，我一直遇到编译器错误，但我无法弄清楚哪些 jars /usr/lib/hadoop 下的数百个我需要添加到我的类路径中才能编译。任何帮助将不胜感激！我最想要的是一个用于字数统计的 java 文件（以防我发现的文件由于某种原因不好）以及用于编译和运行它的相关命令。

我正在尝试仅使用 javac 而不是 Eclipse 来做到这一点。无论哪种方式，我的主要问题是 Cloudera 4 安装中的 Hadoop 库到底是什么，我需要包含这些库才能编译经典的 WordCount 示例。基本上，我需要将 Java MapReduce API 类（Mapper、Reducer 等）放在我的类路径中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:15:56.323

我有一个构建我的 hadoop 类的脚本。尝试：

```
#!/bin/bash

program=`echo $1 | awk -F "." '{print $1}'`

if [ ! -d "${program}_classes" ]
    then    mkdir ${program}_classes/;
fi

javac -classpath /usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar:/usr/lib/hadoop/client/h\
adoop-mapreduce-client-core-2.0.0-cdh4.0.1.jar -d ${program}_classes/ $1

jar -cvf ${program}.jar -C ${program}_classes/ .; 
```

您可能错过了关键罐子：

```
 /usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar 
```

和

```
/usr/lib/hadoop/client/hadoop-mapreduce-client-core-2.0.0-cdh4.0.1.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T20:14:05.707

如果您正在运行 Cloudera CDH4 虚拟机，那么以下内容应该可以让您运行：

```
javac -classpath /usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.0.jar:/usr/lib/hadoop/client/hadoop-mapreduce-client-core-2.0.0-cdh4.0.0.jar -d wordcount_classes WordCount.java 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-05T02:28:25.607

或者您可以导出环境：

```
export JAVA_HOME=/usr/java/default

export PATH=${JAVA_HOME}/bin:${PATH}

export HADOOP_CLASSPATH=${JAVA_HOME}/lib/tools.jar 
```

并使用以下命令：

```
$ bin/hadoop com.sun.tools.javac.Main WordCount.java

$ jar cf wc.jar WordCount*.class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T04:05:38.907

如果您使用的是 Eclipse，请添加 Hadoop 包。您可以从 java2s 或任何类似站点获得它。我不能说不知道你到现在为止做了什么。

# eclipse - svn：用项目位置自动替换文本

> ID：11911026
> 
> 赞同：0
> 
> 时间：2012-08-11T01:05:01.667
> 
> 标签：eclipse, svn

首先，这是[最愚蠢的eclipse问题的解决方法，即项目路径在.project中被硬编码](https://stackoverflow.com/questions/5178725/how-to-use-relative-paths-for-projects-added-to-an-eclipse-workspace) 所以，我想知道我是否可以使用svn解决方法。该 .project 文件中是否有一些*神奇*的关键字，以便将它们替换为项目或文件被检出的路径？

基本上，在我的 svn 中，.project 文件有一些这样的路径： E:/work/gaming/Android/Components/src

我想用类似的东西代替

$$PATH$$/gaming/Android/Components/src

这样如果 svn 被检出到 c:\dev 中，那么该位置将固定在

c:/dev/gaming/Android/组件/src

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:08:30.103

Eclipse 没有将项目位置硬编码到 .project 文件中，您显然做错了什么。

您是否尝试将其设置为相对路径，或重新创建项目？

# function - 如何从 clojure 中的符号中获取函数的名称？

> ID：11911027
> 
> 赞同：3
> 
> 时间：2012-08-11T01:05:40.903
> 
> 标签：function, clojure, symbols, name-lookup

假设我将 x 定义为符号函数 foo

```
(defn foo [x] x)

(def x foo) 
```

如果仅给定 x，是否可以发现名称“foo”？

在这种情况下， foo 中有没有办法查找函数 x - "foo" 的名称？

```
(foo x) 
```

是否有或者是否可以创建一个函数，例如：

```
(get-fn-name x)
foo 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T02:52:23.263

最近在这个网站上提出了一个类似的问题；看[这里](https://stackoverflow.com/questions/11856517/how-to-get-name-of-argument-in-clojure)

当您这样做时`(def x foo)`，您将 x 定义为“值`foo`”，而不是“`foo`本身”。一旦`foo`解析为它的值，该值就不再与 有任何关系`foo`。

因此，也许您现在看到了对您的问题的一个*可能的*答案：`foo`当您执行 define 时不要解决`x`。而不是做...

```
(def x foo) 
```

...做...

```
(def x 'foo) 
```

现在，如果您尝试获取 的值`x`，您将获得`foo`（字面意思），而不是`foo`解析为的值。

```
user> x
=> foo 
```

但是，这可能是有问题的，因为您有时可能还希望能够获得`foo`解析为 using的值`x`。但是，您可以通过以下方式执行此操作：

```
user> @(resolve x)
=> #<user$foo user$foo@157b46f> 
```

如果我要描述它的作用，那将是：“获取`x`解析为的值，将其用作符号，然后将该符号解析为其 var（*而不是*其值），并取消引用该 var 以获取值”。

...现在让我们做一些 hacky。我不确定我是否会*建议*做我将要建议的这些事情，但你确实问过`Can the name "foo" be discovered if only given x?`，我可以想到两种方法可以做到这一点。

**方法 #1：正则表达式 fn var name**
注意下面的内容`foo`和`x`两者都解析：

```
(defn foo [a] (println a))
(def x foo)

user> foo
=> #<user$foo user$foo@1e2afb2>
user> x
=> #<user$foo user$foo@1e2afb2> 
```

现在，检查一下：

```
user> (str foo)
=> "user$foo@1e2afb2"
user> (str x)
=> "user$foo@1e2afb2" 
```

凉爽的。这仅适用`foo`于解析为一个函数，该函数恰好具有类似 var 的名称，该名称将是相同的，`x`因为它引用相同的函数。请注意，“foo”包含在由`(str x)`（以及由`(foo x)`）生成的字符串中。这是因为函数的 var 名称显然是通过对最初定义它的符号的一些向后引用创建的。我们将使用这个事实从任何函数中找到那个符号。

因此，我编写了一个[正则表达式](http://www.regular-expressions.info/)来在函数 var 名称的字符串中查找“foo”。它不是寻找“foo”，而是寻找任何子字符串——在正则表达式中，`".*"`——前面是一个`\$`字符——在正则表达式中`"(?<=\$)"`——然后是`\@`字符——用正则表达式`"(?=@)"`...

```
user> (re-find #"(?<=\$).*(?=@)"
               (str x))
=> "foo" 
```

我们可以通过简单地包裹它来进一步将其转换为符号`(symbol ...)`：

```
user> (symbol (re-find #"(?<=\$).*(?=@)"
                       (str x)))
=> foo 
```

此外，这整个过程可以推广到一个函数，该函数将接受一个函数并返回与该函数的 var 名称相关联的符号——这是函数最初定义时给出的符号（这个过程对于匿名函数）。

```
(defn get-fn-init-sym [f]
  (symbol (re-find #"(?<=\$).*(?=@)" (str f)))) 
```

...或者这个我觉得更好读...

```
(defn get-fn-init-sym [f]
  (->> (str f)
       (re-find #"(?<=\$).*(?=@)")
       symbol)) 
```

现在我们可以做...

```
user> (get-fn-init-sym x)
=> foo 
```

**方法#2：基于身份反向查找所有 ns 映射**
这会很有趣。

因此，我们将获取所有命名空间映射，然后`dissoc` `'x`从中提取，然后根据每个映射处的 val 是否与解析到的内容*完全相同*来过滤剩余的内容。`x`我们将在过滤后的序列中获取第一件事，然后我们将在第一件事上获取密钥以获取符号。

```
user> (->> (dissoc (ns-map *ns*) 'x)
           (filter #(identical? (let [v (val %)]
                                  (if (var? v) @v v))
                                x))
           first
           key)
=> foo 
```

请注意，如果您替换`x`为`foo`上述内容，您将得到`x`. 实际上，这一切所做的只是返回它找到的第一个名称，该名称映射到与`x`. 和以前一样，这可以推广到一个函数：

```
(defn find-equiv-sym [sym]
  (->> (dissoc (ns-map *ns*) sym)
       (filter #(identical? (let [v (val %)]
                              (if (var? v) @v v))
                            @(resolve sym)))
       first
       key)) 
```

这里的主要区别是参数必须是带引号的符号。

```
user> (find-equiv-sym 'x)
=> foo 
```

这个`find-equiv-sym`功能真的不是很好。当命名空间中有多个事物解析为相同的值时，就会出现问题。您*可以*返回解析为相同事物的符号列表（而不仅仅是返回第一个符号），然后从那里进一步处理它。更改当前函数以使其工作很简单：删除最后两行 (`first`和`key`)，并将它们替换为`(map key)`.

无论如何，我希望这对你来说和对我一样有趣和有趣，但我怀疑这些技巧中的任何一个是否都是处理事情的*好方法。*我提倡我的第一个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T01:23:36.783

目前尚不清楚您为什么要这样做 - 当您这样做时，`(def x foo)`您实际上是在将名称赋予名称`x`空间中的新 var。它恰好具有与 foo 相同的值`foo`（即它包含相同的函数），但在其他方面完全独立于 foo。使用 Java 类比，这就像对同一个对象有两个引用。

为什么还要继续想获得名字`foo`？

如果您真的想做类似的事情，这可能是您可以在包含原始符号的函数上使用一些自定义元数据的情况：

```
(def foo 
  (with-meta
    (fn [x] x)
    {:original-function `foo}))

(def bar foo)

(defn original-function [v]
  "Returns the :original-function symbol from the metadata map"
  (:original-function (meta v)))

(original-function bar)
=> user/foo 
```

# python - Python Arpabet 音标

> ID：11911028
> 
> 赞同：11
> 
> 时间：2012-08-11T01:05:46.830
> 
> 标签：python

python中是否有可以将单词（主要是名称）转换为Arpabet音标的库？

倒钩 -> B AA1 RB AH0 LZ

烧烤 -> B AA1 RB IH0 KY UW2

烧烤 -> B AA1 RB IH0 KY UW2 D

烧烤 -> B AA1 RB IH0 KY UW2 IH0 NG

烧烤 -> B AA1 RB IH0 KY UW2 Z

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T02:31:45.690

您想要的是各种称为“字母到声音”或“字素到音素”的引擎。周围有一些，包括每个文本到语音系统中的一个。

我通常处理非美国口音，为此我使用[espeak](http://espeak.sourceforge.net/)。它不会直接输出 arpabet（无论如何它仅限于美国声音），但您可以哄它尝试美国口音，然后从 IPA 转换为 arpabet。

```
>>> from subprocess import check_output
>>> print check_output(["espeak", "-q", "--ipa",
                        '-v', 'en-us',
                        'hello  world']).decode('utf-8')
həlˈoʊ wˈɜːld 
```

您可以使用`-x`而不是`--ipa`espeak 自己的电话表示（它是 ascii）：

```
>>> check_output(["espeak", "-q", "-x", '-v', 'en-us', 'hello world'])
h@l'oU w'3:ld 
```

不过，转换为 arpabet 并不像查找字符那么简单。例如，“tʃ”应该转换为“CH”，而不是贪婪转换会给你的“T SH”（除了，在奇怪的情况下，比如“swɛtʃɑːp”代表“sweatshop”）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-11T01:19:58.687

在安装了语料库的情况下使用[nltk](http://www.nltk.org/documentation)`cmudict`：

```
arpabet = nltk.corpus.cmudict.dict()
for word in ('barbels', 'barbeque', 'barbequed', 'barbequeing', 'barbeques'):
    print(arpabet[word]) 
```

产量

```
[['B', 'AA1', 'R', 'B', 'AH0', 'L', 'Z']]
[['B', 'AA1', 'R', 'B', 'IH0', 'K', 'Y', 'UW2']]
[['B', 'AA1', 'R', 'B', 'IH0', 'K', 'Y', 'UW2', 'D']]
[['B', 'AA1', 'R', 'B', 'IH0', 'K', 'Y', 'UW2', 'IH0', 'NG']]
[['B', 'AA1', 'R', 'B', 'IH0', 'K', 'Y', 'UW2', 'Z']] 
```

* * *

`cmudict`要在 python 解释器类型中安装语料库：

```
>>> import nltk
>>> nltk.download()
Use GUI to install 
corpora>cmudict 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-28T14:10:12.453

您可以使用我的侦听器项目中的一个小实用程序来执行此操作。它在幕后使用 espeak（生成 IPA），然后使用从 CMU 字典中提取的映射来生成可以匹配生成的 IPA 的 ARPABet 映射集，例如：

```
$ listener-arpa 
we are testing
we
        W IY
are
        ER
        AA
testing
        T EH S T IH NG 
```

大约 45% 的时间在 CMU 字典上产生完全匹配（我使用 CMU/Wikipedia 中记录的对应关系得到了大约 36%），同时每个单词产生约 3 个匹配项（平均）。也就是说，我们在大约 99% 的情况下看到“紧密匹配”，也就是说，虽然我们可能不会每次都精确匹配手工标记的单词，但我们通常只相差几个音素。

```
$ sudo apt-get install espeak
$ pip install -e git+https://github.com/mcfletch/listener.git#egg=listener 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-11T01:15:16.693

获取[cmu 发音词典](http://www.speech.cs.cmu.edu/cgi-bin/cmudict)，然后您可以使用[nltk](http://nltk.org/)从该词典本身获取任何单词的相关
arpabet 音标，如下所示

```
>>> entries = nltk.corpus.cmudict.entries()
>>> len(entries)
127012
>>> for entry in entries[39943:39951]:
...     print entry
...
('fir', ['F', 'ER1'])
('fire', ['F', 'AY1', 'ER0'])
('fire', ['F', 'AY1', 'R'])
('firearm', ['F', 'AY1', 'ER0', 'AA2', 'R', 'M'])
('firearm', ['F', 'AY1', 'R', 'AA2', 'R', 'M'])
('firearms', ['F', 'AY1', 'ER0', 'AA2', 'R', 'M', 'Z'])
('firearms', ['F', 'AY1', 'R', 'AA2', 'R', 'M', 'Z'])
('fireball', ['F', 'AY1', 'ER0', 'B', 'AO2', 'L']) 
```

# android - Android Canvas OpenGL 渲染器内存不足

> ID：11911030
> 
> 赞同：4
> 
> 时间：2012-08-11T01:05:57.047
> 
> 标签：android, android-layout, android-canvas, android-view

我使用画布开发用于在视图中绘制图表的 android 库。
但是，以下错误经常发生。

日志猫：

```
D/NvOsDebugPrintf(11526): NvRmChannelSubmit: NvError_IoctlFailed with error code 12
D/NvOsDebugPrintf(11526): NvRmChannelSubmit failed (err = 196623, SyncPointValue = 94008102)
(87 times repeat)
D/OpenGLRenderer(11526): GL error from OpenGLRenderer: 0x505
E/OpenGLRenderer(11526): OpenGLRenderer is out of memory! 
```

尽管我正在寻找各种原因和解决方案，但没有找到解决方案。那么，请告诉我什么可能成为导致此类错误的原因？以及如何解决这个问题。

我请求你的好意。最后，我对我糟糕的英语表示诚挚的歉意。

# javascript - 如何使用 onLoad 加载 jQuery JSON。从表格上的邮政编码获取城市和州？

> ID：11911031
> 
> 赞同：1
> 
> 时间：2012-08-11T01:05:57.647
> 
> 标签：javascript, jquery, html, json, zipcode

我绝不是专业的编码员，并且整天都在为此苦苦挣扎。我正在尝试根据我网站联系表中的邮政编码自动填写城市和州。我发现了一个很棒的 jQuery 东西，叫做 Ziptastic。我做了一个 JSON 调用（我认为这就是它的名称），它从 Ziptastic 网站检索数据。这是 Ziptastic：[http ://daspecster.github.com/ziptastic/demo.html](http://daspecster.github.com/ziptastic/demo.html)

这是我从 Ziptastic 网站提取代码并将城市和州输入到我的联系表中的代码：

```
 $(document).on("keyup", "#zip", function(){
          var zip = this.value;
          $.getJSON('http://zip.elevenbasetwo.com/v2/US/' + zip, function(json) {
            $('#city').val(json.city);
          });
          $.getJSON('http://zip.elevenbasetwo.com?zip=' + zip, function(json) {
            $('#state').val(json.state);
          });
        }); 
```

我的表单现在运行良好，并在我在邮政编码字段上输入 AND KEYUP 后更新我的城市和州字段。但是，问题出在这里...我的网站访问者在我的网站主页上输入了他们的邮政编码，该邮政编码发布到我试图自动填写城市和州的此页面上的联系表中。我需要单击该字段并单击以进行更新。

我需要城市和州立即自动填充（加载）。

我无法弄清楚如何使用从我的主页发布到我的联系表单的邮政编码值来制作此代码。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:13:25.433

为了使用 Javascript 执行此操作，您必须使用`getJSON`您一直在使用的相同代码，除了您实际上必须将 POSTed 字段的值回显到代码中，而不是使用`+ zip`... 类似这样的东西：

```
$.getJSON('http://zip.elevenbasetwo.com?zip=<?php echo $_POST['zip']; ?>', function(json) {
     $('#state').val(json.state);
}); 
```

（假设您在这里使用 PHP。不过，它在其他语言中几乎是等价的；我相信您可以弄清楚那部分。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:16:34.427

```
$(document).ready(function(){
      var zip = $("#zip").val();
      $.getJSON('http://zip.elevenbasetwo.com/v2/US/' + zip, function(json) {
        $('#city').val(json.city);
      });
      $.getJSON('http://zip.elevenbasetwo.com?zip=' + zip, function(json) {
        $('#state').val(json.state);
      });
 }); 
```

# c# - 无法解密这些字符串

> ID：11911032
> 
> 赞同：9
> 
> 时间：2012-08-11T01:06:00.007
> 
> 标签：c#, c++, reverse-engineering, ida

## 前言

我正在尝试反汇编和反向工程一个作者早已不在的程序。该程序提供了一些我在其他地方还没有找到的独特功能，并且……我对该程序进行逆向工程感到好奇和感兴趣。如果你只是想帮我找到另一个程序……别打扰了。

## 问题

我正在使用带有 Hex-Rays Decompiler 的 IDA Pro 来获得一些不错的伪代码，以尝试加速逆向工程。我认为有助于加快速度的一件大事是弄清楚字符串的含义。到目前为止，这就是我发现的长度超过 4 个字符的字符串：

```
dword_131894E = 54264588;
dword_131894A = 51381002;
dword_1318946 = 51380998;
dword_1318942 = 52429571;
dword_131893E = 52298503;
runtimeVersion[0] = 836;
szIndex = 0;
do
{
  runtimeVersion[szIndex] = (runtimeVersion[szIndex] - 1) ^ (szIndex + 882) ^ 0x47;
  ++szIndex;
}
while ( szIndex < 11 ); 
```

通过查看三个字符的字符串的类似伪代码，并使用 Hex-Rays 悬停在类型信息上，我是这样理解的：

*   runtimeVersion 是一个常量 wchar
*   这意味着它具有 Unicode 字符 (UTF-16)
*   该字符串嵌入内存中，但在这种情况下，是弱加密的（XOR？）

上面的伪代码对于所有大字符串都是相同的，除了每个字符串的常量“882”不同。我假设这是某种编译时加密或宏，它一个一个地找到字符串并唯一地“加密”它们。但是，问题是，我似乎无法通过复制伪代码来获得正确的字符串。这是我在 C# 中的内容：

```
ushort[] newCharArray = new ushort[rawCharacters.Length];

// Go through and decode all of the characters.
ushort i = 0;
do {
    newCharArray[i] = (ushort)((i + 882) ^ (rawCharacters[i] - 1) ^ 0x47);
    ++i;
}
while (i < 11); 
```

'rawCharacters' 是一个超短数组。我将每个 dword 条目分成两半，并将每个条目视为 ushort。我将它们从底部到顶部放在数组中...因此分配给 runtimeVersion[0] 的值首先添加到我的数组中，然后是来自 dword_131893E 的值，然后是 dword_1318942 等。

我不确定我在这里缺少什么。这似乎很简单，以至于反转和恢复字符串应该是小菜一碟，但我对从伪代码到实际代码的转换感到困惑。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T09:21:05.547

Ok working through on a piece of paper here's what i get:

```
54264588 = 0x033c030c
51381002 = 0x0310030a
51380998 = 0x03100306
52429571 = 0x03200303
52298503 = 0x031E0307
836 = 0x0344
882 = 0x0372

v = 0x0076 = 0x47 ^ 0x0372 ^ (0x0344 - 1)
2 = 0x0032 = 0x47 ^ 0x0373 ^ (0x0307 - 1)
. = 0x002E = 0x47 ^ 0x0374 ^ (0x031E - 1)
0 = 0x0030 = 0x47 ^ 0x0375 ^ (0x0303 - 1)
. = 0x0076 = 0x47 ^ 0x0376 ^ (0x0320 - 1)
5 = 0x0035 = 0x47 ^ 0x0377 ^ (0x0306 - 1)
0 = 0x0030 = 0x47 ^ 0x0378 ^ (0x0310 - 1)
7 = 0x0037 = 0x47 ^ 0x0379 ^ (0x030a - 1)
2 = 0x0032 = 0x47 ^ 0x037a ^ (0x0310 - 1)
7 = 0x0037 = 0x47 ^ 0x037b ^ (0x030c - 1)
\0 = 0x0000 = 0x47 ^ 0x037c ^ (0x033c - 1) 
```

Therefore the string is "v2.0.50727" I also checked the other endian option but this one looks much better. So i know this doesn't point out where your code is wrong but it should help you solve it with a debugger/printf.

Edit: added last 7 to string.

# c# - 使用 abcPDF 构建带有 HTML 和其他 PDF 链接的 PDF

> ID：11911034
> 
> 赞同：0
> 
> 时间：2012-08-11T01:06:13.180
> 
> 标签：c#, pdf, abcpdf

我有一些代码可以从 HTML 模板构建 PDF，然后附加几个其他 PDF 以使用 abcPDF 7 制作一个大 PDF。

所有这些工作都很好而且很花哨——但是，我想在 PDF 的 HTML 部分中创建一些链接，以跳转到几个附加的 PDF 之一。

[我尝试使用此处](https://stackoverflow.com/questions/2142043/abcpdf-converting-html-anchors-to-jump-to-another-page-in-the-same-pdf)引用的技术创建链接和锚点，方法是将

```
<a href="#elementId">Link to another page</a> 
```

在 HTML 中链接，然后放置锚点

```
<div><a name="elementId">A div that's on another page</a></div> 
```

作为我想跳转到的 PDF 第一页顶部的附加粘贴。

我可以很好地看到锚的文本，指向它的链接是蓝色的，但它什么也没做。

作为下一次尝试，我创建了同样有效的书签。有人可以指出我返回并调整 HTML 部分中的链接以使用它们跳转到书签的方向吗？

对于缺少代码，我提前道歉，我现在不要求任何代码。我只是想要一种更通用的方式来解决它，比如“尝试这样的事情”。我没有太多运气找到与我正在尝试做的事情接近的任何事情，甚至在 WebSuperGoo 的网站上也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T10:30:59.193

这种方法在最新的 ABCpdf 版本中对我有用 (9) 为文档中的每一页添加书签：

```
For i = 1 to pdf.PageCount

    pdf.PageNumber = i
    pdf.AddBookmark("Page " & i, True)

Next 
```

然后，您可以在要插入链接的地方引用书签 - 在这种情况下，我们通过循环遍历我们创建的每个书签来创建目录：

```
For Each bm As Bookmark In pdf.Bookmark

    toc &= "<Font annots='goto:" + bm.Page.PageNumber.ToString() + "'>" & bm.Title & "</Font><br>"

Next

pdf.AddHtml(toc) 
```

Websupergoo 团队为我提供了一些示例代码，这就是它的基础——感谢他们！

# java - Android - AndEngine“不再触摸”方法？

> ID：11911044
> 
> 赞同：0
> 
> 时间：2012-08-11T01:08:29.633
> 
> 标签：java, android, methods, andengine

嗨，我在我的 Android 应用程序中使用 AndEngine。我想知道是否有一种方法可以检测对象（在本例中为 AnalogOnScreenControls 的对象）何时从被触摸变为未触摸？我想设置一个特定的命令，该命令仅在有人放开“模拟棒”实体时执行。控件还使用浮点值来检测它们所处的位置，因此它也可以作为值从零以外的某个值变为零的方法，因为当控件空闲时变量设置为零。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:25:58.177

您可以检查 TouchEvent 中有一个标志。大多数时候我会做这样的事情：

```
@Override
public boolean onAreaTouched(final TouchEvent touchEvent, ITouchArea touchArea, float touchAreaLocalX, float touchAreaLocalY) {
    switch(touchEvent.getAction()){
                case TouchEvent.ACTION_MOVE:{
                    // do stuff when finger moves
                    return true; // don't forget to break, or return true directly if the event was handled
                }
                case TouchEvent.ACTION_DOWN:{
                    // do stuff, the first time the finger touches the display
                    return true; 
                }
                case TouchEvent.ACTION_UP:{
                    // do stuff when the finger goes up again and ends the touch event (your case)
                    return true; 
                }
                case TouchEvent.ACTION_CANCEL:{
                    // If the event is somehow canceled - e.g. the finger leaves the display
                    return true; 
                }
                default:{
                    // none of the above
                    return false;
                }
    }
} 
```

类似的东西。如果您需要比这些简单操作更多的事件信息，请获取 MotionEvent`touchEvent.getMotionEvent()`并查看那里的其他选项。顺便说一句：我更喜欢`return true`直接使用语句而不是在这里使用 break，只是为了确保在应用程序中不会使用触摸事件。但是你当然可以改变它。

希望这可以帮助

克里斯托夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:15:29.167

您可以创建一个名为 isTouched 的字段（全局变量）并将其初始设置为 false。然后在 onControlChange() 你这样做：

```
if(pValueX == 0 && pValueY == 0 && isTouched){ //means knob has recently been touched
 isTouched = false; //set to false so that being idle does not come here
 //do your thing here
}
else{
 isTouched = true;
 //do normal stuff here
} 
```

# windows - 如何随时从 Windows 中的命令提示符捕获显示输出？

> ID：11911045
> 
> 赞同：2
> 
> 时间：2012-08-11T01:08:44.923
> 
> 标签：windows, batch-file, cmd, buffer, prompt

我试图在特定时刻捕获命令提示符（cmd 窗口）中显示的信息并将其发送到文本文件。

我有一个 C/C++ 应用程序，它由这样的批处理脚本启动：

```
c:\myProgramInC.exe
echo "Ending with error"
PAUSE 
```

myProgramInC.exe 始终在运行（带有无限循环），因此如果我的脚本到达 echo 命令，则意味着我的应用程序以异常结束结束。

我想要得到的是在脚本结束执行之前的前几行，因为我的 myProgramInC.exe 总是打印有关正在发生的事情的信息，并且在发生错误时查看发生的情况将非常有用。像这样的东西

```
c:\myProgramInC.exe
**** Execution of process to get te previous N lines in the command prompt ****
echo "Ending with error"
PAUSE 
```

我知道 cmd 窗口有一个缓冲区，我一直在考虑从这样的缓冲区中捕获所有这些数据。有什么方法可以将此信息作为文本存储在文件中？

我一直在尝试更专业的东西，例如使用 ProcDump 转储内存，但由于我同时运行了各种 myProgramInC.exe（每个都存储在不同的位置），我只收到消息“多个进程匹配指定的名称。” 其余的选项对我没有用，因为我的应用程序没有反应迟钝，它只是结束了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:35:50.670

快速技巧是在上下文中执行`for /f`，您甚至不需要批处理文件，您可以直接从 cmd 行执行：
`for /f "tokens=*" %F in ('c:\myProgramInC.exe') do @echo %F >>myPrograminC.log`

这将抑制所有输出，直到您的程序异常结束，然后才会将所有消息写入文件。如果您的应用程序不经常写入日志消息（或快速失败:-)）它应该可以工作。我用 10 000 行测试了它。

下面的批处理代码基于相同的想法 - 请注意，即使它只写了最后 5 行，**它仍然必须扫描所有这些**行，所以我不确定它是否比 1 行以上更好。

```
@echo off
setlocal 

for /f "tokens=*" %%P in ('c:\myProgramInC.exe') do (
 for /L %%C in (4,-1,1) do (
  set /A next=%%C+1
  call set line_%%next%%=%%line_%%C%%
 )
 set line_1=%%P
)
echo program ended abnormally! %date% %time%
for /L %%C in (5,-1,1) do call echo %%line_%%C%% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:09:30.387

好的，可能有一种更优雅的方法可以做到这一点，但假设你有 PowerShell，这将起作用。

创建一个名为的 PowerShell 脚本文件`Get-ConsoleAsText.ps1`，其中包含以下脚本。**注意**，我没有创建这个脚本。我在[Windows PowerShell 博客 - 捕获控制台屏幕上](http://blogs.msdn.com/b/powershell/archive/2009/01/10/capture-console-screen.aspx)找到了它。

```
#################################################################################################################
# Get-ConsoleAsText.ps1
#
# The script captures console screen buffer up to the current cursor position and returns it in plain text format.
#
# Returns: ASCII-encoded string.
#
# Example:
#
# $textFileName = "$env:temp\ConsoleBuffer.txt"
# .\Get-ConsoleAsText | out-file $textFileName -encoding ascii
# $null = [System.Diagnostics.Process]::Start("$textFileName")
#

# Check the host name and exit if the host is not the Windows PowerShell console host.
if ($host.Name -ne 'ConsoleHost')
{
  write-host -ForegroundColor Red "This script runs only in the console host. You cannot run this script in $($host.Name)."
  exit -1
}

# Initialize string builder.
$textBuilder = new-object system.text.stringbuilder

# Grab the console screen buffer contents using the Host console API.
$bufferWidth = $host.ui.rawui.BufferSize.Width
$bufferHeight = $host.ui.rawui.CursorPosition.Y
$rec = new-object System.Management.Automation.Host.Rectangle 0, 0, ($bufferWidth), $bufferHeight
$buffer = $host.ui.rawui.GetBufferContents($rec)

# Iterate through the lines in the console buffer.
for($i = 0; $i -lt $bufferHeight; $i++)
{
  for($j = 0; $j -lt $bufferWidth; $j++)
  {
    $cell = $buffer[$i, $j]
    $null = $textBuilder.Append($cell.Character)
  }
  $null = $textBuilder.Append("`r`n")
}

return $textBuilder.ToString() 
```

如果您自己调用 PowerShell 脚本，它将读取控制台缓冲区并将其写回屏幕

```
PowerShell -noprofile -sta -command "C:\Scripts\Get-ConsoleAsText.ps1" 
```

您也可以这样调用它来将内容捕获到文件中：

```
PowerShell -noprofile -sta -command "C:\Scripts\Get-ConsoleAsText.ps1 | Out-File MyOutput.txt -encoding ascii" 
```

如果您想处理它并在批处理文件中执行一些操作，您可以调用它并使用`FOR`命令处理输出。我会把这个练习留给你。

因此，例如，您的批处理文件将如下所示将控制台输出捕获到文件中：

```
c:\myProgramInC.exe
echo "Ending with error"
PowerShell -noprofile -sta -command "C:\Scripts\Get-ConsoleAsText.ps1 | Out-File MyOutput.txt -encoding ascii"
PAUSE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T09:09:51.070

You can do this in C easily enough, using the [ReadConsoleOutputCharacter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684969%28v=vs.85%29.aspx) function.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T22:20:16.470

最后，这就是我让它发挥作用的方法。按照 Harry Johnston 的建议，我搜索了 ReadConsoleOutputCharacter 函数的工作方式，并运行了下一个程序。

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <fstream>

#define BUFFER_SIZE 50000

int main(){
    HANDLE hOut;
    COORD location = {0, 0};
    char *buffer=NULL;
    DWORD numberRead;
    std::ofstream fileLog;

    buffer = new TCHAR[BUFFER_SIZE];

    if ( buffer==NULL )
    {
        printf("\nError: memory could not be allocated.\n");
        return 1;
    }

    fileLog.open ("logger.txt");

    if ( fileLog.fail() )
    {
        printf("\nError: file could not be opened.\n");
        return 1;
    }

    hOut = GetStdHandle(STD_OUTPUT_HANDLE);

    ReadConsoleOutputCharacter(hOut, buffer, BUFFER_SIZE, location, &numberRead);

    fileLog << buffer ;

    free(buffer);
    fileLog.close();

    return 0;
} 
```

我在互联网上找到的大部分代码，现在我没有 URL（除了它来自另一个论坛站点，我不知道是否可以引用竞争对手的站点）但是在谷歌中进行一次搜索不会不难找到。

我添加了它写入文件和内存分配的部分。它在 VS C++ 6 中完美运行。

这对我来说很好，虽然可能会更好。有两件事不是很好

1.  它将缓冲区中的所有内容写入一个文件，但它不保留换行符，所以我得到一个文本文件，其中所有信息都在一行中。
2.  无法定义要捕获多少行。它只需要从缓冲区开始到程序启动点的所有内容，这还不错，但是由于这个应用程序应该在不同的服务器上运行，每个服务器对于每组命令提示符窗口都有不同的缓冲区，效率不高只是在某些情况下缓冲区较小时使用 50000 字节的缓冲区。我认为这可能很多，但由于它是实时分配的，因此使用尽可能多的内存可能并没有那么错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-29T06:44:11.487

如果任何错误消息将被报告回命令输出流，则可以通过 STDOUT（标准输出）和 STDERR（标准错误）的重定向运算符轻松重定向。取决于您是否要捕获输出和/或错误，这取决于您。您很可能正在寻找类似的东西：

*   命令 2>> 文件名

“2”是重定向运算符的一部分，表示 STDERR 将被重定向并附加到文件名。

来源、示例和文档：

1.  [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx)
2.  [http://ss64.com/nt/syntax-redirection.html](http://ss64.com/nt/syntax-redirection.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T01:48:48.033

立即想到的一件事是将命令行的输出重定向到文件：

```
c:\myProgramInC.exe >> myProgramInC.log 
```

然后您可以查看日志文件中的内容。

# matlab - Yalmip 与 Matlab Quadprog 通信，设置选项

> ID：11911047
> 
> 赞同：0
> 
> 时间：2012-08-11T01:09:04.463
> 
> 标签：matlab, mathematical-optimization, solver

我在通过[Yalmip设置](http://users.isy.liu.se/johanl/yalmip/)[Quadprog](http://www.mathworks.com/help/toolbox/optim/ug/quadprog.html)求解器选项时遇到问题。

```
Options = sdpsettings('solver','quadprog','quadprog.Algorithm', ... 
                      'interior-point-convex','quadprog.Display', ...
                      'iter','quadprog.Diagnostics', 'on');
diagnostics = solvesdp(Constraints , Objective, Options); 
```

但是这些选项设置都不起作用。特别是，它不会迭代地显示进度。文档或常见问题解答也没有太大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:34:03.563

要使用与求解器无关的一致方式来控制显示级别，始终通过**详细**选项进行控制。将其设置为 2，您将设置迭代显示选项。在调用 quadprog 之前，YALMIP 内部的代码如下所示

```
switch options.verbose
case 0
    options.quadprog.Display = 'off';
case 1
    options.quadprog.Display = 'final';
otherwise
    options.quadprog.Display = 'iter';
end 
```

话虽如此，它不会让你更进一步。在最新版本的 MATLAB 中，出于某种奇怪的原因，他们删除了迭代显示。如果您阅读有关 quadprog 的帮助，它会指出 *目前，只有 'final' 和 'off' 是参数 Display 的有效值（'iter' 不可用）。*

最后，如果您在学术界并且除了较小的 QP 之外，请安装更好的 QP 求解器。Quadprog 充其量是平庸的。cplex、gurobi、xpress 和 mosek 等求解器都有（全功能）免费的学术版本。

# c++ - 当返回未定义对象类型的引用的 C++ 函数的返回值未赋值时会发生什么？

> ID：11911056
> 
> 赞同：5
> 
> 时间：2012-08-11T01:12:36.367
> 
> 标签：c++, c++11

考虑以下代码：

```
class Foo;

Foo& CreateFoo();

void Bar()
{
   CreateFoo();
} 
```

在 Visual Studio 中，这将导致错误 C2027 表明 Foo 是未定义的类型。在大多数其他编译器中，它编译得很好。如果未分配 CreateFoo 的返回值，这只是一个问题。如果我将行更改为：

```
Foo& foo = CreateFoo(); 
```

它在 Visual Studio 中编译得很好。此外，如果 Foo 被定义而不仅仅是前向声明，那么它会在没有赋值的情况下编译得很好。

哪个应该是正确的行为？C++ 标准中是否有任何东西可以解决这个问题，或者这是留给实现的东西？我看了看，没有看到任何关于这个的东西。

更新： [已提交错误报告。](https://connect.microsoft.com/VisualStudio/feedback/details/757831/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T01:23:46.667

这看起来像标准的相关部分（第 5.2.2 节）：

> 如果结果类型是左值引用类型或对函数类型的右值引用，则函数调用是左值，如果结果类型是对对象类型的右值引用，则为 xvalue，否则为纯右值。
> 
> 如果函数调用是对象类型的纯右值：
> 
> *   如果函数调用是
>     
>     
>     *   *decltype 说明符*的操作数或
>         
>         
>     *   逗号运算符的右操作数，它是*decltype-specifier*的操作数，
>         
>         
>     
>     没有为纯右值引入临时对象。prvalue 的类型可能不完整。[注意：因此，prvalue没有分配存储，也没有被销毁；因此，在此上下文中，由于是函数调用的类型，因此不会实例化类类型。无论表达式使用函数调用表示法还是运算符表示法 (13.3.1.2)，这都是正确的。— end note ] [ 注意：与 decltype-specifier 的规则不同，它考虑 id-expression 是否带括号（7.1.6.2），括号在此上下文中没有特殊含义。——尾注]
>     
>     
> *   否则，prvalue的类型应该是完整的。

由于此函数结果类型是左值引用类型，因此函数调用的计算结果为左值，不适用完整性要求。

该代码是合法的，至少在 C++11 中是合法的，没有任何已发布的 Visual C++ 版本完全实现了该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:44:50.337

您始终可以在函数声明中使用不完整类型（因为它仅声明函数的签名，而不是任何实际代码），但在使用时则不行。

调用`CreateFoo();`等于`(void) CreateFoo();`，我的猜测是 Visual Studio 需要检查 Foo 的代码来进行任何转换（我不确定您是否真的可以编写 void 转换），因为对于转换，您需要一个完整的类型。

至于`Foo & foo = CreateFoo();`，这不会进行任何转换，因此您可以避免使用不完整的类型。

# android - 小部件配置活动关闭时启动器活动实例重新启动

> ID：11911058
> 
> 赞同：1
> 
> 时间：2012-08-11T01:12:55.453
> 
> 标签：android, android-intent, android-activity, widget, android-pendingintent

我有一个活动 A 可用于配置小部件。但也可以直接从启动器启动。保存小部件配置实例时，启动器实例会重新启动。我想知道为什么。

首先，我从启动器开始活动。然后我按下 Home 按钮以停止活动。

现在我单击主屏幕上的一个小部件，小部件配置活动实例启动。我就是这样称呼它的。

```
Intent intent = new Intent(context, A.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);

PendingIntent pendingIntent = PendingIntent.getActivity(context, appWidgetId, intent,
PendingIntent.FLAG_UPDATE_CURRENT); 
```

当离开小部件配置活动实例时，例如通过保存按钮单击启动器活动实例重新启动。

```
public void onClick(View v) {
        settings.save();

        // Signal that saving was performed and widget should be shown
        Intent resultValue = new Intent();
        resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        setResult(RESULT_OK, resultValue);

        BreakWidgetProvider.updateWidgets(new int[] { appWidgetId }, this);

        this.finish();
    } 
```

这些活动应该属于不同的任务。我想知道为什么它们是相关的。

如何防止启动器活动实例重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:02:15.083

我解决了。小部件配置活动实例似乎是由启动器启动的活动实例的子代。所以我调整了如下清单。

```
<activity
    android:name=".BreakMainActivity"            
    android:label="@string/app_name"
    android:launchMode="standard"
    **android:allowTaskReparenting="false"**
    **android:noHistory="true"**            
    android:theme="@android:style/Theme.Light" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

我想 allowTaskReparenting="false" 就足够了。

# java - 对话框显示问题

> ID：11911063
> 
> 赞同：0
> 
> 时间：2012-08-11T01:14:00.390
> 
> 标签：java, android

我正在测试回答我的问题的代码：

[删除自定义选项菜单项之间的行](https://stackoverflow.com/questions/10573948/remove-line-between-custom-option-menu-items)

与这张照片相关的答案：

![在此处输入图像描述](../Images/55eba15d2649ae3431fa94e33726ad77.png)

我试图通过将此代码添加到`WidgetMenu`类来按下反馈时触发对话框，但它让我强制关闭，我添加的代码：

```
 public void onClick(View arg0) {       
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.custom_dialog);
        dialog.setTitle("Title...");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById
                           (R.id.dialog_text);
        text.setText("Places contact me");

        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

    Button dialogButton = (Button) dialog.findViewById(R.id.dialog_Button);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();
      }
    }); 
```

我的日志猫：

```
 W/KeyCharacterMap(303): No keyboard for id 0
  W/KeyCharacterMap(303): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
  D/dalvikvm(303): GC_EXTERNAL_ALLOC freed 932 objects / 65328 bytes in 90ms
  D/AndroidRuntime(303): Shutting down VM
  W/dalvikvm(303): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
  E/AndroidRuntime(303): FATAL EXCEPTION: main
  E/AndroidRuntime(303): java.lang.NullPointerException
  E/AndroidRuntime(303): at android.app.Dialog.<init> (Dialog.java:141)
  E/AndroidRuntime(303): at android.app.Dialog.<init> (Dialog.java:123)
  E/AndroidRuntime(303): at com.tsn.dr.WidgetMenu$Ui$2.onClick (WidgetMenu.java:99)
  E/AndroidRuntime(303): at android.view.View.performClick (View.java:2408)
  E/AndroidRuntime(303): at android.view.View$PerformClick.run (View.java:8816)
  E/AndroidRuntime(303): at android.os.Handler.handleCallback (Handler.java:587)
  E/AndroidRuntime(303): at android.os.Handler.dispatchMessage (Handler.java:92)
  E/AndroidRuntime(303): at android.os.Looper.loop(Looper.java:123)
  E/AndroidRuntime(303): at android.app.ActivityThread.main (ActivityThread.java:4627)
  E/AndroidRuntime(303): at java.lang.reflect.Method.invokeNative (Native Method)
  E/AndroidRuntime(303): at java.lang.reflect.Method.invoke (Method.java:521)
  E/AndroidRuntime(303): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
  E/AndroidRuntime(303): at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:626)
  E/AndroidRuntime(303): at dalvik.system.NativeStart.main(Native Method) 
```

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:00:02.810

可以试试这个：

```
final Dialog dialog = new Dialog(YourActivity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:16:26.330

构造`Dialog`函数失败并带有`NullPointerException`. 我能想到的唯一原因是`context`您传入的参数确实是`null`.

你如何初始化`context`？

# three.js - Three.js 移动几何的中心

> ID：11911065
> 
> 赞同：23
> 
> 时间：2012-08-11T01:14:39.377
> 
> 标签：three.js

我创建了一个圆柱体，我想通过改变它的边界框将它的旋转中心移动到它的一端，但它不起作用。

[http://jsfiddle.net/736a7/1/](http://jsfiddle.net/736a7/1/)

有一个我一直在努力的例子。

基本上我想旋转圆柱体，就好像它是一把被它的手柄挥动的剑。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-12T03:43:16.757

多亏了一些帮助才发现。

```
geometry.applyMatrix( new THREE.Matrix4().makeTranslation(x, y, z) ); 
```

使用它我将圆柱体的 y 平移了 100 个点，所以它基本上在它的下端旋转。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T01:07:51.287

在我的案例中，我采用了一种使用枢轴的方法。基本上，您创建一个枢轴点：

```
var pointToRotateAround;
var objectToRotate;
...
var pivot = new THREE.Object3D();
pivot.position=pointToRotateAround.position;
pivot.add(objectToRotate);
scene.add(pivot);
...
function render (){
pivot.rotation.z +=0.05;
}
... 
```

它提供了使一个物体围绕另一个或任何点旋转的可能方法。以下是有关该方法的更多信息：[https ://github.com/mrdoob/three.js/issues/1830](https://github.com/mrdoob/three.js/issues/1830)

# java - 如何在控制台中打印某些内容时替换键入的文本？

> ID：11911069
> 
> 赞同：0
> 
> 时间：2012-08-11T01:15:19.410
> 
> 标签：java, printing, command, system.out, system.in

我正在从通过从批处理文件运行我的应用程序创建的控制台读取和写入。

我正在创建一个小型 servlet，但遇到了一个问题，即在我打字时，会在我打字的末尾打印一些东西（例如客户端连接或断开连接之类的东西）。它基本上让一切看起来很有趣，我一直在尝试找到一种方法来复制我正在输入的内容，打印出发生的事情（即客户端 x 连接！）并粘贴我在下面输入的命令，以便我可以继续.

我想我有一部分工作了（我输入的部分被替换了），但我想不出一种方法来复制我输入的内容或将其放在下一行，以便我可以继续输入。

每当要打印任何内容时都会调用此方法，它基本上将时间戳放在输出上。

```
public void say(String s){
    Calendar calendar = Calendar.getInstance();
    Date now = calendar.getTime();
    Timestamp current = new Timestamp(now.getTime());
    SimpleDateFormat date = new SimpleDateFormat("HH:mm:ss");
    String time = date.format(current);
    //how it gets printed
    System.out.println("\r" + time + "> " + s);
} 
```

我用来等待输入的线程：

```
Thread thread = new Thread(){
    public void run(){
        Scanner scan = new Scanner(System.in);
        while(scan.hasNextLine()){
            String s = scan.nextLine();
            //do something with s?
        }
    }
};
thread.start(); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:21:06.520

也许在 say 方法中，在打印出任何内容之前，它可以检查 io 缓冲区或管道以查看其中是否有某些内容（例如：您正在输入的新命令）。如果是这样，保存它，做你必须做的，然后把它放回缓冲区。

# php - 使用 cakephp 记录 404 的 URL

> ID：11911071
> 
> 赞同：2
> 
> 时间：2012-08-11T01:15:30.440
> 
> 标签：php, cakephp

当用户获得 404 页面时，我将如何记录 URL？在我的日志中，我看到很多 NotFoundExceptions 被抛出，但这并不是完全有用的信息。

理想情况下，我想将 URL 记录到数据库中，以便生成易于阅读的报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:34:03.713

您可以将 PHP 代码放在 404 页面中以将其记录到数据库中，使用`$_SERVER['REQUEST_URI']`.

# .net - 将图像从 .NET 传输到 Delphi

> ID：11911073
> 
> 赞同：1
> 
> 时间：2012-08-11T01:15:54.707
> 
> 标签：.net, wcf, delphi

我想知道是否有人可以建议。我编写了一个 .NET 4 WCF 服务，该服务旨在为扫描的文档提供服务，并且正在努力让 Delphi 7 消费者工作。

在 .NET 方面，我使用以下代码将图像转换为位图，然后转换为字节数组：

```
 using (Bitmap img = new Bitmap(fileName))
        {
            ImageConverter converter = new ImageConverter();
            _bytes = (byte[])converter.ConvertTo(img, typeof(byte[]));
        } 
```

在消费者方面，我想将 ByteArray 读入 TImage.Picture ，这就是计划失败的地方。“LoadFromStream”行中的以下代码错误

> 带有消息“位图图像无效”的 EInvalidGraphic

```
procedure TBarcodeImageForm.FetchFile;
var
  bytes : TByteDynArray;
  info  : TDocInfo;
  Stream : TMemoryStream;
  bmp : TBitMap;
begin
  info := TDocInfo(FDocList.Items[lbFIles.ItemIndex]);
  bytes := FDocButton.FetchDocument(info.FilePath).Data;
  stream := TMemoryStream.Create();
  try
    Stream.Write(bytes[0], Length(Bytes));
    Stream.Position := 0;
    bmp := TBitMap.Create;
    bmp.LoadFromStream(stream);
  finally
    Stream.Free;
  end; 
end; 
```

通过使用 TFileStream 代替上面的内存流，我已经证明数据是有效的——也就是说，我可以在 MSPaint 中加载结果。我不得不承认我被困在下一步：Delphi 7 是否过于过时而无法处理现代位图？服务器端的文件与 tiffs 和 jpgs 相关吗？接下来我该怎么办？

感激地收到任何建议。

更新 - - - - - - - - - -

我更改了代码，以便传递 JPG，结果非常相似。这次我在尝试加载图像客户端时收到 JPEG 错误 #53。如果我使用 TFileStream 并保存到磁盘，则生成的文件在 Windows 图片查看器中看起来不错，但仍不会加载到 TImage 组件中。

客户端现在看起来像这样

```
 stream := TFileStream.Create('c:\temp.jpg', fmCreate);
  try
    Stream.Write(bytes[0], Length(Bytes));
    Stream.Position := 0;
  finally
    Stream.Free;
  end;

  try
    imgDocument.Picture.LoadFromFile('c:\temp.jpg');
  except end; 
```

服务器端（这次发布整个数据合约以防万一）

```
 [DataContract]
public class ImageData
{
    private byte[] _bytes;

    [DataMember]
    public byte[] Data
    {
        get { return _bytes; }
        set { _bytes = value; }
    }

    public ImageData(string fileName)
    {
        using (MemoryStream memStream = new MemoryStream())
        {
            using (Image img = Image.FromFile(fileName))
            {
                img.Save(memStream, ImageFormat.Jpeg);
            }
            _bytes = new Byte[memStream.Length];
            int i = 0;
            while (i < memStream.Length)
                i += memStream.Read(_bytes, i, 128000);
        }
    }
} 
```

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------

Winforms 使用者对服务的成功测试使用了以下代码。

```
if (docList != null)
{
    using (MemoryStream memStream = 
        new MemoryStream(client.FetchDocument(docList.Items[0].FilePath).Data))
    {
        System.Drawing.Image img = Image.FromStream(memStream); 
        pictureBox1.Image = img; 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:31:03.947

我的印象是您让 WCF 负责在服务器和客户端之间编组和序列化数据的过程（两者都是由工具为您自动生成的？）并且您对“在线”格式，现在您想在 Delphi 7 中编写一个可以读取此格式的客户端。

我会警告您，您将面临一场艰苦的斗争，但是如果您的 WCF 使用 SOAP 消息，那么您就有机会在 Delphi 中编写一个使用 WCF 服务消息的 SOAP 客户端。

至于图像本身，我不知道它们是如何序列化的。但是一旦你发现它应该很容易。假设 WCF 不是简单地序列化 System.Drawing.Bitmap 而是在磁盘上传输 Bitmap 文件的原始字节，那么您就一切就绪：只需将 WCF 消息的字节转储到磁盘或内存缓冲区并打开他们用 TBitmap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:40:57.690

对不起，大家 - 这原来是一个红鲱鱼。问题是我提供的图像首先是无效的。只需快速致电第三方供应商即可。

从好的方面来说，这意味着我提供的代码示例基本上是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:09:53.640

除非您同意使用位图图像，否则您可能想尝试通过 TJPegImage（在 JPeg 单元之外）从流中读取图像。我正在做类似于您正在尝试的事情，但是通过 AtoZed 的“CrossTalk”产品直接从 .Net 4 包装器中获取图像字节。

因此，首先我必须将跨边界传递的 .Net MemoryStream 对象转换为 Delphi 字节数组。然后我将它加载到 Delphi TMemoryStream 中并将其带入 TJpegImage。

（我最初遇到了与您相同的问题，直到我决定 LoadfromFile 显然是根据文件名定制加载方式。基于此，我明确地为 JPegs、Tiffs 等创建了正确的图像变体，而不是尝试将其作为通用 TImage 加载。）

当返回的图像是 Jpeg 时，这适用于 Delphi7：

```
 dJpegImage: TJpegImage;
  imageMemoryStream: MemoryStream;
  pictureBoxImageOutput: TImage;
  lengthImageByteArray: Integer;   // already set before this fragment based on the .Net Image info
  imageDelphiByteArray: array of byte;
  ...
  ...
  imageStream := TMemoryStream.Create();
  imageStream.WriteBuffer(imageDelphiByteArray[0], lengthImageByteArray);
  imageStream.Position := 0;
  dJpegImage := TJPEGImage.Create;
  dJpegImage.LoadFromStream(imageStream);
  pictureBoxImageOutput.Picture.Graphic := dJpegImage; 
```

# html - div 周围的额外空间

> ID：11911076
> 
> 赞同：0
> 
> 时间：2012-08-11T01:16:56.407
> 
> 标签：html

我有一个问题，我在这个文本周围有空间，我无法摆脱。我不能将全局填充：0 或边距：0 应用于所有 div。我的 div 是页面的一部分，我想单独删除 div 周围的额外空间，我也无法将 padding:0 或 margin:0 应用于正文。

```
<html>
<body>
<div class="topcont" id="topcont" style="display: block;padding:0px;margin:0px">
<div  id="dragcont" style="display: block;padding:0px;margin:0px">
    <div style="padding:0px;margin:0px; text-align: center; font-size: 18px; font-weight: bold; font-family: Helvetica Neue;">
        Drop up to 5 photos here
    </div>
    <div style="padding:0px;margin:0px; font-size: 18px; font-family: Helvetica Neue; border: 0px none; height: 18px; text-align: center;">
        Or
    </div>
</div>
<div style="padding:0px;margin:0px;color:#333; text-align:center; font-size:14px;font-family:Helvetica Neue">
   to add them as attachments
</div>
</div>
</body>
</html> 
```

我不知道为什么我在给定文本上方获得空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:34:14.767

您可以在任何元素上使用以下命令轻松地将边距设置为 0。

```
#myDiv{
margin:0px;
} 
```

注意`0px;`和不`0;`

出于渲染/优化目的，最好包含测量单位（例如 px、em 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:31:48.500

您需要将边界元素的边距设置为 0，具体取决于布局的其余部分，可能仅针对相关方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T01:51:19.703

[http://jsfiddle.net/sCj6y/1/](http://jsfiddle.net/sCj6y/1/)你去，但你不应该在 HTML 文件中设置元素的样式。

# bash - 使用 bash 从文本文件中的 4 个标记之间提取文本

> ID：11911078
> 
> 赞同：1
> 
> 时间：2012-08-11T01:17:40.387
> 
> 标签：bash, sed, awk

好的，这是一个棘手的问题……我有一个 file1，我想用 file1 中的特定文本创建一个 file2。

```
 random useless text 
     #START
     random IMPORTANT text
     #END 
     random useless text

     random useless text 
     #START
     random IMPORTANT text
     #END 
     random useless text 
```

我想提取第一对#START 和#END（包括#'s）之间的文本，但忽略第二对#START 和#END。请注意，#START #END 对在同一个文件中出现了两次。我只想要第一对之间的内容（包括#的符号）。

一切都说完了，我应该只有这个字面结果（仅来自第一对#START #END：

```
 #START
     random IMPORTANT text
     #END 
```

* * *

在另一篇文章中有人使用：

sed -n "/这是令牌 1/,/这是令牌 2/p"

这是一种删除单个配对字符串“this is a token 1”和“this is a token 2”的方法

但是当我在这个 sed 中使用“#START”和“#END”时，它会保留两对 #START 和 #END。

注意：第一个#START #END 之间的内容总是与第二个#START #END 之间的内容不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T02:01:56.763

我会使用 awk：

`awk '/#START/{flag=1} flag{print} /#END/{exit}' your_file`

解释：

1.  当前记录与包含开始标记的正则表达式匹配时设置标志。
2.  设置标志时，打印当前记录
3.  当记录匹配结束标记时，程序只是存在，因此不处理第二个副本

*注意*：多个 awk 规则可以应用于一条记录。 *另请注意*：根据您的任务，您可能需要调整记录分隔符`RS`和输出记录分隔符`ORS`，例如：

`gawk -v RS='[[:space:]]+' -v ORS=' ' '/#START/{flag=1} flag{print} /#END/{exit}'`

这会将记录分隔符设置为任意数量的空白字符，并将输出记录分隔符设置为空格。因此，标记由空格分隔，并且任何可能的信息都不会进入输出。在这样的输入上比较，例如第一个版本与这个版本：

```
blahblahblah #START
important text
#END blah blah blah
fdsfs 
```

`gawk`如果需要，请参阅官方参考手册：[链接](http://www.gnu.org/software/gawk/manual/gawk.html#Records)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T07:34:16.950

这可能对您有用（GNU sed）：

```
sed '/#START/,/#END/!d;/#END/q' file 
```

解释：

*   `/#START/,/#END/!d`删除（不打印）不在 和 之间的任何`#START`内容`#END`。这只会在`#START`和之间打印`#END`
*   `/#END/q`遇到时退出但仍然打印`#END`

# python - Python：我的嵌套循环有什么问题？

> ID：11911081
> 
> 赞同：-2
> 
> 时间：2012-08-11T01:18:24.653
> 
> 标签：python, loops, while-loop, nested

使用 while 循环，我编写了一个将正整数作为输入的过程，并打印出一个乘法表，显示所有整数乘法直到并包括输入数。方程的打印顺序很重要。

例如， print_multiplication_table(2) 给出：
1 * 1
1 * 2
2 * 1
2 * 2

**这是我的代码：**

```
def print_multiplication_table(n):
    a = 1
    b = 1
    while a <= n:
        while b <= n:
            print str(a) + " * " + str(b)
            b = b + 1
        a = a + 1 
```

但是，这似乎不起作用，因为它只会打印出来

```
1 * 1
1 * 2 
```

有谁知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:21:29.123

您需要在执行之前为内部循环初始化计数器

```
def print_multiplication_table(n):
    a = 1
    b = 1 # won't do harm, but doesn't really need now
    while a <= n:
        b = 1 # <-- note
        while b <= n:
            print str(a) + " * " + str(b)
            b = b + 1
        a = a + 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T01:23:16.133

考虑使用`for`代替`while`：

```
def print_multiplication_table(n):
    for a in range(1, n+1):
        for b in range(1, n+1):
            print str(a) + " * " + str(b) 
```

这使：

```
1 * 1
1 * 2
2 * 1
2 * 2 
```

Using`for`将自动跟踪您的计数器变量并避免您遇到的错误类型（这当然并不意味着您不能使用`for`-loops 出错，但避免您遇到的错误类型更容易）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T01:29:36.520

使用 Python 理解更容易：

```
>>> print '\n'.join('{} * {}'.format(a,b) for a in range(1,6) for b in range(1,6))
1 * 1
1 * 2
1 * 3
1 * 4
1 * 5
2 * 1
# etc... 
```

或者，如果您想要终端换行：

```
>>> gen=('{} * {}'.format(a,b) for a in range(1,6) for b in range(1,6))
>>> print '\n'.join(gen),'\n' 
```

我使用了一个单独的 gen 表达式，只是为了更清楚地用逗号打印。这也有效：

```
>>> print '\n'.join('{} * {}'.format(a,b) for a in range(1,6) for b in range(1,6)),'\n' 
```

没有理由`str`在您的代码中进行显式调用。如果你不这样做，你仍然可以使用 a 和 b 作为整数：

```
>>> gen=('{} * {} = {:2}'.format(a,b,a*b) for a in range(1,3) for b in range(1,4))
>>> print '\n'.join(gen),'\n'
1 * 1 =  1
1 * 2 =  2
1 * 3 =  3
2 * 1 =  2
2 * 2 =  4
2 * 3 =  6 
```

# ruby-on-rails - Ruby on Rails——计数器缓存事务安全吗？

> ID：11911087
> 
> 赞同：6
> 
> 时间：2012-08-11T01:19:30.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, transactions, counter, counter-cache

它会处理两个人更新问题吗？

我用谷歌搜索并查看了 api 但什么也没找到

Rails 3+，红宝石 1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T21:47:58.997

使用 counter_cache 时，记录插入和计数器更新在同一个事务中完成。但这并不能保证操作的原子性。除了避免两个人更新问题之外，您可能还必须“锁定”您的记录。

请参阅[这篇出色的文章](http://www.nateware.com/an-atomic-rant.html)。这是关于 redis-objects gem，但前两部分完美地解释了 ActiveRecord 的问题和解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T03:23:08.197

简短的回答：没有。正如 Cédric 所提到的，Rails 会更新`counter_cache`事务的内部，因此如果您说有一个更新同一记录的后台进程，您会发现自己遇到死锁错误，除非您使用`with_lock`记录上的块运行这两个更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-22T14:59:26.730

至少对于 Rails 5.x，给定的答案似乎并不正确，因为它将执行原子的 SQL UPDATE。

```
UPDATE .... SET counter = counter + 1 
```

# php - 初始启动和高级概念

> ID：11911089
> 
> 赞同：1
> 
> 时间：2012-08-11T01:20:24.477
> 
> 标签：php

我正在创建我的第一个网站，我希望它会有一个中小型的追随者。我有启动它的基本工具，但是随着项目的每一步，我都会感到网站将不够用，尤其是当我研究我对 Memcache、datamappers 等我知之甚少的概念时，框架和 MVC。

现在我的问题是，专业人士，你会推荐我做什么。我应该只是破解它，以便我可以尽快启动它，然后逐步更新代码，还是应该在启动之前研究和实施这些技术和功能？

如果我可以将评论作为答案，我会的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:30:24.633

首先，绝大多数网站都不需要您提到的大多数内容（MemCache 等）。

如果您开始尝试构建“终极”站点来处理数百万用户，那么您将失败。完全。这种类型的架构需要一段时间才能完成，即使是那些确切知道自己在做什么的人。

要做到这一点，“正确”意味着您将多次重写它。FB、twitter 等并不是从他们今天拥有的架构开始的。他们从很小的地方开始，调整，重写了整个部分，并在沿途的某个时刻重新开始。然后又经历了一遍。

只要知道进入。将您的网站放在一起，学习一些东西，然后启动。通过观察人们如何与之交互以及您的代码如何响应，您将学到比现在尝试构建 uber 站点更多的东西。

从小处着手的另一个原因是，您可能对自己想要什么有所了解，但最终您的用户会根据他们想要的东西留下来。希望你能弄清楚并迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:49:02.753

如果您只知道如何编写代码，则应该将您的应用程序托管在像[Heroku这样的](http://heroku.com)[PAAS 云](http://en.wikipedia.org/wiki/Cloud_computing)上。

安全是一个主要问题，大多数新手都会犯同样的基本错误并且很容易被黑客入侵。如果您要存储有关您的用户的信息，您不希望黑客获取该信息。借助 Heroku 之类的 PAAS 解决方案，他们让忍者负责他们的平台安全。你提到的很多事情都与性能调整、缩放等有关，再次由上述忍者处理。当网站上线时，会有很多事情要做，如果你决定自己做所有事情，你实际上会淹没在工作中。

# html - 是否有任何 HTML5 基准，尤其是大型基准？

> ID：11911090
> 
> 赞同：0
> 
> 时间：2012-08-11T01:20:30.277
> 
> 标签：html, html-parsing, benchmarking

我想测试一个 HTML 解析器的性能。它是用 Java 编写的。但是，常规 HTML 文件的解析时间太小而无法衡量，例如 5 毫秒。

所以我正在寻找一个足够大的 HTML 作为我们的基准。如果您知道任何网站或网页非常大，或者您知道任何现有的 HTML 基准套件，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:24:55.240

**在任何**情况下解析 HTML 都非常快- 由于 HTML 解析过程，一个大的 HTML 文档不会花费很长时间来呈现，而是因为布局引擎中涉及的逻辑（这不是微不足道的任务！）。

例如，我有一个 2MB 的 HTML 文件，它是我们内部工具的转储。Firefox 和 IE 都会立即渲染它，因为它有一个非常简单的样式表，但我还有一个 30KB 的 HTML 文件，它使用了大量有趣的布局技术（和大量的`box-shadow`s），渲染大约需要 200 毫秒。

如果您想要更快地显示一个巨大的 HTML 文件，那么有不同的方法（例如拆分页面、分页数据或使用 Ajax 技术按需加载）。

# sockets - javax.microedition.io.ConnectionNotFoundException：socket::open 中的错误 10061

> ID：11911097
> 
> 赞同：1
> 
> 时间：2012-08-11T01:21:26.913
> 
> 标签：sockets, java-me, packet

`javax.microedition.io.ConnectionNotFoundException: error 10061 in socket::open`

j2me 我有这个错误 - 正在执行中。

我尝试搜索，但没有帮助。

代码：

```
Connector.open("socket://127.0.0.1:7777") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:34:20.800

根据[`ConnectionNotFoundException`](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/io/ConnectionNotFoundException.html)文档“此类用于表示无法找到连接目标或不支持协议类型”。

`socket`是受支持的协议，因此无法找到连接目标。确保 127.0.0.1:7777 已启动、正在运行，并且确实支持接收 Socket 连接。

您可以尝试以下 Java 代码：

```
public class Server {
    static boolean done = false;

    public static void main(String[] args) {
        try {
            ServerSocket server = new ServerSocket(7777);

            while (!done) {
                final Socket socket = server.accept();
                new Thread() {
                    public void run() {
                        treatSocket(socket);
                    }
                }.start();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    static void treatSocket(Socket socket) {
        // treat socket data
    }
} 
```

# java - 按分隔符和其他特定字符串拆分字符串

> ID：11911102
> 
> 赞同：1
> 
> 时间：2012-08-11T01:22:32.993
> 
> 标签：java, string, split

我知道如何通过分隔符拆分字符串，但我不知道它是如何通过字符串完成的。我的意思是我有一个字符串，例如

```
"(a AND b) OR c" 
```

我想拆分它，所以它忽略括号和特殊词，如 AND 和 OR。它应该返回我一个字符串数组`{a, b, c}`

相同的字符串也可以采用以下格式`"(a & b) || c"`

我想将 a、b、c 放入字符串数组并找到它们的 ID，并将它们的 ID 放入初始字符串而不是它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:11:59.287

这是一个快速而肮脏的解决方案：

```
String str = "(a AND b) OR c"; // Any string you want
String delims = "AND|OR|NOT|[!&|()]+"; // Regular expression syntax
String newstr = str.replaceAll(delims, " ");
String[] tokens = newstr.trim().split("[ ]+"); // RE syntax again
// tokens == ["a", "b", "c"] 
```

请注意，分隔符是一个正则表达式，如果您有更多分隔符，您可以添加到它。这个将替换“AND”、“OR”、“NOT”和一个或多个字符“!”、“&”、“|”、“(”或“)”。它用空格替换这些出现的每一个，然后在空格上分割字符串（确保修剪前后，这样我们就不会在我们的数组中得到它们）。

如果您对此有任何疑问，请告诉我。希望能帮助到你。

# objective-c - nsnumber 到 uipasteboard

> ID：11911103
> 
> 赞同：0
> 
> 时间：2012-08-11T01:22:37.990
> 
> 标签：objective-c, ios, nsnumber, uipasteboard

我想将浮点数复制到粘贴板中，但重要的是值，因为我想稍后将其粘贴为数字，作为数字。

试过：

```
[pasteboard setValue:SomeNSNumberWhereIStoredTheFloat forPasteboardType:@"NSNumber"]; 
```

有了它，它就没有什么可粘贴的了，而有了`pasteboard.string = numberInStringValue`，它将数字粘贴为一系列字符，我不感兴趣。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:27:32.857

粘贴板数据的“类型”不是类的名称，它是[统一类型标识符](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_intro/understand_utis_intro.html)（UTI，或者如果您记得 UTI 还代表什么，则只是 UT。）在这种情况下，您的数据没有关联的 UTI（数字是抽象概念，而不是数据格式。）您必须找出存储该数字并检索它的最佳方法。

我认为在这种情况下，将数字格式化为字符串就足够了：

```
NSString *numString = [NSString stringWithFormat:@"%f", theFloatValue];
pasteboard.string = numString; 
```

后来，当它回来时：

```
float theFloatValue2 = [pasteboard.string doubleValue]; 
```

这不考虑检查`nil`或其他错误处理。

如果您需要非常高的精度，您可能需要研究`NSData`基于存储技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T19:09:42.013

可以`NSNumber`直接存储。您可以使用 API 中的以下方法

> **setValue:forPasteboardType:**
> 
> 使用此方法在粘贴板上放置一个对象，该对象是标准属性列表对象，它是 NSString、NSArray、NSDictionary、NSDate、NSNumber 或 NSURL 类的对象。
> 
> **valueForPasteboardType:**
> 
> 此方法尝试返回一个对象，该对象属于与表示类型（通常是 UTI）相适应的类类型。例如，如果表示类型是 kUTTypePlainText (public.plain-text)，则该方法返回一个 NSString 对象。如果该方法无法从表示类型确定类类型，则将对象作为通用属性列表对象返回。属性列表对象包括 NSString、NSArray、NSDictionary、NSDate 或 NSNumber 对象，也可以使用 NSURL 对象。如果该方法无法将值解码为属性列表对象，则它将粘贴板项作为 NSData 对象返回。

真正的问题在于找到正确的 UTI，因此课程会自动给你一个`NSNumber`而不是给你一个`NSData`对象。

更糟糕的是，代码似乎不像文档所宣传的那样工作。我从几个人那里听说过这个方法总会给你回报`NSData`。[您可以在此答案](https://stackoverflow.com/questions/9164278/storing-nsarray-in-uipasteboard)中找到此类问题的示例（和解决方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T07:24:34.777

您可以将浮点值存储为 NSNumber。但是 NSNumber 没有正确存储在 UIPasteboard 中，尽管文档声明它确实（错误？）。

要将 NSNumber 保留在 UIPasteboard 中，您应该将 NSNumber 存档到 NSData，并且要从 UIPasteboard 检索 NSNumber，您应该将 NSData 解压缩回 NSNumber。

```
// adding data to pasteboard
NSNumber *number = [NSNumber numberWithDouble:floatValue]; // store your value here
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:number]; // archive NSNumber to NSData
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:data, @"yourKey",nil];
[[UIPasteboard generalPasteboard] addItems:[NSArray arrayWithObject:dict]];

// retrieving data
NSData *data = [dict valueForKey:@"yourKey"]; // here dict is properly obtained NSDictionary of pasteboard object
NSNumber *number = [NSKeyedUnarchiver unarchiveObjectWithData:data]; // unarchive NSData to NSNumber 
```

# regex - 无法使用 sed 进行分组

> ID：11911104
> 
> 赞同：1
> 
> 时间：2012-08-11T01:22:42.360
> 
> 标签：regex, sed, grouping, backreference, parentheses

这按预期工作：

输入文件 src.txt：

```
ffmpeg -i uno.3gp
ffmpeg -i dos.3gp
ffmpeg -i tres.3gp 
```

命令：

```
sed 's/-i .*\./XXX/' <src.txt 
```

结果如预期：

```
ffmpeg XXX3gp
ffmpeg XXX3gp
ffmpeg XXX3gp 
```

那么为什么这些不能按预期工作：

命令：

```
sed 's/-i (.*)\./XXX/' <src.txt 
```

预期的：

```
ffmpeg XXX3gp
ffmpeg XXX3gp
ffmpeg XXX3gp 
```

实际结果：

```
ffmpeg -i uno.3gp
ffmpeg -i dos.3gp
ffmpeg -i tres.3gp 
```

命令：

```
sed 's/-i (.*)\.3gp/\1.mp3/' <src.txt 
```

预期的：

```
ffmpeg uno.mp3
ffmpeg dos.mp3
ffmpeg tres.mp3 
```

实际结果

```
sed: -e expression #1, char 18: invalid reference \1 on `s' command's RHS 
```

括号似乎不适用于分组，但我发现的所有教程和示例似乎都认为它们应该......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:29:16.177

在 Classic 中`sed`（不一定是 GNU `sed`），分组命令使用`\(`and `\)`（计数使用`\{`and `\}`）而不是未转义。

因此，您应该尝试：

```
sed 's/-i \(.*\)\./XXX/' <src.txt
sed 's/-i \(.*\)\.3gp/\1.mp3/' <src.txt 
```

或者，如果您有 GNU `sed`，请添加`-r`或`--regexp-extended`“在脚本中使用扩展的正则表达式”（引用自`sed --help`）。

```
sed -r 's/-i (.*)\./XXX/' <src.txt
sed -r 's/-i (.*)\.3gp/\1.mp3/' <src.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T06:33:10.477

正如 Jonathan Leffler 回答错误的来源一样，我想提一下，反向引用并不总是好东西，有时它真的会减慢脚本的速度。

此外，在您的情况下，您根本不需要反向引用：

```
sed 's/-i //;s/\.3gp/.mp3/' <src.txt 
```

将完成这项工作。

# dynamics-nav - 如何在 Ms. Dynamic Nav 2009 中禁用选择列菜单

> ID：11911105
> 
> 赞同：1
> 
> 时间：2012-08-11T01:22:51.907
> 
> 标签：dynamics-nav

在 Microsoft Dynamics NAV 2009 中的 RoleTailored Client (RTC) 中，用户可以通过右键单击列表 => 选择列在订单列表中添加列。我只是禁用选择列上下文菜单，以便用户无法执行该功能。我怎么能这样做？

谢谢你的帮助，马卡拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:30:29.983

我不是 100% 确定，但我不认为这是可能的，抱歉。如果您的许可证允许，您可以考虑自定义列表页面以仅包含您希望用户看到的列，或者复制列表页面并自定义副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:31:25.550

我不相信这是可能的。我建议从表单/页面的列表视图中删除列，以便它们在选择列上不可用。

如果您的许可证中没有编辑表单和页面的必要权限，您可能需要咨询您的 NAV 合作伙伴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T03:12:52.713

转到您分配给用户的“个人资料”，并在“禁用个性化”列中放置复选标记是一种方法。但是，它也会阻止用户自定义导航窗格或自定义页面。

# xcode - 将 .png 加载到 xcode 并转换为 UIImage

> ID：11911106
> 
> 赞同：1
> 
> 时间：2012-08-11T01:22:56.570
> 
> 标签：xcode, uiimage, png, sparrow-framework

我对 Xcode、obj-c 等完全陌生，但我想使用 Parse.com 将图像保存到他们的服务器，他们说你必须使用这一行，将 UIImage 转换为 NSData

```
NSData *imageData = UIImagePNGRepresentation(image); 
```

如何加载资源文件夹中的 .png 之一，然后将其转换为 UIImage？如果有帮助的话，我也在使用 Sparrow 框架。

**编辑**

我已经按照下面的建议尝试了此代码。

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"terrainHexAtlas_v1@2x.png" ofType:@"png"];
UIImage *myImage = [UIImage imageWithContentsOfFile:imagePath];
NSData *imageData = UIImagePNGRepresentation(myImage);

PFFile *imageFile = [PFFile fileWithName:@"terrainHexAtlas_v1@2x.png" data:imageData];
    [imageFile save]; 
```

但似乎什么都没有发生。我在最后一行尝试了一个断点，vars imagePath、myImage、imageData 都是 00000000，我没有得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:51:28.320

你应该遵循代码：

```
//png
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"your_image" ofType:@"png"];
UIImage *myImage = [UIImage imageWithContentsOfFile:imagePath];
NSData *pngImageData = UIImagePNGRepresentation(myImage);

//jpeg
NSString *imagePath2 = [[NSBundle mainBundle] pathForResource:@"your_image" ofType:@"jpg"];
UIImage *myImage2 = [UIImage imageWithContentsOfFile:imagePath2];
NSData *jpegImageData = [UIImageJPEGRepresentation(myImage2, 1.0f)]; 
```

* * *

## 不要在 pathForResource 中包含扩展名。检查以下错误案例。

// 不包含扩展名

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"your_image.png" ofType:nil]; 
```

// 包含一个扩展

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"your_image" ofType:@"png"]; 
```

// 有些人会弄错大小写。错误代码。那个回报**`nil`**

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"your_image.png" ofType:@"png"]; 
```

# c++ - 用于动态链接的虚拟文件

> ID：11911109
> 
> 赞同：0
> 
> 时间：2012-08-11T01:23:34.257
> 
> 标签：c++, file, dynamic, linker, virtual

我的问题非常复杂，可能是不可能的，但我们开始吧：

使用 C++，我目前正在为我的游戏项目开发通用服务器引擎。通用，因为引擎的每一部分都会在启动后动态加载。现在，游戏对象也将从基础对象继承并具有重载的“模拟”功能。这样，每个对象都会有它特定的行为，我可以做一些我称之为“C++ 脚本”的事情，这比解释的 lua 脚本文件快得多。它也更加动态。（请不要使用会杀死 c++“脚本”部分的解决方案，例如“忘记动态链接，这太疯狂了”。这种性能提升是完全必要的，因为我正在使用大型体素贴图）

我的问题：

这确实是很多*.dll/* .so 文件，我想将它们打包到一个简单的存档中，这样我就可以在所述源代码上使用 zlib，并且可能将所有内容与纹理和声音一起打包在小的“对象包”中。现在 Windows DLL API 和 Linux SO API 不允许我从内存地址加载 dll/so 文件，这很可惜。（我就在那儿，还是可以绕过它？:)）我不不想解压缩并将这些文件临时保存在文件系统上，因为它们有成百上千个，这会大大增加加载时间。此外，我对更多的外部依赖项（如 boost）不感兴趣。

所以这是我的问题：

是否有跨平台方法在内存中创建具有真实路径的虚拟文件？这样我就可以绕过 HDD 的慢 IO 速度。

或者使用临时文件真的没什么大不了的，因为现代操作系统的文件缓冲区足够快/足够智能，不会将所有这些文件写入磁盘？（其实Linux支持虚拟文件系统，但是windows不...）

我希望你们能在那里帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:30:44.793

没有winapi，这是肯定的，但你可以手动完成。您可以将其加载到内存中，填充它的导入表并调用导出的函数（在调用 DllMain 之后）。我看到了一个程序，实际上有人使用该方法创建了一个新进程……有关详细信息，请参阅 PE 文档，但它确实有效。

而且它相对容易做，因为你只需要找到 PE 导入表，然后做动态链接器所做的事情，用跳转和地址填充它。Dlls 包含与位置无关的代码，因此不需要重定位。

It sould be the same on linux (only using the elf structure), but if you have a better solution with virtual file systems, you should use that.

# http - Resumable.js：HTTP 响应错误（部署到 heroku 或 nodejitsu）

> ID：11911115
> 
> 赞同：1
> 
> 时间：2012-08-11T01:24:01.107
> 
> 标签：http, node.js, heroku, response

我一直在试验 resumable.js，我对笔记本电脑上内置的 node.js 服务器的性能非常满意。但是，当我将它部署到 heroku 或 nodejitsu 并收到此错误时，它会在超过 1MB 的情况下死掉：

> 格式错误的 HTTP 响应 (heroku)

或者

> {"bytesParsed":9,"code":"HPE_INVALID_STATUS"} (nodejitsu)

我该如何解决这个问题，以便我可以部署？

这是我的 package.json：

```
{
  "name": "uploader-resumable",
  "version": "0.0.1",
  "dependencies": {
    "express": "3.0.x"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  },
  "subdomain": "blahblah",
  "scripts": {
    "start": "app.js"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-04T14:52:52.583

我正在回复这个未回答的问题，因为当您搜索 HPE_INVALID_STATUS 错误时它的搜索排名很高，即使它有点旧。

当您从 nodeJS 中通过 HTTP 响应传递无效状态代码而不检查有效状态代码（例如对象而不是数字）时，可能会发生此错误。（当我帮助某人调试此行为时，我已经看到很多 HTTP/1.1 [Object object] 响应经过...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:46:12.907

> 格式错误的 HTTP 响应

是从 Heroku 返回的特定响应代码。Nodejitsu 不应该显示该错误。

见：[https ://devcenter.heroku.com/articles/error-codes#h17-poorly-formatted-http-response](https://devcenter.heroku.com/articles/error-codes#h17-poorly-formatted-http-response)

# git - 如何用 jenkins 打包一个网站

> ID：11911117
> 
> 赞同：-2
> 
> 时间：2012-08-11T01:24:20.657
> 
> 标签：git, jenkins

我们在 git scm 中有一个标准的 html 网站。

如何使用 jenkins 将其打包成 zip 以便我们轻松部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:25:36.510

创建一个调用[git archive](http://www.kernel.org/pub/software/scm/git/docs/git-archive.html)命令的 Jenkins 作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:42:43.153

有 1,000,000 种方法可以给猫（或类似的东西）剥皮，对吧？

当我从 git 中提取 jenkins 时，我让它完全按照它们在远程服务器上的显示方式构建工作区。这允许正在部署和测试构建的人查看工作空间，而无需 ssh 进入我的服务器！给他们詹金斯访问权限已经够可怕的了！:) 它还允许我看到 jenkins 上出现的扩展工作区（很多时候无需 ssh 进入 jenkins 框），并减少故障排除时间。

一旦您的工作空间在 jenkins 上构建（多次用于构建器作业），工作空间要么被归档以供下游作业使用，要么直接部署（用于简单站点）。

部署使用标准 rsync -a --delete

这样，文件就可以到达它们要去的地方，并且在远程服务器上有 jenkins 工作区的镜像。

你真的必须评估什么最适合你的部署......希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:48:14.350

您可以使用批处理或 shell 脚本构建步骤（取决于您的环境），它会调用一些 zip 应用程序来压缩您的文件。

# java - 立即停止线程

> ID：11911118
> 
> 赞同：6
> 
> 时间：2012-08-11T01:24:55.060
> 
> 标签：java, multithreading

我想立即停止正在运行的线程。这是我的代码：

甲类：

```
public class A() {
    public void methodA() {
        For (int n=0;n<100;n++) {
        //Do something recursive
        }
        //Another for-loop here

        //A resursive method here

        //Another for-loop here

        finishingMethod();        
    }    
} 
```

B类：

```
public class B() {
    public void runEverything() {
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                try {
                    Thread.sleep(1000);
                    A a = new A();
                    a.methodA();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };
       Thread thread = new Thread(runnable);
       thread.start();
    } 
```

我的问题是，即使在线程完成之前，我也需要能够停止 B 类中的线程。我已经尝试过 interrupt() 方法，但这并没有停止我的线程。我也听说过使用共享变量作为停止线程的信号，但我认为在我的进程中使用长递归和 for 循环，共享变量将无效。

任何的想法 ？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T01:36:31.683

`Thread.interrupt`不会停止你的线程（除非它处于睡眠状态，在这种情况下`InterruptedException`将被抛出）。中断基本上会向线程发送一条消息，指示它已被中断，但不会导致线程立即停止。

当您有长循环操作时，使用标志来检查线程是否已被取消是一种标准方法。您`methodA`可以修改以添加该标志，例如：

```
// this is a new instance variable in `A`
private volatile boolean cancelled = false;

// this is part of your methodA
for (int n=0;n<100;n++) {
  if ( cancelled ) {
    return; // or handle this however you want
  }    
}

// each of your other loops should work the same way 
```

然后可以添加一个取消方法来设置该标志

```
public void cancel() {
  cancelled = true;   
} 
```

然后，如果有人调用`runEverything`on `B`，`B`则可以调用`cancel`on `A`（您将不得不提取`A`变量，以便`B` 即使在`runEverything`调用之后也要引用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T03:15:51.387

我认为你应该坚持使用`Thread.interrupt()`. 但是你需要做的是改变`methodA`代码来做这样的事情：

```
public void methodA() throws InterruptedException {
    for (int n=0; n < 100; n++) {
        if (Thread.interrupted) {
             throw new InterruptedException();
        }
        //Do something recursive
    }
    // and so on.        
} 
```

这等效于声明和使用您自己的“终止开关”变量，除了：

*   同步API很多，有些I/O API关注`interrupted`状态，
*   一个乖巧的 3rd 方库会关注`interrupted`状态。

现在确实有很多代码*处理不当* `InterruptedException`；例如通过挤压它。（处理 an 的正确方法`InterruptedException`是允许它传播，或者调用`Thread.interrupt()`以再次设置标志。）但是，另一方面是相同的代码不会知道您的终止开关。所以无论哪种方式你都有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T01:35:59.887

作为循环或递归的一部分，您可以检查运行标志的状态。如果有一个终止信号（即运行标志设置为假），只需返回（在你需要做的任何清理之后）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T04:07:43.513

还有一些其他可能的方法：

1) 不要停止它 - 用 Interrupted 标志发出信号停止，将其优先级设置为尽可能低，并“孤立”线程和它正在处理的任何数据对象。如果您需要再次执行此线程执行的操作，请进行另一个操作。

2) 清空、损坏、重命名、关闭或以其他方式破坏正在处理的数据，以强制线程进行段错误/AV 或以其他方式除外。线程可以捕获抛出并检查中断标志。

没有保证，如所见即卖...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-27T05:00:43.767

从主线程 letvsay someTask() 被调用并且 t1.interrput 被调用..

```
t1.interrupt();

    }

    private static Runnable someTask(){
        return ()->{

            while(running){
                try {
                    if(Thread.interrupted()){
                        throw new InterruptedException(  );
                    }
               // System.out.println(i + " the current thread is "+Thread.currentThread().getName());

                  //  Thread.sleep( 2000 );
                } catch (Exception e) {

                    System.out.println(" the thread is interrputed "+Thread.currentThread().getName());
                    e.printStackTrace();
                    break;
                }
            } 
```

o/P：

```
java.lang.InterruptedException
    at com.barcap.test.Threading.interrupt.ThreadT2Interrupt.lambda$someTask$0(ThreadT2Interrupt.java:32)
    at java.lang.Thread.run(Thread.java:748)
 the thread is interrputed Thread-0 
```

仅`t1.interuuption`是不够的。这需要检查子线程中 Thread.interrupted() 的状态。

# c++ - 通过 3 int 查找值的有效方法

> ID：11911125
> 
> 赞同：2
> 
> 时间：2012-08-11T01:27:07.613
> 
> 标签：c++, c, dictionary, map, lookup

我有一些需要有效存储和查找的数据。最好使用C。数据文件的每一行格式如下：

```
key1 key2 key3 data 
```

其中`key1`, `key2`,`key3`是整数并且`data`是 的数组`float`。

我正在考虑将 key1,2,3 转换为字符串，然后使用 C++`std::map`将字符串映射到浮点指针：

```
std::map<string, float*> 
```

有更好的方法吗？

注意：整数 key1,2,3 的范围为 0-4000，但人口稀少。换句话说，如果您遍历 key1 中的所有值，您会发现在 0-4000 范围内有 < 100 个唯一 int。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:41:48.413

您可以使用[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)将三个值合二为一：

```
std::map<std::tuple<int, int, int>, float *> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T01:37:40.190

如果每个键的数据限制为 0 到 4000，则不必使用字符串

首先生成组合密钥，如下所示：

```
unsigned long ulCombinedKey = key1 + key2<<12 + key3 <<24; 
```

之后，您可以使用您在问题中已经说明的地图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T01:35:39.827

分层地图会做到这一点：

```
map<int, map<int , map<int, list<float> > > > records; 
```

并且访问时间会很好（对数）。如果范围非常宽，这种方式将是有效的。否则，对于 4000，先前答案中给出的建议班次更快、更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T03:56:05.263

散列提供了对数据的非常快速的访问，因此您可能希望使用散列从三个整数中的每一个中查找值。这种方法可以在 c 或 c++ 中使用。

对于每一行数据： 1\. 为浮点数组分配空间 2\. 将指向浮点数组的指针存储在指针数组中 3\. 将指针数组的索引存储在基于 int1 的哈希中 4\. 存储基于 int2 的散列中指针数组的索引 5\. 将指针数组的索引存储在基于 int3 的散列中

这样，给定 int1、int2 或 int3，可以查找指针数组索引，检索指针，然后跟随指针指向浮点数组。这种方法使用一些内存，但不会太多，因为问题是 int1、int2 和 int3 中的每一个都有 < 100 个唯一值。

# java - 将任何字符串转换为 UTF-8 格式

> ID：11911127
> 
> 赞同：1
> 
> 时间：2012-08-11T01:27:34.147
> 
> 标签：java, string, utf-8

我在字符串下面有这个，老实说我不知道​​它是哪种格式？

```
Under%20\302\243100%2E00 
```

我需要将上面的字符串转换为上面的字符串，`UTF-8 format`输出应该如下所示。

```
Under%20Â£100%2E00 
```

那么基本上如何在 Java 中将任何字符串转换为 UTF-8 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:53:13.187

您在该字符序列（不是 Java 字符串文字）中拥有的是两种编码的混合：八进制编码和 url 编码。八进制编码看起来像 \xxx，其中 xxx 是八进制的字符代码。 [Url 编码](http://www.w3schools.com/tags/ref_urlencode.asp)看起来像 %XX，其中 XX 是十六进制的字符代码。 [八进制编码](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.6)实际上是 Java 规范的一部分。现在，将八进制转换为 Java 字符串并非易事。没有内置的方法。但是，请查看此线程以获取有关如何执行此操作的想法：[如何在 Java 中取消转义 Java 字符串文字？](https://stackoverflow.com/questions/3537706/howto-unescape-a-java-string-literal-in-java).

# php - 如何将 preg_match_all 变量分配给变量

> ID：11911134
> 
> 赞同：1
> 
> 时间：2012-08-11T01:29:26.187
> 
> 标签：php, variables, strip-tags

请原谅我，因为我是一个新手程序员。如何将结果 $matches (preg_match) 值（去掉第一个字符）分配给 php 中的另一个变量 ($funded)？您可以在下面看到我的内容：

```
<?php
$content = file_get_contents("https://join.app.net");

//echo $content;

preg_match_all ("/<div class=\"stat-number\">([^`]*?)<\/div>/", $content, $matches);
//testing the array $matches

//echo sprintf('<pre>%s</pre>', print_r($matches, true));

$funded = $matches[0][1];

echo substr($funded, 1);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:43:07.780

我不是 100% 确定，但您似乎正试图获得资金目前的金额？

并且字符是您要删除的美元符号？

如果是这种情况，为什么不将美元符号添加到组外的正则表达式中，这样它就不会被捕获。

```
/<div class=\"stat-number\">\$([^`]*?)<\/div>/ 
```

因为 $ 表示正则表达式中的行尾，所以您必须首先用斜杠对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:15:18.063

[不要使用 RegEx 解析 HTML](https://stackoverflow.com/a/1732454/1421049)。

最好的方法是使用[PHP DOM](http://php.net/manual/en/book.dom.php)：

```
<?php
$handle = curl_init('https://join.app.net');
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
$raw = curl_exec($handle);
curl_close($handle);
$doc = new DOMDocument();
$doc->loadHTML($raw);
$elems = $doc->getElementsByTagName('div');
foreach($elems as $item) {
    if($item->getAttribute('class') == 'stat-number')
        if(strpos($item->textContent, '$') !== false) $funded = $item->textContent;
}
// Remove $ sign and ,
$funded = preg_replace('/[^0-9]/', '', $funded);
echo $funded;
?> 
```

这`380950`在发布时返回。

# java - 如何在java中从同一个地方创建多个对象

> ID：11911136
> 
> 赞同：1
> 
> 时间：2012-08-11T01:29:37.700
> 
> 标签：java, swing, oop, jpanel

我正在尝试制作一个塔防游戏，但在制作时遇到了麻烦，因此当我单击底部的一个塔按钮并拖动到游戏区域时，它会创建一个新对象塔。我曾尝试使用数组列表，但每次我拖动以创建一个新塔时，前一个塔会擦除并且新塔保持绘制在屏幕上。

有几个课程，所以我只会发布我认为相关的课程。如果你需要其他的我可以放。提前抱歉我的帖子太长了。

这是处理事件的类 package addison；

```
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;

import javax.swing.JPanel;
import javax.swing.Timer;

@SuppressWarnings("serial")
public class Controls extends JPanel implements MouseListener, MouseMotionListener,         ActionListener {

    Timer timer;

public static int x; //mouse's x pos
public static int y; //mouse's y pos
public static int iteration = 0;

public static String button = ""; //identifies pressed button

public static boolean pressed = false; //true if a button was pressed and not a random space
public static boolean created = false;

public static ArrayList<Tower> tower = new ArrayList<Tower>(); //arraylist of tower objects

public Controls() {

    timer = new Timer(5, this); //creates a 5ms timer
    timer.start(); //starts timer
    addMouseListener(this);
    addMouseMotionListener(this);
    setFocusable(true);
}

public void paintComponent(Graphics g) {

    super.paintComponent(g);

    Map.paint(g); //draws map
    Hud.paint(g); //draws HUD
    TextDisplay.paint(g); //displays text
}

public void actionPerformed(ActionEvent e) {

    repaint(); //redraws graphics every 5ms
}

@Override
public void mouseClicked(MouseEvent e) {

}

@Override
public void mouseEntered(MouseEvent e) {

}

@Override
public void mouseExited(MouseEvent e) {

}

@Override
public void mousePressed(MouseEvent e) {

    if (Hud.getButton()) {

        pressed = true;
    } else {

        pressed = false;
    }

    System.out.println(pressed);
}

@Override
public void mouseReleased(MouseEvent e) {

    x = e.getX(); //gets mouse's x pos
    y = e.getY(); //gets mouse's y pos

    if (pressed) { // if the button pressed was gun man

        tower.add(iteration, new Tower(TextDisplay.description, x, y, 100, 100, 25)); //add a new tower object to the end of the arraylist

        System.out.println(tower.get(0).x);

        created = true;
        pressed = false;
    }

    iteration++;
}

@Override
public void mouseDragged(MouseEvent e) {

}

@Override
public void mouseMoved(MouseEvent e) {

    x = e.getX(); //get mouse's x pos
    y = e.getY(); //get mouse;s y pos

    if (Hud.getButton()) {

        TextDisplay.hovering = true;
    } else {

        TextDisplay.hovering = false;
    }
}
}

package addison;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle; 
```

这是绘制所有内容的类 public class Map {

```
public static Rectangle mouse; //location of cursor

public Map() {

}

public static void paint(Graphics g) {

    g.setColor(new Color(255, 0, 0)); //makes mouse hit box transparent
    mouse = new Rectangle(Controls.x, Controls.y, 5, 5); //create mouse hit box
    g.fillRect(mouse.x, mouse.y, mouse.width, mouse.height); //draw mouse hit box

    g.drawRect(0, 0, 800, 450); //play area

    g.drawRect(0, 0, 800, 500); //options area

    if (Controls.created) {

        g.fillRect(Controls.tower.get(Controls.iteration).x, Controls.tower.get(0).y, 50, 50);
    }
}
} 
```

这是按钮所在的类：package addison；

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle;

public class Hud {

public static Rectangle gunman;
public static Rectangle laserTower;
public static Rectangle rocketLauncher;
public static Rectangle emBomb;
public static Rectangle soundGun;

public Hud() {

}

public static void paint(Graphics g) {

    gunman = new Rectangle(0, 450, 50, 50); //create gun man button
    g.fillRect(gunman.x, gunman.y, gunman.width, gunman.height); //draw gun man button

    g.setColor(Color.BLUE);
    laserTower = new Rectangle(50, 450, 50, 50); //create laser tower button
    g.fillRect(laserTower.x, laserTower.y, laserTower.width, laserTower.height); //draw laser tower button

    g.setColor(Color.CYAN);
    rocketLauncher = new Rectangle(100, 450, 50, 50); //create rocket launcher tower
    g.fillRect(rocketLauncher.x, rocketLauncher.y, rocketLauncher.width, rocketLauncher.height); //draw rocket launcher button

    g.setColor(Color.DARK_GRAY);
    emBomb = new Rectangle(150, 450, 50, 50); //creates em bomb button
    g.fillRect(emBomb.x, emBomb.y, emBomb.width, emBomb.height); //draw em bomb button

    g.setColor(Color.GREEN);
    soundGun = new Rectangle(200, 450, 50, 50); //create sound gun button
    g.fillRect(soundGun.x, soundGun.y, soundGun.width, soundGun.height); //draw sound gun button
}

public static boolean getButton() {

    if(Map.mouse.intersects(Hud.gunman)) {

        TextDisplay.description = "Gunman";
        return true;
    } else if (Map.mouse.intersects(Hud.laserTower)) {

        TextDisplay.description = "Laser Tower";
        return true;
    } else if (Map.mouse.intersects(Hud.rocketLauncher)) {

        TextDisplay.description = "Rocket Launcher";
        return true;
    } else if (Map.mouse.intersects(Hud.emBomb)) {

        TextDisplay.description = "E.M. Bomb";
        return true;
    } else if (Map.mouse.intersects(Hud.soundGun)) {

        TextDisplay.description = "Sound Gun";
        return true;
    } else {

        TextDisplay.description = "";
        return false;
    }
}
} 
```

这是制作 Tower 对象的类：package addison；

```
public class Tower {

public static String type = ""; //type of tower e.g. gunman or laser tower
public static int x = 0;
public static int y = 0;
public static int range = 0; //tower range
public static int speed = 0; //tower speed
public static int sRange = 0; //tower's shrapnel range

public Tower(String a, int b, int c, int d, int e, int f) {

    type = a;
    x = b;
    y = c;
    range = d;
    speed = e;
    sRange = f;
}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:06:51.803

因为您只在以下行的最后一次迭代中绘制了塔：

```
g.fillRect(Controls.tower.get(Controls.iteration).x, Controls.tower.get(0).y, 50, 50); 
```

您需要在绘图功能中绘制所有塔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:11:13.530

似乎您正在使用`Control.iteration`作为您的塔列表的键。但是，每次`mouseReleased`调用（无论是否创建塔），您都在递增`iteration`. 这意味着`Controls.iteration`您的绘图处理程序中的键永远不会引用新创建的塔。您也在使用`Controls.tower.get(0).y`- 为什么这与 x 坐标不同？

我希望我已经正确理解了这一点。如果您只是在绘制新创建的塔，为什么不在 Controls 中保留对它的引用？如果要全部绘制它们，则应从 0 循环到`iteration - 1`并`iteration++`在`if (pressed)`块内移动。

# mysql - 日期mysql函数错误

> ID：11911137
> 
> 赞同：1
> 
> 时间：2012-08-11T01:29:41.477
> 
> 标签：mysql, function

我尝试将这些mysql函数用于波斯日期我得到了这个错误但我无法解决它

```
SQL query:

CREATE FUNCTION `persian_day` (
indate date
) RETURNS int( 11 ) BEGIN declare j int;

MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

我使用 mysqlnd 5.0.8-dev 和 phpmyadmin（xampp 包）

这是我的功能

```
CREATE FUNCTION `persian_mod`(a double,b double) RETURNS int(11)
return (a - b * floor(a / b))

CREATE FUNCTION `persian_div`(a double,b double) RETURNS int(11)
return (floor(a / b))

CREATE FUNCTION `persian_pj`(y int,m int,d int) RETURNS int(11)
return ( 227260 +
        1029983 * persian_div((y - 474), 2820) + 
        365 * ( (persian_mod((y - 474), 2820) + 474) - 1) + 
        persian_div(682 * (persian_mod((y - 474), 2820) + 474) - 110, 2816) + 
        if(m > 6, 30 * m + 6, 31 * m)  
        + d )

CREATE FUNCTION `persian_day`(indate date) RETURNS int(11)
begin
declare j int;
declare a int;
declare b int ;
declare c int;
declare d int;
declare yearr int;
declare f double;
declare monthh int;
    set j=TO_DAYS(indate) ;
        set a = j - persian_pj(475, 0, 1) ;
        set b = persian_div(a, 1029983) ;
        set c = persian_mod(a, 1029983) ;
        set d = if(c <> 1029982, persian_div(2816 * c + 1031337, 1028522), 2820) ;
    set yearr = 474 + 2820 * b + d;
        set f = (1 + j) - persian_pj(yearr, 0, 1);
        set monthh= if(f > 186, ceil((f - 6) / 30) - 1, ceil(f / 31) - 1);

        return (j - (persian_pj(yearr, monthh, 1) - 1));
end 
```

为什么会发生此错误？以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:59:54.130

创建函数时的基本语法是你应该有一个 return 语句。

```
CREATE FUNCTION fnctionName (paramList)
RETURNS datatype
BEGIN
   RETURN valueToReturn;
END 
```

但是如果你在你的函数中有特殊的计算（*当然它是多行的*），你需要先改变分隔符：

```
DELIMITER $$
CREATE FUNCTION fnctionName (paramList)
RETURNS datatype
BEGIN
   DECLARE ....;

   ..... other codes ;

   RETURN valueToReturn;
END $$
DELIMITER ; 
```

回到你的情况，

```
CREATE FUNCTION `persian_day` (indate date) RETURNS int( 11 ) 
BEGIN 
     declare j int; 
```

您没有价值，也没有使用关键字`RETURN`关闭功能。`END`就像您在创建的其他函数上所做的一样。

**[创建函数示例](http://www.roseindia.net/mysql/mysql5/stored-procedures-and-functions.shtml)**

# google-chrome - 为什么网络浏览器不添加lua vm？

> ID：11911138
> 
> 赞同：3
> 
> 时间：2012-08-11T01:30:22.543
> 
> 标签：google-chrome, internet-explorer, firefox, lua, safari

Javascript很好，但是为了更好的性能，为什么网络浏览器（ie/chrome，firefox，safari）不添加lua vm？还是让 lua vm 成为网络浏览器标准的一部分？

欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:34:43.977

因为当今用于 Javascript 的 JIT 编译器与用于 Lua 的 JIT 引擎一样快，甚至更快。

网络在 1990 年代中期尝试了不同的客户端脚本语言（当时我们有 LiveScript（早期的 JavaScript）、VBScript（谢谢你，微软）以及 Tcl。网络决定它不喜欢那样，我们就解决了在单一语言（JavaScript，现在的 EcmaScript）上。

Lua 没有提供任何真正的优势并且引入了巨大的工作量（例如，需要实现 DOM API，并且 Lua 与 EcmaScript 具有不同的语义（在类型和函数如何工作等方面），因此大多数 Web 开发人员需要重新学习他们的交易。

只是没有商业案例。

# javascript - 如何编写 JQuery 函数以在 Django 模板的特殊位置显示文本

> ID：11911140
> 
> 赞同：2
> 
> 时间：2012-08-11T01:30:40.110
> 
> 标签：javascript, jquery, html, django

我正在尝试在 Django 中创建我的第一个 ajax 函数。我想使用 JQuery 更改我的代码，这个想法很简单：用户输入一个主题名称，该名称显示在表单下方的主题列表中，

问题是我真的不知道在 JQuery 函数中输入什么。

```
JQuery:
function create_subject() {
    $("input").focus(function(){
        var subject = $(this).val();
        $(".btn-create").click(function(){

            /* What I need to write in here */

        });
    });
} 
```

在 HTML 中，“主题”指的是数据库。

```
 HTML 
    <div id="subjects-list">
                    {% if user.username %}
                        <ul>
                            {% if subjects %}
                                <form method="post" action=".">{% csrf_token %}
                                {% for subject in subjects %}
   -------- TYPED TEXT SHOULD BE HERE -------->         <li><a href="/user/{{ user.username }}/subject/{{ subject.name }}/">{{ subject.name }}</a></li>
                                {% endfor %}
                                </form>
                            {% else %}
                                <p>No Subjects for this user</p>
                            {% endif %}
                        </ul>
                    {% else %}
                            You are in else
                    {% endif %}
                </div> 
```

这就是 HTML 在“查看页面源代码”中的外观

```
 <div id="create-subject">
        <form method="post" action="."> <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='cfbd1893742c3ab9936bacaae9653051' /></div>
            <p><label for="id_name">Subject Name:</label> <input id="id_name" type="text" name="name" size="9" /></p>
            <input type="button" name="subject-create-b" value="Create Subject" class="btn-create"/>
        </form>
    </div>

    <div id="subjects-list">

            <ul>

                    <form method="post" action="."><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='cfbd1893742c3ab9936bacaae9653051' /></div>

                        <li><a href="/user/r/subject/Math 140/">Math 140</a><span id="subject-link"></span></li>

                    </form>

            </ul>

    </div>
</div> 
```

这就是我的形式

```
forms.py
class SubjectCreationForm(forms.Form):
    name = forms.CharField(label="Subject Name", widget=forms.TextInput(attrs={'size':9}))

    class Meta:
        exclude = ('created_by', 'created_time', 'num_of_followers', 'vote')
    def clean_name(self):
        name = self.cleaned_data['name']
        if len(name)>1:
            return name
        else:
            raise forms.ValidationError("Subject name should be longer") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:47:58.483

为了做（我认为）您想做的事情，即使用 Django 作为后端的一些基本 AJAX，您需要以下内容：

1.  返回要加载的数据的视图
    *   有很多方法可以表示数据，但为了简单起见，我将使用 HTML。
2.  加载该视图的 Javascript（如果您愿意，可以使用 JQuery）

您的代码在第一部分可能如下所示：

**网址.py：**

```
...

(r'^get-subjects/$', 'yourapp.views.get_subjects'),

... 
```

**视图.py：**

```
...

def get_subjects(request):
    subjects = # code to fetch your subjects.
    return render_to_response('subjects_template.html', {'subjects': subjects})

... 
```

**主题模板.html：**

```
{% for subject in subjects %}
    <li>{{ subject.name }}</li>
{% endfor %} 
```

对于第二部分，它可能如下所示：

**main_template.html：**

```
...

<ul id="subjects-list"></ul>

<script>
function loadSubjects() {
    $.ajax({
        url: "/get-subjects",
        success: function (data) {
            $("#subjects-list").html(data);
        }
    });
}
</script>

... 
```

[1] [render_to_response()](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response)

[2] [jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

这将使您最容易到达那里。当你想重新加载列表时，你调用这个`loadSubjects()`函数。

至于创建主题，那是另一回事。您需要研究的是如何在不离开页面的情况下提交 HTML 表单。有很多工具和库可以用一个不错的 api 来做这些事情。如果你想坚持使用 JQuery，你可以考虑[这个插件](http://www.malsup.com/jquery/form/)以获得更好的 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:58:37.957

```
function create_subject() {
    $("input").focus(function(){
        var subject = $(this).val();
        $(".btn-create").click(function(){    
            $('#subjects-list').append(subject);    
        });
    });
} 
```

也就是说，您可能不想在每次输入焦点时都分配点击处理程序。我会把它移出焦点处理程序。

# c# - 将配置文件加载到 Windows 窗体中

> ID：11911151
> 
> 赞同：0
> 
> 时间：2012-08-11T01:32:59.100
> 
> 标签：c#

我正在尝试使用 C# 构建一个工具来修改我们软件的配置文件。配置文件采用以下格式：

SERVER_NAME TestServer
SERVER_IP 127.0.0.1
SERVICE_NUMBER 4
SERVICE_ID 1 2 3 4

等等。每行都以标识符开头（例如：SERVER_NAME），然后是值。我需要该工具将每个标识符的值加载到单独的文本框中。当用户点击保存时，需要将更新后的信息写入文件。

我完全不知道应该如何将数据加载到文本框中，所以如果你能提供一些帮助，我将不胜感激。

写它，我假设最简单的方法，因为所有数据都将被加载，是擦除以前的数据，并将新数据写入文件。这我应该可以毫无问题地处理。如果有更好的方法可以做到这一点，我绝对愿意尝试。

对于如何开始加载数据，我将不胜感激。

```
private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        openFD.ShowDialog();
        openFD.Title = "Open a Config File...";
        openFD.InitialDirectory = "C:";
        openFD.FileName = "";
        openFD.Filter = "CONFIG|*.cfg";

        string selected_file = "";
        selected_file = openFD.FileName;

        using (StreamReader sr = new StreamReader(selected_file))
        {
            string currLine;
            while ((currLine = sr.ReadLine()) != null)
            {

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:42:17.207

要读取文件的每一行，您可以执行以下操作：

```
// StreamReader is in System.IO
using(StreamReader sr = new StreamReader("config file path here"))
{
    string currLine;
    while((currLine = sr.ReadLine()) != null)
    {
        // currLine will have the current line value as a string
        // You can then manipulate it any way you like
        // Or store it in an array or List<>
    }
} 
```

如果您在将项目添加到文本框中需要帮助，请询问。

希望这可以帮助！

# c++ - 尽量避免重复调用函数

> ID：11911152
> 
> 赞同：1
> 
> 时间：2012-08-11T01:33:17.860
> 
> 标签：c++, member-function-pointers, boost-preprocessor

我有一个非常简单的类定义如下：

```
#include "../bshttp/controllers.h"
#include <iostream>
#include <string>

class DerivedController : public BS_Controllers
{
  public:
    DerivedController():BS_Controllers(this)
    {
        m_urlRules["print"] = REG_NAME &DerivedController::print;
        //regController(REG_NAME &DerivedController::print,"print");
        regController(REG_NAME &DerivedController::printView,"printView");
    }
    void * print()
    {
        return NULL;
    }
    void * printView()
    {
        cout<<"Print view!"<<endl;
        return NULL;
    }
}; 
```

在哪里

```
 m_urlRules["print"] = REG_NAME &DerivedController::print; 
```

或者

```
 regController(REG_NAME &DerivedController::printView,"printView"); 
```

必须为所有成员函数调用。它的作用是获取类的成员函数指针并映射到字符串，因此稍后可以用字符串标识函数。

一切都很好并且工作正常，但是当类结构变大时，程序员将不得不为每个成员函数重复调用这个函数。无论如何要使用预处理器，或任何预处理库，如 boost-wave，这样程序员就不必进行这些重复调用？

编辑：很抱歉造成混淆，我在这里显然没有很好地描述问题。我将字符串映射到成员函数指针；

m_urlRules 是一个 std::map，以字符串为键，成员函数指针为值 regController 基本上是 m_urlRules 的设置器函数，因此这两个语句有效地执行相同的操作，将字符串映射到成员函数。

REG_NAME 是一个宏，用于替换非常难看的类型转换。

我想要做的是，如果类具有以下结构，

```
class DerivedController : public BS_Controllers
{
  public:
    DerivedController():BS_Controllers(this);
    void * print();
    void * print2();
    void * print3();
    void * print4();
}; 
```

我不必在构造函数中执行以下操作：

```
 m_urlRules["print"] = REG_NAME &DerivedController::print;
 m_urlRules["print1"] = REG_NAME &DerivedController::print1;
 m_urlRules["print2"] = REG_NAME &DerivedController::print2;
 m_urlRules["print3"] = REG_NAME &DerivedController::print3;
 m_urlRules["print4"] = REG_NAME &DerivedController::print4; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:08:50.193

我相信您出于日志记录的原因想使用此功能，以查看问题出现在哪里。

我认为您正在寻找类似的东西：

```
urlRules     ("<function name>");
regController("<function name>"); 
```

代替

```
m_urlRules["<function name>"] = REG_NAME &DerivedController::print;
regController(REG_NAME &DerivedController::printView,"<function name>"); 
```

你可以像这样定义这样的宏：

```
#define      urlRules(x) { m_urlRules[(x)] = REG_NAME &DerivedController::print; }
#define regController(x) { regController(REG_NAME &DerivedController::printView,(x)); } 
```

注意：我没有测试过，它可能不起作用，但据我了解应该。

**编辑**：

啊，现在我明白了，您想要调用构造函数中的每个函数。实际上，构造函数是错误的地方，因为它会为您创建的每个对象调用，但您只需分配 this 指针*一次*。（例如在启动时）

看，一个类的函数在内存中只存在一次，与指针相连的就是yield数据，所以所有的成员变量。

抱歉，没有简单的方法可以按名称获取所有类成员然后遍历它们。至少不是我所知道的。

但是您应该记住，函数指针不会因任何给定对象而改变。做这项工作的外部功能会更智能。启动时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:56:56.990

我不确定我是否完全理解您的问题，但为什么不使用内置数据结构，例如 map，您可以在其中将其映射到一个键（您的字符串）。

[这里有一些例子](http://www.cplusplus.com/reference/stl/map/insert/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T09:52:11.627

我将首先致力于删除丑陋的类型转换（即使是宏形式）。这可以通过`m_urlRules`移出`BS_Controllers`和移入中间（或代理）模板类来完成。该模板用于将映射解析为正确的派生类型。（我不知道你是怎么定义`BS_Controllers`的，所以我编了一个。）

```
class BS_Controllers {
protected:
    virtual ~BS_Controllers () {}
public:
    virtual void * invokeRule (const std::string &) = 0;
};

template <typename D>
class BS_Proxy : public BS_Controllers {
    typedef std::map<std::string, void *(D::*)()> UrlRuleMap;

    static UrlRuleMap & urlRules () {
        static UrlRuleMap urlRules_;
        return urlRules_;
    }

    void * invokeRule (const std::string &s) {
        typename UrlRuleMap::iterator i = urlRules().find(s);
        if (i == urlRules().end()) return 0;
        return (dynamic_cast<D *>(this)->*(i->second))();
    }

protected:
    static void regController (void *(D::*m)(), const std::string &s) {
        urlRules()[s] = m;
    }
}; 
```

现在，`DerivedController`可以很容易地通过调用`regController`代理类的方法来初始化。

```
#define REG_RULE(D, x) BS_Proxy<D>::regController(&D::x, #x)

class DerivedController : public BS_Proxy<DerivedController> {
    struct Populate {
        Populate () {
            REG_RULE(DerivedController, print);
            REG_RULE(DerivedController, printView);
        }
    };
public:
    DerivedController() {
        static Populate populate_;
    }
    void * print() { return NULL; }
    void * printView() {
        std::cout<<"Print view!"<<std::endl;
        return NULL;
    }
}; 
```

您可以查看上述代码的[演示。](http://ideone.com/V4mDG)

如果您想使填充*半自动*，您仍然必须在*某处*定义方法列表。您可以在文件中列出它们。

```
// DerivedController rules
DERIVED_RULE_INC(print)
DERIVED_RULE_INC(printView)
//... 
```

然后更改您的`DerivedController`课程以使用此文件：

```
class DerivedController : public BS_Proxy<DerivedController> {
    struct Populate {
        Populate () {
            #define DERIVED_RULE_INC(x) REG_RULE(DerivedController, x);
            #include "derived_controller_rules.inc"
            #undef DERIVED_RULE_INC
        }
    };
public:
    DerivedController() {
        static Populate populate_;
    }
    #define DERIVED_RULE_INC(x) void * x ();
    #include "derived_controller_rules.inc"
    #undef DERIVED_RULE_INC
};

void * DerivedController::print() { return NULL; }

void * DerivedController::printView() {
    std::cout<<"Print view!"<<std::endl;
    return NULL;
} 
```

现在，如果您在文件中添加另一个规则，注册码和方法声明是自动的。但是需要实现方法的定义，否则会产生关于缺少方法定义的链接器错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:12:40.993

好吧，您正在尝试自己构建运行时类型信息 (RTTI)，因此没有预处理器宏。主要是因为预处理器宏扩展到一个地方，而你声明的地方和注册你的函数的地方是不同的。

Qt 和 qmake 做了类似的事情，它找到标记为信号/插槽的函数，并为 RTTI 构建一个 moc 对象。这大约是您可以使用 c++ 获得的最佳效果。其他语言，如 java 和 delphi，比 c++ 具有更多的 RTTI，并且可以在运行时查询函数。

# css - AP Div 推送图片

> ID：11911153
> 
> 赞同：-1
> 
> 时间：2012-08-11T01:33:18.517
> 
> 标签：css, html, margin

我在包含 iframe 的页面上放置了一个 AP Div。我使用了 position: relative 以便 AP Div 不会随着它后面的图像移动。一旦我添加了带有 CSS 属性 Position:Relative 的 AP Div，它就会准确地停留在我想要的位置，但是它将图像进一步向下推。我需要将主图像对齐到顶部。如果您查看其他页面，您会看到它们是如何在顶部对齐的。有解决方案吗？我不是 css 专家，所以我会非常感谢提供的任何帮助。谢谢！

我的链接是：

[http://www.mylittleovertures.com/continue.html](http://www.mylittleovertures.com/continue.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:00:49.903

基本问题是`div`和`iframe`是同一级别的块元素。将 iframe 定位设置为相对没有帮助。相反，您应该将图像和 iframe 包装到容器 DIV 中，将此 DIV 设置为`position:relative`，然后将 iframe 绝对定位在该 DIV 上。您甚至可以删除额外的 img 标签并将图像设置为容器 DIV 的背景。您还可以`<center>`通过将容器 DIV 设置`margin`为`0 auto`

这是一个例子：http: [//jsfiddle.net/99wCg/3/](http://jsfiddle.net/99wCg/3/)

# asp.net-mvc - 将对象传递给 ASP.net MVC 2 的另一个动作

> ID：11911157
> 
> 赞同：1
> 
> 时间：2012-08-11T01:34:28.037
> 
> 标签：asp.net-mvc

我有一个视图用于显示我的搜索项的结果。这是它的控制器：

```
[HttpPost]
public ActionResult EvaluatingReport(FormCollection frm)
{
 string empType = frm["empType"].ToString();
 int totalMonth = 3;
 int mon = DateTime.Now.Month;
 int yr = DateTime.Now.Year;
 string Curdate = mon + "/" + yr;
 DateTime date = new DateTime();
 var result = (from e in context.tblEmployees
 join p in context.tblEmployee_Position on e.PositionIDF equals p.PositionID
 select new EvaluateEmployee
  {
    ID = e.Code,
    IDCard = e.IDCard,
    Name = e.NameEng,
    DOB = e.DOB,
    Position = p.Position,
    Sex = e.Sex,
    StartDate = e.StartDate
}).ToList();
  result = result.Where(((s => mon - int.Parse(s.StartDate.Substring(3, 2).ToString()) == totalMonth && yr -int.Parse(s.StartDate.Substring(6, 4).ToString()) ==  totalYear))).ToList();
  ViewData["EmployeeType"] = result;
  return View();
} 
```

我通过循环在视图中显示了内容， `ViewData["EmployeeType"]`并且还包括了一个`Print`标签：

```
<script language="javascript" type="text/javascript">
  function printChart() {
    var URL = "EvaluatingReport";
    var W = window.open(URL);
    W.window.print(); 
  }
  function printPage(sURL) {
    var oHiddFrame = document.createElement("iframe");
    oHiddFrame.src = sURL;
    oHiddFrame.style.visibility = "hidden";
    oHiddFrame.style.position = "fixed";
    oHiddFrame.style.right = "0";
    oHiddFrame.style.bottom = "0";
    document.body.appendChild(oHiddFrame);
    oHiddFrame.contentWindow.onload = oHiddFrame.contentWindow.print;
    oHiddFrame.contentWindow.onafterprint = function () {          
    document.body.removeChild(oHiddFrame); };
  }   
  </script> 
  <span onclick="printPage('/Report/PrintEvaluatingReport');" style="cursor:pointer;text-decoration:none;color:#0000ff;"> 
     <img src="../../Content/images/Print.png" width="35px;" alt="print" style="position:relative;top:6px;"/> 
      &nbsp; Print Report
  </span> 
```

我使用函数`printPage('/Report/PrintEvaluatingReport')`来加载带有操作的打印对话框`PrintEvaluatingReport`。所以我想把我拥有的对象`EvaluatingReport`带到行动`PrintEvaluatingReport`中。

谁能告诉我我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:37:13.417

您可以为此使用会话变量！

```
private EmployeeType Result
{
    get { return (EmployeeType)this.Session["Result"]; }
    set
    {
        this.Session["Result"] = value;
    }
}

[HttpPost]
public ActionResult EvaluatingReport(FormCollection frm)
{
   .
   .
   .    
   // Store in Session
   this.Result = result;

   return View();
}

public ActionResult PrintEvaluatingReport()
{
   var employeeType = this.Result;
   .
   .
   .

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:38:03.260

你可以使用`TempData["EmployeeType"]`

```
[HttpPost]
public ActionResult EvaluatingReport(FormCollection frm)
{
    string empType = frm["empType"].ToString();
    int totalMonth = 3;
    int mon = DateTime.Now.Month;
    int yr = DateTime.Now.Year;
    string Curdate = mon + "/" + yr;
    DateTime date = new DateTime();
    var result = (from e in context.tblEmployees
    join p in context.tblEmployee_Position on e.PositionIDF equals p.PositionID
    select new EvaluateEmployee
    {
       ID = e.Code,
       IDCard = e.IDCard,
       Name = e.NameEng,
       DOB = e.DOB,
       Position = p.Position,
       Sex = e.Sex,
       StartDate = e.StartDate
   }).ToList();
   result = result.Where(((s => mon - int.Parse(s.StartDate.Substring(3, 2).ToString()) == totalMonth && yr -int.Parse(s.StartDate.Substring(6, 4).ToString()) ==  totalYear))).ToList();
   ViewData["EmployeeType"] = result;

   // Store in TempData to be read by PrintEvaluatingReport
   TempData["EmployeeType"] = result;

   return View();
}

public ActionResult PrintEvaluatingReport()
{
   var employeeType = TempData["EmployeeType"] as EmployeeType;
   // do stuff
   return View();
} 
```

# ruby - Rake 任务 - 在命名 Rake 任务时，我什么时候应该使用 bang 符号（'！'）？

> ID：11911158
> 
> 赞同：0
> 
> 时间：2012-08-11T01:34:40.950
> 
> 标签：ruby, naming-conventions, rake

当方法可能具有破坏性时，我应该应用 ruby​​ 约定并将 bang('!') 添加到 rake 任务名称还是我是否更符合 unix 类型标准，因此我个人的理解是不经常使用 bang。

*例如。哪个更好？*

```
$ rake update_products   # OR
$ rake update_products! 
```

* * *

### 背景

我有一种方法可以从外部 API 中提取产品数据，并使用每个产品新导入的数据更新系统中的记录。

该方法是这样调用的：

```
e = ExternalConnection.new
e.update_products! 
```

我正在创建一个 rake 任务，因此我可以在 cron 作业/heroku 调度程序中使用它。

```
# scheduler.rake
task :update_products => :environment do
    e = ExternalConnection.new
    e.update_products! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:46:26.577

这取决于你，如果你想遵循约定。该 `update_products` 方法是否会修改`e`对象？如果是这样，我们可以说这是一种“**危险的方法**”，因为`e`状态将会改变，也许其他人依赖于那个对象。

我个人会添加“！”。为什么？因为如果另一个（Ruby）程序员要玩代码，他会说“哦，等等，让我们小心这个”。

# mysql - MySQL 从表中删除图像

> ID：11911161
> 
> 赞同：1
> 
> 时间：2012-08-11T01:34:57.520
> 
> 标签：mysql

我有一个 MySQL 数据库，其中包含我网站的页面。表中的所有条目都是 html 格式。我想做的就是`<img ... >`从内容中删除（图像）。

我要删除的代码示例：

```
<img src="/assets/cache/pic/1052add1887d7066f2ed4546cdd1fff0.pageCache.jpg" alt="" title="" class="left">
<img src="res/images/upload/2011/accident-mortal.jpg" alt="" title="" class="middle">
<img src="res/images/upload/2011/evacuare-strada-orizontului.jpg" alt="" title="" class="middle"> 
```

是否有一个 SQL 命令可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:41:32.043

尝试使用 SQL 命令进行大量文本处理对我来说似乎是个坏主意。

但即使不是这样，尝试在 SQL 中解析 HTML 也肯定是一个糟糕的主意。（您可以使用正则表达式，但除非您使用解析器，否则您永远无法在 HTML 中查找元素时遇到所有极端情况。）

我想说，即使这是可能的，也肯定不是一个好方法。您将在调试问题时遇到可怕的问题，并且启动时性能可能会很差。

在将 HTML 放入数据库之前让您的应用程序`<img>`去除标签，或者在从数据库中检索它们之后将它们去除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:04:20.663

设法让它工作。我使用了这个 PHP 代码：

```
<?php

mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());
$result = mysql_query("SELECT * FROM wp_posts WHERE post_status='publish'") or die(mysql_error());  
while ($row = mysql_fetch_array($result)) {

    $content = $row['post_content'];
    $content = preg_replace("/<img[^>]+\>/i", "", $content); 
    $content = addslashes($content);
    $id = $row['ID'];
    mysql_query("UPDATE wp_posts SET post_content='".$content."' WHERE ID='".$id."'") or die(mysql_error());  

}

?> 
```

# php - imagepng 非常慢

> ID：11911162
> 
> 赞同：3
> 
> 时间：2012-08-11T01:35:09.910
> 
> 标签：php

我有一个 .php 文件，它应该加载图像以显示在 img 标记
（即`<img src="the_file.php?which=0"/>`）中。它看起来像这样：

```
<?php
    ob_clean();

    header("Content-type: image/png");

    include_once("util.php");

    //Do a simple calculation to get $name from (int)$_GET["which"];

    $im = imagecreatefrompng("protected_directory/".$name.".png");

    imagepng($im,NULL,0,NULL);

    imagedestroy($im);

    ob_end_flush();
?> 
```

它可以正常工作，但图像加载速度比直接加载要慢得多
（即`<img src="protected_directory/the_name.png"/>`，“the_name”的计算方式与 PHP 文件中的计算方式相同，但我不能这样做，因为 protected_directory 不是世界可读的） .

我的问题是，为什么这突然变得这么慢？这不是一个很大的图像，但也不是非常小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T01:48:59.513

如果您只是显示现有文件，请使用`readfile()`将其输出到浏览器。无需为此创建可编辑 GD 对象的所有开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:42:04.323

`imagepng` [众所周知，速度很慢](http://php.net/manual/en/function.imagepng.php#103787)，如果您需要使用 PHP 脚本输出图像，请使用如下代码：

```
$filename = md5(time() . mk_rand());
imagepng($im, $filename);
echo file_get_contents($filename); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T01:58:15.583

作为另一个答案，我发现您可以使用第三个参数来压缩图像（PNG 使用 zlib）。将其设置为 9 与其他解决方案一样有效。

# python - 如果我将 MongoDB 作为我的根工厂，是否还需要在 Configurator 中注册它？

> ID：11911164
> 
> 赞同：1
> 
> 时间：2012-08-11T01:35:43.577
> 
> 标签：python, mongodb, pyramid

我正在尝试使用我的 MongoDB 作为根工厂来设置 Pyramid 的授权/身份验证功能。我想知道是否包括这些行（配置是配置器）

```
db_url = urlparse(eval(settings['mongo_uri']))
conn = pymongo.Connection(host=db_url.hostname,
                          port=db_url.port)
config.registry.settings['db_conn'] = conn
config.add_subscriber(add_mongo_db, NewRequest) 
```

是多余的吗？如果我已经给 config 一个 mongo root 工厂，这有必要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:57:20.850

我不建议这样做。我写了一个金字塔插件来让事情变得更容易和更干净。

此处的文档：

[http://packages.python.org/pyramid_mongo/](http://packages.python.org/pyramid_mongo/)

以下是我目前正在写的一个项目。

在我的 ini 文件中（虽然它可能是用 python 设置编写的）

```
mongo.uri = mongodb://localhost/
mongo.db = wife 
```

在我的配置器中：

```
config.include('pyramid_mongo') 
```

在我的 root_factory 中：

```
from pyramid_mongo import get_db

...
...

def root_factory(request):
    db = get_db(request)
    return Root(db) 
```

`get_db`可以从任何地方调用，您必须将请求作为第一个参数传递。您可以传递其他参数来查询不同的数据库。

在这种情况下不需要订阅者。

顺便说一句，不要担心它是否写在文档中可能有风险，当前版本的包具有 100% 的覆盖率并通过所有测试。将来，这个包可能会集成一些工具，以简化与 mongodb 的遍历。

# php - 调整 Php-xml 代码以仅拉取三个元素，而不是全部

> ID：11911175
> 
> 赞同：0
> 
> 时间：2012-08-11T01:37:43.283
> 
> 标签：php, xml, parsing, xml-parsing

**更新代码**

```
try{
    function processLink( $link , $appendArr ){
    ## gets url from database as outlined above.
        $xmlUrl = $link;
        #Loads the url above into XML    
        $ConvertToXml = simplexml_load_file($xmlUrl);
        # -> Setup XML
        $appendArr[] = $ConvertToXml->channel->item;
    }
    #Connect to DB
    require_once '../../src/conn/dbc.php';
    $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb',$db_user,$db_pass,array(PDO::ATTR_PERSISTENT => true));
    $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=:OneSet and leagID = :TheLeagueID");
    $q->execute(array(':OneSet' => 1, ':TheLeagueID' => 14));    # SET LEAGUE HERE.
    $result = $q->fetchAll();
    $newsStory = array();
        $title = $newsStory->title;
        $link  = $newsStory->link;
    foreach ($result as $value ){
            if ( is_array($value) ){
                foreach ( $value as $secondValue ){
                    processLink($secondValue , &$newsStory);
                }

                continue;
        }

        processLink($value , $newsStory);

    }                  
    //print_r($newsStory);

        echo 'TITLE: '.$title;
        echo 'LINK'.$link;
} 
```

**如何修改我的代码以仅获取`[title]`and `[link]`？**- 这意味着它不输出任何东西::

它当前输出： ![图像1](../Images/d8fcd737ee800623661f6d236eacf706.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:47:33.877

答案在注释部分的代码块底部。

```
# Source of Article Info-->
#           $SrcTitle=$newsStory[$i]->title;
#           $SrcLink=$newsStory[$i]->link; 
```

`print_r($newsStory);`在底部使用将打印`$newsStory`数组内的所有内容。要仅打印标题和链接，请使用代码中提供的示例访问数组。您的输出似乎显示了该对象的第 4 个新闻报道。如果你想全部打印出来，最后需要一个循环。

```
for($i=0; $i < count($newsStory); $i++){
    $title = $newsStory[$i]->title;
    $link  = $newsStory[$i]->link;

    //use this next line if you just want to test and see output.
    echo "<p>Newstory $i: Title:$title  Link:$link </p>";

    //use this to provide to a user
    echo "<p><a href='$link'>$title</a></p>";
} 
```

# javascript - 减小窗口宽度时使div消失？

> ID：11911180
> 
> 赞同：2
> 
> 时间：2012-08-11T01:38:12.553
> 
> 标签：javascript, html, css

减小窗口宽度时如何使 div 消失，而将其完整空间留给其他元素？我的意思不是在溢出时逐个隐藏，而是整个元素。

我在以下 URL 上发现了这个出色的功能：http: [//flexslider.woothemes.com](http://flexslider.woothemes.com)

是否需要 javascript 或者可以使用 CSS 完成？我注意到该页面几乎是 HTML5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T01:41:19.937

你可以只用 CSS 做到这一点：

```
@media all and (max-width: 480px) {
  .mydiv { display: none; }
} 
```

# tomcat7 - 为什么Tomcat会跳过DefaultJarScanner.jarsToSkip中指定的扫描jar

> ID：11911182
> 
> 赞同：5
> 
> 时间：2012-08-11T01:38:15.663
> 
> 标签：tomcat7, bootstrapping, tld

在 catalina.properties 它说：

```
# 不应扫描配置信息的 JAR 文件列表
# 如网页片段、TLD 文件等。它必须是逗号分隔的列表
# JAR 文件名。
# 下面列出的 JAR 包括：
# - Tomcat 引导 JAR
# - Tomcat API JAR
# - Catalina JAR
# - 贾斯珀 JAR
# - Tomcat JAR
# - 常见的非 Tomcat JAR
# - Sun JDK JAR
# - Apple JDK JAR
tomcat.util.scan.DefaultJarScanner.jarsToSkip=\
bootstrap.jar,commons-daemon.jar,tomcat-juli.jar,\

```

谁能解释为什么？例如，你必须在你的库中包含 jstl.jar，但如果它被称为 jstl.jar，它会跳过它。我只是不明白首先跳过它的意义是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T15:06:14.347

评论说明了一切：“不应扫描配置信息的文件”即。如果您知道您的 jar 没有任何配置信息，请将它们包含在此处，以便 tomcat 不会查看它。

底线是这样的：它将减少 tomcat 完成启动所需的时间。

它在小型部署中似乎不是很有用，但请相信我：它*确实*在具有数百个 jar 文件的大型部署中产生了巨大的差异。

如果不包含 jars，或者没有要跳过的模式（例如 a*.jar - 排除以“a”开头的所有内容），那么所有内容都会被打开、读取以了解配置。

在我工作的公司中，我们使用的是 TC Server，它只是一个花哨的 Tomcat：没有跳过 jars 的模式，tc server 需要大约 20 分钟来扫描 jar 文件……然后再花 10 分钟来部署所有内容。

当我们添加模式以跳过几乎 99% 时，我们能够将服务器启动时间缩短到大约 12 分钟 - 不完美，但整个事情是巨大的，因此，这是我们接受的折衷方案。

# ide - 避免 Visual Studio 专注于调试 (2012 RC)

> ID：11911184
> 
> 赞同：2
> 
> 时间：2012-08-11T01:38:40.120
> 
> 标签：ide, visual-studio-2012

如何在调试开始时禁用专注于 Visual Studio 的功能？这有点痛苦，因为我单击调试，并在构建 Visual Studio 时最小化它，但是当它完成构建时，Visual Studio 会弹出（即使没有断点），这有点烦人。我正在使用 Visual Studio Ultimate 2012 RC（版本 11.0.50706.0）。

# java - 如何从所有节点的 Eclipse JDT Parser 解析的 java 源中获取行和/或列？

> ID：11911185
> 
> 赞同：0
> 
> 时间：2012-08-11T01:38:58.390
> 
> 标签：java, eclipse, parsing, abstract-syntax-tree, eclipse-jdt

我已经使用 AST 玩了很长一段时间，并试图从 eclipse 中获取与在此插件上解析的给定节点相关联的行和列信息。根据[此处](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/class-use/ASTVisitor.html)记录的api，我发现该方法`getStartPosition()`可以为我提供已解析文件字符的位置，但这不是我想要的。

我继续阅读[CompilationUnit 类 api 文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTVisitor.html)以找出方法`getLineNumber(int position)`，`getColumnNumber(int position)`并且根据我的理解可以做到这一点。`position`参数就是`getStartPosition()`方法返回的内容，通过做`node.getStartPosition()`.

现在，问题是在源文件上获取行和列的两种方法似乎不适用于所有节点。例如，[方法声明节点](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/MethodDeclaration.html)没有它们！

我怎样才能获得所有树的这些信息？我知道这不是不可能的，因为我能够使用其他语言的解析器，**每个**ast 节点都有与之关联的行和列。事实上，我相信[javaparser](http://code.google.com/p/javaparser/)是其中之一，因为该类包含硬编码的行和列的属性。看到 Eclipse JDT 对我来说似乎更加健壮并且在那里呆了很长一段时间，我会惊讶于无法获得这样的信息。

**编辑：**同样，问题是从仅出现在根目录上的编译单元的不同内容中获取行号：

```
<type 'org.eclipse.jdt.core.dom.CompilationUnit'>
1
<type 'org.eclipse.jdt.core.dom.TypeDeclaration'>
<type 'org.eclipse.jdt.core.dom.Javadoc'>
<type 'org.eclipse.jdt.core.dom.TagElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'>
<type 'org.eclipse.jdt.core.dom.TextElement'> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:23:35.240

为了后代，我将重新发布我在 jdt-core-dev 邮件列表上发布的答案。（我的回答与上面 Ryan 的建议差别不大）

嗨，卡洛斯，

您对 CompilationUnit.getLineNumber(int) 方法是正确的。您可以按如下方式使用它：

`int lineNumber = compilationUnit.getLineNumber(node.getStartPosition()) - 1;`

但是，我不明白你在哪里卡住。为什么需要为 MethodDeclaration 定义的 getLineNumber(..)？你只需要找到方法声明节点，然后使用下面的代码找到它对应的CompilationUnit，然后使用上面的代码行找到行号。我在这里错过了什么吗？

```
ASTParser parser = ASTParser.newParser(AST.JLS3); // or JLS_4 for java 7 and above

parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setSource(source); // give your java source here as char array
parser.setResolveBindings(true);

CompilationUnit compilationUnit = parser.createAST(null); 
```

干杯! 阿尤什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:29:29.850

我面前没有正在运行的程序，但是根据您上面链接到的文档和 Eclipse 的源代码，您似乎可以通过调用并将其转换`CompilationUnit`为. 或者，它出现在[javadoc和](http://help.eclipse.org/indigo/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html)[ibm](http://www.ibm.com/developerworks/opensource/library/os-ast/)的一个示例中，它几乎总是返回 a ，它代表您正在解析的源代码。`ASTNode``getRoot()``CompilationUnit``ASTParser` `ASTParser.createAST(IProgressMonitor)``CompilationUnit`

在你有了一个`CompilationUnit`named之后`root`，你应该就可以使用`root.getLineNumber(node.getStartPosition())`and`root.getColumnNumber(node.getStartPosition())`方法了。

```
final ASTParser p = ASTParser.newParser(AST.JLS3);
p.setSource(source);
final CompilationUnit root = (CompilationUnit) p.createAST(null);
// stuff happens
final ASTNode node = //get a node

final int line = root.getLineNumber(node.getStartPosition());
final int column = root.getColumnNumber(node.getStartPosition());
System.out.println("Node started at (" + line + ", " + column + ")"; 
```

# iphone - 在自定义类中使用 NSArray 不起作用

> ID：11911189
> 
> 赞同：0
> 
> 时间：2012-08-11T01:40:46.693
> 
> 标签：iphone, objective-c, ios

重新来。我对目标 C 相当陌生。我创建了以下类，但我不知道如何初始化数组。

任何人都可以提供有关如何初始化 NSArray 的任何指导吗？

StatusPost.m

```
#import "StatusPost.h"

@implementation StatusPost

@synthesize messageId, fromName, friendId, message, choice2, choice3, choice4, picture,     fbImage, commentCount, commentArray;

-(id)initWithMessageId:(NSString*) rMessageId 
       fromName:(NSString*) rFromName
         friendId:(NSString*) rFriendId
        message:(NSString*) rMessage 
           choice2:(NSString*) rChoice2
           choice3:(NSString*) rChoice3
           choice4:(NSString*) rChoice4
           picture:(NSString *) rPicture
           fbImage:(UIImage *)rfbImage
      commentCount:(NSString*) rCommentCount
      commentArray:(NSArray*) rCommentArray
{
if (self = [super init]) {
    commentArray = [NSArray new];
    self.messageId = rMessageId;
    self.fromName = rFromName;
    self.friendId = rFriendId;
    self.message = rMessage;
    self.choice2 = rChoice2;
    self.choice3 = rChoice3;
    self.choice4 = rChoice4;
    self.picture = rPicture;
    self.fbImage = rfbImage;
    self.commentCount = rCommentCount;
    self.commentArray = rCommentArray;

}
return self;
}

- (void)dealloc {
[messageId release];
[fromName release];
[friendId release];
[message release];
[picture release];
[fbImage release];
[commentCount release];
[commentArray release];
[super dealloc];
}

@end 
```

StatusPost.h：#import

```
@interface StatusPost : NSObject {
NSString* messageId;
NSString* fromName;
NSString* friendId;
NSString* message;
NSString* choice2;
NSString* choice3;
NSString* choice4;
NSString* picture;
UIImage* fbImage;
NSString* commentCount;
NSArray* commentArray;

}

@property (nonatomic, retain) NSString* messageId;
@property (nonatomic, retain) NSString* fromName;
@property (nonatomic, retain) NSString* friendId;
@property (nonatomic, retain) NSString* message;
@property (nonatomic, retain) NSString* choice2;
@property (nonatomic, retain) NSString* choice3;
@property (nonatomic, retain) NSString* choice4;
@property (nonatomic, retain) NSString* picture;
@property (nonatomic, retain) UIImage* fbImage;
@property (nonatomic, retain) NSString* commentCount;
@property (nonatomic, retain) NSArray* commentArray;

-(id)initWithMessageId:(NSString*) rMessageId 
       fromName:(NSString*) rFromName
         friendId:(NSString*) rFriendId
        message:(NSString*) rMessage
           choice2:(NSString*) rChoice2
           choice3:(NSString*) rChoice3
           choice4:(NSString*) rChoice4
           picture:(NSString*) rPicture
           fbImage:(UIImage*) rfbImage
      commentCount:(NSString*) rCommentCount
      commentArray:(NSArray*) rCommentArray;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:53:08.937

您很可能从未初始化数组，因此当您尝试添加对象时，您只是向 nil 发送消息。在自定义类的`init`方法中，添加以下行：

```
commentArray = [NSMutableArray new]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:27:05.943

`[NSArray new]`是 的简写`[[NSArray alloc] init]`，因此，从技术上讲，该语句“初始化”了 NSArray。

但是，您的代码看起来有点奇怪。您的 中有以下语句`init`：

```
commentArray = [NSArray new];
self.commentArray = rCommentArray; 
```

第一条语句将实例变量设置`commentArray`为新分配/初始化的 NSArray 的地址，而第二条语句将属性设置`commentArray`为参数值。但是，您已经（通过`@synthesize`）使实例变量`commentArray`成为 property 的“后备存储” `commentArray`，因此当您执行第二行时，第一行的效果被覆盖（并且您创建的 NSArray 被“泄露”）。

（但如果你真正的问题是如何用值“加载”一个 NSArray，你应该问这个问题——你会得到不同的答案。）

# regex - 将正则表达式作为参数传递给 shell 脚本

> ID：11911194
> 
> 赞同：1
> 
> 时间：2012-08-11T01:41:32.853
> 
> 标签：regex, bash, shell, parameters

如何将正则表达式作为参数传递给 shell 脚本？

我需要编写一个 shell 脚本，它将接受参数并将它们提供给 unix 命令。我想在那里使用正则表达式。这可能吗？

或者重新制定 - 如何编写相当于“cp”命令的脚本，只使用这个命令？

我正在尝试制作一个文件“mycp”

```
#!/bin/bash -fx
cp $2 $1 
```

并通过调用它

```
mycp myDir "*sh" 
```

并希望它与“cp *sh myDir”做同样的事情。但由此产生的 bash 解释是：

```
+ cp '*sh' myDir
cp: *sh: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:57:21.130

### 修改后的问题

> 我正在尝试制作一个文件“mycp”
> 
> ```
> #!/bin/bash -fx
> cp $2 $1 
> ```
> 
> 并通过调用它
> 
> ```
> mycp myDir "*sh" 
> ```

在这种情况下，你仍然需要`eval`，但你会写：

```
#!/bin/bash -x
eval cp "$2" "$1" 
```

您遇到了问题，因为您已经指定了`-f`选项。 `man bash`说（部分）：

> 分词后，除非`-f`已设置该选项，否则 bash 会扫描每个单词中的字符`*`、`?`和`[`.

`f`从脚本的“shebang”（第一）行中删除。

* * *

### 原始问题

鉴于您想`mycp "*sh*" aa`对参数进行 shell 扩展，您可能最终会`eval`在脚本中使用：

```
eval cp "$@" 
```

但是，使用`eval`是危险的；它可能会导致意想不到的副作用。使用`"$@"`很重要；它保留了参数和空格的数量。不幸的是，使用`eval`then 取消了这一点，但我们不能拥有一切——或者不容易。

* * *

很长一段时间（比如 1987 ^*到 1999 年），我用这个脚本作为封面`cp`：

```
:   "@(#)$Id: cp.sh,v 1.3 1997/06/02 21:45:00 johnl Exp $"
#
#   Alternative copy command

case $# in
0)  /bin/cp     ;;
1)  /bin/cp $1 .    ;;
2)  /bin/cp "$@"    ;;
*)  if [ -d `la "$@"` ]
    then    /bin/cp "$@"
    else    /bin/cp "$@" .
    fi;;
esac 
```

它使用一个非常简单的 C 程序`la`（用于“最后一个参数”）来获取最后一个参数并检查给定的最后一个参数是否是一个目录。超过 99% 的时间，如果我（偶然）输入 'cp /some/where/ *sh* ' 而不是 ' `cp /some/where/*sh* .`，第二个就是我的意思，并且脚本修复了问题。我已经有一段时间没有使用它了；它可能是在上个千年，但可能是在这之前的某个时候，我放弃了使用它。

^* *虽然版本字符串显示“1997”，但代码与 1987 版本相同。版本 1.1 和 1.2 在 SCCS 下，使用不同的 SCCS ID 字符串；转换为 RCS 使它们完全相同。版本 1.3 将`@(#)`SCCS`what`命令使用的标识符字符串恢复到 RCS 版本处理。所以，剧本很古老——真的是 1987 年。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:46:50.800

试试这个：`eval cp $1 $2`

[Bash 参考手册：eval](http://www.gnu.org/software/bash/manual/bashref.html#index-eval-112)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T03:24:58.040

如果您只想先指定目录，请查看`-t`GNU cp 的选项：

```
alias mycp='cp -t'
mycp mydir *.sh 
```

除此以外：

```
mycp() {
  local dir=$1
  shift
  cp "$@" "$dir"
}
mycp mydir *.sh 
```

无论哪种方式，让 shell 扩展通配符并避免使用`eval`

（注意，`*.sh`不是正则表达式，它是一个[外壳“模式”](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)，通常称为“glob 模式”）

# javascript - IE8 不会运行特定的 JS 函数，但会运行具有类似代码的另一个函数

> ID：11911198
> 
> 赞同：0
> 
> 时间：2012-08-11T01:42:16.620
> 
> 标签：javascript, jquery, youtube, swfobject, unobtrusive-javascript

我有两个函数可以使用 swfobject.js 和 jquery 在 youtube 视频中加载，以从 youtube rss 中获取一些 json 数据。

这两个函数都使用非常相似的代码来嵌入带有 swfobject.js 的视频。我加载了 IE8，当弹出对话框时说：

```
Line: 4
Char: 5 
Error: not implemented
Code: 0 
```

如果我点击“是”，所有视频都会加载。如果我点击“否”，则只有 3 个视频中的一个会加载。我只想知道为什么其中一个会加载，而其他的不会。这里有一些 IE8 不喜欢的突兀代码吗？

如果我点击是或否，则加载的代码在这里：

```
function getVideo(videoID, divName){//Gets yt video for yt category posts
    var videoURL = videoID;
    var divID = divName+'-video';
    var width = 392; //only change this number
    var height = Math.floor(width*9/16);

    var params = { allowScriptAccess: "always" };
    var atts = { 'class': 'hmt-ytvideo' };
    swfobject.embedSWF("http://www.youtube.com/v/"+videoURL+"?enablejsapi=1&playerapiid=ytplayer&version=3",
                       divID, width, height, "8", null, null, params, atts);
}

<script type="text/javascript">
    var youtubeID = '<?php echo $urlYoutube; //pass the php var to js var?>';
    var divID = '<?php echo $divName; //pass the php var to js var?>';
    addLoadEvent(getVideo(youtubeID, divID));//Onload function to output video
</script> 
```

当我点击是时加载并且在我点击否时不加载的代码在这里：

```
function getFirstSideVideo(){
    //First sidebar video, represented by the url 'start-index' value
    $j.getJSON(rssFeedURL, function(data) {
        $j.each(data.feed.entry, function(i, item) {
            var updated = item.updated;
            var urlLink = item['link'][4]['href'];
            var width = 315; //only change this number
            var height = width*9/16;

            //SWF object params
            var videoURL = urlLink.split('/uploads/')[1];
            var params = { allowScriptAccess: "always" };
            var atts = { 'class': 'hmt-ytvideo' };
            var divID = 'first-sidebar-video';

            //Output video with swf object
            swfobject.embedSWF("http://www.youtube.com/v/"+videoURL+"?enablejsapi=1&playerapiid=ytplayer&version=3",
                               divID, width, height, "8", null, null, params, atts);
        });
    });
}

<script type="text/javascript">//Onloads the function to output the video
    addLoadEvent(getFirstSideVideo);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:09:53.910

发生此错误是因为您没有将函数传递给 addLoadEvent 方法。

`addLoadEvent(getVideo(youtubeID, divID));`

然后执行此代码`getVideo(youtubeID, divID)`，因为该函数没有返回任何内容`undefined`并传递给该`addLoadEvent`函数。

恰好在 IE 8 中，当您尝试分配`undefined`给`window.onload`您时，您会遇到该错误。window.onload 由 addLoadEvent 函数在内部完成。

# security - Magento - 用户可以看到其他数据

> ID：11911204
> 
> 赞同：6
> 
> 时间：2012-08-11T01:44:56.570
> 
> 标签：security, validation, magento, cookies

我们有一个 Magento 商店，有时当用户登录时，它会使用其他人的用户信息进行身份验证。

当用户进入我的帐户时，他们可以看到另一个客户的订单详细信息。

我发现一个论坛说要在会话验证设置下激活验证 HTTP_USER_AGENT 和验证 REMOTE_ADDR 值，但我们仍然看到这个问题。

有人对可能导致此问题的原因有任何想法吗？

提前感谢你的帮助。

乔治

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T14:38:47.157

我从来没有真正花时间正确调试这个，但前段时间我们遇到了一个几乎相同的问题。最终它看起来像何时启用`System > Configuration > Web > Use SID on Frontend`并且您也`Magento Enterprise Full Page Cache`启用了它有时会保存`SID`在缓存的模板中。当其他用户单击具有不正确 SID 的链接时，他们就接管了该会话。

禁用 SID 选项后，我们再也没有遇到过问题。也许不是一个真正的答案，但对你来说可能是有价值的信息。

# frame-rate - iPhone 3GS 和 iPhone 4 上的 CADisplayLink 从 60 FPS 随机下降到 40 FPS

> ID：11911205
> 
> 赞同：2
> 
> 时间：2012-08-11T01:45:55.333
> 
> 标签：frame-rate, cadisplaylink

我正在使用 CADisplayLink 以 60 FPS 执行名为 gameLoop 的功能，起初应用程序运行良好。然后在随机时间（可能是 5 秒或 1 分钟），fps 下降到 40 FPS 左右。

经过几天的论坛搜索、调试、优化渲染、分析和分析我的应用程序，我决定从 gameLoop 函数中删除所有内容，除了几行计算自上次调用 gameLoop 以来的时间。我无法弄清楚为什么 CADisplayLink 以 60 FPS 调用 gameLoop 一段时间，然后在 gameLoop 几乎什么都不做时以 40 FPS 调用它。

我实现了一个暂停/取消暂停功能，它使显示链接无效并重新启动它。当我重新启动显示链接时，应用程序再次以 60 FPS 运行，直到它随机下降。

提前感谢任何可以让我了解为什么会发生这种情况的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:22:59.980

我决定尝试 OpenGL ES 2.0 和 GLKit API 看看是否能解决问题。在阅读了苹果文档和一些教程后，我移植了代码并使用 Xcode 分析器和 Performance Detective 对其进行了测试。GLKViewController 的 Update 和 drawInRect 函数以 60 FPS 的速度调用，并且一切运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T03:21:56.280

如果您使用的是 iOS 5，请确保将视图的 opaque 参数设置为 YES。我猜想将屏幕与其他 CoreAnimation 图层合成会导致速度变慢。我猜 GLKIT API 在它的设置中做到了这一点。

[http://www.cocos2d-iphone.org/forums/topic/app-often-but-not-always-runs-at-40-fps-at-startup-rather-than-60-fps/](http://www.cocos2d-iphone.org/forums/topic/app-often-but-not-always-runs-at-40-fps-at-startup-rather-than-60-fps/)

# html - 删除超链接下划线的基本 CSS 问题

> ID：11911207
> 
> 赞同：3
> 
> 时间：2012-08-11T01:46:10.363
> 
> 标签：html, css

忍受我的基本问题。

[http://jsbin.com/css-play-notfound/6](http://jsbin.com/css-play-notfound/6)

在我的图像和标题中的文本之间有一条蓝色的下划线令人讨厌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T01:56:13.553

你可以做两件事：

更改此代码：

```
<img src="logo.png" alt="REUNIFY" height="35" /> 
```

对此：

```
<img src="logo.png" alt="REUNIFY" height="35" border="0" /> 
```

还将其添加到您的 CSS 样式表中：

```
a { text-decoration:none } 
```

请注意，上面的 CSS 将去掉所有链接上的下划线。因此，如果您希望您的普通文本链接有下划线并且只希望这个特定链接没有下划线，那么创建一个像这样的类：

```
a.noline { text-decoration:none } 
```

然后将您的 HTML 代码更改为：

```
<h1><span><a href="http://www.wikipedia.org" class="noline">
<img src="logo.png" alt="REUNIFY" height="35" border="0" />
</a></span>
Welcome
</h1> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T01:49:04.747

只需添加css规则...

```
text-decoration: none; 
```

... 到您的`<a>`元素，或使用类或 ID 到某个特定元素。

您可以将其应用于所有超链接，如下所示：

```
a
{
    text-decoration: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T03:08:39.480

您应该始终添加 HTML5 和旧版浏览器 CSS 重置。

[http://cssreset.com/](http://cssreset.com/)有 2012 年最受欢迎的。这样，您将始终从头开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T06:04:02.707

```
a
{
    text-decoration: none;
} 
```

在你的CSS中添加这个

# qt - C ++ Qt - （虚拟）QWidget如何指向它的孩子？

> ID：11911211
> 
> 赞同：0
> 
> 时间：2012-08-11T01:46:32.663
> 
> 标签：qt, qwidget

我正在尝试更改 QFrame 的边框。但。

有一个Window::ui，里面有一个继承自QWidget的类。在那个类中，有一个 QFrame，设置了一个垂直布局，它拥有 2 个其他 QFrame 并执行他们的 QFrame 业务。现在，这个结构在 Window::ui 中重复了很多次，所以我简单地将它添加到一个名为 Kingdom_decks 的垂直布局中。

到现在为止还挺好。

假设，我想选择其中一个元素。为了标记选择，我想改变边框，从黑色到红色，或者只是让它变粗。有了QFrame，很容易。但

我的事件处理程序是 Window::ui 中的一个插槽。`ui`转到 Kingdom_decks 布局，然后转到所选项目。itemAt retourn 一个 QLayoutItem，我可以使用 widget() 将其转换为 QWidget ...但是然后呢？

```
ui->kingdom_decks->itemAt(idx_prev)->widget() 
```

我试过不成功

```
 ui->kingdom_decks->itemAt(idx_prev)->widget()->childAt(0,0) 
```

我相信它失败了，因为布局中有一个 Qframe，而不是具有真正坐标的几何形式，或者我可能没有深入？

无论如何，非常感谢您对此的任何想法！谢谢你的时间。

**编辑**

window.cpp 的代码

```
 #include "window.h"
    #include "ui_window.h"

    Window::Window(Game_state * p, Card_generator * d, QWidget *parent) :
        QDialog(parent),
        ui(new Ui::Window)
    {
        ui->setupUi(this);

        /*Stuff happen here*/

        /* Display cards*/
        for (int i = 0; i < 10; ++i){

                /*Add widget to layout*/
                ui->kingdom_decks->addWidget(new Cards_kingdom(decks->decks_kingdom[i]),0,i);

                /*Connect widget to map*/
                connect(ui->kingdom_decks->itemAt(i)->widget(), SIGNAL(mousePressEvent()), signal_mapper, SLOT(map()));

                /*Map widget and data*/
                signal_mapper->setMapping(ui->kingdom_decks->itemAt(i)->widget(), i);
}

        /* Action "Select cards" */
        connect(signal_mapper, SIGNAL(mapped(int)), this, SLOT(card_kingdom_selected(int)));

    }

    Window::~Window()
    {
        delete ui;
    }

    /*Implementation of SLOT*/

    void Window::card_kingdom_selected(int idx){

    /*...*/
    //?????????????? What to do here???????????
    //ui->findChild<QLabel *>("img");
    //ui->kingdom_decks->itemAt(idx)->widget()->????;
    } 
```

所以这里发生的是我有一个布局 Kingdom_decks，我在其中循环添加一个小部件 Cards_kingdom，重载了函数 addWidget。

```
ui->kingdom_decks->addWidget(new Cards_kingdom(decks->decks_kingdom[i]),0,i); 
```

此 Object Cards_kingdom 是一个类，例如：

卡片王国.h：

```
class Cards_kingdom : public QWidget {

public:
    Cards_kingdom(Deck_kingdom * input_deck);    /* Constructor  */
    bool isSelected();
    QLabel * get_img();
/*
 * Price and Counter are display in the same label, then are wrapped with Icon in a vertical layout, inside a frame.
 */
private:
    QLabel       *img;       /* Icon         */
    QLabel       *info;      /* Nb Cards left*/
    QVBoxLayout  *layout;    /* Layout       */
    QFrame       *pack;      /* Frame        */
    Deck_kingdom *deck;      /* Type Deck    */
    bool select;
}; 
```

在 window.cpp 中，我尝试检索`QLabel * img`, 以在此图像上添加边框，以便用户看到它已被选中。

要回答@Nicholas Smith，findChild 如何找到确切的实例`Card_kingdom`？

编辑：

好的，我可以将我的架构更改为这样的：

创建 Cards_kingdom * vec 的向量

在for循环中， vec.push_back(new Card_kingdom *); ui->layout->addWIdget(vec[i])

所以现在，我认为这会起作用，因为布局持有一个指向我的小部件的指针，所以我通过引用传递，因此，如果我更改对象中的某些内容，即使我没有经过那里，它也会出现在 GUI 中...

对？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:26:52.743

Qt 的有趣之处在于布局可以变成嵌套、层和迷宫，但我刚刚遇到了这个具有不同转折的确切问题，我个人会寻求类似的东西`ui->findChild<QFrame *>("frameObjectName")`（如果您将 QFrame 创建为指针，如果不只是删除 *) 并从那里访问它。您需要确保为框架填充了对象名称，但这并不太难，而且还有其他好处。

# emacs - Dired：不显示文件权限

> ID：11911215
> 
> 赞同：1
> 
> 时间：2012-08-11T01:47:55.557
> 
> 标签：emacs, permissions, dired

在我的新工作中，我在 Windows 上使用 Emacs 24，在这些特殊情况下它对我的主要用途是作为文件管理器。

我想抛弃 Dired 显示中的所有内容，除了文件名、大小和日期。 [这个问题](https://stackoverflow.com/questions/4115465/emacs-dired-too-much-information)向我展示了如何使用 ls-lisp-verbosity 删除大部分我不想要的细节。

但我还没有找到不显示权限的方法。我检查了**ls**和**dir**的文档，似乎没有“不显示权限”的标志。到目前为止，我还没有在 Dired 中找到任何会忽略权限的内容。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-27T18:54:36.137

您最好的选择是更改`ls`开关，以便 Dired 不会列出这些字段。查看`M-x man ls`您的特定平台，了解您`ls`可以使用哪些开关。

[`dired-details.el`](http://www.emacswiki.org/emacs/download/dired-details.el)[`dired-details+.el`](http://www.emacswiki.org/emacs-en/download/dired-details%2b.el)如果您拥有 Emacs 24.4（或预发布的开发快照），则不再需要(and )。只需用于`(`在显示和隐藏细节之间切换。

在这种情况下，您至少有两个选项来控制是否将符号链接目标或除标题和文件行之外的所有行视为要隐藏的详细信息：`dired-hide-details-hide-symlink-targets`和 `dired-hide-details-hide-information-lines`.

如果更改`ls`开关对您的情况没有帮助，那么您需要`dired-details-make-current-line-overlay`从`dired-details.el`. 要隐藏的细节由第一个`cond`子句确定，即（包含在 中`ignore-errors`）：

```
(dired-move-to-filename t) 
```

这将指向文件名的开头。下一行是这样的：

```
 (make-overlay (+ 2 bol) (point)) 
```

这会创建从行首（`bol`此处）到文件名开头（`point`）的不可见覆盖。

如果你想要一些不同的东西，那么你需要获得你想要的覆盖限制。例如，如果您希望从文件大小开始不可见，那么您将使用正则表达式向前搜索，以找到文件大小的开头。

`dired-move-to-filename-regexp`您可以通过使用（在库中）的正则表达式来提出这样的正则表达式`dired.el`。这是一个非常*复杂*的正则表达式，可以匹配所有文件名。但是您可以使用它来查找日期+时间部分，它是第 7 个匹配的正则表达式子组或第 2 个，具体取决于日期+时间是使用区域设置（西部或东部）还是使用 ISO 表示。

`diredp-font-lock-keywords-1`您可以在library的代码定义变量中看到这是如何处理的[**`dired+.el`**](http://www.emacswiki.org/emacs-en/download/dired%2b.el)。

但同样，最好的方法，如果它做你想要的，是尝试使用`ls`开关来控制首先列出哪些字段。您可以通过使用前缀参数轻松地试验开关`C-x d`- 系统会提示您使用开关。

# github - 是否可以将 Github 连接到 Unfuddle 以使用强大的提交消息？

> ID：11911217
> 
> 赞同：4
> 
> 时间：2012-08-11T01:48:57.573
> 
> 标签：github, ticket-system, unfuddle

我的团队使用 Github 进行代码托管，使用 Unfuddle 进行票务。是否可以将 Github 连接到 Unfuddle，以便我们能够从提交消息中更新/关闭票证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:03:57.010

正如 markdorison 所指出的，github 企业中有服务挂钩来执行此操作。

首先，您需要确保您的 github 帐户具有管理您的 repo 所需的权限。您需要设置为存储库“所有者”。

获得这些权限后，如果您转到 github 托管存储库的概览页面`/ORGANIZATION/REPOSITORY`，您将看到一排熟悉的选项卡，最右侧有一个新成员：

代码网络拉取请求问题图表 **管理员**

单击管理，您将在管理页面左侧看到一个菜单，其中包含指向“服务挂钩”的链接。

进入此页面后，向下滚动（远）以找到“unfuddle”服务挂钩。

单击 Unfuddle 服务挂钩，浏览器右上角将打开一个小表单。像这样填写：

```
Subdomain: Your organization's unfuddle subdomain, ie ORG.unfuddle.com
Repo Id: The numeric Id of the github repository you are trying to connect to unfuddle.
Username: Your unfuddle user account name.
Password: Your unfuddle user account password.
_ HttpOnly (check if appropriate)
√ Active (set to active to use this service, uncheck to stop using it) 
```

然后点击“更新设置”提交按钮。

完成后，您将看到一个名为“Test Hook”的新按钮。单击以测试连接并确保其正常工作。

几分钟之内，您应该开始看到提交历史记录反映在 Unfuddle 的存储库列表中。

专业提示：仅为 github 等外部服务设置一个`Unfuddle`帐户，并使用此帐户而不是个人用户帐户来创建服务连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:53:29.970

此功能由 Github 中提供的 Unfuddle 服务挂钩提供。您可以在存储库的管理部分找到它。

# android - Android listview 定位顺序错误

> ID：11911221
> 
> 赞同：0
> 
> 时间：2012-08-11T01:49:52.853
> 
> 标签：android, listview

我有一个大约 20 项的列表视图。每行适配器都有一个图像按钮，当我单击它时会执行不同的操作。当我单击列表视图的项目时，我设法正确获取位置编号。但是当我单击图像按钮时，我得到的位置是错误的。不是 0~19，而是显示 0 1 2 3 0 1 2 3 0 1 2 3 .....

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder;        

    if (convertView == null) {
        convertView     = myInflater.inflate(R.layout.list_video, null);
        holder          = new ViewHolder();

        holder.rlContainer      = (RelativeLayout)  convertView.findViewById(R.id.rlContainer);
        holder.imageView        = (ImageView)       convertView.findViewById(R.id.ivLogo);
        holder.buttonBackground = (ImageView)       convertView.findViewById(R.id.ibButtonLebih);
        holder.tvtitle          = (TextView)        convertView.findViewById(R.id.tvTitle);

        holder.buttonBackground.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {               
                videoListClickListener.OnVideoMoreClickListener(position);
            }
        });

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:34:31.680

问题解决了！通过将 onclicklistener 和 setTag 移到 if/else 之外。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
ViewHolder holder;        

if (convertView == null) {
    convertView     = myInflater.inflate(R.layout.list_video, null);
    holder          = new ViewHolder();

    holder.rlContainer      = (RelativeLayout)  convertView.findViewById(R.id.rlContainer);
    holder.imageView        = (ImageView)       convertView.findViewById(R.id.ivLogo);
    holder.buttonBackground = (ImageView)       convertView.findViewById(R.id.ibButtonLebih);
    holder.tvtitle          = (TextView)        convertView.findViewById(R.id.tvTitle);

} else {
    holder = (ViewHolder) convertView.getTag();
}

holder.buttonBackground.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {               
            videoListClickListener.OnVideoMoreClickListener(position);
        }
    });

    convertView.setTag(holder);

return convertView; 
```

}

# ios - 如何在 iOS 中实现运行时钟？

> ID：11911224
> 
> 赞同：0
> 
> 时间：2012-08-11T01:50:25.997
> 
> 标签：ios

我正在尝试制作一个简单的应用程序，用户可以在其中选择未来的日期/时间，并在该日期/时间发生时发生特定事件。

我该如何实现这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:16:14.290

你想要[UILocalNotification](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:38:34.193

您是在谈论获取诸如警报之类的通知吗？

如果是，则本地通知与您想要的相同。要使用它，请通过演示说明： http: [//www.iostipsandtricks.com/ios-local-notifications-tutorial/](http://www.iostipsandtricks.com/ios-local-notifications-tutorial/)

对于 API，请参阅 YusufX 的回答...

# jquery - 将父元素移动到兄弟元素中？

> ID：11911226
> 
> 赞同：1
> 
> 时间：2012-08-11T01:50:46.480
> 
> 标签：jquery

我需要移动父锚点以更“紧密”地包裹子图像。我的 HTML 的简化版本是：

```
<a class="link">
  <span class="container">
    <img class="image" />
    <span>An image caption.</span>
  </span>
</a> 
```

我正在寻找这个结果：

```
<span class="container">
  <a class="link">
    <img class="image" />
  </a>
  <span>An image caption.</span>
</span> 
```

我试过：

```
/* I have to process each anchor individually and only make 
 * this move if there's a span.container as the first child.
 */
$('a.link').each(function() {
  if ($(this).children('span.container').length > 0) {
    $(this).find('img.image').wrap($(this));
    $(this).children('span.container').unwrap();
  }
}); 
```

我最终得到：

```
<span class="container">
  <a class="link">
    <span class="container">
      <img class="image">
        <img class="image" />
      </img>
      <span>An image caption.</span>
    </span>
  </a>
  <span>An image caption.</span>
</span> 
```

警告：我是n00b。我坚持使用 jQuery 1.3.2。我正在使用[一个`unwrap()`插件](http://benalman.com/projects/jquery-unwrap-plugin/)，它似乎如上所示工作。问题出在`wrap($(this))`我的身上吗？`$(this)`应该只包含`<a class="link">`而不是它的孩子吧？它似乎包含孩子，它们被插入包装中，我得到重复的 HTML。提前谢谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:04:24.023

```
$('.link').each(function(){
    var $me = $(this);
    $me.children('.container').unwrap().find('img').wrap($me);
}); 
```

[小提琴](http://jsfiddle.net/sm7RK/)

# debugging - 调试 SSL 后面的站点

> ID：11911227
> 
> 赞同：1
> 
> 时间：2012-08-11T01:50:50.660
> 
> 标签：debugging, ssl

我正在将我的整个网站置于 SSL 之后，因为现在有些东西需要它。这是我第一次这样做。我通常通过 Wireshark 调试我的 (php/asp.net) 网站，我真的担心一旦在 SSL 中运行这将完全模糊/加密。

我应该告别使用数据包嗅探器进行快速、简单的调试，还是有众所周知的调试方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:56:55.490

您可以使用 WireShark 解密（某些）SSL 流量。由于您拥有该域，因此您拥有该站点将使用的私钥。配置 WireShark 以使用它来解密进出您站点的流量。

[http://wiki.wireshark.org/SSL/](http://wiki.wireshark.org/SSL/)

[https://wirewatcher.wordpress.com/2010/07/20/decrypting-ssl-traffic-with-wireshark-and-ways-to-prevent-it/](https://wirewatcher.wordpress.com/2010/07/20/decrypting-ssl-traffic-with-wireshark-and-ways-to-prevent-it/)

# process - 如何将数据发送到进程？

> ID：11911228
> 
> 赞同：3
> 
> 时间：2012-08-11T01:51:16.603
> 
> 标签：process, outputstream, dart

我正在尝试编写一个 dart 服务器应用程序，该应用程序将与接受输入并提供输出的应用程序通信，例如 unix 工具 bc。

我可以读取 bc 的输出，但无法向 bc 发送命令。这是我的代码：

```
#import('dart:io');

void main() {
  var p = Process.start('bc', ["-i"]);
  var stdoutStream = new StringInputStream(p.stdout);

  stdoutStream.onLine = () => print(stdoutStream.readLine());
  p.stdin.writeString("quit\n");

  p.onExit = (exitCode) {
    print('exit code: $exitCode');
    p.close();
  };
} 
```

当我运行它时，我收到以下错误：

```
Unhandled exception:
SocketIOException: writeList failed - invalid socket handle
 0\. Function: '_Socket@14117cc4.writeList' url: 'dart:io' line:4808 col:48
 1\. Function: '_SocketOutputStream@14117cc4._write@14117cc4' url: 'dart:io' line:4993 col:70
 2\. Function: '_SocketOutputStream@14117cc4.write' url: 'dart:io' line:4969 col:29
 3\. Function: '_BaseOutputStream@14117cc4.writeString' url: 'dart:io' line:5197 col:3
 4\. Function: '::main' url: 'file:///var/www/html/example.dart' line:8 col:22 
```

如果我注释掉我尝试写“quit\n”的行，那么它会运行，我可以看到 bc 的输出。

**那么如何让我的程序向我的服务器上的应用程序（如 bc）发送命令？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:55:10.693

问题是您在进程正确启动之前写入标准输入。尝试：

```
#import('dart:io');

void main() {
  var p = Process.start('bc', ["-i"]);
  var stdoutStream = new StringInputStream(p.stdout);

  stdoutStream.onLine = () => print(stdoutStream.readLine());
  p.onStart = () => p.stdin.writeString("1+1\nquit\n");

  p.onExit = (exitCode) {
    print('exit code: $exitCode');
    p.close();
  };
} 
```

# objective-c - 检查视图控制器之前是否已加载

> ID：11911231
> 
> 赞同：0
> 
> 时间：2012-08-11T01:51:36.853
> 
> 标签：objective-c, ios, xcode

我正在尝试检查在应用程序的生命周期中是否曾经加载过某个视图。我已经实现了以下代码，但不太确定它为什么不起作用。它仅在视图控制器的 viewDidLoad 方法中完成（也许这是问题所在）。如果有人可以让我知道我的错误是什么，将不胜感激。谢谢！

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
 BOOL hasRunBefore = [defaults boolForKey:@"FirstRun"];
                     if (hasRunBefore) {
                         NSLog (@"not the very first time this controller has been loaded");
                          [defaults setBool:YES forKey:@"FirstRun"];
                         [defaults synchronize];
                     }
                     else if (!hasRunBefore) {
                         [defaults setBool:NO forKey:@"FirstRun"];
                          NSLog (@"the very first time this controller has been loaded");
                         [defaults synchronize];
                     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:37:34.923

您的代码中有几个错误。请参阅以下更正：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
BOOL hasRunBefore = [defaults boolForKey:@"FirstRun"];

if (hasRunBefore) {
    NSLog (@"not the very first time this controller has been loaded");
    /* Toggle the boolean state */
    [defaults setBool:NO forKey:@"FirstRun"];
}
else if (!hasRunBefore) {
    /* Toggle the boolean state */
    [defaults setBool:YES forKey:@"FirstRun"];
    NSLog (@"the very first time this controller has been loaded");
}
[defaults synchronize]; 
```

但是，我不确定为什么要在 if(hasRunBefore) 中将 FirstRun 切换回 NO。我只指出出了什么问题，您可能需要再次检查您的逻辑。

- 编辑 - 就像我指出你的逻辑一样，你应该只有这个：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
BOOL hasRunBefore = [defaults boolForKey:@"FirstRun"];

if (!hasRunBefore) {
    [defaults setBool:YES forKey:@"FirstRun"];
    [defaults synchronize];
    NSLog (@"the very first time this controller has been loaded");
}
else
    NSLog (@"Not the first time this controller has been loaded"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:56:25.527

只要应用程序安装在设备上，默认设置的值就会保持不变。

您应该考虑使用应用程序委托中设置的 BOOL 值（从运行到运行不会持续存在）

或者

您应该通过以下方法在您的应用程序委托中将“FirstRun”设置回 NO。

```
- (void)applicationWillTerminate:(UIApplication *)application 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T02:04:10.950

NSUserDefaults 是可能的，但您也可以使用静态`BOOL`并将其设置`YES`为第一次加载视图控制器时。

# android - 在我的接收器中无限调用 onRecive()

> ID：11911232
> 
> 赞同：1
> 
> 时间：2012-08-11T01:51:38.553
> 
> 标签：android, broadcastreceiver

我有一个活动，它有两个广播接收器来获取电池寿命和 GPS 位置。根据开发人员指南，我在 onResume() 中注册了它们，并在 onPause() 中取消了注册。但是接收器中的 onReceive() 方法被无限调用。这是我的代码：

```
 public class BatteryStatusReceiver extends BroadcastReceiver {

        private final static String TAG = "BatteryStatusReceiver";

        private Activity mActivity = null;

        public BatteryStatusReceiver(Activity activity){
            this.mActivity = activity;
        }

        @Override
        public void onReceive(Context context, Intent intent) {

            String action = intent.getAction();
            if (Log.isLoggable(TAG, Log.DEBUG))
                Log.d(TAG, "action:" + action);

            int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

            //This will calll mActivity.onNewIntent method.
            if (mActivity!=null){
                Intent i = new Intent(context, mActivity.getClass());
                i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                i.putExtra(BatteryManager.EXTRA_LEVEL, level);
                i.putExtra(BatteryManager.EXTRA_SCALE, scale);
                context.startActivity(i);
            }
        }

    }

    public class LocationReceiver extends BroadcastReceiver {

        private Activity mActivity;

        public LocationReceiver(Activity activity) {
            this.mActivity = activity;
        }

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(LocationService.ACTION_GPS_ACTIVATED)){
                double[] location = intent.getExtras().getDoubleArray(ConstDef.KEY_LOCATION); //lat, lng

                //This will calll mActivity.onNewIntent method.
                if (mActivity!=null){
                    Intent i = new Intent(context, mActivity.getClass());
                    i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                    i.putExtra(ConstDef.KEY_LOCATION, location);
                    context.startActivity(i);
                }
            }
        }

    }

    //LocationService
    public class LocationService extends Service implements LocationListener {

    /* (non-Javadoc)
     * @see android.app.Service#onStartCommand(android.content.Intent, int, int)
     */
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        String action = intent.getAction();
        if (action.equals(ACTION_START))
            processStart(ONE_MINUTE*10, 100);
        else if (action.equals(ACTION_STOP))
            processStop();
        return START_NOT_STICKY;
    }

        /* (non-Javadoc)
     * @see android.location.LocationListener#onLocationChanged(android.location.Location)
     */
    @Override
    public void onLocationChanged(Location location) {
        Log.d(TAG, "onLocationChanged");

        if (isBetterLocaion(location, mCurrentBestLocation)) 
            mCurrentBestLocation = location;

        broadcastLocation(mCurrentBestLocation);
    }

        /**
     * Send location to the receivers 
     * @param location
     */
    protected void broadcastLocation(Location location){
        Intent intent = new Intent(ACTION_GPS_ACTIVATED);
        intent.putExtra(ConstDef.KEY_LOCATION, new double[]{location.getLatitude(), location.getLongitude()});
        sendBroadcast(intent);
    }
}

    //Activity
         private BatteryStatusReceiver mBatteryReceiver = new BatteryStatusReceiver(this);

        @Override
        protected void onResume() {
            super.onResume();
            //Activate location service to get the response from GPS as soon as possible before calling.
            startService(new Intent(LocationService.ACTION_START));

            IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
            registerReceiver(mBatteryReceiver, ifilter);
        }

        @Override
        protected void onNewIntent(Intent intent) {
            int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

            float batteryFull = level / (float)scale;
            //if (Log.isLoggable(TAG, Log.DEBUG))
            Log.d(TAG, "Level:" + level + " Scale:" + scale + ", batteryFull:" + batteryFull);

            String dateTime = JDateUtils.now(JDateUtils.LONG_DATE_FORMAT);

            //TODO. Process here...
        }       

        @Override
        protected void onPause() {
            super.onPause();

            stopService(new Intent(this, LocationService.class));
            unregisterReceiver(mBatteryReceiver);
        }   
} 
```

我的代码中缺少什么？请帮我解决我的问题。提前致谢。

# windows - 通过 url 创建本地文件夹

> ID：11911233
> 
> 赞同：0
> 
> 时间：2012-08-11T01:52:13.620
> 
> 标签：windows, url, browser

**想象一下，您想在一个网站上有一个链接，该链接创建一个本地文件夹，并在单击它时立即在 Windows 资源管理器中打开它。**就像是`<a href="new_file:///C:/folder/newfolder">Go to new folder</a>`

我知道有文件：-protocol，但这只会打开一个本地文件夹。有没有办法在 url 中指定浏览器也应该创建文件夹。

这可能违反了许多安全策略。**但我只是好奇是否有任何方法可以实现这一目标。你的脑海里浮现过什么？不要退缩。**

干杯，

杰拉尔多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:00:59.433

正如您所提到的，这对于来自互联网的网页是不允许的。（想象一个运行数千个这样的流氓脚本）

您可以在浏览器中打开现有文件夹（不是通过 Windows 资源管理器，除非它是 IE 并且该页面是受信任的）。

如果要创建文件夹，请尝试使用HTML5 的[离线存储 API](https://developers.google.com/chrome/whitepapers/storage)。这可能无法完成“在 Win Explorer 中打开”部分，但您可以将数据存储在用户的机器上。

希望这可以帮助。

# jquery - 输入按钮活动样式？（无锚）

> ID：11911237
> 
> 赞同：4
> 
> 时间：2012-08-11T01:53:15.957
> 
> 标签：jquery, css

我正在努力使用尽可能基本的 HTML 来制作一些时尚的按钮。

```
<input type="submit" value="Submit!" /> 
```

然而，事实证明，为“按下”状态设计样式是困难的。我在网上到处看，设计师似乎通过使用锚点绕过这个问题，然后利用 CSS 的`:active`伪类。不幸的是，按钮似乎没有这个。他们有`:focus`，但实际上并没有以同样的方式工作。

**所以我的问题是：**是否可以在不修改此 HTML 的情况下设置“向下”状态的样式？如有必要，我愿意使用 jQuery，但我主要希望有一个不涉及锚点的纯 CSS 解决方案。大家有什么推荐的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:12:00.043

实际上，您可以将`:active`伪类应用于**表单按钮**。

这是一个例子：

[http://jsfiddle.net/xvWG5/](http://jsfiddle.net/xvWG5/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:03:06.517

```
input:active {
    background-color: red;
} 
```

这适用于 Firefox、Chrome 和 IE9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:11:59.170

你想实现什么样的造型？当在 Safari6 和 FF12 中按下时，我可以看到[这个小提琴中元素的字体颜色变为红色。](http://jsfiddle.net/ovfiddle/eb6eU/)

W3 建议在支持动态伪类和处理某些属性方面[可能存在跨浏览器不一致；](http://www.w3.org/WAI/GL/WCAG20-TECHS/C15.html)您需要提供您遇到问题的示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:12:48.410

您可以选择使用标签吗？我想你会发现它无限灵活。例如， :active 状态在 Safari、Chrome 和 Firefox 中似乎对我有用（我目前无法访问 IE）：

```
button {
    background-color: red;
    color: white;
    font-weight: bold;
    font-size: 3em;
    border: 0;
}

button:active {
    background-color: blue;
}
​ 
```

# java - 为什么网站爬行需要永远？

> ID：11911240
> 
> 赞同：5
> 
> 时间：2012-08-11T01:54:19.487
> 
> 标签：java, regex, web-crawler

```
public class Parser {

    public static void main(String[] args) {
        Parser p = new Parser();
        p.matchString();
    }

    parserObject courseObject = new parserObject();
    ArrayList<parserObject> courseObjects = new ArrayList<parserObject>();
    ArrayList<String> courseNames = new ArrayList<String>();
    String theWebPage = " ";

    {
        try {
            URL theUrl = new URL("http://ocw.mit.edu/courses/");
            BufferedReader reader =
                new BufferedReader(new InputStreamReader(theUrl.openStream()));
            String str = null;

            while((str = reader.readLine()) != null) {
                theWebPage = theWebPage + " " + str;
            }
            reader.close();

        } catch (MalformedURLException e) {
            // do nothing
        } catch (IOException e) {
            // do nothing
        }
    }

    public void matchString() {
        // this is my regex that I am using to compare strings on input page
        String matchRegex = "#\\w+(-\\w+)+";

        Pattern p = Pattern.compile(matchRegex);
        Matcher m = p.matcher(theWebPage);

        int i = 0;
        while (!m.hitEnd()) {
            try {
                System.out.println(m.group());
                courseNames.add(i, m.group());
                i++;
            } catch (IllegalStateException e) {
                // do nothing
            }
        }
    }
} 
```

我想用上面的代码实现的是在 MIT OpencourseWare 网站上获取部门列表。我正在使用与页面源中的部门名称模式匹配的正则表达式。我正在使用 Pattern 对象和 Matcher 对象并尝试 find() 并打印这些与正则表达式匹配的部门名称。但是代码需要永远运行，我不认为使用 bufferedReader 在网页中阅读需要那么长时间。所以我认为我要么做错了什么，要么解析网站需要很长时间。因此，如果有任何关于如何提高性能或纠正我的代码中的错误的意见，我将不胜感激。我为写得不好的代码道歉。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T03:54:26.000

问题出在代码上

```
while ((str = reader.readLine()) != null)
    theWebPage = theWebPage + " " +str; 
```

变量`theWebPage`是一个字符串，它是不可变的。对于读取的每一行，此代码创建一个**新**字符串，其中包含到目前为止已读取的所有内容的副本，并附加一个空格和刚刚读取的行。这是大量不必要的复制，这就是程序运行如此缓慢的原因。

我下载了有问题的网页。它有 55,000 行，大小约为 3.25MB。不会太大。但是由于循环中的复制，第一行最终被复制了大约**15 亿**次（55,000 平方的 1/2）。该程序将所有时间都用于复制和垃圾收集。我在我的笔记本电脑（2.66GHz Core2Duo，1GB 堆）上运行它，从本地文件读取时运行了 15 分钟（没有网络延迟或网络爬取对策）。

要解决此问题，请`theWebPage`改为 a `StringBuilder`，并将循环中的行更改为

```
 theWebPage.append(" ").append(str); 
```

如果您愿意，可以在循环之后使用转换`theWebPage`为字符串。`toString()`当我运行修改后的版本时，只花了几分之一秒。

顺便说一句，您的代码在类内使用裸代码块`{ }`。这是一个**实例初始化程序**（与静态初始化程序相反）。它在对象构建时运行。这是合法的，但很不寻常。请注意，它误导了其他评论者。我建议将此代码块转换为命名方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:05:54.313

这是你的整个程序吗？的声明在哪里`parserObject`？

另外，所有这些代码不应该在你`main()`调用之前`matchString()`吗？

```
parserObject courseObject = new parserObject();
ArrayList<parserObject>  courseObjects = new ArrayList<parserObject>();
ArrayList<String> courseNames = new ArrayList<String>();
String theWebPage=" ";
{

    try {
            URL theUrl = new URL("http://ocw.mit.edu/courses/");
            BufferedReader reader = new BufferedReader(new InputStreamReader(theUrl.openStream()));
            String str = null;

            while((str = reader.readLine())!=null)
            {
                theWebPage = theWebPage+" "+str;
            }
            reader.close();

    } catch (MalformedURLException e) {

    } catch (IOException e) {

    }
} 
```

您还在捕获异常并且不显示任何错误消息。当遇到异常时，您应该始终显示错误消息并执行某些操作。例如，如果您无法下载页面，则没有理由尝试解析空字符串。

从您的评论中，我了解了类中的静态块（谢谢，不知道它们）。但是，根据我的阅读，您需要将关键字放在`static`block 的开头`{`。此外，最好将代码放入您的 .xml 文件`main`中，这样如果您收到 MalformedURLException 或 IOException，您可以退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T10:04:24.793

当然，您可以使用有限的 JDK 1.0 API 解决此任务，并遇到[Stuart Marks 在他的出色回答中帮助您解决的问题](https://stackoverflow.com/a/11911759/521799)。

或者，您只需使用流行的事实上的标准库，例如[Apache Commons IO](http://commons.apache.org/proper/commons-io/)，然后使用这样的简单方法将您的网站读入字符串：

```
// using this...
import org.apache.commons.io.IOUtils;

// run this...
try (InputStream is = new URL("http://ocw.mit.edu/courses/").openStream()) {
    theWebPage = IOUtils.toString(is);
} 
```

# iphone - 禁用 UIAlertView 按钮会让我的应用程序被拒绝吗？

> ID：11911244
> 
> 赞同：2
> 
> 时间：2012-08-11T01:55:31.327
> 
> 标签：iphone, cocoa, uialertview, appstore-approval

我正在使用带有 UITextView 子视图的 AlertView 来让用户回复我的应用程序中的帖子，但是我希望当用户键入的字符数超过字符限制时禁用警报的回复按钮。像这样禁用警报视图按钮会让我的应用程序被拒绝，有没有更好的方法来做到这一点？

```
-(void)textViewDidChange:(UITextView *)textView {
    if (!replyAlert) {
        return;
    }

    //character count
    replyAlert.title = [NSString stringWithFormat:@"Reply to Post (%i/250)", [textView.text length]];
    if ([textView.text length]>=250) {
        //disable alert view button
        for (UIView* view in [replyAlert subviews])
        {
            if ([[[view class] description] isEqualToString:@"UIAlertButton"])
            {
                UIButton *button = (UIButton*)view;
                if ([button.titleLabel.text isEqualToString:@"Reply"]) {
                    //disable
                    button.enabled = NO;
                }
            }
        }
    } else if ([textView.text length]==249) {
        //re-enable button if user deleted a character
        for (UIView* view in [replyAlert subviews])
        {
            if ([[[view class] description] isEqualToString:@"UIAlertButton"])
            {
                UIButton *button = (UIButton*)view;
                if ([button.titleLabel.text isEqualToString:@"Reply"]) {
                    //enable
                    button.enabled = YES;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:41:20.117

看看委托上的这个方法（UIAlertViewDelegate）

```
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView 
```

假设您使用的是 UIAlertViewStylePlainTextInput (?)，则每次用户在警报视图的文本字段中键入字符时都会调用此方法。因此，在这种方法中，您可以检查文本字段中文本的长度并相应地返回 TRUE/FALSE。

该方法也仅在 iOS 5.0 或更高版本中可用，如果支持旧版本，这可能是一个问题。

如果您将自己的文本字段作为子视图添加到警报视图，那么仅此一项就会导致应用程序被拒绝，因为它声明视图层次结构不会被操纵。如果您正在使用开箱即用的文本输入样式警报视图并且只是导航子视图以检查按钮标题并禁用它们，如果这导致拒绝，我会感到惊讶（注意这是一个主观意见）应用程序。

# android - 什么是 ViewPagerAdapter 生命周期 esp。instanceiteItem(查看集合，int位置)

> ID：11911245
> 
> 赞同：3
> 
> 时间：2012-08-11T01:55:40.940
> 
> 标签：android, android-layout

我不清楚 ViewPagerAdapter 的生命周期。特别是何时调用 instatiateItem(View view, int position)？不使用片段，我真的需要在某个时候在返回的视图上设置适配器。我在哪里可以做到这一点？现在发生的事情是我在视图寻呼机上调用 setItem(id) 并且我最终会为 ViewPager 每次支持的每个视图调用一次 instantiateView(..)。所以它总是返回最后一个视图，在最后一个位置。

# objective-c - NSTableView 中带有悬停效果的可点击文本

> ID：11911246
> 
> 赞同：1
> 
> 时间：2012-08-11T01:55:49.280
> 
> 标签：objective-c, cocoa, hover, nstableview, textfield

[我](http://developer.apple.com/library/mac/#qa/qa1487/_index.html)正在尝试在`NSTableView`.

1.) 当用户将鼠标悬停在特定单元格上时，该单元格中的文本应在文本下方绘制下划线（悬停/可跟踪区域效果）。

2.) 当用户点击文本时，它应该执行一个动作。

我在自定义表格视图中进行了子类化`NSCell`并`NSTableView`添加了一个跟踪区域，以尝试跟踪表格中单个单元格的鼠标位置，以通知该单元格何时重绘自身。我可以获得鼠标位置的当前行和列，但似乎无法在我的自定义表格视图的`mouseMoved:`方法中获得正确的单元格

```
-(void)mouseMoved:(NSEvent *)theEvent {
  [super mouseMoved:theEvent];
  NSPoint p = [self convertPoint:[theEvent locationInWindow] fromView:nil];
  long column = [self columnAtPoint:p];
  long row = [self rowAtPoint:p];
  id cell = [[self.tableColumns objectAtIndex:column] dataCellForRow:row];
} 
```

它获取列的单元格，但没有获取该特定行的正确单元格。也许我没有完全理解它的`dataCellForRow:`功能`NSTableColumn`？

我知道您不能完全为单元格添加跟踪区域，但是您必须为鼠标点击创建命中测试，然后在命中测试成功后开始跟踪（意味着鼠标已经按下），然后使用`startTracking:`,`continueTracking:`和`stopTracking:`获取鼠标的位置。`mouseDown:`这个想法是它在任何动作之前都有悬停效果。

此外，我不能只使用基于视图的 tableview（这将是不可思议的），因为我的应用程序必须与 10.6 兼容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T06:36:02.063

我不确定你获取细胞的方法有什么问题，但你真的不需要这样做来做你想做的事。我测试了一种方法来执行此操作，该方法需要创建一个表视图子类来在鼠标移动方法中进行跟踪。这是该子类的代码：

```
-(void)awakeFromNib {
    NSTrackingArea *tracker = [[NSTrackingArea alloc] initWithRect:self.bounds options:NSTrackingMouseEnteredAndExited|NSTrackingMouseMoved|NSTrackingActiveInActiveApp owner:self userInfo:nil];
    [self addTrackingArea:tracker];
    self.rowNum = -1;
}

-(void)mouseMoved:(NSEvent *)theEvent {
    NSPoint p = theEvent.locationInWindow;
    NSPoint tablePoint = [self convertPoint:p fromView:nil];
    NSInteger newRowNum = [self rowAtPoint:tablePoint];
    NSInteger newColNum = [self columnAtPoint:tablePoint];
    if (newColNum != self.colNum || newRowNum != self.rowNum) {
    self.rowNum = newRowNum;
    self.colNum = newColNum;
    [self reloadData];
    }
}

-(void)mouseEntered:(NSEvent *)theEvent {
    [self reloadData];
}

-(void)mouseExited:(NSEvent *)theEvent {
    self.rowNum = -1;
    [self reloadData];
} 
```

我将数组和表委托以及数据源代码放在了应用委托中（可能不是最好的地方，但可以进行测试）。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    self.theData = @[@{@"name":@"Tom",@"age":@"47"},@{@"name":@"Dick",@"age":@"21"},@{@"name":@"Harry",@"age":@"27"}];
    [self.table reloadData];
    self.dict = [NSDictionary dictionaryWithObjectsAndKeys:@2,NSUnderlineStyleAttributeName,[NSColor redColor],NSForegroundColorAttributeName,nil];
}

- (NSInteger)numberOfRowsInTableView:(RDTableView *)aTableView {
    return self.theData.count;
}

- (id)tableView:(RDTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {
    if (self.table.colNum == 0 && rowIndex == self.table.rowNum && [aTableColumn.identifier isEqualToString:@"Link"]) {
        NSString *theName = [[self.theData objectAtIndex:rowIndex] valueForKey:@"name"];
        return [[NSAttributedString alloc] initWithString:theName attributes:self.dict];
    }else if ([aTableColumn.identifier isEqualToString:@"Link"]){
        return [[self.theData objectAtIndex:rowIndex] valueForKey:@"name"];
    }else{
        return [[self.theData objectAtIndex:rowIndex] valueForKey:@"age"];
    }
}

- (void)tableViewSelectionDidChange:(NSNotification *)aNotification {
    if (self.table.colNum == 0)
        NSLog(@"%ld",[aNotification.object selectedRow]);
} 
```

如果您单击第一列中的单元格（在 IB 中设置了标识符“Link”），我使用委托方法 tableViewSelectionDidChange: 来实现该操作。

# widget - 究竟是什么定义了“小部件”？

> ID：11911249
> 
> 赞同：4
> 
> 时间：2012-08-11T01:56:20.123
> 
> 标签：widget

我已经看到小部件被用作一个相当专业的术语，并且 W3C 有它的规范。但维基百科说，小部件只是一段可以以不同方式重用的代码。SE 对小部件标签的定义不符合这些描述中的任何一个。那什么是小部件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T02:03:32.353

我想这取决于上下文。在 Android 上，小部件是可以从主屏幕与之交互的应用程序。在我的工作中，您可以将小部件添加到您的个性化 Intranet 主页。但是还有软件应用方面，通常说是衡量应用程序的大小。所以它有多种含义：一个专门用于单一用途/应用程序的通常较小的 GUI 元素，或作为一个整体的小型应用程序。

哈哈，如果您将鼠标悬停在“小部件”标签上，它会显示类似的内容。也许有人应该扩展标签描述。

# php - 取出所有收藏的记录

> ID：11911251
> 
> 赞同：1
> 
> 时间：2012-08-11T01:56:48.290
> 
> 标签：php, yii

我有三张桌子

1) tbl_users -> id，名称

2) tbl_entries -> id、title、details、user_id

2) tbl_favorites -> id、user_id、entry_id

我只想获取任何使用 Yii 的用户最喜欢的条目。

我正在使用 dataprovider 来实现它，它提供了 Entries 表的所有记录，但我只想显示那些添加到收藏夹表中的记录。

```
$dataProvider = new CActiveDataProvider('Entries', array(
    'criteria' => $criteria,
    'pagination' => array(
        'pageSize' => 15,
    ),
    )); 
```

请帮忙。

* * *

我刚刚得到了用于相同目的的 mysql 查询，但想以 yii 风格实现

```
SELECT * FROM tbl_entries, tbl_favorites  where tbl_entries.id = tbl_favorites.entry_id and tbl_favorites.user_id = xx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:51:51.427

解决这个问题的关键是正确定义你的[模型-关系](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#declaring-relationship)（&这个[wiki帖子](http://www.yiiframework.com/wiki/181/relations-belongs_to-versus-has_one/)也很好），我不确定你的业务逻辑，但我会假设如下：

1.  **用户** `has-many` **输入**
2.  **用户** `has-many` **最爱**
3.  **条目** `belongs-to` **用户**
4.  **进入** `has-one` **收藏夹**
5.  **最喜欢** `belongs-to` **的条目**
6.  **收藏** `belongs-to` **用户**

***提示：**命名您的关系以便以后有意义，例如＃1应该是条目，而＃3应该是条目*

因此，`user_id`您需要：

1.  获取用户记录
2.  获取用户收藏夹
3.  对于 (2) 中的所有结果，获取相应的条目

代码将类似于：

```
$user = User::model()->findByPk($user_id); //Fetch user record
$favorites = $user->favorites; // Fetch the user favorites using relations #2 & #6

// Getting entries
$entries = array(); // empty array to store entries

foreach($favorites as $fav) do
{
  $entries[] = $fav->entry; // Fetch entry record using relations #4 & #5
}
....
// Pass $entries array to your view 
```

# python - Python：使用单词交集但不使用字符交集的 Jaccard 距离

> ID：11911252
> 
> 赞同：10
> 
> 时间：2012-08-11T01:56:51.027
> 
> 标签：python, set, intersection

我没有意识到 Python set 函数实际上将字符串分隔为单个字符。我为 Jaccard 编写了 python 函数并使用了 python 交集方法。我将两个集合传递给这个方法，在将这两个集合传递给我的 jaccard 函数之前，我在 setring 上使用了 set 函数。

示例：假设我有`NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg`我要调用的字符串`set(NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg)`，它将字符串分成字符。因此，当我将它发送到 jaccard 函数交集时，实际上是看字符交集而不是单词到单词的交集。我怎样才能做到字对字交叉。

```
#implementing jaccard
def jaccard(a, b):
    c = a.intersection(b)
    return float(len(c)) / (len(a) + len(b) - len(c)) 
```

如果我不在`set`我的字符串上调用函数，我`NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg`会收到以下错误：

```
 c = a.intersection(b)
AttributeError: 'str' object has no attribute 'intersection' 
```

而不是字符到字符的交集，我想做单词到单词的交集并获得 jaccard 相似度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T02:01:35.347

尝试先将字符串拆分为单词：

```
word_set = set(your_string.split()) 
```

例子：

```
>>> word_set = set("NEW Fujifilm 16MP 5x".split())
>>> character_set = set("NEW Fujifilm 16MP 5x")
>>> word_set
set(['NEW', '16MP', '5x', 'Fujifilm'])
>>> character_set
set([' ', 'f', 'E', 'F', 'i', 'M', 'j', 'm', 'l', 'N', '1', 'P', 'u', 'x', 'W', '6', '5']) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-07T21:51:27.060

我计算 Jaccard 距离的函数：

```
def DistJaccard(str1, str2):
    str1 = set(str1.split())
    str2 = set(str2.split())
    return float(len(str1 & str2)) / len(str1 | str2)

>>> DistJaccard("hola amigo", "chao amigo")
0.333333333333 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T01:58:30.450

此属性不是集合所独有的：

```
>>> list('NEW Fujifilm')
['N', 'E', 'W', ' ', 'F', 'u', 'j', 'i', 'f', 'i', 'l', 'm'] 
```

这里发生的是字符串被视为可迭代序列并逐字符处理。

您在 set 中看到的相同内容：

```
>>> set('string')
set(['g', 'i', 'n', 's', 'r', 't']) 
```

要解决此问题，请在现有集合上使用 .add()，因为 .add() 不使用可交互对象：

```
>>> se=set()
>>> se.add('NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg')
>>> se
set(['NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg']) 
```

或者，使用 split()、元组、列表或一些替代的可迭代对象，这样字符串就不会被视为可迭代对象：

```
>>> set('something'.split())
set(['something'])
>>> set(('something',))
set(['something'])
>>> set(['something'])
set(['something']) 
```

根据您的字符串逐字添加更多元素：

```
>>> se=set(('Something',)) | set('NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg'.split()) 
```

或者，如果您在添加到集合时需要理解某些逻辑：

```
>>> se={w for w in 'NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg'.split() 
         if len(w)>3}
>>> se
set(['Shoot', 'CAMERA', 'Point', 'screen.jpg', 'Zoom', 'Fujifilm', '16MP', 'Optical']) 
```

它现在按照您的期望工作：

```
>>> 'Zoom' in se
True
>>> s1=set('NEW Fujifilm 16MP 5x Optical Zoom Point and Shoot CAMERA 2 7 screen.jpg'.split())
>>> s2=set('Fujifilm Optical Zoom CAMERA NONE'.split())
>>> s1.intersection(s2)
set(['Optical', 'CAMERA', 'Zoom', 'Fujifilm']) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-03T19:29:23.263

这是我根据 set 函数写的——

```
def jaccard(a,b):
    a=a.split()
    b=a.split()
    union = list(set(a+b))
    intersection = list(set(a) - (set(a)-set(b)))
    print "Union - %s" % union
    print "Intersection - %s" % intersection
    jaccard_coeff = float(len(intersection))/len(union)
    print "Jaccard Coefficient is = %f " % jaccard_coeff 
```

# jquery - jQuery Quicksand 中第一个打开的受限项目不全？

> ID：11911256
> 
> 赞同：0
> 
> 时间：2012-08-11T01:57:20.247
> 
> 标签：jquery, quicksand

**jQuery 流沙**

*我想先打开像“vogue”这样的限定项目。in here ist open "all"* *程序有什么变化？请帮我*

*看* [这里1](https://stackoverflow.com/questions/11435870/jquery-quicksand)

[去这里2](http://www.bryanflopez.me/work)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:10:33.143

如果您不想在打开页面时全部显示所有项目，您可以调用页面加载`.quicksand()`函数来触发过滤/动画。`.vouge`

由于带有“vogue”的示例并非微不足道，因此我选择重用 click 事件处理程序。将此代码放在您的 javascript 中的最后。

```
$(function() {
    // It would be better to create a function for this, but
    // to avoid code duplication the click() event is triggered/reused
    $('#filterOptions li a.vogue').click();
}); 
```

这当然只是一个快速修复。最好为点击事件的内容创建一个适当的函数，并在加载和点击时调用该函数。

# playframework - PlayFramework 2.0.2 路由中的多个参数

> ID：11911263
> 
> 赞同：5
> 
> 时间：2012-08-11T01:58:25.927
> 
> 标签：playframework, playframework-2.0

如果我添加一个参数，我似乎无法让多个参数工作，只要我添加第二个参数，我总是会得到一个

```
No data received
Unable to load the webpage because the server sent no data.
Here are some suggestions:
Reload this webpage later.
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

其他人可以确认您可以使用 play 2.0.2 向请求添加第二个参数吗？（使用Java）

我的网址就这么简单

```
http://localhost:9000/account/foruser?username=somethig&amp;create=0 
```

和路线

```
GET     /account/foruser
controllers.user.UserController.foruser(username:String, create:Boolean ) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T06:18:40.313

您应该更多地关注路线[文档和示例](http://www.playframework.org/documentation/2.0.2/JavaRouting)

通常，如果您使用命名参数，`&name=value`则无需在路由文件中指定它们。而是使用 Java 中的 DynamicForm 来访问它们。

路由文件用于`unnamed`将链接的部分与控制器的操作和参数匹配。因此，您的链接应如下所示：

```
http://localhost:9000/account/foruser/something/0 
```

和路由（当然这需要放在路由文件的一行中：

```
GET     /account/foruser/:username/:create
   controllers.user.UserController.foruser(username: String, create: Integer ) 
```

请注意，这是一些关于在路由中使用 Boolean 类型的错误报告，因此使用一些数字类型更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:38:15.593

@biesior 我在使用具有两种类型参数的 2.0.4 时遇到了同样的问题

文件路径：

```
GET /v2/object/all/data/:from/:until/:all           controllers.ObjectController.getAllData(from: String, until: String , all: Boolean, username: String ?= null, password: String ?=null) 
```

文件控制器：

```
public static Result getAllData(
            @PathParam("from") String from,
            @PathParam("until") String until,
            @PathParam("all") Boolean all,
            @QueryParam("username") String username, @QueryParam("password") String password) 
```

经过多次测试，我终于解决了这个问题。您应该使用“boolean”而不是 Boolean，因此“getAllData”转换为：

```
public static Result getAllData(
            @PathParam("from") String from,
            @PathParam("until") String until,
            @PathParam("all") boolean all,
            @QueryParam("username") String username, @QueryParam("password") String password) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T11:47:36.207

一个简单的例子：

此路线对应的正确网址：

```
GET     /user/update:action/:id controllers.myFunction(action: String, id: String) 
```

是网址：

```
myWebsite.com/user/update$action=update/$id=a@a.fr 
```

注意 ：

*   每个 url 参数都以 $ 开头
*   没有 & 或 ? 在网址中！
*   :id 和 :action 之间的 / 必须存在。在没有它的情况下播放重定向到正确的网页，但如果您希望将正确的值（即 action => '$action=update' 和 id => '$id=a@a.fr'）传输到您的功能
*   When you have an error, java display an error with the regex to apply to each route.

# emacs - c++-mode-hook 和 c-mode-hook 似乎运行了两次

> ID：11911266
> 
> 赞同：1
> 
> 时间：2012-08-11T01:58:50.670
> 
> 标签：emacs, elisp, cc-mode

我使用这个命令来启动 emacs

```
$ emacs -Q c-mode-test.el 
```

然后我使用 C-xC-e 来评估每一行

```
(require 'cc-mode)

(add-hook 'c-mode-common-hook '(lambda () (print "hello")))

(add-hook 'c-mode-hook '(lambda () (print "hello c")))

(c-mode) 
```

在此之后，迷你缓冲区显示

```
"hello"

"hello c"

"hello c"
nil 
```

和 c++-mode-hook 运行一样

```
(add-hook 'c++-mode-hook '(lambda () (print "hello c++")))

(c++-mode) 
```

小缓冲区

```
"hello"

"hello c++"

"hello c++"
nil 
```

为什么它运行两次或出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-24T14:22:16.183

您为“C”文件使用了错误的钩子。正确使用的钩子是“c-mode-hook”。

钩子“c-mode-common-hook”在每种 c 风格语言之前运行。也就是说，该钩子适用于多种语言，例如 java、objective-c、awk 等。[您可以在此处](https://www.gnu.org/software/emacs/manual/html_node/ccmode/CC-Hooks.html)找到有关这些挂钩的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T09:40:07.863

There is a bug report about this [http://debbugs.gnu.org/cgi/bugreport.cgi?bug=16759](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=16759) I don't think that language hooks are guaranteed to be executed once for a number of language modes. I suspect the issue is due to using `define-derived-mode` which is a lisp macro for defining a mode that already includes calls to hooks, this means the hooks called in the mode will be an additional execution.

You might want to try the initialization hook. The manual says:

> **Variable: c-initialization-hook**
> 
> Hook run only once per Emacs session, when CC Mode is initialized. This is a good place to change key bindings (or add new ones) in any of the CC Mode key maps. See Sample Init File.

The sample it gives is here: [https://www.gnu.org/software/emacs/manual/html_node/ccmode/Sample-Init-File.html#Sample-Init-File](https://www.gnu.org/software/emacs/manual/html_node/ccmode/Sample-Init-File.html#Sample-Init-File)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:12:29.517

似乎特定于语言的钩子不止一次运行。`(run-hooks c-mode-hook)`您可以通过运行or来确认是这种情况`(run-hooks c-mode-common-hook)`，并且您会注意到您的`print`语句只发生了一次。

使用钩子的一般建议是不要依赖于它们的运行顺序——而不是依赖于它们运行的​​次数，这似乎是一种自然的扩展。

# asp.net-mvc-3 - 向模型 MVC3 EF4 添加新的虚拟属性

> ID：11911267
> 
> 赞同：1
> 
> 时间：2012-08-11T01:58:59.523
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4

我最近刚刚了解到将您的数据注释放在一个新的部分类中，以便它们在数据库中的 edmx 更新上持续存在。
[数据库优先方法和修改数据库模式](https://stackoverflow.com/questions/9071887/database-first-approach-and-modifying-the-database-schema)
[从数据库更新模型（数据库优先）](https://stackoverflow.com/questions/6758525/update-model-from-database-database-first)

在我的一个模型中，我有两个属性：名字和姓氏。我为下面的全名创建了一个虚拟属性。

```
public virtual string fullName { get {return firstName + " " + lastName; } } 
```

fullName 属性在 edmx 生成的 .tt 模型类中时有效，但是当我将其放入包含注释的“伙伴”部分类中时，它不起作用（即应用程序的其余部分无法识别为我班级的一个属性）。

如何获得不会被 edmx 的数据库更新覆盖的聚合虚拟属性，如上面的 fullName 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:06:44.700

我想到了。随附的数据注释分部类有一个 classMetaData 类，您可以使用它为分部类设置元数据（即您的注释放在这里）。但是，聚合属性必须进入部分类（而不是元数据类）。

所以第二个部分类代码应该是这样的：

```
namespace MyProject.Models
{
[MetadataType(typeof(PersonMetaData))]
public partial class Person
{
    //this is where you put new aggregate properties
    public virtual string fullName { get { return firstName + " " + lastName; } }
}

public class PersonMetaData
{
    //this is where you put data annotations
    [Required]
    public string firstName { get; set; }
    [Required]
    public string lastName { get; set; }
} 

} 
```

# ruby-on-rails - 独角兽在由 capistrano 启动时失败

> ID：11911269
> 
> 赞同：0
> 
> 时间：2012-08-11T01:59:57.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano

当我通过 capistrano 任务启动独角兽并尝试访问我的应用程序时，我得到了这个

```
tarted GET "/" for xx.xxx.xxx at 2012-08-11 01:38:31 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 500 Internal Server Error in 87ms
** [Bugsnag] No API key configured, couldn't notify

ActionView::Template::Error (undefined method `split' for nil:NilClass):
    32:               </form>
    33:             </ul>
    34:           <ul class="nav pull-right">
    35:             <% if user_signed_in? %>
    36:               <li class="dropdown">
    37:                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    38:                   <%= current_user.name %>
  app/controllers/application_controller.rb:5:in `current_user'
  app/controllers/application_controller.rb:9:in `user_signed_in?'
  app/views/layouts/application.html.erb:35:in `_app_views_layouts_application_html_erb__3931886679734892787_26070680' 
```

此外`ActionView::Template::Error`，独角兽说没有配置busgnag API密钥，但是我已经在我的root的.bashrc和deploy的.bashrc上设置了密钥（deploy也是一个用户）
但是当我通过ssh访问服务器`ssh root@server`并尝试启动时独角兽与 capistrano 的任务发出的相同命令，一切正常......
我试图在 capistrano 上设置 root 用户并部署用户，无论是`use_sudo`真还是假......
我在这里错过了什么？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:19:58.067

你确定当你手动运行它时你是在生产模式下运行的吗？`undefined method`xxxx' for nil:NilClass` 当你有一个 nil 变量时发生。很多时候代码就像...

```
Articles.each do |article|
  article.title
end 
```

将失败并出现相同的错误，因为数据库在每个环境中的填充方式不同。我建议查看第 5 行`application_controller.rb`，看看该变量是否存在于生产和开发中。

此外，请确保您的`production.rb`文件中存在您的 bugsnap api 密钥。

# database - 开放式数据和数据类型的数据库结构和关联

> ID：11911271
> 
> 赞同：2
> 
> 时间：2012-08-11T02:00:09.603
> 
> 标签：database, cakephp, database-design, content-management-system

我正在尝试构建一个自定义 CMS 工具（是的，我知道 - 另一个 CMS），用户可以在其中创建任意数量的嵌套“节点”。

示例“节点”：餐馆、人、鞋子、大陆......任何东西。在每个节点内，可以有尽可能多的子节点，依此类推。

在浏览 Wordpress、Drupal 等时，我不断看到诸如“分类”和“术语”之类的表格。

这似乎是一件“正常”的事情，但我无法理解应该如何做或他们是如何做的。我假设这些表与整体结构和表关系有关，但是......在线搜索无法解释实际发生的情况或我将如何最好地为这种结构设计我的数据库。

* * *

**到目前为止我的想法**（显然没有被淘汰或者我不会在这里问）：

**1）存储已知的数据类型和bindModel（）：** 创建表`data_locations`，`data_texts`它们将具有各自的数据字段。所以 - 在`data_locations`表中，我有`city`, 和`longitude`, and `address`。在 data_texts 表中，我有`title`, `subtitle`, `content`, `author`.

然后，每次他们创建一个新的“节点”时，他们可以选择它应该有什么样的数据类型，我会用它`bindModel()`来创建关联（我猜？）。

这不会那么灵活，但可能更易于管理，并且可以更快地在...等上运行查询？不知道。

**2）具有单个“数据”表的每个节点的自定义字段：** 有一个`data`表和一个`fields`表......每个节点都会有很多`fields`- 每个都有一个类型和 maxLength ......等等。然后，在管理员中，我会列出这些字段，并且每个数据块`title`，`shoe_size`...等在表中都会有一行`data`与节点和字段相关。

这似乎更像我认为的“分类法”——但同样，我真的不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:49:48.800

您正在考虑使用哪个数据库？在我看来，图形数据库对于这类事情往往更自然。

在关系数据库中，这很棘手。任意深度的嵌套查询不自然（但可行），动态模式也不自然（通过谷歌查看“EAV 模式”以查看相关论点）并且很难很好地查询。

看看neo4j。我认为您可以直接自然地表达您的要求。

# c++ - const 如何使函数重载？

> ID：11911279
> 
> 赞同：3
> 
> 时间：2012-08-11T02:02:07.007
> 
> 标签：c++, constants, overloading

我用 C++ 编写了这段代码：

```
class Foo
{
public:
    int& fun(){return var;}       // 1st fun
    int fun() const {return var;}  // 2rd fun
 private:
    int var;
};
int main()
{
    Foo foo;
    int i = foo.fun();
    return 0;
} 
```

我知道 C++ 不能通过返回值来区分重载函数，但是为什么当我向第二个函数添加一个 const 时，重载可以工作？'const'做了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T02:05:43.583

编译器无法区分返回类型，因为返回值可以在执行赋值之前进行转换。另一方面，调用函数的对象是函数的参数（尽管是隐含的），因此编译器可以区分它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:04:47.263

const 的使用方式如下：

```
Foo inst1;
const Foo inst2;

inst1.fun();    // 1st fun
inst2.fun();    // 2nd fun 
```

函数名后面的 const 指的是隐式`this`参数。因此，对于 inst1 它将`Foo*`和对于 inst2 `const Foo*`。这将引导过载。

返回值不用于选择重载。同一层不允许具有相同参数集和不同类型返回值的方法/函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T02:12:39.190

对于它的价值，标准中的语言（§13.3.1/3,4）：

> 类似地，在适当的时候，上下文可以构造一个参数列表，其中包含一个隐含的对象参数来表示要操作的对象。由于实参和形参在它们各自的列表中按位置关联，因此约定是隐式对象形参（如果存在）始终是第一个形参，而隐含对象形参（如果存在）始终是第一个形参。
> 
> 对于非静态成员函数，隐式对象参数的类型是
> 
> —“对 cv X 的左值引用”，用于没有引用限定符或 & 引用限定符声明的函数
> 
> — 使用 && ref-qualifier 声明的函数的“对 cv X 的右值引用”，其中 X 是函数所属的类，cv 是成员函数声明上的 cv 限定。[ 示例：对于类 X 的 const 成员函数，假定额外参数的类型为“对 const X 的引用”。—结束示例]

# javascript - 需要一些指南来通过 Javascript Canvas 制作新的菜单

> ID：11911283
> 
> 赞同：-4
> 
> 时间：2012-08-11T02:03:27.687
> 
> 标签：javascript, html, canvas, html5-canvas

我要用画布制作一种新的菜单。这是我第一次使用画布。所以有几件事我需要你的帮助来启动这种菜单。这是一张图片：

![在此处输入图像描述](../Images/7301557de81443935231ead0c705bd6f.png)

**很抱歉给您带来不便。我编辑了这篇文章，唯一的问题是：**

**如果我们有n个流（上图中是3个流），那么平均计算每个区域的半径以绘制如上图的原理是什么？**

请给我你对这种菜单的建议或想法。我会感激的。提前感谢您的考虑，您的想法！祝你有美好的一天 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:53:40.817

上面例子中的半径肯定是白线的长度，所以你想要任何长度？

如果您想要将扇区平均分为弧长相等的 n 个子扇区，那么您需要决定中心的最大角度是多少，在上面的示例中是 90 度或 pi/2 弧度。

最终，最大角度、分段弧长、分段角度和半径都通过以下方式连接：

subsector_arc_length = 半径 * subsector_angle

subsector_angle = max_angle/n

或// subsector_arc_length = radius * max_angle/n（注意这些需要弧度）

但是，如果您的目标是将其绘制到画布上，则类似于：

```
var canvas = '<canvas id="canvas" width="500" height="500" style="border: 1px solid black; width: 500px; height: 500px; background: lightblue;"></canvas>'
document.body.innerHTML += canvas;
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

var max_angle = Math.PI/2; //rad - 90deg
var no_of_flows = 10; 
var radius = 200; //pixels

ctx.lineWidth = 5;
ctx.strokeStyle = '#333';
ctx.translate(250,350);
ctx.beginPath();
ctx.rotate(-Math.PI/2);
ctx.rotate(-Math.PI/2 + max_angle/2);
for (var i=0; i<no_of_flows; i++) {
    ctx.moveTo(0,0);
    ctx.lineTo(0, radius);
    ctx.stroke();
    ctx.rotate(-1*max_angle/(no_of_flows-1));
}; 
```

您的主要问题是您可能会在画布上生成更好的图像。+ 菜单的事件结构。

# css - 带有过渡和弹出的 CSS3 导航

> ID：11911293
> 
> 赞同：0
> 
> 时间：2012-08-11T02:05:42.193
> 
> 标签：css, navigation, css-transitions, modernizr

我正在制作一个`css3`菜单，但我无法让它完全按照我想要的方式工作。我对此很陌生，所以请耐心等待！:-)

**我想要的是：**

当您将鼠标悬停在顶级导航上时，我希望下拉菜单缓和并且我希望顶级导航向上滑动 20px 并且我希望顶级导航出现底部边框。这基本上就是它在 FF 中所做的事情。但是，当我这样做时，第二层导航得到了相同的处理。我不想要那个。我希望第二层和第三层导航只有一个基本的悬停在颜色上。我确实希望所有的悬停过渡都是平滑的，所以我也为此使用了一些 css3。

这些都不适用于 IE。另外，我知道我可以使用`Modernizr`polyfil 一些`js`来`css transitions`在旧浏览器中进行工作，但我不知道该怎么做。有人可以告诉我吗？

这是我的[jsfiddle](http://jsfiddle.net/imakeitpretty/wAUx7/) 。感谢你给与我的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:32:07.007

这应该可以解决您的问题：

[http://jsfiddle.net/NFEt4/](http://jsfiddle.net/NFEt4/)

基本上，您需要一些方法来覆盖子菜单的样式。我在嵌套的 ul 上创建了一个新类。

如果您还没有，我建议您查看 SMACSS (http://smacss.com/)，我认为这将有助于在您的 CSS 类中创建更灵活的架构。

至于modernizr 问题，也许您可​​以创建一个单独的问题以确保您得到足够好的答案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:37:36.880

我改变了这个：

```
ul#navigation li a:hover {
color:#acb453;
padding-top:0;
padding-bottom:10px;
border-bottom: 6px solid #4dbaf2; 
```

}

对此：

```
ul#navigation .topNav > a:hover {
color:#acb453;
padding-top:0;
padding-bottom:10px;
border-bottom: 6px solid #4dbaf2; 
```

}

并将“topNav”类添加到您的顶级导航中。topNav 类之后的子组合器将样式限制为仅第一个锚点。小提琴在这里：http: [//jsfiddle.net/zwVwh/](http://jsfiddle.net/zwVwh/)

# php - 从 tinymce 导出到 pdf/docx

> ID：11911299
> 
> 赞同：3
> 
> 时间：2012-08-11T02:06:00.883
> 
> 标签：php, pdf, tinymce, export, phpdocx

我使用 tinyMCE 编辑器，我用 mysql 将它的数据保存在我所看到的 html 中。

如何使用 php（服务器端）将我的用户数据导出为 pdf 和 docx？

我相信 phpDocx 的免费版缺少该功能（缺少 embedHTML 功能）

有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:32:34.170

您应该将您的 html 代码写入 html 文件服务器端，并使用像[这样](http://www.fpdf.org/?lang=en)的库来创建 pdf 文件。

# c++ - CreateThread 会干扰 VirtualAlloc 的使用吗？

> ID：11911303
> 
> 赞同：1
> 
> 时间：2012-08-11T02:07:13.633
> 
> 标签：c++, winapi, virtual-memory

分配的堆栈空间是否可能`CreateThread`干扰 的使用`VirtualAlloc`？我找不到任何讨论或文档来准确解释允许分配堆栈空间的位置......

以下更准确地说明了我的问题：

```
uint8_t *baseA = (uint8_t*)VirtualAlloc(NULL,1,MEM_RESERVE,PAGE_NOACCESS);

// Create a thread with the default stack size
HANDLE hThread = CreateThread(NULL,0,SomeThreadProc,NULL,NULL,NULL);

// Possibly create even more threads here.

// Can this ever fail in the absence of other allocators? It doesn't here...
uint8_t *baseB = (uint8_t*)VirtualAlloc(NULL,1,MEM_RESERVE,PAGE_NOACCESS);

// Furthermore, in this test, baseB-baseA == 65536 (unless the debugger did something),
// so nothing appeared between baseA and baseB... not even enough space for the
// full 64kb of wastage, as baseA points to 4096 bytes by itself 
```

如果它*确实*使用了 的一些类似物`VirtualAlloc`，有没有办法改变 Windows 在给定进程中分配堆栈空间的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T02:37:56.703

堆栈空间可以分配在进程地址空间的任何位置。现在没有这方面的文档，而且此类文档不太可能在未来出现。

您可以放心地假设线程和虚拟分配的创建是独立的。如果不是这样，很多东西都会被破坏。分配器不能给出重叠的地址范围。这是不可想象的。问题出在其他地方。

唯一可能看起来像相关性的东西 - 使用的内存量和虚拟地址空间碎片。在这种情况下，最新的请求将失败。

我从事内存分析实用程序。

![在此处输入图像描述](../Images/8e589df09b090e5a0858cad2817a4f66.png)

这张图片显示了每个分配大小的虚拟分配数量的分布。

![在此处输入图像描述](../Images/ac3433263e6b1a23d1de795d2957bd3c.png)

这是 32 位进程的地址空间内容示例（蓝色 - 已提交，洋红色 - 保留，绿色是空闲内存）。

我在这里写的都是基于真实的经历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:28:47.773

Windows NT 内核以高中断优先级处理内存分配操作，也是线程安全的方式。

这意味着一个进程中只有一个线程可以同时分配内存，这使得所有分配进程都是线程安全的（理论上）。堆栈分配和虚拟分配之间不应该有任何干扰。

此外，您应该记住您可以分配 1GB 的空间，但您的程序仍然只使用它的 2mb RAM。

那是因为windows“预先分配”了虚拟空间，但在你使用它之前它不会分配它（写在上面）。

实际上内存管理要复杂得多，但现在你可以确信没有分配操作应该干扰，因为 Windows 将你的进程锁定在一个核心上，延迟所有其他线程的分配请求，只要分配得到处理。（僵局）

*编辑：这也意味着如果您分配数百万个小位，分配和取消分配是一个需要性能的过程。由于这种死锁行为，分配/取消分配更大的内存区域总是更好。

# php - How can I display value of a div with a button click?

> ID：11911305
> 
> 赞同：1
> 
> 时间：2012-08-11T02:07:33.797
> 
> 标签：php, javascript, jquery, ajax, jquery-ui

I am currently working with a wmd editor and jQuery-UI tabs. I have created an ajax/js function that will submit (when next button is clicked) the `wmd-preview` value and then php echo the result in tab 2\. The problem is that I am not getting any results displayed. I am not looking for the `textarea` value but the div `#wmd-preview` value. How can I display the value of the div `wmd-preview` through my ajax/function?

**JS**

```
<script>
$(function () {
    var $tabs = $('#tabs').tabs({
        disabled: [0, 1],
        select: function () {
            $.ajax({
                type: "POST",
                url: "post_tabs.php",
                data: {
                    "wmd": $("#wmd-preview").val(),
                },
                success: function (result) {
                    $("#tab-2").html(result);
                }
            });
        }
    });

    $(".ui-tabs-panel").each(function (i) {
        var totalSize = $(".ui-tabs-panel").size() - 1;
        if (i != totalSize) {
            next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
        }
        if (i != 0) {
            prev = i;
            $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
        }
    });

    $('.next-tab').click(function () {
        var currentTab = $('#tabs').tabs('option', 'selected');
        if (
        (
        currentTab == 0 && /*(B)*/
        $.trim($('#wmd-input').val()).length > 0
        )
        ) {
            var tabIndex = $(this).attr("rel");
            $tabs.tabs('enable', tabIndex).tabs('select', tabIndex).tabs("option", "disabled", [0, 1]);
        } else {
            switch (currentTab) {
            case 0:
                alert('Please fill out all the required fields.', 'Alert Dialog');
                break;
            }
        }
        console.log("preventing default");
        return false;
    });

    $('.prev-tab').click(function () {
        var tabIndex = $(this).attr("rel");
        $tabs.tabs('enable', tabIndex).tabs('select', tabIndex).tabs("option", "disabled", [0, 1]);
        return false;
    });

});
</script> 
```

**PHP**

```
<?
if (isset($_POST['wmd'])){
    $wmd = $_POST['wmd']; 
    echo ('<div id="text_result"><span class="resultval"><h2>Textarea Echo result:</h2>'.$wmd.'</span></div>');
                       }
?> 
```

**HTML**

```
<div id="tab-1" class="ui-tabs-panel ui-tabs-hide">
    <div id="wmd-button-bar"></div>
    <textarea id="wmd-input" name="wmd-input" cols="92" rows="15" tabindex="6"></textarea>
    <div id="wmd-preview"></div>
</div>

<div id="tab-2" class="ui-tabs-panel ui-tabs-hide">

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:39:30.327

PHP code should start with `<?php` , yours start with `<?` which is incorrect.

When you see PHP code presented as text - it should tell you it is not running, this is why you keep getting output like `'.$wmd.''); } ?>` instead of real PHP echo output.

The other comment still stands as well - you should either use `$("#wmd-preview").html()` or `$("#wmd-input").val()` but you cannot use `val` on divs, it does not work.

In this scenario `$("#wmd-input").val()` is the better choice just because this is the reason `input` fields exist - to get input.

Let me know if there are more questions I can help with.

# php - php，html表单从readir传递变量

> ID：11911306
> 
> 赞同：0
> 
> 时间：2012-08-11T02:07:44.630
> 
> 标签：php, html, joomla, joomla2.5

这就是我想要做的，我正在阅读目录以在我的页面上显示文件夹，并使用 html `<form>`post 方法将文件夹显示为按钮（类型=图像），如您所见，文件夹名称将被读取readdir as `$entry`，从读取目录并将其显示为按钮图像的所有内容都可以正常工作，现在我希望能够将其传递`$entry`给下一个操作，即如果`$entry`读取 3 个文件夹，请举个例子：

-玻璃

-水

-岩石

如果我点击玻璃，下一页将是“玻璃”？

这是我的 index.php/1stpage 代码：

```
<?php
    $entry = readdir($handle);
    $i= -1;
    while($entry != null)

{       $defaultimage = "images/default.jpg";
        if($entry != '.' && $entry != '..' && $entry != null):?>

            <form name="form2" method="post" action="index.php/next_page">
            <input type="image" name="<?php echo '$entry'?>" 
              id="<?php echo "$entry"?>" title= "<?php echo "$entry"?>" 
              src="<?php echo "$defaultimage"?>" 
              Style=float:top;float:left;width:150px;height:120px;margin:10px;  
              value="submit">
            </form> 

<?php endif;
$i++;
$entry = readdir($handle);}
?> 
```

我应该在 index.php/1stpage 中更改什么以及我应该在 index.php/next_page 中添加什么以便能够传递文件夹名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:01:56.950

行动将是

```
 action=<?php echo ("/".$entry  ."")?> 
```

# ruby-on-rails - Ruby：没有要加载的文件——coffee/rails

> ID：11911307
> 
> 赞同：1
> 
> 时间：2012-08-11T02:07:51.320
> 
> 标签：ruby-on-rails, ruby, gemfile

我是一个 ruby​​ 新手。我在我的 mac 上创建了我的第一个 ruby​​ on rails 应用程序，名为“HelloRubyWeb”。然后是“cd HelloRuby”，但是当我输入命令“rails s”时，它返回了错误日志：

```
 /Library/Ruby/Gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:74:in `require': no such file to load -- coffee/rails (LoadError)
from /Library/Ruby/Gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:74:in `require'
from /Library/Ruby/Gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
from /Library/Ruby/Gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
from /Library/Ruby/Gems/1.8/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from /Users/admin/Ruby/HelloRuby/config/application.rb:7
from /Library/Ruby/Gems/1.8/gems/railties-3.2.7/lib/rails/commands.rb:53:in `require'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.7/lib/rails/commands.rb:53
from /Library/Ruby/Gems/1.8/gems/railties-3.2.7/lib/rails/commands.rb:50:in `tap'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.7/lib/rails/commands.rb:50
from script/rails:6:in `require'
from script/rails:6 
```

谁能帮我？很感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:44:07.377

kasperite 可能是正确的，在终端运行中：

`bundle`然后运行`rails s`

发布您遇到的错误（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-17T16:21:31.977

我有同样的问题，但在我的情况下，这是因为明确的咖啡导轨版本。

1) 删除严格设置的`coffee-rails`gem in`Gemfile`

2）运行`bin/bundle`

3) 运行`bin/bundle update`

4) 运行`bin/rails s`

如果您需要明确设置工作版本，只需`bin/bundle show 'coffee-rails'`从终端运行并复制版本号。

# php - php执行部分sql查询

> ID：11911308
> 
> 赞同：0
> 
> 时间：2012-08-11T02:07:51.010
> 
> 标签：php, sql, partial, execute

我有这个查询正在部分执行。只有`start_date`更新而不是描述。

```
 $query = "UPDATE cbv_ani_block
    SET start_date = today, description = '$desc'
    WHERE blocked_ani = '$blocked_ani'"; 
```

这是来自同一语句的回显，但如果我在 sql 中执行相同的语句它运行良好，问题是当我通过传递变量通过 php 运行它时。没有错误信息。

```
UPDATE cbv_ani_block
SET start_date = today, description = 'Test Number'
WHERE blocked_ani = '1-604-9615326'; 
```

# yii - Yii 目录分隔符 //

> ID：11911310
> 
> 赞同：0
> 
> 时间：2012-08-11T02:08:31.060
> 
> 标签：yii

在玩布局时，我在 Yii 中看到过这行代码：

```
<?php $this->beginContent('//layouts/main'); ?> 
```

通常我只看到一个正斜杠，但现在是双斜杠。而且，当我在上面的代码中删除一个正斜杠时，输出显示根本没有改变。

那么，你能告诉我为什么 Yii 使用双斜线而不是单斜线吗？他们是否返回相同的结果？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:42:54.510

在 Yii 上下文中，此示例`//layouts/main`将呈现为`protected/views/layouts/main.php`. 它是您的布局文件夹的路径。

如果存在非默认布局目录，则要使用双斜杠。例如，如果您有两个文件夹`layouts`并且`layouts-fancy`在 protected/views/{here} 下，您可以通过带有“//”的前缀路径切换到精美的布局。默认情况下，Yii 将使用`layouts`（参见[http://www.yiiframework.com/doc/guide/1.1/en/basics.view#layout](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#layout)）。

为了更好的测试，创建新的布局`protected/views/layout-fancy/main.php`并将变量添加`public $layout = '//layout-fancy/main.php';`到您的基本 Controller.php 中，看看会发生什么。

# php - ffmpeg 未正确编码“容器”

> ID：11911315
> 
> 赞同：0
> 
> 时间：2012-08-11T02:09:27.047
> 
> 标签：php, linux, ffmpeg, flowplayer

我正在尝试对使用 ffmpeg 上传到我们服务器的文件进行编码。

但是，当我们通过任何基于 Flash 的媒体播放器（FlowPlayer、JW Player）播放视频时，它会播放音频但不播放视频。当我们在桌面应用程序（VLC、QT、WMP）上播放它时，它运行良好。

这是我的编码命令：

`/usr/local/bin/ffmpeg -y -i {$in} -vcodec libx264 -acodec libfaac -ab 128k -ac 2 -b 300 -threads 4 -flags +loop -cmp +chroma -partitions 0 -subq 1 -trellis 0 -refs 1 -coder 0 -bufsize 10M -qcomp 0.6 -qmax 22 -qdiff 4 -level 30 {$out}`

`{$in}`是输入文件，`{$out}`是输出文件。

我们的 ffmpeg 版本是`N-41485-g1321e6e-syslint`

我对视频编码场景还是有点陌生​​，谁能看到我的编码字符串可能是赠品？

# java - 方向鼠标点的Java 2d旋转

> ID：11911316
> 
> 赞同：2
> 
> 时间：2012-08-11T02:09:56.873
> 
> 标签：java, rotation, 2d, image-rotation

到目前为止，我有一个 java 应用程序，我在其中画了一个圆圈（播放器），然后在顶部（枪管）上画了一个绿色矩形。我有它，所以当玩家移动时，枪管会随之移动。我希望它找到鼠标指向的位置，然后相应地旋转枪管。有关我的意思的示例，请查看我找到的此视频[http://www.youtube.com/watch?v=8W7WSkQq5SU](http://www.youtube.com/watch?v=8W7WSkQq5SU)看看当他移动鼠标时玩家图像有何反应？

这是到目前为止游戏的样子：

![我的进步](../Images/276a554169844a713d3dfcf8f03cfe58.png)

那么我该如何旋转它呢？顺便说一句，我不喜欢使用仿射变换或 Graphics2D 旋转。我希望有更好的方法。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T03:36:54.327

使用`Graphics2D`旋转方法确实是最简单的方法。这是一个简单的实现：

```
int centerX = width / 2;
int centerY = height / 2;
double angle = Math.atan2(centerY - mouseY, centerX - mouseX) - Math.PI / 2;

((Graphics2D)g).rotate(angle, centerX, centerY);

g.fillRect(...); // draw your rectangle 
```

如果您想在完成后删除旋转以便可以继续正常绘图，请使用：

```
Graphics2D g2d = (Graphics2D)g;
AffineTransform transform = g2d.getTransform();

g2d.rotate(angle, centerX, centerY);

g2d.fillRect(...); // draw your rectangle

g2d.setTransform(transform); 
```

`Graphics2D`无论如何都使用抗锯齿等是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:45:11.520

使用`AffineTransform`，对不起，我知道的唯一方法：P

```
public class RotatePane extends javax.swing.JPanel {

    private BufferedImage img;
    private Point mousePoint;

    /**
     * Creates new form RotatePane
     */
    public RotatePane() {

        try {
            img = ImageIO.read(getClass().getResource("/MT02.png"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addMouseMotionListener(new MouseAdapter() {

            @Override
            public void mouseMoved(MouseEvent e) {

                mousePoint = e.getPoint();

                repaint();

            }

        });

    }

    @Override
    public Dimension getPreferredSize() {

        return new Dimension(img.getWidth(), img.getHeight());

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g.create();

        double rotation = 0f;

        int width = getWidth() - 1;
        int height = getHeight() - 1;

        if (mousePoint != null) {

            int x = width / 2;
            int y = height / 2;

            int deltaX = mousePoint.x - x;
            int deltaY = mousePoint.y - y;

            rotation = -Math.atan2(deltaX, deltaY);

            rotation = Math.toDegrees(rotation) + 180;

        }

        int x  = (width - img.getWidth()) / 2;
        int y  = (height - img.getHeight()) / 2;

        g2d.rotate(Math.toRadians(rotation), width / 2, height / 2);
        g2d.drawImage(img, x, y, this);

        x = width / 2;
        y = height / 2;
        g2d.setStroke(new BasicStroke(3));
        g2d.setColor(Color.RED);
        g2d.drawLine(x, y, x, y - height / 4);
        g2d.dispose();

    }
} 
```

会产生这种效果

![旋转](../Images/d9c1416b3ed61b3a4cac04a267dcd089.png)

红线（从中心向外指出）将要跟随光标。

# iphone - 带有 iPhone 的 AutoCAD 3d 对象动画

> ID：11911318
> 
> 赞同：0
> 
> 时间：2012-08-11T02:10:29.060
> 
> 标签：iphone, animation, 3d, autocad

我需要知道 iPhone 开发中使用了哪些 autocad 扩展，实际上，我需要使用 autocad 3d 对象创建 iPhone 动画。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:44:24.730

看看[这篇文章](https://stackoverflow.com/questions/2019534/beginners-guide-to-3d-programming-in-iphone-sdk)。如果您希望在手机上呈现 3d 内容，它应该为您指明正确的方向。虽然我不知道要告诉你什么关于 autocad ......但我想我可以自信地说，尝试从 autocad 文件中渲染内容将会变得非常困难。

# qt - 如何允许 QWidget 扩展到 QTabWidget 中的整个选项卡？

> ID：11911323
> 
> 赞同：4
> 
> 时间：2012-08-11T02:11:43.347
> 
> 标签：qt, user-interface, tabs, resize, qsplitter

在布局和尺寸政策方面，我从来都不是很好，所以这可能是一个简单的答案，但这里就是这样。

当我向 QTabWIdget 添加新选项卡并将小部件设置为 QSplitter 时，拆分器将使用给定的全部空间。但是，当我在 QWidget 中放置一个 QSplitter 并使用 QWidget 添加一个选项卡时，它不会使用给定空间 - 只有拆分器大小是多少。

我想远离 QLayout，因为我在拆分器中有所有必要的小部件。我需要的是让我的 QWidget 使用选项卡中的所有空间（这应该允许 QSplitter 使用 QWIdget 中的所有空间）。

我在下面构建了一个示例，显示了比较以及结果。长长的问题 - 我怎样才能让场景一（在“标签一”内）看起来像场景二（“标签二”），并且仍然使用父 QWidget 作为拆分器？

```
ui->setupUi(this);
QTabWidget* pTab = new QTabWidget(this);
this->setCentralWidget(pTab);

//Splitter belongs to a QWidget, which belongs to the Tab. Does not use all space
QWidget* pWidget = new QWidget(this);
QSplitter* pSplitter = new QSplitter(pWidget);

QListWidget* pList = new QListWidget(this);
QListWidget* pList2 = new QListWidget(this);
pSplitter->addWidget(pList);
pSplitter->addWidget(pList2);
pTab->addTab(pWidget, "Tab One");

//Splitter belongs to the Tab. Uses all space
QListWidget* pList3 = new QListWidget(this);
QListWidget* pList4 = new QListWidget(this);

QSplitter* pSplitter2 = new QSplitter(this);
pSplitter2->addWidget(pList3);
pSplitter2->addWidget(pList4);
pTab->addTab(pSplitter2, "Tab Two"); 
```

![最终结果](../Images/281bb109ded654db2decf5cad70d9d8c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T03:43:07.023

改变这个：

```
QWidget* pWidget = new QWidget(this);
QSplitter* pSplitter = new QSplitter(pWidget); 
```

对此：

```
QWidget* pWidget = new QWidget(this);
QVBoxLayout* layout = new QVBoxLayout(pWidget);
QSplitter* pSplitter = new QSplitter(pWidget);
layout->addWidget(pSplitter); 
```

# variables - Coldfusion 8 -> 9 更新，功能不再工作

> ID：11911324
> 
> 赞同：3
> 
> 时间：2012-08-11T02:11:45.213
> 
> 标签：variables, coldfusion, coldfusion-9, coldfusion-8, application.cfc

帮助！！

只是将站点从一台服务器迁移到另一台服务器，coldfusion 版本正在从 cf8 更改为 cf9 [linux/centos]

这段代码以前可以工作：

```
cfinclude('../SQL/contact.sql.cfc');
form.phone = unFormatPhone(form.phone);
contactID = InsertContact(form); 
```

在包含的文件中是：

```
<cfcomponent output="false" >
<!--- -------------------------------- insert -------------------------------- --->
<cffunction name="InsertContact" returntype="numeric" output="false" access="public" > 
```

现在浏览页面时出现错误：

```
Variable INSERTCONTACT is undefined.

The error occurred in /var/www/vhosts/xxxxxx.com/httpdocs/Assets/XHTML/buy-my-car.cfm: line 54
Called from /var/www/vhosts/newride.ca/httpdocs/Application.cfc: line 232
Called from /var/www/vhosts/newride.ca/httpdocs/Application.cfc: line 230
Called from /var/www/vhosts/newride.ca/httpdocs/Application.cfc: line 162
52 :            cfinclude('../SQL/contact.sql.cfc');
53 :            form.phone = unFormatPhone(form.phone);
54 :            contactID = InsertContact(form);
55 :            
56 :            //insert vehicle with app id 
```

这里发生了什么？正在找到包含的文件，导致此问题的两个版本之间是否存在一些差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T04:57:50.667

好吧，我首先要说的是我只使用过 CF9，所以我无法评论你过去在 CF8 中能够做什么。但是，在 CF9 中，我很确定你不能那样使用 CFC。与您正在做的最接近的事情是使用`<cfinvoke>`. 请参阅此处：[http ://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7db3.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7db3.html)

但是，还要考虑将 cfc 实例化为一个对象，然后对该对象调用方法。我喜欢这样做，因为它让我想起了其他语言，例如 Java 和 C#。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T12:43:24.927

你确定它被包括在内吗？尝试：

```
include "../SQL/contact.sql.cfc";
form.phone = unFormatPhone(form.phone);
contactID = InsertContact(form); 
```

# android - 在服务器或客户端进行地图匹配

> ID：11911328
> 
> 赞同：0
> 
> 时间：2012-08-11T02:12:11.103
> 
> 标签：android

我正在android中创建一个应用程序。我需要使用我收集的数据执行地图匹配。通过推送我收集的数据或在客户端本身具有来自服务器的主数据副本，哪种方式更好地在服务器上执行地图匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:34:30.780

That depends on the amount of data and process time you your dealing with. In a traditional architecture your server should handle all the heavy load, but depending on the requirements you can decide to process it on the client.

Your should ask yourself questions like: How big is your data? What kind of match do you need to do? How expensive is the operation?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T18:39:12.840

Map Matching should be done on server as it requires some complex computation. Map Box and Google both have their proprietary Map Matching API's. There is open source OSRM Apis as well.

PS: I see this question is 5 years old and mostly people today already know whats the right way to do it

# android - Android 谷歌地图路径在缩放期间消失

> ID：11911330
> 
> 赞同：2
> 
> 时间：2012-08-11T02:12:16.610
> 
> 标签：android, google-maps

当我将 Google 地图缩放到特定级别时，我在自定义叠加层上绘图时遇到问题。我让我的逐项叠加提供了默认标记，并且 aver 编写了一个绘制方法，其中包含连接叠加项目的路径。接下来，我添加了带有地理坐标的叠加项目。当我运行我的应用程序时，它可以完美地显示所有带有默认标记的项目以及连接这些项目的线。然后我放大/缩小，一切都还好，但是当我放大得很近时，我的线消失了，但标记仍然可见。如果我缩小线出现恢复正常。Dis问题仅存在于实际设备上，从不存在于模拟器上。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:25:44.250

我的 Nexus 7 上也发生了同样的情况。我通过更改`android:targetSdkVersion="14"`为`android:targetSdkVersion="8"`AndroidManifest 解决了这个问题。

更新：您可以使用谷歌地图 api v2 (MapFragments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:41:41.597

您确定缩放后正在绘制的线的两个点（起点和终点）都在屏幕上可见吗？我已经意识到在我的设备上缩放时，如果矩形的起始和结束坐标不在屏幕上，即使中心应该是可见的，矩形也不会是 drwan。

问候。

# xml - XLST 将任意递归结构的 XML 数据集转换为组织结构图

> ID：11911337
> 
> 赞同：1
> 
> 时间：2012-08-11T02:14:21.290
> 
> 标签：xml, xslt, xpath, xslt-1.0

***我回答了我自己的问题，但希望对我如何改进它以提高速度、清晰度或更惯用的解决方案提出建设性的反馈。:)***

如果您想了解我的问题的原始上下文，请跳至***〜编辑〜或通读它。***

简而言之，我有一个如下所示的 XML 数据集：

```
<org> <!-- Organization -->
  <dep> <!-- Department -->
    <nm>Department</nm> <!-- Department Name -->
    <emps> <!-- Head Department Employees -->
      <emp> <!-- One of the Head Employees -->
        <!-- Some Data, ie., L Name, F Name, and etc. (Omitted) -->
      </emp>
      <emp>
         <!-- Omitted -->
      </emp>
    </emps>
    <deps> <!-- So-called "Sub-Departments" -->
      <dep>
        <nm>Sub Department</nm>
        <emps>
          <emp>
            <!-- Omitted -->
          </emp>
        </emps>
      </dep>
    </deps>
  </dep>
</org> 
```

这是一个非常小的样本，但关键是一个部门可以有任意数量的员工和任意数量的子部门。通常，这样的数据集会很重，高层（领导）的人很少，随着您进一步向下导航到子部门，人数会越来越多。我一直在尝试做的事情——实际上，就在今天刚刚取得了半突破——弄清楚如何将 XML 数据集转换为有点简单的 HTML 组织结构图。

我最初想出的是用战略性放置的“float：left”吐出嵌套的div；和“明确：两者；” 样式，看起来像这样：

```
+-------------------------------------------------------+
|                         Dep                           |
| +------------------------+                            |
| | +--------+ +---------+ |                            |
| | |  Emp   | |   Emp   | |                            |
| | +--------+ +---------+ |                            |
| +------------------------+                            |
| +---------------------------------------------------+ |
| | +----------------------+ +----------------------+ | |
| | |         Dep          | |          Dep         | | |  
| | | +--------+ +-------+ | | +--------+ +-------+ | | |
| | | |  Emp   | |  Emp  | | | |  Emp   | |  Emp  | | | |
| | | +--------+ +-------+ | | +--------+ +-------+ | | |
| | +----------------------+ +----------------------+ | |
| +---------------------------------------------------+ |
+-------------------------------------------------------+ 
```

为我粗糙的 ASCII 艺术道歉。

我绞尽脑汁想想出一个可以产生这个的 XSLT 转换，而不是：

```
+-------------------------------------------------------+
|                         Dep                           |
|             +------------------------+                |
|             | +--------+ +---------+ |                |
|             | |  Emp   | |   Emp   | |                |
|             | +--------+ +---------+ |                |
|             +------------------------+                |
| +---------------------------------------------------+ |
| | +----------------------+ +----------------------+ | |
| | |         Dep          | |          Dep         | | |  
| | | +--------+ +-------+ | | +--------+ +-------+ | | |
| | | |  Emp   | |  Emp  | | | |  Emp   | | Emp   | | | |
| | | +--------+ +-------+ | | +--------+ +-------+ | | |
| | +----------------------+ +----------------------+ | |
| +---------------------------------------------------+ |
+-------------------------------------------------------+ 
```

不能用浮动 div 真正做到这一点，虽然绝对定位有效，但唯一具有固定宽度的 div 是员工 div，所以我需要以某种方式获取所有包含元素的总宽度，以正确调整每个部门、部门、和员工 div。今天，我的想法是，我需要做的就是计算每个部门 div 中所有最底层员工 div 的数量，因为组织结构图往往从上到下呈扇形分布：

```
<xsl:template match="dep">
  <!-- Just assuming that dep's, deps's, and emps's have no margin, padding, or border
    for the sake of keeping this example simpler -->

  <xsl:variable name="emp_count"
    select="count(descendant::emp[parent::emps/parent::dep[count(child::deps)=0]])"/>

  <xsl:variable name="width" select="$emp_count * $emp_width"/>
  <xsl:variable name="mleft" select="$width div 2"/>

  <div style="position: absolute; left: 50%; width: {$width}px;
              margin-left: -{$mleft}px;">
    <xsl:apply-templates/>
  </div>
</xsl:template> 
```

简而言之，虽然上面省略了很多，但它有效，除非我有任何错别字。但！这就是问题所在。这假设该组织遵循历史悠久的“底重脚轻”传统。如何转换应该输出类似内容的组织文档？

```
+---------------------------------------------------------------+
|                             Dep                               |
| +-----------------------------------------------------------+ |
| | +--------+ +---------+ +--------+ +---------+ +---------+ | |
| | |  Emp   | |   Emp   | |  Emp   | |   Emp   | |   Emp   | | |
| | +--------+ +---------+ +--------+ +---------+ +---------+ | |
| +-----------------------------------------------------------+ |
|     +---------------------------------------------------+     |
|     | +----------------------+ +----------------------+ |     |
|     | |         Dep          | |          Dep         | |     |  
|     | | +--------+ +-------+ | | +--------+ +-------+ | |     |
|     | | |  Emp   | |  Emp  | | | |  Emp   | | Emp   | | |     |
|     | | +--------+ +-------+ | | +--------+ +-------+ | |     |
|     | +----------------------+ +----------------------+ |     |
|     +---------------------------------------------------+     |
+---------------------------------------------------------------+ 
```

啊......没有什么比一个角落案例更能破坏我最初认为可以解决整个星期困扰我的问题的东西了。事实上，这种极端情况可能永远不会出现。事实上，也许使用嵌套表而不是使用 div 可能更容易。

但是，现在我在这里，我想知道...

考虑到这种极端情况，如何计算顶级部门 div 的宽度，同时记住这种极端情况可能不止一次出现并且在层次结构中任意深处？

***~编辑~***

我想打开这个 XML 源文档：

```
<?xml version="1.0" encoding="UTF-8"?>

<dep>
  <nm>Dep</nm>

  <emp>
    <nm>Emp</nm>
  </emp>

  <emp>
    <nm>Emp</nm>
  </emp>

  <emp>
    <nm>Emp</nm>
  </emp>

  <dep>
    <nm>Sub Dep 1</nm>

    <emp>
      <nm>Emp</nm>
    </emp>

    <emp>
      <nm>Emp</nm>
    </emp>

    <dep>
      <nm>Sub Dep 1-1</nm>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>
    </dep>

    <dep>
      <nm>Sub Dep 1-2</nm>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>
    </dep>
  </dep>

  <dep>
    <nm>Sub Dep 2</nm>

    <emp>
      <nm>Emp</nm>
    </emp>

    <emp>
      <nm>Emp</nm>
    </emp>

    <emp>
      <nm>Emp</nm>
    </emp>

    <emp>
      <nm>Emp</nm>
    </emp>

    <dep>
      <nm>Sub Dep 2-1</nm>

      <emp>
        <nm>Emp</nm>
      </emp>
    </dep>

    <dep>
      <nm>Sub Dep 2-2</nm>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>
    </dep>
  </dep>

  <dep>
    <nm>Sub Dep 3</nm>

    <emp>
      <nm>Emp</nm>
    </emp>
  </dep>

  <dep>
    <nm>Sub Dep 4</nm>

    <emp>
      <nm>Emp</nm>
    </emp>

    <emp>
      <nm>Emp</nm>
    </emp>

    <dep>
      <nm>Sub Dep 4-1</nm>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>

      <dep>
        <nm>Sub Dep 4-1-1</nm>

        <emp>
          <nm>Emp</nm>
        </emp>

        <emp>
          <nm>Emp</nm>
        </emp>

        <emp>
          <nm>Emp</nm>
        </emp>

        <emp>
          <nm>Emp</nm>
        </emp>

        <dep>
          <nm>Sub Dep 4-1-1-1</nm>

          <emp>
            <nm>Emp</nm>
          </emp>
        </dep>

        <dep>
          <nm>Sub Dep 4-1-1-2</nm>

          <emp>
            <nm>Emp</nm>
          </emp>
        </dep>
      </dep>
    </dep>

    <dep>
      <nm>Sub Dep 4-2</nm>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>
    </dep>
  </dep>
</dep> 
```

...进入此 XML 结果文档：

```
<?xml version="1.0" encoding="UTF-8"?>

<deps emps-wide="16">
  <dep emps-wide="16">
    <nm>Dep</nm>

    <emps emps-wide="3">
      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>

      <emp>
        <nm>Emp</nm>
      </emp>
    </emps>

    <deps emps-wide="16">
      <dep emps-wide="5">
        <nm>Sub Dep 1</nm>

        <emps emps-wide="2">
          <emp>
            <nm>Emp</nm>
          </emp>

          <emp>
            <nm>Emp</nm>
          </emp>
        </emps>

        <deps emps-wide="5">
          <dep emps-wide="3">
            <nm>Sub Dep 1-1</nm>

            <emps emps-wide="3">
              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="0"/>
          </dep>

          <dep emps-wide="2">
            <nm>Sub Dep 1-2</nm>

            <emps emps-wide="2">
              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="0"/>
          </dep>
        </deps>
      </dep>

      <dep emps-wide="4">
        <nm>Sub Dep 2</nm>

        <emps emps-wide="4">
          <emp>
            <nm>Emp</nm>
          </emp>

          <emp>
            <nm>Emp</nm>
          </emp>

          <emp>
            <nm>Emp</nm>
          </emp>

          <emp>
            <nm>Emp</nm>
          </emp>
        </emps>

        <deps emps-wide="3">
          <dep emps-wide="1">
            <nm>Sub Dep 2-1</nm>

            <emps emps-wide="1">
              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="0"/>
          </dep>

          <dep emps-wide="2">
            <nm>Sub Dep 2-2</nm>

            <emps emps-wide="2">
              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="0"/>
          </dep>
        </deps>
      </dep>

      <dep emps-wide="1">
        <nm>Sub Dep 3</nm>

        <emps emps-wide="1">
          <emp>
            <nm>Emp</nm>
          </emp>
        </emps>

        <deps emps-wide="0"/>
      </dep>

      <dep emps-wide="6">
        <nm>Sub Dep 4</nm>

        <emps emps-wide="2">
          <emp>
            <nm>Emp</nm>
          </emp>

          <emp>
            <nm>Emp</nm>
          </emp>
        </emps>

        <deps emps-wide="6">
          <dep emps-wide="4">
            <nm>Sub Dep 4-1</nm>

            <emps emps-wide="3">
              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="4">
              <dep emps-wide="4">
                <nm>Sub Dep 4-1-1</nm>

                <emps emps-wide="4">
                  <emp>
                    <nm>Emp</nm>
                  </emp>

                  <emp>
                    <nm>Emp</nm>
                  </emp>

                  <emp>
                    <nm>Emp</nm>
                  </emp>

                  <emp>
                    <nm>Emp</nm>
                  </emp>
                </emps>

                <deps emps-wide="2">
                  <dep emps-wide="1">
                    <nm>Sub Dep 4-1-1-1</nm>

                    <emps emps-wide="1">
                      <emp>
                        <nm>Emp</nm>
                      </emp>
                    </emps>

                    <deps emps-wide="0"/>
                  </dep>

                  <dep emps-wide="1">
                    <nm>Sub Dep 4-1-1-2</nm>

                    <emps emps-wide="1">
                      <emp>
                        <nm>Emp</nm>
                      </emp>
                    </emps>

                    <deps emps-wide="0"/>
                  </dep>
                </deps>
              </dep>
            </deps>
          </dep>

          <dep emps-wide="2">
            <nm>Sub Dep 4-2</nm>

            <emps emps-wide="2">
              <emp>
                <nm>Emp</nm>
              </emp>

              <emp>
                <nm>Emp</nm>
              </emp>
            </emps>

            <deps emps-wide="0"/>
          </dep>
        </deps>
      </dep>
    </deps>
  </dep>
</deps> 
```

为了完整起见，这里是我用来生成*大部分*XML 结果文档的 XLST 转换：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:call-template name="recurse-deps"/>
  </xsl:template>

  <xsl:template name="recurse-deps">
    <deps emps-wide="">
      <xsl:for-each select="dep">

          <dep emps-wide="">
            <nm><xsl:value-of select="nm"/></nm>

            <emps emps-wide="">
              <xsl:for-each select="emp">

                  <emp>
                    <nm><xsl:value-of select="nm"/></nm>
                  </emp>

              </xsl:for-each>
            </emps>

            <xsl:call-template name="recurse-deps"/>
          </dep>

      </xsl:for-each>
    </deps>
  </xsl:template>

</xsl:stylesheet> 
```

请注意，我已经*概括*了我原来的问题。我们甚至不关心这将如何*显示*为组织结构图。这真的不是我试图学习在 XSLT 中解决的问题。

另请注意，我必须编辑 XML 结果文档，因为我——显然——不太清楚如何编写 XSLT 样式表来生成我想要的。否则，我不会在这里提问。:)

以下是我在尝试用 XSLT 表达时发现的困难，以及为什么我必须在运行该转换后手动编辑 XML 结果文档：

1.  假设每个*emp*元素都是 1 个单位宽，无论该单位是什么。让我们称之为一*英寸*，只是为了能够可视化它。

2.  每个*emps元素的宽度应与其中**emp*元素的数量一样宽。（因此，其中包含三个*emp元素的**emps*元素将是 3 英寸宽。）

**   每个*dep*元素都应与其*emps*元素或它的*deps*元素一样宽，以两者中最宽者为准。（因此，具有 3 英寸宽*emps*元素和 8 英寸宽*deps元素的**dep*元素将是 8 英寸宽。具有 5 英寸宽*emps*元素和 3 英寸宽*deps的**dep*元素元素将是 5 英寸宽。）

    ****   每个*deps*元素的宽度应与其所有*dep*元素的宽度之和一样宽。（因此，具有 3 英寸宽的*dep*、 5 英寸宽的*dep*和另一个 5 英寸宽的*dep的**deps*元素将是 13 英寸宽。）

    ****   一个部门（或部门）可以有任意数量的*emp*元素（或雇员）和任意数量的*dep*元素（或子部门），深度任意*。******** 

 ***那么，我想在 XSLT 中解决的问题是如何将通用且递归结构化的 XML 源文档转换为 XML 结果文档，其中每个（或大多数）元素都应该附加某种计算值，即取决于其子节点的相同或相似的计算值......等等......等等......一直到可能是“叶节点”。

快速编辑：多想一下，此类问题的一个类似示例是将“文件系统”XML 源文档转换为 XML 结果文档，其中将“文件计数”属性添加到每个“文件夹”中，显示其中的文件总数及其“子文件夹”，以及它们的“子文件夹”等等。

任何帮助学习如何做到这一点 - 即使......不。*尤其是*如果有不止一种惯用的方式来做到这一点 - 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:40:35.860

我想出了*一种*方法来做我一直想做的事情。

此 XSLT 样式表将 XML 源文档转换为所需的 XML 结果文档（在我的***~EDIT~***之后的问题中找到）。

在我看来，可能会有更好或更惯用的解决方案。我发现对 XML 源文档进行多次迭代，将结果树片段从一个转换流水线化到下一个转换，并且在每次迭代中只进行简单的更改帮助我找到了这个解决方案。如果我不采用这种方法，我几乎无法想象这个 XSLT 样式表会复杂得多。我敢说我不可能一口气做到这一点。

即便如此，我相信还有改进的空间（速度和/或清晰度）。这是为了帮助可能正在处理与我类似的问题的任何其他人，或者是为了建设性的批评和改进，我也将不胜感激：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version     = "1.0"
                xmlns:xsl   = "http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl = "urn:schemas-microsoft-com:xslt"
                xmlns:exsl  = "http://exslt.org/common"
                extension-element-prefixes = "exsl">

  <xsl:output method               = "xml"
              omit-xml-declaration = "no"
              indent               = "yes"
              encoding             = "UTF-8"/>

  <xsl:template match = "/">
    <xsl:variable name = "boxed-emps-and-deps">
      <xsl:call-template name = "box-emps-and-deps"/>
    </xsl:variable>

    <xsl:variable name = "added-emp-count-to-emps">
      <xsl:call-template name = "add-emp-count-to-emps">
        <xsl:with-param name = "last-pass" select = "$boxed-emps-and-deps"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:variable name = "added-emp-count-to-dep">
      <xsl:call-template name = "add-emp-count-to-dep">
        <xsl:with-param name = "last-pass" select = "$added-emp-count-to-emps"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:variable name = "added-emp-count-to-deps">
      <xsl:call-template name = "add-emp-count-to-deps">
        <xsl:with-param name = "last-pass" select = "$added-emp-count-to-dep"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:variable name = "recurred-dep-and-deps-emp-counts">
      <xsl:call-template name = "recur-dep-and-deps-emp-counts">
        <xsl:with-param name = "last-pass" select = "$added-emp-count-to-deps"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:copy-of select="exsl:node-set( $recurred-dep-and-deps-emp-counts )"/>
  </xsl:template>

  <xsl:template name = "box-emps-and-deps">
    <deps>
      <xsl:for-each select = "dep">
          <dep>
            <xsl:copy-of select = "nm"/>

            <emps>
              <xsl:for-each select = "emp">
                <xsl:copy-of select = "."/>
              </xsl:for-each>
            </emps>

            <xsl:call-template name = "box-emps-and-deps"/>
          </dep>
      </xsl:for-each>
    </deps>
  </xsl:template>

  <xsl:template name = "add-emp-count-to-emps">
    <xsl:param name = "last-pass"/>

    <xsl:for-each select = "exsl:node-set( $last-pass )/node()">
      <xsl:copy>
        <xsl:if test = "name( . ) = 'emps'">
          <xsl:attribute name = "emp-cnt">
            <xsl:value-of select = "count( emp )"/>
          </xsl:attribute>
        </xsl:if>

        <xsl:call-template name="add-emp-count-to-emps">
          <xsl:with-param name = "last-pass" select = "."/>
        </xsl:call-template>
      </xsl:copy>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name = "add-emp-count-to-dep">
    <xsl:param name = "last-pass"/>

    <xsl:for-each select = "exsl:node-set( $last-pass )/node()|@*">
      <xsl:copy>
        <xsl:if test = "name( . ) = 'dep'">
          <xsl:attribute name = "emp-cnt">
            <xsl:value-of select = "emps/@emp-cnt"/>
          </xsl:attribute>
        </xsl:if>

        <xsl:call-template name="add-emp-count-to-dep">
          <xsl:with-param name = "last-pass" select = "."/>
        </xsl:call-template>
      </xsl:copy>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name = "add-emp-count-to-deps">
    <xsl:param name = "last-pass"/>

    <xsl:for-each select = "exsl:node-set( $last-pass )/node()|@*">
      <xsl:copy>
        <xsl:if test = "name( . ) = 'deps'">
          <xsl:attribute name = "emp-cnt">
            <xsl:value-of select = "sum( dep/@emp-cnt )"/>
          </xsl:attribute>
        </xsl:if>

        <xsl:call-template name="add-emp-count-to-deps">
          <xsl:with-param name = "last-pass" select = "."/>
        </xsl:call-template>
      </xsl:copy>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name = "recur-dep-and-deps-emp-counts">
    <xsl:param name = "last-pass"/>
    <xsl:variable name = "top-deps-emp-count" select="exsl:node-set( $last-pass )/deps/@emp-cnt"/>

    <xsl:variable name = "redid-dep-emp-count">
      <xsl:call-template name = "redo-dep-emp-count">
        <xsl:with-param name = "last-pass" select = "$last-pass"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:variable name = "redid-deps-emp-count">
      <xsl:call-template name = "redo-deps-emp-count">
        <xsl:with-param name = "last-pass" select = "$redid-dep-emp-count"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:variable name = "new-top-deps-emp-count" select = "exsl:node-set( $redid-deps-emp-count)/deps/@emp-cnt"/>

    <xsl:choose>
      <xsl:when test = "$top-deps-emp-count = $new-top-deps-emp-count">
        <xsl:copy-of select = "$redid-deps-emp-count"/>
      </xsl:when>

      <xsl:otherwise>
        <xsl:call-template name = "recur-dep-and-deps-emp-counts">
          <xsl:with-param name = "last-pass" select = "$redid-deps-emp-count"/>
        </xsl:call-template>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template name = "redo-dep-emp-count">
    <xsl:param name = "last-pass"/>

    <xsl:for-each select = "exsl:node-set( $last-pass )/node()|@*">
      <xsl:choose>
        <xsl:when test = "name( . ) = 'emp-cnt' and name( ./.. ) = 'dep'">
          <xsl:attribute name = "emp-cnt">
          <xsl:choose>
            <xsl:when test = "./../deps/@emp-cnt &gt; ./../emps/@emp-cnt">
              <xsl:value-of select = "./../deps/@emp-cnt"/>
            </xsl:when>

            <xsl:otherwise>
              <xsl:value-of select = "./../emps/@emp-cnt"/>
            </xsl:otherwise>
          </xsl:choose>
          </xsl:attribute>
        </xsl:when>

        <xsl:otherwise>
          <xsl:copy>
            <xsl:call-template name="redo-dep-emp-count">
              <xsl:with-param name = "last-pass" select = "."/>
            </xsl:call-template>
          </xsl:copy>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name = "redo-deps-emp-count">
    <xsl:param name = "last-pass"/>

    <xsl:for-each select = "exsl:node-set( $last-pass )/node()|@*">
      <xsl:choose>
        <xsl:when test = "name( . ) = 'emp-cnt' and name( ./.. ) = 'deps'">
          <xsl:attribute name = "emp-cnt">
            <xsl:value-of select = "sum( ./../dep/@emp-cnt )"/>
          </xsl:attribute>
        </xsl:when>

        <xsl:otherwise>
          <xsl:copy>
            <xsl:call-template name="redo-deps-emp-count">
              <xsl:with-param name = "last-pass" select = "."/>
            </xsl:call-template>
          </xsl:copy>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```***

# iphone - 将 iPhone 应用程序提交到 App Store 时的公司名称

> ID：11911338
> 
> 赞同：2
> 
> 时间：2012-08-11T02:14:23.360
> 
> 标签：iphone, app-store

我是 Apple 开发者计划的个人会员。当我将我的应用程序提交到应用程序商店时，我的名字会显示为卖家，还是我可以输入不同的名称，特别是公司名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:45:19.987

如果我没记错的话，个人的名字就是通过个人账户显示为卖家的名字。如果您有企业会员资格，那么企业名称就会出现在那里。除了团队管理之外，这是业务选项的好处之一。

自从我上次提交应用程序以来，这可能在去年发生了变化，但我相当有信心它没有。如果有，请随时纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:22:46.997

是的你可以。卖家信息是您在 iTunes Connect 下放置的信息。

# xcode - XCode 不会突然构建 (4.3.3)

> ID：11911339
> 
> 赞同：1
> 
> 时间：2012-08-11T02:14:43.967
> 
> 标签：xcode, build

我去构建项目并突然收到消息。不知道可能是什么问题？

> 无法解析“MainMenu.xib”的 Interface Builder 插件依赖项。Xcode 4 缺少加载以下类所需的组件：SCNViewTemplate。确保已正确安装 Xcode。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:55:14.867

SCNViewTemplate / SceneKit 仅在 Mac OS X 10.8 中可用。

# php - simplexml_load_file 在“.get_query()”之前添加文本。

> ID：11911340
> 
> 赞同：0
> 
> 时间：2012-08-11T02:15:05.373
> 
> 标签：php, simplexml

我之前无法添加文本关键字“pdf”`'.get_query().'`

例子 ：

```
$q = simplexml_load_file('http://domain.com/find?q=pdf+'.get_query().'&format=xml'); 
```

所以如果 get_query 关键字的结果是：

macbook pro 将是 pdf macbook pro，sim cool 将是 pdf sim cool，鼠标垫将是 pdf 鼠标垫，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:25:52.160

而不是在`+`之后给一个空间，`pdf`这样它就变成了

```
$q = simplexml_load_file('http://domain.com/find?q=pdf '.get_query().'&format=xml'); 
```

# javascript - 隐藏/显示 js 代码无法在 IE8 或更低版本上运行

> ID：11911342
> 
> 赞同：0
> 
> 时间：2012-08-11T02:16:03.647
> 
> 标签：javascript, internet-explorer-8, show-hide

编写了一个练习和解决方案页面，带有启动显示或隐藏解决方案的 js 功能的按钮。它在最新的 FF、CH 和 IE 上完美运行，但在 IE8-7-6 上，当我单击按钮时，解决方案不显示，并且我在状态行中收到“页面错误”消息。我在网上搜索解决方案，尝试了“regsvr32 jscript.dll”，没有任何帮助。这是一个[jsFiddle](http://jsfiddle.net/QrzJg/)， js 在那里也不起作用，但这可能是因为我不知道如何正确使用它。无论如何，代码都可以查看。

有问题的代码是： 1\. 像这样的 html 按钮：

```
<button class="button100" onclick="reveal('sol2');">הצג</button> 
```

JS 'reveal()' 函数：

```
function reveal(pId){
        if(pId == 'all_sol'){
            for(var x in solArr){
                document.getElementById(x).innerHTML = "<button class=\"button100\" onclick=\"cover('" + x + "');\">הסתר</button>" + solArr[x];
            }
            document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"cover('" + pId + "');\">הסתר את כל הפתרונות</button>";
        }
        else {
            document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"cover('" + pId + "');\">הסתר</button>" + solArr[pId];
        }   
    } 
```

这是漏洞：HTML：

```
<!DOCTYPE html>

<html>

    <head>
        <meta http-equiv="content-type" content="text/html;charset=iso-8859-8-i" />
        <link rel="stylesheet" type="text/css" href="general_style.css" />
        <link rel="stylesheet" type="text/css" href="exercises_style.css" />
        <script type="text/javascript" src="exercises_script.js"></script>
        <title> תרגילים </title>
    </head>

    <body>
        <div id="container">
            <div id="header">
                <div class="padding_10">
                    <img src="logo.png"></img>
                </div>
                <ul class="nav_bar">
                    <li><a href="operators.htm"> אופרטורים </a></li>
                    <li id="current_nav_bar_li"><a href="exercises.htm"> תרגילים </a></li>
                    <li><a href="concepts.htm"> מושגים </a></li>
                    <li><a href="template.htm">תבנית</a></li>
                </ul>
            </div>
            <div id="body">
                <div class="padding_10">

                    <h1> תרגילים ופתרונות </h1>
                    <p> להלן תרגילים שניתנו במהלך הקורס, בצירוף פתרונותיהם. בתרגילים חישוביים הפתרון מפרט כל פעולה חישובית ש JavaScript תבצע באם יוזן התרגיל לחישוב. השורה הראשונה מציגה את הביטוי המוזן לחישוב, כל שורה מכאן ואילך מציגה פעולה אחת של JavaScript. </p>

                    <h2> אלגוריתם ראשון </h2>
                    <h3> תרגיל 1 </h3>
                    <p>
                        הבת של טל יודעת:

                        <ol>
                            <li> לצייר ולכתוב </li>
                            <li> להוסיף 1 לכל מספר </li>
                            <li> להכפיל מספר בעצמו </li>
                            <li> לבדוק זהות בין שני מספרים </li>
                        </ol>

                        יש לכתוב אלגוריתם שבאמצעותו תוכל הבת של טל לחשב שורש ריבועי עבור מספר נתון.
                    </p>

                    <h3> פתרון תרגיל 1 </h3>
                    <p id="sol1">
                        <button class="button100" onclick="reveal('sol1');">הצג</button>
                    </p>

                    <h2> אופרטורים '+', '-', '*' </h2>
                    <h3> תרגיל 2 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            3 + 2 + 5 + 7 * 3 + 4 * 2 * 3
                        </div>
                    </p>

                    <h3> פתרון תרגיל 2 </h3>
                    <p id="sol2">
                        <button class="button100" onclick="reveal('sol2');">הצג</button>
                    </p>

                    <h3> תרגיל 3 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            5 - 2 * 4 * 3 - 7 - 9 - 4 - 2 - 1 * 3
                        </div>
                    </p>

                    <h3> פתרון תרגיל 3 </h3>
                    <p id="sol3">
                        <button class="button100" onclick="reveal('sol3');">הצג</button>
                    </p>

                    <h2> סוגריים </h2>
                    <h3> תרגיל 4 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            (2 + 3) + 5 + (4 + (2 * 2 + 5) - 2) + 3 * 3
                        </div>
                    </p>

                    <h3> פתרון תרגיל 4 </h3>
                    <p id="sol4">
                        <button class="button100" onclick="reveal('sol4');">הצג</button>
                    </p>

                    <h2> מודולו </h2>
                    <h3> תרגיל 5 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            5 % 2 % 5
                        </div>
                    </p>

                    <h3> פתרון תרגיל 5 </h3>
                    <p id="sol5">
                        <button class="button100" onclick="reveal('sol5');">הצג</button>
                    </p>

                    <h3> תרגיל 6 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            5 * 3 % 4 * 1 % 6
                        </div>
                    </p>

                    <h3> פתרון תרגיל 6 </h3>
                    <p id="sol6">
                        <button class="button100" onclick="reveal('sol6');">הצג</button>
                    </p>

                    <h2> שמות משתנים </h2>
                    <h3> תרגיל 7 </h3>
                    <p>
                        האם שמות המשתנים להלן חוקיים?
                        <div dir="ltr">
                            <ol class="margin_left">
                                <li> --- </li>
                                <li> ______ </li>
                                <li> 0_ </li>
                                <li> a_a </li>
                                <li> a1321 </li>
                                <li> ab 12 </li>
                                <li> var </li>
                            </ol>
                        </div>
                    </p>

                    <h3> פתרון תרגיל 7 </h3>
                    <p id="sol7">
                        <button class="button100" onclick="reveal('sol7');">הצג</button>
                    </p>

                    <h2> השמה </h2>
                    <h3> תרגיל 8 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            var x, y, z;<br />
                            z = x = 2 * 2 + 3 + ( 4 + 5 ) + ( x = 3 ) * ( y = 2 )
                        </div>
                    </p>

                    <h3> פתרון תרגיל 8 </h3>
                    <p id="sol8">
                        <button class="button100" onclick="reveal('sol8');">הצג</button>
                    </p>

                    <h3> תרגיל 9 </h3>
                    <p>
                        פתור את התרגיל על פי סדר הקדימות ב- JavaScript:
                        <div dir="ltr">
                            var x, y, z;<br />
                            x = ( x = y = z = ( 2 * 5 ) + 3 + 2 % 2 ) % ( z = 2 - 1 * 3 )
                        </div>
                    </p>

                    <h3> פתרון תרגיל 9 </h3>
                    <p id="sol9">
                        <button class="button100" onclick="reveal('sol9');">הצג</button>
                    </p>

                    <p id="all_sol">
                        <button class="button100" onclick="reveal('all_sol');">הצג את כל הפתרונות</button>
                    </p>
                </div>
            </div>
            <div id="footer">
                <ul>
                    <li> כל הזכויות על החומר הלימודי באתר שמורות לטל שחור </li>
                    <li> האתר נבנה על ידי יחזקאל יובל </li>
                    <li> 050-9035454 </li>
                    <li> yovel.zack@gmail.com </li>
                </ul>
            </div>
        </div>
    </body>

</html> 
```

和JS：

```
var solArr = new Object();

solArr.sol1 = "<ol><li> אם המספר הוא 0 או 1, הוא גם השורש של עצמו. אמרי לאבא שהמספר הוא השורש. אחרת המשיכי לשלב הבא.</li><li> ציירי שלושה ריבועים. </li><li> באמצעי רשמי את המספר שאת השורש שלו צריך לחשב. </li><li> בשמאלי רשמי את המספר 2.</li><li> בימני רשמי את התוצאה של הכפלת המספר הרשום בריבוע השמאלי בעצמו. </li><li> בדקי אם המספר הרשום בריבוע הימני זהה למספר הרשום בריבוע האמצעי. </li><li> אם יש זהות, אמרי לאבא שהמספר הרשום בריבוע השמאלי הוא השורש. אחרת המשיכי לשלב הבא. </li><li> אם אין זהות,  הוסיפי למספר הרשום בריבוע השמאלי 1 וחיזרי לשלב 5.</li></ol>";

solArr.sol2 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>3 + 2 + 5 + 7 * 3 + 4 * 2 * 3</li><li>3 + 2 + 5 + 21 + 4 * 2 * 3</li><li>3 + 2 + 5 + 21 + 8 * 3</li><li>3 + 2 + 5 + 21 + 24</li><li>5 + 5 + 21 + 24</li><li>10 + 21 + 24</li><li>31 + 24</li><li>55</li></ol></div>";

solArr.sol3 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>5 - 2 * 4 * 3 - 7 - 9 - 4 - 2 - 1 * 3</li><li>5 - 8 * 3 - 7 - 9 - 4 - 2 - 1 * 3</li><li>5 - 24 - 7 - 9 - 4 - 2 - 1 * 3</li><li>5 - 24 - 7 - 9 - 4 - 2 - 3</li><li>-19 - 7 - 9 - 4 - 2 - 3</li><li>-26 - 9 - 4 - 2 - 3</li><li>-35 - 4 - 2 - 3</li><li>-39 - 2 - 3</li><li>-41 - 3</li><li>-44</li></ol></div>";

solArr.sol4 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>(2 + 3) + 5 + (4 + (2 * 2 + 5) - 2) + 3 * 3</li><li>() + 5 + () + 3 * 3</li><li>() + 5 + () + 9</li><ol class=\"margin_left\"><li>2 +3</li><li>5</li></ol><li>5 + 5 + () + 9</li><li>10 + () + 9</li><ol class=\"margin_left\"><li>4 + () - 2</li><ol class=\"margin_left\"><li>2 * 2 + 5</li><li>4 + 5</li><li>9</li></ol><li>4 + 9 - 2</li> <li>13 - 2</li> <li>11</li></ol><li>10 + 11 + 9</li><li>21 + 9</li><li>30</li></ol></div>";

solArr.sol5 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>5 % 2 % 5</li><li>1 % 5</li><li>1</li></ol></div>";

solArr.sol6 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>5 * 3 % 4 * 1 % 6</li><li>15 % 4 * 1 % 6</li><li>3 * 1 % 6</li><li>3 % 6</li><li>3</li></ol></div>";

solArr.sol7 = "<div dir=\"ltr\"><table><tr><td> --- </td><td> לא חוקי </td></tr><tr><td> ______ </td><td> חוקי </td></tr><tr><td> 0_ </td><td> לא חוקי </td></tr><tr><td> a_a </td><td> חוקי </td></tr><tr><td> a1321 </td><td> חוקי </td></tr><tr><td> ab 12 </td><td> לא חוקי </td></tr><tr><td> var </td><td> לא חוקי </td></tr></table></div>";

solArr.sol8 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>var x, y, z</li><li>z = x = 2 * 2 + 3 + ( 4 + 5 ) + ( x = 3 ) * ( y = 2 )</li><li>z = x = 2 * 2 + 3 + () + () * ()</li><li>z = x = 4 + 3 + () + () * ()</li><ol><li>x = 3</li><li>3//x == 3</li></ol><ol><li>y = 2</li><li>2//y == 2</li></ol><li>z = x = 4 + 3 + () + 3 * 2</li><li>z = x = 4 + 3 + () + 5</li><li>z = x = 7 + () + 5</li><ol><li>4 + 5</li><li>9</li></ol><li>z = x = 7 + 9 + 5</li><li>z = x = 16 + 5</li><li>z = x = 21</li><li>z = 21//x == 21</li><li>21//z == 21</li></ol></div>";

solArr.sol9 = "<div dir=\"ltr\"><ol class=\"margin_left\"><li>x = ( x = y = z = ( 2 * 5 ) + 3 + 2 % 2 ) % ( z = 2 - 1 * 3 )</li><li>x = () % ()</li><ol><li>x = y = z = () + 3 + 2 % 2</li><li>x = y = z = () + 3 + 0</li><li>x = y = z = () + 3</li><ol><li>2 * 5</li><li>10</li></ol><li>x = y = z = 10 + 3</li><li>x = y = z = 13</li><li>x = y = 13 //z == 13</li><li>x = 13 //y == 13</li><li>13 //x == 13</li></ol><li>x = 13 % ()</li><ol><li>z = 2 - 1 * 3</li><li>z = 2 - 3</li><li>z = -1</li><li>-1 //z == -1</li></ol><li>x = 13 % -1</li><li>x = 0</li><li>0 //x == 0</li></ol></div>";

function reveal(pId){
    if(pId == 'all_sol'){
        for(var x in solArr){
            document.getElementById(x).innerHTML = "<button class=\"button100\" onclick=\"cover('" + x + "');\">הסתר</button>" + solArr[x];
        }
        document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"cover('" + pId + "');\">הסתר את כל הפתרונות</button>";
    }
    else {
        document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"cover('" + pId + "');\">הסתר</button>" + solArr[pId];
    }   
}

function cover(pId){
    if(pId == "all_sol"){
        for(var x in solArr){
            document.getElementById(x).innerHTML = "<button class=\"button100\" onclick=\"reveal('" + x + "');\">הצג</button>";
        }
        document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"reveal('" + pId + "');\">הצג את כל הפתרונות</button>";
    }
    else{
        document.getElementById(pId).innerHTML = "<button class=\"button100\" onclick=\"reveal('" + pId + "');\">הצג</button>";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:24:12.613

呃，很多东西在 IE6 或 7 上都不起作用。我建议你放弃对它们的支持。连微软都不支持了！但是，如果您真的需要继续执行此操作，请使用 jQuery，它应该可以解决您的问题（如果使用正确）

# html - CSS Overridden：为什么搜索框不能正确浮动？

> ID：11911344
> 
> 赞同：0
> 
> 时间：2012-08-11T02:16:16.550
> 
> 标签：html, css, slider, nivo-slider

我完全不知道为什么我不能将搜索框对齐到左边

搜索和 RSS 提要在测试页面上对齐：

[http://scottjaxon.com/devsite/testnivo48.html](http://scottjaxon.com/devsite/testnivo48.html)

因为它在主页上（用图片而不是 nivo 滑块） [http://scottjaxon.com/devsite/index.html](http://scottjaxon.com/devsite/index.html)

我不明白。我必须错过最小的东西！

```
#wrapper #user1 #feahome #searchhome {
float: right;
color: #FFFFFF;
height: 22px;
margin-top: 8px;
padding: 0px 20px 0px 20px; 
```

还是与 NivoSlider CSS 相关？

```
.nivoSlider {
position:relative;
width:100%;
height:auto;
overflow: hidden;
}
.nivoSlider img {
position:absolute;
top:0px;
left:0px;
}
.nivo-main-image {
display: block !important;
position: relative !important; 
width: 100% !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:30:25.720

[我正在查看两者的 CSS，与http://scottjaxon.com/devsite/index.html](http://scottjaxon.com/devsite/index.html)的 CSS 相比，我在您的 CSS 中看到的唯一不同之处是：

```
#wrapper #user1 #feahome #searchhome {
float: LEFT; // the working version has it floated left as well
color: #FFFFFF;
height: 22px;
margin-top: 8px;
padding: 0px 20px 0px 20px; 
```

试一试，看看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:59:36.920

您的 index.html 和 testnivo48.html 具有不同的 dom 结构。

在 index.html 中，**feahome** div 标签是**rsshome**和**searchhome** div 标签的父标签；但在 testnivo48.html 中，它们都处于同一级别。

这就是为什么以下 css 规则（在[http://scottjaxon.com/devsite/css/style.css](http://scottjaxon.com/devsite/css/style.css)中）被应用于 index.html，但在 testnivo48.html 中被忽略

```
#wrapper #user1 #feahome #searchhome {
    ...
} 
```

修复 html 后，您的问题可能会得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T03:46:40.677

这可能是一个优先级问题。使用`div#searchhome`将赋予它更高的优先级。

# python - Django：Django 无法识别 post 变量

> ID：11911345
> 
> 赞同：0
> 
> 时间：2012-08-11T02:16:40.373
> 
> 标签：python, django

我可能错过了一些非常基本的东西，但是当我尝试通过以下方式访问帖子变量时：`request['title']`在函数中，我收到此错误：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/ajax/drafts/create

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Knights',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/views.py" in document_create
  179\.     title = request.POST['title']
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/utils/datastructures.py" in __getitem__
  258\.             raise MultiValueDictKeyError("Key %r not found in %r" % (key, self))

Exception Type: MultiValueDictKeyError at /ajax/drafts/create
Exception Value: "Key 'title' not found in <QueryDict: {}>" 
```

该函数的完整代码如下：

```
def document_create(request):
    user = request.user
    title = request.POST['title']
    if (title != ''):
        Draft.objects.create(content='Your content goes here', user=user, title=title) 
```

列出的后变量是这样的：

```
POST:
title = u'sdff' 
```

编辑：另外，当我使用 for 循环列出项目时，会出现 title 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T02:36:14.350

导致错误的请求是 GET，您正在尝试`title`从 POST 字典中获取参数的值。将您的代码更改为：

```
def document_create(request):
    user = request.user
    title = request.GET['title']
    if (title != ''):
        Draft.objects.create(content='Your content goes here', user=user, title=title) 
```

或者，您可以测试请求是 GET 还是 POST，检查`request.method`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:37:03.543

你确定你的请求真的是一个 POST 吗？对我来说，您似乎正在尝试从 POST 请求中检索数据，但该查询实际上是 GET 请求。

此外，您应该使用`if 'title' in request.POST:`检查请求中是否存在变量...

问候

艾蒂安

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T02:38:09.577

首先，这是一个 GET 查询，因此 POST 字典将为空。您的意思是`method='POST'`在 HTML 中设置表单元素吗？

其次，`KeyError`意味着密钥不在`POST`字典中。你应该这样做：

```
title = request.POST.get('title', None)
if title is None:
    ... 
```

如果密钥不在`title`.`None``request.POST`

# ruby-on-rails - Rails 3：Recaptcha 名称错误

> ID：11911349
> 
> 赞同：1
> 
> 时间：2012-08-11T02:17:16.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, recaptcha

使用 reCaptcha 在我的表单上按提交时出现此错误：

```
NameError in PostsController#create

undefined local variable or method `verify_captcha' for #<PostsController:0x007fcf52e84b48> 
```

我安装了 gem，其中包含来自 recaptcha 网站的注册私钥和公钥以及配置文件中的密钥。我已经运行了“捆绑安装”。验证码适用于表单，因为我可以刷新新代码。

```
#gemfile
 gem "recaptcha", :require => "recaptcha/rails"

#controller
    respond_to do |format|
          if verify_captcha and @post.save
            format.html { redirect_to @post, notice: 'Post was successfully created.' }

          else
            format.html { render action: "new" }         
          end
        end 
```

为什么 rails 不能识别 Recaptcha gem 库中的“verify_captcha”方法？有谁知道修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:26:28.403

我相信方法是被调用的`verify_recaptcha`，不是的`verify_captcha`。

# c++ - 如何使用live555流媒体转发

> ID：11911352
> 
> 赞同：0
> 
> 时间：2012-08-11T02:17:52.057
> 
> 标签：c++, video-streaming, h.264, ondemand, live555

我使用 Live555 h.264 流客户端从 IP 摄像机查询帧数据包，我使用 ffmpeg 解码缓冲区并通过 OpenCV 分析帧。（这些管道基于[testRTSPClient](http://www.live555.com/liveMedia/doxygen/html/testRTSPClient_8cpp-source.html)示例，我在DummySink::afterGettingFrame() by ffmpeg)

现在我想将帧实时流式传输到另一个客户端（远程客户端）OnDemand模式，帧可能会添加分析结果（边界框，文本等），如何使用Live555来实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:48:27.503

好吧，最好的办法是重新编码结果帧（带有边界框等），并将其传递给 RTSPServer 进程，该进程将允许您使用 rtsp url 连接到它，并将编码的数据流式传输到任何兼容的 rtsp 客户端. 有关如何执行此操作的常见问题解答有一个很好的参考[http://www.live555.com/liveMedia/faq.html#liveInput](http://www.live555.com/liveMedia/faq.html#liveInput)它将引导您完成所采取的步骤，并提供示例源代码，您可以根据需要进行修改.

# java - 使用 android sdk 检索通话记录

> ID：11911353
> 
> 赞同：0
> 
> 时间：2012-08-11T02:18:20.473
> 
> 标签：java, android

我想知道应用程序是否有办法查看通话记录并将其保存为文件或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:13:41.667

如果授予权限 Android 应用程序可以访问通话记录。调用日志的访问方式与其他数据存储一样。

```
import android.app.Activity;
import android.os.Bundle;
import android.provider.CallLog;
import android.provider.CallLog.Calls;
import android.widget.TextView;
import android.database.Cursor;

public class TestingData extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView view = (TextView) findViewById(R.id.hello);
    String[] projection = new String[] {
            Calls.DATE
            , Calls.NUMBER
            , Calls.DURATION
    };
   Cursor mCur = managedQuery(CallLog.Calls.CONTENT_URI,
            projection, Calls.DURATION +"<?", 
                    new String[] {"60"},
                    Calls.DURATION + " ASC");
    mCur.moveToFirst();

    while (mCur.isAfterLast() == false) {
          for (int i=0; i<mCur.getColumnCount(); i++) {
              view.append("n" + mCur.getString(i));
          }
          mCur.moveToNext();
    }

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:21:47.327

您是否尝试过[CallLog](http://developer.android.com/reference/android/provider/CallLog.html)提供程序？
这可以为您提供您正在寻找的信息。

# python - Route GAE webapp2 中的可选 URL 参数

> ID：11911354
> 
> 赞同：4
> 
> 时间：2012-08-11T02:18:37.563
> 
> 标签：python, regex, google-app-engine, url-routing

我对 Python 和 GAE 真的很陌生。我正在为一些测试数据设置一个基本的 CRUD 应用程序，并试图为管理页面获取一些路由。我想使用同一个页面来创建和编辑一个对象。所以基本上我想要：

```
/admin/edit/<id> 
```

where`<id>`是可选的，`/admin/edit`将路由到同一页面。我尝试添加`<id:\w*>`到路由，然后允许我在不提供 id 的情况下访问页面，但是当我提供 id 时，我收到了 404。然后我尝试`<id:\w+>`得到一个 404 有和没有 id。我运气不太好。

任何人都可以帮我解决我需要的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:51:09.320

您可以设置一个正则表达式来解析 URL 中的 ID。这是一个使用 webapp2 的非常具有代表性的示例：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/property/(.*)', PropertyHandler)],
                              debug=True) 
```

并且您设置您的请求处理程序以接受附加参数：

```
class PropertyHandler(webapp2.RequestHandler):
    def get(self, propertyId): 
```

对于现实世界的实现，您希望对正则表达式更具体一些，并向处理程序添加验证，以防您收到垃圾或没有 ID。

# c# - 将字符串数组分组

> ID：11911359
> 
> 赞同：2
> 
> 时间：2012-08-11T02:20:59.560
> 
> 标签：c#

我有一个包含 3000 个单词的字符串数组。如何使用 LINQ 将数组分成十组。每十个项目应存储在一个变量中。结果应该是一个包含组的新数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:25:44.463

假设单词由单个空格分隔，您可以像这样拆分和重新分组：

```
var res = longWord
    .Split(' ').
    .Select((s, i) => new { Str = s, Index = i })
    .GroupBy(p => p.Index / 10)
    .Select(g => string.Join(" ", g.Select(v => v.Str))); 
```

# iphone - 在 Pinterest 和其他类似应用程序上看到的自定义图像选择器？

> ID：11911361
> 
> 赞同：0
> 
> 时间：2012-08-11T02:21:35.133
> 
> 标签：iphone, ios, uitabbarcontroller, uiimagepickercontroller

如何模拟图片中的标签栏/相机行为？
我见过许多显示非常相似行为的应用程序，我怀疑可能有一个库来处理它？

您可以在标签栏控制器中点击相机图标。
![在此处输入图像描述](../Images/238d48163e6e6a615805ead422ae656a.png)

它会打开相机，您还可以通过单击右侧的按钮访问您的相册。 ![在此处输入图像描述](../Images/6b68049ab9a86ff091b810f1f5909510.png)

# jquery - 为什么即使缺少 Access-Control-Allow-Headers，CORS 请求也会成功？

> ID：11911363
> 
> 赞同：1
> 
> 时间：2012-08-11T02:21:46.597
> 
> 标签：jquery, http, http-headers, cors

引用[Opera 文档](http://dev.opera.com/articles/view/dom-access-control-using-cross-origin-resource-sharing/#AccessControlAllowHeaders)（我找到的第一个链接）：

> 标准或自定义标头是 Access-Control-Allow-Headers 的适当值。要使跨域请求成功，其值必须匹配（或包含）Access-Control-Request-Headers 标头的值。

我正在使用 jQuery 发送请求。如果我注释掉`setRequestHeader`：

```
$(function() {            
    $.ajax({
        url: 'http://silex.local/users',
        method: 'GET',
        beforeSend : function(req) {
            //req.setRequestHeader('Authorization', 'FID ds7sd6:32n8942b3672n2');
        }
    });
}); 
```

它不应该工作，因为**服务器正在响应**：

```
HTTP/1.0 200 OK
Date: Sat, 11 Aug 2012 02:15:14 GMT
Server: Apache/2.2.22 (Win32) PHP/5.3.14
X-Powered-By: PHP/5.3.14
Cache-Control: no-cache
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, PATCH, DELETE
Access-Control-Allow-Headers: Authorization
Connection: close
Content-Type: application/json; charset=utf-8 
```

当客户**请求时**：

```
GET http://silex.local/users HTTP/1.1
Host: silex.local
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: */*
Accept-Language: it-it,it;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Proxy-Connection: keep-alive
Referer: http://localhost/test.html
Origin: http://localhost
Cache-Control: max-age=0 
```

我错过了什么？抱歉，如果这是一个奇怪的问题，我第一次使用 CORS...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T03:11:22.260

我认为您误解了`Access-Control-Allow-Headers`它的作用（措辞不佳的报价无济于事）。它允许服务器告诉浏览器哪些标头可以*接受*跨域 XHR 请求的设置。

这并不意味着这些标题是*强制性*的。如果脚本未设置标头，则仍允许发生请求。

# c++ - C++ 代码翻译和名称查找

> ID：11911367
> 
> 赞同：0
> 
> 时间：2012-08-11T02:22:48.870
> 
> 标签：c++, compiler-construction, analysis

**我的问题是**：编译器在哪个阶段执行 name `lookup`。我认为它可能是在执行语义分析时，但我只是想确保，因为当我搜索编译器分析时，他们没有在任何阶段（词汇、语法、语义）中提到名称查找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:24:38.470

一般是语义分析，但在C++中，各个阶段都是交织在一起的，所以如果有人说别的，这也是可以理解的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:26:42.860

在 C++ 中，名称查找通常需要作为语法分析（解析）的一部分进行，当名称是类型名称或模板名称时，这会影响语法。如果事情可以独立于类型名或模板名进行解析，名称查找可能会推迟到以后，但这通常是一个实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:55:44.220

在 C/C++ 中，有时您无法确定句法元素的语义，而不知道它的种类（类型、变量等）。大多数 C++ 编译器使用生成的语法（yacc、bison）来构建语法树，因此名称查找必须在此之后。

考虑以下：

A * B;

这要么是 A * 类型的变量 B 的声明，要么是在参数 A 和 B 上调用运算符 * 的语句。

# asp.net - 更改对象的可见性时防止页面闪烁

> ID：11911368
> 
> 赞同：0
> 
> 时间：2012-08-11T02:22:57.873
> 
> 标签：asp.net, flicker

我的页面中有一个按钮，单击该按钮会显示（使用后端代码）登录控件。然而，它并没有像我希望的那样出现，它实际上在页面上闪烁，这很烦人。

有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:39:50.037

您是否考虑过使用 JavaScript 代替？？？

例子：

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#myb").click(function () {
            $("#login").toggle();
        });
    });
</script>

<input type="button" id="myb" value="show/hide" />
<asp:Login runat="server" ID="login" DestinationPageUrl="~/Default.aspx" 
     ..... 
```

# sqlite - 在几列上使用 MAX() 获取整行

> ID：11911369
> 
> 赞同：1
> 
> 时间：2012-08-11T02:23:28.487
> 
> 标签：sqlite, max

首先：感谢收看；感谢您的时间！

重点：

架构：对于 myTable

```
nonUniqueID    YEAR    MONTH    DAY    HOUR    numericValue
1              2012    01       01     01      99.9
1              2012    01       01     02      65.2
1              2012    01       01     03      -88
7              2012    02       08     21      9.08
1              2012    01       01     09      99.913
1              2013    01       01     01      99.999999 
```

基本上，它是两个值`nonUniqueID`，并且`numericValue`具有精细的日期。

现在，我需要在整个数据库中获得最大的日期。有了上面的数据，预期的结果是：

```
nonUniqueID    YEAR    MONTH    DAY    HOUR    numericValue
1              2013    01       01     01      99.999999 
```

因为这是 SQLite，所以我知道我最终将不得不多次使用 MAX()。顺序必须是 MAX(YEAR) 然后 MAX(MONTH) 然后 MAX(DAY) 然后 MAX(HOUR)。

基本上，查询会像这样工作（我只是不太了解 SQL 语法来创建查询）：

1.  查找所有年份最高的记录
2.  从这个集合中，找到所有最高 MONTH 的记录
3.  从此集合中，找出 DAY 最高的所有记录
4.  从这个集合中，找到所有 HOUR 最高的记录
5.  返回此记录

这是我改编自另一个不起作用的 StackExchange 问题的 SQL

```
Select * From ( 
    Select max(YEAR) as Y FROM myTable 

    union 

    Select max(MONTH) as M FROM myTable 

    union 

    Select max(DAY) as D FROM myTable 

    union

    Select max(HOUR) as H FROM myTable 
) myTable; 
```

返回

```
Y
-----
21 
08 
02 
2013 
```

将此与预期结果进行比较：

```
nonUniqueID    YEAR    MONTH    DAY    HOUR    numericValue
1              2013    01       01     01      99.999999 
```

它返回 4 条记录，而不是带有 4 个值的一条记录。

有人可以帮我查询吗？谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T02:34:44.550

试试这个

```
 SELECT nonUniqueID ,  YEAR ,  MONTH ,  DAY ,  HOUR ,  numericValue FROM myTable as a
 INNER JOIN (Select max(MONTH) FROM  myTable) as b
 ON a.YEAR = B.YEAR
 INNER JOIN (Select max(DAY) FROM myTable) as c
 ON b.YEAR = c.YEAR
 INNER JOIN (Select max(HOUR) FROM myTable) as d
 ON c.YEAR = d.YEAR
 WHERE a.YEAR = (Select max(YEAR) FROM myTable) 
```

它返回 4 个值，因为您使用`UNION` 它意味着结果加入一列

**编辑**

我刚刚更新了我的答案，看看是否有效我不太确定这个查询的性能

# javascript - 使用 javascript 注入 rel="canonical"

> ID：11911372
> 
> 赞同：1
> 
> 时间：2012-08-11T02:23:42.597
> 
> 标签：javascript

出于某种原因，我无法修改 rel="canonical" 的 html 头。

如何使用 javascript 注入 rel="canonical" 并且搜索引擎是否接受这种类型的注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:58:02.987

`<head>`您可以像修改其他任何内容一样修改标签内的 DOM 。但是，它对你没有多大好处。爬虫/机器人通常不会运行您的 JavaScript。

# c++ - 从文件写入类型类的向量

> ID：11911373
> 
> 赞同：0
> 
> 时间：2012-08-11T02:23:54.423
> 
> 标签：c++, vector, fstream

将矢量保存到文件中可以正常工作。但我正在寻找一种简单的方法将保存的数据加载回向量中。

这是我之前问过的两个问题的后续问题。

1) [C++ 无法将数据输入到私有向量中（无效使用）](https://stackoverflow.com/questions/11908532/c-trouble-inputting-data-into-private-vector-invalid-use)

2）[输出类型类的向量](https://stackoverflow.com/questions/11909338/outputting-vector-of-type-class)

遍历文件和`push_back()`每个元素的简单方法是什么？

这是课程：

```
class Account
{
    private:
        string firstName;
        string lastName;
        string accountPass;
        int accountID;
        float accountBalance;

    public:
        static Account createAccount( int, float, string, string, string ); //creates new account
        int getAccountID() const { return accountID; }
        string getPass() const { return accountPass; }
        string getFirstName() const { return firstName; }
        string getLastName() const { return lastName; }
        float getBalance() const { return accountBalance; }
        friend std::ostream& operator << (std::ostream&, const Account&);
        friend class BankingSystem;

}; //end of class Account

Account Account::createAccount( int ID, float balance, string pass, string first, string last )
{    
    Account a;
    a.accountID = ID;
    a.accountPass = pass;
    a.firstName = first;
    a.lastName = last;
    a.accountBalance = balance;

    return a;

}

std::ostream & operator << (std::ostream & os, const Account & acc)
{
    os << setw(6) << acc.getAccountID();
    os << setw(4) << acc.getPass();
    os << setw(9) << acc.getFirstName();
    os << setw(9) << acc.getLastName();
    os << setw(9) << setprecision(2) << fixed << acc.getBalance();
    return os;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:42:03.473

If `Account`s are the only thing written in your file you can read them all into your vector (or any push_back-able container) with this 1-liner:

```
std::copy(std::istream_iterator<Account>(file), std::istream_iterator<Account>(), std::back_inserter(vec)); 
```

You'll also need an `operator>>` analogous to the `operator<<` you already have.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:05:31.860

在这个问题中找到了答案[Using vector of user defined class type objects](https://stackoverflow.com/questions/9979894/using-vector-of-user-defined-class-type-objects)

对我来说，它是通过使用解决的：

```
while(!inBankSysFile.eof()) 
{
    Account a;
    inBankSysFile >> a.accountID;
    inBankSysFile >> a.accountPass;
    inBankSysFile >> a.firstName;
    inBankSysFile >> a.lastName;
    inBankSysFile >> a.accountBalance;
    accounts_.push_back(a);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:48:29.120

如果您没有任何动态内存，则可以使用 ifstream::read 和 ofstream::write 和 vector::data 轻松将其读取和写入二进制文件。这是一个例子：

```
#include <iostream>
#include <vector>
#include <fstream>

using namespace std;

class Time
{
public:
Time(): hh(0),mm(0),ss(0) {}
Time(int h,int m,int s):hh(h),mm(m),ss(s) {}
int hh,mm,ss;
};

int main()
{
    Time time1(11,22,33);
    Time time2(44,55,66);

    vector<Time> timeList;
    timeList.push_back(time1);
    timeList.push_back(time2);

    vector<Time> timeList2;
    timeList2.resize(2,Time());

    ofstream fout;
    fout.open("test.txt");
    if(fout.is_open())
    {
        // vector.data returns a pointer to the beginning of its stored data
        // 1st param: the location to read data from
        // 2nd param: the amount of bytes to write to the file
        fout.write((const char*)timeList.data(),sizeof(Time)*timeList.size());

        fout.close();
    }

    ifstream fin;
    fin.open("test.txt");
    if(fin.is_open())
    {
        // 1st param: the location to write data to
        // 2nd param: the amount of bytes to read from the file
        // NOTE: make sure you've sized the vector appropriately before writing to it.
        fin.read((char*)timeList2.data(),sizeof(Time)*timeList2.size());

        for(int i=0;i<timeList2.size();++i) {
            cout << timeList2[i].hh << ":" << timeList2[i].mm << ":" << timeList2[i].ss << "\n";
        }

        fin.close();
    }

    return 0;
} 
```

注意：读取/写入使用动态内存的对象（包括包含包含动态内存的类的对象，例如 std::string）将需要额外的处理逻辑来处理读取和写入该数据。

注意：使用任何对象的大小时，请注意结构对齐填充的差异。

# php - 在php中创建多个换行符

> ID：11911378
> 
> 赞同：-2
> 
> 时间：2012-08-11T02:24:58.993
> 
> 标签：php, string

我正在尝试在 2 个字符串之间创建多个换行符。

每次我需要 1 个换行符时，我都会重复 (echo ' ';)。

我可以只写一个语句来添加多个换行符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:29:08.193

用于`str_repeat`重复文本。

例如`echo str_repeat("<br>", 10); will add 10 line breaks`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:29:15.367

You can pass the new line character (`\n`):

```
echo "line 1\nline2\n"; 
```

Returns:

```
line1
line2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:30:29.817

you can use this

```
 echo "string </br></br> string"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:29:03.980

仅仅使用控制字符来获得你想要的东西怎么样，尽管使用 html 输出你可能需要使用
标签来代替

```
echo("foo\n\n"); 
```

# php - 如何将特殊字符传递给xml文件

> ID：11911379
> 
> 赞同：2
> 
> 时间：2012-08-11T02:25:12.183
> 
> 标签：php, simplexml

在我保存 tha 之后，我正在编辑一个特定节点文件的 xml 文件，但由于 我的代码的**第 7 行，它包含一些特殊字符**

```
$xml = simplexml_load_file('demo.xml');
$i=2;

foreach($xml->Page as $myPage){
if($myPage['id']==$i) {
    $da = "data";
    $text = "helloworld";
    $myPage->$da ="<![CDATA[{$text}]]>"; //line number 
    $xml->asXML('demo.xml');
} 
```

如何将字符串原样放在 xml 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:42:51.677

SimpleXML 不能很好地处理 CDATA。如果要编写 CDATA，则需要使用[DOM](http://www.php.net/manual/en/book.dom.php)对象。例如：

```
$xml = new DOMDocument();
$xml->load('demo.xml');
$i = 2;

foreach ($xml->getElementsByTagName('Page') as $page) {
    if ($page->attributes->getNamedItem('id')->value == $i) {
        $da = 'data';
        $text = 'helloworld';

        $data = $xml->createElement($da);
        $data->appendChild($xml->createCDATASection($text));

        $page->appendChild($data);
    }
} 
```

如果您想继续使用 SimpleXML，您可以只加载您想要写入 CDATA 的元素作为 DOM 对象。

```
$xml = simplexml_load_file('demo.xml');
$i = 2;

foreach ($xml->Page as $page) {
    if ($page['id'] == $i) {
        $da = 'data';
        $text = 'helloworld';
        $page->$da = '';

        $node = dom_import_simplexml($page->$da);
        $dom = $node->ownerDocument;
        $node->appendChild($dom->createCDATASection($text));
    }
}

$xml->asXML('demo.xml'); 
```

# matlab - 标题栏部分覆盖的 Matlab 图

> ID：11911383
> 
> 赞同：0
> 
> 时间：2012-08-11T02:26:26.000
> 
> 标签：matlab, user-interface, plot, figure

我很好奇我需要做什么才能让标题栏不在我的 matlab 图形上显示。它部分覆盖了一个按钮。如果需要，我可以提供更多信息。

![在此处输入图像描述](../Images/fa8792854cecb3967f4bb8181681ef10.png)

我从 powerpoint 使用 VB 调用：

```
Call RunFile("WindowAPI(new_control_pan,'Clip',true)", "C:\Users\mhaartman\Documents\PANE_golden2\PANE_golden\code") 
```

我仍然看到同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:03:29.780

您的问题需要进一步澄清。同时，您可以隐藏菜单栏和工具栏，如下所示：

```
hFig = figure;
plot(sin(1:100))
set(hFig, 'Menu','none', 'Toolbar','none') 
```

结果图如下所示：

![截屏](../Images/14aff3f398955adf4964986324082248.png)

如果您使用的是 MS Windows，我们可以更进一步，移除窗口边框（使其看起来像*闪屏*）。这是通过从 C MEX 函数调用本机 Win32 API 来完成的（我在文件交换中使用 Jan Simon的[WindowAPI函数）](http://www.mathworks.com/matlabcentral/fileexchange/31437)

```
WindowAPI(hFig,'Clip',true) 
```

![screenshot_noborders](../Images/fca88ab152e82f6fe6e71c07ac22beea.png)

# python - Perl 中 $1 的 Python 等价物是什么，或者正则表达式中的任何其他特殊变量是什么？

> ID：11911391
> 
> 赞同：6
> 
> 时间：2012-08-11T02:28:58.013
> 
> 标签：python, regex

我刚刚从 Perl 切换到 Python，对**re**模块感到失望。我正在寻找 Python 中的 $1 等价物，或正则表达式中的任何其他特殊变量。在 Perl 中我会使用这个： 我正在尝试在 Python 中做同样的事情。谢谢！ `$_ = `"<name>Joe</name>";` s/<(.*)>(.*)<`[/]`(.*)>/$2/;`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T02:39:21.290

You can also use the `\2` in the back ref or match group in Python.

Such as this:

```
>>> re.sub(r'(\w+) (\w+)',r'\2 \1','Joe Bob')
'Bob Joe' 
```

Or named substitutions (a Python innovation later ported to Perl):

```
>>> re.sub(r'(?P<First>\w+) (?P<Second>\w+)',r'\g<Second> \g<First>','Joe Bob')
'Bob Joe'
>>> ma=re.search(r'(?P<First>\w+) (?P<Second>\w+)','George Bush')
>>> ma.group(1)
'George'
>>> ma.group('Second')
'Bush' 
```

But, admittedly, Python re module is a little weak in comparison to recent Perl's.

For a first class regex module, install the newer [regex module](http://pypi.python.org/pypi/regex/). It is scheduled to by part of Python 3.4 and is very good.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T02:35:27.813

You want the re.MatchObject.group() method.

```
import re

var = "<name>Joe</name>"
match = re.search(r"<(.)>(.)<[/](.*)>", var)
print match.group(2) 
```

It looks like you are using regex to parse a tag-based markup language such as XML. See the following link on why you should use a parser such as ElementTree instead: [https://stackoverflow.com/a/1732454/1032785](https://stackoverflow.com/a/1732454/1032785)

# asp.net-mvc - MapRoute 不影响 ActionLinks

> ID：11911392
> 
> 赞同：0
> 
> 时间：2012-08-11T02:29:02.827
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

通常，我希望在生成 URL 时使用默认路由（“向后”映射），即使我已经添加了备用或旧路由来达到某个操作（“转发”）：

```
routes.MapRoute("Legacy", "legacy/home/index",     // want forward-only mapping!
    new { controller = "Home", action = "Index" };
routes.MapRoute("Default", "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
```

在这种情况下，我仍然希望在调用时使用默认路由：

```
@ActionLink("Index", "Home")                       // generates legacy URLs ;( 
```

在线程：[Routing legacy requests with and without querystring](https://stackoverflow.com/questions/9162925/routing-legacy-requests-with-and-without-querystring)（issue #1）中，解决方案是为每个 legacy 路由添加两个 MapRoute 语句，或者在每个 ActionLink 调用中指定路由名称。

有没有办法定义*仅*用于 URL -> 操作映射的路由，而不是相反的路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:16:25.170

我找不到让路由语句只应用一种方式的方法，所以我安装了 IIS URL Rewrite 模块。这可以透明地重写 URL，或者在遗留 URL 的情况下进行 301 重定向。

无论如何，这是一个比编辑 global.asax 更易于维护的解决方案。

# php - 每10条后如何删除顶部的评论

> ID：11911397
> 
> 赞同：0
> 
> 时间：2012-08-11T02:29:31.430
> 
> 标签：php, html, comments

我有一个网站，人们可以在上面发布他们的推特网址，人们可以从那里关注他们。url 发布是由 php 发布脚本处理的，我的问题是，我可以删除 20 条评论后的第一条评论，这样它们就不会永远在页面上继续下去吗？我希望它像这个网站[http://tumblrplug.com/](http://tumblrplug.com/)一样工作注意：我将评论存储在 mysql 数据库中，并为每个评论提供一个计数器。

注释代码如下：

```
<?php
require('connect.php');
$query=mysql_query("SELECT * FROM comment ORDER BY id DESC");
while($rows=mysql_fetch_assoc($query))
{
     $id=$rows['id'];
     $dname=$rows['name'];
     $dcomment=$rows['comment'];

     echo '<font  id = "username_word" color="red">username:</font>' ."<a href='$dname' id = 'name' style='color: #77cde6' STYLE='TEXT-DECORATION: NONE'>$dname</a>"."<font class='dash' color='red'> - </font> "."<div id='comment'>$dcomment</div>" 
  ."<a href='$dname'><img src='http://i45.tinypic.com/2yltzkg.png' width ='30px' height ='30px' border='0' alt='follow' id='followbtn'></a>" ;    

     }
?> 
```

查询代码是这样的：

```
<?php
require('connect.php');
$query=mysql_query("SELECT * FROM comment ORDER BY id DESC");
while($rows=mysql_fetch_assoc($query))
{
     $id=$rows['id'];
     $dname=$rows['name'];
     $dcomment=$rows['comment'];

     echo '<font  id = "username_word" color="red">username:</font>' ."<a href='$dname' id = 'name' style='color: #77cde6' STYLE='TEXT-DECORATION: NONE'>$dname</a>"."<font class='dash' color='red'> - </font> "."<div id='comment'>$dcomment</div>" 
  ."<a href='$dname'><img src='http://i45.tinypic.com/2yltzkg.png' width ='30px' height ='30px' border='0' alt='follow' id='followbtn'></a>" ;    

     }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:34:35.130

每次从评论表加载时，您是否都重新查询？如果是这样，您可以将返回的行数限制为 20。

SELECT * FROM comment ORDER BY id DESC LIMIT 20

# c++ - 铸造原语时的记忆解释

> ID：11911403
> 
> 赞同：1
> 
> 时间：2012-08-11T02:32:02.837
> 
> 标签：c++, c, casting

在像 C/C++ 这样的语言中，当我们这样做时：

```
char c = 'A'; 
```

我们分配内存以二进制形式存储数字 65：

`stuff_to_the_left_01000001_stuff_to_the_right`

那么如果我们这样做：

```
int i = (int) c; 
```

据我了解，我们是在对编译器说，它应该将布局为 的位模式解释为`stuff_to_the_left_01000001__00000000_00000000_00000000_stuff_to_the_right`，这可能是也可能不是 65。

当我们在操作期间执行强制转换时也会发生同样的情况

```
cout << (int) c << endl; 
```

在上述所有内容中，我得到了字符的“A”和十进制的 65。我是幸运还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:37:28.673

C 中的强制转换不会重新解释任何内容。它们是价值转换。`(int)c`表示取 的值`c`并将其转换为`int`，这在基本上所有系统上都是无操作的。（它可能无法成为空操作的唯一方法是，如果 的范围`char`大于 的范围`int`，例如，如果`char`和`int`都是 32 位但`char`没有符号。）

如果您想重新解释一个值的表示（位模式），该值必须首先作为一个对象（左值）存在，而不仅仅是一个表达式的值（通常称为“右值”，尽管这种语言在 C 标准中不使用） ）。然后您可以执行以下操作：

```
*(new_type *)&object; 
```

但是，除了`new_type`字符类型的情况外，这会通过违反别名规则来调用未定义的行为。C++ 有一种“重新解释演员表”可以做到这一点，这大概可以避免破坏别名规则，但由于我不熟悉 C++，我无法为您提供有关它的详细信息。

在您的 C++ 示例中，您得到不同结果的原因是运算符重载。`(int)'A'`不会改变值或它的解释方式；相反，具有不同类型的表达式会导致`operator<<`要调用的函数的不同重载。另一方面，在 C 中，`(int)'A'`始终是空操作，因为在 C 中具有以开头的`'A'`类型。`int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:40:56.263

> 我是幸运还是我错过了一些基本的东西？

是的，您缺少一些基本的东西：编译器不会`char`从内存中读取 ，就好像内存表示`int`. 相反，它将 a 读取`char`为 char，然后对该值进行符号扩展以适合 a ，`int`因此也一样。符号扩展意味着在要扩展的最高有效字节的左侧添加s 或s，具体取决于该数字的符号位。无符号类型总是用零填充^*。`char` `-1``int` `-1``1``0`

符号扩展通常通过执行专用硬件指令在寄存器中完成，因此运行速度非常快。

* * *

^*正如[Eric Postpischil](https://stackoverflow.com/users/298225/eric-postpischil)在评论中指出的那样，`char`类型可能是有符号或无符号的，具体取决于 C 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:40:33.057

当你分配一个字符时，左边或右边没有东西。它是八位，仅此而已。因此，当您将 8 位值转换为 32 位时，您仍然会得到 65：

`0100.0001`到`0000.0000 0000.0000 0000.0000 0100.0001`

没有魔法，就没有运气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:48:39.037

在您的代码中，“i”有自己的地址，“c”有自己的地址。值正在从 c“复制”到 i。至于“(int) c”，同样如此。尽管编译器为我们做了这些，如下所示。

```
 |--- i ---|- c-|  
 0x01 0x02 0x03 0x04
+--------------------......
| 00 | 00 | 08 | 08 |......  
+--------------------...... 
```

如果这是基于指针的分配，您将是正确的。

例如

```
 0x01 0x02 0x03
+---------------......
| 07 | 10 | 08 |......
+---------------......
int *p;
char c = 10;
p = &c;
print(*p); //not a real method just something that can print. 
```

这里 *p 将具有来自内存地址 0x02 和 0x03 的组合值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-11T02:46:15.513

好吧，问题是，这种行为可能会根据您正在编译的平台和您正在使用的编译器而改变。

ISO 标准将 (int) 定义为强制转换。在这种情况下，您的编译器将像 static_cast(c) //in c++ 一样解释 (int)c

现在，您很幸运，您的编译器将 (int) 解释为简单的强制转换。这是任何 c/c++ 编译器的常见行为，但可能存在一些邪恶的、无名的 c++ 编译器，它们会对那个编译器进行重新解释，最终导致不可预测的结果（取决于平台）。

这就是为什么你应该使用 static_cast(c) 来 100% 舒尔，如果你想重新解释它，当然是 reinterpret_cast(c)

但是，同样，它通常是 c 风格的强制转换，因此 c 将被强制转换为整数。

# perl - Perl 中哈希元素的多个值

> ID：11911405
> 
> 赞同：0
> 
> 时间：2012-08-11T02:32:29.107
> 
> 标签：perl, hash

> **可能重复：**
> [当 perl 中的键相同时连接哈希值](https://stackoverflow.com/questions/10899977/concatenate-hash-values-when-key-is-same-in-perl)

我想在哈希中存储一个键的多个值。例如：

```
Input:
SMP00001    HMDB00641
SMP00001    HMDB00051
SMP00001    HMDB00052
SMP00003    HMDB00051
SMP00003    HMDB00517
SMP00004    HMDB00243

Output:
SMP00001: HMDB00641,HMDB00051,HMDB00052
SMP00003: HMDB00051,HMDB00517
SMP00004: HMDB00243 
```

这是我写的代码：

```
push(@{$hash{$smp_id}},$HMDB_id); 
```

当我在哈希中打印内容时，输出是：

```
SMP00001 => ARRAY(0x161da40)
SMP00003 => ARRAY(0x11be28)
SMP00004 => ARRAY(0x1265c8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:37:45.960

哈希表的值是数组引用，因此您必须取消引用它们才能查看元素。也就是说，而不是

```
print "$key => $hash{$key}\n"; 
```

说

```
print "$key => @{$hash{$key}}\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T02:43:56.893

```
print "$_: ", join(',', @{$hash{$_}}), "\n" for keys %hash; 
```

# ruby-on-rails - Rails 无法加载模块链

> ID：11911407
> 
> 赞同：2
> 
> 时间：2012-08-11T02:33:14.870
> 
> 标签：ruby-on-rails, ruby, rails-engines

我正在构建一个 Rails 引擎。我定义了一个这样的控制器，

```
module A::B::C::D::E
  extend ActiveSupport::Concern

  # module stuff ... 
end

class ExamplesController < ApplicationController
  include A::B::C::D::E

  # controller stuff ...
end 
```

当我启动 Rails 控制台时，`rails console`出现以下错误，

```
uninitialized constant A::B (NameError) 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:42:57.003

因为该模块在您使用它时不存在。由于`A`没有定义，Ruby 不知道它是什么。

请注意，这`::`是用于*查找*的范围解析运算符，而不是*定义*类似名称空间的层次结构。

如果你`A`先定义它会起作用：

```
module A
end 
```

然后`B`：

```
module A::B
end 
```

然后`C`：

```
module A::B::C
end 
```

等等。

当然你也可以这样做：

```
module A
  module B
    module C
      module D
        module E
        end
      end
    end
  end
end 
```

# ruby-on-rails - Undefined method 'visit' for # (NoMethodError) [rspec]

> ID：11911408
> 
> 赞同：3
> 
> 时间：2012-08-11T02:33:28.190
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

I'm getting the following error when I try to run an rspec test:

```
/srv/offerme/spec/requests/static_pages_spec.rb:13: undefined method `visit' for #<Class:0xb3436684> (NoMethodError)
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
from /srv/offerme/spec/requests/static_pages_spec.rb:12
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/dsl.rb:18:in `describe'
from /srv/offerme/spec/requests/static_pages_spec.rb:3
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `autorun'
from /usr/local/bin/rspec:19 
```

The file I get this error in looks like this (spec/requests/static_pages_spec.rb) :

```
require 'spec_helper'

describe "StaticPages" do
include Capybara::DSL
  describe "GET /static_pages" do
    it "works! (now write some real specs)" do
      # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
      get static_pages_index_path
      response.status.should be(200)
    end 
  end 
  describe "Home page" do
    visit 'static_pages/home'
    page.should have_content('OfferMe')
  end 

end 
```

My spec_helper.rb file looks like this:

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
  config.include Capybara::DSL
end
module ::RSpec::Core
class ExampleGroup
include Capybara::DSL
include Capybara::RSpecMatchers
end
end 
```

And, finally, my Gemfile looks like this:

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
end

group :test do
  gem 'capybara'
end

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

gem 'therubyracer', '0.10.1'
gem 'libv8'
gem 'webrat' 
```

I have seen this GitHub [issue](https://github.com/rspec/rspec-rails/issues/360) and have tried some of the workarounds as well as looked at some other StackOverflow questions pertaining to the similar issue (that's why some of the code looks redundant/hacky). However, none of them have worked yet. Please help!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T02:45:14.047

更新：

问题是你在`visit`一个`it`块之外调用，这里：

```
describe "Home page" do
  visit 'static_pages/home'
  page.should have_content('OfferMe')
end 
```

将这些中间线包裹在一个`it`块中：

```
describe "Home page" do
  it "has a homepage" do
    visit 'static_pages/home'
    page.should have_content('OfferMe')
  end
end 
```

那应该行得通。

原始答案：

我可能是错的，但我相信你必须在 Gemfile 的测试和开发部分都包含 capybara。

尝试将 Gemfile 的该部分更改为：

```
group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
  gem 'capybara'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T12:58:54.863

这是一个旧帖子。我有同样的问题。我想我分享我的解决方案。在我的 Gemfile 中，我有

```
group :test do
  gem 'capybara'
end 
```

并且`visit`在正确的位置但是我遇到了同样的错误。所以这就是我所做的。我在 Gem 上运行了更新，现在一切都很好。

`bundle update capybara`

希望这对某人有所帮助。

# math - Calculating two numbers

> ID：11911409
> 
> 赞同：0
> 
> 时间：2012-08-11T02:33:32.590
> 
> 标签：math, numbers

Sorry for asking this question, I didn't pay attention in school...

Say I have two numbers: 3 and 7

I'd like to create a bar that shows the percentage of both numbers (out of 100%) in other words, calculate those numbers, so the bar shows: IIIXXXXXXX

I hope I make sense.. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:58:18.087

我认为您的意思是您希望条形图将 3 和 7 显示为相对值，每个值都占整体的适当百分比

> IIIXXXXXXX

计算很简单：

```
var total = 3 + 7;
var percentA = 3 / total; // 30%
var percentB = 7 / total; // 70% 
```

每个组件的宽度是条形总宽度乘以所选值并除以值的总和。

因此，如果条形图应该是 100 像素，您将计算两个组件的宽度，例如

```
var widthA = 100 * ( A / (A+B) );
var widthB = 100 * ( B / (A+B) ); 
```

或`100 * ( 3 / (3+7) ) => 100 * (3/10) => 30`, 和 70。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:39:31.133

Here's one way (taken from a progress bar plugin):

This is JavaScript, but the language is of course irrelevant.

```
var max = 250; // the total amount representing 100%
var current = $obj.val().length; // the length we are measuring

// important: current / max * 100

// use min() to ensure that the result isn't greater than 100 due to rounding
var ratio = Math.min( ( ( current / max ) * 100 ), 100 ); 
```

The key piece is dividing the current amount by the total amount, where the total amount (whatever it may be) represents 100%. That division operation should yield a value less than 1\. To convert that to a 1-100 percentage, multiply by 100.

In my above example, if `current` = 125, and `max` = 250, then we have 125 / 250 = 0.5\. Multiplying 0.5 * 100 gives 50\. 125 is 50% of 250.

If you wanted to get both percentages, you could simply subtract the first result from 100.

Here is a complete working example of a HTML/CSS/jQuery progress bar for managing the maxlength of a textbox: [http://jsfiddle.net/QfZPt/1/](http://jsfiddle.net/QfZPt/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:43:55.417

如果您要求 100 中的数字百分比的物理表示，我将从获取百分比开始：

```
int number = 3; //or 7
int percent = number/100; 
```

然后我会有一个 1 像素大的精灵并基于 缩放它`percent`，例如：

```
mybarsprite.scale = percent*100; 
```

然后，您可以添加背景图像来创建条形图，并将其设为 100 像素。在同一位置添加两个精灵，较低 z 级别的背景精灵添加您有条形效果。

# r - 在 R 中创建自定义调色板

> ID：11911416
> 
> 赞同：12
> 
> 时间：2012-08-11T02:34:41.903
> 
> 标签：r, colors

我知道它`R`会自动加载一些调色板，例如`palette`、和. 我也知道。但是，如果我想使用自定义调色板并按名称分配颜色怎么办？那可能吗？ `rainbow``heat.colors``gray``RColorBrewer`

我公司的调色板如下：

```
#1A73BA (R: 26 G: 115 B: 186) - this is a blue
#FFDB43 (R:255 G:219 B:67) - this is a yellow
#B54B05 (R:181 G:75 B:5) - this is an orange 
```

我公司的缩写是AT。

我希望能够通过名称而不是 HEX 或 RGB 来调用这些颜色，因为我不记得它们。理想情况下，我可以创建一个文件，该文件会自动加载到 R 中，以启动这些颜色。

```
ATBlue <- #1A73BA
ATYellow <- #FFDB43
ATOrange <- #B54B05 
```

然后，我可以调用颜色：

```
plot(x,y, col = "ATBlue") 
```

我可以将值放入数据框中，然后像这样调用它们：

```
ATColors <- data.frame(name = c("ATBlue", "ATYellow", "ATOrange"), color= c("#1A73BA", "#F7D364", "#B54B05"))

plot(x,y, col = ATColors[3,2]) 
```

但我需要知道数据框中的位置才能正确调用它。

我可以创建一个在 R 启动时自动加载的元素，这将允许我将自定义颜色名称调用到绘图中吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T02:58:58.197

这回答（或至少是一个可能的答案）您的评论和编辑：

```
ATblue <- rgb(26/255, 115/255, 186/255, 1)
 ATyellow <- rgb(255/255, 219/255, 67/255, 1)
 ATorange <- rgb(181/255, 75/255, 5/255, 1)

 plot(1:10, col= c(ATblue, ATyellow, ATorange), pch=20) 
```

使用 rgb 的定义方法允许您设置 alpha 级别，从而在支持它的图形设备上允许透明度（至少：'pdf'、'windows'、'quartz' 和 'X11'）。

您还可以命名“调色板矢量”

```
palvec <-  c(ATblue=ATblue, ATyellow=ATyellow, ATorange=ATorange) 
```

可以使用数字或名称访问该向量：

```
plot(1,1) # to set up plot window
abline(h=c(0.8,1,1.2), col= palvec[ c( 'ATblue', 'ATyellow', 'ATorange' ) ] , lwd=40) 
```

* * *

一般来说，我认为您会发现，如果您使用所有小写字母，则基本和图形包（默认加载，因此无需重命名）与该 gif 列表有很好的对应关系。所以它已经是 R 的一部分。假设你想找到“LavenderBlush”的 R 颜色名称。分配颜色名称的向量是从 colors() 返回的，但它相当大，因此您可以使用以下方法对其进行缩减：

```
grep("lavender", colors(), ignore.case=TRUE, value=TRUE)
#[1] "lavender"       "lavenderblush"  "lavenderblush1" "lavenderblush2" 
#     "lavenderblush3" "lavenderblush4" 
```

假设您想查看该颜色的十六进制代码是否与您无法读取的 gif 表中的相同：

```
 ccodes <- as.hexmode( c(256^(2:0) %*% col2rgb("lavenderblush")) )
 ccodes
 #[1] "fff0f5" 
```

是的。对于您的示例，只需使用“seagreen”：

```
> ccodes <- as.hexmode( c(256^(2:0) %*% col2rgb("seagreen")) )
> ccodes
[1] "2e8b57 
```

如果您有一个十六进制代码值，您可以在其上附加“#” `paste0`：

```
 paste0("#", ccodes)
#[1] "#2e8b57"
 plot(1,1, col=paste0("#", ccodes) ) 
```

如果您有此类值的向量，`paste0`则也被向量化：

```
 ccodes <- as.hexmode( c(256^(2:0) %*% col2rgb(colors()[20:25])) )
 paste0("#", ccodes)
#[1] "#ffe4c4" "#eed5b7" "#cdb79e" "#8b7d6b" "#000000" "#ffebcd" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T21:34:00.690

我会将颜色放在这样的命名向量中：

```
ATcols <- c(blue = "#1A73BA", yellow = "#FFDB43", orange = "#B54B05") 
```

然后你可以得到，比如说，像这样的蓝色`ATcols["blue"]`：

如果你想更漂亮一点，你可以创建一个命名向量和一个函数：

```
AT_color_data <- c(blue = "#1A73BA", yellow = "#FFDB43", orange = "#B54B05")
ATcolor <- function(color="blue") {
         if (is.numeric(color)) AT_color_data[color]
         else AT_color_data[tolower(color)]
} 
```

这为您提供了几种获取颜色的选项：

```
ATcolor(2:3)
#    yellow    orange 
# "#FFDB43" "#B54B05"

ATcolor("orange")
#    orange 
# "#B54B05" 

ATcolor(c("orange", "blue"))
#    orange      blue 
# "#B54B05" "#1A73BA" 
```

`rainbow`或者，您可以使您的函数在提供数字参数时表现得更像：

```
AT_color_data <- c(blue = "#1A73BA", yellow = "#FFDB43", orange = "#B54B05")
ATcolor <- function(color="blue") {
         if (is.numeric(color)) AT_color_data[1:color[1]]
         else AT_color_data[tolower(color)]
} 
```

然后，例如：

```
ATcolor(2)
#      blue    yellow 
# "#1A73BA" "#FFDB43" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-13T17:45:34.750

```
library("grDevices")
plot(1:20,pch=20,col=col)
col=colorRampPalette(c("white", "red"))(20) 
M <- matrix(runif(100),10,10)
M[lower.tri(M)] <- NA
image(M,col = col,frame=F,xaxt="n",yaxt="n") 
```

# xcode - Xcode 匹配大括号、圆括号和方括号对

> ID：11911419
> 
> 赞同：5
> 
> 时间：2012-08-11T02:35:27.020
> 
> 标签：xcode, notepad++, matching, parentheses, braces

如果您是 notepad++ 用户，您将了解我希望 Xcode 为我做什么，当我将光标放在大括号、括号和括号之前或之后时，我想要的非常简单，它会突出显示它的配对以了解匹配的juste 尝试将光标放在 notepad++ 中并告诉我如何在 Xcode 中执行此操作我已经知道键盘右箭头和双击的技巧，但 notepad++ 的技巧更快，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:58:22.600

我唯一可以添加的（而且我看起来还不错）是在编辑器左边缘的垂直灰色条上训练你的眼睛，在偏好中称为“代码折叠功能区”。它会在所有嵌套级别上直观地提示匹配大括号（不是括号），并且将鼠标悬停在它上面会非常强烈地提示并提供折叠界面。

有关 Apple 的快照和简要说明，请参见[此处](https://developer.apple.com/library/ios/recipes/xcode_help-source_editor/chapters/MatchingPairsofDelimiters.html)。

# c# - 从 Guid 生成颜色

> ID：11911422
> 
> 赞同：3
> 
> 时间：2012-08-11T02:36:24.963
> 
> 标签：c#, colors, guid

我的数据库中有各种对象，由 unique 标识[`System.Guid's`](http://msdn.microsoft.com/en-us/library/system.guid.aspx)。当我显示它们时，我希望它们中的每一个都具有基于其指导的独特颜色。

所以我想要这样的东西：

```
public Color ColorFromGuid(Guid guid) { /* ?? */ } 
```

在哪里

```
ColorFromGuid(databaseObject1.Guid) == ColorFromGuid(databaseObject1.Guid)
ColorFromGuid(databaseObject2.Guid) == ColorFromGuid(databaseObject2.Guid)
ColorFromGuid(databaseObject1.Guid) != ColorFromGuid(databaseObject2.Guid) 
```

最好的方法是什么？

**编辑**显然，有比*颜色*更多的独特指南，所以每个指南都不可能拥有自己独特的颜色。我只是在寻找一个好的品种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:21:23.687

你可以这样做：

```
return Color.FromArgb(guid.GetHashCode()); 
```

如果您需要不透明的颜色，请使用可让您指定 alpha[的重载。`Color.FromArgb`](http://msdn.microsoft.com/en-us/library/1hstcth9)如果您希望相似的 GUID 生成非常不同的颜色，您可以在 Guid 上执行不同类型的哈希，例如[MD5 哈希](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5.aspx)，并从中获取生成颜色的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T03:15:32.460

像这样的东西怎么样：

```
public Color ColorFromGuid(Guid guid)
{
    var values = guid.ToByteArray().Select(b => (int)b);
    int red = values.Take(5).Sum() % 255;
    int green = values.Skip(5).Take(5).Sum() % 255;
    int blue = values.Skip(10).Take(5).Sum() % 255;

    Color color = Color.FromArgb(red, green, blue);
    return color;
} 
```

这可能并不理想，但您会为每个 GUID 获得一种颜色，并且相同的 GUID 每次都应该产生相同的颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T04:53:03.660

如果你用一个函数来做这件事，你会失望的。

Guid 比颜色多很多倍，因此许多 Guid 将映射到相同的颜色。很多时候，更多的 Guid 将映射到过于接近而无法区分的颜色（例如 #FFFF9999 和 #FFFF9998）。实际上，您只能分辨少数颜色之间的区别——比如绝对最大值为 50 种。

向导不是随机的。对自己重复一遍：向导**不是**随机的。特别是如果您使用数据库生成的 Guid，这可能是所谓的“顺序唯一标识符”，其中 Guid 的前半部分是相同的。这是否意味着您最终会为每个 Guid 获得不同深浅的粉红色？也许。

因此，除非您知道 Guid 的分布并且能够创建一个将该分布映射到合适的颜色分布的函数，否则您不会对函数生成的颜色感到满意。

以可扩展的方式执行此操作的最简单方法是在数据库中创建一个包含两列的简单表 - 颜色（名称、十六进制代码或 RGB 值）和一个 Guid。这样做最耗时的部分将是选择颜色。如果它与另一种颜色过于相似，这允许您更改特定项目的颜色。没有技巧，只是简单的映射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-12T13:44:32.097

如果你需要 HTML 的颜色，你可以使用这个，或者类似的：

```
cssColorcode =  "#" + myguid.Substring(0, 6); 
// result can be something like: #ab3fa4 
```

Guid 是一种六边形，Html css 颜色代码可以用类似的格式表示。

也许不完美，但最简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-15T14:11:33.543

我在一些应用程序中使用了类似以下的内容。

```
Color = Color.ParseColor("#" + (Guid.NewGuid().ToString()).Substring(0, 6)); 
```

从 GUID 中获取前 6 个字符并将其解析为 HEX 颜色代码。

# jquery - slow jQuery animate() between mouseover() and mouseleave()

> ID：11911424
> 
> 赞同：1
> 
> 时间：2012-08-11T02:36:32.077
> 
> 标签：jquery, html, css, jquery-ui

> **Possible Duplicate:**
> [jquery mouseleave issue when moving too slow](https://stackoverflow.com/questions/4500321/jquery-mouseleave-issue-when-moving-too-slow)

There seems to be a delay between `mouseover()` and `mouseleave()`. Looking at my code there is a **200ms/1ms** transition. I just dont understand why there is lag between the two animations.

Using i7 core with latest version FF(14.0.1)...

Link to dev site: [http://blox.comze.com/](http://blox.comze.com/) (CSS currently only stable in IE9/chrome/FF)

Thoughts?

```
<div id="header">
    <div id="headerInner">
        <div id="power" class="menuitem">
            <img style="height:30px;" src="http://{url root=$context.root}static/img/leaf4.png" />
            <a class="menutext">&nbsp;POWER</a>
        </div>
        <div id="services" class="menuitem">
            <img style="height:30px;" src="http://{url root=$context.root}static/img/wrenchscrew.png" />
            <a class="menutext">&nbsp;SERVICES</a>
        </div>
        <div id="cashback" class="menuitem">
            <img style="height:30px;" src="http://{url root=$context.root}static/img/dollarsign.png" />
            <a class="menutext">&nbsp;CASHBACK</a>
        </div>
        <div id="schedule" class="menuitem">
            <img style="height:30px;" src="http://{url root=$context.root}static/img/calender.png" />
            <a class="menutext">&nbsp;SCHEDULE</a>
        </div>
    </div>    

</div>

<script>
$("#power,#services,#cashback,#schedule").mouseover(function() {
    $(this).animate({ backgroundColor: "#333"}, 200 );
}).mouseleave(function() { 
    $(this).animate({ backgroundColor: "#000"}, 1);
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:45:36.043

首先，您应该准备好使用文档，因为它只会让一切运行得更顺畅。试试下面的。

```
$(document).ready(function() {
    $("#power,#services,#cashback,#schedule").hover(function() {
        $(this).animate({ backgroundColor: "#333"}, 200 );
    }, function() {
        $(this).animate({ backgroundColor: "#000"}, 1);
    });
}); 
```

此外，鼠标移出时间非常快，这可能是您的问题。

# javascript - Node.js 中的 JSON 数组

> ID：11911438
> 
> 赞同：0
> 
> 时间：2012-08-11T02:40:06.827
> 
> 标签：javascript, arrays, json, node.js

在过去的一周里，我一直在试图解决这个问题，而我尝试的一切似乎都不起作用。

我必须在我的本地机器上创建一个响应请求的 Web 服务。客户端（我没有写）将一次向我的服务询问一个问题，我的服务器应该以适当的答案回应。

所以我要做的最后一件事是：

*   当使用参数***'theArray'*****在位置'/sort'发出****POST**请求时，对数组进行排序，**删除所有非字符串值**并将结果值作为**JSON**返回。

     ********   ***theArray***参数将是一个字符串化的 JSON 数组******* 

 *****通过跟踪和错误，我发现提供的参数是：

```
{"theArray":"[[],\"d\",\"B\",{},\"b\",12,\"A\",\"c\"]"} 
```

我尝试了许多不同的方法来尝试使其正常工作。但我能得到的最接近的东西是它只返回相同的东西或什么都不返回。这是我用来获得这些结果的代码：

```
case '/sort':
        if (req.method == 'POST') {
            res.writeHead(200,{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            });
            var fullArr = "";
                req.on('data', function(chunk) {
                    fullArr += chunk;
                    });
                req.on('end', function() {
                            var query = qs.parse(fullArr);
                            var strin = qs.stringify(query.theArray)
                            var jArr = JSON.parse(fullArr);
                    console.log(jArr); // Returns undefided:1 
                            var par = query.theArray;
                    console.log(par); // returns [[],"d","B",{},"b",12,"A","c"]

                                function censor(key) {
                                    if (typeof key == "string") {
                                            return key;
                                        } 
                                        return undefined;
                                        }
                        var jsonString = JSON.stringify(par, censor);
                   console.log(jsonString); // returns ""
                });         
                    res.end();

        };

break; 
```

只是为了澄清我需要它返回的是`["d","B","b","A","c"]`

因此，如果有人可以帮我解决这个问题，并且如果可能的话，用一些书面代码做出回应，这些代码的设置方式已经可以与我的代码设置方式一起使用，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T02:50:52.567

**编辑：**试试这个：

```
var query = {"theArray":"[[],\"d\",\"B\",{},\"b\",12,\"A\",\"c\"]"};
var par = JSON.parse(query.theArray);
var stringArray = [];
for ( var i = 0; i < par.length; i++ ) {
    if ( typeof par[i] == "string" ) {
        stringArray.push(par[i]);
    }
}
var jsonString = JSON.stringify( stringArray );
console.log(jsonString); 
```

PS我没注意。您的数组实际上是一个字符串。安德烈，谢谢你的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:58:02.683

编辑：单线（在 repl 中尝试！）

```
JSON.stringify(JSON.parse(require('querystring').parse('theArray=%5B%5B%5D%2C"d"%2C"B"%2C%7B%7D%2C"b"%2C12%2C"A"%2C"c"%5D').theArray).filter(function(el) {return typeof(el) == 'string'})); 
```

粘贴到您的服务器的代码：

```
case '/sort':
        if (req.method == 'POST') {
            buff = '';
            req.on('data', function(chunk) { buff += chunk.toString() });
            res.on('end', function() {
              var inputJsonAsString = qs.parse(fullArr).theArray;
              // fullArr is x-www-form-urlencoded string and NOT a valid json (thus undefined returned from JSON.parse)
              var inputJson = JSON.parse(inputJsonAsString);
              var stringsArr = inputJson.filter(function(el) {return typeof(el) == 'string'});
              res.writeHead(200,{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
              });
              res.end(JSON.stringify(stringsArr));
        };
break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T03:00:00.737

的`replacer`参数`JSON.stringify`不像您使用它那样工作；查看[MDN 上的文档](https://developer.mozilla.org/en-US/docs/Using_native_JSON#The_replacer_parameter)。

您可以使用`Array.prototype.filter`过滤掉不需要的元素：

```
var arr = [[],"d","B",{},"b",12,"A","c"];
arr = arr.filter(function(v) { return typeof v == 'string'; });
arr // => ["d", "B", "b", "A", "c"] 
```*****

# http - 表单提交以外的 HTTP 请求的 MIME 类型

> ID：11911439
> 
> 赞同：3
> 
> 时间：2012-08-11T02:40:12.367
> 
> 标签：http, post, http-headers, put, http-request

对于不是由 HTML 表单发送的请求，HTTP 是否将请求的 Content-Type 限制为 application/x-www-form-urlencoded 以进行非文件上传，或者该 MIME 类型是否“正确”/标准/在任何其他语义上有意义方式？

例如，PHP 自动将内容解析为 $_POST，这似乎表明 x-www-form-urlencoded 是服务器期望的。另一方面，我可以使用 Ajax 在 HTTP 请求内容中发送一个 JSON 对象，并将 Content-Type 设置为 application/json。至少一些服务器技术（例如 WSGI）不会尝试解析它，而是以原始形式将其提供给脚本。

我应该在 RESTful API 中的 POST 和 PUT 请求中使用哪种 MIME 类型，以确保符合 HTTP 的所有服务器实现？我忽略了诸如 SOAP 和 JSON-RPC 之类的技术，因为它们通过 HTTP 隧道协议，而不是按预期使用 HTTP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T17:32:43.667

## 简答

*您应该指定最能描述 HTTP 消息实体主体的任何内容类型。*

## 长答案

> 例如，PHP 自动将内容解析为 $_POST，这似乎表明 x-www-form-urlencoded 是服务器期望的。

服务器没有“期待” `x-www-form-urlencoded`。PHP - 为了使开发人员的生活更简单 -`$_POST`当且仅当`Content-Type: x-www-form-urlencoded`实体主体实际上是一个 urlencoded 键值字符串时，才会将表单编码的实体主体解析为超全局。对于到达的消息，遵循类似的过程`Content-Type: multipart/form-data`来生成`$_FILES`数组。虽然很有帮助，但不幸的是，这些超全局变量被命名了，它们混淆了实际 HTTP 事务中真正发生的事情。

> 我应该在 RESTful API 中的 POST 和 PUT 请求中使用哪种 MIME 类型，以确保符合 HTTP 的所有服务器实现？

您应该指定最能描述 HTTP 消息实体主体的任何内容类型。始终遵守官方的 HTTP 规范——如果你这样做，你就不会出错。来自[RFC 2616 Sec 7.2.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7.2.1)（强调添加）：

> 任何包含实体主体的 HTTP/1.1 消息都应该包含定义该主体的媒体类型的 Content-Type 头字段。**当且仅当媒体类型不是由 Content-Type 字段给出时，接收者可以尝试**通过检查其内容和/或用于识别资源的 URI 的名称扩展来猜测媒体类型。如果媒体类型仍然未知，接收者应该将其视为类型“application/octet-stream”。

任何主流服务器技术都会遵守这些规则。深思熟虑的 Web 应用程序不会信任您的`Content-Type`标头，因为它可能正确也可能不正确。消息的发起者可以随意发送完全虚假的值。通常`Content-Type`检查头部作为初步验证措施，但通过解析实际数据进一步验证内容。例如，如果您将 JSON 数据放入 REST 服务，则端点可能首先检查以确保您已发送`Content-Type: application/json`，然后实际解析消息的实体主体以确保它确实是有效的 JSON。

# asp.net-mvc-3 - Mixing Basic Auth and Forms Authentication in ASP.NET MVC3

> ID：11911440
> 
> 赞同：6
> 
> 时间：2012-08-11T02:40:24.457
> 
> 标签：asp.net-mvc-3, iis, basic-authentication

I have a website with some areas that require a login via forms-based authentication, using my own provider that connects to the database.

The website is in preview so I want to protect the entire site via basic auth to prevent unauthorized access before it goes live.

The problem is when basic and forms auth is on the pages that will be public go to the forms login instead.

How can I keep the forms based authentication for member login and portal access, but protect the entire site from public access before go-live by using basic auth?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:12:21.757

我认为您应该能够通过以下方式满足您的用例。

在站点 .Net 授权规则中，为匿名用户创建拒绝规则。

在站点身份验证启用基本和表单身份验证。禁用所有其他身份验证类型。这应该要求所有用户都通过基本身份验证才能使用基本站点，然后要求表单登录到需要您的自定义身份验证的站点部分。

# gdb - Running a program via GDB until the program segfaults/crashes

> ID：11911445
> 
> 赞同：1
> 
> 时间：2012-08-11T02:40:58.590
> 
> 标签：gdb

I need to debug a program which segfaults at uneven intervals. The program has a `while(true)` loop.

While debugging via GDB, it stops and asks for the `Enter` key to be pressed to continue. However, I want the program to run until it crashes. How do I do that in GDB?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:00:32.047

使用`set height 0`或`set pagination off`。[参考](http://sourceware.org/gdb/current/onlinedocs/gdb/Screen-Size.html#Screen-Size)

# php - 我如何将 sql 当前时间戳和输出作为 php date()？

> ID：11911448
> 
> 赞同：0
> 
> 时间：2012-08-11T02:41:48.137
> 
> 标签：php, sql, timestamp

> **可能重复：**
> [使用 PHP 格式化 SQL 时间戳](https://stackoverflow.com/questions/2303724/formating-an-sql-timestamp-with-php)

我的 SQL 表中有一个具有默认当前时间戳值的列。我正在尝试使用更易读的格式输出它`date()`。

但是，无论我使用哪种格式，我总是得到相同的日期：`1970-01-01 00:33:32`

以下是数据库中当前时间戳的示例值：`2012-08-09 06:37:58`

下面是我用来尝试将其“转换”为可读格式的代码：

```
$value['current_date']// is the var from the database.(containing 2012-08-09 06:37:58)
$somevar = date('Y-m-d H:i:s', $value['current_date']); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:49:23.293

您的问题是您在第二个参数中使用了错误的值。[date() 函数](http://us2.php.net/manual/en/function.date.php)需要一个 UNIX 样式的时间戳作为第二个参数，而不是日期的字符串表示形式。使用[strtotime() 函数](http://us2.php.net/manual/en/function.strtotime.php)更正此问题：

```
$somevar = date('Y-m-d H:i:s', strtotime($value['current_date'])); 
```

但是，正如其他人指出的那样，您为什么要费心进行这种格式化？您想要的格式样式已经在数据库中。它应该很简单：

```
echo $value['current_date']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:50:59.440

首先：如果时间戳已经以所需的格式存在，为什么还要格式化它？

关于实际问题：

见[http://de2.php.net/manual/en/function.date.php](http://de2.php.net/manual/en/function.date.php)

`date()`仅接受 unix 时间戳（自 1970-1-1 00:00:00 UTC 以来的秒数）或根本不接受时间戳。如果您想使用像您这样的时间戳，您需要先使用 、 或 创建一个`date_create()`unix`mktime`时间戳`strtotime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:51:09.860

您遇到的问题是因为 的第二个参数`date()`应该是时间戳，并且由于您传递的是包含 的原始字符串`2012-08-09 06:37:58`，因此 php 不知道该怎么做。

如下修改您的代码，它应该可以工作：

```
$somevar = date('Y-m-d H:i:s', strtotime($value['current_date'])); 
```

`'Y-m-d H:i:s'`您现在可以根据需要使用任何日期格式代替

# wordpress - 为什么WordPress中的整页背景隐藏了页面滚动条？

> ID：11911450
> 
> 赞同：0
> 
> 时间：2012-08-11T02:41:56.623
> 
> 标签：wordpress, background-image

我在测试 wordpress 站点中的整页背景时遇到问题。我无法显示页面滚动条。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:16:56.810

[编辑]

问题是您将以下内容添加到您的正文标签中。

```
position: fixed; 
```

删除该行，然后一切都应该正常工作。

* * *

这可能是因为不需要滚动条，因为页面不会扩展屏幕分辨率的整个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:34:38.287

我只是自己想出来的：

我将其更改为背景图像：

`position: absolute;`

到

```
position: fixed; 
```

并删除

```
overflow: hidden; 
```

这允许滚动条出现，并且固定的背景位置使背景保持原位。背景仍然完美地重新调整大小，这只是让您的内容滚动。

然后添加以下内容以消除出现的水平滚动：

```
overflow-x: hidden; /*Horizontal scrollbar*/
-ms-overflow-x: hidden; /*IE 8 horizontal scrollbar*/ 
```

# objective-c - 使用回调确定 OpenAL 何时完成播放音频

> ID：11911451
> 
> 赞同：1
> 
> 时间：2012-08-11T02:42:01.520
> 
> 标签：objective-c, ios, avfoundation, openal

我想知道什么相当于在 OpenAL中使用`AVAudioPlayerDelegate`'方法。`audioPlayerDidFinishPlaying:successfully:`例如：

```
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    // (code or conditions for when the audio has finished playing...)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:31:42.593

一般来说，OpenAL 不会在音频播放完毕时通知您，因此没有真正的`AVAudioPlayerDelegate`. 最*简单*的方法是简单地将函数/块调用延迟音频的长度。例如，您可以使用 libdispatch（又名 Grand Central Dispatch）在设定的时间后将块添加到队列中：

```
dispatch_time_t delay;
dispatch_queue_t queue;
dispatch_block_t block;
uint64_t audio_length_ns = 10000000000; // 10 seconds

delay = dispatch_time(DISPATCH_TIME_NOW, audio_length_ns);
queue = dispatch_get_main_queue();

block = ^{
  // Do whatever you need to after the delay
  // Maybe check to see if the audio has actually
  // finished playing and queue up the block again
  // if it hasn't.
};

// Queue up the block for the time after 
dispatch_after(delay, queue, block); 
```

正如块内的注释中提到的，稍微困难的方法是检查 OpenAL 是否在块中完成，如果没有，则将块再次推送到队列中（可能延迟更短，特别是如果你可以估计多长时间）。不过，一般来说，您可能不需要专心致志，只要在声音完成度的适当范围内就足够了。

您也可以通过其他方法来安排此类事情，例如`performSelector:withObject:afterDelay:`，但就 API 而言，这更多地取决于您的偏好。这个想法几乎是一样的。

# python - Close inactive connections in Twisted

> ID：11911453
> 
> 赞同：1
> 
> 时间：2012-08-11T02:42:04.250
> 
> 标签：python, twisted

I'm running a Twisted server with the LineReceiver protocol. Sometimes clients will disconnect silently, so Twisted keeps the connection open. And because the server doesn't send anything unless requested of it, there's never a TCP timeout. In other words, some connections are never closed server-side.

How can I have Twisted close a connection that's been inactive for a few hours?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:08:48.140

您可以使用`reactor.callLater`. 基于此，有一个助手可以为协议添加超时，`twisted.protocols.policies.TimeoutMixin`.

另一种方法是使用 TCP keep-alives，您可以使用传输的`setTcpKeepAlive`方法启用它。

另一种方法是使用应用程序级保活。基本上偶尔发送一个“noop”。它不需要回应。如果连接丢失，发送缓冲区中的额外数据将导致 TCP 堆栈最终注意到。

另请参阅[FAQ 条目](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#WhyisntmyconnectionLostmethodcalled)。

# jdbc - DB connection in oracle

> ID：11911459
> 
> 赞同：1
> 
> 时间：2012-08-11T02:43:12.570
> 
> 标签：jdbc

```
Exception in thread "main" java.sql.SQLException: Listener refused the connection with the following error: ORA-12505, TNS:listener does not currently know of SID given in connect descriptor  
The Connection descriptor used by the client was:localhost:1521:orcl

at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)  
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)  
at oraenter code herecle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)  
at java.sql.DriverManager.getConnection(DriverManager.java:582)  
at java.sql.DriverManager.getConnection(DriverManager.java:185)  
at com.test.Date.main(Date.java:13) 
```

This is my code

```
Class.forName("oracle.jdbc.driver.OracleDriver");  
Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","system","tiger"); 
```

I veried `tnsnames.ora` file also

```
ORCL =
(DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SID = orcl)
    )
) 
```

I added `ojdbc14.jar` in my classpath and i am using `oracle10g`

Could you please help me on this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:11:27.407

如前所述，检查您是否能够进行`tnsping`类似操作`tnsping orcl`，如果效果良好，请尝试从 sqlplus 或任何工具（如`TOAD`or ）连接到您的数据库`SQLDeveloper`。如果您遇到任何错误，请发布错误，否则使用以下内容连接到您的数据库并查看它是如何工作的。

```
 try {
                Class.forName("oracle.jdbc.OracleDriver");
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
                return;
            }
            Connection con = null;
            try {
                con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","system","tiger");
                   } catch (SQLException ex) {            
            ex.printStackTrace();            
        } finally {
            close(connection);
        }
return 
```

**`Update 1`**

你可以试试下面的代码

```
jdbc:oracle:thin:@//localhost:1521:orcl","system","tiger 
```

如果这不起作用，也试试这个

```
jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCPS)(HOST=<host>)(PORT=<port>))(CONNECT_DATA=(SERVICE_NAME=<service>))) 
```

更多信息[在这里](http://www.orafaq.com/wiki/JDBC)

问候

# mysql - Bash Script Evaluate String Problems

> ID：11911461
> 
> 赞同：1
> 
> 时间：2012-08-11T02:43:36.293
> 
> 标签：mysql, bash, shell, terminal

I'm trying to create a script to automatically delete all of the tables from a database using shell.

The commented out variable $drop works fine, however when I try to substitute in the table

```
for table in $tables
do
    command="'drop table ${table}'"

    # drop=$(${login} -e 'drop table test') -- this works fine
    drop=$(${login} -e $command)
    echo $drop
    # echo -e "Removed table ${table}"
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:13:10.070

*（主要编辑）*

问题在于您使用引号。在您的代码中，由于您不引用`$command`它，因此它会被 shell 分词。$login 命令接收这些参数：`"-e", "'drop", "table", "table_name'"`-- 注意第二个和最后一个元素中的杂散单引号。

做这个：

```
command="drop table $table"
drop=$($login -e "$command") 
```

# delphi - 如何跨网络查看OutputDebugString()的输出？

> ID：11911468
> 
> 赞同：2
> 
> 时间：2012-08-11T02:44:48.790
> 
> 标签：delphi, debugview, outputdebugstring

除了[我之前的问题](https://stackoverflow.com/questions/11218434/how-to-view-output-of-outputdebugstring)，我发现我无法在以前没有安装 Delphi 的 PC 上使用 GExpertsDebugWindow。

如果我有以下（不是不寻常的，因此可能对其他人感兴趣）要求，我是否需要推出自己的代码，或者是否有现有的**免费**解决方案？

1.  必须能够通过指定 PC 2 的 IP 地址读取整个网络（即 PC 1 监视 PC 2 的调试输出）
2.  如果可能，我希望能够按进程名称过滤

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T18:53:52.447

Microsoft 的[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)工具具有这些功能。它可以显示`OutputDebugString`输出，甚至来自远程系统。根据其他因素，它甚至可以远程安装。

# python - 用于搜索查询的 TF*IDF

> ID：11911469
> 
> 赞同：17
> 
> 时间：2012-08-11T02:44:49.713
> 
> 标签：python, nlp, nltk, scikit-learn, tf-idf

好的，所以我一直在关注 TF*IDF 上的这两个帖子，但有点困惑：[http ://css.dzone.com/articles/machine-learning-text-feature](http://css.dzone.com/articles/machine-learning-text-feature)

基本上，我想创建一个搜索查询，其中包含对多个文档的搜索。我想使用 scikit-learn 工具包以及 Python 的 NLTK 库

问题是我看不到这两个 TF*IDF 向量来自哪里。我需要一个搜索查询和多个文档来搜索。我想我会针对每个查询计算每个文档的 TF*IDF 分数，并找到它们之间的余弦相似度，然后通过按降序对分数进行排序来对它们进行排名。但是，代码似乎没有提出正确的向量。

每当我将查询减少到只有一次搜索时，它就会返回一个巨大的 0 列表，这真的很奇怪。

**这是代码：**

```
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.feature_extraction.text import TfidfTransformer
from nltk.corpus import stopwords

train_set = ("The sky is blue.", "The sun is bright.") #Documents
test_set = ("The sun in the sky is bright.") #Query
stopWords = stopwords.words('english')

vectorizer = CountVectorizer(stop_words = stopWords)
transformer = TfidfTransformer()

trainVectorizerArray = vectorizer.fit_transform(train_set).toarray()
testVectorizerArray = vectorizer.transform(test_set).toarray()
print 'Fit Vectorizer to train set', trainVectorizerArray
print 'Transform Vectorizer to test set', testVectorizerArray

transformer.fit(trainVectorizerArray)
print transformer.transform(trainVectorizerArray).toarray()

transformer.fit(testVectorizerArray)

tfidf = transformer.transform(testVectorizerArray)
print tfidf.todense() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T09:58:52.530

您将`train_set`and定义`test_set`为元组，但我认为它们应该是列表：

```
train_set = ["The sky is blue.", "The sun is bright."] #Documents
test_set = ["The sun in the sky is bright."] #Query 
```

使用这个代码似乎运行良好。

# regex - 路由中uri slug的codeigniter正则表达式

> ID：11911472
> 
> 赞同：0
> 
> 时间：2012-08-11T02:45:29.210
> 
> 标签：regex, codeigniter, routes, slug

我想从控制器 my_controller 调用一个函数，将两个参数传递给 some_method：第一个参数是 slug（即 some-website-slug）；第二，一个数字。这就是我正在尝试的：

```
$route['my_controller/([a-z0-9]+(-[a-z0-9]+)*)/(:num)'] = "my_controller/some_method/$1/$2"; 
```

问题是，它总是传入“-slug”（即 slug 字符串的最后一部分）而不是数字。因此，例如

base_url/my_controller/some-uri-slug/2

它将传入“-slug”而不是数字 2。正则表达式有问题还是 CI 有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:46:10.890

你的正则表达式有两对`()`，所以`(:num)`实际上`$3`不是`$2`。

# javascript - 通过 Javascript 创建 POST 变量

> ID：11911474
> 
> 赞同：0
> 
> 时间：2012-08-11T02:45:36.140
> 
> 标签：javascript, ajax, select, drop-down-menu

我不是 javascript 专家，甚至不是业余爱好者。我发现了一些我正在使用的脚本，并且想知道如何在代码中创建第二个变量。

```
 <script type="text/javascript">
        $(document).ready(function(){
            $("select#type").attr("disabled","disabled");
            $("select#category").change(function(){
            $("select#type").attr("disabled","disabled");
            $("select#type").html("<option>wait...</option>");
            var id = $("select#category option:selected").attr('value');
            $.post("select_type.php", {id:id}, function(data){
                $("select#type").removeAttr("disabled");
                $("select#type").html(data);
            });
        });
    });
    </script> 

   <script type="text/javascript">
        $(document).ready(function(){
            $("select#model").attr("disabled","disabled");
            $("select#type").change(function(){
            $("select#model").attr("disabled","disabled");
            $("select#model").html("<option>wait...</option>");
            var id = $("select#type option:selected").attr('value');
            $.post("select_model.php", {id:id}, function(data){
                $("select#model").removeAttr("disabled");
                $("select#model").html(data);
            });
        });
    });
    </script> 
```

在第二段代码中，我想获取类别 ID 并创建另一个名为 $_POST[cat_id] 的帖子变量。如何在同一段 javacode 中再次引用 select_type.php？

这是一个 3 件链式下拉菜单，其中..

下降 #1 产生下降 #2。下降 #1 和 #2 一起产生下降 #3。

我需要做的就是如何添加从第一个下拉列表中抓取它的第二个变量。

任何帮助表示赞赏。

* * *

编辑：我试图添加这样的东西，但它不起作用。第二个变量需要来自下拉菜单中的初始第一个选择，如 select_type.php 文件，或者如果可以以某种方式存储并保留初始值以帮助填充第三个选择。：

```
 <script type="text/javascript">
        $(document).ready(function(){
            $("select#model").attr("disabled","disabled");
            $("select#type").change(function(){
            $("select#model").attr("disabled","disabled");
            $("select#model").html("<option>wait...</option>");
            var carrier = $("select#type option:selected").attr('value');
            $.post("select_model.php", {carrier:carrier}, function(data){
                $("select#model").removeAttr("disabled");
                $("select#model").html(data);
            });
            var countryid = $("select#category option:selected").attr('value');
            $.post("select_type.php", {countryid:countryid}, function(data){
                $("select#type").removeAttr("disabled");
                $("select#type").html(data);
            });         
        });
    });
    </script> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:07:48.200

这就是你可以做到的。

```
var id = $("select#type option:selected").attr('value');
var categoryID = 34; 
$.post("select_model.php", {id:id, cat_id:categoryID}, function(data){
    $("select#model").removeAttr("disabled");
    $("select#model").html(data);
}); 
```

对于多个下拉列表，请参阅：[如何处理多个选择下拉列表-JQuery](https://stackoverflow.com/questions/11899137/how-to-handle-multiple-select-dropdown-jquery/11900065#11900065)。它使用的是静态内容，但我希望您可以修改它，在两者之间添加所需的 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:52:59.883

编辑---我误解了你的要求。您需要在第一个 Dropbox 上设置一个事件处理程序。你需要做更多这样的事情：

```
$.post("select_model.php", {carrier:carrier}, function(data){
    $("select#model").removeAttr("disabled").html(data);
});
$("select#category").change(function(){
    var countryid = $("select#category option:selected").attr('value');
    $.post("select_type.php", {countryid:countryid}, function(data){
        $("select#type").removeAttr("disabled").html(data);
    });
}); 
```

# java - 使用类制作 .JAR 文件，错误：无效或损坏的文件

> ID：11911476
> 
> 赞同：0
> 
> 时间：2012-08-11T02:45:57.913
> 
> 标签：java, jar

> **可能重复：**
> [损坏的 jar 文件](https://stackoverflow.com/questions/7559072/corrupt-jar-file)

我在 Eclipse 中做了一个游戏，并将所有的类文件打包在`test.jar`. 当我尝试运行它时，它给了我错误：

> ```
> Error: invalid or corrupted jar file. 
> ```

我`.jar`使用 Winrar 打开文件，一切都在里面。

我在 Stack OverFlow 上寻找过类似的问题，但没有找到。你能告诉我如何解决这个错误吗？

***对于遇到此问题的每个人，解决方案：*** 转到文件，导出，导出为 Runnable Jar，选择您的主类，完成。如果要在 cmd 中运行程序，请创建一个新的文本文件，然后键入 java -jar project.jar 和 project = name of your program。把它保存为Run.bat 然后打开Run.bat，它会自动打开project.jar 就是这样，它对我有用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:00:03.607

你如何将你的类放到 tar.jar 中？一个有效的 jar 文件必须遵循它需要的一些规则。您最好使用 Eclipse 工具生成它们。单击“导出”->“jar”并选择游戏的正确条目。祝你好运。

# python - Python PIL 没有属性“图像”

> ID：11911480
> 
> 赞同：48
> 
> 时间：2012-08-11T02:46:32.973
> 
> 标签：python, import, python-imaging-library

我正在使用python2.6，今天早上遇到了问题。它说“模块”没有属性“图像”。这是我的输入。为什么我第一次不能使用 PIL.Image？

```
>>> import PIL
>>> PIL.Image
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'Image'
>>> from PIL import Image
>>> Image
<module 'PIL.Image' from '/usr/lib/python2.6/dist-packages/PIL/Image.pyc'>
>>> PIL.Image
<module 'PIL.Image' from '/usr/lib/python2.6/dist-packages/PIL/Image.pyc'> 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-11T02:59:38.960

PIL`__init__.py`只是一个常见的空存根。它本身不会神奇地导入任何东西。

当你这样做时`from PIL import Image`，它会在 PIL 包中查找并找到文件 Image.py 并将其导入。当你这样做时，`PIL.Image`你实际上是在 PIL 模块上进行属性查找（这只是一个空存根，除非你明确地导入东西）。

实际上，导入模块通常**不会**导入子模块。`os.path`是一个著名的例外，因为 os 模块很神奇。

更多信息：
[图像模块](http://effbot.org/imagingbook/image.htm)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-09-09T23:39:17.540

如果您像我一样发现接受的答案有点令人困惑，因为您可以*发誓*您已经能够使用

```
import PIL
PIL.Image 
```

有时在此之前，一个潜在的原因是，如果您的 Python 会话中的**任何**`from PIL import Image`其他代码已经运行，或者`import PIL.Image`即使它在完全不同的范围内，*您也可以访问`PIL.Image`*.

特别是`matplotlib`在导入时会这样做。所以如果你跑

```
import matplotlib
import PIL
PIL.Image 
```

*它有效*。谢谢，蟒蛇。

不要相信任何人。不要相信 Python。使用`import PIL.Image`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-11T06:32:22.160

你可以做：

```
try:
    import Image
except ImportError:
    from PIL import Image 
```

最好用枕头代替 PIL。

# android - 如何使用 viewholder 模式管理 gson 提供的图像？

> ID：11911486
> 
> 赞同：1
> 
> 时间：2012-08-11T02:49:01.160
> 
> 标签：android, image, listview, gson

我正在做一个 tweer feeder，但我不知道如何使用 viewHolder 模式管理图像

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {               
         inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
         v = inflater.inflate(R.layout.activity_result, null);
         holder = new ViewHolder();

         holder.name = (TextView) v.findViewById(R.id.name);
         holder.tweet = (TextView) v.findViewById(R.id.tweet);
         holder.avatar = (ImageView) v.findViewById(R.id.avatar);
         Log.v("TAG", "ACA SI LLEGE holder cargado");
         holder.name.setText(mitems.get(position).getFromUser());
         holder.tweet.setText(mitems.get(position).getText());

         task = new BackgroundAsyncTask(this, position);
         task.execute();

         v.setTag(holder);
    } else {              
     holder = (ViewHolder) convertView.getTag();          
     }                             
   return v; 

}

public class BackgroundAsyncTask extends AsyncTask<Void, Integer, Void>{

    private ResultsAdapter resultAdapter;
    private int position;
    private MyApplication myapp;
    private Bitmap bitmap;

    public BackgroundAsyncTask(ResultsAdapter adptr, int position){
        this.resultAdapter = adptr;
        this.position = position;
    }

    @Override
    protected Void doInBackground(Void... params) {

          try {
                for(int i = 0; i < mitems.size(); i++){               
                bitmap = BitmapFactory.decodeStream((InputStream)
                  new URL(mitems.get(i).getProfileImageUrl()).getContent()); 
          }
          } catch (MalformedURLException e) {   
              e.printStackTrace(); 
          } catch (IOException e) {   
              e.printStackTrace(); 
          } 

        return null;
    }

    @Override  
    protected void onProgressUpdate(Integer... values) {     
            myapp.setProgreso(values[0]);
    }
    @Override
    protected void onPostExecute(Void result){       
        holder.avatar.setImageBitmap(bitmap);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:03:43.763

解决方案：

```
public class ResultsAdapter extends BaseAdapter{

private Context mContext;
private LayoutInflater inflater;
private List<Result> mitems;
private List<ImageView> allImageViews = new ArrayList<ImageView>();
private ViewHolder holder;
private BackgroundAsyncTask task;

public ResultsAdapter(Context c, List<Result> mitems){
    mContext = c;
    inflater = LayoutInflater.from(mContext);
    this.mitems = mitems;
} 

@Override
public int getCount() {
    return mitems.size();
}

@Override
public Object getItem(int position) {
    return mitems.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {               
         inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
         v = inflater.inflate(R.layout.activity_result, null);
         holder = new ViewHolder();          
         holder.name = (TextView) v.findViewById(R.id.name);
         holder.tweet = (TextView) v.findViewById(R.id.tweet);
         holder.avatar = (ImageView) v.findViewById(R.id.avatar);
         holder.name.setVisibility(holder.name.INVISIBLE);
         holder.tweet.setVisibility(holder.tweet.INVISIBLE);
         holder.name.setText(mitems.get(position).getFromUser());
         holder.tweet.setText(mitems.get(position).getText());

         allImageViews.add(holder.avatar);

         task = new BackgroundAsyncTask();
         task.execute();
         holder.name.setVisibility(holder.name.VISIBLE);
         holder.tweet.setVisibility(holder.tweet.VISIBLE);

         v.setTag(holder);
    } else {              
     holder = (ViewHolder) convertView.getTag();          
     }                             
   return v;    
}
public class BackgroundAsyncTask extends AsyncTask<Void, Integer, Void>{

    private MyApplication myapp;
    private List<Bitmap> bitmaps;
    private ProgressDialog dialog;

    public BackgroundAsyncTask(){
        bitmaps = new ArrayList<Bitmap>();
        dialog = new ProgressDialog(mContext);
        dialog.setTitle("Twitter Searching App");
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMessage("Searching...");
        dialog.setCancelable(true);
        dialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel",   
                        new DialogInterface.OnClickListener() {   
                          public void onClick(DialogInterface dialog, int which) {   
                            dialog.cancel();    
                          }   
                        }   
                      );
    }

    @Override
    protected Void doInBackground(Void... params) {
         for(int i =0; i < allImageViews.size(); i++){                             
              try {               
                    bitmaps.add(BitmapFactory.decodeStream((InputStream)
                      new URL(mitems.get(i).getProfileImageUrl()).getContent())); 
              } catch (MalformedURLException e) {   
                  e.printStackTrace(); 
              } catch (IOException e) {   
                  e.printStackTrace(); 
              }                      
         }

        return null;
    }
    @Override
    protected void onPreExecute() {                 
        dialog.show();     
    }

    @Override  
    protected void onProgressUpdate(Integer... values) {     
            myapp.setAdptr(ResultsAdapter.this);
    }
    @Override
    protected void onPostExecute(Void result){       
        for(int i =0; i < allImageViews.size(); i++){ 
            allImageViews.get(i).setImageBitmap(bitmaps.get(i));
            holder.avatar = allImageViews.get(i);
        }
        if (dialog.isShowing()) {             
            dialog.dismiss();         
            }
    }

 }

static class ViewHolder{
    TextView name, tweet;
    ImageView avatar;
}

} 
```

# sql-server-2008 - 如何更改我从 SQL Server 获得的 XML 模式的格式

> ID：11911488
> 
> 赞同：1
> 
> 时间：2012-08-11T02:49:15.017
> 
> 标签：sql-server-2008, xsd, for-xml

我有一个查询：

```
SELECT top 0 * FROM sometable FOR XML AUTO, ELEMENTS, XMLSCHEMA ('MyURI') 
```

此查询返回一个模式：

```
<xsd:element name="ClientName">
  <xsd:simpleType>
    <xsd:restriction base="sqltypes:nvarchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">
      <xsd:maxLength value="50" /> 
    </xsd:restriction>
  </xsd:simpleType>
</xsd:element> 
```

但我想要更像这样的东西：

```
<xsd:element name="ClientName">
  <xsd:simpleType>
   <xsd:restriction base="xsd:string">
     <xsd:maxLength value="50" /> 
   </xsd:restriction>
  </xsd:simpleType>
</xsd:element> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T15:43:30.353

您可以使用 XSL 转换将 SQL Server 类型更改回所需的 XSD 类型。

如何应用转换取决于您的应用程序。如果要为表创建静态架构，则可以使用 Visual Studio 或 msxsl 之类的东西。如果这是来自服务器的例行请求，那么*[应用 XSL 转换（SQLXML 托管类）](http://msdn.microsoft.com/en-us/library/ms171950.aspx)*可能更合适。

您可以使用其他类型构建的样式表是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
  xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes"
  xmlns="http://www.w3.org/1999/XSL/Transform"
  >
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="Strip">false</xsl:param>
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@base">
    <xsl:attribute name="{name()}">
      <xsl:choose>
        <xsl:when test=".='sqltypes:nvarchar'">xsd:string</xsl:when>
        <!-- Add additional tests here -->
        <xsl:otherwise>
          <xsl:value-of select="."/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="@sqltypes:*">
    <xsl:if test="$Strip=true">
      <xsl:comment>
        <xsl:text>Stripped (</xsl:text>
        <xsl:value-of select="concat(name(), '=&quot;', ., '&quot;')"/>
        <xsl:text>)</xsl:text>
      </xsl:comment>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

如果您需要查看在转换过程中被剥离的属性，请将开头的 Strip 参数更改为 false。

# image - Forumla 从 RBG 值确定发红

> ID：11911491
> 
> 赞同：2
> 
> 时间：2012-08-11T02:50:40.710
> 
> 标签：image, colors, rgb

我正在寻找一个公式来确定 RGB 颜色的红色度。我敢肯定有一些非常简单的公式，但我一直没能找到它。

基本上，它会是这样的：

```
function rednessAsPercent(r, g, b) {
  // Does some math to determine redness.
}

alert(rednessAsPercent(255, 0, 0)); // Alerts: 100
alert(rednessAsPercent(255, 255, 0)); // Alerts: 0\.  This is pure yellow.
alert(rednessAsPercent(255, 122, 122)); // Alerts: ~50\.  This is sort of pink. 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:04:20.890

您必须对“发红”的含义提出一个更好的定义-在什么范围内（大概是红-蓝-黄）

这可能有用： [http ://en.wikipedia.org/wiki/HSL_color_space](http://en.wikipedia.org/wiki/HSL_color_space)

# django - Django1.4 form.is_valid() 总是返回 True

> ID：11911492
> 
> 赞同：0
> 
> 时间：2012-08-11T02:50:50.003
> 
> 标签：django

```
class ContactForm(forms.Form):
    subject = forms.CharField()
    email = forms.EmailField(required = False)
    message = forms.CharField() 
```

蟒蛇壳：

```
>>> f = ContactForm({'subject': 'Hello'})
>>> f.is_valid()
>>> True 
```

这不是我所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:15:28.227

这不是答案，但我没有看到这种行为。在我的情况下，表格无效。这是来自 django shell，

```
>>> class ContactForm(forms.Form):
...     subject = forms.CharField()
...     email = forms.EmailField(required = False)
...     message = forms.CharField()
... 
>>> 
>>> 
>>> cf = ContactForm({'subject': "hello"})
>>> cf.is_valid()
False
>>> cf.errors
{'message': [u'This field is required.']} 
```

# linux - 增加 APT::Cache-Limit 的大小

> ID：11911495
> 
> 赞同：1
> 
> 时间：2012-08-11T02:50:56.093
> 
> 标签：linux

当我用更新管理器更新我的 Ubuntu 系统时，我遇到了一个错误，现在更新管理器卡住了。错误信息是：

> 初始化包信息时出现无法解决的问题。
> 
> 请针对“update-manager”包报告此错误并包含以下错误消息：
> 
> 'E:Dynamic MMap 空间不足。请增加 APT::Cache-Limit 的大小。当前值：25165824。（man 5 apt.conf），E：处理月光工具（NewVersion1）时发生错误，E：MergeList /var/lib/apt/lists/us.archive.ubuntu.com_ubuntu_dists_lucid-proposed_universe_binary-的问题i386_Packages，E：无法解析或打开包列表或状态文件。

我搜索了如何增加缓存限制，并更改`/etc/apt/apt.conf.d/70debconf`为

```
APT::Cache-Limit "100000000" 
```

但是这个解决方案不起作用。问题没有解决。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-19T07:31:18.077

这些步骤在 Ubuntu 16 中对我有用：

将行添加`APT::Cache-Limit "100000000";`到文件`/etc/apt/apt.conf.d/70debconf`

删除所有损坏的合并列表。

```
sudo rm /var/lib/apt/lists/* -vf 
```

然后使用以下命令运行更新将自动创建一个好的新`/var/lib/dpkg/status`文件。

```
sudo apt-get update 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T15:19:36.153

不要将行添加到`APT::Cache-Limit "100000000";`文件中，而是将其添加到为我解决问题`/etc/apt/apt.conf.d/70debconf`的文件中。`/etc/apt/apt.conf.d/20archive`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T20:58:13.267

您是否尝试过`/etc/apt/apt.conf.d/20archive`设置最大尺寸和最大年龄值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:20:47.750

您可以尝试清理可能已损坏的 APT 列表，然后将其替换为现有的工作列表。

```
sudo rm /var/lib/apt/lists/* -vf
sudo mv /var/lib/dpkg/status /var/lib/dpkg/status-bad
sudo cp /var/lib/dpkg/status-old /var/lib/dpkg/status
sudo apt-get update 
```

您可以尝试参考此处了解更多信息：[https ://justinalex.com/ubuntu-fixing-the-apt-repository-and-package-manager-2/](https://justinalex.com/ubuntu-fixing-the-apt-repository-and-package-manager-2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-27T15:06:16.383

2017 年 1 月 27 日

Mepis 12 变体：

当尝试激活 Mepis 12 中的所有可用存储库时，Synaptic 会抱怨，

“E：动态 MMap 空间不足。请增加 APT::Cache-Start 的大小。”

并在退出时崩溃，随后拒绝重新启动。

需要全部可用 repos 的 Mepis 用户应编辑 /etc/apt/apt.conf.d/ 目录中“80mepis”文件的内容以阅读

```
 APT::Cache-Limit "100000000"; 
```

正如上述类似受影响发行版中的 /etc/apt/apt.conf.d/70debconf 文件所建议的那样。迄今为止，我的 Mepis 12 最终版安装都需要此修复程序，以便按需启用完整的存储库。

衷心感谢之前离开的其他人。作为一个长期的公共 Mepis 安装程序，我认为清理系统

```
rm /var/lib/apt/lists/* -vf
mv /var/lib/dpkg/status /var/lib/dpkg/status-bad
cp /var/lib/dpkg/status-old /var/lib/dpkg/status 
```

然后做一个

```
apt-get update 
```

命令行中的命令，如上面所建议的，全部为 su（又名 root），也是一个非常好的主意。仅此而已。0{:-)o[

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-04T01:10:31.513

可能是由于服务器资源限制，设置 `APT::Cache-Limit "100000000";`对我不起作用。

我最后的手段是暂时停止资源密集型服务并执行升级。

谢谢，

# javascript - javascript Uncaught ReferenceError: uneval 未定义

> ID：11911496
> 
> 赞同：1
> 
> 时间：2012-08-11T02:50:57.137
> 
> 标签：javascript

`Uncaught ReferenceError: uneval is not defined`

它适用于 Firefox，但不适用于 Google Chrome。

我尝试：

```
var getSaved = [['ABC', 'http://...'], ['DEF', 'http://...'], ['...etc...']];
var get_saved_items = eval(getSaved);
var name = [], url = [];
for (var i = 0; i < get_saved_items.length; i++) {
    name[i].push(get_saved_items[i][0]);
    url[i].push(get_saved_items[i][1]);
};
window.localStorage.setItem('saved_name', uneval(name));
window.localStorage.setItem('saved_links', uneval(url)); 
```

它返回：`Uncaught ReferenceError: uneval is not defined`

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:53:59.810

我相信`uneval`只是在 SpiderMonkey 中，所以只是基于 mozilla 的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:48:11.653

由于不同的原因，不推荐使用“eval”（你可以用谷歌搜索）。`uneval`将无法在其他浏览器中使用。

根据您的要求，您可以使用 JSON 解析器。广泛使用的一种是 Crockford 的 JSON 解析器。

[https://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

```
var numbers = '[1, 2, 3, 4, 5, 6]'; 
var names = '["abc", "def", "ghi", "jkl", "mno", "pqr"]';

// string to Javascript object 
var numbersObject = JSON.parse(numbers);
var namesObject = JSON.parse(names);

console.log(numbersObject);
console.log(namesObject);

// Javascript object to string
numbers = JSON.stringify(numbersObject);
names = JSON.stringify(namesObject);

console.log(numbers);
console.log(names); 
```

演示：http: [//jsfiddle.net/xVvBp/](http://jsfiddle.net/xVvBp/)

# forms - Python 3 中的多部分表单编码文件上传

> ID：11911500
> 
> 赞同：2
> 
> 时间：2012-08-11T02:51:17.473
> 
> 标签：forms, post, python-3.x, multipart

我想知道是否可以`enctype='multipart/form-data'`在 Python 3 中发布到表单。我环顾四周，只能找到 Python 2 的东西（例如海报）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T11:04:14.413

使用[requests](http://docs.python-requests.org/en/latest/)，它支持 python 3。

```
import requests

response = requests.post('http://httpbin.org/post', files={'file': open('filename','rb')})
print(response.content) 
```

# php - 使用 PHP 添加当前页面类

> ID：11911501
> 
> 赞同：-1
> 
> 时间：2012-08-11T02:51:25.917
> 
> 标签：php

我创建了一个定义站点 URL 的 config.php 文件，我还使用 DEFINE 为模板 URL“/_inc”创建了一个变量。我在functions.php中成功调用了这些变量，然后我创建了一个显示URL的函数，我将functions.php文件包含到我的header.php中，然后包含那个elswhere。

一切正常，但我试图在 if 语句中使用该函数将 current_page_item 类添加到导航链接。我目前正在使用以下代码，该代码不起作用，因为我的编码不正确。我需要知道正确的编码程序。

```
<?php if(site_url(). '/index.php') { echo 'current_page_item'; } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:58:20.540

您的函数应该只返回域根之后的 URL 部分（从第一个斜杠开始）。然后你可以这样做：

```
if($_SERVER['PHP_SELF'] == site_url() . 'index.php') { echo 'current_page_item'; } 
```

我假设您当前的函数返回完整的 URL。您只是将其与 index.php 连接起来，而不是将其与任何东西进行比较。您必须将其与 php.ini 提供的当前 URL 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:47:34.923

在包含 header.php 时，我还声明了变量。我使用下面的代码来解决这个问题。

```
<?php if($get_page_name == 'Home') echo 'current_page_item'; ?> 
```

# perl - Perl 机械化 follow_link 失败

> ID：11911502
> 
> 赞同：2
> 
> 时间：2012-08-11T02:51:39.953
> 
> 标签：perl, automation, web-scraping, mechanize

我正在尝试使用以下代码登录网站

```
my $mech = WWW::Mechanize->new(autosave=>1);
$mech->cookie_jar(HTTP::Cookies->new());
$mech->get($url);
$mech->follow_link( text => 'Sign In');
$mech->click();
$mech->field(UserName => "$username");
$mech->field(Password => "$password");
$mech->submit(); 
```

但是在 follow_link 期间，href 包含两个前斜杠，例如 ( `//test/sso-login`)，因此 follow_link 将其视为整个 URL，并且失败如下

```
Error GETing http://test/sso-login: Can't connect to test:80 (Bad hostname) 
```

我无法更改 href，因为它是我的控制。有没有办法克服这个问题，并使其采用附加此 href 的完整 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:56:03.543

当然。您可以在调用之前修改 Mech 正在查看的 HTML `follow_link()`：

```
my $html = $mech->content;
$html =~ s[//test/sso-login][http://example.com/test/sso-login]isg;
$mech->update_html( $html ); 
```

有关详细信息，请参阅[文档](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)。在该页面上搜索“update_html”。

# r - 如何使用 mtext 在分组条形图的条形图上添加值？

> ID：11911506
> 
> 赞同：3
> 
> 时间：2012-08-11T02:53:10.590
> 
> 标签：r, plot

如何使用在柱上写值`mtext`？

```
# Grouped Bar Plot
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",xlab="Number of Gears", col=c("darkblue","red"),legend = rownames(counts), beside=TRUE, horiz=TRUE)

mtext(counts )   # But position is not at each bar. 
```

如何在每个条形图上放置相应的值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-11T03:17:39.227

嗯，`mtext`一般是用于边距。你有不想使用的理由`text`吗？

```
 bplt <- barplot(counts, 
                 main="Car Distribution by Gears and VS", xlab="Number of Gears", 
                 col=c("darkblue","red"), legend = rownames(counts), 
                 beside=TRUE, horiz=TRUE)

# variable 'bplt' is now a matrix of vertical bar positions on the y-axis

text(x= counts+0.3, y= bplt, labels=as.character(counts), xpd=TRUE)
# Needed to use xpd=TRUE because the xlimits were too narrow. 
```

![在此处输入图像描述](../Images/94330a0224404d135cba13a22ba29bdd.png)

# objective-c - 在 UITableView 中加载 Mime 类型图像

> ID：11911507
> 
> 赞同：0
> 
> 时间：2012-08-11T02:53:22.893
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview, custom-cell

我想知道如何在 iOS 上的 UITableView 中为音乐文件创建通用音乐图像，例如图像文件的通用图片图像。这是我正在尝试做的图片[http://smartlifeblog.com/wp-content/uploads/2012/02/dropbox-ios.jpg](http://smartlifeblog.com/wp-content/uploads/2012/02/dropbox-ios.jpg)

到目前为止，我有代码来显示我的文档目录中的文件

```
static NSString *CellIdentifier = @"FileCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.textLabel.text = [files objectAtIndex:indexPath.row];
return cell; 
```

我可以在表格中添加图像，但我不确定如何为适当的文件类型加载适当的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:03:45.990

见`UIDocumentInteractionController`。它使用文件 URL 进行初始化。然后，该`icons`属性会为您提供该文件的图标数组，从小到大排序。这适用于操作系统已知的所有文档类型。您可以在应用程序的 Info.plist 中使用其图标注册其他类型。

# mysql - MySQL：以随机顺序返回前 16 个结果

> ID：11911508
> 
> 赞同：0
> 
> 时间：2012-08-11T02:53:25.967
> 
> 标签：mysql, random

我正在尝试查询我的数据库以返回前 16 个排序结果（按名为 rank 的字段排序），但顺序是随机的。

我可以通过使用 php 对返回的（和排序的）16 个结果进行改组来调整 php 将使用的数组来轻松地做到这一点。我想知道是否有一种简单的方法可以直接在查询本身中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:56:43.860

尝试

```
select * from 
(
    select * from your_table 
    order by rank
    limit 16
) x
order by rand() 
```

# javascript - jquery更改被替换对象的处理程序

> ID：11911512
> 
> 赞同：0
> 
> 时间：2012-08-11T02:55:20.440
> 
> 标签：javascript, jquery, ajax, triggers, replace

如果在替换对象后对其进行检查，是否有办法继续检查它

这说明了我遇到的问题

[http://jsfiddle.net/nr6eA/](http://jsfiddle.net/nr6eA/)

一旦元素被替换，更改功能就不会再次触发，虽然我很清楚为什么会发生这种情况，但我不知道如何解决这个问题。

我有很多复选框，并且在替换它们时为每个复选框添加一个脚本似乎不是最好的主意。

有没有办法在 ajax 更新时重新初始化 jquery 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:08:48.153

您需要事件委托。为此，您可以使用`on()`jQuery 1.7+，如下所示：

对于**[`.on()`](http://api.jquery.com/on)**：

```
$(document).ready(function() {
    $('#f').on('change', ' input:checkbox', function() {
        $('#textbox1').val($(this).attr('id') + " " + $(this).is(':checked'));
        $(this).replaceWith('<input type="checkbox" id="checkbox1" class="ichange"/>')
    });
});​ 
```

但是，你的小提琴显示`jQuery 1.6.2`。在这种情况下，您可以使用`live()`或`delegate()`。

对于[`live()`](http://api.jquery.com/live/)：

```
$(document).ready(function() {
    $('#f input:checkbox').live('change', function() {
        $('#textbox1').val($(this).attr('id') + " " + $(this).is(':checked'));
        $(this).replaceWith('<input type="checkbox" id="checkbox1" class="ichange"/>')
    });
});​ 
```

对于**[`delegate()`](http://api.jquery.com/delegate/)**：

```
$(document).ready(function() {
    $('#f').delegate('input:checkbox', 'change', function() {
        $('#textbox1').val($(this).attr('id') + " " + $(this).is(':checked'));
        $(this).replaceWith('<input type="checkbox" id="checkbox1" class="ichange"/>')
    });
});​ 
```

但是如果你可以使用`.on()`jQuery 1.7+ 会更好。

# internet-explorer - 在 IE 中带有过渡的 CSS Nav

> ID：11911516
> 
> 赞同：0
> 
> 时间：2012-08-11T02:55:54.350
> 
> 标签：internet-explorer, css, css-transitions, modernizr, polyfills

[这是我的jsfiddle](http://jsfiddle.net/zwVwh/)

我已经让这个菜单在 FF 中正常工作。它在 IE 中根本不起作用。我知道 IE 不支持转换，但我希望它的其余部分能够工作。我也明白我需要用modernizr 做一些事情来为IE 填充。但我不知道该怎么做。

请耐心等待我的无知。我对这一切都很缺乏经验。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:42:21.393

修复非常简单......您在推荐链接之后有一个流浪的 LI 标签。IE9 无法忽略它，这就是它崩溃的原因。

# python - Django：模板发布随机字母而不是正确的变量

> ID：11911517
> 
> 赞同：0
> 
> 时间：2012-08-11T02:55:59.590
> 
> 标签：python, django

在模板中，我有以下内容：

```
{% for t,k in draft_l %}
    <li>
        <div id="name_area"><span>{{ t }}</span></div>
        <ul id="tool_area">
            <li>Edit</li>
            <li>Publish</li>
            <li>Rename</li>
            <li>Delete</li>
            <li style="display: none;">{{ k }}</li>
        </ul>
    </li>
{% endfor %} 
```

这是视图：

```
user = request.user
user_drafts = Draft.objects.filter(user = user)
drafts = dict()
for d in user_drafts:
    drafts[d.title] = d.id
alertnum = get_alertnum(user)
return render_to_response('Posting/Pages/posting_draft.html', {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", 'alertnum': alertnum}) 
```

k 的值似乎是随机字母。当我在 for 循环中添加一个打印语句时，ID 的所有数字似乎都是正确的。如果您认为它“应该起作用”，您能否发表评论

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:42:49.490

```
{% for t,k in draft_l.items %} 
```

模板的工作方式与本机 python 略有不同。注意`.items`.

# java - 代码适用于 PC 但不适用于 Android (Gson)

> ID：11911519
> 
> 赞同：1
> 
> 时间：2012-08-11T02:56:31.740
> 
> 标签：java, android, android-asynctask, httpclient, gson

我没有运气将代码从我的 PC 移动到 Android。我的代码在我的 PC 上运行但在我的 Android 手机上运行时遇到问题。我正在使用相同的库（GSON），我所做的一切对 Android 设备来说都不应该是问题。有人能帮我吗？

日志猫：

```
08-10 22:39:22.400: E/AndroidRuntime(29153): FATAL EXCEPTION: AsyncTask #1
08-10 22:39:22.400: E/AndroidRuntime(29153): java.lang.RuntimeException: An error occured while executing doInBackground()
08-10 22:39:22.400: E/AndroidRuntime(29153):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.lang.Thread.run(Thread.java:856)
08-10 22:39:22.400: E/AndroidRuntime(29153): Caused by: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected a string but was BEGIN_OBJECT at line 1 column 2
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.Gson.fromJson(Gson.java:806)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.Gson.fromJson(Gson.java:761)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.Gson.fromJson(Gson.java:710)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.g4apps.json.android.verification.client.JsonVerificationClass.jsonVerificationCall(JsonVerificationClass.java:73)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.g4apps.json.android.verification.client.MainActivity$SmpProcessor.doInBackground(MainActivity.java:45)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.g4apps.json.android.verification.client.MainActivity$SmpProcessor.doInBackground(MainActivity.java:1)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-10 22:39:22.400: E/AndroidRuntime(29153):    ... 5 more
08-10 22:39:22.400: E/AndroidRuntime(29153): Caused by: java.lang.IllegalStateException: Expected a string but was BEGIN_OBJECT at line 1 column 2
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.stream.JsonReader.nextString(JsonReader.java:464)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.internal.bind.TypeAdapters$13.read(TypeAdapters.java:349)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.internal.bind.TypeAdapters$13.read(TypeAdapters.java:337)
08-10 22:39:22.400: E/AndroidRuntime(29153):    at com.google.gson.Gson.fromJson(Gson.java:795)
08-10 22:39:22.400: E/AndroidRuntime(29153):    ... 12 more 
```

我的课：

```
package com.g4apps.json.android.verification.client;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.URI;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import com.google.gson.*;
import com.google.gson.reflect.TypeToken;

// The Return class defines the structure of the json object returned by the web service
public class JsonVerificationClass {

    public static class VerificationData {
        private String Name;
        private String Phone;

        public VerificationData (String name, String smartphone){
            this.Name=name;
            this.Phone=smartphone;
        }

        public String getName() { return Name; }

        public String getSmartPhone() { return Phone; }
    }

    // jsonCall is the actual call to the webservice
    public static String jsonVerificationCall(URI url, String app, VerificationData data) {

        try {
            //We need to json objects. One for the request and one for the response
            //The request object is simple and doesn't require an object class to define it.
            Gson json = new Gson();
            String jsondata= json.toJson(data);

            // We use the same HttpClient and HttpPost commands in both the PC and Android versions.
            // These libraries are included in the Android SDK but must be added for the PC.
            HttpClient client = new DefaultHttpClient();
            HttpPost post2 = new HttpPost(url);

            // We use list to List to make the Post Entities
            List<NameValuePair> namevaluePairs = new ArrayList<NameValuePair>(1);
            namevaluePairs.add(new BasicNameValuePair("app",app));
            namevaluePairs.add(new BasicNameValuePair("data",jsondata.toString()));
            //System.out.println(namevaluePairs.toString());
            post2.setEntity(new UrlEncodedFormEntity(namevaluePairs));
            HttpResponse response = client.execute(post2);

            //Read in the response and rebuild the json string
            BufferedReader rd= new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuilder myresponse = new StringBuilder();
            String inputline;
            while((inputline = rd.readLine()) !=null) myresponse.append(inputline);

            //Get the type from Return Object so we can remove it from the Json String
            java.lang.reflect.Type StringType = new TypeToken<String>(){}.getType();
            rd.close();
            //System.out.println(myresponse.toString());
            String return2= new Gson().fromJson(myresponse.toString(), StringType);
            return return2;
        }
        catch (UnsupportedEncodingException uee) {
            uee.printStackTrace();
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

} 
```

我的活动：

```
package com.g4apps.json.android.verification.client;

import java.net.URI;
import java.net.URISyntaxException;

import com.g4apps.json.android.verification.client.JsonVerificationClass;
import com.g4apps.json.android.verification.client.JsonVerificationClass.VerificationData;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {
    private TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView)findViewById(R.id.TextView01);

       //Start new task and run SmpProcessor (Android 2.3+ prohibits Networking activities from running in main thread.
        SmpProcessor task = new SmpProcessor();
        task.execute();

    }
  // added asynctask though other thread methods can be used
  private class SmpProcessor extends AsyncTask <Void,Void,String> {

            // doInBackground sets up variables and calls jsonCall. multiple to jsoncall can be made from the same thread.
            @Override
            protected String doInBackground(Void... voids){ //String[] doInBackground(Void... voids){

                try {

                    URI url = new URI("http://myservice.com/webservices.php");
                    String app="verify";
                    VerificationData data = new VerificationData("Sam","9055551212");

                    // Make jsonCall with will return Return Object
                    String result = JsonVerificationClass.jsonVerificationCall(url,app,data);

                    return result;
                } catch (URISyntaxException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                //return null;
                return null;
            }
            // Handled the retrieval of the data in onPostExecute so I could output it to the android device through the MainActivity.
            protected void onPostExecute(String result) {

                tv.setText("Response: " + result);

                // Handle or call processing for data here as it needs to be done post html call.
            }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:47:01.143

抱歉，我想我调用了错误的服务，它返回的错误消息格式与客户期望的不同。

它期待 {"String"} 并得到 {"Status":"String","Data":"String[]"}

感谢 Dirk 建议查看 json 字符串揭示了答案。

# windows-phone-7 - HttpWebRequest 失败，不知道为什么

> ID：11911520
> 
> 赞同：0
> 
> 时间：2012-08-11T02:56:42.287
> 
> 标签：windows-phone-7, httpwebrequest, compact-framework

我有一个 WP7 应用程序，我正在尝试重建一个 HTTPWebRequest，我已使用同步方法（最后粘贴）在其他地方成功编写但它在 WP7 中不起作用，我认为是因为我做错了异步这些方法的版本。

我相信这个问题源于 Compact Framework 上的非工作代码只能发送一个 bytearray[] - 我没有发送 json 字符串的选项。如果我在有效的代码中发送一个字节数组，我也会在那里得到一个错误。有不同的选择吗？

这是我的代码 - 这不起作用。在最后一个方法的第 2 行抛出异常 - “Using(var respons ...)”：

```
public void CreateUser()
    {
        var request = (HttpWebRequest)WebRequest.Create("http://staging.cloudapp.net:8080/api/users/");
        request.Method = "POST";
        request.ContentType = "text/json; charset=utf-8";
        request.BeginGetRequestStream(new AsyncCallback(RequestCallback), request);
    }

    private static void RequestCallback(IAsyncResult result)
    {
        HttpWebRequest request = (HttpWebRequest)result.AsyncState;

        using (Stream postStream = request.EndGetRequestStream(result))
        {
            User user = new User("Windows", "Phone", "USCA");

            Formatting formatting = new Formatting();
            JsonSerializerSettings settings = new JsonSerializerSettings();
            settings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
            string json = JsonConvert.SerializeObject(user, formatting, settings);

            byte[] byteArray = Encoding.UTF8.GetBytes(json);

            postStream.Write(byteArray, 0, json.Length);
        }

        request.BeginGetResponse(new AsyncCallback(ResponseCallback), request);
    }

    private static void ResponseCallback(IAsyncResult result)
    {
        var request = (HttpWebRequest)result.AsyncState;
        using (var response = (HttpWebResponse)request.EndGetResponse(result))
        {

            using (Stream streamResponse = response.GetResponseStream())
            {
                StreamReader reader = new StreamReader(streamResponse);
                string responseString = reader.ReadToEnd();
                reader.Close();
            }
        }
    } 
```

此代码有效（同一请求的非紧凑框架版本）：

```
HttpWebRequest request = HttpWebRequest.Create("http://staging.cloudapp.net/api/users/") as HttpWebRequest;
        request.Method = "POST";
        request.ContentType = "text/json";
        using (var writer = new StreamWriter(request.GetRequestStream()))
        {
            User user = new user("Other", "Guy", "USWC");
            Formatting formatting = new Formatting();
            JsonSerializerSettings settings = new JsonSerializerSettings();
            settings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
            string json = JsonConvert.SerializeObject(user, formatting, settings);

            writer.Write(json);
        }

        var response = request.GetResponse() as HttpWebResponse;
        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            var responseText = reader.ReadToEnd();
            return responseText;
        } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:28:59.617

看起来服务器正在响应“404 not found”。您请求的资源是否存在于服务器上？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:38:08.520

您的 JSON 是否包含任何非 7 位 ASCII 字符，就像您目前正在做的那样：

```
byte[] byteArray = Encoding.UTF8.GetBytes(json);

postStream.Write(byteArray, 0, json.Length); 
```

字节数可能与字符串中的字符数不同，这可能会导致请求格式错误。

值得使用 Fiddler 之类的东西来验证从模拟器或电话中实际传输的内容（[Fiddler 网站上](http://www.fiddler2.com/phone/)有关于如何执行此操作的说明）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:13:02.583

好吧 - 我不确定为什么这个问题消失了。我喜欢@RowlandShaw 的建议，但我实际上并没有更改 json 中的任何内容。希望我能给出更好的解决方案。

# ios - IOS新手，我手机上的应用程序与模拟器不同

> ID：11911522
> 
> 赞同：0
> 
> 时间：2012-08-11T02:56:56.403
> 
> 标签：ios, xcode, ios-simulator

我今天找到了我的 IOS 开发人员，刚刚完成了所有的 Provision Profiles，我第一次在手机上运行了我的应用程序。出于某种原因，我的应用程序中的一个背景可以在模拟器上运行，但不会出现在 iPhone 上。谁能解释一下？

编辑：

背景是设置为索引 0 的 UIImageView。当应用程序启动时，它以可用的背景开始，当按下按钮时，它会变为在我的手机上不起作用的不同 UIImage。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:52:50.743

您应该仔细检查您的资源。您应该注意，虽然模拟器似乎不区分大小写，但设备是区分大小写的！如果您的图像文件名为“myAwesomeImage.png”并且您的代码显示...</p>

```
UIImage *image = [UIImage imageNamed:@"myawesomeimage.png"]; 
```

…它可能在模拟器上工作，但它不会在设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:47:10.970

这听起来像是复制资源的方式有问题。确保所有必要的图像文件都包含在设备和模拟器目标中。

# android - Android中视图布局的排版方法

> ID：11911533
> 
> 赞同：1
> 
> 时间：2012-08-11T02:59:05.950
> 
> 标签：android, android-layout, layout, typography

前言：我有 Tex/Latex 和 HTML/CSS 及其公制的背景知识

这个问题将尝试使用 Android 视图保持相同的度量方法，长话短说我想做两件事：

*   使用印刷单位，如`em`
*   有一个由块单元组成的布局，比如一本书，页面中心有一个大容器，最大部分，一个小矩形作为页脚和/或页眉，最后是一些包含一些引号或图像的浮动框.

可能我可以从相对布局开始[http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

我的问题是我不知道 Android 上所有可用的印刷单位。

我也不知道是否有“Z 轴管理”可以允许容器及其内容呈现在另一个底层容器之上。就像当 2 个文本框彼此靠近时，我想要一些文本打破框限制并且仍然呈现在另一个框的顶部。

也许文本上也有一些流量控制？

# javascript - 如何在javascript中使用通过引用传递

> ID：11911534
> 
> 赞同：-3
> 
> 时间：2012-08-11T02:59:27.967
> 
> 标签：javascript

我想知道我是否可以修改函数中的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:13:50.647

对象和数组通过引用传递，对传递给函数的参数的更改将影响原始参数。所有其他类型的行为都像按值传递一样，您无法更改原始类型。

Javascript 会自动执行此操作 - 您不能像在某些其他语言中那样指定按值或按引用传递某些内容。如果您想通过引用传递某些内容，请将其放入数组或对象中并传递数组/对象。

示例 1（传递对象）：

```
function myFunc(myObject) {
    // this changes the original object
    myObject.ready = true;
}

var obj = {ready: false;};
myFunc(obj);
// obj.ready == true - value is changed 
```

示例 2（传递字符串）：

```
function hello(str) {
    str = str + " and goodbye";
    alert(str);
}

var greeting = "Hello";
hello(greeting);
// greeting == "Hello" - value is unchanged 
```

示例 3（在对象中传递字符串）：

```
function hello(obj) {
    obj.str = obj.str + " and goodbye";
    alert(obj.str);
}

var o = {greeting: "Hello"};
hello(o);
// o.greeting == "Hello and goodbye" - value is changed 
```

示例 4（传递一个数字）：

```
function hello(num) {
    num++;
    alert(num);
}

var mynum = 5;
hello(mynum);
// mynum == 5 - value is unchanged 
```

注意：有时令人困惑的一件事是字符串实际上是通过引用传递的（没有复制），但是 javascript 中的字符串是不可变的（您不能在 javascript 中更改字符串）所以如果您尝试修改字符串作为参数传递，更改后的值以新字符串结束，因此原始字符串不会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:12:08.080

我认为您的意思是要问“是否可以将值传递的参数更改为引用的参数？”

Javascript 本质上是对象的参考语言。像数字、布尔值和字符串这样的原语是按值传递的。如果您考虑 PhP（或其他一些人）如何更改按引用传递或值修饰符（IE 函数 passByRef( &refVar ) ），这对于 javascript**是不可能的。**这里有一篇很好的文章，关于有时 javascript 在传递某些对象时如何变得更加冷漠，以及您可能期望什么，以及如果它有帮助实际会发生什么。

[JavaScript 是按引用传递还是按值传递语言？](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language)

# xsd - 带有枚举的 JAXB SchemaGen 在不同的包中

> ID：11911542
> 
> 赞同：3
> 
> 时间：2012-08-11T03:00:09.063
> 
> 标签：xsd, jaxb, schemagen

如何从引用不同包中的枚举的 JAXB 对象生成模式？

下面是一个例子：

枚举类

```
package com.example.one

public enum EnumExample {
    VALUE_ONE
    VALUE_TWO
} 
```

JAXB 类

```
package com.example.two

public class Example {

private EnumExample enumExample;

    @XMLElement(name="enumExample", required=true)
    public EnumExample getEnumExample() {
        return enumExample
    }

    public void setEnumExample() {
        this.enumExample = enumExample;
    }
} 
```

包信息.java

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://example.com", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED) 
package com.example.two; 
```

蚂蚁目标

```
<path id="glassfish.schemagen.classpath">
    <pathelement location="/apps/glassfish/lib/webservices-tools.jar" />
</path>

<taskdef name="schemagen" classname="com.sun.tools.jxc.SchemaGenTask">
    <classpath refid="glassfish.schemagen.classpath" />
</taskdef>

<schemagen srcdir="${src.dir}/com/example/two" destdir="xsd">
    <schema namespace="http://exmaple.com" file="example.xsd" />
</schemagen> 
```

当我运行上面的示例时，我得到以下信息：

> [schemagen] 异常的package-info.java 路径：package-info.java [schemagen] 从7个源文件生成schema [schemagen] 注解处理时遇到的问题；[schemagen] 请参阅下面的堆栈跟踪以获取更多信息。[schemagen] java.lang.NullPointerException [schemagen] at com.sun.tools.jxc.model.nav.APTNavigator$2.onDeclaredType(APTNavigator.java:428) [schemagen] at com.sun.tools.jxc.model.nav .APTNavigator$2.onClassType(APTNavigator.java:402) [schemagen] 在 com.sun.tools.jxc.model.nav.APTNavigator$2.onClassType(APTNavigator.java:456) [schemagen] 在 com.sun.istack.tools .APTTypeVisitor.apply(APTTypeVisitor.java:27) [schemagen] 在 com.sun.tools.jxc.model.nav.APTNavigator.getBaseClass(APTNavigator.java:109) [schemagen] 在 com.sun.tools.jxc.model .nav.APTNavigator.getBaseClass(APTNavigator.

我知道是枚举导致了错误，因为如果我切换到字符串，它就会消失。如何使用上面的示例生成模式，其中枚举位于相同的命名空间或不同的命名空间中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:03:39.547

> [schemagen](http://jaxb.java.net/2.2.5/docs/ch04.html#tools-schemagen-ant-task) supports most of the attributes defined by the [javac task](http://ant.apache.org/manual/Tasks/javac.html)

Have you tried using include or exclude elements (untested)?

```
<schemagen srcdir="${src.dir}/com/example" destdir="xsd">
    <schema namespace="http://exmaple.com" file="example.xsd" />
    <include name="one/EnumExample.java"/>
    <include name="two/Example.java"/>
</schemagen> 
```

# cuda - CUDA By Example 实用程序库

> ID：11911543
> 
> 赞同：4
> 
> 时间：2012-08-11T03:00:19.243
> 
> 标签：cuda

我目前正在研究 CUDA by Example 一书，实际上我正在编写 Julia Set 示例。我是 CUDA 编程的新手。

但是我可能错过了一些事情：我在哪里可以找到`book.h`and`cpu_bitmap.h` 标头？是否有下载它们的链接或获取它们并使代码工作的方法？

书中是这样写的：

```
#include "../common/cpu_bitmap.h" 
```

我在哪里可以得到这个文件？

我在 Mac OS X Mountain Lion 平台上。

非常感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:28:39.010

这本书刚从图书馆里拿出来，在这里找到了所有的源代码：

[https://bitbucket.org/mrfright/cuda_by_example/src](https://bitbucket.org/mrfright/cuda_by_example/src)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:19:28.307

[http://code.google.com/p/snp-gpgpu/source/browse/trunk/f/common/?r=4](http://code.google.com/p/snp-gpgpu/source/browse/trunk/f/common/?r=4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T04:44:29.497

如果你下载整个 CUDA_by_Example，它应该有 common 目录。每当您想在该目录中包含头文件时，都必须让编译器知道它们的正确路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T16:05:52.243

截至 2015 年 12 月[，CUDA by Example 的官方页面](https://developer.nvidia.com/cuda-example)已移至[https://developer.nvidia.com/cuda-example](https://developer.nvidia.com/cuda-example)，您可以从中下载示例章节和示例代码，包括`book.h`和`cpu_bitmap.h`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T21:41:45.480

NVIDIA 网站以 zip 文件的形式提供了整本书的源代码。 [https://developer.nvidia.com/sites/default/files/akamai/cuda/files/cuda_by_example.zip](https://developer.nvidia.com/sites/default/files/akamai/cuda/files/cuda_by_example.zip)

# python - 嵌套函数是否存在等效的覆盖？

> ID：11911544
> 
> 赞同：7
> 
> 时间：2012-08-11T03:00:43.300
> 
> 标签：python, function, nested, overriding

如果我有这个功能，我应该怎么做才能用我自己的自定义版本替换内部功能？

```
def foo():
    def bar():
        # I want to change this
        pass

    # here starts a long list of functions I want to keep unchanged
    def baz():
        pass 
```

使用类很容易覆盖方法。不过，我不知道如何使用嵌套函数来做到这一点。更改`foo`为类（或其他任何东西）不是一种选择，因为它来自我无法修改的给定导入模块。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T05:07:29.523

这是一种方法，通过破解函数内部来创建一个“做正确的事情”的新 foo。（如@DSM 所述）。不幸的是，我们不能直接跳入`foo`函数并弄乱它的内部结构，因为它们大多被标记为只读，所以我们要做的就是修改我们手动构建的副本。

```
# Here's the original function
def foo():
  def bar():
    print("    In bar orig")
  def baz():
    print("  Calling bar from baz")
    bar()
  print("Foo calling bar:")
  bar()
  print("Foo calling baz:")
  baz()

# Here's using it
foo()

# Now lets override the bar function

import types

# This is our replacement function
def my_bar():
  print("   Woo hoo I'm the bar override")

# This creates a new code object used by our new foo function 
# based on the old foo functions code object.
foocode = types.CodeType(
    foo.func_code.co_argcount,
    foo.func_code.co_nlocals,
    foo.func_code.co_stacksize,
    foo.func_code.co_flags,
    foo.func_code.co_code,
    # This tuple is a new version of foo.func_code.co_consts
    # NOTE: Don't get this wrong or you will crash python.
    ( 
       foo.func_code.co_consts[0],
       my_bar.func_code,
       foo.func_code.co_consts[2],
       foo.func_code.co_consts[3],
       foo.func_code.co_consts[4]
    ),
    foo.func_code.co_names,
    foo.func_code.co_varnames,
    foo.func_code.co_filename,
    foo.func_code.co_name,
    foo.func_code.co_firstlineno,
    foo.func_code.co_lnotab,
    foo.func_code.co_freevars,
    foo.func_code.co_cellvars )

# This is the new function we're replacing foo with
# using our new code.
foo = types.FunctionType( foocode , {})

# Now use it
foo() 
```

我很确定它不会涵盖所有情况。但它适用于示例（对我来说是旧的 python 2.5.1 ）

可以做一些整理的丑陋部分是：

1.  传递给 CodeType 的巨大参数列表
2.  `co_consts`由仅覆盖一个成员构成的丑陋元组。所有信息都在 co_consts 中以确定替换哪个 - 所以更智能的函数可以做到这一点。我使用`print( foo.func_code.co_consts )`.

您可以使用解释器命令找到有关`CodeType`和的一些信息。`FunctionType``help( types.CodeType )`

更新：我觉得这太丑了，所以我构建了一个辅助函数来让它更漂亮。使用助手，您可以编写：

```
# Use our function to get a new version of foo with "bar" replaced by mybar    
foo = monkey_patch_fn( foo, "bar", my_bar )

# Check it works
foo() 
```

这是 的实现`monkey_patch_fn`：

```
# Returns a copy of original_fn with its internal function
# called name replaced with new_fn.
def monkey_patch_fn( original_fn, name, new_fn ):

  #Little helper function to pick out the correct constant
  def fix_consts(x):
    if x==None: return None
    try:
      if x.co_name == name:
        return new_fn.func_code
    except AttributeError, e:
        pass
    return x

  original_code = original_fn.func_code
  new_consts = tuple( map( fix_consts, original_code.co_consts ) )
  code_type_args = [
     "co_argcount", "co_nlocals", "co_stacksize", "co_flags", "co_code",
     "co_consts", "co_names", "co_varnames", "co_filename", "co_name",
     "co_firstlineno", "co_lnotab", "co_freevars", "co_cellvars" ]

  new_code = types.CodeType(
     *[ ( getattr(original_code,x) if x!="co_consts" else new_consts )
        for x in code_type_args ] )
  return types.FunctionType( new_code, {} ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T03:06:57.273

您可以将其作为可选参数传入

```
def foo(bar=None):
    def _bar():
        # I want to change this
        pass
    if bar is None:
        bar = _bar 
```

# windows - 在visual basic中模拟windowskey+L？

> ID：11911548
> 
> 赞同：4
> 
> 时间：2012-08-11T03:02:13.143
> 
> 标签：windows, winapi, vba, vb6

我想在visual basic中模拟WindowsKey + L（锁定控制台的快捷方式）并将其绑定到一个函数。因此，当调用此函数时，它将锁定控制台。我可以这样做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T03:25:40.953

模拟热键是错误的方法。您需要做的就是调用该[`LockWorkStation`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376875.aspx)。这与按`Ctrl`+ `Alt`+`Del`并选择“锁定工作站”或使用`Win`+`L`热键具有相同的结果，但您可以通过代码以编程方式执行此操作。

要从 VB 应用程序调用此函数，您需要编写一个声明，如下所示：

```
Private Declare Function LockWorkStation Lib "user32.dll" () As Long 
```

在定义任何过程之前，您需要将该声明放在模块文件的顶部。然后，在其中一个过程中，您可以调用该函数。例如：

```
Private Sub LockComputer()
    LockWorkStation
End Sub 
```

更好的代码会检查`LockWorkStation`错误代码的返回值。返回值 0 表示错误。在 VB 中检查 Win32 错误的标准方法`Err.LastDllError`将为您提供更多关于究竟出了什么问题的信息。

# jquery - jQuery 简化

> ID：11911551
> 
> 赞同：0
> 
> 时间：2012-08-11T03:03:19.133
> 
> 标签：jquery, optimization, simplify

我正在为一个网站编写一些代码，该网站使用 4 个列表项在页面的不同位置显示/隐藏 4 个不同的 div。

这是我正在做的一个粗略的例子：

```
<ul>
    <li id="first">One</li>
    <li id="second">Two</li>
    <li id="third">Three</li>
    <li id="fourth">Four</li>
</ul>

<div id="one">This is the first div</div>
<div id="two">This is the second div</div>
<div id="three">This is the third div</div>
<div id="four">This is the four div</div> 
```

而且我正在编写一些丑陋的 JS 代码，而对于我的生活，我根本不记得/弄清楚如何简化它。

```
$("#first").click(function() {
    $("#one").fadeIn();
    $("#two, #three, #four").fadeOut();
});
$("#second").click(function() {
    $("#two").fadeIn();
    $("#one, #three, #four").fadeOut();
});
$("#third").click(function() {
    $("#three").fadeIn();
    $("#two, #one, #four").fadeOut();
});
$("#fourth").click(function() {
    $("#four").fadeIn();
    $("#two, #three, #one").fadeOut();
});​ 
```

这可以满足我的需要，但我知道必须有一种更简单的方法。这是一个工作的 JSFiddle - [http://jsfiddle.net/claycauley/FBrx5/](http://jsfiddle.net/claycauley/FBrx5/)

如果有人可以帮助我理解为什么/如何简化它，那也很棒，因为我正在努力学习但被难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:07:48.487

尝试：

```
$("li").click(function() {
    $("div:visible").fadeOut();
    $("div").eq($(this).index()).fadeIn();
});​ 
```

[http://jsfiddle.net/FBrx5/1/](http://jsfiddle.net/FBrx5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:32:37.640

在@Petah 的帮助下，我想出了这个：

```
$("li").click(function() {
    if ($("div").eq($(this).index()).is(":visible")) {
        return false;
    }
    else {
        $("div:visible").fadeOut();
        $("div").eq($(this).index()).fadeIn();
    }
        return false;
});​ 
```

他的解决方案的唯一问题是它仍然在 div 上激活，即使它已经可见。它会淡出它，然后再重新出现。这样我就可以阻止这种情况的发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T03:11:10.077

怎么样：

```
<ul id="linky">
    <li id="first">One</li>
    <li id="second">Two</li>
    <li id="third">Three</li>
    <li id="fourth">Four</li>
</ul>

<div class="first">This is the first div</div>
<div class="second">This is the second div</div>
<div class="third">This is the third div</div>
<div class="fourth">This is the four div</div>

$("#linky").on("click", "li", function(e) {
    $("div:visible").fadeOut();
    $("." + e.target.id).fadeIn();
}); 
```

[http://jsfiddle.net/FBrx5/4/](http://jsfiddle.net/FBrx5/4/)

# azure - 如何使用 Bing Marketplace API 形成复合查询？

> ID：11911552
> 
> 赞同：1
> 
> 时间：2012-08-11T03:03:22.937
> 
> 标签：azure, bing, bing-api

我有一个使用 Azure Datamarketplace 中的新 Bing API 的应用程序。我曾经能够使用 OR AND 等简单语法查询 Bing API。这在新 API 中似乎不起作用。

旧语法：

“杰克逊维尔美洲虎”或“NFL美洲虎”或“亚特兰大猎鹰”

这会给我一个包含任何这些短语的查询（我正在为新闻进行 rt_Sports 查询）。

我首先在查询上调用 HttpEncode，但仍然没有得到结果。如果我删除所有“标记，它会起作用，但有时我会得到关于猎鹰和美洲虎（动物）的新闻的结果......不是我想要的。

任何人都知道如何形成包含多个短语的查询？

我试图不使用 OR，不使用'，使用“，使用 | 而不是 OR。所有这些都对 BING 网站起作用，只是不在 API 中。

我刚刚通过 Bing 进行了尝试，得到了 3600 万个结果：

美式橄榄球 | 西雅图海鹰队 | 纽约巨人队 | 达拉斯牛仔队 | 新奥尔良圣徒队 | 新英格兰爱国者队 | 杰克逊维尔美洲虎

API 中的相同内容返回 0。

我收到了一位朋友的电子邮件，我也将这个问题通过电子邮件发送给了他，他的想法是我做错了。应该有一种方法可以使用多个 where 子句从 Bing 对象中形成 LINQ 查询。

但我不明白这怎么可能。您允许 BingSearchContainer，然后在容器上调用 News 方法。News 方法只有一个 Query 参数。

```
var bingContainer = new Bing.BingSearchContainer(new Uri("https://api.datamarket.azure.com/Bing/Search"));

bingContainer.Credentials = new NetworkCredential(App.BingAPIAccountKey, App.BingAPIAccountKey);

string unifiedQuery = "NFL Football | Jacksonville Jaguars | Atlanta Falcons";

var newsQuery = bingContainer.News(unifiedQuery, null, "en-US", "Strict", null, null, null, "rt_Sports", "Relevance");

newsQuery.BeginExecute(BingNewsResultLoadedCallback, newsQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:25:24.203

尝试更改`unifiedQuery`为以下内容：

`var unifiedQuery = "'NFL Football' or 'Jacksonville Jaguars' or 'Atlanta Falcons'";`

我尝试了与您的示例代码非常相似的方法，使用这种格式的查询字符串，它对我有用：

```
var bingUri = new Uri("https://api.datamarket.azure.com/Bing/Search/v1/", UriKind.Absolute);
var bingContainer = new BingSearchContainer(bingUri);
bingContainer.Credentials = new NetworkCredential(BingAPIUserName, BingAPIAccountKey);
var unifiedQuery = "'NFL Football' or 'Jacksonville Jaguars' or 'Atlanta Falcons'";

var newsQuery = bingContainer.News(unifiedQuery, null, "en-US", "Strict", null, null, null, "rt_Sports", "Relevance");

var results = newsQuery.Execute();
foreach (var item in results)
{
    Console.WriteLine(item.Title);
} 
```

这是我的结果：

```
Fantasy Football 2012: Ranking the Top 25 RBs
NFL Football No Longer Just a Sunday Game
Ravens Notebook: Ed Reed decided to play in game vs. Falcons since he 'wasn't doing anything else'
PrimeSport Partners with Jacksonville Jaguars to Offer Tickets and Official Fan
Packages for all Home and Away Games in 2012 Season
Jaguars cut former Ravens wide receiver Lee Evans
Falcons left tackle Baker finally feels healthy
Jaguars release veteran WR Lee Evans
NFC West: 2012 NFL Training Camp
Atlanta Falcons 2012 NFL TV Schedule
Jaguars training camp: Veteran WR Lee Evans released
Jaguars score 18 points in second half to beat Giants 32-31
Jacksonville Jaguars put running back Maurice Jones-Drew on reserve/did not report list
Postcard from camp: Falcons
Questions abound as NFL preseason opens in earnest
NFL fantasy football: Ryan Mathews loses value 
```

字符串的格式`unifiedQuery`基本上是 OData URI 查询字符串格式。有关这些查询字符串如何工作的完整描述，请查看[http://www.odata.org/documentation/uri-conventions](http://www.odata.org/documentation/uri-conventions)上的 OData URI 约定文档。

# javascript - Zend headscript 的 Codeigniter 等价物

> ID：11911553
> 
> 赞同：1
> 
> 时间：2012-08-11T03:03:51.530
> 
> 标签：javascript, css, zend-framework, codeigniter

我试图找出是否有任何类似于 Zend 中的 codeigniter 的东西，我可以在其中将文件附加到 CSS 之类的标题区域或 JavaScript 之类的页脚区域。问题是我找不到任何东西，这意味着要么一个不存在，我必须制作一个（不确定如何准确解决这个问题），或者我正在寻找错误的东西。或者我不知道。这里有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:25:05.277

这是我通常在我的 CI 项目中使用的...

1.  应用程序/视图/v_header.php

    ```
     <head>
                <title><?php print $this->config->item('sitename'); if(isset($title)) echo ' - '.$title; ?></title>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                <meta name="generator" content="xxxxxx" />
                <meta name="author" content="Matteo Mattei - www.matteomattei.com"/>
                <meta name="description" content="xxxxxxxxxxxxxxx"/>
                <meta name="robots" content="INDEX,FOLLOW"/>
                <meta name="keywords" content="xxxxx, xxxxx, xxxxx"/>
                <link rel="shortcut icon" href="<?php echo base_url(); ?>images/favicon.ico" />
                <?php
                if(isset($style))
                {
                        if(is_array($style))
                        {
                                foreach($style as $s)
                                        echo '<link rel="stylesheet" href="'.base_url().'css/'.$s.'" type="text/css" media="screen" />';
                        }
                        else
                                echo '<link rel="stylesheet" href="'.base_url().'css/'.$style.'" type="text/css" media="screen" />';
                }
                ?>
                <link rel="stylesheet" href="<?php echo base_url(); ?>css/style.css" type="text/css" media="screen" />
                <?php
                if(isset($jquery) && $jquery===TRUE)
                        echo '<script type="text/javascript" src="'.base_url().'js/jquery-1.7.1.min.js"></script>';
                echo '<script type="text/javascript">';
                echo 'var base_url="'.base_url().'";';
                if(isset($js_variables))
                {
                        foreach($js_variables as $k=>$v)
                        {
                                echo 'var '.$k.'="'.$v.'";';
                        }
                }
                echo '</script>';
                if(isset($js))
                {
                        if(is_array($js))
                        {
                                foreach($js as $j)
                                        echo '<script type="text/javascript" src="'.base_url().'js/'.$j.'"></script>';
                        }
                        else
                                echo '<script type="text/javascript" src="'.base_url().'js/'.$js.'"></script>';
                }
                ?>
        </head>
        <body> 
    ```

2.  在每个控制器函数中，我可以指定自定义 CSS 文件或 JS 文件：

    ```
    public function myfunc()
    {
            $data['jquery'] = TRUE;
            $data['js'] = array(
                    'jquery-ui-1.8.16.custom.min.js',
                    'my_special.js',
                    'another_special.js',
            );
            $data['style'] = array(
                    'ui-lightness/jquery-ui-1.8.16.custom.css',
                    'my_custom.css',
            );

            $this->load->view('v_header',$data);
            $this->load->view('v_menu',$data);
            $this->load->view('v_dashboard',$data);
            $this->load->view('v_footer',$data);
    } 
    ```

# java - 我什么时候想在实际类上声明接口？

> ID：11911554
> 
> 赞同：1
> 
> 时间：2012-08-11T03:04:04.287
> 
> 标签：java, oop, class, interface, declaration

例如，我经常看到这样的：

```
Set<Integer> s = new TreeSet<Integer>();
Set<Integer> s = new HashSet<Integer>();
Map<Integer, String> m = new HashMap<Integer, String>(); 
```

超过

```
TreeSet<Integer> ts = new TreeSet<Integer>();
HashSet<Integer> hs = new HashSet<Integer>();
HashMap<Integer, String> hm = new HashMap<Integer, String>(); 
```

前者与后者的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:18:43.753

对我来说，它归结为几点。

你关心执行吗？您的代码是否需要知道`Map`是 a`HashMap`还是 a `TreeMap`？还是它只关心它有某种键/值结构

这也意味着当我构建我的实现代码时，如果我公开一个返回 Map 的方法，我可以随着时间的推移更改实现而不影响任何依赖它的代码（因此尝试强制转换是一个坏主意的原因这些类型的值）

另一个是在代码中移动这些结构变得更容易，这样任何可以接受 a 的方法都将比依赖于 a的方法`Map`更容易处理`HashMap`

约定（我遵循的）基本上是使用满足 API 需求的最低功能接口。使用不提供 API 所需功能的接口是没有意义的（例如，如果您需要 a `SortedMap`，则没有必要使用`Map`then）

恕我直言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:19:55.750

通常，您希望声明具有您实际使用的行为的最通用类型。这样，如果您决定采用不同的具体类，就不必更改太多代码。并且您允许该功能的用户有更多的自由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T04:45:58.527

您应该阅读[William R. Cook](http://WCook.BlogSpot.Com/)重新访问的[*On Understanding Data Abstraction*](http://CS.UTexas.Edu/~wcook/Drafts/2009/essay.pdf)以及他的[*关于“对象”和“面向对象”的简化、现代定义的建议*](http://WCook.BlogSpot.Com/2012/07/proposal-for-simplified-modern.html)。[](http://WCook.BlogSpot.Com/2012/07/proposal-for-simplified-modern.html)

 *基本上：如果您将Java 类用作工厂以外的任何东西，即如果您在`new`运算符之后的任何地方都有一个类名，那么您就不是在进行面向对象的编程。遵循这条规则并不能保证你正在做 OO，但违反这条规则意味着你没有。

注意：不做OO没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T06:52:47.830

应用程序的维护成本可能是开发成本的三倍。这意味着您希望代码尽可能简单和清晰。

如果您使用 List 而不是 ArrayList，则表明您没有使用 ArrayList 特有的任何方法，并且可以从另一个 List 实现中更改它。在不必使用 ArrayList 时使用的问题是需要很长时间才能安全地确定它确实可能是一个 List。也就是说，很难证明你从来不需要什么东西。（添加东西比删除它相对容易）

一个类似的例子是在 List 可以使用 Vector 时。如果你看到一个 Vector，你会说；开发人员选择 Vector 是有充分理由的，它是线程安全的。但我现在需要更改它并检查代码是否是线程安全的。他们你说，但我看不到它是如何以多线程方式使用的，所以我必须检查它可能使用的所有方式，或者我是否需要在迭代它时添加同步，而实际上它从来不需要是线程安全的。在不需要的时候使用线程安全集合不仅浪费 CPU 时间，更重要的是浪费开发人员的时间。*

# node.js - Node.js HTML5 样板服务器配置集成

> ID：11911556
> 
> 赞同：3
> 
> 时间：2012-08-11T03:04:54.670
> 
> 标签：node.js, express, html5boilerplate

我正在设置一个将使用 Node.js 和 Express 构建的新项目的结构。我使用[HTML5 Boilerplate](http://html5boilerplate.com/)作为最佳起点。自带多种服务器的配置文件：Apache、Nginx、Node.js等。以下是HTML5 Boilerplate团队提供的[Node.js服务器配置文件：](https://github.com/h5bp/server-configs)

```
/* h5bp server-configs project
 *
 * maintainer: @xonecas
 * contributors: @niftylettuce
 *
 * NOTES:
 * compression: use the compress middleware provided by connect 2.x to enable gzip/deflate compression
 *                          http://www.senchalabs.org/connect/compress.html
 *
 * concatenation: use on of the following middlewares to enable automatic concatenation of static assets
 *                              - https://github.com/mape/connect-assetmanager
 *                              - https://github.com/TrevorBurnham/connect-assets
 */
var h5bp    = module.exports,
   _http    = require('http'),
   _parse   = require('url').parse;

// send the IE=Edge and chrome=1 headers for IE browsers
// on html/htm requests.
h5bp.ieEdgeChromeFrameHeader = function () {
   return function (req, res, next) {
      var url = req.url,
         ua = req.headers['user-agent'];

      if (ua && ua.indexOf('MSIE') > -1 && /html?($|\?|#)/.test(url)) {
         res.setHeader('X-UA-Compatible', 'IE=Edge,chrome=1');
      }
      next();
   };
};

// block access to hidden files and directories.
h5bp.protectDotfiles = function () {
   return function (req, res, next) {
      var error;
      if (/(^|\/)\./.test(req.url)) {
         error = new Error(_http.STATUS_CODES[405]); // 405, not allowed
         error.status = 405;
      }
      next(error);
   };
};

// block access to backup and source files
h5bp.blockBackupFiles = function () {
   return function (req, res, next) {
      var error;
      if (/\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~/.test(req.url)) {
         error = new Error(_http.STATUS_CODES[405]); // 405, not allowed
         error.status = 405;
      }
      next(error);
   };
};

// Do we want to advertise what kind of server we're running?
h5bp.removePoweredBy = function () {
   return function (req, res, next) {
      res.removeHeader('X-Powered-By');
      next();
   };
};

// Enable CORS cross domain rules, more info at http://enble-cors.org/
h5bp.crossDomainRules = function () {
   return function (req, res, next) {
      res.setHeader('Access-Control-Allow-Origin', '*');
      res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With');
      next();
   };
};

// Suppress or force 'www' in the urls
// @param suppress = boolean
h5bp.suppressWww = function (suppress) {
   return function (req, res, next) {
      var url = req.url;
      if (suppress && /^www\./.test(url)) {
         res.statusCode = 302;
         res.setHeader('Location', url.replace(/^www\./,''));
      }
      if (!suppress && !/^www\./.test(url)) {
         res.statusCode = 302;
         res.setHeader('Location', "www."+url);
      }
      next();
   };
};

// Far expire headers
// use this when not using connect.static for your own expires/etag control
h5bp.expireHeaders = function (maxAge) {
   return function (req, res, next) {
      res.setHeader('Cache-Control', 'public, max-age='+ (maxAge));
      next();
   };
};

// Etag removal
// only use this is you are setting far expires for your files
// ** WARNING ** connect.static overrides this.
h5bp.removeEtag = function () {
   return function (req, res, next) {
      res.removeHeader('Last-Modified');
      res.removeHeader('ETag');
      next();
   };
};

// set proper content type
// @param mime = reference to the mime module (https://github.com/bentomas/node-mime)
h5bp.setContentType = function (mime) {
   return function (req, res, next) {
      // I'm handling the dependency by having it passed as an argument
      // we depend on the mime module to determine proper content types
      // connect also has the same dependency for the static provider
      // ** @TODO ** maybe connect/express expose this module somehow?
      var path = _parse(req.url).pathname,
         type  = mime.lookup(path);
      res.setHeader('Content-Type', type);
      next();
   };
};

// return a express/connect server with the default middlewares.
// @param serverConstructor = express/connect server instance
// @param options = {
//    root: 'path/to/public/files',
//    maxAge: integer, time in miliseconds ex: 1000 * 60 * 60 * 24 * 30 = 30 days,
//    mime: reference to the mime module ex: require('mime')
// }
// Depends:
//    express or connect server
//    mime module [optional]

h5bp.server = function (serverConstructor, options) {
   var server = serverConstructor.createServer(),
       stack = [
         this.suppressWww(true),
         this.protectDotfiles(),
         this.blockBackupFiles(),
         this.crossDomainRules(),
         this.ieEdgeChromeFrameHeader()
      //,this.expireHeaders(options.maxAge),
      // this.removeEtag(),
      // this.setContentType(require('mime'))
       ];
   // express/connect
   if (server.use) {
      stack.unshift(serverConstructor.logger('dev'));
      stack.push(
         //serverConstructor.compress(), // express doesn't seem to expose this middleware
         serverConstructor['static'](options.root, { maxAge: options.maxAge }), // static is a reserved
         serverConstructor.favicon(options.root, { maxAge: options.maxAge }),
         serverConstructor.errorHandler({
            stack: true,
            message: true,
            dump: true
         })
      );
      for (var i = 0, len = stack.length; i < len; ++i) server.use(stack[i]);
   } else {
      server.on('request', function (req, res) {
         var newStack = stack,
             func;
         (function next (err) {
            if (err) {
               throw err;
               return;
            } else {
               func = newStack.shift();
               if (func) func(req, res, next);
               return;
            }
         })();
      });
   }
   return server;
}; 
```

我的问题是：我该如何将它与 Express 集成？特别让我感到困惑的代码部分是底部：

```
// return a express/connect server with the default middlewares.
// @param serverConstructor = express/connect server instance
// @param options = {
//    root: 'path/to/public/files',
//    maxAge: integer, time in miliseconds ex: 1000 * 60 * 60 * 24 * 30 = 30 days,
//    mime: reference to the mime module ex: require('mime')
// }
// Depends:
//    express or connect server
//    mime module [optional]

h5bp.server = function (serverConstructor, options) {
   var server = serverConstructor.createServer(),
       stack = [
         this.suppressWww(true),
         this.protectDotfiles(),
         this.blockBackupFiles(),
         this.crossDomainRules(),
         this.ieEdgeChromeFrameHeader()
      //,this.expireHeaders(options.maxAge),
      // this.removeEtag(),
      // this.setContentType(require('mime'))
       ];
   // express/connect
   if (server.use) {
      stack.unshift(serverConstructor.logger('dev'));
      stack.push(
         //serverConstructor.compress(), // express doesn't seem to expose this middleware
         serverConstructor['static'](options.root, { maxAge: options.maxAge }), // static is a reserved
         serverConstructor.favicon(options.root, { maxAge: options.maxAge }),
         serverConstructor.errorHandler({
            stack: true,
            message: true,
            dump: true
         })
      );
      for (var i = 0, len = stack.length; i < len; ++i) server.use(stack[i]);
   } else {
      server.on('request', function (req, res) {
         var newStack = stack,
             func;
         (function next (err) {
            if (err) {
               throw err;
               return;
            } else {
               func = newStack.shift();
               if (func) func(req, res, next);
               return;
            }
         })();
      });
   }
   return server;
}; 
```

我的 JavaScript 并不完全处于初学者水平，但我也不会说我很先进。这段代码超出了我的范围。任何关于我可以阅读、观看或做什么的指示，以了解我在这里显然缺少的内容，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T04:58:18.450

[大部分文件](https://github.com/h5bp/server-configs/blob/502a454/node/node.js#L18-123)由一系列函数组成，这些函数为框架（如 Express）生成符合 Connect 中间件规范的中间件。第二个代码清单旨在创建一个*使用*所有这些功能的 HTTP 服务器。据我所知，看起来您应该传递您通常调用的任何`createServer`内容，h5bp 将为您完成创建和设置。例如，如果您通常会这样做：

```
var express = require('express');
var server = express.createServer(); 
```

您将改为传递`express`给`h5bp.server`，它会调用`createServer`您立即传递的任何内容：

```
var express = require('express');
var server = h5bp.server(express, options); 
```

经过一些设置后，它会检查服务器是否有一个名为`use`（行是`if (server.use)`）的函数，如果有，则使用它将它设置的所有中间件注入服务器。如果*不是*，则假定您使用的是原始 Node.js HTTP 服务器，并设置必要的代码以`stack`手动通过每个项目传递请求（这就是 Connect/Express 为您所做的）。

值得注意的是，在 Express 3 中（目前处于候选发布阶段），Express 创建的应用程序不再继承自 Node 的 HTTP 服务器，因此您无需`createServer`调用`express`; 相反，您应该只调用`express()`然后将结果传递给`http.createServer`. [（有关详细信息，请参阅Express wiki 上从 2.x 迁移到 3.x 中的](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)“应用程序功能” 。）这意味着此脚本与最新版本的 Express 不兼容。

[更新]

如果您查看`test`GitHub 上的目录，您可以看到[一个示例应用程序](https://github.com/h5bp/server-configs/blob/master/test/node-server.js)：

```
var express = require('express'),
   h5bp     = require('../node.js'),
   server   = h5bp.server(express, { 
      root: __dirname,
      maxAge: 1000 * 60 * 60 * 30
   });

server.listen(8080);
console.log('ok'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T22:57:16.143

node.js对**h5bp**进行了重大更新。
您现在可以将其用作**快速**中间件。

存储库已移至此处：[https](https://github.com/h5bp/node-server-config) ://github.com/h5bp/node-server-config 。

从文档中：

```
var express = require('express'),
h5bp = require('h5bp');

var app = express();
// ...
app.use(h5bp({ root: __dirname + '/public' }));
app.use(express.compress());
app.use(express.static(__dirname + '/public'));
// ...
app.listen(3000); 
```

# javascript - 使用 jQuery Masonry 时如何保持块居中

> ID：11911558
> 
> 赞同：1
> 
> 时间：2012-08-11T03:05:33.700
> 
> 标签：javascript, jquery, css, jquery-masonry

假设我有 10 个块用于 jQuery Masonry，每个块（div）宽度为 200px，所以在 1024x768 处，在 Masonry 之后看起来像这样

```
[000] [111] [222] [333] [444]
[555] [666] [777] [888] [999] 
```

因此，如果我将屏幕分辨率更改为 640x480，它将看起来像这样

```
[000] [111] [222]
[333] [444] [555]
[666] [777] [888]
[999] 
```

如果我将屏幕分辨率更改为 1600x190，它看起来像

```
[000] [111] [222] [333] [444] [555] [666] [777]
[888] [999] 
```

我要实现的是：使第一个块（[000]）始终位于屏幕的中心。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:04:40.180

PRTFM：“浮动将元素水平排列然后垂直排列，砌体垂直排列元素，将每个元素定位在网格中的下一个开放点。结果最大限度地减少了不同高度元素之间的垂直间隙，就像石匠在墙上安装石头一样”。您不能将一个 Masonry 元素固定在浏览器窗口的中心，而所有其他元素都围绕它流畅地排列 - 您可以在右上角或左上角有一个固定元素，称为“角标”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:41:11.300

你需要使用：

```
 $('.container').css('width','1024px');
  $('.container').css('height','768px'); 
```

或者

```
 $('.container').css('width','640px');
  $('.container').css('height','480px'); 
```

或者

```
 $('.container').css('width','1600px');
  $('.container').css('height','190px'); 
```

更改框的区域，然后框将显示为您想要的。

# objective-c - 延长手势长度

> ID：11911566
> 
> 赞同：1
> 
> 时间：2012-08-11T03:07:04.677
> 
> 标签：objective-c, ios, uigesturerecognizer, extend

我遇到了一个问题，最简单的解决方案是扩展 UIGestureRecognizer 的长度。我的意思是，我需要 iOS 设备仍然相信用户在释放屏幕后将手指放在屏幕上大约 0.1 秒。我需要设备认为手指在 0.1 秒内处于与用户释放它时完全相同的位置。任何有关天气的帮助将不胜感激！谢谢！！！

编辑：很抱歉回复晚了，我真的很忙于工作。

为了详细说明，我使用了一组由 Alan Quartermain 制作的名为 AQGridView 的类。这是一个与 UITableView 非常相似的类；但是，它以网格而不是列表的形式显示数据。似乎存在一个错误，其中（如果我理解正确，我可能不会）在委托方法之前重新加载网格的数据，当用户结束 UIGestureRecognizer 时调用该方法，如果用户释放他们的手指而完成非常快速地拖动一个单元格（从一个网格索引到另一个）。这会导致图形故障（可以在类集附带的跳板示例中重新创建），其中拖动单元格似乎在其适当位置之前或之后固定一个单元格，然后快速跳转到它的正确位置。我相信这是因为有一个短暂的时期，当用户松开手指时，网格数是单元格稳定时的 -1。这是对问题的一个糟糕的解释，但我能想到的最好的解释。同样，我是一个相对较新的开发人员，可能无法解决问题的原因。这就是为什么我认为最合适的解决方法是将手势长度延长一个非常小的量。如果有人想看看 AQGridView 类（https://github.com/AlanQuatermain/AQGridView/），我将不胜感激！但如果可能的话，一个更简单的解决方法就是模拟用户在松开手指之前输入的触摸，以便出现所需的动画。ma 是一个相对较新的开发人员，可能无法解决问题的原因。这就是为什么我认为最合适的解决方法是将手势长度延长一个非常小的量。如果有人想看看 AQGridView 类（https://github.com/AlanQuatermain/AQGridView/），我将不胜感激！但如果可能的话，一个更简单的解决方法就是模拟用户在松开手指之前输入的触摸，以便出现所需的动画。ma 是一个相对较新的开发人员，可能无法解决问题的原因。这就是为什么我认为最合适的解决方法是将手势长度延长一个非常小的量。如果有人想看看 AQGridView 类（https://github.com/AlanQuatermain/AQGridView/），我将不胜感激！但如果可能的话，一个更简单的解决方法就是模拟用户在松开手指之前输入的触摸，以便出现所需的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:14:10.493

在`touchesEnded`委托方法中，启动计时器 0.1 秒并执行您的`selector`.

你甚至可以继承 UIGestureRecogniser 并实现你自己的手势，检查这个问题的第一个答案。

请参阅：[自定义 iOS 手势](https://stackoverflow.com/questions/9345718/custom-ios-gesture)

# java - Android Observer 被通知一次后被删除？

> ID：11911568
> 
> 赞同：0
> 
> 时间：2012-08-11T03:07:14.147
> 
> 标签：java, android, observer-pattern

我有一个简单的 Android 应用程序，其中有一个带有 Observable 对象 foo 的 Activity。我有一个私有内部类在我的活动中实现观察者，它使用传递给更新的参数更新 GUI。创建活动时，我将 Observer 与 foo.addObserver 附加在一起。

但是，我的观察者只收到一次通知，然后就不再收到更新。我已经进入 foo 并且我的观察者在尝试发送第二个通知时被删除。以前有人经历过吗？这可能是什么原因造成的？我不知道如何进一步解决此问题。这看起来很简单。可能是我正在做的其他事情导致了这种情况？如果有人有任何想法，我可以透露更多我的应用程序。

相关代码如下（无参数和范围）

**活动**

```
onCreate
  ...
  foo = new Foo();
  foo.addObserver( new FooObserver() );
  ...

class FooObserver implements Observer {
  update()
    updateGUI(); 
```

**富**

```
arbitraryMethod()
   ...
   setChanged();
   notifyObservers( argument ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:56:26.003

我遇到的（令人尴尬的）问题是我有多个 Foo 实例，并且仅将侦听器注册为对象的特定实例，而没有记住我已经创建了该对象的多个实例，这就是 Observers 数组为空的原因第一次更新后；我在看一个不同的对象！

对此有很多解决方案，但在我的情况下，一个可行的方法是使对象成为单例。

# jquery - 使用jquery检测div是否可见

> ID：11911569
> 
> 赞同：1
> 
> 时间：2012-08-11T03:07:26.813
> 
> 标签：jquery, css

我正在尝试确定特定的可见性`<div>`，但我的检查始终显示它是可见的。我正在使用以下代码：

```
if($('.stg_gall_cro_cnt').is(":visible")) {
    var visi="yes";
} 
else {
    var visi="no";
}
alert(visi); 
```

每次运行此检查时，警报都会显示“是”，即使`<div>`它不可见。有人可以帮忙吗？

的 css`.stg_gall_cro_cnt`默认设置为：

```
visibility:hidden; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:13:49.717

```
if($('.stg_gall_cro_cnt').css('visibility') === 'hidden'){
    // hidden
}else{
    // visible
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T03:13:15.927

选择[`:visible`](http://api.jquery.com/visible-selector/)器只匹配渲染文档中不占用空间的元素。`visibility`设置为占用空间的元素，`hidden`因此 jQuery 认为它们是可见的。

您需要`display: none`在 CSS 中设置使用`is(':visible')`或`css('visibility') == 'hidden'`在 jQuery 中使用`visibility: hidden`.

# shell - & 在 shell 脚本中的确切用途是什么？

> ID：11911573
> 
> 赞同：1
> 
> 时间：2012-08-11T03:08:04.537
> 
> 标签：shell

我对 shell 脚本很陌生。`&`我对shell 脚本的用途有一个基本的疑问？那是在做这样的事情：

```
commands arg & 
```

等待提供更多输入。但它的确切用途是什么？我应该如何在现实世界中使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T03:24:56.787

当您在那里使用它时，它会`commands arg`在后台运行，与您的键盘断开连接，并且 shell 会立即询问您的下一个命令。

至于现实世界，当我有一个命令需要很长时间才能运行但不需要我的任何输入并将其所有输出放入文件时，我会使用它，例如

```
# walk through the whole filesystem looking for a particular filename
find / -name 'obscure.filename' -print > /tmp/found-it & 
```

# javascript - 如何逃避 ajaxStart 事件

> ID：11911576
> 
> 赞同：0
> 
> 时间：2012-08-11T03:08:22.243
> 
> 标签：javascript, ajax, jquery

## 问题：

ajax 请求启动时会出现加载消息：

```
$('#container').ajaxStart(function(){ showFlashMessage(); }) 
```

并在 ajax 请求停止后消失：

```
$('#container').ajaxStart(function(){ $('#flashMessage').remove(); }) 
```

现在我想在发送 3 个 ajax 请求后转义（忽略）ajaxStart 事件。

## 我尝试了什么：

我尝试了以下代码，但都不起作用:(

```
$('#container').ajaxStart(function(){}) 
```

或者

```
$('#container').ajaxStop(function(){ $('#flashMessage').remove(); }) 
```

## 问题

如何逃避（忽略） ajaxStart 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:11:48.377

使用全局计数器变量。

```
var count = 0;
$('#container').ajaxStart(function(){
    if(count > 2) return false;
    showFlashMessage();
    count++;
}); 
```

# php - DynamoDB PHP SDK-最快的批量导入方法？

> ID：11911586
> 
> 赞同：1
> 
> 时间：2012-08-11T03:10:59.000
> 
> 标签：php, api, amazon-web-services, amazon-dynamodb

我正在尝试将约 1.1 亿条记录批量导入 DynamoDB。

使用 CFBatchRequest：

```
 $queue = new CFBatchRequest(800); 
```

然后向其中添加 800 个 put_item() 只会导致大约 190 次写入/秒，而且奇怪的是每隔一段时间就会导致 cURL 错误。我使用什么大小的实例似乎并不重要。我试过做少于或多于 800 个。

做单件 put_item() 非常慢。而且batch_write_item() 没有重试功能，而且只限制在25 次。

我读到 EMR 根本不使用任何批处理，这里的搜索显示一些人遇到了问题。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:50:01.000

1.  您使用的是最新版本的 SDK 吗？（此时为1.5.11）
2.  减少请求池的大小将减少批处理错误的机会。如果将其设置为 800，则几乎可以肯定会淹没 cURL。
3.  如果这没有帮助，请在 AWS 官方论坛上[PM](https://forums.aws.amazon.com/profile.jspa?userID=145599)我，参考这个 SO 线程，我们可以再聊聊。

# java - AffineTransform.rotate() - 我如何同时移动、旋转和缩放？

> ID：11911610
> 
> 赞同：1
> 
> 时间：2012-08-11T03:17:52.267
> 
> 标签：java, graphics, awt, image-rotation, affinetransform

我有以下代码（第一部分）我想要绘制一个带有一些棋子的棋盘。

```
 Image pieceImage = getImage(currentPiece);
              int pieceHeight = pieceImage.getHeight(null);
              double scale = (double)side/(double)pieceHeight;
              AffineTransform transform = new AffineTransform();
              transform.setToTranslation(xPos, yPos);
              transform.scale(scale, scale);
              realGraphics.drawImage(pieceImage, transform, this); 
```

也就是说，它获取一个棋子的图像和图像的高度，它将该图像的绘图转换为棋子所在的正方形，并将图像缩放到正方形的大小。

假设我想将黑色部分旋转 180 度。我希望在某个地方有类似的东西：

```
transform.rotate(Math.toRadians(180) /* ?, ? */); 
```

但我不知道该放什么作为 X 和 Y。如果我什么都不放，图像会很好地围绕其棋盘正方形的 0,0 点旋转，将棋子倒置在正方形的东北方它应该是。我已经猜到了 x,y 的各种其他组合，但还没有运气。

我已经在使用平移将块放在正确的正方形中，旋转变换需要另一个 x,y 围绕它旋转东西，但我不知道如何告诉变换围绕一个 x,y 旋转块并写图像到不同的 x,y。有人可以帮助我了解旋转参数，或者指出一些解释这些事情如何工作的东西吗？我发现了一些不能解释它们如何工作的例子，到目前为止我还没有想出如何根据我的情况改变它们......

* * *

主要编辑：添加工作代码。抱歉，我不知道如何发布图片，请替换您自己的图片。

当我运行以下命令时，我得到一个 2x2 棋盘，左上角有一个车，右下角有一个马。

如果我进入 SmallChessboardComponent 并从第一个旋转变换语句中删除注释 delims，我将把车倒置在原来的位置，而骑士不会出现。如果我*改为*从第二个转换语句中删除注释 delims，则根本不会出现任何一块。

我正在寻找一种方法将这些碎片倒置在它们无论如何都会出现的广场上。我想把每一块都画到板上；我不想要翻转电路板的代码。

主程序：

```
package main;

import java.awt.BorderLayout;

import javax.swing.JFrame;

import directredraw.SmallChessboardComponent;

public class SmallChessboardMain
{
  private static void dbg (String message) { System.out.println(message); }

  public static void main(String[] args)
  {
    //Create the top-level container and add contents to it.
    final JFrame frame = new JFrame("Small Chessboard");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // create the chessboard itself and set it in the component
    SmallChessboard chessboard = new SmallChessboard();

    // create the GUI component that will contain the chessboard
    SmallChessboardComponent chessboardComponent = new SmallChessboardComponent();
    chessboardComponent.setBoard (chessboard);

    frame.getContentPane().add(chessboardComponent, BorderLayout.CENTER);

    // pack and display all this
    frame.pack();
    frame.setVisible(true);
  }
} 
```

棋盘类：

```
package main;

public class SmallChessboard
{
  Piece [][] squares = new Piece[2][2];

  public SmallChessboard()
  {
    squares[0][0] = new Piece(Piece.WHITECOLOR, Piece.ROOK);
    squares[1][1] = new Piece(Piece.WHITECOLOR, Piece.KNIGHT);
  }

  /**
   * get the piece at the given rank and file; null if
   * no piece exists there.
   */
  public Piece getPiece(int rank, int file)
  { 
    if (0 > rank || rank > 2 || 0 > file || file > 2) { return null; }
      else { return squares[rank][file]; }
  }
} 
```

棋盘组件类：

```
package directredraw;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.geom.AffineTransform;

import javax.swing.JPanel;

import main.Piece;
import main.PieceImages;
import main.SmallChessboard;

public class SmallChessboardComponent extends JPanel
  { 
    private static final long serialVersionUID = 1L;

    Color whiteSquareColor = Color.yellow;
    Color blackSquareColor = Color.blue;

    private static void dbg (String msg) { System.out.println(msg); }

    private SmallChessboard  chessboard = null;

    // currently playing with rotating images; this affine transform
    // should help
    AffineTransform rotationTransform = null;

    private final int DEFAULT_PREFERRED_SIDE = 400;
    int wholeSide = DEFAULT_PREFERRED_SIDE;
    int side = DEFAULT_PREFERRED_SIDE / 8;

    public void setBoard (SmallChessboard givenBoard)
    { chessboard = givenBoard;
    }

    /**
     * set either or both colors for this chessboard; if either of
     * the arguments are null, they do not change the existing color
     * setting.
     */
    public void setColors (Color darkSquare, Color lightSquare)
    {
      if (darkSquare != null) { blackSquareColor = darkSquare; }
      if (lightSquare != null) { whiteSquareColor = lightSquare; }
    }

    /**
     * return the preferred size for this component.s
     */
    public Dimension getPreferredSize()
    { return new Dimension(wholeSide, wholeSide);
    }

    /*
     * return the image object for the given piece
     */
    private Image getImage(Piece piece)
    { return PieceImages.getPieceImage(this, piece);
    }

    public void paintComponent (Graphics graphics)
    {
      Graphics2D realGraphics = (Graphics2D) graphics;

      // the image container might have been stretched.
      // calculate the largest square held by the current container,
      // and then 1/2 of that size for an individual square.
      int wholeWidth  = this.getWidth();
      int wholeHeight = this.getHeight();
      wholeSide   = (wholeWidth / 2) * 2;
      if (wholeHeight < wholeWidth) { wholeSide = (wholeHeight / 2) * 2; }
      side = wholeSide / 2; 

      Rectangle clip = realGraphics.getClipBounds();
      boolean firstColumnWhite = false;

      // for each file on the board:
      //    set whether top square is white
      //    set background color according to white/black square
      //    
      for (int fileIndex=0; fileIndex<8; fileIndex++)
        { boolean currentColorWhite = firstColumnWhite;
          firstColumnWhite = !firstColumnWhite;

          // draw the board and all the pieces
          int rankIndex = 2;
          for (rankIndex=2; rankIndex>=0; rankIndex--)
          { 

            currentColorWhite = !currentColorWhite;

            // x and y position of the top left corner of the square we're drawing,
            // and rect becomes the dimensions and position of the square itself.
            int xPos = fileIndex * side;
            int yPos = rankIndex * side;
            Rectangle rect = new Rectangle(xPos, yPos, side, side);

            // if this square intersects the clipping rectangle we're drawing,
            // then we'll draw the square and the piece on the square.
            if (rect.intersects(clip))
            {
              // this puts down the correct color of square 
              if (currentColorWhite) { realGraphics.setColor(whiteSquareColor); }
                                else { realGraphics.setColor(blackSquareColor); }
              realGraphics.fillRect(xPos, yPos, side, side); 

              // if there is a piece on this square and it isn't selected at the
              // moment, then draw it.
              Piece currentPiece = chessboard.getPiece(rankIndex, fileIndex);
              if (currentPiece != null)
                { 
                  Image pieceImage = getImage(currentPiece);
                  int pieceHeight = pieceImage.getHeight(null);
                  double scalePiece = (double)side/(double)pieceHeight;
                  AffineTransform transform = new AffineTransform();
//                  transform.setToRotation(Math.toRadians(180));
                  transform.setToRotation(Math.toRadians(180), side/2, side/2);
                  transform.scale(scalePiece, scalePiece);
                  transform.translate(xPos/scalePiece, yPos/scalePiece);
//                  if (currentPiece.isBlack()) 
//                  {
//                    transform.translate(xPos + (side+2), yPos + (side+2));
//                    transform.rotate(Math.toRadians(180) /*, ,*/ ); 
//                  }
//                  else
//                  {
//                    transform.translate(xPos, yPos);
//                  }
                  realGraphics.drawImage(pieceImage, transform, this);
                }
            }
          }
        }
    }
  } 
```

片断.java

```
package main;

public class Piece
{ 
  // piece types; the sum of the piece type and the
  // color gives a number unique to both type and color,
  // which is used for things like image indices.
  public static final int PAWN   = 0;
  public static final int KNIGHT = 1;
  public static final int BISHOP = 2;
  public static final int ROOK   = 3;
  public static final int QUEEN  = 4;
  public static final int KING   = 5;

  // one of these is the color of the current piece
  public static final int NOCOLOR = -1;
  // the sum of the piece type and the
  // color gives a number unique to both type and color,
  // which is used for things like image indices.
  public static final int BLACKCOLOR = 0;
  public static final int WHITECOLOR = 6;

  int color = NOCOLOR;
  int imageIndex;

  public Piece(int color, int pieceType)
  { 
    // dbg -- all pieces are white rooks for now...
    this.color  = color;
    imageIndex  = color + pieceType;
  }

  /**
   * return the integer associated with this piece's color;
   */
  int getPieceColor()
  { return color;
  }

  /**
   * return true if the piece is black
   */
  public boolean isBlack() 
  { 
    return (color == BLACKCOLOR); 
  }

  /**
   * set the color associated with this piece; constants
   * found in this class.
   */
  public void setPieceColor(int givenColor)
  { color = givenColor;
  }

  /**
   * return the integer designated for the image used for this piece.
   */
  int getImageIndex()
  { return imageIndex;
  }

} 
```

和 PieceImages.java

```
package main;

import java.awt.Component;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.Toolkit;
import java.net.URL;

public class PieceImages
{ static Image images[] = null;

private static void dbg (String msg) { System.out.println(msg); } 

  public static Image getPieceImage (Component target, Piece piece)
  {
    if (images == null)
    try
    { 
      MediaTracker tracker = new MediaTracker(target);
      images = new Image[12];
      images[Piece.BLACKCOLOR + Piece.PAWN] = getImage(tracker, "bPawn.gif");
      images[Piece.BLACKCOLOR + Piece.KNIGHT] = getImage(tracker, "bKnight.gif");
      images[Piece.BLACKCOLOR + Piece.BISHOP] = getImage(tracker, "bBishop.gif");
      images[Piece.BLACKCOLOR + Piece.ROOK] = getImage(tracker, "bRook.gif");
      images[Piece.BLACKCOLOR + Piece.QUEEN] = getImage(tracker, "bQueen.gif");
      images[Piece.BLACKCOLOR + Piece.KING] = getImage(tracker, "bKing.gif");

      images[Piece.WHITECOLOR + Piece.PAWN] = getImage(tracker, "wPawn.gif");
      images[Piece.WHITECOLOR + Piece.KNIGHT] = getImage(tracker, "wKnight.gif");
      images[Piece.WHITECOLOR + Piece.BISHOP] = getImage(tracker, "wBishop.gif");
      images[Piece.WHITECOLOR + Piece.ROOK] = getImage(tracker, "wRook.gif");
      images[Piece.WHITECOLOR + Piece.QUEEN] = getImage(tracker, "wQueen.gif");
      images[Piece.WHITECOLOR + Piece.KING] = getImage(tracker, "wKing.gif");
      if (!tracker.waitForAll(10000))
      { System.out.println("ERROR: not all piece main.images loaded");
      }
      dbg("piece images loaded");
    }
    catch (Exception xcp)
    { System.out.println("Error loading images");
      xcp.printStackTrace();
    }
    return images[piece.getImageIndex()];
  }

  private static Image getImage(MediaTracker tracker, String file)
  {
    URL url = PieceImages.class.getResource("images/" + file);
    Image image = Toolkit.getDefaultToolkit().getImage(url);
    tracker.addImage(image,  1);
    return image;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:54:23.317

好吧，这有点小手。示例代码仅适用于 90 度增量（仅以这种方式设计），要进行较小的增量，您可以使用一些三角函数来计算图像的宽度和高度（在某处有答案；））

```
public class ImagePane extends JPanel {

    private BufferedImage masterImage;
    private BufferedImage renderedImage;

    public ImagePane(BufferedImage image) {
        masterImage = image;
        applyRotation(0);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(renderedImage.getWidth(), renderedImage.getHeight());
    }

    @Override
    public Dimension getMinimumSize() {
        return getPreferredSize();
    }

    protected int getVirtualAngle(int angle) {
        float fRotations = (float) angle / 360f;
        int rotations = (int) (fRotations - (fRotations / 1000));

        int virtual = angle - (rotations * 360);

        if (virtual < 0) {
            virtual = 360 + virtual;
        }

        return virtual;
    }

    public void applyRotation(int angle) {
        // This will only work for angles of 90 degrees...

        // Normalize the angle to make sure it's only between 0-360 degrees
        int virtualAngle = getVirtualAngle(angle);
        Dimension size = new Dimension(masterImage.getWidth(), masterImage.getHeight());
        int masterWidth = masterImage.getWidth();
        int masterHeight = masterImage.getHeight();

        double x = 0; //masterWidth / 2.0;
        double y = 0; //masterHeight / 2.0;

        switch (virtualAngle) {
            case 0:
                break;
            case 180:
                break;
            case 90:
            case 270:
                size = new Dimension(masterImage.getHeight(), masterImage.getWidth());
                x = (masterHeight - masterWidth) / 2.0;
                y = (masterWidth - masterHeight) / 2.0;
                break;
        }
        renderedImage = new BufferedImage(size.width, size.height, masterImage.getTransparency());
        Graphics2D g2d = renderedImage.createGraphics();

        AffineTransform at = AffineTransform.getTranslateInstance(x, y);

        at.rotate(Math.toRadians(virtualAngle), masterWidth / 2.0, masterHeight / 2.0);
        g2d.drawImage(masterImage, at, null);

        g2d.dispose();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        int width = getWidth() - 1;
        int height = getHeight() - 1;

        int x = (width - renderedImage.getWidth()) / 2;
        int y = (height - renderedImage.getHeight()) / 2;

        g2d.drawImage(renderedImage, x, y, this);
    }

} 
```

现在，您可以简单地垂直“翻转”图像，如果这对您更有效

```
public class FlipPane extends JPanel {

    private BufferedImage masterImage;
    private BufferedImage renderedImage;

    public FlipPane(BufferedImage image) {
        masterImage = image;
        flipMaster();
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(renderedImage.getWidth(), renderedImage.getHeight());
    }

    @Override
    public Dimension getMinimumSize() {
        return getPreferredSize();
    }

    protected void flipMaster() {
        renderedImage = new BufferedImage(masterImage.getWidth(), masterImage.getHeight(), masterImage.getTransparency());
        Graphics2D g2d = renderedImage.createGraphics();
        g2d.setTransform(AffineTransform.getScaleInstance(1, -1));
        g2d.drawImage(masterImage, 0, -masterImage.getHeight(), this);
        g2d.dispose();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        int width = getWidth() - 1;
        int height = getHeight() - 1;

        int x = (width - renderedImage.getWidth()) / 2;
        int y = (height - renderedImage.getHeight()) / 2;

        g2d.drawImage(renderedImage, x, y, this);
    }
} 
```

这基本上导致：

![图像旋转示例](../Images/faae423f7f920a9bb54a6da6e4402154.png)

原创 | 180度旋转| 垂直反转...

现在，如果您将`flipMaster`方法更改为读取：

```
g2d.setTransform(AffineTransform.getScaleInstance(-1, -1));
g2d.drawImage(masterImage, -masterImage.getWidth(), -masterImage.getHeight(), this); 
```

您将获得与 180 度旋转相同的效果；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T03:41:16.773

在将其平移到正确位置之前尝试执行旋转。只需重新排序转换，以便首先缩放，然后旋转（围绕图像的中心点），然后平移：

```
transform.scale(scale, scale);
transform.rotate(Math.PI, pieceWidth / 2, pieceHeight /2);
transform.translation(xPos, yPos); 
```

顺便说一句，棋盘上的黑色棋子通常不会旋转。:)

**更新**

它以什么方式不起作用？我提供的解决方案也与您的代码不同，因为缩放是在翻译之前执行的。您可以尝试旋转、平移和缩放。

我强烈建议您修改您的代码，以便您可以最后执行翻译。如果你这样做，一切都会变得不那么复杂。完成此操作后，您只需缩放一次即可自动处理旋转。

```
transform.scale(scale, scale); // or transform.scale(scale, -scale); to rotate
transform.translate(xPos, yPos); 
```

# javascript - 表单包含某些文本时的表单错误消息

> ID：11911612
> 
> 赞同：1
> 
> 时间：2012-08-11T03:18:18.670
> 
> 标签：javascript, forms, validation

我有一个包含潜在客户信息字段的表单。垃圾邮件发送者在地址字段中输入网址。当字段包含“http://”时，我希望收到一条错误消息

这是表单代码：

```
<label>First Name:</label> <input id="first_name" name="first_name" type="text" size="20" />
<label>Last Name:</label> <input id="last_name" name="last_name" type="text" size="20" />
<label>Address:</label> <input name="address" type="text" size="30" />
<label>City, State &nbsp;Zip:</label> <input name="city" type="text" size="20" value="City, State Zip"/>
<label>Phone Number:</label> <input name="phone" type="text" size="20" />
<label>Email:</label> <input id="email" name="email" type="text" size="30" /> 
```

这是我的错误代码：

```
 function validateForm(){
    message = '';
    error = 0;

    if (document.contact_form.first_name.value == '') { 
        message = 'First name is a required field\n'; 
        error = 1;
    }
    if (document.contact_form.last_name.value == '') { 
        message = message + 'Last name is a required field\n'; 
        error = 1;
    }
    if (document.contact_form.phone.value == '') { 
        message = message + 'Phone Number is a required field\n'; 
        error = 1;
    }
    if (document.contact_form.email.value == '') { 
        message = message + 'Email is a required field\n'; 
        error = 1;
    }   
    if (WHAT GOES HERE TO SHOW THAT THE FIELD CAN'T CONTAIN ANY VARIATION OF 'http://?') { 
        message = message + 'That is not a valid address\n'; 
        error = 1;
    }

    if (error) {
        alert(message);
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:33:23.210

使用正则表达式。

```
if (/^http:\/\//.test(document.contact_form.email.value)) {
    message = message + 'That is not a valid address\n'; 
    error = 1;
} 
```

我假设您只想在字符串的开头测试 http:// （`^`如果您想在字符串中的任何位置测试它，只需删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:36:23.830

您可以使用`indexOf`如下功能：

```
if(document.contact_form.address.value.indexOf("http://") !== -1) {
    message = message + "That is not a valid address\n"; 
    error = true;
} 
```

`indexOf`如果在字符串中找不到函数参数中`-1`指定的值，将返回。`indexOf`

**参考：**

*   [http://www.w3schools.com/jsref/jsref_indexof.asp](http://www.w3schools.com/jsref/jsref_indexof.asp)
*   [如何检查字符串是否包含 JavaScript 中的子字符串？](https://stackoverflow.com/questions/1789945/javascript-string-contains)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T03:47:21.883

给你有问题的输入上课，也许不是我所做的。给你的身份证起一个有用的名字。

使编码变得容易得多。

```
function validate() {

                    var inputs = document.querySelectorAll('.inputs'),
                        i = 0;
                    for (; i < inputs.length; i++) {
                        if (inputs[i].value == '') {
                            message = message + ' ' + inputs[i].id + ' is a required field\n';
                        };
                    };
                }; 
```

# windows-phone-7 - 数据绑定不反映更改

> ID：11911613
> 
> 赞同：0
> 
> 时间：2012-08-11T03:18:20.317
> 
> 标签：windows-phone-7

我有 2 个复选框绑定到 appSetting.xaml 页面上的相同源。当复选框状态发生变化时，状态将被写回隔离存储。

问题是当检查或未选中复选框时，第二个不反映更改。但是当我导航到其他页面而不是再次导航到它时。这两个控件在从独立存储加载时都会更新。但我希望他们立即反映更改，如果他们更改状态（绑定模式也设置为两种控件的两种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:44:55.400

您需要使用 INotifyPropertyChanged 接口 [http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# parallel-processing - 为什么我不能一次打开 8 个进程？

> ID：11911615
> 
> 赞同：0
> 
> 时间：2012-08-11T03:18:47.530
> 
> 标签：parallel-processing, mpi, openmpi, message-passing

我是 MPI 的初学者。当我编写我的第一个程序时，我遇到了一个棘手的问题。

```
MPI_Init(&argc, &argv) ; 
MPI_Comm_rank( MPI_COMM_WORLD, &rank) ; 
MPI_Comm_size( MPI_COMM_WORLD, &size)  ;
printf("Process: %d\n", rank);
printf("Procs_num: %d\n", size); 
```

和：

```
mpicc main.c -o main 
mpirun -np 8 main 
```

但我得到的只是 8 个副本：

```
Process: 0
Procs_num: 1 
```

我期望得到的是：

```
Process: 0~7 
Procs_num: 8 
```

我猜是因为 MPI_COMM_WORLD 中没有 8 个进程，但我无法弄清楚原因，也不知道如何解决它。

我希望你能抓住我想要表达的东西。很多谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:46:48.057

显然你忘了打电话`MPI_Finalize`

这是正确的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h> 

int main (int argc, char *argv[]) {
    int rank, size;

    MPI_Init(&argc, &argv) ; 
    MPI_Comm_rank( MPI_COMM_WORLD, &rank) ; 
    MPI_Comm_size( MPI_COMM_WORLD, &size)  ;
    printf("Process: %d\n", rank);
    printf("Procs_num: %d\n", size);

    MPI_Finalize();                         

   return(0);
} 
```

然后你得到你的 8 个不同等级：

```
~/mpi_tests/examples > mpirun -np 8 ~/mpi_tests/examples/t
Process: 4
Procs_num: 8
Process: 5
Procs_num: 8
Process: 0
Procs_num: 8
Process: 1
Procs_num: 8
Process: 7
Procs_num: 8
Process: 2
Procs_num: 8
Process: 3
Procs_num: 8
Process: 6
Procs_num: 8 
```

# c++ - 从全局变量转换为单例

> ID：11911616
> 
> 赞同：-1
> 
> 时间：2012-08-11T03:19:20.090
> 
> 标签：c++

我有一个程序有一个全局类实例，我想将其转换为单例。有人可以给我一个关于如何最好地做到这一点的简单例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:29:51.707

关于以下内容的单身人士：

```
class Singleton
{
public:
  static Singleton & instance()
  {
    static Singleton s;
    return s;
  }

private:
  Singleton();
  Singleton(const Singleton &);
}; 
```

当您第一次尝试访问它时，分配/初始化单例。这使得在源文件之间以不可预测的顺序初始化的全局对象更具可预测性。

而不是 global `static Singleton s;`，您必须在`Singleton::instance()`每次访问它时调用它。

编辑：在单例的情况下，只有一个类实例，你可以通过静态函数访问，我通常称它为实例或获取，但你可以随意调用它。其余与任何普通类相同。

我忘了提到在 C++ 中你必须将复制构造函数设为私有。单例不能有任何公共构造函数。

该`instance()`函数返回隐藏的“全局变量”，因此您可以使用它。假设您的单例中有一个名为 str 的字符串。你可以设置它`Singleton::instance().str = "something";`

# android - 如何获取旧 api 版本的指南。在线 Android 指南使用 Android 4.1

> ID：11911621
> 
> 赞同：0
> 
> 时间：2012-08-11T03:20:32.417
> 
> 标签：android, android-layout

我在看一篇关于 Layouts 的[文章](http://developer.android.com/guide/topics/ui/layout/listview.html)。当我运行代码时，我发现了多个关于找不到某些类的错误。我查看了页面的按钮，发现它是 Android 4.1。此外，布局教程仅显示线性和相对（没有其他布局、表格、框架？）我想获得旧版本的指南，我还想了解那里发生了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:24:12.233

如果您正在浏览[文档](http://developer.android.com/reference/android/package-summary.html)，则可以按 API 版本进行过滤。那将是最准确的。但是，如果您正在寻找特定版本的特定指南，Google 是您的朋友。

# php - PHP CI：未定义的属性->调用私有函数

> ID：11911624
> 
> 赞同：0
> 
> 时间：2012-08-11T03:21:27.197
> 
> 标签：php, codeigniter

我编写了一个私有函数，允许我在编辑它时调用正在调用的对象的名称，但由于某些奇怪的原因，它被作为未定义属性拾取，为什么？

**麻烦线：**

```
$data['pageTitle'] = 'Edit '.$this->fieldTitle.' '; 
```

**功能：**

```
private function fieldTitle($id)
{
    $this->uri->segment(4);

    $information = $this->form_model->showFieldInformation();

    foreach ($information as $feild) {

        $feildName = $feild->name;

    }
    return $fieldName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:32:14.163

我看到两个错误：

fieldTitle 应该是一个函数`$this-><fieldTitle()`而不是一个变量`$this->fieldTitle`

有一个错字：

```
foreach ($information as $feild) {

    $feildName = $feild->name;

}
return $fieldName; 
```

你打错了`$fieldName`，而且`$feildName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:25:21.577

```
$data['pageTitle'] = 'Edit '.$this->fieldTitle.' '; 
```

应该

```
$data['pageTitle'] = 'Edit '.$this->fieldTitle().' '; 
```

忘记了`()`

# python - 如何让我的圈子在 pygame 中飞出屏幕？

> ID：11911625
> 
> 赞同：2
> 
> 时间：2012-08-11T03:21:38.040
> 
> 标签：python, animation, random, pygame, game-loop

我是python的初学者，我正在尝试制作一个圆形游戏。到目前为止，当您单击时，它会在您的鼠标上绘制一个具有随机颜色和半径的圆圈。

接下来，我希望圆圈以随机方向飞离屏幕。我该怎么做呢？到目前为止，这是我的代码的主要部分：

```
check1 = None
check2 = None

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit

        if event.type == MOUSEBUTTONDOWN:
            last_mouse_pos = pygame.mouse.get_pos()

    if last_mouse_pos:

        global check

        color1 = random.randint(0,255)
        color2 = random.randint(0,255)
        color3 = random.randint(0,255)
        color = (color1,color2,color3)

        radius = random.randint (5,40)
        posx,posy = last_mouse_pos

        if posx != check1 and posy != check2:
            global check1, check2
            screen.lock()
            pygame.draw.circle(screen, color, (posx,posy), radius)
            screen.unlock()
            check1,check2 = posx,posy

    pygame.display.update() 
```

同样，我希望圆圈以随机方向飞离屏幕。我做了一些尝试，但还没有成功。另外，感谢帮助我的**jdi**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T03:35:25.407

创建圆圈时（单击），生成 2 个随机数。这些将是二维[欧几里得](http://en.wikipedia.org/wiki/Euclidean_vector) [速度](http://en.wikipedia.org/wiki/Velocity)矢量的 (x,y) 分量：

![在此处输入图像描述](../Images/96a969ae6e879513dc1d7472e2c4dc5c.png)

```
# interval -1.0 to 1.0, adjust as necessary
vx, vy = ( (random.random()*2) -1, (random.random()*2) - 1 ) 
```

然后在创建球后，在游戏循环的每次迭代中，将球的位置增加速度向量：

![在此处输入图像描述](../Images/550eec2d9966a3b204424074e4b0acf0.png)

```
posx, posy = posx + vx, posy + vy 
```

* * *

请注意，整体速度可能是可变的。如果您希望始终保持每秒 1.0 的速度，请对向量进行归一化：

要对向量进行[归一化](http://en.wikipedia.org/wiki/Unit_vector)，请将其除以其[幅度](http://en.wikipedia.org/wiki/Magnitude_%28mathematics%29#Euclidean_vectors)：

![在此处输入图像描述](../Images/ca01f993cc749e62faccbb731f8aae08.png)

所以在你的情况下：

![在此处输入图像描述](../Images/fed6ea57bb47e9c73c922537ea2edf12.png)

因此：

![在此处输入图像描述](../Images/5378e204ac53857caf7e1e785ea7135b.png)

所以在 Python 中，在导入`math`之后`import math`：

```
mag = math.sqrt(vx*vx + vy*vy)
v_norm = vx/mag, vy/mag
# use v_norm instead of your (vx, vy) tuple 
```

然后你可以将它与一些`speed`变量相乘，以获得可靠的速度。

* * *

一旦你让多个对象四处移动并可能离开屏幕，删除那些没有机会回来并且与你的程序无关的屏幕外对象是很有用的。否则，如果您在创建更多对象的同时继续跟踪所有这些屏幕外对象，则本质上会出现内存泄漏，并且在足够的时间/操作下会耗尽内存。

* * *

虽然你现在做的事情很简单，假设你还没有，学习一些基本的向量数学很快就会得到回报。最终，您可能需要涉足一些矩阵数学来进行某些转换。如果您是新手，它并不像最初看起来那么难。你可能不去研究它而侥幸逃脱，但如果你开始尝试做更有野心的事情，你以后会省力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T18:25:17.017

现在，您正在执行以下操作（大大简化您的代码）...

```
while True:
    if the mouse was clicked:
        draw a circle on the screen where the mouse was clicked 
```

让我们让事情变得更容易一些，并逐渐建立起来。

## 从圆圈开始，无需用户点击

为简单起见，让我们在屏幕左上角附近画一个圆圈，这样我们总是可以假设会有一个圆圈（使一些逻辑更容易）

```
circle_x, circle_y = 10,10
while True:
    draw the circle at circle_x, circle_y

    pygame.display.update() 
```

## 为圆圈设置动画

在过多地讨论“随机方向”之前，让我们让它变得简单并朝着一个方向前进（比如说，总是向下和向右）。

```
circle_x, circle_y = 0,0
while True:
    # Update
    circle_x += 0.1
    circle_y += 0.1

    # Draw
    draw the circle at circle_x, circle_y
    update the display 
```

现在，每次通过循环，圆的中心都会移动一点，然后将它绘制到新的位置。请注意，您可能需要减少添加到 circle_x 和 y 的值（在我的代码中为 0.1），以防圆移动得太快。

但是，您会注意到您的屏幕现在被圆圈填满了！而不是一个“移动”的圆圈，你只是画了很多次圆圈！为了解决这个问题，我们将在每次绘制之前“清除”屏幕......

```
screen = ....
BLACK = (0,0,0) # Defines the "black" color
circle_x, circle_y = 0,0
while True:
    # Update
    circle_x += 0.1
    circle_y += 0.1

    # Draw
    screen.fill(BLACK)
    draw the circle at circle_x, circle_y
    update the display 
```

请注意，在我们绘制圆圈之前，我们通过将整个事物涂成黑色来“清除”屏幕。

现在，您可以开始将您想要的其余内容重新放入代码中。

## 跟踪多个圈子

您可以通过使用圆圈列表而不是两个圆圈变量来做到这一点

```
circles = [...list of circle positions...]
while True:
    # Update
    for circle in circles:
        ... Update the circle position...

    # Draw
    screen.fill(BLACK)
    for circle in circles:
        draw the circle at circle position # This will occur once for each circle
    update the display 
```

需要注意的一件事是，如果您跟踪元组中的圆圈位置，您将无法更改它们的值。如果您熟悉面向对象编程，您可以创建一个 Circle 类，并使用它来跟踪与您的圈子相关的数据。否则，您可以在每个循环中为每个圆创建一个更新坐标列表。

## 用户点击时添加圈子

```
circles = []
while True:
    # event handling
    for event in pygame.event.get():
        if event.type == MOUSEBUTTONDOWN:
            pos = pygame.mouse.get_pos()
            circles.append( pos ) # Add a new circle to the list

    # Update all the circles
    # ....

    # Draw
    clear the screen
    for circle_position in circles:
        draw the circle at circle_position # This will occur once for each circle
    update the display 
```

## 让圆圈沿随机方向移动

这就是数学的良好帮助发挥作用的地方。基本上，您需要一种方法来确定每个循环更新圆的 x 和 y 坐标的方法。请记住，完全有可能只说您希望它在每个轴（X，y）的 -1 和 1 之间移动，但这不一定是正确的。您可能使 X 和 Y 都为零，在这种情况下，圆根本不会移动！下一个圆圈可能是 1 和 1，这将比其他圆圈更快。

我不确定您的数学背景是什么，因此您可能需要学习一些知识才能了解如何在程序中存储“方向”（有时称为“向量”）背后的一些数学知识。您可以尝试 Preet 的回答，看看是否有帮助。有几何学和三角学背景的人更容易真正理解（尽管如果你找到了一个好的资源，你可能没有它也能过得去）。

## 其他一些想法

您需要记住的其他一些事项：

1.  现在，我们正在使用“取决于帧速率”的代码。也就是说，圆圈在屏幕上移动的速度完全取决于计算机的运行速度；较慢的计算机会看到圆圈像蜗牛一样移动，而较快的计算机在圆圈飞出屏幕之前几乎看不到圆圈！有一些方法可以解决这个问题，您可以自行查找（在您最喜欢的搜索引擎中搜索“帧速率依赖”或其他术语）。

2.  现在，你有 screen.lock() 和 screen.unlock()。你不需要这些。如果表面需要（某些表面不需要）并且您要手动访问像素数据，您只需要锁定/解锁屏幕表面。做一些事情，比如在屏幕上画圆圈，pygame 会自动为你锁定/解锁表面。简而言之，您现在不需要处理锁定/解锁。

# android - Android强制关闭解析整数和引用按钮

> ID：11911631
> 
> 赞同：-1
> 
> 时间：2012-08-11T03:23:36.307
> 
> 标签：android, parseint, forceclose

如果他已经有帐户，则第一个活动将获取用户的名称和密码，否则将打开第二个视图类，否则用户应先唱歌。

我有两个常见问题：

**1-**整数解析导致 logcat 通知强制关闭

**2-**第二个按钮也强制关闭

* * *

```
package sarah.android;
import android.R.integer;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SelesMeter2Activity extends Activity
implements OnClickListener{
EditText ed1;
EditText ed2;
Button b1;
Button b2;
SQLiteDatabase sql;
Cursor c;
Intent in;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ed1=(EditText) findViewById(R.id.ed1);
    ed2=(EditText) findViewById(R.id.ed2);
    b1= (Button) findViewById(R.id.bt1);
    b2= (Button) findViewById(R.id.bt2);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);
    sql=openOrCreateDatabase("db",0, null);
    sql.execSQL("CREATE TABLE if not exists " +
            "Employee2 (password integer NOT NULL PRIMARY KEY,name text           NOT NULL)");
 }
@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    //log in 
    if(arg0.getId()==R.id.bt1)
    {
        String name=ed1.getText().toString();
        Integer pass=Integer.parseInt
                (ed2.getText().toString());
        if(c.getCount()!=0)
        {
    c=sql.rawQuery("select * from Employee", null);
    while(c.moveToNext())
    {
    if(name.equals("c.getString(1)")&&pass==c.getInt(0))
    {
        in=new Intent(this,secondview.class);
        startActivity(in);
        break;
    }
    }
        }

    else
    {
        Toast.makeText(this,"please sign up first or enter " +
                "correct data", 2000).show();
    }

    }
    else if(arg0.getId()==R.id.bt2)
    {
        //sign up
    Intent  in2=new Intent(this,signup.class);

        startActivity(in);

    }
}   
} 
```

输入用户新信息的sing up类：package sarah.android；

```
 import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.EditText;
    import android.widget.Toast;

   public class signup extends Activity
   implements OnClickListener{
EditText e1;
EditText e2;
SelesMeter2Activity obj;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.singupx);
    Intent in =getIntent();
    e1=(EditText) findViewById(R.id.ed1s);
    e2=(EditText) findViewById(R.id.ed2s);
    obj=new SelesMeter2Activity();
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    String n=e1.getText().toString();
    int p=Integer.parseInt(e2.getText().toString());
    obj.sql.execSQL("insert into Employee2        (password,name)values('"+n+"',"+p+")");

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:36:40.513

您需要先检查您要转换的文本是否为数值；否则，`parseInt(...)`将失败。

您可以使用以下方法执行此操作`try/catch`：

```
String sp = e2.getText().toString();
try {
    // Attempt to parse the number as an integer
    int p=Integer.parseInt(sp);
    // This insertion will *only* execute if the parseInt was successful
    obj.sql.execSQL("insert into Employee2        (password,name)values('"+n+"',"+p+")");
} catch (NumberFormatException nfe) {
    // parseInt failed, so tell the user it's not a number
    Toast.makeText(this, "Sorry, " + sp + " is not a number. Please try again.", Toast.LENGTH_LONG).show();
} 
```

# mobile - 站点宽度与设备宽度冲突

> ID：11911633
> 
> 赞同：0
> 
> 时间：2012-08-11T03:24:08.007
> 
> 标签：mobile, media-queries, css

我的 width=100% css 规则有一点问题。在桌面浏览器上很好，但是在移动设备上，它只使用了 100% 的设备宽度。所以在手机上，我最终会得到一个跨越 480 像素的 div，而不是跨越整个水平屏幕。

谢谢你的帮助！

```
#intro {background-color: #1F1F1F; width: 100%; margin: auto; display:block;}
#intro-inner {height:450px; width:1105px; padding-top:50px;display:block;margin:0 auto;position:relative;} 
```

在 HTML 页面上，intro 内部 div 位于 intro div 内。背景颜色为蓝色。在桌面上，该站点看起来很好。但是在设计宽度之后的移动设备上，例如。480px，#intro div 背景和它的颜色结束。

# java - 关于java中的聊天客户端-服务器程序

> ID：11911636
> 
> 赞同：1
> 
> 时间：2012-08-11T03:24:44.080
> 
> 标签：java, client-server, chat

我做了一个客户端-服务器聊天，它使用 postgresql 数据库来存储用户。服务器使用我设计的通信协议来允许通信过程，一切正常。问题是，用户在收到消息时需要点击一个按钮才能打开聊天窗口，否则他无法阅读传入的消息。我想编写一个类似 msn 的服务，如果窗口尚未打开，则在收到消息时打开一个窗口，如果它已打开，则在同一窗口中显示消息。我似乎无法找到一种方法来做到这一点，我能得到的任何帮助都会非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:08:43.993

您可能想看看几件事。首先是 Java 与 Windows 系统托盘的集成。 [http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

[http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javase6/systemtray/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javase6/systemtray/)

另一种是在后台运行一个“侦听器”，可能作为 Windows 服务。此服务侦听消息并将它们弹出到窗口中。可以在不停止服务的情况下关闭（隐藏）窗口。[http://edn.embarcadero.com/article/32068](http://edn.embarcadero.com/article/32068)

# mysql - SQL 内连接问题

> ID：11911646
> 
> 赞同：1
> 
> 时间：2012-08-11T03:26:00.630
> 
> 标签：mysql, sql, join, inner-join

目前我有以下命令：

```
SELECT * FROM `clients` 
WHERE `ID`=(SELECT `clientID` 
            FROM `websites` 
            WHERE `name` LIKE "%my name%") 
LIMIT 0,20 
```

我希望使用内部连接，因为 AFAIK 应该这样处理。

我不知道该怎么做......这就是我能想到的：

```
SELECT * 
FROM `clients` 
WHERE INNER JOIN `websites` ON `websites`.`name` LIKE "%lead%" 
LIMIT 0,20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:27:40.817

```
SELECT c.* FROM `clients` c
INNER JOIN `websites` w ON w.clientID = c.ID
WHERE w.`name` LIKE '%lead%'
LIMIT 0,20 
```

# php - 防止使用 .htaccess 直接访问公用文件夹中的文件夹不起作用

> ID：11911647
> 
> 赞同：2
> 
> 时间：2012-08-11T03:26:03.137
> 
> 标签：php, .htaccess, web, security

我在公用文件夹中有一个文件**夹** ，我试图阻止用户使用 .htaccess 文件直接从该文件夹访问文件。

例如，假设我要阻止的文件夹名为 apples `www.website.com/apples`，. 到目前为止，如果有人输入`www.website.com/apples/secretfile.php`它，则该文件似乎可以在不应该访问的时候访问。

我在 .htaccess 文件中放置的代码是这样的：

```
RewriteEngine on
# -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
# Code below prevents people listing a directory index of the site's files
IndexIgnore *

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName website.com
AuthUserFile /home/username/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/username/public_html/_vti_pvt/service.grp

RewriteEngine On
# turn on the mod_rewrite engine
RewriteCond %{REQUEST_FILENAME}.php -f
# IF the request filename with .php extension is a file which exists
RewriteCond %{REQUEST_URI} !/$
# AND the request is not for a directory
RewriteRule (.*) $1\.php [L]
# redirect to the php script with the requested filename

RewriteEngine on
# This code prevents hotlinking
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?website.com/.*$ [NC]
RewriteRule \.(gif|jpg|js|css)$ - [F]

# Error page redirects
ErrorDocument 400 /400.php
ErrorDocument 401 /401.php
ErrorDocument 403 /403.php
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php

# Prevent people from viewing the htaccess file period
<Files .htaccess>
order allow,deny
deny from all
</Files>

# Bad bot prevention codes
RewriteEngine On 
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^eCatch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetRight [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR] 
RewriteCond %{HTTP_USER_AGENT} ^HMView [OR] 
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^larbin [OR] 
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [OR] 
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Navroad [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NearSite [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Octopus [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [OR] 
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pavuk [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [OR] 
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ReGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Wget [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Widow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Zeus 
RewriteRule ^.* - [F,L] 
```

那么我错过了什么？它仍然允许人们输入该文件夹中文件的完整地址，并且尽我所能告诉它不应该允许他们这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:59:41.907

如果您已经有一个 htaccess 文件

```
Deny from all 
```

它不起作用，那么您的 apache Web 服务器未配置为使用 htaccess。您将需要打开`apache httpf.conf file`并编辑它。对于 xampp，它位于

```
xampp installation directory/apache/conf 
```

在该文件中查找以下行：

```
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
# Options FileInfo AuthConfig Limit

AllowOverride None 
```

将其更改为`AllowOverride All`，如果它的值是其他值。

在此之后重新启动 apache 服务器并查看 htaccess 文件是否开始工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:30:18.790

在目录 apples 中，放置一个包含指令的 htaccess 文件

```
Deny from all 
```

即使 apples 在公用文件夹中，apples 中的任何内容都将无法访问，因为此 htaccess 将覆盖任何其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T04:01:51.983

你可以把它放在你的 .htaccess 文件中：

```
RedirectMatch 404 /apples(/|$) 
```

并且任何在苹果下的任何请求都将返回 404。如果您更喜欢返回 403（禁止），则在此规则中使用 403。

如果您不介意使用单独的 .htaccess 文件，那么您还可以通过放置以下内容来阻止访问苹果中的文件：

```
Deny from all 
```

在 apples 目录的 .htaccess 文件中。

如果您发现这不起作用，那么您可能需要确认允许 .htaccess 文件的位置。

# ios - PickerView 布局 - 背景太大

> ID：11911652
> 
> 赞同：0
> 
> 时间：2012-08-11T03:27:44.497
> 
> 标签：ios, uipickerview

我有一个尺寸合适的 UIPickerView，除了我想让背景小很多，以便在选取器视图的框架内旋转部分更大。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:46:40.983

我不确定我的问题是否正确，但无法自定义`UIPickerView`控制器。您唯一能做的就是`UIPickerView`用自定义图像覆盖它，就像它显示在[UIDatePicker 和 UIPickerView 的自定义背景颜色处](http://www.jademind.com/blog/posts/uidatepicker-and-uipickerview)一样。他们在那里简单地创建了一个带有透明部分的图像并将其放在控件的顶部。

# c# - 将 Windows 应用程序中的 console.writeline 重定向到字符串

> ID：11911660
> 
> 赞同：18
> 
> 时间：2012-08-11T03:30:16.713
> 
> 标签：c#, .net, console

我有一个用 C# 编写的外部 dll，我从程序集文档中研究了它使用`Console.WriteLine`.

这个 DLL 在我与应用程序的 UI 交互期间写入控制台，所以我不直接调用 DLL，但我会捕获所有控制台输出，所以我想我必须在表单加载中初始化，然后稍后获取捕获的文本.

我想将所有输出重定向到一个字符串变量。

我试过`Console.SetOut`了，但它用于重定向到字符串并不容易。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-11T03:46:44.260

由于您似乎想实时捕获控制台输出，我发现您可能会创建自己的`TextWriter`实现，该`Write`实现`WriteLine`在`Console`.

作者长这样：

```
 public class ConsoleWriterEventArgs : EventArgs
    {
        public string Value { get; private set; }
        public ConsoleWriterEventArgs(string value)
        {
            Value = value;
        }
    }

    public class ConsoleWriter : TextWriter
    {
        public override Encoding Encoding { get { return Encoding.UTF8; } }

        public override void Write(string value)
        {
            if (WriteEvent != null) WriteEvent(this, new ConsoleWriterEventArgs(value));
            base.Write(value);
        }

        public override void WriteLine(string value)
        {
            if (WriteLineEvent != null) WriteLineEvent(this, new ConsoleWriterEventArgs(value));
            base.WriteLine(value);
        }

        public event EventHandler<ConsoleWriterEventArgs> WriteEvent;
        public event EventHandler<ConsoleWriterEventArgs> WriteLineEvent;
    } 
```

如果它是 WinForm 应用程序，您可以像这样在 Program.cs 中设置编写器并使用其事件：

```
 /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        using (var consoleWriter = new ConsoleWriter())
        {
            consoleWriter.WriteEvent += consoleWriter_WriteEvent;
            consoleWriter.WriteLineEvent += consoleWriter_WriteLineEvent;

            Console.SetOut(consoleWriter);
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }

    static void consoleWriter_WriteLineEvent(object sender, Program.ConsoleWriterEventArgs e)
    {
        MessageBox.Show(e.Value, "WriteLine");
    }

    static void consoleWriter_WriteEvent(object sender, Program.ConsoleWriterEventArgs e)
    {
        MessageBox.Show(e.Value, "Write");
    } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-11T03:44:11.863

它基本上相当于以下几点：

```
var originalConsoleOut = Console.Out; // preserve the original stream
using(var writer = new StringWriter())
{
    Console.SetOut(writer);

    Console.WriteLine("some stuff"); // or make your DLL calls :)

    writer.Flush(); // when you're done, make sure everything is written out

    var myString = writer.GetStringBuilder().ToString();
}

Console.SetOut(originalConsoleOut); // restore Console.Out 
```

因此，在您的情况下，您需要在调用第三方 DLL 之前进行设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-10T11:32:18.273

您也可以使用 Console.OpenStandardOutput 调用 SetOut，这将恢复原始输出流：

```
Console.SetOut(new StreamWriter(Console.OpenStandardOutput())); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T09:51:15.320

或者您可以将它包装在一个辅助方法中，该方法将一些代码作为参数运行它并返回打印的字符串。注意我们如何优雅地处理异常。

```
public string RunCodeReturnConsoleOut(Action code) 
{
  string result;
  var originalConsoleOut = Console.Out;
  try 
  {
    using (var writer = new StringWriter()) 
    {
      Console.SetOut(writer);
      code();
      writer.Flush();
      result = writer.GetStringBuilder().ToString();
    }
    return result;
  }
  finally 
  {
    Console.SetOut(originalConsoleOut); 
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T10:43:20.750

使用[@Adam Lear](https://stackoverflow.com/questions/11911660/redirect-console-writeline-from-windows-application-to-a-string/11911722#11911722)和[@Carlo V. Dango](https://stackoverflow.com/questions/11911660/redirect-console-writeline-from-windows-application-to-a-string/12035524#12035524)提出的解决方案，我创建了一个辅助类：

```
public sealed class RedirectConsole : IDisposable
{
    private readonly Action<string> logFunction;
    private readonly TextWriter oldOut = Console.Out;
    private readonly StringWriter sw = new StringWriter();

    public RedirectConsole(Action<string> logFunction)
    {
        this.logFunction = logFunction;
        Console.SetOut(sw);
    }

    public void Dispose()
    {
        Console.SetOut(oldOut);
        sw.Flush();
        logFunction(sw.ToString());
        sw.Dispose();
    }
} 
```

可以通过以下方式使用：

```
public static void MyWrite(string str)
{
    // print console output to Log/Socket/File
}

public static void Main()
{
    using(var r = new RedirectConsole(MyWrite)) {
        Console.WriteLine("Message 1");
        Console.WriteLine("Message 2");
    }
    // After the using section is finished,
    // MyWrite will be called once with a string containing all messages,
    // which has been written during the using section,
    // separated by new line characters
} 
```

# c++ - C++ 静态成员初始化与编译器链接相混淆。怎么解决？

> ID：11911662
> 
> 赞同：4
> 
> 时间：2012-08-11T03:30:24.530
> 
> 标签：c++, segmentation-fault, static-libraries, static-variables, static-initialization

我在 c++ 类的这些静态成员初始化方面遇到了麻烦。有关更多信息，请参阅我的代码。

# 来源

头文件.h

```
#ifndef HEADER_H
#define HEADER_H
#include <string>
using namespace std;
class Staff{ public: static string str;};
class Boss{ public: static string str;};
#endif 
```

员工.cpp

```
#include "header.h"
string Staff::str = "(staff)"; 
```

老板.cpp

```
#include "header.h"
string Boss::str = "I call " + Staff::str; 
```

主文件

```
#include <iostream>
#include "header.h"
int main(){cout << Boss::str << endl;} 
```

# 这里有许多不同结果的编译代码：

预编译：

```
g++ -c boss.cpp
g++ -c staff.cpp
ar rcs lib.a boss.o staff.o
ar rcs rlib.a staff.o boss.o 
```

编译、运行和结果：

```
g++ main.cpp staff.cpp boss.cpp ; ./a.out
==> I call (staff)
g++ main.cpp boss.cpp staff.cpp ; ./a.out
==> segmentation fault (core dumped)
g++ main.cpp lib.a ; ./a.out
==> segmentation fault (core dumped)
g++ main.cpp rlib.a ; ./a.out
==>segmentation fault (core dumped) 
```

我想在编译时使用库存档而不是与巨型对象顺序混淆。帮我解决它们。

# 谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T03:36:53.513

单独翻译单元中静态变量的初始化顺序未定义。您的两个源文件构成两个独立的翻译单元，每个翻译单元定义一个变量。分段错误可能发生在尝试使用尚未`Staff::str`初始化`Boss::str`时进行初始化时。`Staff::str`

要解决它，请将它们都定义在同一个翻译单元中：

```
#include "header.h"
string Staff::str = "(staff)";
string Boss::str = "I call " + Staff::str; 
```

或者使它们的初始化相互独立：

```
std::string Staff::get_str() {
  return "(staff)";
}

string Staff::str = Staff::get_str(); 

string Boss::str = "I call " + Staff::get_str(); 
```

从您的前两个示例中，初始化顺序*似乎*与链接顺序有关，但您不能依赖它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T03:45:03.663

单独翻译单元中全局变量的初始化顺序未定义。您可以将它们包装在一个函数中以使其工作：

```
class Staff{ public: static & string str();};
class Boss{ public: static & string str();};

string & Staff::str()
{
  static string s = "(staff)";
  return s;
}

string & Boss::str()
{
  static string s = "I call " + Staff::str();
  return s;
} 
```

# ruby-on-rails - 将源路径添加到生成器（thor、rails）

> ID：11911665
> 
> 赞同：3
> 
> 时间：2012-08-11T03:31:09.147
> 
> 标签：ruby-on-rails, thor

尝试制作我自己的应用程序生成器（即`rails new appName -m path/to/generator`）并在rails 旁边使用我的自定义生成器。

一切顺利，除非我想添加一个 source_path。有几篇关于这如何与现有应用程序的生成器一起工作的帖子 - 看到[这里](https://stackoverflow.com/questions/9879891/how-to-change-source-for-a-custom-rails-generator-thor)我得到了同样的错误。

当我将以下行添加到脚本的顶部时：

source_root File.expand_path('../dependencies', **FILE** )

控制台返回： `apply': undefined method 'source_root' for # Rails::Generators:: App Generator : 0x007f8b0a2a3798> (NoMethodError)`

鉴于我在 Rails 项目中而不是纯 ruby​​ 项目，我应该如何重组我的生成器？

# html - Html，使搜索栏更宽

> ID：11911667
> 
> 赞同：0
> 
> 时间：2012-08-11T03:31:59.313
> 
> 标签：html

我正在尝试制作像谷歌这样的搜索栏，我已经完成了一切，我只是不确定如何使搜索栏更宽，这是我到目前为止的代码

```
<table width="700" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
  </tr>
  <tr>
    <td> </td>
  </tr>
  <tr>
    <td>
    <FORM name="doingasearch" id="doingasearch">  
  <p align="center"><INPUT name=searchbox type=text size=20></p>
  <p align="center"><INPUT type="button" value="Search" onclick="return 

googleSearch();">
  <INPUT type="button" value="I Feel Lucky" onclick="return googleSearch

();"></p>
</FORM>
    </td>
  </tr>
  <tr>
  <td>
  </td>
  </tr>
</table> 
```

如果你发现它有什么问题，请说出来

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:36:09.740

您可以在 HTML 中执行此操作：

```
<input name="searchbox" type="text" size="40" /> 
```

或者您可以使用 CSS 以正确的方式进行操作：

```
input {
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:35:57.347

使用搜索表单时，您应该避免使用表格。无论如何，你可以在这里做两件事。

`size="20"`从搜索框中删除`<input>`并更改输入`width`，`CSS`或者您可以增加`<input>` `size`.

**像这样：**

```
input {
    width: XXpx;
} 
```

# java - 将 REPL 添加到 Java 项目的技术

> ID：11911672
> 
> 赞同：7
> 
> 时间：2012-08-11T03:33:16.647
> 
> 标签：java, scala, groovy, clojure, read-eval-print-loop

人们发现哪些技术对使用 Clojure、Scala、JRuby、构建工具等有用，可以用 REPL 改造 Java 项目以快速进行实验？

我经常需要处理普通的旧 Java 项目（POJO 项目？）并且怀念 REPL。[其他](https://stackoverflow.com/questions/397488/is-there-something-like-pythons-interactive-repl-mode-but-for-java) [SO 问题](https://stackoverflow.com/questions/2636044/java-repl-shell)解决了该主题，但这些问题已有数年历史，并且回复已过时。

我将首先提供一些我用来解决这个问题的技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:33:16.647

如果项目使用 Maven，gmaven 插件和随附的插件`mvn groovy:shell`会很有帮助，尽管[正确](https://stackoverflow.com/questions/11827190/a-required-class-was-missing-while-executing-org-codehaus-gmavengmaven-plugin1)[配置](https://stackoverflow.com/questions/2199547/maven-compile-mixed-java-groovy-1-7-project-using-gmaven-plugin) 它可能具有挑战性。

对于那些不使用 Maven 的项目，一个常见的模式是在 lib 文件夹中包含依赖项并手动管理它们。对于这些，我使用了 groovy：

```
groovysh -cp `echo lib/*.jar | sed 's/ /:/g'` 
```

...或clojure：

```
java -cp /usr/local/Cellar/clojure/1.3.0/clojure-1.3.0.jar:`echo lib/*.jar | sed 's/ /:/g'` clojure.main 
```

也可以[使用 rlwrap 来增强](http://en.wikibooks.org/wiki/Clojure_Programming/Getting_Started#Enhancing_Clojure_REPL_with_rlwrap)默认的 Clojure 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:58:10.487

这个问题主要是关于构建系统以及说服现有构建系统合并 REPL 的潜在复杂性。我喜欢[sbt](http://www.scala-sbt.org)和[Leiningen](http://leiningen.org)的一件事是它们都提供开箱即用的 REPL 支持。不幸的是，将现有项目从 Ant/Maven/whatever 迁移到其中之一可能并不简单。

但是，如果您现有的项目已经发布到 Maven 或 Ivy 存储库（或者可以很容易地被说服这样做），那么您可以创建一个新的 sbt 或 Leiningen 项目，导入现有项目发布的人工制品，然后就完成了。 ..

# c# - Gridview分页问题

> ID：11911675
> 
> 赞同：0
> 
> 时间：2012-08-11T03:33:51.210
> 
> 标签：c#, asp.net, gridview

我有一个问题让我陷入困境，我无法找到任何解决方案，非常需要你的帮助：实际上我需要在员工表上进行某种搜索，就像我需要搜索所有女性或女性员工一样有博士等，我为此创建了一个函数，它使用 if 条件查询员工表，并且此搜索的结果出现在允许分页为 true 的 gridview 中，问题是每当我单击下一步转到 gridview 中的其他页面时做一个完整的回帖并再次绑定到gridview数据源，当我给gridview数据源提供下面的函数（DetailedSearch）时，当它进入该函数时，它会从第一个if条件开始读取，而不是进入那个特定的if条件，然后它抛出异常**你调用的对象是空的**

这是我的代码（它只是它的一部分而不是完整代码）：

```
 public DataTable DetailedSearch()
    {
        con.Open();
        SqlDataAdapter da=new SqlDataAdapter();

         if (FirstName != string.Empty)
         {
             if (FirstName != string.Empty && LastName != "--Letters--")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'"+"and lastname like '"+LastName.ToString()+"%'", con);
             }
             else if(FirstName!=string.Empty && Gender!="{Please Select}")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and gender='" + Gender.ToString() + "'", con);

             }
             else if(FirstName!=string.Empty && MaritalStatus!="{Please Select}")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and maritalstatus='" + MaritalStatus.ToString() + "'", con);
             }
             else if(FirstName!=string.Empty && Qualification!="{Please Select}")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and qualification='" + Qualification.ToString() + "'", con);
             }
             else if(FirstName!=string.Empty && GraduationDate!=DateTime.MinValue)
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and graduationdate='" + GraduationDate.ToString() + "'", con);
             }
             else if(FirstName!=string.Empty && Province!="{Please Select}")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and province='" + Province.ToString() + "'", con);
             }
             else if(FirstName!=string.Empty && LastEmployer!=string.Empty)
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and lastemployer='" + LastEmployer.ToString() + "'", con);
             }
            else if(FirstName!=string.Empty && EnteredBy!="{Please Select}")
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and enteredby='" + EnteredBy.ToString() + "'", con);
             }
             else if (FirstName != string.Empty && DateEntered != DateTime.MinValue)
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'" + "and dateentered='" + DateEntered.ToString() + "'", con);
             }
             else
             {
                 da = new SqlDataAdapter("select * from employee where firstname ='" + FirstName.ToString() + "'", con);
             }
         }
         else if (LastName != "--Letters--")
         {
                if (LastName != "--Letters--" && Province != "{Please Select}")
                 {
                     da = new SqlDataAdapter("select * from employee where lastname like'" + LastName.ToString() + "%'" + "and province='" + Province.ToString() + "'", con);
                 }
                else if (Gender != "{Please Select}" && LastName != "--Letters--")
                {
                    da = new SqlDataAdapter("select * from employee where gender='" + Gender.ToString() + "'" + "and lastname like '" + LastName.ToString() + "%'", con);
                }
        DataTable dt = new DataTable();
        da.Fill(dt);
        con.Close();
        return dt;

    } 
```

请帮我弄清楚该怎么做，因为我完全空白并且没有逻辑出现在我的脑海中，我必须放置 if 子句，因为根据搜索，查询可能不一样，但是如何让 gridview 分页意识到这一点:(

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:49:56.300

确实，该代码中有很多可以改进的地方...

1.  你在`FirstName != string.Empty`重复做，但你已经在第一个 if 中测试过了。
2.  你应该换成单曲`if(!String.IsNullOrEmpty(FirstName))`
3.  您应该使用[sql 参数](http://forums.asp.net/t/1349182.aspx/1)而不是字符串连接，因为这样可以避免潜在的 sql 注入
4.  您不应该传递字段的默认用户界面，例如“请选择”。如果选择默认值，则传递 null 或空值

虽然这没有具体回答或提问，但它是一个很好的指导 - 事实上，如果您尝试应用这些更改，它甚至可以解决您在此过程中遇到的问题

# javascript - 在窗口调整大小时调整相对于中心的滚动位置？

> ID：11911677
> 
> 赞同：1
> 
> 时间：2012-08-11T03:34:24.893
> 
> 标签：javascript, css, layout, scroll

所以基本上我有 3 个内联块 div，它们是这样水平堆叠的：

div1——div2——div3

div1 和 div3 是摩天大楼广告，而 div2 是我的主要内容包装器。我最初遇到的问题是，每当我调整窗口大小以使其宽度小于 div 的宽度组合时，div2 和 div3 将换行到 div1 下方的下一行，因为它们不适合同一行（查看时出现同样的问题来自智能手机或平板电脑的网站，因为它们的宽度很小），而 div1（一个广告）会笨拙地放在主页中央。我通过添加`white-space: nowrap`到 body 标签以防止 div 包装并添加`white-space: normal`content-wrapper div 以防止它从 body 元素继承，以便内容文本可以正常换行。这解决了问题，现在当我访问该网站时，无论浏览器宽度如何，三个 div 始终位于同一行，并且如果需要，还有一个水平滚动条。

但是，滚动条总是从左侧开始，所以我的内容包装器（div2）是我应该居中的主要内容。相反，div1（广告）首先出现在左侧，然后是内容包装器。我该如何纠正这种情况？我知道如果我要摆脱正文上的自动换行，div 将按照我想要的方式居中，但这会带回最初不应该换行的 div 换行问题。无论如何我可以使用CSS解决这两个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:23:31.340

我曾经做过类似的事情，我需要一列偏移到主要内容区域的右侧。将列放在右侧很容易，但真正的技巧是防止它影响页面的溢出/滚动。

解决方案是将以下两个属性添加到包含我的主要内容和列的容器中：

```
#wrap { 
    min-width: 960px; 
    overflow-x: hidden; 
} 
```

我已经对此进行了调整，以展示如何在 3 列布局中使用它，两边各有两座摩天大楼：[DEMO](http://jsfiddle.net/9UV2G/)

# windows - Windows Temp 文件夹默认 NTFS 安全性

> ID：11911679
> 
> 赞同：6
> 
> 时间：2012-08-11T03:34:29.520
> 
> 标签：windows, security, ntfs

Windows 7 中 C:\Windows\Temp 文件夹的默认 NTFS 安全设置是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T21:29:04.313

[SetACL](http://helgeklein.com/setacl/)能够列出 C:\Windows\Temp 的权限，而无需先更改它们。我在新安装的系统上使用命令检索了默认权限，`setacl -on c:\Windows\Temp -ot file -actn list`并在我的系统上进行了验证：

```
DACL(protected+auto_inherited):
Users           FILE_ADD_FILE+FILE_ADD_SUBDIRECTORY+FILE_TRAVERSE   allow   container_inherit
Administrators  full   allow   no_inheritance
Administrators  full   allow   container_inherit+object_inherit+inherit_only
SYSTEM          full   allow   no_inheritance
SYSTEM          full   allow   container_inherit+object_inherit+inherit_only
CREATOR-OWNER   full   allow   container_inherit+object_inherit+inherit_only 
```

如果您更喜欢 GUI 应用程序，[SetACL Studio](http://helgeklein.com/setacl-studio/)可以列出系统每个部分的权限，而无需像 Explorer 一样先更改它们。这是 C:\Windows\Temp 在 SetACL Studio 中的样子：

![SetACL Studio - C:\Windows\Temp 上的权限](../Images/20eeafba4e0dd5ed614c82fb9b6a9b77.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:10:41.220

以下[URL](http://support.microsoft.com/kb/244600)显示了 Windows 2000 中的默认 NTFS 权限。看起来 google 尚未找到 Windows 7 的更新。不过，对于许多标准目录（如 %Systemroot%\Temp）来说，查看 NTFS 安全设置是一个很好的起点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-11T07:11:39.053

真的有关系吗？无论如何，您不应该在代码中硬编码路径。如果那不是我保存临时文件夹的位置，或者那不是我的 Windows 目录的名称，或者我没有在驱动器 C 上安装 Windows，该怎么办？您的应用程序仍然有效吗？哦哦。

相反，调用[`GetTempPath`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992.aspx)，它将返回为在当前环境中存储临时文件而设计的目录的路径。您可以假设您将在返回的目录中拥有所有必要的读/写权限。

如果从您之前的一些问题中可以判断，您正在为 .NET Framework 编写代码，那么这一切都很好地包含在[`System.IO.Path.GetTempPath`function](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)中。

# java - RooJavaBean 方法 getId() 不覆盖抽象方法 Persistable.getId()

> ID：11911683
> 
> 赞同：3
> 
> 时间：2012-08-11T03:35:48.193
> 
> 标签：java, spring-mvc, spring-roo

我开始了 spring mvc 项目并尝试在那里使用 JPA。我有类 User 和 BasePersistable 以及由@RooJavaBean 生成的访问器。

```
import javax.persistence.GeneratedValue;
import javax.persistence.MappedSuperclass;
import javax.persistence.Version;

import org.springframework.data.annotation.Id;
import org.springframework.data.domain.Persistable;
import org.springframework.roo.addon.javabean.RooJavaBean;

@RooJavaBean
@MappedSuperclass
public abstract class BasePersistable implements Persistable<Long> {

    private static final long serialVersionUID = -3281161320810540373L;

    @Id
    @GeneratedValue
    private Long id;

    @Version
    private Integer version;

    @Override
    public boolean isNew() {
        return getId() == null;
    }

} 
```

和

```
@Entity
@RooJavaBean
public class User extends BasePersistable {

    private static final long serialVersionUID = -1999311284585286126L;

    private String username;
    private String passwrd;
    private String firstname;
    private String lastname;
    private String email;

    @Temporal(TemporalType.TIMESTAMP)
    private Calendar signupDate;

    private Sex sex;
    private String comment;

} 
```

Roo 肯定会生成 getter 和 setter。我可以在代码中访问 getId() 方法：

```
User user = new User();
user.getId(); 
```

但我得到了这个错误：

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.test:mvc1:war:1.0.0-BUILD-SNAPSHOT
[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:aspectj-maven-plugin @ line 284, column 21
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building mvc1 1.0.0-BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ mvc1 ---
[INFO] Deleting /home/zzz/ws_java/mvc1/target
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ mvc1 ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ mvc1 ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 6 source files to /home/zzz/ws_java/mvc1/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/zzz/ws_java/mvc1/src/main/java/com/test/mvc1/domain/User.java:[13,7] error: User is not abstract and does not override abstract method getId() in Persistable
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.831s
[INFO] Finished at: Sat Aug 11 09:56:58 NOVT 2012
[INFO] Final Memory: 16M/86M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project mvc1: Compilation failure
[ERROR] /home/zzz/ws_java/mvc1/src/main/java/com/test/mvc1/domain/User.java:[13,7] error: User is not abstract and does not override abstract method getId() in Persistable
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我认为 AspectJ 似乎存在一些问题。任何人都可以帮忙吗？

**UPD**

这是 BasePersistable_Roo_JavaBean.aj

```
// WARNING: DO NOT EDIT THIS FILE. THIS FILE IS MANAGED BY SPRING ROO.
// You may push code into the target .java compilation unit if you wish to edit any member(s).

package com.test.mvc1.domain;

import com.test.mvc1.domain.BasePersistable;

privileged aspect BasePersistable_Roo_JavaBean {

    public Long BasePersistable.getId() {
        return this.id;
    }

    public void BasePersistable.setId(Long id) {
        this.id = id;
    }

    public Integer BasePersistable.getVersion() {
        return this.version;
    }

    public void BasePersistable.setVersion(Integer version) {
        this.version = version;
    }

} 
```

顺便说一句，如果将存根方法 getId() 添加到 User 类：

```
public Long getId() {
        return 1L; 
} 
```

**UPD 2** 我什至无法想象这个项目有什么问题。我在 pom 文件中添加了新的依赖项，maven 不下载它。这是我的pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.test</groupId>
    <artifactId>mvc1</artifactId>
    <name>mvc1</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.7</java-version>
        <spring.version>3.1.0.RELEASE</spring.version>
        <aspectj.version>1.6.12</aspectj.version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <roo.version>1.2.1.RELEASE</roo.version>
        <data-jpa.version>1.1.0.M1</data-jpa.version>
        <tiles.version>2.2.2</tiles.version>
        <hibernate-jpa-api.version>1.0.1.Final</hibernate-jpa-api.version>
        <hibernate-entity-manager.version>4.1.0.Final</hibernate-entity-manager.version>
        <aspectj-plugin.version>1.2</aspectj-plugin.version>
        <eclipse-plugin.version>2.7</eclipse-plugin.version>
        <compiler-plugin.version>2.3.2</compiler-plugin.version>
        <!-- database properties start -->
        <database.url>jdbc:mysql://localhost:3306/mvctest</database.url>
        <database.username>root</database.username>
        <database.password />
        <database.driverClassName>com.mysql.jdbc.Driver</database.driverClassName>
        <database.type>MYSQL</database.type>
        <!-- database properties end -->
    </properties>

    <repositories>
        <repository>
            <id>spring-maven-release</id>
            <name>Spring Maven Release Repository</name>
            <url>http://maven.springframework.org/release</url>
        </repository>
        <repository>
            <id>spring-maven-milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
        </repository>
        <repository>
            <id>spring-roo-repository</id>
            <name>Spring Roo Repository</name>
            <url>http://spring-roo-repository.springsource.org/release</url>
        </repository>
    </repositories>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-orm</artifactId>
                <version>${spring.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>${data-jpa.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
        </dependency>

        <!-- Hibernate/Jpa -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate-entity-manager.version}</version>
        </dependency>

        <!-- Database -->
        <dependency>
            <groupId>org.liquibase</groupId>
            <artifactId>liquibase-core</artifactId>
            <version>2.0.2</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
        </dependency>

        <!-- Roo -->
        <dependency>
            <groupId>org.springframework.roo</groupId>
            <artifactId>org.springframework.roo.annotations</artifactId>
            <version>${roo.version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${aspectj.version}</version>
        </dependency>   
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>${aspectj.version}</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>${aspectj.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>${tiles.version}</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <resources>
          <resource>
            <filtering>true</filtering>
            <directory>src/main/resources</directory>
            <includes>
              <include>**/*.properties</include>
            </includes>
          </resource>
          <resource>
            <directory>src/main/resources</directory>
            <excludes>
              <exclude>**/*.properties</exclude>
            </excludes>
          </resource>
        </resources>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <!-- version is used because of Roo 1.2.1.RELEASE requirement -->
                <!-- remove it when fixed -->
                <version>${eclipse-plugin.version}</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>false</downloadJavadocs>
                    <wtpversion>2.0</wtpversion>
                    <additionalBuildcommands>
                        <buildCommand>
                            <name>org.eclipse.ajdt.core.ajbuilder</name>
                            <arguments>
                                <aspectPath>org.springframework.aspects</aspectPath>
                            </arguments>
                        </buildCommand>
                        <buildCommand>
                            <name>org.springframework.ide.eclipse.core.springbuilder</name>
                        </buildCommand>
                    </additionalBuildcommands>
                    <additionalProjectnatures>
                        <projectnature>org.eclipse.ajdt.ui.ajnature</projectnature>
                        <projectnature>com.springsource.sts.roo.core.nature</projectnature>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                </configuration>
            </plugin>
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-compiler-plugin</artifactId>
              <version>${compiler-plugin.version}</version>
              <configuration>
                <source>${java.version}</source>
                <target>${java.version}</target>
              </configuration>
            </plugin>
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>aspectj-maven-plugin</artifactId>
              <version>${aspectj-plugin.version}</version>
              <dependencies>
                <dependency>
                  <groupId>org.aspectj</groupId>
                  <artifactId>aspectjrt</artifactId>
                  <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                  <groupId>org.aspectj</groupId>
                  <artifactId>aspectjtools</artifactId>
                  <version>${aspectj.version}</version>
                </dependency>
              </dependencies>
              <executions>
                <execution>
                  <goals>
                    <goal>compile</goal>
                    <goal>test-compile</goal>
                  </goals>
                </execution>
              </executions>
              <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                  <aspectLibrary>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-aspects</artifactId>
                  </aspectLibrary>
                </aspectLibraries>
                <source>1.6</source>
                <target>1.6</target>
              </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>8.1.4.v20120524</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <junitArtifactName>org.junit:com.springsource.org.junit</junitArtifactName>
                    <excludes>
                        <exclude>**/*_Roo_*</exclude>
                    </excludes>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是我的 servlet 上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
            http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

     <!-- ========================= GENERAL DEFINITIONS ========================= -->

    <mvc:annotation-driven />
    <mvc:resources location="/resources/" mapping="/resources/**"/>

    <context:property-placeholder location="classpath*:META-INF/spring/*.properties" />
    <context:component-scan base-package="com.test.mvc1.web">
        <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

    <jpa:repositories base-package="com.test.mvc1.repository" />

    <!-- ========================= VIEW DEFINITIONS ========================= -->

    <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </bean>

    <!-- ========================= TILES DEFINITIONS ========================= -->

    <bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/defs/tiles.xml</value>
            </list>
        </property>
    </bean>

    <!-- ========================= Persistence configuration ========================= -->

    <jpa:repositories base-package="com.test.mvc1.repository" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />

        <property name="testWhileIdle" value="true" />
        <property name="timeBetweenEvictionRunsMillis" value="60000" />
        <property name="validationQuery" value="SELECT NOW()" />
    </bean>

    <bean id="entityManagerFactory" depends-on="liquibase" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.test.mvc1.domain, ${database.packagesToScan}" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.ejb.naming_strategy">${database.namingStrategy}</prop>
                <prop key="hibernate.format_sql">true</prop>
                <prop key="hibernate.show_sql">${database.showsql}</prop>
                <prop key="hibernate.hbm2ddl.auto">${database.hbm2ddl}</prop>
                <prop key="hibernate.connection.charSet">UTF-8</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            </props>
        </property>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="${database.type}" />
                <property name="showSql" value="${database.showsql}" />
                <property name="generateDdl" value="false" />
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" />

    <bean id="liquibase" class="liquibase.integration.spring.SpringLiquibase">
        <property name="changeLog" value="classpath:META-INF/db/changelog.xml" />
        <property name="dataSource" ref="dataSource" />
    </bean>

</beans> 
```

这是错误：

```
2012-08-12 10:42:24.250:WARN:/:unavailable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
Caused by: 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
Caused by: 
javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
Caused by: 
org.hibernate.AnnotationException: No identifier specified for entity: com.test.mvc1.domain.User
    at org.hibernate.cfg.InheritanceState.determineDefaultAccessType(InheritanceState.java:276)
2012-08-12 10:42:24.525:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080
[INFO] Started Jetty Server 
```

我需要帮助！我想问题是某些依赖项或插件中的版本冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:41:29.990

编辑：将答案更新为预先修改的问题...

```
org.hibernate.AnnotationException: No identifier specified for entity: com.malykhinvi.mvc1.domain.User 
```

所以这里的错误表明您的实体`com.malykhinvi.mvc1.domain.User`没有`@Id`描述主键的注释。

你可以尝试放置`BasePersistable`

```
 @Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) 
```

# javascript - Google Maps JS API v3 无法正常运行（可以右键单击，不能拖动/缩放，顶部有徽标...）

> ID：11911695
> 
> 赞同：0
> 
> 时间：2012-08-11T03:37:54.330
> 
> 标签：javascript, google-maps, google-maps-api-3

谢谢阅读。我一直在使用 Maps v3 API 的 JS 版本，我可以获得地理编码/方向/地图标记和所有这些，但由于某种原因，在我想要在我客户网站的侧边栏中的这张特定地图上，地图似乎没有正确加载。

我已将 JS 还原为[API 文档上的简单示例代码](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)，即使这样，它仍然无法正常工作。（对于我的[屏幕截图](http://alfatrion.com/images/misc/stackoverflow/googlemapv3_notfunctioning.png)，我为 mapOptions 添加了“disableDefaultUI：true”）

*   我不能鼠标滚轮滚动缩放。
*   我不能用鼠标点击和拖动。
*   徽标和精美印刷品显示在顶部（通常在底部）
*   我可以右键单击并查看上下文菜单（不正常）。

我只是不知道为什么地图在这个特定页面上不起作用。map_canvas 尺寸是否太小？（231 像素 x 231 像素）。

你以前见过或听说过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:14:30.920

检查您是否打开了控制台，因为它可能会破坏地图。

测试时，关闭控制台以查看结果并重新打开它，刷新以查看日志。
这很糟糕，但总比无缘无故地拔头发要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:54:47.357

试试这个代码可能会有所帮助..

```
 <script language="javascript" type="text/javascript">
      var geocoder;
      var map;   

 $(document).ready(function() {
     initialize();
  }

      function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(40.77627, -73.910965);
        var myOptions = {
          zoom: 8,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
      }

</script> 
```

html

```
<div id="map_canvas">

</div> 
```

# android - 无法让 Android 的 SDK 控制器工作

> ID：11911696
> 
> 赞同：4
> 
> 时间：2012-08-11T03:38:02.533
> 
> 标签：android, sdk, controller, emulation

嗨，我一直在尝试使用 Android 开发工具附带的 Android 应用程序调用 SDKcontroller。这个应用程序应该让我测试我的应用程序的多点触控功能。这个应用程序假设将输入信息从真正的 android 设备发送到模拟器。它应该让我通过使用我的安卓设备中的触摸传感器来控制模拟器。

我放弃了指令，应用程序告诉我它已连接到模拟器，但据我所知。我可以随心所欲地触摸和触摸，但模拟器没有响应。

有人能让这个工作吗？如果是这样，请告诉我。

这是演示该应用程序的 YouTube 视频的链接： [http ://www.youtube.com/watch?v=Erd2k6EKxCQ](http://www.youtube.com/watch?v=Erd2k6EKxCQ)

这是android项目网站： [http ://tools.android.com/tips/hardware-emulation](http://tools.android.com/tips/hardware-emulation)

# swing - JavaFx 2.0、Swing 和 Java 2D 在 Java 7 生态系统中的作用

> ID：11911699
> 
> 赞同：0
> 
> 时间：2012-08-11T03:38:37.743
> 
> 标签：swing, awt, javafx-2, java-2d, java-3d

我对新标准有点困惑。据我所知，Swing（以前的标准接口库）是基于它的前身、AWT 和 Java 2D 图形库的。

既然 JavaFx 2.0 已经取代了 Swing，我的问题是 Java 2D 适合什么地方？是否可以使用 Java 2D 方法在 JavaFX 接口元素上生成图形？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:32:50.210

来自 Oracle 客户端技术主管[对 JavaFX 的 10000 英尺视图](http://fxexperience.com/2012/06/javafx-the-10000-foot-view/)。

> 人们曾多次撰写文章或博客文章或论坛帖子，提出以下问题：JavaFX 是什么？... 是 Swing 的替代品吗？（答案是肯定的）。

大多数情况下，JavaFX 不需要使用 Java2D，因为 JavaFX 具有强大的即时和保留模式 2D api。

如果确实需要，您可以使用 Java2D 方法渲染到支持 JavaFX WritableImage 或 awt 图像的缓冲区，稍后您可以将其转换为 JavaFX 图像。

在某种程度上，如果您愿意或需要，您仍然可以将 Swing 与 JavaFX 一起使用。例如，人们在基于 Swing 的 NetBeans 平台中嵌入了 JavaFX webview。

# c# - 从头开始创建面向方面的属性/方法

> ID：11911701
> 
> 赞同：3
> 
> 时间：2012-08-11T03:38:48.067
> 
> 标签：c#, .net, aop

我有一个（也是唯一一个）我想使用方面的方法。它是[IModule.Initialize](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.modularity.imodule.initialize%28v=pandp.40%29.aspx)。（该方法在我的解决方案中大约 15 个类中找到）

它看起来像这样：

```
[LogToSplashScreen]
public void Initialize()
{
   RegisterViews();
   RegisterDesignTimeVMs();
} 
```

我希望我的方面在方法主体执行之前运行它：

```
var moduleInfo = new ModuleInformation{ModuleName = "ClassNameHere"};
splashScreenService.ModuleLoadStart(moduleInformation); 
```

而这之后：

```
splashScreenService.ModuleLoadEnd(moduleInformation); 
```

* * *

*旁注：*
我看了这个并想，好吧，是时候试试 PostSharp。听说是冠军的AOP工具。所以我启动了 NuGet 包（期待获得免费版本）并安装它。

它装有 DemoWare（即额外的安装程序）。我个人不介意。但我不希望我的团队为了解决我的小问题而不得不与安装人员打交道。

除了演示之外，具有 UI 的事实（我猜）会使我的构建服务器变得困难。（我使用包还原。）

如果我要“全力以赴”进行面向方面的编程，这些都是我愿意处理的事情。
但我只需要一个...

* * *

**有没有办法“自己动手”而不会让人头疼？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:27:09.867

我不会这么快就注销 PostSharp。您可能希望将您的问题/问题发布到[SharpCrafters 论坛](http://support.sharpcrafters.com/discussions)。您的问题现在是一个小问题，但是如果您遇到 AOP 有用的其他问题，即使数量很少，PostSharp、Castle DynamicProxy 等工具可能是必要的。

至于“滚动你自己的”，你可以做的是使用装饰器模式。我不确定`moduleInformation`变量来自哪里，我假设您实际上是要键入`moduleInfo`.

然后，假设您的界面看起来像：

```
public interface IModule
{
    void Initialize();
} 
```

你有大约 15 个实现 IModule 的类。您想添加一些涉及 ModuleInformation 的功能，因此创建一个装饰器类。

```
public class ModuleDecorator : IModule
{
    IModule _subject;
    public ModuleDecorator(IModule subject)
    {
        _subject = subject;
    }

    public void Initialize()
    {
        var moduleInfo = new ModuleInformation{ModuleName = "ClassNameHere"};
        splashScreenService.ModuleLoadStart(moduleInfo);

        _subject.Initialize();

        splashScreenService.ModuleLoadEnd(moduleInfo);
    }
} 
```

现在，当您想实例化您的 ~15 个类中的一个时，只需通过装饰器运行它，例如：

```
IModule obj = new ModuleDecorator(new OneOfMy15Classes()); 
```

当然，使用 IoC 容器会更好（例如 StructureMap、Ninject，无论您使用什么）。

无论如何，装饰器模式的这种使用几乎就是 PostSharp 和其他 AOP 工具在幕后所做的。如果你真的只需要一个装饰器用于一个接口上的一种方法，我认为这是要走的路：现在还不需要引入 AOP 工具。但是，如果您开始创建本质上做相同事情但针对不同接口的装饰器，这可能很快就会失控，这就是我引入 AOP 工具的时候。

编辑：我刚刚注意到“ClassNameHere”，你可以通过反射得到它`_subject.GetType().Name`

# hadoop - HBase 内连接和协处理器

> ID：11911702
> 
> 赞同：0
> 
> 时间：2012-08-11T03:38:54.473
> 
> 标签：hadoop, hbase

我打算做一个在 HBase 中实现所有聚合操作的项目。但我不知道它的难度。我只有 6 个月的时间来完成那个项目。我应该继续前进吗？我打算用java来做。我知道已经有一些聚合函数。但是现在没有 INNER JOIN 之类的查询。我正计划实施这种类型的查询。我不知道这是一个错误或虚张声势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:42:42.740

我认为在技术上我们应该区分两种类型的连接：
a）一张小表+一张大表。小表是指可以缓存在每个节点的内存中而不会严重影响集群操作的表。在这种情况下，通过将小表放入哈希图中，迭代大表数据的节点本地部分并以此方式产生连接结果，应该可以使用协处理器进行连接。在 Hive 的术语中，它被称为“地图”加入[http://www.facebook.com/note.php?note_id=470667928919](http://www.facebook.com/note.php?note_id=470667928919)。
b) 两张大桌子。我认为在短时间内获得生产质量是不可行的。我可能会说，这种功能是 MPP 数据库的领域，也是其 IP 的重要组成部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:53:00.057

在 HBase 中，这绝对比在 RDBMS 或其他 Hadoop 技术（如 PIG 或 Hive）中更难。

# castle-windsor - NServiceBus Visual Studio 解决方案架构

> ID：11911709
> 
> 赞同：0
> 
> 时间：2012-08-11T03:41:19.330
> 
> 标签：castle-windsor, nservicebus, esb

刚从 NServiceBus 开始，我试图了解总线如何适合我的 VS 解决方案。

让我们假设一个现有的应用程序，它有一个 ASP.Net 前端和一个 BLL。我将 Windsor 用于 DI，而我的 BLL 对容器一无所知。我将容器连接到一个名为“MyNamespace.IOC”的单独项目中，并且只有这个项目和我的 Web 项目了解 Windsor。

我需要访问我的 BLL 中的总线（因为那是我将发送/发布/处理消息的地方）。我需要使用 Windsor 配置 NSB，并且（我认为）在应用启动时将我的容器实例传递给 Configure.With().CastleWindorBuilder() 方法。

让所有三个项目都引用 NSB DLL 似乎很奇怪。通常如何将这一切连接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:59:13.510

您可以在某些接口后面抽象总线并仅在 IoC 和 Web 项目中提供实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:32:40.910

如果您不想在 BLL / 域层中引用 NSB，则可以查看“域事件”。域事件处理程序可以位于它们自己的实现层中，使您的域对事件的处理一无所知，因此不需要了解服务总线。从那里您可以发布您的 esb 消息。看起来可能没有太大区别，但域事件处理层与域更加隔离。

顺便说一句：由于您是从服务总线开始的，因此您还可以在[http://shuttle.codeplex.com/](http://shuttle.codeplex.com/)上查看我的 FOSS 项目——任何反馈都将不胜感激 :)

# sql - sql varchar 设置字符串 null

> ID：11911713
> 
> 赞同：0
> 
> 时间：2012-08-11T03:41:43.653
> 
> 标签：sql, sql-server-2008

我正在使用类似的列`strString varchar (1500)`

并且想要将 strString 的一部分设置为 0x00，我正在执行以下操作，但它并没有完全将一部分设置为 0x00 ...

```
DECLARE @set_part_null varchar(13)
SET @set_part_null = CAST(0 as varbinary(4)) + CAST(0 as varbinary(4)) + CAST(0 as varbinary(4))+ CAST(0 as varbinary(1))

UPDATE location_works SET strString  = SUBSTRING(strString,1,@pos) + @set_part_null + SUBSTRING(strString,@pos+13+1,1500) WHERE nfieldid = @fieldno 
```

如您所见，我试图在 strString 中将 13 个字节设置为 0x00，但它并不总是这样做，这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:45:57.583

您应该能够使用：

```
Replicate( Char( 0 ), 13 ) 
```

# php - 如何使用 PHP（不进行身份验证）显示我的网站访问者的 Facebook 个人资料图片和姓名？

> ID：11911715
> 
> 赞同：-1
> 
> 时间：2012-08-11T03:42:03.577
> 
> 标签：php, facebook, facebook-graph-api

我只想在评论区附近显示我的博客访问者的用户名和头像。我想不通过 FB 进行任何身份验证，有没有办法做到这一点？我完全错了吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:55:07.343

如果没有用户身份验证，就无法做到这一点。从 FB 获取名称和个人资料图片需要身份验证。用户必须允许您通过 FB SDK 访问他们的信息。

您可以在此处阅读更多相关信息：[https ://developers.facebook.com/docs/sdks/](https://developers.facebook.com/docs/sdks/)

# python - 在 python 中设计一个可重用的解析器

> ID：11911716
> 
> 赞同：1
> 
> 时间：2012-08-11T03:42:22.250
> 
> 标签：python

我正在编写一个文件解析器，我希望能够确定它将为我返回的女巫“数据字段”。

我开始学习 python 并且仍然习惯于像 Java 程序员一样思考，所以这个问题更多的是关于如何设计我的模块，而不是关于如何具体解析文件。

根据上下文，文件的每一行都有固定数量的字符，并且每个信息都包含在特定索引之间。例如。：

```
XX20120101NAME1CITYA
XY20120101NAME2CITYB 
```

在这个虚构的例子中，从索引 0 到 2 你有一个信息，从 2 到 10 有另一个信息，依此类推......

使用 Java，我通常会创建一个表示不同信息片段的枚举器，每个“存储”*起始索引*和*结束索引*。在我的解析类中，我会设计一个可用的方法来接受*n 个*不同的枚举。例如。：

```
enum FileInformation {
    INFO01(0,2), INFO02(2,10), INFO03(10,15), INFO04(15,20);
    int startIndex;
    int endIndex;

    public FileInformation(int si, int ei)  {
        this.startIndex = si;
        this.endIndex = ei;
    }

    public int getStartIndex() { return si; }
    public int getEndIndex() { return ei; }
}

public Whatever parse(FileInformation... infos) {
    // Here I would iterate through infos[], 
    // using its start and end index to retrieve only what I need.
} 
```

我知道我可能不应该在*python*中使用同一行虽然，特别是因为语言不允许它（python 中没有枚举）并且因为我认为*python*可以不那么冗长，但我不知道一个好的设计实践来达到同样的结果。

值得一提的是，我不想让模块的用户暴露于不必要的复杂性，或者强迫他知道每个信息的索引。模块的用户最好能够确定他想要的女巫信息及其顺序。

那么，您对以优雅的方式解决此要求有任何见解吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:49:26.810

Python 已经有一个内置类型，它可以执行 FileInformation 所做的事情 - 签出[slice](http://docs.python.org/library/functions.html?highlight=slice#slice)。

这是您的模块的外观：

```
# module dataparser.py

INFO01, INFO02, INFO03, INFO04 = map(slice, ((0,2),(2,10),(10,15),(15,20)))

def parse(infos, data):
    return [data[info] for info in infos] 
```

以及调用模块如何使用它：

```
# module dataparser_user.py

import dataparser as dp

data = """\
XX20120101NAME1CITYA
XY20120101NAME2CITYB""".splitlines()

for d in data:
    print d, dp.parse((dp.INFO01, dp.INFO03), d)

# or use partial to define a function object that takes your 
# subset number of slices
from functools import partial
specific_parse = partial(dp.parse, (dp.INFO01, dp.INFO03))

for d in data:
    print d, specific_parse(d) 
```

如果您要在 Python 中实现自己的`enum`模拟，我认为`namedtuple`这将是最接近的（因为您的 Java`enum`有 getter 但没有 setter - `namedtuple`s 同样是不可变的）：

```
from collections import namedtuple
FileInformation = namedtuple("FileInformation", "start end")
INFO01, INFO02, INFO03, INFO04 = map(FileInformation, ((0,2),(2,10),(10,15),(15,20))) 
```

# macos - 如何重置联系人访问权限，以便 OS X 再次询问？

> ID：11911719
> 
> 赞同：16
> 
> 时间：2012-08-11T03:43:03.113
> 
> 标签：macos, security, osx-lion, abaddressbook, osx-mountain-lion

我知道我可以在 中打开和关闭权限`System Preferences -> Security & Privacy -> Privacy -> Contacts`，但我想做的是强制 OS X 再次请求权限。这是出于测试目的...即我可能有一个在显示权限请求对话框时触发的错误。

存储“询问”标志的任何想法，所以我可以把它吹走？我已经检查过`~/Library/Application Support/AddressBook/`和其他一些明显的地方。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T12:48:12.143

只需要自己做这个......在命令行上做：

`tccutil reset AddressBook`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T00:49:45.147

解决方案是转到常规 - 重置 - 重置位置和隐私。

# backbone.js - 渲染视图中的主干子视图

> ID：11911726
> 
> 赞同：0
> 
> 时间：2012-08-11T03:45:13.957
> 
> 标签：backbone.js, subviews

我的问题是围绕使用 Backbone 子查看渲染视图的最佳方式。

虽然有很多关于这个主题的博客，但我还没有找到任何可以应用于这个用例的实用想法。

**背景故事**

在页面加载时，主干获取并呈现远程模型和远程页面模板。

页面模板由 3 个字段集组成，每个字段集包含大量只读数据和图像，并带有一个 [edit] 按钮。

```
+-----------------------+ +-----------------------+
| ID: ViewA             | | ID: ViewB             |
|                       | |                       |
|                       | |                       |
|                  EDIT | |                  EDIT |
+-----------------------+ +-----------------------+
+-----------------------+
| ID: ViewC             |
|                       |
|                       |
|                  EDIT |
+-----------------------+ 
```

当用户单击 [edit] 时，我希望创建一个子视图，获取部分（下划线模板），将现有模型应用于它，最后，它替换字段集的 innerHTML。

这将使字段集中以前只读的内容可由用户编辑和保存。一旦被用户保存（或取消），它应该推回服务器，并重新呈现只读视图。

为了论证起见，假设模板托管在 /templates/edit/<fieldsetid>.html

这是现有的代码：

**模型和集合**

```
// Model
window.Page = Backbone.Model.extend();

// Collection
window.PageCollection = Backbone.Collection.extend({
    model: Page, 
    url: '/page/view.json'
}); 
```

**风景**

```
window.PageView = Backbone.View.extend({

    initialize:function () {
        this.model.bind("reset", this.render, this);
    },

    events:{
        'click fieldset a[role=edit-fieldset]' : 'edit'
    },

    edit: function(e){
        e.preventDefault();
        // @TODO Do some subview awesomeness here?
    },

    render:function (eventName) {
        _.each(this.model.models, function (data) {
            $(this.el).append(this.template({data: data.attributes}));
        }, this);
        return this;
    }

}); 
```

**路由器**

```
var AppRouter = Backbone.Router.extend({
    routes:{
        "page/view":"pageView"
    },
    pageView:function (action) {
        this.page = new PageCollection();
        this.pageView = new PageView({model:this.page});
        this.page.fetch();
        $('#content').html(this.pageView.render().el);
    }
}); 
```

**模板加载器**

```
// Borrowed from:
// http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/
// Should probably move to RequireJS and AMDs

utils.loadTemplate(['PageView'], function() {
    var app = new AppRouter();
    Backbone.history.start();
}); 
```

那么考虑到这一点，你的想法是什么？我在正确的轨道上吗？我应该看看另一种模式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:02:22.030

我通常处理这些情况的方式如下（使用上面现有的'loadTemplate'、Page 和 PageCollection 架构）：

```
// Model
window.Page = Backbone.Model.extend();

// Collection
window.PageCollection = Backbone.Collection.extend({
    model: Page, 
    url: '/page/view.json'
});

window.PageView = Backbone.View.extend({

    template: templates.pageViewTemplate,

    render: function() {
        var html = this.map(function(model) {
            // Important! We don't need to store a reference to the FieldSetViews.
            // Simply render them and by passing in the model, we can update the view
            // as needed when the model changes.
            // 
            // This is also good to reduce the potential for memory-leaks.
            return new FieldSetView({
                model: model
            }).render();
        });

        // Do one DOM update.
        this.$el.html(html);

        return this.$el;
    }
});

window.FieldSetView = Backbone.View.extend({

    events: {
        "click .edit": "_onEdit"
    },

    template: templates.fieldSetTemplate,

    render: function() {
        // Replace the top-level div created by backbone with that of your 
        // template (i.e fieldset). This gets around having to use 
        // the tagName property which should really be in your template.
        this.setElement(this.template.render(this.model.toJSON()));

        return this.$el;
    },

    _onEdit: function(e) {
        // Handle edit mode here by passing the model to another view
        // or by enhancing this view to handle both edit and view states.
    }

}); 
```

# jquery-mobile - 从 pageinit 检查单选按钮不起作用

> ID：11911728
> 
> 赞同：1
> 
> 时间：2012-08-11T03:45:49.190
> 
> 标签：jquery-mobile, radio-button, page-init

以下代码不起作用，未选中单选按钮。知道为什么吗？

我也试过`attr('checked', 'checked')`了。

```
<html>
<head>      
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>      
    <script type="text/javascript">
    $(document).bind("pageinit", function () {           
        $('#radio-pet-2a').attr('checked', true);
    });         
    </script>
  </head>
 <body>

<div data-role="content">

    <ul data-role = "listview">

        <li>
        <fieldset data-role="controlgroup">
        <legend>Choose a pet:</legend>
             <input type="radio" name="radio-pet" id="radio-pet-1a" value="choice-1"   />
             <label for="radio-pet-1a">Cat</label>

             <input type="radio" name="radio-pet" id="radio-pet-2a" value="choice-2"  />
             <label for="radio-pet-2a">Dog</label>

             <input type="radio" name="radio-pet" id="radio-pet-3a" value="choice-3"  />
             <label for="radio-pet-3a">Hamster</label>

             <input type="radio" name="radio-pet" id="radio-pet-4a" value="choice-4"  />
             <label for="radio-pet-4a">Lizard</label>
    </fieldset>
        </li>

    </ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:22:15.877

尝试使用**prop**方法设置单选按钮的属性检查，然后刷新单选按钮。

```
$(document).bind("pageinit", function () {           
    $('#radio-pet-2a').prop("checked", true).checkboxradio("refresh");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:11:43.760

您需要`button('refresh')`在更改逻辑设置后使用更新渲染：

```
$(document).bind("pageinit", function () {           
    $('#radio-pet-2a').attr('checked', true).button('refresh');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:08:59.023

我已经想出了如何让它工作：

```
 $(document).bind("pageinit", function () {           
        $('#radio-pet-2a').attr('checked', true);
        $("input[type='radio']").checkboxradio("refresh"); 
    }); 
```

# java - Python 和 Java Socket Server 的区别——Java 对 iOS 应用程序的响应滞后，但都对 telnet 有响应

> ID：11911729
> 
> 赞同：0
> 
> 时间：2012-08-11T03:45:52.153
> 
> 标签：java, objective-c, cocoa-touch, sockets

这里有一个奇怪的问题 - 我有相同的 Python 和 Java 服务器，我正在尝试使用 iOS 应用程序访问它们。一切都适用于 Python 服务器。当通过 telnet 访问时，Python 服务器和 Java 服务器的行为相同。在我关闭 iOS 应用程序后，只有 Java 终端对通信做出反应！它似乎只在进程关闭后处理。然后一切都迟到了。

有编码差异还是什么？有延迟和一些功能似乎很奇怪。我已经尝试从这里实现建议的重新编码方法，但没有骰子。 [将数据从 iOS 发送到 Java 套接字服务器](https://stackoverflow.com/questions/9752580/sending-data-from-ios-to-java-socket-server)

有什么建议么？非常感谢。好难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:39:00.847

因此，结果证明只需要在 Obj-C 传输结束时有一个 \n 就可以让缓冲读取器的 readLine 方法工作。文件ftw。

# networking - 使用权限打开远程网络文件夹

> ID：11911732
> 
> 赞同：0
> 
> 时间：2012-08-11T03:46:18.753
> 
> 标签：networking, permissions, directory

我正在尝试打开远程文件夹的资源管理器窗口，需要提供用户名和密码？？？请帮忙，因为 net.exe 使用选项似乎不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:54:10.703

您需要一个 FTP 帐户。鉴于您提供的信息，我只能告诉您这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:57:40.477

net.exe 不做这种事情，net.exe 只是告诉你有关网络上计算机的信息

1-如果您只想远程访问 LAN 中的文件夹而不是远程访问整个计算机，您应该说出要访问的操作系统和用于访问此远程文件夹的操作系统，以便问题成为回答。

2- 如果您想要远程桌面访问，您应该使用 TeamViewer 或在 Windows 上使用远程桌面应用程序。

[http://windows.microsoft.com/en-nz/windows-vista/Connect-to-another-computer-using-Remote-Desktop-Connection](http://windows.microsoft.com/en-nz/windows-vista/Connect-to-another-computer-using-Remote-Desktop-Connection)

TeamViewer 之类的软件的优势在于无论您在 LAN 还是 Internet 上都可以随时使用它。

# string - JavaCC 中的非英语标记

> ID：11911748
> 
> 赞同：0
> 
> 时间：2012-08-11T03:51:29.070
> 
> 标签：string, unicode, utf-8, javacc

我已经尝试过这个链接：[Print in JavaCC](https://stackoverflow.com/questions/9500521/print-in-javacc)。但是由于某种未知的原因，该答案对我不起作用。我将文本复制并粘贴到文件中并运行它，但是当我输入时`µ`，例如，它没有打印任何内容。

我希望能够在我的字符串标记中使用非英语。仅出于测试目的，现在我有：

```
options 
{
    UNICODE_INPUT = true;
    JAVA_UNICODE_ESCAPE = false;
}

PARSER_BEGIN(Unicode)

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

public class Unicode
{
    public static void main(String[] args)
    {
        if(args.length == 0)
        {
            System.out.println("File name not specified!");
            return;
        }

        System.out.println("-----Start-----\n\n");
        try
        {
            FileInputStream fis = new FileInputStream(args[0]);
            InputStreamReader isr = new InputStreamReader(fis, "UTF8");

            Unicode parser = new Unicode(isr);
            parser.start();
        }
        catch(FileNotFoundException ex){
            System.out.println(ex);
        }
        catch(UnsupportedEncodingException ex){
            System.out.println(ex);
        }
        catch(ParseException ex){
            System.out.println(ex);
        }
        catch(TokenMgrError ex){
            System.out.println(ex);
        }
        System.out.println("\n\n------End-------");
    }
}

PARSER_END(Unicode)

TOKEN:{
    //         á          é          í          ó          ú
    <STR: ("\u00e1" | "\u00e9" | "\u00ed" | "\u00f3" | "\u00fa")>
}

void start():
{
    Token found;
}
{
    (
        found = <STR>
        {System.out.println("Input: " + found.image);}
    )+

    <EOF>
} 
```

当我运行解析器并为其提供一个包含 的文件`á, é, í, ó, ú`时，我得到的只是一堆问号。

```
Input: ?
Input: ?
Input: ?
Input: ?
Input: ? 
```

我读过一些关于必须修改自动生成的字符流文件的内容，但我不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:56:11.497

这是用于 Java PrintStream 的默认编码与影响标准输出的命令 shell 中的设置之间的编码问题。

由于明确指定了 InputStream 编码，并且输入显然可以解析，因此问题与 JavaCC 无关。因此，它也应该可以通过以下方式重现：

```
 System.out.println("\u00e1\u00e9\u00ed\u00f3\u00fa"); 
```

System.out PrintStream 使用的编码取自系统属性“file.encoding”，在我的 Windows 系统上默认为“Cp1252”（即 Windows-1252）。它可以通过设置“file.encoding”来强制使用不同的东西，例如

```
 java -dfile.encoding=UTF-8 Unicode 
```

标准的 PrintStream 也可以替换为使用不同编码的标准：

```
 System.setOut(new PrintStream(System.out, true, "UTF-8")); 
```

以上任何一种都将强制以指定的编码生成输出。但是，在控制台上显示结果时，重要的是要了解 shell 使用什么编码。我的windows默认是cp850，可以通过`chcp`命令修改编码。上面的 println 将使用 Java 中的“Windows-1252”和`chcp 1250`.

# objective-c - 在核心数据中搜索 NSDate 问题

> ID：11911750
> 
> 赞同：2
> 
> 时间：2012-08-11T03:51:51.253
> 
> 标签：objective-c, ios, core-data, nsdate, nspredicate

我有一个应用程序从时间戳为 UTC 的服务器中提取数据。我的应用程序必须根据当前本地时间在屏幕上显示内容。我遇到的问题如下

如果我这样做

```
// the Y M D is fine but time is -8 behind so showing 03:34 instead of 11:34.
NSDate *today = [[NSDate alloc] init]; 
```

所以当我这样做时

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(start <= %@) AND (room == %@) AND (end >= %@)", today, room, today]; 
```

我没有得到正确的结果，因为今天插入 NSPredicate 是“2012-08-10 03:34:00”，但应该是“2012-08-10 11:34:00”

我不能只将时间增加 8 小时，因为该应用程序可能会在不同的时区使用。我唯一的想法是让设备时区弄清楚它落后于 UTC 多少小时，然后使用 NSDateComponents 添加/减去这些小时。通过在 CoreData 中为 NSPredicate 获取设置一些内容有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:03:55.643

[[NSDate alloc] init] 返回当前 UTC 日期和时间。

如果您将日期存储到数据库或服务器，作为最佳实践，您应该存储 UTC 时间，并且只有在 UI 中显示时才始终转换为“本地”格式。

如果您需要在 UI 中显示它，您应该使用 NSDateFormatter 在本地时间正确显示它。您可以使用 NSTimeZone 对象来确定本地时区并将您的 NSDateFormatter 设置为适当的时区。

即使您创建由“本地配置” NSDateFormatter 格式化的 NSDate，基础日期/时间仍为 UTC。

如果您遵循这些原则，您的谓词中的日期就不会有任何问题

# dynamic - 使用 dart 动态加载 dart 脚本

> ID：11911754
> 
> 赞同：8
> 
> 时间：2012-08-11T03:53:08.523
> 
> 标签：dynamic, dart

我正在尝试使用 dart 动态加载 dart 脚本。我正在使用这样的东西：

*测试.html：*

```
...
<script src="http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
<script type="application/dart" src="test.dart"></script>
... 
```

*测试飞镖：*

```
#import('dart:html');
main() {
    var script = new ScriptElement();
    script.type = 'application/dart';
    script.src = 'helloworld.dart';
    document.body.elements.add(script);
} 
```

它不起作用。但是，如果我在 HTML 文件中内联相同的代码，它可以正常工作：

*测试.html：*

```
...
<script src="http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
<script type="application/dart">
#import('dart:html');
main() {
    var script = new ScriptElement();
    script.type = 'application/dart';
    script.src = 'helloworld.dart';
    document.body.elements.add(script);
}
</script>
... 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:32:46.410

你是在 Dartium（作为 Dart）还是在另一个浏览器（作为 JavaScript）中运行它？我将假设后者。如果您查看 (http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js)，它会查找诸如 foo.dart 之类的脚本标签并自动加载 foo.dart.js。它在 window.addEventListener("DOMContentLoaded", function (e) {...}) 回调中执行此操作。该回调发生在动态添加脚本标记的代码之前。

因此，您可以改为在代码中加载 helloworld.dart.js，这就是 (http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js) 无论如何都会做的。但是请注意，理想情况下，Dart 会尝试将每个脚本标签视为一个单独的隔离区——它不像 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:13:49.373

这是 Dart 中的一个错误。这是[错误报告](http://code.google.com/p/dart/issues/detail?id=4584)的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T08:35:25.617

另一种动态加载 dart 代码的方法：http: [//blog.sethladd.com/2013/04/dynamically-load-code-with-dart.html ?m=1](http://blog.sethladd.com/2013/04/dynamically-load-code-with-dart.html?m=1)

无需操作 DOM。使用 dart:isolates

# c++ - 错误：请求成员大小在 ... 这是非类类型 char

> ID：11911760
> 
> 赞同：3
> 
> 时间：2012-08-11T03:54:43.137
> 
> 标签：c++

我不是很擅长编程，也没有经验，这对于老师帮助微不足道的班级来说是微不足道的。

标题是我得到的错误。这是功能：

```
void CapFormat (string Names, int NameCount)
 {
   int Comma;
   int c;
   int d;

    string::size_type len;

   for(c = 0; c < NameCount; c ++)
   {
     len = static_cast<unsigned> (Names[c].size);  //error starts here
     for(d = len; d > 0; d --)
     {
       tolower((Names[c].at(d)));  //supposed to lower cases every letter
     }
     touppper(Names[c].at(0));  //supposed to upper case first letter
     Comma = Names[c].find(",");  //supposed to find a comma between last and first names
     Comma = Comma + 1;
     toupper(Names[c].at(Comma));  //Error here as well.  supposed to then upper case letter after the comma.
   }
 } 
```

这是错误的扩展版本：

```
In function âvoid CapFormat(std::string, int)â:
error: request for member âsizeâ in âNames.std::basic_string<_CharT, _Traits, _Alloc>::operator[] [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((long unsigned int)c))â, which is of non-class type âcharâ
error: request for member âatâ in âNames.std::basic_string<_CharT, _Traits, _Alloc>::operator[] [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((long unsigned int)c))â, which is of non-class type âcharâ
error: request for member âatâ in âNames.std::basic_string<_CharT, _Traits, _Alloc>::operator[] [with _CharT = char, _Traits = error: âtouppperâ was not declared in this scope
error: request for member âfindâ in âNames.std::basic_string<_CharT, _Traits, _Alloc>::operator[] [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((long unsigned int)c))â, which is of non-class type âcharâ
error: request for member âatâ in âNames.std::basic_string<_CharT, _Traits, _Alloc>::operator[] [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((long unsigned int)c))â, which is of non-class type âcharâ 
```

Cstring、cctype 和 string 都包括在内。我直接从我的书中复制了语法，一切都应该井井有条，但错误​​仍然存​​在。

协助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T04:02:54.507

首先，您`Names`在代码中使用参数的方式表明它应该是一个数组。但是您将其声明为单个对象。因此出现错误。

该参数显然应该被声明为

```
void CapFormat (string Names[], int NameCount) 
```

或者

```
void CapFormat (string *Names, int NameCount) 
```

（这是同一件事。）将此与您的书进行比较。要么是你的错误，要么是书中的错误。

其次，这`size`条线应该看起来像

```
len = static_cast<unsigned>(Names[c].size()); 
```

（注意额外的`()`）。而且绝对没有必要`static_cast`在`unsigned`那里。做就是了

```
len = Names[c].size(); 
```

这是`static_cast`你的主意吗？如果它在书中，那将是一本相当奇怪的书。

`int`不适当的变量和适当的变量的不合逻辑的混合`string::size_type`使我怀疑这实际上是从一本书中摘录的。

# android - 我可以在没有上下文的情况下使用 Assets 文件夹中的文件吗？

> ID：11911761
> 
> 赞同：0
> 
> 时间：2012-08-11T03:54:56.633
> 
> 标签：android, android-assets

我的应用程序的资产文件夹中有一个文件。有没有什么方法可以在没有上下文实例的情况下使用这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:29:33.530

不，你需要一个上下文。请注意，除了某些静态上下文之外，您应该始终可以访问应用程序中的上下文。正如另一位海报指出的那样，如果您需要从实用程序类/方法中访问上下文，您只需将 Context 作为方法的参数。

# zend-framework - Zend 框架：贝宝

> ID：11911764
> 
> 赞同：0
> 
> 时间：2012-08-11T03:56:10.003
> 
> 标签：zend-framework

我一直在尝试通过以下示例在我的应用程序中实现贝宝功能：[http ://www.alexventure.com/2011/04/02/zend-framework-and-paypal-api-part-2-of- 2/](http://www.alexventure.com/2011/04/02/zend-framework-and-paypal-api-part-2-of-2/)

这是我的控制器中的 paymentAction。

```
public function paymentAction()
{
    $auth= Zend_Auth::getInstance(); 
    $user= $auth->getIdentity();
    $username   = $user->username;

    $cart = new Application_Model_DbTable_Cart();

    $select = $cart->select()
    ->from(array('c' => 'cart'))
    ->join(array('p' => 'product'), 'p.productid = c.productid')
    ->where('username = ?', $username)
    ->setIntegrityCheck(false);

    $fetch = $cart->fetchAll($select)->toArray();

    $paypal = new My_Paypal_Client;
    $amount = 0.0;

    foreach($fetch as $item) {
        $amount = $amount + ($item['price']*$item['quantity']);
        }

    $returnURL = 'http://www.google.com';
    $cancelURL = 'http://www.yahoo.com';
    $currency_code = 'USD';

    $reply = $paypal->ecSetExpressCheckout(
        $amount, 
        $returnURL, 
        $cancelURL, 
        $currency_code
        );

    if ($reply->isSuccessfull()) 
    {
        $replyData = $paypal->parse($reply->getBody());
        if ($replyData->ACK == 'SUCCESS' || $replyData->ACK == 'SUCCESSWITHWARNING') 
        {
            $token = $replyData->TOKEN;
            $_SESSION['CHECKOUT_AMOUNT'] = $amount;

            header(
            'Location: ' . 
            $paypal->api_expresscheckout_uri . 
            '?&cmd=_express-checkout&token=' . $token
            );
        }
    }

    else 
    {
        throw new Exception('ECSetExpressCheckout: We failed to get a successfull response from PayPal.');
    }

} 
```

但是，这是返回的错误。

```
Message: No valid URI has been passed to the client 
```

我哪里做错了？如果需要，我很乐意提供来自我的应用程序其他区域的代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:43:05.310

`Zend_Http_Client::request()`没有收到 的有效实例`Zend_Uri_Http`。

这是发生错误的地方：

```
 /**
     * Send the HTTP request and return an HTTP response object
     *
     * @param string $method
     * @return Zend_Http_Response
     * @throws Zend_Http_Client_Exception
     */
    public function request($method = null)
    {
        if (! $this->uri instanceof Zend_Uri_Http) {
            /** @see Zend_Http_Client_Exception */
            require_once 'Zend/Http/Client/Exception.php';
            throw new Zend_Http_Client_Exception('No valid URI has been passed to the client');//Note the exact message.
        }//Truncated 
```

我在您提供的代码中看到的唯一明显错误是：

```
$paypal = new My_Paypal_Client;//no () at end of declaration 
```

我希望您实现了构建构造函数的[教程的第一部分。](http://www.alexventure.com/2011/02/28/zend-framework-and-the-paypal-api-part-1-of-2/)否则你可能只需要传递一个更好的uri。

**[编辑]** 我认为你的问题在这里：

```
//needs a uri value for Zend_Http_Client to construct
$paypal = new My_Paypal_Client($url); 
```

`ecSetExpressCheckout`不构造 http 客户端，因此它不知道它从哪里请求令牌。

或者，您可以在 $paypal 下方和 $reply 上方添加这一行：

```
//pass the uri required to construct Zend_Http_Client    
$paypal->setUri($url); 
```

我只是希望你知道 url 应该是什么。

祝你好运。

# php - Yii 布局视图文件：beginContent() 方法默认值

> ID：11911767
> 
> 赞同：1
> 
> 时间：2012-08-11T03:57:02.240
> 
> 标签：php, yii

我在 Yii 中玩布局，有一个问题需要你的帮助。当我查看布局视图文件：“column1.php”时，我看到了 beginContent() 方法：

```
<?php $this->beginContent('//layouts/main'); ?> 
```

当我阅读一本“使用 Yii 进行敏捷 Web 开发”的 guiedbook 时，它说：[quote]此处指定的视图是我们的主布局页面“layouts/main”。如果未指定任何内容，它将使用在控制器级别指定的默认布局，或者如果未在控制器级别指定，则在应用程序级别使用。[/quote] 据我了解，在控制器级别指定的布局是“布局/column1"（因为我检查了值 $this->layout）。所以如果我在 beginContent() 方法中将此布局留空，那么它将呈现“layout/column1”，对吗？如果是这样，新加载的布局将重新加载“layout/colum1”，因为在这个新加载的布局中没有布局值传递给 beginContent() 方法。我认为这将返回一个错误。

但是，当我将此布局值留空时。视图文件仍然正常加载。没有发生错误。我对此感到非常惊讶。

有人可以告诉我发生了什么事吗？

谢谢你。

# symfony - 实施 Doctrine 多对多——有时

> ID：11911769
> 
> 赞同：1
> 
> 时间：2012-08-11T03:57:24.093
> 
> 标签：symfony, doctrine-orm

我有一个包含许多用户和许多设计的网站，每一个都是由一个用户创建的。用户还可以选择其他设计作为收藏夹，并可以转到显示他们收藏夹的页面。因此，用户和设计之间存在多对多的关系，称为“收藏”。

我想知道实现这种收藏关系的最佳方法是什么。我只是在寻找特定用户的收藏夹，而且只在一个页面上。似乎 Doctrine 默认返回一个包含所有相关对象的对象，所以我担心通过添加这种关系，我会突然在我的所有设计列表 API 调用中添加大量额外的对象。

关于如何设置的建议？我有所有实体的存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:47:03.537

我将分享我在标签和帖子之间的实现（帖子可以有多个标签，每个标签可以与多个帖子相关联）。我认为这足以让您入门。设置非常简单：

在 Post 实体中，我有这个：

```
/**
 * @ManyToMany(targetEntity="Tag", inversedBy="posts")
 * @JoinTable(name="activity_relationship",
 *      joinColumns={@JoinColumn(name="object", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="subject", referencedColumnName="id")}
 * )
 */
protected $tags; 
```

在标签实体中，我有这个：

```
/**
 * @ManyToMany(targetEntity="Post", mappedBy="tags")
 */
protected $posts; 
```

连接表不需要实体。

对于带有标签的帖子，我只需访问 tags 属性就足够了，因为总会有少量的，但每个标签可能有成吨的帖子，所以我想要一些 LIMIT 和 OFFSET 控制. 因此，正如上面提到的 Cerad，您不需要直接使用 $posts 变量，而是使用 dql 单独查询。

```
SELECT t
FROM Post p 
JOIN p.tags t 
<add whatever other stuff you want> 
```

无论您喜欢哪种方式执行该查询，您都可能会从 Doctrine 获得一个查询对象，以应用 LIMIT 和 OFFSET，只需执行

```
$query->setMaxResults($limit);
$query->setFirstResult($offset); 
```

# sql - 使用 SQL SMS 如何使用低列和高列返回数字列表

> ID：11911773
> 
> 赞同：1
> 
> 时间：2012-08-11T03:58:35.810
> 
> 标签：sql

我有一个表 SUB_Inst，列 id、low 和 high。我将如何查询返回一个新列的低和高数字，其中每个数字从低到高都有记录？

```
 Current table SUB_Inst
    id  low High
    1   55  63
    2   232 234
    3   4   7
    etc. 
```

期望的结果

```
 id    low    High   Num_list
    1     55     63     55
    1     55     63     56
    1     55     63     57
    1     55     63     58
    1     55     63     59
    1     55     63     60
    1     55     63     61
    1     55     63     62
    1     55     63     63
    2     232    234    232
    2     232    234    233
    2     232    234    234
    3     4      7      4
    3     4      7      5
    3     4      7      6
    3     4      7      7
    etc. 
```

我试过这样的事情：

```
 SELECT Low, HIGH,
    (SELECT CAST(number as varchar)+','
    FROM NUMBERS
    WHERE number >= Low and number <= High 
    FOR XML PATH(''))
    FROM SUB_Inst 
```

但它返回了一个字段中的所有数字，这样不起作用：

```
 Low       High             Num_List
    24   27         24,25,26,27,
    34   36         34,35,36,
    10   17         10,11,12,13,14,15,16,17,
    34   36         34,35,36,
    65   67         65,66,67,
    502      504        502,503,504,
    56   59         56,57,58,59, 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:36:39.443

我想你想要这个：

```
SELECT id,low,high,number as Num_List
FROM SUB_Inst , NUMBERS
where low<=number and high>=number 
```

# php - 如何将同一网站制作为多个子域

> ID：11911774
> 
> 赞同：0
> 
> 时间：2012-08-11T03:58:56.620
> 
> 标签：php, mysql, hosting, subdomain

我需要你们的大力帮助。我有一个网站，例如 www.abc.com。我的客户需要将整个网站更改为三个子域以寻址三个国家。所有三个应该是相同的副本。

例子：

1.  [http://us.abc.com](http://us.abc.com)
2.  [http://in.abc.com](http://in.abc.com)

所有三个子域都应该像主网站一样工作。我想复制我所有的站点文件夹以复制到三个文件夹中，分别为 US、IN、FR 并将其上传到主机并将这些文件夹定向到子域。由于这会创建大量文件和文件夹，因此我会犹豫不决。

这种方法好还是我应该如何克服这种情况......很高兴你能给我一个线索。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:16:55.040

我不完全确定你的问题是什么：

1.  听起来您想使用 Apache 虚拟主机（因此不同的域名将由同一台服务器处理）：

    *   [http://www.thegeekstuff.com/2011/07/apache-virtual-host/](http://www.thegeekstuff.com/2011/07/apache-virtual-host/)
2.  当然，您需要将三个域的 DNS 指向您的 Web 服务器

3.  您可以使用 Apache 配置来根据需要在不同域之间共享或区分内容。

'希望有帮助...

PS：回答你原来的问题：

如果“http://us.abc.com”和“http://in.abc.com”是具有相同内容的不同域，您甚至不需要虚拟主机：您​​可以让“abc.com”同时服务. 但是虚拟主机仍然会更干净——以防您将来想自定义一个站点或另一个站点。

另一方面，如果您有“http://mysite.abc.com”和“http://mysite.abc.com.in”，那么您*仍然*可以从同一服务器为这两个站点提供服务。但是您*必须*使用虚拟主机（因为“abc.com”和“abc.com.in”是不同的域）。

再次 - 我希望这会有所帮助。

# html - DIV 定位 - 跨浏览器问题

> ID：11911775
> 
> 赞同：2
> 
> 时间：2012-08-11T03:59:22.223
> 
> 标签：html, css, cross-browser

我有一个页面，左边应该有文本，右边应该有一个表单。它在大多数浏览器（包括 Firefox、Chrome 和 Safari）上都能正常显示（和呈现）。

但是，某些版本的 IE 将表单保持在正确的位置（右上角），但会将文本一直推到页面底部。

这是用于定位表单的代码：

```
.custom #conversion_form {
width: 300px;
border: 1px solid #999;
background-color: #e9e9e9;
padding: 25px 30px 25px 25px;
float: right;
display: block;
margin-left: 20px;
} 
```

我需要添加哪些标签以将文本保留在左上角/避免将其推下？

演示：[http ://rainleader.com/signup](http://rainleader.com/signup)

屏幕截图（它应该看起来如何）：![在此处输入图像描述](../Images/16dd87867740afebc54479a022f71fbd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:13:35.740

我会创建两个 div，一个用于文本，另一个用于表单。

我总是在 left 属性上使用 center 50% 并使用 margin-left 或 marging-right 来独立于分辨率来处理 div 的位置。

看这个例子：

文本的 div，将文本放在 div 内：

```
.div_left_text {
    position: absolute;
    width: 200px;
    height: 200px;
    left: 50%;
    margin-left:-250px;
    top: 15px;
} 
```

表单的 div，将表单放在此 div 中：

```
.div_right_form {
    position: absolute;
    width: 200px;
    height: 200px;
    left: 50%;
    margin-right:250px;
    top: 15px;
} 
```

这应该独立地创建两个区域，一个在左侧，另一个在右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:02:38.673

当您创建并排效果时，最好将左侧内容浮动到左侧，将右侧内容浮动到右侧，并`overflow:hidden;`同时使用两者。

如果您仍然看到问题，请将两个内容都包装在 a`<div>`和`overflow:hidden;`that 中。

# php - 从 Jquery 获取 PHP $_SESSION 变量？

> ID：11911779
> 
> 赞同：1
> 
> 时间：2012-08-11T04:00:19.240
> 
> 标签：php, javascript, jquery, session

我还不是 JSON/AJAX 大师，所以我不知道该怎么做。

我需要一个 $_SESSION['name'] PHP 变量在我的 jQuery 东西中使用，但我不知道如何访问它......考虑：

```
// the 'who is typing' shindig
    $.ajax(
    {
        url: "whos_typing.html",
        cache: false,
        success: function(whos)
        {   
                // here I need to access $_SESSION['name'] and do stuff with it

            $("#soandso").html(whos); //Insert who's typing into the #soandso       
        }
        }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T04:04:17.533

你需要注入它，像这样：

```
var sessName = '<?php echo $_SESSION['name']?>'; 
```

包含此脚本的文件必须由 php 解释器执行（即 .php 文件）

编辑：承认Radu的观点，对于未经处理的数据执行会更安全：

```
var sessName = <?php echo json_encode($_SESSION['name']) ?>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T04:09:46.507

您需要使用`$.post`从服务器检索变量。你会有这样的事情：

```
 $.post('echoMyVar.php', {post: 1}, function(data){
      myVar = data['myVar'];
      }); 
```

这是非常基本的，你首先需要检查是否`data`不为空。在 echoMyVar.php 中，您基本上只需要以下内容：

```
 header('Content: application/json', 1);

 $returnVal = array('myVar', $_SESSION['myVar']);

 echo json_encode($returnVal); 
```

同样，这是一个外壳，不安全，不会处理任何错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T04:15:07.003

```
var name= "<?php echo $_SESSION['user_name'];?>" 
```

会做的 。. .

**请记住**php 是一个服务器端脚本，. . .so 它优先并首先执行并将 html 吐出到客户端（Jquery，javacript），这将在您的浏览器中执行。. . .

因此，您可以使用服务器端变量与客户端共享。. . 但不是相反。. .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T04:05:06.680

最简单的方法可能是将您的 javascript 代码包含在 .php 文件中。然后你可以简单地做：

```
var phpVar = <?php echo $_SESSION['name']; ?> 
```

[**类似的帖子**](https://stackoverflow.com/questions/4365738/how-to-access-php-session-variables-from-jquery-function-in-a-js-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T04:09:47.500

**whos_typing.php**中的服务器端：

```
<?php
//...
header('Content-Type: application/json');
echo json_encode(array(
    'who'=>'Bob',
    'session'=>$_SESSION,
    // Be sure that you're not storing any sensitive data in $_SESSION.
    // Better is to create an array with the data you need on client side:
    // 'session'=>array('user_id'=>$_SESSION['user_id'], /*etc.*/),
));
exit(0); 
```

客户端：

```
// the 'who is typing' shindig
$.ajax({
    url: "whos_typing.php",
    dataType: 'json',
    cache: false,
    success: function(data) {
        var session = data.session,
            who = data.who;
            console.log(session.user_id); // deal with session
        $("#soandso").html(who); //Insert who's typing into the #soandso
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-11T04:02:48.893

`echo`当您将会话变量发送到浏览器时，您需要从 PHP 获取会话变量。我假设 whos_typing.html 只是 PHP 脚本的 URL。

# css - 跨度标签溢出框的边缘

> ID：11911781
> 
> 赞同：0
> 
> 时间：2012-08-11T04:01:30.627
> 
> 标签：css, formatting, html

这是 JS Fiddle [http://jsfiddle.net/NnQLq/](http://jsfiddle.net/NnQLq/)的链接，对于小提琴的尴尬和半完成的性质感到抱歉。我的 css 变得如此复杂，以至于我无法轻松隔离页面的问题/部分。页面上的每个框都包含一个标题。一些标题溢出了盒子的边缘。我想要的是让他们环绕框（就像普通文本一样），然后，如果他们向下多行以使框包含它们，则在框的边缘出现一个滚动。比如什么时候`overflow:scroll`设置。我知道最后一部分是一个有点尴尬的解决方案，但盒子必须保持相同的大小。

对于某些信息，`box_list_docs_blue`标签是包含该框的标签。它有时与`box_list_docs_gold`css 中的标签相匹配。使用搜索页面功能查找与此类相关的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:19:59.550

您需要`word-wrap: break-word;`申请`#name_area`.

```
#name_area {
    word-wrap: break-word;
} 
```

[jsfiddle](http://jsfiddle.net/krish/NnQLq/3/)

# dynamics-crm-2011 - 插件注册工具抛出无法加载插件程序集

> ID：11911785
> 
> 赞同：2
> 
> 时间：2012-08-11T04:02:03.683
> 
> 标签：dynamics-crm-2011

我正在使用最新版本的 MS CRM 2011 SDK 并尝试部署自定义工作流活动（已使用密钥签名）。插件注册工具会抛出错误“无法加载插件程序集”，而没有太多关于根本原因的信息。该工具抛出的错误跟踪与本文中描述的非常[相似](http://social.microsoft.com/Forums/is/crmdeployment/thread/76fa4f31-3ccb-4952-af64-09d6292e2875)

上面引用的帖子的答案表明在 GAC 中添加 Microsoft.Xrm.Client 程序集，但我的工作流项目引用以下 DLL 1)Microsoft.Crm.Sdk.Proxy.dll 2)Microsoft.Xrm.Sdk.dll 3)Microsoft .Xrm.Client.dll 4)Microsoft.Xrm.Sdk.Workflow.dll

是否应该将所有这些都添加到 GAC 中？CRM 服务器是 Win 2K8R2。我尝试将程序集拖放到 c:\windows\assembly 文件夹，但这不起作用。没有错误，但也没有任何内容被复制。我按照这篇[文章](https://stackoverflow.com/questions/7787607/drag-and-drop-a-dll-to-the-gac-assembly-in-windows-server-2008-net-4-0)中概述的说明进行操作，但这也不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:02:14.073

我认为您不必将任何 crm dll 放入 gac，它们已经安装在 CRM 服务器文件中。如果您认为它可以解决问题，请使用 gacutil（不清楚您是否无法安装到 gac，或者是否无法解决问题）。

我怀疑它在抱怨您的 dll，您是否要注册到磁盘？因为您通常必须首先将 dll 放在 crm/server/bin 文件夹中。尝试部署到数据库 - 使以后将解决方案部署到其他服务器变得更容易。

如果这仍然不起作用，请发布错误的跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:42:38.957

打开 crm server side.tracing。您将获得更好的错误信息。使用 CRM 诊断工具打开跟踪日志记录：[http ://crmdiagtool2011.codeplex.com](http://crmdiagtool2011.codeplex.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:31:19.380

事实证明，如果您使用 /codecustomization 开关让代码生成器派生自“CrmOrganizationcContext”，则需要“microsoft.xrm.client.dll”。此 DLL 不包含在 CRM 的默认安装中，您需要在服务器上以一种或另一种方式获取它。我决定不使用 /codecustomization 开关，它会导致“上下文”从“OrganizationContext”派生，而不是依赖于该 DLL。插件注册现在有效！[这篇文章](http://social.microsoft.com/Forums/en/crmdevelopment/thread/9b35af0e-051b-4036-9aae-59f1d0aae11a)提供了更多的见解

# linq - 如何使用 linq to xml 在 HtmlAgilityPack 中查找节点集合？

> ID：11911787
> 
> 赞同：0
> 
> 时间：2012-08-11T04:02:30.610
> 
> 标签：linq, linq-to-xml, html-agility-pack

我想从各种网站中提取信息。我正在使用 HtmlAgilityPack 和 Linq to XML。到目前为止，我已经设法通过编写以下内容从网站中的单个节点中提取值：

```
var q = document.DocumentNode.DescendantNodes()
        .Where(n => n.Name == "img" && n.Id == "GraphicalBoard001")
        .FirstOrDefault(); 
```

但我对以“GraphicalBoard”开头的整个 img 集合非常感兴趣。我试过类似的东西：

```
var q2 = document.DocumentNode.DescendantNodes()
        .Where(n => n.Name == "img" && n.Id.Contains("GraphicalBoard"))
        .Select... 
```

但似乎 linq 不喜欢 Contains 方法，因为我在智能感知中丢失了 Select 选项。如何提取 ID 以“GraphicalBoard”开头的所有 img-tags？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:24:43.830

> 如何提取 ID 以“GraphicalBoard”开头的所有 img-tags？

您已经拥有它，只需停止调用`Where()`. 该`Where()`调用按满足谓词的项目过滤集合。

尽管您应该编写它以便过滤`img`后代，而不是所有后代。

```
var query = doc.DocumentNode.Descendants("img")
               .Where(img => img.Id.StartsWith("GraphicalBoard")); 
```

# iphone - 如果调用新代码，运行低版本IOS的用户会怎样？

> ID：11911790
> 
> 赞同：1
> 
> 时间：2012-08-11T04:02:39.017
> 
> 标签：iphone, objective-c, ios

我对 iOS 开发相当陌生，我一直想知道在 iOS 4 上运行我的应用程序的用户是否会尝试运行以下代码：

```
//POST TWEET//
- (void)showTweetSheet
{
    TWTweetComposeViewController *tweetSheet =
    [[TWTweetComposeViewController alloc] init];
    tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result) {
        switch(result) {
            case TWTweetComposeViewControllerResultCancelled:
                break;
            case TWTweetComposeViewControllerResultDone:
                break;
        }
        dispatch_async(dispatch_get_main_queue(), ^{
            [self dismissViewControllerAnimated:YES completion:^{
                NSLog(@"Tweet Sheet has been dismissed.");
            }];
        });
    };
    [tweetSheet setInitialText:@"Check out this cool picture I found on @Pickr_"];
    //  Add an URL to the Tweet.  You can add multiple URLs.
    if (![tweetSheet addURL:[NSURL URLWithString:ImageHost]]){
        NSLog(@"Unable to add the URL!");
    }
    [self presentViewController:tweetSheet animated:YES completion:^{
        NSLog(@"Tweet sheet has been presented.");
    }];
} 
```

会发生什么？应用程序会因错误而终止，还是代码不会运行？以及如何正确实现特定于操作系统的功能？我会使用这样的东西吗：

```
NSString *DeviceVersion = [[UIDevice currentDevice] systemVersion];
int DeviceVersionInt = [DeviceVersion intValue];
if (DeviceVersionInt > 5)
{
    //do something.
}
else
{
    //don't do a thing.
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T05:24:38.743

如果您编写 iOS5 功能而不检查它们是否可用，它将在 iOS 4 上崩溃。尝试像这样实现 Twitter

> ```
> Class twClass = NSClassFromString(@"TWTweetComposeViewController");
> if (!twClass) // Framework not available, older iOS
> {
>     //use iOS4 SDK to implement Twitter framework
> }
> else {
>     //use Apple provided default Twitter framework 
> ```
> 
> }

Make sure you have added Twitter Framework with weak link.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:21:30.777

我想它会与任何其他 api 一样工作。如果您链接的函数不在以前的版本中，程序将在尝试调用该函数时崩溃。因此，正如您所演示的，使用版本开关来避免崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T08:00:23.857

The app would crash. If you want to implement features based on iOS, you can use a variety of methods. See this [question](https://stackoverflow.com/questions/3339722/check-iphone-ios-version).

# python - Deferred 中未处理的错误

> ID：11911798
> 
> 赞同：0
> 
> 时间：2012-08-11T04:04:30.750
> 
> 标签：python, twisted, twisted.web

似乎是内部扭曲的错误......它定期出现，实际上一切正常，但可能是我的错误？代码很大，所以我[把它粘贴在那里](http://pastebin.com/tHEWxuJn)，错误：

```
07:51:32 startLive
07:51:34 time is off
07:51:34 again
07:51:36 time is off
07:51:36 again
07:51:38 time is off
07:51:38 again
07:51:40 time is off
07:51:40 again
07:51:42 time is off
07:51:42 again
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
Failure: twisted.internet.defer.CancelledError: 
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
Failure: twisted.internet.defer.CancelledError: 
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
Failure: twisted.internet.defer.CancelledError: 
07:51:44 time is off
07:51:44 again
07:51:46 time is off
07:51:46 again
07:51:48 time is off
07:51:48 again 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:04:13.130

您粘贴的代码中的任何地方都没有一次调用`Deferred.addErrback`（请听 Glyph 并且不要在外部站点上粘贴代码）。

您应该阅读[有关 errbacks 的 Deferred 文档部分](http://twistedmatrix.com/documents/current/core/howto/defer.html#auto4)。

# macos - 如何在没有交互的情况下为 P12 到 PEM 文件的转换指定密码。

> ID：11911809
> 
> 赞同：0
> 
> 时间：2012-08-11T04:05:50.937
> 
> 标签：macos, shell, unix, terminal

我正在尝试将 P12 文件转换为 PEM 文件。当我执行命令时，终端会询问我三件事：

P12 密码（我输入，回车）
PEM 密码（输入，回车）
PEM 密码确认（输入，回车）

我知道我可以使用以下命令一次性执行 sudo 命令：

```
echo sudopassword | sudo rm -rf /file.p12; 
```

如何一次添加所有三个值？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:41:25.623

你能解释一下这些 P12 文件是什么吗？我发现[这个链接](http://www.gridsite.org/wiki/Convert_p12)处理使用 .PEM 将 pkcs12 证书/密钥文件转换为 .PEM 格式`openssl`。(http://gridsite.org)

答案的关键是：

**用于无人`-passin file:...`值守`-passout file:...`处理**

我猜你必须为这种情况指定`-passin file:P12passphrase`and`-passout file PEMpassphrase`选项。

这个小测试确认了如何通过`file:<...>`参数指定输入密码。这有助于隐藏此类短语免受任何*过肩*攻击。不要忘记限制对此类文件的访问。尽管它是大多数 openssl 命令的共同特征，但并未明确提及，它是原始问题的关键。完整的选项列表如下。

```
$ openssl pkcs12 -passin file:P12phrase
Can't open file P12phrase
Error getting passwords 
```

（我把它留给 OP 来构建完整的命令。）

以下是`pkcs12`子命令的所有支持选项：

```
$ openssl pkcs12 help 
Usage: pkcs12 [options]
where options are
-export       output PKCS12 file
-chain        add certificate chain
-inkey file   private key if not infile
-certfile f   add all certs in f
-CApath arg   - PEM format directory of CA's
-CAfile arg   - PEM format file of CA's
-name "name"  use name as friendly name
-caname "nm"  use nm as CA friendly name (can be used more than once).
-in  infile   input filename
-out outfile  output filename
-noout        don't output anything, just verify.
-nomacver     don't verify MAC.
-nocerts      don't output certificates.
-clcerts      only output client certificates.
-cacerts      only output CA certificates.
-nokeys       don't output private keys.
-info         give info about PKCS#12 structure.
-des          encrypt private keys with DES
-des3         encrypt private keys with triple DES (default)
-aes128, -aes192, -aes256
              encrypt PEM output with cbc aes
-nodes        don't encrypt private keys
-noiter       don't use encryption iteration
-maciter      use MAC iteration
-twopass      separate MAC, encryption passwords
-descert      encrypt PKCS#12 certificates with triple DES (default RC2-40)
-certpbe alg  specify certificate PBE algorithm (default RC2-40)
-keypbe alg   specify private key PBE algorithm (default 3DES)
-keyex        set MS key exchange type
-keysig       set MS key signature type
-password p   set import/export password source
-passin p     input file pass phrase source
-passout p    output file pass phrase source
-engine e     use engine e, possibly a hardware device.
-rand file:file:...
              load the file (or the files in the directory) into
              the random number generator
-CSP name     Microsoft CSP name
-LMK          Add local machine keyset attribute to private key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:44:00.940

这些命令不太可能从标准输入读取。他们更有可能直接从终端读取。这允许他们设置不将密码回显到屏幕的模式。尝试将您的输入回显到`/dev/tty`.

除此之外，您还需要使用诸如[expect](http://en.wikipedia.org/wiki/Expect) / [pexect 之](http://www.noah.org/wiki/pexpect)类的东西来控制这些。这些项目是专门为此目的而构建的。

* * *

Openssl 有一个 -stdin optoin 从标准输入读取其输入。这有效：

```
tmp=`mktemp`
cat > $tmp <<EOF                                                                                       

$1                                                                                      

EOF                                                                                     
cat $tmp | openssl req -out CSR.csr -new -newkey rsa:2048 -nodes -keyout privateKey.key 
```

我使用 cat 和 here-document 来避免将密码放在命令行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-26T12:44:21.893

我用过`openssl pkcs12 -in Certificates.p12 -out sampleCore.pem -nodes`，它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T04:11:47.887

您是否尝试过仅回显三行？它可能会工作

```
echo $'P12 passphrase\nPEM passphrase\nPEM passphrase confirm' | cmd 
```

虽然我觉得我必须指出像这样的回显密码是非常不安全的。密码不仅最终出现在您的 bash 历史文件中，而且系统上运行`ps`.

# objective-c - 如何以编程方式在 iPhone 中将 GMT 转换为 IST？

> ID：11911811
> 
> 赞同：0
> 
> 时间：2012-08-11T04:06:06.520
> 
> 标签：objective-c, iphone

我正在做一个项目，我想在 IST 时间设置警报，但我得到的是 GMT 值。我不知道时差是多少，也不知道如何将 GMT 时间转换为 IST。

如何进行这种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:05:28.317

> ```
> // about date(IST)
> NSDateFormatter *istDateFormatter = [[NSDateFormatter alloc] init];
> istDateFormatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"IST"];
> istDateFormatter.dateFormat = @"yyyy/MM/dd HH:mm:ss";;
> NSString *outDateStr = [istDateFormatter stringFromDate:[NSDate date]]; 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:23:02.440

--userdefined 获取当前印度时间的函数 ALTER FUNCTION [purpledbadmin].[GetIndianTime] () RETURNS DateTime AS BEGIN declare @IndianTime DateTime

```
set @IndianTime= GETDATE()+ convert(datetime, '05:30:00:000');

return @IndianTime 
```

结尾

# c++ - netbeans 找不到包含文件

> ID：11911814
> 
> 赞同：0
> 
> 时间：2012-08-11T04:06:28.280
> 
> 标签：c++, gcc, netbeans, header-files

如果我运行 helloworld.cpp，我正在使用 net-beans 7.2，它显示的错误是找不到包含文件（IDE 无法识别任何 .h 文件）。我安装了 gcc，我正在使用 Fedora 16，我正在尝试使用 CUDA 插件。

```
#include <cuda_runtime.h>
#include <cutil.h>
# include <iostream.h>

int main(int argc, char **argv)
{
    prithf("Hii");
    return 0;
} 
```

希望有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:11:13.790

您是否尝试过：

```
#include <iostream> 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T05:11:17.650

C++ 中没有这样的头文件。`#include <iostream>`是你想要的。某些编译器确实`<iostream.h>`用于遗留代码（不知道 gcc 是否是其中之一），但您不应该使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T05:17:43.680

在 C++ 中，您通常不会对头文件使用 .h 扩展名。对于 C++ 头文件，直接使用文件名，在这种情况下为

```
#include<iostream> 
```

不推荐使用 iostream.h。

也写

```
using namespace std; 
```

最好在标记所有头文件后将标准命名空间中的所有符号导入您的代码。这样，您就不必每次想要使用 std:: 时都编写它。如果你没有得到我所说的，请参考这个链接 - [http://www.cplusplus.com/doc/tutorial/namespaces/](http://www.cplusplus.com/doc/tutorial/namespaces/)。了解这一点很重要。

对于您常用的 C 头文件，通常您必须在文件名前添加一个“c”前缀并删除 .h 扩展名。例如，

```
#include<math.h> 
```

变成

```
#include<cmath> 
```

# ruby-on-rails - 是否可以在 ruby /rails 中将 JSON 对象转换为漂亮的视图 html.erb？

> ID：11911820
> 
> 赞同：0
> 
> 时间：2012-08-11T04:08:17.723
> 
> 标签：ruby-on-rails, json, view

想象一下，我有这个：

```
[ 
  {"id":1, "name":"bla", "other":"aaaa"},
  {"id":2, "name":"ble", "other":"eeee"},
  {"id":3, "name":"bli", "other":"iiii"},
] 
```

我想在我的 someview.html.erb 中看到

```
Id:1
name:Bla
other:aaaa

Id:2
name:Ble
other:eee 
```

...

当我说 JSON 时，我的意思是我不知道对象属性。我只想自动格式化 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:22:16.437

尝试这个：

```
require 'JSON'
require 'yaml'

x = '[
  {"id":1, "name":"bla", "other":"aaaa"},
  {"id":2, "name":"ble", "other":"eeee"},
  {"id":3, "name":"bli", "other":"iiii"}
]'

puts JSON.parse(x).to_yaml 
```

# android - 我无法在 Eclipse 上创建可行的 Libgdx 项目

> ID：11911822
> 
> 赞同：0
> 
> 时间：2012-08-11T04:08:34.463
> 
> 标签：android, eclipse, libgdx

我无法在 Eclipse 上创建可行的 Libgdx 项目。没有红色标记的可见编译错误。只是 ”！” 项目名称上的符号。

```
错误：
无效的 ZIP 存档：libs/armeabi-v7a/libgdx.so [in ...]
无效的 ZIP 存档：libs/armeabi-v7a/libandroidgl20.so [in ...]
...
无效的 ZIP 存档：libs/armeabi-v7a/libandroidgl20.so [in ...]
无效的 ZIP 存档：libs/armeabi/libgdx.so [in ...]

```

或者有时我得到奇怪的错误框：

```
Launch configuration CacheLineSize references non-existing project game1. 
```

顺便说一句，Eclipse 太不舒服了，我无法打开和关闭项目。一堆项目......但我的主要问题是我无法在 IntelliJ IDEA 中为 Libgdx 项目创建最终 apk。（apk 很小，没有图像，proguard 错误）。所以我尝试在eclipse上创建发布apk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:08:28.407

我认为你的图书馆有问题。去从这个[链接](http://code.google.com/p/libgdx/downloads/list)下载最新的库。并将它们替换为您当前的库。java 库和 android 库。（你的问题在 android libs 中）
看，我的英语不好，但我认为你的 apk 和图像有问题。图像可以使用最新的 sdk 设置，您只需选择一个图像，然后 eclipse 将其更改为正确的尺寸，对于 apk 查找 mario 的教程。最后，进入[LibGDX](http://libgdx.badlogicgames.com/)站点或他们的[论坛](http://badlogicgames.com/forum/)并寻找您的答案。希望我的回复对你有所帮助。

# android - Java Android 谷歌地图 API 注册。MD5 证书指纹而不是 SHA1

> ID：11911832
> 
> 赞同：0
> 
> 时间：2012-08-11T04:10:11.793
> 
> 标签：android, google-app-engine, google-maps, google-maps-api-3

没有地图显示，但一个网格。所以我查找了一些示例修复并来到了这个

[在市场上发布 android 应用程序需要帮助](https://stackoverflow.com/questions/7315635/help-needed-to-publish-android-app-in-market)

但是，在按照建议运行 cmds 后，我最终得到了 SHA1 证书指纹。但是当我去注册一个谷歌 API 密钥时，我发现我需要一个 MD5 证书指纹。请问我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:07:06.133

这是您问题的解决方案

1.  打开命令提示符并导航到`C:\Program Files\Java\jre6\bin`（在您的情况下可能会有所不同）。

2.  当您遵循[此解决方案](https://stackoverflow.com/questions/7315635/help-needed-to-publish-android-app-in-market)时，这意味着您拥有`keystore`。如果是，请转到第 3 步。否则创建一个新的`keystore`，如[本文](https://stackoverflow.com/questions/7315635/help-needed-to-publish-android-app-in-market)所述。

3.  键入以下命令`keytool.exe -v -list -keystore " <path_of_keystore_youhave_created_in_step_2>"`，它将要求输入密码，使用您在创建时使用的相同密码`keystore`，您将获得`SHA1` `MD5`许多您在创建时提供的信息`keystore`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:48:12.163

首先找到 debug.keystore 的位置（在 Eclipse 中，您可以在 Window->Preference->Android->Build 找到 debug.keystore 的位置）。然后`keytool.exe`在命令提示符中导航路径。`keytool.exe`位于 Java -> JDK -> 程序文件内的 bin 文件夹内。对于窗口，在命令提示符下编写以下代码`C:\Program Files\Java\jdk1.6.0_25\bin> keytool -list –alias androiddebugkey -keystore <path_of_debug.keystore> -storepass android -keypass android`

这`<path_of_debug.keystore>`是 debug.keystore 的路径。就我而言，它是 C:\Users\virus.android。

复制 MD5 密钥（例如：- BE:05:C8:F2:42:7A:97:37:78:EE:BD:4A:31:7D:A6:69）并转到以下链接以查找 google map api关键 [http://code.google.com/android/maps-api-signup.html](http://code.google.com/android/maps-api-signup.html)

# javascript - 如何在 facebook 的“新消息”窗口中创建类似于“收件人：”字段的文本字段？

> ID：11911834
> 
> 赞同：0
> 
> 时间：2012-08-11T04:10:37.457
> 
> 标签：javascript, html, facebook, forms

我想知道如何使用 JavaScript 和 HTML 制作如下所示的文本字段。

![脸书截图](../Images/91e610c204fb17786c4e4e138bf4dc3c.png)

此文本字段用蓝色框突出显示用户名。

你知道有什么好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:35:40.440

如果 jQuery 对你没问题，那么可以找到许多带有教程的插件。举些例子，

*   [jQuery TextExt 插件](http://textextjs.com/)
*   [jQuery 令牌输入](http://loopj.com/jquery-tokeninput/)

# php - PHP和正则表达式在以元音开头的单词之前将“a”转换为“an”

> ID：11911838
> 
> 赞同：2
> 
> 时间：2012-08-11T04:11:09.107
> 
> 标签：php, regex, string, case, grammar

我很惊讶我在网上的任何地方都找不到这个，包括stackoverflow。我正在寻找在 PHP 函数 preg_replace 中使用的正则表达式来实现这一点：

**找到文本中“a”后跟元音的任何部分，然后按照英语语法规则将“a”转换为“an”。**

例如：

“一个苹果”将转换为“一个苹果”。

“a igloo”将转换为“an igloo”。

等等等等

理想情况下，该函数不区分大小写。真正令人印象深刻的是如果它可以保留原始大小写，例如“A”将转换为“An”，并且下一个单词的大小写将被单独保留，例如“an American”不会以“一个美国人”。

这似乎正是正则表达式最适合的事情，而且很多人会发现它很有用，但我想不通。将不胜感激这方面的一些帮助。

我目前正在尝试这个：

```
preg_replace("/ a?i ([aeio])?i/", "an $1", $string) 
```

正如评论者正确指出的那样，这并不能完全解决 a / an 的问题，因为这是基于声音而不仅仅是字母。但是，我仍然认为在“每一点帮助”的基础上都是值得的，因为它纠正了大多数此类问题，从而节省了一些人工编辑时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T04:48:29.947

我的模式如下，尽管上面评论中的问题（re：u）更棘手。

```
preg_replace('/\b(a)\s+([aeiou])/i', '$1n $2', $source_string); 
```

当然，如果 u 是唯一的麻烦字母，您可以赌一把，并在 u 跟随的情况下信任源字符串，只需将其从模式中删除：`/\b(a)\s+([aeio])/i`

# css - 禁用 Firefox 和 ie10 的自动字距调整？

> ID：11911840
> 
> 赞同：2
> 
> 时间：2012-08-11T04:11:24.913
> 
> 标签：css, firefox, typography, internet-explorer-10, kerning

如何禁用 Firefox 和 ie10 的自动字距调整？我花了一段时间试图寻找解决方案，但我得到的只是过时的页面和实验方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:46:20.973

以前，在 Firefox 上，`text-rendering: optimizeSpeed`CSS 中的设置会阻止字距调整（和连字）。根据[Mozilla 文档](https://developer.mozilla.org/en-US/docs/CSS/text-rendering)，这样的设置现在被忽略了，“因为文本渲染的标准代码已经非常快了，目前没有更快的代码路径”。

您可以通过使用浏览器根本不应用字距调整的字体来防止字距调整。文档含糊不清，但似乎 Firefox 将字距调整应用于 Microsoft 的某些“C 字体”和 DejaVu 字体。

另一种非常笨拙的方法是在字母之间使用零宽度非连接符 (U+200C) 字符，例如`W&zwnj;ally`在不调整“Wa”对的情况下渲染“Wally”。

# r - R中不同颜色的散点图

> ID：11911841
> 
> 赞同：-8
> 
> 时间：2012-08-11T04:11:38.937
> 
> 标签：r, scatter-plot

如何散点图如下：

```
 var1  var2
1  10  2
2  20  4
3  30  8
4  40  16
5  80  32 
```

我需要用不同的颜色为 var1 和 var2 着色。x 轴的范围应为 1 到 5。如何添加显示数据趋势的线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:44:52.233

你的问题不是很清楚，但假设你的数据在 df 中，听起来你想要这样的东西开始：

```
plot(1:5, df$var1, pch=19, col="blue", ylim=c(0,80))
points(1:5, df$var2, pch=19, col="red") 
```

至于数据的趋势，你是什么意思？每条线的趋势？或者您是否真的想针对 var2 绘制 var1（我假设您*不*希望这样，否则没有两种颜色是没有意义的）。

# php - php - 在文本到图像上调整文本

> ID：11911846
> 
> 赞同：1
> 
> 时间：2012-08-11T04:12:19.057
> 
> 标签：php, image, text

我有这个代码

```
<?php
// Set the content-type
header('Content-type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing... a very long text';
// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

这里的问题是，当我的文本很长时，另一个不会显示。我已经搜索过它可以通过

```
imagettfbbox() 
```

但我不知道如何在这里应用它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:38:12.107

试试这个代码：

```
<?php
// Set the content-type
header('Content-type: image/png');

$img_width = 400;
$img_height = 30;

// Create the image
$im = imagecreatetruecolor($img_width, $img_height);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, $img_width, $img_height, $white);

// The text to draw
$text = 'Testing... a very long text bla.. ';
// Replace path by your own font path
$font = 'arial.ttf';

$fontSize = $img_width / strlen($text) * 1.8;

// Add some shadow to the text
imagettftext($im, $fontSize, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, $fontSize, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

新的更新代码：

```
<?php
// Set the content-type
header('Content-type: image/png');

$img_width = 400;
$img_height = 30;
$font = 'arial.ttf';    
// Create the image
$text = 'Testing... a very long text.. Testing... a very long text.. Testing... a very long text.. Testing... a very long text..';
$curTextLen = strlen($text);
$limit = 35;
$totalLine = ceil($curTextLen / $limit);
$img_height = $img_height * $totalLine;

$im = imagecreatetruecolor($img_width, $img_height);
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);

imagefilledrectangle($im, 0, 0, $img_width, $img_height, $white);

for($i = 1; $i <= $totalLine; $i++){
    $y = $i * 27;
    $textN = substr($text,($limit * ($i-1)),$limit);
    imagettftext($im, 20, 0, 11, $y, $grey, $font, $textN);
    // Add the text
    imagettftext($im, 20, 0, 10, $y, $black, $font, $textN);
}
// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

# php - 更改 PHP 默认时区不起作用

> ID：11911852
> 
> 赞同：1
> 
> 时间：2012-08-11T04:14:38.913
> 
> 标签：php, date, timezone

我正在尝试将一行代码添加到前面有时间的 html 文档中。我希望时区与我相关，但是我无法将其更改为默认的 UTC。我已将 php.ini 文件更改为 PST 以及使用 date_default_timezone_set('America/Los_Angeles'); 但它仍然比我的时区提前 7 小时打印时间。这是处理时间的代码：

```
session_start();
if(isset($_SESSION['name']))
{
    date_default_timezone_set('America/Los_Angeles');

    $msg = $_POST['text'];

    $fo = fopen("log.html", 'a');
    fwrite($fo, "<div class=msgln>(".date("g:i A").") <b  style=color:red;>".$_SESSION['name']."</b>: ".stripslashes(htmlspecialchars($msg))."<br></div>
    ");
    fclose($fo);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T04:33:09.773

服务器应设置为 UTC，并且您不应该更改默认值。相反，您要做的是根据时间创建一个 DateTime 对象，然后将其转换为您想要的时区并显示。

```
$now = new DateTime();
$now->setTimezone(new DateTimeZone('America/Los_Angeles'));
echo $now->format('g:i A'); 
```

我不知道您的格式字符串是否有效，但格式方法应该与您在原始示例中使用的 date() 函数所接受的方法兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:17:13.847

首先确保您使用的是有价值的时区。您可以在 PHP 文档中找到[支持的时区列表。](http://php.net/manual/en/timezones.php)

第二个问题是使用[date()](http://us.php.net/manual/en/function.date.php)而不指定时间戳。这默认为[time()](http://us.php.net/manual/en/function.time.php)生成的时间戳（基于文档中的注释）是 UTC 时间。您必须使用[strftime()](http://us.php.net/manual/en/function.strftime.php)或手动减去 UTC 的差值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T06:14:00.547

如果您使用“etc/GMT”，您可以将 dateTime 对象设置为所需的时区，如下所示：

```
$dtz = new DateTimeZone('etc/GMT-10');
$dt = new DateTime(date("Y-m-d h:i A"), $dtz); 
$date = gmdate("Y-m-d h:i A", $dt->format('U')); 
```

# sql-server - SQL Server 2012 连接字符串

> ID：11911857
> 
> 赞同：0
> 
> 时间：2012-08-11T04:15:18.820
> 
> 标签：sql-server, connection-string

我刚刚安装了 2012 SQL Server。一切顺利。。

SQL Server 2012 安装为默认实例，因为客户端在 SQL Express 2008 版本上运行。

使用 SQL 配置管理器命名管道协议启用，因为它默认为禁用。

默认情况下，远程连接在 SQL Server 中处于选中状态，并仔细检查它是否处于选中状态。

停止并启动服务

然后尝试启动在 2008 R2 上运行良好的客户端应用程序，但始终无法连接。我尝试了连接字符串中的一系列内容，包括通常的（本地）、本地主机、IP 地址......等。

我不断收到相同的标准错误：数据库错误 2 确保启用了远程连接并且实例名称正确等等：命名管道提供程序错误 40。

这是正在使用的连接字符串；

```
connectionString="Data Source=(local);InitialCatalog=AssetManager;
Persist Security Info=True;User ID=sa;Password=blah" providerName="System.Data.SqlClient" 
```

2012 年有什么不同的东西需要添加到连接字符串中吗？我错过了什么，已经在网上检查过，没有明显的发现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:21:17.800

这些可能是导致命名管道提供程序错误 40 的以下原因

1 不正确的连接字符串，例如使用SqlExpress。

2 SQL 实例上未启用 NP。

3 未启用远程连接。

4 服务器未启动，或在您的连接字符串中指向不是真正的服务器。

5 其他原因，例如不正确的安全上下文。

欲了解更多信息，请访问以下链接：

[http://blogs.msdn.com/b/sql_protocols/archive/2007/03/31/named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server.aspx?页面索引=2](http://blogs.msdn.com/b/sql_protocols/archive/2007/03/31/named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server.aspx?PageIndex=2)

它可能会帮助你。

# singleton - 芹菜：任务单例？

> ID：11911859
> 
> 赞同：7
> 
> 时间：2012-08-11T04:16:28.160
> 
> 标签：singleton, task, communication, celery

我有一个任务需要从触发它的网页异步运行。这个任务运行的时间很长，并且由于网页可能会收到很多这样的请求，我希望 celery 在给定的时间只运行这个任务的一个实例。

有什么办法可以在 Celery 本地做到这一点？我很想创建一个数据库表来保存所有要与之通信的任务的状态，但感觉很hacky。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:41:46.543

您可能可以为配置了 CELERYD_CONCURRENCY=1 的任务创建一个专用的工作人员，然后该工作人员上的所有任务将同步运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-09T07:09:51.030

您可以为此使用 memcache/redis。celery 官方网站上有一个例子 - [http://docs.celeryproject.org/en/latest/tutorials/task-cookbook.html](http://docs.celeryproject.org/en/latest/tutorials/task-cookbook.html)

如果你更喜欢 redis（这是一个 Django 实现，但你也可以根据需要轻松修改它）：

```
from django.core.cache import cache
from celery.utils.log import get_task_logger

logger = get_task_logger(__name__)

class SingletonTask(Task):
    def __call__(self, *args, **kwargs):
        lock = cache.lock(self.name)

        if not lock.acquire(blocking=False):
            logger.info("{} failed to lock".format(self.name))
            return

        try:
            super(SingletonTask, self).__call__(*args, **kwargs)
        except Exception as e:
            lock.release()
            raise e
        lock.release() 
```

然后将其用作基本任务：

```
@shared_task(base=SingletonTask)
def test_task():
    from time import sleep
    sleep(10) 
```

这种实现是非阻塞的。如果您希望下一个任务等待上一个任务更改`blocking=False`并`blocking=True`添加`timeout`

# java - 将某个单词上的字符串拆分为 ArrayList - java

> ID：11911862
> 
> 赞同：2
> 
> 时间：2012-08-11T04:16:59.537
> 
> 标签：java, string, split

我被困在将一个字符串分成几部分以将这些部分存储到一个 ArrayList 中。我可以将字符串拆分为`" "`，但我想将字符串拆分为`"farmersmarket"`并将其存储到`Arraylist`. 能够返回被索引的字符串之一。

```
 ArrayList<String> indexes = new ArrayList<String>();
    String s = file; 

    for(String substring: s.split(" ")){
        indexes.add(substring);
        }
    System.out.println(indexes.get(2)); 
```

有什么想法可以拆分字符串`"farmersmarket"`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T04:20:11.353

```
String[] tokens = yourString.split("farmersmarket"); 
```

之后，您不需要 an`Arraylist`来获取令牌的特定元素。您可以像这样访问每个令牌

```
String firstToken = tokens[0];
String secondToken = tokens[1]; 
```

如果你需要一个`List`你可以做

```
List<String> list = Arrays.asList(tokens); 
```

如果必须`Arraylist`这样做

```
ArrayList<String> list = new ArrayList<String>(Arrays.asList(tokens)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:19:44.803

假设当输入字符串没有要拆分的字符时，您仍想返回字符串列表， Arrays.asList(inputString.split(" ")) 应该可以工作。

例如 Arrays.asList("farmersmarket".split(" ")) 将返回一个仅包含一个元素的列表——farmersmarket。

# php - 正则表达式中的动态捕获组

> ID：11911869
> 
> 赞同：0
> 
> 时间：2012-08-11T04:20:10.347
> 
> 标签：php, regex

给定以下 PHP 代码：

```
<?php
$str = '/foo/bar/baz';
preg_match('#^(/[^/]+?)*$#', $str, $matches);
var_dump($matches); 
```

...我得到以下输出：

```
array (size=2)
  0 => string '/foo/bar/baz' (length=12)
  1 => string '/baz' (length=4) 
```

...但我不明白为什么。我希望每场比赛都`(/[^/]+?)`被捕获到自己的组中并陷入`$matches`，这样它看起来像这样：

```
array (size=4)
  0 => string '/foo/bar/baz' (length=12)
  1 => string '/foo' (length=4)
  2 => string '/bar' (length=4)
  3 => string '/baz' (length=4) 
```

我错过了什么？

**编辑：**

如果我改用这是输出`preg_match_all()`，这仍然不是我想要的：

```
array (size=2)
  0 => 
    array (size=1)
      0 => string '/foo/bar/baz' (length=12)
  1 => 
    array (size=1)
      0 => string '/baz' (length=4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:54:45.333

这是重复捕获组的标准行为——它们匹配所有重复，但只捕获最后一个。请参阅[正则表达式组和 * 通配符可以一起使用吗？](https://stackoverflow.com/questions/11409236/can-regex-groups-and-wildcards-work-together)对于使用 Python 的类似问题。我在 Perl 中尝试过，得到了相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:23:34.807

preg_match 只抓住第一个。如果您想要所有这些，请使用 preg_match_all。

**但是**：如果这确实是确切的用例，请改用explode()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:41:45.137

也许是这样的：

```
preg_match_all('(/[^/]+)', $str, $matches); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T04:49:00.027

您尝试对动态捕获组进行的操作在某些正则表达式风格中是可能的（例如 C# -[具有可变数量组的正则表达式？](https://stackoverflow.com/questions/5018487/regular-expression-with-variable-number-of-groups)），但不幸的是在 PHP 中不行。

# iphone - 有没有办法在按下 UIButton 时获取用户触摸的位置？

> ID：11911871
> 
> 赞同：5
> 
> 时间：2012-08-11T04:21:08.457
> 
> 标签：iphone, ios, uiimageview, uibutton

当我的用户在按住 UIButton 的同时拖动手指时，我可以在该点获取手指的触摸位置吗？如果我不能这样做，我似乎可以创建一个 UIImageView 并赋予它按钮质量。在此之后，我将实现开始、移动、结束的方法。

这些方法；但是，不要在触摸 UIButton 时运行。

我需要这个的原因是因为我想找出触摸拖动外部运动的方向，以及其他各种原因，但如果这是不可能的，我认为我将不得不创建 UIImageViews。

另外，我不继承 UIButton，我太初学者了，无法处理苹果集群。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-11T04:27:42.720

你应该遵循这个：

```
[myButton addTarget:self action:@selector(dragHandler:withEvent:) forControlEvents:UIControlEventTouchDragInside];
[myButton addTarget:self action:@selector(dragHandler:withEvent:) forControlEvents:UIControlEventTouchDragOutside];

-(void)dragHandler:(UIButton *)sender withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    NSLog(@"touchInfo:%@", NSStringFromCGPoint([touch locationInView:self.view]);
} 
```

# c# - 从 WCF 服务检索元数据时出错

> ID：11911875
> 
> 赞同：0
> 
> 时间：2012-08-11T04:21:30.813
> 
> 标签：c#, wcf, wcf-endpoint

我创建了一个非常简单的 WCF 服务，但由于某种原因，我遇到了`svcutil`. 我正在使用以下命令：

```
svcutil http://localhost:8098/IceVSServer/service?wsdl 
```

我得到以下输出：

```
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 4.0.30319.1]
Copyright (c) Microsoft Corporation.  All rights reserved.

Attempting to download metadata from 'http://localhost:8098/IceVsServer/service?wsdl' using WS-Metadata Exchange or DISCO.
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 4.0.30319.1]
Copyright (c) Microsoft Corporation.  All rights reserved.

Error: Cannot obtain Metadata from http://localhost:8098/IceVsServer/service?wsdl

If this is a Windows (R) Communication Foundation service to which you have acce
ss, please check that you have enabled metadata publishing at the specified addr
ess.  For help enabling metadata publishing, please refer to the MSDN documentat
ion at http://go.microsoft.com/fwlink/?LinkId=65455.

WS-Metadata Exchange Error
    URI: http://localhost:8098/IceVsServer/service?wsdl

    Metadata contains a reference that cannot be resolved: 'http://localhost:8098/IceVsServer/service?wsdl'.

There was no endpoint listening at http://localhost:8098/IceVsServer/service
?wsdl that could accept the message. This is often caused by an incorrect addres
s or SOAP action. See InnerException, if present, for more details.

The remote server returned an error: (404) Not Found.

HTTP GET Error
    URI: http://localhost:8098/IceVsServer/service?wsdl

There was an error downloading 'http://localhost:8098/IceVsServer/service?wsdl'.

The request failed with HTTP status 404: Not Found.

If you would like more help, type "svcutil /?" 
```

该错误似乎表明我没有 MEX 端点。我确实这样做了，事实上，如果我将 URL 放入浏览器，XML 就会立即出现。

这是我的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="IceVSService.IceVsService" behaviorConfiguration="IceVsServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8098/IceVsService/service"/>
          </baseAddresses>
        </host>
        <!-- this endpoint is exposed at the base address provided by host: http://localhost:8098/IceVsService/service  -->
        <endpoint address=""
                  binding="wsHttpBinding"
                  contract="IceVSService.IIceVersioningSystem" />
        <!-- the mex endpoint is explosed at http://localhost:8098/IceVsService/service/mex -->
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="IceVsServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:38:09.187

你`HttpGet`对`Mex`. 这是发布服务详细信息的两种不同方式 - “ `metadata exchange format`”（MEX）或“ `web service description language`”（WSDL）。

在您的配置中，您已经定义了两者；但是您还没有定义`httpgeturl`属性，因此它将被视为空字符串。所以你的 wsdl 地址将是：`http://localhost:8098/IceVsService/service?wsdl` 而不是`http://localhost:8098/IceVsServer/service`（IceVsServer 没有在任何地方定义）。

Your mex address will also work with svcutil: `http://localhost:8098/IceVsService/service/mex`

# c# - 递归对象导致 StackService.Redis 客户端方法 Store() 上的堆栈溢出

> ID：11911876
> 
> 赞同：1
> 
> 时间：2012-08-11T04:21:47.830
> 
> 标签：c#, asp.net-mvc-3, nosql, redis, servicestack

我有两个 POCO 类（Account 和 Invoice），如您所见（下面是这些类的模型），它们是递归的。

当我传入带有帐户属性集的发票对象，然后尝试使用 redis 客户端存储它时，它会由于递归而导致堆栈溢出。下面是我如何拨打电话的示例。

```
CachingService.Store<Invoice>(invoiceObj);

public class CachingService {
    // ....
    public static void Store<T>(T obj)
    {
        using (var client = _redisClientsManager.GetClient())
        {   
            var typedClient = client.GetTypedClient<T>();
            typedClient.Store(obj);
        }
    }
} 
```

我的 POCO 课程示例：

```
public class Account
{
    public string Name { set; get; }
    public bool IsActive { set; get; }

    public virtual ICollection<Invoice> Invoices { set; get; }
}

public class Invoice
{
    public bool IsPaid { set; get; }
    public DateTime? LastSent { set; get; }
    public int AccountId { set; get; }

    public virtual Account Account { set; get; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:37:44.360

大多数序列化程序（包括[ServiceStack](http://www.servicestack.net/)）不支持循环引用。这是设计 DTO 时的主要反模式。

要解决此问题，您想告诉[ServiceStack.Text 的序列化](https://github.com/ServiceStack/ServiceStack.Text)程序忽略序列化的该属性，您可以使用 [IgnoreDataMember] 属性或将其更改为不是公共属性或将其更改为方法。

# java - 在实体手机上按下设置/菜单按钮时创建菜单/选项

> ID：11911878
> 
> 赞同：0
> 
> 时间：2012-08-11T04:22:23.917
> 
> 标签：java, android, menu, settings, options

我有菜单的标准代码：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

我想要做的是有 2 个选项：1 用于设置 1 用于关于我们

如果您能帮我编写代码，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:44:57.810

您需要在 /res/menu 目录中创建 activity_main.xml。它看起来像这样：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/settings"
        android:title="Settings"
        android:icon="@drawable/settings_icon" />
    <item android:id="@+id/about"
        android:title="About"
        android:icon="@drawable/about_icon" />
</menu> 
```

请注意，您还应该在 /res/drawable 目录中包含图标资源 settings_icon.png 和 about_icon.png。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:09:42.283

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.add_account, menu);
    return true;
} 
```

# c - 奇怪的 strtok 行为

> ID：11911884
> 
> 赞同：1
> 
> 时间：2012-08-11T04:23:41.917
> 
> 标签：c, strtok

```
char line[255];
char *token = NULL;
char *line2 = NULL;
char *temporaryToken = NULL;

if( scanf(" %[^\n]", line) > 0)
    token = strtok( line, ";" ); //divide the line by ;
    do
    {
        line2 = token;
        temporaryToken = strtok(line2, " ");
        do
        {
            //divide the line2 by spaces into command and args, not the question here]
            temporaryToken = strtok( NULL, " " );
        }while (temporaryToken != NULL );
        token = strtok( NULL, ";" );
    }while(token != NULL); 
```

顺便说一句，这不是我的逐字代码，只是它如何设置的一个例子

在我的程序中，当我在第二次拆分之前打印“令牌”变量时，它将打印出所有内容，直到 ; 特点。

例如，假设 stdIn 输入“ls -la; mkdir lololol; ls -la”，它会打印“ls -la”。但是，在第二次拆分之后，打印“token”只会打印“ls”。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T05:11:39.453

`strtok`修改原始字符串。如果你想混合这样的调用，你要么需要复制，要么使用`strtok_r`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:10:22.377

有两个问题`strtok()`。

1.  它修改其输入字符串。
2.  一次只能激活一组`strtok()`呼叫。

我认为你的问题是后者。您在代码中还有一个缩进问题：

```
if (scanf(" %[^\n]", line) > 0)
    token = strtok( line, ";" );
do
{
    line2 = token;
    temporaryToken = strtok(line2, " ");
    do
    {
        //divide the line2 by spaces into command and args, not the question here]
        temporaryToken = strtok(NULL, " ");
    } while (temporaryToken != NULL);
    token = strtok( NULL, ";" );
} while(token != NULL); 
```

您可能打算将其阅读为：

```
if (scanf(" %[^\n]", line) > 0)
{
    token = strtok(line, ";");
    do
    {
        line2 = token;
        temporaryToken = strtok(line2, " ");
        do
        {
            //divide the line2 by spaces into command and args, not the question here]
            temporaryToken = strtok(NULL, " ");
        } while (temporaryToken != NULL);
        token = strtok(NULL, ";");
    } while (token != NULL);
} 
```

假设这是您想要的，您仍然会遇到一个问题，即有一个`strtok()`正在运行`line`，然后另一个正在运行`line2`。问题是，循环`line2`完全破坏了`line`. 您不能将嵌套循环与`strtok()`.

如果您必须使用类似的东西[`strtok()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok.html)，那么寻找 POSIX[`strtok_r()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok_r.html)或 Microsoft 的[`strtok_s()`](https://msdn.microsoft.com/en-us/library/ftsafwz3.aspx)（但请注意，C11 标准附件 K 版本`strtok_s()`是不同的 - 请参阅[您使用 TR 24731 '安全' 功能吗？](https://stackoverflow.com/questions/372980/)）。

```
if (scanf(" %[^\n]", line) > 0)
{
    char *end1;
    token = strtok_r(line, ";", &end1);
    do
    {
        char *end2;
        line2 = token;
        temporaryToken = strtok_r(line2, " ", &end2);
        do
        {
            //divide the line2 by spaces into command and args, not the question here]
            temporaryToken = strtok_r(NULL, " ", &end2);
        } while (temporaryToken != NULL);
        token = strtok_r(NULL, ";", &end1);
    } while (token != NULL);
} 
```

* * *

### 关于评论

当您使用`strtok()`或其亲属之一时，输入字符串将被修改，如果您有多个分隔符，您将无法判断存在哪个分隔符。您可以使用字符串的副本，并进行比较（通常基于字符串开头的偏移量）。

在使用范围内`strtok_r()`，上述解决方案“有效”。这是一个测试程序来演示：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char line[1024];

    if (scanf(" %[^\n]", line) > 0)
    {
        char *end1;
        char *token;
        printf("Input: <<%s>>\n", line);
        token = strtok_r(line, ";", &end1);
        do
        {
            char *end2;
            char *line2 = token;
            char *temporaryToken;
            printf("Token1: <<%s>>\n", token);
            temporaryToken = strtok_r(line2, " ", &end2);
            do
            {
                printf("Token2: <<%s>>\n", temporaryToken);
                //divide the line2 by spaces into command and args, not the question here]
                temporaryToken = strtok_r(NULL, " ", &end2);
            } while (temporaryToken != NULL);
            token = strtok_r(NULL, ";", &end1);
        } while (token != NULL);
    }

    return 0;
} 
```

示例输入和输出：

```
$ ./strtok-demo
ls -la; mkdir lololol; ls -la
Input: <<ls -la; mkdir lololol; ls -la>>
Token1: <<ls -la>>
Token2: <<ls>>
Token2: <<-la>>
Token1: << mkdir lololol>>
Token2: <<mkdir>>
Token2: <<lololol>>
Token1: << ls -la>>
Token2: <<ls>>
Token2: <<-la>>
$ 
```

### 替代使用`strcspn()`和`strspn()`

如果不想拆掉原来的字符串，就必须使用`strtok()`族以外的其他功能。功能`strcspn()`和`strspn()`适用性；它们是标准 C（C89 和更高版本）的一部分，尽管比其他一些函数鲜为人知。但他们很适合这项任务。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static char *substrdup(const char *src, size_t len);

int main(void)
{
    char line[1024];

    if (scanf(" %[^\n]", line) > 0)
    {
        char *start1 = line;
        size_t len1;
        printf("Input: <<%s>>\n", line);
        while ((len1 = strcspn(start1, ";")) != 0)
        {
            char *copy = substrdup(start1, len1);
            char *start2 = copy;
            size_t len2;
            printf("Token1: %zd <<%.*s>>\n", len1, (int)len1, start1);
            printf("Copy: <<%s>>\n", copy);
            start2 += strspn(start2, " ");      // Skip leading white space
            while ((len2 = strcspn(start2, " ")) != 0)
            {
                printf("Token2: %zd <<%.*s>>\n", len2, (int)len2, start2);
                start2 += len2;
                start2 += strspn(start2, " ");
            }
            free(copy);
            start1 += len1;
            start1 += strspn(start1, ";");
        }
        printf("Check: <<%s>>\n", line);
    }

    return 0;
}

#include <assert.h>

static char *substrdup(const char *src, size_t len)
{
    char *copy = malloc(len+1);
    assert(copy != 0);              // Apalling error handling strategy
    memmove(copy, src, len);
    copy[len] = '\0';
    return(copy);
} 
```

示例输入和输出：

```
$ strcspn-demo
ls -la; mkdir lololol; ls -la
Input: <<ls -la; mkdir lololol; ls -la>>
Token1: 140734970342872 <<>>
Copy: <<ls -la>>
Token2: 2 <<ls>>
Token2: 3 <<-la>>
Copy: << mkdir lololol>>
Token2: 5 <<mkdir>>
Token2: 7 <<lololol>>
Copy: << ls -la>>
Token2: 2 <<ls>>
Token2: 3 <<-la>>
Check: <<ls -la; mkdir lololol; ls -la>>
$ 
```

这段代码回到了更舒适的`while`循环，而不是需要使用`do-while`循环，这是一个好处。

# python - Django：模型 max_char 不限制数据库

> ID：11911886
> 
> 赞同：0
> 
> 时间：2012-08-11T04:23:58.970
> 
> 标签：python, django

> **可能重复：**
> [django 模型 CharField：max_length 不起作用？](https://stackoverflow.com/questions/8478054/django-model-charfield-max-length-does-not-work)

我有以下模型：

```
class Draft(models.Model):
    user = models.ForeignKey(User)
    title = models.CharField(max_length=30)
    content = models.TextField() 
```

我设法在我的数据库中获得了以下条目：

```
dfadfadfadsfadfasdfasdfadfadfasdfadfadfffffffffffffffffffffffffffffffffffffdfasdfadfadsfasdf 
```

在我用来查看我的 mysqlite3 数据库的程序中，它将字段列为：

```
title( varchar(30) ) 
```

这怎么可能。如果需要更多信息，请发表评论，我不确定要发布什么，因为我不知道是什么允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:17:29.093

SQLite 不强制 a 的长度`VARCHAR`。见[http://www.sqlite.org/faq.html#q9](http://www.sqlite.org/faq.html#q9)

# css - 子 div 距离与父级左侧齐平 1 个像素

> ID：11911887
> 
> 赞同：3
> 
> 时间：2012-08-11T04:24:10.563
> 
> 标签：css, html

我有一个父 div，里面有一个子 div（子 div 充当弹出菜单）。当子 div 弹出时，它有一个很小的空间，因此它不会与父 div 的左侧对齐。

这是样式：

```
.ButtonContent
{
    display:none;
    border: solid 1px black;
    width:275px;
    position:absolute;
    left:0;
    margin:0px;
    padding:0px;
    float:left;
    background-color:#FFF;
    border-radius:0 0 4px 4px;
}
.Button
{
    margin:0px;
    padding:0px;
    border: solid 1px black;
    border-radius:4px 4px 4px 4px; 
    width:276px;
    text-align:center;
    position:relative;
} 
```

这是HTML：

```
<div class="Button" id="Button1" >
    Add <br />
    <div class="ButtonContent" id="ButtonContent1">
         Date purchased:
         <div class="Date" id="datePurchased1"></div><br/>
         Purchase Location:<br />
         <input type="text" maxlength="150" /><br />
         <a>Add</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:40:23.697

由于您有一个绝对定位的元素*在*一个相对定位*的带有边框*的元素内，`left:0`因此将其定位在边框内，使其看起来远离一个像素。

快速修复：使它们具有相同的宽度并`left:-1px;`改为使用。

[http://jsfiddle.net/RtGfc/](http://jsfiddle.net/RtGfc/)

在我看来，你不需要所有这些 CSS 来实现你想要的外观，也许是一个更好的修复（不接触你的 HTML）：

```
.ButtonContent
{
    border-top: solid 1px black;
    background-color:#FFF;
    border-radius:0 0 4px 4px;
}
.Button
{
    border: solid 1px black;
    border-radius:4px; 
    width:275px;
    text-align:center;
}​ 
```

[http://jsfiddle.net/RtGfc/1/](http://jsfiddle.net/RtGfc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:40:09.697

这是两件事：从外部的 1px 边框`<div>`和您选择将一个放在另一个内部的事实`<div>`。

1px 边框位于 的最左侧标记之外`left: 0px;`。如果删除边框，它可以工作。

演示：http: [//jsfiddle.net/MmwYv/](http://jsfiddle.net/MmwYv/)

您希望 .ButtonContent（内部`<div>`.ButtonContent ）显示在外部 .Button 外部`<div>`。这会引起问题，因为内部的会受到外部测量的限制。如果您将 .ButtonContent 放在外面，它也可以工作。

演示：http: [//jsfiddle.net/NxCp4/](http://jsfiddle.net/NxCp4/)

# javascript - 为什么我的引导程序的下拉菜单不起作用？

> ID：11911888
> 
> 赞同：2
> 
> 时间：2012-08-11T04:24:10.970
> 
> 标签：javascript, drop-down-menu, twitter-bootstrap

我按照[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)上的说明在导航栏中启用下拉列表，但没有这样做。我似乎无法显示我的下拉列表。我的代码也和网站上的demo一样。谁能帮我解决这个问题？以下是代码：

```
<ul class="nav">
    <li class="dropdown" id="d1">
            <a class="dropdown-toggle" data-toggle="dropdown" href="d1"  >
                Sub-User Management
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li><a href=<%=subusers_url%>>Sub-Users</a></li>
                <li><a href=<%=monitor_records_url%>>Monitors</a></li>
                <li class="divider"></li>
            </ul>
        </li>
    </ul> 
```

**应用程序.js**

```
$('.dropdown-toggle').dropdown() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:09:45.790

像许多其他人问这个问题一样，我花了几个小时试图弄清楚这一点。如果您的下拉菜单不起作用，这可能是错误的：

我是引导程序的新手，在我的情况下，我在这里使用引导程序演示作为模型：

[引导演示](http://twitter.github.com/bootstrap/examples/carousel.html)

但只有在我遵循了基本的 boostrap 安装之后。

因此我安装了“bootstrap.js”文件。检查代码并注意，在这个演示中，一系列 js 脚本位于文档末尾，但默认的“bootstrap.js”不是其中之一。删除它使我的下拉菜单正常工作。

它也有可能在你保留'bootstrap.js'并摆脱其他人的地方以另一种方式工作。这可能是一个更好的解决方案。

希望这可以帮助像我这样的其他可怜的混蛋。祝你所有的项目都好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:55:00.923

看起来不错...但尝试将下拉菜单链接放在引号中。
我也将第一个更改`href`为只是`"#"`

```
<ul class="nav">
    <li class="dropdown" id="d1">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#"  >
                Sub-User Management
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li><a href="<%=subusers_url%>">Sub-Users</a></li>
                <li><a href="<%=monitor_records_url%>">Monitors</a></li>
                <li class="divider"></li>
            </ul>
    </li>
</ul> 
```

并确保您已包含 bootstrap-dropdown.js 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T23:23:27.917

我在 WordPress 网站中使用 Bootstrap 时遇到了同样的问题。事实上，这是因为在我的代码中，我包含了这样的 javascript.js 文件：

```
<script src="js/bootstrap.min.js"></script> 
```

我要做的就是改写如下：

```
<script src="<?php echo get_template_directory_uri(); ?>/js/bootstrap.min.js"></script> 
```

因此，请确保正确包含 Bootstrap 的 javascript.js 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:35:12.777

我终于能够解决这个问题了！我所有的代码都很完美，只是我在 Rails 中创建应用程序时必须更改一些东西。

对于 Rails（开发模式），在 application.js 中，您需要在调用 bootstrap 之前调用 jquery。

```
//= require jquery
//= require bootstrap
//= require jquery_ujs
//= require_tree . 
```

但是，对于 Rails（生产模式），在 application.js 中，您需要在调用 jquery 之前调用 bootstrap。

```
//= require bootstrap
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

但是，我仍在研究为什么会这样。无论如何，它有效！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T19:09:10.980

我将您的代码复制粘贴到 jsfiddle 中，并且下拉菜单有效... [http://jsfiddle.net/hajpoj/Hf8Xw/3/](http://jsfiddle.net/hajpoj/Hf8Xw/3/)

所以我认为问题是别的。仔细检查以确保页面加载了 boostrap-drodown.js（查看页面的源代码并验证您确实在 html 源代码中看到了这一行）。

```
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script> 
```

还可以尝试重新启动服务器，检查资产源路径等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T07:44:30.627

在我的 rails3 应用程序中，我只是剪切了与下拉菜单相关的所有代码，然后将此代码粘贴到名为 dropdown.js 的新文件中，然后在 application.js 中需要此文件，这样我的应用程序在开发和生产也。在生产中的 jquery 之前需要 bootstrap.js（如上面的 user192249）可能会破坏使用 js 的应用程序的其他部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-11T12:59:46.130

确保您使用的是最新的 JQuery

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-07T02:26:22.900

实际上，您包含“data-toggle="dropdown"，因此不需要“$('.dropdown-toggle').dropdown()”，这两个做了同样的事情！

并且记住，不要忘记在它的基础上导入 jQuery.js、bootstrap.js！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-12-24T02:13:38.107

```
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script> 
```

看看这段代码。可能在页面末尾，您可能需要更改 src 链接。那么它可能会起作用。

# java-me - J2ME 中 .db 文件中的 RecordStore 名称更改和空值

> ID：11911890
> 
> 赞同：0
> 
> 时间：2012-08-11T04:25:12.507
> 
> 标签：java-me, rms, midp-2.0

在我的应用程序中，我创建了名为“UserData”的 RecordStore，但是当我运行模拟器时，数据库保存在名为“00000003-User-Data.db”的 appdb 文件夹中，当我打开这个文件时，那里每条记录都有很多空值。

将 db 文件保存为与 RecordStore 名称相同的解决方案是什么？如何从 db 文件中删除空值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:41:51.257

您不必担心 RecordStore 的文件名。它不适用于设备上的 MIDP 应用程序。

# objective-c - UITextView“字段”

> ID：11911891
> 
> 赞同：0
> 
> 时间：2012-08-11T04:25:40.300
> 
> 标签：objective-c, cocoa-touch, twitter, uitextview, counter

我想要一个类似于 Twitter 的文本

我目前正在使用 UITextView，因为它具有多行支持。我有点想出如何使用一个标签来计算字符并让用户了解添加或删除的任何字符的最新信息。

空的：

![空字段](../Images/b207b3db51fc36167710d137137c60ad.png)

带文字：

![带文字](../Images/bb59a9bfe7238d97f0d2f9fd18b04f98.png)

但是，我遇到的问题是，当我在视图中复制或粘贴任何文本时（例如，如果我突出显示所有文本，如第二张图片所示）并删除它，计数器将不会更新。或者如果我粘贴任何文本，计数只会减少一个字符，尽管文本字段限制仍然保持正确，只是计数器不再与其同步。

代码： http: [//pastebin.com/UK91Ccbb](http://pastebin.com/UK91Ccbb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:21:36.423

在 viewDidLoad ：

```
charactersLeft = 140;
characterCountLabel.text = [NSString stringWithFormat:@"%d",charactersLeft]; 
```

现在使用它效果很好：

```
- (void)textViewDidChange:(UITextView *)textView{

NSString *textString = textView.text;
int chars = [textString length];

if (chars <= 140) {
    [characterCountLabel setText:[NSString stringWithFormat:@"%d",(140 - chars)]];
}
}

-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
if([text isEqualToString:@"\n"])
    [textView resignFirstResponder];

if (textView.text.length == 140 && [text isEqualToString:@"\n"]) {

    [textView resignFirstResponder];
}

else if ((textView.text.length) >= 140 && range.length == 0){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"You have exceeded the characters limit." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    return NO; // return NO to not change text

}

return YES; 
```

}

请注意，这里我使用了 returnType 键来退出键盘。您可以将其更改为照常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:42:31.450

UITextView 有一个委托方法

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text; 
```

每次将字符插入 UITextView 时都会调用它。在此方法中，设置计数器 UILabel 中的文本长度如下

```
counterlabel.text = [NSString stringWithFormat:@"%i", textView.text.length]; 
```

如果长度在范围内，即小于或等于 140，则在方法结束时返回 YES，否则返回 NO。

**更新：** ..
限制为 140 个字符。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    return textView.text.length <= 140;

} 
```

处理选择和计数字符时的文本删除。

```
- (void)textViewDidChange:(UITextView *)textView
{
    count.text = [NSString stringWithFormat:@"%i", (140- textView.text.length)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:45:21.353

```
NSLog(@"You added a character");
charactersLeft--; 
```

我认为这里的问题是你应该写：

```
charactersLeft -= text.length; 
```

# css - CSS 半径和悬停填充整个区域

> ID：11911894
> 
> 赞同：0
> 
> 时间：2012-08-11T04:26:46.547
> 
> 标签：css

我正在尝试创建一个选项卡式导航。

我无法让悬停颜色填充标签的整个区域（左上/右上圆角）。现在悬停只覆盖选项卡内的链接文本，悬停没有圆角。

我希望悬停完全覆盖选项卡的区域 - 圆角和所有。

HTML：

```
<div id="tabbed-widget-2" class="widget tabbed-widget">
    <div class="widget-wrap">
        <div class="tw-tabs ui-tabs ui-widget ui-widget-content ui-corner-all">
            <ul class="tw-tabbed-nav ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
                <li id="tab-link-2-0" class="ui-state-default ui-corner-top">
                    <a href="#tw-content-2-0">Welcome</a>
                </li>
                <li id="tab-link-2-1" class="ui-state-default ui-corner-top">
                    <a href="#tw-content-2-1">Topics</a>
                </li>
                <li id="tab-link-2-2" class="ui-state-default ui-corner-top">
                    <a href="#tw-content-2-2">Archives</a>
                </li>
                <li id="tab-link-2-3" class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
                    <a href="#tw-content-2-3">Social</a>
                </li>
            </ul> 
```

CSS

```
#tab-link-2-0, #tab-link-2-1, #tab-link-2-2, #tab-link-2-3  {
        background: green;
        padding: 2px 12px;
        margin: 0 8px 0 0;
        -moz-border-radius: 8px 8px 0 0;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
    }   

#tab-link-2-0 a:hover, #tab-link-2-1 a:hover, #tab-link-2-2 a:hover, #tab-link-2-3 a:hover {
        background: none repeat scroll 0 0 #ffab35;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:51:52.100

我已经修改了你的代码，它工作正常::--

```
<div id="tabbed-widget-2" class="widget tabbed-widget">
    <div class="widget-wrap">
    <div class="tw-tabs ui-tabs ui-widget ui-widget-content ui-corner-all">
    <ul class="tw-tabbed-nav ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
    <li id="tab-link-2-0" class="ui-state-default ui-corner-top">
    <a href="#tw-content-2-0">Welcome</a>
    </li>
    <li id="tab-link-2-1" class="ui-state-default ui-corner-top">
    <a href="#tw-content-2-1">Topics</a>
    </li>
    <li id="tab-link-2-2" class="ui-state-default ui-corner-top">
    <a href="#tw-content-2-2">Archives</a>
    </li>
    <li id="tab-link-2-3" class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
    <a href="#tw-content-2-3">Social</a>
    </li>
    </ul> 
```

CSS:--

```
#tab-link-2-0 a , #tab-link-2-1 a, #tab-link-2-2 a, #tab-link-2-3 a  {
        background: green;
        padding: 2px 12px;
        margin: 0 8px 0 0;
        -moz-border-radius: 8px 8px 0 0;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
      display:block;
    }   

#tab-link-2-0 a:hover, #tab-link-2-1 a:hover, #tab-link-2-2 a:hover, #tab-link-2-3 a:hover {
        background: none repeat scroll 0 0 #ffab35;
    } 
```

小提琴链接：--

[http://jsfiddle.net/Cqf2R/3/](http://jsfiddle.net/Cqf2R/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:43:29.810

绿色背景用于 li 标签，您设置了样式：hover 用于标签不是 li
并且`<a>`是一个内联元素添加`display:block`到它
[http://tinkerbin.com/aqHTscEE](http://tinkerbin.com/aqHTscEE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:47:06.437

您需要更改`#tab-link-2-0 a:hover`为`#tab-link-2-0:hover`等。这是一个[jsFiddle](http://jsfiddle.net/h5Ssh/)。另外，这里有一些源代码：

```
#tab-link-2-0:hover, #tab-link-2-1:hover, #tab-link-2-2:hover, #tab-link-2-3:hover {
    background: none repeat scroll 0 0 #ffab35;
}​ 
```

而且我不确定为什么没有为您显示圆角，我正在使用 Chrome，我可以看到圆角边框。

# php - 正则表达式匹配和分组结果

> ID：11911895
> 
> 赞同：0
> 
> 时间：2012-08-11T04:26:51.383
> 
> 标签：php, regex

我正在开发一个预处理器，我有一段代码需要匹配。

示例输入：

```
padding: eval((20%/2)+5)) eval(30);
width: eval(100%/2);
font-family: font-find("Helvetica"); 
```

我需要根据提供的字符串对匹配项进行匹配和分组。预期输出应该是：

```
[0] = eval((20%/2)+5)
[1] = eval(30)
[2] = eval(100%/2)
[3] = font-find("Helvetica") 
```

括号内的项目的内容可以是任何值。很容易匹配输出 2 - 3 的项目，但我无法对 0 和 1 的值进行分组。

我正在用 PHP 编写代码。“eval”和“font-find”是任意函数。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:30:24.473

```
preg_match_all('/(\w+\(\S*\))/', $str, $matches); 
```

# java - 抽象类场景中的私有构造函数

> ID：11911905
> 
> 赞同：-2
> 
> 时间：2012-08-11T04:28:26.563
> 
> 标签：java, constructor, private, private-members

是否有任何可行的解决方案在抽象类中有私有构造函数..请告知

```
public abstract class BaseClass
{
    private String member;

    private BaseClass(String member)
    {
        this.member = member;
    }

    ... abstract methods...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:07:54.713

抽象类可以有一个私有构造函数。但是那个类不能被另一个类扩展。而不是在抽象类中添加静态内部类并扩展该抽象类。

```
 abstract class  Base{
public abstract void set();

private Base(){
System.out.println("Private Constructor!");
}
static class Derived extends Base{
public void set(){
System.out.println("set() method implemented!");
}
}
public static void main(String[] args){
new Base.Derived().set();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T04:37:04.220

这违背了抽象类的目的：

1.  抽象类必须是子类才能使用。

2.  如果一个方法是私有的，子类就看不到它。

∴它实际上是无法到达的。

所以不行。

* * *

*编辑*@yshavit 在这个逻辑中发现了一个漏洞，这是非常正确的 - 看看他的评论（这可能应该是问题的答案？）。

# vb.net - 如何将多个文本框中的数字相加，同时将这些框的总和放在一个没有按钮的单独框中

> ID：11911912
> 
> 赞同：-2
> 
> 时间：2012-08-11T04:30:24.070
> 
> 标签：vb.net

如何将多个文本框中的数字相加，同时将这些框的总和放在一个没有按钮的单独框中。好的，我正在寻找代码来对多个框（在这种情况下为 2 个）中的数字求和，并自动用总和填充另一个框，而无需单击按钮或任何东西。我说的是在前两个框中输入数字时在第三个框中显示总和。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:34:57.977

对的，这是可能的。您需要为[TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged%28v=vs.80%29.aspx)事件添加事件处理程序。为放置加数的两个文本框添加处理程序，并在事件处理程序中更新总和。该链接有一个将文本解析为数字并对其进行处理的示例。在您的情况下，您需要解析两个文本框，您可以共享处理程序并每次解析两个框，或者为每个框添加单独的处理程序并更新事件中的成员变量并更新成员变量的总和（添加在更新成员变量后调用的方法`UpdateSum`或类似的方法）。

我是一名 C++/C# 程序员，所以我的 VB 语法可能略有偏差

```
Private Sub txtMonT_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Handles txtMonT.TextChanged
    Dim number1 As Double
    Dim number2 As Double

    If Double.TryParse(txtMon1.Text, number1)
        And Double.TryParse(txtMon2.Text, number2) Then
        txtMonResult.Text = (number1 + number2).ToString()
    End If
End Sub 
```

编辑 - UpdateSum 方法的示例 注意：`_addend1`和`_addend2`被假定为`Private`包含的类的成员，`UpdateSum`并且它们是类型`Double`并且已在两个文本框的事件处理程序中设置。假设`UpdateSum`是从那些处理程序中调用的。

```
Private Sub UpdateSum()
    Dim result As Double
    result = _addend1 + _addend2
    txtMonResult.Text = result.ToString()
End Sub 
```

# c# - 使用 c# ， wmi 检索远程机器详细信息

> ID：11911926
> 
> 赞同：0
> 
> 时间：2012-08-11T04:33:53.577
> 
> 标签：c#, asp.net, wmi, wmic

我正在使用 c# 和 wmi 检索机器详细信息。我正在使用以下代码来检索信息：

```
 ManagementScope scope =new ManagementScope(@"\\"+strIPAddress+@"\root\cimv2");
        SelectQuery query = new SelectQuery();
        query.QueryString = "select  * from Win32_OperatingSystem";           
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
        ManagementObjectCollection queryCollection = searcher.Get();
        foreach (ManagementObject m in queryCollection)
        {
         //////////////////////////////////
        } 
```

它适用于 windows 操作系统，但不适用于 linux 或 Citrix 服务器。

我也试过下面这段代码：

```
 string strURL="http://www.google.com"; 

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(strURL);
        try
        {
            HttpWebResponse response =(HttpWebResponse) request.GetResponse();
            string strServer= response.Server;           
        }
        catch (WebException wex)
        {
          // Safe cast to HttpWebResponse using 'as', will return null if unsuccessful
            var httpWebResponse = wex.Response as HttpWebResponse;
            if (httpWebResponse != null)
            {
                var httpStatusCode = httpWebResponse.StatusCode;

                // HttpStatusCode is an enum, cast it to int for its actual value
                var httpStatusCodeInt = (int)httpWebResponse.StatusCode;
            }
        } 
```

它没有给我远程服务器操作系统名称，而是给我 IIS 名称。

当我通过互联网搜索时，我发现了以下站点：

[http://uptime.netcraft.com/](http://uptime.netcraft.com/)

任何人都可以检索信息的地方。谁能告诉我它是如何工作的，或者我们如何使用 c# 获取这些详细信息。

# install4j - Install4j 创建用户数据目录

> ID：11911929
> 
> 赞同：2
> 
> 时间：2012-08-11T04:34:45.320
> 
> 标签：install4j

Install4j 具有系统变量 sys.docsdir，它将在适当的位置创建数据目录。但是我找不到要添加到将创建一个空目录的安装的操作。什么是动作？如果我需要创建自定义脚本，一个示例会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:25:59.177

安装程序变量`sys.docsdir`包含 Windows 上用户特定的“文档”文件夹的路径，它不会创建目录。

要将文件安装到`sys.docsdir`目录的子文件夹中，请在“文件”->“定义分发树”下添加一个新根，`${installer:sys.docsdir}/myfolder`并在该文件夹下添加文件。

要安装到在运行时解析的文件夹，安装根目录的名称可以包含您自己的安装程序变量，例如`${installer:myDataDir}`. 在这种情况下，您必须在“安装文件”操作运行之前定义该变量（例如使用“设置变量”操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:39:11.653

您可以在以下链接中找到您的答案：

[http://blog.ej-technologies.com/2010/12/more-installation-options-with.html](http://blog.ej-technologies.com/2010/12/more-installation-options-with.html)

希望它可以帮助你。

# tridion - 在 Tridion Ribbon 中使用 Usercontrol 创建按钮

> ID：11911933
> 
> 赞同：0
> 
> 时间：2012-08-11T04:36:24.040
> 
> 标签：tridion, tridion-2011

我创建了一个用户控件，用于有两个按钮一个在另一个下方

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ViewItemsGroup.ascx.cs" Inherits="SDL.Examples.UI.Controls.ViewItemsGroup" %>
<%@ Import Namespace="Tridion.Web.UI" %> 
<c:RibbonItemsGroup runat="server"  ID="RibbonItemsGroup">   
  <c:RibbonButton runat="server" CommandName="ViewStaging" Title="View in Staging" Label="View In Staging" IsSmallButton="true" ID="ViewStagingBtn" />   
  <c:RibbonButton runat="server" CommandName="ViewLive" Title="View in Live" Label="View in Live" IsSmallButton="true" ID="ViewLiveBtn" /> 
</c:RibbonItemsGroup> 
```

在 extension.config 我指的是用户控件，如下所示。

```
<ext:extension assignid="ViewItemsGroup" groupid="EditGroup" name="View" pageid="HomePage" insertbefore="PublishGroup">  
  <ext:group>~/Controls/ViewItemsGroup.ascx</ext:group> 
  <ext:dependencies>      
    <cfg:dependency>My.Theme</cfg:dependency>
  </ext:dependencies>  
  <ext:apply>    
    <ext:view name="DashboardView">   
      <ext:control id="DashboardToolbar" /> 
    </ext:view>   
    <ext:view name="PageView">   
      <ext:control id="ItemToolbar" />  
    </ext:view>  
  </ext:apply>
</ext:extension> 
```

1.  我是否还需要在 extension.config 中包含我的按钮详细信息（在用户控件中提到的 ID）？是否需要添加`<ext:command> ---- </ext:command>` 或其他任何地方。

2.  创建的用户控件，我只是与 extension.config、.js 一起放置，并在我的 extension.config 文件中引用 ascx。我需要将我的用户控件放在任何其他文件夹中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T10:37:52.830

1.  在您的 extension.config 中，您指定节点下 ItemsGroup 的依赖项`ext:dependencies`。这应该指向`cfg:group`您引用命令集的位置，该命令集又指向您的 JavaScript 文件。您需要正确地进行这些引用，否则 SDL Tridion UI 框架将不知道在哪里可以找到您的代码。系统就像我们无法施展魔法一样，也没有水晶球。

2.  用户控件也是如此，如果您不将它与配置、JavaScript 和 CSS 等其他扩展文件放在一起，那么 UI 框架将如何找到它。您放置它的位置，您在`ext:group`节点中指定。例如，然后您将其放置在扩展根`~/Controls/MyItemsGroup.ascx`目录中的子目录中。`Controls`

您的配置应该看起来像这样，依赖项指向您在`resources`节点下指定的组：

```
<ext:ribbontoolbars>
  <ext:add>
    <ext:extension assignid="MyGroup" ...>
      <ext:group>~/Controls/MyItemsGroup.ascx</ext:group>
      <ext:dependencies>
        <cfg:dependency>My.Commands</cfg:dependency>
      </ext:dependencies>
      ...
    </ext:extension>
  </ext:add>
</ext:ribbontoolbars> 
```

然后在您的控件中，您直接在其属性中引用该命令，这是`_isAvailable`和`_isEnabled`方法所在的 JavaScript 命令等。该控件将具有以下内容：

```
<c:RibbonItemsGroup runat="server" ID="MyItemsGroup">
  <c:RibbonButton runat="server" 
                  CommandName="MyBtn" 
                  Title="My Title" Label="My Label" 
                  IsSmallButton="true" ID="MyId" />
  ...
 </c:RibbonItemsGroup> 
```

最后，实现您的按钮命令的 JavaScript 将在其命名空间中使用 CommandName：

```
Type.registerNamespace("Extensions");

Extensions.MyBtn = function Extensions$MyBtn() {
  Type.enableInterface(this, "Extensions.MyBtn");
  this.addInterface("Tridion.Cme.Command", ["MyBtn"]);
};

Extensions.MyBtn.prototype._isAvailable = function MyBtn$_isAvailable(selection) {
  return true;
};

Extensions.MyBtn.prototype._isEnabled = function MyBtn$_isEnabled(selection) {
  return this._isAvailable(selection);
};

Extensions.MyBtn.prototype._execute = function MyBtn$_execute(selection) {
  // this is where your code comes
}; 
```

# html - DocBook：如何链接到另一个手册页？

> ID：11911940
> 
> 赞同：2
> 
> 时间：2012-08-11T04:37:15.387
> 
> 标签：html, hyperlink, docbook, manpage

我正在 DocBook 中编写几个手册页。我还想将它们转换为 HTML 以在网络上显示。如何插入从一个手册页到另一个手册页的链接，以使其显示`man`为`target(1)`但在 Web 上显示为指向另一个手册页的超链接，该手册页也已转换为同一目录中的单独 HTML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:13:21.283

我想我已经想通了。您应该`<citerefentry/>`在文档中使用 a ，它会按预期出现在手册页中。它不会在 HTML 文档中超链接，除非您提供生成目标 URL 的方法，您在自定义层中执行该方法。

以下是手册页中“另见”部分的示例文档片段：

```
<refsect1 id="seealso">
    <title>See Also</title>
    <simplelist type="inline">
        <member><citerefentry><refentrytitle>grep</refentrytitle><manvolnum>1</manvolnum></citerefentry></member>
        <member><citerefentry><refentrytitle>awk</refentrytitle><manvolnum>1P</manvolnum></citerefentry></member>
    </simplelist>
</refsect1> 
```

再加上这个自定义模板（另存为`custom.xsl`）

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <!-- Ignore spaces between elements (without this, the URL is "grep    .html" -->
    <xsl:strip-space elements="*"/>

    <!-- Turn citerefentry elements into HTML links -->
    <xsl:param name="citerefentry.link" select="1"/>

    <!-- Code to generate the URL for a given citerefentry element -->
    <xsl:template name="generate.citerefentry.link">
        <xsl:value-of select="refentrytitle"/>
        <xsl:text>.html</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

使用`xmlto`程序处理 DocBook XML，为 HTML 指定自定义层：

```
$ xmlto man input.xml
$ xmlto html-nochunks -m custom.xsl input.xml 
```

在手册页中，这会产生：

```
SEE ALSO
       grep(1), awk(1P) 
```

在 HTML 中它会产生这个：（`<span>`为清楚起见，所有元素都被删除了）

```
<h2>See Also</h2>
<a href="grep.html">grep(1)</a>, <a href="awk.html">awk(1)</a> 
```

生成的实际 URL 可以通过`generate.citerefentry.link`在`custom.xsl`. 上面的示例仅使用`<refentrytitle>`来自 DocBook XML 的值并将“.html”附加到它。

# ruby - 用于测试 Yelp API 的 Oauth 的 Rspec

> ID：11911941
> 
> 赞同：1
> 
> 时间：2012-08-11T04:37:41.670
> 
> 标签：ruby, testing, oauth, rspec, tdd

我正在尝试编写一个 Yelp API 包装器。我正在考虑创建一个处理 OAuth 对象实例化的 Client 类。像这样的东西：

```
class Client
    @site = "api.yelp.com"

    def initialize(options = {})
      @consumer_key = options[:consumer_key]
      @consumer_secret = options[:consumer_secret]
    end

    private

    def consumer
      @consumer ||= OAuth::Consumer.new(@consumer_key, @consumer_secret, {:site => "http://#{@site}"}) 
    end
end 
```

我想知道使用 Rspec 测试这种所需行为的好方法是什么。我完全迷失了如何开始编写我的测试。在这种情况下我将如何测试 OAuth？

# google-chrome - chrome 检查器中的内容脚本是什么

> ID：11911943
> 
> 赞同：18
> 
> 时间：2012-08-11T04:38:52.680
> 
> 标签：google-chrome, web-inspector, content-script

虽然这可能是一件非常基本的事情，但我似乎无法找到这个问题的答案。我看到很多关于`content scripts`. 当我打开并选择`web inspector`时，我看到一个名为. 我看到几个随机数和一些脚本，但我似乎无法弄清楚这些是什么。这些是如何显示的？这些是从哪里来的？我看不到我的服务器提供这些服务。`chrome``sources``content scripts`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-11T05:35:20.747

在 Google Chrome 中，[*内容脚本*](http://developer.chrome.com/extensions/content_scripts.html)是作为浏览器扩展一部分的 JavaScript 文件。它们在网页上的操作很像普通的 javascript，但在受保护的范围内（谷歌称其为“孤立的世界”）。

内容脚本比普通的 javascript 拥有更多的权限，因此，内容脚本 JS 和页面 JS 通常不能相互交互。

查看该***内容脚本*选项卡**时，您将看到由任何扩展添加的脚本（或由在[Chrome](https://stackoverflow.com/tags/userscripts/info)中编译为扩展的用户脚本）以及浏览器内置部分的内容脚本，特别是扩展的 API可以使用。

![内容脚本列表](../Images/698de9bb1de6c8a6ce27ce3faf4c26ba.png)

您可以通过打开扩展选项卡 ( `chrome://chrome/extensions`) 来匹配这些“随机数字”的扩展，然后激活`Developer mode`：

[![匹配的扩展](../Images/6f8f9279bda1f3554374a20e852046a4.png)](https://i.stack.imgur.com/QzTCh.gif)

# eclipse - 无法在 Ubuntu 12.04 上为 Eclipse 获取 SVN

> ID：11911944
> 
> 赞同：1
> 
> 时间：2012-08-11T04:39:00.657
> 
> 标签：eclipse, svn

我正在尝试通过帮助->安装新软件选项卡为 Eclipse 安装 svn 插件，当我在使用选项卡的工作中键入[http://subclipse.tigris.org/update_1.6.x](http://subclipse.tigris.org/update_1.6.x)并按下添加按钮时，我没有看到任何选项，如[http://www.mkyong.com/eclipse/how-to-enable-subversion-svn-in-eclipse-ide/](http://www.mkyong.com/eclipse/how-to-enable-subversion-svn-in-eclipse-ide/)链接中所示。任何想法有什么问题吗？

我在 Ubuntu 12.04 上运行 Eclipse Indigo

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:12:29.503

您应该尝试从 Ubuntu 的软件包管理器（“软件中心”）安装它。
您通常可以确定与操作系统打包的软件都是相同的版本，并且依赖项通常是您的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:45:05.770

选择帮助|安装新软件。

在对话中单击添加

您应该得到“添加站点”对话框。

在名称中，键入子剪辑。对于位置：[http ://subclipse.tigris.org/update_1.6.x](http://subclipse.tigris.org/update_1.6.x)

然后单击“确定”。

这是你在做什么？

# c# - 将 SSIS 包转换为 .NET 应用程序？

> ID：11911945
> 
> 赞同：5
> 
> 时间：2012-08-11T04:39:04.697
> 
> 标签：c#, sql-server, ssis, maintenance

我被要求接管不久前编写的 SSIS 包的所有权。似乎可以进入并修改、编辑和升级此软件包，但对于软件包所做的工作量来说，这似乎也非常麻烦。

我的任务大致是这样的：筛选包，查找特定表中某些特定列的任何用法，更改它们以匹配最新的数据库变更集，并写出一些额外的日志数据以帮助团队诊断任何特定问题。

这对我来说似乎令人生畏，因为 SSIS 包包含大约 3 兆字节的文本、SQL 语句和极其简单（但冗长）的代码路径。我已经花了一段时间双击每个 SSIS 对象并浏览其设置以查看我是否可以发现我被要求维护的列，并且 SSIS 不断抛出连接错误（正确的，因为我的开发环境被阻止从生产数据库中关闭）。

我真的很想考虑将此 SSIS 包转换为 .NET 应用程序，但是我无法找到任何可以帮助我这样做的工具。

是否有人对维护此 SSIS 包或将其转换为适当的应用程序有建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T21:59:04.410

只是为了好玩，我写了一个 SSIS 反编译器。在查看了运行集成服务的 Visual Studio 的 UI 并将其与 .DTSX 文件中的原始 XML 数据进行比较之后，我能够编写一个将 DTSX 文件转换为 C#/.NET 项目的程序。

我将它与一小部分分析数据结合起来，通过追踪有问题的组件，我的 SSIS 包的速度提高了 40%。

似乎对我使用的 SSIS 包工作得很好。也许这会帮助别人。

[https://github.com/tspence/csharp-dessist](https://github.com/tspence/csharp-dessist)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T05:33:51.037

回复那些更喜欢 .NET 而不是 SSIS 的人

SSIS 并不意味着传输少量数据。它可以做到，但是当数据传输量很大，大约 100 到 500 GB 并且涉及相当复杂的业务逻辑时，SSIS 比 .NET 更可取。如果有多个数据文件和多个数据源，那么 SSIS 是不错的选择。如果您有少量的导入或导出，并且用于增强或转换数据的业务逻辑很少，则首选 .Net

不幸的是，没有工具可以将您的 ssis 包转换为 .NET 应用程序，但是有免费工具可以帮助您在不打开包的情况下提供有关包的更多信息。

[BI Documentor](http://pragmaticworks.com/Products/Business-Intelligence/BIDocumenter/Default.aspx) 是一个工具，它为您提供 SSIS 包的完整架构。您只需将应用程序指向您的 dtx pkg。如果您有大量的 sql 代码和表达式、变量、连接管理器需要修改，您可以这样做在这个工具的帮助下。有时在 BIDS 中打开一个复杂的 ssis 包需要很多时间，所以这在这种情况下可能很有用。

还有一种称为[SSIS 日志分析器](http://ssisloganalyzer.codeplex.com/)的工具，它可以帮助您在不打开 BIDS 的情况下调试您的包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:57:27.470

我不认为有任何特定的工具可以做到这一点。最好只使用一些文本编辑器并浏览代码并识别您必须处理的更改列。

就个人而言，我不喜欢 SSIS，因为它是太多的“可视化工具”，并且可能会与 .NET 应用程序一起使用，但是既然您已经完成了所有工作，并且您可能不想将自己的职业生涯奉献给重建给你的数据转换工具，只需在 SSIS 中进行这些更改，使其工作，然后继续你快乐的编程生活......或者更好的是，找一些 SQL Server 管理员为你做这件事，他们喜欢 SSIS .

# php - 使用 R 从 php 网站读取数据

> ID：11911948
> 
> 赞同：4
> 
> 时间：2012-08-11T04:39:48.020
> 
> 标签：php, r, import, web-scraping

我想从这样的表中将数据导入**R**：

[http://www.rout.gr/index.php?name=Rout&file=results&year=2011](http://www.rout.gr/index.php?name=Rout&file=results&year=2011)

我尝试按照以下线程的建议使用 XML 库，但我什么也得不到。

[使用 XML 包将 html 表抓取到 R 数据帧中](https://stackoverflow.com/questions/1395528/scraping-html-tables-into-r-data-frames-using-the-xml-package)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T05:50:23.557

该网站似乎确实发生了一些时髦的事情。除非您伪造用户代理，否则它似乎不会返回任何数据。即使这样， readHTMLTable 的表现也不太好，如果您将整个`doc`. 阅读源代码后，您可以看到相关表具有 id`table_results_r_1`并将其隔离并通过作品传递结果：

```
library(XML)
library(httr)

theurl <- "http://www.rout.gr/index.php?name=Rout&file=results&year=2011"
doc <- htmlParse(GET(theurl, user_agent("Mozilla")))
results <- xpathSApply(doc, "//*/table[@id='table_results_r_1']")
results <- readHTMLTable(results[[1]])
rm(doc) 
```

现在您需要整理表格列名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T03:57:41.740

除了我的评论

```
theurl <- "http://www.rout.gr/index.php?name=Rout&file=results&year=2011"
doc <- htmlParse(GET(theurl, user_agent("Mozilla")))
removeNodes(getNodeSet(doc,"//*/comment()"))
dum.tables<-readHTMLTable(doc) 
```

所以第 14 个表的标题中的注释引起了问题。我们可以删除所有 html 注释，然后该功能将适用于页面上的所有表格。

# extjs - 无法访问控制器内的正确范围

> ID：11911955
> 
> 赞同：0
> 
> 时间：2012-08-11T04:41:11.357
> 
> 标签：extjs, extjs4, extjs-mvc

我正在尝试根据从服务器返回的数据动态构建表单。`<PROJECT NAME>/store`在这种情况下，文件夹中没有我的商店。我有它`<PROJECT NAME>/store/admin`。它是这样定义的：

```
Ext.define('APP.store.admin.TaskOption', {
extend: 'Ext.data.Store',
autoLoad: false,
storeId: 'adminTasksOptions',
model: 'APP.model.admin.TaskOption',
sorters: [
    { property: 'order', direction: 'ASC' }
]
}); 
```

请注意`storeId`.

现在在我的控制器中，我在`init`方法中尝试了这个，但它不起作用（即：它没有调用`taskOptionsLoaded` 方法。

```
 Ext.create('APP.store.admin.TaskOption');

      this.getAdminTasksOptionStore().on({
          scope: this,
          load : this.taskOptionsLoaded
      }); 
```

另请注意，当我做了一个断点并检查时，`this.getAdminTaskOptionStore`返回了正确的商店。我猜这是因为我将商店放在子文件夹中？不确定，但不是重新组织文件夹结构并将它们全部放在`store`文件夹中（我有很多商店；大型项目），我正在尝试找到一个解决方案，以便我可以保持文件井井有条，以便下一个人使用。

所以现在我已经尝试过了，这也不起作用。这是在同一控制器中的方法中执行的。

```
Ext.getStore('adminTasksOptions').load(
        {'params' : {'t_id' : this.selectedTaskTemplate},
        callback: function(store, records, success) {
            this.taskOptionsLoaded(store, records, success);
        }
    },this); 
```

当我`this.taskOptionsLoaded`在线断点时，它是在存储范围内，而不是控制器（`this`）范围内。

在自己的商店中添加加载回调`storeId`并在控制器范围内执行方法的最干净的方法是什么？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:14:23.140

如果您的控制器有一个配置`stores: ['AdminTasksOptionStore']`，它将生成一个名为`getAdminTasksOptionStore()`.

`storeId`你的事实`adminTasksOptions`并不意味着 ExtJS 会在控制器中生成 getter；但是，您可以这样做`Ext.data.StoreManager.lookup('adminTasksOptions')`。

你需要在你的控制器中有：

```
stores: ['TaskOption'], 
```

然后在您的控制器中，您将拥有 getter `getTaskOptionStore()`。

关于您的负载范围，您使用了错误的变量，它应该是：

```
Ext.getStore('adminTasksOptions').load({
    scope: this,
    params: {'t_id' : this.selectedTaskTemplate},
    callback: function(store, records, success) {
        this.taskOptionsLoaded(store, records, success);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:30:58.963

我认为您使用`on()`错误的功能。试试这个：

```
this.getAdminTasksOptionStore().on(
  'load', // event
  this.taskOptionsLoaded, // handler
  this // scope
); 
```

# html - 如何在 HTML 中填充边框？

> ID：11911956
> 
> 赞同：3
> 
> 时间：2012-08-11T04:41:31.933
> 
> 标签：html, css

我知道如何创建边框，如何用不同的颜色填充边框内的其余部分？这是我到目前为止所拥有的：

```
<div style="width:200px;height:100px;border:6px outset orange;">text</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T04:49:12.477

利用

```
background:#fff 
```

或任何颜色；还有一个建议永远不要使用内联 CSS 来获得最佳输出使用外部 CSS

```
<div id="something">text</div>

#something
{
  width:200px;
  height:100px;
 //likewise
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:56:49.727

给你：http: [//jsfiddle.net/XVDkS/](http://jsfiddle.net/XVDkS/)

说明：它在边框（0 模糊）之后添加框阴影（至少 2 个）。根据您的需要操纵阴影的数量和它们的宽度。如果需要，您也可以使用模糊。阅读[MDN 文章](https://developer.mozilla.org/en-US/docs/CSS/box-shadow "CSS3 盒子阴影：MDN")以了解有关 box-shadow 的更多详细信息。

这是一个 CSS3 解决方案，所以旧的 IE 版本不会很好玩（除非你对它施以黑魔法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T04:43:36.143

使用背景属性，例如：

```
background:#ccc; 
```

这将使您的代码看起来像这样：

```
<div style="width:200px;height:100px;border:6px solid orange; background:#ccc;">text</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T04:47:42.193

如果您的意思是背景，这将有所帮助

CSS

```
backgound:black; 
```

带有 CSS 的 HTML

```
<div style="width:200px;height:100px;border:6px outset orange;background:black;">text</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T04:48:21.023

您可以使用凹槽或脊代替开头，

见这里是一些例子`W3schools`

[http://www.w3schools.com/cssref/playit.asp?filename=playcss_border-style&preval=none](http://www.w3schools.com/cssref/playit.asp?filename=playcss_border-style&preval=none)

或者如果你想要 2 个边框和不同的边框，那么你试试这个

```
<div style="width:200px;height:100px;border:1px solid #000">
    <div style="width:190px;height:90px;border:5px solid orange">
    <div style="width:188px;height:88px;border:1px solid #000">
    test
    </div>
    </div>
</div> 
```

演示在这里：http: [//jsfiddle.net/SPhec/](http://jsfiddle.net/SPhec/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T04:48:38.297

```
<div style="width:200px;height:100px;border:6px outset orange;background:#000000">text</div> 
```

使用 CSS 背景属性

# ios - UIScrollView setContentOffset：动画：奇怪的行为

> ID：11911967
> 
> 赞同：4
> 
> 时间：2012-08-11T04:43:43.283
> 
> 标签：ios, objective-c, uiscrollview, uitextfield

我正在使用包含几个文本字段的滚动视图。当文本字段“开始编辑”时，我执行 3 个操作：

1.  我更改了滚动视图内容插图（以便整个视图在键盘上方变得明显）。如果它尚未固定到此内容插图，我只会这样做。

2.  我还更改了滚动指示器插图以匹配 1 中的一个。

3.  最后，我将滚动视图内容偏移更改为某个特定值。

然而，奇怪的事情发生了。一旦我点击文本字段，滚动视图就会动画到大于特定值的内容偏移量，然后立即返回到该特定值。

我怀疑第 1 步和第 2 步都是原因，所以我排除了它们，一切正常。但是，这让我将滚动视图的一部分隐藏在键盘下方。

**编辑：**这是我使用的代码（在文本字段开始编辑时调用）：

```
 UIScrollView *scrollView = (UIScrollView *) self.view;

        if (scrollView.contentInset.bottom != C_SCROLL_VIEW_CONTENT_INSET_BOTTOM) {
            [scrollView setContentInset:UIEdgeInsetsMake(C_ORIGIN_ZERO,
                                                         C_ORIGIN_ZERO,
                                                         C_SCROLL_VIEW_CONTENT_INSET_BOTTOM,
                                                         C_ORIGIN_ZERO)];
            [scrollView setScrollIndicatorInsets:UIEdgeInsetsMake(C_ORIGIN_ZERO,
                                                                  C_ORIGIN_ZERO,
                                                                  C_SCROLL_VIEW_CONTENT_INSET_BOTTOM,
                                                                  C_ORIGIN_ZERO)];
        }

        if (textField.tag == C_TAG_BUTTON) {
            [scrollView setContentOffset:CGPointMake(C_ORIGIN_ZERO, C_ORIGIN_SHIFT_SCROLL_VIEW_FOR_CURRENT_Y)
                                animated:YES];
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T08:30:54.977

假设 C_SCROLL_VIEW_CONTENT_INSET_BOTTOM 是您的常数，我认为该值是错误的（太大）。

# objective-c - NSUInteger 等效用于 cocos2d-x 项目

> ID：11911969
> 
> 赞同：1
> 
> 时间：2012-08-11T04:43:59.887
> 
> 标签：objective-c, visual-c++, cocos2d-iphone, cocos2d-x

是否有在 cocos2d-x 中实现的 NSUInteger 宏以用于 Visual C++。我需要这个将项目从 obj-c 移植到 c++。

而且，我已经看到这些变量是在头文件中的变量声明之后编写的：

`@property (nonatomic, readonly) CGPoint stickPosition;` `@property (nonatomic, readonly) float degrees;` `@property (nonatomic, readonly) CGPoint velocity;`
`@property (nonatomic, assign) BOOL autoCenter;` `@property (nonatomic, assign) BOOL isDPad;` `@property (nonatomic, assign) BOOL hasDeadzone;` `@property (nonatomic, assign) NSUInteger numberOfDirections;`

`@property (nonatomic, assign) float joystickRadius;` `@property (nonatomic, assign) float thumbRadius;` `@property (nonatomic, assign) float deadRadius;"`

在 C++ 中以任何方式编写这些内容是否有用，是否可能？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:47:23.800

NSUInteger 只是最大的无符号整数。在 C++ 中，您可以使用

```
unsigned long       // when building a 64-Bit OS app
unsinged int        // when building a 32-Bit OS app (ie iOS, Android) 
```

而不是它。或者，为了方便：

```
typedef unsigned long NSUInteger;
typedef unsigned int NSUInteger; 
```

如果你想用 C++ 表示一个属性，那并不真正属于这个主题——它不依赖于 Cocoa，而是依赖于语言，只需阅读 C++ 书籍的成员变量主题即可解决。就是这样：

```
class Whatever {
   public:
   CGRect rect;
} 
```

然后像这样访问它：

```
Whatever *instance = new Whatever();
CGRect r = instance->rect; 
```

# hive - 在哪里可以找到嵌入式 Apache Hive

> ID：11911977
> 
> 赞同：2
> 
> 时间：2012-08-11T04:45:24.990
> 
> 标签：hive

我相信 Apache Hive 可以嵌入到 Java 程序中。有人可以指导我到可以下载“Embedded Hive”的页面吗？我需要嵌入 Hive 才能在 Windows 上运行它，这是我开发应用程序的地方。嵌入和代码示例的进一步说明也将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:45:05.343

Hive 仅在存储 Hive 表的元信息的 RDBMS 可以在本地或独立服务器上运行的意义上支持嵌入式模式（参考[https://cwiki.apache.org/confluence/display/Hive/HiveClient](https://cwiki.apache.org/confluence/display/Hive/HiveClient)）。此外，hive 及其附带的数据库只是一系列 MapReduce 作业的编排器，这也需要运行 Hadoop 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:55:44.590

使用以下类 org.apache.hadoop.hive.service.HiveServer.HiveServerHandler 确保 hive/conf 在类路径上。以及来自 hive/lib 的所有 hive jars。此嵌入式客户端需要在安装了 hive 的同一台机器上运行。如果您的 hive-site.xml 使用的是 derby，那么嵌入式客户端将创建一个 .metastore 文件夹，如果您的 hive-site.xml 使用的是独立数据库，那么嵌入式客户端将直接与数据库通信，因此请确保它正在运行。

# php - 如何使用亚马逊产品 API 来获取未发布商品的列表？

> ID：11911978
> 
> 赞同：0
> 
> 时间：2012-08-11T04:45:52.617
> 
> 标签：php, api, amazon, amazon-product-api

这个问题让我头疼了一段时间。这里有一个类似的问题，但它有点模棱两可，似乎没有解决。

我想使用亚马逊的产品 API 来查找尚未发布的各种类别的商品，即发布日期大于今天的商品。据我所知，可能有一种方法可以将发布日期作为对项目查询的响应，但我更愿意将其作为查询的一部分。请求一个类别中的所有项目并单独检查它们的发布日期是不切实际的。

目标是获取页面上每个项目的 ASIN，例如[这个](http://www.amazon.com/s/ref=sr_nr_p_n_publication_date_2?rh=n:283155,n%3a!1000,n:4,n:2787,p_n_publication_date:1250228011&bbn=2787&ie=UTF8&qid=1344660178&rnid=1250225011)页面，这是一个未发行的关于动物的儿童书籍的列表。当然，这只是一个例子。

我更喜欢 PHP 解决方案，但实际上，任何事情都可以。如果需要，请随时要求我澄清任何要点。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:52:50.120

您可以使用[Product Advertising API上的](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/Welcome.html)[ItemSearch](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/ItemSearch.html)操作，并带有以下参数：

```
# Specify the SearchIndex  
SearchIndex = 'Books'

# and the category you want to look at. 
BrowseNode = '2787'

# Use the Power parameter to search for items that will be published
# in the future (here: between January 2013 and June 2013)
Power = 'pubdate:after 01 2013 and pubdate:before 06 2013' 
```

阅读有关[Power Search 语法的更多信息](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/PowerSearchSyntax.html)

# c# - 在 C# 的 Web 浏览器控件上实现新选项卡

> ID：11911980
> 
> 赞同：0
> 
> 时间：2012-08-11T04:46:28.013
> 
> 标签：c#

我想构建自己的网络浏览器，但我一直在添加新标签的操作，有没有人有任何想法来完成它？

最终的结果应该是这样的。

![在此处输入图像描述](../Images/f1facf8f576dbe222f9d92577fdd3a1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:46:26.883

你可以试试这个： -

```
if (tabControl1.SelectedTab.Text == "+")
        {
            AddNewTab();
        }
        foreach (Control item in tabControl1.SelectedTab.Controls)
        {
            if (item.GetType() == typeof(WebBrowser))
            {
                WebBrowser wb = (WebBrowser)item;
                toolStripButton1.Enabled = wb.CanGoBack;
                toolStripButton2.Enabled = wb.CanGoForward;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:03:12.163

我会去的方式是（使用[TabControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.aspx)或类似的）创建一个只有你想要的加号图标的特殊选项卡。然后处理[tab changed 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selecting.aspx)，检查你是否切换到了特殊的 tab，如果是，取消 tab change，创建一个新的 tab 并将其设置为显示。

# ruby-on-rails-3 - nil:NilClass 的默认视图未定义方法“名称”出现问题

> ID：11911985
> 
> 赞同：1
> 
> 时间：2012-08-11T04:47:35.110
> 
> 标签：ruby-on-rails-3, controller, show

我无法渲染我的视图。我想我知道为什么会出现错误：

```
undefined method `name' for nil:NilClass 
```

提取的源代码（第 21 行附近）：（显示 18-24）

```
<ul>
     <%= form_tag(default_hero_user_path, :method=>'post') do %>
         <%= label_tag "Name" %>
         <%= text_field_tag "name", @user.default_hero.name %> #line 21
         <%= submit_tag 'Set hero', class: "btn btn-large btn-primary"  %>
     <% end %>
   </ul> 
```

我知道你不能在 nil 对象上调用 .name 但我不明白为什么 @user.default_hero 是 nil。我希望用户能够设置他们的“英雄”，但显然无法设置默认值。

这是用户控制器：

```
# creates or updates the default hero
def default_hero
 @user = User.find(params[:id])
 hero = @user.default_hero
 if hero.nil?
   # we don't have a default hero so we need to add one'
   hero = Hero.new
   @user.heros << hero
 end
 hero.default = true
 hero.name = params[:name]
 hero.save
 redirect_to @user # shows the user again to see any updates
end 
```

这是我认为我在设置默认视图时遇到问题的地方-

```
def show
@user = User.find(params[:id]) 
if @user.default_hero.nil?
  name = params[:q]
else
  name = @user.default_hero.name
end 
```

感谢你们的时间和关注，如果你能指出我如何解决这个问题的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:00:01.467

您的`show`控制器操作没有多大意义。如果`@user.default_hero.nil?`. 这不会完成任何事情，并且`@user.default_hero`仍然会出现`nil`在视图中。

话虽这么说，要摆脱你的错误，你可以简单地这样做：

```
<%= text_field_tag "name", @user.default_hero.nil? ? '' : @user.default_hero.name %> 
```

* * *

根据您的评论，我会这样做：

模型

```
class User < ActiveRecord::Base
  has_many :heros

  def set_default_hero(name)
    hero = self.heros.find_by_name(name) # check if the hero exists already
    hero = self.heros.build(:name => name) if hero.nil? # new object if not
    hero.default = true # set it as default
    hero.save
  end
end 
```

控制器：

```
def default_hero
  @user = User.find(params[:id])
  @user.set_default_hero(params[:name])
  redirect_to @user
end

def show
  @user = User.find(params[:id])
  @default_hero = @user.default_hero.nil? ? '' : @user.default_hero.name
end 
```

看法：

```
<%= text_field_tag "name", @default_hero %> 
```

你忽略了我的问题`params[:q]`，所以我不知道该怎么办。

# java - Android App 向 MYSQL 插入和上传数据的 Java 代码

> ID：11911988
> 
> 赞同：-2
> 
> 时间：2012-08-11T04:48:00.547
> 
> 标签：java, android, mysql, post

您将如何为这样的图像制作 java 代码？

![](../Images/4066b15cf57bac98563eee5e136c3ca5.png)

那是来自Android模拟器。我正在尝试将发布数据信息输入每个插槽并将信息上传到 MySQL 数据库。

这是到目前为止的代码：

```
public class Registration extends Activity {

    TextView Taccount,Tpassword,Tfirst,Tlast,Temail,Tlocation,Tdescription;
    EditText Eaccount,Epassword,Efirst,Elast,Eemail,Elocation,Edescription;
    Button btnCreate;
    String page="";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_cappuccino);
        btnCreate = (Button) findViewById(R.id.btnGen);
        Taccount = (TextView) findViewById(R.id.txtAccountID);
        Eaccount = (EditText) findViewById(R.id.editAccountID);
        Tpassword = (TextView) findViewById(R.id.txtPassword);
        Epassword = (EditText) findViewById(R.id.editPassword);
        Tfirst = (TextView) findViewById(R.id.txtFirst);
        Efirst = (EditText) findViewById(R.id.editFirst);
        Tlast = (TextView) findViewById(R.id.txtLast);
        Elast = (EditText) findViewById(R.id.editLast);
        Temail = (TextView) findViewById(R.id.txtEmail);
        Eemail = (EditText) findViewById(R.id.editEmail);
        Tlocation = (TextView) findViewById(R.id.txtLocation);
        Elocation = (EditText) findViewById(R.id.editLocation);
        Tdescription = (TextView) findViewById(R.id.txtDescription);
        Edescription = (EditText) findViewById(R.id.editDescription);

        btnCreate.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v)
            {
                examineJSONFile();
            }
        });
    }
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_cappuccino, menu);
        return true;
    }

    void examineJSONFile()
    {
        try
        {
            JSONObject object=new JSONObject();
            object.put("Account ID", Eaccount.getText());
            object.put("Password", Epassword.getText());
            object.put("First Name", Efirst.getText());
            object.put("Last Name", Elast.getText());
            object.put("Email", Eemail.getText());
            object.put("Location", Elocation.getText());
            object.put("Description", Edescription.getText());
            String str=object.toString();
            executeHttpPost(str);
            Log.i("JsonString :", str);
            Toast.makeText(this, "Json Objects are : " + str,Toast.LENGTH_LONG).show();

        }
        catch (Exception je)
        {

        }
    }

    public  void executeHttpPost(String string) throws Exception 
    {
        //This method  for HttpConnection  
        try 
        {
            HttpClient client = new DefaultHttpClient();

            HttpPost request = new HttpPost("http://localhost:8080/example/database/Cappuccino.sql");

            List<NameValuePair> value=new ArrayList<NameValuePair>();

            value.add(new BasicNameValuePair("Account ID",string));

            UrlEncodedFormEntity entity=new UrlEncodedFormEntity(value);

            request.setEntity(entity);

            client.execute(request);

           System.out.println("after sending :"+request.toString());

        } 
     catch(Exception e)     {System.out.println("Exp="+e);
        }

    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:33:01.457

有多种方法可以做到这一点。

一种方法（可能是最简单的）是使用 JDBC 和合适的 JDBC 驱动程序直接从您的 Android 应用程序访问数据库；例如，如本问题[Using SQL (JDBC) database in Android 中](https://stackoverflow.com/questions/9541850/using-sql-jdbc-database-in-android)所述。（这假设您了解如何使用 SQL 和 JDBC ......但这些是标准技术，如果您打算使用 Java 中的 MySQL 数据库做任何严肃的事情，您需要了解它们。）

另一种方法是为数据库创建某种包装服务，但如果您只想上传数据而无需任何额外的验证或处理，这对我来说似乎是不必要的复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:54:00.180

实现此目的的一种方法是使用 Webservice。您必须创建 Web 服务才能访问 MySQL 数据库。可以使用php、jsp等创建。

我们使用互联网连接将值传递给 web 服务。

webservice 处理这些数据并返回响应。

[http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

此链接可以帮助您了解如何执行此操作。

# java - IText Pdf Table Singel Cell 扩展为多行

> ID：11911996
> 
> 赞同：0
> 
> 时间：2012-08-11T04:49:33.877
> 
> 标签：java, itext

是否可以将单个单元格扩展到多行而不影响行宽。

假设我的 PdfTable 有 5 列，我想将第 2 行第 3 列的单元格扩展到第 5 行而不影响任何其他单元格到任何其他行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:52:08.100

请参阅[此示例](http://itextpdf.com/examples/iia.php?id=76)以及[PdfPCell.setRowspan(int)](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPCell.html#setRowspan%28int%29)和[PdfPCell.setColspan(int)](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPCell.html#setColspan%28int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T11:07:07.457

嗨，请检查这个....代码

```
 Document doc = new Document();
    PdfWriter docWrite = null;
    DecimalFormat df = new DecimalFormat("0.00");

    DB.getPlayerName_OrderBy( TID1 , Match_ID); 

     try {
            String path =  Environment.getExternalStorageDirectory().getPath() + "/Cric";

            Font bfBold12 = new Font(FontFamily.TIMES_ROMAN, 12, Font.BOLD, new BaseColor(0, 0, 0));
            Font bf12 = new Font(FontFamily.TIMES_ROMAN, 12);

            File dir = new File(path);

                if(!dir.exists()){dir.mkdirs();}

            Log.d("PDFCreator", "PDF Path: " + path);                 

            File file = new File(dir, "cric_sample.pdf");
            FileOutputStream fOut = new FileOutputStream(file);

            docWrite = PdfWriter.getInstance(doc, fOut);          

            doc.addTitle("Cricket Scord Card 2013 PDF");
            doc.addCreationDate();
            doc.open(); 
            Paragraph p1 = new Paragraph(teamBatting + " Socre Card 2013 ");

            float[] columnWidths = {5f, 5f, 2f, 2f,2f,2f,2f};
            PdfPTable table = new PdfPTable(columnWidths);
            table.setWidthPercentage(90f);

            insertCell(table, "Player Names", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "Wicket Status", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "Runs", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "Balls", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "6's", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "4's", Element.ALIGN_LEFT, 1, bfBold12);
            insertCell(table, "SR", Element.ALIGN_LEFT, 1, bfBold12);

            table.setHeaderRows(1);

            for(int x= 0; x<DatabaseHandler.Player_SD.size(); x++){

                float SR;

                if(DatabaseHandler.Player_SD.get(x).StrikerName == null)
                {
                    break;
                }
                else
                {

                     if(DatabaseHandler.Player_SD.get(x).Mrun !=0 &&DatabaseHandler.Player_SD.get(x).MBolls !=0)
                     {
                         SR= (((float)DatabaseHandler.Player_SD.get(x).Mrun/(float)DatabaseHandler.Player_SD.get(x).MBolls)) * 100;
                     }
                     else
                     {
                         SR =(float) 0.00;
                     }

                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).StrikerName), Element.ALIGN_LEFT, 1, bf12);
                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).MOut), Element.ALIGN_LEFT, 1, bf12);
                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).Mrun) , Element.ALIGN_LEFT, 1, bf12);
                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).MBolls), Element.ALIGN_LEFT, 1, bf12);
                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).MSix), Element.ALIGN_LEFT, 1, bf12);
                        insertCell(table, String.valueOf(DatabaseHandler.Player_SD.get(x).MFour), Element.ALIGN_LEFT, 1, bf12);                    
                        insertCell(table, String.valueOf(String.format("%.1f",SR)), Element.ALIGN_LEFT, 1, bf12);
                }
               }

           // p1.setAlignment(Paragraph.ALIGN_CENTER);  
            p1.add(table);
            doc.add(p1);

     } catch (DocumentException de) {
             Log.e("PDFCreator", "DocumentException:" + de);
     } catch (IOException e) {
             Log.e("PDFCreator", "ioException:" + e);
     }
     finally
     {
         if(doc != null)
         {
             doc.close();
         }
         if(docWrite != null)
         {
             docWrite.close();
         }
     } 
```

# ios - 定制的iOS弹出/警报

> ID：11911997
> 
> 赞同：0
> 
> 时间：2012-08-11T04:50:10.760
> 
> 标签：ios, uialertview

我想知道是否有一个定制的iOS弹出/警报的示例代码，右上角有一个“X”按钮。我发现 MTPopupWindow 可以这样做，但它只允许显示固定消息。我想动态生成弹出消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:20:46.287

您可以模态显示视图并在右上角有一个自定义按钮。按钮类型将是 UIButtonTypeCustom。创建模态视图到主视图的委托（用于接收关闭按钮的操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:43:13.480

您还可以查看[MBProgressHUD](https://github.com/jdg/MBProgressHUD)并可能将其扩展为在顶部显示关闭按钮。

# facebook-opengraph - instagram 如何在其用户的提要上创建巨大的缩略图

> ID：11911999
> 
> 赞同：0
> 
> 时间：2012-08-11T04:50:39.870
> 
> 标签：facebook-opengraph, instagram

我想了解 instagram 如何显示大图像缩略图，每个缩略图都有单独的操作，例如喜欢和评论。是否可以通过 Open Graph API 来实现，还是因为 Instagram 是 Facebook 的财产？

自定义操作和对象 API 似乎不允许这样的布局。一个例子如下所示

![在此处输入图像描述](../Images/cebcd78da423dd70fdbfb4f102b554d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:26:04.727

API 通过用户生成的照片功能支持这一点：

[https://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/) 有文档，您的操作需要特别批准

您将以下参数添加到现有的发布调用中：

```
image[0][url]=<URL TO IMAGE>
image[0][user_generated]=true
image[1]... etc 
```

{edit:} 实际上，我不确定如何呈现该聚合单元 - 我上面的答案是针对照片功能本身