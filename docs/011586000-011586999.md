# StackOverflow 问答 11586000-11586999

# asp.net - 如何将文本与旁边的图像对齐？

> ID：11586003
> 
> 赞同：1
> 
> 时间：2012-07-20T19:43:21.917
> 
> 标签：asp.net, css

我正在努力将文本与旁边的图像对齐。我想将带有文本的图像放在 ASP.NET Ajax TabContainer 中（特别是在 TabPanel 内），并且我希望它适用于这种情况和其他情况。我搜索了很多，但大多数资源都根据图像的高度或宽度讨论了特殊情况。如果我有多个不同尺寸的图像呢？

**那么你能帮我给我一种将文本与任何图像对齐的方法吗？**

我的 ASP.NET 代码：

```
<ajaxToolkit:TabPanel ID="ImagesGallery" runat="server" OnDemandMode="Once" Enabled="true" >
        <HeaderTemplate><img src="images/New/image.png" class="icon" alt=""  /> Images Gallery</HeaderTemplate>
</ajaxToolkit:TabPanel> 
```

我试图使它工作的 CSS 是：

```
/* For aligning the image (icon) with the text */
.icon
{
    display: block;
    margin-left: auto;
    margin-right: auto 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:52:52.437

`vertical-align:middle;`在您的图像上使用。
这是一个带有 stackoverflow 图标的**示例**[http://jsfiddle.net/tDfDP/](http://jsfiddle.net/tDfDP/)

希望对您有所帮助

# c# - WPF 控件和自定义控件上的 DependencyProperty

> ID：11586011
> 
> 赞同：0
> 
> 时间：2012-07-20T19:43:46.200
> 
> 标签：c#, wpf, dependency-properties

我有一个 C# 自定义 WPF 控件。我在控件上有基于 DependencyProperty 的属性。

```
public static readonly DependencyProperty CurrentStateProperty = 
 DependencyProperty.Register( "CurrentState", typeof(ControlStateEnum),
 typeof(MyCustomControl), new PropertyMetadata(ControlStateEnum.Started));

public ControlStateEnum CurrentState
{
    get { return (ControlStateEnum) GetValue(CurrentStateProperty); }
    set { SetValue(CurrentStateProperty, value); }
} 
```

现在，如果我使用控件并尝试使用它，ala：

```
<myControls:MyCustomControl CurrentState="Loaded" /> 
```

CurrentState 永远不会设置为“已加载”并保持“已启动”。我想让它能够绑定，但也能够在没有绑定的情况下设置......有什么我不明白或遗漏的吗？

当我在设置器上设置断点时，它不会在窗口加载时更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:14:57.803

您确定在控件加载后没有在其他地方更改枚举，因为这应该按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:12:56.797

因此，最终在控件初始化和加载后，从 XAML 为控件设置了值。所以处理它的方法是在DependencyProperty上添加一个PropertyChangedHandler。

parapura 有一个指向正确答案的链接（http://stackoverflow.com/questions/4225373/setters-not-run-on-dependency-properties）。

# r - 将输出制表为参差不齐的数组

> ID：11586014
> 
> 赞同：1
> 
> 时间：2012-07-20T19:43:49.997
> 
> 标签：r

是否有类似 table 的函数将结果输出到参差不齐的数组中？

我有一个数据框，我想将不同项目在参差不齐的数组中的出现率制成表格。我知道我可以使用 table 来输出数组中的数据。但是数据稀疏。xtab 函数可以输出稀疏矩阵，但仅限于二维。

我想要一个函数来获取这样的数据框：

```
自首次购买以来的购买周数
1 10.1
1 4.2
1 4.2
2 2.4
3 1
2 2.4

```

输出计数如下：

```
购买天数SinceFirstPurcahse Count
1 10.1 1
1 4.2 2
2 2.5 2
3 1 1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:51:15.740

您可以使用**plyr**包和专门的**count**功能。使用您的数据，我们可以执行以下操作：

```
require(plyr) 
toydat
  Purchases WeeksSinceFirstPurcahse
1         1                    10.1
2         1                     4.2
3         1                     4.2
4         2                     2.4
5         3                     1.0
6         2                     2.4

str(toydat)
'data.frame':   6 obs. of  2 variables:
 $ Purchases              : int  1 1 1 2 3 2
 $ WeeksSinceFirstPurcahse: num  10.1 4.2 4.2 2.4 1 2.4

ddply(toydat, .(Purchases), function(x) count(x, "WeeksSinceFirstPurcahse"))
  Purchases WeeksSinceFirstPurcahse freq
1         1                     4.2    2
2         1                    10.1    1
3         2                     2.4    2
4         3                     1.0    1 
```

编辑以添加计数函数示例：

```
count(toydat,.(Purchases,WeeksSinceFirstPurchase))
  Purchases WeeksSinceFirstPurchase freq
1         1                     4.2    2
2         1                    10.1    1
3         2                     2.4    2
4         3                     1.0    1 
```

# c++ - Windows XP 和 Windows 7 之间的 DCOM 互操作性

> ID：11586020
> 
> 赞同：2
> 
> 时间：2012-07-20T19:44:48.263
> 
> 标签：c++, windows, dcom

我正面临一个相当奇怪且非常具体的 DCOM 相关问题，我希望有人可能已经遇到并解决了它。

我正在尝试在 Windows 7 机器上的 EXE 服务器中实例化一个 COM 对象（称为 W7）。客户端驻留在 Windows XP 机器上（称为 WXP）。在 WXP 上，登录用户是域用户。在 W7 上，用户是本地用户。我已经（afaik）正确设置了所有 DCOM 权限、身份验证和帐户权限。不涉及防火墙。

我得到的只是 COM EXE 服务器进程在 W7 上启动，使用我期望的用户名，但似乎甚至没有达到它的 WinMain 功能并且保持挂起并且永远不会死，除非我杀死它。我可以将远程调试器（Visual Studio 2010）附加到它，它会警告我进程可能会死锁，当我打破它时，它会在消息队列循环（GetMessage/Dispatch）中停止。

客户端获得一个（看似有效的）指针，但任何尝试使用它都会导致 E_ACCESSDENIED。

如果上述方案中的任何内容发生更改，则 COM 对象的实例化成功并且对象行为正确。

我知道找到答案的机会很小，但非常欢迎任何提示。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:37:25.290

DCOM 客户端和服务器要么需要是同一工作组中的本地管理员，要么是同一域中的域用户。

您可以使用此测试应用程序检查您的两台机器是否配置正确： http: [//support.microsoft.com/kb/259011](http://support.microsoft.com/kb/259011) 这样您就可以确保您的机器的权限和防火墙首先正确设置，而无需您自己的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:39:32.013

回答我自己的问题...

事实证明，在客户端 CoInitializeSecurity 中并没有它需要的所有凭据......它被调用得太早了，在凭据已知之前。

在我实例化的每个组件上使用 CoSetProxyBlanket （如此处所述：[DCOM 中的模拟如何工作？ ）后，我发现了这一点。](https://stackoverflow.com/questions/6123301/how-does-impersonation-in-dcom-work)我调用 CoSetProxyBlanket 的每个组件都正常工作。这促使我去仔细检查 CoInitializeSecurity。

反向连接（从 W7 到 WXP）起作用仍然很奇怪，但这是我需要做的另一项研究。当前问题可以关闭。

# php - 在 Symfony2 中使用 DomCrawler 为选项选择一个值

> ID：11586027
> 
> 赞同：1
> 
> 时间：2012-07-20T19:45:12.553
> 
> 标签：php, symfony, phpunit

我正在编写一个使用 DomCrawler 填写和提交表单的小型功能测试。但是，在填充选择方面，我遇到了严重的问题。我怎样才能使这项工作？

```
 $crawler = $this->client->request('GET', '/post/new');
    $form = $crawler->selectButton('new')->form();
    $form['form[name]'] = 'Test';
    $form['form[category][]'] = '1';
    $crawler = $this->client->submit($form); 
```

无论如何，我总是收到 InvalidArgumentException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:18:00.363

假设您有一个`<option />`带有 value 的元素，`1`选择它的正确语法是

```
$form['form[category]']->select('1'); 
```

[您可以在此处](http://symfony.com/doc/current/book/testing.html#forms)阅读有关测试表格的更多信息。

# php - PHP数组到objective-c NSArray（Xcode）

> ID：11586031
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:45:33.463
> 
> 标签：php, objective-c, arrays

是否可以将 PHP 中的数组转换为 NSArray？

PHP代码：

```
<?php
$DB_HostName = "XXXXX";
$DB_Name = "XXXXX";
$DB_User = "XXXXX";
$DB_Pass = "XXXXX";
$DB_Table = "Name";

$con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); 
mysql_select_db($DB_Name,$con) or die(mysql_error()); 

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$result = mysql_query("SELECT * FROM Name");

while($row = mysql_fetch_array($result))
 {

$Name = $row['name'];
$LastName = $row['lastname'];

echo "$Name $LastName";
echo "<br />";

}
mysql_close($con);

?> 
```

我可以在不使用 JSON 的情况下将“$Name”和“$LastName”制作为 Foundation 样式的 NSArrays 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:13:52.330

首先，xcode 是一种 IDE，而不是一种语言；）您选择的语言是 Objective-c。

您需要做的是向 php 页面发出请求（如果您要在真正的应用程序上使用它而不是用于练习，则必须将页面公开放在某个地方）并获取数据进行处理。

由于您不希望它是 json，因此对于如何将数据放入数组中，您可以有简单的选择和困难的选择。

一种方法是使用分隔符。例如，您的输出可能是：

```
Michael Westen##Fiona Glenanne##Sam Axe 
```

您可以使用以下方法轻松获得：

```
NSString *dataString = [NSString stringWithContentsOfURL:url encoding:nil error:nil];
myArray = [dataString componentsSeparatedByString:@"##"]; 
```

`url`您要获取数据的页面的 url 和您`myArray`的`NSArray`.

# ajax - 为谷歌分析自动生成 ajax url 的脚本？

> ID：11586036
> 
> 赞同：0
> 
> 时间：2012-07-20T19:46:17.867
> 
> 标签：ajax, google-analytics

我继承了一个完全使用 Ajax 构建的网站，因此我使用此代码来检测页面加载：

```
(the standard GA code)
    var _gaq=[["_setAccount","UA-#######-#"],["_trackPageview"]];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
    s.parentNode.insertBefore(g,s)}(document,"script"));

and the gaq.push:
    _gaq.push(['_trackPageview', '/#pagename']); 
```

除了这是一个有 30 多页的大网站，我不想每页都写。是否有一个脚本可以找到路径/页面名称并为我把它放在那里？

我不知道 Ajax 或 Javascript，如果措辞不正确，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:50:54.040

但是您可以使用该`_push`函数，因为 AJAX 请求可能意味着很多事情（有时是页面加载，有时是数据回发，有时只是一个 ping 以确保用户还活着）您不想跟踪每个 XMLHttp要求。

根据您的网站编写的语言，我强烈建议使用某种形式的部分页面组件（php include、ASP.NET MVC Partial、ServerSide Include）等，这将阻止您重写代码一百万次，如果你改变它。

但是，如果它们是硬编码的，您仍然需要编辑 30 多页。或者一个母版页，如果它是一个明智的设计。

查看[此链接](http://davidwalsh.name/ajax-analytics)以获取有关如何使用 push 方法跟踪 ajax 请求的示例。

# django - 如何从下拉框django中获取值？

> ID：11586038
> 
> 赞同：20
> 
> 时间：2012-07-20T19:46:33.587
> 
> 标签：django, drop-down-menu

我应该使用下一个构造吗？

```
def PageObjects(request): 
    q = bla_bla_bla(bla_bla) 
    answer = request.POST['value'] 

<form action="PageObjects" method="get">
       <select >
        <option selected="selected" disabled>Objects on page:</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
        <option value="40">40</option>
        <option value="50">50</option>
       </select>
       <input type="submit" value="Select">
  </form> 
```

我怎么解决这个问题？我需要写什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T20:14:41.400

给标签起个名字，比如

```
<select name="dropdown">
    <option selected="selected" disabled>Objects on page:</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
    </select> 
```

在视图中访问它

```
def PageObjects(request): 
    q = bla_bla_bla(bla_bla) 
    answer = request.GET['dropdown'] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T20:55:45.090

我建议通过邮寄方式发送您的数据：

```
<form action="PageObjects" method="post">
  <select >
    <option selected="selected" disabled>Objects on page:</option>
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="30">30</option>
    <option value="40">40</option>
    <option value="50">50</option>
  </select>
  <input type="submit" value="Select">
</form> 
```

你应该通过`cleaned_data`字典访问你的表单值：

```
def page_objects(request):
  if request.method == 'POST':
    form = YourForm(request.POST)

    if form.is_valid():
      answer = form.cleaned_data['value'] 
```

我真的建议你阅读 Django 文档：

[https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-08T02:24:21.677

在“your_app_folder”中创建一个文件 forms.py

在forms.py中：

```
class FilterForm(forms.Form):
    FILTER_CHOICES = (
        ('time', 'Time'),
        ('timesince', 'Time Since'),
        ('timeuntil', 'Time Untill'),
    )

    filter_by = forms.ChoiceField(choices = FILTER_CHOICES) 
```

在views.py中

```
from .forms import FilterForm

def name_of_the_page(request):
 form = FilterForm(request.POST or None)
 answer = ''
 if form.is_valid():
  answer = form.cleaned_data.get('filter_by') 
  // notice `filter_by` matches the name of the variable we designated
  // in forms.py 
```

此表单将生成以下 html：

```
<tr><th><label for="id_filter_by">Filter by:</label></th><td><select id="id_filter_by" name="filter_by" required>
<option value="time" selected="selected">Time</option>
<option value="timesince">Time Since</option>
<option value="timeuntil">Time Untill</option>
</select></td></tr> 
```

注意选择了属性的选项字段，当您提交表单时，在您的views.py文件中，您将`selected`使用该行从属性中获取数据

```
answer = form.cleaned_data.get('filter_by') 
```

# java - 如何从java中的图像网格中获取一张图像？

> ID：11586041
> 
> 赞同：0
> 
> 时间：2012-07-20T19:47:09.097
> 
> 标签：java, image, grid, minecraft, points

我需要能够从网格上的一个大图像中获取某些图像。有点像游戏中的Minecraft，有纹理包可以重新构造游戏的外观。为了减小文件大小，并没有那么多实际图片。它是所有不同块纹理的网格都在一张图片上。

我需要做类似的事情，但使用这张图片： http: [//f.cl.ly/items/122C0G3R3P422R2I452o/fontes_blanches_alpha.png](http://f.cl.ly/items/122C0G3R3P422R2I452o/fontes_blanches_alpha.png)

具体来说，我希望能够从 ArrayList 中调用这张图片中的每个字符，如下所示：

（伪代码）

```
 ArrayList<Pictures> chars = new ArrayList<Pictures>();

    JFrame.add(chars.get(x)); 
```

那么，我将如何分离图片以仅显示其中的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:08:00.673

您可以尝试将字体图像加载到`BufferedImage`对象中。然后你可以说`bufferedImage.getSubimage(x,y,w,h)`得到一个 subImage 类型`BufferedImage`。当你有一个 subImage 时，你可以将它添加到你的“chars”ArrayList 中。

# regex - 正则表达式匹配偶数，非零数字

> ID：11586044
> 
> 赞同：2
> 
> 时间：2012-07-20T19:47:19.850
> 
> 标签：regex, xsd, pattern-matching

我有以下正则表达式：`[\-+]?[0-9]*[02468]$` 它匹配正偶数或负偶数，但我也希望它不匹配'0'。我怎样才能做到这一点？我找不到将“如果前面有数字，则仅将 0 匹配为最终数字”翻译成正则表达式语言的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:50:59.313

也许这个？ `[\-+]?([0-9]*[1-9][0-9]*[02468]|[2468])$`

**编辑** 这允许在两个交替中使用前导零。

`[-+]?0*([1-9][0-9]*[02468]|[2468])$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:51:23.257

我想出了以下，这似乎工作：`[-+]?([1-9][0-9]*[24680]|[2468])$`

它似乎避免了前导零并且不使用回溯。如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:51:26.597

这将消除以 0 开头的数字：

```
[\-+]?[^0][0-9]*[02468]$ 
```

所以它会排除`0`.

缺点是它不起作用`012`。

因此，只要您的数字没有前导零，它就**可能是一个解决方案。**

* * *

不过，我不明白这里需要正则表达式（你从不指定上下文）。

最好（如果可能的话）检查数字是否非零甚至：

`( num != 0 && num % 2 == 0 )`

# cocoa - 除非用户滚动，否则 IKImageBrowserView 不会刷新

> ID：11586050
> 
> 赞同：1
> 
> 时间：2012-07-20T19:47:46.377
> 
> 标签：cocoa, ikimagebrowserview

我们有一个显示一堆图像的 IKImageBrowserView。我们在后台异步下载这些图像并将它们缓存到磁盘。然后，我们使用 KVC通知`IKImageBrowserView`它们已更改。`imageRepresentation`例如`didSetValueForKey:@"ImageRepresentation"`。但是，如果用户滚动视图，它看起来`IKImageBrowserView`只会刷新自身以加载最近下载的图像（我们在 NSScrollView 中嵌入了 IKImageBrowserView）。为什么会这样？是否有强制 IKImageBrowserView 重绘某个单元格或所有可见单元格而不等待用户滚动视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:59:32.240

尝试使用 reloadData 方法。

```
 [browser reloadData]; 
```

我遇到了类似的情况，我正在使用 IKImageBrowserView 查看正在下载的图像。就我而言，我使用占位符图像创建初始图像集，然后下载图像。随着每次进来，我用不同的图像更新数据源条目，增加图像版本号，然后在浏览器上使用 reloadData 方法。我还关闭了动画，这样用户就不会看到整个浏览器重绘，而只会看到已更新的图像。

```
- (void) setImage: (NSImage *) image
{

    [img release];
    img = image;
    [img retain];
    imageVersion++;
} 
```

以上是我的数据项的一个setter方法，它实现了非正式协议。

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/IKImageBrowserItem_Protocol/IKImageBrowserItem_Reference.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/IKImageBrowserItem_Protocol/IKImageBrowserItem_Reference.html)

# css - 如何将 div 移动到屏幕的右侧，但让文本与 div 的左边框对齐？

> ID：11586051
> 
> 赞同：7
> 
> 时间：2012-07-20T19:47:55.877
> 
> 标签：css, html

这是我的代码：

```
<div id="Notify" style="clear:both;">
    <div style="text-align:right;">
        <div style="text-align:left;">
            Send Table to Standards By Email. (everything below is a placeholder)
            <br /><br />
            Saved at: @DateTime.Now.ToString()
            <br />  
            Saved by: 107
            <br /><br />
            <input type="submit" value="Send Email" />
        </div>
    </div>
</div>
<br />
<br />
<div id="PTable">
    Products Table Placeholder
</div> 
```

当我尝试这个时，一切都向左对齐。如果我使用 float:right，那么 PTable 和 Notify 是并排的。与 PTable 低于 Notify 不同。

我想要的是：在顶部通知，其内部 div 中的所有文本都与内部 div 的左边框对齐。通知下的 PTable 对齐浏览器认为合适的方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T19:50:20.843

你想同时使用这两个`float: right`然后`text-align: left`on`div#Notify`来达到这个效果。此外，要确保 PTable 不会出现在 Notify 旁边，请使用`clear: both`.

```
#Notify, #PTable {
    clear: both;
}

#Notify {
    float: right;
    text-align: left;
} 
```

JS 小提琴：http: [//jsfiddle.net/SDDG2/2/](http://jsfiddle.net/SDDG2/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:58:19.890

这似乎有效！

```
<div id="Notify" style="clear:both;">
    <div style="float:right;">
        <div style="text-align:left;">
            Send Table to Standards By Email. (everything below is a placeholder)
            <br /><br />
            Saved at: @DateTime.Now.ToString()
            <br />  
            Saved by: 107
            <br /><br />
            <input type="submit" value="Send Email" />
        </div>
    </div>
</div>
<br />
<br />
<div id="PTable" style="clear:both;">
    Products Table Placeholder
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:52:23.950

您需要为 Notify div 指定一个固定的宽度，这将确保 PTable 不在它旁边。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T10:36:04.743

您可以移动 div 的上侧 div 例如：-

$("#parent").prepend($("#outer"));

# android - Android 插入日历意图 - 没有警报/提醒

> ID：11586054
> 
> 赞同：0
> 
> 时间：2012-07-20T19:48:11.917
> 
> 标签：android, calendar

我想通过意图插入一个日历事件。但是“添加事件”-Activity 不应预先填充提醒/警报。

```
Intent intent = new Intent(Intent.ACTION_INSERT)
    .setData(Events.CONTENT_URI)
    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())
    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())
    .putExtra(Events.TITLE, title)
    .putExtra(Events.DESCRIPTION, description)
    .putExtra(Events.HAS_ALARM, false)
    .putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true); 
```

这个意图将启动日历的“添加事件”——预先填充了一些数据的活动。但是，尽管我设置`Events.HAS_ALARM`为 false，但该活动已预先填充了提醒（在 Android ICS 上测试）。

更糟糕的是，提醒是在活动开始前 10 分钟预先填充的，如果是全天活动，这真的很糟糕。谁想在第二天晚上 11.50 点收到提醒？

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T20:08:54.523

我从来没有尝试过你上面的技术。这是我用来保存日历的代码片段。

```
public static void saveCalendar(Context ctx, String title,
        String description, String location, Calendar cal_start,
        Calendar cal_end) {

    // look for calendar
    Cursor cursor = ctx.getContentResolver()
            .query(Uri.parse("content://com.android.calendar/calendars"),
                    new String[] { "_id", "displayname" }, "selected=1",
                    null, null);
    cursor.moveToFirst();
    String[] CalNames = new String[cursor.getCount()];
    int[] CalIds = new int[cursor.getCount()];
    for (int i = 0; i < CalNames.length; i++) {
        CalIds[i] = cursor.getInt(0);
        CalNames[i] = cursor.getString(1);
        cursor.moveToNext();
    }

    cursor.close();

    // put calendar event
    ContentValues event = new ContentValues();
    event.put("calendar_id", CalIds[0]);
    event.put("title", title);
    event.put("description", description);
    event.put("eventLocation", location);
    event.put("dtstart", cal_start.getTimeInMillis());
    event.put("dtend", cal_end.getTimeInMillis());
    event.put("hasAlarm", 1);

    Uri eventsUri = Uri.parse("content://com.android.calendar/events");
    Uri newEvent = ctx.getContentResolver().insert(eventsUri, event);

    // put alarm reminder for an event, 2 hours prior
    long eventID = Long.parseLong(newEvent.getLastPathSegment());

    ContentValues cv_alarm = new ContentValues();
    cv_alarm.put("event_id", eventID);
    cv_alarm.put("method", 1);
    cv_alarm.put("minutes", 120);
    ctx.getContentResolver()
            .insert(Uri.parse("content://com.android.calendar/reminders"),
                    cv_alarm);

} 
```

如果您不希望警报/提醒设置为 0 到 hasAlarm 并且不要放置代码来添加警报。这个对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T17:24:01.887

HAS_ALARM 列需要 0 或 1 的整数布尔值。

```
intent.putExtra(Events.HAS_ALARM, 0); 
```

# actionscript-3 - Flex 4 约束百分比不起作用

> ID：11586056
> 
> 赞同：2
> 
> 时间：2012-07-20T19:48:20.050
> 
> 标签：actionscript-3, flash, apache-flex, flex4, constraints

我正在构建一个 Flex 应用程序，它使用约束属性来缩放应用程序内容的宽度。下面是一个`<s:List>`组件的示例，它使用约束属性将其从左侧和右侧隔开 10%：

```
<s:List id="list" left="10%" right="10%" top="10" borderVisible="false"
  contentBackgroundAlpha="0"
  creationComplete="listFetchDataHandler(event)"
  itemRenderer="renderers.FoodMenuRenderer">
    <s:AsyncListView list="{getAllMenuResult.lastResult}"/>
</s:List> 
```

这是上面代码的作用与我打算它应该做的事情的照片：

![在此处输入图像描述](../Images/2b020fdbb668c60ce2ca9f8801098203.png)

关于为什么我的代码无法正常工作的任何想法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:36:58.547

我想我知道我的困惑从何而来。我使用`<s:BasicLayout>`的是没有任何填充属性的。不知何故，随着这种混合，我想我可以使用百分比为组件添加填充。只有宽度可以使用百分比。

这是我用来完成我上面提到的事情的方法：

```
<s:List id="list" left="{width * 0.1}" width="80%" top="10" borderVisible="false"
  contentBackgroundAlpha="0"
  creationComplete="listFetchDataHandler(event)"
  itemRenderer="renderers.FoodMenuRenderer">
    <s:AsyncListView list="{getAllMenuResult.lastResult}"/>
</s:List> 
```

这按预期工作。

# javascript - 延迟后淡入div

> ID：11586057
> 
> 赞同：1
> 
> 时间：2012-07-20T19:48:26.177
> 
> 标签：javascript, html, time, delay, fade

我是 javascript 新手，所以我正在努力学习基础知识......

我正在使用这个延迟来引入一个 div，但我想将 div 作为这个功能的一部分淡入淡出（不仅仅是让盒子出现）

```
function show() {

AB = document.getElementById('div_with_text');

AB.style.display = 'inline';
}

setTimeout("show()", 3000); 
```

有人能帮忙吗？

我尝试添加以下内容：

```
$(function(){  
  $('#div_with_text').fadeIn('slow');  
}); 
```

但我对语言的了解不够好，无法让它工作......

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:29:06.433

你的DIV一开始就隐藏了吗？如果没有，那是你的问题。你正试图打开一扇已经打开的门。

您的代码也不正确，即使您隐藏了DIV，这也行不通。应该是`setTimeout(show, 3000);`

使用您提供的 JavaScript 代码 ( `setTimeout`)，在页面加载 3 秒后，您将尝试显示 DIV。您是否注意到 DIV 已经存在并且从未像您预期的那样在 3 秒后“出现”？

示例 - [http://jsfiddle.net/BLPTq/2/](http://jsfiddle.net/BLPTq/2/) - 只需单击运行并查看。

* * *

要使其工作，请先隐藏 DIV，然后调用 setTimeout 或 jQuery 方法。示例 - [http://jsfiddle.net/zeXyG/](http://jsfiddle.net/zeXyG/) - 只需单击运行并查看。检查 CSS`display:none;`

或者，如果您不想用 CSS 隐藏它，只需在调用`hide()`之前调用`fadeIn()`

```
$('#div_with_text').hide().fadeIn('slow'); 
```

示例 - [http://jsfiddle.net/zeXyG/1/](http://jsfiddle.net/zeXyG/1/)

* * *

根据您在下面的评论。添加`delay()`到呼叫，如下所示

```
$('#div_with_text').hide(); // this or use css to hide the div
$('#div_with_text').delay(2000).fadeIn('slow'); 
```

页面加载后 2 秒，这将隐藏 div，然后慢慢淡入。仔细看[这个例子。](http://jsfiddle.net/zeXyG/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:51:59.550

`fadeIn`仅当您在页面上加载 jQuery 库时，该方法才有效。没有它，该方法将无法工作，因为它不是本机 Javascript 的一部分。

加载 jQuery 后，[该方法](http://api.jquery.com/fadeIn/)将在您的语法正确时起作用。

# javascript - Javascript：TypeError 变量未定义

> ID：11586064
> 
> 赞同：5
> 
> 时间：2012-07-20T19:49:00.980
> 
> 标签：javascript, undefined

我目前正在构建一个跨所有模块具有类似功能的小型 Web 应用程序。我想编写小的通用函数，以便我旁边的所有程序员调用这些函数，这些函数返回必要但重要的数据，以便他们实现其功能。在这个例子中，我试图处理典型的“选择真或假”练习。所以从 template.php 他们调用这个函数：

```
function checkAnswers(){
var radiobuttons = document.form1.exer1;
var correctAnswers = answers(); //this is an array of string
var checkedAnswers = checkExerciseRB(radiobuttons, 2, correctAnswers);
    for(i=0; i<checkedAnswers.length; i++){
        alert(checkedAnswers[i]);
    }
} 
```

函数 checkExerciseRB 是我的通用函数，它是从 checkAnswers 调用的。

```
function checkExerciseRB(rbuttons, opciones, correct){
    var answers = new Array();
    var control = 0;
    for(i=0; i<rbuttons.length; i++){
        var noPick="true";
        for(j=0; j<opciones; j++){
            if(rbuttons[control+j].checked){
                if(rbuttons[control+j].value==correct[i]){
                    answers[i]= 1;
                    noPick="false";
                    break;
                }
                else{
                    answers[i]=2;
                    noPick="false";
                    break;
                }
            }
        }
        if(noPick=="true")
            answers[i]=0;
        control=control+opciones;
    }
    return answers;
} 
```

它工作得很好，但是在查看我最喜欢的浏览器（FireFox、Chrome）错误日志时，它说：

```
TypeError: rbuttons[control + j] is undefined 
```

关于如何处理这个问题的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T20:01:35.843

这可能意味着`control + j`大于或等于数组的长度`rbuttons`。没有像`rbuttons[control + j]`.

您应该学习如何在您喜欢的浏览器中使用 JavaScript 调试器！调试器很棒。它们让您可以逐行查看此代码的运行速度，随心所欲地快速或尽可能慢地运行，并观察其价值如何`control`随您的运行而变化。

你会看着它，你会想“哦！*那*行代码错了！”</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:02:47.793

您正在循环`rbuttons.length`时间，但在每个循环中，您将 2 添加到`control`. 使用`control`索引你的数组，你将跑到最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:01:30.047

control + j 指定的索引是否存在于数组中？即：如果计算结果为 4，那么数组中是否至少有 5 个项目？

此外，您应该在 for 循环中使用 var i、var j 等。没有它，您的变量将泄漏到执行此代码的范围内（很可能是全局范围，这不好）:)

# parallel-processing - 按行划分二维数组并使用 allgather？

> ID：11586065
> 
> 赞同：1
> 
> 时间：2012-07-20T19:49:07.813
> 
> 标签：parallel-processing, fortran, mpi, fortran90, openmpi

我有一个看起来像这样的循环：

```
do j=1,100
    do i=1,1000 
      combined_array(i,j)=combined_array(i,j-1)
      call foo(combined_array(i,j))
    enddo
enddo

subroutine foo(x)
    x= somefunction(x)
end subroutine foo 
```

我想拆分计算，但列中存在依赖关系。如果它不存在，我可以在列上拆分任务并使用 allgather（按列 [划分二维数组并使用 allgather](https://stackoverflow.com/questions/11573910/partition-a-2d-array-column-wise-and-use-allgather)）对于这个循环，我可以在行上拆分任务，但是如何使用 allgather 组合结果？每个等级获得的块在内存中不连续

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:40:23.140

MPI 为此类问题提供了跨步向量类型。您将使用等于总列高的步幅和等于子块中的行数的块大小来构造这种类型。您还可以为这种类型指定一个等于一行中的列数的计数。这是一个具体的示例：假设您有一个`REAL`包含`nr`行和`nc`列的矩阵，并且每个进程都包含一个包含`nr1`行的子块。然后你会这样做：

```
integer :: rowtype

call MPI_TYPE_VECTOR(nc, nr1, nr, MPI_REAL, rowtype, ierr)
call MPI_TYPE_COMMIT(rowtype, ierr) 
```

假设您想将一些数据接收到从 row 开始的子块中`myrow`。使用这种新类型，您可以简单地执行以下操作：

```
call MPI_RECV(array(myrow,1), 1, rowtype, src, tag, &
              MPI_COMM_WORLD, status, ierr) 
```

它的工作原理是这样的 - 从子块的左上角元素的提供的地址开始（即`array(myrow,1)`），它将`nr1`从接收到的消息中放置元素，然后将跳过`nr - nr1`的元素`array`，然后放置`nr1`更多元素并再次跳过`nr - nr1`元素等等，`nc`次数.

但是这里有一个问题。`rowtype`类型的范围是`nc*nr`元素。您不能这样使用它，`MPI_(ALL)GATHERV()`因为您只能将每个片段的开头定位在类型范围的倍数的偏移量处，即`nc*nr`. 为了克服这个限制，MPI 允许您使用`MPI_TYPE_CREATE_RESIZED`. 它需要一个类型并构建一个具有相同类型映射的新类型（例如，将使用与旧类型相同的“配方”在内存中布置元素），但是在计算偏移量和其他取决于类型范围的事情时, MPI 将使用用户提供的值而不是真实值。您需要做的是将范围更改`myrow`为等于`nr1`类型元素的范围`MPI_REAL`. 它是这样完成的：

```
integer(kind = MPI_ADDRESS_KIND) :: lb, extent
integer :: rowtype_resized

call MPI_TYPE_GET_EXTENT(MPI_REAL, lb, extent, ierr)
extent = extent * nr1
call MPI_TYPE_CREATE_RESIZED(rowtype, 0, extent, rowtype_resized, ierr)
call MPI_TYPE_COMMIT(rowtype_resized, ierr) 
```

现在您可以使用`rowtype_resized`来接收`nr1`行和`nc`列的子块，但您可以定位它们以便从大的任何行开始，`array`即多个或`nr1`不仅在总大小的倍数上`array`。然后，您可以像这样进行：

```
call MPI_ALLGATHER(smallarray, nr1*nc, MPI_REAL, &
                   array, 1, rowtype_resized, MPI_COMM_WORLD, ierr) 
```

`smallarray`这会将小数组（每`nr1`行和每列）的内容收集`nc`到大数组`array`（每`nr1 * #processes`行和每`nc`列）中。

您甚至可以更加灵活，将向量类型注册为块长度为 1 而不是`nr1`. 这将允许您发送单行。然后，您可以创建一个范围为一个`MPI_REAL`元素的调整大小的类型，并用于`MPI_(ALL)GATHERV`收集不同大小的子块。

我知道这有点棘手，但随着时间的推移，人们学会了如何掌握 MPI 的类型系统。

# jquery-mobile - 有没有办法在页面或标题数据角色之外使用 JQM 按钮样式？

> ID：11586067
> 
> 赞同：0
> 
> 时间：2012-07-20T19:49:18.893
> 
> 标签：jquery-mobile

我不久前才开始使用 JQM。我使用默认的 VS2012 asp.net 移动项目开始。我喜欢移动页面的工作方式，但希望在每个页面的顶部有一个固定区域，基本上有 3 列，其中之一是徽标。我已经在 _layout.cshtml 中完成了该操作（从一个基本表开始），并且在它的正下方是我开始 JQM 页面布局的地方。这一切都运作良好，我喜欢页面转换的发生方式，同时在顶部保持固定的标题区域。

但是，我想在顶部的固定区域添加一个按钮，该按钮的样式类似于其他 JQM 按钮。这不起作用，因为按钮不在我认为的有效页面或标题数据角色内。有没有办法利用这些数据角色之外的 HTML 的 JQM 样式？

例如，我想为登录按钮使用锚标记，并且当它位于具有 data-role =“header”的 div 中时，它的样式与带有齿轮图标的样式相同。我不确定我是否有足够深入的了解来深入了解 .css 文件中使用的所有元素，并希望有其他单独的类或我可以利用的东西。

这是我试图显示为按钮的行，但我只获取文本（虽然可以作为锚标签工作）：

```
<a data-role="button" data-transition="pop" href="/Vision/Account/Login">Log in</a> 
```

另外，我正在使用 jquery.mobile-1.1.0 和 jquery-1.7.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:26:29.610

您可以通过在元素上调用 jQuery Button Widget 将任何元素设置为按钮：

```
$('.login-button').button(); 
```

按钮功能还接受图标和主题等选项：

```
$('.login-button').button({
    icon: 'gear'
}); 
```

另请参阅：http: [//jquerymobile.com/test/docs/buttons/buttons-options.html](http://jquerymobile.com/test/docs/buttons/buttons-options.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:34:29.027

尝试将 data-role="button" 添加到您的锚标记。

# python - 折叠 Pandas 多索引或在多索引数据帧上运行 OLS 回归

> ID：11586068
> 
> 赞同：2
> 
> 时间：2012-07-20T19:49:20.550
> 
> 标签：python, hierarchical-data, regression, pandas, multi-index

我使用 pivot 来重塑我的数据，现在有一个 column `multiindex`。我希望结果列是简单 OLS 回归中的 X 变量。Y 是具有相同行索引的另一个系列。

当我尝试跑步时

```
model1 = ols(y = gdp0, x = MIDAS_small) 
```

我明白了

```
TypeError: can only call with other hierarchical index objects 
```

我可以想象两种解决方案，但无法弄清楚任何一种：

1.  折叠多索引。与其拥有 ('before', 'var1') 和 ('after', 'var1') 形式的列，我只会有一堆 'beforevar1'、'aftervar1' 等。然后我可以使用 ols 来制作一张漂亮且足够清晰的桌子。

2.  有没有办法用多索引运行回归？似乎它部分是为这类事情而设计的，尤其是面板回归，但我找不到任何相关的示例或文档。

好吧，我找到了#1 的一个不优雅的解决方案：我可以创建一个新的数据框，循环遍历两个列索引，并将新列插入到具有相同名称的新数据框中，但名称为字符串而不是元组。必须有一个更优雅、更单一的命令，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T18:02:36.313

您是否厌倦了使用来自 Patsy 的 dmatricies 来准备回归友好的 DataFrame？

一个示例位于此处：

[http://statsmodels.sourceforge.net/devel/gettingstarted.html](http://statsmodels.sourceforge.net/devel/gettingstarted.html)

我确定您知道 pandas 中的 .unstack() 函数可以让您删除分层索引，但它与 dmatrices 可能会产生您正在寻找的结果。

# ajax - chrome浏览器的休息网络服务调用

> ID：11586073
> 
> 赞同：1
> 
> 时间：2012-07-20T19:49:38.330
> 
> 标签：ajax, rest, google-chrome, call, webservice-client

我的第一篇文章我试图调用一个休息网络服务来使用 AJAX 动态填充我的爱。它在 IE8 中对我来说很好，但在 chrome 中却不行。在执行我在下面的代码中提到的内容时，我无法到达特定的行。我有什么遗漏吗。请帮忙。

07-24-2012 - 我找到了这个问题的根本原因。其原因在于 html 代码中指定的应用程序缓存代码。一旦我删除了ajax调用就可以正常工作。但我需要让这个页面在离线模式下可用。对此有什么建议可以使页面脱机可用并且ajax webservice调用也可以正常工作吗？谢谢，

```
<script type="text/javascript">
var eleCount;
var xmlDoc;
function init() {
eleCount =0;
}
function populate()
{
var xmlhttp;

if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    alert("Window for chrome");
     xmlhttp = new XMLHttpRequest();
     }
    else
      {// code for IE6, IE5
      alert("Else Window for IE");
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
      xmlDoc.async = false;
      }
    var url = "http://localhost:7101/Mobile-MobileModel-context-    root/jersey/Search/searchLov";
    xmlhttp.onreadystatechange = function() 
    {
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
    var det = xmlhttp.responseText ;
    if (window.DOMParser)
                                 {
    //I cannot reach this line while executing.
    alert("This alert is not appearing");
    var parser=new DOMParser();
    xmlDoc=parser.parseFromString(det,"text/xml");
    var x=xmlDoc.getElementsByTagName("fieldValue");
    var txta =new Array();
    ....some code
      }
  }
else // Internet Explorer
  {
    alert("else window DOM parser for IE");
    xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async = false;
    xmlDoc.loadXML(det); 
   ...... some code
  } // end for
} //end else for Other Browser (window.DOMParser)
} //end if Readystate 4 and Status 200
else{

      }//else
}//close OnReadyStatechange Function
 xmlhttp.open('GET',url,true);
 xmlhttp.send(null);   
 eleCount = eleCount + 1;
                }//end Function Populate()
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:24:51.323

我让它工作了——每当我添加这一行时就会出现问题 `<HTML manifest=../../demo.appcache>`此代码会将清单文件中提到的文件下载到浏览器的应用程序缓存中。当我删除这条线时，其余的电话工作正常。

# php - 制作 RewriteRule 来模拟 reddit 或 Rails？

> ID：11586074
> 
> 赞同：1
> 
> 时间：2012-07-20T19:49:39.157
> 
> 标签：php, apache, .htaccess, mod-rewrite

为了好玩，我想在 php 中制作一个 reddit 克隆。我主要有 java 经验，但知道我在 php 周围的方式，如果这很重要的话。我对 Rails 3 的经验也非常有限，我相信 rails 处理 URL 的方式也接近我想要的处理方式。

到目前为止，在 .htaccess 中我有：

```
RewriteEngine On
RewriteBase / 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.+)$ /index.php/$1 [L] 
```

这会将每个页面路由到 index.php，我在其中解析 URI 并使用开关处理请求。我知道从长远来看这是不可扩展的，但我想开始。

我的下一步是在像 localhost/r/all 这样的 URL 的末尾自动添加一个 / ，这样它就变成了我想要的 localhost/r/all/ 并尝试制作一个 RewriteRule ，例如：

```
RewriteRule ^/?(.+)$ /$1/ [R] 
```

这给出了 500 错误。我认为这是因为它陷入了无限的重定向循环，因为 /$1/ 将等于 ^/?(.+)。所以我需要类似的东西：

```
RewriteRule ^/?(.+)Does not end in a forwardlash$ /$1/ [R] 
```

我怎样才能做到这一点？我看到了！charecter 可用于表示它不应该匹配的条件，但我无法让它工作。

任何建议表示赞赏。

**编辑：**

```
getenv("DOCUMENT_ROOT") //gives /var/www 
```

我有 /var/www/index.php 生活在 /www 中。我正在对其进行这些更改的 .htaccess 文件位于 /var 中。

我在 /var 中有 .htaccess 因为在我的 httpd.cong 我有这个：

```
<Directory /var>
AllowOverride All
</Directory> 
```

我首先尝试将其作为

```
<Directory /var/www> 
```

并将 .htaccess 放在 www 中，但它永远不会被读取。我知道它没有被读取，因为我在里面放了垃圾并且没有错误。但是，如果我在 /var 中时有垃圾，并且 Dectory 指令指定 /var，我会收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:17:37.103

试试这个（未经测试）：

```
# Turn mod_rewrite on, yada yada yada
RewriteEngine On
RewriteBase / 

# We'll want to do the redirect before rewriting anything
# Files obviously don't have a trailing slash, and directories require one - so
# we only need to check if the file exists
# I'm not actually sure if mod_rewrite understands non-capturing groups though
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/?((?:.+?)[^/])$ http://%{HTTP_HOST}/$1/ [L,R=301]

# Do the rewrite
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ /index.php/$1 [L] 
```

我觉得您尝试的问题可能是规则的顺序，重定向中的缺失`RewriteCond`和`RewriteRule`/或您没有`L`在重定向中放置标志`RewriteRule`- 但上述正则表达式让我比你的更快乐，因为它们对匹配的内容更具体一些。

我实际上不确定是否`mod_rewrite`支持我上面使用的所有正则表达式功能，所以如果您继续收到错误，这可能就是原因 - 如果您确实遇到问题，请回到这里，我会更仔细地查看它。

# rest - 向谷歌 RESTful 搜索 API 提供纬度/经度

> ID：11586077
> 
> 赞同：1
> 
> 时间：2012-07-20T19:49:56.333
> 
> 标签：rest, geolocation, google-api

我一直在尝试找到一种能够始终如一地为本地搜索提供高质量结果的搜索实现，经过一番折腾，我发现可以通过 Google 的 RESTful API 使用本地搜索。

例如这个网址：

```
https://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=skydiving&near=new%20york%20ny 
```

提供附近的跳伞中心列表`New York, NY`。

然而，发现这一点只是纯粹的实验，因为我还没有找到任何关于本地搜索 REST 功能/参数的文档。

有谁知道是否可以提供纬度/经度，而不是城市/州？

# php - 将数组数组保存到数据库

> ID：11586079
> 
> 赞同：0
> 
> 时间：2012-07-20T19:50:03.373
> 
> 标签：php, joomla

经过大量搜索和尝试后失败..我在这里发布这个问题..

在我实际查询的一半 [here][1] 之后，我无法将结果数组保存到数据库中。

最初我有一个输入数组，我把它变成了输入数组数组，现在我的保存函数看起来像这样

```
function store()
{
        foreach($post['cats'] as $cat)  {

        $query = 'insert into #__joomd_item_cat values('.$cat.', '.$row->id.')';
        $this->_db->setQuery( $query );

        if(!$this->_db->query())    {
            $obj->error = $this->_db->getErrorMsg();
            return $obj;
        }

    }
} 
```

现在，我如何修改它以将我的数组数组放入数据库..

此功能由序列化方法触发..所以请重新检查您的答案和评论

```
function save(task) {
var data = $jd("form[name='<?php echo $array['editform']; ?>']").serializeArray();
    $jd.ajax({
          url: "<?php echo $url; ?>",
          type: "POST",
          dataType:"json",
          data: data,
          beforeSend: function()    {
            $jd(".poploadingbox").show();
          },
          complete: function()  {
            $jd(".poploadingbox").hide();
          },
          success: function(res)    {

            savesuccess(res);

          },
          error: function(jqXHR, textStatus, errorThrown)   {
            alert(textStatus);                 
          }
    }); 
```

}

```
 [1]: http://stackoverflow.com/questions/11583375/add-input-fields-dynamically-but-fields-are-generated-by-external-php-functions/11583597#11583597 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:52:05.427

你可以[`serialize()`](http://us2.php.net/manual/en/function.serialize.php)它，然后[`unserialize()`](http://us2.php.net/manual/en/function.unserialize.php)在检索时它。

# .net - 使用共享配置时 IIS 7.5 中的代码访问安全异常

> ID：11586081
> 
> 赞同：0
> 
> 时间：2012-07-20T19:50:19.177
> 
> 标签：.net, windows, security, iis, rabbitmq

我想让一个 ASP.NET 应用程序使用 RabbitMQ 的本机客户端写入消息队列。为此，我将 RabbitMQ dll 放在我的 Web 应用程序的 /bin 目录中，并创建了一个 .aspx 测试页面。

当我测试脚本时，我收到以下异常 System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.EnvironmentPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed。

进一步调查问题，**我相信这是因为 dll 物理存储在另一台计算机上的共享目录中**。研究使我通过执行以下操作来调整代码访问安全策略：

```
c:\Windows\Microsoft.NET\Framework\v2.0.50727\CasPol.exe -m -ag 1 -url "file://\\server\IISSharedContent\webfarm\stage\dev-stage\bin\*" FullTrust -exclusive on 
```

重新启动 IIS 后似乎没有用。

我也试过：

*   将应用程序池标识设置为网络服务
*   将应用程序池“加载用户配置文件”设置为 True
*   添加到 web.config

**有没有人有任何可以帮助我的见解？**

* * *

全栈跟踪：

```
[SecurityException: Request for the permission of type 'System.Security.Permissions.EnvironmentPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
       System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
       System.Security.CodeAccessPermission.Demand() +54
       System.Environment.GetEnvironmentVariable(String variable) +135
       RabbitMQ.Client.Protocols.ReadEnvironmentVariable() +22
       RabbitMQ.Client.Protocols.FromEnvironment(String appSettingsKey) +37
       RabbitMQ.Client.ConnectionFactory..ctor() +176
       ASP.api_messagesearch_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) in \\server\iissharedcontent\webfarm\stage\dev-stage\api\MessageSearch.aspx:9
       System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +115
       System.Web.UI.Page.Render(HtmlTextWriter writer) +38
       System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +11070247
       System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +11069786
       System.Web.UI.Page.ProcessRequest() +91
       System.Web.UI.Page.ProcessRequest(HttpContext context) +240
       ASP.api_messagesearch_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\cb973a2c\79ccea1e\App_Web_x0q-uejx.0.cs:0
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +599
       System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +171 
```

我的测试脚本的代码：

```
ConnectionFactory rabbitConFactory = new ConnectionFactory();
rabbitConFactory.Address = "hostname";
rabbitConFactory.VirtualHost = "/path";
rabbitConFactory.UserName = "user";
rabbitConFactory.Password = "password";

IConnection connection = rabbitConFactory.CreateConnection();

IModel channel = connection.CreateModel();

Dictionary<String, Object> args = new Dictionary<string, object>();
args.Add("x-ha-policy", "all");
String ExchangeName = "SearchInstructions";
channel.ExchangeDeclare(ExchangeName, "topic", true, false, args);

Guid myId = new Guid();
String RoutingKey = myId.ToString() + ".Instruction";
IBasicProperties MessageProperties = channel.CreateBasicProperties();
MessageProperties.SetPersistent(true);
MessageProperties.ContentEncoding = "UTF-8";
MessageProperties.ContentType = "text/xml";
MessageProperties.Headers.Add("x-origin",
Request.ServerVariables["ServerName"]);

String messageContent = "<foo />";
byte[] data = System.Text.Encoding.UTF8.GetBytes(messageContent);
channel.BasicPublish(ExchangeName,RoutingKey, MessageProperties, data);

channel.Close();
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:27:47.077

好的，在两个小时的大部分时间里一直在努力解决这个问题，我想出了一个简单而明显的解决方案：

**使用 32 位和 64 位版本的 caspol.exe**

为了正确设置此共享的信任，我必须运行 caspol.exe 两次。

```
c:\Windows\Microsoft.NET\Framework\v2.0.50727\CasPol.exe -m -ag 1 -url "file://\\server\IISSharedContent\webfarm\stage\dev-stage\bin\*" FullTrust 
```

**然后运行**

```
c:\Windows\Microsoft.NET\Framework64\v2.0.50727\CasPol.exe -m -ag 1 -url "file://\\server\IISSharedContent\webfarm\stage\dev-stage\bin\*" FullTrust 
```

我重新启动了 IIS，一切都像冠军一样工作......（除了一些其他错误）。

# mysql - 在 Magento 中为模块创建数据库函数

> ID：11586096
> 
> 赞同：2
> 
> 时间：2012-07-20T19:51:18.070
> 
> 标签：mysql, sql, magento

我在 Magento 中有一个工作模块，它模仿了我们在安装之外使用的一些自定义代码。该模块目前向数据库添加 5 个表来存储信息，并且我已将 Admin 扩展为 CRUD 信息。这里的最终目标是将大部分自定义编程转移到 Magento 中。

目前，我们的自定义代码位于 Magento 外部并访问一个单独的数据库。该数据库具有相同的 5 个表、一个存储过程和 4 个函数。我现在想做的是将存储过程和函数移动到 Magento 的数据库中，并更改自定义代码以从 Magento 的数据库中调用所有数据。但是，我似乎无法弄清楚应该如何为 Magento 设置“CREATE FUNCTION”调用才能正确执行它。

我使用的 SQL 是：

```
DROP FUNCTION IF EXISTS {$this->getTable('fn_Get_HardinessZone')};
CREATE FUNCTION {$this->getTable('fn_Get_HardinessZone')}(IN ZipCode varchar()) RETURNS integer AS
  DECLARE Result integer;       
BEGIN
  SELECT  MAX(Zone) into Result
  FROM    AMI_zones
  WHERE      (Hfzip <= LEFT(ZipCode, 5)) AND (Htzip >= LEFT(ZipCode, 5));
  if Result is null or Result < 1 or (Result > 11 and Result <> 99) Then
    /*if the left most character is alpha, then set the zone to 98 for Canada*/
   if Left(zipCode, 1) >= 'A' and LEFT(zipcode,1) <= 'Z' THEN
     set result = 98;
   else          
    set Result = 99;
   End if;
  END if;
  RETURN Result;
END; 
```

但这总是会产生以下错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IN ZipCode varchar()) RETURNS' 
```

那么，格式化 SQL 调用以在模块的安装/更新脚本中运行以将函数或存储过程插入 Maganeto 数据库的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:23:58.703

问题在于您的 SQL 语句：

> 您的 SQL 语法有错误；检查手册...以获取正确的语法在附近使用
> 
> ' `IN ZipCode varchar()) RETURNS`'

我建议通过 PhpMyAdmin 或在命令行上运行 SQL，直到正确为止，然后通过 Magento 运行它。此手册页描述了以下语法`CREATE FUNCTION`：[http](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html) ://dev.mysql.com/doc/refman/5.0/en/create-procedure.html 。在 mysql 客户端（或 PhpMyAdmin）中测试存储过程/函数时，请务必[更改分隔符](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-defining.html)，以便正确解释函数主体中的分号。

下面的 SQL 对我有用。我从你原来的陈述中改变的事情是：

1.  `IN`不允许在函数声明中`(IN ZipCode varchar())`
2.  我被要求明确说明`varchar`
3.  函数内部的`DECLARE`属于
4.  我猜你的函数是`DETERMINISTIC`，这意味着它总是会为相同的输入参数产生相同的结果。如果不是这种情况，`DETERMINISTIC`请从`RETURNS`行中删除

试一试：

```
DROP FUNCTION IF EXISTS {$this->getTable('fn_Get_HardinessZone')};
CREATE FUNCTION {$this->getTable('fn_Get_HardinessZone')} (ZipCode VARCHAR(15))
  RETURNS INTEGER DETERMINISTIC
BEGIN
  DECLARE result INTEGER;
  SELECT  MAX(Zone) INTO result
  FROM    AMI_zones
  WHERE   (Hfzip <= LEFT(ZipCode, 5)) AND (Htzip >= LEFT(ZipCode, 5));
  IF result IS NULL OR result < 1 OR (result > 11 AND result <> 99) THEN
    /* if the left most character is alpha, then set the zone to 98 for Canada */
    IF LEFT(ZipCode, 1) >= 'A' AND LEFT(ZipCode, 1) <= 'Z' THEN
      SET result = 98;
    ELSE
      SET result = 99;
    END IF;
  END IF;
  RETURN result;
END; 
```

# c# - File.Move 在 C# 中与 BackgroundWorkerr 一起使用时会引发错误

> ID：11586100
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:51:42.230
> 
> 标签：c#, file-io, backgroundworker

## 解决了

> 我发现 GetNewFolderNameBasedOnDate 方法内部没有关闭文件。我已经修复了该方法，现在可以正常工作

我正在尝试使用 C# 中的 BackgroundWorker 进程将选定的文件从一个文件夹移动到另一个文件夹。这是我的 DoWork() 方法，用于确定是移动文件还是仅复制。我的 File.Move() 抛出异常“该进程无法访问该文件，因为它正被另一个进程使用”。我尝试了stackoverflow中线程中提到的不同方法。

```
private void FileProcessor_DoWork(object sender, DoWorkEventArgs e)
{
    // Copy files
    long bytes = 0;
    string destSubFolder = String.Empty;
    string destFile = string.Empty;
    foreach (FileInfo file in oSettings.SourceFiles)
    {
        try
        {
            this.BeginInvoke(OnChange, new object[] { new UIProgress(file.Name, bytes, oSettings.MaxBytes) });

            destSubFolder = GetNewFolderNameBasedOnDate(file);

            //Create a new subfolder under the current active folder
            string newPath = Path.Combine(oSettings.TargetFolder, destSubFolder);
            // Create a new target folder, if necessary.
            if (!System.IO.Directory.Exists(newPath))
            {
                System.IO.Directory.CreateDirectory(newPath);
            }
            destFile = Path.Combine(oSettings.TargetFolder, destSubFolder, file.Name);

            if (chkDeleteSourceFiles.Checked)
            {
                FileInfo f = new FileInfo(file.FullName);

                if (f.Exists)
                {
                    File.Move(file.FullName, destFile);
                }
            }
            else
            {
                File.Copy(file.FullName, destFile, true);
            }

            //Thread.Sleep(2000);
        }
        catch (Exception ex)
        {
            UIError err = new UIError(ex, file.FullName);
            this.Invoke(OnError, new object[] { err });
            if (err.result == DialogResult.Cancel) break;
        }
        bytes += file.Length;
    }
} 
```

我也尝试删除“RunWorkerCompleted”方法中的文件。但没有解决问题。当它尝试删除列表中的最后一个文件时失败。

```
private void FileProcessor_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Operation completed, update UI
    ChangeUI(false);

    foreach (FileInfo file in oSettings.SourceFiles)
    {
        File.Delete(file.FullName);
    }
} 
```

GetNewFolderNameBasedOnDate() 调用 GetDateTaken() 这是罪魁祸首。早些时候我没有使用 FileStream 对象，但使用`Image myImage = Image.FromFile(filename);`了我不知道 Image.FromFile 锁定了文件。

```
private DateTime GetDateTaken(string fileName)
{
    try
    {
        using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read))
        {
            Image myImage = Image.FromStream(fs);
            PropertyItem propItem = myImage.GetPropertyItem(36867);
            DateTime dtaken;

            //Convert date taken metadata to a DateTime object
            string sdate = Encoding.UTF8.GetString(propItem.Value).Trim();
            string secondhalf = sdate.Substring(sdate.IndexOf(" "), (sdate.Length - sdate.IndexOf(" ")));
            string firsthalf = sdate.Substring(0, 10);
            firsthalf = firsthalf.Replace(":", "-");
            sdate = firsthalf + secondhalf;
            dtaken = DateTime.Parse(sdate);
            return dtaken;
        }
    }
    catch (Exception ex)
    {
        return DateTime.Now;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:32:13.410

我的猜测是，它是对 OnChange 的 BeginInvoke 调用和持有文件的新 UIProgress() 对象。UIProgress 是否打开文件？您可以尝试仅使用 Invoke() 看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:07:39.777

不要创建新的 FileInfo 对象，而是保持简单并重复使用相同的对象。我怀疑问题是您的代码中有多个对同一个文件的引用，这会阻止它被删除。尝试这样的事情来移动它：

```
if (chkDeleteSourceFiles.Checked)
{
    if (file.Exists)
    {
        file.MoveTo(destFile);
    }
} 
```

# gitolite - 在gitolite中应该为“git”用户分配什么权限

> ID：11586105
> 
> 赞同：1
> 
> 时间：2012-07-20T19:52:07.960
> 
> 标签：gitolite

我在本论坛成员的帮助下并使用以下说明设置了 git 和 gitolite：

[https://github.com/sitaramc/gitolite](https://github.com/sitaramc/gitolite)

在说明中，要求之一是：

> a 专用`userid`于托管 repos（在本文档中，我们假设它是 ' `git`'），shell 只能由同一服务器上的`su - git`其他某个服务器上的 ' ' 访问。`userid`

这些是下面显示的正确权限吗？

```
sudo chown git /home/git
sudo chmod -R 755 /home/git 
```

...或者是否有更合适的设置来提供必要的安全性和功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:07:34.900

是和否：

如果您想要“更安全”的东西 `/home/git`，那么 , 也可以使用。`700`

但是您不必在主目录中以相同的方式保护所有内容`git`，尤其是`.ssh`目录。

主要的一点是避免' `+gw`' 和 ' `+ow`'`/home/git`本身：如果 ' `group`' 或 ' `others`' 是可写的，ssh 将不起作用（ssh 守护进程将拒绝考虑`/home/git/.ssh`内容）

请参阅“[为 Gerrit 和 Hudson 创建 SSH 密钥](https://stackoverflow.com/questions/3712443/creating-ssh-keys-for-gerrit-and-hudson/3712619#3712619)”作为适当 ssh 保护的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:55:18.517

我在 Fedora 上创建了 Gitolite 托管用户，如下所示。其他发行版在 adduser 命令中有类似的选项

```
useradd \
--comment ‘git hosting user’ \
--user-group \
--system \
--shell /bin/bash \
--create-home \
--home-dir /home/git git 
```

在 Fedora 上，此命令创建一个本地密码锁定的系统帐户 git。未提供 --password 选项时 useradd 命令的默认选项是禁用密码。

据我了解，这将为托管用户提供一个交互式非登录 shell，如下所示：

```
sudo su - git 
```

注意：这个问题是不久前提出的，但我在安装 Gitolite 时遇到了同样的问题（但没有找到答案）。我想通了（或者，我想）。所以就在这里。

# java - 使用 JAXB 基于属性解析 xml

> ID：11586106
> 
> 赞同：3
> 
> 时间：2012-07-20T19:52:10.643
> 
> 标签：java, xml, jaxb

我正在使用 JAXB 来解析一些 xml。

```
<countries>
    <Name language="en">Australia</Name>
    <Name language="se">Australien</Name>
</countries> 
```

如果我在我的班级国家使用

```
@XmlElement(name = "Name", required = true)
    protected List<Name> name; 
```

一切正常。但是我只想获取 language="en" 的属性

所以我在我的国家课上有

```
protected String name 
```

不是一个集合。

例如，有没有一个很好的方法可以通过一些注释来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:35:00.213

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员

以下是您可以处理此用例的两种方法。第一个是更多的代码，但可以使用任何 JAXB 实现来完成。第二个是更少的代码，但需要您使用 EclipseLink JAXB (MOXy)。

**选项 #1 - 任何 JAXB (JSR-222) 实现**

***演示***

您可以使用过滤的流阅读器来过滤掉不需要的元素，并让您的 JAXB 实现对其进行解组。

```
package forum11586106;

import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    private static final String LANGUAGE_CODE = "en";

    public static void main(String[] args) throws Exception {
        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(new StreamSource("src/forum11586106/input.xml"));
        xsr = xif.createFilteredReader(xsr, new StreamFilter() {

            private boolean isReading = true;

            @Override
            public boolean accept(XMLStreamReader reader) {
                if(reader.isStartElement() && "Name".equals(reader.getLocalName())) {
                    isReading = LANGUAGE_CODE.equals(reader.getAttributeValue("", "language"));
                    return isReading;
                } else if(reader.isEndElement() && !isReading) {
                    isReading = true;
                    return false;
                }

                return true;
            }});

        JAXBContext jc = JAXBContext.newInstance(Countries.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Countries countries = (Countries) unmarshaller.unmarshal(xsr);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(countries, System.out);
    }

} 
```

***国家***

```
package forum11586106;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Countries {

    private String name;

    @XmlElement(name="Name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

***输入.xml***

使用这种方法，输出中不包含语言属性：

```
<countries>
    <Name language="en">Australia</Name>
    <Name language="se">Australien</Name>
</countries> 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<countries>
    <Name>Australia</Name>
</countries> 
```

* * *

**选项 #2 - ECLIPSELINK JAXB (MOXy)**

我们将利用 MOXy 的`@XmlPath`扩展来映射到具有值属性的`Name`元素（请参阅[http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)）。`language``en`

***国家***

```
package forum11586106;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Countries {

    private String name;

    @XmlPath("Name[@language='en']/text()")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

***jaxb.properties***

要将 MOXy 作为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***演示***

使用这种方法，元素过滤由`@XmlPath`映射处理，因此运行时部分变得更加简单。请注意如何仅使用标准 JAXB 运行时 API。

```
package forum11586106;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Countries.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11586106/input.xml");
        Countries countries = (Countries) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(countries, System.out);
    }

} 
```

***输入.xml***

```
<countries>
    <Name language="en">Australia</Name>
    <Name language="se">Australien</Name>
</countries> 
```

***输出***

使用这种方法，`language`属性包含在输出中：

```
<?xml version="1.0" encoding="UTF-8"?>
<countries>
   <Name language="en">Australia</Name>
</countries> 
```

# android - 在滚动区域拖动自定义视图

> ID：11586108
> 
> 赞同：1
> 
> 时间：2012-07-20T19:52:17.750
> 
> 标签：android, touch-event, android-custom-view

所以我有一个自定义视图小部件，我允许用户用手指拖动。他们将它拖到一个基于 FrameLayout 的自定义滚动视图中（这里的代码：http: [//blog.gorges.us/2010/06/android-two-dimensional-scrollview/](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)），其中包含一个 RelativeLayout，以便他们可以放置它可以放在他们想要的地方，并且有足够的空间在屏幕上不可见，也可以放置物品。

我想要发生的是，如果用户将小部件移动到可见滚动区域的边缘附近，就是在适当的方向滚动该区域，直到他们松开（ACTION_UP，在这种情况下无论如何都不会发生更多事件）或已远离边缘。现在的代码有两个问题：

1) 我的手机 (T-Mobile G2) 会继续触发 ACTION_MOVE，即使我的手指还在，因为我的 Nexus 7 平板电脑在移动之前不会继续触发。我需要可靠地继续触发此事件，直到 ACTION_UP。

2）该区域滚动，但仅当我将手指移向屏幕边缘时。换句话说，我希望一个静止的手指在靠近边缘时继续滚动和移动对象，但这并没有发生。

我错过了什么？这是处理小部件移动的 onTouchEvent

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_MOVE
            && this.getParent() != null) {
        getParent().requestDisallowInterceptTouchEvent(true);
    }

    // mScrollParent gets set in a setter and points to the TwoDScrollView
    // mOffsetX/Y is based on where the user touches versus the position of the custom view
    // mWidth/mHeight gets set once in the GestureDetector based on the custom view's getWidth()/getHeight()
    // mTitleBarHeight gets set once in the GestureDetctor onDown event
    // lp is a ViewGroup.LayoutParams type
    if (!mGestureDetector.onTouchEvent(event)) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            int finalX = (int) (event.getRawX() - mOffsetX);
            int finalY = (int) (event.getRawY() - mOffsetY - (mTitleBarHeight > 0 ? mTitleBarHeight * 2
                    : 0));

            if (finalX < 0 || finalY < 0)
                return false;

            int scrollLeft = (int) Math.ceil(mScrollParent.getScrollX() * 1.05);
            int scrollTop = (int) Math.ceil(mScrollParent.getScrollY() * 1.05);
            int scrollRight = (int) Math.floor((scrollLeft + mScrollParent.getRight()) * 0.95);
            int scrollBottom = (int) Math.floor((scrollTop + mScrollParent.getBottom()) * 0.95);
            int scrollX = 0;
            int scrollY = 0;

            if (scrollLeft > finalX)
                scrollX = finalX - scrollLeft;

            if (scrollRight < (finalX + mWidth))
                scrollX = (finalX + mWidth)- scrollRight;

            if (scrollTop > finalY)
                scrollY = finalY - scrollTop;

            if (scrollBottom < (finalY + mHeight))
                scrollY = (finalY + mHeight) - scrollBottom;

            if (scrollX != 0 || scrollY != 0)
                mScrollParent.scrollBy(scrollX * 4, scrollY * 4);

            lp.setMargins(finalX + scrollX, finalY + scrollY, 0, 0);
            setLayoutParams(lp);

            return true;
        }
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
            return true;
        } else {
            return super.onTouchEvent(event);
        }
    } else {
        return true;
    }
} 
```

# qt - 拖动动作完成时触发动作

> ID：11586109
> 
> 赞同：0
> 
> 时间：2012-07-20T19:52:22.000
> 
> 标签：qt, events, drag-and-drop, mime

我试图允许将 QListWidget 中的项目拖到“垃圾箱”（一个接受丢弃并且不对其执行任何操作的子类小部件）。

我知道如果我`setDropAction(Qt.MoveAction)`，我从源中删除的项目将被自动删除。这可以正常工作。
我的问题是我还需要触发一个操作来更新依赖源内容的其他小部件。

在我看来，dropEvent 发生在实际从源中删除任何项目之前。我很难弄清楚这个问题。我想到了两种可能的解决方案：

1.  找到一种方法将引用嵌入到事件的 QMimeData 中被拖动的实际 QListWidgetItems。这将允许我在触发更新之前手动删除。

2.  弄清楚如何等到源被自动清除，但我找不到在自动从列表中删除项目时触发的任何信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:14:08.153

啊哈！

我缺少的关键是`mimeData`方法。当开始拖动时调用此方法，并在其中传递了所有正在拖动的文件的列表。

我首先构建了要返回的元对象，然后我删除了从列表中拖动的文件，并调用了我需要的刷新操作。

这是一个例子：

```
def mimeData(self, items):
    m = QMimeData()
    m.setUrls([QUrl(i.url) for i in items])

    # Clean up the list:
    [self.files.takeItem(self.files.indexFromItem(i).row()) for i in items]
    self._update_meta()

    return m 
```

# jquery - jquery函数包装vs dom准备好了

> ID：11586114
> 
> 赞同：1
> 
> 时间：2012-07-20T19:52:45.550
> 
> 标签：jquery, domready

> **可能重复：**
> [这些 jQuery 就绪函数之间有什么区别？](https://stackoverflow.com/questions/2662778/what-is-the-difference-between-these-jquery-ready-functions)

```
$(function(){
    // ... do stuff
}); 
```

VS

```
$(document).ready(function() {
    // ... do stuff
}); 
```

我在一些旧代码中看到了第一个，我认为两者相似？一个比另一个有好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:54:21.467

它们是完全相同的东西。我现在开始使用第一种方法，因为它更简写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:53:45.400

它们是相同的，除了第一个版本只是简写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:53:47.550

根据[jQuery 文档](http://api.jquery.com/ready/)，这些是等效的

# javascript - Range.deserializeSelection 校验和错误？

> ID：11586115
> 
> 赞同：0
> 
> 时间：2012-07-20T19:52:49.783
> 
> 标签：javascript, rangy

[这是this](https://stackoverflow.com/questions/11537032/how-to-grab-selected-text-from-iframe-using-rangy)的后续问题。我已经序列化了 iframe 中的文本选择并想要恢复它，但它给了我一个错误，“未捕获的错误：deserializeRange：序列化范围根节点 (XXXXX) 和目标根节点 (XXXXX) 的校验和不匹配”

```
var iframe = $("iframe")[0];
var selection = rangy.getSelection(iframe);
var serializeSelection = rangy.serializeSelection(selection);
alert(serializeSelection);
rangy.deserializeSelection(serializeSelection); 
```

演示：http: [//jsfiddle.net/codef0rmer/2d6Bk/1/](http://jsfiddle.net/codef0rmer/2d6Bk/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:26:42.800

您需要提供窗口对象作为第三个参数：

```
rangy.deserializeSelection(serializeSelection, null, iframe.contentWindow); 
```

演示：http: [//jsfiddle.net/2d6Bk/2/](http://jsfiddle.net/2d6Bk/2/)

这比它应该的更尴尬。1.3 版允许您使用`iframe`而不是`iframe.contentWindow`，但它仍然太不可读，所以我会以某种方式改进它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T03:43:50.453

关于“未捕获的错误：deserializeRange：序列化范围根节点（XXXXX）和目标根节点（XXXXX）的校验和不匹配”错误：

Rangy 序列化和反序列化应该使用相同的格式和类型的文本。有时文本或格式或 css 可能会在反序列化时发生变化。所以你必须照顾你的文字。当您使用 iframe 时，请在 iframe 中加载文本后调用一次方法。我们所做的错误是我们在页面加载后序列化文本，而在反序列化时，我们尝试在 iframe 加载后反序列化文本。只需在开始反序列化之前检查您的 iframe 是否加载了内容。

# php - 递归菜单树函数

> ID：11586117
> 
> 赞同：3
> 
> 时间：2012-07-20T19:53:02.530
> 
> 标签：php, recursion, wordpress

此片段显示页面的菜单树和最多两个级别的当前页面子级。我怎样才能使这个递归工作无限级别？

```
if( empty($wp_query->post->post_parent) ) {
    $parent = $wp_query->post->ID;
} else {
    $parent = $wp_query->post->post_parent;
} ?>
<?php if(wp_list_pages("title_li=&child_of=$parent&echo=0" )): ?>
<div id="submenu">
    <ul>
    <?php wp_list_pages("title_li=&child_of=$parent" ); ?>
    </ul>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:21:21.843

```
<?
function getParent($obj){
  if (empty($obj->post->post_parent)){
    return $obj->post->ID;
  } else {
    return getParent($obj->post->post_parent);
  }
}
$parent = getParent($wp_query)
?> 
```

# gnuplot - 有没有办法在 gnuplot 中绘制平均值？

> ID：11586121
> 
> 赞同：3
> 
> 时间：2012-07-20T19:53:34.177
> 
> 标签：gnuplot, numerical-analysis

假设我有一个包含两列数据的文件`file.dat`。我通常会用

```
plot "file.dat" u 1:2 
```

我想平均超过 10 个（例如）前面的点和 10 个后面的点，并将其绘制在同一个图上。我可以使用一些外部脚本轻松地做到这一点，我在其中创建另一列：

```
for(i=-10;i<=10;++i)
  $3[j] += $2[j-i] 
```

但是，我想知道在 gnuplot 中执行此操作的方法。我的下一步是进行高斯平均。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T22:19:51.847

令人惊讶的是，这并不是 gnuplot 内置的。由于 gnuplot 如何将数据作为流处理，因此没有很好的方法来处理 gnuplot 中的单个数据点或数据点范围。

gnuplot 的一大优点是调用外部脚本和工具非常容易。如果您想使用外部脚本来处理 gnuplot 中的数据，您可以这样做：

```
plot "<script.py data.dat" u 1:2 
```

例如，您可以使用下面的 python 脚本。这有点矫枉过正，但您可以在脚本中或在命令行中硬编码设置参数值。

```
#!/usr/bin/python2.7

import sys 

if (len(sys.argv) > 6): 
 print ""
 print "This script takes one mandatory argument, the name of a file containing"
 print "data to be plotted.  It takes up to four optional arguments as follows:"
 print " 1) the number of points before a data point to add into average."
 print " 2) the number of points after a data point to add into average."
 print " 3) the column number of y data (first column is column 1)"
 print " 4) the column number of x data (first column is column 1)"
 print ""
 exit()

# set variable defaults
box_back = 10   # number of points before current point to add into average
box_front = 10  # number of points after current point to add into average
y_col = 2       # column number of y data (first column is column 1)
x_col = 1       # column number of x data (first column is column 1)

# assign variables from command line arguments
inputFileName = str(sys.argv[1])
if (len(sys.argv) > 2): 
 box_back = int(sys.argv[2])
if (len(sys.argv) > 3): 
 box_front = int(sys.argv[3])
if (len(sys.argv) > 4): 
 y_col = int(sys.argv[4])
if (len(sys.argv) > 5): 
 x_col = int(sys.argv[5])

# open input file
f = open(inputFileName)

# make list from lines in file
lines = f.readlines()

# make sure boxcar average will work
if ((box_back + box_front + 1) > len(lines)):
 print ""
 print "ERROR: too many points for boxcar averaging."
 print ""
 exit()

# this is the number of points encompassed in the boxcar average
num_points = box_back + box_front + 1 

# this variable is the running sum.
sum_vals = 0

# add up values for first boxcar average
for i_ in range(0,num_points):
 sum_vals += float(lines[i_].split()[y_col-1])
print float(lines[box_back].split()[x_col-1]),sum_vals/num_points

# each subsequent average differs only in the first and last points from the
# previous average.
for i_ in range(box_back+1,len(lines)-box_front):
 sum_vals += float(lines[i_+box_front].split()[y_col-1])
 sum_vals -= float(lines[i_-box_back-1].split()[y_col-1])
 print float(lines[i_].split()[x_col-1]),sum_vals/num_points 
```

# java - 在 Java EE 和 jquery 中实现新闻提要系统

> ID：11586125
> 
> 赞同：1
> 
> 时间：2012-07-20T19:53:47.253
> 
> 标签：java, jquery, feed

我将实施一个新闻提要通知系统，我将在我的网页上显示新项目。像这样：http: [//jsfiddle.net/8ND53/](http://jsfiddle.net/8ND53/)。

我将每 5 秒调用一次 Servlet 以获取更新，并且 Servlet 将以 json 格式返回项目。这看起来很简单，但是我如何在服务器端管理这一切呢？

我的想法是：

*   我必须跟踪发送给用户的最后一个项目（按日期），以便下次我可以从数据库中获取新项目。

他们有做这些事情的标准方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:13:54.720

只是一个想法！

我将假设您从包含提要的 db 表中创建了一个 bean、dao 和服务层。

* * *

在将检索提要的页面加载的第一刻，从 java 函数中获取所有提要，然后用提要填充 div。

从您的提要容器中获取提要计数。现在通过 jQuery 传递计数`$.post`，然后传递给您的 servlet。要实现这一点，请执行以下操作：

例如：

```
//Find divs inside the parent div that will contain your feeds
function getCount(){
  return $('#feedContainer').children().find('div').size().toString();
}

//Don't forget to pass it to your jQuery post like this 
//(Please, continue reading to understand where to put this)
$.post('/servlet', count:getCount(), function(data){ //manage your new feeds }); 
```

您的 servlet 将收到如下内容：

例如：

```
String count = request.getParameter("count"); 
```

现在你有了计数，验证或只是解析为一个`Integer`然后在 java 中做一个列表。我想您有一个功能可以从数据库中获取所有提要。

例如：

```
//Parse it as integer
int feedCountFromUI = Integer.valueOf(count);

//Do a list and call your function to get all feeds from DB.
MyService myService = new MyService();
List<MyBean> feeds = myService.getAll();

//JSON variable
JSONObject result = new JSONObject();

//Fill your JSON variable
for(MyBean mb : feeds) {
   //Build a json with your feeds and fill result
} 
```

假设现在您有一个`result`在您的 servlet 中调用的 JSON 对象变量，其中您的提要值填写在`for`上面完成的内容中。`feeds`现在从声明为（也从上面）的列表中获取计数。

```
int feedCountFromDB = feeds.size(); 
```

您现在接近完成，比较 2 个计数。如果`feedCountFromDB`大于`feedCountFromUI`，则表示有新的提要要加载。

```
if(feedCountFromDB > feedCountFromUI){
  //Send your json variable (result) to your jquery post callback
  out.println(result);
} else {
  //Means there is nothing new, print 0
  out.println(0);
} 
```

此时，您只需要每 5 秒将最后一个 Feed 填满您的 Feed 容器，如下所示：

*（此时您还可以从您的 jsFiddle 添加您的 jQuery 动画功能）*

```
setInterval(function(){
  $.post('/servlet', count:getCount(), function(data){ 
     //If data has feeds (it's not 0)
     if(data != 0) {
       var lastFeed = data[data.length - 1];
       $('#feedContainer').append('<div>' + lastFeed.title + '<br/>' +   lastFeed.description + '</div>';
     }
  });
}, 5000); 
```

这将始终检查您的 Web 界面中的计数，然后每 5 秒将其与 DB 中的计数进行比较，以获取您的新提要。

希望这可以帮助 ：-）

# java - 如何防止此 Java 代码挂起

> ID：11586127
> 
> 赞同：0
> 
> 时间：2012-07-20T19:53:57.690
> 
> 标签：java, proxy

我有一个代理列表来测试它们是 HTTP 代理还是 Socks 代理，但是下面的 Java 代码在调用 connection.getContent() 或 connection.getInputStream() 时会挂起。我观察到当代理服务器无法响应并且代码阻塞等待服务器响应时会发生此问题，如何防止此代码在服务器无法响应时永远挂起/阻塞，以便检查下一个代理。

```
import java.io.*;
import java.net.*;
import java.util.*;

public class ProxyTest {

    public static void main(String[] args) throws IOException {

        InetSocketAddress proxyAddress = new InetSocketAddress("myproxyaddress", 1234);

        Proxy.Type proxyType = detectProxyType(proxyAddress);
    }

    public static Proxy.Type detectProxyType(InetSocketAddress proxyAddress) throws IOException {

    URL url = new URL("http://www.google.com/");

    List<Proxy.Type> proxyTypesToTry = Arrays.asList(Proxy.Type.SOCKS, Proxy.Type.HTTP);

    for(Proxy.Type proxyType : proxyTypesToTry) {

        Proxy proxy = new Proxy(proxyType, proxyAddress);

        URLConnection connection = null;

        try {

            connection = url.openConnection(proxy);

            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            connection.getContent();
            //connection.getInputStream();

            return(proxyType);
        }

        catch (SocketException e) {

    e.printStackTrace();
        }
    }

    return(null);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:56:34.977

要并行执行操作，请使用线程。

```
for(Foo f : foos){
    Thread t = new Thread(new Runnable(){
        @Override
        public void run(){
            // blocking call
        }        
    });
    t.start();
} 
```

更好的是，利用[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包中的一种数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:03:22.667

我相信对此没有简单的直接解决方案。答案取决于 JDK 版本、实现和运行环境。有关更多详细信息，请参阅[Java URLConnection Timeout](https://stackoverflow.com/questions/3163693/java-urlconnection-timeout)。

# ruby-on-rails - CI 中的测试失败：“Capybara::ElementNotFound: Unable to find css”

> ID：11586128
> 
> 赞同：0
> 
> 时间：2012-07-20T19:54:06.367
> 
> 标签：ruby-on-rails, unit-testing, continuous-integration, capybara

我在我的持续集成服务器（我使用 TeamCity）中运行了一堆单元和集成测试，我想知道为什么我的一个集成测试失败了。

我阅读了这个测试的堆栈跟踪，我发现了以下内容：

```
Capybara::ElementNotFound: Unable to find css "section.product[data-id=\"484802314\"]"

Stack trace:
test/integration/main_page_test.rb:7:in `pod'
    test/integration/main_page_test.rb:99:in `block in <class:MainPageTest>'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:44:in `block in run'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:89:in `with_listener'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:39:in `run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:378:in `block in run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:434:in `change_work_directory'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:377:in `run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:58:in `run' 
```

开发人员声称此集成测试在他们的机器上完美运行，那么，我该如何解决这个问题？

更新：

另一个失败的测试是这个，我不确定是否相关或导致另一个测试失败：

MainPageTest.test_Pod_are_created_correctly：

```
Wrong number of product pods generated.
<false> is not true.

Stack trace:
test/integration/main_page_test.rb:63:in `block in <class:MainPageTest>'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:44:in `block in run'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:89:in `with_listener'
    test-unit (2.5.0) lib/test/unit/ui/testrunnermediator.rb:39:in `run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:378:in `block in run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:434:in `change_work_directory'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:377:in `run'
    test-unit (2.5.0) lib/test/unit/autorunner.rb:58:in `run' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:04:08.540

没有足够的信息来解决这个问题。我可以做出一堆疯狂的猜测，但它们不会很有用。您确定开发人员机器上的环境和 CI 是相同的（Ruby、gems、依赖项的版本）吗？以及如何在 CI 上运行测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:11:30.903

看来您的问题很可能出在您的

```
MainPageTest.test_Pod_are_created_correctly 
```

测试 - 如果这没有正确填充您的数据库，那么原始问题将是由您的选择器“484802314”的外观引起的，它是您数据库中一行的 ID。

然而，就像@Stefan Kanev 在他的回答中提到的那样，没有提供足够的信息来给出准确的答案。

# c++ - 用'0'c ++填充stringstream变量的右侧

> ID：11586132
> 
> 赞同：8
> 
> 时间：2012-07-20T19:54:22.697
> 
> 标签：c++

我有下一个代码：

```
ofstream dataIndex;
dataIndex.open("file");

index="2222";
std::stringstream sstr1;
sstr1<<index<<'1';
sstr1<<setfill('0')<<setw(index.length()-9);
string index1= sstr1.str();
dataIndex<<index1;

dataIndex.close() 
```

我希望结果：

```
2222100000 
```

但只有我得到

```
22221 
```

没有零？发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T20:08:07.733

用于[`std::left`](http://en.cppreference.com/w/cpp/io/manip/left)左对齐输出

```
#include <iostream>
#include <string>
#include <iomanip>

int main() 
{
  std::string s( "2222" );

  std::cout << std::setw(9) 
            << std::setfill('0') 
            << std::left 
            << s 
            << std::endl;
} 
```

输出：

```
222200000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T20:09:49.863

操纵器与输入一样应用于流。要使它们生效，首先需要应用它们。例如，这里是您如何在字符串流上填充零。

```
std::string index("2222");
std::ostringstream sstr1;
sstr1 << std::setw(9) << std::setfill('0') << index << '1';
std::cout << sstr1.str(); // 0000022221 
```

如果您想以不同的方式填充，则只需添加一个方向操纵器，如`std::left`,`std::right`等。

```
std::string index("2222");
std::ostringstream sstr1;
sstr1 << index << std::setw(10-index.length()) << std::setfill('0') << std::left << '1';
std::cout << sstr1.str(); // 2222100000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:58:52.917

您的 setw() 操纵器使用负数调用（索引字符串的长度仅为 4）。这可能是罪魁祸首。

# android - HTC one - 应用程序每次都被杀死

> ID：11586134
> 
> 赞同：1
> 
> 时间：2012-07-20T19:54:44.693
> 
> 标签：android, memory-management, service

嗨，我的应用程序有问题。应用程序正在通过 GPS 跟踪用户道路。它只获得起点，每个下一个点计算距离并增加时间。在我的 HTC Wildfire（使用 CMD7 2.3.7）、Samsung SIII 和 Galaxy Tab 10.1 上一切正常。

当用户开始跟踪时，应用程序正在完成当前活动并在后台使用服务启动新进程。同时用小动画开始新的活动，并将正在进行的状态放在通知区域。一切都很酷，但问题开始于用户在 HTC 一个系列上尝试应用程序。我无法描述它的行为方式，因为我没有这款手机并且无法重现该错误。

你们中有人听说过 HTC 意义上的内存管理吗？我读了一些文章说 HTC 有这种功能。

或者有什么方法可以在模拟器上测试特定设备？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:21:38.187

确保您正在调用 Service#startForeground 方法来为您的服务前台调度优先级。您可以在 Service 类中找到它：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

我已经看到在 One 系列上使用它不会杀死后台服务。

# ruby-on-rails - ActionView::Template::Error（“2008-02-14T02:20:50Z”:String 的未定义方法 `getlocal'）：

> ID：11586135
> 
> 赞同：1
> 
> 时间：2012-07-20T19:54:47.330
> 
> 标签：ruby-on-rails, ruby, rubygems, mongoid, rvm

更新 Mongoid 3.0.1 / Rails 3.2.6 后，在显示 created_at 时开始出现“getlocal”方法错误：

```
Showing /home/lsoave/rails/github/gitwatcher/app/views/shared/_watch-list-table.html.haml where line #28 raised: 

undefined method `getlocal' for "2008-02-14T02:20:50Z":String

Extracted source (around line #28): 

28:           %td= repo.created_at.to_s(:pretty) 
```

更新

我有一个设置该格式的 config/initializers/time_formats.rb

```
$ cat config/initializers/time_formats.rb

Time::DATE_FORMATS[:month_and_year] = "%B %Y"
Time::DATE_FORMATS[:pretty] = lambda { |time| time.strftime("%a, %b %e at %l:%M") + time.strftime("%p").downcase } 
```

`repo.created_at`无论如何，只需调用（省略.to_s（：pretty））也会发生错误

更新

我刚刚在 RVM/Ruby - Rails - Mongoid 堆栈上尝试了回滚，但没有成功：

```
from ruby-1.9.3-p194@rails-3.2.6 to ruby-1.9.2-p290@rails-3.2.3

from Mongoid 3.0.1 to Mongoid 2.4.3

from Rails 3.2.6 to Rails 3.2.3 
```

见 RVM 输出：

```
lsoave@ubuntu:~/rails/tests/gitwatcher$ ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]
lsoave@ubuntu:~/rails/tests/gitwatcher$ rvm list

rvm rubies

=> ruby-1.9.2-p290 [ i686 ]
 * ruby-1.9.3-p194 [ i686 ]

# => - current
# =* - current && default
#  * - default

lsoave@ubuntu:~/rails/tests/gitwatcher$ rvm gemset list

gemsets for ruby-1.9.2-p290 (found in /home/lsoave/.rvm/gems/ruby-1.9.2-p290)
   global
=> rails-3.2.3

lsoave@ubuntu:~/rails/tests/gitwatcher$ 
```

......我客人在这一点上是ENV级别的东西，但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:26:51.553

也许您的数据中的某些内容已损坏。

# android - 使用圆角矩形为应用小部件按钮自定义颜色

> ID：11586137
> 
> 赞同：2
> 
> 时间：2012-07-20T19:54:52.267
> 
> 标签：android, colors, android-appwidget, remoteview, shapedrawable

我有一个创建小部件的应用程序，用户可以在其中通过颜色选择对话框设置按钮背景的颜色。但是，我可以将远程视图中的按钮设置为具有这种颜色的唯一方法是这样做

```
rv.setInt(R.id.button, "setBackgroundColor", colour); 
```

但这总是使背景成为矩形，替换任何先前设置的背景可绘制。我想做的是将按钮设置为圆角矩形，可以设置为自定义颜色。这可能吗，如果可以，怎么办？

# java - java在遗传算法中将二维数组保存为对象

> ID：11586138
> 
> 赞同：0
> 
> 时间：2012-07-20T19:54:56.350
> 
> 标签：java, genetic-algorithm, multidimensional-array

一年多来，我一直在研究一个多目标优化问题，该问题使用遗传算法来显示最佳解决方案。

问题涉及根据许多标准将人员分配到不同的团队。我已经完成了初始化阶段，适应度函数编码也完成了。但是，我无法将生成的（二维数组）解决方案保存为对象并将它们暂时保存在内存中，以便它们可以在 GA 的后期阶段使用：选择、交叉和变异。

我正在使用轮盘赌选择和略有不同的交叉和变异算法。我对这些没有问题。只是我无法找到一种方法将一个生成的解决方案（在这种情况下是完整的团队分配）暂时保存在内存中，然后生成另一个解决方案并将其保存在内存中，然后再保存一个，依此类推。

我已经尝试了很多我能想到的不同的事情，其中​​两个我记得是：（i）将二维数组类型从 int 更改为 Object 但这会产生错误，因为创建团队的二维数组使用另一个用于定位列表中人员 ID 索引位置的 int 数组；(ii) 使用静态类字段变量，在初始种群生成类运行后每次递增。

我已经研究了几个月，并尝试了我能想到的一切。如果有人可以指导我，甚至给我一个关于如何保存二维数组以便我可以将其用于 GA 后期阶段的提示，那将是非常有帮助的。

谢谢

编辑：这是具有创建团队的 2d 数组位的初始人口类：每一行代表团队编号，列是成员 ID（我已经排除了一些引用其他类的代码，而是将其放在文字中）：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:04:13.410

您的问题是架构之一。您正在一个单独的班级中创建您的人口，而无需将其发送到任何地方。您想将初始化包装在另一个类中。当我写一个新的 GA 时，我通常会做这样的事情。

```
class GeneticAlgorithm {

  public static int[][] population;
  public static double mutationRate;
  public static double crossoverRate;

  public int[][] initializePopulation //this is where your createTeams method would go
  public int[][] mutation 
  public int[][] crossover

  public void runGA

} 
```

这是我的 GA 的基本结构。在您的 runGA 方法中，您可以循环任意多代，无论是基于退出标准还是静态数字。每一代你只需将你当前的种群传递给你的变异和交叉函数，它就会返回结果种群。当您执行所有这些操作时，您的人口被安全地存储在一个变量中，该变量可以在您的 GA 终止时保存或输出。

希望对您有所帮助，并祝您好运。

# c++ - 如何运行需要没有管理员权限的应用程序

> ID：11586139
> 
> 赞同：25
> 
> 时间：2012-07-20T19:55:02.117
> 
> 标签：c++, winapi, uac, shellexecute, createprocess

我已经坚持了几个小时，直到我终于设法做到了。已经有一些链接为我指明了正确的方向：

*   [可执行文件是否可以要求管理员权限？（Windows 7的）](https://stackoverflow.com/questions/8915744/is-it-possible-for-the-executable-to-ask-for-administrator-rights-windows-7)
*   [CreateProcess 错误=740，请求的操作需要提升](https://stackoverflow.com/questions/5853529/createprocess-error-740-the-requested-operation-requires-elevation)

但我认为对问题的简单概述可以帮助某人:)。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T19:55:02.117

真正的问题：（来自维基百科：[http](http://en.wikipedia.org/wiki/User_Account_Control) ://en.wikipedia.org/wiki/User_Account_Control ）

> 在其清单中标记为“requireAdministrator”的可执行文件无法使用 CreateProcess() 从非提升进程启动。相反，将返回 ERROR_ELEVATION_REQUIRED。必须改用 ShellExecute() 或 ShellExecuteEx()。

（顺便说一句，ERROR_ELEVATION_REQUIRED 错误 == 740）

解决方案：（同一站点）

> 在本机 Win32 应用程序中，可以将相同的“runas”动词添加到 ShellExecute() 或 ShellExecuteEx() 调用中。

`ShellExecute(hwnd, "runas", "C:\\Windows\\Notepad.exe", 0, 0, SW_SHOWNORMAL);`

这可能也有帮助：（来源： http: [//mark.koli.ch/2009/12/uac-prompt-from-java-createprocess-error740-the-requested-operation-requires-elevation.html](http://mark.koli.ch/2009/12/uac-prompt-from-java-createprocess-error740-the-requested-operation-requires-elevation.html)）

> 2 - 基本 UAC 流程
> 
> 好的，所以在深入研究之前，我认为解释 UAC 感知应用程序的基本流程以及所有内容如何组合在一起可能会有所帮助。通常，您的应用程序作为非特权用户运行。但是，有时它需要成为管理员（做任何事情）。所以，这是基本的想法，在伪代码中：

```
int main (int argc, char **argv) {

  HRESULT operation = tryToDoSomethingPrivileged();

  if (operation == ACCESS_DENIED && !alreadyElevated) {

    // Spawn a copy of ourselves, via ShellExecuteEx().
    // The "runas" verb is important because that's what
    // internally triggers Windows to open up a UAC prompt.
    HANDLE child = ShellExecuteEx(argc, argv, "runas");

    if (child) {
      // User accepted UAC prompt (gave permission).
      // The unprivileged parent should wait for
      // the privileged child to finish.
      WaitForSingleObject(child, INFINITE);
      CloseHandle(pid);
    }
    else {
      // User rejected UAC prompt.
      return FAILURE;
    }

    return SUCCESS;

  }  

  return SUCCESS;

} 
```

最后，这就是我的做法：

```
if(0 == CreateProcess(argv[2], params, NULL, NULL, false, 0, NULL, NULL, &si, &pi)) {
        //runas word is a hack to require UAC elevation
        ShellExecute(NULL, "runas", argv[2], params, NULL, SW_SHOWNORMAL);
} 
```

只是为了完整性 - MSDN 链接到 ShellExecute 和 CreateProcess：

[http://msdn.microsoft.com/en-us/library/bb762153%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb762153%28v=vs.85%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms682425%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682425%28VS.85%29.aspx)

# events - 在 C++/CLI 中如何定义线程安全的事件访问器？

> ID：11586141
> 
> 赞同：1
> 
> 时间：2012-07-20T19:55:06.477
> 
> 标签：events, thread-safety, c++-cli

代码示例“如何：定义事件访问器方法”位于

[http://msdn.microsoft.com/en-us/library/dw1dtw0d.aspx](http://msdn.microsoft.com/en-us/library/dw1dtw0d.aspx)

似乎在`pE`没有锁定的情况下改变了内部。（看起来`Delegate::Combine`并没有什么神奇的东西可以防止问题。）它也确实

```
void raise() {
   if (pE != nullptr)
      pE->Invoke();
} 
```

如果`pE`在`null`check 和`Invoke()`. 我有两个问题：

1.  我对现有代码不是线程安全的吗？

2.  由于我想要代码的线程安全版本，我正在考虑锁定`add`and`remove`函数。使用是否过早优化

    ```
    void raise() {
        MyDel^ handler = pE;
        if (handler != nullptr)
           handler->Invoke();
    } 
    ```

    还是我也应该锁定该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:23:42.830

[`raise`](https://stackoverflow.com/a/2014752/103167)与您链接的页面中的示例不同[，默认情况下，所有三个访问器都是线程安全的（](https://stackoverflow.com/a/2014752/103167)[包括空检查，并使用局部变量来避免竞争条件） 。](https://stackoverflow.com/a/2014752/103167)

当涉及到自定义事件实现时，您需要同步`add`和`remove`访问器是正确的。只需在实现周围放置一个互斥锁。`Delegate::Combine`但是没有必要通过调用然后强制转换来抛弃类型安全，[因为 operator`+`和`-`为委托句柄重载](http://msdn.microsoft.com/en-us/library/s23d58wb)。或者你可以去无锁，如下：

```
void add(MyDel^ p)
{
     MyDel^ old;
     MyDel^ new;
     do {
         old = pE;
         new = pE + p;
     } while (old != Interlocked::CompareExchange(pE, new, old));
 } 
```

`remove`比照定义( `new = pE - p;`)。您提供的代码`raise`非常适合自定义事件实现。

总之，该 MSDN 示例完全是垃圾。实现线程安全的最简单方法是使用自动实现的事件。

# foxpro - 如何将光标的数据写入txt文件？视觉狐狸专业版

> ID：11586150
> 
> 赞同：2
> 
> 时间：2012-07-20T19:55:51.280
> 
> 标签：foxpro, fgets, visual-foxpro, fputs

好吧，例如，我有一个光标

```
select col1, col2, col3, col4, colN from cursor into into array thecursor 
```

我当前的光标是光标

我得到了它的所有数据信息，包括空、空信息

ia txt 怎么能这样：

```
col1, col2, col3, col4, colN 
a,b,c,d,e
1,2,3,4,5
a1,b1,,d1,e1
11,12,13,14,
,bb,cc,dd,ee 
```

所以你可以在行看到 `a1,b1,,d1,e1`我在 b1 和 d1 之间有一个空值，所以你可以看到我在行有一个空值

```
`11,12,13,14,`(here null value) 
```

我在最后一行有一个空值

```
(here null value), cc,dd,ee 
```

所以我想要这个最终的txt文件

```
col1, col2, col3, col4, colN 
a,b,c,d,e
1,2,3,4,5
a1,b1,,d1,e1
11,12,13,14,
,bb,cc,dd,ee

**I need this was dynamic i refer it receive a cursor and do it with any cursor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:35:24.243

你看过 COPY TO 命令吗？尝试：

```
COPY TO <filename> TYPE DELIMITED WITH "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:55:40.657

您可以直接将数据移动到文本文件中，而不是光标，如下所示：

`select col1, col2, col3, col4, colN from table to file test.txt`

# android - Webview中的Html按钮宽度百分比

> ID：11586152
> 
> 赞同：3
> 
> 时间：2012-07-20T19:56:04.450
> 
> 标签：android, html, webview, android-webview

我有一些 html 代码并将其加载到 WebView。我需要以百分比设置按钮宽度（为了不依赖于屏幕分辨率）。

当我以百分比设置按钮的宽度时，我收到一个错误，`page cannot be loaded`但我以像素为单位设置它一切正常。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type='text/css'> 
            body{ position: relative; } 
            button { width: 50%; display: block; position: relative;  } 
        </style>
    </head>
    <body style='text-align:justify;color:white;'>
        Some text
        <br/>
        <button>Boo!</button>
    </body>
</html> 
```

有什么想法吗？

**编辑：**

解决方案是根据@Zak的建议找到的，即在页面加载完毕后调用**js**函数，获取屏幕宽度，设置给元素。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script language='javascript'> function SetWidth(){  d = document.getElementById('but'); d.style.width=screen.width/2; } </script>
    <style type='text/css'> body{ position: relative; } button { display: block; position: relative;  } </style>
    </head>

    <body style='text-align:justify;color:white;'>
        Text<br/>
        <button id='but' >Scary!</button>
        <script> window.onload=SetWidth; </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:07:13.120

我已经用 DIV 完成了这个，我需要正好是屏幕分辨率的 X%。我完成此操作的方法是在页面加载后使用 JQuery，因为 JQuery 可以检测确切的屏幕宽度，然后您可以进行数学运算，并将宽度设置为正好 X 像素。

```
$(document).ready(function() {
 var = myWidth = screen.width;
myWidth = myWidth / 2;
$('#button').width(myWidth);
}); 
```

我还没有检查过……但是我向你保证，这个概念听起来很不错

另外：确保此代码位于页面的底部，以确保它在页面元素加载后呈现。

# ios - 在 IOS 中关闭应用程序

> ID：11586153
> 
> 赞同：2
> 
> 时间：2012-07-20T19:56:06.173
> 
> 标签：ios, background, terminate

我有一个应用内订阅产品。加载应用程序后，我会显示“立即订阅”屏幕来启动购买过程。如果用户取消，应用程序必须关闭/移动到后台/终止，因为他们拒绝了服务。最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T20:02:05.210

这种情况在 iOS 人机界面指南中的“[不要以编程方式退出](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)”下得到解决：

> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> 显示一个有吸引力的屏幕，描述问题并提出更正建议。屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序

例如，考虑 iTunes Store 或 App Store 应用程序，如果没有网络连接，它们将毫无用处。如果您将设备置于飞行模式，然后启动其中一个，它们将显示一个大的 Wi-Fi 图标，并显示一条消息，说明需要 Internet 连接。（我认为警报提供禁用飞行模式，但如果你点击取消，你会明白我的意思；应用程序不会退出。）

请放心，如果您只是强制退出该应用程序，Apple 会拒绝它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:00:46.197

我不知道是否允许..但你可以使用

```
Exit(0); 
```

或者：

```
[[NSThread mainThread] exit]; 
```

应用程序将关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:06:46.617

最好不要那样做。您可以在他们点击取消后显示另一个屏幕，解释为什么他们无法继续并给他们一个按钮再试一次。

# php - PHP 会话不工作

> ID：11586154
> 
> 赞同：1
> 
> 时间：2012-07-20T19:56:08.710
> 
> 标签：php, session

在我网站的一个页面上，我将变量存储在会话中，而在另一个页面上，我需要再次使用它们，但它不起作用。

这是在第一页。

```
<?php
session_start();
$_SESSION['email']=$_POST["email"];
$_SESSION['username']=$_POST["uname"];
$_SESSION['password']=$_POST["cpass"];
?>

<html> 
```

这是第二页，就这么简单，但我无法让它工作。

```
<html>
<body>
$emailcc = $_SESSION['email'];
$usernamecc = $_SESSION['uname'];
$passcc = $_SESSION['cpass']; 
```

我的第二页更新

```
<?php
session_start();
?>

<html>
<body>

<?php

$emailcc = $_SESSION['email'];
$usernamecc = $_SESSION['uname'];
$passcc = $_SESSION['cpass']; 
```

当我尝试将它添加到 sql 或输出它为空白的变量时，它仍然不起作用。

```
mysql_query("INSERT INTO Users (Username, Password, Email, Notes, Pass)
VALUES ('$usernamecc', '$passcc', '$emailcc', 3, 1)"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:56:33.980

你需要`<?php session_start(); ?>`在第二页的顶部，或在任何输出发送到浏览器之前（除非您使用输出缓冲）。

此外，您的第二个文件将需要由 PHP 解析，因此如果它是 HTML 文件，您需要将其重命名为`.php`或配置您的服务器以解析`.html`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:57:21.997

在第二页试试这个：

```
<?php
session_start();
$emailcc = $_SESSION['email'];
$usernamecc = $_SESSION['uname'];
$passcc = $_SESSION['cpass'];
?> 
```

在使用会话之前，您必须调用**session_start()**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:06:39.817

在第一页试试这个：

```
 <?php
 session_start();
 $_SESSION['email']=$_REQUEST["email"];
 $_SESSION['username']=$_REQUEST["uname"];
 $_SESSION['password']=$_REQUEST["cpass"];
 ?> 
```

在第二页试试这个：（你在这个页面上使用了错误的会话名称）

```
 <?php
 session_start();
 $emailcc = $_SESSION['email'];
 $usernamecc = $_SESSION['username'];
 $passcc = $_SESSION['password'];
 ?> 
```

MYSQL

```
mysql_query("INSERT INTO Users (Username, Password, Email, Notes, Pass)
VALUES ($usernamecc, $passcc, $emailcc, 3, 1)"); 
```

# javascript - 是否可以获取“当前”或“最后”事件的事件对象，而无需在处理程序中将其作为参数接收？

> ID：11586159
> 
> 赞同：4
> 
> 时间：2012-07-20T19:56:39.880
> 
> 标签：javascript, jquery, events, keydown

我正在尝试修改行为或 JavaScript 库，基本上是通过对其进行修补（不，没有更好的方法）。

在代码中的某个点，我需要知道是否按下了 Shift。如果此库中的事件处理程序编写正确，它将接收“事件”作为其第一个参数，但不幸的是，它不是（事件与 HTML 中的 onclick 内联连接）

所以，我想看看 jQuery 是否在某处“存储”了最后一个事件对象，或者是否有其他方法可以访问它。

本质上，我想要的是“window.event”，但理想情况下我希望它可以在 Firefox 上运行。

除了向文档添加全局 onKeyDown 处理程序并自己跟踪 Shift 的状态之外，还有什么想法吗？对于我的口味来说，这感觉有点矫枉过正，而且有点过于全球化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:50:22.317

正如我在评论中提到的，可以使 window.event 存在于非 IE 浏览器中。它要求您包装 attachEvent/addEventListener。它会是这样的：

```
var oldAddEventListener = HTMLElement.prototype.addEventListener;
HTMLElement.prototype.addEventListener = function(type, listener, useCapture) {
    var wrapped = function(event) {
        window.event = event;

        listener(arguments);
    }

    oldAddEventListener.call(this, type, wrapped , useCapture);
} 
```

正如我所说，我不确定这是否适用于内联事件侦听器，但它可能 :) 如果不是，至少它在这里作为那些寻找类似东西的人的参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:07:44.877

你能包装他们使用的函数作为他们的事件处理程序吗？举这个人为的例子：

```
var someObject = {
    keyDownListener: function() {
        alert('something was pressed!');
    }
} 
```

我们可以用我们自己的接受事件对象的方法替换 keyDownListener。

```
var someObject = {
    keyDownListener: function() {
        alert('something was pressed!');
    }
}

var oldKeyDownListener = someObject.keyDownListener;
someObject.keyDownListener = function(event) {
    oldKeyDownListener(); // Call the original
    // Do anything we need to do here (or before we call the old one!)
} 
```

如果你能进入函数内部，你也可以检查 arguments 对象。您的事件对象应该在那里（我相信第一项）。

```
var f = function() {
    console.log(arguments);    
}

f(); //= Logs []
f(1); //= Logs [1]
f(1, 'something'); //= Logs [1, 'something'] 
```

**编辑**（回应下面的评论）。

如果您可以“劫持”该方法，那么这是您可以做到的一种*方法*。我不确定这是否是一个好方法，但如果你有所有这些限制，它会让你得到你想要的。基本上，这段代码的作用是搜索任何具有 onclick 属性的元素，并更改方法签名以包含事件对象。

然后我们可以包装原始侦听器以从参数中提取事件对象，然后将执行传递回原始函数。

这样做会让你得到你想要的（我想？）。请参阅此代码：

**HTML：**

```
<a href="#" onclick="javascript:myFunction(1, 2, 3);">Click Me</a>​ 
```

**JavaScript：**

```
window.myFunction = function(one, two, three) {
    console.log("one: " + one + ", two: " + two + ", three: " + three);
}

var originalMyFunction = window.myFunction;
window.myFunction = function() {
    var event = arguments[arguments.length - 1]; // The last item in the arguments array is our event object.
    console.log(event);        
    originalMyFunction.apply(this, arguments);
}

$('[onclick]').each(function() {
    var s = $(this).attr('onclick');
    var lastIndex = s.lastIndexOf(')');

    var s2 = s.substring(0, lastIndex);
    var s3 = s.substring(lastIndex, s.length);

    var s4 = s2 + ', event' + s3;

    $(this).attr('onclick', s4);
}); 
```

你可以看到它在这个小提琴中工作：http: [//jsfiddle.net/84KvV/](http://jsfiddle.net/84KvV/)

**编辑 2**

如果你想真正喜欢它，你甚至可以自动包装函数。看到这个小提琴：http: [//jsfiddle.net/84KvV/2/](http://jsfiddle.net/84KvV/2/)。

请注意，这期望函数字符串采用某种格式，以便它可以解析它（functionName(...)）。如果不是那种格式，那么这个确切的代码将不起作用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T17:22:02.763

```
function eventlessHandler(myVal) {
    var event = window.event || eventlessHandler.caller.arguments[0];
    // some work
} 
```

根据实际调用链，可能需要遍历`.caller`多次。

在 IE6、IE11 和最新的 Chrome 上对此进行了测试。也应该适用于大多数其他浏览器。

另请参阅[如何在 JavaScript 中找出调用者函数？](https://stackoverflow.com/questions/280389/how-do-you-find-out-the-caller-function-in-javascript).

# c++ - CUDA 中什么更快：全局内存写入 + __threadfence() 或 atomicExch() 到全局内存？

> ID：11586164
> 
> 赞同：3
> 
> 时间：2012-07-20T19:57:00.753
> 
> 标签：c++, cuda, atomic, coalescing

假设我们有很多线程将顺序访问全局内存，那么总体上哪个选项执行得更快？我很怀疑，因为 __threadfence() 考虑了所有共享和全局内存写入，但写入是合并的。另一方面， atomicExch() 仅考虑重要的内存地址，但我不知道写入是否合并。

在代码中：

```
array[threadIdx.x] = value; 
```

或者

```
atomicExch(&array[threadIdx.x] , value); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:51:38.037

在 Kepler GPU 上，我敢打赌，`atomicExch`因为 Kepler 上的原子速度非常快。在 Fermi 上，这可能是一次洗涤，但鉴于您没有碰撞，`atomicExch`仍然可以表现良好。

请做一个实验并报告结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T15:00:23.440

这两个人做的事情非常不同。

`atomicExch`确保没有两个线程一次尝试修改给定的单元格。如果发生这种冲突，一个或多个线程可能会停止。如果您事先知道没有两个线程访问同一个单元格，那么就没有必要使用任何`atomic...`函数了。

`__threadfence()`延迟当前线程（并且只有当前线程！）以确保给定线程的任何后续写入确实在以后发生。因此，`__threadfence()`就其本身而言，没有任何后续代码并不是很有趣。

因此，我认为没有必要比较这两者的效率。也许如果你能展示一个更具体的用例，我可以联系起来......

请注意，这些实际上都没有为您提供线程实际执行顺序的任何保证。

# java - Java 中 BigInteger 的 % 运算符

> ID：11586166
> 
> 赞同：13
> 
> 时间：2012-07-20T19:57:11.913
> 
> 标签：java, biginteger

如何使用`a%b`大整数？像

```
...
BigInteger val = new BigInteger("1254789363254125");
...

boolean odd(val){
   if(val%2!=0)
      return true;
   return false;
... 
```

Eclipse 说，对于 BigInteger，运算符 % 是未定义的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-20T19:59:29.473

像这样：

```
BigInteger val = new BigInteger("1254789363254125");
public boolean odd(BigInteger val) {
    if(!val.mod(new BigInteger("2")).equals(BigInteger.ZERO))
        return true;
    return false;
} 
```

或者正如用户 Duncan 在评论中建议的那样，我们可以像这样完全取出 if 语句：

```
BigInteger val = new BigInteger("1254789363254125");
public boolean odd(BigInteger val) {
    return !val.mod(new BigInteger("2")).equals(BigInteger.ZERO));
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-12-14T20:52:48.117

一种更有效的方法是检查最后一位。如果是`0`（又名`false`），则为偶数，否则为奇数。

```
public boolean odd(BigInteger i){
    return i.testBit(0);
}

odd(BigInteger.valueOf(1));//true
odd(BigInteger.valueOf(2));//false
odd(BigInteger.valueOf(101));//true
odd(BigInteger.valueOf(100));//false 
```

它的代码行数也更少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-02T11:54:08.017

我会以这种方式使用 BigInteger 类的[剩余方法：](https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#remainder-java.math.BigInteger-)

```
BigInteger result = a.remainder(b); 
```

赋值是因为 BigInteger 是不可变的，所以 a 不会被方法改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T19:59:24.957

使用 val.mod(2)。

BigInteger 是一个对象。您不能在对象上使用算术运算符，这仅适用于原语。

% 仅适用于 java.lang.Integer，因为它被隐式强制转换（实际上，它被称为未装箱）为 int。但是 BigInteger 不能拆箱。拆箱/打包（这意味着对象到原始/原始到对象的转换）仅适用于 int、float、double、short 和 byte。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T20:00:23.377

由于 BigInteger 是一个类而不是原始*1，因此您不要使用运算符。检查 BigInteger 的方法：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html#mod(java.math.BigInteger) ://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html#mod(java.math.BigInteger )

*1：对于 Integer、Float，您可以使用运算符，因为 JVM 会自动将对象转换为其原始值（自动装箱）

# java - Java：使用 alpha 绘画重绘工件

> ID：11586170
> 
> 赞同：0
> 
> 时间：2012-07-20T19:57:24.223
> 
> 标签：java, transparent, alpha, repaint, artifacts

我只是在包含透明部分的 JPanel 上遇到了工件问题。我的 JPanel 覆盖了 paintComponent() 方法：

```
protected void paintComponent(Graphics g) {
    g2d = (Graphics2D) g;
    drawMyAplhaImage(g2d);
} 
```

![重绘工件](../Images/bffc69aec5eb4871087771d2c57c59b2.png)

如您所见，在 JPanel 上绘制的 Image 比 JPanel 本身要小一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:57:24.223

解决办法是重绘Parent组件。

为了节省资源，我只是重新绘制了 JPanel 的区域。

新的paintComponent() 方法：

```
protected void paintComponent(Graphics g) {
    g2d = (Graphics2D) g;
    getParent().repaint(getX(), getY(), getWidth(), getHeight());
    drawMyAplhaImage(g2d);
} 
```

# c# - 防止其他窗口与我的表单重叠？

> ID：11586172
> 
> 赞同：0
> 
> 时间：2012-07-20T19:57:31.023
> 
> 标签：c#

我有一个在第二台显示器上全屏显示的表格。我想防止所有其他窗口意外移动到第二个屏幕并重叠我的表单。

我还需要确保如果一个窗口移动到另一个窗口并且我使用 topmost，我不希望另一个窗口丢失。

我想让第二台显示器（或我的应用程序）不重叠。不一定让它成为最顶级的应用程序。

这是ac#形式。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:01:22.010

`Form.TopMost`财产：

> 最顶层表单是与所有其他（非最顶层）表单重叠的表单，即使它不是活动表单或前景表单。最顶层的表单始终显示在桌面上窗口 z 顺序的最高点。您可以使用此属性来创建始终显示在应用程序中的表单，例如查找和替换工具窗口。

# c++ - 提升python对象的生命周期

> ID：11586173
> 
> 赞同：4
> 
> 时间：2012-07-20T19:57:32.203
> 
> 标签：c++, python, boost, garbage-collection

cp:

```
#include <boost/python.hpp>

using namespace boost;
using namespace boost::python;

struct Foo
{
   virtual ~Foo() {}
   virtual void Print() = 0;
};

struct FooWrap : Foo, wrapper<Foo>
{
    void Print()
    {
        this->get_override("Print")();
    }
};

void ProcessFoo(Foo *obj) { obj->Print(); }

BOOST_PYTHON_MODULE(hello_ext)
{
    class_<FooWrap, boost::noncopyable>("Foo")
        .def("Print", pure_virtual(&Foo::Print));
    def("ProcessFoo", &ProcessFoo);
} 
```

Python：

```
import hello_ext

class NewFoo(hello_ext.Foo):
   def Print(self):
      print 'Print call'

hello_ext.ProcessFoo( NewFoo() ) 
```

一切正常，通话中有`Print call`文字`ProcessFoo`。但我想将所有传递的指针存储为`ProcessFoo`：

```
std::vector<Foo*> data;
void ProcessFoo(Foo *obj) { data.push_back(obj); obj->Print(); } 
```

从函数指针退出后变得无效，我不能从向量中使用它。使该指针的寿命更长的最佳方法是什么？使用共享指针或告诉python不要删除对象（如果它删除它？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:25:22.030

如果要存储此指针，则必须增加底层 python 对象（PyObject）的引用计数。为此，您必须实现您的 void ProcessFoo(Foo *obj) 以获取 python 对象而不是 C++ 对象，否则 boost::python 将在他的适应中为您剥离 python 对象，您无法再控制它的生命周期。

如果你这样做，你还必须显式地转换为你的 C++ 类型（但使用 boost::python 并没有那么麻烦）。

```
using namespace boost::python;
std::vector< std::pair<object, Foo&> > myVec;

void ProcessFoo(object o )
{
  Foo& x = extract<Foo&>(o);
  // ... do you add to container here, but remember, to add the object o
  // too, otherwise the refernce counter will be decremented and the object
  // may go away.
  myVec.push_back( std::make_pair( o, x ) );
} 
```

# asp.net - ASP.NET MVC3 Selected route 在浏览器中创建不正确的 URL

> ID：11586183
> 
> 赞同：1
> 
> 时间：2012-07-20T19:58:04.613
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-routing

我有一个 ASP.NET MVC3 项目（VS2008 Ultimate），其中一个注册的路由表现得很奇怪。

首先，从 Global.asax.cs 方面看它是怎样的。

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Home", // Route name
            "Home", // URL with parameters
            new { controller = "Home", action = "Index" }
        );

        routes.MapRoute(
            "BookPage", // Route name
            "BookPage/{page}", // URL with parameters
            new { controller = "Book", action = "Page" }
        );

        routes.MapRoute(
            "BlogMember", // Route name
            "BlogMember/{id}/{page}", // URL with parameters
            new { controller = "Blog", action = "Member" }
        );

        routes.MapRoute(
            "BlogPost", // Route name
            "BlogPost/{id}/{page}", // URL with parameters
            new { controller = "Blog", action = "Post" }
        );

        routes.MapRoute(
            "BlogPage", // Route name
            "BlogPage/{page}", // URL with parameters
            new { controller = "Blog", action = "Page" }
        );

        routes.MapRoute(
            "BlogTag", // Route name
            "BlogTag/{tag}/{page}", // URL with parameters
            new { controller = "Blog", action = "Tag" }
        );

        routes.MapRoute(
            "NewBlogPostComment", // Route name
            "NewBlogPostComment", // URL with parameters
            new { controller = "Blog", action = "NewBlogPostComment" }
        );

        routes.MapRoute(
            "NewBlogPost", // Route name
            "NewBlogPost", // URL with parameters
            new { controller = "Blog", action = "NewBlogPost" }
        );

        routes.MapRoute(
            "EditBlogPost", // Route name
            "EditBlogPost/{id}", // URL with parameters
            new { controller = "Blog", action = "EditBlogPost" }
        );

        routes.MapRoute(
            "Account", // Route name
            "Account", // URL with parameters
            new { controller = "Account", action = "Update" }
        );

        routes.MapRoute(
            "LogOff", // Route name
            "LogOff", // URL with parameters
            new { controller = "Account", action = "LogOff" }
        );

        routes.MapRoute(
            "LogOn", // Route name
            "LogOn", // URL with parameters
            new { controller = "Account", action = "LogOn" }
        );

        routes.MapRoute(
            "Register", // Route name
            "Register", // URL with parameters
            new { controller = "Account", action = "Register" }
        );

        routes.MapRoute(
            "About", // Route name
            "About", // URL with parameters
            new { controller = "Home", action = "About" }
        );

        routes.MapRoute(
            "UnderConstruction", // Route name
            "UnderConstruction", // URL with parameters
            new { controller = "Home", action = "UnderConstruction" }
        );

        routes.MapRoute(
            "DisableBlogComment", // Route name
            "DisableBlogComment/{id}", // URL with parameters
            new { controller = "Blog", action = "DisableBlogComment" }
        );

        routes.MapRoute(
            "DisableAllMemberBlogComments", // Route name
            "DisableAllMemberBlogComments/{id}", // URL with parameters
            new { controller = "Blog", action = "DisableAllMemberBlogComments" }
        );

        routes.MapRoute(
            "DisableVideoComment", // Route name
            "DisableVideoComment/{id}", // URL with parameters
            new { controller = "Video", action = "DisableVideoComment" }
        );

        routes.MapRoute(
            "DisableAllMemberVideoComments", // Route name
            "DisableAllMemberVideoComments/{id}", // URL with parameters
            new { controller = "Video", action = "DisableAllMemberVideoComments" }
        );

        routes.MapRoute(
            "DisableMember", // Route name
            "DisableMember/{id}", // URL with parameters
            new { controller = "Member", action = "DisableMember" }
        );

        routes.MapRoute(
            "NewPost", // Route name
            "NewPost", // URL with parameters
            new { controller = "Blog", action = "NewPost" }
        );

        routes.MapRoute(
            "InactiveBlogPosts", // Route name
            "InactiveBlogPosts/{page}", // URL with parameters
            new { controller = "Blog", action = "InactiveBlogPosts" }
        );

        routes.MapRoute(
            "InactiveBlogComments", // Route name
            "InactiveBlogComments/{page}", // URL with parameters
            new { controller = "Blog", action = "IncativeBlogComments" }
        );

        routes.MapRoute(
            "EditHomePage", // Route name
            "EditHomePage", // URL with parameters
            new { controller = "Home", action = "EditHomePage" }
        );

        routes.MapRoute(
            "EditAboutPage", // Route name
            "EditAboutPage", // URL with parameters
            new { controller = "Home", action = "EditAboutPage" }
        );

        routes.MapRoute(
            "Newsletter", // Route name
            "Newsletter", // URL with parameters
            new { controller = "Newsletter", action = "Send" }
        );

        routes.MapRoute(
            "Members", // Route name
            "Members/{page}", // URL with parameters
            new { controller = "Member", action = "MemberList" }
        );

        routes.MapRoute(
            "EditMember", // Route name
            "EditMember/{id}", // URL with parameters
            new { controller = "Member", action = "EditMember" }
        );

        routes.MapRoute(
            "AppSettings", // Route name
            "AppSettings", // URL with parameters
            new { controller = "Utility", action = "AppSettings" }
        );

        routes.MapRoute(
            "AudioBookPage", // Route name
            "AudioBookPage/{page}", // URL with parameters
            new { controller = "Book", action = "AudioBookPage" }
        );

        routes.MapRoute(
            "IPBlocked", // Route name
            "IPBlocked", // URL with parameters
            new { controller = "Utility", action = "IPBlocked" }
        );

        routes.MapRoute(
            "LiveTV", // Route name
            "LiveTV", // URL with parameters
            new { controller = "LiveTV", action = "LiveTV" }
        );

        routes.MapRoute(
            "VideoPlayer", // Route name
            "VideoPlayer/{id}/{page}", // URL with parameters
            new { controller = "Video", action = "Player" }
        );

        routes.MapRoute(
            "Video", // Route name
            "Video/{page}", // URL with parameters
            new { controller = "Video", action = "VideoList" }
        );

        routes.MapRoute(
            "NewVideoComment", // Route name
            "NewVideoComment", // URL with parameters
            new { controller = "Video", action = "NewVideoComment" }
        );

        routes.MapRoute(
            "Music", // Route name
            "Music", // URL with parameters
            new { controller = "Music", action = "Index" }
        );

        routes.MapRoute(
            "FileUpload", // Route name
            "FileUpload", // URL with parameters
            new { controller = "Utility", action = "FileUpload" }
        );

        routes.MapRoute(
            "PageUnavailable", // Route name
            "PageUnavailable", // URL with parameters
            new { controller = "Utility", action = "PageUnavailable" }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

然后相关控制器：

```
public ActionResult VideoPlayer(int id, int page)
    {
        Video post = VideoProvider.GetPost(id);

        if (post == null)
            return RedirectToAction("PageUnavailable");

        // register view, when user not authenticated Name = "";
        if (SessionData.settings.LogVideoViews)
        {
            VideoProvider.RegisterView(id, Request.UserHostAddress);
        }

        // get comments
        int totalRecords;
        var vVideoComments = VideoProvider.GetPostComments(id, page, SessionData.settings.ListPositionsPerPage, out totalRecords);

        // map to models
        var videoPostModel = Mapper.Map<Video, MVC_Web.Models.VideoModels.VideoListModel>(post);
        var vVideoCommentsModel = Mapper.Map<List<vVideoComment>, List<MVC_Web.Models.VideoModels.vVideoCommentModel>>(vVideoComments);

        ViewBag.postID = id;
        ViewBag.route = "VideoPlayer";
        ViewBag.EnableComments = SessionData.settings.EnableVideoComments;

        ViewBag.selectedMenuItem = "idVideo";
        ViewBag.playerWidth = 512;
        ViewBag.playerHeight = 384;
        ViewBag.comments = vVideoCommentsModel;
        ViewBag.page = page;
        ViewBag.itemsPerPage = SessionData.settings.ListPositionsPerPage;
        ViewBag.totalRecords = totalRecords;

        return View(videoPostModel);
    } 
```

这就是我创建指向特定页面的链接的方式：

```
<a href="@Url.Action("VideoPlayer", new { id = Model.ID, page = 1 })"> 
```

到目前为止，一切正常，但是当呈现视图时，我在浏览器的地址栏中看到一个 URL，如下所示：

```
http://localhost:51408/Video/VideoPlayer/38?page=1 
```

我相信我宁愿看到这样的东西：

```
http://localhost:51408/VideoPlayer/38/1 
```

除了这条路线之外，每条路线都运行良好：

```
routes.MapRoute(
            "VideoPlayer", // Route name
            "VideoPlayer/{id}/{page}", // URL with parameters
            new { controller = "Video", action = "Player" }
        ); 
```

我使用了 Phil Haack 的 Route 调试器，我可以看到它正在为 URL 捕获正确的路由：

```
http://localhost:51408/VideoPlayer/38/1 
```

当尝试不正确的一个时：

```
http://localhost:51408/Video/VideoPlayer/38?page=1 
```

它使用列表底部的默认路由结束：

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

不知道这里发生了什么。我已经离开网站使用这个古怪的 URL 很长时间了，但它确实让我非常困扰，我将不胜感激。

如果您想现场观看：[http ://www.voiceofconscience.org/Video/VideoPlayer/39?page=1](http://www.voiceofconscience.org/Video/VideoPlayer/39?page=1)

提前谢谢马里乌斯

附言。那是我的第一个网络项目，假设我做错了什么，但不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:39:18.337

我会使用 Url.RouteUrl 而不是 Url.Action。

```
// VideoPlayer is the RouteName listed in the global.asax
Url.RouteUrl("VideoPlayer", new { id = Model.ID, page = 1 }); 
```

高温高压

# javascript - 如何等待多个 jquery 帖子完成？

> ID：11586184
> 
> 赞同：0
> 
> 时间：2012-07-20T19:58:16.507
> 
> 标签：javascript, jquery

一旦多个 jquery 帖子完成，我正在尝试清除一个繁忙的图标并重新启用我的删除按钮。这是我当前的代码：

```
 $('#deleteimgs').live('click', function(e) {
        e.preventDefault();

        if ($('input[name="chk[]"]:checked').length > 0 ) {

            $('#deleteimgs').button('loading');
            $('#saveicon').show();

            var boxes = $('input[name="chk[]"]:checked');
            $(boxes).each(function(){

                 var id = $(this).attr('id').substr(7);
                 var self = this;

                 $.post("/functions/photo_functions.php", { f: 'del', imgid: id}, function(data){
                    if (data.success) {
                        $(self).hide();
                        $("#img_"+id).hide(250);
                    }
                }, "json");
            });

            $('#saveicon').hide();
            $('#deleteimgs').button('reset');
        }

    }); 
```

我的隐藏调用和重置调用在 foreach 循环完成之前被触发。在拨打这两个电话之前有没有办法等待完成？

```
$('#saveicon').hide();
$('#deleteimgs').button('reset'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:00:29.797

HTTP 请求完成后，您应该使用`success`回调方法完成任何任务。在回调内部，您应该跟踪完成了多少请求，以及您的最后一个请求何时完成，然后执行您想要的代码。

您可以通过几种方式重构此代码，但是，它应该让您大致了解如何处理这种情况。

```
var boxes = $('input[name="chk[]"]:checked');
var totalBoxes = boxes.length;
var completedRequests = 0;

$(boxes).each(function(){

     var id = $(this).attr('id').substr(7);
     var self = this;

     $.post("/functions/photo_functions.php", { f: 'del', imgid: id}, function(data){
        if (data.success) {
            $(self).hide();
            $("#img_"+id).hide(250);

            //Increment the complete request count.
            completedRequests++;

            //Check if the last request has finished.  If it has, do your stuff!
            if (completedRequests == totalBoxes) {
                $('#saveicon').hide();
                $('#deleteimgs').button('reset');
            }
        }
    }, "json");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:12:00.987

尝试类似：

```
$(document).on('click', '#deleteimgs', function(e) {
    e.preventDefault();

    if ($('input[name="chk[]"]:checked').length > 0 ) {

        $('#deleteimgs').button('loading');
        $('#saveicon').show();

        var boxes = $('input[name="chk[]"]:checked'),
            xhr = [];
        boxes.each(function(){
             var self = this,
                 id = self.id.substr(7);

             var request = $.post("/functions/photo_functions.php", { f: 'del', imgid: id}, function(data){
                if (data.success) {
                    $(self).hide();
                    $("#img_"+id).hide(250);
                }
            }, "json");
            xhr.push(request);
        });

        $.when.apply(null, xhr).done(function() {
            $('#saveicon').hide();
            $('#deleteimgs').button('reset');
        });
    }
});​ 
```

这会将所有请求存储在一个数组中，该数组稍后会传递给 $.when，当它们都完成后，`done()`函数将被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:22:04.187

为了跟进 DwB 的回答，使用 async 将是提供中介功能的一种简单方法。代替：

```
$(boxes).each(function(){ 
```

利用：

```
async.parallel(boxes.toArray().map(function(elem){
    var self = elem;
    return function (callback) {
        var id = $(self).attr('id').substr(7);

        $.post("/functions/photo_functions.php", { f: 'del', imgid: id}, function(data){
            if (data.success) {
                $(self).hide();
                $("#img_"+id).hide(250);
                callback();
            } else {
                callback(new Error("request failed"));
            }
        }, "json");
    }
}), function (err) {
    if(err) {
        console.log(err);
    } else {
        $('#saveicon').hide();
        $('#deleteimgs').button('reset');
    }
}); 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T20:02:41.637

您需要计算您发布的帖子数量，调用中介函数来计算回复，然后在所有调用完成后进行隐藏和重置。

例如：

```
var postCount = 0;

function allPostsDone()
{
   $('#saveicon').hide();
   $('#deleteimgs').button('reset');
}

postCount += 1;
$.post("/functions/photo_functions.php",
       { f: 'del', imgid: id},
       function(data)
       {
         if (data.success)
         {
           $(self).hide();
           $("#img_"+id).hide(250);
         }

         postCount -= 1;
         if (postCount == 0)
         {
           allPostsDone();
         }
       }, "json"); 
```

# c# - 我不确定为什么这段代码不起作用？

> ID：11586188
> 
> 赞同：0
> 
> 时间：2012-07-20T19:58:30.390
> 
> 标签：c#, ienumerable, unity3d

我正在尝试编写一些代码，并且由于代码最终需要工作的方式，我正在尝试将其分解为不同的类，并且我也在从互联网上检索数据，所以我正在尝试做对我自己来说有两个新东西，我不知道为什么这不起作用，这是我的代码：

```
using System.Collections;
public class SomeClass {

    SomeProjectClass_www Test = new SomeProjectClass_www();
    Test.GetData();
}

public class SomeProjectClass_www : IEnumerator {

    public IEnumerator GetData()
    {
        WWW www = new WWW("file://C:\\Users\\generic_user\Documents\\test.txt");
        yield return url;
        Debug.Log(www.text);
    }
} 
```

该代码在我正在使用的 Unity3d 中生成 CS1519 错误。这就是 Debug.Log 的来源。对不起，我没有提供太多有用的信息，我真的不知道发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:00:23.430

问题是您*在类*`SomeClass`中定义了逻辑，而不是在*方法*中：

 **```
public class SomeClass 
{
    // This logic needs to go into a method
    void SomeMethod() 
    {
        SomeProjectClass_www Test = new SomeProjectClass_www();
       Test.GetData();
    }
} 
```**

# css - CSS容器伪元素？

> ID：11586192
> 
> 赞同：5
> 
> 时间：2012-07-20T19:59:09.900
> 
> 标签：css, pseudo-element

在 CSS 中，有像“之前”和“之后”这样的伪元素。这会在元素之前或之后创建虚拟元素。

**容器伪元素？**

是否有“容器”伪元素？

**问题示例1：**

我需要在一个元素周围创建 15 个边框（我知道这个特定的示例可以通过使用 box-shadow 来完成）。

**问题示例2：**

我需要在彼此之上创建 15 种透明背景颜色。

**很多不必要的标记**

我知道可以通过添加包含 div 来实现，但这会产生很多不必要的标记。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T20:01:36.733

旧的[CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/#wrapping)提出了一个`::outside`伪元素的提议，它似乎与您所描述的很接近，但没有实现，并且该模块本身计划在某一天进行重写。

换句话说，目前没有办法仅使用 CSS 来实现这一点，而且可能暂时不会有。

当然，有一些方法可以使用 JavaScript 模拟包装元素来操作 DOM，但这几乎是除了在额外标记中进行硬编码之外的唯一方法。这里描述了一些关于传说中的`::outside`伪元素的简单 jQuery 方法：

[启用对 CSS3 ::outside 伪元素的支持](https://stackoverflow.com/questions/10419614/enable-support-for-css3-outside-pseudoelement)

# ios5 - Javascript 手风琴可折叠的依赖性分析警告。需要协助

> ID：11586193
> 
> 赞同：0
> 
> 时间：2012-07-20T19:59:14.347
> 
> 标签：ios5, xcode4.3, dependency-analysis

在 javascript 中构建了一个带有手风琴可折叠功能的 html5 页面。在 html5 中，它看起来很棒，但是在插入页面后，我尝试在模拟器中运行它，它不起作用。手风琴可折叠功能未显示，我收到以下错误：

```
 - warning: no rule to process file
   '$(PROJECT_DIR)/donk/javascript/highlight.pack.js' of type
   sourcecode.javascript for architecture i386
 - warning: no rule to process file
   '$(PROJECT_DIR)/donk/javascript/jquery-1.6.1.min.js' of type
   sourcecode.javascript for architecture i386
 - warning: no rule to process file
   '$(PROJECT_DIR)/donk/javascript/jquery.accordion.js' of type
   sourcecode.javascript for architecture i386 
```

谁能告诉我它们的意思以及它们是否可以固定工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T07:22:17.810

转到“目标”（在 Xcode 左侧的“组和文件”窗格中），单击它旁边的箭头，然后单击项目名称旁边的箭头，然后拖动 jquery.min.js（无论您的文件是什么） ) 文件* 从“compile sources”文件夹到“Copy Bundle Resources”文件夹。从主菜单执行“构建 - 清除所有目标”以再次构建，问题应该已经解决。

# java-3d - JAVA3D-第一个程序-错误

> ID：11586199
> 
> 赞同：0
> 
> 时间：2012-07-20T19:59:36.910
> 
> 标签：java-3d

> **可能重复：**
> [java3D lib 配置问题](https://stackoverflow.com/questions/4098161/problems-with-java3d-lib-configuration)

我想在**Ubuntu**上使用 JAVA 制作一个 3d 游戏，因此我`j3d-1_5_2-linux-i586.zip`从下载并`http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR`提取了它。在**Eclipse**中，我在 Eclipse 中添加了 3 个 jar `../j3d-1_5_2-linux-i586/lib/ext/`，然后编写了这段代码

```
import com.sun.j3d.utils.universe.SimpleUniverse;
import com.sun.j3d.utils.geometry.ColorCube;
import javax.media.j3d.BranchGroup;

public class Hello3d {
    public Hello3d() {
        SimpleUniverse universe = new SimpleUniverse();
        BranchGroup group = new BranchGroup();
        group.addChild(new ColorCube(0.3));
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(group);
    }

    public static void main(String[] args) {
        new Hello3d();
    }

} 
```

**得到这些错误**

```
Description Resource    Path    Location    Type
Access restriction: The constructor SimpleUniverse() is not accessible due to restriction on required library /home/emil/Downloads/j3d-1_5_2-linux-i586/lib/ext/j3dutils.jar    Hello3d.java    /Checker3D/src  line 7  Java Problem

    Description Resource    Path    Location    Type
Access restriction: The constructor BranchGroup() is not accessible due to restriction on required library /home/emil/Downloads/j3d-1_5_2-linux-i586/lib/ext/j3dcore.jar    Hello3d.java    /Checker3D/src  line 8  Java Problem

Description Resource    Path    Location    Type
Access restriction: The constructor ColorCube(double) is not accessible due to restriction on required library /home/emil/Downloads/j3d-1_5_2-linux-i586/lib/ext/j3dutils.jar   Hello3d.java    /Checker3D/src  line 9  Java Problem 
```

**更像是** 我将“ `Forbidden reference (access rules)`”下的“ `Deprecated and restricted API`”从“ `**Error**`”设置为“ `**Warning**`”。

**在建筑上** 我得到了

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200)
    at javax.media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157)
    at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987)
    at javax.media.j3d.VirtualUniverse.<clinit>(VirtualUniverse.java:299)
    at Hello3d.<init>(Hello3d.java:7)
    at Hello3d.main(Hello3d.java:15) 
```

在**Run--->Run Configuration ---> JAVA applications--->(x=)arguments--->VM Argiments**中，我添加了

```
-Djava.library.path=$LD_LIBRARY_PATH:/home/emil/Downloads/j3d-1_5_2-linux-i586/lib/i386/ 
```

我得到了那个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: Checker
Caused by: java.lang.ClassNotFoundException: Checker
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Checker. Program will exit. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:59:05.377

这是你的答案干杯！

Windows -> 首选项 -> Java -> 构建路径 -> 用户库 1\. 新建：J3DAll，2\. 添加 JAR .. 在 ..\jre6\lib\ext\j3dcore.jar、j3dutils.jar、vecmath 中选择所有三个。罐

Project -> Properties -> Java Build Path -> Libraries Add Library .. -> User Library -> 接下来选择 J3DAll Finish Project -> Properties -> Java Build Path -> Order and Export Top J3DAll

# android - 如何运行多个安卓模拟器？

> ID：11586202
> 
> 赞同：1
> 
> 时间：2012-07-20T19:59:49.480
> 
> 标签：android, shell, command-line, emulation, avd

我刚开始学习 Android SDK，我正在尝试通过命令行运行另一个模拟器。当我运行命令时：

```
android emulator -avd sender 
```

从 C:\Program Files\Android\android-sdk\tools，我收到以下错误。

```
Error: Expected verb after global parameters but found 'emulator' instead. 
```

我实际上让它工作了一次。我已经通过 AVD 管理器创建了一个名为 sender 的 AVD。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:27:30.687

尝试

```
emulator.exe -avd sender 
```

从 C:\Program Files\Android\android-sdk\tools 中的命令行。

这将告诉 emulator.exe 打开 android 虚拟设备“sender”，假设您已经创建了一个名为*sender*的虚拟设备。

# regex - 使用正则表达式查找确切的短语？

> ID：11586203
> 
> 赞同：1
> 
> 时间：2012-07-20T19:59:50.613
> 
> 标签：regex

我正在玩html5中的模式属性。它接受正则表达式以判断表单域有效或无效。

我希望一个字段有效，如果它包含单词 John 而没有其他内容。我如何用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:00:39.807

应该是这样的：

```
pattern="^John$" 
```

**编辑：**实际上，它看起来像`^`并且`$`是隐含的，所以这就足够了：

```
pattern="John" 
```

[正如Tim Pietzcker](https://stackoverflow.com/users/20670/tim-pietzcker)所指出的，要指定不区分大小写的匹配，您将使用以下内容：

```
pattern="(?i)john" 
```

# javascript - 远程脚本可以向托管脚本的服务器发出请求吗？同源政策

> ID：11586204
> 
> 赞同：2
> 
> 时间：2012-07-20T19:59:57.490
> 
> 标签：javascript, html, http

如果我有服务器：

www.server1.com

从以下位置加载脚本：

www.server2.com/script-to-load.js

script-to-load.js 可以对 www.server2.com 进行 ajax 调用吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:01:32.563

不。

Javascript 不知道一段代码的来源。

同源策略仅适用于执行脚本的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:39:14.203

是的。有三种方法可以做到这一点：

1.  **CORS：**使用此方法，将标头添加到 www.server2.com 允许从 www.server1.com 访问。这是在 JavaScript 中执行跨域脚本的“正确”方式。见：[http ://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

2.  **使用服务器端“代理”：**使用此方法，www.server1.com 上的服务器端脚本访问 www.server2.com 上的文件并返回响应。这是从您控制的服务器上的网站访问您无法控制的服务器上的数据的实用方法。下面是一个示例脚本。

3.  **JSONP：**`script`此方法利用标签不受跨域限制的事实。见：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

**用于跨域脚本的示例 PHP“代理”脚本：**

执行选项 2 的示例 PHP 脚本是：

```
<?php
   ini_set("user_agent", $_SERVER['HTTP_USER_AGENT']); // temporarily override CURLs user agent with the user's own
   echo file_get_contents($_REQUEST["www"]);
?> 
```

将此脚本放在 www.server1.com/proxy.php 并调用[http://www.server1.com/proxy.php?www=http://www.server2.com/ajax.js](http://www.server1.com/proxy.php?www=http://www.server2.com/ajax.js)。该脚本会返回 www.server2.com/ajax.js 的内容，从而绕过跨域限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T20:18:54.967

如果这是服务器端 JS（你说服务器正在加载脚本），那么服务器端 JS 没有同源限制。同源限制由浏览器实现，并影响在浏览器中运行的脚本可以执行的操作。

此外，在浏览器中，脚本来自何处并不重要。浏览器查看网页的来源，并将 ajax 调用（由页面中的任何脚本进行）限制在网页的域中。脚本可以来自任何地方，并且它们的来源不会影响基于浏览器的同源限制页面本身的来源。

[这](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)是关于基于浏览器的同源限制的一个很好的参考。

# .net - FtpWebRequest“根据验证程序，远程证书无效”

> ID：11586206
> 
> 赞同：9
> 
> 时间：2012-07-20T20:00:06.650
> 
> 标签：.net, ssl, ftp, certificate, ftpwebrequest

我有一个 .NET 客户端应用程序，它尝试将文件通过 ftp 传输到具有自签名 TLS/SSL 证书的 FTP 站点。此 FTP 站点在 Windows 7 Enterprise、IIS 7 上运行。我收到以下错误：

> 根据验证程序，远程证书无效

我已经尝试在受信任的根证书中安装证书，但这仍然不起作用。

我已经在此处提到的一些帖子的代码中使用了委托回调 - 它有效。但我不想在我的生产代码中使用它。

同样在生产中，我们的一些客户正在使用自签名证书。

有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-05-11T12:36:25.503

您必须覆盖证书检查，以便它们始终被认为是好的。这不会阻止通道保持 SSL 保护。

```
Uri target = new Uri("ftp://yourUri");
string fileName = @"fullPathOfYourFile";
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(target);
request.Method = WebRequestMethods.Ftp.UploadFile;
request.Credentials = new NetworkCredential("user", "password");
request.EnableSsl = true;

//overwrite the certificate checks
ServicePointManager.ServerCertificateValidationCallback = 
                      (s, certificate, chain, sslPolicyErrors) => true;

// Copy the contents of the file to the request stream
//.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-24T07:00:05.393

@Luca 投票最多的答案盲目地接受任何证书。这是一个安全漏洞。

实施[`ServicePointManager.ServerCertificateValidation`回调](https://docs.microsoft.com/en-us/dotnet/api/system.net.security.remotecertificatevalidationcallback)时，应*验证*证书。例如，通过根据已知值检查证书的哈希：

```
using System.Net;
using System.Net.Security;
using System.Security.Cryptography; 
```

```
ServicePointManager.ServerCertificateValidationCallback +=
    (sender, certificate, chain, errors) =>
    {
        return
            (errors == SslPolicyErrors.None) ||
            certificate.GetCertHashString(HashAlgorithmName.SHA256).Equals(
                "EB8E0B28AE064ED58CBED9DAEB46CFEB3BD7ECA677...");
    }; 
```

对于需要的[`X509Certificate.GetCertHashString`重载`HashAlgorithmName.SHA256`](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate.getcerthashstring#system-security-cryptography-x509certificates-x509certificate-getcerthashstring(system-security-cryptography-hashalgorithmname))，您需要 .NET 4.8。在旧版本上，使用返回 SHA-1 哈希[的无参数重载](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate.getcerthashstring#system-security-cryptography-x509certificates-x509certificate-getcerthashstring)。

* * *

*基于[当您知道无效证书是安全的时测试 X509Certificate.Thumbprint 属性是否安全？](https://stackoverflow.com/q/34642606/850848)*

*对于 VB.NET 版本的代码，请参阅[在 VB.NET 中接受自签名 TLS/SSL 证书](https://stackoverflow.com/q/5998004/850848#66559532)*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-05T17:53:22.283

如果您尝试连接到 IP 地址而不是域名，您也会收到此错误。由于证书是发给域名的，所以IP地址不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T23:40:23.923

我通过 .NET 遇到了同样的问题，我的帐户甚至本地计算机帐户都信任证书根和链。所以证书是金色的。

对我来说，我使用了错误的主机名。我使用的是完全限定名称（并且到达了正确的位置），但证书实际上是颁发给不同的别名的。因此，请确保您的服务器名称与证书上的内容*完全匹配。*

检查这篇文章，这就是我找到答案的方式......也许事件订阅也是你需要的......

[http://www.limilabs.com/blog/the-remote-certificate-is-invalid-according-to-the-validation-procedure](http://www.limilabs.com/blog/the-remote-certificate-is-invalid-according-to-the-validation-procedure)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-02-02T16:21:39.340

如果在尝试建立 SSL 连接时收到“根据验证程序，远程证书无效”异常，很可能您的服务器**证书是自签名的。** 解决问题：

步骤 1：启用 ssl 属性：

```
request.EnableSsl = true; 
```

Step2：覆盖证书检查：

```
ServicePointManager.ServerCertificateValidationCallback = 
                  (s, certificate, chain, sslPolicyErrors) => true; 
```

例如：

```
 public static string uploadFtpFile(string folderName, string fileName)
    {
        try
        {
            FtpWebRequest request;

            string absoluteFileName = Path.GetFileName(fileName);

            request = WebRequest.Create(new Uri(string.Format(@"ftp://{0}/{1}/{2}", "194.11.11.11", folderName, absoluteFileName))) as FtpWebRequest;
            request.Method = WebRequestMethods.Ftp.UploadFile;
            request.UseBinary = true;
            request.UsePassive = true;
            request.KeepAlive = true;
            request.Credentials = new NetworkCredential("user", "pass");
            request.EnableSsl = true;
            ServicePointManager.ServerCertificateValidationCallback =
                                  (s, certificate, chain, sslPolicyErrors) => true;

            request.ConnectionGroupName = "group";

            using (FileStream fs = File.OpenRead(fileName))
            {
                byte[] buffer = new byte[fs.Length];
                fs.Read(buffer, 0, buffer.Length);
                fs.Close();
                Stream requestStream = request.GetRequestStream();
                requestStream.Write(buffer, 0, buffer.Length);
                requestStream.Flush();
                requestStream.Close();
            }

            return "1";
        }
        catch (Exception ax)
        {
            return "0" + ax.Message;
        }
    } 
```

用法：

```
 private void button17_Click(object sender, EventArgs e)
    {
        string res += uploadFtpFile("", @"C:\a\test.txt");
        MessageBox.Show(res);//"1" mean true...
    } 
```

# xml - for xml root('someStr'),type) ''子元素问题"

> ID：11586214
> 
> 赞同：1
> 
> 时间：2012-07-20T20:00:45.813
> 
> 标签：xml, tsql

我正在使用下面的代码构建这个 xml 元素

```
,( select 
     case when i.id > 0 
         then (select i.id for xml path('parent'),type)
      else null --> don't write this element if id is than 0
end ) 
```

我明白了，

```
 <parent>
  <id>some id number </id></parent> 
```

但是，我正在寻找

```
<id>some id number </id> 
```

任何建议....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-24T04:09:29.263

Pass the empty string '' instead of 'parent'.

# sql - 如何查询以某些字符开头的内容？

> ID：11586215
> 
> 赞同：40
> 
> 时间：2012-07-20T20:00:47.030
> 
> 标签：sql, oracle, search

这是我的代码：

```
SELECT SRV_NAME, TOT_CPU, TOT_MEM, SNAP_DATE
FROM capacity.SRV_CAPACITY_SEV
WHERE SRV_NAME in ('absshs1p", "AA03server', 'AA02server', 'BA01server', 'BA03server', 'BC03server') AND SNAP_DATE BETWEEN to_date('10-jun-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss') AND to_date('12-jun-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss')
ORDER BY SRV_NAME desc, SNAP_DATE desc; 
```

我将如何查询以某些字符开头的服务器？例如，我如何搜索仅以“AA”开头的服务器？

我正在使用 Oracle SQL 顺便说一句。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-20T20:02:17.043

你可以这样做

```
WHERE SRV_NAME LIKE 'AA%' 
```

# knockout.js - KnockoutJS - 显示加载和无数据消息

> ID：11586216
> 
> 赞同：4
> 
> 时间：2012-07-20T20:00:50.657
> 
> 标签：knockout.js

我正在使用 KnockoutJS 并通过 ajax 加载我的视图模型。在加载完成之前，我想显示一个“正在加载...”消息，如果没有加载数据，我想显示一个“没有结果”。信息。我最初的尝试如下所示：

```
<ul data-bind="template: { name: 'mentions-template', foreach: mentions.data }">
    <li data-bind="visible: mentions.loaded() && mentions.data().length < 1">No mentions</li>
    <li data-bind="visible: !mentions.loaded()">Loading...</li>
</ul>

<script type="text/javascript">

    var viewModel = {
        mentions: {
            loaded: ko.observable(false),
            data: ko.observableArray()
        }
    }

    function loadData() {
       $.post(action, function(result) {
           viewModel.mentions.data = ko.mapping.fromJS(result);
           viewModel.mentions.loaded(true);
           ko.applyBindings(viewModel);
       });   
    } 

    ko.applyBindings(viewModel);
    loadData();    
</script> 
```

我预计第一个`li`元素只会显示是否`viewModel.mentions.loaded`为假并`viewModel.mentions.data`包含一些项目，而第二个元素会`li`显示直到`viewModel.mentions.loaded`被设置为假，但两个项目始终显示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:08:55.417

当您的列表中有这些静态项目时`ul`，它们实际上并没有被绑定，因为 Knockout 只是处理数组中的每个项目。

实现您想要的一种方法是：

```
<ul>
    <!-- ko template: { name: 'mentions-template', foreach: mentions.data } -->
    <!-- /ko -->
    <li data-bind="visible: mentions.loaded() && mentions.data().length < 1">No mentions</li>
    <li data-bind="visible: !mentions.loaded()">Loading...</li>
</ul> 
```

示例：http: [//jsfiddle.net/rniemeyer/gw7bM/](http://jsfiddle.net/rniemeyer/gw7bM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:12:14.060

我在使用`visible`绑定时遇到了类似的意外行为问题，请尝试以下操作：

```
var ViewModel = {
  mentions: {
    loaded: ko.observable(),
    data: ko.observableArray(),
    status: ko.computed(function () {
      if (loaded() && data().length < 1)
        return 'No Mentions';

      else
        return 'Loading...';
    });
} 
```

使用以下命令更新您的视图`<span>`：

```
<span data-bind="text: status, visible: loaded"></span> 
```

# java - java 7中的Java排序（TimSort-MergeSort）：危险

> ID：11586217
> 
> 赞同：0
> 
> 时间：2012-07-20T20:01:06.103
> 
> 标签：java, exception, sorting, comparator

我无法使用我自己的 Comparator 实现按 Collections.sort() 对我的集合进行排序。抛出的异常是-->“IllegalArgumentException：比较方法违反了它的一般合同！在我的 OrdersBean 中，我已经覆盖了 hashCode，如下所示：

```
@Override    
    public int hashCode() {
    return this.getServiceOrderName().toUpperCase().hashCode();
} 
```

我没有覆盖 equals() 并且仅使用 Object 类的（我觉得应该不是问题）。

我已经这样实现了比较器：

```
public static final Comparator<OrdersBean> ordersComparator=new Comparator<OrdersBean>() {

    @Override
    public int compare(OrdersBean first, OrdersBean second)
    {
        if(Double.parseDouble(first.getPriority())<Double.parseDouble(second.getPriority()))
            return -1;
        else
            if(Double.parseDouble(first.getPriority())>Double.parseDouble(second.getPriority()))
                return +1;
            else
            {
                if((first.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD")) &&
                        (second.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD")))
                            return -1;

                if((first.getPlatformType().equalsIgnoreCase("T1 Augment")) &&
                        (second.getPlatformType().equalsIgnoreCase("T1 Augment")))
                            return -1;

                if(first.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD"))
                    return -1;
                else
                    if(second.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD"))
                        return +1;
                    else
                        if(first.getPlatformType().equalsIgnoreCase("T1 Augment"))
                            return -1;
                        else
                            if(second.getPlatformType().equalsIgnoreCase("T1 Augment"))
                                return +1;
                            else
                                return -1;
            }

    }
}; 
```

请建议我，我哪里错了？？？

我现在已将代码更改如下，它对于 sort() 方法运行良好，但它现在最终导致稍后的代码中出现错误，该比较器被传递给 Tree-Set，其中不允许重复，因此所有在比较器返回 0 的类似平台类型的情况下，这些订单不会添加到此 sortedSet；（因为不允许重复）：

```
public static final Comparator<OrdersBean> ordersComparator=new Comparator<OrdersBean>() {

    @Override
    public int compare(OrdersBean first, OrdersBean second)
    {
        int diffProrties=(int)(Double.parseDouble(first.getPriority())-Double.parseDouble(second.getPriority()));
        if(diffProrties != 0)
            return diffProrties;

        if(first.getPlatformType().equalsIgnoreCase(second.getPlatformType()))
            return 0;

        if(first.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD"))
            return -1;
        if(second.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD"))
            return +1;
        if(first.getPlatformType().equalsIgnoreCase("T1 Augment"))
            return -1;
        if(second.getPlatformType().equalsIgnoreCase("T1 Augment"))
            return +1;

        return 0;

    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:18:47.530

`compare(a,b)`必须相同，`-compare(b, a)`否则没有确定的方法来比较 a 和 b。你有

```
if((first.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD")) &&
   (second.getPlatformType().equalsIgnoreCase("EV-DO Carrier ADD")))
       return -1; 
```

这说 a < b AND b < a 这是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:08:53.073

比较器必须遵守[契约](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)，特别是如果`compare(A, B) < 0`，那么它必须是`compare(B, A) > 0`。如果您使用平台“EV-DO Carrier ADD”传递两个对象，您的比较器将违反此规则。

# javascript - 是否可以在 Zend 表单中显示和隐藏子表单 onclick

> ID：11586220
> 
> 赞同：0
> 
> 时间：2012-07-20T20:01:21.360
> 
> 标签：javascript, zend-framework, zend-form

只是想知道是否可以在单选检查事件或按钮 onclick 事件上显示和隐藏 zend 表单中的子表单。因为我有一个带有用户字段元素的表单，现在我想要一个带有密码元素的子表单，这将使用户能够选择更改他们的密码。但是，我只想根据要求显示密码元素（即：单击单选按钮“更改密码”并显示更改密码元素）。

Zend\Form 可以做到这一点，还是我需要使用客户端 javascript 来显示和隐藏元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:08:42.723

这是可能的，但这种事情是客户端的，所以你需要使用 javascript 才能做到这一点。就个人而言，我喜欢使用 jQuery 来处理这类事情，它让事情变得容易多了。这是一个关于如何做到这一点的示例。

```
class My_Form extends Zend_Form {

$field = $this->createElement('select', 'myselect');
$field->setLabel('Choose to display the form or not');
$field->setMultiOptions(array('1'='Display', '2'=>'Do not display'));
$this->addElement($field);

$field = $this->createElement('text', 'optionaltext');
$field->setLabel('This is an optional field');
$this->addElement($fiel);
} 
```

现在，在您的布局中，您应该包含 jQuery 库：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"> 
```

最后，您应该包含另一个 .js 文件（或简单地将代码嵌入页面的 <script> 标记中）。

```
$(document).ready(function() {
 $(function() {
  //Function triggered when changing the value in the drop down
  $('#myselect').change(function(event) {
   if($('#myselect').val() == 1) {
    //Show elements
    $('#optionaltext').show();
    //The following line shows/hides all the dd/dt wrappers as well
    $('[id*=optionaltext]).show();
   } else {
    //Hide elements
    $('#optionaltext').hide();
    //The following line shows/hides all the dd/dt wrappers as well
    $('[id*=optionaltext]).hide();
   }
  });
 });
}); 
```

现在请记住，我没有测试过代码，我只是在我真正喝完当天的第一杯咖啡之前把它写在了我的头上，所以......它可能有一些错误。话虽如此，这应该是您想做的事情的良好开端。如果缺少某些内容或找不到您的错误，请在此处提出您的问题。希望这可以帮助 ！

# javascript - 如何在 Android 的 phonegap 中自动大写文本输入？

> ID：11586223
> 
> 赞同：3
> 
> 时间：2012-07-20T20:01:25.283
> 
> 标签：javascript, android, html, cordova

是否有一种（非黑客）方法可以`autocapitalize="on"`在 Android 的 phonegap 中设置（如 iOS）？

如果没有，有没有办法在用户关注表单字段后“自动按下”移位`<input ... type="text">`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:41:27.363

您可以使用 textarea 宽度高度：22 像素（或更多）。

```
<textarea style="height: 22px" ...></textarea> 
```

偶然发现，使用带有cordova 1.9.0的ICS

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T11:02:38.033

通过 jQuery：

```
$('input[type="text"]').on('keypress', function() { 
    var $this = $(this), value = $this.val(); 
    if (value.length === 1) { 
      $this.val( value.charAt(0).toUpperCase() );
    }  
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-20T20:05:47.213

只需使用 css

```
input[type=text] {
    text-transform:uppercase;
} 
```

# php - 从 CIM 中提取值 - authorize.net

> ID：11586225
> 
> 赞同：2
> 
> 时间：2012-07-20T20:01:29.743
> 
> 标签：php, xml, authorize.net, authorize.net-cim

我已经制定了脚本以从 CIM 中获取信息：

```
$content = 
  "<?xml version=\"1.0\" encoding=\"utf-8\"?>" .
  "<getCustomerProfileRequest xmlns=\"AnetApi/xml/v1/schema/AnetApiSchema.xsd\">" .
  merchantAuthenticationBlock().
  "<customerProfileId>$cid</customerProfileId>" .
  "</getCustomerProfileRequest>";

$response = send_xml_request($content);
$parsedresponse = parse_api_response($response); 
```

那么，现在如何将返回值写入变量？

我试过了：

```
$customerPaymentProfileId = $parsedresponse->customerPaymentProfileId;
$customerShippingAddressId = $parsedresponse->customerShippingAddressId; 
```

但这会将变量返回为空。我觉得我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:56:32.577

查看`$parsedresponse`do`print_r($parsedresponse)`或的结构`var_dump($parsedresponse)`。从那里您可以看到数组的结构并从那里获取您的值。

仅供参考，支付配置文件位于数组中，因此您需要遍历它们以获取它们的值。假设`parsedresponse`是根 XML 节点，您可以像这样获取它们：

```
foreach ($parsedresponse->profile->paymentProfiles as $profile)
{
    echo $profile->customerPaymentProfileId;
} 
```

仅供参考，这是此响应的示例数组结构（来自[AuthnetXML](https://github.com/stymiee/Authorize.Net-XML)示例代码。*我是这个库的作者*）：

```
<?xml version="1.0" encoding="utf-8"?>
<getCustomerProfileResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd">
  <messages>
    <resultCode>Ok</resultCode>
    <message>
      <code>I00001</code>
      <text>Successful.</text>
    </message>
  </messages>
  <profile>
    <merchantCustomerId>12345</merchantCustomerId>
    <email>user@example.com</email>
    <customerProfileId>5427896</customerProfileId>
    <paymentProfiles>
      <billTo>
        <firstName>John</firstName>
        <lastName>Smith</lastName>
        <address>123 Main Street</address>
        <city>Townsville</city>
        <state>NJ</state>
        <zip>12345</zip>
        <phoneNumber>800-555-1234</phoneNumber>
      </billTo>
      <customerPaymentProfileId>4796541</customerPaymentProfileId>
      <payment>
        <creditCard>
          <cardNumber>XXXX1111</cardNumber>
          <expirationDate>XXXX</expirationDate>
        </creditCard>
      </payment>
    </paymentProfiles>
    <paymentProfiles>
      <billTo>
        <firstName>John</firstName>
        <lastName>Doe</lastName>
        <company/>
        <address>123 Main St.</address>
        <city>Bellevue</city>
        <state>WA</state>
        <zip>98004</zip>
        <country>USA</country>
        <phoneNumber>800-555-1234</phoneNumber>
        <faxNumber>800-555-1234</faxNumber>
      </billTo>
      <customerPaymentProfileId>4796585</customerPaymentProfileId>
      <payment>
        <creditCard>
          <cardNumber>XXXX1111</cardNumber>
          <expirationDate>XXXX</expirationDate>
        </creditCard>
      </payment>
    </paymentProfiles>
    <shipToList>
      <firstName>John</firstName>
      <lastName>Smith</lastName>
      <address>123 Main Street</address>
      <city>Townsville</city>
      <state>NJ</state>
      <zip>12345</zip>
      <phoneNumber>800-555-1234</phoneNumber>
      <customerAddressId>4907537</customerAddressId>
    </shipToList>
    <shipToList>
      <firstName>John</firstName>
      <lastName>Doe</lastName>
      <company/>
      <address>123 Main St.</address>
      <city>Bellevue</city>
      <state>WA</state>
      <zip>98004</zip>
      <country>USA</country>
      <phoneNumber>800-555-1234</phoneNumber>
      <faxNumber>800-555-1234</faxNumber>
      <customerAddressId>4907591</customerAddressId>
    </shipToList>
  </profile>
</getCustomerProfileResponse> 
```

# vim - 在 vim-powerline 中将 pythonhelper 添加到 MacVim 状态行

> ID：11586230
> 
> 赞同：2
> 
> 时间：2012-07-20T20:01:46.233
> 
> 标签：vim, macvim, vim-plugin

我想使用 MacVim 将[pythonhelper](http://www.vim.org/scripts/script.php?script_id=435)添加到[vim-powerline](https://github.com/Lokaltog/vim-powerline/)。

[在 github 上](https://github.com/Lokaltog/vim-powerline/issues/90)有一个 issue 讨论了这个问题，但是虽然这个 issue 已经关闭，但分辨率并不清楚。

这样做的最佳方法是什么？

# javascript - 使用 Heroku 的 Javascript

> ID：11586231
> 
> 赞同：0
> 
> 时间：2012-07-20T20:01:51.553
> 
> 标签：javascript, heroku, coffeescript

我在本地主机上使用 javascript/coffeescript 完成了所有工作。

但是当我将它转移到heroku时。我看到的唯一 javascript 资产是 application-2094230948230948.js （不是确切的数字）。里面是压缩的javascript。我找不到我的咖啡脚本应该编译到的 [scaffold].js。

我在 chrome 中的 javascript 控制台没有找到某些函数/库。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:24:10.003

这就是工作中的资产管道。当您在生产中时，它将所有 javascript 合并到一个文件中。

请务必`application.js`使用在清单文件中添加您的自定义库`//= require`

# extjs4.1 - Extjs 4.1，为存储同步制作 JSON 数组

> ID：11586243
> 
> 赞同：3
> 
> 时间：2012-07-20T20:02:41.737
> 
> 标签：extjs4.1

当我为编辑的网格同步时，extjs 通过 AJAX 将 JSON 数据传递给服务器。

如果我编辑多行并同步，则它会生成 JSON 数组。但如果我只编辑单行，它只会传递一个 JSON 数据。

所以我在接收参数时遇到了一些问题，因为参数类型不同。

我的问题是，

即使对于单个编辑的网格也可以制作**JSON 数组日期吗？**

如果是这样，我该怎么办？有人知道请给我建议。

**[单身的]**

![在此处输入图像描述](../Images/64a59b2fbda7c6c34aeedd75ddc89ef0.png)

**[多]**

![在此处输入图像描述](../Images/d319473685903cd5c1ac341f522a16e6.png)

这是网格商店的一部分，

```
proxy: {
        type: "ajax",
        api: {
            update: 'Order/ItemUpdate',
            read: 'Order/ItemList',
            create: undefined,
            destroy: undefined
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T22:29:37.877

只需将`allowSingle`配置设置`Ext.data.writer.Json`为**false**。如文档中所述[**。**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-allowSingle)

我很确定这可以通过您的代理配置完成，例如：

```
proxy: {
    type: 'ajax',
    writer: {
        type: 'json',
        allowSingle: false
    },
    api: {
        update: 'Order/ItemUpdate',
        read: 'Order/ItemList',
        create: undefined,
        destroy: undefined
    }
} 
```

# php - Opencart Paypal 不支持的货币

> ID：11586249
> 
> 赞同：3
> 
> 时间：2012-07-20T20:03:01.253
> 
> 标签：php, paypal, opencart, out

我试图支持 ZAR（南非兰特）的结帐。

到目前为止，我已经启用了 $，这启用了 paypal 模块，但是转换尚未完成。

该网站只需结帐到价值。例如：通过贝宝结账时，R1500.00 = $1500.00。

使用内置转换器进行货币转换的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:03:06.383

好的找到了解决方案：

用户 Qphoria取自[Opencart 论坛](http://forum.opencart.com/viewtopic.php?f=136&t=65005)

问：如果我的货币不受支持，我如何使用 paypal？问：如何使用不支持我的货币的支付网关？问：Paypal 不支持我的货币？

答：您仅限于支付网关支持的内容。但是，您可以添加代码以相当容易地将您的货币自动转换为受支持货币的当前汇率。

(v1.5.x) 1\. 编辑：catalog/controller/payment/.php

1.  查找（仅限第一个实例）：

代码：全选 $order_info = $this->model_checkout_order->getOrder

1.  之后，添加（用您选择的有效货币替换美元）：

代码：全选 $order_info['currency_code'] = 'USD';

无论您选择使用哪种货币，请确保您在管理->系统->本地化->货币页面的商店中的货币列表中有它。它不需要启用，只需要存在才能进行转换计算。

然后，这将在金额发送到网关之前自动转换金额。客户可能不会注意到这一点。例如，他们会在结帐页面上看到 1000 AED 但您会在您的贝宝账户中看到 272.25 美元（基于当前的兑换率）。

直到 1.5.1.3，Paypal Standard 自动执行此操作 在 1.5.2 中，它被更改（不是为了更好），如果使用不受支持的货币，则简单地将其从支付列表中禁用。所以这将需要特殊的指令，也许应该在核心中改变。

现在： 1\. 编辑：catalog/model/payment/pp_standard.php

1.  查找并删除：

代码：全选 if (!in_array(strtoupper($this->currency->getCode()), $currencies)) { $status = false; }

1.  编辑：目录/控制器/付款/pp_standard.php

2.  查找（仅限第一个实例）：

代码：全选 $order_info = $this->model_checkout_order->getOrder

1.  之后，添加：

代码：全选 $currencies = array('AUD','CAD','EUR','GBP','JPY','USD','NZD','CHF','HKD','SGD',' SEK','DKK','PLN','NOK','HUF','CZK','ILS','MXN','MYR','BRL','PHP','TWD','THB' ，'尝试'）; if (!in_array(strtoupper($this->currency->getCode()), $currencies)) { $order_info['currency_code'] = 'USD'; }

用您选择的支持货币更改“美元”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-10T13:15:21.797

对于 opencart 2 或 3，第一步是相同的 编辑：catalog/model/extension/payment/pp_standard.php

查找并删除：

```
if (!in_array(strtoupper($this->currency->getCode()), $currencies)) { $status = false; } 
```

第二步是

在目录/控制器/扩展/付款/pp_standard.php 找到

```
$order_info = $this->model_checkout_order->getOrder($this->session->data['order_id']); 
```

在它之后，并且

```
$order_info['currency_code'] = 'USD'; 
```

此解决方案会将所有货币兑换成美元，然后前往 paypal.com 付款

# loops - Lua 尾调用 vs 循环

> ID：11586250
> 
> 赞同：2
> 
> 时间：2012-07-20T20:03:02.220
> 
> 标签：loops, lua, tail-call-optimization

我正在用 Lua 编写一个小 CLI 模块以嵌入到 C 程序中。

我想知道处理提示的最佳方法是什么，在**tail-call**和**loop**之间进行选择。

作为**尾声，**我会做这样的事情：

```
call = { help=function () print 'just ask politely' end }

function shell ()
  io.write ('% ')
  local cmd = io.read ()

  if cmd ~= 'quit' then      
    call[cmd] () -- for simplicity assume call[cmd] is never nil
    return shell ()
  end
end 
```

我会问以下问题：

1.  是否正确使用/实现了*尾调用消除*？是否会`call[cmd] ()`在堆栈中引入任何干扰，以便我不会利用*尾调用消除*？

2.  使用如下**循环**会更好吗？如果是，为什么？

    ```
    repeat
      io.write ('% ')
      local cmd = io.read()

      -- do stuff
    until cmd == 'quit' 
    ```

3.  在 Lua 编程中说明

    > *tail call*是一个装扮成呼叫的 goto。

    那么尾调用和循环之间有什么具体区别吗？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T20:16:07.890

> 它是尾调用消除的正确使用/实现吗？

如果你问最后的调用是否`shell`是根据 Lua 语法的正确尾调用，[答案是 yes](http://www.lua.org/manual/5.1/manual.html#2.5.8)。

> call[cmd] () 是否会在堆栈中引入任何干扰，这样我就不会利用尾调用消除？

函数调用不会以您所想的方式修改堆栈。在 Lua 中，尾调用的*唯一*要求是它的形式为`return Function(params)`，没有不是函数返回值的额外返回值。

一个适当的尾调用甚至不必调用它自己；它不需要是递归的。

> 使用如下循环会更好吗？如果是，为什么？

这是一个主观的观点。就个人而言，我会说循环对正在发生的事情更加清楚。

但是，如果您想要一个客观的性能问题，请考虑这一点：尾调用永远不会比循环*快。*就性能而言，您将获得的绝对最佳值是相等的。

而且很可能不会是这样。Lua 尾调用“优化”仅仅意味着它重用了当前函数的堆栈条目。Lua 仍然需要从全局表中获取函数。Lua 仍然必须完成调用函数的所有开销；它只是不必分配更多的堆栈内存。

这实际上是关于不溢出堆栈并且在不必要时不分配内存。

> 尾调用和循环之间有什么具体区别吗？

往上看。

# md5 - MD5 哈希未创建所有字符

> ID：11586252
> 
> 赞同：2
> 
> 时间：2012-07-20T20:03:15.340
> 
> 标签：md5

我正在使用 MD5 散列来加密程序的密码。但它并没有创造出所有的角色，而且对一些人来说是不可读的。这是一个屏幕截图。链接- [http://i46.tinypic.com/2qvf2o2.jpg](http://i46.tinypic.com/2qvf2o2.jpg)

任何帮助表示赞赏

谢谢 [![IMG](../Images/97fbc54fe8785d20c13b3cb015afa56b.png)](https://i.stack.imgur.com/5dzhn.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:12:05.957

大概您想将 MD5 返回的字节数组转换为十六进制字符串以进行显示。像**d131dd02c5e6eec4**这样的东西。

您可以这样做：

[在 Java 中，如何将字节数组转换为十六进制数字字符串，同时保持前导零？](https://stackoverflow.com/questions/332079/in-java-how-do-i-convert-a-byte-array-to-a-string-of-hex-digits-while-keeping-l)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:05:58.130

您将 MD5 返回的字节解释为原始字符数据。
由于 MD5 不返回表示字符的字节，因此您得到的结果毫无意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:06:36.013

你得到的是一个二进制值。所以这是一堆原始字节，可能会或可能不会映射到默认代码页中的有效字符。您应该做的是将 byte[] 转换为十六进制。您可以使用 Apache Commons Codec 之类的东西对其进行编码。http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html#encodeHex(byte[])

# mongodb - mongodb 设计：树层次结构的原子更新

> ID：11586255
> 
> 赞同：1
> 
> 时间：2012-07-20T20:03:49.537
> 
> 标签：mongodb, database-design, transactions, tree

我正在处理页面层次结构（mongodb 文档）：

```
{
    _id: 012,
    content: "lorem ipsum whatever...",
    subpages: [123,234,345,456], // page ids
} 
```

页面结构实际上是高度动态的，因此许多更新将与许多读取同时发生。但是，每次更改（例如将子页面移动到另一个页面）都需要至少 2 次更新操作：

```
// move 123 into page 234
db.pages.update({"_id":012}, {$pull:{"subpages":123}});
db.pages.update({"_id":234}, {$push:{"subpages":123}});

// delete page 345
db.pages.update({"_id":012}, {$pull:{"subpages":345}});
db.pages.remove({"_id":345}); 
```

有没有办法执行（或设计模型以启用执行）操作，例如移动页面或原子地删除页面（以防止层次结构的状态变坏）？

**笔记**

我现在正在研究的一种可能性是通过向每个页面添加一个“lockedBy”字段来手动锁定文档，该字段将包含一个事务 ID。但是如果我想要第二个锁定操作阻塞直到第一个锁定操作完成，我不喜欢连续轮询的想法（请参阅[https://jira.mongodb.org/browse/SERVER-2244](https://jira.mongodb.org/browse/SERVER-2244)）。此外，由于锁定是由应用程序管理的，如果应用程序（或其中一个实例）在锁定操作期间由于某种原因出现故障，则需要以某种方式解锁文档，而不会影响其他事务。

我还查看了[http://www.mongodb.org/display/DOCS/Trees+in+MongoDB](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB)，似乎没有一个示例（除了单个文档）解决了这个问题。但是，我想避免将整个层次结构放入单个文档中，因为 16MB 的文档大小限制和移动页面的困难（基本上我需要为每次更改更新整个文档）。

**更新**

我们希望一个页面最多支持 10000 个子页面。页面 ID 的长度至少为 6 个字符。考虑到这一点，我们离开了 mySQL，因为我们需要跟踪子页面的顺序。由于 mySQL 没有数组结构，唯一的方法是使用位置列。当页面频繁移动时，计算平均位置并在位置值变得太长时重新索引是很昂贵的。此外，如果我们想将逗号分隔的 id 列表放入列中，我们必须使用 TEXT 列（从磁盘读取）而不是 VARCHAR（限制为 65536 个字符）以支持 10000 个子页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:15:15.040

没有交易。有原子操作，但它们一次只对一个文档进行操作。我想说，可靠更新的唯一选择是将整个层次结构放入一个文档中。我不会太担心超出文档限制：16MB 是很多整数。

我还认为，这是一个“常规”关系事务数据库更有用的例子。

# api - Magento 扩展在产品信息中包含更多数据

> ID：11586258
> 
> 赞同：1
> 
> 时间：2012-07-20T20:04:10.497
> 
> 标签：api, magento, xml-rpc

好的，这是我的情况。

我们正在尝试将客户的 Magento 商店中的产品导入我们的应用程序。

从我们使用 XML-RPC 可用的所有标准 api 调用中，我们设法获得了部分信息。

但是我们怎么也无法获得产品的 URL。原因是 catalog_product.list 和 catalog_product.info 没有返回有关产品的“产品 url”信息。

*   问题 1)
    有没有办法用现有的标准 Magento API 解决这个问题？

*   问题 2）
    如果没有，是否可以通过 MagentoConnect 向客户提供扩展并使“catalog_product.list”api 响应包含“产品 url”

笔记：

它不仅是完整的产品 url，我们还想在其中包含更多信息。

任何帮助将不胜感激。

# salesforce - 为什么相同的页面布局对于不同的配置文件不同？

> ID：11586263
> 
> 赞同：0
> 
> 时间：2012-07-20T20:05:12.187
> 
> 标签：salesforce

我有 2 个配置文件，为相同的记录类型分配了相同的页面布局。当我以 1 个配置文件的用户身份登录时 - 我在 PL 中看到一个部分和字段，但我没有在另一个配置文件中。

这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:38:38.270

他的问题很可能是配置文件级别的字段级别安全性。您将需要查看配置文件并查找两者之间的不一致之处。

# objective-c - 如何多次将相同的 NSString 写入 plist。覆盖iOS

> ID：11586268
> 
> 赞同：1
> 
> 时间：2012-07-20T20:05:40.843
> 
> 标签：objective-c, ios, xml, xcode, plist

我正在为越狱的 iOS 设备编写一个调整，我希望能够将这个`NSString`“bundleID”和在我的代码中创建的整数写入一个 plist 文件。下面的代码可以执行此操作，但是，它只执行一次，并且不允许我将其多次写入 plist。我想这样做是因为 bundleID 发生了变化，也应该写入 plist。基本上我想要做的是当一个应用程序启动时，该应用程序的捆绑ID（com.apple.mobilesafari）被写为我的plist中的键。然后，我有代码可以在每次打开应用程序时将值加 1。例如，如果我打开移动 safari 四次，plist 应该是这样的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"          "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.mobilesafari</key>
    <integer>4</integer>
    <key>customText</key>
    <false/>
    <key>enabled</key>
    <false/>
</dict>
</plist> 
```

但是，当我四次启动移动 Safari 时，它仍然...

```
<key>com.apple.mobilesafari</key> <integer>1</integer> 
```

我还希望为每个应用程序保存 bundleID。因此，如果我打开 safari，那么我想要的联系人都在我的 plist 中。例如...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.mobilesafari</key>
    <integer>1</integer>
    <key>customText</key>
    <false/>
    <key>enabled</key>
    <false/>
</dict>
<dict>
    <key>com.apple.contacts</key>
    <integer>1</integer>
    <key>customText</key>
    <false/>
    <key>enabled</key>
    <false/>
</dict>
</plist> 
```

这是我的objective-c代码...

```
%hook SBApplicationIcon
-(void)launch
{
// Return original method
        %orig;

// Get Bundle ID
    NSString* bundleID = [self leafIdentifier];

// Print that badboy!
    NSLog(@"Bundle ID: %@ ",bundleID);

// Set up plist
NSMutableDictionary *launches = [[NSMutableDictionary alloc]     initWithContentsOfFile:@"/var/mobile/Library/Preferences/com.bengerard.ipslider.plist"];

// Check plist exists
NSString *pathToFile = @"/var/mobile/Library/Preferences/com.bengerard.apppop.plist";
BOOL isFile = [[NSFileManager defaultManager] fileExistsAtPath:pathToFile isDirectory:NO];

 if(isFile)
{
// Counting
    int count = [[launches objectForKey:bundleID] intValue];
    count++;

// Write number of launches to plist
    [launches setObject:[NSNumber numberWithInt:count] forKey:bundleID];
//[launches insertObject:[NSNumber numberWithInt:count] forKey:bundleID];
    [launches writeToFile:@"/var/mobile/Library/Preferences/com.bengerard.apppop.plist" atomically:YES];

}
else {
//The file doesn't exit. 
}
// [bundleID release];
// [pathToFile release];
// [launches release];

}
%end 
```

PS：我也在使用 DHowett 的 theos 来编译我的调整。

**编辑：意识到我的两个 plist 是不同的。可能导致我的问题。我稍后会测试**

# ios - 如何使用 AVPlayer 在备用音频流之间切换

> ID：11586271
> 
> 赞同：10
> 
> 时间：2012-07-20T20:05:55.213
> 
> 标签：ios, avfoundation, avplayer, http-live-streaming

我有一个测试应用程序，它使用 AVPlayer 播放 m3u8 HLS 播放列表指定的视频。播放列表指定了几个备用音频流，类似于 Apple 在此处提供的“列表 10”示例播放列表：http: [//developer.apple.com/library/ios/#technotes/tn2288/_index.html#//apple_ref/ doc/uid/DTS40012238-CH1-ALTERNATE_MEDIA](http://developer.apple.com/library/ios/#technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238-CH1-ALTERNATE_MEDIA) 应用程序需要能够在播放视频时在备用音频流之间切换。例如，应用程序应该能够通过用户在播放视频时点击应用程序中的按钮在英语、法语和西班牙语音频流之间切换。

AVPlayer 及其相关对象将使用哪些 AVFoundation 类和方法在 m3u8 播放列表中指定的音频流之间切换？我查看了 AVFoundation 类文档，但没有看到如何执行此操作。

显示如何执行此操作的一些示例代码的链接会很棒。我一直在网上搜索这些信息，但没有成功。感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T23:54:18.537

对于带有 AVPlayer 的 m3u8 播放，看起来您不能使用 AVAsset 来构造 AVPlayerItem。您需要直接从 URI 构造一个 AVPlayerItem。使用此 AVPlayerItem 实例化 AVPlayer，然后 KVO 侦听属性 @“status”，`[[avPlayerInstance currentItem] asset]`如果状态为 AVPlayerStatusReadyToPlay，您将拥有一个资产。[AV Foundation Programming Guide](http://developer.apple.com/library/ios/DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/AVFoundationPG.pdf)的第 20 页对此进行了描述。

要将音频更改为各种替代品，请使用：

```
AVMediaSelectionGroup *audioSelectionGroup = [[[avPlayerInstance currentItem] asset] mediaSelectionGroupForMediaCharacteristic: AVMediaCharacteristicAudible];

NSLog(@"audioSelectionGroup: %@", audioSelectionGroup);

// [audioSelectionGroup options] // Array of the options in the group above. 
```

并选择 AVMediaSelectionOption （您想要的音频通道）：

```
[[avPlayerInstance currentItem] selectMediaOption:avMediaSelectionOptionInstance] inMediaSelectionGroup: audioSelectionGroup]; 
```

这同样适用于视频。

[这在IOS 5 的 AV Foundation 发行说明](http://developer.apple.com/library/mac/#releasenotes/AudioVideo/RN-AVFoundation/index.html)（第 3 部分）的“根据语言和其他标准选择音频和字幕媒体”部分中进行了描述。

# html - CSS使两个div的高度与显示表相等

> ID：11586277
> 
> 赞同：14
> 
> 时间：2012-07-20T20:06:30.837
> 
> 标签：html, css, css-tables

在以下 HTML 中，div .left 和 .right 具有不同的高度。是否可以在不定义高度的情况下使两个 div 具有相同的高度。我试过使用 display:table 但不起作用。

**HTML：**

```
<div class="wrap">

    <div class="left">
       Lorem    
    </div>

    <div class="right">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    </div>

</div> 
```

**CSS：**

```
.wrap{
    overflow:hidden;
    width:250px;
    display: table;
    border-collapse: collapse;
}

.left{
    width:100px;
    float:left;
    display: table-cell;
    border-bottom:1px solid green;    
}

.right{
    width:150px;
    float:left;
    border-bottom:1px solid red;
    display: table-cell;     
} 
```

**jsfiddle：http:** [//jsfiddle.net/fJbTX/1/](http://jsfiddle.net/fJbTX/1/)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T20:12:03.327

删除`float`，这会将元素从文档的正常流程中取出，并添加另一个包装器元素，以充当`table-row`：

> `table-cell`, 行为类似于`<td>` HTML 元素

这意味着这需要（尽管我没有验证我的推论）`display: table-row`父母，因为`td`需要`tr`父母元素。

```
.wrap{
    overflow:hidden;
    width:250px;
    display: table;
    border-collapse: collapse;
}

.row {
    display: table-row;
}
.left{
    width: 50%;
    display: table-cell; 
    background-color: #0f0;
}

.right{
    width: 50%;
    background-color: #f00;
    display: table-cell;     
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fJbTX/4/)。

参考：

*   [CSS 显示](https://developer.mozilla.org/en/CSS:display)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T20:10:45.660

像这样的东西？

[http://jsfiddle.net/fJbTX/3/](http://jsfiddle.net/fJbTX/3/)

我拿出了浮动财产

# android - Android - 有没有办法弹出整个任务？

> ID：11586283
> 
> 赞同：2
> 
> 时间：2012-07-20T20:06:48.420
> 
> 标签：android

我在 Android 应用程序中运行了两个活动任务，我想要一种方法来完全弹出第二个任务并返回到第一个任务的顶部。问题是，第一个堆栈中的顶部任务可能是许多不同的活动。

假设我有一堆活动的任务 1

任务 1 -> A1 -> A2 -> A3

然后我开始任务 2：

任务 2 -> B1 -> B2 -> B3

当我到达 B3 时，我想弹出整个任务 2 堆栈并返回到 A3。我知道我可以使用 A3 作为指定的意图活动类开始一个新意图，但是我的任务 1 可能如下所示：

任务 1 -> A1 -> A2

是否有任何简单的方法不跟踪任务 1 的最后一个活动来简单地从任务 2 中弹出所有内容，只需将我返回到任务 1 堆栈的顶部，而不管活动的类如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:09:23.390

我不确定这是否是您想要的，但是当您创建调用新活动的意图时，您可以设置一个清理堆栈的标志。

```
Intent intent = new Intent(this, Activity.class);            
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
startActivity(intent); 
```

如果这不是您所需要的，您可以使用 eclipse 自动完成来查看其他可用的标志。这是所有标志及其作用的列表。

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

# php - 在 wordpress 3.4.1 中重命名上传文件

> ID：11586284
> 
> 赞同：0
> 
> 时间：2012-07-20T20:06:50.580
> 
> 标签：php

我一直在尝试在上传时重命名我的图像，我发现的唯一一段代码是使用 32char 散列的代码。

```
function make_filename_hash($filename) {
  $info = pathinfo($filename);
  $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
  $name = basename($filename, $ext);
  return md5($name) . $ext;
}
add_filter('sanitize_file_name', 'make_filename_hash', 10); 
```

我的 php 知识非常有限，我到处寻找一个使用生成的随机数而不是哈希的示例，但没有成功。我最初的想法是获取数据库图像 ID 并将其用作上传时的图像文件名，但在此过程中我的大脑扭曲了。

无论如何，在这一点上，我会满足于某种编号系统，每次上传都会增加一位数字，或者如果这不是可能的，至少可以通过使用范围（如 rand(10000,99999)）来增加一些随机数。

任何帮助将不胜感激，非常感谢

==================================================== =============================== 好的，谢谢你的帮助埃里克，这是我到目前为止得到的，似乎工作得更好. 有什么办法可以让它连续吗？显然不使用 mt_rand :) 每次上传都会增加 1。也有可能两次生成相同的数字，因为这可能会在上传时产生问题。

```
function make_filename_hash($filename) {
  $info = pathinfo($filename);
  $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
  return mt_rand(10,10000) . $ext;
}
add_filter('sanitize_file_name', 'make_filename_hash', 10); 
```

==================================================== =============================== 你能从functions.php中的自定义表中读取数据并写入。我正在尝试从表中读取计数器，将图像设置为该计数器编号并更新数据库中的计数器。它似乎不起作用，计数器增加但表永远不会更新，并且无论数据库中的值是什么，计数器都不会使用该值，因此这意味着它也没有读取该值。我只想知道是否有另一种方法可以重命名文件，但使用我的自定义表中的值。这是我到目前为止得到的。我在想也许我使用了错误的钩子，但在这一点上我有点卡住了。多谢你们。

```
 function make_filename_counter($filename) {      
    $qry;
    $fcnt = 0;
    $sql = ("SELECT counter FROM bwbps_filenamecounter WHERE id = 1");
    $cnt = mysql_query($sql);
    foreach($cnt as $cnt) {
        $fcnt = $cnt->counter;
    }
    $fcnt = $fcnt + 1;
    $info = pathinfo($filename);
    $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
    $sql = "UPDATE bwbps_filenamecounter SET counter = " . $fcnt . " WHERE id = 1";
    $qry = mysql_query($sql);
    $fcnt = 0;
    return $fcnt . $ext;
}
add_filter('sanitize_file_name', 'make_filename_counter', 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:39:27.320

根据对[这个问题](https://stackoverflow.com/questions/3259696/rename-files-during-upload-within-wordpress-backend)的回答，我建议如下：

```
function make_filename_hash($filename) {
  $info = pathinfo($filename);
  $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
  $uniqueName = uniqid(basename($filename, $ext));
  return $uniqueName . $ext;
}
add_filter('sanitize_file_name', 'make_filename_hash', 10); 
```

这将使用原始文件名作为基础，然后附加一个时间敏感的标识符。有关 PHP 的 uniqid() 函数的说明，请参见[此处](http://php.net/manual/en/function.uniqid.php)。

我并不肯定，但我相信 WordPress 会在将任何内容保存到数据库之前应用 sanitize_file_name 过滤器。如果是这种情况，您将无法将新名称与数据库 ID 联系起来。

**编辑**

要返回不包含原始文件名的唯一标识符：

```
 function make_filename_hash($filename) {
      $info = pathinfo($filename);
      $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
      return uniqid() . $ext;
    } 
```

# sql - 使用 ROWID 在 Oracle 中定位行/记录是否安全？

> ID：11586285
> 
> 赞同：4
> 
> 时间：2012-07-20T20:06:50.783
> 
> 标签：sql, oracle, oracle-sqldeveloper

我正在查看一个客户端应用程序，它检索包括 在内的多个列`ROWID`，然后用于`ROWID`识别需要更新的行：

```
update some_table t set col1=value1
where t.rowid = :selected_rowid 
```

这样做安全吗？随着表被修改，`ROWID`行可以改变吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T20:12:46.377

“从 Oracle 8 开始，`ROWID`格式和大小从 8 个字节更改为 10 个字节。请注意，`ROWID`当您重新组织或导出/导入表时， 's 会发生变化。对于分区表，如果行从一个分区迁移到另一个分区，它也会发生变化一个`UPDATE`。”

[http://www.orafaq.com/wiki/ROWID](http://www.orafaq.com/wiki/ROWID)

我会说不。这可能是安全的，例如应用程序`ROWID`临时存储（比如生成一个可选项目列表，每个项目都用 标识`ROWID`，但该列表会定期重新生成而不是存储）。但是，如果`ROWID`以任何持久的方式使用它是不安全的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T20:23:06.930

假设您使用它`ROWID`之后的一小段时间`SELECT`，该表是一个标准的堆组织表，并且 DBA 没有对表做任何事情（如果应用程序在线，这是一个相当安全的假设)，`ROWID`将是稳定的。最好使用主键，但是当主键不可用时，大量 Oracle 开发的工具和框架将在`ROWID`短时间内使用主键。如果你打算在`ROWID`你之后使用很长一段时间，那将是不安全的`SELECT`——例如，如果你允许用户在本地编辑数据，然后在一段时间后与主数据库同步。

`ROWID`只是一行的物理位置，所以任何导致该位置改变的东西都会改变`ROWID`.

*   如果您使用的是索引组织表或分区表，则对行的更新可能会更改行的物理位置，这将更改`ROWID`.
*   如果从堆组织的表中删除一行，后续`INSERT`可能会插入具有完全不同数据的数据，而这些数据恰好使用与`ROWID`之前删除的行相同的数据。
*   各种管理任务可能会导致`ROWID`更改。导出和导入表会改变`ROWID`例如，但是会做一些类似新的在线收缩命令的事情。然而，这些管理任务通常不会在应用程序启动时完成，而且几乎肯定不会在白天完成。但是，如果 DBA 执行此类操作时应用程序没有关闭，或者应用程序保留数据，则可能会导致问题。

`ROWID`随着时间的推移，新特性为s 带来改变的新可能性变得越来越普遍。例如，索引组织表和在线收缩选项是相对较新的功能。在未来，可能会有更多的特性至少涉及`ROWID`到改变的可能性。

当然，如果我们是迂腐的，那么依赖主键也是不安全的。完全有可能出现其他会话并在您读取该行后更新该行的主键，或者某个其他会话在您选择该行并插入具有相同数据和不同主键的新行后删除该行。在任何一种情况下，了解使用数据库的应用程序实际应该做什么都是有帮助的。例如，允许更新主键或重用主键是非常罕见的，因此您通常可以确定使用主键是安全的。同样，相对常见的结论是，鉴于您使用分区的方式或给定您在索引组织表中定义索引的方式，更新将不会`ROWID`. 例如，如果您知道表是由 分区的`LOAD_DATE`，并且您从不更新`LOAD_DATE`，那么您实际上不会`ROWID`因为更新而经历对 的更改。如果您知道该表是按索引组织的，但您没有更新属于该索引的列，`ROWID`则`UPDATE`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T20:09:56.307

我认为这样做并不安全，理论上它不会改变，当然，直到有人“意外”删除了实际数据库中的某些内容......

我只会使用PK更有意义。

# c++ - stringstream noshowpoint 不起作用

> ID：11586287
> 
> 赞同：0
> 
> 时间：2012-07-20T20:07:02.423
> 
> 标签：c++, stringstream

我正在尝试使用以下代码将 67.5 写为 006750：

```
 float price = 67.5
 stringstream symbol;
 symbol << setfill('0') << setw(6) << fixed << setprecision(2) 
        << noshowpoint << price; 
```

但输出是 067.50

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:10:09.487

你很困惑。`std::noshowpoint`仅消除`.0`整数浮点数的尾随，例如`60.0`输出为`60`，它不会简单地删除所有数字上的点。

要得到你想要的，你可以这样做：

```
float price = 67.5;
std::stringstream symbol;
symbol << std::setfill('0') << std::setw(6) << int(100 * price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:13:17.077

看起来您正在尝试使用 noshowpoint 删除小数点，但如果您查看[此处](http://www.cplusplus.com/reference/iostream/manipulators/noshowpoint/)的示例，您会发现当使用 noshowpoint 打印 pi 时，它仍然保留小数点，可能是因为没有它就失去了精度。

我可能只是在这里手动进行一些字符串操作，因为我看到的所有字符串流选项似乎都没有做你想要的。

# sql - SQL 语句中的 IF/THEN 逻辑

> ID：11586288
> 
> 赞同：0
> 
> 时间：2012-07-20T20:07:05.620
> 
> 标签：sql, if-statement

构建购物车应用程序。有些产品有选择，有些没有。如果该产品确实有选项，我的访客可以购买带有或不带有关联选项的产品。

我有以下 JOIN 语句来提取购物车输出的所有相关数据：

```
SELECT tblshopping_cart.cart_id, 
       tblshopping_cart.session_id, 
       tblshopping_cart.product_id, 
       tblshopping_cart.product_qty, 
       tblshopping_cart.product_option, 
       tblproducts.product_title, 
       tblproducts.product_price, 
       tblproducts.product_sale_price_status, 
       tblproducts.product_sale_price, 
       tblproduct_options.option_text, 
       tblproduct_options.option_upcharge
FROM tblshopping_cart
INNER JOIN tblproducts ON tblshopping_cart.product_id = tblproducts.product_id
INNER JOIN tblproduct_options 
        ON tblshopping_cart.product_option = tblproduct_options.option_product_id
WHERE tblshopping_cart.session_id = '$session_id'
ORDER BY tblshopping_cart.product_qty ASC 
```

如果购物车中的所有产品都具有关联的 tblshopping_cart.product_option's 存在于 tblproduct_options 表中，则此方法有效。如果产品没有有效的选项，它只会返回那些有的选项。

默认情况下，添加的任何没有选项的产品都会添加到购物车，其中 product_option 值的值为“0”。如果站点用户确实选择了一个选项，则会添加选项值。

如果该行具有有效的 option_product_id，我需要做的是拉入选项信息（文本和附加费用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:12:12.410

`LEFT JOIN`如果您不想要求记录集与 有关系，则应使用`product_option`。

它看起来像这样：

```
LEFT JOIN tblproduct_options 
ON tblshopping_cart.product_option = tblproduct_options.option_product_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:12:19.147

而不是对 tblproduct_options 执行 INNER JOIN 您应该执行 LEFT OUTER JOIN 以便您获得带有和不带有关联选项的产品。

# php - 为什么我的 MySQL 查询给出了一个奇怪的答案？

> ID：11586296
> 
> 赞同：3
> 
> 时间：2012-07-20T20:07:56.070
> 
> 标签：php, mysql, sql, database

所以，我正在尝试实现一个动态的 htaccess 禁止系统，而这行代码给我带来了巨大的问题：

```
$ip = mysql_query("SELECT ID FROM wp_contactform WHERE Nimi='Christian'"); 
```

当我回显它时，它给了我以下信息：

`Resource id #3`

该表包含 Christian 3 次，id 分别为 11、13 和 10。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T20:10:25.860

```
$ip = mysql_query("SELECT ID FROM wp_contactform WHERE Nimi='Christian'"); 
```

`$ip`将简单地检索表示结果集的资源 - 它不是数据本身。

您将需要考虑使用：

```
$ip_array = mysql_fetch_array($ip);
$ID = $ip_array['ID']; 
```

得到`ID`.

另请记住，此 API`(mysql_*)`已弃用，因此在 PHP 中查看替代 MySQL 库可能符合您的最佳利益：

**MySQLi**：[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

**MySQL PDO**： http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:10:55.213

[说明书](http://php.net/manual/en/function.mysql-query.php)上写得很清楚

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

```
while ($row = mysql_fetch_assoc($ip))
{
 echo $result[] = $row;
}
echo "<pre>";
print_r($result); 
```

# java - 如何防止 Gson 将长数字（一个 json 字符串）转换为科学记数法格式？

> ID：11586299
> 
> 赞同：31
> 
> 时间：2012-07-20T20:08:20.203
> 
> 标签：java, json, gson

我需要将 json 字符串转换为 java 对象并将其显示为 long。json 字符串是一个固定的长数字数组：

```
{numbers
[ 268627104, 485677888, 506884800 ] } 
```

除了以 0 结尾的数字外，要转换的代码在所有情况下都可以正常工作。它将这些代码转换为科学记数法数字格式：

```
 public static Object fromJson(HttpResponse response, Class<?> classOf)
    throws IOException {
    InputStream instream = response.getResponseInputStream();                   

    Object obj = null;
    try {
        Reader reader = new InputStreamReader(instream, HTTP.UTF_8);

        Gson gson = new Gson();

        obj = gson.fromJson(reader, classOf); 

        Logger.d(TAG, "json --> "+gson.toJson(obj));
    } catch (UnsupportedEncodingException e) {
        Logger.e(TAG, "unsupported encoding", e);
    } catch (Exception e) {
        Logger.e(TAG, "json parsing error", e);
    }

    return obj;
} 
```

实际结果：Java对象：268627104、485677888、5.068848E+8

请注意，最后一个数字被转换为科学记数法格式。谁能建议可以做些什么来解决它或防止它或撤消它？我正在使用 Gson v1.7.1

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-05-05T23:44:10.037

如果您可以选择序列化为字符串，则可以配置 GSON 以执行此操作：

```
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.setLongSerializationPolicy( LongSerializationPolicy.STRING );
Gson gson = gsonBuilder.create(); 
```

这将产生类似的东西：

```
{numbers : [ "268627104", "485677888", "506884800" ] } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-16T23:10:43.943

另一种解决方法是改用 JsonParser 类。这将返回 Gson 对象表示（JsonElement）而不是用户定义的类，但避免了转换为科学计数法的问题。

```
import java.lang.reflect.Type;
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonParser;
import com.google.gson.reflect.TypeToken;

public class GsonTest
{
    public static void main(String[] args)
    {
        String json = "{numbers:[268627104,485677888,506884800]}";

        Gson gson = new Gson();
        Type type = new TypeToken<Map<String, Object>>(){}.getType();
        Map<String, Object> jsonMap = gson.fromJson(json, type);
        System.out.println("Gson output:");
        System.out.println(jsonMap);

        JsonParser jsonParser = new JsonParser();
        JsonElement jsonElement = jsonParser.parse(json);
        System.out.println("JsonParser output:");
        System.out.println(jsonElement);
    }
} 
```

代码输出：

```
Gson output:  
{numbers=[2.68627104E8, 4.85677888E8, 5.068848E8]}  
JsonParser output:  
{"numbers":[268627104,485677888,506884800]} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-11T12:36:17.703

我有一个类似的问题，它不仅将整数转换为双精度，而且它实际上会丢失某些长数字的精度，如[相关问题](https://stackoverflow.com/q/17695242/179864)中所述。

我追踪了这种转换为`ObjectTypeAdapter`'s`read`方法，特别是：

```
case NUMBER:
  return in.nextDouble(); 
```

可能可以插入修改后`TypeAdapter`的 for `Object`，但我无法让它工作，所以我只是将`read`方法 ( `Object read(JsonReader in)`) 复制到我自己的代码中，并将上面的行修改为：

```
case NUMBER:
    final String s = in.nextString();
    try {
        return Integer.parseInt(s);
    } catch (NumberFormatException e) {
        // ignore
    }
    try {
        return Long.parseLong(s);
    } catch (NumberFormatException e) {
        // ignore
    }
    return Double.parseDouble(s); 
```

我希望 Gson 默认这样做..

然后我将其他连接部分放在一个看起来像这样的辅助方法中：

```
public static Object parse(final Reader r) {
    try (final JsonReader jr = new JsonReader(r)) {
        jr.setLenient(true);
        boolean empty = true;
        Object o = null;
        try {
            jr.peek();
            empty = false;
            o = read(jr);
        } catch (EOFException e) {
            if (!empty) {
                throw new JsonSyntaxException(e);
            }
        }
        if (o != null && jr.peek() != JsonToken.END_DOCUMENT) {
            throw new JsonIOException("JSON document was not fully consumed.");
        }
        return o;
    } catch (IOException e) {
        throw new JsonIOException(e);
    }
} 
```

所以现在代替`new Gson().fromJson(r, Object.class)`，我打电话给`parse(r)`。

这对我很有效，因为我希望能够解析具有任何结构的 json 数据，但是如果您有一个特定的目标类，您可能只需要消除`Object`该类成员中的出现。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-12T17:12:10.643

遇到了同样的问题，经过一番调查，我发现了这里。

**行为：**

*   Gson
    对于没有小数部分的数字，`Gson`将其转换为`Double`,
*   Jackson
    对于没有小数部分的数字，`Jackson`将其转换为`Integer`或`Long`，取决于数字的大小。

**可能的解决方案：**

*   明确地将`Gson`的返回值从转换`Double`为。`Long`
*   改为使用`Jackson`。
    我更喜欢这个。

* * *

**代码 - 测试`Jackson`**

**ParseNumberTest.java：**

```
import java.util.List;

import org.testng.Assert;
import org.testng.annotations.Test;

import com.fasterxml.jackson.databind.ObjectMapper;

/**
 * test - jackson parse numbers,
 * 
 * @author eric
 * @date Jan 13, 2018 12:28:36 AM
 */
public class ParseNumberTest {
    @Test
    public void test() throws Exception {
    String jsonFn = "numbers.json";

    ObjectMapper mapper = new ObjectMapper();

    DummyData dd = mapper.readValue(this.getClass().getResourceAsStream(jsonFn), DummyData.class);
    for (Object data : dd.dataList) {
        System.out.printf("data type: %s, value: %s\n", data.getClass().getName(), data.toString());
        Assert.assertTrue(data.getClass() == Double.class || data.getClass() == Long.class || data.getClass() == Integer.class);

        System.out.printf("%s\n\n", "------------");
    }
    }

    static class DummyData {
    List<Object> dataList;

    public List<Object> getDataList() {
        return dataList;
    }

    public void setDataList(List<Object> dataList) {
        this.dataList = dataList;
    }
    }
} 
```

**数字.json：**

```
{
    "dataList": [
        150000000000,
        150778742934,
        150000,
        150000.0
    ]
} 
```

**如何运行：**

*   测试用例基于`Jackson`& `TestNG`。
*   放在`numbers.json`与 相同的包装中`ParseNumberTest.java`。
*   作为 testng 测试运行，然后它将打印解析结果的类型和值。

**输出：**

```
data type: java.lang.Long, value: 150000000000
------------

data type: java.lang.Long, value: 150778742934
------------

data type: java.lang.Integer, value: 150000
------------

data type: java.lang.Double, value: 150000.0
------------

PASSED: test 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T09:29:11.867

不聪明，但仍然有效的方法是在数字的开头和结尾添加“。然后处理完成后，将其删除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-21T02:46:11.450

我们可以将以下代码解决方案用于数字 Long：

```
Document doc = documentCursor.next();  

JsonWriterSettings relaxed = JsonWriterSettings.builder().outputMode(JsonMode.RELAXED).build();  

CustomeObject obj = gson.fromJson(doc.toJson(relaxed), CustomeObject.class); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-27T11:09:20.637

如果您需要它们作为字符串，最好的解决方案是在进行转换之前强制用单引号引用属性。

做这样的改变：

```
String readerAsString = convertReaderToString(reader);
readerAsString = readerAsString.toString().replace("=", "='");
readerAsString = readerAsString.toString().replace(",", "',");
readerAsString = readerAsString.toString().replace("}]", "'}]"); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-24T01:49:14.137

我没有找到解决以 0 结尾的 gson 格式化数字到科学记数法的问题。相反，我使用一种变通方法将此科学记数法转换为我用逗号格式化的双精度记数法。“值”是 json 字符串。

```
 private String formatNumber(String value) { 
    double dValue = Double.parseDouble(value);
    String pattern = "#,###";
    DecimalFormat formatter = new DecimalFormat(pattern);
    String newNumber = formatter.format(dValue);

            return newNumber;
} 
```

这并不能回答所提出的问题，而是解决问题以显示系统要求的数字的附加步骤。

# c++ - C++ 异常处理 - 具体示例

> ID：11586302
> 
> 赞同：0
> 
> 时间：2012-07-20T20:08:34.057
> 
> 标签：c++, exception, exception-handling

我有这个程序（部分程序未发布）：

```
//Includes and functions
int main(int argc, char *argv[])
{
    ifstream loc("achievements.loc", ios::binary);

    getline(loc, header, static_cast<char>(1));

    loc.seekg(15, ios::cur);

    loc.read(reinterpret_cast<char*>(&subdirs), sizeof(subdirs));

    for( int i = 0; i < nstrings; i++ )
    {
        loc.read(reinterpret_cast<char*>(&strid), sizeof(strid));

        loc.read(reinterpret_cast<char*>(&stroffset), sizeof(stroffset));

        curoffset = loc.tellg();
        loc.seekg(strcodesbeg+16+stroffset);

        getline(loc, codestring, '\0');

        loc.seekg(curoffset);

    }

} 
```

如果出现以下情况，我想终止程序： - 文件未打开；- getline 获取的头部字符串不等于"String"；- 任何读取功能失败；- 任何一个 seekg 失败；- strid 与 1234 不匹配。

如何使用 C++ 异常来做到这一点？我应该使用单个`try{}catch(...){}`块来创建函数，例如读取数据并`EOF_REACHED`在失败时发送，还是 a `try{}catch(var e){}catch(var2 e){}`、 a`class`或任何其他方式？

我理解简单函数中异常的概念，但是当有更大的程序时它会变得复杂。

我也没有发现任何在 main 函数中显式使用 try catch 块的 c++ 源代码，但可以处理异常。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:15:56.870

执行此操作的最详细的方法是对特定异常进行子类化，该异常将为您提供有关所发生情况的一些上下文，例如：

```
class FileNotOpenedException : public std::runtime_error {};

int main(int argc, char *argv[])
{
   try
   {
      ifstream loc("achievements.loc", ios::binary);

      if(!loc.is_open())
         throw FileNotOpenedException;

      // ...
   }
   catch(const FileNotOpenedException& e)
   {
      // ...
   }
} 
```

但是请注意，对预期的错误条件使用异常不一定是好的做法。异常应该仅用于真正的“异常”条件，即在您的程序中完全出乎意料的情况，您无法在特定范围内恢复。上面没有打开的文件就是一个不好的例子。然而，其中一个`read()`或`seekg()`功能失败可能更合适。

也就是说，可以按照您的要求进行操作，以上是一种方法示例。

# button - 任何颜色的渐变按钮的通用 CSS 样式

> ID：11586309
> 
> 赞同：2
> 
> 时间：2012-07-20T20:08:58.723
> 
> 标签：button, css

我希望能够在网页中动态创建任何颜色的漂亮按钮，而无需提前为每种颜色定义单独的 CSS 类。

使用带有 alpha 通道的 CSS3 渐变似乎是最好的方法，低不透明度渐变覆盖在纯色背景色之上。

但是，我对 CSS 的了解还不够，甚至无法判断这是否可能，更不用说实际实现它了。

我在网上找到了一些看起来很有帮助的资源：

*   [CSS3 渐变按钮指南](http://www.red-team-design.com/cross-browser-css-gradient-buttons)
*   [透明度和 CSS3 渐变](https://stackoverflow.com/questions/2293910/css3-transparency-gradient)

有更多 CSS 经验的人可以告诉我这是否可能，并可能将我指向其他资源以使其更容易实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:50:11.403

使用[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)之类的东西，这很容易合法地做到。像这样创建一个 mixin（健壮的版本）：

```
.auto-gradient(@color) {

    /* Use any of the built in functions like saturate() or spin() */
    @topcolor: lighten(@color, 20);
    @bottomcolor: darken(@color, 20);

    background: @color;
    background: -webkit-gradient(linear, 0 0, 0 bottom, from(@topcolor), to(@bottomcolor));
    background: -webkit-linear-gradient(@topcolor, @bottomcolor);
    background: -moz-linear-gradient(@topcolor, @bottomcolor);
    background: -ms-linear-gradient(@topcolor, @bottomcolor);
    background: -o-linear-gradient(@topcolor, @bottomcolor);
    background: linear-gradient(@topcolor, @bottomcolor);

        /* If using PIE.htc for IE */
    -pie-background: linear-gradient(@topcolor, @bottomcolor);
    behavior: url(pie.htc);
} 
```

用法：

```
.my-button {
    .auto-gradient(darkviolet);
} 
```

这将编译为有效的 CSS(3)，它应该是这样的：

```
.my-button {
  background:darkviolet;
  background:-webkit-gradient(linear,0 0,0 bottom,from(#c43aff),to(#4c006d));
  background:-webkit-linear-gradient(#c43aff,#4c006d);
  background:-moz-linear-gradient(#c43aff,#4c006d);
  background:-ms-linear-gradient(#c43aff,#4c006d);
  background:-o-linear-gradient(#c43aff,#4c006d);
  background:linear-gradient(#c43aff,#4c006d);
} 
```

注意：我自己使用[lessphp](http://leafo.net/lessphp)，我现在使用的版本似乎会阻塞命名颜色，比如`DarkViolet`传递给变亮/变暗，除非它们是小写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:31:50.710

MrOBrian 对[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)的建议让这一切变得轻而易举。[这是我最终采用的解决方案，它是一种相对简单的 CSS 样式，由前面提到的 Gradient Generator 和Cross-Browser CSS Gradient Button Guide](http://www.red-team-design.com/cross-browser-css-gradient-buttons)拼凑而成。

以下代码在应用到指定了 background-color CSS 属性的元素时添加了漂亮、流畅的按钮外观。这将允许我为所有按钮使用通用样式，使用 background-color 属性指定它们的颜色。

**[JSFiddle 演示](http://jsfiddle.net/azSpD/1)**

**谢谢大家的意见和建议！**

# powershell - 在 powershell 中删除文件时遇到问题

> ID：11586310
> 
> 赞同：1
> 
> 时间：2012-07-20T20:09:04.613
> 
> 标签：powershell

在检查了其中的某些内容后，我正在尝试删除文件。我正在将整个路径捕获到一个变量中并将其传递给`Remove-Item`命令，但我遇到了以下错误：

```
Remove-Item : An object at the specified path E:\Import\IRIS_Import\working\RP
LS_BAI_20120719092600450-20120719093206.csv    does not exist.

At E:\Import\IRIS_Import\FIX_IRIS_49_FILES_kr.ps1:53 char:13
+  Remove-Item <<<<  $file
    + CategoryInfo          : InvalidArgument: (:) [Remove-Item], PSArgumentEx 
   ception
    + FullyQualifiedErrorId : Argument,Microsoft.PowerShell.Commands.RemoveIte 
   mCommand 
```

不知道为什么 Powershell 抱怨文件不存在，即使我可以实际看到文件。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-29T12:43:26.390

当我运行 Azure powershell webjob 时，我遇到了同样的问题。除了justinf在该线程中的答案之外，我还遵循了[另一个线程](https://stackoverflow.com/a/25607109/5435132)`remove-item`中的答案，并修改了我的命令，如下所示。

```
remove-item filesystem::\\uncpath\folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:10:19.763

您的问题是该文件的文件名中有一个 - 并且powershell看起来并不像这样。

这段代码对我有用。如果它对您不起作用，请发布更多代码，我会看看。

```
$test = "c:\test\LS_BAI_20120719092600450-20120719093206.csv"

Remove-Item -LiteralPath $test 
```

# html - 宽度小于 1% 的 HTML 表格单元格

> ID：11586314
> 
> 赞同：2
> 
> 时间：2012-07-20T20:09:20.503
> 
> 标签：html, xhtml, html-table, html-email

想知道是否有可能以小于 1% 的百分比形式指定表格单元格的宽度。在 XHTML 1.0 中严格，没有使用 CSS。

```
<table border="0" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td width="70%">..</td>
<td width="0.5%"></td>
<td width="0.5%"></td>
<td width="29%">..</td>
</tr>
</table> 
```

这可能吗？它有效吗？它可以跨平台工作吗？有人知道方法吗？当我尝试使用上面的代码时，它似乎可以解释`5%`而不是半个百分点。

该模板将用于电子邮件客户端，而不是 Web 浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:14:56.597

您可以尝试将中间两个设为 0.5%，将单个 TD 设为 1%。然后在 100% 的位置放一张桌子，并在 50% 的位置放两个 TD。

```
<table border="0" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td width="70%">..</td>
<td width="1%">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr valign="middle">
<td width="50%"></td>
<td width="50%"></td>
</tr>
</table>
</td>
<td width="29%">..</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:21:19.733

使用 CSS .....试试这个！

```
<table border="0" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td style="width:70%">..</td>
<td style="width:0.5%"></td>
<td style="width:0.5%"></td>
<td style="width:29%">..</td>
</tr>
</table> 
```

# javascript - 使用 WPF 处理 WebBrowser 控件中托管的 JavaScript 事件

> ID：11586316
> 
> 赞同：0
> 
> 时间：2012-07-20T20:09:37.270
> 
> 标签：javascript, wpf

我在 WPF 页面上托管了一个 WebBrowser 控件。我想知道 JavaScript 函数是否有任何方法可以调用 WPF 程序中的事件。

我在 WebBrowser 控件的网页上有一个按钮：

```
<button style="height:100;width:100" id="initButton"  onclick="alert('hello');" /> 
```

在 WPF 代码中，我尝试以这种方式在按钮上挂钩事件：

```
 mshtml.HTMLButtonElementEvents_Event iEvent;
        iEvent = (mshtml.HTMLButtonElementEvents_Event)ele;
        iEvent.onclick += new HTMLButtonElementEvents_onclickEventHandler(ClickEventHandler);
        ...

    private bool ClickEventHandler()
    {
        MessageBox.Show("WPF Event Handler");
        return true;
    } 
```

然后从我的javascript函数中调用onclick，如下所示：

```
function SomeEvent(sender, e) {
    alert('JS event handler');
    document.getElementById("initButton").onclick();
 } 
```

当我按下按钮时会调用 WPF 代码，但从 SomeEvent 调用 onclick 时不会调用 WPF 代码。

有没有更简单的方法来做到这一点？有没有更好的方法从 JS 调用 onclick 事件，以便调用附加的 WPF 附加事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:20:12.487

是的你可以。

该`WebBrowser`控件有一个`ObjectForScripting`属性：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.objectforscripting.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.objectforscripting.aspx)

javascript 可以调用该对象上的方法，该对象可以调用 wpf 页面上的方法来触发事件等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-23T19:19:01.977

ObjectForScripting*就是*答案。为方便起见，这里是一个 Winforms 示例的链接（我也在使用 WPF，但 WPF 页面上没有示例）：

[https://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting(v=vs.110).aspx)

对于它的价值，将我的主窗口设置为 ObjectForScripting 对我来说不起作用。我不认为您可以使用任何类型的 FrameworkElement 对象作为您的 ObjectForScripting。

# entity-framework - Entity Framework 4.3.1 migrate.exe 使用 /ConnectionString 引发错误

> ID：11586325
> 
> 赞同：2
> 
> 时间：2012-07-20T20:10:38.043
> 
> 标签：entity-framework, entity-framework-migrations

我有两个项目需要在构建脚本期间使用 EF 4.3.1 migrate.exe 工具。指向转换后的 web.config 会很痛苦，它部署在与我的构建服务器不同的服务器上，所以我想将连接字符串作为标志传递。

我已经尝试了我能想到的所有变体（不同的计算机、SQL Server 2008、只是一个命令行而不是 .bat、以管理员身份运行等），但我总是收到错误：错误：已抛出异常通过调用的目标。

这是我在本地计算机上尝试过的 .bat 文件示例：

```
@rem run_db_migrations.cmd
SET StartUpDirectory=%CD%\MyProject.MVC\bin 
SET ConnectionString=Data Source=.\SQLEXPRESS;Initial Catalog=MyProject;Integrated Security=True
SET ConnectionStringProvider=System.Data.SqlClient
SET MigrateExe=.\packages\EntityFramework.4.3.1\tools\migrate.exe

%MigrateExe% MyProject.MVC.dll /StartUpDirectory:"%StartUpDirectory%" /ConnectionString:"%ConnectionString%" /connectionProviderName:%ConnectionStringProvider%
pause 
```

我看过其他类似的帖子，他们说这很有效，但奇怪的是他们的标志略有不同，所以我想知道是否有什么变化或者他们是否打错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:38:54.450

我在这里回答了一个类似的问题，关于如何通过参数覆盖连接字符串到 migrate.exe。但是，如果不指定 web/app.config 文件，我还没有让它工作。

[https://stackoverflow.com/a/14138797/134761](https://stackoverflow.com/a/14138797/134761)

# android - 共享 itemizedOverlay 下创建的项目

> ID：11586333
> 
> 赞同：0
> 
> 时间：2012-07-20T20:11:24.247
> 
> 标签：android, android-listview, android-fragments, android-mapview, itemizedoverlay

我在生成航点的 MapView 中使用 itemizedOverlay。我可以根据需要修改、添加、删除这些航点。这个 MapView 作为一个片段与一个 listView 片段共享屏幕。目前，片段的目的是显示地图中的航点，并允许它们被删除、移动或使用 listFragment 进行任何操作。所有这些现在都有效。

我遇到的问题是两个片段都拥有自己的航路点列表副本。IE 如果我使用地图视图删除一个航点，itemizedOverlay 类必须调用 ListFragment 函数从它自己的列表中删除一个航点。这变得丑陋，很快就会有自己的问题。最好在 listView、itemizedOverlay 或单独的类文件中有一个列表。

在其他应用程序（基于 C++ 或 Java）中，我通常创建另一个类作为单例，它保存将在地图和列表视图之间共享的信息。在使用 Android 时，这仍然是处理问题的最佳方法，还是有其他更好的内置选项可供使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:29:39.027

如果您持有对扩展`Application`项目类的类的引用，则可以使用列表的单个实例。有关此方法的更多信息，请参见[此处](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)。

# c - 删除缓冲区 C 前后的 20 个空格

> ID：11586337
> 
> 赞同：0
> 
> 时间：2012-07-20T20:11:38.140
> 
> 标签：c, buffer, cell, padding

如何从缓冲区的开头删除 20 个空格并在结尾删除 20 个空格？

我可以`for`从 20 和 -20 开始运行一个循环，但如何将每个字符一个字符一个字符地复制到另一个缓冲区，或者是否有一个简单的填充命令？

感谢到目前为止所有帮助现在有效，但只显示大约 20 个字符，即转储中的 MFI-40576-021 部分，它现在确实跳过了开始时的 20 个废话字节。

```
ReadFile(h,buffer,0x224,&read,NULL);
buffer[read] = '\0'; 
char newbuff[1000];
memcpy(newbuff,buffer+20,sizeof(buffer)-40); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:20:02.890

创建一个大小为 s-40 的新缓冲区，从源 +20 到大小为 s 的目标执行 memcpy。

```
int read; //assumed
char buffer[0x224];
ReadFile(h,buffer,0x224,&read,NULL);

if(read-40 <=0) return;
char *newvar = (char*)malloc(read - 40 + 1);  // Fails with void to char error 
strncpy(newvar, buffer+20, read - 40); 
newvar[read-40] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:25:41.827

使用 strncpy：

```
char *string = // however you obtain the string
char *new = malloc(strlen(string) - 40 + 1);
strncpy(new, string + 20, strlen(string) - 40); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:46:26.950

如果可以接受更改原始缓冲区，则可能最容易使用`memmove`：

```
char* string = /* insert code here to obtain the string */;
size_t len = strlen(string) - 40;  // Number of bytes to move
memmove(string, string + 20, len); // Move string down by 20 bytes
memset(&string[len], 0, 40);       // Clear out the remaining buffer 
```

如果缓冲区中的数据不是字符串，则此通用过程也将起作用。您只需将`strlen`调用替换为获取原始缓冲区长度所需的任何代码。

# c - gcc 报告“将永远不会被执行”关于该行：while(fgets(line, MAX_LINE, stdin) != NULL)

> ID：11586339
> 
> 赞同：0
> 
> 时间：2012-07-20T20:11:47.907
> 
> 标签：c, cygwin, warnings, gcc3, unreachable-code

我正在寻找解释为什么要给我`gcc`这个警告。

我正在使用带有标志的`gcc-3`on进行编译，gcc 对我说这个警告：`cygwin``-Wunreachable-code`

> main.c:223：警告：永远不会被执行

就是这一行：`while(fgets(line, MAX_LINE, stdin) != NULL) {`

此代码位于根据命令行参数（由 解析）动态设置的`if(exp) { }`块内，请查看代码部分：`exp``getopt()`

```
 if(mystruct.hastab) { 
```

默认值为`0`. 但是`1`如果将`-t`标志传递给应用程序，它就变成了，如下所示：

```
struct mystruct_t {
   //... 
   int hastab;
} mystruct;

    int main(int argc, char *argv[])
    {

      int opt;
        memset(&mystruct, 0, sizeof(mystruct));
         while((opt = getopt(argc, argv, optString)) != -1) {
            switch(opt) {
              case 't':
               mystruct.hastab = 1;
               break;
              //....
            }
        }
         proc();
        return 0;
    }

    void 
    proc(void)
    {
      char *buf, *tmpbuf, line[MAX_LINE + 1], *p, *fullfilename;

      if(mystruct.hastab) {

        while(fgets(line, MAX_LINE, stdin) != NULL) {
           //...
        }
      } else {
       //...
      }
    } 
```

因此，执行代码是有原因的。碰巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:16:16.063

听起来 gcc 确信`hastab`永远不会设置，或者它只在它警告的代码之后设置。看起来 gcc 确实是错误的，但是由于您只给了我们片段，因此很难确定。我认为除非我们看到可以自己编译的完整程序，否则没有人可以进一步帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:57:40.780

这是另一种可能性：问题出在宏上。这是一个演示您的错误的简单示例：

```
#include <string.h>
int s;
int main(int argc, char *argv[]) {
  memset(&s, 0, sizeof(s));
} 
```

当我编译这个时，我得到：

```
$ gcc -Wunreachable-code tmp.c
tmp.c: In function ‘main’:
tmp.c:4: warning: will never be executed 
```

这个错误并不是特别有启发性。但是，如果您运行预处理器，请查看`memset`扩展为：

```
$ gcc -E tmp.c

...
int s;
int main(int argc, char *argv[]) {
  ((__builtin_object_size (&s, 0) != (size_t) -1) ? __builtin___memset_chk (&s, 0, sizeof(s), __builtin_object_size (&s, 0)) : __inline_memset_chk (&s, 0, sizeof(s)));
} 
```

我怀疑由于 的大小恒定`s`，只有一个分支`?:`被执行，这就是 gcc 所抱怨的。在您的情况下，这可能`fgets`是一个宏。运行`gcc -E`，在输出中找到你的问题行，看看它是否有问题（我的不是，但我没有运行 cygwin）。

故事的寓意：预处理器和宏很烂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:45:23.307

如果我不得不猜测，我会说 gcc 正在考虑有 2 种情况，您可以在`proc()`没有设置`mystruct.hastab`为`0`.

第一种情况是如果这`false`在第一次运行时评估为，因为您将退出循环而不执行您的`switch`语句：

`while((opt = getopt(argc, argv, optString)) != -1) {`

第二种情况是 if `opt`is never `'t'`：

```
switch(opt) {
case 't':
    mystruct.hastab = 1; 
```

因此，您将退出循环，而无需设置`mystruct.hastab`为非零值。

# c - 为什么#pragma 不适用于ideone？

> ID：11586340
> 
> 赞同：1
> 
> 时间：2012-07-20T20:11:58.427
> 
> 标签：c

考虑以下程序：

```
#pragma startup foo1
#pragma exit foo2

void foo1()
{
    printf("Called before main\n");
}

void foo2()
{
    printf("Called after main\n");
}

int main()
{
    printf("main called\n");
    return 0;
} 
```

我得到的输出为：http: [//ideone.com/ooMFI](http://ideone.com/ooMFI)

```
main called 
```

**为什么`pragma`这里不工作？**
**为什么不调用 foo1() & foo2()？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T20:22:34.593

因为这些 pragma 都不被[GCC](http://gcc.gnu.org/onlinedocs/gcc/Pragmas.html)识别。通常，如果您尝试编写可移植代码，请远离编译指示，因为它们在每个编译器甚至同一编译器系列中的每个平台上都不同。

# ruby-on-rails - 测试失败：ActionView::Template::Error: undefined method `title' for nil:NilClass

> ID：11586348
> 
> 赞同：1
> 
> 时间：2012-07-20T20:12:13.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是在我的 _line_items.text.erb 文件中：

```
<%= sprintf("%2d x %s", line_item.quantity,
              truncate(line_item.product.title, length: 50)) %> 
```

订单.yml

```
one:
  name: Dave Thomas
  address: MyText
  email: dave@example.org 
  pay_type: Check 
```

line_items.yml

```
one:
  product: ruby
  cart_id: 1
  order: one

two:
  product_id: 1
  cart_id: 1
  order: one 
```

产品.yml

```
ruby:
  title: Programming Ruby 1.9 
  description: 
    Ruby is the fastest growing and most exciting dynamic language out there. 
    If you need to get working programsdelivered fast, you should add Ruby to your toolbox.
  price: 49.50 
  image_url: ruby.png 
```

这一切似乎都是正确的。

下面是实际测试：

```
class OrderNotifierTest < ActionMailer::TestCase
  test "received" do
    mail = OrderNotifier.received(orders(:one))
    assert_equal "Pragmatic Store Order Confirmation", mail.subject
    assert_equal ["dave@example.org"], mail.to
    assert_equal ["depot@example.com"], mail.from
    assert_match  /1 x Programming Ruby 1.9/, mail.body.encoded
  end 
```

关于在哪里寻找`ActionView::Template::Error: undefined method 'title' for nil:NilClass`错误的任何想法？

更新：

```
class LineItem < ActiveRecord::Base
  attr_accessible :cart_id, :product_id, :quantity, :order_id, :product, :cart, :price
  belongs_to :order
  belongs_to :cart
  belongs_to :product

  def total_price 
    self.price * self.quantity
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:41:17.850

这正是错误所说的，您试图`title`在 type 的对象上调用未定义的方法`NilClass`。如果您查看您提供的代码行，您应该能够看到错误所在：

```
<%= sprintf("%2d x %s", line_item.quantity,
          truncate(line_item.product.title, length: 50)) %> 
```

读取的部分`line_item.product.title`是问题所在。该`product`项目必须为零。我建议将其更改为`line_item.product.try(:title)`，这将利用[Rails 的 try 助手](http://api.rubyonrails.org/classes/Object.html#method-i-try)，并防止在事件`product`为 nil 时抛出 nil 错误。

看起来您的固定装置没有正确编写。 `line_item`# 2 是有问题的...你需要将 line_item #2 更改为 product: ruby​​ 而不是 product_id: 1。这应该可以解决它。如夹具文档中所述（见下文）。

看起来您还需要将固定装置定义为在您的测试中可以访问，如下所示：

```
class OrderNotifierTest < ActionMailer::TestCase
  fixtures :orders, :line_items, :products
  ... 
```

有关更多信息，请参阅[rails 夹具文档](http://ar.rubyonrails.org/classes/Fixtures.html)。（特别是标题为“使用夹具”的部分。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-14T21:29:35.560

我有同样的错误，我通过清除数据库解决了它。

在添加“Order”表（或单独的“PayType”表而不是“Order”表中的“pay_type”字段）后，您可能已经在数据库中拥有不再相关的数据。您需要清空购物车或清除数据库。

You can also solve this problem in another way, if you don't want to clear the database.

Add `if line_item.product`

```
<%= sprintf("%2d x %s", line_item.quantity,
      truncate(line_item.product.title, length: 50) if line_item.product) %> 
```

# shell - 在 Shell 脚本中添加选项卡

> ID：11586350
> 
> 赞同：3
> 
> 时间：2012-07-20T20:12:23.903
> 
> 标签：shell, scripting, applescript, vhosts, hosts

所以我有一个非常简单的 shell 脚本，它在一个人的计算机的 hosts 文件中输入一个 IP 地址和一个域名。仅用于“开发目的！” 它工作正常，它只是像这样输入IP地址和域名

192.168.53.215dev.env.os 192.168.53.215dev.source.os

我希望它像这样输入它：

192.168.53.215 dev.env.os 192.168.53.215 dev.source.os

所以基本上我希望它在IP地址和域名之间添加空格，不幸的是我无法弄清楚。任何帮助将不胜感激，尽管这是一个简单的脚本，不应该与过于复杂的脚本混在一起。请保持简单并准确解释您在做什么我想学习它没有为我完成谢谢！

这是代码：

```
do shell script "/usr/bin/printf \"\\n# Add #####'s ip for Sourcebox\\n192.168.53.215\\dev.env.os\\n192.168.53.215\\dev.source.os\\n\" >> /etc/hosts; /usr/bin/dscacheutil -flushcache" with administrator privileges 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T20:14:46.517

在 bash 脚本中使用`-e`带有 echo 的标志将允许您输出选项卡。

```
echo -e "this\thas\ttabs" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T18:41:01.453

printf 可以如下所述用于获取制表符空间

```
printf "\t" 
```

[![在此处输入图像描述](../Images/830eb65069253c8a7e72b05566aad8d4.png)](https://i.stack.imgur.com/WmBcV.png)

# c++ - 架构 x86_64 的未定义符号：

> ID：11586353
> 
> 赞同：0
> 
> 时间：2012-07-20T20:12:43.373
> 
> 标签：c++, xcode4, linker-errors

界面：

```
class rmKeyControl {
    static map<char, function<char(char)>> sm_function_list;
public:
    static bool addKeyAction(char, function<char(char)>);
}; 
```

执行：

```
bool rmKeyControl::addKeyAction(char key, function<char(char)> func) {
    if (!sm_function_list.count(key)) {
        sm_function_list.insert(pair<char, function<char(char)>>(key, func));
        return true;
    } return false;
} 
```

完整的错误信息是：

> > > 体系结构 x86_64 的未定义符号：“control::rmKeyControl::sm_function_list”，引用自：rm_KeyControl.o ld 中的 control::rmKeyControl::addKeyAction(char, std::__1::function)：未找到符号架构 x86_64 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这似乎是 Xcode 4 的标准链接器错误，但它似乎由于各种原因而发生，并且从未详细说明。此错误似乎表明存在不适用于 x86_64 架构的二进制指令，但这在这种情况下没有意义。为什么我会收到此错误？

**编辑：**我忘了提到那`rmKeyControl`是在 namespace `control`。我`using namespace control;`在执行中，虽然你看不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:16:07.187

静态成员只是声明。在实现/源文件中定义它 -

```
// include interface header and then do -
map<char, function<char(char)>> rmKeyControl::sm_function_list; 
```

# linux - Amazon Web 服务中的“附加卷”是什么？

> ID：11586354
> 
> 赞同：0
> 
> 时间：2012-07-20T20:12:43.700
> 
> 标签：linux, unix, amazon-web-services, amazon-ebs

是在 Amazon Web Services 中使用的术语，`Attach volume`并且`Deattach volume`在参考 Amazon Elastic Block Storage 时使用；`Mount`与 Unix/Linux和设备完全相同`Unmount`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:16:47.637

附加卷意味着使其在物理上可用作操作系统的设备（作为块设备）。要用作文件系统，它必须被挂载。请注意，未格式化原始 EBS 设备。

这是安装 EBS 卷的分步指南

全新的 EBS 卷：

[http://support.rightscale.com/06-FAQs/FAQ_0012_-_How_do_I_partition,_format_and_mount_an_EBS_volume%3F](http://support.rightscale.com/06-FAQs/FAQ_0012_-_How_do_I_partition,_format_and_mount_an_EBS_volume%3F)

预先存在的 EBS 卷：

[http://support.rightscale.com/12-Guides/Dashboard_Users_Guide/Clouds/AWS_Region/EBS_Volumes/Actions/Attach_an_EBS_Volume_to_an_instance](http://support.rightscale.com/12-Guides/Dashboard_Users_Guide/Clouds/AWS_Region/EBS_Volumes/Actions/Attach_an_EBS_Volume_to_an_instance)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:37:39.130

附加卷和分离卷与打开您的计算机并附加或分离新磁盘相同。运行附加命令后，您仍然需要在计算机上安装卷、格式化等...与连接新驱动器后的过程相同。

# objective-c - 删除视图控制器objective-c

> ID：11586356
> 
> 赞同：0
> 
> 时间：2012-07-20T20:12:50.517
> 
> 标签：objective-c, viewcontroller

我正在制作游戏，在玩家获胜后，我将另一个视图控制器设置为根视图控制器。

```
finishViewController*fvc=[[finishViewController alloc] initFor:0];
        [UIApplication sharedApplication].delegate.window.rootViewController=fvc; 
```

但是`NSTimer`在那个视图控制器上制作的东西一直在工作，当我再次运行那个视图控制器时，它工作起来很奇怪而且有问题。当我将另一个视图控制器设置为根视图控制器时，有什么方法可以完全释放该视图控制器？抱歉，这可能是一个简单的问题，对 Objective-c 来说有点新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:20:43.747

这取决于您想要什么，如果您不再使用该视图控制器，则释放它是安全的，即使您释放了 NSTimer 将继续运行的控制器，除非您向它发送 [myNSTimer invalidate] 消息然后释放它使用 [myNSTimer release]，（请注意，如果您的计时器被保留，您只需要释放）......在您的 ViewController 的 dealloc 方法中。

如果您使用 ARC，您只需要：

```
- (void)dealloc {
   [myNSTimer invalidate];
} 
```

同样，这只是在您不再使用该 ViewController 并希望释放它的情况下。如果您不想释放它，您可以在设置新的 rootViewController 之前简单地执行此操作（我认为您不应该这样做，因为使用导航控制器或模式视图会更好）：

```
[myNSTimer invalidate]; 
```

这将停止 NSTimer。

# javascript - 在第三页加载时显示隐藏的 div

> ID：11586360
> 
> 赞同：0
> 
> 时间：2012-07-20T20:13:41.740
> 
> 标签：javascript, cookies

我有一个功能，可以在页面加载时向访问者显示隐藏的 div 特价商品，然后设置一个 cookie，以便它仅在用户第一次加载页面时显示。我希望能够在显示 div 之前设置所需的访问次数，所以我只能在第三页加载时显示隐藏的 div。但我一直无法弄清楚如何做到这一点。谁能指出我正确的方向？

```
function CreatePopup(url, height, duration, description, lifetime) {
// Exit if the current browser has already received the popup, or 
// the browser is not supported (IE6).
if (HasAlreadyReceivedPopup(description) || IsUnsupportedUserAgent())
    return;

$.get(url, function(data) { 
    /*var popup = $("<div>" + data + "</div>")
        .attr({ "id": "sliding_popup" })
        .css({"bottom": -1 * height})
        .height(height)
        .hide()
        .appendTo("body");*/
        popup = $("<div>" + data + "</div>")
        .attr({ "id": "sliding_popup" })
        .hide()
        .appendTo("body");

    ShowPopup(description, lifetime, popup, duration); 
    });
}

function ShowPopup(description, lifetime, popup, duration) 
{ 

popup.show().animate( { top: 100 }, duration);
ReceivedPopup(description, lifetime);
}

function HasAlreadyReceivedPopup(description) { 
return document.cookie.indexOf(description) > -1; 
}

function ReceivedPopup(description, lifetime) { 
var date = new Date(); 
date.setDate(date.getDate() + lifetime); 
document.cookie = description + "=true;expires=" + date.toUTCString() + ";path=/";  
}

function IsUnsupportedUserAgent() { 
return (!window.XMLHttpRequest); 
}

function DestroyPopup(duration) {
$("#sliding_popup").animate({ top: $("#sliding_popup").height() * -1 }, duration,     function () { $("#sliding_popup").remove(); })
}

function SecondVisit(description)
{ 
 if (HasAlreadyReceivedPopup(description)) {
  return true;
 }
  else
 {
 return false;
 }

} 
```

该函数在包含中调用，如下所示：

该函数是这样调用的

```
$(document).ready(function () { 
// This check is used by the demo to allow you to remove the cookie. Do not use in production code.
if (HasAlreadyReceivedPopup("promo"))
$("#note").show().click(function () { 
document.cookie = name + "promo=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT"; location.reload(true); 
});

CreatePopup("page.html", 300, 1500, "promo", 5); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:21:11.940

创建一个与您的特价对话框相关的名称的 cookie，并存储用户的 IP 地址和他访问页面的次数。所以，如果用户没有你的“特殊”cookie，你创建它并将访问量分配给 1。在所有进一步的访问中，只需增加这个数量，一旦它是 3 或你需要的任何数量，就会显示你的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:21:18.853

只需将 cookie 设为计数器并计算您希望您的报价弹出的 n 次。

如果n次不匹配，则每次访问该页面都会增加访问者的计数器，直到第n次。您只需使用 if() 进行检查。如果已设置，则：将 cookie 重置为 0 次（如果您希望它在第 n 次再次显示）并显示弹出窗口。

使用 $.cookie，因为您使用的是 jquery，因为它可以更好地处理 javascript。

# combobox - 在 Outlook 2007 加载项中建议组合框

> ID：11586361
> 
> 赞同：0
> 
> 时间：2012-07-20T20:13:43.287
> 
> 标签：combobox, vsto, outlook-addin, outlook-2007

我在 Outlook 2007 命令栏中有一个 msoControlComboBox 项。我可以将项目添加到组合框下拉列表中，如果用户在文本框中键入与下拉列表中任何单词开头匹配的内容，则组合框会在文本框中建议单词的其余部分。

我想做比这更好的一点。

1.  我希望能够检测按键事件，并根据用户迄今为止输入的字符从下拉列表中添加/删除项目。

2.  我还希望能够以编程方式下拉列表（现在唯一的下拉列表出现供用户单击下拉箭头）。

有没有办法实现这两个目标（在 c# 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:25:41.927

没有开箱即用的微软控件可以做到这一点。

但是，您不是第一个想要这个的人，我个人使用了一个在[这里](http://code.google.com/p/email-autocomplete/)找到的控件，发现它是满足我需求的一个很好的起点。它旨在查找电子邮件地址，但它可以适应其他需求。它使用正则表达式搜索来查找匹配项

# c# - System.Drawing.Bitmap GetBounds GraphicsUnit.Inch

> ID：11586362
> 
> 赞同：4
> 
> 时间：2012-07-20T20:13:52.240
> 
> 标签：c#, image, bitmap, system.drawing, system.drawing.imaging

谁能告诉我如何以像素以外的任何单位从 GetBounds 取回矩形？以下代码 - 直接从 MSDN 文档中提取此函数 - 返回一个非常明显以像素而不是点（1/72 英寸）为单位的矩形。（除非图标的大小为 32/72"x32/72" 而不是我认为的 32x32 像素）。我最感兴趣的是使用以英寸为单位的矩形，但我会满足于简单地看到 GetBounds pageUnit 参数导致返回的矩形发生变化。

```
Bitmap bitmap1 = Bitmap.FromHicon(SystemIcons.Hand.Handle);
Graphics formGraphics = this.CreateGraphics();
GraphicsUnit units = GraphicsUnit.Point;

RectangleF bmpRectangleF = bitmap1.GetBounds(ref units);
Rectangle bmpRectangle = Rectangle.Round(bmpRectangleF);
formGraphics.DrawRectangle(Pens.Blue, bmpRectangle);
formGraphics.Dispose(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:42:24.533

这方面的信息有点稀疏，我能够找到这个[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/89597df9-3760-4f83-8436-fee26081690c)，表明由于位图已经创建，单位已经设置并且不可更改。由于`GraphicsUnit`是通过引用传递的，因此您在调用后查看它会发现它设置回`Pixel`from `Inch`。如果您确实想更改绘制矩形的大小，请将[`Graphics.PageUnit Property`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.pageunit)on设置`formGraphics`为`GraphicsUnit`您想要绘制矩形的位置。

**从上面的链接：**

> 在这个示例中，Image.GetBounds 方法的参数不会改变结果，因为 Bitmap 的边界已经确定。参数只确定单位长度处理的范围，逐英寸或逐点。但参数**不会影响**结果。

强调我的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-18T17:53:14.050

回答这个问题有点晚了，但我想我会这样做，因为当我试图回答“我的图片框可以容纳多少毫米？”这个问题时，我在谷歌中找到了它，它会为我节省很多时间而不是必须弄清楚如何去做！GetBounds 是无用的（如果你想要它以像素为单位......）但可以使用 Graphics.TransformPoints 方法找到绘图单位和显示像素之间的关系：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Bitmap b;
        Graphics g;
        Size s = pictureBox1.Size;
        b = new Bitmap(s.Width, s.Height);
        g = Graphics.FromImage(b);
        PointF[] points = new PointF[2];
        g.PageUnit = GraphicsUnit.Millimeter;
        g.PageScale = 1.0f;
        g.ScaleTransform(1.0f, 1.0f);
        points[0] = new PointF(0, 0);
        points[1] = new PointF(1, 1);
        g.TransformPoints(CoordinateSpace.Device, CoordinateSpace.Page, points);
        MessageBox.Show(String.Format("1 page unit in {0} is {1} pixels",g.PageUnit.ToString(),points[1].X));
        points[0] = new PointF(0, 0);
        points[1] = new PointF(1, 1);
        g.TransformPoints(CoordinateSpace.Page, CoordinateSpace.World, points);
        MessageBox.Show(String.Format("1 page unit in {0} is {1} pixels",g.PageUnit.ToString(),points[1].X));
        g.ResetTransform();
        pictureBox1.Image = b;
        SolidBrush brush = new SolidBrush(Color.FromArgb(120, Color.Azure));
        Rectangle rectangle = new Rectangle(10, 10, 50, 50);
        // Fill in the rectangle with a semi-transparent color.
        g.FillRectangle(brush, rectangle);
        pictureBox1.Invalidate();

    } 
```

这将显示基本 mm 以显示像素（在我的情况下为 3.779527） - 世界坐标为每像素 1 mm，如果您应用 graphics.ScaleTransform，这将改变。

编辑：当然，如果您将位图分配给图片框图像属性（并保留 Graphics 对象以允许根据需要进行更改），这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-07-18T18:18:32.157

在 Form1 类中添加标签 添加字段 PointF[] 坐标；Form1.cs [设计] 在属性中查找照明螺栓双击 Paint 创建处理程序 Form1_Paint(object sender,PaintEventArgs) { e.Graphics.PageUnit = GraphicsUnit.Inch; if (cooridates != null) e.Graphics.TransformPoints(CoorinateSpace.World, CoorinateSpace.Device,cooridates); } 再次为 Form1.MouseMove 创建处理程序 Form1_MouseMove(object sender,MouseEventArgs e { cooridates[0].X = e.Location.X; cooridates[0].Y = e.Location.Y; this.Refresh(); label1.文本 = $"X = {cooridates[0].X} Y = { { cooridates[0].Y } "; }

```
 Form1_Load(object sender,MouseEventArgs)
                                                                                {
                                                                                    cooridates = new PointF[1] { new PointF(0f,0f) };
                                                                                         }

                                                                                             Move mouse to get cooridates in Inches 
```

# php - 无法修改标头信息 - 标头已在 oop php 中发送

> ID：11586364
> 
> 赞同：-5
> 
> 时间：2012-07-20T20:13:58.660
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我是面向对象的 php 新手。我有一些我无法解决的问题。我的问题是，当我想登录/注销时，会出现一些错误消息，如下所示:: [注意它在功能性 php 中运行良好，但问题出在 oop php 中]

错误 ：：

```
Warning: Cannot modify header information - headers already sent by (output
started at E:\XAMPP\xampp\htdocs\photo_gallery_new\Includes\database_object.php:6)
in E:\XAMPP\xampp\htdocs\photo_gallery_new\Includes\Functions.php on line 14 
```

我的代码::

索引.php

```
<?php require_once ("../../Includes/initiate.php"); ?> 
 <?php
if( !$session->is_logged_in() ) {
    redirect_to("login.php");
}
?> 
```

登录.php

```
<?php   
require_once ("../../Includes/initiate.php");

if( $session->is_logged_in() ) {
    redirect_to("index.php");
}   
// Remember to give your form's submit tag a name="submit" attribute! 
if( isset($_POST['submit']) ) {  // form has been submitted
    $username = trim($_POST['username']); $password = trim($_POST['password']);     
    // Check database to see if username/password exist     
    $found_user = USER::authenticate($username, $password);     
    if($found_user) {
        $session->login($found_user);
        redirect_to("index.php");
    }  else {
        // username/password combo was not found in the database
        $message = "Username/password combination incorrect.";
    }
}   
else {   // form has not been submitted
    $username = "";
    $password = "";
}
?>

<html> 
     <----  form design [ form action = 'login.php' ] --->
</html> 
```

启动.php

```
 <?php
      require_once ("session.php");
       require_once ("Config.php");
       require_once ("Functions.php");
      require_once ("Database.php");
     require_once ("database_object.php");  // this makes error
   require_once ("user.php");
  ?> 
```

函数.php

```
<?php       
function strip_zeros_from_date( $marked_string="") {  .....   } 

function redirect_to( $location = NULL) {   // check loged in/not
    if($location != NULL) {
        header("Location: {$location}");  
        exit;
    }
}

function output_message($message = "") { ....   } 

function __autoload($class_name) {  ......   }

function include_layout_template( $template = "" ) { ...  }
 ?> 
```

启动.php

```
 <?php
require_once ("database.php");  
class databaseObject {      
}   
$newClass = new databaseObject();   
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:18:04.650

`header`信息必须是第一件事修改。换句话说，在任何内容回显到客户端之前。

# android - 特定 Sprite 的 Motion Streak？

> ID：11586365
> 
> 赞同：0
> 
> 时间：2012-07-20T20:14:02.217
> 
> 标签：android, opengl-es-2.0, sprite, andengine, motion

AndEngine GLES2 有一个完整场景运动条纹/模糊的示例，效果很好，但我想将该运动模糊仅应用于特定的精灵。

有点像我不希望我的角色运动模糊，只是咒语（精灵）。

这就是我现在用来做运动模糊的方法，它只是 AndEngine 示例，但问题是它似乎拍摄了整个屏幕的快照，应用 aplha，然后将其与下一帧合并屏幕，我只想将这种“alpha”模糊效果应用于单个精灵。

```
@Override
public Engine onCreateEngine(EngineOptions pEngineOptions) {
    return new Engine(pEngineOptions) {
        private static final int RENDERTEXTURE_COUNT = 2;

        private boolean mRenderTextureInitialized;

        private final RenderTexture[] mRenderTextures = new RenderTexture[RENDERTEXTURE_COUNT];
        private final Sprite[] mRenderTextureSprites = new Sprite[RENDERTEXTURE_COUNT];

        private int mCurrentRenderTextureIndex = 0;

        @Override
        public void onDrawFrame(final GLState pGLState) throws InterruptedException {
            final boolean firstFrame = !this.mRenderTextureInitialized;

            if(firstFrame) {
                this.initRenderTextures(pGLState);
                this.mRenderTextureInitialized = true;
            }

            final int surfaceWidth = this.mCamera.getSurfaceWidth();
            final int surfaceHeight = this.mCamera.getSurfaceHeight();

            final int currentRenderTextureIndex = this.mCurrentRenderTextureIndex;
            final int otherRenderTextureIndex = (currentRenderTextureIndex + 1) % RENDERTEXTURE_COUNT;

            this.mRenderTextures[currentRenderTextureIndex].begin(pGLState, false, true);
            {
                /* Draw current frame. */
                super.onDrawFrame(pGLState);

                /* Draw previous frame with reduced alpha. */
                if(!firstFrame) {
                    if(Info.motionStreaking) {
                        this.mRenderTextureSprites[otherRenderTextureIndex].setAlpha(0.9f);
                        this.mRenderTextureSprites[otherRenderTextureIndex].onDraw(pGLState, this.mCamera);
                    }
                }
            }
            this.mRenderTextures[currentRenderTextureIndex].end(pGLState);

            /* Draw combined frame with full alpha. */
            {
                pGLState.pushProjectionGLMatrix();
                pGLState.orthoProjectionGLMatrixf(0, surfaceWidth, 0, surfaceHeight, -1, 1);
                {
                    this.mRenderTextureSprites[otherRenderTextureIndex].setAlpha(1);
                    this.mRenderTextureSprites[otherRenderTextureIndex].onDraw(pGLState, this.mCamera);
                }
                pGLState.popProjectionGLMatrix();
            }

            /* Flip RenderTextures. */
            this.mCurrentRenderTextureIndex = otherRenderTextureIndex;
        }

        private void initRenderTextures(final GLState pGLState) {
            final int surfaceWidth = this.mCamera.getSurfaceWidth();
            final int surfaceHeight = this.mCamera.getSurfaceHeight();

            final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
            for(int i = 0; i <= 1; i++) {
                this.mRenderTextures[i] = new RenderTexture(DodgingGame.this.getTextureManager(), surfaceWidth, surfaceHeight);
                this.mRenderTextures[i].init(pGLState);

                final ITextureRegion renderTextureATextureRegion = TextureRegionFactory.extractFromTexture(this.mRenderTextures[i]);
                this.mRenderTextureSprites[i] = new Sprite(0, 0, renderTextureATextureRegion, vertexBufferObjectManager);
            }
        }
    };
} 
```

如何将其更改为适用于特定精灵而不是整个可见屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T09:58:54.713

您可以使用粒子系统来创建运动模糊效果。

# c++ - STL 迭代器循环

> ID：11586366
> 
> 赞同：0
> 
> 时间：2012-07-20T20:14:07.273
> 
> 标签：c++, stl, vector, std

我写了这段代码：

```
#define VECTOR_LOOP_V(X) for (vector<typeof(X)>::iterator it = X.begin(); it != X.end(); it++) 
```

为了更快地为向量编写 for 循环，但由于某种原因它不起作用，当我尝试编译它时，它给了我非常非常长的错误消息。

```
 test.cpp: In function ‘int main(int, char**)’:
test.cpp:20:5: error: conversion from ‘std::vector<std::basic_string<char> >::iterator {aka __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >}’ to non-scalar type ‘std::v 
```

ETC..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:17:02.850

```
#define VECTOR_LOOP_V(X) \
     for (vector<typeof(X)>::iterator it = X.begin(); \
          it != X.end(); it++) 
```

你打算如何使用宏？看起来像是`X`容器，在这种情况下，第一部分`for`应该是这样的`typeof(X)::iterator`（甚至不知道这是否合法，因为`typeof`它不是标准的并且从未使用过）。

或者，您可以只使用 boost::foreach ，它提供了一个类似但更丰富的宏，其优点是它在许多方面*更安全*。例如，如果参数是按值返回的函数调用，您的宏将严重中断：

```
std::vector<int> f();
VECTOR_LOOP_V( f() ) {
   std::cout << *it << "\n";
} 
```

问题与几乎所有您多次评估参数的宏一样，并且在您的情况下`it`将是一个迭代器`std::vector<int>`，终止条件将尝试将它与来自不同的迭代器进行比较`std::vector<int>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:29:34.947

它不起作用，因为`typeof(X)`产生`std::vector`类型，因此宏扩展为：

```
for (vector<std::vector<...> >::iterator it = X.begin(); it != X.end(); it++) 
```

`X`此外，如果是常量，您的宏会失败，在这种情况下`const_iterator`应该使用。还有很多其他问题，但无论如何，你试图做的是这样的：

```
#define VECTOR_LOOP_V(X) \
    for (typeof(X.begin()) it = X.begin(), eit = X.end(); it != eit; ++it) 
```

..这是一些用法示例：

```
#include <vector>
#include <iostream>

#define VECTOR_LOOP_V(X) \
    for (typeof(X.begin()) it = X.begin(), eit = X.end(); it != eit; ++it)

int main()
{
    std::vector<int> v;
    v.push_back(1);
    v.push_back(2);
    v.push_back(3);
    v.push_back(4);
    v.push_back(5);
    VECTOR_LOOP_V(v) {
        std::cout << *it << std::endl;
    }
} 
```

但是请注意，这`typeof`不是标准的 C++（请参阅[此 Q/A](https://stackoverflow.com/questions/1986418/typeid-and-typeof-in-c)）。

总而言之，你最好使用[BOOST_FOREACH](http://www.boost.org/doc/libs/1_50_0/doc/html/foreach.html)（或者至少看看它是如何在那里实现的）或基于 C++11[范围的 for](http://en.cppreference.com/w/cpp/language/range-for)循环。

PS：不要使用 STL 的缩写，除非你真的是指[STL](http://en.wikipedia.org/wiki/Standard_Template_Library)而不是[C++ 标准库](http://en.wikipedia.org/wiki/C++_Standard_Library)（你可以将其称为 stdlib）。

# java - 如何比较字符串以获取丢失的单词？

> ID：11586369
> 
> 赞同：0
> 
> 时间：2012-07-20T20:14:23.130
> 
> 标签：java, string, jtable

我创建了一个表格和一些按钮来删除/添加行。问题是，当我添加新行时，我必须在字段名称中插入一个值，该值尚未出现在该表中。让我解释。

这是默认表：

![11](../Images/9aa05cc765b948339833510c7387e29e.png)

现在想象我删除了第 3 站：

![22](../Images/25040bd119881811e9494770af6f3d47.png)

如果我添加一个新站，我想添加一个新站名称站 3（列表中缺少），但我正在添加一个新站 5（显然因为我的代码不正确）。

![33](../Images/1a676438b65db113dd7cae5612d14393.png)

添加按钮操作事件的代码如下：

```
private void jButton10ActionPerformed(java.awt.event.ActionEvent evt) {                                          
    DefaultTableModel model = (DefaultTableModel)jTable1.getModel();
    String s2 = "";
    String s1 = "Station 1 Station 2 Station 3 Station 4 Station 5";
    int tb1rows = jTable1.getRowCount();
    if (tb1rows == 5) {
        // ERROR - MAXIMUM STATION NUMBER
    }
    else {
        for (int i=0; i<tb1rows;i++) {
            s2.concat(jTable1.getValueAt(i,1).toString());
            s2.concat(" ");
         }
        String[] s3=s2.split(" ");
        for (int i=0;i<s3.length;i++) {
            if (s1.contains(s3[i])) {
                System.err.println("contains");
                System.out.println(s3[i]);
            }
        }
        model.insertRow(jTable1.getRowCount(),new Object[] {jTable1.getRowCount() + 1,"Station " + (jTable1.getRowCount()+1),10,false,0,Color.BLACK});
    }
} 
```

我的逻辑有什么问题？有没有更好的方法来处理这个问题，以便我可以获得该列中缺少的“Station x”，以便我可以重新添加它？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:21:34.433

只要你有

```
"Station " + (jTable1.getRowCount()+1) 
```

新站将始终命名为“Station N + 1”。

假设您解决了在另一个答案描述的空间上拆分的问题，您的代码应该类似于

```
 for (int i=0;i<s3.length;i++) {
            if (s1.contains(s3[i])) {
                System.err.println("contains");
                System.out.println(s3[i]);
            }
            else {
 model.insertRow(jTable1.getRowCount(),new Object[] {jTable1.getRowCount() + 1,"Station " + (i + 1)      ,10,false,0,Color.BLACK});
}

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:21:44.307

由于“Station 1”中有一个空间，因此空间分割是不行的。而不是使用另一个分隔符，如“;”，最好使用`Set<String> values = new HashSet<String>()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:26:37.847

如果它已订购，您可以找到第一个间隙并插入那里。所以迭代行，如果`nextrow.numberInIt > thisrow+1`你插入`thisrow+1`

* * *

代码应该是这样的：

```
int nextNrToInsert;

for(int=0; i < tb1rows; i++){
    thisrowNr = jTable1.getValueAt(i,1).toString();
    NextrowNr = jTable1.getValueAt(i+1,1).toString();

    if(nextrowNr > thisrowNr+1){
      //found the gap
      nextNrToInsert = thisrowNr+1;
      break;
    }
}
//change this to use nextNrToInsert
model.insertRow(jTable1.getRowCount(),new Object[] {jTable1.getRowCount() + 1,"Station " + (jTable1.getRowCount()+1),10,false,0,Color.BLACK}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T20:26:50.950

而不是所有的字符串操作，你可以使用 set mainpulations：

```
HashSet<String> all = new HashSet<String>();
// then populate all with your 5 station strings (loop)
HashSet<String> have = new HashSet<String>();
// then populate all with the contents of your table (loop)
all.removeAll(have);
// all now contains the ones that weren't in the table. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:00:54.837

此代码无效：

```
 for (int i=0; i<tb1rows;i++) {
        s2.concat(jTable1.getValueAt(i,1).toString());
        s2.concat(" ");
     } 
```

在循环退出时，`s2`仍然是一个空字符串，所以`s3`也是一个空数组。

但是，无论如何，连接字符串然后拆分它们的方法是错误的。如果您只需要找到附加到“ `Station`”将产生唯一字符串的最小整数，最自然的方法是制作您自己的方法`TableModel`，为每行数据使用您自己的对象列表。在该数据中，您将保留整数本身，而不是整个字符串“Station *n* ”。那么在整数列表中找到一个洞将是一件小事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T20:24:20.843

这条线是问题

`model.insertRow(jTable1.getRowCount(),new Object[] {jTable1.getRowCount() + 1,"Station " + (jTable1.getRowCount()+1),10,false,0,Color.BLACK});`

您总是在行中添加`rowCount() + 1`. 因此，即使您删除了第 3 站，也有 4 行，并且您正在添加第 1 行。

# .htaccess - htaccess 防止主机重定向

> ID：11586371
> 
> 赞同：1
> 
> 时间：2012-07-20T20:14:37.740
> 
> 标签：.htaccess, redirect

我正在使用免费的主机服务器来托管我的网站，一切都很好，除了我的主机经常会重定向我的网站并且我无法访问我的网站，直到重定向被删除（通常在第一次重定向后大约 30 分钟） . 有什么方法可以阻止我的主机使用 htaccess 重定向我的网站，或者只是强制重定向回我的网站（尽管这可能会导致重定向循环）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:19:29.197

不，他们的重定向总是比任何 .htaccess 覆盖具有更高的优先级。

# mongodb - mongoDB：重命名集合中的列名

> ID：11586374
> 
> 赞同：13
> 
> 时间：2012-07-20T20:14:53.597
> 
> 标签：mongodb

我有一个看起来像的架构

```
name: 
value:
pattern:
XUknown: 
```

我在这个集合中有 200 万份文档。

**想要**
- 我想将列名重命名`XUknown`为`XString`，以便架构看起来像

```
name: 
value:
pattern:
XString: 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-20T20:17:34.573

您可以使用[$rename](https://docs.mongodb.com/manual/reference/operator/update/rename/)修饰符。

```
db.collection.update({}, {$rename: {'XUknown': 'XString'}}, false, true); 
```

您还可以刷新您对[update()](https://docs.mongodb.com/manual/reference/method/db.collection.update/)的知识。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-28T08:57:17.333

您可以通过指定适用于集合中所有文档的“Multi true”来重命名所有文档。

```
db.collection.update({}, {$rename: {'XUknown': 'XString'}}, {multi:true}); 
```

# jquery - 用于显示带有可自定义事件的工具提示的 jQuery 插件

> ID：11586383
> 
> 赞同：-1
> 
> 时间：2012-07-20T20:15:56.493
> 
> 标签：jquery, jquery-plugins

我正在寻找一些用于显示工具提示框的 jquery 插件。我正在寻找的主要功能是可自定义的事件处理程序，说明何时应显示/隐藏工具提示。

例如，我想显示一些 div 的工具提示

```
$('#div').tooltip({
   text      : 'Hello, I\'m div',
   showEvent : 'mouseenter',
   hideEvent : 'mouseleave'
}); 
```

..或者我想显示一些输入的工具提示

```
$('#input').tooltip({
   text      : 'Hello, I\'m div',
   showEvent : 'focus',
   hideEvent : 'blur'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:18:47.837

你所需要的只是这个很棒的插件：[qTip](http://craigsworks.com/projects/qtip/)

# python - PyGObject GTK+ 3 - 文档？

> ID：11586396
> 
> 赞同：24
> 
> 时间：2012-07-20T20:16:58.910
> 
> 标签：python, gtk, gtk3, pygobject, gobject

PyGObject 似乎没有真正的文档。[本教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)非常接近。我整个早上都在苦苦挣扎，只是想找到`Gtk.Window`构造函数接受的参数的描述。似乎我不能在 Python 中做太多反思，因为 PyGObject 中的所有内容都是动态生成的。

我只想知道我可以将哪些参数传递给这个构造函数！在 GTK+ 3 文档中似乎没有此对象的等效项，并且阅读源代码以找出绑定已被证明是一项极其艰巨的任务。有任何想法吗？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-21T05:37:27.267

我同意这是当前状态下 PyGObject 的一个巨大缺点。对于我们这些已经使用 GTK+ 一段时间的人来说，这没问题，但对于新用户来说，这可能会让人感到困惑。

人们正在开发一个系统来自动生成除 C 之外的其他语言的文档，称为[GObject Introspection Doctools](https://live.gnome.org/GObjectIntrospection/Doctools)。由于这还没有完全准备好，您最好使用[C API 文档](http://developer.gnome.org/gtk3/stable/)并了解它如何转换为 Python。这并不像听起来那么难。

请记住，Python 调用是动态包装到底层 C 库的。您需要做的就是了解一些东西*通常*是如何翻译成 Python 的，并了解 GTK+“属性”是如何工作的。它基本上是 C 中的命名约定，并且模式很容易学习。PyGObject [/Introspection Porting](https://live.gnome.org/PyGObject/IntrospectionPorting)页面是一个好的开始。

Python 中的构造函数通常包装在 C 中的`*_new()`函数中。PyGObject 还允许您将属于该小部件的*任何GTK+ 属性作为构造函数中的关键字参数传递。*因此，在 Python 中构建小部件时，您有很多选择。

你提到了`GtkWindow`. 如果您查看[GtkWindow Documentation](http://developer.gnome.org/gtk3/stable/GtkWindow.html)，该`gtk_window_new()`函数将窗口类型作为 C 中的参数。这将是 Python 中构造函数的位置参数。PyGObject “覆盖”构造函数，因此它`type`是可选的并且默认为顶级窗口。有一堆[GtkWindow 属性](http://developer.gnome.org/gtk3/stable/GtkWindow.html#GtkWindow.properties)也可以作为关键字参数传递给构造函数。

这里有 3 个`Gtk.Window`在 Python 中构造 a 的示例，它们在功能上是等效的：

```
# this is very close to how it's done in C using get_*/set_* accessors.
window = Gtk.Window(Gtk.WindowType.TOPLEVEL)
window.set_title("Hello")

# setting properties as keyword arguments to the constructor
window = Gtk.Window(type=Gtk.WindowType.TOPLEVEL, title="Hello")

# set_properties() can be used to set properties after construction
window = Gtk.Window()
window.set_properties(title="Hello") 
```

Python 交互式控制台是试验小部件和属性的好方法。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-03T16:11:07.107

文档位于： [https ://lazka.github.io/pgi-docs/Gtk-3.0/index.html](https://lazka.github.io/pgi-docs/Gtk-3.0/index.html)

Gtk.Window 参数（正是您所要求的）： [https ://lazka.github.io/pgi-docs/Gtk-3.0/classes/Window.html](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Window.html)

上面存在一些交互式控制台解决方案，但我更喜欢自动完成的解决方案： [如何将选项卡完成添加到 Python shell？](https://stackoverflow.com/questions/246725/how-do-i-add-tab-completion-to-the-python-shell)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-07T21:28:42.930

稍微扩展一下已接受的答案；[GObject Introspection Doctools](https://live.gnome.org/GObjectIntrospection/Doctools)页面有一节介绍如何创建自己的文档。

在 Ubuntu 12.04.2 LTS 上，您可以发出以下命令：

```
$> g-ir-doc-tool --language Python -o ./output_dir /usr/share/gir-1.0/Gtk-3.0.gir
$> yelp ./output_dir/index.page 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-05T02:32:17.047

您可以使用此检索对象的所有属性

```
dir(YouObjectInstance.props) 
```

YourObjectInstance 当然是您创建的任何实例。

简单的方法可能是打开一个终端：

```
you@yourcomputer ~/Desktop/python $ python
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from gi.repository import Gtk, GtkSource, GObject
>>> window_instance = Gtk.Window()
>>> dir(window_instance.props)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__iter__', '__len__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'accept_focus', 'app_paintable', 'application', 'border_width', 'can_default', 'can_focus', 'child', 'composite_child', 'decorated', 'default_height', 'default_width', 'deletable', 'destroy_with_parent', 'double_buffered', 'events', 'expand', 'focus_on_map', 'focus_visible', 'gravity', 'halign', 'has_default', 'has_focus', 'has_resize_grip', 'has_tooltip', 'has_toplevel_focus', 'height_request', 'hexpand', 'hexpand_set', 'icon', 'icon_name', 'is_active', 'is_focus', 'margin', 'margin_bottom', 'margin_left', 'margin_right', 'margin_top', 'mnemonics_visible', 'modal', 'name', 'no_show_all', 'opacity', 'parent', 'receives_default', 'resizable', 'resize_grip_visible', 'resize_mode', 'role', 'screen', 'sensitive', 'skip_pager_hint', 'skip_taskbar_hint', 'startup_id', 'style', 'title', 'tooltip_markup', 'tooltip_text', 'transient_for', 'type', 'type_hint', 'ubuntu_no_proxy', 'urgency_hint', 'valign', 'vexpand', 'vexpand_set', 'visible', 'width_request', 'window', 'window_position']
>>> 
```

现在您可以即时记录对象的属性。

如果你需要这些方法？

```
for names in dir(window_instance):
    attr = getattr(window_instance,names)
    if callable(attr):
        print names,':',attr.__doc__ 
```

如果你想要反射，你可以去这个链接：[反射 api](http://glowingpython.blogspot.com/2011/07/how-to-use-reflection.html) 这将为你节省大量时间。它也可以被修改以接受任何对象或被继承。

你也可以使用： **help(SomeClassModuleOrFunction)**

来自 help() 的打印文本可能会受到限制，但使用 instance.props 和循环遍历实例也可能有缺点，具体取决于代码的文档记录程度。

使用上述任何一种方法至少可以获取一些文档。当一个不符合您的需要时，请尝试另一个。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-24T07:49:04.633

使用[IPython](http://ipython.org/)

```
In [1]: from gi.repository import Gtk
In [2]: Gtk.Window()?
Type:       GObjectMeta
String Form:<class 'gi.overrides.Gtk.Window'>
File:       /usr/lib/python3/dist-packages/gi/overrides/Gtk.py
Docstring:  <no docstring>
Constructor information:
 Definition:Gtk.Window(self, type=<enum GTK_WINDOW_TOPLEVEL of type GtkWindowType>, **kwds) 
```

更多细节

```
In [3]: help(Gtk.Window()) 
```

# jquery - jQuery Autocomplete 在鼠标移出时失去选择

> ID：11586399
> 
> 赞同：1
> 
> 时间：2012-07-20T20:17:32.957
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete

当我通过键盘箭头选择一个项目时，输入字段中的选择会按预期更改。但是，如果我随后将鼠标移出该项目，则输入字段将恢复为用户键入的任何内容，从而丢失先前通过键盘所做的选择。

[jsfiddle 示例](http://jsfiddle.net/RjKN7)

该[文档](http://jqueryui.com/demos/autocomplete/#event-focus)声称我想要完成的实际上是默认行为，但它似乎不起作用。

另一个提到行为似乎已经改变的参考：http: [//forum.jquery.com/topic/autocomplete-s-menu-items-mouseover-behavior#14737000002991273](http://forum.jquery.com/topic/autocomplete-s-menu-items-mouseover-behavior#14737000002991273)

我目前正在使用 jquery-rails 2.0.2，它引入了 jQuery-1.7.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:30:07.410

当我在你的小提琴中注释掉 Javascript 的最后一行时，预期的行为又开始起作用了。

我不完全确定为什么，但看起来你两次调用自动完成脚本，也许他们以某种方式相互干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:35:55.140

“在焦点移动到一个项目（不是选择）之前，ui.item 指的是焦点项目。焦点的默认操作是将文本字段的值替换为焦点项目的值，但前提是触发了焦点事件通过键盘交互。取消此事件会阻止更新值，但不会阻止菜单项获得焦点。”

Text abode 是描述焦点事件的地方。
如果你看看它说`The default action of focus is to replace the text field's value with the value of the focused item, though only if the focus event was triggered by a keyboard interaction.`

因此，正如您所看到的，此[演示](http://jsfiddle.net/RjKN7/7/)显示选项获得焦点但值不会改变。

[参考](http://jqueryui.com/demos/autocomplete/#event-focus)

# f# - 仅在 F# Interactive 中声明变量需要 300 毫秒？

> ID：11586404
> 
> 赞同：4
> 
> 时间：2012-07-20T20:18:03.747
> 
> 标签：f#, timer, f#-interactive

我正在使用 F# Interactive Console 并比较一些数字操作的运行时间。在这段代码中，总运行时间似乎翻了一番，只是重复了一个变量的声明。

在 VS 2010 中，我这样做：

```
open System.Diagnostics
let mutable a=1 
```

然后我在下面选择它并使用 Alt+Enter 运行它

```
let stopWatch = Stopwatch.StartNew()
for i=1 to 200100100 do
    a <- a + 1
stopWatch.Stop()
printfn "stopWatch.Elapsed: %f" stopWatch.Elapsed.TotalMilliseconds 
```

它需要或多或少：320 ms

现在我选择它并按 Alt+Enter：

```
let mutable a=1
let stopWatch = Stopwatch.StartNew()
for i=1 to 200100100 do
    a <- a + 1
stopWatch.Stop()
printfn "stopWatch.Elapsed: %f" stopWatch.Elapsed.TotalMilliseconds 
```

几乎翻倍：620 毫秒

相同的块，但包括顶部的声明几乎需要两倍。因为我在 Stopwatch.StartNew() 之前声明了变量，所以不应该是一样的吗？这与交互式控制台有关吗？我使用#time 指令得到了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:30:44.600

我不相信任何答案都是正确的。我认为`a`在这两种情况下都是相同的。我的意思是动态地发出一个单独的类型来包装该可变值（当然是在堆上！）。它需要这样做，因为在这两种情况下，`a`它都是一个可以被后续交互访问的顶级绑定。

综上所述，我的理论是：在第一种情况下，FSI 发出的动态类型在交互结束时加载，以便输出其默认值。然而，在第二种情况下，类型包装`a`直到第一次被访问时才加载，在循环中，在`StopWatch`启动之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T21:18:45.363

Daniel 是对的 - 如果您在单独的 FSI 交互中定义一个变量，那么它的表示方式会有所不同。

要获得正确的比较，您需要在两种情况下都将变量声明为本地变量。最简单的方法是将代码嵌套在下面`do`（这会将下面的所有内容`do`转换为本地范围），然后立即评估整个`do`块。请参阅以下两个示例的结果：

```
// A version with variable declaration excluded
do
  let mutable a=1 
  let stopWatch = Stopwatch.StartNew() 
  for i=1 to 200100100 do 
    a <- a + 1 
  stopWatch.Stop() 
  printfn "stopWatch.Elapsed: %f" stopWatch.Elapsed.TotalMilliseconds 

// A version with variable declaration included
do
  let stopWatch = Stopwatch.StartNew() 
  let mutable a=1 
  for i=1 to 200100100 do 
    a <- a + 1 
  stopWatch.Stop() 
  printfn "stopWatch.Elapsed: %f" stopWatch.Elapsed.TotalMilliseconds 
```

当我运行它们时，我得到的差异是不可测量的。

# java - scala.io.Source 找不到现有文件

> ID：11586406
> 
> 赞同：2
> 
> 时间：2012-07-20T20:18:05.713
> 
> 标签：java, scala, io, playframework, filenotfoundexception

这段scala代码：

```
val file = new File(".")
assert(file.exists == true)
assert(file.getAbsolutePath.length > 0)
println(scala.io.Source.fromFile(file).getLines) 
```

抛出：

```
FileNotFoundException: . (No such file or directory) (FileInputStream.java:120) 
```

`scala.io.Source.fromFile`打电话的时候。这怎么可能，我该如何解决？

PS：这是在 playframework 应用程序测试的上下文中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:23:29.757

也许是因为：

```
assert(file.isDirectory) 
```

也通过？您不能真正打开目录并阅读它，您只能打开文件。顺便说一句，在我的机器上，错误更具描述性：

```
java.io.FileNotFoundException: . (Is a directory) 
```

测试：

```
$ java -version
java version "1.6.0_26"
$ scala -version
Scala code runner version 2.9.1.final 
```

# c# - 检查条件并检查三个单独的“对象”以执行计算

> ID：11586407
> 
> 赞同：0
> 
> 时间：2012-07-20T20:18:18.540
> 
> 标签：c#, razor, comparison

我想太多对你们天才来说可能很简单的事情。:)

我对三种不同类型的资产有单独的输入，它们都有相同的四种选择：

1.  没有任何
2.  一
3.  二
4.  三个或更多

我正在单独计算用户选择的特定资产总量的成本。每项资产都会增加 100 美元的成本，因此我的代码中有它：

```
public static decimal priceAsset { get { return 100; } } 
```

因此，对于我计算的每种单独类型的资产：

1.  用户选择无 = $0
2.  用户选择“一”=`priceAsset`
3.  用户选择“二”=`priceAsset * 2`
4.  用户选择“三个或更多”= `priceAsset * 3`（我还添加了一个注释，超过三个的每个资产每个增加 100 美元）。

现在，请记住，我对三种不同类型的资产分别执行此操作。这些资产是财产、车辆或“其他”资产（按此顺序）。我认为顺序很重要，因为输入是线性的——用户从属性开始，在移动到车辆或“其他”之前必须做出选择。

这在我的计算中很有效，但现在我已经决定，如果在我的应用程序中某个单独的不相关条件为真，那么我不想只为第一个资产（任何资产类型）收取 100 美元。

我的问题是我无法正确弄清楚比较其他两种资产中的任何一种的逻辑，以确定是否选择了一个或多个资产来决定是否收取前 100 美元。

如果不清楚，让我举个例子：我基本上是在告诉人们第一个资产不会产生 100 美元的费用，但之后的每个资产都会。

*   用户选择“一个”、“两个”或“三个或更多”资产类型属性，第一个属性不收费，但两个或更多类型属性的资产每项收费 100 美元，任何数量都相同资产类型车辆或“其他”。
*   用户选择“无”的资产类型属性，但选择“一个”、“两个”或“三个或更多”的资产类型车辆，第一辆车不收费，但两个或更多的车辆类型资产产生每笔收费 100 美元，任何数量的“其他”资产类型收费相同。
*   与“其他”资产相同。
*   所有三种资产的“无”只返回 0 美元。

这是我如何处理财产的示例（代码提炼）：

```
 if One
            {
               priceAsset 
            }
        else if Two
            { 
               priceAsset * 2
            }
        else if ThreeOrMore
            {                
                priceAsset * 3
            }
        else
            { 
                $0
            } 
```

我对 Vehcile 和 OtherAsset 做同样的事情。

现在，如果这只是一种资产，我可以只制作第一个“$ 0”并更改第二个和第三个以轻松做到这一点，但它是在检查其他两种类型的资产时我步履蹒跚。我开始将所有其他资产与 进行逐字比较`||`，但这是 11 次比较，我认为有一种更简单的方法。另外，我想我必须在每个分支上都这样做（所以 11 *（3 个资产类型 * 每个分支 3 个），好吧，这听起来很荒谬。

非常感谢任何指导。我希望我的描述性足够（但不过分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:51:06.370

您的意思是，您希望对所有资产类型收取相同的（模式）费用，除非选择了一个属性和一个属性（在这种情况下，您希望值为 0）

假设枚举是这样的：

```
public enum AssetType {
    Property,
    Vehicle,
    Other
}
public enum AssetCount {
    None,
    One,
    Two,
    ThreeOrMore
} 
```

您可以使用此函数来确定价格：

```
public static decimal GetPrice( 
        AssetType assetType, 
        AssetCount assetCount, 
        decimal unitPrice 
    ) {

        //Handle Exceptional case first
        if( assetType == AssetType.Property ) {
            if (assetCount == AssetCount.One){
                return 0;
            }
        }
        switch( assetCount ) {
            case AssetCount.None:
                return 0;
            case AssetCount.One:
                return ( unitPrice );
            case AssetCount.Two:
                return ( unitPrice * 2 );
            case AssetCount.ThreeOrMore:
                return ( unitPrice * 3);

        }
        throw new Exception( "Unsupported AssetCount" );
} 
```

# ruby-on-rails - 如何获取 Rails 应用程序的 URL...不是当前控制器 URL

> ID：11586408
> 
> 赞同：0
> 
> 时间：2012-07-20T20:18:20.400
> 
> 标签：ruby-on-rails, routes

我有一个部分加载在几个不同的视图上。部分包含一个按钮，该按钮连接到我的一个控制器中的更新方法。按下按钮后，我希望该操作发生，然后重定向回当前用户所在的位置。但是，当我使用 request.path 之类的东西时，它总是重定向回按钮连接的特定模型。无论按钮指向何处，如何真正重定向回用户所在的当前页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:15:07.463

在由 new、edit 或 destroy 操作调用的控制器中，您需要更改正在调用的操作（create、update、destroy）中的@controller。

下面，您可以看到当用户创建新答案时，它会将他们重定向到上一页。

```
 # POST /answers
  # POST /answers.json
  def create
    @answer = Answer.new(params[:answer])

    respond_to do |format|
      if @answer.save
        format.html { redirect_to :back, notice: 'Answer was successfully created.' }
        format.json { render json: :back, status: :created, location: @answer }
      else
        format.html { redirect_to :back, alert: 'Error Posting Answer.' }
        format.json { render json: @answer.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# c# - 适用于 Visual Studio 2012 的 Silverlight

> ID：11586409
> 
> 赞同：1
> 
> 时间：2012-07-20T20:18:27.353
> 
> 标签：c#, visual-studio, silverlight, visual-studio-2012, silverlight-5.0

我环顾四周，但找不到我的问题的任何答案。是否有适用于 Visual Studio 2012 的 Silverlight 工具包？我尝试安装 Silverlight 5 但没有成功，Visual Studio 仍然要求安装 Silverlight 并且不允许创建 Silverlight 项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:22:13.237

根据[这个答案](http://forums.silverlight.net/t/256526.aspx/1)，Silverlight 工具包已经作为 VS2012 RC 的一部分安装

# magento - 在 Magento 中使用 APC 和整页缓存的问题

> ID：11586410
> 
> 赞同：0
> 
> 时间：2012-07-20T20:18:27.027
> 
> 标签：magento, caching, apc

我目前正在梳理 Magento 性能白皮书，以在假期开始前优化我们的 Magento 体验。两个月来，我们遇到了严重的流量高峰，并希望确保我们运行顺利。我们使用 Magento EE 1.8，默认使用全页缓存。除了 FPC，我还启用了 GZIP、Cache-Control 标头，并进行了白皮书推荐的所有 mySQL 调整调整。我们还将使用 CDN 来提供静态内容。

我们目前正在使用文件系统缓存，我对 APC 将落入这个堆栈的位置感到困惑，如果有的话。当我们已经在使用 FPC 时，是否值得安装 APC？我知道 Magento 缓存和 APC 缓存是两个不同的东西，所以如果我编辑使 Magento 缓存无效并需要刷新的产品，我是否必须每次都刷新 APC 缓存？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:13:04.203

APC 是面向 PHP 本身的操作码缓存，FPC 更面向缓存面向 Magento 本身的内容。进行任何产品更改时，您不需要刷新 APC。只有 FPC 需要在后端类型的编辑时刷新，Magento 通常会通知您它已失效。仅当 PHP 或模板 (.phtml) 文件已被修改或更改时，才需要刷新 APC。请记住，APC 以不同的方式为 CLI 和 Web 存储缓存，因此最好对自定义内部 URL 使用某种类型的 wget 或 cURL 请求来清除缓存。

例如像

`system('wget --spider --quiet http://localhost/apc/clear_apc_cache.php');`

此外，我强烈建议在堆栈前面设置 Varnish 反向代理服务器，因为它的性能在高流量系统上非常显着。您还可以使用 memcache 将数据库负载保持在 Varnish 或 FPC 之外的结帐或动态请求上。

[让 Varnish 在 Magento 上工作](https://stackoverflow.com/questions/5029593/getting-varnish-to-work-on-magento)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:48:09.323

您可以使用 APC 进行 2 级缓存（参见 参考资料`_getBackendOptions()`）`Mage_Core_Model_Cache`。虽然 APC 不是最好的选择。

根据您是运行单个还是多个 webnode，您可以选择 memcache（多个 webnode）或 tempfs（单个 webnode）。在 Magento 中配置 memcache 后，您仍然可以使用 APC 来缓存操作码。

编辑产品后，您只需在缓存管理管理员中点击“刷新缓存存储”即可使 memcache 中的所有条目无效。APC 不需要任何冲洗。

您当前将会话存储在哪里？如果它也在磁盘上，您可能还希望将它们迁移到 tempfs 或 memcache。不过，在使用 memcache 时要小心：为会话使用不同的端口/池，而不是用于 FPC 的端口/池。否则，您将在刷新 memcache 时刷新所有会话，注销所有用户并在进程中刷新他们的购物车。

# hyperlink - html中是否有“a href”的替代方法？我是严格意义上的“a”

> ID：11586433
> 
> 赞同：0
> 
> 时间：2012-07-20T20:20:41.543
> 
> 标签：hyperlink

有什么可以代替“a”选择器的吗？也许类似`<url href="">`或类似的东西。我试图避免'a'。原因是我正在使用 jQuery 及其代码修改该部分中的每个“a”。我想保持一些'a'不变。这就是我所拥有的： HTML：

```
 <div> <!-- █ POST █ -->
                    <h3>14 June 2012 - Noisettes for Spotify</h3>
                    <p>
                        We have supplied a sound equipment for the Noisettes concert on Spotify company event. Please enjoy <a class="inlink" target="_blank" href="http://www.youtube.com/watch?v=KRFHiBW9RE8">Noisettes on YouTube</a>. 
                    </p>
                </div> 
```

查询：

```
$(document).ready(function(){
var $posts = $('#items > div');
var maxHeight = 32;

$('a', $posts).live('click', function(){
    var $par = $(this).prev('p');

    var oH = parseInt($par.attr('class'));

    if($par.height() == oH){
        $par.animate({
            'height': maxHeight
        }, 'medium');
        $(this).text('read more...');
    }else{
        $par.animate({
            'height': oH
        }, 'medium');
        $(this).text('read less...');
    }
});

$posts.each(function(){
    if($('p', this).height() > maxHeight){

        $('p', this)
            .attr('class', $('p', this).height())
            .css('height', maxHeight+'px');
        $(this).append($('<a class="link">').text('read more...'));
    }
}); 
```

});

它用“少读...”替换了我的“YouTube 上的 Noisettes”（来自 html 代码）（仍在工作，但措辞发生了变化。我试图使用 CSS，但它仍然取代了它。我希望我清楚这一点 :)提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:23:45.837

您应该使用更具体的选择器：

```
$posts.find('a.SomeClass')... 
```

然后更改您希望它应用到的链接`<a class="SomeClass">`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:23:38.330

给出您想要更改特定类的所有“a”，说“可更改”，然后将您的选择器从更改`$('a', $posts)`为`$('a.changeable', $posts)`

# php - 库存系统 - 跟踪零件状态和位置的正确方法

> ID：11586435
> 
> 赞同：1
> 
> 时间：2012-07-20T20:20:45.820
> 
> 标签：php, mysql, inventory

如果我有一个名为 group 的表：

```
[Part_one_id|Part_two_id|Part_three_id|status|location]
     1            7           6        ready     long/lat
     2            2           9        in-use    long/lat 
```

每个零件都有三个单独的零件表：

```
 Part one                     Part two                   Part three
[id][measurement]             [id][pressure]               [id][temperature] 
```

我应该以哪种方式跟踪位置和状态？

1.  每当组上的状态更新时，运行另一个查询以更新它们自己表中部件的状态和位置
2.  如果我需要找出某个位置在哪里，我会查看它所在的组并提取当前位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:31:34.580

我发现您的表结构存在一些大问题。

1.  你永远不应该有这样的表：part1_id，part2_id，... 因为如果你想在一行中添加比原始设计更多的部分，你需要添加列，对于一个大表，这是难以处理的。而是使用连接表的多对多关系。
2.  您可能应该审核位置，以便在任何给定时间点获得位置的快照。这意味着您应该有一个具有 part_id、location_id、created、modified 的审计表和一个具有 lat/long 的 location 表。

至于问题本身的答案。我不是特别喜欢 MySQL 触发器，因为语法不是很好，而且它们的功能不如 PostgreSQL 或 Oracle 等其他数据库中的那么多。话虽如此，在这种情况下，触发器的吸引力在于触发器将在与触发它的更新/插入相同的事务中执行，因此您将免费获得该业务规则。但是，根据您用于访问数据库的内容，您可以只启动一个事务，在完成审计插入之前不要结束它。

最终，您的表格将变为：

组：id、名称、创建、修改、状态

part_group：part_id、group_id、创建、修改

位置：id、lat、long

group_location：group_id，location_id，创建，修改

然后最近创建的 group_location 将指向给定组的当前位置。

# objective-c - 带有 Cocoa 的自定义查找器（文件夹）图像

> ID：11586440
> 
> 赞同：2
> 
> 时间：2012-07-20T20:21:10.797
> 
> 标签：objective-c, macos, cocoa, finder

> **可能重复：**
> [使用 Cocoa 为文件夹创建图标](https://stackoverflow.com/questions/5739330/using-cocoa-to-create-an-icon-for-a-folder)

我正在尝试设置**自定义文件夹图像**，但只能使用**cocoa**作为保管箱： ![Dropbox 自定义文件夹图片](../Images/e5bfdf6b161cdf634a06ee86cafc18a6.png)
但我意识到这并不简单。

有人有解决方案/提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:27:48.787

[NSWorkspace](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)类的使用`- (BOOL)setIcon:(NSImage *)image forFile:(NSString *)fullPath options:(NSWorkspaceIconCreationOptions)options`方法。

# xml - 如何将文字和变量放在标签内？

> ID：11586448
> 
> 赞同：3
> 
> 时间：2012-07-20T20:21:43.360
> 
> 标签：xml, xslt, xpath

我需要为以下标签创建 xsl：

```
<role roletype="Learner"> 
```

学习者保存在标记为 $wsRole 的变量中。

此代码不起作用：

```
 <xsl:variable name="fullWsRole">
     <xsl:value-of select="concat('&quot;', $wsRole,'&quot;')"/>
 </xsl:variable>            

 <role roletype="{$fullWsRole}">
 </role> 
```

如何创建节点

```
<role roletype="Learner">    ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:00:12.807

**以下是如何做到这一点**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="fullWsRole" select="'Learner'"/>

 <xsl:template match="/">
  <role roletype="{$fullWsRole}"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
<role roletype="Learner"/> 
```

**说明**：使用**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**（属性值模板）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:13:13.877

假设变量`$wsRole`包含`Learner`

```
<xsl:variable name="wsRole">Learner</xsl:variable> 
```

预期结果是

```
<role roletype="Learner"></role> 
```

只需使用：

```
<role roletype="{$wsRole}"></role> 
```

# json - 敲除绑定json，无法解析属性

> ID：11586450
> 
> 赞同：0
> 
> 时间：2012-07-20T20:21:53.887
> 
> 标签：json, knockout.js, knockout-2.0

我正在尝试使用 Knockout 将从 Grails 控制器返回的 JSON 数据数据绑定到表。我相信返回的 JSON 很好：

```
result
[
Object
class: "project.Person"
firstName: "Bill"
id: 2
lastName: "Fake"
__proto__: Object
, 
Object
class: "project.Person"
firstName: "Dale"
id: 3
lastName: "Fake"
__proto__: Object
, 
Object
class: "project.Person"
firstName: "Linda"
id: 4
lastName: "Fake"
__proto__: Object
] 
```

这是我的javascript：

```
 var Directory =  {
        list: ko.observableArray([])
      };

      var Person = function(id, first, last) {
        this.id = ko.observable(id);
        this.firstName = ko.observable(first);
        this.lastName = ko.observable(last);
      };

      var loadPeople = function() {
        $.ajax({
          url: "${createLink(action: "getPeople")}",
          type: "post",
          contentType: "application/json",
          success:  function(result) {
            for(p in result) {
              Directory.list.push(new Person(p.id,p.firstName,p.lastName));
            }
            ko.applyBindings(Directory);
          }
        });
      };

      loadPeople(); 
```

最后，我的标记：

```
 <table>
          <thead>
            <tr><th>Id</th><th>First name</th><th>Last name</th></tr>
          </thead>
          <tbody data-bind="foreach: list">
              <tr>
                <td data-bind="text: id"></td>
                <td data-bind="text: firstName"></td>
                <td data-bind="text: lastName"></td>
              </tr>
          </tbody>
        </table> 
```

我查看了类似的问题并尝试`list.Person`将`Person`可观察数组传递给绑定而不是`Directory`. 当我调试时，包含一个类型`Directory.list()`大小的数组，所以它看起来是正确的。`3``Person`

错误：

> 未捕获的错误：无法解析绑定属性。消息：ReferenceError：id 未定义；属性值：文本：id

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:27:05.637

你从哪里得到那个结果块，控制台？这不是有效的 JSON，但它看起来像一个有效的 javascript 对象。你真的不应该在这样的调用中应用绑定。它应该发生一次，通常在 domReady 上。更新 viewModel 之后会自动更新绑定；这就是重点。

无论如何，我把它扔进[了小提琴](http://jsfiddle.net/tyrsius/Lrqeb/)，它工作正常。正在发生的其他事情正在破坏您的代码。

# javascript - 在文档中添加或删除元素时会触发什么事件？

> ID：11586452
> 
> 赞同：0
> 
> 时间：2012-07-20T20:21:55.047
> 
> 标签：javascript, jquery, events, dom, tiddlywiki

我正在为 Tiddlywiki 制作一种选项卡式界面，我想知道如何在每次打开或关闭 tiddler 时触发此代码。Tiddlywiki 是一种在浏览器中运行的 HTML 笔记本类型的东西，而 tiddler 是`#tiddlerDisplay`. 一次可以有并且通常不止一个。

我要列出的 div 包含在 中`#tiddlerDisplay`，而列表本身是`jQuery("#mainMenu > #singleTiddlerList")`.

```
config.macros.singleTiddler.update = function(){
    jQuery("#mainMenu > #singleTiddlerList").empty();
    jQuery("#tiddlerDisplay > div").each(function(i,e){
        jQuery("#mainMenu > #singleTiddlerList").append(jQuery(
            createTiddlyButton(document.createElement("li"),jQuery(e).attr("tiddler"),"",config.macros.singleTiddler.clickHandler)
        ).parent());
    });
}; 
```

**更新：**我不能只添加自定义事件，除非我可以从当前代码之外执行它（例如在文档加载时触发的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:50:17.863

首先为追加/清除 div 创建两个自定义事件。让它们绑定在您使用上面发布的代码的文档中。

```
jQuery(document).bind('div-removed',function(e){ 
  // code stuff to do for removal 
  jQuery("#mainMenu > #singleTiddlerList").empty(); // required
  // other stuff here
});
jQuery(document).bind('div-appended',function(e){ 
 // code stuff to do on append 
        jQuery("#tiddlerDisplay > div").each(function(i,e){
            jQuery("#mainMenu > #singleTiddlerList").append(jQuery(
                createTiddlyButton(document.createElement("li"),jQuery(e).attr("tiddler"),"",config.macros.singleTiddler.clickHandler)
            ).parent());
        }); // required
  //other stuff here
}); 
```

然后在您的代码中稍微更改执行：

```
config.macros.singleTiddler.update = function(){
  $(document).trigger("div-removed");
  $(document).trigger("div-appended");  
}; 
```

这绝对不是唯一的方法（我认为现在它也可以完成，`.promise()`但这是一个开始。**更新**更新以检查这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:07:16.137

一种方法是`jQuery("#tiddlerDisplay").bind("DOMSubtreeModified", config.macros.singleTiddler.update);`，但是我认为这仅适用于 Chrome（可能是 Opera 或 Safari，不确定），并且似乎已被弃用。Firefox 有两个事件来完成同样的事情，但我认为这些也已被弃用。

我在阅读[本文](http://www.bennadel.com/blog/2009-Using-Self-Executing-Function-Arguments-To-Override-Core-jQuery-Methods.htm)并探索 TiddlyWiki 源代码后发现的另一种方法是：

```
(function( $, oldRem ){
    Story.prototype.displayTiddler = function(){
        var resp = oldRem.apply( this, arguments );
        $("#tiddlerDisplay").trigger("displayTiddler");
        return(resp);
    };
})( jQuery, Story.prototype.displayTiddler );
(function( $, oldRem ){
    Story.prototype.closeTiddler = function(){
        var resp = oldRem.apply( this, arguments );
        $("#tiddlerDisplay").trigger("closeTiddler");
        return(resp);
    };
})( jQuery, Story.prototype.closeTiddler );
jQuery("#tiddlerDisplay").bind("displayTiddler", config.macros.singleTiddler.update);
jQuery("#tiddlerDisplay").bind("closeTiddler", config.macros.singleTiddler.update); 
```

Notice that the event fires *after* the tiddler opens or closes. Also, as the article states, jQuery can be bugged in the same way, but I don't know about the native DOM methods, and I kind of doubt it. There's supposed to be an event for it, but regardless, everyone should totally drop them and use jQuery!

# silverlight - 如何从位于子 aspx 页面内的 Silverlight 应用程序刷新浏览器

> ID：11586454
> 
> 赞同：1
> 
> 时间：2012-07-20T20:22:08.943
> 
> 标签：silverlight

我知道有一些方法可以从 silverlight 刷新浏览器页面，例如 HtmlPage.Window.Navigate(HtmlPage.Document.DocumentUri); 或 System.Windows.Browser.HtmlPage.Document.Submit(); 当容器页面使用页面中的总空间时，这些工作正常，但是当我的 silverlight 应用程序位于属于某种母版页的子页面上时呢？即在下面的代码中，我有一个名为 Application.aspx 的页面，它包含三个部分（main.aspx 是我的 silvelight 应用程序所在的位置）。

```
<frameset >
    <frame id=frameTitle name=frameTitle src="title.aspx" noResize scrolling="no"   frameborder="no" height="75" />
    <frame name="frameSpacer" id="frameSpacer" src="spacer.aspx" noresize scrolling="no" marginwidth="0" marginheight="0"/>
    <frame id="frameMain" name="frameMain" src="main.aspx" noResize scrolling=no frameborder="no" />
</frameset> 
```

如何刷新 Application.aspx 而不仅仅是 Main.aspx（当我使用 Document.Submit() 时，我对 main.aspx 进行了部分刷新）？使用其他方法？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:50:33.613

解决方案：从容器aspx页面我们需要添加一个js函数：

```
 function reload() {
        window.parent.location.reload(true);
    } 
```

来自 silverlight：我们需要添加对 js 函数“reload”的调用

```
HtmlPage.Window.Invoke("reload"); 
```

# java - 从 AsyncTask 触发时 SQLiteOpenHelper.getWritableDatabase 上的 NullPointerException

> ID：11586458
> 
> 赞同：0
> 
> 时间：2012-07-20T20:22:24.250
> 
> 标签：java, android, sqlite

我在`java.lang.NullPointerException`这里遇到错误：

```
com.mysite.datasources.ArticlesDataSource.open(ArticlesDataSource.java:88) 
```

代码是这样的：

```
public void open() throws SQLException
{
    database = dbHelper.getWritableDatabase(); //this is line 88
} 
```

它是`importArticles()`从`ArticlesDataSource`.

从我的调用时，这工作正常`SplashScreenActivity`：

```
articlesDataSource = new ArticlesDataSource(context);
try {
    articlesDataSource.importArticles(Section.currentSection, false);
    ... 
```

但是当我尝试从我的`ImportArticlesAsync`(within `MainActivity`) 调用它时，我得到了`NullPointerException`错误。

```
//This is within my MainActivity class

    //...
    ImportArticlesAsync importArticlesAsync = new ImportArticlesAsync(this);
    importArticlesAsync.execute("");
}

private class ImportArticlesAsync extends AsyncTask<String, Void, String>
{

    Context mContext;
    //ProgressDialog waitSpinner;
    private ArticlesDataSource articlesDataSource;
    //ConfigurationContainer configuration = ConfigurationContainer.getInstance();

    public ImportArticlesAsync(Context context) {
        mContext = context;
        //waitSpinner = new ProgressDialog(this.context);
    }

    @Override
    protected String doInBackground(String... params)
    {
        //IMPORTS THE ARTICLES FROM THE RSS FEED (adds or updates)
    //tried just mContext //notice
    //tried mContext.getApplicationContext() //ERROR / crash

        articlesDataSource = new ArticlesDataSource(mContext);
        try {
            articlesDataSource.importArticles(Section.currentSection, false);
        } catch (Exception e) {
            Toast toast = Toast.makeText(
                    mContext,
                    "NOTICE: Could not import/update " + Section.currentSection.toString() + " articles.",
                    Toast.LENGTH_LONG);
            toast.show();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {

        //loads article from database to the list
        loadArticlesIntoList(Section.currentSection);
}
} 
```

从我读过的内容来看，大多数人认为这一定是不正确的上下文。但是 - 我还没有真正理解上下文，并且已经尝试了我能想到的所有方法（并且阅读了很多关于上下文的内容）。

* * *

**我尝试对我的“代码”进行图表/更清晰的解释：**

```
//YAY this works!
SplashScreenActivity
    -LoadApplication (AsyncTask)
        -doInBackground
             articlesDataSource = new ArticleDataSource(context);
             articlesDataSource.importArticles(Section.currentSection, false);

//BOO, this doesn't work!
MainActivity
    -ImportArticlesAsync
        -doInBackground (AsyncTask)
             articlesDataSource = new ArticlesDataSource(context);
             articlesDataSource.importArticles(Section.currentSection, false); 
```

* * *

**每个请求 - dbHelper 在这里设置：**

```
private SQLiteDatabase database;
private DbHelper dbHelper;
private PhotosDataSource photosdatasource;
private SectionsDataSource sectionsdatasource;

public ArticlesDataSource(Context context)
{
    mContext = context;
    dbHelper = new DbHelper(mContext);
    photosdatasource = new PhotosDataSource(context);
    sectionsdatasource = new SectionsDataSource(context);
}

public void open() throws SQLException
{
    database = dbHelper.getWritableDatabase();
} 
```

* * *

**代码：**

com.mysite.news

*   SplashScreenActivity.java - [http://pastebin.com/ZaunrrzY](http://pastebin.com/ZaunrrzY)
*   MainActivity.java - [http://pastebin.com/k08sDLaJ](http://pastebin.com/k08sDLaJ)

com.mysite.models

*   Article.java - [http://pastebin.com/SBEqrCuw](http://pastebin.com/SBEqrCuw)
*   Photo.java - [http://pastebin.com/75DVzK6Z](http://pastebin.com/75DVzK6Z)
*   Section.java - [http://pastebin.com/0YYkk5JQ](http://pastebin.com/0YYkk5JQ)

com.mysite.datasources

*   ArticlesDataSource.java - [http://pastebin.com/bFM4G0xT](http://pastebin.com/bFM4G0xT)
*   SectionsDataSource.java - [http://pastebin.com/pKZQHt9U](http://pastebin.com/pKZQHt9U)
*   PhotosDataSource.java - [http://pastebin.com/sZTZd4ZP](http://pastebin.com/sZTZd4ZP)

com.mysite.utilites

*   DbHelper.java - [http://pastebin.com/PMCFrVyG](http://pastebin.com/PMCFrVyG)

AndroidManifest.xml - [http://pastebin.com/hHF86f4d](http://pastebin.com/hHF86f4d)

* * *

**错误：**

07-20 21:33:26.721: W/System.err(8260): java.lang.NullPointerException 07-20 21:33:26.721: W/System.err(8260): 在 android.content.ContextWrapper.openOrCreateDatabase( ContextWrapper.java:203) 07-20 21:33:26.721: W/System.err(8260): 在 android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118) 07-20 21:33:26.721: W/System.err(8260): 在 com.mysite.datasources.ArticlesDataSource.open(ArticlesDataSource.java:88) 07-20 21:33:26.721: W/System.err(8260): 在 com.mysite.datasources .ArticlesDataSource.importArticles(ArticlesDataSource.java:101) 07-20 21:33:26.721: W/System.err(8260): 在 com.mysite.news.MainActivity$ImportArticlesAsync.doInBackground(MainActivity.java:194) 07- 20 21:33:26.721: W/System.err(8260): 在 com.mysite.news.MainActivity$ImportArticlesAsync.doInBackground(MainActivity.java:1) 07-20 21:33:26.721: W/System.err(8260): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 07-20 21:33:26.721: W/System.err(8260): 在 java. util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 07-20 21:33:26.721: W/System.err(8260): at java.util.concurrent.FutureTask.run(FutureTask.java:138 ) 07-20 21:33:26.721: W/System.err(8260): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 07-20 21:33:26.721: W/System.err (8260): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 07-20 21:33:26.721: W/System.err(8260): 在 java.lang.Thread.run(线程.java:1019)721: W/System.err(8260): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 07-20 21:33:26.721: W/System.err(8260): 在 java.util .concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 07-20 21:33:26.721: W/System.err(8260): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 07-20 21:33:26.721: W/System.err(8260): 在 java.lang.Thread.run(Thread.java:1019)721: W/System.err(8260): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 07-20 21:33:26.721: W/System.err(8260): 在 java.util .concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 07-20 21:33:26.721: W/System.err(8260): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 07-20 21:33:26.721: W/System.err(8260): 在 java.lang.Thread.run(Thread.java:1019)

* * *

**SectionSelectedListener.java**

```
package com.mysite.news;

import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;

public class SectionSelectedListener implements OnItemSelectedListener
{
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
    {
        MainActivity mainActivity = new MainActivity();
        mainActivity.sectionSelected();     
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // Do nothing       
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:54:35.950

`Context`您传递给的参考`AsyncTask`是`null`. 问题出现在您实例化一个 new`MainActivity`只是为了调用该`sectionSelected()`方法。你永远不应该自己实例化一个活动！

最简单的解决方案是简单地将匿名内部类作为侦听器`MainActivity`：

```
sectionsSpinner.setOnItemSelectedListener(new OnItemSelectedListener()
{
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
       sectionSelected();     
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // Do nothing       
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:47:01.140

试着把这条线`articlesDataSource = new ArticlesDataSource(mContext);`从你的方法移到`doInBackground(..)`你`AsyncTask`的`onPreExecute()`方法`AsyncTask`。像这样的东西：

```
private class ImportArticlesAsync extends AsyncTask<String, Void, String>
{

Context mContext;
//ProgressDialog waitSpinner;
private ArticlesDataSource articlesDataSource;
//ConfigurationContainer configuration = ConfigurationContainer.getInstance();

public ImportArticlesAsync(Context context) {
    mContext = context;
    //waitSpinner = new ProgressDialog(this.context);
}

@Override
protected void onPreExecute()
{
   articlesDataSource = new ArticlesDataSource(mContext);
}

@Override
protected String doInBackground(String... params)
{        
    try {
        articlesDataSource.importArticles(Section.currentSection, false);
    } catch (Exception e) {
        Toast toast = Toast.makeText(
                mContext,
                "NOTICE: Could not import/update " + Section.currentSection.toString() + " articles.",
                Toast.LENGTH_LONG);
        toast.show();
    }
    return null;
}

@Override
protected void onPostExecute(String result) {

    //loads article from database to the list
    loadArticlesIntoList(Section.currentSection);
}
} 
```

我认为这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:59:48.880

将 dbHelper 变量从 ArticlesDataSource 类移动到 Activity，确保在创建 AsyncTask 之前对其进行初始化。

# jquery - 如何从 handlebarsjs 访问这个 json 对象

> ID：11586459
> 
> 赞同：0
> 
> 时间：2012-07-20T20:22:33.417
> 
> 标签：jquery, jquery-plugins, handlebars.js

如何从 handlebarsjs 访问这个 json 对象

```
 [ {
    "id" : 9,
    "name" : "Name1",
    "address" : "address1",
    "city" : "city1",
    "state" : "KS",
    "zip" : "11111",
    "country" : "USA",
    "fax" : "111111",
    "phone" : "1111111",
    "website" : "",
    "account" : "11111",
    "contacts" : []
}, {
    "id" : 12,
    "name" : "Name2",
    "address" : "address2",
    "city" : "city2",
    "state" : "NJ",
    "zip" : "11111",
    "country" : "USA",
    "fax" : "",
    "phone" : "1111",
    "website" : "",
    "account" : "11111",
    "contacts" : [ {
        "firstName" : "name",
        "lastName" : "lastname",
        "title" : "rep",
        "phone" : "3333",
        "email" : "33333"
    } ]
} ] 
```

我曾尝试 {{name}} 访问姓名，但没有奏效，那么我如何访问姓名属性以及联系人下的嵌套 firstName 属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:48:24.207

你很幸运：你的问题在 Handlebars 文档页面上解释得很清楚：

[http://handlebarsjs.com/](http://handlebarsjs.com/)

只需向下滚动到“Handlebars Paths”部分，您就会看到它准确地讨论了您正在寻找的内容（“Handlebars 还支持嵌套路径，可以查找嵌套在当前上下文下方的属性......” )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:43:59.690

为您的 JSON 对象分配一个 javascript 变量名称。

```
 var jsonstring = [ {
        "id" : 9,
        "name" : "Name1",
        "address" : "address1",
        "city" : "city1",
        "state" : "KS",
        "zip" : "11111",
        "country" : "USA",
        "fax" : "111111",
        "phone" : "1111111",
        "website" : "",
        "account" : "11111",
        "contacts" : []
    }] 
```

然后你可以做**jsongstring[0].name**

您可以使用 for 循环遍历 JSON 并打印出您需要的信息

```
for ( var x = 0; x < jsonString.length; x++){
alert(jsonString[x].name);
alert(jsonString[x].contacts.firstName);
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:32:10.417

您需要先对数组进行索引才能获取名称。就像是：

```
{{listObj[0].name}}

{{listObj[0].contacts.firstName}} 
```

# vb.net - 如何动态命名或重命名 VB 2010 对象或属性？

> ID：11586461
> 
> 赞同：0
> 
> 时间：2012-07-20T20:22:35.100
> 
> 标签：vb.net, visual-studio-2010, object, rename, vb.net-2010

我想动态创建一个对象，为对象和属性提供参数。

或者能够重命名对象名称（因此它是引用）及其属性名称。

例子：

```
Create("OBJECT1", "PROPERTY1", "PROPERTY2") 
```

最终得到一个可以通过以下方式访问的对象：

```
OBJECT1.PROPERTY1.text = "Property1 Value" 
```

或者创建一个对象：

```
CLASS obj
  Property prop1 as string
  Property prop2 as string
END CLASS

Dim myObj as new obj
myObj.prop1.text = "Propert 1 Value"

(Somehow rename)
myObj.prop1.Name = "PROPERTY1"
myObj.prop2.Name = "PROPERTY2"
myObj.Name = "OBJECT1" 
```

将 OBJECT1.PROPERTY1.text 作为“属性 1 值”

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:27:45.837

我会使用匿名类型，它们很容易实例化：

[http://msdn.microsoft.com/en-us/library/bb384767.aspx](http://msdn.microsoft.com/en-us/library/bb384767.aspx)

# r - Rook 网络服务器

> ID：11586463
> 
> 赞同：5
> 
> 时间：2012-07-20T20:22:38.487
> 
> 标签：r, webserver, r-rook-package

如何让 Rook 网络服务器允许远程连接？

```
> library(Rook)
Loading required package: tools
Loading required package: brew
> s <- Rhttpd$new()
> s$start()
 done

Server started on host 127.0.0.1 and port 18445 . App urls are:

        http://127.0.0.1:18445/custom/RookTest
> s$browse(1) 
```

这在本地工作得很好，但它不接受来自远程计算机的连接。

**找到解决方案：** 使用您的计算机的 IP 地址`s$start( listen = "77.77.66.77" )`代替`s$start()`where `77.77.66.77`（在网络上）。

# java - java中到美国州的地理位置（纬度/经度）

> ID：11586464
> 
> 赞同：0
> 
> 时间：2012-07-20T20:22:45.353
> 
> 标签：java, geolocation, latitude-longitude, geofencing

我以前从未大量使用过地理定位数据，但我刚刚遇到了快速分析大型结果集的纬度和经度数据的需求，并且基本上将数据的子集地理围栏到特定状态。

我正在寻找的是一个本地库或 API，它可以处理原始纬度和经度数据，并快速吐出该值的相应美国状态以进行比较。我正在寻找相当快速的分析 1mm 集，并且数据无法上传到外国服务器进行分析。在我的简短调查中，我发现了一些适用于邮政编码的解决方案，是否有现有的解决方案，或者我将不得不依赖粗略的经纬度限定词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:26:22.543

我不熟悉 Java，但如果它有任何空间功能，您可以在美国政府网站 NationalAtlas (dot) gov 上获取州地图边界，并使用 SQL Server STIntersects 方法来确定一组坐标落在哪个州之内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:34:54.960

我过去使用过 ESRI 地理数据工具集。记得做这样的事情。如果有帮助，请看这里：

[http://www.esri.com/apps/products/download/#ArcGIS_Extensions](http://www.esri.com/apps/products/download/#ArcGIS_Extensions)

# c++ - Valgrind 输出和 rdtsc 存在分歧……为什么会这样？

> ID：11586465
> 
> 赞同：1
> 
> 时间：2012-07-20T20:22:50.940
> 
> 标签：c++, optimization, valgrind

我正在测试库中几个函数的延迟。为此，我在进入和退出时使用 rdtsc()，我跟踪生成的 rdtsc 值、运行的最小值、最大值和调用次数（以获取平均值）。当我查看输出图时，我看到平均大约 100 个周期，但峰值大约为 20000 个周期或类似的东西（这似乎比函数中 3 或 4 个分支的简单分支错误预测要糟糕得多）。我运行了cachegrind，得到了这样的输出：

```
==14038==
==14038== I   refs:      2,260,149,383
==14038== I1  misses:           10,408
==14038== LLi misses:            3,978
==14038== I1  miss rate:          0.00%
==14038== LLi miss rate:          0.00%
==14038==
==14038== D   refs:      1,100,962,403  (773,471,444 rd   + 327,490,959 wr)
==14038== D1  misses:           26,419  (     13,447 rd   +      12,972 wr)
==14038== LLd misses:           15,446  (      5,701 rd   +       9,745 wr)
==14038== D1  miss rate:           0.0% (        0.0%     +         0.0%  )
==14038== LLd miss rate:           0.0% (        0.0%     +         0.0%  )
==14038==
==14038== LL refs:              36,827  (     23,855 rd   +      12,972 wr)
==14038== LL misses:            19,424  (      9,679 rd   +       9,745 wr)
==14038== LL miss rate:            0.0% (        0.0%     +         0.0%  )
==14038==
==14038== Branches:        327,248,773  (297,539,058 cond +  29,709,715 ind)
==14038== Mispredicts:         980,262  (    978,639 cond +       1,623 ind)
==14038== Mispred rate:            0.2% (        0.3%     +         0.0%   ) 
```

错误预测和分支未命中率如此之低，这让我想知道发生了什么……我怎么可能经常看到如此高的延迟测量，大约 20K 周期？我还可以研究哪些东西来解开这个谜团？会是什么呢？

事实上，令人难以置信的是，其中一个 rdtsc 测量值仅包含如下内容：

```
if(memberVarBool_)
{
    memberVarPtr->smallFuncWithThreeIntAssignsAndstdmax;
} 
```

这个家伙向我展示了很多“25”周期的东西，这很有意义，但也有很多大约 2000 个周期的案例！

更新：我刚刚切换到使用 gettimeofday 来测量以纳秒为单位的延迟，希望避免特定于 rdtsc 的问题并且仍然看到相同的东西......有没有办法可以在我的测量中避免抢占和外部或过程影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:34:59.900

您如何确保操作系统不会在两次调用 rdtsc() 之间安排另一个任务/进程？如何防止在两次调用 rdtsc() 之间发生硬件中断？

这两种情况都会导致两个读数之间的差异似乎出现峰值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:30:21.873

如果您保留原始样本，您可以绘制它们并忽略异常值，或者采用中值而不是平均值/平均值。顺便说一句，以及抢占 - rdtsc 可能误报间隔的另一个原因是您的线程移动内核：每个内核都有自己的 TSC 寄存器，并且在许多盒子上，它们在任何时间点都不会同步到相同的值。将流程固定到特定核心会有所帮助。您可能需要成为 root 才能禁用硬件中断，而且我不确定它是如何在用户进程上下文中完成的。

另外，仅仅因为某些东西名义上返回纳秒并不意味着它在实践中会这样做：许多这样的函数在一些较慢的驱动程序下跳跃了数百万纳秒；重复调用该函数将返回相同的值，直到它再次跳转。

# javascript - 使用三元运算符设置变量

> ID：11586466
> 
> 赞同：10
> 
> 时间：2012-07-20T20:22:54.403
> 
> 标签：javascript, xml

我正在尝试使用三元运算符来检查 XML 元素的值是否为空。如果是，那么我希望变量是一回事。如果不是，那么我希望它返回元素的值。这就是我到目前为止所拥有的。

```
var rating = data.getElementsByTagName("overall_average")[0].childeNodes[0].length > 0 ? data.getElementsByTagName("overall_average")[0].childeNodes[0].nodeValue : "It is empty"; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T20:25:23.090

这里：

```
var node = data.getElementsByTagName( 'overall_average' )[0].childNodes[0];
var rating = node ? node.nodeValue : 'It is empty'; 
```

请注意，如果 中没有单个“overall_average”元素，则此代码会引发（错误）`data`，因此您可能希望在必要时防止这种情况...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T20:29:51.933

最短的方法：

```
var rating = (data.getElementsByTagName('overall_average')[0].childNodes[0] || {}).nodeValue || 'It is empty'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T20:25:37.990

你的三元操作在我看来很好。我建议的一件事（为了可读性和简洁性）是将您的`overall_average`对象定义为变量并在之后引用它。

```
var overall_average = data.getElementsByTagName("overall_average")[0].childeNodes[0];
var rating = overall_average.length > 0 ? overall_average.nodeValue : "It is empty"; 
```

祝你好运！

# wordpress - 使用过滤器、自定义帖子类型和自定义字段的 Wordpress WP_Query 将不会返回正确的帖子类型

> ID：11586467
> 
> 赞同：0
> 
> 时间：2012-07-20T20:23:01.840
> 
> 标签：wordpress, custom-post-type

我正在尝试获取某些 post_types 的结果，但是，当我添加过滤器以检查 post_title 和 post_content 是否为“LIKE”查询字符串时，将返回所有 post_types，包括附件 post_types，我不希望显示在$args。这是我正在尝试的代码：

```
$query_string = get_search_query();
$args = array(                      
        'post_type' => array("hc_pillow", "hc_topper", "hc_accessory", "page"),                                                                                             
        'meta_query' => array(
            'relation' => 'OR',
            array(
                    'key' => 'tab_retail',
                'value' => $query_string,
                'compare' => 'LIKE'
            ),
            array(
                'key' => 'tab_tech',
                'value' => $query_string,
                'compare' => 'LIKE'
            ),
            array(
                'key' => 'tab_shipping_information',
                'value' => $query_string,
                'compare' => 'LIKE'
            )
        ),                      
        'posts_per_page' => "-1"                        
);
function filter_where_title($where = '') {
    $query_string = get_search_query();
    $where .= " OR post_title LIKE '%".$query_string."%' OR post_content LIKE '%".$query_string."%'";                   
    return $where;
}
$posts = new WP_Query();
add_filter('posts_where', 'filter_where_title');
$posts->query($args);                
remove_filter('posts_where', 'filter_where_title'); 
```

任何帮助都将不胜感激，我不确定还有什么可以尝试的。，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:39:49.437

您的 WHERE 语句的结构应如下所示：

```
WHERE `post_type` IN ( 'hc_pillow', 'hc_topper', 'hc_accessory', 'page' ) AND ( `post_title` LIKE '%search_string%' OR `post_content` LIKE '%search_string%' ) 
```

现在更像

```
WHERE `post_type` IN ( 'hc_pillow', 'hc_topper', 'hc_accessory', 'page' ) OR `post_title` LIKE '%search_string%' OR `post_content` LIKE '%search_string%' 
```

这三个条件中的任何一个条件都足以使一行生效。

# android - android画廊textview水平列表圆角边缘

> ID：11586468
> 
> 赞同：0
> 
> 时间：2012-07-20T20:23:05.277
> 
> 标签：android, list, textview, gallery

我正在实现水平滚动文本视图列表，类似于带有翻页的电子书。我使用显示 TextViews 的 Gallery 小部件。我面临的第一个问题是每页的左右边缘看起来都是圆形的。

这是示例代码：

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <Gallery android:id="@+id/gallery" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:spacing="0px"/>         

</LinearLayout> 
```

页面.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gallery_item"
    android:layout_width="match_parent" 
    android:layout_height="match_parent">

    <TextView android:id="@+id/textView" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:background="#000"/>

</LinearLayout> 
```

GalleryActivity.java

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.TextView;

public class GalleryActivity extends Activity {

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         Gallery gallery = (Gallery) findViewById(R.id.gallery);
         gallery.setAdapter(new GalleryAdapter(this));
     }

     private class GalleryAdapter extends BaseAdapter {

        private Context context; // needed to create the view

        public GalleryAdapter(Context c) {
            context = c;
        }

        public int getCount() {
            return 5;
        }

        public Object getItem(int position) {
            return position; //TODO: get the object on the position
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View v;

            if(convertView == null)
                v = LayoutInflater.from(context).inflate(R.layout.page, parent, false);
            else
                v = convertView;

            TextView tv = (TextView) v.findViewById(R.id.textView);
            tv.setText("Page" + position);

            return v;
        }
    }
} 
```

任何想法如何获得例如标题栏上的页面边缘？也许另一种实现目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:25:51.623

在 page.xml 而不是给 match_parent 中，为布局提供 fxd 宽度并为 txtview 提供 sm 填充。并且 FYI Gallery 已弃用，请改用查看寻呼机。View pager 也附带了兼容性包：http://developer.android.com/tools/extras/support-library.html

如果你不能给出一个 fxd 宽度，那么你只能尝试使用填充，这可能会解决你的 prblm

# objective-c - 如何调试由 UIKit 的 CoreAnimation 调用触发的崩溃？

> ID：11586470
> 
> 赞同：1
> 
> 时间：2012-07-20T20:23:13.420
> 
> 标签：objective-c, cocoa-touch, cocoa, uikit, core-animation

我正在创建的 iOS 应用程序中有一些基本动画，它的表现非常好……直到昨天。

我显然做了一个改变，以某种方式影响了它，我无法确定问题所在。

当单步执行代码时，它会到达这段代码，并在跨过 commitAnimation 行后死掉（我最初是在我意识到 [UIView animateWithDuration: ...] 的美妙之前写的：

```
UIView *favoritesTabItemView = [appDelegate.tabBarController.tabBar viewWithTag:0];
CGPoint startingPoint = [[magazineView superview]
convertPoint:CGPointMake(magazineView.center.x, magazineView.center.y) toView:appDelegate.window.rootViewController.view];
CGPoint targetPoint = CGPointMake(favoritesTabItemView.center.x - 214.0, favoritesTabItemView.center.y);

//shrink the icon down
UIGraphicsBeginImageContextWithOptions(magazineView.bounds.size, NO, 0.0);
[magazineView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[UIImageView beginAnimations:nil context:nil];
[UIImageView setAnimationDuration:0.1];
PublicationCoverImageReflectionView.alpha = 0.0;
[UIImageView commitAnimations];  //<-- crash happens after this line 
```

在我跨过 commitAnimation 之后，调试器的错误给我的帮助很少：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: 
'*** -[__NSArrayM objectAtIndex:]: index 9 beyond bounds [0 .. 8]'
*** First throw call stack:
(0x35c8b88f 0x31604259 0x35bd49db 0x126d5d 0x12e65f 0x349da6c9 0x34a66531 0x35c57547 0x35be3097 0x349da3eb 0x307a3a13 0x10f8ef 0x35be53fd 0x307a9faf 0x307a9f6b 0x307a9f49 0x307a9cb9 0x307aa5f1 0x307a8ad3 0x307a84c1 0x3078e83d 0x3078e0e3 0x3596122b 0x35c5f523 0x35c5f4c5 0x35c5e313 0x35be14a5 0x35be136d 0x35960439 0x307bce7d 0xbb109 0xbb0c8)
terminate called throwing an exception(lldb) 
```

有谁知道这可能在谈论什么样的数组？这是一个正在消亡的 UIKit 调用，所以我认为该数组是 UIKit 使用的一些视图数组，但我无法看到......

关于如何解决甚至进一步调查这个问题的任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:25:40.567

所以我发现了这个问题，它与 CoreAnimation 没有直接关系……尽管那是问题的征兆。

我一直在调用一些块，但我的调试设置无法找出崩溃的位置。

我四处寻找更多调试帮助，最有帮助的问题是学习如何设置一个在异常发生时触发的断点。这帮助我准确地找到了它发生的地方。它在一个块内抛出异常，默认调试器 GUI 没有给出任何指示……尽管在 Xcode 中使用控制台也可以解决它。

为所有异常设置断点 - 非常有用！了解如何： [Xcode 4 中的“运行 > 在 Objective-C 异常上停止”？](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)

此外，请查看此线程以了解添加到您的应用程序的好方法，以确保您始终获得符号化堆栈跟踪： [Xcode 4.2 debug doesn't symbolicate stack call](https://stackoverflow.com/questions/7841610/xcode-4-2-debug-doesnt-symbolicate-stack-call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:30:11.990

尝试切换`UIImageView`到`UIView`

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.1];
PublicationCoverImageReflectionView.alpha = 0.0;
[UIView commitAnimations]; 
```

# android - 启动器中的动态壁纸首选项

> ID：11586477
> 
> 赞同：3
> 
> 时间：2012-07-20T20:23:59.327
> 
> 标签：android, preferences, live-wallpaper

我正在开发一个动态壁纸（只为我），我不想通过主屏幕上的图标访问我的壁纸首选项。偏好活动已在我的清单中声明，当我添加带有“android.intent.category.LAUNCHER”的意​​图过滤器“android.intent.action.MAIN”时，图标显示。但是当我单击该图标时，它说该应用程序未安装。

# javascript - JavaScript 问题中的画布

> ID：11586478
> 
> 赞同：-3
> 
> 时间：2012-07-20T20:23:59.373
> 
> 标签：javascript, html, canvas

我想知道是否有一种方法可以在页面中间放置一个不可移动的画布对象并让其他几个对象连接到它，但可以移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:11:55.833

除了“页面中心的主要对象通过线条连接到可移动对象”之外，没有任何事情可做，我能做的最好的事情就是将您链接到[这个 SO 答案](https://stackoverflow.com/questions/4270485/drawing-lines-on-html-page)，该答案显示了如何在 Mozilla Firefox 中绘制线条。

功能（在链接腐烂的情况下）是：

```
function DrawLine(x1, y1, x2, y2){

if(y1 < y2){
    var pom = y1;
    y1 = y2;
    y2 = pom;
    pom = x1;
    x1 = x2;
    x2 = pom;
}

var a = Math.abs(x1-x2);
var b = Math.abs(y1-y2);
var c;
var sx = (x1+x2)/2 ;
var sy = (y1+y2)/2 ;
var width = Math.sqrt(a*a + b*b ) ;
var x = sx - width/2;
var y = sy;

a = width / 2;

c = Math.abs(sx-x);

b = Math.sqrt(Math.abs(x1-x)*Math.abs(x1-x)+Math.abs(y1-y)*Math.abs(y1-y) );

var cosb = (b*b - a*a - c*c) / (2*a*c);
var rad = Math.acos(cosb);
var deg = (rad*180)/Math.PI

htmlns = "http://www.w3.org/1999/xhtml";
div = document.createElementNS(htmlns, "div");
div.setAttribute('style','border:1px solid black;width:'+width+'px;height:0px;-moz-transform:rotate('+deg+'deg);position:absolute;top:'+y+'px;left:'+x+'px;');   

document.getElementById("myElement").appendChild(div);

} 
```

该函数由@madox2 编写，通过创建转换元素来工作。您可以扩展他的代码以包含 webkit 浏览器，并在 IE 决定添加它时添加 CSS3 功能。

没有其他事情可做，这是我能做的最好的帮助你。

# html - CSS UL LI 菜单在某些悬停操作后不起作用

> ID：11586483
> 
> 赞同：0
> 
> 时间：2012-07-20T20:24:39.050
> 
> 标签：html, css, menu, hover

`li`我使用 CSS和`ul`标签设计了一个垂直菜单。它工作正常，但只是用于许多提示。一段时间后，悬停效果仅适用于最后一项。
请在此处查看我的项目：http: [//www.saberi.ws/test/](http://www.saberi.ws/test/)
请在左侧菜单（产品、国家/地区...）上移动鼠标以查看实际情况。

[您可以在此处](http://www.saberi.ws/test/css/main.css)查看相关的 CSS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:44:20.453

你`#ticker`正躺在你的导航前面。添加`z-index: 0`到您的`#ticker`并添加`position: relative; z-index: 1`到您的`#container_left_menu`.

这会将您的导航移动到您的股票代码上。是必需的`position: relative`，因为`z-index`它仅适用于`position:absolute`、`position:relative`或`position:fixed`。

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:26:32.377

在我看来，我的解决方案要简单得多。只需添加`overflow: hidden;`到您的`#news`.

# mysql - MySQL - 在内部查询中排序。我错过了什么？

> ID：11586484
> 
> 赞同：1
> 
> 时间：2012-07-20T20:24:42.577
> 
> 标签：mysql, sql, select, inner-join, subquery

我有以下表格和关系：

```
Players:
foreign_key to User  

Users:
foreign_key to City

Cities:
latitude (float)
longitude (float) 
```

我正在尝试获取关联用户来自给定城市或 near_by 城市的所有教授。

我有这个查询，它返回给定特定纬度和经度的 near_by（20 公里）城市以及到给定城市纬度和经度的距离。在这种情况下`latitude = 41.353312 and longitude = 1.976252`：

```
SELECT cities.*,
 6371 *
 acos(cos(radians(41.353312)) *
 cos(radians(cities.latitude)) *
 cos(radians(cities.longitude) - radians(1.976252)) +
 sin(radians(41.353312))*sin(radians(cities.latitude)))
 AS km_away FROM `cities` GROUP BY km_away ASC HAVING km_away <= 20 
```

我已经尝试了这个查询（**它不起作用**），我希望它返回给我的关联用户城市在给定城市附近的玩家（纬度和经度）。

```
SELECT COUNT(*) 
FROM `players` 
INNER JOIN `users` 
    ON `users`.`id` = `players`.`user_id` 
INNER JOIN `cities` 
    ON `cities`.`id` = `users`.`city_id`
WHERE 
(
    cities.id IN 
     (SELECT cities.*,
             6371 *
             acos(cos(radians(41.353312)) *
             cos(radians(cities.latitude)) *
             cos(radians(cities.longitude) - radians(1.976252)) +
             sin(radians(41.353312))*sin(radians(cities.latitude))) AS km_away 
        FROM `cities` 
        GROUP BY km_away ASC 
        HAVING km_away <= 20)
) 
```

我也想要：

1 - 获取按其关联用户城市到给定城市的距离排序的玩家。

2 - 获取返回的每条记录中的距离（值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:09:32.400

我不完全清楚您要返回的结果集。但是看看你的问题，我想你想让你的子查询（+1！用于从巴塞罗那的距离的“大圆距离”计算！）作为行源。

一种方法是将子查询用作“内联视图”，而不是在 WHERE 子句中引用它。

由于该查询返回了城市表中的所有列，因此它基本上可以替换查询中的城市表。

不需要 GROUP BY 子句。当两个城市与给定的纬度/经度等距时，它只会用于从结果集中消除行。（我不相信那是你想要的行为，想要那样并没有错，但这将是非常不寻常的。）

```
SELECT COUNT(*) 
FROM `players` 
INNER JOIN `users` 
    ON `users`.`id` = `players`.`user_id` 
INNER JOIN 
 (SELECT cities.*,
         6371 *
         acos(cos(radians(41.353312)) *
         cos(radians(cities.latitude)) *
         cos(radians(cities.longitude) - radians(1.976252)) +
         sin(radians(41.353312))*sin(radians(cities.latitude))) AS km_away 
    FROM `cities` 
    HAVING km_away <= 20
    ORDER BY km_away
 ) `cd` 
    ON `cd`.`id` = `users`.`city_id` 
```

注意：我已经为该内联视图提供了一个别名`cd`（我将其读作城市距离的简写。

COUNT 聚合将只返回一行，因此不需要 ORDER BY。如果您更改 SELECT 列表，并希望以特定顺序返回行，请在最外层查询中添加 ORDER BY，例如

```
ORDER BY cd.km_away ASC 
```

* * *

**更新：**

您应该能够引用`cities`、`players`、`users`表中的任何列，以及`km_away`SELECT 列表中的计算距离 ( )。当然，您将指定要返回的列，而不是使用“.*”。但是 `cd.km_away' 可以在外部查询中引用（SELECT 列表、WHERE 子句、ORDER BY 等）

```
SELECT cd.km_away
     , cd.*
     , players.*
     , users.*
FROM `players` 
INNER JOIN `users` 
    ON `users`.`id` = `players`.`user_id` 
INNER JOIN 
 (SELECT cities.*,
         6371 *
         acos(cos(radians(41.353312)) *
         cos(radians(cities.latitude)) *
         cos(radians(cities.longitude) - radians(1.976252)) +
         sin(radians(41.353312))*sin(radians(cities.latitude))) AS km_away 
    FROM `cities` 
    HAVING km_away <= 20
    ORDER BY km_away
 ) `cd` 
    ON `cd`.`id` = `users`.`city_id`
 ORDER BY cd.km_away 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:27:39.530

您在 GROUP BY 子句中获得了 ASC。您的意思是使用 ORDER BY。

**编辑** 请原谅我对 mysql 的无知。我更喜欢坚持使用标准方法，尤其是当它们也是最简单的方法时。OP 用粗体字指出“这不起作用”，在阅读整个问题之前，我相信我的答案原始答案可能是问题所在。

```
SELECT
    6371 *
    acos(cos(radians(41.353312)) *
    cos(radians(cities.latitude)) *
    cos(radians(cities.longitude) - radians(1.976252)) +
    sin(radians(41.353312))*sin(radians(cities.latitude))) as km,
    ...
FROM
    players
    INNER JOIN users ON users.id = players. user_id
    INNER JOIN cities ON cities.id = users.city_id
WHERE 
    6371 *
    acos(cos(radians(41.353312)) *
    cos(radians(cities.latitude)) *
    cos(radians(cities.longitude) - radians(1.976252)) +
    sin(radians(41.353312))*sin(radians(cities.latitude)))
    <= 20
ORDER BY
    6371 *
    acos(cos(radians(41.353312)) *
    cos(radians(cities.latitude)) *
    cos(radians(cities.longitude) - radians(1.976252)) +
    sin(radians(41.353312))*sin(radians(cities.latitude)))
    ASC 
```

派生表/虚拟表/内联视图对其进行了一些清理。

```
SELECT cities.km, ...
FROM
    players
    INNER JOIN users ON users.id = players. user_id
    INNER JOIN
        (
        SELECT
            cities.*, /* don't know if this works on mysql */
            6371 *
            acos(cos(radians(41.353312)) *
            cos(radians(cities.latitude)) *
            cos(radians(cities.longitude) - radians(1.976252)) +
            sin(radians(41.353312))*sin(radians(cities.latitude))) as km
        ) as cities /* maybe another name is appropriate */
        ON cities.id = users.city_id
WHERE cities.km <= 20
ORDER BY cities.km ASC 
```

# c# - 如何取消绑定事件处理程序的所有实例？为什么不 -= 删除所有实例？

> ID：11586486
> 
> 赞同：-1
> 
> 时间：2012-07-20T20:24:46.817
> 
> 标签：c#, jquery, events

考虑这个片段：

```
class Foo
{
    public event Action Event;
    public void TriggerEvent()
    {
        if (Event != null) {
            Event();
        }
    }
}

static void Handler()
{
    Console.WriteLine("hi!");
}

static void Main()
{
    var obj = new Foo();
    obj.Event += Handler;
    obj.Event += Handler;
    obj.TriggerEvent();
    Console.WriteLine("---");
    obj.Event -= Handler;
    obj.TriggerEvent();
} 
```

我得到的输出：

```
hi!
hi!
---
hi! 
```

最后一个“嗨！” 出乎意料。要删除它，我必须再打电话`Event -= Handler;`一次。但是如果我不知道处理程序被绑定了多少次怎么办？

**更新：**知道这有点违反直觉的行为背后的原因会很有趣：*为什么*不`-=`删除所有实例？

**更新 2：**我意识到由于与 jQuery 的不同，我发现这种行为违反直觉。

```
var handler = function() { console.log('hi!'); }, obj = {};
$(obj).on("event", handler).on("event", handler).trigger("event");
console.log("---");
$(obj).off("event", handler).trigger("event"); 
```

输出：

```
hi!
hi!
--- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:39:55.460

我想我理解为什么你可能认为你的例子是反直觉的。

考虑这个修改

```
var del = new Action(Handler);
obj.Event += del;
obj.Event += del;
obj.TriggerEvent();
Console.WriteLine("---");
obj.Event -= del;
obj.TriggerEvent(); 
```

它的工作原理与您的完全相同，但为什么呢？

当你使用

```
obj.Event += Handler 
```

编译器在你背后做了一些事情。它创建了`Action(Handler)`三次（两次添加，一次删除）的新实例。在修改中，我们使用完全相同的委托对象。

所以真正的问题是：在你的例子中，为什么删除甚至起作用？您正在传递一个要删除的对象，该对象不用于添加。答案是代表具有价值平等。

```
var del1 = new Action(Handler);
var del2 = new Action(Handler);
Console.WriteLine("Reference equal? {0}, Value equal? {1}", Object.ReferenceEquals(del1, del2), del1.Equals(del2));
// Reference equal? False, Value equal? True 
```

所以现在你可能会想，“为什么要添加两个事件处理程序？不应该只有一个，因为它们是同一个处理程序吗？”

答案是不”。多播委托不关心您是否多次添加相同的处理程序，它不是一个集合，它是一个列表。

当您删除一个处理程序时，它会识别出其列表中有两个相同的处理程序并删除了其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:35:48.947

试试这个解决方案[使用反射删除事件处理程序](http://www.codeproject.com/Articles/103542/Removing-Event-Handlers-using-Reflection)

或者

```
 Delegate[] dellist = myEvent.GetInvocationList();
    foreach (Delegate d in v)
           myEvent-= (d as MyDelegate);//MyDelegate is type of delegate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T23:07:17.197

委托组合您分配给它的所有处理程序。如果您两次分配相同的处理程序，它将被调用两次并且必须被删除两次。我不认为这是违反直觉的。

如果您可以控制定义事件的类，则可以使用类似以下的内容一次删除特定处理程序的所有实例：

```
private Action _Event;

public event Action Event
{
    add
    {
        _Event += value;
    }
    remove
    {
        while (_Event != null && _Event.GetInvocationList().Contains(value))
        {
            _Event -= value;
        }
    }
} 
```

如果您无法控制事件，那么您必须接受`-=`操作员仅删除处理程序的一个实例。这是语言设计的，无法更改。

这就像`List<string>`多次添加相同的字符串。如果要删除该字符串的所有实例，则必须多次调用 Remove 方法。

`Foo`如果您的类将被其他人使用，我不会推荐上面的代码，因为它的行为与任何其他类都不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T20:35:03.100

委托应该在事件中“包装”，例如将实例字段包装在属性中。然后你可以控制它们。

```
public class Test
{
    public class Foo
    {
        private Action _event;
        public event Action Event
        {
            add { _event += value; }
            remove { _event -= value; }
        }

        public void DoEvent()
        {
            if (_event != null)
                _event ();
        }

        public void ClearEvent()
        {
            _event = null;
        }
    }

    static void Handler() {
        Console.WriteLine("hi!");
    }

    static void Main()
    {
        var foo = new Foo();

        foo.Event += Handler;
        foo.Event += Handler;
        foo.DoEvent();
        Console.WriteLine("---");

        foo.ClearEvent();

        foo.DoEvent();

        Console.Read();
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-20T20:27:18.893

```
Event = Delegate.RemoveAll(Event, handler); 
```

请注意，这不是线程安全的，它只能在声明事件的类中工作。

# opencv - opencv的mser的()运算符如何使用

> ID：11586499
> 
> 赞同：3
> 
> 时间：2012-07-20T20:26:32.653
> 
> 标签：opencv, overloading, operator-keyword, mser

我正在使用 opencv MSER 类，无法编译使用 () 运算符。我不是 C++ 专家，所以在这里发布问题，希望有人能提供帮助。

MSER 类的定义包括一个 () 运算符：

```
class CV_EXPORTS_W MSER : public CvMSERParams
{
public:
   ...
    void operator()( const Mat& image,
    CV_OUT vector<vector<Point> >& msers, const Mat& mask ) const;
}; 
```

使用 MSER 类的代码片段：

```
Mat yuv;
vector<vector<Point> > contours;
cv::MSER mser;
mser(yuv, contours, cv::Mat()); 
```

在 mser() 行，xcode 给我这个错误：

```
No matching function for call to object of type 'cv::MSER' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T21:56:33.370

问题在于这条线

```
vector<vector<Point> > contours; 
```

将其更改为

```
vector<vector<cv::Point> > contours; 
```

问题是 Cocoa 框架中已经定义了一个 Point，所以编译器正在寻找一个不存在的操作符版本。

# c# - 如何在没有 Visual Studio 的机器上设置远程调试

> ID：11586500
> 
> 赞同：64
> 
> 时间：2012-07-20T20:26:33.977
> 
> 标签：c#, .net, visual-studio-2010, remote-debugging

有没有办法在没有安装 Visual Studio 的机器上设置远程调试 (Msvscom.exe)？

我想附加到 VM 上运行的服务，以便调试代码中的问题。我以前做过，但两台机器都安装了 VS。

开发框运行 Visual Studio 2010/Windows 7。VM 运行没有 Visual Studio 的 Windows 7。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2014-07-21T18:11:12.010

我将恢复它，因为任何尝试这样做的人都知道每次都非常痛苦，并且它会随着主机/远程系统的每一种可能组合而略有变化。

## Visual Studio 远程工具链接：

1.  [Visual Studio 2010 远程调试器。](https://www.microsoft.com/en-ca/download/details.aspx?id=475)（截至 2016 年 10 月 21 日工作）
2.  [Visual Studio 2013 远程工具](https://www.microsoft.com/en-ca/download/details.aspx?id=44918)（截至 2016 年 10 月 21 日工作）
3.  [Visual Studio 2015 远程工具 x86 - 直接下载链接](https://download.microsoft.com/download/c/8/9/c8986418-b5cb-4692-946e-a9f029c6d369/rtools_setup_x86.exe)
4.  [Visual Studio 2015 远程工具 x64 - 直接下载链接](https://download.microsoft.com/download/1/2/2/1225c23d-3599-48c9-a314-f7d631f43241/rtools_setup_x64.exe)
5.  [Visual Studio 工具（感谢 Robo Burned）](https://www.visualstudio.com/downloads/)
6.  [Visual Studio 2017 Remote Tools x64 - 直接下载链接](https://go.microsoft.com/fwlink/?LinkId=746570&clcid=0x409)（[感谢 Isaac Baker](https://stackoverflow.com/a/44185395/1518546)）
7.  [Visual Studio 2017 Remote Tools x86 - 直接下载链接](https://go.microsoft.com/fwlink/?LinkId=746569&clcid=0x409)（[感谢 Isaac Baker](https://stackoverflow.com/a/44185395/1518546)）
8.  [Visual Studio 2019 远程工具 - 下载链接](https://visualstudio.microsoft.com/downloads/#remote-tools-for-visual-studio-2019)

***这是我今天成功的设置：***

**主机（开发）机器：**
Windows 7 Ultimate SP1 x64。运行 Visual Studio 2010、.NET Framework 4。

**远程机器：**
运行 Windows Embedded Standard 32 位的工业/工厂车间 PC。它看起来/感觉完全像 Windows 7。运行 SP1。未安装 Visual Studio。具有 .NET 框架 4。

**网络：**
两台机器在同一个子网上。我通过 RDP 访问远程机器并以这种方式运行我的应用程序。

**Microsoft-Proprietary Follicle-Deterioration Implementation：**
记下您的开发机器的用户名和密码。出于某种原因，您必须在远程计算机上创建完全相同的用户名和密码。因为微软。

**我是如何做到的：**
我从@sJhonny 提供的链接下载了 Visual Studio 2010 远程调试器。我不得不在那篇文章中关闭 Visual Studio 2013 并切换到 2010。如果你想用细齿梳子浏览 2010 年的文章以找到下载，链接就在“没有人找到这个”旁边有用的”链接在顶部。如果没有，请按照我上面的链接。

在远程机器上安装它并运行配置向导。我为向导保留了默认值：

*   “运行'Visual Studio .....”被选中
*   用户名为 LocalSystem，密码为空
*   只允许本地网络上的计算机....

在远程系统上运行远程调试器，你会看到

> Msvsmon 启动了一个名为 'username@machinename...' 的新服务器

在界面中。到现在为止还挺好。在远程机器上运行应用程序。在开发机器上，Visual Studio 中的 Ctrl+Alt+P 将打开“附加到进程”（它也在工具菜单下）。我收到一个关于我的开发机器的防火墙配置不正确的弹出窗口，并被问到我是否要允许连接等......显然说是。

在限定符框中输入“用户名@机器名”组合...按刷新并祈祷一下。更加努力地祈祷，您应该会看到远程机器上运行的进程列表。选择您的进程并附加到它。

***但是我的断点不起作用！？***他们当然不会……因为在与远程计算机上的应用程序相同的目录中使用断点会很有意义。如果你足够幸运，你会收到有关断点缓存的警告并显示一个带有路径的对话框。

该对话框提到它相对于远程机器是正确的。它在撒谎。它与远程计算机无关，只是它迫使您在那里创建一个与您当前用户同名的全新用户，因为 Microsoft. 要让断点工作，请按照开发机器上的路径（可在工具>选项>调试>符号中自定义：在此目录中缓存符号）并将应用程序的 .pdb 文件复制到该目录。您必须在每个新版本中复制它们，除非有自动执行的选项；我还没有检查，因为我还没有停止庆祝我的远程调试成功。

现在一切都应该正常了。

我希望这可以帮助某人节省多年来我一直试图让它在不同机器上工作的令人眼花缭乱的愤怒时间。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T20:32:23.557

当然有。
您可以在不安装 Visual Studio 的情况下安装 msvsmon。
我自己在几台机器上做过这个。
棘手的部分在于授权——在本地机器上运行 VS 的用户需要远程机器上的特殊权限。
ms有一些解释细节的文章-http : [//msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)，

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-25T16:26:08.833

更新：这里是 2017 年的链接，它们也不明显。

[Visual Studio 远程工具链接 x64 直接链接](https://go.microsoft.com/fwlink/?LinkId=746570&clcid=0x409)

[Visual Studio 远程工具链接 x86 直接链接](https://go.microsoft.com/fwlink/?LinkId=746569&clcid=0x409)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-07T14:18:40.637

取自： [how-to-implement-remote-debugging-in-visual-studio-2005](https://support.microsoft.com/en-us/help/910448/how-to-implement-remote-debugging-in-visual-studio-2005)

> 让我们考虑一个例子来清楚地理解这种情况。莫莉克拉克和亚当巴尔都是 Adventure Works 的员工。Adventure Works 有一个名为 Adventure-works.com 的 Microsoft Windows NT 域。Adam 在使用 Molly 编写的一些软件时遇到了问题。Molly 想在 Adam 的计算机上调试此软件。Molly 和 Adam 遵循以下步骤：
> 
> *   Adam 的计算机上没有远程调试器。为了设置远程调试器，Molly 决定共享她计算机上的 Program Files\Microsoft Visual Studio 8\Common7\IDE\Remote Debugger 目录。她创建了一个名为 Remote 的文件共享。
> *   Adam 运行 \MollyComputerName\Remote\x86\Msvsmon.exe。
> *   远程调试器启动后，Adam 单击“工具”菜单上的“权限”以使用“权限”对话框配置远程调试器。他允许 Molly 进行调试。
>     **注意**Adam 还可以通过在远程调试器启动时传递 /allow 选项来配置远程调试器。
> *   Molly 启动 Visual Studio 2005。
> *   要打开“附加到进程”对话框，Molly 单击“工具”菜单上的“附加到进程”。
> *   Molly 通过在 Qualifier 框中输入 Adventure-works.com\Adam@AdamComputerName 连接到 Adam 的计算机。
> *   在可用进程下，Molly 选择她的应用程序正在使用的工作进程，然后单击附加。
> *   Molly 打开浏览器并向远程应用程序提供 URL。执行停止在应用程序中放置断点的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-06T07:14:14.190

还有另一种我更喜欢的方式（如果你有快速的互联网连接）。

您不必在远程桌面连接上下载或安装任何东西。

1.  `C:`您可以在通过远程桌面连接进行连接时共享您的磁盘。

    [![远程桌面 - 共享本地资源](../Images/69a9290f751af5582e5ccaecf467414b.png)](https://i.stack.imgur.com/KKSbx.png)

2.  在远程桌面上转到位置（取决于您的本地位置）

    ```
    \\tsclient\C\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\Remote Debugger\x64 
    ```

3.  （可选）在桌面上创建文件夹或 msvsmon.exe 的快捷方式

4.  通过共享磁盘从本地磁盘远程运行它。（启动可能需要几秒钟，具体取决于您的连接质量）

选项 2：将 Remote Debugger\x64 或 x86 文件夹复制到远程位置并使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-13T21:18:25.417

我能够让它与 asp.net core 2.1 一起使用，与上述答案的唯一区别是您附加到的进程是 dotnet.exe。

# java - 静态向量相乘 - 没有新对象

> ID：11586503
> 
> 赞同：0
> 
> 时间：2012-07-20T20:26:49.400
> 
> 标签：java, vector, static

有没有办法让一个静态方法返回一个 Vector 对象（具有一个简单的整数 x 和 y 值作为字段），它是一个 Vector 乘以一个 int 值参数。但是，没有创建新的对象，即分配给返回值的对象发生了变化，而不是创建了一个新的 Vector？

以下代码无法实现这一点：

```
public class Vector{
  public int x,y;

  public Vector(int x,int y){
    this.x = x;
    this.y = y;
  }

  //Important code starts

  public static Vector mult(Vector v,int a){
    return new Vector(v.x*a,v.y*a);
  }

  //Important code stops
} 
```

这段代码是我所追求的，但它太乱了：

```
public static Vector mult(Vector v1,Vector v2,int a){
  v1.x = v2.x*a;
  v1.y = v2.y*a;
} 
```

有替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:31:28.857

为什么不添加：

```
public void multiply(Vector otherVector, int a){
  x = otherVector.x * a;
  y = otherVector.y * a;
} 
```

到你的 Vector 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:33:54.253

你的意思是？

```
public void mult(double a) {
    x *= a;
    y *= a;
} 
```

# asp.net - 防止滥用 ASP.net Handler

> ID：11586504
> 
> 赞同：0
> 
> 时间：2012-07-20T20:26:50.267
> 
> 标签：asp.net, security, httphandler

当客户注册网站时，我们想让他们知道用户名/电子邮件是否可用。我们有一个 httphandler 用于提供一个 jquery 脚本，该脚本向客户显示他们想要的用户名/电子邮件是否可用。

问题是：当您在 fiddler 中查看请求时，可以清楚地看到该服务正在被调用。它显示 /emlhandler.asmx?name=xxxxxxxxxxx@yyy.com

从处理程序返回一个简单的 0 或 1 以指示名称/地址是否可用。

我担心的是，这似乎是一个主要的安全问题，对于没有经验的人来说，很容易利用它来发现网站上的所有用户。

那么朋友们，你们如何保护您的站点信息，同时仍然允许 ajax 回调提供良好的用户体验？

谢谢。希思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:37:09.387

你在这里有点偏执。每个允许用户注册的网站都必须做类似的事情。您可以合理地做的一件事是在处理程序的处理过程中增加一点延迟（可能是 2 或 3 秒），以减少暴力攻击的可能性或容易程度。坦率地说，我认为没有人会打扰。

另一种选择是忽略重复的电子邮件并在用户的注册实际激活之前发送验证电子邮件。如果新用户尝试使用现有电子邮件，则原始电子邮件所有者会收到验证并可以取消或忽略它。但我不推荐这个。

我会说我使用过的绝大多数网站都会立即说“这个电子邮件地址已经注册......你忘记密码了吗？” 仅仅知道一个电子邮件地址已在给定站点上使用本身并不代表安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:37:17.683

一种可能的解决方案是仅启用该方法的*POST*请求。

而且，由于未经您的授权，您无法从另一个域（XSS - 跨站点脚本）调用 JavaScript 服务，因此您将受到保护。

然而，这种技术会阻止恶意用户调用您的 Web 服务来发现用户名，但这不会阻止用户自动化一个过程来模拟用户在文本框中输入数据以强制调用服务，在这种情况下，也许您可以在**X**时间内只允许每个用户的多个请求。

您可以跟踪使用`Session`Web 服务中的对象的尝试次数

另一种方法是向您的网站添加[重新验证码](http://www.google.com/recaptcha)，但是如果您过去允许您的用户捕获用户名并且一旦他们写您就调用您的服务，这将降低响应水平。实施将要求您的用户编写自动生成的*验证码*以提交您的数据

# c# - 在 Windows 机器上，有没有办法以编程方式找出哪个应用程序负责打开具有特定扩展名的文件？

> ID：11586510
> 
> 赞同：2
> 
> 时间：2012-07-20T20:27:24.210
> 
> 标签：c#, .net, vb.net

在 Windows 机器上，有没有办法以编程方式找出哪个应用程序负责打开具有特定扩展名的文件？假设我想以编程方式找出哪个应用程序负责打开 .PDF 文件。（不管你是否有 C# 或 VB.NET 代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:35:07.423

命令行命令 ASSOC 查找文件关联，命令 FTYPE 查找分配给它们的操作：

> **C:\> assoc .docx**
> .docx=Word.Document.12
> 
> **C:\> ftype Word.Document.12**
> Word.Document.12="C:\Program Files (x86)\Microsoft Office\Office12\WINWORD.EXE" /n /dde

您可能可以从任何脚本以编程方式调用它们。

在 C# 中，您需要执行以下操作：

```
private string ShellCommand(string command)  
{
  var psi = new ProcessStartInfo("cmd", "/c " + command) {
    RedirectStandardOutput = true,
    CreateNoWindow = true
  };
  var p = Process.Start(psi);
  return p.StandardOutput.ReadToEnd();
}

private string FindDefaultProgram(string extension)
{
   assoc = ShellCommand("assoc " + extension).Split('=')[1];
   program = ShellCommand("ftype " + assoc).Split('=')[1];
   return program;
} 
```

尚未对此进行任何测试，因此请谨慎使用，但这应该可以使您走上正轨。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:45:59.797

好吧，您将首先在以下位置查看注册表：

HKEY_Current_User\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts.pdf\OpenWithList

**从a**开始会有一个或多个键，它们指向用于打开该类型文件的程序：

```
using Microsoft.Win32;
var key = Registry.CurrentUser
    .OpenSubKey("Software")
    .OpenSubKey("Microsoft")
    .OpenSubKey("Windows")
    .OpenSubKey("CurrentVersion")
    .OpenSubKey("Explorer")
    .OpenSubKey("FileExts")
    .OpenSubKey(".doc")
    .OpenSubKey("OpenWithList");

var firstProgram = key.GetValue("a"); // E.g. Winword.exe 
```

您可能希望将分配键拆分为带有空检查的多个语句；-)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T20:36:02.727

我不会给你代码，而是告诉你这些信息存储在哪里——我相信你可以自己找出其余的 :)

因此，所有这些数据都存储在注册表中，在`HKEY_CLASSES_ROOT`. 举`.pdf`个例子，有一个键`.pdf`包含`AcroExch.Document`它的默认值（至少在我的设置中）。

再次，`HKEY_CLASSES_ROOT`有一个键`AcroExch.Document\Shell\Open\Command`，它包含`"C:\Program Files (x86)\Adobe\Acrobat 8.0\Acrobat\Acrobat.exe" "%1"`作为它的值。这就是我的计算机上用来打开 PDF 文件的内容。

# design-patterns - 为什么人们不首先使用 WSDL？

> ID：11586512
> 
> 赞同：2
> 
> 时间：2012-07-20T20:27:33.133
> 
> 标签：design-patterns, interop, wsdl

我目前正在做一个处理 Web 服务的演示文稿。

我们使用**WSDL+XSD-first**方法创建了我们的服务，其中我们首先创建（借助工具）XSD 模式和 WSDL，然后编译为 .NET 和 Java 类以进行互操作。

我想证明我们为什么使用这种方法。我提到它更符合 OOP（首先定义接口，然后是实现，反之亦然），并且您可以更好地控制互操作性约束。此外，您可以显式定义命名空间并帮助跨应用程序重用 XSD

相反，今天仍然有很多人更喜欢在他们的 IDE 中实现代码并从那里生成 WSDL。问题是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:36:37.397

我不同意——我认为这与表达合同有关，而不是开发便利。

而且我认为 WSDL 应该从 .xsd 生成。

[Spring Web 服务页面对“契约优先”](http://static.springsource.org/spring-ws/site/reference/html/why-contract-first.html) Web 服务进行了很好的讨论。阅读它，看看你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:02:49.400

两种开发风格都有[优点和缺点](https://www.developer.com/design/enterprise-java-contract-first-vs-contract-last-web-services/)，但我不认为最后契约被更多地使用只是因为它对新手来说更容易和更快，正如你所说，但主要是因为随着工具和框架的发展，WSDL 很快进入了目录中的内容[管道代码](http://answers.yahoo.com/question/index?qid=20070627052141AArmGF1)，报价：

> [...] 在应用程序和较低层之间架起桥梁的幕后低级代码。这些东西的编码通常是相当枯燥和重复的，但它是使系统工作所必需的。

没有人愿意编写无聊、重复的代码，尤其是当有大量工具和框架可以为您编写代码时。如果您甚至不必了解 SOAP、WSDL 或 XSD，那对某些人来说甚至更好……或者我应该说“魔术”……但这[是一个不同的讨论](http://www.joelonsoftware.com/articles/LeakyAbstractions.html):)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:27:33.133

不确定我的自我回答是否是唯一的答案，但这就是我所知道的

## 因为它对新手开发者来说更​​容易、更快捷

只是人们并不都喜欢学习新语言，但他们更喜欢使用他们掌握的语言，无论他们的产品是否无法与来自其他平台的客户一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T20:37:43.843

当我创建 web 服务时（我们主要使用 JBoss，它有一个很好的内置 web 服务系统）我总是首先定义一般意义上的交互，但不是在 XML 中，我不是特别喜欢自己编写 XML。这是一种丑陋、冗长的语言。所以我所做的就是将我的响应和参数映射为 Java 对象，然后对它们进行适当的注释，然后一旦我部署了应用程序，我就神奇地拥有了一个 Web 服务，而无需编写 XML。WSDL 和 XSD 有点冗长，JBoss 为我生成的内容并不比我过去自己编写的要好，而且可以说它节省了大量时间。您不必在此时实现服务，只需响应和输入数据结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T16:56:13.637

当涉及到 wsdl 时，总是有一些充分的理由来执行 Contract-First。

关于人们为什么不这样做的简单答案是，简单地拥有 Visual Studio 或 Apache CXF 或您正在使用的任何 Web 服务实现为您生成一个的工作量较少。

前面很容易，但后面会变得一团糟。

**可移植性**

其中之一是您依赖生成的 wsdl 可以被许多不同的来源使用。通常，由 Visual Studio 或 Apache CXF 生成的 wsdl 会产生问题。

Sun 的 SOAP 实现倾向于生成包含“参数”作为消息部分名称的 wsdl，即使当 Visual Studio 尝试将服务用作 Web 引用时这会导致错误。Visual Studio 的实现也有一些已知的怪癖，在某些情况下使用他们的服务的人必须手动调整这些怪癖。

事实上，Java 和 C# 都提供了通过手动调整的方式覆盖自动生成的 wsdl 的方法。

**稳定**

Contract-Last 意味着您的代码生成合同。这也意味着更难避免错误地更改 API。另一方面，如果您自己生成 WSDL（这并不难）并编写 XSD（这也不难——而且在我看来比 Java 中的 JAXB 类更容易正确），那么您执行合同。合同更改时是明确的。

**版本控制**

由于在 Contract-First 中，当您更改合同时是明确的，因此您可以在命名空间中对其进行版本化，这意味着发送不同版本时会变得非常清楚。因此，可以防止旧客户端尝试使用新消息，如果您进行了重大更新，这可能很有用。

这可以节省很多工时。

# html - 更改网址名称

> ID：11586515
> 
> 赞同：1
> 
> 时间：2012-07-20T20:27:37.143
> 
> 标签：html, css, .htaccess

如何将 url 更改为您想要的名称？例如，像[这个网站](http://www.lottanieminen.com/graphic-design/ki-kinnunen-book/)，我想将我的域 url 从更改`ahardenjr.com/project.html`为 just `ahardenjr.com/project`。

我以为它是基本标签，但是当我添加 时`<base href="http://www.ahardenjr/project"/>`，CSS 就中断了。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T20:30:57.877

看起来你正在尝试做一个基本的`mod_rewrite`. 像这样的东西：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:30:01.477

一个简单的解决方案是创建一个名为“project”的子目录，然后将“project.html”作为您的索引文件。我相信这应该可以解决问题。

# javascript - 在 Raphael 中复制 d3.js 动态树

> ID：11586517
> 
> 赞同：4
> 
> 时间：2012-07-20T20:27:43.177
> 
> 标签：javascript, svg, raphael, d3.js

我想使用[Raphael复制这个 D3js](http://raphaeljs.com/)[动态树示例](http://bl.ocks.org/1061834)。我无法在 IE8 中使用此示例，因为它不支持 SVG。我需要找到解决这个问题的方法。

我已经在使用[d34raphael](http://webmonarch.github.com/d34raphael/)进行了尝试，但是除了几个基本示例之外，我没有太多文档可以让我工作。

任何有关如何将此动态树转换为 Raphael 的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:26:32.767

[您可以使用Protovis](http://mbostock.github.com/protovis/)构建此可视化。[Protovis 页面页面上的示例不是动态的，但](http://mbostock.github.com/protovis/ex/dendrogram.html)[在测试中](https://github.com/mbostock/protovis/blob/master/tests/layout/tree-toggle.html)有一些动态树的示例。

Protovis 通过 VML 渲染插件对 MSIE 7/8 提供了很好的支持：[Protovis-MSIE](https://github.com/DataMarket/protovis-msie)（免责声明：我是本文的作者）。

# python - Python从文本文件中的定义中替换单词

> ID：11586521
> 
> 赞同：1
> 
> 时间：2012-07-20T20:27:50.873
> 
> 标签：python, file

我有一个为 cobol 编写的旧的 informix 数据库。所有字段都在代码中，所以我的 SQL 查询看起来像。

```
SELECT uu00012 FROM uu0001; 
```

这很难读。

我有一个包含字段定义的文本文件，例如

```
uu00012 client
uu00013 date
uu00014 f_name
uu00015 l_name 
```

我想将代码换成更英文的名称。可能在其上运行 python 脚本并保存一个包含英文名称的文件。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:34:25.540

如果每件作品绝对是一个单独的词，`re.sub`那么绝对是这里的路：

```
#create a mapping of old vars to new vars.
with open('definitions') as f:
    d = dict( [x.split() for x in f] )

def my_replace(match):
    #if the match is in the dictionary, replace it, otherwise, return the match unchanged.
    return d.get( match.group(), match.group() )

with open('inquiry') as f:
    for line in f:
        print re.sub( r'\w+', my_replace, line ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:35:23.240

从概念上讲，

我可能会首先建立一个编码映射 -> 英语（在内存或 o.

然后，对于地图中的每个编码，扫描您的文件并替换为对应的英文对应代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:35:38.173

```
infile = open('filename.txt','r')
namelist = []
for each in infile.readlines():
    namelist.append((each.split(' ')[0],each.split(' ')[1])) 
```

这将为您提供键值对列表

我不知道你想对那里的结果做什么，你需要更明确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:01:46.723

```
import re

f = open("dictfile.txt")

d = {}
for mapping in f.readlines():
    l, r = mapping.split(" ")
    d[re.compile(l)] = r.strip("\n")

sql = open("orig.sql")
out = file("translated.sql", "w")

for line in sql.readlines():
    for r in d.keys():
        line = r.sub(d[r], line)
    out.write(line) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T20:38:45.113

```
dictionary = '''uu00012 client
uu00013 date
uu00014 f_name
uu00015 l_name'''

dictionary = dict(map(lambda x: (x[1], x[0]), [x.split() for x in dictionary.split('\n')]))

def process_sql(sql, d):
    for k, v in d.items():
        sql = sql.replace(k, v)
    return sql

sql = process_sql('SELECT f_name FROM client;', dictionary) 
```

构建`dictionary`：

```
{'date': 'uu00013', 'l_name': 'uu00015', 'f_name': 'uu00014', 'client': 'uu00012'} 
```

然后通过你的 SQL 运行并用编码的东西替换人类可读的值。结果是：

```
SELECT uu00014 FROM uu00012; 
```

# android - SurfaceView 以及添加和删除其他视图

> ID：11586522
> 
> 赞同：0
> 
> 时间：2012-07-20T20:28:01.607
> 
> 标签：android, views, surfaceview

我正在尝试创建一个基于 2D 游戏框架的简单游戏，如 Mario Zechner 的 2011 Apress 书籍“开始 Android 游戏”中所述。也许这有帮助，也许没有，但不管怎样：

整场比赛我只有一项活动。一切都渲染到位图上，然后发送到 SurfaceView，发送到 SurfaceView 的内容将根据游戏所在的屏幕而改变。

我想实现一个简单的高分系统，让用户在主菜单屏幕上的 EditView 中输入他们的名字。我已经能够将 SurfaceView 和 EditView 与 RelativeLayout 结合起来，但问题是一旦用户移过主菜单屏幕就摆脱了 EditView。

这门课还有更多内容，但这里有一个我认为重要的片段：

```
 public abstract class AndroidGame extends Activity implements Game{
      public EditText et;
      public RelativeLayout rl;

      public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        et = new EditText(this);
        renderView = new AndroidFastRenderView(this, frameBuffer);

        rl = new RelativeLayout(this);
        rl.addView(renderView);
        rl.addView(et);
        setContentView(rl);
      }
    } 
```

以上是游戏的唯一活动。AndroidFastRenderView 类扩展了 SurfaceView。我遇到的问题是，虽然我需要 SurfaceView 在整个游戏中持续存在，但我需要 EditText 只持续一小段时间，然后根据触摸事件消失。

我尝试从我的 MainMenuScreen 类中调用 RelativeLayout.removeView(et)，它负责构造发送到 SurfaceView 的位图以及监听触摸事件。但是我得到一个未捕获的异常，说我无法编辑在另一个线程中定义的视图。

我很抱歉这本小说，但我已经尝试自己解决这个问题好几个小时了，但没有运气。我觉得这是一件非常简单的事情，我只是没有得到。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:45:20.607

嗯...我认为只有 UI Thread 可以添加和删除视图。尝试像这样调用线程：

```
runOnUiThread(new Runnable(){
    public void run() {
        /* STUFF To do in Thread */
        //Delete the view...
        rl.removeView(et);
}}); 
```

希望能帮助到你 ：）

# java - Apache-commons-net lib (Java) 的受控日志记录

> ID：11586524
> 
> 赞同：5
> 
> 时间：2012-07-20T20:28:04.620
> 
> 标签：java, ssl, ftp, apache-commons-net, ftps

我有一个非常小的 Java 程序，它能够使用 apache-commons-net 库通过 SSL（不是 SFTP）或 FTPS 执行 FTP。我写这个程序的原因是客户端机器是 AIX 5.3，它不支持 FTP over SSL ( [OOTB](http://en.wikipedia.org/wiki/Out_of_the_box) )，而 FTP 主机运行 FileZilla 服务器，只启用了 FTP over SSL。该程序运行良好，没有任何问题，但它生成的日志量很大。我的问题是 -**有没有办法控制记录的数量**？

（**再次注意**- 该程序非常适合我的简约要求）

下面是我的代码片段

```
import java.io.*;
import java.text.MessageFormat;
import java.util.logging.Logger;
import org.apache.commons.
.....
....
....
try {
            int reply;
            logger.info("# Invoking Trust Manager");
            client.setTrustManager(TrustManagerUtils.getAcceptAllTrustManager());
            //client.setTrustManager(TrustManagerUtils.getValidateServerCertificateTrustManager());
            logger.info("# Connect Call");
            client.connect(server, port);
            client.login(username, password);
            logger.info("# Login Success");

            client.setFileType(FTP.ASCII_FILE_TYPE);
            client.execPBSZ(0); // Set protection buffer size
            client.execPROT("P"); // Set data channel protection to private
            client.enterLocalPassiveMode();

            logger.info(MessageFormat.format("Connected to {0} .", server));
            reply = client.getReplyCode();
            if (!FTPReply.isPositiveCompletion(reply)) {
                client.disconnect();
                logger.severe("FTP server refused connection.");
                System.exit(1);
            }

            if (flag.equals("-d")) { //Dir mode
                if (args.length == 7){
                    renameFile = args[6]; //copy rename token
                }
                //We will get the file listing and stream the output to create files
                logger.info("# Invoked Directory mode");
                client.changeWorkingDirectory(remoteFile);
                FTPFile[] ftpFiles;
                ftpFiles = client.listFiles(remoteFile);
                if (ftpFiles != null && ftpFiles.length > 0) {                    
                    for (FTPFile file : ftpFiles) {
                        if (!file.isFile()) {
                            continue;
                        }                        
                        InputStream fin = client.retrieveFileStream(remoteFile + "/" + file.getName());
                        if (fin == null) {
                            logger.severe(MessageFormat.format("could not retrieve file: {0}", file.getName()));
                            continue;
                        }
                        // write the inputStream to a FileOutputStream
                        OutputStream out = new FileOutputStream(new File(localFile + "/"+ renameFile + file.getName()));
                        int read = 0;
                        byte[] bytes = new byte[1024];

                        while ((read = fin.read(bytes)) != -1) {
                            out.write(bytes, 0, read);
                        }
                        fin.close();
                        out.flush();
                        out.close();
                        fin = null;
                        client.completePendingCommand();
                    }
                }
            }

            if (flag.equals("-f")) { //File mode
                //Transfer a single file
                logger.info("# Invoked File mode");
                client.listFiles();
                boolean retrieved = client.retrieveFile(remoteFile, new FileOutputStream(localFile));

                if (retrieved) {
                    logger.info("# File copied.");
                }
            }
        } catch (Exception e) {
            if (client.isConnected()) {
                try {
                    client.disconnect();
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
            logger.severe("!! Could not connect to server.!! Please retry!");
            e.printStackTrace();            
        } finally {
            client.disconnect();            
            logger.info("# FTP Client disconnected");
            System.exit(0);
        } 
```

它为传输一个文件而生成的日志如下所示 -

```
Jul 20, 2012 5:00:08 AM com.mff.ftps.FTPSSLTool main
INFO: Connecting to IP: 216.153.173.246 on Port: 00890
Jul 20, 2012 5:00:09 AM com.mff.ftps.FTPSSLTool main
INFO: # Initiating SSL connection
Jul 20, 2012 5:00:09 AM com.mff.ftps.FTPSSLTool main
INFO: # Invoking Trust Manager
Jul 20, 2012 5:00:09 AM com.mff.ftps.FTPSSLTool main
INFO: # Connect Call
IBMJSSEProvider2 Build-Level: -20110513
keyStore is: /usr/java6_64/jre/lib/security/cacerts
keyStore type is: jks
keyStore provider is: 
init keystore
SSLContextImpl:  Using X509ExtendedKeyManager com.ibm.jsse2.xc
SSLContextImpl:  Using X509TrustManager org.apache.commons.net.util.TrustManagerUtils$TrustManager
Installed Providers = 
    IBMJSSE2
    IBMJCE
    IBMJGSSProvider
    IBMCertPath
    IBMSASL
    IBMXMLCRYPTO
    IBMXMLEnc
    Policy
    IBMSPNEGO
JsseJCE:  Using SecureRandom  from provider IBMJCE version 1.2
trigger seeding of SecureRandom
done seeding SecureRandom
IBMJSSE2 to send SCSV Cipher Suite on initial ClientHello
JsseJCE:  Using cipher AES/CBC/NoPadding from provider TBD via init 
IBMJSSE2 will allow RFC 5746 renegotiation per com.ibm.jsse2.renegotiate set to none or default
IBMJSSE2 will not require renegotiation indicator during initial handshake per com.ibm.jsse2.renegotiation.indicator set to OPTIONAL or default taken
IBMJSSE2 will not perform identity checking against the peer cert check during renegotiation per com.ibm.jsse2.renegotiation.peer.cert.check set to OFF or default
JsseJCE:  Using MessageDigest MD5 from provider IBMJCE version 1.2
JsseJCE:  Using MessageDigest SHA from provider IBMJCE version 1.2
JsseJCE:  Using MessageDigest MD5 from provider IBMJCE version 1.2
JsseJCE:  Using MessageDigest SHA from provider IBMJCE version 1.2
%% No cached client session
*** ClientHello, SSLv3
RandomCookie:  GMT: 1342778411 bytes = { 246, 135, 47, 123, 204, 170, 94, 224, 76, 244, 28, 242, 63, 243, 124, 13, 93, 156, 170, 88, 91, 79, 89, 55, 157, 135, 214, 250 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_AES_128_CBC_SHA, SSL_DHE_RSA_WITH_AES_128_CBC_SHA, SSL_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_RC4_128_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_RSA_FIPS_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, SSL_RENEGO_PROTECTION_REQUEST]
Compression Methods:  { 0 }
***
main, WRITE: SSLv3 Handshake, length = 81
main, READ: SSLv3 Handshake, length = 74
*** ServerHello, SSLv3
RandomCookie:  GMT: 1342778410 bytes = { 142, 39, 57, 18, 38, 123, 184, 245, 24, 29, 238, 158, 68, 17, 226, 210, 53, 31, 36, 225, 52, 166, 78, 116, 251, 98, 122, 4 }
Session ID:  {143, 221, 201, 170, 184, 190, 241, 94, 223, 253, 199, 199, 50, 161, 233, 224, 88, 78, 82, 162, 13, 222, 236, 56, 215, 253, 101, 12, 39, 45, 126, 203}
Cipher Suite: SSL_RSA_WITH_RC4_128_MD5
Compression Method: 0
***
Server did not supply RI Extension - com.ibm.jsse2.extended.renegotiation.indicator=optional or default - processing will continue
%% Created:  [Session-1, SSL_RSA_WITH_RC4_128_MD5]
** SSL_RSA_WITH_RC4_128_MD5
main, READ: SSLv3 Handshake, length = 1361
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=ftps.thillsecure.com, OU=Terms of use at www.verisign.com/rpa (c)05, OU=Thill Logistics, O=TCFC LLC, L=Neenah, ST=Wisconsin, C=US
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  IBMJCE RSA Public Key:
modulus:134055911103149706293270567805752446004906288958857850
public exponent:
65537

  Validity: [From: Sun Dec 04 18:00:00 CST 2011,
               To: Wed Dec 12 17:59:59 CST 2012]
  Issuer: CN=VeriSign Class 3 Secure Server CA - G3, OU=Terms of use at https://www.verisign.com/rpa (c)10, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US
  SerialNumber: [168622087069244624687861365106323602194]
....
....
....
Hundreds and hundreds of more lines 
```

I am using `java.utils.logging.Logger` for my own logging purpose, but the lines of logs are getting obfuscated by the numerous lines of log being generated by the `apache-commons-net` library methods itself.

So again- The question is - "Is there a way to control this logging behavior of the `apache-commons-net` library itself? Any method I can use or any flag that needs to be set??"

**UPDATE:**

I finally got to control the logging (Special thanks to [Flavio](https://stackoverflow.com/users/472393/flavio)). All I had to do was include `System.setProperty("javax.net.debug", "false");` in my code. I had it set initially as `System.setProperty("javax.net.debug", "ssl");` which enabled debug level logging. Now the logs are much shorter and precise. It was also apparent that the logs weren't from commons-net library after all, but from the `javax.net`. The log is much shorter and looks something like below-

```
Jul 30, 2012 9:03:16 AM com.mff.ftps.FTPSSLTool main
INFO: Connecting to IP: xxx.xxx.xxx.xxx on Port: 890
Jul 30, 2012 9:03:16 AM com.mff.ftps.FTPSSLTool main
INFO: # Initiating SSL connection
Jul 30, 2012 9:03:16 AM com.mff.ftps.FTPSSLTool main
INFO: # Invoking Trust Manager
Jul 30, 2012 9:03:16 AM com.mff.ftps.FTPSSLTool main
INFO: # Connect Call
220 GlobalSCAPE Secure FTP Server
USER XXXXXXX
331 Password required for XXXXXXX.
PASS XXXXXXXXX
230 Login OK. Proceed.
Jul 30, 2012 9:03:22 AM com.mff.ftps.FTPSSLTool main
INFO: # Login Success
TYPE A
200 Type set to A.
PBSZ 0
200 PBSZ Command OK. Protection buffer size set to 0.
PROT P
200 PROT Command OK. Using Private data connection
Jul 30, 2012 9:03:24 AM com.mff.ftps.FTPSSLTool main
INFO: Connected to xxx.xxx.xxx.xxx .
CWD /Data/Inv
Jul 30, 2012 9:03:24 AM com.mff.ftps.FTPSSLTool main
INFO: # Invoked Directory mode
250 Folder changed to "/Data/Inv".
SYST
215 UNIX Type: L8
PASV
227 Entering Passive Mode (216,153,173,246,109,220).
LIST /Data/Inv
150 Opening ASCII mode data connection for file list.
226 Transfer complete. 1430 bytes transferred. 1278 Bps.
Jul 30, 2012 9:03:30 AM com.mff.ftps.FTPSSLTool main
INFO: # FTP Client disconnected 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:14:58.583

I think you are looking in the wrong place; those messages are not from the apache commons net library.

I think they are from the `IBMJSSEProvider2` you see referred in the first lines. According to this [link](http://www-01.ibm.com/support/docview.wss?uid=nas181d818cfd300009b8625768e006cfb33), you should be able to disable them by *not* setting the system property **javax.net.debug**, or redirect them with the **os400.stdout** and **os400.stderr** properties.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:48:37.333

You can set the log level of your application using `setLevel()`. The class `Level` is used to define which messages should be written in the log. You can set one of the following Log Levels:

*   `Level.SEVERE` (highest level)
*   `Level.WARNING`
*   `Level.INFO`
*   `Level.CONFIG`
*   `Level.FINE`
*   `Level.FINER`
*   `Level.FINEST`

If you use `LOGGER.setLevel(Level.INFO)`, every log level higher or equal `INFO` will be written in the log, *i.e*, `SEVERE, WARNING and INFO`. Also, you have the levels `Level.OFF` and `Level.ALL` to turn the logging off or to log everything.

Add to your application a higher log level, such as `logger.setLevel(Level.SEVERE)`.

**Example**

```
public void writeLog() {
    // Set the LogLevel to Severe, only severe Messages will be written
    LOGGER.setLevel(Level.SEVERE);
    LOGGER.severe("Severe Log");
    LOGGER.warning("Warning Log");
    LOGGER.info("Info Log");
    LOGGER.finest("Really not important");

    // Set the LogLevel to Info, severe, warning and info will be written
    // Finest is still not written
    LOGGER.setLevel(Level.INFO);
    LOGGER.severe("Severe Log");
    LOGGER.warning("Warning Log");
    LOGGER.info("Info Log");
    LOGGER.finest("Really not important");
} 
```

More information: [http://www.vogella.com/articles/Logging/article.html](http://www.vogella.com/articles/Logging/article.html)

P.S. be careful with your `logging.properties` file which sets your [global log level](https://stackoverflow.com/questions/470430/java-util-logging-logger-doesnt-respect-java-util-logging-level).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:59:00.157

Well, I've had the same issue with Spring, Quartz, Hibernate etc. APIs and frameworks creating huge boulders of logs.

I set custom levels for each of the APIs on a per package basis.

*   logger.org.spring = WARN
*   logger.org.hibernate = DEBUG
*   logger.org.quartz = INFO
*   logger.com.myApp = DEBUG

Of course this is not the complete property set, but you get the idea. You could use the package name - org.apache.commons and assign a log level to that package. Please note : Any and every log from any class under that package level would be configured with the same level as this.

I used slf4j over log4j ( [http://www.slf4j.org/](http://www.slf4j.org/)) , instead of util logger. But I'm sure the fix could be twisted a bit in your situation. If I might be a little bold, I'd recommend using SLF4J. HTH.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T10:23:10.857

expect the `apache-commons-net` logging to use either `commons-logging` or `SLF4J` - in the absence of any other controlling factors, these should route logging to `java.util.logging`.

The ultimate answer here is that IF you're seeing the logs intermixed in an output file (not console), then it is highly likely that they ARE being routed through a common logger. And `java.lang.logging` is at work here, so let's try configuration.

To configure `java.util.logging`:

Create your logging properties file, say `myLog.properties`, and customize levels for the different packages. For example, set a level higher than INFO - such as SEVERE - for the obnoxious package `com.mff.ftps`:

```
# handlers=java.util.logging.ConsoleHandler, java.util.logging.FileHandler
handlers=java.util.logging.FileHandler

# Set ROOT logger level
.level=INFO
com.mff.ftps.level=SEVERE
# Set any number specifications: <package.path>.level=<LOGLEVEL>

java.util.logging.ConsoleHandler.level=WARNING
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter

java.util.logging.FileHandler.level=FINEST
java.util.logging.FileHandler.pattern=myLogFile.log
java.util.logging.FileHandler.limit=1073741824  # 1MB
java.util.logging.FileHandler.count=2
java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter 
```

When you start java, specify the logging properties file:

> java `-Djava.util.logging.config.file=<pathTo>/myLog.properties` -cp ...

or write code:

```
File logPropFile = new File("<pathTo>/myLog.properties");
InputStream logPropStream = new FileInputStream(logPropFile);
try {
    LogManager.getLogManager().readConfiguration(logPropStream);
}
finally {
    logPropStream.close();
} 
```

# javascript - 使用 Projection 在 Three.js 中将世界坐标转换为屏幕坐标

> ID：11586527
> 
> 赞同：38
> 
> 时间：2012-07-20T20:28:31.797
> 
> 标签：javascript, 3d, three.js

关于 Three.js 中的非投影有几个很好的堆栈问题（[1、2](https://stackoverflow.com/questions/11036106/three-js-projector-and-ray-objects) [）](https://stackoverflow.com/questions/7956442/detect-clicked-object-in-three-js)，即如何将浏览器中的 (x,y) 鼠标坐标转换为 Three.js 画布空间中的 (x,y,z) 坐标。他们大多遵循这种模式：

```
 var elem = renderer.domElement, 
        boundingRect = elem.getBoundingClientRect(),
        x = (event.clientX - boundingRect.left) * (elem.width / boundingRect.width),
        y = (event.clientY - boundingRect.top) * (elem.height / boundingRect.height);

    var vector = new THREE.Vector3( 
        ( x / WIDTH ) * 2 - 1, 
        - ( y / HEIGHT ) * 2 + 1, 
        0.5 
    );

    projector.unprojectVector( vector, camera );
    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );
    var intersects = ray.intersectObjects( scene.children ); 
```

我一直试图做相反的事情——而不是从“屏幕到世界”空间，而是从“世界到屏幕”空间。如果我知道 Three.js 中对象的位置，我如何确定它在屏幕上的位置？

这个问题似乎没有任何已发布的解决方案。[关于这个的另一个问题刚刚出现在 Stack 上](https://stackoverflow.com/questions/11534000/three-js-converting-3d-position-to-2d-screen-position)，但作者声称已经用一个对我不起作用的函数解决了这个问题。他们的解决方案不使用投影射线，我很确定由于 2D 到 3D 使用 unprojectVector()，3D 到 2D 解决方案将需要 projectVector()。

Github 上也有[这个问题。](https://github.com/mrdoob/three.js/issues/899)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-23T00:00:50.680

试试这个：

```
var width = 640, height = 480;
var widthHalf = width / 2, heightHalf = height / 2;

var vector = new THREE.Vector3();
var projector = new THREE.Projector();
projector.projectVector( vector.setFromMatrixPosition( object.matrixWorld ), camera );

vector.x = ( vector.x * widthHalf ) + widthHalf;
vector.y = - ( vector.y * heightHalf ) + heightHalf; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-04-19T01:26:17.870

对于现代 Three.js (r75)，可以将矢量投影到屏幕上：

```
var width = window.innerWidth, height = window.innerHeight;
var widthHalf = width / 2, heightHalf = height / 2;

var pos = object.position.clone();
pos.project(camera);
pos.x = ( pos.x * widthHalf ) + widthHalf;
pos.y = - ( pos.y * heightHalf ) + heightHalf; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-10-31T18:31:08.600

对于每个获取`deprecated`或`warnings`记录的人，可接受的答案是针对较旧的 Three.js 版本。现在更容易了：

```
let pos = new THREE.Vector3();
pos = pos.setFromMatrixPosition(object.matrixWorld);
pos.project(camera);

let widthHalf = canvasWidth / 2;
let heightHalf = canvasHeight / 2;

pos.x = (pos.x * widthHalf) + widthHalf;
pos.y = - (pos.y * heightHalf) + heightHalf;
pos.z = 0;

console.log(pos); 
```

# c++ - 如何在 C++ 中使用 std::string？

> ID：11586536
> 
> 赞同：1
> 
> 时间：2012-07-20T20:29:54.727
> 
> 标签：c++, string, algorithm

**我会知道在不**使用 boost的情况下使用 std::string 的最佳方法和最简单的方法。

例如如何转换这个字符串

```
"  a   b          c  d     e '\t' f      '\t'g" 
```

在

```
"a b c d e f g" 
```

假设 '\t' 是一个正常的表格。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T20:51:14.020

使用字符串流的惰性解决方案：

```
#include <string>
#include <sstream>

std::istringstream iss(" a b c d e \t f \tg");
std::string w, result;

if (iss >> w) { result += w; }
while (iss >> w) { result += ' ' + w; }

// now use `result` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:47:24.177

您没有定义“epur”的含义，但该示例使其看起来像您想要的是删除前导（和尾随？）空格并用单个空格替换内部空格。现在您可以使用 std::replace_if、std::uniqiue 和 std::copy_if 的组合来执行此操作，但这非常复杂，并且最终会多次复制数据。如果你想用一次就地完成，一个简单的循环可能是最好的：

```
void epur(std::string &s)
{
  bool space = false;
  auto p = s.begin();
  for (auto ch : s)
    if (std::isspace(ch)) {
      space = p != s.begin();
    } else {
      if (space) *p++ = ' ';
      *p++ = ch;
      space = false; }
  s.erase(p, s.end());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:49:37.213

看起来您想`\t`从字符串中删除字符。您可以通过复制不`\t`如下的字符来做到这一点：

```
#include <iostream>
#include <string>
#include <algorithm>
#include <iterator>

int main() 
{
  std::string s1( "a b c \t d e f \t" );
  std::string s2;

  std::copy_if( std::begin(s1), 
                std::end(s1), 
                std::back_inserter<std::string>(s2),
                [](std::string::value_type c) {
                    return c != '\t';
                } );

  std::cout << "Before: \"" << s1 << "\"\n";
  std::cout << "After: \"" << s2 << "\"\n";
} 
```

输出：

```
Before: "a b c   d e f  "
After: "a b c  d e f " 
```

如果要从字符串中删除所有空格，请将`return`语句替换为

```
return !std::isspace(c); 
```

（*isspace*在标头*cctype*中）

# android - 无法更改 onClick 中的变量

> ID：11586540
> 
> 赞同：1
> 
> 时间：2012-07-20T20:30:10.967
> 
> 标签：android, button, onclick

我正在尝试使用 an`int`打开不同的图表。我希望它`int`在按下按钮时改变值，但它没有改变。这是我的代码：

```
public class PatientDemographics extends Activity
{
    private GraphicalView mChartView;
    int num = 1;
    int tabnum = 0;
    int finalnum;

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabviews);

        LinearLayout ll = (LinearLayout) findViewById(R.id.buttons);

        Button button1 = new Button(this);
        button1.setText("Disease Type");
        ll.addView(button1);
        button1.setOnClickListener( new View.OnClickListener()
        {
            public void onClick(View v)
            {
                num = 1;
                Intent i = new Intent(PatientDemographics.this, TabHelper.class);
                i.putExtra("num", tabnum);
                startActivity(i);   
            }
        });

        Button button2 = new Button(this);
        button2.setText("Gender");
        ll.addView(button2);
        button2.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                num = 2;
                Intent i = new Intent(PatientDemographics.this, TabHelper.class);
                i.putExtra("num", tabnum);
                startActivity(i);
            }
        });

        Button button3 = new Button(this);
        button3.setText("Age at Diagnosis");
        ll.addView(button3);
        button3.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                num = 3;
                Intent i = new Intent(PatientDemographics.this, TabHelper.class);
                i.putExtra("num", tabnum);
                startActivity(i);
            }
        });

        Button button4 = new Button(this);
        button4.setText("Treatment Status");
        ll.addView(button4);
        button4.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                num = 4;
                Intent i = new Intent(PatientDemographics.this, TabHelper.class);
                i.putExtra("num", tabnum);
                startActivity(i);
            }
        });     
    }
} 
```

请忽略`tabnum`。它用于确定所有内容所在的选项卡，它是相同的。此外，我最初使用 xml 创建按钮，但每个选项卡需要不同数量的按钮，我不知道如何做到这一点，所以我只是用代码制作它们。

您可以看到我初始化`num`为`1`，然后尝试在`onClick`方法中更改它，但它永远不会改变。如果您需要更多信息，请告诉我。

**编辑：**

```
protected void onSaveInstanceState(Bundle outState)
{
      outState.putInt("num", num);
      super.onSaveInstanceState(outState);
} 
```

然后在 onCreate 中：

```
 super.onCreate(savedInstanceState);
    if(savedInstanceState != null)
    {
        num = savedInstanceState.getInt("num");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:57:20.127

由于单击按钮，您将启动一个`Activity`相同类型的新文件。在 new`Activity`中，变量被初始化为 1。如果你想在 new 中使用新值`Activity`，你应该从 中获取它并在 的方法中`Intent`分配变量。`onCreate()``Activity`

您应该将这样的内容添加到`onCreate()`：

```
num = (int)this.getIntent().getExtras().get("num"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:56:59.970

我认为您可能没有验证 num 是否正在通过调试器进行更改。因为我在我的代码中做的事情和你几乎一样。我建议在更改 num 的行上放置一个断点并查看 num 是否更改。我假设开始活动导致您丢失 num 值。

# qt - QTableView - 行选择，专注于字段

> ID：11586543
> 
> 赞同：1
> 
> 时间：2012-07-20T20:30:28.283
> 
> 标签：qt, qtableview

我想选择 QTableView 中的整行并且只选择行。用户不应该知道有任何单元格。我可以设置一个适当的 SelectionMode 但仍然：

*   选择行时，每个单元格都有一个圆角
*   在 QTableView 上移动鼠标移动“焦点”并选择光标下的单元格

我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T15:17:47.403

我有同样的问题。

我最终使用了 a `QTreeView`，它支持多列（如表格）。默认的拖放行为允许您仅拖动、移动和重新排序行。

要使其看起来和行为类似于仅行交互表，您需要设置以下属性：

*   allColumnsShowFocus = true（因此您看不到特定（列）项目周围的焦点框）
*   headerHidden = false（启用表头）
*   itemsExpandable = false （可以忽略，如果所有其他属性设置正确）
*   rootIsDecorated = false（这会隐藏 topLevelItems 的展开句柄）
*   selectionBehavior = SelectRows
*   selectionMode = *SingleSelection*（或如你所愿......）
*   对于移动行：
    *   拖动启用 = 真
    *   接受滴=真
    *   showDropIndicator = true
    *   editTriggers::selectedClicked = false
    *   所有项目的项目标志：
        *   ItemIsSelectable = true
        *   ItemIsDragEnabled = true
        *   ItemIsDropEnabled = **false**（因此您不能拖动 topLevelItem 成为另一个项目的子项）
        *   ItemIsEnabled = 真

现在，如果您只使用 topLevelItems，则 treeView 会按照您的意愿行事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T02:37:57.703

您应该使用委托。

方法如下：http: [//qt-project.org/faq/answer/how_can_i_remove_the_dotted_rectangle_from_the_cell_that_has_focus_in_my_qt](http://qt-project.org/faq/answer/how_can_i_remove_the_dotted_rectangle_from_the_cell_that_has_focus_in_my_qt)

在 Python 中：http: [//imath.diandian.com/post/2013-07-09/40051407386](http://imath.diandian.com/post/2013-07-09/40051407386)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T01:58:37.560

请尝试 QTableView 的方法

```
setSelectionBehavior(QAbstractItemView::SelectRows); 
```

# vb.net - 在 VB.Net 中使用 Me 关键字的标准

> ID：11586545
> 
> 赞同：2
> 
> 时间：2012-07-20T20:30:40.407
> 
> 标签：vb.net, coding-style, standards, keyword

我正在寻找是否有在 VB.Net 语法中使用 (Me) 关键字的标准或首选方式。

目前我知道 3 种使用 (Me) 的方法。

没有 (Me) 关键字：

```
Cursor = Cursors.WaitCursor

RadioButtonSortBySurname.Checked = True

LightGrid.SortColumn(2)
LightGrid.Columns(2).LastSortState = Ascending
LightGrid.SortColumn(1)
LightGrid.Columns(1).LastSortState = Ascending

Cursor = Cursors.Default

LightGrid.StatusRowText = ""
LightGrid.Select() 
```

（我）在使用结构中：

```
Using Me
    Cursor = Cursors.WaitCursor

    RadioButtonSortBySurname.Checked = True

    LightGrid.SortColumn(2)
    LightGrid.Columns(2).LastSortState = Ascending
    LightGrid.SortColumn(1)
    LightGrid.Columns(1).LastSortState = Ascending

    Cursor = Cursors.Default

    LightGrid.StatusRowText = ""
    LightGrid.Select()
End Using 
```

在每个控件上使用 (Me)：

```
Cursor = Cursors.WaitCursor

Me.RadioButtonSortBySurname.Checked = True

Me.LightGrid.SortColumn(2)
Me.LightGrid.Columns(2).LastSortState = Ascending
Me.LightGrid.SortColumn(1)
Me.LightGrid.Columns(1).LastSortState = Ascending

Cursor = Cursors.Default

Me.LightGrid.StatusRowText = ""
Me.LightGrid.Select() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:19:29.867

在一种情况下，当变量名不明确时，您*必须*使用它来帮助编译器：

```
Sub Foo(ByVal bar As Integer)
    Me.Bar = bar
End Sub 
```

它从具有相同名称的参数分配类中的字段。没有`Me.`它将参数值分配给它自己，它可以编译但绝不是预期的。在 vb.net 中并不少见，因为它不区分大小写。否则建议，考虑与字段名称不同的参数标识符名称可能会很痛苦。一些程序员（和工具）喜欢总是给字段名称加上前导下划线以避免这个问题。

但是您在问题中提出的问题是个人喜好问题。前缀有两个好处`Me.`，它有助于代码可读性，因为它指示范围并缩小读者必须查找声明的位置。它确实有助于 IntelliSense 弹出窗口缩小候选列表，这是我个人非常关心的功能。它是由你决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:09:04.227

决定权在您手中，所有方法都可以接受，但是... ReSharper 等一些工具建议您不要使用 Me (VB) 或 this (C#) 关键字，以使您的代码更清晰、更小。

就我而言，我避免使用 Me 关键字，但正如我所说，决定权在你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T17:00:11.390

如果您没有特别使用它，则 ME 是隐含的。正如 Hans 所提到的，有时您必须使用它，因为 ME 的范围将被范围更近的名称覆盖。

像其他人一样，我很少使用它，通常当我不记得我所谓的一些控制时，我刚刚在两分钟前添加了......然后我又把它拿出来只是因为我不关心语法 LOL。我会更喜欢“这个”而不是我。

# jquery - 如何将隐藏的 jQuery DataTables 列发布到表单

> ID：11586546
> 
> 赞同：2
> 
> 时间：2012-07-20T20:30:41.993
> 
> 标签：jquery, html, forms, post, datatables

我有一个带有一些可见列（名字、姓氏）和一个隐藏列（id）的 DataTable。我正在使用 DataTable 行选择示例来突出显示用户选择的行。按下按钮时，我可以在隐藏列中显示所选行的值。我想弄清楚的是如何将隐藏的值作为输入变量发布到另一个页面上。

这是我的按钮调用的函数，它只是显示我要发布的隐藏 id 列。

```
$('#select').click( function() {

   var anSelected = fnGetSelected( oTable );

   if ( anSelected.length == 0 ) {
      alert('Please make a selection');
   } else {

      // Get data from the selected row                    
      var aRow = anSelected[0];
      var sFirstName = oTable.fnGetData( aRow, 0 );
      var sLastName = oTable.fnGetData( aRow, 1 );
      var sID = oTable.fnGetData( aRow, 2 );

      alert('You have selected ' + sID);
   }
} ); 
```

我不清楚如何将此值作为输入变量发布到表单上。

我还找到了一个尝试解决此问题的示例，但它未能显示如何实际发布该值。

```
$(document).ready(function() {

   var oTable;

   $('#form').submit( function() {
      var sData = $('input', oTable.fnGetNodes()).serialize();
      alert( "The following would have been submitted to the form: \n\n"+sData );
      return true;
   } );

   oTable = $('#example').dataTable();

} ); 
```

如果您没有猜到，我是 jQuery 和 DataTables 的新手。:)

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:06:16.400

我想出了两个不同的解决方案来解决这个问题，我将它们发布给其他可能觉得它们有用的人。基本思想是：

(a) 知道用户选择了哪一行 (b) 读取该行的隐藏列的值 (c) 将值分配给隐藏的表单字段

两种解决方案之间的区别在于分配值的时间。在第一个解决方案中，当用户点击提交按钮时分配值。在第二种解决方案中，每次用户单击一行时都会分配该值。

解决方案#1：这建立在我之前发布的代码之上。在这里，我简单地将警报对话框替换为使用 getElementById 函数将隐藏值分配给隐藏表单字段的语句。

```
$('#select').click( function() {

   var anSelected = oTable.$('tr.row_selected');

   if ( anSelected.length == 0 ) {
      alert('Please make a selection');
   } else { 
      // Get data from the selected row                    
      var aRow = anSelected[0];
      var sFirstName = oTable.fnGetData( aRow, 0 ); // Don't need this anymore
      var sLastName = oTable.fnGetData( aRow, 1 ); // Don't need this anymore
      var sID = oTable.fnGetData( aRow, 2 ); // Hidden column

      document.getElementById('hiddenUserID').value = sID;
   }
} ); 
```

在我的表单中，我有一个隐藏的输入字段和一个调用上述函数的提交按钮。

```
<input type="hidden" name="user_id" id="hiddenUserID" value="" />
<button id="select" type="submit">Select User</button> 
```

解决方案#2：在这个解决方案中，我在每次用户选择一行时分配值。该代码借鉴了 DataTables 行选择示例，可以在此处找到：

[http://datatables.net/release-datatables/examples/api/select_single_row.html](http://datatables.net/release-datatables/examples/api/select_single_row.html)

```
/* Add a click handler to the rows */
$("#example tbody tr").click( function( e ) {

    if ( $(this).hasClass('row_selected') ) {
        $(this).removeClass('row_selected');
    } else {
        oTable.$('tr.row_selected').removeClass('row_selected');
        $(this).addClass('row_selected');

        // Get the data from the selected row
        var sID = oTable.fnGetData( this, 2 );
        document.getElementById('hiddenUserID').value = sID;
    }
}); 
```

我的表单具有与上述相同的隐藏输入字段。我的提交按钮也调用了第一个解决方案中的函数，但只是为了检查是否选择了一行。

两种解决方案都很好用。我想你使用哪一个取决于个人喜好和需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:18:07.960

我基本上有你同样的需求，这是我对解决方案的看法：

1）创建传递自定义`fnCreatedRow`回调的dataTable。回调将用于在每个创建的行上添加一个单击侦听器。

```
var options = {
    fnCreatedRow: createdRow,
    ...
};

var dataTable = element.dataTable(options); 
```

2）在创建监听器时，确保将行索引转发给实际监听器

```
function createdRow(nRow, aData, iDataIndex) {
    $(nRow).on('click', {dataIndex: iDataIndex}, rowClickListener);
} 
```

3) 在点击监听器中，使用索引获取行的实际*数据*（即 JS 对象，而不是 HTML），调用 dataTable 对象上的 `fnGetData' API。

```
function rowClickListener (evt) {
    var rowData = dataTable.fnGetData(evt.data.dataIndex);

    console.log(rowData.lastName + ' ' rowData.firstName);
} 
```

这也归功于用户[spasco](http://www.datatables.net/forums/discussion/4199/accessing-hidden-column-data/p1)。

# testing - 集成/回归测试套件中的 TypeMock

> ID：11586550
> 
> 赞同：0
> 
> 时间：2012-07-20T20:31:16.333
> 
> 标签：testing, integration-testing, regression-testing, typemock

我需要为我们的应用程序运行集成/回归测试套件，并且应用程序应该在一天中的不同时间表现不同。我无法更改系统时间，因为其他应用程序依赖它我想为此模拟 DateTime.Now。但是，当我将模拟放在 main 方法中时，抛出了异常。当我在同一应用程序的 nunit 测试中使用模拟时，它工作正常。typemock 只能在单元测试的上下文中使用吗？无论如何我可以在启用模拟的情况下运行解决方案吗？我也通过 TMockRunner.exe 运行了解决方案，但遇到了同样的问题。

谢谢！

当我使用 Travis 提到的 @Travis Illig 的方法运行时，我看到了这个错误，包装器的代码是：

```
 class Program
  {
    static void Main(string[] args)
    {
      ExpectationsSetup();

      ConsoleApplication2.Program.Main(args);
    }

    public static void ExpectationsSetup()
    {
      Isolate.WhenCalled(() => DateTime.Now).WillReturn(new DateTime(2010, 1, 2));
    }
  }
I see the following error:

Unhandled Exception: TypeMock.TypeMockException:
*** No method calls found in recording block. Please check:
 * Are you trying to fake a field instead of a property?
 * Are you are trying to fake an unsupported mscorlib type? See supported types
here: http://www.typemock.com/mscorlib-types
   at gt.a(c0 A_0, Boolean A_1)
   at bg.a(Boolean A_0)
   at dt.b(Boolean A_0)
   at i2.b(Boolean A_0)
   at i2.a(Object A_0, Boolean A_1, Func`1 A_2, Action A_3, Action A_4, Action A
_5, Boolean A_6)
   at i2.b(Object A_0)
   at TypeMock.ArrangeActAssert.ExpectationEngine`1.a(TResult A_0)
   at ConsoleApplication2Mock.Program.ExpectationsSetup() in C:\Users\shvenkat\D
ocuments\Visual Studio 2010\Projects\ConsoleApplication2\ConsoleApplication2Mock
\Program.cs:line 22
   at ConsoleApplication2Mock.Program.Main(String[] args) in C:\Users\shvenkat\D
ocuments\Visual Studio 2010\Projects\ConsoleApplication2\ConsoleApplication2Mock
\Program.cs:line 14 
```

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:38:47.260

Typemock Isolator 的典型用途是在单元测试或小型测试环境的上下文中。在进程中运行 Isolator（或任何其他基于分析器的产品，如 NCover）存在非零水平的开销，因此您通常不希望这样做。

但是，当您确实想在常规进程上运行 Isolator 时，总有一些极端情况，这是可能的。

[例如，这是我不久前写的一篇文章，解释了如何对 Windows 服务执行此操作。](http://www.paraesthesia.com/archive/2009/07/01/changing-windows-service-behavior-with-typemock-isolator.aspx)

基本算法成立：

*   启用 Typemock Isolator（通过在进程上设置分析标志或通过 TMockRunner.exe 运行事物）。
*   设置您的期望（这是您模拟 DateTime.Now 或其他任何您想要模拟的地方）。
*   让应用程序完成启动并正常运行。

第一步很简单——就像你在单元测试环境中运行它一样。这是可能很困难的第二步。这意味着您需要有某种“包装器”或在允许启动应用程序的其余部分之前运行的东西，这将建立您的期望。这通常发生在测试设置方法或“arrange-act-assert”单元测试的“arrange”部分。[你会在我的文章中看到一个这样的例子。](http://www.paraesthesia.com/archive/2009/07/01/changing-windows-service-behavior-with-typemock-isolator.aspx)

同样，我会警告您有关性能的信息。在您提到的测试环境中做这样的事情可能很好，但我认为我不会在生产中这样做。

* * *

关于您的程序和您看到的错误的具体说明：

我试图建立它的复制品，虽然我能够模拟其他东西，但我无法让 DateTime.Now 模拟工作。**我遇到了与您看到的相同的异常**。

例如，在你的包装器中试试这个：

```
class Program
{
  static void Main(string[] args)
  {
    ExpectationsSetup();

    ConsoleApplication2.Program.Main(args);
  }

  public static void ExpectationsSetup()
  {
    // Mock something OTHER than DateTime.Now - this mocks
    // the call to your wrapped application.
    Isolate
      .WhenCalled(() => ConsoleApplication2.Program.Main(null))
      .DoInstead(ctx => Console.WriteLine("faked!"));
  }
} 
```

通过 TMockRunner.exe 运行该包装器，**您实际上会得到模拟工作**。但是，将其切换回 DateTime.Now，您将再次遇到异常。

*我确实验证了在单元测试环境*中模拟 DateTime.Now确实有效。所以单元测试环境一定有什么特别之处，虽然我不知道是什么。

找出这种差异比这里可以处理的更深入一点。**您应该联系 Typemock 支持并说明情况。**他们非常善于提供帮助。确保向他们发送复制品（例如，显示问题的简单控制台应用程序），您将获得更快/更好的响应。

# dom - 在不依赖父索引的情况下获取兄弟节点？

> ID：11586551
> 
> 赞同：1
> 
> 时间：2012-07-20T20:31:17.707
> 
> 标签：dom, watir-webdriver

我发现在行具有可靠属性的单元格中获取文本值很容易，例如。`$browser.tr(:class, "datarow2_sm")`

但是，我还需要从`<tr>`表中的下一个获取数据，仅定义为`<tr class="">`. 它的 HTML 内容也没有什么非常独特的东西，wair-speaking。

捕获该行的一种不情愿的方法是：

```
 cell1value = $browser.tr(:class, "datarow2_sm").parent[3][1].text
 cell2value = $browser.tr(:class, "datarow2_sm").parent[3][2].text.to_f  # etc. 
```

但我不想依赖固定索引*[3]*，因为更广泛的表格中的此类内容可能会发生变化。除了**.parent**之外，还有什么类似*.sibling 的*（**.next** /* *.previous* * 就像在 Mechanize 中一样）？也许一个更喜欢相同类型的节点（tr 到另一个 tr 不是 td 或 DOM 中的某些非行节点）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:46:06.113

您可以使用 css 相邻兄弟选择器。请注意，Watir-Webdriver 目前仅支持元素节点的 css 选择器。

您将执行以下操作（注意 to_subtype 是将其转换回 TableRow 而不是 Element）：

```
puts b.element(:css, "tr.datarow2_sm + tr").to_subtype.text 
```

**更新**

如果要获取下一行中的第二个单元格，可以执行以下操作之一：

```
puts b.element(:css, "tr.datarow2_sm + tr").to_subtype[1].text  
puts b.element(:css, "tr.datarow2_sm + tr").td(:index, 1).text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:43:40.913

CSS 对此有一个特殊的选择器，称为[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)：

> 相邻兄弟选择器的语法如下：E1 + E2，其中 E2 是选择器的主题。如果 E1 和 E2 在文档树中共享相同的父级并且 E1 紧接在 E2 之前，则选择器匹配，忽略非元素节点（例如文本节点和注释）。

# math - 使用 PowerShell 根据另一列中的信息添加（数学）CSV 列

> ID：11586556
> 
> 赞同：4
> 
> 时间：2012-07-20T20:31:36.717
> 
> 标签：math, powershell, csv, addition

我很难在标题中描述我需​​要什么，所以如果这完全没有意义，我提前道歉。

如果我有一个包含 2 列的 CSV，一个带有人名，第二列带有数值，我需要在名称列中找到重复项，然后将该人的数值加在一起以获得新的总数CSV。

这是真实 CSV 的一个非常简化的版本

```
Name,Number
Dog,1
Cat,2
Fish,1
Dog,3
Dog,2
Cat,2
Fish,1 
```

鉴于上述信息，我希望能够产生的是：

```
Name,Number
Dog,6
Cat,4
Fish,2 
```

我真的不知道如何到达那里，或者是否可以使用 PowerShell。我只能使用 group-object 按名称进行分组，但我不知道如何添加之后的列。

我在这方面的研究中遇到的最大问题是，我在谷歌搜索时得到的大多数结果（如果不是全部的话）都涉及向 csv 添加新列而不执行数学计算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:36:47.077

我终于明白了

```
$csvfile = import-csv c:\csvfile.csv

$csvfile | group name | select name,@{Name="Totals";Expression={($_.group | Measure-Object -sum number).sum}} 
```

归功于：

[http://www.hanselman.com/blog/ParsingCSVsAndPoorMansWebLogAnalysisWithPowerShell.aspx](http://www.hanselman.com/blog/ParsingCSVsAndPoorMansWebLogAnalysisWithPowerShell.aspx)

# c# - 使用 t-sql 删除表约束后 newid() 出现问题

> ID：11586559
> 
> 赞同：0
> 
> 时间：2012-07-20T20:31:51.523
> 
> 标签：c#, sql, sql-server, tsql

有一种情况，我必须在现有表上删除主键，然后在其中插入一条记录。该表有一个名为 GUID 的列，如下所示

```
Create Table TEST_TABLE_VALUE (
        TEST_TABLE_ID int Identity(1,1),
        TEST_TABLE_VALUE int,                       
        GUID uniqueidentifier Not Null  Default newid(),
        Primary Key (TEST_TABLE_ID, TEST_TABLE_VALUE)
) 
```

使用以下代码删除约束

```
Declare @TableName nvarchar(100)
Declare @TableId int
Declare @ConstraintName varchar(120)
Declare @IndexName varchar(120)
Declare @Command varchar(256)

Set @TableName = 'TEST_TABLE_VALUE'
Select @TableId = id From sysobjects Where [type]='U' and [name]=@TableName

  Declare ConstraintDropCursor Cursor Local Fast_Forward
  For Select name from sysobjects where (type='K' Or type='D' or type='F' or type='C') and parent_obj = @TableId
  For Read Only
     Open ConstraintDropCursor
       Fetch Next From ConstraintDropCursor Into @ConstraintName
         While @@Fetch_Status != -1
           Begin
             Set @Command = 'Alter Table dbo.' + @TableName + ' Drop Constraint ' + @ConstraintName
             exec(@Command)
             Fetch Next From ConstraintDropCursor Into @ConstraintName
           End
     Close ConstraintDropCursor
     DeAllocate ConstraintDropCursor 
```

当我尝试将数据插入表中时删除约束后

```
Insert Into TEST_TABLE_VALUE (TEST_TABLE_VALUE) Values(1) 
```

但出现以下错误：

```
Cannot insert the value NULL into column 'GUID', table 'CustApp1.dbo.TEST_TABLE_VALUE1'; column does not allow nulls. INSERT fails. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:38:07.200

您已删除 GUID 列的默认值，它不是可为空的列。因此，它导致了问题。如果您想插入大量数据并且出于性能原因不想要约束。然后至少不要删除不可为空的列的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:09:12.640

好吧，如果您放弃默认约束，您最终会得到

```
Create Table TEST_TABLE_VALUE ( 
        TEST_TABLE_ID int Identity(1,1), 
        TEST_TABLE_VALUE int,                        
        GUID uniqueidentifier Not Null, 
        Primary Key (TEST_TABLE_ID, TEST_TABLE_VALUE) 
) 
```

因此，如果您希望继续沿此路径前进，则必须为 GUID 列提供一个值

或者也做

```
ALTER TABLE TEST_TABLE_VALUE ALTER COLUMN GUID uniqueidentifier NULL 
```

允许空值。

# c# - 如何使用 C# 在网格视图中恢复排序数据？

> ID：11586561
> 
> 赞同：0
> 
> 时间：2012-07-20T20:31:51.357
> 
> 标签：c#, asp.net, .net, gridview

我有一个带有搜索文本框和搜索按钮的 GridView，一旦我尝试按位置、名称等搜索一些记录。我有一个正确显示的记录列表，如果我选择一个记录并且我决定这不是我有一个，然后单击包含的后退按钮，我的搜索丢失了，我必须再次搜索。

我知道我必须创建一个会话来解决这个问题，但我迷路了。这就是我到目前为止所拥有的。任何想法？

```
 protected void search_button_Click(object sender, ImageClickEventArgs e)
{
            gvCompanyList.PageIndex = 0;
    SearchForCompanies();

    //Save search criteria into a session
    Session["SearchString"] = tbSearchTerm.Text;
}

protected void gvCompanyList_PreRender(object sender, EventArgs e)
{
   GridViewRow pagerRow = (GridViewRow)gvCompanyList.BottomPagerRow;

    if (pagerRow != null && pagerRow.Visible == false)
        pagerRow.Visible = true;

  // To Call the session

    String searchCriteria;

    if (String.IsNullOrEmpty(tbSearchTerm.Text))
    {
        if (!String.IsNullOrEmpty(Session["SearchString"].ToString()))
        {
            searchCriteria = Session["SearchString"].ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:30:58.240

看起来好像你在正确的轨道上。您现在只需要创建一个按钮，如果单击它，则使用会话变量执行搜索。

# jquery - jQuery选择不工作

> ID：11586563
> 
> 赞同：0
> 
> 时间：2012-07-20T20:31:57.877
> 
> 标签：jquery, jquery-chosen

我正在尝试使用 jQuery selected() 插件来设计一个选择表单字段，但它不起作用。这是我的 HTML 代码：

```
<label for='aaaaa'>First option or "Second option":</label>
<select name='aaaaa' class="chosen" id='aaaaa'>
<option>First option</option>
<option>"Second option"</option>
</select><br> 
```

这是我的 .js 代码：

```
$('.chosen').chosen(); 
```

这是我的 JavaScript 导入：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="https://raw.github.com/harvesthq/chosen/master/chosen/chosen.jquery.js"</script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://jqueryui.com/latest/ui/ui.tabs.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.form.js"></script>
<script type="text/javascript" src="../../js/jQuery.layout/jquery.layout.min.js"></script>
<script type="text/javascript" src="../../js/control_panel/controlpanel.js"></script> 
```

这是我的 CSS 导入：

```
<link rel="stylesheet" type="text/css" media="screen" href="../../css/jQueryui/cupertino/jquery-ui-1.8.5.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="../../jquery.jqGrid-3.8.2/css/ui.jqgrid.css" />
<link rel="stylesheet" href="../../css/site.css" type="text/css" />
<link rel="stylesheet" href="https://raw.github.com/harvesthq/chosen/master/chosen/chosen.css" type="text/css" media="Screen" />
<link rel="icon" href="../../images/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon" /> 
```

我没有关于它如何在屏幕上显示的图片，但我可以描述它。有五行：

1.  第一个选项或“第二个选项”
2.  第一个选项（蓝色和下划线，看起来像一个 html 链接）
3.  （看起来像一个文本输入字段）
4.  第一个选项（纯文本，前面有一个项目符号点，如
5.  元素
6.  “第二个选项”（同样是纯文本，前面有一个项目符号点，就像
7.  元素）

在 Mozilla Firefox 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:50:10.213

我认为 select 中定义的类是错误的。

它应该是：`chzn-select`

所以你的代码应该是：

```
<select name='aaaaa' class="chzn-select" id='aaaaa'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T13:52:36.993

将 Firefox 用户代理更改为 iPhone 的用户代理时，我遇到了类似的问题。在这种情况下，选择不呈现，浏览器将显示默认选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:00:06.673

尝试使用 firebug 控制台查看 js 或 css 文件是否有任何错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T09:42:47.200

我相信我回复得很晚，但是您选择的脚本标签没有正确关闭，并且 select 的类应该根据您的 jquery 代码

# android - 使用 ForeignCollection

> ID：11586571
> 
> 赞同：4
> 
> 时间：2012-07-20T20:32:24.003
> 
> 标签：android, ormlite, foreign-collection

我的实体包含以下私有`ForeignCollection`属性：

```
@ForeignCollectionField
private ForeignCollection<Order> orderCollection;

private List<Order> orderList; 
```

避免调用者使用 a 的最佳方法或通常方法是`ForeignCollection`什么？有没有什么巧妙的方法可以将`Collections`数据返回给调用者？

以下方法看起来如何？它允许调用者通过`List`. 你会推荐这样做吗？

```
public List<Order> getOrders() {
    if (orderList == null) {
        orderList = new ArrayList<Order>();
        for (Order order : orderCollection) {
            orderList.add(order);
        }
    }
    return orderList;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:48:18.760

如果可以将签名更改为`Collection`而不是`List`，您可以尝试使用[Collections.unmodifiableCollection()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)。

```
public Collection<Order> getOrders()
{
    return Collections.unmodifiableCollection(orderCollection);
} 
```

否则，您使用惰性成员变量的方法很好（前提是您不需要同步）。另外，请注意，您可以只使用构造函数`ArrayList`来复制源集合中的值：

```
orderList = new ArrayList<Order>(orderCollection); 
```

# php - 这个颜色在哪个X11色域

> ID：11586573
> 
> 赞同：1
> 
> 时间：2012-07-20T20:32:38.857
> 
> 标签：php, colors, imagemagick

我正在构建一个工具，我从图像中选择主色并且我做得很好，我现在面临的问题是如何将返回的颜色组合成一个广泛的调色板范围，如 X11 颜色范围[http： //en.wikipedia.org/wiki/Web_colors#X11_color_names](http://en.wikipedia.org/wiki/Web_colors#X11_color_names)

因此，例如，如果我得到：颜色 RGB：rgb(102,102,153)，我想将其归为紫色，将 rgb(51,102,204) 归为蓝色，依此类推。现在我真的不知道该怎么做。是否有图书馆或我可以使用的东西，或者我应该如何编码？我正在使用 imagemagick 和 php 顺便说一句。

是否可以为每种基色生成一个包含 rgb 范围的数组，然后查看我的新颜色是否在其中？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:58:42.083

我一直在为即将到来的项目寻找完全相同的东西，尽管我对基本的彩虹色很满意。

环顾四周，最好的方法似乎是将您的 RGB 颜色转换为 HSL。(H)ue 部分对于查看颜色位于彩虹的哪个部分非常有用。然后添加一些额外的位来捕捉黑色、白色、灰色和棕色。

这是我的 PHP 代码，其中引用了 RGB -> HSL 转换例程。我敢肯定它可以优化一点，但这是一个开始！

显然，颜色是非常主观的，因此您可能想要使用每个颜色范围的值 - 只需使用在线颜色选择器实用程序之一，甚至是 Windows 颜色选择器。

```
<?php

  function RGB_TO_HSV ($R, $G, $B) { // RGB Values:Number 0-255
                                     // HSV Results:Number 0-1
  // this function from http://stackoverflow.com/questions/1773698/rgb-to-hsv-in-php
  $HSL = array();

  $var_R = ($R / 255);
  $var_G = ($G / 255);
  $var_B = ($B / 255);

  $var_Min = min($var_R, $var_G, $var_B);
  $var_Max = max($var_R, $var_G, $var_B);
  $del_Max = $var_Max - $var_Min;

  $V = $var_Max;

  if ($del_Max == 0) {
     $H = 0;
     $S = 0;
  }
  else {
     $S = $del_Max / $var_Max;

     $del_R = ( ( ( $max - $var_R ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
     $del_G = ( ( ( $max - $var_G ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
     $del_B = ( ( ( $max - $var_B ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;

     if ($var_R == $var_Max) $H = $del_B - $del_G;
     else if ($var_G == $var_Max) $H = ( 1 / 3 ) + $del_R - $del_B;
     else if ($var_B == $var_Max) $H = ( 2 / 3 ) + $del_G - $del_R;

     if (H<0) $H++;
     if (H>1) $H--;
  }

  $HSL['H'] = $H;
  $HSL['S'] = $S;
  $HSL['V'] = $V;
  return $HSL;
}

// convert an RGB colour to HSL
$hsl = RGB_TO_HSV(51,102,204);       // rgb values 0-255

$hue = round($hsl['H'] * 255, 0);   // round hue from 0 to 255 for ease of use
$sat = $hsl['S'];                     // 0 to 1
$val = $hsl['V'];                     // 0 to 1

$colour = "Red";                     // default to red

if ($hue >= 10 && $hue <= 35) {
   $colour = "Orange";
   if ($val < 0.69) $colour = "Brown";
}
if ($hue >= 36 && $hue <= 44) $colour = "Yellow";
if ($hue >= 45 && $hue <= 107) $colour = "Green";
if ($hue >= 108 && $hue <= 182) $colour = "Blue";
if ($hue >= 183 && $hue <= 206) $colour = "Purple";
if ($hue >= 207 && $hue <= 245) $colour = "Pink";
if ($val < 0.1) $colour = "Black";
if ($val > 0.9) $colour = "White";
if ($sat < 0.105) $colour = "Grey";

// show the result
echo $colour;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:44:03.303

好的，忘记前面的代码，这是我从几个来源汇总的更可靠的版本，它也使用更常见的 0-360 作为色调。

我还添加了一个测试小程序，它选择随机颜色然后“告诉”你它们是什么！

似乎更可靠，可能需要围绕截止值进行一些摆弄（尤其是橙色/灰色等）。我使用[这个在线颜色选择器](http://www.workwithcolor.com/hsl-color-picker-01.htm)进行测试。

```
<?php

function RGBtoHSL($r,$g,$b) {  
// based on code and formulas from:
// http://www.had2know.com/technology/hsl-rgb-color-converter.html
// http://colorgrader.net/index.php/dictionary-a-tutorials/color-theory/93-math-behind-colorspace-conversions-rgb-hsl.html
// http://proto.layer51.com/d.aspx?f=1135

$max = max($r, $g, $b);
$min = min($r, $g, $b);
$d = ($max - $min) / 255;
$lum = round((($max+$min)/2)/255, 2);

$sat = 0;
if ($lum > 0) $sat = round($d/(1 - (2*$lum-1)), 2);

$hue = 0;  
if(($r==$g) && ($g==$b))  $hue = 0;  
else if($r>=$g && $g>=$b) $hue = 60*($g-$b)/($r-$b);  
else if($g>=$r && $r>=$b) $hue = 60  + 60*($g-$r)/($g-$b);  
else if($g>=$b && $b>=$r) $hue = 120 + 60*($b-$r)/($g-$r);  
else if($b>=$g && $g>=$r) $hue = 180 + 60*($b-$g)/($b-$r);  
else if($b>=$r && $r>=$g) $hue = 240 + 60*($r-$g)/($b-$g);  
else if($r>=$b && $b>=$g) $hue = 300 + 60*($r-$b)/($r-$g);  
else $hue = 0;  
$hue = round($hue, 0);  
$hsl = array();
$hsl['h'] = $hue;
$hsl['s'] = $sat;
$hsl['l'] = $lum;
return $hsl;
}  

// example: pick 42 random colours then identify them
echo "<div style='float: left; width: 1000px;'>";

srand;
for ($f=0; $f < 42; $f++) {

$red = rand(0, 255); 
$green = rand(0, 255); 
$blue = rand(0, 255); 

$hsl = RGBtoHSL($red, $green, $blue);

$hue = $hsl['h'];
$sat = $hsl['s'];
$lum = $hsl['l'];

$colour = "Red";            // default to red

if ($hue >= 11 && $hue <= 45) {
$colour = "Orange";
if ($lum < 0.51) $colour = "Brown";
}
if ($hue >= 46 && $hue <= 62) $colour = "Yellow";
if ($hue >= 63 && $hue <= 160) $colour = "Green";
if ($hue >= 161 && $hue <= 262) $colour = "Blue";
if ($hue >= 263 && $hue <= 292) $colour = "Purple";
if ($hue >= 293 && $hue <= 349) $colour = "Pink";
if ($sat < 0.07) $colour = "Grey";  // do grey before black/white
if ($lum < 0.10) $colour = "Black";
if ($lum > 0.97) $colour = "White";

echo "<div style='float: left; width: 150px; border: 1px solid #000000; margin: 5px;'>";      
echo "<div style='float: left; width: 20px; height: 120px; background-color: rgb($red, $green, $blue); margin-right: 10px;'></div>";
echo "<p style='width: 33%; float: left;'>R=$red<br/>G=$green<br/>B=$blue</p>";
echo "<p style='width: 33%; float: right;'>H=$hue<br/>S=$sat<br/>L=$lum</p>";
echo "<p><b>$colour</b></p>";
echo "</div>";
}

echo "</div>";

?> 
```

# asp.net-mvc - 无法调用自定义 ASP MVC 4 WebAPI MembershipProvider

> ID：11586575
> 
> 赞同：1
> 
> 时间：2012-07-20T20:32:55.097
> 
> 标签：asp.net-mvc, security, asp.net-mvc-4, asp.net-web-api, membership-provider

我正在尝试在 ASP MVC 4 WebAPI 中连接自定义成员身份，但我无法弄清楚如何替换当前的提供者。我在提供者的构造函数中放置了一个断点，它永远不会落在它上面。运行下面的测试会在 GetResponse 调用上给我一个“401 Unauthorized”消息，因此 SOMETHING 正在尝试验证请求。我哪里错了？几乎相同的代码在 ASP MVC 4 站点（不是 WebAPI）中运行。

我知道测试中的一般逻辑是有效的，因为如果我删除 Authorize 属性，测试就会成功。

这是我的 WebConfig：

```
<authentication mode="Forms" />
<profile enabled="false">
  <providers>
    <clear/>
  </providers>
</profile>
<membership  defaultProvider="MyMembershipProvider">
  <providers>
    <clear/>
    <add name="MyMembershipProvider" 
         type="CustomWebApiMembershipProvider" 
         applicationName="AppName"/>
  </providers>
</membership>

<roleManager enabled="true" defaultProvider="MyWebApiRoleProvider">
  <providers>
    <clear/>
    <add name="MyWebApiRoleProvider" type="CustomWebApiRoleProvider" />
  </providers>
</roleManager> 
```

这是我的提供者。

```
public class CustomWebApiMembershipProvider: MembershipProvider
{
    public override bool ValidateUser(string username, string password)
    {
        return password.Contains("please");
    }

    public CustomWebApiMembershipProvider()
    {
        var x = "hello";
    }

} 
```

这是我的控制器：

```
[Authorize]
public class TestApiSecureController : ApiController
{
    // GET api/<controller>
    public IEnumerable<string> Get()
    {
        return new string[] {"CustomWebApi Secured Access"};
    }
} 
```

这是我的测试：

```
 [Test]
    public void Authorize_WhenApiKeyProvided_ReturnsValidResponse()
    {
        var request = WebRequest.Create("http://localhost:4011/api/TestApiSecure") as HttpWebRequest;
        AddAuthorizationInfo(request, "username", "pleaseLetMeIn");

        //we keep timing out when stepping through in debug, so set huge timeout
        request.Timeout = 100000;

        var response = request.GetResponse();
        var reader = new StreamReader(response.GetResponseStream());
        var result = reader.ReadToEnd();
        Assert.IsTrue(result.Contains("CustomWebApi"));
    }
    private void AddAuthorizationInfo(HttpWebRequest request, string username, string password)
    {
        var usernamePwString = username + ":" + password;
        var authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(usernamePwString));
        request.Headers["Authorization"] = "Basic" + authInfo;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:12:11.500

看起来表单身份验证需要一些 cookie 魔法，这不是由 HttpWebRequest 处理的。您需要创建自己的 Authorize 属性 - 查看：[http ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

# sql-server - SQL Server 行编号和筛选结果

> ID：11586577
> 
> 赞同：4
> 
> 时间：2012-07-20T20:33:28.593
> 
> 标签：sql-server, row-number

我有一个应用程序，我需要在列表中显示数据的“页面”。基本思想相当普遍。显示屏显示项目列表，显示屏底部是某种控件，可让您转到下一个数据“页面”。

一切都很好。我有这个工作。

以下是我用来支持“下一个”行为的视图中的 SQL。

```
CREATE VIEW CampaignParticipants AS
SELECT  row_number() OVER (ORDER BY TPT.LastName, TPT.FirstName, TPT.DoB) AS RowNumber
        ,CGP.*
        ,TPT.*
FROM    tblCampaignGEDPush CGP
JOIN    tblParticipants TPT
ON      CGP.PartID = TPT.PartID 
```

这是我如何使用 VIEW

```
SELECT  *
FROM    CampaignParticipants
WHERE   RowNumber >= 0
AND     RowNumber <= 100 
```

这模拟了从 VIEW 中抓取 100 个结果的“第一页”。每组结果的页面都很漂亮。

太好了..但是：

正如你们中的一些处理过这个问题的人可能知道的那样，这是有缺陷的。如果我想继续搜索`TPT.LastName like 'R%'`并获得第一组结果，那我就完蛋了。

我想开始看`RowNumber = 0`，停在`RowNumber = 100`，但“R”结果可能会远远超出该范围。结果：列表返回为空。

而且它变得更加棘手：用户希望能够“过滤”姓氏、名字、DoB、位置、电话、邮编等任何内容。

**编辑：我不能真正将过滤器放在“内部”查询上，因为它在视图中，并且过滤器可以任意更改

任何人有任何想法如何让这个结果集`row_number()`对*过滤*后的结果集有一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:39:39.587

这样的事情应该做......

```
SELECT * FROM (
SELECT  *, ROW_NUMBER() OVER (ORDER BY LastName, FirstName, DoB) AS __RN
FROM    CampaignParticipants
WHERE   LastName LIKE 'R%') innerData WHERE __RN BETWEEN 1 and 100 
```

但是，您应该使用列名，而不是“*”。我不知道您的表格是什么样的，所以我无法为您填写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:40:56.683

首先尝试使用 proc 而不是视图，因为用户要求您进行如此多的过滤，那么 proc 是您获得的唯一解决方案。在 proc 内部使用所有这些过滤器过滤数据，然后生成 row_number，然后显示前 100记录之类的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T01:50:33.607

我希望有比这更优雅的东西。这是我的存储过程解决方案。我蹩脚的 SQL 技能能想到的最好的东西。

参数列表中的 OUT 参数用于此集合中的总行数，因此前端知道有多少页与此特定过滤器集合一起。

```
CREATE PROC [dbo].[procCampaignGEDPushSelect]
    @LastName       VARCHAR(50)     = null
    ,@FirstName     VARCHAR(50)     = null
    ,@Location      VARCHAR(255)    = null
    ,@DoB           DateTime        = null
    ,@Zip           VARCHAR(50)     = null
    ,@Phone         VARCHAR(50)     = null
    ,@Email         VARCHAR(255)    = null
    ,@Gender        VARCHAR(20)     = null
    ,@IsGED         Bit             = 0
    ,@IsBTT         Bit             = 0
    ,@IsOACE        Bit             = 0
    ,@Completed     Bit             = 0
    ,@TotalCount    INT             OUT
AS
BEGIN

SELECT @LastName    = @LastName     + '%'
SELECT @FirstName   = @FirstName    + '%' 
SELECT @Location    = @Location     + '%' 
SELECT @Zip         = @Zip          + '%' 
SELECT @Phone       = @Phone        + '%' 
SELECT @Email       = @Email        + '%' 
SELECT @Gender      = @Gender       + '%' 

SELECT     row_number() OVER (ORDER BY LastName, FirstName, DoB) AS RowNumber
    , TPT.LastName
    , TPT.FirstName
    , TPT.WF1Site
    , TPT.DOB
    , TPT.Zip
    , TPT.Telephone
    , TPT.CellPhone
    , TPT.Email
    , TPT.Gender
    , TPT.IsBTT
    , TPT.IsGED
    , TPT.IsOACE
    , TPT.IsSRS
    ,CGP.*

FROM        tblCampaignGEDPush CGP

JOIN        tblParticipants TPT
ON          CGP.PartID = TPT.PartID

WHERE       1=1

AND         1 = (CASE WHEN @LastName    IS NOT NULL THEN (CASE WHEN TPT.LastName    LIKE @LastName  THEN 1 ELSE 0 END) ELSE 1 END)  
AND         1 = (CASE WHEN @FirstName   IS NOT NULL THEN (CASE WHEN TPT.FirstName   LIKE @Firstname THEN 1 ELSE 0 END) ELSE 1 END)
AND         1 = (CASE WHEN @Location    IS NOT NULL THEN (CASE WHEN TPT.WF1Site     LIKE @Location  THEN 1 ELSE 0 END) ELSE 1 END)  
AND         1 = (CASE WHEN @Zip         IS NOT NULL THEN (CASE WHEN TPT.Zip         LIKE @Zip       THEN 1 ELSE 0 END) ELSE 1 END) 
AND
(           1 = (CASE WHEN @Phone       IS NOT NULL THEN (CASE WHEN TPT.Telephone   LIKE @Phone     THEN 1 ELSE 0 END) ELSE 1 END) 
    OR      1 = (CASE WHEN @Phone       IS NOT NULL THEN (CASE WHEN TPT.CellPhone   LIKE @Phone     THEN 1 ELSE 0 END) ELSE 1 END) 
)
AND         1 = (CASE WHEN @Email       IS NOT NULL THEN (CASE WHEN TPT.Email       LIKE @Email     THEN 1 ELSE 0 END) ELSE 1 END) 
AND         1 = (CASE WHEN @Gender      IS NOT NULL THEN (CASE WHEN TPT.Gender      LIKE @Gender    THEN 1 ELSE 0 END) ELSE 1 END) 
AND         1 = (CASE WHEN @DoB         IS NOT NULL THEN (CASE WHEN TPT.DoB         = @DoB          THEN 1 ELSE 0 END) ELSE 1 END) 
AND         1 = (CASE WHEN @IsGED       != 0        THEN (CASE WHEN TPT.IsGED       = 1             THEN 1 ELSE 0 END) ELSE 1 END) 
AND         1 = (CASE WHEN @IsBTT       != 0        THEN (CASE WHEN TPT.IsBTT       = 1             THEN 1 ELSE 0 END) ELSE 1 END) 
AND         1 = (CASE WHEN @IsOACE      != 0        THEN (CASE WHEN TPT.IsOACE      = 1             THEN 1 ELSE 0 END) ELSE 1 END) 

AND         1 = (CASE WHEN @Completed   != 0        THEN (CASE WHEN CGP.Completed   = 1             THEN 1 ELSE 0 END) ELSE 1 END)

ORDER BY    TPT.LastName
            , TPT.FirstName
            , TPT.DoB

SELECT @TotalCount = @@ROWCOUNT

END 
```

于是我开始思考。由于我在 .NET 中，所以我不使用这个棘手的、容易出错的过程（顺便说一句，它工作得很好），我想知道那里是否有一个很好的紧凑解决方案。

现在我知道最初的问题与 .NET 无关，所以我将上面的过程留给那些对严格的 SQL 解决方案感兴趣的人，我认为它工作得很好。

所以我开始深入研究 IQueryable 接口并获得了成功：

```
IQueryable<queryParticipant>    qparticipant = db.queryParticipants.AsQueryable();
...
qparticipant = qparticipant.Where( ... any filter you choose );
...

return qparticipant

    .OrderBy( p => p.LastName )
    .OrderBy( p => p.FirstName )
    .OrderBy( p => p.DOB )
    .Select( ... whatever you like ... )
    .Skip( StartRecordNumber )          // This is the trick! Start the query here..
    .Take( PageSize )                   // Take only as many as you need
    ; 
```

就是这样。如果可用，.NET 方法很好。当这样的 API 不可用时，存储过程非常棒。

# python - 用pygame制作的游戏可以提交到steam吗？

> ID：11586579
> 
> 赞同：11
> 
> 时间：2012-07-20T20:33:41.713
> 
> 标签：python, distribution, pygame, steam

在使用 XNA 制作游戏后，我想通过使用 python 来拓宽我的视野。我知道 XNA 据说很容易分发。但是，我不确定用py2exe编译的pygame制作的游戏是否可以提交给steam？我的总体问题是......我如何将使用 pygame 制作的游戏提交给 Steam？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T20:39:37.593

对于Steam，AFAIK来说，它是Python，程序集还是XNA并不重要。通过 Steam 分发游戏的一般方式有两种，一种是联系 Steam 团队（我只是喜欢这样说），另一种是通过[Green Light](http://steamcommunity.com/greenlight/)计划被接受。

鉴于您不是 AAA 游戏开发团队，后者可能是最佳选择。

# python - 使用 rpy2 将 2d numpy 数组保存为 R 文件格式

> ID：11586582
> 
> 赞同：3
> 
> 时间：2012-07-20T20:33:54.643
> 
> 标签：python, rpy2

这是一个初学者的问题，但是如何使用 rpy2 将 2d numpy 数组保存到（压缩）R 格式的文件中？需要明确的是，我想将其保存在 rpy2 中，然后使用 R 读取它。我想避免使用 csv，因为数据量会很大。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T20:41:03.890

看起来你想要[保存命令](http://stat.ethz.ch/R-manual/R-patched/library/base/html/save.html)。我会使用[pandas R 界面](http://pandas.pydata.org/pandas-docs/stable/r_interface.html)并执行以下操作。

```
import numpy as np
from rpy2.robjects import r
import pandas.rpy.common as com
from pandas import DataFrame
a = np.array([range(5), range(5)])
df = DataFrame(a)
df = com.convert_to_r_dataframe(df)
r.assign("foo", df)
r("save(foo, file='here.gzip', compress=TRUE)") 
```

不过，可能有更优雅的方式。我愿意接受更好的建议。上面的 in`R`将被使用：

```
> load("here.gzip")
> foo
  X0 X1 X2 X3 X4
0  0  1  2  3  4
1  0  1  2  3  4 
```

您可以绕过使用`pandas`和使用[numpy2ri](http://rpy.sourceforge.net/rpy2/doc-2.2/html/numpy.html#from-numpy-to-rpy2)从`rpy2`. 有类似的东西：

```
from rpy2.robjects import r
from rpy2.robjects.numpy2ri import numpy2ri
a = np.array([[i*2147483647**2 for i in range(5)], range(5)], dtype="uint64")
a = np.array(a, dtype="float64") # <- convert to double precision numeric since R doesn't have unsigned ints
ro = numpy2ri(a)
r.assign("bar", ro)
r("save(bar, file='another.gzip', compress=TRUE)") 
```

那时`R`：

```
> load("another.gzip")
> bar
     [,1]         [,2]         [,3]         [,4]         [,5]
[1,]    0 4.611686e+18 9.223372e+18 1.383506e+19 1.844674e+19
[2,]    0 1.000000e+00 2.000000e+00 3.000000e+00 4.000000e+00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-27T19:26:30.037

假设您有一个名为 data 的数据框，那么下面的代码帮助我将此数据作为矩阵存储在 R 中，然后将其加载到 R（R 工作室）

# 将数据保存到 R

```
# Take only the values of the dataframe
B=data.values

import rpy2.robjects as ro
import rpy2.robjects.numpy2ri
rpy2.robjects.numpy2ri.activate()

nr,nc = B.shape
Br = ro.r.matrix(B, nrow=nr, ncol=nc)

ro.r.assign("B", Br)
ro.r("save(B, file='here.Rdata')") 
```

# 然后去 R 写这个

```
load("D:/.../here.Rdata") 
```

这为我完成了工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T21:41:03.803

这是一个没有 pandas 的示例，它添加了列名和行名

```
import numpy as np
from rpy2.robjects import rinterface, r, IntVector, FloatVector, StrVector

# older (<2.1) versions of rpy2 have globenEvn vs globalenv
# let's fix it a little
if not hasattr(rinterface,'globalenv'):
        warnings.warn('Old version of rpy2 detected')
        rinterface.globalenv = rinterface.globalEnv

var_name = 'r_var'
vals = np.arange(20,dtype='float').reshape(4,5)

# transpose because R is column major vs python is row major 
r_vals = FloatVector(vals.T.ravel())
# make it  a matrix
rinterface.globalenv[var_name]=r['matrix'](r_vals,nrow=vals.shape[0])
# give it some row and column names
r("rownames(%s) <- c%s"%(var_name,tuple('ABCDEF'[i] for i in range(vals.shape[0]))))
r("colnames(%s) <- c%s"%(var_name,tuple(range(vals.shape[1]))))

#save it to file
r.save(var_name,file='r_from_py.rdata') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-27T18:39:25.120

rpy2 的替代方法是编写一个 mat 文件并从 R 加载这个 mat 文件。

在蟒蛇中：

```
os.chdir("/home/user/proj") #specify a path to save to
import numpy as np
import scipy.io
x = np.linspace(0, 2 * np.pi, 100)
y = np.cos(x)
scipy.io.savemat('test.mat', dict(x=x, y=y)) 
```

示例复制自： [“Converting”Numpy 数组到 Matlab，反之亦然](https://stackoverflow.com/questions/10997254/converting-numpy-arrays-to-matlab-and-vice-versa)

在 R 中

```
library(R.matlab)
object_list = readMat("/home/user/proj/test.mat") 
```

我是python的初学者。

# jquery - 如何计算出我需要使用哪些 jQuery 选择器？

> ID：11586583
> 
> 赞同：1
> 
> 时间：2012-07-20T20:33:54.017
> 
> 标签：jquery, html

这是我的标记：

```
<div id="august2012" class="event_month">
  <div class="header"><span>August 2012</span></div>
  <div id="event3" class="event">
    <h3>Example Event 3 - 19/08/12</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
  <div id="event4" class="event">
    <h3>Example Event 4 - 24/08/12</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
</div> 
<div id="july2012" class="event_month">
  <div class="header"><span>July 2012</span></div>
  <div id="event1" class="event">
    <h3>Example Event 1 - 10/07/12</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
  <div id="event2" class="event">
    <h3>Example Event 2 - 14/07/12</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
</div> 
<div id="june2012" class="event_month">
  <div class="header"><span>June 2012</span></div>
</div>
<div id="may2012" class="event_month">
  <div class="header"><span>May 2012</span></div>
</div> 
```

现在，我需要编写一些 javascript 代码，以便当有人单击“.header”类之一时，下面的“.event”类会向下滑动。

问题是，我如何编写一些可以在所有月份都使用的代码，而无需在添加另一个月份时编写更多代码。

这是我到目前为止所拥有的，但它不起作用......

```
$("#events #event_listings .event_month .header").click(function() { 
    $(this).parent(".event").slideDown('slow');
}); 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:39:33.600

你想要这样的东西吗？

```
$('.header').click(function(){
    $(this).nextUntil('.header').slideToggle();        
});​ 
```

[http://jsfiddle.net/p8LrG/](http://jsfiddle.net/p8LrG/)

# jquery - 如何获取data-ZZZ不为空的元素

> ID：11586584
> 
> 赞同：0
> 
> 时间：2012-07-20T20:33:58.330
> 
> 标签：jquery

我有看起来像这样的html：

```
<div id="1" class="lineItem" data-options="">Line1</div>
<div id="2" class="lineItem" data-options="{size: M;}">Line2</div>
<div id="3" class="lineItem" data-options="{color: black;}">Line3</div> 
```

我可以构造某种选择器来获取`<div id="2">`and`<div id="3">`吗？

就像是：

```
$('.lineItem[data-options='not blank']') 
```

这是可能的，还是我必须手动检查每个 DIV 以检查 data-options 属性是否为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:38:46.737

您可以使用`:not`选择器

```
$('.lineItem[data-options]:not([data-options=""])'); 
```

[小提琴](http://jsfiddle.net/QJuL7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:40:47.707

使用这个选择器

```
$(".lineItem[data-options!='']") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:36:41.077

我建议：

```
$('.lineItem').filter(
    function(){
        return $(this).attr('data-options').length;
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ELhy3/)。

但是，这确实会查看选择器返回的每个元素，并评估`data-options`属性以检查它是否*不*为空（或者，明确地，它的长度大于`0`）。

# javascript - 在这种情况下是否需要 new 运算符来创建新对象？

> ID：11586585
> 
> 赞同：0
> 
> 时间：2012-07-20T20:34:06.283
> 
> 标签：javascript, object

我正在浏览这个演示文稿[http://channel9.msdn.com/Events/MIX/MIX11/FRM08](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)。Steve Anderson 使用了一个结构类似于下面的函数。

```
function o(p) {
    return { n: p };
} 
```

从他使用的函数创建对象

```
new o(123) 
```

我想在这种情况下不需要 new 运算符。你可以简单地写。

```
o(123) 
```

这两种方式有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:53:57.347

代码没有多大意义。如果在没有`new`关键字的情况下使用该函数，它将创建并返回一个对象。如果它与`new`关键字一起使用，如示例中所示，将创建两个对象，并丢弃在函数内部创建的对象。

如果从函数返回对象，则不应使用`new`关键字。应该与`new`关键字一起使用的函数不会返回对象，而是使用`this`关键字在已创建的对象中设置属性：

```
function o(p) {
  this.n = p;
} 
```

# wsdl - 在 jrockit 1.6_024/linux 上运行 axis2 的 weblogic 11g 上出现 BEA-101020 错误

> ID：11586586
> 
> 赞同：1
> 
> 时间：2012-07-20T20:34:07.550
> 
> 标签：wsdl, oracle11g, weblogic, axis2

```
we have axis2 (1.5.1)web service deployed on weblogic 11g running on jrockit 1.6._024/linux boxes.
we get <[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1342771457231> <BEA-101020> <[ServletContext@470808509[app:npv-websvc module:/ path: spec-version:null]] Servlet failed with Exception

java.lang.NullPointerException
    at org.apache.xerces.dom.ParentNode.nodeListItem(Unknown Source)
    at org.apache.xerces.dom.ParentNode.item(Unknown Source)
    at com.ibm.wsdl.util.xml.DOM2Writer.print(Unknown Source)
    at com.ibm.wsdl.util.xml.DOM2Writer.print(Unknown Source)
    at com.ibm.wsdl.util.xml.DOM2Writer.print(Unknown Source)
    at com.ibm.wsdl.util.xml.DOM2Writer.print(Unknown Source)

Axis2 JIRA had a recommended bug fix (URL below) but this is happening more frequently after we upgraded weblogic 9 to weblogic 11g. any patch recommended by oracle ? 
```

上面的空指针会导致堆栈溢出，整个 weblogic 实例都崩溃了。

```
https://issues.apache.org/jira/browse/AXIS2-4517

Appreciate experts help here ! 
```

# nginx - Nginx替换字符重写？

> ID：11586590
> 
> 赞同：1
> 
> 时间：2012-07-20T20:34:27.823
> 
> 标签：nginx, rewrite

假设您有一个 URL www.answers.mydomain.com/category/hello_world-123.html 但您想将路径部分重写为 /category/hello-world

你将如何通过 nginx 重写来解决这个问题？基本上如何格式化 $1 变量？

```
 server{
       listen 80;
       server_name  ~^(?<subdomain>.+)\.bg\.com$
       root /home/dan/Projects/rewrite-example;

       set $PREFERRED_DOMAIN $scheme://www.bg.com;

       if ($subdomain ~* answers) {
         rewrite ^(.*)$ $PREFERRED_DOMAIN/questions$1 permanent;
       }
     } 

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:56:45.823

```
 server{
     listen 80;
     server_name  answers.bg.com;

     rewrite ^(.+/[a-z]+)-\d+\.html$ http://www.bg.com$1 permanent;
     rewrite ^(.+/[a-z]+)_([a-z]+)-\d+\.html$ http://www.bg.com$1-$2 permanent;
     rewrite ^(.+/[a-z]+)_([a-z]+)_([a-z]+)-\d+\.html$
             http://www.bg.com$1-$2-$3 permanent;
     rewrite ^(.+/[a-z]+)_([a-z]+)_([a-z]+)_([a-z]+)-\d+\.html$
             http://www.bg.com$1-$2-$3-$4 permanent;
     rewrite ^(.+/[a-z]+)_([a-z]+)_([a-z]+)_([a-z]+)_([a-z]+)-\d+\.html$
             http://www.bg.com$1-$2-$3-$4-$5 permanent;
 } 
```

*   [http://nginx.org/en/docs/faq/variables_in_config.html](http://nginx.org/en/docs/faq/variables_in_config.html)
*   [http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)
*   [http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)

# javascript - Javascript Eval 是邪恶的，但仅在某些情况下？

> ID：11586594
> 
> 赞同：0
> 
> 时间：2012-07-20T20:34:40.360
> 
> 标签：javascript, eval

> **可能重复：**
> [什么时候 JavaScript 的 eval() 不是邪恶的？](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)

我在想，

*除了`Eval` 再次激活解释器，造成开销，*

唯一可能不好的情况（除了我刚刚写的）是向服务器`JS`发送数据（即`eval'd`）时。

我没有看到任何其他场景，如果用户想玩 js，他只会在他的浏览器边界内玩（除非 JS 正在与服务器交互）。

我对吗？

我很乐意更正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:46:10.570

严格来说，使用 .com 在物理上实际上并没有什么危害`eval`，因为它所做的只是浏览器控制台已经可以做的事情。

存在注入的潜在危险，但这与将任何用户提供的输入放入`<script>`标签中的风险相同，而不是`eval`.

避免的主要原因`eval`是因为它必须解释一个字符串。现在，公平地说，仅仅运行一个 JavaScript 文件基本上与在整个文件上调用一个很大`eval`的文件（广义地说）是一样的，因为 JavaScript 是被解释的（或最多在运行时编译）。因此，`eval`只在用户单击按钮时才运行它的稀疏使用是可以的。`eval`仅当您最终频繁运行（例如循环运行）时，才会出现明显的效果。这就是为什么人们总是会告诉你传递一个函数`setTimeout`而不是一个字符串，例如。

也就是说，*总是*有替代使用`eval`. 它可能需要重写旧代码的一部分，但它总是可以避免的。

# php - PHP Magento Mage_Core_Exception 登录名或密码无效

> ID：11586602
> 
> 赞同：0
> 
> 时间：2012-07-20T20:34:59.513
> 
> 标签：php, magento, login, magento-1.4, fatal-error

我正在运行一个 Magento 商店，并在根文件夹之外创建了一个单独的登录名。我将商店从 Bluehost 移动到 Rackspace 云，现在我在尝试登录时收到此消息

致命错误：未捕获的异常“Mage_Core_Exception”与消息“无效的登录名或密码”。在 myDomain/store/app/Mage.php:536 堆栈跟踪：#0 myDomain/store/app/code/core/Mage/Customer/Model/Customer.php(121): Mage::exception('Mage_Core', '无效登录 o...', 2) #1 myDomain/store/app/code/core/Mage/Customer/Model/Session.php(182): Mage_Customer_Model_Customer->authenticate('user@myDomain....', 'password') #2 myDomain/dashboard/setup_mage.php(16): Mage_Customer_Model_Session->login('user@myDomain....', 'password') #3 myDomain/dashboard/all_includes.php(7): require_once ('/home/myDomain/p...') #4 myDomain/dashboard/dashboard.php(4): require_once('/home/myDomain/p...') #5 {main} throw in myDomain/store /app/Mage.php 第 536 行

额外信息

在原始 bluehost 网站上运行良好。

将站点移动到机架空间后，我清空了 var/cache 和 var/session 中的所有缓存和会话，并将 core_config_data 表中的所有 URL 更改为新域。

网站工作找到，但只是试图登录它踢出这个致命错误。

我的登录代码：

```
 umask(0);
          Mage::app("default");
          Mage::getSingleton("core/session", array("name"=>"frontend"));
          $session = Mage::getSingleton("customer/session");
          $email=$_POST['miniLogin']['username'];
          $password=$_POST['miniLogin']['password'];

          $session->login($email, $password); 
```

$session = Mage::getSingleton("customer/session"); 处的致命错误消息

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:51:33.120

我将登录名放在 try 块中，问题就解决了。

```
try{ 
    $session->login($email, $password);
   }
catch(Exception $e) {} 
```

# c++ - std::vector::operator[] 不测试类型

> ID：11586608
> 
> 赞同：4
> 
> 时间：2012-07-20T20:35:25.890
> 
> 标签：c++, vector, type-conversion

我有一个这样的结构：

```
struct VrtxPros{
    long idx;
    std::vector<std::string> pros;
    VrtxPros(const long& _idx=-1, const std::string& val="") : idx(_idx)
    {
         if ( !val.empty() && val!="" )
             pros.push_back(val);
    }
}; 
```

后来在代码中我像这样使用它：

```
long idx = 1234;
VrtxPros vp( 2134, std::string("-1") );
if ( margin ) vp.pros[0] = idx; 
```

编译器对此没有问题。我想知道，因为运营商应该提供参考。我[找不到](http://en.cppreference.com/w/cpp/string/basic_string/operator=)一个可以接受 long 的来源`operator=`。`std::string`

为什么代码会编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:44:55.473

A`std::string`可以分配给 a `char`，并且 a`long`可以隐式转换为 a `char`，因此 a`std::string`可以分配给 a `long`。您的编译器可能会对这种隐式转换发出警告（如果您还没有看到，请调高警告级别，您会看到它）。

[请参阅此处](http://en.cppreference.com/w/cpp/string/basic_string/operator%3D)`operator=`列出的#4 。注意没有[构造函数重载](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)只需要一个字符，所以这种事情只能用于赋值。

就此而言，您也可以这样做：

```
std::string wow;
wow = 7ull; // implicit unsigned long long to char conversion
wow = 1.3f; // implicit float to char conversion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:50:21.913

使用 -Wconversion for g++ 来获取从 long 到 char 的隐式转换的警告。

# java - Java：当该字段未公开时，如何模拟该字段的方法？

> ID：11586613
> 
> 赞同：16
> 
> 时间：2012-07-20T20:35:44.193
> 
> 标签：java, unit-testing, junit, mockito

我正在使用 Java 6、JUnit 4.8.1 并编写控制台应用程序。我的应用程序有一个未公开的成员字段……</p>

```
public class MyApp { 
    ...
    private OpportunitiesService m_oppsSvc;

    private void initServices() { 
        …
        m_oppsSvc = new OpportunitiesServiceImpl(…);
    }
    ...
} 
```

我想模拟一种行为，这样每当我的服务中的一个方法被调用（例如`m_oppsSvc.getResults()`）时，总是返回相同的结果。我怎么做？该字段没有设置方法。我目前正在使用 Mockito 1.8.4。是否可以使用 Mockito 或其他一些模拟框架来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T22:55:22.127

这就是你想要的：

```
@RunWith(MockitoJUnitRunner.class)
public class MyAppTest { 

    @Mock private OpportunitiesService mocked_m_oppsSvc;
    @InjectMocks MyApp myApp;

    @Test public void when_MyApp_uses_OpportunititesService_then_verify_something() { 
        // given
        given( mocked_m_oppsSvc.whatever()).willReturn(...);

        // when
        myApp.isUsingTheOpportunitiesService(...);

        // then
        verify...
        assertThat...
    }
} 
```

使用：[Mockito 1.9.0](https://code.google.com/p/mockito/)，[BDD 风格](http://en.wikipedia.org/wiki/Behavior-driven_development)，~~[FEST-Assert](https://code.google.com/p/fest/)~~ [AssertJ](https://github.com/joel-costigliola/assertj-core)。

希望有帮助:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-21T01:17:41.667

鉴于您已经在使用 mockito，为什么不直接使用反射：

```
@RunWith(MockitoJUnitRunner.class)
public class MyApp { 

    @Mock
    private OpportunitiesService m_oppsSvc;

    private MyApp myApp;

    @Before
    public void before() throws Exception {
       myApp = new MyApp();
       Field f = MyApp.class.getDeclaredField("m_oppsSvc");
       f.setAccessible(true);
       f.set(myApp, m_oppsSvc);
    }
} 
```

这有点难看，但它会解决问题。请注意，这可能不是使用 Mockito 最有效的方法，但它会起作用。

还有 Powermock 应该允许您使用 Whitebox 类来执行此操作。我不会深入了解 Powermock 的全部细节，但这里是注入私有字段值的调用，它应该是一个模拟对象：

```
Whitebox.setInternalState(myApp, "m_oppsSvc", m_oppsSvc); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-20T20:41:18.703

您应该将模拟私有字段的尝试视为一种[气味](http://en.wikipedia.org/wiki/Code_smell)。也就是说，这表明您尝试执行的操作不正确，或者您的代码当前结构不正确。您应该只需要模拟公共方法或注入依赖项

在您提供的代码中，您应该考虑注入 OpportunitiesService，如下所示：

```
public class MyApp { 
    ...
    private OpportunitiesService m_oppsSvc;

    public MyApp(OpportunitiesService oppsSvc) {
        this.m_oppsSvc = oppsSvc;
    }
    ...
} 
```

然后，在您的测试中，您可以按如下方式注入模拟：

```
OpportunitiesService mockOpportunitiesService =
    Mockito.mock(OpportunitiesService.class);
Mockit.when(mockOpportunitiesService.someMethod()).thenReturn(someValue);
MyApp app = new MyApp(mockOpportunitiesService); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T20:52:12.657

您可以使用 JMockit 轻松完成：

```
public class MyAppTest
{
    @Tested MyApp myApp;

    @Test
    public testSomething(final @Capturing OpportunitiesService mockService)
    {
        new NonStrictExpectations() {{
            mockService.getResults(); result = asList("a", "b", "C");
            // record other expectations, if needed
        }};

        myApp.whateverMethodIWantToTest();

        new Verifications() {{
            mockService.doSomething(anyInt);
            // verify other expectations, if needed
        }};
    }
} 
```

即使`OpportunitiesServiceImpl`在测试代码中没有提到实现类，它的实例（任意数量）仍然会被正确地模拟。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T20:39:04.920

通常，您应该使用依赖注入并通过构造函数、单独的设置器或直接将模拟对象（OppportunitiesServiceImpl 类型）传递给方法（getResults）。您可能需要先为 OpportunitiesServiceImpl 提取一个接口。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-20T20:39:45.490

通常，这是通过使用依赖注入来解决的。在常规（生产）模式下，您的依赖注入容器（例如 Spring 或 Guice）将通过您的构造函数或通过 setter`OpportunitiesService`注入in 的实例。`MyApp`

然后，当您进行测试时，您可以使用相同的 setter 或构造函数参数手动“注入”模拟实例。

而不是做

```
m_oppsSvc = new OpportunitiesServiceImpl(…); 
```

尝试`OpportunitesService`通过`MyApp`的构造函数传入

# iphone - 在 Objective-C 中搜索字符串的最快方法是什么？

> ID：11586618
> 
> 赞同：8
> 
> 时间：2012-07-20T20:36:01.740
> 
> 标签：iphone, objective-c, ios

我正在为 iOS 应用程序实现一种自动完成功能。我用于自动完成值的数据是一个逗号分隔的文本文件，包含大约 100,000 个字符串。这就是我现在正在做的事情：

1.  阅读文本文件，并创建一个`NSArray`100,000 `NSString`。
2.  当用户键入时，执行`[array containsObject:text]`

当然有更好/更快的方法来进行此查找。有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T20:42:34.573

绝对有！但它不是“在 Objective-C 中”：很可能，您需要自己编写代码。

这个想法是将您的字符串列表转换为[*后缀树*](http://en.wikipedia.org/wiki/Suffix_tree)，这是一种可以让您非常快速地按前缀搜索的数据结构。在后缀树中搜索可能的补全非常快，但结构本身并不容易构建。在 Internet 上进行的快速搜索显示，在 Objective C 中没有现成的实现，但您可以[移植](http://illya-keeplearning.blogspot.com/2009/04/suffix-trees-java-ukkonens-algorithm.html) [另一种语言](http://code.google.com/p/simplesuffixtree/)的实现，[使用 C 实现](http://mila.cs.technion.ac.il/~yona/suffix_tree/)，或者如果您不是特别紧迫，甚至可以编写自己的实现。

也许更简单的方法是按字母顺序对字符串进行排序，并对到目前为止输入的前缀运行二进制搜索。尽管不如后缀树高效，但排序数组方法对于 100K 字符串来说是可以接受的，因为您在 17 次检查中就找到了正确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:59:14.747

最简单的可能是二进制搜索。见`-[NSArray indexOfObject:inSortedRange:options:usingComparator:]`。

特别是，我会尝试这样的事情：

*   对保存到文件的数组进行预排序
*   当您加载数组时，可能`@selector(compare:)`（如果您担心它会意外地未排序或 Unicode 排序顺序会因某些边缘情况而改变）。假设数组大部分已经排序，这应该大约是 O(n)。
*   为了找到第一个潜在的匹配，`[array indexOfObject:searchString inSortedRange:(NSRange){0,[array count]} options:NSBinarySearchingInsertionIndex|NSBinarySearchingFirstEqual usingComparator:@selector(compare:)]`
*   遍历数组，直到条目不再包含 searchString 作为前缀。您可能想要进行大小写/变音符号/宽度不敏感比较以确定它是否是前缀 (NSAnchoredSearch|NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch|NSWidthInsensitiveSearch)

这可能无法“正确”处理所有语言环境（尤其是土耳其语），但也不会替换`compare:`为`localizedCompare:`，也不会天真的字符串折叠。（它只有 9 行长，但花了大约一天的工作时间才弄好，大约有 40 行代码和 200 行测试，所以我可能不应该在这里分享。）

# assembly - 相对偏移量跳跃

> ID：11586622
> 
> 赞同：1
> 
> 时间：2012-07-20T20:36:37.420
> 
> 标签：assembly, x86, nasm, gnu-assembler

如何强制相对偏移的值？

我知道该怎么做：**jmp label_name**

想做的事：**jmp $0x01**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:39:39.727

您可以使用相对跳转，例如

```
jmp $+5 
```

它相对于跳跃的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:25:50.893

语法问题... Nasm 将使用“$ + 5”，（G）将使用“. + 5”，并且可能还需要一个“$”（？）。我从原始标签中了解到，我们使用的是 Nasm？那么“$ + 5”应该是正确的，但可能不会做你想做的事。asm 语法将是“jmp target”（或 Gas 的“jmp $target”？），您会在反汇编中看到相同的内容……但请仔细查看正在生成的字节。“jmp”操作码后面是“到目标的距离”，而不是“目标”！如果您想编写“到目标的距离”，我认为您需要使用“db 0xE8”（或适当的操作码），然后是“db（或 dw 或 dd）0x??” （我认为，Gas 是“.byte”或“.long”）。这可能不是你想要做的。

最好的，弗兰克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-12T21:10:54.117

GAS 和 NASM 没有直接设置 rel8 或 rel32 位移的语法，只有目标地址。（例如`jmp +0`被解释为跳转到绝对地址 0，或语法错误）。

`.byte`您可以使用/ `.long`(GAS) 或`db`(NASM 和大多数其他非 GAS x86 汇编程序)手动对其进行编码。请注意，相对分支位移是相对于分支指令的*结尾的。*

```
 db  0xEB, 0x01    ; jmp short +1   over the 1-byte nop
    nop                   
 jump_target:    
    db  0xE9
        dd    -5     ;  jmp near -5    also jump backwards to jump_target, i.e. to itself 
```

（GAS 将是相同的，但使用`.byte`and`.long`而不是`db`and `dd`）

* * *

**或者，使用语法来描述相对于行首的地址**

```
jmp short  $+3           ; rel8 = +1      NASM, forcing the jmp size to 2 bytes

jmp  .+3                 # rel8 = +1      GAS 
```

[$ 究竟是如何在 NASM 中工作的？](https://stackoverflow.com/questions/47494744/how-does-work-in-nasm-exactly)显示了手动编码分支以到达给定目标、`$`从目标地址中减去（当前输出位置）并调整分支长度的示例。

这里我们需要考虑分支长度来获得所需的相对偏移编码，因为我们的参考点`$ + x`是指令的开始，而不是结束。我们可以在最后加上一个标签：

```
 jmp  .rel_anchor + 123       ; rel8= +123   NASM local label
.rel_anchor:

   jmp  1f + 123; 1:            # GAS local label on the same line but a separate statement
 1:                             # It might be more readable to put the label here. 
```

这确实有效，我们`eb 7b`从 GAS 获得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-09T02:48:02.183

这是我为了好玩而制作的示例用法。（使用 NASM）

```
BITS 32
segment .text
global _start
_start:
    jmp tmp
    PUSH 0x68732f
    PUSH 0x6e69622f
    LEA EBX,[ESP]
    ; ...
_jumpstop:
    tmp equ ($ - _start) 
```

这样一旦编译它就变成

```
00000000  E90D000000        jmp 0x12
00000005  682F736800        push dword 0x68732f
0000000A  682F62696E        push dword 0x6e69622f
0000000F  8D1C24            lea ebx,[esp] 
```

这样跳跃在之后立即着陆`lea ebx,[esp]`

# c - 从另一个线程使用 va_list

> ID：11586625
> 
> 赞同：6
> 
> 时间：2012-07-20T20:36:46.217
> 
> 标签：c, printf, variadic-functions, freertos

我在一个小型嵌入式系统上使用 FreeRTOS (newlib)，发现 printf 和家庭浪费了大量的堆栈空间。我有很多任务，而且我没有足够的内存来使每个堆栈都足够大以支持 printf() 调用。为了解决这个问题，我正在创建一个“printf 服务器”任务，该任务将有一个大堆栈并代表其他任务执行所有 printf()。

所以我的问题是，将 va_list 传输到另一个线程（任务）的正确方法是什么？下面的示例生成垃圾参数。

简单介绍一下它是如何工作的：task_printf() 会将其参数放入静态变量中，然后向 server_task 发出信号以执行实际打印。当 server_task 完成时，它会通知客户端继续。

```
// printf parameters
static va_list static_args;
static const char *static_format;
static int static_result;

// printf server task.  Processes printf requests forever
void server_task(void *pvParameters)
{
    while(1)
    {
        xSemaphoreTake(printf_start, portMAX_DELAY);  // wait for start command
        static_result = vprintf(static_format, static_args);
        xSemaphoreGive(printf_finished);  // give finish signal
    }
}

// get server task to print something for us
int task_printf(const char *format, ...)
{
    int result;

    xSemaphoreTake(printf_mutex, portMAX_DELAY); // lock

    va_start(static_args, format);
    static_format = format;

    xSemaphoreGive(printf_start);  // give start signal
    xSemaphoreTake(printf_finished, portMAX_DELAY);  // wait for completion

    va_end(static_args);

    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:36:46.217

好吧，以上内容现在确实有效。我搞砸了信号量初始化（未显示），它允许调用者的堆栈在 printf 服务器可以使用它们之前丢弃 args。

# c - C中的ECDH库？

> ID：11586627
> 
> 赞同：-1
> 
> 时间：2012-07-20T20:36:54.147
> 
> 标签：c, encryption, open-source

我已经成功地将[SJCL](http://crypto.stanford.edu/sjcl/)用于[ECDH](http://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman)，但那是 Javascript，我需要一个 C 端口。我找到了 C 端口，但它们要么是某个大型项目的一部分，要么是某些与 SJCL 等通用 ECDH 不兼容的专用 ECDH。我需要一个微处理器项目的最小开源 ECDH C 实现。我宁愿自己不做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:21:43.940

如果 GPL 没问题，就有[SECCURE](http://point-at-infinity.org/seccure/)

我没有亲自使用过它，但几个月前在评估我的宠物项目选项时确实偶然发现了它。

# ruby-on-rails-3 - 在 Rails 中自动将文本添加到图像

> ID：11586631
> 
> 赞同：1
> 
> 时间：2012-07-20T20:37:10.963
> 
> 标签：ruby-on-rails-3, image-processing, imagemagick

有没有办法通过自动方式将文本添加到图像上，例如[http://www.pinwords.com/](http://www.pinwords.com/)可以做什么？我正在使用 Rails，所以任何 API 驱动或兼容 Rails 的东西都可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:45:41.467

[http://www.imagemagick.org/](http://www.imagemagick.org/)可以进行许多不同类型的图像处理，包括添加文本。它有一个红宝石界面。

# entity-framework - web.config 更新后 Edmx 连接字符串不会改变

> ID：11586640
> 
> 赞同：0
> 
> 时间：2012-07-20T20:38:14.690
> 
> 标签：entity-framework

我有一个实体框架设计器文件 (edmx)，它有一个指向我的 web.config 的连接字符串。这很好用。

如果我更改连接字符串，我会在网站运行时看到更改，但更改连接字符串并更新我的 edmx 设计器会导致使用最初指定的连接字符串。

经过进一步调查，查看设计器属性显示它正在使用我的 web.config 中的连接字符串，但没有反映我在 web.config 中更改的任何值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:15:27.080

我发现 web.config 中现有的连接字符串之一导致了这个问题。很奇怪。它碰巧是一个不再使用的连接字符串，因此删除它可以解决问题。

# javascript - 优化 jQuery 表搜索

> ID：11586644
> 
> 赞同：1
> 
> 时间：2012-07-20T20:38:52.907
> 
> 标签：javascript, jquery, performance, dom

我有一个看起来像这样的网页（简化示例）

```
<table id="events_results_table">
    <thead>
        <tr>
            <th class="header">Title One</th>
            <th class="header">Title Two</th>
        </tr>
    </thead>
    <thead>
        <tr>
            <td><input id="search" type="text" /></td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>value 1</td>
            <td>...</td>
        </tr>
        <tr>
            <td>value 2</td>
            <td>...</td>
        </tr>
    </tbody>
</table> 
```

我在那个页面上也有一些 javascript，看起来像这样

```
$("#search").keyup(function(event){
    var theText = $('#search').val();
    $('#events_results_table tbody tr td').closest('tr').hide();
    $('#events_results_table tbody tr td:contains("'+theText+'")').closest('tr').show();
}); 
```

这实现了一个基本的文本过滤器，当用户在搜索字段中输入字母时，不匹配的行被隐藏，匹配的行显示。一个简单的表格搜索。

问题是，如果表中有几百行，这种简单的实现就会遇到性能瓶颈。行并不总是响应键盘，或者键盘中的输入会阻塞，直到表格跟上为止。

是否有“已知的科学”以高性能的方式实现这种功能？我自己可以想出一些不同的方法，但想确保在开始之前我没有重新发明一个已经解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:41:38.640

Yes there is, setting a ~0.5 second timeout on typing, resetting the timer when a new key comes in. When the timeout finishes, the results are updated. No one will watch the results while actually typing a word.

While this doesn't actually improve **performance**, it improves the **usability** a lot.

# php - 从组件 cakephp 向元素发送数据

> ID：11586650
> 
> 赞同：0
> 
> 时间：2012-07-20T20:39:07.853
> 
> 标签：php, cakephp, cakephp-1.3

是否可以通过调用`$this->element('path_to_element', $data);`或其他方式将一些数据传递给 cakephp 中组件内的元素？

任何人请让我知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:52:23.907

如果您保留对控制器的引用，则可以从组件中设置视图变量。然后在您的视图中，您将该视图变量传递给元素。

您可以使用此处找到的方法之一[http://book.cakephp.org/1.3/view/996/Creating-Components#MVC-Class-Access-Within-Components-998](http://book.cakephp.org/1.3/view/996/Creating-Components#MVC-Class-Access-Within-Components-998)来保留对控制器的引用，然后当您需要只是`$this->ControllerReference->set('viewVarName', 'data')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:43:49.333

如果我理解的话，你可以传入一个值数组，你需要做的就是：

```
echo $this->element('myelement', array(
    'myvar1' => $myvarvalue, 
    'myvar2' => $myvarvalue2)); 
```

然后在您的元素代码中，您可以访问 $myvar1 和 $myvar2。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:57:59.657

有一个更好的出路。我一直在我所有的项目中使用这个技巧。在你的项目中使用会话。让它活跃起来。

在示例元素中。您可以使用 layout.ctp 编写会话或您的 selectef 控制器。下面我正在使用 cakephp auth session.Enjoy.Hope 它会解决您的问题:)

```
<?php if($this->Session->check('Auth.user')){ ?>

        <span id="uname_wel">Welcome <?php echo $session->read('Auth.user.username'); ?></span>

<?php } ?> 
```

否则，您可以[在此处查看此链接](http://book.cakephp.org/1.3/en/view/1082/Passing-Variables-into-an-Element)

或者，如果您正在从视图加载元素，那么您可以像往常一样将数据传递给视图，然后您可以从元素页面内部访问......例如：`$this->set('result_array',$data);`

# jquery - 通过“addTab”添加的选项卡不可点击或激活

> ID：11586652
> 
> 赞同：0
> 
> 时间：2012-07-20T20:39:14.843
> 
> 标签：jquery, tabs

我有这些 jquery 选项卡，当我在页面上动态添加一个新选项卡时，它被选中。现在的问题是动态/页面上添加的选项卡无法再次被选中。

例如：有一个选项卡。我添加了一个新选项卡，现在它被选中我可以打开第一个选项卡，但我无法再次打开第二个选项卡。

这是jscode $(function() {

```
//When page loads...
$(".tab_content").hide(); //Hide all content
$("ul.tabs li:first").addClass("active").show(); //Activate first tab
$(".tab_content:first").show(); //Show first tab content

//On Click Event

$("ul.tabs li").click(function() {

    $("ul.tabs li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $(".tab_content").hide(); //Hide all tab content

    var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active ID content
    return false;
});

    //Addtab
        var fields = $("ul.tabs li").length;
    $("a.pekle").click(function() {fields += 1;
    $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $("ul.tabs").append('<li class="active"><a href="#tab'+fields+'">'+fields+'. Parca</a></li>').hide().fadeIn(500);
        $("div.tab_container").append('<div id="tab'+fields+'" class="tab_content"> Tab'+fields+'</div>');
    $(".tab_content").hide(); //Hide all tab content
    $("#tab"+fields).fadeIn(); //Fade in the active ID content
    return false;});
    //EndAddtab
});
</script> 
```

HTML

```
<a class="pekle" onClick="addTab()">+ Parca Ekle</a>
<ul class="tabs">
    <li><a href="#tab1">Parca 1</a></li>
</ul>
<div id="tab1" class="tab_content">blabala</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:53:11.923

这里有几件事不对劲。首先`tab_container` ，您的示例中没有包含您，我假设您想像这样将其包装在内容周围`div's`。

```
<a class="pekle" onClick="addTab()">+ Parca Ekle</a>
<ul class="tabs">
    <li><a href="#tab1">Parca 1</a></li>
</ul>
<div class="tab_container">
    <div id="tab1" class="tab_content">blabala</div>
<div>​ 
```

其次，因为您正在动态添加选项卡，所以您需要使用[.on()](http://api.jquery.com/on/)事件处理程序而不是单击来委派单击处理程序。

> 如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

```
$("ul.tabs").on('click', 'li', function() {

    $("ul.tabs li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $(".tab_content").hide(); //Hide all tab content
    var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active ID content
    return false;
}); 
```

**[你可以在这里看到一个工作演示](http://jsfiddle.net/62DAy/1/)**。

希望有帮助。

# gps - 需要什么卡尔曼滤波器

> ID：11586663
> 
> 赞同：8
> 
> 时间：2012-07-20T20:40:11.663
> 
> 标签：gps, tracking, kalman-filter

我希望改进我继承的应用程序的 gps 跟踪。我们跟踪纬度、经度和高度。跟踪后，我们给出速度、距离和垂直下降的统计数据。该代码当前使用低通滤波器来控制高度，但对纬度没有任何作用。这会导致速度、距离等问题。

我正在考虑实施卡尔曼滤波器来帮助降低噪音。我的问题是关于卡尔曼滤波器的不同版本。有了我们需要跟踪的内容，我可以使用卡尔曼滤波器还是需要研究扩展/无味卡尔曼滤波器？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:06:47.577

您将需要**扩展**卡尔曼滤波器，因为物体移动的物理模型是非线性的。

它可能会受到加速度、方向变化等影响，因此卡尔曼滤波器将无法正确跟踪它。调整扩展卡尔曼滤波器更加棘手，但您可以找到很多关于此的论文和信息。

# javascript - Rally.environment.getContext().getWorkspace() 为空

> ID：11586664
> 
> 赞同：2
> 
> 时间：2012-07-20T20:40:13.330
> 
> 标签：javascript, rally

首先让我说我是 Rally 及其 SDK 的新手。我已经成功地运行了一些从文档中复制的代码，方法是将其直接发布到 Rally 中的自定义应用程序中，但是当我尝试查看`App-debug.html`文件时，我在 JavaScript 调试控制台中收到以下错误：

```
Rally.environment.getContext().getWorkspace() is null 
```

不太了解 Rally SDK 的内部工作原理，我不确定如何解决这个问题。我无法在网上找到任何帮助，Rally 的代表似乎也没有明确的答案。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:59:47.990

这是 AppSDK 预览版的一个问题，当您的用户没有默认项目和工作区设置时会发生此问题。如果您在 Rally 应用程序中，这些函数将返回显示在应用程序左上角的工作区和项目。由于您的应用程序未托管在 Rally 应用程序中，因此它使用您的默认项目和工作区作为当前设置的备份。

现在最简单的解决方法是按照帮助[系统](http://www.rallydev.com/help/set-your-profile)中的说明设置默认用户名和密码。

祝你的第一个应用程序好运！

# jsp - 更新网页（jsp、servlet）

> ID：11586669
> 
> 赞同：-1
> 
> 时间：2012-07-20T20:40:52.193
> 
> 标签：jsp, servlets, comet

我正在通过 servlet 和 jsp 页面编写国际象棋游戏。这是我的问题：

当玩家 1 移动他/她的坚果时，我想更新玩家 2 的 jsp 页面，玩家 2 可以看到玩家 1 的移动。tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:39:25.987

您必须使用[Comet 框架](http://en.wikipedia.org/wiki/Comet_%28programming%29)（HTTP 请求允许 Web 服务器将数据推送到浏览器，而无需浏览器显式请求）来开发此类*应用*程序。

查看包含用于构建异步 Web 应用程序的客户端和服务器端组件的[Atmosphere Framework 插件和扩展。](https://github.com/Atmosphere/atmosphere/wiki/Atmosphere-PlugIns-and-Extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:44:53.590

这是一个相当广泛的问题。您可以使用的一件事是轮询（使用 Ajax）。这样，两个浏览器都会轮询 Web 服务器并获取游戏的最新状态。可以使用 JavaScript 适当地刷新 UI。

更传统的方法是指定将定期刷新页面的元元素。

```
<meta http-equiv="refresh" content="600"> 
```

# jquery - jQuery fadein() fadeout() 问题，暂时将 div 向下推直到它完全淡出

> ID：11586676
> 
> 赞同：0
> 
> 时间：2012-07-20T20:41:08.500
> 
> 标签：jquery, html, css

我在使用 jQuery 和淡入淡出 div 时遇到问题。我有 3 个选项卡，每个选项卡对应一个单独的 div，应该淡入并淡出其他 div。但是，当我单击一个选项卡时，它会淡入淡出，就像它应该的那样，但它会暂时将内容向下推。我可以轻松使用 CSS，`position:absolute`但那是我最后的**最后手段！** 我正在寻找更多的 jQuery 修复程序。

这是一个 jsfiddle 来显示我想说的：http: [//jsfiddle.net/swYYy/](http://jsfiddle.net/swYYy/)

**到目前为止，所有给出的答案都没有按预期工作，他们工作了一半的时间，仍然有太多的错误无法有效。我仍在寻找合理的答案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:51:32.850

如果你取出 add() 那么它会根据你的喜好工作，但它不能完全工作

[http://jsfiddle.net/swYYy/7/](http://jsfiddle.net/swYYy/7/)

我知道你想做什么给我一秒钟，我会为你提供更好的东西

更新：

使用这个[http://jsfiddle.net/swYYy/9/](http://jsfiddle.net/swYYy/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:57:50.313

这对我有用。仅使用 tab2 单击进行了测试：

```
$('#tab2').click(function() { 
   $('#page1, #page3').stop(true,true).fadeOut(1000).promise().done(function() {
      $('#page2').fadeIn(1000);
   });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:08:57.360

**更新和短小提琴：http:** [//jsfiddle.net/swYYy/12/](http://jsfiddle.net/swYYy/12/)

JS代码如下：

```
$('#page2').hide();
$('#page3').hide();
$('.settings-options-tab').click(function() { 
    var index=$('.settings-options-tab').index(this);
    $('div[id^=page]:visible').stop(true,true).fadeOut(1000, function() {
        $('.settings-pages').hide();
        $('.settings-pages:eq('+index+')').fadeIn(1000);
    });
});
​ 
```

# java - Java BufferedReader.readLine() 不等待 EOL？

> ID：11586677
> 
> 赞同：4
> 
> 时间：2012-07-20T20:41:12.133
> 
> 标签：java, bufferedreader, inputstreamreader, bytearrayinputstream

对不起，如果我在这里遗漏了一些明显的东西......但请看一下这段代码片段：

```
String readString;
String writeString = "O hai world.";
BufferedReader br = new BufferedReader(
    new InputStreamReader( 
        new ByteArrayInputStream(writeString.getBytes()),
        "UTF-8"),
    1024);
readString = br.readLine();
System.out.println("readString: " + readString); 
```

我希望这会打印“readString：null”，因为我认为 BufferedReader 在检测到有效 EOL 之前会遇到 EOF，但它会打印“readString：O hai world”。这似乎与 BufferedReader 的 Javadocs 所说的 readLine() 将做的相反：

> 读取一行文本。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。
> 
> 返回： 包含行内容的字符串，不包括任何行终止字符，如果已到达流的末尾，则返回 null

我看不出我的字符串会被重新解释为以 '\n' 和/或 '\r' 结尾的任何理由......有人可以照亮我吗？谢谢！

**编辑**：为了提供一些上下文，我正在尝试编写 JUnit 测试来验证我编写的旨在在 System.in 上读取的 Reader 类。使用 ByteArrayInputStreams 似乎是模拟 System.in 的一种合理方式（请参阅[此相关 SO 帖子](https://stackoverflow.com/questions/1647907/junit-how-to-simulate-system-in-testing)）。

当我的阅读器捕获一行时，它当前依赖于 BufferedReader.readLine()。出于我的目的，我的读者行必须都以 '\n' 或 '\r' 结尾；遇到没有 EOL 的 EOF 不应解析为有效行。所以我想我此时的问题实际上如下（我会在有时间的时候自己更详细地测试这些问题，但希望你们聪明的人能帮助我）：

*   BufferedReader.readLine() 是否损坏/错误记录？或者当它的字节数组用完时，ByteArrayInputStream 是否返回了错误的东西？
*   这种测试我的阅读器的方法是否错误，我是否应该期望 readLine() 在针对 System.in 使用时正常运行？我倾向于相信这个问题的答案是肯定的。
*   有没有更好的方法来模拟 System.in 以进行单元测试？
*   如果我需要在从 InputStream 读取时严格区分“\n”和“\r”，我最好编写自己的 readLine() 方法吗？如果是这种情况，我会感到非常惊讶。

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:02:16.113

ByteArrayInputStream 用尽时不会返回 EOL。它只返回可能被视为 EOF 的 -1。

问题是 BufferedReader 缓冲它从输入流中读取的所有内容，如果在任何 EOL 字符出现之前遇到 EOF(-1)，它会返回缓冲到该点的字符串。

所以，如果你想非常严格，你可以说 readLine() 要么根据当前文档被破坏，要么如果这是预期的行为，它应该以不同的方式记录。

在我看来，考虑到流中的最后一行不必以 EOL 字符结尾（EOF 就足够了）， readLine 的当前行为是正确的，即因为遇到 EOF 而读取了一行。因此，应该更改文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:51:20.863

我想这会阻止您从真正的流（例如网络套接字）中读取。但是由于底层输入是一个数组，读者知道已经到达了数据的真正末尾，因此没有必要进行阻塞，因为没有新数据即将到来。因此，阻止将是错误的做法。返回读取实际数据的空值也是错误的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:43:08.490

我相信您想要一个“机器人”来模拟击键以进行测试：

> *   [http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)
> 
> 此类用于生成本地系统输入事件，用于测试自动化、自运行演示和其他需要控制鼠标和键盘的应用程序。Robot 的主要目的是促进 Java 平台实现的自动化测试。

这是一篇进一步讨论它的文章：

*   [http://www.developer.com/java/other/article.php/2241561/An-Automated-Test-Program-using-the-Java-Robot-Class.htm](http://www.developer.com/java/other/article.php/2241561/An-Automated-Test-Program-using-the-Java-Robot-Class.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:45:18.447

你希望这个版本的代码会发生什么？

```
String readString;
String writeString = "O\nhai\nworld.";
BufferedReader br = new BufferedReader(
    new InputStreamReader( 
        new ByteArrayInputStream(writeString.getBytes()),
        "UTF-8"),
    1024);
while (true) {
    readString = br.readLine();
    if (readString == null) break;
    System.out.println("readString: " + readString);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T05:09:15.540

它现在所做的唯一替代方法是将最后的不完整行扔掉。不可取。

# backbone.js - 骨干模型 isNew === true，即使分配了 ID

> ID：11586678
> 
> 赞同：1
> 
> 时间：2012-07-20T20:41:14.067
> 
> 标签：backbone.js

我有一个主干模型：

```
var User = Backbone.Model.extend({
  idAttribute: '_id',

  url: '/api/user',

  defaults:
    { username: ''
    },

  initialize: function () {
    console.log(this, this.isNew());
  }
}); 
```

然后我初始化模型并获取实例：

```
var user = new User();

user.fetch(); 
```

这行得通。如果我检查`user`，有一个`id`属性。它存在于服务器上。但是，由于某种原因`user.isNew()`，报告为 true - 即使它具有`id`属性集（属性和属性）。我需要在服务器上更新这个模型，但是 Backbone 坚持在`POST`我需要的时候发送请求`PUT`……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:01:01.000

在获取完成之前运行初始化。isNew 值将改变，直到服务器应答到达。侦听模型上的更改事件或将回调传递给 fetch 调用。

```
var user = new User();

user.fetch({success : function(){
  console.log( user.isNew() );
}}); 
```

# asp.net - 您将如何在 Web 应用程序 (asp.net) 中传递 SSH 的用户名和密码

> ID：11586679
> 
> 赞同：0
> 
> 时间：2012-07-20T20:41:14.387
> 
> 标签：asp.net, ssh

我知道这不一定是 stackoverflow 的最佳风格问题，但话虽如此，我已经就这个问题提出了很多问题，但我想知道你将如何处理它。

我正在 asp.net 中创建一个 Web 应用程序，我需要连接到 UNIX 服务器来运行远程 perl 脚本。我目前正在这样做

```
Removed code for personal reasons 
```

如果我对我的用户名和密码进行硬编码，这可以正常工作，但我正在尝试创建一个模式窗口来传递可能不是最安全的值。

那么，您将如何做到这一点 - 这是主观的，如果需要，我可以关闭这个问题......

编辑：我忘了说，我将连接到许多不同的服务器，所以公钥/私钥不是最好的选择。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:15:05.363

只需在 https 上运行您的网站，即安装 SSL 证书。这将加密传输的数据。不会以纯文本形式传输任何内容。

# asp.net - web.config 中的自定义错误

> ID：11586682
> 
> 赞同：1
> 
> 时间：2012-07-20T20:41:26.130
> 
> 标签：asp.net, web-config

我想设计一个通用错误页面，通过 HTTP 状态错误显示不同的消息。是否可以？

```
<customErrors mode="RemoteOnly" redirect="GenericErrorPage.htm"> 
```

例如，如果

```
 error statusCode="403" 
```

然后显示

```
 Access Denied! 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:44:13.983

是的，有可能，尝试类似：

```
 <customErrors mode="On">
    <error redirect="~/GenericError.aspx" statusCode="404"/>
  </customErrors> 
```

但是请记住，如果您在 IIS 7 中托管 Web 应用程序，则需要按如下方式定义自定义错误：

```
 <system.webServer>
    <httpErrors existingResponse="Replace" errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="GenericError.aspx" responseMode="Redirect"  />
    </httpErrors>
  </system.webServer> 
```

## 编辑 1

如果您想要一个通用的 ASPX 错误页面并根据 HTML 错误状态代码显示错误消息，您可以执行以下操作：

（我刚刚测试过，它有效）

将属性添加`redirectMode="ResponseRewrite"`到您的`customErrors`部分：

```
<customErrors mode="On" defaultRedirect="~/GenericError.aspx" redirectMode="ResponseRewrite" /> 
```

在您的通用错误页面（Page_Load 事件）中：

```
 var ex = HttpContext.Current.Server.GetLastError();
    this.lblMessage.Text += "<br/>" + ex.Message + ex.GetType().ToString();

    if (ex is HttpException)
    {
        var nex = ex as HttpException;
        this.lblMessage.Text += " " + nex.GetHttpCode().ToString();

        switch (nex.GetHttpCode())
        {
            case 404:
                // do somehting cool
                break;
            case 503:
                // do somehting even cooler
                break;
            default:
                break;
        }
    } 
```

# php - 从 php 和 jquery 发送电子邮件

> ID：11586683
> 
> 赞同：0
> 
> 时间：2012-07-20T20:41:32.763
> 
> 标签：php, jquery, ajax

我正在尝试使用 jquery 和 php 发送电子邮件。

我的html代码是

```
<form id="contactform">
            <table border="0" cellpadding="0" cellspacing="0" width="186">
              <tbody>
                <tr>
                  <td bgcolor="#2A677E" width="25">&nbsp;</td>
                  <td bgcolor="#2A677E" width="161">&nbsp;</td>
                </tr>
                <tr>
                  <td bgcolor="#2A677E">&nbsp;</td>
                  <td bgcolor="#2A677E"><img src="images/icon-email.jpg" alt="" align="left" height="17" hspace="2" width="27"><span class="text-white">Email this page</span></td>
                </tr>
                <tr>

                  <td bgcolor="#2A677E">&nbsp;</td>

                  <td bgcolor="#2A677E">
                      <input name="email"  onFocus="this.value=''" onMouseOver="window.status='Enter email address here and tell a friend about this site...'; return true" onMouseOut="window.status='';return true" size="22" type="text" class="button required email">
                      <table border="0" cellpadding="0" cellspacing="0" width="80%">
                        <tbody>
                          <tr>
                            <td align="right" height="30"><input class="button-dark"  onMouseOver="window.status='Click to send an email (with this page address) to a friend! Enter email address above...'; return true" onMouseOut="window.status='';return true" value="Send" type="submit">

                            </td>

<div class="saving" style="background-color:#D1F4DA;border:1px solid #017F1F;display:none;width:175px; font-size:12px; padding:5px;text-align:center; margin-left:-25px; margin-top:0px; position:absolute;"><img src="validate/ajax-loader.gif"/> Please Wait Processing Request </div>
                              <div class="success"  style="background-color:#D1F4DA;border:1px solid #017F1F;display:none;width:175px; font-size:12px;padding:5px;text-align:center; margin-left:-25px; margin-top:0px; position:absolute;"> <img src="validate/validYes.png"/> Message Sent.<br />
                                Thanks.</div>
                              <div class="nosuccess" style="background-color:#ffebe8;border:1px solid #dd3c10;display:none;width:175px; font-size:12px;padding:5px;text-align:center; margin-left:-25px; margin-top:0px; position:absolute;"> <img src="validate/failed.png"/> Error Sending Email. </div>                        

                          </tr>

                        </tbody>
                    </table>
                     </form> 
```

我有以下 jquery 代码。

```
<script src="validate/jquery.js" type="text/javascript"></script>
<script id="demo" type="text/javascript">
$(document).ready(function() {
        var validator = $("#contactform").validate({
        submitHandler: function() {

      $('div.sending').fadeIn('slow');
        var a     = <?php echo $_SERVER["HTTP_HOST"].$_SERVER["PHP_SELF"]; ?>;
        var email     = $('#email').attr('value');

          $.ajax({
            type: "POST",
            url: "send_page_friend.php",
            data: "a="+ a +"&email="+ email,
            success: function(html){

                if (html==1){
                $('div.saving').hide();
                $('div.success').fadeIn();
                setTimeout(function() {
                $('div.success').fadeOut('slow');

                }, 3000);
                }

                if (html==2){
                $('div.saving').hide();
                $('div.nosuccess').fadeIn();
                setTimeout(function() {
                $('div.nosuccess').fadeOut('slow');

                }, 3000);
                }

                }
              });
        }

    });

});
</script> 
```

但我得到的错误是，一旦我按下提交按钮，我就会使用查询字符串进入同一页面`/?email=....`

它没有调用那个 php 页面，也没有隐藏 div。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:30:56.770

我可以建议 IMO 更清洁的解决方案。您的 html 至少是带有内联样式的杂乱无章的，jQuery 可以更好，并且 html 格式在样式表中被隔离。

html表单：

```
<form id="contactform" class="t">
    <div class="h">
        <img src="images/icon-email.jpg" alt="" height="17" width="27"><span class="text-white">Email this page</span>
    </div>
    <div>
        <input id="email" type="text" class="button required email">
    </div>
    <div>
        <input id="send" type="submit" value="Send" class="b">
    </div>

    <div class="saving message"> <img src="validate/ajax-loader.gif"/> Please Wait Processing Request </div>
    <div class="success message"> <img src="validate/validYes.png"/> Message Sent.<br />Thanks.</div>
    <div class="nosuccess message"> <img src="validate/failed.png"/> Error Sending Email. </div>
</form> 
```

款式：

```
<style type="text/css">
.t {width:185px; background-color:#2A677E; }
.t div { padding:3px; }    
.b {margin-left:100px;}
div.h {padding-top:14px;}
#email {width:100%;}
.message {display:none; width:175px; font-size:12px; padding:5px; text-align:center; margin-left:-25px; margin-top:0px; position:absolute;}
.saving, .success {background-color:#D1F4DA; border:1px solid #017F1F;}
.nosuccess {background-color:#ffebe8; border:1px solid #dd3c10;}
</style> 
```

javascript (jQuery 1.7+):

```
<script id="demo" type="text/javascript">
$(document).ready(function() {

    // helper function for errorneous responses
    var failed = function() {
        $('div.nosuccess').fadeIn();
        setTimeout(function() {
            $('div.nosuccess').fadeOut('slow');
        }, 3000);
    }

    $('div.saving').ajaxStart(function(){
        $('#send').attr("disabled","disabled");
        $(this).show();
    });

    $('div.saving').ajaxStop(function(){
        $(this).hide();
        $('#send').removeAttr("disabled");
    });

    $('#send').click(function(){
    //var validator = $("#contactform").validate({
        var $ajax = $.ajax({
            url: "send_page_friend.php",
            data: {
                "a": "http://<?php echo $_SERVER["HTTP_HOST"].$_SERVER["PHP_SELF"]; ?>",
                "email": $('#email').attr('value')
            },
            type: "POST",
            cache: false
        });

        $ajax.done(function(r) {
            if (r == '1') {
                $('div.success').fadeIn();
                setTimeout(function() {
                    $('div.success').fadeOut('slow');
                }, 3000);
            } else {
                failed();
            }
        });

        $ajax.fail(function(r) {
            failed();
        });

        return false;
    });
});
</script> 
```

一个好的做法是本地化`$.ajax()`和使用最新的函数`.done()`，`.fail()`并且`.always()`正如 jQuery 页面[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)所建议的那样，因为计划使用 .success()、.error() 和 .complete()在 1.8+ 中被弃用

我不确定你为什么使用`var validator = $("#contactform").validate({ ...`这种方式，所以为了测试目的，我把`$('#send').click(function(){...`

快乐编码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:18:16.600

您正在定义`a`不带引号的变量。应该是这样的，但可能需要某种更值得信赖的转义：

```
var a     = '<?php echo $_SERVER["HTTP_HOST"].$_SERVER["PHP_SELF"]; ?>'; 
```

# iphone - 发送到不可变对象的变异方法 - 在哪里？

> ID：11586685
> 
> 赞同：0
> 
> 时间：2012-07-20T20:41:56.010
> 
> 标签：iphone, xcode, ios5, nsmutablearray, nsuserdefaults

有点卡在这个错误上。

非常基本的错误

```
2012-07-20 12:44:07.462 Picsilk[4286:17903] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object' 
```

我知道这意味着在我的代码中某处我试图将一个对象插入到 NSArray 而不是 NSMutableArray 中。

但是，我没有`insertObject:atIndex:`在我的应用程序中使用方法 -anywhere-。

说真的，我在项目中的所有文件中搜索了“插入”，但什么也没找到。

在使用断点进行一些搜索之后，我发现当我使用 addObject 将对象存储在`NSMutableDictionary`对象中`NSMutableArray`包含的`NSUserDefaults standardUserDefaults`对象中时，似乎出现了问题

```
NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];

if(![userDef objectForKey:@"somekey"])
    [userDef setObject:[[NSMutableArray alloc] init] forKey:@"somekey"];

NSMutableDictionary *data = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"somehtmlstring", @"someid", nil] forKeys:[NSArray arrayWithObjects:@"data",@"id", nil ]];

    [[userDef objectForKey:@"somekey"] addObject:data  ]; 
```

错误发生在最后一行。可以肯定的是，一切都是可变的。我不应该这样使用`NSUserDefaults`吗？

此外，这显然是我实际代码的淡化版本。很确定我已经包含了所有相关的内容，但如果需要，我可以发布实际的代码/目的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:44:22.293

`NSUserDefaults`不是常规收藏。它不容纳你给它的任何东西。`-[NSUserDefaults objectForKey:]`总是会给你一个适当类型的不可变对象。

# java - 在运行时获取当前类名

> ID：11586686
> 
> 赞同：0
> 
> 时间：2012-07-20T20:42:17.883
> 
> 标签：java, java-native-interface

我有两节课：

```
public class UThreadApp {
    public static void main(String[] args) {
        newUThread("umain", args);
            ...
    }
    native void newUThread(String method, String[] args);
}

public class App extends UThreadApp {
    public static void umain(String[] args) {
        ...
    }
} 
```

应用程序执行为`java App`.

`App`继承`main`自调用. `UThreadApp`_ 我必须以编程方式从 Java 或 JNI 获取主类名，以便从 JNI 代码中调用。你有办法做到这一点吗？`main``App.umain``App``App.umain`

`new Object(){}.getClass().getEnclosingClass()`那些自返回后就不起作用的成语`UThreadApp`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:19:50.080

静态方法没有类，也没有`this`引用。`App`只要 main 通常也是可调用的，您的类将“继承” main `App.main`。但是[你不能覆盖](https://stackoverflow.com/q/2223386/1468366)常识中的静态方法。一旦方法被调用，就无法确定调用它的名称是什么。因此，无论在 java 端还是在本机代码中，您所做的任何事情都不会为您提供所需的信息。除了破解 java 可执行文件并找出它的命令行参数或类似的野蛮和不受支持的方法之外，就是这样。

*注意：*您还有一个错误，即静态`main`尝试调用非静态`newUThread`。

你可以做的是这样的事情，离开`static`范围并获得一个合理的`this`指针：

```
public class UThreadApp {
    protected void UThreadApp(String[] args) {
        newUThread("umain", args);
            ...
    }
    native void newUThread(String method, String[] args);
}

public class App extends UThreadApp {
    public void main(String[] args) {
        new App(args);
    }
    public App(String[] args) {
        super(args);
    }
} 
```

# html - Windows 8 和 Azure

> ID：11586692
> 
> 赞同：0
> 
> 时间：2012-07-20T20:42:40.930
> 
> 标签：html, azure, cloud, blob

我正在尝试编写一个 Metro 风格的应用程序，用户可以在其中将文件上传到云端，并查看其他用户上传的文件。我正在用 HTML5 / Javascript 编写这个应用程序。

问题是，即使我想做的很简单（让用户将 blob 格式的文件上传到 Azure），所有的“教程”都非常复杂。

这个 azure 看起来很酷，我对应用程序有一个很酷的想法，但不幸的是，没有关于如何从 HTML W8 应用程序使用 azure blob 存储的好的文档。

当然，如果有人能反驳我，我会很高兴...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:23:54.557

你见过这个 - [http://watwindows8.codeplex.com/](http://watwindows8.codeplex.com/)吗？自 Release Preview 更新以来，它可能有点过时，但它可能会给您一些想法。

我确信这听起来过于简单，但 Windows Azure blob 存储有一个 REST API。因此，如果您可以编写 REST——在这种情况下，它将是一些 XML/HTTPS——你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:24:53.617

[下面是从 Windows 8 中的 HTML5/JS 应用程序与 Azure 中的 Blob 存储交互的示例代码。](http://code.msdn.microsoft.com/windowsapps/Blob-Sample-0e35889e)

# mysql - MySQL选择相关表中有多个匹配记录的记录

> ID：11586694
> 
> 赞同：2
> 
> 时间：2012-07-20T20:42:56.690
> 
> 标签：mysql

我有 2 张桌子：

pages 表包含字段`id`

pages2categories 表包含字段`page`和`category`

我想从 pages 表中选择记录

```
where (there is a record in the pages2categories table 
WHERE pages2categories::page = pages::id AND pages2categories:: category = 'X') 
AND (there is also a record in the pages2categories table WHERE pages2categories::page = pages::id AND pages2categories:: category = 'Y') 
AND (there is also a record in the pages2categories table WHERE pages2categories::page = pages::id AND pages2categories:: category = 'Z') 
```

换句话说，只有当所有三个匹配记录都存在于 pages2categories 表中时，才从 pages 表中返回一条记录。

例子：

**页面::id**

```
1

2

3 
```

**pages2categories::page, pages2categories::category**

```
1, x

1, y

2, x

2, y

2, z

3, x 
```

结果应该只返回 pages 表中的记录 2。

我希望这很清楚。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:54:45.890

你也可以使用这个：

```
SELECT * FROM TABLE1 A
WHERE EXISTS (SELECT * FROm TABLE2 B WHERE A.ID = B.ID AND B.category = 'X') 
AND EXISTS (SELECT * FROm TABLE2 B WHERE A.ID = B.ID AND B.category = 'Y')
AND EXISTS (SELECT * FROm TABLE2 B WHERE A.ID = B.ID AND B.category = 'Z') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:21:59.850

在您的问题中，您写道：

> 换句话说，只有当所有三个匹配记录都存在于 pages2categories 表中时，才从 pages 表中返回一条记录。

您还写道，查询应该返回 2 行以及您提供的示例数据，但根据您的数据，只有一行包含所有 3 个类别（第 2 页）。

所以，我不确定我是否理解正确，但这是实现它的一种方法：

```
SELECT p.* FROM page p
LEFT JOIN pages2categories cx ON (cx.page = p.id AND cx.category = 'x')
LEFT JOIN pages2categories cy ON (cy.page = p.id AND cy.category = 'y')
LEFT JOIN pages2categories cz ON (cz.page = p.id AND cz.category = 'z')
WHERE cx.category IS NOT NULL
AND  cy.category IS NOT NULL
AND  cz.category IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:47:37.323

```
select id from table
group by id
where count(distinct category) = (select count(distinct category) from table) 
```

# c++ - CUDA - 源文件上的 __device__ 方法

> ID：11586700
> 
> 赞同：1
> 
> 时间：2012-07-20T20:43:41.110
> 
> 标签：c++, cuda

我有一个在主机和设备代码上都使用的类，以便更轻松地传递数据。这个类有一些操作数据的方法。一个简单的例子是：

```
struct Vector {
  float x, y, z;
  __host__ __device__ Vector(float _x, float _y, float _z) {
    //...
  }
}; 
```

如果我在头文件上实现这个类，它工作正常并且 nvcc 很高兴。但是，如果我尝试在源文件上实现构造函数，nvcc 会抱怨构造函数是非内联的。反正有没有绕过这个或者这只是编译器的一个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:35:25.170

直到 CUDA 5.0 之前，CUDA 编译器都有一个限制，即内核（即`__global__`函数）所需的所有内容都必须位于单个翻译单元中。对于 Fermi 之前的设备（即计算能力 1.x），编译器还必须内联所有`__device__`函数。因此，如果您有在文件 a.cu 中定义的结构和`__global__`使用在 b.cu 中定义的结构的内核，那么当编译器处理 b.cu 时，它将无法找到该`__device__`函数。

使用 CUDA 5.0，您可以分别编译这两个文件并将它们链接在一起。这仍然需要 Fermi 或更高版本（2.x 或更高版本）。

# iphone - GLKTextureLoader textureWithContentsOfFile：第一次失败

> ID：11586702
> 
> 赞同：0
> 
> 时间：2012-07-20T20:44:00.170
> 
> 标签：iphone, objective-c, textures, sprite, glkit

我正在使用`GLKTextureLoader`将图像纹理加载到精灵中。

当我运行以下代码并加载两个精灵时......

```
NSString *pathToImage = [NSString stringWithFormat:@"%@/defaultProject/images/%@", [Util applicationDocumentsDirectory], fileName];
NSLog(@"path: %@", pathToImage);
self.textureInfo = [GLKTextureLoader textureWithContentsOfFile:pathToImage options:options error:&error];
if (self.textureInfo == nil) 
{
    NSLog(@"Error loading file: %@", [error localizedDescription]);
    return;
} 
```

...第一张图片失败，但第二张图片失败。

错误是：

```
Error loading file: The operation couldn’t be completed. (GLKTextureLoaderErrorDomain error 12.). 
```

有谁知道这个错误是什么意思？我还没有找到关于代码 12 的任何信息。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:02:15.400

错误代码 12 表示`GLKTextureLoaderErrorDataPreprocessingFailure`根据（[Apple Docs](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/GLKTextureLoaderErrorDataPreprocessingFailure)）

我认为错误的原因是文件损坏。尝试重新保存损坏的图像。

# android - Android 重启 AsyncTask

> ID：11586704
> 
> 赞同：8
> 
> 时间：2012-07-20T20:44:12.317
> 
> 标签：android, android-asynctask

`AsyncTask`尝试重新打开活动后，我在重新启动时遇到了一些麻烦。

当我第一次打开活动时，我称之为启动`AsyncTask`第一次工作的活动。

```
myTask connectedTask;
connectedTask = new myTask();
connectedTask.execute();

public class myTask extends AsyncTask<Integer,Integer, Integer> {

    @Override
    protected Integer doInBackground(Integer... arg0) {
        //Increase timer and wait here in a loop
        System.out.println("ASYNC TASK STARTING!");
        return IsSocketConnected();
    }

    protected void onPostExecute(Integer result) {
        //Something you want to do when done?
        System.out.println("ASYNC TASK DONE!");

        // if it was connected successfully 
        if(result == 1) {
            // remove the progress bar
            proBar.setVisibility(View.GONE);

            // Discover available devices settings and create buttons
            CreateButtons(btnList);
        }
    }
}

IsSocketConnected(); // checks for a bluetooth connections to be done. 
```

当我回到以前的活动并尝试再次开始该活动时，我无法`AsyncTask`重新开始。

我读到只要我创建一个新的实例`AsyncTask`我就应该重新启动那些任务。

还有什么我应该做的吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T08:39:16.427

可能它可以帮助将来遇到这个问题的人。您可以添加一个方法：

```
public class MainActivity extends Activity {

     public static MyTask loadTextDataTask;

     //... methods

     public class MyTask extends AsyncTask<Void, Void, Void> {

         //... methods

         public void selfRestart() {
             loadTextDataTask = new MyTask();
         }
     } 
```

}

然后您可以从任何其他类中使用它，例如：

```
MainActivity.loadTextDataTask.selfrestart(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T23:01:39.990

感谢您的所有评论，他们帮助了很多。我决定取消 AsyncTask。我结束了使用正常的可运行线程并使用处理程序将消息发布回 UI 线程。这是代码：

```
 // Start thread here only for IsSocketConnected
        new Thread(new Runnable() {

            public void run() {

                //Add your code here..
                IsSocketConnected();

            }
        }).start();

// handler that deals with updating UI
public Handler myUIHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {
        if (msg.what == Bluetooth.STATE_CONNECTED)
        {
            //Update UI here...
            Log.d(TAG, "Connected");

            // Discover available devices settings and create buttons
            CreateButtons(btnList);

        } else if(msg.what == Bluetooth.STATE_NONE) {

            Log.d(TAG, "NOT Connected");
        } 
```

}

```
// in the IsSocketConnected() I call this 
Message theMessage = myUIHandler.obtainMessage(Bluetooth.STATE_CONNECTED);
myUIHandler.sendMessage(theMessage);//Sends the message to the UI handler. 
```

到目前为止，这是有效的。再次感谢你。希望这可以帮助某人

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T20:59:38.037

没错，您可以简单地创建一个新实例并执行它以重新开始。我想知道你在什么功能开始任务？在你的函数中启动它可能是一个好主意`onResume()`，以防活动在它回到前台之前没有被破坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T11:58:20.667

更好的是，使用 OnPostExecute 来触发任务的新实例。如果任务完成，它将触发。但是使用布尔值来防止它每次都触发自己

```
protected void onPostExecute(Void result) {

if(someboolean==true) { 
                            new instance of task;
                            instance.execute;
                someboolean=false;
                }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:22:34.383

尝试将此代码放入`onResume()`：

```
@Override
public void onResume()
{
    super.onResume();
    myTask connectedTask = new myTask();
    connectedTask.execute();
} 
```

当您恢复到您的`Activity`. 您没有发布它，但可能正在创建`onCreate()`只运行一次的对象。

我对处理`Socket`连接的建议是仅对`Thread`自身进行子类化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-03T16:55:02.307

而不是使用：connectedTask = new myTask(); connectedTask.execute();

只需使用：newconnectTask.execute(); 在您确切想要重新启动任务的地方使用它！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T20:57:27.413

开发者网站说

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

从 HONEYCOMB 开始，AsyncTask 默认使用单个 Executor 来执行任务，然后一次运行一个任务。这意味着如果您在任何活动（**主线程**上的任何位置）上调用 myTask.execute() 之后调用它，则第二次调用将等待调用 doInBackground 方法，直到第一个任务完成。如果您的 IsSocketConnected() 方法没有立即返回，它将在主线程的任何位置再次调用 AsyncTask.execute() 方法后阻塞任何 doInBackground() 调用，直到当前任务完成。

如果您的 isSocketConnected() 使用任何阻塞操作，例如 wait() 或 Thread.sleep()，您可以通过在 onDestroy() 回调中调用**myTask.cancel(true)**来解决它，这将引发 InterruptedException。只需确保在会导致线程退出 doInBackground 方法的地方捕获 InterruptedException 即可。

您还可以通过使用自定义**ThreadPoolExecutor**并调用 AsyncTask.executeOnExecutor(Executor) 方法来解决问题。

# mysql - 从数据库中获取落在标记半径内的结果

> ID：11586708
> 
> 赞同：20
> 
> 时间：2012-07-20T20:44:23.900
> 
> 标签：mysql, math, markers

# 2012 年 11 月 16 日更新

我想再次提出这个问题，提供一个新的赏金，以获得一个可靠的、好的解决方案。似乎只有解决方案（[`shubhansh`的答案](https://stackoverflow.com/a/11587424/264795)）现在不能有效地工作。我会解释为什么。

首先，这是我有半径和人的实时地图，半径在**`red`**，人在**`blue`**。

![在此处输入图像描述](../Images/5cb865ac6c297cfe15d85f8b8d8979db.png)

如您所见，**`two`**这张地图中有**`eight`**半径的人，基本上我只得到那个人**`Person A`**，但我没有得到**`Person B`**，我猜 SQL 没有正确选择它，我需要它是精确的并且根据人的半径和标记半径准确。

看起来拾取的内容在半径内，而不是与半径重叠的那些，我需要它能够拾取任何相互重叠的半径的任何结果。

我正在寻找比 shubhansh 的答案更精确和准确的 SQL。您可以阅读下面的内容，以了解我究竟需要该查询来采取行动并找到准确的人。

数据，**人**：

```
+-----------+-----------+--------+
| latitude  | longitude | radius |
+-----------+-----------+--------+
| 51.517395 | -0.053129 | 5.6    |
| 51.506607 | -0.116129 | 0.7    |
+-----------+-----------+--------+ 
```

请注意，`radius`以公里为单位。

```
+-----------+-----------+-----+
| latitude  | longitude | km  |
+-----------+-----------+-----+
| 51.502117 | -0.103340 | 0.3 |
| 51.498913 | -0.120850 | 0.7 |
| 51.496078 | -0.108919 | 0.7 |
| 51.496506 | -0.095873 | 0.7 |
| 51.503399 | -0.090723 | 0.7 |
| 51.508049 | -0.100336 | 0.7 |
| 51.508797 | -0.112610 | 0.7 |
| 51.505535 | -0.125227 | 0.7 |
| 51.502331 | -0.108061 | 0.7 |
+-----------+-----------+-----+ 
```

我使用的当前 SQL：

```
SELECT ppl.latitude,
       ppl.longitude,
       ppl.radius
FROM 
(
    people ppl
),
(
    SELECT latitude, longitude 
    FROM radiuses
) AS radius
WHERE (POW((ppl.longitude - radius.longitude) * 111.12 * COS(ppl.latitude), 2) + POW((ppl.longitude - radius.longitude) * 111.12, 2)) <= 4
GROUP BY ppl.id 
```

可用于测试查询的 MySQL 数据，

```
INSERT INTO radiuses (id, latitude, longitude, km) VALUES ('1', '51.502117', '-0.103340', '0.3'), ('2', '51.498913', '-0.120850', '0.7'), ('3', '51.496078', '-0.108919', '0.7'), ('4', '51.496506', '-0.095873', '0.7'), ('5', '51.503399', '-0.090723', '0.7'), ('6', '51.508049', '-0.100336', '0.7'), ('7', '51.508797', '-0.112610', '0.7'), ('8', '51.505535', '-0.125227', '0.7'), ('9', '51.502331', '-0.108061', '0.7');

INSERT INTO people (id, latitude, longitude, radius) VALUES ('1', '51.517395', '-0.053129', '5.6'), ('2', '51.506607', '-0.116129', '0.7'); 
```

* * *

# 老总结

**注意：**所有的经纬度都是随机制作的。

我有一个地图小程序，用户可以放置他的纬度/经度位置*半径*，半径为 1 公里。

现在，有另一个用户可以将他的*半径*放在地图上的任何位置，每个半径为 1 公里（与上面的用户相同）。

像这样，**用户 A**是红色的，**用户 B**是蓝色的。

![在此处输入图像描述](../Images/61678510fae251d39461d32cf6f46487.png)

基本上，**用户 A**将他的半径存储在一个如下所示的表中：

```
+-----------+---------+-----------+-----------+
| radius_id | user_id | latitude  | longitude |
+-----------+---------+-----------+-----------+
|         1 |       1 | 81.802117 | -1.110035 |
|         2 |       1 | 81.798272 | -1.144196 |
|         3 |       1 | 81.726782 | -1.135919 |
+-----------+---------+-----------+-----------+ 
```

并且**用户 B**将他的半径存储在另一个看起来像这样的表中 - （注意：他们每个帐户只能存储 1 个坐标）：

```
+---------+-----------+-----------+
| user_id | latitude  | longitude |
+---------+-----------+-----------+
|       6 | 81.444126 | -1.244910 |
+---------+-----------+-----------+ 
```

我希望能够在地图图片中找到那些落在定义半径内的用户，即使半径圆是接触的。只有标记`C`能够拾取单个半径，何时`A`和`B`不。

我确信这是可能的，但我不知道如何在 MySQL 中提出这种系统。

我在 Google Developers 网站上发现它很接近，但不仅仅是我需要的性能。

*   [使用 PHP、MySQL 和 Google 地图创建商店定位器](https://developers.google.com/maps/articles/phpsqlsearch_v3)

**编辑**：我找到了一个更好的，这是非常接近的，但仍然不是我想要的，因为当我在一个表中有多个时，它使用 1 个纬度和经度坐标的界限。

*   [按边界圈内的纬度/经度从数据库中选择点](http://www.movable-type.co.uk/scripts/latlong-db.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T21:54:18.550

为了解决这个问题，您需要了解圆方程，类似于这样 对于任何点 (x,y) 落入具有中心 (x1, y1) 且半径为 r 单位的圆内是

```
(x-x1)^2 + (y - y1)^2 <= r^2

where a^b = a to the power b 
```

在您的情况下，用户 B 的（纬度，经度）是圆心，用户 A 的（纬度，经度）是点（x，y），半径 = 2kms。

但基本问题是纬度到经度的变化，所以这里是解决方案，1度= 111.12公里。因此，为了保持等式两边的单位相同，我们将其转换为 Kms

所以我们的最终方程变为：

```
((x-x1)*111.12)^2 + ((y-y1)*111.12)^2 = 4      (=2^2) 
```

相同的 SQL 语句应该看起来像这样

```
SELECT A.user_id, A.radius_id, A.latitude, A.logitude
FROM UserA AS A, 
     (SELECT user_id, latitude, longitude 
       FROM UserB 
       WHERE user_id = 8) AS B
WHERE (POW((A.latitude-B.latitude)*111.12, 2) + POW((A.longitude - B.longitude)*111.12, 2)) <= 4
/* **Edit** Here I have used (A.longitude - B.longitude)*111.12, for more accurate results one can replace it with (A.longitude - B.longitude)*111.12*cos(A.latitude)) or (A.longitude - B.longitude)*111.12*cos(B.latitude)) 

And, as i have suggested in the comments that first filter some records based on approximation, so whether one uses A.latitude or B.latitude it will not make much difference */ 
```

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T23:06:02.890

您问题的核心是“我怎么知道两个圆圈是否重叠”的问题。答案是“如果它们的中心之间的距离小于它们的半径之和”。所以你要找的是如何确定两点之间的距离。

另一个答案是将纬度和经度视为构成笛卡尔平面。他们没有（当您从赤道接近两极时，经度趋于零）。现在，作为一个近似值，它可能适用于您的解决方案，具体取决于您的解决方案所需的准确性。另一方面，如果您需要非常准确，则需要 Haversine 公式。这里有一个关于如何在 MySQL 中实现它的很好的描述：

[http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

从该演示文稿的幻灯片 7 中，您有以下公式：

```
3956*2*ASIN(SQRT(POWER(SIN((orig.lat-dest.lat)*pi()/180/2),2)+
    COS(orig.lat*pi()/180)*COS(dest.lat*pi()/180)*
    POWER(SIN((orig.lon-dest.lon)*pi()/180/2),2))) 
```

请注意，第一个数字是以*英里*为单位的地球平均半径；将其更改为 6371 公里。

你如何使用这个计算出的距离将取决于你的帖子中没有包含的细节，比如你正在处理的点数、地理分布、任何性能要求，以及数据是静态的还是持续更新的.

我提到这些事情是因为性能将成为一个问题，特别是如果您有大量数据和/或它正在不断更新（例如基于手机 GPS 数据的用户位置）。

您可以帮助解决性能问题的一种方法是使用正方形而不是圆形，并使用 1 度 = 111.12 公里的近似值。这样你就可以自动剔除任何明显相距很远的点。然后，您只需要为感兴趣区域内的少数点计算 Haversine 公式。

我希望这有助于为您指明正确的方向。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-17T16:09:08.620

几何学的要点是，如果两个圆的中心之间的距离小于它们的半径之和，则两个圆重叠。由于我们正在进行比较，我们可以使用距离的平方，因为这样可以避免平方根运算。原来，每个半径固定为1，两个半径之和为2，和的平方为4。

原始问题和新问题之间存在很大差异。第一个你有固定半径的圆，第二个你有不同半径的圆。`4`比较表达式中的常量`[...distance^2...] <= 4`需要替换，因为这是原始固定半径的产物。要实现这一点，请将`km`字段添加到查询中。正如您应该检查的那样，您没有`ppl.radius`在 WHERE 过滤器中使用，因此改变该值不会改变您的查询结果也就不足为奇了。

```
SELECT ppl.latitude, ppl.longitude, ppl.radius
FROM 
  ( people ppl ),
  ( SELECT latitude, longitude, km FROM radiuses ) AS B
WHERE [...distance^2...] <= POW( ppl.radius + B.km, 2) 
```

我应该说，这个问题的理解时间比它应该的要长得多，因为你称实体——那不是一个人为“半径”，而实际上你有一个应该被称为“的属性”半径'在两个不同的实体上。因此，将其他实体命名为描述性的。

# php - 使用 htaccess 允许 POST，但阻止浏览 PHP 文件

> ID：11586709
> 
> 赞同：0
> 
> 时间：2012-07-20T20:44:29.400
> 
> 标签：php, .htaccess

我有一个包含 PHP 文件的目录，我不希望匿名用户查看或让机器人索引。但是，我确实希望对 PHP 文件的匿名 HTTP POST 请求响应能够正常工作（即来自各种网站上的其他 PHP 表单）。

会是这个吗？

```
<Limit POST GET>
allow from all
</Limit>
<files "*.php">
deny from all
</files> 
```

我的 PHP 脚本处理发布的数据，然后执行 POST 到另一个 Web 服务。.htaccess 会阻止来自受保护 PHP 脚本的响应后通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:55:12.103

你不需要做任何事情。无法从外部查看 PHP。完全没有。查看 PHP 代码的唯一方法是以某种方式访问​​其所在的计算机：这是因为 PHP 由服务器解析和执行以生成显示给客户端的 HTML。换句话说，只要没有人侵入您的实际服务器计算机，他们就看不到您的 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:04:48.173

我不知道你是否可以使用 .htaccess 文件来做到这一点（你可能可以，但我从来没有这样做过......），但如果你有只想发布到的可公开访问的 php 文件，你可以在每个脚本中使用类似的东西：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST')
{
  // post request, do your stuff
}
else
{
  // not a post request, redirect, show error message, etc.
} 
```

# php - php yii框架直接按模型填充CActiveform下拉列表数据？

> ID：11586711
> 
> 赞同：2
> 
> 时间：2012-07-20T20:44:44.783
> 
> 标签：php, forms, yii, associative-array, dropdownbox

我是 yii 的新手，我现在正在学习......

我在模型中使用这个查询来为我的列表框获取关联数组

```
public function getAllCategories()
{

    $cats = $this->model()->findAll(array('select'=>'id,name'));
    $mainarr = array();

    foreach($cats as $obj)
        $mainarr["$obj->id"]=$obj->name;

    return $mainarr;
} 
```

在我的表单上，我在我的下拉列表中调用这个函数

```
<?php echo $form->dropDownList($model,'name',$model->getAllCategories());  ?> 
```

我有很多不同的查询下拉列表，我找不到任何更快的方法来做到这一点，每次我必须创建上面的数组以使其实现。如果有任何使用 CActiveForm，请告诉我更好更快的填充解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:08:20.763

更快的方法，我不确定还有其他方法。

但是你可以减少你的代码，使用[`CHtml::listData();`](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail")函数。至少您将减少必须在模型类中定义函数：

```
<?php 
    echo $form->dropDownList($model,
      'name',
      CHtml::listData(Modelname::model()->findAll(),'id','name')// $model->getAllCategories()
    );
?> 
```

`listData();``array('id'=>'name')`将为您提供带有格式的关联数组。

**编辑：**

要遵循良好的 mvc 实践，您可以在显示此表单的控制器操作中使用 listData，而不是直接使用表单视图：

```
public function actionFormDisplayer(){
  // other code
  $list_for_name_dropdown = CHtml::listData(Modelname::model()->findAll(),'id','name');
  // other code
  // then in render pass this value also
  $this->render('viewname',
     array('dropdownoptions'=>$list_for_name_dropdown, // other data to pass
  ));
} 
```

然后在您看来，您可以使用`$dropdownoptions`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T09:46:36.180

如果要在菜单模式的下拉菜单中显示菜单名称，请使用此代码 $menu_model = Menu::model()->findAll();
$list = CHtml::listData($menu_model, 'menu_id', 'menu_name'); echo CHtml::dropDownList('categories', $category, $list, array('empty' => '(选择一个类别')); `

# c# - 将“Environment.NewLine”替换为 使用正则表达式

> ID：11586712
> 
> 赞同：1
> 
> 时间：2012-07-20T20:44:47.967
> 
> 标签：c#, regex, asp.net-mvc, razor

我在问自己是否可以用正则表达式替换特定 div 中的所有 Environment.NewLine？我自己尝试了一些正则表达式，但没有成功。顺便说一句，我知道这不是用正则表达式解析 HTML 的正确方法。

这是我到目前为止所拥有的：

```
Regex.Replace(text, @"(?<=<div class=""text"">.*?)" + Environment.NewLine + "(?=.*?</div>)", "<br/>"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:47:39.383

```
... + Regex.Escape(Environment.NewLine) + ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:45:06.397

```
Regex.Replace(text, 
  @"(?<=<div class=""text"">.*?)((?<!\n)\r\n|\n\r|\r|\n)(?=.*?</div>)", 
  "<br>"); 
```

# javascript - Jquery 验证插件两个按钮

> ID：11586713
> 
> 赞同：0
> 
> 时间：2012-07-20T20:44:49.363
> 
> 标签：javascript, jquery, jquery-validate

我正在使用一个很棒的插件在前端验证我的表单：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)。问题是表单有两个按钮（返回和提交）。由于插件，我可以绕过使用 css 类取消验证表单的后退按钮；但其他 js 仍然触发（动画 gif，禁用提交按钮，以及提交的不透明度更改）。该死。

我尝试将整个内容包装在 submitbtn 的单击功能中，以便后退按钮与它没有任何关系，这不起作用。我还尝试将后退按钮放在会反转样式效果的单击功能中，但这不起作用。

我寻求一个聪明的男人或女人的建议，谢谢！

```
$(".simple_form").validate({
    submitHandler: function(form) {
        $(".submitbtn").addClass("opacitychangeonsubmit"); // change submit button opacity
        $(".submitbtn").attr("disabled", true);// disable the submit btn
        $('#loading_image').show(); // show animated gif
        form.submit();
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:30:21.957

我走了一条不同的路线，虽然工作得很好，但有点丑陋和骇人听闻。

```
$(".simple_form").validate({
    submitHandler: function(form) {

        if ((form.elements.item(10).value) == "Back") {
            form.submit();
        } else {
            $(".submitbtn").addClass("opacitychangeonsubmit"); // change submit button opacity
            $(".submitbtn").attr("disabled", true);// disable the submit btn
            $('#loading_image').show(); // show animated gif
            form.submit();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:04:44.880

尝试将所有内容都`form.submit();`放在“成功”回调中。

```
$(".simple_form").validate({
  success: function() {
    $(".submitbtn").addClass("opacitychangeonsubmit"); // change submit button opacity
    $(".submitbtn").attr("disabled", true);// disable the submit btn
    $('#loading_image').show(); // show animated gif
  },
  submitHandler: function(form) {
    form.submit();
  }
}); 
```

这个想法是仅在验证成功并且实际提交表单时才将表单突出显示为非活动状态。

# java - Apache Solr java 教程

> ID：11586715
> 
> 赞同：6
> 
> 时间：2012-07-20T20:44:52.587
> 
> 标签：java, mysql, web-services, apache, solr

我是 Apache solr 的新手，无论我在做什么谷歌搜索，我都无法理解 solr 的教程。

我想在 MySQL 上使用 Solr 和 Java 开发简单的搜索。目前我可以在 tomcat 上运行 solr。但不确定如何继续使用 solr 库。

有人知道我可以参考的教程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T07:00:41.973

我找不到您想要的任何确切示例。在这里，我将尝试向您展示一种开始的方法。

首先，既然你有一个正在运行的 solr，你应该配置它来索引 Mysql 中的数据。您可以参考以下教程/博客文章来了解如何配置 Solr 来索引 Mysql 数据。

*   [使用 Solr / Lucene 通过 MySQL DB 进行全文搜索](http://www.cabotsolutions.com/2009/05/using-solr-lucene-for-full-text-search-with-mysql-db/)
*   [将 MYSQL 数据库导入 APACHE SOLR](http://entropytc.com/importing-a-mysql-database-into-apache-solr/)
*   [Apache Solr MySQL 示例数据配置](http://saylinux.net/story/0010629/apache-solr-mysql-sample-data-config)
*   [在 Ubuntu 上安装用于 MySql 索引的 Solr Tomcat](http://www.wheelsandcogs.co.uk/2011/01/13/solr-tomcat-mysql-ubuntu/)

然后通过使用 Solrj (Solr Java Driver)，您可以索引/查询数据。您可以在下面找到一些入门教程。

*   [Solj教程](http://wiki.apache.org/solr/Solrj)
*   [使用 SolrJ](http://lucidworks.lucidimagination.com/display/solr/Using+SolrJ)
*   [使用 Solrj 进行索引](http://www.lucidimagination.com/blog/2012/02/14/indexing-with-solrj/)
*   [Solrj 示例](http://wiki.constellio.com/index.php/Solrj_example)
*   [使用 Solrj——Solrj 入门的简短指南](http://e-mats.org/2008/04/using-solrj-a-short-guide-to-getting-started-with-solrj/)

# jquery - 检查特定类的按钮单击

> ID：11586718
> 
> 赞同：0
> 
> 时间：2012-07-20T20:45:08.100
> 
> 标签：jquery

```
$("div#buttonContainer ul li").live("click",function(){    
    if($(this).hasClass('selected')){
        alert('selected');
    }    
});

<div id="buttonContainer">
    <ul>
        <li class="selected"></li>
        <li></li>
        <li></li>
    </ul>    
</div> 
```

我有适用于所有 li 标签的点击处理程序，但我希望在 li 具有所选类时执行特定函数。上面的 javascript 会在任何 li 点击时弹出警报。我不确定我做错了什么，也许我没有正确定位特定的 li 。

编辑：

我必须使用 jquery 1.3 技术，因为我无法升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:46:38.970

正如其他发帖者所回应的那样，这个简单的案例正在 jsFiddle 中工作，我将假设在您的实际应用程序中某些东西已经改变了 this 上下文。所以这个解决方案将从图片中删除它并使用实时点击的目标，所以它仍然可以在 jQuery 1.3 中工作

```
$("#buttonContainer ul li").live("click",function(e){
  if($(e.target).hasClass('selected')){
    console.log('selected');
  }
  console.log('any li');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:47:53.550

工作正常。但是使用`on()`...`live()`已被弃用。

[现场示例](http://jsfiddle.net/U7vPk/)

```
$(function() {
    $("div#buttonContainer ul").on("click", "li", function() {
        if ($(this).hasClass('selected')) {
            alert('selected');
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:48:00.793

我已经切换到 using `on()`，`live()`从 jQuery 1.7 开始正式弃用，它说：

```
$("#buttonContainer ul li").on("click", function(e) {
    var target = $(e.target);
    if (target.hasClass('selected')) {
        alert('selected');
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Ad4vw/)。

# python - 如何在pygame中获得具有透明度的面具？

> ID：11586728
> 
> 赞同：0
> 
> 时间：2012-07-20T20:46:09.877
> 
> 标签：python, pygame, mask

我正在使用 Pygame 用 Python 编写游戏，并且我试图让我的玩家精灵不接触地图周围点缀的树木。我的玩家的精灵具有透明度（当然），当我用 加载 Pygame 蒙版时`pygame.mask.from_surface(self.getNextFrame())`，它只加载具有实际颜色的部分。

我的问题是，有谁知道如何让 pygame 加载具有原始图像透明度的蒙版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:49:18.907

是的，使用第二个参数：

```
mask = pygame.mask.from_surface(self.getNextFrame(), 0) 
```

通过将其设置为`0`任何像素都被视为不透明。请参阅[文档](http://www.pygame.org/docs/ref/mask.html#pygame.mask.from_surface)。

请注意，这样做的结果只是表面大小的矩形。因此，使用它实际上可能会更高效：

```
mask = pygame.mask.Mask(self.getNextFrame().get_size())
mask.fill() 
```

# c# - 内存流问题

> ID：11586733
> 
> 赞同：5
> 
> 时间：2012-07-20T20:47:09.550
> 
> 标签：c#, .net, stream, memorystream

我在使用 MemoryStream 时遇到了一些问题

我们正在使用第 3 方电子表格组件（类似于 excel），我正在尝试通过以下`SaveHtml`方法将数据保存为他们支持的 html。根据他们的文档，看起来非常简单。这是我的代码：

```
using (var memoryStream = new MemoryStream())
{
   this.ActiveSheet.SaveHtml(memoryStream);

   memoryStream.Position = 0;

   using (var streamReader = new StreamReader(memoryStream))
   {
       var htmlData = streamReader.ReadToEnd();
   }
} 
```

设置时出现异常`memoryStream.Position = 0`：

`System.ObjectDisposedException: Cannot access a closed Stream.`

快速浏览一下他们在 Reflector 中的 SaveHtml 方法会显示以下相关行：

```
public void SaveHtml(Stream stream)
{
    StreamWriter writer = null;

    try
    {
        writer = new StreamWriter(stream) { AutoFlush = true };

        writer.Write(str);
    }   
    finally
    {
        if (writer != null)
        {
            writer.Close();
        }
    }
} 
```

我猜是因为 streamWriter 被他们的代码关闭了，我们不走运。关闭streamWriter，也就关闭了底层的Stream，对吧？

有什么办法可以解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:00:33.460

它似乎有效，因此您可以创建另一个内存流。提取缓冲区时不复制任何字节。

```
using (var memoryStream = new MemoryStream()) {
    this.ActiveSheet.SaveHtml(memoryStream);
    var buffer = memoryStream.GetBuffer();
    using (var memoryStream2 = new MemoryStream(buffer))
    using (var streamReader = new StreamReader(memoryStream2)) {
        var htmlData = streamReader.ReadToEnd();
    }
} 
```

或者您可以推出自己的不可关闭的 MemoryStream 并将其提供给 SaveHtml。这也将阻止处理它，因为 Dispose 只是调用 Close。再次，恕我直言：

```
class MemoryStream2 : MemoryStream {
    public override void Close() { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-30T12:31:29.820

在这种情况下可以使用替代的[内存流实现：](https://github.com/ImmortalGAD/ChunkedStream)

```
var stream = new ChunkedStream(pool, asOutputStreamOnDispose: true);

using (var writer = new StreamWriter(stream))
{
    writer.Write("hello world");
}

Assert.AreEqual(0, stream.Position);
Assert.AreEqual(ChunkedStreamState.ReadForward, stream.State);
Assert.AreEqual(3, pool.TotalAllocated);

using (var reader = new StreamReader(stream))
{
    Assert.AreEqual("hello world", reader.ReadToEnd());
    Assert.AreEqual(0, pool.TotalAllocated);
}

Assert.AreEqual(ChunkedStreamState.Closed, stream.State); 
```

# javascript - 将文本插入

I'm trying to insert some text in a file into `<textarea></textarea>`in an html file when one clicks a link in a different html page.

html1.ht

> ID：11586735
> 
> 赞同：1
> 
> 时间：2012-07-20T20:47:22.717
> 
> 标签：javascript, ajax, jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:54:59.693

一旦您迁移到新页面，任何进一步的 JS 执行都将丢失。您必须执行以下操作，将文本传递到查询字符串变量中的新页面：

```
$(".link").click(function(){
   var encodedText = encodeURIComponent($("#some_id").text());
   window.location = "./html2.html?txt=" + encodedText;
}); 
```

`html2.html`并在您的页面上有一些这样的代码：

```
var capturedText = window.location.search.match(/(\?|&)txt=(.*?)(&|$)/);
capturedText = capturedText ? decodeURIComponent(capturedText[2]) : '';
$("#txt").val(capturedText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:51:29.763

如果`some_id`是 in `html2.html`，那么很简单：让 html2.html 中的 JavaScript 填写文本

```
$("#txt").val($("#some_id").text()); 
```

如果`some_id`是 in `html1.html`，则应将值发送到服务器并填写服务器端的文本区域。如果这不必要地复杂或不可行，您可以通过多种不同的方式传递文本，最常见的是：

*   在网址中`html2.html?text="my text"`
*   在 cookie 中（大多数情况下不推荐）

如果您通过 URL 执行此操作，只需从 .js 上的 JavaScript 中的 URL 提取文本`html2.html`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:56:30.753

运行“window.location”后，新页面将开始加载，脚本将停止执行。

此外，您不能修改未来页面上的元素。

您最好的方法是加载`html2.html#someTextHere`，然后`html2.html`将散列中的文本复制到 textarea 中。

# android - 安卓你好世界

> ID：11586737
> 
> 赞同：1
> 
> 时间：2012-07-20T20:47:35.820
> 
> 标签：android

我正在使用 android.com 教程来学习使用 eclipse 的 android。我刚刚开始了第一个程序。它`Open the Android folder, select Android Project and click Next. But there is no new`在 android 文件夹中显示 Android Project` 选项，而不是新项目的三个选项。1) android 应用项目 2) android 示例项目
3) android 测试项目

我应该选择哪个来为该教程创建一个 Android 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:52:31.830

您应该使用 android 应用程序项目。

# triggers - Salesforce 触发无限循环

> ID：11586739
> 
> 赞同：1
> 
> 时间：2012-07-20T20:47:40.017
> 
> 标签：triggers, salesforce, apex-code, infinite-loop

首先，我们有一个产品可以通过 api 与 Salesforce 同步数据。当我们平台中的记录更新时，数据被推送到salesforce，当数据在salesforce中更新时，它被推送到我们的产品。我们遇到的问题是一个相当麻烦的无限循环。SalesForce 中是否有办法确定谁在执行触发器，以便在我们的产品中更新数据并将其推送到 salesforce 时，触发器不会触发？我之前没有看到有关此的执行信息，所以我真的不确定。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:20:14.843

我不相信除了 Trigger.isExecuting 之外还有什么，它只是告诉您是否已经在触发器上下文中，或者您是否来自 Visualforce、API 或匿名执行。

一种可能的解决方案是创建一个保留最新更新来源的自定义字段。然后可以使用它在触发器中正确路由逻辑，并避免在最后一次更新来自外部系统时调用。此外，您可以遍历 Trigger.old 和 trigger.new 中的所有字段，以查看哪些字段发生了变化。这样，当您的记录（SystemTimeStamp、LastModifiedDate 等）上没有任何有趣的实际变化时，您可以避免进一步不必要的与外部系统同步。以下是如何执行此操作的示例：

```
trigger ContactDescribeExample on Contact (before update) 
{
      // Get describe fields to evaluate old and new triggers with
      Map<String, Schema.SObjectField> fldObjMap = Schema.SObjectType.Contact.fields.getMap();
      List<Schema.SObjectField> fldObjMapValues = fldObjMap.values();

      // Flag to determine if field(s) other than FirstName caused this change (FirstName is just an example)
      Boolean hasOtherChange = false;

      // Loop through trigger batch
      for(Contact c : Trigger.new)
      {
            for(Schema.SObjectField s : fldObjMapValues)
            {
                  String fldName = s.getDescribe().getName();

                  // Filter out fields we're not interested in
                  if(fldName != 'FirstName' && fldName != 'LastModifiedDate' && fldName != 'LastModifiedById' && fldName != 'SystemModstamp')
                  {
                        // Check to see if old and new are different
                        if(c.get(fldName) != Trigger.oldMap.get(c.Id).get(fldName))
                              hasOtherChange = true;
                  }
            }
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:52:40.077

对于在 Google 上发现此问题的任何人，我通过添加一个设置触发器然后检查的公共静态变量的类来解决一个非常相似的问题。默认为 false，如果设置为 true，则触发器不会运行。下面的例子：

```
public class Recursive {
  // Static variables to avoid recursion on trigger operation

  private static boolean working = false;

  public static boolean isWorking() {
      return working;
  }

  // Set variable to true to mark record as working

  public static void setWorking() {
      working = true;
  }

  public static void setClosed() {
      working = false;
  }

} 
```

然后触发器被包装在以下内容中：

```
if (!Recursive.isWorking()) {
  // trigger code here
} 
```

作为一个静态变量，它在整个代码执行过程中保持设置，所以我的顶点设置的第一件事是`Recursive.setWorking();`防止触发器在其余方法中触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:44:04.547

如果您为从您的产品传入的 API 调用使用专用用户，那么您可以为他们禁用[发送出站消息](https://cs4.salesforce.com/help/doc/en/admin_userperms.htm#SendOutboundMessages)用户权限。这不会阻止某些触发代码运行，但会阻止每次开发的任何更新周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T00:55:19.107

对于您希望过滤掉逻辑的每个“豁免源”，您在 Number(18,0) 类型的目标对象上创建一个字段。我通常将此字段称为“[作业] 上次更新”。该字段不应位于任何面向用户的页面布局上。

然后，每当您的豁免源执行更新时，您将该字段设置为 System.currentTimeMillis()。您的触发器检查该字段是否已更改，如果已更改，则免除您希望为该源省略的逻辑。

Adam 提到的解决方案 - 保留最新更新的来源 - 也可以工作，但我发现如果您不总是正确更新它或检查它是否已更改，它可能容易出错。这就是为什么我更喜欢在您需要逻辑豁免时更改的字段，并且您只需针对那些豁免的更改来源对其进行更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:48:20.867

我同意 Adam 关于如何更好地确定何时执行同步的观点。您还可以考虑使用 UserInfo.getUserId() 方法查看当前正在更新记录的用户，然后查找该用户。

我想，为了让您的集成工作，您必须为外部产品分配一个用户。希望这是他们独有的帐户，这将是最佳实践。如果是这样，那么您只需查看当前用户是谁，如果是该外部产品，您可以忽略尝试发送另一个更新。

# android - 在键盘上显示“完成”

> ID：11586741
> 
> 赞同：2
> 
> 时间：2012-07-20T20:47:53.137
> 
> 标签：android, xml, android-edittext

我的 xml 中有这段代码：

```
<EditText
     android:id="@+id/totalamount"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/textView1"
     android:ems="10"
     android:inputType="numberDecimal" > 
```

我的主屏幕上有两个 EditText 供用户输入值。当用户选择其中一个 EditText 来输入十进制数字时，android 键盘似乎输入了数字，但它没有说**DONE** ，而是说**Next**并向下移动到下一个 EditText 框。

我想拥有它，以便当用户选择一个 EditText 时，无论主屏幕上有多少 EditText 字段，键盘都有 DONE 而不是 NEXT，因此它不会向下移动所有 EditText 字段，直到它最终说 DONE。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T20:52:19.507

尝试将 EditText`imeOptions`属性设置为`actionDone`. 看看[文档](http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions)。

# c - 符号链接奇怪的问题

> ID：11586745
> 
> 赞同：0
> 
> 时间：2012-07-20T20:48:13.033
> 
> 标签：c, linux, shared-libraries, symlink

我在搞乱*Linux 的*共享库并遇到了奇怪的问题。我成功地创建了一个共享库并获取`librbmp.so.0`文件，然后符号链接它获取另外两个文件：`librbmp.so`和`librbmp.so.0.0.1`. 然后我将它们复制到`/usr/local/lib`并运行`ldconfig`，在这里我遇到了一个奇怪的行为 - 另一个文件出现在`/usr/local/lib`. 它被称为`--library=ibrbmp.so.0.0.1`。奇怪的是，我的应用程序在运行时链接到它。

任何人都知道发生了什么以及如何强制我的应用链接到`librbmp.so`？

这是一段代码：

```
//creating shared library
$(CC) -shared -Wl,-soname,-librbmp.so.0.0.1 $(OBJECTS) -o librbmp.so.0 -lc

//symlinking
ln -sf librbmp.so.0.0.1 librbmp.so.0
ln -sf librbmp.so.0.0.1 librbmp.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:58:36.747

您的应用程序在运行时使用的名称在链接时嵌入到库中。因此，您的构建过程中的某些内容向链接器引入了一个奇怪的命令行参数。

当`gcc`用作您的链接器前端时，我假设参数应该是`-Wl,-soname=librbmp.so.0`. 在您的电话中，额外`-`的可能是问题的原因。在调用实际链接器之前，似乎有些东西相当愚蠢地将所有实例`-l`转换为`--library=`in，然后会看到`-soname=--library=ibrbmp.so.0.0.1`.

另请注意，soname 通常应指定指示 api 级别兼容性的形式。因此，在您的情况下， soname 应该是`librbmp.so.0`，而实际的输出目标文件应该是`librbmp.so.0.0.1`. 这样，您可以在改进库时增加版本，只要不破坏二进制兼容性，您的应用程序仍然可以工作。当你破坏 ABI 时，你应该将 soname 撞到`librbmp.so.1`等等。

# c# - C#继承私有类和公共成员不可访问

> ID：11586751
> 
> 赞同：0
> 
> 时间：2012-07-20T20:48:36.630
> 
> 标签：c#, inheritance

为什么私有类子类的用户不能访问私有类的公共成员数据？以下对我来说似乎非常违反直觉，因为它不会编译：

```
public class OuterClassBase {
    private class PrivateInnerClass {
        public void DoSomething () {}
    }

    protected class ProtectedInnerClass : PrivateInnerClass {}
}

public class OuterClassDerived : OuterClassBase {
    public OuterClassDerived () {
        ProtectedInnerClass o = new ProtectedInnerClass();
        o.DoSomething(); // inaccessible due to its pretection level
    }
} 
```

公开`PrivateInnerClass`/受保护允许代码编译...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:12:26.220

从 C# 4 规范的第 3.5 节：

> 成员声明允许控制成员访问。成员的可访问性由成员声明的可访问性（第 3.5.1 节）与直接包含类型（如果有）的可访问性相结合来建立。
> ...
> 当访问发生的文本位置包含在成员的可访问域（第 3.5.2 节）中时，允许访问成员。

然后在第 3.5.2 节（可访问域）中：

> 在程序 P 中以类型 T 声明的嵌套成员 M 的可访问域定义如下（注意 M 本身可能是一个类型）：
> 
> *   如果 M 声明的可访问性是公共的，则 M 的可访问域是 T 的可访问域。
> *   ...
> *   如果 M 声明的可访问性是私有的，则 M 的可访问域是 T 的程序文本。

这里就是这种情况。所以可访问域`DoSomething`是`PrivateInnerClass`第一个项目符号的可访问域......但可访问域`PrivateInnerClass`是最后一个项目符号的程序文本`OuterClassBase`。

因此调用 inside*不在*`OuterClassDerived`的可访问域中，所以它不能调用它。*`DoSomething`*

 *我真的很惊讶你能从一开始就派生`ProtectedInnerClass`出`PrivateInnerClass`...

编辑：事实证明你不能......即使`OuterClassDerived`完全删除了这个类，你也会收到这个错误：

```
Test.cs(10,21): error CS0060: Inconsistent accessibility: base class
        'OuterClassBase.PrivateInnerClass' is less accessible than class
        'OuterClassBase.ProtectedInnerClass' 
```

这违反了规范的第 10.1.4.1 节：

> 类类型的直接基类必须至少与类类型本身一样可访问（第 3.5.2 节）。例如，公共类从私有或内部类派生是编译时错误。

在这里，您尝试从私有类派生受保护类 - 受保护类比私有类更容易访问，因此会出现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:56:31.323

PrivateInnerClass 对 OuterClassBase 是私有的——除了 OuterClassBase 没有人可以使用它（这就是私有的意思）。

子类化它不会改变规则，它仍然是私有的——如果子类化将打破私有约束并允许 OuterBaseClass 之外的人访问 PrivateInnerClass 的成员，那么这是非法的并且不会编译。

换句话说，如果某些东西被声明为私有而不是私有，那么任何允许您绕过私有声明的技巧都不应该编译（反射除外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:32:03.443

受保护的类不能从私有类继承，原因与公共类不能从内部类继承的原因相同：一个类不能比它的基类更容易访问。

但是你为什么要这样做呢？您可以阻止其他类直接从 PrivateInnerClass 继承，但前提是它们位于不同的程序集中。你也可以做这样的事情；该框架对内部/公共类做了很多工作：

```
public class OuterClassBase
{
    private class PrivateInnerClass : ProtectedInnerClass
    {
    }

    protected abstract class ProtectedInnerClass
    {
        public void DoSomething() { }
    }

    protected ProtectedInnerClass ProtectedInnerClassFactoryMethod()
    {
        return new PrivateInnerClass();
    }
}

public class OuterClassDerived : OuterClassBase
{
    public OuterClassDerived()
    {
        ProtectedInnerClass o = ProtectedInnerClassFactoryMethod();
        o.DoSomething();
    }
} 
```*

# asp.net-mvc-3 - ASP.net MVC 控制器操作 - 如何防止重定向

> ID：11586752
> 
> 赞同：1
> 
> 时间：2012-07-20T20:48:45.960
> 
> 标签：asp.net-mvc-3, jquery

我的行动中有以下内容

```
[AjaxException] 
public ActionResult DoSomething(sring someParam1, string someParam2) {

    //do whatever you need to do here, db etc
    return new EmptyResult();
} 
```

在我的 html

```
<form id="search-frm" name="search-frm" action="@Url.Action("DoSomething", "MyActions")" method="post" >

    <input type="button" id="search-btn" value="search" class="btn" onclick="DoSomething();return false;" />
    <input type="text" name="param1" id="param1" />
    <input type="text" name="param2" id="param2" />
</form> 
```

在我的 JS

```
function DoSomething() {  
   $("#search-frm").submit();
   return false;
} 
```

当我单击按钮时，在控制器操作`DoSomething`完成后，我被重定向到`MyActions/DoSomething`. 有没有办法不使用 jquery `$.ajax`？我只需要做一些事情，而不是离开现有的页面。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:57:01.097

因为你的代码是这样的。当您单击按钮时，您正在调用`DoSomething`javascript 函数并在其中提交表单。所以和普通的表单提交一样（点击提交按钮提交）。这就是它重定向的原因（实际上是发布到`DoSomething`行动。

如果您不想离开当前页面，您可以使用`ajax`发布并获取结果并留在同一页面。所以我会像这样更改您的代码

**1)**从 HTML 标记中去掉 OnClick 事件绑定

**2）**添加这个处理表单提交的javascript

```
$(function(){
  $("#search-frm").submit(e){

   e.preventDefault();  // prevent the default form posting. Let's stay here
   $.post("@Url.Action("DoSomething","MyActions")",$("#search-frm").serialize(), function(data){
          //do something with the response data 
   });

  });     
}); 
```

不知道为什么`EmptyResult`从 Action 方法返回。您可能需要返回一些有效的响应来指示您尝试执行的操作的状态。

```
[HttpPost]
public ActionResult DoSomething(string param1,string param2)
{
  //do something 
   return Json(new 
             { Status= true,
               Message="Succesfully saved"
             });      
} 
```

您可以保留一个泛型`ViewModel`来返回此类结果并使用它，而不是像上面那样动态输入。

```
public class OperationStatus
{
  public bool Status  { set;get;}
  public string Message { set;get;}
} 
```

并在您的操作方法中

```
[HttpPost]
public ActionResult DoSomething(string param1,string param2)
{
  //do something 
  var res=new OperationStatus();
  res.Status=true;
  res.Message="Successfully Added";
   return Json(res);      
} 
```

# mongodb - Mongoengine 地理空间搜索

> ID：11586756
> 
> 赞同：8
> 
> 时间：2012-07-20T20:49:07.673
> 
> 标签：mongodb, geolocation, geospatial, pymongo, mongoengine

有没有人使用 mongengine 进行地理空间搜索？我似乎无法让它工作！必须进入 GeoPointField 的数据格式是什么？

我应该如何格式化它？我在文档中找不到有关格式的任何信息！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T23:30:04.477

你能发布你想要做的事情吗？

点数据必须存储在带有键的字段中

`"loc":{"lon":51.10682735591432, "lat":-114.11773681640625}` 或者

`loc: [22.23432, 21.23212]`

使用 mongoengine 支持地理点字段

```
Class Location:
  point = GeoPointField()

new_location = Location(point=[21.1232,23.23432])
new_location.save() 
```

像上面这样的东西应该可以工作。

> 类 GeoPointField（db_field=None，name=None，required=False，default=None，unique=False，unique_with=None，primary_key=False，validation=None，choices=None，verbose_name=None，help_text=None）：
> 
> 存储纬度和经度的列表。
> 
> 0.4 版中的新功能。

[http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.GeoPointField](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.GeoPointField)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:45:19.890

我在[mongoengine 文档](http://mongoengine.readthedocs.org/en/latest/guide/querying.html?highlight=geo#query-operators)中找到了答案：

> 有一些用于执行地理查询的特殊运算符，可以与 GeoPointFields 一起使用：
> 
> `within_distance`– 提供一个包含一个点和一个最大距离的列表（例如 [(41.342, -87.653), 5]）
> 
> `within_spherical_distance`– 与上述相同，但使用球形地理模型（例如 [(41.342, -87.653), 5/earth_radius]）
> 
> `near`– 根据文档与给定点的接近程度来对文档进行排序 near_sphere – 与上述相同，但使用球形地理模型
> 
> `within_box`– 过滤给定边界框内的文档（例如 [(35.0, -125.0), (40.0, -100.0)]）
> 
> `within_polygon`– 过滤给定多边形内的文档（例如 [(41.91,-87.69), (41.92,-87.68), (41.91,-87.65), (41.89,-87.65)]）。.. 注意:: 需要 Mongo Server 2.0

# spring - Spring 3 拦截器顺序

> ID：11586757
> 
> 赞同：8
> 
> 时间：2012-07-20T20:49:10.793
> 
> 标签：spring, spring-mvc, interceptor

我有一个实现两个拦截器的 Spring 3 Web App。我使用了一个带有 @Configuration 注释的配置类。代码如下：

```
 @Override
public void addInterceptors(InterceptorRegistry registry) {
    // TODO Auto-generated method stub
    super.addInterceptors(registry);
    registry.addInterceptor(homeInterceptor()).addPathPatterns("/");
    registry.addInterceptor(allInterceptor());
} 
```

不管我在注册表中添加拦截器的顺序是什么，allInterceptor 的 preHandle 函数总是在 homeInterceptor 的 preHandle 之前调用。有谁知道如何控制调用拦截器的顺序？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T03:02:19.653

我查看了底层实现，全局拦截器（不与任何路径映射关联）在映射拦截器（具有关联的路径模式）之前执行。因此，如果您希望在`homeInterceptor`之前执行`allInterceptor`，则`allInterceptor`可能必须将 设为映射拦截器（通过提供路径模式）。

这是记录拦截器并在运行时查找拦截器的两种方法： `org.springframework.web.servlet.handler.AbstractHandlerMapping.initInterceptors()`

`org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandlerExecutionChain(Object, HttpServletRequest)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-19T14:01:23.767

似乎在 Spring 3 中，他们已经删除了首先执行全局拦截器的逻辑。现在拦截器按照它们声明的顺序执行。

但是请注意，拦截器的 postHandle 以 REVERSE 顺序执行！

# excel - 基于列组合行，保留行的其余部分

> ID：11586760
> 
> 赞同：1
> 
> 时间：2012-07-20T20:49:20.717
> 
> 标签：excel, excel-formula

我需要根据列中的值将 excel 中的多行合并为一行。我希望将行中的其余值（如果存在）复制到新行。

例子：

```
Name      Database1     Database2      Standard
ALLEY     AL            FALSE          FALSE
ALLEY     FALSE         ALY            ALY
ANNEX     FALSE         FALSE          ANX
ANNEX     ANNX          ANNX           FALSE 
```

我希望将其更改为：

```
Name      Database1     Database2      Standard
ALLEY     AL            ALY            ALY
ANNEX     ANNX          ANNX           ANX 
```

如果你能在没有 VBA 的情况下做到这一点，那就是奖励。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:41:53.353

我可能会做这样的事情：

*   我会将每一列拆分成自己的表格。
*   我会对每张桌子进行排序。
*   我会删除虚假数据：

```
名称 数据库 1 名称 1 数据库 2 名称 2 标准
胡同 胡同 胡同 胡同 胡同
附件 附件 附件 附件 附件 ANX
胡同 胡同 胡同 胡说 胡同 胡说 胡同               
附件 错误 附件 错误 附件 错误
```

然后我会再次将它们重新组合到一张表中：

```
Name    Database1   Database2       Standard
ALLEY   AL          ALY             ALY
ANNEX   ANNX        ANNX            ANX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:58:33.657

Assuming your data starts in cell A1 you can paste the following formula in any cell of your spreadsheet:

`=IF(OFFSET(A$1; ROW(A1)*2-1; 0)<>FALSE;OFFSET(A$1; ROW(A1)*2-1; 0);OFFSET(A$1; ROW(A1)*2; 0))`

By dragging the fill handle you can extend the range to your needs.

# objective-c - 在显示 UIWebView 之前进行谷歌搜索

> ID：11586765
> 
> 赞同：0
> 
> 时间：2012-07-20T20:49:45.583
> 
> 标签：objective-c, ios, uiwebview

是否可以在 web 视图中显示 www.Google.com 并且已经搜索了一些文本？例如，我可以搜索 Mcdonalds 并显示此网页吗[？ =&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=5f86932334452070&biw=1271&bih=885](https://www.google.com/#hl=en&gs_nf=1&tok=MgDrtaqTQMlSjz6LTciLag&cp=3&gs_id=d&xhr=t&q=mcdonalds&pf=p&output=search&sclient=psy-ab&oq=mcd&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=5f86932334452070&biw=1271&bih=885)

而不是这个：google.com

谷歌搜索查询 url 看起来很复杂，所以我想找到一种方法来进行预加载搜索，而无需触摸 URL ...

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T21:31:05.580

您可以简单地使用`https://www.google.com/search?q=YOUR_SEARCH_STRING`.

我认为这是你需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T07:32:29.560

您可以使用多个搜索引擎：

```
https://www.google.com/search?q=YOUR_SEARCH_STRING
https://www.bing.com/search?q=YOUR_SEARCH_STRING
https://www.search.yahoo.com/search?p=YOUR_SEARCH_STRING 
```

# php - PHP登录表单不起作用，不重新加载

> ID：11586767
> 
> 赞同：0
> 
> 时间：2012-07-20T20:50:00.777
> 
> 标签：php, html

我希望你们能帮助我。我有一个php文件名login.php，在这个页面有一个提交名字和密码的表单，然后有checklogin.php连接到bd并检查用户是否存在。

问题是，当我输入有关用户的信息然后提交时，什么也没有发生。它停留在同一页面上（login.php）。

这是 login.php 中的代码：

```
<link rel="stylesheet" type="text/css" href="StyleSheet.css" />

</head>

  <style type="text/css">
    #Button1
    {
        width: 120px;
    }
    #Button2
    {
        width: 120px;
    }
</style>

<body onload="display_ct(),display_ct2();">
<form id="form1" runat="server">
<div id="wrap">
<div id="header">
<div id="Div1">
<div class="row dropdown-container fixed">
<div class="col-220">
<a id="logo" title="Back Home" href="index.htm">
<img width="220" alt="logo" src="Images/logo.jpg"/>
</a>
</div>
<div class="col-701 last">
<p>&nbsp;</p>
<p class="get-in-touch">
<img width="14" height="10" alt="" src="Images/flagpt.jpg"/>
<strong>
      <script type="text/javascript">
          function display_c() {
              var refresh = 1000; // Refresh rate in milli seconds
              mytime = setTimeout('display_ct()', refresh)
          }

          function display_ct() {
              var strcount
              var x = new Date()
              var horas = x.getHours();
              var min = x.getMinutes();
              var sec = x.getSeconds();
              if (horas < 10) {
                  horas = "0" + horas;
              }
              if (min < 10) {
                  min = "0" + min;
              }
              if (sec < 10) {
                  sec = "0" + sec;
              }

              document.getElementById('ct').innerHTML = horas + ":" + min + ":" + sec + " ";
              tt = display_c();
          }

      </script> <span id='ct' ></span>
</strong>
<img width="14" height="10" alt="" src="Images/flagiraque.jpg"/>
<strong>
<script type="text/javascript">
function display_c2() {
    var refresh = 1000; // Refresh rate in milli seconds
    mytime2 = setTimeout('display_ct2()', refresh)
}

function display_ct2() {
    var strcount
    var x = new Date()
    var horas1 = x.getHours() + 2;
    var min1 = x.getMinutes();
    var sec1 = x.getSeconds();

    if (horas1 < 10) {
        horas1 = "0" + horas1;
    }
    if (horas1 > 24) {
        horas1 = "0" + (horas1 - 24);
    }

    if (min1 < 10) {
        min1 = "0" + min1;
    }
    if (sec1 < 10) {
        sec1 = "0" + sec1;
    }
    document.getElementById('ct2').innerHTML = horas1 + ":" + min1 + ":" + sec1 + " ";
    tt1 = display_c2();
}

      </script> <span id='ct2' ></span>
</strong>
</p>
<p class="text-right">غرفة التجارة و الصناعة البرتغالية العراقية</p>
<p class="text-right1">Câmara do Comércio e Indústria Portugal-Iraque</p>
<p class="text-right">ژووری بازرگانی عیراق پۆرتگال</p>
</div>
<ul id="nav">
<li><a href="index.htm"><center>Inicio <br />  بداية  </center> </a></li>

<li onmouseover=""><center><a href="about2.htm">About Us</a></center>  <center>  حول الغرفة </center>    
    <ul class="nav first"> 
        <li><a href="MsgPresidente.htm"><center>Palavra do Presidente</center>  <center>  كلمة الرئيس  </center></a> </li>
        <li><a href="DirectionBoard.htm"><center> Direcção</center>  <center> كلمة الرئيس  </center></a> </li>
        <li><a href="ConsultiveBoard.htm"><center>Conselho Superior</center>  <center>المجلس الاستشاري </center></a></li>
        <li><a href="GeneralAssembly.htm"><center>Assembleia Geral</center>  <center>الجمعية العامة</center></a></li>
        <li><a href="FinancialCouncil.htm"><center>Conselho Fiscal</center>  <center>الهيئة المالية </center></a></li>

        <li><a href="FoundingMembers.htm"><center>Membros Fundadores</center>  <center> العضاء المؤسسين </center></a></li>   
    </ul>
</li>
<li><a href="Links.htm"><center>Links</center>  <center>  روابط</center></a></li>
<li><a href="Protocolos.htm"><center>Protocolos</center>  <center>  مذكرات تفاهم  </center> </a></li>
<li onmouseover=""><center><a href="news2.htm">Noticias/Fotos/Videos</a></center>  <center> اخبار و صور  </center>    
    <ul class="nav first"> 
        <li><a href="news2.htm"><center>Noticias</center>  <center> اخبار   </center> </a></li>
        <li><a href="photo1.htm"><center>Fotos</center>  <center> صور   </center></a> </li> 
        <li><a href="videos.htm"><center>Videos</center>  <center>  افلام </center></a> </li>   
    </ul>
</li>    
<li onmouseover=""><center><a href="associados2.htm">Associados</a></center>  <center> اعضاء  </center>    
    <ul class="nav first"> 
        <li><a href="HowToJoin.htm"><center>Como entrar</center>  <center>كيفية الاشتراك </center></a> </li>
        <li><a href="ListOfMembers.htm"><center>Lista de Membros</center>  <center>  قائمة الاعضاء </center></a> </li>  
    </ul>
</li>    
<li><a href="Contacts.htm"><center>Contactos</center>  <center>اتصل بنا  </center></a>     </li> 
</ul>
</div>
</div>
</div>
<div id="content">
<div class="hr">

</div> 
<div class="row fixed">
<div class="col-220">
<ul id="news-box">
<p></p>
</ul>
</div>
<div class="col-460 ">
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="form1" method="post" action="checklogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="password" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table>

</div>
</div>
</div>

<div id="footer">
<div class="row fixed">
<div class="col-220">
    <p >

        <img width="130" height="70"   alt="emb" src="Images/smartcom.jpg"/><br>
<strong>
&copy; 2012

<a href="http://www.smartcom.pt">Smartcom,
        <br/></a>Intelligent Communications&nbsp;

</strong>
</p>
<p >
All rights reserved.
<br/>

</p>
</div>
<div class="col-460 ">

</div>
</div>
</div>
</div>
</div>  
</form>

</body>
</html> 
```

检查登录.php：

```
<?php
//ob_start();
//session_start();
if(isset($_POST['submit']))
{
$host="localhost"; // Host name
$username="ccili_userccili"; // Mysql username
$password="lKUJZhn[{w#e"; // Mysql password
$db_name="ccili_BD"; // Database name
$tbl_name="User"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

//$sql="SELECT * FROM $tbl_name WHERE LOGINNAME='$myusername' and LOGINPASS='$mypassword'";
$result=mysql_query("SELECT * FROM $tbl_name WHERE LOGINNAME='$myusername' and LOGINPASS='$mypassword'");

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.htm"
session_register("myusername");
session_register("mypassword");

header("Location: login_sucess.php");
//header("Location: http://ccili.org/login_sucess.php");
die();
}
else {
echo "Wrong Username or Password";
}
}
//ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:37:06.437

您有嵌套的表单标签，但这并不完全有效。表单正在提交给第一个没有 action 属性的标签。

以下是有关嵌套问题的更多见解：[您可以嵌套 html 表单吗？](https://stackoverflow.com/questions/379610/can-you-nest-html-forms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:59:28.113

好吧，让我猜猜问题 - 将 action 和 type 属性添加到表单

# c# - 如何选择保存 XML 文件的路径？

> ID：11586769
> 
> 赞同：0
> 
> 时间：2012-07-20T20:50:08.550
> 
> 标签：c#, savefiledialog

我有一个可以保存 .xml 文件的功能。

```
private void buttonSaveXML_Click(object sender, EventArgs e)
{
     SaveFileDialog saveFile = new SaveFileDialog();
     saveFile.Filter = "XML Files|*.xml";
     saveFile.Title = "Save a Xml File";
     saveFile.ShowDialog();
     if (saveFile.FileName != "")
     {
         FileStream fs = (FileStream)saveFile.OpenFile();
         dsVersions.WriteXml(fs);
     }
} 
```

我要添加什么来创建要保存到的特定路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:56:49.037

您可以控制[InitialDirectory](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.initialdirectory.aspx)以便用户将“在正确的位置”，但您不能阻止他们使用 SaveFileDialog 切换目录。

这样，它们将位于您的*默认路径*中，而不是例如在桌面上。

```
saveFile.InitialDirectory = @"C:\My\Path" ; 
```

通常，我将保存用户在应用程序配置中选择保存文件的最后一个目录，并将用户的最后一个目录用作 InitialDirectory。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:02:11.807

使用 SaveFileDialog 表单的属性 InitialDirectory。例如，将此添加到您的代码中：

```
saveFile.InitialDirectory = "C:\\MyXMLs\\"; 
```

您可以查看[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.initialdirectory.aspx)。

# javascript - Javascript子模块方法

> ID：11586772
> 
> 赞同：0
> 
> 时间：2012-07-20T20:50:19.810
> 
> 标签：javascript, javascript-namespaces

我最近开始在一个环境中，JS 编程的子模块方法在整个应用程序中专门使用。然而，来自广告的狂野西部，我很难理解它。我理解这些概念，这就是为什么以下警报永远不会触发如此令人沮丧的原因：

```
customNamespace.anotherCustomVar = (function ($, customNamespace) { 
    return {
        init : function () {
            alert(''); // Doesn't fire
        }
    };
})( jQuery, customNamespace ); 
```

查看几乎完全一样的另一个文件，在 init fn 中添加警报可以正常工作。

```
customNamespace.aDifferentCustomVar = (function ($, customNamespace) {
    return {
        init : function () {
             alert(''); // Does fire
        }
    };
})( jQuery, customNamespace ); 
```

这些是在同一目录 fyi 中的单独 js 文件。如果 aDifferentCustomVar 有效，它是否与我的 anotherCustomVar 名称有关？

# ajax - 从 Action 将 PartialView 返回到特定的 div

> ID：11586775
> 
> 赞同：1
> 
> 时间：2012-07-20T20:50:21.697
> 
> 标签：ajax, asp.net-mvc, razor, partial-views

我正在使用 jQuery UI 和 PartialViews 并遇到了一个我无法安静地解决问题的问题。

这一点按我的预期工作：

```
<div>
    @Ajax.ActionLink("Test Me!", "dialogtest", new { id = Model.Id }, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "dialogtest-view" })</td>
</div>
<div id="dialogtest-view">
</div> 
```

这个 GET 到这个操作方法

```
[HttpGet]
public PartialViewResult DialogTest(int id)
{
    //pretend to get something from DB here
    var vm = new DialogUITestVM();
    return PartialView("uidialog_partial", vm);
} 
```

并返回一个显示在目标 div 中的 PartialView。jQuery + jQueryUI 用于将此 div 作为模式对话框弹出。第 1 部分测试完成！

好的，现在假设返回的 PartialView 只是一个带有文本框的基本表单，类似于：

```
@using (Html.BeginForm("DialogTest", "pages", FormMethod.Post))
{  
    @Html.HiddenFor(x => x.Id)
    @Html.TextBoxFor(x => x.Name)
    <button type="submit">Test Me!</button>
} 
```

这是 POSTd 回控制器罚款 -

```
[HttpPost]
public ActionResult DialogTest(DialogUITestVM vm)
{
    //arbitrary validation so I can test pass and fail)
    if (vm.Name.Equals("Rob"))
    {
        //error!
        vm.ErrorMessage = "There was an error you numpty. Sort it out.";
        return PartialView(vm);
    }

    //hooray it passed - go back to index
    return RedirectToAction("index");
} 
```

但是 - 如果我让操作验证失败，而不是再次将 PartialView 定位到 div，它会重绘整个页面（这显然会丢失 jQuery UI 对话框）。

我想要的是：如果验证失败，只需更新`div`包含表单的内容。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:12:42.197

您可以在部分表单中使用 Ajax 表单而不是普通表单，并在 AjaxOptions 中使用 OnSuccess 回调：

```
@using (Ajax.BeginForm("DialogTest", "pages", new AjaxOptions { UpdateTargetId = "dialogtest-view", OnSuccess = "success" }))
{  
    @Html.HiddenFor(x => x.Id)
    @Html.TextBoxFor(x => x.Name)
    <button type="submit">Test Me!</button>
} 
```

然后分别修改你的控制器动作：

```
[HttpPost]
public ActionResult DialogTest(DialogUITestVM vm)
{
    //arbitrary validation so I can test pass and fail)
    if (vm.Name.Equals("Rob"))
    {
        //error!
        vm.ErrorMessage = "There was an error you numpty. Sort it out.";
        return PartialView(vm);
    }

    //hooray it passed - go back to index
    return Json(new { redirectUrl = Url.Action("Index") });
} 
```

当然，在您的 javascript 文件中定义相应的成功回调：

```
function success(result) {
    if (result.redirectUrl) {
        window.location.href = result.redirectUrl;
    }
} 
```

# objective-c - WebDAV 通信（Objective-C/Cocoa）

> ID：11586778
> 
> 赞同：1
> 
> 时间：2012-07-20T20:51:07.473
> 
> 标签：objective-c, ios, webdav

我一直在网上搜索，iOS 没有一些很棒的 WebDAV 框架。我需要登录服务器并发送/接收一些文件，但我意识到这并不简单。

任何人都有一些使用 WebDAV**上传/接收**文件的简单提示/解决方案？

# ajax - 列表 事件

> ID：11586779
> 
> 赞同：55
> 
> 时间：2012-07-20T20:51:08.970
> 
> 标签：ajax, jsf, jsf-2, primefaces

我搜索了互联网，但找不到`<p:ajax>`事件列表。谁能提供`<p:ajax>`标签的完整事件列表？

`onblur`如果有活动或类似的事情，我特别感兴趣。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-03-28T15:22:45.880

您可能想查看“JavaScript HTML DOM 事件”以了解事件的一般概述：

[http://www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)

PrimeFaces 建立在 jQuery 之上，因此这里是 jQuery 的“事件”文档：

[http://api.jquery.com/category/events/](http://api.jquery.com/category/events/)

[http://api.jquery.com/category/events/form-events/](http://api.jquery.com/category/events/form-events/)

[http://api.jquery.com/category/events/keyboard-events/](http://api.jquery.com/category/events/keyboard-events/)

[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)

[http://api.jquery.com/category/events/browser-events/](http://api.jquery.com/category/events/browser-events/)

下面，我列出了一些更常见的事件，以及关于它们可以在哪里使用的注释（取自 jQuery 文档）。

**鼠标事件**

（任何 HTML 元素都可以接收这些事件。）

`click`

`dblclick`

`mousedown`

`mousemove`

`mouseover`

`mouseout`

`mouseup`

**键盘事件**

（这些事件可以附加到任何元素，但事件仅发送到具有焦点的元素。可聚焦元素可能因浏览器而异，但表单元素始终可以获得焦点，因此这些事件类型的合理候选者。）

`keydown`

`keypress`

`keyup`

**表单事件**

`blur`（在最近的浏览器中，事件的域已扩展为包括所有元素类型。）

`change`（此事件仅限于`<input>`元素、`<textarea>`框和`<select>`元素。）

`focus`（此事件隐式适用于有限的一组元素，例如表单元素（`<input>`、`<select>`等）和链接（ ）。在最近的浏览器版本中，可以通过显式设置元素的*tabindex*属性`<a href>`来扩展该事件以包括所有元素类型. 元素可以通过键盘命令（例如*Tab*键）或通过鼠标单击元素获得焦点。）

 **`select`（此事件仅限于`<input type="text">`字段和`<textarea>`框。）

`submit`（它只能附加到`<form>`元素。）

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-20T21:19:15.873

您可以在[PrimeFaces User's Guide](https://www.primefaces.org/documentation/)中搜索*“Ajax 行为事件”*，您会发现所有受支持组件的大量此类事件。[这也是 PrimeFaces 领导 Optimus Prime 在 PrimeFaces 论坛活动列表](http://forum.primefaces.org/viewtopic.php?f=3&t=20683)中的相关问题中建议做的事情？[`<p:ajax>`](http://forum.primefaces.org/viewtopic.php?f=3&t=20683)

没有`onblur`事件，即 HTML 属性名称，但有一个`blur`事件。它只是没有像 HTML 属性名称那样的“on”前缀。您还可以查看相关组件的[标签文档](http://www.primefaces.org/docs/vdl/3.4/)的所有“on*”属性，以查看哪些都是可用的，例如[`<p:inputText>`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/inputText.html).

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-11-06T17:47:51.057

Schedule 提供各种 ajax 行为事件来响应用户操作。

*   "dateSelect" org.primefaces.event.SelectEvent 选择日期时。
*   "eventSelect" org.primefaces.event.SelectEvent 当一个事件被选中时。
*   "eventMove" org.primefaces.event.ScheduleEntryMoveEvent 移动事件时。
*   "eventResize" org.primefaces.event.ScheduleEntryResizeEvent 调整事件大小时。
*   "viewChange" org.primefaces.event.SelectEvent 当视图改变时。
*   "toggleSelect" org.primefaces.event.ToggleSelectEvent 当切换所有复选框更改时
*   "expand" org.primefaces.event.NodeExpandEvent 当一个节点被展开时。
*   "collapse" org.primefaces.event.NodeCollapseEvent 当一个节点被折叠时。
*   "select" org.primefaces.event.NodeSelectEvent 当一个节点被选中时。-
*   "collapse" org.primefaces.event.NodeUnselectEvent 当一个节点未被选中时
*   "expand org.primefaces.event.NodeExpandEvent 当一个节点被展开时。
*   "unselect" org.primefaces.event.NodeUnselectEvent 当一个节点被取消选择。
*   "colResize" org.primefaces.event.ColumnResizeEvent 调整列大小时
*   “页面” org.primefaces.event.data.PageEvent 在分页上。
*   "sort" org.primefaces.event.data.SortEvent 对列进行排序时。
*   “过滤器” org.primefaces.event.data.FilterEvent 过滤。
*   "rowSelect" org.primefaces.event.SelectEvent 当一行被选中时。
*   "rowUnselect" org.primefaces.event.UnselectEvent 当一行被取消选择时。
*   "rowEdit" org.primefaces.event.RowEditEvent 当一行被编辑时。
*   "rowEditInit" org.primefaces.event.RowEditEvent 当一行切换到编辑模式时
*   "rowEditCancel" org.primefaces.event.RowEditEvent 当行编辑被取消时。
*   "colResize" org.primefaces.event.ColumnResizeEvent 选择列时。
*   "toggleSelect" org.primefaces.event.ToggleSelectEvent 当标题复选框被切换时。
*   "colReorder" - 当列重新排序时。
*   "rowSelectRadio" org.primefaces.event.SelectEvent 用收音机选择行。
*   "rowSelectCheckbox" org.primefaces.event.SelectEvent 带有复选框的行选择。
*   "rowUnselectCheckbox" org.primefaces.event.UnselectEvent 用复选框取消选择行。
*   "rowDblselect" org.primefaces.event.SelectEvent 双击选择行。
*   "rowToggle" org.primefaces.event.ToggleEvent 行展开或折叠。
*   “contextMenu” org.primefaces.event.SelectEvent ContextMenu 显示。
*   "cellEdit" org.primefaces.event.CellEditEvent 编辑单元格时。
*   "rowReorder" org.primefaces.event.ReorderEvent 对行重新排序。

这里还有更多[https://www.primefaces.org/docs/guide/primefaces_user_guide_5_0.pdf](https://www.primefaces.org/docs/guide/primefaces_user_guide_5_0.pdf)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-08-23T11:46:09.447

由于可能的事件列表`p:ajax`与其自身无关，而是与它一起使用的组件相关，因此您必须询问组件它支持哪些 ajax 事件。

有多种方法可以确定给定组件的 ajax 事件：

**1）询问 xhtml 中的组件**：

您可以通过将该组件绑定到请求范围的变量并打印`eventNames`属性来直接在 xhtml 中输出列表：

```
<p:autoComplete binding="#{ac}"></p:autoComplete>
<h:outputText value="#{ac.eventNames}" /> 
```

这输出

```
[blur, change, valueChange, click, dblclick, focus, keydown, keypress, keyup,
 mousedown, mousemove, mouseout, mouseover, mouseup, select, itemSelect,
 itemUnselect, query, moreText, clear] 
```

**2）在java代码中询问组件**：

找出组件实现类并调用它的`javax.faces.component.UIComponentBase.getEventNames()`方法实现：

```
import javax.faces.component.UIComponentBase;

public class SomeTest {

    public static void main(String[] args) {
        dumpEvents(new org.primefaces.component.inputtext.InputText());
        dumpEvents(new org.primefaces.component.autocomplete.AutoComplete());
        dumpEvents(new org.primefaces.component.datatable.DataTable());
    }

    private static void dumpEvents(UIComponentBase comp) {
        System.out.println(
                comp + ":\n\tdefaultEvent: " + comp.getDefaultEventName() + ";\n\tEvents: " + comp.getEventNames());
    }

} 
```

这输出：

```
org.primefaces.component.inputtext.InputText@239963d8:
    defaultEvent: valueChange;
    Events: [blur, change, valueChange, click, dblclick, focus, keydown, keypress, keyup, mousedown, mousemove, mouseout, mouseover, mouseup, select]
org.primefaces.component.autocomplete.AutoComplete@72d818d1:
    defaultEvent: valueChange;
    Events: [blur, change, valueChange, click, dblclick, focus, keydown, keypress, keyup, mousedown, mousemove, mouseout, mouseover, mouseup, select, itemSelect, itemUnselect, query, moreText, clear]
org.primefaces.component.datatable.DataTable@614ddd49:
    defaultEvent: null;
    Events: [rowUnselect, colReorder, tap, rowEditInit, toggleSelect, cellEditInit, sort, rowToggle, cellEdit, rowSelectRadio, filter, cellEditCancel, rowSelect, contextMenu, taphold, rowReorder, colResize, rowUnselectCheckbox, rowDblselect, rowEdit, page, rowEditCancel, virtualScroll, rowSelectCheckbox] 
```

**3) 'rtfm'** ;-)

最好的选择是查看组件开发人员希望提供的正在使用的特定组件的文档，不限于 PrimeFaces 顺便说一句。（`p:ajax`可以附加到任何提供 ajax 行为的组件）。

与以前的建议相比的优势在于，文档不仅提供了事件名称，而且还提供了对事件的增强描述，该描述可能通过一个可以被侦听器捕获的事件类型类来丰富。

例如`org.primefaces.event.SelectEvent`在这种情况下

`<p:ajax event="itemSelect" listener="#{anyBean.onItemSelect}"/>`

侦听器方法签名`public void onItemSelect(SelectEvent)`提供额外的事件上下文数据。

如果 PrimeFaces 文档中的组件上没有明确的 ajax 事件列表，则可以通过删除“on”并将其余部分用作事件名称，将 on* javascript 回调列表用作事件。这个问题中的其他答案也为这些普通的 dom 事件提供了帮助。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-07T09:26:52.490

不幸的是，Ajax 事件的文档记录很差，我还没有找到任何完整的列表。例如，用户指南 v. 3.5 列出了*itemChange*事件`p:autoComplete`，但忘记提及*change*事件。

如果您想了解支持哪些事件：

1.  下载并解压primefaces源jar
2.  找到定义了您的组件的 JavaScript 文件（例如，大多数表单组件，例如在*forms.js*`SelectOneMenu`中定义的）
**   搜索`this.cfg.behaviors`参考资料*

 *例如，该部分负责在组件中启动*toggleSelect*事件`SelectCheckboxMenu`：

```
fireToggleSelectEvent: function(checked) {
    if(this.cfg.behaviors) {
        var toggleSelectBehavior = this.cfg.behaviors['toggleSelect'];

        if(toggleSelectBehavior) {
            var ext = {
                params: [{name: this.id + '_checked', value: checked}]
            }
        }

        toggleSelectBehavior.call(this, null, ext);
    }
}, 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-17T10:29:27.340

我的列表处于调试模式；首先我看到了引发错误的地方

> javax.faces.view.facelets.TagException：/showcase/partial_submit.xhtml @26,36 事件：不支持更改。org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.applyAttachedObject(AjaxBehaviorHandler.java:179) org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.apply(AjaxBehaviorHandler.java:157)

然后我调试了 AjaxBehaviorHandler

[![在此处输入图像描述](../Images/9e5359e74ba48680df8e99c29d21d2e8.png)](https://i.stack.imgur.com/f9d07.png)

所以如果你想发现支持事件的正确列表，你可以生成一个错误（使用错误的事件名称），然后按照这种方式

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-10T14:36:10.910

这是我在调试过程中发现的。

[![在此处输入图像描述](../Images/2fa059c1e435264ceac97b87fe390d4c.png)](https://i.stack.imgur.com/1C55f.png)***

# html - 如果我使用 HTML 5，有多少网络用户无法使用我的应用程序？

> ID：11586782
> 
> 赞同：3
> 
> 时间：2012-07-20T20:51:19.407
> 
> 标签：html

我正在查看有关 HTML5 支持的 wiki 页面，感觉有点困惑。这是[链接](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28HTML5%29)

如果我理解它，那么 IE 几乎没有支持，而其他支持则在一点点和一些之间。没有很多。

因此，HTML 5 包含了大量不同的技术，其中一些技术比其他技术更接近完成。因此，让我们专注于说 Canvas 和拖放以及您认为有意义的任何其他内容，视频标签？你选。

我也不确定 Javascript 发生了什么变化。我假设有像 Canvas 这样的新 API？

如果我只使用 HTML5，尤其是有趣的东西、Canvas 等，会有很大一部分网络用户无法使用我的网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:52:54.170

当前所有的浏览器都支持 HTML5。它对 HTML5 的支持程度和支持程度是个问题，因此其他人发布了有用的链接。但是，您需要谨慎，因为浏览器可能会声称支持但效果不佳或不完整。`<audio`如果您想使用 preload 属性，则在每个浏览器中都可以正常工作，但 IE 除外。'contenteditable' 属性很棒，但是如果用户点击返回键，你会得到不同的结果。

简单的例子，但值得思考。最终一切都会解决的。

无论如何，我们尽可能使用 HTML5 技术，因为最终每个人都会这样做。他们很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:29:05.870

这是一个稍微友好的 html5 浏览器兼容性图表：[https](https://html5test.com/results/desktop.html) ://html5test.com/results/desktop.html 。

然后，您需要查看您网站的流量分析，看看您的访问者有多少百分比使用兼容 html5 的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:54:34.317

您的问题无法回答，因为不同的浏览器实现了 HTML5 的不同功能。您必须查看您想要专门使用的每个 HTML5 / CSS3 功能，并查看诸如 caniuse.com 之类的网站，它会告诉您有多少百分比的全球用户可以支持它。

您应该已经在使用 HTML5 doctype 标签，以及所有浏览器都将呈现的任何其他语义化的 HTML5 元素。

# java - 类转换异常泛型反射ParameterizedType

> ID：11586785
> 
> 赞同：2
> 
> 时间：2012-07-20T20:51:30.107
> 
> 标签：java, generics, reflection, classcastexception

我已经在 Stack 上寻找了一段时间的答案。所有的答案看起来好像他们说我已经有了正确的答案，但我仍然不断收到下面构造函数中第一行的类转换异常。

```
SEVERE: Exception while loading the app : EJB Container initialization error
java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at com.domain.security.logging.ElsAbstractCrudClass.<init>(ElsAbstractCrudClass.java:54) 
```

这是代码。在查看文档后，我仍然无法弄清楚。我对泛型和反射比较陌生，所以需要一些帮助。TIA。

```
 public abstract class ElsAbstractCrudClass<T> {
        Class<T> entity;

        public ElsAbstractCrudClass() {

[line 54]   ParameterizedType genericSuperclass = (ParameterizedType) getClass().getGenericSuperclass();
            Type type = genericSuperclass.getActualTypeArguments()[0];
            this.entity = (Class<T>) type;

        }
    } 
```

这是抽象 crud 类的子类（SessionLog 是 JPA 实体）：

```
@Stateless
public class SessionLogger extends ElsAbstractCrudClass<SessionLog> {

    @PersistenceContext(unitName = "ELS_Soulard_PU")
    private EntityManager em;
    @EJB
    DozerInstantiator di;
    //SessionLog entity;
    //SessionLog sessionLog = new SessionLog();
    static final Logger logger = Logger.getLogger(SessionLogger.class.getSimpleName());

    public SessionLogger() {
    }
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:03:48.063

`getGenericSuperclass``ParameterizedType`如果超类是泛型的，则返回一个实例，如果不是，则返回一个实例`Class`。大概你有类似的东西：

```
class A extends B { ... }
class B extends ElsAbstractCrudClass<Person> { ... } 
```

现在，`getClass()`返回`A.class`superclass `B.class`，这不是通用的......

只要运行时类不是通用的，您就可以概括您的代码片段以使其工作（递归地遍历类型层次结构，随时用它们的定义替换类型参数）。但是，除非您有几十个 crud 类，否则要求子类传递正确的类对象更容易：

```
public abstract class ElsAbstractCrudClass<T> {
    final Class<T> entityClass;

    public ElsAbstractCrudClass(Class<T> entityClass) {
        this.entityClass = entityClass;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:09:00.450

您收到此错误是因为 EJB 容器扩展了您的无状态 bean 以在方法调用上包装 EJB 特定逻辑。所以在部署时你有这样的事情：

```
ContainerSubclass extends SessionLogger {} 
```

解决方案：

1）在您的构造函数中第一次调用

```
... = getClass().getSuperClass();
... 
```

2) 或针对接口编写代码，以便 EJB 容器通过反射创建动态代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:15:42.847

遇到麻烦的另一种方法是，如果您的扩展类使用原始类型，而不是泛型类型。换句话说，这个子类将生成您的异常，因为它的超类型只是原始类型 ElsAbstractCrudClass。

```
public class EE extends ElsAbstractCrudClass { ... } 
```

但是这个不会，因为它的超类型是泛型类型 ElsAbstractCrudClass

```
public class EE extends ElsAbstractCrudClass<String> { ... } 
```

# c# - 将对象添加到列表的语法？

> ID：11586786
> 
> 赞同：0
> 
> 时间：2012-07-20T20:51:30.577
> 
> 标签：c#

我正在尝试找出将复杂对象添加到列表中的语法。这是我所知道的有效方法：

```
ComplexObject temp = new ComplexObject() {attribute1 = 5, attribute2 = 6};
ComplexObjectList.Add(temp); 
```

这就是我想要做的：

```
ComplexObjectList.Add(new ComplexObject(){attribute1 = 5, attribute2 = 6}); 
```

我意识到它不起作用，但是有没有其他方法可以在我的列表中添加一个而不事先创建一个？除了这个函数调用之外，我不需要 temp 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:03:03.543

假设您有此类（要点必须是可访问的构造函数，并且您希望设置的属性必须可见）：

```
public class Point
{
    public int X { get; set; }
    public int Y { get; set; }
} 
```

你有这个清单：

```
var listOfPoint = new List<Point>(); 
```

然后你可以，作为你的第二个例子思考，这样做：

```
listOfPoint.Add(new Point { X = 13, Y = 7 }); 
```

这*大致*相当于您的第一个示例（有一些细微差别，Eric Lippert 对此有一些很好的阅读）：

```
var temp = new Point { X = 13, Y = 7 };
listOfPoint.Add(temp); 
```

事实上，您也可以在构建列表时添加点：

```
var listOfPoint = new List<Point>
    {
         new Point { X = 7, Y = 13 }
    }; 
```

现在，您说您“意识到它不起作用”这一事实令人费解，因为您的初始化程序语法是正确的，所以我不确定您是在尝试之前询问，还是声明存在问题你的名单或你的班级让你失望。也就是说，如果您的第一个代码片段已编译，那么从技术上讲，您的第二个代码片段也应该如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:01:29.207

您的代码应该可以工作。如果不是，那么问题可能出在 ComplexObjectList 的声明中。应该是：`List<ComplexObject> ComplexObjectList = new List<ComplexObject>();` 还要确保类属性是公开的。

# c# - 使用实体框架创建一对“零或一”关系时遇到问题

> ID：11586788
> 
> 赞同：3
> 
> 时间：2012-07-20T20:51:34.990
> 
> 标签：c#, .net, entity-framework

我有两张桌子：

```
CREATE TABLE Order (
    orderId INTEGER IDENTITY NOT NULL,
    PRIMARY KEY (orderId) 
)

CREATE TABLE OrderAdditionalDetails (
    additionalDetailsId INTEGER IDENTITY NOT NULL,
    orderId INTEGER NOT NULL,
    PRIMARY KEY (additionalDetailsId),
    FOREIGN KEY (orderId) REFERENCES Order(orderId)
) 
```

我在 OrderAdditionalDetails 表的 orderId 字段上声明了一个外键 (FK_OrderAdditionalDetails_Order)。我对 OrderAdditionalDetails 表中的 orderId 字段也有一个“唯一”约束。这个想法是每个“订单”在“OrderAdditionalDetails”表中都有零个或一个条目。

这一切都由实体框架模型文件拾取，但是当我尝试创建 Navigation 属性时，它只允许我声明一对多的关系。我得到的错误如下：

运行转换：多重性在关系“FK_OrderAdditionalDetails_Order”中的角色“OrderAdditionalDetails”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是*。

我真的不确定这意味着什么 - 谷歌搜索错误并没有帮助。任何人都可以阐明我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:52:20.957

在您的`OrderAdditionalDetails`表格中，删除该`additionalDetailsID`列`orderID`并将`CLUSTERED PRIMARY KEY`. 保留`FOREIGN KEY`你已经拥有的。这是实现这一点的正确方法。

该列不仅没有增加任何价值`additionalDetailsId`，而且在表格中占用更多空间会使事情变得更糟。`orderID`已经是足够的密钥；您不需要辅助人工密钥，它**只不过是`orderID`**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:47:17.467

您的外键必须定义为`UNIQUE`以强制执行一对零或一关系。

也许尝试这样的事情：

```
CREATE TABLE OrderAdditionalDetails (
    additionalDetailsId INTEGER IDENTITY NOT NULL,
    orderId INTEGER NOT NULL UNIQUE,
    PRIMARY KEY (additionalDetailsId),
    FOREIGN KEY (orderId) REFERENCES Order(orderId)
) 
```

另请参阅：[在 SQL Server 中实现一对零或一关系](https://stackoverflow.com/questions/7644156/implementing-one-to-zero-or-one-relation-in-sql-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T16:41:06.727

我试图将表与自身的视图以及其他一些字段相关联。（有一个很好的理由与答案无关）

导致相同错误的原因是视图上有多个关键字段。尽管我已经指定了关联中涉及的字段，但它希望两者都是 1 对 1 工作的唯一关键字段。

我还在视图中将关键字段设置为 Distinct，但我在删除其他字段的关键属性之前这样做了，所以它可能是必要的，也可能不是必要的。

# css - 三个可变宽度、等间距的 DIV？四号呢？

> ID：11586791
> 
> 赞同：6
> 
> 时间：2012-07-20T20:51:53.290
> 
> 标签：css, css-float, html

我有一些非常简单的子导航，我试图在我的网站内容区域的顶部构建，但 CSS 似乎没有任何简单的解决方案来解决这样一个常见问题：我想要 3 或 4页面顶部等间距的 DIV。

1) 例如 3 个可变宽度、等间距的 DIV

```
[[LEFT]                [CENTER]               [RIGHT]] 
```

2) 例如 4 个可变宽度、等间距的 DIV

```
[[LEFT]    [LEFT CENTER]    [RIGHT CENTER]    [RIGHT]] 
```

对于只有 3 个 DIV 的第一个问题，我的解决方案是浮动左右 DIV，然后为中间 DIV 分配任意大小并给它“margin: 0 auto”。这不是一个真正的解决方案，但假设导航没有变化，它给出了我想要的结果的粗略近似值。

对于 4 个 DIV 的第二个问题，我的解决方案是以与以前相同的方式简单地将 DIV 居中，然后在其中浮动两个 DIV，例如

```
[[LEFT]    [[LEFT CENTER]    [RIGHT CENTER]]    [RIGHT]] 
```

但同样，这需要对中间 DIV 应用任意大小以进行对齐，并且如果对站点进行任何语言或图像更改，则必须重新计算对齐值。同样，它只是一个过于复杂的解决方案，需要将结构与表示合并。

任何帮助是极大的赞赏。

**编辑 2012 年 7 月 20 日下午 5:00**

好吧，我使用百分比将“表格单元”解决方案放置到位，但在我稍微复杂的实现中遇到了另一个问题：手头的问题是我所指的每个 DIV 实际上是另外两个 DIV 的容器，它们是图标标签对，通过浮点数或通过 display:inline-block 内联。

例如[http://jsfiddle.net/c3yrm/1/](http://jsfiddle.net/c3yrm/1/)

如您所见，列表中的最后一个元素显示不正确。

再次非常感谢任何帮助！

**编辑 2012 年 7 月 20 日晚上 7:16**

在 arttronics 帮助下的最终解决方案：http: [//jsfiddle.net/CuQ7r/4/](http://jsfiddle.net/CuQ7r/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:01:41.427

参考：[**jsFiddle 纯 CSS 演示**](http://jsfiddle.net/qx4WG/)

解决方案是针对`float`单个面包屑，同时使用一个简单的公式根据面包屑`width`总数确定面包屑的百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:08:27.283

您可以使用百分比，然后归结为简单的数学：

```
[[LEFT=22%]2% margin><2% margin[LEFT CENTER=22%]2% margin><2% margin[RIGHT CENTER=22%]2% margin><2% marginRIGHT=22%]]=100%/??px 
```

然后，您可以为其容器指定宽度并使用

```
display:inline; 
```

使它们保持内联。

注意：如果您使用边框来查看 div 正在做什么，这将增加未占用的空间，因此您需要将元素宽度减少 1% 左右，或者只需更改它们的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:58:15.630

```
ol {
    width: 400px;
    /*width: 800px;*/

    display: table;
    table-layout: fixed; /* the magic dust that ensure equal width */
    background: #ccc
}
ol > li {
    display: table-cell;
    border: 1px dashed red;
    text-align: center
} 
```

像这里：http: [//jsfiddle.net/QzYAr/](http://jsfiddle.net/QzYAr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T18:08:18.527

我发现的一种方法是使用弹性框（或内联弹性）。

[这](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)是一个很好的解释和如何完成的示例。

我认为在未来，flex box 将是处理这类事情的最佳方式，但直到其他浏览器赶上 Mozilla 关于如何使用 flex-basis 属性的思考方式（使用 min-content、max-content、 fit-content 等作为值），这些弹性框将继续成为响应式设计的问题。例如，有时当窗口被压扁时，内部内容 (a_really_really_long_word) 无法放入分配的空间，因此如果您不小心，有时屏幕右侧可能看不到某些内容。

我想也许如果你使用 flex-wrap 属性，你也许可以确保一切都合适。[这](https://developer.mozilla.org/en-US/docs/Web/CSS/flex-basis)是另一个如何完成此操作的示例（无论如何在 Mozilla 浏览器中）。

我倾向于将弹性框用于宽度相当固定（不太小）的信头或表格，因为它们通常很好地间隔开；对于内容必须压缩得非常小的网站，我倾向于使用嵌套的浮动和内联块对象（如此处其他一些答案中所建议的那样）。

# makefile - 为什么 .PHONY:target 而不是 target:.PHONY？

> ID：11586792
> 
> 赞同：9
> 
> 时间：2012-07-20T20:52:05.117
> 
> 标签：makefile, gnu-make, target

我仍然不明白为什么 Makefile 中的“假”规则将“.PHONY”作为他们的*目标*。*作为先决条件*，这将更加合乎逻辑。

我必须详细说明这一点吗？如果`A`依赖`B`并且`B`是假的，那么`A`也是假的。所以依赖图`.PHONY`←<code>B→<code>A 与 →<code>B→<code>A 相比是非常令人惊讶`.PHONY`的。（另一个论点是`make`必须处理`.PHONY`非常特殊的目标。）

虽然这种批评可能看起来相当理论化（毫无意义） - “既然 make 是如此古老，它的语法就在这里留下来”。但我不建议任何语法更改，还有另一种选择：

使用 GNU Make（至少），以下 Makefile 声明了一个 phony `target_A`：

```
target_A: _PHONY
        touch target_A

_PHONY:
        #noop 
```

**问题 1**：*这很简单，很干净，我肯定不是它的第一个发明者。事实上，考虑到这种选择，为什么`make`需要特殊语法？*

在我看来，这也可以很好地解决有关[虚假目标中通配符的](https://stackoverflow.com/questions/11118197/)问题，甚至可以在初学者怀疑时[阐明 .PHONY 的含义。](https://stackoverflow.com/questions/2145590/)

**问题2**：*您能想到这种方法劣势的任何情况吗？（调用`make .PHONY`有什么用吗？）*

（我应该提到，虽然我调用了其他`make`s，但 GNU Make 是我唯一有经验的实现 - 读取和编写 Makefile。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:35:19.157

使用的一个大问题`target_A: .PHONY`是它使得使用许多 make 的内置变量变得更加困难。以这个常见的食谱为例：

```
%.a: $(OBJ_FILES)
    $(LD) $(LFLAGS) -o $@ $^ 
```

该`$^`变量引入了作为先决条件列出的*所有内容。*如果`.PHONY`也在那里列出，那么它将被传递给命令行上的链接器，这可能不会导致任何好的事情发生。将元目标`.PHONY`用作先决条件会使这些内置变量的用处大大降低，因为`$(filter-out .PHONY,$^)`每次使用它们时都需要大量额外的处理。为了考虑依赖树，反转关系并`.PHONY`生成目标有点尴尬，但它清理了 makefile 的其余部分。

# javascript - 在 iFrame 中捕获跨站点脚本错误

> ID：11586796
> 
> 赞同：0
> 
> 时间：2012-07-20T20:52:22.160
> 
> 标签：javascript, google-chrome, cross-browser, forwarding

我有一个包含 iframe 的网页。iframe 内部是一个网站。该网站来自一个动态 url 变量，因此几乎任何网站都可以放置在 iframe 中。要容纳在 iframe 中的网站的某些域可能是转发域。我希望能够通过 javascript 检测到该域是转发域。但是，由于跨站点脚本安全，这是不可能的。

我在 chrome 控制台中注意到的是，当我尝试从 iframe 内的网站访问信息时，chrome 会显示一条实际的错误消息。但是我无法在我的 javascript 中获取该错误消息。正如您从图片中看到的那样，我有指向 iframe 的域，然后是 iframe 中网站的实际域，由 chromes 错误消息指出。

有谁知道我怎么能得到那个错误信息？我曾尝试使用 try catch(err) 但这似乎不起作用。或者，更好的是，知道如何从 javascript 中获取 iframe 中网站的详细信息吗？我需要的唯一细节是它的 URL。

提前致谢！

[![重定向错误图像](../Images/3923f4532968444f9d8ec700120f4e24.png)](https://i.stack.imgur.com/ZSXJI.png)
[（来源：[farfromthere.org](http://farfromthere.org/wp-content/uploads/2012/07/Redirect-Chrome-Capture.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:50:25.147

出于安全原因，您无法访问 iframe 的当前位置，或者它是否已重定向。唯一的例外是，如果您正在检查 iframe 是否包含与您的来源相同的页面；在这种情况下，您将能够访问 iframe。

# c# - 拦截/记录方法调用（.net 框架）

> ID：11586798
> 
> 赞同：0
> 
> 时间：2012-07-20T20:52:27.097
> 
> 标签：c#, .net, logging, interceptor

类和方法是公共和静态的，所以我可以调用该方法但不能覆盖它！该程序已经编译，我无法访问源代码，所以我无法编辑它。而且我不能向图书馆添加一些东西。（只需访问 .NETFramework 4.0）

该程序会加载您的 .cs 文件并让您覆盖一个名为 pulse 的方法，该方法类似于 main 方法，在运行时会一遍又一遍地调用 pulse 方法。因此，您可以使用该方法调用自己编写的代码。

当满足某个条件时，我需要拦截/记录的方法将被调用，然后将被一遍又一遍地调用（每隔几秒），直到满足最终条件。参数不会改变（从第一次调用到最终条件）我只需要找出调用该方法的参数值，仅此而已:)

当我要记录/拦截的方法被调用时，如何保存参数条目值？

感谢您的回答！

# jquery - 为什么 jQuery 不能从内联 css 中准确查询顶级样式？

> ID：11586799
> 
> 赞同：1
> 
> 时间：2012-07-20T20:52:27.623
> 
> 标签：jquery

我正在尝试根据 css 属性进行选择（在我的情况下`top`）。

HTML：

```
<i style="top:1px;">1px</i><br/> 
```

JS：

```
$('i').each(function() {
    var top = $(this).css('top');
    console.log('top = '+top);
    if(top == '1px') j(this).css('border','1px solid green');
}); 
```

但这不起作用。顶部的值为“自动”。小提琴：http: [//jsfiddle.net/forgetcolor/qUjWq/](http://jsfiddle.net/forgetcolor/qUjWq/)

我猜这与计算样式（？）有关，但不确定。这是怎么回事，有没有办法根据风格区分标签？（在我的应用程序中，我无法控制编写的 HTML，因此无法更改它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:57:30.473

击败我为什么，但你可以这样做：

```
var top = $(this).get(0).style.top; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:01:42.290

它不是 jQuery，`auto`是正确的。该`top`属性仅在元素不是自动定位时使用，即：绝对，

[http://jsfiddle.net/qUjWq/2/](http://jsfiddle.net/qUjWq/2/)

否则，您需要执行@Mike 显示的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:01:59.123

您需要`postion`为 css 分配属性，使其成为 auto 以外的属性。我在`position:relative` [这里应用了一个（新的 jsFiddle）](http://jsfiddle.net/qUjWq/1/)，它现在可以工作了。

[http://jsfiddle.net/qUjWq/1/](http://jsfiddle.net/qUjWq/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T21:49:59.783

我认为原始小提琴中只是有一些错字。看一下这个 。 [http://jsfiddle.net/eQVar/](http://jsfiddle.net/eQVar/) 我没有改变任何东西。（只是纠正了错字有aj而不是$）。所以 top 可以在没有位置的情况下使用。:)

# delphi - 实随机数

> ID：11586801
> 
> 赞同：-1
> 
> 时间：2012-07-20T20:52:39.967
> 
> 标签：delphi, delphi-xe2

我正在尝试像这样获得 0-20 的随机数

```
RandomRange(0, 20) 
```

我知道很多软件在使用内置函数进行随机时，每次运行程序时都会给出相同的随机数，因此不是那么随机.. RandomRange 会以这种方式运行吗？由于不在编程计算机附近，我无法测试。如果答案是肯定的，那么我怎样才能得到一个真正随机的数字？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:56:24.153

[http://www.delphibasics.co.uk/RTL.asp?Name=Random](http://www.delphibasics.co.uk/RTL.asp?Name=Random)

[http://www.delphibasics.co.uk/RTL.asp?Name=Randomize](http://www.delphibasics.co.uk/RTL.asp?Name=Randomize)

Randomize 命令将根据一天中的当前时间重新播种随机数生成器。这样，您将获得完全相同的“随机”数字序列的唯一方法是在一天中完全相同的时间运行程序（出于这些目的，通常测量到几分之一秒）。

编辑：您也可以使用 RandSeed (http://www.delphibasics.co.uk/RTL.asp?Name=RandSeed) 自己选择种子。如果您想要多次测试相同的序列、进行调试或想要基于除一天中的时间以外的其他种子进行随机化，这将非常有用。

# xdebug - 使用 sublime text 2 运行 xdebug

> ID：11586804
> 
> 赞同：2
> 
> 时间：2012-07-20T20:53:05.827
> 
> 标签：xdebug, sublimetext2

所以我试图让 sublime text 2 与 x-debug 一起运行我已经安装了

> Kindari-SublimeXdebug

我有 wamp（我已启用 xdebug）这是 php.ini 配置

```
; XDEBUG Extension

zend_extension = 

"c:/wamp/bin/php/php5.3.10/zend_ext/php_xd

ebug-2.1.2-5.3-vc9-x86_64.dll"

[xdebug]
xdebug.remote_enable = On
xdebug.profiler_enable = On
xdebug.profiler_enable_trigger = On
xdebug.profiler_output_name = 

cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/wamp/tmp"
xdebug.remote_connect_back = On
xdebug.remote_autostart = On 
```

但是每次我尝试通过 sublime 连接它时：

```
Xdebug : is not running 
```

即使在我的 phpinfo() 中；它表明它可能运行..对不起，我还是 x-debug 和 sublime 的新手......提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:59:31.463

我认为您需要将以下行添加到 xdebug 配置中`php.ini`：

```
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:42:53.267

尽管听起来您继续前进，但我会为遇到您问题的其他人添加此内容...

我也在运行 WAMP，让 Xdebug 与 Sublime Text 2 一起工作没有问题。确保遵循 Xdebug 的[定制安装说明](http://www.xdebug.org/wizard.php "量身定制的安装说明")，它应该为你设置适当的 Xdebug DLL 和 php.ini 语句（确保你重新编辑正确的 php.ini！），相当于以下内容（与上面已经说过的 @Duke 和 @jasonmcclurg 非常匹配）：

```
zend_extension = "D:\Program Files (x86)\Wamp\bin\php\php5.3.6\ext\php_xdebug-2.2.2-5.3-vc9.dll"

xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

您可以通过检查 的输出来检查 Xdebug 是否正确安装在本地服务器上`phpinfo()`，请参阅[Xdebug 常见问题解答](http://xdebug.org/docs/faq "Xdebug 常见问题")了解一些细节。

根据[SublimeXdebug 的自述文件](https://github.com/Kindari/SublimeXdebug "SublimeXdebug")，在 Sublime 中使用`Shift`+`F8`并从出现的下拉菜单中选择 Start Debugger，然后在 PHP 代码中设置断点（将插入符号放在所需的 PHP 代码行上，按`Shift`+ `F8`，选择 Add/Remove Breakpoint）。

要触发[远程调试](http://xdebug.org/docs/remote "远程调试")（让 xdebug 连接），请将查询字符串附加`?XDEBUG_SESSION_START=1`到本地站点的 URL（例如，`http://localhost/index.php?XDEBUG_SESSION_START=1`）或使用为您执行等效操作的浏览器扩展程序/插件（例如，[Chrome 的 xdebug_session 帮助程序](http://userscripts.org/scripts/review/132695 "xdebug_session 助手")，或者，这是什么我使用，[简单的 Xdebug for Firefox](http://www.elime.be/easyxdebug.htm "简单的xdebug")）。另一种选择是让 SublimeXdebug 自动触发远程调试，有关详细信息，请参阅 SublimeXdebug 的自述文件。

一旦您的浏览器请求一个使用您的断点引用 PHP 文件的页面（并假设 PHP 解释器实际上到达带有您的断点的特定行，即您的脚本没有分支到其他地方，或者您的应用程序/CMS 没有返回缓存页面，可能会放弃执行您的脚本），执行应该在断点处停止......

如果一切设置正确但没有到达断点，SublimeXdebug 会在浏览器完成页面加载时在 Sublime 的状态栏上短暂显示“ *Xdebug: Page finished execution. Reload to continue debugging. ”。*

# signals - 在 Bourne shell 中同时观察信号和进程退出

> ID：11586811
> 
> 赞同：8
> 
> 时间：2012-07-20T20:53:36.317
> 
> 标签：signals, sh, wait, shell-trap

我有一个想要监视另一个程序的 Bourne shell (/bin/sh) 脚本（用于可移植性）。它应该启动另一个程序，然后等待它退出。当第二个程序退出时，它会做一些最后的工作并自行退出。问题是脚本还需要响应信号（例如 USR2）并在这些信号出现时做一些工作。

我天真的实现是：

```
#! /bin/sh
echo $$
trap 'echo Respond to USR2' USR2
/bin/sleep 120 &
pid=$!
wait $pid
echo $pid exited with $?
echo Doing final cleanup 
```

这行不通。如果我发送 shell SIGUSR2，陷阱会按预期触发，但等待也会结束，返回 140。 /bin/sleep 继续其愉快的方式。典型输出：

```
28849
Respond to USR2
28850 exited with 140
Doing final cleanup 
```

这种行为在 dash 和 bash 之间是一致的，我可以方便地访问这两个 Bourne shell 衍生物。

我目前的工作是旋转循环等待子 PID 消失，用 kill 进行探测。自旋循环似乎很浪费，并且如果 PID 被快速重用，我的脚本可能会错误地等待错误进程的窗口扩大。

```
#! /bin/sh
echo $$
trap 'echo Respond to USR2' USR2
/bin/sleep 15 &
pid=$!
while /bin/kill -0 $pid 2> /dev/null; do
    echo waiting...
    sleep 2
done
echo Doing final cleanup 
```

考虑到我的目标是同时等待另一个进程退出并能够响应信号，是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:41:55.630

你可以这样做：

```
while wait $pid; test $? -gt 128; do
    kill -0 $pid 2> /dev/null || break;
done 
```

但请注意 sh 标准中的以下内容：

如果等待的退出状态大于 128，则应用程序无法知道等待的进程是以该值退出还是被信号杀死。由于大多数实用程序以较小的值退出，因此很少有任何歧义。即使在模棱两可的情况下，大多数应用程序只需要知道异步作业失败了；它是否检测到错误并失败或被杀死并且没有正常完成其工作都没有关系。

在这种情况下，歧义略有不同。您不知道等待是否被信号中断，或者孩子是否被信号终止。

# windows - 如何检测 Windows 中何时连接了新硬件？

> ID：11586819
> 
> 赞同：3
> 
> 时间：2012-07-20T20:54:43.650
> 
> 标签：windows, winapi

Windows 中是否存在允许应用程序检测新硬件何时连接到系统的机制？特别是我想检测：

*   任何正在连接/断开的串行端口
*   我使用 WinUSB 的自定义 USB 转 I2C 板

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:56:35.617

你想要[`RegisterDeviceNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363431%28v=vs.85%29.aspx)和`WM_DEVICECHANGE`。

# php - PHP - 解析空间有限的文本文件

> ID：11586826
> 
> 赞同：0
> 
> 时间：2012-07-20T20:55:10.077
> 
> 标签：php, parsing

我知道这里有类似的信息，但是我今天真的很密集，似乎无法跟随它们并将它们拼凑成我需要的东西。我对 PHP 也很陌生。

我有一个文本文件托管在另一台服务器（实际上是 Dropbox 服务器）上，其中包含空格分隔的文本，如下所示：

McDonalds Odana Rd Petsmart Verona Rd Like a Kite Knickerbocker Ave

我想输入它，解析它，并将其作为谷歌搜索链接反刍，如下所示：

```
<a href="http://www.google.com/search?q=McDonalds+Odana+Rd">McDonalds Odana Rd</a> 
```

如果我确定我是唯一编辑文本文件的人，我可以想出更简单的分隔符，但这是需要非常易于使用的应用程序的一部分。如果需要，我可能会强制执行行尾字符。

非常感谢你帮助我度过了我的大脑迷雾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:00:42.553

简单的。获取文本，[`urlencode`](http://php.net/manual/en/function.urlencode.php)在其上使用，然后将其硬`echo`插入链接。像这样的东西：

```
$file = fopen('text.txt', 'r') or die('error');
while ($text = fgets($file)) {
    $encode = urlencode($text);
    echo "<a href='http://www.google.com/search?q=$encode'>$text</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:00:42.030

你可以使用：

```
<?php    
$fields=explode(" ",file_get_contents(<filepath>));
foreach ($fields as $place)
echo '<a href="http://www.google.com/search?q='.$place.'">'.$place.'</a>';
?> 
```

# javascript - 向正则表达式添加特殊字符？

> ID：11586828
> 
> 赞同：5
> 
> 时间：2012-07-20T20:55:24.197
> 
> 标签：javascript, regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:03:43.977

Use [unicode or octal codes](http://www.utf8-chartable.de/unicode-utf8-table.pl?utf8=oct):

```
/\u0022/ // matches "
/\042/ // matches " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:04:28.683

# asp.net-mvc - ViewModel 命名空间

> ID：11586829
> 
> 赞同：2
> 
> 时间：2012-07-20T20:55:30.660
> 
> 标签：asp.net-mvc

我有一个这样的视图模型：

```
 namespace Lipton.Areas.Drugs.Models
    {
      public class DrugViewModel
      {
        public string ID { get; set; }
        public IEnumerable<tblDrug> DrugList { get; set; }
      }
    } 
```

以上工作正常。它之所以起作用是因为 tblDrug 位于适当的命名空间中：Lipton.Areas.Drugs.Models。但是，如果我需要为另一个表添加 IEnumerable 会发生什么 - tblEmp 它位于完全不同的命名空间中（Lipton.Areas.Empl.Models：

```
 namespace Lipton.Areas.Drugs.Models
    {
      public class DrugViewModel
      {
        public string ID { get; set; }
        public IEnumerable<tblDrug> DrugList { get; set; }
        public IEnumerable<tblEmp> EmpList { get; set; }
      }
    } 
```

由于命名空间问题，我将如何修改上述代码以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:18:04.420

您添加一个[`using`](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)指令以将命名空间带入范围，以便您可以直接使用在此命名空间中声明的类型而无需完全限定它们：

```
namespace Lipton.Areas.Drugs.Models
{
    using Lipton.Areas.Empl.Models

    public class DrugViewModel
    {
        public string ID { get; set; }
        public IEnumerable<tblDrug> DrugList { get; set; }
        public IEnumerable<tblEmp> EmpList { get; set; }
     }
} 
```

我什至不知道为什么这个问题被标记为[asp.net-mvc](/questions/tagged/asp.net-mvc "显示标记为“asp.net-mvc”的问题")。这是基本的[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:21:13.957

您可以显式添加命名空间`tblEmp`

```
namespace Lipton.Areas.Drugs.Models
{
  public class DrugViewModel
  {
    public string ID { get; set; }
    public IEnumerable<tblDrug> DrugList { get; set; }
    public IEnumerable<Lipton.Areas.Empl.Models.tblEmp> EmpList { get; set; }
  }
} 
```

# postgresql-8.1 - 具有最小输出文件的 PostgreSQL 备份

> ID：11586832
> 
> 赞同：0
> 
> 时间：2012-07-20T20:56:07.973
> 
> 标签：postgresql-8.1

当作为文件系统备份进行备份时，我们有一个超过 732 GB 的 Postgresql 数据库。当我们执行 pg_dump 时，我们可以将其降至 585 GB。如果我将 pg_dump 与 PITR 方法结合起来，这会给我提供最小备份数据文件大小的最佳备份吗？我的计划是运行 pg_start_backup，然后是 pg_dump，然后是 pg_stop_backup。我知道运行文件系统备份的文档状态，但我想要一个较小的备份数据集。然后我会复制 WAL 文件，然后在晚上备份它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T23:16:57.053

要真正获得最小的文件，您必须尝试`pg_dump -Fc`使用​​多种压缩工具和设置之一来压缩转储文件。使用`gzip`或`xz`最大可能的压缩将是一个开始。这当然需要出色的 CPU 和大量的 CPU 时间。

# asp.net - 需要在每个方法中没有特定代码的情况下引发异常以进行日志记录的方法的参数值

> ID：11586835
> 
> 赞同：0
> 
> 时间：2012-07-20T20:56:16.777
> 
> 标签：asp.net, wcf, error-handling, asp.net-mvc-4, ierrorhandler

当随机方法内部发生异常而没有每个方法中的特定代码来写出值时，如何获取当前参数值？

我需要这个用于 ASP.NET MVC 和 WCF IErrorHandler 吗？

例如给出以下代码：

```
public void SomeRandomMethod(Request request, string someRandomString)
{
     throw new Exception();
} 
```

有没有办法让 WCF 或 MVC global.asax HttpApplication 的 Application_Error & Elmah 中的 IErrorHandler 获取 Request 对象和 someRandomString 的值，而无需专门捕获异常并为 N 个方法中的每一个编写自定义逻辑然后再次抛出？

也许这应该分为 2 个问题，一个针对 WCF，一个针对 ASP>NET MVC？请求层次结构似乎与我非常相似，所以我希望有一个统一的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:01:58.440

我会推荐使用[Elmah](http://code.google.com/p/elmah/)。它是 ASP.NET 应用程序的出色日志记录工具。它将包括随 HTTP 请求一起传递的参数。

# ruby - rake 中止，不知道如何构建任务 'jobs:work'

> ID：11586840
> 
> 赞同：1
> 
> 时间：2012-07-20T20:56:40.283
> 
> 标签：ruby, heroku, rake, sinatra, delayed-job

我正在尝试开始我的第一个 Ruby (v1.9.3p194) 项目。我在 Heroku 上托管，并使用 Sinatra 和 ActiveRecord。我正在尝试将delayed_job 集成到我的项目中，并且在获取rake 来识别jobs:work 时遇到了麻烦。（是的，我知道delayed_job 通常适用于rails，但据我所知，它可以在没有它的情况下工作。）

到目前为止，我已经使用我的 gemfile/bundler 安装了delayed_job (3.0.3) 和delayed_job_active_record (0.3.2) gems。因为我没有rails，所以我从delayed_job 自述文件中创建了自己的迁移文件，并进行了迁移。我认为这些都不应该引起我的问​​题。

从我看到的所有文档中，安装 gems 应该可以解决问题。我已经尝试卸载并重新安装它们，但无济于事。我不确定还有什么可以尝试的——也许我需要在我的 rakefile 中明确包含一些内容，但我还没有看到任何表明这一点的文档。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:58:42.967

也许我有一个实际的答案给你。

我做了一个简单的项目来`jobs:work`展示`rake -T`：

**宝石文件**

```
source :rubygems

gem 'delayed_job' 
```

**耙文件**

```
require 'rake'
require 'bundler'
require Bundler.load.gems.find{|i| i.name == 'delayed_job'}.gem_dir + "/lib/delayed/tasks" 
```

*跑：* `$ bundle install`

**结果：**

```
$ rake -T
rake jobs:clear  # Clear the delayed_job queue.
rake jobs:work   # Start a delayed_job worker. 
```

# ruby-on-rails - OAuth2 如何处理来自 Google 的响应代码？

> ID：11586841
> 
> 赞同：0
> 
> 时间：2012-07-20T20:56:43.073
> 
> 标签：ruby-on-rails, ruby, oauth-2.0

所以我用谷歌登录，它用代码参数访问了我的回调 url。

这是我启动客户的方式，我正在使用 oauth2 gem。

```
 def oauth_client(channel_name)
    file = YAML.load_file("#{Rails.root}/config/oauth_credentials.yml")
    client_id = file['oauth_credentials'][channel_name]['client_id']
    client_secret = file['oauth_credentials'][channel_name]['secret']
    site = file['oauth_credentials'][channel_name]['site']

    OAuth2::Client.new(client_id, client_secret, site: site, authorize_url: "/o/oauth2/auth", connection_opts: { params: { scope: "https://www.googleapis.com/auth/adsense https://www.googleapis.com/auth/analytics.readonly" } })
  end

  def oauth_url_for(channel_name)
    client = oauth_client(channel_name)
    client.auth_code.authorize_url(:redirect_uri => oauth_callback_url(channel: channel_name))
  end 
```

这是我的控制器

```
class Oauth2Controller < ApplicationController
  include ApplicationHelper

  def callback
    token = oauth_client(params[:channel]).auth_code.get_token(params[:code], :redirect_uri => oauth_callback_url(channel: params[:channel]))
    current_user.connections.create!(channel: params[:channel], token: token)
    render text: request.inspect
  end
end 
```

不幸的是，由于谷歌的回复说您请求的页面无效，我无法获取令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:23:36.957

看起来您并没有`token_url`在客户端的初始化或以后定义值。它是“o/oauth2/token”。默认情况下使用“/oauth/token”，因此这可能是导致“您请求的页面无效”错误的原因。

来源： [http ://rubydoc.info/gems/oauth2/0.8.0/OAuth2/Client#initialize-instance_method](http://rubydoc.info/gems/oauth2/0.8.0/OAuth2/Client#initialize-instance_method)

# php - 结合对象运算符 ( -> ) 和 "new"

> ID：11586851
> 
> 赞同：2
> 
> 时间：2012-07-20T20:58:10.313
> 
> 标签：php

给定一个具有成员函数 f() 的类 A，以下显然是合理的代码：

```
( new A() )->f(); 
```

失败并出现语法错误：“意外的 T_OBJECT_OPERATOR”。

对此有解释吗？

编辑：正如 Mageek 猜测的那样，我试图理解这种行为；我已经知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:02:10.173

这仅适用于 PHP 5.4。在此之前，您必须将实例分配给一个变量并使用它。

见：[http ://www.php.net/manual/en/migration54.new-features.php](http://www.php.net/manual/en/migration54.new-features.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:06:01.323

您要求的功能可从 PHP 5.4 获得。以下是 PHP 5.4 中的新特性列表：

[http://docs.php.net/manual/en/migration54.new-features.php](http://docs.php.net/manual/en/migration54.new-features.php)

> 添加了对实例化的类成员访问，例如 (new Foo)->bar()。

* * *

但是你可以试试这个技巧：

```
class TestClass {
    protected $_testvar;

    public function __construct($param) {
        $this->_testvar = $param;
    }
    public function testMethod() {
        return $this->_testvar;
    }
}

function TestClass($param) { return new TestClass($param); } 
```

现在你可以写：

```
$a = TestClass(2)->testMethod(); 
```

# linux - 如何修复这个解析 linux smaps 的 perl 脚本？

> ID：11586858
> 
> 赞同：1
> 
> 时间：2012-07-20T20:58:56.243
> 
> 标签：linux, perl, memory

我发现[了这个解析 linux smaps 的 perl 脚本](http://bmaurer.blogspot.com/2006/03/memory-usage-with-smaps.html)，但它似乎有点过时了：

```
#!/usr/bin/perl

# Copyright Ben Maurer
# you can distribute this under the MIT/X11 License

use Linux::Smaps;

my $pid=shift @ARGV;
unless ($pid) {
        print "./smem.pl <pid>\n";
        exit 1;
}
my $map=Linux::Smaps->new($pid);
my @VMAs = $map->vmas;

format STDOUT =
VMSIZE:  @######## kb
$map->size
RSS:     @######## kb total
$map->rss
         @######## kb shared
$map->shared_clean + $map->shared_dirty
         @######## kb private clean
$map->private_clean
         @######## kb private dirty
$map->private_dirty
.

write;

printPrivateMappings ();
printSharedMappings ();

sub sharedMappings () {
    return grep { ($_->shared_clean  + $_->shared_dirty) > 0 } @VMAs;
}

sub privateMappings () {
    return grep { ($_->private_clean  + $_->private_dirty) > 0 } @VMAs;
}

sub printPrivateMappings ()
{
    $TYPE = "PRIVATE MAPPINGS";
    $^ = 'SECTION_HEADER';
    $~ = 'SECTION_ITEM';
    $- = 0;
    $= = 100000000;
    foreach  $vma (sort {-($a->private_dirty <=> $b->private_dirty)}
                                   privateMappings ()) {
        $size  = $vma->size;
        $dirty = $vma->private_dirty;
        $clean = $vma->private_clean;
        $file  = $vma->file_name;
        write;
    }
}

sub printSharedMappings ()
{
    $TYPE = "SHARED MAPPINGS";
    $^ = 'SECTION_HEADER';
    $~ = 'SECTION_ITEM';
    $- = 0;
    $= = 100000000;

    foreach  $vma (sort {-(($a->shared_clean + $a->shared_dirty)
                           <=>
                           ($b->shared_clean + $b->shared_dirty))}
                   sharedMappings ()) {

        $size  = $vma->size;
        $dirty = $vma->shared_dirty;
        $clean = $vma->shared_clean;
        $file  = $vma->file_name;
        write;

    }
}

format SECTION_HEADER =
@<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
$TYPE
@>>>>>>>>>> @>>>>>>>>>>  @>>>>>>>>>   @<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
"vmsize" "rss clean" "rss dirty" "file"
.

format SECTION_ITEM =
@####### kb @####### kb @####### kb   @<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
$size $clean $dirty $file
. 
```

当我运行脚本时，我得到：

```
./smem.perl 121212
Use of comma-less variable list is deprecated at ./smem.perl line 86.
Use of comma-less variable list is deprecated at ./smem.perl line 86.
Use of comma-less variable list is deprecated at ./smem.perl line 86.
Use of comma-less variable list is deprecated at ./smem.perl line 91.
Use of comma-less variable list is deprecated at ./smem.perl line 91.
Use of comma-less variable list is deprecated at ./smem.perl line 91.
Can't locate object method "size" via package "Linux::Smaps" at ./smem.perl line 18. 
```

我正在运行 perl 5 和最新版本的 Linux::Smaps。我不是 perl 人，但我想知道这是否是一个简单的解决方法。另外，如果您知道类似的实用程序，我也很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:11:24.787

该模块的源代码有一条评论，揭示了正在发生的事情：

```
It creates accessor methods dynamically depending on what the kernel reveals. 
```

这告诉我的是，即使您可能已经正确实例化了对象，访问器方法`size`还没有被动态创建。这可能是因为内核没有“揭示”完全填充对象所需的一切。

格式弃用消息不是致命的，但在方法尚未创建时尝试从模块调用对象方法是。

至于弃用消息，请参阅[为什么我的 Perl 格式不起作用？](https://stackoverflow.com/q/1253134/716443)

# android - 为 Android 编译 Linphone

> ID：11586859
> 
> 赞同：3
> 
> 时间：2012-07-20T20:59:04.723
> 
> 标签：android, android-ndk, armv7, libvpx

我在编译 NDK 代码时遇到问题。我正在使用 Ubuntu 10.04 x64。基本上我已经执行了以下步骤：

1.  下载[NDK](http://dl.google.com/android/ndk/android-ndk-r7b-linux-x86.tar.bz2)。（我也试过最后一个但同样的问题）

2.  打开终端并制作`sudo -s`. 输入root密码。

3.  `apt-get install autoconf automake libtool pkg-config`

4.  通过命令下载源代码：

    `git clone git://git.linphone.org/linphone-android.git --recursive`

5.  转到我的项目根目录：

    `cd /home/silviu/linphone-android`

6.  在我的项目根目录中：

    `export PATH=/home/silviu/androidndk:$PATH`

7.  `./prepare_sources.sh`在我的项目根目录中运行。

我收到一个错误`prepare_sources.sh`：

> 配置选定的编解码器
> 
> 启用 vp8_encoder
> 
> 启用 vp8_decoder
> 
> 为目标“armv7-android-gcc”配置
> 
> 启用 armv7
> 
> 启用 armv6
> 
> 启用 armv5te
> 
> 启用 fast_unaligned
> 
> 启用 realtime_only
> 
> 工具链无法链接可执行文件
> 
> 配置失败。这可能反映了您的工具链配置错误、选择了不正确的选项或其他问题。如果您在上面没有看到任何有用的错误消息，下一步是查看配置错误日志文件 (config.err) 以确定 configure 在它死亡时尝试执行的操作。VP8 准备阶段失败。

有没有人面临这个问题？

# php - 野生动物园饼干问题

> ID：11586863
> 
> 赞同：1
> 
> 时间：2012-07-20T20:59:32.437
> 
> 标签：php, cookies, safari, cross-browser

我正在为此拉头发。它适用于 chrome 和 Firefox，但不适用于 safari。我究竟做错了什么？

我正在设置一个临时 cookie，然后检查它是否已设置。当我从 safari 中清除所有 cookie，然后运行此文件时，它认为 cookie 仍然存在。

这是代码

```
setcookie("testcookie", 'cookiesetting temporary');
if(isset($_COOKIE['testcookie'])){
    echo "cookie set":
}else{
    echo "no cookie set";
} 
```

仅在 safari 中，禁用 cookie 并删除所有 cookie 后，当我运行上面的代码时，它仍然会回显 cookie 集。

只是为了确保，我还在资源下查看了 safari 中的开发工具，但我没有看到那里的 cookie。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:18:29.637

我对 Safari 也有同样的问题（无法取消设置 cookie）。你应该解决设置路径

```
setcookie('testcookie', 'cookiesetting temporary', time()+3600, '/path/'); // set 
setcookie('testcookie', '', time()-3600, '/path/'); // delete 
```

希望这有效；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:05:18.920

简单地清除它们客户端并不是测试这个的正确方法..您是否尝试过实际“取消设置”cookie服务器端？

# html - 无法为 DIV 定义宽度

> ID：11586868
> 
> 赞同：0
> 
> 时间：2012-07-20T21:00:05.323
> 
> 标签：html

我正在制作一个游戏网站，并且我正在使用 DIV 标签作为类型菜单。在制作菜单时，我发现我无法为菜单设置 DIV 元素的大小。如果这很重要，我正在使用。HTML：

```
 <div class="center">
     <div class="menu" onclick="location.href='all.html';">All</div>
     <div class="menu" onclick="location.href='action.html';">Action</div>
     <div class="menu" onclick="location.href='arcade.html';">Arcade</div>
     <div class="menu" onclick="location.href='racing.html';">Racing</div>
     <div class="menu" onclick="location.href='rpg.html';">PRG</div>
     <div class="menu" onclick="location.href='skill.html';">Skill</div>
    </div>
    <div class="center">
     <div class="menu" onclick="location.href='strategy.html';">Strategy/Puzzle</div>
     <div class="menu" onclick="location.href='shooting.html';">Shooting</div>
     <div class="menu" onclick="location.href='sports.html';">Sports</div>
     <div class="menu" onclick="location.href='gamegarage.html';">GameGarage</div>
    </div> 
```

CSS：

```
 body
    {
    background-color:black;
    color:rgb(0,255,0);
    font-family:"Comic Sans MS";
    font-weight:bold;
    }
    .center
    {
    text-align:center;
    }
    .menu
    {
    font-size:1.35em;
    display:inline;
    width:250px;
    cursor:pointer;cursor:hand;
    border:5px solid #00FF00;
    }
    div
    {
    margin-bottom:15px;
    } 
```

有谁知道我做错了什么？感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:04:11.327

尝试将您的菜单标签的 CSS 更改为：

```
.center .menu
{
font-size:1.35em;
display:inline-block;
width:250px;
cursor:pointer;cursor:hand;
border:5px solid #00FF00;
} 
```

您也应该将 onclick 事件更改为`window.location.href = "link"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:04:27.880

利用

```
display:block 
```

或者

```
display:inline-block 
```

而不是在您的菜单类中内联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:21:10.360

要固定 div 的宽度，您需要设置

```
.menu {
    display: inline-block; 
```

现在您可以定义 div 的宽度、高度和垂直对齐。

```
 width: 250px; height: 1.4em; /* height: auto inherit 130px */
    vertical-align: middle;
} 
```

如果您有一个外框“.center”，它是装箱或内联装箱的，但会比 .menu 高得多，它将在外“.center”框的中间对齐。

# c++ - 在析构函数 C++ 中释放多个缓冲区

> ID：11586873
> 
> 赞同：-1
> 
> 时间：2012-07-20T21:00:18.923
> 
> 标签：c++

我有一个指针数组作为我班级的成员。我正在使用这些指针来分配一定数量的缓冲区。

在析构函数中，我想释放这个内存，但似乎我做错了什么。

```
 //In the Constructor
   for(int i = 0; i< NUM_OF_BUFFERS; i++)
   {
      mBuffer[i] = new Uint8[BUFFERSIZE];
      memset(mBuffer[i], 0, BUFFERSIZE);
      mBufferState[i] = NULL;
   }

   //In the destructor
   for (int i = 0; i < NUM_OF_BUFFERS; i++)
   {
      delete[] mBuffer[i];
   } 
```

由于某种原因，这似乎不起作用。如果我在析构函数中注释掉这些行，程序运行良好，如果我用这些行运行它，它似乎会冻结。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:28:37.307

尝试使用一些静态分析工具，如[cppcheck](http://sourceforge.net/cppcheck)（它是免费的、多平台的和开源的）并针对您的代码运行它。

如果您的代码运行到 Visual Studio（一个非常好的工具），您甚至可以尝试[PVS Studio 。](http://www.viva64.com/en/pvs-studio/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:12:41.160

您发布的代码似乎没有任何问题，因此问题一定出在您*未*发布的代码中。

我敢打赌，某些越界访问会破坏堆管理器所需的簿记信息。

# python - 使用 .pem 证书和 Python 的 SSL 连接

> ID：11586880
> 
> 赞同：3
> 
> 时间：2012-07-20T21:00:42.560
> 
> 标签：python, ssl, pem

我正在尝试使用身份验证通过 HTTPS 连接建立成功的通信。我在 Ubuntu 12.04 上使用带有 Django 1.4 的 Python 2.7。

我关注的 API 文档对身份验证有特定要求。包括`Authentication`您将在下面找到的标题并发送证书信息。

这是代码：

```
import httplib
import base64

HOST = 'some.host.com'
API_URL = '/some/api/path'

username = '1234'
password = '5678'

auth_value = base64.b64encode('WS{0}._.1:{1}'.format(username, password))
path = os.path.join(os.path.dirname(__file__), 'keys/')
pem_file = '{0}WS{1}._.1.pem'.format(path, username)

xml_string = '<some><xml></xml><stuff></stuff></some>'

headers = { 'User-Agent'     : 'Rico',
            'Content-type'   : 'text/xml',
            'Authorization'  : 'Basic {0}'.format(auth_value),
          }

conn = httplib.HTTPSConnection(HOST, cert_file = pem_file)
conn.putrequest("POST", API_URL, xml_string, headers)
response = conn.getresponse() 
```

我收到以下错误：

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/home/tokeniz/tokeniz/gateway_interface/views.py" in processPayment
  37\.         processCreditCard = ProcessCreditCard(token, postHandling)
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in __init__
  75\.             self.processGateway()
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in processGateway
  95\.         gateway = Gateway(self)
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in __init__
  37\.         self.postInfo()
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in postInfo
  245\.         response = conn.getresponse()
File "/usr/lib/python2.7/httplib.py" in getresponse
  1018\.             raise ResponseNotReady()

Exception Type: ResponseNotReady at /processPayment/
Exception Value: 
```

为什么我会收到此错误？

更新 1：我一直在使用`.pem`他们给我的文件（链接点网关），但已经读到证书文件应该包含证书和 RSA 私钥。那是对的吗？我尝试发送`.pem`包含两者的文件并收到以下错误：

```
 Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/home/tokeniz/tokeniz/gateway_interface/views.py" in processPayment
  37\.         processCreditCard = ProcessCreditCard(token, postHandling)
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in __init__
  75\.             self.processGateway()
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in processGateway
  95\.         gateway = Gateway(self)
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in __init__
  37\.         self.postInfo()
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in postInfo
  251\.         conn.request('POST', self.API_URL, self.xml_string, headers)
File "/usr/lib/python2.7/httplib.py" in request
  958\.         self._send_request(method, url, body, headers)
File "/usr/lib/python2.7/httplib.py" in _send_request
  992\.         self.endheaders(body)
File "/usr/lib/python2.7/httplib.py" in endheaders
  954\.         self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py" in _send_output
  814\.         self.send(msg)
File "/usr/lib/python2.7/httplib.py" in send
  776\.                 self.connect()
File "/usr/lib/python2.7/httplib.py" in connect
  1161\.             self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
File "/usr/lib/python2.7/ssl.py" in wrap_socket
  381\.                      ciphers=ciphers)
File "/usr/lib/python2.7/ssl.py" in __init__
  141\.                                         ciphers)

Exception Type: SSLError at /processPayment/
Exception Value: [Errno 336265225] _ssl.c:351: error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib 
```

我不知道这是前进还是后退。

更新 2：我在创建连接对象时尝试同时传递证书文件和密钥文件。

```
conn = httplib.HTTPSConnection(HOST, cert_file = pem_file, key_file = key_file) 
```

我收到以下错误：

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/home/tokeniz/tokeniz/gateway_interface/views.py" in processPayment
  37\.         processCreditCard = ProcessCreditCard(token, postHandling)
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in __init__
  75\.             self.processGateway()
File "/home/tokeniz/tokeniz/gateway_interface/credit_card_handling.py" in processGateway
  95\.         gateway = Gateway(self)
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in __init__
  37\.         self.postInfo()
File "/home/tokeniz/tokeniz/gateway_interface/first_data.py" in postInfo
  252\.         conn.request('POST', self.API_URL, self.xml_string, headers)
File "/usr/lib/python2.7/httplib.py" in request
  958\.         self._send_request(method, url, body, headers)
File "/usr/lib/python2.7/httplib.py" in _send_request
  992\.         self.endheaders(body)
File "/usr/lib/python2.7/httplib.py" in endheaders
  954\.         self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py" in _send_output
  814\.         self.send(msg)
File "/usr/lib/python2.7/httplib.py" in send
  776\.                 self.connect()
File "/usr/lib/python2.7/httplib.py" in connect
  1161\.             self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
File "/usr/lib/python2.7/ssl.py" in wrap_socket
  381\.                      ciphers=ciphers)
File "/usr/lib/python2.7/ssl.py" in __init__
  141\.                                         ciphers)

Exception Type: SSLError at /processPayment/
Exception Value: [Errno 336265225] _ssl.c:351: error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib 
```

如果我尝试合并证书文件和密钥文件并将其作为证书参数发送，我会收到相同的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:17:10.077

似乎 Python 中的一些“更高级别”库不具备处理这种身份验证连接的能力。经过多天的尝试，我终于能够想出一个降低到套接字级别的解决方案。

```
host = 'some.host.com'
service = '/some/api/path'
port = 443

# Build the authorization info
username = '1234'
password = '5678'
path = '/path/to/key/files/'
pem_file = '{0}WS{1}._.1.pem'.format(path, username)
key_file = '{0}WS{1}._.1.key'.format(path, username)
auth = base64.b64encode('WS{0}._.1:{1}'.format(username, password))

## Create the header
http_header = "POST {0} HTTP/1.0\nHost: {1}\nContent-Type: text/xml\nAuthorization: Basic {2}\nContent-Length: {3}\n\n"
req = http_header.format(service, host, auth, len(xml_string)) + xml_string

## Create the socket
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
conn = ssl.wrap_socket(sock, keyfile = key_file, certfile = pem_file)
conn.connect((host, port))
conn.send(req)

response = ''
while True:
    resp = conn.recv()
    response += resp

    if (resp == ''):
        break 
```

我希望有人觉得这很有用。这个特定的实现是通过 Python 与 Link Point Gateway 交互（First Data (Link Point) 不支持）。谈论整个项目的噩梦。哈哈

无论如何，对于在使用 Link Point 时遇到问题的任何人，请注意`.key`他们提供给您的文件不足以在 Python 中创建连接。

`openssl rsa -in orig_file.key -out new_file.key`

然后`new_file.key`改用。

# apache-pig - 在 pig 脚本中执行 shell 命令时出错

> ID：11586881
> 
> 赞同：4
> 
> 时间：2012-07-20T21:00:49.470
> 
> 标签：apache-pig

我有一个猪脚本，一开始我想从某个日期生成过去 7 天的日期字符串（后来用于检索那些日子的日志文件）。我试图用这一行来做到这一点：%declare CMD7`input= ; for i in {1..6}; do d=$(date -d "$DATE -i days" "+%Y-%m-%d"); input="\$input\$d,"; done; echo \$input`

我收到一个错误：“错误 2999：意外的内部错误。执行 shell 命令时出错：input= ; for i in {1..6}; do d=$(date -d "2012-07-10 -i days"" +%Y-%m-%d"); input="$input$d,"; done;. 退出代码为 127
的命令退出但是 shell 命令在 pig 之外运行得很好。我真的不确定这里出了什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T11:01:22.953

我有一个可行的解决方案，但不像你想要的那样精简，基本上我没有设法让 Pig 在声明中执行复杂的 shell 语句。

我首先编写了一个 shell 脚本（我们称之为 6-days-back-from.sh）：

```
#!/bin/bash
DATE=$1
for i in {1..6}; do d=$( date -d "$DATE -$i days" +%F ) ; echo -n "$d "; done 
```

然后是一个猪脚本如下（我们称之为days.pig）：

```
%declare my_date `./6-days-back-from.sh $DATE`
A = LOAD 'dual' USING PigStorage();
B = FOREACH A GENERATE '$my_date';
DUMP B 
```

注意*dual*是一个包含单行文本的文本文件的目录，用于显示我们的变量

我将脚本称为如下：

```
pig -x local -param DATE="2012-08-03" days.pig 
```

并得到以下输出：

```
({(2012-08-02),(2012-08-01),(2012-07-31),(2012-07-30),(2012-07-29),(2012-07-28)}) 
```

# iphone - 在已发布的 iPhone 应用程序中使用其他人的单词表

> ID：11586886
> 
> 赞同：-2
> 
> 时间：2012-07-20T21:01:03.340
> 
> 标签：iphone, ios, app-store

我正在编写一个需要一长串单词才能运行的程序。我的电脑上有一个，但我不记得它的来源，我只是用它来学习，所以我没有注意它是从哪里得到的。但是现在我正在认真考虑编写和发布这个`iOS`应用程序（最终），我觉得如果我赚钱甚至发布包含他们自己作品的东西，那么列出这个列表的人都会不高兴。你知道我可以用来发布可能付费的`iOS`应用程序的任何 .txt 格式的单词列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:43:13.417

搜索“开源单词列表”。一些例子包括[凯文的单词表](http://wordlist.sourceforge.net)和[英语开放单词表](http://dreamsteep.com/projects/the-english-open-word-list.html)

# regex - 正则表达式有一些问题

> ID：11586887
> 
> 赞同：0
> 
> 时间：2012-07-20T21:01:05.430
> 
> 标签：regex

我的一个脚本中有一行是这样的：

```
A=load '/bla/bla/bla/06/01/*/*/*' 
```

现在 06/01 这里指的是 6 月 1 日。我想在这一行中包括 7 月 1 日以及使用正则表达式。

我知道你可以使用正则表达式来做到这一点，并且看起来像：

```
(06/01)|(07/01) 
```

但是当我把它放到我的行中时：

```
A = load '/bla/bla/bla/(06/01)|(07/01)/*/*/*' 
```

我的脚本似乎失败了。这可能是因为解释器假设 06（从上面的第一行开始）被替换为`(06/01)|(07/01)`.

我如何开始使用正则表达式，以便我可以编写基本上意味着这个的代码：

```
A=load '/bla/bla/bla/June 01 and July 01/*/*/*' 
```

将不胜感激一些帮助！

编辑 1：这是用于猪脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:08:25.517

如果`(06/01)|(07/01)`是正则表达式的一部分，则交替必须与周围的表达式隔离。

改为使用`(?:06/01|07/01)`。

# iframe - 如何将 Google Analytics cookie 从 iframe 中包含的页面传递到不同域的页面

> ID：11586889
> 
> 赞同：1
> 
> 时间：2012-07-20T21:01:10.403
> 
> 标签：iframe, google-analytics, cross-domain, target

这是我的问题：我们在 iframe 中包含页面（iframe 页面的 url - www.iframepage.com）。该页面上有链接升级。当用户单击该链接时，他会被定向到位于不同域 (www.billingsite.com/cc.html) 上的计费页面。该页面应该在顶部打开（而不是在 iframe 中）。

如果我使用 _link，GA cookie 值将被传递到目标页面并且跨域跟踪将起作用，但目标页面将在 iframe 中打开。

升级

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._link](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._link)

我需要一个同时提供两者的解决方案：目标页面应该在顶部打开（而不是在 iframe 中），并且应该将 GA _utm 参数传递给目标 url，以便跨域跟踪可以工作。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:05:02.667

_gaq.push(['_link', url]); 函数以您发送的“url”为目标当前窗口。它忽略了目标。您需要做的是调用 Google 函数，然后更新父位置。

您在 iFrame 中的页面应该看起来像链接这个

`<!DOCTYPE html>
<html>
<head>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxx-xx']);
_gaq.push(['_setDomainName', 'example.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s);
})();
</script>
</head>
<body>

<a href="/link.html" **onclick="your_GA_track_link(this.href);**">Link</a>

<script>
**function your_GA_track_link(url){
_gaq.push(['_link', url]);
self.parent.location.href = url;
return false;
}**
</script>

</body>
</html>` 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:18:15.763

我想我找到了解决方案。这是应该放在正文中的代码：

```
<script type="text/javascript">
    function openWindow(link) {
      _gaq.push(function() {
        var tracker = _gaq._getAsyncTracker();  //add name param if needed
        window.open(tracker._getLinkerUrl(link.href),"_parent");
      });
      return false;
    }
</script>
<a href="www.bilingsite.com/cc.html" onclick="return openWindow(this);" target="_parent">UPGRADE</a></br> 
```

# spring - Spring Batch 并行作业扩展

> ID：11586891
> 
> 赞同：2
> 
> 时间：2012-07-20T21:01:23.880
> 
> 标签：spring, scalability, spring-batch, spring-integration

我目前正在研究 Spring Batch POC，并且对大多数实际 Spring Batch 功能都有很好的处理。我目前有一个程序，它使用 Spring Integration 接收 HttpRequest 并使用消息通道最终将作业执行发送到队列中的作业启动器。我们真正想做的是在作业启动器之前实现某种“调度程序/负载平衡器”（不太确定如何称呼它），它将查看当前运行的工作节点和输入文件的大小并生成决定应该允许多少工作节点。我们可能还希望能够在作业运行时更改作业节点的数量，以允许更多作业运行。

我们的想法是，我们将运行一个可以随时接受许多作业请求的服务器，以及一个将作业分区到的大型机器集群。我们希望能够水平扩展，这样只要服务器不忙，它就可以充分利用硬件，并且能够确保小型作业不会经常被大型作业阻塞。

从我的研究看来，我们似乎必须实现另一个框架来做到这一点（GridGain 和 Hadoop 是否允许这样做？），但我想我会问看看人们推荐什么做这样的事情，如果有办法在不实施另一个大型框架的情况下做到这一点。

抱歉，如果有任何不清楚或令人困惑的地方，我只是一个上个月开始学习 Spring 和 Spring Batch 的低级实习生，我还远未完全理解所有内容，尤其是这些扩展的东西。只要问，我会尽力把事情弄清楚。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:35:07.513

看看 spring-batch-admin 伞形项目下的“spring-batch-integration”项目[https://github.com/SpringSource/spring-batch-admin](https://github.com/SpringSource/spring-batch-admin)

它有许多使用 spring-integration 将工作分配到其他节点的示例。特别是查看块和分区包。只需使用 jms 通道适配器替换 spring 集成通道。通过 JMS 分配工作分区，您可以根据需要横向扩展工作节点的数量。

在 spring 集成论坛中有很多关于这个主题的主题；搜索“分区处理程序”。

希望有帮助。

# c++ - array：将一维数组的索引转换为多维数组的向量索引

> ID：11586893
> 
> 赞同：4
> 
> 时间：2012-07-20T21:01:39.813
> 
> 标签：c++, arrays, multidimensional-array, array-algorithms

这将是一个很长的问题，请在阅读之前深呼吸。

我想了解将一维数组的索引转换为多维数组的向量索引的最快算法是什么。

让我们通过一个例子来理解我为什么需要它：

> 我有一个二维数组： Array[i1][i2]
> 
> i1 从 i1_b=0 运行到 i1_e=2
> 
> i2 从 i2_b=0 运行到 i2_e=1

所以这个数组被逐行输出到文件中：

> 数组[0][0]
> 
> 数组[0][1]
> 
> 数组[0][2]
> 
> 数组[1][0]
> 
> 数组[1][1]
> 
> 数组[1][2]

现在我逐行读取文件，索引 k 是最后读取的行号。

> 我读了第一行是 Array[0][0] 和 k=0
> 
> 我读了第二行，即 Array[0][1] 和 k=1
> 
> ...

可以注意到 k 将从 k_b=0 运行到 k_e=5 并且

> k=0 将对应于 i1=0, i2=0
> 
> k=1 将对应于 i1=0, i2=1
> 
> ...

问题：所以我的问题是如何以最快的方式将 k 转换为 i1 和 i2？（我在读取文件时不需要它，但稍后在我的程序中）

在此示例中，解决方案之一是

> i1=k/(i1_e - i1_b + 1);
> 
> i2=k%(i1_e - i1_b + 1);

问题 1：就周期和计算机时间而言，这是最快的解决方案吗？

好的。问题 2：我们如何将这个算法推广到多维数组？

> 数组[i1][i2][i3][i4]
> 
> i1=k/(i1_e - i1_b + 1);
> 
> i2=k%(i1_e - i1_b + 1);
> 
> i3=i2/(i1_e - i1_b + 1);
> 
> i4=i2%(i1_e - i1_b + 1);

问题3：这是最快的方法吗？

问题 4：相关问题是模除法、整数除法、整数相加和整数相乘的延迟是多少？如果这些数字取决于架构，请告诉我。

提前致谢！

PS 有人可能更容易将此问题视为将秒转换为天-小时-分钟-秒的最快算法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:17:38.167

> 问题 2：我们如何将这个算法推广到多维数组？

如果你有一个数组`arr[dim_1][dim_2]...[dim_n]`，你就有了等式

```
k = i_1*(dim_2*...*dim_n) + i_2*(dim_3*...*dim_n) + ... + i_{n-1}*dim_n + i_n
  = i_1*(dim_2*...*dim_n) + r_2 
```

所以`i_1 = k / (dim_2*..*dim_n)`和`r_2 = k % (dim_2*...*dim_n)`, 然后

```
i_2 = r_2 / (dim_3*...*dim_n) and r_3 = r_2 % (dim_3*...*dim_n) 
```

ETC，

```
i_j = r_j / (dim_{j+1}*...*dim_n) and r_{j+1} = r_j % (dim_{j+1}*...*dim_n) 
```

直到`i_n = r_n`被发现。

> 问题3：这是最快的方法吗？

如果在编译时已知维度，则可以用乘法、移位和加法/减法替换除法。在许多架构上，这比除法指令要快。在其他方面，不是。

但是，如果您在该数组中进行**大量**索引而不是其他任何事情，那么值得考虑一下。

> 问题 4：相关问题是模除法、整数除法、整数相加和整数相乘的延迟是多少？如果这些数字取决于架构，请告诉我。

这些数字取决于架构和处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T01:44:03.127

请在下面找到我将如何在 C++1x 中实现它，我希望这很有用。干杯

```
#include <iostream>
#include <array>
#include <algorithm>

/* stream arrays element by element to ostream */
template<size_t N, typename T>
std::ostream& operator<<(std::ostream& os, std::array<T, N> const&  obj)
{
  os << "{ ";
  for(auto a:obj)std::cout << a << " ";
  std::cout << "}";

  return os;
}

//end of recursion
template<size_t DIM, size_t I>
constexpr typename std::enable_if< (I==DIM), void  >::type
get_indexes(unsigned int index, std::array<unsigned int, DIM> const& depths, std::array<unsigned int,DIM>& indexes)
{}

//begin of the recursion
template<size_t DIM, size_t I=0>
constexpr typename std::enable_if< (I<DIM), void  >::type
get_indexes(unsigned int index, std::array<unsigned int, DIM> const& depths, std::array<unsigned int,DIM>& indexes)
{
    unsigned int  factor    =  1;
    for(unsigned int i=I+1; i<DIM; i++) factor *=depths[i];
    indexes[I]  =  index/factor;
    unsigned int next_index =  index%factor;
    get_indexes<DIM, I+1>(next_index, depths, indexes );
}

//some testing with 3 dimensions 
int main()
{
  constexpr unsigned ndimensions=3;
  std::array<unsigned int, ndimensions> depths{2, 3, 4};
  unsigned int nboxes = 1;

  for(unsigned int i =0; i< ndimensions; i++)nboxes *=depths[i];

  std::array<unsigned int, ndimensions> indexes;

  for(size_t i=0; i<nboxes; i++)
  {

    get_indexes<ndimensions>(i,depths ,  indexes);
    std::cout << i << " -> " <<indexes<< std::endl; 
  }

return 0;
} 
```

# interspire-shopping-cart - 我的 smtp 设置不适用于 interspire 电子邮件营销人员

> ID：11586896
> 
> 赞同：0
> 
> 时间：2012-07-20T21:01:52.220
> 
> 标签：interspire-shopping-cart

我在justhost上设置了IEM。它安装得很好。现在，当我发送电子邮件时，它会说：`cannot connect to server error 110`

我也有使用谷歌应用程序电子邮件服务器的穹顶。使用那里的谷歌应用程序向导在主机上配置它。

IEM的设置如下：

```
smtp host: ssl://smtp.gmail.com
smtp user: my email id
smtp pass: my pass
port : 465 
```

但它给出了错误： `A test email has not been successfully sent to the email address rohan@skylite.com: Unable to connect to mail server: Connection timed out(110)`

它更改的 cname 是：

```
HostRecord       Points to               TTL    
mail             ghs.google.com          14400  
www              mydomain.com            14400 
```

MX rec 是 TTL 是 14400，你只是主机 dosnt 让它更少

```
1   @   aspmx.l.google.com  14400
5   @   alt1.aspmx.l.google.com 14400   
5   @   alt2.aspmx.l.google.com 14400
10  @   aspmx2.googlemail.com   14400
10  @   aspmx3.googlemail.com   14400 
```

那么各位，有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:08:02.157

您的服务器的出站端口 465 可能已关闭，从而导致错误。您应该使用 portcheck.php 脚本来测试您的端口。请参阅 interspire 文档： [https ://www.interspire.com/support/kb/questions/1208/How+do+I+use+Amazon+SES+with+Interspire+Email+Marketer%3F](https://www.interspire.com/support/kb/questions/1208/How+do+I+use+Amazon+SES+with+Interspire+Email+Marketer%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T13:01:18.563

忘记将 Gmail 与 Justhost.com 一起使用，它们会阻止 465 587 个 SMTP 端口。这真的很烦人。您必须使用 PHP sendmail 发送电子邮件，最终有 60% 的时间被视为垃圾邮件！

# python - 返回最后插入的 ID sqlalchemy sqlite

> ID：11586897
> 
> 赞同：3
> 
> 时间：2012-07-20T21:01:55.523
> 
> 标签：python, sqlite, sqlalchemy

我正在尝试从带有 sqlite 的 sqlalchemy 插入中获取最后插入的行 ID。看起来这应该很容易，但我还没有设法弄清楚，到目前为止在我的搜索中没有找到任何东西。我是 python 新手，我知道有一些类似的帖子，所以我希望这不是重复。下面是一些简单的示例脚本：

```
from sqlalchemy import *    
engine = create_engine('sqlite:///myTest.db',echo=False)
metadata = MetaData()

dbTable1 = Table('dbTable1', metadata,Column('ThisNum', Integer),Column('ThisString', String))
metadata.create_all(engine)
dbConn = engine.connect()

insertList={}
insertList['ThisNum']=1
insertList['ThisString']='test'
insertStatement = dbTable1.insert().values(insertList)
lastInsertID = dbConn.execute(insertStatement).inserted_primary_key 
```

返回的值为空。我得到相同的结果使用

```
lastInsertID = dbConn.execute(insertStatement).last_inserted_ids() 
```

我可以在插入后使用单独的语句获取最后一个 rowid：

```
lastInsertID = dbConn.execute('SELECT last_insert_rowid();') 
```

但这不能保证在两次执行之间没有访问数据库，因此返回的 ID 可能不正确。最后，我尝试在一次执行中执行插入和选择语句，例如：

```
lastInsertID = dbConn.execute('INSERT INTO "dbTable1" ("ThisNum", "ThisString") VALUES (1, "test"); SELECT last_insert_rowid();') 
```

但这给出了错误：sqlite3.Warning：您一次只能执行一条语句。

任何帮助，将不胜感激。谢谢。

# iphone - 核心数据错误 - 为部分名称键路径“sectionIdentifier”返回 nil 值

> ID：11586900
> 
> 赞同：4
> 
> 时间：2012-07-20T21:02:08.410
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我的应用程序的核心数据使用了一个`NSString`命名的 sectionIdentifier，我已经通过 NSLog 确认它设置了它。然而，当数据保存时，`NSLog`显示它设置为 nil，尽管其他项目也设置为 nil，但它显示错误：

```
returned nil value for section name key path 'sectionIdentifier'. Object will be placed in unnamed section 
```

我不确定为什么会这样。它与其他属性设置在同一组代码中，所以我不明白为什么它“忘记”了这个属性的设置。

编辑：所以这是我的错误。

首先是我设置它的地方：

```
entry1:
sectionIdentifier = 2001001; 
```

然后是错误：

```
CoreData: error: (NSFetchedResultsController) object 
sectionIdentifier = nil;
returned nil value for section name key path 'sectionIdentifier'. Object will be placed in unnamed section 
```

然后我`NSLog`再次检查它：

```
entry2:
sectionIdentifier = 2012007; 
```

我不知道这里可能出了什么问题，以及为什么它无法识别我的部分标识符。

# concatenation - Fitnesse Slim：如何连接符号

> ID：11586904
> 
> 赞同：3
> 
> 时间：2012-07-20T21:02:19.673
> 
> 标签：concatenation, symbols, fitnesse, fitnesse-slim

如何将符号与两侧的文本连接起来？例如：

*   字首：`"GAR_"`
*   多变的：`$todayDate`
*   后缀：`"_1"`

`GAR_$todayDate_1`

这将评估为： `GAR_07202012_1`

在 Fitnesse 中运行测试时，似乎串联工作（`GAR_$todayDate->[07202012]_1`）。但是，我将此值作为参数传递给 Visual Studio，最终得到以下文本：`GAR_$todayDate_1`.

当我删除后缀或在`$todayDate`and之间放置一个空格`"_1"`时，一切都按预期工作。

任何帮助，将不胜感激。

我尝试过的事情：

*   `GAR_!-$todayDate-!_1`
*   `GAR_$todayDate!-_1-!`
*   `GAR_$todayDate${SUFFIX}`- 静态变量定义

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:09:32.063

我目前遇到同样的问题。我发现的唯一方法是：

1.  用方法创建一个`StringSupport`类`String concatenate(String s1, String s2)`
2.  `import`FitNesse 测试中该类的包
3.  在您的 FitNesse 测试中使用表格放入`StringSupport`可用的库`Library`
4.  在您的 中`Script`，您现在可以执行以下操作：`|$result=|concatenate;|$s1|$s2|`

为了适合您的确切用例，您只需使用 3 个字符串而不是一个字符串执行相同的 concatenate()。

# redirect - DOS 命令重定向到文件截断输出

> ID：11586907
> 
> 赞同：7
> 
> 时间：2012-07-20T21:02:46.633
> 
> 标签：redirect, buffer, dos

我有一个命令行工具，它通常会输出大约 200 多行的输出。我正在寻找出现在此输出末尾的文本。当我将输出重定向到文件时：

```
C:\> somecommand > results.txt 2>&1 
```

...只有前 100 行左右的输出显示在此文件中。同样，如果我将输出通过管道传输到“findstr”之类的内容中，则接收程序在大约第 100 行之后无法找到或操作任何文本。

shell 的屏幕缓冲区大小设置似乎对可以捕获的行数没有任何影响。

有什么想法吗？对于它的价值，有问题的命令是来自 InstallShield 2012 的 iscmdbld.exe。

我尝试过的其他命令（例如“dir”）不会出现此问题。

只有在 cmd 窗口中运行命令时，才能查看程序的完整输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-16T15:26:52.510

不幸的是，我没有安装 InstallShield，所以我很难运行一些测试，但是我遇到了一些程序，这些程序在处理输入和输出时并没有像他们应该做的那样。在正常情况下，“>”应该没有限制，我在 Windows 服务器上经常使用它，该服务器在后台运行 ghostscript 和其他旧的 dos 程序，将输出通过管道传输到文件的唯一方法是使用 > ，有时我有很多 Mb 的文件，所以 200 行确实与当前的 exe 有关系。

我只能建议尝试一些解决方法，例如您可以尝试 tee32，它是一个小型免费软件，可以将所有 dos 屏幕输出捕获到文件中。所以你会在屏幕上看到输出，你也会在文件中看到它。

您可以阅读有关它的更多信息：不幸的是，页面上提到的链接不起作用，但我能够找到它的工作副本[**：**](http://reimagery.com/fsfd/bin/friesen/32-bit/tee32.zip)[**这里**](http://freesoft.cyberside.net.ee/FreeSoft/screen.htm)[](http://reimagery.com/fsfd/bin/friesen/32-bit/tee32.zip)

 **我真的希望这能帮助你克服这个问题。

埃米尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-16T20:49:24.403

您的问题的另一种解决方案可能是构建一个 C# 程序来捕获输出并将其发送到文件。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace CaptureCMDOutput
{
    class Program
    {
        static string _Filename = @"sc.exe";
        static string _Arguments = @"query";
        static string _outputfile = @"c:\debug.txt";

        static void Main(string[] args)
        {
            var processStartInfo = new ProcessStartInfo
            {
                FileName = _Filename, // Exe file to run
                Arguments = _Arguments, // Arguments to exe file
                RedirectStandardOutput = true,
                UseShellExecute = false
            };

            var process = Process.Start(processStartInfo);
            process.OutputDataReceived += process_OutputDataReceived;
            process.BeginOutputReadLine();
            process.WaitForExit();
            process.CancelOutputRead();

            Console.ReadKey();
        }

        static void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
        {
            Console.WriteLine(e.Data);

            using (StreamWriter writer = new StreamWriter(_outputfile, true))
            {
                writer.WriteLine(e.Data);
            }
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T19:28:42.047

如果它正在写入另一个流，请尝试以下操作：

```
somecommand > results.txt 2>&1 3>&1 4>&1 5>&1 6>&1 7>&1 8>&1 9>&1 
```

另一种可能性是该工具对部分输出使用直接屏幕写入 - 在 MSDOS 时代，有屏幕阅读 TSR 程序可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T00:13:01.253

另一种方法是附加（'>>'）而不是重新开始（'>'）。但是，在不了解您的问题的情况下，我什至无法想到如何生成您所看到的内容。**

# php - 在while循环中访问第二个表

> ID：11586908
> 
> 赞同：1
> 
> 时间：2012-07-20T21:02:57.210
> 
> 标签：php, mysql, database

原谅我这周我刚刚学了 php，所以我不确定我是否做得很好。

它开始访问数据库和标题的类别表；然后它获取该信息并创建标题、定价和目录链接。

然后在它完成第一部分之后的那个while循环中，它应该运行第二个while循环来访问产品表以列出所有具有与类别表中的cat_id匹配的category_id的产品。

当它打印出来时，它应该是

> 标头
> 定价 PDF
> 项目尺寸 图片 图片
> 项目尺寸 图片 图片
> 项目尺寸 图片 图片
> 等
> 
> 标头
> 定价 PDF
> 项目尺寸图像图像
> 等....

到目前为止，第一个 while 循环有效，但第二个循环无效。是否有正确的方法来传递变量？我可以在第一个表的 while 循环中不访问第二个表吗？我不知道......我已经尝试了一些东西，但没有什么效果很好

```
<?php
//connect to server
$con = mysql_connect('localhost','username','password');
//test connection
if (!$con)
{
    die ('Could not connect: ' . mysql_error());
}

//access primary DB 
mysql_select_db("main_db", $con);

//place table into variable
$categories = mysql_query("SELECT * FROM categories");

//begin table build
while($row = mysql_fetch_array($categories))
{
    //set shading variable
    $table_row = 0;

    //set current set   
    $cur_set = $row['cat_id'];
    //create document link and header
    echo "<a name='" . $row['cat_name'] . "'><h3>" . $row['cat_title'] . "</h3></a>";
    //create table and table formatting cell
    echo "<table id='productTable'><tr id='tableHead'>";
    //table width formattting here
    echo "<td style='width:165px;'></td>";
    echo "<td style='width:235px;'></td>";
    echo "<td style='width:155px;'>";
    //link and icons to category catalog
    echo "<a href='catalog/" . $row['cat_pdf'] . ".pdf'><img src='data/pdflogo.png' alt='pdf button' /></a>";
    //link and icons to category pricing sheet
    echo "<a href='catalog/" . $row['cat_pricing'] . ".pdf'><img src='data/pricinglogo.png' alt='pricing button' /></a>";
    //finish formatting
    echo "</td></tr>";

    //place table into variable
    $products = mysql_query("SELECT * FROM products WHERE category_id='" . $row['cat_id'] . "'");

    //begin table build
    while($table = mysql_fetch_array($products));
    {
        //create up row
        echo "<tr id='tr" . $table_row . "'>";
        //create first cell
        echo "<td>" . $table['prod_name'] . "</td>";
        //create second cell
        echo "<td>" . $table['prod_dim'] . "</td>";
        //create third cell
        echo "<td>";
        //create third cell, first image
        echo "<a href='catalog/" . $table['prod_img1'] . ".jpg'>" . "<img src='data/jpglogo.png' alt='image button' />" . "</a>";
        //create third cell, second image
        echo "<a href='catalog/" . $row2['prod_img2'] . ".jpg'>" . "<img src='data/jpglogo.png' alt='image button' />" . "</a>";
        //finish formatting
        echo "</td></tr>";
        //cycle row
        if ($table_row == 0)
            {
                    $table_row = 1;
            }
        else
            {
                $table_row = 0;
            }

    //end table
    echo "</table>";
    }
}

//close connection
mysql_close($con);
?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:10:06.737

在两个表上执行 INNER JOIN 会更加简化

```
SELECT
    A.cat_id,A.cat_name,A.cat_title,A.cat_pdf,A.cat_pricing,
    B.prod_name,B.prod_img1,B.prod_img2
FROM categories A INNER JOIN products B ON A.cat_id = B.category_id; 
```

您可以迭代 A.cat_id

这是我提出的建议（大括号可能已关闭，但 cat_id 上的迭代应该是这样的）。请更改开始和停止标签的样式。

```
<?php
//connect to server
$con = mysql_connect('localhost','username','password');
//test connection
if (!$con)
{
    die ('Could not connect: ' . mysql_error());
}

//access primary DB 
mysql_select_db("main_db", $con);

//place table into variable
$categories = mysql_query("SELECT A.cat_id,A.cat_name,A.cat_title,A.cat_pdf,A.cat_pricing,B.prod_name,B.prod_img1,B.prod_img2 FROM categories A INNER JOIN products B ON A.cat_id = B.category_id");

$current_catid = -1;

//begin table build
while($row = mysql_fetch_array($categories))
{
        if ( $current_catid != $row['cat_id'] )
        {
            if ( $current_catid > -1 ) { echo "</table>"; }
            $current_catid != $row['cat_id']

    //set shading variable
    $table_row = 0;

    //set current set   
    $cur_set = $row['cat_id'];
    //create document link and header
    echo "<a name='" . $row['cat_name'] . "'><h3>" . $row['cat_title'] . "</h3></a>";
    //create table and table formatting cell
    echo "<table id='productTable'><tr id='tableHead'>";
    //table width formattting here
    echo "<td style='width:165px;'></td>";
    echo "<td style='width:235px;'></td>";
    echo "<td style='width:155px;'>";
    //link and icons to category catalog
    echo "<a href='catalog/" . $row['cat_pdf'] . ".pdf'><img src='data/pdflogo.png' alt='pdf button' /></a>";
    //link and icons to category pricing sheet
    echo "<a href='catalog/" . $row['cat_pricing'] . ".pdf'><img src='data/pricinglogo.png' alt='pricing button' /></a>";
    //finish formatting
    echo "</td></tr>";
        }

//create up row
    echo "<tr id='tr" . $table_row . "'>";
    //create first cell
    echo "<td>" . $table['prod_name'] . "</td>";
    //create second cell
    echo "<td>" . $table['prod_dim'] . "</td>";
    //create third cell
    echo "<td>";
    //create third cell, first image
    echo "<a href='catalog/" . $table['prod_img1'] . ".jpg'>" . "<img src='data/jpglogo.png' alt='image button' />" . "</a>";
    //create third cell, second image
    echo "<a href='catalog/" . $row2['prod_img2'] . ".jpg'>" . "<img src='data/jpglogo.png' alt='image button' />" . "</a>";

    //finish formatting
    echo "</td></tr>";
        //cycle row
    if ($table_row == 0)
    {
        $table_row = 1;
    }
    else
    {
        $table_row = 0;
    }

    //end table (Fix this, might produce extra table tag)
    echo "</table>";
}

//close connection
mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:10:42.750

您正在加载相关数据，所以简短的回答是否定的，因为如果您使用连接选择它们可能会产生开销。

此外，尝试通过仅选择您想要的而不是所有内容来限制由 * 产生的开销。

对于新的 mysql(i) 调用，还要遵循 Truth 的建议。一旦你掌握了 sql 和 php，你可以转移到其他类型的数据库调用（使用面向对象的代码 - 或 activerecord），但请先尝试了解 mysql 调用是如何完成的。

# sql-server - 在 SQL 视图中显示数据，需要保存到 SQL 表 Code First Entity Framework 4.1

> ID：11586909
> 
> 赞同：1
> 
> 时间：2012-07-20T21:02:59.747
> 
> 标签：sql-server, entity-framework-4.1

我正在从 SQL 视图向我的 MVC 3 网站提供数据。我正在使用视图，因为我必须显示来自不同数据库的数据。如何进行用户对视图所做的更改并将其保存到核心表中？

# datepicker - 简单的 ui 日期选择器不起作用

> ID：11586911
> 
> 赞同：0
> 
> 时间：2012-07-20T21:03:32.850
> 
> 标签：datepicker, uidatepicker, jquery-ui-datepicker

我对这个日期选择器有问题[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

```
<script>
    $(function() {
        $( "#datepicker1" ).datepicker({ dateFormat: 'yy-mm-dd' });
    });
</script>
<script>
    $(function() {
        $( "#datepicker2" ).datepicker({ dateFormat: 'yy-mm-dd' });
    });
</script>

<div id="checkinWrapper" class="input-wrapper">
    <input type="text" id="datepicker1" style="width:118px;" class="checkin search-option hasDatepicker" name="checkin" placeholder="Поаѓаме на">
    <span></span>
</div>
<div id="checkoutWrapper" class="input-wrapper">
    <input type="text" id="datepicker2" style="width:118px; margin-left:2px;" class="checkout search-option hasDatepicker" name="checkout" placeholder="Се враќаме">
    <span></span>
</div> 
```

当我在空白页上测试它时它可以正常工作，但是当我在我当前的设计中实现它时它不起作用（不显示）。我不知道是什么原因造成的。以下是我包含的脚本：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script> 
```

也许问题是因为我在当前设计中实现了其他 jQuery 脚本？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:16:22.037

如果从两个输入标签中删除 hasDatepicker 类，它将起作用。

datepicker 插件自己添加了这个类，因为该类已经存在，所以没有创建 datepicker...

有关工作（非样式）示例，请参见[http://jsfiddle.net/UYGXh/](http://jsfiddle.net/UYGXh/)

# php - 加载 PHP 数据时显示和隐藏加载图像

> ID：11586921
> 
> 赞同：0
> 
> 时间：2012-07-20T21:04:29.907
> 
> 标签：php, jquery

我正在使用 jQuery 和 PHP 来保存用户在数据库中输入的内容。当 PHP 正在做它的事情时，我想显示一个正在加载的 GIF 图像，只是为了表明它正在保存他们的数据。我意识到它运行代码可能确实需要很长时间，所以我希望能够显示图像至少 1 秒，如果它需要的时间少于那

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:01:06.387

例如，我使用以下脚本作为数据库中的实时搜索表单。
用户键入一些字母，脚本搜索数据库中是否存在同名的学生：

## 文件 index.php

```
<head>
//call to jquery.js
<script type='text/javascript'>
$(document).ready( function() {
 $('#q').keyup( function(){
  $field = $(this);
  $('#results').html('');
  $('#ajax-loader_e').remove();

  if( $field.val().length > 1 )
  {
    var str='q='+$(this).val();
    $.ajax({
      type : 'GET',
      url : 'ajax_search.php' ,
      data : str ,
      beforeSend : function() {
       $field.after('<img src="../img/ajax-loader.gif" alt="loader" id="ajax-loader_e" />');
      },
      success : function(data){
        $('#ajax-loader_e').remove();
        $('#results').html(data);
      }
    });//end ajax
  }//end if     
 });//end keyup
});//end ready
</script>
</head>
<body>
<form class="quick_search">
  <input type="text" value="Name" id="q" name="q" onfocus="if(!this._haschanged){this.value=''};this._haschanged=true;">
</form>
<div id="results_e"></div> 
```

## 文件 ajax_search.php

```
if(isset($_GET['q'])){
  $nom='%'.safe($_GET['q']).'%';
  $req=$connexion->prepare("SELECT * FROM students WHERE name LIKE :name LIMIT 0,10 ");
  $req->execute(array('name'=>$name));
  echo "<ul>";
  while($row=$req->fetch(PDO::FETCH_ASSOC)){
    if(empty($row)){
      echo "<h4 class='alert_error'>No one with that name!</h4>";
    }
    else{
      echo "<li><strong><a href='?id=".$row['id']."'>".clean($row['nom']).' '.clean($row['prenom'])."</a></strong></li>";
    }
  }
  echo "</ul>";
} 
```

您可以使用该脚本通过 ajax 保存表单并在等待时显示加载程序 gif。重要的部分是：

*   从一开始就删除加载器
*   在 beforeSend 中，显示加载器
*   成功移除加载器

# sql - SELECT DISTINCT with LEFT JOIN, ORDERed BY in t-SQL

> ID：11586923
> 
> 赞同：13
> 
> 时间：2012-07-20T21:04:42.140
> 
> 标签：sql, sql-server, tsql, sql-order-by, distinct

我在 SQL Server 2008 中有下表：

```
CREATE TABLE tbl (ID INT, dtIn DATETIME2, dtOut DATETIME2, Type INT)

INSERT tbl VALUES
(1, '05:00', '6:00', 1),
(2, '05:00', '7:00', 1),
(3, '05:01', '8:00', 1),
(4, '05:00', '8:00', 1),
(5, '05:00', '6:00', 2),
(6, '05:00', '7:00', 2) 
```

选择相同类型的所有记录的 ID，具有相同的 dtIn 日期，按 stOut 升序排列：

```
SELECT DISTINCT tbl.id FROM tbl   
  LEFT JOIN tbl AS t1
  ON tbl.type = t1.type AND
     tbl.dtIn = t1.dtIn
  ORDER BY tbl.dtOut ASC 
```

但这给了我一个错误：

> 如果指定了 SELECT DISTINCT，则 ORDER BY 项目必须出现在选择列表中

我尝试将 ORDER BY 放在不同的地方，但这一切似乎都不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T21:22:56.520

按未包含在 DISTINCT 项目列表中的列进行排序是没有意义的。

让我们使用一个简单的场景。首先，一个表`FruitPerson`：

```
Fruit  PersonName
-----  ------
Apple  Joe
Apple  Mary
Peach  Karen
Peach  Lance 
```

这是与您尝试执行的操作等效的查询：

```
SELECT DISTINCT Fruit
FROM FruitPerson
ORDER BY PersonName; 
```

这个查询的结果`ORDER BY`是这样的：

```
Fruit
-----
Apple
Peach 
```

但现在的问题是：引擎应该如何对“Apple”和“Peach”这两个值进行排序`PersonName`？*哪些*人名？每个水果有两个人！确切地说，它应该使用哪个名称来决定是否`Apple`先`Peach`出现？

相反，将您的查询重写为聚合：

```
SELECT Fruit, MinName = Min(PersonName) -- which name to order on
FROM FruitPerson
GROUP BY Fruit -- here's how you get your distinctness
ORDER BY MinName; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T21:25:27.133

当您将其缩小到单个 id 时，您创建了每个 id 可能有多个`dtOut`关联的可能性。发生这种情况时，Sql Server 将如何知道使用哪个命令？

你可以试试：

```
SELECT t1.id
FROM tbl t1
LEFT JOIN  tbl t2 on t1.type = t2.type AND t1.dtIn = t2.dtIn
GROUP BY t1.id, t2.dtOut
ORDER BY t2.dtOut 
```

但是，正如我上面提到的，如果它与右侧表格上的多个记录匹配，则可能会多次列出相同的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:11:00.803

当您使用“DISTINCT”关键字时，您只能使用 ORDER BY 子句中属于您的选择语句的那些列。所以你只能通过 tbl.id 订购

如果 id 是唯一的，则 DISTINCT 关键字没有任何意义，并且会导致性能下降，您可以将其删除。如果它们不是并且您决定在保持 DISTINCT 的同时选择 tbl.dtOut，则 tbl.id 和 tbl.dtOut 对可以为您提供具有相同 tbl.id 的多个条目，这可能是不希望的。

查看[这篇文章](http://weblogs.sqlteam.com/jeffs/archive/2007/12/13/select-distinct-order-by-error.aspx) 以了解可能的解决方法和解释为什么禁止此类查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:13:08.063

您必须在选择列表中包含列 tbl.dtOut，以便它知道要订购什么。

```
SELECT DISTINCT tbl.id, tbl.dtOut FROM tbl   
  LEFT JOIN tbl AS t1
  ON tbl.type = t1.type AND
     tbl.dtIn = t1.dtIn
  ORDER BY tbl.dtOut ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T23:32:15.287

您遇到此错误是因为您没有将 (tbl.dtOut) 放入选择列表中。

```
SELECT DISTINCT tbl.dtOut FROM tbl    
  LEFT JOIN tbl AS t1  
  ON tbl.type = t1.type AND  
     tbl.dtIn = t1.dtIn  
  ORDER BY tbl.dtOut ASC 
```

会给你一个结果集（有 3 行），如果你也想要 id 字段那么

```
SELECT DISTINCT tbl.dtOut, tbl.ID FROM tbl      
  LEFT JOIN tbl AS t1  
  ON tbl.type = t1.type AND  
     tbl.dtIn = t1.dtIn  
  ORDER BY tbl.dtOut ASC 
```

（有 6 行，因为它给出了 id/date 字段的不同组合）

# xcode - XCode-原型单元格，单元格标识符

> ID：11586928
> 
> 赞同：0
> 
> 时间：2012-07-20T21:04:53.663
> 
> 标签：xcode

我在拆分视图主视图控制器中创建了三个原型单元，每个单元都包含一个 NSArray。我还给每个单元格一个唯一的标识符。我需要单元格，当用户按下它以转到其自己的单个视图控制器时。请告诉我如何编码/格式化 cellForRowAtIndexPath 部分。我读过很多帖子说——现在你只需要更改行部分的单元格——让它听起来很简单——但是没有给出代码示例，我只是看不到它。

请帮助 - 一直试图解决这个问题好几个小时了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:14:34.690

如果您使用情节提要，则可以在情节提要中进行，因为您使用的是原型单元。例如，您可以对视图控制器进行新的推送，例如为您的三个单元格中的每一个单元格。我相信`cellForRowAtIndexPath`动态细胞更多。

# rest - 是否可以甚至建议使用 OAuth 1.0 来保护 RESTful Web API 而无需将用户重定向到单独的提供者？

> ID：11586932
> 
> 赞同：0
> 
> 时间：2012-07-20T21:05:21.683
> 
> 标签：rest, asp.net-web-api, oauth, dotnetopenauth

我正在使用 ASP.NET Web API 构建 RESTful Web 服务，并且正在考虑使用 OAuth 1.0 作为身份验证机制来保护服务。我们的 API 也将维护凭证存储，因此将成为 OAuth 提供者。使用我们 API 的客户端应用程序将由必须使用用户名和密码进行身份验证的最终用户使用，因此我假设客户端应用程序被认为是 OAuth 消费者。客户端应用程序将进行 API 调用以检索未经授权的请求令牌，然后将用户的凭据与令牌一起发送以获取访问令牌。

最终，我可以看到其他第 3 方应用程序希望通过我的 API 访问我们的应用程序，他们将使用 OAuth 进行重定向，而我们的应用程序是凭据提供程序。

这是使用 OAuth 的可行方式吗？DotNetOpenAuth 之类的东西会支持这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:34:54.490

我们决定实施 OAuth 2.0，它支持各种工作流，其中之一包括资源所有者凭据流，允许客户端将用户凭据传递给授权服务器以换取访问令牌。这将服务于我们的目的。

# ruby - 适应新的 Ruby on Rails 项目的最佳方式

> ID：11586935
> 
> 赞同：1
> 
> 时间：2012-07-20T21:05:30.967
> 
> 标签：ruby, ruby-on-rails-3

您会向刚接触项目的人推荐哪些工具或步骤，并且他们正试图适应没有测试的 Ruby on Rails 代码库？

我正在考虑类似：[https](https://codeclimate.com/) ://codeclimate.com/来帮助对代码进行一些分析，但我想要其他建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:12:21.960

我使用命令行工具`wc`来查找代码热点的位置。在我的 Mac 上运行`wc ./app/models/**/*.rb | sort -nr`可以让我很好地了解代码所在的位置。您可以用控制器或任何其他目录替换模型以在那里找到详细信息。

一旦我对事物的位置有了一个很好的了解，就更容易找到更大、更复杂的代码区域。对项目的简要描述和 wc 的运行应该可以让您很好地了解哪些数据模型和控制器是最复杂的，并让您了解去哪里进行进一步的调查。

如果该项目经过良好测试，我肯定会花时间阅读规范标题。我会花时间阅读我感兴趣的规范的实现细节。

Ruby Rogues 播客有一个关于代码阅读的非常好的一集，您可能会觉得很有帮助：[http ://rubyrogues.com/031-rr-code-reading/](http://rubyrogues.com/031-rr-code-reading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:57:30.660

我希望这是一个经过意志测试的项目......如果是这样，我总是先通读测试，因为它们让您了解每段代码的期望是什么。这是迄今为止对我有用的最佳方法。

# arrays - NumPy 以给定的概率更改数组的元素

> ID：11586936
> 
> 赞同：2
> 
> 时间：2012-07-20T21:05:32.667
> 
> 标签：arrays, random, numpy

我有一个随机数数组。我只想根据 0.07 的概率更改一些元素。目前我正在使用 for 循环来迭代每个元素。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T21:09:16.270

如果调用有问题的数组`a`，您可以通过以下方式选择其值的 0.07 的平均比例

```
a[numpy.random.rand(*a.shape) < 0.07] 
```

我不知道*您*想如何更改这些值。要将它们乘以 2，只需执行

```
a[numpy.random.rand(*a.shape) < 0.07] *= 2.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T08:40:41.193

斯文的回答很优雅。但是，选择要更改的元素要快得多

```
n = numpy.random.binomial(len(a), 0.07)
a[numpy.random.randint(0, len(a), size=n)] *= 2.0 
```

第一个表达式确定要采样的元素数量（n 是 0 和 len(a) 之间的整数，但平均为 0.07），第二个表达式准确生成要检索的索引数。（但是请注意，您可能会多次获得相同的索引。）

区别于

```
a[numpy.random.rand(len(a)) < p] 
```

当 p 接近 1 时变小，但对于小的 p，它可能是 10 或更多的因子。

# scala - 如何通过反射获取Scala专用的字段参数的原始数据类型？

> ID：11586944
> 
> 赞同：2
> 
> 时间：2012-07-20T21:06:13.893
> 
> 标签：scala, reflection, specialized-annotation

我有一个类，该类具有专门的字段并且使用原始数据类型。例如 Tuple2[Int, String]：

```
scala> class TupleReflection(val tuple: Tuple2[Int, String])
defined class TupleReflection

scala> val refl = new TupleReflection((5, "hello"))
refl: TupleReflection = TupleReflection@1a597ec8 
```

我现在想使用反射来找出我的“refl”实例中 Tuple2 的类型参数。（我用'head'作弊来获得这个领域，因为我知道它是唯一的。）

```
scala> val field = refl.getClass.getDeclaredFields.head
field: java.lang.reflect.Field = private final scala.Tuple2 TupleReflection.tuple 
```

现在我有了该字段，我可以查询泛型类型。

```
scala> field.getGenericType
res41: java.lang.reflect.Type = scala.Tuple2<java.lang.Object, java.lang.String> 
```

现在的问题是第一个类型是Object。有没有办法仅通过反射知道该参数的真实类型（Int）？

# 更新：

我在我自己的 API 中的自动序列化上下文中使用它。给定一个标有@Serializable 的类，我可以对其进行序列化。为此，我必须使用反射递归地构建类的字段和类型的树，以便进行深度序列化。

如果我直接使用 @Specialized 类，它可以工作，因为类型是显式的并且在调用站点的编译时已知。如果层次结构中的字段是@specialized，我无法通过反射来判断。查询类中声明的字段或方法不会产生正确的值。该类型存在于运行时，但仅存在于字段中保存的实例上，而不存在于字段本身的声明中。因此，如果实例为空并且不能执行“getClass”，我无法仅通过反射知道正确的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:21:51.137

问题是您使用的 Java 反射 API 无法解决 JVM 的“类型擦除”问题，因为无法使用它找出实际的泛型类型。

幸运的是，即将到来的 Scala 2.10 版本实现了新的反射 API，解决了类型擦除问题。但是由于 2.10 还没有发布，API 还没有标准化，也没有记录。最好的办法是使用调试器之类的工具深入研究它，并在此处提出更具体的问题。

在 Scala 2.10-M5 中，您可以访问 API，如下所示：

```
scala> reflect.runtime.universe.typeOf[(Int, String)]
res0: reflect.runtime.universe.Type = (Int, String)

scala> reflect.runtime.universe.typeOf[(Int, String)].typeArguments
res1: List[reflect.runtime.universe.Type] = List(Int, String)

scala> reflect.runtime.universe.typeOf[(Int, String)].typeArguments.head
res2: reflect.runtime.universe.Type = Int 
```

## 更新#1

以下函数显示了如何获取实例类型：

```
scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> def typeOf[T : TypeTag](x : T) = reflect.runtime.universe.typeOf[T]
typeOf: [T](x: T)(implicit evidence$1: reflect.runtime.universe.TypeTag[T])reflect.runtime.universe.Type

scala> typeOf(Seq((1,"sldf"),(20,"sldkfjew")))
res0: reflect.runtime.universe.Type = Seq[(Int, String)] 
```

事实上，这一切都基于`[T : TypeTag]`告诉编译器神奇地创建对传递的类型的反射的隐式实例的部分。

## 更新#2

```
scala> class TupleReflection(val tuple: Tuple2[Int, String])
defined class TupleReflection

scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> typeOf[TupleReflection].member(newTermName("tuple")).typeSignature
res6: reflect.runtime.universe.Type = => (scala.Int, String)

scala> typeOf[TupleReflection].members
res7: Iterable[reflect.runtime.universe.Symbol] = List(constructor TupleReflection, value tuple, value tuple, method $asInstanceOf, method $isInstanceOf, method synchronized, method ##, method !=, method ==, method ne, method eq, constructor Object, method notifyAll, method notify, method clone, method getClass, method hashCode, method toString, method equals, method wait, method wait, method wait, method finalize, method asInstanceOf, method isInstanceOf, method !=, method ==)

scala> typeOf[TupleReflection].members.view.filter(_.isValue).filter(!_.isMethod).toList
res16: List[reflect.runtime.universe.Symbol] = List(value tuple) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:09:31.830

我找到了一种方法，但它并不漂亮。

```
class TupleReflection(@(specializedFor @field)(Array(classOf[Int], classOf[String]) val tuple: Tuple2[Int, String]) 
```

我使用运行时保留策略创建了 specialFor 注释。它接收一个类 [_] 的数组。这样我就可以在运行时通过反射找到 Tuple2 字段的类型。

这是不安全的，因为我无法测试 Array 是否包含与 Tuple2 相同的类型。

在我的 API 中，我必须首先检查注释是否存在以及是否强制 genericTypes 成为那些。

# ivy - Ivy/Maven Resolve：不要拉传递“提供”的罐子

> ID：11586945
> 
> 赞同：3
> 
> 时间：2012-07-20T21:06:30.497
> 
> 标签：ivy, artifactory

我在我的项目中使用 Ivy，但我们使用 Artifactory 作为我们的 jar 存储库。我实际上使用`<ivy:makepom>`Ant 任务来创建 Maven `pom.xml`，因此我可以通过 Maven deploy:deploy 工作流将 jars 和 war 部署回我的 Maven 存储库。

我构建了一个名为的大 jar `common-all.jar`，它的编译需要大约 30 个 jar。我指定了大约 10 个 jar，Ivy 拉下依赖项。作为编译过程的一部分，我指定了 log4j jar 和一些 JBoss jar。当然，这些罐子将由我们的环境提供。

有了这个Jar，我也打了一堆。我将 指定`common-all.jar`为我的依赖项的一部分，并且`common-all.jar`需要的 30 个罐子也被拉下。一切都很好。

问题是当我建立战争时。我不希望将 JBoss jar 或 log4j jar 作为战争的一部分。这些将由环境提供。我已将它们标记为pom.xml 文件中*提供的内容。*当我建立`common-all.jar`.

现在，问题是我如何在编译战争代码时指定我想要这些，但我不想将它们包含在我的战争本身中。

这是我的`ivy.xml`文件示例。

如何指定`common-all.jar`编译需要某些特定的 jar，但是当我在战争中构建它时，我不想要所有这些 jar

```
<ivy-module version="1.0">
    <info
        organisation="com.travelclick"
        module="TC-AppUtil"
        revision="4.1"
        status="release"/>

    <configurations>
        <conf name="default" visibility="public"
            description="The single built artifact. Nothing else"/>

        <conf name="compile" visibility="public"
            description="The master module and transitive dependencies"/>

        <conf name="provided" visibility="public"
            description="Needed for compile. Will be provided outside or war"/>

        <conf name="runtime" visibility="public"
            description="Not required for compile, but for runtime"
            extends="compile"/>

        <conf name="default" visibility="public"
            description="The default configuration"
            extends="runtime"/>

        <conf name="test" visibility="private"
            description="Required for testing" extends="runtime"/>

    </configurations>
    <dependencies>

        <!-- Normal Compile Dependencies -->

        <dependency org="ximpleware" name="vtd-xml"
            rev="2.5" conf="compile->default"/>

        <dependency org="com.travelclick" name="common-all"
            rev="4.1" conf="compile->compile,runtime"/>

        <!-- Testing -->

        <dependency org="junit"             name="junit"
            rev="4.10"                      conf="test->default"/>
    </dependencies>
</ivy-module> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:53:41.200

您还没有演示如何声明 common-all 依赖项，因此我将组成以下示例：

```
<dependency org="mygroup" name="common-all" rev="1.0" conf="compile->default;provided"/> 
```

神奇的是配置映射：

*   本地“编译”配置映射到公共模块及其默认（编译）范围依赖项，并且
*   本地“提供”配置映射到公共模块及其提供的范围依赖项。

在您的构建文件中，配置使用如下：

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:resolve/>
        <ivy:cachepath pathid="compile.path"  conf="compile"/>
        <ivy:cachepath pathid="provided.path" conf="provided"/>
    </target>

    <target name="compile" depends="resolve">
        <javac ...
            <classpath>
                <path refid="compile.path"/>
                <path refid="provide.path"/>
            </classpath>
        </javac>

    </target>

    <target name="build" depends="compile">
        <ivy:retrieve pattern="build/lib/[artifact].[ext]" conf="runtime"/>

        <war ...
            <lib dir="build/lib"/>
        </war>
    </target>

    <target name="clean">
        <delete dir="build"/>
        <ivy:cleancache/>
    </target>

</project> 
```

# jquery - 更改表单后如何重新初始化 jQuery 验证？

> ID：11586947
> 
> 赞同：1
> 
> 时间：2012-07-20T21:06:52.303
> 
> 标签：jquery, jquery-plugins, validation

我有一个很高兴使用 jQuery 验证的表单。我现在需要修改表单以包含一个也需要验证的新表单元素。不幸的是，jQuery 在（新的）验证过程中死了，大概是因为我以它不理解的方式更改了表单。因此我怀疑我需要在新版本的表单上重新初始化验证器。

问题：我该怎么做？ [在将表单插入页面后重新初始化 jquery-mobile](https://stackoverflow.com/questions/9733935/reinitialize-jquery-mobile-after-inserting-a-form-into-the-page)提供了一个很有希望的建议，即执行类似的操作`$('#theform).trigger('create')`，但这对我不起作用。有什么建议吗？

# xcode - 如何从 UITextField 设置 UISlider 的值

> ID：11586948
> 
> 赞同：1
> 
> 时间：2012-07-20T21:06:59.267
> 
> 标签：xcode, uitextfield, uislider

我正在使用 Xcode 4.3，我希望能够使用 UITextField 编辑 UISlider 的值。我怎样才能做到这一点？我有一个在文本字段中显示其值的滑块，但我也可以从文本字段中设置滑块的值吗？

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:53:06.083

假设“textField”是您的文本字段的名称，我会在您的 viewDidLoad 方法中添加一个目标：

```
[textField addTarget:self
              action:@selector(textFieldDidChange)
    forControlEvents:UIControlEventEditingChanged]; 
```

然后像你说的那样处理变化：

```
- (void)textFieldDidChange {

    Slider.value = [[textfield.text] intValue];

} 
```

希望这可以帮助。

# github - 通过 SHA 从 github 下载 tarball 时如何预测文件名？

> ID：11586953
> 
> 赞同：1
> 
> 时间：2012-07-20T21:07:40.280
> 
> 标签：github

通过 SHA 从 github 下载项目 tarball 时，如何预测下载文件名？

### 例如，当我下载时：

[https://github.com/nette/nette/tarball/e9719f05fc9bbe1742c68ab7ddee640c99a3ec64](https://github.com/nette/nette/tarball/e9719f05fc9bbe1742c68ab7ddee640c99a3ec64)

### 文件名（由 Content-Disposition 设置）是：

nette-nette-v2.0.0-279-ge9719f0.tar.gz

### 格式似乎是：

{user}-{repo}-{最直接的 predecssing tag}-{SHA 和 tag 之间的提交次数}-g{SHA}.tar.gz

我想预测文件名，而不必知道“最直接的 predecssing 标记”或“SHA 和标记之间的提交次数”，也不需要重命名下载的文件。

## 编辑：

我真的在寻找一种无需尝试下载文件即可预测文件名的方法。（感谢@Keith 指出我最初没有指定这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:12:42.070

链接重定向到实际文件名：

```
$ curl https://github.com/nette/nette/tarball/e9719f05fc9bbe1742c68ab7ddee640c99a3ec64 ; echo ""
<html><body>You are being <a href="https://nodeload.github.com/nette/nette/tarball/e9719f05fc9bbe1742c68ab7ddee640c99a3ec64">redirected</a>.</body></html>
$ 
```

您可以捕获`curl`命令的输出并提取目标 URL。`wget`然后，您可以对该 URL执行普通操作。

# powershell - 从函数返回

> ID：11586955
> 
> 赞同：2
> 
> 时间：2012-07-20T21:08:21.627
> 
> 标签：powershell, return

如果找到匹配项，我希望从以下 powershell 函数返回（有关更完整的代码示例，请参阅我的[codereview 问题](https://codereview.stackexchange.com/q/13816/9313)）：

```
Function Find-Property($fileName, $PropertyName)
{
    $shellfolder = Create-ShellFolder $fileName
    0..287 | Foreach-Object {
        if($PropertyName -eq $shellfolder.GetDetailsOf($null, $_)){ return $_ }
    }
} 
```

这段代码似乎只是从 if 条件的范围内返回，这不是很有用。

我怎样才能做到这一点？我需要在某处标记休息时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:54:31.330

如果您希望使用该`return`语句退出函数，您可以使用`foreach`关键字而不是`ForEach-Object`cmdlet。这是一个演示：

```
function Foo {
    foreach ($number in (0..287)) {
        $number # Just show our current iteration.
        if ($number -eq 50) {
            return $number
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T21:42:33.267

不需要标签。

```
function Find-Property($Filename, $PropertyName)
{
    $shellfolder = Create-ShellFolder $fileName
    0..287 | Where {$PropertyName -eq $shellfolder.GetDetailsOf($null, $_)} | 
             Foreach {$_;break}
} 
```

另一种选择是稍微调整您的原始功能：

```
function Find-Property($fileName, $PropertyName)
{
    $shellfolder = Create-ShellFolder $fileName
    0..287 | Foreach-Object {
        if($PropertyName -eq $shellfolder.GetDetailsOf($null, $_)) {$_; break}
    }
} 
```

# javascript - 是 jQuery 1.3.2 导致这不起作用，还是其他原因？

> ID：11586959
> 
> 赞同：0
> 
> 时间：2012-07-20T21:08:53.037
> 
> 标签：javascript, jquery, jquery-1.3.2

我知道这应该可以工作，它在 1.7.2 中可以正常工作

```
//click anywhere to close dropdown
$("html").live("click", function () {
    closeDropdown();
});

//on click of ellipsis, open dropdown
$("span.PivotEllipsis").click(function (e) {
    e.stopPropagation();
    openDropdown();
}); 
```

它是经典的点击外span.PivotEllipsis 隐藏。但是，问题是第二个功能不起作用。第一个工作正常，当您在外部单击时，它会隐藏。但是，当您单击 span.Pivot Ellipsis 时，它不会弹出，而是我认为，很难说，它运行 openDropdown() ，然后在 closeDropdown() 之后立即运行...。

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:12:14.123

您认为可能是正确的 - 您需要在下拉菜单未打开时禁用第一个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:13:44.767

根据[jQuery 文档](http://api.jquery.com/event.stopPropagation/)：“不可能停止实时事件的传播。” 你真的不需要使用`.live()`，因为 html 元素存在于 document.ready 并且不是动态加载的

# php - 教义 2 - 从 $em->find() 获取 SQL

> ID：11586961
> 
> 赞同：5
> 
> 时间：2012-07-20T21:08:56.233
> 
> 标签：php, doctrine, doctrine-orm

有人可以告诉我，如何从`$em->find()`方法中获取纯 SQL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:40:39.737

你的问题不清楚。

*   如果您的意思是“是否可以使用原始 SQL 查找对象”，请查看[Doctrine 2 文档中的 Native SQL 部分](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)；
*   如果您的意思是“是否可以查看 Doctrine 查询生成的 SQL”，请配置 SQL 记录器，如[本答案](https://stackoverflow.com/a/4585421/759866)中所述。

# javascript - 重新加载不同的html时的html页面

> ID：11586966
> 
> 赞同：0
> 
> 时间：2012-07-20T21:09:07.810
> 
> 标签：javascript, jquery, html

第一次加载 html 并将文本显示为是，第二次从缓存重新加载或加载时它应该显示一些其他文本 NO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:22:56.363

当您使用 jQuery 时，使用[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)似乎最简单：

```
// assigns the value returned by the cookie to the variable,
// if no cookie, or no value, is returned, the string is assigned instead.
var cookieValue = $.cookie('firstVisit') || 'Yes';

// if there's no cookie, then a cookie is set.
if (!$.cookie('firstVisit')) {
    $.cookie('firstVisit', 'No', {
        expires: 7 // expires in 7 days, adjust to taste.
    });
}

$('#firstVisit').text(cookieValue);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uNp2E/1/)。

上面的代码更新得更整洁，重复更少：

```
// if the cookie is not set, the cookieVal variable is falsey
var cookieVal = $.cookie('firstVisit'),
    // creating a reference to the relevant div
    div = $('#firstVisit');

// if the cookieVal evaluates to false the cookie is set,
// and the text of the div is 'Yes'
if (!cookieVal) {
    $.cookie('firstVisit', 'No');
    div.text('Yes');
}
// otherwise...
else {
    // text of the div is equal to the value returned from the cookie
    div.text(cookieVal);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uNp2E/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:20:34.497

您可以使用 cookie 来识别回访者：

```
<html>
<body>

<script language="javascript">

// sets a cookie with a certain name, value and optional expiration in days
function setCookie(c_name, value, exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

// retrieves the value of a cookie of a certain name (or returns undefined)
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) return unescape(y);
    }
}

// if the cookie was set, then the user has been here already
if (getCookie("visited") == "true") {
    document.write("NO");
} else {
    // otherwise, set the cookie and assume the user has not been here before
    setCookie("visited", "true");
    document.write("YES");  
}

</script>

</body>
</html> 
```

见：[http ://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

# php - 我可以在单元测试中使用哪些有效和无效的 UTF-8 字符串？

> ID：11586969
> 
> 赞同：1
> 
> 时间：2012-07-20T21:09:16.653
> 
> 标签：php, character-encoding

我用 PHP 编写了两个函数，`str_to_utf8()`并且`seems_utf8()`（它们由我从其他代码中借用的部分组成）。现在我正在为他们编写单元测试，我想确保我有正确的单元测试。我目前从 Facebook 拿走了我的那些：

```
public function test_str_to_utf8()
{
    // Make sure ASCII characters are ignored
    $this->assertEquals( "this\x01 is a \x7f test string", str_to_utf8( "this\x01 is a \x7f test string" ) );

    // Make sure UTF8 characters are ignored
    $this->assertEquals( "\xc3\x9c \xc3\xbc \xe6\x9d\xb1!", str_to_utf8( "\xc3\x9c \xc3\xbc \xe6\x9d\xb1!" ) );

    // Test long strings
    #str_to_utf8( str_repeat( 'x', 1024 * 1024 ) );
    $this->assertEquals( TRUE, TRUE );

    // Test some invalid UTF8 to see if it is properly fixed
    $input = "\xc3 this has \xe6\x9d some invalid utf8 \xe6";
    $expect = "\xEF\xBF\xBD this has \xEF\xBF\xBD\xEF\xBF\xBD some invalid utf8 \xEF\xBF\xBD";
    $this->assertEquals( $expect, str_to_utf8( $input ) );
} 
```

这些是有效的测试用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:31:04.867

我发现[这个资源](http://www.cl.cam.ac.uk/~mgk25/ucs/examples/quickbrown.txt)在测试 UTF-8 时很有用。

如果您使用任何非 latin-1 文本，您需要确保您的 PHP 文件保存为 UTF-8，或者预先转义它们

# html - Rails 应用程序中的当前页面类

> ID：11586970
> 
> 赞同：1
> 
> 时间：2012-07-20T21:09:29.327
> 
> 标签：html, ruby-on-rails, html-lists, current-page

我的 Rails 应用程序中有简单的导航栏（、、、`Home`等`News`）`Contact`。我需要定义当前页面来添加`:class => 'active'`. 我发现定义当前页面的解决方案很少。我什至创建了自己的版本。但所有这些都归结为一个：

`<li class=<%= current_page?(tratata) ? "active" : nil %>...</li>`

我怎样才能将这个解决方案应用于所有人`<li> - elements`，但不是每次都写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:22:44.537

这不是最好的方法，但会给你一些关于拉动当前控制器和动作的想法。

您可以查看[https://github.com/weppos/tabs_on_rails](https://github.com/weppos/tabs_on_rails)以获取有关如何使其代码更简洁的更多想法。但这需要更多的设置。您将创建一个 tabs_tag 函数来检查当前页面并执行不同的样式。就个人而言，我并不太喜欢这个宝石，而是更喜欢以自己的方式设计我的页面。

```
<%= tabs_tag do |tab| %>
  <%= tab.home      'Homepage', root_path %>
  <%= tab.dashboard 'Dashboard', dashboard_path %>
  <%= tab.account   'Account', account_path %>
<% end %>

if "#{controller.controller_name.to_s}.#{controller.action_name.to_s}" == "pages.index"
  <li class='active'>
else
  <li>
end 
```

或使用辅助方法

```
def current_page(page,action)
  if controller.controller_name.to_s == page && controller.action_name.to_s == action
    'active'
  else
    'not_active'
 end
end 
```

在你看来

```
<li class="<%= current_page('pages','index') %>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:13:43.850

一种方法是检查用户所在的页面是否与他们正在访问的控制器的名称匹配（您也可以使用控制器名称/操作名称组合以获得额外的特异性）。

**application_helper**

```
def nav_helper(arg)
  controller_name == arg ? "current" : ""
end 
```

**看法**

```
<li class="<%= nav_helper('about') %>">
  <a href="#">A link</a>
</li> 
```

### 编辑：

糟糕，我在你编辑你的问题之前写了这个。要将其添加到所有“li”标签，请使用另一个助手，该助手使用[`content_tag`](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)并将`nav_helper`方法放置在其中。

# objective-c - CATransform3D 动画的 CAKeyframeAnimation 上的平滑动画

> ID：11586973
> 
> 赞同：4
> 
> 时间：2012-07-20T21:09:45.050
> 
> 标签：objective-c, ios, core-animation, catransform3d

我在视图之间创建了自己的过渡动画。我为两个属性（位置和变换）设置动画，以在视图之间提供类似立方体的过渡。框架使用`CABasicAnimation`，而变换使用“2-stage” `CAKeyframeAnimation`。一切都很好，除了一个我似乎无法弄清楚的小细节。在我的过渡中，我`CATransform3DScale`在中间关键帧上应用 a 来创建放大/缩小效果。效果很好，只是动画看起来有点生涩。它以线性方式对关键帧之间的动画进行动画处理，我想对其进行平滑处理。现在`CAKeyframeAnimation`有一种方法可以使用`calculationMode`，但它似乎不适用于转换。我已经尝试将其设置为但`kCAAnimationCubic`没有`kCAAnimationCubicPaced`任何效果。

这是动画一个视图的变换的代码（类似的代码块动画另一个视图）：

```
 CAKeyframeAnimation *aTransform = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
    CATransform3D transform1 = RotateOnX(toView, M_PI_4);
    transform1 = CATransform3DScale(transform1, RotationalZoom, RotationalZoom, RotationalZoom);
    [aTransform setValues:Array([NSValue valueWithCATransform3D:RotateOnX(toView, M_PI_2)],
                                [NSValue valueWithCATransform3D:transform1],
                                [NSValue valueWithCATransform3D:RotateOnX(toView, 0)])];
    [toView.layer addAnimation:aTransform forKey:@"transform"]; 
```

注意：`RotateOnX(UIView *, CGFloat)`是一个块，它为在 X 上按所需弧度旋转的视图返回变换。

如您所见，我只在中间关键帧上设置了缩放变换。此外，视图的旋转非常平滑，只有缩放在改变方向时才会出现“混蛋”。

有人对如何平滑缩放/缩放有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:21:35.617

试试`timingFunctions`物业。由于您有 3 个关键帧，因此您需要 2 个计时函数：一个用于从关键帧 0 到关键帧 1 的动画，另一个用于从关键帧 1 到关键帧 2 的动画。

```
aTransform.timingFunctions = [NSArray arrayWithObjects:
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInOut],
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInOut],
    nil]; 
```

# sql - 如何使用条件使用来自单独表的数据更新一个表

> ID：11586974
> 
> 赞同：2
> 
> 时间：2012-07-20T21:09:47.767
> 
> 标签：sql, ms-access, sql-update

这个查询可能非常荒谬，或者我只是有一点小错误。我不太确定。但基本上我正在尝试使用 Access 中另一个表中的数据更新一个表。给我问题的列是那些设置为“是/否”类型的列，而我试图更新它的数据设置为“文本”类型，其值为字符串“是”或“否”。

因此，如果可能的话，我对这个查询的想法是将“文本”字段大致转换为 1 或 0，具体取决于它们的 Yes 或 No 值。无论如何，足够的背景，这里是查询：

```
UPDATE Group_Pricing SET 
Contract_Type = (SELECT Contract_Type FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID), 
Hybrid_Retail =  
(SELECT CASE (SELECT RetailSpread FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID)
CASE "Yes"
RetailSpread = 1
CASE "No"
RetailSpread = 0), 
Hybrid_Mail =  
(SELECT CASE (SELECT MailSpread FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID)
CASE "Yes"
MailSpread = 1
CASE "No"
MailSpread = 0),
Hybrid_Specialty =  
(SELECT CASE (SELECT SpecialtySpread FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID)
CASE "Yes"
SpecialtySpread = 1
CASE "No"
SpecialtySpread = 0),
Hybrid_Rebates =  
(SELECT CASE (SELECT Rebates FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID)
CASE "Yes"
Rebates = 1
CASE "No"
Rebates = 0)
WHERE EXISTS (SELECT 1 FROM ContractTypesFinal WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID); 
```

任何帮助深表感谢。如果这不可能，就告诉我我是个白痴。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:11:24.163

MS Access 中不能有 CASE，可以有 IIf。

```
UPDATE Group_Pricing SET 
Contract_Type = 
     (SELECT Contract_Type 
      FROM ContractTypesFinal 
      WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID), 
Hybrid_Retail =  
IIf (SELECT RetailSpread 
     FROM ContractTypesFinal 
     WHERE ContractTypesFinal.FirstGroup = Group_Pricing.GroupID)="Yes",1,0)

<...> 
```

请注意，MS Access 中的 YesNo 是 -1 和 0

然而，直接说：

```
UPDATE table1 SET AYesNo=(AText="Yes") 
```

编辑

```
UPDATE Group_Pricing 
INNER JOIN ContractTypesFinal 
ON Group_Pricing.GroupID = ContractTypesFinal.FirstGroup 
SET Hybrid_Retail = (RetailSpread="Yes") 
```

这`(RetailSpread="Yes")`将评估为`True`(-1)

# java - 使用 Flyway 的 MySQL JDBC 驱动程序

> ID：11586979
> 
> 赞同：1
> 
> 时间：2012-07-20T21:10:43.827
> 
> 标签：java, mysql, jdbc, classpath, flyway

在我的 ~/.bashrc 中：

```
export CLASSPATH=~/mysqljdbc/mysql-connector-java-5.1.21-bin.jar 
```

CLASSPATH 变量是正确的：

```
ray@ubuntu:~$ echo $CLASSPATH
/home/ray/mysqljdbc/mysql-connector-java-5.1.21-bin.jar 
```

尝试运行它：

```
ray@ubuntu:/var/www/project$ sh ~/flyway-commandline-1.7/flyway.sh -driver=com.mysql.jdbc.Driver -user=root -p=password -url=jdbc:mysql://localhost:3306/project init
Flyway (Command-line Tool) v.1.7

FlywayException: Unable to instantiate jdbc driver: com.mysql.jdbc.Driver
Occured in com.googlecode.flyway.core.util.jdbc.DriverDataSource.<init>() at line 93 
```

任何想法为什么它找不到驱动程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:37:32.023

指定 -classpath 或 -cp 会覆盖 CLASSPATH 的任何设置，这在 flyway.sh 中完成根据 flyway [文档](http://flywaydb.org/documentation/commandline/)，您必须将 mysql jdbc jar 存储在 jars 文件夹中（或者只需将其添加到 flyway.sh 中的 JVM 启动）。

# javascript - 当字段有效（html5）时是否可以触发事件？

> ID：11586980
> 
> 赞同：1
> 
> 时间：2012-07-20T21:10:56.580
> 
> 标签：javascript, jquery

在 html5 中的字段可以是有效的。（例如`type="email"`必须遵循电子邮件约定等）。

使用 css，您可以使用 psuedo-element: 选择有效字段 `input:valid`。

输入有效时是否可以触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:24:58.920

`checkValidity()`对要检查的输入的 DOM 元素使用方法。

```
function isValidInput (input) {
    return $(input)[0].checkValidity();
} 
```

然后，您可以在任何事件上运行该函数，例如按钮`blur`或`keyup`按钮。

**演示：http:** [//jsfiddle.net/nSLQb/1/](http://jsfiddle.net/nSLQb/1/)

# php - 我在我的服务器中找到了一个 php 代码，怎么知道是什么意思？

> ID：11586982
> 
> 赞同：-4
> 
> 时间：2012-07-20T21:11:00.210
> 
> 标签：php

你好吗 ？

我找到了一个php代码，但我不知道是什么意思..也许有人把它放在我的服务器上..

它很奇怪 ..

也许你可以知道是什么意思？

这里：[http ://codepaste.net/3rj6y8](http://codepaste.net/3rj6y8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:15:52.563

这看起来像是一个典型的漏洞利用——您的服务器已被黑客入侵。在第一次检查混淆代码时，我看到远程 shell 功能允许攻击者控制您的服务器的迹象。

重新安装机器并确保关闭漏洞（例如，通过检查您自己的软件并更新其他软件）。有关更多详细信息，请参阅[此出色的 serverfault answer](https://serverfault.com/a/218011/64731)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:18:36.737

这是一些混淆代码，可能是服务器漏洞。

在这里阅读：[https ://stackoverflow.com/questions/8512425/how-to-deobfuscate-this-php-code-instructions-please-dont-just-do-it-for-me](https://stackoverflow.com/questions/8512425/how-to-deobfuscate-this-php-code-instructions-please-dont-just-do-it-for-me)

根据[此页面](http://translate.google.pl/translate?hl=pl&sl=pl&tl=en&u=http://aiv-dev.info/2011/04/14/ataki-na-web-aplikacje-cz-4/)，有一些 webshel​​l 可以远程访问您的服务器。

**删除或移动此文件！**

# jquery - $(document).ready 但在 IE 中 document.body 仍然为空

> ID：11586983
> 
> 赞同：1
> 
> 时间：2012-07-20T21:11:10.100
> 
> 标签：jquery, internet-explorer, document, ready

这似乎很奇怪。在 IE 中，我正在等待 $(document).ready()。文档准备好后，我控制台记录 document.body 并且它为空。如果我将它包装在超时中，它就在那里？不应该 document.body 好继续准备好文件吗？例如：

```
// doesn't work
$(x.document).ready( function() { 
  x.document.body.innerHTML = '<div style="background-color: 000; color: #FF0000  ;">Cyril Figgis</div>';
});

// works
$(x.document).ready( function() { 
  setTimeout( function() { 
    x.document.body.innerHTML = '<div style="background-color: #000; color: #FF0000  ;">Hello!</div>';
  }, 1000 );
} ); 
```

document.body 在一秒钟后定义，但不是立即定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T12:17:36.093

我只是在研究这个，因为我在 IE9 上运行相同的问题，我认为这个 2 岁的 jQuery 错误条目可能很有趣：[http ://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

从那里引用：“在提供的示例中，您依赖于 .ready() 的异步执行，这不是保证。这是因为 .ready() 在 1.8 中稍早触发，因为它对DOM 准备就绪。”

您的代码与我的代码相似 - 我们假设当文档实际准备好时，ready() 将异步执行，但正如 jQuery 专家所说，情况可能并非总是如此。

# javascript - 兄弟姐妹上的 mousedown 传播

> ID：11586984
> 
> 赞同：2
> 
> 时间：2012-07-20T21:11:18.990
> 
> 标签：javascript, jquery, html, coffeescript

我有一个 div 有几个 img-Objects 位置：绝对像这样：

```
<div>  
    <img>  
    <img>  
    <img>  
    <img>  
</div> 
```

现在，当调用图像的 mousedown 处理程序之一时，该事件只会冒泡，而忽略其他图像，即使它们可能彼此落后。

```
$('img').mousedown((event) -> if(something) event.stopPropagation());  
$('div').mousedown(-> alert('event came through')); 
```

我试图嵌套它们来解决这个问题，但这也不起作用：

```
<div>  
    <img>    
    <div>  
        <img>  
        <div>  
            <img> 
            ...   
        </div>  
    </div>  
</div> 
```

有什么方法可以在不手动对每个图像运行命中测试的情况下使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:37:27.520

> 有什么方法可以在不手动对每个图像运行命中测试的情况下使其工作？

我相信您必须自己进行命中测试是正确的。`mousedown`仅出现在鼠标指针下最前面的元素上，而不是那些`(x, y)`坐标处的所有元素。

在实践中，这并不难。这是一个工作示例：http: [//jsfiddle.net/TrevorBurnham/GBuZz/](http://jsfiddle.net/TrevorBurnham/GBuZz/)

在该示例中，`mousedown`事件在容器元素上被捕获并按如下方式处理：

```
$('#container').on 'mousedown', (e) ->
  {pageX, pageY} = e
  $(@).children().each (i) ->
    {top, left} = $(@).offset()
    if top <= pageY <= top + $(@).outerHeight() &&
       left <= pageX <= left + $(@).outerWidth()
      console.log 'collision with box ' + i​ 
```

# c - OSX 上 Totalview 调试软件的问题

> ID：11586985
> 
> 赞同：0
> 
> 时间：2012-07-20T21:11:19.433
> 
> 标签：c, debugging, gdb, totalview

我正在尝试在 OSX 上进行一些多线程调试。我最初试图通过 QtCreator IDE 使用 GDB，但是我永远无法让它完全正确地工作。我现在正在使用 Totalview 评估，一旦我将它指向我的可执行文件，我就会得到以下信息

```
Reading symbols for runtime loader /usr/lib/dyld(x86_64)
Error reading one of the dynamic loader image info values
Error reading one of the dynamic loader image info values
WARNING: Entrypoint address 0x7fff5fc01028 in library '/Users/dec/work/exc1' appears invalid 
```

其中 exc1 是我的可执行文件。这些消息是什么意思？我该如何解决问题？我在这里标记 GDB 以防万一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:19:38.883

> 这些消息是什么意思？

TotalView 的`/usr/lib/dyld`.

> 我该如何解决问题？

联系 TotalView 技术支持？

# tsql - 具有复合主键的优点和缺点

> ID：11586986
> 
> 赞同：13
> 
> 时间：2012-07-20T21:11:23.233
> 
> 标签：tsql

代替具有复合主键（此表维护代表两个实体 [两个表] 的两个表之间的关系），该设计建议将`identity`列作为主键，并且在代表两个列的两个列上强制执行唯一数据约束来自实体主键的数据。

对我来说，每个关系表都有标识列违反了规范化规则。

*   行业标准是什么？
*   在对此做出设计决定之前要考虑哪些因素？
*   哪种方法是正确的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T05:13:25.247

有很多表，您可能希望将标识列作为主键。但是，对于您描述的 M:M 关系表，最佳做法是不要为主键使用新的标识列。

RTomas 在他的评论中的链接提供了最佳实践是不添加标识列的绝佳理由。这是[那个链接](http://weblogs.sqlteam.com/jeffs/archive/2007/08/23/composite_primary_keys.aspx)。

在几乎所有情况下，缺点都会超过优点，但既然你问了优点和缺点，我也放了几个不太可能的优点。

**缺点**

*   增加复杂性

*   除非您对关系强制执行唯一性（默认情况下主键会这样做），否则可能会导致重复关系。

*   可能更慢：db 必须维护两个索引而不是一个。

**优点**

*所有的专业人士都很粗略*

*   如果您遇到需要使用关系表的主键作为单独表（例如审计表？）的连接的情况，连接可能会更快。（尽管如前所述 - 添加和删除记录可能会更慢。此外，如果您的关系表是本身使用唯一 ID 的表之间的关系，则在连接中使用一个标识列与两个标识列的速度增加将是最小的。）

*   为简单起见，应用程序可以假设它使用的每个表都有一个唯一的 ID 作为其主键。（这是应用程序中糟糕的设计，但您可能无法控制它。）您可以想象这样一种情况，在数据库中引入一些额外的复杂性比在这样的应用程序中引入额外的复杂性更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-15T08:41:11.557

您必须在每个表中创建用作外键的所有列。这是最大的缺点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-03T11:54:24.193

**缺点：**

*   必须在所有引用表中导入复合主键。这意味着更大的索引和要编写的更多代码（例如连接、更新）。如果您系统地使用复合主键，它可能会变得非常麻烦。
*   您不能更新主键的一部分。例如，如果您使用 university_id、student_id 作为大学生表中的主键，并且一个学生更改了大学，您必须删除并重新创建记录。

**优点：**

*   复合主键允许以强大且无缝的方式强制执行一种常见的约束。假设您有一个 UNIVERSITY 表、一个 STUDENT 表、一个 COURSE 表和一个 STUDENT_COURSE 表（哪个学生学习哪个课程）。如果约束条件是您必须始终是 A 大学的学生才能学习 A 大学的课程，那么如果 university_id 是 STUDENT 和 COURSE 的组合键的一部分，则该约束将被自动验证。

# python - pandas，matplotlib，使用数据框索引作为轴刻度标签

> ID：11586989
> 
> 赞同：8
> 
> 时间：2012-07-20T21:11:28.650
> 
> 标签：python, matplotlib, pandas

我正在使用 matplotlib 的`imshow()`函数来显示`pandas.DataFrame`.

我希望从 DataFrame.index 和 DataFrame.columns 列表中绘制 x 轴和 y 轴的标签和刻度，但我不知道该怎么做。

假设这`data`是一个`pandas.DataFrame`：

```
>>> print data
<class 'pandas.core.frame.DataFrame'>
Index: 201 entries,  1901 to  2101
Data columns:
jan    201  non-null values
feb    201  non-null values
mar    201  non-null values
apr    201  non-null values
may    201  non-null values
jun    201  non-null values
jul    201  non-null values
aug    201  non-null values
sep    201  non-null values
oct    201  non-null values
nov    201  non-null values
dec    201  non-null values 
```

当我这样做时：

```
ax1 = fig.add_subplot(131, xticklabels=data.columns, yticklabels=data.index)
ax1.set_title("A")
ax1.tick_params(axis='both', direction='out')
im1 = ax1.imshow(data, 
                 interpolation='nearest', 
                 aspect='auto',
                 cmap=cmap ) 
```

我最终在图像的 y 轴上得到了间隔很好的刻度标签，但标签是 1901-1906 而不是 1901 到 2101。同样，x 轴刻度标签是 feb-jul 而不是 jan-dec。

如果我使用

```
ax1 = fig.add_subplot(131) # without specifying tick labels 
```

然后我最终得到的轴刻度标签只是底层的 ndarray 索引值（即 0-201 和 0-12）。我不需要修改刻度和标签的间距或数量，我只希望标签文本来自 DataFrame 索引和列列表。不确定我是否遗漏了一些简单的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T16:47:05.453

我认为这个问题与为现有刻度指定刻度标签有关。默认情况下，刻度比标签少，因此只使用前几个标签。以下应该首先设置刻度数。

```
ax1 = fig.add_subplot(131)
ax1.set_title("A")
ax1.tick_params(axis='both', direction='out')
ax1.set_xticks(range(len(data.columns)))
ax1.set_xticklabels(data.columns)
ax1.set_yticks(range(len(data.index)))
ax1.set_yticklabels(data.index)
im1 = ax1.imshow(data, interpolation='nearest', aspect='auto', cmap=cmap) 
```

这会在 y 轴上为每年生成一个刻度，因此您可能希望使用索引值的子集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-12T06:10:57.357

作为一般解决方案，我发现以下方法是将 Pandas datetime64 索引带入 matplotlib 轴标签的简单方法。

首先，通过将 pandas datetime64 索引转换为 Python datetime.datetime 类来创建一个新系列。

`new_series = your_pandas_dataframe.index.to_pydatetime()`

现在你拥有了 matplotlib.dates 的所有功能。在绘图之前，将 matplotlib.dates 导入为 mdates 并声明以下变量：

```
years = mdates.YearLocator()   
months = mdates.MonthLocator()  
days = mdates.DayLocator()
hours = mdates.HourLocator(12) #if you want ticks every 12 hrs, you can pass 12 to this function
minutes = mdates.MinuteLocator() 
daysFmt = mdates.DateFormatter('%m/%d') #or whatever format you want 
```

现在，使用 new_series 作为 x 轴制作您的绘图：

```
fig1 = plt.figure()
ax = fig1.add_subplot(111)
ax.plot(new_series,your_pandas_dataframe) 
```

您可以使用上面声明的 mdates 函数来调整标签和刻度以使您满意，例如：

```
ax.xaxis.set_major_locator(days)
ax.xaxis.set_major_formatter(daysFmt)
ax.xaxis.set_minor_locator(hours) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-14T17:43:54.983

我发现最简单的方法是使用`ImageGrid`. 这是执行此操作的代码，这里的 plot +[是一个 IPython 笔记本](http://nbviewer.ipython.org/6233458)，以更美观的格式显示它：

```
mons = ['Jan',
 'Feb',
 'Mar',
 'Apr',
 'May',
 'Jun',
 'Jul',
 'Aug',
 'Sep',
 'Oct',
 'Nov',
 'Dec']

# just get the first 5 for illustration purposes
df = DataFrame(randn(201, len(mons)), columns=mons,
               index=arange(1901, 2102))[:5]

from mpl_toolkits.axes_grid1 import ImageGrid
fig = figure(figsize=(20, 100))
grid = ImageGrid(fig, 111, nrows_ncols=(1, 1),
                 direction='row', axes_pad=0.05, add_all=True,
                 label_mode='1', share_all=False,
                 cbar_location='right', cbar_mode='single',
                 cbar_size='10%', cbar_pad=0.05)

ax = grid[0]
ax.set_title('A', fontsize=40)
ax.tick_params(axis='both', direction='out', labelsize=20)
im = ax.imshow(df.values, interpolation='nearest', vmax=df.max().max(),
               vmin=df.min().min())
ax.cax.colorbar(im)
ax.cax.tick_params(labelsize=20)
ax.set_xticks(arange(df.shape[1]))
ax.set_xticklabels(mons)
ax.set_yticks(arange(df.shape[0]))
ax.set_yticklabels(df.index) 
```

![在此处输入图像描述](../Images/d6de8f9d65afe5c92df7b298e77577ee.png)

# php - UI 元素代码应该在网页的顶部还是底部？

> ID：11586990
> 
> 赞同：0
> 
> 时间：2012-07-20T21:11:32.193
> 
> 标签：php, html, web

我似乎找不到一个直截了当的答案。我需要的是“更接近页眉”或“更接近页脚”以及某种解释。

假设我有一个 PHP 驱动的网站，主要文件是 header/content/footer.php

如果我正在创建一个“品牌化”“类应用”网站（此处为廉价插图）

外部“UI”元素应该在哪里编码？是否有最佳实践包括靠近页眉（首先呈现）或靠近页脚（最后呈现）？

[http://i47.tinypic.com/29vhzx5.png](http://i47.tinypic.com/29vhzx5.png) - 假设灰色是 UI 元素，蓝色是个性化内容/侧边栏区域？

只需要一些帮助，将其编码为最佳实践，如果这很重要的话！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:38:42.953

如果我们谈论 UI，它首先出现在功能之前。UI 元素由标记和 CSS 组成，因此显然它应该首先呈现，功能部分应该放在最后，因为让用户首先看到 UI 然后让他们与之交互非常重要。所以你应该使用先渲染策略。希望有帮助

# django - Django LDAP：如何将 Active Directory 中的额外字段映射到 Django 用户数据库

> ID：11586991
> 
> 赞同：0
> 
> 时间：2012-07-20T21:11:35.467
> 
> 标签：django, ldap, ldap-query

我想将我公司 Active Directory 中可用的一些字段映射到我的 Django 应用程序，如部门、职位等。我正在使用 Django_auth_ldap 进行后端身份验证，它复制数据并更新 Django 应用程序数据库中的记录。因为，Django Auth User 表不支持这些属性，你有什么建议呢？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:36:53.913

阅读此处，将 AD 配置文件属性映射到 django 配置文件。 [http://packages.python.org/django-auth-ldap/#user-objects](https://web.archive.org/web/20120724025709/http://packages.python.org/django-auth-ldap/#user-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:29:01.100

这是来自 django [https://docs.djangoproject.com/en/dev/topics/auth/customizing/](https://docs.djangoproject.com/en/dev/topics/auth/customizing/)的文档。你试过谷歌搜索吗？已经有很多可用的信息。

# ios - 自定义索引部分列表定位

> ID：11586992
> 
> 赞同：0
> 
> 时间：2012-07-20T21:11:45.310
> 
> 标签：ios, uitableview, indexing

我通过使用循环以编程方式添加按钮来实现自定义索引部分列表。这是我的表视图控制器中的代码：

```
int offset = 65;
int yposition = 40;
NSString *letter;
for (int i=0; i<26; i++) 
{
    letter = [NSString stringWithFormat:@"%c",offset];
    UIButton *a = [UIButton buttonWithType:UIButtonTypeCustom];
    [a setAlpha:0.7];
    a.frame = CGRectMake(300,yposition,20,15);
    [a setTitle:letter forState:UIControlStateNormal];
    [a addTarget:self action:@selector(pressedIndex:) forControlEvents:UIControlEventTouchUpInside];
    [self.parentViewController.view addSubview:a];
    offset += 1;
    yposition += 15;
} 
```

它工作正常，除非我回到父视图，索引列表仍然存在。这是有道理的。如果我将索引列表按钮直接放在表格视图中，那么当用户向下滚动表格视图时，按钮会向下滚动并消失。

关于如何让我的按钮位置保留在屏幕上的任何建议？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:34:26.927

我最终使用了一个 nib 文件，在 IB 中添加了一个视图，并以编程方式将我的索引列表按钮添加到该视图中。

# sql-server - MSSQL JDBC 驱动程序在第一次连接时不会连接到镜像 failoverPartner

> ID：11586998
> 
> 赞同：8
> 
> 时间：2012-07-20T21:12:11.803
> 
> 标签：sql-server, jdbc, c3p0

我正在使用 C3P0 和 MS SQL JDBC 4 驱动程序在数据库消失时自动故障转移到新的数据库镜像。如果它首先连接到主数据库，则故障转移工作并无缝切换到镜像数据库。但是，如果在应用程序启动时主体 DB 已关闭，而镜像 DB 可以连接（使用 MSSQL Studio 测试），则应用程序无法启动并且无法连接到备份镜像。

这是连接网址：

```
jdbc:sqlserver://PRINCIPALDB;databaseName=app_space;port=99999;failoverPartner=MIRRORDB 
```

我有`c3p0.testConnectionOnCheckout`并`c3p0.preferredTestQuery`设置，`c3p0.acquireRetryAttempts`但未设置（使用默认值 30）。

为什么当主体关闭时它最初不会连接到镜像数据库？我们需要这个，因为如果电源关闭或其他原因并且主体数据库关闭，并且应用服务器需要回收，那么故障转移将无济于事。

参考：

[http://www.mchange.com/projects/c3p0/#configuring_recovery](http://www.mchange.com/projects/c3p0/#configuring_recovery)

[使用数据库镜像 (JDBC)](http://msdn.microsoft.com/en-US/library/aa342332%28v=sql.90%29)（MSDN 在其 URL 中使用非转义括号！） [http://msdn.microsoft.com/en-US/library/aa342332(v=sql.90)](http://msdn.microsoft.com/en-US/library/aa342332(v=sql.90))

* * *

以下是该应用程序的一些日志。

```
<14>[APP]: INFO 20 Jul 2012 12:21:21,982 [main] net.sf.hibernate.connection.C3P0ConnectionProvider "C3P0 using driver: com.microsoft.sqlserver.jdbc.SQLServerDriver at URL: jdbc:sqlserver://PRINCIPAL;databaseName=APP_space;port=9999;failoverPartner=MIRRORDB"    
<14>[APP]: INFO 20 Jul 2012 12:21:21,982 [main] net.sf.hibernate.connection.C3P0ConnectionProvider "Connection properties: {user=USERNAME, password=PASSWORD}"    
<14>[APP]: INFO 20 Jul 2012 12:21:22,435 [main] net.sf.hibernate.transaction.TransactionFactoryFactory "Transaction strategy: net.sf.hibernate.transaction.JDBCTransactionFactory"
<14>[APP]: INFO 20 Jul 2012 12:21:22,450 [main] net.sf.hibernate.transaction.TransactionManagerLookupFactory "No TransactionManagerLookup configured (in JTA environment, use of process level read-write cache is not recommended)"    
<12>[APP]: WARN 20 Jul 2012 12:29:17,279 [main] net.sf.hibernate.cfg.SettingsFactory "Could not obtain connection metadata"    
<12>java.sql.SQLException: Connections could not be acquired from the underlying database! 
<12>    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106) 
<12>    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529) 
<12>    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128) 
<12>    at net.sf.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:33) 
<12>    at net.sf.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:84) 
```

这是它有时会给出的一种不同类型的错误，带有死锁警告。

```
<14>[APP]: INFO 20 Jul 2012 18:05:43,049 [main] net.sf.hibernate.connection.C3P0ConnectionProvider "C3P0 using driver: com.microsoft.sqlserver.jdbc.SQLServerDriver at URL: jdbc:sqlserver://PRINCIPALDB:9999;databaseName=APP_space;failoverPartner=MIRRORDB:9999"
<14>[APP]: INFO 20 Jul 2012 18:05:43,049 [main] net.sf.hibernate.connection.C3P0ConnectionProvider "Connection properties: {user=USERNAME, password=PASSWORD}"
<14>[APP]: INFO 20 Jul 2012 18:05:43,190 [main] com.mchange.v2.log.MLog "MLog clients using log4j logging."
<14>[APP]: INFO 20 Jul 2012 18:05:43,518 [main] com.mchange.v2.c3p0.C3P0Registry "Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]"
<14>[APP]: INFO 20 Jul 2012 18:05:43,612 [main] net.sf.hibernate.transaction.TransactionFactoryFactory "Transaction strategy: net.sf.hibernate.transaction.JDBCTransactionFactory"
<14>[APP]: INFO 20 Jul 2012 18:05:43,612 [main] net.sf.hibernate.transaction.TransactionManagerLookupFactory "No TransactionManagerLookup configured (in JTA environment, use of process level read-write cache is not recommended)"
<14>[APP]: INFO 20 Jul 2012 18:05:43,658 [main] com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource "Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@616301db [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@d6ed198b [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1bqq23w8o1a6dec41cwe1cd|20e1bfee, idleConnectionTestPeriod -> 100, initialPoolSize -> 10, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxI...
<14>...dleTime -> 3600, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 150, maxStatements -> 1000, maxStatementsPerConnection -> 0, minPoolSize -> 10, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@2c0fb781 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1bqq23w8o1a6dec41cwe1cd|20360e46, jdbcUrl -> jdbc:sqlserver://PRINCIPALDB:9999;databaseName=APP_space;failoverPartner=MIRRORDB:9999, properties -> {user=******, password=******} ], preferredTestQuery -> select * from CLUSTERSAFETY, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1bqq23w8o1a6dec41cwe1cd|6f3e49a8, numHelperThreads -> 3 ]"
<12>[APP]: WARN 20 Jul 2012 18:06:03,644 [Timer-0] com.mchange.v2.async.ThreadPoolAsynchronousRunner "com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@37f844f7 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!"
<12>[APP]: WARN 20 Jul 2012 18:06:03,644 [Timer-0] com.mchange.v2.async.ThreadPoolAsynchronousRunner "com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@37f844f7 -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@52783859 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@52bb855b (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@153043cc (com.mchange.v2.asyn...
<12>...c.ThreadPoolAsynchronousRunner$PoolThread-#2)
    Pending Tasks: 
```

我使用此连接从文档中运行了一个测试程序：

```
jdbc:sqlserver://PRINCIPALDB:9999;databaseName=APP_space;portNumber=9999;failoverPartner=MIRRORDB:9999 
```

它抛出了这个异常，就像它正在尝试与我指定的不同的端口一样！

```
Connection to principal server failed, trying the mirror server.
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host MIRRORDB:9999, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190) 
```

重要的一点是它尝试连接到端口 1433 而不是我指定的端口，有很多不同的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:56:11.150

[此处](http://msdn.microsoft.com/en-us/library/ms378988.aspx)的 Sql Server JDBC 驱动程序文档有以下（令人困惑的）免责声明：

> **注意** 驱动程序不支持将故障转移伙伴实例的服务器实例端口号指定为连接字符串中的 failoverPartner 属性的一部分。但是，支持在同一连接字符串中指定主体服务器实例的 serverName、instanceName 和 portNumber 属性以及故障转移伙伴实例的 failoverPartner 属性。

由此我建议添加： **serverName=PRINCIPALDB;instanceName=MyInstance** 属性，看看是否有效。

* * *

您提到故障转移处于活动状态。请注意，对于某些 Sql Server 镜像配置，故障转移不是[自动](http://msdn.microsoft.com/en-us/library/ms189852%28v=SQL.105%29.aspx)的。您可能需要验证是否可以 使用 jdbc连接到**MIRRORDB ：**

```
jdbc:sqlserver://MIRRORDB;databaseName=app_space;port=9999; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T21:57:00.137

我找到了答案！您必须将实例名称指定为主机名的一部分！例子：

```
jdbc:sqlserver://DEVSQLB\SQLB;databaseName=db_space;portNumber=99999;failoverPartner=BACKUPSQLA\SQLA 
```

`\SQLA`实例名称在哪里！我不确定实例是什么，但我在 SQL Server 中看到过多次引用它。为了找出这些秘密信息，我（我的公司）不得不直接向 Microsoft 请求支持。

哦，忘了：

*   您可以使用“server\instance_name”格式解决此问题，并确保浏览器服务正在运行并处于自动模式。