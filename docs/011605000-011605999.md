# StackOverflow 问答 11605000-11605999

# python - 给定分隔符，生成字符串中子字符串长度列表的最快方法是什么？

> ID：11605009
> 
> 赞同：1
> 
> 时间：2012-07-23T00:01:12.423
> 
> 标签：python

我有一个字符串，我需要生成一个以给定分隔符结尾的所有子字符串的长度列表。

例如：string = 'a0ddb0gf0', separator = '0'，所以我需要生成：lengths = [2,4,3]，因为len('a0')==2, len('ddb0')=4 , 和 len('gf0')==3。

我知道它可以通过以下方式完成（例如）：

```
separators = [index for index in range(len(string)) if string[index]==separator]
lengths = [separators[index+1] - separators[index] for index in range(len(separators)-1)] 
```

但我需要它以极快的速度完成（在大量数据上）。为大量数据生成中间列表非常耗时。

有没有一种解决方案可以整齐快速地完成这项工作（py2.7）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:03:57.560

最快的？不知道。您可能想对其进行概要分析。

```
>>> print [len(s) for s in 'a0ddb0gf0'.split('0')]
[1, 3, 2, 0] 
```

而且，如果您真的不想包含零长度字符串：

```
>>> print [len(s) for s in 'a0ddb0gf0'.split('0') if s]
[1, 3, 2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:23:35.310

就个人而言，我喜欢[`itertools.groupby()`](http://docs.python.org/library/itertools.html#itertools.groupby)

```
>>> from itertools import groupby
>>> sep = '0'
>>> data = 'a0ddb0gf0'
>>> [sum(1 for i in g) for (k, g) in groupby(data, sep.__ne__) if k]
[1, 3, 2] 
```

这根据每个元素是否等于分隔符对数据进行分组，然后获取元素不相等的每个组的长度（通过对组中的每个项目求和 1）。

itertools 函数通常非常快，尽管我不确定比`split()`这要好多少。我认为强烈支持它的一点是，它可以无缝地处理多个连续出现的分隔符。它还将处理任何可迭代的 for `data`，而不仅仅是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T00:10:55.297

我不知道这会走多快，但这是另一种方式：

```
def len_pieces(s, sep):
    i = 0
    while True:
        f = s.find(sep, i)
        if f == -1:
            yield len(s) - i
            return
        yield f - i + 1
        i = f + 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T00:07:59.443

```
>>> [len(i) for i in re.findall('.+?0', 'a0ddb0gf0')]
[2, 4, 3] 
```

您可以使用`re.finditer`来避免中间列表，但在性能上可能没有太大区别：

```
[len(i.group(0)) for i in re.finditer('.+?0', 'a0ddb0gf0')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T00:10:34.367

也许使用重新：

```
[len(m.group()) for m in re.finditer('(.*?)0', s)] 
```

# ruby - Ruby 对多个值进行排序

> ID：11605010
> 
> 赞同：0
> 
> 时间：2012-07-23T00:01:29.867
> 
> 标签：ruby

我在尝试对给定的价格和产品进行排序时遇到了一点问题。

```
arr = [[6,"iPhone"],[4,"Android"],[5,"iPhone"],[3,"Xbox"],
       [9,"Android"],[8,"Xbox"]] 
```

但我需要先按产品分类，然后按价格分类。我做了下一个常见的做法：

```
arr.sort_by! {|x| [x[1],x[0]]}.reverse
 => [[6, "iPhone"], [5, "iPhone"], [8, "Xbox"], [3, "Xbox"], 
     [9, "Android"], [4, "Android"]] 
```

但是我现在需要再次按产品块对其进行排序，以首先获得最昂贵的一个块，依此类推。我正在寻找的结果如下：

```
arr = [[9,"Android"],[4,"Android"],[8,"Xbox"],[3,"Xbox"],
       [6,"iPhone"],[5,"iPhone"]] 
```

任何帮助将不胜感激！

**更新 1** 我已经测试了戴夫的答案及其作品，但在其他一组项目上，我没有得到正确的产品块。

```
arr = [[6.0,"iPad 2"], [7, "Mints"], [6.0, "Nerf Crossbow"], [4.5, "iPad 2"],
[6, "Mints"], [6.75, "Nerf Crossbow"], [6.0, "iPad 2"], [5, " Mints"],
[9.0, "Nerf Crossbow"]] 
```

我得到了这个结果：

```
1.9.2p320 :5 >   arr.sort! { |a, b| (a[1] <=> b[1]).nonzero? || b[0] <=> a[0] }  
=> [[7, "Mints"], [6, " Mints"], [5, "Mints"], [9.0, "Nerf Crossbow"], 
[6.75, "Nerf Crossbow"], [6.0, "Nerf Crossbow"], [6.0, "iPad 2"], [6.0, "iPad 2"], 
[4.5, "iPad 2"]] 
```

问题是我期待

```
[[9.0, "Nerf Crossbow"], [6.75, "Nerf Crossbow"], [6.0, "Nerf Crossbow"],
[7, "Mints"], [6, "Mints"], [5, "Mints"],[6.0, "iPad 2"], [6.0, "iPad 2"],
[4.5, "iPad 2"]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T00:34:09.353

很简单，只是否定价格：

```
arr.sort_by! {|price, product| [product.downcase, -price]} 
```

这比使用`sort`. 我添加`downcase`了产品名称，因为您可能不应该关心这个案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T00:36:18.617

这是另一种选择：

`arr.sort_by { |e| [e[1], -e[0]] }`

# java - Java中地图的通用函数

> ID：11605012
> 
> 赞同：2
> 
> 时间：2012-07-23T00:02:08.633
> 
> 标签：java, generics

我正在尝试编写一个通用函数，它将接受以下两种数据类型

```
Map <Integer, Map<Integer, Long>>
Map <Integer, Map<Integer, Double>> 
```

我的功能看起来像这样，

```
function(Map<Integer, Map<Integer, ? extends Number>> arg) {} 
```

但我收到一个不兼容的类型错误。它适用于地图，但不适用于地图地图。我无法理解为什么？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:10:43.593

你可以尝试类似的东西

```
static <T extends Number> void function(Map<Integer, Map<Integer, T>> map) {}

public static void main(String[] args) {
    Map<Integer, Map<Integer, Long>> map1 = new HashMap<Integer, Map<Integer, Long>>();
    Map<Integer, Map<Integer, Double>> map2 = new HashMap<Integer, Map<Integer, Double>>();
    Map<Integer, Map<Integer, String>> map3 = new HashMap<Integer, Map<Integer, String>>();
    function(map1);
    function(map2);
    function(map3);// <-- compilation error here, String is not Number
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:13:10.983

为什么不只是参数化方法？

```
public <T extends Number> void function(Map<Integer, Map<Integer, T>>) { ... } 
```

我发现通配符捕获往往会使人们混淆它的真正作用。

`Map<Integer, ? extends Number>`真正意味着任何`Map`其键是`Integer`并且其值是派生自 的类型`Number`。这意味着`Map<Integer, Integer>,` `Map<Integer,Long>`。

出于这个原因，您永远无法真正添加到这些集合中，因为通配符编译器无法判断要添加的真正类型是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T00:48:27.240

首先让我们通过使用`Set`s 来减少问题：

```
Set<Set<Long>> longSetSet = null;
Set<Set<Double>> doubleSetSet = null;

Set<Set<? extends Number>> someNumberSetSet;

// try assigning them
someNumberSetSet = longSetSet;   //
someNumberSetSet = doubleSetSet; // compiler errors - incompatible types 
```

乍一看你可能想知道为什么这个赋值是非法的，因为毕竟你可以赋值一个`Set<Long>`to`Set<? extends Number>`原因是[泛型不是协变的](https://stackoverflow.com/a/2745301/697449)。编译器会阻止您将 a 分配给`Set<Set<Long>>`，`Set<Set<? extends Number>>`原因与它不允许您将 a 分配给 a 的原因`Set<Long>`相同`Set<Number>`。有关更多详细信息，请参阅链接的答案。

作为一种解决方法，您可以按照其他答案的建议在方法签名中使用类型参数。您还可以使用另一个通配符使分配合法：

```
Set<? extends Set<? extends Number>> someNumberSetSet;

someNumberSetSet = longSetSet;   //
someNumberSetSet = doubleSetSet; // legal now 
```

或者在您的示例中：

```
function(Map<Integer, ? extends Map<Integer, ? extends Number>> arg) { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T00:17:07.687

```
static void test(Map<Integer, Map<Integer, ? extends Number>> a) { } 
```

这实际上对我来说很好（JavaSE-1.6）。

# mysql - 如何合并来自已经分歧的mysql模式的数据？

> ID：11605016
> 
> 赞同：0
> 
> 时间：2012-07-23T00:02:43.193
> 
> 标签：mysql, linux, database-schema, data-migration

我有两台共享原始祖先代码库的服务器，但在过去几个月中，它们在数据库架构方面发生了变化（我使用的是 mysql）。我即将使用第二个作为我的新生产服务器，但我必须更新数据（有新用户，有与这些用户相关的新数据等）。我希望服务器中的数据现在处于活动状态，但旧模式具有权限，但我希望新模式中的模式成为最终模式。所以这是一种奇怪的合并：我希望将来自旧服务器的数据导入到具有（不是*很大*）不同模式的新服务器中。

我正在考虑简单地转储具有最新数据的服务器，但是由于架构发生了很大变化，因此加载它是行不通的。

我还在考虑转储新服务器的架构，将其应用于旧服务器的副本，*然后*从后者转储数据并将其加载到新服务器中，但我不知道如何去做如果这是最安全的选择。

我在 mac OS X 上开发，我的两台服务器都是 debian。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:07:00.347

将架构从新服务器应用到旧服务器，然后迁移数据是最安全的选择，主要是因为它迫使您评估具体发生了哪些变化以及您想根据数据做什么（例如，新列在哪里补充说，你想在里面放什么）？

由于您提到架构并没有太大的不同，因此只需在没有每个服务器的数据（即仅表）的情况下进行 mysqldump 并手动比较（例如， with `diff`）将告诉您哪些列不同。然后，您可以`ALTER`在旧数据库上应用这些更改。

这一切都有点笨拙，但最终没有一种真正不笨拙的方式来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:36:17.743

看这里：[http](http://bitbucket.org/idler/mmp) ://bitbucket.org/idler/mmp - 它是 mysql 模式版本控制的工具，但只有模式，而不是数据。首先，您必须迁移架构，然后加载新数据。

# haskell - 重新定义列表单子实例

> ID：11605027
> 
> 赞同：4
> 
> 时间：2012-07-23T00:04:44.283
> 
> 标签：haskell, functional-programming, monads, typeclass

我想为列表单子提供我自己的实例。不幸的是，以下内容在编译时会导致重复实例声明错误。

```
myReturn :: a -> [a]
myBind :: [a] -> (a -> [b]) -> [b]
instance Monad [] where
    return = myReturn
    (>>=) = myBind 
```

从文档来看，导入时似乎无法隐藏实例声明，并且由于列表 monad 实例已经在前奏中声明，我想我也无法摆脱导入本身。

我想也许我至少可以重新绑定`(>>=)`，`return`这样我就可以使用我自己的实现来使用 do 块，因为 do 块据说只是`(>>=)`and应用程序的语法糖`(>>)`。

```
let
    return = myReturn
    (>>=) = myBind
in
    do
        item1 <- list1
        item2 <- list2
        return (item1, item2) 
```

不幸的是，块似乎是`(>>=)`从其他地方获取它们的，因为它仍在使用`(>>=)`默认列表 monad 实例。

有什么方法可以让我的实现`(>>=)`和`return`一个 list monad 的实例，或者至少有一种方法可以将它们与 do 块一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:15:10.593

您不能`Monad`为列表定义另一个实例，在某些情况下您可以定义一个新类型来解决这个问题，但是您必须手动将所有列表函数提升到新类型才能使用它们。

要仅使用您自己的`(>>=)`和`return`在 do-blocks 中，您可以使用带有 GHC 的语言扩展：

```
{-# LANGUAGE NoImplicitPrelude #-}
module ListMon where

import Prelude hiding ((>>=), return)

(>>=) :: [a] -> (a -> [b]) -> [b]
xs >>= foo = case xs of
               [] -> [undefined]
               [x] -> foo x ++ foo x
               ys -> take 10 $ concatMap foo $ take 5 ys

return :: a -> [a]
return x = [x,x,x]

someList :: [Int]
someList = do
    k <- [1 .. 4]
    h <- [2 .. 3]
    return (k + 12*h) 
```

导致

```
$ ghci ListMon
{- snip loading messages -}
[1 of 1] Compiling ListMon          ( ListMon.hs, interpreted )
Ok, modules loaded:
*ListMon> someList 
[25,25,25,37,37,37,26,26,26,38,38,38,27,27,27,39,39,39,28,28,28,40,40,40] 
```

随着`NoImplicitPrelude`, do-notation 的脱糖使用任何东西`(>>=)`并且`return`在范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T00:11:57.587

您可以将列表包装在新类型中

```
newtype MyList a = MyList { unMyList :: [a] } 
```

并为此包装类型声明您的实例

```
instance Monad MyList where
    return = MyList . myReturn
    (MyList m) >>= f = MyList . myBind m f 
```

现在只需将列表包装在 newtype 包装器中`MyList`（newtypes 只是语法糖，因此在编译时被删除）。

# c# - 在两个 Web 项目之间共享应用程序设置

> ID：11605031
> 
> 赞同：0
> 
> 时间：2012-07-23T00:06:13.727
> 
> 标签：c#, asp.net, .net

我有两个单独的 web 项目解决方案。我需要在两者中使用一个应用程序设置。我不想在两个 web.config 文件中复制这个值——想把它存储在一个地方（而**不是在 machine.config 中！**）。这两个 web 项目还有其他不同的 appSettings 并且它们的 web.config 文件完全不同。

是否有某种方式可以在两个 Web 项目之间以某种方式共享一个 appSetting？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:30:39.553

这个[链接](http://www.codeproject.com/Articles/8818/Using-the-File-attribute-of-the-appSettings-elemen)

解释了如何为某些设置引用另一个配置文件。配置文件不必与 web.config 文件存储在同一文件夹中，因此您可以与其他项目共享它。

# php - MVC 和动态标题

> ID：11605034
> 
> 赞同：3
> 
> 时间：2012-07-23T00:06:46.933
> 
> 标签：php, model-view-controller, seo

当您的网站使用 MVC 模式时，获得动态标题的最佳方式是什么？

我已经看到一些框架在控制器中设置了类似的标题，`$seo->setTitle('Title here...')`但是当您想要动态标题（例如产品页面上的产品名称）时，这并不好。

我正在考虑拥有一个 SEO 对象，在控制器中创建它，并在构造函数中拥有页面名称，并通过使用提供的页面名称，对象中的方法检索并设置 pageTitle 和 deciption 属性。

这会被认为是不好的做法还是违反了 MVC 的某些规则？如果是，有什么更好的方法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:19:16.090

页面标题的生成是*表示逻辑*的一部分，因此它应该在 MVC 设计模式的 View 部分中处理。

请记住，适当`View`的不是愚蠢的`Template`。相反，视图应该负责应用程序中的所有表示逻辑，并且能够处理多个模板。

其余的取决于您尝试应用哪种受 MVC 启发的模式。在 Model2 MVC 和 HMVC 模式视图中处于活动状态，并且能够从模型层请求信息。如果您实现 MVP 或 MVVM，它们包含一个被动视图，该视图从控制器获取信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:11:26.940

我看不出这样做有什么问题

```
$seo->setTitle($productName . " page title...."); 
```

$productName 变量可以很容易地使用。

# javascript - 用于下拉的 onChange() 第二次不起作用

> ID：11605038
> 
> 赞同：1
> 
> 时间：2012-07-23T00:07:51.893
> 
> 标签：javascript, forms, codeigniter, jquery-mobile, onchange

这很难用标题来概括。我将 CodeIgniter 与 jQuery Mobile 一起使用。我有一个带有下拉列表的页面（index.php），单击时会提交表单（onChange）。

```
 <select name="organiser_dropdown" onchange="this.form.submit()"> 
```

它工作正常。所以它让我毫无问题地进入下一页（view_events）。但是，当我按下移动设备（Samsung Galaxy S Plus）上的“返回”按钮，并从 index.php 的下拉列表中选择一个选项时，表单提交时，我会使用正确的信息转到正确的页面（view_events） ，然后它带我回到带有下拉列表的页面。

没有重定向，代码逻辑似乎是正确的。当我在桌面浏览器中测试它时，一切正常。

我几乎可以肯定问题是手机正在缓存页面，所以当我点击返回 index.php 时，它不会重新加载页面，并且不知何故这会破坏它？我认为这是缓存，因为页面似乎不需要时间来重新加载。

我使用了提交按钮而不是 onChange() 函数，一切正常。这也表明这是缓存的问题。

我使用 jQuery 来监听 onChange 事件并通过单击隐藏按钮来提交表单。它工作没有问题，但它加载了下拉列表仍然出现在电话 GUI 上的页面。出于可用性的原因，这似乎有点奇怪，如果我把它作为一个选项的话。

它不是原生手机应用程序，它是一个移动网站。

在 CodeIgniter 中，控制器正在使用具有 1 个参数的函数，该参数是从下拉列表中选择的项目：

```
public function view_events($organiser_type = '') {...} 
```

当 *$organiser_type* 没有通过 url 发送时，我有一段代码从 POSTed 表单中检索值：

```
if($this->input->post('organiser_dropdown')) {
        $organiser_type = $this->input->post('organiser_dropdown');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:09:58.463

我有点想通了这里的问题。我认为一旦我按下手机上的后退按钮，jQuery Mobile 并没有完全执行 index.php 页面。

我把它放在我所有的链接中，以强制加载没有 ajax 的页面：

```
data-ajax="false" 
```

可以在此处找到有关此的更多信息：http: [//jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)

# google-app-engine - GQL 查询未返回 StringProperty 查询平等性测试的结果

> ID：11605039
> 
> 赞同：0
> 
> 时间：2012-07-23T00:07:54.203
> 
> 标签：google-app-engine, google-cloud-datastore, gql, bulkloader

```
class MyEntity(db.Model):
    timestamp = db.DateTimeProperty()
    title = db.StringProperty()
    number = db.FloatProperty()

db.GqlQuery("SELECT * FROM MyEntity WHERE title = 'mystring' AND timestamp >= date('2012-01-01') AND timestamp <= date('2012-12-31') ORDER BY timestamp DESC").fetch(1000) 
```

这应该在应用引擎上获取约 600 个实体。在我的开发服务器上，它按预期运行，构建 index.yaml，我上传它，在服务器上测试，但在应用引擎上它不返回任何内容。

```
Index:
- kind: MyEntity
  properties:
  - name: title
  - name: timestamp
    direction: desc 
```

我尝试在数据存储查看器上拆分查询，以查看问题出在哪里以及时间戳约束按预期工作。该查询`WHERE title = 'mystring'`何时应该返回一堆实体，但什么也不返回。

我隐约记得您必须使用属性和运算符之间的空格进行调用的繁琐过滤`.filter("prop =",propValue)`，但这是一个 GqlQuery，所以不是那样的（我也用 GQL 尝试过这种格式）。

有谁知道我的问题是什么？

我能想到的一件事：在我的开发服务器上创建并上传新索引之前，我通过 BulkLoader.py 将 MyEntity 实体列表添加到应用程序中。那会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:30:29.900

你写的最后一行可能是问题所在。

实际真实数据存储中的实体缺少查询所需的索引。

据我所知，当您添加新索引时，App Engine 应该为您重建索引。这可能要花点时间。您可以检查您的管理页面以检查索引的状态，看看它是否仍在构建中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:12:49.263

事实证明[，App Engine SDK 提供的批量加载程序中存在一个小错误](http://aleatory.clientsideweb.net/2012/08/20/financial-charts-app-engine-tutorial-bulkloading-data/)- 基本上自动生成的配置将字符串转换为`db.Text`，如果您希望这些字段被索引，这并不好。正确的 import_transform 指令应该是：

```
transform.none_if_empty(str) 
```

这将指示 App Engine 将上传的字段索引为`db.StringProperty()`.

# java - 具有多态泛型的映射

> ID：11605043
> 
> 赞同：0
> 
> 时间：2012-07-23T00:08:45.333
> 
> 标签：java, generics, map, casting, polymorphism

我有一个方法（我们称之为`doSomething`），它接受 a`Map<String,Object>`并且我想传入 a `Map<String,Foo>`（当然，Foo 扩展了 Object）。当我编译时，它说`doSomething`不能应用于给定的类型。这是我的代码：

```
 public class FooMapChoo {

        private Map<String, Foo> map;

        public void doSomething(Map<String,Object>) {
        }

        public static void main(String...args) {
            doSomething(map);
        }

    } 
```

编译器输出：

```
 method doSomething in class FooMapChoo cannot be applied to given types;
                    doSomething(map);
                    ^
      required: Map<String,Object>
      found: Map<String,Foo> 
```

在我看来，Foo 应该多态地转换为 Object。我也尝试过强制转换`map`为`Map<String,Object>`，它只是告诉我“不可转换的类型”。我能做些什么来解决多态性问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:10:07.430

您需要使用通配符

```
Map<String, ? extends Object> 
```

# python - Python MySQLdb，简单的聊天室/留言簿应用程序

> ID：11605048
> 
> 赞同：0
> 
> 时间：2012-07-23T00:09:12.447
> 
> 标签：python, mysql, mysql-python

我在 SO 上浏览了一些关于 MySQL 和 Python 的其他问题。有几件事让我望而却步，因为我对 Python 还很陌生。

首先，我试图让一个简单的留言簿应用程序工作。它接受已发布的变量并将它们放入 MySQL 数据库中。看一看：

```
con = MySQLdb.connect (host = "localhost",
        user = "Chat",
        passwd = "myPass",
        db = "Chatserver")
cursor = con.cursor()
cursor.execute ("INSERT INTO guestbook (name,message) VALUES(%s,%s)",(name,greeting)) 
```

好的，所以一些关于 SO 的教程和答案在 SQL 查询周围有很多引号，我不知道为什么会这样。我已经用 1 个引号尝试过，我已经用 3 个引号尝试过，但它永远不会起作用。没有异常回调，代码似乎可以运行，但从未将任何记录输入数据库。

所以我的两个问题是，封装查询时需要多少个引号，为什么我的脚本没有向数据库添加任何内容但不报告任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:43:02.787

好的，这个答案[Can't execute an INSERT statement in a Python script via MySQLdb](https://stackoverflow.com/questions/5931771/cant-execute-an-insert-statement-in-a-python-script-via-mysqldb)帮助我弄清楚了。

您必须在查询末尾添加此内容。

```
cursor.execute(...)
con.commit()  //this is what makes it actually do the execution? 
```

# asp.net-mvc-3 - 使用 knockoutjs 创建链接

> ID：11605055
> 
> 赞同：3
> 
> 时间：2012-07-23T00:10:45.287
> 
> 标签：asp.net-mvc-3, knockout.js

我的视图模型“IdOfInvitedSocialCompaigns”中有一个可观察的数组，该属性包含 id 数组，我想创建这样的链接：

```
 @Html.ActionLink("Compaign","Confirmation", new {socialbuzzCompaignId = id}) 
```

我怎样才能用 knockoutjs 建立这样的链接，这是 viewmodel 的一部分：

```
 function DashboardViewModel() {
    var self = this;        
    self.IdOfInvitedSocialCompaigns = ko.observableArray([]);
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T02:07:31.373

如果您获得了转义权，您也许可以将部分 Razor 生成的 URL 直接构建到您的绑定标记中，但这会很混乱。我可能会在 DashboardViewModel 上定义一个基本 URL 属性，该属性由 DOM 上的页面填充，如下所示：

```
dashVM.urls.confirmCampaignUrl = '@(Url.Action("Campaign", "Confirmation"))'; 
```

然后有一个获取特定 URL 的函数：

```
self.getCampaignConfirmationUrl = function(id) {
    return self.urls.confirmCampaignUrl + '/' + id;
}; 
```

像这样绑定：

```
<!-- ko foreach: IdOfInvitedSocialCompaigns  -->
<a data-bind="attr: { href: dashVM.getCampaignConfirmationUrl($data) }">Confirm</a>
<!-- /ko --> 
```

# python - Python：对 numpy 数组的高效操作

> ID：11605060
> 
> 赞同：0
> 
> 时间：2012-07-23T00:11:32.497
> 
> 标签：python, numpy

假设我有一个 numpy 数组 x：

```
x = array([[  3,   2,   1],
           [  3,  25,  34],
           [ 33, 333,   3],
           [ 43,  32,   2]]) 
```

*我想在不明确编写for循环*的情况下执行以下操作，即说一种使用自动内置循环的方法；

1) 将第二列替换为全为 1 的列，即

```
x = array([[  3,   1,   1],
           [  3,   1,  34],
           [ 33,   1,   3],
           [ 43,   1,   2]]) 
```

2）在原始数组中，将第 3 列替换为第 2 和第 3 的乘积，即

```
x = array([[  3,   2,   1*2],
           [  3,  25,  34*25],
           [ 33, 333,   3*333],
           [ 43,  32,   2*32]]) 
```

3）最后，我想根据条件替换原始数组中的第二列，即

```
x[1] = 0  if x[0] > 5 else 4 
```

即数组现在看起来像：

```
x = array([[  3,   4,   1],
           [  3,   4,  34],
           [ 33,   0,   3],
           [ 43,   0,   2]]) 
```

有什么建议么 ？谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:33:54.547

关于 numpy 的文档非常值得一读，因为这是相当基本的东西......

1.  `x[:,1]`= 1
2.  `x[:,2] *= x[:,1]`
3.  `x[:,1] = np.where( x[:,0] > 5, 0, 4 )`

# javascript - jQuery error() 函数在 IE 中不起作用

> ID：11605062
> 
> 赞同：0
> 
> 时间：2012-07-23T00:12:06.230
> 
> 标签：javascript, jquery, internet-explorer, error-handling

我想显示两张我不知道它们何时生成的图像。所以我想使用 jquery 错误函数来继续检查图像是否存在，并显示每个图像。以下代码适用于除 IE 之外的所有浏览器。为什么它在 IE 上不起作用，非常感谢您的帮助。

```
<style type="text/css">
DIV#loader {
    width: 500px;
    height: 500px;
    overflow: hidden;
}

DIV#loader.loading {
    background: url(spinner.gif) no-repeat center center;
}
</style>

<script type="text/javascript">
$(document).ready(function() {
    var image_names = new Array(2);
    image_names[0] = 'a.jpg';
    image_names[1] = 'b.jpg';
    var divs = document.getElementsByTagName("div");
    for ( var i = 0; i < divs.length; i++) {
        showImage(image_names[i], divs[i]);
    }
});

function showImage(src, div) {
    var img = new Image();
    $(img).load(function() {
        $(this).hide();
        $(div).removeClass('loading').append(this);
        $(this).fadeIn();
    }).error(function() {
        setTimeout(function() {
            $(img).attr('src', src);
        }, 2000);
    }).attr('src', src);
}
</script> 
```

这是 HTML 正文

```
<body>
<h1>Image Loading</h1>
<div id="loader" class="loading"></div>
<div id="loader" class="loading"></div>
</body> 
```

如果页面第一次加载时不存在，IE似乎不知道图像是生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:28:28.597

缓存导致了问题。将源代码更改为：

```
$(img).attr('src', src + "?" + (new Date().getTime())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:37:28.930

这是`$(document).ready({})`一部分；对我来说，在 ie 中引发错误。`$(function(){});` 至少在 IE 中将其更改为似乎对我有用。

# android - Android 项目中奇怪的 Lint 错误

> ID：11605063
> 
> 赞同：1
> 
> 时间：2012-07-23T00:12:28.440
> 
> 标签：android, android-lint

因为我今天更新了我的 Android SDK，所以我的项目中出现了一些奇怪的 Lint 错误。该活动包含一个文本视图。一切正常，但如果我想使用 .setTextSize(float size) 更改代码中视图的文本大小，我会遇到其他行（以及其他独立方法）错误，即调用需要特定的 API 级别。但这是像 string.isEmpty() 这样的调用，它从 API 级别 1 开始可用。我错过了什么？而且我知道，我也可以在 xml 文件中设置文本大小，但我想在运行时更改它。

有任何想法吗？谢谢！

最好的问候托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:26:20.557

我想我前段时间遇到过类似的事情（废话 Lint 错误）......你在使用 Eclipse 吗？如果是这样，您可以尝试以下方法：

1.  重启 Eclipse
2.  清理你的项目（项目->清理...）
3.  单击“Runs Android Lint...”按钮（它在工具栏中，在“虚拟设备管理器”和“新项目向导”之间）

我不记得我到底做了什么来解决这个问题，我希望它可以工作，但祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:02:18.777

在最新版本中，我有几次 lint 错误是不正确的。（在带有分号的行上缺少分号等）。

在这种情况下，您可以右键单击 lint 错误警告或左侧的编号，然后选择“Clear All Lint Markers”。

这将允许您编译一次文件，如果可行，Lint 似乎又开始正常运行了。

# android - 为什么 R.color.white 不能在 Color.WHITE 的地方工作？

> ID：11605066
> 
> 赞同：3
> 
> 时间：2012-07-23T00:12:43.853
> 
> 标签：android, android-layout, android-resources

我正在尝试设置一个非常简单的布局的背景：

```
 LinearLayout ll = (LinearLayout) findViewById(R.id.simple_layout); 
```

这有效：

```
 ll.setBackgroundColor(Color.WHITE); 
```

但这不会：

```
 ll.setBackgroundColor(R.color.white); 
```

是的，我验证了它`R.color.white`是在 .xml 文件下的 colors.xml 文件中定义的`/res/values`。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T00:16:25.023

你需要使用`ll.setBackgroundResource(R.color.white)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:22:59.253

正如@Ali 指出的那样，当您在 XML 中设置它时，它就会成为一种资源。这显然很令人困惑，因为您不将其视为资源，而是将其视为价值。但就像所有其他资源一样，它是一种资源。所以是的，你必须使用 setBackgroundResource()

# javascript - 为什么 JSHint 反对位运算符？我应该如何表达这个代码？

> ID：11605068
> 
> 赞同：45
> 
> 时间：2012-07-23T00:12:57.557
> 
> 标签：javascript, jslint, jshint

我正在使用这段 JavaScript 来生成 UID：

（原来的：）

```
//If ID has not been defined then generate a new unique ID.
if(!id){
    id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });
} 
```

（格式化以便可以阅读：）

```
// If ID has not been defined then generate a new unique ID.
if (!id) {
    id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(
        /[xy]/g, 
        function (c) { 
            var r = Math.random() * 16 | 0, 
                v = c == 'x' ? r : (r & 0x3 | 0x8); 
            return v.toString(16); 
        }
    );
} 
```

JSHint 不喜欢使用按位 OR 和 AND 运算符。我想知道如何将其重写为更“标准友好”。

编辑： JSHint 状态：

```
Line 8: id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });
Unexpected use of '|'.

Line 8: id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });
Expected '===' and instead saw '=='.

Line 8: id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });
Unexpected use of '&'.

Line 8: id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });
Unexpected use of '|'. 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-23T00:17:05.660

放

```
/*jshint bitwise: false*/ 
```

在文件的顶部

可用选项列表：http: [//jshint.com/docs/options/](http://jshint.com/docs/options/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-07-01T14:44:56.360

根据[JSHint 文档](http://jshint.com/docs/options/#bitwise)，这是因为

> “按位运算符在 JavaScript 程序中非常少见”

正如其他人所提到的，您可以禁用`bitwise`JSHint 选项来消除警告。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-23T00:19:41.520

您已经将这么多代码塞进了一行（为什么？？），以至于您无法分辨 jshint 向您指出了什么。我重新格式化了代码，我看到了这个：

```
var r = Math.random() * 16 | 0, 
```

在那里做什么`| 0`？这是一个不必要的无操作。更新：似乎是一种整合浮点数的方法。

Jshint似乎不喜欢其他东西，但至少摆脱了这个。并将您的代码传播出去，以便您（和其他人）可以阅读它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-17T14:57:05.567

关于“为什么反对按位运算符”。我喜欢[TSLint 文档中的这个](https://palantir.github.io/tslint/rules/no-bitwise/)

> 位运算符通常是拼写错误（...）它们也可能表明代码过于聪明，从而降低了可维护性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-21T10:58:08.177

这对我来说很好：

```
return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,
    function(c: string) {
        var r = Math.floor(Math.random() * 16), 
            v = c === 'x' ? r : (r % 4 + 4);
        return v.toString(16);          
    }).toUpperCase(); 
```

# objective-c - 在 Xcode 中访问数据库时 SQLite 不会准备查询

> ID：11605072
> 
> 赞同：0
> 
> 时间：2012-07-23T00:13:31.093
> 
> 标签：objective-c, ios, database, xcode, sqlite

我是一名初学者 iPhone 开发人员，试图从 Xcode 4.3 中的 sqlite 数据库中获取信息。我的数据库（名为 DB_Info.sqlite）与 .h 和 .m 文件位于同一目录中，并且我还将数据库拖到 Xcode 左侧栏中的文件夹部分。

您能否快速查看我的代码并让我知道我的错误在哪里？我在最后一个 if 语句中使用 NSLogs 来确定问题发生的位置，并且它写在注释中。非常感谢您！

```
#import <sqlite3.h>
@implementation Player
{
    sqlite3 *DB_Info;
    NSString *databasePath;
    NSString *docsDir;
    NSArray *dirPaths;
}

-(Player*)createPlayer:(NSString*)playerName
{        

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"DB_Info.sqlite"]];
    const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt *statement;

    if (sqlite3_open(dbpath, &DB_Info) == SQLITE_OK) { //works fine

        NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM playerlist WHERE fullName=\"%@\"", playerName];

        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(DB_Info, query_stmt, -1, &statement, NULL) == SQLITE_OK) { //PROBLEM: This is where the problem is, and the if statement never goes through
        //....rest of code here
        } else {
        NSLog(@"Error");
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:39:53.237

首先，不仅仅是说“错误”，而是记录 SQL 错误消息

```
NSLog(@"%s SQL error '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(database), sqlite3_errcode(database));` 
```

它会准确地告诉你出了什么问题。人们第一次做SQL项目的一个常见错误是找不到表。如果是这样，请继续阅读。（如果没有，请随意忽略其余部分。）

其次，您正在 Documents 文件夹中查找数据库。您是否在某个时候明确地将它从您的捆绑包复制到您的 Documents 文件夹中？还是您以编程方式创建它？但是，如果您提前准备好它，它不会在 Documents 文件夹中，直到您将它复制到那里。

第三，我还建议您考虑使用`sqlite3_open_v2`而不是`sqlite3_open`. 您正在检查这是否是 SQLITE_OK，但这可能会给人一种错误的安全感。如果`sqlite3_open`数据库不存在，它将创建一个数据库，这显然不是您的意图。在您使用此方法之前，您的应用程序可能应该从捆绑包中复制数据库或为您创建数据库和表（并且您没有显示，所以我不确定您是否正在这样做）。无论如何，`sqlite3_open_v2`如果数据库不存在，该函数将不会创建数据库，除非您通过包含`SQLITE_OPEN_CREATE`. 因此，如果找不到，类似以下内容将不会创建数据库：

```
if (sqlite3_open_v2(dbpath, &DB_Info, SQLITE_OPEN_READWRITE, NULL) == SQLITE_OK) { 
```

如果为您创建了一个空白数据库，我建议您通过模拟器菜单上的“重置内容和设置”重置您的模拟器，或者明确删除该应用程序，这样任何可能已经创建的空白数据库都可以被移除。如果您在设备上运行此应用程序，请删除该应用程序并重新安装。

四、如果已经提前创建了数据库，是否确认数据库已经包含在“Copy Bundle Resources”设置中？例如：

![复制捆绑资源](../Images/f8314906fd26ba2a7e3ce3c3a8b2b73c.png)

第五，如果您在模拟器上运行应用程序，您可以随时浏览模拟器的文件结构并确保您的文件在您认为的位置。您还可以运行 Mac OS`sqlite`程序来检查模拟器正在使用的数据库，以确保一切正常。您甚至可以直接在模拟器使用的数据库中测试您的 SQL，这对于诊断目的很有用。（或者，如果您不喜欢基于 Mac 文本的`sqlite`程序，您也可以购买/下载图形工具，例如[Base](http://itunes.apple.com/us/app/base/id402383384)。）在执行此操作之前，您可能首先需要配置您的 Mac，以便您可以轻松浏览模拟器的文件要求您启动终端程序，然后发出命令：

```
chflags nohidden ~/Library 
```

然后您可以浏览到“~/Library/Application\ Support/iPhone\ Simulator/5.1/Applications/”，然后浏览您拥有的各种应用程序并确保您的 db 文件在那里。

# java - 将鼠标保持在 Ellipse2D 内

> ID：11605073
> 
> 赞同：4
> 
> 时间：2012-07-23T00:13:56.353
> 
> 标签：java, position, mouse-cursor

我知道如何将我的鼠标（我的 g.draw(mouseX, mouseY) 光标）保持在 Ellipse2D / Shape...</p>

```
@Override
public void mouseMoved(MouseEvent e) {
    int x = e.getX(), y = e.getY();
    if(shape.contains(x, y)) {
        mouseMoveX = e.getX();
        mouseMoveY = e.getY();
    }
} 
```

…但是当鼠标离开所述形状时，这会完全锁定移动（直到它返回）。即，即使实际光标四处移动，它也会保持在相同的位置。即使实际光标不在，我希望鼠标能够在椭圆周围移动。你们中的许多人可能仍然感到困惑，很抱歉，如果需要更多解释，我很乐意提供帮助。另外，这里的第一个问题，如果我违反任何规则，请告诉我！谢谢。

PS：抱歉任何迟到的回复，目前在拨号上网:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:55:35.833

最简单的方法是使用[`java.awt.Robot`](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)类，它允许您直接控制鼠标和键盘：

```
import java.awt.Robot;

...

Robot robot = new Robot(<your GraphicsDevice>);

...

@Override
public void mouseMoved(MouseEvent e) {
    int x = e.getX(), y = e.getY();
    if(shape.contains(x, y)) {
        mouseMoveX = e.getX();
        mouseMoveY = e.getY();
    }
    else {
        robot.mouseMove(mouseMoveX,mouseMoveY); // Assuming these are the previous coordinates.
    }
} 
```

**编辑：**好的，试试这个：

```
@Override
public void mouseMoved(MouseEvent e) {
    int x = e.getX(), y = e.getY();
    if (shape.contains(x, y)) {
        mouseMoveX = e.getX();
        mouseMoveY = e.getY();
    }
    else {
        // get angle of rotation
        double r = Math.atan2(y-shape.getCenterY(),x-shape.getCenterX());
        mouseMoveX = (int) (shape.getWidth()/2 * Math.cos(r) + shape.getCenterX());
        mouseMoveY = (int) (shape.getHeight()/2 * Math.sin(r) + shape.getCenterY());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:52:17.050

根据位置设置光标的示例：

```
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Ellipse2D;

import javax.swing.*;

public class CursorMagic extends JPanel {
   private static final int PREF_W = 600;
   private static final int PREF_H = 400;
   private static final Color ELLIPSE_COLOR = Color.red;
   private static final Color ELLIPSE_FILL_COLOR = Color.pink;
   private static final Stroke ELLIPSE_STROKE = new BasicStroke(3f);
   private Ellipse2D ellipse = new Ellipse2D.Double(PREF_W / 4, PREF_H / 4, PREF_W / 2, PREF_H / 2);

   public CursorMagic() {
      MyMouseAdapter mouseAdapter = new MyMouseAdapter();
      addMouseMotionListener(mouseAdapter);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
      g2.setColor(ELLIPSE_FILL_COLOR);
      g2.fill(ellipse);
      g2.setColor(ELLIPSE_COLOR);
      g2.setStroke(ELLIPSE_STROKE);
      g2.draw(ellipse);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private class MyMouseAdapter extends MouseAdapter {
      @Override
      public void mouseMoved(MouseEvent mEvt) {
         if (ellipse.contains(mEvt.getPoint())) {
            setCursor(Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR));
         } else {
            setCursor(null);
         }
      }
   }

   private static void createAndShowGui() {
      CursorMagic mainPanel = new CursorMagic();

      JFrame frame = new JFrame("CursorMagic");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# jscript - TestComplete 脚本检查点和比较

> ID：11605074
> 
> 赞同：0
> 
> 时间：2012-07-23T00:14:02.627
> 
> 标签：jscript, testcomplete

因此，我对测试完整脚本的了解有限。似乎应该查看对象查看器以查看您的窗口，并通过这些对象的名称映射并单击选择或填充它们的字段来使用 UI 功能。

我有一个关于如何使用 JSscripting 测试进行断言的问题。如果我想查看某个窗口是否看起来像过去的窗口，我一直在做的是通过当时的关键字测试制作一个检查点。我觉得我应该通过 api 来做到这一点。是否有一个区域可以通过代码解释如何执行此操作，而不是使用关键字检查点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:52:08.467

Bob，检查点的想法不仅限于关键字测试。您也可以在脚本中使用检查点。录制脚本时，您只需通过录制工具栏创建所需的检查点类型（我猜您需要区域检查点），您将生成所需的脚本。基于此脚本，您将了解如何从脚本调用检查点。

至于文档，[“区域检查点”](http://support.smartbear.com/viewarticle/29469/)帮助主题很好地解释了基础知识，并提供了其他主题的链接以供阅读。“[创建区域检查点”](http://support.smartbear.com/viewarticle/27551/)帮助主题逐步显示了该过程。

我希望这有帮助。让我知道是否有不清楚的地方。

# c# - 如何将依赖的 dll (MySql.Data.dll) 与我创建的 exe 合并？

> ID：11605075
> 
> 赞同：2
> 
> 时间：2012-07-23T00:14:46.863
> 
> 标签：c#, .net, dll, merge, odbc

我创建了一个应用程序，它需要在计算机上安装 ODBC 连接器才能工作。由于我的应用程序需要连接到 mysql 数据库，它只需要一个 dll 文件 (MySql.Data.dll) 即可工作。

当我将此 dll 放在与应用程序相同的位置时，它可以正常工作。现在我想合并这个dll，这样最后我就只有一个可执行文件了？

如何将此依赖的 DLL 与我的可执行文件合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:20:12.260

你不能那样做，所有的程序集都会从某个地方被引用......

*   从 .NET 框架路径，如：

> System.Net.dll

*所有 .NET 应用程序都需要 .NET Framework 程序集才能运行，这就是想要执行您的应用程序的用户需要安装 .NET Framework 的原因。因此，您的应用程序知道在哪里可以找到此程序集，并且不需要您将`System.Net.dll`程序集放在与您的应用程序相同的路径中以成功运行。*

*   或者像您的应用程序那样从外部路径。

*您的应用知道在哪里可以找到要运行的 .NET Framework 程序集，但请稍等！它还需要一些额外的 dll 才能运行，这就是为什么您`MySql.Data.dll`在编译应用程序时获得相同路径的原因。*

**可能的解决方案：**

**1.**如果您只想制作一个可执行文件，请尝试使用**Spoon Studio**（完整破解版很难找到，而且价格昂贵）。这将使您能够嵌入任何您想要的程序集或所有 .NET Framework，因此这将使您的应用程序不依赖于执行您的应用程序的用户计算机中的任何 .NET Framework 安装或所需的程序集。

**2.**尝试使用`ILMerge`，但请阅读以下链接以了解您的代码是否符合要求。

**如何和重要信息：**

[http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)

[http://www.blackwasp.co.uk/ILMerge.aspx](http://www.blackwasp.co.uk/ILMerge.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:31:25.843

如果它是纯 .NET 模块，您可以尝试该`ilmerge`实用程序。

# jasper-reports - iReport - 尝试根据至少一个值为 1 的另一组来计数组

> ID：11605077
> 
> 赞同：2
> 
> 时间：2012-07-23T00:14:57.553
> 
> 标签：jasper-reports, ireport

我正在尝试使用以下信息计算报告的值：

主题组有多个事件组，每个事件都有一个值为 1 或 0 的字段。我试图弄清楚如何计算至少有一个值为 1 的事件组的主题组的数量。

我曾尝试拆分为多个变量，但似乎无法正确计算或重置。我可以返回所有事件的计数和所有值为 1 的事件的总和。

我的数据表明 5 个事件的值为 1，但我需要返回主题数，即 4。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:34:02.703

试试这个 - 这是 2 个组和一个详细值。我们获取内部组中详细值的总和，然后计算该内部组的总和 > 0 的值。当您将其放入 iReport 时，请检查重置类型/组和增量类型/组。也有一些示例数据。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report3" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="9c7e3951-509f-4aa7-8f30-bc6196708d3d">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[SELECT 'I1' AS GROUP_1,
  'J1' AS GROUP_2,
  0 AS DETAIL_VALUE
FROM DUAL

UNION

SELECT 'I1' AS GROUP_1,
  'J2' AS GROUP_2,
  1 AS DETAIL_VALUE
FROM DUAL

UNION

SELECT 'I2' AS GROUP_1,
  'J1' AS GROUP_2,
  1 AS DETAIL_VALUE
FROM DUAL

UNION

SELECT 'I2' AS GROUP_1,
  'J2' AS GROUP_2,
  1 AS DETAIL_VALUE
  FROM DUAL

UNION

SELECT 'I2' AS GROUP_1,
  'J3' AS GROUP_2,
  1 AS DETAIL_VALUE
FROM DUAL

UNION

SELECT 'I3' AS GROUP_1,
  'J1' AS GROUP_2,
  0 AS DETAIL_VALUE
FROM DUAL

UNION

SELECT 'I3' AS GROUP_1,
  'J2' AS GROUP_2,
  0 AS DETAIL_VALUE
FROM DUAL]]>
    </queryString>
    <field name="GROUP_1" class="java.lang.String"/>
    <field name="GROUP_2" class="java.lang.String"/>
    <field name="DETAIL_VALUE" class="java.math.BigDecimal"/>
    <variable name="GROUP_2_SUM" class="java.math.BigDecimal" resetType="Group" resetGroup="GROUP_1" calculation="Sum">
        <variableExpression><![CDATA[$F{DETAIL_VALUE} == 1 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="GROUP_1_TALLY" class="java.math.BigDecimal" resetType="Group" resetGroup="GROUP_1" calculation="Count">
        <variableExpression><![CDATA[$V{GROUP_2_SUM} > 0 ? 1 : 0]]></variableExpression>
    </variable>
    <group name="GROUP_1">
        <groupExpression><![CDATA[$F{GROUP_1}]]></groupExpression>
        <groupHeader>
            <band height="25">
                <textField>
                    <reportElement uuid="5216d0ad-f2f0-43ae-b344-95019a7a99eb" x="0" y="0" width="100" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{GROUP_1}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="25">
                <textField>
                    <reportElement uuid="e4ac638c-f609-45b1-94ba-27d9f5d9c28c" x="455" y="0" width="100" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$V{GROUP_2_SUM}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>
    <group name="GROUP_2">
        <groupExpression><![CDATA[$F{GROUP_2}]]></groupExpression>
        <groupHeader>
            <band height="25">
                <textField>
                    <reportElement uuid="437a9d72-5916-493a-b1f1-c582e2ad0f64" x="20" y="0" width="100" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{GROUP_2}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="25"/>
        </groupFooter>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <detail>
        <band height="25" splitType="Stretch">
            <textField>
                <reportElement uuid="21cd5fb1-94a1-448e-ab53-0fa846fedee5" x="40" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{DETAIL_VALUE}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <summary>
        <band height="42" splitType="Stretch">
            <textField>
                <reportElement uuid="624d0f87-ce9a-44d6-8e2c-be0ec7e65da2" x="455" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{GROUP_1_TALLY}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport> 
```

# ios - 表格视图上的 iOS 浮动按钮

> ID：11605085
> 
> 赞同：3
> 
> 时间：2012-07-23T00:17:12.940
> 
> 标签：ios, image, button

是否可以在表格视图上添加一个小的浮动“设置”按钮或图像按钮？我在顶部的导航栏上有按钮，我不想拥挤或删除任何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:24:03.153

这可以通过将其作为子视图添加到主窗口来实现。另一种选择和我的首选方法：拥有一个主包装视图，表格视图可以作为子视图添加到该包装视图中，然后将您的按钮添加为包装视图内的另一个子视图，瞧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:11:13.107

要使用此方法，您应该继承 UIViewController 并在其中添加 tableview

(1)在viewDidLoad()中给**self.tableview**添加按钮

```
button.frame = CGRectMake(0, 0, 50, 50);
[self.tableview addsubview:button];  
[self.tableview bringSubviewToFront:button]; 
```

(2)设置tableview委托

```
self.tableview.delegate = self; 
```

(3)在scrollViewDidScroll委托中添加和更新按钮位置到**self.tableview**

```
button.frame = CGRectMake(0, 0, 50, 50);
[self.view addSubview:button];
[self.view bringSubviewToFront:button]; 
```

瞧~

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T00:23:52.470

也许在底部添加带有按钮的工具栏会是更好的方法？

# java - 带数组的迭代器循环

> ID：11605091
> 
> 赞同：0
> 
> 时间：2012-07-23T00:19:21.863
> 
> 标签：java, foreach

我只是有一个我确定是一个非常简单和快速的问题......所以假设我有一个 Account 类，如下所示：

```
import java.text.NumberFormat;

public class Account
{
    private final double RATE = 0.03; // interest rate of 3.5%
    private long acctNumber;
    private double balance;
    private String name;

    //-----------------------------------------------------------------
    // Sets up the account by defining its owner, account number,
    // and initial balance.
    //-----------------------------------------------------------------
    public Account (String owner, long account, double initial)
    {
        name = owner;
        acctNumber = account;
        balance = initial;
    }
    //----------------------------------------------------------------- 
    // Deposits the specified amount into the account. Returns the
    // new balance.
    //-----------------------------------------------------------------
    public double deposit (double amount)
    {
        balance = balance + amount;
        return balance;
    }
    //-----------------------------------------------------------------
    // Withdraws the specified amount from the account and applies
    // the fee. Returns the new balance.
    //-----------------------------------------------------------------
    public double withdraw (double amount, double fee)
    {
        balance = balance - amount - fee;
        return balance;
    }
    //-----------------------------------------------------------------
    // Adds interest to the account and returns the new balance.
    //-----------------------------------------------------------------
    public double addInterest ()
    {
        balance += (balance * RATE);
        return balance;
    }
    //-----------------------------------------------------------------
    // Returns the current balance of the account.
    //-----------------------------------------------------------------
    public double getBalance ()
    {
        return balance;
    }
    //-----------------------------------------------------------------
    // Returns a one-line description of the account as a string.
    //-----------------------------------------------------------------
    public String toString ()
    {
        NumberFormat fmt = NumberFormat.getCurrencyInstance();
        return acctNumber + "\t" + name + "\t" + fmt.format(balance);
    }
} 
```

我创建了此处显示的 Bank 类...

```
public class Bank 
{   
    Account[] accounts;// = new Account[30];
    int count=0;
    String name;

    public Bank(String name)
    {
        this.name = name; 
        accounts = new Account[30];
    }
    public void addAccount(Account acct)
    {
        accounts[count] = acct;
        count++;
    }
    public void addInterest()
    {
        //for (Account acct : accounts)
            //acct.addInterest();
        for(int i = 0; i < count; i++)
            accounts[i].addInterest();
    }
} 
```

如果我尝试将 addInterest() 方法与您看到的 for (Account acct: accounts) 循环一起使用，则会收到错误消息。有人可以告诉我为什么会这样吗？我认为这些循环是等价的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:35:34.657

可迭代数组上的 for 循环迭代所有 30 个元素，而不仅仅是您真正添加的元素。

您可以根据需要使用`ArrayList<Account>`和添加元素。这允许您省略计数字段：

```
public class Bank 
{   
    ArrayList<Account> accounts = new ArrayList<Account>();
    String name;

    public Bank(String name)
    {
        this.name = name; 
    }
    public void addAccount(Account acct)
    {
        accounts.add(acct);
    }
    public void addInterest()
    {
        for (Account acct : accounts)
            acct.addInterest();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:31:46.100

您必须初始化 Account 数组

所以你可能想把它改成：

```
public void addInterest()
    {
        //for (Account acct : accounts)
            //acct.addInterest();
        for(int i = 0; i < count; i++)
            accounts[i].addInterest();
    } 
```

像这样：

```
 public void addInterest()
        {
            for (Account acct : accounts)    {
            acct= new Account("John",1234596069,200.00);
            acct.addInterest();
            }
//            for(int i = 0; i < count; i++)
//                accounts[i].addInterest();
        } 
```

本质上，您必须在调用方法之前初始化数组变量。

# android - 从 Android 的内部存储中加载文件

> ID：11605094
> 
> 赞同：0
> 
> 时间：2012-07-23T00:19:32.117
> 
> 标签：android

我正在尝试以一种允许用户退出应用程序，甚至关闭手机，但在使用应用程序时仍可以访问此字符串的方式，将字符串保存到/从内部存储中加载。

当我退出应用程序并重新进入时，它不会加载我之前存储的字符串。即使我重新启动手机，我也需要它来加载以前的字符串。这是我到目前为止所拥有的：

```
EditText sharedData;
TextView dataResults;
FileOutputStream fos;
String FILENAME = "InternalString";

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sharedpreferences);
    setupVariables();
}

private void setupVariables() {
    // TODO Auto-generated method stub
    sharedData = (EditText) findViewById(R.id.editText_SharedPrefs);
    dataResults = (TextView) findViewById(R.id.textView_LoadSharedPrefs);
    Button save = (Button) findViewById(R.id.button_save);
    Button load = (Button) findViewById(R.id.button_load);
    save.setOnClickListener(this);
    load.setOnClickListener(this);
    try {
        fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
        fos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button_save:
        String data = sharedData.getText().toString();
        try {
            fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
            fos.write(data.getBytes());
            fos.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    case R.id.button_load:
        String collected = null;
        FileInputStream fis = null;
        try {
            fis = openFileInput(FILENAME);
            byte[] dataArray = new byte[fis.available()];
            while(fis.read(dataArray) != -1){
                collected = new String(dataArray);
            }
            dataResults.setText(collected);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                fis.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:27:57.163

根据您使用的“字符串”类型，您应该使用 SharedPreferences 而不是写入文件......除非它是大量数据。

```
getSharedPreferences(getPackageName() , MODE_PRIVATE).edit().putString("myString").commit(); 
```

这将通过电话电源循环持续存在。但是，如果您卸载该应用程序，它将丢失（这可能是一件好事）。

这是向您开放的所有各种数据保存可能性的 Android 文档...

[在 Android 上保存东西](http://developer.android.com/guide/topics/data/data-storage.html)

# python - Python：如何在 setup.py 中包含脚本的 exe 文件

> ID：11605096
> 
> 赞同：1
> 
> 时间：2012-07-23T00:19:49.157
> 
> 标签：python, python-3.x

我正在尝试使用 Zed A.Shaw 的书 Learn Python the hard way 自己学习 Python。在[练习 46](http://learnpythonthehardway.org/book/ex46.html)中。我应该创建一个项目框架（即创建一个 setup.py 文件，创建模块，等等）。然后做一个项目。

我必须在我的 bin 目录中放置一个可用于我的系统的脚本。我编写了简单的脚本，使用**cxfreeze**`Hello World!`将其转换为 .exe 文件。

 **但是，当我尝试安装 setup.py 文件（即通过输入`python setup.py install`cmd）时，我无法安装此 .exe 文件，而只能安装脚本 script.py 如何安装此 exe 文件。这是我的 setup.py 文件：

```
try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

config = {
    'description':  'First project',#ex46
    'author':  'author',#
    'url':  '',#N/A
    'download_url':  '',#N/A
    "author_email":  "author_email@email.com"
    'versio':  '3.1',
    'install_requires': ['nose'],
    'packages': ['skeleton\quiz46','skeleton\\tests'],
    'scripts':  ['skeleton\\bin\helloscript.py','skeleton\\bin\helloscript.exe'],
    'name':  'quiz46'
} 
```

但这给了我以下错误：

```
UnicodeDecodeError 
```

我也尝试过放置skeleton\bin\helloscript.exe，但这给了我一个类似的错误！

我的操作系统是 Windows 7，我使用的是 Python 3.1。

同样，我想要 setup.py 安装我的 .exe 文件，而不仅仅是脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:45:43.167

我不认为该`script`选项旨在处理文本文件以外的任何内容。如果您查看[分发（又名 setuptools）](https://bitbucket.org/tarek/distribute/wiki/Home)的源代码，如果它不是 python 脚本并且如果您使用的是 Python 3 ，该`write_script`命令将尝试查看内容。您的exe 是二进制文件，而不是文本文件，并且很可能导致它窒息。`encode('ascii')``cxfreeze`

`setuptools`在安装过程中包含可执行脚本的更简单的选择是使用`entry_points`您的选项`setup.py`而不是`scripts`：

```
entry_points={'console_scripts':['helloscript = helloscript:main'] } 
```

`console_script`它将自动包装您的原始脚本`helloscript.py`并创建一个`exe`（在 Windows 上）并将其安装到您的 Python`Script`目录中。无需使用类似`cxfreeze`.**

# java - 如何从 java 中的 .java 文件创建“java.lang.Class”对象

> ID：11605097
> 
> 赞同：4
> 
> 时间：2012-07-23T00:19:51.847
> 
> 标签：java, reflection, junit, compilation

如何`java.lang.Class`从给定的 .java 文件中实例化类的对象？

我想创建一个应用程序来自动生成 JUnit 测试。为此，我需要“方法”对象，而对于“方法”对象，我需要有一个“类”对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:22:55.693

java 6 以后有一个用于编译器的 api：[http ://www.javabeat.net/2007/04/the-java-6-0-compiler-api/](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

上面的链接包含一个示例。

这是另一个例子 - [http://www.java2s.com/Code/Java/JDK-6/JavaCompilertoolshowyoucancompileaJavasourcefrominsideaJavaprogram.htm](http://www.java2s.com/Code/Java/JDK-6/JavaCompilertoolshowyoucancompileaJavasourcefrominsideaJavaprogram.htm)

要在编译后加载文件，请使用类加载器。[在http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)有一个例子，在[http://www.javaworld.com/jw-10-1996/jw-10-有另一个例子深度.html](http://www.javaworld.com/jw-10-1996/jw-10-indepth.html)

你会认为会有一个图书馆来简化这一切。我找不到，但我还在找。

同时，这是来自 ibm 的一篇非常好的文章，它编译了一个函数并绘制了它 - [http://www.ibm.com/developerworks/java/library/j-jcomp/index.html](http://www.ibm.com/developerworks/java/library/j-jcomp/index.html)

**找到了一个** [http://docs.codehaus.org/display/JANINO/Home](http://docs.codehaus.org/display/JANINO/Home) - 这是一个简化流程的库。我建议将其配置为使用 javax.tools API（请参阅“什么是 Janino”段落中的最后一句）。

很抱歉之前的 google snark。

* * *

它让我感到震惊，也许你只想要一个类对象。

如果您有一个名为 MyClass 的类，则关联的类是`Myclass.class`. 这可能很明显，但也许这就是你所需要的。

如果您在字符串中有类名，则可以使用此方法 - [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName(java.lang.字符串](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName(java.lang.String)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T14:28:10.673

如果您知道完整的类 String 名称，为什么不使用 Class.forName(className) 方法来获取类 Object？
例如，如果类名是`yakam.yale.MyClass`，只需调用

```
Class.forName("yakam.yale.MyClass"); 
```

游戏开始了！

# linux-kernel - Linux 内核版本编号

> ID：11605098
> 
> 赞同：0
> 
> 时间：2012-07-23T00:19:55.337
> 
> 标签：linux-kernel

不久前，我从 kernel.org (http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.38.8.tar.gz) 下载了 Linux 内核源代码 2.6.38.8。今天，我克隆了 github.com/torvalds/linux 并试图找到产生那个确切版本的提交。我能找到的封闭的东西是 v2.6.38-rc8 的标签。

当我`diff -r`对这两个目录执行 a 时，有 775 个文件存在差异（不包括 下的任何文件`.git/`）。谁能解释（或链接文章）[http://www.kernel.org/pub/linux/kernel/v2.6](http://www.kernel.org/pub/linux/kernel/v2.6)上的版本与 git 标签是如何创建的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:27:09.360

Linus 不生产/标记子版本，只有主要版本。

您希望 linux-stable 树找到 .8 版本。git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git

请注意，Linus*确实*标记了 v2.6.38，因此您要么最近拉得不够多，要么没有正确排序标签或其他东西。

# java - 编写有关矩形的代码（Java）

> ID：11605101
> 
> 赞同：0
> 
> 时间：2012-07-23T00:20:29.903
> 
> 标签：java

所以在我的在线课程中，我必须做一些与矩形相关的事情。我对如何编辑我的主类以使其使用另一个类的方法有些困惑。

这是项目的链接，以防您不明白我要问的内容：http: [//pages.eimacs.com/emacsstatics/download/apjava/project1bj.pdf](http://pages.eimacs.com/eimacsstatics/download/apjava/project1bj.pdf)

我感到困惑的部分是添加 printAPRectangle 的定义，因为我认为我做的不正确。

> 为三个实例变量添加访问器实例方法，然后单击 APRectangle 类编辑器窗口上的 Compile 按钮来编译您的代码并检查错误。
> 
> 重新打开 MainClass 的定义，在 printAPPoint 的定义之后插入静态方法 printAPRectangle 的定义。这个方法应该这样定义，如果它被应用到左上角是坐标为（-5.0,3.6）的 APPoint 对象的 APRectangle 对象，

这是我的 APRectangle 类代码：

```
 public class APRectangle
   {
    private APPoint myTopLeft;
    private double  myWidth;
    private double  myHeight;

    public APRectangle( APPoint topLeft, double width, double height )
    {
        myTopLeft = topLeft;
        myWidth = width;
        myHeight = height;
    }

    public APPoint getTopLeft()
    {
        return myTopLeft;
    }

    public double getWidth()
    {
        return myWidth;
    }

    public double getHeight()
    {
        return myHeight;
    }
} 
```

这是我的 APPoint 课程：

> 公共类 APPoint { 私人双 myX; 私人双myY；
> 
> ```
> public APPoint( double x, double y )  {
>  myX = x;
>  myY = y;  }
> public double getX()   {
> return myX;  }
> public void setX( double x )  {
>  myX = x;  }
> public double getY()  {
>  return myY;  }
> public void setY( double y )  {
>  myY = y;  } } 
> ```

最后这是我的主要课程：

```
public class MainClass
{
 public MainClass()
 {
    }

 public static String printAPPoint( APPoint p )
 {
     return "(" + p.getX() + "," + p.getY() + ")";
    }

 public static String printAPRectangle( APRectangle R)
 {
     return "[APRectangle " + printAPPoint( +
            " " + getWidth() + "," + getHeight() + "]" ;
 }

 public static void main(String[] args)
 {
     APPoint p = new APPoint( 1.0, 2.0 );
     APRectangle R = new APRectangle( q, 7.5, 3.6);
     System.out.println( "p is " + printAPPoint( p ) );
     System.out.println( "Done!" );
  }

} 
```

我不知道如何完成询问我如何编辑主类的部分，以及我必须输出 myTopLeft 的部分，因为它是 APPoint 而不是普通字符串。它说我必须使用 printAPPPoint 但我该如何使用它？

谢谢，罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:23:13.810

为了使用 APRectangle 的方法，您必须从 APRectangle 对象中调用它们。printAPRectangle 方法接收一个名为 R 的 APRectangle 对象。您必须使用 R 并调用它的成员函数。你需要使用这些：

*   R.getTopLeft()
*   R.getWidth()
*   R.getHeight()

    public static String printAPRectangle(APRectangle R) { return "[APRectangle " + printAPPoint(R.getTopLeft) + " " + R.getWidth() + "," + R.getHeight() + "]" ; }

# javascript - 验证输入是否在 javascript 中的 2 个数字之间

> ID：11605103
> 
> 赞同：1
> 
> 时间：2012-07-23T00:20:49.447
> 
> 标签：javascript, google-maps, validation

我目前正在使用谷歌地图并尝试使用输入验证。我要求用户使用 0 到 20 之间的数字来设置我的位置的缩放。

下面是我正在使用的代码。第一个`if`语句对于任何超过 20 的数字都非常有效，但是当我使用 0 和 -1 之类的数字时，第二个语句不起作用（例如。）

有什么建议可以解决这个问题吗？

```
function inputIsValid() {

                       console.log("Inside inputIsValid function");

                       //Check for Above 20
                       if (document.getElementById("txtZoom").value  > 20) {
                           alert("Please insertAmount between 0 and 20");
                           document.getElementById("txtZoom").focus();
                           return false;

                           //Check for Number below 0
                           if (document.getElementById("txtZoom").value < 0) {
                               alert("Please insertAmount between 0 and 20");
                               document.getElementById("txtZoom").focus();
                               return false;
                           }
                       }
                   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:23:29.923

问题是您将第二个检查嵌套在第一个检查中，因此永远不会到达。试试这个：

```
function inputIsValid() {
    var zoomValue = document.getElementById("txtZoom").value;

    if (zoomValue > 20 || zoomValue < 0) {
         alert("Please insertAmount between 0 and 20");
         document.getElementById("txtZoom").focus();
         return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:23:01.220

```
 function inputIsValid() {
   $value = document.getElementById("txtZoom").value;

   if (($value  < 0) && ($value  > 20)) {
   alert("Please enter a value between 0 and 20");
   return false;
   } 
```

# java - 使用 Java 堆栈找到...对象但预期 myClass 错误

> ID：11605104
> 
> 赞同：2
> 
> 时间：2012-07-23T00:20:57.727
> 
> 标签：java, class, object, stack

当我尝试以这种形式编译代码时，会生成编译错误“Incompatible types - found java.lang.Object but expected E”：

```
public class E {
    private int x;       

    public E {
        x = 0;
    }
}

public class Class {
    private E o;
    private E b;
    private Stack stack = new Stack();

    public void foo() {
        stack.push(o);
    }

    public void bar() {
        **b = stack.pop();**
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T00:28:20.683

你可以声明堆栈包含`E`s：

```
private Stack<E> stack = new Stack<E>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:22:47.087

尝试转换为 E。

```
public void bar() {
    b = (E)stack.pop();
} 
```

# javascript - 如何获取导入的谷歌地图地标的描述？

> ID：11605106
> 
> 赞同：-5
> 
> 时间：2012-07-23T00:22:24.573
> 
> 标签：javascript, google-maps-api-3

简而言之：我在 Mymaps 中创建了一张地图，保存了地点（单击地标，“保存到..”），我自定义了图标并保存了。[这](http://goo.gl/maps/EoCN)是我的地图。然后我导出了 kml 文件，并使用[GeoXML V3和带有 javasctipt 的 Google Maps API v3 将其导入到](http://code.google.com/p/geoxml-v3/)[网页](http://www.tenutalasantissima.com/en/siena-e-la-toscana/)中，以便有一个漂亮的侧边栏。如您所见，在 GMaps 中单击我的地标，我可以获得地址、“更多信息”、网站和描述，相反，在我的网页中，所有这些信息都不可用。使用选项“clickable:true”。我不明白问题是否可以使用 Google Maps API 或解析器 GeoXML v3 中的某些选项来解决。有人可以帮助我吗？谢谢！

```
<script type="text/javascript">

        var Tenuta=new google.maps.LatLng(43.246266,11.295608);
        var mapDiv = document.getElementById('map-canvas');
        var map = new google.maps.Map(mapDiv, {center: new google.maps.LatLng(43.246266,11.295608),zoom: 10,mapTypeId:google.maps.MapTypeId.TERRAIN,clickableLabels:true});

        ...

        var base = "../../content/siena/map/example.kml"
        var path = base;

        var myParser = new GeoXml("myParser", map, path, {nozoom:true, titlestyle: 'id="infowindowsTitle" ',sidebarid: "the_side_bar",allfoldersopen:true,iwwidth:1, iwheight:1});

        myParser.parse("Point of interest next to Tenuta la Santissima");

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-10T11:18:55.153

您可以使用 DomParser 通过您的代码读取 KML。请查看[https://stackoverflow.com/a/53183890/2360310](https://stackoverflow.com/a/53183890/2360310)。

# ruby-on-rails - 如何使用户可以搜索 Rails 模型？

> ID：11605110
> 
> 赞同：1
> 
> 时间：2012-07-23T00:22:57.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search

我正在尝试在 Rails 中公开搜索功能。我希望用户能够输入类似的字符串`name:"john" color:"blue"`并获取某些模型的 ActiveRecord 对象列表，这些模型的名称属性包含`john`，颜色属性包含`blue`. 我还希望他们能够使用`and`and`or`和括号，例如`name:"john" or color:"blue"`or `(name:"john" color:"blue") or name:"bill"`。理想情况下，他们还可以使用诸如`age<20`年龄是数字字段之类的东西。有没有一个rails插件可以做到这一点。我已经简要地查看了 sphinx 和 ferret 两者似乎都为此创建了一个 api，但尚不清楚它们是否提供了基于明文的选项，或者我是否需要自己解析搜索字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:33:11.477

[Ernie](https://github.com/ernie)的**[Ransack](https://github.com/ernie/ransack/)** gem 是一个很好的起点。

您必须在提交的表单和 Ransack 代码之间提供一个中间层*（出于安全原因，无论如何这都是一个好主意）*，以将字符串从您想要的格式转换为 Ransack 可以理解的格式。

如果您查看[演示页面](http://ransack-demo.herokuapp.com/users/advanced_search)和 gem 的文档，您会发现创建所需的查询类型非常简单。

观察如何`GET`根据您构建的条件生成请求，并在您的应用程序中将演示中的构建器 Ernie 替换为接受字符串之类的单个文本字段`(name:"john" color:"blue") or name:"bill"`。提交此字段时进行一些模式匹配，并构建适当的查询字符串以传递给 Ransack gem。

**编辑**

对于未来的问题，例如“什么是流行的 gem `______`？”，请查看[Ruby 工具箱](https://www.ruby-toolbox.com)。如果 Ransack 不能满足您的需求，[Rails Search](https://www.ruby-toolbox.com/categories/rails_search)类别中的宝石可能会满足您的需求。我个人将 Ransack 用于*您*所描述的内容；`User`为我的应用程序模型提供自定义查询接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:38:49.757

我建议做你自己的搜索类。我发现对于我所做的每个应用程序，搜索的需求都发生了很大的变化，创建一个搜索应用程序非常简单，它考虑了搜索查询中可能需要的所有变量，针对你想要搜索的任意数量的类构成。

在您的 Search 类中，让它按照您想要的顺序返回一个集合，并且该集合可以由搜索者可能想要的对象实例组成。

# ruby-on-rails - :autosave 忽略了 has_many 关系——我错过了什么？

> ID：11605120
> 
> 赞同：11
> 
> 时间：2012-07-23T00:23:53.023
> 
> 标签：ruby-on-rails

我有一对类：

```
class Collection < ActiveRecord::Base                                                                                                                                                                                                         
  has_many :items, autosave: true
end

class Item < ActiveRecord::Base
  belongs_to :collection
end 
```

从[文档](http://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html)：

> 当 :autosave 为真时，所有子项都会被保存，无论它们是否是新记录：

但是当我更新 an`Item`并保存它的 parent`Collection`时，`Item`不会保存更新的属性：

```
 > c = Collection.first
 => #<Collection id: 1, name: "collection", created_at: "2012-07-23 00:00:10", updated_at: "2012-07-23 00:00:10"> 
 > i = c.items.first
 => #<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25"> 
 > i.name = 'new name'
 => "new name" 
 > c.save
 => true 
 > Collection.first.items
 => [#<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25">] 
```

那么，我错过了什么？

我正在使用 Rails 3.2.5 和 Ruby 1.9.2。

* * *

所以我在 ActiveRecord 的源代码中做了一些挖掘。我们可以得到`c`的自动保存关联：

```
 > c.class.reflect_on_all_autosave_associations
 => [#<ActiveRecord::Reflection::AssociationReflection:0x007fece57b3bd8 @macro=:has_many, @name=:items, @options={:autosave=>true, :extend=>[]}, @active_record=Collection(id: integer, name: string, created_at: datetime, updated_at: datetime), @plural_name="items", @collection=true, @class_name="Item", @klass=Item(id: integer, collection_id: integer, name: string, created_at: datetime, updated_at: datetime), @foreign_key="collection_id", @active_record_primary_key="id", @type=nil>] 
```

我认为这说明已经为自动保存设置了关联。

然后我们可以得到对应的关联实例`c`：

```
 > a = c.send :association_instance_get, :items
 => #<ActiveRecord::Associations::HasManyAssociation:0x007fece738e920 @target=[#<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25">], @reflection=#<ActiveRecord::Reflection::AssociationReflection:0x007fece57b3bd8 @macro=:has_many, @name=:items, @options={:autosave=>true, :extend=>[]}, @active_record=Collection(id: integer, name: string, created_at: datetime, updated_at: datetime), @plural_name="items", @collection=true, @class_name="Item", @klass=Item(id: integer, collection_id: integer, name: string, created_at: datetime, updated_at: datetime), @foreign_key="collection_id", @active_record_primary_key="id", @type=nil>, @owner=#<Collection id: 1, name: "collection", created_at: "2012-07-23 00:00:10", updated_at: "2012-07-23 00:00:10">, @updated=false, @loaded=true, @association_scope=[#<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25">], @proxy=[#<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25">], @stale_state=nil> 
```

然后我们可以找到通过这个关联关联的实际对象：

```
 > a.target
 => [#<Item id: 1, collection_id: 1, name: "item1", created_at: "2012-07-23 00:00:25", updated_at: "2012-07-23 00:00:25">] 
```

此处找到的对象没有我之前所做的更新。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T08:47:55.130

The problem here is the line

```
 i = c.items.first 
```

This line pulls the correct item from the database, but *doesn't* attach it to the collection c. It is a distinct ruby object from the object

```
i = c.items[0] 
```

If you replace the first line with the second your example will work.

# php - tcpdf 和 locales getnumlines 错误计数

> ID：11605121
> 
> 赞同：1
> 
> 时间：2012-07-23T00:23:55.717
> 
> 标签：php, pdf, tcpdf

我发现 TCPDF 库出现恼人的错误。希望你知道如何帮助我。我使用 obj->getNumLines 方法来计算我的文本有多少行。它在大多数情况下都很好用，但不幸的是并非总是如此。我使用 UTF8 编码并且我使用了许多本地标志（我来自波兰，我们有很多这样的标志）。尽管多单元格显示 6 行文本，但 getNumLines 有时会返回 5。

在我的研究中，我发现：

```
$font = $pdf->addTTFfont('/fonts/calibri.ttf', '', '', 32);
$pdf->setFont($font, '', 13)
$string = 'zażółć gęślą jaźń'; (repeated many times)
echo $pdf->getNumLines($string, 0); 
```

它打印到屏幕上的数字与 multicell 实际返回 pdf 文件的行不同（更小）。如您所见，我使用自定义字体，代码期间边距不会更改。

有人知道出了什么问题或如何解决吗？

# javascript - 如何使用鼠标或触摸更改数字输入字段？

> ID：11605127
> 
> 赞同：-1
> 
> 时间：2012-07-23T00:25:30.253
> 
> 标签：javascript, html, input, touch, usability

我想创建一个输入字段，您可以在其中单击/触摸，然后向上或向下移动以更改字段的值，直到您释放鼠标/手指。

这应该适用于最近的浏览器以及 Android 和 iPhone。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:40:36.637

这是一种快速简便的方法

```
<!doctype html>
<html>
  <head>
    <script type='text/javascript'>
      var startY;
      function loadJs(){
        document.getElementById("upDownInput").onmousedown = startMoveUpDown;
      }      

      function startMoveUpDown(e){
        startY = e.clientY;
        document.onmousemove = moveUpDown;
        document.onmouseup = endMoveUpDown;
      }

      function moveUpDown(e){
        var input = document.getElementById("upDownInput");
        var moveChange = Math.ceil(e.clientY - startY);        
        input.value = moveChange;
      }

      function endMoveUpDown(){
        document.onmousemove = null;
      }
    </script>
  </head>

  <body onload='loadJs()'>
    <input style='margin-top: 200px' value='0' type='number' id='upDownInput'/>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:29:38.023

您可能想查看[jQuery UI 的滑块](http://jqueryui.com/demos/slider/#rangemin)以获得可靠的跨浏览器滑块。

# php - 我的 SELECT COUNT 查询返回一个数组而不是整数

> ID：11605143
> 
> 赞同：0
> 
> 时间：2012-07-23T00:28:24.683
> 
> 标签：php, mysql, select, count

我已经查看了有关 Stacked 的其他类似问题，甚至使用了一个示例，我将在下面发布它应该返回一个整数但我仍然得到一个数组......

那么..我怎么会得到一个数组，而我又如何得到一个整数呢？

```
function user_exists($username){
    $result = mysql_query("SELECT COUNT(username) FROM logins");

    // Verify it worked
    if (!$result) echo mysql_error();

    $row = mysql_fetch_row($result);

    // Should show you an integer result.
    print_r($row);

    } 
```

这输出：“数组（[0] => 1）”。评论说它应该是一个整数。非常感谢任何帮助！

上面的代码仅用于测试目的，我实际上是在尝试测试 SELECT COUNT 的值并在函数中返回一个 true（或 false）布尔值：

```
function user_exists($username){
    $query = mysql_query("SELECT COUNT (username) FROM `logins` WHERE `username`='$username'");
    return (mysql_result($query, 0)==1) ? true: false;
    } 
```

但 $query var 是一个数组而不是单个值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T00:31:44.463

它返回一行一列，用于`$row[0]`从第一列获取值。

正如函数名所暗示的那样，`mysql_fetch_row`预计会以数组的形式返回一行，结果集中的每一列都有一个元素。

来自[PHP 文档](http://php.net/manual/en/function.mysql-fetch-row.php)：

> **返回值**
> 
> 返回对应于提取行的字符串数字数组，如果没有更多行，则返回 FALSE。
> 
> mysql_fetch_row() 从与指定结果标识符关联的结果中获取一行数据。该行作为数组返回。每个结果列都存储在数组偏移量中，从偏移量 0 开始。

正如 Ricardo 和 Fluffeh 所评论的，此接口已被弃用，您应该使用[PDO](http://php.net/manual/en/book.pdo.php)。在 PDO 之前，PHP 缺乏统一的数据库接口，在项目中切换数据库真的很困难。使用 PDO 可以轻松支持多个数据库，并且[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)使您的代码更安全地抵御 SQL 注入攻击。

[更新]

> 谢谢，也许 mysql_row 不是最好的方法，我只将它用于测试目的。我实际上是在尝试将结果作为数字插入到 mysql_result 中，但它是一个数组，所以我相信 SELECT COUNT 最初返回一个数组，当我认为它是要返回一个整数时。真的我希望 $result=mysql_query("SELECT COUNT") 是单个值.. 嗯..？

如果您真的想将值作为整数获取，您可以使用它来代替：

```
// $row = mysql_fetch_row($result);
$row = mysql_result($result, 0, 0); // first row, first column 
```

# php - symfony2 和教义 2 中的“unitOfWork”是什么

> ID：11605145
> 
> 赞同：5
> 
> 时间：2012-07-23T00:28:44.943
> 
> 标签：php, symfony, doctrine-orm

我正在阅读 Doctrine2 文档，它在各个地方都提到了`unitOfWork` 那是什么。有人可以解释一下吗。这就是为什么我需要它以及它的用途是什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T00:42:40.347

简单来说，工作单元是一个图表，只要相关节点（在 Symfony2 的情况下，实体）发生更改，就会开始构建。

![在此处输入图像描述](../Images/66da3d8af4a07862067ad21f8563fa32.png)

当您执行工作单元时，它将跟踪记录的受影响实体（标记为脏）的更改，并将更改一次性应用到所有实体（事务）

欲了解更多信息：[EAA 目录的 P：工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)

# r - R - 在包含 NA 的同一列中合并 data.frames

> ID：11605147
> 
> 赞同：3
> 
> 时间：2012-07-23T00:29:09.053
> 
> 标签：r, merge, dataframe

我有四个 data.frames，它们都具有相同的列，第一个对所有人都相同。在变量列中有一些 NA。

首先，我想用 data.frame 的名称替换每个 data.frame 中的任何值（不是 NA）。其次，我想合并data.frames。在这种情况下，对于每个 NA，都会有一些其他的 data.frame 有一个值，所以我会以每个单元格填充值（或 data.frames 的名称）结束。

这是一个包含两个 data.frame 的示例：

```
 >A
 name Q  W  E  R  T
 g1   NA NA 4  NA 0
 g2   3  2  NA 4  5
 g3   NA 1  NA 0  0
 g4   0  NA NA 1  9

 >B
 name Q  W  E  R  T
 g1   2  4  NA 1  NA
 g2   NA NA 5  NA NA
 g3   5  NA 0  NA NA
 g4   NA 6  4  NA NA

 >result
 name Q  W  E  R  T
 g1   B  B  A  B  A
 g2   A  A  B  A  A
 g3   B  A  B  A  A
 g4   A  B  B  A  A 
```

我尝试了一些不同的 merge() 和 union() 选项。此外，我试图调整类似问题的答案，但我似乎无法解决这个问题。

[创建一个函数以将一个 data.frame 中的 NA 替换为另一个 data.frame 中的值](https://stackoverflow.com/questions/8349909/creating-a-function-to-replace-nas-from-one-data-frame-with-values-from-another)

[在 R 中合并具有缺失值的数据帧](https://stackoverflow.com/questions/5871916/merging-data-frames-with-missing-values-in-r?rq=1)

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:47:17.820

我已经为此编写了一个包，因为我反复从数据库文盲的人那里收到部分重叠的 excel 文件。

我将它上传到 CRAN，它应该很快就会可用。那该怎么办是这样的

```
> install.packages("datamerge")
> library(datamerge)
> version.merge(A, B, add.values=TRUE)
Rows:  4 from `A` #1
       0 from `B` #2

Columns:
Q  Origin: `A` #1
   Imputed 2 values from `B` #2
W  Origin: `A` #1
   Imputed 2 values from `B` #2
E  Origin: `A` #1
   Imputed 3 values from `B` #2
R  Origin: `A` #1
   Imputed 1 values from `B` #2
T  Origin: `A` #1
   Q W E R T
g1 2 4 4 1 0
g2 3 2 5 4 5
g3 5 1 0 0 0
g4 0 6 4 1 9 
```

如果您想在 CRAN 上线之前尝试一下，您可以从[http://www.anst.uu.se/chrba104/datamerge_1.0-1.tar.gz获取](http://www.anst.uu.se/chrba104/datamerge_1.0-1.tar.gz)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T00:47:13.980

这可能不适用于您，但对于提供的数据......

```
A <- data.frame(Q=c(NA, 3, NA, 0),
                W=c(NA, 2, 1, NA),
                E=c(4, NA, NA, NA),
                R=c(NA, 4, 0, 1),
                T=c(0,5,0,9), row.names=paste0('g', 1:4), stringsAsFactors=FALSE)

B <- data.frame(Q=c(2, NA, 5, NA),
                W=c(4, NA, NA, 6),
                E=c(NA, 5, 0, 4),
                R=c(1, NA, NA, NA),
                T=c(NA, NA, NA, NA), row.names=paste0('g', 1:4), stringsAsFactors=FALSE) 
```

结果将是 "A" 任何`A`不是的地方`NA`。不在的地方`B`就是“B”`NA`

```
result <- A
result[!is.na(A)] <- "A" 
result[!is.na(B)] <- "B"

#   Q W E R T
#g1 B B A B A
#g2 A A B A A
#g3 B A B A A
#g4 A B B A A 
```

# java - 从 Java 调用嵌入在 shell 脚本中的 awk 脚本

> ID：11605148
> 
> 赞同：-1
> 
> 时间：2012-07-23T00:29:10.897
> 
> 标签：java, shell, awk, processbuilder

我正在开发一个 Web 应用程序，其中我使用 shell 脚本作为我的后端（它有一个嵌入式 awk 脚本）和 Java 作为我的前端。我正在使用 Process Builder 来调用 shell 脚本程序。奇怪的是，我的 shell 脚本中的 awk 脚本没有被执行。我在哪里出错了...您能否分享您对此的看法。

在下面的评论中键入的 shell 脚本。

```
#!/bin/bash
FileA=$1
FileB=$2
awk -v FileA="$FileA" '{print $0 >> FileA;}' "$FileB" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:51:25.927

试图在评论中互相键入程序是愚蠢的。我已经编辑了您的问题，以包括我破译您的 shell 脚本的内容。我创建了这个答案来记录我要求您将程序修改为的内容。请提供在 /tmp/out 中看到的输出（在您的问题中），以便从 shell 和 java 程序执行此脚本。

顺便说一句，您是以自己的用户身份运行 java 程序，还是当您尝试附加到文件时，java 程序可能由不同的用户 id 执行，从而导致权限问题。

```
#!/bin/bash
rm -f /tmp/out
exec >/tmp/out 2>&1
date
set -x
printenv
which awk
FileA="$1"
FileB="$2"
ls -l "$FileA"
id
awk -v FileA="$FileA" '{print $0 >> FileA;}' "$FileB" 
```

确保在更新问题后向我发表评论。

# jakarta-ee - 如何创建一个支持 mvn jetty:run 的项目？

> ID：11605150
> 
> 赞同：0
> 
> 时间：2012-07-23T00:30:31.927
> 
> 标签：jakarta-ee, web-applications, maven, jetty, maven-jetty-plugin

最好是运行 mvn archetype:generate 后，它可以完成创建支持 mvn jetty:run 的项目所需的所有事情，但事实是模板太多，我什至不知道应该选择哪一个为了创建一个支持 mvn jetty:run 的项目，即使使用了 -Dfilter 选项，我也找不到合适的模板来做我想做的事情。那么如何创建一个支持 mvn jetty:run 的项目呢？最好我可以用一个命令简单地完成所有事情，即命令 1：创建项目命令 2：mvn jetty:run 来运行这个 Web 应用程序:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:52:34.997

来自 Maven Jetty 插件文档：

> 为了在一个 webapp 项目上运行 Jetty，该项目根据通常的 Maven 默认设置（资源 in `${basedir}/src/main/webapp`，类 in `${project.build.outputDirectory}`和`web.xml`描述符 at `${basedir}/src/main/webapp/WEB-INF/web.xml`，你不需要配置任何东西。
> 
> 只需键入：
> 
> `mvn jetty:run`
> 
> 这将启动 Jetty 在端口 8080 上运行并为您的项目提供服务。

因此，您需要使用`jee6-basic-archetype`(number 414) 来生成所需的文件夹结构。

[文档](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)中提供了有关配置插件的更多信息。

# c# - 加粗整个字符串 C#

> ID：11605158
> 
> 赞同：0
> 
> 时间：2012-07-23T00:31:53.863
> 
> 标签：c#, richtextbox, bold

> **可能重复：**
> [格式化富文本框中的文本](https://stackoverflow.com/questions/4077582/format-text-in-rich-text-box)

我有一个富文本框和一个字符串，我从用户那里得到一个输入文本框的字符串。我想把那个字符串加粗。有任何想法吗？

这是我现在拥有的字符串及其格式：

```
if (InputBox("Please enter a username", "Username:", ref value) == DialogResult.OK)
{
    usr = string.Format("[" + value + "]: ", bold);          
} 
```

和粗体变量

```
Font bold = new Font(dispBox.Font, FontStyle.Bold); 
```

此方法目前不适用于我，因此不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:51:47.540

正如 mbeckish 所提到的，这似乎与他们提供的链接重复。但总而言之，您的问题是您没有使用与 RichTextBox 关联的属性/方法来以您想要的方式格式化字符串。

您将需要使用[SelectionFont](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont.aspx)属性来实现您想要做的事情。

# linux - BeagleBoard Ralink Wifi USB 与 Buildroot

> ID：11605159
> 
> 赞同：1
> 
> 时间：2012-07-23T00:32:04.390
> 
> 标签：linux, linux-kernel, wifi, beagleboard, buildroot

我有一个 BeagleBoard Rev C5，我正在使用 Buildroot 制作一个简单的自定义 Linux 系统。我正在 Windows 7 主机上的 Ubuntu 10.04 VM 上进行开发。我购买了一个 Ralink wifi USB 加密狗，并验证了 Windows 7 和 Ubuntu 都可以识别和使用加密狗。当我在使用 Buildroot 构建系统后启动 BeagleBoard 时，我似乎无法让开发板识别 USB wifi 加密狗，更不用说使用它了。

我已经使用 udev、wifi-tools、usbutils、usbmount、libusb 和 wpa_supplicant 配置了 Buildroot。在“硬件控制”下，我选择了 linux-firmware 和 Ralink 30XX 驱动程序支持。

我尝试按照以下链接作为示例，但它们似乎专注于使用完整的发行版，如 Angstrom 或 Ubuntu，我想使用 Buildroot 构建自定义内核：

```
[1]: http://antipastohw.blogspot.com/2010/07/how-to-make-linux-beagleboard-gadget.html
[2]: http://lakm.us/logit/2012/03/usb-wifi-stick-beagleboard-xm-wpa_supplicant/
[3]: http://linuxwireless.org/en/users/Download
[4]: http://deautomatized.wordpress.com/2012/04/08/ubuntu-11-10-on-beagleboard-rev-c5/ 
```

在连接了 USB wifi 适配器的主机上，我从 lsusb 命令得到以下输出：

```
Bus 002 Device 005: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port
Bus 002 Device 004: ID 0e0f:0008 VMware, Inc.
Bus 002 Device 003: ID 0e0f:0002 VMware, Inc. Virtual USB Hub
Bus 002 Device 002: ID 0e0f:0003 VMware, Inc. Virtual Mouse
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 004: ID 148f:3070 Ralink Technology, Corp.
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

在我的 beagleboard 上，我将 wpa_supplicant.conf 配置为如下所示：

```
phil@beagle: cat wpa_supplicant.conf
ctrl_interface=/var/run/wpa_supplicant
ap_scan=1
    network={
    ssid="NETGEAR"
    scan_ssid=0
    proto=WPA
    key_mgmt=WPA-PSK
    psk="PASSWORD"
    pairwise=TKIP
    group=TKIP
} 
```

如果我在目标上运行 lsusb，我会得到：

```
unable to initialize libusb: -99 
```

我不知道从这里去哪里。如何让 BeagleBoard 使用 Buildroot 实现 USB 加密狗以及如何加载这些 Ralink 驱动程序？提前致谢。

编辑 - 我已经在内核中启用了 USB 控制器支持，但仍然无法从 Linux 3.3 内核菜单配置的设备驱动程序 > 网络设备支持 > 无线 LAN > Raylink 驱动程序支持加载我为 raylink 启用的驱动程序。

这是我在启动电路板并尝试获取 Wifi 时看到的内容。对此有什么想法吗？？

```
# modprobe rt2800usb.ko 
# modprobe -r rt2800usb.ko 
[  378.257812] usbcore: deregistering interface driver rt2800usb
[  378.319854] unwind: Index not found bf051d88
# 
# 
# modprobe rt2800usb.ko 
[  380.998291] cfg80211: Calling CRDA to update world regulatory domain
[  381.087341] usbcore: registered new interface driver rt2800usb
# lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
# iwconfig
lo        no wireless extensions.

# ifconfig -a
lo        Link encap:Local Loopback  
          LOOPBACK  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

# pwd
/lib/modules/3.3.7/kernel/drivers/net/wireless/rt2x00
# ls
rt2500usb.ko  rt2800lib.ko  rt2800usb.ko  rt2x00lib.ko  rt2x00usb.ko  rt73usb.ko 
```

编辑2：

如果我在 BeagleBoard 上启动 ubuntu，则可以识别适配器并且通过编辑 wpa_config 我可以 ping www.google.com。我必须在我的自定义内核 .config 中丢失一些东西，或者我如何加载驱动程序......有什么想法吗？

```
ubuntu@omap:~$ lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 148f:3070 Ralink Technology, Corp. RT2870/RT3070 Wireless Adapter
dmesg
[   12.765960] Registered led device: rt2800usb-phy0::radio
[   12.766113] Registered led device: rt2800usb-phy0::assoc
[   12.766265] Registered led device: rt2800usb-phy0::quality
[   12.766418] usbcore: registered new interface driver rt2800usb
ubuntu@omap:~$ lsmod
Module                  Size  Used by
arc4                    1211  2 
rt2800usb              12562  0 
rt2800lib              45046  1 rt2800usb
crc_ccitt               1525  1 rt2800lib
rt2x00usb              10659  1 rt2800usb
rt2x00lib              39368  3 rt2800usb,rt2800lib,rt2x00usb
mac80211              272168  3 rt2800lib,rt2x00usb,rt2x00lib
cfg80211              169655  2 rt2x00lib,mac80211 
```

编辑：

在 3.2.23 内核中启用下面提到的 USB 选项（显然在 3.3 中不起作用）并启用我上面提到的驱动程序并且它可以工作！

```
# lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 1a40:0101 TERMINUS TECHNOLOGY INC. USB-2.0 4-Port HUB
Bus 001 Device 003: ID 148f:3070 Ralink Technology, Corp. RT2870/RT3070 Wireless Adapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:51:18.490

我认为您的内核没有配置主机控制器驱动程序。我推测您的 USB 记忆棒在插入时不会闪烁或亮起。它可能甚至没有通电。你能检查你的内核.config中是否配置了EHCI或OHCI？如果没有，请激活它们。更明确地说，如果 Beagleboard 类似于 pandaboard，您应该检查`CONFIG_USB_EHCI_HCD_OMAP`并`CONFIG_USB_EHCI_HCD`启用它。

# opencv - OpenCV 和 OpenCVSharp 设置

> ID：11605163
> 
> 赞同：5
> 
> 时间：2012-07-23T00:32:33.707
> 
> 标签：opencv

多次尝试正确编译它，但显然我做错了什么。

我有 OpenCV 和 OpenCVSharp 的最新 SVN 结帐。我使用 CMake 构建我的 OpenCV 解决方案（使用 x64 Visual Studio 2010 配置），然后在 Visual C++ Express 2010 中编译它。

之后，我再次使用 Cmake 为 OpenCVSharp 进行构建，但我收到一条错误消息，说我正在弄乱 OpenCV dll。

此外，当我第一次在 VC++ 中打开 OpenCV 时，我收到一条警告说它不支持解决方案文件夹。不确定这是否会有所不同。

**编译环境：** Windows 7 x64

**Cmake（OpenCV 构建日志）**

```
Found Windows SDK v7.1: C:\Program Files\Microsoft SDKs\Windows\v7.1\
Could NOT find Qt4 (missing:  QT_QMAKE_EXECUTABLE QT_MOC_EXECUTABLE QT_RCC_EXECUTABLE QT_UIC_EXECUTABLE QT_INCLUDE_DIR QT_LIBRARY_DIR QT_QTCORE_LIBRARY) 
CUDA_TOOLKIT_ROOT_DIR not found or specified
Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (Required is at least version "4.1")
Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE) (Required is at least version "2.0")

General configuration for OpenCV 2.4.9 =====================================

  Platform:
    Host:                        Windows 6.1 x86
    CMake:                       2.8.8
    CMake generator:             Visual Studio 10 Win64
    CMake build tool:            C:/Windows/Microsoft.NET/Framework/v4.0.30319/MSBuild.exe
    MSVC:                        1600

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                cl
    C++ flags (Release):         /DWIN32 /D_WINDOWS /W4  /EHa /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4  /EHa /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /MP4  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    C Compiler:                  cl
    C flags (Release):           /DWIN32 /D_WINDOWS /W3   /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C flags (Debug):             /DWIN32 /D_WINDOWS /W3   /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP4  /D_DEBUG /MDd /Zi  /Ob0 /Od /RTC1 
    Linker flags (Release):      /STACK:10000000 /machine:x64   /INCREMENTAL:NO  /debug
    Linker flags (Debug):        /STACK:10000000 /machine:x64   /debug /INCREMENTAL 
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree legacy gpu photo stitching ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera java ocl python

  GUI: 
    QT 4.x:                      NO
    Win32 UI:                    YES
    OpenGL support:              NO

  Media I/O: 
    ZLib:                        build (ver 1.2.6)
    JPEG:                        build (ver 62)
    PNG:                         build (ver 1.5.9)
    TIFF:                        build (ver 42 - 4.0.1)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     NO

  Video I/O:
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 53.61.100)
      format:                    YES (ver 53.32.100)
      util:                      YES (ver 51.35.100)
      swscale:                   YES (ver 2.1.100)
      gentoo-style:              YES
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    DirectShow:                  YES
    XIMEA:                       NO

  Other third-party libraries:
    Use IPP:                     NO
    Use TBB:                     NO
    Use Cuda:                    NO
    Use OpenCL:                  NO
    Use Eigen:                   NO
    Use Clp:                     NO

  Python:
    Interpreter:                 NO

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    Examples:                    NO

  Install path:                  C:/SourceCode/Makes/OpenCV/install

  cvconfig.h is in:              C:/SourceCode/Makes/OpenCV
-----------------------------------------------------------------

Configuring done
Generating done 
```

**Visual C++ Express 2010（OpenCV 编译日志）** **注意：太大而无法发布整个内容。**

```
Visual C++ Express (2010)

1>------ Build started: Project: ZERO_CHECK, Configuration: Debug x64 ------
1>  Checking Build System
...
...
59>  Build all projects
61>------ Skipped Build: Project: INSTALL, Configuration: Debug x64 ------
61>Project not selected to build for this solution configuration 
========== Build: 55 succeeded, 0 failed, 0 up-to-date, 6 skipped ========== 
```

**当我尝试构建 OpenCVSharp 时 CMakes 输出：**

```
Found Windows SDK v7.1: C:\Program Files\Microsoft SDKs\Windows\v7.1\
Check for working C compiler using: Visual Studio 10 Win64
Check for working C compiler using: Visual Studio 10 Win64 -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Check for working CXX compiler using: Visual Studio 10 Win64
Check for working CXX compiler using: Visual Studio 10 Win64 -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
CMake Error at cmake/Modules/FindOpenCV.cmake:96 (message):
  !!!No OpenCV library found!!!
Call Stack (most recent call first):
  OpenCvSharpExtern/CMakeLists.txt:17 (find_package)

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:34:17.573

这可能就像您的 OpenCV .dll 不在路径中一样简单。您在帖子中没有提到这一点，您是否在编译后设置了路径，以便包含 .dll 的文件夹在其中？

# sql - 语句和循环的情况？

> ID：11605164
> 
> 赞同：1
> 
> 时间：2012-07-23T00:33:03.987
> 
> 标签：sql, sql-server-2008, tsql

所以有人告诉我，在 SQL 中循环不是一件可取的事情。以下问题根据年龄范围制作直方图。如您所见，所有组都是硬编码的。在这种情况下，我正在寻找的所有值都低于 100。如果这些值达到数千，该怎么办？怎样才能使它更具可扩展性？

```
select bins, count(*) as numbers from
(

select id, patientage,
case 
    when patientage between 20 and 29 then '20-29' 
    when patientage between 30 and 39 then '30-39'
    when patientage between 40 and 49 then '40-49'
    when patientage between 50 and 59 then '50-59'
    when patientage between 60 and 69 then '60-69'
    when patientage between 70 and 79 then '70-79'
    when patientage between 80 and 89 then '80-89'
    when patientage between 90 and 99 then '90-99'

end as bins
from patient
inner join tblhospitals on tblhospitals.hospitalnpi=patient.hospitalnpi
where (tblhospitals.hospitalname like '%university%')
) as t
group by bins
order by bins 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:55:00.603

这是一个可以用其他值替换的通用形式：

```
select
    cast(
        patientage / cast(bucketsize as int)
            * cast(bucketsize as int) as varchar(10)) + '-' +
    cast(
        patientage / cast(bucketsize as int)
            * cast(bucketsize as int) + cast(bucketsize as int) - 1 as varchar(10))
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:50:34.257

而不是你的case语句，你可以改为分组`patientage / 10` 例如，如果你将查询重写为：

```
SELECT bins, COUNT(*) AS numbers
FROM (
    SELECT id, patientage, patientage / 10 AS bins
    FROM patient P
        INNER JOIN tblhospitals H ON H.hospitalnpi = P.hospitalnpi
    WHERE H.hospitalname LIKE '%university%'
) AS T
GROUP BY bins
ORDER BY bins 
```

您将获得相同的数据，但您将获得 5 而不是“50-59”，这实际上只是一个可以在 SQL 之外处理的显示问题。（或者如果你真的必须，你可以对数据进行一些按摩以用于显示目的，例如将 bins * 10 和 bins * 10 + 9 转换为 varchar 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T00:54:31.590

有人可能会稍微清理一下，但想法就在那里

```
select CAST(patientage/ 10 * 10 as varchar) + ' - ' + CAST((patientage/ 10 * 10) + 9 as varchar) as bins 
```

# php - mysql选择日期时间字段小于指定值的所有记录

> ID：11605166
> 
> 赞同：6
> 
> 时间：2012-07-23T00:33:48.053
> 
> 标签：php, mysql

所以我试图运行一个查询，在这种情况下，没有预约的客户是 X 时间（例如 2 周）。它归结为“向我显示两周内没有预约的客户列表”。我正在尝试通过执行以下操作在 php 中解决此问题：

```
$date = new DateTime;
$ago = new DateInterval('P2W');
$target = $date->sub($ago);
//query to select clients that aren't scheduled after the $target date
$clients = ...; 
```

涉及两个表，**appt_tbl**和**clients_tbl**。appt_tbl 为每个约会记录存储一个 client_id。

所以基本上我需要为每个客户选择“最大”约会，如果它是<我的 $target 日期，则将它们包含在查询结果中。我尝试了各种风格的查询，带有子查询的查询，但我在正确获取这个查询时遇到了困难。

我目前的尝试看起来像：

```
SELECT * 
FROM clients_tbl 
INNER JOIN
(
    SELECT client_id 
    FROM appt_tbl 
    WHERE MAX(appt_date_time) < '2012-07-22' 
    GROUP BY client_id
) appts ON appts.client_id = clients_tbl.client_id; 
```

这还应该包括从未被安排的客户（IE 不会出现在 appt_tbl 中），但不包括在接下来的两周内预约的客户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T00:43:11.547

```
SELECT a.*
FROM clients_tbl a
LEFT JOIN appt_tbl b ON 
          a.client_id = b.client_id AND 
          b.appt_date_time >= CURDATE() - INTERVAL 2 WEEK 
WHERE b.client_id IS NULL 
```

此查询首先（在`WHERE`过滤之前）执行的是选择所有客户，无论他们是否有超过两周前的预定约会。

如果客户在两周前没有预约，则连接表中的值将为`NULL`。我们*想要*连接条件不满足的所有行（即连接表中的值为空），这是用`WHERE b.client_id IS NULL`.

这还包括根本没有任何相应约会的结果集客户。

将来有约会的客户被排除在外。

也不需要在 PHP 中构造日期时间字符串。您可以直接在查询中执行此操作（尽管您可以将几周前的数量作为参数传递）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T07:07:26.753

我认为这可能很简单。

```
select users from time_sheet where created_date >= date('2013-12-01'); 
```

在你的情况下，你必须这样做。而不是这个

```
WHERE MAX(appt_date_time) < '2012-07-22' 
```

做这个

```
WHERE MAX(appt_date_time) < date('2012-07-22') 
```

这实际上是日期比较，较早的是日期与字符串比较。

干杯！！

# php - nginx重写文件位置

> ID：11605172
> 
> 赞同：2
> 
> 时间：2012-07-23T00:34:31.893
> 
> 标签：php, nginx, rewrite, directory, lighttpd

在我的应用程序中，我试图链接`http://domain.com/accounts/login`到它`/accounts/register`在`http://domain.com/accounts.php?action=$`哪里`$`：`http://domain.com/accounts/$`

我不知道在哪里定义重写以及放下什么。

我可以通过 SSH 访问整个 VPS，但我不确定要编辑什么文件。那么文件在哪里呢？

我检查了 /opt/ 文件夹，它似乎是空的。我可能正在运行 lighttpd，所以你能帮我解决这两种情况吗？否则，你能告诉我如何检查我是否使用了lighttpd。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:37:07.057

```
rewrite /accounts/(login|register) /accounts.php?action=$1 
```

应该做的伎俩。把它放在你的`server`（或`location`）指令中。

# java - 使用 Scanner 获取 NoSuchElementFound

> ID：11605173
> 
> 赞同：2
> 
> 时间：2012-07-23T00:34:45.267
> 
> 标签：java, java.util.scanner

我正在尝试让扫描仪读取文本文件的输入，将该输入放入字符串，拥有该字符串的 StringTokenizer，然后拥有一个 String[]，该数组的每个元素都是该 StringTokenizer 的令牌. 这样做的目的是从文本文件中获取输入文本的 String[]，这样数组的每个元素都是文本文件中的一个单词。但是，到目前为止，我的代码会生成 NoSuchElementFound 异常。

```
 Scanner f = new Scanner(  "input.txt" ); // Yes, I have the file path here, I changed it though. 

    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("output.txt" );
    String temp = "";
    String cString = "";

    while( ( cString = f.nextLine() ) != null ) { // Line where exception occurs

        temp += cString;
    }
    StringTokenizer everythingTokens = new StringTokenizer( temp );
    String[] everything = new String[ everythingTokens.countTokens() ];

    for( int i = 0; i < everything.length; i++ ) {
        everything[ i ] = everythingTokens.nextToken();
    }

    out.println( everything[ 0 ] ); 
```

这是错误消息

```
Exception in thread "main" java.util.NoSuchElementException: No line found
at java.util.Scanner.nextLine(Scanner.java:1585)
at gift1.main(gift1.java:21)
Java Result: 1 
```

在文本文件中的输入是

```
Hey,
How are you? 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:38:29.777

这不是您使用扫描仪的方式。你会这样做：

```
while (scanner.hasNextLine()) {
   String line = scanner.nextLine();
   // work with your line here
} 
```

Please have a look at the [Scanner API](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html) and you'll see that it doesn't return null if it runs out of lines. Instead it throws a .... NoSuchElementException. I think that you're confusing its use with that of a BufferedReader, and they're really two completely distinct species.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:39:10.300

Change to this --

```
while( f.hasNextLine() ) {
    cString = f.nextLine();
    temp += cString;
} 
```

# javascript - jQuery/JavaScript 按属性设置数组

> ID：11605174
> 
> 赞同：0
> 
> 时间：2012-07-23T00:35:05.013
> 
> 标签：javascript, jquery, arrays, loops, attributes

我正在尝试我的第一个灯箱插件，并试图弄清楚如何处理设置导航控件。我知道这必须是一个简单的修复，但我完全想多了。它支持 html 内容和图像，并使用标准 rel 属性进行画廊连接。我的问题是：如何根据 rel 从 1 个图像（或 div）导航到下一个图像？

起初我虽然 $(this).nextAll('[rel="ExampleGallery"]') 会工作，但不幸的是这并不针对下一个。所以......我可能完全偏离了轨道，但是如果循环调用插件的对象，检测它们是否有 rel 标签，然后如果它们确实将它们的值推送到动态创建的数组中，我现在要做的是Gallery Names 作为数组名称。然后只需使用数组中的索引来浏览对象...

HTML

```
<img src="images/pic1.png" width="230px" height="215px" rel="Gallery1"/>
<img src="images/pic2.png" width="230px" height="215px" rel="Gallery2"/>
<img src="images/pic3.png" width="230px" height="215px" rel="Gallery1"/> 
```

大批

```
Gallery1                  Gallery2

0 (ref to img tag 1)      0 (ref to img tag 2)
1 (ref to img tag 3) 
```

再一次，我认为我做错了，如果这太糟糕了，我很抱歉。我将如何为此编写JS？

1- 根据 rel 名称动态创建数组 2- 将对象推送到数组以便稍后引用

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:43:59.270

我认为您应该重新考虑要为此使用的数据结构。但是，要简单地收集图像，这将起作用：

```
var arrays = {};
$('img').each(function(){
    var arrayName = $(this).attr('rel');
    if(arrays.hasOwnProperty(arrayName)) {
        arrays[arrayName].push(this);
    }
    else {
        arrays[arrayName] = [this];
    }
} 
```

最后： `arrays`是`{ Gallery1: [img1, img3], Gallery2: [img2] }`

# objective-c - 如何使 textView 文本的一部分更大更粗？

> ID：11605175
> 
> 赞同：0
> 
> 时间：2012-07-23T00:35:21.433
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我什至不知道如何使所有 textView 加粗，但我想知道如何使整个文本中的一个单词像标题（更大更粗）。

```
mytextview.text = @"Title \n text text text text";  

//I want the "Title" to be bigger and bold 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:16:36.940

您需要使用属性字符串并使用核心文本框架进行渲染。[stackoverflow 讨论](https://stackoverflow.com/questions/8322020/display-nsattributedstring-using-coretext) 或者你可以使用 cocoanetics 核心文本组件[DTCoreText](https://github.com/Cocoanetics/DTCoreText)。

# ios - CGContextRef 单位转换

> ID：11605178
> 
> 赞同：0
> 
> 时间：2012-07-23T00:35:29.740
> 
> 标签：ios, cgcontext, cgrectmake

一个月前，我使用 FPDF（PHP 类）创建了一个 PDF 创建器。现在我正在使用 NSData 将 PDF 数据从 URL 获取到 UIWebView。因为我在我的应用程序中实现了离线功能，所以我想将 FPDF PHP 脚本转换为可可触摸。

我的 PHP 脚本中使用的单位是 mm。现在我想知道如何将 mm 转换为 CGRectMake() 中使用的单位（我认为它是像素，对吗？）。

感谢您的帮助，致以亲切的问候，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:31:20.507

好吧，简单的数学会给你答案。查找*非视网膜显示器*的 PPI ，将其除以 25.4（毫米/英寸），您就会得到以*像素*为单位的答案。但是，非视网膜是每点 1 个像素，因此您的*点数*答案将是相同的（可以在视网膜和非视网膜上使用，视网膜只是每点 4 个像素，但这是为您处理的）。我几乎可以肯定这在 iPhone 和 iPad 之间会有所不同，因此您需要同时考虑两者。

# c# - 详细信息通过编码查看插入/更新数据

> ID：11605180
> 
> 赞同：-1
> 
> 时间：2012-07-23T00:35:50.557
> 
> 标签：c#, asp.net, detailsview, insert-update

我正在尝试通过编码从详细信息视图将数据插入或更新到数据库中。无需为详细信息视图提供数据源，因为它非常简单。我想以编程方式进行。

正如我所说，我没有直接提供数据源。我在页面加载时做到了。

```
static string conn = ConfigurationManager.ConnectionStrings["AptechConnectionString"].ConnectionString;
SqlConnection con = new SqlConnection(conn);

protected void Page_Load(object sender, EventArgs e)
{
    DetailsView1.AutoGenerateInsertButton = true;
    DetailsView1.AutoGenerateEditButton = true;
    DetailsView1.AutoGenerateDeleteButton = true;
    Data_Bind();
}

public void Data_Bind()
{
    string query = "select * from students";
    SqlCommand cmd = new SqlCommand(query, con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);

    DetailsView1.DataSource = dt;
    DetailsView1.DataBind();
    ViewState["Data"] = dt;
} 
```

我试着像我们在gridview中那样做

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{
    try
    {
        id = (TextBox)DetailsView1.Rows[0].Cells[1].FindControl("TextBox1");
        name = (TextBox)DetailsView1.Rows[0].Cells[1].FindControl("TextBox2");
        batch = (TextBox)DetailsView1.Rows[0].Cells[1].FindControl("TextBox3");
        enrolled = (TextBox)DetailsView1.Rows[0].Cells[1].FindControl("TextBox4");
        teacher = (TextBox)DetailsView1.Rows[0].Cells[1].FindControl("TextBox5");
    }
    catch (Exception ex)
    {
        Label1.Text = ex.Message;
        Label1.Visible = true;
    }
}

protected void DetailsView1_ItemCommand(object sender, DetailsViewCommandEventArgs e)
{
    switch (e.CommandName.ToString())
    {
        case "New":
            DetailsView1.ChangeMode(DetailsViewMode.Insert);
            Data_Bind();
            break;
    }
} 
```

但是，当我单击编辑或插入链接按钮时，它给了我这个错误

> DetailsView 'DetailsView1' 触发了未处理的事件 ModeChanging。”

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:53:44.620

尝试添加`ModeChanging`事件处理程序：

```
protected void DetailsView1_ModeChanging(object sender, DetailsViewModeEventArgs e)
{
    DetailsView1.ChangeMode(e.NewMode);
    Data_Bind();
} 
```

# ios - iOS：for循环中对象的属性为空？

> ID：11605181
> 
> 赞同：0
> 
> 时间：2012-07-23T00:36:05.637
> 
> 标签：ios, for-loop, nsmutablearray

这是我第一次在 iOS 中使用 for 循环！欢呼！

请注意，“bookTitle”是类中的一个 NSString 对象。当此类启动时，它接受一个 String 参数并将 bookTitle 设置为该参数。

```
books = [[NSMutableArray alloc] initWithObjects:

[[Book alloc] initWithTitle:@"What a great title" andAuthor:@"R Crimson"], 

[[Book alloc] initWithTitle:@"What another great title" andAuthor:@"R Crimson"], 
 nil ];
NSUInteger count = [books count];
for(NSUInteger i= 0; i < count;i++){
    Book *tb= [books objectAtIndex:i];
    if(tb.title=bookTitle){
        nameLabel.text=tb.title;
    } 
```

遗憾的是 tb.title 和 bookTitle 都是空的。应该发生的是，数组中具有与 bookTitle 匹配的标题的任何对象都应该将其标题分配给 nameLabel。

所以我想知道我哪里出错了，以及是否有更好的解决方案？因为标题属性不是唯一标识符，所以如果我将两个具有相同标题的对象添加到书籍中（我不太可能会这样做，但仍然如此！）它将返回多个对象，这是不好的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:45:45.973

你的`if`陈述有误。

```
if (tb.title = bookTitle) 
```

你那里只有一个`=`，所以你一直在`tb.title`设置`bookTitle`。

但是，不要添加另一个等号，而是这样做：

```
if ([tb.title isEqualToString:bookTitle]) {
    ...
} 
```

更多信息[在这里](https://stackoverflow.com/questions/1292862/nsstring-isequal-vs-isequaltostring)。

# ruby-on-rails - 我在哪里可以找到传递给 Rails 中 before_filter 方法块的参数的文档？

> ID：11605182
> 
> 赞同：0
> 
> 时间：2012-07-23T00:36:13.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在 stackoverflow 上的另一个问题（[rails 3 custom mime type - default view format](https://stackoverflow.com/questions/4769058/rails-3-custom-mime-type-default-view-format "rails 3 自定义 mime 类型 - 默认视图格式")）中，另一个人使用了一个相当有趣的解决方案来呈现纯 HTML。在他的解决方案中，他将一个块传递给该`before_filter`方法，并使用诸如`action_has_layout`操纵传递给该块的对象之类的方法。我检查了这些方法的[官方 Rails 文档](http://api.rubyonrails.org/)，但没有找到它们。你们中是否有人知道我在哪里可以找到这些方法的文档？（如果你知道的话，我提到的问题的另一个更好的答案也会很好。）

以下是一些有问题的方法：

1.  `controller.action_has_layout=`
2.  `controller.request.format=`
3.  `controller.collect_mimes_from_class_level`

我会很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:52:07.343

*   [http://apidock.com/rails/AbstractController/Layouts/action_has_layout%3F](http://apidock.com/rails/AbstractController/Layouts/action_has_layout%3F)
*   [http://apidock.com/rails/ActionDispatch/Http/MimeNegotiation/format%3D](http://apidock.com/rails/ActionDispatch/Http/MimeNegotiation/format%3D)
*   [http://apidock.com/rails/ActionController/MimeResponds/collect_mimes_from_class_level](http://apidock.com/rails/ActionController/MimeResponds/collect_mimes_from_class_level)

# php - PHP 5.3.4 使用 PHP_ROUND_HALF_DOWN 模式的 round() 函数中可能存在的错误

> ID：11605184
> 
> 赞同：4
> 
> 时间：2012-07-23T00:36:33.657
> 
> 标签：php, rounding

除非我误解了 round() 函数在 PHP 中的工作原理，否则我认为其中存在错误：

例子：

跑步：

```
$prod = 201.6 * 0.000275;  
echo "No Round..: " . $prod;  
echo "With Round: " . round($prod, 2, PHP_ROUND_HALF_DOWN); 
```

PHP 返回：

```
No Round..: 0.05544  
With Round: 0.06 
```

我的期望：
对于 Round，我期望结果为 0.05。这个预期的结果对吗？

环境：
PHP 5.3.4 运行在 Windows 7 64 位和 Apache 2.2.17 上。

很多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T07:59:12.283

这是正确的预期结果。

`PHP_ROUND_HALF_DOWN`仅当该值恰好为一半时才起作用，对于您的情况，这将是 0.055。

大于 0.055 的任何值，例如。0.0550000001，将导致 0.06。

如果你喜欢向下取整​​，你应该尝试`floor()`.

```
<?php
$prod = 201.6 * 0.000275;

$prod = floor($prod * 100)/100;

echo $prod; // gives 0.05 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:00:09.783

那是因为 PHP 不跟踪溢出。

例如，也试试

```
print (int) ((0.1 + 0.7) * 10); 
```

您会期望表达式返回 8，但会打印**7**。发生这种情况是因为简单算术表达式的结果在内部存储为**7.999999**而不是**8**，并且当 PHP 将数字转换为 int 时，它只会截断小数部分。这意味着 12.5% 的错误！

如果您需要精确计算，请改用[BCMath扩展。](http://php.net/manual/en/book.bc.php "BCM数学")

查看“PHP 基础”一章中的*Zend PHP 5 认证学习指南*(php|architect)。

# c# - 如何在 DataGridView 中仅存储可用列

> ID：11605185
> 
> 赞同：0
> 
> 时间：2012-07-23T00:36:38.073
> 
> 标签：c#, sql-server, winforms, excel, datagridview

我有几个列的 excel 文件，我可以将它导入到 C# Win Forms 中的 DataGridView 中，以便用户可以查看和编辑数据。问题是：如何将 DataGridView 中的数据存储到仅存储可用的 sql server数据库上的列..这是快速说明..

![数据库](../Images/ca9eaa26264ce5d0c700d0af0e081edb.png)

![擅长](../Images/28ff6d70d5b94a05b2ce9c1ad1be1c3a.png)

这是我当前的代码..

```
 private void buttonImport_Click(object sender, EventArgs e)
    {
        if (openFileDialogExcel.FileName != "Excel File")
        {
            try
            {
                System.Data.OleDb.OleDbConnection MyConnection;
                System.Data.DataSet DtSet;
                System.Data.OleDb.OleDbDataAdapter MyCommand;
                MyConnection = new System.Data.OleDb.OleDbConnection(@"provider=Microsoft.Jet.OLEDB.4.0;Data Source='"
                + openFileDialogExcel.FileName + "';Extended Properties=Excel 8.0;");
                MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Data$]", MyConnection);
                MyCommand.TableMappings.Add("Table", "Student");
                DtSet = new System.Data.DataSet();
                MyCommand.Fill(DtSet);
                dataGridView1.DataSource = DtSet.Tables[0];

                MyConnection.Close();
            }
            catch (Exception Fail)
            {
                MessageBox.Show(Fail.ToString());
            }
        }
        else
        {
            MessageBox.Show("Browse 1st");
        }
    } 
```

我有 1 个按钮用于保存数据，不包括“性别”列..

```
private void buttonSave_Click(object sender, EventArgs e)
{
    -----BLANK :(

} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:50:39.613

如果您只想在服务器上插入这些数据，最好的方法是使用批量操作......

```
 using (SqlConnection cn = new SqlConnection(YourConnectionString))
        {
            cn.Open();
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(cn))
            {
                bulkCopy.DestinationTableName = "dbo.Student";

                try
                {
                    bulkCopy.ColumnMappings.Add("StudentID", "StudentID");
                    bulkCopy.ColumnMappings.Add("Name", "Name");
                    bulkCopy.ColumnMappings.Add("Address", "Address");

                    // Bulk write on the server
                    bulkCopy.WriteToServer(DtSet.Tables[0]);

                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }

        } 
```

# c# - 在自身内部将对象设置为 null

> ID：11605188
> 
> 赞同：1
> 
> 时间：2012-07-23T00:37:25.637
> 
> 标签：c#

只是想知道这是否是从内部终止对象的可接受方式？自从

```
this = null; 
```

不可能。我通常只设置一个名为disposed 的布尔值或其他东西，如果在我终止它后访问该对象，则抛出异常。但后来这发生在我身上，我认为这可能是一个更清洁的解决方案，但它似乎有点 hacky，所以我想要第二个意见。我应该坚持设置一个布尔值还是继续这个。这也将允许垃圾收集器清理我的对象。

```
public class A
{
    public A()
    {

    }

    public void Method()
    {
        try
        {
            //Do Something.
        }
        catch
        {
            //If it fails destroy the object
            Destroy(this);
        }
    }

    private static void Destroy(A a)
    {
        a = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T00:39:11.863

`a`是参考的副本。设置为`null`你喜欢的，它不会影响原始参考。现在当然你可以改变方法签名来接受它的参数`ref`，但是你为什么要这样做呢？我无法想象您要在这里解决什么问题。

> 这也将允许垃圾收集器清理我的对象。

GC 不需要你设置对 的引用`null`，你没有用这个想法完成任何事情。你在捣乱参考文献的副本；该对象仍在内存中，并且 GC 足够聪明，可以知道给定引用是否有效，无论其当前值是否为`null`.

有关更多详细信息，请参阅[此 SO 线程](https://stackoverflow.com/questions/3903878/c-should-object-variables-be-assigned-to-null)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:45:21.760

如果您想要显式的确定性销毁，请实现接口 IDisposable 并在处理完对象后调用 Dispose。否则，一旦最后一个引用超出范围，垃圾收集器就会销毁该对象。`null`一个特定的 ref 不会触发集合。除非您确定必须这样做，否则不要再猜测垃圾收集器。

你的物品中有什么让你如此渴望尽快将其销毁？您绝对无法承受超过必要时间的资源很少而且介于两者之间 - 数据库连接、套接字、几百 MB 的内存块。对于那些，IDisposable 存在。其余的对象会在 GC 到达它们之前存活几毫秒；这就是垃圾收集世界的生活。在 2012 年，这被认为是可接受的折衷方案。

# php - 如何让我的 curl 语句正确读取谷歌图像猜测？

> ID：11605190
> 
> 赞同：0
> 
> 时间：2012-07-23T00:37:57.853
> 
> 标签：php, curl, preg-match

我正在创建一个小代码，用于读取 Google 在其图像搜索中对图像的最佳猜测。

单击链接，以便您可以看到我在说什么。 [http://images.google.com/searchbyimage?image_url=http://static.filestube.com/files/images/logo3.gif](http://images.google.com/searchbyimage?image_url=http://static.filestube.com/files/images/logo3.gif)

如果您单击链接，您会看到结果显示：此图像的最佳猜测：filestube 徽标

我希望能够提取最好的猜测并返回它

这是我的代码不起作用

```
$ch = curl_init("http://images.google.com/searchbyimage?image_url=http://static.filestube.com/files/images/logo3.gif");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_exec($ch);
curl_close($ch);
preg_match("Best guess for this image:&nbsp;(.*)</a>", $result, $matches);
if(empty($matches)){
    echo("No guess on this image. <br />");
} else{
    echo("Best guess for this image:");
    print_r($matches);
} 
```

我不断返回没有猜测

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:59:31.400

为什么不尝试[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:06:16.670

好吧，当我运行您的代码时，它说：

`Delimiter must not be alphanumeric or backslash`

用这个更正你的`preg_match`行：

```
preg_match("~Best guess for this image:&nbsp;(.*)</a>~", $result, $matches); 
```

你的代码此时没问题，它会运行没有错误，但是在执行它时，你会再次看到：`No guess on this image`因为你现在遇到了一个大问题。看看，如果你是`echo`你的`$result`变量，你总是会得到这个：

```
302 Moved
The document has moved here. 
```

而不是直接访问您放置的链接时的结果页面。

所以，你永远不会得到积极的结果。我认为这是对谷歌的一种保护。

尝试新的 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T01:09:58.143

测试代码时发生的两件事：

首先你的正则表达式是错误的。您需要转义字符，如下所示：

```
preg_match("/Best guess for this image:&nbsp;(.*)<\/a>/", $result, $matches); 
```

其次，在打印 $result 时，我收到“302：文档已移动”消息，其中包含指向的链接

```
http://images.google.com/search?tbs=sbi:AMhZZitt90SDPhLD9YMKK0zsGPwPtv7We9Nx0VHAncZh0XuZKPl_1Hqv8XGny1cs4jPSR-Byfk7P_1tBQp3Lu8p83b6yYDw_1g0v9ciHDp_1qZpBxV2lCsHVbk5MTlJYW4JdJqc683K4kk9D7k-AnmqI5fGS09xLBo0q57yYJVfgC1YPhn0u3gFW3loZIXQL30pJhulG7O5XdR-whIhu_1YQKWHGzrMEMP-rUrfoNWN0ndIv9_1vfckTr2hD0ziGMEG1Dc9kQ8XPZzdvDg0YmeyyxJhtaYK5Rgdbr9qBU4KG4GYkNPkcdPn1kq_1dRAhWNYob8aOsDK-596CLI5ys32TmsPL2riU6Hm7ov9rn_1r9ZpSDh5UmAMB72Sq2ERx6KsVMA25heuBeRlOUHTvmhgQXVL5uuqhoeqDNz0cFhHFwba3affnHn2A05apHXY2Wnf1KevEA-nYQ4TgFdBWw1XsY--kC3w03e6F_1TdxWIMLspObeLliPKOXlv7-iDg0NTcmrcKgtHknhTOMK6IsrGVhTMJnqNlorccmxyvlMCUNHslPTB9YXkusNlIs9_1H-CA1Tj79R8JWDU65ckTb9fOZ5zCkoQtouP-UkE5pLOEffXX7huJeMVF68s7vsLBGKc7-Jfm2jFoId9lnzmNjLv9NAm_1ifaVYx2rGiIhl9wcFjn3MerwS6BfjcBvHNxetxpey5vbX1gS0R4sUuV28hNdkYQbG54WmAYpqh5buBbSKHUMvFvKIUtrWIiY3PHqutuZzDJhriU6H8slX6yMhGm2c72BGG4KOZbRNg3E1oHWXHVSoLfG9zNybcW0Mf65aE4xFFq6g6dcckF5DBAYUp 
```

有趣的是，如果我运行这段代码（将链接卷曲“这里”）

```
preg_match('/(?<=(<A HREF="))(.*)(?=(\"\>here\<\/A\>))/', $result, $matches);

$ch = curl_init($matches[0]);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_exec($ch);
curl_close($ch);

print $result; 
```

我得到了具有不同 URL 的同一页面，所以我猜测谷歌有某种保护措施来防止搭载。

# python - 将字符串字典值更改为整数并将它们相加

> ID：11605192
> 
> 赞同：2
> 
> 时间：2012-07-23T00:38:40.003
> 
> 标签：python, python-2.7

有点奇怪的问题。假设我有以下字典：

```
dict = {'1':'123','2':'1234','3':'12345'} 
```

我想获取每个值，将其拆分为单个字符，将这些字符更改为整数，然后将它们相加。结果字典将是这样的：

```
dict = {'1':'6','2':'10','3':'15'} 
```

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T00:40:18.570

```
for k, v in my_dict.items():
    my_dict[k] = str(sum(int(c) for c in v)) 
```

我可以补充一下，我同意，这是一个奇怪的问题。似乎有更好的方法来做你需要的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T00:41:21.847

一种功能性方法：

```
dict = {key: str(sum(map(int, value))) for key, value in dict.items()} 
```

# javascript - Backbone.js 中主从场景的首选模式

> ID：11605193
> 
> 赞同：2
> 
> 时间：2012-07-23T00:38:44.623
> 
> 标签：javascript, backbone.js

大多数处理主从场景的 Backbone 教程通过使用从路由传递的模型创建新视图来处理细节状态（[示例](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)）。我想知道替代选项是什么，每个选项的优缺点是什么。

这种实例化新视图的方法对我来说一直很突出的一点是，它似乎错过了利用 Backbone 的模型视图绑定的机会。即，创建基于所选模型更新的单个详细视图。但这需要一个单独的模型，只关注 UI / 活动状态。

我可以想到三种不同的模式：

*   为每个活动细节创建/销毁视图。（这似乎是多余的工作，更不用说潜在的[僵尸问题](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)了）
*   维护一个表示活动细节的附加模型，并创建一个在模型更新时重新呈现自身的视图
*   使用交换关联模型的方法创建一个视图（我认为这会导致事件绑定问题并且可能不是一个好主意）

在像上面链接的示例教程这样的简单案例的上下文中，优点/缺点是什么？#2 中使用 UI 模型的想法是不好的做法吗？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:24:45.063

In my experience, UI models have been incredibly helpful. We maintain a `ContextModel` for every "page" in our app. What makes it really nice is that we guarantee "pages" to be initialized with a complete `ContextModel` so there is only ever one place the context is originally created.

Our `AppView` always handles creating the initial context for a page when a specific route is triggered. The route handler would be where the defaults for a context are set, and things are parsed from the route's values.

Once the page itself has been initialized, it only has to worry about changes to the `ContextModel` and have handlers that do any updates necessary and then update the path.

Here's an example pulled directly from our `AppView`:

```
onSomeRoute : function (project, category, pivot, tab, item) {

  // Setup page context with defaults.
  var options = {
    category : 'traits',
    tab      : 'population',
    item     : null
  };

  // Figure out what the allowed categories and tabs are from this
  // environment by checking against all schema items.
  [snipped]

  // Resolve the `category` and the `pivot`. Try and match the pivot's
  // slug, else choose the first pivot in the category.
  if (_(categories).contains(category)) options.category = category;

  [snipped]

  if (pivots) options.pivot = pivots.find({ slug : pivot }) || pivots.first();

  // Resolve the `tab` and `item`. Only allow valid tabs, and then try
  // to match the item's slug as well, or choose the first one.
  var tabs = ['population', 'sources', 'engagement', 'retention'];
  if (_(tabs).contains(tab)) options.tab = tab;
  [snipped]

  // Now that we've applied some defaults, make sure the path is
  // updated to reflect what the interface is showing.
  [snipped]

  this.loadPage('some-page', options);
} 
```

And then in the `PageView` in question we have a couple change handlers:

```
// When category changes, try to match the current pivot against pivots
// in the category, else choose the first pivot from the category.
onCategoryChange : function (context, category) {
  var schema = this.context.get('environment').get(category);
  if (!schema.contains(this.context.get('pivot')))
    this.context.set('pivot', schema.first());

  this.router.update({
    category : category
  });
},

// When the pivot changes, create a new set of segments for the context.
onPivotChange : function (context, pivot) {
  Segmenter.segment(context, function (segments) {
    context.get('segments').reset(segments).each(function (segment) {
      segment.evaluate();
    });
  });

  this.router.update({
    pivot : pivot.get('slug')
  });
}, 
```

Notice that all of the change handlers keep the URL for the page updated based on the changes in the context. (We wrote a couple custom methods on the router to make this really easy for us.) But they also do any other logic we need to have happen for the page.

Hopefully some of that helps give you ideas. In general, any state that is stored in the URL is in our `PageContext` and then a couple other things that are derived from that state are also stored there for convenience.

# php - 上一个网页PHP函数

> ID：11605196
> 
> 赞同：2
> 
> 时间：2012-07-23T00:39:40.987
> 
> 标签：php

我不确定这是否可能。我想获取用户来自的网页网址以访问我网站上的页面。有没有可以为我找到该信息的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T00:40:51.710

`$_SERVER['HTTP_REFERER']`会给你这个价值，但它可能会被客户伪造或禁用。

# regex - 在 PowerShell 中测试字符串

> ID：11605200
> 
> 赞同：3
> 
> 时间：2012-07-23T00:40:41.753
> 
> 标签：regex, powershell

我是 PowerShell 新手，我在 $line 中有一个字符串。

我如何测试 $line 是否包含单词“Bat”，以使其对字符串“Bat man”成功，但对“Batman”失败？

换句话说，我想测试一个独立的单词，而不是作为单词一部分的字符串序列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:22:01.130

使用*单词边界*元字符进行正则表达式。[元字符`\b`是类似于插入符号和美元符号的锚。它匹配一个称为“单词边界”的位置](http://www.regular-expressions.info/wordboundaries.html)。

```
#True
"Bat" -match "\bBat\b"

#also True
"Bat man" -match "\bBat\b"

#False
"Batman" -match "\bBat\b"

#False
"another Batman" -match "\bBat\b"

#True
"another Bat man" -match "\bBat\b" 
```

# python - 根据到点的距离从列表中选择一个随机项目？

> ID：11605201
> 
> 赞同：1
> 
> 时间：2012-07-23T00:40:41.847
> 
> 标签：python, random, statistics, twisted, distribution

我正在 Twisted 的帮助下用 Python 编写游戏服务器。我有一个 Map 类，它为游戏生成地图。在我的游戏中，我有一个中心点，向外每隔一定距离放置一圈物品。我想随机化这些项目，但也要对项目进行加权，以便它们在地图外部更常见。目前这是我用于构建地图的代码，其中一些变量和函数名称已更改：

```
def generate():
    centralItem = Item(ITEM_TYPE_GOLD, 0, 0, ITEM_SIZE_GIANT, None)
    self.items.append(centralItem)
    distance = 10000
    numberOfRings = 100
    for ring in range(numberOfRings):
        itemsInRing = (ring + 1) * 100
        distanceToRing = (ring + 1) * distance
        for item in range(itemsInRing):
            angle = math.radians(float(360) / itemsInRing) * item
            xPos = math.cos(angle) * distanceToRing
            yPos = math.sin(angle) * distanceToRing
            # set variable itemSize using method described above (details below)
            # set variable itemType using method described above (details below) 
```

我也有这个类，它带有一个用于创建项目的初始化程序。

```
class Item:

def __init__(self, type, posX, posY, size, owner):
    self.type = type
    self.posX = float(posX)
    self.posY = float(posY)
    self.size = size
    self.owner = owner 
```

这些是我的定义。

```
ITEM_TYPE_FIRE = 0
ITEM_TYPE_ICE = 1
ITEM_TYPE_WIND = 2
ITEM_TYPE_EARTH = 3
ITEM_TYPE_GOLD = 4

ITEM_SIZE_SMALL = 200
ITEM_SIZE_MEDIUM = 350
ITEM_SIZE_LARGE = 500
ITEM_SIZE_GIANT = 1000 
```

根据 generate 方法中的 distanceToRing，我想使 ITEM_SIZE_SMALL 在 distanceToRing 为 1,000,000 时最常见，而在 distanceToRing 为 10,000 时最不常见。我还希望 ITEM_SIZE_LARGE 与此相反，并且 ITEM_SIZE_MEDIUM 在中间更常见。至于项目类型，我需要 ITEM_TYPE_FIRE 和 ITEM_TYPE_ICE 最常见到 1,000,000。ITEM_TYPE_WIND 和 ITEM_TYPE_EARTH 应该更常见于 10,000。

我知道有很多问题要问，但如果你能提出一种处理这样的分发方式并解释它，我想我可以弄清楚。另外，我提前为我缺乏 Python 技能而道歉。我使用它的时间还不够长，无法理解最佳实践甚至一些基础知识。

谢谢你的时间，布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:39:05.323

显然，您需要准确确定每种物品类型/尺寸的概率与距离的关系。最简单的答案是制作一个三角形，其峰值位于您喜欢的位置和一致的范围（我会说 10000 到 1000000），如下所示：

```
item_sizes = [ITEM_SIZE_SMALL, ITEM_SIZE_MEDIUM, ITEM_SIZE_LARGE]

def get_item_weights(distance):
    return [1010000 - distance, 1000000 - abs((505000-distance)*2), distance] 
```

这将为您提供 10000 的大部分小物品，1000000 的大部分大物品，以及中间大约 25/50/25 的拆分。也许你不喜欢这样的工作方式，但我无法知道。在构建随机过程时，可能需要反复试验才能找到您喜欢的东西。（从技术上讲，由于 505000 不是有效距离，中间权重将在 990000 处达到峰值，但我认为这并不重要，值得我花时间修复，尤其是因为你可能不喜欢这种分布。）

要选择给定重量的项目，我会做这样的事情：

```
import random

random.seed()

def get_random_index(weights):
    n = random.randint(1, sum(weights))
    cumsum = 0
    for index, weight in enumerate(weights):
        cumsum += weight
        if n <= cumsum:
            return index

def get_random_size(distance):
    return item_sizes[get_random_index(get_item_weights(distance))] 
```

…</p>

```
itemSize = get_random_size(distanceToRing) 
```

# javascript - 包括HTML页面和样式吗？

> ID：11605203
> 
> 赞同：0
> 
> 时间：2012-07-23T00:40:53.467
> 
> 标签：javascript, html, css, include, external

我有一个想要包含外部 HTML 页面的页面。它将位于我的左栏。这是一个附属商店专栏，以无样式的方式从他们的页面列出他们的产品。请参阅 [ [http://store.vampirefreaks.com/?cat=collars&aff=synester_shadows&cols=1&numitems=5](http://store.vampirefreaks.com/?cat=collars&aff=synester_shadows&cols=1&numitems=5) ]。我想知道如何使用 javascript 包含该页面并将其样式设置为链接、图像、背景等与我的页面 CSS 匹配的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:43:22.623

如果您的应用程序在 PHP 服务器上运行，我建议您在 PHP 中使用[包含。](http://php.net/manual/en/function.include.php)它只会将所需的脚本包含在您放置它的页面中，如下所示：

**正文.php：**

```
<p>This is a body page!</p> 
```

**索引.php：**

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Home</title>
</head>

<body>
<?php include('body.php'); />
</body>
</html> 
```

**处理后的index.php：**

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Home</title>
</head>

<body>
<p>This is a body page!</p>
</body>
</html> 
```

请注意，`body.php`不包括`<!DOCTYPE>`、`<html>`或`<body>`标签。PHP 将`body.php`完全按照它看到的内容放置。您可以包含样式表和 JavaScript，`index.php`其中将根据需要对包含的内容进行样式设置和操作。

希望有帮助。

**编辑：**

使用 jQuery 获取页面并将其放入容器中：

```
$.ajax({
  'url' : '/path/to/page.html',
  'success' : function(data) {
    $('div#container').html(data); //Place the fetched content into a <div> with an ID of container
  }
}); 
```

请记住，上述代码仅在您从同一域中获取内容时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:49:21.510

您可能有 3 个选项可以做到这一点：

1.  如果您使用的是 PHP，则可以使用 include 语句
2.  使用ajax抓取页面内容注入主页面
3.  使用 iframe

# javascript - 创建一个具有绝对位置的 div，相对于某个 div

> ID：11605206
> 
> 赞同：1
> 
> 时间：2012-07-23T00:41:48.317
> 
> 标签：javascript, jquery, css

我尝试了不同的方法，但无济于事。

我有：

```
<div>
    <a id="" href="">Link 1</a> <a id="2" href="">Link 2</a> <a id="linkid" href="">Link 3</a>
</div>
<div id="dropdown_div" style="display:none;">
   Linkindiv
   Link2indiv
</div> 
```

现在，当用户将鼠标悬停在链接 3 上时，我希望 div 显示在它的正下方，其绝对位置的 z-index 高于页面上的其他内容。

像

```
Link1 link 2 link3
         [ linkindiv  ]
         [ link2indiv ] 
```

这是我一直用来显示和隐藏的 jquery 代码。

```
 var hide = false;
            jQuery("#linkid").hover(function(){
                if (hide) clearTimeout(hide);
                jQuery("#dropdown_div").fadeIn();
            }, function() {
                hide = setTimeout(function() {jQuery("#dropdown_div").fadeOut("slow");}, 250);
            });
            jQuery("#dropdown_div").hover(function(){
                if (hide) clearTimeout(hide);
            }, function() {
                hide = setTimeout(function() {jQuery("#dropdown_div").fadeOut("slow");}, 250);
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:49:42.157

这听起来像您正在尝试创建一个水平导航栏。您是否尝试过使用列表而不是 div 来做到这一点？

我创建了一个 JsFiddle 来演示：http: [//jsfiddle.net/g8WUA/](http://jsfiddle.net/g8WUA/)

不需要 javascript 并且跨浏览器（和移动）兼容。

最好的，

辛西娅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:29:32.377

在这里，我已经使用 java 脚本针对上述问题完成了 bin 的完整解决方案。

**演示：** [http ://codebins.com/bin/4ldqp9z](http://codebins.com/bin/4ldqp9z)

**HTML：**

```
<div id="menu">
  <a id="1" href="#1">
    Link 1
  </a>

  <a id="2" href="#2">
    Link 2
  </a>

  <a id="linkid" href="#3">
    Link 3
  </a>
</div>
<div id="dropdown_div">
  <div>
    <a href="#">
      Linkindiv
    </a>
  </div>
  <div>
    <a href="#">
      Link2indiv
    </a>
  </div>
</div> 
```

**CSS：**

```
#menu{
  width:750px;
  border:1px solid #546588;
  padding"5px";
  background:#88f8fd;
}
#menu a{
  display:inline-block;
  padding:5px;
  text-decoration:none;
  width:70px;
  color:#1122ff;
}
#menu a:hover{
  background:#55a899;
  text-decoration:underline;
}
#dropdown_div{
  display:none;
  position:absolute;
  border:1px solid #546588;
  background:#88f8fd;
  width:70px;
}
#dropdown_div a{

  text-decoration:none;
  color:#1122ff;
}
#dropdown_div div:hover{

  background:#55a899;
}
#dropdown_div div:hover a{

  text-decoration:underline;
} 
```

**Javascript：**

```
var MenuDiv = document.getElementById('menu');
var menulinks = MenuDiv.getElementsByTagName('a');
var dropdown_div = document.getElementById('dropdown_div');
var i = 0;
//bind mouseover and mouseout event with each link
for (i = 0; i < menulinks.length; i++) {
    menulinks[i].onmouseover = function() {
        var mTop = this.offsetTop + MenuDiv.offsetHeight + 1;
        var mLeft = this.offsetLeft;
        dropdown_div.style.top = mTop;
        dropdown_div.style.left = mLeft;
        dropdown_div.style.display = 'block';

    }
    menulinks[i].onmouseout = function() {
        dropdown_div.style.display = 'none';
    }
} 
```

# vb.net - 如何在应用程序中存储文件

> ID：11605208
> 
> 赞同：0
> 
> 时间：2012-07-23T00:42:10.347
> 
> 标签：vb.net, winforms

我正在制作一个程序，它会在启动时播放一些音乐，这很容易。我想要的是将音乐文件保存为解决方案的一部分，以便始终播放音乐，而不是将程序指向保存音乐的位置：

```
Dim wavMusic As String = "\\My Documents\Visual Studio 2010\Song.wav" 
```

因此，例如，如果我将应用程序移动到另一台计算机上，它将无法找到歌曲。所以我想把那首歌作为 .exe 的一部分，这样它就可以随时找到它。谢谢。

哦，我正在使用 vb 和 winforms，因为我在学校做这件事，那里不使用 C 和 WPF 等令人愉快的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:48:05.477

将它放在您的项目资源中，可作为项目属性中的选项卡访问。您可以使用该`My.Resources`属性访问所有资源。所以：

*   在解决方案资源管理器中双击*我的项目*
*   转到*资源*选项卡
*   将您的文件拖到大空白区域
*   在您的代码中，以`My.Resources.Song`

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:48:19.567

您可以在资源文件中嵌入音频文件作为资源：

![在此处输入图像描述](../Images/0f93b1d4d2dfbb178b0883c3e99bd587.png)

![在此处输入图像描述](../Images/998f2e1594463ed77c9af0baf7b0d49c.png)

![在此处输入图像描述](../Images/c3b23ec72045798ccb666933f63133fc.png)

```
private void btnDemo2_Click(object sender, EventArgs e)
{
    try
    {
        SoundPlayer sndplayr = new 
            SoundPlayer(PlayWavFiles.Properties.Resources.LoopyMusic);
        if (btnDemo2.Text == "Demo WAV 2")
        {
            sndplayr.PlayLooping();
            btnDemo2.Text = "STOP";
        }
        else
        {
            sndplayr.Stop();
            btnDemo2.Text = "Demo WAV 2";
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message + ": " + ex.StackTrace.ToString(), 
            "Error");
    }
} 
```

请参考这篇文章： http: [//www.codeproject.com/Articles/17422/Embedding-and-Playing-WAV-Audio-Files-in-a-WinForm](http://www.codeproject.com/Articles/17422/Embedding-and-Playing-WAV-Audio-Files-in-a-WinForm)

# asp.net-mvc-3 - 上下文不更新

> ID：11605215
> 
> 赞同：1
> 
> 时间：2012-07-23T00:43:51.467
> 
> 标签：asp.net-mvc-3

我一直在阅读并关注 Freeman A. 和 Sanderson S. 所著的“Pro ASP.Net MVC3 Framework 第三版”一书。

我已经到了他们告诉我如何更新实体的部分。一切正常，除了更新。

我有一个页面可以编辑商店中的商品。很基本。当我更改页面中的值并提交它们时，它们会以应有的方式使用新值到达我的存储库的实现。

现在，这本书在我的存储库（SaveProduct）中向我展示了以下方法：

```
namespace SportsStore.Domain.Concrete
{
    public class EFProductRepository : IProductRepository
    {
         private EFDbContext context = new EFDbContext();
    public IQueryable<Product> Products
    {
        get { return context.Products; }
    }
    public void SaveProduct(Product product)
    {
        if (product.ProductID == 0)
        {
            context.Products.Add(product);
        }
        context.SaveChanges();
    }
}
} 
```

此方法有效，但它不保存我的产品。我没有完全理解 MVC3 的模糊性，所以我被困住了。产品作为参数到达 SaveProduct 方法，具有正确的值，应该被保存，但上下文没有更新。

这是在 MVC3 中更新的东西吗？（这本书是不是有点过时了？）因为我可以用 if's 编码来分别检查所有的值，但我不禁觉得这取消了 MVC3/Entity Framework 的功能。

谁能帮帮我？非常感谢！:) 与此同时，我将调试并寻找任何线索！

编辑：

当我捕获 SaveChanges() 返回的整数时，它似乎为零。所以我猜想具有新值的实体没有“更新”到实体框架。

编辑2：

我发现了问题（已经）。似乎我问得太快了，对此我深表歉意。这是我所做的：

我将以下代码添加到方法 SaveProduct 中：

```
 public void SaveProduct(Product product)
    {
        if (product.ProductID == 0)
        {
            context.Products.Add(product);
        }
        else
        {
            var productInDb = context.Products.FirstOrDefault(x => x.ProductID == product.ProductID);
            context.Entry(productInDb).CurrentValues.SetValues(product);
        }
        context.SaveChanges();
    } 
```

我想这是一种正确的方法吗？对不起这个无用的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:02:54.253

问题是你的实体没有被跟踪`EFDbContext`，所以当你打电话时`context.SaveChanges();`，它不知道它需要更新它。

因此，您需要确保上下文知道要跟踪实体的状态。

基本上有两种方法可以做到这一点 - 在第二次编辑中列出的方式，或者您可以手动将实体“附加”到上下文并将其标记为已修改，如下所示：

```
context.Products.Attach(product);
context.Entry(product).State = EntityState.Modified; 
```

# c++ - 带字符串/八进制的 int lambda 表达式？(C++)

> ID：11605217
> 
> 赞同：1
> 
> 时间：2012-07-23T00:44:04.477
> 
> 标签：c++, string, octal

我接受了一项开卷测试，并被告知我可以使用任何我需要的资源来回答这些问题，因为它更像是一项能力测试——一个问题让我非常难过。

这个问题要求编写一个与给定类似的函数 - 我确信我可以做到 - 但我找不到关于该函数正在做什么的太多信息，并且给出一个小样本很难确定正在发生的事情。

问题如下：

**程序打印什么？请编写一个等效的 getValue 函数。**

```
int t[]={1,2,3};
int getValue(int i)
{
  return "\5\3\8"[t[i]];    
}
void main()
{
  printf("%d",getValue(2));    
} 
```

程序打印“0”，这是最简单的部分。我很想用一个简单的方法来回答这个问题。但我想更深入地了解 getValue 函数中到底发生了什么。我的主要好奇心是字符串部分在 lambda 表达式方面的作用，因为 \8 不是有效的八进制，但似乎对结果值有一些影响。

不寻找直截了当的答案（据我所知，这就是我使用作业标签的原因），只是朝着正确的方向前进

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:49:17.343

转义码不是八进制的，我相信它们是十进制的。无论如何，只要它们只占用一个字节，它们就无关紧要。

跟踪它的执行是微不足道的。首先，我们考虑替换参数

```
int t[]={1,2,3};
int getValue()
{
  return "\5\3\8"[t[2]];    
}
int main() //int, not void
{
  printf("%d",getValue());    
} 
```

的第三个值`t`是 3，它产生字符串中的*第四个*字符。由于字符串文字是三个字符，加上 NULL 终止符，那么第四个字符就是 NULL 终止符。当转换为整数时，该值为零。该`printf`调用正确打印此整数。例如，类似的函数将直接索引到字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:49:29.497

好吧，追踪执行。首先，用2调用getValue。在里面，它首先计算t[i]的值，即t[2]，也就是3。然后，它从字符串中取出索引3处的字符。

这部分值得解释一下。字符串常量由 4 个字符组成 - ASCII 5、ASCII 3、ASCII 8 和终止空值 (ASCII 0)。由于字符串索引在 C 中是从零开始的，因此索引 3 处的字符为空。它从字符串中检索，从 char 扩展到 int（因为函数返回一个 int），然后返回。在那里，它被迅速打印出来。

`\__`字符串中的符号表示“带有代码 __ 的字符”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:40:07.277

查看 C 常见问题解答 6.11。Steve Summit 要求人们不要将直接 URL 发布到 FAQ 项目，所以从[http://www.c-faq.com/](http://www.c-faq.com/)开始并导航到 6.11。

另请注意 Michael Burr 对 OP 的评论回复。

# assembly - pcasm 书籍示例

> ID：11605219
> 
> 赞同：2
> 
> 时间：2012-07-23T00:45:10.923
> 
> 标签：assembly, x86, nasm

我是 x86 汇编语言的新手。我正在阅读一本名为 pcasm 的书，我想知道是否有人可以帮助我更好地理解这个代码示例（这是书中的部分代码）：

```
32    mov    ebx, input2
33    mov    ecx, $ + 7
34    jmp    short get_int
35
36    mov    eax, [input1]

64    get_int:
65        call   read_int
66        mov    [ebx], eax
67        jmp    ecx 
```

现在，我的理解是`$`给出当前地址，但是：

1.  为什么`+ 7`？
2.  我该如何计算呢？
3.  如果我使用`jmp near get_int`（4 个字节）和`jmp near word get_int`（2 个字节），这个数字会怎样？第二种语法正确还是应该正确`jmp word get_int`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:13:31.127

是的，我认为卡特博士正在研究“呼叫”的作用......以及为什么我们使用“呼叫”而不是这种迂回的方式。

如果您在命令行中添加“-l myfile.lst”，Nasm 将使您成为一个列表文件。

立即“jmp”的语法是“jmp short”和“jmp near”。（还有“jmp far”，但它做了一些不同的事情——在 32 位代码中通常不有用）。多年来，Nasm 在这方面的行为发生了变化——如果你刚刚说“jmp”，旧的 Nasm 过去会默认给你“jmp near”——如果合适的话，新的 Nasm 将使用“jmp short”。您可能需要使用“jmp strict near”在新的 Nasm 中实际获得“near jmp”（或在命令行上使用“-O0” - 大写“o”，零 - 以关闭优化）。这是破坏现有代码的事情。硬编码偏移“+7”是“不可维护”的代码。我确信 Carter 博士是在说明问题，而不是敦促您以这种方式编写代码！

作为此代码和“call/ret”之间的“中间人”，尝试在您希望子例程返回的位置放置一个标签，并将其放入 ecx。如果你想从多个地方“不调用”这个子程序，你必须做“ret_addr1:”、“ret_addr2:”等。当然，你不能改变子程序中的ecx！使用“call/ret”，我们不必弄乱堆栈——通常是一个更好的权衡。

最好的，弗兰克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:07:31.567

1.  使用示例代码`+ 7`是因为大概为源代码行 33 和 34 组合生成了 7 个字节的机器代码。

2.  您可以通过查看汇编器输出列表（您可能必须在汇编器中打开它）并计算字节数来计算所需的偏移量。

3.  如果您使用汇编为不同数量的机器代码字节的指令，则所需的偏移量将不同。您必须在您的环境中尝试它才能看到您需要什么。

# filesystems - 无法删除文件（符号链接的目标不存在）

> ID：11605227
> 
> 赞同：1
> 
> 时间：2012-07-23T00:46:57.983
> 
> 标签：filesystems, fat32

我有一个名为`ENG~1.IN`无法删除的文件。文件位于带有 FAT32 文件系统的 8GB SanDisk USB 驱动器上。Windows 声明该文件附加了 1,975 个字节。

Windows 资源管理器状态：

> 这不再位于 J:。验证项目的位置，然后重试。

CMD 状态：

> 找不到：J:\ENG~1.IN

属性 * 状态：

> 符号链接的目标 J:\ENG~1.IN 不存在

我已经执行`chkdsk` `/f`，`/r`（和`/p` 从恢复磁盘）我试图从 Windows XP、Vista、7、Mac OS X 和 Ubuntu（不确定是什么版本）中删除这个文件。我尝试了 DelinvFile 的试用版，它只声明该文件不存在（等待开发人员的回复）。我创建了另一个同名文件，Windows 会并排列出两个同名文件，但是当打开或删除旧文件时​​，只有新文件会受到影响。我什至用驱动器上的两个文件运行了 chkdsk，希望它会看到错误并将两者链接起来，但它没有。

我相信这个文件（以及其他三个有同样问题的文件）是由运行 UC Linux 的嵌入式机器创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-15T16:39:10.970

由于我无法移动文件；我将其他所有内容移至临时目录，使用“rd /s folderX”，最后将临时文件夹重命名为原始名称。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T05:19:18.337

两个带有尾随句点的文件：文件。和._file。由 MacOS 制作（数据和资源分叉）；两者都可以被复制（但一个会被永久卡住）

`del \\?\d:\folder\subfolder\file.`用于清除以句点结尾的实际数据文件（注意：如果`"del \\?\d:\some file."`路径或文件名中有空格，或者只是制表符完成，请使用引号）

然而：

`del \\?\d:\folder\subfolder\._file.`说找不到（和 GUI 属性，然后安全选项卡说不可用或无法显示）

`attrib`表示符号链接的目标不存在

`fso.deletefile`（Visual Basic 脚本）也给出了文件未找到

确实`chkdsk /r`（但再次注意复制到新空间会在新空间上产生问题）；此外，尝试删除时尝试按住 shift （但 GUI 只是在重试或跳过时循环），甚至尝试保存引用文件名的文本文档（以免附加 .txt 默认行为）`echo. >._file.`和`mklink ._file. temp.txt`（但它们都只是保存旁边有一个好的 ._file；即他们放弃了尾随句点，因为 Windows 不喜欢尾随句点或空格）

我现在的创可贴是从杂乱的文件夹中取出所有东西，然后将那个杂乱的文件夹剪切并粘贴到驱动器的根目录，作为一个名为“垃圾”的文件夹被丢弃（但这就像我的机器感染了某种东西——它会下次我必须重做我遗憾地将其复制到的三个大型数组中的任何一个时被清除）；但是，我仍然想听听任何坚持销毁这些不幸文件的人的意见；即系统和隐藏期和尾随期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T16:11:59.947

将文件移动到单独的文件夹（例如 D:\FolderX），然后从 D 中的管理命令提示符运行命令“RD /S FolderX”：

*   为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T00:50:17.597

您可能只需将 USB 驱动器上的所有数据备份到硬盘，然后格式化 USB 驱动器并将除不可删除文件之外的所有数据放回 USB 驱动器。

可能有一些方法可以修复您的文件系统，但在您的情况下可能根本不值得付出努力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T03:55:26.970

在 DelinvFile 和 DiskExplorer 开发人员的帮助下，我能够修改文件分配表以删除文件。

基本上我在 DiskExplorer 中为 FAT 打开了驱动器并转到了根目录。找到问题文件的入口后，我选择了十六进制视图，并将文件名的第一个字符修改为 x00（请注意，输入值时不要输入 x ——它只显示值是十六进制的） .

之后我下马并运行 chkdsk /f; 现在我的驱动器像新的一样好用，不再有神秘文件:-)

# keyboard-shortcuts - 摆脱 TextMate2 TODO 快捷方式 - 没有解决方案

> ID：11605228
> 
> 赞同：1
> 
> 时间：2012-07-23T00:47:00.047
> 
> 标签：keyboard-shortcuts, textmate, textmatebundles, textmate2

**编辑：目前没有解决方案。**事实证明，TextMate 2 不保留使用 ^Y 插入“终止缓冲区”的能力。虽然可以将 ^Y 重新绑定到“粘贴”（命令-V），但我想要插入“终止缓冲区”的 emacs 行为。

使用 ^y 插入“TODO”的快捷方式会干扰 emacs yank 命令。我卸载了 TODO 包，当我使用菜单命令“选择包项...”时，找不到任何名为“todo”或具有快捷键 ^y 的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:00:16.430

自 2012 年 8 月 11 日起，此问题已得到修复。

引用发行说明：

> **2012-08-11**
> 
> 实施 ⌃Y 以取消最后的删除。纳撒尼尔·塔格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:51:56.270

也许进入“键盘”系统偏好设置并设置自定义键盘快捷键以覆盖 TextMate 应用程序中的特定命令将解决您的问题：

![在此处输入图像描述](../Images/ae02f0492cba0509b6a7cb96a55f9fea.png)

# python - 将python浮点数写入文件时抑制科学记数法

> ID：11605235
> 
> 赞同：2
> 
> 时间：2012-07-23T00:48:33.197
> 
> 标签：python, floating-point, notation

将浮点数写入 CSV 会像这样写其中一些：2.0628800997782577e-05

```
c = csv.writer(open(file, "wb"))
c.writerow([var1, var2]) 
```

我试过的：

*   我已经在 StackOverflow 上的其他答案之后尝试了 var1**8，但这只是将它们提高到 8 的幂。
*   我也尝试过 Decimal(var1)，但这并没有抑制科学记数法。

这使得之后很难在 excel 中处理输出，因为它被识别为文本而不是数字。如何以非科学的十进制表示法打印它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T00:52:39.000

```
'%f' % your_var 
```

或控制精度：

```
'%0.10f' % your_var 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T00:52:56.503

使用[字符串格式](http://docs.python.org/py3k/library/string.html#formatstrings)：

```
c.writerow(['{:f}'.format(var) for var in (var1, var2)] 
```

# c++ - 如何从标准输入 C++ 正确读取和解析整数字符串

> ID：11605236
> 
> 赞同：3
> 
> 时间：2012-07-23T00:48:52.617
> 
> 标签：c++, string, parsing, integer

正如标题所说，我正在从标准输入读取一串整数。我试图读取的数据以以下形式出现在文本文件中：

```
3
4
7 8 3
7 9 2
8 9 1
0 1 28
etc... 
```

前两行总是只有一个数字（没有问题！），接下来的每一行都有 3 个数字。该文件作为标准输入重定向到我的程序（myprogram < textfile）。

我尝试了很多事情，但未能成功做到这一点！看起来很简单，但我一直在纠结应该在哪里（或如何）转换为整数。这是我最近的尝试：

```
int main()
{

  string str, str1, str2;
  int numCities;
  int numRoads, x, y, z;
  cin >> numCities >> numRoads;

  cout << numCities << " " << numRoads << endl;
  //getline(cin, str1);

  while( getline(cin, str))
  {
    char *cstr;
    cstr = new char[str.size()+1];
    strcpy(cstr, str.c_str());

    x = atoi(strtok(cstr, " ")); //these will be stored in an array or something
    y = atoi(strtok(NULL, " ")); //but right now i just want to at least properly
    z = atoi(strtok(NULL, " ")); //store the appropriate values in these variables!

  }

 return 0;

} 
```

我尝试使用atoi时出现段错误...

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:36:52.927

如果您足够信任您的输入而不在乎数字是否在预期的位置有换行符，那么您可以执行以下操作：

```
int main()
{
    int numCities, numRoads;
    if (cin >> numCities >> numRoads)
    {
        int x, y, z;
        while (std::cin >> x >> y >> z)
        {
            // use the values in here...
        }
        if (!std::cin.eof())
            std::cerr << "encountered unparsable x, y and/or z before end of file\n";
    }
    else
        std::cerr << "unable to parse numCities and/or numRoads\n";
} 
```

如果您认为当换行符不在预期位置时（例如，一行上的 numCities 和 numRoads、空白行、一行上的 xy 而下一行上的 z...）出现错误和解释会有所帮助，那么您可以读取特定行并解析出值（虽然更乏味）：

```
int main()
{
    std::string line;
    int numCities, numRoads;

    if (!std::getline(line, std::cin))
        FATAL("couldn't read line on which numCities was expected");
    std::istringstream iss(line);
    char unexpected;
    if (iss >> numCities)
        FATAL("unable to parse numCities value out of line '" << line << '\'')
    if (iss.getchar())
        FATAL("unparsabel trailing garbage characters after numCities value on line '" << line << '\'')

    // etc. (you can factor the above kind of logic into a function...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:38:31.200

首先，您`cin`用于读取输入，然后使用`getline`. 但是，当您阅读最后一个数字时，会出现`'\n'`缺失。你的第一个`getline(cin, str)`是阅读`'\n'`，这就是你得到段错误的原因。要检查它，请将以下行添加到您的代码中：

```
// just change these lines: 
getline(cin, str);
cout << str << endl;
while(getline(cin, str))
{
    cout << str << endl;

    // ... 
```

您的输出将是：

```
// output
3 4

7 8 3
7 9 2
8 9 1
0 1 28 
```

你只想得到所有的数字`int`吗？对于这个输入，我建议：

```
while (cin >> x >> y >> z) 
{
    cout << x << " " << y << " " << z;
} 
```

**`getline()`解决方案**

您仍然可以使用`getline`功能。然后，我建议您也更改输入读数以`getline`用于前两行。通过这样做，您将不会遇到问题`'\n'`。但是，我认为它变得太复杂了，我不推荐。特别是如果这是一个马拉松问题。

```
// ...
getline(cin, str);
numCities = atoi( str.c_str() );

getline(cin, str);
numRoads = atoi( str.c_str() );

cout << numCities << " " << numRoads << endl;

while(getline(cin, str))
  {    
    char *cstr;
    cstr = new char[str.size()+1];
    strcpy(cstr, str.c_str());

    x = atoi(strtok(cstr, " "));
    y = atoi(strtok(NULL, " "));
    z = atoi(strtok(NULL, " "));
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T01:25:04.760

您可以将数据存储为字符串，然后将字符串更改为整数。

测试代码如下：

```
#include <iostream>
#include <stdlib.h>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char* argv[])
{
    ifstream in("t1.txt");

    string s1,s2,s3;
    int a1,a2,a3;

    in>>s1>>s2;
    a1 = atoi(s1.c_str());
    a2 = atoi(s2.c_str());
    cout<<a1<<" "<<a2<<endl;

    while((in>>s1>>s2>>s3))
    {
        a1 = atoi(s1.c_str());
        a2 = atoi(s2.c_str());
        a3 = atoi(s3.c_str());
        cout<<a1<<" "<<a2<<" "<<a3<<endl;
    }

} 
```

# css - 如何在 Firefox 13 中删除焦点轮廓

> ID：11605242
> 
> 赞同：1
> 
> 时间：2012-07-23T00:49:41.980
> 
> 标签：css, colors, accessibility, outline

这闻起来像复制品，但事实并非如此。我试过这个：

```
input:focus {
   outline: none;
} 
```

它在 Firefox 13 中不起作用。请参阅：

[http://jsfiddle.net/mDQzG/1/](http://jsfiddle.net/mDQzG/1/)

Firebug 让我猜测这里应用了我需要覆盖的默认值。只是要明确一点：我想完全摆脱蓝色轮廓。

PS 请不要对可访问性问题吓我一跳。我这样做是*为了*便于访问。具有浅蓝色背景和浏览器默认轮廓颜色的设计页面在视觉上不会出现在其上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:06:49.413

这是你的答案 [jsfiddle.net/mDQzG/3](http://jsfiddle.net/mDQzG/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T10:31:44.600

解决方案

```
:focus {outline:none;}
::-moz-focus-inner {border:0;} 
```

# java - 可中断套接字读取 Java

> ID：11605244
> 
> 赞同：2
> 
> 时间：2012-07-23T00:50:26.080
> 
> 标签：java, sockets, networking, stream, client-server

我正在尝试在 java 中创建一个相当简单的客户端/服务器应用程序。客户端有两个线程，服务器有两个线程（每个客户端），一个用于输入和输出。我通过对象流几乎不断地双向发送数据。读取（）块。我需要能够中断 read() 线程（即断开连接）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:38:46.493

关闭套接字以进行输入。这将导致被阻塞的读取抛出`EOFException`，因此它应该关闭套接字并退出线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:41:13.743

关闭`Socket`，该`read`方法将被 中断`IOException`。处理该异常以清理您的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:02:40.203

您可以使用非阻塞调用或在线程上使用[中断方法。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)一旦中断，读取操作将抛出一个异常，您可以很好地捕获并结束线程。

# c# - 使用 MetadataExchangeClient 时设置凭据

> ID：11605245
> 
> 赞同：0
> 
> 时间：2012-07-23T00:50:27.033
> 
> 标签：c#, service, web

希望能得到一些帮助 - 我觉得我一定遗漏了一些明显的东西。我想使用 System.ServiceModel.Description.MetadataExchangeClient 来检索有关 Web 服务的信息。如果 Web 服务是不安全的，那么我没有问题，但是如果 Web 服务是受 Windows 身份验证保护的 WCF 服务，那么我会收到如下错误：元数据包含无法解析的引用：'http:/ /server/Service.svc?WSDL'。

我的代码相当简单：

```
Uri endpointUri = new Uri("http://server/Service.svc?WSDL");
System.ServiceModel.Description.MetadataExchangeClient mexClient = new System.ServiceModel.Description.MetadataExchangeClient(endpointUri, System.ServiceModel.Description.MetadataExchangeClientMode.HttpGet);
mexClient.ResolveMetadataReferences = true;
System.Net.NetworkCredential mexNetworkCredentials = new System.Net.NetworkCredential(username, password, domain);
mexClient.HttpCredentials = mexNetworkCredentials;
System.ServiceModel.Description.MetadataSet metadataSet = mexClient.GetMetadata(endpointUri, System.ServiceModel.Description.MetadataExchangeClientMode.HttpGet); 
```

我只是错过了客户端需要指定身份验证的方式吗？我已经用谷歌搜索了一个示例代码，但似乎没有什么与我的想法相符。

这是 Web.config 文件（略有编辑）：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                </sectionGroup>
            </sectionGroup>
        </sectionGroup>
    </configSections>
    <connectionStrings>
        <remove name="db"/>
        <add name="db" connectionString="server=&quot;server&quot;;database=&quot;database&quot;;Integrated Security=SSPI;" providerName="System.Data.SqlClient="/>
    </connectionStrings>
    <system.web>
        <!--
          Set compilation debug="true" to insert debugging 
          symbols into the compiled page. Because this 
          affects performance, set this value to true only 
          during development.
      -->
        <compilation>
            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </assemblies>
        </compilation>
    </system.web>
    <location path="." inheritInChildApplications="false">
        <system.web>
            <authentication mode="Windows"/>
            <pages>
                <controls>
                    <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                </controls>
            </pages>
            <httpHandlers>
                <remove verb="*" path="*.asmx"/>
                <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
            </httpHandlers>
            <httpModules>
                <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </httpModules>
        </system.web>
        <system.codedom>
            <compilers>
                <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
                    <providerOption name="CompilerVersion" value="v3.5"/>
                    <providerOption name="WarnAsError" value="false"/>
                </compiler>
            </compilers>
        </system.codedom>
        <system.webServer>
            <validation validateIntegratedModeConfiguration="false"/>
            <modules>
                <remove name="ScriptModule"/>
                <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </modules>
            <handlers>
                <remove name="WebServiceHandlerFactory-Integrated"/>
                <remove name="ScriptHandlerFactory"/>
                <remove name="ScriptHandlerFactoryAppServices"/>
                <remove name="ScriptResource"/>
                <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </handlers>
        </system.webServer>
        <system.serviceModel>
            <bindings>
                <basicHttpBinding>
                    <binding name="SecuredHttpBinding" maxReceivedMessageSize="52428800">
                        <readerQuotas maxArrayLength="52428800"/>
                        <security mode="TransportCredentialOnly">
                            <transport clientCredentialType="Ntlm"/>
                        </security>
                    </binding>
                </basicHttpBinding>
            </bindings>
            <services>
                <service behaviorConfiguration="APIServiceBehavior" name="APIService">
                    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="SecuredHttpBinding" name="IAPIService" contract="IAPIService" bindingNamespace="http://www.general.com/general/api/v1"/>
                </service>
                <service behaviorConfiguration="APIServiceBehavior" name="Com.IntApp.Walls.API.InternalAPIService">
                    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="SecuredHttpBinding" name="IInternalAPIService" contract="IInternalAPIService" bindingNamespace="http://www.general.com/general/api/v1"/>
                </service>
            </services>
            <behaviors>
                <serviceBehaviors>
                    <behavior name="APIServiceBehavior">
                        <serviceMetadata httpGetEnabled="true"/>
                        <serviceDebug includeExceptionDetailInFaults="true"/>
                    </behavior>
                </serviceBehaviors>
            </behaviors>
        </system.serviceModel>
    </location>
</configuration> 
```

感谢您的帮助，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:09:32.703

我会回答我自己的问题，希望以后能对其他人有所帮助。通过将以下 XML 块添加到我的 App.config 文件中，我在客户端上启用了跟踪：

```
 <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "D:\log\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

在检查生成的跟踪日志时，我可以看到抛出了异常：首先是因为我的客户端对 MaxReceivedMessageSize 的设置太低，然后是因为 MaxNameTableCharCount 和 MaximumResolvedReferences 的默认设置太低。我使用以下代码修复了这些问题：

```
BasicHttpBinding basicHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.TransportCredentialOnly);
basicHttpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;
basicHttpBinding.MaxReceivedMessageSize = 52428800;
System.Xml.XmlDictionaryReaderQuotas xmlDictionaryReaderQuotas = new XmlDictionaryReaderQuotas();
xmlDictionaryReaderQuotas.MaxNameTableCharCount = 2147483647;
basicHttpBinding.ReaderQuotas = xmlDictionaryReaderQuotas;
System.ServiceModel.Description.MetadataExchangeClient mexClient = new System.ServiceModel.Description.MetadataExchangeClient(basicHttpBinding);
mexClient.MaximumResolvedReferences = 1000;
System.ServiceModel.Description.MetadataSet metadataSet = mexClient.GetMetadata(endpointUri, System.ServiceModel.Description.MetadataExchangeClientMode.HttpGet); 
```

希望这可以节省一些时间！

# css - 如何使用 li:hover 更改整个 li 颜色？

> ID：11605246
> 
> 赞同：2
> 
> 时间：2012-07-23T00:50:31.200
> 
> 标签：css, navigation, hover, html-lists

我正在`ul`为我自己的个人网站使用导航，但我一生都无法弄清楚如何更改`background-color`整个`li`元素。如果你看看[这个 fiddle](http://jsfiddle.net/WL3mP/1/)，你可以看到我想要完成的事情。我到处寻找，但我还没有找到“突出显示”文本左侧区域的解决方案。此外，我不确定如何解释`margin: 2px`. 这是一些相关的CSS：

```
#nav li {
    margin:2px;
}

#nav li:hover {
    margin:2px; <-- does not affect where the background color changes, it seems
    background-color:#b5aec8;
} 
```

有没有办法使用纯 CSS 更改整个导航背景？如果是这样，怎么做？任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:53:13.743

从您的小提琴中，只需从`<ul>`元素中删除填充并将其提供给`<li>`元素，然后将其完全着色。

```
#nav {
    width:80px;
    -moz-box-shadow: 0px 3px 5px #888;
    -webkit-box-shadow: 0px 3px 5px #888;
    box-shadow: 0px 3px 5px #888;
    position: fixed;
    left:0;
    padding-left: 0px; /* ******* Changed to 0 */
    top:0;
    margin-top:25%;
    list-style: none;
    background-color: #ccc;
    color:black;
    font-family:Helvetica;
    z-index: 1;

}

#nav ul {
    list-style: none;
    padding-left:0px;
}

#nav a {               
    text-decoration:none;
    color:black;
}

#nav li {
    margin:2px;
    padding-left: 10px; /* ******* Returned to this element here */
}

#nav li:hover {
    margin:2px;
    background-color:#b5aec8;
} 
```

[**请参阅此处的示例。**](http://jsfiddle.net/heera/WL3mP/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:13:37.313

**考虑这个答案：**这将`padding`在保留您的要求`li`的同时放置其中。`anchor``margin`

**参考：** [**jsFiddle**](http://jsfiddle.net/AmFyE/)

# r - 如何在R中的x轴上绘制带有分类变量的散点图

> ID：11605258
> 
> 赞同：0
> 
> 时间：2012-07-23T00:52:32.383
> 
> 标签：r, ggplot2

我试图通过 x 轴的发育阶段在 y 轴上生成重量图。有数百个样本包含每个发育阶段的数据点，我正在尝试从中提取增长率曲线。我不知道如何以 x 轴代表三个分类变量（“ColonyMass_At_Wrkr_Eclosion”、“ColonyMass_4wksLater”和“ColonyMass_2mnthsLater”）的方式绘制它，我也不知道如何连接同一个人的数据点跨变量（如果有意义的话，可以创建一系列曲线）。我在使用 dput() 复制我的数据帧时遇到了一些困难，但我已经尽力了。有什么建议么？非常感谢！：

```
just_growth_data=structure(list(ColonyMass_At_Wrkr_Eclosion = c(NA, 117L, NA,     
53L, NA, 91L, 85L, 111L, 96L, NA, 112L, 90L, 112L, 120L, 110L, 
109L, NA, NA, 99L, 86L, 108L, 109L, 87L, 108L, 116L, 137L, 108L, 
NA, NA, NA, 93L, NA, 96L, 98L, 87L, NA, 111L, NA, 114L, NA, 11L, 
123L, 113L, 130L, 134L, NA, NA, 96L, NA, NA, 15L, 74L, NA, NA, 
75L, 96L, 88L, NA, 122L, NA, 101L, 83L, 123L, 89L, 85L, NA, 112L, 
98L, 87L, 123L, 115L, 16L, 125L, NA, 91L, NA, 85L, 76L, 122L, 
95L, 113L, 116L, 102L, 132L, 11L, 105L, 112L, 102L, 8L, NA, 113L, 
NA, 93L, 104L, 119L, 116L, 112L, 77L, NA, NA, 105L, 105L, 41L, 
99L, NA, 113L, 120L, 130L, 98L, 122L, 118L, NA, NA, 97L, NA, 
NA, NA, 104L, 103L, 110L, 25L, 118L, 98L, 123L, NA, 97L, NA, 
7L, 118L, NA, 82L, NA, 103L, 106L, 113L, NA, 115L, 123L, 124L, 
38L, 26L, 102L, 90L, NA, 59L, 102L, 82L, 120L, 113L, 116L, 117L, 
116L, 62L, 93L, 91L, 102L, 121L, 120L, NA, 111L, 97L, 63L, 109L, 
113L, 102L, 125L, 102L, 111L, 123L, 52L, 72L, NA, NA, 116L, NA, 
81L, 52L, 52L, NA, 105L, 123L, 87L, NA, 136L, 108L, NA, 120L, 
122L, NA, NA, 126L, NA, 47L, 111L, 118L, NA, NA, NA, NA, 109L, 
NA, 99L, 106L, 53L, 102L, 77L, 99L, NA, NA, NA, 114L, NA, 111L, 
NA, 113L, NA, 76L, 114L, NA, 120L, 113L, 97L, 134L, 98L, 118L, 
75L, 109L, 124L, 108L, NA, 124L, NA, 65L, 100L, NA, NA, 126L, 
11L, 97L, 76L, NA, NA, 106L, 110L, 3L, 116L, NA, NA, 135L, 96L, 
101L, NA, 92L, NA, NA, 118L, NA, 105L, 15L, 129L, 128L, 102L, 
NA, 92L, 100L, NA, NA, 71L, 103L, NA, 113L, NA, NA, 63L, NA, 
88L, 83L, 106L, 117L, 49L, NA, NA, 61L, 79L, NA, 91L, 102L, NA, 
93L, NA, NA, NA, 87L, 126L, 99L, NA, NA, 100L, 116L, 103L, 87L, 
37L, NA, 112L, NA, NA, 18L, NA, 94L, NA, NA, NA, 117L, 102L, 
62L, 96L, NA, 87L, 8L, NA, 86L, 61L, NA, 68L, 117L, 89L, NA, 
90L, NA, 104L, 94L, 102L, NA, 105L, 107L, 62L, 130L, 99L, 111L, 
NA, 106L, 98L, NA, 140L, 88L, 94L, NA, 122L, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), ColonyMass_4wksLater = c(NA, 
571L, NA, NA, NA, 736L, NA, NA, NA, NA, NA, 438L, NA, NA, 711L, 
NA, NA, NA, 537L, NA, 844L, NA, NA, NA, 560L, 561L, NA, NA, NA, 
NA, 594L, NA, NA, 457L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 714L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 417L, 
NA, NA, NA, 701L, NA, NA, NA, 25L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 866L, NA, NA, 291L, NA, 659L, 354L, 743L, NA, NA, 696L, 
NA, NA, NA, NA, NA, NA, NA, 518L, NA, NA, NA, NA, NA, NA, 907L, 
27L, NA, NA, 625L, NA, NA, 957L, 804L, NA, NA, NA, 650L, NA, 
NA, NA, NA, NA, NA, NA, 699L, 632L, NA, NA, 518L, NA, NA, NA, 
NA, NA, NA, 527L, 541L, NA, NA, NA, NA, NA, 448L, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 382L, NA, 431L, NA, 620L, 
NA, 296L, NA, 532L, NA, 485L, NA, NA, NA, NA, NA, NA, 153L, NA, 
NA, NA, NA, 23L, NA, NA, NA, 606L, NA, NA, NA, 550L, 766L, NA, 
426L, 786L, NA, NA, 289L, NA, 119L, 327L, NA, NA, NA, NA, NA, 
NA, NA, 602L, NA, 20L, NA, NA, NA, NA, NA, NA, 152L, NA, 592L, 
NA, NA, NA, 1235L, 197L, NA, 442L, NA, NA, 558L, NA, NA, NA, 
NA, 818L, NA, NA, NA, NA, NA, NA, NA, NA, 783L, NA, 519L, NA, 
NA, NA, 856L, 609L, NA, 397L, NA, NA, 1195L, NA, 473L, NA, NA, 
NA, NA, 370L, NA, NA, 3L, 561L, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 783L, NA, NA, NA, NA, NA, NA, 537L, NA, NA, NA, NA, NA, 
937L, NA, 696L, NA, NA, 859L, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 902L, 430L, NA, 11L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 354L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 682L, NA, 
NA, NA, NA, NA, 134L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 670L, 
NA, NA, NA, NA, NA, NA, 537L, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), ColonyMass_2mnthsLater = c(NA, 
445L, NA, NA, NA, 1817L, NA, NA, NA, NA, NA, 2683L, NA, NA, 1775L, 
NA, NA, NA, 429L, NA, 77L, NA, NA, NA, 279L, 23L, NA, NA, NA, 
NA, NA, NA, NA, 111L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 70L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 71L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 249L, NA, NA, NA, NA, 1249L, 636L, 710L, NA, NA, 27L, NA, 
50L, NA, NA, NA, NA, NA, 531L, NA, NA, NA, NA, NA, NA, 63L, NA, 
NA, NA, 416L, NA, NA, 400L, 902L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 116L, NA, NA, NA, 674L, NA, NA, NA, NA, NA, NA, 
1439L, 305L, NA, NA, NA, NA, NA, 93L, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 2L, NA, 1107L, NA, 13L, NA, 201L, 
NA, 470L, NA, 184L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 72L, NA, NA, NA, 2727L, 33L, NA, 121L, 643L, 
NA, NA, 168L, NA, 160L, NA, NA, NA, NA, NA, NA, NA, NA, 1732L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 666L, 
60L, NA, 128L, NA, NA, 140L, NA, NA, NA, NA, 15L, NA, NA, NA, 
NA, 1726L, NA, NA, NA, NA, NA, 1966L, NA, NA, NA, 77L, 76L, NA, 
199L, NA, NA, 54L, NA, 377L, NA, NA, NA, NA, NA, NA, NA, NA, 
738L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1422L, NA, NA, 
NA, NA, NA, NA, 695L, NA, NA, NA, NA, NA, 15L, NA, 1058L, NA, 
NA, 680L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 534L, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, 850L, NA, NA, NA, NA, NA, 11L, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 51L, NA, NA, NA, NA, NA, NA, 146L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA)), .Names = c("ColonyMass_At_Wrkr_Eclosion", "ColonyMass_4wksLater", 
"ColonyMass_2mnthsLater"), class = "data.frame", row.names = c(NA, 
-622L))

just_growth_data_factor<-factor(c("ColonyMass_At_Wrkr_Eclosion", "ColonyMass_4wksLater", "ColonyMass_2mnthsLater"))
x<-rep(just_growth_data_factor,622)
qplot(just_growth_data_factor, x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:04:49.347

```
# add an id column (presumably rows are individuals)
just_growth_data$id <- 1:nrow(just_growth_data)

# melt the data, collapsing the three categorical columns down into two:
# variable (the column name) and value (the column value)
require(reshape)
data.m <- melt(just_growth_data, id.vars="id")

# a simple scatterplot with the original rows connected
ggplot(data.m, aes(x=variable, y=value, group=id)) +
  geom_line() +
  geom_point() 
```

![清理数据的图](../Images/25e5380f579c3b019bf01daa2ababd75.png)

# ruby - 如何使用 nokogiri 获取属性值

> ID：11605261
> 
> 赞同：2
> 
> 时间：2012-07-23T00:52:43.583
> 
> 标签：ruby, dom, xpath, nokogiri

我有一个网页，我不知道其 DOM 结构......但我知道我需要在该特定网页中找到的文本......所以为了获得它的 xpath，我要做的是：

```
doc = Nokogiri::HTML(webpage)
doc.traverse { |node|
  if node.text?
    if node.content == "my text"
      path << node.path
    end
  end
}
puts path 
```

现在假设我得到一个像 ::

```
 html/body/div[4]/div[8]/div/div[38]/div/p/text() 
```

这样以后当我再次访问该网页时，我可以这样做::

```
 doc.xpath("#{path[0]}") 
```

而不是每次我想要文本时都遍历整个 DOM 树

我想做一些进一步的处理，因为我需要知道上述 xpath 输出中的哪些元素节点具有与之关联的属性以及它们的属性值是什么。我将如何实现这一目标？我想要的输出是

```
 #=> output desired
{ p => p_attr_value , div => div_attr_value , div[38] => div[38]_attr_value.....so on } 
```

我在搜索“我的文本”所在的节点时没有遇到问题..我想拥有“我的文本”节点的完整 xpath..这就是为什么我做了整个遍历......现在在找到完整的 xpath 之后我想要与我在到达“我的文本”节点时遇到的每个元素节点关联的属性

限制是 ::我无法使用 Web 浏览器中可用的任何开发人员工具

PS :: 我是 ruby​​ 和 nokogiri 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:22:34.463

要选择使用 XPath 表达式选择的元素的所有属性`someExpr`，您需要计算一个新的 XPath 表达式：

```
someExpr/@* 
```

where`someExpr`必须替换为用于选择特定元素的真实 XPath 表达式。

这将选择 Xpath 表达式选择的所有（我们假设这只是一个）元素的所有属性`someExpr`

例如，如果我们想要的元素是通过以下方式选择的：

```
/a/b/c 
```

那么它的所有属性都是通过以下方式选择的：

```
/a/b/c/@* 
```

# java - StringTokenizer 不使用新行制作标记

> ID：11605262
> 
> 赞同：0
> 
> 时间：2012-07-23T00:52:52.583
> 
> 标签：java, number-formatting, stringtokenizer

我无法让 StringTokenizer 将几行文本分解为单独的标记。输入的文字是

```
3
monkeys 
```

但是，StringTokenizer 显然将其解释为“3monkeys”。我需要它是“3”和“猴子”。正因为如此，一个 NumberFormatException 被抛出，因为我需要将字符串“3”转换为一个整数。

这是我到目前为止的代码。

```
 Scanner f = new Scanner( new FileInputStream("input.txt" )); // Yes, i have the actual input file path here, but I changed it for this question.
    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("output.txt")));

    String temp = "";
    //String cString = "";

    while( f.hasNextLine() ) {
        String cString = f.nextLine();
        temp += cString;
    }
    StringTokenizer everythingTokens = new StringTokenizer( temp );
    String[] everything = new String[ everythingTokens.countTokens() ];

    for( int i = 0; i < everything.length; i++ ) {
        everything[ i ] = everythingTokens.nextToken();
    }

    int numberOfPeople = Integer.parseInt( everything[ 0 ] ); // Line where exception occurs.
    out.println( everything[ 0 ] ); 
```

错误信息是这样的

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "3monkeys"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:492)
at java.lang.Integer.parseInt(Integer.java:527)
at gift1.main(gift1.java:32)
Java Result: 1 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:03:58.047

> StringTokenizer 不使用新行制作标记

结果中没有换行符`String`。要改变那个..

```
String eol = System.getProperty("line.separator");
...
  temp += cString + eol; 
```

最终，我会废弃该代码并重新开始。

1.  使用`StringBuilder`而不是`String +=`
2.  但是，`String`如果预期是整数，为什么还要将第一行添加到 a 中呢？立即解析它，然后忽略`String`为第一行读取的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:57:33.700

当您通过 将每一行附加到字符串时`temp += cString`，您拥有的是“3”+“monkeys”，即“3monkeys”。您可以通过在每行后添加一个空格来解决此问题；`temp += cString + " "`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T00:58:32.117

发生的事情是你将 3 和猴子与这些连接起来

```
while( f.hasNextLine() ) {
    String cString = f.nextLine();
    temp += cString;
} 
```

所以 temp 现在将包含 3monkeys 你正在删除换行符

如果您格式化输入文件，使得每一行都是一个单独的标记，那么我认为您甚至不需要标记器，您只需将 cString 添加到数组或更好地使用 ArrayList 这样您就不必介意数组的大小

# c# - c# STILL 返回错误的核心数

> ID：11605268
> 
> 赞同：5
> 
> 时间：2012-07-23T00:53:20.067
> 
> 标签：c#, .net, cpu, multicore

好的，所以我[在 C# 中发布 GetEnvironmentVariable("NUMBER_OF_PROCESSORS") 返回错误的数字](https://stackoverflow.com/questions/11571994/in-c-sharp-getenvironmentvariablenumber-of-processors-returns-the-wrong-numb)，询问如何在 C# 中获取正确的内核数。一些乐于助人的人向我提出了一些类似问题的问题，但我已经尝试过这些解决方案。然后我的问题被关闭，因为它与另一个问题相同，这是真的，但那里给出的解决方案不起作用。所以我正在打开另一个，希望有人能够帮助意识到其他解决方案不起作用。

那个问题是[如何通过 .NET/C# 找到 CPU 核心数？](https://stackoverflow.com/questions/1542213/how-to-find-the-number-of-cpu-cores-via-net-c)它使用 WMI 来尝试获得正确数量的内核。好吧，这是那里给出的代码的输出：

```
Number Of Cores: 32
Number Of Logical Processors: 32
Number Of Physical Processors: 4 
```

根据我的最后一个问题，该机器是运行 Windows Server 2008 R2 HPC 版本的 64 核 AMD Opteron 6276（4x16 核）。

不管我做什么，Windows 似乎总是返回 32 个内核，即使有 64 个内核可用。我已经确认机器只使用了 32 个内核，如果我硬编码 64 个内核，那么机器会使用所有内核。我想知道检测 AMD CPU 的方式是否可能存在问题。

仅供参考，如果您还没有阅读最后一个问题，如果我在命令行中键入 echo %NUMBER_OF_PROCESSORS"，它会返回 64。它不会在编程环境中执行此操作。

谢谢，贾斯汀

更新：输出 PROCESSOR_ARCHITECTURE 从命令行返回 AMD64，但从程序返回 x86。该程序是在 64 位硬件上运行的 32 位程序。我被要求将其编译为 64 位，但它仍然显示 32 个内核。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T04:40:31.743

感谢您的帮助，但我找到了问题所在。正如我所料，这是由于 AMD 的设计。他们正在使用一种称为 MCM（我认为是多芯片模块）的新架构，这会导致 Windows 无法正确识别内核数量。我将此作为解决方案发布，以防其他人遇到它。一位同事指导我使用[http://support.microsoft.com/kb/2711085上提供的修补程序](http://support.microsoft.com/kb/2711085)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T17:01:49.577

在 Windows 7/Windows Server 2008 **R2**之前，逻辑处理器的最大数量限制为 CPU 寄存器的大小：32 位操作系统为 32，64 位系统为 64。这是因为对单个寄存器大小的值进行原子操作很容易。

为了与假定处理器数量永远不会超过 32 的 32 位应用程序兼容，返回的`SYSTEM_INFO`结构的结构上限为 32。32 位进程可以调用以获取 64 位视图。.NET 的属性调用.`dwNumberOfProcessors``GetSystemInfo``GetNativeSystemInfo``Environment.ProcessorCount``GetSystemInfo`

Windows 7/2008 R2 使用更新的内核，将支持的处理器内核数量从 64 个更改为 256 个，并取消了一些内核锁定。为了与旧应用程序兼容，Windows 7 引入了*处理器组*的概念。所有处理处理器掩码的旧 API 现在都在进程*组*内的处理器上运行，而不是在所有处理器上运行。对于 64 个或更少的处理器，只有一组，但 Windows 7 最多支持 4 组。Windows 8/Server 2012 支持 10 个。（32 位操作系统不能使用超过 32 个逻辑处理器，并且总是一组。）如果你想知道实际的核心数量和它们的排列，你必须调用`GetActiveProcessorCount`.

我找不到任何明确说明的信息，但`NUMBER_OF_PROCESSORS`出于同样的原因，我预计会受到限制，并且 32 位进程的环境上限为 32。

Windows Server 2008 R2 确实是用词不当。这意味着与 Windows Server 2008 相比，Windows 核心的变化很小，但事实并非如此。

# java - mvn eclipse:eclipse 不在构建路径中添加 src

> ID：11605269
> 
> 赞同：0
> 
> 时间：2012-07-23T00:53:32.400
> 
> 标签：java, maven, maven-2

为什么我运行创建eclipse项目`src`后不在buildpath中？`mvn eclipse:eclipse`

我应该手动将 src 添加到 buildpath 吗？我担心`mvn eclipse:eclipse`下次运行后这个配置会丢失。

项目结构如下：

![在此处输入图像描述](../Images/4afa1d9644a751290cb6abf94e768fce.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:49:37.157

使用 maven 的主要目的是帮助减少构建应用程序所需的依赖软件库（jar）的重复。所以 maven 项目结构与普通的 web 应用程序结构有点不同。如果您担心使用 maven，请不要使用 maven 项目。您可以手动为您的项目添加必要的库。

# regex - perl 正则表达式匹配字符后面的所有单词

> ID：11605271
> 
> 赞同：1
> 
> 时间：2012-07-23T00:54:18.000
> 
> 标签：regex, perl

我不是 Perl 和正则表达式的专家。所以这是我的问题。

我将如何编写一个正则表达式来匹配指定字符右侧的字符串中的所有单词并在 Perl 中分别检索每个单词？

我不明白如何匹配未指定数量的单词，然后最重要的是一次检索一个？如果这是不可能的，我在 Perl 中最好的选择是什么？

EG：我有一个 C 作业，例如`b=var1+var2`. 我希望能够提取`var1`它`var2`是否存在。重要的是我不想匹配特定的`var1`and `var2`，而是赋值运算符之后的任何变量。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:21:19.680

[`\G`](http://perldoc.perl.org/perlre.html#Assertions)/[`pos`](http://perldoc.perl.org/functions/pos.html)可能有用。

```
$_ = 'b=var1+var2';
# force further /g matches to start after the first '='
/=/g;

while (/(\w+)/g) {
    print "$1\n";
}

# prints
# var1
# var2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:49:35.077

也许以下内容对您有用：

```
use Modern::Perl;

my $string = 'b=var1+var2';
my $after  = '=';

say for ( $string =~ /$after(.*)/ )[0] =~ /(\w+)/g; 
```

输出：

```
var1
var2 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T01:06:47.770

您可以在正则表达式中使用嵌套组。因此，例如，以下正则表达式应该匹配等式字符之后的所有单词（定义为 \w，但您可以调整它）（由非 \w 分隔，但您也可以调整它）：

```
=((?<Word>\w*)[^\w]*)* 
```

# css - Less：@font-face 参数 mixin 的第二次调用保留了第一次调用的值

> ID：11605277
> 
> 赞同：0
> 
> 时间：2012-07-23T00:55:34.130
> 
> 标签：css, fonts, font-face, less

我尝试在 LESS 中包含网络字体。部分完成工作的参数混合如下：

```
.fontface(@fontName, @fontFile) { 
    @font-face { 
        font-family: @fontName;
        src: url("@{fontFile}.eot");    
        src: url("@{fontFile}.eot?#iefix") format('embedded-opentype'),
        url("@{fontFile}.woff") format('woff'),
        url("@{fontFile}.ttf") format('truetype'),
        url("@{fontFile}.svg#DistantGalaxyRegular") format('svg');
        font-weight: normal;
        font-style: normal; } }
.font(@fontsize:10pt, @fontName:"Aierbazzi", @fontFile:"Aierbazzi-fontfacekit/aierbazzi-webfont") { 
        .fontface(@fontName, @fontFile);
font-family:@fontName;
font-size:@fontsize; } 
```

第一次调用它工作正常：

```
.font1 { .font(24pt, "Black-Rose","Black-Rose-fontfacekit/BLACKR-webfont"); }
.font4 { .font(24pt, "bubblegum-sans","bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont"); } 
```

结果是：

```
.font1 { 
    font-family:"Black-Rose";
    font-size:24pt; }
    @font-face { 
        font-family:"Black-Rose";
        src:url("Black-Rose-fontfacekit/BLACKR-webfont.eot");
        src:url("Black-Rose-fontfacekit/BLACKR-webfont.eot?#iefix") format('embedded-opentype'),url("Black-Rose-fontfacekit/BLACKR-webfont.woff") format('woff'),url("Black-Rose-fontfacekit/BLACKR-webfont.ttf") format('truetype'),url("Black-Rose-fontfacekit/BLACKR-webfont.svg#DistantGalaxyRegular") format('svg');
        font-weight:normal;
        font-style:normal; }

.font4 { 
    font-family:"bubblegum-sans";
    font-size:24pt; }
    @font-face { 
        font-family:"Black-Rose";
        src:url("Black-Rose-fontfacekit/BLACKR-webfont.eot");
        src:url("Black-Rose-fontfacekit/BLACKR-webfont.eot?#iefix") format('embedded-opentype'),url("Black-Rose-fontfacekit/BLACKR-webfont.woff") format('woff'),url("Black-Rose-fontfacekit/BLACKR-webfont.ttf") format('truetype'),url("Black-Rose-fontfacekit/BLACKR-webfont.svg#DistantGalaxyRegular") format('svg');
        font-weight:normal;
        font-style:normal; } 
```

当我交换两行时：

```
.font4 { .font(24pt, "bubblegum-sans","bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont"); }
.font1 { .font(24pt, "Black-Rose","Black-Rose-fontfacekit/BLACKR-webfont"); } 
```

再次在 CSS 中注册了第一个网络字体：

```
.font4 { 
    font-family:"bubblegum-sans";
    font-size:24pt; } 
@font-face { 
    font-family:"bubblegum-sans";
    src:url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot");
    src:url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot?#iefix") format('embedded-opentype'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.woff") format('woff'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.ttf") format('truetype'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.svg#DistantGalaxyRegular") format('svg');
    font-weight:normal;
    font-style:normal;}

.font1 { 
    font-family:"Black-Rose";
    font-size:24pt; }
@font-face { 
    font-family:"bubblegum-sans";
    src:url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot");
    src:url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot?#iefix") format('embedded-opentype'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.woff") format('woff'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.ttf") format('truetype'),url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.svg#DistantGalaxyRegular") format('svg');
    font-weight:normal;
    font-style:normal; } 
```

可能是什么原因？我此刻一无所知。非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:33:25.580

[基于这个当前（根据我的回答）的错误](https://github.com/cloudhead/less.js/issues/699)，我使用了一个人在那里发布的解决方案来修改您的代码。它需要复制输入，`@fontName`以避免将变量传递给`.fontface`调用（现在从`@font-face`块内部调用），但它确实给出了正确的输出：

**较少的**

```
.fontface(@fontName:"Aierbazzi", @fontFile:"Aierbazzi-fontfacekit/aierbazzi-webfont")  {   
    font-family: @fontName;
    src: url("@{fontFile}.eot");    
    src: url("@{fontFile}.eot?#iefix") format('embedded-opentype'),
    url("@{fontFile}.woff") format('woff'),
    url("@{fontFile}.ttf") format('truetype'),
    url("@{fontFile}.svg#DistantGalaxyRegular") format('svg');
    font-weight: normal;
    font-style: normal; 
} 

.font(@fontsize:10pt, @fontName:"Aierbazzi"){
    font-family:@fontName;
    font-size:@fontsize; 
}

.font1 { 
    .font(24pt, "Black-Rose");
    @font-face { 
       .fontface("Black-Rose","Black-Rose-fontfacekit/BLACKR-webfont");
    } 
}

.font4 { 
    .font(24pt, "bubblegum-sans");
    @font-face { 
        .fontface("bubblegum-sans","bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont");
    } 
} 
```

**CSS 输出**

```
.font1 {
  font-family: "Black-Rose";
  font-size: 24pt;
}
@font-face {
  font-family: "Black-Rose";
  src: url("Black-Rose-fontfacekit/BLACKR-webfont.eot");
  src: url("Black-Rose-fontfacekit/BLACKR-webfont.eot?#iefix") format('embedded-opentype'), url("Black-Rose-fontfacekit/BLACKR-webfont.woff") format('woff'), url("Black-Rose-fontfacekit/BLACKR-webfont.ttf") format('truetype'), url("Black-Rose-fontfacekit/BLACKR-webfont.svg#DistantGalaxyRegular") format('svg');
  font-weight: normal;
  font-style: normal;
}
.font4 {
  font-family: "bubblegum-sans";
  font-size: 24pt;
}
@font-face {
  font-family: "bubblegum-sans";
  src: url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot");
  src: url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.eot?#iefix") format('embedded-opentype'), url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.woff") format('woff'), url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.ttf") format('truetype'), url("bubblegum-sans-fontfacekit/BubblegumSans-Regular-webfont.svg#DistantGalaxyRegular") format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

# javascript - 当我将鼠标悬停在图像上时，我需要使用 JavaScript 更改图像的不透明度值，但我的代码不起作用

> ID：11605282
> 
> 赞同：2
> 
> 时间：2012-07-23T00:56:11.073
> 
> 标签：javascript, css, dom-events, mouseover, opacity

我需要在鼠标悬停时增加图像不透明度，并在鼠标移出时减少图像不透明度，并且我需要它是渐进的，而不是像 CSS 那样即时。

```
<html>
    <head>
    </head>
    <body>
        <img id="test" src="space1.png" onmouseover="updateOpacity()"/>

        <script type="text/javascript">

            var element = document.getElementById('test');
            var opacity = element.style.opacity;

            function updateOpacity()
            {
                opacity = opacity += 0.2;

                if(opacity >= 1)
                {
                    // done
                    opacity = 1;
                }
                else
                {
                    element.style.opacity = opacity; // this updates the opacity
                    setTimeout(function(){updateOpacity();}, 50); // 50 is the delay, 50milliseconds
                }
            }
        </stript>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:06:34.493

如果你不需要支持当前的 IE，你可以使用[CSS 转换](http://www.w3.org/TR/css3-transitions/)干净地做到这一点：

### HTML

```
<img id="test" src="space1.png"/> 
```

### CSS

```
#test {
    transition: opacity 600ms;
    opacity: 0.35;
}

#test:hover {
    opacity: 1.0;
} 
```

强制性 jsFiddle：http: [//jsfiddle.net/millimoose/uNeMg/](http://jsfiddle.net/millimoose/uNeMg/)

（为了清楚起见，我省略了供应商前缀并使用[`-prefix-free`](http://leaverou.github.com/prefixfree/).）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:20:36.867

jQuery是一个选项吗？

```
<img id="test" src="space1.png" style="opacity: 0.1;">

<script>
var delay = 500; //500ms
$("#test").mouseover(function(){
    $(this).stop().animate({
        opacity: 1.0
    }, delay);
}).mouseout(function(){
     $(this).stop().animate({
        opacity: 0.1
    },  delay); 
});
</script> 
```

**编辑：http:** [//jsfiddle.net/m3PAy/](http://jsfiddle.net/m3PAy/)

# objective-c - initWithFrame 正在填充屏幕，而不是创建我想要的大小的框架

> ID：11605285
> 
> 赞同：2
> 
> 时间：2012-07-23T00:56:57.813
> 
> 标签：objective-c, cocoa-touch, ipad

我是 Cocoa 开发的新手，我怀疑这是一个菜鸟问题。

我正在使用定制的 UIView 创建一个简单的背景画布。我希望我能够创建这个画布，使其从主视图略微缩进，以便我可以在以后添加工具栏。但是，当我使用 initWithFrame （以及任何其他 init ）时，画布总是被创建为全屏的大小，而不是略小于全屏。即使我完全覆盖了 CGRect 的值，它也没有什么区别。我设置了一个 touchesBegan 事件并将背景颜色设置为绿色以便能够确定成功，但我得到的只是一个完全绿色的屏幕和一个在任何地方都有效的触摸事件。

请帮助 - 这让我发疯，我在网络上的任何地方都找不到答案。

相关代码如下（目前整个应用程序中实际上并没有比这更多的代码）：

应用委托

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.objMainViewController = [[MainViewController alloc] init];
self.window.rootViewController = self.objMainViewController;
[self.window makeKeyAndVisible];

return YES;

} 
```

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import "viewCanvas.h"

@interface MainViewController : UIViewController

@property (strong, nonatomic) viewCanvas *objViewCanvas;

-(id)init;

@end 
```

主视图控制器.m

```
#import "MainViewController.h"
#import "viewCanvas.h"

@implementation MainViewController

@synthesize objViewCanvas;

-(id)init
{

    if (self = [super init]) {
        CGRect frame = CGRectMake(100, 100, 100, 100);
        objViewCanvas = [[viewCanvas alloc] initWithFrame:frame];     
    }
    return self;
}

- (void)loadView {

   self.view = objViewCanvas;

}

- (void)viewDidLoad
{
    [super viewDidLoad];

} 
```

视图画布.h

```
#import <UIKit/UIKit.h>
#import "viewCanvas.h"

@interface viewCanvas : UIView {

}

//Init
- (id) initWithFrame:(CGRect)frame;

//Events
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;

@end 
```

viewCanvas.m

```
#import "viewCanvas.h"

@implementation viewCanvas

//Standard inits
- (id) initWithFrame:(CGRect)frame{   

self = [super initWithFrame:frame];
[self setBackgroundColor:[UIColor greenColor]];
return self;

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Touches Began Canvas" message:@"Canvas Touches Began" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles: nil]; 
    [alert show];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:43:36.190

我认为默认情况下，视图控制器的视图会填满整个屏幕，因此您需要向该视图添加一个子视图，即较小的 viewCanvas 对象（顺便说一句，您应该遵守命名规则并用大写字母 ViewCanvas 命名您的类） . 在 MainViewController .m 文件中试试这个：

```
 -(id)init{
    if (self = [super init]) {
        CGRect frame = CGRectMake(100, 100, 100, 100);
        objViewCanvas = [[ViewCanvas alloc] initWithFrame:frame]; 
        self.contentView = [[UIView alloc] initWithFrame:CGRectMake(1, 1, 1, 1)]; //this frame doesn't matter
        [self.contentView setBackgroundColor:[UIColor whiteColor]];
    }
    return self;
}

- (void)loadView {
    self.view = self.contentView;
    [self.view addSubview:objViewCanvas];
} 
```

# java - 装饰器模式与列表

> ID：11605286
> 
> 赞同：9
> 
> 时间：2012-07-23T00:57:16.690
> 
> 标签：java, design-patterns

在阅读装饰器模式时，遇到了一些需要澄清的事情。在装饰器模式中，我们只是包装一个给定的对象并使用一个执行链进行计算。但是为什么我们不能拥有这些对象的列表并遍历每个对象。我的意思是没有链，我们不能只使用一个列表并通过每个对象进行简单的迭代吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T02:08:11.327

我相信你已经错过了装饰者的重点。

装饰器旨在透明地添加行为。经典的例子是 Java 中的 InputStream。您可以将缓冲、gzip 功能链接到输入流。但是，该装饰输入流的“用户”不需要知道添加了额外的行为。用户只需将该装饰流用作普通流。当然，如果您将每个“行为”作为一个单独的对象，并将链存储为另一个列表并显式地单独调用它们，那么它会起作用。然而，它失去了装饰器的“透明度”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:01:35.770

使用列表，您需要一些对象来管理列表并遍历和应用对象。为了与插件兼容，管理器对象必须是所有对象的（通常是抽象的）基类的子类。它只是不如让每个对象知道它正在包装的东西那么灵活，仅此而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-21T09:55:57.897

装饰动作将在 Object 中执行。使用列表，它在对象之外

# git - git 会复制我所有的文件吗？

> ID：11605290
> 
> 赞同：3
> 
> 时间：2012-07-23T00:57:47.540
> 
> 标签：git, backup-strategies

我正在尝试使用 git 在网站上实施新的备份系统。虚拟专用服务器总共有 20GB 空间，其中 5GB 可用空间。

当我`git add .`在`/var/www`（使用我最喜欢的`.gitignore`参数）运行时，我有一个巨大的 git 文件夹，它将我的硬盘驱动器填满。

目前尚不清楚为什么会发生这种情况，因为我希望`.git`目录包含有关位（元信息）的位，而不是我所有文件的二进制副本！

这里发生了什么？如果我的网站是 14GB，该`.git`目录会占用额外的 14GB 空间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T01:08:38.190

### 已用空间等于 GIT_DIR + GIT_WORK_TREE

> 如果我的网站是 14GB，.git 目录会额外占用 14GB 吗？

为了过度简化这个案例，是的。在非裸存储库中，Git 将所有跟踪的文件 blob 以及其他存储库对象（例如树和提交）存储在**GIT_DIR**下。它还在**GIT_WORK_TREE**中维护副本。

存储库使用 packfiles 和 deltification 来防止这种情况在正常用例中失控，但是如果您在非裸存储库中有 14GB 以上的数据——特别是如果这些文件中有很多是二进制资产——那么您很可能会在磁盘使用量上翻倍（或更糟）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:00:52.857

git repo 包含文件的整个历史记录。.git 文件夹将包含您工作目录中的所有位，因此您可以预期它会增加大小。由于压缩，它不会翻倍，但它会很重要。并且当您更改文件时，即使工作树的大小没有增加，repo 的总大小也会增加，因为历史记录已被存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T01:01:01.890

.git 文件夹将包含存储库中每个文件的完整历史记录以及对这些文件所做的每次更改。

它可能不是额外的 14GB，因为它具有相当好的压缩率，但它会接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T01:02:11.820

任何版本控制系统都需要在某处拥有这些位的副本，以便在您更改文件时它必须知道它们是什么。

大多数 VCS 在处理大型二进制文件时表现不佳。我不认为 14GB 全部由人类编写是预期的并且会改变。照片通常不适合 VCS；数据库使候选人更差。git 旨在管理人类编写的文本，它的所有近亲也是如此。

# html - 如何将 StringBuilder 的内容显示为 HTML？

> ID：11605292
> 
> 赞同：2
> 
> 时间：2012-07-23T00:58:16.800
> 
> 标签：html, asp.net-mvc, stringbuilder

我构建了一个应该用于生成 HTML 表的字符串。我不能让文本显示为 HTML，它只是写为纯文本。

这是我构建字符串的地方： StringBuilder HTMLTable = new StringBuilder();

```
 HTMLTable.AppendLine("<html>");
    HTMLTable.AppendLine("<head>");
    HTMLTable.AppendLine("<style type=\"text/css\">");
    HTMLTable.AppendLine("    .thd {background: rgb(220,220,220); font: bold 10pt Arial; text-align: center;}");
    HTMLTable.AppendLine("    .team {color: white; background: rgb(100,100,100); font: bold 10pt Arial; border-right: solid 2px black;}");
    HTMLTable.AppendLine("    .winner {color: white; background: rgb(60,60,60); font: bold 10pt Arial;}");
    HTMLTable.AppendLine("    .vs {font: bold 7pt Arial; border-right: solid 2px black;}");
    HTMLTable.AppendLine("    td, th {padding: 3px 15px; border-right: dotted 2px rgb(200,200,200); text-align: right;}");
    HTMLTable.AppendLine("    h1 {font: bold 14pt Arial; margin-top: 24pt;}");
    HTMLTable.AppendLine("</style>");
    HTMLTable.AppendLine("</head>");
    HTMLTable.AppendLine("</html>");

    HTMLTable.AppendLine("<body>");
    HTMLTable.AppendLine("<h1>Tournament Results</h1>");
    HTMLTable.AppendLine("<table border=\"0\" cellspacing=\"0\">");
    for (int row = 0; row <= max_rows; row++)
    {
        cumulative_matches = 0;
        HTMLTable.AppendLine("    <tr>"); 
```

// 等等等等

然后我将此字符串添加到与我的 .cshtml 文件关联的视图袋中。我试过这样的事情：

```
 <text>@ViewBag.bracketHTML</text> 
```

但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T01:15:34.543

首先，您应该接受@Zhihao 的建议并修复`HTML`结束标记。

之后，这应该适合你：

`ToString()`首先，使用构建器的函数将 HTML 的值设置为`ViewBag`控制器中的属性：

```
var builder = new StringBuilder();
builder.AppendLine("<div>");
builder.AppendLine("Testing 123");
builder.AppendLine("</div>");

ViewBag.testing = builder.ToString(); 
```

接下来，使用以下命令将其打印出来`Html.Raw()`：

```
@Html.Raw(ViewBag.testing) 
```

似乎运作良好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:02:17.413

有很多方法可以做到这一点。你可以通过

```
@(new HtmlString(ViewBag.bracketHTML)) 
```

或者你可以使用

```
@MvcHtmlString.Create(ViewBag.bracketHTML) 
```

或者你可以使用@Html.Raw

```
@Html.Raw(ViewBag.bracketHTML) 
```

# objective-c - 了解 textField:shouldChangeCharactersInRange:replacementString 中完整更改的字符串：

> ID：11605296
> 
> 赞同：33
> 
> 时间：2012-07-23T00:59:13.620
> 
> 标签：objective-c, cocoa-touch, uitextfield

我刚刚问[了一个](https://stackoverflow.com/questions/11604960/how-to-catch-a-change-in-uitextfield-text)关于如何监控对 a 的更改的问题，`UITextField`并收到了以下回复：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)replacementStr {
    // Enable "Next" if you like what's entered in the replacementStr
} 
```

这可行，但替换字符串不是整个字符串，只是它正在添加的内容。我怎样才能得到整个字符串？我的目标是查看文本字段中的字符串是否为空白或等于某个数字（在不同情况下）。

请注意，在这种情况下，文本字段的出口不起作用，因为在字段中的文本更改之前调用了此方法。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-23T01:02:19.437

```
NSString * proposedNewString = [[textField text] stringByReplacingCharactersInRange:range withString:replacementString]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-25T02:10:02.483

**斯威夫特版本**

在**Swift**中，我们需要将`textField's`文本转换为`NSString`. 以下内容可能有用：

```
let newString = (textField.text! as NSString).replacingCharacters(in: range, with: string) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:00:06.060

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString * searchStr = [textField.text stringByReplacingCharactersInRange:range withString:string];

//    [textField2 setText:[textField1.text stringByReplacingCharactersInRange:range withString:string]];
    NSLog(@"%@",searchStr);
    return YES;
} 
```

# java - 即使在我安装了 netbeans 7.2（完整包）之后，我是否还需要安装 Java EE6 SDK？

> ID：11605297
> 
> 赞同：1
> 
> 时间：2012-07-23T00:59:20.783
> 
> 标签：java, netbeans, java-ee-6, netbeans-7.2

我刚开始使用 Java EE6。尽管基于 java EE6 的示例应用程序运行成功，但我已经安装了 netbeans 7.2。我的问题是我还需要安装 Java EE6 SDK 吗？如果不是，那为什么 Java EE6 SDK 是单独出现的？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:58:20.483

不，你不需要它。

Java EE SDK 可作为独立包提供，因为 SUN 的理念是不需要任何特定环境 (IDE) 来进行 Java 开发。

# forms - VB6项目中不熟悉的表单图标

> ID：11605300
> 
> 赞同：1
> 
> 时间：2012-07-23T01:00:31.903
> 
> 标签：forms, vb6, icons

我是一名 C# 程序员，我对 VB 的了解几乎为零。具有讽刺意味的是，在我的工作中，我目前正在开发一个基于旧版 VB6 版本的项目。而且我发现了很多我不熟悉的东西，比如下面的两个表单图标。
![在此处输入图像描述](../Images/41f6222b433712c5f4b462c428aeeb2c.png)和![在此处输入图像描述](../Images/397b20b815887dd9e5540a7658fd679f.png)

第二个图标看起来有点模糊，就像 Windows 资源管理器中的隐藏文件或文件夹。谁能说出这两者的区别？它们对所讨论的表格意味着什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T07:15:42.200

显示大的可见窗体和小的模糊窗体的图标是 MDI 父窗体。显示大的模糊窗体和小的可见窗体的图标是 MDI 子窗体。

您可以在以下并排比较中看到差异：

     ![](../Images/c13e99c64492525518a6e0b64660b2ea.png)

VB 6 自动命名新的 MDI 父窗体`MDIFormN`，其中*N*是一个数字。MDI 子窗体只是`MDIChild`属性设置为的常规窗体`True`。

MDI 的首字母缩写词当然是指[多文档界面](http://en.wikipedia.org/wiki/Multiple_document_interface)。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644908.aspx)阅读有关 Windows 中 MDI 应用程序的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T01:57:52.283

带有微弱插入形式的图标用于 MDI 父窗体。如果您创建了一个 MDI 子窗体，它将有一个类似的图标，但不那么暗淡。

# android - Android 相机无法恢复原始活动

> ID：11605301
> 
> 赞同：2
> 
> 时间：2012-07-23T01:00:40.777
> 
> 标签：android, android-intent, camera

我创建了一个应用程序，将意图发送到相机应用程序以拍照。

```
if (storageState.equals(Environment.MEDIA_MOUNTED)) {

        try {
            String name=  "pic"+new Date().getTime();
            File photoFile = File.createTempFile(name, ".jpg");
            Log.i(TAG, "created file:"+name+".jpg");
            mImageUri = Uri.fromFile(photoFile);
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, mImageUri);
            startActivityForResult(takePictureIntent, ActionCode.TAKE_PHOTO);

        } catch (IOException e) {
            Log.e(TAG, "Could not create file. ", e);
     } 
```

}

当我拍照并按“勾选”确定按钮时。它不会向我的应用程序发送任何结果。

我在 logcat 中发现了这个错误。

```
07-22 17:56:30.289: E/iu.UploadsManager(5699): upload failed for ID=11 content_uri=content://media/external/images/media/5117 state=1 bytes_total=0,0%
07-22 17:56:30.289: E/iu.UploadsManager(5699): java.lang.IllegalArgumentException: Zero length file can't be uploaded
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.GDataUploader.upload(GDataUploader.java:95)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.UploadsManager.doUpload(UploadsManager.java:819)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.UploadsManager.access$1200(UploadsManager.java:54)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.UploadsManager$UploadTask.performSyncInternal(UploadsManager.java:1390)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.UploadsManager$AutoUploadTask.performSyncInternal(UploadsManager.java:1874)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.UploadsManager$UploadTask.performSync(UploadsManager.java:1309)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.InstantUploadSyncManager.performSyncInternal(InstantUploadSyncManager.java:545)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.InstantUploadSyncManager.performSync(InstantUploadSyncManager.java:591)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at com.google.android.apps.plus.iu.InstantUploadSyncService$InstantUploadSyncAdapter.onPerformSync(InstantUploadSyncService.java:180)
07-22 17:56:30.289: E/iu.UploadsManager(5699):  at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:254) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T21:47:28.093

仅供参考（我碰巧现在正在打开它们），这里有一些相关的 SO：

*   [Android 相机无法恢复原始活动](https://stackoverflow.com/questions/11605301/android-camera-does-not-return-to-original-activity)
*   [按下 OK 按钮后，Android 相机活动不会返回到我的应用程序](https://stackoverflow.com/questions/12812165/android-camera-activity-doesnt-return-to-my-app-when-the-ok-button-is-pressed)
*   [拍摄照片后，Android 的相机不会返回我的应用程序](https://stackoverflow.com/questions/8545457/androids-camera-doesnt-go-back-to-my-app-when-photo-has-been-taken)
*   [保存后相机活动不返回结果](https://stackoverflow.com/questions/8624056/camera-activity-does-not-return-a-result-after-save)
*   [相机活动不会返回到上一个/调用者活动](https://stackoverflow.com/questions/10871315/camera-activity-does-not-return-to-the-previous-caller-activity)

他们大多发现原因是保存图像文件时出现问题，或者`onActivityResult`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T08:45:10.130

这可能对人们有所帮助，因为我几天来一直在努力解决这个问题。

我正在开发一个继承的项目，将 Cordova 与最新的 Phonegap 条形码扫描仪（现在由 wildabeast 在 GitHub 上维护）一起使用，并且在修复了一些 Cordova 版本问题，将项目从 Cordova 版本 2 升级到 3.1.0 之后，我仍然拥有使用条形码扫描仪后应用程序无法返回的问题。

使用 window.onunload 事件，我发现应用程序实际上是在条码扫描器插件启动之前卸载的。事实证明这是*设计使然*，并且是由开发人员选项引起的，称为“**不保留活动**”。禁用此选项以“保持活动”运行您的应用程序，并且它不会关闭。

我不确定哪些手机启用了此选项（此处为三星 Note II，使用 Android 4.1.2）以及是否或如何绕过它，我不确定如何在不依赖的地方开发我的应用程序在这个选项上。实施 Scandit 扫描仪插件并没有解决问题，它只是稍微改善了问题，但它仍然是一个命中注定的问题。现在我坚持使用 Phonegap 插件。

希望这可以帮助别人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:09:22.207

您的代码的问题是您正在创建一个无效的文件名。

```
String name=  "pic"+new Date().getTime(); 
```

创建一个名称中包含名称的文件，`:`这使其无效，并且相机无法存储图像以返回给您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T04:50:17.253

参考下面的代码

```
 path = Environment.getExternalStorageDirectory() + "/"
            + filename;

    btnTakePhoto.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            File file = new File(path);
            Uri outputFileUri = Uri.fromFile(file);

            Intent intent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

            startActivityForResult(intent, TAKE_PICTURE);

        }
    }); 
```

接着

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK && requestCode == TAKE_PICTURE) {

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 3;

        bitmap = BitmapFactory.decodeFile(path, options);
        // Fetch the image from give path.

        imageView.setImageBitmap(bitmap);

    }
 } 
```

# asp.net - 如何从我的 ASP.net 应用程序在谷歌博客中发布博客

> ID：11605304
> 
> 赞同：0
> 
> 时间：2012-07-23T01:00:53.690
> 
> 标签：asp.net

我希望从我的 ASP.net 应用程序将博客发布到我的谷歌博客页面。那可能吗？在 facebook 墙上发布链接的概念相同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:56:47.910

是的。请参阅[Blogger API](https://developers.google.com/blogger/)文档

# dynamic - MediaElement.js 动态内容在 IE9 中不起作用

> ID：11605305
> 
> 赞同：0
> 
> 时间：2012-07-23T01:00:58.570
> 
> 标签：dynamic, internet-explorer-9, mediaelement.js

我正在尝试在网站上使用 MediaElement.js，并且在除 IE 之外的所有浏览器中一切都运行良好，尤其是 IE9（目前我不太关心支持低于 IE9）。我正在动态填充我读过的 ME 可能会导致 IE 出现问题，但我只是不确定是否有解决方法。我这样做的原因是因为这是一个投资组合站点，其中所有项目数据都通过 getJSON 调用加载，一旦加载，所有项目都会填充适当的数据并动态创建。有几个视频项目。我已经将代码简化为我项目之外的示例，该示例基本上经历了相同的行为。如果我只是写出 HTML 并在 JS 中控制它可以工作，但是当我通过 JS 创建 HTML 然后尝试播放时，我得到错误日志（在代码中创建 ME 播放器）。这是代码：

```
$(function() {
            var details = {
                    width: 640,
                    height: 480,
                    src: 'work/television/1'
                },
                $body = $('body'),
                $vid = $('<video width="' + details.width + '" height="' + details.height + '" preload="none" id="vidPlayer1"></video>'),
                $mp4 = $('<source src="' + details.src + '.mp4" type="video/mp4" title="mp4">'),
                $webm = $('<source src="' + details.src + '.webm" type="video/webm" title="webm">'),
                $ogg = $('<source src="' + details.src + '.ogv" type="video/ogg" title="ogg">'),
                $flash = $('<object width="' + details.width + '" height="' + details.height + '" type="application/x-shockwave-flash" data="swf/flashmediaelement.swf"><param name="movie" value="swf/flashmediaelement.swf"><param name="flashvars" value="controls=true&file=' + details.src + '.mp4"></object>'),
                $error = $('<p>The available video formats are not supported by your browser. :(</p>'),
                $controls = $('<div class="videoControls playBtn"></div>');

            $body.append($controls);

            $vid.append($mp4);
            $vid.append($webm);
            $vid.append($ogg);
            $vid.append($flash);
            $vid.insertAfter($controls);

            var vidPlayer = new MediaElementPlayer('#vidPlayer1', {
                features: [],
                // mode: 'shim',
                pluginPath: 'swf/',
                success: function(mediaElement) {
                    console.log('success', mediaElement);
                },
                error: function() {
                    console.log('Error loading player.  Please try again.');
                }
            });

            $body.on('click', function(evt) {
                vidPlayer.play();
            });
        }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:10:55.163

问题解决了。对于任何有兴趣的人，必须将我的附加内容合并到一个调用中，因此 $vid 变为：

```
$vid = $('<video width="' + details.width + '" height="' + details.height + '" preload="none" id="vidPlayer-' + row + '-' + slide + '"><source src="' + details.src + '.mp4" type="video/mp4" title="mp4"><source src="' + details.src + '.webm" type="video/webm" title="webm"><source src="' + details.src + '.ogv" type="video/ogg" title="ogg"><p>The available video formats are not supported by your browser. :(</p></video>') 
```

只需将其全部放在一个语句中，IE9 就可以正确识别它。问题是通过附加，因为我在做源变量从未被附加，因此 IE 不知道我的视频的来源是什么。

希望这对将来的某人有所帮助。

# c# - 如何做这个 Linq-to-Sql 连接？

> ID：11605308
> 
> 赞同：0
> 
> 时间：2012-07-23T01:01:11.967
> 
> 标签：c#, winforms, c#-4.0, linq-to-sql

请不要在兰巴帮我

```
I have two tables. 
Employees:   
pk           
name        

ExpenseTeamMembers: 
pk                        
expMgrPk
empPk

Example: pk      expMgrPk     empPk     
     1         7          81
     2         7          101
     3         13         99
     4         13         22
     5         13         56 
```

基本上，第一个表是员工列表，第二个表是用于跟踪哪些员工属于哪个经理的表。

第一个 sql 查找有效，mgr 让我在组合框中获得所选名称的 pk。

我在加入中尝试做的是查找 expMgrPk 并查看哪些员工属于它并返回他们的姓名而不是他们的 pk。我很忙，需要一点帮助。再次请不要在兰巴帮我！谢谢

```
 private void cboManagers_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cboManagers != null)
        {
            string selectedMgr = (string)cboManagers.SelectedValue;

            using (DataClasses1DataContext db = new DataClasses1DataContext())
            {
                int mgr = (from f in db.employees
                          where f.name == selectedMgr
                          select f.pk).FirstOrDefault();

                var emps = (from m in db.employees
                            join t in db.expenseTeamMembers on m.pk equals t.pK
                            where t.expMgrPk == mgr
                            select m.name).ToList();
                lstSelected.DataSource = emps;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:40:49.547

在 linq-to-sql 中，您可以通过编写两个`from`语句结合一个`where`语句来更轻松地编写连接。像这样的东西：

```
var emps = (from f in db.employees
            from m in db.expenseTeamMembers
            where m.pk == mgr && f.pk == m.empPk
            select f.name).ToList(); 
```

我发现这种语法更简单，并且在编译代码时，查询将转换为传统的 T-SQL 连接。

# php - 如何使用 $mail->SMTPDebug 作为字符串？

> ID：11605317
> 
> 赞同：3
> 
> 时间：2012-07-23T01:03:06.900
> 
> 标签：php

如果 strlen $mail->SMTPDebug 大于 10，我想回显“失败”。但我不知道如何使用 $mail->SMTPDebug 作为字符串。函数中的以下行启用调试。

```
$mail->SMTPDebug  = 1; 
```

但不能在我的函数中使用我的 if 语句。我怎样才能做到这一点 ？

```
function mailsender($val,$yollayan,$sifresi,$name,$subject,$message) {

$mail = new PHPMailer();  
$mail->IsSMTP();               
$mail->SMTPDebug  = 1;          
$mail->SMTPAuth = true;         
$mail->SMTPSecure = "tls";      

$mail->Username   = $yollayan;
$mail->Password   = $sifresi;

$mail->Host = "smtp.live.com";  
$mail->Port = "587";  

$mail->From = $yollayan;
$mail->Fromname = $name;
$mail->name = $name;

$mail->Subject = $subject;  
$mail->Body = $message;  
$mail->AddAddress($val);   
$mail->send();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-11T07:38:48.533

我猜你想对调试日志做点什么？class.smtp.php（第 114-126 行）内容如下：

> ```
> /**
>  * How to handle debug output.
>  * Options:
>  * * `echo` Output plain-text as-is, appropriate for CLI
>  * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
>  * * `error_log` Output to error log as configured in php.ini
>  *
>  * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
>  * <code>
>  * $smtp->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
>  * </code>
>  * @type string|callable
>  */ 
> ```

所以在你的代码中，简单地

> $mail->Debugoutput = function($str, $level) { do_something_with($str); };

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T01:22:05.990

您必须创建子类`PHPMailer`并重新定义`edebug`方法以将输出存储在变量中：

```
class MyPHPMailer extends PHPMailer {

  public $DbgOut = '';

  private function edebug($str) {
    $this->DbgOut .= $str;
  }

} 
```

你这样称呼它：

```
function mailsender($val, $yollayan, $sifresi, $name, $subject, $message) {

  $mail = new MyPHPMailer();  
  $mail->IsSMTP();               
  $mail->SMTPDebug  = 1;          
  $mail->SMTPAuth = true;         
  $mail->SMTPSecure = "tls";      

  $mail->Username   = $yollayan;
  $mail->Password   = $sifresi;

  $mail->Host = "smtp.live.com";  
  $mail->Port = "587";  

  $mail->From = $yollayan;
  $mail->Fromname = $name;
  $mail->name = $name;

  $mail->Subject = $subject;  
  $mail->Body = $message;  
  $mail->AddAddress($val); 
  $mail->send();

  if(strlen($mail->DbgOut) > 10)
    echo 'Failed'.PHP_EOL;

} 
```

# .net - 在同一个项目中使用 Oracle 和 sqlserver 逻辑中需要的帮助

> ID：11605318
> 
> 赞同：0
> 
> 时间：2012-07-23T01:03:10.603
> 
> 标签：.net, sql-server, vb.net, oracle

开始在 vb.net 中从事一个项目，在那里我从 Oracle 数据库中读取所有主数据（我只有读取 Oracle 数据的权限）

情况是我将数据从 Oracle 绑定到 Telerik 数据网格，管理员可以选择将更多用户添加到网格并删除用户。

但我无法在 Oracle 数据库中添加/删除数据，我只能从中读取。

因此，我正在考虑在 sql server 中添加 2 个表 addedusers 和 deleted users 并以某种方式检查用户是否在已删除表中，然后在将其绑定到数据网格之前将它们从 Oracle 结果中删除。

但我从来没有工作过，也不知道如何与这两个数据库交互。

如果您有更好的想法来处理这种情况请告诉我。

还让我知道如何扣除已删除的用户/如何将添加的用户从 sql 表添加到 Oracle 结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:35:46.233

与其尝试跨两个数据库协调您的结果集，更简单的解决方案是将所有用户信息提取到 SQL Server 数据库中并从那里开始工作。

1.  设置一个 ETL 过程（例如通过使用 SSIS），它会按计划将所有用户信息从 Oracle 数据库中提取到 SQL Server 中的**用户**表中。ETL 负责将 SQL Server 数据库中的用户与 Oracle 数据库中的用户同步。
2.  在 SQL Server 的用户表中包含一个名为**Deleted**的列，可用于跟踪已删除的用户。
3.  将 Telerik 控件绑定到 SQL Server 数据库中的**用户**表，而不是 Oracle 数据库。

高温高压

# java - If 条件的另一种写法

> ID：11605319
> 
> 赞同：2
> 
> 时间：2012-07-23T01:03:13.997
> 
> 标签：java, coding-style

我想知道如果有条件，是否有任何替代或优雅的写作方式，如果有

有更多的条件需要检查。

例子，

```
if(cond1){
   if(cond2){
      if(cond3){
         if(cond4){
            //all conditions are checked
             flag = true;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T01:04:41.713

是的，您可以使用逻辑 AND 运算符。

```
if(cond1 && cond2 && cond3 && cond4) {
    flag = true;
} 
```

它的等效性在于如果`cond1`为假，则不评估其余条件，依此类推。

在这种情况下，直接分配值可能更简单（受 Patrick 的原始答案启发）：

```
flag = cond1 && cond2 && cond3 && cond4; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T01:08:34.197

一个简短易读、优雅的方式是：

```
 flag = cond1 && cond2 && cond3 && cond4 ? true : false; 
```

或者正如 pstanton 所说：

```
 boolean flag = cond1 && cond2 && cond3 && cond4; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T01:10:33.393

如果少即是多，这是最优雅的：

```
boolean flag = cond1 && cond2 && cond3 && cond4; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T01:14:23.137

正如 ZongLi 所指出的，将其简化为一组 AND 很容易，但是当您有复杂的逻辑时，这会变得更加复杂

```
if(cond1){
   if(cond2){
      if(cond3){
         if(cond4){
            //all conditions are checked
             flag = true;
         }
      }
      if(cond4){
         flag3 = true;
      }
   }
   else
      flag2 = true;
} 
```

现在你遇到了一种情况，减少这种情况并不那么简单

```
flag1 = cond1 && cond2 && cond3 && cond4
flag2 = cond1 && cond2 && cond4
flag2 = cond1 && !cond2 
```

但是，将这些简化为布尔表达式通常会使事情的可读性和可维护性降低，因为它失去了变量之间的语义关系。上面的例子可以改写为

```
if(cond1){
   if(cond2){
      if(cond4){
         flag3 = true;
         if(cond3){
             flag = true;
         }
      }
   }
   else
      flag2 = true;
} 
```

或者

```
if(cond1 && cond2){

      if(cond4){
         flag3 = true;
         if(cond3){
             flag = true;
         }
      }
}
else if(cond1){ flag2 = true; } 
```

这将取决于最好的代码语义，但是，大量嵌套表明您最好使用布尔表达式或重组条件树。

在这里记住布尔逻辑等价是很有用的，尤其是`IF x THEN y`在逻辑上等价于`!X or Y`

# sms - 一些 SMS 消息如何传输发件人姓名？

> ID：11605323
> 
> 赞同：7
> 
> 时间：2012-07-23T01:04:08.100
> 
> 标签：sms, telephony, sms-gateway

我注意到我从公司收到的某些 SMS 消息带有“发件人姓名”。例如。就在今天，我从一个我以前从未使用过的号码（不是我的联系人）收到了一条短信，但是发件人的名字显示为“Adobe”。我也从其他公司得到这个。例如 Facebook、谷歌和银行。

![截屏](../Images/49680a074ca924afdd2e20253e6566d6.png)

它类似于电子邮件服务器的工作方式吗？（您在发送消息之前告诉服务器您“是谁”）运营商的手机信号塔是这种情况吗？

**我想我想知道该服务被称为什么以及它是如何工作的？**（即，您可以通过 SMS 消息发送“标头信息”还是手机信号塔只是欺骗消息的“发件人号码”并用字符替换它？）

（希望这是问这个问题的正确地方......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T20:47:29.697

MAP 协议（​​用于发送 SMS 消息的协议）允许将电话号码或字母数字号码指定为发件人。

AFAIK 这不能从您的手机设置，发件人号码将始终是您的公共电话号码，但 SMS 中心可以允许在其他接口上发送此类消息，例如银行和您提到的公司使用的接口（通常使用 SMPP 或 UCP 协议）。

请注意，一些电信公司不允许在来自其他地方但发送给客户的消息中使用这种发件人地址（或者他们不允许所有人使用）。他们为此使用称为家庭路由器的 SMS 垃圾邮件过滤器/防火墙。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-07T10:00:37.123

GSM、UMTS 和 LTE 中的移动通信由 3GPP 管理。

传入 SMS 中 SMS-DELIVER TPDU 中的 TP-OA 字段通常包含发送者的号码。

网络通常用 MSISDN 填充 TP-OA 字段。请参见 3GPP TS 23.040 图 C.10。

但如果是公司名称，TP-OA 可以使用数字信息元素类型作为*7 位默认字母表来制作字母数字*

我建议您阅读 3GPP TS 24.011 和 23.040 以了解 SMS 的工作原理。

但是，我必须指出，由于发件人不发送 TP-OA，因此不容易被欺骗。

# iphone - 如何访问 ios 邮件应用右上角使用的箭头按钮？

> ID：11605326
> 
> 赞同：0
> 
> 时间：2012-07-23T01:04:54.743
> 
> 标签：iphone, ios, image, uibutton, uisegmentedcontrol

我想知道邮件应用右上角的箭头图像是否可以在我自己的 segmentedControl 中使用。如果我能以某种方式访问​​左/右箭头而不是他们正在使用的上/下箭头，那就更好了。

这些是标准系统 UIButton 类型吗？我如何在我的 UISegmentedControl 中使用它们？

谢谢！

![在此处输入图像描述](../Images/1a4898938c23626a2b984b52ec96334b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:30:46.377

它们可能只是三角形的 Unicode 字符。

# mysql - 我应该为常见的数据库字段（如 active 、 createdAt 等）制作单独的表吗

> ID：11605327
> 
> 赞同：0
> 
> 时间：2012-07-23T01:04:56.737
> 
> 标签：mysql, sql, database, data-modeling

在我的每个数据库表中，我有 5-6 个重复的字段，例如

1.  积极的
2.  已删除
3.  创建时间
4.  更新时间
5.  更新者
6.  由...制作

如果我为这些人制作单独的桌子或留在主桌子内，我会感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:07:21.313

`<opinion>`我认为这不值得额外的麻烦。特别是因为这些行永远不会被其他行共享 - 其他行和这些行之间总是存在一对一的映射。只需将它们保存在它们现在所在的表中即可。`</opinion>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:22:59.627

在我看来，我会和你一样，把它们放在每张桌子上，因为你不能分开价值。你怎么知道如果active是指this，那么others指的是this？

谢谢。问候， 阿尔弗雷德

# javascript - 当我更改 Three.js 网格的比例时，为什么我的旋转会出错？

> ID：11605330
> 
> 赞同：1
> 
> 时间：2012-07-23T01:05:09.217
> 
> 标签：javascript, matrix, webgl, three.js, rotational-matrices

我想围绕世界 x 和 y 轴旋转一个球体。我用这段代码成功地做到了这一点：

```
// Update ball rotation.
var tempMat = new THREE.Matrix4();
tempMat.makeRotationAxis(new THREE.Vector3(0,1,0), stepX/ballRadius);
tempMat.multiplySelf(ballMesh.matrix);
ballMesh.matrix = tempMat;
tempMat = new THREE.Matrix4();
tempMat.makeRotationAxis(new THREE.Vector3(1,0,0), -stepY/ballRadius);
tempMat.multiplySelf(ballMesh.matrix);
ballMesh.matrix = tempMat;
ballMesh.rotation.getRotationFromMatrix(ballMesh.matrix); 
```

然而，当我`ballMesh`以任何方式远离 (1,1,1) 时，旋转会以一种难以描述的方式出错。我在这里提出了一个 jsfiddle 示例：

[http://jsfiddle.net/pxTTv/26/](http://jsfiddle.net/pxTTv/26/)（使用方向键旋转）

如果您将比例（在 jsfiddle 代码中指示）更改回 (1,1,1)，它会按我的预期工作。

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:47:26.893

您将`scale`参数排除在对 的调用之外`vector.getRotationFromMatrix( matrix, scale )`。

此外，最好不要弄乱对象矩阵——除非你真的知道你在做什么。相反，只需设置对象的旋转、位置和比例，然后让库更新矩阵。

在您的情况下，您正在覆盖对象的矩阵，但幸运的是，它正在渲染调用中重新计算。

这是一个更正的小提琴：http: [//jsfiddle.net/pxTTv/27/](http://jsfiddle.net/pxTTv/27/)

# silverlight - LightSwitch 将字符串复制到剪贴板

> ID：11605332
> 
> 赞同：1
> 
> 时间：2012-07-23T01:05:30.210
> 
> 标签：silverlight, visual-studio-lightswitch

我添加了 System.Windows 和 Microsoft.LightSwitch.Threading；访问剪贴板。

当我运行这个程序时，我得到这个错误：无效的跨线程访问。

让剪贴板工作的任何想法？

```
 partial void btnCopyFaucets_Execute()
    {
        // Write your code here.
        try
        {
            string CopyText, nManu, nProductCode, nFaucet;
            Faucets cpyfaucet = this.FaucetsSearch.SelectedItem;

            nManu = Convert.ToString(cpyfaucet.Manufacturer);
            nProductCode = Convert.ToString(cpyfaucet.ProductCode);
            nFaucet = Convert.ToString(cpyfaucet.Faucet);

            CopyText = nManu + " " + nProductCode + " " + nFaucet;

            // THIS IS WHERE THE COMPILER IS NOT HAPPY.
            Clipboard.SetText(CopyText);
        }
        catch (Exception damnit)
        {
            MessageBox.Show(damnit.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:30:21.307

尝试像这样使用 Main 调度程序：

```
Microsoft.LightSwitch.Threading.Dispatchers.Main.BeginInvoke(() =>
 Clipboard.SetText(CopyText);
}); 
```

也许如果它是一个网络应用程序，那么之后你会遇到权限问题。

# objective-c - 无法访问 appDelegate NSMutableArray 但我可以访问和修改 appDelegate int

> ID：11605333
> 
> 赞同：0
> 
> 时间：2012-07-23T01:06:01.340
> 
> 标签：objective-c, ios, xcode, delegates

我的 appDelegate 中有 2 种类型的 var：int 和 NSMutableArray 我可以在 viewController 中访问 int var 但无法访问 NSMutableArray

这是代码：

appDelegate.h

```
#import <UIKit/UIKit.h>  
@interface AppDelegate : UIResponder <UIApplicationDelegate,NINetworkImageViewDelegate,FBSessionDelegate, FBDialogDelegate> 
{
    UIWindow *window;
    UINavigationController *navController;
    int nbNewsNonLues;
    NSMutableArray *tableauNews;

}
@property (strong, nonatomic) NSMutableArray *tableauNews;
@property (nonatomic) int nbNewsNonLues;
@end 
```

这些 var 在 AppDelegate.m 中很好地初始化（检查过）

然后我尝试在 ViewController.m 中使用此代码访问它们

```
@synthesize appDelegate = _appDelegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        NSLog(@"%@", appDelegate.tableauNews);
        NSLog(@"%d", appDelegate.nbNewsNonLues);
        NSLog(@"%@", appDelegate);
    }
    return self;
} 
```

日志返回

2012-07-23 02:58:21.475 Aviso_0.1[2990:11303]（空）

2012-07-23 02:58:25.432 Aviso_0.1[2990:11303] 2

2012-07-23 02:58:25.432 Aviso_0.1[2990:11303]

所以我无法访问 tableauNews 但我可以访问和修改 nbNewsNonlues??

我知道这是一个菜鸟问题，但我阅读并搜索了几个小时，我一定错过了关于委派的一些事情

需要帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:12:27.833

这两行不一样：

```
NSMutableArray *tableauNews;

@property (strong, nonatomic) NSMutableArray *tableauNews; 
```

在第一个中，您创建一个名为 tableauNews 的 iVar。在第二个中，您创建了一个名为 tableauNews 的属性，并带有一个名为 _tableauNews 的支持 iVar。请注意支持 iVar 中的低分：_tableauNews。所以你创建了两个不同的对象。当您分配、访问等 iVar tableauNews 和属性 self.tableauNews 时，您正在分配、访问两个不同的对象。但 iVar _tableauNews 与前面提到的属性 self.tableauNews 相同。为了防止将来出现此类错误，惯例是在您的 iVar 中添加前缀下划线。

更新以回答评论部分中的问题：

在这一行`@synthetise tableauNews = _tableauNews`中，这就是您`_tableauNews`为属性 ( `tableauNews`) 声明支持 iVar() 的方式。当您像上面那样声明属性`tableauNews`时，当您尝试声明相应的 .m 文件时`@synthesize tableauNews`，Xcode 会自动为您建议低于分数版本 ( `_tableauNews`) 作为支持 iVar，因此您无需`_tableauNews`在 iVars 声明中声明它 ( )头文件的部分。但是，您可以将您的财产与您自己的支持 iVar 相关联。例如，如果您在头文件中声明了一个 iVar 调用`tableauNewsTest`，那么理论上您可以在 .m 文件中执行此操作`@synthesize tableauNews = tableuNewsTest`。但不建议这样做。

# joomla - 使用 joomla 进行 SQL 查询

> ID：11605334
> 
> 赞同：1
> 
> 时间：2012-07-23T01:06:01.797
> 
> 标签：joomla, joomla2.5

我的 SQL 查询有问题。

我尝试弹出这些查询，结果什么都没有。

```
$query =$db->getQuery(true);
$query->select($db->quoteName('name'));
$query->from($db->quoteName('#__restaurant'));
$query->where($db->quote(constant("$vector[0]")) . '=' . $db->quote($v[$vector[0]]));
$db->setQuery($query);
$column=$db->loadObjectList(); 
```

…………

```
$query= $db->getQuery(true);
$query->select($db->quoteName('name'));
$query->from($db->quoteName('#__restaurant'));
$query->where($db->quoteName('zone'). '=' . $db->quoteName('atocha'));
$db->setQuery($query);
$column=$db->loadObjectList(); 
```

数据库不是空的，但是我为什么没有结果。任何的想法！！！

谢谢

谢谢大家我执行这个

```
$query= "SELECT *
FROM ".$db->nameQuote('#__restaurantes')."
WHERE ".$db->nameQuote('tipe')."=".$db->quote($v[$vector[0]]).";";
$db->setQuery($query);
$column=$db->loadObjectList(); 
```

并获得这个

SELECT * FROM `#__restaurantes`WHERE tipe='';sol

任何的想法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:52:29.577

我认为你的 quote() 和 quoteName() 函数有点落伍了。

试试这个：

```
$query= $db->getQuery(true);
$query->select('name');
$query->from('#__restaurant');
$query->where('zone = "atocha"');
$db->setQuery($query);
$column = $db->loadObjectList(); 
```

另外，如果这不起作用，请发布生成的 SQL。您可以通过以下方式获得：

```
echo $db->getQuery(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T13:18:25.137

非常感谢大家！

我有正确的查询，我把这里放给有同样问题的人。

```
$db=& JFactory::getDBO();

$query= "SELECT *
FROM ".$db->nameQuote('#__restaurant')."
WHERE ".$db->nameQuote(constant("$vector[0]"))."=".$db->quote($v[$vector[0]]).";";
$db->setQuery($query);
$column=$db->loadObjectList();

return $column; 
```

# java - 测量你在 Android 中使用 onTouchEvent 拖了多远？

> ID：11605339
> 
> 赞同：2
> 
> 时间：2012-07-23T01:06:43.470
> 
> 标签：java, android, touch-event

是否可以使用 onTouchEvent 测量某人在显示屏上拖动手指的距离？任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T01:13:10.267

您可以使用`ACTION_DOWN`和`ACTION_UP`存储手指触摸的起点和终点并计算拖动的距离。

例如：

```
Point p1;
Point p2;

View view = new View(this);

view.setOnTouchListener(new View.OnTouchListener() {
       public boolean onTouch(View v, MotionEvent event) {
         if(event.getAction() == MotionEvent.ACTION_DOWN)
            p1 = new Point((int) event.getX(), (int) event.getY());
         else if(event.getAction() == MotionEvent.ACTION_UP)
            p2 = new Point((int) event.getX(), (int) event.getY());

         return false;
      }
}); 
```

并且距离等于`Math.sqrt(Math.pow(p1.x-p2.x, 2) + Math.pow(p1.y-p2.y, 2))`。而且，如果你想计算任何时候拖动的距离，你可以存储第二个位置`if(event.getAction() == MotionEvent.ACTION_MOVE)`。

# map - 更改 goog.structs.Map 中的默认等于

> ID：11605342
> 
> 赞同：0
> 
> 时间：2012-07-23T01:07:15.530
> 
> 标签：map, equals, google-closure, google-closure-library

我正在使用谷歌关闭工具。我正在尝试将对象存储在 Map 中，并且我需要更改它们的比较方式，以便将键适当地评估为相等或不相等。有没有人知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:20:41.240

看来目前无法做到这一点。我已经重新调整了我的代码以在地图中使用整数！

# workflow-foundation-4 - 如何在 Windows 工作流基础 4 中的活动之间共享全局资源

> ID：11605344
> 
> 赞同：0
> 
> 时间：2012-07-23T01:07:27.677
> 
> 标签：workflow-foundation-4

我想创建一组在共享资源（如文件）上工作的自定义活动。这些自定义活动将在许多工作流中使用，每个工作流都将拥有该共享资源。我的目标是尽可能简单地创建这些工作流程，因为每个工作流程都只是一些基本活动的重新安排。

我已经设法使用 InArgument 并将此资源传递给每个活动，但由于这很乏味，我想知道如何简化它，以便不需要参数。

此外，是否可以在一个地方初始化此资源，以便所有工作流都可以假定它已经存在？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T08:46:51.533

如果您愿意，可以探索使用 Workflow Extensions。基本上，您利用“服务定位器”模式。

定义一个知道如何访问/修改您拥有的此文件的类。假设这个名为 ResourceLocator 的类实现了 IResourceLocator 接口。然后，当您创建工作流主机时，请执行此操作

```
class ServiceLocator:IServiceLocator
{

public FileStream GetFile(string path){
}

} 
```

//在这里初始化WF主机 host.Extensions.Add(()=>{new ResourceLocator();});

然后在您的自定义活动中，您可以执行

```
context.GetExtension<IResourceLocator>().GetFile(pathToFile); 
```

基本上，此扩展成为您在工作流之间共享通用代码的手段。您可以将其拆分为不同的程序集，并在不同的工作流项目之间共享。

# python - 在 Python 的嵌套 for 循环中使用 Continue 语句

> ID：11605346
> 
> 赞同：2
> 
> 时间：2012-07-23T01:07:43.883
> 
> 标签：python, for-loop, continue, readfile

嗨，我有一个从两个文件中读取数据的函数。我想要发生的是外部循环开始读取第一个文件，如果第一个文件中的 lum 大于定义值（LC），则循环跳到下一次迭代。如果不是，则代码移动到内部循环，该循环读取 hlist 并在 idc 和 id 相同的情况下构建 x、y、z 列表。如果 idc 和 id 不是相同的值，它会跳到内部循环的下一次迭代。当我打印测试语句时，内部循环似乎没有迭代，我不清楚为什么。我将不胜感激任何帮助

代码

```
def read_file(F):      #Function that reads data froma file #and extracts specific data columns
    X_pos = []
    Y_pos = []                # Creats Data Lists
    Z_pos = []
    Idh = []
    Id = []
    LC = float(sys.argv[1]) 
    N = 11#912639            # number of lines to be read
    Nl = 11#896030
    fl = open(Fl)            #opens catalog file
    fl.readline()
    nlines_catalog = islice(fl, Nl)
    f = open(F)           #Opens hlist file
    f.readline()          # Strips Header
    nlines_hlist = islice(f, N) #slices file to only read N lines

    for linel in nlines_catalog:
            if linel != '':
              linel = linel.strip()              
              linel = linel.replace('\t', '')
              columnsl = linel.split()
              lum = float(columnsl[1])
              id_catalog = int(columnsl[0])
              if lum >= LC:
                 continue
              print("lum1 =", lum)
              #Id.append(idc)
              print("id_catalog=", id_catalog)
              for line in nlines_hlist:
                 if line != '':
                    line = line.strip()
                    line = line.replace('\t', ' ')
                    columns = line.split()
                    id_hlist = int(columns[1])
                    #Idh.append(id)
                     if id_hlist != id_ccatalog:
                        continue
                    print('idc =', idc, 'id =', id)
                    x = columns[17]           
                    y = columns[18]
                    z = columns[19]
                    X_pos.append(x)
                    Y_pos.append(y)                #appends data in list
                    Z_pos.append(z)

    print(X)
    X = [float(p) for p in X_pos]        
    Y = [float(p) for p in Y_pos]
    Z = [float(p) for p in Z_pos]
    Xa = numpy.array(X, dtype=float)
    Ya = numpy.array(Y, dtype=float)
    Za = numpy.array(Z, dtype=float)

    return(Xa, Ya, Za) 
```

**编辑**

对内部循环的更改允许它重置并现在可以工作。

```
 if id_catalog ==  id_halo:
      print('id_catalog =',id_catalog,'id_halo =',id_halo)
      x = columns[17]             # assigns variable to columns
      y = columns[18]
      z = columns[19]
      #vx = columns[]
      #vy = columns[]
      #vz = columns[]
      X_pos.append(x)
      Y_pos.append(y)                #appends data in list
      Z_pos.append(z)
      break 
```

**编辑** 我无法从打印语句中复制我的原始输出，并进行了编辑以反映这一事实

```
VirtualBox:~$ python /home/Astrophysics/Count_FixedLoop.py -21.5 125
('lum1 =', -21.78545)
('idc=', 2701276876L)
('idc =', 2701276876L, 'id =', 2701276876L)
('lum1 =', -21.69835)
('idc=', 2699751347L)
('lum1 =', -21.69942)
('idc=', 2699724518L)
('lum1 =', -21.74543)
('idc=', 2699724331L)
('lum1 =', -21.60912)
('idc=', 2699724726L)
('lum1 =', -21.53862)
('idc=', 2699725014L)
('lum1 =', -21.53155)
('idc=', 2701277269L)
['34.57223'] 
```

这是我期望的输出

```
 ('lum1 =', -21.78545)
 ('idc=', 2701276876L)
 ('idc =', 2701276876L, 'id =', 2701276876L)
 ('lum1 =', -21.69835)
 ('idc=', 2699751347L)
 ('idc =', 2699751347L, 'id =', 2699751347L)
 ('lum1 =', -21.69942)
 ('idc=', 2699724518L)
 ('idc =', 2699724518L, 'id =', 2699724518L)
 ('lum1 =', -21.74543)
 ('idc=', 2699724331L)
 ('idc =', 2699724331L, 'id =', 2699724331L)
 ('lum1 =', -21.60912)
 ('idc=', 2699724726L)
 ('idc =', 2699724726L, 'id =', 2699724726L)
 ('lum1 =', -21.53862)
 ('idc=', 2699725014L)
 ('idc =', 2699725014L, 'id =', 2699725014L)
 ('lum1 =', -21.53155)
 ('idc=', 2701277269L) 
```

**编辑**

Fl 文件的几行示例，其中 idc 编号为 column[0]，lum 值为 column[1]。我在第一个循环中将满足条件的 idc 值加粗。

```
Format: ID, scatter = 0 0.05 0.1 0.13 0.15 0.16 0.18 0.2 0.25 0.3
**2701276876 -21.78545** -21.73791 -21.68872 -21.11125 -20.88102 -22.04709 -21.41715       -20.56944 -20.36757 -19.69895
**2699751347 -21.69835** -21.67935 -21.92425 -21.03465 -21.56561 -21.42124 -21.72893 -20.78131 -20.76342 -20.34830
**2699724518 -21.69942** -21.58352 -21.71149 -21.16240 -21.18507 -22.00277 -21.81500 -20.36141 -20.78227 -20.65697 
```

**编辑**

F 文件的示例行，其 id 和与第一个文件匹配的相应位置

```
#Scale(0) Id(1) Desc_scale(2) Descid(3) Num_prog(4) Pid(5) Upid(6) Desc_pid(7)   Phantom(8) Mvir(9) Orig_Mvir(10) Rvir(11) Rs(12) Vrms(13) Mmp(14) Last_mm(15) Vmax(16) X(17) Y(18) Z(19) 
 0.9523 **2701276876** 0.9583 2714557311      1       -1       -1       -1  0     3.56533e+13 3.56100e+13 695.459000 80.562000 548.820000  1 0.3603 561.490000 **34.57223 140.20813 130.81985** -110.000 323.430 -123.520 3.56533e+13 3.56533e+13 561.490000 599.410000 7.539e+14 -3.799e+12 -1.992e+14 0.10259
0.9523 **2699751347** 0.9583 2713034575      4       -1       -1       -1  0 3.36604e+13 3.31300e+13 678.981000 111.199000 500.400000  1 0.8083 514.010000 **28.70439 138.70247 138.52176** -215.310 252.520 -120.970 3.36604e+13 3.36604e+13 514.010000 599.250000 5.516e+14 1.044e+14 6.133e+14 0.10973
0.9523 **2699724518** 0.9583 2713007786      1       -1       -1       -1  0 2.98000e+13 2.97500e+13 654.997000 87.324000 457.460000  1 0.4863 514.660000 **8.01627 135.31783 123.13322** -178.990 558.900 1.250 2.98000e+13 2.98000e+13 514.660000 514.660000 8.529e+14 2.711e+14 -3.624e+14 0.15137 
```

我期望的是，当两个文件中的 id 匹配时，第二个循环将附加 X、Y 和 Z 位置列表。所以在这个例子中打印列表会给出

```
X = [34.57223,28.70439,8.01627]
Y = [140.20813,138.70247,135.31783]
Z = [130.81985,138.52176,123.13322] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:15:25.597

您似乎期望`nlines`表现得像一个*list*。但是，它是一个[*迭代器*](http://docs.python.org/library/itertools.html)，正如 Ignacio 上面指出的那样，它将被消耗*一次*。换句话说，内部循环不会在随后的外部循环执行中“重置”到第一行/索引。

考虑以下对您正在做的事情的模拟（我认为）。这是两个数据文件：

数据1：

```
file 1: one
file 1: two
file 1: three
file 1: four
file 1: five 
```

数据2：

```
file 2: one
file 2: two
file 2: three
file 2: four
file 2: five
file 2: six 
```

运行这个：

```
from itertools import islice

f1 = open ("Data1")
f2 = open ("Data2")

iterator1 = islice (f1, 3)
iterator2 = islice (f2, 3)

for line1 in iterator1:
    print line1

    for line2 in iterator2:
       print line2 
```

结果是：

```
file 1: one
file 2: one
file 2: two
file 2: three
file 1: two
file 1: three 
```

而人们可能会错误地认为`data2`. 的前 3 行中的每一行都会打印 3 行的内容`data1`。

因此，内部循环的第一次执行完全*消耗* `iterator2`. 在您自己的代码中，没有内部循环中断`id == idc`- 换句话说，您`nlines`在第一次执行内部循环时完全使用了 interator。

另请参阅[Python：itertools.islice not working in a loop](https://stackoverflow.com/questions/5020444/python-itertools-islice-not-working-in-a-loop)以获取另一个示例。

一种解决方案可能是在 时中断内部循环`id == idc`，但这将假设（我认为）您的第二个文件中的索引排序。您可以考虑实际使用内部循环的列表，尽管考虑到您的实际（非测试）数据的大小，这似乎是内存密集型的。您显然可以重新读取第二个文件，尽管性能会受到影响。

# python - 通过浏览器管理 python 程序设置

> ID：11605353
> 
> 赞同：0
> 
> 时间：2012-07-23T01:08:40.327
> 
> 标签：python, xml

我正在寻找一种管理正在编写的程序设置的好方法。该程序将是一项服务，因此用户根本不必与它进行交互。但是，将有大量设置需要处理（包括整个 dirwalk），我正在寻找将其呈现给用户的最佳方式。

理想情况下，我想要的东西基本上是我将单独构建的 XML 文件的一个很好的 gui。我想用 Django 来做这件事，但我试图让整个事情的安装尽可能简单。

TL;DR：我不知道它是否存在，但有什么东西可以清晰地呈现 XML 并允许将新设置保存到 XML 文档中吗？

# model-view-controller - 带有上传文件参考的 Playframework 2.0.1 模型

> ID：11605355
> 
> 赞同：0
> 
> 时间：2012-07-23T01:09:09.680
> 
> 标签：model-view-controller, file-upload, model, playframework-2.0

我对如何制作一个包含一些上传文件的模型感到困惑，例如：

用户有照片。

我已经知道如何上传文件，但这里的问题是关于如何处理现在上传的文件，如何将这个新上传的文件（示例中的照片）与模型（示例中的用户）链接）。

谢谢。

OBS：这里使用 Java 的 play，而不是 Scala。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:26:07.027

您必须将您的用户链接到他的图片。为此，您最好的选择是使用应该是唯一的用户 ID。

然后，如果您将照片上传到`pictures/user`文件系统中的文件夹下，那么您应该将图片另存为`pictures/user/USER_ID.png`（png 或 jpg 或其他任何格式）。

然后，您可以有一个根据用户 ID 检索图片的操作：

```
public static Result picture(String userId) {

    Picture picture = Picture.findPicture(userId);
    if (picture != null) {
        response().setContentType(picture.contentType);
        return ok(picture.bytes);
    }
    return notFound();
} 
```

图片类看起来像：

```
public class Picture {

    public byte[] bytes;

    public String contentType;

    public static Picture findPicture(String userId) {
          String[] extensions = {"png","jpg"}; // an enum should be better
          for (String extension:extensions) {
              String path = "pictures/user/" + userId + "." + extension;
              if (new File().exists(path)) {
                    Picture picture = new Picture();
                    picture.bytes = IOUtils.toByteArray(new FileInpustream(path));
                    picture.contentType = findContentType(extension);
                    return picture;
              }
          }
          return null;
    }

    protected static String findContentType(String extension) {
          if (extension.equalsIgnoreCase("jpg") {
              return "image/jpeg";
          } else if (extension.equalsIgnoreCase("png") {
              return "image/png";
          }
    }
} 
```

我曾经做过类似的事情（但图片存储在内存中），你可以看看[这里](https://github.com/Ekito/mapMyCost-server/blob/master/app/controllers/Application.java#L164)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:25:55.633

如果用户只有一张图片，只需创建一个约定。例如，如果您的用户在 2012 年 7 月 23 日注册并且 id = 100，则将文件移动到从这些数据映射的某个位置：

```
/uploaded-dir/2012/07/23/100/picture.jpg 
```

之后，您可以使用相同的约定来读取文件。

# ruby-on-rails - 用于更新属性的 Rails 按钮不起作用

> ID：11605358
> 
> 赞同：1
> 
> 时间：2012-07-23T01:10:15.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在对象的显示视图中有一个如下所示的链接：

```
<%= link_to "Approve", object_path(@object, status: true), method: :put, confirm: "Are you sure?", class: 'button' %> 
```

控制器中的更新操作是标准的，对象的常规编辑表单工作得很好。但由于某种原因，此链接没有将布尔字段更新为 true ...

我在这个链接上做错了什么吗？

编辑：更新控制器部分

```
def update
  @object = Object.find_by_certain_field(params[:id])
  if @object.update_attributes(params[:object])
    flash[:success] = "Object Updated"
    redirect_to @object
  else
    render 'edit'
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:56:20.270

`object_path(@object, status: true)`原因`params[:status]`是真实的，而不是`params[:object][:status]`你想要的，因此不更新对象`@object.update_attributes(params[:object])`

如果您想继续使用当前的代码模式，只需添加

```
parmas[:object] ||= {} 
params[:object][:status] = params[:status] if params[:status] 
```

前

```
if @object.update_attributes(params[:object]) 
```

一切都应该没问题。

否则，我建议您为此更新电话制作表格：

```
<% form_for @object, :method => :put do |f| %>
  <%= f.hidden_field :status, :value => true %>
  <%= f.submit "Approve" %>
<% end %> 
```

# android - 可以向已发布的应用添加广告

> ID：11605359
> 
> 赞同：5
> 
> 时间：2012-07-23T01:10:16.847
> 
> 标签：android, ads, google-play, updates

全部 - 我最近在 Google Play 上发布了一个应用程序。我想知道是否可以在我的应用更新中添加广告，或者我的应用是否必须以广告开头？（就像你不能从免费到 0.99 美元一样）。谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T01:33:22.333

这是 azgolfers 的回答/评论，但我只是想回答 fromat 以帮助其他用户知道我的问题确实已得到回答：“您始终可以向已发布的应用程序添加广告。广告网络与 Google Play 商店无关。希望您发布的应用是免费的，否则如果您在付费应用中投放广告，您的用户会抱怨。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T19:53:27.907

***不，如果不更新您的应用程序并且没有这个技巧，就不可能向您的应用程序添加新广告：D***

我也是开发商和出版商。
前天 admob 禁用了我最喜欢的应用程序的广告 1。
我不记得我的 .jks 文件密码，这意味着现在我无法更新我的应用程序。
我试图找到一个解决方案，但没有得到任何东西。
但是今天，当我研究 firebase 实时数据库时，我得到了一个想法，它也可能对你有所帮助。

***这是一个计划***：-

第一个：- 不要将您的广告 ID 存储在 string.xml 上，因为您无法更新字符串
第二个：- 仅将广告与代码集成（没有布局）
第三个：- 现在您将广告 ID
mAdView.setAdUnitId("ca- app-pub-8023878856256738/1741045606");

而是将“ca-app-pub ... your ad id”传递变量连接到firebase数据库，然后将您的广告ID放在firebase db
上这个技巧的好处：-
如果您想添加新广告，只需创建新的广告ID然后只需更改
应用广告中的 firebase db 即可自动切换到您的新广告 :)

[firebase 实时数据库视频](https://www.youtube.com/watch?v=noB98K6A0TY)

# javascript - 允许多封电子邮件并发送给所有人的表格

> ID：11605360
> 
> 赞同：0
> 
> 时间：2012-07-23T01:10:22.230
> 
> 标签：javascript, forms, php

我有一个表单，可以将信息通过电子邮件发送到在电子邮件字段中输入的电子邮件，但我希望用户能够在一个字段中输入多个电子邮件，并将信息发送给所有这些电子邮件。任何人都可以帮助编辑我的代码以允许这样做....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
       <meta http-equiv="content-type" content="text/html; charset=windows-1250">
       <title>Contact Form</title>
       <meta name="author" content="" />
       <meta name="copyright" content="" />
       <meta name="website" content="http://web-kreation.com" />

       <!-- the cascading style sheet-->
       <link href="stylecontact.css" rel="stylesheet" type="text/css" />

</head>

<body>
     <div id="contentForm">

            <!-- The contact form starts from here-->
            <?php
                 $error    = ''; // error message
                 $name     = ''; // sender's name
                 $email    = ''; // sender's email address
                 $subject  = ''; // subject
                 $message  = ''; // the message itself
                 $spamcheck = ''; // Spam check

            if(isset($_POST['send']))
            {
                 $name     = $_POST['name'];
                 $email    = $_POST['email'];
                 $subject  = $_POST['subject'];
                 $message  = $_POST['message'];
                 $spamcheck = $_POST['spamcheck'];

                if(trim($name) == '')
                {
                    $error = '<div class="errormsg">Please enter your name!</div>';
                }
                    else if(trim($email) == '')
                {
                    $error = '<div class="errormsg">Please enter your email address!</div>';
                }
                else if(!isEmail($email))
                {
                    $error = '<div class="errormsg">You have enter an invalid e-mail address. Please, try again!</div>';
                }
                    if(trim($subject) == '')
                {
                    $error = '<div class="errormsg">Please enter a subject!</div>';
                }
                else if(trim($message) == '')
                {
                    $error = '<div class="errormsg">Please enter your message!</div>';
                }
                else if(trim($spamcheck) == '')
                {
                    $error = '<div class="errormsg">Please enter the number for Spam Check!</div>';
                }
                else if(trim($spamcheck) != '5')
                {
                    $error = '<div class="errormsg">Spam Check: The number you entered is not correct! 2 + 3 = ???</div>';
                }
                if($error == '')
                {
                    if(get_magic_quotes_gpc())
                    {
                        $message = stripslashes($message);
                    }

                    // the email will be sent here
                    // make sure to change this to be your e-mail
                    $to      = "jeengle@indiana.edu";

                    // the email subject
                    // '[Contact Form] :' will appear automatically in the subject.
                    // You can change it as you want

                    $subject = '[Contact Form] : ' . $subject;

                    // the mail message ( add any additional information if you want )
                    $msg     = "From : $name \r\ne-Mail : $email \r\nSubject : $subject \r\n\n" . "Message : \r\n$message";

                    mail($to, $subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n");
            ?>

                  <!-- Message sent! (change the text below as you wish)-->
                  <div style="text-align:center;">
                    <h1>Thank You</h1>
                       <p>Thanks, <b><?=$name;?></b>.  Your input is important to us.</p>
                  </div>
                  <!--End Message Sent-->

            <?php
                }
            }

            if(!isset($_POST['send']) || $error != '')
            {
            ?>

            <center><h1>Contact Us</h1></center>
            <!--Error Message-->
            <?=$error;?>

            <form  method="post" name="contFrm" id="contFrm" action="">

                      <label><span class="required">*</span> Name:</label>
                        <input name="name" type="text" class="box" id="name" size="30" value="<?=$name;?>" />

                        <label><span class="required">*</span> Email: </label>
                        <input name="email" type="text" class="box" id="email" size="30" value="<?=$email;?>" />

                        <label><span class="required">*</span> Subject: </label>
                        <input name="subject" type="text" class="box" id="subject" size="30" value="<?=$subject;?>" />

                        <label><span class="required">*</span> Message: </label>
                        <textarea name="message" cols="35" rows="3"  id="message"><?=$message;?></textarea>
                        <br>
                        <label><span class="required">*</span> Spam: <b>2 + 3=</b></label>
                        <input name="spamcheck" type="text" class="box" id="spamcheck" size="4" value="<?=$spamcheck;?>" /><br /><br />

                        <!-- Submit Button-->
                        <center><input name="send" type="submit" class="button" id="send" value="" /></center>

            </form>

            <!-- E-mail verification. Do not edit -->
            <?php
            }

            function isEmail($email)
            {
                return(preg_match("/^[-_.[:alnum:]]+@((([[:alnum:]]|[[:alnum:]][[:alnum:]-]*[[:alnum:]])\.)+(ad|ae|aero|af|ag|ai|al|am|an|ao|aq|ar|arpa|as|at|au|aw|az|ba|bb|bd|be|bf|bg|bh|bi|biz|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|com|coop|cr|cs|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|in|info|int|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|mg|mh|mil|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|nf|ng|ni|nl|no|np|nr|nt|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|pro|ps|pt|pw|py|qa|re|ro|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$|(([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5])\.){3}([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5]))$/i"
                        ,$email));
            }
            ?>
            <!-- END CONTACT FORM -->

     </div> <!-- /contentForm -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:21:54.773

如果您正在寻找多个收件人，您可以`mail()`使用分隔`$to`参数将它们提供给函数，如下所述：[http ://www.php.net/manual/en/function.mail.php#108340](http://www.php.net/manual/en/function.mail.php#108340)

这是链接中的文本以防止腐烂：

> Marc Parillo 2012 年 4 月 18 日 01:27 如果您遵循 $to 字段的建议格式，您可以在逗号分隔的字符串中列出多个地址和空格。如果您遇到类似问题，空格可能是个问题。我无法使用该格式向多个地址发送电子邮件。当我删除 $to 字符串中的所有空格时，它开始为我工作。

例子：

```
<?php
$to = 'nobody@example.com,anotheruser@example.com,yetanotheruser@example.com'; // no spaces
mail($to, 'the subject', 'the message');
?> 
```

# android - 使用兼容性库创建新项目

> ID：11605362
> 
> 赞同：0
> 
> 时间：2012-07-23T01:12:31.277
> 
> 标签：android

我不明白为什么会出现此错误：

![在此处输入图像描述](../Images/1c52b43f1c56b9a389e8cf96fe86c40f.png)

当其他人没有得到它并且能够创建一个具有类似内部导航的新项目时。由兼容性库提供支持：

![在此处输入图像描述](../Images/15979b135af4525be9c51735be1df0ec.png)

PS：我的电脑上安装了每一个 android SDK Tools 包，它们都是最新的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:35:56.877

这是因为向导没有考虑兼容性库。将最小值设置为 14，然后在创建项目并包含兼容性库后更改清单。

# c++ - 使用 std::shared_ptr 对象实例创建 boost::thread

> ID：11605363
> 
> 赞同：5
> 
> 时间：2012-07-23T01:12:35.573
> 
> 标签：c++, boost, c++11, shared-ptr, boost-thread

我有以下两个代码段。第一个块编译并按预期工作。但是第二个块没有编译。

我的问题是，鉴于下面的代码，当尝试基于由 shared_ptr 代理的对象的实例创建线程时，正确的语法是什么？

```
#include <iostream>
#include <new> 
#include <memory>

#include <boost/thread.hpp>

struct foo
{
   void boo() {}
};

int main()
{
   //This works
   {
      foo* fptr = new foo;
      boost::thread t(&foo::boo,fptr);
      t.join();
      delete fptr;
   }

   //This doesn't work
   {
      std::shared_ptr<foo> fptr(new foo);
      boost::thread t(&foo::boo,fptr);
      t.join();
   }

   return 0;
} 
```

编译器错误：

```
Error   5   error C2784: 'T *boost::get_pointer(T *)' : could not deduce template argument for 'T *' from 'std::tr1::shared_ptr<_Ty>'   c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   3   error C2784: 'T *boost::get_pointer(const std::auto_ptr<_Ty> &)' : could not deduce template argument for 'const std::auto_ptr<_Ty> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   4   error C2784: 'T *boost::get_pointer(const std::auto_ptr<_Ty> &)' : could not deduce template argument for 'const std::auto_ptr<_Ty> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   8   error C2784: 'T *boost::get_pointer(const boost::shared_ptr<X> &)' : could not deduce template argument for 'const boost::shared_ptr<X> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   9   error C2784: 'T *boost::get_pointer(const boost::shared_ptr<X> &)' : could not deduce template argument for 'const boost::shared_ptr<X> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   1   error C2784: 'T *boost::get_pointer(const boost::scoped_ptr<T> &)' : could not deduce template argument for 'const boost::scoped_ptr<T> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   2   error C2784: 'T *boost::get_pointer(const boost::scoped_ptr<T> &)' : could not deduce template argument for 'const boost::scoped_ptr<T> &' from 'std::tr1::shared_ptr<_Ty>' c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   6   error C2784: 'T *boost::get_pointer(const boost::reference_wrapper<T> &)' : could not deduce template argument for 'const boost::reference_wrapper<T> &' from 'std::tr1::shared_ptr<_Ty>'   c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   7   error C2784: 'T *boost::get_pointer(const boost::reference_wrapper<T> &)' : could not deduce template argument for 'const boost::reference_wrapper<T> &' from 'std::tr1::shared_ptr<_Ty>'   c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   10  error C2784: 'T *boost::get_pointer(const boost::intrusive_ptr<T> &)' : could not deduce template argument for 'const boost::intrusive_ptr<T> &' from 'std::tr1::shared_ptr<_Ty>'   c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest
Error   11  error C2784: 'T *boost::get_pointer(const boost::intrusive_ptr<T> &)' : could not deduce template argument for 'const boost::intrusive_ptr<T> &' from 'std::tr1::shared_ptr<_Ty>'   c:\program files (x86)\boost\boost_1_47\boost\bind\mem_fn_template.hpp  40  1   htest 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T01:23:25.973

问题是`boost::thread`依赖于`boost::mem_fn`处理成员函数，并且`boost::mem_fn`（或至少您正在使用的版本）不知道如何使用 a`std::shared_ptr`来调用成员函数，因为它希望您使用`boost::shared_ptr`或无数其他智能指针之一在您的错误列表中输入。

原始指针有效，因为`boost::mem_fn`已经有过载。解决方案是使用`boost::shared_ptr`or `std::mem_fn`。后者之所以有效，是因为`std::mem_fn`知道如何与`std::shared_ptr`

`boost::thread t(std::mem_fn(&foo::boo), fptr);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:01:52.110

Dave S 的答案的替代方法是定义这个（*在* `<boost/mem_fn.hpp>`包含之前）：

```
namespace boost
{
  template<typename T>
    inline T*
    get_pointer(const std::shared_ptr<T>& p)
    { return p.get(); }
} 
```

这“教导”`boost::mem_fn`从 a 获取原始指针`std::shared_ptr`。

在 C++11`std::mem_fn`中，需要使用任何类似指针的类型，只需取消引用它，`*fptr`即`boost::mem_fn`使用`*boost::get_pointer(fptr)`. 我不知道它是否在最新版本的 Boost 中得到修复，但我认为它应该使用 SFINAE 来检测是否`get_pointer`可以工作，否则应该取消引用它。

# jquery - 为什么 addClass 只作用于一个元素而不作用于另一个？

> ID：11605365
> 
> 赞同：0
> 
> 时间：2012-07-23T01:13:05.450
> 
> 标签：jquery, haml

类“open”被添加到`ul`元素中，而不是`dropdown#register`元素中。

```
<ul class="nav"></ul>
<script> $("#register_dropdown").addClass("open"); </script>
<script> $("ul").addClass("open"); </script>
<span class="dropdown" id="register_dropdown"></span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:21:06.757

`$("#register_dropdown")`当您执行该行时，返回一个空的 jQuery 对象，因为`register_dropdown`DOM 中不存在该对象。

我没有使用 HAML 的经验，但是将脚本包装在[DOM 就绪处理程序](http://api.jquery.com/ready/)中是可行的方法：

```
%script $(function(){ $("#register_dropdown").addClass("open"); }); 
```

在普通标记中，它应该呈现为：

```
<script> $(function(){ $("#register_dropdown").addClass("open"); }); </script> 
```

如果您愿意，也可以使用更详细的方式（与上述结果相同）：

```
$(document).ready(function() {
    //DOM is ready, put your code here
    $("#register_dropdown").addClass("open");
}); 
```

这会阻止您的代码在 DOM 完全加载之前运行。您也可以在元素添加到 DOM 后移动该行，但最好在 DOM 准备好后对其进行操作。

[参考](http://api.jquery.com/ready/)

# jquery - 如何获取在使用 YQL 的此函数中未验证的 url 的值？

> ID：11605382
> 
> 赞同：0
> 
> 时间：2012-07-23T01:16:41.297
> 
> 标签：jquery, yql

此示例正确验证 url。如何确定哪些未验证？我想在该部分触发单个警报`else`或获取值以可能在其他地方使用。

```
function check_URL() {

var url = "http://" + localStorage['t'] + ".tumblr.com";
var url1 = "http://" + localStorage['t1'] + ".tumblr.com";
var url2 = "http://" + localStorage['t2'] + ".tumblr.com";
var url3 = "http://" + localStorage['t3'] + ".tumblr.com";

var urlArray = ['url', 'url1', 'url2','url3'];
$(urlArray).each(function (urlItem) {
$.getJSON("http://query.yahooapis.com/v1/public/yql?"+
            "q=select%20*%20from%20html%20where%20url%3D%22"+
            encodeURIComponent(urlItem)+
            "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        console.log("yes");
      } 
      else { 
      console.log("no");

      alert("? is not a valid URL or is down.");

     }
    }
  );
});
}; 
```

感谢新手的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:38:29.167

要遍历数组，您需要使用[jQuery.each()](http://api.jquery.com/jQuery.each/)。

此外，您不需要将变量名称包装在字符串中。这样做只会返回`"url"`而不是返回变量的值。

```
function check_URL() {

  var url = "http://" + localStorage['t'] + ".tumblr.com";
  var url1 = "http://" + localStorage['t1'] + ".tumblr.com";
  var url2 = "http://" + localStorage['t2'] + ".tumblr.com";
  var url3 = "http://" + localStorage['t3'] + ".tumblr.com";

  var urlArray = [url, url1, url2, url3],
      invalidUrls = [];

  $.each(urlArray, function (i, urlItem) {
    $.getJSON("http://query.yahooapis.com/v1/public/yql?"+
    "q=select%20*%20from%20html%20where%20url%3D%22"+
    encodeURIComponent(urlItem)+
    "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        console.log("yes");
      } 
      else { 
        invalidUrls.push(urlItem);
      }
    }
    );
  });

  return invalidUrls;
}; 
```

# php - For 循环，从前一行递增并插入一个值

> ID：11605383
> 
> 赞同：0
> 
> 时间：2012-07-23T01:17:32.340
> 
> 标签：php, mysql, for-loop, percentage

我试图将插入 MySQL 表的最后一个条目的值增加 x%，然后将该值插入数据库并继续直到循环结束，从基值 100 开始。

假设我从第一`$base_value`行的 100 开始，我想在迭代中将该值增加 25%。所以，在第二行，我希望 100 增加 25%。在第三行，第二行的值增加了 25%，等等，当它达到 100 时循环停止。如何做到这一点？

```
$base_value = 100;
$increase_by; // x percent

for($i = 1; $i = 100; $i++)
{
    mysql_query("insert into table values(
       '',
       '$i',
       ''
    )");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:30:15.403

像这样的东西？：

```
$base_value = 100;
$increase_by; // x percent

for($i = 1; $i <= 100; $i++)
{
    mysqli_query("insert into table values(
       '$base_value',
       '$i',
       ''
    )");
    $base_value = $base_value + ($base_value * $increase_by);
} 
```

需要注意的几点：

*   我已替换`mysql_query`为`mysqli_query`，我建议您也这样做。 [PHP 也建议这样做](http://php.net/manual/en/function.mysql-query.php)。
*   `for`我将循环中的终止条件从`$i = 100`更改为`$i <= 100`. 如果前者甚至完全起作用，我不确定会是什么行为。它*设置* `$i`在条件中，首先是你*永远*不想做的事情。但这也意味着它要么永远不会运行，要么会无限期地运行，这取决于它将赋值语句解释为布尔值的方式。这些选项都不是可取的。
*   这个数学假设`$increase_by`是正确的小数位。相反，如果您用“25”的实际值来表示“25%”的概念，那么您将不得不调整数学以解释这种差异。
*   SQL 查询本身没有受到影响，因为我认为这是一个人为的例子。但是以防万一值得指出您有第三个不必要的值并且您的表被命名`table`，这可能是一个坏主意:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:59:53.647

只是为了好玩并假设第一行的值为零，另一种选择是使用 uid 作为主键的 SQL 查询。

```
$base_value = 100;
$factor = 1.25; // Take previous value and times it by 125%

// ...

mysqli_query(
"INSERT INTO table (my_value)
SELECT (my_value * $factor) AS my_value FROM table ORDER BY uid DESC LIMIT 1"
);

$base_value *= $factor;

// ... 
```

但是，如果您有并发操作，请不要指望这种工作可靠，并且在没有测试的情况下，我的蜘蛛感觉表明，如果表为空，则在第一次迭代时会遇到障碍。无论如何，请随时发表评论。显然，@David 的解决方案更合理:)

# html - 防止文本落后于幻灯片

> ID：11605385
> 
> 赞同：0
> 
> 时间：2012-07-23T01:17:53.060
> 
> 标签：html, css

我有一些文字、幻灯片和一些标签。我希望我的文字环绕右边的幻灯片，但现在文字在幻灯片后面，我真的不知道为什么。

任何人都可以看看并指出我正确的方向吗？

[http://www.emb-ideas.com/index.php/component/smart/?id=155&view=product](http://www.emb-ideas.com/index.php/component/smart/?id=155&view=product)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:56:44.777

你有一个两列布局，应该这样对待它。两列都应该向左浮动。您可以在其下放置一个带有 clear:both 的元素，也可以将 overflow:hidden 添加到父元素以避免它崩溃。

像这样定位东西只会导致问题。

如果您不想这样做，则必须按照上面的建议设置容器宽度。如果登录时父大小发生变化，则将宽度设置为百分比。

# android - Android网格视图回收问题

> ID：11605386
> 
> 赞同：2
> 
> 时间：2012-07-23T01:18:11.890
> 
> 标签：android, gridview, android-viewpager

当我每次尝试使用回收的网格视图时都会出错，如果 convertView != null 那么我得到一个错误，这是我的源代码。它会在 text = (TextView) convertView; 处给我一个错误。在 else 语句中。我真的迷路了，我会停止回收视图，但是它会占用大量内存并且滚动不连贯

$ 这里是 imageadapter.java

```
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout lay;

    ImageView image;
    TextView text;
    if (convertView == null) {
        Log.d("height", "Width = " + width);

        lay = new RelativeLayout(mContext);
        image = new ImageView(mContext);
        text = new TextView(mContext);

        //text.setText("This is a test");
        text.setTextSize(14);
        text.setTextColor(Color.WHITE);
        text.setGravity(Gravity.LEFT | Gravity.TOP);
        text.setPadding(2, 2, 2, 2);
        text.setBackgroundColor(Color.parseColor("#80000000"));
        RelativeLayout.LayoutParams textLayout = new RelativeLayout.LayoutParams(
                (int) Math.round(width / 2.0),
                (int) Math.round(width / 8.3));

        textLayout.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        text.setLayoutParams(textLayout);

        MarginLayoutParams textMarginFix = (ViewGroup.MarginLayoutParams) text
                .getLayoutParams();
        textMarginFix.setMargins(0, 0, 0, (int) Math.round(width / 45.0));
        text.setLayoutParams(textMarginFix);

        image.setLayoutParams(new LayoutParams((int) Math
                .round(width / 2.0), (int) Math.round(width /              2.0)));

        image.setScaleType(ImageView.ScaleType.CENTER_CROP);
        //image.setImageResource(mThumbIds[position]);

        lay.setLayoutParams(new GridView.LayoutParams((int) Math
                .round(width / 2.0), (int) Math.round(width / 2.0)));
        lay.setBackgroundResource(R.drawable.shadowimage);
        lay.setPadding(5, 5, 15, 15);
        //lay.setId(mThumbIds[position]);

        //lay.addView(image);
        //lay.addView(text);

    } 
    else
    {
        text = (TextView) convertView;
        image = (ImageView) convertView;
        lay = (RelativeLayout) convertView;
    }

    image.setImageResource(mThumbIds[position]);
    text.setText("This is a test");

    lay.addView(image);
    lay.addView(text);

     return lay;

}
$here is where i call the imageadapter from another class

    @Override
public Object instantiateItem(View container, int position) {
   View contentView;        
   switch (position) {
    case 0:
        LayoutInflater mInflater = LayoutInflater.from(mContext);
        View contentView = mInflater.inflate(R.layout.image_grid_view,   null);
        Display display = mContext.getWindowManager().getDefaultDisplay();
        final int width = display.getWidth();
        int height = display.getHeight();
        float scale = mContext.getResources().getDisplayMetrics().density;
        GridView gridview = (GridView) contentView.findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(mContext, width, height, scale));
        gridview.setFocusable(true);
        gridview.requestFocus();
        gridview.setOnItemClickListener(itemClickListener);

        ((ViewPager) container).addView(contentView, 0);
        break;
...return contentView 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:57:11.790

`convertView`是完全代表您的**一个**项目的视图`GridView`。如果那是 a `TextView`，它将是 a `TextView`，如果是整个布局，您将收到整个布局，依此类推。

那么你怎么知道和定义什么是“代表一个项目的视图”呢？很简单，它是您在何时创建的任何内容`convertView == null`，然后`return`从`getView`.

只需您收到一个使用过的物品，您只需对其进行修改以将其更新为适当的内容。因此，您应该使用类型转换来以`View`您想要的格式收到它。

像下面这样的代码将为您提供您想要的东西，而无需重做您不需要做的事情（也就是您不需要`Views`从 a重新添加 child `convertView`，只需要一个新视图）：

```
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout lay;
    ImageView image;
    TextView text;

    if (convertView == null) {
        // Setup your 'item view'
        lay = new RelativeLayout(mContext);
        image = new ImageView(mContext);
        text = new TextView(mContext);

        // Do all your customizing stuff (aka size, color, format, padding layout params)

        lay.addView(image, 0);
        lay.addView(text, 1);
    } else {
        lay = (RelativeLayout) convertView;
        image = (ImageView) lay.getChildAt(0);
        text = (TextView) lay.getChildAt(1);
    }

    // Set content for your image and text

    return lay;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:35:40.560

**[添加]**

此外，您有代码

```
image.setImageResource(mThumbIds[position]);
text.setText("This is a test");

lay.addView(image);
lay.addView(text);

return lay; 
```

在 if 和 else 之外，这意味着您每次都在请求单元格的视图时尝试添加子视图。您实际上只需要添加视图以放置在例程的 if 部分中。

**[ORIGINAL]** convertView 很可能是您的父级，所有其他视图都是它的子级。在你的 else 子句中，你所做的只是将每个设置为相同的东西。convertView 怎么能同时成为三个完全不同的东西。

很可能需要：

```
text = (TextView) convertView.SomeTextViewSubToConvertView;
image = (ImageView) convertView.SomeImageViewSubToConvertView;
lay = (RelativeLayout) convertView.SomeRelativeLayoutSubToConvertView; 
```

# c# - 更改构建选项是否会移动应用程序在本地计算机软件注册表项中的位置？

> ID：11605387
> 
> 赞同：1
> 
> 时间：2012-07-23T01:18:12.420
> 
> 标签：c#, .net, visual-studio-2010, registry

我有一个解决方案，其中可执行文件的目标平台最初设置为`x86`，许多其他项目设置为 AnyCPU，并在 .Net 3.5 中包含 3 个项目（其他所有项目为 .Net 4.0）。我想这就是安装程序写入`HKEY_LOCAL_MACHINE\SOFTWARE`注册表项的原因。

最近，我修复了一些问题，现在所有项目都是 .Net 4.0。此外，我将可执行目标平台设置为 AnyCPU。我发现应用程序现在安装在`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node`.

> *[侧边栏 - 我们有 p/invokes -`DllImport`属性 - 没有指定`CallingConvention`. 当这在托管和非托管代码中都被修改为指定`Cdecl`和`__cdecl`时，我们能够将依赖项目升级到 .Net 4.0 而不会收到`PInvokeStackImbalance`异常。]*

我们目前在 Windows 7（64 位）机器上使用 VS2010 进行开发。我的问题是：安装程序`\SOFTWARE\` **最初**是否写信是因为某些项目是 .Net 3.5？

此外，如果此应用程序打算安装在 WindowsXP（预计支持 32 位）机器上，注册表项是否有问题？更好的是，我应该在构建选项中寻找什么来确保在 WinXp 32 位系统上的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:54:58.273

只有 64 位安装程序才能避免在 64 位操作系统上使用 Wow6432Node。在由安装程序的 TargetPlatform 属性设置的安装项目中，它默认为“x86”。如果您将 C# EXE 项目的目标平台更改为 AnyCPU，请将其更改为“x64”。这也将确保您的程序安装到 c:\program files 而不是 c:\program files (x86)。

因此，您需要维护两个安装程序。有点头疼，您可以通过将 C# EXE 项目的目标平台设置为 x86 来避免它，这样安装程序和您的程序都可以访问 Wow6432Node 中的密钥。

pinvoke 问题通常是相反的，64 位代码只有一个调用约定，cdecl 和 stdcall 之间没有区别。

# java - 其他包中的派生类无法访问受保护的嵌套类

> ID：11605388
> 
> 赞同：9
> 
> 时间：2012-07-23T01:18:16.320
> 
> 标签：java

这是我想要完成的事情

文件 1：./net/Class1.java

```
package net;

public class Class1
{
    protected static class Nested
    {

    }
} 
```

文件 2：./com/Class2.java

```
package com;

import net.Class1;

public class Class2 extends Class1
{
    Nested nested = new Nested();
} 
```

这是我得到的错误

```
>javac ./net/Class1.java ./com/Class2.java
.\com\Class2.java:7: error: Nested() has protected access in Nested
        Nested nested = new Nested(); 
```

这个错误是预期的吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T01:33:19.127

### 问题

几个重要的事实（许多人忘记或不知道）：

1.  *默认*构造函数（包括用于静态和非静态嵌套类的构造函数）*与它们所属的类的可见性具有相同的可见性*。所以如果`protected class Nested{...}`它的默认构造函数也是`protected`.
2.  具有可见性的元素`protected`只能从类访问
    *   与声明该元素的类属于同一包，
    *   扩展（显式或隐式）声明它的类。

你的`Class2 extends Class1`所以它只能访问成员`Class1`（包括访问`Nested`类型）。但自从有了

*   不扩展`Nested`（即使是隐含的，它只继承对它的访问，因为它是`protected`）
*   不属于同一个包`Nested`

它不能访问类中`protected`的元素`Nested`（包括构造函数）。

### 解决方案：

要解决该问题，请通过以下任一方式制作`Nested`构造函数`public`

*   `Nested`使用`public`修饰符显式创建类的无参数构造函数：

    ```
    package net;

    public class Class1 {

        protected static class Nested {

            public Nested(){
          //^^^^^^
            }

        }

    } 
    ```

*   制作`Nested`类`public`（它的默认构造函数也将公开 - 见第 1 点。）

    ```
    package net;

    public class Class1 {

        public static class Nested {
      //^^^^^^
        }

    } 
    ```

# ios - 如何自定义UITabbar

> ID：11605390
> 
> 赞同：0
> 
> 时间：2012-07-23T01:19:26.193
> 
> 标签：ios, cocoa-touch, uitabbarcontroller

如何自定义 UITabBarController 有这样的东西：

![在此处输入图像描述](../Images/f8376ea7b36199f8bddb26f0f33d8122.png)

在其正常状态下，它看起来就像一个带有更多按钮的普通 UItabbar 控件（红色矩形包围的区域）。当用户单击更多按钮时，第二行将显示在图像中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:43:56.343

看看[CRTabBarController](http://www.cocoacontrols.com/platforms/ios/controls/crtabbarcontroller--2)。我没有使用它，但它应该适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:44:11.153

这很可能是模拟标准视图的自定义视图。

在线搜索这些，因为其中许多可用于一般用途；例如：

[http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tab+bar](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tab+bar)

特别是，您发布的图片*看起来像*“CRTabBarController”：

[http://www.cocoacontrols.com/platforms/ios/controls/crtabbarcontroller--2](http://www.cocoacontrols.com/platforms/ios/controls/crtabbarcontroller--2)

# safari - 如何配置 Safari 以在本地显示 SVG？

> ID：11605391
> 
> 赞同：0
> 
> 时间：2012-07-23T01:19:40.670
> 
> 标签：safari, svg

在渲染 SVG 时，我检查了 Safari 是否有问题，但是网站上的 SVG 绘图工作得很好： http: [//phrogz.net/svg/svg_in_xhtml5.xhtml](http://phrogz.net/svg/svg_in_xhtml5.xhtml)

我的结论是 Safari 有一些东西让我无法在本地渲染 SVG 元素。这是我拥有的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
        <svg width="500" height="500" xmlns="http://www.w3.org/2000/svg">
            <circle r="50"></circle>
        </svg>
    </body>
</html> 
```

我该怎么做才能让上面的 SVG 圆圈在 Safari 上呈现？我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:29:22.833

为您的 svg 创建单独的 .svg 文件。

```
circle.svg

<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     width="500" height="500" xmlns="http://www.w3.org/2000/svg">

     <circle r="50"></circle>
</svg> 
```

像这样重写你的 HTML。

```
<body>
    <embed src="circle1.svg" type="image/svg+xml" />
</body> 
```

# c# - File.WriteAllText 和 IIS 并发访问

> ID：11605393
> 
> 赞同：1
> 
> 时间：2012-07-23T01:19:58.580
> 
> 标签：c#, iis, concurrency

我每 10 分钟将一个 200k JSON 文件从控制台应用程序写入 IIS 框的 Web 文件夹。移动客户端定期通过 IIS 从该文件中获取数据。

想知道如果 IIS 在写入文件时遇到文件会发生什么。[这个](https://stackoverflow.com/a/6805833/109102)问题说 File.WriteAllText 使用 FileShare.Read - 所以有人可以在写入时阅读它。

我将用一个 v. 大文件对此进行测试，看看 IIS 在写入过程中如何处理请求。我记得 UNIX 中的一个技巧是写入版本文件`json.201207231033`并将符号链接更新为`json`.

其他人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:19:15.120

以下是我将如何使用 ASP.NET 页面中的以下伪代码来解决您的问题。您要将结果缓存在内存中，并在数据在缓存中超过 10 分钟时刷新数据。

```
 var data = Cache["data"];
    if (data.Timestamp <= 
        DateTime.Now.Substract(TimeSpan.FromMinutes(10)))
    {
            //Refresh cache with new data when it's older than 10min.
            // You could hypothetically do this in a separate thread
            // if you wanted to do so.      
            data = new Data(GetFromDb(), timestamp);
            Cache["data"] = data;

            return Cache["data"];
    }
    else
    {
            //Use existing data
            return Cache["data"];
    } 
```

这是关于如何使用 IIS 的[运行时缓存](https://stackoverflow.com/a/349111/101827)的参考。

如果您想确保您的缓存值始终是新鲜的，您可以创建一个每 10 分钟访问一次此页面的作业，而不是您当前解决方案的方法。

还有很多其他方法可以用来[缓存](http://memcached.org/)数据，但使用 OS 文件系统并不是真正的最佳方法。

# javascript - 递增表单值

> ID：11605395
> 
> 赞同：1
> 
> 时间：2012-07-23T01:20:13.307
> 
> 标签：javascript, jquery

我有几张带有“红色”类的图像。

当用户点击其中任何一个时，ID 为“red”的表单字段应递增。

我正在尝试以一种易于重复使用的方式编写此代码。

我不知道是否有一种方法可以在不使用全局变量的情况下增加表单字段值。只需编写 $(#red).val(++); 不做任何事情。

如果我首先声明一个全局变量，例如

```
var redAmount;
$(#red).val(redAmount++); 
```

它有效，但我不喜欢每次将其重新用于其他颜色时都必须输入颜色+数量的想法。

这让我尝试动态地形成变量名

```
var redAmount;
var currentColor = $(obj).attr("class"); //getting the class of the clicked element
$('#' + currentColor).val(currentColor+'Amount'++); //trying to form the variable name dynamically but failing 
```

抱歉，解释太长了。我想问的是：

1.  我可以在没有全局变量的情况下增加表单值吗
2.  如果不是，如何根据单击元素的类动态形成变量名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:28:03.150

您可以使用普通 JavaScript 中的增量运算符来执行此操作：

```
document.getElementById("red").value++; 
```

[jsFiddle](http://jsfiddle.net/ULKb7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:41:31.197

使用测试样本修改了代码。

[http://jsfiddle.net/webwarrior/CrjY9/25/](http://jsfiddle.net/webwarrior/CrjY9/25/)

你不是想增加你点击的项目的价值吗？

```
jQuery("img").click(function () {
    jQuery("#" + jQuery(this).attr("class"))[0].value++;
}); 
```

希望这可以帮助。

这是真正的 JQuery 方式，但我猜 JavaScript value++ 方式在某些浏览器中也一样好。

# ruby-on-rails - 安装 hpricot

> ID：11605404
> 
> 赞同：1
> 
> 时间：2012-07-23T01:22:16.867
> 
> 标签：ruby-on-rails, ruby, hpricot

我正在尝试安装`hpricot`并收到以下错误。我确实安装了 xcode，但我不确定我还缺少什么。

```
$ gem install hpricot
Building native extensions.  This could take a while...
ERROR:  Error installing hpricot:
    ERROR: Failed to build gem native extension.

        /Users/user_name/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for stdio.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我也试过nokogiri。

```
$ gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /Users/user_name/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:30:58.383

我认为不再支持 hpricot 了。您应该查看[nokogiri](http://nokogiri.org/)，它要快得多，并且有很好的文档记录。

编辑：我刚刚检查了 hpricot github 页面（https://github.com/hpricot/hpricot/），他们还建议您使用 nokogiri：

> Hpricot 已经结束。请考虑像 nokogiri 这样的替代方案。

编辑#2：如果您在安装它时遇到错误，可能是因为您缺少 libxml 和其他需要通过 homebrew 或 macports 安装的库。所有必需的库和安装说明都可以在这里找到：

[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:48:09.503

从 nokogiri 构建中的错误消息来看，您似乎没有 libxml 或 libxml 开发库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T22:50:31.203

使用 Kubuntu 14.04，我只需先安装 ruby​​-dev 就安装了 hpricot（在出现错误“错误：无法构建 gem 原生扩展”之后）。

# javascript - 使用动态变量名称更新 JSON 中的结果

> ID：11605408
> 
> 赞同：1
> 
> 时间：2012-07-23T01:23:57.643
> 
> 标签：javascript, jquery, json

我需要更新 JSON 中的值。

我的 JSON 结果如下所示：

```
results = {"ROWCOUNT":50,"COLUMNS":["PERSONID","NAME"],"DATA":{"PERSONID":["42","43","44"], "NAME":["JOE","TOM","JANE"]}
resultData = results.DATA 
```

在下面的代码中，我循环遍历结果集并尝试更新某个位置的值。我相信它失败了，因为我没有正确使用动态变量。

```
var columnName = "NAME";

for(i=0; i < results.ROWCOUNT; i++ ){
 resultData.columnName[i] = "foo" // failing here due to "columnName" being dynamic.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:28:31.683

想通了..你必须使用数组语法

```
resultData[columName][i] 
```

# javascript - jQuery绑定到粘贴事件，如何获取粘贴的内容

> ID：11605415
> 
> 赞同：79
> 
> 时间：2012-07-23T01:25:24.677
> 
> 标签：javascript, jquery, copy-paste, paste

我有一个 jquery token tagit 插件，我想绑定到 paste 事件以正确添加项目。

我可以像这样绑定到粘贴事件：

```
 .bind("paste", paste_input) 
```

...

```
function paste_input(e) {
    console.log(e)
    return false;
} 
```

如何获取实际粘贴的内容值？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-07-23T01:26:42.400

在现代浏览器中有一个 onpaste 事件。`getData`您可以使用对象上的函数访问粘贴的数据`clipboardData`。

```
$("#textareaid").bind("paste", function(e){
    // access the clipboard using the api
    var pastedData = e.originalEvent.clipboardData.getData('text');
    alert(pastedData);
} ); 
```

请注意，从 jQuery 3 开始不推荐使用[bind](https://api.jquery.com/bind/)和[unbind](https://api.jquery.com/unbind/)。首选调用是[on](https://api.jquery.com/on/)。

所有现代浏览器都支持[剪贴板 API](http://caniuse.com/#feat=clipboard)。

另请参阅：[在 Jquery 中如何处理粘贴？](https://stackoverflow.com/questions/7160073/in-jquery-how-to-handle-paste)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-23T01:30:38.837

这个怎么样：http: [//jsfiddle.net/5bNx4/](http://jsfiddle.net/5bNx4/)

`.on`如果您使用的是 jq1.7 等，请使用。

行为：当您`paste`在第一个 textarea 上键入任何内容或任何内容时，下面的 teaxtarea 将捕获 cahnge。

休息我希望它有助于事业。`:)`

有用的链接=>

[在 jQuery 中如何处理 oncut、oncopy 和 onpaste？](https://stackoverflow.com/questions/237254/how-do-you-handle-oncut-oncopy-and-onpaste-in-jquery)

[捕捉粘贴输入](https://stackoverflow.com/questions/686995/jquery-catch-paste-input)

**编辑：**
其中的事件列表`.on()`应以空格分隔。参考 [https://api.jquery.com/on/](https://api.jquery.com/on/)

**代码**

```
$(document).ready(function() {
    var $editor    = $('#editor');
    var $clipboard = $('<textarea />').insertAfter($editor);

    if(!document.execCommand('StyleWithCSS', false, false)) {
        document.execCommand('UseCSS', false, true);
    }

    $editor.on('paste keydown', function() {
        var $self = $(this);            
        setTimeout(function(){ 
            var $content = $self.html();             
            $clipboard.val($content);
        },100);
     });
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-24T18:08:28.170

我最近需要完成类似的事情。我使用以下设计来访问粘贴元素和值。[jsFiddle 演示](http://jsfiddle.net/Zpdx4/)

```
$('body').on('paste', 'input, textarea', function (e)
{
    setTimeout(function ()
    {
        //currentTarget added in jQuery 1.3
        alert($(e.currentTarget).val());
        //do stuff
    },0);
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-25T11:33:48.583

另一种方法：该`input`事件也将捕获该`paste`事件。

```
$('textarea').bind('input', function () {
    setTimeout(function () { 
        console.log('input event handled including paste event');
    }, 0);
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-04T07:43:49.410

```
$(document).ready(function() {
    $("#editor").bind('paste', function (e){
        $(e.target).keyup(getInput);
    });

    function getInput(e){
        var inputText = $(e.target).html(); /*$(e.target).val();*/
        alert(inputText);
        $(e.target).unbind('keyup');
    }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-02-25T17:51:49.570

在现代浏览器上这很简单：只需使用[input](https://developer.mozilla.org/en-US/docs/Web/Events/input)事件和[inputType](https://w3c.github.io/input-events/#interface-InputEvent-Attributes)属性：

```
$(document).on('input', 'input, textarea', function(e){
  if (e.originalEvent.inputType == 'insertFromPaste') {
    alert($(this).val());
  }
}); 
```

[https://codepen.io/anon/pen/jJOWxg](https://codepen.io/anon/pen/jJOWxg)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-06T18:23:55.767

您可以将字段的原始值与字段的更改值进行比较，并将差值作为粘贴值扣除。即使字段中存在现有文本，这也会正确捕获粘贴的文本。

[http://jsfiddle.net/6b7sK/](http://jsfiddle.net/6b7sK/)

```
function text_diff(first, second) {
    var start = 0;
    while (start < first.length && first[start] == second[start]) {
        ++start;
    }
    var end = 0;
    while (first.length - end > start && first[first.length - end - 1] == second[second.length - end - 1]) {
        ++end;
    }
    end = second.length - end;
    return second.substr(start, end - start);
}
$('textarea').bind('paste', function () {
    var self = $(this);
    var orig = self.val();
    setTimeout(function () {
        var pasted = text_diff(orig, $(self).val());
        console.log(pasted);
    });
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-23T15:05:58.120

看起来好像这个事件`clipboardData`附加了一些属性（它可能嵌套在`originalEvent`属性中）。`clipboardData`包含一组项目，每个项目都有一个`getAsString()`可以调用的函数。这将返回项目中内容的字符串表示形式。

这些项目也有一个`getAsFile()`功能，以及其他一些特定于浏览器的功能（例如，在 webkit 浏览器中，有一个`webkitGetAsEntry()`功能）。

出于我的目的，我需要粘贴内容的字符串值。所以，我做了类似的事情：

```
$(element).bind("paste", function (e) {
    e.originalEvent.clipboardData.items[0].getAsString(function (pStringRepresentation) {
        debugger; 
        // pStringRepresentation now contains the string representation of what was pasted.
        // This does not include HTML or any markup. Essentially jQuery's $(element).text()
        // function result.
    });
}); 
```

您将希望通过项目执行迭代，保留字符串连接结果。

有一系列项目的事实让我认为需要做更多的工作，分析每个项目。您还需要进行一些空值/值检查。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-30T05:09:45.297

这适用于所有浏览器以获取粘贴值。并且还为所有文本框创建通用方法。

```
$("#textareaid").bind("paste", function(e){       
    var pastedData = e.target.value;
    alert(pastedData);
} ) 
```

# sql - 子查询太多，我已经很困惑，我仍然缺少一列 - Oracle

> ID：11605416
> 
> 赞同：1
> 
> 时间：2012-07-23T01:25:35.263
> 
> 标签：sql, oracle11g

我有以下没有错误的查询：

```
SELECT u.user_name, u.user_lastn, outer_s.movie_id, outer_s.times_rented
FROM users u,
    ( 
        SELECT * FROM  
        (   
            SELECT user_id, movie_id, count (movie_id) as times_rented
            FROM movie_queue 
            GROUP BY (user_id, movie_id)
            ORDER BY user_id, movie_id 
        ) inner_s
        WHERE times_rented>1
    ) outer_s    
WHERE u.user_id= outer_s.user_id; 
```

这是它返回的内容：

```
USER_NAME                USER_LASTN                 MOVIE_ID TIMES_RENTED
------------------------ ------------------------ ---------- ------------
John                     Smith                             1            3 
John                     Smith                             6            2 
Mary                     Berman                            4            2 
Mary                     Berman                            6            4 
Elizabeth                Johnson                           1            2 
Peter                    Quigley                           2            2 
```

我仍然需要做的是显示**电影的名称**，而不是**movie_id**，但电影的名称位于另一个名为 movies 的表中，类似于以下示例：

```
 MOVIE_ID  MOVIE_NAME                                                
---------- ---------------------------------------------
         1 E.T. the Extra-Terrestrial    
         2 Jurassic Park                
         3 Indiana Jones and the Kingdom of the Crystal     
         4 War of the Worlds  
         5 Signs 
```

**期望的结果：**
我想在最终表中看到以下列：
**USER_NAME** | **USER_LASTN** | **电影名称**| **TIMES_RENTED** |

**问题：**
但是在这么多子查询之后我很困惑，我怎样才能在那里得到电影名称而不是电影ID？

**尝试：**
我尝试通过将查询更改为

```
SELECT u.user_name, u.user_lastn, m.movie_name, outer_s.times_rented
FROM users u, movie m (etc.....) 
```

但它返回了 120 行而不是我应该得到的 6 行。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:07:32.467

```
SELECT u.user_name, u.user_lastn, m.movie_name, COUNT(q.movie_id)
FROM users AS u
JOIN movie_queue AS q ON q.user_id = u.user_id
JOIN movie AS m ON m.movie_id = q.movie_id
GROUP BY u.user_name, u.user_lastn, m.movie_name
HAVING COUNT(q.movie_id) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:06:35.427

或者您可以使用 CTE 使您的查询可读：

```
WITH outer_s as (SELECT user_id, movie_id, count (movie_id) as times_rented
      FROM movie_queue 
      GROUP BY (user_id, movie_id)
      having  count (movie_id) > 1
     ) 
SELECT u.user_name, u.user_lastn, m.movie_name, outer_s.movie_id, outer_s.times_rented FROM users u join outer_s    
         on u.user_id= outer_s.user_id join
         movies m
         on outer_s.movie_id = m.move_id 
```

使用 CTE 具有提高可读性和易于维护复杂查询的优点。查询可以分为单独的、简单的、逻辑的构建块。然后可以使用这些简单的块来构建更复杂的临时 CTE，直到生成最终结果集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T01:57:37.863

您只需要将查询的结果连接到另一个查询。但是，首先，我将重写查询以简化它，使用正确的连接语法：

```
SELECT u.user_name, u.user_lastn, m.movie_name, outer_s.movie_id, outer_s.times_rented
FROM users u join
     (SELECT user_id, movie_id, count (movie_id) as times_rented
      FROM movie_queue 
      GROUP BY (user_id, movie_id)
      having  count (movie_id) > 1
     ) outer_s    
     on u.user_id= outer_s.user_id join
     movies m
     on outer_s.movie_id = m.move_id 
```

# hibernate - Grails POJO 域类的序列生成器映射

> ID：11605417
> 
> 赞同：0
> 
> 时间：2012-07-23T01:25:45.753
> 
> 标签：hibernate, postgresql, grails, sequence, pojo

我在 Grails/PostgreSql 应用程序中有 POJO 域类，我正在尝试为它的 ID 映射 postgres 序列生成器。

在 POJO 中：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO, generator = "flight_id")
public long getId() {
    return id;
} 
```

在 Postgres 中：

```
-- Sequence: flight_id

-- DROP SEQUENCE flight_id;

CREATE SEQUENCE flight_id
  INCREMENT 1
  MINVALUE 1n 
  MAXVALUE 9223372036854775807
  START 1
  CACHE 1;
ALTER TABLE flight_id
  OWNER TO postgres; 
```

当我尝试为该域运行 grails generate-all 时，我得到：

```
 Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.AnnotationException: Unknown Id.generator: flight_id 
```

除了这个，其他一切似乎都正常。我正在尝试使用 Postres 本机生成器，因此我可以选择对独立于 Grails 应用程序的数据库运行 CRUD 操作。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:24:03.930

有两个问题：

1.  当 GenerationType.SEQUENCE 似乎是首选并且
2.  错误假设`flight_id`in`generator = "flight_id"`直接指代数据库序列的名称，而它实际上指的是：（直接来自文档）：

    > 要使用的主键生成器的名称，在 SequenceGenerator 或 TableGenerator 注释中指定

应该做的是将策略更改为[GenerationType.SEQUENCE](http://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html#SEQUENCE)并定义与数据库序列一致的[SequenceGenerator ，并且](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html)*[name](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html#name%28%29)*属性的值与 GeneratedValue 中的生成*[器](http://docs.oracle.com/javaee/5/api/javax/persistence/GeneratedValue.html#generator%28%29)*属性的值相同。

# php - 在提交时保留价值的 PHP 表单

> ID：11605418
> 
> 赞同：0
> 
> 时间：2012-07-23T01:26:28.690
> 
> 标签：php

好的，所以我得到了一个表格，可用性对我来说很重要。如果用户完成表单然后点击提交但表单上有错误我设置了值以回显

例如 `<input class="input_phone" name="phone" type="text" value="<?php echo $_POST['phone']; ?>" maxlength="15" />`

输入的值将返回到表单字段中，这样用户就不必重新输入每个字段。

如何使用单选按钮实现相同的效果？

`<input class="radio" name="q1" type="radio" value="YES">`

如果我将值设置为`$_POST['q1']`如何将其设置为`YES`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:32:56.437

与输入文本相同，只是属性`checked`。

```
<input class="radio" name="q1" type="radio" value="YES" <?php echo $_POST['q1'] === 'YES' ? 'checked' : ''; ?>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:30:41.993

```
if isset($_POST['q1']){
   echo '<input class="radio" name="q1" type="radio" checked="checked" value="YES">';
}else{
   echo '<input class="radio" name="q1" type="radio" value="NO">';
} 
```

# java - JAVA .equalsIgnoreCase 不起作用

> ID：11605422
> 
> 赞同：2
> 
> 时间：2012-07-23T01:27:24.243
> 
> 标签：java, if-statement, conditional-statements

在我的服务器类的主要方法中，我有一系列`if`用于聊天程序的保留关键字的语句，我正在尝试使用变量的值和`.equalsIgnoreCase`方法来遍历这些语句。问题是，即使我的变量具有某个值，但在执行程序时，`else`即使变量与`if`条件之一完全匹配，代码也总是会进入子句。代码编译得很好，但我就是不知道为什么会这样。`if`我在开始语句之前打印了变量的值，以验证它是否保持正确的值。我的代码片段如下所示：

```
System.out.println("Keyword is : " + keyword);
if (keyword.equalsIgnoreCase("who")) 
{  
  System.out.println("calling who function");
  whoFunction(address, socket, port);
} 
else if (keyword.equalsIgnoreCase("whoami")) 
{ 
  whoami(address, socket, port, clientAddress);
} 
else if (keyword.equalsIgnoreCase("all")) 
{   
  all(message);
} 
else if (keyword.equalsIgnoreCase("Bye")) 
{
  bye(address, socket, port, clientAddress);
} 
else 
{     
  newUser(keyword, address, searchListLength, clientAddress, port);
} 
```

不管关键字的值是什么，它总是求助于选择最后的 else 语句。如您所见，这将导致总是打电话给我的`newUser`班级。我在这里错过了什么吗？可能盯着我的脸：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T01:37:57.207

您确定字符串`keyword`不包含任何尾随换行符/空格或其他不可打印字符吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T01:38:21.683

您的输入中可能有前导/尾随空格，这会导致不匹配。

尝试在顶部添加此语句：

```
keyword = keyword.trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T09:31:38.557

另请参阅整理者

> Collat​​or 类执行对区域设置敏感的字符串比较。您可以使用此类为自然语言文本构建搜索和排序例程。

*   [https://docs.oracle.com/javase/8/docs/api/java/text/Collat​​or.html](https://docs.oracle.com/javase/8/docs/api/java/text/Collator.html)
*   [执行与区域无关的比较](https://docs.oracle.com/javase/tutorial/i18n/text/locale.html)

# java - 左键弹出

> ID：11605426
> 
> 赞同：2
> 
> 时间：2012-07-23T01:28:05.097
> 
> 标签：java, swing, menu, awt, jpopupmenu

我正在尝试通过 Java 的动作侦听器在按钮上创建一个弹出窗口。

我有一些代码，但我无法让它工作，尽管我认为我已经接近了！这段代码来自一个例子，但是对于 Pmenu.show，我不得不删除第一个 arg，我不知道用什么替换它，这似乎是这里的问题。

```
btnOptions.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                final JPopupMenu Pmenu = new JPopupMenu();
                  JMenuItem menuItem = new JMenuItem("Cut");
                  Pmenu.add(menuItem);
                  menuItem = new JMenuItem("Copy");
                  Pmenu.add(menuItem);
                  menuItem = new JMenuItem("Paste");
                  Pmenu.add(menuItem);
                  menuItem = new JMenuItem("Delete");
                  Pmenu.add(menuItem);
                  menuItem = new JMenuItem("Undo");
                  Pmenu.add(menuItem);
                  Point location = MouseInfo.getPointerInfo().getLocation();
                  Pmenu.show(null, location.getX(), location.getY());
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:44:40.790

尝试传入你的窗口实例。（这）。

根据[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPopupMenu.html#show%28java.awt.Component,%20int,%20int%29)，第一个参数是

```
invoker - the component in whose space the popup menu is to appear 
```

所以你想在窗口中显示弹出菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T04:27:13.167

```
Component source = (Component)evt.getSource();
Point location = MouseInfo.getPointerInfo().getLocation();
SwingUtilities.convertPointFromScreen(location, source
Pmenu.show(source, location.getX(), location.getY()); 
```

我跳出来的问题是“为什么？” 为什么要这样做？你想要达到什么目的？

**更新 - 弹出偏移**

这将在源控件（按钮）及其下方水平居中显示弹出窗口。

```
Component source = (Component)evt.getSource();
Point location = source.getLocation();
Dimension size = source.getSize();

int xPos = location.x + ((size.width - PMenu.getWidth()) / 2;
int yPos = location.y + size.height;
Pmenu.show(source, xPos, yPos); 
```

当然，这只是一个示例，您可以随意提供布局信息

**工作更新**

```
 Component source = (Component)evt.getSource(); 
    Dimension size = source.getSize(); 

    int xPos = ((size.width - Pmenu.getPreferredSize().width) / 2); 
    int yPos = size.height;

    Pmenu.show(source, xPos, yPos); 
```

因为弹窗位置是相对于源的，所以我们不需要源的位置信息

# c# - C# SerialPort#Open() method throws ArgumentException because of port name?

> ID：11605429
> 
> 赞同：1
> 
> 时间：2012-07-23T01:29:01.060
> 
> 标签：c#, serial-port, argumentexception, virtual-serial-port

On my local machine,

*   Windows XP
*   Ports (COM & LPT)
    *   COM3
    *   RIM Virtual Serial Port v2 (COM4)
    *   RIM Virtual Serial Port v2 (COM5)

the following code,

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO.Ports;
using System.Threading;

namespace OpenSerialPortTest
{
    class Test
    {
        static void Main(string[] args)
        {
            foreach (String serialPortName in SerialPort.GetPortNames())
            {
                SerialPort serialPort = new SerialPort(serialPortName);
                try
                {
                    serialPort.Open(); // Line 19
                    Console.WriteLine(serialPort.PortName);
                }
                catch (Exception ex1)
                {
                    Console.WriteLine(ex1);
                    try
                    {
                        serialPort.Close();
                    }
                    catch (Exception ex2)
                    {
                        Console.WriteLine(ex2);   
                    }
                }
            }
            Console.ReadLine();
        }
    }
} 
```

will throw the following `ArgumentException`,

![enter image description here](../Images/03f3eb44bf9bab779065939e2f17348b.png)

That is,

> The given port name does not start with COM/com or does not resolve to a valid serial port.

Does anybody know why this is happening?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:33:08.090

have a look at [http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/35954173-2eeb-46af-bb3e-86840c6b5484](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/35954173-2eeb-46af-bb3e-86840c6b5484)

seems the problem was that those COM ports were mapped to something else and gives this strange error in response.

> I had exactly the same problem. I found that I had a windows printer setup to use the same port. As soon as I changed the port in the printers settings, the SerialPort.Open() worked.

# html - Vertical menu hover drop below with active state?

> ID：11605431
> 
> 赞同：1
> 
> 时间：2012-07-23T01:29:40.070
> 
> 标签：html, menu, hover

I need to create a vertical menu like so:

*   Item 1
    *   Item 1.1
    *   Item 1.2
*   Item 2
*   Item 3
*   Item 4

I need the sub-menu to expand/collapse **below** it's parent item on hover. I need it to have a page indicator or the ability to use the active state so the **menu displays the page you're currently on**. Also, this is going to be customized several times throughout a site, so I need to keep the titles/links in the html only.

I haven't been able to find or create a solution that fits all of these requirements. I have been researching for a few days and keep coming up empty handed. Any advice and/or solutions would be greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:15:56.430

May be a simple sliding jQuery menu would help you here.

[Here is an example fiddle](http://jsfiddle.net/wUDQb/1/).

Let me know if it helps you or not.

**Edit**

Well for this *active-state* issue I had to play a little more with the code and finally I got it as you wanted it to be (i guess so)...

Here is the [**NEW FIDDLE**](http://jsfiddle.net/wUDQb/27/).

Also here now I am using `class selectors` that makes the code much smaller and easy to read... :)

Cheers..

**Update**:

May be this is what you want: [http://jsfiddle.net/Zx2EU/3/](http://jsfiddle.net/Zx2EU/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:40:26.690

Perhaps something like the jQuery EasyUI "Async Tree", then just add some Javascript/PHP/whatever to determine if it is the current page or not, and then print something like < b > before every one (and < /b > at the end).

[http://www.jeasyui.com/demo/index.php](http://www.jeasyui.com/demo/index.php)

For example:

```
<?php

$currentFile = $_SERVER["SCRIPT_NAME"];
$parts = Explode('/', $currentFile);
$currentFile = $parts[count($parts) - 1];

?>
...
<li<?php 
    if ($currentFile == "index.php") {
        echo " class=\"selected\"";
    } else {

    } 
    ?>>
    <a href="index.php">Homepage</a>
</li> 
```

And in the stylesheet:

```
.selected { font-weight: bold; } 
```

Dynamic Drive's might be a bit lighter: [http://www.dynamicdrive.com/dynamicindex1/navigate1.htm](http://www.dynamicdrive.com/dynamicindex1/navigate1.htm)

Also lookup Apycom, they might have one, but they aren't free.

# android - setContentView() 不足以在布局之间切换？

> ID：11605437
> 
> 赞同：3
> 
> 时间：2012-07-23T01:30:38.790
> 
> 标签：android, android-layout

我有 2 个布局。

程序启动时，第一次加载（WebView）很好。

当用户选择一个菜单项时，第二个也很好地加载（一个简单的布局）：

```
setContentView(R.layout.simple);
LinearLayout ll = (LinearLayout) findViewById(R.id.simple_layout); 
```

它所做的只是在后台处理某些内容时显示图像。处理完成后，它会尝试（通过 Handler）切换回刚刚被遮挡的 WebView。

```
setContentView(R.layout.main); 
```

似乎发生了切换，但 webview 是**空白**的。

这是为什么？`setContentView()`就像切换到第二个布局一样，切换回第一个布局还不够吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T01:47:57.333

我使用这种方法： 在主程序中：

```
private LinearLayout mainview;
private LinearLayout playerview; 
```

在 onCreate 中：

```
LayoutInflater inflater = LayoutInflater.from(this);
setContentView(R.layout.main);
mainview = (LinearLayout) this.findViewById(R.id.main);
playerview = (LinearLayout) inflater.inflate(R.layout.player, null); 
```

然后你可以打电话

```
setContentView(mainview); 
```

和

```
setContentView(playerview); 
```

无论你什么时候想要。您只需要两个布局 xml 文件，每个布局一个。这比 Fragments 或其他方法简单得多。

出于某种原因，我不必夸大我开始的主要视图，只需夸大其他视图。我认为这是因为 setContentView() 在调用时必须为您膨胀视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:44:00.090

这里的主要问题是您不应该多次调用 setContentView() （如评论中所述）。片段是个好主意，但如果您只是想在 2 个视图之间切换，您也可以使用[ViewFlipper 。](http://developer.android.com/reference/android/widget/ViewFlipper.html)示例取自[http://blog.kerul.net/2011/07/viewflipper-examplea-simple-flashcard.html](http://blog.kerul.net/2011/07/viewflipper-examplea-simple-flashcard.html)

```
 Button next,previous;
    ViewFlipper vf;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        next = (Button) findViewById(R.id.Button01);
        previous = (Button) findViewById(R.id.Button02);
        next.setOnClickListener(this);
        previous.setOnClickListener(this);
        vf=(ViewFlipper)findViewById(R.id.ViewFlipper01);
    }

    //@Override
    public void onClick(View v) {
        if (v == next) {
            vf.showNext();
        }
        if (v == previous) {
            vf.showPrevious();
        }
    }
} 
```

您的屏幕为空白的原因是您必须再次重新启动您的 web 视图。如果您要多次调用 setContentView()，则必须重新获取您的 findViewByIds 和所有这些。包括列表视图。

# playframework - 缺少参数错误

> ID：11605444
> 
> 赞同：1
> 
> 时间：2012-07-23T01:31:04.333
> 
> 标签：playframework, playframework-2.0

我是游戏框架的新手，我正在尝试向服务器发布一个简单的帖子。在我设置的路线中：

```
POST    /Hello/add          controllers.Hello.add(name) 
```

在我的 Hello.java 类中我设置：

```
public class Hello extends Controller {
    public static Result add(String name){
        //add code
    }
} 
```

在我的 html 文件中：

```
<form action="Hello/add" method="post">
    <input type="text" name="name" />
    <input type="submit" value="Add" />
</form> 
```

但是，当我单击“添加”按钮时，会出现以下异常：

```
For request 'POST /Hello/add' [Missing parameter: name] 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:30:32.983

您必须在 Action 中使用[DynamicForm](https://github.com/playframework/Play20/wiki/JavaForms)，并且不要在路由文件中指定任何参数：

路线：

```
POST    /Hello/add          controllers.Hello.add() 
```

控制器和动作：

```
public class Hello extends Controller {
    public static Result add(){
        DynamicForm requestData = form().bindFromRequest();
        String name = requestData.get("name");
        // do what you want with the name variable
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T06:23:13.200

您不必在路由文件的方法签名中提供 name 参数即可使绑定生效。

在路由文件中，play 不明白 name 参数来自哪里，因为您没有在路由模式中指定它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:57:52.410

如前所述，如果表单数据与模型无关，则需要使用 DynamicForm [。](https://stackoverflow.com/a/11608115/365237)但是，如果它确实与模型相关（应该是通常的情况），你会这样做：

```
public class Hello extends Controller {
    public static Result add(){
        Form<MyObject> inputObject = form(MyObject.class).bindFromRequest();
        // do what you want with the prefilled object
        // object is accessible through inputObject.get()
        // often you'd just inputObject.get().save();
    }
} 
```

这里 MyObject 扩展了 Model。

你仍然有没有参数的路线，所以这适用：

```
POST    /Hello/add          controllers.Hello.add() 
```

# mapping - 如何使用 Dozer 将父字段映射到子对象字段

> ID：11605446
> 
> 赞同：2
> 
> 时间：2012-07-23T01:31:20.060
> 
> 标签：mapping, dozer

我正在使用推土机将我的对象 A 映射到 B

```
Class A {
int indicatorA;
List<A> listA;
// get set methods...
}

Class B{
int indicatorB;
List<B> listB;
// get set methods...
} 
```

我正在尝试将 A 映射到 B，并且我想将 parent indicatorA 值设置为 listB 示例中的所有子项：

```
A parentA = new A();    // with indicatorA = 10
A child1A = new A();    // indicatorA value has not set
A child2A = new A();    // indicatorA value has not set
parentA.getListA.add(child1A);
parentA.getListA.add(child2A); 
```

映射后，我想像这样看到对象 B

B parentB // 指标 B = 10 **和 parentB.listB 有 2 个对象 child1B 和 chld2B，指标 B 值设置为 10**

如何编写自定义转换器或任何简单的方法来做到这一点？非常感谢任何帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-05T07:39:38.020

是的，您将需要一个 CustomConverter 实现，因为无法通过直接映射在 List 的元素内设置值。

Dozer XML 需要一个简单的配置标签，引用 CustomConverter 类：

```
<?xml version="1.0" encoding="UTF-8"?>
<mappings xmlns="http://dozer.sourceforge.net"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd">
  <configuration>
    <custom-converters>
        <converter type="somepackage.MyConverter" >
            <class-a>somepackage.A</class-a>
            <class-b>somepackage.B</class-b>
        </converter>
    </custom-converters>     
  </configuration>
</mappings> 
```

这是 CustomConverter：

```
public class MyConverter implements CustomConverter {
    public Object convert(Object destination, Object source, Class destClass, Class sourceClass){
         if (source == null) {
              return null;
            }
            B dest = null;
            if (source instanceof A) {
                // check to see if the object already exists
                if (destination == null) {
                  dest = new B();
                } else {
                  dest = (B) destination;
                }

              //dest is your parentB instance

              //setting indicatorB value in parentB
                dest.setIndicatorB(((A) source).getIndicatorA()); 

              //creating child instances of B
                B child1B = new B();
                B child2B = new B();  

              //setting indicatorB values to the child instances as well
                child1B.setIndicatorB(((A) source).getIndicatorA());                
                child2B.setIndicatorB(((A) source).getIndicatorA()); 

              //adding child Bs to parentB list
                List<B> listOfBs = new ArrayList<B>(); 
                listOfBs.add(child1B);
                listOfBs.add(child2B);
                dest.setListB(listOfBs);
                return dest;
            }
            return null;        
    }
} 
```

如果 childAs 的数量仅在运行时已知，您可以使用 CustomConverter 中的循环来创建相应数量的 childB。

# database - django 数据库编解码器

> ID：11605447
> 
> 赞同：1
> 
> 时间：2012-07-23T01:31:31.810
> 
> 标签：database, django, utf-8, sqlite

我试图在sqlite数据库中使用一些汉字（用django），但不能在管理页面中显示

从setting.py：

```
LANGUAGE_CODE = 'en'

gettext = lambda s: s
LANGUAGES = (
    ('zh-cn', gettext('Simplified Chinese')),
    ('en', gettext('English')),
) 
```

来自models.py：*的汉字

```
# -*- coding: cp936 -*-
class jiu(models.Model):
unit_list = (
        ('***', '***'),
        ('***', '***'),
    )
unit = models.CharField(max_length=8, choices=unit_list) 
```

它是一个 sqlite3 数据库开发服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:38:09.617

如果它不是 Python 3（我猜不是，因为我不知道 Django 对 py3k 有官方支持），你应该使用 unicode 文字：

```
unit_list = (
    (u'****', u'****'),
    (u'****', u'****'),
) 
```

# java - 如何删除 MiGLayout 中组件之间的空间

> ID：11605450
> 
> 赞同：4
> 
> 时间：2012-07-23T01:32:42.380
> 
> 标签：java, swing, miglayout

我有一段时间没有使用 MiGLayout 了，我不记得如何删除组件之间自动放入的空间。我尝试使用以下参数无济于事（注意我想保持水平间距）：

*无视觉填充*

*垫 0*

*插图 0*

*成长的*

这是我的意思的一个例子： ![组件之间的空间](../Images/03c7072b2f05778f63ed754fa186f012.png)

我想要的是将行两两分组。所以第一和第二 JTextFields 行之间不应该有间隙。不过，我想保持第二排和第三排之间的差距。我希望将第三行和第四行分组，它们之间没有任何间隙，等等。

这是我的布局代码的相关部分（这是在扩展 JPanel 的类中）：

```
setLayout(new MigLayout("insets 0", "grow"));

//Code to create the JTextFields not shown as it is not relevant

    for(int i = 0; i < textFields.length; ++i) {
        for(int j = 0; j < textFields[0].length; ++j) {
            textFields[i][j].setPreferredSize(new Dimension(80, 50));

            if(j == 0 && i % 2 == 0) //If it's the first JTextField in an even row
                add(textFields[i][j], "newline, split, gaptop 5, gapright 5");
            else if(j == 0 && i % 2 != 0) //If it's the first JTextField in an odd row
                add(textFields[i][j], "newline, split, gapright 5");
            else //if it's any other JTextField
                add(textFields[i][j], "gapright 5");

        }
    } 
```

所以基本上，我使用循环遍历我的所有组件，然后在奇数行上方设置一个间隙，因为那是我想要组件中行之间的空间的地方，对于其他组件，我设置了相同的参数，除了那个间隙。

最终，我将把 JPanel 中同一行中的所有 JTextField 分组，并将 JPanel 添加到布局中，但目前这并不重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:00:49.427

您必须明确设置 0 宽度间隙，因为默认值是与平台相关的“相关”间隙。您可以在布局级别或行/列级别执行此操作。例如：

```
setLayout(new MigLayout("gap rel 0", "grow")); 
```

然后，您可以将现有约束用于奇数行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T08:02:32.313

你必须在 LayoutConstraints 中去掉它，ComponentConstraints 中的间隙只能增加默认值，不能减少。请记住：[永远不要在组件上使用 setXXSize](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi/7229519#7229519) :-) 相反，如果您*真的*想要硬编码大小，请在 LayoutManger 中执行此操作，并考虑以独立于屏幕分辨率的方式执行此操作 - 您手中有一只非常强大的野兽。另外：不要重复自己的布局以及所有其他代码部分。最好在最高约束层尽可能多地定义。

一些代码片段（使用 SwingX JXPanel 只是为了轻松设置背景图像）

```
int rows = 10;
int columns = 20;
MigLayout layout = new MigLayout(
        // set the automatic wrap after columns
        "insets 0, wrap " + columns, 
        // hardcode fixed column width and fixed column gap 
        "[50lp, fill]5lp", 
        // hardcode fixed height and a zero row gap
        "[20lp, fill]0");
JXPanel content = new JXPanel(layout);
content.setBackgroundPainter(new ImagePainter(XTestUtils.loadDefaultImage("moon.jpg")));
for (int r = 0; r < rows; r++) {
    // top gap on even rows
    String topGap = r != 0 && r % 2 == 0 ? "gaptop 5lp" : "";
    for (int i = 0; i < columns; i++) {
        JTextField field = new JTextField();
        content.add(field, topGap);
    }
}
showInFrame(content, "grid"); 
```

刚看到你最后一句话：

> 最终，我将把 JPanel 中同一行中的所有 JTextField 分组，并将 JPanel 添加到布局中，

考虑不要这样做：嵌套面板对于功能不够强大的 layoutManager 来说是一个杂项，MigLayout 是为一体化（或至少更大部分）方法而设计的。

很抱歉有很多*不做的*:-)

# c# - 导出的数据日期和时间点到当前日期和时间

> ID：11605452
> 
> 赞同：0
> 
> 时间：2012-07-23T01:33:03.207
> 
> 标签：c#

我有这个脚本的问题。每当我将这组代码导出到文本文件时，我希望它根据我选择的日期和时间打印，但它显示的是“Sales-23-07-2012”。

例如，我希望文本文件为“销售-（我选择的日期）”而不是“销售-23-07-2012”，请帮助。

```
 namespace MedicalDataExporter

{

    public partial class frmSales : Form
    {
        public frmSales()
        {
            InitializeComponent();
        }

    private void dtpFrom_ValueChanged(object sender, EventArgs e)
    {

    }

    private void btnExtract_Click(object sender, EventArgs e)
    {

        SqlConnection objConn = new SqlConnection("Data Source=AKC-105DR-CMS01\\GLOCO;Initial Catalog=Medprac;Persist Security Info=True;User ID=sa;Password="");

        objConn.Open();

        SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment FROM Invoice WHERE (InvDate >= CONVERT(datetime, '"+dtpFrom.Text +"', 105 )) AND (InvDate <= CONVERT(datetime, '"+dtpTo.Text+"', 105))", objConn);

        SqlDataReader objReader;
        objReader = objCmd.ExecuteReader();

        System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
        System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

        int count = 0;
        while (objReader.Read())
        {

            for (int i = 0; i < 5; i++)
            {
                if (!objReader.IsDBNull(i))
                {
                    string s;
                    s = objReader.GetDataTypeName(i);
                    //MessageBox.Show(s);
                    if (objReader.GetDataTypeName(i) == "char")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                    else if (objReader.GetDataTypeName(i) == "money")

                    {
                        sw.Write(objReader.GetSqlMoney(i).ToString());
                    }
                    else if (objReader.GetDataTypeName(i) == "nvarchar")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                }
                if (i < 4)
                {
                    sw.Write("\t");
                }

            }
            count = count + 1;
            sw.WriteLine();

        }
        sw.Flush();
        fs.Close();
        objReader.Close();
        objConn.Close();
        MessageBox.Show(count + " records exported successfully.");
        this.Close();
    }

    private void groupBox1_Enter(object sender, EventArgs e)
    {

    }

    private void dtpTo_ValueChanged(object sender, EventArgs e)
    {

    }

    private void frmSales_Load(object sender, EventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:40:36.043

你真的只是用管理员密码发布了一个完整的连接字符串吗？

随便换`DateTime.Now.ToString("dd-MM-yyyy")`

和

```
myDateControlOnTheForm.Text 
```

# c++ - 如何将字节保存到 pdf 文件（如何将每个 pdf 页面更改为字节）

> ID：11605457
> 
> 赞同：-4
> 
> 时间：2012-07-23T01:33:28.610
> 
> 标签：c++, c, pdf

我有一个 pdf 或 word 文件，并以字节为单位读取它，所以我可以对其进行加密，现在，我想知道如何将这些字节写入 pdf 文件，所以除非文件被解密，否则用户将其视为垃圾代码？

有没有一种方法可以将每个页面更改为字节？我需要 c 或 c++ 代码。因为我想加密每个pdf页面，我可以加密字节数据，我也想知道我什么时候加密每个页面，它还是一个pdf文件，只是每一页都是垃圾字符（不可读的代码，乱码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:28:20.710

[PDF 规范](http://www.adobe.com/devnet/pdf/pdf_reference.html)已经描述了 PDF 加密：加密的PDF 对象从顶层移除，而是包含在`/Type /ObjStm`使用`/Filter /Crypt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:51:10.097

它已经是字节了——这就是你解释重要字节的方式！

有了一点关于 PDF 格式的知识，您可以编写一些东西来加密文件，使其仍然是 PDF 但显示为不可读的垃圾*，但如果您只是加密 PDF 文件（或其中的字节），那么它不会仍然是一个PDF文件。

* 这只是一个假设——我自己并没有真正做过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T02:51:16.467

[这篇](https://stackoverflow.com/questions/58730/open-source-pdf-library-for-c-c-application)文章提供了有用的库来创建 pdf。在将 pdf 写入文件之前，您应该能够加密文本。

# c++ - TFTP 服务器未从客户端接收

> ID：11605459
> 
> 赞同：0
> 
> 时间：2012-07-23T01:33:49.853
> 
> 标签：c++, client, tftp

我正在使用 C++ 开发 TFTP 服务器。问题是当我使用 Internet 上提供的 TFTP 客户端演示 (HS TFTP) 时，我无法接收或至少在接收缓冲区中看不到任何内容。

我可以“感觉到”我的应用程序正在接收某些内容，但是当我将那个演示用于 TFTP 客户端时，我看不到收到的内容。所以，我所做的是自己创建一个客户端并发送一个类似“WRQ”的命令。通过这种方式，我能够接收发送的命令。因此，我不知道为什么我看不到来自 Internet 上的常规 TFTP 客户端的内容。

顺便说一句，传输已使用本地 ip 127.0.0.1 和默认 TFTP IP 69 在同一台计算机上进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:50:20.663

对您的场景进行故障排除需要 Wireshark。然后，您可以快速直观地发现 TFTP 协议可能发生的情况。

# symfony - Symfony 2：从 FOSCommentBundle 开始

> ID：11605460
> 
> 赞同：2
> 
> 时间：2012-07-23T01:33:57.727
> 
> 标签：symfony, comments

[我按照文档](https://github.com/FriendsOfSymfony/FOSCommentBundle/blob/master/Resources/doc/index.md)的说明安装了 FOSCommentBundle（在安装 JMSSerializerBundle 和 FOSRestBundle 之后）。

但是当我尝试应用[教程最后一页上](https://github.com/FriendsOfSymfony/FOSCommentBundle/blob/master/Resources/doc/4-enable_comments_on_a_page.md)写的内容时，生成的页面上没有任何反应（在我包含 async.html.twig 的地方没有显示任何内容），而我没有忘记包含 jQuery。在数据库中，在 Thread 表中创建了一个带有“foo”id 键的条目（如 async.html.twig 代码中所写）。

而且，我绝对不知道如何使用这个捆绑包。我没有找到很多关于它的教程（比如 FOSUserBundle），并且文档不包含“开始于”部分。我不确切知道什么是 Thread(s)/Comment(s)，它们是如何链接在一起的，这些类中不同字段的含义是什么，用于发布/显示评论的方法/视图是什么， ...

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:28:39.127

好的，请确保`comments.js`在页面上正确包含

```
fos_comment_script.src = '{{ asset('path to js/comments.js') }}'; 
```

如果`thread id`未设置，它将自动创建

# box-api - Box API 创建文件夹

> ID：11605462
> 
> 赞同：1
> 
> 时间：2012-07-23T01:34:10.710
> 
> 标签：box-api

我是一名开发人员和新手。

我正在尝试使用 Box API 2.0 创建文件夹。我创建了一个应用程序并获得了 api 密钥。我已成功获得登录“pari@exeterpremedia.com”的授权令牌。

当我尝试使用以下内容创建文件夹时使用这些凭据：
url: "https://www.box.com/api/2.0/folders/321654595?response_type=xml"
xml: " `<?xml version='1.0' encoding='UTF-8' ?><request><api_key>API_KEY</api_key><auth_token>AUTH_TOKEN</auth_token><name>New Folder</name></request>`"

我得到以下回复

```
<?xml version="1.0" encoding="UTF-8"?>
<error><status>401</status><code>unauthorized</code><help-url>http://developers.box.com/docs/#errors</help-url><message>Unauthorized</message><request-id>1341258286500ca4843dfa7</request-id></error> 
```

我使用 perl 和“LWP::UserAgent & HTTP::Request::Common”模块进行 http 调用。

我是走在正确的道路上还是错过了明显的东西。

谢谢，
帕里
pari@exeterpremedia.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:53:08.453

创建文件夹的格式良好的请求应如下所示：

```
POST https://api.box.com/2.0/folders/{parent folder id}.xml 
```

与身体

```
<folder>
<name>
{the folder name}
</name>
</folder> 
```

请注意以下事项：

1.  基本 URL 是**https://api.box.com/2.0**，不是 www.box.com 也不是 http
2.  `.xml`附加到请求的末尾，表示正在发送 xml 并希望返回
3.  `<folder>`数据周围有一个封闭标签，与发送 JSON 的方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:01:17.290

我不是特别熟悉将 XML 与 Box 的 API 结合使用，但我不确定您是否可以在请求正文中提供身份验证信息。您应该尝试将身份验证信息放入标题中，如他们的文档中[所示](http://developers.box.com/docs/#folders-create-a-new-folder)。

基本上尝试将身份验证信息放在以下格式的 Authorization HTTP 标头中：

```
Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN 
```

# image - 模式识别以绘制和匹配形状

> ID：11605465
> 
> 赞同：1
> 
> 时间：2012-07-23T01:35:21.840
> 
> 标签：image, image-processing, draw

任何人都可以向我指出任何可以绘制和匹配图像的开源程序，就像[这里](http://www.youtube.com/watch?v=RPf0KWsrRGk)看到的 1:10 到 4:20。
任何线索将不胜感激。先感谢您。

# google-apps-script - 在 Google 电子表格中构建自定义多级菜单

> ID：11605466
> 
> 赞同：0
> 
> 时间：2012-07-23T01:35:21.710
> 
> 标签：google-apps-script, google-sheets

有人知道在 Google 电子表格应用程序脚本的自定义菜单中获得多个级别的方法吗？

在[文档](https://developers.google.com/apps-script/class_spreadsheet#addMenu)中，它展示了如何使用`method addMenu(menuName, menuEntries)`. 可以`menuEntries`结构化以提供菜单层次结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:33:05.987

现在不可能创建多级菜单。有一个[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=317)提交给 GAS 问题跟踪器。你可以为这个问题投票。希望 GAS 团队能尽快解决这个问题。

# node.js - 使用 Mocha 测试 connect-assets 编译的 js

> ID：11605469
> 
> 赞同：0
> 
> 时间：2012-07-23T01:35:42.340
> 
> 标签：node.js, testing, mocha.js

我试图弄清楚如何在[Mocha中测试使用](http://visionmedia.github.com/mocha/)[connect-assets](https://github.com/TrevorBurnham/connect-assets)编译的前端 javascript 。

我看到 mocha 有一个浏览器运行程序，但它不会编译和使用与您的实际应用程序 javascript 相同的资产。

如何用 mocha 测试 connect-assets 编译的 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:01:37.987

如果您希望从命令行完成所有操作，我认为这是不可能的。

要使用 mocha 测试您的客户端代码，您可能需要设置一个新的客户端测试页面。

您可以通过执行

```
mkdir public/test && mocha init public/test 
```

这将在您的公共文件夹中创建一个新的测试目录，并将默认的 mocha 客户端测试文件放在那里

*   `mocha.css`
*   `mocha.js`
*   `tests.html`

来自那里的挑战将是如何`connect-assets`在该 tests.html 页面上获得编译后的 javascript，对此没有一个好的答案。

我建议创建一个新`testLayout.jade`的并将以下 html 翻译成它

```
<html>
  <head>
    <title>Mocha</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="/test/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <script src="/test/mocha.js"></script>
    <script>mocha.setup('bdd')</script>

    <!-- Your connect-assets js("") script references here -->

    <script>
      mocha.run();
    </script>
  </body>
</html> 
```

然后，您将不得不创建另一个扩展该布局的视图。最后，连接一条路线来显示所有这些东西。

# flattr - 将 Flattr 按钮集成到软件中

> ID：11605470
> 
> 赞同：2
> 
> 时间：2012-07-23T01:35:43.580
> 
> 标签：flattr

是否允许将 Flattr 按钮直接集成到软件中，例如在信用部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:37:10.483

没有什么可以阻止您将 Flattr 集成到软件中，Flatr 甚至鼓励它。如果您不想了解有关如何集成的更多信息，可以前往 Flattrs[开发者网站](http://developers.flattr.net)。

基本上有两种方法可以实现 Flattr 按钮，或者使用按钮 javascript 并将其集成到浏览器中，或者您可以连接到我们的 REST API。API 为您提供了更多的权力来控制您可以做的事情，但同时它的实现要多一些。但这一切都在[开发者网站](http://developers.flattr.net)上进行了描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:47:02.183

据我所知，您并没有违反任何使用条款，但您​​最好自己看一下。无论如何，您的软件中的该按钮需要将您带到 Flattr Web 服务（又名网页）。我希望这会有所帮助。

# php - 分析来自 hotmail 的电子邮件标头以查找标记为垃圾邮件的邮件

> ID：11605473
> 
> 赞同：0
> 
> 时间：2012-07-23T01:36:14.343
> 
> 标签：php, email, spam, hotmail, email-headers

我有一个简单的 PHP 脚本，它为我网站上的用户生成一封电子邮件。出于某种原因，大多数邮件都被发送到用户的垃圾邮件文件夹。我设置了一个 hotmail 帐户来测试这一点，现在我正在尝试分析标头以检查为什么它会被添加到垃圾邮件文件夹中。

我得到的标题包括在下面。似乎没有任何与垃圾邮件（即 spamassassin）相关的信息。我想知道是否有人可以检测到问题可能是什么？

```
x-store-info:4r51+eLowCe79NzwdU2kRyU+pBy2R9QCj0/8P6fDMVumMo6iGJG5XQGQsGw4y+KC5jGdX6A7+/ZVHRw3c8psWXtc+cAfssqe5kw3LdG9RbC+kh049fg5aL5vFishJNonRedbn/JCR2Y=
Authentication-Results: hotmail.com; sender-id=pass (sender IP is 208.53.158.38) header.from=info@****.com; dkim=pass header.d=****.com; x-hmca=pass
X-SID-PRA: info@****.com
X-Message-Status: n:0:n
X-SID-Result: Pass
X-DKIM-Result: Pass
X-AUTH-Result: PASS
X-Message-Delivery: Vj0xLjE7dXM9MDtsPTA7YT0wO0Q9MjtHRD0yO1NDTD02
X-Message-Info: M98loaK0Lo1tWPCbe4OE0UbDdVDXEICZZMNsQz6Wthy3jeg8lyZ+D9euQ2riH1WvmBV23btdBFelBmKMH/9LOMR9or7uhXgxLWPa0gAZnJxsZCwy+xyGPBu8cHXLoyzG0CR/fKSJcN+zLjJCNkZvew==
Received: from itchy.cirtexhosting.com ([208.53.158.38]) by COL0-MC2-F40.Col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4900);
     Sun, 22 Jul 2012 16:56:31 -0700
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=****.com; s=default;
    h=Subject:To:From; bh=ZwVnoaT/AbcAu6/7wnV5p3ZMSyLI5Eg9h9kKTJTmUL4=;
    b=LTP74QdOU6Yt71wIr+J3PKWQUnGLUKRyU/Ps+ZM+OPgGOwfAeAvbPVemSl+dEh2u0VYtiuCdl5WvSK5zzQh+OV4KiBcy0xNj1vaRnBuUORgBY+SEIXu5TgLf3CbEZY0u;
Received: from itchy.cirtexhosting.com ([208.53.158.38]:26249 helo=localhost)
    by itchy.cirtexhosting.com with esmtpsa (TLSv1:AES256-SHA:256)
    (Exim 4.77)
    (envelope-from <info@****.com>)
    id 1St60G-0000kF-Oq
    for ****@hotmail.com; Sun, 22 Jul 2012 19:56:01 -0400
From: Marvelous Monthly Mix Up <info@****.com>
To: ****@hotmail.com
Subject: Welcome to the Marvelous Monthly Mix Up
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - itchy.cirtexhosting.com
X-AntiAbuse: Original Domain - hotmail.com
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - ****.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Return-Path: info@****.com
Message-ID: <COL0-MC2-F40nkB4ltF00b5209d@COL0-MC2-F40.Col0.hotmail.com>
X-OriginalArrivalTime: 22 Jul 2012 23:56:31.0807 (UTC) FILETIME=[9E28C4F0:01CD6865] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:03:30.900

真正防止电子邮件被标记为垃圾邮件的唯一方法是让您的用户为您的电子邮件创建过滤器或将您添加到他们的联系人列表中。

以下是 Google 为标记为垃圾邮件的电子邮件提供的两个资源：

1.  [为什么邮件被标记为垃圾邮件](http://support.google.com/mail/bin/answer.py?hl=en&ctx=mail&answer=1366858&expand=5)
2.  [合法邮件被标记为垃圾邮件](http://support.google.com/mail/bin/answer.py?hl=en&answer=9008)

您也可以尝试运行[电子邮件测试](http://www.brandonchecketts.com/emailtest.php)来检查您的内容。

如果您使用的是共享主机，那么您的 SMTP 使用的 IP 地址可能已被列入黑名单。如果您不在共享主机上，这种情况仍然可能发生，但更有可能发生，因为您拥有来自各个领域的大量用户。

“如果它长得像鸭子，叫起来像鸭子，那它就是鸭子。” 尝试确保您具有良好的内容质量，并且您应该能够在那里搜索帮助。

# emacs - 设置 emacs 外壳

> ID：11605478
> 
> 赞同：3
> 
> 时间：2012-07-23T01:37:42.143
> 
> 标签：emacs, startup

当我重新启动它时，我经常（每周）在 Emacs 中做这种事情：

1.  打开连接到 RSH 服务器的 shell，执行一些命令，重命名缓冲区
2.  对几个不同的远程机器重复第 1 步

我在想：有没有办法让我可以在启动脚本中对这些设置进行硬编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:06:12.163

这是一个启动 shell、ssh-es 到主机并在进入交互式 shell 之前运行命令的函数：

```
(defun start-remote-shell (host command)
  (shell (format "*shell-%s*" host))
  (sleep-for 0 500)  ; Wait half a second for the prompt to appear
  (insert (format "ssh -t %s %s'; exec bash -i'"
                  (shell-quote-argument host)
                  (shell-quote-argument (shell-quote-argument command))))
  (comint-send-input)) 
```

您可以将此代码段放入您的`.emacs`文件中，然后是您想要的特定调用，例如：

```
(start-remote-shell "server-one" "apache start")
(start-remote-shell "server-two" "mysql start")
(start-remote-shell "server-three" "foo start") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:21:36.007

我认为这样的事情可以帮助你：

```
(mapc (lambda (server)
    (shell (concat "*shell-" server "*"))
    (insert "ls")
    (comint-send-input)
    (insert "ps ax")
    (comint-send-input))
  '("server1" "server2")) 
```

如您所见，使用 insert 写入控制台，使用 comint-send-input 就像在终端中按回车键一样。在此示例中，将在两个 shell 缓冲区上执行 ls 和 ps

# magento - Magento：我可以限制商店营业时间吗？

> ID：11605479
> 
> 赞同：1
> 
> 时间：2012-07-23T01:37:46.920
> 
> 标签：magento

我正在寻找是否可以按小时限制我的 Magento 商店。示例：我计划与一家使用 Magento 作为在线订购机制的餐厅合作。但是，我希望他们在当地时间上午 11 点到晚上 10 点之间订购，而不是人们能够 24/7 订购。我只是想删除在这些时间下订单和结帐的选项，但仍然允许项目/菜单可见。有没有人有这个问题的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:11:03.263

我会利用 Magento 的配置系统并创建一个“can_order”值。按照 B00MER 通过 cron 的建议保持更新。挂钩到 'catalog_product_is_salable_after' 相应地更改 'salable' 的值。您还可以重复使用配置值来全局放置横幅，以通知查看者商店营业时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:22:33.110

您可以利用 maintance.flag 文件完全关闭商店，并简单地使用相同的方法，但只需添加一个额外的检查，如果客户试图点击购物车页面并将他们重定向到有关营业时间的通知。

例如，在您的 index.php 中，然后在商店关闭以进行在线订购时删除并添加 'closed.flag' 文件。（这个例子没有经过测试，但应该给你一个大致的想法）

```
if(file_exists('closed.flag') && $_SERVER['PATH_INFO'] == "checkout") 
{
   include_once dirname(__FILE__) . 'closed.php'; exit;
} 
```

# php - Magento - 将最小订单金额更改为最大订单金额

> ID：11605483
> 
> 赞同：1
> 
> 时间：2012-07-23T01:38:08.907
> 
> 标签：php, magento, magento-1.5

我正在尝试将系统 > 配置 > 销售 > 销售 > 最小订单金额中的最小订单金额功能更改为“最大订单金额”

我希望它就像在函数中将“>”更改为“<”一样简单，但找不到正确的文件。

[目的是运送到特定国家（拥有自己的网站）的货物必须低于一定的美元价值，否则将支付关税、消费税和其他关税。因此，我正在尝试实施最大订单价值，以将所有到该目的地的订单保持在该层级下，这样客户就不必支付意外费用]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:26:02.520

我找到了解决方案。

它隐藏在 App > Code > Core > Mage > Sales > Model > Quote > Address.php

895线

```
$amount = Mage::getStoreConfig('sales/minimum_order/amount', $storeId);
if ($this->getBaseSubtotalWithDiscount() < $amount) {
    return false
} 
```

只需更改`<`为`>`

然后在 App > Code > Core > Mage > Sales > etc > system.xml 中，围绕第 157 - 226 行将所有标签从“Minimum Amount”更改为“Maximum Amount”，以便在后端正确显示在菜单中。

# html - Chrome 渲染 -webkit-appearance:rating-level-indicator 时值不正确

> ID：11605490
> 
> 赞同：1
> 
> 时间：2012-07-23T01:38:50.087
> 
> 标签：html, google-chrome

当我渲染这个 HTML/CSS 时：

```
<!DOCTYPE html>
<body>
  <meter style="-webkit-appearance: rating-level-indicator;" min="1" max="5" value="5">5</meter>
</body> 
```

Chrome 20.0.1132.57 只显示四颗星。[你可以在这个小提琴中看到它。](http://jsfiddle.net/bclennox/7KcfT/)

我误解了它`<meter>`的工作原理，还是这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:41:33.463

我猜你误解了它的工作原理。最小值代表“没有星星”，在您的情况下得分为 1。我假设如果您有，`min="0"`那么它将显示五颗星。

# java - 没有为 jdbc:mysql://localhost:3306/ 找到合适的驱动程序与 netbeans 7.0.1, glassfish 3.1

> ID：11605505
> 
> 赞同：0
> 
> 时间：2012-07-23T01:41:52.063
> 
> 标签：java, mysql, jar, glassfish, netbeans-7

我有一个名为`"Sta"`.

每次我尝试连接到 mysql 数据库时，都会遇到异常：

> **2012/07/23 03:34:50SQLException: 没有为 mysql:jdbc://127.0.0.1:3306/sta?user=root 找到合适的驱动程序。**这种异常发生在： **this.db_con=DriverManager.getConnection( "jdbc:mysql://127.0.0.1:3306/sta?user=root");**

到目前为止我所做的是：

*   将mysql驱动jar放入库中（通过项目属性），
*   将驱动程序 jar 手动放入 WEB-INF/lib （创建 lib），和

*   也放到tomcat的库目录下。

所有结果都相同（我正在使用：**mysql-connector-java-5.1.20-bin.jar**）

除上述异常外，项目本身编译部署正常。此外，如果我对“普通”java - RMI 应用程序使用相同的连接字符串，它可以正常工作并且没有任何故障。

```
public class Sta_client extends HttpServlet 
{
    private Connection db_con=null;

    public Sta_client() throws ServletException
    {
        super();

        if (this.db_con==null)
        {
            try
            {
                Class.forName("com.mysql.jdbc.Driver");
            } 
            catch(java.lang.ClassNotFoundException e) 
            {
                System.err.print("ClassNotFoundException: ");
                System.err.println(e.getMessage());
            }

            try 
            {
                this.db_con=DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/sta?user=root");
            } 
            catch(SQLException ex) 
            {
                DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
                Date date = new Date();
                System.err.println(dateFormat.format(date)+"SQLException: " + ex.getMessage());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:39:22.017

Netbeans 7.0.1 具有 mysql 连接器。删除您的 mysql-connector-java-5.1.20-bin.jar 并在 NetBeans IDE 中添加支持的 jar。

# php - 编写评级 php 函数的更好方法

> ID：11605506
> 
> 赞同：0
> 
> 时间：2012-07-23T01:42:25.727
> 
> 标签：php, function

我在下面写了这个评级函数，想知道它是否可以变得更小/更简单或更好的编码，它使用显示一个基于函数中百分比数字的图像，称为

```
function rating( $number ) {

if ($number >= .0 && $number <= .099999) { 
  $star = '<img src="images/0.gif" alt="' . $number . '" />';
}

if ($number >= .10 && $number <= .199999){
  $star = '<img src="images/10.gif" alt="' . $number . '" />';
}

if ($number >= .20 && $number <= .299999){
  $star = '<img src="images/20.gif" alt="' . $number . '" />';
}

if ($number >= .30 && $number <= .399999){
  $star = '<img src="images/30.gif" alt="' . $number . '" />';
}

if ($number >= .40 && $number <= .499999){
  $star = '<img src="images/40.gif" alt="' . $number . '" />';
}

if ($number >= .50 && $number <= .599999){
  $star = '<img src="images/50.gif" alt="' . $number . '" />';
}

if ($number >= .60 && $number <= .699999) { 
  $star = '<img src="images/60.gif" alt="' . $number . '" />';
}

if ($number >= .70 && $number <= .799999){
  $star = '<img src="images/70.gif" alt="' . $number . '" />';
}

if ($number >= .80 && $number <= .899999){
  $star = '<img src="images/80.gif" alt="' . $number . '" />';
}

if ($number >= .90 && $number <= .999999){
  $star = '<img src="images/90.gif" alt="' . $number . '" />';
}

if ($number > .999999){
  $star = '<img src="images/100.gif" alt="' . $number . '" />';
}

return $star;
} 
```

**继承人如何使用它：**

```
rating(0.51087) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T01:51:52.810

当然，它只需要一点数学。

```
function rating($number) {
    return '<img src="images/' . floor($number * 10) * 10 . '.gif" alt="' . $number . '" />';
} 
```

# string - 在matlab中用零填充字符串

> ID：11605508
> 
> 赞同：1
> 
> 时间：2012-07-23T01:42:44.440
> 
> 标签：string, matlab, pad

我有一个带有日期的日志文件，即：

```
LOG_20120509_100000.log
(year) (month) (day) _ (hour) (minute) (second) 
```

但想象一下，我想在一组每小时日志文件上执行相同的操作。我希望能够做到这一点：

```
for i in 0:23
    perform on LOG_20120509_%d0000.log, i
end 
```

但这不适用于时间少于 10 点的日志，因为它将变为：

```
LOG_20120509_50000.log 
```

那么如何在matlab中补零呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:16:53.617

您的`%d`使用表明您正在使用或类似的方式生成文件名，在这种情况下，使用零填充时间`sprintf`就足够了。`%02d`

# c - 如何防止引用的包含搜索当前源文件的目录？

> ID：11605515
> 
> 赞同：17
> 
> 时间：2012-07-23T01:43:59.437
> 
> 标签：c, gcc, include-path

gcc 提供了`-I-`选项，在`-I`前面的目录`-I-`中搜索带引号的包含 ( `#include "foo.h"`)，`-I`在后面的目录`-I-`中搜索带括号的包含 ( `#include <foo.h>`)，以及在其他目录之后搜索带引号的包含。

`-I-`还有一个非常重要的作用。`#include`它从默认搜索路径中删除源文件所在的目录。通常，引用的包含总是搜索源文件的目录，并在任何或其他目录 *之前搜索它。*因此，您可以通过删除否则将优先考虑的默认路径，以您想要的顺序准确指定引用包含文件的位置。`-I``-I-`

所以听起来我回答了我的问题，是吗？不，当我`-I-`现在使用时，我得到了这个 nastygram：

```
cc1: note: obsolete option -I- used, please use -iquote instead 
```

问题是`-iquote`不会从搜索路径*中*删除当前目录。无论我提供什么，它仍然总是首先搜索`-iquote`。

所以问题是：如何在`-I-`不使用`-I-`已弃用且最终会消失的情况下获得与 相同的效果？

**阐述：**

假设文件布局如下：

```
srcdir/
    configure
    file1.c
    file2.c
    config.h

builddir/
    Makefile
    file1.o
    file2.o
    config.h
    libpudding.a 
```

由于各种原因，我们无法从中删除`config.h`（`srcdir`它会影响其他平台上的构建过程）。但是，我们希望将`config.h`from`builddir`优先于`zconf.h`in `srcdir`。

这可以通过 GCC 的`-I-`标志来完成，但在其他方面似乎是不可能的。

**更新的问题：**

好吧，似乎 GNU CC 开发人员已弃用`-I-`，但没有提供实现其功能的替代方法。所以我更新的问题是：让开发人员注意这一点的最有效方法是什么，以便很有可能不`-I-`被弃用（我认为这是最可取的，因为它是处理指定的一种非常优雅的方式搜索，比 -iquotexxx 更丑更丑），或者提供了某种方法来从引用的包含搜索路径中删除当前目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T03:58:45.890

在处理了`zconf.h`树外构建的烦恼之后，我肯定会回到你的观点，即当一个问题非常棘手时，它通常是错误的问题。你是绝对正确的。正确的问题是为什么`zconf.h`存在于`srcdir`，什么时候应该从`zconf.h.in`. 对于给定的一组配置设置，应该始终生成或永远不会生成文件。它不应该在同一个构建中同时提供和生成。

这里最好的解决方案是`zconf.h`从源代码树中删除并始终`zconf.h.in`像在 CMake 构建中那样生成它。我一直不清楚为什么它以一种方式用于 CMake，而另一种方式用于 Make。如果关键是您没有 autoconf，因此您将使用预构建`zconf.h`的 make，但使用 CMake 生成的用于 CMake，然后将其作为`zconf.h.in`（您所做的）发布，然后复制它进入 Makefile 中的构建树。

摆脱的怪异行为`-I-`是一个很好的举措。在您的搜索路径中有多个以相同名称引用的文件非常令人困惑和难看。如果`-I`搜索顺序很重要，那么您的项目或构建中的某些内容设计不正确。我永远不必猜测`#include "foo.h"`指的是什么。我绝对不应该处于很容易发现自己编辑错误文件的情况。

我对您改进 zlib 构建的工作表示赞赏。zlib 肯定不是最难构建的包，但它也肯定不是最简单的（特别是如果您需要 contrib/minizip 的东西，我总是这样做）。

# ios - 首次显示表格时未显示 UITableViewCell 子视图

> ID：11605519
> 
> 赞同：0
> 
> 时间：2012-07-23T01:44:20.093
> 
> 标签：ios, uitableview, subview, addsubview

我正在尝试向我的表格单元格添加删除线标签（以 BOOL hasStrikethrough 为条件）。问题是第一次显示表格时没有出现删除线（即使 hasStrikethrough == YES）。如果滚动表格，则行会重新显示，并且删除线会正确显示。删除线只是作为 UITableViewCell 的子视图添加的 UILabel。

这是我的 cellForRowAtIndexPath 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"ItemCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell==nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

Item  *item = [self.fetchedResultsController objectAtIndexPath:indexPath];

cell.textLabel.text = item.itemName;
cell.textLabel.textAlignment = UITextAlignmentLeft;
cell.showsReorderControl = YES;
cell.shouldIndentWhileEditing = NO;

if ([[item hasStrikethrough] boolValue] == YES) {
    [self addStrikethrough:cell];
}

return cell;
} 
```

这是 addStrikethrough 的代码：

```
- (void)addStrikethrough:(UITableViewCell*)cell
{
CGRect frame = cell.textLabel.frame;
UILabel *strikethrough = [[UILabel alloc] initWithFrame:frame];
strikethrough.opaque = YES;
strikethrough.backgroundColor = [UIColor clearColor];
strikethrough.text = @"------------------------------------------------";
strikethrough.lineBreakMode = UILineBreakModeClip;
[cell addSubview:strikethrough];
} 
```

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:21:59.437

问题在于 `CGRect frame = cell.textLabel.frame;`
单元格的 textLabel 行尚未布局，因此框架将为 (0,0,0,0) 并且您不会看到删除线标签。

您在下一个单元格中看到删除线的原因是因为那些是已经布置 textLabel 的重用单元格。

如我所见，您有两个选择：
第一个选项，自己设置删除线框，您可以使用 sizeWithFont 来确定所需的宽度，字体应该是 textFiled 字体。稍微玩一下以找到正确的 x 偏移量，使其完全位于 textLabel 上。

```
- (void)addStrikethrough:(UITableViewCell*)cell
{
    CGSize textLabelSize = [cell.textLabel.text sizeWithFont:[UIFont systemFontOfSize:20.0]];

    CGFloat cellHeight = cell.bounds.size.height;
    CGFloat strikethroughLabelHeight = 20.0;

    CGRect frame = CGRectMake(12, (cellHeight - strikethroughLabelHeight)/2, textLabelSize.width, strikethroughLabelHeight);
    UILabel *strikethrough = [[UILabel alloc] initWithFrame:frame];
    strikethrough.opaque = YES;
    strikethrough.backgroundColor = [UIColor clearColor];
    strikethrough.text = @"------------------------------------------------";
    strikethrough.lineBreakMode = UILineBreakModeClip;
    [cell.contentView addSubview:strikethrough];
} 
```

第二种选择是子类 UITableViewCell 并向其添加删除线标签。
然后你可以在 layoutSubviews 方法中设置它的框架，你可以根据你的需要隐藏/取消隐藏这个标签......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T01:49:49.567

单元基于其重用标识符被重用。目前您只使用一个标识符，因此“没有子视图的单元格”在操作系统看来与“有子视图的单元格”相同。

尝试在开始时检查删除线条件，并`StrikeIdentifier`在这种情况下发明一个新的重用标识符（例如 ）。

这是我建议的一种方法：

```
Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath];
BOOL isStrike = ([[item hasStrikethrough] boolValue]);

static NSString *CellIdentifier = @"ItemCell";
static NSString *StrikeIdentifier = @"ItemCellStrike";

UITableViewCell *cell = (isStrike)
                        ? [tableView dequeueReusableCellWithIdentifier:StrikeIdentifier]
                        : [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell==nil) {
    if (isStrike) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:StrikeIdentifier];
        [self addStrikethrough:cell];
    } else {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
}

. . . 
```

# ruby-on-rails - 检查外部网站上的链接？

> ID：11605526
> 
> 赞同：0
> 
> 时间：2012-07-23T01:46:25.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, webrat

我需要检查外部网站上的互惠链接 - Rails 应用程序中的最佳选择是 webrat 还是 capybara？或者是其他东西？

用户将提交已放置返回给我们的链接的页面的 URL，因此我们不需要抓取整个站点，只需要提交的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:52:19.223

对于典型的 HTML 解析，请使用 Nokogiri。

# jquery - 在 Wordpress 中使用 jQuery POST 和 WooTheme 的 Canvas 5

> ID：11605528
> 
> 赞同：1
> 
> 时间：2012-07-23T01:47:05.753
> 
> 标签：jquery, ajax, json, wordpress, post

我所有的 javascript 和 jQuery 代码都在工作，除了`$.post`. 我已经测试了通过其他方式直接发帖`http://MYSITE.com/functions/course-functions.php`并得到以下有效的 JSON 响应：

```
{"item":{"signedIn":true,"userID":"1","staySignedIn":"yes"}} 
```

但是，每当我单击登录按钮时，javascript/jQuery 都会正确运行验证代码，但不会执行以下代码：

```
$.post("http://MYSITE.com/functions/course-functions.php", { 
  type: 'signIn', 
  email: email, 
  password: password, 
  staySignedIn: staySignedIn },
  function(data) {
    var response = data.item;
    console.log(response);
    if (response.SignedIn == false) {
      $('#alerts').html('Oops! The email and password you used did not work. Please try again.').show();
    }
    else {
      if (response.staySignedIn == 'yes') {
    localStorage.staySignedIn = 'yes';
    localStorage.userID = response.userID;
      }
      sessionStorage.userID = response.userID;
      sessionStorage.signedIn = 'true';
      var url = 'http://MYSITE.com/courses?userID=' + response.userID + autoClaimCodeURLvariable;
      window.location = url;
    }
  },'json'); 
```

我使用以下包装器使 jQuery ($) 在 Wordpress 中工作：

```
jQuery(document).ready(function($) {
  //my jQuery Code
}); 
```

关于如何让这个工作的任何想法？谢谢！

# symfony-2.1 - Symfony2.1 - 使用 DataTransformer 时选项“em”不存在

> ID：11605530
> 
> 赞同：4
> 
> 时间：2012-07-23T01:47:40.050
> 
> 标签：symfony-2.1, data-transfer-objects

我正在使用[此](http://symfony.com/doc/master/cookbook/form/data_transformers.html)食谱食谱在 Symfon 2.1 中添加数据转换器，但出现以下错误，`The option "em" does not exist. Known options are: "attr", "block_name",....`

这仍然是将实体管理器发送到表单类型的有效方法吗？

```
$taskForm = $this->createForm(new TaskType(), $task, array(
    'em' => $this->getDoctrine()->getEntityManager(),
)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T14:03:58.830

为了使第一个简单的（没有依赖注入）Transformer 的食谱工作，您应该添加“em”作为已知选项。您可以使用`setRequired()`以下方法将其添加到表单的类型类（食谱案例中的 TaskType）中：

```
class TaskType extends AbstractType {
    //...
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {   
        //...other stuff like $resolver->setDefaults(... if you need it

        $resolver->setRequired(array('em'));
    }
} 
```

使用 $resolver->setDefaults() 添加 'em' 也可以，但在本食谱案例中需要实体管理器，因此使用 setRequired() 似乎更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T16:44:30.297

虽然我无法评论这是否是最好的方法，但我总是将它们作为硬依赖传递给我的任务构造函数......

**服务**

```
services:
    my_bundle.form.type.task:
        class: Company\MyBundle\Form\Type\TaskType
        arguments:
            - @doctrine.orm.entity_manager 
```

**控制器**

```
$form = $this->createForm($this->get('my_bundle.form.type.task'), $task);
// or
$form = $this->createForm(new TaskType($this->getDoctrine()->getEntityManager())); 
```

**表格类型**

```
namespace Company\MyBundle\Form\Type;

use Doctrine\ORM\EntityManager;
use Symfony\Component\Form\AbstractType;
// ...

class TaskType extends AbstractType
{
    protected $em;

    public function __construct(EntityManager $em)
    {
        $this->em = $em;
    }

    // ...
} 
```

只要我的表单类型有任何依赖关系，我就会使用容器来管理它们。我个人发现这种方法比依靠 Symfony 的复杂表单配置来为我做这件事更清楚发生了什么，以及我的自定义类需要什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T07:06:13.207

不要忘记

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Acme\TaskBundle\Entity\Task',
    ));

    $resolver->setRequired(array(
        'em',
    ));

    $resolver->setAllowedTypes(array(
        'em' => 'Doctrine\Common\Persistence\ObjectManager',
    )); 
```

# c - 令人困惑的“if”语句

> ID：11605533
> 
> 赞同：1
> 
> 时间：2012-07-23T01:48:17.740
> 
> 标签：c, if-statement

下面的语句到底在做什么？

这让我很困惑。我很惊讶 C 允许您在`if`语句中使用条件运算符。有没有更好的办法？

我发现语句中的条件运算符`if`太混乱了。我可以尝试使用 && 和 || 运营商，但我担心我可能会犯错误。

如何将下面的语句重写为更简单的形式？

```
if ( (offset < 0) ?
         ( input->binData.bounds.lo >= (unsigned long)(-offset) ) :
         ( input->binData.bounds.hi < (unsigned long)(-offset) ) ) 
```

我在 BitHoist 开源包中找到了这行 C 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T01:52:24.650

您可以使用三元运算符的每个分辨率来`AND`使用三元条件 ( `offset < 0`) 及其相反的 ( )：`offset >= 0`

```
if ( ((offset < 0) && ( input->binData.bounds.lo >= (unsigned long)(-offset) )) ||
     ((offset >= 0) && ( input->binData.bounds.hi <  (unsigned long)(-offset) )) ) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T02:00:44.417

假设`input->binData.bounds.lo <= 0 <= input->binData.bounds.hi`和 两者都是`long`，您可以利用无符号算术和比较来减少到单个条件。

```
if ((unsigned long)(-offset) - input->binData.bounds.lo <
    input->binData.bounds.hi - input->binData.bounds.lo) { ... } 
```

（参见[Hacker's Delight](http://www.hackersdelight.org/) 4-1 Checking Bounds of Integers 以获得正确性证明。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T01:54:51.527

这是一种不那么令人困惑的思考方式：

```
 overallBool = 0;

if ( (offset < 0) {
       overallBool = input->binData.bounds.lo >= (unsigned long)(-offset);
} else {
       overallBool = input->binData.bounds.hi < (unsigned long)(-offset);
}

if (overallBool) {
    do your thing.
} 
```

但显然它在实施中要大得多。

# javascript - 使用 DDE 通过 Javascript 控制 Bloomberg - 对象不支持方法

> ID：11605534
> 
> 赞同：2
> 
> 时间：2012-07-23T01:48:31.150
> 
> 标签：javascript, activex, dde, bloomberg

我正在按照[如何以编程方式打开特定的彭博终端页面的步骤进行操作？](https://stackoverflow.com/questions/3644304/how-to-open-a-specific-bloomberg-terminal-page-programmatically)通过 DDE (ActiveX/Javascript) 控制 Bloomberg 终端窗口：

```
xlApp = new ActiveXObject("Excel.Application");
var app = xlApp.DDEInititate("winblp", "bbk");
xlApp.DDEExecute(app,"<blp-1><home>MSFT US<EQUITY><GO>DES<GO>");
xlApp.DDETerminate(app);
app = "";
xlApp.Quit(); 
```

但是，调用 DDEInitiate 失败（IE8）并显示“对象不支持此属性或方法”——我可以看到 xlApp 已定义，并且 Visual Basic 中的等效调用似乎工作得很好：

```
ch = DDEInitiate("winblp", "bbk") 
```

谁能确定为什么 javascript 不起作用？

谢谢

瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:50:05.887

我也遇到过同样的问题，而且我现在相当确信没有办法用 javascript 做到这一点。我对 vbscript 没有任何问题，所以如果它有帮助的话：

```
<html>
<body>

<input id="button1" type="button" value="Bloomberg Test" onclick="button1_onclick()" />

<script type="text/vbscript" src="test2.vbs"></script>

</body>
<html> 
```

test2.vbs：

```
Sub button1_onclick()
    Dim ch
    Dim oXL

    Set oXL = CreateObject("Excel.Application")

    ch = oXL.DDEInitiate("winblp", "bbk")
    oXL.DDEExecute ch, "<blp-3><home>AAPL US<EQUITY><GO>BRC<GO>"
    oXL.DDETerminate ch

    oXL.Quit
End Sub 
```

# oracle - 在 oracle 中将决策树算法转换为二进制

> ID：11605536
> 
> 赞同：0
> 
> 时间：2012-07-23T01:49:08.983
> 
> 标签：oracle, data-mining, decision-tree

我在处理数据挖掘时遇到问题

我现在附上了一张图片，显示了我拥有的桌子。在这个表中有一个唯一的subscriber_id 列，我必须为这个项目使用决策树算法。决策树算法只接受二进制数，我不知道如何将这些数字转换为二进制数。

[http://ehmad11.com/DM1.png](http://ehmad11.com/DM1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:24:57.870

不确定您的“二进制数”在技术上的详细要求是什么，但一种解决方案是将字符串中的每个字符转换为其二进制表示：

```
SELECT
       REPLACE(
        REPLACE(
         REPLACE(
          REPLACE(
           REPLACE(
            REPLACE(
             REPLACE(
              REPLACE(
               REPLACE(
                REPLACE(
                 REPLACE(
                  REPLACE(TRANSLATE ('1.233.234.234-12312312' -- example from you screenshot, subscriber_id goes here
                                   , '.-'                     -- non-numeric characters in your data, extend if more possible
                                   , 'AB')                    -- replacement for non-numeric characters in your data, extend if more possible
                  ,'0','0000')
                 ,'1','0001')
                ,'2','0010')
               ,'3','0011')
              ,'4','0100')
             ,'5','0101')
            ,'6','0110')
           ,'7','0111')
          ,'8','1000')
         ,'9','1001')
        ,'A','1010')
       ,'B','1011')  -- extend to C, D, ... if more non-numerics in your data
        AS bin
  FROM dual
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:35:25.113

决策树也应该适用于非二元属性。如果 Oracle 不支持这一点，请使用更好的工具。

但不要使用订阅者 ID 列。ID 对您的用户来说是唯一的，并且看起来非常适合预测，但在现实中毫无用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:49:47.593

决策树应该接受非二元属性。

您的工具不支持这一点似乎很奇怪。我建议找一个更好的工具。

# javascript - JavaScript：ΔURL，刷新

> ID：11605539
> 
> 赞同：0
> 
> 时间：2012-07-23T01:49:54.683
> 
> 标签：javascript, url, browser

有人可以帮我写一个 JavaScript，当使用它时，它会在浏览器的 URL 字段中获取任何给定的 URL，并在“.com”之后和后面的任何其他内容之前附加一些内容。

具体来说，如果我在[http://www.example.com/test](http://www.example.com/test)上，那么我想要添加一些东西，比如 var.ia.bles 被附加在“.com”和“/test”之间，这样它看起来像这样：[http://www.example.com.var.ia.bles/test](http://www.example.com.var.ia.bles/test)。

在此任务结束时，如果能够以这样一种方式刷新浏览器，它现在将最终用户引导到修改后的 URL 指向的路径，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:54:53.587

该[`location`](https://developer.mozilla.org/en/DOM/window.location)对象具有您需要的所有部分。

```
location.assign(location.protocol + '//' + location.hostname + '.var.ia.bles' + location.pathname + location.search + location.hash); 
```

# ios - 如何在 iOS 上下载和解压缩文件

> ID：11605545
> 
> 赞同：3
> 
> 时间：2012-07-23T01:50:53.507
> 
> 标签：ios, authentication, download, zip

我想为我的应用下载一个包含 mp3 的 zip 文件。然后，我需要将其解压缩到一个永久目录中，该目录将包含要按需播放的 mp3。这是一个词汇应用程序，zip 文件包含要提取的 mp3。zip 文件约为 5 MB。

更多问题：将这些下载到什么好目录？如何解压？此外，文件，或者更确切地说，它们所在的 web 目录，是受密码保护的，所以我需要提供名称和密码。

有没有人有任何一般的指针？特别是，我想知道如何提供用户名/密码、下载的最佳目录、如何解压缩文件以及如何下载。任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:00:32.060

第一步，要下载受密码保护的文件，您需要一个 NSURLConnection，它所在的类需要实现`NSURLConnectionDelegate`协议以处理身份验证请求。[文档在这里](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)。

为了永久存储这些，您必须将它们保存到应用程序的 Documents 目录中。（请记住，默认情况下，此处的所有文件都备份到 iCloud，此处有大量 MP3 会使 iCloud 备份大小过大，Apple 可能会因此拒绝您的应用程序。解决此问题的简单方法是关闭 iCloud备份您下载/解压缩到文档目录的每个文件）。

接下来，如果你有合适的工具，解压缩是相当简单的，我使用[Objective-Zip 库](http://code.google.com/p/objective-zip/)实现了这个非常成功。Wiki 中的一些方便的代码示例说明了它的用法。

因此，在您的情况下，该过程将遵循以下原则：

1.  创建一个`NSURLConnection`到服务器，在使用身份验证质询委托方法提示时提供用户名和密码。
2.  使用类似于以下代码块的 NSURLConnection 下载委托。**如果您的 zip 文件太大而无法完全保存在内存中，您将经常遇到崩溃，将接收到的字节附加到磁盘上的文件（而不是继续将其附加到 NSMutableData 对象）是更安全的做法。**

    ```
    // Once we have the authenticated connection, handle the received file download:
    -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        NSFileManager *fileManager = [NSFileManager defaultManager];

        // Attempt to open the file and write the downloaded data to it
        if (![fileManager fileExistsAtPath:currentDownload]) {
            [fileManager createFileAtPath:currentDownload contents:nil attributes:nil];
        }
        // Append data to end of file
        NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:currentDownload];
        [fileHandle seekToEndOfFile];
        [fileHandle writeData:data];
        [fileHandle closeFile];
    } 
    ```

3.  现在你已经完全下载了 ZipFile，使用 Objective-Zip 解压它，应该看起来像这样（**同样，这个方法很棒，因为它可以缓冲文件，所以即使是大文件解压也不会导致内存问题！）**：

    ```
    -(void)connectionDidFinishLoading:(NSURLConnection *)connection {

        // I set buffer size to 2048 bytes, YMMV so feel free to adjust this
        #define BUFFER_SIZE 2048

        ZipFile *unzipFile = [[ZipFile alloc] initWithFileName:zipFilePath mode:ZipFileModeUnzip];
        NSMutableData *unzipBuffer = [NSMutableData dataWithLength:BUFFER_SIZE];
        NSArray *fileArray = [unzipFile listFileInZipInfos];
        NSFileHandle *fileHandle;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSString *targetFolder = folderToUnzipToGoesHere;
        [unzipFile goToFirstFileInZip];
        // For each file in the zipped file...
        for (NSString *file in fileArray) {
            // Get the file info/name, prepare the target name/path
            ZipReadStream *readStream = [unzipFile readCurrentFileInZip];
            FileInZipInfo *fileInfo = [unzipFile getCurrentFileInZipInfo];
            NSString *fileName = [fileInfo name];
            NSString *unzipFilePath = [targetFolder stringByAppendingPathComponent:fileName];

            // Create a file handle for writing the unzipped file contents
            if (![fileManager fileExistsAtPath:unzipFilePath]) {
                [fileManager createFileAtPath:unzipFilePath contents:nil attributes:nil];
            }
            fileHandle = [NSFileHandle fileHandleForWritingAtPath:unzipFilePath];
            // Read-then-write buffered loop to conserve memory
            do {
                // Reset buffer length
                [unzipBuffer setLength:BUFFER_SIZE];
                // Expand next chunk of bytes
                int bytesRead = [readStream readDataWithBuffer:unzipBuffer];
                if (bytesRead > 0) {
                    // Write what we have read
                    [unzipBuffer setLength:bytesRead];
                    [fileHandle writeData:unzipBuffer];
                } else
                   break;
            } while (YES);

            [readStream finishedReading];
            [fileHandle closeFile];
            // NOTE: Disable iCloud backup for unzipped file if applicable here!
            /*...*/

            [unzipFile goToNextFileInZip];
        }

        [unzipFile close]; // Be sure to also manage your memory manually if not using ARC!

        // Also delete the zip file here to conserve disk space if applicable!

    } 
    ```

4.  您现在应该已经将下载的 zip 文件解压缩到 Documents 目录的所需子文件夹中，并且可以使用这些文件了！

# syntax - 程序编写期间的语法/语法检查

> ID：11605553
> 
> 赞同：0
> 
> 时间：2012-07-23T01:52:49.250
> 
> 标签：syntax, grammar

> **可能重复：**
> [学习增量编译设计](https://stackoverflow.com/questions/5995264/learning-incremental-compilation-design)

作为一个本科项目，我们设计了一种简单的脚本语言，并使用 gcc 将脚本代码翻译成 c++ 以便在 MS os 上执行。我们想在用户编写脚本代码时实现*语法/语法检查*功能，但不知道该怎么做。检查功能是否依赖/独立于 IDE？是否存在开源实现以便我们可以从中学习？我们从[Writing a syntax highlighter](https://stackoverflow.com/questions/809423/writing-a-syntax-highlighter)中知道了语法高亮，和 check 函数有关系吗？

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:40:40.347

一篇题为“学习增量编译设计”的文章 (http://stackoverflow.com/questions/5995264/learning-incremental-compilation-design) 提供了如何实现此功能。它还为此主题提供了一份技术报告（PDF 格式）。

# java - 共享资源先到先得政策

> ID：11605555
> 
> 赞同：2
> 
> 时间：2012-07-23T01:52:54.177
> 
> 标签：java, multithreading, concurrency, scheduling

一道考试题：

> 一个资源在 N 个线程之间共享，因此访问是基于先到先得的原则。解释您将如何实施先到先得的政策。

我的回答是（注意：该课程是基于 Java 的）：

> 使用信号量（二进制）来控制对共享资源的访问。然后创建一个馈线类/线程来访问信号量。馈线线程使用先进先出队列来实现先到先得。当信号量空闲时，它允许队列头部的线程访问共享资源。

我刚刚在纸上记下了上述方法，它似乎有效。

这个问题在一个 20 分的问题中值 8 分，所以我怀疑使用`new ReentrantLock(true)`是否足以获得满分。

你们有什么感想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:49:16.630

您的回答确实没有解决问题。这不仅与锁定有关，而且还与等待资源的线程排队有关。

*   你如何排队等待资源的线程？
*   如果有线程在等待资源，你如何唤醒它们以便它们按顺序消耗资源。
*   如果有线程在等待资源，您如何确保它们按顺序运行并避免围绕新线程抢占它的竞争条件。

可能的解决方案类似于以下代码：

```
 lockResource(resource);
  try {
     ... consume the resource
  } finally {
     unlockResource(resource);
  } 
```

`lockResource`会做类似的事情：

1.  获取资源上的锁。
2.  `long accessNum`检索与包含 a和 a的资源关联的锁对象`long runningNum`。
3.  增加`accessNum`值并存储线程的结果。
4.  检查`long runningNum`值以查看是否 == 到 my `accessNum`.
5.  如果是 == 我的，解锁资源并继续运行。
6.  如果队列中的人数超过我，则`wait()`在资源上。

当`unlockResource(...)`被调用时，线程应该：

1.  锁定资源。
2.  放`running++`
3.  称呼`notifyAll()`
4.  解锁资源

如果线程正在等待并被唤醒：

1.  检查是否`accessNum == runningNum`.
2.  如果为真，则解锁资源并继续运行
3.  如果没有，则返回`wait()`

# html - 如何用 CSS 包装 div？

> ID：11605562
> 
> 赞同：0
> 
> 时间：2012-07-23T01:54:24.117
> 
> 标签：html, css, stack

尝试构建一个简单的登录屏幕，在桌面和手持设备上都“友好”。主登录部分应该只包含一个标签，右侧有一个文本框，`Continue`文本框下方有一个按钮。棘手的一点是，随着屏幕尺寸的减小，我希望看到每个换行。也就是说，如果它足够窄，每个控件都应该“堆叠”在另一个之上。

一个宽屏（抱歉图片粗糙）

输入登录：[ ]
                      |继续|

在窄屏幕上：

输入登录：
[ ]
 |继续|

我尝试了几种 div 组合，浮动到左侧，但我无法完全看清上面的内容。任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:20:13.197

人们讨厌桌子...但是尝试一下...

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <form action="index.html" method="get">
              First name: <input type="text" name="fname" /><br />
              Last name: <input type="text" name="lname" /><br />
              <input type="submit" value="Submit" />
            </form>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T20:17:10.880

您可以使用带有媒体查询的 CSS 网格来实现此目的。jsbin链接：[https ://jsbin.com/retavuy/edit?html,css,output](https://jsbin.com/retavuy/edit?html,css,output)

HTML：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
  <main class="loginp-page">
        <h1 class="login-title">Login</h1>
        <form action="#" class="login-form"> 
            <label for="login">Enter login</label>
            <input type="text" id="login">

            <button type="submit" class="button">Continue</button>
        </form>
    </main>
</body>
</html> 
```

CSS

```
main {
    padding-top: 1rem;
}

.login-title {
    text-align: center;
    font-size: 1.8rem;
    color: #ff5454;
}

.login-form {
    padding: 1rem;
    display: grid;
    grid-row-gap: 1rem;
    grid-auto-rows: 2rem;

}

.login-form label {
    font-weight: bold;
}

.login-form label,
.login-form input {
    display: block;
}

.login-form input:not([type="checkbox"]) {
    border: 1px solid #ccc;
    padding: 0.2rem 0.5rem;
    font: inherit;
}

.login-form input:focus,
.login-form select:focus {
    outline: none;
    background: #ece7e7;
    border-color: #2ddf5c;
}

.login-form button[type="submit"] {
    display: block;
}

@media (min-width: 40rem) {
    .login-form {
        margin: auto;
        width: 30rem;
        grid-template-columns: 10rem auto;        
    }

   .login-form button[type="submit"] {
       grid-column: 1 / 3;     
   }
} 
```

# regex - R regex gsub 分隔字母和数字

> ID：11605564
> 
> 赞同：8
> 
> 时间：2012-07-23T01:54:39.340
> 
> 标签：regex, r, gsub, stringr

我有一个混合字母和数字的字符串：

```
"The sample is 22mg" 
```

我想拆分字符串，其中一个数字后面紧跟这样的字母：

```
"The sample is 22 mg" 
```

我试过这个：

```
gsub('[0-9]+[[aA-zZ]]', '[0-9]+ [[aA-zZ]]', 'This is a test 22mg') 
```

但没有得到预期的结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T01:59:55.367

您需要在正则表达式中使用捕获括号并在替换中使用组引用。例如：

```
gsub('([0-9])([[:alpha:]])', '\\1 \\2', 'This is a test 22mg') 
```

这里没有特定于 R 的东西。R 帮助`regex`并且`gsub`应该有一些用处。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-23T01:59:00.763

您需要反向引用：

```
test <- "The sample is 22mg"
> gsub("([0-9])([a-zA-Z])","\\1 \\2",test)
[1] "The sample is 22 mg" 
```

括号中的任何内容都会被记住。然后它们由 \1（对于括号中的第一个实体）、\2 等进行访问。第一个反斜杠在 R 中转义了反斜杠的解释，以便将其传递给正则表达式解析器。

# zend-framework - Zend_Form_Element_File 不工作

> ID：11605565
> 
> 赞同：0
> 
> 时间：2012-07-23T01:54:40.077
> 
> 标签：zend-framework, zend-form, zend-form-element

以下 Zend Framework 表单无法正常工作：

```
<?php

class Application_Form_Auth extends Zend_Form
{

    public function init()
    {   
        $this->setAttrib('enctype', 'multipart/form-data');
        $this->setMethod('post');

        $username = $this->createElement('text','username');
        $username->setLabel('Username:')
                 ->setAttrib('size',10);

        $password = $this->createElement('password','password');
        $password->setLabel('Password')
                 ->setAttrib('size',10);

        $file = new Zend_Form_Element_File('file');
        $file->setLabel('File')
             ->setDestination('/data/uploads')
             ->setRequired(true);

        $reg = $this->createElement('submit','submit');
        $reg->setLabel('save');             

        $this->addElements(array(
            $username,
            $password,
            $file,
            $reg
        ));

        return $this;
    }
}
?> 
```

问题在于：

```
->setDestination('/data/uploads') 
```

当我从代码中删除这一行时，表单工作正常。我有上传文件夹，并为该目录`/data/uploads`设置了权限。`777`我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:57:38.450

您是否使用任何域（没有本地主机）。如果是，您应该使用数据/上传。数据目录应位于公共目录中。如果您有任何域，则应使用带有 baseUrl 的目标路径。

# html - 如您所见，打印网页的最佳方式是什么？

> ID：11605569
> 
> 赞同：3
> 
> 时间：2012-07-23T01:55:00.027
> 
> 标签：html, css, printing, fonts, cross-browser

我不确定这个问题是否如我所说的那样准确，但我想不出更好的方法，所以请耐心等待。

目标：`W x H`您要在`W x H`一张纸上打印浏览器窗口的某个区域。

假设：

1.  该页面是静态 HTML 和 CSS。它不会随着时间而改变，您无法与之交互，并且它在每个浏览器中都以完全相同的方式呈现。
2.  您使用`@media print`and`display: none`来确保 之外的所有类`W x H`都不会出现在打印中。

需要考虑的事项：

1.  `W x H`指定（可以说是 a ）的最佳跨平台方式是`div`什么？鉴于有关纸张尺寸、DPI、边距等的相同打印机驱动程序设置，有没有办法让它在打印时显示相同的尺寸？屏幕的PPI重要吗？

2.  字体。打印机可能没有所需的字体。*如果操作系统是网络字体，则操作系统*可能没有所需的字体。有没有一种“最好”的打印方式来解决这些问题？有没有一种特定的方式来使用允许这样做的网络字体？或者有没有办法以打印机的 DPI 光栅化页面并像图像一样打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:07:20.807

肮脏的做法是截图网页，然后用其他东西打印截图。这样你就可以确保它在你看到的时候出现。

例如[_](https://chrome.google.com/webstore/detail/ckibcdccnfeookdmbahgiakhnjcddpki)

不幸的是，每个浏览器打印机预览都会以不同的方式操作和理解 div，其中大多数只会自动包装内容。解决这个问题的唯一方法是为 div 指定固定宽度，例如 1000px，并使用 {overflow-x:auto; 设置样式。溢出-y：隐藏；}

使用字体，是的，有一种方法可以在用户的​​计算机上安装字体。另一个简单的解决方案就是让它们成为图片，即PNG。对于安装，请查看 Google Web Fonts（Google 搜索会为您提供类似的结果）。

# javascript - 如何在Javascript中移动元素的旋转点？

> ID：11605570
> 
> 赞同：0
> 
> 时间：2012-07-23T01:55:00.203
> 
> 标签：javascript, rotation, easeljs

如果我在 EaselJS 中旋转图像，它会围绕 0,0 点旋转我如何移动它？泰！拉斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:51:28.633

DisplayObject 的子类（Bitmap、Text、Shape 等）支持 regX 和 regY 属性，可让您更改对象的默认注册点：

*   [http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#property_scaleX](http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#property_scaleX)
*   [http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#property_scaleY](http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#property_scaleY)

我发现这不仅对旋转很有帮助，对其他效果也有帮助，例如在设置负 scaleX/Y 时控制位图的翻转方式。

最好的，克里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:59:56.423

您需要使用**translate(x,y)**，其中 x 和 y 是您想要的新旋转中心。

注意：如果您需要继续操作，请记住在完成旋转后取消翻译（再次使用相同但负值进行翻译），为此您需要考虑旋转了多少。

# c#-4.0 - 使用随机类显示文本

> ID：11605574
> 
> 赞同：0
> 
> 时间：2012-07-23T01:56:01.093
> 
> 标签：c#-4.0

我有一个程序应该根据文本框中已有的内容在富文本框中显示特定文本。应该显示富文本框的单词是错误的，但仅当文本框显示 d1 时。

```
 private void button5_Click(object sender, EventArgs e)
    {
       // richTextBox1.Text = "u1";
        int i = this.RandomNumber(0, 5);
        if (i > 2)
        {

            richTextBox1.Text = "u1";
        }

        else
        {
            richTextBox1.Text = "d1";
        }
        }

    private void button3_Click(object sender, EventArgs e)
    {
    // richTextBox1.Text = "Wrong";
    int i = this.RandomNumber(0, 5);  
        if (i<2)
        {

            richTextBox1.Text = "Right";
        }

            else

            {

                richTextBox1.Text = "Wrong";
   }

    } 
```

唯一的问题是计算机不使用相同的号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:13:48.990

您为每个按钮单击调用 RandomNumber，因此每次都会有所不同。看起来你想要类似的东西：

```
private void button5_Click(object sender, EventArgs e)
{
   // richTextBox1.Text = "u1";
    int i = this.RandomNumber(0, 5);
    if (i > 2)
    {

        richTextBox1.Text = "u1";
    }

    else
    {
        richTextBox1.Text = "d1";
    }
}

private void button3_Click(object sender, EventArgs e)
{
// richTextBox1.Text = "Wrong";
    if (richTextBox1.Text.Equals("u1"))
    {

        richTextBox1.Text = "Right";
    }
    else
    {

            richTextBox1.Text = "Wrong";
    }
} 
```

# loops - 批处理文件循环遍历文件夹中的每个文件

> ID：11605575
> 
> 赞同：0
> 
> 时间：2012-07-23T01:56:20.543
> 
> 标签：loops, batch-file

我创建了一个脚本，并希望它遍历目录中的所有文件..但我没有这样做..我创建了另一个脚本来应用脚本（change_content）..这里是代码，

```
cd \input

for %%f in (*.txt) do (

            echo "%%~nf"
            "D:\deployment code\change_content" .\"%%~nf".txt
    ) 
```

change_content.bat

```
call :yesterday today -1
for /f "delims=" %%a in (%1) do (
set "val=%%a"
if "!val:~12,10!"=="0001-01-01" (
>> D:\temp\%1_changed.txt echo !val:~0,12!%day%!val:~22!
) else (
>> D:\temp\%1_changed.txtecho %%a     
)
) 
```

**我的问题是如果我把它作为变量，我不能让脚本读取输入文件。我只能放置对自动化过程没有帮助的实际文件？** 这只是我指向输入和输出方向的代码的一部分..只是想知道我应该在 for /f 地方做什么..

如果有人能对此提供帮助将不胜感激..谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:12:09.753

我将您的问题理解为您在上面以粗体字列出的问题。以下应该可以工作，从记忆中开始，但我现在无法测试它，因为我现在没有 Windows 计算机（很高兴我不必随身携带一台）。

如果您对主程序循环部分感兴趣，请尝试以下操作：

```
setlocal eneabledelayedexpansion

REM:: take \input as param from command line
set top_folder=%~1
set change_content="D:\deployment code\change_content.bat"

for /f "eol=; tokens=1 delims=" %%t in ( 'dir /b !top_folder!\*.txt' ) do (
  REM:: the /b may or may not give yo the full path you need
  REM:: google this if I am wrong

  set file_name=%%~nt
  !change_content! !file_name!

) 
```

如果您对 change_content 部分感兴趣，请尝试以下操作：

```
setlocal enabledelayedexpansion

REM:: change_content looping over file_name variable.
set file_name=%~1
for /f "eol=; tokens=1 delims=" %%f in ( 'type "!file_name!"' ) do (
  set line=%%f
  REM::  Do your thang in here with !line!.
) 
```

# android - 在 android 中通过 Mail 分享图像

> ID：11605576
> 
> 赞同：2
> 
> 时间：2012-07-23T01:56:42.900
> 
> 标签：android

在我的 android 应用程序中，我通过蓝牙共享图像正在工作。同时我尝试通过邮件分享。但是该邮件没有附加图像。只能用正文发送。任何解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:40:02.100

要通过电子邮件将图像作为附件发送，您首先需要将其作为文件保存在 SD 卡上。如果您的图像是a，`Bitmap`那么您可以将其写入如下文件

```
OutputStream fOut = null;
String fileName = Environment.getExternalStorageDirectory()+"/myImage.png";
File file = new File(fileName);
fOut = new FileOutputStream(file);
bitmap.compress(Bitmap.CompressFormat.PNG, 85, fOut);
fOut.flush();
fOut.close(); 
```

然后使用`Intent`, 启动电子邮件客户端应用程序，并将图像文件作为附件

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
emailIntent.setType("image/jpeg");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] {""}); 
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, EMAIL_SUBJECT); 
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, EMAIL_BODY);
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+fileName));
startActivity(Intent.createChooser(emailIntent, "Sharing Options")); 
```

# node.js - Node.js 并发 https.requests ECONNREFUSED

> ID：11605577
> 
> 赞同：1
> 
> 时间：2012-07-23T01:56:45.863
> 
> 标签：node.js, http-request

我正在尝试循环访问用户并在远程服务器上为每个用户执行请求。许多请求因`ECONNREFUSED`错误而失败。我已经尝试设置`globalAgent.maxSockets`和交错请求，但问题仍然存在。这是来自远程服务器的响应还是我的节点应用程序中的错误？我该如何解决这个问题？

资源：

```
var https = require("https");       
https.globalAgent.maxSockets = 1024;

var get = function(username, password, cb, failed) {
    var post_data = 'username='+user+'&password='+password;

    var post_req = https.request({
        host:__HOST__, 
        port:443, 
        path:'/Controls/CredentialsUI.ashx', 
        method: "POST",
        agent:false,
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': post_data.length
        }
    }), function(r) {
        // get cookie if received 
        if( r.headers["set-cookie"] ) 
            cb(r.headers["set-cookie"][0].split(";")[0].split("=")[1])
        else failed();
    });

    post_req.on('error', function(error) {
        // Error handling here
        console.log(error, "for "+username);
        });

    post_req.write(post_data);
    post_req.end();
};

var success = function(){ /*...*/ };
var failure = function(){ /*...*/ };

var users = [/* array about 300 in size */];
users.map(function(user) {
    get(user.name, user.password, success, failure);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:06:19.523

如果您连接到同一台服务器，实际上最好降低套接字池（globalAgent.maxSockets），默认值 5 应该足够了，但这取决于您的负载，当然还有远程服务器的响应时间。因此，您的 node.js 客户端将重新使用 keep-alive 连接，而不是创建新连接。这也可以解决远程服务器拒绝接受更多连接的问题。

# textmate - Textmate2保存失去焦点

> ID：11605580
> 
> 赞同：9
> 
> 时间：2012-07-23T01:57:04.100
> 
> 标签：textmate, textmate2

在 TextMate v1 中，有一个选项可以保存失去焦点。也就是说，当您切换到另一个应用程序时，您的 TextMate 文档会保存。如何在 TextMate 2 中重新创建此行为？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-05T22:31:13.220

从 alpha.9495 开始，执行此操作的方法已更改。来自[Save-On-Focus-Lost](http://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle)存储库的自述文件：

> 您现在可以在 .tm_properties 中设置 saveOnBlur 以在失去焦点时使 TextMate 保存文件。
> ...
> 
> 使用 .tm_properties 还可以轻松定位特定文件类型，例如可以使用：
> 
> ```
> [ ui/**.php ]
> saveOnBlur = true 
> ```
> 
> 当焦点丢失时，这将只有 .php 文件在 ui 文件夹中自动保存。

这也非常好，因为它可以将其设置为特定于项目的设置。

但是，如果您想将其设置为全局设置，请编辑文件`~/Library/Application Support/TextMate/Global.tmProperties`并将该行添加`saveOnBlur = True`到开头附近，在任何具有文件类型特定设置的行之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-30T01:02:53.020

编辑文件：~/Library/Application Support/TextMate/Global.tmProperties

并添加以下行：

saveOnBlur = true

Global.tmProperties 文件仅在启动时加载，因此您需要保存所有更改，退出并重新运行 TextMate 以使其生效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T08:11:56.297

TextMate 2 有一个插件可以让您保存焦点丢失：[Save-On-Focus-Lost](https://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle)，只需安装该插件，即使在 TexMate 2 中您也将恢复该功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T10:10:59.910

该插件：[https](https://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle) ://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle在小牛队中为我工作，但捆绑包的路径与 github 上的说明中概述的路径不同。

我认为捆绑安装在：TextMate2 中的 /Library/Application Support/Avian/Bundles

在那里克隆捆绑包（git clone [https://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle.git](https://github.com/bomberstudios/Save-On-Focus-Lost.tmbundle.git)）工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T02:39:32.550

saveOnBlur 设置仅适用于至少保存过一次的文件。即，存在于磁盘上的文件。如果你通过打开一个新的临时文件来测试它，输入一些东西然后切换回来，文件将不会被保存，因为磁盘上没有文件。保存临时文件然后测试。它应该工作。

# java - Mongo Java：如何将 DBObject 序列化为文件中的 JSON？

> ID：11605582
> 
> 赞同：4
> 
> 时间：2012-07-23T01:57:05.397
> 
> 标签：java, json, mongodb, mongo-java

我有一个`MongoDB`文件

```
name: name
date_created: date
p_vars: {
   01: {
      a: a,
      b: b,
   }
   02: {
      a: a,
      b: b,
   }
   ....
} 
```

表示为`DBObject`

*   所有`key`,`value`对都是类型`String`
*   我想用Java序列化这个文档，查看[api](http://api.mongodb.org/java/2.8.0/)，我没有找到任何东西，我怎样才能序列化一个`DBObject`文件`JSON`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T08:15:07.820

似乎[BasicDBObject 的 toString()](http://api.mongodb.org/java/2.6/com/mongodb/BasicDBObject.html#toString%28%29)方法返回了对象的 JSON 序列化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T02:09:16.820

看起来[JSON](http://api.mongodb.org/java/2.6/com/mongodb/util/JSON.html#serialize%28java.lang.Object%29)类具有将对象序列化为 JSON 的方法（以及以[另一种方式](http://www.mkyong.com/mongodb/java-mongodb-convert-json-data-to-dbobject/)解析 JSON 以检索 DBObject）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T13:26:16.957

我使用了 BasicDBObject 的 toString() 和 GSON 库的组合来获得**打印**精美的JSON：

```
 com.mongodb.DBObject obj = new com.mongodb.BasicDBObject();
    obj.put("_id", ObjectId.get());
    obj.put("name", "name");
    obj.put("code", "code");
    obj.put("createdAt", new Date());

    com.google.gson.Gson gson = new com.google.gson.GsonBuilder().setPrettyPrinting().create();

    System.out.println(gson.toJson(gson.fromJson(obj.toString(), Map.class))); 
```

# applescript - 苹果脚本文件名错误

> ID：11605586
> 
> 赞同：0
> 
> 时间：2012-07-23T01:57:39.560
> 
> 标签：applescript, filenames

我有一个我们办公室用来安排日程的电子表格。每个选项卡代表一个月。我可以将每个选项卡导出到名为month1.csv、month2.csv...等的文件中。我有以下代码可以打开每个月的文件并循环遍历它：

```
 repeat with b from 1 to 12
            tell application "Finder"
            set curFileName to (sourceFolder & "month" & b & ".csv") as string
            --display dialog curFileName
            set workingFile to read file (curFileName)
            --display dialog "File has been read"
            set AppleScript's text item delimiters to {ASCII character 13}
            set theContents to text items of workingFile as list
        end tell

do stuff with the csv...

end repeat 
```

该脚本遍历第一个月，然后当 b = 2 时出现此错误：

```
Finder got an error: File file Macintosh HD:Users:lorenjz:Documents:Manpower:,month,2,.csv wasn’t found. 
```

我需要做什么来消除这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:46:09.657

Use the following line instead of yours. Basically you are trying to add text together to create a file path. However sourceFolder is not text so you must first make that into text before you can add more text to it. "b" is also not text so that has to be coerced to text too.

In general applescript is good about coercing things for you. It basically tries to coerce everything into the class of the first object in the line. So if you make sourceFolder into text (it's a file specifier unless you coerce it) then applescript will try to coerce everything after that to text... meaning that you really wouldn't have to coerce "b" to text because applescript will do that for you... as long as souceFolder is text of course. I generally do the coercing myself though to make sure it is correct so I would generally also coerce "b" myself.

The point is that when you add text together everything must be text. You can't just put "as text" at the end of the line, you must coerce every individual item to text. Good luck.

```
set curFileName to (sourceFolder as text) & "month" & (b as text) & ".csv" 
```

# c++ - 如何在组件之间共享通用类和非通用功能？

> ID：11605588
> 
> 赞同：0
> 
> 时间：2012-07-23T01:58:12.197
> 
> 标签：c++, design-patterns

在我的场景中，我有组件 A 和组件 B，它们通过 Message 类进行通信。

我的消息类看起来像这样

```
class Message {
    virtual void prepare();
    virtual void parse();
    virtual void handle();
}; 
```

任何消息都是 Message 类的子类，例如：

```
class MessageA: public Message {
    void prepare() {
    ...
    }
    void parse() {
    ...
    }
    void handle() {
    componentA->executeFunctionABC(); // componentA is a global pointer
    }
}; 
```

组件 A 使用 MessageA 编译

组件 B 使用 MessageA 编译

所以说，当组件 A 想要向组件 B 发送消息时，它会实例化一个 MessageA 对象，prepare() 并将其发送出去。当组件 B 通过套接字接收到消息时，它会解析（）它并处理（）它。

我现在的问题在于 handle() 函数。只有消息的接收者会调用 handle() 函数。handle() 函数的实现需要执行某些例程，这些例程涉及接收组件中的函数。

我现在可以像这样使用 PREPROCESSOR 来解决这个问题：

```
void handle() {
#ifdef COMPILE_FOR_COMPONENT_A
componentA->executeFunctionABC();
#endif
} 
```

但它看起来很丑。我想知道是否有任何设计模式可以正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:44:51.167

如果你的组件实现了一个通用接口，你可以将组件传递给`handle`方法：

```
class Component {
  virtual void executeFunctionABC() = 0;
  virtual void executeFunctionDEF() = 0;
}

class MessageA : public Message {
  void handle(Component *c) {
    c->executeFunctionABC();
  }
} 
```

当组件收到消息时，它会调用：

```
message->handle(this); 
```

另外，根据您的描述，`prepare`似乎`parse`主要用于创建/恢复消息，所以我会让它们成为工厂方法（在类中的静态方法`Message`或单独的`MessageFactory`类）而不是类上的虚拟方法`Message`。

* * *

**编辑：**或者，您可以通过为每个组件设置单独的方法来使用[访问者模式：](http://en.wikipedia.org/wiki/Visitor_pattern)`handle`

```
class MessageA : public Message {
  void handle(ComponentA *c) {
    c->executeFunctionABC();
  }

  void handle(ComponentB *c) {
    ...
  }
} 
```

如果您有一些功能非常不同的组件，这很有效。如果您有具有类似功能的组件，则接口方法会很好地工作。

* * *

**编辑 2：**要完全解耦组件，您可以使用前两种解决方案的混合：

```
class MessageHandler {
  virtual void handle(MessageA *msg) = 0;
  virtual void handle(MessageB *msg) = 0;
}

class MessageA : public Message {
  void handle(MessageHandler *handler) {
    handler->handle(this);
  }
}

class ComponentA : public MessageHandler {
  void handle(MessageA *msg) {
    executeFunctionABC();
  }
} 
```

您仍然会得到组件的接口，但您只有与消息一样多的方法。这实际上是您的预处理器指令所实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:10:52.250

您能否将 Message 本身与诸如处理、解析和准备等消息操作分开？

尝试从 MessageHandler、MessageParser 和 MessagePreparer 的角度思考。他们可以使用通用消息接口的哪些部分来访问消息的数据？会有什么不同？

如果成功，组件 A 将需要 MessageA_Preparer 和 MessageB_Handler 和 _Parser。组件 B 将需要 MessageB_Preparer 和 MessageB_Handler 和 _Parser。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:18:30.360

这不是对您处理 handle() 函数的现有问题的答案，而只是想问您（因为我也对这种机制感兴趣）为什么让消息执行 prepare()、parse() 和 handle( )? 我觉得应该有一个应该处理prepare（）的发送者类和一个应该处理parse（）的接收者类，并且取决于你实现handle（）的方式，也许也是如此。

如果 Message 类只包含消息，而发送者和接收者类处理其他功能不是更好吗？

# class - 无法让 .not() 类选择器对此进行处理

> ID：11605593
> 
> 赞同：0
> 
> 时间：2012-07-23T01:59:27.770
> 
> 标签：class, jquery-selectors

如您所见，我是 jquery 的新手，我正在尝试做一个简单的效果，您可以在其中过滤带有菜单链接的画廊，我希望在悬停时更改不透明度，在单击时我需要悬停以停止工作。我尝试的是在单击时添加一个“.disabled”类，它确实添加到我的菜单链接中，并将悬停功能设置为 a`.not(."disabled")`但显然在 dom 准备好后悬停不检查类，我该如何解决这个问题？有关如何优化此功能的任何其他指针都会有所帮助。提前致谢。克拉齐德

这是我的代码：

```
$('#menu-item-43 a ,#menu-item-44 a, #menu-item-42 a, #menu-item-64 a').click(function() {
                $('#menu-item-43 a ,#menu-item-44 a, #menu-item-42 a, #menu-item-64 a').addClass('disabled');
            });

            $('#menu-item-42 a').click(function() {
                $('.exhibition, .prototyping').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-42 a').click(function() {
                $('.design').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-43 a').click(function() {
                $('.design, .prototyping').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-43 a').click(function() {
                $('.exhibition').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-44 a').click(function() {
                $('.design, .exhibition').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-44 a').click(function() {
                $('.prototyping').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-64 a').click(function() {
                $('.design, .exhibition, .prototyping').stop().animate({ opacity: 1.0 }, 500);
            });  

            $('#menu-item-42 a').not('.disabled').hover(function() {
                $('.exhibition, .prototyping').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-42 a').not('.disabled').hover(function() {
                $('.design').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-43 a').not('.disabled').hover(function() {
                $('.design, .prototyping').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-43 a').not('.disabled').hover(function() {
                $('.exhibition').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-44 a').not('.disabled').hover(function() {
                $('.design, .exhibition').stop().animate({ opacity: 0.0 }, 500);
            });
            $('#menu-item-44 a').not('.disabled').hover(function() {
                $('.prototyping').stop().animate({ opacity: 1.0 }, 500);
            });

            $('#menu-item-64 a').not('.disabled').hover(function() {
                $('.design, .exhibition, .prototyping').stop().animate({ opacity: 1.0 }, 500);
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:03:36.547

我认为你应该这样做

```
$('#menu-item-43 a').hover(function() {
   if (!$(this).hasClass('disabled'))
      $('.exhibition').stop().animate({ opacity: 1.0 }, 500);
}); 
```

# kinect - 使用点云库存储来自 Kinect 的点云

> ID：11605594
> 
> 赞同：2
> 
> 时间：2012-07-23T01:59:31.603
> 
> 标签：kinect, openni, point-clouds, point-cloud-library

在 Ubuntu 上使用点云库，我试图从 Kinect 中获取多个点云并将它们存储在内存中以供以后在程序中使用。我在这篇文章底部显示的代码旨在存储来自 Kinect 的第一个点云并输出其宽度和高度。该程序给了我一个运行时错误：

```
/usr/include/boost/smart_ptr/shared_ptr.hpp:418: T* boost::shared_ptr<T>::operator->() const [with T = pcl::PointCloud<pcl::PointXYZ>]: Assertion `px != 0' failed. 
```

**非常感谢所有帮助，我总是接受答案！**

编码：

```
 #include <pcl/io/openni_grabber.h>
  #include <pcl/visualization/cloud_viewer.h>

 class SimpleOpenNIViewer
 {
  public:
  SimpleOpenNIViewer () : viewer ("PCL OpenNI Viewer") {}

 pcl::PointCloud<pcl::PointXYZ>::Ptr prevCloud;

  void cloud_cb_ (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr &cloud)
  {

if (!viewer.wasStopped())
   viewer.showCloud (cloud);

//ICP start
if(!prevCloud) {
    pcl::PointCloud<pcl::PointXYZ>::Ptr prevCloud( new pcl::PointCloud<pcl::PointXYZ>());

    pcl::copyPointCloud<pcl::PointXYZ, pcl::PointXYZ>(*cloud, *prevCloud);
}

cout << prevCloud->width << " by " << prevCloud->height << endl; 

  }

  void run ()
  {
    pcl::Grabber* interface = new pcl::OpenNIGrabber();

    boost::function<void (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr&)> f =
      boost::bind (&SimpleOpenNIViewer::cloud_cb_, this, _1);

    interface->registerCallback (f);

    interface->start ();

    while (!viewer.wasStopped())
    {
      boost::this_thread::sleep (boost::posix_time::seconds (1));
    }

    interface->stop ();
  }

  pcl::visualization::CloudViewer viewer;
 };

  int main ()
{
 SimpleOpenNIViewer v;
 v.run ();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:07:25.963

试试这个，我没有安装 Kinect 驱动程序，所以我无法测试。基本上在我的版本中，prevCloud 在构造函数中被实例化，所以`(!prevCloud)`总是等于'false'。也就是说`prevCloud.get() != NULL`。

```
#include <pcl/io/openni_grabber.h>
#include <pcl/visualization/cloud_viewer.h>

class SimpleOpenNIViewer
{
typedef pcl::PointXYZ                           Point;
typedef pcl::PointCloud<Point>                  PointCloud;
public:
SimpleOpenNIViewer () : viewer ("PCL OpenNI Viewer") {
        prevCloud = PointCloud::Ptr(NULL);
    }

void cloud_cb_ (const PointCloud::ConstPtr &cloud)
{
    if (!viewer.wasStopped())
        viewer.showCloud (cloud);
            if (!prevCloud) // init previous cloud if first frame
                    prevCloud = PointCloud::Ptr(new PointCloud);
            else.   // else RunICP between cloud and prevCloud
                    //RunICP(cloud,prevCloud);

            //Copy new frame in to prevCloud
    pcl::copyPointCloud<Point, Point>(*cloud, *prevCloud);
    cout << prevCloud->width << " by " << prevCloud->height << endl; 
}

void run ()
{
    pcl::Grabber* interface = new pcl::OpenNIGrabber();

    boost::function<void (const PointCloud::ConstPtr&)> f =
    boost::bind (&SimpleOpenNIViewer::cloud_cb_, this, _1);

    interface->registerCallback (f);
    interface->start ();

    while (!viewer.wasStopped())
    {
        boost::this_thread::sleep (boost::posix_time::seconds (1));
    }

    interface->stop ();
}

PointCloud::Ptr prevCloud;
pcl::visualization::CloudViewer viewer;
};

int main ()
{
SimpleOpenNIViewer v;
v.run ();
return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:11:25.807

您正在创建一个新的局部变量`prevCloud`并将其复制`cloud`到其中，而不是复制到该`prevCloud`字段中。因此，如果该字段的值在 之前为 null `if {}`，则在之后它仍然为 null `if {}`，因此当您尝试取消引用它时会引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:49:40.497

可能这段代码对你有帮助，云端保存在一个“pcd”文件中，看看[这里](https://github.com/jvcleave/PCL_1-3-0_Libraries_for_OF/blob/master/openni_grab_frame.cpp)

其他选项是使用 PCL 的“Kinfu”项目

# javascript - 仅允许输入字段中的单个点

> ID：11605595
> 
> 赞同：1
> 
> 时间：2012-07-23T01:59:48.520
> 
> 标签：javascript, jquery, validation

我有一个输入字段，其中包含：

```
$(".double").alphanumeric({allow:" ",ichars:"`~!@#$%^&*=_+[]\\{}|;\":,/<>?'-()\/abcdefghijklmnopqrstuvwxyzABCDFEGHIJKLMNOPQRSTUVWXYZ"}); 
```

验证应用于它。

我需要进一步限制输入，以便只能添加一个小数位，例如 100.00 或 255.95

输入用于货币，所以我只需要允许 1 个小数点。目前它允许 100.00.00 搞砸系统！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:05:56.180

这是一个只允许正/负十进制数的正则表达式

```
^[-]?((\d+)|(\d+\.\d+)|(\.\d+))$ 
```

使用 jquery，您可以测试该值

```
if (/^[-]?((\d+)|(\d+\.\d+)|(\.\d+))$/.test($(".double").val())) { .... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:06:36.527

一个允许可选前导 + 或 - 并且仅具有可选小数位的数字的简单函数是：

```
function validate(value) {
  var re = /^[-+]?\d+(\.\d+)?$/;
  return re.test(value);
} 
```

但是，既然你想要钱，你可能想要：

```
 var re = /^[-+]?\d+(\.\d\d)?$/; 
```

如果有的话，这将需要小数点后两位数。

# ruby-on-rails-3 - Rails 路线，一种同义词路线

> ID：11605600
> 
> 赞同：1
> 
> 时间：2012-07-23T02:00:03.303
> 
> 标签：ruby-on-rails-3, rest, routes

**陈述**

想象一下，我们有一个库存应用程序，它有一个`Movement`模型，它代表任何动作，如产品购买或产品销售。所以我们有默认的 REST 路由。

```
 movements GET    /movements(.:format)          {:action=>"index", :controller=>"movements"}
              POST   /movements(.:format)          {:action=>"create", :controller=>"movements"}
 new_movement GET    /movements/new(.:format)      {:action=>"new", :controller=>"movements"}
edit_movement GET    /movements/:id/edit(.:format) {:action=>"edit", :controller=>"movements"}
     movement GET    /movements/:id(.:format)      {:action=>"show", :controller=>"movements"}
              PUT    /movements/:id(.:format)      {:action=>"update", :controller=>"movements"}
              DELETE /movements/:id(.:format)      {:action=>"destroy", :controller=>"movements"} 
```

对于**助记词建议**，我们希望有一些描述性的路线，例如：

```
 new_purchase        /purchase/new(.:format)       {:controller=>"movements", :action=>"new_purchase"}
edit_purchase        /purchase/:id/edit(.:format)  {:controller=>"movements", :action=>"edit_purchase"} 
```

如果你可以看到`purchase`'s 和 's 是同一个型号`movement`，实际上是由 处理的`MovementsController`，但是有不同的流程和处理，这个由`create_purchase`而不是指定`create`。

**问题**

1.  `purchase`我应该如何为's添加宁静的路线？照顾指定的 HTTP 方法，如`GET`, `POST`, `PUT`,`DELETE`等。

2.  我应该如何写`form_for`标签？使用`movement`模型我们可以写：`<%= form_for(@movement) do |f| %>`但是如何为或方法调用`purchase`路径？`create``update`

3.  `purchase`我应该如何为's指定验证规则？我已经在模型上指定了一些规则，但是在提交表单时`Movement`它们不适用。`purchase`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:08:25.913

你可以在你的路由文件中使用这样的东西

```
 match '/purchase/new(.:format)' => 'movements#new_purchase'     :via => :get
 match '/purchase/:id/edit(.:format)' => 'movements#edit_purchase' :via => :post 
```

您可以提及其他人，例如删除，输入：via

有关更多信息，请查看此[链接](http://guides.rubyonrails.org/routing.html) 如果您想将 create 更改为 create_purchases，请转到移动控制器并更改定义名称。

对于第二个问题，你可以做这样的事情

```
form_tag(:controller => "controller_name", :action => "action_name", :method => "get") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:21:22.217

我认为您不应该寻找一种方法来为以两种不同方式处理对象的模型以 RESTful 方式构建路由。这听起来像你真的在寻找两个对象。您可以创建`Purchase`从父模型继承其属性的`Movement`模型。

或者，您可以假设它们是同一个对象，并使用有意义的语义路径以相同的方式处理它们。也就是说，您正在寻找的可能是`Movement`控制器操作的默认 RESTful 路由的路径更改。此外，典型的 rails 约定是使用多个路径路由，这对于索引页面和识别作为数据库中对象表子集的对象具有语义意义，因此我使用`purchases`而不是`purchase`.

```
resources :movements, :path => "/purchases" 
```

会产生

```
 movements GET    /purchases(.:format)          {:action=>"index", :controller=>"movements"}
              POST   /purchases(.:format)          {:action=>"create", :controller=>"movements"}
 new_movement GET    /purchases/new(.:format)      {:action=>"new", :controller=>"movements"}
edit_movement GET    /purchases/:id/edit(.:format) {:action=>"edit", :controller=>"movements"}
     movement GET    /purchases/:id(.:format)      {:action=>"show", :controller=>"movements"}
              PUT    /purchases/:id(.:format)      {:action=>"update", :controller=>"movements"}
              DELETE /purchases/:id(.:format)      {:action=>"destroy", :controller=>"movements"} 
```

使用这个模型，`form_for`helper 方法仍然可以像往常一样使用。假设`@movement`被正确定义，带有`purchases`根的路径将被正确调用。

# perl - 在 Perl 中读取变量

> ID：11605605
> 
> 赞同：7
> 
> 时间：2012-07-23T02:01:03.513
> 
> 标签：perl, variables, input

我有很多行存储在 Perl 的单个变量中。

我想知道是否可以使用 <> 运算符读取这些行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T02:11:32.310

如果你真的必须，你可以打开它的文件句柄。

```
use strict;
use warnings;

my $lines = "one\ntwo\nthree";
open my $fh, "<", \$lines;

while( <$fh> ) { 
    print "line $.: $_";
} 
```

或者，如果您已经将这些东西放在内存中，则可以将其拆分为一个数组：

```
my @lines = split /\n/, $lines;   # or whatever
foreach my $line( @lines ) { 
    # do stuff
} 
```

这可能更容易阅读和维护。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T02:10:01.750

是的。如 中[`perldoc -f open`](http://perldoc.perl.org/functions/open.html)所述，您可以打开标量变量的文件句柄。

```
my $data = <<'';
line1
line2
line3

open my $fh, '<', \$data;
while (<$fh>) {
    chomp;
    print "[[ $_ ]]\n";
}

# prints
# [[ line1 ]]
# [[ line2 ]]
# [[ line3 ]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:50:26.323

我找到了一个有用的替代方案，
它不使用 <> 但就像它一样工作

```
for (split /^/, $lines) {
   ...
} 
```

[http://www.perlmonks.org/?node_id=745018](http://www.perlmonks.org/?node_id=745018)

# css - 线路上不存在的 Flash 错误 1071？

> ID：11605609
> 
> 赞同：0
> 
> 时间：2012-07-23T02:02:21.233
> 
> 标签：css, flash, apache-flex, compilation, namespaces

我的 Flex 4 CSS 文件中出现了一个非常奇怪的错误。Flex 中的问题面板说错误存在于`8`只有行的文件的行上`6`。这是错误：

```
1071: Syntax error: expected a definition keyword (such as function) after attribute namespace, not s. 
```

这是其中的 CSS 文件`<project root>/src/assets/styles/pages/ReviewsStyles.css`（只有 6 行）：

```
@namespace s "library://ns.adobe.com/flex/spark";
@namespace mx "library://ns.adobe.com/flex/mx";

.reviewer {

} 
```

这就是该文件所包含的全部内容。项目中的任何地方都没有与此样式表具有相同类名的任何其他文件。奇怪的是，无论我给样式表起什么名字，都会出现这个问题，即使旧的被删除并重新创建。关闭 Flash Builder 并不能解决该错误，并且编译的 SWF 会引发运行时错误。

关于这个有什么想法吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:14:49.750

Grr ...（请原谅释放蒸汽：D）

我发现了原因。我在我的应用程序中包含了样式表，如下所示：

```
<fx:Script source="../assets/styles/pages/ReviewStyles.css"/> 
```

但它不是`<fx:Script>`，它是`<fx:Style>`，因此我收到了奇怪的错误。

希望对某人有所帮助。

# vba - XMLHTTP 和 ServerXMLHTTP 之间的区别

> ID：11605613
> 
> 赞同：16
> 
> 时间：2012-07-23T02:02:44.663
> 
> 标签：vba, excel, xmlhttprequest

我正在尝试编写一个 Excel 加载项，该加载项可以将数据从 Web 服务获取到 Excel 中。

要使用它，用户只需键入插件提供的函数名称。我发现了两篇在 VBA 中实现 HTTP 请求的文章：[XMLHTTP](http://msdn.microsoft.com/en-us/library/ms759148%28v=vs.85%29)和[ServerXMLHTTP](http://msdn.microsoft.com/en-us/library/ms762278%28v=vs.85%29)。

我很难使用它们。我不知道该用哪一个。XMLHTTP 和 ServerXMLHTTP 有什么区别？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T17:33:32.240

达武兹，

Tim 和 Jay 都提供了出色的背景和简洁的评论。我将简单地添加一点并尝试提供一些上下文。

本质上，XMLHTTP 对象用于创建一个 XMLHttpRequest，用于从网站/网络服务器/网络服务中请求数据。有关详细信息，请参阅维基百科链接：[http ://en.wikipedia.org/wiki/XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)

通常，XMLHTTP 通常用于作为客户端与服务器进行通信时 - 例如，当您使用应用程序向 Web 服务发出请求时。XMLHTTP 对象还用于各种以客户端为中心的传输方法，例如文件传输协议 (FTP)、url 缓存和其他有用的工具。简而言之，XMLHTTP 对象用于向某种服务器发出请求并请求客户端感兴趣的东西，无论是通过 FTP 连接访问服务器、来自存储库的一系列文件还是 Web 服务用于处理来自客户端的数据。

相比之下，ServerXMLHTTP 旨在用于服务器之间的通信、与应用程序（客户端）的通信以及处理来自客户端的请求。虽然 ServerXMLHTTP 对象保持状态处于活动状态——这意味着发送/接收到/从目的地的信息被保留用于当前连接中的未来数据事务——它也不主动支持某些 XMLHTTP 功能，例如“URL 缓存、自动代理服务器的发现、HTTP/1.1 分块、离线支持以及对 Gopher 和 FTP 协议的支持”，用于 ServerXMLHTTP 对象使用的 http 客户端堆栈。

从技术角度来看，XMLHTTP 对象使用 WinInet (Windows Internet Explorer) 来实现其功能，而 ServerXMLHTTP 对象使用客户端堆栈。WinInet dll 是 Windows 互联网协议管理的支柱，该 dll 用于处理 HTTP、HTTPS、FTP 和类似请求。

相比之下，当 ServerXMLHTTP 对象创建一个新的客户端 http 堆栈时 - 这本质上是一个 HTTP 客户端的单独“会话”。使用单独的会话意味着 ServerXMLHTTP 对象的多个实例可能在任何给定时间处于活动状态 - 取决于内存和套接字连接的可用性。

因此，简而言之——除了上面评论中的信息之外，XMLHTTP 对象通常用于请求信息并以某种方式使用它，通常作为客户端。同样有用但经常不同的使用，ServerXMLHTTP 对象可用于以相对有效的方式请求数据、发送数据或什至将接收到的数据传递给另一个应用程序到另一个应用程序。这通常用于需要实时响应的业务应用程序，或者用于在给定一系列请求的情况下向客户提供数据，这些请求可能包含内置条件 - 等等。

希望这能阐明两者之间的差异。在阅读有关使用特定 XMLHTTP 类型请求的 SO 问题/答案，以及对 MSDN 和其他提供有关 Internet/XMLHTTPRequest VB、VBA 和 Microsoft Office 特定材料的文档的站点进行更深入的研究时，还有更多内容可以找到。

让我知道这是否有帮助或者您有其他问题/想法，

~乔尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T15:43:01.603

我刚刚遇到了一个不同之处：当 Web 服务器 (IIS) 配置为仅允许 Windows 身份验证而不是匿名访问时，ServerXMLHTTP 调用会失败并出现身份验证错误，而 XMLHTTP 调用则不会。似乎 XMLHTTP 对象会在需要时自动处理发送 Windows 身份验证凭据。我怀疑将 NetworkCredentials 添加到 ServerXMLHTTP 对象应该是最好的解决方案，但我只能找到显式传递纯文本 uid/pwd 的基本身份验证（显然不可接受）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-08T09:41:00.987

ServerXMLHTTP 对象使用 winhttp，而 XMLHTTP 使用 wininet。

由于 wininet 解析身份验证和代理配置等问题，因此不会像使用 ServerXMLHTTP 时那样出现此类问题。然而，XMLHTTP 中有限的灵活性可能会迫使您承担使用 ServerXMLHTTP 的额外责任，因为必须协商服务器和目标端点身份验证机制，尽管 winhttp 中有一些方法可以帮助完成此任务。

当将更多基于客户端的 XMLHTTP 移植到更可配置的健壮的 ServerXMLHTTP 对象和类时，您可能想知道为什么这么久之前没有这样做。

甚至不要让我开始使用命运多舛且现已失效的 WPAD 支持。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-24T09:27:03.993

真正帮助我的是那个。

定义对象后：

```
Dim objHTTP As Object

Set objHTTP = createObject("MSXML2.ServerXMLHTTP")
... 
```

然后包括这两行：

```
' --- Disregard any Proxy Settings and go straight to the IP address

    objHTTP.SetProxy 1 
```

# python - Python Web Scraping - urlopen 错误 [Errno -2] 名称或服务未知

> ID：11605614
> 
> 赞同：7
> 
> 时间：2012-07-23T02:02:44.800
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试从我的项目的[Civic Commons Apps链接中提取数据。](http://civiccommons.org/apps)我能够获得我需要的页面的链接。但是当我尝试打开链接时，我得到“urlopen 错误 [Errno -2] 名称或服务未知”

网页抓取python代码：

```
from bs4 import BeautifulSoup
from urlparse import urlparse, parse_qs
import re
import urllib2
import pdb

base_url = "http://civiccommons.org"
url = "http://civiccommons.org/apps"
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())

list_of_links = [] 

for link_tag in soup.findAll('a', href=re.compile('^/civic-function.*')):
   string_temp_link = base_url+link_tag.get('href')
   list_of_links.append(string_temp_link)

list_of_links = list(set(list_of_links)) 

list_of_next_pages = []
for categorized_apps_url in list_of_links:
   categorized_apps_page = urllib2.urlopen(categorized_apps_url)
   categorized_apps_soup = BeautifulSoup(categorized_apps_page.read())

   last_page_tag = categorized_apps_soup.find('a', title="Go to last page")
   if last_page_tag:
      last_page_url = base_url+last_page_tag.get('href')
      index_value = last_page_url.find("page=") + 5
      base_url_for_next_page = last_page_url[:index_value]
      for pageno in xrange(0, int(parse_qs(urlparse(last_page_url).query)['page'][0]) + 1):
         list_of_next_pages.append(base_url_for_next_page+str(pageno))

   else:
      list_of_next_pages.append(categorized_apps_url) 
```

我收到以下错误：

```
urllib2.urlopen(categorized_apps_url)
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno -2] Name or service not known> 
```

当我执行 urlopen 时，我应该处理任何特定的事情吗？因为我没有看到我得到的 http 链接有问题。

[编辑] 第二次运行时出现以下错误：

```
 File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err) 
```

相同的代码在我朋友的 Mac 上运行良好，但在我的 ubuntu 12.04 中运行失败。

我也尝试在**爬虫**wiki中运行代码并成功完成。但是很少有 url 丢失（与 mac 相比）。这些行为有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:39:40.370

该代码适用于我的 Mac 和您朋友的 Mac。它在 Ubuntu 12.04 服务器的虚拟机实例上运行良好。在您的特定环境中显然存在某些东西 - 您的操作系统（Ubuntu 桌面？）或网络导致它崩溃。例如，我的家庭路由器的默认设置会在 x 秒内限制对同一域的调用次数 - 如果我没有将其关闭，可能会导致此类问题。这可能是很多事情。

在这个阶段，我建议重构您的代码以捕获`URLError`并留出有问题的 url 以进行重试。如果在多次重试后失败，也会记录/打印错误。甚至可能会输入一些代码来计算错误之间的调用时间。这比让你的脚本彻底失败要好，你会得到反馈，说明它是否只是特定的 URL 导致了问题或时间问题（即它是在 x 次`urlopen`调用后失败，还是在 x 次后失败`urlopen`x 微/秒的调用次数）。如果这是一个时间问题，一个简单的`time.sleep(1)`插入到你的循环中就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-08T05:24:41.113

同步大师，

我最近在跳上一个很久没玩过的旧 ubuntu 盒子后遇到了同样的问题。这个问题实际上是由您机器上的 DNS 设置引起的。我强烈建议您检查您的 DNS 设置（/etc/resolv.conf 并添加名称服务器 8.8.8.8），然后重试，您应该会成功。

# node.js - 手动安装 NPM 包

> ID：11605621
> 
> 赞同：11
> 
> 时间：2012-07-23T02:03:56.033
> 
> 标签：node.js, installation, express

我使用 node windows installer v0.8.3 来安装 nodejs。当我尝试像这样安装快递时：

```
npm install express 
```

它不工作。我认为那是因为我公司使用的是代理，所以我从 github [https://github.com/visionmedia/express](https://github.com/visionmedia/express)下载了 express ，但我不知道如何安装。

我解压缩文件并将它们放在 F/express/. 请帮我？我在 Windows 上

当我尝试使用以下命令从 F:/express/ 安装时

```
cd F:/express
npm install ./express 
```

或者

```
npm install . 
```

我收到以下错误：

```
error: connect ETIMEDOUT
at errnoException (net.js:776:11)
at Object.afterConnect [as oncomplete] (net.js:767:19) 
```

当我尝试做

```
npm install F:/express 
```

表明

```
express@3.0.0beta7 prepublish F:/express/
npm prune 
```

随后是大量的 http get 消息，然后是相同的错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T11:17:46.517

express 本身有很多依赖项，我相信 npm 也会尝试在你发出`npm install`. 我认为您应该正确配置代理=> [http://jjasonclark.com/how-to-setup-node-behind-web-proxy](http://jjasonclark.com/how-to-setup-node-behind-web-proxy)？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T03:24:10.510

从长远来看，通过以下方法之一将 NPM 配置为使用上述代理可能是最方便的（在下面，将 $PROXY 替换为 $PROTOCOL://$DOMAIN:$PORT 形式的代理（例如[http ://proxy.server:80](http://proxy.server:80) ))

A. 将环境变量 http_proxy 和 https_proxy 设置为 $PROXY

B.

```
npm set proxy $PROXY
npm set https-proxy $PROXY 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-01T15:05:12.170

如果由于代理或其他 Internet 连接问题而无法获取软件包，请在另一台机器上设置项目。然后将项目复制到您的目标。它将包含您需要的所有文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T02:09:57.677

尝试`npm install .\express`（假设 express 文件夹在当前文件夹中）。

问题是`express`in`npm install express`被解析为包名，而`.\express`in`npm install .\express`被解析为文件夹名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T02:16:08.680

您将希望`npm install .`从您的`F:/express/`文件夹中运行（或`npm install -g .`全局安装）。

您似乎下载了测试版 (3.0.0beta7)。尝试安装最新的稳定版本（2.5.11）：

```
npm install https://github.com/visionmedia/express/tarball/2.5.11 
```

# javascript - 如果 JSONP 用于解决同源策略，它不能用于 XSS 攻击吗？

> ID：11605623
> 
> 赞同：2
> 
> 时间：2012-07-23T02:04:20.767
> 
> 标签：javascript, jsonp

我试图了解 JSONP 是如何工作的，从我迄今为止非常基本的理解来看，我觉得它被用来规避浏览器强制执行的同源策略。我想这个政策背后的主要原因是为了防止像 XSS 漏洞利用这样的东西（比如说有人可以注入一个脚本，该脚本利用用户机器上的本地 cookie 来获取有价值的信息，比如当用户登录他们的银行账户时。 ...是这样吗？）现在，如果 JSONP 正在规避这个政策，它不能被利用来做这样的事情吗？对不起，如果这个问题非常基本......我几天前才开始尝试使用javascript，但我仍在努力解决它:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:14:23.193

当您使用 JSONP 时，您信任托管站点不会注入恶意代码或允许攻击者注入恶意代码。

所以基本上答案是：是的。如果您没有该级别的信任，请不要使用该站点的 JSONP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T02:15:20.073

是的，它可以。如果您不信任您请求其数据的第三方，或者如果有人可以在两者之间注入一些东西，那么不要将 JSONP 与它一起使用。JSONP 将允许来自第三方站点的任意代码在您的页面上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T02:20:59.990

> 真正的问题是，您信任其他域吗？由于其他域基本上被授予对您页面的完全访问权限（通过 JavaScript），您应该绝对确定您信任他们。如果他们想要，他们可以很容易地破坏您的页面、重定向用户，或者更糟：窃取您的 cookie（这会导致一大堆潜在问题）。

来自：http: [//james.padolsey.com/javascript/cross-domain-requests-with-jsonp-safe/](http://james.padolsey.com/javascript/cross-domain-requests-with-jsonp-safe/)

所以，基本上，是的，它可以用于 XSS 攻击。因此，信任主机域很重要。如果您不确定主机域的完整性，请避免使用 JSONP。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T02:34:12.500

`script`JSONP 利用标签可以从外部域加载数据的事实。当您将 CDN 用于流行的库时，您一直在这样做。

所以 JSONP 本身并不能使 XSS 攻击更容易。“问题”是`script`标签可以加载任意文件，这与 JSONP 无关。每当您加载外部文件时，您必须确保它们不包含恶意代码。

# css - 试图将文本放在图像前面

> ID：11605626
> 
> 赞同：0
> 
> 时间：2012-07-23T02:04:47.990
> 
> 标签：css, html, css-float, image

这是有问题的[网站](http://ilmioforno.com)

我希望作为其自己的 div 的不透明栏与文本一起出现在 div 后面。这两个显然都在图像前面。

我的问题是：

1) 我不能让标题为“fp-banner”的 div 在包含文本的同时缩小到 70px 的高度。

2）白色边框一直延伸到底部，我不知道为什么。

我试图在此处发布所有代码，但是当我复制并粘贴它时，实际上会出现 html，所以我想我不会发布它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:22:17.670

让我先解决问题 #2 - 白色边框延伸到特色帖子图像下方，因为您将边框应用于容器元素 (#featured-post) 而不是图像本身 (#featured-post img)

因此，将#featured-post 的 CSS 更改为：

```
#featured-post {
    float: left;
    width: 370px;
    margin-left: 10px;
    padding:0;      
} 
```

和 #featured-post img 的 CSS 到：

```
#featured-post img {
    border: solid 3px #fff;
    z-index: -1;
    margin:0;
    padding: 0;

} 
```

对于问题 #1，将其添加到 #fp-banner：

```
height:70px !important ; 
```

并将其添加到您的 CSS 中：

```
#fp-banner p { line-height:14px ; margin-bottom:8px } 
```

您可能需要调整 #fp-banner p 样式的 margin-bottom 值以适应 70px 高度。

注意：在进行这些更改之前，不要忘记备份您的 style.css，以防万一:)

希望这可以帮助！

最好的，

辛西娅

# google-geocoding-api - 地理编码 API OVER_QUERY_LIMIT 错误

> ID：11605631
> 
> 赞同：1
> 
> 时间：2012-07-23T02:06:00.257
> 
> 标签：google-geocoding-api

我有一个网站，过去 3 年一直在我的服务器上使用 Google GeoCoding API。从上周开始，该 API 因 v2 API 上的错误 620 而失败。虽然我的网站流量不高，但我认为可能存在缺陷导致我达到匿名阈值，或者网站爬虫正在敲击某些东西，或者共享托管环境中的其他人导致达到阈值。

我将 API 调用切换到另一台服务器并用作代理，然后我又恢复了业务。第二天又发生了。我注意到 API 控制台文档指出我可以使用密钥运行 V3 API，并通过控制台了解我在 24 小时内发出了多少请求。

我升级到 V3 Maps API 以进行服务器端地理编码，发现当我包含密钥时，我总是会得到一个 REQUEST_DENIED。如果我没有包含密钥，它可以工作，但大约一天后它会停止使用 OVER_QUERY_LIMIT，然后在第二天开始。请注意，我正在设置所需的“传感器”参数。

所以，我只能假设我根据谷歌行为达到了每天 2500 的门槛，但我的网站流量报告不支持这一点。我无法用谷歌密钥方法确认，因为它不起作用。任何支持/想法都会有所帮助。我已经成功使用 API 三年了，这只是在过去 6 天内出现的。

帮助！！

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T21:06:35.183

尝试使用延迟 500 毫秒来获得结果。

这是一个示例代码。

```
loc = GeocodeAddresses(fullAddress);
                        if (loc != null)
                        {
                            lat = double.Parse(loc.lat);
                            lng = double.Parse(loc.lng);

                            int milliseconds = 500;
                            Thread.Sleep(milliseconds); 
```

这对我很有用。

# php - 在php中创建数组时出错

> ID：11605633
> 
> 赞同：0
> 
> 时间：2012-07-23T02:06:06.100
> 
> 标签：php

我有一个示例代码：

```
$id = '1,2,3,4,5';
$name = 'Iphone 3,Iphone 3S,Iphone 4,Iphone 4S,Iphone 5';
$id_arr = array($id);
$name_arr = array($name);
$arr = array_combine($id_arr, $name_arr);
print_r($arr); 
```

当我`print_r($arr)`是结果是`([1,2,3,4,5] =>'Iphone 3,Iphone 3S,Iphone 4,Iphone 4S,Iphone 5')`

结果如何解决`([1]=>'Iphone 3' [2] => 'Iphone 3S' ... [5]=>'Iphone 5')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:08:19.863

给定输入的正确函数是`explode`. `str_split`有不必要的开销。 `$id_arr = explode(',', $id);`.

请注意，数组实际上应该像这样定义：`$id_arr = array(1 => 'value 1', 2 => 'value 2', 3 => 'value 3');`等等...除非您被迫使用字符串作为键集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:09:57.427

或尝试：

```
$id = '1,2,3,4,5';
$name = 'Iphone 3,Iphone 3S,Iphone 4,Iphone 4S,Iphone 5';
$id_arr = explode(',',$id);
$name_arr =explode(',',$name);
$arr = array_combine($id_arr, $name_arr);
print_r($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:49:05.263

我不确定为什么你必须以 1 开始你的数组，但如果你想保持这样的顺序并将键保持为整数，可以这样做：

```
$name = 'Iphone 3,Iphone 3S,Iphone 4,Iphone 4S,Iphone 5';

$parts = explode(',', $name);

$arr  = array();

$i = 1;

foreach($parts as $value)
{
    $arr[$i] = $value;//we can possibly strip leading spaces and convert string case
    $i++;
}

print_r($arr); 
```

# node.js - nodejs express set server：检测到可能的EventEmitter内存泄漏

> ID：11605634
> 
> 赞同：0
> 
> 时间：2012-07-23T02:06:31.863
> 
> 标签：node.js, express

![代码](../Images/a0465f20c1c33f6ed72a82435d1b8919.png)

我的节点 js 就是这样，但是当我启动这个服务器时，它遇到了错误：

![错误](../Images/18117d25381d677903d36e7bab698496.png)

我的节点版本是 v0.6.18。我遵循建议，因为 [可能检测到 EventEmitter 内存泄漏](https://stackoverflow.com/questions/9768444/possible-eventemitter-memory-leak-detected)

添加 req.setMaxListeners(0) 但它不起作用。

我在这里附上我的整个代码：

```
 var express = require('../node_modules/express'),
        redis = require('../node_modules/socket.io/node_modules/redis'), 
        // io = require('../node_modules/socket.io').listen(app),
        fs = require('fs');

    var app = express.createServer();
    app.use(express.bodyParser());

    var cache = redis.createClient(7010, "192.168.100.18");

    var port = 8888;

    // get html page ok
    app.get('/*', function (req, res) {
        req.setMaxListeners(0);
        res.sendfile(__dirname + '/html/' + req.params[0]);
    });

    // get js page ok
    app.get('/js/*', function (req, res){
        res.sendfile(__dirname + '/html/js/' + req.params[0]);
    });

    // get image ok
    app.get('/img/*', function (req, res){
        res.sendfile(__dirname + '/html/img/' + req.params[0]);
    });

    // login interface ok
    app.post('/login*', function(req, res, next){
        console.log("access login")
        var username = req.body.username;
        var password = req.body.password;

        if(username == null || password == null){
            console.log("username or password is nil")
            res.json({ret:false})
            return
        }

        cache.hget("margin:user:password", username, function(err, resp){
            if (err != null){
                console.log(err)
            }
            if(resp == null){
                res.json({ret:false})
                return
            }
            res.json({ret:true})
            return
        })
    });

    // upload file interface ok
    app.post('/upload*', function(req, res, next){
        console.log(req.files)
        console.log(req.body)
        fs.readFile(req.files.image.path, function(err, data){
            var unix = Math.round(+new Date()/1000);
            var imagename = unix + "." + req.files.image.type.split("/")[1]
            var newPath = __dirname + "/html/img/" + imagename;
            fs.writeFile(newPath, data, function(err){
                if(err == null){
                    res.json({ret:true, img:"http://192.168.100.188:" + port + "/html/img/" + imagename});
                    return;
                }
                res.json({ret:false});
            });
        });
    });

    app.listen(port); 
```

我的请求网址如 localhost:8888/index.html

多谢。

添加错误：

```
 (node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace: 
    at Socket.<anonymous> (events.js:139:15)
    at ServerResponse.sendfile (/data/www/margintop/server/node_modules/express/lib/response.js:185:14)
    at /data/www/margintop/server/webserver/webserver.js:17:9
    at callbacks (/data/www/margintop/server/node_modules/express/lib/router/index.js:165:11)
    at param (/data/www/margintop/server/node_modules/express/lib/router/index.js:139:11)
    at pass (/data/www/margintop/server/node_modules/express/lib/router/index.js:146:5)
    at Router._dispatch (/data/www/margintop/server/node_modules/express/lib/router/index.js:173:4)
    at Object.router [as handle] (/data/www/margintop/server/node_modules/express/lib/router/index.js:33:10)
    at next (/data/www/margintop/server/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at multipart (/data/www/margintop/server/node_modules/express/node_modules/connect/lib/middleware/multipart.js:52:61) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:32:46.957

我相信这是快递中的一个错误。第 185 行`response.js`读取：

```
req.socket.on('error', error); 
```

但是这个监听器并没有被删除。这个错误似乎是最近引入的。

我添加了一个[拉取请求](https://github.com/visionmedia/express/pull/1244)来表达解决此问题的方法。为了快速修复，您可以添加

```
this.on('finish', function() { req.socket.removeListener('error', error); }); 
```

在你的第 220 行之后`/data/www/margintop/server/node_modules/express/lib/response.js`使它看起来像这样：

```
res.sendfile = function(path, options, fn){

  // ...

  // socket errors
  req.socket.on('error', error);

  // ...

  this.on('finish', function() { req.socket.removeListener('error', error); });
}; 
```

## 更新

我的 pull request 已经被[合并](https://github.com/visionmedia/express/commit/cb844132e)，所以这个 bug 在 express 的最新源版本中得到了修复。

# css - 使用 CSS3 过渡动画非动画属性

> ID：11605637
> 
> 赞同：4
> 
> 时间：2012-07-23T02:06:52.043
> 
> 标签：css, css-transitions

在我的应用程序中，我正在为页面上元素的不透明度设置动画，例如：

```
.s {
    transition-property: opacity;
    transition-duration: 250ms;
} 
```

（当然，使用特定于供应商的版本）。进而

```
.s.hidden {
    opacity: 0;
} 
```

因此动画在`hidden`分配类时开始。问题是，仍然在不透明度为零的元素上检测到鼠标事件，这是我不想要的，因此我需要在过渡完成*后*`visibility`设置为`hidden`或设置`display`为。我希望能够做类似的事情：`none`

 *```
.s {
    transition-property: opacity, visibility;
    transition-duration: 250ms;
    transition-delay:    0, 250ms;
} 
```

进而

```
.s.hidden {
    opacity: 0;
    visibility: hidden;
} 
```

使用 CSS 过渡机制轻松地做到这一点。据我所知，这是行不通的，因为`visibility`它是不可动画的属性。但是其他过渡框架（例如 d3）*确实可以*处理非动画属性，很明显，只需在过渡开始或结束时设置值即可。

我能想到的最好的方法是使用`transitionend`事件（及其特定于浏览器的变体，例如`oTransitionEnd`）来捕捉过渡的结束并`visibility`在那时设置，但我想知道是否有更简单的方法，最好坚持纯 CSS。或者，正如我的问题的标题所暗示的那样，非动画属性就是这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:45:07.783

`visibility` *是*一个动画属性，[请参阅规范](http://www.w3.org/TR/css3-transitions/#properties-from-css-)。

这意味着您的`.hidden`课程将按照您的描述进行。在这里演示：http: [//jsfiddle.net/ianlunn/xef3s/](http://jsfiddle.net/ianlunn/xef3s/)

编辑：规范并不完全清楚：

> 可见性：如果其中一个值是“可见”，则作为离散步骤进行插值，其中 0 和 1 之间的计时函数值映射到“可见”和计时函数的其他值（仅出现在转换或作为 Y 值在 [0, 1] 之外的“cubic-bezier()”函数的结果）映射到更近的端点；如果两个值都不“可见”，则不可插值。

但这就是我认为的意思：

`visibility`不能在 1 - 0 之间的不透明度动画的范围`visible`和`hidden`方式之间平滑动画。它只是在过渡的开始和结束状态之间`visible`以及`hidden`在过渡的开始和结束状态之间切换。

Providing the transition is either going to or from `visibility`, then a transition will occur. If trying to transition between `visibility: hidden` and `visibility: collapse` for example, those values are "not interpolable" and the transition would not occur.

So in my example, `opacity` causes the element to fade out and then at the end of the transition, `visibility` snaps to `hidden`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T21:08:16.143

As a good alternative to display/visibility toggle, `opacity:0` with `pointer-events:none` could be used.*

# java - 图像作为组件问题

> ID：11605639
> 
> 赞同：0
> 
> 时间：2012-07-23T02:07:21.900
> 
> 标签：java, image, components

我正在尝试为我的 java 类做我的最终项目。我正在尝试拍摄 .png 图片并将其用作可以添加到 JFrame 的组件。但是，当我尝试执行此操作时，它会引发异常并执行 catch 语句中的操作。我不明白为什么它会这样做。我的 .png 文件与 .java 文件位于同一文件夹中。

```
package InventoryApp;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JLabel;

/**
 *
 * @author Curtis
 */
public class FinalProject extends DFrame
{
//main method
public static void main(String[] args) 
{
    start();
}

//building splash screen

public static void start()
{   DFrame splashFrame = new DFrame();
    try
    {
    BufferedImage myPicture = ImageIO.read(new File("logo.png"));
    JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
    splashFrame.add(picLabel);
    }
    catch(IOException g)
    {
        JLabel error = new JLabel("Picture Could Not Be Found");
        splashFrame.add(error);
    }

    JButton create = new JButton("Click to Create Item List");
    JButton view = new JButton("Click to View Item List");
    splashFrame.add(create);
    splashFrame.add(view);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:14:22.073

当您创建一个`File`没有指定路径的对象时，它假定启动程序的目录，*而不是*当前类文件所在的目录。您可能希望改用`FinalProject.class.getResource()`：

```
BufferedImage myPicture = ImageIO.read(FinalProject.class.getResource("logo.png")); 
```

# git - 如果我已经使用 github 作为密钥，我如何在没有密码的情况下进行 ssh？

> ID：11605642
> 
> 赞同：0
> 
> 时间：2012-07-23T02:07:40.047
> 
> 标签：git, ssh

我不完全确定键是如何工作的。

我终于设置了 github 来存储 2 个 SSH 密钥，一个用于我的本地计算机，一个用于我的服务器。

我已经阅读了一些关于如何制作它的指南，所以当我 ssh 进入我的服务器时，我不必存储密码，但我不确定如何在不覆盖 github 密钥的情况下执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:21:13.323

在您的服务器上，将您的本地计算机 [public] 密钥附加到`~/.ssh/authorized_keys`.

由于您已经从 github 上的服务器和本地计算机获得了密钥，我假设您知道如何生成密钥以及在哪里可以找到它们。

# overlays - 如何使用 Eclipse Android API 级别 2 使图像半透明并更改 JAVA 中的边界？

> ID：11605643
> 
> 赞同：1
> 
> 时间：2012-07-23T02:07:57.660
> 
> 标签：overlays, eclipse-adt

我使用`HelloItemizedOverlay`Google 的代码创建和覆盖项目，它可以工作，但现在我需要使图像半透明并更改边界，我不知道它是如何工作的。

我找到了该方法`getOpacity()`，但我不知道如何在我的`ItemizedOverlay`班级或班级中实现它`Map`。我也知道`getIntrinsicHeight()`和`getIntrinsicWidth()`方法，但像`getOpacity()`我不知道如何正确使用它。我用于我的代码`ItemizedOverlay`是：

```
import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.PixelFormat;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class ContourItemizedOverlay extends ItemizedOverlay {

    Context mContext;

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

public ContourItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenter(defaultMarker));
    mContext = context;
    // TODO Auto-generated constructor stub
}

public int getOpacity()
{
    return PixelFormat.TRANSPARENT;
}

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return mOverlays.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return mOverlays.size();
} 

} 
```

# android - Android 线程 - 在执行所有其他线程之前执行一个线程

> ID：11605648
> 
> 赞同：1
> 
> 时间：2012-07-23T02:08:35.463
> 
> 标签：android, multithreading, android-asynctask

我是 Android 编程新手，遇到线程问题。

我基本上使用来自 50 个左右 URL 的图像填充 GridView，但是在我从已知 URL 检索 JSON 对象之前，这些 URL 将不为人所知。我知道我必须为每个 URL 下载启动一堆线程（使用 AsyncTask 类）。

如何有效地将这些线程排队，以便首先执行和完成 JSON 线程，这样当我立即触发这 50 个图像线程时，我可以使用从该线程检索到的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:53:28.183

不要启动 50 个线程。使用单线程。虽然这应该与 UI 线程分开以实现响应性，但不需要生成多个线程，当然也不需要每个 URL.ce 一个线程

只需进行 JSON 网络调用，然后解析响应，然后（在同一个线程中）循环请求每个 URL，并将结果解码为位图。您让他们在某个模型对象中将它们添加到您的 GridView 的适配器中，这将自动触发 GridView 在 UI 线程上更新。

这里有更好的实践，例如延迟加载、缓存和在加载图像时显示占位符图像，但确切的实现变得过于复杂，无法在此处描述。搜索 WeakReferenceMap 和 LruCache 以查找将动态图像加载到 AdapterView 的最佳实践示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:16:21.127

好吧，你可以只运行第一次 fetch，完成后，从这个主线程触发 50 个线程。由于 Android 3.0 及更高版本会在您从 UI 线程进行网络通信时终止您的应用程序，这`AsyncTask`可能是获取 JSON 的一种方式。当它返回时，它可能会触发其他线程。

您仍然应该考虑的一件事是，Android 尽管功能强大，但仍然是功能有限的设备。50 个线程可能会使用目标手机拥有的更多资源，因此您的应用程序可能会被系统杀死（例如，因为 OOME）。所以在桌面上 50 个线程听起来并不多，但它们在手机上却很多。

同样 IIrc，http 规范中有一个限制，一个远程服务器可能只有 4 个（？）同时连接。因此，请考虑将图像加载请求排队并一个接一个地获取它们。

# sql - 从现有表创建新表时传递了“NOT NULL”约束？

> ID：11605652
> 
> 赞同：0
> 
> 时间：2012-07-23T02:09:45.573
> 
> 标签：sql, oracle

我正在尝试从现有表创建一个表。除了约束之外，还有哪些其他`NOT NULL`约束？还有哪些其他属性/功能传递给新表？

我用来创建新表的查询是这样的：

```
create table sales_emp
as
select * from emp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:56:07.890

以下信息可以在[官方手册](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7002.htm#i2159659 "创建表（甲骨文）")中找到（所有重点都是我的）：

> Oracle 数据库从子查询**派生数据类型和长度**。Oracle 数据库遵循以下完整性约束规则以及其他列和表属性：
> 
> *   如果子查询选择的是列而不是包含该列的表达式，Oracle 数据库会自动在新表中的列上**定义**在选定表的相应列上**显式创建**的任何**`NOT NULL`约束。**如果任何行违反约束，则数据库不会创建表并返回错误。
>     
>     
> ***   **`NOT NULL`**Oracle 数据库对选定表的列（例如，主键）**隐式创建的约束****不会传递**到新表。
>     
>     *   此外，**主键、唯一键、外键、检查约束、分区标准、索引和列默认值不会被转移**到新表中。
>     
>     *   如果选定的表是分区的，您可以选择新表是否以相同方式分区、不同分区或不分区。**分区不会转移**到新表。`CREATE TABLE`在子句之前的语句中指定任何所需的分区。`AS *subquery*`**

# eclipse - SpringSource 工具套件更改主题

> ID：11605653
> 
> 赞同：13
> 
> 时间：2012-07-23T02:09:48.280
> 
> 标签：eclipse, grails, themes, sts-springsourcetoolsuite

当我意识到[Sublime](http://www.sublimetext.com/)时，我注意到深色主题对您的工作空间的好处。但是由于目前 Sublime 不支持 Grails，所以我搜索了 STS 或 SpringSource Tool Suite 的主题方法，并找到了这篇[文章](http://zoltanb.co.uk/how-to-change-the-colour-theme-in-eclipse-distros/)。我试过这个插件，效果很好。不幸的是，插件仅更改了编辑器区域。

问题是我如何改变`Color and Fonts`整个 STS 或 Eclipse 的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-04-29T14:44:35.737

转到Windows->首选项->常规->外观->选择所需的主题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-15T05:40:25.463

在此处下载插件：[http ://eclipsecolorthemes.org/?view=plugin](http://eclipsecolorthemes.org/?view=plugin)

如果您使用的是 Eclipse 3.6 (Helios)，安装插件的最简单方法是从 Eclipse Marketplace。转到 Help→Eclipse Marketplace...，然后搜索 Eclipse Color Theme 并安装它。

如果您使用的是 Eclipse 3.5 (Galileo)，请转到 Help→Install New Software...，按 Add Site 并输入 Eclipse Color Theme 作为名称并输入[http://eclipse-color-theme.github.com/update](http://eclipse-color-theme.github.com/update)作为网址。然后从标记为 Work with 的选择框中选择新条目，标记 Eclipse Color Theme 进行安装并继续。

请注意：如果您使用的插件版本低于 0.6，请按照上述说明卸载并重新安装。更新站点和插件 ID 已更改。

用法

安装完成后，进入Window→Preferences→General→Appereance→Color Theme更改颜色主题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-23T06:53:22.800

如果您使用当前的 STS 里程碑（STS 3.0.0），那么它是可能的，因为底层的 Eclipse 4 现在是完全可主题化的。已经有一些可用的主题，但是您应该将它们视为测试版。

这是为您的编辑窗口选择颜色主题的地方：http: [//eclipsecolorthemes.org/](http://eclipsecolorthemes.org/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-28T21:13:38.680

您可以前往 Marketplace Eclipse 并搜索 Darkest Dark Theme。顾名思义，一个非常酷的黑暗主题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-24T08:47:23.920

**1\. 无需下载任何插件即可更换Spring Tool Suite主题。** （要使用 Darkest Dark Theme，请参阅选项 2）

首先，前往

`Window`>`Preferences`

[![在此处输入图像描述](../Images/dd17177a21fb8d80ea6d77cba6e5d369.png)](https://i.stack.imgur.com/NltV7.png)

然后在**首选项**对话框中转到

`General`>`Appearance`

之后在**Theme**的下拉列表中选择 * *Dark* ，然后单击**Apply**，然后单击**Apply and Close**

 ******[![在此处输入图像描述](../Images/9ac0a641fd620b7604d78c46ac461585.png)](https://i.stack.imgur.com/FlmSD.png)

然后重新启动一次**STS**，这样您的**STS**将如下所示

[![在此处输入图像描述](../Images/75e91f73b0e375b7ce32d32be4d02d51.png)](https://i.stack.imgur.com/WX5vY.png)

**2\. 通过下载 Darkest Dark 插件更改 Spring Tool Suite 的主题。**

先去

`Help`>`Eclipse Marketplace...`

[![在此处输入图像描述](../Images/f4ac66e247b95d86058edb3b975d2f72.png)](https://i.stack.imgur.com/sJevN.png)

然后在**Eclipse Marketplace**对话框中搜索**Darkest Dark**然后单击**Go**。

然后从搜索结果中安装名为**Darkest Dark Theme with DevStyle的插件**

[![在此处输入图像描述](../Images/5285b2a45e1c5449a25e7107715cf583.png)](https://i.stack.imgur.com/Ama1g.png)

之后选择默认选项，点击**确认**

[![在此处输入图像描述](../Images/f36fa903df6d2b92d48500b4b073d5a2.png)](https://i.stack.imgur.com/oy3YT.png)

然后接受许可并点击**完成**

[![在此处输入图像描述](../Images/935ea50b449d80f0f21fbde37c333d4d.png)](https://i.stack.imgur.com/9GOUO.png)

然后让软件安装

[![在此处输入图像描述](../Images/73a9bd98751ab5527fc4732f46b89dc2.png)](https://i.stack.imgur.com/iBCoy.png)

安装完成后点击弹出的**重启**

[![在此处输入图像描述](../Images/f83107619ad58766fdfafbbe3599d9ed.png)](https://i.stack.imgur.com/liH3y.png)

然后在欢迎界面点击**下一步**

[![在此处输入图像描述](../Images/2c691c3e413065e85ffd582b4d2096a5.png)](https://i.stack.imgur.com/ktQJh.png)

之后选择**Darkest Dark Theme**并单击**Next**

[![在此处输入图像描述](../Images/f88b2083e97bd0bb8aa6d4e66ed50b92.png)](https://i.stack.imgur.com/J741r.png)

然后让**STS**以**Darkest Dark Theme启动**

[![在此处输入图像描述](../Images/39b92cd51c212787adadcde1d958090b.png)](https://i.stack.imgur.com/Ut9XU.png)

然后在**Tweak the Workbench**对话框中单击**Continue**

 **[![在此处输入图像描述](../Images/0902bda8ad5d1d4773ff86a7a83236e4.png)](https://i.stack.imgur.com/K5tIY.png)

然后您的**STS**将如下所示

[![在此处输入图像描述](../Images/c6c60458e0c50dab67ad38938668e26c.png)](https://i.stack.imgur.com/vZETt.png)********

# android - 右键单击 Eclipse“项目资源管理器”不会改变焦点

> ID：11605659
> 
> 赞同：0
> 
> 时间：2012-07-23T02:10:19.060
> 
> 标签：android, eclipse

我首先会说一切都很好，直到几天前我遇到了一些系统问题并且我的机器死机了。重置纠正了这一点，然后我升级了我的 VMWare，它坚持让我首先关闭 Eclipse。不知道是哪一个搞砸了。

我在源代码面板中编辑 Android 项目的源代码。我保存，然后右键单击项目资源管理器面板中的项目，希望选择运行方式并选择运行模式。相反，面板资源管理器在弹出菜单之前没有获得焦点，所以我只得到“运行配置”。此外，如果不先单击 Project Explorer 面板标题来切换焦点，我无法双击源文件并弹出它。

有人见过这个吗？我猜有一些设置文件已损坏。工作流程的中断让我抓狂。帮助！

# wordpress - IE7 中的 Wordpress 图像编辑器问题

> ID：11605661
> 
> 赞同：1
> 
> 时间：2012-07-23T02:10:41.077
> 
> 标签：wordpress, internet-explorer-7

任何人都知道为什么 WP Image Editor 不能在 IE7 中工作？每次我单击编辑图像按钮时，IE7 都会崩溃。

我在其他浏览器中没有看到这个问题，只有IE7。

我使用 WP 3.4 和最新的 3.4.1 进行了测试，得到了相同的结果。

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:13:25.103

## 编辑：

我对管理员中的 IE7 弃用是错误的。我还能够使用将 IE9 设置为 IE7 文档和 IE7 标准模式的虚拟机来确认崩溃。

更新一个外部库可以解决我的问题。请参阅补丁的更新票证。您能否测试一下这个补丁，看看它是否能解决您的问题。

[http://core.trac.wordpress.org/ticket/18199](http://core.trac.wordpress.org/ticket/18199)

使用来自 github 的更新版本更新 wp-includes/js/imgareaselect/jquery.imgareaselect.js 以进行测试。

[https://github.com/odyniec/imgareaselect/blob/master/jquery.imgareaselect.dev.js](https://github.com/odyniec/imgareaselect/blob/master/jquery.imgareaselect.dev.js)

# google-drive-api - 作为开发人员，如何在用户安装我们的应用后隐藏 Google Drive 中的弹出窗口

> ID：11605662
> 
> 赞同：0
> 
> 时间：2012-07-23T02:10:54.040
> 
> 标签：google-drive-api

![在此处输入图像描述](../Images/8be085630743242be5e7b1eefa6b1332.png)

用户安装我们的 Google Drive 应用程序后，会弹出一个窗口（见上图）。但我们不想向用户显示此弹出窗口。我们应该做什么？

=== 根据您的回复，我们无法隐藏弹出窗口。那么我们可以默认取消选中使其成为默认应用程序文件类型的选项吗？（请参阅突出显示的复选框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:55:52.767

您无法隐藏此弹出窗口——抱歉。它适用于用户而不是开发人员。毕竟，Google Drive 是一种消费产品，Drive 应用程序应该可以增强他们的体验。

话虽如此，但我不确定这是一个很棒的用户体验。我们一定会对其进行审查并寻找其他方法来提醒用户。

# android - GCMIntentService 强制转换异常

> ID：11605669
> 
> 赞同：0
> 
> 时间：2012-07-23T02:11:42.457
> 
> 标签：android, push-notification, google-cloud-messaging

调用 GCMIntentService 时出现问题，抛出异常：

> java.lang.ClassCastException：com.test.test.GCMIntentService 无法转换为 android.content.BroadcastReceiver

然而，我的类确实扩展了 GCMBaseIntentService，实际上我的构造“结束”得很好（super(SENDER_ID); 传递没有问题）并且问题出现在退出构造函数时，我怀疑当内部类尝试强制转换新创建的实例时我的扩展课。

如果需要，供参考的代码：

```
package com.adk.test;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Notification;
import android.os.Bundle;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.NotificationCompat.Builder;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import utilities.Logd;

import com.google.android.gcm.GCMBaseIntentService;
import com.google.android.gcm.GCMConstants;
import com.google.android.gcm.GCMRegistrar;

public class GCMIntentService extends GCMBaseIntentService {

    private final String LOG_TAG = "Test";
    private final static String senderID = "66610078X85X";

    public GCMIntentService(){
        super("66610078X85X");
        Logd.i(LOG_TAG, "GCM passed");
    }

    @Override
    protected void onError(Context arg0, String errorID) {
        Logd.e(LOG_TAG, errorID, null);
    }

    @Override
    protected void onMessage(Context arg0, Intent intent) {
        enviarNotificacion(arg0, intent);

    }

    @Override
    protected void onRegistered(Context arg0, String deviceID) {
        Registrar(arg0, deviceID);      
        Logd.i(LOG_TAG, "Registered");
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Logd.i(LOG_TAG, "Unregistered");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:25:23.503

考虑将[GCMBroadcastReceiver](http://developer.android.com/guide/google/gcm/client-javadoc/index.html?com/google/android/gcm/GCMBroadcastReceiver.html)传递给您将 GCMIntentService 传递给的任何对象。您不需要继承和覆盖名称，因为看起来您的意图服务已经具有[正确的名称](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMConstants.html#DEFAULT_INTENT_SERVICE_CLASS_NAME)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:24:47.800

异常表明框架正在尝试在以下位置访问您的 GCMIntentService：

```
 com.test.test.GCMIntentService 
```

但是您的源代码将包名称设置为：

```
package com.adk.test; 
```

我认为将您的软件包名称更改为`com.test.test`应该可以。

或者，如果您更喜欢使用 com.adk.test.GCMIntentService，则将您的 AndroidManifest.xml 的 GCM 接收器修改为：

```
<receiver android:name="com.adk.test.GCMIntentService" .... /> 
```

# css - 重叠 div 定位

> ID：11605672
> 
> 赞同：0
> 
> 时间：2012-07-23T02:12:33.583
> 
> 标签：css, layout, html

我想在图像上有一个横幅。图像和横幅（横幅片段）都在同一个父元素中，因此黑色横幅被推到视野之外。我怎样才能解决这个问题。

你可以在这里看到我的来源：

```
<div id="slide-banner">
    <img src="http://upload.wikimedia.org/wikipedia/commons/0/0c/GoldenGateBridge-001.jpg"/>
    <div id="slide-banner-snippet">
    </div>
</div>​ 
```

```
#slide-banner {
    margin-top: 70px;
    margin-right: auto;
    margin-left: auto;
    padding: 0px 0px 0px 0px;
    height: 350px;
    width: 916px;
    border: 1px solid #ccc;
    border-radius: 3px 3px 3px 3px;
    overflow: hidden;
}

#slide-banner img {
    height: auto;
    width: 916px;
}

#slide-banner-snippet {
    height: 55px;
    width: 916px;
    background-color: #000;
} 
```

[http://jsfiddle.net/uSw8S/](http://jsfiddle.net/uSw8S/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:17:59.280

绝对定位要浮动的元素，即：

```
position:absolute;
top:0;
z-index:1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:28:01.630

您可以进行`#slide-banner`相对定位和`slide-banner-snippet`绝对定位并添加`bottom:0;`

```
#slide-banner {
    margin-top: 70px;
    margin-right: auto;
    margin-left: auto;
    padding: 0px 0px 0px 0px;
    height: 350px;
    width: 916px;
    border: 1px solid #ccc;
    border-radius: 3px 3px 3px 3px;
    overflow: hidden;
    position:relative;
}

#slide-banner img {
    height: auto;
    width: 916px;
}

#slide-banner-snippet {
    height: 55px;
    width: 916px;
    background-color: #000;
    position:absolute;
    bottom:0;
} 
```

[http://jsfiddle.net/uSw8S/2/](http://jsfiddle.net/uSw8S/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:10:29.753

你可以把

```
<div id="slide-banner-snippet">
    </div> 
```

前

```
<img src="http://upload.wikimedia.org/wikipedia/commons/0/0c/GoldenGateBridge-001.jpg"/> 
```

示例[在这里](http://jsfiddle.net/anaida/uSw8S/10/)

# jquery - 当用户在jquery中按下回车键时，隐藏在文本框中

> ID：11605676
> 
> 赞同：2
> 
> 时间：2012-07-23T02:13:51.640
> 
> 标签：jquery, textbox, textarea, keycode, onkeypress

这类似于这个[问题](https://stackoverflow.com/questions/5455104/adding-br-to-the-text-box-when-user-press-enter-key-in-jquery/11604281#11604281)。

我目前正在尝试从文本框中的用户那里捕获信息，然后以电子邮件中的确切格式将此信息发送给提交页面的所有者。

目前，通过发送的电子邮件出现在一行上。我需要在电子邮件中包含换行符。

我有以下代码，我需要对用户隐藏换行符。任何建议将不胜感激。

```
 $("textarea").keypress(function(e){
      if (e.keyCode == 13) {        
         $(this).val(  $(this).val() + "<br/>");
         //insert a newline
         $(this).val($(this).val() + "\n");
         alert("just enter was pressed");
         return;
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:24:12.597

请试试这个：http: [//jsfiddle.net/yauqg/](http://jsfiddle.net/yauqg/)

希望对事业有所帮助`:)`

**代码**

```
$('#text').keyup(function(e){
      var keyed = $(this).val().replace(/\n/g,'<br />');
      $("#target").html(keyed);
 });​ 
```

# java - Java/Swing 应用程序中 OpenMapStreet API/GoogleMap API 的使用

> ID：11605679
> 
> 赞同：0
> 
> 时间：2012-07-23T02:14:57.253
> 
> 标签：java, swing, gps, openmap

我需要解决一个关于在 Java 中基于 Swing 的应用程序显示地图的简单问题。我有纬度和经度列表（GPS 轨迹），我需要使用这些路线绘制一些路线，并且可能想要绘制像 GoogleMaps 这样的地图。

是否可以通过 OpenMapStreet API 使用 GPS 信息（纬度、经度）绘制谷歌地图。基于不同的用户选择`JFrame`控制（例如包含路线信息的行）特定区域（面板）之一，应绘制地图（可能是谷歌地图）。

我阅读了 OpenMapStreet API。但我没有找到使用给定纬度/经度（GPS 信息）在 Swing 应用程序上绘制地图的具体示例。

任何想法（可能是一些代码示例）我都会感激不尽。

## 编辑：

假设我有以下经度/纬度信息。

```
Longitudes    Latitudes

2546789.510  ,7894125.10 ( Linhaeim)
1547897.111  ,4569872.10     ..
2546789.510  ,2365478.79     ..
2314561.510  ,7894125.11
5467891.510  ,7894125.22
4578933.510  ,2647835.33
6547891.510  ,2254776.44
3211457.510  ,7899901.37
6987888.510  ,2010009.78
3654789.510  ,9876510.61
5547890.510  ,3145678.39
1789000.510  ,4698333.58
2778900.510  ,3254788.97
7455555.510  ,3378945.27 ( XYZ ) 
```

此外，Journey 的一些 StopNames 也与这些 gps 坐标相关联（如 Linhaeim、Im Saal、KreiserStr、ABC、XYZ、........）

我在数据库中存储了上述数据以及其他一些附加信息（例如 JourneyId、JourneyStartTime、JourneyEndTime .....）。所以，我需要显示上面坐标的地图作为连接这些坐标的路线。

如果 GoogleMap API 适用于此，那么我也可以接受。在此上下文中使用 Google Maps API，请指点我的小教程，甚至寻找包含上述地图问题的内容。

如果仍然不清楚，我很乐意再次编辑它:-)

# python - 多个连接到一个套接字而不使用 Python 线程或产生一个新进程

> ID：11605680
> 
> 赞同：0
> 
> 时间：2012-07-23T02:15:09.317
> 
> 标签：python, multithreading, sockets, multiprocessing

是否可以编写一个允许多个连接而不使用线程或新进程的服务器？

现在我不是在谈论一堆socket.accepts()，而是有不同的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:21:05.530

如果你没有多个`accept`s 你就没有多个连接，所以你如何处理不存在的东西并不重要。

[可以使用经典的选择](http://docs.python.org/library/select.html)循环在单个线程中处理多个接受的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:05:04.050

Python 提供了模块[asyncore](http://docs.python.org/library/asyncore.html#module-asyncore)。这是一个很好的[回声服务器](http://docs.python.org/library/asyncore.html#asyncore-example-basic-echo-server)示例。

# vba - VBA 案例语句会运行多于一行代码吗？

> ID：11605685
> 
> 赞同：1
> 
> 时间：2012-07-23T02:15:59.533
> 
> 标签：vba

我想知道 VBA case 语句是否会运行不止一行代码：

```
Const HARD = 30

Select Case Hardness

  Case "Hard"
    If PenetrationRate.Cells(i, 1) >= Hard Then
      Total = Total + Metres.Cells(i, 1)
      DoEvents
    End If

   Case "Soft"
     If PenetrationRate.Cells(i, 1) < Hard Then
       Total = Total + Metres.Cells(i, 1)
       DoEvents
     End If

End Select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:09:11.297

是的。

当您的`Select Case`语句找到匹配的 case 时，它​​将运行所有代码，直到它成为 new`Case`或`End Select`.。您可以在每个 case 中嵌套循环或任何其他类型的编码结构。

过于清楚的是，对于您的代码`Hardness = "Hard"`，case 语句将在何时运行：

```
If PenetrationRate.Cells(i, 1) >= Hard Then
   Total = Total + Metres.Cells(i, 1)
   DoEvents
End If 
```

以及`Hardness = "Soft"`case 语句何时运行：

```
If PenetrationRate.Cells(i, 1) < Hard Then
    Total = Total + Metres.Cells(i, 1)
    DoEvents
End If 
```

# query-optimization - 对 Sybase ASE 12.5 DB 的“like”请求影响最小

> ID：11605687
> 
> 赞同：0
> 
> 时间：2012-07-23T02:16:08.677
> 
> 标签：query-optimization, sap-ase

我想尽量减少以下查询对 Sybase ASE 12.5 数据库的性能影响

```
SELECT description_field FROM table WHERE description_field LIKE 'HEADER%'
GO 
```

我怀疑在不修改数据库的情况下我不能比全表扫描做得更好，但有人知道吗？
由于特殊的语法，也许会相对于锁定进行改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:34:52.353

在这种情况下，您应该通过在 description_field 上添加索引来获得很大的加速。

这是有效的，因为 like 字符串以非通配符开头。如果字符串以 % 开头，那么除了执行表扫描之外别无选择。

# android - 从彩信应用程序选择附件后尝试将图像附加到彩信/短信

> ID：11605689
> 
> 赞同：1
> 
> 时间：2012-07-23T02:16:18.363
> 
> 标签：android, android-intent, sms

在您从附件选项列表中选择我的应用程序后，我正在尝试将图像附加到 mms。图像代码很好。

我想要发生的事情

1.您在短信中，点击附加按钮

2.你选择图像，它会拉出应用程序的选择器

3.选择我的应用程序，有图像的gridview

4.（问题）-您从我的应用程序中选择所需的照片，然后将其发送回您所在的彩信

我不确定如何响应来自 sms/mms 应用程序的 ACTION_GET_CONTENT，以便我的应用程序将图像发回给它。

```
 Uri uri = Uri.fromFile(file);
    Intent localIntent = new Intent(android.content.Intent.ACTION_SEND);
    localIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    localIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    //localIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
    localIntent.putExtra("android.intent.extra.STREAM", uri);
    localIntent.setType("image/jpeg");
    startActivity(localIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:28:46.427

经过一周的环顾四周，我找到了它。

```
Intent localIntent = new Intent();                          localIntent.setData(imageURI(position));
setResult(Activity.RESULT_OK, localIntent);
dialog.dismiss();
finish(); 
```

我需要使用**setResult**

# ios - ios opengl es 2.0，当我应用正交时，我的矩形不是正方形

> ID：11605691
> 
> 赞同：0
> 
> 时间：2012-07-23T02:16:26.320
> 
> 标签：ios, opengl-es-2.0, orthographic

我正在学习opengl es 2.0。我正在尝试在 opengl es 2.0 中应用正射投影我画了一个正方形，但实际上我没有在屏幕上得到正方形。而且我不确定我缺少哪一部分。感谢您的帮助！setupRenderingEnv 中有一些我没有发布的方法。但这些方法用于设置框架并且效果很好。并且 m_program 创建得很好。再次感谢您的帮助。

```
// my vertex shader
attribute vec4 Position;
attribute vec4 SourceColor;

uniform mat4 Projection;

varying vec4 DestinationColor;

void main(void)
{
    DestinationColor = SourceColor;
    gl_Position = Projection * Position;
}  

// my drawing file
typedef struct 
{
    float Position[3];
    float Color[4];
}Vertex;

const Vertex Vertices[] =
{
    {{100, -100, 0}, {1, 0, 0, 1}},
    {{100, 100, 0}, {0, 1, 0, 1}},
    {{-100, 100, 0}, {0, 0, 1, 1}},
    {{-100, -100, 0}, {0, 0, 0, 1}}
};

const GLubyte Indices[] =
{
    0, 1, 2,
    2, 3, 0
};

- (void)setupRenderingEnv
{
    [super setupRenderingEnv];
    [self setupVertexBufferObjects];
    [self setupRunLoop];

    [self applyOrthoWithX:self.frame.size.width andY:self.frame.size.height];

    glViewport(0, 0, self.frame.size.width, self.frame.size.height);

}

//-- used for applying ortho in opengl es 2.0
- (void)applyOrthoWithX:(float)maxX andY:(float)maxY
{
    float a = 1.0f / maxX;
    float b = 1.0f / maxY;
    float ortho[16] =
    {
        a, 0, 0, 0,
        0, b, 0, 0,
        0, 0, -1, 0,
        0, 0, 0, 1
    };

    GLint projectionUniform = glGetUniformLocation(super.m_programHandle, "Projection");
    glUniformMatrix4fv(projectionUniform, 1, 0, &ortho[0]);
}

//-- overriding drawCandle. it render image, draw candle
- (void)drawCandle
{
    glClearColor(0, 104.0/255, 55.0/255, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    GLuint positionSlot = glGetAttribLocation(super.m_programHandle, "Position");
    GLuint colorSlot = glGetAttribLocation(super.m_programHandle, "SourceColor");

    glEnableVertexAttribArray(positionSlot);
    glEnableVertexAttribArray(colorSlot);

    glVertexAttribPointer(positionSlot, 3, GL_FLOAT, GL_FALSE, 
                          sizeof(Vertex), 0);
    glVertexAttribPointer(colorSlot, 4, GL_FLOAT, GL_FALSE, 
                          sizeof(Vertex), (GLvoid *)(sizeof(float) *     3));

    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);

    glDisableVertexAttribArray(positionSlot);
    glDisableVertexAttribArray(colorSlot);

    [super drawCandle];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:50:36.843

你的视口是什么形状的？如果不是正方形，那就是问题所在。您正在创建的矩阵 - 按反向宽度和反向高度缩放 ​​- 将使宽度始终为 1 个单位宽，高度为 1 个单位高。如果宽度和高度不是相同的像素数，则正方形不会绘制正方形。您需要考虑视口的纵横比。在我的脑海中，我认为它会更像这样：

```
float ortho [ 16 ] = {
    a / b, 0, 0, 0,
    0, b, 0, 0,
    0, 0, -1, 0,
    0, 0, 0, 1
}; 
```

（我可能有 a/b 倒置 - 不记得了）

# android - 创建一个自定义 GridView，在第一列中包含文本，在其他列中包含图像

> ID：11605693
> 
> 赞同：-2
> 
> 时间：2012-07-23T02:16:32.857
> 
> 标签：android, android-layout

我想`GridView`为 Android 创建一个自定义，该自定义始终在第一列中包含文本，并将其他列保留为图像。例如：

```
Text Text  Text 
Text Image Image
Text Image Image
Text Image Image
Text Image Image
     .....
     .....
Text Image Image 
```

我不知道这是否可能。如果可能，我应该如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:35:22.740

很有可能。您只需要考虑您想要做什么，它适用于何处，然后将代码添加到适当的区域。

例如：

**第 1 步：计算/知道有多少列 通过适当的成员函数调用（** [GridView.getNumColumns](http://developer.android.com/reference/android/widget/GridView.html#getNumColumns%28%29) - 注意您必须 >= API 级别 11 才能使用此调用）来获取`GridView`当前在运行时有 多少列。否则[GridView.setNumColumns](http://developer.android.com/reference/android/widget/GridView.html#setNumColumns%28int%29)将需要在设置中完成。最后一个选项是确定列数应该是多少，并将其设置为或类似。`onMeasure``Overrides`

**第 2 步：编写您的 getView 代码** 在您`getView`选择的适配器中的代码中，您应该能够进行简单的数学运算来确定要做什么。例如：

```
public View getView(int position, View convertView, ViewGroup parent) {
    // Either have numOfColumns saved as a global variable or get it here depending on your method

    // Create your view for the item
    View ret;

    if (position < numOfColumns || position % numOfColumns == 0) { 
        // Aka if first row OR if first column
        TextView tv = new TextView(mContext);

        // Do all your textview formatting etc etc....

        ret = tv;
    } else {
        ImageView iv = new ImageView(mContext);

        // Do all your imageview layout stuff etc etc....

        ret = iv;
    }

    return ret;
} 
```

注意：这纯粹是您的头脑风暴/大声思考，让您开始。您缺少诸如（一种巧妙的内存优化方法，以回收具有不同类型的视图，`Views`如果您`GridView`将滚动）。您还可以考虑创建自定义布局并将其用作您的视图，并根据需要使用上述选择代码对其进行修改。

所以回答你的问题，**是**的，这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:40:33.267

有关自定义网格视图，请参阅本教程

[http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

```
 gridView = (GridView) findViewById(R.id.gridView1);

        gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Toast.makeText(
                   getApplicationContext(),
                   ((TextView) v.findViewById(R.id.grid_item_label))
                   .getText(), Toast.LENGTH_SHORT).show();

            }
        });

public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] mobileValues;

public ImageAdapter(Context context, String[] mobileValues) {
    this.context = context;
    this.mobileValues = mobileValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set value into textview
        TextView textView = (TextView) gridView
                .findViewById(R.id.grid_item_label);
        textView.setText(mobileValues[position]);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String mobile = mobileValues[position];

        if (mobile.equals("Windows")) {
            imageView.setImageResource(R.drawable.windows_logo);
        } else if (mobile.equals("iOS")) {
            imageView.setImageResource(R.drawable.ios_logo);
        } else if (mobile.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.blackberry_logo);
        } else {
            imageView.setImageResource(R.drawable.android_logo);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return mobileValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

} 
```

# css - 无法居中图像

> ID：11605694
> 
> 赞同：2
> 
> 时间：2012-07-23T02:16:35.240
> 
> 标签：css, html, center

我无法将图像居中在`div`. 给定以下标记，如何使图像居中？

html代码如下：

```
<div id='post-area' style='background:#000; padding:20px 0;'>
  <a class='fancybox' rel='group' href='example-big.png'>
    <img src='example.png'  />
  </a>
</div> 
```

css代码如下：

```
#post-area {
  font-size:13px;
  color:#000;
  text-align:left;
  width:450px;
  height:auto;
  font-family:Meera
  clear:both;
  margin-top:20px;
  letter-spacing:normal;
}

#post-area img {
  max-width:250px;
  height:auto;
  float:none;
  margin:0 auto;
} 
```

如果有任何方法可以做到这一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T02:22:53.173

如果您只想将图像水平居中，您可以将 text-align:left 更改为 text-align: center。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T05:44:24.657

**HTML**

```
<div id='post-area' style='background:#000; padding:20px 0;'>
  <a class='fancybox' rel='group' href='example-big.png'>
    <img src='http://blog.spoongraphics.co.uk/wp-content/uploads/2011/colourful-logo/18.jpg'  />
  </a>
</div> 
```

**CSS**

```
#post-area {
  font-size:13px;
  color:#000;
  text-align:center;
  width:450px;
  height:auto;

  font-family:Meera;
  clear:both;
  margin-top:20px;
  letter-spacing:normal;
}

#post-area img {
  max-width:250px;
  height:auto;
  float:none;
  margin:0 auto; 
```

}

看演示：- [http://tinkerbin.com/gWYGnA6m](http://tinkerbin.com/gWYGnA6m)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T02:25:33.677

尝试`text-align:center`在`#post-area`.

这是[您](http://jsfiddle.net/Mnqjj/)使用 center aligned的示例`img`。

# android - 无法在 XML 中设置 ImageView 的 alpha

> ID：11605700
> 
> 赞同：0
> 
> 时间：2012-07-23T02:17:44.153
> 
> 标签：android, android-layout

我正在使用 API 16 进行编译，但支持的最低 API 设置为 8。我试图在 XML 中设置`alpha`一个`ImageView`，但每次我使用

```
<ImageView 
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:alpha="0"
    .
    .
    . /> 
```

AAPT 抱怨 alpha 不是有效属性，即使 android 站点中的文档声明`ImageView's`应该从 View 继承它。

这是一个错误，或者这真的是它应该如何工作的。我会设置可见性，但这不适用于我的动画来显示和隐藏图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:22:18.573

是的。你说你的最小值是 8。但是，视图的 alpha xml 属性直到 API 级别 11 才会出现。

[http://developer.android.com/reference/android/view/View.html#setAlpha(float](http://developer.android.com/reference/android/view/View.html#setAlpha(float) )

# mysql - 如何在 MySQL 中将现有列更改为默认插入时的当前时间？

> ID：11605701
> 
> 赞同：3
> 
> 时间：2012-07-23T02:17:45.380
> 
> 标签：mysql, timestamp, default, alter

我正在尝试将现有列“time_sent”更改为插入期间的默认时间。我的 SQL 是：

```
ALTER TABLE `email_history` alter `time_sent` set DEFAULT CURRENT_TIMESTAMP 
```

我收到了这个错误：

```
 MySQL said: 
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CURRENT_TIMESTAMP' at line 1 
```

我已经阅读了文档和其他（类似但不完全相同的）示例，但没有运气。

我相信我的 MySQL 版本是 5.0.67。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:24:55.543

它应该是 ..

```
ALTER TABLE 'table' MODIFY collumn_1 TIMESTAMP DEFAULT CURRENT_TIMESTAMP; 
```

# git - git 查找重复提交（通过 patch-id）

> ID：11605703
> 
> 赞同：11
> 
> 时间：2012-07-23T02:17:59.380
> 
> 标签：git, duplicates, commit

我想要一个查找重复更改的方法。patch-id 可能相同，但提交属性可能不同。

这似乎是 patch-id 的预期用途：

> git patch-id --help
> 
> IOW，您可以使用这个东西来寻找可能的重复提交。

我想将“git log”、“git patch-id”和 uniq 串在一起可能会做得很糟糕，但是如果有人有一个可以很好地完成工作的命令，我会很感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T07:31:06.077

因为重复的更改可能不在同一个分支上（除非它们之间有还原），您可以使用[git cherry](http://git-scm.com/docs/git-cherry)：

```
git cherry [-v] [<upstream> [<head> [<limit>]]] 
```

检查. `upstream`_`head`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-03T21:08:50.897

要查找特定提交的重复项，这可能对您有用。

首先，确定目标提交的补丁 id：

```
$ THE_COMMIT_REF_OR_SHA_YOURE_SEEKING_DUPES_OF='7a3e67c'
$ git show $THE_COMMIT_REF_OR_SHA_YOURE_SEEKING_DUPES_OF | git patch-id
f6ea51cd6acd30cd627ce1a56e2733c1777d5b52 7a3e67ce38dbef471889d9f706b9161da7dc5cf3 
```

第一个 SHA 是补丁 ID。接下来，列出每个提交的补丁 ID 并过滤掉任何匹配的内容：

```
$ for c in $(git rev-list --all); do git show $c | git patch-id; done | grep 'f6ea51cd6acd30cd627ce1a56e2733c1777d5b52'
f6ea51cd6acd30cd627ce1a56e2733c1777d5b52 5028e2b5500bd5f4637531e337e17b73f5d0c0b1
f6ea51cd6acd30cd627ce1a56e2733c1777d5b52 7a3e67ce38dbef471889d9f706b9161da7dc5cf3
f6ea51cd6acd30cd627ce1a56e2733c1777d5b52 929c66b5783a0127a7689020d70d398f095b9e00 
```

总之，带有一些额外的标志，并以[实用程序脚本](https://gist.github.com/capnslipp/d0ac4dd125d66b6f42ed)的形式：

```
test ! -z "$1" && TARGET_COMMIT_SHA="$1" || TARGET_COMMIT_SHA="HEAD"

TARGET_COMMIT_PATCHID=$(
git show --patch-with-raw "$TARGET_COMMIT_SHA" |
    git patch-id |
    cut -d' ' -f1
)
MATCHING_COMMIT_SHAS=$(
for c in $(git rev-list --all); do
    git show --patch-with-raw "$c" |
        git patch-id
done |
    fgrep "$TARGET_COMMIT_PATCHID" |
    cut -d' ' -f2
)

echo "$MATCHING_COMMIT_SHAS" 
```

用法：

```
$ git list-dupe-commits 7a3e67c
5028e2b5500bd5f4637531e337e17b73f5d0c0b1
7a3e67ce38dbef471889d9f706b9161da7dc5cf3
929c66b5783a0127a7689020d70d398f095b9e00 
```

它的速度不是特别快，但对于大多数 repos 来说应该可以完成工作*（对于 2.4GHz Core 2 Duo 上具有 826 次提交和 158MB .git 目录的 repo 只测量了 36 秒）*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T04:30:30.447

我有一个适用于玩具存储库的草稿，但是由于它将补丁->提交映射保留在内存中，因此在大型存储库中可能会出现问题：

```
# print commit pairs with the same patch-id
for c in $(git rev-list HEAD); do \
    git show $c | git patch-id; done \
| perl -anle '($p,$c)=@F;print "$c $s{$p}" if $s{$p};$s{$p}=$c' 
```

输出应该是具有相同补丁 ID 的提交对（3 个重复的 ABC 出现为“A B”然后是“B C”）。

更改 git rev-list 命令以限制检查的提交：

```
git log --format=%H HEAD somefile 
```

附加“| xargs git show”以查看提交的详细信息，或附加“| xargs git show -s --oneline”以获取摘要：

```
0569473 add 6-8
5e56314 add 6-8 again
bece3c3 comment
e037ed6 add comment again 
```

事实证明，patch-id 在我原来的情况下不起作用，因为后来的提交中有额外的变化。“git log -S”更有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-30T01:49:31.050

要搜索 commit 的重复提交`$hash`，不包括合并提交：

```
git rev-list --no-merges --all | xargs -r git show | git patch-id \
    | grep ^$(git show $hash|git patch-id|cut -c1-40) | cut -c42-80 \
    | xargs -r git show -s --oneline 
```

要搜索合并提交的副本`$mergehash`，请将`$(git show $hash|git patch-id|cut -c1-40)`上面替换为由 给出的两个补丁 ID（第一列）之一`git diff-tree -m -p $mergehash | git patch-id`。它们对应于合并提交与其两个父级中的每一个的差异。

要查找所有提交的重复项，不包括合并提交：

```
git rev-list --no-merges --all | xargs -r git show | git patch-id \
    | sort | uniq -w40 -D | cut -c42-80 \
    | xargs -r git log --no-walk --pretty=format:"%h %ad %an (%cn) %s" --date-order --date=iso 
```

可以通过将参数更改为 来扩展或限制重复提交的搜索，该参数`git rev-list`接受许多选项。例如，要将搜索限制为特定分支，请指定其名称而不是选项`--all`；或在最后 100 次提交中搜索传递参数`HEAD ^HEAD~100`。

请注意，这些命令速度很快，因为它们不使用 shell 循环和批处理提交。

要包括合并提交，请删除选项`--no-merges`，并替换`xargs -r git show`为`xargs -r -L1 git diff-tree -m -p`. 这要慢得多，因为`git diff-tree`每次提交执行一次。

解释：

*   第一行生成带有提交哈希的补丁 ID 映射（2 列数据，每列 40 个字符）。

*   第二行仅保留与重复补丁 ID（第一列）相对应的提交哈希（第二列）。

*   最后一行打印有关重复提交的自定义信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-28T12:26:11.033

[bsb](https://stackoverflow.com/users/1462529/bsb)建议的漂亮命令需要一些小的调整：

(1)命令应该使用而不是`git show`, which runs`git diff-tree --cc`

```
 git diff-tree -p 
```

否则会`git patch-id`生成虚假的空 SHA1 哈希。

(2) 使用管道时`xargs`，`xargs`应有`-L 1`参数。否则，三重提交将不会与等效提交配对。

这是一个别名`~/.gitconfig`：

```
dup = "!f() { for c in $(git rev-list HEAD); do git diff-tree -p $c | git patch-id; done | perl -anle '($p,$c)=@F;print \"$c $s{$p}\" if $s{$p};$s{$p}=$c' | xargs -L 1 git show -s --oneline; }; f" # "git dup" lists duplicate commits 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-17T16:07:35.357

对于任何想在 windows powershell 上执行此操作的人，unagi 答案的等效命令是：

```
git rev-list --no-merges --all  | %{&git.exe show $_} | 
  git patch-id | ConvertFrom-String -PropertyNames PatchId, Commit | 
  Group-Object PatchId | Where-Object count -gt 1 | 
  %{$_.group.Commit + " "} 
```

给出如下输出：

```
1605e0e1e13d7b3f456c20432d8edec664ca7117
1e8efa8f2f01962a2c08fd25caf687d330383428

b45b6db084b27ae420ac8e9cf6511110ebb46513
4a2e1e3ba5a9a1d5db1d00343813e1404f6124e2 
```

将重复的提交哈希分组在一起。

注意：在我的 repo 中，这是一个缓慢的命令，因此请务必适当过滤对 rev-list 的调用！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-31T16:10:39.483

确保使用最新版本的 Git

[OP bsb](https://stackoverflow.com/users/1462529/bsb)的[答案](https://stackoverflow.com/a/11642739/6309)`git log --format=%H`提到的并不总是唯一的。

这是因为，在 Git 2.29（2020 年第四季度）之前，patch-id 计算并没有忽略空格等“不完整的最后一行”标记。

请参阅[René Scharfe ( ) 的](https://github.com/rscharfe)[提交 82a6201](https://github.com/git/git/commit/82a62015a7b55a56f779b9ddfb98a3b0552d2bb4)（2020 年 8 月 19 日[）](https://github.com/rscharfe)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5122614](https://github.com/git/git/commit/51226147d16d59243957cb3bc1b2313f9f740725))^(中，2020 年 8 月 24 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

> ## [`patch-id`](https://github.com/git/git/commit/82a62015a7b55a56f779b9ddfb98a3b0552d2bb4): 忽略文件末尾的换行符`diff_flush_patch_id()`
> 
> ^(报告人：Tilman Vogel)
> ^(初始测试人：Tilman Vogel)
> ^(签字人：René Scharfe)

> 计算补丁 ID 时忽略空格。
> 这是通过在散列它们之前从差异行中删除所有空格来完成的，包括文件末尾的换行符。
> **但是，如果缺少该换行符，则 diff 在包含“\文件末尾没有换行符\n”的单独行中报告该事实，并且该标记像上下文行一样被散列。**
> 
> 这违背了我们使补丁 ID 独立于空格的目标。
> 
> 使用与添加到^( ^([man](https://git-scm.com/docs/git-patch-id)) ^()的)[2485eab55cc](https://github.com/git/git/commit/2485eab55cc0dcab34311ecd0ac52038aa9d9db4) (git-patch-id: 不要跳过“无换行符”标记，2011-02-17)相同的启发式方法，并跳过以反斜杠和空格开头且更长的差异行超过十二个字符。[`git patch-id`](https://github.com/git/git/blob/82a62015a7b55a56f779b9ddfb98a3b0552d2bb4/Documentation/git-patch-id.txt)

# heroku - SHARED_DATABASE (DATABASE_URL) ----备份---> 错误！在创建新备份之前必须删除备份

> ID：11605704
> 
> 赞同：38
> 
> 时间：2012-07-23T02:18:51.607
> 
> 标签：heroku

嗨我该怎么办我无法从heroku捕获备份

我正在使用共享数据库

它总是显示...

SHARED_DATABASE (DATABASE_URL) ----备份---> 错误

！在创建新备份之前必须删除备份

如何删除最近的备份？

谢谢你。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-11T00:34:59.767

```
heroku pgbackups:capture --expire 
```

这将创建备份:)

> --expire 自动删除最旧的现有手动备份

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-25T07:47:05.030

您可以列出备份

```
heroku pgbackups 
```

然后通过输入它的 ID 删除一个

```
heroku pgbackups:destroy b003 
```

更多信息可以在[这里](https://devcenter.heroku.com/articles/pgbackups)找到。

# facebook-graph-api - 公众见解

> ID：11605713
> 
> 赞同：2
> 
> 时间：2012-07-23T02:21:10.873
> 
> 标签：facebook-graph-api, facebook-fql, facebook-insights

有了新的能力，任何人都可以在没有管理员权限的情况下从页面中查看某些见解，我很好奇这是否扩展到了图形 API，特别是关于粉丝增长的图表。如果您将鼠标悬停在数据点上，它会告诉您新粉丝/该特定时间点的 7 天——有没有办法使用 fql 或常规图形 api 自动查询？

我曾尝试`SELECT metric, value FROM insights WHERE object_id = 224383614973 AND metric = 'page_fan_adds' AND end_time=1342915199 AND period=86400`查询麦当劳加拿大新粉丝一天的时间，但它需要有效的 access_token。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:59:30.683

很抱歉回复晚了，但它可能会对某人有所帮助。您可以使用图形资源管理器来构建您的 FQL 查询：

[https://developers.facebook.com/tools/explorer/?method=GET&path=CocaColaCanada%2Finsights](https://developers.facebook.com/tools/explorer/?method=GET&path=CocaColaCanada%2Finsights)

`page`开始时的所有指标`page_`也可以在这里找到： [https ://developers.facebook.com/docs/reference/api/insights/#page_stories](https://developers.facebook.com/docs/reference/api/insights/#page_stories)

其中一些是不公开的。 **在所有情况下**，您都需要有效`access_token`

**更新：**

我使用 facebook 提供的 233 个指标为 macdonald 运行了一个脚本，以查看哪些是页面的公共指标。结果如下：

# 麦当劳（233 个指标）

*   application_active_users：没有
*   application_active_users_locale：没有
*   application_active_users_city：没有
*   application_active_users_country：没有
*   application_active_users_gender：没有
*   application_active_users_age：没有
*   application_active_users_gender_age：没有
*   application_installed_users：没有
*   application_installed_users_locale：没有
*   application_installed_users_city：没有
*   application_installed_users_country：没有
*   application_installed_users_gender：没有
*   application_installed_users_age：没有
*   application_installed_users_gender_age：没有
*   application_installation_adds：没有
*   application_installation_adds_unique：没有
*   application_installation_removes：没有
*   application_installation_removes_unique：没有
*   application_tos_views：没有
*   application_tos_views_unique：没有
*   application_permission_views_top：没有
*   application_permission_views_top_unique：没有
*   application_permission_grants_top：没有
*   application_permission_grants_top_unique：没有
*   application_block_adds：没有
*   application_block_adds_unique：没有
*   application_block_removes：没有
*   application_block_removes_unique：没有
*   application_mobile_app_installs：没有
*   application_like_adds：没有
*   application_like_adds_unique：没有
*   application_like_removes：没有
*   application_like_removes_unique：没有
*   application_comment_adds：没有
*   application_comment_adds_unique：没有
*   应用程序照片：没有
*   application_photos_unique：没有
*   application_shares：没有
*   application_shares_unique：没有
*   application_status_updates：没有
*   application_status_updates_unique：没有
*   应用程序流故事：没有
*   application_stream_stories_unique：没有
*   application_feed_form_views：没有
*   application_feed_form_views_unique：没有
*   application_feed_form_views_login：没有
*   application_feed_form_views_login_unique：没有
*   application_feed_form_views_logout：没有
*   application_widget_activity_views：没有
*   application_widget_activity_views_unique：没有
*   application_widget_activity_views_login：没有
*   application_widget_activity_views_login_unique：没有
*   application_widget_activity_views_logout：没有
*   application_widget_activity_views_external_referrals：没有
*   application_widget_comments_views：没有
*   application_widget_comments_views_unique：没有
*   application_widget_comments_views_login：没有
*   application_widget_comments_views_login_unique：没有
*   application_widget_comments_views_logout：没有
*   application_widget_fan_views：没有
*   application_widget_fan_views_unique：没有
*   application_widget_fan_views_login：没有
*   application_widget_fan_views_login_unique：没有
*   application_widget_fan_views_logout：没有
*   application_widget_fan_views_external_referrals：没有
*   application_widget_like_views：没有
*   application_widget_like_views_unique：没有
*   application_widget_like_views_login：没有
*   application_widget_like_views_login_unique：没有
*   application_widget_like_views_logout：没有
*   application_widget_like_views_external_referrals：没有
*   application_widget_live_stream_views：没有
*   application_widget_live_stream_views_unique：没有
*   application_widget_live_stream_views_login：没有
*   application_widget_live_stream_views_login_unique：没有
*   application_widget_live_stream_views_logout：没有
*   application_widget_live_stream_views_external_referrals：没有
*   application_widget_recommendation_views：没有
*   application_widget_recommendation_views_unique：没有
*   application_widget_recommendation_views_login：没有
*   application_widget_recommendation_views_login_unique：没有
*   application_widget_recommendation_views_logout：没有
*   application_widget_recommendation_views_external_referrals：没有
*   application_widget_share_views：没有
*   application_widget_share_views_unique：没有
*   application_widget_views：没有
*   application_widget_views_unique：没有
*   application_widget_views_login：没有
*   application_widget_views_login_unique：没有
*   application_widget_views_logout：没有
*   application_opengraph_action_create：没有
*   application_opengraph_action_delete：没有
*   application_opengraph_object_create：没有
*   application_opengraph_object_update：没有
*   application_opengraph_story_impressions：没有
*   application_opengraph_story_click：没有
*   application_opengraph_story_like：没有
*   application_opengraph_story_unlike：没有
*   application_opengraph_story_comment：没有
*   application_opengraph_story_hide：没有
*   application_opengraph_story_hide_all：没有
*   application_opengraph_story_report_spam：没有
*   application_opengraph_link_impression：没有
*   application_opengraph_link_click：没有
*   application_opengraph_timeline_impressions：没有
*   application_opengraph_timeline_spam：没有
*   application_opengraph_timeline_clicked：没有
*   application_canvas_views：没有
*   application_canvas_views_unique：没有
*   application_canvas_views_login：没有
*   application_canvas_views_login_unique：没有
*   application_canvas_views_logout：没有
*   application_canvas_views_internal_referrals：没有
*   application_canvas_views_external_referrals：没有
*   application_tab_views：没有
*   application_tab_views_unique：没有
*   application_api_calls：没有
*   application_api_calls_top：没有
*   application_api_calls_unique：没有
*   application_api_errors：没有
*   application_api_errors_rate：没有
*   application_api_errors_top：没有
*   application_api_time_average：没有
*   application_canvas_errors：没有
*   application_canvas_errors_rate：没有
*   application_canvas_time_average：没有
*   page_fans_locale：没有
*   page_fans_city：没有
*   page_fans_country：**好的**
*   page_fans_gender_age：没有
*   page_fan_adds：没有
*   page_fan_adds_unique：没有
*   page_fans_by_like_source：没有
*   page_fans_by_like_source_unique：没有
*   page_fan_removes：没有
*   page_fan_removes_unique：没有
*   page_friends_of_fans：没有
*   page_tab_views_login_top_unique：没有
*   page_tab_views_login_top：没有
*   page_views：没有
*   page_views_unique：没有
*   page_views_login：没有
*   page_views_login_unique：没有
*   page_views_logout：没有
*   page_views_external_referrals：没有
*   page_posts_impressions：没有
*   page_posts_impressions_unique：没有
*   page_posts_impressions_paid：没有
*   page_posts_impressions_paid_unique：没有
*   page_posts_impressions_organic：没有
*   page_posts_impressions_organic_unique：没有
*   page_posts_impressions_viral：没有
*   page_posts_impressions_viral_unique：没有
*   page_posts_impressions_frequency_distribution：没有
*   post_stories: 没有
*   post_storytellers：没有
*   post_stories_by_action_type：没有
*   post_storytellers_by_action_type：没有
*   post_impressions: 没有
*   post_impressions_unique: 没有
*   post_impressions_paid：没有
*   post_impressions_paid_unique: 没有
*   post_impressions_fan: 没有
*   post_impressions_fan_unique: 没有
*   post_impressions_fan_paid：没有
*   post_impressions_fan_paid_unique：没有
*   post_impressions_organic：没有
*   post_impressions_organic_unique：没有
*   post_impressions_viral：没有
*   post_impressions_viral_unique：没有
*   post_impressions_by_story_type：没有
*   post_impressions_by_story_type_unique：没有
*   post_consumptions: 没有
*   post_consumptions_unique：没有
*   post_consumptions_by_type：没有
*   post_consumptions_by_type_unique：没有
*   post_engaged_users：没有
*   post_negative_feedback：没有
*   post_negative_feedback_unique：没有
*   post_negative_feedback_by_type：没有
*   post_negative_feedback_by_type_unique：没有
*   domain_feed_clicks：没有
*   domain_feed_views：没有
*   域故事：没有
*   domain_widget_comments_adds：没有
*   domain_widget_comments_views：没有
*   domain_widget_comments_feed_views：没有
*   domain_widget_comments_feed_clicks：没有
*   domain_widget_like_views：没有
*   domain_widget_likes: 没有
*   domain_widget_like_feed_views：没有
*   domain_widget_like_feed_clicks：没有
*   domain_widget_send_views：没有
*   domain_widget_send_clicks：没有
*   domain_widget_send_inbox_views：没有
*   domain_widget_send_inbox_clicks：没有
*   page_stories: 没有
*   page_storytellers：没有
*   page_stories_by_story_type：没有
*   page_storytellers_by_story_type：没有
*   page_storytellers_by_age_gender：没有
*   page_storytellers_by_country：**好的**
*   page_storytellers_by_locale：没有
*   page_impressions: 没有
*   page_impressions_unique：没有
*   page_impressions_paid：没有
*   page_impressions_paid_unique：没有
*   page_impressions_organic：没有
*   page_impressions_organic_unique：没有
*   page_impressions_viral：没有
*   page_impressions_viral_unique：没有
*   page_impressions_by_story_type：没有
*   page_impressions_by_story_type_unique：没有
*   page_impressions_by_city_unique：没有
*   page_impressions_by_age_gender_unique：没有
*   page_impressions_frequency_distribution：没有
*   page_impressions_viral_frequency_distribution: 没有
*   page_engaged_users：没有
*   page_consumptions：没有
*   page_consumptions_unique：没有
*   page_consumptions_by_consumption_type：没有
*   page_consumptions_by_consumption_type_unique：没有
*   page_places_checkin_total：没有
*   page_places_checkin_total_unique：没有
*   page_places_checkin_mobile：没有
*   page_places_checkin_mobile_unique：没有
*   page_places_checkins_by_age_gender：没有
*   page_places_checkins_by_locale：没有
*   page_places_checkins_by_country：没有
*   page_negative_feedback：没有
*   page_negative_feedback_unique：没有
*   page_negative_feedback_by_type：没有
*   page_negative_feedback_by_type_unique：没有

开始于：2013-04-17 02:14:29 结束于：2013-04-17 02:17:13 秒过去：164s

在此处输入代码

# php - 将数组插入数据库 Yii

> ID：11605718
> 
> 赞同：1
> 
> 时间：2012-07-23T02:21:20.973
> 
> 标签：php, yii

我想在 MYSQL 数据库中插入一个数组，最好使用 Yii 的活动记录。

例如，我有一个数组：

```
User = array(
    fname => "Joe"
    lname => "Schmidt"
) 
```

在我的数据库中有一个用户表，其中包含 id、fname 和 lname 列。其中一个选项是创建一个对象并执行：

```
$user = new User;
$user->fname = User['fname'];
$user->lname = User['lname'];
$user->save(); 
```

但是，对于这种通用功能，这似乎是很多代码。有没有办法将数组插入到数据库中，其中数组键与相应的列匹配，而无需我编写自己的函数或进行一些 SQL 查询破解？理想情况下，它使用 Yii 已经存在的 Active 记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:45:41.787

您想要做的是由框架本身处理。

您可以像这样批量分配：

```
$user->attributes=$_POST['User']; 
```

阅读有关[批量分配的更多信息](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:31:43.313

我以前从未使用过 Yii，所以我无法提供使用它的解决方案，但您可以序列化数组并将其存储在数据库的单个单元格中，如下所示：

```
$user = array("fname" => "Joe", "lname" => "Schmidt");
$serialized = serialize($user);

//Store the $serialized variable in the database 
```

当您准备好访问它时：

```
//Get your data from the database

$unserialized = unserialize($usersFromDB);
$fname = $unserialized['fname']; //Joe 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T03:10:47.537

该功能非常简单，试试这个：

```
 function insert($table, $fields_values = array())
  {
    $q1 = join(",", array_keys($fields_values));

    $q2 = "'".join("','", array_values($fields_values))."'";

    $query = "INSERT INTO $table($q1) VALUES($q2)";

    // do your DB insert here
  } 
```

主要技巧是使用join和array_keys / array_values进行数组到查询转换。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T03:39:39.583

根据数组中的数据量，您可以编写自己的函数，例如

a) 检查这个[backUpdate](http://www.yiiframework.com/doc/guide/1.1/en/form.table)，修改它以插入/删除渲染视图选项

b) 关注这个[话题](http://www.yiiframework.com/forum/index.php/topic/1046-database-insert-array/)

c)插入多条记录时可能出现的[陷阱](http://www.yiiframework.com/forum/index.php/topic/19123-insert-multiple-record-in-a-table/)

d) 检查这个相关[的 SOQ](https://stackoverflow.com/questions/7048144/how-do-you-insert-multiple-records-into-a-table-at-the-same-time)

如果你知道你在做什么很容易做，你只需要照顾好

*   验证
*   关联表中存在记录（如果涉及 FKey）
*   选项 d)。如果您有简单的插入（没有关联的表），这将是一个可能的答案

# combobox - 使用组合框 C++ 更改 rectangleShape

> ID：11605719
> 
> 赞同：0
> 
> 时间：2012-07-23T02:21:23.477
> 
> 标签：combobox, c++-cli

我在 VisualStudio 2010 中使用 C++。我有一个带有组合框的表单，其中列出了一堆不同的项目，Box1、Box2、Box3、Box4、ETC ......我有一堆名为 Box1、Box2、Box3 的矩形形状,Box4, ETC... 当我在组合框中选择其中一个名称时，我试图使互补的 rectangleShape 的填充颜色从白色变为黑色。

这是我在 comboBox1_SelectedIndexChanged 事件下的代码

```
String^ x = comboBox1->SelectedItem->ToString();  *// x=name of the rectangleShape*
x->FillColor = System::Drawing::Color::Black; 
```

但是 C++ 一直将字符串变量 x 视为字符串。我试图让上面的代码和这段代码一样工作，

```
Box1->FillColor = System::Drawing::Color::Black; 
```

如何让 C++ 看到存储在 x 内的字符串作为 rectangleShape 的名称？

# ios - UISearchBar 取消按钮不重新加载原始数组

> ID：11605720
> 
> 赞同：1
> 
> 时间：2012-07-23T02:21:23.533
> 
> 标签：ios, xcode, uitableview, searchbar

我有一个基于 TableView 的应用程序，其中包含一个 UISearchBarDelegate。该应用程序按预期工作。表格视图与 UISearchBar 一起显示所有数据。在搜索字段中输入文本时，列表会缩小以匹配输入的文本。

我遇到的问题是，当我单击取消按钮时，键盘会按原样消失，但不会返回原始数组......它仍然会显示搜索到的项目。

在我的 searchBarCancelButtonClicked 部分，我有以下代码：

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)SearchBar 
{
    SearchBar.text = nil;

    [SearchBar resignFirstResponder];

    [tableView reloadData];
} 
```

我会假设`[tableView reloadData]`当单击取消按钮时该部分应该重新加载原始数组中的数据，但它不会这样做。关于我在这里可能做错了什么的任何想法？

另外，这是我的 cellForRowAtIndexPath。与其他示例相比，似乎我做的事情是正确的……没有什么明显的突出之处。

```
-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath     *)indexPath {

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyIndentifier"];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

}

StateDetail *cd;
if(isFiltered)
    cd = [self.searchStates objectAtIndex:indexPath.row];
else 
    cd = [self.listOfStates objectAtIndex:indexPath.row];

cell.textLabel.text = cd.stateName;

return cell;
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:02:40.757

我怀疑问题出在您生成表格结果的方式上。您是否使用临时（过滤）数组来存储用户运行搜索时的数据？查看您的 cellForRowAtIndexPath 方法等会很有帮助。

第一个建议：确保所有的 tableView 委托方法都检查用户是否在搜索。例如，您可以根据需要设置一个 BOOL userSearching，然后每次检查用户是否正在搜索。然后，您可以从正确的数组中选择您的单元格（如果您使用两个，如上所述）。

第二个建议：使用 SearchDisplayController，而不是独立的搜索栏。它为您处理大部分功能。如果你使用这个策略，那么你可以检查用户是否在像 cellForRowAtIndexPath 这样的方法中搜索：

```
if (tableView == self.searchDisplayController.tableView)... {
    //user is searching, so act appropriately
} else {
    //user is not searching...
} 
```

（这里，tableView 是传递给该方法的局部变量。我正在从内存中编写该代码，因此对任何错误表示歉意。）

如果您需要对这些策略中的任何一个进行更多说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T07:58:26.303

尝试这个：：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {

    isSearching = YES;

    self.searchBar.showsCancelButton = YES;

    for (UIView *subView in searchBar.subviews) {
        if ([subView isKindOfClass:[UIButton class]]) {
            UIButton *cancelButton = (UIButton*)subView;

            [cancelButton setTitle:@"hi" forState:UIControlStateNormal];
        }
    }
    self.searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    UITextField *textField = [self.searchBar valueForKey:@"_searchField"];

    textField.clearButtonMode = UITextFieldViewModeNever;

}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    NSLog(@"Text change - %d",isSearching);

    for (UIView *subview in searchBar.subviews)
    {
        if ([subview conformsToProtocol:@protocol(UITextInputTraits)])
        {
            [(UITextField *)subview setClearButtonMode:UITextFieldViewModeNever];
        }
    }
    //Remove all objects first.
    [filteredContentList removeAllObjects];

    if([searchText length] != 0) {
        isSearching = YES;
      //  [self searchTableList];

        if([searchBar.placeholder isEqualToString:@"Search by course name"]){
        NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"courseName CONTAINS[cd] %@",_searchBar.text];

        filteredContentList = [[listArray filteredArrayUsingPredicate:resultPredicate] mutableCopy];
        }
       else  if([searchBar.placeholder isEqualToString:@"Search by category name"]){
            NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"category CONTAINS[cd] %@",_searchBar.text];

            filteredContentList = [[listArray filteredArrayUsingPredicate:resultPredicate] mutableCopy];
        }

    }
    else {
        isSearching = NO;
       // [searchBar resignFirstResponder];

    }
  //  [self.tableView reloadData];
  //  [searchBar resignFirstResponder];

    [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];

}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    NSLog(@"Cancel clicked");
    self.searchBar.text=@"";
    [searchBar resignFirstResponder];
    isSearching=NO;
     [self.tableView reloadData];

}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    NSLog(@"Search Clicked");
   // [self searchTableList];
   //

    [self.tableView reloadData];
[searchBar resignFirstResponder];

} 
```

这里“isSearching”是布尔值，“listArray”是初始数组，“filteredContentList”是搜索数组。

# c++ - Qt 服务器客户端代码

> ID：11605725
> 
> 赞同：0
> 
> 时间：2012-07-23T02:22:34.203
> 
> 标签：c++, linux, qt, sockets

我是 QT 编程的新手。我的服务器/客户端代码非常简单，但它们不起作用.......

请看看我的代码中的问题，谢谢。

服务器：

```
int main(int argc, char** argv)
{
//  QApplication app(argc, argv);
//      Server server;
        QTcpSocket *client_sock =  NULL;
        QTcpServer server;
        server.listen(QHostAddress::Any,8888);
        char buff[100];

    while(1)
    {
            if(server.hasPendingConnections())
            {
                    client_sock = server.nextPendingConnection();
            }
            if(client_sock)
            {
                    qint64 n_rtn;
                    n_rtn = client_sock->bytesAvailable();
                    client_sock->readLine(buff,n_rtn);
                    std::cout<<buff;
            }
    }
//  return app.exec();
} 
```

客户：

```
int main(int argc, char** argv)
{
//  QApplication app(argc, argv);
  QTcpSocket client;
  QHostAddress addr("127.0.0.1");
  client.connectToHost(addr,8888);

  if(client.isWritable())
  {
        client.write("Hello World!\n");
  }

  client.close();

//  return app.exec();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:19:26.833

没有 QApplication 或 QCoreApplication 和 app.exec() 什么都行不通。这就是运行处理所有键盘/鼠标/网络事件的事件循环。

查看聊天和幸运饼干[网络服务器示例](http://doc.qt.nokia.com/4.7-snapshot/examples-network.html)以了解如何执行此操作 - 它几乎与您编写的代码一样简单

# php - IE9 CSS3 下拉菜单，错误错误错误

> ID：11605727
> 
> 赞同：0
> 
> 时间：2012-07-23T02:22:45.497
> 
> 标签：php, html, css

在我要求继续之前，请记住，我才刚刚回到 Web 开发领域，自从我每天使用 HTML 以来已经快 8 年了。

我目前正在创建一个[网站](http://www.agradedemo.com)

我正在使用 CSS3 下拉菜单，我对其进行了一些调整以适应（颜色、宽度等）这是 CSS 代码：

```
 #cssmenu{ height:37px; display:block; padding:0; margin: 0;  border:1px solid; border-radius:5px; } 
#cssmenu > ul {list-style:inside none; padding:0; margin:0;} 
#cssmenu > ul > li {list-style:inside none; padding:0; margin:0; float:left; display:block; position:relative;} 
#cssmenu > ul > li > a{ outline:none; display:block; position:relative; padding:12px 20px; font:bold 13px/100% Arial, Helvetica, sans-serif; text-align:center; text-decoration:none; text-shadow:1px 1px 0 rgba(0,0,0, 0.4); } 
#cssmenu > ul > li:first-child > a{border-radius:5px 0 0 5px;} 
#cssmenu > ul > li > a:after{ content:''; position:absolute; border-right:1px solid; top:-1px; bottom:-1px; right:-2px; z-index:99; } 
#cssmenu ul li.has-sub:hover > a:after{top:0; bottom:0;} 
#cssmenu > ul > li.has-sub > a:before{ content:''; position:absolute; top:18px; right:6px; border:5px solid transparent; border-top:5px solid #fff; } 
#cssmenu > ul > li.has-sub:hover > a:before{top:19px;} 
#cssmenu ul li.has-sub:hover > a{ background:#3f3f3f; border-color:#3f3f3f; padding-bottom:13px; padding-top:13px; top:-1px; z-index:999; } 
#cssmenu ul li.has-sub:hover > ul, #cssmenu ul li.has-sub:hover > div{display:block;} 
#cssmenu ul li.has-sub > a:hover{background:#3f3f3f; border-color:#3f3f3f;} 
#cssmenu ul li > ul, #cssmenu ul li > div{ display:none; width:auto; position:absolute; top:38px; padding:10px 0; background:#3f3f3f; border-radius:0 0 5px 5px; z-index:999; } 
#cssmenu ul li > ul{width:200px;} 
#cssmenu ul li > ul li{display:block; list-style:inside none; padding:0; margin:0; position:relative;} 
#cssmenu ul li > ul li a{ outline:none; display:block; position:relative; margin:0; padding:8px 20px; font:10pt Arial, Helvetica, sans-serif; color:#fff; text-decoration:none; text-shadow:1px 1px 0 rgba(0,0,0, 0.5); } 

#cssmenu, #cssmenu > ul > li > ul > li a:hover{ background:#333333; background:-moz-linear-gradient(top, #333333 0%, #222222 100%); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#333333), color-stop(100%,#222222)); background:-webkit-linear-gradient(top, #333333 0%,#222222 100%); background:-o-linear-gradient(top, #333333 0%,#222222 100%); background:-ms-linear-gradient(top, #333333 0%,#222222 100%); background:linear-gradient(top, #333333 0%,#222222 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#222222',GradientType=0 ); } 
#cssmenu{border-color:#000;} 
#cssmenu > ul > li > a{border-right:1px solid #000; color:#fff;} 
#cssmenu > ul > li > a:after{border-color:#444;} 
#cssmenu > ul > li > a:hover{background:#111;} 
```

这是相关的 header.php （我使用的是 PHP 包含）：

```
<div id='cssmenu'> <ul>    <li class='active '><a href='index.php'><span>Home</span></a></li>    <li><a href='about.php'><span>About</span></a></li>    <li class='has-sub '><a href='#'><span>Services</span></a>
      <ul>
         <li><a href='resdemo.php'><span>Residential Demolition</span></a></li>
         <li><a href='comdemo.php'><span>Commercial Demolition</span></a></li>
         <li><a href='partdemo.php'><span>Partial Demolition</span></a></li>
         <li><a href='excavate.php'><span>Excavation and Bobcat Jobs</span></a></li>
         <li><a href='asbestos.php'><span>Asbestos Removal</span></a></li>
         <li><a href='bins.php'><span>Bin Hire</span></a></li>
         <li><a href='internal.php'><span>Internal Strip Outs</span></a></li>
         <li><a href='concrete.php'><span>Concrete and Pavement Removal</span></a></li>
         <li><a href='trees.php'><span>Vegetation and Tree Removal</span></a></li>
      </ul>    </li>    <li><a href='/gallery/index.php' target='new'><span>Gallery</span></a></li>    <li><a href='quote.php'><span>Free Quote</span></a></li>    <li><a href='contact.php'><span>Contact</span></a></li> </ul>    </div> 
```

任何帮助将不胜感激，因为此菜单最近已成为常见请求。顺便说一句，我尝试过使用在线 css 验证器工具，但没有任何区别，只是去掉了菜单渐变（仅在 Chrome 和 Firefox 中可见）

谢谢，安吉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:16:47.723

[这](http://jsfiddle.net/g8WUA/)是一个跨浏览器兼容的水平导航菜单（带下拉子导航）。

虽然它没有渐变。对于跨浏览器渐变，请查看[CSS3 PIE](http://css3pie.com/)。

您可以使用渐变播放，然后获取 CSS 并将其添加到您的菜单中。

# ios - 在单个应用程序中添加并导航到新视图

> ID：11605731
> 
> 赞同：1
> 
> 时间：2012-07-23T02:23:24.270
> 
> 标签：ios, uinavigationcontroller

这个问题可能已经回答了，如果是，请分享链接。

我已经创建了一个单视图应用程序，它工作正常，但现在我添加了一个新视图并单击按钮，希望新视图出现。

这是点击操作的代码，

```
 SettingsViewController *settingsViewController = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:[NSBundle mainBundle]];

    [self.navigationController pushViewController:settingsViewController animated:YES]; 
```

默认 ViewController 现在在 .h 文件中看起来像这样

```
 @interface ViewController : UIViewController<UIImagePickerControllerDelegate, UINavigationControllerDelegate> 
```

SettingsViewController.m 有一个默认值

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{} 
```

我可以像这样向“单视图应用程序”添加另一个视图，还是应该为我的项目选择另一个模板？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:47:46.830

没事儿。单视图应用程序模板只是一个准系统模板。您可以添加任何您喜欢的导航类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:14:26.883

你需要`UINavigationController`在你的`AppDelegate`. 然后让你`ViewController`的`rootViewController`。`UINavigationController`然后您将能够推送和弹出视图。

这是创建`rootViewController`where`mainNavigationController`的代码：`UINavigationController``AppDelegate`

```
ViewController *vc = [[ViewController alloc] init];
mainNavigationController = [[UINavigationController alloc] initWithRootViewController:vc]; 
```

一旦你把它`ViewController`设置为s `rootViewController`，它将符合`UINavigationController`push 和 pop 方法来创建一个`UIViewController`s 堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:49:28.950

在 iOS 5 中，我认为在视图之间切换有点不同，

我已经使用上述代码创建了一些应用程序来切换视图。

但是现在，我必须这样写才能工作：

```
 SettingsViewController *settingsViewController = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:[NSBundle mainBundle]];
    [self presentModalViewController:settingsViewController animated:YES]; 
```

# opengl - 在 OpenGL GLUT 程序中动态查找屏幕宽度和高度

> ID：11605733
> 
> 赞同：3
> 
> 时间：2012-07-23T02:23:55.627
> 
> 标签：opengl, glut

在我的 OpenGL 程序中，为了在全屏模式下运行它，我使用了 GLUT 函数 glutGameModeString(const char *string)。
（其中“字符串”指定屏幕宽度、高度、像素深度和刷新率）

为了使其在任何系统中工作，我需要在调用“glutGameModeString”之前动态确定主机系统的屏幕宽度和屏幕高度功能。
我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-08T13:46:50.050

我认为你错了，有以下常量：

```
GLUT_SCREEN_HEIGHT
GLUT_SCREEN_WIDTH 
```

我已经测试过了，它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-09T02:03:13.447

刚刚在 Linux Mint 18 上测试过

```
std::cout << "glut screen width(DEFUALT): " << GLUT_SCREEN_WIDTH << std::endl;
std::cout << "glut screen height(DEFAULT): " << GLUT_SCREEN_HEIGHT << std::endl;
std::cout << "glut screen width: " << glutGet(GLUT_SCREEN_WIDTH) << std::endl;
std::cout << "glut screen height: " << glutGet(GLUT_SCREEN_HEIGHT) << std::endl; 
```

输出：

```
glut screen width(DEFAULT): 200
glut screen height(DEFAULT): 201
glut screen width: 1366
glut screen height: 768 
```

将您的窗口大小设置为`glutGet(GLUT_SCREEN_WIDTH/HEIGHT);`将最大化您的窗口，仍然有顶部栏和边框。

只需`glutFullScreen();`在初始化窗口后调用即可使其全屏无边框或任何内容，无需上述获取屏幕大小的内容。

# google-chrome - chrome 使用 Gecko 插件 API 时的窗口大小问题

> ID：11605734
> 
> 赞同：1
> 
> 时间：2012-07-23T02:24:01.503
> 
> 标签：google-chrome, plugins, gecko

我们的插件是使用 Gecko 插件 API 开发的无窗口插件，针对 Firefox 和 Chrome。当 Chrome（从版本 18 起）调用 NPP_SetWindow（NPP 实例，NPWindow* pNPWindow）让我们的插件响应并且 HTML 脚本使用相对表格单元格大小（宽度 100% 和高度 100%）来响应时，会出现窗口大小问题定义客户区。与 Chrome 17 和 Firefox 14.0.1（当前最新）中的相比，NPWindow 中包含的实际窗口位置和大小实际上是不正确的。尺寸实际上更小。我不确定这是 Chrome 的预期行为还是回归问题。如果是预期的，我该如何解决？

# mysql - 如何在mysql中加入表

> ID：11605735
> 
> 赞同：-3
> 
> 时间：2012-07-23T02:24:01.567
> 
> 标签：mysql, sql, inner-join

我有两个表如下：

```
users
 -id (primary key, AUTO_INCREMENT)
 -username (varchar)
 -password (varchar)

users_messages
 -id (primary key, AUTO_INCREMENT)
 -message (text)
 -fk sender_id (int)
 -fk receiver_id(int) 
 -sent_date(datetime)
 -is_read(tinyint) 
```

users_messages 中的两个外键都引用同一个表，即用户我想编写一个 sql 查询以获得如下输出：

```
Message                Sender            Receiver
Message 1 testing      john              sonam
Message 2 testing      meena             shenaz 
```

我怎样才能做到这一点？我需要从 users_messages 表中获取所有消息，其中 sender_id 和 receiver_id 被用户表中的用户名列替换

编辑解决方案：

```
SELECT m.id, m.message, s.username, r.username FROM users_messages m 
INNER JOIN users s ON m.sender_id = s.id
INNER JOIN users r ON m.receiver_id = r.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:28:48.853

尝试

```
SELECT m.id, m.message, s.username, r.username
FROM users_messages m 
INNER JOIN users s ON m.sender_id = s.id
INNER JOIN users r ON m.receiver_id = s.id 
```

# php - 不要在 X 元素中加载内容

> ID：11605736
> 
> 赞同：1
> 
> 时间：2012-07-23T02:24:07.357
> 
> 标签：php, javascript, jquery

![布局](../Images/6b832a3eaf36c601aa310e25f465b8d4.png)

我的布局和上面一样。

**1、2、3**和**4** div 可以拖放到任何位置**1-4**和**停靠****栏中****。**现在这些只是 php 包含。当我将它们放在**扩展坞**中时，我使用 css 来：

 ******```
display:none; 
```

这隐藏了 div 中除标题之外的所有内容。完美的。然而，内容仍在“背景”中加载，我计划拥有大量这些“小部件”，我可以看到这成为加载所有这些内容的一个严重问题。

我想要发生的是：

如果掉入**码头**，则不要在以下之间加载所有内容：

```
<p><?php include('example.php'); ?></p> 
```

但如果拖回**1**、**2**、**3**或**4**则允许加载段落中的内容。

我在想也许可以使用 jQuery 获取父 div。

关于哪种语言可以解决我的问题，也许还有一些简单的例子，我只需要朝着正确的方向努力。现在另一件事是“动态的”，就像我将它从**停靠栏**拖到**1**、**2**、**3**或**4**一样。它会立即更新，或者我需要不断地重新加载页面或此 div 以允许内容检查其位置并决定是否允许加载。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:56:48.773

如果你想知道你在放置时降落的元素是什么，那就是 ->

```
$('element').droppable({
  //other logic
  drop: function(event, ui){
    //$(this) is now the element you just dropped nito
    if($(this).prop('id') == 'dock'){
      console.log("This is the Dock...We don't add content here.");
    }else{
      //function to pull data to your container...$.load() or whatever
    }
  }
}); 
```******

# javascript - 如何在div的指定高度上添加水平线？

> ID：11605738
> 
> 赞同：0
> 
> 时间：2012-07-23T02:24:16.717
> 
> 标签：javascript, css

假设我有一个 500 宽和 700 高的 div。如何将水平线或图像作为特定高度的背景？我也在这里发布了[http://jsfiddle.net/jt74S/](http://jsfiddle.net/jt74S/)

```
<div id="main">
these are some text and stuff, however the horizontal line/image should not be added with the text, but as a background of these.
</div>

#main {
    background: none repeat scroll 0 0 rgba(56, 56, 56, 0.75);
    border-radius: 0 3px 0 3px;
    float: left;
    font-size: 48px;
    line-height: 44px;
    padding: 20px;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:05:16.960

也许你可以这样做：

[http://jsfiddle.net/anaida/t57XM/](http://jsfiddle.net/anaida/t57XM/)

在同一属性中设置背景颜色和图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:26:32.050

也许`background-position`CSS 属性会起作用。

这里的例子：

[http://jsfiddle.net/rnSDw/1/](http://jsfiddle.net/rnSDw/1/)

您可以将 background-position 属性更改为 left、center 等关键字或像素以进行精确定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:30:21.210

您可以将线条制作为所需高度的一个像素宽的背景图像，然后让它在页面上重复。或者你可以使 #main position: relative 并给它一个子 div { left:0; 右：0；高度：npx；边框底部：您的规格；}。但希望@joeschmidt45 的建议是一个积极的人，你不需要做任何如此糟糕的事情^h^h^h^hpragmatic。

# java - 下载时如何将多行读入文本文件？

> ID：11605742
> 
> 赞同：0
> 
> 时间：2012-07-23T02:25:04.567
> 
> 标签：java, amazon-s3, amazon

当我将文本文件下载到本地驱动器时，尝试将多行插入文本文件时遇到问题。我怎样才能做到这一点？

```
public class downloads3 {
    private static String bucketName = "testfyp";
    private static String key        = "pig.txt";
    private static String test2;

    public static void main(String[] args) throws IOException {
        AmazonS3 s3Client = new AmazonS3Client(new PropertiesCredentials(
                downloads3.class.getResourceAsStream(
                        "AwsCredentials.properties")));
        try {
            System.out.println("Downloading an object");
            S3Object s3object = s3Client.getObject(new GetObjectRequest(bucketName, key));
            System.out.println("Content-Type: "  + 
                    s3object.getObjectMetadata().getContentType());
            displayTextInputStream(s3object.getObjectContent());

           // Get a range of bytes from an object.

            GetObjectRequest rangeObjectRequest = new GetObjectRequest(
                    bucketName, key);
            rangeObjectRequest.setRange(0, 10);
            S3Object objectPortion = s3Client.getObject(rangeObjectRequest);

            System.out.println("Printing bytes retrieved.");
            displayTextInputStream(objectPortion.getObjectContent());

            FileWriter fw = new FileWriter("C:/Users/L31305/Desktop/" + key + ".txt");
            // String test =
            // String test3 = s3object.getObjectContent();
            fw.write(test2);
            fw.close();
        } catch (AmazonServiceException ase) {
            ase.printStackTrace();
            System.out.println("Caught an AmazonServiceException, which" +
                    " means your request made it " +
                    "to Amazon S3, but was rejected with an error response" +
                    " for some reason.");
            System.out.println("Error Message:    " + ase.getMessage());
            System.out.println("HTTP Status Code: " + ase.getStatusCode());
            System.out.println("AWS Error Code:   " + ase.getErrorCode());
            System.out.println("Error Type:       " + ase.getErrorType());
            System.out.println("Request ID:       " + ase.getRequestId());
        } catch (AmazonClientException ace) {
            System.out.println("Caught an AmazonClientException, which means"+
                    " the client encountered " +
                    "an internal error while trying to " +
                    "communicate with S3, " +
                    "such as not being able to access the network.");
            System.out.println("Error Message: " + ace.getMessage());
        }
    }

    private static void displayTextInputStream(InputStream input) throws IOException {
        // Read one text line at a time and display.

        BufferedReader reader = new BufferedReader(new 
                InputStreamReader(input));

        Scanner sc = new Scanner(System.in);
        String line;

        do{
            line = reader.readLine();
            test2 = line;

            System.out.println("    " + line);
        }
        while (reader.readLine() != null); {
            test2 += line;
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:28:35.623

您有一个 do/while 循环，每次循环时都会丢失一行。此外，第二个块*不在*while 内，它在 while 循环之后。由于您的格式奇怪，这对您来说可能并不明显。

# linux - linux中sed的输出不会写入文件

> ID：11605745
> 
> 赞同：3
> 
> 时间：2012-07-23T02:25:29.883
> 
> 标签：linux, bash, sed, pipe

> **可能重复：**
> [sed 命令在文件中查找和替换并覆盖文件不起作用，它会清空文件！](https://stackoverflow.com/questions/5171901/sed-command-find-and-replace-in-file-and-overwrite-file-doesnt-work-it-empties)

好的，我有这个：

`sed "s/^/getHtmlBody\(\"\/NmConsole\/Reports\/Workspace\/Virtualization\/WrVMwareHostList\/WrVMwareHostList.asp\?sGroupList=1'/g" out.bat | sed "s/$/\';--\");/g" >out.bat`

正如您所看到的，我正在尝试进入**out.bat**但由于某种原因它无法正常工作 - 屏幕上没有显示任何内容，但没有任何内容写入文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:30:57.153

当 Bash 看到“> out.bat”时，它会截断文件。该文件现在是空的，因此 sed 找不到任何行的开头或结尾，并且没有任何内容被放入 out.bat

[kojiro 的链接](http://mywiki.wooledge.org/BashPitfalls#cat_file_.7C_sed_s.2BAC8-foo.2BAC8-bar.2BAC8_.3E_file)和codaddict 的[SO asnwer](https://stackoverflow.com/a/5171935/8539159)有一个很好的描述以及绕过它的方法。

# python - def myfunction(silent = False, x, y) “silent = False”部分是做什么的？

> ID：11605748
> 
> 赞同：1
> 
> 时间：2012-07-23T02:25:35.953
> 
> 标签：python, function, arguments

在函数的python代码中，当一个设置如下：

```
def myfunction(silent=False, x, y) 
```

做什么`silent=False`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:29:07.023

使用您当前的代码：

```
def myfunction( silent = False, x, y) 
```

将引发以下错误：

```
SyntaxError: non-default argument follows default argument 
```

如果您将其更改为：

```
def myfunction(x, y, silent=False) 
```

`silent``False`如果未将其作为参数传递，则使用其默认值，例如。`myfunction(x, y)`将相当于`myfunction(x, y, False)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T02:32:03.160

正如其他人所指出的，您必须将其`silent`作为最后一个参数。这定义`silent`为函数的可选参数。如果调用者没有提供值，`False`将使用默认值。

以这种方式定义函数后：

```
def myfunc(x, y, silent=False): 
```

你有一个调用的函数`myfunc`，可以通过两种不同的方式调用：

```
myfunc(1, 2, True)
myfunc(1, 2) 
```

在这两个调用中，x 将为 1，y 将为 2。在第一次调用中，`silent`将为 True。在第二个中，`silent`将是 False。

# javascript - Google Maps V3 fitBounds 在以相同边界再次调用时缩放到更近的视图

> ID：11605749
> 
> 赞同：0
> 
> 时间：2012-07-23T02:25:39.133
> 
> 标签：javascript, google-maps-api-3, fitbounds

```
function ZoomCenter(bounds, canvas)
{
  var center = bounds.getCenter();

  if (canvas.getMapTypeId() == "roadmap") canvas.fitBounds(bounds);
  else
  {
    var maxZoomService = new google.maps.MaxZoomService();

    maxZoomService.getMaxZoomAtLatLng(center, function(response)
    {
      if (response.status != google.maps.MaxZoomStatus.OK) alert("Error in Google MaxZoomService");
      else
      {
        var max_zoom = (response.zoom > SATMAP_MAX_ZOOM) ? SATMAP_MAX_ZOOM : response.zoom;

        canvas.setOptions( { maxZoom: max_zoom } );
        canvas.fitBounds(bounds);
        canvas.setOptions( { maxZoom: SATMAP_MAX_ZOOM} );
      }
    });
  }
} 
```

这第一次被称为它缩放到比地图上适合的小1。第二次和第一次之后的每次，它将使用完全相同的边界数据缩放到正确的级别。

fitBounds 中是否存在错误？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:43:48.980

如果没有看到更多代码并且我自己从未经历过这种怪癖，很难说。然而，我总是更怀疑我自己的代码中存在错误而不是谷歌的，所以我会首先消除那里明显的可能性。

因此，我要做的第一件事是使用 JS 调试器来确认：

*   `bounds`两次都相同
*   它两次都通过相同的执行路径来调用相同的`canvas.fitBounds(bounds)`调用。（你在那里有两次。哪个被执行取决于你的条件涉及`MapTypeId`。如果每次`canvas`都有不同的，那可能会导致怪癖。）`MapTypeId`

如果这没有出现问题，那么下一个要查看的地方可能是[Google Maps API 问题跟踪器](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3aJavascript3%20type%3aDefect&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)。

# php - 缓存或不缓存 - Stock Photo website

> ID：11605750
> 
> 赞同：0
> 
> 时间：2012-07-23T02:25:42.223
> 
> 标签：php, caching, photo-gallery

可能是一个普遍的问题，即使它特定于某种类型的网站/应用程序，但无论如何都会给它一个机会。我有点困惑我是否应该为我当前的项目缓存我的缩略图，通常我会，但我不确定这个项目。我会更好地解释我的情况，以便更好地理解。

我有一个库存照片网站，用于名人、新闻和体育照片，向授权客户（报纸和杂志）展示我们的整个图书馆。这些照片有一定的价值，我已经采取了很好的措施来确保较大的照片要么隐藏在 Amazon S3 上，要么隐藏在根目录之上，带有过期和散列链接，所以我不想通过添加缓存来危及我的照片当我不应该或添加不正确的缓存时。一个典型的用户可能会搜索一张照片而再也看不到它，或者他们可能会将一张照片保存到他们的收藏夹并每天看两次。用户还可以在几分钟内浏览 10,000 张照片。

我的问题是；我应该根本没有缓存还是只有有限的缓存，比如 1 小时或 1 天？如果我为照片设置了缓存到期，我的客户是否可以在他们的浏览器上访问，比如“缓存的图像”？缓存有价值的照片是否还有其他安全问题？

我知道抓屏、打印和规则；如果您不希望它被盗，请不要将其放在网络上，但我想在我的应用程序中尽我所能确保安全性和速度。

我正在使用 PHP (5.2.17) 使用 PHP`ReadFile()`和 IMG 元素（如`<img src="loadImage.php?p=2342dfsfsdfwf2dfsf">`.

澄清什么类型的缓存：

```
<?php
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
header("Content-Type: image/jpeg");
readfile($url);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:47:24.843

如果您非常关心图像的安全性，那么我会说不要以使用更多带宽（以及更慢的加载时间）为代价来缓存它们。如果您更关心带宽使用而不是安全性，请缓存它们。

然而，如果它们是真正的缩略图，那么如果它们很小、质量低等，它们对用户应该没有什么价值。一种解决方案是给图像加水印。

理论上，可以从浏览器的缓存（[http://protechgeek.com/how-to-extract-images-from-browser-cache/](http://protechgeek.com/how-to-extract-images-from-browser-cache/)）中提取图像，因此如果它们被缓存，则可以检索它们。更简单的是，有人可以像您提到的那样进行屏幕抓取，或者右键单击并复制/粘贴。水印是解决此问题的唯一方法。

**tl;博士**

在我看来，我认为为了最小的安全性增加而增加额外的带宽和增加加载时间是不值得的。改用水印。大多数库存照片网站都使用水印是有原因的——它们是防止某人彻底窃取图像的唯一方法（尽管，根据图像和水印，熟练的 Photoshop 用户可以令人信服地删除它）

# macos - Applescript - 系统事件 - 为“打开文件”弹出窗口设置默认位置

> ID：11605756
> 
> 赞同：1
> 
> 时间：2012-07-23T02:27:08.867
> 
> 标签：macos, applescript

我使用系统事件来控制没有 AppleScript 库的程序。我因此使用系统事件来控制它。

我已经让程序为其打开一个弹出窗口打开文件界面，我想让它默认到某个位置。这可能吗。到目前为止，我有：

```
tell application "App Name"
activate
end tell
tell application "System Events"
tell process "App Name"
    tell menu bar 1
        tell menu bar item "File"
            tell menu "File"
                tell menu item "Import"
                    tell menu "Import"
                        click menu item "XML..."
                        delay 4

                    end tell
                end tell
            end tell
        end tell
    end tell
end tell
end tell 
```

弹出窗口默认为其上次访问的位置。我希望它默认为给定的文件路径，例如 /Users/userabc/Documents/abcd.XML

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:32:40.807

如果您有一个位置的“posix 路径”并且打开了对话框，您可以执行以下操作。请注意，该位置可以是文件夹或文件路径。如果它是文件路径，则将选择该文件，然后您只需“击键返回”即可关闭对话框并打开该文件。祝你好运。

```
set theLocation to path to home folder
set posixLocation to POSIX path of theLocation

tell application "System Events"
    keystroke "g" using {command down, shift down}
    delay 0.5
    keystroke posixLocation
    delay 0.5
    keystroke return
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T07:41:58.420

这种方法的唯一问题是自动更正开始在文本框中输入苹果脚本类型并将所有内容都搞砸了。解决方法是从 applescript 复制/粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T15:58:30.200

击键命令不适用于插入当前输入源无法插入的字符。而且它根本不适用于某些输入源。

您还可以设置文本字段的值：

```
tell application "System Events" to tell (process 1 where frontmost is true)
    keystroke "g" using {shift down, command down}
    tell window 1
        tell sheet 1
            set value of text field 1 to "/usr/share/dict/connectives"
            click button 1
        end tell
        click button "Open"
    end tell
end tell 
```

# php - 如何创建一个文本文件来保存表单数据？

> ID：11605758
> 
> 赞同：0
> 
> 时间：2012-07-23T02:27:28.693
> 
> 标签：php, html, forms, file

> **可能重复：**
> [将 PHP 变量保存到文本文件](https://stackoverflow.com/questions/2995461/save-php-variables-to-a-text-file)

我需要帮助以将数据输入到 html 表单中并创建一个新文件，该文件的名称是用户输入的名称，然后将该文本文件保存到名为 forms 或其他内容的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:03:07.077

```
$fileName = $_POST['fileName'];  //posted value of text box
$userName =$_POST['userName'];   //posted value of text box
$myFile = $fileName.".txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $userName;
fwrite($fh, $stringData);
fclose($fh); 
```

# css - CSS3媒体查询应该如何管理？

> ID：11605761
> 
> 赞同：41
> 
> 时间：2012-07-23T02:28:29.760
> 
> 标签：css, stylesheet, media-queries

由于在网站中实现 CSS3 媒体查询的方法有很多，我想知道更有经验的网页设计师推荐哪一种。我能想到一对：

# 1\. 多合一样式表

有一种适用于所有屏幕宽度的默认样式，以及仅适用于较低屏幕宽度并覆盖默认值的媒体查询，所有这些都在一个文件中。例如：

**HTML**

```
<link rel="stylesheet" href="main.css"> 
```

**main.css**

```
article
{
    width: 1000px;    
}

@media only screen and (max-width: 1000px)
{
    article
    {
        width: 700px;
    }

} 
```

（请记住，这只是一个例子）

**优点：**

*   默认样式适用于旧版浏览器
*   只需要一个 HTTP 请求

**缺点：**

*   很多代码弄得乱七八糟
*   一些浏览器将不得不下载他们不会应用的代码

# 2\. 单独的样式表

有单独的样式表包含为每个屏幕宽度量身定制的完整代码。浏览器仅加载适用的浏览器。例如：

**HTML**

```
<link rel="stylesheet" href="large-screen.css" media="screen and (min-width: 1001px)"> /*Also older browsers*/
<link rel="stylesheet" href="small-screen.css" media="only screen and (max-width: 1000px)"> 
```

**大屏幕.css**

```
article
{
    width: 1000px;
} 
```

**小屏幕.css**

```
article
{
    width: 700px;
} 
```

**优点：**

*   整洁有序
*   只需要一个 HTTP 请求
*   浏览器只加载他们需要的

**缺点：**

*   （这就是我犹豫要不要使用它的原因：）当一个人做出适用于所有屏幕宽度的更改时，必须将更改复制并粘贴到所有样式表中的适当位置。

# 3.单独的样式表，一个全局样式表

与 #1 相同，但全局样式和媒体查询位于单独的样式表中。例如：

**HTML**

```
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="small-screen.css" media="only screen and (max-width: 1300px)"> 
```

**main.css**

```
article
{
    width: 1000px;
} 
```

**小屏幕.css**

```
article
{
    width: 700px;
} 
```

**优点：**

*   也整洁和易于管理
*   进行全局更改时没有#2的问题
*   全局样式适用于旧版浏览器

**缺点：**

*   较小的屏幕宽度需要 2 个 HTTP 请求

这就是我能想到的。*应该*如何管理媒体查询？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-25T16:17:59.660

好吧，我当然不能声称自己是这件事的权威（我自己还在学习编码约定），但我实际上倾向于选项 #1 - 单个样式表。不过，我正在考虑它的具体实现。我建议您使用多个断点，而不是为需要新样式的每种屏幕尺寸情况设置一个断点 - 一个用于需要解决多个屏幕尺寸的每个模块的 CSS 样式。

啊……这可能是一个有点令人困惑的说法。一个例子是为了...

**而不是类似的东西：**

```
/*default styles:*/
/*header styles*/
.header-link{  ...  }
.header-link:active{  ...  }
.header-image{  ...  }
.header-image-shown{  ...  }
.header-table-cell{  ...  }

/*content styles*/
.content-link{  ...  }
.content-link:active{  ...  }
.content-image{  ...  }
.content-image-shown{  ...  }
.content-table-cell{  ...  }

/*footer styles*/
.footer-link{  ...  }
.footer-link:active{  ...  }
.footer-image{  ...  }
.footer-image-shown{  ...  }
.footer-table-cell{  ...  }

/*alternate styles for smaller screens:*/
@media only screen and (max-width: 1000px){
    /*header styles*/
    .header-link{  ...  }
    .header-image{  ...  }
    .header-image-shown{  ...  }
    .header-table-cell{  ...  }

    /*content styles*/
    .content-link{  ...  }
    .content-image{  ...  }
    .content-image-shown{  ...  }
    .content-table-cell{  ...  }

    /*footer styles*/
    .footer-link{  ...  }
    .footer-image{  ...  }
    .footer-image-shown{  ...  }
    .footer-table-cell{  ...  }
} 
```

**我建议选项＃1，只是这样实现：**

```
/*default header styles*/
.header-link{  ...  }
.header-link:active{  ...  }
.header-image{  ...  }
.header-image-shown{  ...  }
.header-table-cell{  ...  }

/*alternate header styles for smaller screens*/
@media only screen and (max-width: 1000px){
    .header-link{  ...  }
    .header-image{  ...  }
    .header-image-shown{  ...  }
    .header-table-cell{  ...  }
}

/*default content styles*/
.content-link{  ...  }
.content-link:active{  ...  }
.content-image{  ...  }
.content-image-shown{  ...  }
.content-table-cell{  ...  }

/*alternate content styles for smaller screens*/
@media only screen and (max-width: 1000px){
    .content-link{  ...  }
    .content-image{  ...  }
    .content-image-shown{  ...  }
    .content-table-cell{  ...  }
}

/*default footer styles*/
.footer-link{  ...  }
.footer-link:active{  ...  }
.footer-image{  ...  }
.footer-image-shown{  ...  }
.footer-table-cell{  ...  }

/*alternate footer styles for smaller screens*/
@media only screen and (max-width: 1000px){
    .footer-link{  ...  }
    .footer-image{  ...  }
    .footer-image-shown{  ...  }
    .footer-table-cell{  ...  }
} 
```

（所有的类都是占位符。我不是很有创意......）

虽然这意味着您将多次执行相同的媒体查询声明（导致更多代码），但它对于测试单个模块更加方便，这将有助于您的网站在变得更大时的整体可维护性。尝试在我给出的示例中添加多个真实样式、更多标签/类/id，并且可能为它们添加更多空白，您很快就会看到缩小和更改/附加样式的速度有多快（跨越所有屏幕尺寸）在示例的第二部分所示的实现中。

我将这个答案完全归功于Jonathan Snook的*Scalable and Modular Architecture for CSS的信息。*（毕竟，像我这样的初学者是不可能自己想出并推理出这样一个答案的！）正如那本书的许多相关部分之一所引用的那样，

> “......而不是在主 CSS 文件或单独的媒体查询样式表中使用单个断点，而是在模块状态周围放置媒体查询。”

不过，如果出于个人喜好或其他原因，您不想使用这种方法，那么您可以自由选择您提出的任何其他选项——毕竟，Snook 自己说他的书“更像是风格指南而不是僵化的框架"，所以不要觉得这是一个编码标准。（虽然我觉得应该是。XD）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T17:09:45.153

我相信“把代码放在你期望的地方”。如果需要否决一种样式，我希望我的否决代码尽可能接近默认样式，因此在同一个文档中。这样，一年后，当我查看代码时，我仍然会知道发生了什么。在另一种方法（每个断点单独的 css 文件）中，我需要记住在单独的文件中查找否决样式代码。没问题，除非我忘记一年后我是这样做的。猜猜这是个人喜好，浏览器不在乎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-22T08:42:19.713

如果您想使用第二个选项，有一种方法可以避免“复制+粘贴”您的移动版和桌面版网站所需的全局样式，这非常方便，并且可以帮助您在我看来让一切更有条理，并且正在使用 SASS。

你可以有这样的东西：

```
> CSS Folder
> Sass folder
 - _global.scss
 - _mobile_layout.scss
 - _desktop_layout.scss
 - main_mobile.scss
 - main_desktop.scss 
```

这将编译成

```
> CSS Folder
 - main_mobile.css
 - main_desktop.css 
```

希望对你有用^^

# ruby-on-rails - Ruby on Rails：创建时的多对多关联未定义方法

> ID：11605762
> 
> 赞同：1
> 
> 时间：2012-07-23T02:28:34.230
> 
> 标签：ruby-on-rails, many-to-many, undefined

我已经通过关联使用 has_many 设置了成员和团队模型。

成员.rb

```
has_many :teams, :through => :team_members
has_many :team_members 
```

团队.rb

```
has_many :members, :through => :team_members
has_many :team_members 
```

团队成员.rb

```
belongs_to :member
belongs_to :team 
```

当我尝试创建一个新团队时，我收到此错误：

```
undefined method `name' for nil:NilClass 
```

参数是：

```
{"utf8"=>"✓",
 "authenticity_token"=>"aXpMxWxGlhogfn9EbBWciSjoMrYXbPxG8Kzha14na58=",
 "team"=>{"name"=>"Ruby",
 "email"=>"email@email.com",
 "language"=>"En",
 "link"=>"",
 "logo"=>#<ActionDispatch::Http::UploadedFile:0xb3907f0 @original_filename="You-Are-Great-.gif",
 @content_type="image/gif",
 @headers="Content-Disposition: form-data; name=\"team[logo]\"; filename=\"You-Are-Great-.gif\"\r\nContent-Type: image/gif\r\n",
 @tempfile=#<File:/tmp/RackMultipart20120723-1907-m3bi79>>},
 "commit"=>"Create Team"} 
```

team_controller.rb 中的 create 方法是：

```
@team = Team.new(params[:team]) 
```

除非我手动分配属性，否则不会创建团队，例如

```
@team = Team.new(:name => params[:team][:name], :email => params[:team][:email]...) 
```

所以！任何想法为什么？

**编辑：**

团队控制器.rb：

```
class TeamsController < ApplicationController
  # GET /teams
  # GET /teams.json
  def index
    @teams = Team.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @teams }
    end
  end

  # GET /teams/1
  # GET /teams/1.json
  def show
    @team = Team.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @team }
    end
  end

  # GET /teams/new
  # GET /teams/new.json
  def new
    @team = Team.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @team }
    end
  end

  # GET /teams/1/edit
  def edit
    @team = Team.find(params[:id])
  end

  # POST /teams
  # POST /teams.json
  def create
    raise params.to_yaml
    @team = Team.new(params[:team])
    respond_to do |format|
      if @team.save
        @team_member = TeamMember.new(:team_id => @team.id, :member_id => current_member.id,
                                  :accepted => true, :leader => true, :joined => Time.now)
        if @team_member.save
          format.html { redirect_to team_path(@team), notice: 'Team was successfully created.' }
          format.json { render json: @team, status: :created, location: @team }
        else
          @team.destroy
          format.html { render action: "new" }
          format.json { render json: @team.errors, status: :unprocessable_entity }
        end
      else
        format.html { render action: "new" }
        format.json { render json: @team.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /teams/1
  # PUT /teams/1.json
  def update
    @team = Team.find(params[:id])

    respond_to do |format|
      if @team.update_attributes(params[:team])
        format.html { redirect_to @team, notice: 'Team was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @team.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /teams/1
  # DELETE /teams/1.json
  def destroy
    @team = Team.find(params[:id])
    @team.destroy

    respond_to do |format|
      format.html { redirect_to teams_url }
      format.json { head :no_content }
    end
  end

end 
```

team.rb 模型：

```
class Team < ActiveRecord::Base

  attr_accessible :name, :email, :language, :link, :logo, :team_leader

  validates_presence_of :name
  validates_presence_of :email
  validates_presence_of :language
  validates_uniqueness_of :name

  has_many :leaders, :class_name => "TeamMember", :conditions => { :leader => true }
  has_many :members, :through => :team_members
  has_many :team_members, :conditions => { :accepted => true, :active => true }

  has_attached_file :logo,
    :styles => { :medium => "320x180>", :thumb => "100x100>" },
    :url  => "/assets/teams/:id/:style/:basename.:extension",
    :path => ":rails_root/public/assets/teams/:id/:style/:basename.:extension"
end 
```

# ruby - 使用 Ruby Mechanize 在 LinkedIn 群组页面上单击“显示更多”链接

> ID：11605766
> 
> 赞同：1
> 
> 时间：2012-07-23T02:29:01.163
> 
> 标签：ruby, web-scraping, mechanize

我已经登录到 Linkedin 并使用 Ruby Mechanize 访问了我的群组页面。我还可以检索页面上的问题列表。但是，我无法单击底部的“显示更多”链接，以便我可以查看整个页面以及所有问题：

```
require 'rubygems'
require 'mechanize'
require 'open-uri'

a = Mechanize.new { |agent|
  # LinkedIn probably refreshes after login
  agent.follow_meta_refresh = true
}

a.get('http://linkedin.com/') do |home_page|
    my_page = home_page.form_with(:name => 'login') do |form|
    form.session_key  = '********'   #put you email ID
    form.session_password = '********'  #put your password here
  end.submit

mygroups_page = a.click(my_page.link_with(:text => /Groups/))

#puts mygroups_page.links

link_to_analyse = a.click(mygroups_page.link_with(:text => 'Semantic Web'))

link_to_test = link_to_analyse.link_with(:text => 'Show more...')

puts link_to_test.class

# link_to_analyse.search(".user-contributed .groups a").each do |item|

#   puts item['href']

#  end

end 
```

尽管页面中存在带有文本“显示更多...”的链接，但我无法单击它。link_to_test.class 显示 NilClass 可能的问题是什么？

```
The part of the page I need to reach is:
<div id="inline-pagination">
        <span class="running-count">20</span>
        <span class="total-count">1134</span>
            <a href="groups?mostPopularList=&amp;gid=49970&amp;split_page=2&amp;ajax=ajax" class="btn-quaternary show-more-comments" title="Show more...">
              <span>Show more...</span>
              <img src="http://static01.linkedin.com/scds/common/u/img/anim/anim_loading_16x16.gif" width="16" height="16" alt="">
            </a>
      </div> 
```

我需要单击显示更多...我可以使用 links_with(:href => ..) 但似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:38:18.530

**新答案：**

我刚刚检查了该组的页面源，似乎对于“显示更多”链接，他们实际上使用了三个句号而不是省略号。

您是否尝试过通过其`title`属性定位链接？

```
link_to_analyse.link_with(:title => 'Show more...') 
```

如果这仍然不起作用，您是否尝试过将页面上所有链接的文本转储为

```
link_to_analyse.links.each do |link|
  puts link.text
end 
```

**---- 旧答案不正确 ----**

LinkedIn 使用“Horizo​​ntal Ellipsis”Unicode 字符（代码 U+2026）作为他们的链接，“看起来”他们在末尾有“...”。所以你的代码实际上并没有找到链接。

您需要的字符：[http ://www.fileformat.info/info/unicode/char/2026/index.htm](http://www.fileformat.info/info/unicode/char/2026/index.htm)

偷偷摸摸的:)

编辑：要获得链接，您当然需要在链接文本中插入适当的 Unicode 字符，如下所示：

```
link_to_analyse.link_with(:text => 'Show more\u2026') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:29:10.023

锚点内的标签将在锚点文本周围创建一些空白区域。您可以通过以下方式解释：

```
link_to_analyse.link_with :text => /\A\s*Show more...\s*\Z/ 
```

但这可能就足够了：

```
link_to_analyse.link_with :text => /Show more.../ 
```

# powershell - 为什么 $hash.key 语法在 ExpandString 方法中不起作用？

> ID：11605772
> 
> 赞同：8
> 
> 时间：2012-07-23T02:30:03.607
> 
> 标签：powershell, syntax, powershell-3.0

以下 Powershell 脚本演示了该问题：

```
$hash = @{'a' = 1; 'b' = 2}
Write-Host $hash['a']        # => 1
Write-Host $hash.a           # => 1

# Two ways of printing using quoted strings.
Write-Host "$($hash['a'])"   # => 1
Write-Host "$($hash.a)"      # => 1

# And the same two ways Expanding a single-quoted string.
$ExecutionContext.InvokeCommand.ExpandString('$($hash[''a''])') # => 1
$ExecutionContext.InvokeCommand.ExpandString('$($hash.a)')      # => Oh no!

Exception calling "ExpandString" with "1" argument(s): "Object reference not set to an instance of an object."
At line:1 char:1
+ $ExecutionContext.InvokeCommand.ExpandString('$($hash.a)')
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : NullReferenceException 
```

任何人都知道为什么`$hash.key`语法在任何地方都有效，但在显式扩展中？这可以解决吗，还是我必须接受它并使用`$hash[''key'']`语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-12T09:04:55.820

我使用这种方法，因为这个错误存在于 v4 中（不在 v5 中）

```
function render() {
    [CmdletBinding()]
    param ( [parameter(ValueFromPipeline = $true)] [string] $str)

    #buggy
    #$ExecutionContext.InvokeCommand.ExpandString($str)

    "@`"`n$str`n`"@" | iex
} 
```

您的示例的用法：

```
 '$($hash.a)' | render 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T15:45:35.883

我试图将提示用户的文本存储在文本文件中。我希望能够在从我的脚本扩展的文本文件中包含变量。

我的设置存储在一个名为 $profile 的 PSCustomObject 中，因此在我的文本中，我试图执行以下操作：

```
Hello $($profile.First) $($profile.Last)!!! 
```

然后从我的脚本中我试图做：

```
$profile=GetProfile #Function returns PSCustomObject 
$temp=Get-Content -Path "myFile.txt"
$myText=Join-String $temp
$myText=$ExecutionContext.InvokeCommand.ExpandString($myText) 
```

这当然给我留下了错误

> 使用“1”参数调用“ExpandString”的异常：“对象引用未设置为对象的实例。”

最后我发现我只需要将我想要的 PSCustomObject 值存储在常规的旧变量中，更改文本文件以使用这些值而不是 object.property 版本，并且一切正常：

```
$profile=GetProfile #Function returns PSCustomObject 
$First=$profile.First
$Last=$profile.Last
$temp=Get-Content -Path "myFile.txt"
$myText=Join-String $temp
$myText=$ExecutionContext.InvokeCommand.ExpandString($myText) 
```

在文本中我改为

> 你好 $First $Last!!!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T03:09:41.723

ExpandString api 并不完全适用于 PowerShell 脚本，它是为 C# 代码添加的更多内容。您的示例不起作用仍然是一个错误（我认为它已在 V4 中修复），但这确实意味着有一种解决方法 - 我建议将其用于一般用途。

双引号字符串有效（但不是字面意思）调用 ExpandString。所以以下应该是等价的：

```
$ExecutionContext.InvokeCommand.ExpandString('$($hash.a)')
"$($hash.a)" 
```

# javascript - 将画布对象另存为图像 - 黑色背景

> ID：11605777
> 
> 赞同：0
> 
> 时间：2012-07-23T02:30:43.877
> 
> 标签：javascript, html, canvas, infovis

这是一个有点令人沮丧的问题。我正在使用名为 Javascript InfoVis Toolkit 的第三方库来生成画布图像图表。

所以图表被构建并插入到画布中。该图像的背景是白色的（就像css中的样式一样），但是当我转换图像时（我尝试了不同的库并一起打开一个新窗口）它是黑色的。

```
<script type="text/javascript">
    function saveImage(div_id) {

        var canvas = document.getElementById("chart2-canvas");
        Canvas2Image.saveAsJPEG(canvas);
    }
</script>

<script type="text/javascript">
    function init(jsonString, num){

        var json = jsonString
        var inj = 'chart' + num

        var st = new $jit.ST({
            injectInto: inj,
            offsetX:25,
            offsetY:900,
            transition: $jit.Trans.Quart.easeInOut,
            orientation: 'top',
            Node: {
                height:100,
                width:100,
                type: 'rectangle',
                color: '#EEE',
                overridable: true
            },
            Edge: {
                type: 'line',
                color: '#512',
                overridable: true
            },
            Label: {
                type: 'Native',
                color: '#000000'
            },
            Tips: { 
                enable: false,
                onShow: function(tip, node, isLeaf, domElement){
                    var html = "<p><b>" + node.name + "</b></p><br/>";
                    var data = node.data

                    if(data.image) {
                        html += "<img src=\""+ data.image +"\" width=50 height=65  class=\"album\" />";
                    }
                    if(data.email) {
                        html += "<p>"+data.email+"</p>";
                    }
                    if(data.title) {
                        html += "<p>"+data.title+"</p>";
                    }
                    if(data.phone) {
                        html += "<p>"+data.phone+"</p>";
                    }
                    tip.innerHTML = html; 
                }       
            }/*, 
            onCreateLabel:function(label,node) {
                alert(node.name);
                alert(node.data);
                var html = "<b>" + node.name + "</b>";
                var data = node.data;

                if(data.title) {
                    html += "<br/><br/><i>" + data.title + "</i>";
                }

                label.id = node.id + "_" + num;
                label.innerHTML = html;

                var style = label.style;
                style.width = 100 + 'px';
                style.height = 100 + 'px';
                style.cursor = 'pointer';
                style.fontSize = '0.8em';
                style.textAlign = 'center';
                style.color='#321';
            }*/
        });

        st.loadJSON(json);
        st.compute();
        st.onClick(st.root);

    }
</script>

<a href="#" onclick="javascript:saveImage('chart1');">Save Image</a>

<g:each in="${allJSON}" status="h" var="jsonInstance">
    <div id="chart${h+1}">
        <script type="text/javascript">
            init(${jsonInstance}, ${h+1});
        </script>
    </div>
</g:each> 
```

回顾一下：

1.  我在代码中生成图表，所有图表都有白色背景（这是正确的）
2.  我保存了图表 2 的图像（作为测试），但保存的图像是黑色的 - 显然忽略了画布背景。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T02:39:46.580

你确定画布没有透明背景吗？JPEG 不支持透明背景。

如果它确实有透明背景，请先尝试在其上绘制白色背景，然后将其另存为 JPEG。

# c# - 在 signalR 的集线器类中维护对象的实例

> ID：11605778
> 
> 赞同：1
> 
> 时间：2012-07-23T02:30:52.797
> 
> 标签：c#, asp.net, asp.net-mvc-3, signalr

我的中心类目前有以下代码：

```
public class MatchMaker : Hub
    {    

    private List<SoloUser> soloUsers = new List<SoloUser>();

    //Client Requests
    public void findNewPartner(string Country, string State)
    {
        SoloUser soloUser = soloUsers.FirstOrDefault(s => (s.Country== Country) && (s.State == State));
        if (soloUsers.Count > 0)
            Clients.partnerRequestResult(soloUsers.FirstOrDefault());
        else
        {
            soloUser = new SoloUser { 
                Major = Major,
                School = School,
                SessionId = SessionId,
                Token = token
            };
            soloUsers.Add(soloUser);
        }

    }
} 
```

问题是每当我在客户端调用此方法时，将 SoloUser 对象添加到我的`soloUsers`集合中不会保存，因此当另一个用户再次调用此函数时，linq statement( `soloUsers.FirstOrDefault(s => (s.School == School) && (s.Major == Major))`) 永远不会找到 SoloUser。我怎样才能做到这一点，以便我的`soloUsers`集合将保存实例和添加到其中的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:19:05.850

SignalR 为您进行的每个呼叫创建一个新的集线器实例（这是非常轻量级的东西，不用担心），因此您的 soloUsers 列表不会在呼叫之间保留。

使列表静态以解决此问题。[请注意，在访问列表或使用其中一个并发集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)以使其线程安全时，这将需要某种锁定。

# php - 如何确定用户是否点击视频进行播放

> ID：11605779
> 
> 赞同：0
> 
> 时间：2012-07-23T02:30:54.763
> 
> 标签：php, video, youtube, statistics

我在我的网站上投放广告，这些广告通常是 YouTube 视频。我想知道用户是否点击了这些视频。我基本上是在尝试在我正在创建的统计插件中使用这些数据。

我试过搜索许多不同的关键字，但我真的找不到任何东西。

如果我能指出正确的方向，我将不胜感激。欢迎任何想法、提示或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:53:54.423

当您提到 YouTube 时，我怀疑您对 URL 有控制权。

但是，如果您可以控制嵌入在视频中的 URL，那么我建议您在您的服务器上构建一个简单的重定向脚本。确保 URL 包含重定向 URL 或代表将保存在数据库中的 URL 的代码。将日志记录功能添加到重定向脚本中，嘿presto。

如果您无法控制 URL，那么在我的脑海中，也许您可​​以实现一些客户端 JS 来为视频添加一个覆盖层，该覆盖层成为可点击元素并实现上面的 URL 重定向脚本。从视频中获取 URL 的一些方法：[https ://www.google.com/search?q=jquery+youtube+URL](https://www.google.com/search?q=jquery+youtube+URL)

# javascript - jquery $ajax 没有按预期工作

> ID：11605782
> 
> 赞同：1
> 
> 时间：2012-07-23T02:31:33.253
> 
> 标签：javascript, jquery

我必须执行跨域请求并使用 $.ajax 函数从 url 获取内容。但是下面的代码只显示第一个警报，即警报（myUrl），之后执行停止。不显示第二个警报。我不知道我写的代码有什么问题。有人可以告诉我我在这里做错了什么吗？在此先感谢。

```
function getContentFromUrl(){
    var myUrl="http://icant.co.uk";
    alert(myUrl);
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql?" +
             "q=select%20*%20from%20html%20where%20url%3D%22" +
             encodeURIComponent(myUrl) + "%22&format=xml'&callback=?",
        dataType: 'json',
        data: data,
        success: function () {
            alert("***********"+data.results[0]);
            if (data.results[0]) {
                var htmlText = data.results[0];
            var jsonObject = parseAndConvertToJsonObj(htmlText);
            } else {
                document.getElementById("displayerrors").innerHTML = "Could not load the page.";
            }
        },
        error: function() {
            document.getElementById("displayerrors").innerHTML = "Could not load the page.";
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:34:30.487

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:36:18.287

由于同源策略，您不能将常规 JSON 用于跨域请求。相反，您需要使用 JSONP。在 jQuery 中，您可以这样做：

```
$.ajax({
    dataType: 'jsonp',
    crossDomain: true
    // other info
}); 
```

请注意，JSONP 涉及安全问题。仅当您信任主机域时才使用 JSONP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T02:37:20.627

我假设这是 jQuery？

尝试以下操作：

```
url = "http://query.yahooapis.com/v1/public/yql?" +"q=select%20*%20from%20html%20where%20url%3D%22" + encodeURIComponent(myUrl) + "%22&format=xml'&callback=?";
getContentFromURL(url);

function getContentFromURL(url)
{
    $.get(url, function (data) {
        console.log(data);
    });
} 
```

如果它向控制台输出响应，您可以从那里构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T02:36:51.937

这里`data`没有定义

```
$.ajax({
            url: "http://query.yahooapis.com/v1/public/yql?" + "q=select%20*%20from%20html%20where%20url%3D%22" + encodeURIComponent(myUrl) + "%22&format=xml'&callback=?",
            dataType: 'json',
            data: data, 
```

并且您忘记为回调函数添加参数

```
success: function (data) {
    ....
} 
```

最后的代码应该是这样的

```
function getContentFromUrl() {
        var myUrl = "http://icant.co.uk";
        alert(myUrl);
        $.ajax({
            url: "http://query.yahooapis.com/v1/public/yql?" + "q=select%20*%20from%20html%20where%20url%3D%22" + encodeURIComponent(myUrl) + "%22&format=xml'&callback=?",
            dataType: 'json',
            data: {},
            success: function (data) {
                alert("***********" + data.results[0]);
                if (data.results[0]) {
                    var htmlText = data.results[0];
                    var jsonObject = parseAndConvertToJsonObj(htmlText);
                } else {
                    document.getElementById("displayerrors").innerHTML = "Could not load the page.";
                }
            },
            error: function () { document.getElementById("displayerrors").innerHTML = "Could not load the page."; }
        });
    } 
```

# mysql - mysql 永久准备语句

> ID：11605783
> 
> 赞同：5
> 
> 时间：2012-07-23T02:31:42.050
> 
> 标签：mysql, stored-procedures, pdo, prepared-statement

我希望在高流量站点上使用准备好的语句来加速一些查询。我认为我没有正确理解的是使用准备好的语句的好处，除非它们可以通过多个连接保持准备状态。看起来这对于也不允许持久连接的 PDO 是不可能的。但持久连接功能不允许 PDO。

假设为了参数，我每秒运行 5,000 次查询：SELECT * FROM some_table WHERE some_column LIKE 'some_value'

据我了解，如果我每次需要查询时都更改“some_value”，PDO 会阻止 mysql 重新编译和评估查询。我也明白“some_value”可以用二进制而不是 ASCII 传输以节省带宽，但如果我每次打开连接时都必须发送整个查询，它不会节省太多。

同样根据我的阅读，存储过程不是解决方案，因为它们也不会通过多个连接进行编译。

这个问题有什么解决办法吗？将准备好的语句存储在服务器上的某个地方并让它在内存中编译并准备好在收到变量后立即触发？

有没有办法通过将连接池与 PDO 相结合来实现这一点？（虽然我也听说连接池并不理想，因为它会在某些情况下导致阻塞）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:46:58.603

**在运行了许多基准测试后，我们发现在服务器上**准备的预处理语句为我们提供了最大的速度优势。这是一个例子：

```
DROP PROCEDURE IF EXISTS get_user;

DELIMITER //

CREATE PROCEDURE get_user(IN v_user VARCHAR(255))
DETERMINISTIC
READS SQL DATA
SQL SECURITY INVOKER
COMMENT ''
proc: BEGIN
    SET @user = v_user;

    IF ISNULL(@get_user_prepared) THEN
        SET @get_user_prepared = TRUE;

        SET @sql = "SELECT * FROM mysql.user WHERE user = ?";

        PREPARE get_user_stmt FROM @sql;
    END IF;

    EXECUTE get_user_stmt USING @user;
END;
//

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:08:55.663

Nope, there is no way to use persistent prepared statements.

However, there is an ideal solution for the query running 5,000 times per second - [Handlersocket](http://www.percona.com/doc/percona-server/5.5/performance/handlersocket.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:06:06.060

在 MySQL 中使用准备好的语句不太可能使您的查询更快，并且它也会阻止查询缓存工作。如果您确实需要以 5k/s 的速度运行相同的查询，则需要在数据库前面进行一些缓存。Memcached 很流行，Redis 也很流行。根据您的操作，缓存元素或整个页面也可能是一种选择。

# ruby-on-rails - 使用回形针上传多个文件

> ID：11605787
> 
> 赞同：11
> 
> 时间：2012-07-23T02:32:05.330
> 
> 标签：ruby-on-rails, ruby, paperclip

我在使用回形针上传多个文件时遇到问题，

我的模型就是这样

```
slider has_many imgarrays

imgarrays has_many imageobjects

imageobjects have_attachment(as for paperclip) 
```

在我的其他模型上接收单个图像并使用回形针保存它没有问题，但我不确定如何处理`imgarrays`在多个文件上传期间由 param 返回的数组。

这是我的 Rails 服务器日志：

```
Started POST "/slider" for 127.0.0.1 at 2012-07-23 10:14:17 +0800
  Processing by SliderController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7HcHtSlOsU/bnxb9emhAsSl/GFBraIE6NxwijHl3REM=", "slider"=>{"question"=>"", "answer"=>"", "score"=>"", "industry_name"=>"", 
  "imgarrays"=>[#<ActionDispatch::Http::UploadedFile:0x007fb471e99f30 @original_filename="Icon.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"slider[imgarrays][]\"; filename=\"Icon.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/var/folders/2s/n9wb5x4534nfs1cbrlph32v00000gp/T/RackMultipart20120723-53499-1lyi4yf>>, #<ActionDispatch::Http::UploadedFile:0x007fb471e99dc8 @original_filename="Icon@2x.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"slider[imgarrays][]\"; filename=\"Icon@2x.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/var/folders/2s/n9wb5x4534nfs1cbrlph32v00000gp/T/RackMultipart20120723-53499-10lala2>>, #<ActionDispatch::Http::UploadedFile:0x007fb471e99d50 @original_filename="greenButton.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"slider[imgarrays][]\"; filename=\"greenButton.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/var/folders/2s/n9wb5x4534nfs1cbrlph32v00000gp/T/RackMultipart20120723-53499-or2rdk>>]}, "commit"=>"Create!"}
Completed 500 Internal Server Error in 18ms

ActiveRecord::AssociationTypeMismatch (Imgarray(#70206507050500) expected, got ActionDispatch::Http::UploadedFile(#70206487229960)):
  app/controllers/slider_controller.rb:12:in `new'
  app/controllers/slider_controller.rb:12:in `create'

Rendered /Users/Kinnovate/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.1/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
Rendered /Users/Kinnovate/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
Rendered /Users/Kinnovate/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (6.5ms) 
```

滑块的 new.html.erb

```
<div>
<%= form_for @slider ,:url=>"/slider" , :html => { :multipart => true } do |f| %>

      <%= f.label :question , "question"%>
      <%= f.text_field :question %> </br>
        <%= f.label :answer , "answer array (comma seperated)"%>
          <%= f.text_field :answer %>   </br>
        <%= f.label :score , "score"%>
     <%= f.text_field :score %> </br>
            <%= f.label :industry_name , "industry"%>
              <%= f.text_field :industry_name %>    </br>

        <%= f.label :attachedimg , "image"%>
         <%= f.file_field :imgarrays, :multiple =>:true %>  </br>

      <%= f.submit "Create", class: "btn btn-large btn-primary" %>
    <% end %>

</div>
<%= link_to 'Cancel', slider_index_path %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-15T11:10:32.310

这是我的代码，可以很好地使用回形针上传多个文件：我们可以使用嵌套属性或使用普通的简单方法来实现。

以下代码显示了正常的方法：

用户.rb

> has_many :images, :dependent => :destroy

图片.rb

> has_attached_file :avatar, :styles => { :medium => "300x300>" }
> 
> 属于_to：用户

用户/视图/new.html.erb

```
<%= form_for @user, :html => { :multipart => true } do |f| %>

...... 
 ....

<%= file_field_tag :avatar, multiple: true %>

<% end  %> 
```

用户控制器：

......

```
 if @user.save
     # params[:avatar] will be an array.
     # you can check total number of photos selected using params[:avatar].count
      params[:avatar].each do |picture|      

        @user.images.create(:avatar=> picture)
        # Don't forget to mention :avatar(field name)

      end
    end 
```

而已。图片已上传，这可能不是好方法，但它有效。

# html - 保持菜单和内容框宽度相同

> ID：11605788
> 
> 赞同：0
> 
> 时间：2012-07-23T02:32:17.413
> 
> 标签：html, css

我想听听你对我应该做什么的建议。

我正在尝试使我正在使用的网站上的导航栏和内容框的宽度完全相同。我尝试使用*percents*和*pixel*进行调整。它在我的笔记本电脑上看起来很完美，但在更大的显示器或手机浏览器上却没有。关于我能做什么的任何想法？

您可以在[http://www.shaunmichaelmusic.com/new查看网站](http://www.shaunmichaelmusic.com/new)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:07:52.673

在创建这样的东西时，您可能希望避免使用太多离散的装箱和定位规则。当用户简单地调整浏览器的大小时，它会使你的设计要么扭曲要么不灵活。

更好的方法是这样的：http: [//jsbin.com/abidej](http://jsbin.com/abidej)

随意编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:38:25.570

尝试将您的菜单和样式 CSS 表更改为：位置：相对和宽度：都相同 450 或 480px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:49:56.207

的`#nav`样式完全是 with`px`但 的`#contentbox`样式是`px`and `%`。

我会坚持使用一种计量单位。将填充切换为`padding:14px`或将*所有内容*转换为`%`.

# iphone - iphone NStimer 在屏幕上滑动时变慢

> ID：11605789
> 
> 赞同：0
> 
> 时间：2012-07-23T02:32:28.377
> 
> 标签：iphone, nstimer

在我的应用程序中，我实现了 NSTimer 来计算时间。我有滑动检测，当用户在屏幕上滑动时，动画会连续运行。我的问题是当我在屏幕上滑动时（左/右连续） NSTimer 减慢。谁能告诉我如何解决这个问题？

//代码

```
 gameTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100
                                                          target:self
                                                        selector:@selector(updateGameTimer)
                                                        userInfo:nil
                                                        repeats:YES];

    -(void)updateGameTimer
    {
        counter++;
        tick++;
        if(tick==100){
            tick = 0;
            seconds += 1;
        }
        if(counter==100){
            counter = 0;
        }
        timerLabel.text = [NSString stringWithFormat:@"%i.%02d",seconds,counter];
    } 

//swipe detection

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesMoved:touches withEvent:event];

    UITouch *touch = [touches anyObject];
    //CGPoint curPt = [touch locationInView:self.view];    
    CGPoint newLocation = [touch locationInView:self.view];
    CGPoint oldLocation = [touch previousLocationInView:self.view];
    gameView.multipleTouchEnabled = true;

    if(newLocation.x-oldLocation.x>0){
        swipe_direction = 1;
        //NSLog(@"left");
    }
    else{
        swipe_direction = 2;
        //NSLog(@"right");

    }

    if(swipe_direction==1){
        //animate images
        //play sound effect
    }
    else if(swipe_direction==2){
       //animate images
       //play sound effect
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T02:45:22.580

从[NSTimer](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)文档...

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。如果计时器的触发时间发生在长时间调用期间或运行循环处于不监视计时器的模式下，则计时器不会触发，直到运行循环下次检查计时器。因此，定时器触发的实际时间可能是计划触发时间之后的一个重要时间段。

您的计时器分辨率为 10 毫秒，因此如果运行循环没有足够快地完成（低于 10 毫秒），您将开始注意到实时和计数器之间的延迟。

如果您正在实现游戏，开发人员通常会尝试与 CPU 或时钟速度分离。

看看这个[答案](https://stackoverflow.com/questions/1351234/how-make-a-game-loop-on-the-iphone-without-using-nstimer)

或者看看像[cocos2d](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:best_practices)这样的框架是如何实现自己的调度器的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:04:14.547

从描述中很难看出“减速”是什么意思。由于处理负载，它只是跟不上真实时钟，还是实际上短暂**停止？**

在某些情况下，问题实际上是当某些 UI 进程发生时，如触摸事件处理或滚动，您处于不同的*运行循环模式*。在这种模式下，默认`NSTimer`实例实际上不会被触发，除非你明确告诉 iOS 这样做。

[在此处查看其他答案](https://stackoverflow.com/a/5396764/119114)。

它可能就像将您的计时器添加到正确的运行循环模式的计时器列表一样简单：

```
gameTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100
                                             target:self
                                           selector:@selector(updateGameTimer)
                                            serInfo:nil
                                            repeats:YES];

[[NSRunLoop currentRunLoop] addTimer: gameTimer forMode: NSRunLoopCommonModes]; 
```

这是一个简单的一行更改，看看这是否解决了您的问题。比重新设计整个滴答机制要容易得多。试一试！

# google-chrome - 在 Google Chrome 中为 PDF 添加书签

> ID：11605790
> 
> 赞同：12
> 
> 时间：2012-07-23T02:32:43.357
> 
> 标签：google-chrome, pdf, google-chrome-extension

最近我一直在使用 Google Chrome 阅读很多 PDF 书籍。要转到特定页面，您可以简单地将#page=23 附加到 url（如 file:///C:/my_book.pdf#page=23 中）。这是为当前页码添加书签以便以后继续阅读本书的好方法。

**我的问题：**

有什么方法可以找出您目前在书中的哪一页？

或者

什么是在您的文件系统中为 PDF 文件添加书签的 Chrome 插件？

我尝试了一些扩展，但除非书在服务器中（如 http://localhost/my_book.pdf），否则它们不起作用，这在我的情况下是不需要的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T17:03:22.287

从 Chrome 版本 31+ 开始，如果您完全滚动，页码将由滚动条显示。我不确定何时（哪个版本）添加了此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:42:07.810

它会自动将哈希标签更新为页码吗？

如果是这样，您可以使用`document.location.hash`如下：

```
currentPage = document.location.hash.split("="); currentPage = currentPage[1]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-26T14:40:59.077

不是很用户友好，但您可以将`document.documentElement.scrollTop`属性值附加到控制台上的 url

```
> document.documentElement.scrollTop
<- 4000 
```

书签为“file：//path/to/pdf.pdf#4000”，然后当您重新打开它时，使用该值设置相同的属性

```
document.documentElement.scrollTop = 4000 
```

一个简单的用户脚本应该能够做到这一点......

# php - 同位素 jquery 与演示相同的布局

> ID：11605795
> 
> 赞同：0
> 
> 时间：2012-07-23T02:33:19.230
> 
> 标签：php, javascript, jquery, css, jquery-isotope

我已经下载了 isotope 并尝试实现与下面的演示相同的动画效果：http: [//isotope.metafizzy.co/demos/elements-complete.html](http://isotope.metafizzy.co/demos/elements-complete.html)

似乎我得到的是从左上角到右下角的手风琴式动画，这是我不想要的，相反，我希望看到容器“找到”它们的新位置，就好像它们漂浮在包装器周围一样。就像在演示中一样，它们看起来像从任何地方飘到任何地方——而不是像手风琴那样的动画——这就是我所实现的。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:51:26.397

应用 Isotope 的 shuffle 方法

```
$container.isotope('shuffle'); 
```

# python - 将列表导出到 CSV/空格分隔，并且每个子列表在其自己的列中

> ID：11605796
> 
> 赞同：1
> 
> 时间：2012-07-23T02:33:48.227
> 
> 标签：python, csv, export

我确信有一种简单的方法可以做到这一点，所以就到这里吧。我正在尝试将我的列表导出为列中的 CSV。（基本上，这是另一个程序能够使用我生成的数据的方式。）我有一个名为 [frames] 的组，其中包含 [frame001]、[frame002]、[frame003] 等。我想要 CSV 文件生成的所有值在第一列中包含 [frame001]，在第二列中包含 [frame002]，依此类推。我想如果我可以将文件保存为 CSV，我可以在 Excel 中对其进行操作，但是，我认为有一个解决方案可以通过编程来跳过该步骤。

这是我迄今为止尝试使用的代码：

```
import csv

data = [frames]
out = csv.writer(open(filename,"w"), delimiter=',',quoting=csv.QUOTE_ALL)
out.writerow(data) 
```

我也试过：

```
import csv

myfile = open(..., 'wb')
wr = csv.writer(myfile, quoting=csv.QUOTE_ALL)
wr.writerow(mylist) 
```

如果有办法做到这一点，以便所有值都用空格分隔，那将是理想的，但在这一点上，我已经尝试了几个小时并且无法理解正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:35:02.840

您所描述的是您想要转换二维数据数组。`zip`在 Python 中，只要内部列表的长度相同，您就可以使用该函数轻松实现此目的。

```
out.writerows(zip(*data)) 
```

*如果*它们的长度不同，您可以使用`itertools.izip_longest`一些默认值（偶数）填充剩余的字段`''`。

# asp.net-mvc - 渲染某些字段时将 RDLC 集成到 MVC 视图 #Error 的新功能

> ID：11605800
> 
> 赞同：0
> 
> 时间：2012-07-23T02:34:34.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3, rdlc

我最近使用 Visual Studio 2010 为我的 MVC 应用程序创建了我的第一个 RDLC 报告。

我使用 Report Wizard 创建 Report1.rdlc 并运行以下控制器代码将输出呈现为 PDF。

报表运行时我的数据源引用了我的模型中的站点对象。一切运行良好，但输出中的 4 列中有 2 列呈现为 #Error

两列都有每条记录的数据，没有空值

使 2 #Error 列与呈现的列不同的唯一原因是它们比模型低一级。即4列：

第一个字段 SiteDescription 呈现正常 第二个字段 SiteOperator 将每行的值呈现为 #Error 第三个字段 SiteStatus 将每行的值呈现为 #Error 第四个字段 CapacityMW 呈现正常

注意：SiteOperator 是 Site.SiteOperator.Operator。第三场类似。第一个和第四个是 Site 表中的字段（即本例中的顶层模型）

问题：开发人员还需要做些什么来允许 RDLC 使用模型中的现有对象吗？即我注意到报告向导创建了一个 Report1.rdlc.xml 文件，也许这必须修改，我已经没有这个想法了。任何评论都非常感谢

这是我的控制器代码：

```
 private void RenderReport(string ReportPath, object Model)
    {

        var localReport = new LocalReport { ReportPath = ReportPath };

        var reportDataSource = new ReportDataSource("DataSet1", Model);
        localReport.DataSources.Add(reportDataSource);

        var reportType = "PDF";
        string mimeType;
        string encoding;
        string fileNameExtension;

        //The DeviceInfo settings should be changed based on the reportType
        //http://msdn2.microsoft.com/en-us/library/ms155397.aspx
        string deviceInfo =
        "<DeviceInfo>" +
        "  <OutputFormat>PDF</OutputFormat>" +
        "  <PageWidth>8.5in</PageWidth>" +
        "  <PageHeight>11in</PageHeight>" +
        "  <MarginTop>0.5in</MarginTop>" +
        "  <MarginLeft>1in</MarginLeft>" +
        "  <MarginRight>1in</MarginRight>" +
        "  <MarginBottom>0.5in</MarginBottom>" +
        "</DeviceInfo>";

        Warning[] warnings;
        string[] streams;
        byte[] renderedBytes;

        //Render the report
        renderedBytes = localReport.Render(
            reportType,
            deviceInfo,
            out mimeType,
            out encoding,
            out fileNameExtension,
            out streams,
            out warnings);

        //Clear the response stream and write the bytes to the outputstream
        //Set content-disposition to "attachment" so that user is prompted to take an action
        //on the file (open or save)
        Response.Clear();
        Response.ContentType = mimeType;
        Response.AddHeader("content-disposition", "attachment; filename=foo." + fileNameExtension);
        Response.BinaryWrite(renderedBytes);
        Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:08:50.570

我在 MVC 中使用 RDLC 和源自实体框架生成的 C# 类的模型（使用 POCO 对象模板）。

现在，我的类是一个相对“扁平”的类，只有属性（可空值、数字、字符串、日期时间等），没有其他对象的集合，因此可能会有所作为。

我在没有使用向导的情况下创建了我的 RDLC，但发现要使用 MVC 中的设计器来执行此操作，我必须在项目中添加一个 .aspx 以供设计器工作。我也只是在一个模拟类中有公共静态方法，它返回我用于报表数据源向导等使用的类型的 IEnumerables。

我还使用 EF 来填充我的数据，因此它绝对不需要存储过程：

```
var data = dal.PrintFriendlies.Where( p => p.ApplicationId == applicationId );
viewer.LocalReport.DataSources.Add( new ReportDataSource( "DataSourceName" , data ) ); 
```

我还将返回 PDF 字节，因此您的代码看起来与我使用的非常接近（我同时使用数据源和参数，以及子报告）。

你没有描述你的类结构是什么样的，但我认为它存在层次结构的问题，所以你可能需要将它展平为报告作者喜欢的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:37:54.920

在 RDLC 中接收“#Error”响应时首先要查看的是 Visual Studio 中的“输出/调试”选项卡。对于报告引擎在呈现报告时收到的每个错误，这应该有一个特定的错误消息。虽然并不总是世界上最直观的信息，但它们至少应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:58:44.853

我设法让报告运作良好。我切换到使用存储过程并从控制器调用它。我将 RDLC 文件放在视图中并将其直接渲染为 PDF。对此非常满意，因为我从来不需要在 MVC 应用程序中接触路由，也不需要添加任何带有控件或类似内容的 ASP.NET 页面。非常整洁的解决方案。

# jenkins - 詹金斯中的条件构建（当某些事情发生变化时）

> ID：11605808
> 
> 赞同：1
> 
> 时间：2012-07-23T02:36:04.283
> 
> 标签：jenkins

是否可以在 Jenkins 中进行有条件的构建？例如，它每 5 分钟检查一次新提交的源代码控制，并且只有在发生更改时才会构建？我们目前正在使用 git。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:59:32.690

您可以设置 Jenkins 来轮询您的 VCS 并在有更改时进行构建，但最好使用提交后触发器。' [Polling must die: triggering Jenkins builds from a git hook](http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/) ' 将为您提供有关设置的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:52:32.690

我使用**Build triggers -> Poll SCM**并没有真正看到使用该系统的问题。

# php - php方法未定义错误

> ID：11605810
> 
> 赞同：1
> 
> 时间：2012-07-23T02:36:13.530
> 
> 标签：php

我有一个 Model.class.php 和一个 Bag.class.php，Bag 类扩展了 Model 类。

但是当我尝试调用 Bag.class.php 中定义的函数时，它会显示一个致命错误“调用未定义函数 fill_entity() in”

bag.class.php ：

```
class Bag extends Model{
 public function __construct($table_name){
    $this->table_name = $table_name;
 }

 public function fill_entity($row){
     $this->id = $row['bagID'];
     $this->name = $row['bagName'];
     $this->price = $row['bagPrice'];
     $this->url = $row['bagURL'];
     $this->img_url = $row['bagImgURL'];
     $this->mall_id = $row['mallID'];
     $this->brand_id = $row['brandID'];
 } 
```

这是我调用此函数的 php 页面：

```
$bag = new Bag($bagtype);
$bag.fill_entity($row);  <---- error on this line. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:38:18.510

在 PHP 中，它将是`$bag->fill_entity($row);`而不是`$bag.fill_entity($row);`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T02:38:34.493

您使用了错误的语法。PHP 不使用点表示法，而是使用[`->`（箭头/指针表示法）](https://softwareengineering.stackexchange.com/questions/19686/what-kind-of-notation-is)

尝试使用这个：

```
$bag->fill_entity($row); 
```

（`.`PHP 中仍在使用，但用于[字符串连接](http://php.net/manual/en/language.operators.string.php)。）

不要因为错过这个而感到难过，当我第一次处理 PHP 时，我做了很多次。

# c# - C#有没有办法制作时间范围列表？可配置

> ID：11605813
> 
> 赞同：6
> 
> 时间：2012-07-23T02:36:52.880
> 
> 标签：c#, .net, visual-studio-2010

有没有办法列出时间范围？例如： 一个列表包含： 12:00 到 1:00 pm 1:00 到 2:00 pm 等等... 其中分割部分是配置。我认为您必须使用日期时间并将其划分为某个数字（在这种情况下为一小时）

有人可以指出我正确的方向或提供一个例子吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T02:49:59.833

没有定义时间范围的内置类型，但通过组合 a`DateTime`和 a来创建一个非常容易`TimeSpan`。例如：

```
struct TimeRange
{
    private readonly DateTime start;
    private readonly TimeSpan duration;

    public TimeRange ( DateTime start, TimeSpan duration )
    {
        this.start = start;
        this.duration = duration;
    }
} 
```

然后，您可以`List<TimeRange>`使用特定`DateTime`作为起点并`TimeSpan`为每个元素添加所需的内容来构建一个。例如，这是一个非常基本的实现，它`TimeRange`包含一个调用的方法，该方法根据子范围的当前和所需的持续时间`Split`返回一个。`IEnumerable<TimeRange>``TimeRange`

```
struct TimeRange
{
    private readonly DateTime start;
    private readonly TimeSpan duration;

    public TimeRange ( DateTime start, TimeSpan duration )
    {
        this.start = start;
        this.duration = duration;
    }

    public DateTime From { get { return start; } }

    public DateTime To { get { return start + duration; } }

    public TimeSpan Duration { get { return duration; } }

    public IEnumerable<TimeRange> Split (TimeSpan subDuration)
    {
        for (DateTime subRangeStart = From; subRangeStart < this.To; subRangeStart += subDuration)
        {
            yield return new TimeRange(subRangeStart, subDuration);
        }
    }

    public override string ToString()
    {
        return String.Format ("{0} -> {1}", From, To);
    }
} 
```

然后，您可以执行以下操作：

```
TimeRange mainRange = new TimeRange(DateTime.Now, new TimeSpan(12, 0, 0));
List<TimeRange> rangeList = mainRange.Split(new TimeSpan(1, 0, 0)).ToList(); 
```

这将列出从当前时间开始的 1 小时持续时间的 12 个时间范围。

** 更新 **

请注意，上述实现是非常基本的。例如，如果子持续时间不是父范围的整数部分，则该`Split`方法将愉快地生成最后一个子范围的结尾超出父范围的结尾的范围。但是，很难为这种事情添加检查。真正的问题是你想在这种情况下发生什么。

创建一个无需显式父范围即可`TimeRange.CreateList`构建 a的静态方法也很容易。`List<TimeRange>`

# cordova - 运行煎茶 + phonegap + 黑莓

> ID：11605816
> 
> 赞同：0
> 
> 时间：2012-07-23T02:37:40.110
> 
> 标签：cordova, sencha-touch, blackberry-webworks

我使用黑莓 phonegap 运行 sencha 应用程序。对于我遵循的这个步骤；1.使用命令构建sencha应用程序（sencha app build package） 2.创建blackberry phonegap项目并在此创建的www文件夹下 3.从sench build中复制所有文件并粘贴到www文件夹中 4.运行项目后运行blackberry phonegap项目我得到白屏。可以请任何人告诉我我做错了什么。

我的 index.html 代码是：

```
 <!DOCTYPE HTML><html manifest="" lang="en-US">
  <head>
  <meta charset="UTF-8">
  <meta name="format-detection" content="telephone=no">
  <title>RetailBanking</title>
   <script type="text/javascript">
   (function(h){
       function f(c, d){

          document.write('<meta name="' + c + '" content="' + d + '">')
           }
          if ("undefined" === typeof g) 
         var g = h.Ext = {};
           g.blink = function(c){
                 var d = c.js || [], c = c.css || [], b, e, a;
                  f("viewport", "width=device-width, initial-scale=1.0, maximum-              
                 scale=1.0, minimum-scale=1.0, user-scalable=no");
              f("apple-mobile-web-app-capable", "yes");
              f("apple-touch-fullscreen", "yes");
            for (b = 0, e = c.length; b < e; b++) {

      a = c[b], "string" != typeof a && (a = a.path), document.write('<link             
         rel="stylesheet" href="' + a + '">');
         }
           for (b = 0, e = d.length; b <e; b++) {

             a = d[b], "string" != typeof a && (a = a.path), document.write('<script 
            src="' + a + '"><\/script>')
         }
       }
            })(this);
          ;
      Ext.blink({
         "id": "0e9adf70-bf82-11e1-97b4-2d0be393dffb",
        "js": [{
         "path": "cordova-1.9.0.js",
          "type": "js"
           }, {
          "path": "sdk/sencha-touch.js",
          "type": "js"
                }, {
          "path": "sdk/sencha-touch-all.js",
             "type": "js"
                   }, {
                "path": "Messages.js",
                  "type": "js"
                             }, {
                         "path": "constants.js",
                                "type": "js"
                            }, {
                            "path": "math-uuid.js",
                               "type": "js"
                              }, {
                              "path": "app.js",
                             "update": "delta",
                                 "type": "js"
                                       }],
                                   "css": [{
                            "path": "resources/css/app.css",
                                 "update": "delta",
                                   "type": "css"
                              }]
                              })
                </script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true">
           </script>
          </head>
          <body>

          </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:55:01.610

确保您的配置文件中有正确的访问元素。您需要将 maps.google.com 域列入白名单，以允许您的应用使用其资源。PhoneGap 网站提供了有关将域列入白名单的[更多信息](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide_blackberry)。

# c# - Windows 身份验证和自定义 SQL 配置文件/角色成员资格

> ID：11605818
> 
> 赞同：1
> 
> 时间：2012-07-23T02:37:57.670
> 
> 标签：c#, asp.net-mvc, asp.net-membership, membership-provider

最好将 Windows 身份验证与自定义 sql 配置文件和角色成员资格一起使用？我们目前抓取 windows.identity.name（域/用户名）并在 sql server 中查找信息以检索配置文件和角色信息。我想通过利用会员提供商来提高效率。

我该怎么做呢？我们目前使用 mvc 和 webforms 在企业环境中开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:20:37.800

您当然可以将 SqlRoleProvider 与 Windows 身份验证一起使用。只需在 Web.config 中配置并启用 RoleManager。

不幸的是，您需要手动调用 aspnet_Users_CreateUser 存储过程来使用您的用户填充 aspnet_Users 表。（用户名将是您的域名，例如，MYDOMAIN\myusername）。

有了这些，您就可以使用 RoleManager API 创建角色并将用户与角色相关联，然后用于`User.IsInRole`测试角色成员资格。

# java - R无法解析为变量无法清理项目

> ID：11605823
> 
> 赞同：-2
> 
> 时间：2012-07-23T02:38:33.490
> 
> 标签：java, android, xml, r.java-file

我本周早些时候已经发布了这个问题，但仍然没有运气，也没有回答我为什么得到这个问题。

我什至无法清理项目，因为我收到此错误：

```
[2012-07-22 19:34:09 - CannonGame] W/ResourceType( 2808): Bad XML block: header size 116 or total size 0 is larger than data size 0
[2012-07-22 19:34:09 - CannonGame] C:\Users\Gaming\workspace\CannonGame\res\menu\main.xml:2: error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings'). 
```

有人告诉我该怎么做！这是今晚到期的：/我整个星期都在努力，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:06:11.723

好吧，对于这篇文章的答案，错误是说在第 2 行引用的任何资源`main.xml`都无法通过`title`设置为存储在`@string/menu_settings`. 确保您的参考是正确的。

至于 Eclipse 不解析`R.java`为变量，请尝试编辑 XML 文件，然后保存更改（即使只是文件末尾的尾随空格）。这将重建引用并重新编译`R.java`。如果这不起作用，请检查所有出现此错误的活动，并确保`R.java`正在导入的文件是. `your.package.name.R`，而不是`android.R`.

# shortest-path - 关于dijkstra和A*算法的查询速度

> ID：11605827
> 
> 赞同：0
> 
> 时间：2012-07-23T02:39:09.493
> 
> 标签：shortest-path, dijkstra

我正在尝试分析 A* 和 Dijkstra 算法的速度。我正在使用[http://www.boost.org/doc/libs/1_38_0/libs/graph/example/astar-cities.cpp](http://www.boost.org/doc/libs/1_38_0/libs/graph/example/astar-cities.cpp)和[http://www.boost.org/doc/libs/1_50_0提供的代码/libs/graph/doc/dijkstra_shortest_paths.html](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/dijkstra_shortest_paths.html)。我尝试了一个包含 500 条边和 300 个节点的简单图。

我期待 A* 比 Dijkstra 表现更好，因为在 Dijkstra 中找到了从源顶点到每个其他顶点的最短距离。另一方面，在 A* 中，只找到到目标节点的最短距离。

然而，分析表明 Dijkstra 的表现略好于 A*。有可能还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:17:39.183

Djikstra 的算法使用队列，而 A* 使用优先级队列。一般来说，队列将比优先级队列执行得更好*（例如，使用链表或循环数组`O(1)`从队列中入队/出队是，而使用堆从优先级队列中入队/出队是`O(log n)`）*。

然而，一般来说，这种微小差异导致 A* 运行速度比 Djikstra 慢的情况往往是两种算法无论如何都运行得非常快的情况——在小迷宫和只需要考虑少量路径的迷宫中*（例如作为一个曲折的迷宫）*。在较慢的情况下*（在没有障碍物的开阔地带）*，A * 应该跑得更快。

由于您的案例有 300 个节点，因此您的代码很可能有问题。没有看到它，我们无法为您提供任何进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:42:57.637

听起来您的**启发式**方法不准确，或者您的 A* 在数据集上执行**的传递次数**比 Dijkstra 多（同样，可能是由于启发式方法）。

编辑：例如，如果您的 A* 实现遍历整个数据集并且每次只扩展一个节点（具有最佳启发式的节点），那么它可以执行比 Dijkstra*更多的*传递（它会尽快扩展每个节点） ）。

如果可能，请分析每个算法执行的*遍*数，而不是只查看整体处理时间。

# maps - 使用原生谷歌地图数据库存储定位器

> ID：11605829
> 
> 赞同：0
> 
> 时间：2012-07-23T02:39:23.120
> 
> 标签：maps, store

有什么方法可以使用 Google 地图本地标记，而不必创建我自己的数据库？

找不到任何谈论这种可能性的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:54:31.857

您可以使用 Google Places API：[https ://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

但是为什么不创建自己的以确保准确性呢？

# python - 多个wsgi py文件

> ID：11605832
> 
> 赞同：0
> 
> 时间：2012-07-23T02:39:56.117
> 
> 标签：python, django, wsgi

我收到了一个由其他人开发的项目，我注意到三个 wsgi.py 文件。我如何确定哪个是校长？

我有 django_wsgi.py、uwsgi.py、project_wsgi.py

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:46:50.527

让我们假设*其他人*身体不适，他/她没有写任何文档，并且没有其他人对此一无所知。根据它们的名称，看起来好像一个设计用于[django](https://www.djangoproject.com/)，另一个用于[uwsgi](http://projects.unbit.it/uwsgi/)。至于第三个，我不熟悉任何名为*project*的 wsgi 实现，所以我只能推测，但我想说*所有三个*都是主体：一个如果你使用 django，另一个用于 uwsgi，另一个用于......我不知道， 发展？

# c++ - GLFW 的 VC++ LNK 错误

> ID：11605835
> 
> 赞同：7
> 
> 时间：2012-07-23T02:40:34.557
> 
> 标签：c++, visual-studio-2010, linker, glfw

我正在使用 VC++ 2010 来处理一些 OpenGL。然而，它正在成为一种痛苦。我不断收到错误代码。

这是我正在使用的代码：

```
// Include standard headers
#include <stdio.h>
#include <stdlib.h>

// Include GLEW
#include <GL/glew.h>

// Include GLFW
#include <GL/glfw.h>

// Include GLM
#include <glm/glm.hpp>
using namespace glm;
int main( void ){        
    // Initialise GLFW
    if( !glfwInit() ){

            fprintf( stderr, "Failed to initialize GLFW\n" );
            return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
            fprintf( stderr, "Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\n" );
            glfwTerminate();
            return -1;
    }

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
            fprintf(stderr, "Failed to initialize GLEW\n");
            return -1;
    }

    glfwSetWindowTitle( "Tutorial 01" );

    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    // Dark blue background
    glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

    do{
         // Draw nothing, see you in tutorial 2 !

         // Swap buffers
         glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
         glfwGetWindowParam( GLFW_OPENED ) );

// Close OpenGL window and terminate GLFW
    glfwTerminate();
    return 0;
} 
```

以下是我在编译上述代码后从 Visual Studio 得到的错误。输出似乎是链接问题，但是，我不确定如何正确地将 glfw 要求与编辑器链接。示例错误：

```
Error   52  error LNK1120: 10 unresolved externals  C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\Debug\OpenGL Fun.exe OpenGL Fun
Error   42  error LNK2001: unresolved external symbol __imp__glClear@4  C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   39  error LNK2001: unresolved external symbol __imp__glClearColor@16    C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   50  error LNK2001: unresolved external symbol __imp__glGetIntegerv@8    C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(glext.obj)   OpenGL Fun
Error   45  error LNK2001: unresolved external symbol __imp__wglGetProcAddress@4    C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_glext.obj) OpenGL Fun
Error   41  error LNK2019: unresolved external symbol __imp__glClear@4 referenced in function _glfwOpenWindow   C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(window.obj)  OpenGL Fun
Error   38  error LNK2019: unresolved external symbol __imp__glClearColor@16 referenced in function _main   C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\Main.obj  OpenGL Fun
Error   40  error LNK2019: unresolved external symbol __imp__glewInit@0 referenced in function _main    C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\Main.obj  OpenGL Fun
Error   48  error LNK2019: unresolved external symbol __imp__glGetFloatv@8 referenced in function __glfwPlatformSetWindowSize   C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   49  error LNK2019: unresolved external symbol __imp__glGetIntegerv@8 referenced in function __glfwPlatformSetWindowSize C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   51  error LNK2019: unresolved external symbol __imp__glGetString@4 referenced in function __glfwParseGLVersion  C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(glext.obj)   OpenGL Fun
Error   43  error LNK2019: unresolved external symbol __imp__wglCreateContext@4 referenced in function _createContext   C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   47  error LNK2019: unresolved external symbol __imp__wglDeleteContext@4 referenced in function _destroyWindow   C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   44  error LNK2019: unresolved external symbol __imp__wglGetProcAddress@4 referenced in function _initWGLExtensions  C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun
Error   46  error LNK2019: unresolved external symbol __imp__wglMakeCurrent@8 referenced in function _createWindow  C:\Users\Username\documents\visual studio 2010\Projects\OpenGL Fun\OpenGL Fun\GLFW.lib(win32_window.obj)    OpenGL Fun 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T02:48:54.773

在解决方案资源管理器中，右键单击您的项目并选择`properties`. 从配置列表框中，选择“所有配置”。在左窗格中，选择`Linker`子树，然后`input`选择选项。`opengl32.lib`在“其他依赖项”下添加。

# sql - 我应该使用外部表中的外键或字符串值吗？

> ID：11605836
> 
> 赞同：4
> 
> 时间：2012-07-23T02:40:38.687
> 
> 标签：sql, database, database-design

假设您有一个员工表和一个工作列表表。每个员工必须在表中拥有一份工作。通常我会给每个工作一个 id 并将其作为员工表中的外键引用。然而，我的一位同事建议我们将作业列表表用作字典，并且在插入/更新之前，我们检查表中是否存在“作业类型”，然后将作业类型作为字符串插入到员工表中。

据我所知

**优点：**

> 更快的选择（尽管主键上的连接应该产生微小的差异）

**缺点：**

> 按工作类型选择员工的速度较慢
> 更难改变工作类型

以上哪种方法最好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T03:11:38.393

我不确定我是否理解为什么会有冲突。您知道主键和外键都可以像数字类型一样容易地成为字符串类型吗？通过将工作类型字段设置为工作类型表中的主键和员工表中的外键，您可以同时获得这两种系统的优势。

这种方法的优点是您不需要将工作类型表连接回员工表来获取工作类型的描述性名称，同时您仍然使用数据库来提供对数据库很重要的引用完整性设计。

缺点是如果您有大量员工，您将使用更多存储资源，并且如果您更改职位描述，您需要通过员工表级联更改。

虽然使用整数作为主键很常见（并且某些框架需要它），但没有规则说必须这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:48:47.247

如果这会使管理工作类型变得更加困难（我假设这是您或其他人将要做的事情），那么对于性能的小幅提升真的值得吗？听起来这可能会使事情变得过于复杂以获得小奖励。为了简单起见，我想说最好的做法是坚持使用外键。

# python - 谷歌应用引擎下载包含文件的文件

> ID：11605846
> 
> 赞同：0
> 
> 时间：2012-07-23T02:43:00.107
> 
> 标签：python, google-app-engine, download

好的，我有：

```
class Content(db.Model):
    code=db.TextProperty() 
```

并且在数据库中存储了 3 个不同的代码值。我将如何创建一个 zip 文件，将代码的三个值存储在将下载的 3 个单独文件中？

基于 eric.f 的回答：我重写了他的代码，以使其达到我想要的效果：

```
 contents = db.GqlQuery("SELECT * FROM Content ORDER BY created DESC")
    output = StringIO.StringIO()
    with zipfile.ZipFile(output, 'w') as myzip:
        for content in contents:
            if content.code:
                code=content.code
            else:
                code=content.code2
            myzip.writestr('udacity_code'+`content.key().id()`, code)
    self.response.headers["Content-Type"] = "application/zip"
    self.response.headers['Content-Disposition'] = "attachment; filename=test.zip"
    self.response.out.write(output.getvalue()) 
```

虽然我有一个错误......

```
self.response.out.write(output.getvalue(), "utf-8")
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/StringIO.py", line 270, in getvalue
UnicodeDecodeError: 'ascii' codec can't decode byte 0xb4 in position 10: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:14:33.667

```
import zipfile
import StringIO

output = StringIO.StringIO()

with zipfile.ZipFile(output, 'w') as myzip:
    myzip.writestr('file1.txt', 'aaaaaaaaa')
    myzip.writestr('file2.txt', 'bbbbbbbbb')
    myzip.writestr('file3.txt', 'ccccccccc') 
```

然后做出响应，设置`output.getvalue()`为内容，并设置标题如下：

```
Content-type: application/zip
Content-disposition: attachment; filename=test.zip 
```

# objective-c - 为什么这两个 NSString 指针相同？

> ID：11605851
> 
> 赞同：8
> 
> 时间：2012-07-23T02:43:38.247
> 
> 标签：objective-c, cocoa, nsstring

当我`alloc`和`init`两个`NSString`变量比较它们的指针时，它们是相同的。这是一个显示这一点的片段：

```
NSString *s1 = [[NSString alloc] initWithString:@"hello world"];
NSString *s2 = [[NSString alloc] initWithString:@"hello world"];

if (s1 == s2) {
    NSLog(@"==");
}else {
    NSLog(@"!=");
} 
```

为什么都`s1`和`s2`一样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T05:20:19.220

这里发生了三件事：

首先，您传入的两个相同的字符串文字`initWithString:`将具有相同的起始地址。这是对常量数据的明显优化。

其次，当你用字符串嵌套 alloc 和 init 时，运行时执行优化，alloc 调用本质上变成了无操作。这是使用`NSPlaceholderString`类完成的。这意味着您从这里返回的指针将来自`initWithString:`，而不是来自 alloc。

第三，在幕后，`initWithString:`调用`CFStringCreateCopy`，您可能会发现它具有以下行为： 由于此例程用于创建不可变字符串，因此它具有优化。它只是调用`CFRetain()`并返回传入的相同对象。

感谢您提出非常有趣的问题。我很高兴弄清楚它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:04:52.853

@"hello world" 字符串属于类。`NSConstantString`如果您在两个地方使用@"hello world"，它们将引用同一个对象。

从[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html#//apple_ref/doc/uid/20000148-SW1)。

> 在源代码中创建字符串对象的最简单方法是使用 Objective-C 的 @"..." 构造：
> 
> NSString *temp = @"/tmp/scratch"; 请注意，以这种方式创建字符串常量时，您应该使用 UTF-8 字符。这样的对象是在编译时创建的，并且存在于程序的整个执行过程中。**编译器使此类对象常量**在每个模块的基础上都是唯一的，并且它们永远不会被释放，尽管您可以像处理任何其他对象一样保留和释放它们。您也可以像执行任何其他字符串一样将消息直接发送到字符串常量：
> 
> BOOL 相同 = [@"comparison" isEqualToString:myString];

# java - 检查是否已过 24 小时（从字符串中读取）

> ID：11605858
> 
> 赞同：0
> 
> 时间：2012-07-23T02:45:09.263
> 
> 标签：java

我将日期保存在以下格式的文件中作为字符串。

```
Sat Jul 21 23:31:55 EDT 2012 
```

如何查看是否已过 24 小时？我是初学者所以请解释一下=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:53:58.067

我建议将您的信息存储为[`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)具有`compareTo ()`功能的信息。

如果要将现在与当前时间进行比较，可以使用`System.getCurrentTimeMillis()`获取当前时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:17:57.797

你可以这样做：

```
try {

    // reading text...
    Scanner scan = new Scanner( new FileInputStream( new File( "path to your file here..." ) ) );
    String dateString = scan.nextLine();

    // creating a formatter.
    // to understand the format, take a look here: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html
    // EEE: Day name of week with 3 chars
    // MMM: Month name of the year with 3 chars
    // dd: day of month with 2 chars
    // HH: hour of the day (0 to 23) with 2 chars
    // mm: minute of the hour with 2 chars
    // ss: second of the minute with 2 chars
    // zzz: Timezone with 3 chars
    // yyyy: year with 4 chars
    DateFormat df = new SimpleDateFormat( "EEE MMM dd HH:mm:ss zzz yyyy", Locale.US );

    // parsing the date (using the format above, that matches with your date string)
    Date date = df.parse( dateString );

    // now!
    Date now = new Date();

    // gets the differente between the parsed date and the now date in milliseconds
    long diffInMilliseconds = now.getTime() - date.getTime();

    if ( diffInMilliseconds < 0 ) {
        System.out.println( "the date that was read is in the future!" );
    } else {

        // calculating the difference in hours
        // one hour have: 60 minutes or 3600 seconds or 3600000 milliseconds
        double diffInHours = diffInMilliseconds / 3600000D;
        System.out.printf( "%.2f hours have passed!", diffInHours );

    }

} catch ( FileNotFoundException | ParseException exc ) {
    exc.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T02:53:18.933

我不确定我是否完全理解了这个问题 - 您是否有两个日期进行比较，或者您是否希望在 24 小时后继续定期检查？如果比较两个日期/时间，我建议查看 joda 或 date4j。使用 joda，可以研究使用两个日期之间的间隔：

```
Interval interval = new Interval(previousTime, new Instant()); 
```

以前的时间是你提到的时间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-08T22:46:07.807

# 定义一天

你真的是指一天还是24小时？由于夏令时的废话，一天的长度可能会有所不同，例如在美国是 23 或 25 小时。

# 避免使用 3 个字母的时区代码

该字符串格式是日期时间的可怕表示。很难解析。它使用 3 个字母的时区代码，此类代码既不标准化也不唯一。如果可能，请选择其他格式。显而易见的选择是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)，例如：`2014-07-08T04:17:01Z`.

使用[正确的时区名称](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。

# 避免使用 juDate 和 .Calendar

与 Java 捆绑在一起的 java.util.Date 和 .Calendar 类是出了名的麻烦。避开他们。

取而代之的是使用古老的[Joda-Time](http://www.joda.org/joda-time/)库或 Java 8 中捆绑的新 java.time 包（并受 Joda-Time 启发）。

# 乔达时间

这是 Joda-Time 中的一些示例代码。

获取当前时刻。

```
DateTime now = DateTime.now(); 
```

解析输入字符串。

```
String input = "Sat Jul 21 23:31:55 EDT 2012";
DateTime formatter = DateTimeFormat.forPattern( "EEE MMM dd HH:mm:ss zzz yyyy" ).with Locale( java.util.Locale.ENGLISH );
DateTime target = formatter.parseDateTime( input ); 
```

计算 24 小时（或第二天）。

```
DateTime twentyFourHoursLater = target.plusHours( 24 ); 
```

测试当前时刻是否发生在之后。

```
boolean expired = now.isAfter( twentyFourHoursLater ); 
```

或者，如果您想要第二天而不是 24 小时，请使用`plusDays`而不是`plusHours`. 如有必要，调整到所需的时区。时区*至关重要*，因为它定义了日期/日期并应用了异常规则，例如[夏令时](http://en.wikipedia.org/wiki/Daylight_saving_time)。

```
DateTime targetAdjusted = target.withZone( DateTimeZone.forID( "Europe/Paris" ) );
…
DateTime aDayLater = targetAdjusted.plusDays( 1 ); // Go to next day, accounting for DST etc.
boolean expired = now.isAfter( aDayLater ); // Test if current moment happened after. 
```

# haskell - 我可以在 IO monad 中使用 printf 吗？

> ID：11605861
> 
> 赞同：1
> 
> 时间：2012-07-23T02:45:59.167
> 
> 标签：haskell

stopLoss 函数会导致以下错误：

```
Could not deduce (Text.Printf.PrintfType (m a0))
arising from the ambiguity check for `stopLoss'
from the context (Monad m,
                Text.Printf.PrintfType (m b),
                Text.Printf.PrintfType (m a))
bound by the inferred type for `stopLoss':
  (Monad m, Text.Printf.PrintfType (m b), 
   Text.Printf.PrintfType (m a)) =>
   Float -> Float -> Float -> m b
Possible fix:
   add an instance declaration for (Text.Printf.PrintfType (m a0))

When checking that `stopLoss'
has the inferred type `forall (m :: * -> *) a b.
  (Monad m, Text.Printf.PrintfType (m b),
   Text.Printf.PrintfType (m a)) =>
   Float -> Float -> Float -> m b'
Probable cause: the inferred type is ambiguous 
```

功能：

```
stopLoss qty pb lossRate = do
    let t = qty * pb * (1 + sxf)
    printf "Stop Loss at: %.2f\n" ((pb - (t * lossRate) / qty) :: Float)
    printf "Lost Money: %.2f\n"  ((t * lossRate) :: Float) 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:13:05.543

的类型`printf`是`PrintfType r => String -> r`。以下实例`PrintfType`可用：

```
IsChar c => PrintfType [c]   
PrintfType (IO a)    
(PrintfArg a, PrintfType r) => PrintfType (a -> r) 
```

（最后一个只是为了让它`printf`表现得像多变量一样。）

这`stopLoss`是一个多态函数；`IO ()`无法自动推断类型，GHC 假设该函数适用于任何 monad。因此，GHC 抱怨`PrintfType`通用单子的实例不存在。

提供类似的类型签名`Float -> Float -> Float -> IO ()`应该会有所帮助。

# hibernate - hibernate - 如何在 DetachedCriteria 中设置最大结果？

> ID：11605862
> 
> 赞同：4
> 
> 时间：2012-07-23T02:46:01.367
> 
> 标签：hibernate, detachedcriteria

我正在使用`DetachedCriteria`，我只想要查询的第一个结果，所以我想做类似`LIMIT 1`in 的事情`DetachedCriteria`。当我搜索谷歌时，我发现`setMaxResult`了它的标准。

我要怎么进去`DetachedCriteria`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T15:12:13.783

我也只是在研究这个。我不喜欢必须使用标准的解决方案，因为 DetachedCriteria 的整个目的是在您还没有 Session 时定义它。在我处理的应用程序中，这也不是一个选项，因为创建 DetachedCriteria 的位置与实际执行的位置相去甚远。

无论如何，我发现这个巧妙的技巧能够在创建 DetachedCriteria 时定义限制。DetachedCriteria 采用 Criterion 实例，但 Criterion 使用实际的 Criteria（和 CriteriaQuery）回调，因此您可以在那时设置 maxResults。

唯一的问题是 Hibernate 已经在构造 sql 字符串并且已经在查询字符串中添加了一个“和”，因为它需要一个比较语句。但是我们可以通过返回 '1 = 1' 来伪造它。

请参阅下面的 LimitBy 标准的实现。

```
public class Limit {
        private Limit() {}

        public static LimitBy by(int maxResults) {
            return new LimitBy(maxResults);
        }

        static class LimitBy implements Criterion {
            private int max;

            public LimitBy(int max) {
                this.max = max;
            }

            @Override
            public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
                criteria.setMaxResults(max);
                return "1 = 1";
            }

            @Override
            public TypedValue[] getTypedValues(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
                return new TypedValue[0];
            }
        }
    } 
```

所以有了这个 LimitBy 类，现在可以限制 DetachedCriteria 使用

```
DetachedCriteria.forClass(..)
  .add(Limit.by(1)); 
```

现在，这只返回查询的第一个结果。

**这适用于 Postgres，并且未在其他数据库上进行测试，但我希望它也适用于其他数据库。当某些数据库不起作用时的响应。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T16:05:43.217

您可以使用 CRITERIA API

```
detachedcrit.getExecutableCriteria(session).SetMaxResults(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T09:50:20.897

@Joost den Boer 发布的解决方案对我不起作用，但我找到了使用类似方法的解决方法：

```
public class PageRestrictions {

    public static class Page implements Criterion {

        private Integer limit;

        private Integer offset;

        private Order order;

        public Page offset(Integer offset) {
            this.offset = offset;
            return this;
        }

        public Page limit(Integer limit) {
            this.limit = limit;
            return this;
        }

        public Page by(Order order) {
            this.order = order;
            return this;
        }

        @Override
        public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {

            StringBuilder builder = new StringBuilder("1=1");

            if (this.order != null) {
                builder.append(" order by ").append(this.order.toSqlString(criteria, criteriaQuery));
            }

            if (this.offset != null) {
                builder.append(" offset ").append(this.offset);
            }

            if (this.limit != null) {
                builder.append(" limit ").append(this.limit);
            }

            return builder.toString();
        }

        @Override
        public TypedValue[] getTypedValues(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
            return new TypedValue[0];
        }
    }

    public static Page offset(Integer offset) {
        Page page = new Page();
        page.offset(offset);
        return page;
    }

    public static Page limit(Integer limit) {
        Page page = new Page();
        page.limit(limit);
        return page;
    }

    public static Page by(Order order) {
        Page page = new Page();
        page.by(order);
        return page;
    }
} 
```

# c# - 运行一段时间后与 ServiceKnownType 相关的 WCF CommunicationException（或 IIS 应用程序池回收？）

> ID：11605864
> 
> 赞同：3
> 
> 时间：2012-07-23T02:46:58.173
> 
> 标签：c#, wcf, iis, serialization, communicationexception

我有一个 WCF 服务，托管在 IIS 中。该服务由具有接口类型作为参数或返回类型的通用接口定义，因此我们使用 ServiceKnownType 属性来定义所述接口在运行时的可用实现。

这一切似乎都运行良好，但是有时我们会看到对这些服务的所有请求都失败并出现 CommunicationException；“*尝试序列化参数[http://tempuri.org/](http://tempuri.org/)时出错：**arg。InnerException**消息是 'Type ' **MyNamespace.SomeInterfaceImplementation** '，数据合同名称为 'SomeInterfaceImplementation:http://schemas.datacontract.org/2004 /07/MyNamespace' 不是预期的。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。'。请参阅 InnerException更多细节。* ”

我无法可靠地重现此错误，但它经常在服务运行一段时间后出现（例如，在周末）。我最初推测这是由于 IIS 应用程序池回收而发生的，但是手动回收或按小间隔（例如 2 分钟）安排的回收无法重现该问题。

**通过从“ServiceKnownTypes”的提供者中排除“ MyNamespace.MyType** ”，我能够可靠地重现异常，但这并不能真正告诉我为什么这首先会间歇性发生。

以下代码段显示了服务声明。它是针对不同实现类型的通用服务**. 请注意，产生 CommunicationException 的是操作参数“ **arg ”。****

 **```
[ServiceKnownType("GetKnownTypes", typeof(KnownTypesCache))]
[ServiceContract]
public interface IMyService<T>
    where T : class, IMyServiceTypeInterface
{
    [OperationContract]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    MyReturnType HandleRequest(T element, ISomeInterfaceArgumentType arg);
} 
```

现在，为**ISomeInterfaceArgumentType**提供已知类型的 KnownTypesCache 的实现是这样的；

```
public static class KnownTypesCache
{
    private static readonly List<Assembly> queriedAssemblies = new List<Assembly>();
    private static readonly List<Type> knownTypes = new List<Type>();

    static KnownTypesCache()
    {
        // get all available assemblies at this time
        List<Assembly> assemblies = AppDomain.CurrentDomain.GetAssemblies().ToList();

        // find all available known types publishers
        IEnumerable<Type> knownTypesPublisherTypes = assemblies
            .Where(a => !queriedAssemblies.Contains(a)) // exclude already queried assemblies to speed things up
            .SelectMany(s => s.GetTypes())
            .Where(p => typeof(IKnownTypesPublisher).IsAssignableFrom(p) && p.HasAttribute(typeof(KnownTypesPublisherAttribute)));

        // add all known types
        foreach (Type type in knownTypesPublisherTypes)
        {
            IKnownTypesPublisher publisher = (IKnownTypesPublisher)Activator.CreateInstance(type);

                AddRange(publisher.GetKnownTypes());
            }
        }

        // record the assemblies we've already loaded to avoid relookup
        queriedAssemblies.AddRange(assemblies);
    }

    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider)
    {
        return knownTypes;
    }
} 
```

基本上，这个全局静态缓存会查询 AppDomain 中所有加载的程序集，以查找“IKnownTypesPublisher”的实现者，这反过来又为每个程序集提供可用的序列化类型。因此，每个程序集有一个 IKnownTypesPublisher，它只负责识别该程序集中的类型，并且 KnownTypesCache 简单地聚合所有这些并在运行时返回给 DataContractSerializer。

正如我所提到的，这种方法似乎在 99% 的情况下都能正常工作。然后我无法识别，它停止工作，只能通过调用**iisreset**来解决。

我现在很困惑，我尝试了各种解决方案，但是因为我只能等到星期一的第一件事才能可靠地重现这个错误，所以这有点困难！

我剩下的最后一个想法是，在所有程序集加载到 AppDomain 之前，可能会调用静态 KnownTypesCache 构造函数，因此缓存在实例的生命周期内将是空的......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:15:45.553

> 我剩下的最后一个想法是，在将所有程序集加载到 AppDomain 之前，可能会调用静态 KnownTypesCache 构造函数

有了这个，您可能正在回答自己的问题。

`AppDomain.GetAssemblies()`只返回那些已经加载到 AppDomain 执行上下文中的程序集。在对创建新 AppDomain 的 IIS 工作进程进行任何回收之后，您在第一次使用 KnownTypesCache 类型和加载包含您的 IKnownTypesPublisher 类型之一的任何程序集之间存在潜在的竞争条件。间歇性的、难以重现的错误通常是由竞争条件引起的。

为了使您的设计正常工作，您需要以某种方式确保服务实现总是在调用 KnownTypesCache 方法之前加载所有包含您已知类型的程序集。**

# xcode - UIViewController 类

> ID：11605865
> 
> 赞同：1
> 
> 时间：2012-07-23T02:47:04.377
> 
> 标签：xcode, uiviewcontroller

如果我使用多个视图控制器，我是否需要为每个视图控制器创建一个单独的 UIViewContoller 类，或者我可以将同一个新类与每个单独的视图控制器相关联吗？在什么情况下我会创建一个新类来关联一个单独的 VC？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:53:40.250

视图控制器管理视图的逻辑，提供一种在视图和模式之间传输数据的方法，并对最终用户通过用户界面发起的事件做出反应。

如果多个视图碰巧共享相同的模型视图交互逻辑，那么在它们之间共享视图控制器是个好主意。然而，这有点罕见：在实践中，不同的视图调用不同的视图控制器。所以在实践中，几乎每次你需要一个视图控制器时，你都会为一个新的视图控制器创建一个新类。您也可以从几个视图控制器开始，然后如果您在它们的代码中发现足够数量的共性，则将其中的一些统一起来。

# linux - 使用 waagent for windows azure 创建 linux vhd 时 waagent 无法运行

> ID：11605870
> 
> 赞同：2
> 
> 时间：2012-07-23T02:47:51.403
> 
> 标签：linux, azure

我正在按照给定的 upload-a-vhd 帮助文档来创建我的 openSuse linux vhd： [https ://www.windowsazure.com/en-us/manage/linux/common-tasks/upload-a-vhd/](https://www.windowsazure.com/en-us/manage/linux/common-tasks/upload-a-vhd/)

安装 linux 代理 (waagent) 后，我无法在 vhd 中启动 waagent。当我尝试“sudo waagent”时，它返回一个错误并且命令永远不会执行。我尝试在 vhd 中多次安装 waagent，但问题仍然存在。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:48:40.090

这是 OpenSUSE Linux 代理的一个[已知问题](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforLinux/thread/56069321-29ba-4e76-a54a-fd56696ac99d)，因为在 OpenSUSE 中，您需要使用 sudo /usr/sbin/waagent 而不是 sudo waagent，因为 bash shell 目前不是该映像中使用的默认 shell。

请在上面尝试，让我知道您的问题是否已解决。

# c# - 查看文件路径是否在目录中

> ID：11605871
> 
> 赞同：1
> 
> 时间：2012-07-23T02:48:03.890
> 
> 标签：c#, .net

如何检查不一定存在的文件的路径是否指向特定目录中的位置？说我有一个方法：

```
bool IsInside(string path, string folder)
{
    //...
} 
```

然后，如果我这样称呼它：

```
IsInside("C:\\Users\\Dude\\Hi", "C:\\Users\\Dude\\Hi\\SubFolder\\SubSubFolder\\tile.txt") 
```

应该返回`true`（注意子文件夹），但如果我这样称呼它：

```
IsInside("C:\\Users\\Dude\\Hi", "C:\\Users\\Dude\\BadFolder\\SubFolder\\SubSubFolder\\tile.txt") 
```

应该返回假。我现在唯一能想到的就是使用 string's `StartsWith`，但对我来说听起来有点 hacky。我还没有找到可以检查这个的本地 .NET 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:17:03.150

你需要处理相对路径（../../someFile.txt）吗？像这样的东西会起作用：

```
private bool IsInside(DirectoryInfo path, DirectoryInfo folder)
{
    if (path.Parent == null)
    {
        return false;
    }

    if (String.Equals(path.Parent.FullName, folder.FullName, StringComparison.InvariantCultureIgnoreCase))
    {
        return true;
    }

    return IsInside(path.Parent, folder);
} 
```

然后像这样调用它：

```
DirectoryInfo folder = new DirectoryInfo("C:\\Users\\Dude\\Hi");
DirectoryInfo path = new DirectoryInfo("C:\\Users\\Dude\\Hi\\SubFolder\\SubSubFolder\\tile.txt");

bool result = IsInside(path, folder); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:02:37.977

你可以试试这个[`string.IndexOf`](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)方法。如果您将[重载](http://msdn.microsoft.com/en-us/library/ms224425.aspx)与[StringComparison 枚举](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)一起使用，它应该会为您提供所需的结果。

从上面的链接：

> 报告此字符串中第一次出现一个或多个字符或第一次出现字符串的从零开始的索引。如果在此实例中未找到字符或字符串，则该方法返回 -1。

```
bool IsInside(string folder, string path)
{
   if (path.IndexOf(folder,StringComparison.OrdinalIgnoreCase) != -1)
        return true;
    else
        return false; 
```

# css - 如何在 Chrome 和 Firefox 中设置相同的按钮输入样式？

> ID：11605875
> 
> 赞同：4
> 
> 时间：2012-07-23T02:48:51.790
> 
> 标签：css, firefox, google-chrome, button

在 Chrome 和 FireFox 中查看[这个 JSFiddle 示例。](http://jsfiddle.net/SnZX2/2/)

在 Chrome 中，该按钮应该比在 FireFox 中小一点。我已经添加了[如何在 Firefox 4 + 中重置默认按钮样式](https://stackoverflow.com/q/5459893/388916)的解决方案 CSS （这使按钮更小），但在 FireFox 中按钮仍然更大。在这个例子中差异不是很明显，但是看看它是如何影响我的设计的。

铬合金：
![铬屏幕截图](../Images/073a507884258a741d41b45d490eb4d1.png)

火狐：
![火狐截图](../Images/10e4bef1c7664e6594d2b896a7105928.png)

如您所见，该按钮在 FireFox 中较粗，并且正在影响布局。有没有办法避免使用样式化的 div 代替按钮？

* * *

另外，我正在使用 Meyer 的 CSS 重置样式表

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T02:52:07.687

Firefox 为`input`s 和`button`元素添加了特殊的填充。这会照顾它：

```
button::-moz-focus-inner, 
input[type="button"]::-moz-focus-inner, 
input[type="submit"]::-moz-focus-inner, 
input[type="reset"]::-moz-focus-inner {
  padding: 0 !important;
  border: 0 none !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T21:08:50.563

我得出的结论是，确保按钮/提交输入在浏览器中保持相同的唯一方法是使用 div 重新创建它们。创建按钮输入很容易，因为您可以像在按钮上一样将点击事件附加到 div 上。创建提交输入几乎没有任何困难。我使用 jQuery 解决了这个问题，方法是声明一个类，例如“提交”，并将提交按钮功能添加到加载该类的所有元素。这是一个例子：

```
// On page load:
$('.submit').on('click', function(e) {
    $(this).closest('form').submit();
}); 
```

*提交*类不在表单中的div在单击时不会执行任何操作。

如果向元素添加`tabindex="n"`（其中`n`是数字），也可以使用 tab 来聚焦，就像普通按钮一样。`:focus`您还可以通过使用css 伪类来设置它的样式以显示它的焦点。然后您可以使用空格或回车键单击带有此事件处理程序的按钮：

```
$('.submit').on('keypress', function(e) {
    if (e.keyCode == 13 || e.keyCode == 32)
        $(this).closest('form').submit();
}); 
```

[（我匆忙写了最后一个片段，并没有实际测试过。如果您发现其中有错误或测试成功，请相应地编辑此答案。）]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T03:20:18.373

你有没有机会`line-height`在你的页面上的按钮上设置一个？你没有在小提琴上，但`line-height`'s 不正常，不被 Firefox 接受，我相信其他一些浏览器 - 也许是 IE，我不确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T02:53:44.770

您是否尝试过 CSS 重置？我在这台计算机上没有 FF，否则我会检查这是否有效。

```
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.5.1/build/cssreset/cssreset-min.css"> 
```

# webgl - Three.js immediateRenderCallback with MeshShaderMaterial 抛出“index out of range”警告

> ID：11605880
> 
> 赞同：2
> 
> 时间：2012-07-23T02:49:25.447
> 
> 标签：webgl, three.js

我有一个 Three.js 场景，其中包含具有 immediateRenderCallback 方法的对象。我还创建了一个自定义着色器，我正在尝试使用 MeshShaderMaterial(myShader)。

着色器材质在基本 Three.js 对象上工作时不会出现警告。常规材质在我的自定义 immediateRenderCallback 对象上工作正常。

当我在自定义的 immediateRenderCallback 对象上使用着色器材质时，它会引发警告。这些是警告：

```
 WebGL: INVALID_VALUE: enableVertexAttribArray: index out of range
    WebGL: INVALID_VALUE: vertexAttribPointer: index out of range 
```

现在，尽管有这些警告，但一切似乎都运行良好。对象出现，着色器正常工作，但我不明白为什么会出现这些警告以及是否可以安全地忽略它们。

这是我的 immediateRenderCallback 函数：

```
THREE.Segment.prototype.immediateRenderCallback = function ( program, _gl, _frustum )
{
    if ( ! this.__webglPositionNormalBuffer ) this.__webglPositionNormalBuffer = _gl.createBuffer();
    if ( ! this.__webglStripBuffer ) this.__webglStripBuffer = _gl.createBuffer();

    _gl.bindBuffer( _gl.ARRAY_BUFFER, this.__webglPositionNormalBuffer );
    _gl.bufferData( _gl.ARRAY_BUFFER, this.interleavedData, _gl.STATIC_DRAW );
    _gl.enableVertexAttribArray( program.attributes.position );
    _gl.enableVertexAttribArray( program.attributes.normal );
    _gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 24, 0 );
    _gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 24, 12 );

    _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, this.__webglStripBuffer );
    _gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, this.stripData, _gl.STATIC_DRAW );

    for(var i=0; i<this.stripOffsets.length; i+=2)
    {
        var size = this.stripOffsets[i+1];
        var offset = this.stripOffsets[i]*2;
        _gl.drawElements( _gl.TRIANGLE_STRIP, size, _gl.UNSIGNED_SHORT, offset);
    }
} 
```

这是我的着色器：

```
'depthPacked': {
    uniforms: {},

    vertexShader: [
        "void main() {",
            "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",
            "gl_Position = projectionMatrix * mvPosition;",
        "}"
    ].join("\n"),

    fragmentShader: [
        "vec4 pack_depth( const in highp float depth ) {",
            "const highp vec4 bit_shift = vec4( 256.0, 256.0*256.0, 256.0*256.0*256.0, 0.0 );",
            "float power = floor(log2(depth));",
            "float mantissa = (power + 127.0) / 256.0;",
            "vec4 res = (depth/exp2(power)) * bit_shift;",
            "res = fract(floor(res) / 256.0);",
            "res.w = mantissa;",
            "return res;",
        "}",
        "void main() {",
            "gl_FragData[0] = pack_depth( gl_FragCoord.z );",
        "}"
    ].join("\n")
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:41:38.733

我从这里的一个相关问题中解决了这个问题：[WebGL: glsl attributes issue, getProgramParameter returns wrong number of attributes](https://stackoverflow.com/questions/7325038/webgl-glsl-attributes-issue-getprogramparameter-returns-wrong-number-of-attrib)

我的自定义`immediateRenderCallback`将值分配给属性`position`和`normal`，它们是 Three.js 中的默认属性。*但是*，由于我的顶点着色器没有使用该`normal`属性，GLSL 编译器优化了`normal`属性声明，导致 immediateRenderCallback 抱怨，因为它没有`normal`属性可以分配数据！

因为我在同一个几何体上使用了两个不同的着色器（在两个通道中），而另一个（phong）着色器需要法线信息，所以在深度着色器中我只是将`normal`属性值分配给顶点着色器中的变量以防止它被优化出来。

# iphone - Xcode - TableView PList Items into Sections AZ

> ID：11605883
> 
> 赞同：0
> 
> 时间：2012-07-23T02:49:59.563
> 
> 标签：iphone, sdk, plist, tableview, sections

所以我有一个 list.plist，里面有我所有的项目。它们都是带有键和值的字符串。

我将“课程”声明为 a`NSDictionary`并将“课程键”声明为`NSArray`.

要将所有项目加载到我的表格视图中，我使用[了这段代码](http://pastebin.com/X5uMJqH4)

我的问题是，我怎样才能让每个起始字母都有自己的部分，以便我可以轻松地在字母之间导航？

我知道我可以设置 sectionIndexTitlesForTableView 并且可以在右侧边栏上显示字母 AZ，但是如何让它们导航到正确的字母？

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
NSMutableArray *searchArray = [NSMutableArray arrayWithObjects:
                        @"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L",
                        @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];

return searchArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:54:31.737

您应该实现 3 个表视图委托以使其工作。我将尝试为您编写一个半伪代码，以使其简单：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [searchArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *courses = [self coursesInSection:section];
    return [courses count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }

       NSArray *courses = [self coursesInSection:indexPath.section];
       NSString *courseName = [courses objectAtIndex:indexPath.row];

       cell.textLabel.text = courseName;
       return cell;

} 
```

您需要做的就是根据需要的逻辑实现 - (NSArray *)coursesInSection:(NSInteger)section。

# ant - Ant：如何从类路径复制文件

> ID：11605884
> 
> 赞同：0
> 
> 时间：2012-07-23T02:50:20.697
> 
> 标签：ant

我在某个 jar 中有 file.txt。Ant 是用这个 jar 在类路径上执行的。这个

```
<available resource="file.txt" property="file.txt.exists"/> 
```

设置属性。

如何将该资源复制到某个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:55:13.107

假设您在一个目录中有两个文件：

*   构建.xml
*   测试.jar

* * *

构建.xml

```
<project name="copy-file-from-jar-on-ant-classpath" default="run" basedir=".">
    <target name="run">
        <copy tofile="extracted.file.txt">
            <javaresource name="file.txt"/>
        </copy>
    </target>
</project> 
```

* * *

test.jar 包含一个文件：file.txt

* * *

运行以下命令...

> 蚂蚁-lib test.jar

...将从 test.jar 中提取 file.txt 到目录中。

# powershell - 检查是否存在 AD 对象；如何避免丑陋的错误消息？

> ID：11605893
> 
> 赞同：14
> 
> 时间：2012-07-23T02:52:35.927
> 
> 标签：powershell, error-handling, active-directory, powershell-3.0

我有一些看起来像这样的代码：

```
if (Get-ADUser $DN -EA SilentlyContinue) {
  # Exists
} else {
  # Doesn't Exist
} 
```

不幸的是，当 Get-ADUser DN 找不到用户时（这很好，这意味着对象名称没有被占用），它抛出并吐出一个错误。我知道它会失败，这很好，这就是为什么我有一个`-ErrorAction`to `SilentlyContinue`。不幸的是，它似乎什么也没做......我仍然对脚本输出感到厌烦。该代码有效，只是由于控制台吐出错误而很难看。

*   有没有更好的方法来测试特定对象是否存在？
*   如果没有，有没有办法让 ErrorAction 正确地保持沉默？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-23T07:04:42.027

我发现在不吐出错误的情况下工作的唯一方法是使用 filter 参数：

```
if (Get-ADUser -Filter {distinguishedName -eq $DN} ) {
  # Exists
} else {
  # Doesn't Exist
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-22T20:12:38.487

您想捕获未找到对象的异常，但您仍然希望由于访问被拒绝等其他原因而失败，因此您需要指定要捕获的确切异常。

```
Try
{
  Get-ADUser $DN -ErrorAction Stop
  # Do stuff if found
}
Catch [Microsoft.ActiveDirectory.Management.ADIdentityNotFoundException]
{ 
  # Do stuff if not found
} 
```

要确定要在其他用例中捕获的异常类型，请引发异常，然后执行以下操作：

```
$Error[0].Exception.GetType().FullName 
```

其输出进入：catch [在此处插入异常类型]

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-23T03:46:09.147

这是一个例外，您可以尝试像这样捕获它：

```
$user = $(try {Get-ADUser $DN} catch {$null})
if ($user -ne $null) {
  # Exists
} else {
  # Doesn't Exist
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T03:42:46.310

看来此命令正在发出终止错误。使用 a`try { ... } catch { ... }`来处理/抑制错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T06:55:03.157

我会这样做：

```
Get-ADUser | ?{$_.id -eq $DN.id} 
```

Id 或其他一些唯一标识符。

这将返回用户或 null 并将包装异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-10T20:09:16.680

我喜欢使用 filter 参数，因为如果用户不存在，它会返回 null 而不是抛出异常。

例子：

```
$user = Get-ADUser -Filter "SamAccountName -eq '$username'"

if ($user -eq $null)
{
    #User does not exist
}
else
{
    #User exists
} 
```

# java - Java 图形环境

> ID：11605894
> 
> 赞同：0
> 
> 时间：2012-07-23T02:52:57.200
> 
> 标签：java, swing, jframe, fullscreen

当我到达“以下是等效的”部分时，我试图展示如何执行`vc.setFullScreenWindow(window)`所有命令，但我自己很困惑，因为我对此很陌生。

这是我的主要问题，但如果有人能解释任何值得注意的关于 GraphicsEnvironment 或 JFrame 的内容，我将非常感激。

```
import java.awt.*;
import javax.swing.JFrame;

// Screens2 can use all methods that JFrame has
public class Screens2 extends JFrame{

// Video Card used for Utilizing the graphics on the computer SCREEN
private GraphicsDevice vc;

// The Constructor merely sets the default Screen graphics up
public Screens2(){

    // The OS specific Graphics Envirionment
    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();

    // Graphics Device vc = The Default();
    vc = env.getDefaultScreenDevice();

}

// he DisplayMode class encapsulates the bit depth, 
// height, width, and refresh rate of a GraphicsDevice. 
// this method also takes in a JFrame to Display the DisplayMode
public void setFullScree(DisplayMode dm, JFrame window){

    // Nothing fancy
    window.setUndecorated(true);
    window.setResizable(false);

    // The following is equivalent =======================================================
    private GraphicsDevice.GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(window);
    vc.setFullScreenWindow(window);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:49:14.150

你提到的这条线有点混乱：

```
private GraphicsDevice.GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(window); 
```

编译器假定您要在方法内创建私有成员变量。请参阅[声明成员变量](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)。`GraphicsDevice`也不需要启动。

将其替换为以下内容：

```
GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(window); 
```

查看[课程：全屏独占模式 API](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)，了解有关全屏独占模式的更多详细信息。

考虑以下示例，该示例演示了全屏模式下的帧：

```
import java.awt.BorderLayout;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class FullScreenDemo {

    private static void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setLayout(new BorderLayout());
        frame.add(new JLabel("Hit Escape to exit full screen", JLabel.CENTER), BorderLayout.CENTER);

        frame.setSize(300, 300);

        KeyStroke escapeKeyStroke = KeyStroke.getKeyStroke("ESCAPE");
        Action escapeAction = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(null);       
            }
        };

        frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(escapeKeyStroke, "ESCAPE");
        frame.getRootPane().getActionMap().put("ESCAPE", escapeAction);     

        GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(frame);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# java - struts框架中的进度条

> ID：11605900
> 
> 赞同：2
> 
> 时间：2012-07-23T02:53:38.657
> 
> 标签：java, jsp, struts2

我有两个 JSP 页面。第一个 jsp 页面有一个按钮和引导进度条。当我单击按钮时，转到操作页面。在action action页面中我写了一个方法，需要很长的处理时间，所以我想根据进程设置进度条值。完成后进入第二个jsp页面。那么如何从操作页面获取进度条的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:35:41.677

我认为最好的方法是使用带有[执行和等待拦截器的](http://struts.apache.org/2.x/docs/execute-and-wait-interceptor.html)纯 JQuery 代码。ExecuteAndWaitInterceptor 非常适合在后台运行长期存在的操作，同时向用户显示一个不错的进度表，所以当上传正在进行时，你可以保持向用户显示某种进度动画。您也可以使用[S2-JQuery 插件](http://code.google.com/p/struts2-jquery/)。

您的要求与文件上传非常相似，其中用户希望在上传过程中显示进度条，因为即使在文件上传中，它的操作也是繁重的，需要花费大量时间。

# c - 如何计算C中两个不同结构成员之间的偏移量？

> ID：11605907
> 
> 赞同：1
> 
> 时间：2012-07-23T02:54:05.687
> 
> 标签：c, struct

考虑以下 C 代码：

```
struct Foo
{
  short a;
  long b;
  char c;
  void* d;
}; 
```

我知道使用 sizeof 可以知道整个结构的大小。是否有可能知道这个结构的一个子集的大小，或者（换句话说）知道两个成员之间的距离？我意识到可以根据我想要的偏移量嵌套结构（然后可以使用 sizeof），但是说我想知道 a 和 d 之间的字节数？另外，我想在不实例化对象的情况下执行此操作（类似于 sizeof）。（我意识到如果我有一个对象，那么我可以查看 foo.d 和 foo.a 之间的地址差异）。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:55:33.237

```
offsetof(Foo, d) - offsetof(Foo, a) 
```

`offsetof`为您提供从开头到指定成员的偏移量`Foo`。

你需要`#include <stddef.h>`

# r - blank.lines.skip = TRUE 因 read.fwf 而失败？

> ID：11605909
> 
> 赞同：1
> 
> 时间：2012-07-23T02:54:23.227
> 
> 标签：r, blank-line, read.fwf

我的文件末尾有四个空行。

```
> data=read.fwf("test2",head=F,widths=c(3,1,-3,4,-1,4),blank.lines.skip = TRUE)  
> data 
```

当我运行这段代码时，blank.lines.skip 参数被忽略。我的输出中仍然有空行。

该文件是：

```
x1     F          1890 1962  
x2                1857 1936  
x3                1900 1978  
x4                1902 1994  
x5        F       1878 1939 
```

最后四个空行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:43:50.267

看起来你是对的，`blank.lines.skip`它不适用于`read.fwf`- 必须深入研究代码才能找出原因，但`read.fwf`在将文件（连同`blank.lines.skip`指令一起）传递给`read.table`. 但是，事后检测和删除全空行并不难。

例如：

```
cat("abc","def","ghi","","","",sep="\n",file="test3.dat")
read.table("test3.dat")  ## blank lines skipped (by default)
(x <- read.fwf("test3.dat",widths=c(1,1,1),blank.lines.skip=TRUE))
##     V1   V2   V3
## 1    a    b    c
## 2    d    e    f
## 3    g    h    i
## 4 <NA> <NA> <NA>
## 5 <NA> <NA> <NA>
## 6 <NA> <NA> <NA>
all_NA <- apply(x,1,function(z) all(is.na(z)))
x[!all_NA,] 
```

回答您的其他问题（您将其作为答案发布，然后被版主删除；您通常应该通过编辑原始帖子或在必要时对问题发表评论，而不是发布答案来对您的问题进行必要的修改） :`colClasses`对于您在大多数列上使用自动检测，但对（a）特定列覆盖它，确实不够“聪明”。

# ruby - 复选框的MacRuby问题

> ID：11605916
> 
> 赞同：1
> 
> 时间：2012-07-23T02:55:45.123
> 
> 标签：ruby, xcode, macruby

我想检查程序中复选框的状态。当我编写一个`if`语句来检查它的当前状态时，它会自动“检查”该框并继续第一个选项，即使它最初是错误的。下面的代码

```
def execute (sender)
    if checkboxF = true
        then
            print label.stringValue = "Valid"
        else
            print label.stringValue = 'Invalid'
    end
end 
```

在我“执行”之前，未选中复选框，但是当代码运行时，它会自动“选中”该框，并仅继续使用第一个选项。

谢谢！

# angularjs - AngularJS 控制器中的“this”与 $scope

> ID：11605917
> 
> 赞同：1049
> 
> 时间：2012-07-23T02:55:47.643
> 
> 标签：angularjs, angularjs-scope, this

在[AngularJS 主页的“创建组件”部分](https://angularjs.org/#create-components)，有这个例子：

```
controller: function($scope, $element) {
  var panes = $scope.panes = [];
  $scope.select = function(pane) {
    angular.forEach(panes, function(pane) {
      pane.selected = false;
    });
    pane.selected = true;
  }
  this.addPane = function(pane) {
    if (panes.length == 0) $scope.select(pane);
    panes.push(pane);
  }
} 
```

注意`select`方法是如何添加到 的`$scope`，但`addPane`方法是添加到`this`. 如果我将其更改为`$scope.addPane`，则代码会中断。

该文档说实际上存在差异，但没有提及差异是什么：

> 以前版本的 Angular（1.0 RC 之前）允许您`this`与该方法互换使用`$scope`，但现在不再是这种情况了。在范围上定义的方法内部`this`并且`$scope`可以互换（角度设置`this`为`$scope`），但在控制器构造函数内部则不能。

AngularJS 控制器是如何`this`工作的？`$scope`

* * *

## 回答 #1

> 赞同：1014
> 
> 时间：2013-01-05T04:48:53.450

> “ AngularJS 控制器是如何`this`工作的？”`$scope`

**简短的回答**：

*   `this`
    *   当控制器的构造函数被调用时，`this`就是控制器。
    *   当调用在`$scope`对象上定义的函数时，`this`是“调用函数时的有效范围”。这可能（也可能不是！）`$scope`是定义函数的那个​​。所以，里面的函数，`this`和`$scope`可能**不**一样。
*   `$scope`
    *   每个控制器都有一个关联的`$scope`对象。
    *   控制器（构造函数）函数负责在其关联的`$scope`.
    *   只有在这个`$scope`对象上定义的方法（和父范围对象，如果原型继承在起作用）可以从 HTML/view 访问。例如，来自`ng-click`、过滤器等。

**长答案**：

控制器函数是 JavaScript 构造函数。当构造函数执行时（例如，当加载视图时），`this`（即，“函数上下文”）被设置为控制器对象。所以在“tabs”控制器构造函数中，当addPane函数被创建时

```
this.addPane = function(pane) { ... } 
```

它是在控制器对象上创建的，而不是在 $scope 上。视图无法看到 addPane 函数——它们只能访问在 $scope 上定义的函数。换句话说，在 HTML 中，这是行不通的：

```
<a ng-click="addPane(newPane)">won't work</a> 
```

在“tabs”控制器构造函数执行后，我们有以下内容：

![在标签控制器构造函数之后](../Images/c8e044742c9cd87968d53401d81b61ed.png)

黑色虚线表示原型继承——隔离作用域原型继承自[Scope](http://docs.angularjs.org/api/ng.$rootScope.Scope)。（它不会原型继承自在 HTML 中遇到指令的有效范围。）

现在，pane 指令的链接函数想要与 tabs 指令通信（这实际上意味着它需要以某种方式影响 tabs 隔离 $scope）。可以使用事件，但另一种机制是让窗格指令`require`选项卡控制器。（似乎没有针对`require`选项卡 $scope 的窗格指令的机制。）

所以，这就引出了一个问题：如果我们只能访问选项卡控制器，我们如何访问选项卡隔离 $scope（这是我们真正想要的）？

嗯，红色虚线就是答案。addPane() 函数的“作用域”（我在这里指的是 JavaScript 的函数作用域/闭包）使函数能够访问选项卡隔离 $scope。即，addPane() 可以访问上图中的“选项卡 IsolateScope”，因为在定义 addPane() 时创建了一个闭包。（如果我们改为在选项卡 $scope 对象上定义 addPane()，则窗格指令将无法访问此函数，因此它无法与选项卡 $scope 通信。）

要回答您问题的另一部分`how does $scope work in controllers?`：

在 $scope 上定义的函数内，`this`设置为“在哪里/何时调用函数时生效的 $scope”。假设我们有以下 HTML：

```
<div ng-controller="ParentCtrl">
   <a ng-click="logThisAndScope()">log "this" and $scope</a> - parent scope
   <div ng-controller="ChildCtrl">
      <a ng-click="logThisAndScope()">log "this" and $scope</a> - child scope
   </div>
</div> 
```

并且`ParentCtrl`（仅）有

```
$scope.logThisAndScope = function() {
    console.log(this, $scope)
} 
```

单击第一个链接将显示`this`和`$scope`是相同的，因为“*调用函数时生效的*范围”是与`ParentCtrl`.

单击第二个链接将显示`this`并且`$scope`不**一样**，因为“*调用函数时生效的*范围”是与`ChildCtrl`. 所以在这里，`this`设置为`ChildCtrl`'s `$scope`。在方法内部，`$scope`仍然是`ParentCtrl`'s $scope.

[小提琴](http://jsfiddle.net/mrajcok/sbZw7/)

我尽量不要`this`在 $scope 上定义的函数内部使用，因为它会混淆哪个 $scope 受到影响，特别是考虑到 ng-repeat、ng-include、ng-switch 和指令都可以创建自己的子范围。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-07-23T15:20:37.993

将“addPane”分配给它的原因是该`<pane>`指令。

该`pane`指令确实`require: '^tabs'`将选项卡控制器对象从父指令放入链接函数中。

`addPane`分配给`this`以便`pane`链接功能可以看到它。然后在`pane`链接函数中，`addPane`只是`tabs`控制器的一个属性，也就是tabsControllerObject.addPane。因此，pane 指令的链接函数可以访问选项卡控制器对象，从而访问 addPane 方法。

我希望我的解释足够清楚......这有点难以解释。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-08-28T21:25:47.997

我刚刚阅读了关于两者之间差异的非常有趣的解释，并且越来越倾向于将模型附加到控制器并将控制器别名以将模型绑定到视图。[http://toddmotto.com/digging-into-angulars-controller-as-syntax/](http://toddmotto.com/digging-into-angulars-controller-as-syntax/)是文章。

> **注意：**原始链接仍然存在，但格式更改使其难以阅读。[在原版中](https://web.archive.org/web/20150207064328/https://toddmotto.com/digging-into-angulars-controller-as-syntax/)更容易查看。

他没有提到它，但是在定义指令时，如果您需要在多个指令之间共享某些内容并且不想要服务（在某些合法情况下服务很麻烦），那么将数据附加到父指令的控制器。

该`$scope`服务提供了很多有用的东西，`$watch`这是最明显的，但如果您只需要将数据绑定到视图，那么在模板中使用普通控制器和“控制器作为”就可以了，而且可以说是更可取的。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-11-03T10:31:26.733

我建议您阅读以下帖子： [AngularJS：“Controller as”还是“$scope”？](http://codetunnel.com/angularjs-controller-as-or-scope/)

它很好地描述了使用“Controller as”在“$scope”上公开变量的优点。

我知道您专门询问了方法而不是变量，但我认为最好坚持一种技术并与之保持一致。

所以在我看来，由于帖子中讨论的变量问题，最好只使用“Controller as”技术并将其应用于方法。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-09-24T07:29:37.670

在本课程（[https://www.codeschool.com/courses/shaping-up-with-angular-js](https://www.codeschool.com/courses/shaping-up-with-angular-js)）中，他们解释了如何使用“this”和许多其他内容。

如果您通过“this”方法向控制器添加方法，则必须在视图中使用控制器名称“点”您的属性或方法来调用它。

例如在视图中使用你的控制器，你可能有这样的代码：

```
 <div data-ng-controller="YourController as aliasOfYourController">

       Your first pane is {{aliasOfYourController.panes[0]}}

    </div> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-20T08:46:34.460

> 以前的 Angular 版本（1.0 RC 之前）允许您将其与 $scope 方法互换使用，但现在不再如此。在范围内定义的方法 this 和 $scope 是可互换的（角度将 this 设置为 $scope），但在控制器构造函数内则不能。

要恢复这种行为（有人知道为什么会改变吗？），您可以添加：

```
return angular.extend($scope, this); 
```

在你的控制器函数结束时（假设 $scope 被注入到这个控制器函数中）。

这具有通过控制器对象访问父范围的良好效果，您可以使用该对象进入子范围`require: '^myParentDirective'`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-07T09:06:17.413

$scope 有一个不同的“this”，然后是控制器“this”。因此，如果你在控制器中放置一个 console.log(this)，它会给你一个对象(控制器)，并且 this.addPane() 将 addPane 方法添加到控制器对象。但是 $scope 的作用域不同，其作用域内的所有方法都需要由 $scope.methodName() 访问。 `this.methodName()`inside controller 意味着在控制器对象中添加方法。`$scope.functionName()`在 HTML 和里面

```
$scope.functionName(){
    this.name="Name";
    //or
    $scope.myname="myname"//are same} 
```

将此代码粘贴到您的编辑器中并打开控制台以查看...

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>this $sope vs controller</title>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular.min.js"></script>
    <script>
        var app=angular.module("myApp",[]);
app.controller("ctrlExample",function($scope){
          console.log("ctrl 'this'",this);
          //this(object) of controller different then $scope
          $scope.firstName="Andy";
          $scope.lastName="Bot";
          this.nickName="ABot";
          this.controllerMethod=function(){

            console.log("controllerMethod ",this);
          }
          $scope.show=function(){
              console.log("$scope 'this",this);
              //this of $scope
              $scope.message="Welcome User";
          }

        });
</script>
</head>
<body ng-app="myApp" >
<div ng-controller="ctrlExample">
       Comming From $SCOPE :{{firstName}}
       <br><br>
       Comming from $SCOPE:{{lastName}}
       <br><br>
       Should Come From Controller:{{nickName}}
       <p>
            Blank nickName is because nickName is attached to 
           'this' of controller.
       </p>

       <br><br>
       <button ng-click="controllerMethod()">Controller Method</button>

       <br><br>
       <button ng-click="show()">Show</button>
       <p>{{message}}</p>

   </div>

</body>
</html> 
```

# c# - 将类/实例函数作为函数中的参数传递

> ID：11605918
> 
> 赞同：3
> 
> 时间：2012-07-23T02:55:54.127
> 
> 标签：c#

**在 C# 中是否可以将类函数（非静态）作为函数中的参数传递？**

出于某种原因，我在函数下载中遇到编译错误，因为我将“类/实例”函数作为参数传递。

例如：

```
public class MyPlane {
   Texture texture;

   virtual public void OnDownloadPlaneCallBack(WWW www) {
      // perform custom actions when/if file downloads correctly
      texture = www.texture;
   }

   virtual public void download() {
       Downloader.download("www.blah.com", OnDownloadPlaneCallBack);  // this gives a compile error? 
   }
}

public class Downloader {

    public static IEnumerator download(string url, Delegate callback) {
        WWW www = new WWW(url); 

        while(!www.isDone)
            yield return www;

         if (www.isDone) {
            callback.DynamicInvoke(www);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:00:38.327

当然，您可以从实例方法构造委托：这是一个非常强大的功能。您看到的问题与创建委托的特定语法有关 - 通过使用*方法组*。

您会收到编译错误，因为方法组（这是从“裸”方法名称构造委托的正式名称）不能作为“无类型”`Delegate`的参数传递。

如果您将`download`方法的签名更改为 accept `Action<WWW>`，您的代码将正确编译。您也可以显式地转换您的方法组，如下所示：

```
Downloader.download("www.blah.com", (Action<WWW>)OnDownloadPlaneCallBack); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:03:08.727

是的。

```
public string CanReceiveFunction(Func<int, string> func) {
    if (func != null) return func(5);
}

public string CanConvertIntToString(int a) {
    return "here is the result: " + a;
}

public void Main() {
    var result = CanReceiveFunction(CanConvertIntToString);
    Console.WriteLine(result);
} 
```

# java - 使用反射设置非静态字段

> ID：11605921
> 
> 赞同：1
> 
> 时间：2012-07-23T02:56:21.943
> 
> 标签：java, minecraft

```
 public static void setMOTD(final String motd) throws Exception {
    final Field field = MinecraftServer.class.getDeclaredField("motd");
    final Field server = CraftServer.class.getDeclaredField("console");
    field.setAccessible(true);
    server.setAccessible(true);
    MinecraftServer instance = (MinecraftServer) server.get(CraftServer.class);
    field.set(instance, motd);
} 
```

我的目标是更改我的世界服务器上的每日消息（运行craftbukkit）。为此，我需要更改一个非静态字段 motd。我正在使用插件完成所有这些操作，因此无法获取 MinecraftServer 的实例。最后第二行是我尝试通过反射来做到这一点，但它失败了。我无权更改 MinecraftServer 类或 CraftServer，因为它们位于外部库中。

motd 和 console 都是非静态字段。

motd 是一个带有修饰符 public final 的字符串。

console 是 MinecraftServer 的一个实例，带有修饰符 protected final。

这是我得到的错误（在 setMOTD 的倒数第二行）：

```
2012-07-22 22:16:31 [SEVERE] java.lang.IllegalArgumentException: Can not set final net.minecraft.server.MinecraftServer field org.bukkit.craftbukkit.CraftServer.console to java.lang.Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:30:07.803

重新阅读错误消息，它似乎与您的代码不一致。该错误消息似乎暗示您正在尝试*将*成员变量设置为`console`无效的对象类型。请确认您实际测试的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T04:22:02.883

通过获取扩展 CraftServer 的 bukkit 实例解决

```
 public static void setServerMOTD(final String motd) throws Exception {
    final Field field = MinecraftServer.class.getDeclaredField("motd");
    final Field server = CraftServer.class.getDeclaredField("console");
    Field modifiersField = Field.class.getDeclaredField("modifiers");
    modifiersField.setAccessible(true);
    field.setAccessible(true);
    server.setAccessible(true);
    modifiersField.setInt(server, server.getModifiers() & ~Modifier.FINAL);
    MinecraftServer instance = (MinecraftServer) server.get(Bukkit.getServer());
    field.set(instance, motd);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:00:27.150

根据错误消息，字段控制台在 CraftServer 类中似乎被标记为“最终”。

这意味着一旦设置，您将无法更改它，这将在反射有机会修改它之前发生。

如果 CraftServer 是库的一部分，您可能无法更改此行为

# matlab - 具有多标签的 Libsvm

> ID：11605922
> 
> 赞同：1
> 
> 时间：2012-07-23T02:56:24.377
> 
> 标签：matlab, libsvm

我给 libsvm 一个标签为 1,2,3 的矩阵并获得了 70% 的准确率......我想知道它是否正确？

有谁知道 libsvm 是否自己处理多类，如果它确实是一个 v/s all 吗？如果不是，这 70% 的准确率到底是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:57:58.203

对于[`official documentation`](http://www.csie.ntu.edu.tw/~cjlin/papers/libsvm.pdf)LibSVM 状态

> LIBSVM 实现了多类分类的“一对一”方法（Knerr 等人，1990）。如果 k 是类的数量，则构建 k(k-1)/2 个分类器，每个分类器训练来自两个类的数据。

该文件接着说，分类本质上是投票程序的结果。每个分类器对每个数据点进行投票，并将其分配给获得最多票数的类别。为了准确起见，我假设这些标签将与已知的类标签匹配，并且报告的百分比是标签一致性的百分比。

# java - Java - 在 List 上同步 getSize()

> ID：11605927
> 
> 赞同：2
> 
> 时间：2012-07-23T02:58:34.377
> 
> 标签：java, multithreading, synchronization

```
List<Ball> myObjs = myThreads[threadIndex].getMyObjList();
int initialSize = Collections.synchronizedList(myObjs).size(); 
```

引发 ConcurrentModificationException。我也试过把它放在一个 synchronized(myObjs) 块中，但它也没有用。解决办法是什么？在我使用此列表的其他任何地方，它都位于同步（块）中。

PS 这个错误最终也会产生 BrokenBarrierException。（是的，我正在使用循环屏障进行同步）

编辑：这是堆栈跟踪：

```
Exception in thread "Thread-3" java.util.ConcurrentModificationException
at java.util.ArrayList$SubList.checkForComodification(ArrayList.java:1091)
at java.util.ArrayList$SubList.size(ArrayList.java:921)
at java.util.Collections$SynchronizedCollection.size(Collections.java:1573)
at Part2.Animation.processCollisions(MyClass.java:133) // This is the call to size() 
```

编辑：循环看起来像

```
for (int threadIndex=0; threadIndex < numThreads; threadIndex++) {
  List<Ball> myObjs = myThreads[threadIndex].getMyObjList();
  int initialSize = Collections.synchronizedList(myObjs).size();
} 
```

并且无论 numThreads 是多少，当 threadIndex=1 时都会发生异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T03:34:33.943

查看某些`List`类的源代码，我看不出调用如何可能`size()`会抛出`ConcurrentModificationException`. 如果您向我们展示堆栈跟踪信息，将会有所帮助。

* * *

但与此同时，你似乎对做什么有一个基本的误解`Collections.synchronizedList`。它所做的是创建并返回一个列表包装器，以确保*对同一包装器实例*的操作是同步的。

它无论如何都不会阻止线程*在底层 list 上*执行不同步的操作；即您刚刚包装的列表对象。如果一个线程具有底层列表的引用，它可以直接访问它而无需通过包装器。它也没有做任何事情来同步使用*不同*包装器对同一底层列表的操作。因此，如果您`Collections.synchronizedList`在同一个列表上调用两次，您将创建两个彼此不同步的不同包装器。

因此，实际上您`Collections.synchronizedList(myObjs).size()`根本没有执行任何有意义的同步。没有其他线程可以获取创建的同步列表包装器，因此没有其他线程可以通过包装器与此同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:09:07.927

它是由 引起的`subList()`，与同步无关。

`myObjs`是 subList() 的结果，实际上 myObjs 是**原始 List 的视图**。如果原来的 List 被修改，`ConcurrentModificationException`会在`subList.size()`被调用时发生。这是有道理的，视图应该与其原始列表一致。

相反，您可以获得如下子列表：

```
List mySubList = new ArrayList(originalList.subList(a, b)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:26:51.630

`CopyOnWriteArrayList`如果要修改具有 2 个或以上线程的列表，则应使用。

“这个数组在迭代器的生命周期内永远不会改变，所以干扰是不可能的，并且保证迭代器不会抛出 ConcurrentModificationException。”

# windows - win32 PE 加密器 = 防病毒误报

> ID：11605929
> 
> 赞同：1
> 
> 时间：2012-07-23T02:59:00.990
> 
> 标签：windows, encryption, portable-executable, false-positive, upx

我试图保护我的程序免受破解和逆向工程。我用 C++ (Visual Studio 2010) 编写了程序，我还在汇编程序中编写了简单的加密算法。算法被添加到EXE文件中，使其更难破解，因为在主程序之前加载。这并不难。但是...现在，我在 virustotal.com 上有很多误报 cca 50%。当我尝试仅使用 upx 打包器时，我也遇到了同样的问题 :( ...每次。我多次修改算法但没有成功。

你能帮我一个人吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:40:33.670

正在开发一个名为 Taggant 的新项目（现已完成）。这会在文件中嵌入一个签名标记，以标识打包者的被许可人以及打包者供应商。一旦完成，这将有助于减轻误报。现在我们正在等待 CA 协议最终确定，然后让每个人（双方）实施它，所以还需要一段时间。

要采取任何真正的行动，您必须加入这个小组。如果您是合法供应商，我可以帮助您加入，但您必须是合法供应商。如果这是为了保护您的恶意软件或破解，那么显然他们不符合您的资格。

同时，您可以在专门用于此类的网站上报告误报（或查找报告的位置） - [http://falsepositivereport.org](http://falsepositivereport.org)

您还可以确保您的文件在压缩/保护后经过数字签名。您的数字证书的历史将说明误报的可能性有多大。

# java - 为什么 setter 和 getter 方法

> ID：11605930
> 
> 赞同：2
> 
> 时间：2012-07-23T02:59:04.970
> 
> 标签：java, utility-method

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我知道这是非常微不足道的。但是为什么我们定义私有然后我们使用getter和setter。这更像是为了防止程序员在使用私有变量或方法时出错？还是出于安全原因。如果出于安全原因，那么拥有 getter 或 setter 的意义何在？我知道我们可以在 getter 和 setter 中设置限制，但那些 if 子句主要是为了防止错误而不是隐私限制。例如，我们通常不会说这些成员使用 if 子句限制对该方法的访问。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T03:05:04.453

为每个变量自动、不假思索地创建`getX()`和方法的做法是*不好的*。正如您所观察到的，这几乎毫无意义。`setX()`

 *但这是*不好*的部分。方法比暴露的变量要好得多，因为正如您所观察到的，您可以控制*如何*访问基础数据。如果您*考虑*一下自己在做什么，并酌情应用修改器和访问器，它们是一个很棒的工具：

*   您可以限制客户端只能读取，但不能写入变量。
*   您可以将整数的值限制为仅正值（例如）。
*   您可以确保一个变量始终等于另一个变量值的一半（例如）。
*   您可以确保，每当变量的值发生更改时，都会发送一个事件来通知其他客户端。
*   您可以更改基础变量的数据类型，在公共方法中执行转换，并且不会破坏任何客户端。
*   您可以将对象转换为同一对象的服务器端版本的远程客户端，同样，客户端代码不会更改。
*   您可以使用访问器确保跨线程的严格内存排序`synchronized`。

这些只是你可以用 mutators 和 accessors 做的*一些事情。*通过使用它们，您可以使您的软件易于更改和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:04:48.927

如果允许任何人编辑类中的变量，那么可能会发生非常糟糕的事情。（例如，如果一个粗心的用户将分母更改为零，我们可能会破坏宇宙 [或得到除以零的错误]）。定义`get()`和`set()`方法允许您（程序员）准确定义其他人如何与您的变量交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:26:19.073

借助一个例子，让我解释一下这一点。假设我们有以下类：

```
class User {
    private String username;
    private String password;
} 
```

现在在多个程序员工作的团队项目中。程序员**A**开发了`User`类，程序员**B**必须在 GUI 界面上工作。决定的政策是该`password`字段不能少于 5 个字符。但除非您没有创建数据字段，否则**A**和**B**`private`都必须始终检查分配给该字段的新密码的有效性。****`password`****

 ****现在假设在制作它们之后`private`您实现了以下 setter 方法：

```
public boolean setPassword( String temp ) {
    if( temp.length() >= 5 ) {
        this.password = temp;
        return true;
    }
    else {
        return false;
    }
} 
```

这样，只有**A**必须编码一次，**B**只需使用它而不必担心策略。这总是鼓励 DRY（不要重复自己）规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T03:21:02.150

还有一个好处，如果您使用 getter 和 setter，它允许子类覆盖如何使用方法和更大的灵活性访问信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T03:03:27.977

我们使用私有字段并具有 getter 和 setter，因此其他类可以访问这些私有字段。如果我在一个项目中有两个类，比如 Car.java 和 Driver.java，我们希望 Driver 对象能够访问 Car.java 中的私有字段“wheel”（否则 Driver 无法驾驶汽车）。但是如果该字段是私有的，则只能使用返回该字段值的 getter 方法来访问它。Setter 允许外部类更改字段的值。您可以通过使您的字段公开（或在适当情况下受保护）而不是私有来避免使用 getter 和 setter。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T03:04:11.100

它允许您控制对事物的访问......通过封装对一段数据的访问，您可以自由更改该数据的位置，甚至可以使其可计算。即，不是返回字段的值，而是进行一些计算。

但是，与 getter 和 setter 一样好，如果你使用它们太多，那么它表明你没有得到一个对象来完成你需要的工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T04:41:53.167

Setter 和 Getter 方法基本上用于限制其他人进行任何更改。在 Java 语言中，我们提供了数据隐藏概念。这是通过 get 和 set 方法实现的。*****

# visual-c++ - 仅按下回车键时 cin.get 会发生什么？

> ID：11605933
> 
> 赞同：0
> 
> 时间：2012-07-23T02:59:44.280
> 
> 标签：visual-c++, cin

我在测试 cin.get 的工作原理时尝试了不同的方法并遇到了这个难题：

```
char input[5];
int value;

cout << "enter something:";
cin.get(input,5);
cout << input;

cin.ignore();
cin.get();  // this never fires with only enter 
```

如果我输入一些内容，它将在最后一个 cin.get 处暂停。如果我只是点击返回，它永远不会触发最后一个 cin.get 并关闭。只是好奇是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:26:52.610

如果 cin.get() 无法读取任何内容，它将设置失败位，因此下一个 cin.get() 也会失败。

如果您希望下一个 cin.get() 工作，必须首先调用 cin.clear() 以清除故障位。

附言。[在这里](https://stackoverflow.com/questions/674413/ignoring-eof-on-stdcin-in-c/674434#674434)查看详细说明。

# logging - 如何记录请求和响应以在 servicestack 中进行调试

> ID：11605935
> 
> 赞同：9
> 
> 时间：2012-07-23T02:59:58.183
> 
> 标签：logging, servicestack

我想记录 servicestack webservice 的整个请求和响应对。我查看了响应文件管理器，但是暴露的流是只读的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T04:31:53.367

你见过 ServiceStack 内置的[Request Logger](https://docs.servicestack.net/request-logger) Plugin 吗？它是一个可配置的内存、CSV 或 Redis 请求记录器，用于维护最近请求的日志 /（错误响应）。

如果您想要不同的行为，您可以实现并注册自己的[IRequestLogger](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Web/IRequestLogger.cs)，它会为每个请求调用。使用以下参数为每个请求调用它的 log 方法。

```
Log(IRequest httpReq, object requestDto, object response, TimeSpan duration); 
```

从`IRequest`你可以得到原始的 .NET Core/ASP.NET/HttpListener Request / Response 类型

```
var originalReq = httpReq.OriginalRequest;
var originalRes = httpReq.OriginalResponse; 
```

### 过滤响应

否则，内省响应的方法是

*   [响应过滤器](https://docs.servicestack.net/request-and-response-filters)或响应[过滤器属性](https://docs.servicestack.net/filter-attributes)；或者
*   在继承自 Rest/ServiceBase 的您自己的基类上覆盖[OnAfterExecute()](https://docs.servicestack.net/customize-http-responses#intercept-service-requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-09T19:50:54.433

此 RequestFilter 允许您打印原始请求内容。如果需要，您可以对其进行修改以获取更多信息，例如标题和 cookie。正如@mythz 在评论中指出的那样，这没有 Request Logger 插件那么详细。但是，如果您只想为单个请求添加日志记录，则可能更可取。*免责声明*：此代码可能不是生产就绪的，我没有将它用于生产。

```
public class RequestDataSpyAttribute : RequestFilterAttribute
{
    // gets injected by ServiceStack
    public ILog Log { get; set; }

    private readonly string _logMessage;

    public RequestDataSpyAttribute(string logMessage)
    {
        _logMessage = logMessage;
    }

    public override void Execute(IRequest req, IResponse res, object requestDto)
    {
        System.Web.HttpRequestWrapper original = req.OriginalRequest as System.Web.HttpRequestWrapper;
        if (original == null)
            return;

        Log.Debug($"{_logMessage} Request: {original.InputStream.ReadToEnd()}");
    }
} 
```

# node.js - 在 node.js 中使用异步或同步 bcrypt 函数以生成哈希？

> ID：11605943
> 
> 赞同：8
> 
> 时间：2012-07-23T03:00:58.753
> 
> 标签：node.js, asynchronous, bcrypt

我目前正在尝试在 node.js 中为我的项目制作身份验证模块？

我已经看到了一些使用 bcrypt 生成哈希的例子，即

[https://github.com/bnoguchi/mongoose-auth/blob/master/lib/modules/password/plugin.js](https://github.com/bnoguchi/mongoose-auth/blob/master/lib/modules/password/plugin.js) [https://github.com/Turbo87/locomotive-passport-boilerplate/blob/master/app/models /account.js](https://github.com/Turbo87/locomotive-passport-boilerplate/blob/master/app/models/account.js)

但是，出于某种原因，他们正在使用 bcrypt.hashSync() 函数。由于 bcrypt 很好，因为它很耗时，所以为了不阻塞代码，使用异步函数不是更明智，即：

```
User.virtual('password')
.get( function () {
    return this.hash;
})
.set( function (password) {
    bcrypt.hash('password', 10, function(err, hash) {
        this.hash = hash;
    });
}); 
```

你能解释一下哪种方式更好，为什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T04:11:16.520

是的，如果可能，您希望使用异步版本，这样您就不会在密码哈希期间占用您的节点处理。在您引用的两个源代码案例中，代码都使用同步版本，因为它使用的方法是同步的，所以作者别无选择，只能使用同步版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T23:39:41.970

您不能在同步方法中进行异步调用。尝试设置密码时使用单独的方法。

我刚刚提交了一个拉取请求，所以有人的项目正是这样做的。在这里查看：[https ://github.com/nickpoorman/CrowdNotes/commit/e268c80a9cacddbc0215bf0e2b7aa31c0a4c785f](https://github.com/nickpoorman/CrowdNotes/commit/e268c80a9cacddbc0215bf0e2b7aa31c0a4c785f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-10T17:29:57.983

这是一个基准，显示异步`hash()`比同步**快 2.3 倍**`hashSync()`：[https ://jinoantony.com/blog/async-vs-sync-nodejs-a-simple-benchmark](https://jinoantony.com/blog/async-vs-sync-nodejs-a-simple-benchmark)

我真的不知道这种加速的原因是什么，因为该函数严格受 CPU 限制，没有 I/O。也许异步版本能够在引擎盖下利用多个核心？这可能是一个可能的解释。我自己运行了这个基准测试，并在一台 8 核的机器上获得了一致的 4 倍加速。

# php - 如何在 php 中获取上传图像的元标记信息？

> ID：11605945
> 
> 赞同：5
> 
> 时间：2012-07-23T03:01:34.327
> 
> 标签：php, metadata

我想存储图像元标签信息，如创建日期、城市、州、国家、标题、关键字、描述、版权、作者姓名、作者标题等。

是否有任何课程可以获取这些信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T03:16:06.223

试试这个： http: [//php.net/manual/en/function.exif-read-data.php](http://php.net/manual/en/function.exif-read-data.php)

# r - 如何将 sapply 重写为 for 循环

> ID：11605946
> 
> 赞同：1
> 
> 时间：2012-07-23T03:01:42.157
> 
> 标签：r, for-loop, sapply

我想`sapply`用 for 循环替换的行为。（如果有兴趣，请参阅下面的原因。）

这是我的代码的 sapply 版本的简化：

```
slow_function=function(n) c(n*n, 0, (-n)^n, -1, +1)
quick_analysis=function(res) res[1]+res[3]

results=sapply(1:8,function(n){
  res=slow_function(n)
  a=quick_analysis(res)
  b=table(sign(res))
  list(
    a=a,
    up=b['1'],
    down=b['-1'],
    level=b['0']
    )
  }) 
```

这给了我：

```
 [,1] [,2] [,3] [,4] [,5]  [,6]  [,7]    [,8]    
a     0    8    -18  272  -3100 46692 -823494 16777280
up    2    3    2    3    2     3     2       3       
down  2    1    2    1    2     1     2       1       
level 1    1    1    1    1     1     1       1 
```

（这很好，尽管顺便说一句，我实际上希望它转置，将 n 的值作为行，将 a, up, down, level 作为列。但是，没问题，我知道该怎么做。）

当我把它变成一个for循环时：

```
results=vector()
for(n in 1:8){
  res=slow_function(n)
  a=quick_analysis(res)
  b=table(sign(res))
  results[n]=list(
    a=a,
    up=b['1'],
    down=b['-1'],
    level=b['0']
    )
  } 
```

然后我收到 8 条警告消息，例如：

```
1: In results[n] = list(a = a, up = b["1"], down = b["-1"], level = b["0"]) :
  number of items to replace is not a multiple of replacement length 
```

结果非常不同：

```
[[1]]
[1] 0

[[2]]
[1] 8

[[3]]
[1] -18

[[4]]
[1] 272

[[5]]
[1] -3100

[[6]]
[1] 46692

[[7]]
[1] -823494

[[8]]
[1] 16777280 
```

我有点明白发生了什么。我不知道的是获得我想要的结果的魔法咒语！我已经尝试将结果初始化为`matrix()`或`list()`相反，具有相同的输出。

**旁白**：为什么我要使用 for 循环？我实际上想在 sapply 循环的每次传递中进行两次计算。换句话说，只进行 8 次调用，`slow_function`但返回 16 行结果。如果 sapply 允许它，我的代码将类似于：

```
results=sapply(1:8,function(n){
  res=slow_function(n)
  a=quick_analysis(res)
  b=table(sign(res))
  list(
    a=a,
    up=b['1'],
    down=b['-1'],
    level=b['0']
    )
  res=-res  #Modify res
  a=quick_analysis(res)
  b=table(sign(res))
  list(
    a=a,
    up=b['1'],
    down=b['-1'],
    level=b['0']
    )
  }) 
```

所需的输出：（对不起，格式关闭，我必须手工制作）

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]  [,13]   [,14] [,15]   [,16]   
a     0     0    8     -8   -18  18    272  -272 -3100 3100  46692  -46692 -823494 823494 16777280 -16777280
up    2     2    3     1    2    2     3     1    2     2     3      1      2       2      3        1
down  2     2    1     3    2    2     1     3    2     2     1      3      2       2      1        3
level 1     1    1     1    1    1     1     1    1     1     1      1      1       1      1        1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:21:36.717

对于如何在没有数据的情况下完成此任务并知道您的目标是什么，这是在黑暗中拍摄的：

```
slow_function=function(n) c(n*n, 0, (-n)^n, -1, +1)
quick_analysis=function(res) res[1]+res[3]

results=lapply(1:8,function(i){
  res=slow_function(i)
  FUN <- function(res.in) {
      a=quick_analysis(res.in)
      b=table(sign(res.in))
      data.frame(
       a=a,
       up=b['1'],
       down=b['-1'],
       level=b['0']
       )
  }
  data.frame(id=c("p", "n"), it=i, rbind(FUN(res), FUN(-res)))
})

DAT <- do.call(rbind, results)
with(DAT, DAT[order(id, it), ]) #maybe the order you're after 
```

编辑：

这会给你你想要的东西（索引和 id 从来没有必要我这样做是因为我不知道你想要的输出；你可以删除你认为合适的主题）：

```
rownames(DAT) <- NULL
t(DAT[, -c(1:2)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:27:16.497

当它们都具有相同的长度时，sapply 默认会简化结果。因此，您需要手动组合 for 循环返回的各种子列表，

```
results2 = list()
for (n in 1:8){
  res=slow_function(n)
  a=quick_analysis(res)
  b=table(sign(res))
  results2[[n]] = list(
    a=a,
    up=b['1'],
    down=b['-1'],
    level=b['0']
  )

}

do.call(cbind, results2) 
```

# php - 通过 JavaScript 设置 cookie 与通过 PHP 设置 Cookie

> ID：11605948
> 
> 赞同：0
> 
> 时间：2012-07-23T03:01:58.010
> 
> 标签：php, javascript, http, cookies

我想知道与在 PHP 中使用 setcookie() 函数相比，在客户端通过 JavaScript 设置一些 cookie 有什么明显的优势吗？我能想到的唯一原因是减少一些网络流量（第一次）。但它不是很清楚还有其他优势吗？

此外，如果我使用 Cookie（由 JavaScript 调用创建）来保留我想在客户端级别设置的部分信息（一些自定义外观），这个 cookie 是否会随每个 HTTP 请求发送到服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T03:04:22.907

Cookie 仍应随每个请求一起发送，即使由 javascript 设置。

我能想到通过 javascript 设置 cookie 的唯一真正原因是，如果您保存一些修改过的客户端 - 比如您提到的自定义外观。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T03:07:16.307

php cookie 和 js cookie 没有区别，都是一样的。不同之处仅在于它们的创建位置。如果您从服务器设置 cookie，它将与标题一起发送，并且在您下次加载页面时可用。但使用 js cookie 将立即可用。除了每个 cookie 与标题来回走动

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T03:08:15.150

> 它们基本相同。在这两种情况下，cookie 都会发送到浏览器并存储在那里，然后浏览器会在每次请求时将其发送回客户端，直到它过期或被删除。

此外，这里有一些类似的问题，您可以使用它来获取更多信息（不过，我不会称这些完全重复）：
[Cookies - PHP vs Javascript](https://stackoverflow.com/questions/1281795/cookies-php-vs-javascript)（引用来自）
[Javascript cookies vs php cookies](https://stackoverflow.com/questions/2562325/javascript-cookies-vs-php-cookies)
[PHP 和 javascript cookies 之间的差异](https://stackoverflow.com/questions/7221896/differences-between-php-and-javascript-cookies)

# sql - 在 SQL 中水平返回多个日期

> ID：11605949
> 
> 赞同：0
> 
> 时间：2012-07-23T03:01:59.160
> 
> 标签：sql, sql-server, stored-procedures

采购线有

```
itemid, deliverydate, qtyordered

select * from purchline
itemid   deliverydate    qtyordered
74700    01/01/2000      50
74700    01/01/2007      51
74700    01/01/2010      5 
```

问。

我更愿意将其视为一个存储过程，如下所示：

```
itemid  deliverydates                     TotalOrdered 
74700   01/01/2000 01/01/2007 01/01/2010  106 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:14:40.470

如果您使用的是 MySQL：

```
SELECT   ItemID, 
         GROUP_CONCAT(deliverydate SEPARATOR ' ') as deliverydate,
         SUM(qtyordered) qtyordered
FROM     purchline
GROUP BY ItemID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:09:19.270

**为 SQL Server 2005 编辑**

如果您使用的是 SQL Server：

```
SELECT itemid
    ,deliverydates = STUFF((SELECT ' ' + CONVERT(NVARCHAR, deliverydate, 101)
                           FROM purchline b 
                           WHERE b.itemid = a.itemid
                           FOR XML PATH('')), 1, 1, '')
    ,TotalOrdered = SUM(qtyordered) 
FROM purchline a
GROUP BY itemid 
```

* * *

使用以下内容进行测试：

```
-- Setup test data
DECLARE @T1 AS TABLE (
    itemid NVARCHAR(50)
    ,deliverydate DATETIME
    ,qtyordered INT);

INSERT @T1 VALUES ('74700', '20000101', 50)
INSERT @T1 VALUES ('74700', '20070101', 51)
INSERT @T1 VALUES ('74700', '20100101', 5)

-- Return the desired results
SELECT itemid
    ,deliverydates = STUFF((SELECT ' ' + CONVERT(NVARCHAR, deliverydate, 101)
                           FROM @T1 b 
                           WHERE b.itemid = a.itemid
                           FOR XML PATH('')), 1, 1, '')
    ,TotalOrdered = SUM(qtyordered) 
FROM @T1 a
GROUP BY itemid 
```

# iphone - 如何在iOS上绘制图像和文本

> ID：11605952
> 
> 赞同：0
> 
> 时间：2012-07-23T03:02:18.910
> 
> 标签：iphone, ios, uitextview, text-rendering

我想提出一个观点，

*   可以用单一字体绘制文本
*   识别超链接并使其可点击
*   可以连同文字一起绘制一组图标图像
*   可以复制内容

这就是[LINE 应用程序](http://itunes.apple.com/us/app/line/id443904275?mt=8)在谈话室中显示消息时所做的事情。

LINE 似乎使用了不可编辑`UITextView`的超链接识别选项，但它可以显示 Apple 提供的以外的表情符号图标。有没有人有任何想法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:24:59.077

听起来`UIWebView`就是你想要的。

# google-app-engine - 访问 GAE 服务的 API

> ID：11605961
> 
> 赞同：0
> 
> 时间：2012-07-23T03:03:59.120
> 
> 标签：google-app-engine

我想知道是否有一个 API 可以访问 GAE 的服务，包括日志、性能、队列中的任务，比如 bulkloader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:32:17.247

**记录：**

没有开箱即用的方式来访问您的 App Engine 应用程序之外的 App Engine 日志（您可以使用[LogService API](https://developers.google.com/appengine/docs/java/logservice/)来完成）。但是，也有一些示例，例如将您的日志导出到 BigQuery 的[log2bq](http://code.google.com/p/log2bq/)。

**表现：**

不确定您在这里寻找什么类型的东西，但如果通过日志跟踪数据，您可以使用上面的示例。如果你能详细说明，也许我可以更好地回答你。

**任务：**

您可以使用[TaskQueue REST API](https://developers.google.com/appengine/docs/java/taskqueue/rest)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:19:43.023

可能不会，除了有几个[休息 API](https://developers.google.com/appengine/docs/java/taskqueue/rest)可以访问队列任务。

# java - java如何在后台运行一个进程？

> ID：11605965
> 
> 赞同：0
> 
> 时间：2012-07-23T03:04:26.603
> 
> 标签：java, android, background, android-asynctask

要在 android 应用程序的后台运行进程，您可以使用 AsyncTask。是否有类似的方式在 java 中的基本 cmd 行应用程序的后台运行某些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:07:31.957

它可以像创建一个扩展类一样简单`Thread`（对不起，纯粹主义者，但这是最短的方法：）

```
new Thread() {
    public void run() {
        // Do something here
    }
}.start(); 
```

包中有一堆更高级的工具，`java.util.concurrent`如果你需要做比这更复杂的事情，你应该看看。

# c++ - long * tempArray[10]; 是什么意思？做？

> ID：11605966
> 
> 赞同：0
> 
> 时间：2012-07-23T03:04:32.047
> 
> 标签：c++, arrays, long-integer

您能否解释一下这段 C++ 代码的作用：

```
int main()
{
    long * tempArray[10];
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:50:00.547

那个特定的代码片段根本没有任何作用。如果您编译该程序，它将终止并向宿主环境报告它已成功终止，仅此而已。

`long * tempArray[10];`声明了一个变量，称为具有*指向 long 指针*`tempArray`的类型数组 10 ，这意味着它能够容纳 10 个对象。*`tempArray``long *`*

 *出于演示目的：

```
// declare some long integers
long myLong = 100;
long anotherLong = 400;
long thirdLong = 2100;

// declare array 3 of pointer to long
long *tempArray[3];

// remember that arrays in C and C++ are 0-based, meaning index 0
// refers to the first object in an array. Here we are using the `&'
// operator to obtain a long pointer to each of the longs we declared
// and storing these long pointers in our array.
tempArray[0] = &myLong;
tempArray[1] = &anotherLong;
tempArray[2] = &thirdLong; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:05:31.600

它创建一个包含 10 个长指针的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:06:36.100

代码实际上并没有做任何事情。

`long * tempArray[10];`分配一个能够保存十个指向长整数的指针的数组。*

# hibernate - 如何优化在 Hibernate 中获取多个集合？

> ID：11605967
> 
> 赞同：5
> 
> 时间：2012-07-23T03:04:33.593
> 
> 标签：hibernate, optimization

我正在尝试提高使用 Hibernate 的应用程序的性能，该应用程序对数据库执行过多的 SQL 调用。我认为数据获取可以组合在一起以减少调用并提高性能，但我在这里有点不知所措。我查看了有关子选择和批量提取的 Hibernate 文档，这确实有所帮助，但我认为它并不能完全消除问题。

在下面的示例中，我需要获取作为部队一部分的士兵列表的详细信息并将其显示在网页上。

```
@Entity
public class Troop {
    @OneToMany(mappedBy="troop")
    public List<Soldier> getSoldiers() {
   ...
} 
```

很容易将获取策略设置为子选择、批处理或急切地检索该部队的所有士兵部分，而无需太多 SQL 语句。

```
@Entity
public class Soldier {
    @Id
    String soldierId

    String firstName;
    String lastName;

    @OneToMany(mappedBy="address")
    public List<Soldier> getAddress() {
     ...
    @OneToMany(mappedBy="combatHistory")
    public List<Soldier> getCombatHistory() {
      ...
    @OneToMany(mappedBy="medicalHistory")
    public List<Soldier> getMedicalHistory() {
      ...
} 
```

每个士兵实体与其他延迟加载的实体有多个一对多的关系。我需要初始化这些集合并从中检索值。如果一个士兵有 3 个一对多关系，而一个部队有 1,000 名士兵，这将导致 3 x 1,000 个 SQL 调用！

有没有办法通过减少调用次数来优化它？由于我已经知道我需要检索的士兵 ID，我可以检索实体并将它们放在一级缓存中吗？

例如我可以查询

```
from Address as a where a.soldierId in (...)
from CombatHistory as a where a.soldierId in (...)
from MedicalHistory as a where a.soldierId in (...) 
```

如果可以缓存 Address、CombatHistory 等实体，则在每个士兵中访问集合时不会执行 SQL 选择。这会将调用次数减少到每个集合一次（在本例中为 3 个），而不是每个士兵每次集合一次（3 x 1000）

我在文档中并没有看到太多关于解决这个问题的内容，因此非常感谢任何提示和想法。请记住，由于这些集合是列表而不是集合，因此无法在多个集合上执行左连接提取，否则 Hibernate 将返回异常。

```
HibernateException: cannot simultaneously fetch multiple bags 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:06:14.177

如果您“触摸”该类型的一个集合，您还可以在集合上使用注释 @Fetch(FetchMode.SUBSELECT)，所有集合都将在一个 SQL 请求中获取。

```
@Entity
public class Country implements java.io.Serializable {

    private long id;
    private int version;
    private String country;
    private Set<City> cities = new HashSet<City>(0);

    @Fetch(FetchMode.SUBSELECT)
    @OneToMany(mappedBy = "country", cascade = CascadeType.ALL)
    public Set<City> getCities() {
        return cities;
    }

    ...
} 
```

以下是如何使用它的示例：

```
 public List<Country> selectCountrySubSelect() {
        List<Country> list = getSession().createQuery("select c from Country c").list();
        // You don't have to initialize every collections
        // for (Country country : list) {
        // Hibernate.initialize(country.getCities());
        // }
        // but just "touch" one, and all will be initialized
        Hibernate.initialize(((Country) list.get(0)).getCities());
        return list;
    } 
```

日志：

```
DEBUG org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections():  - 2 collections were found in result set for role: business.hb.Country.cities
DEBUG org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection():  - Collection fully initialized: [business.hb.Country.cities#1]
DEBUG org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection():  - Collection fully initialized: [business.hb.Country.cities#2]
DEBUG org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections():  - 2 collections initialized for role: business.hb.Country.cities
DEBUG org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections():  - Initializing non-lazy collections 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:52:18.997

即使您获取集合的所有项目，休眠也不能确定集合的所有项目都已加载并且不会填充集合。但是，由于士兵位于会话缓存中，因此您可以一次急切地加载每个集合。

```
from Soldier s left join fetch s.Address where s.soldierId in (...)
from Soldier s left join fetch s.CombatHistory where s.soldierId in (...)
from Soldier s left join fetch s.MedicalHistory where s.soldierId in (...) 
```

这会将往返次数减少到 3。

# ruby - Sequel Migrator 未定义

> ID：11605970
> 
> 赞同：1
> 
> 时间：2012-07-23T03:04:48.757
> 
> 标签：ruby, database-migration, sequel

我正在尝试通过 Sequel 对数据库运行一些迁移`Sequel::Migrator`。然而，当我跑...

```
DB = Sequel.sqlite
Sequel::Migrator.apply DB, 'db/migrations' 
```

我收到以下错误。

> 未初始化的常量 Sequel::Migrator

是什么赋予了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:04:48.757

现在`Sequel::Migrator`默认情况下不包括在内。这意味着您不能`require 'sequel'`并且能够立即开始使用`Sequel::Migrator`。

相反，您必须像这样加载 Sequel 提供的迁移和核心扩展。

```
Sequel.extension :migration, :core_extensions 
```

现在，如果您检查是否`Sequel::Migrator`已定义 Ruby 应该返回`"constant"`.

```
1.9.3 :001 > Sequel.extension :migration, :core_extensions
 => [:migration, :core_extensions]
1.9.3 :002 > defined? Sequel::Migrator
 => "constant" 
```

# github - Git：如何添加 ssh 密钥？

> ID：11605975
> 
> 赞同：2
> 
> 时间：2012-07-23T03:05:36.107
> 
> 标签：github, ssh-keys

我试图了解如何为 GitHub 设置 SSH 密钥。我不确定如何准确地表达事情......所以，这是我所做的和我正在尝试做的事情的细分......

1.  我在服务器 A 上生成了一个 SSH 密钥，我将从该密钥推送/拉取到我的 GitHub 存储库

2.  我在 GitHub 上的帐户设置中添加了一个 SSH 密钥，并复制了服务器 A 的 id_rsa.pub 文件的内容

3.  我现在可以成功地从服务器 A 向/从我的 GitHub 存储库推送和拉取

***现在，我还想设置另一台服务器（服务器 B），以便我也可以从该服务器推送和拉取。***

我的问题是：我必须在服务器 B 上生成一个新的 ssh 密钥，还是可以“重新使用”我已经设置的那个？意思是，我是否必须在要推送和拉取的每台服务器上都有一个完全唯一的 ssh 密钥？如果没有，我如何添加 id_rsa.pub 文件以使其信息相同？和复制文件一样简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:29:59.327

可以使用相同的密钥，但不建议这样做。如果有人控制了服务器 B，您将不得不为 A 重新生成一个新密钥并禁用旧命令的访问。它只是不够安全。

您应该为您拥有的所有机器生成一个新密钥。因此，您可以单独控制对服务器的访问。

# ruby-on-rails - 如何将formtastic按钮变成链接？

> ID：11605976
> 
> 赞同：1
> 
> 时间：2012-07-23T03:05:56.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formtastic

我正在尝试将我的表单提交按钮设置为链接而不是按钮。

```
<%= f.actions do %>
  <%= f.action :submit, :label => "Sign in", :as => :link %>
<% end %> 
```

以上给了我一个“Formtastic::UnsupportedMethodForAction”错误。

[我从rdoc.info/github/justinfrench/formtastic#The_Available_Inputs](http://rdoc.info/github/justinfrench/formtastic#The_Available_Inputs)找到了以下示例代码

```
<%= f.actions do %>
  <%= f.action :submit, :as => :button %>
  <%= f.action :cancel, :as => :link %>
<% end %> 
```

如果我将上面的代码更改为

```
<%= f.action :submit, :as => :link %> 
```

:as => :link 不支持 :submit 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:02:15.207

它会产生`<input type="button" value="Sign in">`

如果您想要一个响应操作的链接，请使用`link_to "Profile", :controller => "profiles", :action => "create", :id => @profile, :method => :post`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:18:11.990

您应该使用 CSS 来执行此操作。尝试类似的东西

```
#submit-button-selector {
  background: none;
  border: none;
  color: blue;
  text-decoration: underline;
  display: inline;
} 
```

# facebook - 为通过 Facebook Connect API 共享 facebook 页面 url 设置自定义描述

> ID：11605977
> 
> 赞同：0
> 
> 时间：2012-07-23T03:06:05.353
> 
> 标签：facebook, facebook-graph-api

我在使用 FB api 在朋友的墙上发布提要时遇到问题。

`link`当我使用 facebook 应用程序 url ( )分配参数时`link: 'https://apps.facebook.com/12345'`，所有内容`{picture, name, description}`都按照我提供的方式显示。但是，如果`link`参数分配给 facebook 页面，则所有自定义参数都会被该 facebook 页面的描述覆盖。

```
var post = {
                access_token: acc,
                to:fId[p],
                link:'https://www.facebook.com/Sony',
                picture:'https://picture.com/abc.png',
                name:"I love sony",
                description: data.name+" has invited you to love sony",
            }; 
```

我想做的仍然是显示自定义描述和图片，即使我将 Facebook 页面分享到朋友的墙上。这是我的发布代码的片段：

```
 FB.api("/"+fId[p]+"/feed",'post',post,function(response){
                        if (!response || response.error) {
                 console.log(response.error);
                        } else {
                             console.log('Post ID: ' + response.id);
                        }
                    }); 
```

# sass - 自动缩进 Compass/SASS 文件

> ID：11605982
> 
> 赞同：1
> 
> 时间：2012-07-23T03:06:22.720
> 
> 标签：sass, compass-sass, indentation

有什么简单的方法可以自动缩进 SASS/Compass 文件吗？我想保持层次结构内的缩进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:19:41.720

我认为答案取决于您使用的编辑器。有很多提供自动缩进功能的编辑器，比如我最喜欢的VIM。它可以在您编写时自动缩进。或者您可以`gg=G`在完成后使用格式化整个文件

# android - Android自定义意图过滤器未接收广播？

> ID：11605987
> 
> 赞同：2
> 
> 时间：2012-07-23T03:06:53.487
> 
> 标签：android, android-intent, broadcastreceiver, categories

我有一个带有意图过滤器的广播接收器，它指定一个自定义类别：

```
 <receiver
        android:name=".sys.sub.SubServiceManager"
        android:enabled="true"
        android:exported="false" >
        <intent-filter>
            <category android:name="com.example.SUB_SERVICE_STATE" />
        </intent-filter>
    </receiver> 
```

然后有这段代码使用该意图类别和自定义操作发出广播。我的问题是从未收到广播。

```
 Intent speed = new Intent();
    speed.addCategory(inst.getString(R.string.subServiceCat));
    speed.setAction("com.example." + SubServiceManager.START_COMMAND + Example.NAME);
    inst.sendBroadcast(speed); 
```

R.string.subServiceCat 包含与意图过滤器中定义的相同的字符串。

对于自定义类别意图过滤器，我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:44:39.253

[文档](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGkQFjAA&url=http%3A%2F%2Fdeveloper.android.com%2Fguide%2Fcomponents%2Fintents-filters.html&ei=u8oMUP7hKor80QX1qKHXCg&usg=AFQjCNELSVCL8bvJbULs6luJb3DAYjm6sg&sig2=-Eadqs9iEO-DY7YQT5cojg)说：

> 要通过此测试（**Action test**），Intent 对象中指定的操作必须与过滤器中列出的操作之一匹配。如果object(intent)或者filter没有指定action，结果如下：
> 
> *   如果过滤器未能列出任何操作，则没有任何意图匹配，因此所有意图都未通过测试。没有意图可以通过过滤器。
> *   另一方面，没有指定动作的 Intent 对象会自动通过测试——只要过滤器至少包含一个动作。

您看到您的过滤器未指定操作，因此您的意图无法通过过滤器。要解决此问题，您需要为接收器的过滤器指定一个操作，或者不为您的意图指定任何操作。

# java - 如何确保接口实现扩展特定类？

> ID：11605996
> 
> 赞同：4
> 
> 时间：2012-07-23T03:08:09.240
> 
> 标签：java, swing, interface, awt, multiple-inheritance

我有两种类型的编辑器。一个是 的子类，`JTextArea`一个是`JTable`(的子类`JTextArea`并且`JTable`都是`JComponent`) 的子类。我想要我的两个类，`TextAreaEditor`并`TableEditor`实现`Editor`只有方法的接口`public String getText()`。

我希望客户端代码简单地使用`Editor`接口。问题是，我所有`Editor`的使用方法`JComponent`，比如`setEnabled(bool)`. 由于我的编辑器是一个接口并且我不能让它扩展 JComponent，所以在调用这些方法时我必须使用实现而不是接口。所以我认为我可以简单地创建`Editor`一个子类`JComponent`并让我的类扩展它，而不是使用接口。问题是类`TextAreaEditor`已经扩展了一些类`JTextArea`，所以我不能让它们扩展另一个类。

有什么方法可以确保我的`Editor`类是 JComponent，并且我的具体编辑器类是`Editor`s 和子类`JComponent`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T03:24:02.343

如果您在编辑器接口的子类中公开您关心的 JComponent 方法，它们将由您的类“追溯”实现。

下面是一些代码来演示这个想法：

```
interface Editor { 
  String getText(); 
}

interface SwingEditor extends Editor { 
  void setEnabled(bool); // has to match *exactly* the signature from JComponent
}

class TableEditor extends JTable implements SwingEditor {
   // implement your getText(), and anything else you need 
   // no need to implement setEnabled, as it is provided by JTable
}

SwingEditor te = new TableEditor();
te.setEnabled(true); // will call JComponent's method 
```

我假设您在这里确实需要继承，通常组合是 Swing UI 代码的更好选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T03:17:41.940

[在继承痤疮上](http://en.wikipedia.org/wiki/Composition_over_inheritance)使用组合。大多数情况下，继承确实不是正确的解决方案，在您的情况下，它将使您免于编写大量代码。

让你`TextAreaEditor`和`TableEditor`双方都有一个`JComponent`他们需要的实例。将您需要的所有方法添加到您的接口，然后将这些调用委托给`JComponet`.

例如：

```
public class TextAreaEditor implements Editor {
     private final JTextArea textArea = new JTextArea();

     public void setEnabled(bool isEnabled) {
          return textArea.setEnabled(isEnabled);
     }

     //... your own methods plus other methods from JComponent
} 
```

您可能想要更花哨并使用某种依赖注入来实例化`JComponent`，但这并不是必需的。但是，如果所有更改都是`JComponent`您需要注入的特定内容，它可以解决必须上课的问题。

如果您需要更多说明，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:51:26.837

如果您真的需要您的`Editor`课程`JComponent`也是如此，您可以选择简单地记录这一点并在您的代码中执行强制转换。不是最简洁的解决方案，但迄今为止最简单的解决方案。

另一种方法是向`Editor`接口添加一个额外的方法：

```
public JComponent getComponent(); 
```

您的`Editor`实例可以通过简单地返回来实现此方法`this`。

后一种方法的好处是您可以使用所有`JComponent`方法，并且不必在界面中复制它们，并且在 2 个月内得出您忘记将其中一个`JComponent`方法添加到界面中的结论

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T04:09:01.330

以下设计可以解决这个问题：

```
public class TextAreaEditor extends JTextArea implements Editor {
//provide your implementation of getText()
//setEnabled(bool) doesn't have be implemented as JComponent will provide
}

TextAreaEditor te = new TextAreaEditor();
te.setEnabled(true); // will call JComponent's impl 
```

根据上面的代码，您自己的编辑器（TextAreaEditor）的具体实现是一个编辑器和 JComponent 的子类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T03:22:48.490

我可能会创建一个新的 table 和 textarea 类来扩展它们各自的超类，并像这样实现一个编辑器界面

```
public class JTextAreaEditor extends JTextArea implements Editor {
...
} 
```

然后使用组合暴露Editor接口的方法

```
 public class JTextAreaEditor extends JTextArea implements Editor {
       private Editor editor;

       public String getValue() {
          return editor.getValue();
       }
       ...
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T03:35:19.997

我认为您的论点完全不正确：对于接口（编辑器），您不应该关心实现的实现方式。您说您的所有编辑器实现都必须是 JComponent。这就是现在发生的事情，但它永远不需要成为“编辑”的“要求”。只要实现符合 Editor 的要求 (getText() )，Editor 的设计就没有理由强加于此。

您所谈论的主要是“普通”编辑器实现的默认基类。再次注意，实现是否选择使用此基类是他们的选择，只要它们符合您的 Editor 接口即可。

```
public interface Editor {
    String getText();
}

public abstract class JComponentEditor extends JComponent 
        implements Editor {
    //.....
}

public TextAreaEditor extends JComponentEditor {
    public String getText() {
        // implements TextAreaEditor's version of getText
    }
} 
```

* * *

编辑：我想我对 OP 的问题有点误解了。无论如何，我的回答中的主要论点仍然成立：强制“......我的编辑器类是一个 JComponent，而我的具体编辑器类是编辑器和 JComponent 的子类”是没有意义的。这只是Editor的实现细节

# java - Java - 一些 Ogg 剪辑无法播放

> ID：11605999
> 
> 赞同：0
> 
> 时间：2012-07-23T03:08:50.553
> 
> 标签：java, audio

我有一个 Java 游戏，其中只有 1 个声音文件可以播放（游戏的主题）。所有其他声音效果要么工作一次，然后再也不工作，或者给我这个错误：读取 Ogg 比特流数据的第一页时出错。

它们具有相同的比特率、相同的采样率，并且都由 Audacity 编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:13:44.400

这个文件比其他文件异常大吗？我注意到使用大文件 .wav 的问题，也许你的 .ogg 也出现了同样的问题。虽然我不是音频专家...

PS：这里有新的stackoverflow用户，所以如果我做错了，请告诉我！