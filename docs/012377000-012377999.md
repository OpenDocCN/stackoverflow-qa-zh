# StackOverflow 问答 12377000-12377999

# face-recognition - 人脸识别转数字

> ID：12377002
> 
> 赞同：1
> 
> 时间：2012-09-11T19:58:50.757
> 
> 标签：face-recognition

好的，我一直在为 ios 开发应用程序，只是在这里和那里随机学习教程，希望能学到更多。

最近我可以看到一个在线教程，它会引导你使用人脸识别

在本教程中，他有它拍摄一张图像并在人的眼睛周围放一个绿点，在嘴巴上放一个蓝点。

我的问题是如何改变它，而不是在它们上面放一个绿色和蓝色的点，它只会返回数据，比如眼睛之间的距离以及眼睛到嘴巴的距离。

您将如何在此处执行此操作是我正在关注的在线教程。 [http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)

谢谢你

# c - 合并排序SEGV，数组指针消失？

> ID：12377005
> 
> 赞同：0
> 
> 时间：2012-09-11T19:59:01.523
> 
> 标签：c, algorithm, sorting, mergesort

我整天都在尝试编写合并排序，但我不知道为什么它不起作用:(无论我做什么我都有一个 SIGSEGV ！

这是堆栈跟踪：

```
#0  0x00401435 in tabLen (tab=0x1) at CodeBlocks\mergeSort.c:7
#1  0x004014d8 in mergeTabs (tab1=0x1, tab2=0x1) at CodeBlocks\mergeSort.c:26
#2  0x004016b3 in mergeSort (tab=0x3f1000, size=2) at CodeBlocks\mergeSort.c:51
#3  0x0040168b in mergeSort (tab=0x3f0fd8, size=3) at CodeBlocks\mergeSort.c:51
#4  0x0040168b in mergeSort (tab=0x3f2fb0, size=5) at CodeBlocks\mergeSort.c:51
#5  0x004013ea in main () at CodeBlocks\main.c:9 
```

在#1 和#2 之间，就像数组消失了一样，我不明白为什么......

这是我尝试过的实现：

```
int tabLen(int *tab)
{
    int i = 0;

    for (; tab && tab[i] && tab[i] != ENDTAB; ++i)
        ;
    return i;
}

int *copy(int *tab, int beg, int end)
{
    int size = end - beg + 1;
    int *res = malloc(size * sizeof(int));
    int i = beg;

    for (; i < end; ++i)
        res[i - beg] = tab[i];
    res[i - beg] = ENDTAB;
    return res;
}

int *mergeTabs(int *tab1, int *tab2)
{
    int len1 = tabLen(tab1);
    int len2 = tabLen(tab2);
    int *res = malloc((len1 > len2) ? (len1+1) * sizeof(int) : (len2+1) * sizeof(int));
    int i = 0;
    int t1 = 0;
    int t2 = 0;

    printf("len1:%d | len2:%d\n", tabLen(tab1), tabLen(tab2));
    for (; t1 < len1 && t2 < len2; ++i)
        res[i] = (tab1[t1] < tab2[t2]) ? tab1[t1++] : tab2[t2++];
    while (t1 < len1)
        res[i++] = tab1[t1++];
    while (t2 < len2)
        res[i++] = tab2[t2++];
    res[i] = ENDTAB;
    return res;
}

int *mergeSort(int *tab, int size)
{
    int *t1 = copy(tab, 0, size/2);
    int *t2 = copy(tab, size/2, size);

    if (tabLen(tab) <= 1)
        return;
    return mergeTabs(mergeSort(t1, tabLen(t1)), mergeSort(t2, tabLen(t2)));
} 
```

有任何想法吗 ？

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:09:18.377

通过快速扫描代码（我在本地运行它，我假设 ENDTAB 为 -1），我注意到在 tabLen() 函数中，我们得到了一个无效的指针。输出如下所示。

```
% ./a.out 
0x7fffb7dec6e0
0x7b9030
0x7b9030
0x7b9070
0x7b9070
0x7b9050
0x7b9050
0x1
Segmentation fault 
```

我正在做的是 printf("%p\n", tab); 在 tabLen() 函数中。您的代码可能还有其他问题。如果我对 ENDTAB 的假设不正确，请纠正我。

请确保在 tabLen(tab) <= 1 的情况下在 mergeSort() 中返回正确的值并使用它。

**编辑**

刚刚注意到堆栈跟踪中的无效指针。我的错。

返回 NULL 不会使代码崩溃，但它肯定有问题。那只是因为您在 tabLen() 中检查选项卡是否为非 NULL 才不会崩溃。

# ms-access - 从现有值更新访问列

> ID：12377007
> 
> 赞同：1
> 
> 时间：2012-09-11T19:59:12.333
> 
> 标签：ms-access, ms-access-2007

我有一个 MS 访问表，其中包含以下列和示例记录。

如何使用每个 ProductID 的最少 LastSaleDate 更新 adDate 值。

```
orderID productID   lastsaleDate    adDate
1       1           10/20/2012  
2       1           5/10/2007   
3       1           4/1/2004    
4       1           20/11/2011  
5       2           10/10/2010  
6       2           12/10/1972 
```

例如，ProductID 1 的 adDate 将是 4/1/2004，ProductID 2 的 adDate 将是 12/10/1972

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:11:15.253

您可以使用 DMin：

```
UPDATE sales  
SET sales.adDate = DMin("lastsaleDate","sales","productID=" & productid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:19:34.757

除非您有令人信服的理由将`adDate`值实际存储在表中，否则请考虑`adDate`在需要时随时使用查询进行计算。这样，您就不会冒险显示`adDate`尚未更新的值以反映基础数据的最新更改。

```
SELECT
    y.orderID,
    y.productID,
    y.lastsaleDate,
    sub.adDate
FROM
    YourTable AS y
    INNER JOIN
    (
        SELECT productID, Min(lastsaleDate) AS adDate
        FROM YourTable
        GROUP BY productID
    ) AS sub
    ON y.productID = sub.productID; 
```

# python - Python中是否有一个库函数可以将生成器函数转换为返回列表的函数？

> ID：12377013
> 
> 赞同：32
> 
> 时间：2012-09-11T19:59:45.633
> 
> 标签：python, generator

很多时候我认为生成器样式可以比返回列表更直接，例如，

```
def foo(input_array):
    for x in input_array:
        yield processed(x) 
```

对比

```
def bar(input_array):
    accumulator = []
    for x in input_array:
        accumulator.append(processed(x))
    return accumulator 
```

（好吧，如果真的那么简单，我会写`map`，但你明白了：生成器版本更干净）。但是，生成器的返回类型并不总是需要的。是否有内置装饰器可用于更改`foo`为返回列表或元组的函数？我自己写的方式是，

```
import functools

def transform_return_value(transformer):
    def inner(f):
        @functools.wraps(f)
        def new_f(*argv, **kwargs):
            return transformer(f(*argv, **kwargs))
        return new_f
    return inner

@transform_return_value(list)
def foo(input_array):
    for x in input_array:
        yield processed(x) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T20:03:26.977

据我所知（我看过，因为我想知道完全相同的事情），不：没有直接的方法可以使用标准库执行此操作。

`listify`不过，在 unstdlib.py 库中有一个经过彻底测试的包装器： [https ://github.com/shazow/unstdlib.py/blob/master/unstdlib/standard/list_.py#L149](https://github.com/shazow/unstdlib.py/blob/master/unstdlib/standard/list_.py#L149)

```
def listify(fn=None, wrapper=list):
    """
    A decorator which wraps a function's return value in ``list(...)``.

    Useful when an algorithm can be expressed more cleanly as a generator but
    the function should return an list.

    Example::

        >>> @listify
        ... def get_lengths(iterable):
        ...     for i in iterable:
        ...         yield len(i)
        >>> get_lengths(["spam", "eggs"])
        [4, 4]
        >>>
        >>> @listify(wrapper=tuple)
        ... def get_lengths_tuple(iterable):
        ...     for i in iterable:
        ...         yield len(i)
        >>> get_lengths_tuple(["foo", "bar"])
        (3, 3)
    """
    def listify_return(fn):
        @wraps(fn)
        def listify_helper(*args, **kw):
            return wrapper(fn(*args, **kw))
        return listify_helper
    if fn is None:
        return listify_return
    return listify_return(fn) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-27T08:40:31.243

尽管@David Wolever 的回答是最干净的方式，但我经常发现自己在做的一件事（因为它不需要定义外部装饰器）是将生成器编写为本地函数，如下所示：

```
def foo(input_array):
    def gen():
        for x in input_array:
            yield processed(x)

    return list(gen()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-02T10:18:32.167

这是一个替代的，简单的装饰器，没有任何花里胡哨：

```
from functools import wraps
from types import GeneratorType

def listify(func):
    """decorator for making generator functions return a list instead"""
    @wraps(func)
    def new_func(*args, **kwargs):
        r = func(*args, **kwargs)
        if isinstance(r, GeneratorType):
            return list(r)
        else:
            return r
    return new_func 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-11T20:14:11.507

要获得高效简洁的列表定义，请尝试使用列表推导：

```
def foo(input_array):
    return [processed(x) for x in input_array] 
```

**如果你想让一个函数返回一个列表，让它返回一个列表。**这比使用装饰器更简洁、更易于理解、阅读和调试。

您可能更喜欢内联编写此代码，而不是调用函数。

# google-apps-script - 谷歌脚本我收到此错误“找不到文件夹”

> ID：12377015
> 
> 赞同：0
> 
> 时间：2012-09-11T19:59:49.367
> 
> 标签：google-apps-script, directory

我使用未更改的 Google 代码（文件夹名称除外），但出现错误“找不到文件夹”。

我检查了文件夹名称的拼写，并在“我的云端硬盘”中尝试了几个不同的文件夹，但都出现了错误。完全相同的代码适用于我的朋友，但不适用于我。

这是代码行：

```
var folder = DocsList.getFolder('My Docs'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:42:07.467

尝试使用文件夹 ID 而不是名称。

```
var folder = DocsList.getFolderById("234asdfih-324asdf") 
```

打开文件夹时，您可以在浏览器的地址栏中找到您的文件夹 ID。如果您使用 ID，您可以稍后更改文件夹的名称，这并不重要。

如果您使用文件夹名称，请注意区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T14:52:51.807

我遇到了一个非常相似但不知何故不同的问题。根据我包含在 CHECKLIST_FOLDER 中的文件夹名称（它们都是有效的），命令：

**`myFile.addToFolder(DocsList.getFolder(CHECKLIST_FOLDER));`**

返回（或不返回）错误消息“找不到文件夹”。文件夹详细信息和权限在所有情况下都是相同的，没有明确的失败原因。

在这种情况下，Thomas 的工作也很好，谢谢！

# css - Jquery Mobile 粘滞页脚

> ID：12377016
> 
> 赞同：10
> 
> 时间：2012-09-11T19:59:52.910
> 
> 标签：css, jquery-mobile, sticky-footer

我想要 Jquery Mobile 中的页脚，它不是固定的，但始终位于页面底部。

像这样：[http](http://ryanfait.com/sticky-footer/) ://ryanfait.com/sticky-footer/ （但在 JQuery Mobile 中），不像标准的 JQuery Mobile 固定页脚。

所以页脚应该出现在内容的末尾，或者屏幕的底部，以较低者为准。

关于如何解决这个问题的任何想法？

**编辑**：

基本问题是，我似乎无法让 div`data-role=content`实际占据屏幕的整个高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:04:35.487

我主要使用 CSS 解决了这个问题。与公认答案相比，它的优点是它将处理页面显示后页面大小发生变化的情况（例如浏览器调整大小、方向更改，甚至更简单的情况，如可折叠/手风琴部分）。它的 Javascript 代码也少得多，也没有布局数学。

CSS：

```
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
}

[data-role=page] {
  min-height: 100%;
  position: relative;
}

[data-role=content] {
  padding-bottom: 40px; /* based on how tall your footer is and how much gap you want */
}

[data-role=footer] {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 40px /* this can be configurable, or omitted, as long as the above padding-bottom is at least as much as the height of the footer is */
} 
```

绝对页脚导致 jQuery Mobile 页面转换显示闪烁的页脚（尤其是“幻灯片”转换），所以我添加了少量的 Javascript：

```
$(document).live( 'pagebeforechange', function() {
  // hide footer
  $('[data-role=footer]').hide();
});

$(document).live( 'pagechange', function() {
  // show footer
  $('[data-role=footer]').show();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T20:54:31.753

基本上，您只需要检查每个`data-role="content"`元素的高度，以确保在页眉/页脚/内容区域中使用了视口中的垂直空间。

例如：

```
$(document).on("pageshow", ".ui-page", function () {
    var $page  = $(this),
        vSpace = $page.children('.ui-header').outerHeight() + $page.children('.ui-footer').outerHeight() + $page.children('.ui-content').height();

    if (vSpace < $(window).height()) {
        var vDiff = $(window).height() - $page.children('.ui-header').outerHeight() - $page.children('.ui-footer').outerHeight() - 30;//minus thirty for margin
        $page.children('.ui-content').height(vDiff);
    }
});​ 
```

每次导航到页面时都会运行此代码。

这是一个演示：http: [//jsfiddle.net/aBVtJ/1/](http://jsfiddle.net/aBVtJ/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-27T08:30:23.913

看看[这个 SO](https://stackoverflow.com/questions/15996587/sticky-footer-w-jquery-mobile)：

*jQuery Mobile 有一个支持固定或“粘性”位置的本机页脚。示例和文档可以在* [http://view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/找到](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/)

# r - Fetch() 在 RSQLite 中挂起以进行大型查询

> ID：12377017
> 
> 赞同：2
> 
> 时间：2012-09-11T19:59:55.577
> 
> 标签：r, sqlite

我在 R 中使用 RSQLITE 来构建数据库并执行“加入”操作并使用以下方法提取行：

```
 res<-dbSendQuery(con," SELECT DISTINCT all_transcript.transcript1 from temp LFET OUTER JOIN....") 
```

总共有 16 个 JOIN 操作。我验证上面的命令工作正常，因为 fetch(res) 返回 500（默认）行数。此外，它仅适用于有限数量的行。但是当我提供 fetch(res,n=-1) 来提取所有行数时，它会挂起。任何的想法？我只是给了 fetch(res,n=4000) 并且它没有响应。

R的会话信息：

```
sessionInfo():
R version 2.14.1 (2011-12-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
[3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
[5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
[7] LC_PAPER=C                 LC_NAME=C
[9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] RSQLite_0.11.1 DBI_0.2-5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T07:51:17.763

简单的回答：重要查询的 16 个 JOINS 意味着您的查询和/或数据库设计得不好。改进方法 - 减少连接：

1.  创建汇总表、非规范化表
2.  通过尽可能早地在查询计划中对数据应用过滤器来调整查询，从而减少加入的数据
3.  将数据库保存在更强大的服务器上并使用另一个数据库引擎，并使 R 应用程序查询该数据库并将结果存储在 sqlite

您也可以对查询优化和性能调整进行大量研究。

# forms - 从用户输入的日期计算某些工作日数

> ID：12377026
> 
> 赞同：1
> 
> 时间：2012-09-11T20:00:43.160
> 
> 标签：forms, acrobat

我正在处理用户在“开始日期”字段中输入日期的 PDF。我需要脚本来使用指定天数的新营业日期填充字段“date1”。

例如：

```
User types 9/7/2012 in "startdate" field :: I need "date1" field to say 9/11"
Note: this takes into account that 9/8 & 9/9 are weekend dates. 
```

我已经能够使用 WORKINGDAYS 公式在 Excel 中生成它，但需要让它在 Adob​​e Acrobat 中工作。
我有使用表单域的经验，但从未能够让它们进行计算（除了基本数学）。

# java - deploymentURL 未注入到 Arquillian Drone 的集成测试中

> ID：12377028
> 
> 赞同：3
> 
> 时间：2012-09-11T20:00:45.390
> 
> 标签：java, testing, jboss-weld, jboss-arquillian

我正在尝试在我们的项目中引入使用 Arquillian Drone 的集成测试。我做了一些小的演示应用程序，阅读了一些东西，最后尝试为相对简单的网页编写一个简单的集成测试。

我想我已经解决了所有必需的依赖项，并且能够在 Intellij Idea 中运行我的测试类。但是当我运行它时，我得到一个异常说：

> java.lang.RuntimeException：无法查找字段 java.net.URL com.example.BEViewUIWithDrone.deploymentURL 的值（...）

造成的：

> java.lang.RuntimeException：类型类 java.net.URL 的提供程序返回了一个空值：org.jboss.arquillian.test.impl 中的 org.jboss.arquillian.container.test.impl.enricher.resource.URLResourceProvider@6e73a35c。 org.jboss.arquillian.test.impl.enricher.resource.ArquillianResourceTestEnricher.enrich(ArquillianResourceTestEnricher.java:57) 上的enricher.resource.ArquillianResourceTestEnricher.lookup(ArquillianResourceTestEnricher.java:115)”（完整堆栈跟踪较低）

我的测试课：

```
public class BEViewUIWithDrone extends Arquillian {

    private static final String WEBAPP_SRC = "project/src/main/webapp";

    @Drone
    private DefaultSelenium selenium;

    @ArquillianResource
    URL deploymentURL;

    @Deployment(testable = false)
    public static WebArchive createDeployment() {

        MavenDependencyResolver resolver = DependencyResolvers
                .use(MavenDependencyResolver.class)
                .loadDependenciesFromPom("pom.xml");

        File[] jbossLogging = resolver.artifact("org.jboss.logging:jboss-logging:3.0.0.GA").resolveAsFiles();
        File[] solder = resolver.artifact("org.jboss.seam.solder:seam-solder:3.0.0.Final").resolveAsFiles();

        return ShrinkWrap.create(WebArchive.class, "be-view.war")
                .addAsLibraries(jbossLogging)
                .addAsLibraries(solder)
                .addClasses(BorrowingEntityService.class)
                .addClasses(BorrowingEntityViewService.class)
                .addClasses(ViewingService.class)
                .addClasses(QueryLimit.class)
                .addClasses(CustomerService.class)
                .addClasses(MockProducer.class)
                .addAsWebResource(new File(WEBAPP_SRC, "view/be/borrowingEntityView.xhtml"))
                .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml")
                .addAsWebInfResource(
                        new StringAsset("<faces-config version=\"2.0\"/>"),
                        "faces-config.xml");
    }

    @Test
    public void simpleTest() {

        // When
        selenium.open(deploymentURL + "/view/be/searchBorrowingEntityView.jsf");
    }
} 
```

Pom 片段：[链接到带有列表的 paste.org](http://pastie.org/private/fiav0lcpwkwczcdypznaa)

完整的堆栈跟踪：

```
java.lang.RuntimeException: Could not lookup value for field java.net.URL com.example.BEViewUIWithDrone.deploymentURL
    at org.jboss.arquillian.test.impl.enricher.resource.ArquillianResourceTestEnricher.enrich(ArquillianResourceTestEnricher.java:61)
    at org.jboss.arquillian.test.impl.TestInstanceEnricher.enrich(TestInstanceEnricher.java:52)
    at org.jboss.arquillian.container.test.impl.ClientTestInstanceEnricher.enrich(ClientTestInstanceEnricher.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
    at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createBeforeContext(ContainerEventController.java:124)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:134)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:114)
    at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.before(EventTestRunnerAdaptor.java:95)
    at org.jboss.arquillian.testng.Arquillian.arquillianBeforeTest(Arquillian.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:525)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:202)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:613)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
    at org.testng.TestRunner.privateRun(TestRunner.java:749)
    at org.testng.TestRunner.run(TestRunner.java:600)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:312)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:274)
    at org.testng.SuiteRunner.run(SuiteRunner.java:223)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1039)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:964)
    at org.testng.TestNG.run(TestNG.java:900)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:110)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:205)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:174)
    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.RuntimeException: Provider for type class java.net.URL returned a null value: org.jboss.arquillian.container.test.impl.enricher.resource.URLResourceProvider@6e73a35c
    at org.jboss.arquillian.test.impl.enricher.resource.ArquillianResourceTestEnricher.lookup(ArquillianResourceTestEnricher.java:115)
    at org.jboss.arquillian.test.impl.enricher.resource.ArquillianResourceTestEnricher.enrich(ArquillianResourceTestEnricher.java:57)
    ... 75 more
Process finished with exit code 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T20:10:25.787

Weld-EE-Embedded 容器只是一个 CDI Bean 容器，不支持简单 CDI 之外的任何内容。

要测试 JSF，您需要一个支持 JSF 的容器，例如 JBoss AS 7。

# matlab - 如何在没有循环的情况下计算 MATLAB 中矩阵的所有列的外积的总和？

> ID：12377029
> 
> 赞同：0
> 
> 时间：2012-09-11T20:00:45.993
> 
> 标签：matlab, matrix, vectorization

我试图让标题说明一切。

我有一个矩阵，我需要计算列组合的外积的总和。我知道如何使用 for 循环来做到这一点。但是，有没有一种矢量化的方式来做到这一点？

```
testData = rand(x);   
answer = zeros(x);
for i=1:x
  for j=1:x
    answer = answer + testData(:,i)'*testData(:,j);
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:19:42.350

答案就在这个问题[Fast Outer Product](https://stackoverflow.com/questions/8806064/fast-outer-product-in-matlab)

```
answer = testData.'*testData; 
```

**注意 这给出了行**的外积的总和。

# sparse-matrix - 稀疏矩阵的 pLSA 实现

> ID：12377037
> 
> 赞同：3
> 
> 时间：2012-09-11T20:01:40.180
> 
> 标签：sparse-matrix, lsa, topic-modeling

我正在尝试实现 Thomas Hoffman (1999) 提出的 pLSA 算法。但是，我发现的所有实现都认为输入 term-doc 矩阵是完整的而不是稀疏的。由于我的输入矩阵非常大且稀疏，因此我想找出一种支持稀疏性的算法。你能帮我找一个吗？首选 Matlab 或 Java。

更新我发现 PennAspect [http://www.cis.upenn.edu/~ungar/Datamining/software_dist/PennAspect/index.html](http://www.cis.upenn.edu/~ungar/Datamining/software_dist/PennAspect/index.html) 实际上用稀疏矩阵输入实现了 PLSA。

解决方案很简单。二维参差不齐的数组（*每行长度不同的数组*）可用于表示稀疏矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-23T07:33:35.070

我知道为时已晚。但我也在寻找答案，最后自己实现了。我是 R 的新手，但喜欢这个算法，并建议在 R 中实现它。它与我的大型稀疏 dtm 完美配合，即具有 10 次迭代的文档术语矩阵：

```
##PLSA algo
k <- 100;
P1<-t(apply(matrix(sample.int(46, k*dim(mat)[2], TRUE), k, dim(mat[2]),1,funnorm <- function(matrow){
matcol <- matrow/sum(matrow)
return(matcol)
}))

P2<-t(apply(matrix(sample.int(46, dim(mat)[1]*k, TRUE), dim(mat)[1],  k),1,funnorm <- function(matrow){
matcol <- matrow/sum(matrow)
return(matcol)
}))

for(n in 1:10){

P3<-P2 %*% P1
P4 <- mat / P3

P5 <- P4 %*% t(P1)
P6 <- P2 * P5
P2new <- P6/(rowSums(P6))

P5 <- t(P2) %*% P4 
P6 <- P1 * P5 
P1new <- P6/(rowSums(P6))

P1 <- P1new
P2 <- P2new
} 
```

希望它可以帮助任何仍在寻找这个的人。

# c# - 如果需要“太”长时间，则停止 Linq 查询

> ID：12377040
> 
> 赞同：0
> 
> 时间：2012-09-11T20:01:44.547
> 
> 标签：c#, asp.net, .net, linq, linq-to-sql

目前，我需要创建一个报告程序，该程序在 SQL 数据库中的许多不同表上运行报告。多个不同的客户端需要此功能，但某些客户端的数据库比其他客户端大。我想知道的是，如果查询时间“太长”，是否可以在一段时间后停止查询。

给出一些上下文，一些客户端的表超过 200 万行，尽管不同的客户端在同一个表中可能只有 50k 行。我希望能够运行查询 20 秒，如果它还没有完成，那么向用户返回一条消息，说结果集太大并且需要像我们一样在几个小时之外生成报告不想在白天运行资源密集型操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:03:16.867

在您的连接字符串或`DataContext`通过[`CommandTimeout`属性](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.commandtimeout.aspx)设置连接超时。当超时到期时，您将获得一个`TimeoutException`，并且您的查询将被取消。

您不能确定在超时发生的那一刻服务器上的查询就被取消了，但在大多数情况下，它会很快取消。有关详细信息，请阅读出色的文章[“没有查询超时之类的东西......”](http://blogs.msdn.com/b/khen1234/archive/2005/10/20/483015.aspx)。重要的部分是：

> 客户端使用注意事件向服务器发送查询超时信号。注意事件只是 SQL Server 客户端可以发送给它的一种不同类型的 TDS 数据包。除了连接/断开连接、T-SQL 批处理和 RPC 事件之外，客户端还可以向服务器发出注意信号。注意告诉服务器尽快取消连接当前正在执行的查询（如果有的话）。注意不会回滚打开的事务，也不会立即停止当前正在执行的查询——服务器会在下一个可用机会时中止它为连接所做的一切。通常，这会很快发生，但并非总是如此。

但请记住，它会因提供商而异，甚至可能会在服务器版本之间发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:03:32.730

如果您在后台线程上运行查询，您可以轻松地做到这一点。让主线程启动一个计时器并生成一个运行查询的后台线程。如果超过 20 秒后台线程没有返回结果，主线程可以取消它。

# sql - 修复了 SQL 查询中的数组和随机数

> ID：12377041
> 
> 赞同：0
> 
> 时间：2012-09-11T20:01:48.823
> 
> 标签：sql, arrays, sql-server-2008, random

随机选择 SQL Server 查询中返回的五个固定字符串之一的最简单方法是什么？

即相当于：

```
function randomColumn() {
   var values = ['apple', 'banana', 'orange', 'cherry', 'lemon'];
   var idx = Math.floor(Math.random() * 5);
   return values[idx];
} 
```

我需要更改我现有的 SQL 脚本以使某个列返回这些值之一，而无需更改我的客户端代码。

我需要创建一个临时表吗？

我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:09:19.640

您不需要几个字符串的临时表，您可以即时创建结果：

```
select str
from (
  select 0 as id, 'apple' as str
  union all
  select 1, 'banana'
  union all
  select 2, 'orange'
  union all
  select 3, 'cherry'
  union all
  select 4, 'lemon'
) x
where id = floor(rand() * 5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:05:42.573

```
select top 1 Value
from Table1
order by newid() 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/d9250/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:10:25.823

```
Select 'apple' values 
INTO #tmp
UNION ALL 
Select'banana' values 
UNION ALL 
Select 'orange' values      
.
.
.  
select top 1 values 
from #tmp
order by newid() 
```

**或者**

```
ALTER TABLE #tmp
ADD id BIGINT IDENTITY(1,1)
DECLARE @rand BIGINT 

SET @rand=rand()*4

select top 1 values 
from #tmp
where id=@rand 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T12:01:28.870

```
DECLARE @ListofIDs TABLE(IDs VARCHAR(100), ID INT IDENTITY(1,1));
INSERT INTO @ListofIDs
SELECT 'a'
UNION ALL
SELECT 'b'
UNION ALL
SELECT '20'
UNION ALL
SELECT 'c'
UNION ALL
SELECT '30'
UNION ALL
SELECT 'd';
SELECT * FROM @ListofIDs;

SELECT  Ids from @ListofIDs where ID=1+ CONVERT(INT, (5)*RAND()) 
```

# scala - Scala 2.10 反射：ClassSymbol.isCaseClass 在 scala 控制台中有效，但在脚本/应用程序中无效

> ID：12377046
> 
> 赞同：1
> 
> 时间：2012-09-11T20:02:06.363
> 
> 标签：scala, reflection, scala-2.10

我在 Scala 2.10.0-M7 中玩反射，偶然发现了`ClassSymbol.isCaseClass`在 scala 控制台中表现得像预期的方法，但在作为 java 应用程序或 scala 脚本执行时却没有。

我`TestScript.scala`是这样定义的：

```
import reflect.runtime.currentMirror

case class TestCase(foo: String)

object Test {
  def main(args: Array[String]) {
    val classSymbol = currentMirror.reflect(new TestCase("foo")).symbol
    val isCaseClass = classSymbol.isCaseClass
    println(s"isCaseClass: $isCaseClass")
  }
}

Test.main(Array()) 
```

如果我在命令行调用上执行它

```
$ scala TestScript.scala 
```

我得到这个输出：

```
isCaseClass: false 
```

如果我改为将代码输入到交互式 scala shell 中或像这样加载它：

```
scala> :load TestScript.scala 
```

我得到以下正确的输出：

```
Loading TestScript.scala...
import reflect.runtime.currentMirror
defined class TestCase
defined module Test
isCaseClass: true 
```

如果我编译它并将其作为标准 Java 应用程序执行，我会再次得到`false`结果`ClassSymbol.isCase`。

我错过了什么？scala控制台环境和java运行时环境有什么区别？如何在实际应用中获得正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:50:19.383

[https://issues.scala-lang.org/browse/SI-6277](https://issues.scala-lang.org/browse/SI-6277)

```
val classSymbol = cm.reflect(new TestCase("foo")).symbol

{ classSymbol.typeSignature }
val isCaseClass = classSymbol.isCaseClass
println(s"isCaseClass: $isCaseClass") 
```

编辑：要回答您的最后一个问题，您不会在实际应用程序中使用里程碑。:)

更新。自 Scala 2.10.0-RC1 起已修复。

# lotus-notes - Notes 设计器的工作空间信息存储在哪里？

> ID：12377051
> 
> 赞同：0
> 
> 时间：2012-09-11T20:02:35.760
> 
> 标签：lotus-notes

两次，我的设计师客户端中的数据库列表和所有工作集都被清空了。它保留了工作集名称，但不再将所有数据库分组在其中或列为分配给工作集的选项。

虽然这对数据库本身没有不利影响，但它一直很烦人。我确实在个人 ID 和签名 ID 之间切换，但两次“清空”都不一致。

有人遇到过这种情况么？任何想法可能导致它？是否有一个包含人类可读的外部文件？

这是关于 8.5.3 和 Notes 的许多事情之一，这让我渴望 Notes 5 或 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:39:01.353

我从未丢失过我的工作集，但我一直在考虑备份定义或手动编辑它。

工作集定义在

> notes\data\workspace.metadata.plugins\org.eclipse.ui.workbench\workingsets.xml

这是[我的来源](http://blog.thimojansenit.nl/2011/05/bulk-cleanup-old-working-set-databases.html)。

菲尔

# jquery-plugins - 保留html的jquery“查看更多”文本插件

> ID：12377057
> 
> 赞同：2
> 
> 时间：2012-09-11T20:03:24.107
> 
> 标签：jquery-plugins, tinymce, string-formatting

我将此 jquery 插件用于“查看更多”文本：

[http://keith-wood.name/moreRef.html](http://keith-wood.name/moreRef.html)

我从 tinymce 编辑器 html 文本保存到 mysql 数据库中。然后我在 php 页面中显示 html 文本，并使用“查看更多”文本 jquery 插件仅显示 100 个单词的文本。

我的问题是该插件不保留 html 格式的文本，但它将 html 格式的文本更改为简单文本，它删除了 html 标记。

如何保留带有 html 标记的文本以正确显示格式文本并且还有“查看更多”链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T10:22:36.157

您可以使用纯 css 来完成，并将 html 保留在适当的位置。这里是一个JS fiddle（IE6,7,8上不会显示越来越少，内容会被展开）

[http://jsfiddle.net/6sj4e/45/](http://jsfiddle.net/6sj4e/45/)

```
.text {
    height: 50px;
    overflow: hidden;
    height: 100%\9;
  }

input.less-more,
input.less-more:checked ~ label.more,
input.less-more:not(:checked) ~ label.less {
    display: none;
} 
```

和 html ：

```
<input id="chbox" class="less-more" type="checkbox">
<div class="text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</div>
<label for="chbox" class='more'>more</label>
<label for="chbox" class='less'>less</label> 
```

# java - 我可以将 android 应用程序转换为在 java 通用手机下运行吗？

> ID：12377067
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:03:52.713
> 
> 标签：java, android, java-me

我已经看到很多关于为旧手机制作的旧 Java 应用程序试图在 android 手机下运行的问题。

是否可以在旧的 java 手机中运行 android 应用程序（100% 在 java 和 android 默认库中制作），以某种方式将 apk 文件转换为 jar 文件？

想象一下，我们在那些 3d 代手机中使用了酷炫且有用的 android 应用程序......

* * *

我发现了一个将 Android 活动和硬件接口转换为 S60 第 5 版手机的库项目。

与许多人的想法不同，这非常重要，因为这些手机更便宜，我们可以为它们开发安卓应用程序（更快、更高效）并用于个人和公司用途。

当我们需要购买 50 部手机中的 30 部时，价格就是一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:08:32.560

> 是否可以在旧的 java 手机中运行 android 应用程序（100% 在 java 和 android 默认库中制作），以某种方式将 apk 文件转换为 jar 文件？

一句话，没有。JavaME 设备和 Android 设备在应用程序运行时环境方面几乎没有共性。

欢迎您尝试移植 Android 操作系统以在这些设备上运行，尽管它们的 RAM 通常太少，无法胜任此类角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:17:41.570

我找到了一个将 S60 手机转换为运行 android 应用程序的项目：

[http://www.developer.nokia.com/Community/Wiki/Porting_Android_(Java)_applications_to_Java_ME_on_S60_5th_Edition](http://www.developer.nokia.com/Community/Wiki/Porting_Android_(Java)_applications_to_Java_ME_on_S60_5th_Edition)

诺基亚 n95 及更高版本的手机比其他 java 手机更适合快速硬件和更多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:11:44.863

我认为这是不可能的，因为 Android SDK 依赖于 Android 支持的功能。由于您不知道基于 Java 的手机是否提供相同的功能，我会说它不太可能运行。

# ios - 嵌入式视频未显示在 iPad 横向视图中

> ID：12377069
> 
> 赞同：0
> 
> 时间：2012-09-11T20:03:55.063
> 
> 标签：ios, ipad, video, embed, landscape

我正在建立一个嵌入视频的网站，主要来自 YouTube。视频未在 iPad 的横向视图中显示。知道为什么或如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T23:24:15.287

不幸的是，我需要更多关于此的信息，以便能够为您提供具体的答案。

你能在纵向模式下看到视频但在横向模式下看不到吗？

您很有可能通过越狱调整隐藏了您的 YouTube 应用，或者您启用了限制。无需越狱即可启用限制。事实证明，隐藏 YouTube 应用程序可能会导致嵌入的视频无法显示。无论如何，实际 YouTube 网站上的 YouTube 视频仍然可以正常播放，但如果您的 YouTube 应用程序被隐藏，或者您启用了限制，嵌入式视频可能会给您带来问题。

如果您的 iPad 没有越狱，请进入设置/常规/限制并确保 YouTube 应用程序设置为开启。

PS：我还建议您将 iOS 版本更新到最新版本。

我希望这可以解决您的问题，如果没有，请提供更多信息，例如：1）您的 iPad 是否越狱 2）您正在运行的 iOS 版本 3）指向您的一个页面（或代码）的链接 4）验证此问题是否发生在 1 个以上的设备中（以检查它是否不是设备问题）

问候，灭霸

# sql - 选择数据库中数字上彼此接近的条目

> ID：12377088
> 
> 赞同：1
> 
> 时间：2012-09-11T20:05:16.443
> 
> 标签：sql, ms-access, bioinformatics

假设我在 MS-Access 数据库中有一个名为 ABC 的表。

此表中有几列，但这个问题只有两列感兴趣 - “Hugo_symbol”和“Start_position”。“Hugo_Symbol”具有基因名称，并且多行可以具有相同的 Hugo_symbol - 意味着该列具有重复条目。“Start_position” 有数字 - 从 1000 到 100000000。

我想构建一个从表 ABC 返回行的查询：1）具有相同的 Hugo_Symbol 和 2）Start_position 彼此相距 20 以内。

例如，查询应该返回，

```
Hugo_Symbol         Start_Position

TP53                      987654
TP53                      987660
TP53                      987662
APOB                      12345
APOB                      12350
APOB                      12359 
```

因为这些行具有相同的 Hugo_Symbol 并且 Start_Position 彼此相差 20 以内。

这样的查询可能吗？如果是这样，SQL 代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:32:28.090

我不使用 Access，但这是我使用 ANSI SQL 处理它的方式。

```
SELECT
  *
FROM
  ABC    AS first
INNER JOIN
  ABC    AS second
    ON  second.Hugo_Symbol     = first.Hugo_Symbol
    AND second.Start_Position <= first.Start_Position + 20
    AND second.Start_Position >  first.Start_Position 
```

这可能会返回您期望的更多数据，并且可能会返回您期望的不同格式。

```
First.Hugo_Symbol First.Start_Position Second.Hugo_Symbol Second.Start_Position
     TP53              987654                TP53              987660
     TP53              987654                TP53              987662
     TP53              987660                TP53              987662
     APOB              12345                 APOB              12350
     APOB              12350                 APOB              12359
     APOB              12350                 APOB              12359 
```

**编辑：**

上面的答案对“彼此”有很大的影响。

如果您将要求修改为“所有记录，其中存在具有相同符号的另一条记录和一个具有 20 个自己位置的位置”，您可能会得到类似...

```
SELECT
  *
FROM
  ABC     AS data
WHERE
  EXISTS (SELECT *
            FROM ABC AS lookup
           WHERE lookup.hugo_symbol     = data.hugo_symbol
             AND lookup.start_position >= data.start_position - 20
             AND lookup.start_position <= data.start_position + 20
             AND lookup.start_position <> data.start_position
         ) 
```

但是Access2000比我平时使用的数据库更受限制。我不知道Access2000能做什么不能做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:47:51.807

```
SELECT ABC.Hugo_Symbol, ABC.Start_Position, ABC_1.Start_Position
FROM ABC INNER JOIN ABC AS ABC_1 ON 
   ABC.Hugo_Symbol = ABC_1.Hugo_Symbol AND 
   ABC.Start_Position + 20 >= ABC_1.Start_Position AND
   ABC.Start_Position < ABC_1.Start_Position 
```

# regex - Vim RegEx：匹配直到空行

> ID：12377089
> 
> 赞同：3
> 
> 时间：2012-09-11T20:05:24.763
> 
> 标签：regex, vim, newline

我正在尝试编写一个匹配任何包含“.wpd”的行的正则表达式，然后匹配之后的所有行，直到它到达一个空行（包括空行）。

这是我尝试过的：

```
/\v^.*.wpd\_.\{-}^\s*$ 
```

`\{-}`但是， “所有字符包括换行符”字符类之后的非贪婪运算符`\{-}`似乎不起作用。如果我使用

```
/\v^.*.wpd\_.* 
```

这将匹配包含“.wpd”的下一行，然后是之后的*所有*行。但是，一旦我将其更改`*`为`\{-}`，它就根本不匹配任何东西。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T20:12:00.610

这个似乎有效：

```
/\v^.*\.wpd\_.{-}\n\s*\n 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T20:33:12.700

您不能*在*`^`正则表达式中使用原子（与 相同`$`），它仅在前面（后面）有其特殊含义；在其他地方，它被视为文字字符。用于匹配正则表达式中的换行符，如 perreal 的回答所示。*`\n`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-01T21:51:22.910

```
(?s)[^\n\r]*\.wpd(.*?)\n{2} 
```

(?s) - 打开“点匹配换行符”以跨行搜索

[^\n\r]* - 从行首开始，匹配任何不是换行符的内容

.wpd - 匹配“.wpd”

(.*?) - 匹配任何东西，非贪婪，包括换行符（因为我们之前打开了 (?s) ）

\n{2} - ...直到您连续找到两个换行符，这将是一个空行

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-07T11:11:37.707

以下是对@perreal 上述答案的一大支持评论，以及我自己的答案版本，我觉得它更直观。

让我们根据[http://vimdoc.sourceforge.net/htmldoc/pattern.html#/magic剖析下面的正则表达式](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/magic)

```
/\v^.*\.wpd\_.{-}\n\s*\n 
```

1.  `\v`（小写 v）：这是“非常神奇”的运算符，表示在它之后的所有 ASCII 字符，除了 '0'-'9'、'a'-'z'、'A'-'Z' 和 ' _'有特殊含义。

    因此，像`*`, `^`,这样的字符`$`在模式中不需要转义，但是为了`_`具有特殊含义（例如修改 的行为`.`以匹配换行符），它需要进行转义。因此，使用`\v`set，您需要`\_`后者具有特殊含义。
    要真正了解表达式的`very magic`简化程度，请将其与相同的表达式进行比较，使用`very NOmagic`(uppercase `\V`):

    `/\V\^\.\*.wpd\_\.\{-}\n\s\*\n`(very nomagic) vs
    `/\v^.*\.wpd\_.{-}\n\s*\n`(very magic)

2.  `^.*\.wpd`: 贪婪地匹配任何东西 ( `.*`) 从行首 ( `^`) 直到`.wpd`

3.  `\_.`: 匹配单个字符，可以是 *任何*字符，包括换行符。
    请注意，使用`\v`set，模式必须如上所述转义下划线。

4.  `{-}``*`: 是量词的非贪心等价物。因此，在`.*BLAH`BLAH 之前匹配最可能的字符的where 将匹配最不可能的字符`.{-}BLAH`。要查看此操作，请查看此（在这种情况下，我不得不使用`?`而不是`{-}`因为该正则表达式是 PCRE）：

    [![在此处输入图像描述](../Images/e1d4b0a09fbf56d901553fe0802d3911.png)](https://i.stack.imgur.com/a5OAw.gif)

5.  `\n\s*\n`: 匹配一个可能包含一个或多个空格或制表符的空行

6.  `\_.{-}\n\s*\n`: 结合了上述两个，意味着
    匹配尽可能少的字符，包括换行符 ( `\_.`) 直到空行 ( `\n\s*\n`)

7.  `\v^.*\.wpd\_.{-}\n\s*\n`：最后把它放在一起，
    设置*非常神奇*的运算符（可能通过不需要转义除了`_`特殊含义之外的任何内容来简化模式），搜索包含`.wpd`并匹配的任何行，直到最接近的空白行。

* * *

### 我的版本使用行尾开始字符的变体

唯一的修改是用于表示空行的表达式。我发现根据行首 ('^') 和行尾 ('$') 字符定义空行很有用，但是按原样，它们不能在正则表达式中的任何地方使用，除非分别是开头和结尾。

对于上述用例，有一些变体可以在正则表达式的任何地方使用，即：'_^' 和`\_$`分别。因此，空行表达式可以写成`\_^\s*\_$`代替`\n\s*\n`，从而形成完整的表达式：

`\v^.*.wpd\_.{-}\_^\s*\_$`

这可能更接近于回答 OP 关于他们为什么无法在表达中使用行首字符的问题。

呸！*

# ruby-on-rails - OrdersController 中的 NameError#create 未定义的局部变量或方法“line_items”

> ID：12377090
> 
> 赞同：0
> 
> 时间：2012-09-11T20:05:25.260
> 
> 标签：ruby-on-rails, e-commerce, shopping-cart, activemerchant

我正在尝试与活跃的商家创建结帐。我正在使用 Ryan Bates Active 商家教程/和敏捷 Web 开发书。

我收到以下错误，我不确定如何修复它以创建成功的订单。任何帮助深表感谢。

```
NameError in OrdersController#create 

undefined local variable or method `line_items' for #<Order:0x007fcc467134b8>
Rails.root: /Users/macuser/rails_projects/listpro-a

Application Trace | Framework Trace | Full Trace
app/models/order.rb:33:in `block in add_line_items_from_cart'
app/models/order.rb:31:in `add_line_items_from_cart'
app/controllers/orders_controller.rb:33:in `create' 
```

订单控制器

```
class OrdersController < ApplicationController

def index
   @orders = Order.paginate :page=>params[:page], :order=>'created_at desc',
   :per_page => 10
   respond_to do |format|
     format.html # index.html.erb
     format.xml { render :xml => @orders }
  end
end

def new
@cart = current_cart
@order_total = current_cart.total_price

if @cart.line_items.empty?
  redirect_to services_path, :notice => "Your cart is empty"
  return
end

@order = Order.new

respond_to do |format|
  format.html # new.html.erb
  format.xml { render :xml => @order }
end
end

def create
@order = current_cart.build_order(params[:order])
@order.ip_address = request.remote_ip
@order.add_line_items_from_cart(current_cart)
respond_to do |format|
  if @order.save
    if @order.purchase          
      Cart.destroy(session[:cart_id])
      session[:cart_id] = nil
      format.html { redirect_to(redirect_to new_listing_path, :notice => 'Thank you for your order.') }
      format.xml { render :xml => @order, :status => :created, :location => @order }
    else
      render :action => "failure"
    end

  else
    format.html { render :action => "new" }
    format.xml { render :xml => @order.errors,
    :status => :unprocessable_entity }
  end
end
end  
end 
```

订单模式

```
class Order < ActiveRecord::Base
  # PAYMENT_TYPES = [ "visa", "master card", "Amex", "Discover" ] Controll the payment     options via Model
  attr_accessible :card_expires_on, :card_type, :first_name, :ip_address, :last_name,    :cart_id, :card_number, :card_verification

 # belongs_to :user
 # belongs_to :house
   belongs_to :cart

 has_many :transactions, :class_name => "OrderTransaction"
 # has_many :line_items, :dependent => :destroy

 attr_accessor :card_number, :card_verification

 validate :validate_card, :on => :create

 def purchase
    response = GATEWAY.purchase(price_in_cents, credit_card)
    transactions.create!(:action => "purchase", :amount => price_in_cents, :response => response)
    # cart.update_attribute(:purchased_at, Time.now) if response.success?
    response.success?
  end

  # Issue is here
  def price_in_cents 
  (cart.total_price*100).round
  end

  def add_line_items_from_cart(cart)
     cart.line_items.each do |item|
     item.cart_id = nil
     line_items << item
  end
 end

  private

  def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
        errors[:base] << message
      end
    end
   end

  def credit_card
    @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
     :type               => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expires_on.month,
      :year               => card_expires_on.year,
      :first_name         => first_name,
      :last_name          => last_name

     )
   end
 end 
```

推车模型

```
class Cart < ActiveRecord::Base
  attr_accessible :purchased_at, :house_id, :user_id
  has_many :line_items # , :dependent => :destroy
  has_one :order
  # has_many :services, :through => :line_items
  # belongs_to :user

  def total_price
    # convert to array so it doesn't try to do sum on database directly
    line_items.to_a.sum { |line_item| line_item.total_price }
  end

  def add_service(service_id)
   current_item = line_items.find_by_service_id(service_id)

   if current_item

          # render current cart with flash " you already have this service"
       else 
         current_item = line_items.build(:service_id => service_id)
       end
     current_item
   end
end 
```

应用控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path, :alert => exception.message
  end

  helper :all

  private

  def current_cart

    Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
    cart = Cart.create(:user_id => current_user.id)
    session[:cart_id] = cart.id
    cart
  end 
```

数据库架构

```
create_table "carts", :force => true do |t|
    t.integer  "user_id"
    t.datetime "purchased_at"
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
  end

create_table "order_transactions", :force => true do |t|
    t.integer  "order_id"
    t.string   "action"
    t.integer  "amount"
    t.boolean  "success"
    t.string   "authorization"
    t.string   "message"
    t.text     "params"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
  end

create_table "orders", :force => true do |t|
    t.integer  "cart_id"
    t.string   "ip_address"
    t.string   "first_name"
    t.string   "last_name"
    t.string   "card_type"
    t.integer  "house_id"
    t.integer  "user_id"
    t.date     "card_expires_on"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:08:57.523

`Order`此行在您的模型中被注释掉：

```
# has_many :line_items, :dependent => :destroy 
```

由于您在`add_line_items_from_cart`方法中使用了此关联，因此如果将其注释掉，它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:09:19.747

错误源于：

```
 line_items << item 
```

您删除了`has_many`Order 类中的关系。

# actionscript-3 - 对象中的重复属性

> ID：12377091
> 
> 赞同：1
> 
> 时间：2012-09-11T20:05:35.713
> 
> 标签：actionscript-3, apache-flex

我正在迭代 component.nonInheritingStyles (UIComponent) 并且我发现重复的属性。这怎么可能？

```
 var array:Array = getArrayFromObject(myLabelComponent.nonInheritingStyles);

        /**
         * 
         **/
        protected function getArrayFromObject(value:Object):Array {
            var array:Array = [];

            for (var styleProp:String in value) {
                trace("style:"+styleProp); // fontFamily duplicates a few times 
                array.push({name:styleProp, value:value[styleProp]});
            }

            return array;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:18:48.033

来自 Flex SDK 的 CSSStyleDeclaration 类中的所有魔法。

你可以找到方法：

```
mx_internal function addDefaultStyleToProtoChain(chain:Object,
                                            target:DisplayObject,
                                            filterMap:Object = null):Object 
```

你可以看到代码：

```
defaultFactory.prototype = chain;
chain = new defaultFactory(); 
```

这是包含所有魔法的代码。

为了理解它，您可以编写示例：

```
protected function getArrayFromObject(value:Object):Array {
    var array:Array = [];

    var parentStyleFactory:Function = function():void {
        this.x = 1;
    }

    var styleFactory:Function = function():void {
        this.x = 2;
    }

    var parentStyle:Object = new parentStyleFactory();
    styleFactory.prototype = parentStyle;
    var style:Object = new styleFactory();

    for (var styleProp:String in style) {
        trace("style:"+styleProp); // fontFamily duplicates a few times
        array.push({name:styleProp, value:style[styleProp]});
    }

    return array;
} 
```

这是将跟踪的示例：

```
[trace] style:x
[trace] style:x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:23:15.553

如果你写这个例子：

```
var obj:Object = {x:1, y:1};
var factory:Function = function(){
    this.x = 2;
};

factory.prototype = obj;
var obj2:Object = new factory();
trace(obj2.x);
trace(obj2.y); 
```

您将在控制台中看到：

```
[trace] 2
[trace] 1 
```

因此，如果您尝试获取某些属性的值 flash 尝试访问对象属性，如果属性不存在，它会尝试从原型访问属性。

但是，当您通过对象属性在 forin 中迭代时，flash 将返回所有对象属性和所有对象原型属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:25:50.267

我的猜测是，它一次从一个类的继承链中获取样式，而不是寻找重复的样式。这似乎不是该功能的目的。

> 此组件的非继承样式链的开始。getStyle() 方法只是访问 nonInheritingStyles[styleName] 来搜索整个原型链接链。该对象由 initProtoChain() 设置。开发人员通常不需要直接访问此属性。

[来源](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#nonInheritingStyles)

也许你想要继承Styles

# mysql - MySQL 联合存储引擎与复制（性能）

> ID：12377093
> 
> 赞同：3
> 
> 时间：2012-09-11T20:05:48.683
> 
> 标签：mysql, replication, federated-storage-engine

长话短说 - 我正在处理一个大型数据库，其中基本用户详细信息（用户 ID（索引）、用户名、密码、父用户、状态）存储在一个数据库中，扩展用户详细信息（相同的用户 ID（索引）、全名、地址等等）存储在另一个服务器上的另一个数据库中。

我需要做一个查询，在其中选择特定用户拥有的所有用户（通过基本用户详细信息数据库中的父用户字段），按他们的全名排序（来自扩展用户详细信息字段），一次只有 25 个（有是数千，对于任何一个用户来说可能是数万）。

据我所知，有三种可能的解决方案；

1.  No JOIN - 在一个查询中获取所有用户 ID 并根据这些 ID 运行第二个查询。这很好，但用户 ID 的数量可能会变得如此之多，以至于超过最大查询长度，或者效率极低。

2.  将具有基本用户详细信息的数据库表复制到具有扩展详细信息的服务器上，以便我可以执行 JOIN

3.  使用联合存储引擎表实现与#2 相同的结果

似乎 3 是最好的选择，但我几乎找不到有关性能的信息，而且我还发现一条评论在生产数据库上使用它时要小心。

我将不胜感激有关最佳实施的任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-15T14:34:40.817

FEDERATED 表是一个不错的功能.. 但它们不支持索引，这会大大降低您的应用程序的速度。

如果（！）您确实只从远程服务器上的用户数据库中读取。复制会更有效，也更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:39:54.113

就性能或限制而言，Federated Engine 有很多[限制](http://dev.mysql.com/doc/refman/5.0/en/federated-limitations.html)。它不支持事务，执行批量插入时 FEDERATED 表的性能比其他表类型慢等。

[复制](http://dev.mysql.com/doc/refman/5.5/en/replication.html)和联合引擎并不意味着做同样的事情。首先，你两个都试过了吗？

# objective-c - 需要知道哪些自定义 UIView 在点击中

> ID：12377097
> 
> 赞同：0
> 
> 时间：2012-09-11T20:06:00.457
> 
> 标签：objective-c, ios, uigesturerecognizer

我正在创建自定义 UIImageViews 并放置在 UIScrollView 中的 UIImageView 上。当用户点击自定义 UIImageView 时，它会显示一个弹出框。

我可能遇到的问题是两个自定义 UIImageViews 是否重叠。我需要问用户他想要哪一个。

我怎么知道哪些自定义 UIImageViews 在一个水龙头内？如果检测到点击，我需要每个视图自行返回。如果返回的视图不止一个，那么我可以询问用户他想要哪一个。

每个自定义 UIImageView 都有一个 UITapGestureRecognizer 创建：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(select)];
singleTap.numberOfTapsRequired = 1;
singleTap.delegate = self;

[self addGestureRecognizer:singleTap]; 
```

现在，只有最顶部的自定义 UIImageView 正在获取点击并显示弹出框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:29:19.490

我不确定你打算如何识别哪个图像是哪个，但在这个例子中我使用了标签。以下将接收滚动视图中的触摸位置，并将该点与滚动视图子视图中的图像视图帧进行比较。然后它将匹配到可变数组的图像的标签添加。

**注意：**如果您在关闭警报时不清空此数组，则将不断向其中添加新对象。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:myScrollView];

    for (UIImageView *myImageView in myScrollView.subviews) {
        if (CGRectContainsPoint(myImageView.frame, location)) {
            [someMutableArray addObject:[NSNumber numberWithInteger:myImageView.tag]];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:31:58.660

I assume by your question that the views are transparent so the user can see that in fact there is overlap, and may intentionally tap the area of overlap.

In any case what you need to do in this case is get the location of the tap:

```
[tapGesture locationInView:scrollView] 
```

Then walk the scrollView's subView array, getting each of your UIImageView's, getting its frame, and seeing if the tap is inside that frame.

Now you have an array of possible images - you can pop an action sheet (whatever) and ask the user which to show.

# c# - NHibernate 枚举集合映射

> ID：12377098
> 
> 赞同：1
> 
> 时间：2012-09-11T20:06:01.560
> 
> 标签：c#, nhibernate, enums

我对 NHibernate 很陌生，我对 NHibernate 中的枚举映射有疑问（不是流利的......）。

枚举是：

```
public enum Setting
{
    CreateUser,
    CreateRole,
    UpdateUser,
    UpdateRole,
    ...
} 
```

我还有一个名为“角色”的类，它具有三个属性：

```
public class Role
{
    long ID;
    string Name;
    ICollection<Setting> Settings;
} 
```

在这个类角色中，我想存储这个特殊角色的所有设置。如果集合中不包含一个设置，则不允许角色执行此操作。

我现在的问题是，如何映射这个类...... 我已经尝试通过 Set 或 Bag 映射这种关系，但这并没有很好地工作。

我可以想象一个数据库模式如下：

```
+------------+    +------------+    +------------+
| Role       |    | Ref Table  |    | Settings   |
+------------+    +------------+    +------------+
| ID         | FK | Role_ID    | FK | ID         |
| Name       |----| Setting_ID |----| Name       |
+------------+    +------------+    +------------+ 
```

到目前为止我是对的吗？有人可以帮我如何用 NHibernate 映射它吗？

到目前为止，谢谢

**编辑1：**

使用单独的枚举类（带有 ID、名称和许多静态方法）解决了问题。之后，我实现了设置和角色之间的多对多关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:29:08.390

您可以考虑`FlagsAttribute`在此处使用枚举和位掩码操作。

您将 NHibernate 映射到一个私有或受保护的整数字段，并且您的类将公开一个公共属性，该属性表示`Setting`从标志中读取的值的集合。

如果您不熟悉`FlagsAttribute`，请查看位于[http://msdn.microsoft.com/en-us/library/system.flagsattribute(v=vs.110).aspx的 MSDN](http://msdn.microsoft.com/en-us/library/system.flagsattribute(v=vs.110).aspx)

基本上，它是这样工作的：

```
CreateUser = 1,
CreateRole = 2,
UpdateUser = 4,
UpdateRole = 8,
… 
```

这些值可以任意组合并表示为整数。例如，具有 CreateUser 和 UpdateUser 权限的用户的值为 5，这不能通过任何其他设置组合来表示。

在我看来，这种方法提供了两全其美：

*   对于数据库和 NHibernate，只有一个整数列——没有额外的表、没有外键、没有集合、没有连接。
*   代码中的公共接口保持干净——没有其他类公开或需要位掩码操作。

这种方式不利的场景是需要通过Setting进行查询的场景，例如“select all users with UpdateRole setting”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:26:33.417

我认为 - 我没有测试过 - 你可以将你的设置集合映射为：

```
<class name="Role" table="Role">

    <id name="ID" column="ID">
       <generator ... />
    </id>

    <property name="Name" column="Name"/>

    <set name="Settings table="Ref Table">
      <key column="Role_ID" />
      <element column="Setting_ID" type="int" />
    </set>
</class> 
```

我会将枚举映射为数据库中的整数。这可能不是最佳实践，但为了简单起见。否则我认为你必须在 NH 中创建一个用户定义的类型，同时映射整数的数值也可以。执行此操作时，您只需定义集合应映射为包含一个元素的集合，即设置。`Setting`请注意，在这种情况下，我将明确指定枚举的数值。

# java - 什么 XSD 数据类型用于我的 Web 服务中的任意 XML 数据？

> ID：12377100
> 
> 赞同：0
> 
> 时间：2012-09-11T20:06:03.067
> 
> 标签：java, xsd, spring-ws

我正在编写一个使用 Spring-WS 传输 XML 数据的 Web 服务。我应该使用什么 XSD 数据类型来定义我打算发回的任意 XML 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:29:56.183

`xsd:any`. 阅读[可扩展的内容模型](http://www.xfront.com/ExtensibleContentModels.html#method2)。您还可以阅读[Catch All Element Pattern](http://www.xmlpatterns.com/CatchAllElementMain.shtml)

# google-bigquery - google-bigquery 出现意外错误，请重试

> ID：12377101
> 
> 赞同：1
> 
> 时间：2012-09-11T20:06:05.953
> 
> 标签：google-bigquery

我正在尝试运行以下查询，但始终收到“错误：意外。请再试一次'：

```
select sum( ssw.stem_count ) as sum_stem_count, ssw.stem, min( ssw.term )
from ( select * from mediacloud.ssw_2011_11_14_2011_11_20, mediacloud.ssw_2011_11_21_2011_11_27 )
    as ssw left join mediacloud.topic_obama as ssw_q
    on ssw.stories_id = ssw_q.stories_id 
  group by ssw.stem order by sum_stem_count desc limit 1000; 
```

以下查询工作正常：

```
select sum( ssw.stem_count ) as sum_stem_count, ssw.stem, min( ssw.term )
  from mediacloud.ssw_2011_11_14_2011_11_20 as ssw 
      left join mediacloud.topic_obama as ssw_q
    on ssw.stories_id = ssw_q.stories_id 
  group by ssw.stem order by sum_stem_count desc limit 1000; 
```

文档似乎说子查询可以用作 from 子句中的条目，但我无法让它工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:24:55.463

您可能遇到了与此处相同的问题： [bigquery 中的 if 子句](https://stackoverflow.com/questions/12315343/if-clause-in-bigquery) （我意识到不涉及 if 子句，但它看起来是相关的）。我们正在积极调查并希望在今天晚些时候有一个解决方案。

# iphone - 网址检查无法正常工作

> ID：12377102
> 
> 赞同：0
> 
> 时间：2012-09-11T20:06:13.290
> 
> 标签：iphone, objective-c, ios, uitableview

在我的 TableViewController 中，我使用的是自定义单元格。我正在展示一些关于这些公司的数据。公司名称默认为蓝色，我正在检查公司是否没有有效的 url，因此我可以将其涂成黑色。当然，我添加了一个逻辑，如果公司没有有效的 Url，则禁止打开公司网站。

但是，每次显示此表视图时，都会有几家具有有效 url 的公司的标题被涂成黑色。

因此，我使用相同的逻辑为 safari 中的标题和打开 url 着色，但着色不能正常工作，而在 safari 中打开则可以。

有什么想法吗？

这是我的 cellForRowAtIndexPath 函数

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"StandardSearchResultCell";

    ResultsViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    Data *theData = [Data getInstance];
    Company *theCompany = [theData.results objectAtIndex:indexPath.row];

    cell.lblTitle.text = theCompany.DisplayName;

    cell.lblDescription.text = theCompany.Description;
    cell.lblAddressPt1.text = theCompany.AddressPt1;
    cell.lblAddressPt2.text = theCompany.AddressPt2;
    cell.lblPhone.text = theCompany.Phone;
    cell.lblEmail.text = theCompany.Email;

    cell.lblDescription.adjustsFontSizeToFitWidth = false;
    cell.lblDescription.lineBreakMode = UILineBreakModeWordWrap;
    cell.lblDescription.numberOfLines = 0;
    [cell.lblDescription sizeToFit];

    NSURL *candidateURL = [NSURL URLWithString:theCompany.Url];
    NSLog(@"%@", candidateURL);
    if (!(candidateURL && candidateURL.scheme && candidateURL.host)) {
        cell.lblTitle.textColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1];
    }

    return cell;
} 
```

这是 didSelectRowAtIndexPath

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Company *company = [[Data getInstance].results objectAtIndex:indexPath.row];

    NSURL *candidateURL = [NSURL URLWithString:company.Url];
    if (candidateURL && candidateURL.scheme && candidateURL.host) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:company.Url]];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:38:13.200

您需要始终显式设置 cell.lblTitle.textColor，因为您可能会将带有黑色标签的单元格出列。因此，添加一个 else 子句并确保始终将 cell.lblTitle.textColor 设置为某个值：

```
if (!(candidateURL && candidateURL.scheme && candidateURL.host)) { 
   cell.lblTitle.textColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1]; 
else
   cell.lblTitle.textColor = [UIColor colorWithRed:0 green:0 blue:1 alpha:1]; 
```

# visual-studio-2010 - Web 设置项目中不能有超过 1 个 [Radio Buttons (2 Buttons)] 对话框？

> ID：12377103
> 
> 赞同：1
> 
> 时间：2012-09-11T20:06:14.073
> 
> 标签：visual-studio-2010, setup-project, web-setup-project

我在我的 Web 设置项目中添加了一个对话框，允许用户在两​​个选项之间进行选择。我通过右键单击项目并选择“视图”->“用户界面”来做到这一点。然后我右键单击开始-> 添加对话框并选择单选按钮（2 个按钮）。

如果我尝试以这种方式添加另一个，则 Radio Buttons (2 Buttons) 选项将消失。我假设这是因为我已经有了一个，这太荒谬了，我不希望它是真的。

如何添加带有 2 个单选按钮的第二个对话框？

# database - 如何通过 Fast search server 2010 for sharepoint 抓取存储在数据库中的链接

> ID：12377108
> 
> 赞同：1
> 
> 时间：2012-09-11T20:06:40.690
> 
> 标签：database, sharepoint-2010, web-crawler, fastsearch

我正在通过 Fast Search Server 2010 for Sharepoint 抓取一个数据库表，该表有一个名为“URLS”的列。此列的每条记录都包含一个网页的一个 url。因此，数据库表中有许多 URL。

我希望在抓取数据库时，Crawler 还应该点击表中的链接。有什么办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:19:13.377

我看到的可能性是：

1.  在 Visual Studio 项目中创建自定义 BDC 连接器以对数据库进行爬网。
2.  当您从数据库中获取 url 时，您可以在 C# 中（在您的连接器中）尽您所能从 url 的站点获取信息。
3.  您使用连接器中的属性公开从 url 站点获得的信息
4.  之后，可以将连接器属性映射到托管属性以访问搜索中的信息。

不要犹豫，问我是否不够清楚，或者您是否需要示例。

# javascript - outerHTML 是否有 Zepto 等价物？

> ID：12377110
> 
> 赞同：0
> 
> 时间：2012-09-11T20:06:48.690
> 
> 标签：javascript, zepto, outerhtml

我无法找到与 outerHTML 等效的 Zepto，所以我编写了自己的函数。

有没有更好的办法？我的功能对我有用，但如果有一种“正确”的方法可以做到这一点，我更愿意这样做。

```
function outerHTML(node){
return node.outerHTML || (function(n){
var nodeClone = $(node).clone(),
    html          = nodeClone[0],
    placeholder   = nodeClone.prev();

return $(node)})(node)
} 
```

# java - Windows 上的 UTF-8/ISO-8859-1 编码问题 --> Unix

> ID：12377112
> 
> 赞同：2
> 
> 时间：2012-09-11T20:06:54.300
> 
> 标签：java, windows, unix, utf-8, iso-8859-1

我编写了一个必须处理瑞典字母`å` `ä`和`ö`. 我在一台 Windows 计算机上编写了它，并且在那里一切正常。但是当我尝试在 Unix 中运行该程序时，瑞典字母不显示，并且该程序在处理瑞典字母时不起作用。顺便说一句，它在java中。

有什么想法可以做什么，所以它在 Unix 上运行时可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:30:52.693

你应该使用类似于编码的东西

```
FileInputStream(file.getAbsolutePath()), fileEncoding) 
```

where`fileEncodig == "UTF-8"`或其他编码，也可用于添加`-Dfile.encoding=UTF-8`系统属性或以编程方式

```
System.setProperty("file.encoding", fileEncoding); 
```

您可以使用与 . 相同的编码`String#getBytes(fileEncoding)`或`String`构造函数`getBytes`。使用`UTF-8`charset 对符号进行编码和解码的示例：

```
new String (value.getBytes("ISO-8859-1"),"UTF-8"); 
```

我也用它来读取 UTF-8 捆绑资源。

同样的东西用于`FileOutputStream`

```
FileOutputStream(file.getAbsolutePath()), fileEncoding) 
```

# java - android tcp客户端文件接收

> ID：12377119
> 
> 赞同：1
> 
> 时间：2012-09-11T20:07:44.913
> 
> 标签：java, android, sockets

我正在尝试通过套接字从python服务器向android客户端发送一个文件（具体为png）。我知道我的 python 服务器正在发送数据，我只是不知道如何在 android 端接收数据。这是接收文件的代码。

```
 String path = Environment.getExternalStorageDirectory().toString() +"/tmp/test.png";     
        try {
            socket = new Socket("192.168.1.129", 29877);

             is = socket.getInputStream();
             out = new FileOutputStream(path);
            byte[] temp = new byte[1024];
            for(int c = is.read(temp,0,1024); c > 0; c = is.read(temp,0,1024)){
                out.write(temp,0,c);
                Log.d("debug tag", out.toString());
            }
            Log.d("debug tag", temp.toString());

            Bitmap myBitmap = BitmapFactory.decodeByteArray(temp, 0, temp.length);
            imageView.setImageBitmap(myBitmap); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:16:16.523

您正在从 1K 块中读取套接字并将它们保存到文件中。然后您尝试将*最后一个块*解释为位图。这行不通。

保存后从文件中读取图像，或者将其全部缓冲在内存中。

# excel - Excel 中绘制点的平均曲线/抛物线

> ID：12377123
> 
> 赞同：1
> 
> 时间：2012-09-11T20:08:08.720
> 
> 标签：excel, graph, curve

我需要让 Excel 将大约 5 个点绘制成一条曲线。如果这些点没有完美排列，我正在寻找的是所有点的平均值。我对 Excel 上的绘图不是很熟悉，所以很可能我忽略了一些选项来获得我想要实现的目标。

这是我正在寻找的一个例子： ![曲线](../Images/683d6043ec021a9696b74def46a6cb72.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:22:45.687

看起来你想要做的是将趋势线添加到散点图中。

我在下面包含了一些屏幕截图。

显示我们想要“平均”的 3 组数据的初始图表：

![在此处输入图像描述](../Images/d9898cc71a81bd11b041030694566473.png)

向点添加趋势线：

![在此处输入图像描述](../Images/9acde8a4ddf7e98bbf06db50eab282e8.png)

趋势线设置：

![在此处输入图像描述](../Images/6612b15f9c1daa242ede00c1c4290489.png)

最后结果：

![在此处输入图像描述](../Images/e44b7f5d76d0770d721c6058c5360a62.png)

# jquery - jQuery Validate 插件和模式

> ID：12377126
> 
> 赞同：0
> 
> 时间：2012-09-11T20:08:22.480
> 
> 标签：jquery, jquery-validate

我正在为注册表单使用[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件并遇到了困境......

我不仅需要用户名字段，还需要遵循特定模式：前 5 个字符必须是数字，其余字符必须是用户想要的任何内容。

我发现[this other question](https://stackoverflow.com/questions/2476378/jquery-validate-plugin-accept-letters-only)可能与我需要做的事情一致。有没有办法做到这一点？

如果没有办法做到这一点，我想我有一个解决方法......有两个可见的字段（一个用于 5 个数字，一个用于最后的其他字符）。然后我可以有一个隐藏字段，将两个字段的值附加在一起，然后这就是作为用户名提交的内容。这样，我只能强制数字字段的长度为 5。它很脏，但它可能会起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:16:51.880

如何使用这个正则表达式：

```
/^[\d]{5}.*/ 
```

结合你提到的答案？

例如：

```
jQuery.validator.addMethod("accepted_format", function(value, element, param) {
  return value.match(/^[\d]{5}.*/);
});

rules: {
  field: 'accepted_format'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:21:32.690

使用链接的问题答案，创建接受方法，使用您的要求以及您最终得到的所需规则，让我知道任何问题。

```
jQuery.validator.addMethod("custom_accept", function(value, element, param) {
  return value.match(new RegExp( param ));
});

var rules = { 
  elementName: {
    custom_accept: "/^[\d]{5}.*/",
    required: true
  } 
} 
```

# python - 对必需属性（OOP）是否有“pythonic”方法？

> ID：12377128
> 
> 赞同：4
> 
> 时间：2012-09-11T20:08:25.557
> 
> 标签：python, oop, inheritance, args, iterable-unpacking

我正在努力寻找以下班级组织的“pythonic”方法：

我有一个基类，其属性在其构造函数中初始化，例如：

```
class Animal(object):
    def __init__(self, class_, species, is_domesticated):
        self.class_ = class_
        self.species = species
        self.is_domesticated = is_domesticated 
```

然后，当我子类化时，我想“硬编码”这些属性中的一个或多个，如下所示：

```
class Mammal(Animal):
    def __init__(self, species, is_domesticated):
        Animal.__init__(self, 'Mammal', species, is_domesticated) 
```

因此，哺乳动物的实例化如下：

```
monkey = Mammal('Primate', false) 
```

问题是，我想使用 *args 以便在更改基类定义时不理会任何派生类。因此，哺乳动物的定义变为：

```
class Mammal(Animal):
    def __init__(self, *args):
        Animal.__init(self, *(args + (class_='Mammal',))) 
```

哪个（不用说）看起来很可怕。一些提示将不胜感激=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:19:14.327

如果您在基类中只有一组固定的参数，则无需担心可变参数。只需按照您在第一个示例中所做的操作即可。如果您希望能够向基类随机添加参数，但将它们添加为位置参数并且没有默认值，那么就没有希望了；您不能随意更改基类并期望所有派生类继续工作。

但是，有一个相当常见的中间情况，您可能拥有大量属性，这些属性的各种组合可以传递给层次结构中的任何类。您可能希望向基类添加新参数，但它们将具有默认值，因此派生类不需要显式了解它们；他们将优雅地降级为基类默认值。在这种情况下，使用`**kwargs`而不是`*args`.

```
class Animal(object):
    def __init__(self, **kwargs):
        self.class_ = kwargs['class_']
        self.species = kwargs['species']
        # etc.
class Mammal(Animal):
    def __init__(self, **kwargs):
        Animal.__init__(self, class_="Mammal", **kwargs) 
```

这需要通过关键字传递的参数：

```
>>> Animal(class_='Fish', species='barracuda', is_domesticated=False)
4: <__main__.Animal object at 0x0177ABF0>
>>> Mammal(species="monkey", is_domesticated=False)
5: <__main__.Mammal object at 0x0177AFB0> 
```

. . . 但如果它们有很多，那就更好了，因为如果你有 10 种不同的东西按位置传递，没有人会记得传递它们的顺序。这也意味着您可以轻松添加新参数；没有人必须知道在列表中的哪个位置放置新的，他们可以通过关键字将它们添加到任何地方。

在 Python 2 中，您必须像上面那样手动提取 kwargs。在 Python 3 中，您可以使用[仅限关键字的参数](http://www.python.org/dev/peps/pep-3102/)来简化此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:43:29.657

好吧，你为什么不按你说的去做呢？提出`Mammal.__init__()`一个`*args`论点，然后使用它。这是代码：

```
class Animal(object):
    def __init__(self, class_, species, is_domesticated):
        self.class_ = class_
        self.species = species
        self.is_domesticated = is_domesticated
    def __str__(self):
        s_dom = "dom" if self.is_domesticated else "wild"
        return ("Animal(%s, %s, %s)" % (self.class_, self.species, s_dom))

class Mammal(Animal):
    def __init__(self, *args):
        Animal.__init__(self, 'Mammal', *args)

cat = Mammal("cat", True)
print(cat)

lion = Mammal("lion", False)
print(lion) 
```

输出：

```
Animal(Mammal, cat, dom)
Animal(Mammal, lion, wild) 
```

# lua - Corona Sdk：将函数创建的项目放入表中

> ID：12377129
> 
> 赞同：1
> 
> 时间：2012-09-11T20:08:26.820
> 
> 标签：lua, coronasdk

我不知道如何将由一个简单函数创建的对象放在一个表中，让它们作为单独的身份出现..

例如

```
local function spawncibo()
nuovoCibo = display.newImage("immagini/cibo/cibo001.png")
end
timer.performWithDelay(1500, spawncibo, -1) 
```

我尝试使用 for 循环来执行此操作，但它不起作用（如果我尝试打印表格，我总是得到 nil 结果）。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T22:18:07.890

你可以试试这个...

```
local spawned = {} -- local table to hold all the spawned images
local timerHandle = nil -- local handle for the timer. It can later be used to cancel it if you want to

local function spawnCibo()
    local nuovoCibo = display.newImage('immagini/cibo/cibo001.png')
    table.insert(spawned, nuovoCibo) -- insert the new DisplayObject (neovoCibo) at the end of the spawned table.
end

local function frameListener()
    for k, v in pairs(spawned) do -- iterate through all key, value pairs in the table
        if (conditions) then -- you will probably want to change conditions to some sort of method to determine if you want to delete the cibo
            display.remove(spawned[k]) -- remove the part of the object that gets rendered
            spawned[k] = nil -- remove the reference to the object in the table, freeing it up for garbage collection
        end
    end
end

timer.performWithDelay(1500, spawnCibo, 0) -- call spawnCibo() every 1.5 seconds, forever (That's what the 0 is for) or until timer.cancel is called on timerHandle
Runtime:addEventListener('enterFrame', frameListener) -- 
```

如果您还有其他问题，请随时提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:18:35.257

```
local spawnedCibos = {}
local function spawncibo()
    nuovoCibo = display.newImage("immagini/cibo/cibo001.png")
    table.insert(spawnedCibos, nuovoCibo);
end
timer.performWithDelay(1500, spawncibo, -1);

local function enterFrameListener( event )
    for index=#spawnedCibos, 1, -1 do
        local cibo = spawnedCibos[index];
        cibo.x = cibo.x + 1;
        if cibo.x > display.contentWidth then
            cibo:removeSelf();
            table.remove(spawnedCibos, index);
        end
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:40:45.337

如果我正确理解了你的问题，你可以尝试这样的事情：

```
local cibo = {}
local function spawncibo()
  cibo[#cibo+1] = display.newImage(string.format(
    "immagini/cibo/cibo%3d.png", #cibo+1))
end
timer.performWithDelay(1500, spawncibo, -1) 
```

这将每 1.5 秒读取文件`cibo001.png`, `cibo002.png`, ... 并将所有图像放入`cibo`数组中。

# python - 如何将实时数据从生产 App Engine 应用程序获取到本地开发应用程序？

> ID：12377134
> 
> 赞同：5
> 
> 时间：2012-09-11T20:08:45.007
> 
> 标签：python, google-app-engine, remoteapi

我想知道是否有人有关于如何配置 AppEngine remote_api 的指示，以便我可以在本地调试我的代码，但使用 remote_api 从我的服务器获取一些数据。这样，我就可以根据真实信息进行测试。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:27:11.890

[您可以按照此处](https://developers.google.com/appengine/docs/python/tools/uploadingdata)所述下载数据，并使用它来填充您的本地开发应用程序。没有理由需要 PyCharm 参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:30:09.663

如果您想使用 High Replication Datastore 中的数据调试您自己的脚本，请阅读[在本地客户端中使用远程 API](https://developers.google.com/appengine/docs/python/tools/remoteapi#Using_Remote_API_in_a_Local_Client)。首先，您需要在*app.yaml中启用***remote_api**并上传应用程序。然后将此部分添加到脚本中：

 *```
from google.appengine.ext.remote_api import remote_api_stub

def auth_func():
   return ('your_username', 'your_password')

remote_api_stub.ConfigureRemoteApi(None, '/_ah/remote_api', auth_func, 'your-app-id.appspot.com') 
```

现在，您可以从 High Replication Datastore 访问数据，而不是从本地模型访问数据。

另外，如果您想通过控制台快速将测试数据添加到 HRD，我建议使用 PyCharm，它具有运行带有自定义参数的脚本的功能。从 PyCharm 菜单中选择运行->编辑配置。创建新配置，设置以下参数：

*   **名称**：脚本的名称
*   **脚本**：指向您的 $GAE_SDK_ROOT\remote_api_shell.py
*   **脚本参数**：-s your_app_id.appspot.com
*   **工作目录**：我建议设置这个。您可能想要测试实体并成功导入类定义，最好位于应用程序的根目录中。因此，将其设置为您的应用程序的 ROOT。

现在，当您运行或调试指定配置时，PyCharm 将打开一个 python 控制台，提示您使用您的用户名和密码连接到 GAE。现在您可以使用它来处理 Google 服务器上的数据。

有关 remote_api 的更多信息，请阅读：

*   [使用 remote_api 远程访问数据存储](https://developers.google.com/appengine/articles/remote_api)
*   [Python 的远程 API](https://developers.google.com/appengine/docs/python/tools/remoteapi)

有关 Pycharm 自定义配置的更多信息，请阅读：

*   [创建和编辑运行/调试配置](http://www.jetbrains.com/pycharm/webhelp/creating-and-editing-run-debug-configurations.html)*

# android - Android ImageView 在隐藏时引发 OnClick 事件

> ID：12377136
> 
> 赞同：3
> 
> 时间：2012-09-11T20:08:47.743
> 
> 标签：android, click, imageview, show-hide, onclicklistener

我有几个关于 android 视图的问题。我是新手，所以如果我的问题看起来很荒谬，请给我正确的提示:) 所以我正在尝试制作记忆游戏。这是我的 mainLayout 代码。

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainPanel"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android.background="Color.TRANSPARENT"
    android:gravity="top"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/top_panel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="2dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Blaaaaaa1" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Blaaaaaa2" />
    </LinearLayout>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:ems="3"
        android:inputType="textPassword"
        android:text="dsdsdsd"
        android:visibility="invisible" >

        <requestFocus />
    </EditText>

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/top_panel"
        android:paddingBottom="50dp"
        android:paddingTop="5dp"
        android:weightSum="5" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_a1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_a2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_a3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_a4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_a5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_b1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_b2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_b3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_b4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_b5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_c1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_c2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_c3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_c4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_c5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_d1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_d2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_d3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_d4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_d5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_e1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_e2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_e3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_e4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/pic_e5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_launcher" />
            </LinearLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/pic9214" />

</RelativeLayout> 
```

这是mainActivity的代码。

```
public class MainActivity extends Activity {
    private OnClickListener paSharedOnClickListener = new OnClickListener();
    private ImageView paPreviewView ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        getWindow().setBackgroundDrawableResource(R.drawable.old_paper_r);

        ImageView img; 

        img = (ImageView) MainActivity.this.findViewById(R.id.imageView1) ;
        img.setVisibility(-1);
        this.paPreviewView = img;

        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_a1);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_a2);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_a3);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_a4);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_a5);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_b1);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_b2);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_b3);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_b4);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_b5);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_c1);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_c2);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_c3);
        img.setVisibility(-1);
        img = (ImageView) findViewById(R.id.pic_c4);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_c5);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_d1);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_d2);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_d3);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_d4);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_d5);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_e1);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_e2);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_e3);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_e4);
        img.setOnClickListener(paSharedOnClickListener);
        img = (ImageView) findViewById(R.id.pic_e5);
        img.setOnClickListener(paSharedOnClickListener);

    }

    private class OnClickListener implements View.OnClickListener
    {
        private boolean paIsPreviewShowed = false;

        public void onClick(View arg0) 
        {

            ImageView img  = (ImageView)arg0;

            Log.v("Click", String.format("ID %s %s", img.getId() , (ImageView) MainActivity.this.findViewById(R.id.imageView1) == img ) );

            if (!this.paIsPreviewShowed)
            {

                this.paIsPreviewShowed = true;

                Animation fadeIn = new AlphaAnimation( 0, 1);
                fadeIn.setDuration(150);

                AnimationSet animationSet = new AnimationSet(true);

                ScaleAnimation scaleAnim = new ScaleAnimation(0,1,0,1,Animation.RELATIVE_TO_SELF, (float)0.5, Animation.RELATIVE_TO_SELF, (float)0.5);
                scaleAnim.setInterpolator(new LinearInterpolator());
                scaleAnim.setRepeatCount(Animation.ZORDER_NORMAL);
                scaleAnim.setDuration(250);

                TranslateAnimation move = new TranslateAnimation(0, 0, 500,0);
                move.setDuration(250);

                animationSet.addAnimation(fadeIn);
                animationSet.addAnimation(scaleAnim);
                animationSet.setFillAfter(true);

                Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.pic9012);
                if  (paPreviewView.getParent()==null )
                {
                    RelativeLayout top_panel  = (RelativeLayout) MainActivity.this.findViewById(R.id.mainPanel);
                    top_panel.addView(paPreviewView);
                }
                paPreviewView.setImageBitmap(bMap);
                paPreviewView.startAnimation(animationSet);

            }else
            {

                Animation fadeOut = new AlphaAnimation( 1, 0);
                fadeOut.setFillAfter(true);
                fadeOut.setDuration(250);
                paPreviewView.startAnimation(fadeOut);
                this.paIsPreviewShowed = false;

                ((RelativeLayout) paPreviewView.getParent()).removeView(paPreviewView);
            }

                }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

好的，在创建 Activiti 后的第一步中，我将 OnClickListener 设置为每张卡片（pic_a1，pic_a2 ... pic_e5），并将 ImageView paPreviewView 的可见性设置为不可见（我想显示所选卡片的图像）。然后当我点击 pic_a1 时显示 paPreviewView。还行吧。我的问题是。

1）在我这个例子的早期版本中，我通过调用隐藏了 paPreviewView ImageView

```
paPreviewView.setVisibility(View.INVISIBLE); 
```

或者

```
paPreviewView.setVisibility(View.GONE); 
```

但它不能正常工作。因为仅从隐藏的 paPreviewView ImageView 调用方法 OnClickListener.onClick。所以我试图从 paPreviewView 中删除 OnClickListener 但它没有帮助。唯一可行的解​​决方案是从 / 到 mainPanel 删除（用于隐藏）并添加（用于显示）paPreviewView。

我的问题是为什么？为什么在 paPreviewView 隐藏时 paPreviewView 会引发 onClick 事件？

2）我的第二个问题是。比我为这个例子做的更好的解决方案（我的意思是纸牌游戏）？

非常感谢您的任何想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:25:27.800

在这种情况下使用的正确函数是：

```
paPreviewView.setClickable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:13:27.157

`ImageView.setVisibility()`仅更改视图的“*可见性*”，并且仍然注册了侦听器。

您可以使用：

```
paPreviewView.setEnabled(false); 
```

不接收点击事件。

# hibernate - GORM GPARS 集成测试

> ID：12377140
> 
> 赞同：2
> 
> 时间：2012-09-11T20:08:51.230
> 
> 标签：hibernate, grails, grails-orm, grails-2.0, gpars

我正在尝试集成测试 Gorm 悲观锁，并通过多线程同时模拟来自多个服务器的访问，但在每个线程中我都没有得到预期的结果。这是我的代码：

```
@Test
void testLockInBetweenCheck() {
def tid = IdocTidInfo.findByTid("AC10870D0E12504F3E88D575") //here tid is not null
withPool{
      [1,2].eachParallel{ tids ->
     IdocTidInfo.withTransaction{ tid ->
        def t = IdocTidInfo.findByTid("AC10870D0E12504F3E88D575") // here is t is null 
```

我不知道发生了什么，我认为我的 Hibernate sessionFactory 没有绑定到每个线程，并且我应该工作的 Domain.withTransaction ，但它没有。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:48:13.357

它与集成测试的设置方法有关，我在内存中引导数据。一旦我将它移到 Bootstrap，线程的闭包就可以绑定休眠会话！无论如何谢谢！！

# javascript - JavaScript .style.display？

> ID：12377141
> 
> 赞同：3
> 
> 时间：2012-09-11T20:08:54.333
> 
> 标签：javascript

我想从 HTML 元素中获取显示属性。当我编写内联 CSS 时，它可以工作，但如果我使用一个类，它就不行。

这有效：

```
<p id="p1" style="display:none;">This is some text.</p>​
<script>alert(document.getElementById("p1").style.display);</script> 
```

[http://jsfiddle.net/bwzAN/2/](http://jsfiddle.net/bwzAN/2/)

这不起作用：

```
<style>.deneme{ display: none; }​&lt;/style>
<p id="p1" class="deneme">This is some text.</p>​
<script>alert(document.getElementById("p1").style.display);</script> 
```

[http://jsfiddle.net/bwzAN/7/](http://jsfiddle.net/bwzAN/7/)

为什么？是否有可能使第二种情况的行为与第一种情况一样？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:12:53.210

试试看`getComputedStyle()`- [**DEMO**](http://jsfiddle.net/bwzAN/8/)

```
$(document).ready(function(){
    var elem = document.getElementById("p1");
    var st   = window.getComputedStyle(elem, null).getPropertyValue("display");

    alert( st );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:13:11.283

看看 getComputedStyle()/getPropertyValue()。正如您已经提到的，属性 .style.display 只会返回内联样式属性。

```
var yourDisplay = window.getComputedStyle(document.getElementById('yourID'), null).getPropertyValue('display'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:15:47.937

您需要获取“计算样式”（即“最终结果”）而不是您的设置。

我创建了一个 JSFiddle（你的非工作原件的一个分支）来帮助你：http: [//jsfiddle.net/Jamesking56/qTKYK/2/](http://jsfiddle.net/Jamesking56/qTKYK/2/)

# javascript - Grails：完成 Ajax 调用后页面不会重定向

> ID：12377142
> 
> 赞同：2
> 
> 时间：2012-09-11T20:08:54.693
> 
> 标签：javascript, ajax, grails

这是我的ajax调用：`<body onload = "${remoteFunction(controller:'accountManagement', action:'createAccount', params:[facebookUID: params.facebookUID, gender: params.gender, firstName: params.firstName, lastName: params.lastName])}">`

在我的控制器中，最后有一个重定向指令：

```
def createAccount = {

    if(user.save(flush:true) == null){
        ... 
    }
    else{
        ....

        for(int i = 0; i < categories.length; i++){
            ...
        }

        println "save to database: successful"

    }

    // Redirect to index action of person controller.
    redirect(controller:'user', action: 'authenticate');

}
` 
```

它不重定向。相反，它停留在它开始时的同一个加载页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:31:29.027

如果 AJAX 调用返回重定向，浏览器将不会重定向。如果您想在 AJAX 调用后将用户发送到新页面，您需要自己在 Javascript 中执行此操作。例子：

```
def url = createLink(controller: 'user', action: 'authenticate')
render(contentType: 'text/html', text: "<script>window.location.href='$url'</script>") 
```

确保浏览器呈现 AJAX 响应。使用 grails[`remoteFunction`](http://grails.org/doc/latest/ref/Tags/remoteFunction.html)标记，您应该指定要使用`update`属性更新的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:27:30.113

重定向 ajax 调用只会重定向该调用，而不是整个页面。要使整个页面重定向，您需要在 JavaScript 中捕获重定向的 ajax 调用并从 JavaScript 执行重定向，或者您需要让页面级操作执行重定向。

# emacs - 请问'消息返回类型是什么？

> ID：12377144
> 
> 赞同：2
> 
> 时间：2012-09-11T20:09:04.433
> 
> 标签：emacs, elisp, let

我正在关注elisp的介绍。非常第一章。这是我从 html 书中复制/粘贴的两个示例。我已经评估了这两种形式，在这里我复制/粘贴返回的值和输出作为 *Messages* 缓冲区的副作用（我不知道如何复制迷你缓冲区内容）。

**第一种形式**

```
(let ((zebra 'stripes)
      (tiger 'fierce))
  (message "One kind of animal has %s and another is %s."
           zebra tiger)) 
```

来自 *Messages* 的输出

```
One kind of animal has stripes and another is fierce.
#("One kind of animal has stripes and another is fierce." 23 30 (fontified t)) 
```

**第二种形式**

```
(let ((birch 3)
      pine
      fir
      (oak 'some))
  (message "Here are %d variables with %s, %s and %s value."
           birch pine fir oak)) 
```

*Messages* 的输出是：

```
Here are 3 variables with nil, nil and some value.
"Here are 3 variables with nil, nil and some value." 
```

***请问为什么第一个表单返回一个 lambda 值？是什么让第一种形式如此特别以至于返回的值不会是字符串？***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T20:21:22.720

`message`返回类型只是一个字符串。在`*Messages*`缓冲区中，您会看到`message`（通过评估命令显示在回显区域中的引号中）的返回值，以及在回显区域中显示的未引用字符串`message`本身。第一个结果不是 lambda，而是带有文本属性的字符串。

在 Emacs 中，字符串对象的可打印表示通常是双引号中的内容，如您的第二个示例所示。但是，附加了文本属性的字符串以更复杂的方式打印，如`#("...string contents..." start end (property value...) ...)`. 这种扩展语法是为了让 Lisp 阅读器能够在从其文本表示中读回字符串时重新创建属性。您可以通过在新缓冲区中进行评估来测试这一点`M-: (insert #("foo" 0 3 (face (:foreground "yellow"))))`- 文本将显示为黄色，因为字符串本身包含将其绘制为黄色的指令。（要看到这一点，你需要在一个新的缓冲区中，例如，`C-x b randomname RET`它不能在语法突出显示的缓冲区中工作，例如`*scratch*`，因为它们本身会为文本着色。）

因此，您打印的第一个字符串带有附加属性，可能是复制和粘贴的产物，这就是它被打印为`#("..." ...)`. 第二个字符串没有属性，可以打印为一个简单的字符串。

[Emacs Lisp 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Text-Properties.html)包含更多关于文本属性的信息。

# ruby - 如何格式化 BigDecimal 以仅显示所需数量的十进制数字？

> ID：12377159
> 
> 赞同：13
> 
> 时间：2012-09-11T20:09:40.463
> 
> 标签：ruby, ruby-on-rails-3, formatting

我有一个 BigDecimal，它有 0、1 或 2 个十进制数字（我在上面调用 round(2)）。我想在视图中显示它，使其只显示所需的十进制数字。换句话说：

```
 7.0 -> "7"
 7.5 -> "7.5"
 7.67 -> "7.67" 
```

我如何实现这一目标？到目前为止，它显示的是“7.0”而不是“7”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T20:13:25.480

对于您的观点，请查看 NumberHelper 中的方法，特别`number_with_precision`是[http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision)

特别是，您需要 strip_insignificant_zeros 选项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-11T21:55:48.063

当您拥有以下令人讨厌的魔力时，您就不需要 Ruby on Rails [`sprintf`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)：

```
[7.0, 7.5, 7.57].map{ |f| "%g" % BigDecimal.new(f,3) }
#=> ["7", "7.5", "7.57"] 
```

# apache - .htaccess 文件中未知路径第一部分的 mod_rewrite

> ID：12377162
> 
> 赞同：1
> 
> 时间：2012-09-11T20:10:00.863
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试编写重写规则以将路径段塞更改为查询参数。它用于 Web 服务，仅当主机以 api 开头时才应重写此规则。我正在尝试捕获和重写两个蛞蝓。第一个是可选的，是一个版本（即v1.2），第二个是服务域（即客户、交易等）。

[http://api.domain.com/v2.5/customers](http://api.domain.com/v2.5/customers)应该重写为 ?version=2.5&domain=customers

我还想支持默认版本，以便

[http://api.domain.com/customers](http://api.domain.com/customers)应该重写为 ?version=&domain=customers

这是我的 .htaccess 文件的样子：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^api\..*
RewriteRule ^v([\d\.]*)?\/?([^\/]*)$ ?version=$1&domain=$2 
```

上面的第一个示例运行良好，但我无法使用默认版本路径。我尝试了很多不同的东西。我认为从 ^.*v 开始会有所帮助，但没有。当您不知道起始字符时，有人知道如何使其匹配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:19:03.930

尝试：

```
RewriteCond %{HTTP_HOST} ^api\..*
RewriteCond %{QUERY_STRING} !version=
RewriteRule ^(v([\d\.]*))?\/?([^\/]*)$ /?version=$2&domain=$3 [L] 
```

这使得该`/v`部分是可选的：

*   `/v2.5/foo`->`/?version=2.5&domain=foo`
*   `/foo`->`/?version=&domain=foo`
*   `/v/foo`->`/?version=&domain=foo`

# sql - 如何根据不同表的结果集更新表中的列？

> ID：12377163
> 
> 赞同：-2
> 
> 时间：2012-09-11T20:10:04.850
> 
> 标签：sql, tsql

这与我想做的事情一致：

```
UPDATE [table1]
SET FirstName IN (SELECT [FirstName] FROM [table2]) 
```

我需要在 [table1] 上更新 300 个名称，这些名称位于 [table2] 中。名称为 NULL。它们必须是 [table2] 中的名称。

记录集可以是随机的。所以表之间不需要关系。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:25:46.553

**忽略缺少的关系、排序问题或任何可能导致数据不准确的事情**，你可以试试这个，它会为两个表中的每条记录**任意**分配一个行号，并将两个表与该数字匹配，然后根据该匹配更新名称字段：

```
WITH Source AS 
(
    SELECT 
        Name, ROW_NUMBER() OVER (ORDER BY (SELECT 1)) AS RowNum
    FROM 
        [Table2]
), 
Destination AS 
(
    SELECT 
        Name, ROW_NUMBER() OVER (ORDER BY (SELECT 1)) AS RowNum
    FROM 
        [Table1] 
)
UPDATE 
    d
SET 
    d.Name = s.Name
FROM 
    Source s
JOIN 
    Destination d 
    ON 
    s.RowNum = d.RowNum 
```

**但是：**如果没有将一个表与另一个表相关联的具体内容，您最终可能会将源表中的 300 个名称复制到目标表中的 300 行的随机集合中。

* * *

**编辑：**根据您想要随机数据的评论，如果您将`ROW_NUMBER()`列更改为：

```
ROW_NUMBER() OVER (ORDER BY (SELECT NEWID())) 
```

你会真正得到一些随机数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:18:50.833

> 我需要用 300 个名称填充 [table1]，这些名称位于 [table2] 中。

填充意味着插入，然后这个工作：

```
INSERT INTO table1
    SELECT FirstName FROM table2; 
```

这是一个例子：[http ://sqlfiddle.com/#!3/0d2f4/1/0](http://sqlfiddle.com/#!3/0d2f4/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:17:57.370

如果您只是尝试在表一中创建新记录，请执行以下操作：

```
insert into Table1 (FirstName)
select FirstName from Table2 
```

如果您需要更新记录，请执行以下操作：

```
update t1
   set FirstName = t2.FirstName,
       LastName  = t2.LastName
  from Table1 t1
  join Table2 t2 on t1.ID = t2.ID   -- (or whatever key you are using to join the two tables) 
```

# padding - 元素 (UL) 溢出父 (DIV)

> ID：12377164
> 
> 赞同：0
> 
> 时间：2012-09-11T20:10:05.910
> 
> 标签：padding

我一直在努力寻找答案，我不知道我是否只是不擅长搜索还是什么，但我似乎无法找到解决方案。

基本上我有一个名为“菜单”（#menu）的 DIV，它是一个横跨浏览器屏幕顶部的蓝色条，在其中我设置了一个无序列表（用于创建按钮）和内部的锚点（超链接）列表有填充（为了文本间隔很好），因此创建一个漂亮的按钮，但是，当我这样做时，超链接会导致该行流过菜单 div，使它看起来很乱，下面是我的代码，有没有办法防止这种情况？

HTML：

```
<div id="menu">
<ul>
<li><a href="#">test</a></li>
</ul>
</div> 
```

CSS：

```
* { font-family: Helvetica; }
body { margin: 0; background: #fff; }
#menu { overflow: inline-block; width: 100%; background: #0b9be5; text-align: center; }
#menu ul { background: #075f8d;  poistion: absolute; margin: 0px; list-style-type: none; }
#menu li { display: inline; }
#menu a { padding: 1%;  border: 1px solid black; font-weight: bold; color: black;     text-decoration: none; }
#menu a:hover { background-color: #0b9be5; } 
```

先感谢您！

亲切的问候

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:35:11.163

我为你做了一个全新的代码！

我建议您查看此网站[http://css.maxdesign.com.au/listamatic/](http://css.maxdesign.com.au/listamatic/)以获取更多选项。

CSS是这样的

```
.menu-menu-container{
    position: absolute;
}
ul{
    list-style: none;
}
li{
    border:#996600 1px solid;
    float: left;
    margin-left: 14px;
}
li a{
    color:#000;
    text-decoration:none;
    background: #00F;
    display: block;
    padding:20px;
}
a:hover{
    background:#33FFFF;
} 
```

HTML可能是这样的

```
<div class="menu-menu-container">
    <ul id="menu-menu-1" class="menu">
        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-143"><a href="http://origenes.co">HOME</a></li>
        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-142"><a href="http://origenes.co/corporativo/">Corporativo</a></li>
    </ul>
</div> 
```

# java - java持久化本机sql不接受参数

> ID：12377165
> 
> 赞同：16
> 
> 时间：2012-09-11T20:10:09.140
> 
> 标签：java, sql, oracle, persistence

我的查询是

```
sql = "SELECT SUM(TOTAL_BYTES_DELIVERED) / SUM(TOTAL_TIME_TAKEN_IN_DELIVERY) 
         FROM MV_MFT_TRANSFER 
        WHERE TRANSFER_INITIATION_TIME > :startDate 
          AND TRANSFER_INITIATION_TIME < :endDate"

Query query = em.createNativeQuery(sql);
query.setParameter("startDate", startDate, TemporalType.DATE);
query.setParameter("endDate", endDate, TemporalType.DATE);
query.getResultList();' 
```

当我运行这个时，我得到一个错误

```
SQLExceptionTHrown: 
<Sep 11, 2012 12:50:46 PM PDT> <Warning> <EclipseLink> <BEA-2005000> <2012-09-11 12:50:46.893--UnitOfWork(1387841584)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20120804-d768c4f): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Missing IN or OUT parameter at index:: 1
Error Code: 17041
Call: SELECT SUM(TOTAL_BYTES_DELIVERED) / SUM(TOTAL_TIME_TAKEN_IN_DELIVERY) FROM MV_MFT_TRANSFER WHERE TRANSFER_INITIATION_TIME > :startDate AND TRANSFER_INITIATION_TIME < :endDate
Query: DataReadQuery(sql="SELECT SUM(TOTAL_BYTES_DELIVERED) / SUM(TOTAL_TIME_TAKEN_IN_DELIVERY) FROM MV_MFT_TRANSFER WHERE TRANSFER_INITIATION_TIME > :startDate AND TRANSFER_INITIATION_TIME < :endDate")> 
***SQLException in init() TRANSFER METRICS BEAN****
Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20120804-d768c4f): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Missing IN or OUT parameter at index:: 1 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T20:33:24.393

以下解决方案应该有效：

```
sql = "SELECT SUM(TOTAL_BYTES_DELIVERED) / SUM(TOTAL_TIME_TAKEN_IN_DELIVERY) 
         FROM MV_MFT_TRANSFER 
        WHERE TRANSFER_INITIATION_TIME > ?
          AND TRANSFER_INITIATION_TIME < ?"

Query query = em.createNativeQuery(sql);
query.setParameter(1, startDate, TemporalType.DATE);
query.setParameter(2, endDate, TemporalType.DATE);
query.getResultList(); 
```

似乎如果您使用位置参数，它将起作用。您不能将命名参数和本机查询结合起来。以下是一些链接：

[http://java.boot.by/scbcd5-guide/ch08s05.html](http://java.boot.by/scbcd5-guide/ch08s05.html)

[http://www.wisegeek.com/what-are-native-queries.htm](http://www.wisegeek.com/what-are-native-queries.htm)

还有更多，只需 google 即可：“只有位置参数绑定可移植地用于本机查询”。

编辑：更多类似问题的链接：

[如何从 JDBC 查询中获取所有元素](https://stackoverflow.com/questions/3815925/how-to-get-all-the-element-from-jdbc-query)

[JPA/Hibernate 本机查询无法识别参数](https://stackoverflow.com/questions/3144235/jpa-hibernate-native-queries-do-not-recognize-parameters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T20:47:58.813

这篇文章真的很有帮助！

[http://software-security.sans.org/developer-how-to/fix-sql-injection-in-java-persistence-api-jpa](http://software-security.sans.org/developer-how-to/fix-sql-injection-in-java-persistence-api-jpa)

文章的要点是：

这些是**不安全**的查询，不要使用它！字符串连接不好：

```
List results = entityManager.createQuery("Select order from Orders order where order.id = " + orderId).getResultList();
List results = entityManager.createNativeQuery("Select * from Books where author = " + author).getResultList();
int resultCode = entityManager.createNativeQuery("Delete from Cart where itemId = " + itemId).executeUpdate(); 
```

这些是**安全**的查询。

```
/* positional parameter in JPQL */
Query jpqlQuery = entityManager.createQuery("Select order from Orders order where order.id = ?1");
List results = jpqlQuery.setParameter(1, "123-ADB-567-QTWYTFDL").getResultList();

/* named parameter in JPQL */
Query jpqlQuery = entityManager.createQuery("Select emp from Employees emp where emp.incentive > :incentive");
List results = jpqlQuery.setParameter("incentive", new Long(10000)).getResultList();

/* named query in JPQL - Query named "myCart" being "Select c from Cart c where c.itemId = :itemId" */
Query jpqlQuery = entityManager.createNamedQuery("myCart");
List results = jpqlQuery.setParameter("itemId", "item-id-0001").getResultList();

/* Native SQL */
Query sqlQuery = entityManager.createNativeQuery("Select * from Books where author = ?", Book.class);
List results = sqlQuery.setParameter(1, "Charles Dickens").getResultList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T10:59:33.003

在 JPA 中

当你使用这个：

查询查询 = em。**createNativeQuery** (sql);

您必须为设置参数设置索引。请注意，您的查询有多个参数。

# rally - 更改 Rally AttributeComboBox 中的显示文本 (SDK 2.0p)

> ID：12377176
> 
> 赞同：0
> 
> 时间：2012-09-11T20:10:51.113
> 
> 标签：rally

我在为 Rally 上的 AttributeComboBox 设置显示文本时遇到问题（SDK 2.0p，而不是较新的版本）。目前，AttributeComboBox 会为当前项目中的每个所有者生成 URL 地址列表，但不会生成每个所有者的名称。我认为将 displayField 设置为 'Owner.Name' 或类似的东西会起作用，但它没有。这是我的以下代码（Javascript）：

`this.down('#ownerFilter').add({
xtype: 'rallyattributecombobox',
cls: 'filter',
model: 'UserStory',
field: 'Owner',
displayField: 'Owner',
valueField: 'Owner',
allowBlank: false,
listeners: {
ready: this._onOwnerComboBoxLoad,
select: this._onOwnerComboBoxSelect,
scope: this
}
});`

（注：示例代码已更改。属性已从“迭代”更改为“所有者”。）

不是让我的 AttributeComboBox 生成一个 URL 地址列表（它们确实对应于当前项目中的所有者），而是如何让所有者的名称出现？

我觉得答案非常简单，但我一直无法弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:22:15.413

如果您可以格式化代码以提高可读性，那就太好了。无论如何，您已经在模型“UserStory”上指定了“迭代”字段。我相信 displayField 可以设置为“名称”，因为它已经在“迭代”上运行。

# asp.net-mvc - Sharp Architecture - 未找到入口点

> ID：12377177
> 
> 赞同：1
> 
> 时间：2012-09-11T20:10:52.227
> 
> 标签：asp.net-mvc, sharp-architecture

1.  安装新的 Sharp Architecture 应用程序
2.  运行**YourApp.Web.Mvc**
3.  请参阅以下错误：

> 未找到入口点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:49:57.233

或者更好的是升级到 MVC4。这里的分步说明[http://anyrest.wordpress.com/2012/12/12/upgrading-sarp-to-mvc4/](http://anyrest.wordpress.com/2012/12/12/upgrading-sarp-to-mvc4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:10:52.227

**问题：**

默认情况下引用的是**MVC4** DLL，而不是**MVC3**

**解决方案：**

1.  **从MyApp.Web.Mvc 中**删除`System.Web.Mvc`引用
***   添加对`System.Web.Mvc`运行时版本**3.0.0的引用****

# jasper-reports - 列脚和摘要带的问题

> ID：12377178
> 
> 赞同：6
> 
> 时间：2012-09-11T20:10:52.667
> 
> 标签：jasper-reports

我正在使用*JasperReports*创建发票。

我有一个*详细信息*部分，其中包含所有项目的列表，后跟一个包含总计、税收等的列页脚，然后是*摘要*部分中的退货政策。

我想始终确保*Detail*后跟*Column 页脚*，然后是*Summary*带。我们如何确保这一点？我发现有时*Summary*出现在*Column footer*之前。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:36:55.573

目前确实没有太多的解决方案，因为它似乎是设计而不是错误（我个人认为他们应该对此有一个选择）。不过，您目前的选择是：

*   创建一个报告组（这本质上是一个虚拟报告组，并不重要）。将您的`Column Footer`内容移动到 `Group Footer`乐队中，并将您的摘要留在`Summary`乐队中。这似乎在我有限的测试中有效，我会先尝试一下。
*   在主报表属性下设置`Float Column Footer`和为真。`Summary on new Page`这有一个不幸的副作用，即无论所有内容是否都可以放在一个页面上，摘要都将始终打印在第二页上。
*   设置`Float Column Footer`为 true 并将您的`Summary`部分移动到`Last Page Footer`乐队。这意味着它只会打印一次，但内容将朝向最后一页的底部。

**编辑：**为了阐明这部分问题。这是设计使然。Column Footer 本质上被视为/视为专门的页面页脚。因此，正文内容（详细信息带、摘要带等）始终放置在其上方的页面上。它似乎没有发生的唯一一次是在打印最后一个列页脚之后，在新页面上打印摘要时。所以这是设计使然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T09:30:28.347

几个小时以来，我一直在寻找这个愚蠢的格式问题的答案，我想我可能已经找到了一个*可用*的解决方案：

*   将您的 Column Footer 内容移动到 Page Footer 并且，
*   创建一个最后一页页脚，但将其宽度设置为 1 像素，其中没有内容

这使我可以在每列的底部有一些边框/小计，同时忽略最后一页上的页脚前摘要/总前小计问题，因为最后一页页脚会*覆盖*页脚（摘要）内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T07:40:12.260

添加最后一页页脚，在增加带宽之后添加列页脚的内容并将摘要内容添加到该页脚（最后一页页脚）并从摘要带中删除内容。

# android - 使用 html 的 ios 和 android 谷歌地图中当前位置的通用链接

> ID：12377179
> 
> 赞同：0
> 
> 时间：2012-09-11T20:10:51.993
> 
> 标签：android, html, ios, mobile, currentlocation

我似乎无法在任何地方找到一个共同的答案。似乎没有办法同时支持 Android 和 iPhone 以在其本地地图应用程序中打开具有当前位置集的链接。

据我所知，iPhone 是这样的：

```
saddr=Current%20Location 
```

和 android 你可以把“saddr”留空。我什至还没有想到黑莓。我想可能有一种方法可以用 JavaScript 做到这一点，但它认为它不应该那么复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:38:42.570

现在我正在做的是使用 html5 地理定位来获取纬度和经度，而不是依靠操作系统来解释当前位置。

HTML：

```
 <a id="directions" class="callout" href="http://maps.google.com/maps?daddr=address"> 
```

JavaScript：

```
$('#directions').bind('click', function (e) {
    var href = $(this).attr('href');
    if (navigator.geolocation) {
        e.preventDefault();
        navigator.geolocation.getCurrentPosition(function (position) {
            geoLink(position.coords.latitude, position.coords.longitude, href);
        });
    }

    function geoLink(lat, log, href) {
        var location = href + '&saddr=' + lat + ',' + log;
        window.location.href = location;
    } 
```

# java - 从 MS Exchange 检索附件的最佳方式

> ID：12377184
> 
> 赞同：3
> 
> 时间：2012-09-11T20:11:05.663
> 
> 标签：java, jakarta-mail, exchange-server, mapi

我们曾尝试使用 JavaMail API 一段时间，但偶尔会收到`ArrayIndexOutOfBounds`此错误报告记录的错误：http: [//kenai.com/bugzilla/show_bug.cgi ?id=3155](http://kenai.com/bugzilla/show_bug.cgi?id=3155)

它被标记为已修复，但实际上我们仍然存在该错误。此外，使用 JavaMail 检索附件的性能一直很慢。即使在与 Exchange 相同的网络上，速度也约为 10 KB/s，因此我们决定尝试不同的方法。

我们发现使用名为 MoonRug 的 Mapi 客户端可以显着提高性能：[http ://www.moonrug.com/features.html](http://www.moonrug.com/features.html)

这比 JavaMail 工作得好得多，但我们仍然时不时地连接到 Exchange 和下载附件（大小从 3KB 到 20MB 不等）。

我开始质疑让 Java 直接调用 Exchange 是否是我们应该采取的正确方法。有没有人推荐一个更好的方法来做到这一点？我们主要是一家 java 商店，但如果有不同的工具或技术可以从 Exchange 获取电子邮件并将它们放在文件系统中的某个位置，以便 java 进程读取和处理，这对我们来说是一个选择。

此应用程序的目标是接收特定收件箱中的传入邮件并将它们和附件保存到用户可以与之交互的后端系统。我们目前执行拉取过程，我们每分钟轮询收件箱。如果有某种方法可以通过将某些内容直接集成到 Exchange Server 中以接收电子邮件并自动将它们导出到文件系统中，这对我们来说也是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:04:40.510

你可能想看看[DavMail](http://davmail.sourceforge.net/index.html)。它基于 Java，并且可以访问 Exchange。它可能会或可能不会为您提供可以使用的代码。否则，它可能允许您将其用作基于 JavaMail 的应用程序和 Exchange 之间的网关。

# appfabric - 创建高可用性 AppFabric 缓存集群

> ID：12377194
> 
> 赞同：5
> 
> 时间：2012-09-11T20:12:05.630
> 
> 标签：appfabric, appfabric-cache

`Secondaries=1`除了在集群配置中设置以启用 HighAvailability之外，还有什么其他的，特别是在缓存客户端配置上？

我们的配置：

*   [缓存集群](http://pastebin.com/qQenFa7s)（使用 SQL 配置提供程序的 3 个 Windows 企业主机）：
*   [缓存客户端](http://pastebin.com/b4D0BqnZ)

通过 about 配置，我们看到在三台主机上创建了主要和次要区域，但是当其中一台主机停止时，会发生以下异常：

*   `ErrorCode<ERRCA0018>:SubStatus<ES0001>:The request timed out.`
*   `An existing connection was forcibly closed by the remote host`
*   `No connection could be made because the target machine actively refused it 192.22.0.34:22233`
*   `An existing connection was forcibly closed by the remote host`

高可用性的重点不是能够在不中断服务的情况下处理主机宕机吗？我们正在使用命名区域 - 这会破坏高可用性吗？我在某处读到命名区域只能存在于一个主机上（我确实验证了另一个主机上确实存在辅助节点）。我觉得我们缺少一些缓存客户端配置可以启用高可用性，对此问题的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:12:17.493

高可用性是关于保护数据，而不是每秒都可用（因此会出现重试异常）。当缓存主机出现故障时，您会收到异常并且应该重试。在此期间，访问 HA 缓存可能会在它忙于四处移动和创建额外副本时向您抛出重试异常。区域使这更加复杂，因为它导致在再次成为 HA 之前必须复制更大的块。

此外，客户端保持与所有缓存主机的连接，因此当一个主机出现故障时，它会抛出异常发生的事情。

基本上，当一台主机出现故障时，Appfabric 会崩溃，直到 HA 缓存中再次存在所有数据的两个副本。我们在它前面创建了一个小层来处理这个逻辑，并一次删除一个服务器，以确保它处理所有场景，这样我们的应用程序就可以继续工作，但速度有点慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:06:10.480

在与 Microsoft 开票后，我们将其范围缩小到拥有一个静态`DataCacheFactory`对象。

```
public class AppFabricCacheProvider : ICacheProvider
{
    private static readonly object Locker = new object();
    private static AppFabricCacheProvider _instance;
    private static DataCache _cache;

    private AppFabricCacheProvider()
    {
    }

    public static AppFabricCacheProvider GetInstance()
    {
        lock (Locker)
        {
            if (_instance == null)
            {
                _instance = new AppFabricCacheProvider();
                var factory = new DataCacheFactory();
                _cache = factory.GetCache("AdMatter");
            }
        }
        return _instance;
    }
    ...
} 
```

查看`tracelog`来自 AppFabric 的 s，客户端仍在尝试连接到所有主机，而不处理主机宕机。在客户端上重置 IIS 会强制`DataCacheFactory`创建一个新的（在我们的`App_Start`）并停止异常。

MS 工程师一致认为这种方法是最佳实践方式（我们还发现了几篇关于此的文章：请参阅[链接](https://stackoverflow.com/questions/3784299/appfabric-caching-proper-use-of-datacachefactory-and-datacache)和[链接](http://msdn.microsoft.com/en-us/library/ff637738.aspx)）

他们正在继续为我们研究解决方案。同时，我们提出了以下临时解决方法，`DataCacheFactory`在遇到上述异常之一的情况下，我们强制创建一个新对象。

```
public class AppFabricCacheProvider : ICacheProvider
{
    private const int RefreshWindowMinutes = -5;

    private static readonly object Locker = new object();
    private static AppFabricCacheProvider _instance;
    private static DataCache _cache;
    private static DateTime _lastRefreshDate;

    private AppFabricCacheProvider()
    {
    }

    public static AppFabricCacheProvider GetInstance()
    {
        lock (Locker)
        {
            if (_instance == null)
            {
                _instance = new AppFabricCacheProvider();
                var factory = new DataCacheFactory();
                _cache = factory.GetCache("AdMatter");
                _lastRefreshDate = DateTime.UtcNow;
            }
        }
        return _instance;
    }

    private static void ForceRefresh()
    {
        lock (Locker)
        {
            if (_instance != null && DateTime.UtcNow.AddMinutes(RefreshWindowMinutes) > _lastRefreshDate)
            {
                var factory = new DataCacheFactory();
                _cache = factory.GetCache("AdMatter");
                _lastRefreshDate = DateTime.UtcNow;
            }
        }
    }

    ...

    public T Put<T>(string key, T value)
    {
        try
        {
            _cache.Put(key, value);
        }
        catch (SocketException)
        {
            ForceRefresh();
            _cache.Put(key, value);
        }
        return value;
    } 
```

当我们了解更多信息时将更新此线程。

# windows - Windows fopen 和 N 标志

> ID：12377197
> 
> 赞同：1
> 
> 时间：2012-09-11T20:12:17.203
> 
> 标签：windows, fopen

我正在阅读一些`fopen`用于打开文件进行写入的代码。代码需要能够不时关闭和重命名这些文件（它是一个旋转文件记录器）。作者说，要发生这种情况，子进程不能继承这些`FILE`句柄。（在 Windows 上是这样；在 Unix 上没问题。）因此作者编写了一个特殊的子例程，将句柄复制为不可继承并关闭原始句柄：

```
if (!(log->file = fopen(log->path, mode)))
    return ERROR;
#ifdef _WIN32
sf = _fileno(log->file);
sh = (HANDLE)_get_osfhandle(sf);
if (!DuplicateHandle(GetCurrentProcess(), sh, GetCurrentProcess(),
        &th, 0, FALSE, DUPLICATE_SAME_ACCESS)) {
    fclose(log->file);
    return ERROR;
}
fclose(log->file);
flags = (*mode == 'a') ? _O_APPEND : 0;
tf = _open_osfhandle((intptr_t)th, _O_TEXT | flags);
if (!(log->file = _fdopen(tf, "at"))) {
    _close(tf);
    return ERROR;
}
#endif 
```

现在，我还在阅读[MSDN 文档`fopen`](http://msdn.microsoft.com/en-us/library/e868993f-738c-4920-b5e4-d8f2f41f933d%28v=vs.90%29)，发现他们的版本`fopen`有一个 Microsoft 特定的标志，似乎也是如此：`N`标志：

> N：指定文件不被子进程继承。

问题：我是否正确理解我可以摆脱上面的那部分并用参数`N`中的附加值替换它（在 Windows 上） `mode`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:39:12.057

是的你可以。

`fopen("myfile", "rbN")`创建一个不可继承的文件句柄。

Linux 文档中的任何地方都没有提到该`N`标志`fopen`，因此该解决方案很可能是不可移植的，但对于 MS VC，它可以正常工作。

# javascript - CodeKit 停止“监视”文件夹中的文件更改，为什么？

> ID：12377199
> 
> 赞同：6
> 
> 时间：2012-09-11T20:12:27.640
> 
> 标签：javascript, web-applications, sass

我喜欢 CodeKit，但由于某种原因，它停止“监视”我放置在其中的文件夹中文件的更改。我仔细检查了项目配置以确保输出路径正确，但是当我对正在监视的任何文件进行更改时，CodeKit 什么都不做——没有缩小、语法检查、将 .scss 文件编译为 .css。

正如开发人员建议“刷新” CodeKit 一样，我在按住 shift 的同时启动了该应用程序，并且确定 CodeKit 打开时没有任何项目。所以我重新添加了项目，但它仍然没有在看文件。有人用 CodeKit 遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-10T20:25:22.683

我之前遇到过类似的问题，这是因为在 codekit 项目中我包含了 images 文件夹，并且生成了大量的 .png 图像。每次运行 codekit 时，它都会挂起处理试图压缩它们的 png。

尝试将您的 images 文件夹放在您的 codekit 项目目录之外，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T00:24:47.913

I've been having the same problem lately (Version 2.1.9). I haven't managed to figure out the root cause as yet, but I have figured out a way to solve this issue every time it occurs.

Rename your parent folder that contains all of your CodeKit projects. E.g. my HTDocs equivalent folder is called "Sites". In Terminal do this:

```
mv sites sites_temp
mv sites_temp sites 
```

The first line will rename your sites folder to sites_temp, and then the second line will do the opposite.

For some reason this works every time for me.

I've written a short blog post on this matter here, but to be honest the above is my go-to solution whenever this problem occurs: [http://www.joetannorella.com/codekit-mac-auto-compiling-compass-upon-file-change/](http://www.joetannorella.com/codekit-mac-auto-compiling-compass-upon-file-change/)

# python - 我应该启用 Cloud SQL 吗？

> ID：12377200
> 
> 赞同：0
> 
> 时间：2012-09-11T20:12:40.620
> 
> 标签：python, google-app-engine, google-cloud-sql

我已经开始开发一个 appengine 网站，并意识到我将需要对我的数据库进行大量随机查询，这对于数据存储或 ndb 来说是一件很尴尬的事情。这是我的“随机”查询的示例代码：

```
q = UserList.query(ancestor = listakey)
if los.rand_num < self.rand_num:
    q2 = q.filter(UserList.rand_num > self.rand_num)

elif los.rand_num > self.rand_num:
    q2 = q.filter(UserList.rand_num > los.rand_num)

users = q2.fetch(1)
while len(users) == 0:
        users = q.fetch(1)
        self.rand_num = random.random()
        self.put() 
```

其中 .rand_num 是分配给获胜者和失败者实体的随机浮点数，以确保这不会再次出现在下一个查询中。这个随机数每隔一些查询就会更新一次，尽管结果非常随机，但这似乎浪费了太多资源，因为平均延迟约为 500 毫秒。另一方面，我相信在 SQL 数据库中这会更有效率

我的问题是，是否有人对如何改进我的代码或我应该获得 Cloud SQL 有什么建议？

# c# - String.Compare 答案随着字符添加到字符串末尾而发生变化

> ID：12377202
> 
> 赞同：2
> 
> 时间：2012-09-11T20:12:48.443
> 
> 标签：c#, .net, string

我有一个简单的应用程序，它尝试使用 String.Compare 比较 2 个字符串。我遇到了一种情况，当我向每个字符串添加更多值时，答案会发生变化。

取这两个字符串：

```
---a
--1S 
```

当比较字符串中越来越多的值时，String.Compare 显示以下结果：

```
String.Compare
   -:   -   0
  --:  --   0
 ---: --1  -1
---a:--1S   1 
```

为什么它会改变答案？一旦到达第三个位置，它应该保持 -1，无论添加到字符串中的附加值如何。

另一方面，`String.CompareOrdinal`同意这一点，并且对于所有字符串长度都保持 < 0。

这是一个演示这些结果的示例程序。

```
using System;

namespace TestFileMerge
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            const string value1 = "---a";
            const string value2 = "--1S";
            Console.WriteLine("String.Compare");
            for (int i = 1; i <= value1.Length; i++)
            {
                Console.WriteLine(
                    @"{0}:{1} {2}", 
                    value1.Substring(0, i).PadLeft(value2.Length), 
                    value2.Substring(0, i).PadLeft(value2.Length), 
                    String.Compare(
                        value1.Substring(0, i), 
                        value2.Substring(0, i),
                        false
                    ).ToString().PadLeft(3));
            }
            Console.WriteLine("String.Compare -- ignore case");
            for (int i = 1; i <= value1.Length; i++)
            {
                Console.WriteLine(
                    @"{0}:{1} {2}", 
                    value1.Substring(0, i).PadLeft(value2.Length), 
                    value2.Substring(0, i).PadLeft(value2.Length), 
                    String.Compare(
                        value1.Substring(0, i), 
                        value2.Substring(0, i),
                        true
                    ).ToString().PadLeft(3));
            }
            Console.WriteLine("String.CompareOrdinal");
            for (int i = 1; i <= value1.Length; i++)
            {
                Console.WriteLine
                    (@"{0}:{1} {2}", 
                    value1.Substring(0, i).PadLeft(value2.Length), 
                    value2.Substring(0, i).PadLeft(value2.Length), 
                    String.CompareOrdinal(
                        value1.Substring(0, i), 
                        value2.Substring(0, i)
                    ).ToString().PadLeft(3));
            }
        }
    }
} 
```

这会产生以下输出：

```
String.Compare
   -:   -   0
  --:  --   0
 ---: --1  -1
---a:--1S   1
String.Compare -- ignore case
   -:   -   0
  --:  --   0
 ---: --1  -1
---a:--1S   1
String.CompareOrdinal
   -:   -   0
  --:  --   0
 ---: --1  -4
---a:--1S  -4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:18:29.197

如果您没有传递`CultureInfo`，则比较`String.Compare`将基于当前线程文化，它可能具有与您预期不同的比较规则。`String.CompareOrdinal`只比较代码点，不考虑文化。

换句话说，尝试[将此重载](http://msdn.microsoft.com/en-us/library/hyxc48dt.aspx)与`CultureInfo.InvariantCulture`.

这就是不同比较的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:13:47.893

我认为这是一种奇怪的行为。考虑以下

```
static void Test()
{
        Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;
        const string a = "-";
        const string b = "1";

        Console.WriteLine(String.Compare(a, b));                  // -1
        Console.WriteLine(String.Compare(a + "x", b + "x"));      // +1
} 
```

为什么**在右边**用相同的常数连接会`"x"`颠倒字符串的顺序？如您所见，这是在不变的文化中。

根据不变的区域性和`String.Compare(String, String)`重载，以下字符串列表按升序排序：

```
""
"-"
"--"
"1"
"1-"
"-1"
"11"
"1x"
"1y"
"x"
"x-"
"-x"
"x1"
"xx"
"xy"
"y"
"y-"
"-y"
"y1"
"yx"
"yy" 
```

我找不到对传递性的违反。但是，如果您阅读上面最左边的“列”字符，发现减号出现得太晚，这似乎确实很奇怪。

**补充：**对于那些坚持使用详细重载的人来说，第一个例子：

```
String.Compare("-", "1", CultureInfo.InvariantCulture, CompareOptions.IgnoreCase);   // -1
String.Compare("-x", "1x", CultureInfo.InvariantCulture, CompareOptions.IgnoreCase); // +1 
```

（也适用于例如`CompareOptions.None`。）请参阅此线程标题的命题。附加到字符串会颠倒它们的顺序。为什么？

**新增：**似乎没有指定序数比较 or `CompareOptions.StringSort`，算法是：首先`-`从两个字符串中删除所有连字符（ ）。如果之后一个大于另一个，则返回该答案。（否则，请再次考虑连字符...）使用`"---"`and `"--1"`，删除连字符以获得`""`and `"1"`。它们仍然不同，第一个是最少的。返回减一。但是，使用`"---a"`and `"--1S"`，调用比较`"a"`and `"1S"`，现在第一个是最大的，它返回加一。

顺便说一句，这个问题非常相似：[string.Compare behavior](https://stackoverflow.com/questions/1873701/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:49:52.590

为了获得`String.Compare`按我预期处理非字母数字值的方法，我需要提供`CultureInfo`以及一个`ComparOptions` `Enum`值。

如下重写问题示例中的第一个方法会产生所需的结果：

```
String.Compare(
    value1.Substring(0, i), 
    value2.Substring(0, i),
    CultureInfo.CurrentCulture,
    CompareOptions.StringSort
} 
```

“`CompareOptions.StringSort`表示字符串比较必须使用字符串排序算法。在字符串排序中，连字符和撇号以及其他非字母数字符号位于字母数字字符之前。”

感谢所有为我指明`CultureInfo`通往此道路的人`Enum`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T20:17:18.810

只是为了澄清你知道答案是正确的，对吧？

如果不比较，它将小于或大于 0，如果比较，则为 0

# php - 调用多个私有函数的PHP公共函数

> ID：12377204
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:12:52.607
> 
> 标签：php

我正在尝试将我的接口和实现分开。所以我有一堆功能可以执行各种任务。我最初将它们全部设为公开，然后我会从其他页面调用它们。我试图通过将所有真正的工作负载函数设为私有然后使用 1 个公共函数来调用它们来加强这一点。

这是我正在尝试的：

```
class TestClass
{

    public function pub1()
    {

       $this->test1();
       $this->test2();
       $this->test3();

    }

    private function test1()
        {

         $t1 = '1'; 

         return $t1

         }

    private function test2()
        {

         $t2 = '2'; 

         return $t2

         }

    private function test3()
        {

         $t3 = '3'; 

         return $t3

         }
} 
```

我认为这可行，但我不知道如何调用这些函数。我可以很好地调用 pub1()，但我似乎无法调用 test1()、test2()、test3() 下面的函数。

如果我为公共到私人功能之一做一个，我可以完成这项工作，但我希望不必这样做。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:18:05.387

您对 pub1() 的调用应该正确调用 test1()、test2() 和 test3()，就像您编写的那样。但是，您的测试函数返回一个值，然后您的 pub1() 函数将其丢弃。如果您实际上不需要将这些测试函数中的任何内容返回给调用者，那么您应该可以按原样进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:16:37.423

你应该重新考虑你的设计。

对象与现实世界有很强的关系。把对象看成一个黑盒子，在外面看看你需要什么属性和方法。

所以：

*   如果您想在类之外调用函数，请使用 public。
*   如果要在类或派生类中调用函数，请使用 protected。
*   如果您只想在类中调用函数，请使用 private。

如果您有接口，请定义它！并让一个类实现它。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-11T20:16:26.353

也许是这样的？

```
public function pub1 ($name) {
    return $this->$name();
} 
```

# c# - ASP.NET C# Entity Framework - 如何正确更新外键？- 第2部分

> ID：12377206
> 
> 赞同：0
> 
> 时间：2012-09-11T20:13:01.743
> 
> 标签：c#, asp.net, entity-framework-4

这个问题就像我[之前的第 2 部分一样！](https://stackoverflow.com/questions/12373899/asp-net-c-sharp-entity-framework-how-to-update-foreign-key-properly)

以下是我学到并希望是真的事情：

1.  不要将数据实体上下文用作静态
2.  使用后处理数据上下文 - 通常在一次之后 -
3.  将参数传递给 UPDATING Entity 方法而不是 Entity（我将解释它，在这里我的十字路口在于）

这是我修改后的代码：

```
public class ManagerBase
    {
        private NoxonEntities _entities = null;

        public NoxonEntities Entities
        {
            get
            {
                if (_entities == null)
                    _entities = new NoxonEntities();

                return _entities;
            }
        }
    }

//Managers uses ManagerBase class as a Base class
MemberManager currentMemberManager = new MemberManager();
currentMemberManager.Save(memberId, username, password, languageId);

//MemberManager class
public Member Save(long memId, string username, string password, int langId)
        {
            using (var Context =   base.Entities)
            {
                var Data = Context.Member.First(c => c.Id == memId);

                Data.Username = username;
                Data.Password = password;
                Data.Language = Context.Language.First(c => c.Id == langId); //Gets the foreign entity

                Context.SaveChanges();

                return Data;
            }
        } 
```

这毫无例外地有效。但通常这个**SAVE**方法是由**接口**实现的方法。所以，我宁愿将一个**OBJECT**值传递给 SAVE 方法，而不是像上面那样**传递所有字段。**例如我想用这个：

```
//Member is an EntityFramework Object which was created during EF Model when I added by visual studio
//Filter is the method that returns an EntityFramework Object from EF (and eventually database) with given some arguments
//SomeArguments could be  MemberId = 2
Member modifiedMember = currentMemberManager.Filter(someArguments);
modifiedMember.UserName = "newvalue";
currentMemberManager.Save(modifiedMember); 
```

在 SAVE 方法中，也许我可以这样使用：

```
public Member Save(Member modifiedMember)
            {
                using (var Context =   base.Entities)
                {
                    var Data = Context.Member.First(c => c.Id == modifiedMember.Id);

                    Data.Username = modifiedMember.Username;
                    Data.Password = modifiedMember.Password;
                    Data.Language = Context.Language.First(c => c.Id == modifiedMember.LanguageId); //Gets the foreign entity

                    Context.SaveChanges();

                    return Data;
                }
            } 
```

如果我要像上面那样使用它，我认为我不应该使用传递对象 EF Object，而是应该使用我将编写的一些其他类来将参数映射到 EF 成员实体。

**第一个问题：这是一个好方法吗？**

```
public class MyMember
{
    public long Id { set; get; }
    public string Username { set; get; }
    public string Password { set; get; }
    public int LanguageId { set; get; }
}

MyMember.Username = "NewValue";
MyMember.LanguageId = 4; //4 as in new value
currentMemberManager.Save(MyMember); //As you can see MyMember is not an EF Entity in here 
```

但这需要很长时间，因为已经有一些书面代码。

**第二个问题：我不能在*OUTSIDE使用 EF Entity 对象并在**那里*修改它以将其保存在*MemberManager*类中吗？**

 *再次，非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:47:23.437

这是答案：

[如何更新实体？](https://stackoverflow.com/questions/12389704/how-to-update-entity)

我感谢那些帮助过我的人。*

# google-app-engine - javax.servlet.ServletContext 日志：调度传入 RPC 调用时出现异常

> ID：12377211
> 
> 赞同：2
> 
> 时间：2012-09-11T20:13:13.570
> 
> 标签：google-app-engine, gwt

谁能告诉我如何使用 localhost 运行的 Google SQL Cloud 在 GAE 中解决此错误没有问题，但是当我部署到 GAE 时，它会显示此错误

> javax.servlet.ServletContext 日志：分派传入 RPC 调用时出现异常 com.google.gwt.user.client.rpc.SerializationException：类型“org.hibernate.exception.SQLGrammarException”未包含在可以通过序列化的类型集中无法加载此 SerializationPolicy 或其 Class 对象。出于安全考虑，此类型不会被序列化。: instance = org.hibernate.exception.SQLGrammarException: could not execute query at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619 ) 在 com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.

Hibernate Util 的这段代码

```
package com.ies.ieschool.util;

import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
try {
// Create the SessionFactory from hibernate.cfg.xml
sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
} catch (Throwable ex) {
// Make sure you log the exception, as it might be swallowed
System.err.println("Initial SessionFactory creation failed." + ex);
throw new ExceptionInInitializerError(ex);
}
}

public static SessionFactory getSession() {
return sessionFactory;
}

} 
```

这是 DTO 的

```
package com.ies.ieschool.shared;
// Generated 31 �.�. 2555, 1:54:03 by Hibernate Tools 3.4.0.CR1
import java.io.Serializable;
import java.util.Set;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import net.sf.gilead.pojo.gwt.LightEntity;

/**
* Province generated by hbm2java
*/
@Entity
@Table(name = "province", catalog = "ieschool")
public class Province extends LightEntity implements Serializable {

private static final long serialVersionUID = 1L;

private short provinceId;
private Geography geography;
private String provinceCode;
private String provinceName;
private Set<Father> fathers;
private Set<Mother> mothers;
private Set<Student> studentsForAddressProvince;
private Set<Student> studentsForAddressCensusProvince;
private Set<Student> studentsForGraduatedSchoolProvince;
private Set<Student> studentsForBirthAddressProvince;
private Set<City> cities;
private Set<ExperienceWork> experienceWorks;
private Set<District> districts;
private Set<Guardian> guardians;
private Set<Postcode> postcodes;
private Set<Personal> personalsForAddressProvince;
private Set<SeminarProfile> seminarProfiles;
private Set<Personal> personalsForLicenseIssueProvince;

public Province() {
}

@Id
@Column(name = "province_id", unique = true, nullable = false)
public short getProvinceId() {
    return this.provinceId;
}

public void setProvinceId(short provinceId) {
    this.provinceId = provinceId;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "geography_id", nullable = false)
public Geography getGeography() {
    return this.geography;
}

public void setGeography(Geography geography) {
    this.geography = geography;
}

@Column(name = "province_code", nullable = false, length = 2)
public String getProvinceCode() {
    return this.provinceCode;
}

public void setProvinceCode(String provinceCode) {
    this.provinceCode = provinceCode;
}

@Column(name = "province_name", nullable = false, length = 150)
public String getProvinceName() {
    return this.provinceName;
}

public void setProvinceName(String provinceName) {
    this.provinceName = provinceName;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<Father> getFathers() {
    return this.fathers;
}

public void setFathers(Set<Father> fathers) {
    this.fathers = fathers;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<Mother> getMothers() {
    return this.mothers;
}

public void setMothers(Set<Mother> mothers) {
    this.mothers = mothers;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByAddressProvince")
public Set<Student> getStudentsForAddressProvince() {
    return this.studentsForAddressProvince;
}

public void setStudentsForAddressProvince(Set<Student> studentsForAddressProvince)                                 {
    this.studentsForAddressProvince = studentsForAddressProvince;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByAddressCensusProvince")
public Set<Student> getStudentsForAddressCensusProvince() {
    return this.studentsForAddressCensusProvince;
}

public void setStudentsForAddressCensusProvince(
        Set<Student> studentsForAddressCensusProvince) {
    this.studentsForAddressCensusProvince = studentsForAddressCensusProvince;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByGraduatedSchoolProvince")
public Set<Student> getStudentsForGraduatedSchoolProvince() {
    return this.studentsForGraduatedSchoolProvince;
}

public void setStudentsForGraduatedSchoolProvince(
        Set<Student> studentsForGraduatedSchoolProvince) {
    this.studentsForGraduatedSchoolProvince = studentsForGraduatedSchoolProvince;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByBirthAddressProvince")
public Set<Student> getStudentsForBirthAddressProvince() {
    return this.studentsForBirthAddressProvince;
}

public void setStudentsForBirthAddressProvince(
        Set<Student> studentsForBirthAddressProvince) {
    this.studentsForBirthAddressProvince = studentsForBirthAddressProvince;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<City> getCities() {
    return this.cities;
}

public void setCities(Set<City> cities) {
    this.cities = cities;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<ExperienceWork> getExperienceWorks() {
    return this.experienceWorks;
}

public void setExperienceWorks(Set<ExperienceWork> experienceWorks) {
    this.experienceWorks = experienceWorks;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<District> getDistricts() {
    return this.districts;
}

public void setDistricts(Set<District> districts) {
    this.districts = districts;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<Guardian> getGuardians() {
    return this.guardians;
}

public void setGuardians(Set<Guardian> guardians) {
    this.guardians = guardians;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<Postcode> getPostcodes() {
    return this.postcodes;
}

public void setPostcodes(Set<Postcode> postcodes) {
    this.postcodes = postcodes;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByAddressProvince")
public Set<Personal> getPersonalsForAddressProvince() {
    return this.personalsForAddressProvince;
}

public void setPersonalsForAddressProvince(Set<Personal> personalsForAddressProvince) {
    this.personalsForAddressProvince = personalsForAddressProvince;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "province")
public Set<SeminarProfile> getSeminarProfiles() {
    return this.seminarProfiles;
}

public void setSeminarProfiles(Set<SeminarProfile> seminarProfiles) {
    this.seminarProfiles = seminarProfiles;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "provinceByLicenseIssueProvince")
public Set<Personal> getPersonalsForLicenseIssueProvince() {
    return this.personalsForLicenseIssueProvince;
}

public void setPersonalsForLicenseIssueProvince(
        Set<Personal> personalsForLicenseIssueProvince) {
    this.personalsForLicenseIssueProvince = personalsForLicenseIssueProvince;
}
} 
```

这是 DAO 的

```
package com.ies.ieschool.server;

import java.util.ArrayList;
import java.util.List;
import org.hibernate.Session;
import com.ies.ieschool.client.service.ProvinceService;
import com.ies.ieschool.shared.Province;
import net.sf.gilead.core.PersistentBeanManager;
import net.sf.gilead.core.hibernate.HibernateUtil;
import net.sf.gilead.core.serialization.GwtProxySerialization;
import net.sf.gilead.core.store.stateless.StatelessProxyStore;
import net.sf.gilead.gwt.PersistentRemoteService;

@SuppressWarnings("serial")
public class ProvinceImpl extends PersistentRemoteService implements  ProvinceService{

public ProvinceImpl() {
    HibernateUtil hibernateUtil = new HibernateUtil();    
                      hibernateUtil.setSessionFactory(com.ies.ieschool.util.HibernateUtil.getSession());

    PersistentBeanManager persistentBeanManager = new PersistentBeanManager();   
    persistentBeanManager.setPersistenceUtil(hibernateUtil); 
    StatelessProxyStore sps = new StatelessProxyStore();
    sps.setProxySerializer(new GwtProxySerialization());
    persistentBeanManager.setProxyStore(sps);

    setBeanManager(persistentBeanManager);
}

@Override
public Province findProvinceByPK(int provinceId) throws Exception {

    Province province;
    Session session = com.ies.ieschool.util.HibernateUtil.getSession().getCurrentSession();
    session.beginTransaction();
    province = (Province) session.createQuery("SELECT new Province( " +
            "pvn.provinceId, " +
            "pvn.provinceName " +
            ") " +
            "FROM Province pvn " +
            "WHERE pvn.provinceId = :id " +
            "ORDER BY pvn.provinceName").setInteger("id", provinceId).uniqueResult();   
    session.getTransaction().commit();
    return province;
}

@Override
public List<Province> findAllProvince() throws Exception {

    List<Province> list = null;
    Session session = com.ies.ieschool.util.HibernateUtil.getSession().getCurrentSession();
    session.beginTransaction();
    list = new ArrayList<Province> (session.createQuery("SELECT new Province( " +
            "pvn.provinceId, " +
            "pvn.provinceName " +
            ") " +
            "FROM Province pvn " +
            "ORDER BY pvn.provinceName").list());   
    session.getTransaction().commit();
    return list;
}
} 
```

这个用于休眠映射（hibernate.cfg.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>        
     <property name="hibernate.connection.driver_class">com.google.appengine.api.rdbms.AppEngineDriver</property>
    <property name="hibernate.connection.useUnicode">true</property>
    <property name="hibernate.connection.characterEncoding">UTF-8</property>
    <property name="hibernate.connection.charSet">UTF-8</property>
    <property name="hibernate.connection.url">jdbc:google:rdbms://ies-thamvitya-db:ieschool/ieschool_rif</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="hibernate.connection.username"></property>
    <property name="hibernate.connection.password"></property>
    <property name="hibernate.connection.pool_size">1</property>
    <property name="show_sql">true</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="javax.persistence.validation.mode">none</property>  
    <mapping class="com.ies.ieschool.shared.Province" />
</session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:22:26.217

据我所知，RPC 调用无法在 IOS 和 Andriod 等设备上运行。所以你最好避免使用 RPC 调用。

尝试使用 Ajax 请求从后面调用您的函数。在所有情况下都很顺利。

# windows - 在 PATCH 期间设置 ADDLOCAL 属性

> ID：12377217
> 
> 赞同：0
> 
> 时间：2012-09-11T20:13:30.307
> 
> 标签：windows, wix, windows-installer, installation, wix3.5

我有一个 MSI 包，它安装了许多用户可以选择在他的计算机中安装的功能。我还有一个 MSP 补丁包，它更新了一些组件并修复了应用程序中的一些错误。我注意到在补丁安装期间，属性 ADDLOCAL 会自动设置为包含所有功能的列表（在 CostFinalize 操作期间）。

我想知道为什么“CostFinalize”操作设置了 ADDLOCAL 属性，以及为什么它设置了所有“不存在”的特性。

我的问题是补丁正在安装一切。我真的找不到对此的解释，因此将不胜感激任何帮助。

编辑：链接到同一问题：[这里](http://us.generation-nt.com/patching-new-component-causes-addlocal-get-set-help-37009292.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:10:18.247

您已经尝试解决[此问题](https://stackoverflow.com/q/12288780/572834)。那时，您发现该`REINSTALL`属性包含用户安装的功能。

那么分配这个值的简单技巧`ADDLOCAL`应该会有所帮助：

```
<CustomAction Id="CopyReinstallToADDLOCAL"
       Property="ADDLOCAL" Value="[REINSTALL]"
/>
<InstallExecuteSequence>
    <Custom Action="RCopyReinstallToADDLOCAL" Before="CostFinalize">
        <![CDATA[PATCH]]>
    </Custom>
</InstallExecuteSequence> 
```

# ruby-on-rails - rails 委托 vs 包装方法

> ID：12377228
> 
> 赞同：1
> 
> 时间：2012-09-11T20:14:24.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, design-patterns

委托有什么好处？除了作为一种方便的方法之外，还有其他原因吗？它与模型中的简单包装方法相比如何？

没有代表我会有：

```
Class Goal
  belongs_to :user
end

 Time.now.in_time_zone(goal.user.timezone) 
```

现在有了代表，是否有以下优势：

```
Class Goal
  belongs_to :user
  delegate :timezone, :to => :user

  ...
end

Time.now.in_time_zone(goal.timezone) 
```

与包装方法相比：

```
Class Goal
  belongs_to :user
  def tz
    self.user.timezone
  end

  ...
end

Time.now.in_time_zone(goal.tz) 
```

我想我更喜欢 wrapper 方法，因为我可以给它一个任意别名（尽管如果我使用 rtfm 也可以使用委托）。这里还有其他事情吗？（我似乎无法根据委托键进行查询）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:52:07.843

两者或多或少是等价的，唯一的区别是一点点异常处理代码，让您知道您是否委托给一个`nil`对象。要使用您的示例，`delegate :timezone, :to => :user`将生成此时区方法：

```
def timezone(*args, &block)
  user.__send__(:timezone, *args, &block)
rescue NoMethodError
  if user.nil?
    raise "Goal#timezone delegated to user.timezone, but user is nil: #{self.inspect}"
  else
    raise
  end
end 
```

您不能使用任意别名，但可以提供`prefix`. 您还可以使用该`allow_nil`选项生成稍微不同版本的方法，当委托对象为`nil`.

有关详细信息，请参阅[`delegate`文档](http://api.rubyonrails.org/classes/Module.html#method-i-delegate)或[`delegate`源代码](https://github.com/rails/rails/blob/8ba491acc31bf08cf63a83ea0a3c314c52cd020f/activesupport/lib/active_support/core_ext/module/delegation.rb#L104)。

# c# - 一个文件在 Visual Studio IDE 中不断打开

> ID：12377229
> 
> 赞同：4
> 
> 时间：2012-09-11T20:14:27.517
> 
> 标签：c#, wpf, visual-studio-2010

我正在使用 Visual Studio 2010

在一个解决方案中，我有`A.XAML`文件，并且每次我开始解决方案时它都会一直打开。它也会在某个随机时间打开 - 我没有确切的解释。

这很烦人。为什么VS会自己打开特定文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:02:52.090

即使您创建一个新项目，它也会打开吗？如何定位文件并重命名它是否有助于解决问题？另外，您是否尝试过备份和删除的内容`C:\Users\<your_username>\AppData\Local\Microsoft\VisualStudio\`？

*根据评论更新 1：*

因此，当您将所有 A.XAML 重命名为 B.XAML 时，您会看到 A.XAML 出现还是获得 B.XAML 文件？您的计算机上是否有许多 A.XAML 文件的实例？如果有很多，请以不同的方式重命名它们，以便您随后可以识别有罪的人。您是否尝试过通过控制面板中的“添加删除程序”来“修复”VisualStudio？你能在 Regedit.exe 中找到 A.XAML 字符串吗？我认为如果您创建一个虚拟项目并请同事或朋友在他们的计算机上打开它会很有用？（获得该虚拟项目的样本以解决它是项目还是 IDE 或操作系统是有罪的一方会很有帮助）

*更新 2 基于进一步的评论：*

重新创建项目的 .SUO 文件解决了该问题。例如，将 .SUO 文件重命名为 .BAK 并在 Visual Studio 中重新打开项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-12T16:08:16.650

对我有用的是运行 Visual Studio 安装程序并选择修复选项。我有一个完整的解决方案，它总是在我打开任何其他解决方案后几秒钟打开。我不想删除解决方案，所以我想我应该尝试修复 Visual Studio（使用 VS2019）。从那以后就没有问题了。

似乎是一个“强烈”的选择，但它确实有效。

# string - 如何根据模式列表标记条纹字符串

> ID：12377231
> 
> 赞同：4
> 
> 时间：2012-09-11T20:14:51.467
> 
> 标签：string, algorithm

给定一个字符串 S 和一个模式列表 L [L [1] , ..., L [n] ]，你将如何找到 S 中与 L 中的模式匹配的所有标记的列表，因此 S 中匹配的字母总数为最大化？

一个虚拟的例子是 S = "thenuke", L = {"the", "then", "nuke"} 我们想检索 ["the", "nuke"] 就好像我们从匹配 "then" 开始，我们没有得到最大化 S 中匹配的字母总数的解决方案。

我一直在查看其他 SO 问题、[字符串匹配算法](http://en.wikipedia.org/wiki/String_searching_algorithm "字符串匹配算法")，但没有发现任何东西可以有效地解决问题的最大化部分。这一定是在生物信息学中研究过的，但我不在这个领域，所以任何帮助（包括学术论文的链接）都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:06:38.833

这可以在 O(|S| + |L| + k) 时间内解决，其中 k 是 S 中来自 L 的所有字符串的匹配总数。主要有两个步骤：

1.  运行[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。这将为您提供 S 中 L 中任何字符串的所有匹配项。这与上述运行时间相同。

2.  初始化长度为 |S| 的整数数组 A + 1 到全零。遍历数组，在位置 i 将 A[i] 设置为 A[i-1]，如果它更大，那么对于每个匹配项 M，从位置 i 的 S 中的 L，将 A[i+|M|] 设置为A[i+|M|] 和 A[i] + |M| 的最大值。

这是 Go 中的一些代码，正是这样做的。它使用我编写的一个包，该包有一个方便的包装器，用于调用 Aho-Corasick。

```
package main

import (
  "fmt"
  "github.com/runningwild/stringz"
)

func main() {
  input := []byte("thenuke")
  patterns := [][]byte{[]byte("hen"), []byte("thenu"), []byte("uke")}

  // This runs Aho-Corasick on the input string and patterns, it returns a
  // map, matches, such that matches[i] is a list of indices into input where
  // patterns[i] matches the input string.  The running time of this is
  // O(|input| + |patterns| + k) and uses O(|patterns| + k) auxillary storage,
  // where k is the total number of matches found.
  find := stringz.FindSet(patterns)
  matches := find.In(input)

  // We want to invert the map so that it maps from index to all strings that
  // match at that index.
  at_pos := make([][]int, len(input)+1)
  for index, hits := range matches {
    for _, hit := range hits {
      at_pos[hit] = append(at_pos[hit], index)
    }
  }

  // Now we do a single pass through the string, at every position we will
  // keep track of how many characters in the input string we can match up to
  // that point.
  max := make([]int, len(input)+1)
  for i := range max {
    // If this position isn't as good as the previous position, then we'll use
    // the previous position.  It just means that there is a character that we
    // were unable to match anything to.
    if i > 0 && max[i-1] > max[i] {
      max[i] = max[i-1]
    }

    // Look through any string that matches at this position, if its length is
    // L, then L positions later in the string we can have matched L more
    // character if we use this string now.  This might mean that we don't use
    // another string that earlier we thought we'd be matching right now, we'll
    // find out later which one was better.
    for _, hit := range at_pos[i] {
      L := len(patterns[hit])
      if i+L < len(max) && max[i+L] < max[i]+L {
        max[i+L] = max[i] + L
      }
    }
  }

  fmt.Printf("%v\n", max)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:25:07.030

[您可以通过动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)及时解决此问题 O(|L||S|) ：迭代地构建一个表，为 S = s [1] s [2] ...s [*n*]的每个初始子字符串提供最佳匹配：

*   B(0) 是 S 的零长度初始子串的最佳匹配，是空匹配。

*   假设我们已经为每个*i* < *k计算了最佳匹配 B(* *i* )，现在我们想要计算 B( *k* )。设*p*是 L 中的一个模式，长度为 | *p* |，令*j* = *k*  - | *p* | + 1\. 如果*p* = s [*j*] ...s [*k*]则存在一个匹配 s [1] s [2] ...s [*k*]的匹配项，该匹配项由 B( *j* ) 后跟*p*组成。设 B( *k* ) 是在考虑 L 中的所有模式后找到的最佳匹配。

****   B( *n* ) 是整个 S 的最佳匹配。***

# python - python 3中是否有布尔变量？

> ID：12377234
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:15:26.970
> 
> 标签：python, boolean

> **可能重复：**
> [Python 中的布尔值](https://stackoverflow.com/questions/1748641/boolean-in-python)

我似乎无法在 Python 3 中找到对布尔变量的引用。python 中有布尔变量吗？

因此，例如，我将如何在 python 中执行此操作：

```
bool checker;
while(checker = false)
{
//do this
}

... 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:21:44.293

没有“布尔变量”之类的东西：*Python 中的变量**没有**类型*，因为 Python 是一种动态类型的语言。

但是，有“布尔值”。[仅] 两个这样的布尔值由`True`和命名`False`。REPL 显示：

```
>>> True.__class__
<class 'bool'>
>>> False.__class
<class 'bool'> 
```

然而，它通常不需要`== True`或`== False`通常被认为是不好的做法。此外，在 Python（以及 C 和 Java）`=`中*始终*是赋值运算符，而不是相等运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:17:54.457

首先，您不要在 python 中声明变量类型。考虑到这一点，您的示例很容易翻译：

```
checker = False
while not checker:
    # do this 
```

# google-chrome - Sencha touch selectfield 在 chrome 中工作正常，但在 android 2.1 模拟器和 Android 2.2 手机中失败

> ID：12377239
> 
> 赞同：1
> 
> 时间：2012-09-11T20:15:45.470
> 
> 标签：google-chrome, extjs, touch, emulation

我正在学习煎茶触摸。我有一个奇怪的问题。使用选择字段的视图未在 Android 模拟器上显示，但在 Google Chrome 中显示。它以前工作得很好，我猜不出是什么改变了“破坏”它。

在模拟器 logcat 中，我可以看到以下三个消息：

> E/ActivityThread(243)：无法找到 android.server.checkin 的提供者信息
> 
> W / Checkin（243）：无法更新统计BROWSER_SNAP_CENTER：java.lang.IllegalArgumentException：未知的URL内容：//android.server.checkin/stats
> 
> D/CordovaLog(243)：未定义：第 1 行：TypeError：表达式“c”[null] 的结果不是构造函数。

有时只显示第三个。以下是查看代码：

```
(function() {
    var setSettingValue = function(component, query, value) {
        var c = component.query(query);
        if (c && value && (c.length > 0)) {
            c[0].setValue(value);
        }
    };
    var createToolbar = function () {
    return Ext.create('Ext.Toolbar', {
        xtype: 'toolbar',
        docked: 'bottom',
        layout: { pack: 'center' },
        items: [
            { 
                iconMask: true, ui: 'normal', iconCls: 'info',
                itemId: 'infoButton'
            },
            { xtype: 'spacer' },
            { 
                iconMask: true, ui: 'normal', iconCls: 'reply',
                itemId: 'backButton'
            }
        ]
    })};
    Ext.define('MyWF.view.Settings', {
        extend: 'Ext.Container',
        initialize: function ()
        {
            this.setItems([createToolbar()]);
            this.callParent();
        },
        config : {
            layout : 'vbox',
            padding : '0 10',
            scrollable: {
                direction: 'vertical'
            },
            onBackAction: function () { console.log('back'); },
            onInfoAction: function () { console.log('info'); },
            listeners: [{
                delegate: "#backButton",
                event: 'tap',
                fn: 'onBackAction'
            },
            {
                delegate: "#infoButton",
                event: 'tap',
                fn: 'onInfoAction'
            },
            {
                event: 'show',
                fn: function(component, eOpts) {
                    setSettingValue(component, 'selectfield[name=windMU]','kmh');
                    setSettingValue(component,'selectfield[name=temperatureMU]','C');
                }
            }],
            items : [{
                xtype : 'fieldset',
                title : 'Measure units',
                items : [{
                    xtype : 'selectfield',
                    name : 'temperatureMU',
                    label : 'Temperature',
                    labelAlign: 'top',
                    listeners : {
                        change : function(selectField, newData, oldData, eOpts) {
                            alert('Your choice is: ' + newData);
                        }
                    },
                    options : [{
                        text : 'Celsius',
                        value : 'C'
                    }, {
                        text : 'Farenheit',
                        value : 'F'
                    },]
                }, {
                    xtype : 'selectfield',
                    name : 'windMU',
                    label : 'Wind speed',
                    labelAlign : 'top',
                    listeners : {
                        change : function(selectField, newData, oldData, eOpts) {
                            alert('Your choice is: ' + newData);
                        }
                    },
                    options : [{
                        text : 'Kilometers per hour',
                        value : 'km/h'
                    }, {
                        text : 'Meters per second',
                        value : 'm/s'
                    }, {
                        text : 'Miles per hour',
                        value : 'MPH'
                    }, {
                        text : 'Knots',
                        value : 'kn'
                    }]
                }]
            },]
        }
    });
})(); 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:28:40.143

好吧，我有一些时间来解决这个问题。首先，我在问题中添加了一个缺少的信息：我正在使用 Sencha Touch 库的自定义构建运行应用程序，库版本是 2.0.1.1。

在 Google Chrome 上，选择字段 (Ext.field.Select) 默认为 choiches 列表创建一个*Ext.dataview.List*实例，而在手机上创建一个*Ext.picker.Picker*。

但是*Ext.picker.Picker*还创建了一个*Ext.TitleBar*，这是我自定义的 sencha 库构建中缺少的，而*Ext.dataview.List*类在其中。

因此应用程序可以在 Chrome 中显示选择字段，但不能在模拟器中显示，并且它给出了不明确的消息，因为 libary 构建被压缩和混淆。

**有两种解决方案：**

1.  您也可以在模拟器或手机中强制使用列表。*Ext.picker.Picker*类有一个创建选项：*"usePicker: false"*，默认设置为 "auto"。

2.  或者，更好的是，在应用文件中添加对标题栏组件的显式引用：“ *Ext.require('Ext.TitleBar');* ”以将其包含在库构建中。

我看到了强制在 Chrome 中使用选择器的问题，方法是设置选择器配置“ *usePicker: true* ”，并使用调试库构建“sencha-touch-debug.js”运行应用程序，请参阅[http://docs。 sencha.com/touch/2-0/#!/api/Ext.Loader](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader)和[http://docs.sencha.com/touch/2-0/#!/guide/building](http://docs.sencha.com/touch/2-0/#!/guide/building)。

然后在 Chrome 控制台以及 Android 模拟器 logcat 中，我看到了明确的消息：

```
[WARN][Anonymous] [Ext.Loader] Synchronously loading 'Ext.TitleBar'; 
consider adding 'Ext.TitleBar' explicitly as a require of the corresponding class 
```

一个建议：在 logcat 中最好过滤许多消息，例如在过滤器掩码中写入“Ext.Loader”。

# parsing - 在 Haskell 中导出读取（和显示）时避免反斜杠编码 utf8 字符

> ID：12377243
> 
> 赞同：2
> 
> 时间：2012-09-11T20:15:50.073
> 
> 标签：parsing, haskell, text, encoding, utf-8

我`Text`在派生`Read`实例时无法解析 utf8 字符。例如，当我在*ghci*中运行以下命令时...

```
> import Data.Text
> data Message = Message Text deriving (Read, Show)
> read ("Message \"→\"") :: Message
Message "\8594" 
```

我可以做些什么来将我的文本保存在`Message`utf-8 编码中吗？即结果应该是...

```
Message "→" 
```

（PS 我已经收到我的序列化消息`Text`，但目前需要`unpack`一个`String`才能调用`read`。我很想避免这种情况......）

**编辑**：对不起，答案正确地指出它`show`不是`read`转换为`"\8594"`- 有没有办法在没有反斜杠编码的情况下再次`show`转换回？`Text`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:25:00.020

据我所知，`Text`（[实际上是 UTF-16](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text.html#g:2)）使用的内部编码是一致的，没有直接暴露。如果您想要 UTF-8，您可以根据需要对`Text`值进行解码/编码。同样，谈论 的编码也没有意义`String`，因为那只是 的列表`Char`，其中每个`Char`都是 unicode 代码点。

最有可能的是，这只是此处以不同方式显示事物的`Show`实例。`Text`

另外，请记住（按照标准库中的一致约定）`read`并且`show`应该表现为（反）序列化函数，具有“序列化”格式，解释为 Haskell 表达式，描述一个与以下值等效的值（反）序列化。因此，使用 ASCII 文本的斜线编码通常是首选，因为它被广泛支持和明确。如果你想`Text`用实际的代码点显示一个值，那`show`不是你想要的。

* * *

我不完全清楚你想用`Text`--using`show`直接做什么正是你想要避免的。如果你想在一个终端窗口中显示文本来决定编码，并且你想要在`Data.Text.IO`. 如果您出于任何其他原因需要转换为特定编码，`Data.Text.Encoding`将为您提供编码`ByteString`（强调“字节”，而不是“字符串” `ByteString`——a 是原始字节序列，而不是字符串）。

如果你只是想从`Text`to`String`和 back to转换`Text`……斜线编码有什么问题？`show`尽管许多人最初的期望并非如此，但它并不是真正用于供用户阅读的漂亮打印输出。

# git - Git 接收后自动构建

> ID：12377250
> 
> 赞同：1
> 
> 时间：2012-09-11T20:16:33.717
> 
> 标签：git, shell, githooks

我会在 git 存储库中安装一个接收后挂钩，以构建模块并将其安装到一些自定义测试区域。这个想法是测试区域将始终反映 repo 中的最新代码。

钩子将：

1.  克隆/拉取代码到 tmp 空间
2.  构建模块
3.  将模块安装到测试区域

开发人员通过 gitosis 通过 SSH 连接到 repo。有什么方法可以让用户在推送数据后断开连接，这样他们就不需要坚持构建？

我试过这样的事情：

```
install(){
    unset GIT_DIR

    BARE_PATH=$PWD
    REPO_BASENAME=$(basename "$BARE_PATH")
    REPO_BASENAME=${BARE_PATH%.git}

    cd /my/scratch/space/

    if [ ! -d $REPOSITORY_BASENAME ] ; then
        git clone file://$BARE_PATH
    fi
    cd $REPO_BASENAME

   git pull
   ./install.sh

}

install & 
```

这并不完全做到这一点。在上面的钩子中，它直到完成后才会退出`install`。有没有办法让钩子在安装完成之前退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:28:47.593

使用[http://en.wikipedia.org/wiki/Continuous_Integration](http://en.wikipedia.org/wiki/Continuous_Integration)，例如 Jenkins。

# mysql - mySQL 我是否需要多个索引才能将具有外键的多个表连接到单个主表？

> ID：12377252
> 
> 赞同：0
> 
> 时间：2012-09-11T20:16:37.370
> 
> 标签：mysql, relational-database

我正在建立一个记录收集数据库。我有一个主发布表，其中包含标题、艺术家、格式、国家、日期、标签等 - 每一个都将是一个单独的表，外键连接回发布。我的问题是，它们单独的表中的所有外键是否都连接到 Release 中的一个主键（id），或者它们每个都连接到 Release 中的相应索引整数键？说到索引 - 那么是否有必要在上述所有要搜索的内容上创建一个单独的索引？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:26:30.343

鉴于您提供的信息，您将具有以下表格结构

**发布**

ID、标题、ArtistID、FormatID、CountryID、Date、LabelID

**艺术家** ID（Release 表中 ArtistID 的外键）、姓名等

**格式** ID（版本表中 FormatID 的外键）、名称等

等等等等

> 那么是否有必要对上述所有要搜索的内容创建一个单独的索引？

取决于您计划如何搜索表格

编辑：

> 好的，所以每个表中的每个外键都连接到 Release 表中自己的 id - 不是主 id，对吗？

确切地。ArtistID 将连接到以 ID 为主键的 Artists 表，但在 Releases 表中它是外键。除日期外，其余字段的想法相同。

> 至于搜索，例如，搜索艺术家（表将有名字、姓氏或组名）应该连接到该艺术家的版本

然后，您在 ArtistFirstName 和 ArtistLastName 字段上创建索引 - 这些是 Artists 表中的字段，这就是您的搜索要搜索的内容。如果您希望显示艺术家的发布，那么您必须在 ArtistID 上加入 Artists 和 Releases 表（您将在搜索后获得）。

如果您阅读有关关系数据库设计和规范化的更多信息，将会有所帮助。

# android - 为什么布局没有出现在 Android 中？

> ID：12377253
> 
> 赞同：0
> 
> 时间：2012-09-11T20:16:39.650
> 
> 标签：android, xml, android-layout

我无法弄清楚为什么我的代码没有出现任何内容。一切都是使用线性布局设置的，我已经习惯了，但在编译和运行代码时没有任何效果。（日志中也没有错误）我确定我只是在看一些简单的东西。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="#000000" >

    <LinearLayout
        android:id="@+id/itemprofilelayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="100"
        android:orientation="vertical"
        android:background="@android:color/transparent" >

        <LinearLayout
            android:id="@+id/toplayout"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="30"
            android:orientation="horizontal" 
            android:background="@android:color/transparent" >

            <ImageView
                android:id="@+id/itempicture"
                android:contentDescription=" "
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:background="#FFFFFF"
                android:src="@drawable/budlight_sample" />

            <TextView
                android:id="@+id/iteminformation"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:background="#FFFFFF" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/middlelayout"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="30"
            android:orientation="horizontal" 
            android:background="@android:color/transparent" >

            <TextView
                android:id="@+id/socialoptions"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:background="#FFFFFF"/>

            <TextView
                android:id="@+id/map"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:background="#FFFFFF" />
        </LinearLayout>

        <TextView
            android:id="@+id/itemratings"
            android:layout_width="fill_parent"
            android:layout_height="15dp"
            android:layout_weight="1"
            android:background="#FFFFFF" />

        <TextView
            android:id="@+id/itemreviews"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:background="#FFFFFF" />

    </LinearLayout>

</ScrollView> 
```

活动：

```
package My.Taste.App;

import android.app.Activity;
import android.os.Bundle;

public class ItemListActivity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.itemlist);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:24:11.670

我从未使用过 MapView。但它不是标准的Android View，尝试使用全名：

```
<com.google.android.maps.MapView
    ... /> 
```

但是，如果这不是问题，那么您的许多`layout_width`属性也设置为`0dp`. 当我将 ImageView 的宽度更改为它时，`wrap_content`它显示得很好。此外，您将看不到任何 TextView，因为您尚未向它们传递任何文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:08:01.557

通过使用以下更改代码的上半部分来解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/itemprofilestartup"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/toplayout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="30"
        android:background="@android:color/transparent"
        android:gravity="top"
        android:orientation="horizontal"
        android:paddingLeft="0dp" > 
```

# jquery - 如何通过 JQuery FileTree（ruby on rails）在硬盘驱动器中创建文件的文件树？

> ID：12377254
> 
> 赞同：0
> 
> 时间：2012-09-11T20:16:39.003
> 
> 标签：jquery, ruby-on-rails, ruby

我正在尝试将 JQuery [Filetree](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/#demo)连接 到我在 rails 应用程序上的硬盘驱动器。我做了一些研究，发现出于安全原因，JQuery 无法访问硬盘目录，但是，我很好奇如何使它工作，也许是使用他们的 Ruby 连接器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:42:05.013

JavaScript 是沙盒的，因此它无法访问用户的驱动器或环境。这是多年前进行的安全和隐私更改。

如果您想显示该信息，您必须以另一种具有这些权限的语言捕获它，并将其传递给 JavaScript，以便它可以访问它。这是Web开发的常见问题。

使用 Ruby 的内置[`Dir`](http://www.ruby-doc.org/core-1.9.3/Dir.html)类来收集您想要的信息。它有几种方法可以获取整个磁盘层次结构或其中的一个子集。特别要检查这些方法：[`[]`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-5B-5D)、[`each`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-i-each)、[`glob`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)和[`entries`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-entries)。

在数组中获得所需信息后，将其转换为 JSON 字符串并将该字符串作为 JavaScript 字符串变量嵌入到您的 JavaScript 中，或者编写一个处理程序以通过 URL 即时检索该数据。

# java - 如何解析特定的数据文件并对其内容进行聚类？爪哇

> ID：12377258
> 
> 赞同：2
> 
> 时间：2012-09-11T20:16:48.703
> 
> 标签：java, string, parsing, pattern-matching, cluster-analysis

我有一个文件，如下所示，

```
150 event4
160 event4
160 event0
170 event4
175 event4
180 event4
190 event4
192 event3
195 event4
----------
---------- 
```

第一列是以毫秒为单位的相应事件实际发生的时间。所以 event4 在 150 毫秒内发生。

我有以下任务要做，

1.  逐行迭代。

2.  如果连续事件之间的间隔小于 80 毫秒，则它们是单个活动的序列。

例如

```
100 event4
120 event5 
140 event6
200 event4 
```

它们都具有不超过80毫秒的连续差异。如果差异超过 80 毫秒，则表示当前序列结束，新序列开始。我的目标是对序列进行聚类。并在不同的集群中报告特定事件的数量。因此，在集群 1 中的以下示例中，事件 4 发生了 4 次，事件 5 发生了 1 次，事件 6 发生了 1 次。在第二个集群事件 4 3 次和 event5 1 次。

```
100 event4
120 event5 
140 event6
200 event4

300 event4
320 event4 
340 event4
400 event5 
```

我现在正在做的是，

1.  我制作了一个字符串列表。我解析文件，如果小于 80 毫秒，则测量行之间的间隙，然后将它们添加到列表中。
2.  当我发现一个间隔超过 80 毫秒的事件时，我停止添加并为下一个序列创建一个新列表。
3.  在将所有序列放在不同的列表中之后，我然后遍历列表以测量特定事件的数量。

我不知道这是否是一种有效的方法。我有一些问题。

*   我不知道那里有多少个序列簇，所以我想存储特定簇的列表数量是不固定的。
*   事件名称不固定。它可以是 event1 到 event100 或 event 1 到 45。因此，用于存储事件编号的变量数量也不固定。

那么，你们还有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:38:23.733

这不是人们所说的科学中的“聚类”，而只是分组或聚合。您聚合事件，除非它们间隔时间过长。

至于方法，您正在追求规范方法。除非您的数据已经在复杂的数据库索引中，否则您无法比线性做得更好。只要是文本文件，就只能线性读取。

至于数据结构，将其组织为`ArrayList<ArrayList<String>>`or并没有错`ArrayList<HashMap<String, Integer>>`，因为事件 ID 是字符串。内存要求应该适中，并且可以扩展到千兆字节。如果您遇到内存问题，请尝试维护 a`HashSet<String>`以仅保留每个事件字符串的*一份*副本，并将时间转换为数字数据类型。然后，当您的事件足够少时，您应该能够加载几 GB。

实际上，我在这里没有看到任何重大挑战。

# memory - MS Access 中的复杂查询与内存

> ID：12377261
> 
> 赞同：1
> 
> 时间：2012-09-11T20:17:03.533
> 
> 标签：memory

对于工作，我有一张表格，可以跟踪个人分配的所有任务以及他们被分配的班次。我已将此链接到 Sharepoint 服务器，因此我使用 MSAccess 2010 来查询数据并获取报告。我正在尝试进行查询，该查询将为我提供工程师在特定班次上的天数，以便确定轮换的优先级。容易吧？好吧，每个班次会有多个任务。这是该问题的一个示例：

```
姓名 分配 班次 分配日期
约翰一天 1/1/2012
约翰 B 日 2012 年 4 月 10 日
莎拉 C 之夜 2/2/2012
莎拉 D 之夜 2012 年 3 月 2 日
比尔 E 日 2/20/2012
莎莉 F 之夜 2/25/2012

```

到目前为止，通过使用多个查询，我已经能够获得 LAST 分配（每班）的天数，但这不会说明在同一班次中被分配不同任务的人。使用上表和方法（每班最后一次分配的最大值），我将让**Bill**与**Sally**轮换，因为**Bill**似乎是最长的白班，而**Sally**上夜班的时间最长。实际上**John**应该和**Sarah**一起轮换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:25:15.103

您希望在执行 GROUP BY Name,Shift,Date 时使用计算时间的 SUM()。您不想在分组中分配任务。

# iphone - AFNetworking setImageWithURL - 获取返回图像的高度？

> ID：12377265
> 
> 赞同：0
> 
> 时间：2012-09-11T20:17:30.790
> 
> 标签：iphone, ios, afnetworking, heightforrowatindexpath

我希望在自定义 tableviewcell 中设置图像，并在 heightForRowAtIndexPath 方法中使用返回图像的高度。

无论如何要将此返回的数据放入 heightForRowAtIndexPath 方法中吗？目前我正在使用本地字典并按以下方式进行设置：

```
 NSURLRequest* urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:recent.show.showImage] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];

   [cell.imageView setImageWithURLRequest:urlRequest placeholderImage:[UIImage imageNamed:@"icon"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

       NSNumber *imageHeight = [[NSNumber alloc] initWithFloat:image.size.height];
       NSString *indexString = [NSString stringWithFormat:@"%d", indexPath.row];
       [self.returnedImages setValue:imageHeight forKey:indexString];
       [imageHeight release];

   } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

   }]; 
```

非常感谢任何有关更有效方法的指针。

干杯尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:56:43.133

您当前在 NSDictionary 中执行此操作的方式是合适的。尽管为了确保它尽快更新，您可以添加`[self.tableView reloadData]`到您的成功块中，但从那时起，它会立即使用更新的数据刷新您的 tableview。更好的是，您可以使用`reloadRowsAtIndexPaths:withRowAnimation:`并仅将新下载的 UIImage 的索引路径传递给它，这样它就不会刷新整个 tableview。

[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# nagios - 将 Nagios 通知推送到 Growl 1.2.2 - Growl 不听

> ID：12377266
> 
> 赞同：2
> 
> 时间：2012-09-11T20:17:33.170
> 
> 标签：nagios, growl

第一次发贴，如果有遗漏请告诉我！

我试图让 Nagios 推送通知以在客户端机器上咆哮，但我没有太多运气让咆哮注册应用程序。

我正在使用我在[此处](http://gothamlabs.org/?p=90)找到的 perl 脚本，其中包含咆哮版本 1.2.2。通知正在发送到适当的地址，我能够在 WireShark 中捕获它们，它们看起来格式正确。

问题是 Growl 没有监听 UDP 端口 9887（它正在监听 TCP 23052，但这不是该版本支持的网络通知），我似乎无法做到。有谁知道如何解决这个问题？

[根据这个](https://groups.google.com/forum/?fromgroups=#!topic/growldiscuss/_R9PSytxGIY)论坛帖子，这似乎不是我独有的问题，但从未真正发布过解决方案......

任何帮助或提示将不胜感激！

任何一般性建议......来自任何人:(

# webgl - WEBGL Three.js 我如何创建相同大小的网格？

> ID：12377268
> 
> 赞同：0
> 
> 时间：2012-09-11T20:17:32.693
> 
> 标签：webgl, three.js, collision, aabb

我想要 AABB colsion，所以我做了一个相同大小的 MESH 的立方体，我试试这个。但效果不好。

```
zmesh = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial(  { /*map: THREE.ImageUtils.loadTexture( filepath )*/ }  ));
zmesh.position.set( x, y, z );
zmesh.scale.set( s, s, s );
zmesh.rotation.x = - Math.PI / 2;
scene.add( zmesh ); 
Object.push( zmesh );

var BOX =   new THREE.Mesh( new THREE.CubeGeometry(10, 10, 10 ), new THREE.MeshLambertMaterial({ color : 0xFFF0FF }));
BOX.position.set( x, y, z );
scene.add(BOX);
COLLISION.push( BOX ); 
```

我如何创建相同大小的网格？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:56:47.560

这是我在[编辑器](http://mrdoob.github.io/three.js/editor/)上使用的代码：

**[历史参考 (r50)]**

[https://github.com/mrdoob/three.js/blob/r50/gui/js/ui/Viewport.js#L34-38](https://github.com/mrdoob/three.js/blob/r50/gui/js/ui/Viewport.js#L34-38)

```
var selectionBox = new THREE.Mesh( new THREE.CubeGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: 0xffff00, wireframe: true } ) );
selectionBox.geometry.dynamic = true;
selectionBox.matrixAutoUpdate = false;
selectionBox.visible = false;
sceneHelpers.add( selectionBox ); 
```

[https://github.com/mrdoob/three.js/blob/r50/gui/js/ui/Viewport.js#L141-183](https://github.com/mrdoob/three.js/blob/r50/gui/js/ui/Viewport.js#L141-183)

```
var geometry = object.geometry;

if ( geometry.boundingBox === null ) {

    geometry.computeBoundingBox();

}

selectionBox.geometry.vertices[ 0 ].x = geometry.boundingBox.max.x;
selectionBox.geometry.vertices[ 0 ].y = geometry.boundingBox.max.y;
selectionBox.geometry.vertices[ 0 ].z = geometry.boundingBox.max.z;

selectionBox.geometry.vertices[ 1 ].x = geometry.boundingBox.max.x;
selectionBox.geometry.vertices[ 1 ].y = geometry.boundingBox.max.y;
selectionBox.geometry.vertices[ 1 ].z = geometry.boundingBox.min.z;

selectionBox.geometry.vertices[ 2 ].x = geometry.boundingBox.max.x;
selectionBox.geometry.vertices[ 2 ].y = geometry.boundingBox.min.y;
selectionBox.geometry.vertices[ 2 ].z = geometry.boundingBox.max.z;

selectionBox.geometry.vertices[ 3 ].x = geometry.boundingBox.max.x;
selectionBox.geometry.vertices[ 3 ].y = geometry.boundingBox.min.y;
selectionBox.geometry.vertices[ 3 ].z = geometry.boundingBox.min.z;

selectionBox.geometry.vertices[ 4 ].x = geometry.boundingBox.min.x;
selectionBox.geometry.vertices[ 4 ].y = geometry.boundingBox.max.y;
selectionBox.geometry.vertices[ 4 ].z = geometry.boundingBox.min.z;

selectionBox.geometry.vertices[ 5 ].x = geometry.boundingBox.min.x;
selectionBox.geometry.vertices[ 5 ].y = geometry.boundingBox.max.y;
selectionBox.geometry.vertices[ 5 ].z = geometry.boundingBox.max.z;

selectionBox.geometry.vertices[ 6 ].x = geometry.boundingBox.min.x;
selectionBox.geometry.vertices[ 6 ].y = geometry.boundingBox.min.y;
selectionBox.geometry.vertices[ 6 ].z = geometry.boundingBox.min.z;

selectionBox.geometry.vertices[ 7 ].x = geometry.boundingBox.min.x;
selectionBox.geometry.vertices[ 7 ].y = geometry.boundingBox.min.y;
selectionBox.geometry.vertices[ 7 ].z = geometry.boundingBox.max.z;

selectionBox.geometry.computeBoundingSphere();

selectionBox.geometry.verticesNeedUpdate = true;

selectionBox.matrixWorld.copy( object.matrixWorld );

selectionBox.visible = true; 
```

* * *

**注意：**当前 (2015-4-30) 版本的[Viewport.js](https://github.com/mrdoob/three.js/blob/master/editor/js/Viewport.js)位于[/editor/js 目录](https://github.com/mrdoob/three.js/tree/master/editor/js)中。

# c# - 将数据从多访问数据库文件导入 Ms Sql Server

> ID：12377272
> 
> 赞同：0
> 
> 时间：2012-09-11T20:17:52.007
> 
> 标签：c#, sql-server

我正在做一个项目，用户必须将具有相同表结构的**多个访问数据库文件**（一次最多 20 个 mdb 文件）导入**Ms SQL 服务器**，系统与数据链接以进行进一步分析。我想要一种最有效的方式来完成这项任务（使用 c#，Ms Sql Server），在将数据导出到 sql server 时不会花费太多时间。我以前没有这样做过，所以请您指导我完成。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:22:03.687

如果这需要以自动化方式运行，您应该编写一个 SSIS 包并将其安排为作业。如果需要运行一次，您可以使用 SQL Server 中的导入向导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:24:45.463

您可能想要查看 SQL Server 集成服务 ( [SSIS](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services) )。StackOverflow 上已经有一些答案（例如[这里](https://stackoverflow.com/questions/6709670/how-do-i-import-ms-access-data-into-sql-server-using-ssis-package)），展示了如何使用 SSIS 将数据从 Access 移动到 SQL Server。

如果您构建一个 SSIS 包，您可以从 C# 程序重复调用它并设置参数（Access 数据库文件的路径、表名等）。有关示例，请参见[此处。](http://blogs.msdn.com/b/michen/archive/2007/03/22/running-ssis-package-programmatically.aspx)

# iphone - 转换多种格式时 NSDateFormatter 不起作用

> ID：12377276
> 
> 赞同：0
> 
> 时间：2012-09-11T20:17:58.247
> 
> 标签：iphone, ios, nsdateformatter

我有一个转换多种日期格式的类。

当我这样做时它有效：

```
-(NSString*)getTimeStampWithFormat:(NSString*) formatStr{
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:formatStr];
    NSString *currentDate = [dateFormatter stringFromDate:[NSDate date]];
    return currentDate;
} 
```

当我这样做时它不起作用

```
-(void) initDF{
    dateFormatter = [[NSDateFormatter alloc] init];
}

-(NSString*)getTimeStampWithFormat:(NSString*) formatStr{
    [dateFormatter setDateFormat:formatStr];
    NSString *date = [dateFormatter stringFromDate:[NSDate date]];
        return currentDate;
} 
```

我`getTimeStampWithFormat:`多次调用该方法来转换不同的格式。在第二种方法中，我只分配一次内存并进行多次转换，结果为零。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:37:45.843

正如苹果所说：

> 创建日期格式化程序并不是一项廉价的操作。如果您可能经常使用格式化程序，则缓存单个实例通常比创建和处置多个实例更有效。一种方法是使用静态变量。

但我想知道为什么它总是返回 nil，你能告诉我们一些格式字符串吗？

**注意：任何机构都知道如何对问题添加评论？我找不到“评论”按钮。**

# css - 多级响应式导航工具/教程

> ID：12377283
> 
> 赞同：0
> 
> 时间：2012-09-11T20:18:48.353
> 
> 标签：css, navigation, responsive-design

我的脑海里浮现出所有响应式导航的选项，但我很难找到我想要的在 IE 中工作的东西！

我希望有人为我使用了“完美”的系统！

我正在寻找的是一个导航，它是：

1) 建立在 CSS 中简单的 ul li 结构之上

2）在较小的视口中，导航将变成一个导航图标，该图标将滑动打开导航

3) 子级别将依次在小型设备上滑动打开（简单的手风琴）

4) 在 IE 中工作！

最后一项是踢球者。我已经寄予了很多希望，结果却发现它不兼容:(

任何推荐的教程或工具将不胜感激！

非常感谢！

伦

ps 我一直在研究 Foundation 和 gumby 等响应式框架。如果有任何用于导航的小部件，我正在为这些框架描述这些 HAPPY DAY！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:55:51.933

让@media-queries 在 IE 中工作的最佳方式是[respond.js](https://github.com/scottjehl/Respond)。我在IE8+中测试过，效果很好，只是本地看不到，需要上传。

关于导航，您可以使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来调整所有内容的外观。如果您无法使用它们实现某些功能，那么您可以使用 jQuery 来显示/编写不同的导航栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:14:31.633

我为这个响应式菜单找到了一个很棒的教程，其中包含我见过的最干净的代码！

[http://webdesign.tutsplus.com/tutorials/site-elements/big-menus-small-screens-responsive-multi-level-navigation/](http://webdesign.tutsplus.com/tutorials/site-elements/big-menus-small-screens-responsive-multi-level-navigation/)

希望这会帮助其他人并节省一些搜索:)

# c - C按位和逻辑表达式计算？

> ID：12377286
> 
> 赞同：0
> 
> 时间：2012-09-11T20:18:57.537
> 
> 标签：c, expression, bit-manipulation

我一直在搞乱 C 中的逻辑和按位表达式，想知道这些是否正确？我只是为 x 和 y 选择了一些随机数，然后遍历纸上的位。

```
x=0xA5 and y=0x57
Expression  Value
  x & y     0x05
  x | y     0xF7
 ~x | ~y    0xF5
  x & !y    0x01
  x && y    0x01
  x || y    0x01
 ~x || ~y   0x01
  x && ~y   0x01 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:37:30.363

```
int main (void){
  int x = 0xA5;
  int y = 0x57;

  printf("%#x\n", x & y);
  printf("%#x\n", x | y);
  printf("%#x\n", ~x | ~y);
  printf("%#x\n", x & !y);
  printf("%#x\n", x && y);
  printf("%#x\n", x || y);
  printf("%#x\n", ~x || ~y);
  printf("%#x\n", x && ~y);
  return 0;
}

0x5
0xf7
0xfffffffa
0
0x1
0x1
0x1
0x1 
```

简短的回答，不，它们并不都是正确的。为什么？

```
x = 0000 0000 1010 0101
y = 0000 0000 0101 0111

#3:
~x      = 1111 1111 0101 1010 (0xFFFFFF5A)
~y      = 1111 1111 1010 1000 (0xFFFFFFA8)
~x | ~y = 1111 1111 1111 1010 (0xFFFFFFFA)

#4:
!y = 0
x       = 0000 0000 1010 0101
!y      = 0000 0000 0000 0000
x & !y  = 0000 0000 0000 0000 
```

你缺少的`!`是逻辑不是。应用于`!`任何非 0 值给出 0。`~`是按位否定。`~`反转 1 和 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:26:46.413

给你：http: [//ideone.com/Xe0ch](http://ideone.com/Xe0ch)（我懒得用普通的 C 语言来做，但这些操作在 C++ 中应该产生相同的结果）在线编译器是检查你的工作的最快方法 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:22:59.817

一个很好的检查方法是编写一个可以很好地打印值的程序。

```
printf("%#x",expression); 
```

[prinf函数维基百科](https://en.wikipedia.org/wiki/Printf_format_string#1970s%3a_C.2C_Lisp)

# java - 无法让我的密码实验室工作

> ID：12377292
> 
> 赞同：1
> 
> 时间：2012-09-11T20:19:14.770
> 
> 标签：java

我的 Chiper 实验室需要帮助。我的指示是：

> 编写一个程序，接受任意数量的字符串作为命令行参数，并显示那些用 Atbash 密码加密的字符串。您的程序应该尽可能模块化，并使用良好的面向对象编程技术。必须使用 javadoc 注释彻底记录您的程序。

我有`String alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";`应该对字符串进行编码，以便 A 返回 Z 而 B 将返回 Y 等等。我在 Eclipse 中做了我的密码实验室，但它没有运行。我不确定我做错了什么。

```
public class CaesarCipher {
  public static void main(String[] args) {
    CaesarCipher cc = new CaesarCipher();
  }

  public static final int ALPHASIZE = 26;
  public static final char [] alpha = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
  protected char[] encrypt = new char[ALPHASIZE];
  protected char[] decrypt = new char[ALPHASIZE];

  public CaesarCipher() {
    for (int i=0; i<ALPHASIZE; i++)
      encrypt[i] = alpha[(i + 3) % ALPHASIZE];
    for (int i=0; i<ALPHASIZE; i++)
      decrypt[encrypt[i] - 'A'] = alpha[i];
  }

  /** Encryption Method */
  public String encrypt(String secret) {
    char[] mess = secret.toCharArray();
    for (int i=0; i<mess.length; i++)
      if (Character.isUpperCase(mess[i]))
        mess[i] = encrypt[mess[i] - 'A'];
    return new String(mess);
  }

  /** Decryption Method */
  public String decrypt(String secret) {
    char[] mess = secret.toCharArray();
    for (int i=0; i<mess.length; i++)
      if (Character.isUpperCase(mess[i]))
        mess[i] = decrypt[mess[i] - 'A'];
    return new String(mess);
  }  
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:34:46.903

您的`main`方法所做的只是调用您的主要方法所在的类的构造函数。

这是非常令人困惑的代码，而且形式不是很好。

您可能想要做的是将大部分代码包含在您的 main 方法中。您可以通过将代码从那里组织到其他类中来使用“使用良好的面向对象编程技术”。

我会做的是

```
public class CaesarCipher 
{
    public static void main(String[] args) 
    {
        for(int i=0; i<args.length; i++)
        {
            Cypher cypher = new Cypher(args[i]);
            System.Out.Println(cypher.Print());
        }
    }
} 
```

然后在另一个文件中（或者同一个文件也可以）

```
public class Cypher
{
    // fields to represent your cypher

    public Cypher(String s)
    {
        //load the input string into your cypher here.  
    }

    public String Print()
    {
        //print the encrypted string
    }
} 
```

您可以选择在构造函数、打印方法或其他方式中进行加密。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T20:28:54.103

试试这个：

```
public class CaesarCipher {

    private static final int A = (int)'A';
    private static final int Z = (int)'Z';

    public static void main(String[] args) {
        for (String s : args)
            System.out.println(new Encoder(s));
    }

    private static class Encoder {
        private String encoded;
        public Encoder(String s) {
            s = s.toUpperCase();
            StringBuilder sb = new StringBuilder();
            for (char c : s.toCharArray())
                sb.append((char)(A + Z - (int)c));
            encoded = sb.toString();
        }

        @Override
        public String toString() { return encoded; }
    }

} 
```

# javascript - PERL - 不完整地下载 CSV 文件

> ID：12377293
> 
> 赞同：0
> 
> 时间：2012-09-11T20:19:18.713
> 
> 标签：javascript, perl, csv, download

我有一个服务器端脚本，它接受表单输入并登录到 Testopia（Bugzilla 插件）并使用以下方式获取描述某个测试运行的 CSV：

`Mech->get("<...>/tr_list_caseruns.cgi?ctype=csv&run_id=xxxxx", ":content-file" => "result.csv");`

浏览器链接是一些通过将 window.location 设置为此 url 来导出 CSV 的 javascript。在浏览器中手动单击链接将下载完整的 CSV，但是使用 mechanize 获取链接只会下载前 25 条记录（在浏览器中输入 url 会提示下载，也只会下载前 25 条）。链接形式为：

```
text: 'Export Results to CSV',
icon: 'extensions/Testopia/img/csv.png',
iconCls: 'img_button_16x',
handler: function(){
window.location = 'tr_list_caseruns.cgi?ctype=csv&run_id=' + run.run_id; 
```

（在 Ext.menu.Menu 中）

有没有好的方法来做到这一点？甚至键入 url 和单击链接之间的区别也会很有用。谢谢。

-凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:27:52.963

使用“Live HTTP Headers”或“FireBug”或一些这样的插件来获取一个有效的请求和一个无效的请求。然后，开始添加有效的标头，直到找到服务器想要的标头。

# jsf-2 - CommandLink 操作重定向到外部 url 不起作用

> ID：12377302
> 
> 赞同：3
> 
> 时间：2012-09-11T20:19:48.497
> 
> 标签：jsf-2

我正在使用 jsf 2。我在 facelet 文件中有一个指向外部 url 的链接。我当前的视图是 /app1/home.xhtml 与 ah:commandLink 有这样的动作

```
<h:commandLink value="#{link}" action="#{action.redirect}" target="_blank"/> 
```

action.redirect 重定向到的 url 是 /app2/info.do。然而，JSF 似乎试图将 url 的扩展名更改为 .xhtml。然后失败并显示错误消息。

com.sun.faces.context.FacesFileNotFoundException：/app2/info.xhtml 在 ExternalContext 中找不到作为资源

我如何让它正确重定向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:26:40.517

不要在[`<h:commandLink>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/commandLink.html)这里使用，这是错误的标签。它旨在提交 JSF POST 表单并导航到 JSF 视图，您显然不希望在此特定用例中发生这两种情况。

只需使用[`<h:outputLink>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputLink.html)甚至纯 HTML `<a>`。所以，

```
<h:outputLink value="#{action.redirect}" target="_blank">#{link}</h:outputLink> 
```

或者

```
<a href="#{action.redirect}" target="_blank">#{link}</a> 
```

请注意，这两种方法都不需要`<h:form>`。

# ios - MVC 一致性，从模型中呈现一个 viewController

> ID：12377305
> 
> 赞同：0
> 
> 时间：2012-09-11T20:20:16.280
> 
> 标签：ios, iphone, uiviewcontroller, modalviewcontroller

我有一个在情节提要中内置的 viewController。我还有一个 NSObject 子类，它充当我的模型，它发送和侦听 API 请求和响应。当一个方法在我的模型中触发时，我想从当时碰巧可见的任何视图中呈现我的 viewController 的模态视图。

一个例子是，如果我的 API 听到“显示此视图”，我想显示 viewController，而不管显示的是什么视图。

从概念上讲，如何做到这一点？

编辑：当我想展示我的模态视图控制器时，我不知道将显示哪个视图控制器。此外，当它出现时，我需要将参数从我的模型传递给 modalVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:33:38.567

我会从模型发送通知，告诉“某人”需要显示某些视图。

```
NSDictionary *userInfo = @{ @"TheViewKey": viewToDisplay];
[[NSNoticationCenter defaultCenter] postNotificationName:@"NotificationThatThisViewNeedsToBeDisplayed" object:self userInfo:userInfo]; 
```

然后委托（或活动视图控制器）将注册到此通知并处理显示。

```
// self is the delegate and/or the view controller that will receive the notification
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleViewToDisplay:) name:@"NotificationThatThisViewNeedsToBeDisplayed" object:nil]; 
```

如果您放入视图控制器，请记住在视图不可见时从观察者中删除 self：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"NotificationThatThisViewNeedsToBeDisplayed"]; 
```

通过这种方式，您的模型与演示文稿分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:26:14.047

您有当前的 viewController（任何 viewController 子类）使用以下方式呈现新视图：

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion 
```

编辑：要找到顶视图控制器，您向 UITabBarController 询问 selectedViewController（如果您使用 tabBarController）来获取“种子”，或者从 window.rootViewController 开始。

一旦你通过了任何 tabBarControllers，那么你应该只有 UIViewController 子类和 UINavigationControllers。您可以使用这样的循环：

```
- (UIViewController *)frontmostController:(UIViewController *)seed
{
    UIViewController *ret;
    if([seed isKindOfClass:[UINavigationController class]]) {
        ret = [(UINavigationController *)seed topViewController];
    } else
    if([seed isKindOfClass:[UIViewController class]]) {
        ret = seed.presentedViewController;
    }
    return ret ? [self frontmostController:ret] : seed;
} 
```

# python - Python - 使用正则表达式获取用户数据

> ID：12377308
> 
> 赞同：1
> 
> 时间：2012-09-11T20:20:27.650
> 
> 标签：python, regex

所以，我仍然是 regex 和 python 的新手。我一直在寻找一段时间，但不知道如何问我在寻找什么。

我需要将格式化字符串中的数据放入列表列表或字典中。

```
-------------------------------------------------------------------
Frank         114      0         0         0          0         114       
Joe           49       1         0         0          0         50        
Bob           37       0         0         0          0         37        
Sally         34       2         0         0          0         36 
```

这是脚本的输出。目前我有：

```
match_list = []
match = re.search('\n(\w+)\s+(\d*)\s+(\d*)', output)
  if match:
    match_list.append([match.group(1),
                       match.group(2),
                       match.group(3)])
>>>print match_list
[['frank', '114', '0']] 
```

这是完美的，除了我需要`match_list`返回：

```
[['frank', '114', '0'],
 ['Joe', '49', '1'],
 ['Bob', '37', '0'],
 ['Sally', '34', '2']] 
```

我最初的想法是 for 循环，并检查 match.group(1) 是否已经列出，如果是，则转到下一个，但后来我意识到我不知道该怎么做。但是你现在有了。我很难弄清楚这一点。任何帮助都会很棒！:)

哦也。列表大小发生变化。有时可能只有一个用户，有时可能有 20 个用户。所以我可以设置一个巨大的静态正则表达式。（据我所知……）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:28:18.737

您可以使用[`re.findall`](http://docs.python.org/library/re.html#re.findall)：

```
match_list = []
match = re.findall('\n(\w+)\s+(\d*)\s+(\d*)', output)
for k in match:
    #k will be a tuple like this: ('frank', '114', '0')
    match_list.append(list(k)) 
```

或与 oneliner 相同的解决方案：

```
match_list = map(list, re.findall('\n(\w+)\s+(\d*)\s+(\d*)', output)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:31:51.103

您不需要正则表达式：

```
table="""\
-------------------------------------------------------------------
Frank         114      0         0         0          0         114       
Joe           49       1         0         0          0         50        
Bob           37       0         0         0          0         37        
Sally         34       2         0         0          0         36"""

print [line.split() for line in table.splitlines()[1:]] 
```

或者，如果你想要一个正则表达式：

```
print [list(t) for t in re.findall(r'^(\w+)'+r'\s+(\d+)'*6,table,re.MULTILINE)] 
```

无论哪种情况，打印：

```
[['Frank', '114', '0', '0', '0', '0', '114'], 
 ['Joe', '49', '1', '0', '0', '0', '50'], 
 ['Bob', '37', '0', '0', '0', '0', '37'], 
 ['Sally', '34', '2', '0', '0', '0', '36']] 
```

# database - 基于布局视图的条件格式

> ID：12377315
> 
> 赞同：0
> 
> 时间：2012-09-11T20:21:00.053
> 
> 标签：database, layout, conditional, filemaker

Filemaker Pro 专家的另一个问题。我正在开发的数据库从带有多个按钮的*主*布局开始（例如插入新项目、显示所有项目等）。每个按钮都与一个脚本相关联，该脚本将用户带到相关的布局。在每个布局中，我将按钮显示在一行中，并用反色突出显示当前布局。我的问题是一些按钮导致相同的布局，以不同的模式查看，我不知道如何有条件地突出显示右侧按钮。

例如，*插入新项目*和*显示所有项目*采用相同的布局，但是在第一种情况下，脚本将布局视为表单并插入新记录，而在第二种情况下，我将其视为列表并显示所有记录。不过，布局是相同的，所以我需要基于某些东西制定条件格式。我该怎么做，我应该检查什么？

提前感谢您的帮助。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:41:07.737

大概您目前正在使用公式：`Get (LayoutName)`来决定您的条件公式，为什么不尝试另外使用公式：[`Get(WindowMode)`](http://www.filemaker.com/help/html/func_ref2.32.88.html#1032114)和[`Get(LayoutViewState)`](http://www.filemaker.com/help/html/func_ref2.32.44.html#1030154)？

如果（在浏览模式下将用户发送到 MyLayout），您可以有条件地格式化按钮：

```
Get(WindowMode)=0 and Get(LayoutName)="MyLayout" 
```

或者（在表单视图中将用户发送到 MyLayout）：

```
Get(LayoutViewState)=0 and Get(LayoutName)="MyLayout" 
```

.

其他可能有帮助的功能可能是`Get(FoundCount)`和`Get(TotalRecordCount)`。*您可以在[此处](http://www.filemaker.com/help/html/func_ref2.32.1.html#1030154)`Get`查看完整的函数列表。*

# java - Java - 彩票统计解析器

> ID：12377316
> 
> 赞同：0
> 
> 时间：2012-09-11T20:21:01.880
> 
> 标签：java, javascript, html-parsing

我正在尝试从网页解析一些*int*，但遇到了一些问题：

**1** 网页是使用 javascript 生成的。

此示例代码（Credz 到 Oracle.com。StackOverflow 不会让我链接）在执行 javascript 之前打印出 html 代码。

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL oracle = new URL("http://www.oracle.com/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

**问：**如何获取生成的html？

**2**直接进入链接时网页没有正确渲染： [这个直接链接](https://www.norsk-tipping.no/nt-keno/result/keno_result_info_print.jsp?drawID=1771&bet=10&keno_level=10 "这个直接链接")会渲染为一个空的“shell”。转到[此链接](https://www.norsk-tipping.no/resultater/keno?NT.mc_id=nt-keno-resultat)并单击**Vis utskriftsside**（左下）将打开一个新的正确渲染的窗口。

**问：**这两个链接有什么区别？如何使用直接链接访问正确呈现的网页？

**编辑**

这是生成我要抓取的数字的 HTML/JavaScript：

```
 <div id="drawNumbers" class="drawn-numbers">
 <script type="text/javascript">
    var tableData ='';
    if (opener.draw_numbers) {
        for(var i = 0; i<opener.draw_numbers.length;i++){
            tableData += '<div class="number" style="left:'+(i*28+8)+'px;">';
            tableData += '<img width="23" height="23" alt="" src="/nt-keno/result/images/res_keno_tallramme_print.gif">';
            tableData += '</div>';
            tableData +=  '<div class="number" style="left:'+(i*28+9)+'px; top:9px; z-index: 30;">' +opener.draw_numbers[i]+ '</div>';
        }
    }
    document.writeln(tableData);
</script>
</div> 
```

我可以将此数组导入java吗？

```
opener.draw_numbers[i] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:24:04.917

您正在做的事情被称为“抓取”，动态页面通常会导致问题：

[你如何抓取 AJAX 页面？](https://stackoverflow.com/questions/260540/how-do-you-screen-scrape-ajax-pages)

[在 Android 应用程序中抓取动态生成的 html](https://stackoverflow.com/questions/11093130/scraping-dynamically-generated-html-inside-android-app)

[处理由 javascript 生成的动态 HTML 的最佳 Web 抓取 Ruby on Rails 库](https://stackoverflow.com/questions/8484305/best-web-scraping-ruby-on-rails-library-that-handles-dynamic-html-produced-by-ja)

没有简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:04:05.003

该页面有一个框架，其中包含：

[https://www.norsk-tipping.no/nt-keno/result/keno_result_info.jsp?drawID=1771&bet=10&keno_level=10](https://www.norsk-tipping.no/nt-keno/result/keno_result_info.jsp?drawID=1771&bet=10&keno_level=10)

数据来自一个 json url。您可以使用 firebug 等工具看到这一点：

[https://www.norsk-tipping.no/api-keno/getResultInfo.json](https://www.norsk-tipping.no/api-keno/getResultInfo.json)

# ipad - 使用 % 而不是 px 时，Webfonts 未在 Nexus 7 上显示

> ID：12377320
> 
> 赞同：1
> 
> 时间：2012-09-11T20:21:20.910
> 
> 标签：ipad, responsive-design, percentage, pixels, nexus-7

我一直注意到，如果 Nexus 7 包含的元素已使用百分比而不是像素来调整大小，则它不会呈现 webfont。

可以想象，这对于响应式设计来说是个非常糟糕的消息。奇怪的是，在我的安卓手机上，使用相同的浏览器（Chrome），网络字体看起来很好。

有没有其他人遇到过这个问题？

**********更新****** ******

 **我想测试这个理论，所以我创建了一个包含三个 div 的测试页面——一个使用像素大小，一个使用百分比大小，最后一个使用 ems 大小。webfonts 毫无问题地出现在所有三个 div 中。然而，在我的网站上，当我将 div 的大小从百分比切换为像素时，它仍然会导致此问题。似乎仅这一点不是问题。我将继续使用更多嵌套的 div 进行测试，但如果你们中的任何人想要自己试验，这里是链接： [https ://dl.dropbox.com/u/46736730/nexus-test/nexus-test.html](https://dl.dropbox.com/u/46736730/nexus-test/nexus-test.html)

任何想法/见解都会非常有帮助！**

# java - 实例呈指数增长——吃掉内存

> ID：12377330
> 
> 赞同：1
> 
> 时间：2012-09-11T20:21:44.190
> 
> 标签：java, swing, memory-leaks, jbutton, jtogglebutton

我创建了一个扫雷游戏，每次开始新游戏时都会生成一个二维 JButton 数组。问题是内存使用量呈指数增长（JProfiler 说它是 JButtons）。似乎不仅旧的 Jbutton 实例被保存在内存中，而且实例的数量翻了一番。我怎样才能告诉它摆脱旧的 JButtons？谢谢

```
private JButton[][] but;
but = new JButton[row][col];
for (int i = 0;i<row;i++)
{    
  for (int j = 0;j<col;j++){
      but[i][j]= new JButton();
      but[i][j].setName(i+":"+j);
      mine.add(but[i][j]);
      but[i][j].addMouseListener(this);
  }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:22:49.290

这听起来像是池模式的经典用例。

在程序开始时分配一个网格的按钮，并在每个游戏中重复使用它们。

# html - HTML 元素在 Mac 上的位置正确，但在 PC 上不正确

> ID：12377331
> 
> 赞同：0
> 
> 时间：2012-09-11T20:21:46.213
> 
> 标签：html, css, positioning, css-position, sizing

我使用绝对定位将元素放置在图像的底部，它在 Mac 上看起来很棒，但在我的 PC 上定位太高，即使在两台计算机上使用相同的浏览器也是如此。在绝对定位 HTML 元素时，使用百分比、像素、em 或英寸是否最好？我对网络编程比较陌生，所以欢迎任何一般性建议。谢谢！

HTML：

```
<div class = "article">

    <div class="title" onclick = "$('.aboutMe').fadeIn(500)">
            <p class = "slide"> ABOUT ME </p>
    </div> 

    <header>
        <h1> RAMON MIGUEL "RMI" FLORES </h1>
        <h2> Welcome to my personal website! </h2>
    </header>

    <img src = "tahoe2.jpg" alt = "Dorm Trip to Tahoe" title "Lake Tahoe" id = "tahoe">

    <div class = "subImages">
        <img src = "profile.jpeg" alt = "Profile Picture" id = "profile" onclick = "$('.aboutMe').fadeIn(500)"> 

        <div class="title" id = "socialTitle" onclick = "$('.socialMedia').fadeIn(500)">
            <p class = "slide"> SOCIAL MEDIA </p>
        </div> 
        <img src = "basketball.jpeg" alt = "Me Dunking" id = "basketball" onclick = "$('.socialMedia').fadeIn(500)">

        <div class="title" id = "contactTitle" onclick = "$('.contactMe').fadeIn(500)">
            <p class = "slide"> CONTACT ME </p>
        </div> 
        <img src = "contact.jpeg" alt = "Contact Me" id = "contact" onclick = "$('.contactMe').fadeIn(500)">
    </div>

    <footer>
        <p> &copy Ramon Flores 2012 </p>
    </footer>

</div> 
```

CSS：

```
 body {
        background-color: #EDEDF3;
    }

    .article {
        border: 1px solid rgba(255, 204, 204, 0.25);
        background-color: #FFF;
        width: 80%;
        margin: 20px auto;
        padding: 0 20px;
        -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        border-radius: 25px;
        -moz-border-radius: 25px;
    }

    h1 {
        font-size: 65px;
        font-family: 'Quicksand', sans-serif;
        font-weight: 100;
        text-align: center;
        color: #333;
        text-shadow: -2px 2px 5px rgba(0, 0, 0, 0.3);
        letter-spacing: 0;
        margin-bottom: 0;
    }

    h2 {
        font-size: 20px;
        font-family: 'Raleway', 'Quicksand', sans-serif;
        font-weight: lighter;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        text-align: center;
        color: black;
        letter-spacing: 0;
    }

    #tahoe {
        width: 98.7%;
    }

    .article img {
        border: 5px solid #EDEDF3;
    }

    #profile, #basketball, #contact {
        width: 32%;
        height: 4.7in;
        border-radius: 25px;
        -moz-border-radius: 15px;
    }

    .subImages {
        display: inline;
    }

    footer {
        font-size: 15px;
        color: #B28F8F;
        text-align: center;
        font-family: 'Raleway', sans-serif;
    }

    footer p:hover { 
        color: black; 
        -webkit-transition: all 0.5s ease-in;
        -moz-transition: all 0.5s ease-in;
        -o-transition: all 0.5s ease-in;
        transition: all 0.5s ease-in;   
    }

    .title {
        background-color: #66CCFF;
        width: 26%; 
        color: white;
        font-family: 'Quicksand', sans-serif;
        text-align: center;
        font-size: 30px;
        border-bottom-right-radius: 20px;
        border-bottom-left-radius: 20px;
        -moz-border-bottom-right-radius: 20px;
        -moz-border-bottom-left-radius: 20px;
        text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
        position: absolute;
        top: 1127px;
    }

    #socialTitle { left: 36.9%; }

    #contactTitle { left: 63.3%; } 
```

对不起，如果有很多代码。我很新，我不确定问题可能出在哪里，所以我只是发布了很多。我想将“.title”元素放在“.subImages”类中 3 个图像的底部。这在 Mac 上的所有浏览器上都可以正常工作，但“.title”元素在 PC 上的所有浏览器上放置得太高了。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:46:24.010

无论您使用像素还是英寸都没有关系：如果您希望元素位于底部，请使用`bottom: 0`;

请参阅此小提琴，其中图像位于容器 div 内。标题位于容器底部的图像上方。我使用了颜色和半透明，因此您可以看到标题实际上位于“图像”上方。

[http://jsfiddle.net/GolezTrol/wp3Fd/](http://jsfiddle.net/GolezTrol/wp3Fd/)

# r - R中的reshape与reshape2

> ID：12377334
> 
> 赞同：50
> 
> 时间：2012-09-11T20:22:00.927
> 
> 标签：r, reshape, reshape2

我试图理解为什么开发已经从包转向`reshape`了。`reshape2`它们在功能上似乎相同，但是，`reshape2`由于服务器上运行的 R 版本较旧，我无法升级到当前版本。我担心一个重大错误的可能性，它会将开发转移到一个全新的包，而不是简单地继续开发`reshape`. 有谁知道`reshape`包裹是否有重大缺陷？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-11T22:50:34.007

`reshape2`让 Hadley 以`reshape`更快的方式重新启动，同时避免破坏人们的依赖和习惯。

[https://stat.ethz.ch/pipermail/r-packages/2010/001169.html](https://stat.ethz.ch/pipermail/r-packages/2010/001169.html)

> Reshape2 是 reshape 包的重新启动。自该软件包第一次发布以来已经过去了五年多，在那段时间里，我学到了很多关于 R 编程以及如何在 R 中处理数据的知识。Reshape2 使用这些知识制作了一个新的软件包来重塑数据，更专注，更快。
> 
> 此版本以牺牲功能为代价提高速度，因此我将其重命名`reshape2`以避免给现有用户带来问题。根据用户反馈，我可能会重新引入其中一些功能。
> 
> 有什么新的`reshape2`：
> 
> *   由于更好的底层算法可以最大程度地使用子集的功能和速度，因此速度更快，内存效率更高，在大多数情况下只制作数据的单个副本。
>     
>     
> *   cast 被两个函数替换，具体取决于输出类型： `dcast` 生成数据帧和`acast`生成矩阵/数组。
>     
>     
> *   多维边距现在是可能的：`grand_row`并且 `grand_col`已被删除：现在边距的名称是指其值设置为 (all) 的变量。
>     
>     
> *   一些功能已被删除，例如`|`强制转换运算符，以及从聚合函数返回多个值的能力。我有理由确定 plyr 可以更好地执行这两个操作。
>     
>     
> *   一种新的强制转换语法，它允许您根据
>     变量的函数进行重塑（基于与 plyr 相同的基础语法）：
>     
>     
> *   更好的开发实践，例如命名空间和测试。

# android - Android中不同进程上运行的服务之间的通信？

> ID：12377341
> 
> 赞同：3
> 
> 时间：2012-09-11T20:22:16.187
> 
> 标签：android, service, process, listener

我创建了一个在它自己的进程上运行的服务。该服务将自己注册为 ClipboardManager 的侦听器。一切正常，每当将新内容复制到剪贴板时，都会调用我服务上的回调方法来捕获新的剪辑数据。

我的问题是，尽管这两个服务在两个不同的进程上运行并且我没有实现 iBinder 的任何 AIDL，但它们如何相互通信？！！

谢谢，，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:14:51.657

发送广播并在其他服务中注册广播接收器可能是一个简单的解决方案：

发送广播： http: [//developer.android.com/reference/android/content/Context.html#sendBroadcast(android.content.Intent)](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)

注册广播接收器：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

如果您需要使用共享的 ContentProvider 交换和保存数据，也可能是一种解决方案。其他服务可以注册一个 ContentObserver 以获取有关新/更新数据的通知。

# google-chrome-extension - 在不修改标记的情况下突出显示文本框中的文本

> ID：12377342
> 
> 赞同：0
> 
> 时间：2012-09-11T20:22:15.993
> 
> 标签：google-chrome-extension, firefox-addon, highlighting

我想知道是否可以为浏览器编写一个扩展来更改文本的颜色，或者在不修改标记的情况下对其进行转换（下划线、粗体等）。

举个例子：

**HTML**

```
<p>Extensions use JS, and have to modify the DOM<p> 
```

**默认渲染**

扩展使用 JS，并且必须修改 DOM

**所需的渲染**

扩展使用 JS，并且***必须***修改 DOM

现在，我知道扩展可以修改 DOM，为了得到我想要的，我可以得到类似的东西：

```
<p>Extensions use JS, and <html:span style="font-weight: bold; font-style: italic;">have</html:span> to modify the DOM</p> 
```

所以，我想要做的根本不是改变标记。这类似于您在页面上执行“查找”时获得的“突出显示所有”功能。

# 当前解决方案

我找到了一个适合我的问题的可行解决方案的扩展： [全是文本！](https://addons.mozilla.org/en-US/firefox/addon/its-all-text/contribute/roadblock/?src=dp-btn-primary&version=1.6.4)

虽然我仍然希望在不修改标记的情况下突出显示本机浏览器，但这会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:52:00.180

您可以注入 CSS 以使现有标记的行为有所不同（例如，`p { font-weight:bold; }`将所有元素加粗`<p>`，或`.foo { background-color: green }`使用类更改所有元素`foo`等），但几乎可以肯定没有扩展级别的方法来完成您想要的。如果要修改页面上的任意文本，则必须修改页面的标记。

做你想做的事情的唯一方法是破解一些低级代码并实际重写 WebKit 和 Gecko 的部分内容，以便 HTML 的呈现方式与应有的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:47:44.497

I found an extension which fits as a viable solution to my problem: [It's All Text!](https://addons.mozilla.org/en-US/firefox/addon/its-all-text/contribute/roadblock/?src=dp-btn-primary&version=1.6.4)

While I would still like to have native browser highlighting, without modifying the markup, this will do fine.

This pulls it out of the page, into an editor, and syncs them up. Works beautifully.

# c++ - 指向成员函数的函数指针

> ID：12377344
> 
> 赞同：3
> 
> 时间：2012-09-11T20:22:21.503
> 
> 标签：c++, function-pointers, member-function-pointers, nlopt

我想使用一个库（nlopt），它有一个函数 set_min_objective，它接受一个指向数值函数 myfunc 的指针并找到它的最小值。我想创建一个包含适当初始化的成员函数的类。然后 set_min_objective 将在特定实例中找到最佳值（以下示例中的 myP）。调用顺序为：

```
opt.set_min_objective(myfunc, NULL); 
```

我想使用类似的东西：

```
opt.set_min_objective(myP.f, NULL); 
```

我在编译时得到的错误是：

```
main.cpp: In function 'int main()':
main.cpp:79:34: error: no matching function for call to 'nlopt::opt::set_min_objective(<unresolved overloaded function type>, NULL)'
../lib/nlopt.hpp:335:10: note: candidates are: void nlopt::opt::set_min_objective(double (*)(unsigned int, const double*, double*, void*), void*)
../lib/nlopt.hpp:342:10: note:                 void nlopt::opt::set_min_objective(double (*)(const std::vector<double>&, std::vector<double>&, void*), void*)
../lib/nlopt.hpp:368:10: note:                 void nlopt::opt::set_min_objective(double (*)(unsigned int, const double*, double*, void*), void*, void* (*)(void*), void* (*)(void*)) 
```

让 set_min_objective 接受 myP.f 作为指向函数的普通指针的最简单解决方案是什么？请注意，myP.f 和 myfunc 具有相同的参数和返回值类型。

谢谢，

京东

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:38:12.967

你不能直接这样做。您正在尝试将指向成员函数的指针作为指向函数的指针传递。要走的路是编写一个包装函数（一个普通函数），例如，将计算委托给您的对象的成员函数，例如，一个全局对象。

编辑

实际上，您很幸运：第二个参数`opt.set_min_objective`是指向您的数据的指针，该指针将传递给您将指针作为第一个参数传递给的函数。这意味着您的包装函数不必使用全局对象。

```
class YourClass
{
public:
    double f(unsigned int i, const double*, double*, void*);
};

double wrapper(unsigned int i, const double* a, double* b, void* o) {
    // not sure what you'd need the last param for, but you say you have it...
    reinterpet_cast<YourClass*>(o)->f(i, a, b, o);
} 
```

进而：

```
YourClass myP;
opt.set_min_objective(wrapper, &myP); 
```

另一个编辑。在您之前有人遇到过类似的问题：[http ://www.cplusplus.com/forum/general/73166/](http://www.cplusplus.com/forum/general/73166/)

# maven - intellij 没有采用 Maven 项目结构

> ID：12377348
> 
> 赞同：0
> 
> 时间：2012-09-11T20:22:35.140
> 
> 标签：maven, intellij-idea

我在 Intellij 122.327 中有一个 mavenized java 项目。不幸的是（由于遗留代码） src 目录中的某些代码使用了 test 目录中的测试。我正在尝试删除这些依赖项，但这是一个漫长的过程。同时，我可以通过使用[build-helper](http://mojo.codehaus.org/build-helper-maven-plugin/) maven 插件并添加 src/test/java 作为源来编译和部署：

```
 <execution>
                <id>add-test-dir-source</id>
                <phase>generate-sources</phase>
                <goals>
                    <goal>add-source</goal>
                </goals>
                <configuration>
                    <sources>
                        <source>src/test/java</source>
                    </sources>
                </configuration>
            </execution> 
```

问题是每当我重新启动 Intellij 时，它都会将 src/test 目录标记为“test”目录（如果我转到 Project Structure -> Modules -> Sources，src/test 会标记为绿色）。所以每次我必须手动将 test/java 标记为“Sources”。有没有办法将其永久标记为来源？更好的是，Intellij 是否有办法从 pom 中读取并推断项目结构？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-12T05:33:59.170

检查[日志](https://intellij-support.jetbrains.com/hc/articles/207241085)以了解任何相关异常。此问题可能有很多原因，例如具有自签名证书的代理、无效的 VM 选项、网络问题等。另请参阅[此答案](https://stackoverflow.com/a/42427510/104891)。

如果问题仍然存在，请[联系支持](https://intellij-support.jetbrains.com/hc/requests/new)并附上日志。

# opengl - OpenGL 扩展有什么作用？

> ID：12377351
> 
> 赞同：0
> 
> 时间：2012-09-11T20:22:43.777
> 
> 标签：opengl, gpu

[我在OpenGL](http://www.opengl.org/registry/#arbextspecs)中遇到过很多这样的 GPU 编程。他们是如何工作的。来自超链接（OpenGL 注册表）的工作示例会有所帮助。怎么能写出这样的扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:58:15.953

> 他们是如何工作的。

通过阅读扩展规范，了解新函数/枚举器/GLSL 添加的功能，OpenGL 扩展“起作用”。然后使用适当的[OpenGL 加载库](http://www.opengl.org/wiki/OpenGL_Loading_Library)来检查扩展是否可用。如果是，您可以*在该 OpenGL 实现*的程序中使用这些函数/枚举器/GLSL 添加。

如果它是一个与 GLSL 交互的扩展，那么你必须做更多的工作。您的着色器必须编写为需要扩展（因此如果扩展不可用，将无法编译）。它必须[明确说明](http://www.opengl.org/wiki/GLSL_Core_Language#Extensions)它使用了哪些扩展。

> 来自超链接（OpenGL 注册表）的工作示例会有所帮助。

不，有很多[OpenGL 加载库](http://www.opengl.org/wiki/OpenGL_Loading_Library)可以加载可用的扩展并提供枚举器等。使用其中之一。

> 怎么能写出这样的扩展？

你没有。至少，不是一个*工作*的。

OpenGL 只不过是一个规范，一个可以阅读的 PDF 文件。当人们希望人们在他们的硬件上使用 OpenGL 时，他们会编写 OpenGL 的实现*。*

OpenGL 扩展很像 OpenGL 本身。无非是[一套文件](http://www.opengl.org/registry/#arbextspecs)。一个实现可能会*公开*一些扩展集，但它们是否公开取决于该实现的编写者。不是它的*用户*。

您可以使用可用的格式编写 OpenGL 扩展。但这只是另一个文件。但是可能性*非常*好，没有人会实施它。因此，它只是互联网上的一个文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:45:53.177

> 他们是如何工作的。

您在现代操作系统上找到的 OpenGL 库仅涵盖了一个非常基本的 OpenGL 版本。通常介于 OpenGL-1.1 到 OpenGL-1.5 之间。OpenGL 驱动程序想要向用户应用程序公开的任何现代特性都是通过*扩展机制*提供的。

扩展机制是 GPU 驱动程序公开比标准系统 OpenGL 接口库提供的更新或更高级的功能的一种方法。

*（由于 Nicol Bolas 的评论而更新）：重要的是要理解，***扩展**和扩展**机制**之间是有区别的。扩展机制是`{glX,wgl,…}GetProcAddress`最初与最早的 OpenGL 版本一起引入的用于公开扩展的函数（这些函数不是 OpenGL 的一部分，但操作系统支持设置 OpenGL 上下文所需的基础设施）。后来他们升级到功能齐全的 API 访问，但名称卡住了（例如库 GLEW，即 GL Extension Wrangler，被命名为加载扩展，但它加载常规但更高版本的 OpenGL 版本的功能，这本身不是扩展，以及）。

*扩展*是不属于给定 OpenGL 规范的一部分，但在所述 OpenGL 规范的实现中可用的功能。更高的 OpenGL 版本可能会在规范中包含扩展。但是，更高版本的 OpenGL 对基于功能的扩展进行某些更改也是很常见的。

GL_TEXTURE_3D 或 GL_TEXTURE_CUBE_MAP 之类的纹理类型已成为后续 OpenGL 版本的一部分而没有被更改的一个很好的例子。

> 来自超链接（OpenGL 注册表）的工作示例会有所帮助。

你的意思是如何*使用*这样的扩展？

> 怎么能写出这样的扩展？

我认为你在这里混淆了一些东西：编写这样的扩展不是 OpenGL 用户的任务。OpenGL 扩展不是向给定 OpenGL 实现添加新功能的方法。

恰恰相反。一个 OpenGL 实现已经可以比系统库和/或它所基于的 OpenGL 规范中包含的功能更多，通过扩展提供其高级功能。

如果您想编写自己的扩展，那么因为您是一名 OpenGL 驱动程序开发人员，您的任务是为用户提供最新一代 GPU 的超级新功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:31:40.627

[OpenGL 扩展](http://www.opengl.org/wiki/OpenGL_Extensions)：

> OpenGL 扩展是 OpenGL 实现提供 OpenGL 核心不提供的新功能或扩展功能的一种手段。不应将使用扩展视为应避免的事情；它应该被接受为 OpenGL 用户的标准做法。
> 
> 一些扩展公开了只有一个特定硬件供应商公开的功能，但许多扩展由多个实现实现。有一种机制可以确定可以从特定实现中获得哪些扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T20:46:10.683

除非您正在制作自己的 GPU 硬件或编写软件 OpenGL 实现，否则您不会编写自己的 OpenGL 扩展。扩展其实只是硬件厂商随意实现的一个规范。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T21:08:54.253

OpenGL 扩展基本上是指示某个 GPU 能够做什么的标志。这些知识可能使您可以利用该功能，尽管根据您的问题，我现在暂时忽略它们，因为它们仅在您想做特定的事情时才有用。另请注意，依赖某个扩展可能会排除大部分 GPU，否则这些 GPU 可能会毫无问题地运行您的应用程序。

# jquery - 用一个包裹 , 但如果有父级并且是, 则包裹锚点

> ID：12377355
> 
> 赞同：1
> 
> 时间：2012-09-11T20:22:58.720
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:26:43.977

这很难看，但它应该作为您的第二个选择器：

```
$('img:not(a img)'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:35:17.227

像这样的东西应该工作：

```
​$('#post img')​.each(function() {
    if ($(this).parent().is('a')) {
        $(this).parent('a')
               .wrap('<div class="imagewrap" />');
    }else{
        $(this).wrap('<div class="imagewrap" />');
    }
    $(this).after('<div class="overlay"></div>');
}​);​ 
```

遍历所有图像，`<a>`如果有父元素则包裹父元素，否则包裹图像元素，并`<img>`在两个实例中的标记后添加叠加层。

或者，如果您更喜欢将其包装在一个语句中：

```
$('#post img').map(function() {
        return $(this).parent('a').length?$(this).parent('a'):$(this);
    }).wrap('<div class="imagewrap" />').end()
      .after('<div class="overlay"></div>') 
```

# iphone - UIModalTransitionStylePartialCurl 在 iOS 5 中对子类元素表现得很奇怪

> ID：12377357
> 
> 赞同：0
> 
> 时间：2012-09-11T20:23:01.113
> 
> 标签：iphone, uimodaltransitionstyle

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:41:23.760

看起来您的视图框架的设置`CATransaction`被部分页面卷曲动画创建并被动画所捕获。由于框架至少不应该出现`CGRectZero`在您发布的代码中，这似乎是 iOS 5 中的一个错误。尤其是基于[您链接的答案](https://stackoverflow.com/a/9149452/927947)收到的赞成票数量。这个答案很好地描述了这个问题。

本质上，如果您通过调用它来强制新视图立即布局，`[self layoutIfNeeded]`则会强制视图系统意识到这些是当前帧值而不是动画到的那些值。然后即使这个错误仍然试图动画它是一个非操作。从 A 帧到 A 帧的动画最糟糕的是难以察觉。而且由于“buggy”动画将与 curl 动画同时完成，因此（实际上）对您而言并不重要。除了莫名其妙地调用`layoutIfNeeded`in `viewDidLoad`。

# c++ - Netbeans 7.2 中无法识别的命令行选项“-std=c++11”c++

> ID：12377358
> 
> 赞同：6
> 
> 时间：2012-09-11T20:23:03.717
> 
> 标签：c++, gcc, netbeans, c++11, netbeans-7.2

我正在尝试使用 C++11。通过互联网筛选后，我发现我所要做的就是右键单击我的项目 -> 属性并在“C++ 标准”下选择 c++ 11。当我使用 C++ 11 运行程序时，我收到此错误“无法识别的命令行”选项`-std=c++11`。人们说的一种解决方案是添加`-g -std=c++0x`“附加选项”，但随后我得到“无法识别的命令行选项” `-std=c++0x`。我已经下载了 gcc-4.7.1.tar.gz 但我不知道如何处理它。

有谁知道如何摆脱这个错误或知道如何使 net beans 用 c++11 编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-15T05:33:17.337

将您的 gcc 版本提升到 4.7+。自 gcc4.3 起支持 c++0x，自 gcc4.7 起支持 c++11

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-26T06:24:51.563

通过 Netbeans IDE 进行配置的步骤：

1.  右键单击项目并转到属性
2.  转到构建 - > C++编译器
3.  在右侧面板中，很少有选项转到基本选项-> C++ 标准将其值从 C++ 11 更改为 C++ 98

# .net - 组件“XML 源”无法处理 XML 数据。模棱两可的复杂类型定义。元素“%”有多个名为“%”的成员

> ID：12377361
> 
> 赞同：0
> 
> 时间：2012-09-11T20:23:07.990
> 
> 标签：.net, xml, ssis, sql-server-2008-r2

我正在尝试使用 SSIS 加载 XMl 文件。我有我的示例 XML 和相应的 XSD。

在我的 SSIS 包 XML Soruce 中，提供了输入 XML 文件路径和 XSD 路径，当我尝试查看列时，我收到以下错误

> 组件“XML 源”无法处理 XML 数据。模棱两可的复杂类型定义。元素“childusages”有多个名为“usages”的成员

我尝试使用 .Net（C# 或 VB）验证 XML 和相应的 XSD，它通过了验证。

示例 XML 文件：

```
<gmx-rcc>
 <statement>
  <summaryAccountName>test test</summaryAccountName>
  <accounts>
   <account>
    <accountnumber>abcdefghijk</accountnumber>
    <meters>
     <meter>
      <mnumber>a123456</mnumber>
      <usages>
       <usage>
       <actualUsage>1234</actualUsage>
       <childUsages>
        <usage><actualUsage>1234</actualUsage></usage>
        <usage><actualUsage>1234</actualUsage></usage>
        <usage><actualUsage>1234</actualUsage></usage>
       </childUsages>
       </usage>
      </usages>
     </meter>
    </meters>
   </account>
  </accounts>
 </statement>
 </gmx-rcc> 
```

对应的 XSD：

```
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:element name="gmx-rcc">
  <xsd:complexType >
   <xsd:sequence maxOccurs="unbounded" minOccurs="0">
    <xsd:element type="statement" name="statement"/>
   </xsd:sequence>
  </xsd:complexType>
 </xsd:element>
 <xsd:complexType name="statement" >
  <xsd:choice maxOccurs="unbounded" minOccurs="0">
   <xsd:element name="summaryAccountName" type="xsd:string"/>
   <xsd:element ref="accounts"/>
  </xsd:choice>
 </xsd:complexType>
 <xsd:element name="accounts">
  <xsd:complexType>
   <xsd:sequence maxOccurs="unbounded" minOccurs="0">
    <xsd:element name="account" type="account"/>
   </xsd:sequence>
  </xsd:complexType>
 </xsd:element>
 <xsd:complexType name="account" >
  <xsd:choice maxOccurs="unbounded" minOccurs="0">
   <xsd:element name="accountnumber" type="xsd:string"/>
   <xsd:element ref="meters"/>
  </xsd:choice>
 </xsd:complexType>
 <xsd:element name="meters">
  <xsd:complexType>
   <xsd:sequence maxOccurs="unbounded" minOccurs="0">
    <xsd:element name="meter" type="meter"/>
   </xsd:sequence>
  </xsd:complexType>
 </xsd:element>
 <xsd:complexType name="meter" >
  <xsd:choice maxOccurs="unbounded" minOccurs="0">
   <xsd:element name="mnumber" type="xsd:string"/>
   <xsd:element ref="usages"/>
  </xsd:choice>
 </xsd:complexType>
 <xsd:element name="usages">
  <xsd:complexType>
   <xsd:sequence maxOccurs="unbounded" minOccurs="0">
    <xsd:element name="usage" type="usage"/>
   </xsd:sequence>
  </xsd:complexType>
 </xsd:element>
 <xsd:complexType name="usage" >
  <xsd:choice maxOccurs="unbounded" minOccurs="0">
   <xsd:element name="actualUsage" type="xsd:decimal"/>
   <xsd:element ref="childUsages"/>
  </xsd:choice>
 </xsd:complexType>
 <xsd:element name="childUsages">
  <xsd:complexType >
   <xsd:sequence maxOccurs="unbounded" minOccurs="0">
    <xsd:element name="usage" type="usage"/>
   </xsd:sequence>
  </xsd:complexType>
 </xsd:element>
 </xsd:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:27:37.717

我认为 SSIS Source 组件无法理解 XSD 是否包含自定义类型（在本例中为 name="account" **type="account"**）。

但是我们仍然可以通过简单的步骤使用 XSLT 解析 XML

1.  使用 XML Task 验证 XML 和 XSD
2.  XSLT 操作简化 xml 数据，然后将其传递给 xml 源。

参见示例：

[http://www.rad.pasfu.com/index.php?/archives/21-XML-Task-Changing-Style-of-Data-XSLT.html](http://www.rad.pasfu.com/index.php?/archives/21-XML-Task-Changing-Style-of-Data-XSLT.html)

-维奈

# javascript - 是否有一个抽象层，所以我可以集成一次并使用 pusher、pubnub 或 faye？

> ID：12377364
> 
> 赞同：2
> 
> 时间：2012-09-11T20:23:28.897
> 
> 标签：javascript, ruby-on-rails-3, faye, pusher, pubnub

我正在考虑在我的 rails 3 应用程序中使用实时通知，但我希望能够从[faye](http://faye.jcoglan.com/)开始，如果速度开始成为问题，可能会在稍后切换[推送器](http://pusher.com/)或[pubnub 。](http://www.pubnub.com/)是否有宝石或其他东西可以帮助我将其抽象出来？我想我还需要一些javascript，所以我实际上可以在客户端进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T10:43:14.970

为了实现这一点，您需要在两层进行抽象。

1.  客户端，例如 JavaScript
2.  服务器，例如 Ruby

我可以看到这一层的价值。但是，Pusher 和 PubNub API 非常简单，因此在它们之间进行交换并不困难。也就是说，服务提供的功能存在一些差异，因此您将无法抽象这些功能。不过，对于“提及和评论回复的用户通知”，你会没事的。

[我查看了使用chat-js](https://github.com/leggetter/chatjs)在特定领域构建抽象。它可能是一个有趣且相关的参考，尽管它现在只有一个 PusherAdapter。

# c# - 来自未知类的对象，使用类中的方法

> ID：12377365
> 
> 赞同：0
> 
> 时间：2012-09-11T20:23:29.813
> 
> 标签：c#, class, object, methods, delegates

这是我的问题：首先，我创建了一个类`cyclicModel`，我想通过委托在主类中使用它的方法。在`cyclicModel`课堂上，我应该使用另一种方法，即在单调类中定义的。我有很多单调的课程`(monotonic1, monotonic2,...)`。应该使用的单调类的类型由用户在主类中指定。如何调用用户在 cyclicModel 类中选择的单调模型？！

# c# - C# XmlWriter 到 StringBuilder HTML 实体

> ID：12377367
> 
> 赞同：0
> 
> 时间：2012-09-11T20:23:44.883
> 
> 标签：c#, xml, linq-to-xml, stringbuilder, xmlwriter

我目前正在向 XML 文件添加一个新节点。由于节点必须稍微动态，我创建了一个 StringBuilder 并使用 XmlWriter 来创建节点：

```
StringBuilder newDateXML = new StringBuilder();
XmlWriter newDateXMLWriter = XmlWriter.Create(newDateXML, xmlWriterSettings);
newDateXMLWriter.WriteStartElement("Dates");
newDateXMLWriter.WriteElementString("type", "UNDEFINED");
newDateXMLWriter.WriteElementString("value", "YYYYMMDD");
newDateXMLWriter.WriteStartElement("additionalDateFields");
newDateXMLWriter.WriteStartElement("AdditionalDateFields");
newDateXMLWriter.WriteAttributeString("order", "1");
newDateXMLWriter.WriteElementString("type", "Original Type");
newDateXMLWriter.WriteElementString("value", "Date Added");
newDateXMLWriter.WriteEndElement();
newDateXMLWriter.WriteEndElement();
newDateXMLWriter.WriteEndElement();
newDateXMLWriter.Flush(); 
```

每当我想添加节点时，我都会使用这些来替换我想要的值并将其添加到文件中：

```
x4.Add(newDateXML.ToString().Replace("YYYYMMDD", dictionary[x3.Element("value").Value])); 
```

其中 x4 是 XElement，x3 是包含我的查找值的 XElement。

问题是我相信将这些添加为字符串会将我的 '>' 变成 < 和 '>' 到 > ;

为了解决这个问题，我尝试像这样替换它们：

```
foreach (XElement x in currentXML.Descendants("NameAddressRecord"))
{
    newXML.WriteRaw(x.ToString().Replace("&lt;", "<").Replace("&gt;", ">"));
} 
```

但是我遇到了一个问题，一些其他数据实际上正在使用这些符号并且转换它们会破坏 XML 完整性。有没有什么方法可以轻松地替换掉这个值而不会丢失 XML 格式并且每次我想使用它时都不必重新创建这个节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:00:43.873

您可以使用`XElement.Parse()`来获得正确的格式：

```
x4.Add(XElement.Parse(newDateXML.ToString().Replace("YYYYMMDD", "20120908"))); 
```

我试过这个，`LinqPad`它似乎在做正确的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:29:10.703

您可以尝试使用 WriteCData

伪：

```
newXml.WriteStartElement(x)
newXml.WriteCData(mySTringToStore)
newXml.WriteEndElement 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:55:40.647

是的，您需要将其写为 Cdatastring。CDATA 中包含的任何内容，解析器都会忽略它。所以任何像你提到的那样的javascript代码或值都应该在CDATA部分

# php - PHP 提交按钮不起作用。

> ID：12377368
> 
> 赞同：5
> 
> 时间：2012-09-11T20:23:48.037
> 
> 标签：php, html

```
<?php
if(isset($_POST['submit'])){
header('Location: http://www.rate.ee');
}
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>
        </title>
    </head>
    <body>
        <input type="submit" name="submit" id="submit" class="button" value="Submit"/>
    </body>
</html> 
```

这是我的代码。很简单，不是吗。但它不起作用，我不明白.. 我一直认为 PHP 只在我加载页面时执行，但是我使用相同代码的另一个页面在没有 JS 的情况下工作得很好..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T20:25:01.233

您需要将按钮包装在`<form>`标签中：

```
<form action="" method="post">
<input type="submit" name="submit" id="submit" class="button" value="Submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:24:24.497

您需要一个围绕输入的表单。

```
<body>
<form action="welcome.php" method="post">
  <input type="submit" name="submit" id="submit" class="button" value="Submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:24:56.053

您没有表单标签，即使您这样做了，也需要 method="post" 属性。

```
<form method="post" action="<?php echo $_SERVER[PHP_SELF]?>">
    <input type="submit" name="submit" id="submit" class="button" value="Submit"/>
</form> 
```

# jquery - jQuery产品过滤功能

> ID：12377371
> 
> 赞同：0
> 
> 时间：2012-09-11T20:23:59.710
> 
> 标签：jquery, filter, hide, show

对于我正在创建的动态显示产品的页面，我需要创建一个排序的产品过滤器。单击 ul#product-filter 中的 li 元素将显示/隐藏相应的 div（产品类别）。

查看我的 HTML 代码：

```
<ul id="product-filter">
    <li class="cat_1">category 1</li>
    <li class="cat_2">category 2</li>
</ul>

<div id="product-display">
    <div class="cat_1">
        <img src="image1.gif">
    </div>

    <div class="cat_2">
        <img src="image2.gif">
    </div>
</div> 
```

目前我的 jQuery 解决方案是：

```
$('#products-filter li[class^=cat_]').click(function() {
    $('#products-display div[class=' + $(this).attr('class') + ']').fadeToggle();
}); 
```

但是，这只会淡化切换所选类别（产品类别 div）。客户已请求单击初始类别 ('li') 将隐藏所有其他“产品类别” div 并仅显示所选内容。单击另一个（'li'）类别也将显示第二个产品 div，仍显示先前选择的.. 等等。重新单击相同的 'li' 项目将再次隐藏类别.. 等等。

“重置”按钮也是理想的选择。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:29:03.070

我认为这实现了第一次点击的“客户端请求行为”只显示点击的项目，随后的点击只是切换点击的项目（让其他项目保持原样）：

```
var clickOnce = false;
$('#product-filter li').click(function() {
    if (!clickOnce) {
        $('#product-display > div').hide();
        $('#product-display .' + this.className).show();
        clickOnce = true;
    } else {
        $('#product-display .' + this.className).toggle();
    }
});​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/KHeVp/](http://jsfiddle.net/jfriend00/KHeVp/)

要仅显示单击的内容并隐藏所有其他内容（更传统的行为），您可以使用以下命令：

```
$('#product-filter li').click(function() {
    $('#product-display > div').hide();
    $('#product-display .' + this.className).show();
});​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/Tcjam/](http://jsfiddle.net/jfriend00/Tcjam/)

或者用动画：

```
$('#product-filter li').click(function() {
    $('#product-display > div:visible').slideUp();
    $('#product-display .' + this.className).stop(true).slideDown();
});​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/ZThzA/](http://jsfiddle.net/jfriend00/ZThzA/)

# java - 使用 Java 在 Linux 上执行 DHCP

> ID：12377373
> 
> 赞同：2
> 
> 时间：2012-09-11T20:24:07.043
> 
> 标签：java, linux, dhcp

我正在尝试在 java 中开发一个 DHCP 客户端应用程序，该应用程序可以在端口 68 上接收 DHCP 提供和确认，而无需以 root 身份运行。我知道绑定到端口 <1024 的 linux 限制。有哪些可用选项？

[编辑] 应用程序可以发送 DHCP 发现和请求。它需要能够从使用自定义 DHCP 选项的 DHCP 服务器接收 DHCP 提供和确认。一旦 DHCP 过程完成，应用程序将不会修改任何系统信息，但它会执行“自定义”操作。

[编辑] 有没有办法配置 DHCP 守护程序以将接收到的数据包转发到应用程序，例如如何配置 SNMP 守护程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:30:29.777

好吧，在您的情况下，您的选择有点有限。

根据[RFC](http://www.faqs.org/rfcs/rfc2131.html)，客户端和服务器都需要监听特权端口。

另一件事是 - DHCP 客户端通常会更改系统信息，例如 IP 地址、域名、主机名等，因此如果您的客户端不以 root 身份运行，它唯一能够实现的就是接收报价和acks 并且对这些信息无所作为。

[编辑]

还有一件事 - DHCP 服务器不会单独向您发送报价。通常客户端发送一个 DHCP 请求，服务器尝试将其 MAC 地址与配置的主机和/或主机组匹配，然后发送一个提议。

我为非特权用户找到了一个 DHCP 实现：[http ://code.google.com/p/ndhcp/wiki/ClientREADME](http://code.google.com/p/ndhcp/wiki/ClientREADME)

它使用以下 C 代码来删除特权：

```
void drop_root(uid_t uid, gid_t gid)
{
    if (uid == 0 || gid == 0) {
        log_line("FATAL - drop_root: attempt to drop root to root?\n");
        exit(EXIT_FAILURE);
    }

    if (getgid() == 0) {
        if (setregid(gid, gid) == -1) {
            log_line("FATAL - drop_root: failed to drop real gid == root!\n");
            exit(EXIT_FAILURE);
        }
    }

    if (getuid() == 0) {
        if (setreuid(uid, uid) == -1) {
            log_line("FATAL - drop_root: failed to drop real uid == root!\n");
            exit(EXIT_FAILURE);
        }
    }

    /* be absolutely sure */
    if (getgid() == 0 || getuid() == 0) {
        log_line("FATAL - drop_root: tried to drop root, but still have root!\n");
        exit(EXIT_FAILURE);
    }
} 
```

我想 Jon Lin 的建议应该适用于这种情况。一个警告 - 我假设它需要以root 身份**启动**，然后会自动切换到非特权用户，所以如果你根本没有 root 访问权限，恐怕你不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:30:34.073

有一个[Apache Commons Daemon](http://commons.apache.org/daemon/jsvc.html)服务可以帮助您。它允许您执行一些特权操作，例如绑定到端口 68，然后切换到非特权用户。

# html - 将 KML 加载到 Google 地球？

> ID：12377375
> 
> 赞同：1
> 
> 时间：2012-09-11T20:24:19.597
> 
> 标签：html, kml, google-earth-plugin

我不知道为什么例如我尝试自己复制这个示例[https://google-developers.appspot.com/earth/documentation/samples/fetchkml_example](https://google-developers.appspot.com/earth/documentation/samples/fetchkml_example)之类的基本内容，但我无法让它工作。我正在使用我一直用于 Google Maps API 的密钥，所以我认为这部分应该没问题，但是当涉及到 KML 时，无论是获取还是解析它，我似乎都无法让它工作. 我已将我的 KML 文件放在这里[https://sites.google.com/site/shahinkmlexamples/experiment/kml_example.kml](https://sites.google.com/site/shahinkmlexamples/experiment/kml_example.kml)，我的代码在下面，我自己的密钥号未显示

```
<html>
<head>
   <title>fetchkml_dom_example.html</title>
   <script src="//www.google.com/jsapi?key=MYKEY#"></script>
   <script type="text/javascript">
      var ge;
      google.load("earth", "1");

      function init() {
         google.earth.createInstance('map3d', initCB, failureCB);
      }

      function initCB(instance) {
         ge = instance;
         ge.getWindow().setVisibility(true);

         var href = 'https://sites.google.com/' + 'site/shahinkmlexamples/experiment/kml_example.kml';

         google.earth.fetchKml(ge, href, function(kmlObject) {
               if (kmlObject)
                  ge.getFeatures().appendChild(kmlObject);
               if (kmlObject.getAbstractView() !== null)
                  ge.getView().setAbstractView(kmlObject.getAbstractView());
         });
      }

      function failureCB(errorCode) {
      }

      google.setOnLoadCallback(init);
   </script>

</head>
<body>

   <div id="map3d" style="border: 1px solid silver; height: 400px; width: 600px;"></div>

</body>
</html> 
```

所以我知道解决方案必须很简单，但我就是想不通。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:45:07.807

我不确定你的问题是什么。我将您的代码放入在线编辑器 - [http://www.onlinehtmleditor.net/](http://www.onlinehtmleditor.net/) 一个简单的复制和粘贴，它工作正常。

此外，关于 API 密钥。对于 Google 地球，您不再需要一个。只需使用下面的通用 javascript 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:32:38.770

当您从本地文件加载它时（例如使用 notepad++ 并在 Chrome 中加载该文件），您需要将协议添加到脚本标签：

```
<script src="//www.google.com/jsapi?key=MYKEY#"></script> 
```

变成：

```
<script src="https://www.google.com/jsapi?key=MYKEY#"></script> 
```

如果没有该更改，您的页面将在本地文件系统中查找该文件。

它在示例中被省略，因此如果您的页面是 HTTPS，您的浏览器将加载 HTTPS 版本，如果您的页面是 HTTP，则加载 HTTP 版本。这可以防止浏览器中出现安全警告。

# graphviz - 在graphviz中指定线条的粗细

> ID：12377377
> 
> 赞同：23
> 
> 时间：2012-09-11T20:24:26.993
> 
> 标签：graphviz

是否可以在 Graphviz 中指定线的粗细（对于边和节点）？

我查看了[有关 attributes 的文档](http://www.graphviz.org/content/attrs)，但似乎找不到我要查找的内容。如果这是不可能的，我很惊讶。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-11T20:45:38.307

# html - 可以更改 HTML 锚标记的可点击区域的形状吗？

> ID：12377388
> 
> 赞同：3
> 
> 时间：2012-09-11T20:25:13.203
> 
> 标签：html, css, anchor, shape, geometry

我一直在研究一个标题中带有大圆形徽标的网站。徽标是一个锚标记，设置如下：

```
<a id="siteLogo" href="#" shape="circle" coords="157,155,147"><i>Site Logo</i></a> 
```

相关CSS如下：

```
i { 
   visibility: hidden; }
#siteLogo {
   background-image: url(../imgs/sprites_main2.png);
   background-position: 1000px 1000px;
   background-repeat: no-repeat;
   border: none;
   border-radius: 100%;
   display: block;
   height: 294px;
   left: 10px;
   position: relative;
   top: 8px;
   width: 294px; }
#siteLogo:hover {
   background-position: -15px -324px; } 
```

在锚标记上设置`shape`and`coords`属性会给我一个链接，在 Opera 和 Firefox 中带有一个圆形可点击（与普通正方形相对）区域。Chrome、Safari 和 IE 不支持锚标记上的这些属性。我做了一些检查，似乎 HTML5 也不支持这些属性（如果我错了，请纠正我）。

我向社区提出的问题很简单。无论如何，我是否可以在不使用图像映射或在我的 HTML 中添加任何图像标签的情况下实现与 HTML5 兼容并受主要浏览器支持（我可以在没有 IE 支持的情况下生活）的类似结果？

Javascript 或 jQuery 解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:34:12.150

我建议使用 padding 属性来增加可点击区域的大小..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T19:09:00.757

This may be a little late, but you can use a `<div>`, etc, with rounded corners. E.g.

```
<div style="border-radius:50px; border:1px solid black; 
  width:100px; height:100px;"  
  onclick="merry_go()">Stuff goes here</div> 
```

gets you a 100px circle.

# kernel - 如何修复分段错误？

> ID：12377392
> 
> 赞同：0
> 
> 时间：2012-09-11T20:25:31.203
> 
> 标签：kernel, arm, embedded-linux, vala, mmu

我需要使用[TMS320DM368读取异步外部存储器接口 (](http://www.ti.com/product/tms320dm368) [AEMIF )](http://www.ti.com/general/docs/litabsmultiplefilelist.tsp?literatureNumber=sprufi1c)在自定义硬件上的嵌入式 linux 环境中。我实际上还没有硬件，所以我正在 Leopardboard 368 上测试 vala 代码（如下）。引导加载程序使用第一个 AEMIF 来读取 nand flash。我的代码正在尝试使用第二个 AEMIF 来读取不在 Leopardboard 上但将在自定义硬件上的 SRAM。我怀疑分段错误是由于我试图访问受保护的内存这一事实引起的。实际的自定义硬件将有几 M 的 SRAM 需要读取，但我试图让这个测试代码读取读取 256 个字节。如何修复由下面的测试代码引起的分段错误？我需要向内核添加驱动程序吗？如果可能的话，我宁愿不要弄乱内核。是否有嵌入式 Linux 方法来配置或声明某些地址范围不受保护？

```
uint8 * source = (uint8 *)0x04000000; // AEMIF Data (CE1)
uint32 * pA2CR = (uint32 *)0x01D10014; // AEMIF 2 Config Reg (CS3 space)
const uint32 READ_SETUP = 1; // Read setup: EMIF clock cycles - 1
*pA2CR = (READ_SETUP << 13);
const size_t size = 256;
var dest = new uint8[size];
memset(dest, 0, size);
memcpy(dest, source, size); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:45:15.640

我不熟悉 DM386，但我曾经在 DM6446 上工作。在 DM6446 中，但我希望在 DM368 上也一样，重新映射物理地址。

我不知道您的情况，但我认为您可以使用 miscdevice 编写驱动程序，并为您的用户空间程序提供读写操作支持。

在我的内核模块中，我使用`IO_ADDRESS`宏来进行重新映射和访问寄存器。给你举个例子：

```
#define REG_PINMUX1     (*((volatile unsigned long *) (IO_ADDRESS(PINMUX1)))) 
```

然后在代码中我有类似的命令

```
REG_PINMUX0 &= ~(0x01000000); 
```

所以我认为你得到了段错误，因为你有一个错误的指针。并且尝试在没有内核模块的情况下从用户空间程序访问硬件寄存器并不是一个好的策略。

# cuda - CUDA设备栈和同步；SSY指令

> ID：12377398
> 
> 赞同：8
> 
> 时间：2012-09-11T20:26:04.230
> 
> 标签：cuda, ptx

编辑：这个问题是原版的重做版本，所以前几个回答可能不再相关。

我很好奇强制非内联的设备函数调用对设备函数内的同步有何影响。我有一个简单的测试内核来说明有问题的行为。

内核获取一个缓冲区并将其传递给设备函数，以及一个共享缓冲区和一个指示变量，该变量将单个线程标识为“boss”线程。设备函数有不同的代码：boss线程首先花时间在共享缓冲区上做一些琐碎的操作，然后写入全局缓冲区。在同步调用之后，所有线程都写入全局缓冲区。在内核调用之后，主机打印全局缓冲区的内容。这是代码：

**CUDA 代码：**

*test_main.cu*

```
#include<cutil_inline.h>
#include "test_kernel.cu"

int main()
{
  int scratchBufferLength = 100;
  int *scratchBuffer;
  int *d_scratchBuffer;

  int b = 1;
  int t = 64;

  // copy scratch buffer to device
  scratchBuffer = (int *)calloc(scratchBufferLength,sizeof(int));
  cutilSafeCall( cudaMalloc(&d_scratchBuffer,
        sizeof(int) * scratchBufferLength) );
  cutilSafeCall( cudaMemcpy(d_scratchBuffer, scratchBuffer,
        sizeof(int)*scratchBufferLength, cudaMemcpyHostToDevice) );

  // kernel call
  testKernel<<<b, t>>>(d_scratchBuffer);

  cudaThreadSynchronize();

  // copy data back to host
  cutilSafeCall( cudaMemcpy(scratchBuffer, d_scratchBuffer,
        sizeof(int) * scratchBufferLength, cudaMemcpyDeviceToHost) );

  // print results
  printf("Scratch buffer contents: \t");
  for(int i=0; i < scratchBufferLength; ++i)
  {
    if(i % 25 == 0)
      printf("\n");
    printf("%d ", scratchBuffer[i]);
  }
  printf("\n");

  //cleanup
  cudaFree(d_scratchBuffer);
  free(scratchBuffer);

  return 0;
} 
```

*test_kernel.cu*

```
#ifndef __TEST_KERNEL_CU
#define __TEST_KERNEL_CU

#define IS_BOSS() (threadIdx.x == blockDim.x - 1)

__device__
__noinline__
void testFunc(int *sA, int *scratchBuffer, bool isBoss) {

  if(isBoss)  {   // produces unexpected output-- "broken" code
//if(IS_BOSS())  {    // produces expected output-- "working" code

    for (int c = 0; c < 10000; c++)  {
      sA[0] = 1;
    }
  }

  if(isBoss) {
    scratchBuffer[0] = 1;
  }

  __syncthreads();

  scratchBuffer[threadIdx.x ] = threadIdx.x;

  return;

}

__global__
void testKernel(int *scratchBuffer)
{
  __shared__ int sA[4];

  bool isBoss = IS_BOSS();

  testFunc(sA, scratchBuffer, isBoss);
  return;
}
#endif 
```

我从 CUDA SDK 中编译了这段代码，以利用 test_main.cu 中的“cutilsafecall()”函数，但如果您想在 SDK 之外编译，当然可以取出这些代码。我使用 CUDA 驱动程序/工具包 4.0 版、计算能力 2.0 版进行编译，代码在具有 Fermi 架构的 GeForce GTX 480 上运行。

预期的输出是

> 0 1 2 3 ... blockDim.x-1

但是，我得到的输出是

> 1 1 2 3 ... blockDim.x-1

这似乎表明boss线程执行了条件“scratchBuffer[0] = 1;” 语句 AFTER 所有线程执行“scratchBuffer[threadIdx.x] = threadIdx.x;” 声明，即使它们被 __syncthreads() 屏障隔开。

即使老板线程被指示将标记值写入同一线程中线程的缓冲区位置，也会发生这种情况；sentinel 是缓冲区中存在的最终值，而不是适当的 threadIdx.x 。

导致代码产生预期输出的一种修改是更改条件语句

> 如果（是老板）{

到

> 如果（IS_BOSS（））{

; 即，将散度控制变量从存储在参数寄存器中更改为在宏函数中计算。（请注意源代码中相应行的注释。）我一直在关注这个特殊的变化，试图找出问题所在。在查看带有“isBoss”条件（即损坏的代码）和“IS_BOSS()”条件（即工作代码）的内核的反汇编 .cubin 时，指令中最显着的区别似乎是没有反汇编的损坏代码中的 SSY 指令。

以下是使用 "cuobjdump -sass test_kernel.cubin" 反汇编 .cubin 文件生成的反汇编内核。第一个“EXIT”之前的所有内容都是内核，之后的所有内容都是设备功能。唯一的区别在于设备功能。

**分解的对象代码：**

*“破”代码*

```
code for sm_20

    Function : _Z10testKernelPi
/*0000*/     /*0x00005de428004404*/     MOV R1, c [0x1] [0x100];
/*0008*/     /*0x20009de428004000*/     MOV R2, c [0x0] [0x8];
/*0010*/     /*0x84001c042c000000*/     S2R R0, SR_Tid_X;
/*0018*/     /*0xfc015de428000000*/     MOV R5, RZ;
/*0020*/     /*0x00011de428004000*/     MOV R4, c [0x0] [0x0];
/*0028*/     /*0xfc209c034800ffff*/     IADD R2, R2, 0xfffff;
/*0030*/     /*0x9001dde428004000*/     MOV R7, c [0x0] [0x24];
/*0038*/     /*0x80019de428004000*/     MOV R6, c [0x0] [0x20];
/*0040*/     /*0x08001c03110e0000*/     ISET.EQ.U32.AND R0, R0, R2, pt;
/*0048*/     /*0x01221f841c000000*/     I2I.S32.S32 R8, -R0;
/*0050*/     /*0x2001000750000000*/     CAL 0x60;
/*0058*/     /*0x00001de780000000*/     EXIT;
/*0060*/     /*0x20201e841c000000*/     I2I.S32.S8 R0, R8;
/*0068*/     /*0xfc01dc231a8e0000*/     ISETP.NE.AND P0, pt, R0, RZ, pt;
/*0070*/     /*0xc00021e740000000*/     @!P0 BRA 0xa8;
/*0078*/     /*0xfc001de428000000*/     MOV R0, RZ;
/*0080*/     /*0x04001c034800c000*/     IADD R0, R0, 0x1;
/*0088*/     /*0x04009de218000000*/     MOV32I R2, 0x1;
/*0090*/     /*0x4003dc231a8ec09c*/     ISETP.NE.AND P1, pt, R0, 0x2710, pt;
/*0098*/     /*0x00409c8594000000*/     ST.E [R4], R2;
/*00a0*/     /*0x600005e74003ffff*/     @P1 BRA 0x80;
/*00a8*/     /*0x040001e218000000*/     @P0 MOV32I R0, 0x1;
/*00b0*/     /*0x0060008594000000*/     @P0 ST.E [R6], R0;
/*00b8*/     /*0xffffdc0450ee0000*/     BAR.RED.POPC RZ, RZ;
/*00c0*/     /*0x84001c042c000000*/     S2R R0, SR_Tid_X;
/*00c8*/     /*0x10011c03200dc000*/     IMAD.U32.U32 R4.CC, R0, 0x4, R6;
/*00d0*/     /*0x10009c435000c000*/     IMUL.U32.U32.HI R2, R0, 0x4;
/*00d8*/     /*0x08715c4348000000*/     IADD.X R5, R7, R2;
/*00e0*/     /*0x00401c8594000000*/     ST.E [R4], R0;
/*00e8*/     /*0x00001de790000000*/     RET;
    ................................. 
```

*“工作”代码*

```
code for sm_20

    Function : _Z10testKernelPi
/*0000*/     /*0x00005de428004404*/     MOV R1, c [0x1] [0x100];
/*0008*/     /*0x20009de428004000*/     MOV R2, c [0x0] [0x8];
/*0010*/     /*0x84001c042c000000*/     S2R R0, SR_Tid_X;
/*0018*/     /*0xfc015de428000000*/     MOV R5, RZ;
/*0020*/     /*0x00011de428004000*/     MOV R4, c [0x0] [0x0];
/*0028*/     /*0xfc209c034800ffff*/     IADD R2, R2, 0xfffff;
/*0030*/     /*0x9001dde428004000*/     MOV R7, c [0x0] [0x24];
/*0038*/     /*0x80019de428004000*/     MOV R6, c [0x0] [0x20];
/*0040*/     /*0x08001c03110e0000*/     ISET.EQ.U32.AND R0, R0, R2, pt;
/*0048*/     /*0x01221f841c000000*/     I2I.S32.S32 R8, -R0;
/*0050*/     /*0x2001000750000000*/     CAL 0x60;
/*0058*/     /*0x00001de780000000*/     EXIT;
/*0060*/     /*0x20009de428004000*/     MOV R2, c [0x0] [0x8];
/*0068*/     /*0x8400dc042c000000*/     S2R R3, SR_Tid_X;
/*0070*/     /*0x20201e841c000000*/     I2I.S32.S8 R0, R8;
/*0078*/     /*0x4000000760000001*/     SSY 0xd0;
/*0080*/     /*0xfc209c034800ffff*/     IADD R2, R2, 0xfffff;
/*0088*/     /*0x0831dc031a8e0000*/     ISETP.NE.U32.AND P0, pt, R3, R2, pt;
/*0090*/     /*0xc00001e740000000*/     @P0 BRA 0xc8;
/*0098*/     /*0xfc009de428000000*/     MOV R2, RZ;
/*00a0*/     /*0x04209c034800c000*/     IADD R2, R2, 0x1;
/*00a8*/     /*0x04021de218000000*/     MOV32I R8, 0x1;
/*00b0*/     /*0x4021dc231a8ec09c*/     ISETP.NE.AND P0, pt, R2, 0x2710, pt;
/*00b8*/     /*0x00421c8594000000*/     ST.E [R4], R8;
/*00c0*/     /*0x600001e74003ffff*/     @P0 BRA 0xa0;
/*00c8*/     /*0xfc01dc33190e0000*/     ISETP.EQ.AND.S P0, pt, R0, RZ, pt;
/*00d0*/     /*0x040021e218000000*/     @!P0 MOV32I R0, 0x1;
/*00d8*/     /*0x0060208594000000*/     @!P0 ST.E [R6], R0;
/*00e0*/     /*0xffffdc0450ee0000*/     BAR.RED.POPC RZ, RZ;
/*00e8*/     /*0x10311c03200dc000*/     IMAD.U32.U32 R4.CC, R3, 0x4, R6;
/*00f0*/     /*0x10309c435000c000*/     IMUL.U32.U32.HI R2, R3, 0x4;
/*00f8*/     /*0x84001c042c000000*/     S2R R0, SR_Tid_X;
/*0100*/     /*0x08715c4348000000*/     IADD.X R5, R7, R2;
/*0108*/     /*0x00401c8594000000*/     ST.E [R4], R0;
/*0110*/     /*0x00001de790000000*/     RET;
    ................................. 
```

“SSY”指令存在于工作代码中，但不存在于损坏的代码中。cuobjdump 手册用“设置同步点；在可能不同的指令之前使用”来描述该指令。这让我认为，由于某种原因，编译器无法识别损坏代码中存在分歧的可能性。

我还发现，如果我注释掉 __noinline__ 指令，那么代码会产生预期的输出，实际上由其他“损坏”和“工作”版本产生的程序集完全相同。所以，这让我觉得当一个变量通过调用堆栈传递时，该变量不能用于控制分歧和随后的同步调用；在这种情况下，编译器似乎没有认识到分歧的可能性，因此没有插入“SSY”指令。有谁知道这是否确实是 CUDA 的合法限制，如果是，是否在任何地方都有记录？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:20:44.647

这似乎只是在 CUDA 4.1/4.2 中修复的编译器错误。不会为 CUDA 4.2 上的提问者重现。

# asp.net-mvc - Sharp Architecture - NewtonSoft.Json 程序集不匹配

> ID：12377405
> 
> 赞同：0
> 
> 时间：2012-09-11T20:26:20.410
> 
> 标签：asp.net-mvc, json.net, sharp-architecture

1.  创建一个全新的 Sharp Architecture 项目。
2.  成功构建、创建数据库、运行 Web 应用程序。
3.  尝试通过 Web 视图向数据库添加新实体。
4.  得到错误：

> 无法加载文件或程序集“Newtonsoft.Json，Version=4.5.0.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:26:20.410

**问题：**

由于Sharp Architecture 说明中添加了参数， **Newtonsoft.Json**包未更新`-Safe`

**解决方案：**

1.  通过包管理器控制台手动更新 NewtonSoft.Json 包：

    更新包 Newtonsoft.Json

2.  通过包管理器控制台更新包含该包*的每个项目*的绑定引用：

    添加绑定重定向

# xcode - NSArrayController, NSPopupButton 正确绑定

> ID：12377411
> 
> 赞同：1
> 
> 时间：2012-09-11T20:26:43.620
> 
> 标签：xcode, macos, cocoa-bindings, nsarraycontroller, nspopupbutton

我刚开始从 iOS 开始进行 Mac 编程，并且正在玩绑定。

我正在尝试制作一个简单的目录弹出窗口，显示最近选择的目录的历史记录，最后一个元素将读取`other...`将打开打开对话框。

我似乎无法弄清楚如何将 NSPopupButton 绑定到我的模型。

它的设置是这样的：MainUIViewController、NSController、NSObject Controller 都连接在笔尖中

![NIB 文件](../Images/22bcc210d3b299da5cf3c4576a250e44.png)

我确实将 MainUIViewController 中的插座连接到 NIB 中的目录阵列控制器我有一个用于 eachDirectory 的类，还有一个用于 DirectoryArrayController(NSObject) 的类我以这种方式在视图上绑定 NSPopupButton：

![目录阵列控制器绑定](../Images/e207e9e165d6ab05c7048f4c2b6665a2.png)

我将目录数组控制器绑定到目录弹出数组控制器，因此

![目录弹出数组控制器绑定](../Images/a51378b0909c525151a8260b0735f960.png)

这是连接到目录弹出阵列控制器的 .h 文件

```
@interface DirectoryPopupArrayController : NSObject
   @property (weak) IBOutlet NSPopUpButton *directoryPopupButton;
   @property (nonatomic) IBOutlet NSMutableArray *allDirectoryHistory;
   @property (nonatomic) eachDirectory *currentlySelectedDirectory;
@end 
```

我在相应的 .m 文件中使用以下代码填充了一些示例目录信息

```
- (void)awakeFromNib {
    [super awakeFromNib];
    //testing sample directories
    self.allDirectoryHistory = [[NSMutableArray alloc] initWithCapacity:10];
    NSString *name;
    eachDirectory *newDirectoryName;
    for (int i = 0; i < 5; i++) {
        name = [NSString stringWithFormat:@"directory %d", i];
        newDirectoryName = [[eachDirectory alloc] initWithDirectoryName:name];

        [self.allDirectoryHistory addObject:newDirectoryName];
    }
} 
```

这是 eachDirectory.h 的代码

```
@interface eachDirectory : NSObject
  @property (nonatomic) NSString *directoryPath;
  @property (nonatomic) NSString *directoryVisibleName;

  -(id) initWithDirectoryName:(NSString *)newName;
@end 
```

现在，当我转到我的代码时，如果我放置用于创建 Array 的代码并将 Array 控制器直接绑定到 UIViewController.m 文件，事情似乎工作正常。我想要做的是在一个单独的类文件中处理所有数组的东西，并且只将最终的目录选择返回给主控制器。当我如上所述将 NSArrayController 绑定到 NIB 中的对象控制器时，弹出窗口中什么也没有显示，我不明白为什么！

非常感谢任何帮助，对于冗长的帖子感到抱歉 - 只是想让自己清楚。

# javascript - Node.Js 与 HttpAsync (asp.net)

> ID：12377421
> 
> 赞同：15
> 
> 时间：2012-09-11T20:27:36.100
> 
> 标签：javascript, asp.net, node.js, asynchronous, ihttpasynchandler

在阅读了很多关于 nodejs 的内容后，我仍然问自己：

与 asp.net HttpAsync 请求相比有什么*好处？*

唯一的限制（如我所见）是限制的并发请求数`IIS`。

我试图画出我目前对它的理解：

![在此处输入图像描述](../Images/884a668f384ac0eeaaf89938db2ce6d9.png)

有什么帮助吗？

*   有什么异步操作`.net/ado.net` 不能做的nodejs可以吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T20:33:36.310

默认情况下，IIS 将并发请求的数量限制为很高。限制可以任意提高。

node.js 有两个主要好处：

1.  由于异步 IO，可扩展性（不是性能！存在差异）
2.  与客户端共享 Javascript

ASP.NET 不支持数字 2，因此这是一个优势。

ASP.NET 完全支持异步 IO 和非阻塞代码。此外，您还可以获得 JITed 静态类型语言的性能优势。出于这个原因，对于非玩具应用程序，ASP.NET 通常具有优于 node.js 的性能（打印“hello world”不是真正的基准工作负载！睡眠 10 秒也不是）。

node.js 受益于它极其纤细的代码路径。出于这个原因，像“echo”或“hello world”这样的最小应用程序可能会更快。这不适用于实际执行工作的应用程序。

所以如果你想知道哪个“更好”，你需要考虑一个特定的场景。以实际工作量进行基准测试（不，计算阶乘数是不现实的。C# 只会大获全胜。毫无意义）。还要考虑平台、库、文档、支持、开发人员生产力的成熟度......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T06:51:22.907

node.js 和 ASP.NET 的主要区别在于库生态系统。大多数 node.js 库都提供了一种异步方式。ASP.NET 方法没有，只有少数方法可以。如果一路上有同步的东西，异步的意义就丢失了。

这是大多数平台与 node.js 相比的问题。

否则，仅仅使用这种 AsyncHttp 方法，ASP.NET 和 node.js 没有区别。

# asp.net-mvc-4 - 如何开发 ASP.NET Web API 以接受复杂对象作为参数？

> ID：12377423
> 
> 赞同：42
> 
> 时间：2012-09-11T20:27:36.447
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我有以下 Web API (GET)：

```
public class UsersController : ApiController
{
    public IEnumerable<Users> Get(string firstName, string LastName, DateTime birthDate)
    {
         // Code
    }
} 
```

这是一个 GET，所以我可以这样称呼它：

```
http://localhost/api/users?firstName=john&LastName=smith&birthDate=1979/01/01 
```

并接收用户的 xml 结果。

是否可以像这样将参数封装到一个类中：

```
public class MyApiParameters
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public DateTime BirthDate {get; set;}
} 
```

然后有：

```
 public IEnumerable<Users> Get(MyApiParameters parameters) 
```

我已经尝试过了，每当我尝试从中获取结果时**`http://localhost/api/users?firstName=john&LastName=smith&birthDate=1979/01/01`**，它`parameter`都是空的。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-11T20:35:22.887

默认情况下，复杂类型是从正文中读取的，这就是您得到 null 的原因。

将您的操作签名更改为

```
 public IEnumerable<Users> Get([FromUri]MyApiParameters parameters) 
```

如果您希望模型绑定器从查询字符串中提取模型。

您可以在 MSFT 的 Mike Stall 的优秀文章中阅读更多关于 Web API 如何进行参数绑定的信息 - [http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter -binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

# php - Drupal render() - 使打印内容 ucfirst

> ID：12377424
> 
> 赞同：0
> 
> 时间：2012-09-11T20:27:40.297
> 
> 标签：php, drupal, drupal-7, drupal-render

我有一个渲染一些内容的drupal模板，如下所示：

```
<?php $field_collection_state_info = reset($content['field_state_information']['0']['entity']['field_collection_item']);  ?>  
<?php print render($field_collection_state_info['field_state_name']); ?> 
```

但我想运行 php `ucfirst()`，所以所有呈现的内容都在第一个字母上大写。

我试过这个：

```
<?php print ucfirst(render($field_collection_state_info['field_state_name'])); ?> 
```

但这没有用。

我应该如何实现这一目标？

非常感谢任何建议。

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:04:36.113

我认为您必须在调用之前更改渲染数组的内容`render()`：

```
// the 'und' part is depending on the translation of the node
$field_collection_state_info['field_state_name']['und'][0]['value'] =
ucfirst($field_collection_state_info['field_state_name']['und'][0]['value']);
// render
print render($field_collection_state_info['field_state_name']);

// or you could try to modify the safe_value part of the array depending on your
// filter settings for the field
$field_collection_state_info['field_state_name']['und'][0]['safe_value'] =
ucfirst($field_collection_state_info['field_state_name']['und'][0]['safe_value']);
// render
print render($field_collection_state_info['field_state_name']); 
```

*编辑*尝试将此添加到您的`template.php`中，它使用以下方法更改 collection_field 的值`hook_preprocess_node()`：

```
function YOURTHEME_preprocess_node(&$vars) {
  if($vars['type'] == 'YOUR-CONTENT-TYPE') {    
     // you might need to replace the field_content_block with the name of your field <field_state_information>
     $data = reset($vars['content']['field_content_block'][0]['entity']['field_collection_item']);
     // turn the first character to uppercase
     $data['field_text']['#object']->field_text['und'][0]['value'] = ucwords($data['field_text']['#object']->field_text['und'][0]['value']);
    // set the data in the array, like I said above your might need to change the `field_collection_block` to `field_state_information`
    $vars['content']['field_content_block'][0]['entity']['field_collection_item'] = $data;
  } 
} 
```

# objective-c - iPhoto 库的路径

> ID：12377429
> 
> 赞同：1
> 
> 时间：2012-09-11T20:28:04.600
> 
> 标签：objective-c, macos, iphoto

有没有办法通过代码找到当前 iPhoto 库的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:38:24.163

您可以访问`com.Apple.iApps`位于的 plist 文件

> /用户/用户名/库/首选项/

在这里，您将找到列出 iApp 数据库（包括 iTunes 和 iPhoto）的最新位置的键。这将允许您自动查看 iPhoto 图库的位置，无论用户选择将其放置在何处。

```
NSArray *libraryDatabases = [[[NSUserDefaults standardUserDefaults] persistentDomainForName:@"com.apple.iApps"] objectForKey:@"iPhotoRecentDatabases"];
NSURL *libraryURL = (([libraryDatabases count])) ? [NSURL URLWithString:[libraryDatabases objectAtIndex:0]] : nil; 
```

这`NSURL`将返回当前 iPhoto 库的位置（如果存在）。

# r - R-项目按钮和gui

> ID：12377432
> 
> 赞同：2
> 
> 时间：2012-09-11T20:28:21.847
> 
> 标签：r, button

这可能是一个“业余”问题

首先，我习惯用 java 或 c++ 编程，所以我对 R 很陌生。

我需要做的是创建一个程序，它需要 R 的统计能力，但需要由对计算机知之甚少的人使用。所以我要找的是

*   类似于 Java 的 JButtons，仅适用于 R。
*   可以用来制作 gui 并且易于应用的东西。

我搜索了网络和 R-books，但唯一的帮助是统计性质的。

任何关于在哪里学习 gui 的帮助，或带有书面方法的库，都将不胜感激。gui 应该尽可能简单，不需要花哨或灵活的代码。我需要页面上的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:31:14.527

检查`gWidgets`包裹。他们有一个非常漂亮的小插图，以及一个方便的小系统，可以自动为特定功能创建一个（可编辑的！）gui。 [http://cran.r-project.org/web/packages/gWidgets/index.html](http://cran.r-project.org/web/packages/gWidgets/index.html)

# c# - 找不到 ICreatesObservableForProperty

> ID：12377442
> 
> 赞同：1
> 
> 时间：2012-09-11T20:29:08.360
> 
> 标签：c#, reactiveui

我刚刚开始探索 ReactiveUI，但遇到了一些问题。

在 ReactiveObject 中，我尝试基于属性创建一个 observable ......

```
public class StudentListViewModel : ReactiveObject, IStudentListViewModel
{
    public StudentListViewModel()
    {
        var observable = this.ObservableForProperty(x => x.SearchQuery);
    }

    string _SearchQuery;
    public string SearchQuery
    {
        get { return _SearchQuery; }
        set { this.RaiseAndSetIfChanged(x => x.SearchQuery, value); }
    }
} 
```

...导致以下错误：

> 找不到 MyApplication.ViewModels.StudentListViewModel 的 ICreatesObservableForProperty。这绝不应该发生，您的服务定位器可能已损坏。

我已将其用作`Ninject`DI 容器，并尝试像这样告诉 ReactiveUI：

```
class Bootstrapper : IBootstrapper
{
    public Bootstrapper()
    {
        Kernel = new StandardKernel();
        Kernel.Bind<IBootstrapper>().ToConstant(this);
        Kernel.Bind<IScreen>().ToConstant(this);
        Kernel.Bind<IViewFor<StudentListViewModel>>().To<StudentListView>();

        Router = new RoutingState();

        RxApp.ConfigureServiceLocator(
            (type, key) => Kernel.Get(type, key),
            (type, key) => Kernel.GetAll(type, key),
            (from, type, key) =>
                {
                    var binding = Kernel.Bind(from).To(type);
                    if (key != null)
                        binding.Named(key);
                }
            );
    }
} 
```

有人看到这里的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:32:47.073

您切换了“从”和“键”：

```
 RxApp.ConfigureServiceLocator(
        (type, key) => Kernel.Get(type, key),
        (type, key) => Kernel.GetAll(type, key),
        (from, type, key) =>
            {
                var binding = Kernel.Bind(type /*this was from*/).To(from /*ditto*/);
                if (key != null)
                    binding.Named(key);
            }
        ); 
```

# twos-complement - 使用加法、减法和左移翻转二进制补码数的符号

> ID：12377444
> 
> 赞同：0
> 
> 时间：2012-09-11T20:29:12.687
> 
> 标签：twos-complement

在一项家庭作业中，其中一个问题要求我们将任意整数乘以一个常数，仅使用 +、- 和 << 运算符以及最多三个操作。例如，第一个常数是 17，我将其求解为

```
(x << 4) + x 
```

但是，给出的一些常数是负数（例如 -7）。乘以 7 是一件相对微不足道的事情（我将其设为`(x << 3) - x`），但我无法弄清楚如何仅使用三个允许的运算符来翻转标志。

我试图通过在每个结果中添加或减去 2147483648 来翻转该位（认为这将强制使用最高有效位，从而翻转符号），但在我的 C# 测试实现中，这已被证明是不成功的。

是否有一些正数可以乘以在功能上类似于-7的给定int？添加 2147483648 可以在 C# 以外的语言中使用吗？我忽略了什么吗？

书中的原始问题如下：

> 假设我们的任务是生成代码以将整数变量 x 乘以各种不同的常数因子 K。为了提高效率，我们只想使用操作 +、- 和 <<。对于以下 K 值，编写 C 表达式以执行乘法运算，每个表达式最多使用三个操作。
> 
> A.K = 17
> 
> B. K = -7
> 
> C.K = 60
> 
> D.K = -112

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:33:04.550

您无需更改标志。你写`7 * x`为 (equivalent to) `8*x - x`。现在，您需要做什么才能获得`-7 * x`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:47:40.663

是`x - (x << 3)`无效的吗？

# r - 如何在 R 中分组时创建一列排名

> ID：12377447
> 
> 赞同：2
> 
> 时间：2012-09-11T20:29:22.320
> 
> 标签：r

我正在使用 R，我想创建一个显示序列或排名的列，同时按两个因素（hhid 和 period）分组。

例如，我有这个数据集：

```
hhid perid
1000 1     
1000 1
1000 1
1000 2
1000 2
2000 1
2000 1
2000 1
2000 1
2000 2
2000 2 
```

我想像这样添加一个名为“actno”的列：

```
hhid perid actno
1000 1     1
1000 1     2
1000 1     3
1000 2     1
1000 2     2
2000 1     1
2000 1     2
2000 1     3
2000 1     4
2000 2     1
2000 2     2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T00:24:46.423

如果您有很多组或大量数据，`data.table`这是提高时间和内存效率的方法

```
# assuming your data is in a data.frame called DF
library(data.table)
DT <- data.table(DF)

DT[, ActNo := seq_len(.N), by = list(hhid,perid)] 
```

请注意，`.N`通过分组给出子集中的行数（`?data.table`有关详细信息，请参阅）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:43:45.890

不需要 plyr。只需使用`ave`和`seq`：

```
> dat$actno <- with( dat, ave(hhid, hhid, perid, FUN=seq))
> dat
   hhid perid actno
1  1000     1     1
2  1000     1     2
3  1000     1     3
4  1000     2     1
5  1000     2     2
6  2000     1     1
7  2000     1     2
8  2000     1     3
9  2000     1     4
10 2000     2     1
11 2000     2     2 
```

这个例子中的第一个参数可以是 column 或者你可以用稍微不那么优雅的 bu 来做，也许更清楚：

```
dat$actno <- with( dat, ave(hhid, hhid, perid, FUN=function(x) seq(length(x) ) ) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:14:27.283

如果您的数据被调用`urdat`，那么`plyr`您可以执行以下操作：

```
df <- urdat[order(urdat$hhid, urdat$perid),]
df$actno <- sequence(rle(df$perid)$lengths) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T20:34:43.457

该`plyr`软件包可以很好地做到这一点：

```
library(plyr)
dat <- structure(list(hhid = c(1000L, 1000L, 1000L, 1000L, 1000L, 2000L, 
2000L, 2000L, 2000L, 2000L, 2000L), perid = c(1L, 1L, 1L, 2L, 
2L, 1L, 1L, 1L, 1L, 2L, 2L)), .Names = c("hhid", "perid"), class = "data.frame", row.names = c(NA, 
-11L))

ddply(dat, .(hhid, perid), transform, actno=seq_along(perid))

   hhid perid actno
1  1000     1     1
2  1000     1     2
3  1000     1     3
4  1000     2     1
5  1000     2     2
6  2000     1     1
7  2000     1     2
8  2000     1     3
9  2000     1     4
10 2000     2     1
11 2000     2     2 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-06T21:04:26.007

伪代码：

```
For each unique value of `hhid` `h`
    For each unique value of `perid` `p`
        counter = 0;
        For each row of table where `hhid==h && perid==p`
            counter++;
            Assign counter to `actno` of this column 
```

应该很容易实现，尤其是使用[数据框](http://msenux.redwoods.edu/math/R/dataframe.php)。

# python - Python 函数如何确定是否（以及如何）显式传递 kwarg 默认值？

> ID：12377450
> 
> 赞同：3
> 
> 时间：2012-09-11T20:30:05.837
> 
> 标签：python, introspection

假设一个函数`spam`有签名`spam(ham=None)`。以下三个调用都会导致命名空间中的局部变量`ham`具有`spam`值`None`：

```
spam()
spam(None)
spam(ham=None) 
```

如何`spam`找出这三个替代方案中的哪一个被实际使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T20:36:55.903

它不能。 [这个问题](https://stackoverflow.com/questions/1408818/getting-the-the-keyword-arguments-actually-passed-to-a-python-method)描述了一种使用装饰器包装函数并将传递的参数设置为它的属性的方法。`spam`但是，如果没有外界的帮助，就无法从内部找出答案。`**kwargs`您必须使用接受并使用它来存储信息的函数来拦截调用。

但是，您应该谨慎执行此操作。传入参数的不同方式*应该*是相同的。如果你做了一些让它们以不同方式工作的事情，你会让许多试图使用你的功能的人感到困惑。

# primary-key - Sphinx 和主键列

> ID：12377452
> 
> 赞同：0
> 
> 时间：2012-09-11T20:30:24.810
> 
> 标签：primary-key, sphinx

我正在尝试了解 Sphinx 搜索服务器。我让它通过命令行和 PHP 工作。唯一令人烦恼的是，当我索引一个表时，Sphinx 返回一个通知，说它找不到主键列并“忽略”该列。无论如何它都可以工作，所以我没有太在意，但现在我注意到我从我的搜索脚本中收到了 PHP 通知，说主键列 q_id 未定义。该脚本有效并返回正确的 q_ids，但我不喜欢收到通知。

这是一个片段，因此您可以看到我试图获取主键列的位置。

```
$row_ids = array();
  if ( ! empty($result["matches"]) ) {
      foreach ( $result["matches"] as $doc => $docinfo ) {

   array_push($row_ids, $docinfo['q_id']);
      } 
```

我知道 Sphinx 无法识别主键是什么，但我认为它仍然可以索引该列，并且它必须对它做一些事情，因为搜索返回了正确的 q_ids。我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:39:47.353

“q_id”是一个属性吗？

会是这样的

```
 foreach ( $result["matches"] as $doc => $docinfo ) {
       array_push($row_ids, $docinfo['attrs']['q_id']);
  } 
```

你应该做一个 print_r($result); 看到一切都回来了……

# iphone - 苹果llvm编译器4.0错误

> ID：12377459
> 
> 赞同：1
> 
> 时间：2012-09-11T20:30:54.707
> 
> 标签：iphone, ios, xcode4

在构建我的应用程序时遇到问题。我猜该错误与应用程序逻辑无关，因为我是 ios 编程的新手，无法理解该错误。

```
CompileC /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-    aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/Objects-normal/i386/calorieCalculatorViewController.o calorieCalculator/calorieCalculatorViewController.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /home/stu9/s7/pbd6595/Documents/MC/calorieCalculator/calorieCalculator
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/calorieCalculator-generated-files.hmap -I/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/calorieCalculator-own-target-headers.hmap -I/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/calorieCalculator-all-target-headers.hmap -iquote /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/calorieCalculator-project-headers.hmap -I/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/DerivedSources/i386 -I/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/DerivedSources -F/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Products/Debug-iphonesimulator -include /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/PrecompiledHeaders/calorieCalculator-Prefix-gglwlmdmlndtxwahlpktkqstdeev/calorieCalculator-Prefix.pch -MMD -MT dependencies -MF /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/Objects-normal/i386/calorieCalculatorViewController.d --serialize-diagnostics /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/Objects-normal/i386/calorieCalculatorViewController.dia -c /home/stu9/s7/pbd6595/Documents/MC/calorieCalculator/calorieCalculator/calorieCalculator/calorieCalculatorViewController.m -o /home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/Objects-normal/i386/calorieCalculatorViewController.o
fatal error: error in backend: IO failure on output stream.
Comman/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:38:28.563

`clang`正在尝试将目标文件写入`/home/stu9/s7/pbd6595/Library/Developer/Xcode/DerivedData/calorieCalculator-aqrcctfytdkkduhjvhqewuibvnuf/Build/Intermediates/calorieCalculator.build/Debug-iphonesimulator/calorieCalculator.build/Objects-normal/i386/calorieCalculatorViewController.o`. 也许`/home/stu9/s7/pbd6595`是文件服务器上的只读卷？也许您需要先将项目复制到本地磁盘上的目录中？

# c# - Orchard CMS 保存 MediaPickerField

> ID：12377460
> 
> 赞同：1
> 
> 时间：2012-09-11T20:30:55.847
> 
> 标签：c#, asp.net-mvc, orchardcms

我正在开发一个基于 Orchard 的网络应用程序。

我正在编写一个管理员工用户的模块，这个用户是由 UserPart 和 StaffUserPart（自定义部分，在迁移中定义）组成的 ContentTypes（Staff_User）-> 这个部分有一个 MediaPickerField。

这是我的控制器中的代码，用于显示员工用户的创建模板

```
 public ActionResult CreateStaff() {

        IContent staffUser = _contentManager.New("Staff_User");

        var model = _contentManager.BuildEditor(staffUser);

        return View((object)model);
    } 
```

好的，我在 EditorTemplates/Staff.cshtml 中有一个模板。MediaPicker 字段由 BuildEditor 函数附加（作为一个形状）。

这是 Post 控制器：

```
 public ActionResult CreateStaffPost(FormCollection input) {

        IContent staffUser = _contentManager.New("Staff_User");

        //UserPart validation
        if (String.IsNullOrEmpty(input["user.Email"]))
            ModelState.AddModelError("Email", "The Email field is required.");

        //Check if user already exits
        var oldUser = _contentManager.Query("User").Where<UserPartRecord>(x => x.Email == input["user.Email"])
            .List()
            .FirstOrDefault();

        if (oldUser != null)
            ModelState.AddModelError("Email", "That email adress is already registered.");

        if (!ModelState.IsValid) {
            var model = _contentManager.UpdateEditor(staffUser, this);
            return View(model);
        }

        StaffUserPart staff = staffUser.As<StaffUserPart>();
        staff.FirstName = input["FirstName"];
        staff.LastName = input["LastName"];
        staff.Location = input["Location"];
        staff.JobTitle = input["JobTitle"];
        staff.Summary = input["Summary"];
        staff.AreaOfExpertise = input["AreaOfExperience"];
        staff.Category = input["Category"];
        staff.Experience = input["Experience"];

        //Media picker field values
        var staffImageField = (MediaPickerField)staff.Fields.Single(x => x.Name == "Photo");
        //TODO Fix image save during creation
        staffImageField.Url = input["StaffUserPart.Photo.Url"];
        staffImageField.AlternateText = input["StaffUserPart.Photo.AlternateText"];
        staffImageField.Class = input["StaffUserPart.Photo.Class"];
        staffImageField.Style = input["StaffUserPart.Photo.Style"];
        staffImageField.Alignment = input["StaffUserPart.Photo.Alignment"];
        staffImageField.Width = String.IsNullOrEmpty(input["StaffUserPart.Photo.Width"]) ? 0 : Convert.ToInt32(input["StaffUserPart.Photo.Width"]);
        staffImageField.Height = String.IsNullOrEmpty(input["StaffUserPart.Photo.Height"]) ? 0 : Convert.ToInt32(input["StaffUserPart.Photo.Height"]);

        UserPart userPart = staffUser.As<UserPart>();
        userPart.UserName = input["user.Email"];
        userPart.Email = input["user.Email"];
        userPart.NormalizedUserName = input["user.Email"].ToLowerInvariant();
        userPart.Record.HashAlgorithm = "SHA1";
        userPart.RegistrationStatus = UserStatus.Approved;
        userPart.EmailStatus = UserStatus.Approved;

        //Set Password
        _membershipService.SetPassword(userPart.As<UserPart>(), input["password"]);

        //Create the StaffUser
        _contentManager.Create(staffUser);

        return RedirectToAction("Index");
    } 
```

**问题**

这可行，**但**MediaPickerField 不保存数据。我使用调试器查看 input["StaffUserPart.Photo"] 中的值和值是否存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:02:53.117

看起来你做的工作比你需要的多。如果您将调用移至 UpdateEditor，此方法将完成将发布的值放入您的内容的工作。您需要确保您正在实施 IUpdater。另外，我添加了对 ITransactionManager 的依赖项。我希望这将有助于抓住一些没有放在正确位置的东西。

```
public ActionResult CreateStaffPost(FormCollection input) {

    IContent staffUser = _contentManager.New("Staff_User");

    //Create the StaffUser
    _contentManager.Create(staffUser);

    //UserPart validation
    if (String.IsNullOrEmpty(input["user.Email"]))
        ModelState.AddModelError("Email", "The Email field is required.");

    //Check if user already exits
    var oldUser = _contentManager.Query("User").Where<UserPartRecord>(x => x.Email == input["user.Email"])
        .List()
        .FirstOrDefault();

    if (oldUser != null)
        ModelState.AddModelError("Email", "That email adress is already registered.");

    //This does all the work of hydrating your model
    var model = _contentManager.UpdateEditor(staffUser, this);
    if (!ModelState.IsValid) {   
        _transactionManager.Cancel();
        return View(model);
    }

    //Set Password
    _membershipService.SetPassword(userPart.As<UserPart>(), input["password"]);

    return RedirectToAction("Index");
} 
```

# sql - SQL 案例何时 在 SQL Server 2005 上慢，但不是 2000

> ID：12377461
> 
> 赞同：2
> 
> 时间：2012-09-11T20:31:03.013
> 
> 标签：sql, sql-server, database-administration

我有一个非常简单的查询，这让我非常抓狂。

情况如下：

*   我有两个数据库服务器。
*   一种是旧的 SQL Server 2000 (VM)，资源非常少。
*   另一个是一个非常大的 SQL Server 2005 企业集群，拥有绝对荒谬的可用资源。
*   我有一小部分在 3 秒内执行并在 SQL Server 2000 上返回 50,000 多行数据的较大查询
*   在 SQL Server 2005 上，同样的小查询需要 15 分钟以上才能返回 1000 行
*   我正在使用的数据库是这两台服务器上的镜像。相同的表，相同的表中的数据，相同的表索引等。

我尝试在 SQL Server 2005 表上创建不同的索引，对所有存在的索引进行碎片整理，更新表统计信息等。没有什么能让这个查询在 SQL Server 2005 上运行得更快。目前没有针对 SQL 运行其他任何东西Server 2005 服务器，我们的 DBA 向我保证，这不是配置问题或与 SQL Server 2000 和 SQL Server 2005 之间的功能弃用有关。

查询如下：

```
SELECT (CASE 
             WHEN TeamMember.ID IN  (SELECT DISTINCT ProjMgrID FROM ProjMgr)
                THEN 'Yes' 
                ELSE 'No' 
        END) AS OnProjAsMgr 
FROM TeamMember 
```

因此，返回所有 ProjMgrs 的不同列表，如果 TeamMember 在该列表中，则将“是”分配给 OnProjAsMgr 值。

我是一个 SQL 新手，这是前任编写的代码。我不知道是否有更好的编写方法，但我不明白为什么它在 SQL Server 2000 上运行良好，但在 SQL Server 2005 上完全崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:38:43.917

DISTINCT 导致排序，IN 导致对整个查询求值。这个版本是如何工作的：

```
SELECT OnProjAsMgr = CASE WHEN EXISTS 
  (SELECT 1 FROM dbo.ProjMgr WHERE ProjMgrID = TeamMember.ID)
  THEN 'Yes' 
  ELSE 'No' 
  END
FROM dbo.TeamMember; 
```

如果情况没有那么好，那么我怀疑索引丢失了，没有它们，任何查询都不会很好地执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:38:30.240

我不知道“更好”的方式，但您可以尝试*另一种方式：*

```
SELECT ... other fields you want ...,
       CASE WHEN ProjMgr.ProjMgrID IS NULL
            THEN 'No'
            ELSE 'Yes'
        END AS OnProjAsMgr
  FROM TeamMember
  LEFT
 OUTER
  JOIN ProjMgr
    ON ProjMgr.ProjMgrID = TeamMember.ID
; 
```

笔记：

*   在某些 DBMS 上，这将比您的查询执行得更好，但我不知道它是否会在 SQL Server 2005 上执行得更好，因为您的查询已经在 SQL Server 2000 上运行良好。我认为您只需要尝试它。
*   您的查询使用`SELECT DISTINCT ProjMgrID FROM ProjMgr`. 如果这实际上不同于`SELECT ProjMgrID FROM ProjMgr`- 也就是说，如果实际上存在重复的`ProjMgrID`in值`ProjMgr`- 那么上述查询并不完全等同于您的查询，因为它将为每个重复项提供单独的记录。在这种情况下，您可能必须添加一个`GROUP BY`子句。
*   就此而言，如果正如我怀疑的那样，如果`SELECT DISTINCT ProjMgrID FROM ProjMgr`相当于`SELECT ProjMgrID FROM ProjMgr`您的数据，那么也可能值得删除`DISTINCT`，因为这也可能会影响优化器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T20:41:31.033

```
SELECT (
    CASE WHEN P.ID IS NULL THEN 'No' ELSE 'Yes' END
) AS OnProjAsMgr
FROM TeamMember AS T 
LEFT OUTER JOIN ProjMgr AS P ON T.ID=P.ID 
```

# rabbitmq - Rabbitmq 队列分片

> ID：12377462
> 
> 赞同：1
> 
> 时间：2012-09-11T20:31:07.367
> 
> 标签：rabbitmq, sharding

我必须实现这个场景：
一个外部应用程序发布消息到rabbitmq。此消息具有 client_id 属性。我们可以将此 id 放在路由键或消息头或其他一些属性中。
我必须在交换路由逻辑中实现分片 - 应该根据 client_id 范围将消息传递到特定队列。

是否可以在标准交易所实施？
如果不是，我应该以什么交易所为基础？
如何动态更改 client_id 范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T16:45:40.120

看看[rabbitmq 插件](https://github.com/rabbitmq/rabbitmq-sharding)。它包含在从 v3.6.0 开始的 RabbitMQ 发行版中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T03:51:06.357

只需让您的生产者将足够的信息放入路由键中，从而使消息进入 Exchange 另一端的正确队列。

因此，例如，创建两个名为 1 和 2 的队列，并将它们与匹配名称的路由键绑定。然后让您的生产者决定在生成事件消息时使用哪个路由键。名称以字母开头的客户 am 转到 1，nz 转到 2，你明白了。它将分片推送给生产者，但这对您的应用程序来说可能没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:36:02.447

AMQP 没有任何明确的分片实现，但它的架构应该可以帮助您做到这一点。

将消息传播到多个队列只是一个 rabbitmq 挑战（也是 amqp 规范的一部分），并且通过路由，您可以附加异构消费者来处理通过同一交换路由的特定消息。因此，生产者应该推送一个特定的键以供特定的队列/消费者消费......

您可以决定进行静态分片，也许您有 10 个队列，每个队列有一个消费者。你可以实现一个一致的散列函数，这样键是 CLIENT_ID % 10。

可以提出另一种方法和非静态解决方案，您可以尝试超越此架构。

# jquery-ui - 当拖动的项目是来自原始容器的最后一个可拖动对象时，jQuery Drag Drop 取消

> ID：12377466
> 
> 赞同：2
> 
> 时间：2012-09-11T20:31:27.320
> 
> 标签：jquery-ui, drag-and-drop, draggable, jquery-ui-sortable

我定义了多个 DropZone，每个 dropZone 至少需要保留一个可拖动对象。

当用户尝试从 dropZone 中移动最后一个项目时，我需要警告用户，最后一个项目无法移动并取消移动操作。我读到 ui.render 可以在接收事件中访问，尽管它总是空的。

我需要访问原始的可拖动父级（它来自的 dropZone）并计算可拖动子级的计数。当计数现在为 0 时，我将取消移动操作，以便拖动的块返回到它的原始位置。

就像是：

```
function SortableReceiveDrag(event, ui) {
    if ($(ui.sender).find("div.dragableBlock").length <= 0) {
        $(ui.sender).sortable('cancel');        
    }
} 
```

我的绑定如下：

```
var templateContent = $("#templatectn");
contentDropZones = templateContent.find('div.ContentZone.dropZone');
contentDropZones.sortable({
    accept: 'div.dragableBlock',
    connectWith: 'div.ContentZone.dropZone',
    appendTo: "parent",
    axis: false,
    containment: 'document',
    cursor: 'move',
    cursorAt: false,
    dropOnEmpty: true,
    forceHelperSize: true,
    forcePlaceholderSize: true,
    iframeFix: true,
    items: 'div.dragableBlock',
    greedy: true,
    grid: false,
    helper: "clone",
    opacity: 0.45,
    placeholder: 'ui-block-placeholder',
    revert: false,
    scroll: true,
    scrollSensitivity: 20,
    scrollSpeed: 20,
    scope: "default",
    tolerance: "pointer",
    zIndex: 2700,
    start: function (event, ui) { SortableStartDrag(event, ui); },
    stop: function (event, ui) { SortableStopDrag(event, ui); },
    receive: function (event, ui) { SortableReceiveDrag(event, ui); },
    change: SortableChange
});
contentDropZones.disableSelection(); 
```

知道为什么这不起作用吗？

谢谢，弗朗索瓦

# javascript - 如何操作 iframe 之外的元素

> ID：12377468
> 
> 赞同：0
> 
> 时间：2012-09-11T20:31:28.370
> 
> 标签：javascript, jquery

我试图通过在我的 iframe 中设置 JS 来操作 iframe 之外的元素 style.backgroundColor 代码有效但不是 innerHtml

我有

```
<script type="text/javascript"> 
           //get main document element.
           var ititle= parent.document.getElementById('MainTitle');
           //works          
           ititle.style.backgroundColor = "#FFCC00";
       //doesn't work
       ititle.innerHtml='test html';
</script> 
```

上面的脚本在我的 iframe 里面

有什么原因吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:33:57.193

Because JavaScript is CaseSensitive, and it's `innerHTML` (all uppers):

```
 ititle.innerHtml='test html';
 //should be
 ititle.innerHTML='test html'; 
```

# vbscript - 将 URL 参数传递给独立的 VBscript？

> ID：12377469
> 
> 赞同：0
> 
> 时间：2012-09-11T20:31:31.197
> 
> 标签：vbscript

假设在 Internet Explorer 中，您正在调用脚本，该脚本通过以下方式驻留在网络共享中

```
file://///server/path/to/script.vbs 
```

但是那个脚本有参数。如何传递这些论点？如果这不可能，是否有另一种支持此功能的 Windows 脚本语言？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:38:46.217

我知道您要求从 Internet Explorer 执行此操作，但您是否考虑通过将网页从 filename.html 重命名为 filename.hta 来考虑[HTML 应用程序（参见 Wikipedia） ？](http://en.wikipedia.org/wiki/HTML_Application)这样，您的 HTML 页面将以完全权限运行，并且您希望嵌入其中的任何 SCRIPT 都将具有完全权限。

# iphone - 单击表格视图的单元格时，如何将数据从一个表格视图传递到另一个视图？

> ID：12377470
> 
> 赞同：0
> 
> 时间：2012-09-11T20:31:32.467
> 
> 标签：iphone, ios, xcode, uitableview, pass-data

我是一个初学者，在做我的项目时遇到了一些问题。我有一个表格视图，我通过 XML Parsing 获得了一些 NSString 值。这就像：单元格 1：基本名称 - 姓名、地址、电话号码、日期。单元格 2：特色名称 - 姓名、地址、电话号码、日期。单元格 3：餐厅名称 - 名称、地址、电话号码、日期。

在这里，单元格 1、2、3 是我的表格视图的单元格，名称、地址、电话号码、日期是值。我通过 XML 解析得到基本名称、特色名称、餐厅名称和所有这些值。现在我的工作是，当我单击基本名称时，带有基本名称的详细信息（姓名、地址、电话号码、日期）将传递到另一个页面。单击时将显示每个单元格的描述。我可以单击一个单元格并转到另一个页面，但无法传递这些数据。需要注意的是，我使用的是 Xcode 4.2 而不是故事板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:01:26.510

你需要考虑模型、视图和控制器。您的模型是您的表呈现的基础数据。表是视图，控制器负责从模型中提取数据并将其传递给表和视图。

因此，不要考虑“我如何在表和视图之间传递数据？”，而是考虑“我如何为我的视图控制器提供数据，以便*它*可以将数据传递给它的视图？”

所以在这种情况下，正如艾伦建议的那样，你将不得不传递对象。

假设您的第一个表的模型是`NSArray`of `NSDictionaries`，这是 parsinf XML 的一个相当常见的结果。每个字典都有餐厅信息的键值对。您的详细视图控制器需要一个字典属性。在该`tableView:didSelectRowAtIndexPath:`方法中，您将为详细视图实例化新的视图控制器，然后将视图控制器的数据属性设置为数组中与刚刚选择的单元格行相对应的索引处的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:45:53.923

您的详细视图控制器只需要为您希望它显示的相关模型对象实现一个属性或一个 setter 方法。`tableView:didSelectRowAtIndexPath:`通常，您会在 master`UITableView`委托的方法中设置此属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:57:21.240

只需使用 Delegate 变量检查其中一个概念：

1)[将参数从一个视图传回另一个视图的 UITableView 的单元格](https://stackoverflow.com/a/5964303/434898)

它可用于一次将值传递给多个类。

或者，您也可以使用 Singleton 类做同样的事情。

在您的情况下，您可以使用 Array/Dictionary 将多个值传递给另一个类。

# python - write() 与 writelines() 和连接字符串

> ID：12377473
> 
> 赞同：150
> 
> 时间：2012-09-11T20:31:47.203
> 
> 标签：python, string, file-io, python-2.x

所以我正在学习Python。我正在学习这些课程并遇到了一个问题，我必须将很多东西压缩`target.write()`成一个`write()`，同时`"\n"`在每个用户输入变量（的对象`write()`）之间都有一个。

我想出了：

```
nl = "\n"
lines = line1, nl, line2, nl, line3, nl
textdoc.writelines(lines) 
```

如果我尝试这样做：

```
textdoc.write(lines) 
```

我得到一个错误。但如果我输入：

```
textdoc.write(line1 + "\n" + line2 + ....) 
```

然后它工作正常。为什么我不能使用字符串作为换行符，`write()`但我可以使用它`writelines()`？

蟒蛇 2.7

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-09-11T20:36:47.800

*   `writelines`期望一个可迭代的字符串
*   `write`需要一个字符串。

`line1 + "\n" + line2`将这些字符串合并为一个字符串，然后再将其传递给`write`.

请注意，如果您有很多行，您可能需要使用`"\n".join(list_of_lines)`.

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2012-09-11T20:40:17.223

*为什么我不能在 write() 中使用字符串作为换行符，但我可以在 writelines() 中使用它？*

这个想法如下：如果你想写一个字符串，你可以用`write()`. 如果您有一系列字符串，您可以使用`writelines()`.

`write(arg)`需要一个字符串作为参数并将其写入文件。如果您提供字符串列表，它将引发异常（顺便说一下，向我们显示错误！）。

`writelines(arg)`期望一个可迭代对象作为参数（可迭代对象可以是元组、列表、字符串或最一般意义上的迭代器）。迭代器中包含的每个项目都应该是一个字符串。你提供了一个字符串元组，所以一切正常。

字符串的性质对这两个函数都无关紧要，即它们只是将您提供的任何内容写入文件。有趣的部分是它`writelines()`本身不添加换行符，因此方法名称实际上可能会很混乱。它实际上表现得像一个名为`write_all_of_these_strings(sequence)`.

以下是 Python 中将字符串列表写入文件的惯用方式，同时将每个字符串保留在自己的行中：

```
lines = ['line1', 'line2']
with open('filename.txt', 'w') as f:
    f.write('\n'.join(lines)) 
```

这会为您关闭文件。该构造`'\n'.join(lines)`连接（连接）列表中的字符串，`lines`并使用字符 '\n' 作为胶水。它比使用`+`运算符更有效。

从相同的`lines`序列开始，以相同的输出结束，但使用`writelines()`：

```
lines = ['line1', 'line2']
with open('filename.txt', 'w') as f:
    f.writelines("%s\n" % l for l in lines) 
```

这利用了生成器表达式并动态创建以换行符结尾的字符串。`writelines()`遍历这个字符串序列并写入每个项目。

**编辑：您应该注意的另一点：**

`write()`并且在被介绍`readlines()`之前就已经存在。后来作为 的对应物引入，因此可以轻松地写入刚刚通过以下方式读取的文件内容：`writelines()``writelines()``readlines()``readlines()`

```
outfile.writelines(infile.readlines()) 
```

`writelines`真的，这就是为什么有这样一个令人困惑的名字的主要原因。而且，今天，我们真的不想再使用这种方法了。在开始写入数据`readlines()`之前将整个文件读取到您机器的内存中。`writelines()`首先，这可能会浪费时间。为什么不在读取其他部分的同时开始写入部分数据？但是，最重要的是，这种方法可能非常消耗内存。在输入文件大于机器内存的极端情况下，这种方法甚至行不通。这个问题的解决方案是只使用迭代器。一个工作示例：

```
with open('inputfile') as infile:
    with open('outputfile') as outfile:
        for line in infile:
            outfile.write(line) 
```

这将逐行读取输入文件。只要读取一行，就会将此行写入输出文件。从示意图上讲，内存中总是只有一行（相比之下，在 readlines/writelines 方法的情况下整个文件内容都在内存中）。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-09-17T22:18:44.003

实际上，我认为问题在于您的变量“行”不好。您将行定义为元组，但我相信 write() 需要一个字符串。您只需将逗号更改为加号 (+)。

```
nl = "\n"
lines = line1+nl+line2+nl+line3+nl
textdoc.writelines(lines) 
```

应该管用。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2015-03-11T15:29:39.603

如果您只想保存和加载列表，请尝试[Pickle](https://docs.python.org/3.4/library/pickle.html#module-pickle)

泡菜保存：

```
with open("yourFile","wb")as file:
 pickle.dump(YourList,file) 
```

和加载：

```
with open("yourFile","rb")as file:
 YourList=pickle.load(file) 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2017-02-06T07:30:12.983

Zed Shaw 书中的练习 16？您可以按如下方式使用转义字符：

```
paragraph1 = "%s \n %s \n %s \n" % (line1, line2, line3)
target.write(paragraph1)
target.close() 
```

# jquery - 检查先前单击的值是否在数组内

> ID：12377474
> 
> 赞同：0
> 
> 时间：2012-09-11T20:31:49.457
> 
> 标签：jquery

我有一个不同类别的列表。所有列表项都是可点击的。我希望用户选择 1 到 3 个项目。他们可以切换他们的选择，但最大值始终是 3。到目前为止，一切都很好。

对我来说棘手的地方在于，我有一些特殊类别无法与其他类别结合。

当用户点击其中一个时，所有其他类别都会取消选择并且他们不能添加任何其他类别，（这些项目只有 1 个类别选择可能）

示例：

假设“汽车”是一个特殊的类别。如果他们单击 Car，则取消选择其他所有内容，选择 Car，**并且他们无法选择其他任何内容。但是他们可以再次单击 Car 以取消选择它，然后从那里重新开始逻辑。**

我的代码中缺少的是上面的粗体部分。

我的代码：

```
$j('.chooseCat li').on('click',function(){
   var $this = $j(this); //list item clicked
   var catId =  $this.children("a").attr("rel"); // list item id
   var specialCat = ['6','36','63']; 

   if ($this.hasClass("selected")) {
      $this.removeClass("selected");
      $j("#categorySuggestions p.error").hide("fast")
   } else {
      if( $j.inArray(catId, specialCat) !== -1  ) {
         $j('.chooseCat li').removeClass("selected");
         $this.addClass("selected");
      } else {
         if ($j('.chooseCat li.selected').length <= 2){
            $this.addClass("selected");
         } else {
             $j("#categorySuggestions p.error").show("fast").html("You cannot select any more categories");
         }
      }
   }
}); 
```

Iam 所在位置的工作 jsFiddle：http: [//jsfiddle.net/nfQum/9/](http://jsfiddle.net/nfQum/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:48:02.320

我已经添加了这部分代码，它通过 specialCat 进行迭代，并删除了与相关的类。您遇到的问题是您正在尝试为 a 标签删除类，而该类已应用于 li 。

```
if ($.inArray(catId, specialCat) > -1) {
            $.each(specialCat, function(i) {
                $('.chooseCat li').find('a[rel=' + specialCat[i]+ ']').parent().removeClass('selected');
            });
            $this.addClass("selected");
        } 
```

检查这个[更新的小提琴](http://jsfiddle.net/sushanth009/nfQum/13/)

让我知道这是否是你要找的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:11:33.813

[http://jsfiddle.net/zD32M/4/](http://jsfiddle.net/zD32M/4/)（里面的所有评论）

[http://jsfiddle.net/RmqJ6/](http://jsfiddle.net/RmqJ6/) - Class 有点难:)

[http://jsfiddle.net/RmqJ6/2/](http://jsfiddle.net/RmqJ6/2/) - 如果你想在特殊猫之间切换的话。

如果您需要元素的 id ，只需使用 ids 数组。所以你有所有选择的值。

干得好。抱歉完全重写，更好的方法是为这个东西编写一个构造函数，这样你就可以多次使用它。玩得开心。

顺便说一句，rel 很好，但更好地使用数据属性，尤其是 jQuery（如果你不止一次需要它，它会更快）。

# android - 使用带有 PreferenceActivity 或 PreferenceFragment 的 SharedPreferences 的自定义子类

> ID：12377479
> 
> 赞同：15
> 
> 时间：2012-09-11T20:31:59.830
> 
> 标签：android, sharedpreferences, android-preferences

我正在使用 SharedPreferences 的自定义子类来加密我在应用程序中保存的设置，类似于这里的第二个响应中所做的：[What is the most appropriate way to store user settings in Android application](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application)

我必须保存的偏好数量正在增加。在我只是使用自定义视图来更新这些首选项之前，但这会变得很麻烦，我想改用 PreferenceActivity 或 PreferenceFragment。问题是，似乎没有办法让这些类中的任何一个使用我的子类访问我的数据，这意味着它从默认首选项文件中提取的数据将是乱码，因为它没有被解密。

我发现有些人已经创建了 Preference 的自定义实现来加密那里的数据，但我不想这样做，因为数据已经在我的 SharedPreferences 子类中被加密/解密，我想保留它方式。我也一直在查看 PreferenceActivity 和 PreferenceManager 的源代码，但我不确定解决这个问题的最佳方法。

有没有其他人幸运地完成了这样的事情，并对我可以从哪里开始有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:04:19.473

我认为通过将您的加密保留在您已经拥有的 SharedPrefs 子类中，您可以限制模块化和关注点的分离。

因此，我建议重新考虑对偏好类本身进行子分类（例如 CheckBoxPreference）并在那里执行您的计算。

理想情况下，您还可以使用某种类型的组合或静态实用程序，这样虽然您可能必须对您使用的每种偏好类型进行子类化，但您可以使用单个位置来执行加密/解密计算。如果您需要加密或解密某些其他数据或 API 发生更改，这也将为您提供更大的灵活性。

对于子分类，也许你可以这样做：

例如：

```
class ListPreferenceCrypt extends ListPreference
{
    ListPreferenceCrypt (Context context, AttributeSet attrs)   {
        super ( context, attrs );
    }
    ListPreferenceCrypt (Context context)   {
        super ( context );
    }

    @Override
    public void setValue( String value )
    {
        //encrypt value
        String encryptedVal = MyCryptUtil.encrypt(value);
        super.setValue ( encryptedVal );
    }

    @Override
    public String getValue( String key )
    {
        //decrypt value
        String decryptedValue = MyCryptUtil.decrypt(super.getValue ( key ));
        return decryptedValue;
    }

} 
```

***注意**以上是伪代码，会有不同的方法来覆盖*

您的 XML 可能如下所示：

```
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
            android:title="@string/inline_preferences">

        <com.example.myprefs.ListPreferenceCrypt
                android:key="listcrypt_preference"
                android:title="@string/title_listcrypt_preference"
                android:summary="@string/summary_listcrypt_preference" />

    </PreferenceCategory>

</PreferenceScreen> 
```

**编辑**

*警告/反编译*

当我更多地考虑这一点时，我意识到其中一个警告是，在反编译 APK 时，这种方法并不是特别难以绕过。这确实给出了布局中覆盖类的完整类名（尽管可以通过不使用 XML 来避免）

但是，我认为这并不比 subclassing 安全得多`SharedPreferences`。这也容易被反编译。最终，如果您想要更强的安全性，您应该考虑替代存储方法。可能是您链接帖子中建议的 OAuth 或 AccountManager。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:18:48.340

这个怎么样：

*   在 .SO 中存储一个字节 [16]。如果您不使用 .SO，那么就为此目的制作一个。
*   使用该字节数组加密一个新字节[16]，然后 Base64 编码结果。在你的类文件中硬编码。

现在您已经设置了密钥，让我解释一下：

是的，可能有人可以窥视 .SO 并找到字节数组，从而找到您的密钥。但是由于加密的 key2 是 base64 编码的，他需要对其进行解码并使用所述密钥反转加密以提取 key2 字节。到目前为止，这只涉及拆卸应用程序。

*   当您要存储加密数据时，首先使用 key1 进行 AES 传递，然后使用 Key2 和 IV* 进行 AES/CBC/Padding5 传递
*   如果您想在每次存储新密码时更改 IV，您可以安全地对 IV 进行 Base64 编码并将其保存在 /data/data 文件夹中。

通过这两个步骤，不再需要拆卸应用程序，因为现在还需要控制运行时以获取加密数据。您不得不说对于存储的密码来说已经足够了。

然后你可以简单地将它存储到 SharedPreferences :) 这样如果你的 SharedPreferences 被泄露，数据仍然被锁定。我不认为子类化它真的是正确的方法，但因为你已经写了你的类 - 哦，好吧。

这是一些代码来进一步说明我的意思

```
//use to encrypt key
public static byte[] encryptA(byte[] value) throws GeneralSecurityException, IOException
{
    SecretKeySpec sks = getSecretKeySpec(true);
    System.err.println("encrypt():\t" + sks.toString());
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, sks, cipher.getParameters());
    byte[] encrypted = cipher.doFinal(value);
    return encrypted;
}

//use to encrypt data
public static byte[] encrypt2(byte[] value) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(true);
    System.err.println("encrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, key1, cipher.getParameters());
    byte[] encrypted = cipher.doFinal(value);

    SecretKeySpec key2 = getSecretKeySpec(false);
    System.err.println("encrypt():\t" + key2.toString());
    cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, key2, new IvParameterSpec(getIV()));
    byte[] encrypted2 = cipher.doFinal(encrypted);

    return encrypted2;//Base64Coder.encode(encrypted2);
}
//use to decrypt data
public static byte[] decrypt2(byte[] message, boolean A) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(false);
    System.err.println("decrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.DECRYPT_MODE, key1, new IvParameterSpec(getIV()));
    byte[] decrypted = cipher.doFinal(message);

    SecretKeySpec key2 = getSecretKeySpec(true);
    System.err.println("decrypt():\t" + key2.toString());
    cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, key2);
    byte[] decrypted2 = cipher.doFinal(decrypted);

    return decrypted2;
}

    //use to decrypt key
public static byte[] decryptKey(String message, byte[] key) throws GeneralSecurityException
{
    SecretKeySpec sks = new SecretKeySpec(key, ALGORITHM);
    System.err.println("decryptKey()");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, sks);
    byte[] decrypted = cipher.doFinal(Base64Coder.decode(message));
    return decrypted;
}

//method for fetching keys
private static SecretKeySpec getSecretKeySpec(boolean fromSO) throws NoSuchAlgorithmException, IOException, GeneralSecurityException
{
    return new SecretKeySpec(fromSO ? getKeyBytesFromSO() : getKeyBytesFromAssets(), "AES");
} 
```

你怎么看？

我意识到这可能是题外话，因为您询问是否使用自己的 SharedPreferences 但我为您提供了一个解决存储敏感数据问题的可行解决方案:)

# eclipse - Keep Eclipse from confirming auto completions on "space", "(", "<", etc

> ID：12377481
> 
> 赞同：0
> 
> 时间：2012-09-11T20:32:06.123
> 
> 标签：eclipse

As described [in this question](https://stackoverflow.com/questions/6202223/auto-code-completion-on-eclipse) one can have auto complete (Content Assist) appear automatically as you type. There is, however, a problem with this setup.

Eclipse figures it's a good idea to **accept** the first suggested completion when LOADS of different keys are pressed. Such as space, braces and other stuff you really need to type often without inserting a suggestion.

Any Eclipse wiz out there who knows how to turn this auto insertion off without disabling the suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:35:17.333

打开窗口 --> 首选项。在过滤器中输入“内容辅助”，然后为您的编辑器禁用它（或更改激活首选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-23T07:09:05.107

转到`Window`-> `Preferences`-> `Java`-> `Editor`-> `Content Assist`-> `Auto Activation`->`Auto activation triggers for Java`并输入 ".abcdefghijklmnopqrstuvwxyz" 。您可以添加或删除任何字符，按下它会触发自动完成菜单。

在您的情况下，请确保您没有空格， ( 或 < 包含在`Auto activation triggers for Java`

# php - Query failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens

> ID：12377482
> 
> 赞同：0
> 
> 时间：2012-09-11T20:32:07.677
> 
> 标签：php, pdo

I am using PDO and UPDATING multiple tables in a database. Each time I execute the query I receive the following error:

Query failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens

I have gone through and checked and it seems to be correct. I can run the query in PHPMyAdmin with hard values and it will update the tables. I have hard coded the table names for testing.

```
 $conn = parent::connect();
            $sql = "UPDATE ds_employee 
                    LEFT OUTER JOIN ds_employee_address ON ds_employee.id_employee = ds_employee_address.fk_employee
                    LEFT OUTER JOIN ds_employee_detail ON ds_employee.id_employee = ds_employee_detail.fk_employee
                    SET 
                      ds_employee.emp_lastname = :emp_lastname,
                      ds_employee.emp_firstname = :emp_firstname,
                      ds_employee.emp_middlename = :emp_middlename,
                      ds_employee.emp_prefername = :emp_prefername,
                      ds_employee_address.address1 = :address1,
                      ds_employee_address.address2 = :address2,
                      ds_employee_address.city = :city,
                      ds_employee_address.state = :state,
                      ds_employee_address.postal_code = :postal_code,
                      ds_employee_address.country = :country,
                      ds_employee_detail.hphone = :hphone,
                      ds_employee_detail.wphone = :wphone,
                      ds_employee_detail.mphone = :mphone,
                      ds_employee_detail.emp_email = :emp_email,
                      ds_employee_detail.gender = :gender,
                      ds_employee_detail.DOB = :DOB,
                      ds_employee_detail.ssn = :ssn,
                      ds_employee_detail.ethnicity = :ethnicity,
                      ds_employee_detail.filing_staus = :filing_status,
                      ds_employee_detail.emp_sdate = :emp_sdate,
                      ds_employee_detail.fk_department = :fk_department,
                      ds_employee_detail.job_title = :job_title,
                      ds_employee_detail.fk_manager = :fk_manager,
                      ds_employee_detail.drug_test = :drug_test,
                      ds_employee_detail.bg_check = :bg_check
                    WHERE  ds_employee.id_employee = :id_employee"; 

            try {
              $st = $conn->prepare( $sql );
              $st->bindValue( ":emp_lastname", $this->data["emp_lastname"], PDO::PARAM_STR );
              $st->bindValue( ":emp_firstname", $this->data["emp_firstname"], PDO::PARAM_STR );
              $st->bindValue( ":emp_middlename", $this->data["emp_middlename"], PDO::PARAM_STR );
              $st->bindValue( ":emp_prefername", $this->data["emp_prefername"], PDO::PARAM_STR );
              $st->bindValue( ":address1", $this->data["address1"], PDO::PARAM_STR );
              $st->bindValue( ":address2", $this->data["address2"], PDO::PARAM_STR );
              $st->bindValue( ":city", $this->data["city"], PDO::PARAM_STR );
              $st->bindValue( ":state", $this->data["state"], PDO::PARAM_STR );
              $st->bindValue( ":postal_code", $this->data["postal_code"], PDO::PARAM_STR );
              $st->bindValue( ":country", $this->data["country"], PDO::PARAM_STR );
              $st->bindValue( ":hphone", $this->data["hphone"], PDO::PARAM_STR );
              $st->bindValue( ":wphone", $this->data["wphone"], PDO::PARAM_STR );
              $st->bindValue( ":mphone", $this->data["mphone"], PDO::PARAM_STR );
              $st->bindValue( ":emp_email", $this->data["emp_email"], PDO::PARAM_STR );
              $st->bindValue( ":gender", $this->data["gender"], PDO::PARAM_STR );
              $st->bindValue( ":DOB", $this->data["DOB"], PDO::PARAM_STR );
              $st->bindValue( ":ssn", $this->data["ssn"], PDO::PARAM_STR );
              $st->bindValue( ":ethnicity", $this->data["ethnicity"], PDO::PARAM_INT );
              $st->bindValue( ":filing_status", $this->data["filing_status"], PDO::PARAM_STR );
              $st->bindValue( ":emp_sdate", $this->data["emp_sdate"], PDO::PARAM_INT );
              $st->bindValue( ":fk_department", $this->data["fk_department"], PDO::PARAM_INT );
              $st->bindValue( ":job_title", $this->data["job_title"], PDO::PARAM_STR );
              $st->bindValue( ":fk_manager", $this->data["fk_manager"], PDO::PARAM_STR );
              $st->bindValue( ":drug_test", $this->data["drug_test"], PDO::PARAM_STR );
              $st->bindValue( ":bg_check", $this->data["bg_check"], PDO::PARAM_STR );

              $st->execute();
              parent::disconnect( $conn );
            } catch ( PDOException $e ) {
              parent::disconnect( $conn );
              die( "Query failed: " . $e->getMessage() );
            }
          } 
```

Not sure what I am doing wrong. I hope someone can help me.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T20:33:24.080

You don't seem to be setting `:id_employee` anywhere.

# java - 尝试使用 javap.exe 反编译 java .class 文件

> ID：12377487
> 
> 赞同：3
> 
> 时间：2012-09-11T20:32:33.013
> 
> 标签：java, decompiler, javap

我有一些要反编译的 .class 文件。所以这就是我所做 `javap -c "C:\users\Richard\workspace\pruebas\bin\ClassName"`的：而且我一直都有同样的错误`ERROR:Could not find C:\users\Richard\workspace\pruebas\bin\ClassName`

但是，如果我使用 dir 命令列出此类目录中包含的文件，我可以看到它已列出。

你们知道可能是什么原因吗？我做了 man javap ，据我所知语法是正确的。

非常感谢任何想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T20:35:52.717

`javap`在类路径中查找类。因此，假设您的 ClassName 在默认包中，请像这样调用：

```
javap -c -classpath "C:\users\Richard\workspace\pruebas\bin" ClassName 
```

# android - Anchor Links In Fixed Footer of jQuery Mobile Is Not Firing An Event - Faced this in Android Devices

> ID：12377490
> 
> 赞同：0
> 
> 时间：2012-09-11T20:32:42.623
> 
> 标签：android, jquery-mobile

I was creating an application with fixed header and footer using jquery mobile.

I placed anchor links in fixed footer, in one of my page there is a big form which has got more buttons and select drop-downs.

When user clicks on an anchor link in footer, if there is any component behind that link - that is firing instead of this event.

As per my understanding this would might be because of low `z-index` value.

* * *

**Updated with more information:**

**1 -** I have a fixed footer with data-position="fixed". In that, I have four links where it helps user to navigate through the application.

**2 -** The links which are present in Footer works fine when there is a plain page with some text.

**3 -** I have a scenario like, when user is on complex form, if we have a situation like when footer is upon select box/button - the links on footer is not clickable, when we user clicks on a link, the select box/button event is firing instead of footer anchor links onclick event.

```
<div data-role="footer" data-position="fixed" data-theme="b" data-tap-toggle="false">
    <div data-role="navbar">
        <ul>
            <li class='Link1Class'><%: Html.ActionLink("Link1", "Link1Display", "Link1Data", null, htmlAttributes: new { data_icon = "Link1"})%></li>
            <li class='Link2Class'><%: Html.ActionLink("Link2", "Link1Display", "Link2Data", null, htmlAttributes: new { data_icon = "Link2"})%></li>
            <li class='Link3Class'><%: Html.ActionLink("Link3", "Link1Display", "Link3Data", null, htmlAttributes: new { data_icon = "Link3"})%></li>
            <li class='Link4Class'><%: Html.ActionLink("Link4", "Link1Display", "Link4Data", null, htmlAttributes: new { data_icon = "Link4"})%></li>
        </ul>
    </div><!-- /navbar -->
</div> 
```

# extjs4 - Extjs4.1 -- How to create a subclass for render / send a parameter?

> ID：12377491
> 
> 赞同：1
> 
> 时间：2012-09-11T20:32:46.577
> 
> 标签：extjs4, subclass

I have a checkitem menu and I want to add icons to each menu item, so I inserted each icon after the menu item is rendered.

peace of my code:

```
{   xtype: 'menucheckitem',
     text: 'First Arrow'
     listeners: {
           render: {
                 fn: me.onMenucheckitemRender,
                 scope: me
                        }
                     }
}

onMenucheckitemRender: function (abstractcomponent, options)
{
Ext.DomHelper.insertAfter(abstractcomponent.getEl().down(".x-menu-item-icon"), {
    tag: 'img', 
    src: "icons/arrow1.png"
});
} 
```

This works just fine, but since I will need it many times with different icons, I would like to know how to create a subclass so I can reuse this functionality.

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:49:29.663

使用[`Ext.define`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext-method-define)方法和[`extend`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-extend)属性。

```
Ext.define('SomeNamespace.menu.menucheckitemWithIcon', {
  extand: 'Ext.menu.CheckItem',
  alias: 'widget.menucheckitemWithIcon',

  .
  .
  . 

}); 
```

# jquery - jquery ui 手风琴可拖动和调整大小

> ID：12377509
> 
> 赞同：0
> 
> 时间：2012-09-11T20:34:09.930
> 
> 标签：jquery, jquery-ui

我在我的 web 应用程序中使用 jquery ui 作为手风琴菜单框。我能够很好地向手风琴添加项目。它是.draggable。但是，如果可能的话，我希望它也是 .resizable 但是我不知道如何让它工作。这是我的相关 html 部分：

```
<div id="layer_accordion">
        <h3><a href="#Accordion1"></a></h3>
        <div>
        </div>
</div> 
```

这是 jquery 部分：

```
$("#layer_accordion").draggable({ cursorAt: { top: -10, left: -10 } });
// now initiate accordion
$("#layer_accordion").accordion({ clearStyle: true, autoHeight: false });
$('#layer_accordion').accordion('activate', 1); 
```

任何帮助将不胜感激。

干杯，德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:52:56.390

您的控制台中是否收到任何 JS 错误？是否有任何样式可能妨碍它正确运行？

我能够让它工作。使用 JQuery 1.7.2 和 JQuery UI 1.8.23 您必须查看 JQuery UI 文档上的 CSS 以了解它们如何保持右下角的大小调整句柄。

[http://jqueryui.com/demos/resizable/](http://jqueryui.com/demos/resizable/)

这很难看，但这是我拥有的所有代码：

```
 <!doctype html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <style type="text/css">
        #layer_accordion { border: 1px solid #000; width: 200px; display:inline-block;}
        .ui-resizable-handle { width: 16px; border: 1px solid #0f0; height: 16px;}
    </style>

</head>
<body>

<div id="layer_accordion">
        <h3><a href="#Accordion1">asdf</a></h3>
        <div>
            content 1
        </div>
        <h3><a href="#Accordion2">asdf</a></h3>
        <div>
            content 2
        </div>
</div>
</body>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#layer_accordion").draggable({ cursorAt: { top: -10, left: -10 } });
        $("#layer_accordion").accordion({ clearStyle: true, autoHeight: false });
        $('#layer_accordion').accordion('activate', 1);
        $('#layer_accordion').resizable();
    });

    </script>
</html> 
```

# image - 将标签叠加到 RGB 图像上

> ID：12377510
> 
> 赞同：1
> 
> 时间：2012-09-11T20:34:28.973
> 
> 标签：image, matlab

我有两个矩阵，一个是 RxCx3（RGB 图像），另一个是 RxC（标签）。大多数标签为零，我想在 RGB 图像上绘制非零标签。更具体地说，我想叠加图：

```
imagesc(labels) 
```

上图：

```
imshow(rgb) 
```

标签中的零值除外。实现它的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:19:37.000

好吧，这是我对您的问题的解释：您想将矩阵的非零元素叠加到图像上（例如热图）。

此处的此页面将为您提供有关非零方面所需的一切，但通常您会执行类似的操作

```
find(Labels) 
```

在处理部分内，然后将仅处理“标签”> 0 的那些元素。（如果您的需求发生变化，您可以使“查找”中的表达式更复杂）

[查找 - Matlab](http://www.mathworks.com/help/techdoc/ref/find.html)

但是，要实际叠加图像（您需要标签），您需要做出决定。物理更改要显示的图像以显示标签或透明地覆盖标签。以下页面包含有关实现此结果的重要信息：

[在 MATLAB 中叠加图像](http://www.mathworks.com/support/solutions/en/data/1-1AK7N/)

我怀疑你的要求，你想采取透明路线（我也会推荐它）

# javascript - I'm styling a drop down menu that onclick will appear and on blur will disappear

> ID：12377511
> 
> 赞同：0
> 
> 时间：2012-09-11T20:34:32.590
> 
> 标签：javascript, jquery, css, drop-down-menu

Unfortunately I am having issues with the disappearing of the drop down. I'm currently using toggleClass to add/remove the class on click but I also need this process undone when the menu is blurred ie: clicking anywhere else on the page etc. Here is my jquery code:

```
$(function() {$('#srt-btn').click(function() {$('ul.toggle-off').toggleClass('toggle-on')});});

<ul id="sort">
<li><a id="srt-btn" class="srt-title">Sort ▾&lt;/a>
        <ul class="sort-menu toggle-off">
            <div class="droid"></div>
            <li class="top"><a href="#">Notes</a></li>
            <li><a href="#">Photos</a></li>
            <li><a href="#">Videos</a></li>
            <li class="divider"></li>
            <li class="btm"><a href="#">Make List</a></li>
    </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:08:10.747

您还可以使用 stopPropagation 取消点击事件

```
$(function() {
    $('#srt-btn').click(
        function(e) {
            $('ul.sort-menu').slideToggle();
            e.stopPropagation();
        }
    );
    $('.sort-menu li').click(
        function(e) {
            $('ul.sort-menu').slideUp();
            e.stopPropagation();
        }
    );
    $(document).click(
        function(){
            $('ul.sort-menu').slideUp();
        }
    );

}); 
```

并且不要忘记将您的菜单选项 ul 设置为 position:absolute 否则您的元素会移动

这是一个[jsFiddle](http://jsfiddle.net/VfLsF/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:37:35.920

```
function toggleMenu() 
{   
     $('ul.toggle-off').toggleClass('toggle-on');
}

$(function() {
     $('#srt-btn').click(toggleMenu);
     $('#srt-btn').blur(toggleMenu);
}); 
```

[工作示例。](http://jsfiddle.net/S9mW3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:05:36.643

你可以尝试这样的事情：

```
var IsInside = false,
    $sortMenu = $('#sort'),
    $toggleOn = $('.toggle-off');

$sortMenu.on('mouseenter', '#srt-btn', function(){
  IsInside = true;
}).on('mouseleave', '#srt-btn', function(){
  IsInside = false;
});

$sortMenu.on('click', '#srt-btn', function(){
  $toggleOn.toggleClass('toggle-on');
});

$(document).on('click', 'body', function(){
  if(!IsInside) {
    $toggleOn.removeClass('toggle-on');
  }
}); 
```

这里有一个[jsFiddle](http://jsfiddle.net/W6JfG/)。

# actionscript - 为什么我的使用 addEventListener 添加的事件不起作用？

> ID：12377518
> 
> 赞同：0
> 
> 时间：2012-09-11T20:34:52.437
> 
> 标签：actionscript, event-handling

我正在尝试[RestClientLib](https://github.com/logicminds/restclientlib)并且我添加的事件监听器没有被触发。我不明白为什么。有人有什么想法吗？

```
var restClient = new RestClient();

protected function btnInfo2_clickHandler(event:MouseEvent):void
{
    restClient.host = "somehost";
    restClient.port = "443";
    restClient.secure = true;

    restClient.setupRequest(RestClient.METHOD_GET, "somemethod");
    restClient.addparam("format","json");

    restClient.addEventListener(RestEvent.RESULT, onResult);
    restClient.sendrequest();               
}

protected function onResult(event:RestEvent):void
{
    trace("onResult");
} 
```

如果我在 RestClient 的源代码中放置一个断点：

```
private function onResult(event:ResultEvent,token:Object=null):void
{
  trace("Reached onResult handler");
  var rawData:String = String(event.result);
  event.token.dispatchEvent(new RestEvent(RestEvent.RESULT, RestClient.SUCCESS, rawData,event.statusCode,null,event.token, true));
} 
```

实际接收到数据，但未传播事件。

我也尝试将气泡设置为真，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:43:24.277

看起来事件是在 event.token 上调度的。这个令牌看起来像是由 sendrequest 方法返回的。所以你会像这样添加监听器：

```
var token:AsyncToken = restClient.sendrequest();  
token.addEventListener(RestEvent.RESULT, onResult); 
```

希望有效。

# ios - 如何为每个注释显示不同的左侧附件图像？

> ID：12377532
> 
> 赞同：0
> 
> 时间：2012-09-11T20:35:57.537
> 
> 标签：ios, ios5, uiimageview, mkmapview, mkannotationview

我被困在这里，我想我会问是否有人可以帮助我解决这个问题，因为我正准备把头发扯掉。

我正在使用下面的以下教程/指南，并且已经到了最后，它对一个图像非常有用，但我想要的是能够为每个单独的注释设置不同的图像/缩略图

[教程/指南](http://mayurbirari.wordpress.com/2011/02/07/how-to-access-mkmapkit-in-iphone/)

我一直在努力让它工作一段时间，而且我已经看够了。哈哈

我对 xcode 很陌生，所以这就是我在努力解决它的原因。

*从OP的“建议编辑答案”：*

编辑：

我似乎无法理解你所说的工作，我被它难住了。

如果您可以查看，我已经在下面的 Dropbox 添加了我的项目副本。由于我已经尝试了很长时间并且无处可寻，因此目前可能有点混乱。

[https://www.dropbox.com/sh/6ddhege240konzo/XrpuFYF5y5](https://www.dropbox.com/sh/6ddhege240konzo/XrpuFYF5y5)

我很想弄清楚如何进行自定义标注。

我不确定的一件事是代表以及他们如何真正工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T02:02:39.007

您想`leftCalloutAccessoryView`为每个注释设置不同的图像。

是的`leftCalloutAccessoryView`属性，`MKAnnotationView`因此您需要在`viewForAnnotation`委托方法中设置它（这是您创建和返回 的地方`MKAnnotationView`）。

`viewForAnnotation`委托方法获取对您需要在`annotation`参数中为其创建视图的注释的引用。

因此，基于 的某些属性`annotation`，您可以进行`leftCalloutAccessoryView`相应的设置。

在最粗略的水平上，您可以`leftCalloutAccessoryView`根据`annotation.title`.
例如：如果标题为“SFO”，则将图像设置为“apple”，如果标题为“ATL”，则将图像设置为“peach”，等等。

但是，最好创建一个单独的属性（在实现 的注释类中`MKAnnotation`）清楚地指示要用于注释的图像。这个属性可以是它`UIImage`本身、图像的名称、一个数字等——任何最适合你的情况。

*在创建注解时和调用之前`addAnnotation`，您设置注解的这个属性。*

然后在`viewForAnnotation`委托方法中，`leftCalloutAccessoryView`根据自定义注释属性设置。

例如，假设在注解类中添加了一个`NSString`名为的属性：`imageName`

```
MKAnnotationView *av = ... //or MKPinAnnotationView
//typical dequeue and alloc/init code here

if ([annotation isKindOfClass:[MyAnnotationClass class]])
{
    //cast the annotation parameter to your custom class
    //so you can easily access the custom properties...
    MyAnnotationClass *myAnn = (MyAnnotationClass *)annotation;

    //create UIImage based on custom property of annotation...
    UIImage *img = [UIImage imageNamed:myAnn.imageName];

    //create UIImageView to use for the leftCalloutAccessoryView...
    UIImageView *iv = [[[UIImageView alloc] initWithImage:img] autorelease];
    //if using ARC, remove the autorelease above

    av.leftCalloutAccessoryView = iv;
}

return av; 
```

# java - Java ProcessBuilder 无法运行简单的脚本

> ID：12377536
> 
> 赞同：1
> 
> 时间：2012-09-11T20:36:05.623
> 
> 标签：java, linux, bash, shell, processbuilder

我有`test.sh`哪个程序调用了一些程序，并且该程序输出了一些行。

我的需要是只捕获最后一行输出

所以如果我做简单

```
bash test.sh | tail -n 1  ========> Command 1 
```

然后我得到错误`"Do you want output to go to | or to tail"`

所以要解决上述问题，我会

```
(bash test.sh) | tail -n 1   =======> Command 2 
```

然后我得到简单的 1 行日志。到目前为止，一切都很好。

现在我需要通过java程序调用上面的命令，所以我将'（'作为第一个参数传递给`ProcessBuilder`但它抱怨它不能理解'（'作为第一个参数。

我怎样才能通过`Command 2`以`ProcessBuilder`获得最后一行日志。

我对bash和linux不是很熟悉，所以请原谅我的无知。我什至不知道为什么我会出错`command 1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:47:54.520

好吧，既然您现在使用的是 Java，那么您可以使用它的“一次编写，到处运行”的特性。编写一个程序，打开一个文件，读取它的行，然后获取最后一个。它适用于任何平台。

一个很好的类是[BuffedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:09:24.207

Java `ProcessBuilder`（以及相应的`Runtime.exec`方法）不支持管道（`|`）、重定向（`>`）和运行多个命令（`&`）。相反，您应该创建一个单独的脚本来调用您的 bash 脚本并将其通过管道传递给 tail：

```
#!/bin/sh
#tailLog.sh
bash test.sh | tail -n 1 
```

然后在Java中：

```
processBuilder.command("tailLog.sh"); 
```

请记住，`|`以及其他 shell 标记是特定于*shell*的，因此 Java 不会识别它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:05:17.163

要获取文件中的最后一行，请使用 -

```
$tail -1 filename.dat 
```

快速演示

```
$ cat filename.dat
Line 1
Line 2
Line 3
Line 4
End Line
$ tail -1 filename.dat
End Line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T21:11:48.487

您可以在此处重新排序以使其更容易。

*   无需使用 tail 命令，因为您可以在读取 ProcessBuilder 输出时捕获最后一个命令。
*   要确保您的脚本在您的 Java 应用程序调用它时运行，请确保它`#!/bin/bash`出现在您的脚本中的第一行。还要确保它是可执行的。

这是一个改编自现有应用程序的代码，它将捕获最后一行。

```
ProcessBuilder builder = new ProcessBuilder("test.sh");
Process process = builder.start();
InputStream is = process.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(is));
String line;
String lastLine = null;
while ((line = br.readLine()) != null) {
if (line != null) {
   lastLine = line;
}
}

System.out.println(lastLine); 
```

# javascript - 使用javascript进行实时图像处理

> ID：12377537
> 
> 赞同：0
> 
> 时间：2012-09-11T20:36:09.893
> 
> 标签：javascript, browser

我刚开始做一个项目，我需要处理来自网络摄像头流的帧，所以我只是想知道你是否知道哪个库适合这项任务。到目前为止，我已经查看了 Pixastic，这似乎还不错，但我想看看我的替代方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:38:20.330

[http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

这个 jQuery 插件可能会有很大的帮助。

# plone - 从 Plone 3.3.6 升级到 Plone 4.2.1 ...正在使用 blobstorage 吗？

> ID：12377538
> 
> 赞同：2
> 
> 时间：2012-09-11T20:36:11.733
> 
> 标签：plone

克隆专家：

我继承了一个运行 Plone 3.3.1 的 Plone 站点。它的 Data.fs 大小约为 1 GB。尝试通过升级到 Plone 4 来利用新功能，特别是 blobstorage 似乎是合理的。

到目前为止，我已经成功地从 Plone 3.3.1 升级到 Plone 3.3.6，包括为我们的生产使用适当的数据迁移。

接下来，在 RH Linux 开发服务器上，我对 Plone 4.2.1 进行了全新的 UnifiedInstall，运行顺利。我们几乎没有第三方或附加软件包，这应该是一个相对“普通”的安装。然后，我从 Plone 3.3.6 安装中复制 Data.fs 并执行门户迁移步骤以从 3.3.6 升级到 4.2.1。这似乎也很顺利，我可以看到我现在在 var/blobstorage 中有很多文件，它们似乎正在消耗大约 750 MB 的空间。太好了，我想！

但是，Data.fs 的大小似乎仍然非常接近 1 GB。

那么，门户迁移步骤是否创建了 blobstorage，但我没有做一些事情让我的站点开始实际使用 blobstorage？或者我需要做些什么来“修剪” Data.fs 以使其不再包含已移动到 blobstorage 的内容？（注意：我确实做了一包 Data.fs，但文件大小没有显着减少）是否有可以检查的日志文件告诉我是否正在使用 blobstorage 中的内容？

感谢您的考虑，

约翰

注意：从我的问题中很可能很明显，我是 Plone 新手。我正在编写 Martin Aspeli 的 Professional Plone 4 Development 一书，但在其中或在各种论坛的搜索中都没有找到我的问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:08:02.390

默认的 zeopack 配置只修剪超过一天的对象。如果您只是运行迁移，可能所有这些对象都不会被打包。您可以自定义配方以保留不同的天数（0），或者直接自定义 zeopack 脚本，然后重试打包。

[http://pypi.python.org/pypi/plone.recipe.zeoserver](http://pypi.python.org/pypi/plone.recipe.zeoserver)

# python - Windows 上没有 Python 代码的默认字节码编译？

> ID：12377544
> 
> 赞同：1
> 
> 时间：2012-09-11T20:36:56.933
> 
> 标签：python, installation, bytecode

我刚刚遇到了这个[SO 问题](https://stackoverflow.com/questions/12376188/should-i-compile-py-files-to-byte-code-after-installation)，我很困惑。我想说我对 Python 有很好的经验，但只在 *nux(-like) 操作系统上，我认为字节码编译是给定的。

我显然在这里遗漏了一些东西：在我的操作系统上我不知道的幕后发生了什么，比如一些配置默认值？它仅在 Windows 上，然后，为什么？有什么理由*不*编译成字节码吗？

非常感谢您的任何意见，我很好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:07:41.090

基本上，它提供了将 Python 安装文件预编译为字节码的功能，这通常会在第一次使用时发生。据我了解，这只是为了避免在使用时进行初始编译作为一般便利。

如果不编译标准库中的所有文件，它*可能*会节省空间，但只要您不尝试使用它们，它就会持续下去。

# python - PyQt4：QtWebKit使用Qt资源系统显示本地文件

> ID：12377545
> 
> 赞同：4
> 
> 时间：2012-09-11T20:37:11.397
> 
> 标签：python, url, resources, pyqt4, local

您将如何使用 Qt 资源系统显示本地 html 文件？显而易见的`QtCore.QUrl.fromLocalFile(":/local_file.html")`似乎不是正确的语法。

文件 mainwindow.qrc（编译前）

```
<qresource prefix="/">
    <file alias="html_home">webbrowser_html/program_index.html</file> 
```

文件 ui_mainwindow：

```
class Ui_MainWindow(object):    
    def setupUi(self, MainWindow):
        #...
        self.WebBrowser = QtWebKit.QWebView(self.Frame3) 
```

文件 webbrower.py

```
from ui_mainwindow import Ui_MainWindow
import mainwindow_rc

class MainWindow(QtGui.QMainWindow, Ui_MainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.setupUi(self)
        #...
        stream = QtCore.QFile(':/webbrowser_html/program_index.html')
        if stream.open(QtCore.QFile.ReadOnly):
            home_html = QtCore.QString.fromUtf8(stream.readAll())
            self.WebBrowser.setHtml()
            stream.close() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:10:01.933

`QUrl`需要一个方案，对于资源来说它是`qrc://`. [文档](http://doc.qt.nokia.com/4.7-snapshot/resources.html)中的相关部分：

> 默认情况下，可以在应用程序中以与源树中相同的文件名、`:/`前缀或带有`qrc`方案的 URL 访问资源。
> 
> 例如，文件路径`:/images/cut.png`或 URL `qrc:///images/cut.png`将提供对 cut.png 文件的访问权限，该文件在应用程序源树中的位置为`images/cut.png`.

所以，改用这个：

```
QtCore.QUrl("qrc:///local_file.html") 
```

**编辑**

你给文件一个`alias`（`alias="html_home"`）：

```
<qresource prefix="/">
    <file alias="html_home">webbrowser_html/program_index.html</file> 
```

路径是现在`:/html_home`，不是`:/webbrowser_html/program_index.html`

你应该使用：

```
QtCore.QUrl("qrc:///html_home") 
```

在你的情况下：

```
class MainWindow(QtGui.QMainWindow, Ui_MainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.setupUi(self)
        #...
        self.WebBrowser.load(QtCore.QUrl('qrc:///html_home')) 
```

[（如果您打算使用ekhumoro 的解决方案](https://stackoverflow.com/a/12377738/843822)，您也应该调整它。另请注意，您没有在粘贴中设置页面的 HTML。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:52:25.070

可以使用以下命令打开本地资源文件`QFile`：

```
stream = QFile(':/local_file.html')
if stream.open(QFile.ReadOnly):
    self.browser.setHtml(QString.fromUtf8(stream.readAll()))
    stream.close() 
```

# mysql - 查询以显示项目的顺序

> ID：12377548
> 
> 赞同：0
> 
> 时间：2012-09-11T20:37:37.130
> 
> 标签：mysql, sql

我正在尝试获取不同人食用的水果清单。

```
+-----------+
  ID   Name 
+----+------+
   1   Paul 
   2   John 
   3   Nick 
+----+------+
Table: users

+--------+--------+
  userID   Fruit
+--------+--------+
   1       Apple   
   2       Peach   
   2       Orange  
   2       Apple   
   3       Apple   
   3       Peach  
+--------+--------+
Table: eats 
```

现在我可以很容易地得到谁吃了什么的清单。但是如果我想知道谁吃了第二个水果？结果将是：

```
+--------+----------+
  Name     Fruit
+--------+----------+
  John     Orange
  Nick     Peach
+--------+----------+
 Result

SELECT Name, Fruit FROM users, eats WHERE ID = userID ... ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:44:53.043

这个查询应该加入表：

`SELECT eats.Fruit, users.Name FROM eats, users WHERE users.ID = eats.userID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:47:37.363

如果不明确对行进行排序，就不能依赖关系数据库中的行顺序，因为在表中删除和插入新记录时，返回行的顺序会有所不同。您将需要一个额外的列，例如`sequence`，您将明确存储所食用水果的顺序。然后，用 选择水果就很简单了`sequence = 2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:21:27.473

正如@lanzz 指出的那样，您不能指望订单。维护一个序列会很昂贵，但是假设您正在存储时间戳并且行按顺序返回......

使用一个变量来记住您为每个名称看到的行数。在查看同一个人时迭代变量，并在遇到新人时重置它。然后只吐出具有所需顺序的记录。（这有一个额外的好处是能够为任何 n 值选择用户的第 n 行）。

```
set @seen_name = null;
set @seq = 1;
select * from (
  SELECT Name, Fruit,
    case when @seen_name is null OR @seen_name != name then @seq := 1 else @seq := @seq + 1 end as seq_formula,
    @seen_name := name,
    @seq as seq
  FROM users, eats
  WHERE ID = userID
) foo
where seq = 2; 
```

瞧：

```
+------+--------+-------------+--------------------+------+
| Name | Fruit  | seq_formula | @seen_name := name | seq  |
+------+--------+-------------+--------------------+------+
| John | Orange |           2 | John               |    2 |
| Nick | Peach  |           2 | Nick               |    2 |
+------+--------+-------------+--------------------+------+ 
```

# c# - zxing 从网站扫描返回到新窗口

> ID：12377549
> 
> 赞同：1
> 
> 时间：2012-09-11T20:37:38.507
> 
> 标签：c#, jquery, mobile, barcode, zxing

这很可能是浏览器问题，但我有一个移动网站，我从该网站启动 zxing 应用程序，并传入回调 URL。一切都可以正常扫描并按我的预期返回扫描的数据。

但是，在手机浏览器中，URL 不会返回到“**相同**” ，而是`window/tab/etc`会打开一个带有该 URL 的新窗口。

关于如何让它返回到启动扫描仪的同一窗口的任何想法？

顺便说一句 - 这是一个使用 构建的 jquery 移动网站`asp.net MVC 3`，我使用的是默认的 android (4.0.4) 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T17:35:48.153

唯一的解决方案是创建一个使用内置 web 客户端的 android 应用程序。当应用程序上的某人单击网站上的扫描按钮时，它会通过 javascript 与应用程序本身对话并启动扫描仪。扫描仪不知道它是从网站上调用的。它将数据发送回应用程序，该应用程序使用 javscript 将其推送回网站。这样，只有一个“标签”是打开的，因为它是应用程序的工作方式。

编辑：当然那是差不多 6 年前的事了，我不知道从那以后发生了什么变化。

# css - 如何实现“纸质”背景效果？

> ID：12377550
> 
> 赞同：1
> 
> 时间：2012-09-11T20:37:57.010
> 
> 标签：css, photoshop

我是一名后端开发人员，我的设计技能无疑非常薄弱。有一个我非常喜欢的 CSS 背景效果，我想知道是否有人可以给我一个关于如何实现它的一般想法？如果您查看诸如[sourcebits.com](http://www.sourcebits.com/)或[youtube.com](http://www.youtube.com/)之类的网站，则背景看起来有点灰色，并且具有几乎像一张高质量文具的纹理。他们是如何实现这种效果的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:40:44.337

SourceBits 使用的 CSS：

```
body {
background: #8D9698 url('../images/body-by-bg.jpg') repeat fixed 0 0;
} 
```

SourceBits后台链接： http: [//www.sourcebits.com/images/body-by-bg.jpg](http://www.sourcebits.com/images/body-by-bg.jpg)

YouTube 使用的 CSS：

```
body {
background: no-repeat url(//s.ytimg.com/yt/imgbin/www-refreshbg-vflC3wnbM.png) 0 0;
background-color: #EBEBEB;
background-repeat: repeat;
} 
```

YouTube后台链接： [http ://s.ytimg.com/yt/imgbin/www-refreshbg-vflC3wnbM.png](http://s.ytimg.com/yt/imgbin/www-refreshbg-vflC3wnbM.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:41:42.433

他们可以使用平铺的小图形。通常，该小图形为 10x10 像素或更小，并包含背景颜色（在 YouTube 的情况下为灰色）和一些比背景颜色稍暗的点。平铺时，这会产生阴影效果。

Whups，@Anne 在我完成之前得到了答案！她还包含了您需要的确切代码。但是，是的，现在您知道了代码，并且您已经得到了答案的“为什么”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:50:27.287

不是您的问题的答案，但这在您进行前端编码时可能会对您有很大帮助：您是否尝试过使用 Chrome 的调试器工具？还是萤火虫？这将让您看到 HTML，以及应用到它的任何 CSS 样式定义。它比查看源代码要快得多，如果前端不是您的家乡，则特别有用，因为它向您显示了适用于该特定元素的 CSS 规则 - 背景、字体、您有什么。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-11T20:40:54.163

他们使用图片，每个角落和侧面都需要一张

# ios - 在 iOS 游戏中创建“烟雾”效果

> ID：12377560
> 
> 赞同：2
> 
> 时间：2012-09-11T20:38:45.450
> 
> 标签：ios

我想让一些文字在 iPhone 游戏中出现和消失在一阵烟雾效果中。例如，当有人得分时，我想显示添加的新分数。它应该出现在一阵烟雾中，并在一两秒钟内消失。

我该如何创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:33:40.120

看看 71 Squared 的 Particle Designer。它的成本约为 7.99 美元，包括简单的代码生成和集成。共享库中有一些预配置的烟雾效果。

[http://particledesigner.71squared.com](http://particledesigner.71squared.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T10:09:06.667

您很可能会使用粒子获得某种“廉价”效果，但您可以很好地控制动画（速度、缩放、加速度……）。另一种方法是使用多个烟雾图像并叠加它们，然后启动一个 UIView 动画，其中包含用于旋转、缩放和计时的随机属性。

# javascript - 使用 ajax 将数据从一步发送到下一步的 3 步表单

> ID：12377563
> 
> 赞同：0
> 
> 时间：2012-09-11T20:38:49.787
> 
> 标签：javascript, jquery, html, ajax

我希望在我的网站上重新设计一个 3 页的表单。

**目前**：

1.  *第 1 页*从用户那里获取一些初始数据，并通过 POST 提交给第 2 页
2.  *第 2 页*使用此数据仅显示基于初始数据的适当表单字段，并通过 POST 提交到第 3 页
3.  *第 3 页*最终在通过 ajax 发送表单之前捕获联系信息，以在同一页面上显示 mysql 查询的结果。

我想要做的是将整个表单放在一个页面上，提交每个步骤并通过 ajax 发送用于下一步的数据（以及一些整洁的 jQuery slideUp slideDown 操作来隐藏和显示步骤) 以创造更无缝的体验。我一直在寻找一种资源来演示使用 ajax 在同一页面上的表单之间发送数据，但我找不到任何东西，我很难过。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:31:27.157

有一个简单的解决方案：使用[wicked gem](http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=asciicast)。

另请参阅[网络表单到向导](http://www.jankoatwarpspeed.com/examples/webform_to_wizard/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:05:35.153

所以是的，我不需要 ajax 提交的 3 个表单，我已经将整个页面变成了 1 个表单，并且在进入第二步时有一个点击事件，该事件需要对第 1 步中的数据进行处理，步骤3 终于用AJAX提交了整个表单，完美！

# android - Open103R、Open107v开发板——如何编程？

> ID：12377566
> 
> 赞同：1
> 
> 时间：2012-09-11T20:39:32.870
> 
> 标签：android, linux, embed

ebay 和其他中国网站正在提供这些开发板，但不清楚如何对其进行编程。

这些板有操作系统吗？Linux？微型.NET？安卓 ？

我和 Ardiuno 一起玩过，很有趣。Arduino 自带 IDE。这些板更强大，有凸轮和以太网。似乎可以做更多有趣的事情。

请注意我是业余爱好者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T08:56:26.997

基本上，您可以使用的语言之一是 C。由于工作频率低和内存有限，这些板不能支持像 Android 这样的操作系统。

我也遇到了同样的情况，最后我买了[这款Ltouch开发板](http://www.biemmeitalia.net/bmstore1x/index.php?main_page=product_info&cPath=2&products_id=1)，接口多，支持Android。它工作得很好。

[这本](http://www.cs.indiana.edu/~geobrown/book.pdf)来自印第安纳大学的 Geoffrey Brown提供的一本很好的免费书籍，介绍了 STM MCU 以及如何对其进行编程。

# javascript - 使用 javascript 的三角函数

> ID：12377567
> 
> 赞同：2
> 
> 时间：2012-09-11T20:39:34.467
> 
> 标签：javascript, math, trigonometry

我正在尝试使用 javascript 绘制 cos 曲线。我希望在网页上看到一条漂亮的 cos 曲线。像这样...
![在此处输入图像描述](../Images/4272df652e2fd24b2603618ca1b34f9a.png)

我加了 200 以将曲线向下移动，这样我就可以看到整个事情了。我乘以 100，因为 html 中没有小数位。如果你看一下[jsfiddle](http://jsfiddle.net/RN7WN/8/)，那是一团糟

[http://jsfiddle.net/RN7WN/8/](http://jsfiddle.net/RN7WN/8/)

```
$(function(){    
    for (i=0; i<500; i++){ 
        var el = $('<div class="dot"></div>'); 
        var y = Math.cos(i*100) * 100 + 200;
        var x = i ;
        el.css({ 'left' : x+'px' , 'top':y+ 'px'});
        $('#main').after(el);  
    } 
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:42:26.073

三角函数使用[弧度](http://en.wikipedia.org/wiki/Radian)，而不是度数。要在度数和弧度之间进行转换，请使用公式

```
radians = Math.PI / 180 * degrees 
```

[这是](http://jsfiddle.net/RN7WN/12/)小提琴的更新版本，显示了一些可识别的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:43:02.810

[http://jsfiddle.net/zerkms/RN7WN/13/](http://jsfiddle.net/zerkms/RN7WN/13/)

```
$(function(){    
    for (i=0; i< 2 * Math.PI; i+=0.01){
        //alert('aa');   
        var el = $('<div class="dot"></div>'); 
        var x = Math.cos(i) * 100 + 100;
        var y = i * 100 + 50;
        el.css({ 'left' : x+'px' , 'top':y+ 'px'});
        $('#main').after(el); 
        //$('#main').after('<p>'+ l +'</p>');
    } 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:45:54.913

正如我之前在评论中解释的那样，您需要通过乘以从度数转换为弧度数`Math.PI / 180`。

例如：

```
$(function(){    
  for (i=0; i<400; i++){
    var el = $('<div class="dot"></div>'); 
    var x = Math.sin(i * (Math.PI/180)) * 100;
    var y = i + 200;
    el.css({ 'left' : x+'px' , 'top':y+ 'px'});
    $('#main').after(el); 
  } 
});​ 
```

[这](http://jsfiddle.net/YqkKe/)是一个演示更改的jsfiddle。

# ruby-on-rails - RSpec & Tire gem: 测试 Tire::Results::Collection

> ID：12377569
> 
> 赞同：3
> 
> 时间：2012-09-11T20:39:40.520
> 
> 标签：ruby-on-rails, rspec, rspec-rails, tire

尝试理解围绕轮胎 gem 进行测试的语法。

此控制器规范（默认来自脚手架模板）失败

```
 describe "GET index" do
    it "assigns all reports as @reports" do
      report = Report.create! valid_attributes
      get :index, {}, valid_session
      assigns(:reports).should eq([report])
    end
  end 
```

因为

```
 Failure/Error: assigns(:reports).should eq([report])
 TypeError:
   can't convert Tire::Results::Collection to Array (Tire::Results::Collection#to_ary gives Tire::Results::Collection) 
```

如何编写规范以使其期望轮胎**结果**集合而不是活动记录对象数组？或者，有没有更好的方法来解决这个问题？

FWIW-

```
class ReportsController < ApplicationController  
  def index
    @reports = Report.search(params)
  end

  ... 
```

和模型：

```
class Report < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks
  ...
  def self.search(params)
    tire.search(load: true) do
      query { string params[:query] } if params[:query].present?
    end
  end
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:40:08.460

我意识到这是一个非常晚的答案，但是，嘿，来了。

Rspec 正在做一个直接的比较。它有一个集合，并试图将它与数组进行比较。但是，Tire 将强制转换定义为数组实际上并不返回数组（为什么，我不确定，听起来对我来说很烦人！）

由于您不打算比较数组，因此我快速浏览了 Collection 的来源：[https ://github.com/karmi/tire/blob/master/lib/tire/results/collection.rb](https://github.com/karmi/tire/blob/master/lib/tire/results/collection.rb)

好吧，我们没有有用的 to_ary……但我们确实有一个 each，并且包含了 Enumerable。这意味着我们基本上拥有数组可用的所有内容。

那么，鉴于此，我们实际上想在这里做什么？我们想检查@report 在@reports 中是否可用。好吧，我们有可枚举的，并且快速检查期望源（[https://github.com/rspec/rspec-expectations/blob/master/lib/rspec/matchers/built_in/include.rb#L38](https://github.com/rspec/rspec-expectations/blob/master/lib/rspec/matchers/built_in/include.rb#L38)）说包括将映射包括？在一个数组对象上。

因此，简而言之，尝试将您的测试更改为：

```
describe "GET index" do
  it "assigns all reports as @reports" do
   report = Report.create! valid_attributes
   get :index, {}, valid_session
   assigns(:reports).should include(report)
  end
end 
```

# memory-leaks - Bamboo 部署等到没有使用 Grails 的 Quartz 作业

> ID：12377571
> 
> 赞同：0
> 
> 时间：2012-09-11T20:39:55.373
> 
> 标签：memory-leaks, tomcat6, quartz-scheduler, grails-2.0, bamboo

我正在使用 Bamboo 构建、测试和部署提交到服务器。但是，每隔一段时间，我就会在 Tomcat 端部署失败。Bamboo 不知道发生了这种情况，因此当应用程序无法正常启动时，我必须运行手动构建。

据我所知，这是由于运行 Quartz 任务所致。有没有办法安全地部署 WAR 但要等到所有工作都完成？在部署之前先制定计划是否更好？

我已经提取了我的 Catalina 日志以突出显示该问题：

```
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [quartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:14 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/emdb] appears to have started a thread named [Thread-212] but has failed to stop it. This is very likely to create a memory leak.
Sep 12, 2012 12:01:15 PM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context [/emdb]
Sep 12, 2012 12:01:16 PM org.apache.catalina.startup.ExpandWar deleteDir
SEVERE: [....webapps\emdb\WEB-INF\lib] could not be completely deleted. The presence of the remaining files may cause problems
Sep 12, 2012 12:01:16 PM org.apache.catalina.startup.ExpandWar deleteDir
SEVERE: [....webapps\emdb\WEB-INF] could not be completely deleted. The presence of the remaining files may cause problems
Sep 12, 2012 12:01:16 PM org.apache.catalina.startup.ExpandWar deleteDir
SEVERE: [....webapps\emdb] could not be completely deleted. The presence of the remaining files may cause problems
Sep 12, 2012 12:01:16 PM org.apache.catalina.startup.ExpandWar delete
SEVERE: [....webapps\emdb] could not be completely deleted. The presence of the remaining files may cause problems
Sep 12, 2012 12:01:17 PM org.apache.catalina.startup.HostConfig deployWAR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:42:38.720

没错，Quartz 调度程序不会停止为运行作业（工作线程池）而创建的线程。您需要[`QuartzScheduler.shutdown(boolean)`](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/QuartzScheduler.html#shutdown(boolean))在应用程序关闭时调用方法。我很惊讶 Grails Quartz 插件不适合你。

发生这种情况还有其他原因。您可能有一些正在运行的作业并且 Quartz 挂起等待它们完成（即使调用了正确的关闭）。Tomcat不耐烦，在中间杀死了整个事情。检查（[未编码？](http://jira.terracotta.org/jira/browse/QTZ-41)）`org.quartz.scheduler.interruptJobsOnShutdown`和`org.quartz.scheduler.interruptJobsOnShutdownWithWait`选项。

请注意，这[`ShutdownHookPlugin`](http://quartz-scheduler.org/api/2.1.5/org/quartz/plugins/management/ShutdownHookPlugin.html)对您没有帮助，因为您没有关闭整个 JVM，而只是取消部署一个应用程序。

错误消息也`Thread-212`列为原因之一。这很可能是您的自定义线程（总是命名线程！），它也必须被中断。

# 也可以看看

*   [关闭后石英调度程序不停止](https://stackoverflow.com/questions/3421852)

# applescript - 试图从带有applescript的os x消息接收消息

> ID：12377572
> 
> 赞同：9
> 
> 时间：2012-09-11T20:39:56.540
> 
> 标签：applescript, messages, ichat

嘿，我正在运行以下脚本：

```
using terms from application "Messages"
    on message received this_message from this_buddy for this_chat
        display dialog "test"
    end message received
end using terms from 
```

但是每次收到消息时，我都会在消息中收到以下错误：

```
Event: Message Received in Active Chat
File: registerToReceiveMessages.applescript
Error: Error -1708 
```

我在互联网上的任何地方都找不到该错误。它似乎适用于除活动聊天之外的每个聊天。有任何想法吗？

此外，我正在尝试为“收到的地址消息”添加事件，但每次我编译 applescript 时都会将其替换为“收到的远程屏幕共享邀请”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-20T05:27:48.400

每当您选择不处理指定事件的 AppleScript 时，您都会收到**错误 -1708 。**

例如，如果您的脚本只实现了`on message sent`，但您设置此脚本在每次*收到*消息时运行，您将收到错误 -1708。这是因为您的脚本只知道如何处理传出消息，而不知道如何处理传入消息，因此出现错误 -1708。

现在这里有一些有趣的事情......

如果您尝试对`Mix Message Case.applescript`事件`Message Received`、`Message Received in Active Chat`和使用默认脚本`Message Sent`。第一个和最后一个工作正常，但您会收到一个 -1708 错误活动聊天事件。我们可以推断这意味着脚本没有处理事件`Message Received in Active Chat`。因此，现在看来，即使是 Apple 也无法处理此事件。

**OS X Mavericks 更新：**

此更新修复了前面提到的错误。如果您选择 Apple 的示例脚本**Speak Events.applescript**，您会注意到它可以完美地处理接收到活动聊天室的消息。如果您检查代码，您会注意到它正在使用该`on active chat message received`方法。我们现在可以在我们的脚本中使用它。由于我不再安装旧版本，因此我无法测试相同的方法是否适用于以前的版本。

以下是 Speak Events.applescript 中的代码：

```
on active chat message received with eventDescription
    say eventDescription
end active chat message received 
```

另请注意，您不再为特定事件指定要运行的单个脚本。相反，您为 Messages 事件指定单个脚本处理程序。这意味着您必须实现所有事件以避免获得 -1708 方法。请注意，在示例脚本中，Apple 甚至有注释`# The following are unused but need to be defined to avoid an error`。这是一个可以用作脚本起点的模板：

```
using terms from application "Messages"
    # The following are unused but need to be defined to avoid an error

    on message sent theMessage with eventDescription
    end message sent

    on message received theMessage with eventDescription
    end message received

    on chat room message received with eventDescription
    end chat room message received

    on active chat message received with eventDescription
    end active chat message received

    on addressed message received theMessage from theBuddy for theChat with eventDescription
    end addressed message received

    on received text invitation with eventDescription
    end received text invitation

    on received audio invitation theText from theBuddy for theChat with eventDescription
    end received audio invitation

    on received video invitation theText from theBuddy for theChat with eventDescription
    end received video invitation

    on received local screen sharing invitation from theBuddy for theChat with eventDescription
    end received local screen sharing invitation

    on buddy authorization requested with eventDescription
    end buddy authorization requested

    on addressed chat room message received with eventDescription
    end addressed chat room message received

    on received remote screen sharing invitation with eventDescription
    end received remote screen sharing invitation

    on login finished with eventDescription
    end login finished

    on logout finished with eventDescription
    end logout finished

    on buddy became available with eventDescription
    end buddy became available

    on buddy became unavailable with eventDescription
    end buddy became unavailable

    on received file transfer invitation theFileTransfer with eventDescription
    end received file transfer invitation

    on av chat started with eventDescription
    end av chat started

    on av chat ended with eventDescription
    end av chat ended

    on completed file transfer with eventDescription
    end completed file transfer

end using terms from 
```

如果您从这个脚本开始并只实现您需要的方法（同时保持其余部分不变），那么您应该避免所有 -1708 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:31:13.447

在我看来，事件处理程序仅在*Messages*`message received`中的感觉时才起作用。我有一个稍微不同的脚本同样的问题。在另一个网站上找到另一个示例后，将其复制粘贴到新的 AppleScript 编辑器窗口中，并将其保存在由 Messages 复制到的 AppleScript 文件中，它开始工作。*`~/Library/Scripts/Messages`*

 *您的脚本似乎没有问题。如果我用您的代码替换我当前的脚本并保存脚本，它会按预期工作，显示一个包含文本的对话框`test`。

`None`将脚本设置为运行并返回到您在“消息设置”中创建的脚本也可能就足够了。*

# syntax - 带下划线的十六进制值语法是什么意思？例如：参数 FOO = 20'h0002_0

> ID：12377577
> 
> 赞同：7
> 
> 时间：2012-09-11T20:40:30.223
> 
> 标签：syntax, parameters, verilog

几乎只是标题。这个下划线是什么意思？这与以下有何不同：

```
parameter FOO = 20'h00020; 
```

我不知道要寻找什么来找到这个问题的答案，因为我不知道这种语法被称为什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T20:57:32.557

来自 IEEE Std (1800-2009)，“5.7.1 整数文字常量”部分：

> 下划线字符 (_) 在数字中除第一个字符外的任何位置都是合法的。下划线字符被忽略。出于可读性目的，此功能可用于分解长数字。

所以，`20'h00020`是一样的`20'h0002_0`。

我通过在上述规范中搜索“下划线”找到了这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:43:17.797

这不代表任何意思。它只是一个分隔符，使长数字更易于阅读，就像逗号分隔长数字（例如 1,000,000）中的三位数组。

# java - Hibernate JPA2.0 joinMap 中的 NullPointer 异常

> ID：12377578
> 
> 赞同：2
> 
> 时间：2012-09-11T20:40:33.920
> 
> 标签：java, jpa

所以我要做的是创建一个 CriteriaQuery 并为地图的键添加一个位置，但我得到一个 NullPointerException。

SQL中的类似以下内容（只是为了更好地解释我的意思）：

> select test.* from test join test_translation on test_translation.id=test.id where test_translation.key='pt'

我成功地进行了 HQL 查询并使用了 index()，但我需要比这更动态的东西。这是有效的：

> TypedQuery q = em.createQuery("from Test t join t.translations tt where index(tt)=?1",Test.class).setParameter(1, "pt");

我所有的代码来复制我的问题，这是一个很长的帖子，但它是完整的例子。我可能遗漏的任何信息都可以询问。

**pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>JpaTests</groupId>
    <artifactId>JpaTests</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.3.Final</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>
    </dependencies>
</project> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="root"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost/test"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>

            <property name="hibernate.connection.autocommit" value="false"/>
            <property name="hibernate.current_session_context_class" value="thread"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
        </properties>
    </persistence-unit>
</persistence> 
```

**测试.java**

```
import javax.persistence.*;
import java.io.Serializable;
import java.util.HashMap;
import java.util.Map;

@Entity
public class Test implements Serializable {

    @Embeddable
    public static class TestTranslation {
        private String text;

        public TestTranslation() {
        }

        public TestTranslation(String text) {
            this.text = text;
        }

        public String getText() {
            return text;
        }

        public void setText(String text) {
            this.text = text;
        }
    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    @ElementCollection(fetch = FetchType.EAGER)
    private Map<String, TestTranslation> translations = new HashMap<String, TestTranslation>();

    @ElementCollection
    private Map<String,String> map1=new HashMap<String, String>();

    public Test() {
    }

    public Test(Map<String, TestTranslation> translationMap) {
        this.translations=translationMap;
    }

    public Test(Map<String, TestTranslation> tr, Map<String, String> map1) {
        this.translations=tr;
        this.map1=map1;
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public Map<String, TestTranslation> getTranslations() {
        return translations;
    }

    public void setTranslations(Map<String, TestTranslation> translations) {
        this.translations = translations;
    }

    public Map<String, String> getMap1() {
        return map1;
    }

    public void setMap1(Map<String, String> map1) {
        this.map1 = map1;
    }
} 
```

**主.java**

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.TypedQuery;
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.MapJoin;
import javax.persistence.criteria.Root;
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("test");
        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();

        Map<String, Test.TestTranslation> tr = new HashMap<String, Test.TestTranslation>();
        tr.put("pt", new Test.TestTranslation("teste"));
        tr.put("en", new Test.TestTranslation("test"));

        Map<String, String> map1 = new HashMap<String, String>();
        map1.put("pt", "teste");
        map1.put("en", "test");

        Test test = new Test(tr,map1);

        em.persist(test);
        em.getTransaction().commit();

        //got data time to make the query
        em = emf.createEntityManager();
        em.getTransaction().begin();

        CriteriaBuilder cb = em.getCriteriaBuilder();
        CriteriaQuery<Test> cq = cb.createQuery(Test.class);
        Root<Test> root = cq.from(Test.class);

        //tried a simpler map but it also fails with NullPointerException
        MapJoin<Test, String, String> joinTranslations = root.joinMap("translations");
        //MapJoin<Test, String, String> join = root.joinMap("map1");

        cq = cq.where(cb.equal(joinTranslations.key(), "pt"));
        //cq = cq.where(cb.equal(join.key(), "pt"));

        TypedQuery<Test> q = em.createQuery(cq);
        for (Test itm : q.getResultList()) {
            System.out.println(itm.getId());
            for (Map.Entry<String, Test.TestTranslation> entry : itm.getTranslations().entrySet()) {
                System.out.println(entry.getKey() + ":" + entry.getValue().getText());
            }
        }
        em.getTransaction().commit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:03:26.643

经过大量搜索，在我的鼻子下方找到了答案：

这个问题[jpa criteriabuilder join maps](https://stackoverflow.com/questions/5580614/jpa-criteriabuilder-join-maps)引用了一个错误[https://hibernate.onjira.com/browse/HHH-6103](https://hibernate.onjira.com/browse/HHH-6103)最后我注意到修复版本是 4.1.6，在我的 pom.xml 上进行了更改并解决了问题.

原来这是休眠 4.1.3 中的一个错误。

# ios - 使用 UITableView 将 UIView 放置在屏幕上的有限位置

> ID：12377580
> 
> 赞同：0
> 
> 时间：2012-09-11T20:40:36.273
> 
> 标签：ios, uiview, uikit

我有一个表格视图，它占用的空间超过了屏幕。某些行上有一个信息按钮。当这些被按下时，我想根据信息按钮所在的行向用户发送消息。我想在每次出现在屏幕上同一位置的基本 UIView 中显示此消息（有点像 UIAlertView）。

我的问题是为 UIView 指定框架，以便它将原点显示在屏幕上的特定位置。尝试设置框架`self.view.frame`或`[UIScreen mainScreen].bounds`导致使用整个 scrollView 的边界或仅使用 scrollView 的第一个可见元素。

如何使视图始终出现在同一屏幕位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:54:27.777

您需要将静态框架传递给您的自定义视图。像这样

在 didSelectRowAtIndexPath 方法中

试试这段代码----

```
UIView *infoView = [[UIView alloc] initWithFrame:CGRectMake(10,10,100,100)];
UILabel *lblInfo = [UILabel alloc] initWithFrame:CGRectMake(5,5,40,21)];
lblInfo.text = @"your text here";
[infoView addSubView:lblInfo];
[lblInfo release];
[self.view addSubView:infoView];
[infoView release]; 
```

# sql - 引用别名而不是重复计算

> ID：12377583
> 
> 赞同：-2
> 
> 时间：2012-09-11T20:40:50.190
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个查询：

```
SELECT   [outer].*,
         (total_pain_patients / NULLIF ((SELECT Sum(total_pain_patients)
             FROM   [topplansperprovider]
             WHERE  [outer].[INDEX_IMSID] = [INDEX_IMSID]
             AND plan_rank BETWEEN 1 AND 10), 0)) * 100 AS PercentOf,
         pm.*,
         percentof * pm.score
FROM     [topplansperprovider] AS [outer]
left JOIN [payer Mapping] pm
on lower([outer].Plan_Name_OR_Payment_Type)=lower(pm.[ims payer name])
WHERE    INDEX_IMSID = '1753841'
ORDER BY 6 ASC 
```

我的问题是选择这个：

```
percentof * pm.score 
```

由于`percentof`是派生列的别名，我不知道如何在其他列中使用它。

1.  我该如何选择`percentof * pm.score`？
2.  如果这太难了，我怎样才能将`percentof`作为永久列添​​加到我的表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:44:16.380

您不能使用这样的别名，您必须将查询包装在另一个选择中：

```
select x.*, x.percentof*x.pm.score newvalue
from
(
    SELECT   [outer].*,
             (total_pain_patients / NULLIF ((SELECT Sum(total_pain_patients)
                                             FROM   [topplansperprovider]
                                             WHERE  [outer].[INDEX_IMSID] = [INDEX_IMSID]
                                                    AND plan_rank BETWEEN 1 AND 10), 0)) * 100 PercentOf,
             pm.*
    FROM     [topplansperprovider] AS [outer]
    left JOIN [payer Mapping] pm
        on lower([outer].Plan_Name_OR_Payment_Type)=lower(pm.[ims payer name])
) x
WHERE    x.INDEX_IMSID = '1753841'
ORDER BY 6 ASC 
```

您正在计算的列别名`percentof`不可用于另一列，除非它在子查询中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:02:22.993

创建视图：

```
CREATE VIEW dbo.whatever
AS 
    SELECT 
      t.*, -- NAME THESE COLUMNS!!!
      PercentOf = (t.total_pain_patients / NULLIF ((SELECT Sum(t2.total_pain_patients)
         FROM   dbo.[topplansperprovider] AS t2
         WHERE  t2.[INDEX_IMSID] = t.[INDEX_IMSID]
         AND t2.plan_rank BETWEEN 1 AND 10), 0)) * 100,
      pm.* -- NAME THESE COLUMNS!!!
  FROM dbo.[topplansperprovider] AS t
  LEFT OUTER JOIN dbo.[payer Mapping] AS pm
  ON LOWER(t.Plan_Name_OR_Payment_Type) = LOWER(pm.[ims payer name])
  WHERE t.INDEX_IMSID = '1753841';
GO 
```

现在您的查询可以是：

```
SELECT *, [something] = PercentOf * score -- NAME THIS ALIAS!
  FROM dbo.whatever
  ORDER BY 6 ASC; -- NAME THIS COLUMN!!! 
```

但是，请*停止*使用惰性`SELECT *`语法，尤其是在视图中：

*   [要踢的坏习惯：使用 SELECT * / 省略列列表](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

请*停止*使用`ORDER BY [ordinal]`：

*   [要踢的坏习惯 : ORDER BY ordinal](https://sqlblog.org/2009/10/06/bad-habits-to-kick-order-by-ordinal)

这些都是最终会导致你痛苦的坏习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:42:53.803

虽然不是最佳答案，但您可以创建一个视图以在视图中具有“永久”列。

# mediaelement.js - MediaElements.js - Flash 回退不会从子目录流式传输 MP4

> ID：12377586
> 
> 赞同：1
> 
> 时间：2012-09-11T20:40:53.820
> 
> 标签：mediaelement.js

我正在使用 FMS 通过 RTMP 流式传输 MP4。客户端正在使用 MediaElements.js。在 Firefox 中，这已成功回退到 Flash 播放器，因为它应该这样做。当我将 MP4 放在视频应用程序实例的顶级文件夹中时，播放成功。当我创建子目录并将视频放在那里时，播放失败。例如，像 . . .

```
rtmp://servername/video/\_definst\_/mp4:DELTA2.mp4 
```

. . . 播放正常。虽然 src URL 像 . . .

```
rtmp://servername/video/\_definst\_/mp4:/data/DELTA2.mp4 
```

. . . 失败。

我认为问题在于播放器在向 FMS 的请求中解释\发送应用程序实例的方式。所以在上面的第一个例子中，我可以在 FMS 访问日志中看到一个`x-appinst`. . .

```
\_definst\_ 
```

. . . 而在第二种情况下，我看到一个 x-appinst 。. .

```
\_definst\_/mp4:/data 
```

第二种情况显然是错误的。第二个 URL 在单独的自定义 Flash 播放器中工作的事实使我相信它一定是客户端以某种方式错误地发送了请求。

有什么想法吗？任何人都能够从根目录以外的某个目录将视频从 FMS 流式传输到 MediaElements Flash 播放器？

# php - 将变量传递给 ORDER BY MySQL 语句

> ID：12377587
> 
> 赞同：0
> 
> 时间：2012-09-11T20:40:57.320
> 
> 标签：php, mysql, html

我试图在 MySQL 语句中将两个变量传递给 ORDER BY $variable1 $variable2 。变量是从下拉菜单表单中获取的。

# **PHP**

```
if(isset($_POST['order'])){
         $sort1 = mysql_real_escape_string($_POST['sort']);
         $sort2 = mysql_real_escape_string($_POST['order']);
        }
        if(!@$_POST['order']){
            $sort1 = 'ID';
            $sort2 = 'DESC';
        }
        $topics = mysql_query(" SELECT topic_id AS 'ID', topic_head AS 'Title', 
                                       topic_tags AS 'TAGS', topic_owner AS 'CREATED BY', topic_date AS 'CREATED ON'
                                FROM   forum_topics 
                                ORDER BY '{$sort1}' '{$sort2}'  ") or die (mysql_error());
                        ?> 
```

# **HTML 表格**

```
<ul class="sort">
        <li><form action="topics.php" method="post">
                <label class="label">Sort Table By</label>
                <select name="sort">
                    <option value ="">    </option>
                    <option value ="ID">ID</option>
                    <option value ="Title">Title</option>
                    <option value ="TAGS">TAGS</option>
                    <option value ="VIEWS">VIEWS</option>
                    <option value ="CREATED ON">CREATED ON</option>
                    <option value ="CREATED BY">CREATED BY</option>
                </select>

                <label class="label">Order By</label>

                <select name = "order" class="tap_Select">
                    <option value ="">    </option>
                    <option value ="ASC">Ascending</option>
                    <option value ="DESC">Descending</option>
                </select>

                <input type="submit" name="order" value="SORT" >
           </form>
        </li>
    </ul> 
```

请帮忙。

**更新**

当我删除 $sort1 和 $sort2 周围的引号时

我收到此错误： `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SORT' at line 4`

**更新 2**

当我做 $sql = "....." 时，没有通过 mysql_query() 我得到了这个

`SELECT topic_id AS 'ID', topic_head AS 'Title', topic_tags AS 'TAGS', topic_owner AS 'CREATED BY', topic_date AS 'CREATED ON' FROM forum_topics ORDER BY ID SORT`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:42:11.637

不要使用引号，例如

```
ORDER BY 'ID' 'DESC' 
```

是不正确的。它应该是

```
ORDER BY ID DESC 
```

引号将 id 和 desc 转换为纯字符串，而不是关键字/字段名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:13:44.110

您的列名似乎包含空格，因此您需要使用反引号：

```
ORDER BY `{$sort1}` {$sort2} 
```

另请注意，在该条款`mysql_real_escape_string`的情况下不提供任何保护。`ORDER BY`您需要根据允许输入的白名单检查您的输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:43:41.710

删除括号并在排序元素之间添加逗号

```
ORDER BY $sort1 $sort2  ") or die ( 
```

编辑：进行以下更改，以便我们可以看到发生了什么...

走这条线

```
$topics = mysql_query(" SELECT topic_id AS 'ID', topic_head AS 'Title',  
                                   topic_tags AS 'TAGS', topic_owner AS 'CREATED BY', topic_date AS 'CREATED ON' 
                            FROM   forum_topics  
                            ORDER BY '{$sort1}' '{$sort2}'  ") or die (mysql_error()); 
```

将查询粘贴到变量中，并将mysql_query中的字符串替换为变量；

```
$query="SELECT topic_id AS 'ID', topic_head AS 'Title',  
                                   topic_tags AS 'TAGS', topic_owner AS 'CREATED BY', topic_date AS 'CREATED ON' 
                            FROM   forum_topics  
                            ORDER BY '{$sort1}' '{$sort2}'  ";
$topics = mysql_query($query) or die (mysql_error()); 
```

然后回显查询并将结果剪切/粘贴到问题中。事情并没有像你想象的那样发生。

```
echo $query; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T20:46:42.467

```
$topics = mysql_query("SELECT
    topic_id AS `ID`,
    topic_head AS `Title`, 
    topic_tags AS `TAGS`,
    topic_owner AS `CREATED BY`,
    topic_date AS `CREATED ON`
FROM   forum_topics 
ORDER BY {$sort1} {$sort2}'
") or die (mysql_error()); 
```

您需要删除`'`ORDER BY 值。另请注意在别名值周围首选使用反引号。

另请注意，您应该使用 mysqli_* 或 PDO，因为 mysql_* 已被弃用（请参阅 PHP.net 上大多数 mysql_* 相关功能的大红色警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-10T11:41:40.507

以下语法在 PHP 7.4.12 和 MySQL 5.7.32 中适用于我：

```
$sort = sanitize_text_field($_POST['sort']; // e.g., 'title'
$order = sanitize_text_field($_POST['order']; // e.g., 'ASC'
$order_by = $sort . ' ' . $order;

$results = $wpdb->get_results( "
    SELECT
        *
    FROM
        MyTable
    ORDER BY
        $order_by
" ); 
```

# iphone - 换行或回车 iPad RTF 文件

> ID：12377589
> 
> 赞同：0
> 
> 时间：2012-09-11T20:41:07.053
> 
> 标签：iphone, objective-c, ipad, ms-word, rtf

我有一个 iPad 应用程序，可以根据输入的数据创建 Word 文档。

最初我使用的是 html word 文档，但这些文档不会在 Pages 中打开。

我切换到使用适用于两者的 RTF 文件。

我有一个模板，我可以在其中替换部分文本，如下所示：

```
[template replaceOccurrencesOfString:@"**DATE**" withString:[NSString stringWithFormat:@"%@",startDate] options:NSCaseInsensitiveSearch range:NSMakeRange(0, [template length])]; 
```

我可以很好地替换文本并按预期保存。

但是回车 \n 换行符被忽略。我尝试用 \r \r\n 和 \par 替换 \n 无济于事

我需要什么来替换回车，以便它在保存后工作。目前它被忽略。

感谢

担

失败 - 创建适用于 Pages 和 Word 的 Word 文档的方法会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:47:48.733

在单词中，\r 和 \n 应替换为 ASCII 字符 10 和 13。我不确定您使用的是什么语言，但 chr(10) 和 chr(13) 可能是候选者。

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:25:39.497

由于您要求可能的替代方案，因此您可以调用一个 Web 服务 ( [Docmosis](http://www.docmosis.com) )，它提供了从 Objective-C 创建 doc/rtf/其他文档并流回设备（和/或电子邮件/存储等）的能力。您需要联网并对外部依赖项感到满意，但它可以为您节省大量时间（他们有一个 Objective-C sdk）。请注意，我为创建 Docmosis 的公司工作。

# javascript - HTML范围：动态设置值属性

> ID：12377590
> 
> 赞同：11
> 
> 时间：2012-09-11T20:41:09.457
> 
> 标签：javascript, html, range

晚上好！！

我正在使用 HTML 输入类型范围来创建滑动条。我想在显示滑块之前动态更改属性“值”（光标的默认位置）。

我可以检索我需要的值（从 localStorage），但我无法设置它！

这是范围对象：

```
<input type="range" min="0" max="1050" value="0" step="30"  onchange="showValue(this.value); changeScrollBar(this.value);"/> 
```

现在它设置为 0 但我想使用一个变量来更改它（即我将设置一个新变量 foo=localStorage.getItem("foo2") 然后我想在范围内使用 value=foo）！

有什么线索吗？

非常感谢！！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T20:43:20.827

您获取`<input>`标签的 DOM 元素，然后使用：

```
elem.value = foo; 
```

* * *

如果您将 ID 添加到输入标签，如下所示：

```
<input id="mySlider" type="range" min="0" max="1050" value="0" step="30"  onchange="showValue(this.value); changeScrollBar(this.value);"/> 
```

然后，您可以这样做：

```
var input = document.getElementById("mySlider");
input.value = localStorage.getItem("foo2"); 
```

# java - Java 类扩展 Applet 和 Keylistener？

> ID：12377591
> 
> 赞同：-2
> 
> 时间：2012-09-11T20:41:11.050
> 
> 标签：java, html, applet

我有三个类来制作 Snake 游戏，Snake、GameBoard 和 The_Main。The_Main 使用 'KeyAdapter' 从键盘读入声明是
`public class The_main extends KeyAdapter{`
但是我也想把这个游戏放在一个 html 页面上，所以我打算把它放在一个小程序中，使用以下代码：

```
 <html>
 <title>Applet Test</title>
 <body>
 <applet
    archive = "TheSnake.jar"
    code = "theSnake/The_Main.class"
     width="800" 
    height="800">
 </applet>
 </body>
 </html> 
```

当我加载网页时，它给了我一个`java.lang.reflect.InvocationTargetException`. 我不知道如何获取堆栈跟踪，如果你们需要的话..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:44:57.257

您[不能在 Java 中扩展多个类](http://www.coderanch.com/t/380144/java/java/Why-cannot-java-class-extend)。您[可以实现多个接口](http://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html)，但这不是您想要的。

您应该有一个扩展类`Applet`，然后是扩展类`KeyAdapter`。然后，您可以*从*类中引用`KeyAdapter`该类。*`Applet`*

 *一个`Applet`像这样的（在`MyApplet.class`，为您的 HTML）：

```
public MyApplet extends Applet implements Runnable {
    // ...
    public someMethod() {
        MyKeyAdapter adapter = new MyKeyAdapter();
        // Do some stuff with `adapter`
    }
} 
```

然后，您的`KeyAdapter`（未在 HTML 中使用；*仅从*Java 调用）：

```
public MyKeyAdapter extends KeyAdapter {
    // ...
} 
```*

# .net - 基于元素值的 XSD 条件

> ID：12377592
> 
> 赞同：2
> 
> 时间：2012-09-11T20:41:15.277
> 
> 标签：.net, xml, vb.net, xsd

我的对象有 3 个属性：1) 操作 2) ID 3) 名称

`Action`可以是`Update`或`Remove`并且是强制性的。`ID`是一个 int 并且是强制性的。Name 是一个字符串，并且是可选的 when`Action=Remove`并且是强制的 when `Action=Update`。

我如何在 XSD 中描述这一点？谢谢！

吉姆

这是我到目前为止所拥有的：

```
 <s:element name="UpdateAccount">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="myAccount" type="tns:WSUpdate" />
      </s:sequence>
    </s:complexType>
  </s:element>
  <s:complexType name="WSUpdate">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="ID" type="s:int" />
      <s:element minOccurs="1" maxOccurs="1" name="Name" nillable="false" type="s:string" />
      <s:element minOccurs="1" maxOccurs="1" name="action" type="tns:UpdateAction" />
    </s:sequence>
  </s:complexType>
  <s:simpleType name="UpdateAction">
    <s:restriction base="s:string">
      <s:enumeration value="Update" />
      <s:enumeration value="Remove" />
    </s:restriction>
  </s:simpleType> 
```

**编辑 2012 年 9 月 12 日 @ 美国东部标准时间上午 9:28：** 在做了更多思考之后，我已经修补了一些东西。这不是我想要的，但可能足够接近我的客户接受。它并没有完全进入条件细节，但它确实为客户提供了结构定义。你怎么看？

```
 <s:element name="UpdateAccount">
    <s:complexType>
      <s:sequence>
        <s:choice>
    <s:element minOccurs="0" maxOccurs="1" name="myAccount" type="tns:WSUpdate" />
    <s:element minOccurs="0" maxOccurs="1" name="myAccount" type="tns:WSDelete" />
    </s:choice>
      </s:sequence>
    </s:complexType>
  </s:element>
  <s:complexType name="WSUpdate">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="ID" type="s:int" />
      <s:element minOccurs="1" maxOccurs="1" name="Name" nillable="false" type="s:string" />
      <s:element minOccurs="1" maxOccurs="1" name="action" type="tns:UpdateAction" />
    </s:sequence>
  </s:complexType>
  <s:complexType name="WSDelete">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="ID" type="s:int" />
      <s:element minOccurs="0" maxOccurs="1" name="Name" nillable="true" type="s:string" />
      <s:element minOccurs="1" maxOccurs="1" name="action" type="tns:UpdateAction" />
    </s:sequence>
  </s:complexType>
  <s:simpleType name="UpdateAction">
    <s:restriction base="s:string">
      <s:enumeration value="Update" />
      <s:enumeration value="Remove" />
    </s:restriction>
  </s:simpleType> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:22:44.540

在 XSD 1.0 中解决问题的一种简单方法是稍微改变问题的术语：用`WSUpdate`同名的抽象元素替换当前元素；定义`Update`和`Remove`可以替代它的元素。根据需要将属性声明为可选或`Update`必需`Remove`。

在 XSD 1.0 中检查此类条件所需的只是条件取决于元素名称，而不是元素的其他属性。

[2012 年 9 月 12 日编辑：OP 要求提供更完整的示例。]

这是一个使用抽象元素的简单示例。

首先，我们让`UpdateAccount`type 引用它的子元素，而不是在本地声明它。这允许其他元素也可以引用它，并声明自己可以替代它。

```
<xs:element name="UpdateAccount">
  <xs:complexType>
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="1" 
                  ref="tns:myAccount" />
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

然后我们将`myAccount`元素本身声明为*抽象*元素。不接受实际命名的元素`myAccount`，只接受声明为可替代的具体元素`myAccount`。

```
<xs:element name="myAccount" abstract="true"/> 
```

然后我们声明两个可替代的具体元素`myAccount`，并为它们提供具有适当约束的类型。`action`不再需要子元素：删除和更新之间的区别现在由元素的名称（vs `update`）`remove`给出。

```
<xs:element name="update" type="tns:WSUpdate" 
            substitutionGroup="tns:myAccount"/>
<xs:complexType name="WSUpdate">
  <xs:sequence>
    <xs:element minOccurs="1" maxOccurs="1" 
                name="ID" type="xs:int" />
    <xs:element minOccurs="1" maxOccurs="1" 
                name="Name" nillable="false" type="xs:string" />
  </xs:sequence>
</xs:complexType>

<xs:element name="remove" type="tns:WSDelete" 
            substitutionGroup="tns:myAccount"/>
<xs:complexType name="WSDelete">
  <xs:sequence>
    <xs:element minOccurs="1" maxOccurs="1" 
                name="ID" type="xs:int" />
    <xs:element minOccurs="0" maxOccurs="1" 
                name="Name" 
                nillable="false" type="xs:string" />
  </xs:sequence>
</xs:complexType> 
```

在某些情况下，可能需要将元素声明`myAccount`为具有命名类型（如`tns:WSUpdate`原始示例中的 ）并将类型声明为该类型的`update`限制`remove`。这会使这个例子变得更长更乏味，所以我满足于在这里提及它。这是否有意义取决于您对维护模式的人的信任程度以及您的其他模式感知工具是否会对信息做有用的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T23:16:36.930

您描述的情况，其中一个属性的规则取决于另一个属性的值，通常被称为“共现约束”，并且在 XSD 1.0 中没有办法做到这一点。XSD 1.1 完全支持它使用一种称为“条件类型分配”的机制，但要使用它，您需要采用 Saxon 或 Xerces 作为您的 XSD 验证器。

# android - Android：旧 Android SDK 版本上的广告 (< 11)

> ID：12377597
> 
> 赞同：1
> 
> 时间：2012-09-11T20:42:05.710
> 
> 标签：android, sdk, ads

浏览互联网，我发现了很多适用于 android 的 AD SDK，但所有这些（在我发现的那些中）都需要 Android SDK 11 或更高版本，这对我来说是个大麻烦，因为我开发我的应用程序时要牢记提供最大合理的兼容性（SDK 3 兼容，针对 11 或 15 进行了优化）。仍然不够沮丧，我遇到了 AdSense 移动版的“条款和条件”，我读到了“发现与移动应用相关或引用自移动应用的每个广告都将被禁用”之类的内容，因此还有添加 WebView 的想法引用网页的活动布局消失了......

我的问题是：如何添加广告以保持与旧设备的兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:50:13.120

为什么不使用 Google 认可的[AdMob](https://developers.google.com/mobile-ads-sdk/download)？如果您查看他们的[示例下载](http://google-mobile-dev.googlecode.com/files/Android_XML.zip)，它使用的最低 SDK 为 3。（目标设置为 15，但如果您也针对 15 进行编译，这是可以预料的。）

# jquery - 用jquery提交表单

> ID：12377599
> 
> 赞同：0
> 
> 时间：2012-09-11T20:42:19.487
> 
> 标签：jquery

我对 jquery 很陌生，我有一个确认/取消消息框，它工作得很好，除了我无法从表单中获取任何已发布的值。我知道是我自己，我对 jquery 缺乏了解，但是如果有人可以查看我的代码并告诉我函数（结果）中需要什么，以便当表单发布到它自己时我可以使用，我将非常感激if(isset['$_post['delete_job'])) 以运行 php 脚本。

我的表格...

```
<form id="del_job" onsubmit="return del_job()" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<div id="deleted"><button type="submit"  name="delete_job" title="Delete Job" style="float:left; border:none; cursor:pointer" ><img src="img/delete.jpg" /></button> Delete</a></div>
</form> 
```

我的jquery...

```
<script type="text/javascript">
  $(document).ready(function() {
    $('#del_job').submit(function(ev){

      $.msgbox("Are you sure?", {
        type: "confirm", 
        buttons: [
          {type: "submit", value: "Yes"},
          {type: "cancel", value: "No"}
        ]
      }, function(result) {
        if (result && result=='Yes') {
          $('#del_job').send();
        }
      });

      ev.preventDefault();
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:51:27.100

终于找到问题了！

似乎 BUTTON 元素不是提交的 POST 数据的一部分，我想这是有道理的，因为它们没有实际价值。所以在这里你有两个选择，你可以切换`<button>`到`<input type="submit" name="delete_job" value="Delete" />`，但这里的限制是你不能在按钮中有图像。

另一种选择是添加一个隐藏字段并`isset()`在其上使用。为此，只需添加`<input name="del_job_submit" type="hidden" value="1" />`到您的表单并使用它`isset($_POST['del_job_submit'])`来检查表单是否已提交。

# c# - 为什么为一对多关系属性设置保护集

> ID：12377602
> 
> 赞同：0
> 
> 时间：2012-09-11T20:42:32.687
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping

我有客户和订单实体。在使用 fluent hibernate 为客户定义类时，为什么我们需要为 Orders 列表属性指定“保护集”。

```
public virtual IList<Order> Orders { get; protected set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:11:33.857

您不需要`protected`在 setter 上指定。这样做只是一个很好的设计。

如果在 setter 上未指定访问修饰符，它将隐式具有与属性本身相同的访问修饰符（`public`在您的情况下）。当 setter 为公共时，您的类的任何使用者都可以修改该`Orders`属性并将其设置为另一个实例。

```
public class Customer
{
    public virtual IList<Order> Orders { get; set; }
}

var customer = new Customer();
customer.Orders = new List<Order>(); 
```

在 setter 上定义`protected`访问修饰符时，只有继承的类才能修改属性。对于任何其他消费者，该`Orders`属性显示为只读。这实际上是一种[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

NHibernate 默认使用延迟加载。这是一种技术，其中某些属性（通常是列表）不会立即加载，而是在第一次使用时加载。NHibernate 通过代理实现了这一点。动态创建的代理类从您的`Entity`类继承并覆盖它的所有属性。这就是你`virtual`对所有班级成员的原因。

而且，直截了当，当您定义时，`protected set`您允许 NHibernate 的动态代理修改您的`Orders`属性。`Orders`可以初始化为一些空的代理集合，当有人尝试读取它时，将触发数据库加载，并且`Orders`属性将替换为从数据库加载的 Order 实例列表。

```
public class Customer
{
    public virtual IList<Order> Orders { get; protected set; }
}

var customer = new Customer();
//customer.Orders = new List<Order>(); // error: can't modify property

var orderCount = customer.Orders.Count; // this will trigger lazy-loading 
```

# jquery - 如何检查是否加载了 jQuery UI 位置

> ID：12377603
> 
> 赞同：3
> 
> 时间：2012-09-11T20:42:35.090
> 
> 标签：jquery, jquery-ui, position

jQuery 有[一个`.position()`](http://api.jquery.com/position/)开箱即用的原生[函数，它可以获取元素相对于其在页面上的位置的定位值。](http://api.jquery.com/position/)

jQuery UI[扩展了相同的功能](http://jqueryui.com/demos/position/)以允许修改元素的定位。

**如何检查`.position()`页面中是否加载了 jQuery UI 版本？**

可悲的是，这不仅仅是[检查页面上是否加载](https://stackoverflow.com/a/8052913/304588)了 jQuery UI 的问题，因为`.position()`插件扩展*不是*jQuery UI 核心库的一部分，这意味着某个地方的人会在*没有*`.position()`插件的情况下加载 jQuery UI 框架，并且链接的 jQuery UI 检查将失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:49:21.727

主要区别在于函数定义中的参数数量。标准的 jQuery 库有 0；jQuery UI 有 1 个。如果你能知道函数定义中有多少个参数，你就可以知道哪个库的函数存在。

幸运的是，这很容易做到。函数的`length`属性告诉您函数定义中有多少参数。所以如果`$.fn.position.length`是`0`，函数就是标准jQuery库的函数；如果是`1`，那就是 jQuery UI 库。

所以：

```
if ($.fn.position.length === 1) {
    // jQuery UI position method loaded
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:49:39.853

哎呀，等等；我想我找到了。

加载了 jQuery UI 的页面确实已经`jQuery.ui`初始化（这对于 jQuery UI 检查来说很好），但是那些带有`.position()`插件的页面也将`jQuery.ui.position`初始化。

我在 SO 上提问 5 分钟后找到答案的数字。：-/

# asp.net-mvc-3 - ASP.NET MVC 视图模型：在无效帖子上从后端重新加载或将所有属性置于隐藏输入中

> ID：12377605
> 
> 赞同：2
> 
> 时间：2012-09-11T20:42:39.813
> 
> 标签：asp.net-mvc-3, spark-view-engine, asp.net-mvc-viewmodel

我正在使用 ASP.NET MVC3，并且我有一个具有多个属性的视图模型，其中一些用于向用户显示，其中一些用作用户的输入并且可能具有默认值。我对 GET 请求（唯一的参数是获取内容的标识符）和帖子使用相同的视图模型，它们将整个视图模型作为操作中的参数。我的控制器使用通过从 NHibernate 会话中提取实体的业务逻辑层检索到的实体填充视图模型。

是否最好将所有只读字段的隐藏输入放在视图中，这样如果页面在具有无效视图模型的帖子之后呈现，它们就会出现，或者最好只使用用户真正的输入提供数据并重新加载后端的其余部分并将其合并？

谢谢！

编辑：

**为什么？**

编辑：

控制器通常看起来像这样：

```
public class MyController : BaseController /* BaseController provide BizLogic object */
{
    [HttpGet]
    public ActionResult EditSomething(Int32 id)
    {
        MyDomainObject = base.BizLogic.GetMyDomainObjectById(id);
        MyViewModel model = new MyViewModel();
        model.Id = id;
        model.ReadOnly1 = MyDomainObject.Field1;
        model.Readonly2 = MyDomainObject.Field2;
        model.UserInput3 = MyDomainObject.Field3;
        model.UserInput4 = MyDomainObject.Field4;
        return View(model);
    }

    [HttpPost]
    public ActionResult EditSomethingMyViewModel model)
    {
        PerformComplexValidationNotDoneByAttributes(model);
        if (ModelState.Valid)
        {
            BizLogicSaveTransferObject transferObject =
                new BizLogicSaveTransferObject();
            transferObject.Id = model.Id;
            transferObject.Field3 = model.UserInput3;
            transferObject.Field4 = model.UserInput4;
            base.BizLogic.SaveDomainObject(transferObject);

            return RedirectToAction("EditSomething", new { id = model.Id });
        }
        else
        {
            #if reload_non_input_fields_from_db

            MyDomainObject = base.BizLogic.GetMyDomainObjectById(model.Id);
            model.ReadOnly1 = MyDomainObject.Field1;
            model.Readonly2 = MyDomainObject.Field2;

            #endif

            return View(model);
        }
    }
} 
```

视图看起来像这样：

```
# Html.BeginForm();
${Html.ValidationSummary()}
    <p>ID: ${Model.Id}</p><input type="hidden" name="${Html.NameFor(m => m.Id)}" value="${Model.Id" />
    <p>Read Only One: ${Model.ReadOnly1}</p><!-- uncomment if not reload_non_input_fields_from_db <input type="hidden" name="${Html.NameFor(m => m.ReadOnly1)}" value="${Model.ReadOnly1}" />-->
    <p>Read Only Two: ${Model.ReadOnly2}</p><!-- uncomment if not reload_non_input_fields_from_db <input type="hidden" name="${Html.NameFor(m => m.ReadOnly2)}" value="${Model.ReadOnly2}" />-->
    <p>Input Three: ${Model.UserInput3}</p><input type="hidden" name="${Html.NameFor(m => m.UserInput3)}" value="${Model.UserInput3}" />
    <p>Input Three: ${Model.UserInput4}</p><input type="hidden" name="${Html.NameFor(m => m.UserInput3)}" value="${Model.UserInput4}" />
# Html.EndForm(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:54:52.450

如果它们是只读的，那么将任何输入放入页面是没有意义的（当然，唯一的记录 ID 字段除外）。正如您所写，合并允许用户修改的字段。

无论哪种方式，您都需要合并字段；对于只读字段，这些字段不应根据您发送给客户端的数据被覆盖，并假设会以同样的方式返回给您。即使您将输入“隐藏”，它们也不是真正隐藏的；例如，任何知道如何使用 Firebug 的人都可以轻松地修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:12:16.737

我不熟悉 Spark 视图引擎，但您的表单似乎只显示信息并具有隐藏字段？

但是，我相信您真正想要实现的是允许用户编辑 UserInput3 和 UserInput4。因此，我重写了您的控制器并查看我认为您试图实现的目标，并包含包含我的答案的评论。该视图是使用 razor 视图引擎编写的，因此您必须转移到 Spark。

我希望这是你想要的：

**控制器：**

```
//HttpGet has been removed as this is implied
public ViewResult EditSomething(Int32 id)
{
    MyDomainObject = base.BizLogic.GetMyDomainObjectById(id);
    MyViewModel model = new MyViewModel()  
    {
        //this uses C# 3.0 object initializer syntax
        model.Id = MyDomainObject.Id,
        model.ReadOnly1 = MyDomainObject.Field1,
        model.Readonly2 = MyDomainObject.Field2,
        model.UserInput3 = MyDomainObject.Field3,
        model.UserInput4 = MyDomainObject.Field4
    };
    return View(model);
}

//It is common (although not required) for the Post action to have the same name as the Get action
[HttpPost]
public ActionResult EditSomething (MyViewModel model)
{
    //I recommend you take a look at FluentValidation to validate your models.
    //Hopefully, you should no longer have the limitations of the data attributes and you will not require PerformComplexValidationNotDoneByAttributes()
    //This will allow you to just simply check the model state.
    if (ModelState.IsValid)
    {
        BizLogicSaveTransferObject transferObject = new BizLogicSaveTransferObject()
        {
            //You should write the new user inputs to the database.
            transferObject.Id = model.Id,
            transferObject.Field3 = model.UserInput3,
            transferObject.Field4 = model.UserInput4
        };
        base.BizLogic.SaveDomainObject(transferObject);

        //You were previously returning a redirect to the same action???  Do you need to pass the id?
        return RedirectToAction("NextAction", new { id = model.Id });
    }

    //Note: The else is not required as a return was used in the previous if.

    //IN ANSWER TO YOUR QUESTION, you should re-retrieve the domain object from the database to get the information to display again
    //as these values will be null/default values in your model.
    //There will be a performance cost in retrieving this information again but you could not rely on this data to be sent from the user.
    //Nor, should it have been included in the request as you should keep the size of the request down as indicated here:
    //http://developer.yahoo.com/performance/rules.html
    MyDomainObject = base.BizLogic.GetMyDomainObjectById(model.Id);
    model.ReadOnly1 = MyDomainObject.Field1;
    model.Readonly2 = MyDomainObject.Field2;

    return View(model);
} 
```

**看法：**

```
@model MyViewModel

<!--
    The read only fields which are only used to display information have been included outside of the form.
    As this information is only used for display purposes we do not want to send it back as:
    1\. It will increase the size of the request.
    2\. We can not rely on it as a mischievous user may have tampered with it.
-->
<p>Read Only One: @Html.TextBoxFor(m => m.ReadOnly1)</p>
<p>Read Only Two: @Html.TextBoxFor(m => m.ReadOnly2)</p>

@using (Html.BeginForm())
{
    <!--
        The id is still passed using a hidden field as you still need to identify the database entity in the post action.
        I have not displayed the id as there seemed little point.
        Again, a user could change this id so you would need to check that the id exists in the database.
    -->
    @Html.HiddenFor(m => m.Id)

    <!--
        The user inputs do not need to have their previous values passed via hidden fields.
        This increases the size of the request and by the looks of it you are not using them in the post controller.
    -->
    <p>@Html.TextBoxFor(m => m.UserInput3)</p>
    <p>@Html.TextBoxFor(m => m.UserInput4)</p>

    <input type="submit" value="submit" />
} 
```

# javascript - 完全可链接的 li 元素

> ID：12377607
> 
> 赞同：1
> 
> 时间：2012-09-11T20:42:51.837
> 
> 标签：javascript, html, css, webbrowser-control

我需要使整个`<li>`或`<tr>`元素可链接，有人建议我使用 javascript，并带有 onclick 操作。

```
 function doNav(url)
    {
        document.location.href = url;
    } 
```

这样做的工作，问题是，这种方式对用户来说是不可能的，了解 url 的去向。如何在不改变浏览器行为的情况下实现我的需求（完全可点击的元素）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:47:19.093

你不需要javascript。添加这个CSS

```
ul li a {
  display: block;
  padding: 10px 20px;//more or less, to suit your needs
  text-decoration: none;
} 
```

这将使整个`<li>`包含一个锚点可点击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:47:38.887

```
<li class="block"><a href="whatever">Text</a></li> 
```

这可以让你看到目标。进而：

```
.block{
    display:block;
    text-decoration:none; //just so it isn't underlined
} 
```

在 CSS 中将处理“整个事物需要可点击”的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:51:42.877

HTML

```
<ul class="menu">
 <li class="anchors" title="click me I am a link" > link 1 </li>
 <li class="anchors" title="click me I am a link" > link 1 </li>
 <li class="anchors" title="click me I am a link" > link 1 </li>
 <li class="anchors" title="click me I am a link" > link 1 </li>
</ul> 
```

CSS：

```
ul li.anchors{
 text-decoration:underline;
 color:blue;
 list-style-type:none;
 display: inline-block;
 margin:2px 4px;
 padding: 2px 4px;
}

ul li.anchors:hover{
 color:navy;
 cursor:pointer;
} 
```

更好的方法可能是这样的：http: [//jsfiddle.net/iamanubhavsaini/Cv2FM/1/](http://jsfiddle.net/iamanubhavsaini/Cv2FM/1/)

在这里，使用`content`属性和`data-`属性预先告诉用户他们将要点击什么。

# wpf - 在 WinRT 中更改插入符号颜色？

> ID：12377609
> 
> 赞同：2
> 
> 时间：2012-09-11T20:42:57.953
> 
> 标签：wpf, silverlight, microsoft-metro, windows-runtime

因此，在 WPF 和 Silverlight 中，您可以使用 TextBox.CaretBrush 为 TextBox 设置插入符号颜色，但在 WinRT 中，他们似乎完全明智地删除了此属性。所以现在如果 TextBox 是深色，因为它默认插入符号颜色为黑色，你看不到它，如果 TextBox 的背景颜色是黑色，插入符号完全不存在。我觉得这完全不合逻辑，必须有一种方法来改变插入符号的颜色，无论是务实还是其他？

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:46:43.957

这是不可能的。您[需要](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/26bc26d1-574d-48c1-9a00-5096c55cdbd3)在 TextBox 具有焦点时将其切换为浅色背景，以便插入符号可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T23:50:29.300

在这个问题上晚了一点，但我遇到了同样的问题并找到了一个简单的解决方法。在 Windows 8.1 RT 预览中，我注意到覆盖 TextBoxForegroundThemeBrush 会更改 TextBox 的插入符号或光标颜色。

```
<SolidColorBrush x:Key="TextBoxForegroundThemeBrush" Color="#FFFFFFFF" /> 
```

通常，光标始终为黑色，即使您覆盖了 Style 和 ControlTemplate。通过查看 Filip 上面提到的 ThemeResources.xaml，我偶然发现了这一点。我不确定这是否适用于 8.1 之前的 xaml，微软似乎已经在新的 SDK 中清理了很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:53:12.063

我通过在 TextBox 上方覆盖透明画布来实现此功能，使用 SelectionStart 和 GetRectFromCharIndex 获取坐标，然后在 KeyDown、KeyUp 和 MouseDown 上设置 Line 的坐标并使用 TranslateTransform 移动它，效果很好，性能很好极好的！

不知道为什么我不先尝试这个，我之前在 Silverlight 和 WPF 中做过很多次变换。我想 WinRt 的细微差别让我陷入了一个循环......

# matlab - 按下键时如何在Matlab上获取uicomponent滑块的值？

> ID：12377618
> 
> 赞同：0
> 
> 时间：2012-09-11T20:43:49.770
> 
> 标签：matlab, uislider, jslider, uicomponents

按下键时如何在Matlab上获取uicomponent滑块的值？我在 GUI 代码中使用它：

```
% --- Executes just before teste is made visible.
function teste_OpeningFcn(hObject, eventdata, handles, varargin)

% Choose default command line output for teste
handles.output = hObject;
handles.slid=uicomponent('style','slider',0,9,5,'position',[10 30 200 50]);

set(handles.slid, 'KeyPressedCallback','handles.slid.value');

% Update handles structure
guidata(hObject, handles) 
```

滑块工作正常，但是当我按下一个键时，这会返回错误*"Undefined variable "handles" or class "handles.slid.value"*。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:26:27.083

您可以将回调连接到所需事件并从*src*参数中获取值

```
handles.slid=uicomponent('style','slider',0,9,5,'position',[10 30 200 50]);
set(handles.slid, 'KeyPressedCallback','sliderCallback');

function sliderCallback(src,evt)
    display(['slider state ' num2str(get(src, 'Value'))]);
end 
```

如果sliderCallback函数不能全局访问，你可以通过函数指针来设置它：

```
set(handles.slid, 'KeyPressedCallback',@sliderCallback); 
```

# flash - flash builder：如何找到项目版本

> ID：12377621
> 
> 赞同：0
> 
> 时间：2012-09-11T20:44:01.513
> 
> 标签：flash, apache-flex, version, builder

几年前我在 Flex 中开发了一个初级项目，但我不记得我使用的 flex 版本。我搜索了项目的 xml 文件，但找不到。有人可以给我一个线索吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:54:12.073

如果您仍然有在 bin-debug 中生成的旧 index.html，请查找最低 Flash 播放器版本，这应该会给您一个线索。

* * *

以下是 Flex SDK 版本列表以及它们默认面向的 Flash Player 版本：

```
SDK     FP
4.6  -  11.1
4.5  -  10.2
4.1  -  10.1
4.0  -  10
3.5  -  9.0.124 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:49:21.603

在 Flash Builder 中，您可以调出您的项目属性，然后选择 Flex Compiler。

您将看到选择的工作区默认 SDK 或特定的 SDK。

如果您在构建项目后使用了默认 SDK 并对其进行了更改；我认为没有办法知道您过去用于编译项目的 SDK。

* * *

您还可以使用 SWF 反编译器从您的 SWF 中反编译代码。 [SoThink 有一个](http://www.sothink.com/product/flashdecompiler/)；但我相信还有其他人。如果您最初没有为框架使用 RSL；然后所有的框架代码都将被编译到你的 SWF 中，你也许可以解析框架代码来找出它。许多框架文件都包含一个“version.as”文件，它应该告诉您是否可以在源代码中找到它。

如果您确实使用框架的 RSL 编译了应用程序，那么查看部署目录中的 SWF / SWZ 文件应该会告诉您版本。例如，我正在开发的一个应用程序具有以下文件：mx_4.5.1.21489.swz、rpc_4.5.1.21328.swz、spark_4.5.1.21489.swz 等。我可以看出该应用程序是从弹性 4.5.1。

# android - 对 Android 应用程序从 1024 位切换到 2048 位 SSL 的影响

> ID：12377624
> 
> 赞同：1
> 
> 时间：2012-09-11T20:44:16.193
> 
> 标签：android, ssl

我目前有一个利用当前使用 1024 位 SSL 证书的流行 weservice 的 Android 应用程序。我被告知 web 服务将迁移到 2048 位 SSL 证书。我想知道 ：

*   这将如何影响在旧版 Android（例如：1.x）上使用我的应用程序的用户？
*   我假设我当前使用 HttpsURLConnection 的代码会自动处理更改，我的想法是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:17:32.267

> How will this impact the users using my app on an older version of Android (ex: 1.x)?

It's not a real answer, just a thought. (I am not aware whether 1.x had limitation ok RSA key length supported).

Based on [Usage share](http://en.wikipedia.org/wiki/Android_%28operating_system%29#Usage_share) article, there is about 0.6% of users who still uses Android 1.x. I would say it makes sense to concentrate on so small percentage, only if you have have absolutely huge user base.

> I am assuming that my current code using HttpsURLConnection will take care of the change >automatically, am i right in thinking so??

Yes. You don't need to do anything.

# php - 视图中不可避免的 php 逻辑 (MVC) 插入产品并显示消息

> ID：12377625
> 
> 赞同：1
> 
> 时间：2012-09-11T20:44:17.307
> 
> 标签：php, model-view-controller, view, business-logic

基本上我有一个用于插入产品的 html 表单。字段名称以及 $_POST 变量在我的 Product 类中初始化。构造函数正在“监听”提交按钮。当用户提交表单时，对象的状态变为“就绪”，这意味着它的属性已初始化并准备好插入数据库。

然后我需要根据插入的状态（成功或失败）返回一条消息，如果成功，我将打印类似“产品插入成功”之类的内容，如果失败：“检测到空字段”。

我的问题是是否允许我将这种逻辑放在视图中？像这样：

```
<?php $myproduct = new Product(); ?>

<form>
<!-- Fields -->
</form>

<?php
if ($myproduct->ready()) :
    if ($myproduct->insert()) : ?>
        <p>Product inserted successfully</p>
<?php
    else : ?>
        <p>Null fields detected</p>
<?php
    endif;
endif; ?> 
```

我真的想不出更简单的方法，因为我确实需要根据 insert() 返回状态来显示消息。

那么在 MVC 模式中是否允许在视图中混合这种逻辑？我没有公开任何类型的业务逻辑，只是检查对象的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:05:53.857

不。领域业务逻辑在视图中没有位置（也没有在整个表示层中）。这就是 MVC 有模型层的原因。

提交表单时，操作顺序应如下：

1.  `$_POST`控制器接收带有数据的请求

2.  控制器将信息发送到模型层

    *   如果数据有效，模型层保存信息
    *   如果数据无效，模型层设置并获取错误状态并保存（通常在会话中）

3.  控制器通知当前视图已`POST`发送

4.  当请求视图生成响应时（最好不是由控制器），它会发送一个`Location`HTTP 标头（以防止重复发布）

5.  `GET`控制器收到新请求（这次只有参数）

6.  如果需要，控制器会调整模型层和当前视图的状态

7.  视图查询模型层是否包含错误状态

    *   如果存在错误状态，则从模型层查看错误代码的请求列表，并根据该信息选择使用哪些模板来组成带有“错误”消息的表单
    *   如果模型层没有错误状态，视图使用模板创建“成功”消息

Model2 MVC模式中表单提交的操作顺序。

根据您是否在与表单本身相同的视图中显示错误消息和/或成功消息，视图实例可能会在*STEP 4*中检查模型层的错误状态。然后视图可以决定`Location`发送哪个标头。

PS 与模型层的交互很可能通过服务发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:51:48.700

如果我是你，我不会在视图中这样做。在逻辑中执行此操作并设置一个布尔值。该值可以在对象本身上，或者只是传递到视图中。

```
$isInsertedSuccessfully = $myproduct->insert(); 
```

或者，在 Product 的内部工作中，添加一个方法来测试它是否已被插入。例如：

```
$myproduct->insert();
if ($myproduct->exists())
{
    //true - must have been inserted
} 
```

或者

```
$myproduct->insert();
if ($myproduct->isSaved())
{
    //true - must have been inserted
} 
```

类似的东西？

# java - 如何从 JList 获取索引 n 处的 COMPONENT（不是数据）

> ID：12377628
> 
> 赞同：5
> 
> 时间：2012-09-11T20:44:51.717
> 
> 标签：java, swing, jlist, jcomponent, listselectionlistener

我通过传递一个数据数组来创建一个 JList

```
public class MyJList extends JList() {
...

   public MyJList(final Object[] listData) {
       super[listData];
   } 
```

我使用 ListCellRenderer 呈现此列表，它为每个项目提供了一个组件，可以根据业务逻辑启用或禁用它。

当我尝试通过键盘箭头导航时，问题就来了。我希望跳过禁用的项目。（在适当的方向继续下一个）我必须使用键盘监听器，因为 UI 会根据列表中选择的项目更改一些内容。麻烦的是，在键盘侦听器中，我无法获得具有所选索引的项目的 COMPONENT。此组件不属于 JList，调用 MyJList.getComponent(index) 失败并出现 ArrayIndexOutOfBoundsException。1 是一个太大的索引，尽管我可以看到七个项目，其中四个是启用的。

如何以编程方式从我的 JList 中按索引检索组件以确定它是否已启用？似乎返回组件的唯一接口是 getListCellRendererComponent() - 它会更改组件的显示。我只想让组件查看它是否已启用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:55:05.080

`JList`不包含任何组件。渲染器返回的组件仅用作标记，但实际上并未包含在`JList`.

[您可以在表格教程的“渲染器和编辑器”部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)找到所有这些解释。虽然它是针对表进行解释的，但它也适用于`JList`s。

如果你想获取某个索引的“组件”，你只需要使用渲染器并要求它提供一个组件。这方面的一个例子可以在源代码中看到`JList#getTooltipText`：

```
public String getToolTipText(MouseEvent event) {
    if(event != null) {
        Point p = event.getPoint();
        int index = locationToIndex(p);
        ListCellRenderer<? super E> r = getCellRenderer();
        Rectangle cellBounds;

        if (index != -1 && r != null && (cellBounds =
                           getCellBounds(index, index)) != null &&
                           cellBounds.contains(p.x, p.y)) {
            ListSelectionModel lsm = getSelectionModel();
            Component rComponent = r.getListCellRendererComponent(
                       this, getModel().getElementAt(index), index,
                       lsm.isSelectedIndex(index),
                       (hasFocus() && (lsm.getLeadSelectionIndex() ==
                                       index)));

            if(rComponent instanceof JComponent) {
                MouseEvent      newEvent;

                p.translate(-cellBounds.x, -cellBounds.y);
                newEvent = new MouseEvent(rComponent, event.getID(),
                                          event.getWhen(),
                                          event.getModifiers(),
                                          p.x, p.y,
                                          event.getXOnScreen(),
                                          event.getYOnScreen(),
                                          event.getClickCount(),
                                          event.isPopupTrigger(),
                                          MouseEvent.NOBUTTON);

                String tip = ((JComponent)rComponent).getToolTipText(
                                          newEvent);

                if (tip != null) {
                    return tip;
                }
            }
        }
    }
    return super.getToolTipText();
} 
```

# java - 我不明白为什么逻辑没有按预期工作

> ID：12377631
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:45:11.317
> 
> 标签：java, logic, if-statement

我正在创建一种方法，我必须通过使用简单的 // 语句来决定我在一天中的`else`哪个小时`else if`。`else`

我不明白为什么程序会直接进入该`else`部分。

我的逻辑有什么问题？我知道这个问题很值得问，但我很困惑，我真的很想知道这里出了什么问题。

```
public String whichClass()
{
    String string = "";
    int ClassLength = 2;

    this.setLengthOfOS(ClassLength);
    this.setLengthOfSecurity(ClassLength);
    this.setLengthOfForensics(ClassLength);

    this.setOSStartHour(13);
    this.setSecurityStartHour(15);
    this.setForensicsStartHour(17);

    Date d = new Date();
    Calendar c = Calendar.getInstance();

    c.setTime(d);

    this.setHour(c.get(Calendar.HOUR_OF_DAY));

    if ((this.getHour() > this.getOSStartHour()) && 
            (this.getHour() < this.getSecurityStartHour())) 
    { 
        string = "We're in OS class."; 
    }
    else if ((this.getHour() > this.getSecurityStartHour()) && 
            (this.getHour() < this.getForensicsStartHour()))
    { 
        string = "We're in Security class."; 
    }
    else 
    {
        string = "We have no class.";
    }

    return string;
} 
```

**编辑：这是纠正和工作。**

```
public String whichClass()
{
    String string = "";
    Date d = new Date();
    Calendar c = Calendar.getInstance();
    c.setTime(d);
    this.setHour(c.get(Calendar.HOUR_OF_DAY));

    if ((this.getHour() >= this.OSStartHour) && (this.getHour() < (this.OSStartHour + this.lengthOfOS))) string = "We're in OS class."; 
    else if ((this.getHour() >= this.SecurityStartHour) && (this.getHour() < (this.SecurityStartHour + this.lengthOfSecurity))) string = "We're in Security class."; 
    else if ((this.getHour() >= this.ForensicsStartHour) && (this.getHour() < (this.ForensicsStartHour + this.lengthOfForensics))) string = "We're in Security class."; 
    else string = "We have no class.";

    return string;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:55:33.563

你没有考虑平等。所以当`this.getHour()`是 15 时，它不会落入任何插槽。

既是
`this.getHour() < this.getSecurityStartHour()`假的
，
`this.getHour() < this.getSecurityStartHour()`也是假的，

因为它们都是严格的不等式

`this.getHour() == this.getSecurityStartHour()`是真的

尝试

```
if ((this.getHour() >= this.getOSStartHour()) && 
        (this.getHour() < this.getSecurityStartHour())) 
{ 
    string = "We're in OS class."; 
}
else if ((this.getHour() >= this.getSecurityStartHour()) && 
        (this.getHour() < this.getForensicsStartHour()))
{ 
    string = "We're in Security class."; 
}
else 
{
    string = "We have no class.";
} 
```

记下**>=**而不是**>**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:58:33.240

> this.getHour() 现在返回 15，因为它是下午 3 点。很快就16岁了

因为您的条件都不允许相等（`>=`, `<=`, `==`）小时`13`, `15`, 并且`17`本质上是禁忌。因此，您的程序预计仅在 hour 为`14`或时工作`16`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T20:56:31.507

这是一道数学题：

this.getOSStartHour() = 13

this.getSecurityStartHour() = 15

this.getForensicsStartHour() = 17

所以只有 hour = 14 我们可以先到达，如果

对于小时 = 16，我们可以达到秒，如果

其他休息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T20:56:44.437

您的代码正在运行该`else`部分，因为`Calendar`一天中的 s 小时既不是`14`( `"OS class"`) 也不是`16`( `"Security class"`)。

如果您将系统时钟更改为，例如`14`，它应该打印`"We're in OS class."`。同样的道理，如果你把它改成`16`，它应该打印`"We're in Security class."`。

另请注意，如果将其更改为`15`，它将始终执行该`else`部分。那是因为您只考虑`hour > 13 and hour < 15`, 和`hour > 15 and hour < 17`，而不考虑`hour >= 15`or `hour <= 15`。不知道这是错误还是期望的行为。

# python - Python中如何实现求幂？

> ID：12377632
> 
> 赞同：12
> 
> 时间：2012-09-11T20:45:15.283
> 
> 标签：python

我能够使用比内公式（即封闭解公式计算斐波那契数）在恒定时间内计算任何通常可计算的斐波那契数（除非结果变得很大）。这是我的代码：

对于斐波那契的非递归实现：

```
gr = (1 + 5**0.5) / 2
def gfib(n):
    return int(((gr**n - (1-gr)**n) / 5**0.5)) 
```

我知道 a^n 表示指数运行时间复杂度，但是当代码在 python 中运行时情况并非如此，因为这会立即计算第 n 个斐波那契数。我已经对如何在 python 中实现指数进行了一些研究（可能是通过平方求幂？）以给出我得到的恒定时间解决方案，但还没有找到明确的答案。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T21:50:21.023

[float.__pow__()](http://hg.python.org/cpython/file/6fea947edead/Objects/floatobject.c#l744)方法使用 C 的libm [*，*](http://www.slac.stanford.edu/comp/unix/package/rtems/doc/html/libm/libm.info.pow.html)它充分利用了对二进制浮点运算的硬件支持。后者使用对数表示数字。对数表示可以实现一次乘法运算。

**执行摘要：**浮点指数是在硬件中实现的，由于对数的魔力，它以几乎恒定的速度运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T20:52:00.170

整数指数的计算效率比您想象的要高得多。以下是[Wikipedia 对此的评价](https://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_of_integer_powers)：

> 计算 bⁿ 的最简单方法需要 n-1 次乘法运算，但它的计算效率比这更高，如下面的示例所示。要计算 2¹⁰⁰，请注意 100 = 64 + 32 + 4。按顺序计算以下内容：

```
2² = 4
(2²)² = 2⁴ = 16
(2⁴)² = 2⁸ = 256
(2⁸)² = 2¹⁶ = 65,536
(2¹⁶)² = 2³² = 4,294,967,296
(2³²)² = 2⁶⁴ = 18,446,744,073,709,551,616
2⁶⁴ × 2³² × 2⁴ = 2¹⁰⁰ = 1,267,650,600,228,229,401,496,703,205,376 
```

> 这一系列步骤只需要 8 次乘法运算，而不是 99 次（因为上面的最后一个乘积需要 2 次乘法）。
> 
> **一般来说，计算 bⁿ 所需的乘法运算次数可以通过使用[平方取幂](https://en.wikipedia.org/wiki/Exponentiation_by_squaring)**或（更一般地）[加法链取幂](https://en.wikipedia.org/wiki/Addition-chain_exponentiation)减少到 Θ(log n) 。找到 bⁿ 的最小乘法序列（指数的最小长度加法链）是一个困难的问题，目前还没有已知有效的算法（参见子集和问题），但有许多相当有效的启发式算法可用。 [29]

平方指数的页面很难总结，但它基本上是 2⁸ == (2⁴)² == (2²)²)² 的想法，所以`2 × 2 × 2 × 2 × 2 × 2 × 2 × 2 = 256`你可以计算而不是计算`2 × 2 = 4; 4 × 4 = 16; 16 × 16 = 256`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T20:51:52.613

您可以在 CPython 的[源代码中找到 log_pow 函数的](https://github.com/python/cpython/blob/3.7/Objects/longobject.c#L4022)实现。

# mysql - 将 DataSet 更改保存到 MYSQL 数据库表时出现问题

> ID：12377633
> 
> 赞同：0
> 
> 时间：2012-09-11T20:45:21.787
> 
> 标签：mysql, dataset, updates, dataadapter

我正在`dataGridView`使用表 A 中的数据填充 a，该表属于`MySQL`数据库表。`SaveChangestoDb( string TableName)`在插入新数据或修改 DataTable A 的数据后调用该方法时 - 更改正在保存到数据库中，但是当我将批准`DataRows`从表 A 转移到表 B 然后从表 A 中删除批准的行时...保存对表 A 所做的更改失败。它不会抛出任何异常。

我`BindingSource`用于将表 A 绑定到 ，`dataGridView`并`CommandBuilder`用于获取`DataAdapter`.

这是我的代码：

```
 private const string ConnectionString =
        "server=*****.**;Port=****;database=**;username=****;password=*****;pooling=false;";

    private DataSet _localDatabaseCopy;
    private MySqlDataAdapter _myDataAdapter;

    private void Form1_Load(object sender, System.EventArgs e)
    {
        InitializeLocalDatabaseCopy();
        InitializeDataGridView();
        dataGridView1.AllowUserToAddRows = false;
    }

    /// <summary>
    ///  Binds the DataGridView to the BindingSource and load the data from the database.
    /// </summary>

    private void InitializeDataGridView()
    {
        DataTable dataTable = _localDatabaseCopy.Tables[Resources.WorkingDataDatabaseTableName];
        dataGridView1.DataSource = new BindingSource { DataSource = dataTable };
        dataGridView1.MultiSelect = true;
        dataTable.Columns[Resources.ColumnName_IDNr].AutoIncrement = true;
        dataTable.Columns[Resources.ColumnName_IDNr].AutoIncrementSeed = -1;
        dataTable.Columns[Resources.ColumnName_IDNr].AutoIncrementStep = -1;

    }
    /// <summary>
    /// Fills the _myDataAdapter DataAdapter with the workingData & approvedData DataTables and adds the 2 DataTables to the _localDatabaseCopy DataSet.
    /// </summary>
    private void InitializeLocalDatabaseCopy()
    {
        _localDatabaseCopy = new DataSet();
        DataTable workingData = new DataTable(Resources.WorkingDataDatabaseTableName);
        DataTable approvedData = new DataTable(Resources.ApprovedDataDatabaseTableName);
        using (MySqlConnection connection = new MySqlConnection(ConnectionString))
        {
            _myDataAdapter = new MySqlDataAdapter(string.Format("select * from {0}", Resources.WorkingDataDatabaseTableName), connection);
            _myDataAdapter.Fill(workingData);
            _myDataAdapter.SelectCommand.CommandText = string.Format("select * from {0}", Resources.ApprovedDataDatabaseTableName);
            _myDataAdapter.Fill(approvedData);
        }

        _localDatabaseCopy.Tables.Add(workingData);
        _localDatabaseCopy.Tables.Add(approvedData);
    }

    private void SaveChangesToDb(string tableName)
    {
        MySqlCommandBuilder builder = new MySqlCommandBuilder(_myDataAdapter);

        _myDataAdapter.SelectCommand.CommandText = String.Format("select * from {0}", tableName);
        _myDataAdapter.UpdateCommand = builder.GetUpdateCommand();
        _myDataAdapter.DeleteCommand = builder.GetDeleteCommand();
        _myDataAdapter.InsertCommand = builder.GetInsertCommand();

        DataTable deletedRecords = _localDatabaseCopy.Tables[tableName].GetChanges(DataRowState.Deleted);
        DataTable modifiedRecords = _localDatabaseCopy.Tables[tableName].GetChanges(DataRowState.Modified);
        DataTable addedRecords = _localDatabaseCopy.Tables[tableName].GetChanges(DataRowState.Added);
        try
        {
            if (deletedRecords != null)
                _myDataAdapter.Update(deletedRecords);
            if (modifiedRecords != null)
                _myDataAdapter.Update(modifiedRecords);
            if (addedRecords != null)
                _myDataAdapter.Update(addedRecords);

            _localDatabaseCopy.AcceptChanges();

        }
        catch (Exception exception)
        {
            MessageBox.Show(exception.Message);
        }
        finally
        {
            if (deletedRecords != null)
                deletedRecords.Dispose();
            if (modifiedRecords != null)
                modifiedRecords.Dispose();
            if (addedRecords != null)
                addedRecords.Dispose();
        }

    }

    private void btnSave_Click(object sender, EventArgs e)
    {

        SaveChangesToDb(Resources.WorkingDataDatabaseTableName);

    }

    private void DeleteDataRows(DataRow[] rowsToDelete, string tableIndex)
    {
        foreach (DataRow row in rowsToDelete)
            _localDatabaseCopy.Tables[tableIndex].Rows.Remove(row);
    }

    /// <summary>
    /// Transfers the approved DataRows from the DataTable/DataGridview to the Approved Table in the MySql Database
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void btnTransferApproved_Click(object sender, EventArgs e)
    {
        SetWaitingCursor();

        TransferApprovedDataRows();
        DeleteTransferedRowsFromWorkingDataTable();
        SaveChangesToDb(Resources.WorkingDataDatabaseTableName);

        SetDefaultCursor();
    }

    private void DeleteTransferedRowsFromWorkingDataTable()
    {
        DataRow[] approvedRowsToDelete = _localDatabaseCopy.Tables[Resources.WorkingDataDatabaseTableName].Select("Approved = 1");
        DeleteDataRows(approvedRowsToDelete, Resources.WorkingDataDatabaseTableName);

    }

    private void TransferApprovedDataRows()
    {
        DataTable myTableCopy = _localDatabaseCopy.Tables[Resources.WorkingDataDatabaseTableName].Copy();
        DataRow[] approvedRows = myTableCopy.Select("Approved = 1");

        // if there are no rows which have been approved, quit
        if (approvedRows.Any())
        {
            foreach (DataRow row in approvedRows)
            {
                // checking if the row which is to be approved already exists in the approved-table
                bool redundant = false;
                foreach (
                    DataRow approvedRow in _localDatabaseCopy.Tables[Resources.ApprovedDataDatabaseTableName].Rows)
                    redundant |= approvedRow[Resources.ColumnName_IDNr].ToString() ==
                                 row[Resources.ColumnName_IDNr].ToString();

                if (!redundant)
                    _localDatabaseCopy.Tables[Resources.ApprovedDataDatabaseTableName].Rows.Add(row.ItemArray);
            }
            // writing the changes back to the database, Approved Table
            SaveChangesToDb(Resources.ApprovedDataDatabaseTableName);
        }

        if (!approvedRows.Any())
            return;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:51:51.820

问题出在你的`DeleteDataRows`方法上。从表中删除行不会将它们标记为删除，它只是将它们从表的内存表示中删除。您需要致电[`DataRow.Delete`](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete.aspx)：

```
private void DeleteDataRows(DataRow[] rowsToDelete, string tableIndex)
{
    foreach (DataRow row in rowsToDelete)
        row.Delete();
} 
```

# php - 未定义索引：在微博发帖

> ID：12377634
> 
> 赞同：0
> 
> 时间：2012-09-11T20:45:31.587
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:41:41.293

仅当您的 URL 具有查询字符串（这通常意味着使用 GET 方法提交表单）时，才会填充[$_GET 变量。](http://php.net/manual/en/reserved.variables.get.php)
所以你必须首先检查是否`$_GET`包含值，然后使用这些值：

```
if(isset($_GET['post']) && isset($_GET['page'))
{
    $post   = mysqli_real_escape_string($_GET['post']);
    $page   = intval($_GET['page']);
} 
```

`string`在您的第一行代码中强制转换为无用：`mysqli_real_escape_string`无论如何都会返回一个字符串。
在您的第二行代码中：

*   using `mysql_real_escape_string`since you are using `intval`: 整数值不需要任何额外的转义
*   投射到`int`是没用的，这已经完成了`intval`

# 重要通知：

由于所有 mysql_* 函数都已弃用并将在 PHP 的未来版本中删除，因此您应该使用[MySQLi 或 PDO](http://php.net/manual/en/mysqlinfo.api.choosing.php)（我在代码示例中使用了 MySQLi）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:53:15.267

此错误正是警告告诉您的内容。

$_GET 是作为 HTTP GET 参数传入的项目数组。

`$_GET['page']`并`$_GET['post']`给你未定义的索引警告，因为关联数组中没有键为“post”或“page”的项目。

弄清楚发生了什么的一种方法是 var_dump() 整个 $_GET 数组以查看其中的内容。

`var_dump($_GET)`

# facebook - Facebook 签名请求部分响应

> ID：12377638
> 
> 赞同：1
> 
> 时间：2012-09-11T20:45:39.830
> 
> 标签：facebook, facebook-php-sdk

我正在使用 Facebook PHP SDK 来解码签名请求（由 JS SDK 提供）。解码后的响应发送回算法、代码、issued_at 时间戳和用户 ID。过去，除了 Facebook 文档页面上定义的更多字段之外，我还能够从请求中提取其他字段（app_data、page 和 like boolean）：

[https://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

是否有任何理由我无法访问这些附加字段？该应用程序已安装，并且位于页面选项卡内，我看不出它为什么不为我提供更多字段，特别是 app_data 和 page。

我还尝试使用上面链接中的示例对签名请求进行解码，但仍然收到相同的响应。

[http://cl.ly/image/1p0n1S3S0y0M](http://cl.ly/image/1p0n1S3S0y0M)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:00:43.067

> 我正在使用 Facebook PHP SDK 来解码签名请求（由 JS SDK 提供）。

这意味着您从 FB.login 或 FB.getLoginStatus 获得的签名请求，我想？您只会从其中之一获得此处描述的数据，[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

您提到的其他信息，页面 id，用户是否喜欢该页面等，仅在 Facebook 在初始加载时发布到您的应用程序的 signed_request 中可用。

# logging - 在 Google Apps 脚本中打印到控制台？

> ID：12377640
> 
> 赞同：97
> 
> 时间：2012-09-11T20:45:51.083
> 
> 标签：logging, google-apps-script, console.log

我对编程很陌生（在 Codecademy 上学过一些 JS 课程）。我正在尝试创建一个简单的脚本来确定，如果给定一个包含扑克游戏结果的电子表格，谁应该支付给谁。我打开了 Google Apps 脚本，并编写了以下内容以开始使用：

```
function addplayerstoArray(numplayers) {

  var playerArray = [];

  for (i=0; i<numplayers; i++) {
    playerArray.push(i);
  }
}  

addplayerstoArray(7);

console.log(playerArray[3]) 
```

这个想法是创建一个包含玩家总数的数组。运行代码时，我认为它会在控制台上打印“3”。但是什么也没发生。它说

> “ReferenceError：未定义“控制台”。”

A) 关于 Google Apps 脚本控制台在打印方面的工作方式，我有什么不明白的地方，以便我可以查看我的代码是否完成了我想要的工作？

B) 代码有问题吗？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-12T00:12:59.180

控制台不可用，因为代码在云中运行，而不是在您的浏览器中。相反，使用GAS 提供的[Logger类：](https://developers.google.com/apps-script/class_logger)

```
Logger.log(playerArray[3]) 
```

然后在 IDE 中的 View > Logs... 下查看结果

[这是有关使用 GAS](https://developers.google.com/apps-script/troubleshooting#logging_custom_messages)进行日志记录的一些文档。

编辑：2017-07-20 Apps 脚本现在还提供[Stackdriver Logging](https://developers.google.com/apps-script/guides/logging#stackdriver_logging)。在查看 - 控制台日志下的脚本编辑器中查看这些日志。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-03T14:21:11.027

只是为了建立上面 vinnief 的 hacky 解决方案，我像这样使用 MsgBox：

```
Browser.msgBox('BorderoToMatriz', Browser.Buttons.OK_CANCEL); 
```

它的作用有点像断点，停止脚本并将您需要的任何字符串输出到弹出框。我发现特别是在表格中，我在使用 Logger.log 时遇到问题，这在大多数情况下提供了足够的解决方法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-17T15:16:53.780

尽管`Logger.log()`从技术上讲是向控制台输出内容的正确方法，但它有一些烦恼：

1.  输出可能是非结构化的混乱，难以快速消化。
2.  您必须首先运行脚本，然后单击查看/日志，这是额外的两次单击（如果您记得 Ctrl+Enter 键盘快捷键，则单击一次）。
3.  您必须 insert `Logger.log(playerArray)`，然后在调试后您可能想要删除`Logger.log(playerArray)`，因此需要额外的 1-2 个步骤。
4.  您必须单击“确定”关闭覆盖（再单击一次）。

相反，每当我想调试某些东西时，我都会添加断点（单击行号）并按下调试按钮（错误图标）。当您将某些内容分配给变量时，断点工作得很好，但当您启动一个变量并希望稍后查看它的内部时，断点就不太好用，这与操作试图做的事情类似。在这种情况下，我会通过输入“x”（x 标记该位置！）来强制中断条件以引发运行时错误：

[![在此处输入图像描述](../Images/01648e9aedd5b7c766e3d3e24f8bc974.png)](https://i.stack.imgur.com/9GdTf.png)

与查看日志比较：

[![在此处输入图像描述](../Images/b6766a5a9b7c6d0fcfcc09b681e55f8b.png)](https://i.stack.imgur.com/Fv8nj.png)

调试控制台包含更多信息，并且比日志覆盖更容易阅读。这种方法的一个小好处是，如果保持干净的代码是你的事，你永远不必担心用一堆日志命令污染你的代码。即使您输入“x”，您也必须记住在调试过程中将其删除，否则您的代码将无法运行（内置清理措施，是的）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-18T23:55:58.080

# 回答 OP 问题

> A) 关于 Google Apps 脚本控制台在打印方面的工作方式，我有什么不明白的地方，以便我可以查看我的代码是否完成了我想要的工作？

Google Apps 脚本项目的 .gs 文件中的代码在服务器上而不是在网络浏览器上运行。记录消息的方法是使用[Class Logger](https://developers.google.com/apps-script/reference/base/logger)。

> B) 代码有问题吗？

正如错误消息所说，问题是`console`没有定义，但现在相同的代码会引发其他错误：

> ReferenceError：未定义“playerArray”。（第 12 行，文件“代码”）

那是因为 playerArray 被定义为局部变量。将线移出功能将解决此问题。

```
var playerArray = [];

function addplayerstoArray(numplayers) {
  for (i=0; i<numplayers; i++) {
    playerArray.push(i);
  }
}  

addplayerstoArray(7);

console.log(playerArray[3]) 
```

现在代码执行没有抛出错误，我们应该查看 Stackdriver Logging，而不是查看浏览器控制台。在 Google Apps 脚本编辑器 UI 中，点击**View > Stackdriver Logging**。

# 附录

2017 年，Google 向所有脚本发布了 Stackdriver Logging 并添加了 Class Console，因此包括类似`console.log('Hello world!')`的内容不会引发错误，但日志将在 Google Cloud Platform Stackdriver Logging Service 而不是浏览器控制台上。

来自[Google Apps 脚本发行说明 2017](https://developers.google.com/apps-script/releases/2017)

> **2017 年 6 月 23 日**
> 
> [Stackdriver Logging](https://developers.google.com/apps-script/guides/logging#stackdriver_logging)已退出抢先体验。所有脚本现在都可以访问 Stackdriver 日志记录。

从[日志记录 > Stackdriver 日志记录](https://developers.google.com/apps-script/guides/logging#stackdriver_logging)

> 以下示例展示了如何使用[控制台](https://developers.google.com/apps-script/reference/base/console)服务在 Stackdriver 中记录信息。
> 
> ```
> function measuringExecutionTime() {
>   // A simple INFO log message, using sprintf() formatting.
>   console.info('Timing the %s function (%d arguments)', 'myFunction', 1);
> 
>   // Log a JSON object at a DEBUG level. The log is labeled
>   // with the message string in the log viewer, and the JSON content
>   // is displayed in the expanded log structure under "structPayload".
>   var parameters = {
>       isValid: true,
>       content: 'some string',
>       timestamp: new Date()
>   };
>   console.log({message: 'Function Input', initialData: parameters});
> 
>   var label = 'myFunction() time';  // Labels the timing log entry.
>   console.time(label);              // Starts the timer.
>   try {
>     myFunction(parameters);         // Function to time.
>   } catch (e) {
>     // Logs an ERROR message.
>     console.error('myFunction() yielded an error: ' + e);
>   }
>   console.timeEnd(label);      // Stops the timer, logs execution duration.
> } 
> ```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-14T15:04:30.510

在 google 脚本项目中，您可以创建 html 文件（例如：index.html）或 gs 文件（例如：code.gs）。.gs 文件在服务器上执行，您可以按照@Peter Herrman 的描述使用 Logger.log。但是，如果该函数是在 .html 文件中创建的，则它正在用户的浏览器上执行，您可以使用 console.log。[Chrome浏览](https://developers.google.com/web/tools/chrome-devtools/debug/console/console-ui?hl=en#opening-the-console)器控制台可以通过 Windows/Linux 上的 Ctrl Shift J 或 Mac 上的 Cmd Opt J 查看

如果要在 html 文件上使用 Logger.log，可以使用[scriptlet](https://developers.google.com/apps-script/guides/html/templates)从 html 文件调用 Logger.log 函数。为此，您将插入*<? Logger.log(something) ?>*用您想要记录的任何内容替换某些内容。标准小脚本，使用语法 <? ... ?>，执行代码而不显式地将内容输出到页面。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-11T01:08:29.990

### 2020 年更新

2020 年 2 月，Google 宣布对内置的 Google Apps Script IDE进行[重大升级，](https://developers.google.com/apps-script/guides/v8-runtime)[现在**支持 console.log()**](https://developers.google.com/apps-script/guides/logging)。因此，您现在可以同时使用两者：

1.  记录器.log()
2.  控制台.log()

快乐编码！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-25T12:31:24.940

确保选择需要执行的功能。看截图：
[![应用脚本日志记录](../Images/c25fafaccdce146a865c9b5cc1b6f2b4.png)](https://i.stack.imgur.com/xpCEf.jpg)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-18T20:57:08.490

在新的 Apps 脚本（2021 年发布）中查看日志：

1.  转到 Apps 脚本
2.  在从编辑器到第 4 个选项卡的侧边栏切换选项卡中（我有其他语言，所以我不知道运行或打开它的名称）abowe settings
3.  此选项卡包含所有脚本运行的历史记录，只需将其下拉即可看到您的日志

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2021-04-06T14:03:03.630

Logger.log（你的消息），然后查看日志。

# java - 查找偶数个节点的双链表中间

> ID：12377644
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:46:08.670
> 
> 标签：java, list

以下是我查找双链表中间节点的代码，但它仅适用于奇数个节点。我不知道如何处理偶数节点的情况：

```
public Object findMiddleNode() {
    DLNode first = getHeadNode();
    DLNode last = getTailNode();
    while(first!=last) {
        first = first.getNext();
        last = last.getPrevious();
    }
    return first.getElement();      
} 
```

* * *

这是我更新的代码：

```
public MyDequeue findMiddleNode() {
    DLNode first = getHeadNode();
    DLNode last = getTailNode();
    MyDequeue m = new MyDequeue();
    while(first!=last && first.getNext()!= last) {
        first = first.getNext();
        last = last.getPrevious();
    }
    if(first == last) {
        m.insertLast(first.getElement());           
        return m;
    }           
    else {
        m.insertLast(first.getElement());
        m.insertLast(last.getElement());
        return m;
    }
} 
```

MyDequeue 类是我对双向链表的实现。我返回 MyDequeue 的原因是因为我已经有了一个打印双向链表元素的静态打印方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:11:32.903

```
This is my code in java 
import java.util.LinkedList;

public class DeleteMiddleLinkedList {
    public static void main(String[] args) {
        LinkedList<String> list = new LinkedList<String>();
        list.add("1");
        list.add("2");
        list.add("3");
        list.add("4");
        list.add("5");

        DeleteMiddleLinkedList ds = new DeleteMiddleLinkedList();
        ds.middleDelete(list, "");

        for (String s : list) {
            System.out.println(s);
        }

    }

    public void middleDelete(LinkedList<String> list, String s) {
        int size = list.size();

        if (list == null) {
            return;
        }

        if (size % 2 == 0) {
            list.remove(size / 2);
            list.remove((size / 2) - 1);
        } else if (size % 2 != 0) {
            list.remove((size / 2));
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:55:37.017

对于偶数个节点，第一个和最后一个在中间相互通过。例如，如果您有 4 个节点 1..4，当 last 为 3 时，first 将为 2。在下一次迭代中，first 将为 3，last 将为 2。因此您永远不会失败 while 循环测试（first != last) 需要在适当的点退出循环。一个简单的解决方法是将您的 while 测试修改为

`while ((first != last) && (first.getNext() != last)) {`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:38:01.497

这是我更新的代码：

```
public MyDequeue findMiddleNode() 
{
    DLNode first = getHeadNode();
    DLNode last = getTailNode();
    MyDequeue m = new MyDequeue();
    while(first!=last && first.getNext()!= last) 
    {
        first = first.getNext();
        last = last.getPrevious();
    }
    if(first == last) 
    {
        m.insertLast(first.getElement());           
        return m;
    }           
    else 
    {
        m.insertLast(first.getElement());
        m.insertLast(last.getElement());
        return m;
    }
} 
```

MyDequeue 类是我对双向链表的实现。我返回 MyDequeue 的原因是因为我已经有一个静态打印方法来打印双向链表的元素。对更好的解决方案有什么建议吗？

# asp.net - Asp.Net Facebook Like 按钮错误

> ID：12377647
> 
> 赞同：0
> 
> 时间：2012-09-11T20:46:12.837
> 
> 标签：asp.net, facebook, facebook-like

我首先在 Facebook 中创建了我的应用程序，然后我从 Facebook 获得了类似按钮的代码。您可以将我的代码验证为；
**我正在使用 HTML5 版本；**

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

我的按钮代码是；

```
<div class="fb-like" data-href="http://www.google.com.pk" data-send="false" 
     data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

但是当我点击“喜欢按钮”时，会弹出一个新窗口，几秒钟后我得到这个错误；

```
 The webpage you are trying to viewing try to close the browser. Do you want to close the browser? 
```

然后我在 IE10 中按 F12，我看到了 javascript 的“错误控制台”，我什么也没有。
我也在**Chrome 和 FireFox**中尝试过，当我单击一个按钮时，该按钮会消失（在 Firefox 和 Chrome 中）。

```
What am I getting wrong?
Do I need an extra step in my Facebook App I-e developer.facebook.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:00:47.333

如果你给 data-href="http://www.google.com.pk" 那么这是错误的。您应该提供一个 facebook 页面。

并将类从“fb-like”更改为“fb-like-box”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T21:31:49.347

最好的解决方案是这个。

您不需要在 Uri 上使用 http://。

您可以在剃刀视图上使用下一个方法：

@HttpContext.Current.Request.Url.AbsoluteUri.Replace("http://", "")。

一个完整的例子：

```
 <div id="fb-root"></div>
    <script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v2.8&appId=YOUAPPID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <h1>Facebook Like Example</h1>
    @HttpContext.Current.Request.Url.AbsoluteUri.Replace("http://", "")

<div class="fb-like" data-href="@HttpContext.Current.Request.Url.AbsoluteUri.Replace("http://","")" data-layout="standard" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div> 
```

注意：在您的 Facebook 应用程序上，您需要使用完整的 URL：http: [//iscangelmartinez.azurewebsites.net](http://iscangelmartinez.azurewebsites.net)

# python - 如何在 Python 中获取项目的当前路径？

> ID：12377648
> 
> 赞同：1
> 
> 时间：2012-09-11T20:46:12.853
> 
> 标签：python

有没有办法在子文件夹中找出当前项目的路径？

例如，如果我有类似的东西：

```
/
    main.py
    /utils
        utilities.py
    /foo
        foo.py
        /foo/bar
           bar.py 
```

在编码`/foo/foo.py`或编码时，`/foo/bar/bar.py`我想包含位于`/utils/utilities.py`如何通过调用项目的某种相对路径然后导入此帮助模块来执行此操作的“实用程序”模块？

我能够检索正在执行的文件的路径：

```
os.path.realpath(os.path.abspath(os.path.split(inspect.getfile( inspect.currentframe() ))[0])) 
```

但我需要的是当前项目的相对或绝对路径。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:30:41.680

如果您将项目设置为一个包，则无需担心路径，在这种情况下，它应该像在`__init__.py`每个文件夹中放置一个空文件一样简单：

```
/src
    __init__.py
    main.py
    foo/
        __init__.py
        foo.py
        /bar
        __init__.py
        bar.py
    util/
        __init__.py
        utilities.py 
```

现在 ,`main.py`和`foo.py`可以通过一个简单的`bar.py`方式导入你的`utilities`模块：

```
from util import utilities 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T00:00:44.697

我使用此处提供的示例进行了此操作：

```
cmd_subfolder = os.path.realpath(os.path.abspath(os.path.join(os.path.split(inspect.getfile( inspect.currentframe() ))[0],"../../utils/"))) 
```

# jqgrid - jqGrid：显示在maingrid json中获得的列的子网格行

> ID：12377663
> 
> 赞同：0
> 
> 时间：2012-09-11T20:47:07.453
> 
> 标签：jqgrid, subgrid

我可以有一个子网格来显示主网格中的一些列，而无需实际使用 URL 再次获取数据吗？示例：主网格正在使用 jsonReader 从服务器（10 列）获取数据，我想在其中显示父行中的 7 列和子网格行中的 3 列。我可以这样做吗？（或者其他方式来实现这个扩展概念？）

（我尝试了下面的“subGridRowExpanded”功能，但它似乎没有工作......）

错误：jQuery("#grid").getRowData 不是函数

```
-------------------------------------
var myGrid =  jQuery("#grid").jqGrid({

...
subGrid: true,

subGridRowExpanded: function (subgridDivId, rowId) {
            var subgridTableId = subgridDivId + "_t";
            var rowData = $("#grid").getRowData(rowId);
            var requestorFullName = rowData['requestorFullName'];
             var html ="<table id='" + subgridTableId + "'> <tr><td>'" +requestorFullName+"'</td></tr> </table>";
             $("#" + subgridDivId).append(html);

}

});

------------------------------------- 
```

# ios - 从另一台设备上后台运行的应用程序请求数据

> ID：12377665
> 
> 赞同：0
> 
> 时间：2012-09-11T20:47:15.210
> 
> 标签：ios, networking, background

我正在开发一个需要能够从另一台设备检索少量数据的应用程序。我确信当应用程序在两台设备上都处于前台时这不是问题，但是当它在一台设备上处于后台时我该怎么办？这基本上与 Apple 的“查找我的朋友”相同，但我必须解决 Apple 对后台处理的限制（他们显然不必这样做）......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:07:33.477

这里有几个答案：

1) 如果您打算将您的应用程序提交到 AppStore

在这种情况下，你不能这样做。苹果对可以在后台执行的操作有非常严格的规定。只有三种类型的应用程序可以做任何事情：音频播放器、VOIP 应用程序、基于位置的应用程序。在这种情况下，如果您的应用程序不属于此类别之一，他们将不会批准在后台执行某些操作（例如共享数据）的应用程序

2）如果您不打算将您的应用程序提交到 AppStore（例如开发企业应用程序或您自己需要的应用程序）

在这种情况下，您可以滥用位置管理器和过期处理程序来使您的应用程序在后台运行。

以下是与此滥用案例相关的几个问题：

[iPhone - 背景调查事件](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events)

[setKeepAliveTimeout 和 BackgroundTasks](https://stackoverflow.com/questions/4777499/setkeepalivetimeout-and-backgroundtasks)

[http://www.slideshare.net/tranq72/ios4-multitasking-development-notes](http://www.slideshare.net/tranq72/ios4-multitasking-development-notes)

# xsd - WSDL 错误：XSD：该位置尚未解析

> ID：12377668
> 
> 赞同：1
> 
> 时间：2012-09-11T20:47:32.200
> 
> 标签：xsd, wsdl, eclipse-indigo, eclipse-juno

我刚刚从 Eclipse Indigo (3.7) 升级到 Eclipse Juno (4.2)，并且在 Indigo 中验证了我的 WSDL 没有任何问题，我现在收到一个奇怪的警告和我不理解的错误。

WSDL 片段：

```
<wsdl:types>
    <xsd:schema 
        targetNamespace="http://www.domain.com/ClientServices/LendingSimulation/V1"
        xmlns:cpReq="http://www.domain.com/ClientServices/LendingSimulation/CalculateProfitabilityRequest" 
        xmlns:cpRes="http://www.domain.com/ClientServices/LendingSimulation/CalculateProfitabilityResponse" 
        xmlns:error="http://www.domain.com/fw/errorMgmt">

        <xsd:import namespace="http://www.domain.com/ClientServices/LendingSimulation/CalculateProfitabilityRequest" schemaLocation="CalculateProfitabilityRequest.xsd" />

        <xsd:element name="calculateProfitabilityRequest" type="cpReq:CalculateProfitabilityRequestType" />

    </xsd:schema>
</wsdl:types> 
```

Juno 用以下警告标记 xsd:import 行：

```
XSD: The location 'CalculateProfitabilityRequest.xsd' has not been resolved 
```

然后它用以下错误标记 xsd:element 行：

```
XSD: Type reference 'http://www.domain.com/ClientServices/LendingSimulation/CalculateProfitabilityRequest#CalculateProfitabilityRequestType' is unresolved 
```

我很困惑。我不仅不明白警告或错误消息的含义，我不明白为什么 Juno 将其标记为问题，但在 Indigo 中没有任何问题。如果我 ctrl-单击 schemaLocation，Eclipse 会打开相关的 xsd 文件，因此 Eclipse 找不到该文件不是问题。

我试过清理项目，但没有任何区别。

**编辑**

我硬着头皮决定重新安装 Indigo Java EE (3.7)。但是，现在当我加载我的项目时，我得到了与 Juno 相同的错误！所以看起来它不是 Juno 本身，而是我的配置中不正确的东西。但是，我不知道在哪里可以找到问题，也不知道为什么 Eclipse 抱怨该位置未解决。就好像我必须以某种方式在 Eclipse 中预加载文件，但我不知道如何。

如果我删除该项目，并将该项目重新加载为现有的 Maven 项目，那么所有警告和错误消息都会消失。但是，该项目随后变得与我的 SCM 无关。如果我通过 SCM 加载它，则会再次出现此错误。我猜项目配置肯定有什么问题，但是方面是相同的，所以我不知道哪个配置不同。有什么要说的吗？

任何想法或建议表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T18:54:15.413

好的 - 经过无数小时的不同测试和试验，我终于找到了罪魁祸首。它不是我之前发布的 RTC 或 Maven，而是使用的 WSDL 验证器。在安装 WebSphere 工具的过程中（我想！），我似乎已经安装了 IBM WSDL Validator（在 Preferences->Validation->WSDL Validator -> implementation 下拉菜单中）。我将实现重置为基于 WSDL4J 的 WSDL Validator，一切正常并按预期工作。

希望这将能够在未来帮助其他人。

# entity-framework - 如何更新 EF 中的导航属性/相关表？

> ID：12377670
> 
> 赞同：5
> 
> 时间：2012-09-11T20:47:37.503
> 
> 标签：entity-framework, entity-framework-4, sql-update, scalar-context

我有一个`Customer`带有导航属性的对象`Days`（天是一个单独的表，它有 - day_id，customer_id - FK）。

```
mycontext.Customers.ApplyCurrentValues(cust);
mycontext.SaveChanges(); 
```

这仅更新了客户的标量属性，而不是天数。有什么聪明的方法可以更新 Days 吗？（无需在几天内手动迭代..）？如果没有 - 是否有更新第二张表（天）的最佳做法？如果可能，请编写应使用的显式代码。

ps 我目前正在使用 EF 4.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-24T04:27:52.377

[`GraphDiff`](https://www.nuget.org/packages/RefactorThis.GraphDiff/)如果您想要一种简单易用的方法来处理断开连接的对象，您可以使用库。

```
mycontext.UpdateGraph(cust, map => map.OwnedCollection(x => x.Days));
mycontext.SaveChanges(); 
```

这将插入或更新客户对象并更新`Days`集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:28:33.080

不，如果不对相关实体进行手动迭代，您就无法做到这一点。看看这个问题和答案可能会有所帮助。[MVC 实体框架修改子实体](https://stackoverflow.com/questions/12081683/mvc-entity-framework-modifying-child-entities/12085011#12085011)

# flash - 将大部分代码放在动作脚本 2 中的一个关键帧下是一种好习惯吗？

> ID：12377674
> 
> 赞同：1
> 
> 时间：2012-09-11T20:47:50.107
> 
> 标签：flash, actionscript, actionscript-2

我只是想知道，因为在我的项目中，我的大部分代码都在一个关键帧中（尽管包含在各种电影剪辑中）。以任何其他方式执行此操作似乎违反直觉，但仍然感觉不够有条理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:31:55.000

这对于小型项目来说很好，但是一旦你进入更大的项目，你会发现越来越多的错误潜入你的代码。

如果您想进行可靠的闪存开发，您真的很想研究面向对象的编程。

你曾经使用过类或做过任何类型的 OOP 吗？这是一个有点过于开放的问题，但我建议做一些研究。

这是一个关于 AS2 的不错的教程： [http ://www.kirupa.com/developer/oop2/AS2OOPindex.htm](http://www.kirupa.com/developer/oop2/AS2OOPindex.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:20:56.597

这就是我喜欢这样做的方式，所以我只有通过一帧脚本进行梳理。它还渲染所有脚本以确保您的 AS 在所需的电影剪辑上台之前正在运行。

将我的 AS 堆叠到一个框架中没有任何问题。但这只是我。

那里可能有一个更实际的答案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:30:17.953

首先，如果可以的话，我建议您尝试迁移到 AS3。AS3 比 AS2 更稳固，可以让您以更干净、更高效的方式组织代码。

话虽如此，尽管我更喜欢将代码分成 AS2 中的类，但[Adob​​e Best Practices for AS2](http://www.adobe.com/devnet/flash/articles/as_bestpractices.html)指出：

**将 ActionScript 代码保存在一处**

> 尽可能将 ActionScript 2.0 代码放在一个位置，例如一个或多个外部 ActionScript 文件或时间轴的第 1 帧（放置在时间轴上时，代码称为帧脚本）。

**将代码附加到对象**

> 您必须避免将 ActionScript 代码附加到 FLA 文件中的对象（例如按钮或影片剪辑实例），即使在简单或原型应用程序中也是如此。

您可以在该文档中找到 AS2 的详细原因和更多编码实践。

# objective-c - 子类 mac OS colorpickers 添加按钮

> ID：12377679
> 
> 赞同：1
> 
> 时间：2012-09-11T20:47:55.040
> 
> 标签：objective-c, macos, cocoa, color-picker

我有一个颜色，当点击它时会弹出 Mac OS X `NSColorPanel`。我启用了所有默认颜色选择器。但是，我需要每种颜色选择器的三种口味。两个已由 show Alpha 提供，并且不显示 Alpha 选项。我需要第三个，我希望只添加一个切换按钮，它代表 0 alpha 和完整 (1) alpha。

不过，从我所看到的情况来看，您必须创建一个全新的 nib 文件。有没有办法使用默认的颜色选择器作为模板？然后我可以子类化他们的实现来查看这个切换按钮？

我正在查看[http://filibeto.org/unix/macos/lib/dev/documentation/Cocoa/Conceptual/DrawColor/DrawColor.pdf](http://filibeto.org/unix/macos/lib/dev/documentation/Cocoa/Conceptual/DrawColor/DrawColor.pdf)以获取有关子类化`NSColorPicker`s 和使用 Apple 的 MyColorPicker.xcodeproj 示例的信息试图弄清楚这个出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:50:00.287

使用 NSColorPicker 的[accessoryView](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorPanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSColorPanel/setAccessoryView%3a)添加额外的控件。

# mysql - MySQL - 从另一个表 COUNT 中选择 2 个

> ID：12377681
> 
> 赞同：0
> 
> 时间：2012-09-11T20:48:05.330
> 
> 标签：mysql, join

我有 3 个表：`Users`、`Friends`和。`Movies``User_Movies`

`Users`并且`Movies`只是用户和电影的列表。

`Friends`只有 2 列：*`#fan_id`，`#idol_id`*并且只是说“用户 1 跟随用户 2”。

`User_Movies`有 2 列：*`#user_id`，`#movie_id`*并且有说“用户有电影”。

好的。现在我想选择每个用户，他的朋友和他的电影。我已经开始获取朋友的数量，但我也不知道如何获取电影的数量。任何人都可以帮忙吗？

```
SELECT u.`id`, u.`username`, COUNT(*) AS n_relation
FROM `users` u
JOIN `friends` f ON f.`idol_id` = u.`id`
OR f.`fan_id` = u.`id`
WHERE `username` = ?
GROUP BY u.`id`;` 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:53:12.037

```
select
  u.*,
  (select count(*) from friends f where f.idol_id = u.id) as fancount,
  (select count(*) from user_movies m where m.user_id = u.id) as moviecount
from
  users u
where 
  u.username = 'j.doe' 
```

或者，这*可能*会更快（但您应该测试您的数据库中是否是这种情况）：

```
select
  u.*,
  uf.fancount,
  um.moviecount
from
  users u
  left join 
    (select 
      f.idol_id, count(*) as fancount 
    from friends f) uf on uf.idol_id = u.id
  left join
    (select 
      m.user_id, count(*) as moviecount 
    from user_movies m) um on um.user_id = u.id
where 
  u.username = 'j.doe' 
```

第三种选择，看起来像您的尝试和 desimusxvii 的尝试，只有它使用`distinct`“修复”计数问题，当您有多个朋友时，电影会被多次计数，反之亦然。不过，我建议不要使用此选项，因为查询的可读性和可维护性较差。`group by`它在不需要的时候滥用。

```
select
  u.username,
  count(distinct f.fan_id) as fancount,
  count(distinct m.movie_id) as moviecount
from
  users u
  left join friends f on f.idol_id = u.user_id
  left join user_movies m on m.user_id = u.user_id
where 
  u.username = 'j.doe'
group by 
  u.username 
```

# backbone.js - 主干表单不提交多个输入字段

> ID：12377682
> 
> 赞同：2
> 
> 时间：2012-09-11T20:48:13.157
> 
> 标签：backbone.js

使用 Backbone.js，我的表单如下：

```
<form id="searchBar">
    <input type="search" name="search" id="searchBox" value=""/>
    <input type="text" name="location" id="location" value="City, ST"/>
</form> 
```

并且，按如下方式处理所述表格：

```
window.FindPlaceView = Backbone.View.extend({

    /*code here*/

    events: {
      "submit form#searchBar" : "processClick"
    },

    processClick: function(e) {
       e.preventDefault();
       console.log("Submitted");
       /*form processing code here*/
    }
}); 
```

如果我删除表单中的第二个输入字段，表单将在输入时提交就好了。一旦我将第二个输入添加回表单，就没有骰子了。绑定似乎在这一点上丢失了。

有什么理由让表单中有两个字段会在提交事件绑定上引发循环？这似乎是一个愚蠢的问题，我正在用头撞墙。

我尝试将输入设置为不同的类型，从中剥离所有属性，一切。即使我`<input></input>`在这里放一个空的，它也会坏掉。

（我应该注意，我这里没有提交按钮，只是想在输入时提交）

想法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T20:59:19.287

您的问题与backbone.js 无关，而是与浏览器的工作方式有关：

从 Jquery 提交方法[文档](http://api.jquery.com/submit/)：

> **根据浏览器的不同，如果表单只有一个文本字段**，或者只有当存在提交按钮时，Enter 键可能只会导致表单提交。界面不应依赖此键的特定行为，除非问题是通过观察按下 Enter 键的 keypress 事件来强制执行的。

当然有这样的问题：

*   [如果有多个未命名的输入，为什么不提交表单？](https://stackoverflow.com/questions/8462204/why-are-forms-not-submitted-if-there-is-more-than-one-unnamed-input)

在这里您可以找到一些解决方法，如何在没有提交按钮的情况下在 Enter 上提交表单：

*   [通过不带提交按钮按 Enter 提交表单](https://stackoverflow.com/questions/477691/submitting-a-form-by-pressing-enter-without-a-submit-button)

# android - AudioFlinger 无法创建轨道，状态：-22

> ID：12377685
> 
> 赞同：5
> 
> 时间：2012-09-11T20:48:44.610
> 
> 标签：android, audio, playback

我正在尝试使用 SoundPool 类播放 mp3 文件：

* * *

[SoundPool 文档](https://developer.android.com/reference/android/media/SoundPool.html)

* * *

但是，我遇到了上述错误。mp3 在我的机器上播放良好 - Win7 64bit。逐字显示错误消息：

09-11 20:27:55.256：E/AudioTrack(671)：AudioFlinger 无法创建轨道，状态：-22

**编辑**

执行所述功能的所有代码：

```
private SoundPool soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 100);;
private HashMap<Integer, Integer> soundsMap = new HashMap<Integer, Integer>();
private int CLICK_SOUND = 1;

int sp = soundPool.load(this, R.raw.click, 1);
soundsMap.clear();
soundsMap.put(CLICK_SOUND, sp);

AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);          
float volume = streamVolumeCurrent / streamVolumeMax;           
soundPool.play(soundsMap.get(sound), volume, volume, 1, 0, fSpeed); 
```

# asp.net - asp.net中的静态下拉项

> ID：12377686
> 
> 赞同：1
> 
> 时间：2012-09-11T20:49:00.490
> 
> 标签：asp.net

我搜索了很多，但没有什么真正帮助我。我是初学者，请承担任何无知

我的 aspx 页面中有一个下拉列表。下拉列表的来源来自我的代码隐藏文件中的 sqlsource。我想在下拉列表顶部添加一个静态项目，我可以用下面的行添加它

```
reportparameter.Items.Insert(0, "-------SELECT----------"); 
```

如何使用后面代码中的第一个值在此下拉列表中设置必填字段验证器。我尝试了不同的方法，每次提交页面时都会出现转换错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:52:06.907

我认为那`reportparameter`是`DropDownList`.

您可以使用该[`AppendDataBoundItems`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)属性告诉 ASP.NET DataSource 应附加到“静态”项。

您可以使用`RequiredFieldValidator`'[`InitalValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.initialvalue.aspx)属性告诉它这算作*未选择*。在您的情况下，您需要将其设置为 0。

```
<asp:DropDownList id="reportparameter"
                AppendDataBoundItems="True"
                runat="server">
              <asp:ListItem Selected="True" Value="0">-------SELECT----------</asp:ListItem>
           </asp:DropDownList>
<asp:RequiredFieldValidator id="RequiredFieldValidator1" 
       InitialValue="0" 
       ControlToValidate="reportparameter"
       ErrorMessage="Required field!"
       runat="server"/> 
```

# php - 在数据库中存储图像参考的最佳实践

> ID：12377687
> 
> 赞同：1
> 
> 时间：2012-09-11T20:49:08.207
> 
> 标签：php, database, image

我正在设计一个页面，其中每个上传的图像都包含不同的图像大小。

```
For example an image can be:
original: whatever a user uploads
large: 718x405
medium: 344x194
small: 125x70
square: 238x238 
```

过去，在 mysql 中，我只有名为 image_id、image_name 的字段，然后在代码中我会引用这些图像的位置：

```
Example from my past:
/images/gallery/large/some_image.jpg
/images/gallery/square/some_image.jpg 
```

我见过其他系统做这样的事情：

```
/images/gallery/some_image-718x405.jpg
/images/gallery/some_image-238x238.jpg 
```

除了将图像放在自己的表中的基本思想之外，还有哪些为图像创建数据库的最佳实践。当您处理同一图像的多种尺寸时，我会问更多。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:14:58.703

我会将图像保存为平面文件，并在数据库中仅保留 image_id 和 image_name。

```
/images/<image_id>/original
/images/<image_id>/<width>_<height> 
```

并使用您喜欢的任何 URL“格式”使用 mod_rewrite 和 PHP 提供这些文件。如果您需要性能，则使用某种缓存（文件、内存缓存）将 image_name 与 image_id 匹配以避免不必要的数据库连接是很好的选择。

如果您有使用相同脚本的 PHP 会话，请记住在提供图像之前执行 session_write_close，否则所有其他图像将在加载一个图像时等待。

删除图像后，您将只有一个目录需要清除和删除。

# php - 按下注册按钮时页面刷新

> ID：12377690
> 
> 赞同：0
> 
> 时间：2012-09-11T20:49:19.497
> 
> 标签：php

我正在创建一个注册页面，我刚刚将它上传到我的服务器，当我按下注册按钮时，页面刷新并且什么都不做。

这是我的PHP代码：

```
<?php

$error = "";
$firstname = "";
$lastname = "";
$email = "";
$password = "";
$confirmpassword = "";
$day = "";
$month = "";
$year = "";
$gender = "";

if (isset ($_POST['firstname'])){

 $firstname = $_POST['firstname'];
 $lastname = $_POST['lastname'];
 $email = $_POST['email'];
 $password = $_POST['password'];
 $confirmpassword = $_POST['confirmpassword'];
 $day = $_POST['day'];
 $month = $_POST['month'];
 $year = $_POST['year'];
 $gender = $_POST['gender'];

 $firstname = stripslashes($firstname);
 $lastname = stripslashes($lastname);
 $email = stripslashes($email);
 $password = stripslashes($password);
 $confirmpassword = stripslashes($confirmpassword);
 $day = stripslashes($day);
 $month = stripslashes($month);
 $year = stripslashes($year); 
 $gender = stripslashes($gender); 

 $firstname = strip_tags($firstname);
 $lastname = strip_tags($lastname);
 $email = strip_tags($email);
 $password = strip_tags($password);
 $confirmpassword = strip_tags($confirmpassword);
 $day = strip_tags($day);
 $month = strip_tags($month);
 $year = strip_tags($year);
 $gender = strip_tags($gender);

 include_once "includes/mysql_connection.php";
 $emailChecker = mysql_real_escape_string($email);
 $sql_email_check = mysql_query("SELECT email FROM users WHERE email='$emailChecker'");
 $email_check = mysql_num_rows($sql_email_check); 

 if ((!$firstname) || (!$lastname) || (!$email) || (!$password) || (!$confirmpassword) || (!$day) || (!$month) || (!$year) || (!$gender)) { 

 $error = 'You missed out the following information:<br/>';

 if(!$firstname){ 
   $error .= 'Firstname<br/>';
 } 
 if(!$lastname){ 
   $error .= 'Lastname<br/>';
 } 
 if(!$email){ 
   $error .= 'Email<br/>';
 }  
 if(!$password){ 
   $error .= 'Password<br/>';      
 }
 if(!$confirmpassword){ 
   $error .= 'Confirm Password<br/>';        
 } 
 if(!$day){ 
   $error .= 'Day<br/>';        
 }      
 if(!$month){ 
   $error .= 'Month<br/>';      
 }
 if(!$year){ 
   $error .= 'Year<br/>';        
 }  
 if(!$gender){ 
   $error .= 'Gender<br/>';      
 }  

 } else if ($password != $confirm) {
          $error = 'Your password\'s do not match.';         
 } else if ($email_check > 0){ 
          $error = "The email address you supplied is already in use."; 

 } else { 
 $firstname = mysql_real_escape_string($firstname);
 $lastname = mysql_real_escape_string($lastname);
 $email = mysql_real_escape_string($email);
 $password = mysql_real_escape_string($password);
 $day = mysql_real_escape_string($day);
 $month = mysql_real_escape_string($month);
 $year = mysql_real_escape_string($year);
 $gender = mysql_real_escape_string($gender);

 $db_password = md5($password); 

 $sql = mysql_query("INSERT INTO users (firstname, lastname, email, password, day, month, year, gender) 
 VALUES('$firstname','$lastname','$email','$db_password','$day','$month','$year','$gender')")  
 or die (mysql_error());

 $id = mysql_insert_id();

 mkdir("members/$id", 0777);    

$to = "$email";

$from = "donotreply@website.com";
$subject = "Activate your  account";

$message = "

";

$headers  = "From: $from\r\n";
$headers .= "Content-type: text\r\n";

mail($to, $subject, $message, $headers);

$confirmationmessage = "<h2>Welcome to our website</h2><br />
   You've been sent an email to $email - this email will contain an activation link!
   <br />
   ";

   include_once 'includes/message.php'; 

   exit();

   }

} else {

  $error = "";
  $firstname = "";
  $lastname = "";
  $email = "";
  $password = "";
  $confirmpassword = "";
  $day = "";
  $month = "";
  $year = "";
  $gender = "";

}

?> 
```

我不明白这是怎么回事询问您是否需要我的 HTML

# c#-4.0 - 如何打开扩展名为 .DAT 的 .DBF 文件

> ID：12377693
> 
> 赞同：2
> 
> 时间：2012-09-11T20:49:20.620
> 
> 标签：c#-4.0, odbc, dbase

我需要在 C# 中打开一个 dbase III 文件。症结在于该文件的扩展名为 .dat 而不是 .dbf。我已经尝试过 OleDB 和 Odbc 并且都要求文件具有 .dbf 扩展名。

重命名文件不是一种选择。这些来自客户作为 GIS TAB 文件集的一部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:23:37.127

我知道 OleDB 连接可以指向数据所在的“路径”......但是，我认为您可以明确限定文件名以包含 .dat，例如

```
select * from YourTable.DAT where SomeCondition; 
```

您的典型查询是

```
select * from YourTable where SomeCondition; 
```

并且 OleDB 提供程序将暗示一个“.dbf”扩展名。但是，由于您明确符合 .DAT 的条件，它应该会为您找到它。此外，通过 OleDB，您实际上可以从公共根目录的子文件夹中查询（仅供参考）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:32:53.773

如果文件驻留在可写 NTFS 卷上，您可以建立到该文件的硬链接：[Fsutil: hardlink](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/fsutil_hardlink.mspx?mfr=true)

# ruby-on-rails - Google Apps Marketplace 应用程序的 OpenID 单点登录：openid_identifier 参数

> ID：12377694
> 
> 赞同：2
> 
> 时间：2012-09-11T20:49:23.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, openid, single-sign-on, google-apps-marketplace

我为 Google Apps Marketplace 创建了一个应用程序，需要将单点登录与 OpenID 集成。安装App后，我们App的链接是：

[https://www.my_app.com/users/auth/google?from=google&domain=my_app.com](https://www.my_app.com/users/auth/google?from=google&domain=my_app.com)

要使用这个[ruby](https://github.com/openid/ruby-openid/blob/master/examples/rails_openid/app/controllers/consumer_controller.rb) ​​-openid 库，我需要一个 openid_identifier 参数

```
identifier = params[:openid_identifier] 
```

但是，在从 Google Apps 重定向后，我似乎无法找到如何获得这个 openid_identifier。我在这里错过了什么吗？

# android - 使用 Android 从服务器流式传输 Base64 字符串

> ID：12377695
> 
> 赞同：1
> 
> 时间：2012-09-11T20:49:24.257
> 
> 标签：android, streaming, base64

我必须从服务器获取 zip 文件到 Android 手机，编码为 Base64。因为文件很大（〜20MB），我使用下面的代码通过bufferSize = 1024 * 1024获取字符串，对其进行编码并将其写入文件。我通过方法 android.util.Base64.encode() 得到 bad-base64 错误。为什么？

编码：

```
int bufferSize = 1024 * 1024;
byte[] buffer = new byte[bufferSize];
FileOutputStream fileOutputStream = null;
InputStream inputStream = null;
try {
    fileOutputStream = new FileOutputStream(this.path + "/" + this.zipFileName);
    inputStream = connection.getInputStream();
    int bytesRead;
    //read bytes
    while ((bytesRead = inputStream.read(buffer, 0, bufferSize)) > 0) {
        byte[] zipBytes = Base64.decode(buffer, 0, bytesRead, Base64.DEFAULT);
        fileOutputStream.write(zipBytes);
    }
} catch (Exception e) {
e.printStackTrace();
} finally {
    if (fileOutputStream != null) {
        try {
        fileOutputStream.close();
        } catch (Exception e) {
        e.printStackTrace();
        }
    }
    if (inputStream != null) {
        try {
        inputStream.close();
            } catch (Exception e) {
        e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:02:16.100

首先，为什么是Base64？通常要做的事情是只发送压缩文件，然后让客户端解压缩它——这将节省带宽，因为 Base64 被限制为每个字符 6 位。如果您可以更改服务器代码，最好按原样提供 zip 文件。

无论如何，即使您按块获取文件，您也无法单独解码这些块 - 您必须将所有 1024*1024 字节块放在一起，然后解码很多。此操作需要 20MB 缓冲区。Base64 在每个块的末尾添加了一些终止符。维基[百科文章](http://es.wikipedia.org/wiki/Base64)有一个很好的解释。

另一种选择是将块大小设为三的倍数；在这种情况下，我认为 Base64 结果可以分成块并且与输入相同。值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:56:44.750

我建议在 Base64.decode() 上设置断点并检查缓冲区中的内容。您很可能会看到导致解码错误的意外情况（来自您的服务器应用程序的一些错误或类似的东西）。

# sqlite - 带有 Windows 8 Metro 应用程序的 SQlite

> ID：12377696
> 
> 赞同：2
> 
> 时间：2012-09-11T20:49:28.830
> 
> 标签：sqlite, microsoft-metro

我正在尝试在 Metro 应用程序中使用已创建的数据库（sqlite 文件）。我正在使用 C# 和 Sqlite-net。我有用于 WinRT 的 SQlite。

尝试了无法编译的 Tim Heuer 方法。await 运算符只能在异步方法中使用。考虑使用“异步”修饰符标记此方法并将其返回类型更改为“任务”。同样的第二次我再次使用等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:51:37.930

您可能会发现我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

在您的特定情况下，我建议您按照错误消息中的说明进行操作：标记方法`async`并将返回类型更改为`Task`or `Task<T>`（除非它是事件处理程序）。

# ios - MKStoreKit 和应用内购买的问题

> ID：12377703
> 
> 赞同：2
> 
> 时间：2012-09-11T20:49:56.730
> 
> 标签：ios, in-app, mkstorekit

我正在使用 MKStoreKit 框架开发一个应用程序内购买的应用程序。

一切都很好，除了我收到这条消息：

```
Review request cannot be checked now: (null) 
```

我已经检查并遵循了几项准则，并更正了配置文件的错误。但现在我得到了这个新错误。

在 iTunes Connect 中，应用程序已创建，每次购买也已创建，但状态正在等待审核。

这种状态会导致错误吗？如果这是问题，我该如何更改购买状态？每个字段都已填写，我在此 Apple 帐户下发布了一个应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:19:24.553

如何正确测试应用内购买：

1.  登录到 iTunes 连接
2.  单击**管理用户**（您需要管理员权限）
3.  单击**测试用户**
4.  使用虚假电子邮件地址/其他信息创建新用户
5.  在您的设备上，前往**“设置”** > “ **iTunes 和 App Store ”**
6.  退出您当前的帐户。**暂时不要登录您的测试帐户！**
7.  运行您的应用程序并继续购买您的 IAP。
8.  当它提示您登录时，请登录您创建的测试帐户。
9.  您应该会收到一条消息“您想确认... **[环境：沙盒]** ”
10.  单击是。

如果您到了这一点，您的应用内购买就成功了，并且将在沙盒之外成功处理。

如果您在沙盒中运行，您的应用状态不会影响您的应用内购买，但是，除非您在下一个版本上的状态为**Waiting for Upload** ，否则不应运行 IAP 测试。

希望这可以帮助，

大卫

资料来源：Apple MKStoreKit 文档；我在 App Store 上有**2 个获得批准的应用程序，应用程序内购买运行顺利。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T03:52:30.373

要在沙盒环境中测试购买，您需要一个测试用户帐户（您的常规 Apple ID 不会这样做）和一个提交并被开发人员拒绝的二进制文件。所以提交一个应用程序二进制文件进行审查（它不需要完整），一旦它具有“等待审查”状态就拒绝它。然后，您应该能够使用您的测试帐户测试您的 IAP。

# java - 使用 JAX-WS RI 生成客户端库和 JavaDoc

> ID：12377705
> 
> 赞同：1
> 
> 时间：2012-09-11T20:50:02.973
> 
> 标签：java, jax-ws

我正在使用 JAX-WS RI 实现一个新的 Web 服务，并试图找出构建客户端库和自动生成 API 文档的最佳方法。

假设我有一个端点实现（com.mysite.webservice.MyServiceEndpoint），如下所示：

```
 @WebService(serviceName = "MyService", endpointInterface = "com.mysite.webservice.MyService")
  public class MyServiceEndpoint implements MyService
  {
    public void myMethod(final com.mysite.webservice.spec.MyObject blah) {
      //Do Something
    }
  } 
```

和引用的接口（com.mysite.webservice.MyService）：

```
 @WebService
  public interface MyService {
    public void myMethod(final MyObject blah);
  } 
```

我目前能够通过运行`wsgen`生成 WSDL，然后使用我运行的 WSDL 文件`wsimport`来生成客户端文件，从而在我的 ant 构建期间生成一个工作客户端。这一切都很好，除了当我在生成的客户端文件上运行 JavaDoc 时，我显然没有得到任何在接口上定义的文档，或者我的规范对象被传递到方法调用中。相反，我直接从我手工编写并拥有 JavaDoc 的接口和规范对象生成文档。我遇到的问题是自动生成的对象与我定义的对象位于不同的包中。（`com.mysite.webservice instead`的`com.mysite.webservice.spec`）。

那么，两个问题...

1）有没有办法指定我的自动生成的对象将被放入哪个包中？

2) 这是构建客户端/生成文档的最佳方法，还是我忽略了可以使用 JAX-WS RI 完成的更好方法？

3) 是否可以直接从 Java SEI（服务端点实现）和相关的服务器端类而不是从 WSDL 生成客户端类。

# matlab - 在 Matlab 中使用 sprintf？

> ID：12377708
> 
> 赞同：3
> 
> 时间：2012-09-11T20:50:20.993
> 
> 标签：matlab, printf

这类似于我之前提出的关于在 Matlab 中打开 pdf 的问题。

```
file = 'sl3_knt_1_2.pdf'
location = 'C:\Program Files\Tracker Software\PDF Viewer\PDFXCview.exe %s'
str = sprintf(location,file);
system(str) 
```

这将返回警告：

```
Warning: Invalid escape sequence appears in format string. See help sprintf for valid escape sequences. 
```

我认为它有一些位置变量被读取为转义序列，因为它使用 \ 但我不确定。我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:56:48.823

试试这个：

```
file = 'sl3_knt_1_2.pdf'
location = 'C:\Program Files\Tracker Software\PDF Viewer\PDFXCview.exe'

str = sprintf('%s %s',location, file)

system(str) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:08:58.750

简单的解决方案是使用“/”而不是“\”，它适用于所有平台，包括 Windows。'\' 作为一个特殊字符是有问题的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:04:26.270

或者，您可以像这样更改您的位置字符串：

```
location = 'C:\\Program Files\\Tracker Software\\PDF Viewer\\PDFXCview.exe %s' 
```

通常`\`用于特殊字符。例如`\n`是行尾。所以当你真的想写的时候`\`，你需要使用`\`. 所以，你需要`\\`在这种情况下写

# php - 如何为循环中返回的每个项目分配一个唯一的类？

> ID：12377711
> 
> 赞同：0
> 
> 时间：2012-09-11T20:50:35.733
> 
> 标签：php, jquery, arrays, wordpress, loops

我正在尝试在 PHP 中获得一些帮助，这样我就可以为循环中返回的每个单独的项目添加一个类或 ID。我正在使用一段代码（见下文）来返回分类法（位置）。我的所有 32 个位置都完美返回并显示在我的网站上。但是，我不能通过 css 单独设置每个位置的样式，因为没有与每个位置关联的唯一类。

返回的每个块在前端看起来像这样

```
<div class="block">
<a href="http://example.com/location/new-york">
    <h2>
        <a href="http://example.com/location/new-york">
        Antrim
        <br>
        <span>(1 Farmer)</span>
        </a>
    </h2> 
```

对所有位置重复返回。正如您所看到的，没有办法实际单独设置每个样式，这正是我所需要的。

我返回位置的代码如下。我已经尝试过谷歌搜索和一些不同的方法来做到这一点，但我觉得我不合群，我想我会在这里向专家寻求帮助！

谢谢

```
<?php
global $woo_options;
$post_types_to_loop_through = array();
$posts_to_exclude = array();
$categories_panel_entries = $woo_options['woo_categories_panel_entries'];
$more_listings_setting = $woo_options['woo_more_listings_area'];
$wp_custom_post_types_args = array();
$wp_custom_post_types = get_post_types($wp_custom_post_types_args,'objects');
foreach ($wp_custom_post_types as $post_type_item) {
$cpt_test = get_option('woo_categories_panel_post_types_'.$post_type_item->name);
if ($cpt_test == 'true') {
    $cpt_nice_name = $post_type_item->labels->name;
    $cpt_has_archive = $post_type_item->has_archive;
    $post_types_to_loop_through[$post_type_item->name] = array('nice_name' => $cpt_nice_name, 'has_archive' => $cpt_has_archive);
}
}

$section_counter = 0;

foreach ($post_types_to_loop_through as $post_type_item => $post_type_item_nice_name) {
$taxonomies = array('location');
$block_counter = 0;
$args = array('orderby' => 'name', 'order' => 'ASC');
?>

<div id="location">

    <?php 
    // NEW AND IMPROVED QUERY
    $all_terms = get_terms( $taxonomies, $args );

    $block_counter = 0;
    foreach ( $all_terms as $all_term) {

        $tax_test = get_option('woo_categories_panel_taxonomies_'.$all_term->taxonomy);

        if ( ($tax_test == 'true') && ($block_counter < $categories_panel_entries) ) {

            $post_images = array();
            $posts_aray = array();

            $term_name = $all_term->name;
            $term_slug = $all_term->slug;
            $term_id = $all_term->term_id;
            $term_link = get_term_link( $all_term, $all_term->taxonomy );
            $counter_value = $all_term->count;
            ?>
            <div class="block">
                <a href="<?php echo $term_link; ?>">
                <?php
                    $block_counter++;

                    if ( $post_id > 0 ) {

                        // If a featured image is available, use it in priority over the "image" field.
                        if ( function_exists( 'has_post_thumbnail' ) && current_theme_supports( 'post-thumbnails' ) ) {

                            if ( has_post_thumbnail( $post_id ) ) {

                                $_id = 0;
                                $_id = get_post_thumbnail_id( $post_id );

                                if ( intval( $_id ) ) {

                                    $_image = array();
                                    $_image = wp_get_attachment_image_src( $_id, 'full' );

                                    // $_image should have 3 indexes: url, width and height.
                                    if ( count( $_image ) ) {

                                        $_image_url = $_image[0];

                                        woo_image('src=' . $_image_url . '&key=image&width=139&height=81&link=img');

                                    } // End IF Statement

                                } // End IF Statement

                            } else {

                                woo_image('id='.$post_id.'&key=image&width=139&height=81&link=img');

                            } // End IF Statement

                        } else {

                            woo_image('id='.$post_id.'&key=image&width=139&height=81&link=img');

                        } // End IF Statement

                    } else {
                        // Fallback
                        woo_taxonomy_image($post_images,$term_link);

                    } // End IF Statement
                    $php_formatting = "m\/d\/Y";
                    $post_item_date = strtotime($post_date_raw);
                ?>
                    </a>
                <h2><a href="<?php echo $term_link; ?>"><?php echo $term_name ?> <br/><span>(<?php echo $counter_value; ?> Farmers)</span></a></h2>
                <p><?php _e('Latest listing ', 'woothemes') ?><?php echo date($php_formatting,$post_item_date); ?></p>
            </div><!-- /.block -->
            <?php
            if ( $block_counter % 5 == 0 ) {
            ?>
                <div class="fix"></div>
            <?php
            } // End IF Statement   

        } // End IF Statement

        ?>
        <?php

    } // End For Loop

    ?>

    <div class="fix"></div>

    <?php if ( $block_counter > 0 ) { ?>

    <?php } else { ?>    
    <p class="woo-sc-box note" style="margin:20px 20px;"><?php _e('Please add some posts in order for this panel to work correctly. You must assign the post to these taxonomies for it to work.','woothemes'); ?></p>
    <?php } ?>

</div><!-- /.listings -->

<div class="fix"></div> 
```

**更新** 感谢一些帮助，我已经实现了这段代码，但仍然无法让它工作！

我将它添加到第 8 行的全局变量中 `$i = 0; // initialise incrementing variable`

然后我在 div 之前添加了这个，你可以看到我试图回显的额外类

```
// I added this line as suggested just before my div
<?php foreach ( $all_terms as $all_term) { ?>

// I then added a new class but I was not sure how to write this
<div class="block" class="<?php echo "post-" . $i; ?>"> 
```

就在结束 div 标记之前（大约 100 行之后），我添加了结束代码

```
 $i++; // increment it
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:51:11.070

正如@sushanth reddy 所说，它应该真的很简单

```
$i = 0; // initialise incrementing variable
foreach ( $all_terms as $all_term) {
    // rest of your code; use $i when you want your incrementing ID / class

    $i++; // increment it
} 
```

# php - PHP try-catch 不起作用

> ID：12377712
> 
> 赞同：32
> 
> 时间：2012-09-11T20:50:45.273
> 
> 标签：php, exception, try-catch

```
try     
{
    $matrix = Query::take("SELECT moo"); //this makes 0 sense

    while($row = mysqli_fetch_array($matrix, MYSQL_BOTH)) //and thus this line should be an error
    {

    }

    return 'something';
}
catch(Exception $e)
{
    return 'nothing';   
} 
```

但是，它不仅会捕获部分并返回，还会在以 .开头的行中`nothing`显示警告。我从来没有想过在 php 中使用异常，但在 C# 中经常使用它们，而且在 PHP 中它们的工作方式似乎不同，或者像往常一样，我遗漏了一些明显的东西。`Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, null given``while`

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-11T20:54:03.267

您不能使用 try-catch 块处理警告/错误，因为它们不是异常。如果你想处理警告/错误，你必须注册你自己的错误处理程序[`set_error_handler`](http://php.net/manual/en/function.set-error-handler.php)。

但最好解决这个问题，因为你可以防止它。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-01-11T07:49:12.373

异常只是 Throwable 的子类。要捕获错误，您可以尝试执行以下操作之一：

```
try {

    catch (\Exception $e) {
       //do something when exception is thrown
}
catch (\Error $e) {
  //do something when error is thrown
} 
```

或更具包容性的解决方案

```
try {

catch (\Exception $e) {
   //do something when exception is thrown
}
catch (\Throwable $e) {
  //do something when Throwable is thrown
} 
```

顺便说一句：Java 有类似的行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T20:53:26.497

在 PHP 中，警告也不例外。通常，最佳实践是使用防御性编码来确保结果符合您的预期。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-11T20:55:08.370

Welp，不幸的是，这是关于 PHP 的问题。Try/catch 语句将捕获异常，但您收到的是老式 PHP 错误。

您必须通过以下方式捕获这样的错误：http: [//php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

要么在执行 mysqli_fetch_array 之前检查 $matrix 是否是 mysqli_result 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T20:59:58.383

PHP 正在生成警告，而不是异常。无法捕获警告。它们更像是 C# 中的编译器警告。

# android - 无法连接到 OpenCV 管理器

> ID：12377716
> 
> 赞同：3
> 
> 时间：2012-09-11T20:51:04.033
> 
> 标签：android, opencv

所以我有一个独立运行的应用程序，我尝试添加 OpenCV 支持。我正在使用异步初始化方法。基本上从下面的教程中复制了代码

**如何在您的应用程序中使用 OpenCV 库项目**

[http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)

无论如何，当我运行我的应用程序时，日志会显示

```
"Trying to load OpenCV library"
"Cannot connect to OpenCV Manager" 
```

我什至在 switch 语句之前放了一条日志语句，它永远不会出现，这意味着它永远不会到达那里。所以我有点失落

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:25:15.940

请在您的设备/模拟器上安装 OpenCV 管理器（您可以在 Google Play 上找到它）

# solr - 仅返回匹配的多值字段

> ID：12377718
> 
> 赞同：4
> 
> 时间：2012-09-11T20:51:17.550
> 
> 标签：solr

假设具有 name 的多值、存储和索引字段`comment`。执行搜索时，我只想返回 `comment`包含匹配项的值。例如：

当搜索“gold”而不是得到这个结果时：

```
<doc>
    <arr name="comment">
        <str>Theres a lady whos sure</str>
        <str>all that glitters is gold</str>
        <str>and shes buying a stairway to heaven</str>
    </arr>
</doc> 
```

我希望得到这个结果：

```
<doc>
    <arr name="comment">
        <str>all that glitters is gold</str>
    </arr>
</doc> 
```

（内存中的伪XML，可能不准确，但说明了这一点）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:05:40.243

考虑到与其他 Solr 用户的对话让我相信这是一个有用的功能，我已经提交了一个功能请求：

[Solr：仅返回匹配的多值字段](https://issues.apache.org/jira/browse/SOLR-3955)

# php - PHP CLI include() 没有找到文件

> ID：12377719
> 
> 赞同：23
> 
> 时间：2012-09-11T20:51:20.687
> 
> 标签：php

我的文件结构是这样的：

```
config.php
script
|--myscript.php 
```

我的脚本.php

```
<?php
require '../config.php';
?> 
```

执行时`php /path/to/myscript.php`我得到`Warning: require(../config.php): failed to open stream: No such file or directory.`

什么原因？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T20:53:08.790

那是因为您当前的工作目录是您调用命令的目录，而不是您的脚本所在的目录。

采用

```
require __DIR__ . '/../config.php'; 
```

反而。`__DIR__`是一个常量，指向当前文件所在的目录。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-29T07:42:56.120

我这样做的一种方法是这样的：

```
php -d include_path=/path/to/config.php script.php 
```

-d 用于在运行时设置 INI 指令，因此您没有任何更改的代码/配置/目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T18:19:04.410

如果您不想（或不能）更改`require`代码中的行，只需`cd`在运行脚本之前更改脚本期望在其中执行的目录：

```
cd /path/to
php /path/to/myscript.php 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-23T08:45:31.353

您需要使用绝对路径或更改工作目录：

`chdir(dirname(__FILE__));`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T20:53:16.690

很可能您的工作目录错误，因此您的相对路径未指向您期望的位置。要查看 PHP 如何看待它，请添加：

```
echo getcwd(); 
```

作为脚本的第一行。

# python - 如何创建具有多个不同形状字段的 numpy 结构化数组？

> ID：12377722
> 
> 赞同：6
> 
> 时间：2012-09-11T20:51:34.300
> 
> 标签：python, arrays, numpy, structure

我是使用 numpy 数组的新手，但在创建结构化数组时遇到了麻烦。我想创建类似于 Matlab 结构的东西，其中字段可以是不同形状的数组。

```
a=numpy.array([1, 2, 3, 4, 5, 6,]);
b=numpy.array([7,8,9]);
c=numpy.array([10,11,12,13,14,15,16,17,18,19,20]);

##Doesn't do what I want
data=numpy.array([a, b, c],dtype=[('a','f8'),('b','f8'),('c','f8')]); 
```

我想`data['a']`返回矩阵a，`data['b']`返回矩阵b等。在Matlab结构中读取时，数据以这种格式保存，所以我知道它必须是可能的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T20:59:52.047

恐怕不经常扭动 NumPy 的手臂是不可能的。

看，NumPy 背后的想法是提供*同构*数组，即所有具有相同类型的元素数组。这种类型可以是简单的 ( `int`, `float`...) 或更复杂的 ( `[('',int),('',float),('',"|S10")])`，但无论如何，所有元素都具有相同的类型。这允许一些非常有效的内存布局。

因此，结构化数组本质上要求字段（各个子块）无论位置如何都具有相同的大小。检查以下内容：

```
>>> np.zeros(3,dtype=[('a',(int,3)),('b',(float,5))]) 
```

它定义了一个包含三个元素的数组；每个元素由两个子块组成，`a`并且`b`；`a`是三块一排`ints`，`b`五块一排`floats`。但是一旦你在 中定义了块的初始大小`dtype`，你就会被困住（*好吧，你总是可以切换，但那是另一回事了*）。

有一个解决方法：使用`dtype=object`. 这样，您将构建一个异构项目数组，例如一个不同大小的列表数组。但是这样会失去很多 NumPy 的能力。还是举个例子：

```
>>> x=np.zeros(3, dtype=[('a',object), ('b',object)])
>>> x['a'][0] = [1,2,3,4]
>>> x['b'][-1] = "ABCDEF"
>>> print x
[([1, 2, 3, 4], 0) (0, 0) (0, 'ABCD')] 
```

所以，我们只是构造了一个...对象的数组。我在某处放了一个列表，在其他地方放了一个字符串，它可以工作。您可以按照相同的示例构建您想要的数组：

```
blob = np.array([(a,b,c)],dtype=[('a',object),('b',object),('c',object)]) 
```

但是，您真的应该三思而后行，这是否真的意味着您的目的，另一种结构可能会更有效。

旁注：请注意`[(a,b,c)]`上面表达式的部分：注意`()`？您基本上是在告诉 NumPy 构造一个包含 1 个元素的数组，该数组由三个子元素（`a,b,c`每个子元素一个）组成，每个子元素都是一个对象。如果你不放`()`，NumPy 会抱怨很多。

最后一条评论：如果你访问你的字段`blob['a']`，你会得到一个大小的数组，`(1,)`并且`dtype=object`: 只是`blob['a'].item()`用来取回你的原始`(6,)` `int`数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T21:04:42.133

在 python 中，字典大致类似于 Matlab 中的结构。您可以尝试以下方法，看看它是否适合您：

```
>>> data = {'a':a, 'b':b, 'c':c}
>>> data['a'] is a
True 
```

# ios - 在 iOS 中具有图像的多帧

> ID：12377726
> 
> 赞同：-2
> 
> 时间：2012-09-11T20:51:50.303
> 
> 标签：ios

我想创建一个具有类似于此的多帧的 iOS 应用程序 .http://multiframe.tumblr.com/page/6 有人有任何指针吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:12:44.460

这是简单的东西，我会给你一个例子，但要练习它并了解更多关于它的信息，你需要查看 UIImageView、CGRectMake 和子视图布局：

```
[self.view setBackgroundColor:[UIColor blackColor]];
UIImageView *image1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage1"]];
UIImageView *image2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage2"]];
UIImageView *image3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage3"]];

[image1 setFrame:CGRectMake(20, 20, 280, 133)];
[image2 setFrame:CGRectMake(20, 173, 280, 133)];
[image3 setFrame:CGRectMake(20, 20, 280, 326)];

[self.view addSubview:image1];
[self.view addSubview:image2];
[self.view addSubview:image3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:06:01.033

如果您注册了 iOS 开发人员计划，请查看 UICollectionView 上的 WWDC 演示文稿 - 它提供了以类似于 UITableView 的方式创建基于网格的布局的工具。

# java - Android Dialog 和 AsyncTask 导致 UI 冻结

> ID：12377730
> 
> 赞同：1
> 
> 时间：2012-09-11T20:51:59.793
> 
> 标签：java, android, multithreading, android-asynctask, android-ui

所以，在我的对话框中，我有一个按钮可以启动 Asynctask 下载器以从我的服务器获取一些文件；这很好用。但是，我想关闭当前的对话框并在单击按钮时显示 ProgressDialog。我将如何解决这个问题？

目前，如果我单击按钮（我的对话框中的一个元素），整个 UI 会在下载器从服务器下载文件时冻结。下载器完成任务后，将显示进度对话框。

我的代码看起来像这样

```
MainActivity{

    Dialog dialog;
    ProgressDialog progress;

    onCreate(){
        dialog = new Dialog(this);
        progress = new ProgressDialog(this);
        dialog.setContentView(Some View Resource With My Button);
        someMethod();
        dialog.show();
    }

    someMethod(){
        Button button = (Button) dialog.findViewById(resource of button);
        button.setOnClickListener(new OnClickListener(){

            onClick(){
                dialog.dismiss();
                progress.show();
                new DownloaderAsyncTask(progress).execute().get();
            }

                    //go to another activity when download finished

        });
    }

    private class DownloaderAsyncTask extends AsyncTask<Void, Void, Void>{

        ProgressDialog progress;

        DownloaderAsyncTask(ProgressDialog progress){
            this.progress = progress;
        }

        doInBackGround(){
            //Downloading
        }

        onPostExecute(){
            //Kill connection
            this.progress.dismiss();
        }

    }

} 
```

谢谢。如果你们需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:03:16.350

```
new DownloaderAsyncTask(progress).execute().get(); 
```

我真的不知道为什么`AsyncTask`有这个`get()`方法——它基本上把异步过程变成了同步的，因为它会阻塞并等待结果。这就是 UI 冻结的原因。

如果您想等待下载器完成然后执行其他操作，这就是`onPostExecute(...)`目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:03:34.040

您的 UI 线程被冻结，因为您调用了`get()`. 不要那样做。而是启动你的`AsyncTask`并让你的`onPostExecute()`调用方法包含你想要在下载结束时执行的代码，像这样（更多/更少）：

```
someMethod() {
        Button button = (Button) dialog.findViewById(resource of button);
        button.setOnClickListener(new OnClickListener(){

            onClick(){
                dialog.dismiss();
                progress.show();
                new DownloaderAsyncTask().execute();
            }
        });

private void downloaderFinished() {
    this.progress.dismiss();
    /// go to next activity.
}

private class DownloaderAsyncTask extends AsyncTask<Void, Void, Void>{

        doInBackGround(){
            //Downloading
        }

        onPostExecute(){
            //Kill connection
            downloaderFinished();
        }
    } 
```

这就是它的`async`代表方式，嗯，异步，所以调用`get()`会杀死所有的好处。

# javascript - getElementsByClassName 问题

> ID：12377734
> 
> 赞同：1
> 
> 时间：2012-09-11T20:52:13.753
> 
> 标签：javascript, html

我目前遇到了 getElementsByClassName 属性的问题。我有一个显示和隐藏功能，当您将鼠标悬停在产品上时会显示一个按钮[单击此处](http://iamnatesmithen.com/bodyworks/prp)我已使用 getElementById 属性启用了此功能，但是由于我想使用类复制此功能是更好的做法。下面的代码是使用 ClassName JS 函数解决此问题的正确方法吗？

我也一直在阅读 IE8 不支持 getElementsByClassName 是真的吗？有没有办法解决这个问题？

```
 <script>    
  function show(viewProductBtn){
document.getElementByClassName(viewProductBtn).style.visibility = "visible";
}

function hide(viewProductBtn) {
document.getElementByClassName(viewProductBtn).style.visibility = "hidden";
}
</script>

<!--HTML-->
<div class="product-shot-bg" onMouseOver="show('viewProductBtn')"      onMouseOut="hide('viewProductBtn')">
        <a href="#" class="viewProductBtn"></a> 
```

目前我已将我的开发站点切换回 getByID 以演示转换应该如何工作..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:55:39.727

`getElement`***`s`***`ByClassName`

“元素***s*** ”的复数形式。意思是，该函数返回一个数组（实际上是一个 NodeList），因此您需要遍历数组，或者如果您只想要第一个元素，则需要获取第一个元素。

另请参阅`document.querySelector("."+viewProductBtn)`一个元素、`document.querySelectorAll("."+viewProductBtn)`多个元素，或考虑使用 ID 和`getElementById`.

# ember.js - 我应该如何正确使用 Ember.js 嵌套路由？

> ID：12377735
> 
> 赞同：1
> 
> 时间：2012-09-11T20:52:14.913
> 
> 标签：ember.js, ember-old-router

我有这条路线部分，`/articles/`. 我想在这里创建子路由，比如`/`和`/list/`。这就是我正在尝试的方式：

```
articles: Ember.Route.extend({
    route: '/admin/articles',
    index: Ember.Route.extend({
        route: '/',
        connectOutlets: function (router, context) {
            "use strict";
            router.get('applicationController').connectOutlet('toolbar', 'articlesToolbar');
            router.get('applicationController').connectOutlet('main', 'articles');
        }
    }),
    list: Ember.Route.extend({
        route: '/list/',
        connectOutlets: function (router, context) {
            "use strict";
            router.get('applicationController').connectOutlet('toolbar', 'articlesToolbar');
            router.get('applicationController').connectOutlet('main', 'articles');
        }
    }),
    doLogout: function(router, context) {
        "use strict";
        router.transitionTo('login', context);
    }
}), 
```

我一定做错了什么，因为它没有过渡到文章路线。这是我的路由日志：

```
STATEMANAGER: Sending event 'doSidebar' to state root.
STATEMANAGER: Entering null
STATEMANAGER: Entering root
STATEMANAGER: Entering root.articles
STATEMANAGER: Sending event 'doSidebar' to state root.
STATEMANAGER: Entering null
STATEMANAGER: Entering root
STATEMANAGER: Entering root.media 
```

但是该`articles`url 没有注册到历史记录中——如果我点击返回，我会进入上一个状态，即之前的状态`articles`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T23:58:04.260

你不能路由到非叶子状态，所以你不能转换到“文章”。
添加`initialState: 'index'`到您的文章路线或更改您的代码以转换为`'articles.index'`

```
articles: Ember.Route.extend({
  route: '/admin/articles',
  initialState: 'index',
  index: Ember.Route.extend({
    // 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:30:55.290

您没有为 定义路线`/articles`。您需要更改`route: '/admin/articles'`为`route: '/articles'`.

# android - android：在pageviewer中的当前fragment-page上启动线程并在更改fragment-page时停止它

> ID：12377737
> 
> 赞同：0
> 
> 时间：2012-09-11T20:52:17.823
> 
> 标签：android

我将 pageviewer 与 FragmentPagerAdapter 一起使用，每个页面都是一个片段。在每个片段中我都有一个线程。我想在当前页面片段上运行一个线程来刷新片段的某些视图。当我更改页面时，我想停止不再是当前页面的片段页面的线程，并且我想启动新片段页面的线程。我在哪里可以在我的代码中插入“开始线程”和“停止线程”？问题是我无法在片段生命方法中插入它们，因为片段页面适配器不仅创建当前片段，还创建下一个片段（例如当当前页面为“0”时，页面“0”和页面“1”的片段的每个方法生命" 被执行 ex:onAttach,onCreateView ecc ...请帮我对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:57:44.760

您可以在活动中实现线程并在 onAtach 中启动线程并在 onDetach 片段回调中停止它。

# windows - 根据批处理文件中的第二个变量调用变量

> ID：12377743
> 
> 赞同：1
> 
> 时间：2012-09-11T20:52:51.100
> 
> 标签：windows, batch-file, cmd, dos

我试图纠正的程序的过程是获取一个包含多个单词的文本文件，并将每个单词设置为一个变量，然后从列表集中回显一个随机变量。到目前为止，我的代码如下所示：

```
@Echo Off
Set _InputFile=config.txt
//Sets the Input file
For /F "tokens=1,2* delims=:" %%A IN (%_InputFile%) DO Set _Data%%A=%%B
//Sets each Word to a vairable from _data1 to _datax
set n=(random number code)
//Set's N to be a rational random number depending on the variables available
Echo _data%%n
//This is where i get stuck, i need to be able to echo _data(whatever number n is)
pause>nul 
```

所以基本上我的主要问题是让文件根据另一个变量的值来回显一个随机变量。如果它比我正在尝试的更好/更合适，也将不胜感激。

其次（一个较小的问题）有没有办法确定 config.txt 中的单词数（或行数，因为它是同一件事），然后将该数字分配给一个变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:24:20.760

1) 使用 CALL 获得 2 个扩展阶段 - 一个在调用之前，一个在调用之后。这很慢，而且视觉上令人困惑。它也是最不可靠的，因为许多角色都有能力破坏结果。

```
call echo %%_Data%n%%% 
```

2）延迟扩展 - 更快，更容易遵循始终有效的方法。`!`但是，如果 FOR 变量包含字符，延迟扩展将破坏 FOR 变量扩展。延迟扩展必须先启用，然后才能使用。

```
setlocal enableDelayedExpansion
::Above line must be executed sometime before the following
echo !_Data%n%! 
```

2a) 如果`n`变量被设置在试图回显该值的同一个带括号的代码块中，那么`%n%`将不起作用。这个问题经常出现在 FOR 循环和 IF 语句中。它失败`%n%`是因为在解析整个块时，在设置 n 的值之前扩展。诀窍是将 的值转移`!n!`到 FOR 变量。

```
setlocal enableDelayedExpansion
for .... (
  set n = ....
  for %%N in (!n!) do echo !_Data%%N!
) 
```

* * *

这是获取 1 和 x 之间的伪随机数的便捷方法。它依赖于预定义的动态变量：RANDOM。

```
set /a n=%random% %% x + 1 
```

如果在循环中计算值，那么您可能需要延迟扩展，以便每次迭代获得不同的数字。

```
set /a n=!random! %% x + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:06:23.627

首先回答你的第二个问题，有几种方法可以快速获取文件中的行数。

使用`FIND.EXE`方法：

```
for /f %%x in ('type %FileName% ^| find /v /c ""') do set Lines=%%x 
```

使用的优点`find.exe`是可以通过任何文本文件（如 mad）找到 zipps，并且它甚至可以计算空行。

使用`for`方法：

```
for /f %%x in (%FileName%) do set /a count=count+1 
```

第二种方法的缺点是`for`循环会自动跳过空行。这种方法的优点是文件只需要访问一次。

由于我们要读入文件的每一行并对其进行操作，因此在读入时对每一行进行计数会更有效率。

* * *

在我们继续之前，我应该指出这`//`不是批处理中的注释标记，并且会导致错误。使用`REM`、 REMark 命令或一对双冒号`::`来表示注释。

注意`setlocal enabledelayedexpansion`和`endlocal`线。`SETLOCAL`使所有变量都是临时的，因此仅在脚本执行期间存在，从而无需在脚本末尾清除每个变量。`enableDelayedExpansion`启用`!`符号的使用，允许像这样访问变量：`!Variable!`. 最后`endLocal`在脚本中指定 WHERE 所有临时变量都死掉或恢复到它们的预`setlocal`值。如果您消除该行，则批处理文件结束时`endLocal`将隐含。`endlocal`

```
@Echo Off
setlocal enabledelayedexpansion
Set _InputFile=CONFIG.TXT
set count=

:: Sets each line to a vairable from _data1 to _data##
For /F "tokens=1* delims=:" %%A IN (%_InputFile%) DO (
    set /a count=!count!+1
    Set "_Data!count!=%%A"
)

:: Create a random number between 1 and %count% using the MOD function in 'set /a'
:: Equivalent to: SET /A n = aRandomNumber - ( theSameRandomNumber / %Count% ) + 1
:: See http://en.wikipedia.org/wiki/Mod_function
set /a n=%random% %% %count% +1

:: Echo # of lines, a random # from 1 to %count%, and a random line from the file:
echo.
echo =================================================
echo File is %count% lines deep
echo Random #: %n%

:: Print a random line of data
:: We are taking advantage of Delayed Expansion and ! notation:
Echo Random Line: "!_data%n%!"
echo.

:: Use SET to echo every line of data read in
echo Whole Set of _data[#] data:
set _data
echo.

endlocal 
```

要记住的一件事是，它`CMD.EXE`带来了旧的固有的一些限制`MS-DOS`。在这种情况下，有两个重要的限制：

1) 可供使用的内存量有严格的限制。2) 设置环境变量会占用会话
可用的大量内存。`CMD.EXE`

这对您意味着您将被限制为创建大约 100 个`_data`变量，因此无法将超过该点的数据保存到变量中。

在旧版本的 Windows 中，您可以为批处理文件创建一个`.PIF`文件（在命令行类型下，`copy nul BatchName.PIF`然后在 Windows 资源管理器中右键单击它并选择属性）并更改在运行时为其分配的内存量。我认为你甚至可以在 XP 下做到这一点，但我知道在 Windows 7 中你不能。虽然可以下载现有的 .PIF 文件并将其连接到您的批处理文件，但我不知道。

# mysql - 查找重复行，然后删除其中一个

> ID：12377744
> 
> 赞同：0
> 
> 时间：2012-09-11T20:52:53.270
> 
> 标签：mysql, sql

> **可能重复：**
> [删除 MySQL 中的重复行](https://stackoverflow.com/questions/3311903/remove-duplicate-rows-in-mysql)

我有以下显示重复行的查询：

```
SELECT ID, user_login, wp_users.user_email FROM wp_users
INNER JOIN (SELECT wp_users.user_email FROM wp_users
GROUP BY wp_users.user_email HAVING count(ID) > 1) dup ON wp_users.user_email = dup.user_email 
```

我只能找到同时删除它们的查询，而不仅仅是删除其中一个（比如 ID 最高的那个）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:12:46.660

请尝试使用此 sql 删除重复行：

```
delete from users where id not in (select min(id) from users group by user_email) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:03:57.177

```
DELETE FROM 
table_name A
WHERE  a.rowid >  ANY ( SELECT B.rowid
                        FROM table_name B
                        WHERE A.col1 = B.col1 AND 
                              A.col2 = B.col2
                       ); 
```

我想这会奏效

# c# - C#中的插入排序

> ID：12377745
> 
> 赞同：1
> 
> 时间：2012-09-11T20:52:55.283
> 
> 标签：c#

我正在尝试执行简单的插入排序，`C#`但我不知道我做错了什么。当我运行我的程序时，我希望它输出一个像这样的窗口：

```
before sorting
80 60 40 20 10 30 50 70

 during sorting
60 80 40 20 10 30 50 70
40 60 80 20 10 30 50 70
20 40 60 80 10 30 50 70
10 20 40 60 80 30 50 70
10 20 30 40 60 80 50 70
10 20 30 40 50 60 80 70
10 20 30 40 50 60 70 80

after sorting
10 20 30 40 50 60 70 80 
```

但它只显示排序后的部分。我可能做错了什么？

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        class CArray
        {
            private int[] arr;
            private int upper;
            private int numElements;
            public CArray(int size)
            {
                arr = new int[size];
                upper = size - 1;
                numElements = 0;

            }
            public void insert(int item)
            {
                arr[numElements] = item;
                numElements++;
            }
            public void displayElements()
            {
                for (int i = 0; i <= upper; i++)
                    Console.Write(arr[i] + " ");
                Console.ReadKey();

            }
            public void clear()
            {
                for (int i = 0; i <= upper; i++)
                    arr[i] = 0;
                numElements = 0;

            }

            public void insertionsort() {
            int inner, temp;
            for (int outer = 1; outer <= upper; outer++) { 
              temp = arr[outer];
              inner = outer;
              while (inner > 0 && arr[inner - 1] >= temp) { 
              arr[inner] = arr[inner-1];
              inner -= 1;
              }
                arr[inner] = temp;

            }

        }
        }
        static void Main(string[] args)
        {

            CArray nums = new CArray(10);
            Random rnd = new Random(100);
            for (int i = 0; i < 10; i++)

                nums.insert((int)(rnd.NextDouble() * 100));

            Console.WriteLine("before sorting: ");
            nums.displayElements();

            Console.WriteLine("during sorting: ");
            nums.insertionsort();

            Console.WriteLine("after sorting: ");
            nums.displayElements();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:02:18.923

您的`insertionSort()`函数不会向显示器输出任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:02:31.277

在 insertsort() 的某处调用 displayElements() 怎么样？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T23:47:04.263

这对我有用...

```
public void insertionsort() { 
    int inner, temp; 

    for (int outer = 1; outer <= upper; outer++) {  
        displayElements();                          
        Console.WriteLine(); 

        temp = arr[outer]; 
        inner = outer; 
        while (inner > 0 && arr[inner - 1] >= temp) {  
            arr[inner] = arr[inner-1]; 
            inner -= 1;
        } 

        arr[inner] = temp; 
    } 
```

这是我将两行添加到您的 insertsort() 方法时得到的输出...

> 排序前：
> 96 15 66 90 35 94 71 61 34 14
> 
> 分拣时：
> 96 15 66 90 35 94 71 61 34 14
> 15 96 66 90 35 94 71 61 34 14
> 15 66 96 90 35 94 71 61 34 14
> 15 66 90 96 35 94 71 41 76 34 9 4
> 96 96 61 34 14
> 15 35 66 90 94 96 71 61 34 14
> 15 35 66 71 90 94 96 61 34 14
> 15 35 61 66 71 90 94 96 34 14
> 15 34 35 61 66 7141 90 94 96
> 
> 排序后：
> 14 15 34 35 61 66 71 90 94 96

# python - 优化切割模式的资源？

> ID：12377747
> 
> 赞同：1
> 
> 时间：2012-09-11T20:53:00.680
> 
> 标签：python, optimization, mathematical-optimization

我有一堆不同尺寸的矩形，我需要从一块板材上剪下来。

我对python非常熟悉，但我从来没有做过这样的事情。从计算的角度来看，这似乎是一个以前必须探索过的问题，但我很难找到任何资源。

这是一个经典问题吗，我应该研究一下算法的任何建议吗？

# r - 将 shapefile 中的地理分析结果绘制到 Google 地图图块上

> ID：12377755
> 
> 赞同：2
> 
> 时间：2012-09-11T20:53:25.863
> 
> 标签：r, google-maps

我进行了地理分析

```
library(PBSmapping); library(RgoogleMaps); library(maptools)
cases<-read.table("cases.csv")
cases.ppp<-ppp(cases@coords[,1], cases@coords[,2], unitname=c("km"))
dens.cas <- density.ppp(cases.ppp, bw)
plot(dens.cas) 
```

产生以下图像：

![在此处输入图像描述](../Images/fa941d281f1608edcd879f1c8c1e9351.png)

我想将其覆盖在一些谷歌地图图块上，并且我已经能够告诉 R 获取适当的图块，如下所示：

```
shp <- importShapefile('map.shp', projection="LL");
bb <- qbbox(lat = shp[,"Y"], lon = shp[,"X"]);  
MyMap <- GetMap.bbox(bb$lonR, bb$latR, destfile = "map.jpg"); 
```

![在此处输入图像描述](../Images/f329708a66fed10adb3af1724f6a96e2.png)

但是，我似乎找不到任何解决方案将分析结果放置在地图图块上。我知道可以使用此解决方案覆盖 shapefile：

[https://stackoverflow.com/a/2105912/1540735](https://stackoverflow.com/a/2105912/1540735)

这确实有效，并且在地理位置方面完全对齐（如下所示），但我丢失了分析结果：

```
PlotPolysOnStaticMap(MyMap, shp, lwd=.5, col = rgb(1,1,1,0.2), add = F) 
```

![在此处输入图像描述](../Images/ea3afe80ac8a7a2f65fbbdf641723401.png)

有谁知道如何覆盖这些？据我所知，产生颜色的数值存储在 dens.cas$v 中，并存储为 128*128 矩阵。

非常感谢任何可以提供帮助的人

# xml - 允许嵌入 html 的 XML Schema

> ID：12377756
> 
> 赞同：1
> 
> 时间：2012-09-11T20:53:25.670
> 
> 标签：xml, xsd

在我的 xml 架构中，我有一个名为 itemsetting 的标签：

```
 <xs:element name="itemsetting">
    <xs:complexType>
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="key" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value="questionscript"/>
                            <xs:enumeration value="timeframe"/>
                            <xs:enumeration value="textlabel"/>
                            <xs:enumeration value="textboxtype"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
</xs:element> 
```

我想做的是能够将 html 嵌入到问题脚本类型中。例如：

```
<itemsetting key="questionscript">this<html:b>is bold </html:b> </itemsetting> 
```

我试图摆弄复杂/简单的时间，每次我最终得到一个无法解析的模式文件。指向正确方向的指针将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:19:00.987

扩展迈克尔的答案，如下所示：

```
<xs:element name="itemsetting">
  <xs:complexType mixed="true">
    <xs:sequence>
      <xs:any namespace="http://www.w3.org/1999/xhtml" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="key" use="required">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:enumeration value="questionscript"/>
          <xs:enumeration value="timeframe"/>
          <xs:enumeration value="textlabel"/>
          <xs:enumeration value="textboxtype"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
</xs:element> 
```

应该可以工作 - 假设是与XML 中的前缀`http://www.w3.org/1999/xhtml`相对应的 HTML 命名空间。`html`

如果您有多个命名空间，或者您不想打扰命名空间检查，请使用

```
 . . . 
      <xs:any namespace="##any" minOccurs="0" maxOccurs="unbounded"/>
 . . . 
```

请注意，这假定嵌入的 HTML 是格式良好的 XML，例如，如果它包含会使整个 XML 文件不可读的未闭合标签，那么就无法使用模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T23:20:12.060

您的元素没有简单的内容：它包含子元素，这意味着它是复杂的内容（特别是`<complexContent mixed="true">`）。

如果您想在 HTML 命名空间中允许任何子元素，您可以通过使用单个通配符粒子定义内容模型来实现`<xs:any namespace="..." minOccurs="0" maxOccurs="unbounded"/>`

# authentication - BizTalk：来电者身份验证

> ID：12377760
> 
> 赞同：0
> 
> 时间：2012-09-11T20:53:48.807
> 
> 标签：authentication, ssl-certificate, biztalk, biztalk-2010

在即将推出的 BizTalk 2010 项目中，我们将有一个客户端调用以提交数据的 Web 服务，以及一个客户端调用以请求数据的 Web 服务。在 biztalk 应用程序级别，这将通过将编排公开为 wcf 服务来实现。

在服务器级别，我们将有一个 2 节点网络场、一个 2 节点 biztalk 组和一个 sql 集群。Web 服务显然将部署在 Web 场上，并且编排、发送/接收端口将在 BizTalk 组服务器上运行。

我们希望对调用者进行身份验证并将其身份映射到活动目录帐户，以便在编排级别，我们能够访问调用者的 AD 身份，并将帐户名称传递给数据库中的存储过程。

大概我们可以通过 SSL 证书处理身份映射，但我们以前没有这样做过。那里有一些好的示例/教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T23:35:47.507

如果您添加端点行为以将名称从 WindowsIdentity 添加到 WCF 标头会怎样？这样（至少在我的情况下）身份更容易在管道的下游获得，但这足以满足您的“帐户名称”目的吗？

```
#region IDispatchMessageInspector Members

public object AfterReceiveRequest(
    ref System.ServiceModel.Channels.Message request,
    System.ServiceModel.IClientChannel channel,
    System.ServiceModel.InstanceContext instanceContext)
{
    if (ServiceSecurityContext.Current == null || 
        ServiceSecurityContext.Current.WindowsIdentity == null) 
        return null;

    WindowsUserName windowsUserName = new WindowsUserName();
    request.Headers.Add(MessageHeader.CreateHeader(
        windowsUserName.Name, windowsUserName.Namespace,
        ServiceSecurityContext.Current.WindowsIdentity.Name));
    return null;
}

public void BeforeSendReply(ref Message reply, object correlationState)
{
    return;
}

#endregion 
```

使用客户端证书时同样适用，但使用`PrimaryIdentity`而不是`WindowsIdentity`获取 BizTalk 方名称。不过，这与活动目录帐户没有直接联系。

# php - php脚本发送带有附件的电子邮件

> ID：12377761
> 
> 赞同：0
> 
> 时间：2012-09-11T20:53:48.813
> 
> 标签：php, email, attachment

我有一个表单，用户可以在其中编辑一组特定信息并将文件附加到所述信息。如果上传了文件，我需要将其通过电子邮件发送给某些其他人。我有以下功能来处理发送带有附件的电子邮件：

```
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) 
{
    $file = $path.$filename;        
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n";
    // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    mail($mailto, $subject, $message, $header);
} 
```

该函数确实发送了一封电子邮件（带有正确的附件文件名），但附加到电子邮件的文件总是几百字节。例如，我尝试通过上传一个 45 kb 的 pdf 文件进行测试，该函数发送了一封电子邮件，其中包含一个 232 字节的 pdf 文件。我尝试使用 $_SERVER['DOCUMENT_ROOT'] 作为路径以及本地路径（即 ./uploads/）...两者都得到相同的结果。

有没有人看到我遗漏的明显东西......或者可能不那么明显？

# java - 如何从 Eclipse for Java 中的资源文件夹中导入文件

> ID：12377767
> 
> 赞同：0
> 
> 时间：2012-09-11T20:54:09.447
> 
> 标签：java, file-upload, file-io

我在 Eclipse 的项目中的资源文件夹中有一个文件。我需要一种方法来将此文档加载到我的 Java 文件中。优选的表示形式是在 InputStream 中。

我根据一些搜索尝试了以下操作，但它似乎不起作用，我不知道为什么（我得到空值），任何帮助表示赞赏

```
InputStream is = getClass().getResourceAsStream("/Project/resources/BlankPDF.pdf"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:48:40.217

确保资源与已编译的类位于同一文件夹中。我不使用 Eclipse，但 Netbeans 在构建时会自动创建一个“类”文件夹。包中的类，即`org.website.PDFReader`，将在“类”文件夹下有一组子目录，跟在类的完全限定名之后（即包名+类名）。无论如何，这些打包类的“父目录”仍然是“类”文件夹。

暂时，将您的资源手动放在该类文件夹中。几乎可以肯定，有一种方法可以让 Eclipse 在构建时自动将资源复制到适当的文件夹中（见下文）。

最后，在您的代码中，从“/Project/...”中删除前导“/”

当您删除前导“/”时，它会使资源位置相对于您的类的类加载器的父目录 - 在本示例中，“类”文件夹。保持该正斜杠使资源位置“绝对” - 不相对于任何父目录。

**编辑：**以下问题应该有助于了解此过程的更多 Eclipse 特定细节：[Eclipse 中的 Java：我应该将文件放在我想使用 getResource 加载的文件系统的什么位置？（例如 ImageIcon 的图像）](https://stackoverflow.com/questions/270197/java-in-eclipse-where-do-i-put-files-on-the-filesystem-that-i-want-to-load-usin)。确保也查看对已接受答案的第一条评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:03:12.210

您作为参数传递给的字符串必须是*相*对于您从中调用的类`getResourceAsStream`的位置，或者是您的任何源文件夹的*绝对*位置，并带有前导.*`getResourceAsStream`*`/`**

 **因此，如果`resources`是您项目中的源文件夹（在 Eclipse 中标有类似包的小符号），那么`getClass().getResourceAsStream("/BlankPDF.pdf")`应该可以工作。

示例：假设您的项目中有以下文件夹和包，源文件夹标有`*`：

```
Project
    src*
        com.package.foo
            MyClass.java
    resources*
        BlankPDF.pdf 
```

然后`MyClass.class.getResourceAsStream("/BlankPDF.pdf")`(leading `/`, absolute) 和`MyClass.class.getResourceAsStream("../../../BlankPDF.pdf")`(noleading `/`, relative) 都应该为您提供文件。**

# tsql - 对表中的不同值调用函数

> ID：12377770
> 
> 赞同：1
> 
> 时间：2012-09-11T20:54:26.747
> 
> 标签：tsql, sql-server-2005

我有一个 SQL Server 2005 数据库。除了对这些不同的值调用函数之外，我还需要获得不同的值。当涉及到函数调用时，我不确定 distinct 是如何工作的。例如，我有这个查询：

```
SELECT DISTINCT a, b, c, fcn_DoSomething(a, b, c) AS z FROM users 
```

我猜测正在为表中的所有值调用函数 (fcn_DoSomething)，而不是不同的值。我对么？如果是这样，我如何编写查询以仅在 a、b、c 的不同值上调用该函数？我知道一种选择是使用临时表，但如果有人有更好的想法，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:53:13.847

这让我很好奇，所以我做了一些基本的测试。我创建了一个带有一些不同值和一些重复值的小表，一个仅执行字符串连接的函数，然后查看了以下执行计划：

```
Go
DBCC DROPCLEANBUFFERS 
DBCC FREEPROCCACHE 

select distinct cola, colb, dbo.sillyfunc(cola, colb)
from distincttest

--Clear the cache
Go
DBCC DROPCLEANBUFFERS
DBCC FREEPROCCACHE 

select cola, colb, dbo.sillyfunc(cola, colb)
from (select distinct cola, colb from distincttest) as t 
```

在这种情况下，执行计划清楚地表明，第一个为每一行运行连接函数，但第二个首先对不同的值进行排序，然后运行该函数。但是对于少数行，它们具有相同的执行时间，当一起运行时，它们显示每行使用了总查询资源的 50%。

所以，我添加了几十万个重复行。并再次尝试。这改变了查询计划，因此它正在执行哈希匹配以获得独特性，而不是以前的排序，现在第二个版本迫使它首先选择独特性，执行速度快了十倍以上。

最后，我认为这可能只是因为 SQL Server 将我的 sillyfunc 标记为非确定性（`select OBJECTPROPERTYEX(object_id('dbo.sillyfunc'), 'isdeterministic')`返回 0），所以我切换到[patindex](http://msdn.microsoft.com/en-us/library/ms181984%28v=sql.100%29.aspx)，它是一个内置函数，被认为是确定性的。这给了我相同的结果，第一个版本中的每一行都调用了该函数，而第二个版本中只有少数不同的行调用了该函数。

因此，进一步的测试可能会发现诱使优化器做一些更复杂的事情的情况，但看起来如果你想在调用函数之前应用 distinct ，那么你需要使用子查询、CTE 或临时表来限制函数可以访问的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:57:56.203

这将确保该函数仅在不同的值上被调用。

```
select *, fcn_DoSomething(a, b, c) 
from
 (select distinct a,b,c FROM users) v 
```

但是，我相信函数调用会被优化，所以它可能没有什么不同。试试看。

# jquery - 带有表格的 JQuery 动画回调函数

> ID：12377775
> 
> 赞同：0
> 
> 时间：2012-09-11T20:54:46.747
> 
> 标签：jquery, html, animation, html-table

我在这里遇到了一种罕见的情况，我需要一些想法，我只是证明了很多组合，但编程不是随机的！

我有一个边框 = 1px 的表格。我也有很多，`<td>`里面有一张图片。基本上我的想法是，当用户单击一个图像（img）时，所有图像和表格边框都会“淡出”，除了单击的图像。所以我已经证明了很多组合，当img消失时，边框没有，或者什么都没有消失，或者一切都消失了，或者回调不起作用。到目前为止，我最好的方法是这个：

假设以下html：

```
<table id="entire">
<tr><td>
<table class="table1" border="1px">
<tr>
<td><img id="ebox"></td>
<td><img id="fbox"></td>
<td><img id="gbox"></td>
</tr>
</table>
</td></tr>
</table> 
```

并假设以下 JQuery：

```
 $("#entire").click(function (event) {

        $('.table1 img').animate({
            opacity: 0.3
            }, 500,
            function() {

        }); //close the animate

$('#' + event.target.id).animate({
            opacity: 0.9
            }, 500,
            function() {

        }); //close the animate

    });  //close the event click 
```

我真的证明了一切，使用 ParentNode 并调用 ，以及其他选项，例如将所有内容淡出然后淡出。

在最后一个例子中，我知道这可以做到，但我不知道怎么做。我的想法是 table1 “淡出”，除了点击图片之外，而不是在点击之后，而是在同一时间。

任何解决方法也将被视为解决方案，请在否决之前发表评论、询问更多信息或提出建议。我真的在谷歌上搜索，我也尝试使用“队列关闭，完成：”但不起作用。

更新：

最后一种方法：

```
$('.table1 img').not(event.target).animate({alpha: 0.3}, {
        duration: 1000,
    step: function() {
            $('.table1').css('border-color','rgba(0,0,0,'+this.alpha+')');
        }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:32:47.910

jQuery UI 允许彩色动画，所以安装了 jQuery UI（或它的适当部分），试试这个：

```
var $t = $("#entire table").on('click', 'img', function() {
    $(this).fadeIn(250);
    $t.animate('border-color', '#FFF').find('img').not(this).fadeOut(1000);
}); 
```

除非其他一些代码将其重置为原始颜色，否则您只会看到一次边框淡入淡出效果。

## 编辑

`.fadeTo()`可能比`fadeIn()`/好`fadeOut()`；因为褪色的图像仍然可以点击。

```
var $t = $("#entire table").on('click', 'img', function() {
    $(this).fadeTo(250, 1.0);
    $t.animate('border-color', '#FFF').find('img').not(this).fadeTo(1000, 0.2);
}); 
```

# c - 在汇编程序 AMD64 中，我调用 fprintf 但它一直无限循环

> ID：12377777
> 
> 赞同：1
> 
> 时间：2012-09-11T20:54:57.323
> 
> 标签：c, assembly, printf

我无法理解 fprintf 的问题。也许您可以找到解决此问题的方法。

你看，当我调用 fprintf 时，它开始无限循环，没有充分的理由。我不知道这里发生了什么，所以也许你可以帮帮我。

```
String_int:
    db 91; "[" 
    db 37; "%"
    db 115;"i"
    db 93; "]" 
    db 0;  "end_string" 

w_IN_ASCII:
    db 119; "w" 
    db 0;  "end_string" 

<SOME CODE>

    mov rdi, FILE_LOCATION;
    mov rsi, w_IN_ASCII;
    call fopen;
    mov r15, rax;

    cmp r15, 0; (with this I can be sure it is not a NULL)
    je .endProgram;

    mov rdi, r15;
    mov rsi, String_int;
    mov rdx, TO_PRINT_LOCATION;
    call fprintf; this is where my code dies

    mov rdi, r15;
    call fclose;

.endProgram:
    ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:25:01.903

在 System V AMD64 ABI 中，可变参数函数需要`al`. 我没有看到你设置它。

# asp.net-mvc - 如何使用 Razor 在 ASP.NET MVC 4 中为具有 List 属性的对象制作编辑表单

> ID：12377778
> 
> 赞同：14
> 
> 时间：2012-09-11T20:55:03.417
> 
> 标签：asp.net-mvc

我有一个使用 Razor 的 MVC 应用程序的编辑页面。

我有一个像这样的模型：

```
public class MyModelObject
{
    public int Id { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public List<MyOtherModelObject> OtherModelObjects { get; set; }
} 
```

MyOtherModelObject 看起来像：

```
public class MyOtherModelObject
{
    public string Name { get; set; }

    public string Description { get; set; }
} 
```

我正在为 MyModelObject 制作编辑页面。我需要一种在 MyModelObject 的编辑页面上为表单添加空间的方法，以便用户创建/添加用户希望到 OtherModelObjects 列表中的任意数量的 MyOtherModelObject 实例。

我在想用户可以点击一个按钮，这将对另一个返回表单元素的 PartialView 的操作执行 ajax（没有表单标记，因为这是我编辑页面上表单的一部分）。当用户添加了他们想要的所有 MyOtherModelObjects 并填写了数据时，他们应该能够将他们的编辑保存到现有的 MyModelObject 中，这将 HttpPost 到 Edit 操作，并希望所有 MyOtherModelObjects 都在正确的列表中。

我还需要用户在添加项目后能够重新订购它们。

有谁知道如何使这项工作？是否实施了示例项目或使用此解决方案的在线示例演练？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T09:06:53.663

这篇[博文](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)包含一步一步的指南，说明如何实现这一目标。

* * *

更新：

根据评论部分的要求，我将逐步说明如何使上述文章适应您的场景。

模型：

```
public class MyOtherModelObject
{
    public string Name { get; set; }
    public string Description { get; set; }
}

public class MyModelObject
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public List<MyOtherModelObject> OtherModelObjects { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyModelObject
        {
            Id = 1,
            Name = "the model",
            Description = "some desc",
            OtherModelObjects = new[]
            {
                new MyOtherModelObject { Name = "foo", Description = "foo desc" },
                new MyOtherModelObject { Name = "bar", Description = "bar desc" },
            }.ToList()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyModelObject model)
    {
        return Content("Thank you for submitting the form");
    }

    public ActionResult BlankEditorRow()
    {
        return PartialView("EditorRow", new MyOtherModelObject());
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model MyModelObject

@using(Html.BeginForm())
{
    @Html.HiddenFor(x => x.Id)
    <div>
        @Html.LabelFor(x => x.Name)
        @Html.EditorFor(x => x.Name)
    </div>
    <div>
        @Html.LabelFor(x => x.Description)
        @Html.TextBoxFor(x => x.Description)
    </div>
    <hr/>
    <div id="editorRows">
        @foreach (var item in Model.OtherModelObjects)
        {
            @Html.Partial("EditorRow", item);
        }
    </div>
    @Html.ActionLink("Add another...", "BlankEditorRow", null, new { id = "addItem" })

    <input type="submit" value="Finished" />
} 
```

部分（`~/Views/Home/EditorRow.cshtml`）：

```
@model MyOtherModelObject

<div class="editorRow">
    @using (Html.BeginCollectionItem("OtherModelObjects"))
    {
        <div>
            @Html.LabelFor(x => x.Name)
            @Html.EditorFor(x => x.Name)
        </div>
        <div>
            @Html.LabelFor(x => x.Description)
            @Html.EditorFor(x => x.Description)
        </div>
        <a href="#" class="deleteRow">delete</a>
    }
</div> 
```

脚本：

```
$('#addItem').click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (html) {
            $('#editorRows').append(html);
        }
    });
    return false;
});

$('a.deleteRow').live('click', function () {
    $(this).parents('div.editorRow:first').remove();
    return false;
}); 
```

* * *

备注：`BeginCollectionItem`自定义助手取自我链接到的同一篇文章，但为了完整起见，我在这里提供它：

```
public static class HtmlPrefixScopeExtensions
{
    private const string idsToReuseKey = "__htmlPrefixScopeExtensions_IdsToReuse_";

    public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : Guid.NewGuid().ToString();

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, html.Encode(itemIndex)));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    }

    public static IDisposable BeginHtmlFieldPrefixScope(this HtmlHelper html, string htmlFieldPrefix)
    {
        return new HtmlFieldPrefixScope(html.ViewData.TemplateInfo, htmlFieldPrefix);
    }

    private static Queue<string> GetIdsToReuse(HttpContextBase httpContext, string collectionName)
    {
        // We need to use the same sequence of IDs following a server-side validation failure,  
        // otherwise the framework won't render the validation error messages next to each item.
        string key = idsToReuseKey + collectionName;
        var queue = (Queue<string>)httpContext.Items[key];
        if (queue == null)
        {
            httpContext.Items[key] = queue = new Queue<string>();
            var previouslyUsedIds = httpContext.Request[collectionName + ".index"];
            if (!string.IsNullOrEmpty(previouslyUsedIds))
                foreach (string previouslyUsedId in previouslyUsedIds.Split(','))
                    queue.Enqueue(previouslyUsedId);
        }
        return queue;
    }

    private class HtmlFieldPrefixScope : IDisposable
    {
        private readonly TemplateInfo templateInfo;
        private readonly string previousHtmlFieldPrefix;

        public HtmlFieldPrefixScope(TemplateInfo templateInfo, string htmlFieldPrefix)
        {
            this.templateInfo = templateInfo;

            previousHtmlFieldPrefix = templateInfo.HtmlFieldPrefix;
            templateInfo.HtmlFieldPrefix = htmlFieldPrefix;
        }

        public void Dispose()
        {
            templateInfo.HtmlFieldPrefix = previousHtmlFieldPrefix;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:45:11.487

[我能够从这篇博文http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)中吸取教训 并将其应用于我的模型对象有几个属性，其中许多是列表。

我根据需要修改了他的脚本以处理模型中的多个列表，并将尽快将我的解决方案发布到博客中。肯定要等到我当前的冲刺之后。完成后我会发布链接。

# c++ - typedef 类：未知类型名称“MyType”；你的意思是“MyType_t”吗？

> ID：12377780
> 
> 赞同：0
> 
> 时间：2012-09-11T20:55:06.210
> 
> 标签：c++, objective-c

我有一个 cpp 头文件，其结构如下：

```
typedef class MyType_t {

//...

public:
    void    method();

} MyType; 
```

我正在尝试从这样的 .mm 文件中使用它：

```
MyType.method(); 
```

这会导致编译器错误“未知类型名称‘MyType’；你的意思是‘MyType_t’吗？”

编译器似乎能够理解“MyType_t”，但似乎不支持“MyType”。我只知道非常基本的 c++ 并且不知道这个构造的确切用途。我刚刚下载了这段代码，必须从objective-c调用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:56:33.597

都不应该工作。

你的意思是：

```
class MyType_t {

//...

public:
    void    method();

} MyType; 
```

`typedef`声明了一个新类型，称为与`MyType`相同`MyType_t`。上面的语法声明了一个`MyType`类型为 的变量`MyType_t`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:32:36.877

问题是我在使用之前没有调用构造函数`MyType`

所以添加这个

```
MyType MyType_t(parameter); 
```

解决了。

# c# - 使用 Linq 表达式的多个 Groupby 键选择器

> ID：12377784
> 
> 赞同：1
> 
> 时间：2012-09-11T20:55:18.040
> 
> 标签：c#, linq

我有一个需要按一组属性分组的对象列表。这些属性集只有在运行时才知道。我想在不使用动态 LINQ 的情况下完成此操作。以下来自Kirk Woll[的 Dynamically Added a GroupBy to a Lambda Expression](https://stackoverflow.com/questions/3886204/dynamically-adding-a-groupby-to-a-lamba-expression)的代码工作正常，但这将结果按一个属性分组。

```
 public static IQueryable<IGrouping<TColumn, T>> DynamicGroupBy<T, TColumn>(IQueryable<T> source, string column)
    {
        PropertyInfo columnProperty = typeof(T).GetProperty(column);
        var sourceParm = Expression.Parameter(typeof(T), "x");
        var propertyReference = Expression.Property(sourceParm, columnProperty);
        var groupBySelector = Expression.Lambda<Func<T, TColumn>>(propertyReference, sourceParm);

        return source.GroupBy(groupBySelector);

    } 
```

我想传递一个 columnNames 列表，并能够按多个 keySelector 进行分组。我不知道如何做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:49:13.650

看起来如果我们可以动态生成表达式的等价物： x => new { a = x.Prop1, b = x.Prop2, ... } 那么合理的 LINQ => SQL 提供程序可能会生成您想要的 SQL . 动态生成一个新的匿名类型似乎很困难，但我们可以利用匿名类型是通用的这一事实来重用它。

```
// at the top of your class
private static readonly object AnonymousObjectWithLotsOfProperties = new {
    a = 1,
    b = 2,
    ...
};

// then in your method
// (1) first get the list of properties represented by the string you passed in (I assume you know how to do this via reflection)
var props = typeof(T).GetProperties().Where(...);
var propTypes = props.Select(pi => pi.PropertyType).ToList();

// (2) now generate the correctly genericized anonymous type to use
var genericTupleType = AnonymousObjectWithLotsOfProperties.GetType()
    .GetGenericTypeDefinition();
// for generic args, use the prop types and pad with int
var genericArguments = propTypes.Concat(Enumerable.Repeat(typeof(int), genericTupleType.GetProperties().Length - propTypes.Count))
    .ToArray();
var tupleType = genericTupleType.MakeGenericType(genericArguments);

// (3) now we have to generate the x => new { ... }  expression
// if you inspect "System.Linq.Expressions.Expression<Func<object>> exp = () => new { a = 2, b = 3 };"
// in the VS debugger, you can see that this is actually a call to a constructor
// on the anonymous type with 1 argument per property
var tParameter = Expression.Parameter(typeof(T));
// create the expression
var newExpression = Expression.New(
    constructor: tupleType.GetConstructors().Single(), // get the one constructor we need
    // the arguments are member accesses on the parameter of type T, padded with 0
    arguments: props.Select(pi => Expression.MakeMemberAccess(tParameter, pi))
        .Concat(Enumerable.Repeat(Expression.Constant(0), genericTupleType.GetProperties().Length - propTypes.Count))
);
// create the lambda: we need an Expression<TDelegate>, which means that we
// need to get the generic factory method from Expression and invoke it
var lambdaGenericMethod = typeof(Expression).GetMethods(BindingFlags.Static | BindingFlags.Public)
    .Single(m => m.IsGenericMethodDefinition);
var lambdaMethod = lambdaGenericMethod.MakeGenericMethod(typeof(Func<,>).MakeGenericType(typeof(T), tupleType));
// reflection for Expression.Lambda(body, parameters)
var lambda = lambdaGenericMethod.Invoke(null, new object[] { newExpression, new[] { tParameter });

// now that we have the expression, we can invoke GroupBy via reflection.
// Of course, that leaves you with an IQueryable<IGrouping<ANON, T>>, which isn't much
// use until you apply some other IQueryable methods to eliminate the ANON type from the
// method signature so you can return it 
```

请注意，我实际上并没有编译和运行这段代码，所以我不能保证上面的一切都是完美的。但是，希望它能让您走上正确的轨道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:40:23.570

这有什么问题：

[按多列分组](https://stackoverflow.com/questions/847066/group-by-multiple-columns)

这是一个使用 .GroupBy 方法而不是 Linq 的示例：

```
public class Program
{
    static void Main(string[] args)
    {

        var list = new List<SomeType>
            {
                new SomeType("Mr", "Joe", "Bloggs"),
                new SomeType("Mr", "John", "Citizen"),
                new SomeType("Mrs", "Mary", "Mac")
            };

        var list2 = list.GroupBy(by => new { by.Property1, by.Property2 });
    }
}

public class SomeType
{
    public string Property1 { get; private set; }
    public string Property2 { get; private set; }
    public string Property3 { get; private set; }

    public SomeType(string property1, string property2, string property3)
    {
        Property1 = property1;
        Property2 = property2;
        Property3 = property3;
    }
} 
```

# c# - 覆盖 WP7-Keyboard 上的前进键

> ID：12377785
> 
> 赞同：0
> 
> 时间：2012-09-11T20:55:25.327
> 
> 标签：c#, windows-phone-7, overriding, forward

如何覆盖 Windows Phone 设备上虚拟键盘上的前向箭头事件？

我想将它用于一种方法。

# javascript - 悬停时更改 div 标签内文本的字体颜色

> ID：12377786
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:55:29.823
> 
> 标签：javascript, html, css

当用户将鼠标悬停在文本上时，我正在尝试更改文本的颜色并为其添加下划线。

我尝试了以下方法，但它不起作用。我确实在整个互联网上寻找了解决方案，但没有找到适合我特殊需求的解决方案。

```
<style type="text/css">
    .container{ width: 100px; float: left; background: #e2edf9; overflow: hidden; }
    .content {width: 10px; height:20px; cursor: pointer; color: black; }
    .content:hover{color: orange;}
</style>

<div class="container">
    <div class="content" onclick="search(this)" >**EWR**</div>
    <div class="content" onclick="search(this)" >**NRT**</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:00:33.790

CSS：

```
.container{ width: 100px; float: left; background: #e2edf9; overflow: hidden; }
.content {width: 10px; height:20px; cursor: pointer; color: #000000; }
.content:hover{color: #FFA500; text-decoration: underline;} 
```

**并非所有浏览器都接受文字，因为颜色尝试使用 HEX 代码或 rgb()。**

见：http: [//jsfiddle.net/davcpas123/3S4xN/2/](http://jsfiddle.net/davcpas123/3S4xN/2/)

更新：

奇怪对我来说似乎很好：

![在此处输入图像描述](../Images/4fc0a934830a779bac3f9f935af20dea.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:27:52.880

在 IE 中，必须为 :hover 选择器声明一个 <!DOCTYPE> 才能作用于 <a> 元素以外的其他元素。

我不太确定 :hover 对 <IE6 中链接以外的元素的支持。

如果迫在眉睫，总会有你的 javascript 鞭子：

```
<div class="content" onmouseover="this.style.color = 'orange'" onmouseout="this.style.color = 'black'" ></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:59:27.533

这有什么问题？

```
<style type="text/css">
    .container{ width: 100px; float: left; background: #e2edf9; overflow: hidden; }
    .content {width: 10px; height:20px; cursor: pointer; color: black; }
    .content:hover{color: #FFFFFF;text-decoration:underline;}
</style>

<div class="container">
    <div class="content" onclick="search(this)" >**EWR**</div>
    <div class="content" onclick="search(this)" >**NRT**</div>
</div>​ 
```

演示：http: [//jsfiddle.net/m4m7B/1/](http://jsfiddle.net/m4m7B/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T22:26:06.353

这个小提琴在 IE8 中对我有用，[看这里的小提琴](http://jsfiddle.net/m4m7B/1/)，除了在 quirks 模式下运行时，你有 quirks 模式吗？

javascript 是一个选项吗，似乎是最适合您的解决方案。

# java - 如何在JAVA中检查字符串数组中的相等单词

> ID：12377803
> 
> 赞同：4
> 
> 时间：2012-09-11T20:56:42.127
> 
> 标签：java, arrays, string, sorting

这应该很简单（我认为），但我就是做错了......：|

任务如下：

询问用户一些输入。输入必须拆分为单个单词并放入数组中。所有单词都应该被计算在内。如果存在相同的单词，它们会在输出中得到“+1”。最后，我想打印出列表中正确数量的计数单词。我的前两列是正确的，但是相同单词的单词计数器让我很头疼。如果一个词被发现是相等的，它就不能在生成的列表中出现两次！:!

我是一个完整的 JAVA 新手，所以请善待代码判断。;)

到目前为止，这是我的代码：

```
package MyProjects;

import javax.swing.JOptionPane;

public class MyWordCount {
public static void main(String[] args) {

    //User input dialog
    String inPut = JOptionPane.showInputDialog("Write som text here");

    //Puts it into an array, and split it with " ".
    String[] wordList = inPut.split(" ");

    //Print to screen
    System.out.println("Place:\tWord:\tCount: ");

    //Check & init wordCount
    int wordCount = 0;

    for (int i = 0; i < wordList.length; i++) {

        for (int j = 0; j < wordList.length; j++){

            //some code here to compare
            //something.compareTo(wordList) ?

        }

        System.out.println(i + "\t" + wordList[i]+ "\t" + wordCount[?] );
    }

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:12:21.090

您可以使用 Hashmap 来做到这一点。Hashmap 存储键值对，每个键必须是唯一的。

因此，在您的情况下，键将是您拆分的字符串的一个单词，而值将是它的计数。

将输入拆分为单词并将它们放入字符串数组后，将第一个单词作为键放入 Hashmap 并将 1 作为它的值。对于每个后续单词，您可以使用函数 containsKey() 将该单词与 Hashmap 中的任何现有键匹配。如果返回 true，则将该键的值（计数）加 1，否则将单词和 1 作为新的键值对放入 Hashmap。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:07:35.003

因此，为了比较两个字符串，您可以：

```
String stringOne = "Hello";
String stringTwo = "World";
stringOne.compareTo(stringTwo);
//Or you can do
stringTwo.compareTo(stringOne); 
```

您不能像评论中那样将字符串与字符串数组进行比较。你必须在这个字符串数组中取一个元素，然后比较它（所以 stringArray[elementNumber]）。

为了计算有多少单词，如果要确定重复单词的数量，则需要一个整数数组（所以创建一个新的 int[]）。新 int[] 中的每个位置都应对应于单词数组中的单词。这将允许您计算单词重复的次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T21:31:12.057

```
import java.util.ArrayList;
import java.util.regex.PatternSyntaxException;

import javax.swing.JOptionPane;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {

    //Print to screen
    System.out.println("Place:\tWord:\tCount: ");

    //User input dialog
    String inPut = JOptionPane.showInputDialog("Write som text here");

    //Puts it into an array, and split it with " ".
    String[] wordList;
    try{
        wordList = inPut.split(" ");
    }catch(PatternSyntaxException e) {
        // catch the buggy!
        System.out.println("Ooops.. "+e.getMessage());
        return;
    }catch(NullPointerException n) {
        System.out.println("cancelled! exitting..");
        return;
    }

    ArrayList<String> allWords = new ArrayList<String>();
    for(String word : wordList) {
        allWords.add(word);
    }

    // reset unique words counter
    int uniqueWordCount = 0;

    // Remove all of the words
    while(allWords.size() > 0) {
        // reset the word counter
        int count = 0;

        // get the next word
        String activeWord = allWords.get(0);

        // Remove all instances of this word
        while(doesContainThisWord(allWords, activeWord)) {
            allWords.remove(activeWord);
            count++;
        }

        // increase the unique word count;
        uniqueWordCount++;

        // print result.
        System.out.println(uniqueWordCount + "\t" + activeWord + "\t" + count );

    }

}

/**
 * This function returns true if the parameters are not null and the array contains an equal string to newWord.
 */
public static boolean doesContainThisWord(ArrayList<String> wordList, String newWord) {
    // Just checking...
    if (wordList == null || newWord == null) {
        return false;
    }

    // Loop through the list of words
    for (String oldWord : wordList) {
        if (oldWord.equals(newWord)) {
            // gotcha!
            return true;
        }
    }
    return false;
}

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T22:57:24.660

这是一个使用 WordInfo 对象映射的解决方案，该对象记录文本中单词的位置并将其用作计数。LinkedHashMap 保留键从首次输入时开始的顺序，因此只需遍历键即可为您提供“按出现顺序转换”

您可以通过将所有键存储为小写但将原始大小写存储在 WordInfo 对象中来使这种大小写不敏感，同时保留第一次出现的大小写。或者只是将所有单词转换为小写并保留它。您可能还想考虑在拆分之前从第一个文本中删除所有`,`/ `.`/`"`等，但无论如何您永远无法做到完美。

```
import java.util.LinkedHashMap;
import java.util.Map;

import javax.swing.JOptionPane;

public class MyWordCount {
    public static void main(String[] args) {

        //User input dialog
        String inPut = JOptionPane.showInputDialog("Write som text here");

        Map<String,WordInfo> wordMap = new LinkedHashMap<String,WordInfo>();

        //Puts it into an array, and split it with " ".
        String[] wordList = inPut.split(" ");

        for (int i = 0; i < wordList.length; i++) {
            String word = wordList[i];
            WordInfo wi = wordMap.get(word);
            if (wi == null) {
                wi = new WordInfo();            
            }
            wi.addPlace(i+1);
            wordMap.put(word,wi);           
        }

        //Print to screen

        System.out.println("Place:\tWord:\tCount: ");

        for (String word : wordMap.keySet()) {          

            WordInfo wi = wordMap.get(word);        
            System.out.println(wi.places() + "\t" + word + "\t" + wi.count());
        }

      }
} 
```

和 WordInfo 类：

```
import java.util.ArrayList;
import java.util.List;

public class WordInfo {

    private List<Integer> places;

    public WordInfo() {
        this.places = new ArrayList<>();
    }

    public void addPlace(int place) {
        this.places.add(place);
    }

    public int count() {
        return this.places.size();
    }

    public String places() {
        if (places.size() == 0)
            return "";

        String result = "";
        for (Integer place : this.places) {
            result += ", " + place;
        }
        result = result.substring(2, result.length());
        return result;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T23:11:08.567

感谢您尝试帮助我。- 这就是我最终做的：

```
import java.util.ArrayList;

import javax.swing.JOptionPane;

public class MyWordCount {
public static void main(String[] args) {

    // Text in
    String inText = JOptionPane.showInputDialog("Write some text here");

    // Puts it into an array, and splits
    String[] wordlist = inText.split(" ");

    // Text out (Header)
    System.out.println("Place:\tWord:\tNo. of Words: ");

    // declare Arraylist for words
    ArrayList<String> wordEncounter = new ArrayList<String>();
    ArrayList<Integer> numberEncounter = new ArrayList<Integer>();

    // Checks number of encounters of words
    for (int i = 0; i < wordlist.length; i++) {
        String word = wordlist[i];

        // Make everything lowercase just for ease...
        word = word.toLowerCase();

        if (wordEncounter.contains(word)) {
            // Checks word encounter - return index of word
            int position = wordEncounter.indexOf(word);
            Integer number = numberEncounter.get(position);
            int number_int = number.intValue();
            number_int++;
            number = new Integer(number_int);
            numberEncounter.set(position, number);

            // Number of encounters - add 1;
        } else {
            wordEncounter.add(word);
            numberEncounter.add(new Integer(1));
        }

    }

    // Text out (the list of words)
    for (int i = 0; i < wordEncounter.size(); i++) {
        System.out.println(i + "\t" + wordEncounter.get(i) + "\t"
                + numberEncounter.get(i));
    }

  }
} 
```

# java - java中中断的确切用法是什么？

> ID：12377807
> 
> 赞同：0
> 
> 时间：2012-09-11T20:57:02.097
> 
> 标签：java, concurrency, interrupt

我是 Java concurrecny 的新手，目前正在阅读：[Java Tutorial-Interrupts](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)但我真的不明白我应该在哪里以及为什么应该使用中断。有人可以给我一个例子（代码），以便我更好地理解它吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:59:34.593

当您想要（咳嗽）中断线程时使用中断 - 通常意味着停止运行。 `Thread.stop()`由于各种问题已被弃用，因此`Thread.interrupt()`您告诉线程它应该停止运行的方式也是如此——它应该清理它正在做的事情并退出。实际上，程序员可以以任何他们想要的方式在线程上使用中断信号。

一些例子：

*   您的线程可能会休眠一分钟，然后爬取网页。您希望它停止这种行为。
*   也许您有一个线程正在从作业队列中消耗，并且您想告诉它没有更多的作业即将到来。
*   也许您有许多后台线程要中断，因为进程正在关闭并且您想要干净地这样做。

当然有很多方法可以完成上述信令，但可以使用中断。

影响正在运行的线程的更强大的方法之一是从几个不同的方法`Thread.interrupt()`中抛出，包括、和其他方法。`InterruptedException``Thread.sleep()``Object.wait()`

```
try {
   Thread.sleep(1000);
} catch (InterruptedException e) {
   // i've been interrupted
   // catching InterruptedException clears the interrupt status on the thread
   // so a good pattern is to re-interrupt the thread
   Thread.currentThread().interrupt();
   // but maybe we want to just kill the thread
   return;
} 
```

此外，通常在一个线程中，我们正在循环执行某些任务，因此我们检查中断状态：

```
while (!Thread.currentThread().isInterrupted()) {
    // keep doing our task until we are interrupted
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:06:53.117

对于多线程，其想法是您将一些工作分配给多个线程。典型的例子是有一个线程来执行后台计算或后台操作，例如服务器查询，这将花费相当长的时间而不在​​处理用户界面的主线程中执行该操作。

通过卸载那些可能需要大量时间的操作，您可以防止用户界面看起来卡住。例如，当您在显示的对话框中启动操作时，转到另一个窗口然后返回到显示的对话框，并且当您单击对话框时对话框不会自行更新。

有时需要停止后台活动。在这种情况下，您将使用 Thread.interrupt() 方法来请求线程自行停止。

例如，如果您有一个客户端每秒从服务器获取一次状态信息。后台线程处理与服务器的通信并获取数据。用户界面线程获取数据并更新显示。然后用户按下显示屏上的停止或取消按钮。然后，用户界面线程对后台线程进行中断，以便停止从服务器请求状态信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:07:28.593

在并发编程中，许多程序员得出的结论是他们需要停止一个线程。他们认为有某种`boolean`标志来告诉线程它应该停止是一个好主意。中断标志是通过 Java 标准库提供的布尔机制。

例如：

```
class LongIterativeTask implements Runnable {
    public void run() {
        while (!thread.isInterrupted()) { //while not interrupted
            //do an iteration of a long task
        }
    }
 }

class LongSequentialTask implements Runnable {
    public void run() {
        //do some work
        if (!thread.isInterrupted()) { //check flag before starting long process
            //do a lot of long work that needs to be done in one pass
        }
        // do some stuff to setup for next step
        if (!thread.isInterrupted()) { //check flag before starting long process
            //do the next step of long work that needs to be done in one pass
        }
    }
 } 
```

# hibernate - 休眠搜索是否需要 @DocumentId？

> ID：12377808
> 
> 赞同：6
> 
> 时间：2012-09-11T20:57:15.127
> 
> 标签：hibernate, indexing, hibernate-search

我正在使用 Hibernate Search，文档和书籍说我需要在 id 字段上使用@DocumentId，以便 Hibernate Search 可以知道如何将索引映射到对象。

在我的代码中没有 @DocumentId 的情况下，我的代码似乎工作正常。Hibernate Search 是否变得足够聪明，可以发现 @Id 字段是一个很好的默认值？这会导致不明显的问题吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T20:52:43.717

`@DocumentId`如果您使用的是老式风格的实体与`.hbm.xml`文件映射，则需要。如果您使用该映射方法而忽略注释文档 id，那么在启动时您将看到如下异常：

```
org.hibernate.search.SearchException: No document id in: com.mypackage.MyEntity 
```

但是，如果您正在使用注释并且已经用 注释了主键`@Id`，那么您不必使用`@DocumentId`.

更准确地说，Hibernate Search 文档说`@DocumentId`在使用***JPA***注释时这是可选的。因此，如果您使用的是 Hibernate 3.x 风格的注释，也许您仍然需要使用`@DocumentId`......我从未测试过这个。

无论哪种方式，Hibernate 4.x 都弃用了它自己的映射注释以支持 JPA 样式的注释，***即使***您使用 Hibernate`Session`而不是 JPA`EntityManager`进行查询也是如此。简而言之：`@DocumentId`如果您使用的是 XML 样式的映射，则需要使用……而如果您使用的是注释，则它是可选的，因为此时您无论如何都应该使用 JPA 样式的注释。

# javascript - 使用客户端参数从 javascript 调用 ASP.NET 函数

> ID：12377810
> 
> 赞同：0
> 
> 时间：2012-09-11T20:57:24.447
> 
> 标签：javascript, jquery, asp.net

实际上代码是不言自明的..我正在尝试将一个javascript变量分配给一个表单元素的值，该元素需要由服务器上的一个函数进行格式化..

下面的代码不起作用。它没有获取表单元素，而是假设 $('#formvalue').val() 是我传入的字符串..

```
var myvar = '<%= MyNamespace.MyClass.MyFunction("' + $('#formvalue').val() + '") %>' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:58:05.757

您可以使用 PageMethods 从 JavaScript 调用服务器函数（公共静态 WebMethod）。

服务器端功能

```
[WebMethod]
public static void AbandonSession()
 {
   HttpContext.Current.Session.Abandon();
 } 
```

JavaScript

```
<script language="javascript" type="text/javascript">
  //<![CDATA[
  function HandleClose() 
   {
     alert("Killing the session on the server!!");
      PageMethods.AbandonSession();
   }
   //]]>
</script> 
```

检查这个：[http ://aspalliance.com/1294_CodeSnip_Handle_Browser_Close_Event_on_the_ServerSide.all](http://aspalliance.com/1294_CodeSnip_Handle_Browser_Close_Event_on_the_ServerSide.all)

# php - 尝试使用 PHP 编写 102 个几乎相同的 Excel 公式……并被循环中的构造弄糊涂了

> ID：12377814
> 
> 赞同：0
> 
> 时间：2012-09-11T20:58:06.170
> 
> 标签：php

对于`100`公司，我已经收集了好`102`几天的数据。我需要计算一些平均值，因此我尝试编写一个 php 脚本来`102`为我编写必要的公式，如下所示：

```
=AVERAGE('panel-mv3'!BP2+'panel-mv3'!BP104+'panel-mv3'!BP206 ... +'panel-mv3'!BP8876)
=AVERAGE('panel-mv3'!BP3+'panel-mv3'!BP105+'panel-mv3'!BP207 ... +'panel-mv3'!BP8877)
=AVERAGE('panel-mv3'!BP4+'panel-mv3'!BP106+'panel-mv3'!BP208 ... +'panel-mv3'!BP8878)
...
=AVERAGE('panel-mv3'!BP103+'panel-mv3'!BP205+'panel-mv3'!BP307 ... +'panel-mv3'!BP8977) 
```

如您所见，横向公式需要添加`102`到每个`BP`单元格 ( `2, 104, 206, 308, 410, etc`)。所以点 ( `...`) 表示公式需要用`+'panel-mv3'!BP308+'panel-mv3'!BP410`etc 扩展，直到 `+'panel-mv3'!BP8876`. 在每个连续的公式中，行值移动一个：`BP3, 105, 207, etc...`

我一直在尝试使用下面的代码来完成此操作，但是由于我感到困惑，因此我还没有完成

```
for ($i = 1; $i < 103; $i++) { // 102 dates
  echo "=AVERAGE(";
  for ($j = 1; $j < 101; $j++) { // 100 companies
    echo "'panel-mv3'!BP" . ($i + $j) . "+";
    echo "'panel-mv3'!BP" . ($i + $j) + ($j * 102) . "+";
    echo "'panel-mv3'!BP" . ($i + 1) + (($i * 2) * 102) . ")";
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:41:15.577

```
<?php

for ($i = 2; $i < 104; $i++) { // 102 dates
  echo "=AVERAGE(";
  for ($j = 0; $j <= 99; $j++) { // 100 companies
    echo "'panel-mv3'!BP" . ($i + $j*102);
    if($j!=99) echo "+";
  }
  echo ")\n";
} 
```

这是正在运行的小提琴[http://codepad.org/Z4lEQ74d](http://codepad.org/Z4lEQ74d)但它因超时而死（因为它是一个免费帐户）

# sql - 使用 select 语句作为列之一

> ID：12377816
> 
> 赞同：2
> 
> 时间：2012-09-11T20:58:14.763
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个查询：

```
select 
      index_imsid
    , SUM(weighted_value) sumWeightedValue
    , (
        select 
              top 1 percentof
            , [Plan_Name_OR_Payment_Type] 
        from [v_PlanPerProvider1] 
        where [PLAN_RANK]=1
      ) plan1
from [v_PlanPerProvider1]
where plan_rank between 1 and 10
group by index_imsid
order by 1 
```

我收到了这个错误：

> *Msg 116, Level 16, State 1, Line 3
> 当子查询没有用 EXISTS 引入时，只能在选择列表中指定一个表达式。*

你能帮我理解为什么我会收到这个错误吗？

看来它不喜欢将 select 语句作为列之一？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T21:00:55.103

它不喜欢您在子查询中选择两列。您一次只能选择一列。

```
 select index_imsid, SUM(weighted_value) sumWeightedValue,
    (select top 1 percentof from [v_PlanPerProvider1] where [PLAN_RANK]=1) percentof
    (select top 1 [Plan_Name_OR_Payment_Type] from [v_PlanPerProvider1] where [PLAN_RANK]=1) Plan_Name_OR_Payment_Type
  from [v_PlanPerProvider1]
  where plan_rank between 1 and 10
  group by index_imsid
  order by 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:39:52.430

或者你可以这样做：

```
select  
    t1.index_imsid, SUM(t1.weighted_value) sumWeightedValue, t2.percentof, t2.[Plan_Name_OR_Payment_Type]
from [v_PlanPerProvider1] t1
cross join (select top 1 percentof, [Plan_Name_OR_Payment_Type] from [v_PlanPerProvider1] where [PLAN_RANK]=1) t2 
where t1.plan_rank between 1 and 10 
group by t1.index_imsid, t2.percentof, t2.[Plan_Name_OR_Payment_Type]
order by 1 
```

# javascript - 如何正确进行单元测试数字转换

> ID：12377817
> 
> 赞同：1
> 
> 时间：2012-09-11T20:58:18.320
> 
> 标签：javascript, unit-testing

我试图弄清楚如何正确编写用于数字转换的单元测试以具有 100% 的测试覆盖率并涵盖所有可能性。

比方说，我有一个将整数转换为罗马数字的函数。它的工作范围是 1 到 3999：

```
function integerToRoman(integer) { ... } 
```

我怎样才能确保它确实有效？为 1 到 3999 之间的每个数字编写 4000 个单元测试似乎不是一个好的选择。另一方面，如果我只是选择一些随机数并为它们编写测试，那么我不能 100% 确定该函数是否正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:00:22.170

100% 的覆盖率并不意味着测试每一个可能的输入值。但这意味着你：

1.  覆盖测试每条功能线
2.  覆盖测试正常（通用）输入值（并非所有可能，但如果处理方式不同，则来自不同范围）
3.  涵盖您能想到的所有边缘情况
4.  覆盖各种无效输入值（也包括无输入值）

而已。

# xcode - 如果我向情节提要添加标签，Xcode 构建将失败

> ID：12377824
> 
> 赞同：1
> 
> 时间：2012-09-11T20:59:18.723
> 
> 标签：xcode, storyboard

我的 xcode 4.5 项目似乎出了问题。我收到以下错误：

无法打开文档“MainStoryboard_iPad.storyboard”。操作无法完成。（com.apple.InterfaceBuilder 错误 -1。）

我花了几个小时从 git 恢复并重建屏幕以使事情再次正常运行。但是现在当我将一个简单的标签添加到一个没有 segues 的空 ViewController 时，我得到了错误。有任何想法吗？有没有办法检查各种项目文件中的损坏情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:43:22.660

当情节提要中的对象链接到不再存在的 IBOutlet 时，也可能发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:27:25.453

检查构建设置以检查项目是否正在为 Ipad、Iphone 或两者构建

# css - 换行的CSS宽度/最大宽度？

> ID：12377826
> 
> 赞同：28
> 
> 时间：2012-09-11T20:59:20.123
> 
> 标签：css

```
#tooltip
{ 
    position: absolute;
    width:auto;
    min-width:50px;
    max-width:250px;
    padding:10px;
    background-color:#eee;
    border:1px solid #aaa;
} 
```

基于这种风格，我希望我的工具提示可以缩小或扩大以适应内容，缩小到 50 像素或高达 250 像素。但是，当内容换行到下一行时， max-width 属性似乎覆盖了我的 width 属性。当句尾的单词很长时，这是一个美学问题，看起来它会留下一堆填充物（见截图）。这是正常的行为吗？

![在此处输入图像描述](../Images/f78de6283cf3d7fec13b6a4d6b9021fa.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-11T21:03:14.760

是的，这是正常行为。

浏览器会尝试将您的文本内嵌在框中，直到达到其最大允许宽度 250 像素，然后将任何无法放在第一行的文本换行到下一行和后续行。（如果没有足够的文本达到最大宽度，则会`width: auto`导致框缩小以适合该数量的文本。）

但是，包装后框不会再次缩小以适合文本，因为文本换行不能以这种方式工作。这意味着盒子`width`被计算为 250px，*只是*因为你的 CSS 声明它最多只能是 250px。它不会被计算为某个较小的值，等于换行后的*文本*宽度，然后被`max-width`.

我认为您无法采取任何措施来改变这种行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-12T08:37:06.180

尝试使用其中之一：

```
width: max-content;
width: min-content;
width: available;
width: fit-content; 
```

它们不是 100% 兼容的，但前缀或多或少地解决了这个问题。

来源：[https ://developer.mozilla.org/docs/Web/CSS/width](https://developer.mozilla.org/docs/Web/CSS/width)

# php - 未定义的变量：为 foreach() 提供的产品和无效参数

> ID：12377830
> 
> 赞同：-1
> 
> 时间：2012-09-11T20:59:44.623
> 
> 标签：php

我试图在我的网页上显示我的数据库中的项目，但我得到为 foreach() 提供的无效参数和注意：未定义的变量：产品。我搜索了答案，但在这里找不到答案是我的代码

```
 <?php
         foreach ($products as $product):
      ?>
           <blockquote> 
               <p>
                 <?php echo htmlspecialchars($product, ENT_QUOTES, 'UTF-8');?>
               </p> 
           </blockquote>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:01:00.770

$products 必须存在并且是可以迭代的数组或类！

调试你的前置代码，看看为什么 $products 没有定义！

# ajax - 单选按钮状态未更新

> ID：12377833
> 
> 赞同：0
> 
> 时间：2012-09-11T21:00:01.330
> 
> 标签：ajax, jquery-ui, serialization, radio

我目前正在整理一个带有各种单选按钮的表单，这些单选按钮的状态可以通过 jQuery / Ajax 保存/调用。返回的 Ajax JSON 数据循环通过并根据返回的值设置单选按钮，这一切都很好，但是如果我然后去更改选定的单选按钮并由于某种原因重新保存数据实际单选按钮值get .serialized() 仍然显示以前的 Ajax 设置值，而不是我更改为的新值。这真的很令人困惑，因为我已经尝试了各种其他测试页面来证明这个概念有效并且很好。

有没有其他人见过单选按钮在视觉上得到更新但序列化不接受更改？

[可以在这里](http://www.danthegeek.co.uk/stack/)看到我所看到的演示。从下拉菜单中选择一个名称将启动一个填充单选按钮的 Ajax 调用。如果单击 Save 按钮，您将看到 serialize() 单选按钮数据，该数据在 Ajax 发生后不会更改。

我要疯了，想弄清楚为什么这不能正常工作！非常感谢任何帮助。

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:31:38.140

在花了很多时间试图解决这个问题之后，问题出在我正在做的 Ajax 成功函数中：

```
 $.each(data, function(key,value){
            $("[name='" + key + "']").val(value);
         }); 
```

和

```
 for(var key in data){
            $('input#' +key+'-'+data[key]).prop('checked',true);
        }

        $('input:radio').button("refresh"); 
```

这两种情况同时发生并引起混乱。

要解决我需要将第一个操作更改为

```
 for(var key in data){
                    $('input#' +key+'-'+data[key]).prop('checked',true);
                } 
```

希望这将有助于将来的某人。

担

# mysql - sql过滤结果

> ID：12377835
> 
> 赞同：1
> 
> 时间：2012-09-11T21:00:14.297
> 
> 标签：mysql, sql

我的表名是`ads`这样的：

```
 id    ad_country          ad_gender     ad_birthday
     1     UK                  Male          2012-02-26
     2     sangapor            Female        2011-05-29
     3     UK                  Female        2010-04-12 
```

我有两个下拉选择选项

```
 one  is to select country 
```

和

```
 one is to select year 
```

是否可以进行一个仿射结果的 sql 查询以获得：

每个国家有多少男性被选中，也被选中的年份。每个国家和每年有多少女性被选中也thx

我试过这个 sql 但没有用。

```
 SELECT COUNT(ad_gender) AS male FROM ads  WHERE '".$_POST['country']."' = ad_country  AND ad_gender = Male AND '".$_POST['year']."' = '".$row2['ye']."' 
```

注意 $row2['ye'] 来自 $sql2 如下

```
 SELECT ad_birthday,(substr(ad_birthday , 1, 4)) AS ye FROM ads 
```

编辑了我的帖子，因为我给的代码不多，这是我的新问题， [我的新帖子](https://stackoverflow.com/questions/12394474/filtering-results-by-two-select-options)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T00:51:20.233

我认为使用`group by`and最简单`having`的方法是`case`在查询中使用。

```
SELECT  SUM(CASE WHEN ad_gender = 'Male' THEN 1 ELSE 0 END) TotalMale,
        SUM(CASE WHEN ad_gender = 'Female' THEN 1 ELSE 0 END) TotalFemale
FROM    ads
WHERE   ad_country = 'countryHere' AND
        YEAR(DATE(ad_birthday)) = yearHere 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e11b3/1)

还有一件事，永远不要将用户的值直接传递给您的 sql 语句，因为它可能会受到**[SQL Injection](http://bobby-tables.com/)**的攻击。使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

     $query = "    SELECT   SUM(CASE WHEN ad_gender = 'Male' THEN 1 ELSE 0 END) TotalMale,
                           SUM(CASE WHEN ad_gender = 'Female' THEN 1 ELSE 0 END) TotalFemale
                   FROM     ads
                   WHERE    ad_country = ? AND
                            YEAR(DATE(ad_birthday)) = ?"

    $country = 'UK';
    $year = 2012;
    $dbh = new PDO('mysql:host=localhost;dbname=test;charset=utf8', $user, $pass);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $stmt = $dbh->prepare($query);
    $stmt->bindParam(1, $country);
    $stmt->bindParam(2, $year);
    if ($stmt->execute()) 
    {
         while ($row = $stmt->fetch()) 
         {
              print_r($row);
         }
    }

?> 
```

这将允许您使用单引号插入记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:16:37.800

```
select ad_country, count(case when ad_gender = 'male' then 1 end) male, 
count(case when ad_gender = 'female' then 1 end) female, year(ad_birthday) year
from ads
group by ad_country, year(ad_birthday) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:18:33.663

这应该是一个非常简单的查询来执行，所以我想知道为什么它不适合你。你试过什么了？

```
select
  ad_country as country,
  YEAR(ad_birthday) as year,
  ad_gender as gender,
  count(id) as count
from ads
where ad_country in ('/* your country params here*/')
group by ad_country, year, ad_gender
having YEAR(ad_birthday) in ('/* your year params here*/') 
```

您不需要第二个 SQL 查询来将日期部分从表中拉出 - 为此使用[内置的 SQL 日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

此外，这是题外话，但您发布的代码看起来像内联 SQL。请改用[参数化查询](http://www.unixwiz.net/techtips/sql-injection.html)，否则您很容易受到 SQL 注入攻击。

# java - Android用正则表达式替换

> ID：12377838
> 
> 赞同：10
> 
> 时间：2012-09-11T21:00:26.137
> 
> 标签：java, android, regex

我在 Android 中有一个字符串。我想用一些html包装所有4个或更多连续数字的实例。我想这将通过正则表达式完成，但我很难让最基本的正则表达式工作。

有人可以帮我弄这个吗？

我想改：

```
var input = "My phone is 1234567890 and my office is 7894561230"; 
```

至

```
var output = "My phone is <u>1234567890</u> and my office is <u>7894561230</u>"; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-11T21:01:56.040

这将做到：

```
String input = "My phone is 1234567890 and my office is 7894561230";
String regex = "\\d{4,}";
String output = input.replaceAll(regex, "<u>$0</u>");
System.out.println(output); 
```

# ios - IOS MDM 拒绝签入请求不起作用

> ID：12377845
> 
> 赞同：1
> 
> 时间：2012-09-11T21:00:43.603
> 
> 标签：ios, mdm

我有一个为 IOS 运行的自定义 mdm 解决方案。

在注册期间，我使用 HTTP 基本身份验证来传递用户名和密码，以针对我们的 db/AD 进行验证。

如果用户被拒绝访问，我会发送 401。

但是，在 IOS 端，它会弹出一个错误，提示“由于未知错误，Safari 无法安装配置文件”。似乎是一个非常糟糕的错误，我希望它说访问被拒绝。

还有一个问题是 safari 决定缓存使用的凭据，所以除非我清除所有 cookie/缓存数据，否则我没有机会再次重新输入用户/密码。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:18:07.050

我的代码似乎有问题。

我已经发送了 401，但实际上规范要求也发送 WWW-Authenticate 标头。加上它，它现在可以正常工作了。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-17T19:36:08.797

您是否考虑过使用 AirWatch 等经过更广泛测试的 MDM 解决方案？此类解决方案与 AD 集成，是您评估的绝佳选择。

# xargs - 通过 CURL 为多个文件下载提供唯一的文件名

> ID：12377853
> 
> 赞同：1
> 
> 时间：2012-09-11T21:01:35.357
> 
> 标签：xargs

我正在运行这个：

```
cat Human_List.txt | xargs -I "%" curl -O http://www.pdb.org/pdb/files/"%".pdb 
```

如您所见，它从我的 Human_List.txt 中获取每个文件名并将其循环到 URL 中。作为保存选项，我有 -O，它获取 URL 名称并使用 Human_List 中的行名保存它。

我需要的是用 Human_"foobar".pdb 文件名保存每个 .pdb 文件，这样我就可以区分不同的列表下载。否则我无法区分哪个下载来自哪个列表。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:30:37.463

```
$ while read LINE; 
    do curl -o Human_$LINE.pdb http://www.pdb.org/pdb/files/$LINE.pdb;
    done < Human_List.txt 
```

# javascript - 删除所有 jQuery 事件处理程序

> ID：12377854
> 
> 赞同：2
> 
> 时间：2012-09-11T21:01:45.133
> 
> 标签：javascript, jquery, jquery-mobile

我正在创建一个 jQuery Mobile Web 应用程序，它会加载一些页面。

例如，`a.html`是我的主页。它可能会调用`b1.html`, `b2.html`,..., `b100.html`（用户可以点击其中一个按钮）。（页面加载了 jQuery Mobile 的 ajax 导航功能）

并且每一页都有一些事件，每一`b[i].html`页`id`s和很多东西都是一样的`b[i].html`。但关键是，在任何时候，只有其中一个可能在 DOM 中。所以不会有`id`冲突之类的。

## 问题

问题是**事件的冲突**。当用户返回`a.html`from`b[i].html`时，HTML 将被删除，但**事件将保留。**如果我先去`b[i].html`，然后再回来`a.html`再去，这会引起很多问题`b[j].html`。我的意思是，`b[j].html`将无法正常工作... :(

## 我试过的

我已将其放入`a.html`，以删除所有事件：

```
$("#mainpage").off("pagebeforeshow").on("pagebeforeshow",function() {
    $("*").not("#mainpage").off();
    //Other initialization codes...
}); 
```

但是，问题没有解决...

（`mainpage`是 的`data-role="page"`id `a.html`）

## 例子

例如，我在每个中都有这个`b[i].html`：

```
$(window).resize(function () {
    alert("Resized");
}); 
```

在开始时（在`a.html`），如果我调整窗口大小，将没有警报，但是在访问`b[i].html`然后返回之后`a.html`，如果我调整窗口大小，我会看到警报，即使使用那行代码（*我已经尝试过*部分。）...

* * *

`a.html`那么，当用户返回from时，如何删除这些事件处理程序`b[i].html`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:41:00.483

如果你使用 jQuery Mobile，dom 中可能同时存在多个上述页面，导致非唯一 id 冲突。

我会放弃将 js 放在单个页面上，而是从主页或通过脚本加载系统（如 require.js）完成。然后通过文档中的委派完成所有事件。显然，这不适用于 window.resize()，但无论如何都不需要委托。

*“你能再解释一下吗？”*

基本上，如果您在子页面上包含脚本，则需要对每个页面进行设置和拆卸。setup 添加事件，而 teardown 删除它们。如果您改为使用单个全局脚本，该脚本使用文档中的事件委托添加所有事件，则所有页面都应该工作。显然，全局脚本在复杂站点上可能会变得非常大，因此您可以改为使用 require.js 来加载根据需要执行相同操作的 js，从而防止它多次加载相同的依赖项。

至于删除所有事件，我从未尝试过，但你可以使用`$("*").off()`吗？根据文档，它应该可以工作。我不确定它将如何影响 jQuery 移动。要删除文档和/或窗口上的事件，您必须手动执行，因为`$("*")`不会选择它们。

`$(document).on("vmousemove","#link",func)`是您从文档中委派事件的方式。

# java - 如何在 IntelliJ IDEA 中重新格式化项目中的所有文件？

> ID：12377860
> 
> 赞同：3
> 
> 时间：2012-09-11T21:02:02.060
> 
> 标签：java, intellij-idea

重新格式化代码是一个非常有用的功能，但我有一个大项目需要重新格式化所有文件（大约 100 个）。如何在不打开每个文件并重新格式化的情况下做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T21:03:35.867

右键单击项目的根文件夹，选择“重新格式化代码...”，然后单击运行。您也可以按 Ctrl+Alt+L。

# c# - MVC4 Ajax 不呈现 ActionLink

> ID：12377862
> 
> 赞同：0
> 
> 时间：2012-09-11T21:02:10.520
> 
> 标签：c#, .net, asp.net-mvc-4

我来自 webforms 背景，此时我对 MVC4 感到非常沮丧。我一直在看例子，看视频，谷歌搜索等等。似乎没有任何效果，我即将认输，但是，这个网站非常有帮助，所以我会看看我是否能得到一些帮助。

我想做的是：

1.  使用 jQuery 选项卡（easytabs）创建一个页面（顺便说一句）
2.  在选项卡单击事件上，我希望它通过 ajax 重新加载选项卡

在网络表单中，我会在早上 8 点完成这项工作。我现在被困在这个和下午 5 点。沮丧到难以置信。

我遵循了 MVC4 网站上的网络视频教程，这个可爱的例子是在 Razor 中，我不想使用它，但是，我仍然遵循它来获取知识：

[http://www.asp.net/mvc/overview/javascript](http://www.asp.net/mvc/overview/javascript)
-> 'Javascript 和 Ajax'
-> [http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-ajax&mode= live&clip=0&course=aspdotnet-mvc3-intro](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-ajax&mode=live&clip=0&course=aspdotnet-mvc3-intro)

在我的 easytabs 中，在 HTML 中，我将我的 html 定义为：

```
<li class="tab"><a href="#tabs-users" class="light heavy">Manage Sections</a></li> 
```

因此，在观看视频之后，我尝试通过 ajax 助手创建和锚定带有 ajax 属性的标签来替换这个 HTML：

```
 <% Ajax.ActionLink("Manage Sections", "tabsUsers", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "tabs-users", InsertionMode = InsertionMode.Replace }); %> 
```

这什么都没有。它不会在页面上呈现它。所以，我去打猎，发现我需要以下东西：

```
<%: Scripts.Render("~/bundles/jqueryval") %> 
```

该捆绑包包括“ **jquery.unobtrusive-ajax.min.js** ”，并且在 web.config 中我有以下设置：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

依然没有。

**原始 HTML**

```
<div id="tab-container" class="tab-container">
    <ul class="etabs">
        <li class="tab upper first"><a href="#tabs-users" class="light heavy">Manage Users</a></li>
        <li class="tab upper"><a href="#tabs-groups" class="light heavy">Manage Sections</a></li>
    </ul>
    <div id="tabs-users" class="normal light clearfix">
        Users
    </div>
    <div id="tabs-groups" class="normal light clearfix">
        Groups
    </div>
</div> 
```

我有一种感觉 Ajax.ActionLink 不喜欢在那里呈现锚标记，但我不知道为什么。

**控制器**

```
 [HttpGet]
    public PartialViewResult tabsUsers()
    {
        IEnumerable<SelectListItem> items = UserManager.GetUsers()
            .Select(c => new SelectListItem
            {
                Value = c.UserID.ToString(),
                Text = c.FirstName + c.LastName
            });

        return PartialView("UsersPartial", items);
    } 
```

**用户部分视图**

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<LMS.Data.User>>" %>

<table>
    <tr>
        <th>
            <%: Html.DisplayNameFor(model => model.UserName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.FirstName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.LastName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.Password) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.Email) %>
        </th>
        <th></th>
    </tr>

<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: Html.DisplayFor(modelItem => item.UserName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.FirstName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.LastName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Password) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Email) %>
        </td>
        <td>
            <%: Html.ActionLink("Edit", "Edit", new { id=item.UserID }) %> |
            <%: Html.ActionLink("Details", "Details", new { id=item.UserID }) %> |
            <%: Html.ActionLink("Delete", "Delete", new { id=item.UserID }) %>
        </td>
    </tr>
<% } %>

</table> 
```

**运行时呈现的脚本部分**

```
 <script src="/Scripts/jquery-1.6.2.js" type="text/javascript"></script>

        <script src="/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>

        <script src="/Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>

        <script src="/Scripts/jquery.easytabs.min.js" type="text/javascript"></script>
<script src="/Scripts/script.js" type="text/javascript"></script> 
```

有任何想法吗？？我真的很想在这里给 MVC 一个有价值的机会，但这对我来说不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:06:19.840

> 这什么都没有。它不会在页面上呈现它。

这是因为正确的语法如下：

```
<%= Ajax.ActionLink("Manage Sections", "tabsUsers", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "tabs-users", InsertionMode = InsertionMode.Replace }) %> 
```

作为一个长时间的 WebForms 用户在早上 8 点完成工作，您应该知道它`<%=`用于将结果输出到响应，而`<%`最后`;`只是在服务器上执行命令而不输出任何内容。

# python - Selenium webcrawling 组合框

> ID：12377864
> 
> 赞同：0
> 
> 时间：2012-09-11T21:02:14.057
> 
> 标签：python, selenium, combobox

我正在尝试单击 python 中的 java 脚本组合框，但是如果我正常执行此操作，它会给我一个错误，说组合框已隐藏，我以编程方式等待组合框出现但它没有出现。组合框中的这个选项是一个子菜单，但是，如果我只从真实菜单中选择一个选项，它可以工作，但不能与子菜单选项一起使用。这是网站，[https:](https://mbsdisclosure.fanniemae.com/PoolTalk2/index.html) //mbsdisclosure.fanniemae.com/PoolTalk2/index.html > Advanced Search > #then the combo box I am looking for the sub menu option for Preliminary Mega > Preliminary Mega: Fannie Mae/Ginnie Mae支持可调利率。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:19:30.970

Selenium won't be able to click as element you want to select is considered to be invisible(inactive). So the only way(imho) to use js to resolve this issue. That worked for me in java:

```
 @Test
    public void neeededDropdownSelect() throws InterruptedException {
        driver.get("https://mbsdisclosure.fanniemae.com/PoolTalk2/index.html");
          jsClickOnElement("li#tab_1>a>span");
        WebElement dropdownMenu = fluentWait(By.cssSelector("span#asSelectedSecType"));
        dropdownMenu.click();

        jsClickOnElement("div[class=\"fg-menu-container ui-widget ui-widget-content ui-corner-all fg-menu-flyout\"] ul[class=\"fg-menu ui-corner-all\"]>li>a[id=\"MEGA_INTERIM\"]");
        jsClickOnElement("div[class=\"fg-menu-container ui-widget ui-widget-content ui-corner-all fg-menu-flyout\"] ul[class=\"fg-menu ui-corner-all\"]>li>ul.ui-corner-all a[id=\"MEGA_INTERIM_ARM\"]");

    }

  public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              }     ;

    public void jsClickOnElement(String cssSel){
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSel+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());

    } 
```

Hope this helps you)

# subdomain - 如何在 Plesk 11 中创建子域的域别名？

> ID：12377865
> 
> 赞同：2
> 
> 时间：2012-09-11T21:02:13.723
> 
> 标签：subdomain, plesk, domain-aliasing

我们目前在 Plesk 11 中设置了 sites.adomain.com，并希望使用 bdomain.com 作为 sites.adomain.com 的别名。旧方法似乎不起作用，它是：

```
vi /var/www/vhost/adomain.com/subdomains/sites/conf/vhost.conf
contents:

ServerAlias "bdomain.com"
ServerAlias "www.bdomain.com" 
```

有谁知道如何为新版本的 Plesk 做这件事？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:56:08.600

尝试`/var/www/vhost/sites.adomain.com/conf/vhost.conf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T08:34:51.493

将您的`ServerAlias`指令插入一个名为：

`/var/www/vhosts/system/yourdomain.com/conf/vhost.conf`

然后你必须运行它才能使更改生效：

`/usr/local/psa/admin/sbin/websrvmng -u --vhost-name=yourdomain.com`

简单地重新启动 httpd 不会使其工作。

# php - 基于 $get 值的 mysql 连接

> ID：12377869
> 
> 赞同：0
> 
> 时间：2012-09-11T21:02:21.773
> 
> 标签：php, mysql, join

我有 2 张桌子。

联系方式和投诉。

联系人有 3 列：

```
contact_id, contact_name, score 
```

投诉有 4 列：

```
complaint_id, contact_id, score_deduction, complaint_type 
```

我能够`$_GET['complaint_id']`从上一页获得价值。

我想要做的是删除具有该特定投诉 ID 的记录并获取投诉分数扣除的值并将其添加回联系人分数。

我已经花了几个小时，似乎无法弄清楚。

请帮忙。

```
if (isset($_GET['complaint_id'])) {
record_set('complaints',"SELECT * FROM add_complaints WHERE complaint_id = ".$_GET['complaint_id']."");
$contact_id = $row_complaints['contact_id'];
record_set('contact',"SELECT * FROM contacts WHERE contact_id = $contact_id");
$score = $row_contact['contact_score'];
echo $score;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:31:06.610

您可以将其组合成一个查询。

```
SELECT * FROM add_complaints AS ac
INNER JOIN contacts AS c on ac.contact_id = c.contact_id
WHERE ac.complaint_id = ? 
```

我不熟悉您用来进行数据库查询的任何内容。但我假设您会知道如何获取联系人 ID、当前分数和扣分值。并从那里进行更新查询和删除查询。

如果您想变得更花哨，只需在适当的位置更新联系人记录，而无需选择您也可以做的任何事情：

```
UPDATE add_complaints AS ac
INNER JOIN contacts AS c on ac.contact_id = c.contact_id
SET c.score = c.score - ac.score_deduction
WHERE ac.complaint_id = ? 
```

然后删除投诉

```
DELETE FROM add_complaints WHERE complaint_id = ? 
```

# plugins - Pidgin API 中的好友选择信号

> ID：12377875
> 
> 赞同：0
> 
> 时间：2012-09-11T21:02:34.170
> 
> 标签：plugins, pidgin

我正在为 Pidgin 编写一个插件，我需要捕捉一个特殊事件 - 当您在 Pidgin 的“好友列表”中单击/选择“好友”时，我需要做出反应。

拜托，伙计们，你知道是否有这样的信号（我想这是应该列出的地方，如果它存在的话 - [https://developer.pidgin.im/doxygen/2.5.2/html/blist-signals.html](https://developer.pidgin.im/doxygen/2.5.2/html/blist-signals.html) )? 如果没有，你能想象一些解决方法吗？

如果没有其他选择，我会尝试直接修改 Pidgin 代码，这对我来说很难，我对 C 很陌生，而且 Pidgin 项目也不小，但我对它足够感兴趣，所以为什么不:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T00:50:14.047

没有 pidgin 级别的信号。要抓住这一点，您需要编写一个 GTK+ 插件，并且您需要连接到好友列表树视图小部件本身上的适当信号。

# php - 使用 php 列表加速 jquery 自动完成

> ID：12377876
> 
> 赞同：1
> 
> 时间：2012-09-11T21:02:36.757
> 
> 标签：php, jquery, mysql, autocomplete

嗨，我遇到了一个问题。我已经实现了 jquerys 著名的自动完成，我正在从数据库中创建一个列表（很长）以输出到自动完成字段中。但是在列表中找到正确的值需要很长时间。有谁知道我可以加快速度的方法？？？这是我的jQuery：

```
<script>
    $(function() {function log( message ) {$( "#destId" ).val( message );}
        $( "#destinations" ).autocomplete({
            source: "destinos.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "" + ui.item.id :
                    "" + this.value );}});});
    </script> 
```

这是destinos.php：

```
//connect to database
include 'php/dbconn.php';
$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends

$qstring = "SELECT Destination as value, DestinationId as id FROM DestinationId WHERE Destination LIKE '%".$term."%'";
//query the database for entries containing the term
    $result = mysql_query($qstring);
//loop through the retrieved values   
    while ($row = mysql_fetch_array($result,MYSQL_ASSOC))
    {
            $row['value']=htmlentities(stripslashes($row['value']));
            $row['id']=htmlentities(stripslashes($row['id']));
            $row_set[] = $row;//build an array
    }
    echo json_encode($row_set);//format the array into json data 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:10:27.780

You most likely need to speed up your database query. You'll have to do a couple of things to do that.

1.  Make sure your `Destination` field has an index on it.
2.  Unless you absolutely must match from the middle of the string, drop the leading `%` from your LIKE query to enable the index to be used. MySQL cannot effectively use the index with the leading wildcard.
3.  If you must leave the leading `%` then set `minLength` to 3 in your jQuery. This will allow MySQL to use an optimizing algorithm on the pattern.

Source: [http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:09:54.913

我将开始查看数据库方面。

首先，您需要确保在`Destination`.

其次，您应该考虑使用`LIMIT`10 或 20 行。在自动完成中，在大多数情况下，您不需要一次显示那么多结果。随着用户继续快速打字，匹配计数将减少。

Third, you should use proper mysql escape on `$term` variable before querying with it.

The rest looks pretty straightforward.

# url - Joomla URL 重定向？

> ID：12377877
> 
> 赞同：1
> 
> 时间：2012-09-11T21:02:41.360
> 
> 标签：url, joomla

我正在将一个旧站点移动到一个 Joomla 站点，当我重新创建站点时，页面 URL 发生了变化。

旧网址：

[http://www.wengerswanderers.com/bransontour.html](http://www.wengerswanderers.com/bransontour.html)

新网址：

[http://www.wengerswanderers.com/branson-tour](http://www.wengerswanderers.com/branson-tour)

有没有办法将旧 URL (www.wengerswanderers.com/bransontour.html) 重定向到新 URL (www.wengerswanderers.com/branson-tour)，这样他们就不会失去在搜索引擎中的排名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:42:58.240

使用 com_redirect。您可以进入并手动输入 from 和 to 以获取您想要转发的任意数量的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:10:12.370

你可以使用`.htaccess`：

```
RewriteEngine On
RewriteRule ^bransontour.html http://www.wengerswanderers.com/branson-tour [R=301] 
```

在[这里](http://www.webconfs.com/how-to-redirect-a-webpage.php)查看重定向 301 的含义。

尽管如此，Redirect 301 似乎仍然不可避免地会[造成一些 PR 损失。](http://www.marketingpilgrim.com/2010/03/google-confirms-301-redirects-result-in-pagerank-loss.html)但我认为没有最好的解决方案。

# solr - solr 在 contrib 目录中找不到 ICUFoldingFilter

> ID：12377878
> 
> 赞同：3
> 
> 时间：2012-09-11T21:02:43.323
> 
> 标签：solr

我正在尝试设置多核 solr 安装，但似乎无法正确配置 solr 以加载所需的类。

运行的输出`java -jar start.jar`包括：

```
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrResourceLoader replaceClassLoader
INFO: Adding 'file:/software/solr/solr/contrib/analysis-extras/lib/icu4j-4.8.1.1.jar' to classloader
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrResourceLoader replaceClassLoader
INFO: Adding 'file:/software/solr/solr/contrib/analysis-extras/lucene-libs/lucene-icu-3.6.1.jar' to classloader
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrResourceLoader replaceClassLoader
INFO: Adding 'file:/software/solr/solr/contrib/analysis-extras/lucene-libs/lucene-smartcn-3.6.1.jar' to classloader
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrResourceLoader replaceClassLoader
INFO: Adding 'file:/software/solr/solr/contrib/analysis-extras/lucene-libs/lucene-stempel-3.6.1.jar' to classloader
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrConfig <init>
WARNING: <indexDefaults> and <mainIndex> configuration sections are deprecated (but still work). Please use <indexConfig> instead.
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrConfig <init>
INFO: Using Lucene MatchVersion: LUCENE_36
Sep 11, 2012 4:23:16 PM org.apache.solr.core.SolrConfig <init>
INFO: Loaded SolrConfig: solrconfig.xml
Sep 11, 2012 4:23:16 PM org.apache.solr.schema.IndexSchema readSchema
INFO: Reading Solr Schema
... snip ...
Sep 11, 2012 4:23:16 PM org.apache.solr.common.SolrException log
SEVERE: java.lang.NoClassDefFoundError: org/apache/lucene/analysis/icu/ICUFoldingFilter
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:388)
    at org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:409)
    at org.apache.solr.util.plugin.AbstractPluginLoader.create(AbstractPluginLoader.java:83) 
```

`org/apache/lucene/analysis/icu/ICUFoldingFactory`存在于`lucene-icu-3.6.1.jar`为什么后来找不到？

我的目录结构是：

```
|-solr
|---contrib
|-----analysis-extras
|-------lib
|-------lucene-libs
|-----velocity
|-------lib
|---cores
|-----core0
|-------conf
|-------data
|---------index
|-----core1
|-------conf
|-------data
|-----core2
|-------conf
|-------data
|---------index
|---lib
|-----solrj-lib
|-------optional 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:53:11.543

我发现我需要将以下 jars 放入每个实例目录的 lib 中：

apache-solr-analysis-extras-3.6.2.jar
lucene-icu-3.6.2.jar
lucene-stempel-3.6.2.jar
icu4j-4.8.1.1.jar
lucene-smartcn-3.6.2.jar
normalizer.jar UnicodeNormalizeFilter.jar

我的主要问题是我没有意识到我需要 apache-solr-analysis-extras-xyxjar。该文件位于 apache-solr-3.6.2/dist 中。接下来的 4 个来自 apache-solr-3.6.2/contrib/analysis-extras。（我有点认为 normalizer.jar 和 UnicodeNormalizerFilter.jar 是不需要的。）

然后在 schema.xml 我需要使用：

```
 <filter class="solr.ICUFoldingFilterFactory"/> 
```

...不是 org.apache.lucene.etc 包名。我尝试了那个 org.apache.lucene.analysis 包名，但是没有用。我发现这很奇怪，但它在文档中是这样的。[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ICUTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ICUTokenizerFactory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T21:19:02.753

另一种可能不太费力的方法是在您用于 -Dsolr.solr.home 的任何目录下创建一个 lib 目录（在您的情况下，我猜这将是“核心”）。我正在使用示例安装，并在多核下创建了 lib 并在那里复制了分析 jar。当我启动 solr 时`java -Dsolr.solr.home=multicore -jar start.jar`

我在日志中看到以下内容，并且我定义的内核启动时没有问题：

```
2471 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/icu4j-49.1.jar' to classloader
2471 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/lucene-analyzers-icu-4.6.1.jar' to classloader
2472 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/lucene-analyzers-morfologik-4.6.1.jar' to classloader
2472 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/lucene-analyzers-smartcn-4.6.1.jar' to classloader
2473 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/lucene-analyzers-stempel-4.6.1.jar' to classloader
2474 [main] INFO  org.apache.solr.core.SolrResourceLoader  Adding 'file:/C:/Solr/solr-4.6.1/example/multicore/lib/solr-analysis-extras-4.6.1.jar' to classloader 
```

# wcf - 在工作流中动态解析端点绑定

> ID：12377879
> 
> 赞同：2
> 
> 时间：2012-09-11T21:02:46.470
> 
> 标签：wcf, workflow-foundation-4, wcf-endpoint

[我在 MSDN 上遇到了与这个问题](http://social.msdn.microsoft.com/Forums/br/wfprerelease/thread/860421ae-ab6a-4694-9977-bb9a485e50c6)相同的问题，但我不明白解决方案，因为我仍然不清楚 Roman Kiss 的解决方案是否会在同时执行单个工作流实例时正确替换端点地址。

当内部`Send`活动被安排由具有特定端点地址的一个线程执行时，该地址不会被另一个调度具有不同端点地址的相同活动的线程覆盖吗？如果我弄错了，请纠正我，但我认为它会，因为它`Send.Endpoint`是一个常规属性，它反对`InArgument<Endpoint>`绑定到任何当前工作流执行上下文。

有人可以对此进行更多说明吗？

**更新**

我测试了 Roman Kiss 提供的解决方案，结果发现它在我的场景中没有按预期工作。我修改`Execute`方法如下：

```
protected override void Execute(NativeActivityContext context)
{
    Thread.Sleep(Address.Get(context).EndsWith("1") ? 1000 : 0);

    Body.Endpoint.Binding = GetBinding(Binding.Get(context));
    Body.Endpoint.AddressUri = new Uri(Address.Get(context));

    Thread.Sleep(Address.Get(context).EndsWith("1") ? 0 : 3000);
    var address = Address.Get(context) + " => " + Body.Endpoint.AddressUri;
    Console.WriteLine(address);
    Thread.Sleep(10000); 

    context.ScheduleActivity(Body);
} 
```

跑了这个测试：

```
static void Main(string[] args)
{
    // Workflow1 is just a SendScope wrapped around by a Sequence with single Address input argument exposed
    var workflow = new Workflow1();
    Task.WaitAll(
        Task.Run(() => WorkflowInvoker.Invoke(workflow, new Dictionary<string, object> { { "Address", @"http://localhost/1" } })),
        Task.Run(() => WorkflowInvoker.Invoke(workflow, new Dictionary<string, object> { { "Address", @"http://localhost/2" } })));

    Console.ReadLine();
} 
```

我得到的结果是：

`http://localhost/1 => http://localhost/1`

**`http://localhost/2 => http://localhost/1`**

问题仍然悬而未决：如何`Send`在运行时动态分配我的活动的端点地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:37:23.907

这将如图所示工作，因为**工厂**创建了一个**新** 活动，因此当使用该方法设置该活动时，它正在正确设置该活动实例上的绑定。`Send`**`CacheMetadata``Send`**

 **# 包括内容 Incase 链接失效

```
[ContentProperty("Body")]
public class SendScope : NativeActivity
{
    [DefaultValue((string)null)]
    [RequiredArgument]
    public InArgument<string> Binding { get; set; }

    [DefaultValue((string)null)]
    [RequiredArgument]
    public InArgument<string> Address { get; set; }

    [Browsable(false)]
    public Send Body { get; set; }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        if (this.Body == null || this.Body.EndpointAddress != null)
        {
            metadata.AddValidationError("Error ...");
            return;
        }
        this.Body.Endpoint = new Endpoint()
        {
            AddressUri = new Uri("http://localhost/"),
            Binding = new BasicHttpBinding(),
            ServiceContractName = this.Body.ServiceContractName
        };
        metadata.AddChild(this.Body);
        base.CacheMetadata(metadata);
    }

    protected override void Execute(NativeActivityContext context)
    {
        this.Body.Endpoint.Binding = GetBinding(this.Binding.Get(context));
        this.Body.Endpoint.AddressUri = new Uri(this.Address.Get(context));
        context.ScheduleActivity(Body);
    }

    private System.ServiceModel.Channels.Binding GetBinding(string binding)
    {
        if (binding == "basicHttpBinding")
            return new BasicHttpBinding();
        //else ... others bindings
        return null;
    }
}

public class SendScopeFactory : IActivityTemplateFactory
{
    public Activity Create(DependencyObject target)
    {
        return new SendScope()
        {
            DisplayName = "SendScope",
            Body = new Send()
            {
                Action = "*",
                OperationName = "ProcessMessage",
                ServiceContractName = "IGenericContract",
            }
        };
    }
} 
```

1.  根据您的属性（例如 Binding、Address、Security 等）创建自定义本机活动，用于在运行时设置 Send.Endpoint 属性。
2.  为此 SendScope 活动创建设计器，类似于 CorrelationScope
3.  创建 SendScopeFactory - 请参阅上面的代码片段。**

# c# - .GroupBy() 是否保证其分组的顺序？

> ID：12377891
> 
> 赞同：27
> 
> 时间：2012-09-11T21:04:01.670
> 
> 标签：c#, linq, group-by, linq-to-objects, ilookup

假设我有一个（有序的）动物序列：

```
鹰
大象
狼蛛
龟鳖
老虎

```

我按第一个字母分组：

```
Animals.GroupBy(animal => animal.First()) 
```

结果序列中 s的元素是否`IGrouping`与输入序列的顺序相同？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-11T21:06:24.087

是的，它们将是：[GroupBy (MSDN)](http://msdn.microsoft.com/en-us/library/bb534501)。

> IGrouping<TKey, TElement> 对象的生成顺序基于源中生成每个 IGrouping<TKey, TElement> 的第一个键的元素的顺序。分组中的元素按照它们在源中出现的顺序产生。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T21:06:30.453

引用 GroupBy 的[MSDN 页面](http://msdn.microsoft.com/en-us/library/bb534501.aspx)：

> 对象的`IGrouping<TKey, TElement>`生成顺序基于 source 中生成 each 的第一个键的元素的顺序`IGrouping<TKey, TElement>`。分组中的元素按照它们在源中出现的顺序产生。

因此，您的示例将导致：

> 1.  第 1 组
>     
>     
>     *   鹰
>     *   大象
> 2.  第 2 组
>     
>     
>     *   狼蛛
>     *   龟鳖
>     *   老虎

当然，这只适用于`IEnumerable<T>`实现。`IQueryable<T>`实现没有这样的保证。

# perl - 根据第一列合并两个文件并为每个键返回多个值

> ID：12377892
> 
> 赞同：0
> 
> 时间：2012-09-11T21:04:09.567
> 
> 标签：perl

我对 Perl 相当陌生，所以希望这有一个快速的解决方案。

我一直在尝试根据一个键组合两个文件。问题是有多个值而不是它返回的一个。有没有办法循环遍历哈希以获得它可能获得的 1-10 个值？

例子：

文件输入 1：

```
12345|AA|BB|CC
23456|DD|EE|FF 
```

文件输入2：

```
12345|A|B|C
12345|D|E|F
12345|G|H|I
23456|J|K|L
23456|M|N|O
32342|P|Q|R 
```

我将最后一个放入的原因是因为第二个文件有很多我不想要的值，但文件 1 我想要所有值。我想要的结果是这样的：

想要的输出：

```
12345|AA|BB|CC|A|B|C
12345|AA|BB|CC|D|E|F
12345|AA|BB|CC|G|H|I
23456|DD|EE|FF|J|K|L
23456|DD|EE|FF|M|N|O 
```

附件是我目前使用的代码。它给出如下输出：

我得到的输出：

```
12345|AA|BB|CC|A|B|C
23456|DD|EE|FF|J|K|L 
```

到目前为止我的代码：

```
#use strict; 
#use warnings; 

open file1, "<FILE1.txt"; 
open file2, "<FILE2.txt"; 

while(<file2>){

    my($line) = $_; 
    chomp $line; 
    my($key, $value1, $value2, $value3) = $line =~ /(.+)\|(.+)\|(.+)\|(.+)/; 
    $value4 = "$value1|$value2|$value3"; 
    $file2Hash{$key} = $value4; 
} 

while(<file1>){ 

    my ($line) = $_; 
    chomp $line; 
    my($key, $value1, $value2, $value3) = $line =~/(.+)\|(.+)\|(.+)\|(.+)/; 

    if (exists $file2Hash{$key}) {

        print $line."|".$file2Hash{$key}."\n";
    } 
    else {
        print $line."\n";
    } 
} 
```

感谢您提供的任何帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:13:33.260

你的整体想法是合理的。但是在 file2 中，如果遇到已经定义的键，则用新值覆盖它。为了解决这个问题，我们在哈希中存储了一个数组（-ref）。

所以在你的第一个循环中，我们这样做：

```
push @{$file2Hash{$key}}, $value4; 
```

这`@{...}`只是数组取消引用语法。

在您的第二个循环中，我们执行以下操作：

```
if (exists $file2Hash{$key}){
  foreach my $second_value (@{$file2Hash{$key}}) {
    print "$line|$second_value\n";
  }
} else {
  print $line."\n";
} 
```

除此之外，您可能需要声明`%file2Hash`with`my`以便重新激活`strict`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:12:43.430

哈希中的键必须是唯一的。如果 file1 中的键是唯一的，则使用 file1 创建散列。如果任一文件中的键都不唯一，则必须使用更复杂的数据结构：数组散列，即在每个唯一键处存储多个值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T21:26:46.590

我假设 FILE1.txt 中的每个键都是唯一的，并且每个唯一键在 FILE2.txt 中至少有一个对应的行。

然后，您的方法非常接近您的需要，您应该只使用 FILE1.txt 来创建散列（如[这里](https://stackoverflow.com/a/12378005/1337398)已经提到的）。

以下应该有效：

```
#!/usr/bin/perl

use strict;
use warnings;

my %file1hash;

open file1, "<", "FILE1.txt" or die "$!\n";
while (<file1>) {
    my ($key, $rest) = split /\|/, $_, 2;
    chomp $rest;
    $file1hash{$key} = $rest;
}
close file1;

open file2, "<", "FILE2.txt" or die "$!\n";
while (<file2>) {
    my ($key, $rest) = split /\|/, $_, 2;
    if (exists $file1hash{$key}) {
        chomp $rest;
        printf "%s|%s|%s\n", $key, $file1hash{$key}, $rest;
    }
}
close file2;

exit 0; 
```

# php - 使用 Ajax 验证表单后，使用 JavaScript 的重置按钮不起作用

> ID：12377893
> 
> 赞同：1
> 
> 时间：2012-09-11T21:04:16.753
> 
> 标签：php, javascript, ajax, validation

我有一个带有重置和创建按钮的“创建用户”表单。此重置按钮不适用于表单中的某些下拉菜单。

此外，重置按钮不会在验证后清除表单中的所有值。它只清除验证后输入的值。

这是我的代码：

```
<div class="form-action clearfix">
<button type="button" onClick="clearForm()" > Reset </button>
<button class="button" type="button" id="button"       onclick="doAjax('index.php/users/createUser', convertFormJson('#createUserForm'));">Create</button> 
```

和

```
function clearForm() {
document.getElementById('createUserForm').reset(); 
} 
```

形式：

```
<?php echo validation_errors(); ?>
            <div class="container_12 clearfix leading" >
                <div class="grid_12">

                        <!--<form class=    "form has-validation">-->
                        <?php 

                            $attributes = array('class' => 'form has-validation', 'id' => 'createUserForm');
                            echo form_open('/users/createUser', $attributes); 

                        ?>
                        <div class="clearfix">
                            <label for="form-name" class="form-label">First Name <em>*</em></label>
                            <div class="form-input">
                                <input type="text" id="form-name" name="firstname" required="required" placeholder="Enter the first name" value="<?php echo set_value('firstname'); ?>" />
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-name" class="form-label">Last Name <em>*</em></label>
                            <div class="form-input">
                                <input type="text" id="form-name" name="lastname" required="required" placeholder="Enter the last name" value="<?php echo set_value('lastname'); ?>"/>
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-email" class="form-label">Email <em>*</em></label>
                            <div class="form-input"><input type="email" id="form-email" name="email" required="required" placeholder="A valid email address" value="<?php echo set_value('email'); ?>"/></div>
                        </div>

                        <!--
                        <div class="clearfix">
                            <label for="form-birthday" class="form-label">Birthdate</label>
                            <div class="form-input"><input type="date"  id="form-birthday" name="date" placeholder="mm/dd/yyyy" value="<?php //echo set_value('date'); ?>" class="date"/></div>
                        </div>
                        -->

                            <div class="clearfix">
                            <label for="form-username" class="form-label">Username <em>*</em></label>
                            <div class="form-input">
                                <?php echo form_error('username'); ?>
                                <input type="text" id="form-username" name="username" value="<?php echo set_value('username'); ?>" required="required" maxlength="30" placeholder="Alphanumeric (max 30 char.)" />
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-password" class="form-label">Password <em>*</em></label>
                            <div class="form-input">
                                <?php echo form_error('password'); ?>
                                <input type="password" id="form-password" name="password" value="<?php echo set_value('password'); ?>" maxlength="30" placeholder="Min 8 char. containing a capital, number and/or symbol" />
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-password-check" class="form-label">Password check <em>*</em></label>
                            <div class="form-input">
                                <?php echo form_error('passconf'); ?>
                                <input type="password" id="form-password-check" name="passconf" value="<?php echo set_value('passconf'); ?>" data-equals="password" maxlength="30" placeholder="Re-enter your password" />
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-group" class="form-label">Group <em>*</em></label>
                            <div class="form-input">
                                <?php 
                                        $groupsData[' '] = "--";
                                        $groupJs = 'id="form-group"';
                                        echo form_dropdown('groupId', $groupsData,' ',$groupJs);
                                    ?>
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-language" class="form-label" >Language <em>*</em></label>
                            <div class="form-input">
                                <select id="form-language" name="language">
                                    <option value ="" > -- </option>
                                    <option value ="1">English</option>
                                    <option value ="2">French</option>    
                                </select>
                            </div>
                        </div>

                        <div class="clearfix">
                            <label for="form-timezone" class="form-label"  >Timezone <em>*</em></label>
                            <div class="form-input">
                                <?php echo timezone_menu('UM5', 'form-timezone'); ?>
                             </div>
                        </div> 
```

请帮帮我。

# javascript - primefaces 日历可以禁用过去的日期和时间吗？

> ID：12377899
> 
> 赞同：0
> 
> 时间：2012-09-11T21:04:35.927
> 
> 标签：javascript, calendar, primefaces

我正在尝试在网站上弹出日历以允许用户选择日期。这是用于提醒/任务实现。我不希望用户能够选择以前的日期或时间。

任何人对这个问题的建议都是`mindate="today (get new Date())"`. 这很好，因为它使前几天无法被选中。但是，人们仍然可以选择今天的某个时间，也就是之前到现在。因此，人们自然会选择`minHour`and `minMinute`，但这些也会保留在未来的日子里。因此，如果我设置了所有这 3 个，我们将接近，但问题是，如果我选择明天的日期，它将只允许基于`minMinute`和的一天中的时间`minHour`，这些时间基于您的系统时间`"today (get new Date())"`。您应该可以选择明天的任何时间。

我可以让日历只在“现在”之后的几天和时间内有效吗？

这似乎是一个自然的环境。 `futureDates="disabled"`,`pastDates="disabled"`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:07:38.210

我猜默认情况下不可能在同一个日历组件中完成所有这些操作。因为它要求您在用户选择日期之后`minHour`更改值。`minMinute`这意味着日历组件需要再次渲染。

您可以将其分为两个部分：一个仅用于选择日期，另一个用于选择时间。

`minHour`然后，当用户选择日期并根据所选日期重新呈现时间组件并根据所选日期设置and时，您可以进行 ajax 调用`minMinute`。

这就是 xhtml 的样子：

```
<p:calendar id="dateOnly" mindate="#{datePickerView.minDate}"
    value="#{datePickerView.chosenDate}">

    <p:ajax event="dateSelect" listener="#{datePickerView.handleDateSelect}" update="timeOnly" />  
</p:calendar>

<br />

<p:calendar id="timeOnly" value="#{datePickerView.chosenTime}" 
    pattern="HH:mm" timeOnly="true" minHour="#{datePickerView.minHour}" 
    minMinute="#{datePickerView.minMinute}" /> 
```

这就是 bean 的样子：

```
public class DatePickerView implements Serializable {
    private static final long serialVersionUID = 1L;

    private Date chosenDate;
    private Date chosenTime;

    public void handleDateSelect(DateSelectEvent event) {
        chosenDate = event.getDate();
    }

    public Date getMinDate() {
        return Calendar.getInstance().getTime();
    }

    public int getMinHour() {
        if (chosenDate.after(Calendar.getInstance().getTime())) {
            return 0;
        } else {
            return Calendar.getInstance().get(Calendar.HOUR_OF_DAY);
        }
    }

    public int getMinMinute() {
        if (chosenDate.after(Calendar.getInstance().getTime())) {
            return 0;
        } else {
            return Calendar.getInstance().get(Calendar.MINUTE);
        }
    }

    public Date getChosenDate() {
        return chosenDate;
    }

    public void setChosenDate(Date chosenDate) {
        this.chosenDate = chosenDate;
    }

    public Date getChosenTime() {
        return chosenTime;
    }

    public void setChosenTime(Date chosenTime) {
        this.chosenTime = chosenTime;
   }
} 
```

您当然应该添加时区处理等。

# wcf - WCF + NetTcp：高负载使通道停止工作（调用/秒速率）

> ID：12377901
> 
> 赞同：2
> 
> 时间：2012-09-11T21:04:47.773
> 
> 标签：wcf, performance, load, nettcpbinding

首先，对不起，我不是很流利。

我试图弄清楚为什么我的 WCF 服务在我们有一个高调用/秒速率的环境时停止工作。我不确定只是增加超时会解决问题。

我们有 2 个网络服务：

*   第一个托管在 IIS 7.5、Windows Server 2008 R2 Enterprise SP1 x64 上，带有 AppFabric（和 WAS）
*   二、托管于Windows Service，Windows 2003 R2 SP1 x86

两个 Web 服务都具有最低配置：无身份验证、无交易、无特殊处理消息.. 检查绑定：

```
<netTcpBinding>
    <binding  transactionFlow="false">
      <security mode="None">
        <message clientCredentialType="None" />
        <transport clientCredentialType="None"></transport>
      </security>
      <reliableSession enabled="false"/>
    </binding>
  </netTcpBinding> 
```

我们正在尝试使用 Net.Tcp 绑定，因为它的真实性和速度。

**事实 1 - Net.Tcp 绑定是主要原因**

当负载高时，通道 Net.Tcp 停止工作。而已！但是 BasicHttp 仍然像魅力一样工作。

WindowsService：通道 net.tcp 在恢复工作之前持续了几分钟（3m - 10m）（由它自己，没有我们改变任何东西。*地精正在努力工作*）。

AppFabric/IIS/WAS：通道net.tcp 保持下来。需要手动重启。

BasicHttpBinding 配置类似于 net.tcp：没有任何消息处理，没有安全问题或类似的东西。

**事实 2 - 没有任何类型的日志记录**

我们找不到任何种类、提示和技巧来弄清楚发生了什么。我已经尝试转储内存、事件日志、System.Diagnostics 并且没有任何相关内容。最相关的提示是来自 SMSvcHost 4.0.0.0 的错误：

> 调度重复的套接字时发生错误：此句柄现在在进程中泄漏。ID：2272 来源：System.ServiceModel.Activation.TcpWorkerProcess/62875109 异常：System.TimeoutException：发送到 [http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous](http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous)的此请求操作 未收到回复配置的超时 (00:01:00)。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。
> 
> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult 结果) 的 System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult 结果)
> 在 System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object [] outs, IAsyncResult result) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
> 
> 在 [0] 处重新引发异常：在 System.ServiceModel.Activation.WorkerProcess.EndDispatchSession(IAsyncResult 结果) 处的 System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult
> 结果) 进程名称：SMSvcHost 进程 ID：1532

您有任何提示或配置技巧可以帮助我解决此问题吗？

高负载场景的最佳配置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:42:42.100

如果您在 Visual Studio 中或使用 svcutil 工具生成了服务引用，请确保始终调用代理的 Close 或 Abort 方法。几天前我遇到了类似的问题，因为我忘记调用这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T22:20:29.943

如果您相应地调用 Close() 和 Abort() 方法并且仍然收到此错误，请考虑以下情况：

1.  您运行基于 Microsoft .NET Framework 3.0 或基于 .NET Framework 3.5 的 Windows Communication Foundation (WCF) 服务。

2.  WCF 服务使用 Net.Tcp 端口共享服务 (Smsvchost.exe) 并托管在运行 Internet 信息服务 (IIS) 的计算机上。

3.  以下条件之一为真：

    *   运行 IIS 的计算机上的 CPU 使用率很高。
    *   WCF 服务的服务模型中出现节流。
    *   多个请求同时发送到 WCF 服务。

在这种情况下，WCF 服务需要一分钟以上的时间来处理来自客户端应用程序的请求。此外，事件日志中还会记录一条组合以下事件条目的错误消息：

> 日志名称：系统
> 
> 来源：SMSvcHost 3.0.0.0
> 
> 日期：
> 
> 事件编号：8
> 
> 任务类别：共享服务
> 
> 级别：错误
> 
> 关键词：经典
> 
> 用户：本地服务
> 
> 计算机：
> 
> 说明：调度重复的套接字时发生错误：此句柄现在在进程中泄漏。
> 
> 编号：2620
> 
> 来源：System.ServiceModel.Activation.TcpWorkerProcess
> 
> 例外：
> 
> System.TimeoutException：发送到的此请求操作在配置的超时 (00:01:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

**注意：**您必须重新启动 IIS 才能从此问题中恢复 WCF 服务。

**原因：**

出现此问题的原因是 Smsvchost.exe 进程在尝试将传入连接请求传输到 W3wp.exe 工作进程时在一分钟后超时。**此外，此超时不可配置**。

当 CPU 工作量大，或者有很多并发连接请求传入时，Smsvchost.exe 进程无法在一分钟内将传入的连接转移到 W3wp.exe 工作进程。因此，Smsvchost.exe 进程超时并最终停止响应。发生此问题时，Smsvchost.exe 进程无法将以后的请求路由到 W3wp.exe 工作进程，直到重新启动 IIS。

**解决方案：**

Microsoft 建议应用 Microsoft 知识库 (KB) 文章中描述的修补程序 2504602。此修补程序适用于 .NET Framework 3.0 SP2、.NET Framework 3.5 SP1 和 .NET Framework 4 中的 WCF。

此外，微软声称已经在 .Net Framework 4.5 中解决了这个问题，因此，您应该升级到最新版本。

如果您升级到 .Net Framework 4.5 并且问题仍然存在，解决方法是修改 smsvchost.exe.config 文件以增加超时和挂起接受以及各种其他参数。

# objective-c - 禁用从 Facebook 帐户与 ABAddressBook 同步联系人时未收到 kABDatabaseChangedExternallyNotification

> ID：12377902
> 
> 赞同：1
> 
> 时间：2012-09-11T21:04:54.557
> 
> 标签：objective-c, facebook, cocoa, osx-mountain-lion, abaddressbook

通常，在共享通讯簿中添加或删除联系人时，会发布 kABDatabaseChangedExternallyNotification 通知。但是，当禁用自动将 Facebook 联系人拉入地址簿时，不会发布此通知。是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:58:46.303

这是 10.8.1 下 Facebook 帐户集成的开发者预览版存在的问题，但已在 10.8.2 中正式添加 Facebook 帐户集成后得到解决。

# python - 从 django Q 查询中弹出查询？

> ID：12377903
> 
> 赞同：5
> 
> 时间：2012-09-11T21:05:08.990
> 
> 标签：python, django, django-q

我正在处理一个看起来像这样的查询：

```
 filters = Q(is_default = False)
    # Build the excludes and filters dynamically 
    if cut:
        filters = filters & Q(mailbagstats__num_letters2__gt = int(cut) ) 
```

给定`filters` `Q`查询，我可以查询`pop`其中一个吗？

我想`Q(mailbagstats__num_letters2__gt= int(cut) )`从此 Q 查询中删除该查询，以获取新的过滤器。

通常，我使用列表，`reduce`但这个列表是通过构造的， `Q() & Q()`所以我不确定如何修改它。

感谢您提供的任何意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:13:48.570

你可以`pop`：

```
>>> filter = Q(a=True)
>>> filter = filter & Q(b=True)
>>> filter.children
[('a', True), ('b', True)]
>>> filter.children.pop()
('b', True)
>>> filter.children
[('a', True)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:13:10.507

为什么不使用列表并在最后制作过滤器？

```
filters = []
filters.append(Q(is_default = False))
# Build the excludes and filters dynamically 
if cut:
    filters.append(Q(mailbagstats__num_letters2__gt = int(cut)))

# I want to pop the last one
filters.pop()

# build the filter before making the query
# Note that this call will remove an element from the filters list
filters_for_query = reduce(lambda a, x: a & x, filters, filters.pop())

Model.objects.filter(filters_for_query) 
```

# c++ - 静态函数与指向类的静态指针有什么区别

> ID：12377905
> 
> 赞同：0
> 
> 时间：2012-09-11T21:05:15.770
> 
> 标签：c++, class, object, pointers, static

老实说，我想问几个问题，但只会用一个问题来回答。

根据我所见，静态函数可以在不需要创建类对象的情况下从外部访问，因此我假设这些函数来自程序初始化时创建的默认副本。当一个类通常具有单独使用的私有构造函数并且使用已知方法`GetInstance`时，返回指针将指向的静态变量的地址。问题是您可以`GetInstance`多次调用但指针指向的地址始终相同，为什么会发生这种情况，其次，它与直接静态函数有什么区别？我知道`GetInstance`我可以访问`storage`向量，因为创建了“COPY”（请参阅​​上面的问题）并且该函数`StoreB`有一个`this`指针，这也让我想到了一个问题，为什么静态函数没有`this`指针，因为没有创建副本？

```
class store
{
private:
    store(){};
    ~store(){};

    std::vector<int>storage;
public:

    static void Store( int a );
    void StoreB( int a );

    static store* GetInstance()
    {
        static store obj;
        return& obj;
    }
};

void store::StoreB( int a )
{
    storage.push_back( a );
}

void store::Store( int a )
{
    //storage.push_back( a ); //can't

}

int _tmain(int argc, _TCHAR* argv[])
{
    store::Store( 2 );
    store::GetInstance()->Store( 3  );

    store *a = store::GetInstance();
    store *b = store::GetInstance(); 

    cout << a << endl //points to the same address
        << b << endl; //points to the same address

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:14:05.950

不创建任何类型的函数，静态的、成员的或自由的。作为程序的一部分，它们在任何时候都存在。它们不会随着对象的创建而突然出现。这似乎是你最大的误解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:08:55.767

你的假设是有缺陷的。静态函数不使用在程序初始化时创建的一些私有默认副本。他们根本不使用任何副本。静态函数实际上只是一个可以访问类的静态成员和任何嵌套类型的命名空间函数。当你说没有`this`指针时你是正确的，因为没有任何类的实例。

事实上，你可以将你的静态方法实现为一个全局函数，而不会改变任何行为。只需将其从类中拉出，将其标记为类的朋友，然后使用类命名空间限定符（例如`store::`）限定对静态成员/嵌套类型的任何访问。

* * *

至于关于 的问题`GetInstance()`，总是返回相同的指针，因为它使用的是静态变量。静态变量基本上是仅在本地范围内可见的全局变量。因此，对同一静态变量的任何访问始终具有相同的值。

这称为单例模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T21:09:32.660

您偶然发现了**单例模式**。该程序允许该类的单个实例`store`，并且可以通过该`GetInstance()`方法访问它。该对象`static store obj;`只初始化一次，每次调用时都会返回一个指向它的指针`GetInstance()`。

> 为什么静态函数没有 this 指针，因为没有创建副本？

因为它们与类的实例无关。

> 问题是您可以多次调用 GetInstance 但指针指向的地址始终相同，为什么会发生这种情况？

已经解释过了，它是同一个对象。

> 其次，它和直接静态函数有什么区别？

没有直接静态函数之类的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T21:10:52.743

静态函数没有`this`指针，因为它们无法访问实例变量。这就是您首先将它们声明为静态的原因（在 OO 文献中，C++ 的静态函数通常称为*类函数*）。

返回相同指针的原因是`GetInstance`方法内部的变量将指针存储在静态存储中，

```
static store obj; 
```

这意味着该方法的所有调用都将获得相同的值。

调用实例函数时发生的复制也是错误的。指针`this`指向对象本身，因此您所做的更改将`storage`在实际对象上执行。

# php - 循环准备语句，需要重复什么？

> ID：12377907
> 
> 赞同：0
> 
> 时间：2012-09-11T21:05:25.897
> 
> 标签：php, prepared-statement

我正在使用语句来防止 sql 注入...我的问题是循环多个查询时我需要重复什么？

如果您查看第二个查询，我不确定准备语句是否需要在 foreach 循环中

这个摘要代码有问题吗？

打开数据库连接

```
// connect to database   
$conn = connect('r'); 
```

启动第一个查询

```
$sql = "SELECT ... FROM ... WHERE xxx = ?";

$stmt = $conn->stmt_init();
$stmt->prepare($sql);
$stmt->bind_param('i', $albumid);
$stmt->bind_result(..., ...);
$stmt->execute();
$stmt->store_result();
$num_rows = $stmt->num_rows;

if ($num_rows  > 0) {
   loop results...
}

$stmt->free_result(); 
```

第二个重复查询：

```
$sql = "SELECT ... FROM ... WHERE xxx = ?";

$stmt = $conn->stmt_init();
$stmt->prepare($sql); ///??????? inside or outside foreach loop ?????

foreach (... as $key => ...) {
    $stmt->bind_param('i', $key);
    $stmt->bind_result(...);
    $stmt->execute();
    $stmt->store_result();
    $num_rows = $stmt->num_rows;

    if ($num_rows  > 0) {
       loop results...
    }

   $stmt->free_result();
} 
```

关闭数据库

```
// close database
$conn->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:13:20.223

您不必多次准备查询。只需绑定参数并多次执行即可。

来自 PHP 手册：

> 对于需要多次发出的查询，如果您使用 PDO::prepare() 准备 PDOStatement 对象并通过多次调用 PDOStatement::execute() 发出语句，您将获得更好的性能。

希望这可以帮助。

# javascript - 删除外部 div

> ID：12377908
> 
> 赞同：3
> 
> 时间：2012-09-11T21:05:26.707
> 
> 标签：javascript, jquery

在我的 JavaScript 代码中，我有一个包含以下内容的字符串：

```
var html = "<div class='outer'><div id='inner'>lots more html in here</div></div>"; 
```

我需要将其转换为字符串

```
var html = "<div id='inner'>lots more html in here</div>"; 
```

我已经在我的项目中使用了 jQuery，所以我可以在必要时使用它来完成它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:15:13.663

Why all these needlessly complex answers?

```
//get a reference to the outer div
var outerDiv = document.getElementById('outerDivId');//or $('#outerDivId')[0];
outerDiv.outerHTML = outerDiv.innerHTML; 
```

And that's it. Just set the outerHTML to the inner, and the element is no more.

* * *

Since I had overlooked that you're dealing with an HTML string, it needs to be parsed, first:

```
var tempDiv = document.createElement('div');
tempDiv.innerHTML = htmlString;
var outerDiv = tempDiv.getElementsByTagName('div')[0];//will be the outer div
outerDiv.outerHTML = outerDiv.innerHTML; 
```

And you're done.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:07:19.830

尝试：

```
var html = "<div class='outer'>" 
         + "<div id='inner'>lots more html in here</div></div>";

html = $(html).html();

alert(html); 
```

[http://jsfiddle.net/TTEwm/](http://jsfiddle.net/TTEwm/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:07:18.233

试试[`.unwrap()`](http://api.jquery.com/unwrap/)——

```
$("#inner").unwrap(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T21:12:12.277

如果 html 字符串在您的示例中总是如此，您可以使用这个简单的代码

```
var html = "<div class='outer'><div class='inner'>lots more html in here</div></div>";
html = html.slice(19,-6) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T21:21:06.227

你可以这样做：

```
var html = "<div id='inner'>" + html.split("<div id='inner'>")[1].split("</div>")[0] + "</div>"; 
```

但是您可能希望为变化添加更多保护（如果您有不使用相同约定编写代码的坏习惯），例如`"inner"`或`<DIV>`

[演示](http://jsfiddle.net/anYtL/)

# javascript - ScriptManager.RegisterStartupScript 不断添加脚本块多次

> ID：12377910
> 
> 赞同：4
> 
> 时间：2012-09-11T21:05:34.850
> 
> 标签：javascript, asp.net, updatepanel

我有一个带有计时器控件的更新面板，它设置为每分钟左右自动检查一些数据更新。

如果它看到数据更新，则设置为使用序列化的 JSON 数据调用本地脚本。

```
ScriptManager.RegisterStartupScript(UpdateField, GetType(HiddenField), ACTION_CheckHistoryVersion, "updateData(" & data & ");", True) 
```

“数据”可能看起来像

```
{
   "someProperty":"foo",
   "someOtherProperty":"bar",
   "someList":[
     {"prop1":"value"},
     {"prop2":"value"}, ...
   ],
   "someOtherList":[{},...,{}]
} 
```

“数据”可能会变得非常大，有时只有少数项目发生变化。

我遇到的问题是这个。每次我将此发送回客户端时，它都会作为全新的脚本块添加，并且现有块不会被删除或替换。

输出看起来像这样：

```
<script type="text/javascript">
  updateData({
       "someProperty":"foo",
       "someOtherProperty":"bar",
       "someList":[
         {"prop1":"value"},
         {"prop2":"value"}, ...
       ],
       "someOtherList":[{},...,{}]
    });
</script>
<script type="text/javascript">
  updateData({
       "someProperty":"foo",
       "someOtherProperty":"bar",
       "someList":[
         {"prop1":"changed"},
         {"prop2":"val"}, ...
       ],
       "someOtherList":[{},...,{}]
    });
</script>
<script type="text/javascript">
  updateData({
       "someProperty":"foos",
       "someOtherProperty":"ball",
       "someList":[
         {"prop1":"changed"},
         {"prop2":"val"}, ...
       ]
    });
</script> 
```

每次数据发生变化时都会创建一个新的脚本块。

随着时间的推移，如果我们继续添加它，浏览器上累积的数据量可能会变得巨大，我无法想象大多数人的浏览器会如何接受它，但我认为它不会是好的。

有谁知道是否有办法只替换已发送回浏览器的代码，而不是像这样连续添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:31:11.743

我想出了一个似乎适用于我的情况的技巧。

我正在使用 jQuery 来查找我正在创建的脚本标签，并在它被调用后将其删除。

这是一个例子：

首先我生成一个指南：

```
Dim guidText as string = GUID.NewGuid().ToString() 
```

我创建如下函数：

```
function RemoveThisScript(guid){

   $("script").each(function(){
     var _this = $(this);
     if(_this.html().indexOf(guid)>-1)
        _this.remove();
   });

} 
```

然后我将以下代码添加到我的输出字符串中：

```
... & " RemoveThisScript('" & guidText & "');" 
```

这会导致 jQuery 在页面上的所有脚本中查找具有 GUID 的脚本（本质上是调用函数的脚本）并将其从 DOM 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:19:41.687

我建议将 Web 服务与一些您将在 window.setInterval 中调用的 Web 方法一起使用。在您的网络方法的成功处理程序中（在客户端），您可以只接受响应并使用它做任何您想做的事情。它不会保存在您的页面中（好吧，如果您做错了一切）。好处是您将最小化请求大小（更新面板将传递所有可能足够大的视图状态数据）并限制服务器资源的使用（更新面板导致整个页面的生命周期，假设稍微修改，但无论如何 - 所有这些 page_load， page_init 等...），并且使用 Web 服务，您将只需要您需要的东西。

[这](http://www.semenoff.dk/en/Code-Corner/ASP.Net.AJAX/WebService-From-JavaScript.aspx)是一篇文章，您可以在其中了解如何在客户端创建和使用它。看起来足够好。

# c# - 使用 FileStream 和 FILE_FLAG_NO_BUFFERING 读取文件

> ID：12377914
> 
> 赞同：7
> 
> 时间：2012-09-11T21:05:51.027
> 
> 标签：c#, windows

一点背景知识：在对大文件进行 IO 时，我一直在尝试使用 FILE_FLAG_NO_BUFFERING 标志。我们正在尝试减少缓存管理器的负载，希望通过后台 IO，我们将减少我们的应用程序对用户计算机的影响。性能不是问题。尽可能多地在幕后工作是一个大问题。我有一个接近工作的包装器来做无缓冲的 IO，但我遇到了一个奇怪的问题。当我使用不是 4 的倍数的偏移量调用 Read 时出现此错误。

> 句柄不支持同步操作。FileStream 构造函数的参数可能需要更改以指示句柄是异步打开的（即，它是为重叠 I/O 显式打开的）。

为什么会这样？这条信息不是自相矛盾吗？如果我添加异步文件选项，我会得到一个 IOException（参数不正确。）

我想真正的问题是这些要求是什么， http: [//msdn.microsoft.com/en-us/library/windows/desktop/cc644950%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc644950%28v=vs.85%29.aspx)与这些倍数有关4.

这是演示该问题的代码：

```
FileOptions FileFlagNoBuffering = (FileOptions)0x20000000;
int MinSectorSize = 512;
byte[] buffer = new byte[MinSectorSize * 2];
int i = 0;
while (i < MinSectorSize)
{
    try
    {
        using (FileStream fs = new FileStream(@"<some file>", FileMode.Open, FileAccess.Read, FileShare.None, 8, FileFlagNoBuffering | FileOptions.Asynchronous))
        {
            fs.Read(buffer, i, MinSectorSize);
            Console.WriteLine(i);
        }
    }
    catch { }
    i++;
}
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T22:36:46.813

使用`FILE_FLAG_NO_BUFFERING`时，记录的要求是读取或写入的内存地址必须是物理扇区大小的倍数。在您的代码中，您允许随机选择字节数组的地址（因此不太可能是物理扇区大小的倍数），然后添加偏移量。

您观察到的行为是，如果偏移量是 4 的倍数，则调用有效。字节数组可能与 4 字节边界对齐，因此如果内存地址是 4 的倍数，则调用有效.

因此，您的问题可以这样重写：为什么当内存地址是 4 的倍数时读取工作，而文档说它必须是 512 的倍数？

答案是文档没有对违反规则会发生什么做出任何具体保证。无论如何，呼叫都可能起作用。无论如何，电话可能会奏效，但仅在偶数年的 9 月。无论如何调用都可能会发生，但前提是内存地址是 4 的倍数。（这可能取决于读取操作中涉及的特定硬件和设备驱动程序。仅仅因为它在您的机器上工作不会'不是说它适用于其他任何人。）

`FILE_FLAG_NO_BUFFERING`首先使用with可能不是一个好主意`FileStream`，因为我怀疑这是否`FileStream`真的能保证它将你给它的地址未经修改地传递给底层`ReadFile`调用。相反，使用 P/Invoke 直接调用底层 API 函数。您可能还需要以这种方式分配内存，因为我不知道.NET 是否提供任何方法来分配具有特定对齐方式的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-28T14:04:18.933

只需直接用 FILE_FLAG_NO_BUFFERING 调用 CreateFile ，然后在用 FileStream 打开之前将其关闭即可达到相同的效果。

# mysql - 调整 mysql 以使用 10,000 多个表

> ID：12377924
> 
> 赞同：0
> 
> 时间：2012-09-11T21:06:26.833
> 
> 标签：mysql

嘿，
我需要调整我们的一台 mysql（RH5.8 上的 5.1）服务器以处理超过 10K 表，我认为 mysql 处理 10-20K 表没有任何问题，但我确信它的 cnf 有一些变化需要文件。

我添加到 my.cnf 文件中的唯一内容是`table_open_cache=20000`

我使用的是 InnoDB 存储引擎，而不是使用查询缓存。
**还有什么我想念的吗？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:21:00.917

默认情况下，InnoDB 将所有表存储在一个文件中，因此如果您计划将表变大，您可能会遇到文件大小的操作系统限制，否则拥有这么多表并没有任何问题或性能问题。如果您要存储大量数据，请检查您的操作系统文件大小限制并查看是否需要使用该选项`innodb_file_per_table`，以便每个表都放在自己的文件中。

从你现在拥有的到想要 10k+ 表并没有任何特定的配置更改只是为了处理那么多表。

我建议阅读有关以下 InnoDB 主题的 MySQL 参考手册：[配置](http://dev.mysql.com/doc/refman/5.5/en/innodb-configuration.html)、[磁盘 I/O 和文件空间管理](http://dev.mysql.com/doc/refman/5.5/en/innodb-disk-management.html)、[调整](http://dev.mysql.com/doc/refman/5.5/en/innodb-tuning-troubleshooting.html)和[限制](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)，以查看是否需要根据这些部分的信息更改配置或应用程序。也许最有价值的部分是调音部分。

如果您计划创建和删除大量增长到合理大小的表，您可能希望使用 file per table 选项，以减少表空间的碎片化。

正如其他人所说，可能有一种方法可以构建数据，这样您就不需要 10-15,000 个表，但可以使用适当的索引将大量表数据放入单个表中。如果不知道您要存储什么以及为什么需要这么多表，就不可能说出来。希望有帮助。

# macos - 如何用applescript打开多个随机文件？

> ID：12377927
> 
> 赞同：1
> 
> 时间：2012-09-11T21:06:50.200
> 
> 标签：macos, applescript

我成功打开 1 个随机文件，如下所示：

```
tell application "Finder"
   open some file of folder "HD:random"
end tell 
```

我想在文件夹中打开 3 个随机文件。3个不同的。如果我运行 AppleScript 3 次，有时我会得到相同的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:15:06.373

这是使用“某些文件”的一种方式...

```
set theNumber to 3
set theFolder to choose folder

set theFiles to {}
repeat
    tell application "Finder" to set aFile to (some file of theFolder) as text
    if aFile is not in theFiles then
        set end of theFiles to aFile
        tell application "Finder" to open file aFile
    end if
    if (count of theFiles) is equal to theNumber then exit repeat
end repeat 
```

这是使用随机数的另一种方法...

```
set theNumber to 3
set theFolder to choose folder

tell application "Finder" to set theFiles to files of theFolder
set fileCount to count of theFiles
if fileCount is less than theNumber then error "I couldn't find " & (theNumber as text) & " files in the chosen folder."

set randomNumbers to {}
repeat
    set aNum to random number from 1 to fileCount
    if aNum is not in randomNumbers then
        set end of randomNumbers to aNum
        tell application "Finder" to open (item aNum of theFiles)
    end if
    if (count of randomNumbers) is equal to theNumber then exit repeat
end repeat 
```

# sql-server - 如何复制/克隆数据库

> ID：12377930
> 
> 赞同：0
> 
> 时间：2012-09-11T21:06:55.900
> 
> 标签：sql-server, database, copy

我有一个带有表、函数、存储过程的 SQL SERVER 数据库。我想将此数据库复制到具有不同名称的相同服务器。

如果我的原始数据库的名称是 DB_ORIG 并且我想要复制/克隆到一个名为 DB_NEW 的新数据库，你能给我确切的命令来复制数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:09:23.087

有很多方法。

最简单的可能是备份数据库，然后用新名称恢复它。

确保没有通过名称显式引用旧数据库的视图、函数或过程。

# c# - 为什么我会收到此错误：“找不到文件的一部分'...'”？

> ID：12377931
> 
> 赞同：0
> 
> 时间：2012-09-11T21:07:05.193
> 
> 标签：c#, asp.net-mvc-3

我想要完成的是将一些文件从我的共享主机上的一个域上传到将显示文件的同一主机上的另一个域。当我调试应用程序时，该进程到达 SaveAs() 方法，然后抛出异常，“ **Could not find a part of the path ...** ”。

我已按照[这些说明](http://eckstein.id.au/7859/general-technology/tutorial-absolute-path/)查找我的站点文件夹的绝对路径，并在我的代码中实现了此路径，使用的方法与我在文件上传的大部分过程中一直使用的方法相同，而且我从未遇到任何问题。我尝试保存这些文件的文件夹允许我的读/写权限。

我想知道“是不是因为我试图将文件上传到不同的目录？”。如果是这样，有没有更好的方法来实现这一点？

```
var fileName = Path.GetFileName(file.FileName);                            
var path = @"D:\Hosting\someNumbers\html\SiteFile\SiteImages\" + fileName;
file.SaveAs(path);
myObject.FilePath1 = path; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:49:46.570

事实证明，我的错误或多或少是 GoDaddy 托管的*安全***问题**。GoDaddy 将此类操作视为“第三方 FTP 请求”，这是不允许的。总之，GoDaddy 不允许用户在一个站点上上传文件，然后将该文件 FTP 到同一托管计划中的另一个站点。

# php - DocBlock 类类型继承

> ID：12377935
> 
> 赞同：4
> 
> 时间：2012-09-11T21:07:24.433
> 
> 标签：php, javadoc, phpdoc, docblocks

虽然这个问题一般是关于[DocBlocks](http://en.wikipedia.org/wiki/PHPDoc)的，但我的用例是关于 PHP 的。

考虑以下 PHP 代码：

```
<?php

class ParentClass {
    /**
     * Says 'hi' to the world.
     * @return ParentClass Returns itself for chaining.
     */
    public function say_hi(){
        echo 'hi';
        return $this;
    }
}

class ChildClass extends ParentClass {
    /**
     * Says 'bye' to the world.
     * @return ChildClass Returns itself for chaining.
     */
    public function say_bye(){
        echo 'bye';
        return $this;
    }
}

$c = new ChildClass;
$c->say_hi()->say_b| <- type hinting won't suggest "say_bye" here

?> 
```

这只是一个带有一些链接的微不足道的类。扩展类失去了类型提示，因为父类的 docblock 正在使用一个特定的类名，该类名没有子类的方法/属性。

假设我们确实需要类型提示功能，（如果没有，请留下这个问题 - 我不想要无用的参数），我应该如何解决这个问题？

我想出了以下几种可能性：

*   更改 PHPDoc 标准以允许使用特殊关键字
*   添加一个多余的 say_hi() 方法，它调用父级只是为了重新声明 docblock
*   根本不指定返回类型，让 IDE 决定什么`return $this;`意思（这甚至可以工作吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T13:52:34.370

你可以像这样解决这个问题：

```
class ParentClass {
    /**
     * Says 'hi' to the world.
     * @return static
     */
    public function say_hi(){
        echo 'hi';
        return $this;
    }
} 
```

“@return static”语句完全可以满足您的需求，PhpStorm 可以很好地使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:48:50.897

您所描述的通常称为“流利的接口”，其中对象的所有方法都可以完成工作并返回对象本身。

我个人还没有看到任何关于如何做到这一点的最终确定的 PHPDoc 指南。因此，我不知道任何 IDE 已经为其自动完成功能提出了一种方法来处理用例。

PHPDoc 将采取的一种可能的途径是利用“@return $this”作为表示流畅方法的约定，因为它与代码语法本身相匹配，因此非常清晰。我怀疑在标准本身包含此用例之前，任何 IDE 都会构建该功能。

在短期内，我认为你多余的 "ChildClass::say_hi(){parent::say_hit();}"*可能*会让你的 IDE 自动完成工作。同样，*可能*，因为自动完成功能也可以识别链接自身的方法（例如 $foo->bar()->baz()->roll()->tide();）可能不存在。

# hbase - 使用 hbase NoSuchMethodError 注入 nutch

> ID：12377941
> 
> 赞同：2
> 
> 时间：2012-09-11T21:07:47.030
> 
> 标签：hbase, nutch

当我尝试运行 nutch 时，出现以下错误。我已经安装并运行了 hbase-0.94.0，hadoop 运行也没有问题。在 ${NUTCH_HOME}/runtime/local/lib hbase-0.94.0.jar 中存在。我收到以下错误，这似乎是依赖项的问题，但我很困惑。谢谢

```
./nutch inject /tmp/seed.txt
InjectorJob: starting
InjectorJob: urlDir: /tmp/seed.txt
2012-09-11 22:02:14.097 java[7636:1903] Unable to load realm info from SCDynamicStore
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.hadoop.hbase.HColumnDescriptor.setMaxVersions(I)V
    at org.apache.gora.hbase.store.HBaseMapping$HBaseMappingBuilder.addFamilyProps(HBaseMapping.java:114)
    at org.apache.gora.hbase.store.HBaseStore.readMapping(HBaseStore.java:545)
    at org.apache.gora.hbase.store.HBaseStore.initialize(HBaseStore.java:113)
    at org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:135)
    at org.apache.nutch.storage.StorageUtils.createWebStore(StorageUtils.java:69)
    at org.apache.nutch.crawl.InjectorJob.run(InjectorJob.java:243)
    at org.apache.nutch.crawl.InjectorJob.inject(InjectorJob.java:268)
    at org.apache.nutch.crawl.InjectorJob.run(InjectorJob.java:288)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.InjectorJob.main(InjectorJob.java:298) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:34:59.277

它适用于 hbase-0.90.5 我猜在使用 nutch 2 和 hbase-0.94 时存在问题或需要添加的其他配置。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T07:00:27.857

这是当今常见的兼容性问题。我们只需要等待 Apache Gora 采用 Apache HBase 0.98.x 或更高版本。同时存在如下所述的解决方法。

Apache Nutch 2.2.1 使用 Apache Gora 0.3，它只支持旧的 Apache HBase 0.90.x。目前要使用 Nutch 2.2.x，您必须：

1.  [从官方 Git 分支 2.x](https://github.com/apache/nutch/tree/2.x)克隆、配置和构建新的 Nutch 。

2.  克隆并构建[我的 Apache HBase 0.94.24-hadoop-2.5.0 版本](https://github.com/dobromyslov/hbase/releases/tag/0.94.24-hadoop-2.5.0)。

您还可以阅读[Apache HBase 的兼容性文档，](http://hbase.apache.org/book/configuration.html)了解如何为任何 Hadoop 版本构建您自己的版本。

要完全了解，请查看[Apache Gora 0.3 的类似问题](https://issues.apache.org/jira/browse/GORA-304)。

我测试的工作堆栈是：

*   来自使用 Gora 0.4 的 2.x git 分支的 Apache Nutch；
*   Apache Hbase 0.94.24-hadoop-2.5.0；
*   Apache Hadoop 2.5.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:12:31.787

当我在命令中使用 0.94.1 运行 nutch2.0 时，它是 nosuchmethod，而在 eclipse 中它是 java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/HBaseConfiguration。虽然我复制 jar 或配置类路径。这是行不通的。现在我将更改为 90.5，我希望它能正常工作。

# java - 返回第一个循环

> ID：12377942
> 
> 赞同：0
> 
> 时间：2012-09-11T21:07:49.370
> 
> 标签：java, loops, for-loop

```
for(Integer i : list1)
    for(Integer x : list2)
        if(i.equals(x))
             continue; 
```

我想做的就是当 i.equals(x) 取消第二个循环(for(Integer x : list2)) 并继续 list1 的下一个元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:08:28.887

那么你应该使用`break`而不是`continue`. `break`结束最里面的封闭循环的执行，这正是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:38:32.180

放一个“休息”可以解决您的问题。如果你想使用“继续”，你可以通过标记第一个 for 循环来做到这一点

```
MAIN: for(Integer i : list1)
        for(Integer x : list2)
           if(i.equals(x))
               continue MAIN; 
```

检查此链接以获取更多信息 [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

# ios - ios上的键盘移动我的固定位置标题导航

> ID：12377944
> 
> 赞同：5
> 
> 时间：2012-09-11T21:07:55.333
> 
> 标签：ios, keyboard, position, fixed

我有一个导航栏，滚动时固定在窗口的顶部。但是，当我单击输入并且键盘弹出固定位置导航移动并卡在错误位置时。有任何解决这个问题的方法吗？

此外，我似乎无法通过在键盘外部单击来关闭键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T01:39:46.197

我不确定你的导航栏为什么会移动。如果您是子类化或使用 UINavigationControlller，则默认情况下会提供导航栏本身，但您始终可以隐藏它。如果您不是并且只想要一个 UINavgivationBar 而不是您使用控制器获得的视图控制器堆栈，那么它可能会移动框架。我建议使用导航控制器来确保您的酒吧永远不会移动。

解决单击关闭时键盘不隐藏的问题。没有“自动”方法可以做到这一点，您必须在保存的对您单击的文本字段的引用上显式调用方法 resignFirstResponder 以使键盘出现。最好的方法是创建一个 NSMutableArray 属性并在视图控制器 .h 中实现 UITextfieldDelegate 并将方法 -(void)textfiedDidBeginEditing:(UITextfield *)textfield 我是你的 .m 并将 textfied 添加到可变数组在里面。从那里你需要决定用户将如何关闭键盘 IE 点击背景。所以最简单的方法是在背景中添加一个没有文本的巨型 UIButton，它调用一个方法，该方法循环遍历该可变数组并在所有内容上调用 resignFirstResponder 并在完成后清除数组。

或者您始终可以将文本字段的键盘类型更改为具有完成按钮的键盘类型。

这是你的选择！

# asp.net - ASP.Net GridView 和 TemplateField 可见性 - false 但 ItemTemplate 仍在执行

> ID：12377950
> 
> 赞同：0
> 
> 时间：2012-09-11T21:08:11.403
> 
> 标签：asp.net, gridview, itemtemplate

我从一个早已离去的人那里继承了一些疯狂的代码。他实现了一个自定义控件来实现大量松散相关的查询。

该控件有一堆不同的面板，都设置为 Visible='false' 以反映不同的过滤器输入集。然后有一个用于结果的 GridView。GridView 具有`<asp:TemplateFields Visible='false'>`从他想要运行的所有不同查询返回的所有可能列的超集。

控件的代码隐藏在初始化时运行，为过滤器面板和当前想要的特定查询的列翻转 Visible='true'。

更疯狂的是，我只是注意到`<asp:TemplateField Visible="false">`没有阻止 <ItemTemplate> 内部的构建，所以他的控制正在做各种永远不会被看到的额外工作。

举一个例子：

```
 <asp:TemplateField HeaderText="Expiration Date" SortExpression="ExpirationDate" Visible="false"><br />
      <itemtemplate><br />
          <asp:HyperLink runat="server" ID="FormLink" Target="_blank" NavigateURL="<%# CreateFormLink() %>" Text='<%# DateUtil.getFormattedDate(Eval("ExpireDate")) %>' ><br />                
          </asp:HyperLink><br />
      </itemtemplate><br />
 </asp:TemplateField><br /> 
```

`CreateFormLink()`即使 Visible 为假，代码隐藏方法也会被调用...

它之前没有爆炸的唯一原因是该方法使用 StringBuilder 将 href 拼凑在一起，并且`StringBuilder.Append(Eval("foo"))`不会爆炸。

我尝试用串联替换 StringBuilder 的使用，以提高内存效率，并在列不在当前结果集中时获得了繁荣。

由于`Visible='false'`没有停止工作的完成（即使它停止了显示），有没有更规范的方法来做到这一点？还是我应该重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:18:26.277

You might want to implement show/hide logic in [ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx) event.

If you do so, you have full control over calling of `CreateFormLink()`

# plone - 从未知的配置文件版本升级 Products.kupu

> ID：12377951
> 
> 赞同：0
> 
> 时间：2012-09-11T21:08:19.510
> 
> 标签：plone

我正在尝试将 Kupu 升级到 1.4.16 版。我在构建中更新了versions.cfg，但在portal_setup 工具中显示了以下内容：

```
The profile "kupu:default" is currently upgraded to version unknown.

The filesystem version for the "kupu:default" profile is currently 1.4.16\. 

No upgrade available. 
```

所以我没有升级的句柄。

有任何想法吗？

最好的祝福，

曼努埃尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:59:45.623

这是因为配置文件版本与鸡蛋版本不同。

egg 版本在 setup.py 文件中指定，是您可以在 pypi 上找到的版本。例如： http: [//pypi.python.org/pypi/Products.kupu/1.4.16](http://pypi.python.org/pypi/Products.kupu/1.4.16)

配置文件版本是 Products.kupu/Products/kupu/profiles/default/metadata.xml 中指定的整数，表示“安装程序”配置文件的版本。这意味着一个版本的配置文件可以是相同的抛出多个鸡蛋版本（如果不需要更新安装）。

所以问题变成了为什么配置文件的版本是“未知”的？

因为 metadata.xml 没有提供任何版本号。

顺便说一句，更新软件包时，您必须检查软件包是否提供升级步骤。如果没有，则有以下两个原因之一：

*   包维护不好所以你必须自己升级......（煮资源，......）
*   该包不需要升级安装（意味着只更新了python代码，所以只需重新启动）

# scheme - SICP 练习 1.5 和 1.6

> ID：12377954
> 
> 赞同：6
> 
> 时间：2012-09-11T21:08:34.473
> 
> 标签：scheme, sicp, racket, r5rs

除了问题[SICP中练习1.6的解释是什么？](https://stackoverflow.com/questions/1171252/whats-the-explanation-for-exercise-1-6-in-sicp). 所以 Racket 博士 (R5RS) 在有限时间内用“if”评估 sqrt-iter 函数，清楚地显示了正常的顺序评估。但是如果我使用练习 1.5 中的示例

```
(define (p) (p))
(define (test x y)
  (if (= x 0)
      0
      y))
(test 0 (p)) 
```

它进入无限循环，让我觉得“如果”使用了应用顺序评估。那么我错在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T21:43:58.743

发生的情况`if`是永远不会达到：正是由于计算的应用顺序，两个参数都在实际调用*之前*`test`被计算，并且表达式将永远循环。*`test``(p)`*

 *如果使用正常顺序评估相同的过程，它将返回零，这就是本示例首先要演示的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T22:19:48.897

在第一行使用带有#lang 方案指令的 DrRacket，我尝试过这种方式......

```
;say "hi" to Ben Bitdiddle

(define (q) (display "Hello?...Ben?)

(define (test x y)
(if (= x 0) 
    0
    y)) 
```

然后我使用 DrRacket 5.3 调试工具逐步完成评估。
这显然是应用顺序评估。

评估窗口显示 -> 你好？……本？后跟一个 0 cuz DrRacket 在输入“if”之前评估对 (q) 的调用。*

# wordpress - 特定位置的 SEO 改进和工具/清单

> ID：12377955
> 
> 赞同：-2
> 
> 时间：2012-09-11T21:08:36.110
> 
> 标签：wordpress, search-engine, seo

我不确定这个问题是否适合在这里......

我试图为我自己的网站改进 SEO（位置很关键）。它位于当地城镇外的一个村庄，那里有很多竞争对手。如果有人在第一页搜索（村庄+关键字），但我试图在第一页找到（当地城镇+其他关键字）。

有谁知道我可以使用的任何 SEO 工具或一般的 SEO 清单以及如何改进该特定搜索。

我也使用 wordpress 作为 CMS。任何事情都会不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:03:56.983

我喜欢使用[多合一SEO](http://wordpress.org/extend/plugins/all-in-one-seo-pack/)

您可以非常具体地使用每个页面的标签、标题、关键字等。或设置全局关键字、描述等。

进入搜索引擎的首页很困难。即使您的网站上的关键字饱和度比竞争对手更好，谷歌也需要一段时间（数周，甚至数月）才能正确索引您并调整其在新网站上的排名。

我的建议是关键字密度（关键字出现在单个页面上的次数）是关注的最大因素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-28T23:14:53.447

每年的 SEO 清单大多相同。

你需要坚持基础，不要尝试黑帽 SEO 技术。白帽 SEO 清单的详细信息可以在这里找到，它适用于每个位置。

[http://seoplusplus.com/seo-checklist-every-blogger-should-follow/](http://seoplusplus.com/seo-checklist-every-blogger-should-follow/)

# javascript - 如何将变量传递给另一个js文件

> ID：12377956
> 
> 赞同：1
> 
> 时间：2012-09-11T21:08:39.437
> 
> 标签：javascript, jquery

我正在尝试将 a.js 文件中的变量传递给 b.js 文件。

一个.js

```
var test='test string'; 
```

b.js

```
alert(test); 
```

我确定 a.js 在 b.js 之前包含在我的 html 中，但我仍然得到 ' `test`' is not defined 错误。反正有调试这个吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:16:55.147

要确保将 test 分配给全局范围，请执行以下操作：

```
window.test = 'test string'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:18:57.547

在这种情况下，我认为您传递变量不如使其可访问。在某些时候，您可能想看看[这个（范围与上下文）](http://clubajax.org/javascript-scope-and-context-not-the-same-thing/)。这么早看起来可能有点多，但它会比你想象的更早派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:19:55.330

调试：

一个.js：

```
var a = 'a';
console.log(b); 
```

b.js：

```
var b = 'b';
console.log(a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T21:30:22.973

您是否在 javascript 文件中使用自上而下的执行？使用全局范围 - 除非它是常量或辅助函数 - 它几乎总是一个坏主意......

至少，如果不是类，则定义函数并在它们之间传递变量......

# javascript - 函数中 this 和 var 的区别

> ID：12377957
> 
> 赞同：0
> 
> 时间：2012-09-11T21:08:47.780
> 
> 标签：javascript

我有一个我正在创建的 javascript 类。此类具有私有和公共功能/属性。我对私有和公共的理解是，它`this`是公共的，并且`var`对于该功能及其成员来说是私有的。但是，在本地函数`buildFramework()`中，当我调用时`var settings.currentView`出现错误：

> `settings.currentView`没有定义

`this`我的问题是，函数及其`var`成员的范围以及全局范围之间有什么区别？

```
namespace('example');
example.InstagramViewer = function (options) {
    // this works when called within buildFramework()
    this.settings = $.extend({
        currentView: 'grid'
    }, options);

    // this doesn't work when called within buildFramework()
    var settings = $.extend({
        currentView: 'grid'
    }, options);

    var viewer;

    this.init = function () {
        buildFramework();
    };

    var buildFramework = function() {
        viewer = $(viewerWrapper).append('<div id="instagramViewer" class="' + settings.currentView + '"></div>'); // this doesn't work
        viewer = $(viewerWrapper).append('<div id="instagramViewer" class="' + this.settings.currentView + '"></div>'); // this does work
    };
} 
```

并这样称呼...

```
$(function () {
    var viewer = new connectionsAcademy.publicWebsite.web.js.teenWebsite.InstagramViewer();
    viewer.init();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:38:17.140

这里有很多不同之处。

首先，“this”是一个关键字，它是对调用对象的引用。如果按原样调用函数，则窗口将是调用对象，并且您正在使用关键字“this”设置全局变量。

```
InstagramViewer();
console.log(window.settings); 
```

但是，如果您通过另一个对象调用您的函数，window 将不再是调用对象，您将在该对象上设置一个成员变量，而不是设置全局变量。

```
var obj = {InstagramViewer: InstagramViewer};
obj.InstagramViewer();
console.log(obj.settings); 
```

在这两种情况下使用 'var' 没有区别。'var' 的工作方式与 'this' 不同，因为除了我们将调用函数的暂存器之外，它不会影响任何对象。只有函数可以访问它的暂存器（除非您创建某种在此暂存器上公开变量的闭包）。这就是为什么您可以将使用 'var' 定义的变量视为私有变量的原因。

在处理“删除”时，使用“var”也不同于“this”。'delete' 不适用于使用 'var' 声明的变量，但在 'this' 或任何其他对象上定义变量时会起作用。

```
var F = function() {
    this.foo = 'foo';
    var bar = 'bar';

    delete(bar);
    delete(this.foo);

    alert(bar);
    alert(this.foo);
};

F(); 
```

我的解释很粗略，但这是一个大主题，在这种情况下不容易解释。我强烈推荐你读这本书[http://shop.oreilly.com/product/9780596000486.do](http://shop.oreilly.com/product/9780596000486.do)。尤其是第七章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:12:03.860

> 我对 private 和 public 的理解是，这是公共的，而 var 是该函数及其成员的私有

这是不正确的。

`var <variable_name>`在当前范围内声明具有对应名称的变量。你不能写`var foo.bar`，因为`foo.bar`是不正确的变量名。

`this.name`- 它正在访问`name`对象的属性`this`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:16:21.730

如果您只是在对象的闭包中定义函数，它们是“私有的”。您可以通过将它们作为属性添加到对象本身来使它们公开可用：

```
function ObjectWithPrivateFunction() {

  var _privateVariable = 0;

  function _privateFunction(someValue) {
    _privateVariable = someValue;
  } // _privateFunction()

  this.publicAccessToPrivateFunction = _privateFunction;

} // ObjectWithPrivateFunction() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T21:45:17.700

1）你很困惑`scope`并且`context`。
2) 与其他语言不同，`this`它是可变的——它取决于调用者绑定到哪个对象。
3) javascript 中没有“private”或“public”：只有始终为 public 和 variable 的 objectproperties 被限制在封闭函数的范围内。考虑以下示例：

```
var object = {
    x:10,
    func: function(){
        var x = 1;
        console.log(x, this.x);
    }
} 
```

`object.func();`现在将输出`1`并且`10`因为两者`x`确实共存 - 一个作为元素的属性`object`- 这是上下文，另一个`x`是限制在其封闭函数范围内的变量。

您正在做同样的事情-您正在`this`对象上创建一个属性（也非常重要-`this`是可变的，取决于函数的调用方式），然后尝试使用将失败`setting`的属性访问变量，因为 JS 检查范围但`currentView`没有找到相应的变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T21:55:19.097

非常松散地说，关键字`this`更像是一个`var`严格私有的公共类。

例如，

```
function testPublic(str)
{
    this.getTHIS=function()
                 {
                     alert(str)
                 }
}

function testPrivate(str)
{
    var getTHIS=function()
                {
                    alert(str);
                }
}

//now run the code
new testPublic('hello there').getTHIS(); //alert hello there 
```

但是，对于第二个，您不能从父函数外部访问 getTHIS 函数

# java - 多线程发布作业并等待单个线程响应的有效策略是什么？

> ID：12377965
> 
> 赞同：0
> 
> 时间：2012-09-11T21:09:11.340
> 
> 标签：java, concurrency

在java中，以下问题的有效解决方案是什么：

我有多个线程（10-20 个左右）生成作业（“Job Creators”），以及一个能够执行它们的线程（“The worker”）。一旦工作创建者发布了工作，它应该等待工作完成，除了“它完成了”之外没有其他结果，然后再继续。

为了将作业发送到工作线程，我认为环形缓冲区或类似的标准扇入设置可能是一个好方法？但是对于一个 Job Creator 发现她的工作已经完成，我不太确定..

工作创建者可以睡觉，工作人员在完成后会打断他们。或者每个工作创建者可以有一个原子布尔值，它会检查并由工作人员设置。我不知道，这两个都不是很好。我想用尽可能少的（如果可能的话，没有）锁来做到这一点。所以要明确一点：我正在寻找的是速度，而不一定是简单性。

有没有人有什么建议？阅读有关并发策略的链接也非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:14:29.593

我更喜欢单线程执行器服务，只需将工作实例提交给它（获得结果的未来）。然后，您可以 get() 未来都阻塞，直到结果可用并获得结果

```
public class TheWorker {
  private final ExecutorService service = Executors.newSingleThreadedExecutor();

  public Result work(Job job) {
    return service.submit(new Callable<Result>(){
      ...
    }).get()
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:30:08.900

有几种方法可以做到这一点。*最快*的方法可能是只使用[`Semaphore`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)一个单线程执行器。

```
private final Executor executor = Executors.newSingleThreadExecutor();

public void submitJob() {
    Semaphore semaphore = new Semaphore(0);
    executor.execute(new Job(semaphore));
    semaphore.acquire(); // Will block until semaphore.release() below
} 
```

然后在 Job 类中：

```
public class Job implements Runnable {

    private final Semaphore semaphore;

    public Job(Semaphore semaphore) {
        this.semaphore = semaphore;
    }

    @Override
    public void run() {
        // Perform task and run the actual job
        semaphore.release(); // Cues the submitter to continue at semaphore.acquire()
    }
} 
```

`Semaphore`速度相当快，比使用`synchronized`块快得多。

**编辑：**我还应该注意，这避免了很多开销`Future`，因此可能也比`Future`其他人建议的实现更快，但如果没有自己测试，我不能确定。

# css - 在 IE8 中打印时 HTML5 元素会丢失 CSS 类

> ID：12377977
> 
> 赞同：4
> 
> 时间：2012-09-11T21:10:22.510
> 
> 标签：css, html, printing, internet-explorer-8, preview

我需要在 IE8 中支持相当漂亮的打印。我今天遇到了一个使用某些 HTMl5 功能（部分）和 CSS 的页面的问题。该问题仅在打印时出现。查看下面的示例，它应该生成一些带下划线的文本。这很好用。但是在打印时，它没有下划线。这可以通过将“部分”更改为“div”来“修复”，但出于各种原因，我宁愿不这样做。

有人有建议吗？这似乎不是在打印预览期间执行 javascript 的问题，因为我可以将“window.onload”事件添加到页面以使其在 div 中填充内容，并且在打印预览中可以正常工作。并且普通的 CSS 在打印预览中可以正常工作；如果我没有在“.Signature”中嵌套“.SigLine”，它在打印预览中可以正常工作。但似乎“Section”标签的 CSS 类以某种方式被忽略了，因此嵌套的“SigLine”div 并不认为自己是“Signature”元素的子元素。

这是一个完整的工作示例

```
<html>
<head>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <style type="text/css" media="screen,print">
        .Signature .SigLine{border-bottom:solid 1px #000} 
    </style>
</head>
<body>

<section class="Signature"> <!-- Make this a <div> and everything's fine... -->
<div class="SigLine" style="width: 400px;">I should be underlined...</div>
</section>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T15:47:02.533

如果可以的话，我会将 Tim 上面的评论标记为答案，因为它让我去寻找 Modernizr 的打印垫片，这导致我访问[http://davidwalsh.name/html5-print](http://davidwalsh.name/html5-print)，然后是[https:// github.com/aFarkas/html5shiv/blob/master/src/html5shiv-printshiv.js](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv-printshiv.js)。通过在我的示例中包含 js 文件，它解决了我在 IE8 中的打印问题。我不确定使用这个 shiv 是否会有任何其他后果，但它似乎确实解决了我的具体问题。

谢谢，蒂姆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T13:14:30.897

您必须将此标签包含到您的 HTML 代码中并创建一个名为 print 的 css 文件，然后您必须为 IE8 编写特定的 css 代码，这称为@media print 查询

```
<!--[if lte IE 8]>
<link rel="stylesheet" media="print" href="/print.css" type="text/css" />
<![endif]--> 
```

请注意，HTML5shiv 在打印时不支持 IE8，为了在 IE8 中正确打印，您还必须在文档中包含 html5shiv.print。你可以从[Modernizer 网站](http://modernizr.com/download/)获得它，你可以使用Github上的这个[html5shiv 打印](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv-printshiv.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:35:27.520

不要使用后代类调用。只需直接调用 .SigLine 即可。

```
<style type="text/css" media="screen,print">
    .SigLine{border-bottom:solid 1px #000} 
</style> 
```

# vba - VBA代码对值求和并将它们以特定格式插入到新文件中？（数据透视表与否？）

> ID：12377980
> 
> 赞同：1
> 
> 时间：2012-09-11T21:10:38.953
> 
> 标签：vba

我有各种格式相同但编号不同的文件夹。前任：

```
OperatingUnit  "NO NAME"       GEP  NEP

      1         Disability     50   20
      2         MSL            20   2
      3         Aviation       5    6
      1         Disability     10   10
      3         Aviation       6    20 
```

这些文件在列标题和实际数据之间有 2 个空行（如上所示）。我相信我有一个工作代码来循环遍历所有文件，所以现在我正在处理循环必须调用的宏。

我想要的是将数据放入一个新文件（我已经命名并放置列标题）中，并在它们下面包含以下值：

```
RptLOB      ECMAccount  Amount
Disability  GEP         60      (SUM of the GEP values where the "NO NAME" column = Disability)
Disability  NEP         30      (same as top but NEP values)
MSL         GEP         20
MSL         NEP         2
Aviation    GEP         11
Aviation    NEP         26 
```

我不太确定我是否需要创建一个数据透视表，但因为在标题和数据之间有这 2 个空单元格，即使我手动尝试它也不会让我这样做。通过 VBA 解决这个问题的好方法是什么？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T03:24:58.997

我知道我在这里过火了，但这是一个非常有趣的挑战:)

基本上，您选择需要导出的工作表，然后运行 ​​ExportData()。

它的工作方式是：

1.  删除源数据中的前两个空行
2.  按“NO NAME”对数据进行排序 - 这样更容易总结 GEP/NEP
3.  浏览列表并创建一个用户定义类型的数组（其中包含我们在每个“NO NAME”基础上需要的所有信息）并根据需要总结值
4.  创建一个新工作簿并通过遍历数组将数据导出到那里

这是代码：

```
Option Explicit

Public Enum SourceColumns
    OperatingUnit = 1
    NoName
    GEP
    NEP
End Enum

Public Enum DestinationColumns
    rptLob = 1
    ECMAccount
    Amount
End Enum

Public Type rptLob
    Name As String
    GEP As Long
    NEP As Long
End Type

Public Sub ExportData()
    Application.ScreenUpdating = False
    Dim sh As Excel.Worksheet
    Dim rptLobs() As rptLob

    Set sh = ActiveSheet

    Call removeTwoRows(sh)
    Call sortNoNameColumn(sh)

    rptLobs = getRptLOBs(sh)

    Call exportToNewWorkbook(rptLobs)
    Application.ScreenUpdating = True
End Sub

Private Sub removeTwoRows(ByRef sh As Excel.Worksheet)
    sh.Rows("2:3").EntireRow.Delete
End Sub

Private Sub sortNoNameColumn(ByRef sh As Excel.Worksheet)
    sh.Range("A1").AutoFilter
    With sh.AutoFilter
        .Sort.SortFields.Clear
        .Sort.SortFields.Add Key:=sh.Cells(1, SourceColumns.NoName) _
            , SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        With .Sort
            .Header = xlYes
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With
    End With
End Sub

Private Function getRptLOBs(ByRef sh As Excel.Worksheet) As rptLob()
    Dim rptLobs() As rptLob
    Dim i As Long
    Dim lastRow As Long
    Dim curRptLOB As Long

    lastRow = sh.Cells(sh.Rows.Count, 1).End(xlUp).Row
    i = 2

    Dim firstRptLOB As rptLob

    ' set first values
    firstRptLOB.Name = sh.Cells(i, SourceColumns.NoName).Value
    firstRptLOB.GEP = sh.Cells(i, SourceColumns.GEP).Value
    firstRptLOB.NEP = sh.Cells(i, SourceColumns.NEP).Value

    ReDim rptLobs(0)
    rptLobs(curRptLOB) = firstRptLOB

    For i = 3 To lastRow
        If (sh.Cells(i, SourceColumns.NoName).Value <> rptLobs(curRptLOB).Name) Then
            ' get a new rptLOB
            Dim newRptLOB As rptLob

            ' set first values
            newRptLOB.Name = sh.Cells(i, SourceColumns.NoName).Value
            newRptLOB.GEP = sh.Cells(i, SourceColumns.GEP).Value
            newRptLOB.NEP = sh.Cells(i, SourceColumns.NEP).Value

            curRptLOB = curRptLOB + 1
            ReDim Preserve rptLobs(curRptLOB)

            rptLobs(curRptLOB) = newRptLOB
        Else
            ' add data to it
            rptLobs(curRptLOB).GEP = rptLobs(curRptLOB).GEP + sh.Cells(i, SourceColumns.GEP).Value
            rptLobs(curRptLOB).NEP = rptLobs(curRptLOB).NEP + sh.Cells(i, SourceColumns.NEP).Value
        End If
    Next

    getRptLOBs = rptLobs
End Function

Private Sub exportToNewWorkbook(ByRef rptLobs() As rptLob)
    Dim wb As Excel.Workbook
    Dim sh As Excel.Worksheet
    Dim index As Long
    Dim curRow As Long

    Set wb = Application.Workbooks.Add
    Set sh = wb.Sheets(1)

    ' Create Headers
    sh.Cells(1, DestinationColumns.rptLob).Value = "RptLOB"
    sh.Cells(1, DestinationColumns.ECMAccount).Value = "ECMAccount"
    sh.Cells(1, DestinationColumns.Amount).Value = "Amount"

    ' fill data
    For curRow = 2 To (UBound(rptLobs) + 1) * 2 + 1 Step 2 ' <-- double the amount of RptLOBs for GEP/NEP
        sh.Cells(curRow, DestinationColumns.rptLob).Value = rptLobs(index).Name
        sh.Cells(curRow, DestinationColumns.ECMAccount).Value = "GEP"
        sh.Cells(curRow, DestinationColumns.Amount).Value = rptLobs(index).GEP

        sh.Cells(curRow + 1, DestinationColumns.rptLob).Value = rptLobs(index).Name
        sh.Cells(curRow + 1, DestinationColumns.ECMAccount).Value = "NEP"
        sh.Cells(curRow + 1, DestinationColumns.Amount).Value = rptLobs(index).NEP

        index = index + 1
    Next
End Sub 
```

# c# - 用 C# 打包 GUI 和用 Visual C++ 打包应用程序

> ID：12377982
> 
> 赞同：0
> 
> 时间：2012-09-11T21:10:54.440
> 
> 标签：c#, visual-studio-2008, windows-installer, installation

我在 Visual C++ 中创建了一个应用程序（使用命令行）。我在 Visual C# 中为它制作了一个 GUI，这样用户就不必使用命令行并可以从 GUI 运行它。现在，我该如何制作相同的安装程序？在我的 GUI 中，我有以下代码调用我的应用程序并运行它：

```
 string cmdText;
                cmdText = @"C++HeaderConversionToQFASTXML.exe " + " " + textBox1.Text + " " + textBox2.Text;
                ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
                info.UseShellExecute = false;
                info.RedirectStandardInput = true;
                info.RedirectStandardOutput = true;
                info.CreateNoWindow = true;
                info.WorkingDirectory = @"C:\forAbishek\C++HeaderConversionToQFASTXML\Release\";
                Process p = Process.Start(info);
                p.StandardInput.WriteLine(cmdText); 
```

在此，我希望工作目录成为 .exe (C++HeaderConversionToQFASTXML.exe) 将驻留在用户计算机中的目录。我如何确保 GUI 能够接收到这个？.exe 将安装在用户计算机上。有人可以帮我吗？谢谢你。

我做了以下更改：

```
 string cmdText;
                    cmdText = @"C++HeaderConversionToQFASTXML.exe " + " " + textBox1.Text + " " + textBox2.Text;
                    ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
                    info.UseShellExecute = false;
                    info.RedirectStandardInput = true;
                    info.RedirectStandardOutput = true;
                    info.CreateNoWindow = true;
                    String path = System.Reflection.Assembly.GetExecutingAssembly().Location;
                    path = System.IO.Path.GetDirectoryName(path);
                    Directory.SetCurrentDirectory(path);
                    MessageBox.Show(path);
                    info.WorkingDirectory = path;
                    Process p = Process.Start(info);
                    p.StandardInput.WriteLine(cmdText); 
```

它仍然无法正常工作。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:13:15.833

除非有你不能这样做的原因，否则我建议将安装程序配置为将 CLI 和 GUI 可执行文件放在同一位置，并完全跳过整个相对路径问题。

如果您希望允许用户在应用程序位于不同位置的情况下创建非默认安装后配置，请为您的 C# 应用程序添加一个 app.info 文件，用户可以在其中指定 CLI 应用程序的位置（如果它不在与 UI 相同的文件夹。

我不知道有任何简单的方法可以在安装程序中指定两个不同的位置并使用它们来动态创建/修改 app.info 文件。如果您需要，我认为您需要编写一个由安装程序调用的自定义配置应用程序来创建 app.info 文件。

# ios - Navigation Controller 的视图作为 ViewController 中的子视图

> ID：12377984
> 
> 赞同：0
> 
> 时间：2012-09-11T21:11:07.190
> 
> 标签：ios, uikit

我正在制作一个 iPad 应用程序。

我希望我的应用程序设计包含 iPhone 大小的屏幕的一部分，这将有一个表单样式的分组表视图。用户可以使用它来编辑/添加信息。

表单表视图的“按钮”（行）之一将有一个披露图标作为附件视图，当点击时我想滑动另一个视图来代替该表。

理想情况下，我会将`UINavigationController's`视图添加到屏幕上的某个部分（在视​​图控制器的视图上）说：

```
CGRectMake(self.view.frame.size.width / 2, 20, 320, 400); 
```

但正如 Apple 文档所说，您不应该以这种方式使用导航控制器（作为现有视图控制器上的子视图）。

我能做些什么来模仿或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:22:10.713

我已经看到它完成了，它确实给你在其中显示的控制器上的 viewWillAppear/willRotate/etc 方法带来了一些小故障。

解决方法是在添加/删除它时在导航控制器上手动调用 viewWillAppear / etc，但这不是最好的方法。

另一种方法是在不可关闭的弹出框上显示此控制器，您可以通过实现 UIPopoverController 委托函数来实现：

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController {
    return NO;
} 
```

这将使用户无法通过单击外部来关闭它。您可以从条形按钮项目（旋转后自动定位）或矩形（旋转后必须重新定位）显示弹出框，但您可以不显示弹出框方向箭头，以使其“悬停”在您的父视图控制器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:19:20.967

创建一个适合该区域的 UIView，并让该视图托管表格和您想要的任何其他内容。如果您需要像导航栏一样“推送”视图，您可以使用视图动画或 UIView 的转换方法。如果我这样做，我可以创建一个“帮助”类来管理所有这些视图和控件——或者至少是现有类的一个类别——以免弄乱你的主类。

# c# - 在 MVC3 中使用列表或数组构建查询字符串

> ID：12377985
> 
> 赞同：2
> 
> 时间：2012-09-11T21:11:14.570
> 
> 标签：c#, asp.net-mvc

我有一个带有返回日历页面的搜索表单。在顶部，我有一些搜索条件，如果它只有一个值，但如果它是一个列表，则一切正常。当我想在我的模型中构建下个月的 url 时，我有这样的东西：

```
public ActionResult GetUrl()
    {
        var action = GetBaseAction();
        if (SelectedDivisions.Any()) action.AddRouteValue("SelectedDisions", SelectedDivisions.ToArray());
        if (RoomId.HasValue) action.AddRouteValue("RoomId", RoomId.Value);
        if (TeacherId.HasValue) action.AddRouteValue("TeacherId", TeacherId.Value);
        if (Month.HasValue) action.AddRouteValue("Month", Month.Value);
        if (Year.HasValue) action.AddRouteValue("Year", Year.Value);
        if (Day.HasValue) action.AddRouteValue("Day", Day.Value);

        return action;
    } 
```

将参数添加到下个月的 URL ：

[http://afi.local/coursesession/calendar?Month=9&Year=2012&Day=18&ViewType=weekly](http://afi.local/coursesession/calendar?Month=9&Year=2012&Day=18&ViewType=weekly)

但由于您可以选择多个部门，它是一个复选框列表，所以当我发布我的表单时，我会得到这个 URL：

[http://afi.local/coursesession/calendar?Month=9&Year=2012&Day=18&ViewType=weekly&SelectedDivisions=1&SelectedDivisions=2](http://afi.local/coursesession/calendar?Month=9&Year=2012&Day=18&ViewType=weekly&SelectedDivisions=1&SelectedDivisions=2)

问题是，如果我添加 2 次相同的键，它会引发异常，并且我不知道如何使用查询字符串中的多个分区来重建我的 URL。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:17:56.953

This is a possible duplicate:

[how may i add integer list to route](https://stackoverflow.com/questions/6395290/how-may-i-add-integer-list-to-route)

The short answer is: you can't using the helper. You have to build it by hand.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:14:50.443

String.Join may be one option:

```
 String.Join(",", SelectedDivisions.ToArray()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:51:45.033

我在这里找到了解决方案：[https ://stackoverflow.com/a/717732/245836](https://stackoverflow.com/a/717732/245836)

基本上我所做的是：

```
var routeValues = new RouteValueDictionary();
            for (var i = 0; i < SelectedDivisions.Count; i++)
            {
                routeValues["SelectedDivisions[" + i + "]"] = SelectedDivisions[i];
            }
            action.AddRouteValues(routeValues); 
```

生成的 URL 不是很干净，但绑定工作正常：

[http://afi.local/coursesession/calendar?SelectedDivisions%5B0%5D=1&SelectedDivisions%5B1%5D=2&SelectedDivisions%5B2%5D=3&Month=9&Year=2012&Day=11&ViewType=weekly](http://afi.local/coursesession/calendar?SelectedDivisions%5B0%5D=1&SelectedDivisions%5B1%5D=2&SelectedDivisions%5B2%5D=3&Month=9&Year=2012&Day=11&ViewType=weekly)

所以现在我可以复制粘贴该 URL，它适用于我日历中的任何搜索。

# jquery - 浮动元素上的jquery动画

> ID：12377986
> 
> 赞同：0
> 
> 时间：2012-09-11T21:11:15.107
> 
> 标签：jquery, jquery-animate, css-float, accordion, responsive-design

我是 javascript 新手，我在使用 jquery 为浮动元素设置动画时遇到问题，希望有人可以帮助我修复它。我将能够制作一个 100% 宽度的水平手风琴。

为此，我在包装器中有一些浮动 div。使用 javascript，我将包装器的宽度除以 div 的数量（百分比）。然后，单击时，选择的 div 采用大尺寸，其他 div 采用小尺寸。问题是在动画期间，最后一个 div 位于底部。最后，它去了好地方。我已经看到问题取决于窗口的大小。在某些情况下，没关系，但并非总是如此。这是一个小提琴链接：[测试](http://jsfiddle.net/DcuqW/)

我的解决方案是将总宽度设置为 99%，例如将开放尺寸设置为 69% 而不是 70%，但我真的需要将其设置为 100% 宽度并且真的不知道如何制作。如果有人可以帮助我解决此问题或找到其他解决方案，那就太好了。

PS：原谅我的英语:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:41:46.450

问题是您有两个不完全同步的独立动画正在运行，并且您希望两者的总百分比始终小于 100%。当你同时启动它们时，有时这不会发生，一旦总数超过 100%，最后一个就会被推到下一行。

最简单的解决方法是稍微延迟你正在增长的那个，这样总数总是小于 100%。您可以看到在第二个动画中添加了 .delay(50) 以确保增长的元素始终位于收缩的元素之后，因此总数始终小于 100%。工作演示：http: [//jsfiddle.net/jfriend00/Fkb5K/](http://jsfiddle.net/jfriend00/Fkb5K/)。

添加的代码片段`.delay(50)`：

```
if (!$el.hasClass('current'))
    {

        // Animate other columns to smaller size 
        $otherItems
        .removeClass('curCol')
        .stop(true)
        .animate({ 'width': $closedItemsWidth }, 500, 'linear')
        .css({"cursor":"pointer"});

        // Animate current column to larger size 
        $el
        .addClass('curCol')
        .stop(true)
        .delay(50)
        .animate({ 'width' : $openItemWidth }, 500, 'linear')
        .css({'cursor' : 'default'});

    // Make sure the correct column is current
    $otherItems.removeClass('curCol');
    $el.addClass('curCol');  

    } 
```

可能最好的解决方案是自定义动画，在完全相同的动画中更改两个宽度百分比（只有一个动画，而不是两个），因此它们始终完美同步。

这是一个自定义动画。它会删除您正在增长的元素的动画，而是在所有较短的元素上添加一个步进函数回调。每当元素之一在动画中更改大小时，都会调用 step 函数。在那个阶梯函数中，它会在那个时间点对较短元素的宽度求和，并设置较长的元素来精确跟踪它，每次都达到 100% 的完美总和。

```
// On click
$grid.delegate('#grid > .col', 'click', function () {
    // Settings
    var $el = $(this);
    var $allItems = $grid.children('.col');
    var $otherItems = $allItems.not($el);

    if (!$el.hasClass('current')) {
        // Animate other columns to smaller size 
        $otherItems.stop(true)
        .removeClass('curCol')
        .animate({ 'width': $closedItemsWidth}, {step: function(prop, fx) {
            var cumWidth = 0;
            var item = this;
            $otherItems.each(function() {
                // haven't changed the width of this item yet, so use new width
                if (this == item) {
                    cumWidth += fx.now;
                } else {
                    cumWidth += parseFloat(this.style.width);
                }
            });
            $el.css({width: (100 - cumWidth) + '%'});
        }, duration: 500 }, 'linear')
        .css({"cursor":"pointer"});

        // Animate current column to larger size 
        $el.addClass('curCol').css({'cursor' : 'default'});
    }
})​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/7zubL/](http://jsfiddle.net/jfriend00/7zubL/)

# r - ggplot 多个图选择自己的颜色

> ID：12377987
> 
> 赞同：0
> 
> 时间：2012-09-11T21:11:20.617
> 
> 标签：r, ggplot2

> **可能重复：**
> [如何更改 ggplot2 中的线条和形状颜色？](https://stackoverflow.com/questions/11835451/how-to-change-line-and-shape-colours-in-ggplot2)

```
pdf('test',onefile=T)
    g <- ggplot(test,aes(x=timepoints,y= mean,ymax = mean + sde, ymin = mean  - sde,colour=Experiment)) + 
       geom_errorbar(width=2) + 
       geom_point() +
       geom_line() +
       xlab('Time (min)') +
       ylab('Fold Induction') +          
       opts(title = '5 min v 6 hr KCl treatment')    
    print(g)
dev.off() 
```

这就是它打印的内容。

![在此处输入图像描述](../Images/08ca7be8ef7e9db700cfc2d808fd3d71.png)

如何将颜色从默认更改为红色和黑色？所以'5 min'是红色的，'6 hr'是黑色的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:15:16.163

Use scale_manual to manually define the scales:

```
g + scale_colour_manual(values = c("red", "black")) 
```

# c# - 为什么异步 C# 套接字代码中的异常会在没有堆栈跟踪的情况下终止我的程序？

> ID：12377988
> 
> 赞同：0
> 
> 时间：2012-09-11T21:11:25.443
> 
> 标签：c#, sockets, asynchronous

我有一个 C# Windows UI 程序，`Window1 : Window`在它的构造函数中我启动了一个异步套接字服务器，并将数据流式传输到使用和`while (true) { /* BeginAccept */ }`连接的任何客户端。`BeginSend``EndSend`

如果其中一个客户端被强制断开连接`Socket.EndSend`会引发异常（有点令人惊讶的是，`ObjectDisposedException`而不是`SocketException`，但无论如何）。

该异常**终止了我的整个程序**（关闭窗口），但不打印堆栈跟踪！

相反，我只得到一个无辜的

```
A first chance exception of type 'System.ObjectDisposedException' occurred in System.dll 
```

输出面板中的消息。

如果异常像这样被*静音*但仍然在没有堆栈跟踪的情况下使我的程序崩溃，我应该如何找到引发异常的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:14:26.057

好吧，这取决于您使用的 .NET 版本。但是，这通常是记录在案的情况。

如果您不希望这种情况发生，请在线程入口点中使用顶级异常处理程序并“吞下”异常——在退出线程之前记录它或您想做的任何其他事情。

就诸如 之类`BeginSend`的方法而言，给予`BeginSend`（或`BeginAccept`就此而言）的方法实际上是线程入口点。例如

```
listener.BeginAcceptTcpClient(OnAccept, null);
//...

private static void OnAccept(IAsyncResult ar)
{
    try {
        var tcpClient = listener.EndAcceptTcpClient(ar);
        //...
    } catch(Exception ex)
    {
        Dump(ex);
        return;
    }
} 
```

# python - 如何防止 sqlite 将字符串评估为数学表达式？

> ID：12377992
> 
> 赞同：1
> 
> 时间：2012-09-11T21:11:32.970
> 
> 标签：python, sqlite

简单的问题可能有一个非常简单的答案。我正在将格式为“2012-06-10”的日期字符串从 Python 脚本写入 TEXT 列。

例如

```
cur.execute("CREATE TABLE tbl(date TEXT, ...)")

cur.execute('INSERT INTO tbl VALUES(%s)' % (str(date[i])), ...)

```

该脚本实际上正在*评估*日期字符串，因此“2012-06-10”作为“1996”写入表中。通过阅读文档，我猜这与类型亲和力有关，但我不知道如何覆盖甚至为什么要评估字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T21:14:14.373

两种方式：

*   通过使用参数化查询：`cur.execute("INSERT INTO tbl VALUES (?), [str(date[i])])`. 这是最好的方法。这样做。第二种方法仅供后代使用。
*   通过引用值（注意：这几乎可以肯定在几乎所有情况下都是错误的方式）`cur.execute("INSERT INTO tbl VALUES ('%s')" %(str(date[i]), )`：. 这种方法不是最理想的，因为除非你小心，否则你很容易受到 SQL 注入的攻击。

要理解为什么会这样，想象一下你的代码发送到 SQLite 的查询：

```
 INSERT INTO tbl VALUES (2012-06-10); 
```

SQL 引擎正确评估为：

```
 INSERT INTO tbl VALUES (1996); 
```

引用该值将解决此问题：

```
 INSERT INTO tbl VALUES ('2012-06-10'); 
```

但是，如果值中包含某些字符（如`'`或空字节之类的字符），则可能会导致问题。

但是，对于参数化查询，值是与查询分开发送的，因此它们不会被误解。

# objective-c - 修改旋转对象的比例时如何计算 NSAffineTransform 的平移偏移量

> ID：12377993
> 
> 赞同：0
> 
> 时间：2012-09-11T21:11:39.220
> 
> 标签：objective-c, transform, scale

我正在构建一个 Mac 应用程序，我可以在其中将图像添加到屏幕上，并且可以通过 NSAffineTransform 进行修改，平移和旋转对象都可以，但是如果对象已旋转，则缩放会出现问题

当用户选择对象时，它会在对象的角处生成 4 个约点，因此当从右下角缩放时，它应该将对象保持在左上角，但它会稍微远离左上角，它可能只是部分的，但随着缩放比例变大，效果会更明显。

其他语言中也有其他用户对此有类似[问题](https://stackoverflow.com/questions/11583922/how-we-can-calculate-the-correct-x-and-y-value-for-the-rotated-image)，但由于这些都不适合我，最好打开一个新问题

![类似问题](../Images/0b701c06b48e74e51fcf2f089f5e41f6.png) ![我希望它如何](../Images/41a7b1079ffb535368faf06386de0b3f.png)