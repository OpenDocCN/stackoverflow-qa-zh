# StackOverflow 问答 10616000-10616999

# java - 休眠同时更新

> ID：10616002
> 
> 赞同：0
> 
> 时间：2012-05-16T09:46:57.567
> 
> 标签：java, hibernate

考虑一个场景 2 应用程序访问/更新单个数据库。其中一个应用程序正在使用休眠并从数据库中获取了一些记录，现在将处理它们并将其保存回来。但在保存之前，同一组记录会被另一个应用程序更新。在这种情况下会发生什么？hibernate 会在保存时抛出错误吗？或休眠将有智能同步更新的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:50:52.903

hibernate 会抛出`StaleObjectException`. 这就是[为什么](http://turgaykivrak.wordpress.com/2009/05/16/72/)。

Hibernate 使用[乐观锁](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)来处理数据库并发。`StaleObjectException`如果要更新的数据在当前事务提交更改之前被另一个事务修改，则抛出A。

编辑：

*hibernate如何识别内存中对象的状态是陈旧的？*

Hibernate 使用版本字段来跟踪对实体的更改。此版本字段在每次提交时更新。现在，如果提交之前的版本号与在事务开始时读取实体时的版本号不匹配，`StaleObjectException`则抛出。

# php - 在 php 中使用 str_replace 时出错？

> ID：10616004
> 
> 赞同：2
> 
> 时间：2012-05-16T09:46:59.313
> 
> 标签：php, string

我有一个示例代码：

```
$text = "abc ABC def ghi Abc aBc xyz";
$search = "abc"
$string = str_replace(" ".trim($search)." ", 'DEF', $text);
echo $string; 
```

结果是： " `abc ABC def ghi DEF aBc xyz`" // 只有 Abc 变化

但结果恰恰是：“ `abc DEF def ghi DEF DEF xyz`”

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:53:17.953

您可以使用：

```
$regex = '/(\s)'.trim($search).'(\s)/i';
preg_match_all($regex, $text, $tmp3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:52:02.147

您可以对 3 个变体使用`str_ireplace`（不区分大小写`str_replace`）3 次`abc`

```
<?php
$text = "abc ABC def ghi Abc aBc xyz";
$search = "abc";
$string = str_ireplace(' ' . trim($search), ' DEF', $text);
$string = str_ireplace(' ' . trim($search) . ' ', ' DEF ', $text);
$string = str_ireplace(trim($search) . ' ', 'DEF ', $text);
echo $string; 
```

或者您可以使用正则表达式：

```
$text = "abc ABC def ghi Abc aBc xyz";
$search = "abc";
$string = preg_replace("/(\s*)abc(\s*)/i", '$1DEF$2', $text);
echo $string; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:50:04.740

您需要尝试不区分大小写的字符串替换。`str_ireplace`在 PHP [http://codepad.org/atBbj8Kp](http://codepad.org/atBbj8Kp)

```
 <?php
   $text = "abc ABC def ghi Abc aBc xyz";
    $search = "abc";
    $string = str_replace(" ".trim($search)." ", 'DEF', $text);
    echo $string;
    echo PHP_EOL;
    $string = str_ireplace(" ".trim($search)." ", 'DEF', $text);
    echo $string;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:50:32.800

预期的结果实际上是：

```
abc DEF def ghi DEF DEF xyz 
```

第一个“abc”与搜索字符串中的空格不匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:51:50.677

我想这就是你要找的吗？基本上它使用不区分大小写的搜索和替换`str_ireplace`。

```
<?php
$text = 'abc ABC def ghi Abc aBc xyz';
$search = 'abc';
$string = str_ireplace(trim($search), 'DEF', $text);
echo $string;
?> 
```

输出：`DEF DEF def ghi DEF DEF xyz`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T09:52:46.693

如果您想进行不区分大小写的查找和替换，str_replace 是不适合您的任务的工具。

试试这个：

```
$string = stri_replace(trim($search), 'DEF', $text) 
```

或者

```
$string = preg_replace('@\b' . trim($search) . '\b@i', 'DEF', $text); 
```

如果问题中的额外空格是为了防止部分匹配 - 你想要这个`preg_replace`版本，除非你不在乎它不会找到/替换第一个/最后一个字符串

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T09:56:17.890

```
$string = str_ireplace( $search , 'DEF', $text); 
```

输出 ：

```
 DEF DEF def ghi DEF DEF xyz 
```

如果要修剪替换的输出：

```
$string = str_ireplace($search, 'DEF', $text);
$string = str_ireplace(" DEF ", 'DEF', $string); 
```

输出：

```
DEFDEFdef ghiDEFDEF xyz 
```

# sql-server - 存储过程的默认返回值

> ID：10616007
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:47:15.667
> 
> 标签：sql-server, sql-server-2005, stored-procedures, sql-server-2000

我是 SQL Server 的新手。目前我正在处理现有的源代码，我对存储过程有一些不清楚的地方

举些例子：

**My_Stored_Procedure_1**

```
CREATE PROC [dbo].[My_Stored_Procedure_1]
    @ID INT,
    @DATE DATETIME
AS
BEGIN
    UPDATE query...
    PRINT 'ID is ' + CAST(@ID AS VARCHAR(10))
END 
```

**My_Stored_Procedure_2**

```
CREATE PROC [dbo].[My_Stored_Procedure_2]
   @RESULT INT
AS
BEGIN
   EXEC @RESULT = My_Stored_Procedure_1 // Unclear point
END 
```

我的问题是，我没有看到来自 的任何返回值`My_Stored_Procedure_1`，那么将返回什么`@RESULT`变量？可能是已执行存储过程的默认返回值？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:54:34.123

@Result 将具有在执行存储过程 My_Stored_Procedure_2 时传递的默认值。

该语句`EXEC @RESULT = My_Stored_Procedure_1`将执行错误并终止 My_Stored_Procedure_2 的执行，因为您在调用它时没有将两个输入参数传递给 My_Stored_Procedure_1 sp。

# asp.net - 使用 schema.ini 作为验证器将 CSV 导入 SQL

> ID：10616011
> 
> 赞同：0
> 
> 时间：2012-05-16T09:47:19.047
> 
> 标签：asp.net, sql, validation, csv, schema

在加载到 SQL 之前，我使用 schema.ini 来验证 CSV 文件中的数据类型/列。如果一行中存在数据类型不匹配，它仍将导入该行，但将该特定不匹配单元格留空。如果有任何问题和/或提供错误报告（即哪一行有问题），是否有办法阻止用户导入 CSV 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:35:31.607

看看他的 FileHelpers 库：[http ://www.filehelpers.com/](http://www.filehelpers.com/)

这是一个非常强大的库，可以进行各种导入，包括 csv，它们还有一个非常简洁的错误处理部分

> 使用不同的错误模式 FileHelpers 库支持 3 种错误处理。
> 
> 在标准模式下，您可以在出现故障时捕获异常。这种方法还不错，但是您会丢失有关当前记录的一些信息，并且由于未分配而无法使用记录数组。
> 
> 更智能的方法是使用 ErrorManager 的 ErrorMode.SaveAndContinue：
> 
> 使用这样的引擎，您可以在 records 数组中获得良好的记录，而在 ErrorManager 中，您可以找到带有错误的记录，并且可以随心所欲地进行操作。
> 
> 另一种选择是忽略错误并继续本示例中显示的方式
> 
> 1 engine.ErrorManager.ErrorMode = ErrorMode.IgnoreAndContinue; 2 3 条记录 = engine.ReadFile(... 复制到剪贴板 | 查看普通 | 打印 | ? engine.ErrorManager.ErrorMode = ErrorMode.IgnoreAndContinue;
> 
> records = engine.ReadFile(... 在 records 数组中你只有好的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:26:28.210

最好的方法是检查文件是否有任何不匹配；但是在大文件的情况下，那么这是不可行的。您可能需要先加载它，然后检查表中加载的数据是否不匹配。这比检查文件要快得多（您可以使用简单的 T-SQL 脚本来检查表中的空值）。如果发现不匹配，则可以通知用户，然后可以清除表。

# twitter - 按国家/地区获取顶级推特趋势

> ID：10616017
> 
> 赞同：2
> 
> 时间：2012-05-16T09:47:53.810
> 
> 标签：twitter

我知道如何使用 API 获取趋势，但我希望按国家和前 10 名进行。

我怎样才能 ？那可能吗？

试过这个但不工作

```
http://api.twitter.com/1/trends/current.json?count=50 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-14T11:47:24.427

请注意，Twitter API v1 不再起作用。[阅读公告](https://dev.twitter.com/blog/api-v1-retirement-date-extended-to-june-11)
所以你应该使用 Twitter API 1.1。

REST 方法是这样的：[GET 趋势/地点](https://dev.twitter.com/docs/api/1.1/get/trends/place)

```
https://dev.twitter.com/docs/api/1.1/get/trends/place 
```

您应该使用访问令牌进行身份验证以访问此数据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-16T10:29:23.637

是的你可以。

首先，弄清楚您要获取[哪些国家/地区的数据。](https://dev.twitter.com/docs/api/1/get/trends/:woeid)

打电话

```
https://dev.twitter.com/docs/api/1/get/trends/available 
```

将为您提供 Twitter 具有趋势的所有国家/地区的列表。

假设您想要英国的趋势。上面告诉我们WOEID是23424975。

要了解英国的[十大趋势](https://dev.twitter.com/docs/api/1/get/trends/available)，请致电

```
https://api.twitter.com/1/trends/23424975.json 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:13:06.937

你需要弄清楚woeids首先在这里使用这个工具[http://sigizmund.info/woeidinfo/](http://sigizmund.info/woeidinfo/)然后它变得像一个简单的函数一样简单

```
function get_trends($woeid){
        return json_decode(file_get_contents("http://api.twitter.com/1/trends/".$woeid.".json?exclude=hashtags", true), false); 
    } 
```

给你，我为你写了一个简单的示例脚本。在这里查看[Twitter 趋势获取器](http://clients.nishantarora.in/projects/twitter_trends/)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-09T07:10:32.800

我在这个派对上有点晚了，但你可以使用：

# npm i twit --save

然后，

```
const Twit = require('twit');
const config = require('./config');
const T = new Twit(config);
const params = {
	id: '23424829',
	id: '23424975',
	id: '23424977'
	// count: 3
};

T.get('trends/place', params, gotData, limit);

function gotData(err, data, response) {
	var tweets = data;
	console.log(JSON.stringify(tweets, undefined, 2));
}
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-01T15:07:39.963

您必须使用 Api Key 完成身份验证才能以 JSON 格式获取结果。

另一件事记住 Twitter Api 是有限的。

如果您正在为热门 Twitter 趋势制作网站，请访问此网址[https://twitter-trends.vlivetricks.com/](https://twitter-trends.vlivetricks.com/)，右键单击 >> 复制源代码并使用您的 Json 变量仅替换趋势名称。

# c# - 在 Silverlight 中使用复选框

> ID：10616020
> 
> 赞同：0
> 
> 时间：2012-05-16T09:47:59.350
> 
> 标签：c#, database, silverlight, toggle

我在 Silverlight 的子窗口中使用复选框。

当用户单击复选框时，它会向数据库发送一个切换功能，如果选中复选框，则值 = 1，未选中值 = -1，因此切换正在更改这些值。

通过使用以下代码 -

```
private int checkCounter1 = 0;

private void checkBox1_Checked(object sender, RoutedEventArgs e)
{
    if (checkCounter1 == 0)
    {
    }
    else
    {
        //Web Service toggle function 
    }

    checkCounter1 = 1;
}

private void checkBox1_Unchecked(object sender, RoutedEventArgs e)
{
    if (checkCounter1 == 0)
    {
    }
    else
    {
        //Web Service toggle function
    }

    checkCounter1 = 1;
} 
```

当用户单击复选框时，这将按预期调用 web 服务，并且值正在切换。

我的问题是，当加载子窗口时，由于某种原因，这会在`checkBox1_Checked`. 我不知道为什么。因此，通过添加`checkCounter`我希望这会跳过页面加载时的切换功能。

在页面加载时，我目前正在使用另一个 Web 服务调用来调用复选框的值，例如，如果数据库中的值为 = 1，则应在表单上选中复选框 -

```
void Settings_Loaded(object sender, RoutedEventArgs e)
{
    cosainWebService.Service1SoapClient();
    client.callFlagsCompleted += new EventHandler<callFlagsCompletedEventArgs>(client_callFlagsCompleted);
    client.callFlagsAsync();
} 
```

所以我然后取 callFlags 的结果并在这里使用它-

```
void client_callFlagsCompleted(object sender, callFlagsCompletedEventArgs e)
{            
    string flag = System.Convert.ToString(e.Result);

    foreach (string x in e.Result)
    {
        string[] array = x.Split(',');

        if (array[1] == "Checkbox Name" ) 
        {
            if (array[0] == "1") //this is the value in the database
            {
                checkBox1.IsChecked = true;
            }
            else
            {

            }
        }
    }
} 
```

XAML 复选框看起来像 -

```
<CheckBox Content="CheckBox Name" Height="16" HorizontalAlignment="Left" Margin="12,42,0,0" Name="checkBox1" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked"/> 
```

因此，在调试时，单击复选框将切换数据库中的值，因此当用户选中该框时，该值应存储为“1”，然后我应该能够关闭窗口，再次加载它，然后应该勾选该框，但由于某种原因这不起作用，并且当窗口打开时，它正在切换值。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:03:17.297

我认为这是导致您的 web 服务在页面加载时被触发的事件序列。

1.  在设计模式下，此复选框 1 被选中。
2.  在加载此窗口的运行模式下，它调用 InitializeComponents() （初始化窗口上的控件的方法。不知道此方法在 SL 中的真实名称，但在 Winforms 和 WPF 中它的 InitializeComponents ）。

3.  它在那里检查复选框，因为这是它在设计模式下的方式。这会导致调用您的服务的事件被触发。

首先不要将数据库中的值保存为`1`or `-1`。

另存为`0`或`1`。这些是`int`值，可以直接转换为布尔值，`true`并且`false`可以进一步分配给您的复选框。

在 UI 中不要选中您的复选框。在从数据库中检索数据时的 Window Load 中，执行此操作

```
void Windows_Loaded(....)
{
    bool i = value_from_database(); //------- Line No. 1
    checkBox1.Checked -= new RoutedEventHandler(checkBox1_Checked); //Line No. 2
    checkbox1.Ischecked = i; //------- Line No. 3
    checkBox1.Checked += new RoutedEventHandler(checkBox1_Checked); //Line No. 4
} 
```

当您将数据库值分配给复选框时，它的选中事件将不会触发（因为它已被第 2 行删除）。

现在，当它为它分配该值时。（第 3 行）

我们将再次将该事件添加到我们的复选框中。（第 4 行）

# c# - 使用 AppSettings.AllKeys

> ID：10616022
> 
> 赞同：0
> 
> 时间：2012-05-16T09:48:01.107
> 
> 标签：c#, web-config

我正在尝试使用如下应用程序键：

```
<add key="APPLE" value="TESTER"/>
<add key="apple" value="TESTER"/>
<add key="ORANGE" value="DEVELOPER"/> 
```

现在的问题是，当我将 AllKeys 用作：

```
WebConfigurationManager.AppSettings.AllKeys.Contains(Fruits) 
```

AllKeys 仅包含 APPLE 和 ORANGE 的密钥，而“apple”则没有任何内容。是不是因为“apple”和“APPLE”都与“TESTER”具有相同的价值？

否则“APPLE”和“apple”的键之间的 Allkeys 冲突

任何指针??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:56:50.830

AppSettings 是一个[`NameValueCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)谁的默认比较器是[`CaseInsensitiveComparer`](http://msdn.microsoft.com/en-us/library/system.collections.caseinsensitivecomparer.aspx)

# php - php单引号不能在sprintf上正常工作

> ID：10616024
> 
> 赞同：0
> 
> 时间：2012-05-16T09:48:32.290
> 
> 标签：php, string

我`sprintf()`在我的程序中使用来输出一些制表符和换行符。我注意到我的程序的一部分无法正常工作。

当我检查不工作的部分时，我注意到我使用了单引号`'`而不是双引号`"`，并且程序实际上输出了 a`\t`而不是不可见的制表符空间。

我认为这两者是相似的，php 有两个分隔符的原因是我们能够在字符串中插入单引号或双引号，或者在`echo`不插入转义字符的情况下插入它们。

除了我发现的变量之外，分配变量会不会有所不同

```
$a = "qq";
$b = 'qq'; 
```

它们会以不同的方式存储在计算机的内存中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:51:34.217

您可以参考手册，其中指定 php 中的单引号将大多数转义序列视为 litterals，与双引号相反：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:04:59.480

*   单引号比双引号快
*   双引号可以解析php变量。即**$a=2；**如果你使用**echo "a is: $a";** 那么它将打印**a is: 2**但单引号将打印**a is: $a**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:00:54.563

```
if you use single quotes for the format string (like you should do, since there 
aren't any variable conversions to do as long as you don't need any special chars), 
the given examples won't work because of the backslash before the $ (needs to be 
escaped in double quoted strings - but not in single quoted!) http://php.net/manual/en/function.sprintf.php 
```

# dependencies - 捆绑中未解决的约束，在 Maven 中排除了依赖项

> ID：10616025
> 
> 赞同：1
> 
> 时间：2012-05-16T09:48:41.287
> 
> 标签：dependencies, osgi, apache-karaf, querydsl

我在我的 osgi 应用程序中使用 querydsl 库。工件 querydsl-jpa 具有 hibernate-jpa-2.0-api 作为依赖项。

我在 pom.xml 中添加了这样的排除项，因为我不使用休眠。仍然当我尝试启动我的服务（通过 karaf features.xml 文件）时，我得到了这个：

执行命令时出错：无法在功能 querydsl-jpa-2.5.0 中启动捆绑 mvn:com.mysema.querydsl/querydsl-jpa/2.5.0：捆绑 com.mysema.querydsl.jpa [223] 中未解决的约束：无法解析 223.0：缺少要求 [223.0] 包；(&(package=org.hibernate)(版本>=3.6.8.Final))

mvn project dependency:tree 不返回任何休眠依赖项。这是否意味着即使明确排除了依赖项，osgi 依赖项也仅由 querydsl 包的清单文件确定？

```
 <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>2.5.0</version>
        <exclusions>
        <exclusion>
        <groupId>org.hibernate.javax.persistence</groupId>
  <artifactId>hibernate-jpa-2.0-api</artifactId>
        </exclusion>
        </exclusions>
    </dependency> 
```

以及 features.xml 的摘录

```
 <feature name='querydsl-jpa' version='2.5.0'>
  <bundle>mvn:org.apache.felix/org.osgi.compendium/1.4.0</bundle>
  <bundle>mvn:org.apache.geronimo.specs/geronimo-jpa_2.0_spec/1.1</bundle>
  <bundle>mvn:com.mysema.querydsl/querydsl-core/2.5.0</bundle>
  <bundle>mvn:com.mysema.commons/mysema-commons-lang/0.2.2</bundle>
  <bundle>mvn:com.mysema.querydsl/querydsl-sql/2.5.0</bundle>
  <bundle>mvn:com.mysema.querydsl/querydsl-jpa/2.5.0</bundle>
</feature> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:11:45.750

pom.xml 确定在构建时发生的事情，而不是在运行时。很容易混淆在 pom 中声明的依赖项和在清单中声明的​​依赖项，因为两者似乎都涉及依赖项，但它们实际上非常不同。OSGi 运行时不知道也不关心 maven，因此它从不查看您的 pom 文件。OSGi 就依赖关系进行通信的方式是通过清单。显然，pom 中的内容会影响清单中的内容，但仅适用于您构建的捆绑包。在这里，您没有重建 querydsl 包，因此清单是它附带的。

如果那个包声明了对休眠的依赖，你应该假设它确实需要休眠。如果您确定依赖项是可选的，则应向捆绑包的所有者报告错误。当您等待修复时，您可以选择重新构建包，向`optional=true`休眠包添加指令，或者制作一个导出丢失的休眠包的虚拟包。这将使 querydsl 包启动，但我会非常谨慎地使用这种方法。您正在使用 hack 绕过 OSGi 的安全机制，并且您冒着在运行时获得 NoClassDef 异常和其他故障的风险，除非使用 hibernate 的代码路径完全未使用。

# ruby-on-rails - Rails 3 - Windows + Mongrel（调度程序出错）

> ID：10616026
> 
> 赞同：0
> 
> 时间：2012-05-16T09:48:47.537
> 
> 标签：ruby-on-rails, windows, mongrel

我正在尝试将 rails 3 应用程序部署到 windows 机器（是的，它必须是 windows，我不能使用 linux）

我决定尝试使用 Mongrel + Apache（如果有人知道可行的设置，我愿意尝试其他设置）。

我已经安装了 mongrel，我可以运行 rails server mongrel 并正常运行我的应用程序。但是，当我尝试将 mongrel 作为 Windows 服务启动时，使用

```
mongrel_rails service::install -N mongrel1 -e production -p 3001 -c mydirectory` 
```

我遇到了麻烦。服务器启动正常，但是当我尝试进入网页时，我的`mongrel.log`文件中生成了以下错误。

```
Error calling Dispatcher.dispatch #<NameError: uninitialized constant ActionController::CgiRequest>
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:76:in `block in process'
<internal:prelude>:10:in `synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:74:in `process'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:165:in `block in process_client'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:164:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:164:in `process_client'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:291:in `block (2 levels) in run' 
```

我已尝试阅读此内容，但所有设置指南似乎都过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:46:16.620

我正在使用 Apache + Mongrel 在 Windows (Win7) 上运行 Rails 3 应用程序。这也许是另一种方法。在 httpd.conf 中，我将 DocumentRoot 设置为我的 rails 应用程序的路径。然后将 Directory 标记设置为 Document Root 的任何内容。然后添加一个VirtualHost标签如下：

```
<VirtualHost localhost:80>
  Servername YourAppServer
  DocumentRoot "same path as before"
  ProxyPass / http://localhost:3000/
  ProxyPassReverse / http://localhost:3000/
  ProxyPreserveHost On
</VirtualHost>" 
```

ServerName 值我认为是任意的。

您还需要添加： LoadModule proxy_module modules/mod_proxy.so LoadModule proxy_http_module modules/mod_proxy_http.so

我想如果您使用端口 3001 而不是 3000，则可以进行适当的替换。

然后使用“rails server -e production -p 3001”启动所有内容（从您的应用程序文件夹）（Apache 应该已经在运行）

# html - 使用 scala 和 play2 框架或 playN 创建 2d html5 点击并玩游戏？

> ID：10616028
> 
> 赞同：1
> 
> 时间：2012-05-16T09:48:50.143
> 
> 标签：html, scala, playframework, playn

我正在制作一个技术手表，以便在 html5/canvas 中创建一个简单的点击和玩游戏，可能像这样：Geminie Rue ( [http://wadjeteyegames.com/gemini-rue.html](http://wadjeteyegames.com/gemini-rue.html) ) 或 machinarium ( [http:// /machinarium.net/demo/](http://machinarium.net/demo/) )

我想使用强大的 html5 功能和可移植性在 scala 中编写这个游戏：canvas、websocket 等。

似乎有两种方法可以做到这一点，使用 google playN 框架（[http://www.google.com/events/io/2011/sessions/kick-ass-game-programming-with-google-web-toolkit。 html](http://www.google.com/events/io/2011/sessions/kick-ass-game-programming-with-google-web-toolkit.html)和[http://code.google.com/p/playn/](http://code.google.com/p/playn/) ) 与 scala-gwt，或尝试使用具有 html5 功能的 play 2 框架。

您对使用这些技术进行游戏创作有什么建议、经验或示例吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:03:07.377

PlayN by design 支持游戏开发。GWT 也很酷，但如果您的游戏是一个简单的游戏，IMO PlayN 可能会为您节省大量工作。

祝你好运！

# c++ - 在 C++ 中创建静态实例的未解决的外部问题

> ID：10616034
> 
> 赞同：1
> 
> 时间：2012-05-16T09:49:16.077
> 
> 标签：c++

我已经生成了这个 C++ 代码：

```
class TestInstance
{
    public:
        TestInstance();
        ~TestInstance();
        static TestInstance& GetInstance();

    private:
        static TestInstance* testInstance;
}; 
```

但是我在编译时遇到了这个错误：

> 错误 LNK2001：无法解析的外部符号“私有：静态类 TestInstance* TestInstance::testInstance”(?testInstance@TestInstance@@0PAV1@A)
> 
> 致命错误 LNK1120：1 个未解决的外部问题

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T09:50:23.557

`static`是的，在实现文件中初始化成员。

```
//TestInstance.cpp
TestInstance* TestInstance::testInstance = NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:09:10.050

您需要在实现文件中初始化静态成员变量。为什么有必要。

由于静态成员变量不是该类的单个对象（或实例）的一部分，因此它们具有该类的所有对象的相同值。这就是为什么静态成员对象在该类的单个对象中没有被赋予内存的原因。那么，如何为他们分配空间。编译器不知道。因此，您必须在实现文件中定义它们，以便编译器可以在该转换单元中为这些成员分配空间。

对于您的班级，如果您将执行 sizeof(a)，其中 a 是班级的一个对象，您将看到大小显示为 1。由于类的对象中没有 testInstance 的空间。并且大小不能为零，所以它将是一。

# java - 开发 RMI 应用程序

> ID：10616037
> 
> 赞同：0
> 
> 时间：2012-05-16T09:49:21.193
> 
> 标签：java, rmi

我正在尝试开发一个简单的数据库应用程序，我希望为此使用 RMI 技术。我需要知道的是，有没有开发 RMI 应用程序的通用框架，还是我们必须从头开发服务器和客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:56:20.730

也许你应该看看：[Remoting and web services using Spring](http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html)。你[有](http://cosminaru.ro/blog/2006/11/02/spring-by-examples-rmi/)这种方法的简单例子。

# javascript - 单击选项卡时在 HTML 中向下跳转

> ID：10616039
> 
> 赞同：1
> 
> 时间：2012-05-16T09:49:26.633
> 
> 标签：javascript, html

在[http://tinyurl.com/75tx5hn](http://tinyurl.com/75tx5hn)上，当我点击“Über die App”或“屏幕截图”时，网站会向下滚动。到标题，你知道如何避免这个问题吗？

奇怪的是，这只发生在 Firefox 和 IE 上，而不是 Chrome 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:54:51.370

使用 javascript 的 focus() 函数显示带有 class="header" 的 div，
例如 document.myform.mytextfield.focus(); 将焦点设置在单击按钮上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:07:30.057

问题是您的链接链接到#about (id="about")，浏览器将尝试转到在浏览器顶部显示它的那个部分。

**测试：**

使用您的浏览器并放大按钮，然后单击链接。您将看到它将显示 ID = about 的 ABOUT 内容部分。

**解决方案 ：**

更改内容的 ID

或更改链接的href

或者设置一个 jquery 事件来阻止默认的浏览器操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:57:22.680

这是预期的行为，考虑到链接锚定到同一页面上的 div：

```
<li><a href="#about">Über die App</a></li>

...

<div id="about" class="pane"> 
```

您可以像这样终止这种行为（您的页面中包含 jQuery）：

```
$(".tabs.page a").click(function (e) {
    e.preventDefault();
}): 
```

...或者只是通过删除 div 上的 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T09:57:44.443

**好的，发现你的问题**

在您的页面代码中找到该行

```
<div id="about" class="pane" style="display: block; "> <!-- Start About Page --> 
```

*标签中的id="about"*导致此问题。如果您更改此 ID 名称，这将得到解决 :)

# java - 是否可以获得Class的实例 >

> ID：10616040
> 
> 赞同：1
> 
> 时间：2012-05-16T09:49:32.113
> 
> 标签：java, generics

是否有可能获得一个实例`Class<SomeGenericClass<SomeType>>`？

例如，`Class<ArrayList<String>>`没有实例化的实例`ArrayList<String>`。

```
@SuppressWarnings("unchecked")
public static <T> T castToGeneric(Object objectToCast, T typeInferrenceClass) {
    return (T)objectToCast;
}

// usage

Object someObject = null /* initialised elsewhere */;
List<String> listOfStrings = castToGeneric(someObject, new ArrayList<String>());

// I want to avoid having to create - new ArrayList<String>(); 
```

我知道这段代码很丑，我不应该这样做。但我们在我们所在的地方......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:55:14.940

如果要实例化`Class<SomeGenericClass<SomeType>>`

```
Class<List<Object>> list = (Class<List<Object>>)(Class<?>)List.class;

Type genericclass = new ArrayList<Object>() {}.getClass().getGenericSuperclass(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:11:25.370

我找到了解决您问题的方法：

```
@SuppressWarnings("unchecked")
public static <T> T castToGeneric(Object objectToCast) {
    return (T)objectToCast;
}

// usage

Object someObject = null /* initialised elsewhere */;
Class<ArrayList<String>> listOfStrings = <Class<ArrayList<String>>>castToGeneric(someObject); 
```

因此，不是将类型作为参数传递，而是将其作为类型参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:46:53.913

这满足您的“无实例”标准，编译并运行正常：

```
Class<ArrayList<String>> c =
    (Class<ArrayList<String>>) Class.forName("java.util.ArrayList"); 
```

这是由于类型擦除而起作用的：在运行时，`ArrayList<String>`is just `ArrayList`，并且进一步`Class<ArrayList<String>>`is just `Class`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:04:38.710

由于 Java 泛型中的类型擦除，对“List<String>”实例调用“getClass”的结果会丢失类型参数“String”，换句话说，可能无法获取“Class<List<String>>” . 但是你可以在 Scala 中做到这一点：

```
scala> List("foo", "bar").getClass
res0: java.lang.Class[_ <: List[java.lang.String]] = class scala.collection.immutable.$colon$colon 
```

# asp.net-mvc-3 - MVC3 Razor 编辑器/显示模板和泛型

> ID：10616042
> 
> 赞同：3
> 
> 时间：2012-05-16T09:49:52.237
> 
> 标签：asp.net-mvc-3, generics, razor, mvc-editor-templates

关于 mvc 模板和泛型有一些问题，但似乎与我正在寻找的内容无关。考虑以下模型：

```
namespace MyNamespace
{
    public class ModelBase { /* Not important for example */ }

    public class MyModel : ModelBase
    {
        public string Name { get; set; }
    }

    public class MyViewModel
    {
        public IEnumerable<ModelBase> Data { get; set; }
    }
} 
```

和一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index 
    {
        return View(new MyViewModel { Data = new List<MyModel>() })
    }
} 
```

Razor 视图 Views/Home/Index.cshtml 如下所示：

```
@model MyNamespace.MyViewModel
@Html.EditorFor(m => m.Data) 
```

那里没什么特别的。如果我想要一个显示或编辑器模板，我可以在 Views/Shared/EditorTemplate 或 Views/Home/EditorTemplates 下创建一个名为 MyModel.cshtml 的文件，它会正确找到它。

如果我想在显示列表时为 ModelBase 的每个实现做一些不同的事情怎么办？Mvc 取景器将在上述任何路径中正确找到 List'1.cshtml 模板。但是我需要做的是为 List`1[MyModel].cshtml 做一个模板

我似乎无法获得正确的文件命名。到目前为止我尝试过的（相对于这个示例命名）：

*   列表`1[MyModel].cshtml
*   列表`1[[MyModel]].cshtml
*   列表`1[MyNamespace.MyModel].cshtml
*   列表`1[[MyNamespace.MyModel]].cshtml

如果可能的话，我想避免编写自定义取景器。如果我不能让上面的东西工作，我现在能想到的唯一选择就是让 List`1.cshtml 调用一个从 List 推导出命名的部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:07:20.320

一个很晚的回复，如果其他人遇到同样的问题，这很有用（就像我刚才所做的那样，试图记住如何做到这一点）

您可以使用[UIHintAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx)来定义编辑器的名称

```
public class MyViewModel
{
    [UIHint("MyModel")]
    public IEnumerable<ModelBase> Data { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:11:40.867

我还没有检查过这段代码，但我会为每个子类型创建不同的视图并做一些愚蠢的事情，比如：

```
return View(MyModel.GetType().Name, new MyViewModel { Data = new List<MyModel>() }) 
```

以便您的 View 与您的类型的名称匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:16:33.270

您可以在主视图中执行此操作：

```
@model MyViewModel
@Html.EditorFor(x => x.Data) 
```

然后有：

*   `~/Views/Shared/EditorTemplates/MyModel.cshtml`：

    ```
    @model MyModel
    ... 
    ```

*   `~/Views/Shared/EditorTemplates/MyOtherModel.cshtml`（显然`MyOtherModel`源自`ModelBase`）：

    ```
    @model MyOtherModel
    ... 
    ```

等等... ASP.NET MVC 将负责循环遍历 Data 属性并根据该集合中每个元素的运行时类型选择正确的模板。

# sql - Oracle 查询输出以逗号分隔

> ID：10616048
> 
> 赞同：1
> 
> 时间：2012-05-16T09:50:09.117
> 
> 标签：sql, oracle, comma, batch-file, csv

我正在为 oracle 编写一个批处理脚本，并希望我的输出为 txt 文件，列以逗号分隔。

```
select 
quote_id ,
coverage_amount from Customer; 
```

但它是以制表符分隔的。如何让它们用逗号分隔。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:51:49.313

```
select 
quote_id || ', ' || coverage_amount 
from Customer; 
```

# android - 错误：java.lang.IllegalStateException：从行 0 col 2 获取字段槽在 Android 中失败

> ID：10616049
> 
> 赞同：0
> 
> 时间：2012-05-16T09:50:16.367
> 
> 标签：android

这是我的 MySqlLiteHelper：

```
public class MySQLiteHelper extends SQLiteOpenHelper {

    public static final String TABLE_CMBS = "cbs";
    public static final String CMB_ID = "_id";
    public static final String COLUMN_CMB = "cmb";
    public static final String COLUMN_INFO  = "cinfo";
    public static final String COLUMN_URL = "imageurl";

    private static final String DATABASE_NAME = "cmbsdr.db";
    private static final int DATABASE_VERSION = 1;

    // Database creation sql statement

    private static final String DATABASE_CREATE =
        "create table "+ TABLE_CMBS +" (_id integer primary key autoincrement, "
        + "cmb text, cbinfo text,"
        + "imageurl text);";

    public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(MySQLiteHelper.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CMBS);
        onCreate(db);
    }

}

    This is my Comments class:

public class Comment {
    private long id;
    private String cmb;
    private String cinfo;
    private String imageurl;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getCmb() {
        return cmb;
    }

    public void setCmb(String cmb) {
        this.cmb = cmb;
    }
    public String getCInfo(){
            return cinfo;
    }
    public void setCInfo(String cinfo){
            this.cinfo = cinfo;
    }
    public void setImageUrl(String imageurl){
            this.imageurl = imageurl;
    }
    public String getImageUrl(){
            return imageurl;
    }

} 
```

这是我的 CommentsDataSource 类：

```
public class CommentsDataSource {

    // Database fields
    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    private String[] allColumns = { MySQLiteHelper.CMB_ID,
            MySQLiteHelper.COLUMN_CMB };

    public CommentsDataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public Comment createComment(String cmb, String cinfo, String imageurl) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_CMB, cmb);
        values.put(MySQLiteHelper.COLUMN_INFO, cinfo);
        values.put(MySQLiteHelper.COLUMN_URL, imageurl);

        long insertId = database.insert(MySQLiteHelper.TABLE_CMBS, null,
                values);
        Cursor cursor = database.query(MySQLiteHelper.TABLE_CMBS,
                allColumns, MySQLiteHelper.CMB_ID + " = " + insertId, null,
                null, null, null);
        cursor.moveToFirst();
        Comment newComment = cursorToComment(cursor);
        cursor.close();
        return newComment;
    }

    public void deleteComment(Comment comment) {
        long id = comment.getId();
        System.out.println("Comment deleted with id: " + id);
        database.delete(MySQLiteHelper.TABLE_CMBS, MySQLiteHelper.CMB_ID
                + " = " + id, null);
    }

    public List<Comment> getAllComments() {
        List<Comment> comments = new ArrayList<Comment>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_CMB,
                allColumns, null, null, null, null,null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Comment comment = cursorToComment(cursor);
            comments.add(comment);

            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return comments;
    }

    private Comment cursorToComment(Cursor cursor) {
        Comment comment = new Comment();
        comment.setId(cursor.getLong(0));
        comment.setCmb(cursor.getString(1));
        comment.setCInfo(cursor.getString(2));
        comment.setImageUrl(cursor.getString(3));
        return comment;
    }
} 
```

我得到错误：

```
05-16 15:07:25.273: E/AndroidRuntime(26017): Caused by: java.lang.IllegalStateException: get field slot from row 0 col 2 failed 
```

当我这样做时：

```
dataSource = new CommentsDataSource(this);
        dataSource.open();

        List<Comment> cmbs = dataSource.getAllComments(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:34:47.057

您的身体投影字符串不适合您的情况。你只是在查询

`private String[] allColumns = { MySQLiteHelper.CMB_ID, MySQLiteHelper.COLUMN_CMB };`

在 allColumns 字符串数组中添加其他两个列名。即`MySQLiteHelper.COLUMN_INFO and MySQLiteHelper.COLUMN_URL`

正确方法： `private String[] allColumns = { MySQLiteHelper.CMB_ID, MySQLiteHelper.COLUMN_CMB, MySQLiteHelper.COLUMN_INFO, MySQLiteHelper.COLUMN_URL };`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:35:14.987

按照给定的方式更改 urn 代码中的行

```
Cursor cursor = database.query(MySQLiteHelper.TABLE_CMB,
            allColumns, null, null, null, null,null); 
```

在方法中

**getAllComments()** bcz 你的表名在 MySQLiteHelper 中是其他的，由 **TABLE_CMBS给出**

```
 Cursor cursor = database.query(MySQLiteHelper.TABLE_CMBS,
            allColumns, null, null, null, null,null); 
```

# ruby-on-rails-3 - 如何编辑与 has_many 关系关联但使用单个类的行项目？

> ID：10616069
> 
> 赞同：0
> 
> 时间：2012-05-16T09:51:10.453
> 
> 标签：ruby-on-rails-3, activerecord

我有一个发票控制器和两个模型发票和 invoice_line_items 并使用 invoice_line_item 类创建 tax_line_items。下面是我的代码：

这是我的控制器代码：

```
class InvoicesController < ApplicationController
def new
    @menu = 'Income'
    @page_name = 'Create new invoice'
    @invoice = Invoice.new
    @invoice.invoice_line_items.build
    @invoice.tax_line_items.build

    respond_to do |format|
      format.html
      format.xml { render :xml => @invoice }
    end
  end
end 
```

我的发票模型：

```
class Invoice < ActiveRecord::Base

  has_many :invoice_line_items
  has_many :tax_line_items, :class_name => "InvoiceLineItem",:dependent => :destroy

  accepts_nested_attributes_for :invoice_line_items, :reject_if => lambda {|a| a[:account_id].blank? } , :allow_destroy => true
  accepts_nested_attributes_for :tax_line_items, :reject_if => lambda {|a| a[:account_id].blank? } , :allow_destroy => true
end 
```

在我的表格中，我使用了：

```
<%= form_for(@invoice) do |f| %>
<%= render 'shared/form_error', :object => @invoice %>
<% @invoice.invoice_line_items.each_with_index do |invoice_line_item, index| %>
                   <%= render "invoice_line_items", :invoice_line_item => invoice_line_item, :index => index %>
                <% end %>
<% @invoice.tax_line_items.each_with_index do |tax_line_item, tax_index| %>
                      <%= render "tax_line_items", :tax_line_item => tax_line_item, :tax_index => tax_index %>     
                <% end %>
<%end%> 
```

部分：

1) invoice_line_items：

```
<tr id="row<%= index %>" valign="top" >
            <%= hidden_field_tag "invoice[invoice_line_items_attributes][#{index}][id]",invoice_line_item.id%>
            <td valign="top">
                <%= select_tag "invoice[invoice_line_items_attributes][#{index}][account_id]", options_from_collection_for_select(@from_accounts, :id, :name,:selected => invoice_line_item.account_id ), :include_blank => true, :class=>"full"  %>
              <!-- <a href="/accounts/new?account_head_id=10" > New item</a> -->
            </td>
      <td><%= text_area_tag "invoice[invoice_line_items_attributes][#{index}][description]",invoice_line_item.description, :class => "full", :cols => 10, :rows=>1 %></td>
      <td><%= text_field_tag "invoice[invoice_line_items_attributes][#{index}][quantity]",invoice_line_item.quantity, :class => 'full', :id => 'quantity', :onkeydown => "return numbersOnly(event);", :size => 5, :maxlength => 25 %></td>
      <td><%= text_field_tag "invoice[invoice_line_items_attributes][#{index}][unit_rate]",invoice_line_item.unit_rate, :class => 'full', :id => 'unit_cost', :onkeydown => "return numbersOnly(event);", :size => 5, :maxlength => 20 %></td><!--Jquery code is in application.js-->
      <td><%= text_field_tag "invoice[invoice_line_items_attributes][#{index}][discount_percent]", invoice_line_item.discount_percent, :class => 'full', :id => 'discount', :onkeydown => "return numbersOnly(event);", :maxlength => 5, :size => 5%></td>
      <td><%= text_field_tag "invoice[invoice_line_items_attributes][#{index}][amount]", invoice_line_item.amount, :class => 'full', :id => 'total', :readonly => 'readonly',  :size => 5%></td>
            <td><%= link_to image_tag("/images/black_icon/ic_cancel.png"),{:action => :remove_line_item, :index => index}, :remote => true unless index == 0 %></td>
    </tr> 
```

和 2) tax_line_items:

```
<tr id="tax_row<%= tax_index %>" valign="top" >
   <%= hidden_field_tag "invoice[tax_line_items_attributes][#{tax_index}][id]",tax_line_item.id%>
   <%= hidden_field_tag "invoice[tax_line_items_attributes][#{tax_index}][tax]", tax_line_item.tax, :value => 1 %>
   <td style="background:#EDF4FF"></td>
   <td  class="ta-right" style="background:#EDF4FF" colspan="2"><label>Add Tax:</label></td>
   <td class="ta-right"  colspan="2" style="background:#EDF4FF">
      <%= select_tag "invoice[tax_line_items_attributes][#{tax_index}][account_id]", options_from_collection_for_select(@tax_accounts, :id, :name,:selected => tax_line_item.account_id ), :include_blank => true, :class=>"full"  %>
      <!-- <a href="/accounts/new?account_head_id=10" > New item</a> -->
   </td>
   <td style="background:#EDF4FF"><%= text_field_tag "invoice[tax_line_items_attributes][#{tax_index}][amount]", tax_line_item.amount, :class => 'full', :id => 'tax', :onkeydown => "return numbersOnly(event);", :size => 5%></td>
   <td style="background:#EDF4FF"><%= link_to image_tag("/images/black_icon/ic_cancel.png"),{:action => :remove_tax_item, :tax_index => tax_index}, :remote => true %></td>

</tr> 
```

我可以轻松添加新的行项目条目，并在它们不是税收项目时对其进行编辑。问题是，当它们是在任何条目中创建的税收项目，然后尝试编辑此条目时，我的行项目行会出现多次，例如假设我有一个税收项目，它们会为发票行项目显示一个新行和一个额外的行对于税单项目。我认为这会发生，因为我为这两个行项目使用了一个公用表。我这样做是因为我必须将两个行项目条目保存在同一个表中，因为两个帐户都来自同一个表。如果有人有正确的答案，我非常感谢。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:19:31.797

正如[这个答案](https://stackoverflow.com/a/9907784/359120)所暗示的，您需要在此表中添加一个“类型”列以区分发票和税项。它将从您的代码中消除很多复杂性，因为 Rails 将完成从公共表中识别哪个记录属于哪个模型类的工作。

# php - 重新格式化数组标记我从 mysql 获取记录，结果在数组中： Array ( [Logodesign] => 130 [Webdesign] => 80 [Printdesign] => 72 [Illustrationdesign] => 49 [iPhoneportfolio] => 23 ) 我想展示我编码的所有类别及其总行数都喜欢这样做： $q = mysql_query("SELECT SUM(IF(cat = 'logodesignportfoli

> ID：10616070
> 
> 赞同：0
> 
> 时间：2012-05-16T09:51:14.443
> 
> 标签：php, mysql, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:54:34.613

用这个：

```
foreach($f as $k => $a){
    echo "<option>".$k.' - '.$a."</option>";
} 
```

# php - 通过 echo 输出输入值

> ID：10616071
> 
> 赞同：0
> 
> 时间：2012-05-16T09:51:22.263
> 
> 标签：php, mysql, html, input

```
<input type="text" name="prod_id" value="<?php echo $product['table']['id']; ?>" /> 
```

但是尽管 $product 变量肯定已正确初始化，但它没有显示任何内容，可能是什么问题？

这是 print_r 产品

```
Array ( 
    [0] => Array ( 
        [product_table] => Array ( 
            [id] => 5 
            [quantity] => 20 
            [name] => something 
        ) 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:05:05.643

您必须以身份访问变量`$product[0]['product_table']['id']`而不是`$product['table']['id']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:04:55.347

您正在尝试输出不存在密钥的内容。你有'product_table'，而不是'table'。

编辑：

它也必须是`$product[0]['product_table']['id']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:20:37.010

用这个

```
<?php
extract($product[0]);
<input type="text" name="prod_id" value="<?php echo $product_table['id']; ?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:07:40.843

```
<input type="text" name="prod_id" value="<?php echo $product[0]['product_table']['id']; ?>" /> 
```

请添加索引 [0] 以确保如果提供的数组有多个值，那么也只会选择第一个值。

# dynamics-ax-2009 - 添加 Outer Join DataSource 时的表单性能

> ID：10616075
> 
> 赞同：3
> 
> 时间：2012-05-16T09:51:36.840
> 
> 标签：dynamics-ax-2009, x++, axapta, ax

我有一个带有以下数据源设置的自定义表单；

```
SalesTable
SalesLine (SalesTable - Inner Join)
InventTable (SalesLine - Inner Join)
InventDim (SalesLine - Inner Join) 
```

...没有任何性能问题。

当我添加以下内容时；

```
InventHazardousGroup (InventTable - Outer Join) 
```

...我在我们的开发环境中没有发现性能问题，但是在生产环境中查询非常慢，这意味着表单需要很长时间才能加载。

SQL 语句跟踪日志在两种环境中都产生了以下输出；

（我已经用 etc 结束了字段列表，因为它很长）；

```
SELECT A.SALESID,A.SALESNAME,A.RESERVATION,A.CUSTACCOUNT,A.INVOICEACCOUNT,A.DELIVERYDATE,A.DELIVERYADDRESS,A.URL,A.PURCHORDERFORMNUM,A.SALESTAKER,A.SALESGROUP,A.FREIGHTSLIPTYPE,A.DOCUMENTSTATUS,A.INTERCOMPANYORIGINALSALESID,etc
FROM  {OJ INVENTTABLE C LEFT OUTER JOIN INVENTHAZARDOUSGROUP E ON ((E.DATAAREAID=?)
AND (C.HAZARDOUSGROUPID=E.HAZARDOUSGROUPID))},SALESTABLE A,SALESLINE B,INVENTDIM D
WHERE ((A.DATAAREAID=?)
AND (A.SALESTYPE=?))
AND ((B.DATAAREAID=?)
AND (A.SALESID=B.SALESID))
AND ((C.DATAAREAID=?)
AND (B.ITEMID=C.ITEMID))
AND ((D.DATAAREAID=?)
AND (B.INVENTDIMID=D.INVENTDIMID))
ORDER BY A.DATAAREAID,A.SALESID OPTION(FAST 1) 
```

有什么理由为什么这在一个环境中应该如此缓慢而在另一个环境中却没有？我在开发环境中测试的数据是最近的，大约 1 个月大。我在不同公司的生产环境中遇到了同样的性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:28:14.683

我之前遇到过这个问题，我认为它与外部连接没有任何关系。这很可能是因为表单在生产与开发中生成的查询数量。SQL 在使用时会尝试缓存查询，并且 AX 喜欢将对象作为变量传递给 SQL。很可能，您在生产环境中有一个糟糕的缓存计划，然后被所有用户使用。我建议使用[Force Literals](http://fredshen.wordpress.com/2006/01/02/forceliterals-forceplaceholders/)。我在一些地方很少使用它，它对性能产生了重大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:59:13.230

检查 AX 中的索引是否存在于 SQL Server 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:25:28.000

检查查询的执行计划。

最简单的方法是登录信息日志（用户设置的 SQL 选项卡上的长查询设置），然后双击有问题的查询。

否则尝试重建表和表的索引`create statistics`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:05:52.137

您在开发中运行什么版本的 SQL Server，以及在生产中运行什么版本。执行 a`DBCC TRACESTATUS(-1);`以确定 dev 与 prod 中的标志。确保这些没有区别。我已经看到了一些问题，当他们这样做时，性能问题会出现在一个中，但不会出现在另一个中。

查询在生产环境中总是运行缓慢，还是只是有时运行缓慢？

# java - JTable中的JSpinner（时间）

> ID：10616077
> 
> 赞同：0
> 
> 时间：2012-05-16T09:51:38.087
> 
> 标签：java, swing, date, jtable, jspinner

我正在尝试在 JTable 中实现一个 JSpinner 时间，它在第一眼看起来就工作得很好，但是在失去单元格的焦点后，编辑的单元格被设置为“Thu Jan 01 +time+ UTC 1970”时间正在正确设置。如何从时间中删除日期？

这是我的洞 SpinnerEditor.class ，添加了一些评论。

代码 ：

```
public SpinnerEditor(String timeFormat) {
    super(new JTextField());

    // Default Time I want to Display (1 Hour)
    Time date = new Time(3600000);
    SpinnerDateModel timeModel = new SpinnerDateModel(date, null, null,Calendar.MINUTE);
    spinner = new JSpinner(timeModel);
    editorDate = new JSpinner.DateEditor(spinner, timeFormat);
    spinner.setEditor(editorDate);

    editorDate = ((JSpinner.DateEditor)spinner.getEditor());
    // println result : "Thu Jan 01 01:00:00 UTC 1970"
    System.out.println(editorDate.getTextField().getValue());
    textField = editorDate.getTextField();
    textField.addFocusListener( new FocusListener() {
        public void focusGained( FocusEvent fe ) {
            System.err.println("Got focus");
            //textField.setSelectionStart(0);
            //textField.setSelectionEnd(1);
            SwingUtilities.invokeLater( new Runnable() {
                public void run() {
                    if ( valueSet ) {
                        textField.setCaretPosition(1);
                    }
                }
            });
        }
        public void focusLost( FocusEvent fe ) {
        }
    });
    textField.addActionListener( new ActionListener() {
        public void actionPerformed( ActionEvent ae ) {
            stopCellEditing();
        }
    });
}

// Prepares the spinner component and returns it.
public Component getTableCellEditorComponent(
    JTable table, Object value, boolean isSelected, int row, int column
) {
    if ( !valueSet ) {
        spinner.setValue(value);
    }
    SwingUtilities.invokeLater( new Runnable() {
        public void run() {
            textField.requestFocus();
        }
    });
    return spinner;
}

public boolean isCellEditable( EventObject eo ) {
    System.err.println("isCellEditable");
    if ( eo instanceof KeyEvent ) {
        KeyEvent ke = (KeyEvent)eo;
        System.err.println("key event: "+ke.getKeyChar());    
        textField.setText(String.valueOf(ke.getKeyChar()));
        valueSet = true;
    } else {
        valueSet = false;
    }
    return true;
}

// Returns the spinners current value.
public Object getCellEditorValue() {
    return spinner.getValue();
}

public boolean stopCellEditing() {
    System.err.println("Stopping edit");
    // after stopcellEditing is called the TextField is being set with the wrong values (Thu Jan 01 01:00:00 UTC 1970)
    super.stopCellEditing();
    try {
        if( editorNumeric!=null) 
        {
            editorNumeric.commitEdit();
            spinner.commitEdit();

        }
        if( editorDate!=null)
        {
            SimpleDateFormat lFormat = new SimpleDateFormat("HH:mm");
            textField.setText((spinner.getValue() != null) ? lFormat.format(spinner.getValue()) : "");
        }

    } catch ( java.text.ParseException e ) {
        JOptionPane.showMessageDialog(null,
            "Invalid value, discarding.");
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:35:16.247

不容易，对于ButtonGroup中的JRadioButtons的意义，简单的JButton和JSpinner，有两种方式

*   使用两个 JSpinners（对 JButton ei 的要求相同）和[SpinnerListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/SpinnerListModel.html)在这种情况下非常有希望减少 JTable 中提到的 JButton 所需的一堆代码

此代码用于 NumberInstance

```
import java.awt.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class SpinnerColumn extends AbstractCellEditor implements TableCellEditor, TableCellRenderer {

    private static final long serialVersionUID = 1L;
    private JSpinner editSpinner, renderSpinner;
    private JTable table;
    private String[] list;
    private Border originalBorder;

    public SpinnerColumn(JTable table, int column) {
        editSpinner = new JSpinner();
        renderSpinner = new JSpinner();
        originalBorder = editSpinner.getBorder();
        editSpinner.setBorder(new LineBorder(Color.BLUE));
        this.table = table;
        table.getColumnModel().getColumn(column).setCellEditor(this);
    }

    public SpinnerColumn(String[] list, JTable table, int column) {
        editSpinner = new JSpinner();
        editSpinner.setModel(new SpinnerListModel(list));
        renderSpinner = new JSpinner();
        originalBorder = editSpinner.getBorder();
        editSpinner.setBorder(new LineBorder(Color.BLUE));
        this.list = list;
        this.table = table;
        table.getColumnModel().getColumn(column).setCellEditor(this);
    }

    @Override
    public Object getCellEditorValue() {
        return editSpinner.getValue();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
            int row, int column) {
        if (list != null) {
            editSpinner.setValue(list[0]);
        } else {
            editSpinner.setValue(0);
        }
        if (value != null) {
            editSpinner.setValue(value);
        }
        return editSpinner;
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
            boolean hasFocus, int row, int column) {
        if (hasFocus) {
            renderSpinner.setBorder(new LineBorder(Color.BLUE));
        } else {
            renderSpinner.setBorder(originalBorder);
        }
        // *** here's where we set the spinner's value
        if (value == null) {
            renderSpinner.setValue(0);
        } else {
            int intValue = ((Integer) value).intValue();
            renderSpinner.setValue(intValue);
        }
        return renderSpinner;
    }

    @Override
    public boolean isCellEditable(EventObject evt) {
        return true;
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("SpinnerColumn");
                JPanel panel = new JPanel(new GridLayout(1, 1));
                JTable table = new JTable(5, 1);
                SpinnerColumn spinnerColumn = new SpinnerColumn(table, 0);
                table.setDefaultRenderer(Object.class, spinnerColumn);
                panel.add(table);
                frame.setContentPane(panel);
                frame.pack();
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }
        });
    }
} 
```

*   通过在 TableCellEditor 中重新创建 JSpinner

代码

```
import javax.swing.*;
import javax.swing.table.*;
import java.util.Date;
import java.util.Vector;
import java.awt.*;
import java.awt.event.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import javax.swing.UIManager.LookAndFeelInfo;

public class TableTestPanel extends JPanel {

    private static final String[] COLUMN_NAMES = {"List ID", "Expiration Date", "Status", "Date Created"};
    private static final DateFormat DATE_FORMAT = new SimpleDateFormat("dd/MM/yyyy");
    private static final long serialVersionUID = 1L;

    private static class StatusPanel extends JPanel {

        private static final long serialVersionUID = 1L;
        private JRadioButton theSingleOption;
        private JRadioButton theMarriedOption;
        private JRadioButton theDivorcedOption;

        StatusPanel() {
            super(new GridLayout(3, 1));
            setOpaque(true);
            ButtonGroup buttonGroup = new ButtonGroup();
            theSingleOption = new JRadioButton("Single");
            theSingleOption.setOpaque(false);
            add(theSingleOption);
            buttonGroup.add(theSingleOption);
            theMarriedOption = new JRadioButton("Married");
            theMarriedOption.setOpaque(false);
            add(theMarriedOption);
            buttonGroup.add(theMarriedOption);
            theDivorcedOption = new JRadioButton("Divorced");
            theDivorcedOption.setOpaque(false);
            add(theDivorcedOption);
            buttonGroup.add(theDivorcedOption);
        }

        public Status getStatus() {
            if (theMarriedOption.isSelected()) {
                return Status.MARRIED;
            } else if (theDivorcedOption.isSelected()) {
                return Status.DIVORCED;
            } else {
                return Status.SINGLE;
            }
        }

        public void setStatus(Status status) {
            if (status == Status.MARRIED) {
                theMarriedOption.setSelected(true);
            } else if (status == Status.DIVORCED) {
                theDivorcedOption.setSelected(true);
            } else {
                theSingleOption.setSelected(true);
            }
        }
    }

    private static class Status {

        static final Status SINGLE = new Status("Single");
        static final Status MARRIED = new Status("Married");
        static final Status DIVORCED = new Status("Divorced");
        private final String myName; // for debug only

        private Status(String name) {
            myName = name;
        }

        @Override
        public String toString() {
            return myName;
        }
    }

    private static class TableEntry {

        private static int instanceNumber;
        private Long theId;
        private Date theExpirationDate;
        private Status theStatus;
        private Date theCreationDate;

        TableEntry() {
            instanceNumber++;
            theId = new Long(instanceNumber);
            theExpirationDate = new Date();
            theStatus = Status.SINGLE;
            theCreationDate = new Date();
        }

        TableEntry(Long anId, Date anExpirationDate, Status aStatus, Date aCreationDate) {
            theId = anId;
            theExpirationDate = anExpirationDate;
            theStatus = aStatus;
            theCreationDate = aCreationDate;
        }

        public Long getId() {
            return theId;
        }

        public Date getExpirationDate() {
            return theExpirationDate;
        }

        public Status getStatus() {
            return theStatus;
        }

        public Date getCreationDate() {
            return theCreationDate;
        }

        public void setId(Long anId) {
            theId = anId;
        }

        public void setExpirationDate(Date anExpirationDate) {
            theExpirationDate = anExpirationDate;
        }

        public void setStatus(Status aStatus) {
            theStatus = aStatus;
        }

        public void setCreationDate(Date aCreationDate) {
            theCreationDate = aCreationDate;
        }
    }

    private static class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private Vector<Object> theEntries;

        MyTableModel() {
            theEntries = new Vector<Object>();
        }

        @SuppressWarnings("unchecked")
        public void add(TableEntry anEntry) {
            int index = theEntries.size();
            theEntries.add(anEntry);
            fireTableRowsInserted(index, index);
        }

        public void remove(int aRowIndex) {
            if (aRowIndex < 0 || aRowIndex >= theEntries.size()) {
                return;
            }
            theEntries.removeElementAt(aRowIndex);
            fireTableRowsDeleted(aRowIndex, aRowIndex);

        }

        public int getRowCount() {
            return theEntries.size();
        }

        @Override
        public String getColumnName(int column) {
            return COLUMN_NAMES[column];
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return Long.class;
                case 1:
                    return Date.class;
                case 2:
                    return Status.class;
                case 3:
                    return Date.class;
            }
            return Object.class;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    try {
                        entry.setId(new Long(Long.parseLong(aValue.toString())));
                    } catch (NumberFormatException nfe) {
                        return;
                    }
                    break;
                case 1:
                    entry.setExpirationDate((Date) aValue);
                    break;
                case 2:
                    entry.setStatus((Status) aValue);
                    break;
                case 3:
                    entry.setCreationDate((Date) aValue);
                    break;
                default:
                    return;
            }
            fireTableCellUpdated(rowIndex, columnIndex);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    return entry.getId();
                case 1:
                    return entry.getExpirationDate();
                case 2:
                    return entry.getStatus();
                case 3:
                    return entry.getCreationDate();
            }
            return null;
        }
    }

    private static class DateRenderer extends DefaultTableCellRenderer {

        private static final long serialVersionUID = 1L;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (!(value instanceof Date)) {
                return this;
            }
            setText(DATE_FORMAT.format((Date) value));
            return this;
        }
    }

    private static class DateEditor extends AbstractCellEditor implements TableCellEditor {

        private static final long serialVersionUID = 1L;
        private JSpinner theSpinner;
        private Object value;

        DateEditor() {
            theSpinner = new JSpinner(new SpinnerDateModel());
            theSpinner.setOpaque(true);
            theSpinner.setEditor(new JSpinner.DateEditor(theSpinner, "dd/MM/yyyy"));
        }

        @Override
        public Object getCellEditorValue() {
            return theSpinner.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            theSpinner.setValue(value);
            if (isSelected) {
                theSpinner.setBackground(table.getSelectionBackground());
            } else {
                theSpinner.setBackground(table.getBackground());
            }
            return theSpinner;
        }
    }

    private static class StatusEditor extends AbstractCellEditor implements TableCellEditor {

        private static final long serialVersionUID = 1L;
        private StatusPanel theStatusPanel;

        StatusEditor() {
            theStatusPanel = new StatusPanel();
        }

        @Override
        public Object getCellEditorValue() {
            return theStatusPanel.getStatus();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            theStatusPanel.setStatus((Status) value);
            if (isSelected) {
                theStatusPanel.setBackground(table.getSelectionBackground());
            } else {
                theStatusPanel.setBackground(table.getBackground());
            }
            return theStatusPanel;
        }
    }

    private static class StatusRenderer extends StatusPanel implements TableCellRenderer {

        private static final long serialVersionUID = 1L;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setStatus((Status) value);
            if (isSelected) {
                setBackground(table.getSelectionBackground());
            } else {
                setBackground(table.getBackground());
            }
            return this;
        }
    }
    private MyTableModel theTableModel;
    private JTable theTable;

    public TableTestPanel() {
        super(new BorderLayout(0, 5));
        setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        theTableModel = new MyTableModel();
        theTable = new JTable(theTableModel);
        theTable.setDefaultEditor(Date.class, new DateEditor());
        theTable.setDefaultRenderer(Date.class, new DateRenderer());
        theTable.setDefaultEditor(Status.class, new StatusEditor());
        theTable.setDefaultRenderer(Status.class, new StatusRenderer());
// comment out the two preceding lines and uncomment the following one if you want a more standard editor
// theTable.setDefaultEditor(Status.class, new DefaultCellEditor(new JComboBox(new Status[]{Status.SINGLE, Status.MARRIED, Status.DIVORCED})));
        add(new JScrollPane(theTable), BorderLayout.CENTER);
        JToolBar toolBar = new JToolBar();
        toolBar.setFloatable(false);
        toolBar.add(new AbstractAction("Add new") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                theTableModel.add(new TableEntry());
                packTable();
            }
        });
        toolBar.add(new AbstractAction("Remove") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                theTableModel.remove(theTable.getSelectedRow());
            }
        });
        add(toolBar, BorderLayout.NORTH);
    }

    private void packTable() {
        TableColumnModel columnModel = theTable.getColumnModel();
        int columnCount = theTable.getColumnCount();
        int rowCount = theTable.getRowCount();
        int[][] preferredHeights = new int[columnCount][rowCount];
        TableCellRenderer renderer;
        Component comp;
        for (int col = 0; col < columnCount; col++) {
            renderer = columnModel.getColumn(col).getCellRenderer();
            if (renderer == null) {
                renderer = theTable.getDefaultRenderer(theTableModel.getColumnClass(col));
            }
            for (int row = 0; row < rowCount; row++) {
                comp = renderer.getTableCellRendererComponent(theTable, theTableModel.getValueAt(row, col), false, false, row, col);
                preferredHeights[col][row] = (int) comp.getPreferredSize().getHeight();
            }
        }
        for (int row = 0; row < rowCount; row++) {
            int pref = 0;
            for (int col = 0; col < columnCount; col++) {
                pref = Math.max(pref, preferredHeights[col][row]);
            }
            theTable.setRowHeight(row, pref);
        }
    }

    public static void main(String[] args) {
        try {
            // UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if (info.getName().equals("Nimbus")) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        final JFrame frame = new JFrame("TestRadioButtonRenderer");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new TableTestPanel());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame.setSize(400, 300);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:09:39.400

您混淆了编辑器和渲染器。编辑器是在编辑单元格时显示的小部件。当不再编辑单元格时，单元格渲染器用于“绘制”单元格。这一切都在[本段](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)中进行了解释。我真的建议您阅读它，因为它清楚地解释了如何执行表格渲染。

您应该做的是为所涉及的列使用自定义 CellRenderer，以便它使用您的日期格式化程序。

查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)以获取有关单元格编辑器和单元格渲染器的更多信息。

# asp.net-mvc - Web API - 默认情况下渲染 Razor 视图？

> ID：10616082
> 
> 赞同：13
> 
> 时间：2012-05-16T09:51:52.430
> 
> 标签：asp.net-mvc, asp.net-web-api

如何让 Web API 使用它返回的模型呈现 Razor 视图？只有在设置接受标头（或 .extension）时才使用 XML/JSON？这甚至可能吗？

如果它们正在处理相同的模型，则需要一组控制器来呈现 HTML 和另一组用于 JSON/XML 似乎很疯狂。

**更新**Darrel Miller 已经[为 Razor 编写了一个 ViewEngineFormatter](https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib.Formatting.RazorViewEngine/ViewEngineFormatter.cs)可能会成功，尽管还没有尝试过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T12:00:04.837

过去我在 StackOverflow 上问过类似的问题，因为我想做同样的事情。然而，我最终得到了一个“Api”区域和一组控制器，以及一组用于网站的标准 MVC 控制器。

事后看来，这实际上并不是一件坏事。我发现我倾向于在每组控制器中做不同的事情。我的视图不仅仅是 CRUD，而且往往包含额外的上下文数据，因此返回特定于该页面的视图模型很好。

我认为，如果我坚持将两者结合起来的目标，我可能最终会得到过于复杂的控制器或无法达到最佳的用户体验。因此，虽然这不是您问题的直接答案，但根据我的经验，无法做到这一点可能不是一件坏事。

相反，我最终得到了我的大多数控制器委托给的一组丰富的构建器和命令。这样我可以重用大部分控制器逻辑，同时能够为 API 和 Web 做特定的事情：

[http://www.paulstovell.com/clean-aspnet-mvc-controllers](http://www.paulstovell.com/clean-aspnet-mvc-controllers)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T11:09:16.590

是的，它就是这样设计的：**用于数据的 Web API 和用于渲染视图的 MVC。**我知道有些人会尝试向 Web API 添加视图引擎支持，但它不是为此而设计的。

我个人对此的看法是，MVC 和 Web API 之间的这种**平行世界**（这是大多数批评的根源，而社区普遍称赞该产品）主要是由于 Web API 已添加到 MVC 中而没有参考。 （或对它的了解）。

正如 Jon Galloway 在最近的播客中所说，如果团队拥有他们现在拥有的 HTTP 知识（以及他们当时没有的 REST API 现在流行的事后观察），他们将只设计一个提供数据并渲染的管道观点一致。

我只能推测，**未来**版本的 MVC/Web API 将呈现为*单个管道*。事实上，这个平行世界可能是在不久的将来统一他们的精心计划。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T09:55:13.400

> 如果它们正在处理相同的模型，则需要一组控制器来呈现 HTML 和另一组用于 JSON/XML 似乎很疯狂。

AFAIK，就是这样。标准控制器应该用于呈现 HTML 和用于 JSON/XML 的 ApiControllers。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T10:17:38.143

> 如果它们正在处理相同的模型，则需要一组控制器来呈现 HTML 和另一组用于 JSON/XML 似乎很疯狂。

Web API 正是它所称的 - 一种用于创建 API 的技术。

如果您正在创建一个 ASP.NET MVC 应用程序并希望为您自己的目的返回一些 JSON，那么您不需要内容协商等。因此您不需要 Web API（只需使用普通的旧 JsonResult）。

如果您想创建一个可重用的 API，那么您需要 Web API，但您的客户端应用程序应该以与其他人相同的方式使用它。

Web API 并不是用来“钉”所有非 HTML 请求的“锤子”——在需要时使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-18T22:30:20.570

我正在寻找与此类似的东西，但不完全是。通过搜索网络，我找到了 Fredrik Normen 的几篇文章。他写了这个确切的问题空间，并在列出的第二篇文章中实际确定了第三方解决方案。基本上，该解决方案涉及创建一个自定义，该自定义`MediaTypeFormatter`知道如何使用 Microsoft 提供的 Razor 引擎（[通过使用第三方库](http://razorengine.codeplex.com/)）处理视图。

*   [使用 Razor 引擎和 Asp.Net Web API 创建超媒体 API](http://weblogs.asp.net/fredriknormen/archive/2013/01/20/using-razor-engine-together-with-asp-net-web-api-to-create-a-hypermedia-api.aspx)
*   [将 Razor 与 ASP.NET Web API 一起使用](http://weblogs.asp.net/fredriknormen/archive/2012/06/28/using-razor-together-with-asp-net-web-api.aspx)
*   [ASP.Net Web API 和使用 Razor 下一步](http://weblogs.asp.net/fredriknormen/archive/2012/07/17/asp-net-web-api-and-using-razor-the-next-step.aspx)

希望微软很快会在 Web API 中实现一些东西，因为超媒体似乎正在获得牵引力。

希望这可以帮助！

# javascript - 在 img 标签上叠加图形边框

> ID：10616084
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:51:59.643
> 
> 标签：javascript, css, border, image

我希望能够在网站上的所有图像上覆盖图形边框，而无需在 Photoshop 中手动应用它。我使用的边框是一个粗糙的“苦恼”图形，因此无法通过使用 css 边框来实现。

我最初的想法是使用 javascript 将包含边框图形的周围 div（或 div）动态添加到所有 img 标签，尽管我不太确定如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:11:03.533

我建议使用以下 JavaScript：

```
var D = document,
    images = D.getElements​ByTagName('img');

function imageWrap(el, wrapper) {
    if (!el) {
        return false;
    } else {
        var wrapper = wrapper || 'div',
            d = D.createElement(wrapper);
        el.parentNode.insertBefore(d, el.nextSibling);
        d.appendChild(el);
    }
}
for (var i = 0, len = images.length; i < len; i++) {
    imageWrap(images[i]);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/p3Wf3/2/)。

参考：

*   [`appendChild()`](https://developer.mozilla.org/en/DOM/element.appendChild).
*   [`createElement()`](https://developer.mozilla.org/en/DOM/document.createElement).
*   [`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName).
*   [`insertBefore()`](https://developer.mozilla.org/En/DOM/Node.insertBefore).
*   [`parentNode`](https://developer.mozilla.org/en/DOM/Node.parentNode).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:31:52.303

有一个使用 CSS3 的替代方案。

**示例片段：**

```
img {
    border-width: 20px;
    -moz-border-image:url("border.png") 20 repeat stretch;
    -webkit-border-image:url("border.png") 20 repeat stretch;
    border-image:url("border.png") 20 repeat stretch;
} 
```

​<strong> [jsFiddle](http://jsfiddle.net/eliranmal/ENggp/)

**参考：**

*   [W3C 候选人推荐](http://www.w3.org/TR/css3-background/#border-images)
*   [W3C 工作草案](http://www.w3.org/TR/2002/WD-css3-border-20021107/)
*   [在 Mozilla 开发者网络上](https://developer.mozilla.org/en/CSS/-moz-border-image)
*   [关于 CSS 技巧](http://css-tricks.com/understanding-border-image/)

*免责声明：CSS3 目前不完全支持跨浏览器，此解决方案假定我们的目标是在 Web 开发中向前发展以针对现代浏览器。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:21:40.923

您可以将边框设置为背景图像并将图像放入其中并添加一些边距

检查我的[jsfiddle](http://jsfiddle.net/killerbytes/DUuk2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T10:06:37.700

你应该可以用 JQuery 来做，我测试了这个脚本，它对我有用。我只是给图像一个背景图像并添加了填充。

您将在标题中调用 JQuery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

然后你可以试试这个脚本：

```
<script>
    $(document).ready(function(){
        $('img').css({
            'background' : 'url(images/002.jpg) repeat', 
            'padding' : '10px'
        });
    }); 
</script> 
```

你可以用你的类替换'img'，例如'.border'，你也可以调整填充，你只需用你的替换背景图像的url。希望这会有所帮助/有效！

# jquery - jquery fadein 不适用于所有浏览器

> ID：10616091
> 
> 赞同：1
> 
> 时间：2012-05-16T09:52:16.950
> 
> 标签：jquery, fadein

所以我有以下数据，但 div 不可见。

html:

```
<div id="divTest" class="cTest">
others divs, and html in here
</div> 
```

CSS：

```
.cTest {
    position: absolute;
    top: 60px;
    left: 100px;
    right: 100px;
    bottom: 25px;
    min-height: 500px;
    min-width: 500px;
    overflow: hidden;
    background-color: #FF0000;
    border: 0px solid #000000;
    font-family: arial; 
    font-size: 10pt;
    font-weight: normal;
    margin: 0px;
    padding: 5px;
    cursor: default;
    z-index: 10;
    visibility: hidden;

    -moz-box-shadow: 0px 0px 5px 5px #777777;
    -webkit-box-shadow: 0px 0px 5px 5px #777777;
    box-shadow: 0px 0px 5px 5px #777777;
} 
```

当我点击一个按钮时，js运行：

```
$("#divTest").fadeIn(600); 
```

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:01:03.643

jQuery 淡入需要 display:none; 而不是可见性：隐藏；

如果您需要隐藏可见性，请先通过 CSS 函数使其可见：

```
$('#divTest').css('visibility','visible').hide().fadeIn(600); 
```

否则，只需删除您的可见性：隐藏并将其与 display:none 交换；

# jquery - 将 DatePicker 值传递给控制器 和视图

> ID：10616095
> 
> 赞同：0
> 
> 时间：2012-05-16T09:52:20.623
> 
> 标签：jquery, asp.net-mvc, model-view-controller, jquery-ui-datepicker

我有一个带有日期选择器控件的视图和页面上的几个部分视图。日期在控制器的 ViewData 中默认设置为今天的日期，用于在页面加载时显示。当用户在日期选择器中更改日期时，如何将选定的值从 Jquery 变量传递到控制器的 ViewData 并更新所有部分视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:07:35.490

日期选择器控件只是一个 HTML 元素，它具有一些关联的 javascript 来帮助用户选择日期。它完全是客户端，这意味着它在浏览器（例如 IE、Firefox、Chrome）上运行。ViewData 是一个临时存储，可以由控制器操作中的服务器端代码（例如 C#）填充，然后在视图中使用以生成将发送到客户端浏览器的 HTML 响应。因此，您不能将 jQuery 变量传递给 ViewData，它只是没有意义。

如果您想更新由部分生成的页面部分，您有几个选择。

(a) 进行回发，将日期时间传递回控制器操作并刷新整个页面（非常简单，但可能不会提供良好的用户体验，具体取决于您要执行的操作）。

(b) 使用 Ajax 更新您想要更新的页面部分（涉及更多但可以提供更好的用户体验）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:33:16.747

@Tony，感谢您的回复。我把它放在错误的方式上，我想将 jquery 变量传递给 viewdata，我的意思是基于 jquery 变量（datepicker 选择的值），我必须重新加载部分视图。我必须在 Ajax 中执行此操作，这是我在 Javascript 中遵循的程序：

```
 $(function () {
        $('#datePickerID').datepicker({
        onSelect: function (dateText, inst) {
        $.post('<%=Url.Action("GetControllerActionResult","ControllerName") %>',
        { parameter1: dateText },
        function (rawdata) {
        var data = $.parseJSON(rawdata);
$('htmlID or className of your partial view').html(data.dataString); //rendering your partial view
}
        );
}
        });; 
```

在控制器中：

```
 public ActionResult GetControllerActionResult(dataType parameter1) {
    ViewData["someValue"] = parameter1;
    ViewData["yourPartialViewObject"] = perform some action...

    var data = new Dictionary<string, object>();
    data.Add("dataString", this.RenderViewToString("partialViewName", ViewData["yourPartialViewObject"]));
    return Content(GetJSONString(data));
    } 
```

# php - Symfony2 bindRequset 显示属性不存在

> ID：10616098
> 
> 赞同：0
> 
> 时间：2012-05-16T09:52:33.960
> 
> 标签：php, symfony

我是 Symfony 的新手，通过创建一个小项目来学习 Symfony2。

/ ***** *** UserType buildform 函数******* /

```
$age_choices = array('18'=>'18+','25'=>'25+','30'=>'30+','40'=>'40+','50'=>'50+');

$complextion_choices = array('Moderate'=>'Moderate','Fair'=>'Fair');

$builder
                ->add('first_name', 'text')
                ->add('last_name', 'text')
                ->add('email', 'text')
                ->add('phone', 'text', array('required' => false))
                ->add('age', 'choice', array('choices' => $age_choices) )
                ->add('complextion', 'choice', array('choices' => $complextion_choices) ); 
```

**/ *** ***创建用户表单***** **** /**

```
$user = new Users();

$form = $this->createForm(new UsersType());

return $this->render('TrytillUserBundle:User:signup.html.twig', array('form' => 
$form->createView())); 
```

**现在，当我提交此表单时.. 使用以下方式获取它。**

```
$user = new Users();

$form = $this->createForm(new UsersType(), $user);

$form->bindRequest($request);

if ($form->isValid()) {

   /// some task here.

}

return $this->render('TrytillUserBundle:User:signup.html.twig', array('form' => $form->createView())); 
```

问题是在 bindRequest 行它告诉我实体用户中不存在属性 first_name。

我已经使用教义创建了用户实体，它是 Entity/Users.php 中的私有 $firstName

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:25:04.790

尝试`->add('firstName', 'text')`而不是`->add('first_name', 'text')`在你的`UserType::buildForm`函数中，同样适用于`last_name`.

# sql - Postgres 日期重叠约束

> ID：10616099
> 
> 赞同：25
> 
> 时间：2012-05-16T09:52:33.900
> 
> 标签：sql, postgresql

我有一张这样的桌子：

```
date_start    date_end     account_id    product_id
2001-01-01    2001-01-31   1             1
2001-02-01    2001-02-20   1             1
2001-04-01    2001-05-20   1             1 
```

我想禁止给定的重叠间隔`(account_id, product_id)`

编辑：我发现了一些东西：

```
CREATE TABLE test (                                                                                                
    from_ts TIMESTAMPTZ,
    to_ts TIMESTAMPTZ,
    account_id INTEGER,
    product_id INTEGER,
    CHECK ( from_ts < to_ts ),
    CONSTRAINT overlapping_times EXCLUDE USING GIST (
        account_id WITH =,
        product_id WITH =,
        box(
            point( extract(epoch FROM from_ts at time zone 'UTC'), extract(epoch FROM from_ts at time zone 'UTC') ),
            point( extract(epoch FROM to_ts at time zone 'UTC') , extract(epoch FROM to_ts at time zone 'UTC') )
        ) WITH &&
    )
); 
```

如果您想了解更多关于此[http://www.depesz.com/2010/01/03/waiting-for-8-5-exclusion-constraints/](http://www.depesz.com/2010/01/03/waiting-for-8-5-exclusion-constraints/)

我唯一的问题是它不能使用空值作为结束时间戳，我想用无限值替换它但效果不佳。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-21T10:17:31.930

好的，我最终这样做了：

```
CREATE TABLE test (
    from_ts TIMESTAMPTZ,
    to_ts TIMESTAMPTZ,
    account_id INTEGER DEFAULT 1,
    product_id INTEGER DEFAULT 1,
    CHECK ( from_ts < to_ts ),
    CONSTRAINT overlapping_times EXCLUDE USING GIST (
        account_id WITH =,
        product_id WITH =,
        period(from_ts, CASE WHEN to_ts IS NULL THEN 'infinity' ELSE to_ts END) WITH &&
    )
); 
```

与无穷大、交易证明完美结合。

我只需要安装临时扩展，它将在 postgres 9.2 中本地化，并且 btree_gist 在 9.1 中作为扩展可用`CREATE EXTENSION btree_gist;`

注意：如果您没有空时间戳，则无需使用时间扩展，您可以使用我的问题中指定的 box 方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-05T07:46:53.387

在最新的 postgres 版本中（我在 9.6 中对其进行了测试，但我认为它在 >=9.2 中工作）您可以使用`tstzrange()`其他评论中提到的内置功能。默认情况下，空值将被视为正无穷大或负无穷大，然后不再明确需要 CHECK 约束（如果您认为仅检查`<=`并且范围可以以相同日期开始和结束）。只需要扩展名`btree_gist`：

```
CREATE EXTENSION btree_gist;

CREATE TABLE test (
    from_ts TIMESTAMPTZ,
    to_ts TIMESTAMPTZ,
    account_id INTEGER DEFAULT 1,
    product_id INTEGER DEFAULT 1,
    CONSTRAINT overlapping_times EXCLUDE USING GIST (
        account_id WITH =,
        product_id WITH =,
        TSTZRANGE(from_ts, to_ts) WITH &&
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:50:20.613

这是一个难题，因为[约束只能引用“当前行”](http://www.postgresql.org/docs/9.1/interactive/sql-createtable.html)，并且可能不包含子查询。（否则简单的解决方案是`NOT EXISTS()`在检查中添加一些子查询）

> 指定为列约束的检查约束应仅引用该列的值，而出现在表约束中的表达式可以引用多个列。
> 
> 目前，CHECK 表达式不能包含子查询，也不能引用当前行列以外的变量。

流行的解决方法是：使用执行脏工作的触发器函数（或使用大多数人不赞成使用的规则系统）

因为大多数人都喜欢触发器，所以我将在这里重新发布一个规则系统黑客......（它没有额外的“id”关键元素，但这是一个小细节）

```
-- Implementation of A CONSTRAINT on non-overlapping datetime ranges
-- , using the Postgres rulesystem.
-- We need a shadow-table for the ranges only to avoid recursion in the rulesystem.
-- This shadow table has a canary variable with a CONSTRAINT (value=0) on it
-- , and on changes to the basetable (that overlap with an existing interval)
-- an attempt is made to modify this variable. (which of course fails)

-- CREATE SCHEMA tmp;
DROP table tmp.dates_shadow CASCADE;
CREATE table tmp.dates_shadow
    ( time_begin timestamp with time zone
    , time_end timestamp with time zone
    , overlap_canary INTEGER NOT NULL DEFAULT '0' CHECK (overlap_canary=0)
    )
    ;
ALTER table tmp.dates_shadow
    ADD PRIMARY KEY (time_begin,time_end)
    ;

DROP table tmp.dates CASCADE;
CREATE table tmp.dates
    ( time_begin timestamp with time zone
    , time_end timestamp with time zone
    , payload varchar
    )
    ;

ALTER table tmp.dates
    ADD PRIMARY KEY (time_begin,time_end)
    ;

CREATE RULE dates_i AS
    ON INSERT TO tmp.dates
    DO ALSO (
    -- verify shadow
    UPDATE tmp.dates_shadow ds
        SET overlap_canary= 1
        WHERE (ds.time_begin, ds.time_end) OVERLAPS ( NEW.time_begin, NEW.time_end)
        ;
    -- insert shadow
    INSERT INTO tmp.dates_shadow (time_begin,time_end)
        VALUES (NEW.time_begin, NEW.time_end)
        ;
    );

CREATE RULE dates_d AS
    ON DELETE TO tmp.dates
    DO ALSO (
    DELETE FROM tmp.dates_shadow ds
        WHERE ds.time_begin = OLD.time_begin
        AND ds.time_end = OLD.time_end
        ;
    );

CREATE RULE dates_u AS
    ON UPDATE TO tmp.dates
    WHERE NEW.time_begin <> OLD.time_begin
    AND NEW.time_end <> OLD.time_end
    DO ALSO (
    -- delete shadow
    DELETE FROM tmp.dates_shadow ds
        WHERE ds.time_begin = OLD.time_begin
        AND ds.time_end = OLD.time_end
        ;
    -- verify shadow
    UPDATE tmp.dates_shadow ds
        SET overlap_canary= 1
        WHERE (ds.time_begin, ds.time_end) OVERLAPS ( NEW.time_begin, NEW.time_end)
        ;
    -- insert shadow
    INSERT INTO tmp.dates_shadow (time_begin,time_end)
        VALUES (NEW.time_begin, NEW.time_end)
        ;
    );

INSERT INTO tmp.dates(time_begin,time_end) VALUES
  ('2011-09-01', '2011-09-10')
, ('2011-09-10', '2011-09-20')
, ('2011-09-20', '2011-09-30')
    ;
SELECT * FROM tmp.dates;

EXPLAIN ANALYZE
INSERT INTO tmp.dates(time_begin,time_end) VALUES ('2011-09-30', '2011-10-04')
    ;

INSERT INTO tmp.dates(time_begin,time_end) VALUES ('2011-09-02', '2011-09-04')
    ;

SELECT * FROM tmp.dates;
SELECT * FROM tmp.dates_shadow; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-16T10:04:30.743

如何为一组列创建唯一约束：

```
 CREATE TABLE table (
    date_start date,
    date_end  date,
    account_id integer,
    UNIQUE (account_id , date_start ,date_end) ); 
```

在您的情况下，如果表已经存在，您将需要 ALTER TABLE，请查看对您有帮助的文档：
-DDL[约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html)
-ALTER [Table](http://www.postgresql.org/docs/current/static/sql-altertable.html)

# sed - 使用 sed 对数字进行乘法和舍入

> ID：10616100
> 
> 赞同：2
> 
> 时间：2012-05-16T09:52:34.547
> 
> 标签：sed, decimal, rounding, multiplication

我对脚本专家有以下问题：如何将数字（即 12.34567）乘以 100，然后使用 sed 将其四舍五入到小数点后两位？

提前致谢！艾瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:01:03.537

这是用 sed 编写的[RPN 计算器的源代码。](http://sed.sourceforge.net/grabbag/scripts/dc.sed)那应该让你开始。

# python - 客户端的 Thrift 服务器外观

> ID：10616104
> 
> 赞同：1
> 
> 时间：2012-05-16T09:53:04.367
> 
> 标签：python, design-patterns, thrift

我在服务器/客户端设计方面遇到了一点麻烦，想知道是否有人有任何建议。

我有一个抽象数据存储的 Thrift 服务器。这个想法是，将有许多客户端本质上是进程外插件，它们使用服务器提供的接口来接收、操作底层数据存储并提供自己的数据。将有许多其他客户端简单地访问服务器及其“插件”提供的数据。

问题案例是当这些“插件”之一希望提供自己的数据并提供该数据的接口时。服务器不应该知道插件数据或接口。

理想情况下，我希望所有客户端都通过主 thrift 服务器访问功能，因此它充当插件的外观。如果客户端请求插件提供的某些数据，则主服务器可以委托插件提供该数据。我想这意味着每个插件都是一个节俭的客户端和服务器。我已经用 python 编写了服务器，因此可能可以处理尚未定义的节俭调用，但是否可以将这些调用转发到另一个节俭服务器 IE 充当代理？

另一种方法是让插件仅作为客户端并将数据推送到服务器。但是这些消息的格式对于服务器来说是未知的，并且必须足够通用以适应不同类型的数据。我不确定如何为其他客户提供一个有用的接口来处理这些数据。

据我所知，只有插件知道如何存储和操作它拥有的数据，所以这个想法可能行不通。

感谢您的任何建议。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:06:06.410

听起来您需要某种机制来将请求与可用的不同插件相关联。理想情况下，为每个插件发布的每组操作都应该有不同的 URL 路径。

我会考虑实现一种插件 URL 路径的映射/字典。然后对于收到的每个请求，在地图中查找并获取关联的插件并相应地发送请求。如果地图中没有条目，则可以发送重定向/代理。例如，如果 URL = `http://yourThriftServer/path/operation`，则操作或路径***和***操作将映射到插件。

一个额外的步骤是实现一种元请求，客户端可以查询服务器中可用的 URL 路径/操作。

# android - 取消使用 AlertDialog.Builder 创建的对话框

> ID：10616105
> 
> 赞同：0
> 
> 时间：2012-05-16T09:53:05.710
> 
> 标签：android, android-alertdialog

我有一个`AlertDialog.Builder`里面有一个按钮，我想在点击它时关闭对话框。

但是没有`.dismiss()`or`.cancel()`方法。

```
 LayoutInflater inf = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = inf.inflate(R.layout.map_window, null);

    window = new AlertDialog.Builder(activity);
    window.setCancelable(true);

    buttonStar = (ImageButton)layout.findViewById(R.id.buttonStar);
    buttonStar.setBackgroundResource(R.drawable.star);
    buttonStar.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
        //finishing window;
    }
      });

    window.setPositiveButton("Volver", new DialogInterface.OnClickListener() {  
        public void onClick(DialogInterface dialog, int wichButton) {  

        }  
    });  

    window.show();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:56:49.353

[`AlertDialog.Builder#show`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#show%28%29)返回`AlertDialog`自身，因此只需获取从其返回的 AlertDialog 本身`show`并对其调用dismiss：

```
AlertDialog dialog;
//...

dialog = window.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:58:43.227

尝试从对话框对象中取消它。创建一个对话框对象如下：

```
Dialog dialog = window.create();
dialog.cancel() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:18:21.050

找到下面的 AlertDialog 代码。使用新的 DialogInterface.OnClickListener() 而不是 onClick()。

```
 AlertDialog ad = new AlertDialog.Builder(MainCatalogueActivity.this)

                    .setTitle("Server Response Error")

                    .setMessage("some message ")

                    .setIcon(R.drawable.ic_menu_close_clear_cancel)

                    .setNegativeButton("Close", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {

                            Intent intent = new Intent(Intent.ACTION_MAIN);

                            intent.addCategory(Intent.CATEGORY_HOME);

                            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                            startActivity(intent);

                            finish();

                        }
                    }).create();
    ad.show(); 
```

# android - Ubuntu Linux 上的 Android SDK 和 Eclipse Indigo 错误

> ID：10616111
> 
> 赞同：1
> 
> 时间：2012-05-16T09:53:29.613
> 
> 标签：android, eclipse, android-emulator

我正在运行一个带有自定义列表视图的 rss 提要解析程序。

现在我的这个程序可以在 Windows 7 上与 android sdk eclipse Indigo 一起正常工作，但是同样的代码在 Ubuntu 系统（11.04）上不能与我的 android sdk-Eclipse（Indigo）一起工作。

所有其他程序都运行良好。

这是我在 logcat 中遇到的错误。（由**java.lang.NullPointerException**引起的**java.lang.RuntimeException**）

```
05-16 14:20:24.965: E/AndroidRuntime(445): java.lang.RuntimeException: Unable to start      activity ComponentInfo{com.example.androidhive/com.example.androidhive.CustomizedListView}:     java.lang.NullPointerException
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.os.Handler.dispatchMessage(Handler.java:99)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.os.Looper.loop(Looper.java:123)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at java.lang.reflect.Method.invokeNative(Native Method)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at java.lang.reflect.Method.invoke(Method.java:521)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at dalvik.system.NativeStart.main(Native Method)
 05-16 14:20:24.965: E/AndroidRuntime(445): Caused by: java.lang.NullPointerException
 05-16 14:20:24.965: E/AndroidRuntime(445):     at com.example.androidhive.CustomizedListView.onCreate(CustomizedListView.java:44)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 05-16 14:20:24.965: E/AndroidRuntime(445):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 05-16 14:20:24.965: E/AndroidRuntime(445):     ... 11 more 
```

那么这种问题的解决方案是什么，有什么想法吗？

谢谢收听。

这是我的代码。

自定义列表视图.java

```
static final String URL = "http://api.androidhive.info/music/music.xml";
//static final String URL = "https://news.google.com/news/feeds?ned=in&topic=n&output=rss";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    } 
```

xmlparser.java

```
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
} 
```

# javascript - as3 facebook api：为什么 Facebook 需要 js api

> ID：10616114
> 
> 赞同：0
> 
> 时间：2012-05-16T09:53:39.313
> 
> 标签：javascript, actionscript-3, flash, facebook-graph-api

我正在为 facebook 使用 as3 api。

我刚刚从 FacebookDesktop 类切换到 Facebook 类，我看到的第一件事是 Facebook 类需要 javascript api ...

我不想要额外的层。

那么为什么 Facebook 类需要 JS api 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:54:31.153

html 中不需要使用 Facebook AS3 API，除非您想要 AS3 API 不提供的特定功能。

一个示例是用于调整 facebook 标签应用程序大小的 setAutoGrow() 方法，该方法在 AS3 API 中未提供。要使用它，您还必须实例化 JS API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:57:25.990

我的猜测是他们正在使用他们的标准 Javascript 包括来将数据来回传输到他们的服务器。他们的移动应用程序只是 webviews 的包装器，它们重新利用了他们所有的在线内容，我假设他们在 AS3 中做类似的事情。

# php - PHP 乘法

> ID：10616117
> 
> 赞同：0
> 
> 时间：2012-05-16T09:53:54.743
> 
> 标签：php, string, multiplication

这是我的第一个问题，所以大家好..

有可能满足这个条件吗？其中 $a 和 $b 是一些已定义的变量

```
if(!is_numeric($a * $b.'')) { ... } 
```

编辑：第二个条件

```
$a * $b can't be INF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:04:17.217

`$a`您可以使用和的特定值来满足条件`$b`。例如`$a = $b = 1e200`， 或`$a = 1e400, $b = 0`。

`$a`如果和的乘积`$b`溢出到无穷大或者是非数字，则与空字符串的连接将产生字符串`INF`or `NAN`：

```
php > var_export(1e200*1e200);
INF
php > var_export(is_numeric(1e200*1e200));
true
php > var_export(is_numeric(1e200*1e200.''));
false

php > var_export(1e400*0);
NAN
php > var_export(is_numeric(1e400*0));
true
php > var_export(is_numeric(1e400*0 .''));
false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T10:03:42.033

使用 32 位 PHP 测试

```
$a = 9.9E300;
$b = 9.9E300;

if(!is_numeric($a * $b.'')) {
    echo 'non-numeric';
} else {
    echo 'numeric';
} 
```

# android - 显示未读/已读消息

> ID：10616121
> 
> 赞同：0
> 
> 时间：2012-05-16T09:54:06.990
> 
> 标签：android, jakarta-mail, flags

我有一个从 gmail 服务器接收消息的示例代码。我可以通过我的自定义列表视图适配器在我的列表视图上显示它们。现在，我想将他们的图像设置为“看到”或“最近”。例如; 我从我的 gmail 帐户打开一条消息。然后在我的模拟器上打开我的项目。我想将邮件的图像设置为“已看到”图像。如果新邮件落入我的 gmail 收件箱，那么在我的列表视图中，邮件应该有一个“最近”的图像。

我将此代码用于此问题。但我假设这是错误的代码块，因为我所有的“最近”邮件都变成了“已见”邮件

```
 public List<String> RecentorReadMessage(Message[] messages) {
            try {

                for (int i = messages.length - 1; i > 0; i--) {
                    if (messages[i]
                            .isSet(Flags.Flag.RECENT)) {
                        messageImageView.add("yeni");
    //                  imgmessageDurum.setImageResource(R.drawable.okunmadi80x80);

                    } else if (messages[i]
                            .isSet(Flags.Flag.SEEN)) {
                        messageImageView.add("eski");
    //                  imgmessageDurum.setImageResource(R.drawable.okundu80x80);
                    }
                }
            } catch (MessagingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return messageImageView;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:31:51.680

[Gmail 不支持 IMAP \Recent 标志。](http://support.google.com/mail/bin/answer.py?hl=en&answer=78761&topic=1668982&ctx=topic)

# c# - 如何遍历目录C#中的所有文本文件

> ID：10616126
> 
> 赞同：4
> 
> 时间：2012-05-16T09:54:28.613
> 
> 标签：c#, .net, ssis

这段代码从 1.txt 中取出一行并将其拆分为列。现在我有一个包含 200 多个文件的目录，结尾为 something.txt，我希望它们一次打开一个，然后运行下面的这个过程。在不过多更改代码的情况下循环所有文件的最简单方法是什么？

目前的代码片段；

```
 string _nextLine;
    string[] _columns;
    char[] delimiters;

    delimiters = "|".ToCharArray();

    _nextLine = _reader.ReadLine();

    string[] lines = File.ReadAllLines("C:\\P\\DataSource2_W\\TextFiles\\Batch1\\1.txt");

    //Start at index 2 - and keep looping until index Length - 2 
    for (int i = 3; i < lines.Length - 2; i++) 
    {     _columns = lines[i].Split('|');    

        // Check if number of cols is 3
    if (_columns.Length == 146)
    {

        JazzORBuffer.AddRow();
        JazzORBuffer.Server = _columns[0];
        JazzORBuffer.Country = _columns[1];
        JazzORBuffer.QuoteNumber = _columns[2];
        JazzORBuffer.DocumentName =_columns[3];
        JazzORBuffer.CompanyNameSoldTo=_columns[4];

    }   

         else
{
    // Debug or messagebox the line that fails
    MessageBox.Show("Cols:" + _columns.Length.ToString() + " Line: " + lines[i]);
    return;

}

    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T09:56:46.017

您可以简单地使用[Directory.EnumerateFiles()](http://msdn.microsoft.com/en-us/library/dd413233.aspx)来遍历指定目录的文件集合。

因此，您可以在 foreach 循环中插入代码，例如：

```
foreach (var file in 
  Directory.EnumerateFiles(@"C:\\P\\DataSource2_W\\TextFiles\\Batch1", "*.txt"))
{

  //your code
} 
```

# c# - 存储库模式 - 为什么我们需要接口？

> ID：10616131
> 
> 赞同：49
> 
> 时间：2012-05-16T09:54:44.897
> 
> 标签：c#, asp.net-mvc-3, repository-pattern

我从互联网上读到了这一点，上面说接口用于此

*   使用 TDD 方法
*   更换持久化引擎

但我无法理解接口在这一点上会有什么用处`Replace persistance engine`。让我们考虑一下我正在为`EmployeeRepository`

```
public class EmployeeRepository
{
  public employee[] GetAll()
  {
     //here I'll return from dbContext or ObjectContex class
  }
} 
```

那么接口是如何出现的呢？

如果假设我创建了一个接口，为什么要使用向上转换？例如

```
 IEmployee emp = new EmployeeRepository() ;
 vs
 EmployeeRepository emp = new EmployeeRepository(); 
```

请准确解释我以及接口在存储库模式方面的其他有用性。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-16T09:57:49.203

> 那么接口是如何出现的呢？

像这样：

```
public interface IEmployeeRepository
{
    Employee[] GetAll();
} 
```

然后你可以有尽可能多的实现：

```
public class EmployeeRepositoryEF: IEmployeeRepository
{
    public Employee[] GetAll()
    {
        //here you will return employees after querying your EF DbContext
    }
}

public class EmployeeRepositoryXML: IEmployeeRepository
{
    public Employee[] GetAll()
    {
        //here you will return employees after querying an XML file
    }
}

public class EmployeeRepositoryWCF: IEmployeeRepository
{
    public Employee[] GetAll()
    {
        //here you will return employees after querying some remote WCF service
    }
}

and so on ... you could have as many implementation as you like 
```

如您所见，我们如何实现存储库并不重要。重要的是所有存储库和实现都尊重定义的合同（接口），并且都拥有一个`GetAll`返回员工列表的方法。

然后您将拥有一个使用此接口的控制器。

```
public class EmployeesController: Controller
{
    private readonly IEmployeeRepository _repository;
    public EmployeesController(IEmployeeRepository repository)
    {
        _repository = repository;
    }

    public ActionResult Index()
    {
        var employees = _repository.GetAll();
        return View(employees);
    }   
} 
```

看看控制器如何不再依赖于存储库的特定实现？它只需要知道这个实现尊重合同。现在你需要做的就是配置你喜欢的依赖注入框架来使用你想要的实现。

这是如何使用 Ninject 完成此操作的示例：

1.  安装[Ninject.MVC3](https://nuget.org/packages/Ninject.MVC3) NuGet
2.  在生成的`~/App_Start/NinjectWebCommon.cs`代码中，您只需决定将 EF 实现与一行代码一起使用：

    ```
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IEmployeeRepository>().To<EmployeeRepositoryEF>();
    } 
    ```

这样，您不再需要对这些存储库类进行任何手动实例化，也无需担心向上转换或其他任何事情。它是为您管理它们的依赖注入框架，并将负责将定义的实现注入到控制器构造函数中。

只需修改此配置，您就可以切换数据访问技术，而无需触及控制器中的任何一行代码。这就是孤立的单元测试也发挥作用的方式。由于您的控制器代码现在与存储库弱耦合（感谢我们引入的接口），您在单元测试中需要做的就是在存储库上提供一些模拟实现，以便您定义其行为。这使您可以对索引控制器操作进行单元测试，而不依赖于数据库或其他任何东西。完全隔离。

我还邀请您查看[以下](http://www.asp.net/mvc/overview/dependency-injection)有关 ASP.NET MVC 中的 TDD 和 DI 的文章。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-16T09:57:36.283

您会将存储库公开为接口：

```
public interface IEmployeeRepository
{
    List<Employee> GetAll();
} 
```

这将允许您拥有许多不同的接口*实现*，例如默认的：

```
public class EmployeeRepository : IEmployeeRepository
{
    public List<Employee> GetAll()
    {
        // Return from db.
    }
} 
```

或者一个测试：

```
public class TestEmployeeRepository : IEmployeeRepository
{
    public List<Employee> GetAll()
    {
        // Stub some dummy data.
    }
} 
```

然后，您使用存储库的代码只对使用接口感兴趣：

```
IEmployeeRepository myRepo = MyRepositoryFactory.Get<IEmployeeRepository>(); 
```

秘诀是工厂，或将接口解析为可用类型的另一种机制（依赖注入框架，如 Ninject 或 Castle Windsor 将完成此角色）。

关键是，**消费代码不关心实现**，只关心***合约***（接口）。这使您可以非常轻松地更换实现以进行测试，并促进松散耦合。

只是为了澄清一下，接口的使用和存储库模式之间没有具体的联系，它只是另一种可以利用它们的模式。

# wpf - 具有 AlternatingRowBackground 的 WPF Datagrid 在向上和向下滚动时滚动不同

> ID：10616133
> 
> 赞同：2
> 
> 时间：2012-05-16T09:54:46.753
> 
> 标签：wpf, scroll, row, wpfdatagrid, alternating

当我向上滚动时，我有一个带有 AlternatingRowBackground 的 WPF（Win7 上的 4.0）数据网格，当我向下滚动时，行颜色保持在原位，数据在移动，颜色随着数据一起移动。**平常吗？有没有可能摆脱这种奇怪的行为？**

**网格 XAML：**

```
<DataGrid AutoGenerateColumns="True"
                      CanUserAddRows="False"
                      Grid.Row="0" Grid.Column="0"  Name="grdData" 
                      ItemsSource="{Binding Path=.}" SelectionMode="Single"
                      HeadersVisibility="All" 
                      AlternatingRowBackground="LightGray" 
                      /> 
```

**注意：**我还有其他关于滚动的问题（[WPF Datagrid 在滚动到结束时会向上滚动一点](https://stackoverflow.com/questions/10601687/wpf-datagrid-scrolls-up-a-bit-when-scrolled-to-end)），但我不确定是否存在问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T11:29:35.263

添加`EnableRowVirtualization="False"`到您的数据网格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-14T07:59:59.173

此触发器适用于**EnableRowVirtualization="True"**

```
<DataGrid Name="dg" Style="{DynamicResource estiloDG}" MinRowHeight="40" GridLinesVisibility="None" 
          HorizontalGridLinesBrush="LightGray" VerticalGridLinesBrush="LightGray"
          BorderBrush="Gray" BorderThickness="1" Foreground="#424242"
          VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" 
          ItemsSource="{Binding ElementName=Me, Path=ItemsSource, Mode=OneWay}" x:FieldModifier="Private" 
          EnableRowVirtualization="True"
          VirtualizingStackPanel.IsVirtualizing="True"
          VirtualizingStackPanel.VirtualizationMode="Recycling"
          CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="True" CanUserSortColumns="True">

    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <Style.Triggers>
                <Trigger Property="AlternationIndex" Value="0">
                    <Setter Property="Background" Value="White" />
                </Trigger>
                <Trigger Property="AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#FFD0E8D0" />
                </Trigger>                  
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>

<DataGrid.Resources>  
    <Style x:Key="estiloDG" TargetType="{x:Type DataGrid}">
        <Setter Property="BorderBrush" Value="White"/>
        <Setter Property="Background" Value="White" />
        <Setter Property="MinHeight" Value="30" />
        <Setter Property="ColumnHeaderHeight" Value="30" />
        <Setter Property="HeadersVisibility" Value="All" />
        <Setter Property="RowBackground" Value="{StaticResource RowBackgroundBrush}" />
        <Setter Property="AlternationCount" Value="2" />
        <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource DataGridHorizontalLinesBrush}" />
        <Setter Property="VerticalGridLinesBrush" Value="{StaticResource DataGridHorizontalLinesBrush}" />
        <Setter Property="CellStyle" Value="{StaticResource DataGridCellStyle}" />
        <Setter Property="RowValidationErrorTemplate" Value="{StaticResource ErrorTemplate2}" />
        <Setter Property="ColumnHeaderStyle" Value="{StaticResource DatagridColumnHeaderCustomTemplateStyle}" />      
    </Style>
</DataGrid.Resources> 
```

# jquery - phonegap 1.5 & jquery mobile，后退按钮事件未触发（Android）？

> ID：10616142
> 
> 赞同：0
> 
> 时间：2012-05-16T09:55:21.683
> 
> 标签：jquery, mobile, cordova, back-button

我的 index.html 代码是

```
<div data-role="page" id="indexPage">
  <ul data-role="listview"> 
    <li>
        <a href="#childrenPage" >
            <h3>TITLE</h3>
        </a>
    </li>
</ul>
</div>

<div data-role="page" id="childrenPage">
    ****content word****
</div> 
```

我的js代码是

```
$(document).on("pageinit", function(){
    document.addEventListener("deviceready", function(){            
       document.addEventListener("backbutton", function(){ alert("back") }, false);
             alert("TEST")
    })
}); 
```

如果页面是“indexPage”，触摸后退按钮
alert("back") 和 alert("TEST") ---> fire

如果将页面更改为“childrenPage”，请触摸后退按钮
警报（“返回”）---> 不触发
警报（“TEST”）---> 触发

我怎样才能做到这一点？我希望用“childrenPage”触发后退按钮事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:25:30.957

这样做

```
<script type="text/javascript" charset="utf-8">

function onLoad() {
      document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is loaded and it is now safe to call Cordova methods
//
function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
//
function onBackKeyDown() {
  alert("back");
  var currentPageId = $.mobile.activePage.attr('id');
    if(currentPageId == 'indexPage') {
      alert("TEST");
    } else if(currentPageId == 'childrenPage') {
      $.mobile.changePage("#indexPage", {transition : "slide"});
    }
 }
</script>
<body onload="onLoad()">
<div data-role="page" id="indexPage">
</div>

<div data-role="page" id="childrenPage">
</div>
</body> 
```

# iphone - 如何将视图中心放置在任何方向

> ID：10616144
> 
> 赞同：2
> 
> 时间：2012-05-16T09:55:29.620
> 
> 标签：iphone, ipad, interface

我现在正在设计我的 ipad 应用程序的界面，我想在 rootview 的中心放置一个视图。我的代码是：

```
CGRect ret = CGRectMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds), bounds.size.width / 2,     bounds.size.height / 2); 

newViewController.view.frame = ret;
newViewController.view.center = self.view.center;

self.newViewController = newViewController;
[self.view addSubview:_newViewController.view]; 
```

结果是我想要的如下：

![在此处输入图像描述](../Images/a7d3cea4ffa0db4dbad2781ab7276032.png)

但是当我旋转到风景时，它变成了：

![在此处输入图像描述](../Images/ca1dd444d90f7d2e4f904c0881c902c0.png)

我想知道为什么它不像我设置的那样保持在中心，我怎样才能让它起作用？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:59:15.937

```
youView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin|
                                                 UIViewAutoresizingFlexibleBottomMargin| 
                                                 UIViewAutoresizingFlexibleLeftMargin| 
                                                 UIViewAutoresizingFlexibleRightMargin;
youView.autoresizesSubviews= YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:17:18.350

如果您使用 XIB 为您的子视图制作掩码，如下所示：

![居中而不调整子视图的大小](../Images/ccb8eaedb8588098d364624c48cf024a.png)

或在这里：

![调整子视图大小的中心](../Images/b48f9279d20d877c88762ce699f8ddaa.png)

如果您更喜欢使用 @adali 发布的代码，请使用该代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:56:33.083

使用自动调整大小的蒙版将其保持在中心

# c# - 如何在 C# 项目中存储可配置的字符串？

> ID：10616145
> 
> 赞同：0
> 
> 时间：2012-05-16T09:55:29.700
> 
> 标签：c#, configuration, settings

我有一个数据库，其中包含一个名为“Roles”的表，其中包含“Id”和“RoleName”列。这些是表中的行：

*   **GUID1**管理员
*   **GUID2**系统
*   **GUID3**技术员
*   **GUID4**正常

“用户”表中的用户可以拥有多个角色。我想要 LINQ 代码来检查特定用户是否具有“技术员”角色。

这是我现在的代码：

```
using (MyDbEntities entities = new MyDbEntities())
{
    User user = entities.Users.Where(u => u.Id == userIdToFetch).Single();

    // Check if user is 'Technician'
    if (user.Roles.Any(role => role.Name == "Technician") == true)
    {
         // user IS technician - do work here
    }
} 
```

我的问题是 - 我不想将字符串“Technician”硬编码到我的代码中，因为也许有一天数据库中的角色名称会更改为“Tech”。

我看过使用“资源”，但这并不好，因为更改资源中的字符串意味着重新编译项目。

我不想在包含此信息的配置文件中添加一个部分，因为在我看来这太过分了......

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:32:01.230

您可以将其作为设置放入，这意味着您可以修改配置文件，尽管这将基于每个用户。

您可以创建一个 dll 来保存字符串，然后引用它，那么更新只会意味着重新部署 dll

您可以将字符串放入文件中，然后从那里加载它们，记住您还必须部署文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:59:00.680

我将使用一个表来存储所有不同的角色并将角色的 ID 与用户的角色 ID 相关联。这样，只要角色 ID 保持不变，您就可以随意更改角色的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:36:22.907

我认为配置文件或资源正是您想要使用的。我想这只是找到正确平衡的问题：

要么避免配置文件的复杂性，但需要编译，要么避免编译，但在其他地方找到（某种配置文件，无论是文本文件，还是带有可以读取的常量的 .dll，或其他东西）来存储它。无论如何，您都需要创建*一些东西*来阅读它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:46:18.540

您可以通过在解决方案中放置角色的 XML 文件或在 .config 文件中添加条目来执行此操作。

# regex - 正则表达式提取主机

> ID：10616148
> 
> 赞同：0
> 
> 时间：2012-05-16T09:55:42.400
> 
> 标签：regex

我已经在网上搜索了这个但是有没有人有一个正则表达式来从这个文本中提取主机？

```
Host: my.domain.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:05:21.067

检查这是否对您有帮助

```
 function fnGetDomain(url) 
 {
    return (url.match(/:\/\/(.[^/]+)/)[1]).replace('www.','');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:05:21.870

```
(([a-zA-Z0-9\-]+\.)+[a-zA-Z0-9\-]+$) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:57:59.700

使用捕获组（之后您必须从组 1 中检索值）：

```
Host:\s*(.*)$ 
```

使用lookbehind（由于可变长度lookbehind，在大多数正则表达式引擎中不起作用，但匹配本身就是您想要的值）：

```
(?<=Host:\s*).*$ 
```

# php - 从单独下载的 JPEG 创建电影时帧速率太慢

> ID：10616150
> 
> 赞同：0
> 
> 时间：2012-05-16T09:55:50.603
> 
> 标签：php, javascript, ajax, json, slideshow

我有一个不断填充 jpg 图像的目录。我想在网页中像电影一样显示这些图像。

我试过的是：

```
function slideit() { 
 $.get("test.php", function(show) { if(show != "") { 
 document.getElementById("movie").innerHTML="<img src=\"data:image/jpg;base64," + show + "\" />", 
 setTimeout('slideit()', 0) } } ); }; 
```

PHP文件是

```
function getrunpic()
    {
    $file=trim(shell_exec('ls directory | sort -n | grep jpg | head -1'));
    $file="directory/".$file;
    $imagedata = file_get_contents($file);
    $pic = base64_encode($imagedata);
    unlink($file);
    return $pic;
    }

echo getrunpic(); 
```

我也尝试过使用 JSON 编码。

问题是从 php 到 javascript 的数据传输需要太长时间。（每秒只显示大约 8 张图片；我需要 25 张）。

有没有人有想法让这个过程更快？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:06:29.043

这不是要走的路。您应该在服务器端创建电影，然后在客户端进行流式传输。这是利用编解码器最基本功能（如压缩、关键帧等）的唯一方法，并且至少能够保证观看者的一致性。

请参阅：[使用 PHP 创建视频文件](https://stackoverflow.com/questions/5892308/create-video-file-using-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:08:37.023

我认为这不会是“从 php 到 javascript”的转移——更有可能是从服务器到浏览器的转移导致了问题。要每秒发出 25 个单独的 HTTP 请求，每个请求都需要在 40 毫秒内完成（尽管并发浏览器连接和重叠请求可能会稍长一些）。

加载 yahoo.com 的主页并观看 Firebug 的“Net”面板，过滤后仅显示图像的 HTTP 请求，平均请求显示以下时间：

*   1ms 阻塞
*   1ms DNS 查询
*   125ms 连接
*   124 毫秒等待
*   116ms 接收

...这意味着您总是很难使用单独的请求获得 25 帧/秒。

您是否考虑过使用流媒体（视频）格式？在[mediacollege.com](http://www.mediacollege.com)上有一些[教程，在](http://www.mediacollege.com/video/streaming/overview.html)[这个维基百科页面](http://en.wikipedia.org/wiki/Streaming_media)上有更多信息。

# jquery - 淡出 jquery 图片库

> ID：10616151
> 
> 赞同：1
> 
> 时间：2012-05-16T09:55:57.407
> 
> 标签：jquery, fade

这是我现在的代码。

[http://workshop.rs/demo/gallery-in-4-lines/](http://workshop.rs/demo/gallery-in-4-lines/)

```
$('#thumbs').delegate('img','click', function(){
$('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
}); 
```

但是我想淡化这个例子怎么办？

[http://www.ak-solutions.de/demos/fader/](http://www.ak-solutions.de/demos/fader/)

从图片到下一张图片更慢？

我试过这段代码，但这不是正确的。

```
$('#thumbs').delegate('img', 'click', function() {
$('#panel').attr('src', $(this).attr('src')).hide().fadeIn(1000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:18:23.180

## *[jsBin 演示](http://jsbin.com/ijedax/edit#javascript,html,live)*

```
$('.thumbs').on('click','img', function(){
        var $thisPanel = $(this).parents('.gallery').find('.panel');
        var clone = $(this).clone().hide();
        clone.appendTo($thisPanel);
        $thisPanel.find('img').eq(0).fadeTo(600,0,function(){
           $(this).remove();
        });
        clone.fadeTo(600,1);  
        $('.description').html($(this).attr('alt'));
}); 
```

修改后的 CSS：

```
 .thumbs { padding-top: 10px; overflow: hidden;}
    .thumbs img, .panel img {
     border: 1px solid gray;
     padding: 4px;
     background-color: white;
     cursor: pointer;
    }
  .panel img{
    position:absolute;
  }
    .thumbs img {
     float: left;
     margin-right: 3px;
    width:100px;
    }
    .description {
     background: black;
     color: white;
     position: absolute;
     z-index:2;
     bottom: 0;
     padding: 10px 20px;
     width: 525px;
     margin: 5px;
    } 
```

# php - 在 CakePHP 2 中执行外部 PHP 脚本

> ID：10616154
> 
> 赞同：2
> 
> 时间：2012-05-16T09:56:03.070
> 
> 标签：php, cakephp, cakephp-2.0, external

是否可以运行外部 PHP 脚本而无需将其转换为插件或使用控制器？

我的外部代码只有一个文件“index.php”，它使用 PHP 生成 HTML 代码。

我不能在 CakePHP 2.0 上不修改它就使用它吗？

我想要的是访问它，就像它是一个视图一样，就像我将它上传到一个普通站点一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:02:12.553

可以在 cakephp 的 webroot 文件夹中上传外部 php 文件

# android - 我应该使用什么方法在手机上存储文字和图片？

> ID：10616162
> 
> 赞同：0
> 
> 时间：2012-05-16T09:56:20.793
> 
> 标签：android, store

我正在制作费用日志应用程序。用户可以通过添加对象的图片来创建日志，然后添加价格和一些评论。

我想知道我是否需要使用数据库来存储该数据，或者我可以将其直接存储到手机中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:59:03.847

在 Android 应用程序中存储数据的方式有多种：SharedPreferences、文件、SQLite 数据库等。您选择哪一种，取决于您的要求、需要存储的数据量等。我建议您阅读[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)部分Android 开发者入门指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:29:18.657

对于您的情况，数据库是最合适的。您可以将所有费用放在 SharedPreferences 中的 String 数组中，但这使用起来会很糟糕。如果您正在搜索一个等等，您总是需要将所有费用加载到内存中。数据库允许通过 SQL 进行搜索、过滤和排序。创建数据库的初始数量较大，但之后的数据管理会更好。

Demonick 对图像的看法是正确的，只需将图像文件的路径存储在数据库中，然后从那里检索图像。如果您将图像存储在 SD 卡上，用户或其他应用程序可以访问和删除它们，因此不要指望它们以后可用。

# actionscript-3 - Flash builder 中相同高级数据网格中的两个渲染器

> ID：10616165
> 
> 赞同：0
> 
> 时间：2012-05-16T09:56:32.973
> 
> 标签：actionscript-3, flash, air, flash-builder

我有一个有两个渲染器的数据网格。一个是文本框，另一个是 dropdwon。两者都是 mxml 呈现的。

我的要求是当用户编辑特定行中的文本框值时，我应该使该特定行的下拉值也更改。

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:27:05.137

***如果这是火花：***
ItemRenderer 有一个属性**所有者**，它是 dataGrid - 您需要在此上添加一个事件侦听器（来自组合框之一） - 可能来自您从所有者的角度调度的另一个渲染器（例如: 在 textboxitemeditor: owner.dispatchEvent(RendererEvent.CHANGE, value))

在这个监听器中——当适当的数据被编辑时，你可以适当地更新你的组合框。

执行此类操作时的关键是要记住删除侦听器和您在*dispose()*方法中创建的任何其他引用。

***如果这是光环：***
它基本上与上面几乎相同，不同之处在于有一个 baseListData 对象，它具有来自渲染器的所有者引用。

# c# - WCF 连接到 Websocket 服务器

> ID：10616169
> 
> 赞同：0
> 
> 时间：2012-05-16T09:56:42.493
> 
> 标签：c#, .net, wcf, c#-4.0, websocket

我应该使用哪个库将我的 WCF 服务（远程）连接到 Websocket 服务器？

我找到了这个库 Microsoft.ServiceModel.Websocket.dll 但我没有找到在 web 服务是客户端而不是服务器的情况下如何使用。

PS：我正在使用.net 4.0。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:01:34.627

您需要一个支持 websocket 协议的 WCF 绑定。不幸的是，它在 .net 4.0 中不存在。

不过，它将在 .net 4.5[中可用。](http://www.codeproject.com/Articles/338789/What-s-new-in-WCF-4-5-WebSocket-support-Part-1-of)

# java - 崩溃共识算法

> ID：10616177
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:57:08.063
> 
> 标签：java, algorithm, pseudocode

我在实施崩溃共识算法时遇到问题。这是一些伪代码。有人可以给我解释一下它的含义。

```
Crash-Consensus-Receive-Message(m)
if m is proposal message then
    ▷add the received values to set of all known proposed values
    add[knownValues,values[m]]
    note that sender[m]has not crashed during this round
else                ▷ordinary message received
process message m

Crash-Consensus-Reach-Consensus()
knownValues←{ownValue}  ▷start with just own proposed value
sentValues←0            ▷no values sent yet
for i←0 to f do         ▷f+1 rounds of multicasts
      ▷determine which known values have not yet been sent
      newValues←knownValues -ssentValues
      multicast proposal message with newValues to alive processes
      wait until next round
use pre-agreed strategy with knownValues to get consensus value 
```

sender[m] 和 values[m] 是什么意思，因为 m 在这里表示消息？还有 knownValues 是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:24:04.243

在大多数编程语言中，方括号表示一组值，在您的情况下是一组已知消息或一组要发送的消息。我不确定这在伪代码中是否也是如此，但我认为也许在所有情况下都可以帮助你。

# sql-server-2008-r2 - 将 db 表从 SQL Server 2008 R2 导出到 Excel 2007

> ID：10616178
> 
> 赞同：2
> 
> 时间：2012-05-16T09:57:21.040
> 
> 标签：sql-server-2008-r2

SQL Server 2008 R2（管理工具，不编码，因为我有点菜鸟）到 Excel。

*我需要将我的数据库表COMPANY* （一些 feilds varchar(50) 一些 nchar(10)）中的信息导出到我刚刚正常创建的 Excel 电子表格中 - Excel > New > Blank。

一切似乎都是直截了当的，但只是看不到问题...请参阅下文并提前感谢一百万:)

> 预执行（错误）消息错误 0xc0202009：数据流任务 1：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。（SQL Server 导入和导出向导）
> 
> 错误 0xc0202025：数据流任务 1：无法创建 OLE DB 访问器。验证列元数据是否有效。（SQL Server 导入和导出向导）
> 
> 错误 0xc004701a：数据流任务 1：组件“目标 - 公司”(37) 未能通过预执行阶段并返回错误代码 0xC0202025。（SQL Server 导入和导出向导）
> 
> ```
> Executing (Warning) Messages Warning: Preparation SQL Task 1: Multiple-step OLE DB 
> ```
> 
> 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。（SQL Server 导入和导出向导）
> 
> 警告：准备 SQL 任务 1：多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。（SQL Server 导入和导出向导）
> 
> ```
> Copying to COMPANY (Stopped)
> 
> Post-execute (Stopped) Messages Information 0x4004300b: Data Flow Task 1: "component "Destination - COMPANY" (37)" wrote 0 rows. (SQL 
> ```
> 
> 服务器导入和导出向导）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-15T23:14:06.827

在导入向导中，当您选择要导出的表或视图时，单击 [Edit Mappings] 按钮。解决我的问题的方法是将导出数据类型为“Long Text”的字段更改为“VarChar”255 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T07:30:41.460

您的源表可能包含某些具有 NVARCHAR 数据类型的列，这就是您收到此错误的原因。

这不是一个好的解决方案，我仍然会尝试将列的数据类型从 NVARCHAR 更改为 VARCHAR。

谢谢 Dhiraj

# iphone - 如何在不同的类中填充 Xib

> ID：10616187
> 
> 赞同：2
> 
> 时间：2012-05-16T09:57:48.563
> 
> 标签：iphone, ios

我的问题是这样的？？

```
我有一个类 addEditPatient.m 和它的 Xib 。

我想在另一个名为 patientview.m 的类中使用相同的 xib，
这个 patientview 包含它自己的 Xib 和一个名为 Addpatient 的按钮。

我想在 Patientview 类中单击添加按钮时显示 addEditPatient.xib。

我不想推送我想将子视图添加到患者视图的视图。

如果可能的话，任何人都可以举个例子吗？

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:13:48.790

如果我理解你，这会起作用，在 Patientview 类的 addButtonMethod 中添加这段代码：

```
AddEditPatient *addEditPatient = [[[AddEditPatient alloc] init] autorelease];
[self.view addSubview:addEditPatient.view]; 
```

希望有帮助

# c# - 自动从程序集 dll 创建 sql server 函数

> ID：10616191
> 
> 赞同：1
> 
> 时间：2012-05-16T09:57:51.837
> 
> 标签：c#, sql-server, sql-server-2008, tsql, sql-server-2005

我在一个名为的程序集 dll 中有几个函数`UserFunctions.dll`，例如：

```
public static partial class VariousFunctions
{
    [SqlFunction(IsDeterministic = true, IsPrecise = true)]
    public static SqlBoolean RegexMatch(SqlString expression, SqlString pattern)
    {
      ...
    }

    [SqlFunction(IsDeterministic = true, IsPrecise = true)]
    public static SqlInt32 WorkingDays(SqlDateTime startDateTime, SqlDateTime endDateTime)
    {
      ...
    }

    [SqlFunction(IsDeterministic = true, IsPrecise = true)]
    public static SqlString getVersion()
    {
      ...
    }

    ...
} 
```

我想用 ac# 函数生成 sql 脚本，以自动创建或更新所有具有`SqlFunction`此 dll 中包含的属性的函数。此 sql 脚本应如下所示：

```
-- Delete all functions from assembly 'UserFunctions'
DECLARE @sql NVARCHAR(MAX)
SET @sql = 'DROP FUNCTION ' + STUFF(
            (
                SELECT
                    ', ' + QUOTENAME(assembly_method) 
                FROM
                    sys.assembly_modules
                WHERE
                    assembly_id IN (SELECT assembly_id FROM sys.assemblies WHERE name = 'UserFunctions')
                FOR XML PATH('')
            ), 1, 1, '')
-- SELECT @sql
IF @sql IS NOT NULL EXEC sp_executesql @sql

-- Create all functions from assembly 'UserFunctions'
CREATE FUNCTION RegexMatch(@expression NVARCHAR(MAX), @pattern NVARCHAR(MAX)) RETURNS BIT 
    AS EXTERNAL NAME UserFunctions.VariousFunctions.RegexMatch;
GO
CREATE FUNCTION WorkingDays(@startDateTime DATETIME, @endDateTime DATETIME) RETURNS INTEGER 
    AS EXTERNAL NAME UserFunctions.VariousFunctions.WorkingDays;
GO  
 CREATE FUNCTION getVersion() RETURNS VARCHAR(MAX) 
    AS EXTERNAL NAME UserFunctions.VariousFunctions.getVersion;
GO 
```

第一部分非常简单，但对于第二部分，这可能使用 Type、MethodInfo 和 ParameterInfo 类的反射方法来实现。有人已经这样做了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:49:28.513

我已经对其进行了测试和调试：

```
static void Main(string[] args)
{
  Assembly clrAssembly = Assembly.LoadFrom(@"Path\to\your\assembly.dll");
  string sql = CreateFunctionsFromAssembly(clrAssembly, permissionSetType.UNSAFE);
  File.WriteAllText(sqlFile, sql);
}

/// <summary>
/// permissions available for an assembly dll in sql server
/// </summary>
public enum permissionSetType { SAFE, EXTERNAL_ACCESS, UNSAFE };

/// <summary>
/// generate sql from an assembly dll with all functions with attribute SqlFunction
/// </summary>
/// <param name="clrAssembly">assembly object</param>
/// <param name="permissionSet">sql server permission set</param>
/// <returns>sql script</returns>
public static string CreateFunctionsFromAssembly(Assembly clrAssembly, permissionSetType permissionSet)
{
    const string sqlTemplate = @"
      -- Delete all functions from assembly '{0}'
      DECLARE @sql NVARCHAR(MAX)
      SET @sql = 'DROP FUNCTION ' + STUFF(
        (
            SELECT
                ', ' + assembly_method 
            FROM
                sys.assembly_modules
            WHERE
                assembly_id IN (SELECT assembly_id FROM sys.assemblies WHERE name = '{0}')
            FOR XML PATH('')
        ), 1, 1, '')
      IF @sql IS NOT NULL EXEC sp_executesql @sql
      GO

      -- Delete existing assembly '{0}' if necessary
      IF EXISTS(SELECT 1 FROM sys.assemblies WHERE name = '{0}')
        DROP ASSEMBLY {0};
      GO

      {1}
      GO

      -- Create all functions from assembly '{0}'
    ";
    string assemblyName = clrAssembly.GetName().Name;

    StringBuilder sql = new StringBuilder();
    sql.AppendFormat(sqlTemplate, assemblyName, CreateSqlFromAssemblyDll(clrAssembly, permissionSet));

    foreach (Type classInfo in clrAssembly.GetTypes())
    {
        foreach (MethodInfo methodInfo in classInfo.GetMethods(BindingFlags.Static | BindingFlags.Public | BindingFlags.DeclaredOnly))
        {
            if (Attribute.IsDefined(methodInfo, typeof(SqlFunctionAttribute)))
            {
                StringBuilder methodParameters = new StringBuilder();
                bool firstParameter = true;
                foreach (ParameterInfo paramInfo in methodInfo.GetParameters())
                {
                    if (firstParameter)
                         firstParameter = false;
                    else
                        methodParameters.Append(", ");
                    methodParameters.AppendFormat(@"@{0} {1}", paramInfo.Name, ConvertClrTypeToSql(paramInfo.ParameterType));
                }
                string returnType = ConvertClrTypeToSql(methodInfo.ReturnParameter.ParameterType);
                string methodName = methodInfo.Name;
                string className = (classInfo.Namespace == null ? "" : classInfo.Namespace + ".") + classInfo.Name;
                string externalName = string.Format(@"{0}.[{1}].{2}", assemblyName, className, methodName);
                sql.AppendFormat(@"CREATE FUNCTION {0}({1}) RETURNS {2} AS EXTERNAL NAME {3};"
                                , methodName, methodParameters, returnType, externalName)
                   .Append("\nGO\n");
            }
        }
    }
    return sql.ToString();
}

/// <summary>
/// Generate sql script to create assembly
/// </summary>
/// <param name="clrAssembly"></param>
/// <param name="permissionSet">sql server permission set</param>
/// <returns></returns>
public static string CreateSqlFromAssemblyDll(Assembly clrAssembly, permissionSetType permissionSet)
{
    const string sqlTemplate = @"
      -- Create assembly '{0}' from dll
      CREATE ASSEMBLY [{0}] 
        AUTHORIZATION [dbo]
        FROM 0x{2}
        WITH PERMISSION_SET = {1};
    ";

    StringBuilder bytes = new StringBuilder();
    using (FileStream dll = File.OpenRead(clrAssembly.Location))
    {
        int @byte;
        while ((@byte = dll.ReadByte()) >= 0)
            bytes.AppendFormat("{0:X2}", @byte);
    }
    string sql = String.Format(sqlTemplate, clrAssembly.GetName().Name, permissionSet, bytes);

    return sql;
}

/// <summary>
/// Convert clr type to sql type
/// </summary>
/// <param name="clrType">clr type</param>
/// <returns>sql type</returns>
private static string ConvertClrTypeToSql(Type clrType)
{
    switch (clrType.Name)
    {
        case "SqlString":
            return "NVARCHAR(MAX)";
        case "SqlDateTime":
            return "DATETIME";
        case "SqlInt16":
            return "SMALLINT";
        case "SqlInt32":
            return "INTEGER";
        case "SqlInt64":
            return "BIGINT";
        case "SqlBoolean":
            return "BIT";
        case "SqlMoney":
            return "MONEY";
        case "SqlSingle":
            return "REAL";
        case "SqlDouble":
            return "DOUBLE";
        case "SqlDecimal":
            return "DECIMAL(18,0)";
        case "SqlBinary":
            return "VARBINARY(MAX)";
        default:
            throw new ArgumentOutOfRangeException(clrType.Name + " is not a valid sql type.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T19:03:46.390

我建议您执行以下操作：从 Visual Studio，转到文件 > 新项目...然后从模板中选择 SQL SERVER

[![在此处输入图像描述](../Images/bf0eba6bd467f2320214c66f1f022114.png)](https://i.stack.imgur.com/b5oyf.png)

从您的项目中获取属性

[![在此处输入图像描述](../Images/c776c491c9e89fb16dbd129cd8d622d0.png)](https://i.stack.imgur.com/K5GFP.png)

提到在项目设置中，您可以确定您的“目标平台”，在 SQLCLR 中，您可以选择您的编程语言

[![在此处输入图像描述](../Images/04a0802be0f5b7c6170434f4f5caf3d0.png)](https://i.stack.imgur.com/8b7o1.png)

向您的项目添加一个新项目（SQL CLR C# 用户定义函数）

[![在此处输入图像描述](../Images/a68fd8df50cfbbdbd2ae1f3ec14de38d.png)](https://i.stack.imgur.com/4pIQQ.png)

编写你的函数

[![在此处输入图像描述](../Images/aeead8d994b71d5a1f70cc4d9358f647.png)](https://i.stack.imgur.com/gJJgG.png)

编写代码后，右键单击您的项目并首先构建您的项目，然后将其发布到您的 sql server

[![在此处输入图像描述](../Images/8958f26b417f15bed9e4e22c88ec55f2.png)](https://i.stack.imgur.com/k4dyH.png)

在下一个窗口中，设置与 sql server 和数据库的连接

[![在此处输入图像描述](../Images/90439128dd1161f8d9d7d01ad57fdf20.png)](https://i.stack.imgur.com/jEAoB.png)

完成后，您可以看到在您的数据库中已经创建了正确的程序集和函数

[![在此处输入图像描述](../Images/d3b3b18eab12efa787d530fe38fdde39.png)](https://i.stack.imgur.com/EVG7x.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:16:06.493

一种方法可能是在已知函数中使用反射，该函数在 dll 中编译（如果它是您的）或在您可以创建和引用的 CLR dll 中。在那里，您可以使用 .NET 的完整 REGEX 支持将创建函数所需的匹配名称返回给 SQL SERVER。

这是一种解决方法，但我不知道使用 .NET 反射的本地 TSQL 方法

**-编辑-**

如果你需要从 .NET 创建一个 TSQL 脚本，你可以使用类似这样的东西（未调试，但大多数东西应该在那里）

```
public string encode(Type containerClass, string SSRVassemblyName)
    {
        string proTSQLcommand="";
        MethodInfo[] methodName = containerClass.GetMethods();
        foreach (MethodInfo method in methodName)
        {
            proTSQLcommand += "CREATE FUNCTION ";
            if (method.ReflectedType.IsPublic)
            {
                bool hasParams = false;
                proTSQLcommand += method.Name +"(";
                ParameterInfo[] curmethodParams = method.GetParameters();
                if (curmethodParams.Length > 0)
                    for (int i = 0; i < curmethodParams.Length; i++)
                    {
                        proTSQLcommand +=(hasParams?",":"")+ String.Format("@{0} {1}",curmethodParams[i].Name,CLRtypeTranscoder(curmethodParams[i].ParameterType.Name)) ;
                        hasParams = true;
                    }
                proTSQLcommand += (hasParams ? "," : "") + String.Format("@RetVal {0} OUT", CLRtypeTranscoder(method.ReturnType.Name));

            }
            //note that I have moved the result of the function to an output parameter 
            proTSQLcommand += "RETURNS INT ";
            //watch this! the assembly name you have to use is the one of SSRV, to reference the one of the CLR library you have to use square brackets as follows
            proTSQLcommand += String.Format("AS EXTERNAL NAME {0}.[{1}.{2}].{3}; GO ",SSRVassemblyName, GetAssemblyName(containerClass.Name),containerClass.Name,method.Name);
        }
        return proTSQLcommand;
    }
    public string CLRtypeTranscoder(string CLRtype)
    { //required as the mapping of CLR type depends on the edition of SQL SERVER you are using
        switch (CLRtype.ToUpper())
        {
            case "STRING":
                return "VARCHAR(MAX)";
            case "INT":
                return "INT";
        }
        throw new   ArgumentOutOfRangeException();
    }
    public static String GetAssemblyName(String typeName)
    {
        foreach (Assembly currentassemblAssy in AppDomain.CurrentDomain.GetAssemblies())
        {
            Type t = currentassemblAssy.GetType(typeName, false, true);
            if (t != null) { return currentassemblAssy.FullName; }
        }

        return "not found";
    } 
```

# sql-server - 有两列有主键而不是两列有一个主键

> ID：10616193
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:58:10.587
> 
> 标签：sql-server, primary-key

在一个表中，我希望有两列带有主键（如果两列中的每一列都是重复的，则避免插入值）但不是带有一个主键的两列（如果两列都重复，则避免插入值）

例如 ：

第 1 列：a、b、c

列 2:1,2,3

在此表中我不想插入（column1:a 和 column2:4）或（column1:d 和 column2:3）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:00:42.587

你只能有一个主键，这就是重点。在另一列上添加唯一约束？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T10:00:48.033

对具有 UNIQUE 属性集的第二列使用索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:03:29.480

你不能。一张表只能有一个主键。考虑使用两个唯一索引。

```
CREATE UNIQUE INDEX index1 ON Table(column1);
CREATE UNIQUE INDEX index2 ON Table(column2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T10:13:37.373

您只能设置一个主键。接下来，您可以创建唯一键或组合唯一组合键（复合键）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T10:02:16.283

使用一个主键和一个唯一索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T10:02:36.000

例如，在 column1 中创建一个主键，并在 columnb 上创建一个唯一索引。

# git - Git恢复删除的分支合并没有--no-ff

> ID：10616199
> 
> 赞同：1
> 
> 时间：2012-05-16T09:58:49.587
> 
> 标签：git

我合并了两个分支，忘记使用 --no-ff 选项，然后我推送到原点。

我想：恢复已删除的分支，在没有--no-ff 的情况下合并两个分支之前回滚，再用--no-ff 合并它们。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:04:50.400

只需从您所在的位置开始，即`group`分支位于您的功能分支的最后一次提交，并且由于您在没有快进的情况下`develop`合并到它，因此也在此提交`group`

假设`forkedSHA`是您开始功能的第一个提交的 SHA，您必须先将 master 重置为提交：

```
git checkout develop
git reset --hard forkedSHA~ 
```

现在您处于与运行合并之前相同的情况，只需再次执行`--no-ff`

```
git merge --no-ff group 
```

并用力推到`origin`

```
git push --force origin 
```

如果其他人`origin`介于两者之间，他们将不得不处理这种变化。

# php - Perl 等价于 Php foreach 循环

> ID：10616200
> 
> 赞同：7
> 
> 时间：2012-05-16T09:58:49.497
> 
> 标签：php, perl, foreach

我正在寻找与以下 php 代码等效的 Perl：-

```
foreach($array as $key => $value){
...
} 
```

我知道我可以像这样做一个 foreach 循环：-

```
foreach my $array_value (@array){
..
} 
```

这将使我能够使用数组值做事——但我也想使用键。

我知道有一个 Perl 散列可以让你设置键值对，但我只想要数组自动给你的索引号。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T10:47:01.847

如果您使用的是 Perl 5.12.0 或更高版本，则可以`each`在数组上使用：

```
my @array = 100 .. 103;

while (my ($key, $value) = each @array) {
    print "$key\t$value\n";
} 
```

输出：

```
0       100
1       101
2       102
3       103 
```

[perldoc 每个](http://perldoc.perl.org/functions/each.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T10:41:58.350

我猜最接近的 Perl 是这样的：

```
foreach my $key (0 .. $#array) {
  my $value = $array[$key];

  # Now $key and $value contains the same as they would in the PHP example
} 
```

从 Perl 5.12.0 开始，您可以[`keys`](http://perldoc.perl.org/functions/keys.html)在数组和散列上使用该函数。这可能更具可读性。

```
use 5.012;

foreach my $key (keys @array) {
  my $value = $array[$key];

  # Now $key and $value contains the same as they would in the PHP example
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-16T10:13:59.383

尝试：

```
my @array=(4,5,2,1);
foreach $key (keys @array) {
    print $key." -> ".$array[$key]."\n";
} 
```

适用于哈希和数组。在数组的情况下， $key 保存索引。

# asp.net - 动态加载的用户控件不呈现

> ID：10616201
> 
> 赞同：0
> 
> 时间：2012-05-16T09:58:51.743
> 
> 标签：asp.net, c#-4.0, user-controls

我正在尝试使用户控件像插件一样工作：从用户的选择中动态加载它（使用反射）。单击按钮后，我可以看到 UI 已调整为据说已加载用户控件，但我无法控制控件本身。我什至使用了视图状态，但仍然看不到控件。

请在下面找到我的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        //the scenario should be: a user clicking a button and from there, 
        //loads the control just below it, but still in the same page.
        if (Page.IsPostBack)
            LoadUserControl();

        //(a)I also tried to put in a ViewState but still nothing happens.
        //if (ViewState["UserControl"] != null)
        //{
        //    UserControl uc = (UserControl)ViewState["UserControl"];
        //    pnlReportControl.Controls.Add(LoadControl());
        //}

    }

//supposedly done after a button click
private void LoadUserControl()
    {
        enrolmentReports = string.Concat(Server.MapPath("~"), enrolmentDll);

        assembly = Assembly.LoadFrom(enrolmentReports);

        Type type = assembly.GetType("TZEnrollmentReports.EnrollmentUserControl");

        enrolmentMethodInfos = type.GetMethods();

        //also tried this way but also didn't work
        //Page.LoadControl(type, null);

        UserControl uc1 = (UserControl)LoadControl(type, null);

        pnlReportControl.Controls.Add(uc1);

        //(a)
        //ViewState["UserControl"] = uc1;
    } 
```

请帮忙。这只是整个复杂过程的第一步。我仍然必须从该报告中获取数据集。但我想我要把它留给另一个线程。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:01:02.467

我相信这是设计使然`LoadControl(Type, Object)`，它不会返回您所期望的。

如果您将其更改为使用，`LoadControl("PathOfControl")`那么这应该可以工作。

有关更多信息，请参阅此 SO Q&A[使用 LoadControl 方法动态加载用户控件（类型，对象 []）](https://stackoverflow.com/questions/450431/dynamically-loading-a-usercontrol-with-loadcontrol-method-type-object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:14:44.223

可以帮助您解决此问题的建议是稍微改变方法。通常开发一个可插拔系统，你将可插拔性建立在一些接口上。在您的情况下，我将创建一个接口，该接口`IPlugin`定义一个类似的方法`CreateUI`和其他一些方法，以某种通用形式在内部检索由自定义控件管理的数据。

这样，您将委派插件实现（您的自定义控件）正确创建 UserControl 并将其返回给调用者（您的页面）的责任。一旦通过反射加载插件实现（像这样）：

```
Assembly pluginDLL = Assembly.Load(System.IO.File.ReadAllBytes(fullPath));
Type pluginType = pluginDLL.GetType(step.PluginClass);
IPlugin plugin = (IPlugin)Activator.CreateInstance(pluginType); 
```

然后你可以在你的页面上加载控件：

```
pnlReportControl.Controls.Add(plugin.CreateUI()); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-16T10:10:13.533

尝试在您的 page_load 方法中替换以下代码

`if (Page.IsPostBack) LoadUserControl();`和`if (!Page.IsPostBack) LoadUserControl();`

# c# - Asp.net：使用 blkCopy 上传 excel 文件并添加用户定义的列

> ID：10616203
> 
> 赞同：0
> 
> 时间：2012-05-16T09:59:02.090
> 
> 标签：c#, asp.net, sql, database, sqlbulkcopy

目前我的程序正在通过浏览器将一个excel文件上传到服务器。然后在服务器上读取该 excel 文件，并将其值放入数据库中。我要解决的问题是我想再添加一列，但我希望它是用户从浏览器定义的，我看不到任何方法，因为我正在使用 bulkCopy。

我想要做的是允许用户在文本框中添加文本，例如 MAR12 或 APR12，然后上传 excel 文件并将其添加到 excel 文件填充的每一列中。任何人都可以帮助我解决问题。谢谢

```
string tableRows= "SELECT [id],[DateEntered],[User_ID] FROM [EPG$]";          

string EPGTableName = "tableName";               table in the database 
```

这是将 excel 文件复制到数据库的位置：

```
 using (OleDbConnection connection = new OleDbConnection(connStr))
        {
            OleDbCommand command = new OleDbCommand(tableRows, connection);

            connection.Open();
            // Create DbDataReader to Data Worksheet
            using (DbDataReader dr = command.ExecuteReader())
            {
                // SQL Server Connection String
                string sqlConnectionString = "SERVER=<server>;UID=schafc;Trusted_Connection=Yes;DATABASE=<database>;";

                // Bulk Copy to SQL Server
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                {
                    bulkCopy.DestinationTableName = tableName;
                    bulkCopy.WriteToServer(dr);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:21:28.973

我不确定您将如何使用 DataReader 执行此操作，但可以使用 DataAdapter 和 DataTable 来完成。填充表，添加一列（具有默认值），然后将表传递给大容量副本而不是数据读取器。

```
using (OleDbDataAdapter adapter = new OleDbDataAdapter(tableRows, connStr))
{
    DataTable table = new DataTable();
    adapter.Fill(table);
    table.Columns.Add(new DataColumn("@ColumnName", typeof(string), string.Format("'{0}'", textboxvalue)));
    // SQL Server Connection String
    string sqlConnectionString = "SERVER=<server>;UID=schafc;Trusted_Connection=Yes;DATABASE=<database>;";

    // Bulk Copy to SQL Server
    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
    {
        bulkCopy.DestinationTableName = tableName;
        bulkCopy.WriteToServer(table);
    }
} 
```

# javascript - 需要帮助隐藏 facebook 中的 ego_bar

> ID：10616204
> 
> 赞同：1
> 
> 时间：2012-05-16T09:59:03.350
> 
> 标签：javascript, jquery, facebook, greasemonkey

```
// ==UserScript==
// @name        Supprimer les suggestions d'amis sur facebook
// @namespace   facebook
// @description Supprimer les suggestions d'amis sur facebook
// @include     *.facebook.com
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// @version     1
// ==/UserScript==
// ==/UserScript==

jQuery(function(){ $("#pagelet_ego_pane_w").remove() });
jQuery(function(){ $(".ego_column").remove() });
jQuery(function(){ $(".ego_unit_container").remove() });
//alert ("supprimé ?"); 
```

这些行都不起作用。我在greasemonkey中使用它。

请看截图：http: [//i.imgur.com/5bowH.jpg](http://i.imgur.com/5bowH.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:42:34.590

使用[`waitForKeyElements()`](https://gist.github.com/2625891). 像这样：

```
// ==UserScript==
// @name        Supprimer les suggestions d'amis sur facebook
// @namespace   facebook
// @include     http://www.facebook.com/*
// @include     https://www.facebook.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @version     1
// ==/UserScript==

function removeEgoPane (jNode) {
    jNode.remove ();
    unsafeWindow.console.log ("Removed");
}

waitForKeyElements ("#pagelet_ego_pane_w, #pagelet_ego_pane", removeEgoPane); 
```

* * *

**重要的：**

1.  只有一些页面有`#pagelet_ego_pane_w`div，并且脚本在这些页面上完美运行。但是，大多数页面都将自我栏放在一个`#pagelet_ego_pane`div 中。因此在上面的代码中改变了选择器。

    如果自我条返回，请检查它是否仍在这两个节点之一中。

2.  不要`.hide()`div；这只是让 Facebook 取消隐藏它并针对它运行缓慢的 JS。如果不需要，最好删除这些节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:32:20.553

正如 subrikumarsao 所建议的， .hide() 工作正常:)

> 你试过 $("#pagelet_ego_pane_w").hide() 吗？– subirkumarsao 3 小时前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T20:02:54.793

`$("#pagelet_ego_pane, #pagelet_side_ads, .ego_column").remove();`为我工作。

我把这个包裹在一个[`MutationObserver`](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/notifications).

```
var target = document.querySelector("body");
// console.log(typeof target);

if (target) {
 // create an observer instance

 var observer = new MutationObserver(function(mutations) {

   // Get rid of ad column on right side of page
   $("#pagelet_ego_pane, #pagelet_side_ads, .ego_column").remove();

   // Get rid of sponsored links
   $("#contentArea .uiStreamSponsoredLink").parentsUntil("._5jmm").remove();
 }
} 
```

# java - 解决多线程应用程序中 Hibernate 的错误

> ID：10616207
> 
> 赞同：1
> 
> 时间：2012-05-16T09:59:07.500
> 
> 标签：java, multithreading, hibernate, spring-mvc

由于我们在多线程应用程序中尝试使用 Hibernate 时可能遇到的所有问题（[第 1 条线索](http://blog.xebia.com/2009/02/07/hibernate-and-multi-threading/)、[第 2 条线索](https://developer.atlassian.com/display/CONFDEV/Hibernate+Sessions+and+Transaction+Management+Guidelines)、[第 3 条线索](https://stackoverflow.com/questions/3777794/is-hibernates-session-thread-safe)等），我正在考虑另一种解决方案：在*经典* `Controller`中实现逻辑部分，然后简单地调用它从我的线程使用`URL.openConnection()`.

换句话说，而不是做这样的事情：

`MyThread.java`

```
public class MyThread implements Runnable {

    @Override
    public void run() {
        // do some great stuff with Hibernate
    }

} 
```

`Anywhere.java`

```
new Thread(new MyThread()).start(); 
```

我想尝试这样的事情：

`MyController.java`

```
@Controller
public class MyController {

    @RequestMapping(value = "myUrl", method = RequestMethod.GET)
    public void myMethod() {
        // do some great stuff with Hibernate
    }

} 
```

`MyThread.java`

```
public class MyThread implements Runnable {

    @Override
    public void run() {
        // simple call the above mapped url
    }

} 
```

`Anywhere.java`

```
new Thread(new MyThread()).start(); 
```

你怎么看待这件事？是好是坏？我还没有尝试过，但我认为这样的解决方案可以防止我们在多线程中使用 Hibernate 时遇到的常见错误，因为服务器将执行逻辑部分，就好像有人在请求*假*页面一样。

PS：我知道有一些在多线程应用程序中使用 Hibernate 的*解决方案*，但是每次我尝试一个时，都会出现另一个，直到*我厌倦了它*的不归路。

PS2：我知道需要保护这样的解决方案（例如作为令牌的 UID）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:06:04.990

我真的不明白你想在这里解决什么问题。Hibernate 几乎总是在多线程环境中使用。例如，在 webapps 中，并发请求由多个并发线程处理，每个线程使用自己的 Hibernate 会话。这不会造成任何问题。

如果您在线程之间共享相同的会话，或者如果您在线程之间共享给定的实体，您将遇到问题。

如果您启动自己的线程，并且该线程使用自己的会话和实体，我不明白您为什么会有任何问题。

# java - 为什么 isEmpty() 在 BufferedReader 中会跳过很多行？

> ID：10616210
> 
> 赞同：1
> 
> 时间：2012-05-16T09:59:15.537
> 
> 标签：java, text, io, readline, bufferedreader

我正在尝试使用 BufferedReader 从文本文件中读取。我想跳过带有“#”和“*”的行，它可以工作。但它不适用于空行。我使用 line.isEmpty() 但只有第一个输出显示。

我的文本文件如下所示：

```
# Something something
# Something something

# Staff No. 0

*  0  0  1

1 1 1 1 1 1

*  0  1  1

1 1 1 1 1 1

*  0  2  1

1 1 1 1 1 1 
```

我的代码：

```
StringBuilder contents = new StringBuilder();
    try {
      BufferedReader input =  new BufferedReader(new FileReader(folder));
      try {
        String line = null;
        while (( line = input.readLine()) != null){
          if (line.startsWith("#")) {
              input.readLine(); 
          }
          else if (line.startsWith("*")) {
              input.readLine(); 
          }
          else if (line.isEmpty()) { //*this
              input.readLine(); 
          }
          else {
          contents.append(line);
          contents.append(System.getProperty("line.separator"));
          System.out.println(line);
          }
        }
      }
      finally {
        input.close();
      }
    }
    catch (IOException ex){
      ex.printStackTrace();
    } 
```

我想要的输出应该是这样的：

```
1 1 1 1 1 1
1 1 1 1 1 1
1 1 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:01:39.133

如果没有分配给变量，则每次调用都会`readline()`跳过一行，只需删除这些调用，因为这会清空大部分 if-else 块，您可以将其简化为：

```
// to be a bit more efficient
String separator = System.getProperty("line.separator");
while (( line = input.readLine()) != null)
{
    if (!(line.startsWith("#") || 
          line.startsWith("*") ||
          line.isEmpty() )) 
    {
        contents.append(line);
        contents.append(separator);
        System.out.println(line);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:03:28.933

查看代码的流控制。

当你这样做时，你会在哪里结束？

```
else if (line.isEmpty()) { //*this
    input.readLine(); 
} 
```

你读了一行，代码继续循环：

```
while (( line = input.readLine()) != null){ 
```

其中读了另一行。

所以每次遇到空行时，都会忽略它后面的行。

你可能应该这样做：

```
else if (line.isEmpty()) { //*this
  continue;
} 
```

# spring - LdapAuthenticationProvider 在 AbstractContextSource.getReadOnlyContext 抛出 NullPointerException

> ID：10616212
> 
> 赞同：17
> 
> 时间：2012-05-16T09:59:26.717
> 
> 标签：spring, security, spring-security, ldap

我使用了在 xml 文件中定义的 Spring Security LDAP 身份验证，它工作正常：

```
<security:authentication-manager>
    <security:ldap-authentication-provider 
        user-search-filter="(uid={0})"
        user-search-base="dc=company,dc=com">
    </security:ldap-authentication-provider>
</security:authentication-manager>

<security:ldap-server url="ldap://mail.company.com" /> 
```

我需要在身份验证器提供程序中插入一些逻辑（登录到数据库以命名一个），因此我实现了 DaoAuthenticationProvider 以使用 LDAP：

xml配置：

```
<security:authentication-manager>
    <security:authentication-provider ref="appAuthenticationProvider" />
</security:authentication-manager> 
```

类实现：

```
@Service("appAuthenticationProvider")
public class AppAuthenticationProvider extends DaoAuthenticationProvider  {

    private LdapAuthenticationProvider ldapProvider;

    public AppAuthenticationProvider(){
        DefaultSpringSecurityContextSource contextSource = new DefaultSpringSecurityContextSource("ldap://mail.company.com");
        BindAuthenticator authenticator = new BindAuthenticator(contextSource);
        authenticator.setUserSearch(new FilterBasedLdapUserSearch("dc=company,dc=com", "(uid={0})", contextSource));
        ldapProvider = new LdapAuthenticationProvider(authenticator);
    }

    public Authentication authenticate(Authentication authRequest) throws AuthenticationException {
        return ldapProvider.authenticate(authRequest);
    }

} 
```

它看起来很符合您对第一个实现的期望，但 authenticate 方法会引发以下异常：

```
java.lang.NullPointerException
org.springframework.ldap.core.support.AbstractContextSource.getReadOnlyContext(AbstractContextSource.java:125)
org.springframework.ldap.core.LdapTemplate.executeReadOnly(LdapTemplate.java:792)
org.springframework.security.ldap.SpringSecurityLdapTemplate.searchForSingleEntry(SpringSecurityLdapTemplate.java:196)
org.springframework.security.ldap.search.FilterBasedLdapUserSearch.searchForUser(FilterBasedLdapUserSearch.java:116)
org.springframework.security.ldap.authentication.BindAuthenticator.authenticate(BindAuthenticator.java:90)
org.springframework.security.ldap.authentication.LdapAuthenticationProvider.doAuthentication(LdapAuthenticationProvider.java:178)
org.springframework.security.ldap.authentication.AbstractLdapAuthenticationProvider.authenticate(AbstractLdapAuthenticationProvider.java:61)
myapp.security.AppAuthenticationProvider.authenticate(AppAuthenticationProvider.java:69) 
```

第一种情况下的日志如下所示：

```
[myapp] 2012-05-16 11:38:44,339 INFO  org.springframework.security.ldap.DefaultSpringSecurityContextSource -  URL 'ldap://mail.company.com', root DN is ''
[myapp] 2012-05-16 11:38:44,364 INFO  org.springframework.security.ldap.DefaultSpringSecurityContextSource -  URL 'ldap://mail.company.com', root DN is ''
[myapp] 2012-05-16 11:38:44,365 DEBUG org.springframework.ldap.core.support.AbstractContextSource - AuthenticationSource not set - using default implementation
[myapp] 2012-05-16 11:38:44,365 INFO  org.springframework.ldap.core.support.AbstractContextSource - Property 'userDn' not set - anonymous context will be used for read-write operations
[myapp] 2012-05-16 11:38:44,365 DEBUG org.springframework.ldap.core.support.AbstractContextSource - Using LDAP pooling.
[myapp] 2012-05-16 11:38:44,365 DEBUG org.springframework.ldap.core.support.AbstractContextSource - Trying provider Urls: ldap://mail.company.com
[myapp] 2012-05-16 11:38:44,369 INFO  org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator - groupSearchBase is empty. Searches will be performed from the context source base
[myapp] 2012-05-16 11:39:33,956 DEBUG org.springframework.security.authentication.ProviderManager - Authentication attempt using org.springframework.security.ldap.authentication.LdapAuthenticationProvider
[myapp] 2012-05-16 11:39:33,957 DEBUG org.springframework.security.ldap.authentication.LdapAuthenticationProvider - Processing authentication request for user: JohnDoe
[myapp] 2012-05-16 11:39:33,960 DEBUG org.springframework.security.ldap.search.FilterBasedLdapUserSearch - Searching for user 'JohnDoe', with user search [ searchFilter: '(uid={0})', searchBase: 'dc=company,dc=com', scope: subtree, searchTimeLimit: 0, derefLinkFlag: false ]
[myapp] 2012-05-16 11:39:34,812 DEBUG org.springframework.ldap.core.support.AbstractContextSource - Got Ldap context on server 'ldap://mail.company.com'
[myapp] 2012-05-16 11:39:35,025 DEBUG org.springframework.security.ldap.SpringSecurityLdapTemplate - Searching for entry under DN '', base = 'dc=company,dc=com', filter = '(uid={0})'
[myapp] 2012-05-16 11:39:35,060 DEBUG org.springframework.security.ldap.SpringSecurityLdapTemplate - Found DN: cn=JohnDoe,cn=users,dc=company,dc=com
[myapp] 2012-05-16 11:39:35,082 DEBUG org.springframework.security.ldap.authentication.BindAuthenticator - Attempting to bind as cn=JohnDoe,cn=users,dc=company,dc=com 
```

在第二种情况下：

```
[myapp] 2012-05-16 11:34:13,563 INFO  org.springframework.security.ldap.DefaultSpringSecurityContextSource -  URL 'ldap://mail.company.com', root DN is ''
[myapp] 2012-05-16 11:34:28,363 INFO  org.springframework.security.ldap.DefaultSpringSecurityContextSource -  URL 'ldap://mail.company.com', root DN is ''
[myapp] 2012-05-16 11:34:37,194 DEBUG org.springframework.security.authentication.ProviderManager - Authentication attempt using myapp.security.AppAuthenticationProvider
[myapp] 2012-05-16 11:34:37,197 DEBUG org.springframework.security.ldap.authentication.LdapAuthenticationProvider - Processing authentication request for user: JohnDoe
[myapp] 2012-05-16 11:34:37,197 DEBUG org.springframework.security.ldap.search.FilterBasedLdapUserSearch - Searching for user 'JohnDoe', with user search [ searchFilter: '(uid={0})', searchBase: 'dc=company,dc=com', scope: subtree, searchTimeLimit: 0, derefLinkFlag: false ] 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-16T12:24:32.080

您没有完全初始化`DefaultSpringSecurityContextSource`（因为您使用“new”手动创建它）。

在创建下面添加这个，你应该已经准备好了：

```
contextSource.afterPropertiesSet(); 
```

在这种特殊情况下，这一行是关键：

```
[myapp] 2012-05-16 11:38:44,365 INFO  org.springframework.ldap.core.support.AbstractContextSource - Property 'userDn' not set - anonymous context will be used for read-write operations 
```

当您尝试使用手动创建（但未正确初始化）的上下文源时，它会按照默认行为进行，即使用非匿名访问进行只读操作。由于您没有指定任何管理员 dn 或密码，因此它会因 NPE 而失败。

正确初始化实例（通过调用`afterPropertiesSet()`）会将其设置为使用匿名访问进行只读，因为没有指定用户/密码。

# c# - 滚动查看器内的网格，其中包含多个用户控件

> ID：10616213
> 
> 赞同：0
> 
> 时间：2012-05-16T09:59:27.360
> 
> 标签：c#, wpf, xaml

我是 WPF 和 xaml 的新手，我的应用程序 UI 有问题。
我正在使用这个 xaml 代码：

```
<ScrollViewer HorizontalAlignment="Left" Margin="252,12,0,0" Name="captchaControlsScrollableContainer" VerticalAlignment="Top">
    <Grid Name="captchaControls" Width="339" Height="286">
    </Grid>
</ScrollViewer> 
```

而这个填充网格的代码背后的代码：

```
captchaControls.Children.Add(new Captcha(data)); 
```

这被多次调用
我的问题是只有第一个用户控件应用程序出现在网格中，尽管在调试器 captchaControls.Children.Count 是正确的大小并且滚动查看器的滚动条被禁用。

有谁知道我做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:09:32.157

您在滚动查看器中的 Grid 设置为 1 列和 1 行。因此您只会看到到目前为止添加的最后一个（所有其他控件都“低于”最后一个）。

看看[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)控件，也许[本教程](http://wpftutorial.net/Layout.html)会很有用。

# sharepoint - 如何将自定义任务列表与工作流相关联？

> ID：10616218
> 
> 赞同：1
> 
> 时间：2012-05-16T09:59:54.333
> 
> 标签：sharepoint, sharepoint-2010, workflow, content-type, sharepoint-workflow

首先，我根据 Visual Studio 中的任务列表创建了一个自定义列表定义。此功能还创建该列表的一个实例，标题为“我的工作流程任务”。其次，我开发了一个自定义工作流，同样使用 Visual Studio。当我想添加我的新工作流时，我无法将我的工作流任务列表设置为用于工作流任务。它未列在可用列表的下拉列表中。

这是为什么？谁能解释一下需要做什么才能使其可用？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:30:49.127

这是 AddWrkfl.aspx 中填充下拉列表的代码：

```
 <select id="TaskList" name="TaskList" style="<SharePoint:EncodedLiteral runat='server' text='<%$Resources:wss,AddWrkfl_ListSelectionControlsStyle%>' EncodeMethod='HtmlEncode'/>" size="1" align="absmiddle" onchange="OnChangeSelectTaskList();">
<%
foreach (SPList list in Web.Lists)
{
    if (list.BaseTemplate == SPListTemplateType.Tasks)
    {
%>
    <option value=<%SPHttpUtility.AddQuote(SPHttpUtility.HtmlEncode(list.ID.ToString()),Response.Output);%>>
    <% SPHttpUtility.HtmlEncode(list.Title,Response.Output); %>
    </option>
<%
    }
}
%>
    <option id="OptCreateNewTaskList" value="" />
    </select> 
```

基于此，自定义列表定义的[ListTemplate](http://msdn.microsoft.com/en-us/library/ms462947.aspx)元素需要具有 107 的 Type 属性值才能显示在下拉列表中。

或者，您可以尝试在功能接收器中以编程方式将您的工作流程与您的列表相关联：

```
SPWorkflowTemplate template = web.WorkflowTemplates.GetTemplateByName(
    "My Workflow", 
    System.Globalization.CultureInfo.CurrentCulture);
SPWorkflowAssociation association = SPWorkflowAssociation.CreateListAssociation(
    template,
    "My Instance",
    web.Lists["My Workflow Tasks"],
    web.Lists["Workflow History"]);
list.WorkflowAssociations.Add(association); 
```

# php - PHP Curl 不从 url 返回值

> ID：10616224
> 
> 赞同：0
> 
> 时间：2012-05-16T10:00:19.697
> 
> 标签：php, curl

我正在使用上面的函数来检索两个 url，第二个在我检索 google 或其他网站时起作用，但下面的东西没有得到任何响应。但是当我在浏览器中输入网址时，我看到了响应..你能指导我解决这个问题吗？

```
function file_get_contents_curl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);       
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$response=file_get_contents_curl('http://XX.XX.XX.XX:YYYYY/Request?Mob=999999999&Message=Rr+vodafone+999999999+10+1234&myTxId=10');
echo "<br/>respnse  is...".$response;

$response=file_get_contents_curl('http://www.google.com');
echo "<br/>website respond is...".$response; 
```

编辑：问题是我尝试访问的端口号 8090 在我的服务器中未启用。当我启用它以进行传出时，它正在工作...感谢每个人的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:05:02.220

你能试一下吗：

```
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:05:15.247

尝试在 curl 关闭之前找到错误给出此代码：-

```
echo "Curl Error :--" . curl_error($ch); 
```

如果没有发现错误，请这样做：-

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch); 
```

然后

```
print_r($result);
exit; 
```

# asp.net-mvc - 父子控制器

> ID：10616230
> 
> 赞同：0
> 
> 时间：2012-05-16T10:00:50.450
> 
> 标签：asp.net-mvc, inheritance, parent-child

我有两个父子数据表，分别是 A 和 B，父子数据表。我为 A 和 B 创建了两个独立的控制器。我必须做什么来支持控制器级别的父子关系？将控制器 A 定义为控制器 B 的父级是否正确？

```
public class A :Controller 
{
public ActionResult foo(){}
}

public class B :Controller
{
//need to use foo()!
} 
```

我可以拥有它吗：

```
public class B:A{} 
```

我认为，MVC强调关注点分离，每个Controller必须独立自主地工作。我是真的吗？我必须做什么？

# actionscript-3 - 为什么在收到此警报后我的 Flash 构建器在开发过程中一次又一次地关闭/关闭？

> ID：10616231
> 
> 赞同：0
> 
> 时间：2012-05-16T10:00:51.257
> 
> 标签：actionscript-3, flash, flash-builder

Flash Builder 会在显示此警报后重新启动。

```
Unhandled event loop exception 
unable to create new native thread 
```

请注意，我使用的是 Flash Builder 4.6

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:05:32.707

您是否有一个包含大量文件和库的大项目？

根据我的经验，这是由 Java 内存不足引起的。

**选项 A：**解决方案是为 Flash Builder 增加内存。

Adobe 说：[提高大型项目的编译器性能](http://blogs.adobe.com/jasonsj/2010/02/improving_compiler_performance.html)

使用 Xms 和 Xmx 编辑 FlashBuilder.ini 行

```
-vmargs
-Xms512m
-Xmx1024m
-XX:MaxPermSize=256m
-XX:PermSize=64m 
```

*我的计算机具有 8 GB RAM，最多允许增加 1g，而不是更多。我们的项目如此之大，以至于我们被迫使用外部编译器迁移到 IntelliJ IDEA*

链接：[此处讨论 Java VM 的最大值](https://stackoverflow.com/questions/461260/is-there-a-maximum-number-you-can-set-xmx-to-when-trying-to-increase-jvm-memory)

**选项 B：**创建新的 Flash Builder/eclipse 工作区并重新创建您的项目。（或`.metadata`从您的工作区中删除文件夹）。

也许有一些本地更改损坏了 Flash Builder 中的某些内容。

*你能在另一台电脑上重现同样的错误吗？*

**选项 C：**离开 Flash Builder 并迁移到其他软件。我建议使用外部编译器的 IntelliJ IDEA，这样编译过程可以使用更多内存（Flash Builder 与编译器共享其内存）。

# codeigniter - CKFinder 实际上没有上传图像

> ID：10616233
> 
> 赞同：0
> 
> 时间：2012-05-16T10:00:54.847
> 
> 标签：codeigniter, ckeditor, codeigniter-2, image-uploading, ckfinder

我正在使用 CKEditor + CKFinder 在自定义 CMS 中创建带有图像的博客文章。问题是 CKFinder 实际上并没有将图像上传到我在配置文件中声明的目录。路径是正确的，但实际上并没有进行上传。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:21:44.750

似乎您在尝试安装/配置您在这篇文章和其他文章中提到的一些文件管理器时遇到了困难。

我可以建议一个非常容易安装的文件管理器：

[an-open-file-manager-for-ckeditor-3-0](http://labs.corefive.com/2009/10/30/an-open-file-manager-for-ckeditor-3-0/)

它甚至可以让您处理自己的安全/身份验证

**初始化很简单：**

```
CKEDITOR.replace('wysiwyg', {
               filebrowserBrowseUrl: 'ckeditor/Filemanager/index.html'
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:34:45.247

您是否遵循[本指南](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/PHP/Configuration/Quick_Start)？您必须设置 $baseUrl 和 $baseDir，并设置 CheckAuthentication。

# java - 如何使用 openCV 或 OCR tesseract 从图像中提取文本？

> ID：10616234
> 
> 赞同：3
> 
> 时间：2012-05-16T10:00:57.340
> 
> 标签：java, android, opencv, image-processing, ocr

> **可能重复：**
> [android OCR？](https://stackoverflow.com/questions/1106202/android-ocr)

我目前正在做一个基于 android 手机中的图像捕获的文本识别项目。我想问如何从图像中提取文本？

是否有任何用于提取的 openCV 或 OCR tesseract 教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:10:51.380

最快的方法（也许不是理想的）是执行以下步骤：

*   使用OpenCV**[检测纸张](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection/8863060#8863060)或[文本区域](https://stackoverflow.com/a/10232763/176769)**；
*   执行任何必要的处理以**[歪斜](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)图像**（如有必要）；
*   **将图像以 TIFF 格式保存到磁盘**；
*   最后，**调用 Tesseract 命令行应用程序**，将 TIFF 图像作为参数传递以启动文本识别过程。

# javascript - Javascript 在 Firefox 中不起作用：未定义的变量？

> ID：10616242
> 
> 赞同：2
> 
> 时间：2012-05-16T10:01:24.743
> 
> 标签：javascript, firefox

```
var timer = setInterval(function () {
    var secs = ytplayer.getCurrentTime();
    var minutes = Math.floor(secs / 60);
    var seconds = Math.floor(secs % 60);
    var tsecs = ytplayer.getDuration();
    var tminutes = Math.floor(tsecs / 60);
    var tseconds = Math.floor(tsecs % 60);
    var time = minutes + ":" + seconds + " / " + tminutes + ":" + tseconds;
    document.getElementById('currenttime').innerHTML = time;
}, 1000); 
```

此代码在 Firefox 中不起作用，但在 chrome 和 IE 中起作用。

我检查了萤火虫，它说变量secs，minutes，seconds，tsecs，tminutes，tseconds和time没有定义。

我不知道如何解决这个问题，因为我确实使用 var 来定义它们。有谁知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:03:42.877

听起来您有一个带有 id 的元素，`ytplayer`并假设`window.ytplayer`它将自动创建。

不要做这样的假设。使用`document.getElementById`（并确保您有一个触发标准模式的 Doctype）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:05:26.713

试试这个

```
var timer = setInterval(function(){
    var secs = ytplayer.getCurrentTime(),
    minutes = Math.floor(secs / 60),
    seconds = Math.floor(secs % 60),
    tsecs = ytplayer.getDuration(),
    tminutes = Math.floor(tsecs / 60),
    tseconds = Math.floor(tsecs % 60),
    time = minutes + ":" + seconds + " / " + tminutes + ":" + tseconds;
    document.getElementById('currenttime').innerHTML = time;
},1000); 
```

并确保 ytplayer 已经存在。

# protocol-buffers - 您是否仅在数据报模式下使用谷歌协议缓冲区？

> ID：10616245
> 
> 赞同：0
> 
> 时间：2012-05-16T10:01:44.703
> 
> 标签：protocol-buffers

如果我有一个只有重复字符串的定义，我可以通过 get_packed_size 调用找到打包缓冲区的长度。但是，如果我在交换的接收方，我怎么知道要读取多少字节才能形成一条完整的消息？（由于条目的数量可变，因此不知道先验。）

发件人：

```
length = <name>_get_packed_size(&message)
buffer = malloc(length)
<name>_pack(&message, buffer)
write(fd, buffer, length) 
```

接收者：

```
read(fd, buffer, ???)       // what is '???' if 'fd' is a stream socket? 
```

如果我处于数据报模式，我可以读取 64K 字节之类的内容，然后获取整个消息。但是，如果我处于流模式，如何在不简短更改消息或阅读下一条消息的一部分的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:58:11.413

有关此常见问题的典型解决方案，请参阅此答案：[https ://stackoverflow.com/a/5586945/618259](https://stackoverflow.com/a/5586945/618259)

# tomcat - tomcat +oci +oracle11

> ID：10616249
> 
> 赞同：1
> 
> 时间：2012-05-16T10:01:52.633
> 
> 标签：tomcat, jdbc, oracle-call-interface

规格 Jdk1.6 Tomcat 6 Oracle 11g ojebc6.jar

高级用户总是说 Oracle 在 type(2) OCI 而不是 type(4) Thin 驱动程序上表现最好。

有人可以向我解释在 Tomcat 上创建 JNDI 的步骤（使用 OCI + tnsnames.ora）

我做了一些配置并得到错误....

> ```
> java.lang.UnsatisfiedLinkError: oracle.jdbc.driver.T2CConnection.getLibraryVersionNumber()I 
> ```

有人可以解释一下为什么会这样吗？？？

关于 karthik

# android - Android - Spinner：多行文本

> ID：10616261
> 
> 赞同：1
> 
> 时间：2012-05-16T10:03:00.850
> 
> 标签：android, text, spinner, checkedtextview, truncated

我已经完成了关于 Spinner 的教程（[[http://developer.android.com/resources/tutorials/views/hello-spinner.html]）。](http://developer.android.com/resources/tutorials/views/hello-spinner.html)但是，如果文本比行星名称长得多，则在单击微调器后，显示的文本会被截断，不会完整显示。

**有谁碰巧知道如何使较长的文本分几行显示？**

单击微调器后，文本将显示在名为 CheckedTextViews 的对象表中。也许应该修改其中的一些偏好——这只是一个快速的想法。

很高兴得到任何支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:34:36.287

这也很有效。

```
<LinearLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="350dp"
 android:layout_height="wrap_content">

<TextView 
 android:id="@android:id/text1"
 style="?android:attr/spinnerDropDownItemStyle"
 android:layout_width="match_parent"
 android:layout_height="50dp"
 android:ellipsize="marquee"
 android:gravity="center_vertical"
 android:singleLine="false" />
</LinearLayout> 
```

# php - 使用 Active Directory / LDAP / NTLM 的自动用户登录 (SSO) 基础架构

> ID：10616262
> 
> 赞同：0
> 
> 时间：2012-05-16T10:03:04.160
> 
> 标签：php, ldap, single-sign-on, ntlm, ezpublish

我必须为托管在 debian 服务器上的 eZ Publish 网站设置自动登录系统。音高是：

“客户端已登录其 Windows 会话（用户在 Windows Active Directory（即 LDAP）上注册）；当他到达 Intranet eZ 发布网站时，浏览器会检测到他（使用 NTLM...？）和用户自动登录”

显然，eZ Publish 内置了 LDAP 支持，因此这部分问题没有问题。主要问题是如何从 Windows 会话中检索当前用户登录？我已经阅读了有关 NTLM 的不同内容，但没有任何明确的内容......而且似乎我必须安装 php5-ldap 和 ntlm-mod ......？:(我知道这有点棘手，但我们将不胜感激提示！:D

提前致谢;

查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:54:38.293

[https://github.com/Legrandin/PyAuthenNTLM2](https://github.com/Legrandin/PyAuthenNTLM2)

这个 apache 模块将 windows 用户名放入 php 变量 $_SERVER['REMOTE_USER']。

# c - tcp 服务器不从 accept() 返回

> ID：10616268
> 
> 赞同：0
> 
> 时间：2012-05-16T10:03:24.347
> 
> 标签：c, sockets

我正在尝试使用 TCP 服务器/客户端程序，想知道为什么在服务器端，accept() 处的程序循环 ....

我的想法是开发一个 TCP 服务器，它一次接收来自多个客户端的 1 个请求。服务器和客户端之间的连接将在完成单个操作后关闭。例如 1) TCP 服务器应始终监听端口 30000。2）TCP客户端1连接TCP服务器，发送“hello”，等待服务器的“hello”反馈，关闭连接。3）TCP客户端2连接TCP服务器，发送“hello”，等待服务器的“hello”反馈，关闭连接。依此类推，直到 TCP 客户端 n....

上述所有操作都是一次执行的，这意味着 TCP 客户端 1 和 2 不会同时向 TCP 服务器发送消息，并且一旦 TCP 客户端 1 完成操作，它将不再连接到服务器（如果需要，可以触发新连接）。

输出显示

```
======== NW Test =======
1) Start (T)CP Server
2) Start T(C)P  Client
3) (S)end TCP Message
4) Close TCP S(O)cket
0) (Q)uit
================================
Option: t
Starting TCP server...
create socket success.
bind socket success.
listen socket success. 
```

我也期待...

```
accept socket success.
pthread_create success.
TCP server started, listening socket [tcpsocket] 
```

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <pthread.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <netinet/in.h>

struct attr {
  int tcpsocket;
};

static int nwMenu();
static void *event_start(void* param);

int tcpserver(){
    int thread_id;
    int tcpSocket;
    int listenSocket;
int nRet;
    socklen_t nLen;        
struct attr atr;
    struct sockaddr_in saTCPServer, saTCPClient;

fprintf(stderr, "Starting TCP server...\n");

    listenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (listenSocket < 0)
    {
  fprintf(stderr, "fail to create socket.\n");
      return -1;
    } else {
  fprintf(stderr, "create socket success.\n");
}

    saTCPServer.sin_family = AF_INET;
    saTCPServer.sin_addr.s_addr = INADDR_ANY;
    saTCPServer.sin_port = 30000;

    nRet = bind(listenSocket, (struct sockaddr *) &saTCPServer, sizeof(struct sockaddr));
    if (nRet < 0)
    {
  fprintf(stderr, "fail to bind socket.\n");
      close (listenSocket);
      return -1;
    } else {
  fprintf(stderr, "bind socket success.\n");
}

    if (listen(listenSocket, 5) < 0) {
   fprintf(stderr, "fail to listen socket.\n"); 
       close (listenSocket);
       return -1;
    } else {
  fprintf(stderr, "listen socket success.\n");
}

    nLen = sizeof(saTCPClient);

    tcpSocket = accept(listenSocket, (struct sockaddr *) &saTCPClient,  &nLen);
    if (tcpSocket < 0)
    {      
  fprintf(stderr, "fail to accept socket.\n");
      close (listenSocket);
      return -1;      
    }  else {
  fprintf(stderr, "accept socket success.\n");
}
atr.tcpsocket = tcpSocket;

    close (listenSocket); 

    if(pthread_create(&thread_id, NULL, (void*) event_start, (void*) &atr) != 0){
    fprintf(stderr, "pthread_create failed.\n");
} else {
  fprintf(stderr, "pthread_create success.\n");
};

fprintf(stderr, "TCP server started, listening socket %d\n", tcpSocket);

return 0;

}

static void *event_start(void* param) {

    int quit = 0;
    int nRet = 0;
int tcpSocket;
    char szBuf[4096];

struct attr *p_atr = (struct attr* )param;
tcpSocket = p_atr->tcpsocket;

    while (!quit){

        nRet = recv(tcpSocket, szBuf, sizeof(szBuf), 0);
        if (nRet <= 0 ) // peer closed
         {
            fprintf(stderr, "receiver quit recv\n");
        quit = 1;
        break;
          }

        fprintf(stderr, "recv: %s\n", szBuf);

        send(tcpSocket, szBuf, sizeof(szBuf), 0);
    }

     close(tcpSocket);
}

int tcpclient(){
    int tcpSocket;
    struct sockaddr_in saTCPServer;

    bzero((void *) &saTCPServer, sizeof(saTCPServer));

    char* szServer = "127.0.0.1";
    int nPort = 30000;

    inet_aton(szServer, &saTCPServer.sin_addr);

    tcpSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
    if (tcpSocket < 0){
        return -1;
    } else {
        fprintf(stderr, "client tcp socket: %d\n", tcpSocket);
    }

    saTCPServer.sin_family = AF_INET;
    saTCPServer.sin_port = htons(nPort);

    if (connect(tcpSocket, (struct sockaddr *) &saTCPServer, sizeof(saTCPServer)) < 0 )     {
        return -1;
    }

    fprintf(stderr, "TCP client started, listening socket %d\n", tcpSocket);

    return 0;
}

int send_tcp_msg(int tcpSocket){
    int nRet;
    char szBuf[4096];

    memset(szBuf, 0x00, sizeof(szBuf));

    send(tcpSocket, "hello", sizeof("hello"), 0);

    nRet = recv(tcpSocket, szBuf, sizeof(szBuf), 0);

    fprintf(stderr, "recv: %s\n", szBuf);

return 0;
}

int close_tcp(int tcpSocket){
    close(tcpSocket);

return 0;
}    

static int nwMenu(){
    int ret = 0;
    int socket;
    char buff[1024];

    do{
    fprintf(stderr, "======== NW Test =======\n");
    fprintf(stderr, "1) Start (T)CP Server\n");
    fprintf(stderr, "2) Start T(C)P  Client\n");
    fprintf(stderr, "3) (S)end TCP Message\n");
    fprintf(stderr, "4) Close TCP S(O)cket\n");     
    fprintf(stderr, "0) (Q)uit\n"); 
    fprintf(stderr, "================================\n");
    fprintf(stderr, "Option: ");
    memset(buff, 0x00, sizeof(buff));
    gets(buff);

    if (buff[0] == 't' || buff[0] == 'T'){          
        ret = tcpserver();          
    } else if (buff[0] == 'c' || buff[0] == 'C'){
        ret = tcpclient();
    } else if (buff[0] == 'o' || buff[0] == 'O'){
        fprintf(stderr, "Enter socket fd:\n");
        gets(buff);         
        ret = close_tcp(atoi(buff));
    } else if (buff[0] == 's' || buff[0] == 'S'){
        fprintf(stderr, "Enter socket fd:\n");
        gets(buff);         
        ret = send_tcp_msg(atoi(buff));
    } 

    }while(buff[0] != 'q' && buff[0] != 'Q');

    return 0;
}

int main(int argc, const char* argv[]){

    nwMenu();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:07:37.730

您的服务器会：

```
 saTCPServer.sin_port = 30000; 
```

那应该是

```
 saTCPServer.sin_port = htons(30000); 
```

端口必须按网络顺序指定，如果您使用的是小端机器，则 30000 不会转换为端口 30000，而是转换为端口 12405。因此您的服务器正在侦听的端口与客户端连接的端口不同.

# android - 如何在 webview 中加载 base64 字符串？

> ID：10616269
> 
> 赞同：1
> 
> 时间：2012-05-16T10:03:26.813
> 
> 标签：android, pdf

我正在尝试使用“iText”库读取 pdf 文件，并且正在使用“ **getPageContent(int number)** ” 获取页面

此方法返回 byte[] ，当 byte[] 加载到 WebView 时，它显示一个空视图。

```
try {
            PdfReader reader = new PdfReader(getAssets().open("policy.pdf"));
            int n = reader.getNumberOfPages();
            String base64 = android.util.Base64.encodeToString(
                    reader.getPageContent(1), android.util.Base64.DEFAULT);
            WebView webView = new WebView(this);

            webView.loadData(base64, "text/html", "base64");

            setContentView(webView);

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:11:29.287

您希望页面中的文本显示在 Web 视图上。据我在 iText API 中看到的，您使用的整个方法是不正确的。

这是更正的代码（未经测试，因为我没有库许可证）

```
try {
    PdfReader reader = new PdfReader(getAssets().open("policy.pdf"));
    int n = reader.getNumberOfPages();

    PRTokeniser tokenizer = new PRTokeniser(reader.getPageContent(1));
    String content="";
    while (tokenizer.nextToken()) {
        if (tokenizer.getTokenType() == PRTokeniser.TokenType.STRING) {
            content = content +"\r\n<br />" + tokenizer.getStringValue();
        }
    }

    WebView webView = new WebView(this);

    webView.loadData(content, "text/html", "UTF-8");

    setContentView(webView);

} catch (Exception e) {
    e.printStackTrace();
} 
```

# zend-framework - Zend Layout 中的 url 链接在服务器上由 ~username 自动附加

> ID：10616272
> 
> 赞同：0
> 
> 时间：2012-05-16T10:03:38.947
> 
> 标签：zend-framework, url

我正在为我的项目使用 ZF，我的服务器目录结构是：

```
/ROOT
  __/APPLICATION
  __/Zend library
  __/public_html(I put all the contents of public folder created by ZF here)
  __/docs
  __library 
```

我有一个放在 public_html 文件夹中的 .htaccess 文件。有两个问题我需要帮助。首先，例如，我使用 $this->url(array('controller'=>'home', 'action'=>'index'),null,true) 创建的 url 链接会生成`<a href='/~wethemen/home'>...</a>`，其中'wethemen' 是我在托管服务器帐户上的用户名。我在页面源代码中检查了这一点。这就是为什么它也没有渲染请求的控制器和动作的原因。

其次，只有布局被渲染，没有动作。我的默认控制器是“home”，所以当我尝试访问该站点时出现此错误。脚本：''home'/index.phtml' 在路径 (/home1/wethemen/application/views/scripts/) 中找不到。

这是我第一次在服务器上部署 ZF 项目。任何帮助将不胜感激。如果需要，我会倒出 index.php 和 bootstrap.php 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:52:41.217

就放

```
$controller = Zend_Controller_Front::getInstance();
$controller->setBaseUrl('/your/base/url'); 
```

在调用 dispatch() 之前，您可以在其中找到文本“->setRouter”或引导程序中的任何位置。

编辑：如果这不起作用并且您认为这是 HTTP 服务器重写问题，请添加

```
RewriteEngine on
RewriteBase / 
```

如果您的应用程序通过[http://yourdomain.com/](http://yourdomain.com/)访问， 或者

```
RewriteEngine on
RewriteBase /your/base/url/ 
```

如果应用程序作为[http://yourdomain.com/your/base/url/访问](http://yourdomain.com/your/base/url/)

# c# - 删除“--”和“\cr”之间的文本

> ID：10616282
> 
> 赞同：1
> 
> 时间：2012-05-16T10:03:54.863
> 
> 标签：c#, .net, wpf, newline, streamreader

我想删除“--”和“\cr”之间的文本。

我实际上是在读取一个文件，如果文件中有一个“--”，它应该删除“--”以及“\cr”之前的所有内容。

我正在逐行读取文件。

```
using (StreamReader readFile = new StreamReader(filePath))
{
    string line;

    while ((line = readFile.ReadLine()) != null)
    {
    }
} 
```

我尝试使用子字符串来查找字符

```
line.Substring(line.IndexOf("--"),line.IndexOf("\cr")); 
```

但我在寻找每行的分隔符时遇到问题

我正在考虑写这样的东西

```
while ((line = readFile.ReadLine()) != null)
{
    if (line.Substring(line.IndexOf("--")) // If it has "--"
    {
      //Then remove all text from between the 2 delimiters

    }
} 
```

请帮忙

谢谢

**编辑：**

问题解决了，虽然我遇到了另一个问题，但`/* */`由于评论出现在多行上，我无法删除它们之间的评论。所以我需要删除`/* */`.

有什么建议或帮助吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:07:07.663

一个简单的解决方案是只在线上使用正则表达式替换：

```
line = Regex.Replace(line, @"--.*$", ""); 
```

这假定您的意思`\cr`是实际的行尾（如果您使用 阅读它，无论如何都不包括在内`ReadLine()`），因此这会删除从`--`行尾到行尾的所有内容。

要替换`/* ... */`注释，您也可以使用：

```
line = Regex.Replace(line, @"--.*$|/\*.*?\*/", ""); 
```

快速 PowerShell 测试：

```
PS> $a = 'foo bar','foo bar -- some comment','foo /* another comment */ bar'
PS> $a -replace '--.*$|/\*.*?\*/'
foo bar
foo bar
foo  bar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T10:08:50.980

试试这个

```
line.Substring(line.IndexOf("--")); 
```

正如乔伊所说，ReadLine() 永远不会包含 Environment.NewLine 和 \cr 对应于 Environment.NewLine

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:48:58.370

只是为了展示如何从文件中的每一行中删除注释。这是一种方式：

```
var newLines = from l in File.ReadAllLines(path)
               let indexComment =  l.IndexOf("--")
               select indexComment == -1 ? l : l.Substring(0, indexComment);
File.WriteAllLines(path, newLines);      // rewrite all changes to the file 
```

**编辑**：如果您还想删除所有之间`/*`，`*/`这是一个可能的实现：

```
String[] oldLines = File.ReadAllLines(path);
List<String> newLines = new List<String>(oldLines.Length);
foreach (String unmodifiedLine in oldLines)
{
    String line = unmodifiedLine;
    int indexCommentStart = line.IndexOf("/*");
    int indexComment = line.IndexOf("--");

    while (indexCommentStart != -1 && (indexComment == -1 || indexComment > indexCommentStart))
    {
        int indexCommentEnd = line.IndexOf("*/", indexCommentStart);
        if (indexCommentEnd == -1)
            indexCommentEnd = line.Length - 1;
        else
            indexCommentEnd += "*/".Length;
        line = line.Remove(indexCommentStart, indexCommentEnd - indexCommentStart);
        indexCommentStart = line.IndexOf("/*");
    }

    indexComment = line.IndexOf("--");
    if (indexComment == -1)
        newLines.Add(line);
    else
        newLines.Add(line.Substring(0, indexComment));
}

File.WriteAllLines(path, newLines); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:18:41.127

看起来您想忽略包含注释的行。怎么样

```
if (!line.StartsWith("--")) { /* do stuff if it's not a comment */ } 
```

甚至

```
if (!line.TrimStart(' ', '\t').StartsWith("--")) { /* do stuff if it's not a comment */ } 
```

忽略行首的空格。

# android - 如何在 android 中使用 SAX Parser 进行嵌套解析

> ID：10616283
> 
> 赞同：0
> 
> 时间：2012-05-16T10:03:57.390
> 
> 标签：android, saxparser

我有一个这样的 xml：

```
<channel>
    <item>
      <link>http://uopnews.unipune.ac.in/Lists/Calendar/DispForm.aspx?ID=14</link>
      <description><![CDATA[<div><b>Location:</b> PUMBA Auditorium - University of  Pune</div> <div><b>Start Time:</b> 5/15/2012 11:00 AM</div>
<div><b>End Time:</b> 5/15/2012 2:00 PM</div>
<div><b>Description:</b> <div>General B. C. Joshi Memorial Lecture 2012- Perspective on War in the 21st Century - By Lt. Gen. A. K. Singh</div></div>
<div><b>Attachments:</b> <a href="http://uopnews.unipune.ac.in/Lists/Calendar/Attachments/14/bcjoshi2012[1].pdf">http://uopnews.unipune.ac.in/Lists/Calendar/Attachments/14/bcjoshi2012[1].pdf</a><br><a href=""></a></div>
]]></description>  
    </item>
</channel> 
```

我可以使用 SAX Parser 解析描述标签，这是我的 SAXhandler 类。

```
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.R.string;
import android.util.Log;

public class XMLParsingHandler extends DefaultHandler {
    private static final String NEW_DATA_SET = "image";
    private String currentValue = "";
    private String currentTag = "";
    private HashMap<String, Object> root;
    private HashMap<String, String> child;
    private String[] tagArray = null;
    private ArrayList<HashMap<String, String>> arraylist  = new ArrayList<HashMap<String, String>>();
    private String describe; 

    public XMLParsingHandler(String[] tagArray) {
        this.tagArray = tagArray;
    }

    public void parseContent(String urlStr) {
        try {
            URL url = new URL(urlStr);
            SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();
            SAXParser saxParser = saxParserFactory.newSAXParser();
            XMLReader xmlReader = saxParser.getXMLReader();
            xmlReader.setContentHandler(this);
            xmlReader.parse(new InputSource(url.openStream()));
            Log.d("PRASER", "Afer parsering done" + arraylist);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void startDocument() throws SAXException {
        super.startDocument();
        root = new HashMap<String, Object>();
        System.out.println("root=" + root);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, qName, attributes);
        Log.d("tag", "StartElement started here");
        currentTag = localName;
        Log.d("start", "in start doc current atg---------: " + currentTag);
        if (localName.equals(NEW_DATA_SET)) {
            child = new HashMap<String, String>();
            currentValue = new String();
        }

            describe=new String();

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        super.characters(ch, start, length);

        currentValue = new String(ch, start, length);
        Log.d("other", "in CHARACTER : CurrentValue=---------" + currentValue
                + " currentTag-------" + currentTag);
        if(currentTag.equals("description") ) {
            String str=     new String(ch, start, length);
            //describe=new String();
            describe=describe+""+currentValue;
            Log.d("describe", "in CHARACTER : describe=---------" + describe);

        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        super.endElement(uri, localName, qName);
        Log.d("end", "currentTag:"+currentTag+"------currentValue"+currentValue);
        if(child!=null)
        {
        for (int i = 0; i < tagArray.length; i++) {
            if (currentTag.equals("description")){
                child.put(currentTag, currentValue);
            }
            if (currentTag.equals(tagArray[i]))
            {
                child.put(currentTag, currentValue);
                Log.d("tagarray","currentTag="+ currentTag+"currentValue:"+currentValue);

                currentValue=null;
                currentValue=new String();
                currentTag=null;
                currentTag=new String();
            }

        }

        if (localName.equals(tagArray[tagArray.length - 1])) {
            arraylist.add(child);
            child=null;
            child=new HashMap<String, String>();
        }

        }
    }

    @Override
    public void endDocument() throws SAXException {
        super.endDocument();
        Log.d("tag", "in end doc");

    }

    public ArrayList<HashMap<String, String>> getArraylist() {
        return arraylist;
    }

    public void setArraylist(ArrayList<HashMap<String, String>> arraylist) {
        this.arraylist = arraylist;
    }
    @Override
    public String toString() {
        return arraylist.toString();
    }

} 
```

我这样称呼它：

```
userMap = new HashMap<String, String>();

        XMLParsingHandler x = new XMLParsingHandler(tagArray);
        x.parseContent(url);
        System.out.println("Element FOund");
        userMap = x.getArraylist().get(0);
        System.out.println("Map " + userMap); 
```

在这里，我的 userMap 仅在仅显示空值后才将值打印到描述标签。我需要描述中的所有数据。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:24:13.183

找到下面的 sax 解析器代码

```
public class IndianNewsHandler implements ContentHandler {
private String value = "";
private Item item = null;
private TextView tvRef = null;
private Activity myActivity = null;

private static IndianNewsHandler mIndianNewsHandler;

public static IndianNewsHandler getInstance() {
    if (mIndianNewsHandler == null) {
        mIndianNewsHandler = new IndianNewsHandler();
    }
    return mIndianNewsHandler;
}

private IndianNewsHandler() {

}

private ArrayList<Item> content = new ArrayList<Item>();
// private ArrayList<String> myList = new ArrayList<String>();
private boolean STATUS_PARSE = true;
private boolean ITEM_STATUS = false;

public ArrayList<Item> getData() {
    return content;
}

public void startElement(String namespaceURI, String localName,
        String qName, Attributes atts) throws SAXException {

    if (STATUS_PARSE) {
        this.value = localName;

        if (localName.equals("item")) {

            item = new Item();
            ITEM_STATUS = true;
        }

    }
}

public void characters(char[] text, int start, int length)
        throws SAXException {
    if (STATUS_PARSE && ITEM_STATUS) {
        StringBuffer buffer = new StringBuffer();
        buffer.append(text, 0, length);

        if (buffer != null) {

            if (this.value.equals("title")) {
                System.out.println("I am in title"
                        + buffer.toString().trim());
                if (buffer.toString().trim().length() > 1)
                    item.setTitle(buffer.toString().trim());

            } else if (value.equals("description"))

            {

                String url = buffer.toString().trim();

                try {

                    if (url.contains("img src=")) {
                        final String url_string = url.split("img src=")[1]
                                .split(">")[0].replace("'", "");
                        System.out.println("FInal URL :" + url_string);
                        if (url_string != null) {
                            //here i am creating async task for convert image
                            new CovertingImageToByte(url_string).execute();

                            if (buffer.toString().trim().length() > 1) {
                                String des = buffer.toString().split(">")[1];
                                item.setDes(des);
                            }
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

    }
}
class CovertingImageToByte extends AsyncTask<String,Integer, String>{
    String imageUrl;
    public CovertingImageToByte(String urlString) {
        this.imageUrl=urlString;
    }

    @Override
    protected String doInBackground(String... params) {
        try {
            InputStream is = new URL(imageUrl)
                    .openStream();

            Bitmap bitmap = BitmapFactory
                    .decodeStream(is);
            byte[] mybyt = null;
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bitmap.compress(CompressFormat.PNG,
                    0, stream);
            mybyt = stream.toByteArray();

            System.out.println("test"
                    + mybyt.length);

            item.setImg(mybyt);
            // System.out.println("Finallly List123 size   ::::::::::"+content.get(0).getImg().length);

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
                return null;
    }

}

public void endElement(String namespaceURI, String localName, String qName)
        throws SAXException {
    if (STATUS_PARSE) {
        if (localName.equals("item")) {
            content.add(item);
        }

        if (content.size() >= 15) {
            STATUS_PARSE = false;
        }
    }

}

@Override
// do nothing methods
public void setDocumentLocator(Locator locator) {
}

public void startDocument() throws SAXException {
}

public void endDocument() throws SAXException {
    System.out.println("Finallly List size   ::::::::::" + content.get(1));
}

public void startPrefixMapping(String prefix, String uri)
        throws SAXException {
}

public void endPrefixMapping(String prefix) throws SAXException {
}

public void skippedEntity(String name) throws SAXException {
}

public void ignorableWhitespace(char[] text, int start, int length)
        throws SAXException {
}

public void processingInstruction(String target, String data)
        throws SAXException {
} 
```

}

# dll - 我可以在 .def 中使用#ifdef 吗？

> ID：10616284
> 
> 赞同：4
> 
> 时间：2012-05-16T10:04:10.043
> 
> 标签：dll, conditional-compilation, function

我可以将文件中的`#ifdef`部分`.def`用于 dll 吗？例如：

```
LIBRARY "mydll"
EXPORTS
  checkRequirements
  createDevice
  installDriver
  isPastVersionInstalled
  removeDevice
  #ifdef myVar
  doSomethingElse
  #endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:10:20.257

不，不可能，它不是经过预处理的文件。尽管我认为您可以通过运行预处理器来生成另一个 .def 文件并链接该文件。

更有效的方法是完全消除对 .def 文件的需要。在应导出的函数的代码中使用 __declspec(dllexport)。然后该代码中的任何#ifdef 将自动确保一个函数既不被编译也不被导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:17:50.930

我不知道 .def 文件是否可以完全具有此功能，但您当然可以创建一个名为（例如）的文件`mydll.def.in`，然后使用编译器预处理器在构建时生成 .def 文件。

在 Linux 上可以这样完成：

```
cpp -DmyVar=1 mydll.def.in > mydll.def 
```

我想您是在 Windows 上执行此操作的，对此我无能为力，但情况类似。

唯一的问题是，根据您的编译器，您可能需要文件的其余部分包含有效的 C 标记，并且文件中不能有任何可能与宏混淆的符号。Gcc 有一个选项`--traditional-cpp`可以解决这类问题，而你的编译器可能也有同样的问题。

# ios - 在 nsarray 中搜索最接近的值

> ID：10616286
> 
> 赞同：1
> 
> 时间：2012-05-16T10:04:20.833
> 
> 标签：ios, nsarray, nsdictionary

我有一个包含以下值的 plist

1,23,45,67,88,99,34,26,50,28 - 等

我正在访问 plist，如下所示：

```
NSString *path2 = [[NSBundle mainBundle] pathForResource:@"Fractions" ofType:@"plist"];
pickerData2 =[[NSDictionary alloc]initWithContentsOfFile:path2];
selectorKeysFractions = [[NSArray alloc] initWithArray:[pickerData2 allKeys]]; 
```

现在我想在 plist 中搜索接近用户输入值的值

因此，例如，如果用户在文本字段中输入 69，我想从 plist 中找到值 67 并读取该字典项的键值

我怎样才能找到最接近的值？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:13:43.310

假设您的数组未排序，最简单的方法是使用 for 循环搜索数组并跟踪壁橱编号的位置以及差异是什么。像这样的东西。

```
int lowestIndex=0, lowestDiff=INT_MAX;
for(int i=0; i<selectorKeysFractions.count; i++)
{
      int current = [selectorKeysFractions objectAtIndex:i];
      int diff = abs(userInput - current);
      if(diff < lowestDiff)
      {
            lowestDiff = diff;
            lowestIndex = i;
      }
} 
```

您将不得不处理数组中的对象不是整数的事实，因此您也需要将它们从它们的任何内容转换。

此外，这种方法效率不高，如果对数组进行了排序，您可以进行二进制搜索，这将是一种更好的方法。

# ember.js - Ember 数据和 Ember 状态管理器

> ID：10616287
> 
> 赞同：4
> 
> 时间：2012-05-16T10:04:27.063
> 
> 标签：ember.js, ember-data

我有一个使用 ember-data 来持久化数据和 StateManager 来驱动其全局状态的应用程序。由于加载数据是异步的，我想知道如何捕获表示所有数据都已加载的事件。准确地说，我有一个名为“正在加载”的状态，我在其中加载数据：

```
App.store.find(App.Model, ....) 
```

加载模型后，我会进行一些后期处理。这是在名为“后处理”的“加载”子状态中完成的。当每个模型都收到“didLoad”事件时，我会过渡到“后处理”：

```
App.Model = DS.Model.extend {
   didLoad: ->
     stateManager.send('postProcess',this)
} 
```

当每个数据都被加载和后处理时，应用程序应该转换到另一个与“正在加载”处于同一级别的“编辑”状态：

```
 loading -> postprocessing
root /
     \
      editing 
```

我应该抓住什么事件才能实现过渡？ember-data Store 是否对此有回调？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:47:40.900

使用 ember-data 时，find 方法返回一个数组代理。您可以观察该对象上的 isLoaded 字段。

```
var data = App.store.find(App.Model, {});
data.addObserver('isLoaded', function() {
    if (data.get('isLoaded')) {
        ....
    }
}); 
```

但请记住通过 removeObserver 清理您的观察者。

我将此实用程序添加到内置的 ember-data 记录数组中。

```
DS.RecordArray.reopen({
    onLoad: function(callback) {
        if (this.get('isLoaded')) {
            callback(this);
        } else {
            var that = this;
            var isLoadedFn = function() {
                if (that.get('isLoaded')) {
                    that.removeObserver('isLoaded', isLoadedFn);
                    callback(that);
                }
            }

            this.addObserver('isLoaded', isLoadedFn);
        }

        return this;
    }
} 
```

所以现在你可以做

```
App.store.find(App.Model, {}).onLoad(function(data) {
    ....
}); 
```

你也可以做类似的事情

```
init: function() {
    this.set('data', App.store.find(App.model, {}));
},

onData: function() {
    if (this.get('data.isLoaded')) {
        ...
    }
}.observes('data.isLoaded') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T03:58:37.687

尝试在模型的 arrayController 中观察“content@each.isLoaded”并调用 stateManager.sent(“editing”)。就像是：

```
App.ModelArrayController.reopen({
    didLoadAllContent: function () {
        if (content.everyProperty('isLoaded')) {
            stateManager.transitionTo('editing');
        }
    }.observes("content.@each.isLoaded")
)} 
```

当然，这可能是一种更简单的方法。或者也许是一个更正确的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-03T14:55:27.197

通常，模型的状态将由 Route 处理。

模型挂钩执行 store.find。 [http://emberjs.com/api/classes/Ember.Route.html#method_model](http://emberjs.com/api/classes/Ember.Route.html#method_model)

afterModel 钩子将在路由模型解析（加载）后被调用。 [http://emberjs.com/api/classes/Ember.Route.html#method_afterModel](http://emberjs.com/api/classes/Ember.Route.html#method_afterModel)

# html - 在 FireFox 的两列布局中使用浮点数时不需要的空白区域

> ID：10616293
> 
> 赞同：0
> 
> 时间：2012-05-16T10:04:52.027
> 
> 标签：html, css

我在 Fire Fox 中的两列布局有一些问题。在 Chrome 中看起来应该如此。但是在 Fire Fox 中，当我使用 float: left; 时，我在文本和菜单之间得到一个 50 像素高的空白区域。对于左列和浮动：右；对于右列。我不明白为什么，我在 CSS 中搜索错误，但我找不到任何错误，我不知道我是否做错了什么。我用过火虫，但它就像一个死区。帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:21:42.010

如果您添加`overflow: hidden`到`#wrapper-body`额外的空间被删除（在 Firefox 12 上）

```
#wrapper-body {
    ...
    overflow: hidden;
} 
```

* * *

截屏：

![在此处输入图像描述](../Images/1fa849763fb05d7d0a3ff6ab19a6fa97.png)

# php - PHP - 如何找到 ANY CHARACTER BUT 字符串中预先指定的字符的第一次出现的位置？

> ID：10616294
> 
> 赞同：0
> 
> 时间：2012-05-16T10:04:51.987
> 
> 标签：php, string, find, character

我有一个可变长度的字符串。每个字符是“r”、“w”或“x”。

我知道如何使用 strpos() 来查找字符串中第一次出现字符的位置。但我想找到“r”或“w”第一次出现的位置。换句话说，我想找到第一次出现“not x”的位置。

例如：

```
"rwxrxx" would return 0
"wxrr" would return 0
"xxwwwwwr" would return 2
"xxrx" would return 2
"xxxwrrwxxrrwxrrwwxrxrw" would return 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:09:57.627

执行此操作的最佳方法（尽管有一个小警告）将是[strspn()](https://secure.php.net/strspn)或[strcspn()](https://secure.php.net/strcspn)之一，但根据您想要做什么会有细微的差别......

如果要查找**除 'x' 以外**的字符的第一次出现，则需要`strspn()`：

```
php > $pos = strspn('xxxwrrw', 'x');
php > var_dump($pos);
int(3) 
```

如果你需要**特别是 'w' 或 'r'**的第一次出现，你需要`strcspn()`：

```
php > $pos = strcspn('xxxwrrw', 'rw');
php > var_dump($pos);
int(3) 
```

但正如我所说，有一个小警告......这些函数返回*匹配或不匹配给定掩码/针的初始长度*（'c'`strcspn()`代表“计数器”）。
这意味着他们永远不会回来`false`，你总是会得到一个积极的结果，例如'xxxxxxx'：

```
php > $pos = strcspn('xxxxxx', 'rw');
php > var_dump($pos);
int(6) 
```

因此，您可能需要检查返回的位置是否确实存在，如下所示：

```
php > $input = 'xxxxxx';
php > $pos   = strspn($input, 'x'); // i.e. $pos = 6;
php > var_dump(isset($input[$pos]));
bool(false) // There was no character other than 'x' 
```

* * *

*原答案：*

```
php >     $string = 'xrwxrxx';
php >     preg_match('/[^x]/', $string, $matches, PREG_OFFSET_CAPTURE);
php >     echo $matches[0][1];
1 
```

# php - MSSQL VARBINARY 到 PDF 使用 PHP

> ID：10616302
> 
> 赞同：1
> 
> 时间：2012-05-16T10:05:09.027
> 
> 标签：php, sql-server-2008, lamp

使用自定义 DevExpress 应用程序，我们的用户正在上传 PDF 文件，这些文件存储在 MSSQL 2008 数据库的 VARBINARY(MAX) 列中。

我有 LAMP 盒，它使用 FreeTDS 驱动程序成功连接到该数据库。

我能够检索其他类型的信息（存储为 blob、日期、字符串等的图像），但是当我尝试提供 PDF 时，它们会以某种方式损坏。

如果我在上传之前和下载之后使用十六进制编辑器对文件进行比较，我可以看到它们是不同的（后镜头中的字符串与 db 128B08 上的字符串匹配......）

![之前和之后](../Images/157e47feb4fb4af1e8512616539567bb.png)

我用来提供文件的 PHP：

```
<?php
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public"); 
header("Content-Description: File Transfer");
header("Content-type:application/pdf");
header("Content-Disposition:attachment;filename=" . $arr[0]['FileName']);
header("Content-Transfer-Encoding: binary");
echo $arr[0]['FileContent']; 
```

用于将文件保存到数据库的 C#：

```
public void LoadFromStream(string fileName, Stream stream)
{
  Guard.ArgumentNotNull(stream, "stream");
  Guard.ArgumentNotNullOrEmpty(fileName, "fileName");
  FileName = fileName;
  byte[] bytes = new byte[stream.Length];
  stream.Read(bytes, 0, bytes.Length);
  Content = bytes;
}

public void SaveToStream(Stream stream)
{
  if (string.IsNullOrEmpty(FileName))
  {
    throw new InvalidOperationException();
  }
  stream.Write(Content, 0, Size);
  stream.Flush();
}

public byte[] Content
{
  get { return GetDelayedPropertyValue<byte[]>("Content"); }
  set
  {
    int oldSize = size;
    if (value != null)
    {
      size = value.Length;
    }
    else
    {
      size = 0;
    }
    SetDelayedPropertyValue<byte[]>("Content", value);
    OnChanged("Size", oldSize, size);
  }
} 
```

通过搜索“php varbinary、php 输出流、php varbinary 流、varbinary 编码”，我已经阅读了几乎所有可以找到的文章。非常感谢帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:07:18.303

这有几个问题。

首先，存储在数据库中的数据是十六进制格式的，因此您需要在将其提供给用户之前将其转换回 PHP 代码中的字节数组。

其次，您在数据库中获得的十六进制表示对于您正在使用的 PDF 似乎不正确。

当我将 PDF 从字节数组转换为十六进制表示时，我得到了一个非常不同的十六进制字符串，当转换回字节数组时，它工作正常。

# php - SQL 查询结果到下拉列表中

> ID：10616312
> 
> 赞同：-3
> 
> 时间：2012-05-16T10:05:31.313
> 
> 标签：php, mysql

我正在尝试从数据库中的表中获取事件的名称，我需要将此数据插入下拉列表中，然后有人单击它们，然后显示此特定事件的信息...

这是我到目前为止的代码..

```
<?php

require "config.php"; // Your Database details 
?>

<?PHP

$SQL = "SELECT title_en_US FROM civicrm_event";
$result = mysql_query($SQL);
// Write out our query.
$query = "SELECT title_en_US FROM civicrm_event";
// Execute it, or return the error message if there's a problem.
$result = mysql_query($SQL);

while ($db_field = mysql_fetch_assoc($result)) {
print $db_field['title_en_US'] . "<BR>";

}

?> 
```

你能告诉我如何将事件名称放在下拉列表中吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:17:27.460

请使用以下代码

```
$options='';
while($db_field = mysql_fetch_assoc($result))
{
    $options .= "<option>".$db_field['title_en_US']."</option>";
} 
```

对于 html 部分，

```
<select name="titles"><? echo $options; ?></select> 
```

# javascript - 如何使用 javascript 验证电话号码？

> ID：10616314
> 
> 赞同：6
> 
> 时间：2012-05-16T10:05:38.683
> 
> 标签：javascript, validation

比我聪明一点的人能帮我完成这个功能吗？其目的是验证表单中的文本输入，即仅接受 0-9、破折号和点的电话号码字段。HTML 很好地调用了该函数。

```
function validateFeedback() {
    var phone = document.getElementById("phone");
    var validNumber = "0123456789.-";
    for (i = 0; i < phone.length; i++); {
        if (validNumber.indexOf(phone.charAt(i)) == -1); {
            alert("You have entered an invalid phone number");
            return false;
        }
    }
    return true;
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T10:22:28.990

正则表达式应该有所帮助；）

抱歉，我没有尝试运行此代码，但应该没问题。

```
function validateFeedback(){
    var phone = document.getElementById("phone");
    var RE = /^[\d\.\-]+$/;
    if(!RE.test(phone.value))
    {
        alert("You have entered an invalid phone number");
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:07:16.763

试试这样：

```
function validateFeedback()
    {
    var phone = document.getElementById("phone");
    var validNumber = "0123456789.-";

    for(i = 0; i < phone.length; i++) {
            if(validNumber.indexOf(phone.charAt(i)) == -1) {
                    alert("You have entered an invalid phone number");
                    return false;
                }
            }

        return true;
    } 
```

有**；**空间不足 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:15:47.233

试试这个

```
function validateFeedback(value) {
    var length = value.length;
    chk1="1234567890()-+ ";
    for(i=0;i<length;i++) {
        ch1=value.charAt(i);
        rtn1=chk1.indexOf(ch1);
        if(rtn1==-1)
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T10:16:38.677

我认为您应该使用正则表达式来执行此操作。一些东西链接这个：

```
function validateFeedback() {
  var phone = document.getElementById("phone").value;
  var reg = new RegExp("[0-9 .-]*"); 

  return reg.test(phone);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T10:17:56.787

如果文本输入在表单中，您可以使用表单 id 和元素 id 更直接地引用它：

```
var phone = document.<formId>.phone; 
```

你要测试的是元素的值，所以你需要：

```
var phone = document.<formName>.phone.value; 
```

由于该函数可能是从表单上的提交侦听器调用的，因此您可以使用以下方法提高效率：

```
<form onsubmit="return validateFeedback(this);" ...> 
```

在我看来，电话号码只有数字，而不是“-”或“。” 字符，所以你应该只测试数字 0-9。

所以函数可以是：

```
function validateFeedback(form) {
  var phoneValue = form.phone.value;

  // Use a regular expression to validate the value
  // is only digits
  if (/\D/.test(phoneValue) {
    // value contains non-digit characters
    // advise user of error then
    return false;
  }
} 
```

您可能也想测试长度是否合理，但请注意，不同地方的电话号码长度不同，具体取决于地区或国家代码的位置和使用，以及该号码是用于移动电话、固定电话还是其他电话号码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T10:47:23.453

我更喜欢对这样的事情使用正则表达式。请查看我修改后的函数版本，它应该可以在所有主流浏览器中运行，无需任何框架。

```
function validateFeedback() {
    // Get input
    var phone = document.getElementById("phone"),
        // Remove whitespaces from input start and end
        phone = (phone || '').replace(/^\s+|\s+$/g, ''),
        // Defined valid charset as regular expression
        validNumber = "/^[0123456789.-]+$/";

    // Just in case the input was empty
    if (phone.length == 0) {
        // This depends on your application - is an empty number also correct?
        // If not, just change this to "return false;"
        return true;
    }

    // Test phone string against the regular expression
    if (phone.match(validNumber)) {
        return true;
    }

    // Some invalid symbols are used
    return false;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-10T14:36:11.067

```
function phonenumber(inputtxt)
{
  var phoneno = /^\d{10}$/;
  if((inputtxt.value.match(phoneno))
        {
      return true;
        }
      else
        {
        alert("message");
        return false;
        }
} 
```

# c# - 除了 Process 之外，还有其他方法可以在 C# 中执行内置的 shell 命令吗

> ID：10616315
> 
> 赞同：1
> 
> 时间：2012-05-16T10:05:46.953
> 
> 标签：c#, command-line, process

在 C# 中执行内置 shell 命令除了 Process 之外还有其他选择吗？目前我正在使用 Process 类来运行这些命令。但在当前场景中，我想并行运行 200 多个这样的命令。所以产生超过 200 个进程并不是一个好主意。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:09:55.567

“运行一个dos命令”相当于“创建一个进程并运行它”，所以即使有另一个api，仍然会有200个进程（顺便说一句，除非你在一个非常*非常*小的系统）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:26:54.043

你可以但不应该这样做

```
using Microsoft.VisualBasic;

Interaction.Shell(...); 
```

注意：您必须添加对 VisualBasic 程序集的引用。

这是对您问题的直接回答，但不是您应该做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:33:19.637

正如 Max Keller 所指出的，`System.Diagnostics.Process`总是启动一个新的系统进程。

如果必须启动进程/操作超过几秒钟，我宁愿将所有命令保存在一个临时文件中并使用`System.Diagnostics.Process`而不是单个操作来执行它。

```
// Get a temp file
string tempFilepath = System.IO.Path.Combine(System.IO.Path.GetTempPath(), "MyBatchFile.bat");
// Ensure the file dont exists yet
if (System.IO.File.Exists(tempFilepath)) {
    System.IO.File.Delete(tempFilepath);
}
// Create some operations
string[] batchOperations = new string[]{
    "START netstat -a",
    "START systeminfo"
};
// Write the temp file
System.IO.File.WriteAllLines(tempFilepath, batchOperations);

// Create process
Process myProcess = new Process();
try {
    // Full filepath to the temp file
    myProcess.StartInfo.FileName = tempFilepath;
    // Execute it
    myProcess.Start();
    // This code assumes the process you are starting will terminate itself!
} catch (Exception ex) {
    // Output any error to the console
    Console.WriteLine(ex.Message);
}

// Remove the temp file
System.IO.File.Delete(tempFilepath); 
```

# android - android - 在 PreferenceActivity 中显示 listView

> ID：10616317
> 
> 赞同：0
> 
> 时间：2012-05-16T10:06:01.260
> 
> 标签：android, android-listview, preferenceactivity, baseadapter

我希望在 PreferenceActivity 上显示一个 listView，类似于 android OS wifi-settings 用于网络列表的内容（例如，[在](http://www.flickr.com/photos/56742088@N06/5395382392/)图像的底部区域）。但是，这样的东西不可用，所以我创建了一个扩展 Preference 的新类，而我在 onCreateView 中返回的只是一个 ListView 实例。

它起作用了，但是无论我对它的 layoutParams 做什么，也不管我对适配器做什么，listView 的大小都是恒定的，大约是一个项目。即使我在 onCreateView 中设置了适配器，它也具有完全相同的大小。

不仅如此，而且 listView 不能滚动，即使很明显它里面有多个项目。

当然，我想使用与所有偏好相同的文本大小标准，以给人一种原生的感觉。

谁能告诉我可以做些什么来使它正常工作？

顺便说一句，该应用程序应该适用于 android API 10+（最低 10）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:28:50.900

如果您想要相同的外观/行为，您应该保持简单的`PreferenceActivity`实现，并`preference items`从代码动态地将新的添加到“列表”中（最终使用自定义渲染器）。

这种显示的基本实现是：

```
/**
 * This variable stands for the items with which you want to populate the list
 */
final HashMap<String, String> networks = new HashMap<String, String>();

final PreferenceCategory cat = new PreferenceCategory(getApplicationContext());
cat.setTitle(R.string.wifinetworks); // holding "Wi-fi networks"
for (final String networkTitle : networks.keySet())
{
    final Preference pref = new Preference(getApplicationContext());
    pref.setTitle(networkTitle);
    pref.setSummary(networks.get(networkTitle));
    cat.addPreference(pref);
} 
```

**编辑**：要将自定义组件添加到现有的`PreferenceActivity`，您应该尝试该`addContentView`方法。从内部`onCreate`：

```
final LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, 
        LayoutParams.WRAP_CONTENT);
addContentView(buttonBar, params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:35:58.797

好的，答案是将 setContentView 用于您希望的任何布局（包括您希望的任何视图），为首选项添加一个 listView，并为此 listView 调用 bind 和 setAdapter。

我通过查看其他解决方案找到了这个解决方案，比如这个： http: [//kmansoft.com/2011/08/29/implementing-long-clickable-preferences/](http://kmansoft.com/2011/08/29/implementing-long-clickable-preferences/)

# c# - 使用 EntLib 的 perfmon - perfmon 中没有实例

> ID：10616322
> 
> 赞同：1
> 
> 时间：2012-05-16T10:06:15.340
> 
> 标签：c#, enterprise-library, performancecounter, policy-injection

我们需要为我们的应用程序添加性能监控。对于原型，我创建了一个示例项目，我正在尝试开始工作。

我正在尝试将 policyInjection 用于性能计数器，因此我们将能够在生产环境中打开和关闭性能监控。

到目前为止，我可以在 perfmon 中看到实际类别，但我看不到任何实例（见图），即使我很确定应用程序正在运行并且实例存在，正如您在附加源中看到的那样。

![perfmon 中没有实例](../Images/7368c0c66aafcbcc2bc3925feeb85c44.png)

我尝试了很多东西，也用谷歌搜索，但没有找到任何可用的解决方案或线索寻找什么。

应用程序被创建为 consoleApplication

您还可以在此处下载 VS 的压缩项目：http: [//dl.dropbox.com/u/19457132/stackOverflow/Mpd.Instrumentation.PerformanceCounter.zip](http://dl.dropbox.com/u/19457132/stackOverflow/Mpd.Instrumentation.PerformanceCounter.zip)

这是我的消息来源。

**程序.cs**

```
using System;
using System.Collections;
using System.Configuration.Install;
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
using Microsoft.Practices.EnterpriseLibrary.PolicyInjection;
using Microsoft.Practices.EnterpriseLibrary.PolicyInjection.Installers;

namespace Mpd.Instrumentation.PerformanceCounter
{
    class Program
    {
        static void Main(string[] args)
        {
           //RemoveCounters();   
           InstallCounters();

            MyCounters myCounter = PolicyInjection.Create<MyCounters>();

            for (int i = 0; i < 100000000; i++)
            {
                myCounter.SampleMethod(i);
            }

            Console.ReadLine();
        }

        public static void InstallCounters()
        {
            PerformanceCountersInstaller installer = new PerformanceCountersInstaller(new SystemConfigurationSource());
            IDictionary state = new Hashtable();

            installer.Context = new InstallContext();
            installer.Install(state);
            installer.Commit(state);

            Console.WriteLine("Performance counters have been successfully installed. Press enter to continue");
            Console.ReadLine();
        }

        private static void RemoveCounters()
        {
            PerformanceCountersInstaller installer = new PerformanceCountersInstaller(new SystemConfigurationSource());
            installer.Context = new InstallContext();
            installer.Uninstall(null);
            Console.WriteLine("Performance counters have been successfully removed. Press enter to continue.");
            Console.ReadLine();
        }
    }
} 
```

**我的计数器.cs**

```
using System;
using System.Threading;

namespace Mpd.Instrumentation.PerformanceCounter
{
    public class MyCounters : IPerformanceCounter
    {
        public void SampleMethod(int i)
        {
            Console.WriteLine(i);
            Thread.Sleep(50);
        }
    }
} 
```

**IPPerformanceCounter.cs**

```
using System;

namespace Mpd.Instrumentation.PerformanceCounter
{
    public class IPerformanceCounter : MarshalByRefObject
    {

    }
} 
```

最后**是 app.config**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="policyInjection" type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.Configuration.PolicyInjectionSettings, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" />
    <section name="instrumentationConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Common.Instrumentation.Configuration.InstrumentationConfigurationSection, Microsoft.Practices.EnterpriseLibrary.Common, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" />
  </configSections>
  <policyInjection>
    <policies>
      <add name="SampleCountersPolicy">
        <matchingRules>
          <add type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.MethodSignatureMatchingRule, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            match="SampleMethod" ignoreCase="true" name="Method Signature Matching Rule" />
        </matchingRules>
        <handlers>
          <add type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.CallHandlers.PerformanceCounterCallHandler, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            categoryName=".aaaTest" instanceName="Default" useTotalCounter="true"
            incrementNumberOfCalls="true" incrementCallsPerSecond="true"
            incrementAverageCallDuration="true" incrementTotalExceptions="true"
            incrementExceptionsPerSecond="true" order="1" name="Performance Counter Call Handler" />
        </handlers>
      </add>
    </policies>
  </policyInjection>
  <instrumentationConfiguration performanceCountersEnabled="true"
    applicationInstanceName="Default" />
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:00:42.497

由于`SampleMethod`接受参数，您需要将其添加到匹配规则配置中：

```
 <matchingRules>
      <add type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.MethodSignatureMatchingRule, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        match="SampleMethod" ignoreCase="true" name="Method Signature Matching Rule">
        <parameters>
          <parameter name="i" typeName="System.Int32" />
        </parameters>
      </add>
    </matchingRules> 
```

如果没有该参数，则匹配规则不匹配，因此不会调用调用处理程序。如果您修改配置，您应该会在 perfmon 中看到这些实例。

# php - PDO Informix SQLDriverConnect：-“917”

> ID：10616323
> 
> 赞同：1
> 
> 时间：2012-05-16T10:06:15.627
> 
> 标签：php, informix

我在连接到远程 Informix 数据库服务器时遇到了大问题。

这是代码

```
$db = new PDO("informix:host=192.168.*.*; service=1565;
database=daten; server=name; protocol=onsoctcp; 
EnableScrollableCursors=1", "informix", "info00");

print "Connection Established!\n\n";

echo "Table contents: $rows.\n"; 
```

我收到以下错误：

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE=HY000, SQLDriverConnect: -917 [Informix][Informix ODBC Driver][Informix]必须在使用新数据库之前关闭当前数据库。在 /var/www/informix.php:9 堆栈跟踪：#0 /var/www/informix.php(9): PDO->__construct('informix:host=1...', 'informix', 'info00 ') #1 {main} 在第 9 行的 /var/www/informix.php 中抛出

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-27T07:47:44.367

我认为您还应该设置 DB_LOCALE 环境变量。当客户端应用程序请求连接时，它会将包括 DB_LOCALE 在内的信息发送到数据库服务器。

# php - 使用 php 将消息作为 html 代码发送 html 电子邮件

> ID：10616324
> 
> 赞同：0
> 
> 时间：2012-05-16T10:06:26.467
> 
> 标签：php, email, html-email

我正在发送 html 消息包含表格

当我在 gmail、hotmail、yahoo 帐户上收到消息时，它工作正常，但在其他客户端（即 Microsoft Outlook）上接收时，它会将其解析为 html 代码！

这是我的电子邮件标题

```
 'MIME-Version: 1.0' . "\r\n" .
    'Content-Type: text/html;charset= UTF-8' . "\r\n" .
            'From: me <me@client.com>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:42:19.893

我总是使用这个功能，它有帮助

```
 function sendHTMLemail($HTML,$from,$to,$subject,$fromname)
        {
            $headers = "From: ".$fromname." <".$from.">\r\n";
            $headers.= "Reply-To: ".$fromname." <".$from.">\r\n";
            $headers .= "MIME-Version: 1.0\r\n"; 

            $boundary = uniqid("HTMLEMAIL"); 

        // First we be nice and send a non-html version of our email        
            $headers .= "Content-Type: multipart/alternative;".
                        "boundary = $boundary\r\n\r\n"; 
            $headers .= "This is a MIME encoded message.\r\n\r\n"; 
            $headers .= "--$boundary\r\n".
                        "Content-Type: text/plain; charset=ISO-8859-1\r\n".
                        "Content-Transfer-Encoding: base64\r\n\r\n";                    
            $headers .= chunk_split(base64_encode(strip_tags($HTML))); 
            // Now we attach the HTML version
            $headers .= "--$boundary\r\n".
                        "Content-Type: text/html; charset=ISO-8859-1\r\n".
                        "Content-Transfer-Encoding: base64\r\n\r\n";                    
            $headers .= chunk_split(base64_encode($HTML)); 
            // And then send the email ....
            mail($to,$subject,"",$headers);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:11:13.900

我知道这不是您问题的答案，但我建议使用邮件库，它可以让您更轻松地发送邮件，并支持附件、身份验证等功能。
我推荐[SwiftMailer](http://swiftmailer.org)效果很好，是简单且有据可查。

# ios - 轻松异步图片下载 UIImage 视图

> ID：10616327
> 
> 赞同：1
> 
> 时间：2012-05-16T10:06:28.270
> 
> 标签：ios, ios5, asynchronous, uiimageview

我有一个正在构建的应用程序，它工作正常，但我使用的图像源来自一个网站，当我切换回我的初始视图时，它需要相当长的时间才能加载。我的问题是有没有办法完成这项工作并让速度更快。这是我用来提取图像源的代码

```
////Loads UIImageView from URL
todaysWallpaper.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.inkdryercreative.com/daily/archive/mondays/images/062-mondays-960x640-A.jpg"]]]; 
```

任何帮助或推动正确方向。很快，图像也会每天都发生变化，因此对此的任何帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:14:55.583

这里的问题`dataWithContentsOfURL:`是在主线程上，所以当下载图像时它会阻塞你的 UI。

您必须异步下载它。为此，我个人使用了我在互联网上找到的一段很棒的代码：[SDWebImage](https://github.com/rs/SDWebImage)。它完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T18:02:06.783

将 UIImage 创建包装在异步运行的块中（代码假定为 ARC），然后在主线程中调用您的回调

```
@implementation Foo
...
Foo* __weak weakSelf=self;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:
                   [NSURL  URLWithString:@"http://www.inkdryercreative.com/..jpg"]]];
    dispatch_sync(dispatch_get_main_queue(),^ {
        //run in main thread
       [weakSelf handleDelayedImage:image];
    });
});

-(void)handleDelayedImage:(UIImage*)image
{
   todaysWallpaper.image=image;
} 
```

weakSelf 技巧确保您的 Foo 类被正确清理，即使 URL 请求仍在运行

# workflow-foundation-4 - 在 WF4 中使用 DataContractResolver

> ID：10616333
> 
> 赞同：0
> 
> 时间：2012-05-16T10:06:53.460
> 
> 标签：workflow-foundation-4

我们正在以 WF4 方式开发工作流程。当我们使用一些自定义类时，我们必须将它们添加到每个发送/接收活动中的 knowntypes 集合中，以避免序列化异常。有什么方法可以使用 DataContractResolver 功能，这是一个新的 dotnet 4 功能，以避免添加 knowntypes ？或者如果有人可以建议任何替代解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:45:53.260

当然 - 查看示例：http: [//msdn.microsoft.com/en-us/library/dd807504.aspx](http://msdn.microsoft.com/en-us/library/dd807504.aspx)

# php - 如何在 PHP 中显示整数的二进制值

> ID：10616334
> 
> 赞同：8
> 
> 时间：2012-05-16T10:06:55.340
> 
> 标签：php

如何在 PHP 中回显整数的二进制值？我尝试使用`pack('S',$var)`但它没有显示任何结果......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T10:08:36.313

```
decbin($number); 
```

返回包含给定数字参数的二进制表示的字符串。

例如`decbin(26)`将返回`11010`

[decbin() 的源文档](http://php.net/manual/en/function.decbin.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T10:09:26.767

```
<?php
echo base_convert($number, 10, 2);
?> 
```

[http://php.net/manual/en/function.base-convert.php](http://php.net/manual/en/function.base-convert.php)

`string base_convert ( string $number , int $frombase , int $tobase )`

# java - Java/Swing：引用另一个类的组件

> ID：10616341
> 
> 赞同：2
> 
> 时间：2012-05-16T10:07:28.810
> 
> 标签：java, swing, jframe

我有一个 Swing-GUI（使用 Netbeans GUI-Builder 构建），有一个标签，我可以使用箭头键四处移动。按下空格键调用另一个类。如何从此类访问标签并获得职位？

提前感谢您的帮助！第二类的示例代码：

```
 public class Xy extends Thread {
      private Window s; // this is the jFrame-form
      public Xy(Window s) {
        this.s = s;
        s.setBackground(Color.yellow); // works
}

public void run() {
          // here i want to use the position of a label which is located on the form s
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:11:21.847

如果您不是绝对需要这样做，最好的选择是不要公开 JLabel。如果您希望其他类更改标签的位置，则为持有标签的类提供一个允许外部类执行此操作的方法。如果其他类需要查询标签的位置，则给包含类的公共getter方法，以便外部代码可以获取位置数据（而不是标签本身）。这样，如果您以后决定不想使用 JLabel 而是想完全显示不同的组件，您就不会破坏其他类中的代码。

或者更好的是，将您的 GUI 基于 MVC 模型，然后更改逻辑标签在模型中的位置。视图可以通过观察者模式监听模型的变化，然后视图本身可以改变标签的位置。

所有这一切的关键是随时随地使用[松散耦合。](http://en.wikipedia.org/wiki/Loose_coupling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:50:20.690

有两种方法可以做到这一点：

1.  将对 JLabel 的引用传递给需要它的类。例如，您可以编写一个将 JLabel 作为参数的方法，然后将其设置为实例变量。
2.  使 JLabel 成为 SomeClass 中的私有实例变量，并使用“getter”方法（如 getJLabel()）访问它。
3.  使 JLabel 成为 SomeClass 中的公共实例变量（您的 JLabel/JFrame？）并使用 SomeClass.label 访问它。

第一个可能被认为是更好的编程实践。

# css - 光标不起作用：Google Chrome 浏览器中用于选项标签的指针？

> ID：10616343
> 
> 赞同：5
> 
> 时间：2012-05-16T10:07:29.183
> 
> 标签：css, google-chrome

如何将光标作为选项标记中的指针？目前它在 Firefox 和 safari 浏览器中运行良好，但在 chrome 中无法运行。任何人都可以对此提出任何建议。

```
<style>
select option{
cursor:hand;
cursor:pointer;
}
</style>

<select>
<option>On mouse over need Hand symbol</option>
<option>11111111111111</option>
<option>22222222222222</option>
<option>33333333333333</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:09:14.933

如果 Chrome 不支持它，您将无法执行此操作。

唯一的方法是使用一些 Javascript（或 CSS）自定义下拉菜单，仅更改光标是不值得的。

# c - 将 OpenMP 代码编译为 C 代码

> ID：10616347
> 
> 赞同：8
> 
> 时间：2012-05-16T10:07:38.560
> 
> 标签：c, linux, gcc, openmp, x86-64

有没有一种方法可以将 OpenMP 的代码编译为 C 代码（将 OpenMP 部分翻译为纯 C），这样我就可以知道 OpenMP 正在生成什么样的代码。我正在使用 gcc 4.4 编译器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:12:15.637

就像其他评论者指出的那样，gcc 不会将 OpenMP 指令转换为纯 C。

但是，如果您想了解 gcc 对指令的作用，您可以使用该 `-fdump-tree-optimized`选项进行编译。这将生成至少类似于 C 的程序的中间表示。

有几个阶段可以转储（查看 gcc 的手册页），在**优化** 阶段，OpenMP 指令已替换为对 GOMP 运行时库的调用。查看该表示可能会让您对正在发生的事情有所了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T10:18:49.720

至少有[http://www2.cs.uh.edu/~openuh/](http://www2.cs.uh.edu/~openuh/) OpenUH（甚至列在[http://openmp.org/wp/openmp-compilers/](http://openmp.org/wp/openmp-compilers/)），它可以

> 发出可以由其他平台上的本机编译器编译的优化 C 或 Fortran 77 代码。

还有：[http](http://www.cs.uoi.gr/~ompi/) ://www.cs.uoi.gr/~ompi/ OMPi：

> OMPi 编译器使用 OpenMP #pragmas 获取 C 源代码并生成转换后的多线程 C 代码，准备好由系统的本机编译器编译。

和 OdinMP：

> 出于可移植性原因，OdinMP/CCp 是用 Java 编写的，它采用带有 OpenMP 指令的 C 程序并为 POSIX 线程生成 C 程序。

我应该说，将 openmp 代码翻译成纯 C 几乎是不可能的；因为旧的普通 C 不支持线程，而且我认为 OpenMP 源代码到源代码的翻译器还不知道 C11。OpenMP 程序可以通过 POSIX 线程转换为 C，也可以通过一些运行时库（如 libgomp）调用转换为 C。例如，OpenUH 有自己的库，它本身使用 pthreads。

# java - 用 Java 6 替换 Java 7

> ID：10616349
> 
> 赞同：1
> 
> 时间：2012-05-16T10:07:42.217
> 
> 标签：java, jdk1.6, java-7

目前我在 Windows 7 上运行 java 7

```
C:\>java -version
java version "1.7.0"
Java(TM) SE Runtime Environment (build 1.7.0-b147)
Java HotSpot(TM) 64-Bit Server VM (build 21.0-b17, mixed mode) 
```

我如何用 Java 6 替换它？什么是最好的方法 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:14:39.070

从 Sun 网站安装 Java 6

然后将 PATH 更改为指向 Java 6。

或者您可以遵循本指南：[Java 网站](http://www.oracle.com/technetwork/java/javase/index-137561.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:37:03.190

您实际上不需要更改它 - 使用最新版本（目前为 7），您可以运行为所有旧版本和最新版本编译的代码。

您可能想要的是编译您的代码以用于旧版本。请参阅[交叉编译示例](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-example)如何使用`javac`命令执行此操作，以及如何在 eclipse 中执行[此问题。](https://stackoverflow.com/questions/8022233/changing-eclipses-java-compiler-to-jdk7)

# authentication - 如何在 alfresco 4 社区中重新启动子系统？

> ID：10616351
> 
> 赞同：2
> 
> 时间：2012-05-16T10:07:53.880
> 
> 标签：authentication, tomcat, alfresco, openldap

我正在 64 位 ubuntu 服务器（10.04.4 LTS）上安装和配置 Alfresco 社区版 4（alfresco-community-4.0.d-installer-linux-x64.bin）。我正在尝试在没有 OpenLDAP 服务器的情况下对用户和组进行身份验证和同步，但只要我们对我进行更改， `$TOMCAT_HOME/shared/classes/alfresco/extension/subsystems/Authentication/ldap/ldap1/ldap-authentication.properties` 我就必须重新启动 tomcat 或整个服务器。

有没有办法在 alfresco 社区版中只重启一个子系统？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:36:28.470

不幸的是，没有。原因是 JMX 仅在企业版中可用，它允许您在不重新启动的情况下重新启动子系统。

# android - DialogFragment 方向改变

> ID：10616352
> 
> 赞同：0
> 
> 时间：2012-05-16T10:07:54.453
> 
> 标签：android, dialog, fragment, orientation-changes

我有一个活动和两个片段。其中一个片段扩展了 DialogFragment 并显示了一些文本。在我的活动中，我已经覆盖了 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(layoutId);
    if (savedInstanceState == null)
        initFragment();
} 
```

initFragment() 将片段添加到我的 layoutId 中的 FrameLayout。如果没有显示 DialogFragment，一切正常，但如果显示 DialogFragment 实例 - 方向更改会引发 IllegalStateException，该片段未在“setContentView”行返回视图。

顺便说一句，我正在使用 ActionBarSherlock

```
E/AndroidRuntime(19517): FATAL EXCEPTION: main
E/AndroidRuntime(19517): java.lang.RuntimeException: Unable to start activity Co
mponentInfo{ru.nixan.android/ru.nixan.android.Cards}: android.view.InflateException: B
inary XML file line #30: Error inflating class <unknown>
E/AndroidRuntime(19517):        at android.app.ActivityThread.performLaunchActiv
ity(ActivityThread.java:1956)
E/AndroidRuntime(19517):        at android.app.ActivityThread.handleLaunchActivi
ty(ActivityThread.java:1981)
E/AndroidRuntime(19517):        at android.app.ActivityThread.handleRelaunchActi
vity(ActivityThread.java:3351)
E/AndroidRuntime(19517):        at android.app.ActivityThread.access$700(Activit
yThread.java:123)
E/AndroidRuntime(19517):        at android.app.ActivityThread$H.handleMessage(Ac
tivityThread.java:1151)
E/AndroidRuntime(19517):        at android.os.Handler.dispatchMessage(Handler.ja
va:99)
E/AndroidRuntime(19517):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(19517):        at android.app.ActivityThread.main(ActivityThrea
d.java:4424)
E/AndroidRuntime(19517):        at java.lang.reflect.Method.invokeNative(Native
Method)
E/AndroidRuntime(19517):        at java.lang.reflect.Method.invoke(Method.java:5
11)
E/AndroidRuntime(19517):        at com.android.internal.os.ZygoteInit$MethodAndA
rgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(19517):        at com.android.internal.os.ZygoteInit.main(Zygot
eInit.java:551)
E/AndroidRuntime(19517):        at dalvik.system.NativeStart.main(Native Method)

E/AndroidRuntime(19517): Caused by: android.view.InflateException: Binary XML fi
le line #30: Error inflating class <unknown>
E/AndroidRuntime(19517):        at android.view.LayoutInflater.createView(Layout
Inflater.java:606)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.createViewFromTag
(LayoutInflater.java:680)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.rInflate(LayoutIn
flater.java:739)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.rInflate(LayoutIn
flater.java:742)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.inflate(LayoutInf
later.java:489)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.inflate(LayoutInf
later.java:396)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.inflate(LayoutInf
later.java:352)
E/AndroidRuntime(19517):        at com.android.internal.policy.impl.PhoneWindow.
generateLayout(PhoneWindow.java:2707)
E/AndroidRuntime(19517):        at com.android.internal.policy.impl.PhoneWindow.
installDecor(PhoneWindow.java:2767)
E/AndroidRuntime(19517):        at com.android.internal.policy.impl.PhoneWindow.
setContentView(PhoneWindow.java:247)
E/AndroidRuntime(19517):        at com.actionbarsherlock.internal.ActionBarSherl
ockNative.setContentView(ActionBarSherlockNative.java:119)
E/AndroidRuntime(19517):        at com.actionbarsherlock.app.SherlockFragmentAct
ivity.setContentView(SherlockFragmentActivity.java:309)
E/AndroidRuntime(19517):        at ru.nixan.android.Cards.onCreate(Cards.java:53)
E/AndroidRuntime(19517):        at android.app.Activity.performCreate(Activity.j
ava:4465)
E/AndroidRuntime(19517):        at android.app.Instrumentation.callActivityOnCre
ate(Instrumentation.java:1049)
E/AndroidRuntime(19517):        at android.app.ActivityThread.performLaunchActiv
ity(ActivityThread.java:1920)
E/AndroidRuntime(19517):        ... 12 more
E/AndroidRuntime(19517): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(19517):        at java.lang.reflect.Constructor.constructNative
(Native Method)
E/AndroidRuntime(19517):        at java.lang.reflect.Constructor.newInstance(Con
structor.java:417)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.createView(Layout
Inflater.java:586)
E/AndroidRuntime(19517):        ... 27 more
E/AndroidRuntime(19517): Caused by: android.view.InflateException: Binary XML fi
le line #7: Error inflating class fragment
E/AndroidRuntime(19517):        at android.view.LayoutInflater.createViewFromTag
(LayoutInflater.java:697)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.rInflate(LayoutIn
flater.java:739)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.inflate(LayoutInf
later.java:489)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.inflate(LayoutInf
later.java:396)
E/AndroidRuntime(19517):        at com.android.internal.widget.ActionBarView.<in
it>(ActionBarView.java:236)
E/AndroidRuntime(19517):        ... 30 more
E/AndroidRuntime(19517): Caused by: java.lang.IllegalStateException: Fragment ru
.nixan.android.fragments.BalanceFragment did not create a view.
E/AndroidRuntime(19517):        at android.support.v4.app.FragmentActivity.onCre
ateView(FragmentActivity.java:293)
E/AndroidRuntime(19517):        at android.view.LayoutInflater.createViewFromTag
(LayoutInflater.java:669)
E/AndroidRuntime(19517):        ... 34 more
W/ActivityManager(30340):   Force finishing activity ru.nixan.android/.Cards 
```

错误对话框.java

```
public class ErrorDialog extends SherlockDialogFragment implements
        OnClickListener {

    public static final String FRAGMENT_TAG = "error";

    public static final String EXTRA_EXCEPTION = "exception";

    public static ErrorDialog getInstance(Exception excpetion) {
        ErrorDialog result = new ErrorDialog();
        Bundle data = new Bundle();
        data.putSerializable(EXTRA_EXCEPTION, excpetion);
        result.setArguments(data);
        return result;
    }

    // some methods that are not in lifecycle are not presented here.

    public Dialog onCreateDialog(Bundle savedInstanceState) {
        setRetainInstance(true);
        setShowsDialog(true);
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.dialogErrorTitle);
        builder.setPositiveButton(R.string.dialogDismissButton, this);
        Exception exception = (Exception) getArguments().getSerializable(
                EXTRA_EXCEPTION);
        builder.setMessage(getErrorMessage(exception, getActivity()));
        return builder.create();
    }
} 
```

活动：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cards);
    if (savedInstanceState == null) {
        Uri data = getIntent().getData();
        if (data == null || PATH_MENU.equals(data.getLastPathSegment()))
            initMenuFragment();
        else if (PATH_CARDS.equals(data.getLastPathSegment()))
            initCardsFragment();
    }
}

private void showError(Exception exception) {
    ErrorDialog.getInstance(exception).show(getSupportFragmentManager());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:49:41.653

我在自己的实现中遇到了完全相同的情况。您可以在这里查看我提出的解决方法：[https ://stackoverflow.com/a/14774821/1894568](https://stackoverflow.com/a/14774821/1894568)

基本上它是关于不在 layout-xml 中使用片段，因为生命周期与通过 FragmentManager 添加的片段不同。而是将特定方向的片段（LandscapeModeFragment 和 PortraitModeFragment）注入 FrameLayout 容器。

# php - 无法发送应用请求，显然已发送但未显示通知用户

> ID：10616354
> 
> 赞同：1
> 
> 时间：2012-05-16T10:07:58.353
> 
> 标签：php, javascript, facebook, facebook-graph-api, apprequests

我无法让用户将应用请求转发给他的朋友；

我在**客户端**使用下一个代码：

```
window.fbAsyncInit = function() {
    FB.init({
        appId: 'FBAPPD',
        frictionlessRequests: true,
        status     : true,
        cookie     : true,
        xfbml      : true
    });
}; 
```

当用户选择她的朋友时：

```
function sendRequestToRecipients() {
var user_ids = document.getElementById("request_ids").value; //ID_user1,ID_user2...
 FB.ui({
        method: 'apprequests',
        message: 'Prueba una nueva forma de comunicarte con tus contactos...',
        to: '' + user_ids + '',
    }, requestCallback);

function requestCallback(response) {
// Handle callback here
    if (response.request && response.to) 
    {
        var request_ids = [];
        for(i=0; i<response.to.length; i++) {
            var temp = response.request + '_' + response.to[i];
            request_ids.push(temp);
        }
        var requests = request_ids.join(',');
        $.post('/FB_Invitaciones', { uid: document.getElementById("FBUser").value, request_ids: requests }, function (resp) {
            // callback after storing the requests
        });
    } else 
    {
        alert('canceled');
    }
} 
```

**服务器端**

```
<?php
[...]
    $token_url = "https://graph.facebook.com/oauth/access_token?" .
        "client_id=" . $FBAPPID .
        "&client_secret=" . $FBSECRETFBAPPID .
        "&grant_type=client_credentials";

    $app_access_token = file_get_contents($token_url);

    $user_id = $datos->getFBID();

    //Procesando ids 
    $ids = explode(",",$_REQUEST['request_ids']);

    foreach($ids as $request)
    {
        $apprequest_url ="https://graph.facebook.com/" .$request.
            "?".$app_access_token;
        $result = file_get_contents($apprequest_url);
    }
die()
?> 
```

我找不到错误。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:38:08.503

我在这个问题中找到了解决方案： [发送应用请求有效，但未发送给用户？](http://facebook.stackoverflow.com/questions/9054075/send-app-request-works-but-not-sent-to-user) 在我的应用程序配置中，我需要检查“Facebook 上的应用程序”，现在可以正常工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T09:07:12.217

@gokuhs 复制过去并尝试这个 1 工作得很好...将设计更改为您的要求还输入您的应用程序 ID 和密码，但从检索部分我遇到问题...如果有人提供解决方案我准备付款甚至，我可以提供我的 ftp 和 facebook 登录详细信息

```
 <?php
    session_start();
    if(!empty($_REQUEST['request_ids'])) {
    require_once('src/facebook.php');

    $config = array();
    $config["appId"] = "XXXXXXX";
    $config["secret"] = "XXXXXXX";
    $config["fileUpload"] = false; // optional

    // Create our Application instance.
    $facebook = new Facebook(array(
      'appId'  => $config["appId"],
      'secret' => $config["secret"],
      'cookie' => true,
    ));

        echo $user_id= $facebook->getUser();

        // Here I want to retreive Type, color and message.

    }

    else{

    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script src="js/jquery-1.6.2.min.js" type="text/javascript" ></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <title>Greetings</title>

    </head>

    <body>

    <div align="center"> </div>
    <div class="main">

    <div style="margin-left:300px; width:540px; margin:auto;">

    <table>
    <tr>
        <td height="39">
            <span style="font-size:18px;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#603;">Type :</span>
        </td>
        <td>
            <select id="catag">
                <option>Love</option>
                <option>Friend</option>
                <option>Mother</option>
                <option>Father</option>
            </select>
        </td>
        <td>

        </td>
    </tr>

    <tr>
        <td height="56">
            <span style="font-size:18px;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#603;">Color :</span>
        </td>
        <td>
            <select id="datas">
                <option>Red</option>
                <option>Yellow</option>
                <option>Blue</option>
                <option>Red</option>
            </select>
        </td>
        <td>

        </td>
    </tr>

    <tr>
        <td>
            <span style="font-size:18px;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#603;">Greeting :</span>
        </td>
        <td>
            <textarea type="text" name="message" id="msg" style="height:40px; width:350px;" ></textarea>
        </td>
        <td>
            <input type="submit" value="Send" id="one" style="color:#CCC; background-color:#603; border:none; width:80px; height:40px;"
            onclick="sendRequestViaMultiFriendSelector(); return false;"></span>
        </td>
    </tr>
    </table>
    </div>      

    <script>
      FB.init({
        appId  : 'XXXXXX',
        status : true,
        cookie : true,
        frictionlessRequests: true,
        oauth: true
      });

      function sendRequestViaMultiFriendSelector() {

        FB.ui({method: 'apprequests',
          message: $("#msg").val(),
          data: $("#datas").val(),

        },function getMultipleRequests(requestIds) {
            FB.api('', {"ids": requestIds }, function(response) {
            console.log(response);
             });
        }, requestCallback);
      }  

      function requestCallback(response) {
        // Handle callback here
        //var requestID = FB.api("/requestID", callback);   
        alert("Post was published.");
      }
    </script>

    <div id="fb">

    </div>
    <?php }?>
    </div>
    </body>
    </html> 
```

# java - 将旧的 Netbeans 3.6 大型 Java 项目（2 GB 源）转换为新的 Netbeans 7 IDE

> ID：10616356
> 
> 赞同：1
> 
> 时间：2012-05-16T10:08:06.967
> 
> 标签：java, swing, netbeans

我有一个大型 Java 项目（几乎**2 GB**）。**该项目在Netbeans 3.6**上运行完美，因为它根据用户需要编译文件（按 F9），但是当我将该项目导入**New Netbeans 7**时，它会自动构建，然后堆大小错误，Netbens 停止工作。如何在新 IDE 中导入旧的 Netbenas 3.6 项目。我对任何 New Modern IDE 都满意，不仅是 Netbeans 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:25:43.857

在单独的注释（来自 Kowser 的）上，您可以尝试在 Netbeans 中手动设置堆大小`netbeans.conf`

[http://performance.netbeans.org/howto/jvmswitches/](http://performance.netbeans.org/howto/jvmswitches/)

也许您的旧配置已经有这样的设置，而您的新安装没有保留它们？

此外，Netbeans 停止了对[Swing 应用程序框架](http://en.wikipedia.org/wiki/Swing_Application_Framework)的支持，也许您的代码有这样的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:15:28.530

我不知道如何解决。但最重要的是。

`project build`如果任何依赖于 IDE 支持，它就是一种反模式。

考虑使用流行的构建工具，例如`maven`或`ant`。

因此，进行必要的修改以使用`maven/ant`. 轻松获得任何类型的 IDE 构建支持！

# animation - 拉斐尔动画基于位置而不是时间

> ID：10616357
> 
> 赞同：1
> 
> 时间：2012-05-16T10:08:09.967
> 
> 标签：animation, raphael

我有两个路径元素。为了便于描述，我们只说一个是心形，另一个是圆角正方形。

我试图让一个像这样插入另一个：

[http://raphaeljs.com/animation.html](http://raphaeljs.com/animation.html)

这很容易做到，但我需要根据元素 X 位置而不是时间来做到这一点。

因此，当我在 Xval 100 和 200 之间拖动路径元素时，它会慢慢变形到第二条路径，直到它最终在 X 值 200 处完成转换。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:18:19.543

我将使用拖动处理程序（或者您可以绑定到 mousemove 事件并输入坐标）并使用它在起始位置和基于 x 或 y 坐标的目标动画之间移动，并使用[Element.status](http://raphaeljs.com/reference.html#Element.status)。查看小提琴（基于您的）：

很抱歉——我最初给了你一份你自己的小提琴的副本。非常糟糕的形式=（试试这个：

[http://jsfiddle.net/kevindivdbyzero/MqFkP/2/](http://jsfiddle.net/kevindivdbyzero/MqFkP/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:45:07.957

到目前为止，这是我想出的：

[http://jsfiddle.net/jocose/CkL5F/139/](http://jsfiddle.net/jocose/CkL5F/139/)

这可行，但依赖于延迟，我担心这会在较慢的机器上中断，而且它的接缝真的很糟糕。如果有人知道更好的解决方案，请告诉我。

# jquery - jQuery slideDown，当孩子有位置时的 IE7 错误：相对

> ID：10616358
> 
> 赞同：2
> 
> 时间：2012-05-16T10:08:13.067
> 
> 标签：jquery, css, internet-explorer

这里的简单示例：http: [//jsfiddle.net/CnUkA/5/](http://jsfiddle.net/CnUkA/5/)

我有一个应用了 slideDown 动画的外部 div，在这个 div 内部是一个带有`position:relative`.

单击按钮时立即显示内部 div 是 IE7。在我使用它的现实世界中，我需要该 div 相对于我可以用绝对值将孩子定位在其中。

**- - 编辑 - -**

使用`position:absolute`on`#slide`不适合我的情况。

我将拥有相对于`#inner`div 绝对定位的元素，因此我也无法`position:relative`从中删除。

这是一个更新的示例，显示了为什么我需要`position:relative`on `#inner`。 [http://jsfiddle.net/CnUkA/9/](http://jsfiddle.net/CnUkA/9/)

在 IE7 中完成幻灯片动画之前，相对元素和绝对元素都会显示

**--- 编辑 2 ---**

结合使用以下答案，我认为这是一个不错的解决方案：

[http://jsfiddle.net/CnUkA/13/](http://jsfiddle.net/CnUkA/13/)

添加`position:relative`到向下滑动的 div，然后`position:static`在动画完成后设置。这可以防止元素消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:52:18.373

简单的方法，我在我的 IE 浏览器中进行了测试

```
Remove-  #inner position:relative property And Update your jQuery script also

<script type="text/javascript">
$(document).ready(function(){

    $("button").click(function(){

         $("#slide").slideDown(2000, function()
         { 
         $("#inner").css("position","relative");
         });

    });

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:15:50.593

似乎子项立即显示，因为偏移量父项不是`#slide`div。

如果您`position: relative;`在`#slide`div 上设置它会更好，但由于某种原因，最后三行在幻灯片后消失了。

如果你`position: absolute;`在`#slide`div 上设置它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:29:34.613

只需将绝对位置添加到

```
#slide{
   display:none;
   position:absolute;
} 
```

# winforms - 在表单上显示 RadDesktopAlert

> ID：10616359
> 
> 赞同：2
> 
> 时间：2012-05-16T10:08:19.633
> 
> 标签：winforms, telerik, nullreferenceexception

我想在表单上显示一个 RadDesktopAlert（而不是在桌面上）。因此我使用第二个构造函数将其容器设置为形成。但是为 this.Container 引发了 nullException
我是否在正确的行中以在表单上显示 RadDesktopAlert（最好在表单中说）？
为什么容器为空？
这是我的代码

```
 private void Form1_Load(object sender, EventArgs e)
      {
        Telerik.WinControls.UI.RadDesktopAlert q = new Telerik.WinControls.UI.RadDesktopAlert(this.Container);//null exception: Container is null
        q.ScreenPosition = Telerik.WinControls.UI.AlertScreenPosition.BottomCenter;
        q.ContentText = "what ever";
        q.Show();
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:38:08.897

为此，您需要将 ScreenPosition 设置为 Manual，然后设置弹出位置

```
 Telerik.WinControls.UI.RadDesktopAlert q = new Telerik.WinControls.UI.RadDesktopAlert();//null exception: Container is null
        q.ScreenPosition = Telerik.WinControls.UI.AlertScreenPosition.Manual;
        q.Popup.Location = new Point(this.Location.X + 20, this.Location.Y + 20);
        q.ContentText = "what ever";
        q.Show(); 
```

# asp.net-mvc - ajax.actionlink 更新 div

> ID：10616361
> 
> 赞同：0
> 
> 时间：2012-05-16T10:08:28.947
> 
> 标签：asp.net-mvc

目前我有一个包含两列的页面，左侧包含一些链接，右侧显示基于单击内容的附加数据。

目前我很难让 Ajax.ActionLink 方法成功更新右侧列。

目前我的页面看起来有点像这样：

```
<div id="lefthand">

@Ajax.ActionLink("Children", "ViewDetail", new { details = ViewBag.data }, new AjaxOptions() { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "details" })

</div>

<div id="righthand">

<ul id="details">

</ul>

</div> 
```

但是，当我单击该链接时，会创建一个新页面——而不是我当前所在页面的一部分（我正在创建一个局部视图）。

我已经在网站的另一部分成功地使用了这个，但是更新的位在同一个 . 是这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:31:43.327

我认为您可能缺少 jquery.unobtrusive-ajax.js 文件作为脚本参考。

# c# - C# Web 浏览器控件阻止父级的 Load 事件

> ID：10616363
> 
> 赞同：8
> 
> 时间：2012-05-16T10:08:32.817
> 
> 标签：c#, winforms, events, webbrowser-control

这可能会让人觉得非常愚蠢，但我不知道是否：

*   我是一个白痴
*   我误解了一些东西
*   MS Web 浏览器控件被窃听

我更愿意认为是后者。

我在 WinForms 用户控件中有一个 Web 浏览器控件。它已在设计时添加到控件中，理论上，在控件的 Load 事件中，它应该导航到 Google。

看起来很简单。

然而。

```
public partial class TVHost : UserControl
{
    public TVHost()
    {
        InitializeComponent();
    }

    private void TVHost_Load(object sender, EventArgs e)
    {     
        webBrowser1.Navigate("http://google.co.uk");  
    }
} 
```

这行不通。没有错误，什么都没有。插入断点/调试行表明 Load 事件甚至没有被调用。

此时我决定检查在 Designer.cs 文件中是否正确设置了 Load 事件。

```
 this.Load += new System.EventHandler(this.TVHost_Load); 
```

似乎是合法的。

如果我从表单中删除 Web 浏览器控件，则会触发 load 事件。

我有点不明白，控件如何防止使用它的方法首先触发？

继续前进，我发现了这个： [http ://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/d6e427b2-9cc9-4318-bb05-11363025e3f7/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/d6e427b2-9cc9-4318-bb05-11363025e3f7/)

TL; DR 的链接如下：“如果表单上有一个设置为 Visible = true 的网络浏览器，则加载将不起作用”

如果我将 webbrowser 的默认可见性更改为 false，那么肯定会触发控件的加载事件。我可以通过在加载事件中设置浏览器的可见性来解决这个问题。

```
private void TVHost_Load(object sender, EventArgs e)
{
    webBrowser1.Visible = true;
    webBrowser1.Navigate("http://google.co.uk");
} 
```

很奇怪。

虽然这个“修复”有效，但我发现它非常hacky并且想知道是否有人对这种行为有任何解释？

令人惊讶的是，我在 2005 年遗留的 MS Connect 中发现了这个错误 - [http://connect.microsoft.com/VisualStudio/feedback/details/116535/when-adding-a-webbrowser-control-to-a-user-control -加载不会触发#](http://connect.microsoft.com/VisualStudio/feedback/details/116535/when-adding-a-webbrowser-control-to-a-user-control-the-load-will-not-fire#)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:02:36.090

从您链接到的[Connect 错误中的讨论：](http://connect.microsoft.com/VisualStudio/feedback/details/116535/when-adding-a-webbrowser-control-to-a-user-control-the-load-will-not-fire#)

> 现在，如果要触发 Load 事件，可以在属性网格中设置 WebBrowser 控件的 URL 属性。URL 可以是任何你想要的，甚至是 about:blank，如果你不希望它从加载的页面开始。

因此，如果您进入设计器并将`WebBrowser`'[`Url`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.url.aspx)属性设置为字符串`about:blank`（告诉`WebBrowser`加载一个空页面），那么您的用户控件应该`Load`再次开始获取其事件。

# drupal - 如何知道 Compass 可执行文件的路径？

> ID：10616364
> 
> 赞同：0
> 
> 时间：2012-05-16T10:08:33.663
> 
> 标签：drupal, compass-sass

我正在尝试在 Windows 上的本地主机上使用带有 Drupal 7、基本主题和 Compass 模块的指南针。它已经安装在我的电脑上。我是否应该再次将它安装到我的本地网络服务器，我怎么知道现有 Compass 可执行文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:52:13.750

更多细节将有助于找到问题的根源：

1.  您是从命令行运行指南针，还是使用 GUI 实用程序？

2.  您是否通过安装指南针`gem install compass`？

3.  您运行的是哪个版本的 Windows？

如果你已经正确安装了 ruby​​ 和 compass，你应该可以`cd`进入你的 drupal 主题目录并运行`compass watch`编译。

您可以使用`where`Windows 命令提示符中的命令（`where compass`或者，如果这不起作用`where ruby`），它将搜索您的当前目录和 $PATH。如果找不到 compass，则可能需要重新安装 compass/ruby。

希望有帮助！

# google-docs-api - 使用 Google 文档列表 API 上传文档时自动翻译不起作用

> ID：10616367
> 
> 赞同：1
> 
> 时间：2012-05-16T10:08:40.793
> 
> 标签：google-docs-api

我尝试使用 Google Document List API 第 3 版自动翻译文档。[文档](https://developers.google.com/google-apps/documents-list/#uploading_documents_and_automatically_translating_them "上传文件并自动翻译")只是说在初始 HTTP POST 请求中添加“sourceLanguage”和/或“targetLanguage”参数。

所以这是我发送的请求：

```
POST /feeds/upload/create-session/default/private/full?sourceLanguage=fr&targetLanguage=en
Authorization: GoogleLogin auth=<authentication token>
GData-Version: 3.0
Content-Type: application/atom+xml
Content-Length: 163
X-Upload-Content-Type: text/plain
X-Upload-Content-Length: 50

<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007"><title>french.txt</title></entry> 
```

我尝试使用非常简单的 .txt 文件以及 .doc（法语到英语）。文件已正确上传到服务，但不会发生翻译。

在上传的文档上使用工具->翻译菜单的翻译工作正常，因此“翻译引擎”能够执行我试图通过 API 进行的翻译。

文档有错吗？自动翻译是如何工作的？

# c# - 解码一个字符串

> ID：10616370
> 
> 赞同：1
> 
> 时间：2012-05-16T10:09:07.210
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个字符串，我保存在 db 中，如下所示：Anders Mæåø

在服务器上，我有一个名为：TestFolder 的文件夹

在 TestFolder 我有 3 个其他文件夹命名：

Anders Mæåø 蒂莫西·琼斯 Will Smith

当我从 Db 获取字符串“Anders Mæåø”并运行循环以在 TestFolder 中搜索文件夹名称 Anders Mæåø 时，它返回 null。

**示例代码：**

```
public ActionResult UploadImage(HttpPostedFileBase fileData, 
                                String ProjectName, string userName)
{
    var fileName =
    this.Server.MapPath("~/Upload/" + userName + "/" + ProjectName + "/" +
              System.IO.Path.GetFileName(fileData.FileName)));
    fileData.SaveAs(fileName);

    return Content(fileName);
} 
```

如果用户名是安德斯，它会上传没有我们的问题，但如果用户名是安德斯，它不会导致它找不到正确的文件夹。与项目名称相同

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:44:14.237

可能你需要改变你的`UTF-Encoding`.

查看有关[在 ASP.NET 中使用字符编码的示例项目](http://www.codeproject.com/Articles/6515/Using-Character-Encoding-in-ASP-NET)

[另请查看有关为 ASP.NET 网页全球化选择一种编码的](http://msdn.microsoft.com/en-us/library/39d1w2xf.aspx)文章

# linux - /dev/tcp 在 LINUX 中不存在

> ID：10616386
> 
> 赞同：0
> 
> 时间：2012-05-16T10:09:58.947
> 
> 标签：linux, unix

我正在将 C/pro*c 代码从 UNIX 移植到 LINUX。代码是：

```
#define __NFDBIT       (8 * sizeof(unsigned long))
#define __FD_SETSIZ    1024
#define __FDSET_LONG   (__FD_SETSIZ/__NFDBIT)
typedef struct {
    unsigned long fds_bits [__FDSET_LONG];
} __ernel_fd_set;

typedef __ernel_fd_set           fd_set_1;
int main()
{
    fd_set_1 listen_set;
    int listen_sd;
    int socket_id;
    FD_ZERO(&listen_set);
    socket_id = t_open("/dev/tcp", O_RDWR | O_NONBLOCK, (struct t_info *) 0);
    return 0;
}
if ( socket_id <0 )
{
    exit(FAILURE);
} 
```

在 UNIX 中，socket_id 的值 > 0 在 Linux 中为 -1。原因是在 UNIX 目录下的 /dev 文件 tcp 存在。但在 LINUX 中，它位于 /dev 下，此 tcp 文件不存在。同样在 UNIX 中，这个 tcp 文件是不同于普通文件的字符特殊文件。

有没有办法在 LINUX 中创建与 UNIX 中相同的字符特殊文件，或者如何进一步进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:34:19.227

Solaris 使用`ndd /dev/tcp [value = something]`更改正在运行的内核上的系统 tcp 配置。Linux 不这样做。

在 Linux 中，您写入 /proc/sys/net/ipv4/*（* == 很多文件）。tcp 的其他值在 中更改`/etc/sysctl.conf`，因此 Linux 没有 ndd 等效项，也没有 /dev/tcp。

凭空创建 /dev/tcp 不会让您通过套接字访问内核值。插座的作用是什么？您将不得不研究如何使用您的代码和 RH 系统管理员指南来做到这一点。

如果这是使用 libwrap 或其他一些 TCP 包装器库（在 Solaris 上）编译的，则必须查看此处：

[http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/3/html/Reference_Guide/s1-tcpwrappers-access.html](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/3/html/Reference_Guide/s1-tcpwrappers-access.html)

弄清楚如何为 Linux 重做代码。在我看来，这有点混乱——Soalris 的 TCP 包装器——> Linux，就是这样。

# android - 哪个更好：Parcelable 或 Context？

> ID：10616388
> 
> 赞同：0
> 
> 时间：2012-05-16T10:10:07.313
> 
> 标签：android

我处于必须在活动之间共享变量的情况......但我有一个疑问。哪个更好： Parcelable 对象或将其设置在自定义 Application 对象上。

当某些东西要在下一个活动中使用时，我只是将它作为 Parcelable 对象传递，当它要在多个活动中使用时，我将它放在应用程序上下文中。

你怎么看？这样对吗？哪个性能更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:24:02.433

我认为你的方法是完全有效的。

如果它类似于在每个 Activity 中访问的用户对象，则将其存储在自定义应用程序对象中，但如果应用程序对象在应用程序处于后台时被破坏，请确保有办法重新创建对象。

如果它是类似路径或用户做出的选择决定下一个活动如何工作的东西，则将其与 Intent 一起发送。

还有一些类不容易放入 Intent。我有一个附加到应用程序类的 ImageCache，它允许在活动更改之间将图像（如用户配置文件图像）保存在内存中，而无需多次解码位图。如果它们的设计方式不会填满所有可用内存，那么它们也非常适合自定义应用程序类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:17:14.340

我建议在活动之间共享额外的数据。如果它是一个自己的类，它必须实现 Serializible。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:17:59.853

如果您觉得懒惰，请使用 Application 的单例模式。

但是，如果您想更智能地编码，请使用 Parcelable。

# excel - 在循环中动态添加activeX按钮在Excel VBA中不起作用

> ID：10616389
> 
> 赞同：0
> 
> 时间：2012-05-16T10:10:08.400
> 
> 标签：excel, vba

我有一个循环，在其中我在特定工作表中添加 ActiveX 按钮。但不管循环有多大，它只添加一个按钮。循环位于工作表的行上。每次它应该进入新行并添加一个按钮。但是第一次它排成一行时，添加按钮，然后函数被终止。即使在添加动态按钮的行之后写入的 msgbox 也不会执行。下面是代码：

```
Public Function AddButton(strSheetName, counter)
Dim btn As OLEObject
Dim cLeft, cTop, cWidth, cHeight
    With Worksheets(strSheetName).Range("J" & (6 + counter))
        cLeft = .Left
        cTop = .Top
        cWidth = .Width
        cHeight = .Height
    End With
    With Worksheets(strSheetName)
        btn = .OLEObjects.Add(ClassType:="Forms.Label.1", Link:=True, DisplayAsIcon:=False, Left:=cLeft, Top:=cTop, Width:=cWidth, Height:=cHeight)
    End With
    MsgBox "After Adding button"
End Function 
```

现在这个函数被循环调用。在第一次迭代中，该函数将一个按钮添加到所需的位置，并且在添加按钮后立即终止此函数和调用函数（以及因此循环）。甚至 msgbox（添加按钮后）也不会执行。

可能是什么原因？有什么帮助吗？在此先感谢 Akki J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:15:28.980

您在`btn =`代码之前缺少 SET 命令。

你也不需要这个函数：）试试这个（**尝试和测试**）

```
Option Explicit

Sub Sample()
    Dim i As Long

    For i = 1 To 5
        AddButton "Sheet1", i
    Next i
End Sub

Public Sub AddButton(strSheetName As String, counter As Long)
    Dim btn As OLEObject
    Dim cLeft, cTop, cWidth, cHeight

    With Worksheets(strSheetName).Range("J" & (6 + counter))
        cLeft = .Left
        cTop = .Top
        cWidth = .Width
        cHeight = .Height
    End With
    With Worksheets(strSheetName)
        Set btn = .OLEObjects.Add(ClassType:="Forms.Label.1", Link:=True, _
        DisplayAsIcon:=False, Left:=cLeft, Top:=cTop, Width:=cWidth, _
        Height:=cHeight)
    End With

    MsgBox "After Adding button"
End Sub 
```

# iphone - XCode 自动代码生成

> ID：10616395
> 
> 赞同：0
> 
> 时间：2012-05-16T10:10:21.260
> 
> 标签：iphone, objective-c, xcode, ios5

我是新的 IOS 和 XCode。我在我的 iPhone 应用程序中添加了一些 bottun，现在我想向它们添加功能。我找到[了这个教程](https://developer.apple.com/library/ios/documentation/iphone/conceptual/iPhone101/Articles/05_ConfiguringView.html#//apple_ref/doc/uid/TP40007514-CH7-SW4)。

问题是当我将按钮拖到 ViewControler.h 时，它会弹回来。

请指教。谢谢，那鸿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:12:46.780

按`Ctrl button + drag the your button`到 viewController.h 然后`"Insert Outlet and Outlet Collection"`会出现。之后，您将手指移开鼠标，您将获得`Outlet`有关连接的框。它具有连接、名称、类型属性。我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T11:15:42.857

您可以制作 UIButtons 或任何 UIControl 两种方式之一

1.  通过以编程方式
2.  通过 .xib 文件

我认为您在谈论第二种方法。

在第二种方法中，您在课堂上使用 UIButtons：

```
@interface className : UIViewController{ 

  IBOutlet UIButton *buttonName;

} 
```

现在您必须单击 .xib 文件，然后您必须选择响应者下方的文件；在打开连接连接检查器之后。现在您可以将 UIButtons 拖放到 .xib 文件上，并在连接检查器中显示的 UIButton 和 .xib 的 UIBUtton 之间建立链接。

# php - 致命错误：无法在写入上下文中使用函数返回值

> ID：10616396
> 
> 赞同：-1
> 
> 时间：2012-05-16T10:10:22.343
> 
> 标签：php

好的，我正在尝试从注入等中清除我的代码。我收到了这个致命错误：

**致命错误：无法在...中的写入上下文中使用函数返回值**

这是引发错误的行：

```
$val=mysql_real_escape_string($val)=$_SESSION['val']=strip_tags($_POST['val']); 
```

为什么会抛出这个错误？

更新：好的，感谢您的回答，我移至`mysql_real_escape_string($val)`代码的另一部分，这修复了错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T10:12:02.773

您正在为函数分配一个值（返回值**存储**`strip_tags`在 中`$_SESSION['val']`）！我猜你想要这个：

 **```
$val=mysql_real_escape_string($_POST['val']); 
```

关于`strip_tags`在 http 参数上使用，请查看：
[http ://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

还有一点需要注意：

请停止使用古老的 mysql_* 函数编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:13:20.557

您只能为变量赋值。**

# unix - 是否可以动态选择是否生成堆转储？

> ID：10616398
> 
> 赞同：5
> 
> 时间：2012-05-16T10:10:44.297
> 
> 标签：unix, jvm, websphere, signals, heap-dump

我们有一个应用程序部署到在 UNIX 上运行的 WebSphere 服务器上，我们遇到了两个问题：

1.  几分钟后恢复的系统挂起 - 要进行调查，我们将需要线程转储（javacore）。
2.  无法恢复并需要重新启动 WebSphere 的系统挂起 - 为了进行调查，我们将需要线程转储和堆转储。

问题是：当系统挂起时，我们不知道是问题 1 还是问题 2。

理想情况下，我们希望先手动生成线程转储，然后等待系统是否恢复。如果没有，那么我们在重新启动 WebSphere 之前生成线程转储和堆转储。

我知道`kill -3`（或`kill -QUIT`）命令。该命令将仅生成线程转储（如果参数`IBM_HEAPDUMP=false`），或线程转储和堆转储（如果`IBM_HEAPDUMP=true`）。但是，`IBM_HEAPDUMP`必须在 WebSphere 启动之前设置，并且在 WebSphere 运行时不能更改。

`IBM_HEAPDUMP`关于参数和命令，我的理解是否正确`kill -3`？

另外，是否可以按照我描述的方式获取日志？（即在生成 JVM 诊断时，选择是否即时生成堆转储）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:22:58.893

您的理解与我读过的所有内容一致。

[但是，我相信您可以通过使用wsadmin scripting](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/welc6topscripting.html)来完成您想要的。[本文描述了如何](http://www-01.ibm.com/support/docview.wss?uid=swg21384926)在 kill -3 不可用的 Windows 平台上强制执行 javacores 和 heapdumps，但相同的命令可以在任何 WebSphere 系统上运行。

在 wsadmin 或 wsadmin 脚本中，执行：

```
set jvm [$AdminControl completeObjectName type=JVM,process=server1,*]​
$AdminControl invoke $jvm generateHeapDump​
$AdminControl invoke $jvm dumpThreads​ 
```

# mysql - 如何使用来自非 root linux 用户的 Source 安装 MySQL 5.5？

> ID：10616402
> 
> 赞同：5
> 
> 时间：2012-05-16T10:11:05.777
> 
> 标签：mysql, linux

我需要一种通用的方法来从非 root 用户在几乎所有 Linux 操作系统中安装 MySQL 5.5。因此我想从它的源代码安装 MySQL 并将它安装在我需要的任何地方。

真的可以在非root用户家中安装MySQL吗？有人对此有任何想法吗？请务必分享您的专业知识。

**这里的主要限制是，我需要以通用方式从任何非 root 用户安装 MySQL 5.5，并且可能适用于几乎所有 Linux 操作系统。**

任何建议将不胜感激。

谢谢。

**结论** 我已经尝试使用 Ubuntu-11.10，最后我能够从非 root 用户安装 MySQL-5.5，但约束条件是无法从控制台/命令提示符访问 MySQL。由于 mysqld 已启动并运行良好，因此可以通过任何通过 JDBC 连接器连接到 MySQL 的 GUI 工具轻松访问 MySQL。如果您尝试使用从命令提示符访问 mysql

> mysql -u 根目录 -p

命令它给出了分段错误问题。我还从非 Root 用户那里为 Fedora Linux 尝试了另一件事，因为 mysqld 失败并且无论如何都无法访问 mysql :( 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:31:50.207

您应该自定义这三个变量：

```
MYSQL_DATADIR
SYSCONFDIR
CMAKE_INSTALL_PREFIX 
```

例子：

```
$ cd <mysql_src_dir>
$ cmake -i .
    Would you like to see advanced options? [No]:Yes
    Please wait while cmake processes CMakeLists.txt files....
    ...
    Variable Name: CMAKE_INSTALL_PREFIX
    Description: install prefix
    Current Value: /usr/local/mysql
    New Value (Enter to keep current value): /home/user/mysql
    ...
    Variable Name: MYSQL_DATADIR
    Description: default MySQL data directory
    Current Value: /usr/local/mysql/data
    New Value (Enter to keep current value): /home/user/mysql/data
    ...
    Variable Name: SYSCONFDIR
    Description: config directory (for my.cnf)
    Current Value: /usr/local/mysql/etc
    New Value (Enter to keep current value): /home/user/mysql/etc
$ make
$ make install 
```

而不是`cmake -i .`你可以使用`cmake -D MYSQL_DATADIR=/home/user/mysql/data -D SYSCONFDIR=/home/user/mysql/etc -D CMAKE_INSTALL_PREFIX=/home/user/mysql .`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:19:52.077

我想这应该是可能的，但不一定容易做到。您需要从源代码构建并更改 Makefile 以便安装目标指向用户的本地目录；另外，我认为您需要处理 MySQL 中的其他默认配置选项，这些选项也可以从配置文件中更改。最后，只要您不绑定到任何低于 1000 的端口，您就应该能够启动 mysqld（无论如何都是这种情况，因为 MySQL 默认在端口 3306 上运行）。

# c - 多线程启动安排

> ID：10616406
> 
> 赞同：2
> 
> 时间：2012-05-16T10:11:24.337
> 
> 标签：c, linux, multithreading

我有 2 个线程来创建 thread1 和 thread2。创建线程时：

```
pthread_create(&thread1, NULL, &function_th1, NULL);
pthread_create(&thread2, NULL, &function_th2, NULL); 
```

thread2 在 thread1 之前启动，我正在寻找在 thread2 之前启动 thread1 的解决方案。

不寻找此解决方案：

```
pthread_create(&thread2, NULL, &function_th2, NULL);
pthread_create(&thread1, NULL, &function_th1, NULL); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:13:44.940

发出线程创建调用的时间与线程实际开始执行的时间之间没有关系。这一切都取决于实现、操作系统等，这就是为什么您会看到两个线程实际上以看似随机的顺序开始。

如果您需要线程 1 在线程 2 之前启动，您可能对某些事件有一些数据/逻辑依赖性。在这种情况下，您应该使用条件变量来告诉线程 2 何时实际开始执行。

```
// condition variable
pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
// associated mutex
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
// state for condition variable
int shouldWait = 1;

...

void* function_th1(void* p) {
     // execute something

     // signal thread 2 to proceed
     pthread_mutex_lock(&mutex);
     shouldWait = 0;
     pthread_cond_signal(&cond);
     pthread_mutex_unlock(&mutex);

     // other stuff
}

void* function_th2(void* p) {
     // wait for signal from thread 1
     pthread_mutex_lock(&mutex);
     while(shouldWait) {
         pthread_cond_wait(&cond, &mutex);
     }
     pthread_mutex_unlock(&mutex);

     // other stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:56:42.920

移动 'pthread_create(&thread2, NULL, &function_th2, NULL);' 到“function_th1”函数的顶部。

这肯定会达到您的要求，不需要复杂的信号。

您所要求的是否是您真正想要或需要的，是另一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T17:24:11.940

在我建议的解决方案之后

```
#include <pthread.h>
#include <stdio.h>

static pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
static bool wait = TRUE;

void thread_sync() {
  pthread_mutex_lock(&mut);
  wait = FALSE;
  pthread_cond_signal(&cond);
  pthread_mutex_unlock(&mut);
}
void thread_wait_sync() {
  pthread_mutex_lock(&mut);
  if (wait==TRUE)
  {
      pthread_cond_wait(&cond,&mut);
  }
  wait = TRUE;
  pthread_mutex_unlock(&mut);
}

void *thread1(void *d) {
  thread_sync();
  while (1); // Rest of work happens whenever
  return NULL;
}

void *thread2(void *d) {
  thread_sync();
  while (1);
  return NULL;
}

void *thread3(void *d) {
  thread_sync();
  while (1);
  return NULL;
}

void *thread4(void *d) {
  while (1);
  return NULL;
}

int main() {
  pthread_t t1,t2,t3,t4;
  pthread_create(&t1, NULL, thread1, NULL);
  thread_wait_sync();
  pthread_create(&t2, NULL, thread2, NULL);
  thread_wait_sync();
  pthread_create(&t3, NULL, thread3, NULL);
  thread_wait_sync();
  pthread_create(&t4, NULL, thread4, NULL);
  while(1) {
    // some work
  }
} 
```

# asp.net-mvc - ASP.NET MVC 和支付网关

> ID：10616407
> 
> 赞同：0
> 
> 时间：2012-05-16T10:11:24.250
> 
> 标签：asp.net-mvc, payment-gateway

我正在研究酒店预订模块。这是一个 ASP.NET MVC 应用程序。我需要构建与支付网关集成的工作流程。当客户使用有效的借记卡/信用卡在酒店预订设施时，金额必须从他们的卡中冻结，取消时必须收取预订费用并取消预订。任何人都可以推荐一个合适且负担得起的支付网关及其支持我的要求的产品吗？

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:36:36.583

我使用过[Sage Pay Go](http://www.sagepay.com/online-payments)（我相信以前称为 Protx）。我不确定您所说的“阻止”功能，但是您绝对可以进行交易，以查看他们是否有足够的资金而无需实际收费。也许它有你所说的阻塞功能，但我不记得了。

我确实记得它是多么容易使用。它们为 .dll 提供了一个经过深思熟虑的对象模型。与我的网络应用程序集成非常简单。

我当时工作的公司资金紧张，所以不可能太贵。

# iphone - UITableViewCell 背景图片不显示

> ID：10616412
> 
> 赞同：0
> 
> 时间：2012-05-16T10:11:32.473
> 
> 标签：iphone, ios, uitableview, background-image

我正在尝试`UITableViewCell`使用以下代码添加背景图像：

```
UIImage *bgImage=[UIImage imageNamed:@"green-cell-row.png"];
UIImageView *bgForFirst=[[UIImageView alloc] initWithImage:bgImage];
cell.backgroundView=bgForFirst;
[cell.contentView addSubview:venueDisplayImage];
[cell.contentView addSubview:venueDisplayName1];
[cell.contentView addSubview:venueDisplayName2];
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
cell.selectionStyle = UITableViewCellSelectionStyleGray; 
```

但是，我在它周围的空白处得到了场地显示名称。解决此问题并正确添加我的背景图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:14:43.537

您是否尝试更改`backgroundColor`或`venueDisplayName`更改`[UIColor clearColor]`或更改`[UIColor greenColor]`？

出于性能原因，请尽量避免在`UITableViewCell`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:25:06.493

试试这个方法：

1）TabelView 设置背景，如：

```
tblView.backgroundView.alpha = 0.0;
tblView.backgroundColor=[UIColor clearColor]; 
```

2）在tableview的cellForRowAtIndexPath og委托方法中添加图像视图：

```
UIImageView *bckView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0, 300,80)];
cell.backgroundView.alpha = 0.0;
cell.backgroundColor=[UIColor clearColor];
bckView.image = [UIImage imageNamed:@"cell.png"];
bckView.contentMode = UIViewContentModeScaleToFill;
[cell.contentView addSubview:bckView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:45:28.463

您必须使用单元格的属性，您可以使用 2 个属性 1) cell.backgroundColor 2) cell.backgroundView

```
 cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageName:@""]]; 
```

在第二种情况下，您必须将任何视图设置为背景视图

# c++ - 调试客户盒子上生成的核心文件

> ID：10616417
> 
> 赞同：10
> 
> 时间：2012-05-16T10:12:03.190
> 
> 标签：c++, linux, debugging, gdb

我们通过在客户的盒子上运行我们的软件来获取核心文件。不幸的是，因为我们总是在*没有*调试符号的情况下使用 -O2 进行编译，这导致我们无法弄清楚它为什么崩溃的情况，我们已经修改了构建，所以现在它们一起生成 -g 和 -O2。然后我们建议客户运行 -g 二进制文件，以便更容易调试。

我有几个问题：

1.  当核心文件从我们在 Dev 中运行的 Linux 发行版以外的 Linux 发行版生成时会发生什么？堆栈跟踪是否有意义？
2.  有没有关于在 Linux 或 Solaris 上进行调试的好书？面向示例的东西会很棒。我正在寻找现实生活中的示例，以找出例程崩溃的原因以及作者如何得出解决方案。中级到高级水平的东西会很好，因为我已经这样做了一段时间了。一些组装也会很好。

这是一个要求我们告诉客户获取 -g 版本的崩溃示例。二进制文件：

```
Program terminated with signal 11, Segmentation fault.
#0  0xffffe410 in __kernel_vsyscall ()
(gdb) where
#0  0xffffe410 in __kernel_vsyscall ()
#1  0x00454ff1 in select () from /lib/libc.so.6
...
<omitted frames> 
```

理想情况下，我想找出应用程序崩溃的确切原因——我怀疑这是内存损坏，但我不是 100% 确定。

严禁远程调试。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-17T03:28:21.667

> 当核心文件从我们在 Dev 中运行的 Linux 发行版以外的 Linux 发行版生成时会发生什么？堆栈跟踪是否有意义？

如果可执行文件是动态链接的，就像你的一样，GDB 产生的堆栈（很可能）**没有**意义。

原因：GDB 知道您的可执行文件通过`libc.so.6`在 address中调用某些内容而崩溃`0x00454ff1`，但它不知道该地址处的代码是什么。因此，它会查看*您的*副本`libc.so.6`并发现它在 中`select`，因此它会打印它。

但是，在您的*客户*副本中`0x00454ff1`也被选中的机会非常小。客户很可能在那个地址有一些其他的程序，也许。*`libc.so.6``abort`*

 *您可以使用`disas select`, 并观察它`0x00454ff1`在指令中间，或者前面的指令不是`CALL`. 如果其中任何一个成立，您的堆栈跟踪就毫无意义。

但是，您*可以*自助：您只需`(gdb) info shared`要从客户系统中获取列出的所有库的副本。让客户使用例如焦油

```
cd /
tar cvzf to-you.tar.gz lib/libc.so.6 lib/ld-linux.so.2 ... 
```

然后，在您的系统上：

```
mkdir /tmp/from-customer
tar xzf to-you.tar.gz -C /tmp/from-customer
gdb /path/to/binary
(gdb) set solib-absolute-prefix /tmp/from-customer
(gdb) core core  # Note: very important to set solib-... before loading core
(gdb) where      # Get meaningful stack trace! 
```

> 然后我们建议客户运行 -g 二进制文件，以便更容易调试。

一个*更好*的方法是：

*   建立与`-g -O2 -o myexe.dbg`
*   `strip -g myexe.dbg -o myexe`
*   分`myexe`发给客户
*   当客户得到一个`core`，`myexe.dbg`用来调试它

您将获得完整的符号信息（文件/行、局部变量），而无需向客户发送特殊的二进制文件，也无需透露有关您的来源的太多细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:22:34.680

您确实可以从故障转储中获得有用的信息，甚至是从优化编译中获得的信息（尽管从技术上讲，这就是所谓的“屁股的主要痛苦”。）`-g`编译确实更好，是的，您甚至可以这样做当发生转储的机器是另一个发行版时。基本上，需要注意的是，所有重要信息都包含在可执行文件中，并最终出现在转储中。

当您将核心文件与可执行文件匹配时，调试器将能够告诉您崩溃发生的位置并显示堆栈。这本身应该有很大帮助。您还应该尽可能多地了解它发生的情况——他们能可靠地重现它吗？如果是这样，你能重现它吗？

现在，这里有一个警告：“一切都在那里”的概念被打破的地方是共享对象文件，`.so`文件。如果由于这些问题而失败，您将没有所需的符号表；您可能只能看到`.so`它发生在哪个库中。

有很多关于调试的书籍，但我想不出我会推荐的一本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:16:53.837

据我记得，您不需要要求您的客户使用使用 -g 选项构建的二进制文件运行。需要的是你应该有一个带有 -g 选项的构建。有了它，您可以加载核心文件，它将显示整个堆栈跟踪。我记得几周前，我创建了核心文件，带有 build (-g) 和没有 -g，核心的大小是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:47:04.103

检查您在堆栈中看到的局部变量的值？特别是在 select() 调用周围。在客户的盒子上执行此操作，只需加载转储并遍历堆栈...

此外，检查您的 DEV 和 PROD 平台上的 FD_SETSIZE 的值！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-22T04:39:45.207

从[我的问题](https://stackoverflow.com/questions/69189241/analyze-linux-core-dump-on-different-machine-threads-and-shared-libs)中复制解决方案，该问题被认为与此问题重复。

`set solib-absolute-prefix`接受的解决方案对我没有帮助。`set sysroot`使 gdb 加载本地提供的库是绝对必要的。这是我用来打开核心转储的命令列表：

```
# note: all the .so files obtained from user machine must be put into local directory.
#
# most importantly, the following files are necessary:
#   1\. libthread_db.so.1 and libpthread.so.0: required for thread debugging.
#   2\. other .so files are required if they occur in call stack.
#
# these files must also be renamed exactly as the symlinks
# i.e. libpthread-2.28.so should be renamed to libpthread.so.0

# load executable file
file ./thedarkmod.x64

# force gdb to forget about local system!
# load all .so files using local directory as root
set sysroot .

# drop dump-recorded paths to .so files
# i.e. load ./libpthread.so.0 instead of ./lib/x86_64-linux-gnu/libpthread.so.0
set solib-search-path .
# disable damn security protection
set auto-load safe-path /

# load core dump file
core core.6487

# print stacktrace
bt 
```*

# grails - 编辑插件的标签库。然后如何将它提交给svn？

> ID：10616418
> 
> 赞同：0
> 
> 时间：2012-05-16T10:12:06.780
> 
> 标签：grails, plugins, commit, taglib

我在插件的标签库中需要进行更改。本地系统现在显示我需要的更改。但是，如果我想托管它怎么办。我想承诺。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:15:47.333

您可以将插件发布到您自己的 Maven 兼容存储库中，请参阅[http://grails-plugins.github.com/grails-release/docs/guide/plugins.html#custom](http://grails-plugins.github.com/grails-release/docs/guide/plugins.html#custom)

# css - 从图像表中读取图像

> ID：10616419
> 
> 赞同：0
> 
> 时间：2012-05-16T10:12:08.710
> 
> 标签：css

我有一张像此链接（http://jquerytools.org/media/img/demo-navi.jpg）中的图像表。

我只想获得该图像的一部分。

我们如何才能在 CSS 中只获取图像的组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:14:56.647

正确的术语是[CSS Sprite](http://css-tricks.com/css-sprites/)。

您可以使用背景定位来实现这一点：

```
div
{
    background-image:url('http://jquerytools.org/media/img/demo-navi.jpg');
    background-position:-20px 80px;
    width:100px;
    height:80px;
}​​​ 
```

[http://jsfiddle.net/Lz46r/](http://jsfiddle.net/Lz46r/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:15:29.957

你可以试试这个：[http ://www.guistuff.com/css/css_imagetech1.html](http://www.guistuff.com/css/css_imagetech1.html)

## 裁剪 X 和 Y

第一张图片有点像垒球。所有酷孩子都知道如何利用在两个轴上裁剪图像。这样做有几个原因： 例如，您可能有不同大小的图像并希望将所有图像放在一个文件中。如果您只在一个轴上裁剪，您将保存一个文件，该文件具有您要使用的图像数组的最大可能宽度或高度。此外，您可能希望在 PNG 文件格式中利用一些压缩元素，例如将具有相同背景颜色的图像保留在同一水平行中，然后具有几行。不管是什么原因，这实际上并没有比我们迄今为止所看到的更多。这是另一个示例图像：

![图标](../Images/1e96bc3c6cfe7f6846f3e9f5f7613d38.png)

```
.icons 
{ 
display: block; 
width: 40px; 
height: 40px; 
background-image: url(images/sixicons.png); 
background-repeat: no-repeat; 
} 
```

从这个类可以推导出每个图标的宽高都是40像素，图片文件名是sixicons.png。这次我没有为 X/Y 裁剪创建一个非常具有挑战性的示例，因为所有子图像的大小都相同。然而，正如您将看到的，即使它们不是，您仍然会使用类似（尽管不精确）的技术。

首先，让我们裁剪左上角的图标：

```
.icon_1 { background-position: 0px 0px; } 
```

标记将是：

```
<span class="icons icon_1"></span> 
```

那当然是最简单的。现在假设我们想要中间底部的图标：

```
.icon_5 { background-position: -40px -40px; } 
```

让我们看看所有图标的 CSS：

```
.icon_1 { background-position: 0px 0px; } 
.icon_2 { background-position: -40px 0px; } 
.icon_3 { background-position: -80px 0px; } 
.icon_4 { background-position: 0px -40px; } 
.icon_5 { background-position: -40px -40px; } 
.icon_6 { background-position: -80px -40px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:21:17.417

这应该做你需要的：

[http://jsfiddle.net/8Eucw/1/](http://jsfiddle.net/8Eucw/1/)

**CSS：**

```
#aBit {
 background-image: url('http://www.google.co.uk/images/nav_logo107.png');
 background-position-x: 114px;
 background-position-y: 63px;
 width: 18px;
 height: 18px;   
}​ 
```

**HTML：**

```
<img src="http://www.google.co.uk/images/nav_logo107.png" /><br />
<hr />
<img id="aBit" />​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:15:18.827

您需要使用[CSS Sprites](http://css-tricks.com/css-sprites/)。[这里](http://stylishwebdesigner.com/21-must-see-css-sprites-tutorials/)有一些非常简单的教程。

# iphone - 如何将录音文件保存在iphone中

> ID：10616423
> 
> 赞同：0
> 
> 时间：2012-05-16T10:12:16.700
> 
> 标签：iphone

我已经在 iphone 中实现了录音功能，但是在保存录音文件时遇到了问题，并且在检索录音文件时遇到了问题。

这是我的源代码

```
-(void)Record
{

delayTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                      target:self
                                                    selector:@selector(delayTimerFired:)
                                                    userInfo:nil
                                                     repeats:YES];
        //toggle = NO;
        NSMutableDictionary *rs = [[NSMutableDictionary alloc] init];
        [rs setValue:[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
        [rs setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [rs setValue:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        recordedTmpFile = [[NSURL alloc] initFileURLWithPath:[NSString stringWithFormat:@"%@/Record.caf", documentsDirectory]];

        NSLog(@"%@", recordedTmpFile);

        recorder = [[AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:rs error:&error];
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        [recorder record];
} 
```

和检索代码是

```
-(void)RetriveRecordFile
{
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];

    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *contents = [fm contentsOfDirectoryAtPath:docDir error:nil];
    NSLog(@"*******%@", contents);
    NSString *fileFormat = @"caf";

    NSMutableArray *lRecord = [[NSMutableArray alloc] init];
    NSString *lRecordFile;
    for (lRecordFile in contents)
    {
        if ([[lRecordFile pathExtension] isEqualToString:fileFormat])
        {
            NSLog(@"%@", lRecordFile);
            [lRecord addObject:lRecordFile];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:31:24.600

这是用于录制音频并单击停止按钮录音机停止并存储音频文件的代码。

```
-(IBAction)startRecording
{ 
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd"];

NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"HH.mm.SS"];

NSDate *now = [[NSDate alloc] init];

theDate = [dateFormat stringFromDate:now];
theTime = [timeFormat stringFromDate:now];

NSString *filename =[NSString stringWithFormat:@"|%@|%@|",theDate,theTime];
theDate=[[NSString alloc]initWithString:filename];

[dateFormat release];
[timeFormat release];
[now release];

AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryRecord error:nil];

NSMutableDictionary *recordSettings = [[NSMutableDictionary alloc] initWithCapacity:10];
if(recordEncoding == ENC_PCM4)
{
    [recordSettings setObject:[NSNumber numberWithInt: kAudioFormatLinearPCM] forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSettings setObject:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSettings setObject:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];   

}
else
{
    NSNumber *formatObject;
    switch (recordEncoding) 
    {
        case (ENC_AAC4): 
            formatObject = [NSNumber numberWithInt: kAudioFormatMPEG4AAC];
            break;
        case (ENC_ALAC4):
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleLossless];
            break;
        case (ENC_IMA44):
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
            break;
        case (ENC_ILBC4):
            formatObject = [NSNumber numberWithInt: kAudioFormatiLBC];
            break;
        case (ENC_ULAW4):
            formatObject = [NSNumber numberWithInt: kAudioFormatULaw];
            break;
        default:
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
    }
    [recordSettings setObject:formatObject forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSettings setObject:[NSNumber numberWithInt: AVAudioQualityHigh] forKey: AVEncoderAudioQualityKey];
}
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Recording"];
if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil]; 
NSString *filePath =[NSString stringWithFormat:@"%@/%@.caf",dataPath,theDate];

NSURL *url = [NSURL fileURLWithPath:filePath];
app.audiofilepath=filePath;
NSError *error = nil;
audioRecorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSettings error:&error];
if ([audioRecorder prepareToRecord] == YES)
{
    [audioRecorder record];
}
else 
{
    int errorCode = CFSwapInt32HostToBig ([error code]); 
    NSLog(@"Error: %@ [%4.4s])" , [error localizedDescription], (char*)&errorCode); 
 }
}
-(IBAction)stopRecording
{
 [audioRecorder stop];
recordEncoding=1;
[recdelegate viewpic:self didSelectValue:theDate didSelectEvent:@"STOP"];
 } 
```

----检索音频---

```
 -(IBAction)playRecording
 {
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

    // NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *filename=theDate;
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Recording"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil]; 
    NSString *filePath =[NSString stringWithFormat:@"%@/%@.caf",dataPath,filename];

    NSURL *url = [NSURL fileURLWithPath:filePath];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;
    [audioPlayer play];
  } 
```

# jquery - Jquery Drag 界面，如 http://filippasmedhagensund.com/

> ID：10616425
> 
> 赞同：1
> 
> 时间：2012-05-16T10:12:46.390
> 
> 标签：jquery, navigation, drag, user-experience

我们正在建立一个具有以下特点的网站：http: [//filippasmedhagensund.com/](http://filippasmedhagensund.com/)

我们希望拥有 100% 宽度和 100% 高度的响应式“屏幕”和拖动/滑动导航。

任何人都可以指出我们使用 JQuery 开发它的正确方向吗？有现成的解决方案吗？

谢谢。

# iphone - 使用图形 API 从 Facebook 获取用户信息

> ID：10616426
> 
> 赞同：6
> 
> 时间：2012-05-16T10:12:51.083
> 
> 标签：iphone, facebook, facebook-graph-api, fbconnect, facebook-ios-sdk

我想从 Facebook 获取基本用户信息，但在以下代码中遇到了一些问题

```
-(void)checkForAccessToken:(NSString *)urlString {
    NSError *error;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"access_token=(.*)&" options:0 error:&error];
    if (regex != nil) {
        **NSTextCheckingResult *firstMatch = [regex firstMatchInString:urlString options:0 range:NSMakeRange(0, [urlString length])];
        if (firstMatch) {
            NSRange accessTokenRange = [firstMatch rangeAtIndex:1];
            NSString *accessToken = [urlString substringWithRange:accessTokenRange];
            accessToken = [accessToken stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
            [_delegate accessTokenFound:accessToken];               
        }**
    }
} 
```

在 firstMatch 我得到 NULL 这就是为什么 [_delegate accessTokenFound:accessToken]; 这个方法不会被调用。

谁能帮助我，以便我能够从 Facebook 获取用户信息

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:43:46.260

使用应用程序 ID 和凭据初始化后调用 fbdid 登录方法。-

```
(void)fbDidLogin {

NSLog(@"fbDidLogin");
isFacebookLoaded=YES;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];
NSLog(@"i am in and my acees token is %@ %@ and call me.CALLshowAloadingView",[facebook accessToken],[facebook expirationDate]) ;
[self.facebook requestWithGraphPath:@"me" andDelegate:self];
if ( [delegate respondsToSelector:@selector(showAloadingView)] ) 
{
    NSLog(@" CALLshowAloadingView");
    // calling delegate method. For this method to function, the delegate should be implemented in the calling class.
    [delegate showAloadingView];                
}

// Inform the delegate that Login is successful
if ( [delegate respondsToSelector:@selector(loginStatus:)] ) {
    // calling delegate method. For this method to function, the delegate should be implemented in the calling class.
    [delegate loginStatus:YES];                 
    return;
} 
```

}

# php - Zend 模型类 - 选择被声明为静态方法的查询

> ID：10616431
> 
> 赞同：0
> 
> 时间：2012-05-16T10:13:09.773
> 
> 标签：php, zend-framework, static, zend-db, static-methods

我正在查看我继承的一些代码。在所有模型类中——任何执行“选择”查询的方法都被声明为静态，而“插入”、“更新”、“删除”在同一个模型类中未声明为静态。

例如

```
require_once 'Zend/Db/Table/Abstract.php';

类 Model_Course 扩展 Zend_Db_Table_Abstract {

受保护的 $_name = '课程';
公共静态函数 getCoursesByFaculty($faculty_id)
{
   $courseModel = 新的自我（）；
   $select = $courseModel->select();
   $select->setIntegrityCheck(假);
   $select->from('course', 'course.*');
   $select->joinLeft('course_faculty', 'course.course_id = course_faculty.course_id');
   $select->order(array('title'));
   $select->where('faculty_id = '.$faculty_id);
   返回 $courseModel->fetchAll($select);
}
}

```

将这些方法声明为 static 是否有任何充分的理由/优势？

感谢您的输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:21:34.797

我认为没有任何优势，而不是像 Modelclass::function() 那样轻松调用它顺便说一句，我找到了一些调整代码的方法

```
require_once 'Zend/Db/Table/Abstract.php'; /*Actually this require is not required if you configure your includePaths correctly*/

class Model_Course extends Zend_Db_Table_Abstract {

protected $_name = 'course';
public static function getCoursesByFaculty($faculty_id)
{

   $select = $this->select();
   $select->setIntegrityCheck(false);
   $select->from($this, 'course.*');
          ->joinLeft('course_faculty', 'course.course_id = course_faculty.course_id');
          ->order(array('title'));
          ->where('faculty_id = ?',$faculty_id);
   $rows = $this->fetchAll($select);
return (!empty($rows)) ? $rows : null;

} 
```

# javascript - Javascript 当我们在 Chrome 中选择停留在页面时如何调用函数

> ID：10616437
> 
> 赞同：12
> 
> 时间：2012-05-16T10:13:33.677
> 
> 标签：javascript, jquery, html

请在 Chrome 浏览器中检查我的代码，如果您点击刷新，系统会提示您提供 2 个选项。

> 1.  离开此页面并
> 2.  保持此页上

当我点击**2\. Stay on this page**按钮时，它必须激活我的自定义函数***displayMsg()***

任何人都可以为我提供解决方案吗？

```
<script type="text/javascript">
function displayMsg() {
    alert('my text..');
}
</script>
<script type="text/javascript">
window.onbeforeunload = function(evt) {
  var message = 'Please Stay on this page and we will show you a secret text.';
  if (typeof evt == 'undefined') {
      evt = window.event;
  }       
  if (evt) {
      evt.returnValue = message;
      return message;
  }
  trace(evt);
} 
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T12:43:04.990

使用计时器来监听变化变量：

```
var vals=0;
function displayMsg() {
    alert('my text..');
}
window.onbeforeunload = function evens(evt) {
var message = 'Please Stay on this page and we will show you a secret text.';
  if (typeof evt == 'undefined') {
      evt = window.event;
  }       
    timedCount();
    vals++;
  if (evt) {
      evt.returnValue = message ;
      return message ;
  }
  trace(evt);
} 

function timedCount()
{
t=setTimeout("timedCount()",100);
if(vals>0)
{
    displayMsg();
    clearTimeout(t);
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T10:56:01.937

您可以结合使用`onbeforeunload`和`onunload`事件，在前者中设置计时器并在后者中清除它：

```
var showMsgTimer;

window.onbeforeunload = function(evt) {
    var message = 'Please Stay on this page and we will show you a secret text.';
    showMsgTimer = window.setTimeout(showMessage, 500);

    evt = evt || window.evt;
    evt.returnValue = message;

    return message;
}

window.onunload = function () {
    clearTimeout(showMsgTimer);
}

function showMessage() {
    alert("You've been trolled!");
} 
```

这是有效的，因为`onunload`当用户选择留在页面上时，该事件永远不会触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T06:55:23.573

请使用这些代码行，它可以正常工作。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
    <script type="text/javascript">
    $(function(){
    $(window).bind('beforeunload', function(){
      return 'Your Data will be lost :(';
     });
    });
    </script> 
```

# css - 如何自定义bootstrap的header

> ID：10616444
> 
> 赞同：1
> 
> 时间：2012-05-16T10:13:45.583
> 
> 标签：css, twitter-bootstrap

我正在为我的网站使用引导程序，我认为黑色标题不好，字体太小。如何自定义引导程序的标题？有什么例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:35:31.617

最好只覆盖类/ID。

先声明引导程序，然后声明你自己的 css

```
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/mystyle.css" rel="stylesheet"> 
```

在您的 mystyle.css 中，您可以：

```
header,.header,#header{
  background: red;
  color: white;
  font-size: 15px;
} 
```

# java - 我怎样才能让线程休眠一段时间然后重新开始工作？

> ID：10616445
> 
> 赞同：2
> 
> 时间：2012-05-16T10:13:46.523
> 
> 标签：java, multithreading, thread-sleep

我有以下代码：

```
public void run() 
{
     try 
     {
         logger.info("Looking for new tasks to fetch...  ");
         // definitions ..

         for(Task t: tasks)
         {
             logger.info(" Task " + t.getId() + " is being fetched ");
            // processing ... fetching task info from db using some methods
         }
         Thread.sleep(FREQUENCY);
         //t.start();
     } catch (Exception e) 
     {
         logger.info("FetcherThread interrupted: "+e.getMessage());
     }
} 
```

我正在尝试使线程在特定时间“FREQUENCY”休眠，然后再次工作。当我在eclipse中执行这段代码时，线程只工作一次，然后什么也没有发生，进程终止。如果我从语句中删除注释：`t.start()`，我会得到“FetcherThread 中断：null”。谁能告诉我哪里出错了？

注意：我希望线程一直在工作，但会在一段时间内获取（比如每 5 分钟一次）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:17:26.350

您在该代码中缺少任何类型的循环。

似乎线程实际上正在执行您告诉它执行的操作：它运行所有任务，然后休眠一段时间 - 然后它没有更多工作要做，因此退出。有几种方法可以解决这个问题，按照复杂性和正确性的升序排列：

1.  解决这个问题的简单（和天真的）方法是将 try-catch 块包装在无限循环中（`while(true) { ... }`）。这样在线程完成睡眠后，它会循环回到顶部并再次处理所有任务。

2.  然而这并不理想，因为基本上不可能停止线程。更好的方法是声明一个布尔字段（例如`boolean running = true;`），并将循环更改为`while(running)`. 这样，您就有了一种使线程终止的方法（例如，公开一个设置`running`为. 的方法`false`。）请参阅 Sun 的[Why is Thread.stop() deprecated](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)文章以获得对此的详细说明。

3.  再往后退一步，你可能试图在太低的水平上做到这一点。睡觉和安排时间并不是**你**工作的一部分`Runnable`。我会采用的实际解决方案是去掉睡眠，这样你就有一个 Runnable 实现来处理所有任务然后终止。然后我会创建一个[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)，并将可运行的“vanilla”提交给执行器——这样执行器的工作就是定期运行任务。

从工程的角度来看，最后一个解决方案是理想的。您有一个只运行一次作业并退出的类 - 只要您想运行作业，就可以在其他上下文中使用它，并且组合得很好。您有一个执行器服务，其工作是调度任意任务 - 同样，您可以在未来将不同类型的`Runnable`or传递`Callable`给它，它也会执行调度位。可能最好的部分是，您不必自己编写任何调度内容，而是可以使用标准库中的一个专门为您完成这一切的类（因此很可能有大部分与本土并发代码不同，错误已经解决）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:21:08.757

任务调度在 Java 中具有一流的支持，不要重新发明它。实际上，有**两种**实现方式：`Timer`（old-school）和`ScheduledExecutorService`（new）。阅读它们并围绕它们设计您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:16:49.260

尝试在不同的线程上执行任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:16:52.703

您需要将睡眠置于无限循环中（或在某些条件下指定您想要睡眠的时间）。到目前为止，在 run 方法结束时调用了 sleep 方法，并且您观察到的行为是正确的。以下演示代码将在休眠一秒钟后在控制台上打印“Sleep”。希望能帮助到你。

```
import java.util.concurrent.TimeUnit;

public class Test implements Runnable {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Test t = new Test();
        Thread thread = new Thread(t);
        thread.start();
    }

    public void run() {
        try {
            // logger.info("Looking for new tasks to fetch...  ");
            // definitions ..

            // for(Task t: tasks)
            // {
            // logger.info(" Task " + t.getId() + " is being fetched ");
            // // processing ... fetching task info from db using some methods
            // }
            while (true) { // your condition here
                TimeUnit.SECONDS.sleep(1);
                System.out.println("Sleep");
            }

            // t.start();
        } catch (Exception e) {
            // logger.info("FetcherThread interrupted: "+e.getMessage());
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T10:17:43.510

您需要某种循环来重复您的工作流程。控制流如何返回到获取部分？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T10:17:50.940

您可以将代码放入循环中。（可能是while）

```
while(condition) // you can make it while(true) if you want it to run infinitely.
{
      for(Task t: tasks)
     {
         logger.info(" Task " + t.getId() + " is being fetched ");
        // processing ... fetching task info from db using some methods
     }
     Thread.sleep(FREQUENCY);
} 
```

在您的情况下发生了什么，它运行任务循环然后休眠一段时间并退出线程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T10:20:05.047

正如其他人在这里提到的那样，将线程置于循环中。

我想补充一点，多次调用 Thread.start 是非法的，这就是你得到异常的原因。

如果您想生成多个线程，请为每个要启动的线程创建一个 Thread 对象。

见[http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#start](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#start) ()

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-16T10:20:05.883

```
public void run() 
{
    while (keepRunning) {
        try 
        {
            logger.info("Looking for new tasks to fetch...  ");
            // definitions ..

            for(Task t: tasks)
            {
                logger.info(" Task " + t.getId() + " is being fetched ");
                // processing ... fetching task info from db using some methods
                t.start();
            }
            Thread.sleep(FREQUENCY);

        } catch (Exception e) {
            keepRunning = false;
            logger.info("FetcherThread interrupted: "+e.getMessage());
        }  
    }
} 
```

将成员调用 keepRunning 添加到您的主线程并实现一个访问器方法以将其设置为 false （从您需要停止线程执行任务的任何地方）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-16T10:22:25.243

你可以试试`ScheduledExecutorService`（[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)）。而我们是`scheduleAtFixedRate`，其中：

> 创建并执行一个周期性动作，该动作在给定的初始延迟后首先启用，随后在给定的周期内启用；也就是说，执行将在 initialDelay 之后开始，然后是 initialDelay+period，然后是 initialDelay + 2 * period，依此类推。

# sql - 根据星期几在两个日期之间生成每周范围

> ID：10616454
> 
> 赞同：1
> 
> 时间：2012-05-16T10:14:27.613
> 
> 标签：sql, postgresql, date-range, dayofweek

我正在寻找一种解决方案，我可以在两个日期生成每周范围，其中每周范围将基于星期几。
例子：

```
date1 = 2011-12-17 date2 = 2012-05-16 
```

结果：

```
week1 2011-12-17 to 2011-12-17 -- since it the first date false on a saturday
week2 2011-12-18 to 2011-12-24
...
last week 2012-05-13 to 2012-05-16 
```

我已经在 PostgreSQL 中编写了我的 SQL：

```
SELECT
    time_series.cur
    ,case (6 - date_part('dow', cur)::int) = 0
    when true then cur
       else case time_series.cur + (6 - date_part('dow',cur)::int) < current_date
          when true then time_series.cur + (6 - date_part('dow', cur)::int)
          else current_date
          end
       end
    as nxt
FROM
    (select generate_series(current_date - 151
                          , current_date, '1 day')::date AS cur) time_series
where cur < current_date
and   case (current_date - 151 != cur and cur != current_date)
         when true then date_part('dow', cur)::int = 0
         else true
       end 
```

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:41:14.117

这似乎更干净（而且更快）：

```
WITH x AS (
    SELECT '2011-12-17'::date AS my_start
         , '2012-05-16'::date As my_end
    )
SELECT GREATEST(d1, my_start) AS d1
      ,LEAST(d1 + 6, my_end)  AS d2
FROM  (
    SELECT generate_series(date_trunc('week', my_start + 1)
                         , date_trunc('week', my_end + 1)
                         , '1 week')::date - 1 AS d1
    FROM x
    ) d, x 
```

就像我在[回答您之前的问题](https://stackoverflow.com/a/10597845/939860)时所解释的那样，只是这一次是从星期日到星期六。

# spring - 服务器端MVC+客户端MVC

> ID：10616455
> 
> 赞同：10
> 
> 时间：2012-05-16T10:14:29.157
> 
> 标签：spring, model-view-controller, backbone.js

一个应用程序既是 JS 密集型的，又具有复杂的业务逻辑 + 庞大的数据流，它使用主干JS 来构造 JavaScript 代码，并且还需要服务器端 MVC（在这种情况下为 Spring）。

1.  将服务器端 MVC（spring）与客户端 MVC（骨干网）一起实现是一个好主意，它们之间是否存在任何兼容性问题？
2.  如果两者都可以实现。我将如何协调弹簧视图与主干视图。
3.  带有模板引擎的客户端 MVC 将如何与 Spring 的“视图”协作。

虽然这个问题以前被问过，但我找不到合适的答案。有人可以帮我详细解答吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T12:59:23.140

Backbone.js 主要用于 SPA（单页应用程序）。您的backbone.js 段（“视图”）由获取或更改的数据呈现和重新呈现。如果您的应用程序将是 javascript 密集型的，那么主干是一个极好的最小框架，它将帮助您组织您的应用程序。但是，当您的 javascript 应用程序变得非常大时，主干就不那么简单了。您必须对 javascript 的基础知识有透彻的了解，并有一个编程决定的模式。否则即使使用了backbone.js，你的应用程序也会变得一团糟。

反正我跑题了。将您的客户端应用程序（backbone.js 驱动）与您的服务器端应用程序（MVC 驱动）完全分开。您的服务器应用程序需要的所有客户端应用程序就是数据。这就是为什么backbone.js 是围绕REST API 构建的。如果您正在寻找开发大型 javascript 应用程序，我会考虑将 MVC 4 的 Web API 用于您的 REST API，并使用主干.js 来帮助组织和标准化您的客户端应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T14:44:47.840

本文介绍如何在尊重 MVC 模式的情况下，使用服务器端 MVC 和 JS MVC 制作应用程序架构。 [http://blog.javascriptmvc.com/?p=68](http://blog.javascriptmvc.com/?p=68)

# jquery - 如何在页面之间导航时显示“加载”对话框？

> ID：10616456
> 
> 赞同：2
> 
> 时间：2012-05-16T10:14:29.943
> 
> 标签：jquery, blackberry, cordova

所以，我的 phonegap 应用程序必须在 OS 5 的黑莓上工作。这在应用程序的开发过程中带来了很多问题。最初，我有 jquery-mobile，然后，由于黑莓无法处理它（糟糕的转换，很长的加载时间，随机出现内存不足错误）我决定保留应用程序的逻辑并取出 jquery mobile，重新创建html中的接口。这很有效，事实上，该应用程序在 BBOS 6 和 android 中运行良好。在 BB5 中，应用程序运行良好，但有时加载时间有点长。

该应用程序被拆分为 4 个不同的 .html 文件，其中一些包含用于使用 ajax 调用动态加载数据的选项卡。**ajax 调用工作正常**，需要 2-4 秒才能显示内容。然而，页面之间的转换需要很长时间：15-20 秒。我想做的是**在从一个页面导航到另一个页面时**显示某种“正在加载...”消息，以便用户知道该应用程序运行良好并且只需要一些时间。

Blackberry 并不总是将光标图像更改为时钟，因此只有一个黑页让用户等待一段时间。有没有办法在页面之间导航时通知内容正在加载给用户？

我知道这可以通过 ajax 调用来加载内容，但是将应用程序拆分到不同的页面可以降低应用程序的重量，以便它在 BB OS5 上运行。

对此有何建议？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-07T05:02:56.143

我知道这是一篇旧帖子，但是我一直在寻找解决方案，我发现这效果最好

```
<script type="text/javascript">
   window.addEventListener("beforeunload", function (event) {
         showLoader(); //opens up a bootstrap modal with some animating loader icon
    });
</script> 
```

根据[W3Schools](https://www.w3schools.com/jsref/event_onbeforeunload.asp)的说法，这适用于所有现代浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:50:45.307

没有标准的做法。但有办法解决，我很久以前就做过。

单击导航链接时，您只需打开一个小弹出窗口，显示“正在加载，请稍候”，然后导航到单击的链接。当目标页面完全加载时，编写一些脚本来卸载弹出窗口。

# php - MySQL/PDO：根据参数选择不同的列

> ID：10616458
> 
> 赞同：0
> 
> 时间：2012-05-16T10:14:35.487
> 
> 标签：php, mysql, pdo

我有一个 MySQL 查询，需要根据传递给它的参数进行更改。听起来很简单，对吧？问题是，如果参数为“0”，我需要它来获取所有记录。

我怎样才能做到这一点？

这是我到目前为止所拥有的。

```
public function getLatestWork($numberOfSlides, $type = 0) {

    $params = array();
    $params["numberOfSlides"] = $numberOfSlides;
    $params["type"] = $type;

    $STH = $this->_db->prepare("SELECT slideID 
        FROM slides
        WHERE visible = 'true'
            AND type = :type
        ORDER BY order
        LIMIT :numberOfSlides;");

    $STH->execute($params);

    $result = $STH->fetchAll(PDO::FETCH_COLUMN);

    return $result;        
} 
```

**更新**： $numberOfSlides 与问题无关。它总是会返回一定数量的结果。*这都是关于`$type`：*如果它设置为“0”（默认值），那么它基本上会忽略 WHERE 语句的那一部分。如果它设置为“1”或“2”等，那么它只提取该类型的记录。

显然，我可以根据 $type 的值更改 $STH 的值，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:18:15.193

我会使用[`nullif`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_nullif)和[`ifnull`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)功能：

```
SELECT slideID 
FROM slides
WHERE visible = 'true'
    AND ifnull(nullif(:type, 0), type) = type
ORDER BY "order"
LIMIT :numberOfSlides; 
```

如果`:type`是`0`然后`nullif`返回`null`，如果`nullif`返回`null` `ifnull`从`type`列返回值，所以如果你传递`:type = 0` 结果将是`type = type`- 表示“所有行”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:56:17.703

```
public function getLatestWork($numberOfSlides, $type = 0) {
    $params = array();
    $params["numberOfSlides"] = $numberOfSlides;
    $params["type"] = $type;

    $STH = $this->_db->prepare("SELECT slideIDFROM slides WHERE visible = 'true' "
               . ($type > 0 ? "AND type = :type" : "") 
               . " ORDER BY order LIMIT :numberOfSlides;");

    $STH->execute($params);

    $result = $STH->fetchAll(PDO::FETCH_COLUMN);

    return $result;        
} 
```

# emacs - 合并组织模式表中的单元格

> ID：10616460
> 
> 赞同：59
> 
> 时间：2012-05-16T10:14:39.507
> 
> 标签：emacs, cell, org-mode

是否可以合并 Org 模式表中的单元格？

水平合并的例子是这样的：

```
| Header | Merged header |
|--------+-------+-------|
| Text1  | Text2 | Text3 |
| Text4  | Text5 | Text6 | 
```

垂直合并示例：

```
| Header1 | Header2 | Header3 |
|---------+---------+---------|
| Merged  | Text1   | Text2   |
| text    |---------+---------|
| here    | Text3   | Text4   | 
```

如果这在组织模式下是可能的？如果不是，模拟合并单元格的最惯用方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T12:41:06.820

组织模式表是不可能的。但是，请查看[table.el](http://table.sourceforge.net/)包（包含在 emacs 中一段时间​​，因此请尝试：Ch d table）。Org-mode 对该库中的表有一些支持，例如在导出时，但不要期望完全兼容。

至于模拟合并单元格，这取决于你想要什么。在同一单元格中内联文本字符串可能足以用于计算/发布，但不适用于可视化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-10T16:09:12.880

我刚刚从[emacs-orgmode 邮件列表](https://lists.gnu.org/archive/html/emacs-orgmode/2010-08/msg00882.html)中找到了一个对我来说很好用的示例。

```
+---+-----+-----------+
|   | A   | B         |
+---+-----+-----+-----+
| 1 | A1  | B1  | C1  |
|   |     +-----+-----+
|   | A1b | B1b | C1b |
+---+-----+-----+-----+
| 2 | A2  |   B2 C2   |
|   +-----+           |
|   | A2b |  B2b C2b  |
+---+-----+-----------+ 
```

如果你像下面这样修改你的表格，它也可以工作。

```
+---------+---------+---------+
| Header1 | Header2 | Header3 |
+---------+---------+---------+
| Merged  | Text1   | Text2   |
| text    +---------+---------+
| here    | Text3   | Text4   |
+---------+---------+---------+ 
```

所以我找到了一些提示：

*   用于`|`展开行

*   用于`+-..-+`包围拆分行

* * *

这是另一个不太方便的替代选择。您可以使用[引用 HTML 标记](https://www.gnu.org/software/emacs/manual/html_node/org/Quoting-HTML-tags.html#Quoting-HTML-tags)来处理 HTML 表格导出。

```
#+BEGIN_EXPORT html
<TABLE BORDER="1">
  <TR>
    <TH>Header1</TH>
    <TH>Header2</TH>
    <TH>Header3</TH>
  </TR>
  <TR>
    <TD ROWSPAN="2">Merged text here</TD>
    <TD>Text1</TD>
    <TD>Text2</TD>
  </TR>
  <TR>
    <TD>Text3</TD>
    <TD>Text4</TD>
  </TR>
</TABLE>
#+END_EXPORT 
```

此 synatx 仅在导出为 html 时有效。如果要将表格导出为 pdf，则应使用以下语法。您可以使用[LaTeX Tables Generator](https://www.tablesgenerator.com/)在线生成乳胶表。

```
#+BEGIN_EXPORT latex
% Please add the following required packages to your document preamble:
% \usepackage{multirow}
\begin{table}[]
\begin{tabular}{lll}
Header1                           & Header2 & Header3 \\
\multirow{2}{*}{Merged text here} & Text1   & Text2   \\
                                  & Text3   & Text4  
\end{tabular}
\end{table}
#+END_EXPORT 
```

[org export](https://orgmode.org/manual/Exporting.html)中有很多后端，如果要导出到这些后端，可能需要编写自定义代码到这些后端。

# java - 在 SmartGWT 中创建具有小部件的表单

> ID：10616464
> 
> 赞同：1
> 
> 时间：2012-05-16T10:15:01.787
> 
> 标签：java, gwt, datasource, smartgwt

感谢大家的关心，因为我厌倦了 SmartGWT 可怜的支持，但是我很高兴来到这里，因为我在这里得到了非常积极的回应。

我的要求是创建一个表单，该表单具有水平方向的按钮、组合框和 textField 等小部件/控件，但我将它们垂直放置。建议我如何垂直实现它们。

如果我在 DynamicForm 上添加 HStack，那么在这种情况下某些小部件（如 comboBox 和 textBox）不兼容。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:49:18.103

动态表单是一种网格，默认有两列，但您可以更改此数字，每个小部件通常填充两个单元格，一个用于其标题，一个用于输入元素本身，您可以显示或不显示标题，您可以更改标题方向（因此将其放在输入元素上而不是左侧）等...您也可以使用 setColspan 在任意数量的列上跨越小部件。您可以通过使用 spacerItem 甚至使用 rowspacerItem 完成行在输入小部件网格中制作“洞”。许多组件，许多属性，许多许多工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:14:56.060

您应该阅读`SmartGWT`快速入门指南。

> 智能 GWT 数据源对象提供一组持久数据字段的独立于表示、独立于实现的描述。数据源使您能够：
> 
> *   在多个应用程序和组件以及客户端和服务器之间共享您的数据模型。
> *   通过可视化组件（例如 TreeGrid）显示和操作持久数据和数据模型关系（例如父子关系）。
> *   执行标准化数据操作（获取、排序、添加、更新、删除），并在客户端和服务器上内置支持数据类型、验证器、分页、唯一键等。
> *   利用自动行为，包括数据加载、缓存、过滤、排序、分页和验证。
> 
> DataSource 描述符提供一组 DataSource 字段的属性。DataSource 描述符可以以 XML 格式指定或在 Java 代码中创建。XML 格式由客户端和服务器解释和共享，而用 Java 创建的 DataSource 仅由客户端使用。

更准确地说，这条线是将一个`DataSource`对象绑定到一个 Grid

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T21:10:46.830

要水平使用 3 个字段的表单，请使用 form.setNumCols(n+1) ：

例子：

```
 form.setNumCols(4);
    form.setFields(selectItem, new SpacerItem(), miniDateRangeItem); 
```

# xslt - 具有 url 的 xsl 正则表达式变量

> ID：10616466
> 
> 赞同：1
> 
> 时间：2012-05-16T10:15:06.593
> 
> 标签：xslt

我的 xsl 变量的值如下

```
<xsl:variable name="url">
        <xsl:value-of select="'http://1.2.34.4:70/Anything/uri'"/>
      </xsl:variable> 
```

我需要将ip地址和端口组合部分替换为一个名称-abcd.com，然后将其存储在另一个变量中。因此该变量的值将是“http://abcd.com/Anything/uri”。我怎样才能做到这一点。我必须使用正则表达式吗？变量 url 也可以以 https 开头，而且 uri 可以有任意数量的 os 斜杠。即代替 /Anything/uri 它也可以有 /uri 或 /Anything/other/uri

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:18:11.477

**这个 XSLT 1.0 转换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vReplacement" select="'abcd.com'"/>

 <xsl:template match="/">
     <xsl:variable name="vUrl" select="'http://1.2.34.4:70/Anything/uri'"/>

     <xsl:variable name="vReplaced">
       <xsl:value-of select="concat(substring-before($vUrl,'//'), '//')"/>
       <xsl:value-of select="concat($vReplacement, '/')"/>
       <xsl:value-of select="substring-after(substring-after($vUrl,'//'),'/')"/>
     </xsl:variable>

     "<xsl:copy-of select="$vReplaced"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，将变量`$vReplaced`设置为所需的正确值并将其内容复制到输出**：

```
"http://abcd.com/Anything/uri" 
```

**解释**：正确使用**[`substring-before()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring-before)**和。**[`substring-after()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring-after)**[**`concat()`**](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-concat)

# jquery-ui - 我可以将 ember.js 与 jquery-ui 手风琴一起使用吗

> ID：10616468
> 
> 赞同：2
> 
> 时间：2012-05-16T10:15:15.353
> 
> 标签：jquery-ui, ember.js

我有一个迭代控制器数组的模板 - 由于某种原因我不能使用 jquery-ui 手风琴功能 - 我认为这是由于添加的标记 ember 添加到 html 例如`<script type="text/x-placeholder" id="metamorph-1-start"></script>`

有什么想法我该如何解决这个问题？

这是代码：

```
<div id="chat-tab-container">

                <script type="text/x-handlebars">
                    {{#each App.chatTabsController}} 

                        <h3 class="row1">
                            <div class="avatar " style="background: red;">*</div>
                            <div class="contact-name ">{{contactName}}</div>
                        </h3>
                        <div class="row2">
                            <div class="contact-name ">content</div>
                        </div>

                        <h3 class="row1">
                            <div class="avatar " style="background: red;">*</div>
                            <div class="contact-name ">boni</div>
                        </h3>
                        <div class="row2">
                            <div class="contact-name ">content</div>
                        </div>

                    {{/each}}
                </script>

            </div> 
```

和 jquery 调用：`$('#chat-tab-container').accordion()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:17:07.903

正如 Cory 提到的，问题是当您调用手风琴方法时，手风琴的内容没有呈现/插入到 DOM 中。一种解决方法是使用 ember 视图作为包装器并在 didInsertElement 方法中调用手风琴方法。我提供了一个[可行](http://jsfiddle.net/manuel_mitasch/CccKP/)的例子。

基本上您的模板更改为：

```
<script type="text/x-handlebars">
  {{#view App.TabView}}                     
    {{#each App.chatTabsController.content}} 
      <h3>{{contactName}}</h3>
      <div>content for {{contactName}}</div>
    {{/each}}
  {{/view}}
</script> 
```

​查看代码：

```
App.TabView = Ember.View.extend({
    tagName: 'div',        
    didInsertElement: function() {
        this.$().accordion();
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:39:54.843

这应该可以正常工作，因为我在项目中使用它没有问题。页面完全加载后，您是否尝试过从控制台调用 $('#chat-tab-container').accordion() ？jQuery 小部件的问题通常源于内容未呈现或在内容控制器更改时重新呈现的事实。

这可以通过以下几种方式克服：

1.  使用 Ember.View 并挂钩到 didInsertElement 或 afterRender 回调。
2.  如果您的视图因内容更改而更新很多，您可以添加一个事件侦听器以在鼠标进入小部件 UI 区域时调用 $('#chat-tab-container').accordion()。我在 sortables、accordions 和 draggables 中经常使用这种方法。

下面是一个例子：

```
$('body').on( 'mouseover', '#chat-tab-container', function(){
  $(this). accordion();
}); 
```

# android - Android 从 Json Feed 创建一个 String[]

> ID：10616471
> 
> 赞同：0
> 
> 时间：2012-05-16T10:15:27.837
> 
> 标签：android, json, string

我有一个惰性列表加载图像列表，此时 url 被硬编码在 String[] 中，我想通过 json 提要加载它们。所以我的问题是如何从 JsonObject 创建一个字符串 []？

这是我到目前为止所得到的

```
try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

//this is where i want to load the images into a String[]
JSONArray ImageArray = objData.getJSONArray("news");

             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList.add(newsTitleDict.getString("title"));
             newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings={
             "http://a3.twimg.com/profile_images/670625317/aam-logo-v3-twitter.png",
             "http://a3.twimg.com/profile_images/740897825/AndroidCast-350_normal.png",
             "http://a3.twimg.com/profile_images/121630227/Droid_normal.jpg",
             "http://a1.twimg.com/profile_images/957149154/twitterhalf_normal.jpg",
             "http://a1.twimg.com/profile_images/97470808/icon_normal.png",

     };

     arrayAdapter3 = new LazyAdapter(this, mStrings);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);
            View header2 = inflater.inflate( R.layout.homeheader2, list, false);
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header2);
        adapter.addAdapter(arrayAdapter2);
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:37:57.857

这就是我使用 JSONObject 中的 ArrayList 向 String[] 添加值的方式。我的示例使用 JSONArray，但您始终可以更改它以适合您的代码。

```
ArrayList<String> arrayName = new ArrayList<String>();
ArrayList<String> arrayPicture = new ArrayList<String>();

Bundle extras = getIntent().getExtras();
apiResponse = extras.getString("API_RESPONSE");

try {

    JSONArray JAFriends = new JSONArray(apiResponse);

    for (int i = 0; i < JAFriends.length(); i++) {
        json_data = JAFriends.getJSONObject(i);

        if (json_data.has("name"))  {
            String getFriendName = json_data.getString("name").toUpperCase();
            arrayName.add(getFriendName);
        } else {
            String getFriendName = null;
            arrayName.add(getFriendName);
        }       

        if (json_data.has("pic_square"))    {
            String getFriendPhoto = json_data.getString("pic_square");
            arrayPicture.add(getFriendPhoto);
        } else {
            String getFriendPhoto = null;
            arrayPicture.add(getFriendPhoto);
        }
    }
} catch (JSONException e) {
    return;
}
stringName = new String[arrayName.size()];
stringName = arrayName.toArray(stringName);

stringPicture = new String[arrayPicture.size()];
stringPicture = arrayPicture.toArray(stringPicture);

listofFriends = (ListView)findViewById(R.id.list);
adapter = new FriendsAdapter(this, stringName, stringPicture);

listofFriends.setAdapter(adapter); 
```

在他`for`的循环中，使用*if*语句确保没有错误蔓延，返回的值被添加到它们各自的 ArrayLists 和`adapter`设置之前的 6 行代码，来自 ArrayLists 的值被添加到 String[]。希望这有助于解决您的问题。

# mod-rewrite - REQUEST_FILENAME 的 Mod 重写问题

> ID：10616474
> 
> 赞同：1
> 
> 时间：2012-05-16T10:15:29.053
> 
> 标签：mod-rewrite, url-rewriting, url-routing

我在服务器将 domain.com/index 解释为 domain.com/index.php 时遇到问题。这与我的 URL 结构有关。

我创建了一个 .htaccess 文件，其中包含以下内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [PT,L]

</IfModule> 
```

因此，如果我输入 URL domain.com/index/about 我想从中获取 index/about `$_GET['url']`。但它是空白的。如果我键入任何其他不以 index 开头的 URL，例如 domain.com/foo/bar，我会得到预期的结果。

我知道这是因为`RewriteCond %{REQUEST_FILENAME} !-f`如果存在具有相同文件名的文件，则会忽略任何重写。

因此，只要 URL 不涉及单词 index 或其他目录或文件名，我的 RewriteRules 就会给我想要的结果。这一切都很好，因为我在当前目录中没有其他目录或文件。

**所以问题是；**我可以让它更具体，比如忽略 filename.php 而不仅仅是文件名吗？这意味着*domain.com/index/about*应该工作，但不是*domain.com/index.php/about*。

**附带问题：**为什么*domain.com/index/about*无论如何都不起作用？我没有名为 index/about 的目录，也没有名为 index/about 的文件。为什么它将 index/something 解释为 index.php/something 毫无意义，因为我不能在文件中有目录。

# c# - 在 C# 的结构中编组 IntPtrs

> ID：10616476
> 
> 赞同：1
> 
> 时间：2012-05-16T10:15:35.607
> 
> 标签：c#, struct, marshalling, intptr

我打算建模一个 C# 类来解析我作为原始缓冲区接收的自定义协议数据。缓冲区已经作为字节数组存在。

这个解析器必须处理不同的字段布局，因此一些协议元素是 IntPtrs。

当我在将原始缓冲区映射到结构后尝试访问结构内的指针时，我遇到了访问冲突。

我做了一个简单的例子来展示关键部分：

```
namespace CS_StructMarshalling
{
  class Packet
  {  
    public PacketStruct Fields;

    [StructLayout(LayoutKind.Explicit)]
    public struct PacketStruct
    {
      [FieldOffset(0)] public UInt16 Flags;
      [FieldOffset(2)] public IntPtr Data;
    }

    public Packet()
    {
      Fields = new PacketStruct();
    }

    public void DecompileBinaryBuffer(ref Byte[] byteBuffer)
    {
      int size = Marshal.SizeOf(typeof(PacketStruct)); 
      IntPtr ptr = Marshal.AllocHGlobal(size);

      Marshal.Copy(byteBuffer, 0, ptr, size);

      this.Fields = (PacketStruct)Marshal.PtrToStructure(ptr, typeof(PacketStruct));
      Marshal.FreeHGlobal(ptr);
    }
  }

  class Program
  {
    static void Main(string[] args)
    {
      byte[] rawBuffer = new byte[] { 1, 2, 65, 66, 67, 68, 69, 70 };

      Packet testPkt = new Packet();
      testPkt.DecompileBinaryBuffer(ref rawBuffer);

      UInt16 testFlags = testPkt.Fields.Flags;
      String testData = Marshal.PtrToStringAnsi(testPkt.Fields.Data, 6);
    }
  }
} 
```

我只是试图解决这个问题，但无济于事。据我了解， IntPtr 必须单独编组，但我没有找到任何提示如何以干净的方式完成此操作。

欢迎任何指点。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:20:59.313

你已经很好地打开了它；问题是数据；您有以下硬编码数据：

*   标志 = 513
*   数据 = 1145258561（如果使用 x86，则为接下来的 4 个字节）

问题很简单：指针值“1145258561”**无效**，除了可能在该数字来自的早已死去的 AppDomain 中。

您不能强行进入不属于您的数据。

此外，在 x64 上它会更快出错，因为缓冲区是 8 个字节，而结构需要 10 个字节。

另外：您的使用`ref`不正确，您可能可以避免`HGlobal`使用`stackalloc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:27:42.273

您正在解码字符数据，就好像它是指向字符数据的指针一样，因此它将指向内存中不包含字符数据的任意位置，并且很可能位于程序所在的地址空间部分之外允许使用。您根本无法将数据解码为指针，因为它不是指针。

将数据转换为它们的类型。由于字符是 8 位代码，您需要使用 8 位字符集对其进行解码：

```
ushort testFlags = BitConverter.ToUInt16(rawBuffer, 0);
string testData = Encoding.ASCII.GetString(rawBuffer, 2, rawBuffer.Length - 2); 
```

结果：

```
513
ABCDEF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:03:59.837

基于对*指针*真正含义的可能误解，该方法存在一个根本缺陷。托管代码中的指针 IntPtr 只是内存中某个位置的地址。您可以阅读您已经使用的那种代码所指向的内容，例如 Marshal.PtrToStructure()。

指针的一个问题是它们只在一个进程中有效。每个进程都有自己的虚拟内存地址空间。通过托管代码的附加限制，垃圾收集器可以将对象从一个位置随机移动到另一个位置。有一些解决方法，您可以调用 ReadProcessMemory() 从另一个进程读取数据。*然后通过固定*对象 GCHandle.Alloc()来解决垃圾收集器的行为

但这些是不属于自定义序列化方案的解决方法。ReadProcessMemory() 的一个明显失败模式就是不知道哪个进程拥有数据。或者没有足够的权利使用它。或者在另一台机器上运行的进程。固定指针是有缺陷的，因为不能很好地保证您会取消固定它们。

因此，任何序列化方法都通过扁平化数据来解决这个问题，通过将指针替换为指向的数据来消除指针。并在反序列化器中复活对象图。由 BinaryFormatter、XmlSerializer、DataContractSerializer 和 DataContractJsonSerializer 等类完成​​的工作。还有像马克最喜欢的第 3 方。不要自己写，它们太多了，因为很难写好。

# c# - sqlcmd.exe路径可以配置吗？

> ID：10616483
> 
> 赞同：0
> 
> 时间：2012-05-16T10:15:56.353
> 
> 标签：c#, sql, sqlcmd

我想将 sqlcmd.exe 的位置从其默认位置更改为我想要的位置。例如，我可以将它放在我的项目目录中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:19:51.770

您可以创建一个 .bat 文件，将工作目录更改为您想要的路径，然后将接收到的参数传递给 sqlcmd.exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:33:48.140

尝试移动`Resources`（它在 sqlcmd.exe 所在的同一目录中）文件夹并`sqlcmd.exe`在一起。我猜测`sqlcmd.exe`使用该文件夹中的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:05:51.607

Fraz，我已经测试了以下内容，并且效果很好：

从它们当前的文件夹中删除**SQLCMD.exe**和**SQLCMD.rll**并将它们放在您要从中运行 SQLCMD.exe 的目录中。默认情况下，RLL 文件位于 Microsoft SQL Server Program Files 文件夹的**Tools\Binn\Resources**文件夹中。这是 SQLCMD.exe 工作所需的仅有的两个文件，并且 RLL 文件不必位于新位置的 Resources 文件夹中（它可以与 SQLCMD.exe 位于同一目录中）。

完成上述操作后，您必须将新位置添加到 Windows 中的**路径**环境变量。在 Windows 7 上，您可以通过导航到**Control Panel\System and Security\System**，单击**Advanced system settings** ，然后在结果对话框的**Advanced**选项卡上按**Environment Variables来访问 Environment Variables 对话框。**进入该对话框后，在**System variables**标题下查找**Path变量；**找到后，选择它，单击**Edit**，然后将 SQLCMD.exe 的新位置添加到**变量值**框中当前值的末尾，并在其前面加一个分号。

 ******如果您想进一步解释任何内容或对此答案有任何疑问，请告诉我。如果您愿意，我可以帮助您在其他版本的 Windows 上找到“环境变量”对话框。******

# html - 如何检查我的网站在 Safari 移动版中的运行情况？

> ID：10616484
> 
> 赞同：14
> 
> 时间：2012-05-16T10:16:04.190
> 
> 标签：html, css, mobile-safari

我制作了一个在我的计算机上运行良好的网站（通过所有现代浏览器）。有人报告说它不适用于 Safari 移动版。

我试图从 Windows 上的 Safari 中看到，这让我看起来和我想要的一样。

我看过他们的截图，感觉我的 UI 有问题。有人可以知道如何从我的计算机（Windows）中检查外观。

如何从我的计算机测试我的网站是否适用于 safari mobile。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-29T20:00:49.907

您实际上可以在您的计算机上下载并安装 Safari，然后检查您的网站以及所有可用的 safari for mobile 版本。选择首选项->高级->在菜单栏中显示开发者菜单。

最后，右键单击您的网站，然后单击用户代理->，然后选择您想要的 safari 版本。[检查此链接以获取更多信息](http://www.htmlgoodies.com/beyond/webmaster/toolbox/article.php/3889011/Using-Safari-for-iPhone-iPad-and-iPod-Touch-Website-Testing.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:09:01.883

单击顶部菜单上的“开发”，然后单击“用户代理”并选择您的设备...并导航到您的网站。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T10:19:06.950

看看这个：[http ://webtide.wordpress.com/2009/09/14/how-to-test-websites-for-mobile-devices/](http://webtide.wordpress.com/2009/09/14/how-to-test-websites-for-mobile-devices/)

> 你需要什么：
> 
> iPhone/iPod Touch 的 Safari 测试：
> 
> 打开 Safari 并转到首选项（编辑->首选项）。
> 在“高级”选项卡下，确保选中“在菜单栏中显示开发菜单”。在菜单中，点击开发->用户代理->Mobile Safari 3.0 浏览到您的网站并开始测试！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-09T23:07:11.250

[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation#enable-emulation-panel)有设备模拟。

# backbone.js - 如何在我的表中显示存储在本地存储中的数据

> ID：10616496
> 
> 赞同：0
> 
> 时间：2012-05-16T10:16:49.703
> 
> 标签：backbone.js, local-storage

我正在使用backbone.js 创建一个联系人管理器，这是我的代码

```
$(document).ready(function() {

var Contact=Backbone.Model.extend({
defaults: {
    fname : '',
    lname : '',
    phoneno : ''
}
});

var ContactList=Backbone.Collection.extend({
model : Contact,
localStorage: new Store("ContactList-backbone")
});

var ContactView=Backbone.View.extend({
    el : $('div#contactmanager'),

 events: {
      'click #additems' : 'add'

      },

 initialize: function() {   

    this.render();  

    this.collection = new ContactList();
},

add : function() {

 s1=$('#fname').val();
 s2=$('#lname').val();
 s3=$('#phoneno').val();
 if(s1 =="" || s2=="" || s3=="")
 {
    alert("Enter values in Textfield");
 }
 else
 {  
    $('#tlist').append("<tr><td>"+s1+"</td><td>"+s2+"</td><td>"+s3+"</td>   </tr>");

    cont=new Contact({fname:s1,lname:s2,phoneno:s3});
    this.collection.add(cont);

    cont.save();

}

},

render : function() {

    $(this.el).append("<label><b>First Name</b></label><input id= 'fname' type='text' placeholder='Write ur first name'></input>");
    $(this.el).append("<br><label><b>Last Name</b></label><input id= 'lname' type='text' placeholder='Write ur last name'></input>");
    $(this.el).append("<br><label><b>Phone Number</b></label><input id= 'phoneno' type='text' placeholder='Write ur phone number'></input>");
    $(this.el).append("<br><button id='additems'>ADD</button>");

     var showdata=localStorage.getItem('ContactList-backbone',this.model);
    console.log(showdata,"showdata");

    }
    return this;        
},

});

var contactManager=new ContactView();

}); 
```

这就是我使用本地存储的方式

```
function S4() {

   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);

};
function guid() {

  return (S4());

};

var Store = function(name) 
{

  this.name = name;

  var store = localStorage.getItem(this.name);

  this.data = (store && JSON.parse(store)) || {};

};

_.extend(Store.prototype, 
{

    save: function() {

      localStorage.setItem(this.name, JSON.stringify(this.data));

    },

create: function(model) {

    if (!model.id) model.id = model.attributes.id = guid();
    this.data[model.id] = model;
    this.save();
    return model;

},

Backbone.sync = function(method, model, options) {

  var resp;
  var store = model.localStorage || model.collection.localStorage;

  switch (method) {

    case "create":  resp = store.create(model);                            break;

    //I am using only create

  }

  if (resp) {

    options.success(resp);

  }
 else {

  options.error("Record not found");

  }

}; 
```

数据存储在本地存储中。但是当页面重新加载时，我无法弄清楚如何在我的表格中显示这些数据。例如：我想在表格中显示名字、lname 和电话号码；我是骨干新手，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:36:12.197

基本上，您将希望在您的集合中绑定 add 事件，该事件将为添加到集合中的每个项目调用，然后在绑定它的函数中添加代码以将行添加到您的表中。此外，您还需要删除当前 add 方法中添加行的代码，因为它现在将在项目添加到您的集合时生成。

使用您的代码作为基础，类似于

```
var ContactView=Backbone.View.extend({

    el : $('div#contactmanager'),

 events: {
      'click #additems' : 'add'
      },

 initialize: function() {   

    this.render();  

    this.collection = new ContactList();
    this.collection.bind('add', this.addContact, this);
},

addContact: function(contact) {
    //this will get called when reading from local storage as well as when you just add a 
    //model to the collection
    $('#table').append($('<tr><td>'  + contect.get('name') + </td></tr>'));     
 } 
```

另一点是您的页面上已经有 underscore.js（因为它是对主干 js 的要求），您可能需要考虑将生成 html 的代码移动到 underscore.js 模板。 [http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:28:39.360

因为你只是在使用`create`，你永远不会打`read`。`read`通过添加方法替换您的 switch 语句

```
switch (method) 
{
case "read":    
    resp = model.id != undefined ? store.find(model) : store.findAll(); 
    break;
case "create":  
    resp = store.create(model); 
    break;
} 
```

# c++ - 尝试使用 ID3_Tag 信息在 Qt 中编写 M3U 文件

> ID：10616499
> 
> 赞同：0
> 
> 时间：2012-05-16T10:16:57.317
> 
> 标签：c++, windows, qt, id3lib

我尝试制作一个 M3U 文件（播放列表），但是当我尝试编写一个文件时，我的程序崩溃而没有错误。

```
bool Playlist::savePlaylist(QString path)
{
    this->filename = path;

    QFile file(path);

    if((file.open(QIODevice::WriteOnly | QIODevice::Truncate)) == false)
    {
        return false;
    }

    QTextStream out(&file);
    if(out.status() != QTextStream::Ok)
    {
        return false;
    }

    out << "#EXTM3U" << endl;

     for(int i = 0 ; i < this->getSize() ; i++)
     {
         SongInfo si = this->songs.at(i);
         int durata = this->getLengthInSeconds(si.getAddress().toString(QUrl::None));

         out << "#EXTINF:" << durata << "," << ID3_GetArtist(&si.getTag()) << " - "
            << ID3_GetTitle(&si.getTag()) << endl;

         out << si.getAddress().toString(QUrl::None) << endl;
    }

    file.close();

    return true;
} 
```

如果我尝试使用 188 个文件，1.07 Gb 大小的磁盘，大约 100 首歌曲后程序崩溃。当我尝试在该位置获取 SongInfo 时，我遇到了崩溃。如果我尝试让我们说 30-40 首歌曲，一切都很完美。我不知道可能是什么问题。我试图写块，并从内存中删除这些块，我使用了刷新。我不知道该怎么办，问题可能出在哪里。如果我写控制台这些信息（一个用于打印的for循环）一切都是完美的，但是当我尝试写时......崩溃。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:21:27.927

对我来说，你如何遍历歌曲列表`this->getSize()`然后获取`SongInfo`with看起来很奇怪`this->songs.at(i);`。 `this`与 不是同一个对象`this->songs`，仅通过查看您的代码是不可能知道是什么`getSize()`。

你愿意试试这个吗？

```
int size = songs.size();

for(int i = 0 ; i < size ; i++)
{
   SongInfo si = this->songs.at(i);
   int durata = this->getLengthInSeconds(si.getAddress().toString(QUrl::None));

   out << "#EXTINF:" << durata << "," << ID3_GetArtist(&si.getTag()) << " - "
       << ID3_GetTitle(&si.getTag()) << endl;

   out << si.getAddress().toString(QUrl::None) << endl;
} 
```

甚至更好，如果`songs`是`QList`：

```
foreach(SongInfo si, songs){
   int durata = this->getLengthInSeconds(si.getAddress().toString(QUrl::None));
   ...
} 
```

# sql - TimeStamp 列是唯一的吗？

> ID：10616502
> 
> 赞同：7
> 
> 时间：2012-05-16T10:17:09.493
> 
> 标签：sql, sql-server, sql-server-2008, timestamp

在所有行中都是`TimeStamp`唯一的吗？

它上面有唯一索引吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:19:07.340

时间戳是一种数据类型，它公开自动生成的二进制数，保证在数据库中是唯一的。时间戳通常用作对表行进行版本标记的机制。存储大小为 8 个字节。

* * *

有关更多信息，请查看[这篇](http://msdn.microsoft.com/en-us/library/aa260631%28v=sql.80%29.aspx)文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T10:22:39.490

从[MSDN 文章中](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.90%29.aspx)，强调我的：

> 时间戳是一种数据类型，它在数据库中公开自动生成的唯一二进制数。时间戳通常用作对表行进行版本标记的机制。存储大小为 8 个字节。**时间戳数据类型只是一个递增的数字，不保留日期或时间。**要记录日期或时间，请使用 datetime 数据类型。

它还提供了这个有趣的注释：

> 可以使用 SELECT INTO 语句生成重复的时间戳值，其中时间戳列位于 SELECT 列表中。我们不建议以这种方式使用时间戳。

在 SQL server 2008 及更高版本中，该`timestamp`类型已重命名为`rowversion`，大概是为了更好地反映其用途和价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-19T09:59:08.600

文档说

> 数据库中唯一的二进制数

但在实践中，您可能会遇到这种说法不正确的情况。由于该值是从 a 生成的，因此`database global counter`您在还原数据库或`timestamp`在`tempdb`.

您可以看到下一个值：

```
Select @@DBTS 
```

在 SQL Server 2000 之前，有一个未记录的命令来更改值

```
DBCC CHECKDBTS (dbId, newTimestamp) 
```

要更改 SQL Server 的非古代版本中的时间戳，请参阅此答案：

[https://dba.stackexchange.com/a/11088/149485](https://dba.stackexchange.com/a/11088/149485)

# sql - 如何在 oracle 嵌套查询中引用别名？

> ID：10616503
> 
> 赞同：1
> 
> 时间：2012-05-16T10:17:10.100
> 
> 标签：sql, oracle, alias

我有几个这样的嵌套查询：

```
(SELECT "impartidas"."idUsuarioProf"
   FROM "impartidas"
   WHERE "impartidas"."periodo" = "periodoPlanGrado"."periodo" and
         "impartidas"."idMateria" = "materiasPlan"."idMateria") T,
(SELECT "usuarios"."apellidoPaterno" || ' , ' || "usuarios"."nombres"
   FROM "usuarios"
   WHERE "usuarios"."idUsuario" = 36) as "nomprofesor" 
```

第一个`teacher ID`在名为 的列中输出`T`。

我需要在第二个查询中更改什么，以便`36`它使用别名列中显示的值而不是`T`？

简而言之，我需要根据第一个查询的输出`ID`值执行第二个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:20:17.123

r 在没有任何上下文的情况下，很难理解为什么你会采取如此复杂的方法。显而易见的方法只是一个简单的连接：

```
SELECT "impartidas"."idUsuarioProf"    
 ,  "usuarios"."apellidoPaterno" || ' , ' || "usuarios"."nombres" "nomprofesor" 
FROM "impartidas"   
      , "periodoPlanGrado"
      , "materiasPlan"
      ,  "usuarios"
 WHERE "impartidas"."periodo" = "periodoPlanGrado"."periodo" 
and          "impartidas"."idMateria" = "materiasPlan"."idMateria") T
and "usuarios"."idUsuario" = "impartidas"."idUsuarioProf" 
/ 
```

但是如果你真的需要内联，那么你需要在外部进行连接，如下所示：

```
select P."nomprofesor" 
from 
    (SELECT "impartidas"."idUsuarioProf"
      FROM "impartidas"   
              , "periodoPlanGrado"
              , "materiasPlan"               
     WHERE "impartidas"."periodo" = "periodoPlanGrado"."periodo" 
      and      "impartidas"."idMateria" = "materiasPlan"."idMateria") T, 
    (SELECT "usuarios"."apellidoPaterno" || ' , ' || "usuarios"."nombres"  as "nomprofesor" 
            , "usuarios"."idUsuario"
      FROM "usuarios"       ) P     
WHERE P."idUsuario" = T."idUsuarioProf" 
```

请注意，您需要在每个子查询的投影中包含所有连接列。因为，您需要使用别名来引用外部查询中的派生列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:11:25.220

那这个呢：

```
SELECT "usuarios"."apellidoPaterno" || ' , ' || "usuarios"."nombres" AS "nomprofesor"
FROM   "usuarios"
WHERE  "usuarios"."idUsuario" = (
           SELECT "impartidas"."idUsuarioProf"
           FROM   "impartidas", "periodoPlanGrando", "materiasPlan"
           WHERE  "impartidas"."periodo" = "periodoPlanGrado"."periodo" 
              AND "impartidas"."idMateria" = "materiasPlan"."idMateria"
        ) 
```

或许

```
SELECT "usuarios"."apellidoPaterno" || ' , ' || "usuarios"."nombres" AS "nomprofesor"
FROM   "usuarios"
WHERE  "usuarios"."idUsuario" IN (
           SELECT "impartidas"."idUsuarioProf"
           FROM   "impartidas", "periodoPlanGrando", "materiasPlan"
           WHERE  "impartidas"."periodo" = "periodoPlanGrado"."periodo" 
              AND "impartidas"."idMateria" = "materiasPlan"."idMateria"
        ) 
```

如果子查询可能生成多行（我不知道架构并且我的西班牙语不是很好 ( `IS NULL`) 无法理解`"impartidas"`表中可能包含的内容）。

出于代码维护和可读性的原因，我会这样写：

```
SELECT u.apellidoPaterno || ' , ' || u.nombres AS nomprofesor
FROM   usuarios u
WHERE  u.idUsuario = (
           SELECT i.idUsuarioProf
           FROM   impartidas i
                  INNER JOIN periodoPlanGrando p USING ( periodo )
                  INNER JOIN materiasPlan m      USING ( idMateria )
        -- WHERE (other condifitions)
        ) 
```

甚至这个：

```
SELECT u.apellido_paterno || ' , ' || u.nombres AS nom_profesor
FROM   usuarios u
WHERE  u.id_usuario = (
           SELECT i.id_usuario_prof
           FROM   impartidas i
                  INNER JOIN periodo_plan_grado p USING ( periodo )
                  INNER JOIN materias_plan m      USING ( id_materia )
        -- WHERE (other condifitions)
        ) 
```

但这需要将表名和列名重构为更像 Oracle 标识符。

# html - 椭圆背景渐变

> ID：10616504
> 
> 赞同：3
> 
> 时间：2012-05-16T10:17:11.063
> 
> 标签：html, css, radial-gradients

我想重新创建我的网页上[显示的背景渐变。](http://img802.imageshack.us/img802/2952/gradientt.png)与简单的线性渐变不同，它不能很好地重复（作为图像），因此它可以填充可变长度。谁能推荐一种方法来达到预期的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:34:51.303

我可能会错过这个想法，但您可以从这里开始：http: [//jsfiddle.net/yvsV7/](http://jsfiddle.net/yvsV7/)

# scala - 如何让用户在playframework 2中切换语言

> ID：10616514
> 
> 赞同：7
> 
> 时间：2012-05-16T10:17:49.067
> 
> 标签：scala, internationalization, playframework-2.0

在我的 play 1.x 控制器中，我有这个：

```
public static void language(final String language){
    Lang.change(language);
    Header referer = request.headers.get("referer");
    if(referer == null){
        index();
    }else{
        redirect(referer.value());
    }
} 
```

我想在 play 2.x 中做同样的事情，但我的印象是功能不再可用。这是我到目前为止所拥有的

```
 def language(language:String) = Action { implicit request =>

    // TODO change language

    val referer = request.headers.get("referer")
    referer.map{ referer =>
      Redirect(referer, FOUND);
    }getOrElse(
      Ok(views.html.index())
    )
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:32:01.163

您可以将语言存储在用户会话中。[你可以在这里](https://github.com/julienrf/chooze/blob/master/app/controllers/CookieLang.scala)找到一个例子

此问题已[在 Play Google 群组中提出](https://groups.google.com/forum/#!searchin/play-framework/change%2420implicit%2420lang/play-framework/8LRKHNm9D4Q/eWDjfyr4U9AJ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-12T16:39:33.693

根据[文档](https://www.playframework.com/documentation/2.4.x/JavaI18N#Externalizing-messages)，在 Play 2.4 中，您可以在控制器内部执行

```
ctx().changeLang(new Lang(Lang.forCode("fr"))); 
```

您需要有一个文件 conf/messages.fr 以便应用程序可以参考它来获取消息。您可以从[messages.default](https://github.com/playframework/playframework/blob/26a9c7625d6c482abf1c6ecedacff34d670bee01/framework/src/play/src/main/resources/messages.default)文件开始并放置您自己的消息。

# python - 将分层关键字与文档匹配

> ID：10616515
> 
> 赞同：2
> 
> 时间：2012-05-16T10:17:50.687
> 
> 标签：python, hierarchical-data

我有一个分层关键字树，表示为一个元组列表，其中第一个参数是“路径”，第二个是相应的关键字：

```
keys = [('0','key1'),('0,1','key2'),('0,1,12','key3'),('0,2','key4'),('0,2,30','key5')] 
```

列出连接“路径”和相应文档（一个文档可以有多个“路径”：

```
docs = [('0,1,12','doc1'),('0,2,30','doc1'),('0,1','doc2')] 
```

我想将每个文档与关键字匹配并产生如下结果：

```
docdict={doc1:[('key1','key2','key3'),('key1','key4','key5')],doc2:[('key1','key2')]} 
```

我的问题是如何最有效地获取所有（父）关键字？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:37:38.180

这几乎可以满足您的要求：

```
>>> docdict = {doc[-1]:[key[-1] for key in keys if doc[0].startswith(key[0])] for doc in docs}
>>> docdict
{'doc2': ['key1', 'key2'], 'doc1': ['key1', 'key4', 'key5']} 
```

这正是您指定的：

```
>>> docdict = {}
>>> for doc in docs:
    docdict.setdefault(doc[-1],[]).append(tuple(key[-1] for key in keys if doc[0].startswith(key[0])))  
>>> docdict
{'doc2': [('key1', 'key2')], 'doc1': [('key1', 'key2', 'key3'), ('key1', 'key4', 'key5')]} 
```

两者都是`O(n*m)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:47:41.020

一个更具可读性的答案，如果你有很多这些，它可能会更好地扩展。

```
docs = [('0,1,12','doc1'),('0,2,30','doc1'),('0,1','doc2')]
keys = [('0','key1'),('0,1','key2'),('0,1,12','key3'),('0,2','key4'),('0,2,30','key5')]

keydict = dict(keys)
resultDict = {}

for doc in docs:
    (path, docname) = doc
    pathList = path.split(',')
    keyPath = []
    for i in range(0, len(pathList)):
        aPath = ','.join(pathList[:i+1])
        keyPath.append(keydict[aPath])

    if docname not in resultDict :
        resultDict[docname] = []
    resultDict[docname].append(tuple(keyPath))

print resultDict 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:53:54.203

这也是另一种解决方案：

```
keys = [('0','key1'),('0,1','key2'),('0,1,12','key3'),('0,2','key4'),('0,2,30','key5')]
docs = [('0,1,12','doc1'),('0,2,30','doc1'),('0,1','doc2')]

def get_path(p):
    # tuples so that you can use them as dict keys
    return tuple(p.split(','))

# we need to find the keys based on the paths, so make the path the dict's key
keypaths = {get_path(p): key for p, key in keys}

docdict = {}
for p, doc in docs:
    path = get_path(p) # we need the path as a tuple or list, so that you can get the parents via slicing
    # get all parents of the path and the path itself.
    # we remove one part of the path at a time and keep the original path also
    all_paths = [path]+[path[:-i] for i in range(1,len(path))]
    # you need to keep each doc/path combination alone, so you need a list to store it
    if doc not in docdict:
        docdict[doc] = []
    # add the keys whose path is in one of the parents or the path itself
    docdict[doc].append([keypaths[path] for path in all_paths if path in keypaths])

print docdict # now, you see what you expect. :) 
```

坦率地说，使用所有这些单行代码，代码变得不可读。所以，如果你同意，你应该更喜欢这个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:37:21.627

编辑：我首先创建了一种从关键字中获取直接父级的方法，但这不能满足要求。据我了解，从路径中获取所有父关键字要好得多：

```
>>> def get_parents(keys, path):
    """ Get all parent keywords """
    # Get parent path (remove after last ',')
    parent_paths = [path]
    while ',' in path:
        path = ','.join(path.split(',')[:-1])
        parent_paths.append(path)
    return [key for path, key in keys if path in parent_paths]

>>> get_parents(keys, '0,2')
['key1', 'key4']
>>> from collections import defaultdict
>>> def create_doc_dict(keys, docs):
    """ Create the required dict """
    docdict = defaultdict(list)
    for path, doc in docs:
        docdict[doc].append(get_parents(keys, path))
    return docdict

>>> create_doc_dict(keys, docs)
defaultdict(<type 'list'>, {'doc2': [['key1', 'key2']], 'doc1': [['key1', 'key2', 'key3'], ['key1', 'key4', 'key5']]}) 
```

# emacs - 是否有一个很好的 emacs 模式来显示和编辑巨大的分隔符分隔的文件？

> ID：10616525
> 
> 赞同：37
> 
> 时间：2012-05-16T10:18:29.847
> 
> 标签：emacs, csv, alignment

我一直在搜索，但没有找到一种可以轻松编辑巨大的制表符/逗号/冒号分隔文件的模式。我一直想要一种能够确保列始终对齐的模式，就像 org-mode 表一样。我知道我可以轻松地将整个文件转换为 org-mode 表，然后在完成后将其转回，但是对于大型文件，这会变得非常慢，并且对于快速编辑来说很麻烦（还有会发生什么的问题如果字段包含竖线）。那么有没有人知道我可以使用的模式或内置函数/变量，以便我可以获得类似的文件

```
col1\tcol2\tcol3
very long column1\tcol2\tcol3 
```

显示为

```
col1               col2  col3
very long column1  col2  col3 
```

? （也许有一些颜色衬里分隔符）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T11:34:06.683

也许您可以告诉我们您已经找到并拒绝了什么？

如果您一直在搜索，那么您一定看过[http://emacswiki.org/emacs/CsvMode](http://emacswiki.org/emacs/CsvMode)吗？但是，您没有提及它，也没有说明为什么它不好。

SES（简单 Emacs 电子表格）可能是一种有用的方法：

`C-h``i``g` `(ses)` `RET`

您可以创建一个`ses-mode`缓冲区并将制表符分隔的数据拉入其中（这就是导入机制）。

不过，这可能比你之前更麻烦，而且我不确定它对“巨大”文件的执行情况如何。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-16T11:38:32.447

Try `csv-mode`，它至少在 Emacs 24 中有效。

`csv-separators`如果不使用默认分隔符（逗号），您可以设置变量以更改分隔符。

请参阅[Emacs 维基](http://emacswiki.org/emacs/CsvMode)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-03T14:48:32.940

正如@choroba 提到的，使用`csv-mode`. 具体回答你的问题：

*   确保您的分隔符在 中`csv-separators`，例如您可以使用

    ```
    (setq csv-separators '("," "    ")) 
    ```

*   使用`csv-align-fields`(default keybinding `C-c C-a`) 将字段值排列成列。

@unhammer 关于仅对齐可见行的评论很棒。他们的代码正确缩进：

```
(add-hook 'csv-mode-hook
          (lambda ()
            (define-key csv-mode-map (kbd "C-c C-M-a")
              (defun csv-align-visible (&optional arg)
                "Align visible fields"
                (interactive "P")
                (csv-align-fields nil (window-start) (window-end))
                )
              )
            )
          ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-03T13:41:08.510

有一个 pretty-column.el，我多年前在 Group gnu.emacs.sources 中找到了它（它是在 1999 年添加的）。该组现在已被 Google 屏蔽。我刚刚在 Org 模式阻塞的 ~5000 行制表符分隔的文本文件上使用了 pretty-column.el （Org 模式在转换这样的文件时有 999 行的限制——出于这个原因）。在编辑中添加：这似乎现在称为 delim-col.el （请参阅[此 Emacs Wiki 条目](https://www.emacswiki.org/emacs/DelimColPackage)）；作者是同一个人。

# jquery-mobile - Yii - 我们可以在 jquery mobile 中使用表单小部件功能吗

> ID：10616526
> 
> 赞同：0
> 
> 时间：2012-05-16T10:18:30.500
> 
> 标签：jquery-mobile, yii

我目前正在为移动用户在 jquerymobile 中做一个项目的一部分。

我想知道我们是否可以使用 jquerymobile 中包含的表单小部件功能。因为我可以看到 jquery mobile 的 CSS 不适用于文本输入。所以我需要这是否是问题所在。这样我现在就可以自行更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:02:47.377

> 您可以使用简单的输入字段并通过 jquery ajax 提交表单...它可以工作..

# c# - WinRT Metro 中的 GridView 选择颜色

> ID：10616529
> 
> 赞同：3
> 
> 时间：2012-05-16T10:18:41.333
> 
> 标签：c#, xaml, windows-8, windows-runtime

如何在 XAML 中为 WinRT GridView 控件设置/更改项目选择颜色？我试过环顾四周，是否还有一个程序可以在 Blend for VS11 上进行可视化操作？

我查看了 GridView.ItemContainerStyle 标记，但在网上找不到太多帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:37:02.437

有一个[较早的问题](https://stackoverflow.com/questions/10359197/windows-8-gridview-disabling-item-tap-visualization)是关于在 GridView 中禁用点击可视化，这可能会对您有所帮助。GridView 本身无法提取 GridViewItem 的样式，因此如果您想自己做 - 您需要将 GridViewItem 控件单独放在某些页面/用户控件中，并使用设计器工具来编辑模板。或者你可以从其他问题中使用我的。我认为您需要更改的是在该模板中使用 ListViewItemHighlightBrush。

# symfony - symfony production 的 master 分支准备好了吗？

> ID：10616535
> 
> 赞同：1
> 
> 时间：2012-05-16T10:19:44.200
> 
> 标签：symfony

我在我的项目中使用 2.0.x 版本，但最近我开始看到越来越多的 bundle**只**支持master 分支

我应该迁移到主分支吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:24:45.073

它不稳定，可能包含未完成的代码。此外，还有许多尚未记录的中断更改。如果你开始一个新项目，那就去master，如果你已经写了一些代码，我最好等待下一个2.1版本（所有bundle都应该支持它）。

大多数流行的包也可以与 2.0 一起使用，但是您必须经常使用 symfony 版本的分支，而不是包的主分支。

# wpfdatagrid - 如何使用绑定折叠 DataGridTextColumns

> ID：10616544
> 
> 赞同：0
> 
> 时间：2012-05-16T10:20:09.190
> 
> 标签：wpfdatagrid

我已经没有想法尝试根据公共属性中设置的值（在 WPF/XAML/MVVM Light 应用程序中）折叠 DataGridTextcolumn。

xaml 的提取物是：

```
<StackPanel>
      <DataGrid AutoGenerateColumns="False" Name="PipelinesGrid" 
              HorizontalAlignment="Left" 
              ItemsSource="{Binding Pipelines}"
              SelectedItem="{Binding SelectedPipelineView, Mode=TwoWay}"  
              VerticalAlignment="Top" Margin="10,16,0,0" 
              SelectionUnit="FullRow" SelectionMode="Single" 
              CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTextColumn 
                 Binding="{Binding DailyCapacity, Mode=TwoWay}" 
                 Header="Capacity(d)" 
                 Visibility="{Binding Source={x:Reference PipelinesGrid}, 
                                      Path=DataContext.ShowCapacities}"/> 
```

这是 Visibility 设置是我尝试过的众多设置之一（这个设置会产生周期性依赖错误）。

ViewModel 代码的相关摘录是：

```
private string _showCapacities;

public string ShowCapacities
{
    get { return _showCapacities; }
    set { _showCapacities = value; RaisePropertyChanged("ShowCapacities"); }
}

private void OnProjectSelected(ProjectSelectedArgs obj)
{
    _selectedProject = obj.SelectedProject;

    if (_selectedProject != null)
    {
        Pipelines = new ObservableCollection<PipelineView>();
        foreach (var projectPipeline in _selectedProject.ProjectPipelines)
        {
            Pipelines.Add(new PipelineView(projectPipeline));
        }

        switch (_selectedProject.ProjectCategory.ProjectCategory1)
        {
        case "Upstream":
            ShowCapacities = "Collapsed";
            break;
        case "Mid-Stream":
            ShowCapacities = "Visible";
            break;
        }
    }

    IsEditing = false;
} 
```

这篇文章 (http://stackoverflow.com/questions/8847661/datagridtextcolumn-visibility-binding) 告诉我，我需要使用 Source 和 Xreference。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:54:24.740

SO上有各种文章讨论这个问题。搜索“wpf 可见性绑定数据网格列”。

问题是因为DataGrid列不属于DataGrid的可视化或逻辑树，所以WPF找不到合适的DataContext。尝试使用相对或元素绑定也会失败。

不用说，一些聪明的人已经解决了这个问题。我最喜欢的解决方案是这里解释的代理可冻结方法：[http ://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited /](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)这对我来说很好。

# javascript - 在 CakePHP 中为删除操作实现可点击的图像？

> ID：10616545
> 
> 赞同：0
> 
> 时间：2012-05-16T10:20:11.940
> 
> 标签：javascript, event-handling, cakephp-1.3

我想利用可点击的图像来触发删除操作。单击时，我还需要加载警报消息以确认操作。任何人都可以建议如何将它实现到我现有的代码中，如下所示：

```
echo $popup->link($html->image("delete.jpg", array('alt' => 'Delete', 'title'=>'Delete Enquiry'))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:28:33.740

我蛋糕 php 我们发出这样的警报：-

```
<?php echo $this->Html->link(__('Delete', true), array('action' => 'delete', $tduPrice['TduPrice']['id']), null, sprintf(__('Are you sure you want to delete # %s?', true), $tduPrice['TduPrice']['id'])); ?> 
```

根据你的代码修改它..

# javascript - jQuery Mobile pageinit、脚本加载等

> ID：10616546
> 
> 赞同：0
> 
> 时间：2012-05-16T10:20:16.197
> 
> 标签：javascript, jquery, jquery-mobile, bind, unbind

我目前正在开发基于 jQuery Mobile 的应用程序。我们选择它是因为在那一刻它看起来如此闪亮和美味，但随着我的工作越多，我就越会陷入多种事情。

我分别创建了所有页面并且它们工作正常，但是在将它们相互链接后，我开始遇到一些困难。

对于每个页面，我需要加载不同的脚本和 3rd 方库，经过一些研究后，我想出了为 data-role="page" 添加 id 并使用 .delegate() 加载它们，但这给我带来了麻烦，所以问：

1）当你移动到另一个页面时，如何取消绑定/杀死/清除/删除所有加载的脚本？

问题是，当我要转到“第 2 页”并执行以下操作时：

```
$(document).delegate('#page-2', 'pageinit', function() {

...do something

}); 
```

转到“第 1 页”或“第 3 页”后，使用 #page-2 .deligate() 加载的内容仍保留在 DOM 中并与其他页面上的脚本发生冲突。

* * *

PS 凌乱但整个文件可以在这里看到 - [http://cloud.ignatynikulin.com/011R3x2k401i271N420N](http://cloud.ignatynikulin.com/011R3x2k401i271N420N)

* * *

PPS 另一个问题的快速更新：

为什么如果条件在 .deligate() pageInit 中不起作用以及如何使其起作用？

* * *

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:43:11.063

不完全是答案，但你能在单独的文件中移动一些页面吗？就我而言，如果我想编辑列表中显示的项目，我将使用单独的 aspx 文件。例如，

```
<ul data-role="listview">
  ...
  <li>
    <a href="ItemPage.aspx?Id=1" rel="external">Item1</a>
  </li>
  ...
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:53:39.440

我猜你的问题是关于如何从 DOM 中删除加载的脚本。

在同一行中发现了一个现有问题： [JavaScript 不是 DOM 的一部分吗？](https://stackoverflow.com/questions/2707011/is-the-javascript-not-part-of-the-dom)

# c++ - C++ 预处理器宏中的代码块在没有大括号的情况下不起作用

> ID：10616547
> 
> 赞同：2
> 
> 时间：2012-05-16T10:20:22.810
> 
> 标签：c++, c-preprocessor, operator-keyword, insertion

以下`#define`部分有效：

```
#define OUT(x) \
   if(x > 0) cout << "Hello "; \
   if(x > 1) cout << x+1

OUT(1) << "message";     // OK

if(0) {
   OUT(1) << "message";     // OK, nothing printed
}

if(0)
   OUT(1) << "message";     // NO, printed anyway 
```

我明白为什么它不起作用（`if(0)`仅适用于`if(x > 0)`）。
我找不到让它工作的方法。考虑到我不能在定义中放大括号，否则我将不允许使用插入运算符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:34:48.013

## 更新为打印“你好”

可以这样做（哦，丑陋！）：

```
#define OUT(x) if((x > 0 ? cout << "Hello " : cout), x > 1) cout << x+1 
```

这是一个“标准”逗号运算符技巧，它允许在`if`条件内评估其他表达式，而不会影响最后采用的分支。

在这种情况下，添加了一个表达式：计算原始条件的三元运算符`x > 0`。产生所需副作用的表达式（不是语句，但此限制在这里无关紧要）放置在三元的“真”分支中。“假”分支的计算结果根本不重要，只要它与“真”分支的结果类型相同（或可以隐式转换为）。

这里的“真”分支返回一个`ostream&`，所以最简单的方法是也`cout`从“假”分支返回并收工。

## 回答原始问题

在最初发布的情况下（使用`x`and `y`），宏将是

```
#define OUT(x) if((x > 0 ? y = x : 0), x > 1) cout << x+1 
```

对于这种特定情况，也可以写成

```
#define OUT(x) if((y = x > 0 ? x : y), x > 1) cout << x+1 
```

**[看到它在行动](http://ideone.com/EJv2v)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:27:11.387

创建一个返回对 的引用的函数，`std::cout`然后在您的 MACRO 中使用此函数。

```
#define OUT(x) MyOut( x, y ) 
```

MyOut 是：

```
std::ostream& MyOut( int x, int& yRef )
{
    if(x > 0) yRef = x;
    if(x > 1) 
    {
        std::cout << x+1;
        return std::cout;
    }
    return SomeNoOpOstream;
} 
```

# android - 无法获取提供者 mono.MonoRuntimeProvider

> ID：10616549
> 
> 赞同：2
> 
> 时间：2012-05-16T10:20:32.697
> 
> 标签：android, xamarin.android

`monoadndroid`当我尝试在发布模式下构建包时，出现错误“评估版本需要以共享运行时为目标”。
如果我在 包成功创建`Use shared runtime`下打开。 但是当我在android下运行它时，它会在启动时给我错误。显示以下错误。`ProjectProperties > Mono Android Option`

`log cat`

```
E/AndroidRuntime(  239): FATAL EXCEPTION: main

E/AndroidRuntime(  239): java.lang.RuntimeException: Unable to get provider mono.MonoRuntimeProvider: java.lang.RuntimeException: Unable to find application Mono.Android.DebugRuntime or Mono.Android.Platform.ApiLevel_8! 
```

我正在开发 MonoforAndroid 的评估版！

# ajax - 在执行 Ajax 请求时，Chrome 在某些情况下会给出“XMLHttpRequest Exception 101”

> ID：10616552
> 
> 赞同：0
> 
> 时间：2012-05-16T10:20:52.310
> 
> 标签：ajax, google-chrome, xmlhttprequest

我有一个像这样工作的 JavaScript 应用程序：

*   上传文件，接收上传的文件 ID 作为响应
    *这是使用 BlueImp 上传器完成的*
*   使用文件 ID 在后续请求中引用文件，在这种情况下接收上传文件的预览。

这是文件上传“完成”处理程序的代码。它最初是用 Coffee Script ( [http://pastebin.com/708Cf9tu](http://pastebin.com/708Cf9tu) ) 编写的。

```
var completeHandler = function(e, data) {
    var url;
    if (data.textStatus !== 'success') {
        alert("Noe gikk galt. Debug informasjon er logget i konsollen");
        console.group('Upload failure');
        console.error(data.textStatus);
        console.error(data.result);
        console.groupEnd('Upload failure');
        selectButton.removeClass('disabled');
        uploadButton.removeClass('disabled loading');
        uploadButton.html('Last opp');
        return;
    }
    self.fileUploadResponse = data.result;
    url = "" + config.api_root + "/" + config.api_path_tabulardatafilepreview;
    return $.ajax(url, {
        type: 'POST',
        dataType: 'json',
        async: false,
        data: {
            'file_handle': data.result.file_handle,
            'rownum': 5
        },
        complete: function(req, text_status) {
            if (text_status !== 'success') {
                alert("Noe gikk galt. Debug informasjon er logget " + "i konsollen");
                console.group('Failed to receive data file preview');
                console.log(text_status);
                console.log(req.responseText);
                console.log(req);
                console.groupEnd('Failed to receive data file preview');
                selectButton.removeClass('disabled');
                uploadButton.removeClass('disabled loading');
                uploadButton.html('Last opp');
            }
            self.previewData = JSON.parse(req.responseText);
            return self.setStage(2);
        }
    });
}; 
```

这在 FireFox 中运行良好，但在 Chrome 中，我刚开始在第二个 jQuery Ajax 请求中遇到错误。它现在返回状态“错误”，没有 responseText，并且 statusText 设置为“错误：NETWORK_ERR：XMLHttpRequest Exception 101”。尽管并非在**所有**情况下都会发生这种情况。上传的文件似乎与问题无关，因为*10KB*的csv 文件有效，*120KB*的xlsx 文件失败，但*1.2MB*的xlsx 有效。此外，这是第二个失败的 Ajax 请求，它除了向服务器发送两个小整数之外什么也不做。为什么会失败！？

这也是今天才开始发生的。我没有更改我所知道的任何内容，也**没有**更新 Chrome。

有没有人知道为什么 Chrome 会这样做？它与在先前 Ajax 请求的完整处理程序中启动的 Ajax 请求有什么关系吗？

感谢任何可以帮助我解决这个问题的猜测

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:39:45.140

事实证明，在 Ajax 事件处理程序中启动冗长的进程是个坏主意。在我的例子中，在事件处理程序中启动一个新的同步 Ajax 请求是错误的。从那以后，我将两个请求都设为异步，并将代码分成简洁的函数，我不再为异常所困扰。

# c# - c#的ObservableDictionary

> ID：10616554
> 
> 赞同：7
> 
> 时间：2012-05-16T10:20:55.123
> 
> 标签：c#, wpf, dictionary, binding, inotifypropertychanged

我正在尝试使用 ObservableDictionary 的以下实现：[ObservableDictionary (C#)](http://blogs.microsoft.co.il/blogs/shimmy/archive/2010/12/26/observabledictionary-lt-tkey-tvalue-gt-c.aspx)。

当我在将字典绑定到 DataGrid 时使用以下代码时：

```
ObserveableDictionary<string,string> dd=new ObserveableDictionary<string,string>();
....
dd["aa"]="bb";
....
dd["aa"]="cc"; 
```

在`dd["aa"]="cc";`我得到以下异常

```
Index was out of range. Must be non-negative and less than the size of the 
collection. Parameter name: index 
```

此异常`CollectionChanged(this, new NotifyCollectionChangedEventArgs(action, newItem, oldItem)`在以下方法中引发：

```
private void OnCollectionChanged(NotifyCollectionChangedAction action, KeyValuePair<TKey, TValue> newItem, KeyValuePair<TKey, TValue> oldItem)
{
  OnPropertyChanged();

  if (CollectionChanged != null) CollectionChanged(this, new NotifyCollectionChangedEventArgs(action, newItem, oldItem));
} 
```

该`index`参数似乎对应于`KeyValuePair<TKey, TValue> oldItem`.

怎么可能`KeyValuePair<TKey, TValue>`超出范围，我应该怎么做才能使这项工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T10:03:38.843

这是我最后所做的：

```
[Serializable]
public class ObservableKeyValuePair<TKey,TValue>:INotifyPropertyChanged
{
    #region properties
    private TKey key;
    private TValue value;

    public TKey Key
    {
        get { return key; }
        set
        {
            key = value;
            OnPropertyChanged("Key");
        }
    }

    public TValue Value
    {
        get { return value; }
        set
        {
            this.value = value;
            OnPropertyChanged("Value");
        }
    } 
    #endregion

    #region INotifyPropertyChanged Members

    [field:NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(name));
    }

    #endregion
}

[Serializable]
public class ObservableDictionary<TKey,TValue>:ObservableCollection<ObservableKeyValuePair<TKey,TValue>>, IDictionary<TKey,TValue>
{

    #region IDictionary<TKey,TValue> Members

    public void Add(TKey key, TValue value)
    {
        if (ContainsKey(key))
        {
            throw new ArgumentException("The dictionary already contains the key");
        }
        base.Add(new ObservableKeyValuePair<TKey, TValue>() {Key = key, Value = value});
    }

    public bool ContainsKey(TKey key)
    {
        //var m=base.FirstOrDefault((i) => i.Key == key);
        var r = ThisAsCollection().FirstOrDefault((i) => Equals(key, i.Key));

        return !Equals(default(ObservableKeyValuePair<TKey, TValue>), r);
    }

    bool Equals<TKey>(TKey a, TKey b)
    {
        return EqualityComparer<TKey>.Default.Equals(a, b);
    }

    private ObservableCollection<ObservableKeyValuePair<TKey, TValue>> ThisAsCollection()
    {
        return this;
    }

    public ICollection<TKey> Keys
    {
        get { return (from i in ThisAsCollection() select i.Key).ToList(); }
    }

    public bool Remove(TKey key)
    {
        var remove = ThisAsCollection().Where(pair => Equals(key, pair.Key)).ToList();
        foreach (var pair in remove)
        {
            ThisAsCollection().Remove(pair);
        }
        return remove.Count > 0;
    }

    public bool TryGetValue(TKey key, out TValue value)
    {
        value = default(TValue);
        var r = GetKvpByTheKey(key);
        if (!Equals(r, default(ObservableKeyValuePair<TKey, TValue>)))
        {
            return false;
        }
        value = r.Value;
        return true;
    }

    private ObservableKeyValuePair<TKey, TValue> GetKvpByTheKey(TKey key)
    {
        return ThisAsCollection().FirstOrDefault((i) => i.Key.Equals(key));
    }

    public ICollection<TValue> Values
    {
        get { return (from i in ThisAsCollection() select i.Value).ToList(); }
    }

    public TValue this[TKey key]
    {
        get
        {
            TValue result;
            if (!TryGetValue(key,out result))
            {
                throw new ArgumentException("Key not found");
            }
            return result;
        }
        set
        {
            if (ContainsKey(key))
            {
                GetKvpByTheKey(key).Value = value;
            }
            else
            {
                Add(key, value);
            }
        }
    }

    #endregion

    #region ICollection<KeyValuePair<TKey,TValue>> Members

    public void Add(KeyValuePair<TKey, TValue> item)
    {
        Add(item.Key, item.Value);
    }

    public bool Contains(KeyValuePair<TKey, TValue> item)
    {
        var r = GetKvpByTheKey(item.Key);
        if (Equals(r, default(ObservableKeyValuePair<TKey, TValue>)))
        {
            return false;
        }
        return Equals(r.Value, item.Value);
    }

    public void CopyTo(KeyValuePair<TKey, TValue>[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(KeyValuePair<TKey, TValue> item)
    {
        var r = GetKvpByTheKey(item.Key);
        if (Equals(r, default(ObservableKeyValuePair<TKey, TValue>)))
        {
            return false;
        }
        if (!Equals(r.Value,item.Value))
        {
            return false ;
        }
        return ThisAsCollection().Remove(r);
    }

    #endregion

    #region IEnumerable<KeyValuePair<TKey,TValue>> Members

    public new IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        return (from i in ThisAsCollection() select new KeyValuePair<TKey, TValue>(i.Key, i.Value)).ToList().GetEnumerator();
    }

    #endregion
} 
```

这个实现看起来和感觉就像用户的字典和 WPF 的 ObservableCollection

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T10:31:31.373

类似的数据结构，绑定到 Dictionary 类型的集合

[http://drwpf.com/blog/2007/09/16/can-i-bind-my-itemscontrol-to-a-dictionary/](http://drwpf.com/blog/2007/09/16/can-i-bind-my-itemscontrol-to-a-dictionary/)

它提供了一个新的数据结构 ObservableDictionary 并在底层字典发生任何更改时触发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-15T16:26:01.173

ObservableDictionary 在 4.5 版被添加到 .Net 框架中：-

[https://zamjad.wordpress.com/2012/10/12/observabledictionary-in-net-4-5/](https://zamjad.wordpress.com/2012/10/12/observabledictionary-in-net-4-5/)

这是最新源代码的链接：-

[https://referencesource.microsoft.com/#PresentationFramework/src/Framework/MS/Internal/Annotations/ObservableDictionary.cs](https://referencesource.microsoft.com/#PresentationFramework/src/Framework/MS/Internal/Annotations/ObservableDictionary.cs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-02T14:43:06.507

我最终编写了一个类来保存键值对并使用该类的集合。我正在使用 Caliburn Micro，这是 BindableCollection 的来源，但 ObservableCollection 应该以相同的方式工作。我使用 MVVM 模式。

视图模型

```
using Caliburn.Micro;

private BindableCollection<KeyValuePair> _items;

public BindableCollection<KeyValuePair> Items
{
  get { return _items; }

  set
  {
    if (_items != value)
    {
      _items = value;
      NotifyOfPropertyChange(() => Items);
    }
  }
} 
```

自定义键值对

```
public class KeyValuePair 
{
  public string Key { get; set; }

  public string Value { get; set; }
} 
```

并且在视图中

```
<ItemsControl ItemsSource="{Binding Items}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="2*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TextBox Grid.Column="0"
                 Text="{Binding Key, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <TextBox Grid.Column="1"
                 Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
      </Grid>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

让我感到困扰的是，我不能只绑定到字典，但我发现这比从头开始编写 ObservableDictionary 并担心更改通知要容易和干净得多。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-12-13T14:35:51.877

即使我使用的是 github 的 ObservableDictionary，我也遇到了这个异常。我在类级别声明了字典变量，后来我尝试在访问它的方法中创建一个新实例。

OldCode 给出了异常：

```
public class CName
{
  ObservableDictionary<string, string> _classVariableDictionary = new ObservableDictionary<string, string>();
} 
```

有效的新代码：

```
public void MethodName()
{
    ObservableDictionary<string, string> _localVariableDictionary = new ObservableDictionary<string, string>();
} 
```

# web - 将 Web 应用程序从 Tomcat 移动到 WebLogic 时库版本错误

> ID：10616559
> 
> 赞同：0
> 
> 时间：2012-05-16T10:21:11.973
> 
> 标签：web, weblogic, java

我的 java web 应用程序在 Apache Tomcat 上运行。它的工作需要一些第三方库（尤其是 jasperreports 3.7.2）。但是现在有必要在 WebLogic 上移动应用程序。而且它似乎不是使用它之前使用的库（在 Tomcat 上），而是该库的其他版本（我怀疑默认情况下 WebLogic 附带的库）。如何指定库的具体版本并让 WebLogic 使用它？我以前从未使用过weblogic。也许我应该在部署描述符或类似的东西中输入一些东西？感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:14:11.663

如果你在你的战争中的 WEB-INF/lib 中有你想要的 JAR，你可以告诉 Weblogic 使用那个 jar 而不是 Classloader 中可能存在的任何其他 jar。

*   在 Web 应用程序部署描述符中使用[prefer-web-inf-classes](http://download.oracle.com/docs/cd/E12840_01/wls/docs103/programming/classloading.html#wp1082452)元素`weblogic.xml`（位于 WEB-INF 旁边`web.xml`）

这是一个示例 weblogic.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-web-app
 xmlns="http://www.bea.com/ns/weblogic/90"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic- web-app.xsd">
    <container-descriptor>
        <prefer-web-inf-classes>true</prefer-web-inf-classes>
     </container-descriptor>
</weblogic-web-app> 
```

注意：在这种用法中，所有 WEB_INF/lib 类都将优先于类路径中的其他版本。

# android - 如何听软键盘中的按键？

> ID：10616567
> 
> 赞同：8
> 
> 时间：2012-05-16T10:21:48.503
> 
> 标签：android, keyboard, listener, keylistener

我需要一个监听器来识别软键盘/屏幕键盘中的按键。

我尝试使用 addtextchangelistener textwatcher 但这一个给出了很好的结果但是当一些文本被粘贴到它时它也会显示更改。

我只需要识别用户的按键。

是否有任何可能的方法来检测按键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:39:29.510

查看此[键事件](http://developer.android.com/reference/android/view/KeyEvent.html)并使用以下代码来识别用户按下了哪个键。

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) 
    {
         // Do Code here
    }
else if(keyCode == KeyEvent.KEYCODE_0) 
   {

   }
else if(keyCode == KeyEvent.KEYCODE_1) 
   {

   }
return super.onKeyDown(keyCode, event); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-20T14:02:12.577

> 使用 KeyEvent 类和相关 API 处理键盘事件时，您应该期望此类键盘事件仅来自硬件键盘。**您永远不应依赖接收软输入法（屏幕键盘）上任何键的键事件**。

请参阅：[处理键盘操作](https://developer.android.com/training/keyboard-input/commands.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:43:30.020

看看这个如果可以帮助你。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 1) {          
            finish();
            return true;    
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:25:37.113

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // Do Code here
    }
    return super.onKeyDown(keyCode, event);
} 
```

# c# - 如何创建简单的短哈希值？C＃

> ID：10616572
> 
> 赞同：12
> 
> 时间：2012-05-16T10:22:22.050
> 
> 标签：c#, hash

如何创建简单的哈希值？例如，我有字符串“TechnologyIsCool”以及如何从该字符串中获取哈希值？

我想做一些方法，例如：

```
public string HashThis(string value)
{
    string hashResult = string.Empty;

    ...

    return hashResult;
} 
```

并像这样调用这个方法：

```
string hash = HashThis("TechnologyIsCool"); 
```

之后有像“5qazws”这样的哈希值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T10:27:32.887

使用[String.GetHashCode 方法](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx)

```
 public static void Main() 
    {
        DisplayHashCode( "Abcdei" );
    }

static void DisplayHashCode( String Operand )
{
    int     HashCode = Operand.GetHashCode( );
    Console.WriteLine("The hash code for \"{0}\" is: 0x{1:X8}, {1}",
                      Operand, HashCode );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T10:26:28.303

采用`GetHashCode();`

```
public string HashThis(string value)
{
    return hashResult = value.GetHashCode();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-19T01:47:31.607

不，您不能使用 String.GetHashCode() ，因为这不能保证每次都在同一字符串上返回相同的哈希值。

# php - 如何将cookie数据插入mysql数据库php？

> ID：10616573
> 
> 赞同：-1
> 
> 时间：2012-05-16T10:22:22.357
> 
> 标签：php, mysql, database, insert

我有一个保存在 cookie 中的数据数组，像这样

```
1:good,2:accelent,3:bad,4:good,fname:Ahmad,lname:Riaz,title:Developer,org:Magiclamp,email:Riaz@khan.com 
```

在这里我想将这些数据保存在不同的表中 这个在一个表中

```
1:good,2:accelent,3:bad,4:good 
```

这在另一张桌子上

```
fname:Ahmad,lname:Riaz,title:Developer,org:Magiclamp,email:Riaz@khan.com 
```

我怎么解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:24:59.223

[使用$_COOKIE](http://www.php.net/manual/en/reserved.variables.cookies.php)读取 cookie ：`$cookie_val = $_COOKIE['NAME'];`

[使用explode()](http://www.php.net/manual/en/function.explode.php)拆分输入：`$cookie_array = explode(",", $cookie_val);`

从结果数组中使用所需的值：`$cookie_array[0], $cookie_array[1] ...`

在插入数据库之前清理值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:27:19.240

```
<?php
$str = "1:good,2:accelent,3:bad,4:good,fname:Ahmad,lname:Riaz,title:Developer,org:Magiclamp,email:Riaz@khan.com";

$rows = explode(',', $str);

$data['table1'] = $data['table2'] = array();

foreach($rows as $k => $v) {
$a = explode(':', $v);
$data[(is_numeric($a[0]) ? 'table1' : 'table2')][$a[0]] = $a[1];
}

var_dump($data);
?> 
```

这会将数据分成两个数组。

# mysql - 从 Spring Services 调用的存储过程完成工作后，如何立即开始一些工作？

> ID：10616574
> 
> 赞同：0
> 
> 时间：2012-05-16T10:22:22.437
> 
> 标签：mysql, sql, spring, stored-procedures, transactions

存储过程（来自 mysql db）中的代码是否与我在 spring 服务中执行的代码异步执行？

只有当存储过程的查询完成执行后，我的 Spring 服务中的代码才会恢复？

如果代码异步执行，如何强制 Spring Service 中的代码仅在存储过程中的代码完成后执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:53:57.007

显然是的。当您从服务调用存储过程时，其余的执行将仅在执行存储过程后开始。

# iphone - 从 nib 加载的视图不接收触摸事件

> ID：10616576
> 
> 赞同：0
> 
> 时间：2012-05-16T10:22:26.460
> 
> 标签：iphone, ios, nib, loadnibnamed

我正在尝试从笔尖加载一个视图并将其添加到主视图中。这是我的代码。

我将笔尖加载`initWithFrame`到`@interface AddTaskView:UIView`：

```
 - (id)initWithFrame:(CGRect)frame
    {
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"init with frame");
        // Initialization code

        NSArray *addTaskArrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"AddTaskView"
                                                                     owner:self
                                                                   options:nil];
        self=[addTaskArrayOfViews objectAtIndex:0];
    }
    return self;
    } 
```

之后我初始化视图并将其添加到主视图：

```
 self.addTaskView=[[AddTaskView alloc]initWithFrame:CGRectMake(0, 0, 320, 460)];
    [self.view addSubview:self.addTaskView]; 
```

一切正常，但 AddTaskView 没有收到触摸事件。我有三个按钮，当我尝试按下它们时，它们不会收到动作。我制作了“AddTaskView”类型的笔尖，但没有任何运气。我还查看了子视图，“AddTaskView”是顶视图。

我在 AddTaskView 中添加了这段代码，看看我是否得到了触摸并且没有响应：

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
        NSLog(@"touch");
    } 
```

我如何有机会响应触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:41:11.863

我认为您必须注册一个触摸调度程序，然后尝试联系....以下是该代码

```
-(void)registerWithTouchDispatcher{
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0swallowsTouches:YES];}

-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
return YES;}

-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event{
touchLocation = [touch  locationInView:[touch view]];
NSLog(@"Touch is working");} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:28:44.757

```
[UIView beginAnimations:@"MoveAndStrech" context:nil];

[UIView setAnimationDuration:1];

[UIView setAnimationBeginsFromCurrentState:YES];

[UIView commitAnimations]; 
```

# perl - 执行 perl 测试的时间指定了什么

> ID：10616582
> 
> 赞同：2
> 
> 时间：2012-05-16T10:22:47.290
> 
> 标签：perl, automation

我有大量基于 Selenium 的 perl 测试脚本。完成测试后，它会打印如下日志。这说明了什么？如何计算以下时间以及基于什么

```
Files=1, Tests=17, 209 wallclock secs ( 0.13 usr +  0.01 sys =  0.14 CPU) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T11:05:36.347

```
209 wallclock secs ( 0.13 usr +  0.01 sys =  0.14 CPU) 
```

运行时间为 209 秒。这些秒是根据墙上（或手腕上）的时钟经过的时间。

大部分时间都花在等待某事上。等待？好吧，CPU 花了很多时间等待，所以当时间流逝时，CPU 并没有在正在计时的程序上工作。我们知道这一点是因为报告的实际 CPU 时间仅为 0.14 秒，因此这意味着几乎所有的 209 秒都在等待。

[在usermode](http://www.google.com/search?q=usermode)中花费的时间和在[syscalls](http://www.google.com/search?q=syscalls)中花费的时间之间还有进一步的区别。简而言之，前者指的是 CPU 在您的程序上花费的时间，而后者指的是 CPU 处理系统调用所花费的时间，即代表您的程序对操作系统进行的调用。

**多核附录：**正如@ArtM 指出的，或者更确切地说让我发现，给定的时间`usr`是`sys`程序运行的所有内核的累积时间，这意味着可能存在总 CPU 时间甚至任何一个of`usr`并且`sys`可能高于挂钟时间，这可能看起来很奇怪，但当您考虑多核上的并行性时，这是有道理的。

如果您想了解有关此问题`usr/sys`或*用户模式*与*内核模式*问题的更多信息，请查看[此更全面的答案](https://stackoverflow.com/a/556411/269126)。

# javascript - jNavigate 刷新当前页面

> ID：10616584
> 
> 赞同：1
> 
> 时间：2012-05-16T10:22:59.737
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 Jquery [jNavigate](http://jnavigate.com/)插件，一切正常。除了在我的 JS 代码的其他部分的某个时刻，我希望能够刷新容器中当前显示的内容。我怎样才能做到这一点？

这是我所做的。

我有一个应该通过 AJAX 显示的内容容器：

```
<div id="container">

</div> 
```

然后我在上面初始化 jNavigate 插件

```
$('#container').jNavigate({
        spinner: 'img/loading_icon.gif',
        extTrigger: '.jnav-ext', 
        intTrigger: '.jnav-int'}); 
```

我有几个与 jNavigate 一起使用的链接：

```
<a href="content/home" class="jnav-ext">Home</a>
<a href="content/about" class="jnav-ext">About</a> 
```

所以一切都很好，除了我无法刷新当前内容。插件本身`navigate()`内部有方法。那么如何从外部调用该方法来刷新容器中的内容（刷新同一页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:06:38.800

我自己想通了。以下是正确答案：

```
$('#container').jNavigate("navigate", {url: window.location.href}); 
```

`#container`每当您想重新加载最初通过 jNavigate加载的当前页面时调用它。

# sql - 从 3 个没有冗余的表中获取值-SQLite

> ID：10616588
> 
> 赞同：1
> 
> 时间：2012-05-16T10:23:06.337
> 
> 标签：sql, sqlite, select

我想从 3 个不同的表中检索 Name 的列值

```
 Table1 contains Name
  Table2 contains Name, BAmt
  Table3 contains Name, RAmt 
```

现在我想从所有 3 个表中获取名称。假设表包含这些值

```
 Table1:     Table2:                    Table3:
   Name        Name        BAmt           Name         RAmt
1\. Jack      1.Alice       1000         1.Mark         5000
2\. Mark      2.Jack        500          2.Tarzon       1000
3\. Ricky                                3.Beth         5500
                                        4.Jack         100 
```

现在我想要一个包含所有名称的表（没有任何名称的重复）。理想情况下，新表应包含这些值

```
 Name    BAmt      RAmt
1.Jack    500       100
2.Mark              5000
3.Ricky
4.Alice   1000    
5.Tarzon            1000
6.Beth              5500 
```

在这里，它忽略了重复，但从表中获取了这些列的必要值。我应该使用什么样的选择语句。这是我的想法，但我猜它的方法是错误的：

```
 Statement statement1 = db.createStatement("SELECT DISTINCT Name,BAmt,RAmt FROM Table1,Table2,Table3");
                    statement1.prepare();
                    statement1.execute(); 
```

请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:29:27.923

您需要[合并所有](http://www.sqlite.org/lang_select.html)表格以获得该大纲：

```
select Name, 
       ifnull (sum(BAmt), 0) BAmt,
       ifnull (sum(RAmt), 0) RAmt
from
(
  select Name, 
         null BAmt,
         null RAmt
    from Table1
   union all
  select Name,
         BAmt,
         null
    from Table2
   union all
  select Name,
         null,
         RAmt
    from Table3
) allTables
group by Name
order by Name 
```

编辑：更新以用零替换空值。请参阅[ifnull 的文档](http://www.sqlite.org/lang_corefunc.html#ifnull)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:39:53.297

Join 将处理它：

```
select name, bamt, ramt from table1 t1 left outer join table2 t2 on t1.name = t2.name left outer join table3 on t1.name = t3.name order by name; 
```

# servlets - @PostConstruct 在 JBoss 5 中不起作用

> ID：10616591
> 
> 赞同：0
> 
> 时间：2012-05-16T10:23:29.410
> 
> 标签：servlets, jersey, postconstruct

我有一个无法更改的 servlet（[`com.sun.jersey.spi.container.servlet.ServletContainer`](http://grepcode.com/file/repo1.maven.org/maven2/com.ning/metrics.goodwill/1.1.5/com/sun/jersey/spi/container/servlet/ServletContainer.java)来自 Jersey RS）。我能做的是创建它的子类。但是，我需要在初始化 servlet 时运行我的子类的一个函数。我无法覆盖该`init`方法，因为它具有泽西岛代码。

我尝试`@PostConstruct`在方法上使用注解使其在初始化后运行，但它不起作用（但它在 Tomcat 6 下确实有效）。在`web.xml`类中设置为在启动时运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:36:29.897

您应该能够继承`ServletContainer`、覆盖`init`、调用超类方法然后执行您自己的逻辑，即

```
public class MyServletContainer extends ServletContainer {

   public void init() throws ServletException {
      super.init();

      //... perform custom initialization logic here
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T21:19:05.100

检查您的 webapp 库中是否有一些罐子“commons-annotation.jar、geronimo-annotation_1.1_spec、jboss-annotations-api_1.1_spec”并删除。

# javascript - Javascript - 读取文件（不是上传的文件，而是与 html 文件位于同一目录中的文件）

> ID：10616592
> 
> 赞同：3
> 
> 时间：2012-05-16T10:23:32.637
> 
> 标签：javascript, html

我为此尝试了很多，但没有找到答案。如何使用 javascript 或 html 读取文件。我有一个文本文件“sample.txt”，里面有一些信息。它与 html 文件位于同一文件夹中，该 html 文件包含处理此文件的 html 代码。我只想从文件中读取信息并将其显示在某个 div 或其他内容上，我主要想知道如何读取文件。

如有必要，将提供更多信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:26:02.313

起初：JavaScript 在客户端执行。虽然你必须提出一个 AJAX 请求来获取文件的内容。我认为 jQuery[`load()`](http://api.jquery.com/load/)似乎是实现这一目标的最简单方法。

例如：

```
$('#theContentElement').load('sample.txt'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:39:55.203

您也可以在没有 jQuery 的情况下执行常规 Ajax 请求来读取文件。

以下使用 GET 请求从 myfile.txt 获取数据并将其输出到带有 id *output*的 DIV-tag 。

```
<script>
function ajaxGet()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("output").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","myfile.txt",true);
xmlhttp.send();
}
ajaxGet();
</script>

<div id="output"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:31:10.247

您可以使用 javascript 获取实际的文件内容。这是一个使用 jquery 并使用[load](http://api.jquery.com/load/)函数的示例代码：

```
$("#YOUR_DIV_ID").load("sample.txt"); 
```

这将使用“sample.txt”的内容更新 id 为 YOUR_DIV_ID 的 div 的内容

# iphone - NSURLConnection 发送数据两次

> ID：10616597
> 
> 赞同：2
> 
> 时间：2012-05-16T10:23:53.603
> 
> 标签：iphone, objective-c, image, upload, nsurlconnection

我正在将图像上传到我的服务器，当我上传图像时，我试图向用户显示上传的进度条。但是在 NSURLConnection 委托方法中`connection: didSendBodyData: totalBytesWritten: totalBytesExpectedToWrite:`，我得到了令人困惑的数字。假设我的数据是 X 字节长。起初我得到totalBytesExpectedToWrite 为X，但在totalBytesWritten 达到totalBytesExpectedToWrite 之后，我的连接仍然在进行上传，并且totalBytesExpectedToWrite 转移到2X。它总是正好是 2X，我不知道为什么。连接是相同的（按 id），我只调用它一次。

这是我上传图片的代码：

```
- (void)uploadImage:(UIImage *)image
{ 
// random boundary string
NSString *boundary = @"----8745633765875256----";

NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
NSMutableData *requestData = [[NSMutableData alloc] init];

// append boundary and separate it with new line
[requestData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// setting up header files, appending image and separating body with boundary
[requestData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"ad_image\"; filename=\"%@\"\r\n", @"tmp.jpg"] dataUsingEncoding:NSUTF8StringEncoding]];
[requestData appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[requestData appendData:imageData];
[requestData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];  

// initializing request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@&user_id=%@&api_key=%@", kUrlImageTempAdd, userID, apiKey]]];
[request setHTTPMethod:@"POST"];

// setting up content-type "form" to multipart/form-data for image upload
[request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:requestData];

//setting up content length
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-

// connection init and start
NSURLConnection *connection = [[[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:true] autorelease];
} 
```

这是我的委托方法：

```
- (void)connection:(NSURLConnection *)connection
didSendBodyData:(NSInteger)bytesWritten
totalBytesWritten:(NSInteger)totalBytesWritten
totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite
{
NSLog(@"connection %@ bytes sent %d/%d (%f%%)", connection, totalBytesWritten, totalBytesExpectedToWrite, ((float)totalBytesWritten / (float)totalBytesExpectedToWrite) * 100.0f);
} 
```

有什么建议为什么会发生这种情况？我在这里失去理智:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:29:09.910

文档`-connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:`说

> 如果由于连接丢失或来自服务器的身份验证质询而需要重新传输请求，totalBytesExpectedToWrite 的值可能会在上传期间发生变化。

（当`NSURLConnection`委托方法从非正式协议转变为正式协议时，它的文档似乎在很大程度上丢失了。您可以查看标题中的注释或让 Xcode 下载一个较旧的文档集并在那里查看。）

您可以实现其他一些委托方法来观察可能发生的情况，例如身份验证质询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:57:48.790

您正在使用的委托方法可以被调用很多次，因为它报告数据上传到服务器的状态更新......

NSURLConnection 对象将以字节包的形式将数据传输到服务器，每次发送数据包时，它都会调用委托方法。

如果您只想知道上传何时结束，您需要使用此委托方法：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

[在 NSURLDownloadDelegate 委托的官方文档中查看更多信息](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLDownloadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLDownloadDelegate)

# android - 创建数据库时如何显示加载屏幕？

> ID：10616601
> 
> 赞同：0
> 
> 时间：2012-05-16T10:24:05.587
> 
> 标签：android, database, multithreading

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        loadData();
        setContentView(R.layout.preload);

        Thread thread = new Thread()
        {
            @Override
            public void run() {
               setUpDB();
               setContentView(R.layout.main);
            }
        };
        thread.start();
    } 
```

所以我希望它在数据库设置（setUpDB）时显示预加载视图，然后在设置完成后切换到主视图更改为主视图。我几乎可以正常工作了；显示加载器直到大约 80% 然后崩溃，但现在我什至无法让它显示加载器...如果我在线程中有 setUpDB() 它会崩溃，如果我有它在线程之外它显示一个空白屏幕直到完全加载。我不记得以前的代码了……有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:32:52.160

尝试使用 assynctask ..

```
 private class LoadAssync extends AsyncTask<String, Void, Void> { // Assync task

    protected void onPreExecute() {

            ProgressDialog dialog=ProgressDialog.show(this,"","Loading");

    }

    protected Void doInBackground(final String... args) {
         setUpDB();

    }

    protected void onPostExecute(final Void unused) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

    }
} 
```

执行 assynctask

```
LoadAssync mAsyync1;

mAsyync1 = new LoadAssync();
            mAsyync1.execute(null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:28:35.770

声明一个 Handler 并调用它来像这样更新你的 UI，

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

ProgressDialog pd=ProgressDialog.show(this,"","Please Wait...");
Handler handler =new Handler()
{
 public void handleMessage(Message msg)
{
 if(msg.what==0)
{
 pd.dismiss();
 setContentView(R.layout.main);
}
}
};   
            Thread thread = new Thread()
            {
                @Override
                public void run() {
                  loadData();
                   setUpDB();
                  handler.sendEmptyMEssage(0);
                }
            };
            thread.start();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:27:57.300

```
 setUpDB();
    splashHandler.sendEmptyMessageDelayed(STOP_SPLASH, STOP_SPLASH_DELAY);

private Handler splashHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {

        switch (msg.what) {
        case STOP_SPLASH:
                            progressbar.dismiss();  
            startActivity(new Intent(getApplicationContext(),
                    HomeScreenActivity.class));
            finish();
            break;
        }
    };
}; 
```

# iphone - iPhone：从 iphone 库导入视频

> ID：10616602
> 
> 赞同：3
> 
> 时间：2012-05-16T10:24:06.070
> 
> 标签：iphone

我正在从我的应用程序中的 iphone 库中导入视频……但我无法证明我在堆栈上研究了很多代码，但没有一个在工作……对我来说……基本上我正在 fb 和 twitter 上分享…… ...

```
-(IBAction)showVideoLibrary
{
UIImagePickerController *videoPicker = [[UIImagePickerController alloc] init];
videoPicker.delegate = self;
videoPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

videoPicker.mediaTypes =[[NSArray alloc] initWithObjects: (NSString *)kUTTypeMovie,nil];    
if(self.popoverController!=nil)
{
    [self.popoverController release];
}
self.popoverController  = [[UIPopoverController alloc] initWithContentViewController:videoPicker];
popoverController.delegate = self;
popoverController.popoverContentSize=CGSizeMake(320,1000);

[popoverController presentPopoverFromRect:CGRectMake(0,0,10,10) inView:self.view permittedArrowDirections:nil animated:YES];

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:26:19.343

在真正的 iPhone 设备上试用。这是我在项目中使用的从 iPhone 库中挑选视频的代码。只需将视频方法从选择器添加到您想要的按钮。

```
-(void)video
     {
     UIImagePickerController *imagePicker =
     [[UIImagePickerController alloc] init];
     imagePicker.delegate = self;
     imagePicker.sourceType = 
     UIImagePickerControllerSourceTypePhotoLibrary;

     imagePicker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];

     [self presentModalViewController:imagePicker animated:YES];

     }

     -(void) imagePickerController: (UIImagePickerController *) picker
     didFinishPickingMediaWithInfo: (NSDictionary *) info 
     {

     NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

     if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
     == kCFCompareEqualTo) 
     {

     NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];

       NSURL *videoUrl=(NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];
     // NSLog(@"%@",moviePath);

     if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
     UISaveVideoAtPathToSavedPhotosAlbum (moviePath, nil, nil, nil);
     }
     }

     [self dismissModalViewControllerAnimated:YES];

     [picker release];

     } 
```

不要忘记添加移动核心服务框架并导入

```
 #import <MobileCoreServices/UTCoreTypes.h> 
```

字符串“moviepath”为您提供该 iPhone 中视频的路径，然后对该视频执行任何所需的操作，在字符串电影路径中完成压缩后，您将获得视频路径`enter code here`

```
 MPMoviePlayerController *player =[[MPMoviePlayerController alloc] initWithContentURL: url];   //  give here the "videourl"  
 [[player view] setFrame: [self.view bounds]];  
 [self.view addSubview: [player view]];
 [player play]; 
```

# javascript - 用 Javascript 优化一个巨大的无序列表

> ID：10616604
> 
> 赞同：4
> 
> 时间：2012-05-16T10:24:18.240
> 
> 标签：javascript, jquery, html, optimization

我目前在我的网站上有一个搜索框，用于搜索图像并以列表元素的形式返回结果，如下所示：

```
<ul>
    <li rel="1"><img src="imgurl" /></li>
    <li rel="2"><img src="imgurl" /></li>
    <li rel="3"><img src="imgurl" /></li>
    <li rel="4"><img src="imgurl" /></li>
</ul> 
```

然后每个图像都有一个与之关联的点击事件，它只是将叠加层添加到所点击图像的父 li 中。

有时我的搜索结果将包含 300 多个结果，这在桌面上不是什么大问题，但在移动设备上会导致巨大的延迟，例如，当有人单击图像以添加叠加层时，可能需要 4-5 秒出现叠加。

现在我想到了一种解决方法，如下所示：

1.  将所有 li 元素添加到数组中（作为字符串而不是 DOM 元素）

2.  销毁原有的 li 元素。

3.  计算屏幕大小以及一次可以显示多少张图片

4.  添加用于滚动列表的滑块 ui 元素

5.  基于滑块的位置以及我们可以在屏幕上放置多少元素，从数组中提取我们实际可以看到的元素并销毁其余元素

6.  循环返回的数组结果并将所有结果添加到单个字符串中。然后将包含我们可以看到的所有结果的字符串附加到 UL 中。

我的问题是这真的会给我带来性能提升吗？我相信我最初的问题是dom中的元素太多。

这也是常见的事情吗？或者有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:33:43.887

移动设备上的缓慢性能似乎是由于 DOM 中的大量项目。我尝试了各种方法来加速 jsfiddle 上的代码（例如减少 jQuery DOM 请求的数量），但它仍然很慢[http://jsfiddle.net/5LfMt/15/](http://jsfiddle.net/5LfMt/15/)

我在您的原始问题中对建议进行了修改：http: [//www.strudel.org.uk/test/stack.html](http://www.strudel.org.uk/test/stack.html)它非常粗糙，没有任何错误检查，但表明基本想法有效并且更快。它可能还有助于页面渲染时间，因为浏览器最初不必渲染所有 500 张图像。

我假设您所有的图像都具有相同的已知高度。我创建了一个文件名数组，然后确定哪些是可见的。列表的顶部填充被更新，以确保我们留在文档中的正确位置。我附加了一个更新列表的滚动侦听器 - 删除列表项然后添加可见项。从 DOM 中删除它们的一个后果是覆盖层也被删除了，所以我创建了一个数组来记录覆盖层的状态。

# android - Android Listview 会随着适配器内容的变化而跳跃

> ID：10616610
> 
> 赞同：1
> 
> 时间：2012-05-16T10:25:00.770
> 
> 标签：android

我正在使用滚动侦听器来检测 Listview 的结尾。列表最初有 20 个项目。当到达终点时，我用数据库中的 10 多个项目填充列表。同时，我删除了前 10 个不可见的项目。由于我删除了前 10 个项目，因此新添加的项目显示在屏幕上，并且滚动侦听器检测到列表末尾并填充了另外 10 个项目。所以我的两个问题是

1）如何阻止我当前查看的项目的位置发生变化？

2）如何防止 onScrollListener 被多次调用？

我想如果你能帮我解决第一个问题，第二个问题就会自动解决。

顺便说一句，我调用 notifyDatasetchanged 来更新适配器的内容。请帮忙，谢谢。

# sql-server - SQL Server 数据插入

> ID：10616613
> 
> 赞同：0
> 
> 时间：2012-05-16T10:25:24.153
> 
> 标签：sql-server

我有这个查询（从另一台服务器转储）

```
CREATE TABLE [Reservation_reserve_room] (
  [id] int NOT NULL ,
  [reservation_id] int NULL ,
  [room_id] int NULL ,
  [room_name] varchar(255) NULL ,
  [reserve_date] date NULL ,
  [reserve_time_start] time(7) NULL ,
  [reserve_time_end] time(7) NULL 
)

INSERT INTO [Reservation_reserve_room] 
VALUES (N'1', N'1', N'1', N'Monday Room Sermmit', N'2012-03-12', 0x30373A30303A30302E30303030303030, 0x30383A30303A30302E30303030303030); 
```

但是当执行它时，它有这个错误

> [Err] 42000 - [SQL Server] 不允许将数据类型 varbinary 隐式转换为 time。使用 CONVERT 函数运行此查询。

我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:40:44.420

利用

```
CONVERT(time,CONVERT(varchar,0x30373A30303A30302E30303030303030)) 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:27:50.813

您在时间字段中输入到表中的值无效。

用于`Cast(Value as Time)`转换为时间

```
INSERT INTO [Reservation_reserve_room] VALUES (N'1', N'1', N'1', N'Monday Room Sermmit',
N'2012-03-12', cast(0x30373A30303A30302E30303030303030 as  Time),
CAST( 0x30383A30303A30302E30303030303030 as  Time)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:28:40.940

我知道在 SQL 中接受的时间格式始终是“2012 年 3 月 12 日”。这种格式适用于许多数据库类型，并且不会混淆日期和月份数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:30:47.243

利用`CONVERT`

```
CONVERT(TIME, CONVERT(BIGINT, 0x30373A30303A30302E30303030303030)) 
```

或者简单地说

```
CONVERT(TIME, 0x0000E0FF01E0FF01E0FF01E0FF01E0FF0100000000)

    INSERT INTO [Reservation_reserve_room] VALUES (N'1', N'1', N'1', N'Monday Room Sermmit', N'2012-03-12',  CONVERT(time, 0x30373A30303A30302E30303030303030)
,  CONVERT(time, 0x30373A30303A30302E30303030303030)); 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)上阅读此文档

# java - Vaadin Form TextField 多行标题

> ID：10616616
> 
> 赞同：3
> 
> 时间：2012-05-16T10:25:38.630
> 
> 标签：java, web, textfield, vaadin

我有一个包含许多 TextField (Vaadin) 的表单，每个都有很长的标题。

我可以将 TextField 的标题设为多行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:43:58.120

我不认为你可以。您可以改用 TextArea 吗？

更新：在您的 style.css 中定义自定义样式：

```
.v-caption-multiline {
    white-space: pre;
} 
```

然后在代码中使用 in 以 \n 分隔行：

```
TextField t = new TextField("A very long caption\nA very long caption ");
t.addStyleName("multiline"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T04:31:29.490

在 Vaadin 7 中，面板标题不包括 HTML。

例如，<sub>subscript</sub> 和 <br/> 命令。

我不知道7之前的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:48:50.053

获得多行字幕的唯一方法是使用 GridLayout 并使用标签模拟字幕。

# android - 检测到 /system/bin/app_process 堆栈损坏：已中止？这是什么？

> ID：10616617
> 
> 赞同：1
> 
> 时间：2012-05-16T10:25:40.407
> 
> 标签：android, android-ndk

我正在运行一些本机代码，并且有许多 JNI 调用应用程序崩溃，除了消息 /system/bin/app_process stack corruption detected: aborted in logcat if I try to debug 之外，没有任何线索说明它崩溃的原因

在这种情况下，如何确定罪魁祸首？任何可以在这里提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-25T10:08:49.540

我不是 C/C++ 专家，并且在 NDK 中遇到了类似的问题。（应用程序崩溃并显示日志：“检测到 /system/bin/app_process 堆栈损坏：中止”）。

我发现我的错误的原因是数组访问冲突。

以防万一像我这样的新人遇到这个问题，以下是一些常见的错误：

1.

```
char  aa[6];
strcpy(aa,"abcdefghijk123457890");//out of bounds 
```

2.

```
char aa［6］；
sprintf（aa,“the value is : %d”, 123);//out of bounds 
```

# .net - WPF Scrollviewer，两个画布共享一个变换

> ID：10616632
> 
> 赞同：2
> 
> 时间：2012-05-16T10:26:36.473
> 
> 标签：.net, wpf

我有一个自定义类，它扩展了名为 VisualCanvas 的内置 WPF Canvas，它是应用程序 grpahics 的主要内容区域。我有另一个扩展 Canvas 的自定义类，称为 SharedTransformCanvas，它将用于主要内容之上的装饰。SharedTransformCanvas 没有设置背景颜色，因此鼠标事件等通常由 VisualCanvas 处理。两个画布都具有变换依赖属性，并绑定到暴露另一个对象变换的视图模型，即画布共享一个变换。两个画布都在 ScrollViewer 中的一行的网格内。

用户可以在主画布中滚动鼠标滚轮以进行缩放。这会影响两者之间共享的转换，因为我希望装饰以与主要内容相同的方式缩放，这通常有效，即装饰具有同步缩放。

问题是当用户放大然后滚动条应该出现并且它们没有所以我覆盖了VisualCanvas上的MeasureOverride，以便考虑到比例变换并报告更大的尺寸并使滚动条出现。这解决了当用户放大时出现滚动条的问题，但在用户放大到足以使滚动条出现时，顶部 SharedTransformCanvas 的内容似乎突然忽略了变换并跳回到未应用变换的大小。我还尝试覆盖 SharedTransromCanvas 中的 MeasureOverride 以以相同的方式考虑转换并报告更大的尺寸，但这并不能解决问题。

如果我删除滚动查看器，同步缩放似乎可以正常工作，但是一旦您缩放得太远，您就会错过屏幕上的一些内容并且无法滚动。

我不明白滚动查看器如何与顶部画布感知它的转换进行交互？谁能解释这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:55:16.227

我遇到了这个[WPF Scale Transform 和 ScrollViewer - 当 Zoomed 无法滚动超出](https://stackoverflow.com/questions/1579167/wpf-scale-transform-and-scrollviewer-when-zoomed-cant-scroll-beyond-original)突出显示的原始大小时，我可能应该使用 Layout Transform。我将其更改为使用布局转换并且它可以工作。我仍然不明白为什么它突然忽略了我上述场景中的转换，但这解决了我的问题。

# iphone - 如何使 iOS 应用名称可本地化？

> ID：10616650
> 
> 赞同：32
> 
> 时间：2012-05-16T10:27:45.527
> 
> 标签：iphone, ios, xcode, localization, nslocalizedstring

我正在尝试找到本地化我的应用程序的最简单方法。我正在使用 sqlite，所以我基本上只需要切换我的数据库名称。问题是应用程序名称 - 它可以从代码本地化还是我必须为 x 种语言制作 x 个应用程序，所以任何人都会有他/她的母语的应用程序名称？后一个对我来说似乎已经被拒绝了......有人吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-16T10:54:55.777

我假设您的意思是出现在设备主屏幕上的捆绑显示名称：您应该创建一个本地化文件`InfoPlist.strings`，该文件名为类似于`Localizable.strings`您用于通常文本片段的文件。

在其中，`InfoPlist.strings`您可以本地化 Info.plist 中的不同键。要本地化应用名称，请添加：

```
"CFBundleDisplayName" = "My localized app name"; 
```

本地化文件：只需在 Xcode 中创建一个新的字符串文件。然后显示右侧 Xcode 窗格并通过此处显示的菜单添加本地化：

![XCode 本地化](../Images/5d910826b584e6fa7bf8c82cb83c8f57.png)

使用这种技术，您可以本地化您喜欢的任何文件。只需将正确的版本添加到您的捆绑包中。如果您随后使用`[[NSBundle mainBundle] pathFor...`，您将自动获得正确本地化的路径。我们对 sqlites、字符串，有时甚至是图像执行此操作。

# android - 不输入用户名和密码我的应用程序正在记录

> ID：10616653
> 
> 赞同：0
> 
> 时间：2012-05-16T10:27:51.203
> 
> 标签：android

我在输入用户名和密码（如果两者相等）时创建了一个登录页面，它用于登录，但用户名和密码留空，当我点击模拟器上的登录按钮时，它显示登录成功它不应该登录时用户名和密码留空

```
 @Override
         public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

     txtUserName=(EditText)this.findViewById(R.id.txtUname);
     txtPassword=(EditText)this.findViewById(R.id.txtPwd);
     btnLogin=(Button)this.findViewById(R.id.btnLogin);
     btnLogin.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {            

                    if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
                    Intent myIntent = new Intent(v.getContext(), SaveData.class);
                    startActivityForResult(myIntent, 1);
                    Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
                    } else{
                    Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
                    }
               }
           });
 }           
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:30:38.500

这是因为空白的用户名和密码也是相等的。您需要检查用户是否没有输入任何值，然后提示输入。更恰当地说，`TextUtils.isEmpty`用来做这项工作。

```
public void onClick(View v) { 
   String username = txtUserName.getText().toString();
   String password = txtPassword.getText().toString();

   if(!TextUtils.isEmpty(username) && username.equals(password)){

          //do your stuff
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:37:16.230

首先尝试一些验证，无论任何一个字段是否为空白，您验证的代码都是

```
 btnLogin.setOnClickListener(new OnClickListener() {

                 @Override
                 public void onClick(View v) {            

                        if(txtUserName.getText().toString()).equals("")){
                             //Show Message
                        }else if(txtPassword.getText().toString().equals("")){
                             //Show Message
                        }else if(!(txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
                           Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
                        }else{
                            Intent myIntent = new Intent(v.getContext(), SaveData.class);
                            startActivityForResult(myIntent, 1);
                            Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
                        }
                   }
               }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:30:45.683

您只需检查两者是否相等且均为空白，因此如果条件为真...

所以你应该检查两个字段是否为空......

**像...**

```
String strName = txtUserName.getText().toString();
String strPass = txtPwd.getText().toString();

     if(strName!=null&&strName.trim().length!=0&&strPass!=null && strPass.trim().length!=0){

    Intent myIntent = new Intent(v.getContext(), SaveData.class);
    startActivityForResult(myIntent, 1);
    Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();

  }else{
                Toast.makeText(LoginappActivity.this, "input your name and password",Toast.LENGTH_LONG).show();
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:31:51.027

只需添加 `txtUserName.getText().toString().length() > 0`条件`&& operator`in`if`

```
if((txtUserName.getText().toString().length() > 0) && (txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
       Intent myIntent = new Intent(v.getContext(), SaveData.class);
       startActivityForResult(myIntent, 1);
       Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
       } else{
          Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
          }
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T10:32:17.230

发生这种情况是因为`""`等于`""`（空字符串）

你可能想添加这个

```
[...]
if(txtUserName.getText().toString().length() > 0 && (txtUserName.getText().toString()).equals(txtPassword.getText().toString()))
[...] 
```

# jsf - jsf中的spring acl

> ID：10616654
> 
> 赞同：-1
> 
> 时间：2012-05-16T10:27:53.697
> 
> 标签：jsf, tomcat, spring-security, acl

我刚刚在我的系统中构建了 spring-security-acl，如何从我的 xhtml 页面调用“hasPermission”el 函数？

例如

```
<f:subview rendered="#{hasPermission(object,'read')}">
   HELLO
</f:subview> 
```

我只是得到

```
javax.el.ELException: Function 'sec:hasPermission' not found 
```

我在tomcat上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:53:22.597

为 spring-security 函数定义一个 taglib。然后使用表达式语言访问 spring 函数，如`#{prefix:function(params)}`

请参阅链接[Spring Security Taglib and JSF](http://static.springsource.org/spring-webflow/docs/2.3.0.RELEASE/reference/html/ch13s11.html "带有 JSF 的 Spring Security Taglib")

# c - C 内存映射

> ID：10616657
> 
> 赞同：3
> 
> 时间：2012-05-16T10:28:03.183
> 
> 标签：c, memory, memory-management, virtual-address-space

我知道有两种类型的地址。虚拟和物理。打印整数变量的地址将打印其虚拟地址。是否有有助于打印该变量的物理内存的功能？

虚拟内存是否意味着硬盘上被操作系统视为 RAM 的部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:31:31.400

不，没有这样的（便携式）功能。在实现内存保护的现代操作系统中，用户空间（与内核空间相反，即操作系统的一部分）不能直接访问物理地址，这是不允许的。所以没有什么意义。

不，虚拟内存不需要涉及硬盘，即“交换”或“分页”。一旦有了虚拟内存，您就可以实现它，因为它让操作系统有机会干预和管理哪些页面保存在物理内存中，从而可以将内存“分页”到其他存储介质。

要深入了解 Linux 内核如何管理内存，[这篇博](http://duartes.org/gustavo/blog/post/how-the-kernel-manages-your-memory)文非常棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:35:22.043

这是一个复杂的主题。

物理内存地址指向硬件内存设备中的真实位置，无论是系统内存、显卡内存还是网卡缓冲区。

虚拟内存是呈现给用户模式进程的内存模型。系统上的大多数设备都有一些映射到它们的虚拟内存地址空间，处理器可以写入这些地址空间。当这些物理内存地址被赋予一个虚拟内存地址时，操作系统会识别出对这些地址的读/写请求需要由特定设备提供服务，并将该请求委托给它。

# php - 如果出现success = 2 消息，如何删除数据库行？

> ID：10616658
> 
> 赞同：0
> 
> 时间：2012-05-16T10:28:06.680
> 
> 标签：php, javascript, jquery, dom

更新：

对，这就是我想要的解决方案。当用户单击“取消”按钮时，它会尝试查找要取消的文件的文件名，然后删除包含该文件名的数据库行。

问题是它没有识别文件名，因为它声明`imagecancelname=undefined`. 由于这是未定义的，因此它无法删除包含文件名的数据库行，因为它无法识别文件名。

所以问题是我如何才能`imagecancelname`识别将要取消的文件的名称，以便能够删除包含文件名的数据库行？

以下是当前的表单代码：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
  "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
  "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" +     
  "</p><p class='imagef1_cancel' align='center'></p>" +
  "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

下面是 startImageUpload 函数，它在文件上传时显示取消按钮，如果用户单击取消按钮，它包含取消按钮功能：

```
function startImageUpload(imagecancelname){

        $('.imagef1_cancel').eq(window.lastUploadImageIndex).html('<div><button type="button" class="imageCancel" image_cancel="' + imagecancelname + '">Cancel</button></div>'); 

            $('.imagef1_cancel').eq(window.lastUploadImageIndex).find(".imageCancel").on("click", function(event) {
                var image_cancel = $(this).attr('image_cancel');

              var url = 'cancelimage.php';
window.location=url+"?imagecancelname=" + image_cancel;

});       
      return true;
} 
```

最后是cancelimage.php 脚本，当用户单击Cancel 按钮时，它将导航到该脚本，该脚本用于通过使用$GET 方法查找文件名来删除数据库行。

```
 <?php

    ... connected to DB

    $image_cancel = $_GET["imagecancelname"];

            $imagecancelsql = "DELETE FROM Image 
            WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_cancel)."'";

        mysql_query($imagecancelsql);

        mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:34:56.127

在 javascript 中，您只需添加一个额外的 php 文件即可从数据库中删除一行。

在你的 js 中添加这个（当你删除时）：

```
window.location=url+"?"+id; 
```

`url`= php文件所在的路径

`id`=您要删除的行ID

然后添加一个php文件来做数据库操作

```
<?php
    $imagecancelsql = "DELETE FROM Image 
               WHERE ImageFile = 'ImageFiles/".
               mysql_real_escape_string($_FILES['fileImage']['name'])."'";
    mysql_query($imagecancelsql); 
```

Id 是您需要从 javascript 中作为参数传递的参数。例如：如果你想删除一个有 name 的图像`black`，然后传入 Javascript：

```
var image = 'black';
window.location=url+"?id="+image; 
```

稍后在 php 文件中使用以下方法获取 id 的值：

```
$image = $_GET['id']; 
```

然后执行您的查询：

```
$imagecancelsql = "DELETE FROM IMAGE WHERE IMAGEFILE = $image"; 
```

# wcf - 服务类所需的 WCF 解决方案

> ID：10616659
> 
> 赞同：0
> 
> 时间：2012-05-16T10:28:10.987
> 
> 标签：wcf, wcfserviceclient

我有一个班级引发一些事件并进行操作。例如

```
class MyService
{
    EventHandler MessageSent;
    EventHandler StatusReceived;

    public void StartService(Serviceconfig configObject)
    {
         //Intialize serial port with OnSerialPortReceived event handler.

    }

    public void GetStatusForMessage(string messageID)
    {
    }

    public void OnSerialPortReceived(string data)
    {
        if(data=="123")
              MessageSent(this,null);
        if(data=="456")
              StatusSent(this,null);
    }
} 
```

这是一个控制台应用程序，它将在系统启动时启动。现在，当事件服务上触发某些事件时，我们需要一个监控应用程序（基本上是一个带有回调的客户端），为此我们应该使用 WCF。并且监视器应用程序调用服务类。在上面的例子中，GetStatusForMessage 方法将被监视器应用程序调用。那么现在我们如何使用 WCF 来实现。如果使用服务契约将上述类作为服务，则在客户端发起调用之前，它不会被初始化和启动。当系统重新启动时，此类对象将被初始化并启动其功能。

我发现这篇文章[http://msdn.microsoft.com/en-us/magazine/cc163537.aspx](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)。通过这种方法，我的服务将成为发布者客户端，监控应用程序将成为订阅者客户端应用程序。但是客户端必须调用服务类。所以我的客户端应用程序应该支持回调并且它应该能够调用服务方法。如何使用 WCF 实现这一目标？请注意，监视事件的服务类是单个实例，并在应用程序启动时初始化。

希望我能得到解决方案。请让我知道更多说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:36:37.890

1.  使您的“服务”成为 Widnows 服务而不是控制台应用程序。
2.  您可以毫无问题地将 MyService 类设置为 WCF 服务。但是您也可以创建一些其他类来托管您的服务合同并简单地与您的 Windows 服务实现进行通信。
3.  Windows 服务激活时间和第一个 WCF 请求之间没有联系（这不是 IIS，这是一个自托管的 WCF 服务，您可以在需要时启动它）。
4.  [这是自托管 WCF 服务教程的链接](http://msdn.microsoft.com/en-us/library/ms731758.aspx)
5.  使用自动运行选项在您的机器上安装 Windows 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:37:23.343

不要试图使您的服务成为 WCF 服务。使它成为一个单例并让 WCF 与它交谈。

如果您希望事件向监视应用程序触发“事件”，您将需要使用双工绑定（如果跨机器，NetTcpBinding 或同一台机器上的 NetNamedPipeBinding 是我的建议）。当监控应用程序连接时，保存其回调通道并在连接到回调通道上的事件回调的方法中。

请注意，您必须在双方都保持会话处于活动状态，因此监控应用程序和服务必须比配置的 receiveTimeout（默认为 10 分钟）更频繁地相互触发*某些东西*，但这可能只是一种“ping”方法来使用作为保命

如果有帮助，[我不久前写过关于双工通信的博客](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,b891610a-6b78-4b54-b9a6-4ec81c82b7c0.aspx)

# canvas - 如何在 Mac 的任何 webkit 中从父圆角隐藏画布内容？

> ID：10616668
> 
> 赞同：12
> 
> 时间：2012-05-16T10:28:45.697
> 
> 标签：canvas, css

我有一个`div`圆角的父母，其中包含`canvas`：

```
<div id="box">
    <canvas width="300px" height="300px"></canvas>
</div>​

#box {
    width: 150px;
    height: 150px;
    background-color: blue;
    border-radius: 50px;
    overflow: hidden;
}​ 
```

画布呈现一个溢出父级的红色矩形。正如预期的那样，这是我在所有浏览器中得到的：

![在此处输入图像描述](../Images/5403c2b284004d8256de6fc787e50718.png)

## 问题：

但是，对于在 Mac OS lion 上运行的 webkit 浏览器（我测试了 Safari 5.1.5 和 Chrome 19），画布在圆角处仍然可见：

![在此处输入图像描述](../Images/ecc4e45b47aaa2663e640cc63f983716.png)

有趣的是，这个问题似乎只发生在内部元素是 a 时`canvas`。对于任何其他子元素，内容被正确隐藏。

一种解决方法是将相同的圆角应用于画布本身，但不幸的是，这是不可能的，因为我需要为画布的相对位置设置动画。

另一个应该有效的解决方法是在类似于圆角形状的剪切区域中重新绘制画布，但我更喜欢更干净的 CSS3 解决方案。

**那么，有人知道如何在 Mac 上为 Safari 和 Chrome 解决这个问题吗？**

**编辑**：Win7 上的 Chrome 也会出现问题

[jsFiddle在这里](http://jsfiddle.net/ruisoftware/PJqXY/8/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-29T14:10:00.093

[问题 137818：大画布不支持包含 div 的边框半径](https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby=&sort=&id=137818)

我用CSS标签解决了这个问题到父div：

```
transform: translate3d(0,0,0); 
```

它适用于当前的 chrome 版本 36.0.1985.143 m

[jsfiddle.net/PJqXY/38/](http://jsfiddle.net/PJqXY/38) _

```
#box {
    width: 150px;
    height: 150px;
    background-color: blue;
    border-radius: 50px;
    overflow: hidden;
    transform: translate3d(0,0,0);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T03:11:18.063

这是要添加到 css 中的代码：

```
 -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); /* this fixes the overflow:hidden in Chrome/Opera */ 
```

**HTML 源代码**

```
<div id="box">
  <canvas width="300px" height="300px"></canvas>
</div> 
```

**Css 源代码**

```
#box {
    width: 150px;
    height: 150px;
    background-color: blue;
    border-radius: 50px;
    overflow: hidden;
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); /* this fixes the overflow:hidden in Chrome/Opera */
} 
```

**Javascript 源代码**

```
var $canvas = $("canvas");

if ($canvas[0].getContext) {
    var context = $canvas[0].getContext('2d');
    context.fillStyle = 'red';
    context.fillRect(10, 10, 300, 60);
} 
```

**注意：这个需要的 Jquery**

示例：http: [//jsfiddle.net/PJqXY/12/](http://jsfiddle.net/PJqXY/12/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T09:47:15.073

这是我发现的：

在canvas元素中，当`width`by的乘积`height`为66000或更大时，canvas忽略父级的overflow属性。

比如下面一个失败，因为300*220 = 66000

```
<canvas width="300" height="220"></canvas> 
```

这个工作正常：

```
<canvas width="300" height="219"></canvas> 
```

在谷歌搜索“canvas 66000”后，我发现了这个[错误报告。](http://code.google.com/p/chromium/issues/detail?id=129732)它与溢出无关，但我确信是同一个错误。

**感谢 Jeemusu 为我指明了正确的方向。**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-05T08:54:49.403

错误仍然存​​在（11/2015），但另一种解决方法是添加`position: relative;`到`overflow:hidden;`元素中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-07T08:51:30.383

画布是否必须使用宽度/高度值？如果您将 html 中画布的高度设置为较小的值，或者甚至将所有值一起删除，则它会被正确裁剪（仅在 Chrome 中测试）。

[http://jsfiddle.net/LwZ6v/](http://jsfiddle.net/LwZ6v/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-08T08:19:56.093

我为 Safari 找到了一个 asfwer。将具有单像素 png 的 webkit 蒙版添加到父级，溢出部分的剪辑将呈现良好。

```
-webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); 
```

[JsFiddle 示例](http://jsfiddle.net/LwZ6v/222/)

# visual-studio - 如何包含 在 .cpp 文件中

> ID：10616671
> 
> 赞同：8
> 
> 时间：2012-05-16T10:29:01.450
> 
> 标签：visual-studio, cuda

我有问题要包含`<cuda_runtime.h>`在`.cpp`文件中。错误：`Cannot include file: cuda_runtime.h: No such file or directory`。

我正在尝试从 Rob Farber 编译代码（[http://www.drdobbs.com/architecture-and-design/222600097?pgno=1](http://www.drdobbs.com/architecture-and-design/222600097?pgno=1)）。

我之前编译过一些 cuda 代码，但`<cuda_runtime.h>`总是包含在`.cu`文件中。

我正在使用 VS 2008 Express。

问：我是否必须以某种不同的方式链接 VS，以便它知道在哪里寻找`<cuda_runtime.h>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:07:30.783

在 Visual Studio 2008 中，在 Visual C++ 目录中添加包含文件的路径。

“安装路径”\NVIDIA GPU Computing Toolkit\CUDA\“版本”\include\

## 这是程序：

在 Visual Studio 2008 中，转到
- 工具 -> 选项 -> 项目和解决方案 -> Visual C++ 目录。-从名为“Show Directories For”的下拉列表中
选择**包含文件。**
- 通过单击下拉列表下方的黄色按钮添加新项目。
- 在此处粘贴包含文件路径。
- 通过单击黄色按钮左侧的检查按钮验证路径的正确性
- 单击确定并重新启动 Visual Studio。

现在 Visual Studio 2008 将知道包含文件的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-13T13:19:37.303

除了设置硬编码路径（在您的机器上定位 CUDA 安装时您很可能拥有），您还可以添加`cudart.lib`链接器的附加依赖项。

右键单击项目 > 属性 > 链接器 > 输入 > 附加依赖项。在那里添加`cudart.lib`。

# c# - 从 C# 调用 Clarion DLL

> ID：10616672
> 
> 赞同：4
> 
> 时间：2012-05-16T10:29:06.017
> 
> 标签：c#, asp.net, dll, clarion

我目前在一家 IT 公司工作。他们使用 Clarion 制作了他们的软件，在该软件中，他们有一个 DLL，可以从他们的数据库中重新计算很多值。我需要从我的 C# 项目中调用这个 DLL。我尝试了一切，但它没有工作。

我的代码如下：

```
public partial class Form1 : Form
{
    [DllImport("EPNORM.dll", EntryPoint = "MyRecalcualate@FlOUcOUcOsbOUc")]
    public static extern void MyRecalcualate(System.Int64 myPtr, System.Int64 myLong, CWByte myByte);

    [DllImport("User32.dll")]
    public static extern Boolean MessageBeep(UInt32 beepType);

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        System.Int64 myPtrTemp = 1234;
        System.Int64 myLongTemp = 5678;
        System.Byte myByteTemp = 88;

        try
        {
            MyRecalcualate(myPtrTemp, myLongTemp, myByteTemp);
            bool messagebeep = MessageBeep(1);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            MessageBox.Show("Successful");
        }
    }
} 
```

问题是当我用断点调用它时，它只是消失在`MyRecalcualate`方法中并在 2 秒后到达`finallly`块并重新显示，而无需从 DLL 执行任何操作。这是因为我需要修复 DLL 方法中的某些内容还是因为我调用错误？

下面调用的参数是：MyRecalculate(LONG, LONG, BYTE)

```
MyRecalcualate      PROCEDURE (MyStringPtr, MyLong, MyByte) ! Declare Procedure
LOC:CString         CSTRING(255)
LOC:Byte            BYTE
CODE
! clear completely LOC:CString with null values
LOC:CString = ALL('<0>', SIZE(LOC:CString))

! load string value, byte by byte, from memory address passed (MyStringPtr) and put into LOC:CString
I# = 0
LOOP
     PEEK(MyStringPtr + I# , LOC:Byte)
     IF LOC:Byte = 0 THEN BREAK END
     LOC:CString[I# + 1] = CHR(LOC:Byte)
     I# += 1
END

MESSAGE('MyString value is:||' & CLIP(LOC:CString))
MESSAGE('MyLong value is:||' & MyLong)
MESSAGE('MyByte value is :||' & MyByte) 
```

这是他们的合同开发人员邮寄给我的参数截图以及他如何在 VB.NET 中调用它： VB.NET 代码：http: [//imageshack.us/photo/my-images/269/callfromvisualbasictocl.jpg/](http://imageshack.us/photo/my-images/269/callfromvisualbasictocl.jpg/) PARAMETERS IN CLARION ：http: [//imageshack.us/photo/my-images/100/asdxg.jpg/](http://imageshack.us/photo/my-images/100/asdxg.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:11:00.080

第一个参数是指向以空字符结尾的字符串的指针。你不能只传递一个随机`Int64`值。所以你的 pinvoke 应该是这样的：

```
[DllImport("EPNORM.dll", EntryPoint = "MyRecalcualate@FlOUcOUcOsbOUc")]
public static extern void MyRecalcualate(string myPtr, int myInt, byte myByte); 
```

我相信第二个参数 Clarion`LONG`是一个 32 位整数。所以`int`在 C# 方面。更重要的是，您需要仔细检查 Clarion 端的调用约定。你确定它是`stdcall`你的 C# 使用的。

# java - 如何验证输入的手机号码？

> ID：10616675
> 
> 赞同：2
> 
> 时间：2012-05-16T10:29:18.953
> 
> 标签：java, android

```
complete = (Button) findViewById(R.id.complete);
complete.setOnClickListener(new View.OnClickListener() {

        String validNumber = "";

    public void onClick(View v){

        validNumber = phoneNumber.getText().toString();

        if (!validNumber.equals("")){

                final String phoneNumPattern = "^(?=.*[0-9]){10,11}$";  
                Pattern pattern = Pattern.compile(phoneNumPattern);
                Matcher matcher = pattern.matcher(validNumber);     

                 if (matcher.matches() == true){
            Toast.makeText(PhoneNumActivity.this, "Success", Toast.LENGTH_SHORT).show();        
                 }
                 else{
            Toast.makeText(PhoneNumActivity.this, "Failed", Toast.LENGTH_SHORT).show();
                  }
        }
        else{
                 Toast.makeText(PhoneNumActivity.this, "Failed", Toast.LENGTH_SHORT).show();
        }
    }
 }); 
```

我正在开发一个安全应用程序，用户需要输入有效的手机号码，我在上面设置了模式，用户只能输入最少 10 位和最多 11 位的数字。但它出来一个错误

> java.util.regex.PatternSyntaxException：索引 13 附近的正则表达式模式中的语法错误：

还有一个问题，我可以将模式设置为手机号码的前两位数字`01xxxxxxxxxx`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:38:05.673

使用 EditText 作为输入，并给它这个 xml 属性：

```
android:inputType="phone" 
```

用户将无法在其中放入无效字符。

对于您的 01 模式，您只需检查前 2 个字符是否为“01”

```
if( phoneNumer.charAt(0)=='0'&&phoneNumber.charAt(1)=='1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:36:50.037

电话号码验证可能非常复杂，但看起来[这个主题](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)之前已经讨论过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:37:40.307

这种方法可能会对您有所帮助。如果字符串包含任何非数字字符，则此方法返回 false。

```
public static boolean abcd(String str)
    {
        int x;
        for(int j = 0 ; j < str.length() ; j++)
        {
            x = (int)str.charAt(j);
            if( x < 48 || x > 57 )
            return false;    
        }
        return true;
    } 
```

# javascript - javascript匿名函数

> ID：10616680
> 
> 赞同：0
> 
> 时间：2012-05-16T10:29:29.527
> 
> 标签：javascript

```
function (){
    alert('a function');
} 
```

当我把它放在萤火虫 javascript 控件上时。它显示**函数语句需要一个名称**

```
(function (){
    alert('a function');
}()) 
```

当我把上面的它显示好。

```
function (){
    alert('a function');
}() 
```

它还显示 **函数语句需要名称**并且不执行函数。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:32:44.833

```
function (){
    alert('a function');
} 
```

是一个函数语句，所以它需要一个名称。

```
(function (){
    alert('a function');
}()) 
```

将`()`语句更改为表达式，就可以了。

您也可以使用以下方式。

```
(function (){
    alert('a function');
})();

!function (){
    alert('a function');
}();

+function (){
    alert('a function');
}(); 
```

# javascript - 不同屏幕尺寸的不同CSS？

> ID：10616685
> 
> 赞同：0
> 
> 时间：2012-05-16T10:29:58.230
> 
> 标签：javascript, css, html, media-queries

我在这里搜索，发现可以使用以下方法之一：

Adapt.js 或媒体查询

我想知道用什么更好？我基本上需要为不同的屏幕调整一些具有不同宽度的指定 div 的大小。（800x600 和 640x480）

如果没有提到是好的，还有其他解决方案吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:41:52.813

```
<link rel="stylesheet" media="all" href="css/common.css">
<!--Responsive style sheets -->
<link rel="stylesheet" media="all and (min-width: 600px) and (max-width: 800px)" href="css/name1.css">
<link rel="stylesheet" media="all and (min-width: 480px) and (max-width: 640px)" href="css/name2.css"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:31:43.437

你也许可以在 CSS 中使用类似的东西

```
@media only screen and (min-device-width: 768px) {
   ... put your css here
} 
```

以上可能仅适用于移动设备

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T10:34:57.297

如果您计划支持多个屏幕，我建议您使用 960 Grid [http://960.gs/](http://www.960.gs)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:54:52.470

媒体查询是您的最佳解决方案

[在这里有关于这些的详细信息](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

# google-app-engine - GAE 搜索 API - 对 twitter 风格的扇出有用吗？

> ID：10616687
> 
> 赞同：4
> 
> 时间：2012-05-16T10:30:11.163
> 
> 标签：google-app-engine, gae-search

只是好奇对于 AppEngine 上的“百万追随者”推特风格的扇出问题，推荐的最佳实践是什么。

它仍然是 Brett Slatkin 提出的解决方案吗（参见：[http](http://www.scribd.com/doc/16952419/Building-scalable-complex-apps-on-App-Engine) ://www.scribd.com/doc/16952419/Building-scalable-complex-apps-on-App-Engine ）？

还是可以在这里使用新的搜索 API？您能否使用大量作者过滤器进行搜索，例如 'author:bob OR author:alice OR author:mike ...' ad nauseum？还是对 Search API 查询复杂性有限制？或者这会是可怕的表现吗？如果一个人可以跟随的人数有限制，这可能是一个合理的解决方案吗？

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:51:11.723

一般来说，“或”查询在任何数据库中都没有效率，包括搜索 API——它们都需要执行多个独立的查询，并将结果粘合在一起。

[预期搜索 API](https://developers.google.com/appengine/docs/python/prospectivesearch/)可以更好地处理扇出问题。

# jquery - 将 jQuery Media Plugin 与存储在数据库中的音频/视频一起使用

> ID：10616696
> 
> 赞同：0
> 
> 时间：2012-05-16T10:30:57.377
> 
> 标签：jquery, asp.net

我正在使用 jQuery 媒体插件制作媒体播放器。我的媒体播放器应该播放音频/视频。存储在 sql server 数据库中的文件由另一个 aspx 页面检索，其 ContentType 标头等于 MIME 类型。

所以我可以使用“abc.aspx?id=123”网址访问存储的媒体。

问题是 jQuery 媒体插件是检查文件扩展名来播放它，因为我的文件扩展名是 aspx 它无法理解文件的内容。

这种情况有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:24:18.613

虽然很晚才回复，但我希望你会为它量身定制一些解决方案，在下面附加解决方案，以便其他人在这里解决同样的问题。

```
abc.aspx?id=123&ext=.wav
abc.aspx?id=123&ext=.mp3
abc.aspx?id=123&ext=.flv 
```

将解决问题。您可以根据存储在 DB 中的文件的 MIME 类型以编程方式附加扩展类型，也可以在上传文件时保存文件扩展。

# ios - 在 iOS 中添加 PDF 页面

> ID：10616697
> 
> 赞同：1
> 
> 时间：2012-05-16T10:31:00.170
> 
> 标签：ios, pdf-generation, cgcontext, cgcontextdrawimage

我有一种创建 PDF 文件的算法，但我只想在现有 pdf 的末尾添加一个 pdf 页面。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:53:30.280

这是合并pdf但使用其他库的解决方案：

[在 iOS 上合并 PDF 文件](https://stackoverflow.com/questions/6553540/merge-pdf-files-on-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:30:06.260

也许你可以阅读旧的 pdf 文件，并重新构建一个新的 pdf 文件。我想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:47:30.073

到目前为止，还不能重新打开并继续编辑 PDF 文件。只能再次重绘整个 PDf。

# iphone - 如何通过 AirPrint 打印 UITextField 文本

> ID：10616700
> 
> 赞同：3
> 
> 时间：2012-05-16T10:31:11.110
> 
> 标签：iphone, ios, ios5, airprint

我有这个代码来做 AirPrint 文本视图文本

```
-(IBAction)_clickbtnprintermainnote:(id)sender
{
    UIPrintInteractionController *print = [UIPrintInteractionController sharedPrintController];

    print.delegate = self;
    UIPrintInfo *printInfo = [UIPrintInfo printInfo];
    printInfo.outputType = UIPrintInfoOutputGeneral;
    printInfo.jobName =@"Nots of MyBibleApp";
    printInfo.duplex = UIPrintInfoDuplexLongEdge;
    print.printInfo = printInfo;
    print.showsPageRange = YES;
    print.printingItem = _txtmainnote.text;

    void (^completionHandler)(UIPrintInteractionController *,BOOL, NSError *) = ^(UIPrintInteractionController *print,BOOL completed, NSError *error) {
        if (!completed && error) {
            NSLog(@"houston we have a problem");
        }
    };
    [print presentAnimated:YES completionHandler:completionHandler];
} 
```

但我没有像 iPad 中的默认 pinter 选项那样弹出任何打印机选项弹出窗口。我没有使用条形按钮，我有一个 UIbutton。如何正确执行此操作，我的代码有什么错误吗？._txtmainnote 是我的文本视图.

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:48:03.603

由此，：[_](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPrintInteractionController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIPrintInteractionController/printingItem)`printingItem`

> 该对象必须是`NSURL`、`NSData`、`UIImage`或 `ALAsset`类的实例。

所以可能你必须通过类似的东西：

```
NSData* data=[_txtmainnote.text dataUsingEncoding:NSUTF8StringEncoding];
print.printingItem = data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:44:21.363

我得到了解决方案，只需将这行代码更改 `[print presentAnimated:YES completionHandler:completionHandler];`为 `[print presentFromRect:CGRectMake(600, 650, 100, 200) inView:mainnotepageview animated:YES completionHandler:completionHandler];` 因为我正在使用 iPad 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T06:25:52.137

```
@interface ViewController ()
@property (strong, nonatomic) IBOutlet UILabel *label;
@property (strong, nonatomic) IBOutlet UIView *mainnotepageview;
@property (strong, nonatomic) IBOutlet UITextField *text02;
@property (strong, nonatomic) IBOutlet UITextView *myTextView;

 - (IBAction)btnSettingsTapped:(id)sender
{
 NSMutableString *printBody = [NSMutableString stringWithFormat:@"%@,  %@",self.myTextView.text, self.label.text];
//[printBody appendFormat:@"\n\n\n\nPrinted From *myapp*"];

UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
pic.delegate = self;

UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.outputType = UIPrintInfoOutputGeneral;
printInfo.jobName = self.label.text;
pic.printInfo = printInfo;

UISimpleTextPrintFormatter *textFormatter = [[UISimpleTextPrintFormatter alloc] initWithText:printBody];
textFormatter.startPage = 0;
textFormatter.contentInsets = UIEdgeInsetsMake(72.0, 72.0, 72.0, 72.0); // 1 inch margins
textFormatter.maximumContentWidth = 6 * 72.0;
pic.printFormatter = textFormatter;

pic.showsPageRange = YES;

void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
    if (!completed && error) {
        NSLog(@"Printing could not complete because of error: %@", error);
    }
};

//[pic presentFromBarButtonItem:self.rightButton animated:YES completionHandler:completionHandler];
[pic presentFromRect:CGRectMake(600, 650, 100, 200) inView:_mainnotepageview animated:YES completionHandler:completionHandler];

} 
```

# c# - 调试时似乎反复抛出异常

> ID：10616714
> 
> 赞同：3
> 
> 时间：2012-05-16T10:32:09.123
> 
> 标签：c#, asp.net, multithreading, debugging, exception

我正在调试我的 ASP.NET 应用程序（C#、Visual Studio）中的异常。这个异常被抛出在另一个线程的顶层（这不是问题，我改变了那个行为不抛出一个顶层异常）。

我只是想知道这个：这个异常会杀死整个工作进程。但是，当我调试时，调试器会在该异常处停止，并且它似乎被反复“抛出”（每当我按下继续时，它都会再次停止在同一行）。它不再执行之前的行，所以它真的停在那个特殊的异常上。

这仅仅是因为调试器的特殊行为吗？或者当我不调试它时，这个异常是否也会反复抛出？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T12:44:27.520

> 这仅仅是因为调试器的特殊行为吗？或者当我不调试它时，这个异常是否也会反复抛出？

Visual Studio 调试器不会因为未处理的异常而让线程死掉。异常不会被重新抛出，调试器不会让该行继续，因为它会使进程崩溃。如果没有附加调试器，那么 IIS 会给您一个黄屏死机，并且事件日志中将包含其中包含的信息。

在调试时，所有应用程序、Web 端或客户端的行为都是相同的。

# sdk - 我在哪里可以获得最新的 DirectShow 开发人员运行时？

> ID：10616720
> 
> 赞同：1
> 
> 时间：2012-05-16T10:32:27.090
> 
> 标签：sdk, directshow

我只在 dxsdk_feb2005_extras.exe 中找到了 DirectShow 开发人员运行时。它比较旧，只支持 WinXP。我在哪里可以获得最新版本的 debug directshow 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:59:08.250

你说的对。DirectShow SDK 包含在 DirectX SDK 中，包含 DirectShow 的最后一个 DirectX SDK 版本是 DirectX 9.0 SDK 更新 -（2005 年 2 月）附加功能。

但是在那之后 DirectShow 被移到了 Windows SDK，你可以在[这里得到它](http://msdn.microsoft.com/en-us/windows/aa904949.aspx)

# ruby-on-rails - rails 控制台错误需要'./example_user'

> ID：10616722
> 
> 赞同：2
> 
> 时间：2012-05-16T10:32:30.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在[http://ruby.railstutorial.org/chapters/rails-flavored-ruby#sec:a_user_class使用 railstutorial](http://ruby.railstutorial.org/chapters/rails-flavored-ruby#sec:a_user_class)

有人告诉我输入 require`'./example_user'`但是...我收到此错误

```
LoadError: cannot load such file -- example_user
from /Users/snook3/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in require' 
```

然后越来越多的错误

我想我没有正确链接到该文件夹​​，谁能让我知道我也应该链接到哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:54:33.213

您可以使用 `Rails.root` 获取当前 Rails 项目的根目录。

所以 `require Rails.root + 'path_to_example_user'`

将加载文件。

你也可以试试这个`reload!`命令，它会重新加载整个 Rails 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:45:09.190

是的，只需将文件移动到实际的根目录即可。做`mv example_user.rb* /`应该做。

此外，如果在请求文件后，您得到的返回“true”而不是 [“User”]，请不要担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-02T12:36:44.173

该文件应以以下结尾`.rb`：

```
 require './example_user'    #will not work
    require  './example_user.rb'      #will work 
```

要重命名文件，请使用以下命令行（不在 rails 控制台中）：

```
 mv example_user example_user.rb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:17:41.353

尝试使用文件的绝对路径......像这样：

```
require '/Users/snook3/my/project/folder/example_user.rb' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:57:10.260

无需指定完整路径，只需将*.rb*附加到文件名：`require './example_user.rb'`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-11T00:10:59.267

我遇到了同样的问题，但对 Unix 不是很熟悉，我只能这样解释。

1）我在 Sublime Text 2 中创建了 example_user.rb 文件并将其保存到应用程序根文件夹中。

2）“要求”对我不起作用，就像OP一样。即使我可以在文件夹中看到该文件。

3）但是，打开一个终端窗口，导航到应用程序根目录，然后输入“dir”，然后我可以看到文件名前面有一个“/”！？不知道这是如何/为什么发生的，或者为什么它在 Explorer 中不可见（或者任何 Unix 等价物被称为 - Nautilus？）。

4）从终端内重命名文件后，一切正常。但是如果这对你们中的任何一个 Unix/Rails 人来说都有意义的话，我希望能解释一下出了什么问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-06T14:55:29.677

尝试

```
touch example_user.rb 
```

在 Unix 终端中。然后将代码添加到该文件中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-05T02:54:01.347

本教程告诉您“在应用程序根目录中创建文件 example_user.rb”。我最初错误地将它放在应用程序文件夹中并收到相同的错误消息。

如果您将文件移动到项目根目录中，那么`require './example_user'`将起作用。

# javascript - 在 javascript 中检查 Internet 连接的最佳实践

> ID：10616723
> 
> 赞同：1
> 
> 时间：2012-05-16T10:32:32.980
> 
> 标签：javascript, ajax, internet-explorer, internet-connection

对于使用 IE 实例的应用程序，我每隔几秒钟就使用 Ajax 检查我的 Internet 连接。但由于带宽低，我的 Internet Explorer 崩溃了。

可以遵循哪些最佳实践来检查 Internet 连接，以防止 Internet Explorer 崩溃并提高性能？

我正在使用以下代码检查我的互联网连接。

其解释如下： -

[http://tomriley.net/blog/archives/111](http://tomriley.net/blog/archives/111)我从那里得到 jquery 文件。

```
(function ($) {

      $.fn.checkNet = function (intCheckInterval, strCheckURL) {
          if (typeof (intCheckInterval) === 'undefined') {
              var intCheckInterval = 5
          } if (typeof (strCheckURL) === 'undefined') {
              var strCheckURL = window.location
          } else if (strCheckURL.indexOf('http') === -1) {
              var strCheckURL = 'http://' + strCheckURL
          } intCheckInterval = intCheckInterval * 1000; function doRequest(strCheckURL) {
              $.ajax({ url: strCheckURL, cache: false, success: function () {
                  if ($('#netWarn').length) {
                      $('#netWarn').fadeOut()
                  } $('.tempDisabled').removeAttr('disabled').removeClass('tempDisabled')
              }, error: function () {
                  if (!$('#netWarn').length) {

                      $('body').prepend('<p id="netWarn">No internet connection detected, some features will be re-enabled when a connection is detected. </p>'); $('#netWarn').fadeIn()

                  }

              }
              })
          } setInterval(function () {
              doRequest(strCheckURL)
          }, intCheckInterval)
      }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:25:04.527

我的插件接受请求之间的时间长度的参数。因此，如果您希望请求之间有 10 秒的间隔，请使用以下代码调用它：

```
$.fn.checkNet(10); 
```

...在您包含插件之后。我最近上传了一个新版本，它的工作效率更高。

# macos - Mac OS X 10.7.3 中的 iconv 什么都不做

> ID：10616724
> 
> 赞同：0
> 
> 时间：2012-05-16T10:32:38.797
> 
> 标签：macos, unix, encoding, iconv

我正在尝试将 php 文件（client.php）从 utf-8 转换为 iso-8859-1，以下命令对文件没有任何作用：

> iconv -f UTF-8 -t ISO-8859-1 client.php

执行后会显示原始文件内容。

事实上，当我在执行**iconv**后检查文件的编码时：

> 文件-I client.php

显示了相同的旧 utf-8：

> client.php：文本/x-php；字符集=utf-8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:13:29.683

iconv 实用程序应将文件中字符的编码从一种代码集转换为另一种，并将结果写入**标准输出**。

这是一个解决方案：将标准输出写入临时文件并重命名临时文件

```
iconv -f UTF-8 -t ISO_8859-1 client.php > client_temp.php && mv -f client_temp.php client.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:36:08.257

对于最低 128 个字符，ASCII、UTF-8 和 ISO-8859 是 100% 相同的编码。如果您的文件仅包含该范围内的字符（基本上是您在常见的美国英语键盘上找到的字符集），那么这些编码之间没有区别。

我猜发生了什么：纯文本文件没有关联的编码元数据。您无法仅通过查看纯文本文件来知道它的编码。该`file`实用程序所做的只是给出其最佳猜测，并且由于没有区别，它更愿意告诉您该文件是 UTF-8 编码的，从技术上讲它很可能是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-09T09:54:49.483

除了带有以下 One-Liner 的 jackjr300 之外，您还可以对当前文件夹中的所有 php 文件执行此操作：

```
for filename in *.php; do  iconv -f ISO_8859-1 -t UTF-8 $filename > temp_$filename && mv -f ./temp_$filename ./$filename; done 
```

# ws-security - 无法使用 WS-Security 支持编译 gSOAP（即 wsse-plugin）

> ID：10616725
> 
> 赞同：2
> 
> 时间：2012-05-16T10:32:41.937
> 
> 标签：ws-security, gsoap

在 linux 系统上，我想使用 gSOAP-2.8.8 创建一个客户端应用程序，该应用程序与基于 WCF 的 SOAP 服务交互。因此，我经历了以下几点：

```
wsdl2h -t typemap.dat -o myService.h myService.wsdl    
soapcpp2 -Igsoap/import -CLix myService.h 
```

并将 wsseapi.h 中的 '#include soapH.h' 替换为 wsseapi.h 中提到的 soapcpp2 生成的 soapH.h

然后，关键步骤是手动将以下行添加到 myService.h

```
#import "wsse.h"

struct SOAP_ENV__Header"
{
    mustUnderstand  // must be understood by receiver
    _wsse__Security *wsse__Security;    ///< TODO: Check element type (imported type)
}; 
```

...并编译这些文件，例如

```
g++ -DWITH_DOM -DWITH_OPENSSL -Igsoap -Igsoap/import -Igsoap/plugin -o test \
   myService.cpp soapC.cpp soapmyServiceProxy.cpp gsoap/stdsoap2.cpp gsoap/dom.cpp \
   gsoap/custom/duration.c gsoap/plugin/wsseapi.cpp gsoap/plugin/smdevp.c gsoap/plugin/mecevp.c \
   -L/usr/lib -lssl -lcrypt 
```

我确实获得了所有来源的目标文件；-) 但在链接阶段仍然出现两个错误。

```
soapC.cpp:203: undefined reference to `soap_in_ns4__duration(soap*, char const*, long long*, char const*)'
soapC.cpp:676: undefined reference to `soap_in_ns4__duration(soap*, char const*, long long*, char const*)' 
```

编辑：作为一种解决方法，我目前将**soap_in_ns4__duration()**替换为在 custom/duration.c 中实现的**soap_in_xsd__duration()**

不过，谁能给我一个提示这里出了什么问题？！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:32:33.063

您必须在您编写的主文件中包含“soapH.h”文件。

# mysql - 有时时间戳显示不正确（数据库自动更改时间）

> ID：10616727
> 
> 赞同：0
> 
> 时间：2012-05-16T10:32:51.607
> 
> 标签：mysql, datetime, grails, timezone, datecreated

我在显示时间戳时遇到问题。

有时实际日期为 5.30，有时为 +5.30 我不明白整个数据库是如何发生的

在某一时间日期是正确的，在第二时间是提前 5.30 小时

我附上两个背靠背拍摄的快照。它不仅是 +/- 5.30 小时，而且有时比实际日期提前 11 小时。

我已经输入了以下代码来获取数据库记录中的 IST 时间。

> BOOTSTRAP- TimeZone.setDefault(TimeZone.getTimeZone("IST")) 配置 - JAVA_OPTS="-Duser.timezone=IST"

我的服务器在美国，数据库也在同一台电脑上。我正在从印度访问它。而且我希望数据库中的时间仅属于 IST，而不管我的服务器可能会转移到哪里。![图 1](../Images/a036148a048f0c3f04f462aecc59254d.png)![图 2](../Images/f6c5134e810671e67525f40a5a5b248b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:48:08.277

您可能不应该依赖数据库或 user.timezone 设置来格式化您的日期。

我建议使用您调用 setTimeZone() 的 SimpleDateFormat 明确格式化它们

这是一个例子：[http ://www.roseindia.net/java/javadate/converting-time-time-zone.shtml](http://www.roseindia.net/java/javadate/converting-time-time-zone.shtml)

# java - 执行 rs.next() 时 JDBC 连接挂起

> ID：10616728
> 
> 赞同：1
> 
> 时间：2012-05-16T10:32:52.010
> 
> 标签：java, mysql, jdbc, large-data-volumes

我正在尝试从 mySQL 服务器（在我的 LAN 中）读取一个巨大的结果集。我以寻找`setFetchSize`方法的方式实现了它：[BalusC's Example](https://stackoverflow.com/questions/2180835/handling-large-records-in-a-j2ee-application)。所以我做了：

```
 con = DriverManager.getConnection(url, user, password);

        //con.setAutoCommit(false);
        st = con.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);
        st.setFetchSize(Integer.MIN_VALUE);
        rs = st.executeQuery(query);

        int count = 0;
        while (rs.next ()) {                
            // Process entry
            String rsc = rs.getString ("resource");
            String tpc = rs.getString("topic");   
            System.out.println(count + ": " + rsc); 
            ++count;                
        } 
```

虽然，它挂在该行的第 1077 行`rs.next()`。它不会抛出异常。

**编辑：**

> 超时后发生了一些新的事情。它返回此错误消息：
> 
> ```
> JDWP exit error JVMTI_ERROR_NONE(0): getting frame location [../../../src/share/back/stepControl.c:641] 
> ```

这个错误似乎无关。

**EDIT2：**我编写了一个 PHP 脚本，用于按流检索结果，并且发生的情况完全相同。所以它与JDBC无关......我不知道发生了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:48:59.867

第二条错误消息是热交换和/或 JRebel ( [source](http://zeroturnaround.com/forum/topic.php?id=1252#post-5159) ) 时 Eclipse 调试器中的死锁：

> 这是一个已知问题，实际上是两个问题。
> 1) Eclipse 调试器有时在热交换时死锁（对于任何版本的 JRebel 都是如此）。
> 2) 热交换时 JVM 崩溃 - JRebel 4M1 确实如此。
> 
> 我们期待很快发布错误修复（3.6.2 连同 Eclipse 插件） - 它将修复第一个问题。第二个问题应该用 4M2 版本解决。

建议：

1.  将 Eclipse 更新到 3.7.2 并将 JRebel 更新到最新版本
2.  再次启动应用程序。
3.  使用 logging/`System.out.println()`进行调试
4.  检查你的mysql服务器的日志（硬盘、网络）
5.  在 SQL 工作台中运行查询（查看这是否是查询/服务器或您的代码中的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:30:27.650

好的，问题出在查询本身。

我发现流对如何构建查询非常敏感。如果我进行一些更改（例如添加 SELECT DISTINCT），它会缓冲或挂起。最后，我在查询中留下了一列并开始工作......

# mysql - 插入 MySql 失败

> ID：10616730
> 
> 赞同：0
> 
> 时间：2012-05-16T10:33:05.800
> 
> 标签：mysql, database

大家好，当我尝试在数据库中插入某些内容时，我遇到了问题。DB方法是：

```
public static void insertInEntries(String NrDeOrdine, String NrDocument,String Data, String Emitent, String Continut, String Observatii)
            throws SQLException {
        Statement statement = (Statement) conn.createStatement();
        try {
            statement.executeUpdate("INSERT INTO Intrari " + "VALUES("
                    + NrDeOrdine + "," + NrDocument + "," + Data + ","
                    + Emitent + "," + Continut + "," + Observatii + ");");
            System.out.println("Done");
        } catch (SQLException e) {
            System.err.println("Eroare:" + e);
        }
    } 
```

在 fxml 中，我有一个按钮，该按钮在单击时执行此方法！

```
@FXML protected void eadaugareIn(ActionEvent event) throws SQLException {
        DBConnection.connect();
        DBConnection.getConnection();
        try
        {
            DBConnection.insertInEntries(enrOrdInput.getText().toString(), enrDocInput.getText().toString(), edataInput.getText().toString(), eemitentInput.getText().toString(), econtinutTextArea.getText().toString(), eobsTextArea.getText().toString());
        }
        catch(SQLException e){
            System.err.println("Eroare:" + e);
        }
    } 
```

因此，如果我在第一个文本字段中输入的文本是“sa”，那么我在该字段中输入的所有内容似乎都会让我出错：

```
Eroare:com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'sa' in 'field list' 
```

我怎么能解决这个问题？非常感谢你！

编辑：几个小时前我找到了答案：

```
statement.executeUpdate("INSERT INTO `intrari`(`NrDeOrdine`, `NrDocument`, `Data`, `Emitent`, `Continut`, `Observatii`) 
    VALUES("+ '"' + NrDeOrdine + '"' + "," + '"' + NrDocument + '"' + "," + '"' 
    + Data + '"' + "," + '"' + Emitent + '"' + "," + '"' + Continut + '"' + "," 
    + '"' + Observatii + '"' + ");"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:11:35.860

将日志记录添加到您的`insertInEntries`方法中：

```
System.out.println("INSERT INTO Intrari " + "VALUES("
                + NrDeOrdine + "," + NrDocument + "," + Data + ","
                + Emitent + "," + Continut + "," + Observatii + ");"); 
```

最有可能查看输出将为您提供解决方案。

# php - Javascript document.getElementById 连接

> ID：10616732
> 
> 赞同：2
> 
> 时间：2012-05-16T10:33:18.400
> 
> 标签：php, javascript, ajax

我正在为一些我在页面中使用过无数次的 JavaScript 代码而苦苦挣扎，这些代码只是在我进行时进行调整。我遇到的问题是将部分表单元素 id 和页面中其他地方定义的字符串变量连接起来，以使我的 ajax 调用动态化。我正在使用以下代码，当元素被硬编码如下时，它工作得很好（仅适用于编码的项目而不是动态的，所以在测试后不好）

```
<script type="text/javascript">
function edttodo(str)
{
if (str=="")
{
document.getElementById("todoitemwr").innerHTML="";
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("todoitemwr(2)").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","todo/edt_todo.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

因此，您了解我对代码的动态方面的需求是什么，我进行了 mysql 查询，如下所示：

```
<?php 
            //Get Current To-Do Items

            //select database
            mysql_select_db("jbsrint", $con);
            //query users_dash_user
            $result1 = mysql_query("SELECT * FROM todo WHERE todo_user_id_fk= '".$_SESSION['user_id']."' AND todo_item_status='1'");

            while($row1 = mysql_fetch_array($result1))
            {                               
            echo"<div class=\"todoitemwr\" name=\"todoitemwr(". $row1['todo_id'] .")\" ID=\"todoitemwr(". $row1['todo_id'] .")\"><span class=\"todoitem\">" . $row1['todo_item'] . "</span><span class=\"rmv\" onclick=\"rmvtodo(". $row1['todo_id'] .")\" onmouseover=\"className='rmvon';\" onmouseout=\"className='rmv';\">X</span><img src=\"images/edit.png\" class=\"edt\" onclick=\"edttodo(". $row1['todo_id'] .")\"></img></div>";
            }
            ?>
            </div> 
```

如您所见，div id 是根据已检索到的信息的 id 动态命名的。上面使用我的 ajax 代码是为了能够编辑原位检索到的文本，一旦更正/更改它就可以重新提交并更新该记录。

我确信这只是理解 JavaScript 如何要求我在 document.getElementById("todoitemwr(2)") 部分中组合文本和 str 值的一个案例。

像往常一样，非常感谢任何帮助。

艾伦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:36:00.773

而不是使用`id="todoitemwr(2)"`write `id="todoitemwr_2"`。

这是因为 ID 属性中不允许使用大括号。

代码将变为：

```
document.getElementById('todoitemwr(' + str + ')') 
```

# silverlight - 即将开始在 windows phone 7 中开发应用程序的问题

> ID：10616735
> 
> 赞同：1
> 
> 时间：2012-05-16T10:33:21.277
> 
> 标签：silverlight, windows-phone-7

我即将开始在 windows phone 7 中开发应用程序。但我有一些疑问。

![在此处输入图像描述](../Images/8f9447d92ae1c9d5d6966ba0c3262a29.png)

这是应用程序的 GUI 格式。该应用程序有很多页面。

在第一部分有 3 个按钮，并且在整个应用程序中它们的设计没有变化。在 iPhone 中，我使用了 UINavigationBar 控件。但是 Windows Phone 中是否有任何控件，例如 iPhone 中的 UINavigationBar？

在第二部分，内容总是在变化。

在第三部分有一些按钮。但是不同页面的按钮功能不同。并且还需要在某些页面中删除或添加额外的按钮。在 iPhone 中，我使用了 UITabBar 控件。

哪种方式可以有效地启动应用程序开发？任何人都可以建议我可以在 Windows Phone 中为此目的使用的控件或想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:55:06.123

您似乎正在尝试像构建 iPhone 应用程序一样构建 Windows PHone 应用程序。这通常会导致在 Windows Phone 上的体验非常差，并导致用户感到沮丧，因为该应用程序的行为方式与平台上的其他应用程序不同（因此他们期望您的应用程序的行为方式）。

我建议在设计应用程序之前先查看一些[适用于 Windows Phone 的设计资源，这样你就可以构建适合该平台的东西。](http://msdn.microsoft.com/en-us/library/ff637515%28v=vs.92%29.aspx)

几点建议：
- 通常，页面[顶部] 上的浮动按钮看起来很糟糕。这不是平台上的应用程序执行导航的方式（与 iOS 不同）。Windows Phone 应用程序应使用“中心辐射”模型进行页面导航。
- 在页面中更改内容可能会导致对后退按钮的预期行为产生一些混淆。对此要非常小心，因为不一致、不可预测或非标准的后退按钮行为可能会导致应用程序无法通过认证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:24:12.797

如果您不想创建用户可以在页面之间导航（并使用后退按钮返回）的应用程序，您可以创建基于单个页面的应用程序。如果您创建*Windows Phone 应用程序*项目，这里是 Visual Studio 为您创建的内容的略微修改版本。

```
 <phone:PhoneApplicationPage 
        x:Class="PhoneApp1.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
        xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="728"
        FontFamily="{StaticResource PhoneFontFamilyNormal}"
        FontSize="{StaticResource PhoneFontSizeNormal}"
        Foreground="{StaticResource PhoneForegroundBrush}">

        <Grid Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <StackPanel Margin="12,17,0,28">
                <TextBlock
                    Text="MY APPLICATION"
                    Style="{StaticResource PhoneTextNormalStyle}"/>
                <TextBlock
                    Text="page name"
                    Margin="9,-7,0,0"
                    Style="{StaticResource PhoneTextTitle1Style}"/>
            </StackPanel>

            <Grid Grid.Row="1" Margin="12,0,12,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <!-- The three buttons -->
                <StackPanel Orientation="Horizontal">
                    <Button Content="Button 1"/>
                    <Button Content="Button 2"/>
                    <Button Content="Button 3"/>
                </StackPanel>

                <!-- The main content -->
                <TextBlock Grid.Row="1"
                    Text="Content always changing"
                    Style="{StaticResource PhoneTextTitle1Style}"
                    TextWrapping="Wrap"
                    TextAlignment="Center"/>

            </Grid> 
        </Grid>

        <phone:PhoneApplicationPage.ApplicationBar>
            <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
                <shell:ApplicationBarIconButton
                    IconUri="/Images/appbar_button1.png"
                    Text="Button 1"/>
                <shell:ApplicationBarIconButton
                    IconUri="/Images/appbar_button2.png"
                    Text="Button 2"/>
                <shell:ApplicationBar.MenuItems>
                    <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                    <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
                </shell:ApplicationBar.MenuItems>
            </shell:ApplicationBar>
        </phone:PhoneApplicationPage.ApplicationBar>

    </phone:PhoneApplicationPage> 
```

这是它在设计器中的外观：

![示例 Windows Phone 7 应用程序](../Images/93fc3d244e397584376f4e65d7fe15c8.png)

在这种情况下，主要内容（始终在变化）是 a`<TextBlock>`但您可以使用由其他控件组成的面板或 a `UserControl`。如果您将多个面板/控件放在同一个网格单元格中，您可以通过隐藏除一个面板/控件之外的所有面板/控件来完全更改布局。

对于第一排按钮，我使用了水平`<StackPanel>`，但您可能希望使用其他东西来更好地控制布局和对齐方式。

对于底部的按钮行，您应该使用作为标准 Windows Phone 7 用户体验一部分的应用栏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:49:57.793

怎么样`Pivot`？它可能适合您的需求。从技术上讲，pivot 用于以不同的方式显示相同的数据。

[MSDN](http://msdn.microsoft.com/en-us/library/ff941098%28v=vs.92%29.aspx)

# android - 安卓开发工具包。将字节直接发送到 videoview/Mediaplayer

> ID：10616738
> 
> 赞同：2
> 
> 时间：2012-05-16T10:33:29.513
> 
> 标签：android, android-mediaplayer, android-view, android-sdk-2.3, android-video-player

我需要播放 Matroska (.mkv) 视频，但 Android VideoView 不支持该容器。

为了播放视频，我需要将源设置为文件。

我想知道的是我是否可以直接从视频中发送字节并将其直接发送到 videoview 或 mediaPlayer？

如果我不能，那么即使没有元数据，我也可以将这些字节保存到文件中并让 videoview 播放/读取它们？

谢谢，

# php - Codeigniter 的本机会话问题

> ID：10616740
> 
> 赞同：0
> 
> 时间：2012-05-16T10:33:32.290
> 
> 标签：php, codeigniter, session

我正在使用 Codeigniter 的本机会话类来存储用户信息，但我遇到了一个严重的问题。当用户处于非活动状态大约半小时并将他注销时，会话似乎超时。

我的配置文件如下所示：

```
$config['sess_cookie_name'] = 'cisession';
$config['sess_expiration'] = 60*60*24*30*12*2;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie'] = FALSE;
$config['sess_use_database'] = FALSE;
$config['sess_table_name'] = 'ci_sessions';
$config['sess_match_ip'] = FALSE; 
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update'] = 7200; 
```

当用户注销时浏览器中的 PHPSESSID 不会被破坏，并且它会在两年后过期，因为我已经在配置文件中设置了它。

我不知道本机会话类的常见问题是什么，因为每个人似乎都对它感到满意，所以有人可以弄清楚最有可能导致这个问题的原因是什么？

编辑：对于那些不熟悉 codeigniter 的本地会话类的人，这里是链接 [http://codeigniter.com/wiki/Native_session](http://codeigniter.com/wiki/Native_session)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:37:47.787

我也使用 codeigniter 的原生类。也许你没有正确配置它。这是我从他那里得到的代码。[https://github.com/EllisLab/CodeIgniter/wiki](https://github.com/EllisLab/CodeIgniter/wiki)

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class CI_Session {

    var $session_id_ttl; // session id time to live (TTL) in seconds
    var $flash_key = 'flash'; // prefix for "flash" variables (eg. flash:new:message)

    function __construct()
    {
        log_message('debug', "Native_session Class Initialized");
        $this->object =& get_instance(); 
        $this->_sess_run();
    }

    /**
    * Regenerates session id
    */
    function regenerate_id()
    {
        // copy old session data, including its id
        $old_session_id = session_id();
        $old_session_data = $_SESSION;

        // regenerate session id and store it
        session_regenerate_id();
        $new_session_id = session_id();

        // switch to the old session and destroy its storage
        session_id($old_session_id);
        session_destroy();

        // switch back to the new session id and send the cookie
        session_id($new_session_id);
        session_start();

        // restore the old session data into the new session
        $_SESSION = $old_session_data;

        // update the session creation time
        $_SESSION['regenerated'] = time();

        // session_write_close() patch based on this thread
        // http://www.codeigniter.com/forums/viewthread/1624/
        // there is a question mark ?? as to side affects

        // end the current session and store session data.
        session_write_close();
    }

    /**
    * Destroys the session and erases session storage
    */
    function destroy()
    {
        unset($_SESSION);
        if ( isset( $_COOKIE[session_name()] ) )
        {
              setcookie(session_name(), '', time()-42000, '/');
        }
        session_destroy();
    }

    /**
    * Reads given session attribute value
    */    
    function userdata($item)
    {
        if($item == 'session_id'){ //added for backward-compatibility
            return session_id();
        }else{
            return ( ! isset($_SESSION[$item])) ? false : $_SESSION[$item];
        }
    }

    /**
    * Sets session attributes to the given values
    */
    function set_userdata($newdata = array(), $newval = '')
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => $newval);
        }

        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                $_SESSION[$key] = $val;
            }
        }
    }

    /**
    * Erases given session attributes
    */
    function unset_userdata($newdata = array())
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => '');
        }

        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                unset($_SESSION[$key]);
            }
        }        
    }

    /**
    * Starts up the session system for current request
    */
    function _sess_run()
    {
        session_start();

        $session_id_ttl = $this->object->config->item('sess_expiration');

        if (is_numeric($session_id_ttl))
        {
            if ($session_id_ttl > 0)
            {
                $this->session_id_ttl = $this->object->config->item('sess_expiration');
            }
            else
            {
                $this->session_id_ttl = (60*60*24*365*2);
            }
        }

        // check if session id needs regeneration
        if ( $this->_session_id_expired() )
        {
            // regenerate session id (session data stays the
            // same, but old session storage is destroyed)
            $this->regenerate_id();
        }

        // delete old flashdata (from last request)
        $this->_flashdata_sweep();

        // mark all new flashdata as old (data will be deleted before next request)
        $this->_flashdata_mark();
    }

    /**
    * Checks if session has expired
    */
    function _session_id_expired()
    {
        if ( !isset( $_SESSION['regenerated'] ) )
        {
            $_SESSION['regenerated'] = time();
            return false;
        }

        $expiry_time = time() - $this->session_id_ttl;

        if ( $_SESSION['regenerated'] <=  $expiry_time )
        {
            return true;
        }

        return false;
    }

    /**
    * Sets "flash" data which will be available only in next request (then it will
    * be deleted from session). You can use it to implement "Save succeeded" messages
    * after redirect.
    */
    function set_flashdata($key, $value)
    {
        $flash_key = $this->flash_key.':new:'.$key;
        $this->set_userdata($flash_key, $value);
    }

    /**
    * Keeps existing "flash" data available to next request.
    */
    function keep_flashdata($key)
    {
        $old_flash_key = $this->flash_key.':old:'.$key;
        $value = $this->userdata($old_flash_key);

        $new_flash_key = $this->flash_key.':new:'.$key;
        $this->set_userdata($new_flash_key, $value);
    }

    /**
    * Returns "flash" data for the given key.
    */
    function flashdata($key)
    {
        $flash_key = $this->flash_key.':old:'.$key;
        return $this->userdata($flash_key);
    }

    /**
    * PRIVATE: Internal method - marks "flash" session attributes as 'old'
    */
    function _flashdata_mark()
    {
        foreach ($_SESSION as $name => $value)
        {
            $parts = explode(':new:', $name);
            if (is_array($parts) && count($parts) == 2)
            {
                $new_name = $this->flash_key.':old:'.$parts[1];
                $this->set_userdata($new_name, $value);
                $this->unset_userdata($name);
            }
        }
    }

    /**
    * PRIVATE: Internal method - removes "flash" session marked as 'old'
    */
    function _flashdata_sweep()
    {
        foreach ($_SESSION as $name => $value)
        {
            $parts = explode(':old:', $name);
            if (is_array($parts) && count($parts) == 2 && $parts[0] == $this->flash_key)
            {
                $this->unset_userdata($name);
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T10:35:33.417

PHP 会话在 1440 秒（24 分钟）后过期。

[http://php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php)

# java - 为 GWT 客户端编译时更改方法体

> ID：10616744
> 
> 赞同：2
> 
> 时间：2012-05-16T10:33:48.293
> 
> 标签：java, gwt, reflection

我有一个问题，当为 gwt 客户端编译这个类时，我需要更改方法体。对于服务器端，我使用反射，客户端不需要这种方法，所以它可以是空的。这是方法：

```
public void check(Class<?> typeClass, Object object) {
    if (!typeClass.isAssignableFrom(object.getClass()))
        throw new RuntimeException("Check doesn't pass!");
} 
```

所以我需要检查 typeClass 是对象的超类还是超接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:29:07.463

您可以使用[GWT.isClient()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/core/client/GWT.html#isClient%28%29)检查代码是否在客户端或服务器上运行。

```
public void check(Class<?> typeClass, Object object) {
    if(!GWT.isClient()) {
        if (!typeClass.isAssignableFrom(object.getClass()))
            throw new RuntimeException("Check doesn't pass!");
        }
    }
} 
```

作为替代方案，您可以尝试在 gwt.xml 文件中使用[超级源](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModuleXml)来提供您的类的仅限客户端版本。

# php - 有人可以解释一下路径在 PHP include() 情况下的工作原理吗

> ID：10616745
> 
> 赞同：0
> 
> 时间：2012-05-16T10:33:50.140
> 
> 标签：php

我不明白。当试图包含来自不同目录的文件时，我确定我一定错过了一些真正简单的东西。

网站结构是这样的。 ![目录结构](../Images/6dd4a57b1e6f2a53a40fe159ced4e55f.png)

如果我`include("includes/header.php);`来自 /reports/top_sellers_report.php 文件，则对 css 文件的调用不起作用。
为了使它工作，我必须把`../styles/styles.css`
但是，如果我从根目录打开“product_dtails.php，它也包含标题，然后css文件将无法加载，我需要删除它`../`才能使其工作。
我可以' t win...
我错过了什么吗？
4 小时的在线搜索表明我错过了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:44:15.753

我认为您应该考虑使用 MVC 方法，因为这可能会帮助您更好地组织代码： [http ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

包含语句在服务器上进行评估，因此无论您从哪里包含文件，都需要从那里相对指定它。CSS 'include' 正在浏览器中进行评估，因此您需要使文件路径相对于该目录。

我建议使用 MVC 方法，因为它可以帮助您管理代码并将网站的不同部分分成不同的部分，这应该可以帮助您避免这个问题。

我想您可以在每个页面上绝对参考您的样式表（即[http://www.mywebsite.com/dir/dir2/stylesheet.css](http://www.mywebsite.com/dir/dir2/stylesheet.css)），这也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:46:22.427

您的问题实际上与 PHP 无关。只看网址：

```
http://www.example.com/
http://www.example.com/reports/
http://www.example.com/styles/styles.css 
```

根据您在网站上的位置，到的相对路径`styles.css`可能会发生变化，因此当您访问时，`http://www.example.com/reports/`您必须使用`../styles/styles.css`，而`http://www.example.com/`您必须使用我们`styles/styles.css`。

解决问题的最简单方法可能是使用绝对 URL`http://www.example.com/styles/styles.css`或基本路径`/styles/styles.css`而不是`../styles/styles.css`. 我推荐后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:46:51.187

据我所知， include 是相对于你的索引的，所以你有 root/index.php

在 index.php 中，您应该在 include/header.php 中使用 include("styles/style.css") 您需要添加 ../styles 以将您重定向到根目录，然后重定向到您的样式文件夹等等

如果你直接打开product_dtails.php，它会像index.php一样，所以你只需要使用styles/style.php

# ios - 如何配置 iOS 应用程序以在特定设备上运行？

> ID：10616746
> 
> 赞同：14
> 
> 时间：2012-05-16T10:33:50.687
> 
> 标签：ios, ipad, app-store, ipod-touch, zbar-sdk

我正在使用 ZBar SDK 开发用于 QR 码扫描的 iOS 应用程序。[ZBar SDK 的创建者在这里告诉](http://zbar.sourceforge.net/iphone/sdkdoc/install.html)我们

> 仅支持 iPhone 3GS 和 iPhone 4，因为它们有自动对焦的摄像头。ZBar 库不支持 iPhone 3G，也不太可能支持它。

所以我在我的 plist 部分添加了`auto-focus-camera`密钥。`Required Device Capabilities`一切都很好，除了一件事——iPad 2 和第四代 iPod Touch 没有自动对焦摄像头，但仍然可以使用我的 ZBar SDK 代码扫描二维码。但是我的`auto-focus-camera`密钥不允许使用 iPad 2 和 iPod Touch 4th Gen 的用户从 App Store 下载我的应用程序。

换句话说，我需要找到一种方法让我的应用程序可以通过 App Store 在这些设备上安装：

1.  iPhone 3GS。
2.  iPhone 4。
3.  iPhone 4S。
4.  iPad 2。
5.  新 iPad。
6.  iPod Touch 第 4 代。

在这些设备上，我的应用程序不应该可用：

1.  iPhone 2G。
2.  iPhone 3G。
3.  平板电脑。
4.  iPod Touch 3d Gen 和

**我的问题是：如何使我的应用程序在 App Store 中可供第一个列表设备的用户使用，而对第二个列表设备的用户不可用？**

任何帮助将不胜感激！

PS：我[在 SO 上看到过这个问题](https://stackoverflow.com/q/6397394/1002727)，但这对我没有多大帮助。

PS2：[此应用程序](http://itunes.apple.com/us/app/word-lens/id383463868?mt=8)具有所需的可用设备集。

> 要求：兼容 iPhone 3GS、iPhone 4、iPhone 4S、iPod touch（第 4 代）、iPad 2 Wi-Fi、iPad 2 Wi-Fi + 3G、iPad（第 3 代）和 iPad Wi-Fi + 4G。

有谁知道，他们是怎么做到的？

PS3：同时添加两者`still-camera`并`auto-focus-camera` [给我们这个](https://stackoverflow.com/questions/6397394/ios-required-device-capabilities-autofocus-camera#comment7499199_6397394)：

> 要求：兼容 iPhone、iPod touch（第 4 代）、iPad 2 Wi-Fi、iPad 2 Wi-Fi + 3G、iPad（第 3 代）和 iPad Wi-Fi + 4G。

只要我们拥有适合我们应用程序的所有 iPhone，而不是 3GS、4 和 4S，这并不是一个好方法。

PS4：我的应用[在这里](http://itunes.apple.com/app/eventer-one/id523530463?ign-mpt=uo=6&mt=8)，它有这样的要求：

> 要求：兼容 iPhone 3GS、iPhone 4 和 iPhone 4S。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T20:45:53.800

Word Lens 需要`armv7`、`opengles-2`和`video-camera`设备功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T10:50:49.500

我不确定你能做到这一点

也许您可以检查您的代码，如果设备型号不是很好，只需弹出一个新视图，说明用户正在使用的型号无法使应用程序工作？

您可以使用以下方法检测模型：

```
#import <sys/utsname.h>

NSString*
machineName()
{
   struct utsname systemInfo;
uname(&systemInfo);

return [NSString stringWithCString:systemInfo.machine
                          encoding:NSUTF8StringEncoding];
} 
```

并给出：

```
@"i386"      on the simulator
@"iPod1,1"   on iPod Touch
@"iPod2,1"   on iPod Touch Second Generation
@"iPod3,1"   on iPod Touch Third Generation
@"iPod4,1"   on iPod Touch Fourth Generation
@"iPhone1,1" on iPhone
@"iPhone1,2" on iPhone 3G
@"iPhone2,1" on iPhone 3GS
@"iPad1,1"   on iPad
@"iPad2,1"   on iPad 2
@"iPhone3,1" on iPhone 4
@"iPhone4,1" on iPhone 4S 
```

否则您可以尝试向苹果发送电子邮件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T13:16:37.690

我们需要在app 的 plist 部分使用`video-camera`key 。`Required Device Capabilities`

# c++ - 如何在迭代器位置之后插入元素

> ID：10616748
> 
> 赞同：13
> 
> 时间：2012-05-16T10:34:13.850
> 
> 标签：c++, stl

std::list.insert 在迭代器位置之前插入一个元素。如何在迭代器位置之后插入元素。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T10:45:28.113

就是`list::insert`这样。在插入你的值之前增加你的迭代器：

```
if (someIterator != someList.end()) {
    someIterator++;
}
someList.insert(someIterator, someValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T16:35:34.513

使用功能：

`itr = mylist.insert_after(Itr, value)`

它将`value`在 指向的位置之后插入`itr`。

# php - extract body from raw email with regex

> ID：10616762
> 
> 赞同：2
> 
> 时间：2012-05-16T10:35:06.353
> 
> 标签：php, regex, email

```
--047d7b33d6decd251504bfe78895
Content-Type: multipart/alternative; boundary=047d7b33d6decd250d04bfe78893

--047d7b33d6decd250d04bfe78893
Content-Type: text/plain; charset=UTF-8

twest

ini sebuah proiduct abru

awdawdawdawdwa

aw
awdawdaw

--047d7b33d6decd250d04bfe78893
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div class=3D"gmail_quote">twest=C2=A0<div><br></div><div>ini sebuah proidu=
ct abru</div><div><br></div><div>awdawdawdawdwa</div><div><br></div><div>aw=
</div><div>awdawdaw</div>
</div><br>

--047d7b33d6decd250d04bfe78893-- 
```

1.  **how can i get the mail text/plain and the text/html content with regex?**
2.  **does an email only have 1 content body? consisting a text/html and a text/plain**

*heres a snippet what im currently doing it wrong.

```
 $parts = explode('--', $this->rawemail);
    $this->headers = imap_rfc822_parse_headers($this->rawemail);
    # var_dump($parts);
    # Process the parts
    foreach ($parts as $part) 
    {
        # Get Content text/plain
        if (preg_match('/Content-Type: text\/plain;/', $part)) 
        {
            $body_parts = preg_split('/\n\n/', $part);

            # If Above the newline (Headers)
            if ($body_parts[0]) 
            {
                # var_dump($body_parts[0]);
            }

            # If Below the newline (Data)
            if ($body_parts[1]) 
            {
                var_dump($body_parts[1]);
            }
        }

        # Get Content text/html
        if (preg_match('/Content-Type: text\/html;/', $part)) 
        {
            $body_parts = preg_split('/\n\n/', $part);

            # If Above the newline (Headers)
            if ($body_parts[0]) 
            {
                # var_dump($body_parts[0]);
            }

            # If Below the newline (Data)
            if ($body_parts[1]) 
            {
                var_dump($body_parts[1]);
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:10:22.723

I think you'd be better going down the email line at a time as it's the line breaks that are more critical in e-mail formation.

Your rules would be:

*   If you get a double line break, then the body is starting - plain text type (as there are no headers to indicate which).
*   Otherwise, carry on until you get the "boundary=" bit, and then you record the boundary and hop into a "looking for boundary" mode.
*   Then, when you find a boundary, hop into "Looking for content-type or double new-line" mode, and look for Content-Type (and note content-Type) or double new-line (header has finished, body coming next until the next boundary)
*   While reading the body of the message, you're back in "looking for boundary" mode to repeat teh process.

Something I remember from a long time ago - so the following may not be 100% accurate, but I'll mention just in case. Be careful with files with attachemnts as you can get two "boundary" markers. But one boundary is withing another boundary, so if you follow the rules above (i.e. grab the first boundary and stick with it) then you should be fine. But test your script with some attachemnts :)

* * *

Edit: additional info as asked in the question. An e-mail can have as many "bodies" as the user wishes to encode. You can have a plain, and HTML, a UTF encoded version, and RTF version or even a Morse Code version (if the client knew how to handle "Content-Type Morse/Code"!). Sometimes you don't get plain text, but only HTML versions (naughty users). Sometimes the HTML actually comes without the content type declaration (which may or may not get displayed as HTML, depending on the client). The boundary also splits off the attachments. Rich test is a gotcha from Outlook (although, to be fair, it usually IS converted to HTML). So no, there's somewhere between 0 and X bodies.

# php - 为什么 PHP strip_tags("is 我即将制作一个字符计数函数来计算来自 tinyMce 文本区域的输入。使用如下代码进行服务器端验证： $string = "is<isvery 0="" 2="" 1031="" interesting="" <thatthis="" willbe="" strippe="" 问问题="" 2012-05-16t10:35:09.627="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我即将制作一个字符计数函数来计算来自="" tinymce="" 文本区域的输入。使用如下代码进行服务器端验证：="" $string="is<isvery interesting <thatthis willbe stripped" ;="" $stripped="strip_tags($string);" $count="strlen($stripped);" will="" return="" 您可能会注意到="" 根本没有标签，无论如何strip_tags()都会从第一个小于号上删除所有内容。="" 这是错误还是功能？="" strip_tags实际上很愚蠢。它剥离了一切，只是远程看起来像一个="" html="" 标记。也就是说，从<和一些字母数字符号开始，直到结束="">或尽可能远。 在这种情况下，观察到的行为是一个错误。但是，strip_tags它不是对输入的 HTML 进行纠错的工具。它的目的是剥离东西，以便将剩余的东西安全地嵌入网站。毫无疑问，它剥离得更多，这是一件好事。 phpstrip-tags 4 2 回答 2 This answer is useful 4 这已被记录在案： 因为 strip_tags() 实际上并不验证 HTML，部分或损坏的标签可能会导致删除比预期更多的文本/数据。 http://php.net/manual/en/function.strip-tags.php 于 2012-05-16T10:41:05.950 回答 This answer is useful 4 strip_tags实际上很愚蠢。它剥离了一切，只是远程看起来像一个 HTML 标记。也就是说，从<和一些字母数字符号开始，直到结束>或尽可能远。 在这种情况下，观察到的行为是一个错误。但是，strip_tags它不是对输入的 HTML 进行纠错的工具。它的目的是剥离东西，以便将剩余的东西安全地嵌入网站。毫无疑问，它剥离得更多，这是一件好事。 于 2012-05-16T10:40:22.520 回答 Related 2 sorting - Jtable 按列排序 1 python - 在 nltk 中使用 scikit-learn 分类器，多类案例 2 php - 如何使用 php 从 oracle 获取 xml 格式的数据 2 java - 如何在 Java 中将此“Tue Nov 13 14:35:04 +0000 2012”字符串格式转换为日期？ 1 java - 在 Java 中使用 LIBSVM 实现 Precision & Recall 2 python - 用于配置 XBee 模块的 Python 脚本在树莓派上失败 0 scons - scons carshed当给出包含结肠的值的选项时 1 java - 如何使用 Libgdx 调整窗口内的舞台大小 0 android - 在我的活动/服务中接收 USB 控制请求/usb 消息 9 android - Android TimePickerDialog 设置最大时间 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</isvery>

> ID：10616763
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, strip-tags

我即将制作一个字符计数函数来计算来自 tinyMce 文本区域的输入。使用如下代码进行服务器端验证：

```
$string = "is<isvery interesting <thatthis willbe stripped";
$stripped = strip_tags($string);
$count = strlen($stripped); // This will return 2 
```

您可能会注意到 $string 根本没有标签，无论如何`strip_tags()`都会从第一个小于号上删除所有内容。

这是错误还是功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:41:05.950

这已被记录在案：

> 因为 strip_tags() 实际上并不验证 HTML，部分或损坏的标签可能会导致删除比预期更多的文本/数据。

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T10:40:22.520

`strip_tags`实际上很愚蠢。它剥离了一切，只是远程看起来像一个 HTML 标记。也就是说，从`<`和一些字母数字符号开始，直到结束`>`或尽可能远。

在这种情况下，观察到的行为是一个错误。但是，`strip_tags`它不是对输入的 HTML 进行纠错的工具。它的目的是剥离东西，以便将剩余的东西安全地嵌入网站。毫无疑问，它剥离得更多，这是一件好事。

# javascript - 谷歌地图API，根据id显示和隐藏标记

> ID：10616765
> 
> 赞同：1
> 
> 时间：2012-05-16T10:35:10.987
> 
> 标签：javascript, jquery, google-maps, dom

我在谷歌地图中有这些标记。我需要能够根据数组的“id”部分显示或隐藏它们，使用复选框来打开和关闭它们。

```
 var places = [  
  {  
    "title": "USA",  
    "description": "This is the united states",  
    "position": [ 39.639538,-104.414062 ],
    "id": "america"
  },  
  {  
    "title": "China",  
    "description": "This is the peoples republic of china",  
    "position": [ 34.016242,103.359375 ],
    "id": "asia"  
  }
] 
```

我已经使用 .each() 方法显示了标记，并且我尝试使用下面的 jquery 根据它们的 id 打开和关闭它们，但标记似乎忽略了它。任何帮助将不胜感激。

```
 var showAmerica = $("#showAmerica");
    google.maps.event.addDOMListener(showAmerica, 'click', function(){
        $('#america').toggle();
}); 
```

复选框的 HTML

```
<input type="checkbox" value="fund" id="showAmerica" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:55:06.963

这个“id”属性是什么？[MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)不包含它。

无论如何，要与 Google Maps 对象交互，您需要通过 gMaps API，而不是 jQuery。

例如，这里有一些代码，完全未经测试，但它应该给你一个想法：

```
var markers = {
    "america" : [ new google.maps.Marker({ "display": false, "position": .... }) ],
    "china" : [ new google.maps.Marker({ "display": false, "position": ... }) ]
};

$('#americaButton').click(function () {
     for (var i = 0; i< markers["america"].length; i++)
         markers["america"][i].setDisplay(true);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:34:22.563

您的代码引用的是 jQuery 对象，而不是 DOM 元素。很容易获得实际的 DOM 元素，这是 DOM 侦听器期望的参数。只需`.get(0)`在第一个参数中添加 showAmerica 变量：

```
var showAmerica = $("#showAmerica");
    google.maps.event.addDOMListener(showAmerica.get(0), 'click', function(){
        $('#america').toggle();
}); 
```

此外，建议您观看有关[将 DevTools 与 Google Maps API 结合使用的](http://goo.gl/oyKIF)视频。

# wpf - 在两个屏幕上的两个窗口上复制一个控件

> ID：10616766
> 
> 赞同：0
> 
> 时间：2012-05-16T10:35:12.740
> 
> 标签：wpf, screenshot

我需要在两个不同屏幕上的两个窗口上复制一个控件，我正在编写一个 WPF 应用程序，其中我有一个“WebBrowserControl”，我需要将“WebBrowserControl”复制到另一个窗口和另一个屏幕上。我需要在两个屏幕上渲染精确的副本，此外我需要在两个屏幕上捕获鼠标移动。鼠标应该在两个屏幕上的确切位置移动。

任何人都可以提出任何建议吗？我已经尝试捕获屏幕并将其放在另一个窗口中，但是如何捕获鼠标移动？

有任何想法吗？任何帮助都将非常有价值。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:05:21.127

处理鼠标移动事件是关于如何捕获鼠标移动的答案。

[鼠标移动](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousemove)

让我困惑的部分是你将如何在两个屏幕上都有鼠标。

# java - 在 XML 中发送 blob 或字节数组

> ID：10616769
> 
> 赞同：8
> 
> 时间：2012-05-16T10:35:18.610
> 
> 标签：java, android, xml, jakarta-ee, xmlhttprequest

我是新手后端开发人员。我正在开发一个 REST 网络服务。我的要求是将 BLOB 内容从服务器发送到移动端。我的疑问是，是否可以在 XML 中发送 BLOB 或者我应该将其转换为 ByteArray 并发送它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T10:39:34.300

首先。将您的位图转换为 ByteArray，然后将该字节数组转换为 Base64 字符串格式并以 xml 格式发送该 Base64 字符串格式。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bmp.compress(CompressFormat.PNG, 0 , baos); //bmp is the bitmap object   
byte[] b = baos.toByteArray(); 
String encodedImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

现在发送`encodedImage`你的xml...

Base64 到位图的转换

```
public static Bitmap convertByteArrayToBitmap(String Base64String) 
{
    byte[] data = Base64.decode(Base64String, Base64.DEFAULT);
    Bitmap bitmap = BitmapFactory.decodeByteArray(data , 0, data.length);
    return bitmap;
} 
```

# php - 从 MySQL 反映 PHP 中的子记录

> ID：10616772
> 
> 赞同：1
> 
> 时间：2012-05-16T10:35:22.427
> 
> 标签：php, mysql, collections

我正在尝试使用 2 个单独的表从我的数据库中获取记录。查询是

```
public function get_pages_by_campign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid, campaignid FROM pages,campaigns WHERE 'pages.campaignid = campaigns.id'");
} 
```

这被调用：

```
$counter = 1;
            $userID = PageDB::getInstance()->get_user_id_by_name($_SESSION['user']);
            $result = PageDB::getInstance()->get_pages_by_campaign_id($campaignID);
            $i=0;
                while ($row = mysqli_fetch_array($result)):
                 $style = "";
                    if($i%2==0)
    {
        $style = ' style="background-color: #EFEFEF"';
    }
    echo "<tr".$style.">";

                echo "<td style='width:140px;'> Page "  . $counter .  "</td>";
                echo "<td>&nbsp;</td>";
                echo "<td></td>";

                //The loop is left open
                ?>
                <td>
                <form style="display:none;"></form>
                    <form name="editPage" action="editPage.php" method="GET">
                        <input type="hidden" name="pageID" value="<?php echo $pageID = $row['pid']; ?>"/>
                        <input type="submit" name="editPage" value="Edit"/>
                    </form>
                </td>
                <td>
                    <form name="deletePage" action="deletePage.php" method="POST">
                        <input type="hidden" name="pageID" value="<?php echo $pageID = $row['pid']?>"/>
                        <input type="submit" name="deletePage" value="Delete" onclick = "javascript: return confirm('Delete Page <?php echo $counter ?> ?');"/>
                    </form>
                </td>
                <?php
                $pageID = $row['pid'];  
                $counter++;
                $i++;

                echo "</tr>\n";
            endwhile;
            mysqli_free_result($result);
            ?> 
```

这应该列出所有“页面”记录，但它没有返回任何内容。

我已经在表“campaigns”中设置了“id”列，以使用外键与表“pages”中的“campaignid”相对应。

我设法用这个来修复它：

```
public function get_pages_by_campaign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid, campaignid FROM pages WHERE campaignid = 'campaigns.id'");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:12:36.697

```
"SELECT pid, campaignid FROM pages,campaigns WHERE pages.campaignid = campaigns.id" 
```

?

# c# - 枚举复合设备节点

> ID：10616775
> 
> 赞同：0
> 
> 时间：2012-05-16T10:35:43.097
> 
> 标签：c#, wmi, device

我有以下类枚举本地 PC 上的所有 COM 端口，仅查找并存储具有以给定前缀开头的友好名称的那些。

现在，假设我知道这样的 COM 端口是复合设备的一部分，并且复合设备也有一个网络适配器，我怎样才能找到与给定设备关联的网络适配器？我确信必须有一种相对简单的方法（我认为两个设备都将具有相同的父节点），但我不确定非互操作方法是什么......有人可以帮忙吗？

这是课程：

```
/// <summary>
/// A class to enumerate all COM ports through USB.
/// </summary>
public class SerialPortUSB
{

    /// <summary>
    /// Structure to store a port name and details.
    /// </summary>
    public struct PortName
    {
        public string Port;
        public string Fullname;
        public bool HadPrefix;
    };

    /// <summary>
    /// Function to return all ports with the given prefix.
    /// </summary>
    /// <param name="prefix"></param>
    /// <returns></returns>
    static public List<PortName> PortsWithPrefix(string prefix)
    {
        List<PortName> ports = new List<PortName>();

        try
        {
            // Select all COM ports.

            ManagementObjectSearcher searcher = new ManagementObjectSearcher(   "root\\CIMV2",
                                                                                "SELECT * FROM Win32_SerialPort");

            // Now iterate results looking for those that start with the prefix.

            foreach (ManagementObject item in searcher.Get())
            {
                string friendlyName = (string)item["Caption"];

                if (!friendlyName.StartsWith(prefix))
                {
                    continue;
                }

                // Construct an item for this.

                PortName name = new PortName();

                int start = friendlyName.LastIndexOf('(') + 1, end = friendlyName.LastIndexOf(')');

                name.HadPrefix = true;

                name.Port = friendlyName.Substring(start, end - start);
                name.Fullname = friendlyName;

                ports.Add(name);
            }
        }
        catch (ManagementException e)
        {
            // Failed to find any...
        }

        // Return the list of ports.

        return ports;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:34:15.917

以为我会回复自己的问题，而不是删除问题以防万一其他人发现答案有用。

事实证明，PNPDeviceID，Win32_SerialPorts 和 Win32_NetworkAdapters 中都存在的属性包含设备唯一的 ID，因此可以识别它们。解决方案是首先枚举串口，然后提取 PNPDeviceID 的唯一部分，然后找到所有 LIKE '%value%' 的网络适配器，其中 value 是 PNPDeviceID 的一部分。

事实证明，两者的数字相同，即：

串口 PNPDeviceID = USB\VID_17DC&PID_0500&MI_02\8&18F2972&0&0002"

和

网络适​​配器 PNPDeviceID = USB\VID_17DC&PID_0500&MI_00\8&18F2972&0&0000"

，其中通用 ID 为 18F2972。

# xml - XSLT - 用树替换节点

> ID：10616776
> 
> 赞同：0
> 
> 时间：2012-05-16T10:35:46.683
> 
> 标签：xml, xslt

我有以下源 xml

```
<forms>
  <x>
    <y>
        <x-component select="foobar" />
    </y>
  </x>

  <component name="foobar">
    <some>
        <component>
            <value>text</value>
        </component>
    </some>
  </component>
</forms> 
```

我正在尝试将其转换为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<forms>
    <x>
        <y>
            <component name="foobar">
                <some>
                    <component>
                        <value>text</value>
                    </component>
                </some>
            </component>
        </y>
    </x>
</forms> 
```

我的 xsl 文件是

```
<?xml version="1.0" encoding="UTF-8" ?>

<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>

    <xsl:template match="x-component">
        <yoba>
            <xsl:attribute name="z">
                <xsl:value-of select="@select"/>
            </xsl:attribute>
            <xsl:apply-templates select="/forms/component[@name=@select]/*"  />
        </yoba>
    </xsl:template>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <xsl:apply-templates select="*"/>
    </xsl:template>
</xsl:stylesheet> 
```

如何传递`select`此行的当前节点的属性值（而不是 PLACEHOLDER）：

```
<xsl:apply-templates select="/forms/component[@name=<PLACEHOLDER>]/*"  /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:16:02.300

使用`current()/@select`. 或者更好地定义一个 key`<xsl:key name="k1" match="component" use="@name"/>`和 do `<xsl:apply-templates select="key('k1', @select)"/>`。

# java - 如何将两个位图合并到另一个位图

> ID：10616777
> 
> 赞同：32
> 
> 时间：2012-05-16T10:35:54.383
> 
> 标签：java, android

我有两个图像，我想将一个位图图像完全保存在另一个位图图像存在的同一点上，我还使用手势移动图像。

```
public Bitmap combineImages(Bitmap ScaledBitmap, Bitmap bit) {

        int X = bit.getWidth();
        int Y = bit.getHeight();

        Scaled_X = ScaledBitmap.getWidth();
        scaled_Y = ScaledBitmap.getHeight();

        System.out.println("Combined Images");

        System.out.println("Bit :" + X + "/t" + Y);

        System.out.println("SCaled_Bitmap :" + Scaled_X + "\t" + scaled_Y);

        overlaybitmap = Bitmap.createBitmap(ScaledBitmap.getWidth(),
                ScaledBitmap.getHeight(), ScaledBitmap.getConfig());
        Canvas canvas = new Canvas(overlaybitmap);
        canvas.drawBitmap(ScaledBitmap, new Matrix(), null);
        canvas.drawBitmap(bit, new Matrix(), null);

        return overlaybitmap;
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-16T10:41:28.263

你可以像这样组合两个位图

```
public static Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1, new Matrix(), null);
    canvas.drawBitmap(bmp2, 0, 0, null);
    bmp1.recycle();
    bmp2.recycle();
    return bmOverlay;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-21T10:57:48.857

您可以组合两个位图，即另一个位图上的位图作为叠加，
试试下面的代码：

```
 public Bitmap bitmapOverlayToCenter(Bitmap bitmap1, Bitmap overlayBitmap) {
        int bitmap1Width = bitmap1.getWidth();
        int bitmap1Height = bitmap1.getHeight();
        int bitmap2Width = overlayBitmap.getWidth();
        int bitmap2Height = overlayBitmap.getHeight();

        float marginLeft = (float) (bitmap1Width * 0.5 - bitmap2Width * 0.5);
        float marginTop = (float) (bitmap1Height * 0.5 - bitmap2Height * 0.5);

        Bitmap finalBitmap = Bitmap.createBitmap(bitmap1Width, bitmap1Height, bitmap1.getConfig());
        Canvas canvas = new Canvas(finalBitmap);
        canvas.drawBitmap(bitmap1, new Matrix(), null);
        canvas.drawBitmap(overlayBitmap, marginLeft, marginTop, null);
        return finalBitmap;
    } 
```

# c++ - 如何访问“boost::function”中的类实例（对象）指针？

> ID：10616780
> 
> 赞同：0
> 
> 时间：2012-05-16T10:36:02.117
> 
> 标签：c++, boost, member-function-pointers, boost-function

```
CClass inst;
boost::function<bool(int)> func = boost::bind(&CClass::Foo, &inst, _1); 
```

在这种情况下，我想访问 inst 的指针（&inst）或来自“func”的地址，如下所示。

```
CClass* pInstance = func.obj_ptr; (This is just a form that I want) 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:11:48.340

你不能。的全部意义`boost/std::function`在于*擦除*存储在其中的类型。要实现您正在谈论的内容，需要重新构建类型。由于 C++ 是一种静态类型语言，这意味着调用此类函数的代码必须显式提供返回的类型。类似的东西`func.value<TypeName>()`。

更重要的是，即使可用，您所说的也不可能。唯一`function`知道的类型是它被*赋予*的类型。这是 的返回值`boost/std::bind`。如果不深入研究实现细节，这种类型就无法广泛使用。

所以你要求的是不可能的。并非没有自己将其存储在其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:07:19.390

我想这样的成员（参数）不应该在 boost::function 类中公开。如果我是对的，你将无法做到。至少没有一些奇怪的操作。

如果您确实需要类似的东西并且是 func 对象的创建者，那么我现在能想象的最干净的方法是： `std::pair<boost::function<bool(int)>, CClass *> funcAndObj`，然后调用`funcAndObj.first()`并从中获取指针`funcAndObj.second`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:58:35.377

有一种方法，使用[`boost::function::target()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/function_base.html#id334950-bb)模板方法。但是由于`boost::bind`返回未指定的类型，女巫还没有提供访问参数的方法，您需要编写自己的绑定函子。下面是一些例子：

```
class MyClass
{
    public:
    void myMethod()
    {
        std::cout << "This is my Method" << std::endl; 
    }
};

struct MyFunctor
{
    MyFunctor(MyClass* o, void (MyClass::*m)()): object(o),method(m){}
    MyClass* object;
    void (MyClass::*method)();

    void  operator() ()
    {
        return (object->*method)();
    }
}; 
```

所以现在你可以访问：

```
MyClass myObject;
boost::function< void() > func= MyFunctor(&myObject, &MyClass::myMethod);
func();

assert( func.target<MyFunctor>()->object == &myObject ); 
```

与模板方法`boost::any`无法进行多态访问一样。`target`

# jquery - 在 FireFox 中选择的 jquery 插件中聚焦不正确

> ID：10616784
> 
> 赞同：2
> 
> 时间：2012-05-16T10:36:13.187
> 
> 标签：jquery, firefox, jquery-plugins, jquery-chosen

例如，我有两行。在第一行表格中工作正常，但在第二行中，我必须按两次 TAB 才能关注下一个 CHOSEN 元素。我注意到，该错误在 FireFox 中重现，并且仅当 CHOSEN 下拉列表具有滚动条时（没有它可以正常工作）。

代码示例：http: [//jsfiddle.net/streamcode9/fp5pE/](http://jsfiddle.net/streamcode9/fp5pE/)

是 FireFox 还是 CHOSEN 问题？有可能解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T11:59:41.880

原因是 Firefox 将焦点设置在结果列表的 ul 元素上。我通过添加`tabindex="-1"`到.`ul``chosen.jquery.js`

```
<ul class="chzn-results" tabindex="-1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T12:55:58.820

以下解决方案对我有用

```
$('html,body').animate({
    scrollTop: $('select').data('chosen').container.offset().top
}); 
```

但是，您需要根据您的项目要求将自己的选择器放在 $('select')

# c - 多线程启动顺序

> ID：10616787
> 
> 赞同：2
> 
> 时间：2012-05-16T10:36:22.583
> 
> 标签：c, linux, pthreads

我有 4 个线程来创建 thread1、thread2、thread3 和 thread4：

```
pthread_create(thread1,NULL,thread_func1,NULL);
pthread_create(thread2,NULL,thread_func2,NULL);
pthread_create(thread3,NULL,thread_func3,NULL);
pthread_create(thread4,NULL,thread_func4,NULL); 
```

在调试中查看，启动线程的顺序与源码中定义的不一样。是否有解决方案可以按照我可以定义的顺序启动线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:43:06.500

启动顺序*是*连续的，因为创建调用按照它们写入的顺序发生。

但是，无论出于何种原因，调度程序*都没有*按照您希望的顺序调度新启动的线程。如果顺序很重要，也许线程不是您想要的？线程的一大优势是它们并不总是按顺序安排！

如果您真的想要，尽管您可以使用同步原语（例如一系列互斥锁或 condvar）来确保直到某个点以可预测的顺序发生，但从那时起，顺序仍将取决于调度器。作为示例，此代码保证每个线程将按照创建顺序打印其 ID：

```
#include <pthread.h>
#include <stdio.h>

static pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t cond = PTHREAD_COND_INITIALIZER;

void sync_threads(const int num, int *cur) {
  pthread_mutex_lock(&mut);
  while (*cur != num) {
    pthread_cond_wait(&cond, &mut);
  }
  // Do work that must happen in order here:
  printf("Thread: %d\n", num);
  ++*cur;
  pthread_mutex_unlock(&mut);
  pthread_cond_broadcast(&cond);
}

static int num = 1;

void *thread1(void *d) {
  sync_threads(1,&num);
  while (1); // Rest of work happens whenever
  return NULL;
}

void *thread2(void *d) {
  sync_threads(2,&num);
  while (1);
  return NULL;
}

void *thread3(void *d) {
  sync_threads(3,&num);
  while (1);
  return NULL;
}

void *thread4(void *d) {
  sync_threads(4,&num);
  while (1);
  return NULL;
}

int main() {
  pthread_t t1,t2,t3,t4;
  pthread_create(&t1, NULL, thread1, NULL);
  pthread_create(&t2, NULL, thread2, NULL);
  pthread_create(&t3, NULL, thread3, NULL);
  pthread_create(&t4, NULL, thread4, NULL);
  while(1) {
    // some work
  }
} 
```

我曾经`while(1);`模拟一些真实的工作发生。它通过保护“当前”线程的互斥体来做到这一点，即初始化顺序，然后是 condvar 以使睡眠/唤醒成为可能。它向所有线程广播，然后检查以查看下一个是哪个线程。您可以设计为跳过广播的系统，但这会使事情变得复杂而收益相对较小。

如果需要，您还可以在其他点添加更多同步，但是您同步的东西越多，首先拥有线程的意义就越小。

理想情况下，如果事情需要以可预测的顺序发生，它们应该在产生线程*之前*完成，而不是在线程产生后立即完成，例如：

```
fixed_init_for_thread1();
fixed_init_for_thread2();
fixed_init_for_thread3();
fixed_init_for_thread4();

pthread_create(thread1,NULL,thread_func1,NULL);
pthread_create(thread2,NULL,thread_func2,NULL);
pthread_create(thread3,NULL,thread_func3,NULL);
pthread_create(thread4,NULL,thread_func4,NULL); 
```

这样，当创建线程时，您并不关心实际上哪个线程有机会首先运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:27:49.087

我认为您并不真正关心首先执行哪个线程。如果您只需要四个线程的唯一标识符，请检查 pthread_self。要获得顺序 ID，请从线程内调用 ID 分配器；或在调用 pthread_create 时生成 ID 并将其作为用户参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:22:17.163

在我使用的解决方案之后

```
#include <pthread.h>
#include <stdio.h>

static pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
static bool wait = TRUE;

void thread_sync() {
  pthread_mutex_lock(&mut);
  wait = FALSE;
  pthread_cond_signal(&cond);
  pthread_mutex_unlock(&mut);
}
void thread_wait_sync() {
  pthread_mutex_lock(&mut);
  if (wait==TRUE)
  {
      pthread_cond_wait(&cond,&mut);
  }
  wait = TRUE;
  pthread_mutex_unlock(&mut);
}

void *thread1(void *d) {
  thread_sync();
  while (1); // Rest of work happens whenever
  return NULL;
}

void *thread2(void *d) {
  thread_sync();
  while (1);
  return NULL;
}

void *thread3(void *d) {
  thread_sync();
  while (1);
  return NULL;
}

void *thread4(void *d) {
  while (1);
  return NULL;
}

int main() {
  pthread_t t1,t2,t3,t4;
  pthread_create(&t1, NULL, thread1, NULL);
  thread_wait_sync();
  pthread_create(&t2, NULL, thread2, NULL);
  thread_wait_sync();
  pthread_create(&t3, NULL, thread3, NULL);
  thread_wait_sync();
  pthread_create(&t4, NULL, thread4, NULL);
  while(1) {
    // some work
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:59:29.883

```
Move 'pthread_create(thread2,NULL,thread_func2,NULL);' into thread_func1()
Move 'pthread_create(thread3,NULL,thread_func2,NULL);' into thread_func2()
Move 'pthread_create(thread4,NULL,thread_func2,NULL);' into thread_func3() 
```

这与最近发布的另一个问题非常接近，而且同样错误..“奇怪”

# .htaccess - 将 ww.domain.com 重定向到 www.domain.com

> ID：10616793
> 
> 赞同：0
> 
> 时间：2012-05-16T10:36:38.757
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite

嘿，我在重定向我的网站时遇到问题。我想重定向：

```
ww.domain.com 
```

至

```
www.domain.com 
```

但我似乎无法让它工作。我已经尝试在整个互联网上搜索，我似乎得到的只是这段代码不起作用

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(ww?\.)?domain\.com(:\d+)?$
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:35:57.887

使用此代码：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(ww\.)?domain\.com$ [NC]
RewriteRule ^ http://www.domain.com%{REQUEST_URI} [R=301,L] 
```

# canvas - 带有 Spotify API 的画布元素

> ID：10616794
> 
> 赞同：1
> 
> 时间：2012-05-16T10:36:40.040
> 
> 标签：canvas, webkit, html5-canvas, spotify

我目前正在玩（测试开发）一个可以在 Spotify 软件平台上运行的应用程序。在 Spotify Developers 的官方网站上，描述清楚地表明：

> JavaScript、HTML5 和 CSS3

是可用于为 Spotify 开发应用程序的语言。以及在[http://www.essays.se/essay/b72aaa236b/阅读了两名学生（](http://www.essays.se/essay/b72aaa236b/)*其中一名在 Spotify 工作*）的文章后，我发现该软件使用 WebKit 来完成一些任务。

现在，我有一个工作应用程序，我主要使用 Canvas 元素 ( *HTML5* ) 来呈现图形。所以我想在 Spotify 上测试它，但似乎 Spotify 的 WebKit 根本不允许使用 Canvas。

为什么会这样？是否有任何安全问题或有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:32:01.233

Canvas 在 Spotify Apps API 中应该可以正常工作——我自己也用过。从“开发”菜单中选择“显示 HTML5 支持”，您将在顶部附近看到画布。

Spotify 使用 Chromium 渲染引擎，因此上面列表中 Spotify 支持的任何内容都可以像在 Chrome 中一样工作。

# django - 如何读取 Facebook access_token 返回的 JSON 数据

> ID：10616795
> 
> 赞同：0
> 
> 时间：2012-05-16T10:36:42.237
> 
> 标签：django, json, facebook-graph-api, django-views

我正在尝试在我的网站中获取登录用户的 facebook 用户名。我在我的视图中有这段代码（在 Django 上）：

```
code = request.GET.get('code')
url = 'https://graph.facebook.com/oauth/access_token?client_id=%(id)s&redirect_uri=http://127.0.0.1:8000/skempi/home&client_secret=%(secret)s&code=%(code)s'%{'id':fb_id,'secret':fb_s,'code':code}
response = urllib2.urlopen(url)
html = response.read()
dic = dict(urlparse.parse_qsl(html))
graph_url = 'https://graph.facebook.com/me?access_token='+dic.get('access_token') 
```

当我这样做时，`return HttpResponseRedirect(graph_url)`我可以看到 JSON 数据。但是，我无法使用

```
import simplejson
d = simplejson.load(graph_url)
context ={'user':d}
return render_to_response('home.html', context, context_instance=RequestContext(request)) 
```

我收到此错误：

```
'str' object has no attribute 'read' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:43:55.430

您必须先下载 JSON，simplejson 才能对其进行解码。

```
response = urllib2.urlopen(graph_url)
data = simplejson.load(response) 
```

# java - 在 Android 中创建类似填字游戏的游戏

> ID：10616800
> 
> 赞同：-4
> 
> 时间：2012-05-16T10:36:53.287
> 
> 标签：java, android

我想创建一个像填字游戏这样的游戏，它具有拖放、缩放功能。有人可以指导我如何进行此操作吗？是否需要开发任何 3rd 方 Jar？

我的意思是，哪种视图最​​适合创建一个像 UI 和字母一样的棋盘。

我需要将一个字母从 1 列拖到另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:28:15.053

有许多可用于游戏开发的引擎，它们很容易支持拖放功能。请检查此引擎，例如

Andengine,libgdx,cocos2d 尝试使用这些引擎

# ios - .xib 中的许多 UIButton 具有不同的标签

> ID：10616811
> 
> 赞同：0
> 
> 时间：2012-05-16T10:37:28.617
> 
> 标签：ios, uibutton

我的 xib 中有 17 个按钮。我已将它们的标签值设置为 1 到 17。

有人可以告诉我，如何将所有 17 个按钮与 .h 中的一个变量名连接起来，并在 .m 中获取一个带有标签值的特定按钮。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:43:43.247

不，根据我的经验，这是不可能的。IBOutlet 即Interface Builder Outlet 总是指界面组件（如按钮）和界面中的变量（如IBOutlet UIButton *myButton）之间的单个连接。这种一对一的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:45:52.393

需要有一个`IBOutlet`每个按钮，因此您需要创建所有 17 个按钮。将按钮单独连接到插座，然后如果您需要将它们放入数组中，则可以将它们放入初始化程序中的数组中。

不过，您可以节省`IBAction`方法：制作一个这样的方法

```
-(IBAction)buttonClicked:(id)sender {
} 
```

您可以将此方法连接到所有按钮，并查看标签`(id)sender`以确定哪个按钮调用您的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:25:43.247

我刚刚对此进行了测试，并且我知道如果您选择情节提要中的所有按钮，并控制将它们拖动到助理编辑器中的适当控制器，您可以创建代表所有按钮的插座集合。结果代码是：

```
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *buttons; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:50:56.767

您不能只引用 17 个按钮，但可以将一种方法分配给 17 个按钮，如 @dasblinkenlight 所说

您只需将`IBAction`方法设置为所有按钮单击事件并使用标签值即可访问所需的按钮

```
-(IBAction)buttonClicked:(id)sender {

     int j = [sender tag];
     NSLog(@"Clicked Button %i", j);

} 
```

# ios - 在 iphone 中加载网站的桌面版本

> ID：10616813
> 
> 赞同：1
> 
> 时间：2012-05-16T10:37:38.763
> 
> 标签：ios, url, uiwebview

对您来说，这似乎是重复的，但只要我的问题没有解决，我就应该在这里寻求帮助。我已经尝试过以前给出的答案，但没有任何东西对我有用。所以请帮帮我。

我想强制我的 UIWebView 加载所有网站的桌面版本（不是移动版本）并且我正在使用此代码，但我仍然获得了网站的移动版本。

```
NSURL *urlValue = [NSURL URLWithString:@"any url here"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:urlValue];
    NSString *newUserAgent = @"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.77 Safari/535.7";
    [request setValue:newUserAgent forHTTPHeaderField:@"User_Agent"];
    [webView loadRequest:request]; 
```

我的 User_Agent 字符串可能有问题。所以需要你的帮助。

# image - 如何不将图像拖出框架？

> ID：10616816
> 
> 赞同：2
> 
> 时间：2012-05-16T10:37:51.430
> 
> 标签：image, windows-phone-7

我找不到我需要的属性或对象..

我已经实现了一个可拖动和可缩放的图像，但我可以将它拖出屏幕，所以我的图像丢失了视图。

我应该将图像放在哪里以将其保存在盒子中（并且可能具有不错的弹跳效果）？

**编辑：**

实际上，我的图像必须保留在堆栈面板中，只有放大的可能性。（最大缩小作为第一次渲染）。

一点代码：

```
 private void OnPinchStarted(object sender, PinchStartedGestureEventArgs e)
    {
        initialAngle = compositeTransform.Rotation;
        initialScale = compositeTransform.ScaleX;
    }

    private void OnPinchDelta(object sender, PinchGestureEventArgs e)
    {
        compositeTransform.ScaleX = initialScale * e.DistanceRatio;
        compositeTransform.ScaleY = initialScale * e.DistanceRatio;
    }

    private void OnDragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        compositeTransform.TranslateX += e.HorizontalChange;
        compositeTransform.TranslateY += e.VerticalChange;
    }

    <StackPanel x:Name="container">
        <Image x:Name="image_chart">
            <Image.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="scale" />
                    <TranslateTransform x:Name="transform" />
                    <CompositeTransform x:Name="compositeTransform"/>
                </TransformGroup>
            </Image.RenderTransform>
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener PinchStarted="OnPinchStarted" PinchDelta="OnPinchDelta"
                                         DragDelta="OnDragDelta"/>
            </toolkit:GestureService.GestureListener>
        </Image>
    </StackPanel> 
```

**编辑 2 - 半答案**

我终于找到了如何以原始尺寸停止缩小！

```
private void OnPinchDelta(object sender, PinchGestureEventArgs e)
    {
        if (1.0 <= (initialScale * e.DistanceRatio))
        {
            compositeTransform.ScaleX = initialScale * e.DistanceRatio;
            compositeTransform.ScaleY = initialScale * e.DistanceRatio;
        }
    } 
```

If 条件意味着：如果我放大 -> 没问题，因为 e.DistanceRatio >1。如果我缩小，我会停下来，直到 initialScale 相同！

现在我仍然需要关于如何避免外部阻力的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:49:34.897

好的，我找到了解决方案，但我需要一些改进。缩放有效，但是当图像在右侧时，它全部在左侧（因为它是从左上角开始缩放的..

这是“阻止拖动”的代码：

```
private void OnDragDelta(object sender, DragDeltaGestureEventArgs e)
    {

        double realWidth = image_chart.ActualWidth*compositeTransform.ScaleX;
        double realHeight = image_chart.ActualHeight * compositeTransform.ScaleY;

        if(compositeTransform.TranslateX>=0)
           compositeTransform.TranslateX = Math.Max(container.ActualWidth - realWidth,
                                                 Math.Min(0, compositeTransform.TranslateX + e.HorizontalChange));
        else
            compositeTransform.TranslateX = Math.Max(container.ActualWidth - realWidth,
                                                     Math.Min(0, compositeTransform.TranslateX + e.HorizontalChange));
        if(compositeTransform.TranslateY>=0)
           compositeTransform.TranslateY = Math.Max(container.ActualHeight - realHeight,
                                                 Math.Min(0, compositeTransform.TranslateY + e.VerticalChange));
        else
            compositeTransform.TranslateY = Math.Max(container.ActualHeight - realHeight,
                                                     Math.Min(0, compositeTransform.TranslateY + e.VerticalChange)); 
```

**编辑：**

最后，我决定使用 WebBrowser.. 更加“流畅”和愉快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:07:00.917

我的解决方案：

XAML 代码

```
<StackPanel  x:Name="Scroll" Margin="0">
                    <Image  CacheMode="BitmapCache" Name="FrontCover"   Source="{Binding FullCover}"  >
                        <Image.RenderTransform>
                            <CompositeTransform x:Name="transform" ScaleX="1" ScaleY="1"  />
                        </Image.RenderTransform>
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener   PinchDelta="OnPinchDelta" PinchStarted="OnPinchStarted" DragDelta="OnDragDelta"  />
                        </toolkit:GestureService.GestureListener>
                    </Image>
            </StackPanel> 
```

```
 double initialScale;

    private void OnPinchStarted(object sender, PinchStartedGestureEventArgs e)
    {
        initialScale = transform.ScaleX;
    }

    private void OnPinchDelta(object sender, PinchGestureEventArgs e)
    {
        var curZoom = initialScale * e.DistanceRatio;
        if (curZoom >= 1 && curZoom <= 3)
        {
            transform.ScaleX = curZoom;
            transform.ScaleY = curZoom;

        }
    }

    private void OnDragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        transform.CenterX = (transform.CenterX - e.HorizontalChange);
        transform.CenterY = (transform.CenterY - e.VerticalChange);

        if (transform.CenterX < 0)
            transform.CenterX = 0;
        else if ( transform.CenterX > Scroll.ActualWidth)
            transform.CenterX = Scroll.ActualWidth;
        else if (transform.CenterX > (FrontCover.Height * transform.ScaleX))
            transform.CenterX = FrontCover.Height * transform.ScaleX;

        if (transform.CenterY < 0)
            transform.CenterY = 0;
        else if (transform.CenterY > Scroll.ActualHeight)
            transform.CenterY = Scroll.ActualHeight;
        else if (transform.CenterY > (FrontCover.Height * transform.ScaleY))
            transform.CenterY = FrontCover.Height * transform.ScaleY;

    } 
```

认为它应该帮助别人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:27:51.163

假设开始时图像位于左上角（请检查缩放后是否仍然有效）：

```
private void OnDragDelta(object sender, DragDeltaGestureEventArgs e)
{
    compositeTransform.TranslateX = Math.Min(container.ActualWidth - image_chart.ActualWidth,
        Math.Max(0,
            compositeTransform.TranslateX + e.HorizontalChange));
    compositeTransform.TranslateY = Math.Min(container.ActualHeight - image_chart.ActualHeight,
        Math.Max(0,
            compositeTransform.TranslateY + e.VerticalChange));
} 
```

# cordova - 在 Windows Phone / PhoneGap 1.7 上更改起始页

> ID：10616820
> 
> 赞同：2
> 
> 时间：2012-05-16T10:38:07.557
> 
> 标签：cordova, windows-phone

我想在我的 Windows Phone 的 PhoneGap 1.7 项目中加载与 index.html 不同的 HTML 文件。不幸的是，我似乎找不到可以改变的地方。有什么帮助吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:35:12.983

您的 MainPage.xaml.cs 包含 MainPage 构造函数。在此构造函数中，您需要更改 PGView 对象的 startPageUri 属性，如下所示：

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        this.PGView.StartPageUri = new Uri("/app/www/test.html", UriKind.Relative);
        this.PGView.Loaded += GapBrowser_Loaded;
    } 
```

如您所见，我创建了一个新的 Uri，指向 www 目录中名为 test.html 的文件。将此字符串更改为您希望的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:13:10.173

打开**WMAppManifest.xml**文件，查找标签**进而**并将属性 NavigationPage 更改为应用程序启动时要导航的页面。****

# java - Netbeans 数据库资源管理器和 Microsoft SQL Server 无法相处

> ID：10616823
> 
> 赞同：0
> 
> 时间：2012-05-16T10:38:37.577
> 
> 标签：java, database, sql-server-2008, netbeans-7

我正在尝试让 Java 桌面应用程序从 Microsoft SQL-Server 2008 数据库中提取一些数据。Netbeans 数据库资源管理器可以从数据库表生成实体类，但我无法使此功能正常工作。通常，当您连接到数据库时，您会看到如下内容：![Netbeans 数据库浏览器视图](../Images/a135b65a8f16a9e24a3d755747059ae0.png)

我输入了数据库 URL、用户名和密码，连接就建立了。但是当我试图探索这些桌子时，它们都是空的。而不是上面那棵漂亮的树，我只是得到了一个空模式列表。尝试了多个用户名，都遇到了同样的问题。由于数据库上没有与用户名匹配的模式，因此显示了许多不同的模式供我选择。无论我选择哪一个，当我展开它时，表格或视图中都没有显示任何内容。

为了验证用户名和密码确实可以访问我感兴趣的表，我编写了一个简短的 Java 方法来连接到数据库并显示查询的 ResultSet。它按预期工作。为什么 netbeans 数据库浏览器找不到表？

我希望使用这个工具来生成带有 Netbeans 的实体类，但显然 Microsoft SQL erver 不会拥有它。我正在使用 netbeans 7.1；数据库浏览器工具的文档可[在 db.netbeans.org 上找到](http://db.netbeans.org/doc/howtostart.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:06:10.097

昨天我在使用 Microsoft 的 JDBC 驱动程序时遇到了同样的问题。我尝试了另一个项目 jTDS（可在 SourceForge 上获得）。它可以解决我的问题。一些论坛建议始终使用此驱动程序，因为它更快。

# java - Web 界面所需的日志文件查看器

> ID：10616826
> 
> 赞同：1
> 
> 时间：2012-05-16T10:38:45.347
> 
> 标签：java, jakarta-ee, logging, log4j

我需要一个日志文件查看器，它具有允许访问软件测试器的方法。测试人员无权访问服务器，并降低了用户权限。因此，我相信最好的方法是添加某种基于 Web 界面的日志文件查看器。开发语言是 java，服务器是 Java EE 服务器 (Geronimo)。

我可以安装和配置指向日志的战争将是一个很棒的解决方案。仅开源/免费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:41:25.370

日志2网络？

[http://en.wikipedia.org/wiki/Log4j#Log_viewers](http://en.wikipedia.org/wiki/Log4j#Log_viewers)

# javascript - 在另一个 JavaScript 文件中加载 JavaScript 文件

> ID：10616829
> 
> 赞同：2
> 
> 时间：2012-05-16T10:39:03.983
> 
> 标签：javascript, jquery, sockets, node.js

我正在使用`node.js`和`socket.io`做服务器/客户端的事情。在我的服务器上，因为它不在网页上，有没有办法可以加载最新的文件（或最新的 jQuery？），这样我就可以在我的服务器 js 文件中使用 jQuery 函数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:42:34.033

你可以像这样在你的服务器上安装 jQuery：

```
npm install jquery 
```

然后你需要像这样声明你的 jQuery 变量：

```
var $ = require('jQuery'); 
```

现在你可以像以前一样使用 jQuery 了。更多信息[在这里](https://github.com/coolaj86/node-jquery)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:44:15.453

您可以将其作为文本加载，并`eval(jquery)`让您使用 jquery

# arrays - 如何在powershell中使用string.format和字符串数组

> ID：10616831
> 
> 赞同：7
> 
> 时间：2012-05-16T10:39:11.460
> 
> 标签：arrays, powershell, string-formatting

我想将格式化的字符串输出到控制台。我有一个字符串变量和一个字符串数组变量。

当我这样做时：

```
$arr = "aaa","bbb"
"test {0} + {1}" -f "first",$arr 
```

输出是这样的：

```
test first + System.Object[] 
```

但我需要输出为：

```
test first + aaa,bbb 
```

或者类似的东西...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T10:47:29.780

几个选项：

1.  首先加入数组，因此您不依赖默认`ToString()`实现（仅打印类名）：

    ```
    PS> 'test {0} + {1}' -f 'first',($arr -join ',')
    test first + aaa,bbb 
    ```

2.  使用字符串插值：

    ```
    PS> $first = 'first'
    PS> "test $first + $arr"
    test first + aaa bbb 
    ```

    您可以更改设置使用的分隔符`$OFS`，默认情况下是空格：

    ```
    PS> $OFS = ','
    PS> "test $first + $arr"
    test first + aaa,bbb 
    ```

3.  您可以获得相同的结果（包括关于 的注释`$OFS`）

    ```
    PS> 'test {0} + {1}' -f 'first',(''+$arr)
    test first + aaa bbb 
    ```

    这也强制将数组首先转换为单个字符串。

# jquery - 从外部链接链接到选项卡式内容内的锚点

> ID：10616833
> 
> 赞同：0
> 
> 时间：2012-05-16T10:39:24.367
> 
> 标签：jquery

**从外部链接链接** 到选项卡式内容中的[锚点 转到锚点](http://www.canberra.edu.au/media/test/bookmark.html/#test)。脚本需要作为全局文件添加到所有页面/模板中。[到目前为止，我所](http://www.canberra.edu.au/media/test/bookmark.html)拥有的示例。

单击`<a goto="stuff" href="#test">Go to stuff</a>`/ 转到***第三个选项卡***。

**[jsfiddle](http://jsfiddle.net/dhirajbodicherla/TGMDd/2/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:10:25.893

问题在于 $(window.location.hash) 的计算结果为 $('#test')，因此它会查找 ID="test" 的元素。您的页面上不存在此类元素。

使用这样的链接：

[http://www.canberra.edu.au/media/test/bookmark.html/#test](http://www.canberra.edu.au/media/test/bookmark.html/#test)

通常会表明您要转到标有锚名称 =“测试”的内容。

在您的示例中，我可以看到至少两个具有相同名称属性的锚点：

```
<a name="test"></a> 
```

这是错误的 - 锚名称必须是唯一的：

[http://www.w3.org/TR/html401/struct/links.html#idx-anchor-4](http://www.w3.org/TR/html401/struct/links.html#idx-anchor-4)

因此，一旦您解决了这个问题并拥有了唯一的锚名称，您就可以使用 href 代替 goto 属性。**同时使用name**和**id**也是一个好主意：

```
<a id="test" name="test"></a> 
```

这将使 $(window.location.hash) 按预期工作。

所以现在这应该激活正确的选项卡：

```
var $targetAnchor = $(window.location.hash);
tabId = $targetAnchor.closest('.tab-content').attr('id');
$tabs.find('a[href=#' + tabId + ']').click(); 
```

这应该适用于滚动：

```
$('html, body').animate({
    scrollTop: $targetAnchor.offset().top
}); 
```

# macos - Silverlight 5：在 Macintosh 上使用 XNA 的 3D

> ID：10616838
> 
> 赞同：2
> 
> 时间：2012-05-16T10:39:39.747
> 
> 标签：macos, 3d, xna, silverlight-5.0

我可以访问使用 silverlight 5 开发的在线应用程序的封闭测试版。其中有一个功能，显示一些 3D 场景。XNA 已用于 3D。从 windows-pc 一切正常。但是，当我在带有 OSX 的 Mac 上对其进行测试时，Silverlight-App 也可以正常工作。但不是 3D 功能。在左上角有一条信息显示：“渲染模式：不可用”和“原因：“Not3DCapable”。所以我[将此示例](http://code.msdn.microsoft.com/Controllable-Textured-3D-f7b1beab)推送到我的 IIS。这次从 Windows 一切都很好，但是当尝试从 OSX (Firefox) 访问时开始加载 Silverlight 但显示 100% 后没有任何反应。场景未显示。

有没有人有任何线索，如何支持mac？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:28:41.720

不幸的是，我发现了一些其他网站，例如此[博客](http://michaelcrump.net/silverlight-5-has-been-released-plus-other-info)（请参阅 3\. FAQ）和此[博客](http://blogs.msdn.com/b/eternalcoding/archive/2011/10/04/silverlight-toolkit-september-2011-for-silverlight-5-what-s-new.aspx)（请参阅评论），它们的说法相同：3D 在 Mac 上不起作用。可悲的是，微软似乎将这一事实正式保密。找到了这个[页面](http://msdn.microsoft.com/en-us/library/cc838247)，我原本希望在其中阅读“不支持 3D”之类的内容。这不悲哀吗？我认为 Silverlight 应该是平台独立的？我希望他们会改变主意并添加对 OpenGL 或类似的支持。

# php - 2012 年防止 SQL 注入

> ID：10616847
> 
> 赞同：0
> 
> 时间：2012-05-16T10:40:04.850
> 
> 标签：php, mysql, pdo, sql-injection

我已经很好地阅读了这个问题[mysqli 或 PDO - 优点和缺点是什么？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons). 但我认为它有点过时了。准备好的语句仍然是对抗注射的最佳解决方案吗？

我将创建一个新的 php 接口来访问我的 mysql 数据库，所以我想从一开始就做好它。

pdo 也不会减慢您的查询速度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:43:07.163

使用准备好的语句/参数化查询。这是完全安全的，因为您不会将 SQL 与同一字符串中的数据混合在一起，并且您不必再考虑转义。至少如果您不开始以用户可以修改它们的方式使列/表名称动态化。

您通过使用 PDO 获得的优势绝对值得最小的性能损失。

# java - 更改日期格式以查询数据库

> ID：10616851
> 
> 赞同：0
> 
> 时间：2012-05-16T10:40:12.470
> 
> 标签：java, hibernate

如何更改以下日期的日期格式

```
Thu May 17 00:00:00 GMT+05:30 2012 
```

到

```
2012-05-17 00:00:00 
```

我需要它作为日期而不是字符串。我在用

```
new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("") 
```

但它没有给出结果。实际上，我正在明智地存储值。因此，当有人再次输入同一日期的数据时，它应该覆盖。如果我将它作为日期对象传递给休眠查询，它会给出结果。但不总是。在少数情况下，它会再次插入，即插入同一日期的重复数据。在输入之前，我正在添加一种方法来检查该日期是否存在数据。`criteria.add(Restrictions.eq("date", date));`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:47:59.167

```
String str ="Thu May 17 00:00:00 GMT+05:30 2012";

        DateFormat old_format = new SimpleDateFormat("EEE MMM dd hh:mm:ss z yyyy");
        Date newDate = null;
        try {
            newDate = old_format.parse(str);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        DateFormat new_format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        String date = new_format.format(newDate);

        System.out.println("==>"+date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:40:10.060

您根本不应该在这里进行字符串操作。您在评论中说它是数据库中的日期/时间字段，那么为什么您的代码中会涉及*任何字符串转换？*

将 JDBC 中的参数指定为`java.sql.Date`或`java.sql.Timestamp`其他 - 然后也以这种方式获取它们。不要进行字符串转换。忽略在工具中查询数据库时发生的任何格式 - 根本不要认为结果具有“格式” - 它们只是日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:47:34.347

像现在一样做，但`parse("")`改为`format(theDate)`

`theDate`作为您要格式化的 Date 对象

请参阅 [http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format(java.util.Date](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format(java.util.Date) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:14:03.003

```
String date = "Thu May 17 00:00:00 GMT+05:30 2012";
String oldFormat = "EEE MMM dd hh:mm:ss z yyyy";
String newFormat = "yyyy-MM-dd HH:mm:ss";
SimpleDateFormat sdf1 = new SimpleDateFormat(oldFormat);
SimpleDateFormat sdf2 = new SimpleDateFormat(newFormat);
sdf2.format(sdf1.parse(date)) 
```

# django - Django-mptt 不显示“名称”属性

> ID：10616858
> 
> 赞同：0
> 
> 时间：2012-05-16T10:40:32.487
> 
> 标签：django, django-mptt

我想我正确地遵循了文档，但仍然出现了 le* 奇怪的问题：MPTT 模板标签很好地显示了树，缩进和全部，但不是 node.name 标记（空）

我的模特

```
class Forme(MPTTModel):

name = models.CharField(max_length=50, unique=True)
source_id = models.IntegerField(max_length=50, unique=True)
parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

def __unicode__(self):
    return unicode(self.name)

class MPTTMeta:
    order_insertion_by = ['name'] 
```

我的观点

```
def listnode(request):

nodes = Node.objects.using('hmdjango').all()

selectforme = Forme.tree.all()

allnodes = []

for n in Node.objects.using('hmdjango').all() :

    try:
        intervention = FieldDataFieldItemIntervention.objects.using('hmdjango').get(entity_id__exact=n.id)
    except FieldDataFieldItemIntervention.DoesNotExist:
        intervention.field_item_intervention_value = 'BOOM'

    try:
        forme = FieldDataFieldItemForme.objects.using('hmdjango').get(entity_id__exact=n.id)
    except FieldDataFieldItemForme.DoesNotExist:
        forme.field_item_forme_tid = 'BOOM'

    allnodes.append({'id':n.id, 'title':n.title,\

        'intervention':intervention.field_item_intervention_value, \
        'forme':forme.field_item_forme_tid})

return render_to_response('node_list.html', {'nodes':allnodes, 'formes':selectforme}, context_instance=RequestContext(request)) 
```

我的模板（我确实加载了 mptt_tags）

```
<ul class="root">
{% recursetree formes %}
    <li>
        {{ forme.name }}
        {% if not forme.is_leaf_node %}
            <ul class="children">
                {{ children }}
            </ul>
        {% endif %}
    </li>
{% endrecursetree %} 
```

**编辑** 通过“formes”变量的经典循环表明我可以访问名称属性。因此我的猜测是`recursivetree`模板标签，由 django-mptt 提供，是我的主要嫌疑人

```
{% for forme in formes %}
  <li>{{ forme.name }}
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:04:33.773

发现问题。

在文档中，我们有示例

```
<ul class="root">
{% recursetree nodes %}
    <li>
        {{ node.name }}
        {% if not node.is_leaf_node %}
            <ul class="children">
                {{ children }}
            </ul>
        {% endif %}
    </li>
{% endrecursetree %} 
```

节点是我们的 MPTT 模型的一个实例。但它**必须**被称为“节点”。并且您的模板中不应有变量“节点”。

# objective-c - iOS 应用程序仅在某些随机设备上引发 0x8badf00d

> ID：10616860
> 
> 赞同：3
> 
> 时间：2012-05-16T10:40:54.843
> 
> 标签：objective-c, ios, memory-leaks, crash, crash-reports

> **可能重复：**
> [我在 iPhone 应用程序中收到错误 0x8badf00d，这不是通常的嫌疑人](https://stackoverflow.com/questions/1282491/i-get-error-0x8badf00d-in-iphone-app-and-is-not-the-usual-suspect)

这是我在这里的第一篇文章，所以如果你认为我做错了什么，请告诉我;D

首先，我一直在做研究，但没有成功，我无法弄清楚发生了什么。

我正在开发一个通用应用程序，它在我用来测试它的每台设备（iPhone 3GS、iPhone 4、iPhone 4S、iPad 2 和 iPod Touch 4G）上运行良好。但是一些客户报告说应用程序在启动时关闭（也在不同的型号和 iOS 版本中，所以似乎没有共同因素。我的意思是，应用程序不会只在特定的设备型号/iOS 版本中失败）。

其中一位非常好心，他给了我事故报告员。这似乎是一个常见的 0x8badf00d 问题（我必须以某种方式优化启动，以便 didFinishLaunchingWithOptions 尽快返回，我知道）。重新启动设备，在后台/暂停中关闭其他应用程序，然后它就可以工作了。这是崩溃报告器（我不知道为什么它没有像下面发布的第二个崩溃报告器那样被符号化。我在 Xcode 管理器上导入了它，我有必要的文件来符号化）：

```
Date/Time:       2012-05-15 00:42:19.074 +0200
OS Version:      iPhone OS 5.0.1 (9A405)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  0

Application Specific Information:
com.myApp.free failed to resume in time

Elapsed total CPU time (seconds): 2.400 (user 2.400, system 0.000), 12% CPU 
Elapsed application CPU time (seconds): 0.073, 0% CPU 

Last Exception Backtrace:
0                                   0x3293a8bf  + 848537791
1                                   0x356021e5  + 895492581
2                                   0x32883b6b  + 847788907
3   myApp                           0x0000a82d -[PhoneViewController requestFinished:] (PhoneViewController.m:1679)
4                                   0x3289922b  + 847876651
5   myApp                           0x0002a0b1 -[ASIHTTPRequest reportFinished] (ASIHTTPRequest.m:2028)
6                                   0x3289922b  + 847876651
7                                   0x31fc2757  + 838608727
8                                   0x3290eb03  + 848358147
9                                   0x3290e365  + 848356197
10                                  0x3290d075  + 848351349
11                                  0x328904dd  + 847840477
12                                  0x328903a5  + 847840165
13                                  0x335a8fcd  + 861573069
14                                  0x36953743  + 915748675
15  myApp                           0x000033af main (main.m:27)
16  myApp                           0x00003368 0x1000 + 9064

Thread 0:
0   ???                               0x3465c32c 0 + 879084332
1   ???                               0x35e77fe6 0 + 904364006
2   ???                               0x336cbf66 0 + 862764902
3   ???                               0x336c9348 0 + 862753608
4   ???                               0x356022de 0 + 895492830
5   ???                               0x336c93c0 0 + 862753728
6   ???                               0x336c944c 0 + 862753868
7   ???                               0x336ca820 0 + 862758944
8   ???                               0x35602230 0 + 895492656
9   ???                               0x32890540 0 + 847840576
10  ???                               0x328903a0 0 + 847840160
11  ???                               0x335a8fc8 0 + 861573064
12  ???                               0x3695373e 0 + 915748670
13  myApp                           0x000033aa main (main.m:27)
14  myApp                           0x00003364 0x1000 + 9060 
```

后来我这里的一位朋友带来了一部 iPhone 4，但该应用程序无法正常工作，显然是因为同样的问题。崩溃报告器也显示了 0x8badf00d，但之前的重启“解决方案”不起作用。此外，这两次崩溃之间存在差异：第一次在启动画面显示时在几秒钟内崩溃，而第二次则花费更多时间（我尝试了几次，但仍然比第一次慢）。我插入 iPhone 以查看 Xcode 控制台中发生的情况（在崩溃报告之后发布了一些行）。这里是崩溃记者...

```
Date/Time:       2012-05-15 11:57:30.227 +0200
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  0

Application Specific Information:
com.myApp.free failed to launch in time

Elapsed total CPU time (seconds): 12.410 (user 12.410, system 0.000), 63% CPU 
Elapsed application CPU time (seconds): 7.302, 37% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x35069dcc __open + 8
1   DataDetectorsCore               0x30c8ca60 DDmmap + 8
2   DataDetectorsCore               0x30c860ea DDCacheCreateFromFileAtPathWithExtraChecks + 14
3   DataDetectorsCore               0x30c860b8 DDCacheCreateFromSystemCache + 1252
4   DataDetectorsCore               0x30c85a16 DDScannerCreateWithType + 14
5   DataDetectorsCore               0x30c85aaa DDScannerCreate + 6
6   Foundation                      0x3118cac8 -[NSDataDetector initWithTypes:error:] + 960
7   Foundation                      0x3118c6ec +[NSDataDetector dataDetectorWithTypes:error:] + 44
8   myApp                           0x00004c0c -[PhoneViewController getTelfNumbers] (PhoneViewController.m:213)
9   myApp                           0x00007062 -[PhoneViewController viewDidLoad] (PhoneViewController.m:864)
10  UIKit                           0x32479e3e -[UIViewController awakeFromNib] + 106
11  UIKit                           0x3250c2ec -[UINib instantiateWithOwner:options:] + 1236
12  UIKit                           0x3247a4ac -[UIViewController _loadViewFromNibNamed:bundle:] + 240
13  UIKit                           0x32357dfa -[UIViewController loadView] + 82
14  UIKit                           0x322cddb8 -[UIViewController view] + 44
15  UIKit                           0x3232d7de -[UITabBarController transitionFromViewController:toViewController:transition:shouldSetSelected:] + 86
16  UIKit                           0x3232d77c -[UITabBarController transitionFromViewController:toViewController:] + 24
17  UIKit                           0x3232d0b6 -[UITabBarController _setSelectedViewController:] + 294
18  UIKit                           0x3232cdea -[UITabBarController setSelectedIndex:] + 234
19  myApp                           0x00003f1e -[AppDelegate application:didFinishLaunchingWithOptions:] (AppDelegate.m:294)
20  UIKit                           0x322cce4c -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1176
21  UIKit                           0x322c697e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 402
22  UIKit                           0x32294c64 -[UIApplication handleEvent:withNewEvent:] + 1004
23  UIKit                           0x32294708 -[UIApplication sendEvent:] + 48
24  UIKit                           0x322940dc _UIApplicationHandleEvent + 5820
25  GraphicsServices                0x364c9224 PurpleEventCallback + 876
26  CoreFoundation                  0x3524a51c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
27  CoreFoundation                  0x3524a4be __CFRunLoopDoSource1 + 134
28  CoreFoundation                  0x3524930c __CFRunLoopRun + 1364
29  CoreFoundation                  0x351cc49e CFRunLoopRunSpecific + 294
30  CoreFoundation                  0x351cc366 CFRunLoopRunInMode + 98
31  UIKit                           0x322c5a0c -[UIApplication _run] + 544
32  UIKit                           0x322c2e76 UIApplicationMain + 1074
33  myApp                           0x000033a8 main (main.m:27)
34  myApp                           0x00003360 0x1000 + 9056 
```

...这里是控制台上抛出的行：

```
2012-05-16 10:52:26.440 myApp[315:707] DDCache: mmap failed with error 12
2012-05-16 10:52:26.444 myApp[315:707] DataDetectorsCore: mmapping the cache file failed
2012-05-16 10:52:26.466 myApp[315:707] DDCache: mmap failed with error 12
2012-05-16 10:52:26.470 myApp[315:707] DataDetectorsCore: mmapping the cache file failed
2012-05-16 10:52:26.485 myApp[315:707] DDCache: mmap failed with error 12
2012-05-16 10:52:26.490 myApp[315:707] DataDetectorsCore: mmapping the cache file failed
2012-05-16 10:52:26.509 myApp[315:707] DDCache: mmap failed with error 12
2012-05-16 10:52:26.514 myApp[315:707] DataDetectorsCore: mmapping the cache file failed
2012-05-16 10:52:26.529 myApp[315:707] DDCache: mmap failed with error 12
2012-05-16 10:52:26.533 myApp[315:707] DataDetectorsCore: mmapping the cache file failed
2012-05-16 10:52:26.548 myApp[315:707] DDCache: mmap failed with error 12
[...]
(always the same two lines) 
```

我不知道现在该做什么。大部分设备启动应用程序没有问题，另一部分设备在重启/关闭某些应用程序后消失了“吃坏食物”，还有一些设备（到目前为止，客户的一个和一个我们的设备）可以即使重新启动/关闭应用程序也不要启动它。

正如我之前所说，似乎没有 iOS 特定设备/型号或 iOS 版本的情况。更奇怪的是，Apple 验证了我的应用程序并且他们没有报告任何崩溃或错误。好吧，事实上他们做到了，他们拒绝了我上传的第一个二进制文件，因为我没有 Info.plist，所以它在调试时可以工作，但在作为最终应用程序运行时却没有。这是固定的，但我让你知道以防万一。

任何想法？

先感谢您！

PS：我不是以英语为母语的人，所以如果有什么奇怪的地方你不明白，请不要犹豫，我会尝试用其他词再次解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:20:14.247

产生差异的一个可能原因可能是您正在使用的数据量。

正如您已经说过的，您可能应该优化您的创业公司。您正在加载电话号码，对吗？如果这可能需要一些时间，请尝试`PhoneViewController`使用活动指示器或类似方式启动并显示，然后启动一个线程以异步加载数据并在完成后更新视图。

# php - 是否值得在 OOP 中使用 get 和 set 方法？

> ID：10616866
> 
> 赞同：14
> 
> 时间：2012-05-16T10:41:15.480
> 
> 标签：php, oop, get, set

我见过一些项目，其中类具有获取和设置方法来操作插入数据。让我在这里举个例子：

```
 class Student extends dbClass
{
    private $TableID;
    private $FullName;
    private $Gender;
    private $Address;

    function setTableID($Value)
    {
        $this->TableID = $Value;
    }

    function getTableID()
    {
        return $this->TableID;
    }

    function setFullName($Value)
    {
        $this->FullName = $Value;
    }

    function getFullName()
    {
        return $this->FullName;
    }

    function setGender($Value)
    {
        $this->Gender = $Value;
    }

    function getGender()
    {
        return $this->Gender;
    }

    function setAddress($Value)
    {
        $this->Address = $Value;
    }

    function getAddress()
    {
        return $this->Address;
    }

    function UpdateStudent()
    {
        $sql = "UPDATE INTO usertable SET
        FullName = '".$this->getFullName()."',
        Gender = '".$this->getGender()."',
        Address = '".$this->getAddress()."'
        where TableID='".$this->getTableID()."'";
        $this->query($sql);
    }
} 
```

以上是我见过的示例类。以下是他们如何使用它的过程：

```
$student = new Student;
$student->setTableID = 1;
$student->setFullName('My Name');
$student->setGender('Male');
$student->setAddress('this is my address');

$studen->UpdateStudent(); 
```

这样做值得吗？我个人认为设置字段然后获取和更新其中的记录是没有用的。为每个模块制作它确实需要很多时间。处理这种事情的最佳方法是什么？这样做是否有任何安全问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T10:48:19.053

> 这样做值得吗？

这取决于。

通过公开一个“智能”属性（即 getter 和/或 setter）从用户那里抽象出一个字段有两个缺点：

1.  你需要写更多的代码；如果该属性并没有真正做任何聪明的事情，那么这是没有任何用处的代码。
2.  该属性的用户有些不便，因为他们还必须输入更多内容。

它有一个优点：

1.  将来，即使之前没有任何逻辑，您也可以向属性*添加逻辑，**而不会破坏用户的代码*。

如果这个优势是有意义的（例如，您正在编写一个可重用的软件库），那么编写属性而不是裸字段就很有意义。如果没有，你就是在做没有任何好处的工作。

> 处理这种事情的最佳方法是什么？

您可以覆盖魔术`__get`和`__set`函数（可能在基类中，因此您也可以继承覆盖）以自动将属性访问转发给您的 getter 和 setter。简化代码：

```
public function __get($name) {
    $getter = 'get'.$name;
    if (method_exists($this, $getter)) {
        return $this->$getter();
    }

    $message = sprintf('Class "%1$s" does not have a property named "%2$s" or a method named "%3$s".', get_class($this), $name, $getter);
    throw new \OutOfRangeException($message);
}

public function __set($name, $value) {
    $setter = 'set'.$name;
    if (method_exists($this, $setter)) {
        return $this->$setter($value);
    }

    $getter = 'get'.$name;
    if (method_exists($this, $getter)) {
        $message = sprintf('Implicit property "%2$s" of class "%1$s" cannot be set because it is read-only.', get_class($this), $name);
    }
    else {
        $message = sprintf('Class "%1$s" does not have a property named "%2$s" or a method named "%3$s".', get_class($this), $name, $setter);
    }
    throw new \OutOfRangeException($message);
} 
```

**警告购买者：**因为`__get`和`__set`被覆盖，`__isset`也`__unset`应该被覆盖！

> 这样做是否有任何安全问题？

不，根本没有（假设您没有意外插入错误）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T10:48:22.043

在没有*属性*（实际上导致函数调用的公共成员“变量”）的语言中，通常建议使用 getter/setter 而不是公共变量。否则，如果人们已经在使用您的普通字段，您将无法稍后添加逻辑（例如，在设置变量时）。

由于 PHP 是这样一种语言（不幸的是），答案是**肯定的，使用它们**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T10:46:07.363

制作 setter 和 getter 有助于强制执行 OOP 封装。我不确定 PHP，但对于许多其他语言（Java、C++），一个好的 IDE（eclipse/netbeans）会为你自动生成这些 setter 和 getter。

对于简单的类型，它可能不会立即显而易见，但如果必须执行任何更复杂的处理，那么它就会变得更加明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-05T08:44:30.480

关于为什么有时使用 getter 和 setter 的示例：我有在 200 个不同文件中设置值的代码：

```
$cat->name = 'Fery'          // in file one
$favoriteCat->name = 'Tery'  // in another file
$fatCat->name = 'jery'             // in another file
// 200 more calls in alot of places 
```

想象一下客户突然有一个新要求：“所有猫的名字都必须在前面加上‘Sweet’

现在我们必须找到所有猫的声明并替换它们的赋值：

```
$cat->name = 'Sweet '.'Fery'
// times 200 
```

另一方面，如果我们使用 setter 方法，我们需要做的就是在一个地方添加代码以添加“Sweet”：

```
public function setCatname($catname)
{
  $this->catName = 'Sweet ' . $catname;
} 
```

# java - Java 字段访问与 getter 语法

> ID：10616869
> 
> 赞同：1
> 
> 时间：2012-05-16T10:41:30.507
> 
> 标签：java, class, field, getter, accessor

如果有以下课程...

```
/**
 * Two dimensional cartesian point.
 */
public class Point {
  public final double x;
  private final double y;

  public double y(){
  return this.y;
  }

} 
```

我可以按以下 Point.x 或 Point.y() 检索值并且可读。

为什么 Java 不允许我为不带参数的函数调用分配哪些 ()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:45:38.130

由于 1995 年左右做出的语言设计选择，Java 不允许您这样做。Java 的目标是成为“蓝领语言”，这意味着构造的总数应该很少，并且每个构造都应该像可能的。

顺便说一句，与其问自己“为什么 Java 不让我放弃括号”，不如问自己“为什么 Java 让我编写所有多余的 getter 和 setter？” 大多数其他语言会自动执行此操作。

getter/setter 的重点不是封装（如果您只是透明地获取/设置值，实际上没有封装），而是动态调度。与任何其他方法一样，访问器可以被覆盖；还有一些框架坚持使用它们而不是直接字段访问。

对我来说，选择拥有`public final double`字段就很好。查看`GridBagConstraints`JSE 类中公共字段的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:45:33.207

当您考虑它时，代码将变得完全不可读。当你遇到类似的东西时`foo.bar`，你不会知道它是在访问一个字段，还是在调用一个方法。

它只有在你引入除了字段和方法之外的第三种构造：属性时才有效。如果 Java 支持属性，那么在没有属性的情况下访问它们`()`不会损害可读性。Java中没有类似属性的构造没有技术原因，这只是一个设计决定。

但是在没有参数的任何方法调用中允许省略括号是一个坏主意。

# jsf-2 - 从 myfaces 切换到 mojarra 后出现 IndexOutOfBoundsException

> ID：10616870
> 
> 赞同：0
> 
> 时间：2012-05-16T10:41:37.497
> 
> 标签：jsf-2, primefaces, myfaces, mojarra

我被迫从 myfaces (2.1.7) 切换到 mojarra (2.1.7)。在此之后，我在下面到处都是这样的例外。

我正在提交一个表单，它给了我验证错误。到目前为止这是正确的。我再次提交表单，这给了我验证错误。到目前为止这是正确的。现在我再次提交表单，我得到了 IndexOutOfBoundsException。

```
javax.faces.FacesException: Unexpected error restoring state for component with id someForm:someField.  Cause: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1.
    at com.sun.faces.application.view.StateManagementStrategyImpl$2.visit(StateManagementStrategyImpl.java:272)
    at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIForm.visitTree(UIForm.java:371)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:251)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at javax.faces.component.AttachedObjectListHolder.restoreState(AttachedObjectListHolder.java:165)
    at javax.faces.component.UIInput.restoreState(UIInput.java:1411)
    at com.sun.faces.application.view.StateManagementStrategyImpl$2.visit(StateManagementStrategyImpl.java:264)
    ... 35 more 
```

我用谷歌搜索了这个，但还没有找到任何线索。

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:29:16.480

堆栈跟踪提示您正在使用 PrimeFaces。

这个问题在旧版本的 PrimeFaces 中是已知的，实际上是 PrimeFaces 中的错误，而不是 Mojarra 中的错误。确保您使用的是[最新](http://www.primefaces.org/downloads.html)的PrimeFaces 版本。截至目前，当您使用 PF2 时为 2.2.1，当您使用 PF3 时为 3.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T08:23:47.140

I have the exact same problem and it is easy to reproduce.
You can reproduce it with the following classes:

Validator:

```
@FacesValidator("testValidator")
public class TestValidator implements Validator {

    @Override
    public void validate(FacesContext fc, UIComponent uic, Object o) throws ValidatorException {
        if (!(o instanceof Integer)) {
            throw new ValidatorException(new FacesMessage("validation message!"));
        }
    }
} 
```

FacesComponent:

```
@ListenerFor(systemEventClass = PreValidateEvent.class)
@FacesComponent("testField")
public class TestField extends UIComponentBase implements NamingContainer {

@Override
public String getFamily() {
    return UINamingContainer.COMPONENT_FAMILY;
}

@Override
public void processEvent(ComponentSystemEvent event) throws AbortProcessingException {
    super.processEvent(event);
    UIComponent findComponent = findComponent("input");
    if (findComponent instanceof UIInput) {
        UIInput i = (UIInput) findComponent;
        boolean notFound = true;
        for (Validator v : i.getValidators()) {
            if (v instanceof TestValidator) {
                notFound = false;
            }
        }
        if (notFound) {
            i.addValidator(new TestValidator());
        }
    }
}

} 
```

Custom Component:

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:cc="http://java.sun.com/jsf/composite">

    <!-- INTERFACE -->
    <cc:interface componentType="testField">
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        field: <h:inputText id="input" value="#{testController.inputText}" />
    </cc:implementation>
</html> 
```

ManagedBean:

```
@SessionScoped
@Named("testController")
public class TestController implements Serializable {

private static final long serialVersionUID = 1L;

private String inputText = "";

public TestController() {
}

public void actionListener(ActionEvent event) {

}

public String myAction() {
    return "";
}

public String getInputText() {
    return inputText;
}

public void setInputText(String inputText) {
    this.inputText = inputText;
}

} 
```

index.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://java.sun.com/jsf/composite/test"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
        <title>Jsf Problem</title>
    </h:head>
    <h:body>
        <h:form>    
            <h:messages />
            <t:field />
            <h:commandButton value="Submit" action="#{testController.myAction()}" />
        </h:form>
    </h:body>
</html> 
```

The inputText inside the custom component field gets an new Validator added at PreValidateEvent inside the processEvent() method.
If the submit button is now pressed three times in a row with an validation error the ArrayIndexOutOfBoundException will be thrown. I tried to debug and found out that the exception is throwed inside AttachedObjectListHolder#restoreState(FacesContext, Object), afterward my eclipse debugger got crazy...

**I think this is a JSF Bug!**

I wanted to leave a comment but I'am not allowed yet... :(

# vb.net - WP7 安排在特定时间发送短信？

> ID：10616871
> 
> 赞同：0
> 
> 时间：2012-05-16T10:41:39.167
> 
> 标签：vb.net, windows-phone-7.1

我已经阅读了设置警报和提醒的方法。有什么建议如何设置自动发送短信的提醒吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:47:56.233

使用 windows phone 无法自动发送短信，您始终需要用户确认。您可以设置提醒，以便用户可以手动发送短信。

# web-services - 使用 Fiddler2 监控命令提示符执行的程序

> ID：10616874
> 
> 赞同：0
> 
> 时间：2012-05-16T10:41:59.600
> 
> 标签：web-services, windows-7, dos, fiddler

我目前正在尝试使用 Fiddler 2 来监控 Web 服务请求。我想知道是否可以从通过 Windows 7 中的命令提示符运行的程序中获取会话。我尝试使用以下命令配置命令提示符以使用本地主机代理：

netsh winhttp 设置代理 127.0.0.1:8888

尽管运行程序（Axis2C 安装中的一个简单示例，它与 Yahoo Web 服务通信）仍然在 Fiddler 中没有产生会话，但这似乎并没有什么不同。我将不胜感激任何人都可以在设置此工作时提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:37:40.943

[http://www.fiddler2.com/fiddler/help/hookup.asp](http://www.fiddler2.com/fiddler/help/hookup.asp)解释了如何将各种 HTTP 堆栈挂接到 Fiddler。听起来您已经排除了 WinINET 和 WinHTTP；您应该询问“Axis2C”的维护者它使用什么网络堆栈。

# c# - 如何根据对象上的 2 个绑定属性在 DataTemplate 中显示图像

> ID：10616877
> 
> 赞同：0
> 
> 时间：2012-05-16T10:42:15.637
> 
> 标签：c#, wpf, data-binding, datatemplate

我将一个列表绑定到我的`User`对象 ObservableCollection，因此它会自动更新。我使用模板来显示用户，但我还想根据User 对象`Name`上的值在名称旁边显示一个图像图标。`IsOp`

我不知道如何在谷歌搜索中表达这一点，如果有人能指出我正确的方向，请。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="196">
    <Window.Resources>
        <DataTemplate DataType="{x:Type loc:User}">
            <Grid Height="28">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="21" MinWidth="21" MaxWidth="21" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Image Name="imgUserType" Source="/WpfApplication1;component/Images/NormalUser.png" VerticalAlignment="Center" HorizontalAlignment="Center" Width="16"  Height="16" Margin="5,0,0,0" />
                <Label Name="lblName" Content="{Binding Name}" Grid.Column="1" Padding="7,5,5,5" VerticalContentAlignment="Center" HorizontalAlignment="Left" />
            </Grid>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding IsOp}" Value="True">
                <Setter TargetName="imgUserType" Property="Source" Value="/WpfApplication1;component/Images/OpUser.png" />
            </DataTrigger>
        </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ListBox ItemsSource="{Binding}">

        </ListBox>
    </Grid>
</Window> 
```

**编辑1：**

我刚刚遇到了一个叫做 DataTriggers 的东西，它监视某个值然后相应地塑造模板……这是要走的路吗？

**编辑 2：** 我已经实现了一个基本触发器来更改图标。现在我的新问题是如何结合两个属性。

```
IsOp (true) + Away (true) = OpAwayIcon
IsOp (true) + Away (false) = OpIcon
IsOp (false) + Away (true) = NormalIconAway
IsOp (false) + Away (false) = NormalIcon 
```

编辑 3：

我找到了解决方案：

```
 <DataTemplate.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding IsOp}" Value="True"/>
                    <Condition Binding="{Binding IsAway}" Value="True"/>
                </MultiDataTrigger.Conditions>
                <Setter TargetName="imgUserType" Property="Source" Value="/WpfApplication1;component/Images/OpUserAway.png" />
            </MultiDataTrigger>
        </DataTemplate.Triggers> 
```

# mysql - Mysql 中的 Zend_Db_Expr('NOW()') 和 datetime

> ID：10616880
> 
> 赞同：0
> 
> 时间：2012-05-16T10:42:22.473
> 
> 标签：mysql, zend-framework, datetime, zend-db-table

所以我在实时网站上遇到了一个奇怪的问题，我不确定是什么导致了这个问题，因为在 mysql 表的 datetime 字段中，有时会映射时间，而更多时候不是。然而，日期总是被映射。

代码如下：

```
 $party_system_id = $this->blabla->addUser($username, 'None', 'None', '',
   $email,$promo_code,$distributor_id);

    if ($party_system_id!=0){

    $loginToken = md5(uniqid(rand(), true));    

        $params = array(
            'sponsorId' => $sponsor_id,
            'refferalId' => $referral_id,
            'accountType' => $type,
            'email' => $email,
            'username' => $username,
            'password' => md5($password),
            'firstName' => 'n/a',
            'lastName' => 'n/a',
            'expires' => $expiration_date,
            'activated' => 1,
            'gender' => $gender,
            'languageId' => 38,
            'onlineStatus'=> 0,
            'status' => 5,
            'dateAdded' => new Zend_Db_Expr('NOW()'),
            'blaId' => $party_system_id,
    'loginToken' => $token,
            'termsAccepted' => 1
        );

        return $this->insert($params);

    } 
```

注册总是很好，但就像我对很多用户说的那样： **2012-05-16 10:20:33**我会得到：**2012-05-16 00:00:00**当然不是 00：注册时 00:00 :)

我不确定什么可能是问题，mysql、脚本结构或 Zend_Db_Expr。我也不知道如何正确调试它，但所有建议都更受欢迎:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:37:59.393

确保 dateAdded 字段确实具有 Ymd H:i:s 作为格式，但您也可以简单地使用 `date('Y-m-d H:i:s')`

```
 $params = array(
        'sponsorId' => $sponsor_id,
        'refferalId' => $referral_id,
        'accountType' => $type,
        'email' => $email,
        'username' => $username,
        'password' => md5($password),
        'firstName' => 'n/a',
        'lastName' => 'n/a',
        'expires' => $expiration_date,
        'activated' => 1,
        'gender' => $gender,
        'languageId' => 38,
        'onlineStatus'=> 0,
        'status' => 5,
        'dateAdded' => date('Y-m-d H:i:s'),
        'blaId' => $party_system_id,
        'loginToken' => $token,
        'termsAccepted' => 1
    ); 
```

# android - 有关 Android 软件包的书籍？

> ID：10616882
> 
> 赞同：1
> 
> 时间：2012-05-16T10:42:31.203
> 
> 标签：android

有没有什么好书可以解释 Android SDK 中的所有包和内置类？好书很少，但它并没有解释所有可用的软件包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:50:40.570

你为什么不试试

[https://developer.android.com/reference/packages.html](https://developer.android.com/reference/packages.html)

和

[https://developer.android.com/reference/classes.html](https://developer.android.com/reference/classes.html)。

没有一本书能比这更好地解释 android 包和类

请从**Android SDK Manager下载****Android SDK 文档**以离线访问这些包和类

# networking - 如何在主机和网络字节顺序之间转换双精度？

> ID：10616883
> 
> 赞同：3
> 
> 时间：2012-05-16T10:42:31.897
> 
> 标签：networking, linux-kernel, embedded, arm, endianness

有人可以告诉我如何将双精度转换为网络字节排序。我试过了

```
uint32_t htonl(uint32_t hostlong);
uint16_t htons(uint16_t hostshort);
uint32_t ntohl(uint32_t netlong);
uint16_t ntohs(uint16_t netshort); 
```

功能并且它们运行良好，但它们都没有进行双重（浮点）转换，因为这些类型在每个架构上都是不同的。通过 XDR，我发现了双浮点精度格式表示（[http://en.wikipedia.org/wiki/Double_precision](http://en.wikipedia.org/wiki/Double_precision)），但那里没有字节排序。

所以，如果有人帮助我解决这个问题，我将不胜感激（C 代码会很棒！）。注意：操作系统是 Linux 内核 (2.6.29)，ARMv7 CPU 架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:31:30.280

您可以查看[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)中的浮点交换格式。

但关键应该是定义网络顺序，例如。1\. 字节指数和符号，字节 2 到 n 作为 msb 顺序的尾数。

然后你可以声明你的函数

```
uint64_t htond(double hostdouble);
double ntohd(uint64_t netdouble); 
```

实现仅取决于您的编译器/平台。
最好的应该是使用一些*自然*定义，这样您就可以在 ARM 平台上使用简单的转换。

**编辑：**

从评论

```
static void htond (double &x)
{
  int *Double_Overlay; 
  int Holding_Buffer; 
  Double_Overlay = (int *) &x; 
  Holding_Buffer = Double_Overlay [0]; 
  Double_Overlay [0] = htonl (Double_Overlay [1]); 
  Double_Overlay [1] = htonl (Holding_Buffer); 
} 
```

这可以工作，但显然只有当两个平台都对 double 使用相同的编码模式并且 int 具有相同的 long 大小时。
顺便提一句。返回值的方式有点奇怪。

但是你可以写一个更稳定的版本，像这样（伪代码）

```
void htond (const double hostDouble, uint8_t result[8])
{
  result[0] = signOf(hostDouble);
  result[1] = exponentOf(hostDouble);
  result[2..7] = mantissaOf(hostDouble);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T20:23:03.070

这可能是 hacky（char* hack），但它适用于我：

```
double Buffer::get8AsDouble(){

    double little_endian = *(double*)this->cursor;

    double big_endian;

    int x = 0;
    char *little_pointer = (char*)&little_endian;
    char *big_pointer = (char*)&big_endian;

    while( x < 8 ){
        big_pointer[x] = little_pointer[7 - x];
        ++x;
    }

    return big_endian;

} 
```

为简洁起见，我没有包括范围守卫。不过，在此级别工作时，您应该包括范围守卫。

# android - 如何在RelativeLayout中剪辑2个ImageView

> ID：10616887
> 
> 赞同：0
> 
> 时间：2012-05-16T10:42:36.143
> 
> 标签：android, imageview, android-relativelayout, clipped

我有一个带有 2 个 ImageView 的布局，例如，一个正方形（第 3 部分）和一个矩形（第 1 部分），如附图所示。 ![在此处输入图像描述](../Images/77329d04989c53d3b3c27124c6a5e912.png)

我希望这些 ImageView 有一个共同的剪辑部分（第 2 部分）。问题是我**必须**使用 RelativeLayout （出于其他原因）。因此，我尝试为 alignParentLeft 和 margin left/margin right 属性设置，希望它们会被剪裁。任何建议表示赞赏。

谢谢。

# .net - 无法在 Visual web developer 2010 Express 上添加对 dll 的引用

> ID：10616888
> 
> 赞同：1
> 
> 时间：2012-05-16T10:42:39.180
> 
> 标签：.net, visual-studio-2010

我是新来的，所以在此先感谢。我正在尝试在 .NET 上的新项目中添加一个 Dll，但它没有出现在解决方案资源管理器中。我什至无法导入代码文件。在 express 版本上添加 dll 有什么限制吗？我是.NET 技术的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:41:11.653

> 对不起。Microsoft 已决定从默认视图中删除*Reference*以减少“混乱”。但是，当您保存项目时，您的“显示所有文件”设置将保持不变。因此，如果您显示所有文件一次然后保存，那么它将始终处于打开状态。
> 
> 您还可以在项目设计器中查看您的引用，您可以始终在选项卡中保持打开状态。

在 Visual Basic 中添加引用

> 在解决方案资源管理器中，双击项目的“我的项目”节点。
> 
> 在项目设计器中，单击引用选项卡。
> 
> 单击“添加”按钮打开“添加引用”对话框。
> 
> 在“添加引用”对话框中，选择指示要引用的组件类型的选项卡。
> 
> 选择要引用的组件，然后单击“确定”。
> 
> 在打开的窗口中，您可以查看是否引用了您的 dll。*如果在添加 dll 引用时显示错误，请更新。*

参考： [如何：将项目引用添加到 Visual Studio Web 项目](http://msdn.microsoft.com/en-us/library/f3st0d45.aspx)
[如何：在 Visual Studio 中添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)

# canvas - 将 SVG 对象从一个画布拖到另一个画布

> ID：10616892
> 
> 赞同：1
> 
> 时间：2012-05-16T10:43:00.693
> 
> 标签：canvas, svg, drag-and-drop, raphael

我想知道是否可以将一个 SVG 对象从一个画布拖到另一个画布上。我需要实现一个网页，它有多个需要用 SVG 绘制的区域，但是这些区域被放置在页面的不同部分。要求是我必须将对象从一个区域拖到另一个区域，因此我正在考虑使用 SVG 在其上绘制多个画布区域，但我不确定是否能够从一个画布区域拖动对象执行不同的画布区域。我正在使用 RaphaelJS 在画布区域中绘制对象，并注意到当将它们拖到画布外时它们不再可见，所以我的第一个想法是不支持。

任何人都可以帮忙吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:31:55.837

Svg 绘图仅限于设置的视口（阅读：画布）。

有很多方法可以做你想做的事。例如，制作一个新的 svg 图像，您可以在拖动时在鼠标下移动。您还可以确保 svg 画布覆盖整个窗口，但请注意，这不会让您在窗口外拖动（如果这是您想要的）。另一种更完整的方法是使用[HTML5 拖放](http://www.html5rocks.com/en/tutorials/dnd/basics/)来设置拖动图像并使用那里的原生功能。

# javascript - 如何为阿拉伯语/波斯语键盘初始化文本输入？

> ID：10616897
> 
> 赞同：1
> 
> 时间：2012-05-16T10:43:22.457
> 
> 标签：javascript, html, css, input, keyboard

我正在尝试进行文本输入，将键盘类型从英语更改为波斯语/阿拉伯语，完全有任何解决方案可以在没有点击`ctrl`+的情况下输入文本输入`shift`以使用 javascript 或 css 更改键盘类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:23:04.757

`ctrl`+`shift`是用于在定义的语言之间更改键盘的 Windows 快捷方式。它是操作系统功能，与浏览器无关。[这是](http://hasheminezhad.com/kblayout)默认输入波斯语/阿拉伯语的 jQuery 插件

# javascript - 自定义 jquery ui 日期选择器

> ID：10616898
> 
> 赞同：2
> 
> 时间：2012-05-16T10:43:23.280
> 
> 标签：javascript, jquery, css, jquery-ui

是否可以完全自定义[jquery-ui](http://jqueryui.com/home) datepicker 以匹配您的网站主题，包括标题、按钮和图像的位置。如果可能的话，应该是什么方法。怎么办？我想（几乎）完全重新设计它。还有哪些其他可能的选择？

我尝试使用 jquery [Theme Roller](http://jqueryui.com/themeroller/)对其进行一些更改/自定义，但它不允许更改日期选择器框的按钮、图像或整体设计。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:50:18.507

你可以修改它。只需通过此链接并下载文件。我自定义了日期选择器标题、内容、选定的样式。n 其他选项。[JqueryUi-Datepickr](http://jqueryui.com/download/?themeParams=?ffDefault%253DGill%252BSans%252CArial%252Csans-serif%2526fwDefault%253Dbold%2526fsDefault%253D1.2em%2526cornerRadius%253D4px%2526bgColorHeader%253D9b0303%2526bgTextureHeader%253D07_diagonals_medium.png%2526bgImgOpacityHeader%253D35%2526borderColorHeader%253D2c4359%2526fcHeader%253De1e463%2526iconColorHeader%253De1e463%2526bgColorContent%253Dffffff%2526bgTextureContent%253D01_flat.png%2526bgImgOpacityContent%253D75%2526borderColorContent%253Daaaaaa%2526fcContent%253D2c4359%2526iconColorContent%253Dc02669%2526bgColorDefault%253De25050%2526bgTextureDefault%253D07_diagonals_small.png%2526bgImgOpacityDefault%253D50%2526borderColorDefault%253D93c3cd%2526fcDefault%253D333333%2526iconColorDefault%253Dffffff%2526bgColorHover%253D323ed2%2526bgTextureHover%253D07_diagonals_small.png%2526bgImgOpacityHover%253D75%2526borderColorHover%253D999999%2526fcHover%253D212121%2526iconColorHover%253D454545%2526bgColorActive%253Ddb4d48%2526bgTextureActive%253D07_diagonals_small.png%2526bgImgOpacityActive%253D40%2526borderColorActive%253Dff6b7f%2526fcActive%253Dffffff%2526iconColorActive%253Dffffff%2526bgColorHighlight%253Dffff38%2526bgTextureHighlight%253D10_dots_medium.png%2526bgImgOpacityHighlight%253D80%2526borderColorHighlight%253Db4d100%2526fcHighlight%253D363636%2526iconColorHighlight%253D88a206%2526bgColorError%253Dff3853%2526bgTextureError%253D07_diagonals_small.png%2526bgImgOpacityError%253D50%2526borderColorError%253Dff6b7f%2526fcError%253Dffffff%2526iconColorError%253Dffeb33%2526bgColorOverlay%253Df7f7ba%2526bgTextureOverlay%253D11_white_lines.png%2526bgImgOpacityOverlay%253D85%2526opacityOverlay%253D80%2526bgColorShadow%253Dba9217%2526bgTextureShadow%253D01_flat.png%2526bgImgOpacityShadow%253D75%2526opacityShadow%253D20%2526thicknessShadow%253D10px%2526offsetTopShadow%253D8px%2526offsetLeftShadow%253D8px%2526cornerRadiusShadow%253D5px)

或者您可以访问[JqueryDatepicker](http://jqueryui.com/demos/datepicker/) n 选择主题选项卡。

这是日期时间选择器的一般标记。你可以自定义它

```
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible">
   <div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">
      <a class="ui-datepicker-prev ui-corner-all" title="Prev"><span class="ui-icon ui-icon-circle-triangle-w">Prev</span></a>
      <a class="ui-datepicker-next ui-corner-all" title="Next"><span class="ui-icon ui-icon-circle-triangle-e">Next</span></a>
      <div class="ui-datepicker-title">
         <span class="ui-datepicker-month">January</span><span class="ui-datepicker-year">2009</span>
      </div>
   </div>
   <table class="ui-datepicker-calendar">
      <thead>
      <tr>
         <th class="ui-datepicker-week-end"><span title="Sunday">Su</span></th>
         ...
      </tr>
      </thead>
      <tbody><tr>
         <td class="ui-datepicker-week-end ui-datepicker-other-month "> 1 </td>
         ...
      </tr>
      </tbody>
   </table>
   <div class="ui-datepicker-buttonpane ui-widget-content">
      <button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all">Today</button>
      <button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all">Done</button>
   </div>
</div> 
```

# php - 优化 MYSQL COUNT ORDER BY 查询

> ID：10616901
> 
> 赞同：1
> 
> 时间：2012-05-16T10:43:34.427
> 
> 标签：php, mysql, count, mysqli, sql-order-by

我最近编写了一个调查应用程序，它完成了它的工作并收集了所有数据。现在我必须分析数据，我遇到了一些时间问题。我必须找出有多少人选择了哪个选项并将其全部显示出来。

我正在使用这个查询，它确实可以完成它的工作：

```
SELECT COUNT(*)
  FROM survey
 WHERE users = ? AND table = ? AND col = ? AND row = ? AND selected = ?
 GROUP BY users,table,col,row,selected 
```

正如“？”所表明的那样 我正在使用 MySQLi（在 php 中）在需要时获取数据，但我担心这会导致它变得如此缓慢。

该表由上述所有元素（+ 唯一 ID）组成，它们都是整数。解释一些字段：每个调查分为 3 或 4 个表格（大小从 2x3 到 5x5），以 1 到 10 的幸福等级来选择表格。（问题在表格的右侧和顶部，然后您回答问题相交的地方）

用户 - 年龄组

table, row, col - 上面解释过

选择 - 上面解释过

现在，随着调查的完成和表中大约 100 万个条目，查询变得非常缓慢。有时需要 3 分钟，有时（我猜）时间限制到期，你根本没有得到任何数据。我也无法访问完整的数据库，只是我的空“测试”数据库，因为客户有点偏执：S（他的服务器似乎有点慢）

现在（在最初的文章之后）我的问题是：我故意将索引排除在外，因为在调查期间写入了大量数据，这将是一个坏主意。但是由于此时没有新数据进入，索引表的所有字段是否有意义？索引从不超过 10 的整数有多大意义？（你可以猜到我对索引一无所知）。我需要此表中的主要唯一 ID 吗？我

我在某处读到索引可能有助于分组，但前提是您按表中的第一列分组（并且由于我的 ID 是第一位的，从我的角度来看没用，我可以删除它并从中获得任何东西吗？）

有没有另一种方法来编写我的查询，它基本上会做同样的事情，但在更短的时间内？

提前感谢您的所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:59:28.190

在“GROUP BY”或“WHERE”的条目上添加索引。所以这是一个包含用户、表、列、行并在您的案例中选择的索引。

一些快速规则：

*   组合字段以首先具有 WHERE，最后是 GROUP BY 元素。
*   如果您有其他查询只使用其中的一部分（例如 users、table、col 和 selected），则将缺失值（在本例中为行）留在最后。

不要使用太多的索引/索引，因为每个索引都会减慢表的更新速度 - 所以在非常大的系统上，您需要平衡查询与索引。

* * *

编辑：您是否需要 GROUP BY 用户、列、行，因为它们在 WHERE 中使用。如果 WHERE 已经把它们过滤掉了，你只需要 group by “selected”。

# java - SimpleXML：元素声明了两次

> ID：10616903
> 
> 赞同：3
> 
> 时间：2012-05-16T10:43:43.627
> 
> 标签：java, xml, simple-framework

我尝试使用[SimpleXML](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#list)库解析 xml，但出现以下异常；当我将水域定义为列表时，无法弄清楚为什么它会抱怨。可能我忽略了一些非常基本的东西，但我找不到它。我几乎遵循[http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#list上给出的示例模式](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#list)

顺便说一句：StackOverflow 上有一个[类似的问题](https://stackoverflow.com/questions/5973028/simple-xml-element-declared-twice-error)，但情况不同，实际上并没有处理 ElementLists。就我而言，我肯定想要一个 ElementList，因此会假设我的元素的多重存在实际上应该没问题。

错误日志：

```
Error parsing xml.
        org.simpleframework.xml.core.PersistenceException: Element 'gewaessereintrag' declared twice at line 9
        at org.simpleframework.xml.core.Variable$Adapter.read(Variable.java:456)
.... 
```

XML:

```
<?xml version="1.0" ?>
<gewaesser>
    <returncode>0</returncode>
    <gewaessereintrag>
        <id>1</id>
        <name><![CDATA[Entry1]]></name>
        <info><![CDATA[Info1.]]></info>
    </gewaessereintrag>
    <gewaessereintrag>
        <id>2</id>
        <name><![CDATA[Entry2]]></name>
        <info><![CDATA[Info2.]]></info>
    </gewaessereintrag>
</gewaesser> 
```

WaterList（处理`<gewaesser>`）：

```
@Root(name = "gewaesser")
public class WaterList {

    @ElementList(type = Water.class, name = "gewaessereintrag")
    private List<Water> waters;

    @Element(name = "returncode")
    private String returncode;

    public List<Water> getWaters() {
        return waters;
    }
} 
```

水（处理`<gewaessereintrag>`）：

```
@Root(name = "gewaessereintrag")
public class Water {

    @Element(required = false, name = "name")
    private String name;

    @Element(required = false, name = "info")
    private String info;

    @Element(required = false, name = "id", type = Long.class)
    private Long id;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:52:29.447

我自己找到了答案，但也许这对其他人有帮助：

我忘了声明“ `inline = true`”

```
@ElementList(type = Water.class, name = "gewaessereintrag", inline = true) 
```

# lotus-notes - Lotus Notes Java API 中的 getFileFormat() 方法是什么，它返回的值是什么？

> ID：10616910
> 
> 赞同：2
> 
> 时间：2012-05-16T10:44:07.620
> 
> 标签：lotus-notes

我在 java 中创建了一个用于获取 nsf 文件详细信息的程序。我已经通过了包含用于获取数据库的 nsf 文件的文件路径。我想知道 getFileFormat() 方法以及它返回的值是什么。

```
Database db = session.getDatabase("", filePath);
System.out.println("File Format :"+db.getFileFormat()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:50:35.213

它将获取数据库的格式版本。本质上是创建数据库的版本。它相当于这个方法：

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.api.doc%2Fr_domino_Database_FileFormat.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.api.doc%2Fr_domino_Database_FileFormat.html)

# eclipse - 在针对 Eclipse 3.7 目标平台进行构建时，我使用了哪个 OSGi 规范实现？

> ID：10616914
> 
> 赞同：0
> 
> 时间：2012-05-16T10:44:17.293
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, osgi, equinox

我知道在创建 Eclipse 插件时使用 Eclipse 作为目标平台和使用 Equinox 作为目标平台之间的区别（也在[这个线程](https://stackoverflow.com/questions/3695305/eclipse-rcp-target-platform-eclipse-vs-equinox)中进行了解释）。

现在我已经实现了我的第一个 OSGi 服务，用于我的 Eclipse RCP 应用程序。我注意到我的课程中`import`需要的 s来自包。这似乎并没有告诉我任何关于我正在使用的实际 OSGi 规范实现的信息（或者是吗？）。`Activator``org.osgi`

所以我开始查资料，从[RCP FAQ page](http://wiki.eclipse.org/Rich_Client_Platform/FAQ)开始，上面写着：

```
╔═════════════════╦═══════════════════════════╦═══════════════════════════╗
║    Component    ║        Description        ║         Plug-ins          ║
╠═════════════════╬═══════════════════════════╬═══════════════════════════╣
║ Eclipse Runtime ║ Provides the foundational ║ org.eclipse.core.runtime  ║
║                 ║ support for plug-ins,     ║ org.eclipse.osgi          ║
║                 ║ extension points and      ║ org.eclipse.osgi.services ║
║                 ║ extensions (among         ║                           ║
║                 ║ other facilities).        ║                           ║
║                 ║ The Eclipse runtime       ║                           ║
║                 ║ is built on top of        ║                           ║
║                 ║ the OSGi framework.       ║                           ║
╚═════════════════╩═══════════════════════════╩═══════════════════════════╝ 
```

然后在[核心主页上](http://eclipse.org/eclipse/platform-core/)说

*   org.eclipse.core.runtime - 以前是平台的基础，这个插件在很大程度上被 Equinox 运行时所取代。

因此，提到了两个不同的运行时在使用中，没有一个出现在`import`s.

你能告诉我我正在使用哪种实际实现吗？是因为 Equinox 现在是 RCP 附带的标准 OSGi 规范实现吗？这是我最好的猜测，而且提到 Eclipse 运行时构建在 OSGi 框架之上是稍微过时的信息。

还是我全都错了？总是有可能:)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:27:52.533

是的，它是春分。Eclipse OSGi 实现称为 Equinox。随着时间的推移，事情已经从 org.eclipse.core.runtime 插件转移到 Equinox 的东西中。Eclipse 没有其他单独的运行时，而且自 Eclipse 3.0 以来，它已在 Equinox 上构建多年。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T17:18:45.243

`Export-Package`每个`org.osgi`包的语句都有一个版本属性。这将告诉您该软件包的规范版本。

Equinox 3.7 是 OSGi Core 4.3 文档中 Framework 1.6 规范的 RI。

# generics - Ninject，如何将接口与泛型绑定

> ID：10616919
> 
> 赞同：1
> 
> 时间：2012-05-16T10:44:34.113
> 
> 标签：generics, interface, ninject

我有一个简单的界面，如下所示：

```
public interface ICommandHandler<T>
{
    void Handle(T command);
} 
```

然后我有该接口的几个实现，这里是一个例子：

```
public class RegisterUserCommandHandler : ICommandHandler<RegisterUserCommand>
{
    private readonly IUserRepository _userRepository;

    public RegisterUserCommandHandler(IUserRepository userRepository)
    {
        _userRepository = userRepository;
    }

    public void Handle(RegisterUserCommand command)
    {
        var user = new User(command.UserId, command.Password);
        _userRepository.Add(user);
    }
} 
```

我无法`ICommandHandler`像这样解决接口的正确实现：

```
var handler = _kernel.Get<ICommandHandler<T>>(); 
```

我的问题是：如何使用 Ninject 配置绑定？

**更新** 也许我想出了这个，这是我使用[Ninject.Extensions.Conventions的解决方案](https://github.com/ninject/ninject.extensions.conventions/wiki/)

```
_kernel.Bind(x => x
                .FromAssemblyContaining<ICommandInvoker>()
                .SelectAllClasses().Excluding<IDocumentSession>()
                .BindAllInterfaces()); 
```

# php - 没有刷新页面就不会发生重定向（php + jqmobile）

> ID：10616920
> 
> 赞同：0
> 
> 时间：2012-05-16T10:44:36.077
> 
> 标签：php, jquery-mobile

我有一个这样的html：

```
<!doctype html>
<html manifest="">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body>
<div data-role="page" id="Find">
    <div data-theme="b" data-role="header" data-position="fixed">
        <h3>test</h3>
    </div>
    <div data-role="content">
        <form action="handler.php" id="findForm" >
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup">
                    <label for="textinputf1"> keyword: </label> <input id="textinputf1"  name="keyword" placeholder="" value="" type="text" />
                </fieldset>
            </div>
            <input type= "submit" data-theme="g" value="Find" />
        </form>
    </div>
</div>

<div data-role="page" id="Results">
    <div data-theme="b" data-role="header" data-position="fixed">
        <h3>Results</h3>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-filter="true">
            <li><a href="">HEllo</a></li>
            <li><a href="">Bye</a></li>
        </ul>
    </div>
</div>

</body>
</html>​ 
```

像这样的 handler.php：

```
<?php 
//...
if( let's say false ) {
    header("location:.");
}else{
    header("location:./#Results");
    //header("Refresh:0;url=/application/test/#Results");   
} 
```

使用 header+refresh 或 header+location，当我提交表单时，我在 url 栏中看到： .../handler.php?keyword=test

但我没有被重定向，如果我刷新页面（从 url 栏或 F5 中按回车键）然后我会到达#Results，但不会自动

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:48:18.403

jquery mobile 可能使用 ajax 来处理您的表单。您应该为表单切换 ajax 处理

[jQuery Mobile 表单示例](http://jquerymobile.com/test/docs/forms/forms-sample.html)

在你的位置也放一个空间

```
Location: whereyouwanttogo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:42:17.137

在不刷新的情况下查看传递的参数的方法是放置 data-ajax="false"

如果您想使用 ajax，请不要直接调用 url。使用 AJAX 调用这些，并在 JavaScript 的帮助下基于对#Results 的响应重定向。

# iphone - 在展开的单元格中启用和禁用 UI 工具栏

> ID：10616932
> 
> 赞同：0
> 
> 时间：2012-05-16T10:46:09.583
> 
> 标签：iphone, ios, ios5, uitableview

我有一个单元格（videoCell），未选中时高度为 100px，选中时扩展为 144px。在展开的 44 像素中，我通过情节提要放置了一个工具栏（detailToolbar）。

现在这是我的问题。如果为工具栏启用了用户交互，则栏按钮可以工作，并且要简单地关闭单元格，我只需点击单元格的原始 100 像素中的任何一个。但是，当我尝试扩展单元格时，就会出现问题。如果我点击未选中单元格的底部 44 像素，则不会触发任何内容，但只有在顶部 56 像素被选中时才会响应。我假设单元格后面的 detailToolbar 阻止它工作。

这是我的一些代码。我正在使用[Simon Lee 的教程](http://locassa.com/index.php/animate-uitableview-cell-height-change/)来扩展单元格。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
// If our cell is selected, return double height

if([self cellIsSelected:indexPath]) {

return 144.0;

}

// Cell isn't selected so return single height

return 100.0;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

// Deselect
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

self.tableView.clipsToBounds = YES;

// Store cell 'selected' state keyed on indexPath
NSNumber *selectedIndex = [NSNumber numberWithBool:isSelected];
[selectedIndexes setObject:selectedIndex forKey:indexPath]; 

// This is where magic happens...
[self.tableView beginUpdates];
[self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:49:58.587

我自己已经回答过了。我在 Did Select Row 方法中执行了以下操作：

```
for(NewsCell *cell in [self.tableView visibleCells]) {
    BOOL cellIsSelected = isSelected;
    [cell.detailToolbar setUserInteractionEnabled:cellIsSelected];
} 
```

它完美无缺！

# java - 从excel单元格中读取日期值作为字符串

> ID：10616935
> 
> 赞同：10
> 
> 时间：2012-05-16T10:46:21.520
> 
> 标签：java, apache-poi

我正在使用 apache poi 库来读取 excel 文件。我在阅读密码单元格时被卡住了。如果用户在密码单元格中给出日期作为密码，即 2012 年 5 月 16 日。我将此值读取为“41045”，而值应为“16/05/2012”。这是我的代码：

```
cell = row.getCell(); // date in the cell password '16/05/2012'
switch (cell.getCellType()) {

case HSSFCell.CELL_TYPE_STRING:
    cellValue = cell.getRichStringCellValue().getString();
    break;
case HSSFCell.CELL_TYPE_NUMERIC:
    if(cellCount == TEMPLATE_PASSWORD) {// if cell is password
        cell.setCellType(Cell.CELL_TYPE_STRING);
        cellValue = cell.getRichStringCellValue().getString(); // value read is 41045 and not "16/05/2012"
    }
    break;
default:
} 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T20:55:29.067

您在 POI 中寻找的类是[DataFormatter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)

当 Excel 写入文件时，一些单元格存储为文字字符串，而其他单元格存储为数字（包括日期）。对于后者，代表单元格的浮点值存储在文件中，因此当您向 POI 询问单元格的值时，这就是它实际拥有的值。

但有时，特别是在进行文本提取时（但并非总是如此），您希望使单元格值看起来像在 Excel 中所做的那样。并非总是可以在字符串中准确地得到它（例如，非完整空间填充），但 DataFormatter 类会让你接近。

另请注意，在 Excel 中，日期从 ~1900 开始存储为浮点数，这就是为什么您看到的是数字而不是日期的原因。使用 DataFormatter （或类似的）将其呈现为日期

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-28T07:43:04.153

使用以下代码获取您在 Excel 表中输入的确切日期格式。

```
DataFormatter df = new DataFormatter();
stringCellValue = df.formatCellValue(cell); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T11:07:35.547

在将单元格值保存到 xls 时，使用 ' 作为前缀会将其呈现为字符串单元格。因此，您从该单元格读取的任何内容都将被视为字符串并按原样读取。

# jsf - JSF 2.1 & IE 条件注释

> ID：10616944
> 
> 赞同：5
> 
> 时间：2012-05-16T10:47:01.083
> 
> 标签：jsf, jsf-2, conditional-comments

我注意到在 JSF 2.1.* 中，我的 IE 条件注释不再起作用。各种字符正在被 HTML 实体替换并使注释语法无效。BalusC 在另一个使用 h:outputText[的问题中](https://stackoverflow.com/questions/10195310/jsf2-1-7-renders-if-ie-tag-as-text)指出了该问题的解决方案。我的问题是我希望我的条件评论位于页面顶部，围绕第一个元素。这意味着我不能使用 h:outputText 因为我还没有定义它的命名空间。我相信无论如何都是正确的。这是一个代码示例。

现在大多数 JSF 页面都会以类似于 HTML5 Boilerplate 语法的模板开始：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 my-application" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8 my-application" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9 my-application" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js my-application" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" lang="en"><!--<![endif]-->
<h:head>
  <meta charset="utf-8" />
  ... 
```

使用 BalusC 提到的解决方案，我希望`<h:outputText />`在第 2 行，但尚未定义 h 命名空间。这是一个我可以使用的元素，我可以将各种命名空间附加到但不会影响我的最终 HTML？还有什么其他想法可以解决这个问题吗？

李，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T11:41:53.243

将其全部包装在 a 中`<f:view>`并在那里定义名称空间。

```
<!DOCTYPE html>
<f:view xmlns="http://www.w3.org/1999/xhtml" ...>
    ...
</f:view> 
```

否则，整个 JSF 视图已经隐式包装在`<f:view>`.

# jquery - 没有执行目标 html 页面的脚本

> ID：10616946
> 
> 赞同：0
> 
> 时间：2012-05-16T10:47:09.323
> 
> 标签：jquery, html, css, jquery-mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:51:57.940

如果您使用的是 jQuery mobile，则不应使用`$(document).ready()`use`$(document).bind('pageinit')`代替。

`$(document).raedy()`加载第一页时仅触发一次事件。任何后续页面都使用 AJAX 调用加载，因此没有 document.ready 事件。

# internet-explorer - 带有 Google Chrome Frame 插件的 Internet Explorer 上的 Sencha Touch

> ID：10616947
> 
> 赞同：2
> 
> 时间：2012-05-16T10:47:22.363
> 
> 标签：internet-explorer, webkit, sencha-touch, google-chrome-frame

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:32:00.457

您**可以**使用 chrome 框架扩展在 Internet Explorer 中开发 Sencha Touch 应用程序。

安装插件后，您需要添加一个注册表项以允许通过为 URL 加上前缀来强制使用扩展。

按照此处的说明进行操作：http: [//www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Testing-Your-Sites](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Testing-Your-Sites)

“您必须同时使用 gcf: 和 http: 前缀。要启用此仅用于测试的功能，请打开 regedit.exe 并在 HKCU\Software\Google\ChromeFrame 下添加 DWORD 值 AllowUnsafeURLs=1。默认情况下只有 gcf:about:blank和 gcf:about:version 是允许的。”

编辑注册表后，您可以在 URL 中调用类似这样的内容：gcf:C:\Projects\SenchaProject\index.html

当站点显示在 chrome 框架中时，IE 的开发工具似乎不起作用，因此除非您能找到其他一些很好的扩展，否则开发可能会很棘手。

# git - gitk 替换允许查看文件中的更改

> ID：10616955
> 
> 赞同：0
> 
> 时间：2012-05-16T10:47:39.880
> 
> 标签：git, ubuntu

我们开始练习代码审查，在 gitk 中进行代码审查非常痛苦，所以我正在寻找替代或**方便**的解决方法。gitk 中缺少的是以下能力：

1.  选择提交/提交范围
2.  查看那些提交所触及的文件
3.  选择其中一个文件并通过差异查看其**内容**（不仅是差异）

gitk、gitg 和 qgit 似乎只显示每个文件的差异，而不是带有差异的文件（你知道，当删除的行以红色为背景时，新行以绿色为背景）。您可以使用 Git Extensions 中的设置来获得此选项，但这是 Windows 特定的解决方案，我正在**为 Ubuntu**搜索一些东西。

还有一件事——工具应该是 gui，而不是控制台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:47:11.800

gitk 可以让你选择提交范围。在命令行上，您提供与 git log 相同的参数。例如，`gitk HEAD~10..HEAD~5`为我显示一组 5 个提交。如果您然后查看编辑视图对话框，您会看到“分支和标签”字段可以采用多种方式来指定您的提交 - 包括上面的命令行。

对于如上所示的一些提交，如果您选择一个提交，则可以在补丁视图区域中看到该提交所触及的文件。这个区域有一个错误，所以你可能需要一个最新的 gitk。我不认为你可以让它显示所有选定提交所触及的所有文件，但如果这是你想要的。

我不确定您所说的第 3 点是什么意思 - 我怀疑您可能想要文件名上的右键菜单并选择“外部差异”，这将启动您为该文件配置的外部差异程序并向您显示该文件的差异在父提交中使用自身。您可以在 gitk 首选项对话框中配置外部差异。

如果你热衷于代码审查，你可能还想研究一下[gitlab](http://gitlabhq.com/)，它可以提供一些 github 类型的 web 审查功能，比如提出合并请求和通过 web 界面对代码进行评论。或者[gerrit](http://code.google.com/p/gerrit/)用于更正式的系统，除非通过审查，否则不会将任何内容合并到公共存储库。

# macos-carbon - 在苹果事件中替换 AEAddressDesc

> ID：10616958
> 
> 赞同：0
> 
> 时间：2012-05-16T10:47:48.777
> 
> 标签：macos-carbon, appleevents

我有一个苹果事件，我需要将此事件重新发送到另一个进程。谁能告诉我怎么做？

```
static void GetEvent(AppleEvent *event)
{
    RgnHandle       cursorRgn = NULL;
    Boolean         gotEvent;

    gotEvent = WaitNextEvent(everyEvent, event, 32767L, cursorRgn);

    if (gotEvent)
       // AEProcessAppleEvent(event);
}

int main(int argc, char *argv[])
{
    ProcessSerialNumber psn;
    AppleEvent event;

    GetEvent(&event);
    GetProcessForPID([childProcess processIdentifier], &psn);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:24:52.247

`AEAddressDesc`是一种类型，所以你所说的问题没有意义。

您真正需要做的是设置事件的地址。这是一个属性；即[属性](http://developer.apple.com/legacy/mac/library/documentation/Carbon/Reference/Apple_Event_Manager/Reference/reference.html#//apple_ref/doc/c_ref/keyAddressAttr)。[_ `keyAddressAttr`](http://developer.apple.com/legacy/mac/library/documentation/Carbon/Reference/Apple_Event_Manager/Reference/reference.html#//apple_ref/doc/c_ref/keyAddressAttr)像设置 Apple 事件描述符的任何其他属性一样设置它。

# php - 如何通过 PHP 或 Javascript 检查 HTML 代码是否有效

> ID：10616962
> 
> 赞同：1
> 
> 时间：2012-05-16T10:48:00.523
> 
> 标签：php, javascript, html, validation

我让我的用户在他们的个人资料页面上创建自己的小部件。小部件是由用户输入的 HTML 代码创建的。

但有时，如果用户输入无效的 html 代码，小部件字段会损坏。为了避免这种情况，我必须确保用户输入的 html 代码是有效的。

我的问题是如何通过 PHP 或 Javascript 检查 html 代码验证。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:51:46.037

你可以使用[整洁](http://php.net/tidy)的php 扩展；

您可以用它做很多事情，但对于您的情况，我认为您可以使用该`repairString`方法获取用户输入的**干净**版本并将其与初始版本进行比较，

像这样的东西：

```
$tidy = new tidy();
$clean = $tidy->repairString($user_input); 
```

如果在方法过程中没有进行任何更改`repairString`；`$user_input`并且`$clean`应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:53:23.937

看看这个[SO question/answers](https://stackoverflow.com/questions/5030392/x-html-validator-in-php)。-Class[`DOMDocument`](http://de2.php.net/manual/en/domdocument.validate.php)可以使用 PHP 验证您的 HTML。

# mysql - 在重复字段的情况下获取mysql中的字段总和选择最大值

> ID：10616968
> 
> 赞同：3
> 
> 时间：2012-05-16T10:48:14.997
> 
> 标签：mysql, sum, distinct, max

我有这个

```
------------------------------------
 course_id  | total marks | year  
------------------------------------
   1              50         1   -------> I want to remove this from the sum               
   2              50         1
   3              50         1  
   1              100        2  
------------------------------------ 
```

我真的不知道该怎么做，

我有 3 门不同的课程，我想获得总分的总和，但考虑到最大年数，使用不同的 course_id，结果应该是 200，提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:56:25.200

您需要使用子查询来确定每门课程的最长年份，然后再次将其与表连接以获得分数：

```
SELECT SUM(`total marks`)
FROM   `table`
  NATURAL JOIN (
    SELECT course_id, MAX(year) AS year
    FROM   `table`
    GROUP BY course_id
  ) AS y 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/99cef/1)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:07:45.490

就这么简单：

```
SELECT SUM(m) FROM (
                    SELECT   total_marks AS m
                    FROM     table AS t
                    WHERE    year = (
                                     SELECT MAX(year) 
                                     FROM   table
                                     WHERE  course_id = t.course_id
                                    )
                   ) AS v 
```

# android - 从我们的位置找到最近的位置

> ID：10616971
> 
> 赞同：0
> 
> 时间：2012-05-16T10:48:21.077
> 
> 标签：android, geolocation, locationmanager

我正在开发一个 Android 应用程序。

我正在从服务器获取纬度和经度列表。

我必须根据我的位置安排这些值。我的意思是首先是最近的纬度/经度，然后是下一个等等。

我有我的经纬度和经纬度列表。我怎样才能找到最近的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:53:12.583

伪代码：

```
location.distanceTo(locFromServer);
和排序  
Colection.sort(listOfLocations;new Comparator(){
相比于（）{
// location.distanceTo(locFromServer)
}
}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:57:18.467

您可以简单地计算用户位置到下载位置的距离，并选择最小的一个。

看看这里：[更快的方法来计算两点之间的地理距离](https://stackoverflow.com/questions/6409035/quicker-way-to-calculate-geographic-distance-between-two-points)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:01:26.847

这可能不是最好的方法，但它有效:)

```
public static final double PI = 3.14159265;
    public static final double deg2radians = PI/180.0;
    public static final double miles = 0.000621371192;
    public static final double kms = 0.001;

    public static double getDistance(double latitude1, double longitude1, double latitude2,double longitude2) {

         double distance;  

         Location locationA = new Location("point A");  

         locationA.setLatitude(latitude1);  
         locationA.setLongitude(longitude1);  

         Location locationB = new Location("point B");  

         locationB.setLatitude(latitude2);  
         locationB.setLongitude(longitude2);  

         distance = locationA.distanceTo(locationB); 
         double radd = distance * kms;

         return radd;
    } 
```

# php - 如果将文件移动到不同的目的地，是否可以删除数据库行？

> ID：10616975
> 
> 赞同：0
> 
> 时间：2012-05-16T10:48:37.200
> 
> 标签：php

我有一个文件可以移动到两个地方，具体取决于用户在单独的页面上单击了哪个按钮：

目前我已经说明文件是否移动到“ImageFiles”文件夹中，然后移动文件夹并插入数据库行。

但我还想包括如果文件尚未上传到“ImageFiles”文件夹中，则使用以下代码删除数据库行：

```
$imagecancelsql = "DELETE FROM Image 
                   WHERE ImageFile = 'ImageFiles/".
                   mysql_real_escape_string($_FILES['fileImage']['name'])."'";
mysql_query($imagecancelsql); 
```

这可能吗？如果可以，如何将它写在我在 php 脚本中的当前 if/else 语句中？

下面是php脚本：

```
<?php

session_start();

...//connect to DB

$result = 0;

if( is_file("ImageFiles/".$_FILES['fileImage']['name'])) {
$parts = explode(".",$_FILES['fileImage']['name']);
$ext = array_pop($parts);
$base = implode(".",$parts);
$n = 2;

while( is_file("ImageFiles/".$base."_".$n.".".$ext)) $n++;
$_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

    $imagesql = "INSERT INTO Image (ImageFile) 
    VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

    mysql_query($imagesql);

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

mysql_query($imagesql);

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:58:39.890

如果我理解正确，以下代码应该可以按预期工作。如果找到该文件，新文件将替换它并向您的数据库中插入一个新条目。如果找不到文件，则将从您的表中删除数据库条目。

```
// Stores the final result
// 0 = File wasnt uploaded and the row has been removed from table
// 1 = File was uploaded and the row has added to the table
$result = 0;
if (is_file("ImageFiles/" . $_FILES['fileImage']['name'])) {
    move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]);

    $imagesql = "INSERT INTO Image (ImageFile) VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";
    mysql_query($imagesql);

    // Mark result as 1 - we have added the file to teh folder and a entry to the table
    $result = 1;
} else {
    $imagecancelsql = "DELETE FROM Image WHERE ImageFile = 'ImageFiles/" . mysql_real_escape_string($_FILES['fileImage']['name'])."'";
    mysql_query($imagecancelsql);
} 
```

# javascript - 在 javascript 中启用禁用的 CheckBoxList - 回发后无法识别选中的项目

> ID：10616976
> 
> 赞同：0
> 
> 时间：2012-05-16T10:48:39.173
> 
> 标签：javascript, asp.net, checkboxlist

我有一个 CheckBoxList 可以加载为禁用，但可能需要在某些客户端操作后启用。

我可以使用jQuery启用复选框，但问题是提交页面后，无法识别ChceckBoxList中的选定项目（可能是因为控件不在ViewState中）。

场景的一个简单示例：

```
<asp:CheckBoxList ID="chkList1" runat="server" Enabled="false" ClientIDMode="Static">
       <asp:ListItem Value="123" />
       <asp:ListItem Value="456" />
       <asp:ListItem Value="789" />
</asp:CheckBoxList>

$(document).ready(function()
{
    $("#divEnable").click(function()
    {
        var inputs = $("#chkList1").find("input");
        for (var i = 0; i < inputs.length; i++)
        {
            inputs[i].disabled = false;
        }
    });
} 
```

然后在启用复选框后，选择它们并发送回发 - 没有识别到​​选定的项目。

我尝试“手动”禁用项目，如

```
chkList1.Items[0].Attributes.Add("disabled", "disabled"); 
```

但这不起作用（`disabled`属性附加到包含跨度而不是输入控件）。

我还考虑使用隐藏字段来跟踪复选框的选择，但由于我在一个网格中有多个 CheckBoxList，这将是非常不雅的。

有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:04:32.607

尝试这个：

```
$(document).ready(function()
{
    $("#divEnable").click(function()
    {
        var inputs = $("#chkList1").find("input")
            .each(function(){
                            //if($(this).is(":disabled"))
                            //{
                               $(this).prop("disabled",true);
                            //}
                          });      
}); 
```

参考：
[jQuery asp control .prop("disabled", "") not enable check box in IE 9](https://stackoverflow.com/questions/9109938/jquery-asp-control-propdisabled-not-enabling-check-box-in-ie-9)
[Unable to handle disable check box](https://stackoverflow.com/questions/8654894/unable-to-handle-disable-check-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:14:12.800

你可以用这个

```
 for (i = 0; i < document.forms[0].length; i++)
   {
      e = document.forms[0].elements[i];
      if (e.id.indexOf("chklist") != -1)
      {
           e.disabled = false;
      }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T13:52:21.840

我遇到过同样的问题。我解决此问题的方法是启用复选框列表，然后在加载页面时禁用使用脚本。这样控件就进入了视图状态，但仍然无法启动。

```
 var checkBoxListToChange = document.getElementById('');
    var checkboxes = checkBoxListToChange.getElementsByTagName("input");
    for (var x = 0; x < checkboxes.length; x++) {
        checkboxes[x].disabled = true;
    } 
```

# c# - 传递 GridView 模板字段 我有一个 GridView 模板字段，其中包含一个 ASP:Label 字段，该字段每行都有一个唯一的参考号。我还为该控件分配了一个打开的 Javascript 函数，该函数在新窗口中打开一个 URL 并显示具有相同参考编号的文档。< 问问题 问问题 2012-05-16T10:48:39.907 3950 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个 GridView 模板字段，其中包含一个 ASP:Label 字段，该字段每行都有一个唯一的参考号。我还为该控件分配了一个打开的 Javascript 函数，该函数在新窗口中打开一个 URL 并显示具有相同参考编号的文档。 我不知道如何在用户单击特定行上的 LinkBut ton 时获取参考号，并在窗口打开之前将其传递给我的 Javascript 函数。 代码： enter code here function openPreview() { var url = "quotereport.aspx?view=esq&&ref=REFNUMBER"; window.open(url); } <asp:templatefield headertext="" showheader="False"><itemtemplate><asp:linkbutton id="lbNewWindow" runat="server" onclientclick="openPreview ()">Window</asp:linkbutton></itemtemplate></asp:templatefield> 任何帮助将非常感激。 您必须将 RowDataBound 事件添加到网格中。在 RowDataBound 事件中，创建的每一行都可以通过数据访问。将 javascript 绑定到链接按钮而不是 html，然后将参考编号从 RowDataBound 事件传递给 javascript 函数。 protected void gvListing_RowDataBound(object sender, GridViewRowEventArgs e) { if (e.Row.RowType == DataControlRowType.DataRow) { System.Web.UI.WebControls.LinkButton lbNewWindow= new System.Web.UI.WebControls.LinkButton(); lbNewWindow = (System.Web.UI.WebControls.LinkButton)e.Row.FindControl("lbNewWindow"); if (lbNewWindow!= null) { string YourRefNumber = DataBinder.Eval("e.Row.DataItem", "ColumnNameInDataSource").ToString(); lbNewWindow.Attributes.Add("onclick","openPreview('"+ YourRefNumber + "')"); } } } c#javascript.netgridview 4 1 回答 1 This answer is useful 2 您必须将 RowDataBound 事件添加到网格中。在 RowDataBound 事件中，创建的每一行都可以通过数据访问。将 javascript 绑定到链接按钮而不是 html，然后将参考编号从 RowDataBound 事件传递给 javascript 函数。 protected void gvListing_RowDataBound(object sender, GridViewRowEventArgs e) { if (e.Row.RowType == DataControlRowType.DataRow) { System.Web.UI.WebControls.LinkButton lbNewWindow= new System.Web.UI.WebControls.LinkButton(); lbNewWindow = (System.Web.UI.WebControls.LinkButton)e.Row.FindControl("lbNewWindow"); if (lbNewWindow!= null) { string YourRefNumber = DataBinder.Eval("e.Row.DataItem", "ColumnNameInDataSource").ToString(); lbNewWindow.Attributes.Add("onclick","openPreview('"+ YourRefNumber + "')"); } } } 于 2012-05-16T11:10:26.827 回答 Related 1 php - Wordpress 网站等待 7 秒发送更多 HTTP 请求 2 android - 是否可以将服务放在子包中？ 1 xcode - 仅在全屏模式下具有最大宽度的 Mac OSX Lion 应用程序 6 java - 执行速度很慢 1 extjs - 是否可以将 ExtJs 与 WF 一起使用？ 1 vba - 从 Office 2010 中的另一个模块运行子程序？ 2 firefox - 火狐浏览器禁用安全模式 0 html - 处理xsl中的html表格 3 git - Git - “非单调索引” 3 android - Android 权限，required="false"，失败 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10616977
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, javascript, .net, gridview

我有一个 GridView 模板字段，其中包含一个 ASP:Label 字段，该字段每行都有一个唯一的参考号。我还为该控件分配了一个打开的 Javascript 函数，该函数在新窗口中打开一个 URL 并显示具有相同参考编号的文档。

我不知道如何在用户单击特定行上的 LinkBut​​ton 时获取参考号，并在窗口打开之前将其传递给我的 Javascript 函数。

代码：

```
enter code here

function openPreview() 
{
     var url = "quotereport.aspx?view=esq&&ref=REFNUMBER"; window.open(url);
}

<asp:TemplateField HeaderText="" ShowHeader="False">
    <ItemTemplate>
    <asp:LinkButton ID="lbNewWindow" runat="server" OnClientClick="openPreview    ()">Window</asp:LinkButton>
</ItemTemplate>
</asp:TemplateField> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:10:26.827

您必须将 RowDataBound 事件添加到网格中。在 RowDataBound 事件中，创建的每一行都可以通过数据访问。将 javascript 绑定到链接按钮而不是 html，然后将参考编号从 RowDataBound 事件传递给 javascript 函数。

```
 protected void gvListing_RowDataBound(object sender, GridViewRowEventArgs e)
    {           
        if (e.Row.RowType == DataControlRowType.DataRow)
        {                
          System.Web.UI.WebControls.LinkButton lbNewWindow= new System.Web.UI.WebControls.LinkButton();    
                lbNewWindow = (System.Web.UI.WebControls.LinkButton)e.Row.FindControl("lbNewWindow");                    
                if (lbNewWindow!= null)
                {
                    string YourRefNumber = DataBinder.Eval("e.Row.DataItem", "ColumnNameInDataSource").ToString();
                    lbNewWindow.Attributes.Add("onclick","openPreview('"+ YourRefNumber + "')");

                } 
         }          
    } 
```

# sql-server - GUID 是否应该用作许多表的外键

> ID：10616978
> 
> 赞同：6
> 
> 时间：2012-05-16T10:48:43.183
> 
> 标签：sql-server, database, database-design, asp.net-membership

我设计了一个使用 GUID 的数据库，`UserID`但我将`UserId`其作为外键添加到许多其他表中，并且由于我计划拥有大量数据库输入，因此我必须将其设计好。

我还使用 ASP Membership 表（不仅仅是配置文件成员、用户和角色）。

所以目前我在每个其他表中都使用 GUID 作为 PK 和 FK，这可能是不好的设计？我认为可能更好，并且是我的问题的来源，我是否应该在用户表中添加`UserId(int)`作为主键并使用此字段作为其他表的外键和用户`GUID UserId`仅供参考`aspnet_membership`？

```
aspnet_membership{UserID(uniqueIdentifier)}
Users{
UserID_FK(uniqueIdentifier) // FK to aspnet_membership table
UserID(int) // primary key in this table --> Should I add this
...
}
In other tables user can create items in tables and I always must add UserId for example:
TableA{TableA_PK(int)..., CreatedBy(uniqueIdentifier)}
TableB{TableB_PK(int)..., CreatedBy(uniqueIdentifier)}
TableC{TableC_PK(int)..., CreatedBy(uniqueIdentifier)}
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:22:13.050

所有二进制数据类型（唯一标识符是二进制（16））都可以作为外键。但是 GUID 作为主键可能会导致另一个小问题。默认情况下主键是集群的，但是GUID是随机生成的，不像IDENTITY那样顺序生成，所以会频繁的拆分IO页面，会造成一点性能下降。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:34:17.517

最终的答案是，这真的取决于。

[Microsoft 已在此处](http://blogs.msdn.com/b/sqlserverfaq/archive/2010/05/27/guid-vs-int-debate.aspx)记录了每个的性能差异。虽然本文与您的情况略有不同，因为您必须使用 UNIQUEIDENTIFIER 链接回 asp 成员资格，但许多讨论点仍然适用。

如果您无论如何都必须创建自己的用户表，那么拥有自己的 int 主键并将 GUID 用作外键会更有意义。它将单独的实体分开。如果将来某个时候您想为用户添加不同的成员资格怎么办？然后，您需要更新主键，该主键必须级联到引用它的任何表，并且可能会对性能造成很大影响。如果它只是用户表中的唯一列，则它是一个简单的更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:55:25.477

我会继续你目前的设计。

如果您因为比较字符串而不是整数而担心查询中的内部连接性能，那么现在根本没有区别。

# testing - Web 应用程序的模拟器或测试环境

> ID：10616979
> 
> 赞同：1
> 
> 时间：2012-05-16T10:48:46.623
> 
> 标签：testing, web-applications, simulator

我正在开发一个只能在 firefox 和 win / linux 机器上运行的网络应用程序。

我已经做了那件事，现在想用各种环境进行测试，如 mac、android、opera 浏览器等。

我的问题是是否有任何可用的测试环境（模拟器）可以让我在不同平台上测试应用程序而无需在真机上测试？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:52:12.147

您可以尝试使用 VirtualBox / VirtualPC / VMWare 等虚拟机。

某些 Windows 版本可作为 Microsoft 站点中的虚拟机映像免费获得。

其余的不确定，因为你先写

> 一个只能在 firefox 和 win / linux 机器上运行的网络应用程序。

...但是然后谈谈mac和android。

对于 android，您可以尝试使用他们的[emulator](http://developer.android.com/guide/developing/tools/emulator.html)。对于 Mac OS，恐怕您找不到合法的解决方案。

# javascript - WCF post请求中的多个非url参数

> ID：10616981
> 
> 赞同：0
> 
> 时间：2012-05-16T10:49:18.760
> 
> 标签：javascript, wcf, post

我有这样的 WCF 服务：

```
public IEnumerable<int> AddProperty(string productId, string propertyClass, Property properties) 
```

我用以下数据调用它：

```
{
    "Class":{"Name":"aoeu","Restricted":false,"Type":"ScalarProperty"},
    "DisplayName":"aoeu",
    "Id":"560",
    "Value":"aoeu"
} 
```

它工作得很好。现在我想像这样向`Property`服务中添加另一个：

```
public IEnumerable<int> AddProperty(string productId, string propertyClass, Property properties, Property properties2) 
```

我应该传递什么数据？我试过这个：

```
{
    properties: {
        "Class":{"Name":"aoeu","Restricted":false,"Type":"ScalarProperty"},
        "DisplayName":"aoeu",
        "Id":"560",
        "Value":"aoeu"
    },
    properties2: {
        "Class":{"Name":"aoeu","Restricted":false,"Type":"ScalarProperty"},
        "DisplayName":"aoeu",
        "Id":"560",
        "Value":"aoeu"
    }
} 
```

但它没有用！我尝试了一些不同的方法，但它们都不起作用:(有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:53:36.693

可以实现如上图：

```
[WebInvoke(BodyStyle=WebMessageBodyStyle.Wrapped,UriTemplate = "MultipleProperties?productId={productId}&propertyClass={propertyClass}")]    
public IEnumerable<int> AddProperty(string productId, string propertyClass, Property properties, Property properties2) 
```

当您想要序列化超过 1 个对象作为 POST 请求的一部分时，您需要将主体样式设置为 Wrapped。

现在假设您的 Property 类定义如下：

```
[DataContract]
    public class Property
    {
        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    } 
```

原始 Http 请求如下所示：

```
POST http://locahost/XMLService/Service1.svc/AddProperty?productId=1&propertyClass=2 HTTP/1.1
User-Agent: Fiddler
Content-Type: application/json
Content-Length: 134

{"properties": {"boolvalue": "true", "stringvalue": "str"}, "properties2" :{"boolvalue": "true", "stringvalue":"str2"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:59:39.873

你能这样做吗？

```
public IEnumerable<int> AddProperty(string productId, string propertyClass, Property[] properties); 
```

进而

```
[ 
    { 
        "Class":{"Name":"aoeu","Restricted":false,"Type":"ScalarProperty"}, 
        "DisplayName":"aoeu", 
        "Id":"560", 
        "Value":"aoeu" 
    }, 
    { 
        "Class":{"Name":"aoeu","Restricted":false,"Type":"ScalarProperty"}, 
        "DisplayName":"aoeu", 
        "Id":"560", 
        "Value":"aoeu" 
    } 
] 
```

我假设您只向我们展示了属性代码而不是 productId、propertyClass 等，因为我看不到它们？

# java - 从另一个项目导入一个类或在当前项目中创建一个类（NetBeans）

> ID：10616982
> 
> 赞同：1
> 
> 时间：2012-05-16T10:49:25.073
> 
> 标签：java, class, netbeans

昨天我开始从 Oracle 网站学习 Java 教程，但第一个程序（Bicycle :) 有问题。我只用一个类（`class Bicycle`）创建了项目，然后打开新项目并编写了创建两个`Bicycle`对象并调用它们的方法的类。当我尝试构建项目时收到错误消息：

`"error: cannot find symbol Bicycle bike1=new Bicycle(); symbol: class Bicycle location: class BicycleDemo"`.

我尝试右键单击库并添加项目 - 没用，尝试在当前项目中创建新类（具有相同的内容） - 没用。该怎么办？

```
package bicycledemo;
/**
*
* App witch simulates using of Bicyle class.
*/
public class BicycleDemo {
import Bicycle;  
public static void main(String[] args) {
    Bicycle bike1=new Bicycle();
    Bicycle bike2=new Bicycle();

    bike1.changeCadence(34);
    bike1.increaseSpeed(3);
    bike1.changeGear(2);
    bike1.printStates();

    bike2.changeCadence(3);
    bike2.increseSpeed(12);
    bike2.printStates();
}
} 
```

而且我在项目 BicycleDemo 的库中也有整个 C:\Users\nojo\Documents\NetBeansProjects\Bicycle 文件。Bicycle.java 的代码：

```
public class Bicycle {
int cadence=0;
int speed=0;
int gear=1;

void changeCadence(int newValue){
cadence=newValue;
}
void increaseSpeed(int increase){
speed=speed+increase;
}
void applyBreaks(int decrease){
speed=speed-decrease;
}
void changeGear(int gearNumber){
gear=gearNumber;
}
void printStates(){
System.out.println("cadence:" + cadence + "speed:" + speed +
        "gear:" + gear);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:38:11.137

Looks like your import statement is in the wrong location. It should be below the package name and before the the beginning of the clas definition.

```
package bicycledemo;
import <yourpackagename>.Bicycle; 
```

You can do this where you are currently declaring bike1 but you have to use thepackage name and class name when you do.

```
<yourpackagename>.Bicycle bike1 = new Bicycle(); 
```

What you're reading is a tutorial on the "concepts" of OO programming and not an in depth tutorial, Packages are explained further along in the tutorial.

Your problem is probably you made two projects, one has the bicycle class and one has the bicycledemo class, correct? If that is correct then in both projects your class is in the default package, which is bad. To fix your problem, create a new project with both classes in the same project.

# jquery - jQuery弹出框相对于页面位置的高度定位

> ID：10616986
> 
> 赞同：1
> 
> 时间：2012-05-16T10:49:43.857
> 
> 标签：jquery, popup, resize, position, height

我目前在单击链接时会出现一个弹出框。我遇到的问题是链接大约在页面的一半处，当我单击链接时，覆盖高度不是 100%，并且该框出现在从页面顶部向下 80px 处。无论我制作什么尺寸的页面（与我的宽度一样），我都想以某种方式使框叠加高度为 100%（与我的宽度相同）并且有框，因此相对于我当时在页面上可以看到的内容，它距离屏幕顶部 80px而不是第一次加载页面时。

这是我目前的代码：

```
 //Popup dialog
      function popup(message) {

     // get the screen height and width  
     var maskHeight = $(document).height();  
     var maskWidth = $(window).width();

     // calculate the values for center alignment    
     var dialogLeft = (maskWidth/2) - ($('#dialog-box').width())/2; 

     // Set overlay to fill screen
     $("#dialog-overlay").css("width","100%").fadeIn();

     // Set dialogue box 80px from top and central
     $('#dialog-box').css({top:80, left:dialogLeft}).fadeIn();

     // display the message
     //$('#dialog-message').html(message);

     // Close button fades out overlay and message  
     $('.button').live('click',function()
     {
    $(this).parent().fadeOut();
    $('#dialog-overlay').fadeOut();
    return false;
     });

     window.onresize = function() {
     var maskWidth = $(window).width();
          var dialogLeft = (maskWidth/2) - ($('#dialog-box').width())/2; 
     $('#dialog-box').css({top:80, left:dialogLeft});
     }

 } 
```

我为我所追求的效果编码的选项：

```
 //Popup about location box
 function popup(message) {

// get the screen height and width  
var maskHeight = $(document).height();  
var maskWidth = $(window).width();

// calculate the values for center alignment     
var dialogLeft = (maskWidth/2) - ($('#dialog-box').width()/2); 
var dialogTop = (maskHeight/2) - ($('#dialog-box').height()/2);

// Set overlay to fill screen
$("#dialog-overlay").css("width","100%").fadeIn();
$("#dialog-overlay").css("height",maskHeight).fadeIn();

// Set dialogue box 80px from top and central
$('html, body').animate({ scrollTop: 0 }, 500);
$('#dialog-box').css({top:80, left:dialogLeft}).delay(500).fadeIn();

// display the message
//$('#dialog-message').html(message);

// Close button fades out overlay and message   
$('.button').live('click',function()
{
    $(this).parent().fadeOut();
    $('#dialog-overlay').fadeOut();
    return false;
});

window.onresize = function() {
     var maskWidth = $(window).width();
     var dialogLeft = (maskWidth/2) - ($('#dialog-box').width())/2; 
     $('#dialog-box').css({top:80, left:dialogLeft});
}

 } 
```

# java - 可以从类本身中取消一个类吗？

> ID：10616987
> 
> 赞同：2
> 
> 时间：2012-05-16T10:49:46.583
> 
> 标签：java, class, this

例如，此代码有效吗？

```
class abc{
    int x,y;
    abc(int x,int y){
        this.x=x;
        this.y=y;
        while(true)
            update();
    }

    public void update(){
        x--;
        y--;
        if(y==0)
            this=null;
    }
 } 
```

如果以上不成立，请解释原因。我需要一个在某些迭代后不再存在的类。请提出上述方法的替代方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:53:04.090

不，此代码无效。

此外，如果它是有效的，我看不出它会有什么有意义的语义。

> 请提出上述方法的替代方案。

只要有对它的引用，该对象就存在。要使对象有资格进行垃圾回收，您只需要确保没有指向它的引用（在您的情况下，这应该在`y`达到零时立即发生）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T11:00:52.617

不，原因是您没有使对象为空。当你说`obj = null;`你只是把`null`以前持有对对象的引用的变量。可能有很多其他对同一对象的引用。

我认为您想要做的是使对象无效并使其被垃圾收集，但在类内部做出此决定。如果这是问题，我建议您查看弱引用。

其他可能的解决方案是在 java 中实现一种“智能引用”。你可以创建你的类`SmartReference`来保存对对象的真实引用。该对象应该持有对这个智能引用的回调并调用它的方法`invalidate()`，就像你的语法错误表达式一样`this = null`。您必须注意不要直接引用此类对象，而只能通过智能引用。

唯一的问题是“你为什么要这样做？”。确实，这会导致代码更加复杂和不稳定。想象一下：对象决定使自己无效，因此“智能引用”所持有的引用变为`null`. 现在，这个智能引用的所有持有者在尝试使用该对象时都将获得 NPE！这正是java中不存在这种机制并且应用程序程序员无法直接管理内存的原因。

底线：删除所有对象引用并让 GC 完成其艰巨的工作。相信它。它知道清理垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T00:03:12.980

我认为这是一个很好的问题。我有很多情况，我希望对象在构造之后/期间验证自己，如果它找到理由，只返回一个空值或返回堆栈并跳过创建该对象。

主要是在您从其他值列表创建对象列表的情况下。如果一个值是垃圾并且您希望您的对象能够识别它。

而不是必须在类本身之外编写一个函数来验证创建，让对象来做这件事会更整洁。

很遗憾java不允许这样的事情假设程序员可能会把它搞砸。如果你的代码很好，那将是一个不错的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:54:08.577

我认为您需要重新考虑为什么要这样做，因为您所建议的内容在 Java 中甚至不作为一个概念存在。

`this`变量总是指对象本身。你不能“取消”一个对象，只能是一个*引用*（毕竟，你所做的是分配一个引用来指向`null`而不是它的前一个对象）。这样做是没有意义的`this`，因为它*始终*是指向范围内当前对象的指针。

您是否试图强制销毁对象/收集垃圾？如果是这样，当你的代码的其他部分仍然有对它的引用时，你不能这样做（如果它们没有引用，无论如何它都会被垃圾收集）。

无论如何，您希望/认为这会做什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:01:43.070

你的代码必须得到编译时错误..因为..

```
The left-hand side of an assignment must be a variable 
```

`this`不是变量它是关键字..

```
this=null; 
```

# c# - 我正在尝试从网站检索所有 http 和 https 链接，但有时我得到空异常

> ID：10616994
> 
> 赞同：0
> 
> 时间：2012-05-16T10:50:25.240
> 
> 标签：c#, html-parsing, html-agility-pack

```
public partial class Form1 : Form
{
   int y = 0;
   string url = @"http://www.google.co.il";
   string urls = @"http://www.bing.com/images/search?q=cat&go=&form=QB&qs=n";

   public Form1()
   {
       InitializeComponent();
       //webCrawler(urls, 3);
       List<string> a = webCrawler(urls, 1);
       //GetAllImages();
   }

   private int factorial(int n)
   {
      if (n == 0) return 1;
      else y = n * factorial(n - 1);
      listBox1.Items.Add(y);
      return y;
   }

   private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
   {
       List<string> mainLinks = new List<string>();

       if (document.DocumentNode.SelectNodes("//a[@href]") == null)
       { }

       foreach (HtmlNode link in document.DocumentNode.SelectNodes("//a[@href]"))
       {
           var href = link.Attributes["href"].Value;
           mainLinks.Add(href);
       }

       return mainLinks;
   }

   private List<string> webCrawler(string url, int levels)
   {
      HtmlAgilityPack.HtmlDocument doc;
      HtmlWeb hw = new HtmlWeb(); 

      List<string> webSites;// = new List<string>();
      List<string> csFiles = new List<string>();

      csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
      csFiles.Add("current site name in this level is : "+url);
      /* later should be replaced with real cs files .. cs files links..*/

      doc = hw.Load(url);
      webSites = getLinks(doc);

      if (levels == 0)
      {
         return csFiles;
      }
      else
      {
         int actual_sites = 0;

         for (int i = 0; i < webSites.Count() && i< 100000; i++) // limiting ourseleves for 20 sites for each level for now..
         //or it will take forever.
         {
             string t = webSites[i];
             /*
                    if (!webSites.Contains(t))
                    {
                        webCrawler(t, levels - 1);
                    }
             */

             if ( (t.StartsWith("http://")==true) || (t.StartsWith("https://")==true) ) // replace this with future FilterJunkLinks function
             {
                actual_sites++;
                csFiles.AddRange(webCrawler(t, levels - 1));
                richTextBox1.Text += t + Environment.NewLine;
             }
          }

          // report to a message box only at high levels..
          if (levels==1)
             MessageBox.Show(actual_sites.ToString());

          return csFiles;
       }                
    } 
```

在将几个站点发送到该`getLinks`函数后引发异常。

例外是在getLinks函数就行了：

```
foreach (HtmlNode link in document.DocumentNode.SelectNodes("//a[@href]")) 
```

> 你调用的对象是空的

我尝试在那里使用 IF 来检查它是否为空，然后我做`return mainLinks;`了一个列表。

但如果我这样做，我不会从网站上获得所有链接。

现在我在构造函数中使用 url，如果我使用 url ( `www.google.co.il`)，几秒钟后我会得到同样的异常。

我不知道为什么会抛出这个异常。这个例外有什么原因吗？

> System.NullReferenceException 未处理
> Message=Object 引用未设置为对象的实例。
> Source=GatherLinks
> StackTrace：
> 位于 D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs 中的 GatherLinks.Form1.getLinks(HtmlDocument 文档)：D
> 中 GatherLinks.Form1.webCrawler(String url, Int32 级别) 的第 55 行:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:第 76 行
> GatherLinks.Form1.webCrawler(String url, Int32 levels) in D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 104
> 在 D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs
> 中的 GatherLinks.Form1..ctor()：D:\C-Sharp\GatherLinks\GatherLinks\ 中 GatherLinks.Program.Main() 的第 29 行GatherLinks\Program.cs：第 18 行
> 在 System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
> 在 System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
> 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 在 System.Threading。 ThreadHelper.ThreadStart_Context(Object state)
> at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
> at System.Threading.ThreadHelper.ThreadStart()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:14:33.940

问题似乎是你正在测试 null 但然后什么也没做 - 这里

```
 if (document.DocumentNode.SelectNodes("//a[@href]") == null)
            {
            } 
```

我怀疑您想处理 null 情况，但还没有编写代码来执行此操作。你可能想要这样的东西：

```
 private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {
           List<string> mainLinks = new List<string>();
           if (document.DocumentNode.SelectNodes("//a[@href]") != null)
            {

                foreach (HtmlNode link in document.DocumentNode.SelectNodes("//a[@href]"))
                {
                    var href = link.Attributes["href"].Value;
                    mainLinks.Add(href);
                }
            }
            return mainLinks;
        } 
```

你可能想整理一下更像：

```
 private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {
           List<string> mainLinks = new List<string>();
           var linkNodes = document.DocumentNode.SelectNodes("//a[@href]");
           if (linkNodes != null)
            {
                foreach (HtmlNode link in linkNodes)
                {
                    var href = link.Attributes["href"].Value;
                    mainLinks.Add(href);
                }
            }
            return mainLinks;
        } 
```

# wcf - WCF 3.5 找到客户端用于获取服务的 url（服务器端）

> ID：10616995
> 
> 赞同：1
> 
> 时间：2012-05-16T10:50:26.740
> 
> 标签：wcf

我正在尝试查找客户端用于访问服务器的 url（在服务器端）。我尝试了以下方法：

```
Uri url = OperationContext.Current.Channel.RemoteAddress.Uri;
Uri url = OperationContext.Current.Channel.Local.Uri;
Uri url = OperationContext.Current.EndpointDispatcher.EndpointAddress.Uri; 
```

但这些似乎都没有正常工作。它们都返回服务器名称，（带有完全限定的域。例如 myserver.mydomain.local。即使我使用了 used myserver/myservice.svc，它也会得到全名。

此时我没有可用于测试的服务和域，请访问 mywebsite.com/myservice.svc 以查看它是否具有机器名称。

我想要得到的结果（从服务器将是）：

[http://mywebsite.com/myservice.svc](http://mywebsite.com/myservice.svc)

而不是

[http://myserver.mydomain.local/myservice.svc](http://myserver.mydomain.local/myservice.svc)

这似乎是目前正在发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:27:08.520

`OperationContext.Current.IncomingMessageHeaders.To`

应该给出客户端用来连接服务器的 Uri。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:59:00.057

如果您有权访问，则`HttpContext`可以使用`HttpContext.Current.Request.Url.ToString()`.